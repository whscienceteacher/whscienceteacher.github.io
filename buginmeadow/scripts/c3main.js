// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let L=function(t){Mh=t},k=function(t){return t*Lh},N=function(t,s){return Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},B=function(){var t=new Mh(4);return Mh!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},W=function(t){var s=new Mh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},j=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},H=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},V=function(t,s,i,e){var h=new Mh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},U=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},z=function(t,s){var i;return t===s?(i=s[1],t[1]=s[2],t[2]=i):(t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3]),t},J=function(t,s){var i=s[0],e=s[1],h=s[2],n=i*(s=s[3])-h*e;return n?(t[0]=s*(n=1/n),t[1]=-e*n,t[2]=-h*n,t[3]=i*n,t):null},q=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},$=function(t){return t[0]*t[3]-t[2]*t[1]},t=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*r+n*o,t[1]=h*r+s*o,t[2]=e*a+n*i,t[3]=h*a+s*i,t},X=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=Math.sin(i),i=Math.cos(i);return t[0]=e*i+n*r,t[1]=h*i+s*r,t[2]=e*-r+n*i,t[3]=h*-r+s*i,t},Y=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=i[0],i=i[1];return t[0]=e*r,t[1]=h*r,t[2]=n*i,t[3]=s*i,t},Z=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t},K=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},Q=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},tt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},st=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},it=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},s=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},et=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},ht=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],n=s[0],r=s[1],o=s[2],s=s[3];return Math.abs(i-n)<=vh*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(e-r)<=vh*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(h-o)<=vh*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},nt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},rt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ot=function(){var t=new Mh(6);return Mh!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},at=function(t){var s=new Mh(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},ut=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ct=function(t,s,i,e,h,n){var r=new Mh(6);return r[0]=t,r[1]=s,r[2]=i,r[3]=e,r[4]=h,r[5]=n,r},ft=function(t,s,i,e,h,n,r){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t},dt=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],s=s[5],o=i*n-e*h;return o?(t[0]=n*(o=1/o),t[1]=-e*o,t[2]=-h*o,t[3]=i*o,t[4]=(h*s-n*r)*o,t[5]=(e*r-i*s)*o,t):null},pt=function(t){return t[0]*t[3]-t[1]*t[2]},i=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],s=s[5],a=i[0],l=i[1],u=i[2],c=i[3],f=i[4],i=i[5];return t[0]=e*a+n*l,t[1]=h*a+r*l,t[2]=e*u+n*c,t[3]=h*u+r*c,t[4]=e*f+n*i+o,t[5]=h*f+r*i+s,t},mt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],s=s[5],a=Math.sin(i),i=Math.cos(i);return t[0]=e*i+n*a,t[1]=h*i+r*a,t[2]=e*-a+n*i,t[3]=h*-a+r*i,t[4]=o,t[5]=s,t},gt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e*a,t[1]=h*a,t[2]=n*i,t[3]=r*i,t[4]=o,t[5]=s,t},yt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=e*a+n*i+o,t[5]=h*a+r*i+s,t},wt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t},St=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},vt=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},Mt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},xt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},e=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},Gt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},Tt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},_t=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},It=function(t,s){var i=t[0],e=t[1],h=t[2],n=t[3],r=t[4],t=t[5],o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],s=s[5];return Math.abs(i-o)<=vh*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(e-a)<=vh*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(h-l)<=vh*Math.max(1,Math.abs(h),Math.abs(l))&&Math.abs(n-u)<=vh*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=vh*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},h=function(){var t=new Mh(9);return Mh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Ct=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Et=function(t){var s=new Mh(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},Pt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Rt=function(t,s,i,e,h,n,r,o,a){var l=new Mh(9);return l[0]=t,l[1]=s,l[2]=i,l[3]=e,l[4]=h,l[5]=n,l[6]=r,l[7]=o,l[8]=a,l},At=function(t,s,i,e,h,n,r,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t[6]=o,t[7]=a,t[8]=l,t},Ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Dt=function(t,s){var i,e,h;return t===s?(i=s[1],e=s[2],h=s[5],t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=h):(t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8]),t},Ot=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],u=(s=s[8])*r-o*l,c=-s*n+o*a,f=l*n-r*a,d=i*u+e*c+h*f;return d?(t[0]=u*(d=1/d),t[1]=(-s*e+h*l)*d,t[2]=(o*e-h*r)*d,t[3]=c*d,t[4]=(s*i-h*a)*d,t[5]=(-o*i+h*n)*d,t[6]=f*d,t[7]=(-l*i+e*a)*d,t[8]=(r*i-e*n)*d,t):null},Lt=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],s=s[8];return t[0]=r*s-o*l,t[1]=h*l-e*s,t[2]=e*o-h*r,t[3]=o*a-n*s,t[4]=i*s-h*a,t[5]=h*n-i*o,t[6]=n*l-r*a,t[7]=e*a-i*l,t[8]=i*r-e*n,t},kt=function(t){var s=t[0],i=t[3],e=t[4],h=t[5],n=t[6],r=t[7],o=t[8];return s*(o*e-h*r)+t[1]*(-o*i+h*n)+t[2]*(r*i-e*n)},n=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],w=i[7],i=i[8];return t[0]=c*e+f*r+d*l,t[1]=c*h+f*o+d*u,t[2]=c*n+f*a+d*s,t[3]=p*e+m*r+g*l,t[4]=p*h+m*o+g*u,t[5]=p*n+m*a+g*s,t[6]=y*e+w*r+i*l,t[7]=y*h+w*o+i*u,t[8]=y*n+w*a+i*s,t},Nt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=o,t[5]=a,t[6]=c*e+i*r+l,t[7]=c*h+i*o+u,t[8]=c*n+i*a+s,t},Bt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=Math.sin(i),i=Math.cos(i);return t[0]=i*e+c*r,t[1]=i*h+c*o,t[2]=i*n+c*a,t[3]=i*r-c*e,t[4]=i*o-c*h,t[5]=i*a-c*n,t[6]=l,t[7]=u,t[8]=s,t},Wt=function(t,s,i){var e=i[0],i=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=i*s[3],t[4]=i*s[4],t[5]=i*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},jt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Ht=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Vt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ut=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},zt=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(l=i+i),n=(r=s[1])*l,r=r*(u=r+r),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*h;return t[0]=1-r-(e=e*h),t[3]=n-s,t[6]=o+u,t[1]=n+s,t[4]=1-i-e,t[7]=a-l,t[2]=o-u,t[5]=a+l,t[8]=1-i-r,t},Jt=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*r,w=i*a-h*r,S=i*l-n*r,b=e*a-h*o,v=e*l-n*o,M=h*l-n*a,x=u*m-c*p,G=u*g-f*p,T=c*g-f*m;return(d=y*(f=f*(s=s[15])-d*g)-w*(c=c*s-d*m)+S*T+b*(u=u*s-d*p)-v*G+M*x)?(t[0]=(o*f-a*c+l*T)*(d=1/d),t[1]=(a*u-r*f-l*G)*d,t[2]=(r*c-o*u+l*x)*d,t[3]=(h*c-e*f-n*T)*d,t[4]=(i*f-h*u+n*G)*d,t[5]=(e*u-i*c-n*x)*d,t[6]=(m*M-g*v+s*b)*d,t[7]=(g*S-p*M-s*w)*d,t[8]=(p*v-m*S+s*y)*d,t):null},qt=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},$t=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Xt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Yt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},r=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Zt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Kt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Qt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},ts=function(t,s){var i=t[0],e=t[1],h=t[2],n=t[3],r=t[4],o=t[5],a=t[6],l=t[7],t=t[8],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7],s=s[8];return Math.abs(i-u)<=vh*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-c)<=vh*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(h-f)<=vh*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(n-d)<=vh*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-p)<=vh*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(o-m)<=vh*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=vh*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=vh*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},ss=function(){var t=new Mh(16);return Mh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},is=function(t){var s=new Mh(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},hs=function(t,s,i,e,h,n,r,o,a,l,u,c,f,d,p,m){var g=new Mh(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=h,g[5]=n,g[6]=r,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},ns=function(t,s,i,e,h,n,r,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},p=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rs=function(t,s){var i,e,h,n,r,o;return t===s?(i=s[1],e=s[2],h=s[3],n=s[6],r=s[7],o=s[11],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=n,t[11]=s[14],t[12]=h,t[13]=r,t[14]=o):(t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15]),t},os=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*r,w=i*a-h*r,S=i*l-n*r,b=e*a-h*o,v=e*l-n*o,M=h*l-n*a,x=u*m-c*p,G=u*g-f*p,T=u*(s=s[15])-d*p,_=c*g-f*m,I=c*s-d*m,C=f*s-d*g,E=y*C-w*I+S*_+b*T-v*G+M*x;return E?(t[0]=(o*C-a*I+l*_)*(E=1/E),t[1]=(h*I-e*C-n*_)*E,t[2]=(m*M-g*v+s*b)*E,t[3]=(f*v-c*M-d*b)*E,t[4]=(a*T-r*C-l*G)*E,t[5]=(i*C-h*T+n*G)*E,t[6]=(g*S-p*M-s*w)*E,t[7]=(u*M-f*S+d*w)*E,t[8]=(r*I-o*T+l*x)*E,t[9]=(e*T-i*I-n*x)*E,t[10]=(p*v-m*S+s*y)*E,t[11]=(c*S-u*v-d*y)*E,t[12]=(o*G-r*_-a*x)*E,t[13]=(i*_-e*G+h*x)*E,t[14]=(m*w-p*b-g*y)*E,t[15]=(u*b-c*w+f*y)*E,t):null},as=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*r,w=i*a-h*r,S=i*l-n*r,b=e*a-h*o,v=e*l-n*o,M=h*l-n*a,x=u*m-c*p,G=u*g-f*p,T=u*(s=s[15])-d*p,_=c*g-f*m,I=c*s-d*m,C=f*s-d*g;return t[0]=o*C-a*I+l*_,t[1]=h*I-e*C-n*_,t[2]=m*M-g*v+s*b,t[3]=f*v-c*M-d*b,t[4]=a*T-r*C-l*G,t[5]=i*C-h*T+n*G,t[6]=g*S-p*M-s*w,t[7]=u*M-f*S+d*w,t[8]=r*I-o*T+l*x,t[9]=e*T-i*I-n*x,t[10]=p*v-m*S+s*y,t[11]=c*S-u*v-d*y,t[12]=o*G-r*_-a*x,t[13]=i*_-e*G+h*x,t[14]=m*w-p*b-g*y,t[15]=u*b-c*w+f*y,t},ls=function(t){var s=t[0],i=t[1],e=t[2],h=t[4],n=t[5],r=t[6],o=t[8],a=t[9],l=t[10],u=t[12],c=t[13],f=t[14],d=s*n-i*h,p=s*r-e*h,m=i*r-e*n,g=o*c-a*u,y=o*f-l*u,w=a*f-l*c;return t[7]*(s*w-i*y+e*g)-t[3]*(h*w-n*y+r*g)+t[15]*(o*m-a*p+l*d)-t[11]*(u*m-c*p+f*d)},o=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],s=s[15],w=i[0],S=i[1],b=i[2],v=i[3];return t[0]=w*e+S*o+b*c+v*m,t[1]=w*h+S*a+b*f+v*g,t[2]=w*n+S*l+b*d+v*y,t[3]=w*r+S*u+b*p+v*s,t[4]=(w=i[4])*e+(S=i[5])*o+(b=i[6])*c+(v=i[7])*m,t[5]=w*h+S*a+b*f+v*g,t[6]=w*n+S*l+b*d+v*y,t[7]=w*r+S*u+b*p+v*s,t[8]=(w=i[8])*e+(S=i[9])*o+(b=i[10])*c+(v=i[11])*m,t[9]=w*h+S*a+b*f+v*g,t[10]=w*n+S*l+b*d+v*y,t[11]=w*r+S*u+b*p+v*s,t[12]=(w=i[12])*e+(S=i[13])*o+(b=i[14])*c+(v=i[15])*m,t[13]=w*h+S*a+b*f+v*g,t[14]=w*n+S*l+b*d+v*y,t[15]=w*r+S*u+b*p+v*s,t},us=function(t,s,i){var e,h,n,r,o,a,l,u,c,f,d,p,m=i[0],g=i[1],i=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*i+s[12],t[13]=s[1]*m+s[5]*g+s[9]*i+s[13],t[14]=s[2]*m+s[6]*g+s[10]*i+s[14],t[15]=s[3]*m+s[7]*g+s[11]*i+s[15]):(e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*i+s[12],t[13]=h*m+a*g+f*i+s[13],t[14]=n*m+l*g+d*i+s[14],t[15]=r*m+u*g+p*i+s[15]),t},cs=function(t,s,i){var e=i[0],h=i[1],i=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*h,t[5]=s[5]*h,t[6]=s[6]*h,t[7]=s[7]*h,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fs=function(t,s,i,e){var h,n,r,o,a,l,u,c,f,d,p,m,g,y,w,S,b,v,M,x,G=e[0],T=e[1],e=e[2],_=Math.hypot(G,T,e);return _<vh?null:(G*=_=1/_,T*=_,e*=_,_=Math.sin(i),i=Math.cos(i),n=s[0],r=s[1],o=s[2],a=s[3],u=s[5],c=s[6],f=s[7],p=s[9],m=s[10],g=s[11],w=G*T*(h=1-i)-e*_,S=T*T*h+i,b=e*T*h+G*_,v=G*e*h+T*_,M=T*e*h-G*_,x=e*e*h+i,t[0]=n*(i=G*G*h+i)+(l=s[4])*(y=T*G*h+e*_)+(d=s[8])*(e=e*G*h-T*_),t[1]=r*i+u*y+p*e,t[2]=o*i+c*y+m*e,t[3]=a*i+f*y+g*e,t[4]=n*w+l*S+d*b,t[5]=r*w+u*S+p*b,t[6]=o*w+c*S+m*b,t[7]=a*w+f*S+g*b,t[8]=n*v+l*M+d*x,t[9]=r*v+u*M+p*x,t[10]=o*v+c*M+m*x,t[11]=a*v+f*M+g*x,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},ds=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[4],n=s[5],r=s[6],o=s[7],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=h*i+a*e,t[5]=n*i+l*e,t[6]=r*i+u*e,t[7]=o*i+c*e,t[8]=a*i-h*e,t[9]=l*i-n*e,t[10]=u*i-r*e,t[11]=c*i-o*e,t},ps=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],n=s[1],r=s[2],o=s[3],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i-a*e,t[1]=n*i-l*e,t[2]=r*i-u*e,t[3]=o*i-c*e,t[8]=h*e+a*i,t[9]=n*e+l*i,t[10]=r*e+u*i,t[11]=o*e+c*i,t},ms=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],n=s[1],r=s[2],o=s[3],a=s[4],l=s[5],u=s[6],c=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i+a*e,t[1]=n*i+l*e,t[2]=r*i+u*e,t[3]=o*i+c*e,t[4]=a*i-h*e,t[5]=l*i-n*e,t[6]=u*i-r*e,t[7]=c*i-o*e,t},gs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ys=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ws=function(t,s,i){var e,h=i[0],n=i[1],i=i[2],r=Math.hypot(h,n,i);return r<vh?null:(h*=r=1/r,n*=r,i*=r,r=Math.sin(s),s=Math.cos(s),t[0]=h*h*(e=1-s)+s,t[1]=n*h*e+i*r,t[2]=i*h*e-n*r,t[3]=0,t[4]=h*n*e-i*r,t[5]=n*n*e+s,t[6]=i*n*e+h*r,t[7]=0,t[8]=h*i*e+n*r,t[9]=n*i*e-h*r,t[10]=i*i*e+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},Ss=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},bs=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},vs=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f=function(t,s,i){var e=s[0],h=s[2],n=h+h,r=e*(u=e+e),o=e*(c=(l=s[1])+l),e=e*n,a=l*c,l=l*n,u=(s=s[3])*u,c=s*c,s=s*n;return t[0]=1-(a+(h=h*n)),t[1]=o+s,t[2]=e-c,t[3]=0,t[4]=o-s,t[5]=1-(r+h),t[6]=l+u,t[7]=0,t[8]=e+c,t[9]=l-u,t[10]=1-(r+a),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ms=function(t,s){var i=new Mh(3),e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=e*e+h*h+n*n+r*r;return 0<c?(i[0]=2*(o*r+u*e+a*n-l*h)/c,i[1]=2*(a*r+u*h+l*e-o*n)/c,i[2]=2*(l*r+u*n+o*h-a*e)/c):(i[0]=2*(o*r+u*e+a*n-l*h),i[1]=2*(a*r+u*h+l*e-o*n),i[2]=2*(l*r+u*n+o*h-a*e)),f(t,s,i),t},a=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},d=function(t,s){var i=s[0],e=s[4],h=s[5],n=s[6],r=s[8],o=s[9],a=s[10];return t[0]=Math.hypot(i,s[1],s[2]),t[1]=Math.hypot(e,h,n),t[2]=Math.hypot(r,o,a),t},l=function(t,s){var i=new Mh(3),e=(d(i,s),1/i[0]),h=s[0]*e,n=s[1]*(u=1/i[1]),r=s[2]*(i=1/i[2]),o=s[4]*e,a=s[5]*u,l=s[6]*i,e=s[8]*e,u=s[9]*u,c=0;return 0<(i=h+a+(s=s[10]*i))?(c=2*Math.sqrt(1+i),t[3]=.25*c,t[0]=(l-u)/c,t[1]=(e-r)/c,t[2]=(n-o)/c):a<h&&s<h?(c=2*Math.sqrt(1+h-a-s),t[3]=(l-u)/c,t[0]=.25*c,t[1]=(n+o)/c,t[2]=(e+r)/c):s<a?(c=2*Math.sqrt(1+a-h-s),t[3]=(e-r)/c,t[0]=(n+o)/c,t[1]=.25*c,t[2]=(l+u)/c):(c=2*Math.sqrt(1+s-h-a),t[3]=(n-o)/c,t[0]=(e+r)/c,t[1]=(l+u)/c,t[2]=.25*c),t},xs=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var s=e[0],h=e[1],n=e[2],r=e[4],o=e[5],a=e[6],l=e[8],u=e[9],e=e[10],c=(i[0]=Math.hypot(s,h,n),i[1]=Math.hypot(r,o,a),i[2]=Math.hypot(l,u,e),1/i[0]),f=1/i[1],s=s*c,h=h*f,n=n*(i=1/i[2]),r=r*c,a=a*i,l=l*c,c=u*f,u=e*i,e=0;return 0<(f=s+(o=o*f)+u)?(e=2*Math.sqrt(1+f),t[3]=.25*e,t[0]=(a-c)/e,t[1]=(l-n)/e,t[2]=(h-r)/e):o<s&&u<s?(e=2*Math.sqrt(1+s-o-u),t[3]=(a-c)/e,t[0]=.25*e,t[1]=(h+r)/e,t[2]=(l+n)/e):u<o?(e=2*Math.sqrt(1+o-s-u),t[3]=(l-n)/e,t[0]=(h+r)/e,t[1]=.25*e,t[2]=(a+c)/e):(e=2*Math.sqrt(1+u-s-o),t[3]=(h-r)/e,t[0]=(l+n)/e,t[1]=(a+c)/e,t[2]=.25*e),t},Gs=function(t,s,i,e){var h=(r=s[0])*(u=r+r),n=r*(c=(a=s[1])+a),r=r*(f=(l=s[2])+l),o=a*c,a=a*f,l=l*f,u=(s=s[3])*u,c=s*c,s=s*f,f=e[0],d=e[1],e=e[2];return t[0]=(1-(o+l))*f,t[1]=(n+s)*f,t[2]=(r-c)*f,t[3]=0,t[4]=(n-s)*d,t[5]=(1-(h+l))*d,t[6]=(a+u)*d,t[7]=0,t[8]=(r+c)*e,t[9]=(a-u)*e,t[10]=(1-(h+o))*e,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ts=function(t,s,i,e,h){var n=(o=s[0])*(c=o+o),r=o*(f=(l=s[1])+l),o=o*(d=(u=s[2])+u),a=l*f,l=l*d,u=u*d,c=(s=s[3])*c,f=s*f,s=s*d,d=e[0],p=e[1],e=e[2],m=h[0],g=h[1],h=h[2],y=(1-(a+u))*d,w=(r+s)*d,d=(o-f)*d,r=(r-s)*p,s=(1-(n+u))*p,u=(l+c)*p,p=(o+f)*e,o=(l-c)*e,f=(1-(n+a))*e;return t[0]=y,t[1]=w,t[2]=d,t[3]=0,t[4]=r,t[5]=s,t[6]=u,t[7]=0,t[8]=p,t[9]=o,t[10]=f,t[11]=0,t[12]=i[0]+m-(y*m+r*g+p*h),t[13]=i[1]+g-(w*m+s*g+o*h),t[14]=i[2]+h-(d*m+u*g+f*h),t[15]=1,t},_s=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(l=i+i),n=(r=s[1])*l,r=r*(u=r+r),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*h;return t[0]=1-r-(e=e*h),t[1]=n+s,t[2]=o-u,t[3]=0,t[4]=n-s,t[5]=1-i-e,t[6]=a+l,t[7]=0,t[8]=o+u,t[9]=a-l,t[10]=1-i-r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Is=function(t,s,i,e,h,n,r){var o=1/(i-s),a=1/(h-e),l=1/(n-r);return t[0]=2*n*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(h+e)*a,t[10]=(r+n)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n*2*l,t[15]=0,t},u=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=(h+e)*(i=1/(e-h)),t[14]=2*h*e*i):(t[10]=-1,t[14]=-2*e),t},Cs=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=h*(i=1/(e-h)),t[14]=h*e*i):(t[10]=-1,t[14]=-e),t},Es=function(t,s,i,e){var h=Math.tan(s.upDegrees*Math.PI/180),n=Math.tan(s.downDegrees*Math.PI/180),r=Math.tan(s.leftDegrees*Math.PI/180),o=2/(r+(s=Math.tan(s.rightDegrees*Math.PI/180))),a=2/(h+n);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(r-s)*o*.5,t[9]=(h-n)*a*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},c=function(t,s,i,e,h,n,r){var o=1/(s-i),a=1/(e-h),l=1/(n-r);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=(r+n)*l,t[15]=1,t},Ps=function(t,s,i,e,h,n,r){var o=1/(s-i),a=1/(e-h),r=1/(n-r);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=r,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=n*r,t[15]=1,t},Rs=function(t,s,i,e){var h,n,r,o,a=s[0],l=s[1],s=s[2],u=e[0],c=e[1],e=e[2],f=i[0],d=i[1],i=i[2];return Math.abs(a-f)<vh&&Math.abs(l-d)<vh&&Math.abs(s-i)<vh?p(t):(f=a-f,d=l-d,i=s-i,h=c*(i*=o=1/Math.hypot(f,d,i))-e*(d*=o),e=e*(f*=o)-u*i,u=u*d-c*f,(o=Math.hypot(h,e,u))?(h*=o=1/o,e*=o,u*=o):u=e=h=0,c=d*u-i*e,n=i*h-f*u,r=f*e-d*h,(o=Math.hypot(c,n,r))?(c*=o=1/o,n*=o,r*=o):r=n=c=0,t[0]=h,t[1]=c,t[2]=f,t[3]=0,t[4]=e,t[5]=n,t[6]=d,t[7]=0,t[8]=u,t[9]=r,t[10]=i,t[11]=0,t[12]=-(h*a+e*l+u*s),t[13]=-(c*a+n*l+r*s),t[14]=-(f*a+d*l+i*s),t[15]=1,t)},As=function(t,s,i,e){var h=s[0],n=s[1],s=s[2],r=e[0],o=e[1],e=e[2],a=h-i[0],l=n-i[1],u=a*a+l*l+(i=s-i[2])*i,c=(0<u&&(a*=u=1/Math.sqrt(u),l*=u,i*=u),o*i-e*l);return 0<(u=c*c+(e=e*a-r*i)*e+(r=r*l-o*a)*r)&&(c*=u=1/Math.sqrt(u),e*=u,r*=u),t[0]=c,t[1]=e,t[2]=r,t[3]=0,t[4]=l*r-i*e,t[5]=i*c-a*r,t[6]=a*e-l*c,t[7]=0,t[8]=a,t[9]=l,t[10]=i,t[11]=0,t[12]=h,t[13]=n,t[14]=s,t[15]=1,t},Fs=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Ds=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Os=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Ls=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},ks=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Ns=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},Bs=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Ws=function(t,s){var i=t[0],e=t[1],h=t[2],n=t[3],r=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],t=t[15],y=s[0],w=s[1],S=s[2],b=s[3],v=s[4],M=s[5],x=s[6],G=s[7],T=s[8],_=s[9],I=s[10],C=s[11],E=s[12],P=s[13],R=s[14],s=s[15];return Math.abs(i-y)<=vh*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(e-w)<=vh*Math.max(1,Math.abs(e),Math.abs(w))&&Math.abs(h-S)<=vh*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(n-b)<=vh*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-v)<=vh*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(o-M)<=vh*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(a-x)<=vh*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(l-G)<=vh*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(u-T)<=vh*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(c-_)<=vh*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(f-I)<=vh*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-C)<=vh*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-E)<=vh*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(m-P)<=vh*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(g-R)<=vh*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},m=function(){var t=new Mh(3);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},js=function(t){var s=new Mh(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Hs=function(t){var s=t[0];return Math.hypot(s,t[1],t[2])},g=function(t,s,i){var e=new Mh(3);return e[0]=t,e[1]=s,e[2]=i,e},Vs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Us=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},zs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Js=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},qs=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},$s=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},Xs=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Ys=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Zs=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Ks=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},Qs=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ti=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},si=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ii=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2])},ei=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e+(s=s[2]-t[2])*s},hi=function(t){var s=t[0],i=t[1];return s*s+i*i+(t=t[2])*t},ni=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},ri=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},y=function(t,s){var i=s[0],e=s[1],h=s[2];return 0<(i=i*i+e*e+h*h)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},w=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},S=function(t,s,i){var e=s[0],h=s[1],s=s[2],n=i[0],r=i[1],i=i[2];return t[0]=h*i-s*r,t[1]=s*n-e*i,t[2]=e*r-h*n,t},oi=function(t,s,i,e){var h=s[0],n=s[1],s=s[2];return t[0]=h+e*(i[0]-h),t[1]=n+e*(i[1]-n),t[2]=s+e*(i[2]-s),t},ai=function(t,s,i,e){var h=Math.acos(Math.min(Math.max(w(s,i),-1),1)),n=Math.sin(h),r=Math.sin((1-e)*h)/n,e=Math.sin(e*h)/n;return t[0]=r*s[0]+e*i[0],t[1]=r*s[1]+e*i[1],t[2]=r*s[2]+e*i[2],t},li=function(t,s,i,e,h,n){var r=n*n,o=r*(2*n-3)+1,a=r*(n-2)+n,l=r*(n-1);return t[0]=s[0]*o+i[0]*a+e[0]*l+h[0]*(r=r*(3-2*n)),t[1]=s[1]*o+i[1]*a+e[1]*l+h[1]*r,t[2]=s[2]*o+i[2]*a+e[2]*l+h[2]*r,t},ui=function(t,s,i,e,h,n){var r=1-n,o=r*r,a=n*n,l=o*r;return t[0]=s[0]*l+i[0]*(o=3*n*o)+e[0]*(r=3*a*r)+h[0]*(a=a*n),t[1]=s[1]*l+i[1]*o+e[1]*r+h[1]*a,t[2]=s[2]*l+i[2]*o+e[2]*r+h[2]*a,t},ci=function(t,s){s=s||1;var i=2*Dh()*Math.PI,e=2*Dh()-1,h=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*h,t[1]=Math.sin(i)*h,t[2]=e*s,t},fi=function(t,s,i){var e=s[0],h=s[1],s=s[2],n=i[3]*e+i[7]*h+i[11]*s+i[15];return t[0]=(i[0]*e+i[4]*h+i[8]*s+i[12])/(n=n||1),t[1]=(i[1]*e+i[5]*h+i[9]*s+i[13])/n,t[2]=(i[2]*e+i[6]*h+i[10]*s+i[14])/n,t},di=function(t,s,i){var e=s[0],h=s[1],s=s[2];return t[0]=e*i[0]+h*i[3]+s*i[6],t[1]=e*i[1]+h*i[4]+s*i[7],t[2]=e*i[2]+h*i[5]+s*i[8],t},pi=function(t,s,i){var e=i[0],h=i[1],n=s[0],r=s[1],o=h*(s=s[2])-(c=i[2])*r,a=c*n-e*s,l=e*r-h*n,u=h*l-c*a,c=c*o-e*l,e=e*a-h*o;return a*=h=2*i[3],l*=h,c*=2,e*=2,t[0]=n+(o*=h)+(u*=2),t[1]=r+a+c,t[2]=s+l+e,t},mi=function(t,s,i,e){var h=[],n=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],n[0]=h[0],n[1]=h[1]*Math.cos(e)-h[2]*Math.sin(e),n[2]=h[1]*Math.sin(e)+h[2]*Math.cos(e),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},gi=function(t,s,i,e){var h=[],n=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],n[0]=h[2]*Math.sin(e)+h[0]*Math.cos(e),n[1]=h[1],n[2]=h[2]*Math.cos(e)-h[0]*Math.sin(e),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},yi=function(t,s,i,e){var h=[],n=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],n[0]=h[0]*Math.cos(e)-h[1]*Math.sin(e),n[1]=h[0]*Math.sin(e)+h[1]*Math.cos(e),n[2]=h[2],t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},wi=function(t,s){var i=t[0],e=t[1],h=t[2],n=s[0],r=s[1],o=s[2],e=(i=Math.sqrt((i*i+e*e+h*h)*(n*n+r*r+o*o)))&&w(t,s)/i;return Math.acos(Math.min(Math.max(e,-1),1))},Si=function(t){return t[0]=0,t[1]=0,t[2]=0,t},bi=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},vi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},Mi=function(t,s){var i=t[0],e=t[1],t=t[2],h=s[0],n=s[1],s=s[2];return Math.abs(i-h)<=vh*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-n)<=vh*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},b=function(){var t=new Mh(4);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},xi=function(t){var s=new Mh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Gi=function(t,s,i,e){var h=new Mh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},Ti=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},_i=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},Ii=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Ci=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Ei=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Pi=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Ri=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ai=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Fi=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Di=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Oi=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Li=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},ki=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Ni=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2],s[3]-t[3])},Bi=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],h=s[2]-t[2];return i*i+e*e+h*h+(s=s[3]-t[3])*s},v=function(t){var s=t[0];return Math.hypot(s,t[1],t[2],t[3])},M=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e+(t=t[3])*t},Wi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},ji=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Hi=function(t,s){var i=s[0],e=s[1],h=s[2],n=i*i+e*e+h*h+(s=s[3])*s;return 0<n&&(n=1/Math.sqrt(n)),t[0]=i*n,t[1]=e*n,t[2]=h*n,t[3]=s*n,t},x=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Vi=function(t,s,i,e){var h=i[0]*e[1]-i[1]*e[0],n=i[0]*e[2]-i[2]*e[0],r=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],i=i[2]*e[3]-i[3]*e[2],e=s[0],l=s[1],u=s[2],s=s[3];return t[0]=l*i-u*a+s*o,t[1]=-e*i+u*r-s*n,t[2]=e*a-l*r+s*h,t[3]=-e*o+l*n-u*h,t},Ui=function(t,s,i,e){var h=s[0],n=s[1],r=s[2],s=s[3];return t[0]=h+e*(i[0]-h),t[1]=n+e*(i[1]-n),t[2]=r+e*(i[2]-r),t[3]=s+e*(i[3]-s),t},zi=function(t,s){var i,e,h,n,r,o;for(s=s||1;1<=(r=(i=2*Dh()-1)*i+(e=2*Dh()-1)*e););for(;1<=(o=(h=2*Dh()-1)*h+(n=2*Dh()-1)*n););var a=Math.sqrt((1-r)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*h*a,t[3]=s*n*a,t},Ji=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3];return t[0]=i[0]*e+i[4]*h+i[8]*n+i[12]*s,t[1]=i[1]*e+i[5]*h+i[9]*n+i[13]*s,t[2]=i[2]*e+i[6]*h+i[10]*n+i[14]*s,t[3]=i[3]*e+i[7]*h+i[11]*n+i[15]*s,t},qi=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=i[0],o=i[1],a=i[2],l=(i=i[3])*e+o*n-a*h,u=i*h+a*e-r*n,c=i*n+r*h-o*e;return t[0]=l*i+(e=-r*e-o*h-a*n)*-r+u*-a-c*-o,t[1]=u*i+e*-o+c*-r-l*-a,t[2]=c*i+e*-a+l*-o-u*-r,t[3]=s[3],t},$i=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},Xi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Yi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Zi=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],n=s[0],r=s[1],o=s[2],s=s[3];return Math.abs(i-n)<=vh*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(e-r)<=vh*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(h-o)<=vh*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},G=function(){var t=new Mh(4);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Ki=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},T=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},Qi=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return vh<e?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){return t=zh(t,s),Math.acos(2*t*t-1)},se=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*i+s*r+h*a-n*o,t[1]=h*i+s*o+n*r-e*a,t[2]=n*i+s*a+e*o-h*r,t[3]=s*i-e*r-h*o-n*a,t},_=function(t,s,i){i*=.5;var e=s[0],h=s[1],n=s[2],s=s[3],r=Math.sin(i),i=Math.cos(i);return t[0]=e*i+s*r,t[1]=h*i+n*r,t[2]=n*i-h*r,t[3]=s*i-e*r,t},I=function(t,s,i){i*=.5;var e=s[0],h=s[1],n=s[2],s=s[3],r=Math.sin(i),i=Math.cos(i);return t[0]=e*i-n*r,t[1]=h*i+s*r,t[2]=n*i+e*r,t[3]=s*i-h*r,t},C=function(t,s,i){i*=.5;var e=s[0],h=s[1],n=s[2],s=s[3],r=Math.sin(i),i=Math.cos(i);return t[0]=e*i+h*r,t[1]=h*i-e*r,t[2]=n*i+s*r,t[3]=s*i-n*r,t},ie=function(t,s){var i=s[0],e=s[1],s=s[2];return t[0]=i,t[1]=e,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-s*s)),t},E=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],n=Math.sqrt(i*i+e*e+h*h),s=Math.exp(s),r=0<n?s*Math.sin(n)/n:0;return t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=s*Math.cos(n),t},P=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],n=0<(n=Math.sqrt(i*i+e*e+h*h))?Math.atan2(n,s)/n:0;return t[0]=i*n,t[1]=e*n,t[2]=h*n,t[3]=.5*Math.log(i*i+e*e+h*h+s*s),t},ee=function(t,s,i){return P(t,s),Uh(t,t,i),E(t,t),t},R=function(t,s,i,e){var h,n,r=s[0],o=s[1],a=s[2],s=s[3],l=i[0],u=i[1],c=i[2],f=r*l+o*u+a*c+s*(i=i[3]);return f<0&&(f=-f,l=-l,u=-u,c=-c,i=-i),f=vh<1-f?(f=Math.acos(f),h=Math.sin(f),n=Math.sin((1-e)*f)/h,Math.sin(e*f)/h):(n=1-e,e),t[0]=n*r+f*l,t[1]=n*o+f*u,t[2]=n*a+f*c,t[3]=n*s+f*i,t},he=function(t){var s=Dh(),i=Dh(),e=Dh(),h=Math.sqrt(1-s),s=Math.sqrt(s);return t[0]=h*Math.sin(2*Math.PI*i),t[1]=h*Math.cos(2*Math.PI*i),t[2]=s*Math.sin(2*Math.PI*e),t[3]=s*Math.cos(2*Math.PI*e),t},ne=function(t,s){var i=s[0],e=s[1],h=s[2],n=i*i+e*e+h*h+(s=s[3])*s;return t[0]=-i*(n=n?1/n:0),t[1]=-e*n,t[2]=-h*n,t[3]=s*n,t},re=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},A=function(t,s){var i,e,h,n=s[0]+s[4]+s[8];return 0<n?(h=Math.sqrt(n+1),t[3]=.5*h,t[0]=(s[5]-s[7])*(h=.5/h),t[1]=(s[6]-s[2])*h,t[2]=(s[1]-s[3])*h):(i=(1+(n=s[3*(n=s[4]>s[0]?1:0)+n]<s[8]?2:n))%3,e=(2+n)%3,h=Math.sqrt(s[3*n+n]-s[3*i+i]-s[3*e+e]+1),t[n]=.5*h,t[3]=(s[3*i+e]-s[3*e+i])*(h=.5/h),t[i]=(s[3*i+n]+s[3*n+i])*h,t[e]=(s[3*e+n]+s[3*n+e])*h),t},oe=function(t,s,i,e){var h=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Oh,n=Math.PI/360,r=(e*=n,i*=n,Math.sin(s*=n)),o=Math.cos(s),a=Math.sin(i),l=Math.cos(i),u=Math.sin(e),c=Math.cos(e);switch(h){case"xyz":t[0]=r*l*c+o*a*u,t[1]=o*a*c-r*l*u,t[2]=o*l*u+r*a*c,t[3]=o*l*c-r*a*u;break;case"xzy":t[0]=r*l*c-o*a*u,t[1]=o*a*c-r*l*u,t[2]=o*l*u+r*a*c,t[3]=o*l*c+r*a*u;break;case"yxz":t[0]=r*l*c+o*a*u,t[1]=o*a*c-r*l*u,t[2]=o*l*u-r*a*c,t[3]=o*l*c+r*a*u;break;case"yzx":t[0]=r*l*c+o*a*u,t[1]=o*a*c+r*l*u,t[2]=o*l*u-r*a*c,t[3]=o*l*c-r*a*u;break;case"zxy":t[0]=r*l*c-o*a*u,t[1]=o*a*c+r*l*u,t[2]=o*l*u+r*a*c,t[3]=o*l*c-r*a*u;break;case"zyx":t[0]=r*l*c-o*a*u,t[1]=o*a*c+r*l*u,t[2]=o*l*u-r*a*c,t[3]=o*l*c+r*a*u;break;default:throw new Error("Unknown angle order "+h)}return t},ae=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},le=function(t,s){return Math.abs(x(t,s))>=1-vh},ue=function(){var t=new Mh(8);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},ce=function(t){var s=new Mh(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},fe=function(t,s,i,e,h,n,r,o){var a=new Mh(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=h,a[5]=n,a[6]=r,a[7]=o,a},de=function(t,s,i,e,h,n,r){var o=new Mh(8),h=(o[0]=t,o[1]=s,o[2]=i,o[3]=e,.5*h),n=.5*n,r=.5*r;return o[4]=h*e+n*i-r*s,o[5]=n*e+r*t-h*i,o[6]=r*e+h*s-n*t,o[7]=-h*t-n*s-r*i,o},F=function(t,s,i){var e=.5*i[0],h=.5*i[1],i=.5*i[2],n=s[0],r=s[1],o=s[2],s=s[3];return t[0]=n,t[1]=r,t[2]=o,t[3]=s,t[4]=e*s+h*o-i*r,t[5]=h*s+i*n-e*o,t[6]=i*s+e*r-h*n,t[7]=-e*n-h*r-i*o,t},pe=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},me=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},ge=function(t,s){var i=G(),e=(l(i,s),new Mh(3));return a(e,s),F(t,i,e),t},D=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},ye=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},we=function(t,s,i,e,h,n,r,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t[6]=o,t[7]=a,t},Se=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},be=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},ve=function(t,s){var i=s[4],e=s[5],h=s[6],n=s[7],r=-s[0],o=-s[1],a=-s[2],s=s[3];return t[0]=2*(i*s+n*r+e*a-h*o),t[1]=2*(e*s+n*o+h*r-i*a),t[2]=2*(h*s+n*a+i*o-e*r),t},Me=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=.5*i[0],a=.5*i[1],i=.5*i[2],l=s[4],u=s[5],c=s[6],s=s[7];return t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=r*o+h*i-n*a+l,t[5]=r*a+n*o-e*i+u,t[6]=r*i+e*a-h*o+c,t[7]=-e*o-h*a-n*i+s,t},xe=function(t,s,i){var e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=o*r+(d=s[7])*e+a*n-l*h,c=a*r+d*h+l*e-o*n,f=l*r+d*n+o*h-a*e,d=d*r-o*e-a*h-l*n;return _(t,s,i),e=t[0],t[4]=u*(r=t[3])+d*e+c*(n=t[2])-f*(h=t[1]),t[5]=c*r+d*h+f*e-u*n,t[6]=f*r+d*n+u*h-c*e,t[7]=d*r-u*e-c*h-f*n,t},Ge=function(t,s,i){var e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=o*r+(d=s[7])*e+a*n-l*h,c=a*r+d*h+l*e-o*n,f=l*r+d*n+o*h-a*e,d=d*r-o*e-a*h-l*n;return I(t,s,i),e=t[0],t[4]=u*(r=t[3])+d*e+c*(n=t[2])-f*(h=t[1]),t[5]=c*r+d*h+f*e-u*n,t[6]=f*r+d*n+u*h-c*e,t[7]=d*r-u*e-c*h-f*n,t},Te=function(t,s,i){var e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=o*r+(d=s[7])*e+a*n-l*h,c=a*r+d*h+l*e-o*n,f=l*r+d*n+o*h-a*e,d=d*r-o*e-a*h-l*n;return C(t,s,i),e=t[0],t[4]=u*(r=t[3])+d*e+c*(n=t[2])-f*(h=t[1]),t[5]=c*r+d*h+f*e-u*n,t[6]=f*r+d*n+u*h-c*e,t[7]=d*r-u*e-c*h-f*n,t},_e=function(t,s,i){var e=i[0],h=i[1],n=i[2],i=i[3],r=s[0],o=s[1],a=s[2],l=s[3];return t[0]=r*i+l*e+o*n-a*h,t[1]=o*i+l*h+a*e-r*n,t[2]=a*i+l*n+r*h-o*e,t[3]=l*i-r*e-o*h-a*n,t[4]=(r=s[4])*i+(l=s[7])*e+(o=s[5])*n-(a=s[6])*h,t[5]=o*i+l*h+a*e-r*n,t[6]=a*i+l*n+r*h-o*e,t[7]=l*i-r*e-o*h-a*n,t},Ie=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=i[0],o=i[1],a=i[2],l=i[3];return t[0]=e*l+s*r+h*a-n*o,t[1]=h*l+s*o+n*r-e*a,t[2]=n*l+s*a+e*o-h*r,t[3]=s*l-e*r-h*o-n*a,t[4]=e*(l=i[7])+s*(r=i[4])+h*(a=i[6])-n*(o=i[5]),t[5]=h*l+s*o+n*r-e*a,t[6]=n*l+s*a+e*o-h*r,t[7]=s*l-e*r-h*o-n*a,t},Ce=function(t,s,i,e){var h,n,r,o,a,l;return Math.abs(e)<vh?D(t,s):(l=Math.hypot(i[0],i[1],i[2]),e*=.5,h=(r=Math.sin(e))*i[0]/l,n=r*i[1]/l,r=r*i[2]/l,i=Math.cos(e),l=s[0],t[0]=l*i+(e=s[3])*h+(o=s[1])*r-(a=s[2])*n,t[1]=o*i+e*n+a*h-l*r,t[2]=a*i+e*r+l*n-o*h,t[3]=e*i-l*h-o*n-a*r,t[4]=(e=s[4])*i+(l=s[7])*h+(o=s[5])*r-(a=s[6])*n,t[5]=o*i+l*n+a*h-e*r,t[6]=a*i+l*r+e*n-o*h,t[7]=l*i-e*h-o*n-a*r,t)},Ee=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},Pe=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],s=s[7],p=i[0],m=i[1],g=i[2],i=i[3];return t[0]=e*i+r*p+h*g-n*m,t[1]=h*i+r*m+n*p-e*g,t[2]=n*i+r*g+e*m-h*p,t[3]=r*i-e*p-h*m-n*g,t[4]=e*u+r*o+h*l-n*a+c*i+s*p+f*g-d*m,t[5]=h*u+r*a+n*o-e*l+f*i+s*m+d*p-c*g,t[6]=n*u+r*l+e*a-h*o+d*i+s*g+c*m-f*p,t[7]=r*u-e*o-h*a-n*l+s*i-c*p-f*m-d*g,t},Re=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},Ae=function(t,s,i,e){var h=1-e;return Yh(s,i)<0&&(e=-e),t[0]=s[0]*h+i[0]*e,t[1]=s[1]*h+i[1]*e,t[2]=s[2]*h+i[2]*e,t[3]=s[3]*h+i[3]*e,t[4]=s[4]*h+i[4]*e,t[5]=s[5]*h+i[5]*e,t[6]=s[6]*h+i[6]*e,t[7]=s[7]*h+i[7]*e,t},Fe=function(t,s){var i=Zh(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},De=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},Oe=function(t,s){var i,e,h,n,r,o,a,l,u=Zh(s);return 0<u&&(u=Math.sqrt(u),l=(i=s[0]/u)*(r=s[4])+(e=s[1]/u)*(o=s[5])+(h=s[2]/u)*(a=s[6])+(n=s[3]/u)*(s=s[7]),t[0]=i,t[1]=e,t[2]=h,t[3]=n,t[4]=(r-i*l)/u,t[5]=(o-e*l)/u,t[6]=(a-h*l)/u,t[7]=(s-n*l)/u),t},Le=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},ke=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Ne=function(t,s){var i=t[0],e=t[1],h=t[2],n=t[3],r=t[4],o=t[5],a=t[6],t=t[7],l=s[0],u=s[1],c=s[2],f=s[3],d=s[4],p=s[5],m=s[6],s=s[7];return Math.abs(i-l)<=vh*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(e-u)<=vh*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(h-c)<=vh*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(n-f)<=vh*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=vh*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(o-p)<=vh*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=vh*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},O=function(){var t=new Mh(2);return Mh!=Float32Array&&(t[0]=0,t[1]=0),t},Be=function(t){var s=new Mh(2);return s[0]=t[0],s[1]=t[1],s},We=function(t,s){var i=new Mh(2);return i[0]=t,i[1]=s,i},je=function(t,s){return t[0]=s[0],t[1]=s[1],t},He=function(t,s,i){return t[0]=s,t[1]=i,t},Ve=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},Ue=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},ze=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},Je=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},qe=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},$e=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},Xe=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},Ye=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Ze=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Ke=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},Qe=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},th=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1])},sh=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},ih=function(t){var s=t[0];return Math.hypot(s,t[1])},eh=function(t){var s=t[0];return s*s+(t=t[1])*t},hh=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},nh=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},rh=function(t,s){var i=s[0],e=s[1];return 0<(i=i*i+e*e)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t},oh=function(t,s){return t[0]*s[0]+t[1]*s[1]},ah=function(t,s,i){return s=s[0]*i[1]-s[1]*i[0],t[0]=t[1]=0,t[2]=s,t},lh=function(t,s,i,e){var h=s[0],s=s[1];return t[0]=h+e*(i[0]-h),t[1]=s+e*(i[1]-s),t},uh=function(t,s){s=s||1;var i=2*Dh()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},ch=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s,t[1]=i[1]*e+i[3]*s,t},fh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s+i[4],t[1]=i[1]*e+i[3]*s+i[5],t},dh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[3]*s+i[6],t[1]=i[1]*e+i[4]*s+i[7],t},ph=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[4]*s+i[12],t[1]=i[1]*e+i[5]*s+i[13],t},mh=function(t,s,i,e){var h=s[0]-i[0],s=s[1]-i[1],n=Math.sin(e),e=Math.cos(e);return t[0]=h*e-s*n+i[0],t[1]=h*n+s*e+i[1],t},gh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1],h=Math.sqrt((i*i+t*t)*(e*e+s*s));return Math.acos(Math.min(Math.max(h&&(i*e+t*s)/h,-1),1))},yh=function(t){return t[0]=0,t[1]=0,t},wh=function(t){return"vec2("+t[0]+", "+t[1]+")"},Sh=function(t,s){return t[0]===s[0]&&t[1]===s[1]},bh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1];return Math.abs(i-e)<=vh*Math.max(1,Math.abs(i),Math.abs(e))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))};h,p,f,a,d,l,m,g,y,w,S,b,x,G,T,_,I,C,E,P,R,A,F,D,O,vh=1e-6,Mh="undefined"!=typeof Float32Array?Float32Array:Array,Dh=Math.random,Oh="zyx",Lh=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),kh={__proto__:null,EPSILON:vh,get m(){return Mh},g:Dh,S:Oh,M:L,G:k,equals:N},Nh=Object.freeze({__proto__:null,create:B,clone:W,T:j,identity:H,_:V,set:U,I:z,C:J,P:q,R:$,multiply:t,rotate:X,scale:Y,A:Z,F:K,D:Q,O:tt,L:st,add:it,N:s,B:et,equals:ht,W:nt,j:rt,mul:t,sub:s}),Bh=Object.freeze({__proto__:null,create:ot,clone:at,T:lt,identity:ut,_:ct,set:ft,C:dt,R:pt,multiply:i,rotate:mt,scale:gt,translate:yt,A:wt,F:St,H:bt,D:vt,O:Mt,add:xt,N:e,W:Gt,j:Tt,B:_t,equals:It,mul:i,sub:e}),Wh=Object.freeze({__proto__:null,create:h,V:Ct,clone:Et,T:Pt,_:Rt,set:At,identity:Ft,I:Dt,C:Ot,P:Lt,R:kt,multiply:n,translate:Nt,rotate:Bt,scale:Wt,H:jt,A:Ht,F:Vt,U:Ut,J:zt,$:Jt,X:qt,D:$t,O:Xt,add:Yt,N:r,W:Zt,j:Kt,B:Qt,equals:ts,mul:n,sub:r}),xh=Object.freeze({__proto__:null,create:ss,clone:is,T:es,_:hs,set:ns,identity:p,I:rs,C:os,P:as,R:ls,multiply:o,translate:us,scale:cs,rotate:fs,Y:ds,Z:ps,K:ms,H:gs,F:ys,A:ws,tt:Ss,it:bs,et:vs,ht:f,nt:Ms,ot:a,lt:d,ut:l,ct:xs,ft:Gs,dt:Ts,J:_s,gt:Is,yt:u,perspective:u,St:Cs,bt:Es,vt:c,ortho:c,Mt:Ps,xt:Rs,Gt:As,D:Fs,O:Ds,add:Os,N:Ls,W:ks,j:Ns,B:Bs,equals:Ws,mul:o,sub:Ls}),Xh=Js,Kh=qs,Vh=$s,Qh=ii,tn=ei,jh=Hs,sn=hi,Fh=m(),Gh=Object.freeze({__proto__:null,create:m,clone:js,length:Hs,_:g,T:Vs,set:Us,add:zs,N:Js,multiply:qs,Tt:$s,ceil:Xs,floor:Ys,min:Zs,max:Ks,round:Qs,scale:ti,_t:si,It:ii,Ct:ei,Et:hi,Pt:ni,inverse:ri,normalize:y,Rt:w,At:S,Ft:oi,Dt:ai,Ot:li,Lt:ui,random:ci,kt:fi,Nt:di,Bt:pi,Y:mi,Z:gi,K:yi,angle:wi,Wt:Si,D:bi,B:vi,equals:Mi,sub:Xh,mul:Kh,div:Vh,jt:Qh,Ht:tn,Vt:jh,Ut:sn,forEach:function(t,s,i,e,h,n){var r,o;for(s=s||3,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,r=i;r<o;r+=s)Fh[0]=t[r],Fh[1]=t[r+1],Fh[2]=t[r+2],h(Fh,Fh,n),t[r]=Fh[0],t[r+1]=Fh[1],t[r+2]=Fh[2];return t}}),Xh=Ci,Kh=Ei,Vh=Pi,Qh=Ni,tn=Bi,sn=v,en=M,Ah=b(),Hh=Object.freeze({__proto__:null,create:b,clone:xi,_:Gi,T:Ti,set:_i,add:Ii,N:Ci,multiply:Ei,Tt:Pi,ceil:Ri,floor:Ai,min:Fi,max:Di,round:Oi,scale:Li,_t:ki,It:Ni,Ct:Bi,length:v,Et:M,Pt:Wi,inverse:ji,normalize:Hi,Rt:x,At:Vi,Ft:Ui,random:zi,kt:Ji,Bt:qi,Wt:$i,D:Xi,B:Yi,equals:Zi,sub:Xh,mul:Kh,div:Vh,jt:Qh,Ht:tn,Vt:sn,Ut:en,forEach:function(t,s,i,e,h,n){var r,o;for(s=s||4,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,r=i;r<o;r+=s)Ah[0]=t[r],Ah[1]=t[r+1],Ah[2]=t[r+2],Ah[3]=t[r+3],h(Ah,Ah,n),t[r]=Ah[0],t[r+1]=Ah[1],t[r+2]=Ah[2],t[r+3]=Ah[3];return t}}),Xh=xi,Kh=Gi,Vh=Ti,Qh=_i,tn=Ii,sn=se,Uh=Li,zh=x,en=Ui,hn=Jh=v,nn=qh=M,$h=Hi,rn=Yi,Eh=m(),Ph=g(1,0,0),Rh=g(0,1,0),on=function(t,s,i){var e=w(s,i);return e<-.999999?(S(Eh,Ph,s),jh(Eh)<1e-6&&S(Eh,Rh,s),y(Eh,Eh),T(t,Eh,Math.PI),t):.999999<e?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(S(Eh,s,i),t[0]=Eh[0],t[1]=Eh[1],t[2]=Eh[2],t[3]=1+e,$h(t,t))},Ih=G(),Ch=G(),an=function(t,s,i,e,h,n){return R(Ih,s,h,n),R(Ch,i,e,n),R(t,Ih,Ch,2*n*(1-n)),t},_h=h(),Xh=Object.freeze({__proto__:null,create:G,identity:Ki,zt:T,Jt:Qi,qt:te,multiply:se,Y:_,Z:I,K:C,$t:ie,exp:E,Xt:P,pow:ee,Dt:R,random:he,C:ne,Yt:re,Zt:A,Kt:oe,D:ae,clone:Xh,_:Kh,T:Vh,set:Qh,add:tn,mul:sn,scale:Uh,Rt:zh,Ft:en,length:Jh,Vt:hn,Et:qh,Ut:nn,normalize:$h,B:rn,equals:le,Qt:on,ts:an,ss:function(t,s,i,e){return _h[0]=i[0],_h[3]=i[1],_h[6]=i[2],_h[1]=e[0],_h[4]=e[1],_h[7]=e[2],_h[2]=-s[0],_h[5]=-s[1],_h[8]=-s[2],$h(t,A(t,_h))}}),Yh=zh,Kh=Zh=qh,Qh=Object.freeze({__proto__:null,create:ue,clone:ce,_:fe,es:de,ht:F,H:pe,A:me,V:ge,T:D,identity:ye,set:we,hs:Vh,ns:Se,rs:Vh,os:be,ot:ve,translate:Me,Y:xe,Z:Ge,K:Te,ls:_e,us:Ie,cs:Ce,add:Ee,multiply:Pe,mul:Pe,scale:Re,Rt:Yh,Ft:Ae,C:Fe,Yt:De,length:Jh,Vt:Jh,Et:Zh,Ut:Kh,normalize:Oe,D:Le,B:ke,equals:Ne}),tn=ih,sn=Ue,en=ze,hn=Je,nn=th,rn=sh,on=eh,Th=O(),an=Object.freeze({__proto__:null,create:O,clone:Be,_:We,T:je,set:He,add:Ve,N:Ue,multiply:ze,Tt:Je,ceil:qe,floor:$e,min:Xe,max:Ye,round:Ze,scale:Ke,_t:Qe,It:th,Ct:sh,length:ih,Et:eh,Pt:hh,inverse:nh,normalize:rh,Rt:oh,At:ah,Ft:lh,random:uh,ds:ch,gs:fh,Nt:dh,kt:ph,rotate:mh,angle:gh,Wt:yh,D:wh,B:Sh,equals:bh,Vt:tn,sub:sn,mul:en,div:hn,jt:nn,Ht:rn,Ut:on,forEach:function(t,s,i,e,h,n){var r,o;for(s=s||2,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,r=i;r<o;r+=s)Th[0]=t[r],Th[1]=t[r+1],h(Th,Th,n),t[r]=Th[0],t[r+1]=Th[1];return t}}),globalThis.ys=kh,globalThis.ys.ws=Nh,globalThis.ys.Ss=Bh,globalThis.ys.bs=Wh,globalThis.ys.vs=xh,globalThis.ys.Ms=Xh,globalThis.ys.xs=Qh,globalThis.ys.Gs=an,globalThis.ys.Ts=Gh,globalThis.ys._s=Hh}var Th,_h,Ih,Ch,Eh,Ph,Rh,Ah,Fh,vh,Mh,Dh,Oh,Lh,kh,Nh,Bh,Wh,xh,jh,Gh,Hh,Vh,Uh,zh,Jh,qh,$h,Xh,Yh,Zh,Kh,Qh,tn,sn,en,hn,nn,rn,on,an,D,O,L,k;{let a=function(t,s,i){var e=[0,0],h=t[1][1]-t[0][1],n=t[0][0]-t[1][0],t=h*t[0][0]+n*t[0][1],r=s[1][1]-s[0][1],o=s[0][0]-s[1][0],s=r*s[0][0]+o*s[0][1],a=h*o-r*n;return m(a,0,i=i||0)||(e[0]=(o*t-n*s)/a,e[1]=(h*s-r*t)/a),e},h=function(t,s,i,e){var h,n=s[0]-t[0],s=s[1]-t[1],r=e[0]-i[0];return r*s-(e=e[1]-i[1])*n!=0&&(h=(r*(t[1]-i[1])+e*(i[0]-t[0]))/(e*n-r*s),0<=(t=(n*(i[1]-t[1])+s*(t[0]-i[0]))/(r*s-e*n)))&&t<=1&&0<=h&&h<=1},o=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},x=function(t,s,i){return 0<o(t,s,i)},G=function(t,s,i){return 0<=o(t,s,i)},T=function(t,s,i){return o(t,s,i)<0},_=function(t,s,i){return o(t,s,i)<=0},n=function(t,s,i,e){var h,n,r;return e?(r=O,(n=D)[0]=s[0]-t[0],n[1]=s[1]-t[1],r[0]=i[0]-s[0],r[1]=i[1]-s[1],h=n[0]*r[0]+n[1]*r[1],n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),Math.acos(h/(n*r))<e):0===o(t,s,i)},I=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},C=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},r=function(t){t.length=0},E=function(t,s,i,e){for(var h=i;h<e;h++)t.push(s[h])},t=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!x(C(t,s-1),C(t,s),C(t,s+1))&&(l(t),!0)},l=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},P=function(t,s){return T(C(t,s-1),C(t,s),C(t,s+1))},u=function(t,s,i){var e,h=L,n=k;if(G(C(t,s+1),C(t,s),C(t,i))&&_(C(t,s-1),C(t,s),C(t,i)))return!1;for(var r=I(C(t,s),C(t,i)),o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&G(C(t,s),C(t,i),C(t,o+1))&&_(C(t,s),C(t,i),C(t,o))&&(h[0]=C(t,s),h[1]=C(t,i),n[0]=C(t,o),n[1]=C(t,o+1),e=a(h,n),I(C(t,s),e)<r))return!1;return!0},R=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&h(C(t,s),C(t,i),C(t,e),C(t,e+1)))return!1;return!0},c=function(t,s,i,e){var h=e||[];if(r(h),s<i)for(var n=s;n<=i;n++)h.push(t[n]);else{for(n=0;n<=i;n++)h.push(t[n]);for(n=s;n<t.length;n++)h.push(t[n])}return h},f=function(t){for(var s=[],i=[],e=[],h=Number.MAX_VALUE,n=0;n<t.length;++n)if(P(t,n))for(var r=0;r<t.length;++r)if(u(t,n,r)){for(var i=f(c(t,n,r,e)),o=f(c(t,r,n,e)),a=0;a<o.length;a++)i.push(o[a]);i.length<h&&(h=(s=i).length,s.push([C(t,n),C(t,r)]))}return s},s=function(t){var s=f(t);return 0<s.length?d(t,s):[t]},d=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var h=s[e],n=0;n<i.length;n++){var r=d(i[n],h);if(r){i.splice(n,1),i.push(r[0],r[1]);break}}return i}return e=t.indexOf((h=s)[0]),n=t.indexOf(h[1]),-1!==e&&-1!==n&&[c(t,e,n),c(t,n,e)]},i=function(t){for(var s=t,i=0;i<s.length-1;i++)for(var e=0;e<i-1;e++)if(h(s[i],s[i+1],s[e],s[e+1]))return!1;for(i=1;i<s.length-2;i++)if(h(s[0],s[s.length-1],s[i],s[i+1]))return!1;return!0},A=function(t,s,i,e,h){var n=s[1]-t[1],s=t[0]-s[0],t=n*t[0]+s*t[1],r=e[1]-i[1],e=i[0]-e[0],i=r*i[0]+e*i[1],o=n*e-r*s;return m(o,0,h=h||0)?[0,0]:[(e*t-s*i)/o,(n*i-r*t)/o]},F=function(t,s,i,e,h,n,r){n=n||100,r=r||0,h=h||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],w=[],S=t,b=t;if(!(b.length<3))if(n<++r)console.warn("quickDecomp: max level ("+n+") reached.");else{for(var v=0;v<t.length;++v)if(P(S,v)){i.push(S[v]);for(var u=c=Number.MAX_VALUE,M=0;M<t.length;++M)x(C(S,v-1),C(S,v),C(S,M))&&_(C(S,v-1),C(S,v),C(S,M-1))&&(l=A(C(S,v-1),C(S,v),C(S,M),C(S,M-1)),T(C(S,v+1),C(S,v),l))&&(f=I(S[v],l))<c&&(c=f,a=l,m=M),x(C(S,v+1),C(S,v),C(S,M+1))&&_(C(S,v+1),C(S,v),C(S,M))&&(l=A(C(S,v+1),C(S,v),C(S,M),C(S,M+1)),x(C(S,v-1),C(S,v),l))&&(f=I(S[v],l))<u&&(u=f,o=l,p=M);if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),v<p?(E(y,S,v,p+1),y.push(l),w.push(l),0!==m&&E(w,S,m,S.length),E(w,S,0,v+1)):(0!==v&&E(y,S,v,S.length),E(y,S,0,p+1),y.push(l),w.push(l),E(w,S,m,v+1));else{if(p<m&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(M=m;M<=p;++M)G(C(S,v-1),C(S,v),C(S,M))&&_(C(S,v+1),C(S,v),C(S,M))&&(f=I(C(S,v),C(S,M)))<d&&R(S,v,M)&&(d=f,g=M%t.length);v<g?(E(y,S,v,g+1),0!==g&&E(w,S,g,b.length),E(w,S,0,v+1)):(0!==v&&E(y,S,v,b.length),E(y,S,0,g+1),E(w,S,g,v+1))}return y.length<w.length?(F(y,s,i,e,h,n,r),F(w,s,i,e,h,n,r)):(F(w,s,i,e,h,n,r),F(y,s,i,e,h,n,r)),s}s.push(t)}return s},e=function(t,s){for(var i=0,e=t.length-1;3<t.length&&0<=e;--e)n(C(t,e-1),C(t,e),C(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},p=function(t,s){for(var i=t.length-1;1<=i;--i)for(var e=t[i],h=i-1;0<=h;--h)g(e,t[h],s)&&t.splice(i,1)},m=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},g=function(t,s,i){return m(t[0],s[0],i)&&m(t[1],s[1],i)};a,h,o,x,G,T,_,n,I,C,r,E,l,P,u,R,c,f,d,A,F,m,g,D=[],O=[],L=[],k=[],self.Is={Cs:s,Es:F,Ps:i,Rs:e,As:p,Fs:t}}{let t=!1,s=!1,i="dev",e=Symbol("Construct internal API token"),h=14,n=self.Ds=class{constructor(){throw TypeError("static class can't be instantiated")}static Os(){if(h<=0)throw new Error("cannot obtain internal API token");return--h,e}static Ls(){t=!0}static ks(){return t}static Ns(){s=!0}static Bs(){return s}static Ws(t){i=t}static js(){return i}static Hs(){return"final"===i}};n.isDebug=!1,n.Vs=!1,n.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Us={}}{const s=self.Ds;s.zs=class{constructor(t){this.Js=t,this.qs=new Map,this.$s()}$s(){let t=this.Js,s=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const i of s)this.Xs(i)}Xs(t){if(t)if(t.includes("=")){const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.qs.set(i,e)}else this.qs.set(t,null)}Ys(){for(const t of this.qs)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}Zs(t){return this.qs.has(t)}Ks(t){const s=this.qs.get(t);return void 0===s?null:s}Qs(){history.replaceState("",document.title,location.pathname+location.search)}ti(t){this.Js=t,this.qs.clear(),this.$s()}},s.si=new s.zs(location.search),s.ii=new s.zs(location.hash),s.si.Zs("perf")&&(s.ei=!0),"dev"!==s.si.Ks("mode")&&s.Ws("final")}{let e=function(t){const s=parseFloat(t),i=j.get(s);return i||(13<=s?"11":"NT "+t)};e;const a=self.Ds,W="(unknown)",j=(a.hi={ni:W,ri:W,oi:W,ai:W,li:NaN,ci:W,fi:"browser",di:!0,mi:!1,gi:!1,yi:!1,wi:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),H=navigator.userAgent,V=navigator.userAgentData;if(V&&0<V.brands.length){let s=function(t){let s="",i="",e="",h="";for(const n of t){const r=U.get(n.brand),o=(!s&&r&&(s=r,i=n.version),z.get(n.brand));!e&&o&&(e=o,h=n.version)}s||"Chromium"!==e||(a.hi.oi="Chromium",a.hi.ai=h),a.hi.oi=s||W,a.hi.ai=i||W,a.hi.ci=e||W};s,a.hi.ni=V.platform,a.hi.mi=V.mobile,a.hi.di=!a.hi.mi;const U=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),z=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);s(V.brands);let i=!1;a.hi.wi=async()=>{if(!i)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);s(t.fullVersionList),"Windows"===a.hi.ni?a.hi.ri=e(t.platformVersion):a.hi.ri=t.platformVersion,i=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let t=function(t,s){const i=Array.isArray(t)?t:[t];for(const e of i){const h=e.exec(H);if(h){s(h);break}}};t(/windows\s+nt\s+([\d\.]+)/i,t=>{a.hi.ni="Windows";const s=t[1];a.hi.ri=e(s)}),t(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{a.hi.ni="macOS",a.hi.ri=t[1].replace(/_/g,".")}),t(/CrOS/,()=>{a.hi.ni="Chrome OS"}),t(/linux|openbsd|freebsd|netbsd/i,()=>{a.hi.ni="Linux"}),t(/android/i,()=>{a.hi.ni="Android"}),t(/android\s+([\d\.]+)/i,t=>{a.hi.ni="Android",a.hi.ri=t[1]}),a.hi.ni===W&&(t(/(iphone|ipod|ipad)/i,t=>{a.hi.ni="iOS"}),t([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{a.hi.ni="iOS",a.hi.ri=t[1].replace(/_/g,".")}));const J=/chrome\//i.test(H),q=/chromium\//i.test(H),$=/edg\//i.test(H),X=/OPR\//.test(H),Y=/nwjs/i.test(H),Z=/safari\//i.test(H),K=/webkit/i.test(H),Q=($||X||t(/chrome\/([\d\.]+)/i,t=>{a.hi.oi="Chrome",a.hi.ai=t[1],a.hi.ci="Chromium"}),t(/edg\/([\d\.]+)/i,t=>{a.hi.oi="Edge",a.hi.ai=t[1],a.hi.ci="Chromium"}),t(/OPR\/([\d\.]+)/,t=>{a.hi.oi="Opera",a.hi.ai=t[1],a.hi.ci="Chromium"}),t(/chromium\/([\d\.]+)/i,t=>{a.hi.oi="Chromium",a.hi.ai=t[1],a.hi.ci="Chromium"}),t(/nwjs\/[0-9.]+/i,t=>{a.hi.oi="NW.js",a.hi.ai=t[1],a.hi.ci="Chromium",a.hi.fi="nwjs"}),t(/firefox\/([\d\.]+)/i,t=>{a.hi.oi="Firefox",a.hi.ai=t[1],a.hi.ci="Gecko"}),!Z||J||q||$||X||Y||(a.hi.oi="Safari",a.hi.ci="WebKit",t(/version\/([\d\.]+)/i,t=>{a.hi.ai=t[1]}),t(/crios\/([\d\.]+)/i,t=>{a.hi.oi="Chrome for iOS",a.hi.ai=t[1]}),t(/fxios\/([\d\.]+)/i,t=>{a.hi.oi="Firefox for iOS",a.hi.ai=t[1]}),t(/edgios\/([\d\.]+)/i,t=>{a.hi.oi="Edge for iOS",a.hi.ai=t[1]})),a.hi.ci===W&&K&&(a.hi.ci="WebKit"),"Android"===a.hi.ni&&"Safari"===a.hi.oi&&(a.hi.oi="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),tt=Q.has(a.hi.ni)||"nwjs"===a.hi.fi;a.hi.di=tt,a.hi.mi=!tt}"Chrome"===a.hi.oi&&"browser"===a.hi.fi&&/wv\)/.test(H)&&(a.hi.fi="webview"),"nwjs"!==a.hi.fi&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(a.hi.fi="webapp"),a.hi.li=parseFloat(a.hi.ai);const i="macOS"===a.hi.ni&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;i&&(a.hi.ni="iOS",a.hi.ri=a.hi.ai,a.hi.di=!1,a.hi.mi=!0,a.hi.yi=!0),a.hi.gi="macOS"===a.hi.ni||"iOS"===a.hi.ni}{let r=function(i){return new Promise((t,s)=>{i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})},o=function(i){return new Promise((t,s)=>{i.oncomplete=()=>t(),i.onerror=()=>s(i.error),i.onabort=()=>s(i.error)})},t=function(t,s){return N(t,s)},s=function(t,s){return N(t,s,!0)},a=function(s){e(s);let t=et.get(s);return t instanceof Promise||(t=(async i=>{e(i);const t=indexedDB.open(i,st);return t.addEventListener("upgradeneeded",t=>{try{const s=t.target.result;s.createObjectStore(it)}catch(t){console.error("Failed to create objectstore for database "+i,t)}}),r(t)})(s),et.set(s,t),t.catch(t=>et.delete(s))),t},e=function(t){if("string"!=typeof t)throw new TypeError("expected string")},n=function(t,h){const s=t.objectStore(it).openCursor();return new Promise(i=>{const e=[];s.onsuccess=t=>{const s=t.target.result;if(s){switch(h){case"entries":e.push([s.key,s.value]);break;case"keys":e.push(s.key);break;case"values":e.push(s.value)}s.continue()}else i(e)}})};r,o,t,s,a,e,n;const st=2,it="keyvaluepairs",et=new Map,ht="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,nt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function N(s,i,e=!1,h=!0){const t=await a(s);try{const n=t.transaction([it],e?"readwrite":"readonly");return i(n)}catch(t){if(h&&"InvalidStateError"===t.name)return et.delete(s),N(s,i,e,!1);throw t}}class rt{constructor(t){e(t),this.name=t}async ready(){await a(this.name)}set(h,n){return e(h),s(this.name,async t=>{const s=t.objectStore(it).put(n,h),i=r(s),e=o(t);await Promise.all([e,i])})}get(n){return e(n),t(this.name,async t=>{const s=t.objectStore(it).get(n),i=r(s),e=o(t),[,h]=await Promise.all([e,i]);return h})}delete(h){return e(h),s(this.name,async t=>{const s=t.objectStore(it).delete(h),i=r(s),e=o(t);await Promise.all([e,i])})}clear(){return s(this.name,async t=>{const s=t.objectStore(it).clear(),i=r(s),e=o(t);await Promise.all([e,i])})}keys(){return t(this.name,async t=>{let s;if(nt){const h=t.objectStore(it).getAllKeys();s=r(h)}else s=n(t,"keys");const i=o(t),[,e]=await Promise.all([i,s]);return e})}values(){return t(this.name,async t=>{let s;if(ht){const h=t.objectStore(it).getAll();s=r(h)}else s=n(t,"values");const i=o(t),[,e]=await Promise.all([i,s]);return e})}entries(){return t(this.name,async t=>{const s=n(t,"entries"),i=o(t),[,e]=await Promise.all([i,s]);return e})}}self.Si=rt}{let i=function(t){throw new Error(`"${t}" is not implemented`)},e=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},h=function(e){return"object"==typeof e?new Promise(s=>{const{port1:t,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),t.postMessage(e)}):Promise.resolve(e)};i,e,h;const ot=self.Si,at=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];new WeakMap;class lt{constructor(t){this.bi=t,this.vi=!this.bi,this.vi||"undefined"!=typeof indexedDB||(this.vi=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.Mi=new Map}xi(t){if(!this.vi)for(const s of at)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.vi=!0;break}}async Gi(t){const s=this.Mi.get(t),i=await h(s);return void 0===i?null:i}async Ti(t,s){s=await h(s),this.Mi.set(t,s)}_i(t){this.Mi.delete(t)}Ii(){this.Mi.clear()}Ci(){return Array.from(this.Mi.keys())}Ei(){return this.vi}Pi(){return this.Mi}Ri(t){this.Mi=t}async getItem(s,t){if(e(t),this.vi)return this.Gi(s);let i;try{i=await this.bi.get(s)}catch(t){return this.xi(t),this.vi?this.Gi(s):(console.error(`Error reading '${s}' from storage, returning null: `,t),null)}return void 0===i?null:i}async setItem(s,i,t){if(e(t),void 0===i&&(i=null),this.vi)await this.Ti(s,i);else try{await this.bi.set(s,i)}catch(t){if(this.xi(t),!this.vi)throw t;await this.Ti(s,i)}}async removeItem(s,t){if(e(t),this.vi)this._i(s);else try{await this.bi.delete(s)}catch(t){this.xi(t),this.vi?this._i(s):console.error(`Error removing '${s}' from storage: `,t)}}async clear(t){if(e(t),this.vi)this.Ii();else try{await this.bi.clear()}catch(t){this.xi(t),this.vi?this.Ii():console.error("Error clearing storage: ",t)}}async keys(t){if(e(t),this.vi)return this.Ci();let s=[];try{s=await this.bi.keys()}catch(t){if(this.xi(t),this.vi)return this.Ci();console.error("Error getting storage keys: ",t)}return s}ready(t){return e(t),this.vi?Promise.resolve(!0):this.bi.ready()}Ai(t){if(t.forceInMemoryFallback)return new lt(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new ot(s);return new lt(i)}}length(t){i("localforage.length()")}key(t,s){i("localforage.key()")}iterate(t,s){i("localforage.iterate()")}Fi(t){i("localforage.setDriver()")}config(t){i("localforage.config()")}Di(t){i("localforage.defineDriver()")}Oi(){i("localforage.driver()")}supports(t){i("localforage.supports()")}dropInstance(){i("localforage.dropInstance()")}}self.localforage=new lt(new ot("localforage"))}{const e=self.Ds;if(e.Li={},e.Li.ki=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const s=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==s.reverse}catch(t){return!1}})(),e.Li.Ni="undefined"!=typeof HTMLDialogElement,e.Li.Bi=!!self.requestIdleCallback,e.Li.ImageBitmap=!!self.createImageBitmap,e.Li.ImageBitmapOptions=!1,e.Li.Wi=!1,e.Li.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{e.Li.ImageBitmapOptions=!0}).catch(()=>{e.Li.ImageBitmapOptions=!1})}catch(t){e.Li.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{e.Li.Wi=10===t.width&&10===t.height}).catch(()=>{e.Li.Wi=!1})}catch(t){e.Li.Wi=!1}}if(e.Li.ji=!(!navigator.clipboard||!navigator.clipboard.readText),e.Li.Hi=!(!navigator.permissions||!navigator.permissions.query),e.Li.Vi=!1,e.Li.Hi){const ut={name:"clipboard-read"};navigator.permissions.query(ut).then(()=>{e.Li.Vi=!0}).catch(()=>{e.Li.Vi=!1})}e.Li.Ui=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),e.Li.Ji="undefined"!=typeof Proxy,e.Li.$i=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),e.Li.Xi="function"==typeof fetch,e.Li.Yi=!!(self.isSecureContext&&"Opera"!==e.hi.oi&&navigator.storage&&navigator.storage.persist),e.Li.Zi=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),e.Li.Ki=(()=>{if("undefined"==typeof document)return!1;if("iOS"===e.hi.ni)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),e.Li.ImageDecoder=void 0!==self.ImageDecoder,e.Li.Qi=!!self.VideoEncoder,e.Li.te=!!self.showOpenFilePicker,e.Li.ie=!!self.queryLocalFonts,e.Li.UserActivation=!!navigator.userActivation,e.Li.he=!1,(async()=>{let s;"undefined"==typeof document?s=new OffscreenCanvas(32,32):((s=document.createElement("canvas")).width=32,s.height=32);const t=s.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let i=null;try{s.convertToBlob?i=await s.convertToBlob({type:"image/webp",quality:1}):s.toBlob&&(i=await new Promise(t=>s.toBlob(t,"image/webp",1))),e.Li.he=i&&"image/webp"===i.type}catch(t){e.Li.he=!1}})()}{let e=function(t,i){return t.reduce((t,s)=>(0<i&&Array.isArray(s)?Array.prototype.push.apply(t,e(s,i-1)):t.push(s),t),[])};e;const ct=self.Ds;if(!String.prototype.trimStart){const ft=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(ft,"")}}if(!String.prototype.trimEnd){const dt=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(dt,"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(ct.ne(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),Array.prototype.flat||(Array.prototype.flat=function(t=1){return e(this,t)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((i,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,s)=>i({usage:t,quota:s}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let i=function(t){let s=pt.re(),i="Assertion failure: "+t+"\n\nStack trace:\n"+s;console.error(i)};i;const pt=self.Ds;self.assert=function(t,s){t||i(s)}}{const h=self.Ds,mt=self.Us,gt=(h.oe=function(t){return"number"==typeof t},h.ae=function(t){return h.oe(t)&&isFinite(t)},h.le=function(t){if(!h.oe(t))throw new TypeError("expected number")},h.ue=function(t){h.fe(t)},h.de=function(t,s,i){if(!h.oe(t)||isNaN(t)||t<s||i<t)throw new RangeError("number outside of range")},h.pe=function(...s){for(let t of s);},h.me=function(t){if(!h.ae(t))throw new TypeError("expected finite number")},h.ge=function(t){h.fe(t)},h.ye=function(...s){for(let t of s);},h.we=function(t){return"string"==typeof t},h.Se=function(t){if(!h.we(t))throw new TypeError("expected string")},h.ve=function(t){h.fe(t)},h.Me=function(...s){for(let t of s);},h.xe=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},h.Ge=function(t){if(!h.xe(t))throw new TypeError("expected simple object")},h.Te=function(t){if(!h.fe(t)&&!h.xe(t))throw new TypeError("expected simple object")},h._e=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},h.Ie=function(t){if(!h._e(t))throw new TypeError("expected object")},h.Ce=function(t){h.fe(t)},h.Ee=function(...s){for(let t of s);},h.Pe=function(t){return h.Re(t,Blob)&&"string"==typeof t.name},h.Ae=function(t){if(!h.Pe(t))throw new TypeError("expected file")},h.Fe=function(t){h.fe(t)},h.De=function(t){return Array.isArray(t)},h.Oe=function(t){if(!h.De(t))throw new TypeError("expected array")},h.Le=function(t){h.fe(t)},h.ke=function(...s){for(let t of s);},h.Ne=function(t){return!(!h.De(t)||t.length&&!h.De(t[0]))},h.Be=function(s){if(!h.Ne(s))throw new TypeError("expected 2d array");for(let t of s)if(!h.De(t))throw new TypeError("expected 2d array")},h.We=function(t){h.fe(t)},h.je=function(t){return"function"==typeof t},h.He=function(t,s){if(!h.je(t))throw new TypeError("expected function");if(!h.fe(s)&&t!==s)throw new TypeError("expected same function reference")},h.Ve=function(t){h.fe(t)},h.Ue=function(...s){for(let t of s);},h.Je=function(s,...i){if(!h.je(s))throw new TypeError("expected function");if(!i.length)throw new Error("missing comparison functions");for(let t of i)if(!h.fe(t)&&s===t)return;throw new TypeError("expected same function reference")},h.qe=function(...s){if(!h.fe(s))for(let t of s);},h.$e=function(t,s){return t instanceof s},h.Xe=function(s,...i){for(let t of i)if(h.$e(s,t))return!0;return!1},h.Ye=function(t,s){if(!h.$e(t,s))throw new TypeError("unexpected type")},h.Ze=function(t,s){h.fe(t)},h.Ke=function(t,...s){for(let t of s);},h.Qe=function(t,...s){if(!h.Xe(t,...s))throw new TypeError("unexpected type")},h.th=function(t,...s){if(!h.fe(t)&&!h.Xe(t,...s))throw new TypeError("unexpected type")},h.ih=function(s,i){for(let t of s)if(!h.$e(t,i))return!1;return!0},h.eh=function(s){for(let t of s)if(!h.ae(t))return!1;return!0},h.hh=function(s,t){for(let t of s);},h.nh=function(s,t){if(!h.fe(s))for(let t of s);},h.rh=function(s,t){if(!h.fe(s))for(let t of s);},h.oh=function(s){for(let t of s);},h.ah=function(s){if(!h.fe(s))for(let t of s);},h.lh=function(t,s){return!(h.fe(t)||!h.we(t.nodeName))&&(!s||h.uh(t.nodeName,s))},h.fh=function(t,s){if(h.fe(t)||!h.we(t.nodeName))throw new TypeError("expected DOM node");if(s&&!h.uh(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},h.dh=function(t,s){h.fe(t)},h.ph=function(t,s){return!(h.fe(t)||!h.we(t.tagName))&&(!s||h.uh(t.tagName,s))},h.mh=function(t,s){if(h.fe(t)||!h.we(t.tagName))throw new TypeError("expected HTML element");if(s&&!h.uh(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},h.gh=function(t,s){h.fe(t)},h.yh=function(t){return h.ph(t,"img")||h.ph(t,"canvas")||h.ph(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},h.wh=function(t){if(!h.yh(t))throw new TypeError("expected drawable")},h.Sh=function(t){h.fe(t)},h.bh=function(t){return t instanceof ImageData||h.yh(t)},h.Mh=function(t){if(!h.bh(t))throw new TypeError("expected drawable or image data")},h.xh=function(t){if(!h.fe(t)&&!h.bh(t))throw new TypeError("expected drawable or image data")},h.Gh=function(t){return"string"==typeof t||h.HtmlString&&t instanceof h.HtmlString||t instanceof h.Th},h._h=function(t){if(!h.Gh(t))throw new TypeError("expected string-like")},h.Ih=function(t){h.fe(t)},h.Ch=function(...s){for(let t of s);},h.Eh=function(){throw new Error("must be overridden")},h.Ph=function(){throw new Error("not yet implemented")},h.Rh=function(t){return t.constructor===function*(){}.constructor},h.Ah=function(t){if(!h.Rh(t))throw new Error("expected generator function")},h.Fh=function(t){return"function"===t[Symbol.iterator]},h.Dh=function(t){if(!h.Fh(t))throw new Error("expected iterable")},h.Oh=function(t){return!h.fe(t)},h.fe=function(t){return null==t},h.Lh=function(s){let i=s[0].constructor;for(let t of s)if(t.constructor!==i)return!1;return i},h.kh=function(s,i){for(let t of s)if(!(t instanceof i))return!1;return!0},Object.getPrototypeOf(Uint8Array));h.Nh=function(t){return h.$e(t,gt)},h.Bh=function(t){},h.Wh=function(t){h.jh(t,gt)},h.Hh=function(t,...s){if(!h.Vh(t,...s))throw new TypeError("unexpected type")},h.Vh=function(t,...s){for(const i of s)if(h.Re(t,i))return!0;return!1},h.jh=function(t,s){if(!h.Re(t,s))throw new TypeError("unexpected type")},h.Re=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},mt.le=h.le,mt.ue=h.ue,mt.me=h.me,mt.ge=h.ge,mt.Se=h.Se,mt.ve=h.ve,mt.Ie=h.Ie,mt.Ce=h.Ce,mt.Oe=h.Oe,mt.Le=h.Le,mt.He=h.He,mt.Ve=h.Ve,mt.Ye=h.Ye,mt.Ze=h.Ze,mt.fe=h.fe}{let e=function(t,s){let i=p.getType(t),e=p.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},h=function(t){console.warn("[Defence] "+t+" @",p.re())},i=function(){if(f=-1,0<a.size||0<l.size){let t=new Set([...a.keys()].map(t=>p.Uh(t))),s=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+s),a.clear(),l.clear()}},n=function(s){let i=new Set;for(let t in s)i.add(t);return i},r=function(t,s){let i=n(s),e=d.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);p.zh(s,[...i]),s.length&&console.warn(`[Defence] '${p.Uh(t)}' constructor creates inconsistent properties: `+s.join(", "))}else d.set(t,i)};e,h,i,n,r;const p=self.Ds,yt=new Map;p.Jh=function(t,s){console.log("%c"+t,"font-weight: bold; color:"+s)},p.qh=function(t,...s){yt.has(t)||yt.set(t,-1),-1===yt.get(t)&&yt.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...s),yt.set(t,-1)}))};let o,a=(p.$h=function(t){performance.mark(t),(o=o||new Map).has(t)||o.set(t,{current:0,total:0,Xh:0,Yh:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.Xh.toPrecision(3)} :: calls => `+this.Yh}})},p.Zh=function(t){performance.measure("measure-"+t,t);const s=performance.getEntriesByName("measure-"+t)[0],i=o.get(t);i.current=s.duration,i.total+=i.current,i.Xh=i.total/i.Yh,console.log(i.toString()),i.Yh++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},p.re=function(){return(new Error).stack},p.Kh=function(){},p.cast=function(t,s){return t&&t instanceof s?t:null},p.Uh=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":p.oe(t)?"<number>":p.we(t)?"<string>":p.De(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":p.je(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},p.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},p.range=function*(s,i){if(!isFinite(Math.abs(s-i)))throw new Error("Invalid parameters");if(i<s)for(let t=s-1;t>=i;t--)yield t;else for(let t=s;t<i;t++)yield t},new Map),l=new Map,u=new WeakMap,c=new WeakMap;p.Qh={};const wt=new Set(["then","splice"]);p.Qh.get=function(t,s){return s in t||"symbol"==typeof s||wt.has(s)||h(`Accessed missing property '${s}' from defended object '${p.Uh(t)}', returning undefined`),c.has(t)&&"symbol"!=typeof s&&!wt.has(s)&&h(`Accessed property '${s}' on a released object '${p.Uh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]},p.Qh.set=function(t,s,i){return s in t||a.has(t)||h(`Set non-existent property '${s}' to '${i}' on defended object '${p.Uh(t)}'`),e(t[s],i)||a.has(t)||h(`Set '${p.getType(t[s])}' property '${s}' to type '${p.getType(i)}' on defended object '${p.Uh(t)}'`),c.has(t)&&h(`Set property '${s}' on a released object '${p.Uh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]=i,!0},p.Qh.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${p.Uh(t)}'`)},p.Qh.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${p.Uh(t)}'`)},p.Qh.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${p.Uh(t)}'`)};let f=-1,d=(p.tn=class{constructor(){if(p.Vs&&p.Li.Ji){let t=Object.create(new.target.prototype),s=new Proxy(t,p.Qh);return a.set(t,s),l.set(s,t),u.set(s,t),-1===f&&(f=requestAnimationFrame(i)),s}}},p.sn=function(s){if(p.Vs&&p.Li.Ji&&s instanceof p.tn){if(l.has(s)){let t=l.get(s);l.delete(s),a.delete(t)}return s}return p.isDebug?Object.seal(s):s},p.hn=function(t,...s){let i;try{i=new t(...s)}catch(t){throw l.clear(),a.clear(),t}return p.Vs&&r(t,i),p.sn(i)},p.nn=function(t){let s=u.get(t);s&&c.set(s,p.re())},p.rn=function(t){let s=u.get(t);return!!s&&!!c.get(s)},new Map);p.an=class{constructor(t){this.ln="",t&&this.start(t)}start(t){p.ei&&(this.ln=t,performance.mark(this.ln+"-Start"))}end(){p.ei&&(performance.mark(this.ln+"-End"),performance.measure(this.ln,this.ln+"-Start",this.ln+"-End"))}next(t){p.ei&&(this.end(),this.ln=t,performance.mark(this.ln+"-Start"))}}}{let i=function(t){return 0===t&&1/t<0};i;const y=self.Ds,St=2*Math.PI,bt=Math.PI/180,vt=180/Math.PI,Mt=(y.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0==e)return i;if(t<s){const h=i-(s-t)%e;return h===i?0:h}return s+(t-s)%e},y.un=function(t,s,i,e,h){const n=i-s;if(0==n&&0===e)return t;const r=h-e;return(t-s)*r/n+e},y.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},y.cn=function(t,s,i){return t<s?s:i<t?i:t},y.dn=function(t){return(t%=St)<0&&(t+=St),t},y.pn=function(t){return t*bt},y.mn=function(t){return t*vt},y.gn=function(t,s){return Math.sqrt(t*t+s*s)},y.yn=function(t,s,i){return Math.sqrt(t*t+s*s+i*i)},y.wn=function(t,s,i,e){return y.gn(i-t,e-s)},y.Sn=function(t,s,i,e){const h=i-t,n=e-s;return h*h+n*n},y.bn=function(t,s,i,e){return Math.atan2(e-s,i-t)},y.vn=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),n=Math.cos(s),r=i*h+e*n;return 1<=r?0:r<=-1?Math.PI:Math.acos(r)},y.Mn=function(t,s,i){let e=Math.sin(t),h=Math.cos(t),n=Math.sin(s),r=Math.cos(s);return Math.acos(e*n+h*r)>i?0<h*n-e*r?y.dn(t+i):y.dn(t-i):y.dn(s)},y.xn=function(t,s){let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),n=Math.cos(s);return e*h-i*n<=0},y.Gn=function(t,s,i,e=0){let h=y.vn(t,s),n=St*e;return y.xn(s,t)?y.dn(t+(h+n)*i):y.dn(t-(h+n)*i)},y.Tn=function(t,s,i,e=0){const h=y.vn(t,s),n=St*e;return y.xn(s,t)?y.dn(t+(h+n)*i):y.dn(t+(St-h+n)*i)},y._n=function(t,s,i,e=0){const h=y.vn(t,s),n=St*e;return y.xn(s,t)?y.dn(t-(-St+h-n)*i):y.dn(t-(h+n)*i)},y.In=function(t,s){const i=y.vn(t,s);return y.xn(t,s)?y.dn(s-i):y.dn(s+i)},y.Ft=function(t,s,i){return t+i*(s-t)},y.Cn=function(t,s,i){return t===s?0:(i-t)/(s-t)},y.En=function(t,s,i,e,h){return y.Ft(e,h,y.Cn(t,s,i))},y.Pn=function(t,s,i,e){return y.Ft(y.Ft(t,s,e),y.Ft(s,i,e),e)},y.Rn=function(t,s,i,e,h){return y.Ft(y.Pn(t,s,i,h),y.Pn(s,i,e,h),h)},y.An=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},y.Fn=function(t){return 0<t&&0==(t-1&t)},y.Dn=function(s){--s;for(let t=1;t<32;t<<=1)s|=s>>t;return s+1},y.On=function(t,s){return Math.round(t*s)/s},y.Ln=function(t,s){return Math.floor(t*s)/s},y.kn=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},y.Nn=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},y.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;0<=e&&"0"===i.charAt(e);--e);return 0<=e&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},y.Bn=function(t,s,i){return y.cn(t,0,255)|y.cn(s,0,255)<<8|y.cn(i,0,255)<<16},1024),xt=16384,Gt=8191,Tt=(y.Wn=function(t,s,i,e){return t=y.cn(Math.floor(1024*t),-8192,Gt),s=y.cn(Math.floor(1024*s),-8192,Gt),i=y.cn(Math.floor(1024*i),-8192,Gt),e=y.cn(Math.floor(1023*e),0,1023),t<0&&(t+=xt),s<0&&(s+=xt),i<0&&(i+=xt),-(t*xt*xt*Mt+s*xt*Mt+i*Mt+e)},y.jn=function(t,s,i){return y.Wn(t,s,i,1)},y.Hn=function(s){if(0<=s)return(255&s)/255;{let t=Math.floor(-s/(xt*xt*Mt));return t>Gt&&(t-=xt),t/1024}},y.Vn=function(s){if(0<=s)return((65280&s)>>8)/255;{let t=Math.floor(-s%(xt*xt*Mt)/(xt*Mt));return t>Gt&&(t-=xt),t/1024}},y.Un=function(s){if(0<=s)return((16711680&s)>>16)/255;{let t=Math.floor(-s%(xt*Mt)/Mt);return t>Gt&&(t-=xt),t/1024}},y.zn=function(t){if(i(t))return 0;if(0<=t)return 1;{const s=Math.floor(-t%Mt);return s/1023}},y.Jn=function(s,i){for(s=Math.floor(s),i=Math.floor(i);0!==i;){let t=i;i=s%i,s=t}return s},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]);y.qn=function(i,e){if((i=Math.floor(i))===(e=Math.floor(e)))return[1,1];for(let s of Tt){let t=i/s[0]*s[1];if(Math.abs(e-t)<1)return s.slice(0);if(t=i/s[1]*s[0],Math.abs(e-t)<1)return[s[1],s[0]]}let t=y.Jn(i,e);return[i/t,e/t]},y.$n=function(t,s,i,e,h,n,r,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(h,r),c=Math.max(h,r);if(l<u||c<a)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(n,o),m=Math.max(n,o);if(d<p||m<f)return!1;const g=h-t+r-i,y=n-s+o-e,w=i-t,S=e-s,b=r-h,v=o-n,M=Math.abs(S*b-v*w),x=b*y-v*g;if(Math.abs(x)>M)return!1;const G=w*y-S*g;return Math.abs(G)<=M},y.Xn=function(t,s,i,e,h,n,r,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(n<f||d<h)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||m<r)return!1;const g=a-t+u-i,y=l-s+c-e,w=i-t,S=e-s,b=u-a,v=c-l,M=Math.abs(S*b-v*w),x=b*y-v*g;if(Math.abs(x)>M)return!1;const G=w*y-S*g;return Math.abs(G)<=M},y.Yn=function(t,s,i,e,h){const n=Math.min(t,i),r=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=h.Zn(),u=h.Kn(),c=h.Qn(),f=h.tr(),d=h.ir(),p=h.er(),m=h.hr(),g=h.nr();return y.Xn(t,s,i,e,n,r,o,a,l,u,c,f)||y.Xn(t,s,i,e,n,r,o,a,c,f,d,p)||y.Xn(t,s,i,e,n,r,o,a,d,p,m,g)||y.Xn(t,s,i,e,n,r,o,a,m,g,l,u)},y.rr=function(s,i,e,h,n){let r=Math.min(s,e),o=Math.max(s,e),a=Math.min(i,h),l=Math.max(i,h),u=0;for(let t=n.length-4;u<=t;u+=2)if(y.Xn(s,i,e,h,r,o,a,l,n[u],n[u+1],n[u+2],n[u+3]))return!0;return y.Xn(s,i,e,h,r,o,a,l,n[u],n[u+1],n[0],n[1])};y.lr=function(t,s,i,e,h,n,r,o){const a=i-t,l=e-s,u=r-h,c=o-n,f=a*c-l*u;if(0==f)return 2;const d=((s-e)*(r-t)+a*(o-s))/f;return 0<d&&d<1+1e-6?(c*(r-t)+(h-r)*(o-s))/f:2},y.ur=function(t,s,i,e,h,n,r,o,a){const l=(r-h)*a,u=(o-n)*a;return y.lr(t,s,i,e,h-l,n-u,r+l,o+u)},y.cr=function(t,s,i,e,h,n,r,o){const a=h-i,l=n-e,u=r-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,w=u*f+c*d,S=1/(p*y-m*m),b=(y*g-m*w)*S,v=(p*w-m*g)*S;return 0<=b&&0<=v&&b+v<=1},y.dr=function(t,s,i,e,h,n,r,o){const a=h-i,l=n-e,u=r-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,w=f*u+d*c,S=p*g-m*m,b=(g*y-m*w)/S,v=(p*w-m*y)/S,M=1-b-v;return[M,b,v]},y.pr=function(t,s,i,e,h,n,r,o,a,l,u,c){return[t*e+s*r+i*l,t*h+s*o+i*u,t*n+s*a+i*c]}}{let l=self.Ds,s=null,i="";if("undefined"!=typeof document){const _t=(s=document).querySelector("base");(i=_t&&_t.hasAttribute("href")?_t.getAttribute("href"):"")&&!(i=i.startsWith("/")?i.substr(1):i).endsWith("/")&&(i+="/")}l.mr=function(){return i},l.gr=function(){if(!s)return"";const t=s.location;return l.yr(t.origin+t.pathname)+i},l.yr=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},l.Sr=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},l.br=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},l.vr=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},l.Mr=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},l.Gr=function(t){return t.replace(/\\/g,"/")},l.Tr=function(t,s){const i=t?l.br(t).slice(1):"";return s===i},l._r=function(t,s){let i,e;return l.Pe(t)&&(i=l.Mr(t.name)),l.we(t)&&(i=l.Mr(t)),l.Pe(s)&&(e=l.Mr(s.name)),l.we(s)&&(e=l.Mr(s)),i===e},l.Ir=function(t){t=l.Gr(t);let s=/^\w\:\//.exec(t),i=(s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),e="",h=t,n,r="";0<i&&(e=t.slice(0,i),h=t.slice(i));const o=(n=h).lastIndexOf("."),a=(0<o&&(r=h.slice(o),n=h.slice(0,-r.length)),s+e+h);return{dir:e,Cr:h,name:n,root:s,ext:r,Er:a}},l.Pr=function(i,e){return new Promise((t,s)=>{self.setTimeout(t,i,e)})},l.Rr=function(t){try{t()}catch(t){l.isDebug&&console.warn("Swallowed exception: ",t)}},l.Ar=function(){},l.uh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},l.Fr=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},l.Dr=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},l.Or=function(t,s){t.length=s},l.Lr=function(t){t&&0!==t.length&&l.Or(t,0)},l.kr=function(i){if(i){for(let s=0;s<i.length;s++){let t=i[s];l.Or(t,0)}l.Or(i,0)}},l.Nr=function(s,i,e){const h=s.length;if(!((i|=0)<=h))for(let t=h;t<i;++t)s.push(e)},l.Br=function(t,s,i){const e=t.length;(s|=0)<e?l.Or(t,s):e<s&&l.Nr(t,s,i)},l.Wr=function(t,s){l.Lr(t),l.zh(t,s)},l.zh=function(i,e){if(e.length<1e4)i.push(...e);else for(let t=0,s=e.length;t<s;++t)i.push(e[t])},l.jr=function(i,e){if(!((e=Math.floor(e))<0||e>=i.length)){let s=i.length-1;for(let t=e;t<s;++t)i[t]=i[t+1];l.Or(i,s)}},l.Hr=function(t,s){let i=t.indexOf(s);0<=i&&t.splice(i,1)},l.Vr=function(s,i){let e=s.length;if(i.length!==e)return!1;for(let t=0;t<e;++t)if(s[t]!==i[t])return!1;return!0},l.Ur=function(i,e){let h=[],n=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e(t)?h.push(t):(i[n]=t,++n)}return l.Or(i,n),h},l.zr=function(i,e){let t=i.length,h=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e.has(t)||(i[h++]=t)}return l.Or(i,h),t-h},l.Jr=function(t,s){return t===Math.floor(t)&&0<=t&&t<s.length},l.qr=function(t,s){if(!l.Jr(t,s))throw new RangeError("array index out of bounds")},l.$r=function(t){return t.slice()},l.Xr=function(t,i){let e=[];for(let s of t)if(l._e(s)){let t=i(s);if(!t)throw new Error("missing clone");if(t.constructor!==s.constructor)throw new Error("object is not a clone");e.push(t)}else l.De(s)?e.push(l.Xr(s,i)):e.push(s);return e},l.Yr=function(s){let i=[];for(let t of s)i.push(t.slice());return i},l.Zr=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},l.Kr=function(t,s,i){const e=new Set;for(const h of t.values())s(h)&&(i?e.add(i(h)):e.add(h));return e},l.Qr=function(t,s){return t.union?t.union(s):new Set([...t,...s])},l.io=function(t,s){for(const i of s)t.add(i);return t},l.first=function(s){for(let t of s)return t;return null},l.xor=function(t,s){return!t!=!s},l.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}},l.eo=function(s){for(let t in s)if(s.hasOwnProperty(t))return!0;return!1},l.ho=function(o,a){return o.length?new Promise((i,e)=>{let h=[],n=0,r=!1;for(let s=0,t=o.length;s<t;++s)h.push(void 0),o[s].then(t=>{r||(h[s]=t,++n===o.length?i(h):a(n,o.length))}).catch(t=>{r=!0,e(t)})}):Promise.resolve([])};let e=[],h=(l.no=function(t){e.push(t)},l.ro=function(){let i=0;for(let s of e){let t=s();i+=t}return Math.floor(i)},1),n=new Map,r=new MessageChannel,o=(r.port2.onmessage=function(t){const s=t.data,i=n.get(s);n.delete(s),i&&i(performance.now())},l.ao=function(t){const s=h++;return n.set(s,t),r.port1.postMessage(s),s},l.lo=function(t){n.delete(t)},l.uo=l.ao,l.co=function(){return new Promise(t=>l.uo(t))},new Set);l.fo=function(s){const i=self.requestAnimationFrame(async t=>{await l.co(),o.has(i)&&(o.delete(i),s(t))});return o.add(i),i},l.do=function(t){o.has(t)&&(self.cancelAnimationFrame(t),o.delete(t))}}{const n=self.Ds;n.po=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},n.mo=function(t){return!n.po(t)},n.yo=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},n.wo=function(t,s){return fetch(t,s).then(t=>(n.yo(t),t))},n.So=function(t){return n.wo(t).then(t=>t.text())},n.bo=function(t){return n.wo(t).then(t=>t.json())},n.vo=function(t){return n.wo(t).then(t=>t.blob())},n.Mo=function(t){return n.wo(t).then(t=>t.arrayBuffer())},n.xo=function(e){return new Promise((t,s)=>{const i=new Image;i.onload=()=>t(i),i.onerror=t=>s(t),i.src=e})},n.Go=function(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsArrayBuffer(e)})},n.To=function(e){return"function"==typeof e.text?e.text():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsText(e)})},n._o=function(t){return n.To(t).then(t=>JSON.parse(t))},n.Io=async function(t,s){let i=URL.createObjectURL(t);try{const e=await n.xo(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof e.decode&&await e.decode(),e}finally{i&&URL.revokeObjectURL(i)}},n.Co=function(t,s){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,s);{const i=document.createElement("canvas");return i.width=t,i.height=s,i}},n.Eo=function(s,i,e){if("number"!=typeof e&&(e=1),i=i||"image/png",e=n.cn(e,0,1),s.convertToBlob)return s.convertToBlob({type:i,quality:e});if(s.toBlob)return new Promise(t=>s.toBlob(t,i,e));throw new Error("could not convert canvas to blob")},n.Po=function(t,s,i){const e=n.Co(t.width,t.height),h=e.getContext("2d");return h.drawImage(t,0,0),n.Eo(e,s,i)},n.Ro=function(t,s,i){if(n.Li.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>n.Po(t,s,i));if(n.Li.ImageBitmap)return createImageBitmap(t).then(t=>n.Po(t,s,i));{const e=n.Co(t.width,t.height),h=e.getContext("2d");return h.putImageData(t,0,0),n.Eo(e,s,i)}},n.Ao=function(t,s){t.clear();for(const i of s)t.add(i)},n.Fo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},n.Do=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},n.Oo=function s(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>s(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],s(t[1])])};{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}},n.Lo=function s(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>s(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],s(t[1])]));{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}}return t},n.ko=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const h of t)"-"===h?0<e&&(i=!0):i?(s+=h.toUpperCase(),i=!1):s+=h,++e;return s},n.No=function(t){return"object"==typeof t&&"function"==typeof t.next},n.Bo=function(s,i){const e=[];if("function"==typeof i)for(let t=0;t<s;++t)e.push(i());else for(let t=0;t<s;++t)e.push(i);return e}}{let e=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},l=function(t,s,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};e,l;const u=self.Ds,It=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,Ct=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;u.Wo=class{constructor(t,s,i,e){this.jo=NaN,this.Ho=NaN,this.Vo=NaN,this.Uo=NaN,this.jo=0,this.Ho=0,this.Vo=0,this.Uo=0,t instanceof u.Wo?this.set(t):this.zo(t||0,s||0,i||0,e||0)}Jo(t,s,i){return this.jo=+t,this.Ho=+s,this.Vo=+i,this.cn(),this}zo(t,s,i,e){return this.jo=+t,this.Ho=+s,this.Vo=+i,this.Uo=+e,this.cn(),this}set(t){return this.jo=t.jo,this.Ho=t.Ho,this.Vo=t.Vo,this.Uo=t.Uo,this}T(t){return this.set(t)}add(t){this.jo+=t.jo,this.Ho+=t.Ho,this.Vo+=t.Vo,this.Uo+=t.Uo,this.cn()}qo(t,s,i,e=0){this.jo+=+t,this.Ho+=+s,this.Vo+=+i,this.Uo+=+e,this.cn()}$o(t){this.Xo(Math.max(this.jo,t.jo)-Math.min(this.jo,t.jo)),this.Yo(Math.max(this.Ho,t.Ho)-Math.min(this.Ho,t.Ho)),this.Zo(Math.max(this.Vo,t.Vo)-Math.min(this.Vo,t.Vo)),this.Ko(Math.max(this.Uo,t.Uo)-Math.min(this.Uo,t.Uo)),this.cn()}Qo(t){this.jo=t.jo,this.Ho=t.Ho,this.Vo=t.Vo}Xo(t){this.jo=u.cn(+t,0,1)}ta(){return this.jo}Yo(t){this.Ho=u.cn(+t,0,1)}ia(){return this.Ho}Zo(t){this.Vo=u.cn(+t,0,1)}ea(){return this.Vo}Ko(t){this.Uo=u.cn(+t,0,1)}na(){return this.Uo}clone(){return u.hn(u.Wo,this.jo,this.Ho,this.Vo,this.Uo)}toArray(){return[this.jo,this.Ho,this.Vo,this.Uo]}ra(){return new Float64Array(this.toArray())}oa(t,s){t[s++]=this.jo,t[s++]=this.Ho,t[s++]=this.Vo,t[s]=this.Uo}aa(t,s){t[s++]=this.jo,t[s++]=this.Ho,t[s]=this.Vo}equals(t){return this.jo===t.jo&&this.Ho===t.Ho&&this.Vo===t.Vo&&this.Uo===t.Uo}la(t){return this.jo===t.jo&&this.Ho===t.Ho&&this.Vo===t.Vo}ua(t,s,i){return this.jo===t&&this.Ho===s&&this.Vo===i}ca(t,s,i,e){return this.jo===t&&this.Ho===s&&this.Vo===i&&this.Uo===e}fa(t,s){return t[s]===Math.fround(this.jo)&&t[s+1]===Math.fround(this.Ho)&&t[s+2]===Math.fround(this.Vo)&&t[s+3]===Math.fround(this.Uo)}da(t,s){return t[s]===Math.fround(this.jo)&&t[s+1]===Math.fround(this.Ho)&&t[s+2]===Math.fround(this.Vo)}multiply(t){this.jo*=t.jo,this.Ho*=t.Ho,this.Vo*=t.Vo,this.Uo*=t.Uo}pa(t){this.jo*=t,this.Ho*=t,this.Vo*=t,this.Uo*=t}ma(){return this.jo*=this.Uo,this.Ho*=this.Uo,this.Vo*=this.Uo,this}ga(){return this.jo/=this.Uo,this.Ho/=this.Uo,this.Vo/=this.Uo,this}cn(){return this.jo=u.cn(this.jo,0,1),this.Ho=u.cn(this.Ho,0,1),this.Vo=u.cn(this.Vo,0,1),this.Uo=u.cn(this.Uo,0,1),this}ya(t){this.jo=u.Hn(t),this.Ho=u.Vn(t),this.Vo=u.Un(t),this.Uo=u.zn(t)}wa(t,s,i){const e=u.ae(t)?t:this.ta(),h=u.ae(s)?s:this.ia(),n=u.ae(i)?i:this.ea();return`rgb(${100*e}%, ${100*h}%, ${100*n}%)`}Sa(t,s,i,e){const h=u.ae(t)?t:this.ta(),n=u.ae(s)?s:this.ia(),r=u.ae(i)?i:this.ea(),o=u.ae(e)?e:this.na();return`rgba(${100*h}%, ${100*n}%, ${100*r}%, ${o})`}ba(){const t=Math.round(255*this.ta()),s=Math.round(255*this.ia()),i=Math.round(255*this.ea());return"#"+e(t.toString(16))+e(s.toString(16))+e(i.toString(16))}Ma(t){if("string"!=typeof t)return!1;let s,i,e;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Xo(s),isFinite(i)&&this.Yo(i),isFinite(e)&&this.Zo(e),this.Ko(1),!0}xa(){const t=Math.round(255*this.ta()),s=Math.round(255*this.ia()),i=Math.round(255*this.ea());return t+`, ${s}, `+i}Ga(){const t=Math.round(255*this.ta()),s=Math.round(255*this.ia()),i=Math.round(255*this.ea());return[t,s,i]}Ta(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Xo(i),isFinite(e)&&this.Yo(e),isFinite(h)&&this.Zo(h),this.Ko(1),!0}_a(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Xo(i),isFinite(e)&&this.Yo(e),isFinite(h)&&this.Zo(h),this.Ko(1),!0}Ia(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255,n=parseFloat(s[3].trim());return isFinite(i)&&this.Xo(i),isFinite(e)&&this.Yo(e),isFinite(h)&&this.Zo(h),isFinite(n)&&this.Ko(n),!0}Ca(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100,n=parseFloat(s[3].trim());return isFinite(i)&&this.Xo(i),isFinite(e)&&this.Yo(e),isFinite(h)&&this.Zo(h),isFinite(n)&&this.Ko(n),!0}Ea(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this._a(t):this.Ta(t);if(t.startsWith("rgba("))return t.includes("%")?this.Ca(t):this.Ia(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.Pa(t);{const s=t.split(",");return t.includes("%")?3===s.length?this._a(t):4===s.length&&this.Ca(t):3===s.length?this.Ta(t):4===s.length&&this.Ia(t)}}return this.Ma(t)}toJSON(){return[this.jo,this.Ho,this.Vo,this.Uo]}Ra(t,s,i,e){let h,n,r;if(t%=360,s=u.cn(s,0,100),i=u.cn(i,0,100),e=u.cn(e,0,1),t/=360,i/=100,0==(s/=100))h=n=r=i;else{const o=i<.5?i*(1+s):i+s-i*s,a=2*i-o;h=l(a,o,t+1/3),n=l(a,o,t),r=l(a,o,t-1/3)}return this.Xo(h),this.Yo(n),this.Zo(r),this.Ko(e),this}Pa(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=It.exec(s),e=Ct.exec(s);return i&&4===i.length?(this.Ra(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.Ra(+i[1],+i[2],+i[3],+i[4]),0))}Aa(){const t=this.jo,s=this.Ho,i=this.Vo,e=this.Uo,h=u.Wo.Fa(t,s,i),n=u.Wo.Da(t,s,i),r=u.Wo.Oa(t,s,i);return`hsla(${h}, ${n}%, ${r}%, ${e})`}La(){const t=this.jo,s=this.Ho,i=this.Vo;return[u.Wo.Fa(t,s,i),u.Wo.Da(t,s,i),u.Wo.Oa(t,s,i),this.Uo]}ka(t){!Array.isArray(t)||t.length<3||(this.jo=t[0],this.Ho=t[1],this.Vo=t[2],this.Uo=4<=t.length?t[3]:1)}set r(t){this.Xo(t)}get r(){return this.ta()}set Na(t){this.Yo(t)}get Na(){return this.ia()}set b(t){this.Zo(t)}get b(){return this.ea()}set a(t){this.Ko(t)}get a(){return this.na()}Ba(t,s){switch(t){case 0:this.Xo(s);break;case 1:this.Yo(s);break;case 2:this.Zo(s);break;case 3:this.Ko(s);break;default:throw new RangeError("invalid color index")}}Wa(t){switch(t){case 0:return this.ta();case 1:return this.ia();case 2:return this.ea();case 3:return this.na();default:throw new RangeError("invalid color index")}}static ja(t,s){let i,e;if(Array.isArray(t))(i=new u.Wo).ka(t);else{if(!(t instanceof u.Wo))throw new Error("unexpected type");i=t}if(Array.isArray(s))(e=new u.Wo).ka(s);else{if(!(s instanceof u.Wo))throw new Error("unexpected type");e=s}return i.equals(e)}static Ha(t,s){return u.cn(Math.max(t,s)-Math.min(t,s),0,1)}static Va(t,s){const i=new u.Wo;return i.Xo(Math.max(t.jo,s.jo)-Math.min(t.jo,s.jo)),i.Yo(Math.max(t.Ho,s.Ho)-Math.min(t.Ho,s.Ho)),i.Zo(Math.max(t.Vo,s.Vo)-Math.min(t.Vo,s.Vo)),i.Ko(Math.max(t.Uo,s.Uo)-Math.min(t.Uo,s.Uo)),i}static Ua(t,s){const i=new u.Wo(0,0,0,1);return i.Xo(Math.max(t.jo,s.jo)-Math.min(t.jo,s.jo)),i.Yo(Math.max(t.Ho,s.Ho)-Math.min(t.Ho,s.Ho)),i.Zo(Math.max(t.Vo,s.Vo)-Math.min(t.Vo,s.Vo)),i}static Fa(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;let n=0;switch(e){case t:n=(s-i)/(e-h)+(s<i?6:0);break;case s:n=(i-t)/(e-h)+2;break;case i:n=(t-s)/(e-h)+4}return Math.round(n/6*360)}static Da(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;const n=(e+h)/2,r=e-h,o=.5<n?r/(2-e-h):r/(e+h);return Math.round(100*o)}static Oa(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i),n=(e+h)/2;return e?Math.round(100*n):0}},u.Wo.za=Object.freeze(u.hn(u.Wo,1,1,1,1)),u.Wo.Ja=Object.freeze(u.hn(u.Wo,0,0,0,1)),u.Wo.qa=Object.freeze(u.hn(u.Wo,0,0,0,0))}{const Et=self.Ds;Et.$a=class{constructor(t,s){this.Xa=0,this.Ya=0,t instanceof Et.$a?this.T(t):this.set(t||0,s||0)}set(t,s){this.Xa=+t,this.Ya=+s}T(t){this.Xa=t.Xa,this.Ya=t.Ya}equals(t){return this.Xa===t.Xa&&this.Ya===t.Ya}Za(t,s){return this.Xa===t&&this.Ya===s}fa(t,s){return t[s]===Math.fround(this.Xa)&&t[s+1]===Math.fround(this.Ya)}Ka(t){this.Xa=+t}Qa(){return this.Xa}tl(t){this.Ya=+t}sl(){return this.Ya}toArray(){return[this.Xa,this.Ya]}ra(){return new Float64Array(this.toArray())}oa(t,s){t[s++]=this.Xa,t[s]=this.Ya}offset(t,s){this.Xa+=+t,this.Ya+=+s}scale(t,s){this.Xa*=t,this.Ya*=s}Tt(t,s){this.Xa/=t,this.Ya/=s}round(){this.Xa=Math.round(this.Xa),this.Ya=Math.round(this.Ya)}floor(){this.Xa=Math.floor(this.Xa),this.Ya=Math.floor(this.Ya)}ceil(){this.Xa=Math.ceil(this.Xa),this.Ya=Math.ceil(this.Ya)}angle(){return Et.bn(0,0,this.Xa,this.Ya)}il(){return this.Xa*this.Xa+this.Ya*this.Ya}length(){return Et.gn(this.Xa,this.Ya)}el(t,s){const i=this.Xa*s-this.Ya*t;this.Ya=this.Ya*s+this.Xa*t,this.Xa=i}rotate(t){0!==t&&this.el(Math.sin(t),Math.cos(t))}hl(t,s,i){0===t||s===this.Xa&&i===this.Ya||(this.Xa-=s,this.Ya-=i,this.el(Math.sin(t),Math.cos(t)),this.Xa+=+s,this.Ya+=+i)}move(t,s){0!==s&&(this.Xa+=Math.cos(t)*s,this.Ya+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Xa/=t,this.Ya/=t)}cn(t,s){this.Xa=Et.cn(this.Xa,t,s),this.Ya=Et.cn(this.Ya,t,s)}Rt(t){return this.Xa*t.Xa+this.Ya*t.Ya}reverse(){this.Xa=-this.Xa,this.Ya=-this.Ya}nl(){let t=this.Xa;return this.Xa=this.Ya,this.Ya=-t,this}}}{const Pt=self.Ds;Pt.Rect=class{constructor(t,s,i,e){this.rl=NaN,this.ol=NaN,this.al=NaN,this.ll=NaN,this.rl=0,this.ol=0,this.al=0,this.ll=0,t instanceof Pt.Rect?this.T(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.rl=+t,this.ol=+s,this.al=+i,this.ll=+e}ul(t,s,i,e){s=+s,this.rl=t=+t,this.ol=s,this.al=t+ +i,this.ll=s+ +e}T(t){this.rl=+t.rl,this.ol=+t.ol,this.al=+t.al,this.ll=+t.ll}clone(){return new Pt.Rect(this.rl,this.ol,this.al,this.ll)}static cl(t,s){const i=new Pt.Rect;return i.fl(Math.min(t.rl,s.rl)),i.dl(Math.min(t.ol,s.ol)),i.pl(Math.max(t.al,s.al)),i.ml(Math.max(t.ll,s.ll)),i}static gl(t){return new Pt.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.rl===t.rl&&this.ol===t.ol&&this.al===t.al&&this.ll===t.ll}yl(t,s,i,e){return this.rl===t&&this.ol===s&&this.width()===i&&this.height()===e}fa(t,s){return t[s]===Math.fround(this.rl)&&t[s+1]===Math.fround(this.ol)&&t[s+2]===Math.fround(this.al)&&t[s+3]===Math.fround(this.ll)}fl(t){this.rl=+t}wl(){return this.rl}dl(t){this.ol=+t}Sl(){return this.ol}pl(t){this.al=+t}bl(){return this.al}ml(t){this.ll=+t}vl(){return this.ll}toArray(){return[this.rl,this.ol,this.al,this.ll]}ra(){return new Float64Array(this.toArray())}Ml(){return new DOMRect(this.rl,this.ol,this.width(),this.height())}static xl(t){return Pt.hn(Pt.Rect,t.left,t.top,t.right,t.bottom)}oa(t,s){t[s++]=this.rl,t[s++]=this.ol,t[s++]=this.al,t[s]=this.ll}Gl(t,s){t[s++]=this.rl,t[s++]=this.ol,t[s++]=this.al,t[s++]=this.ol,t[s++]=this.al,t[s++]=this.ll,t[s++]=this.rl,t[s]=this.ll}Tl(t,s,i){t[s++]=this.rl,t[s++]=this.ol,t[s++]=i,t[s++]=this.al,t[s++]=this.ol,t[s++]=i,t[s++]=this.al,t[s++]=this.ll,t[s++]=i,t[s++]=this.rl,t[s++]=this.ll,t[s]=i}width(){return this.al-this.rl}height(){return this.ll-this.ol}_l(){return(this.rl+this.al)/2}Il(){return(this.ol+this.ll)/2}offset(t,s){s=+s,this.rl+=t=+t,this.ol+=s,this.al+=t,this.ll+=s}offsetLeft(t){this.rl+=+t}offsetTop(t){this.ol+=+t}Cl(t){this.al+=+t}El(t){this.ll+=+t}Pl(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.ol<this.ll?this.rl<this.al?this.ll=this.ol+this.width():this.ll=this.ol-this.width():this.rl<this.al?this.ll=this.ol-this.width():this.ll=this.ol+this.width()}Rl(t,s){s=+s,this.rl-=t=+t,this.ol-=s,this.al+=t,this.ll+=s}Al(t,s){s=+s,this.rl+=t=+t,this.ol+=s,this.al-=t,this.ll-=s}multiply(t,s){this.rl*=t,this.ol*=s,this.al*=t,this.ll*=s}Tt(t,s){this.rl/=t,this.ol/=s,this.al/=t,this.ll/=s}Fl(t){this.rl=+t-this.rl,this.al=+t-this.al}Dl(t){this.ol=+t-this.ol,this.ll=+t-this.ll}Ol(t,s){const i=this.width(),e=this.height(),h=this.wl()+i*t,n=this.Sl()+e*s;this.ul(h-e*s,n-i*t,e,i)}Ll(){const t=this.rl;this.rl=this.al,this.al=t}kl(){const t=this.ol;this.ol=this.ll,this.ll=t}Nl(t){const s=this.ol;this.ol=+t-this.ll,this.ll=+t-s}round(){this.rl=Math.round(this.rl),this.ol=Math.round(this.ol),this.al=Math.round(this.al),this.ll=Math.round(this.ll)}Bl(){this.rl=Math.ceil(this.rl),this.ol=Math.ceil(this.ol),this.al=Math.floor(this.al),this.ll=Math.floor(this.ll)}Wl(){this.rl=Math.floor(this.rl),this.ol=Math.floor(this.ol),this.al=Math.ceil(this.al),this.ll=Math.ceil(this.ll)}floor(){this.rl=Math.floor(this.rl),this.ol=Math.floor(this.ol),this.al=Math.floor(this.al),this.ll=Math.floor(this.ll)}ceil(){this.rl=Math.ceil(this.rl),this.ol=Math.ceil(this.ol),this.al=Math.ceil(this.al),this.ll=Math.ceil(this.ll)}cn(t,s,i,e){this.rl=Math.max(this.rl,+t),this.ol=Math.max(this.ol,+s),this.al=Math.min(this.al,+i),this.ll=Math.min(this.ll,+e)}jl(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.rl=Pt.cn(this.rl,t,i),this.ol=Pt.cn(this.ol,s,e),this.al=Pt.cn(this.al,t,i),this.ll=Pt.cn(this.ll,s,e)}normalize(){this.rl>this.al&&this.Ll(),this.ol>this.ll&&this.kl()}Hl(t){return!(t.al<this.rl||t.ll<this.ol||t.rl>this.al||t.ol>this.ll)}Vl(t,s,i){return!(t.al+s<this.rl||t.ll+i<this.ol||t.rl+s>this.al||t.ol+i>this.ll)}Ul(t,s){return t>=this.rl&&t<=this.al&&s>=this.ol&&s<=this.ll}zl(t){return t.rl>=this.rl&&t.ol>=this.ol&&t.al<=this.al&&t.ll<=this.ll}Jl(t){t.rl<this.rl&&(this.rl=+t.rl),t.ol<this.ol&&(this.ol=+t.ol),t.al>this.al&&(this.al=+t.al),t.ll>this.ll&&(this.ll=+t.ll)}ql(t){this.rl=Pt.Ft(t.rl,t.al,this.rl),this.ol=Pt.Ft(t.ol,t.ll,this.ol),this.al=Pt.Ft(t.rl,t.al,this.al),this.ll=Pt.Ft(t.ol,t.ll,this.ll)}}}{const Rt=self.Ds;Rt.$l=class{constructor(t,s,i,e,h,n,r,o){this.Xl=NaN,this.Yl=NaN,this.Zl=NaN,this.Kl=NaN,this.Ql=NaN,this.tu=NaN,this.su=NaN,this.iu=NaN,this.Xl=0,this.Yl=0,this.Zl=0,this.Kl=0,this.Ql=0,this.tu=0,this.su=0,this.iu=0,t instanceof Rt.$l?this.T(t):this.set(t||0,s||0,i||0,e||0,h||0,n||0,r||0,o||0)}set(t,s,i,e,h,n,r,o){this.Xl=+t,this.Yl=+s,this.Zl=+i,this.Kl=+e,this.Ql=+h,this.tu=+n,this.su=+r,this.iu=+o}eu(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}T(t){this.Xl=t.Xl,this.Yl=t.Yl,this.Zl=t.Zl,this.Kl=t.Kl,this.Ql=t.Ql,this.tu=t.tu,this.su=t.su,this.iu=t.iu}equals(t){return this.Xl===t.Xl&&this.Yl===t.Yl&&this.Zl===t.Zl&&this.Kl===t.Kl&&this.Ql===t.Ql&&this.tu===t.tu&&this.su===t.su&&this.iu===t.iu}hu(t){this.Xl=+t}Zn(){return this.Xl}nu(t){this.Yl=+t}Kn(){return this.Yl}ru(t){this.Zl=+t}Qn(){return this.Zl}ou(t){this.Kl=+t}tr(){return this.Kl}au(t){this.Ql=+t}ir(){return this.Ql}lu(t){this.tu=+t}er(){return this.tu}uu(t){this.su=+t}hr(){return this.su}cu(t){this.iu=+t}nr(){return this.iu}fu(){return new DOMQuad(new DOMPoint(this.Xl,this.Yl),new DOMPoint(this.Zl,this.Kl),new DOMPoint(this.Ql,this.tu),new DOMPoint(this.su,this.iu))}static du(t){return Rt.hn(Rt.$l,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Xl,this.Yl,this.Zl,this.Kl,this.Ql,this.tu,this.su,this.iu]}ra(){return new Float64Array(this.toArray())}oa(t,s){t[s++]=this.Xl,t[s++]=this.Yl,t[s++]=this.Zl,t[s++]=this.Kl,t[s++]=this.Ql,t[s++]=this.tu,t[s++]=this.su,t[s]=this.iu}pu(t,s,i){t[s++]=this.Xl,t[s++]=this.Yl,t[s++]=i,t[s++]=this.Zl,t[s++]=this.Kl,t[s++]=i,t[s++]=this.Ql,t[s++]=this.tu,t[s++]=i,t[s++]=this.su,t[s++]=this.iu,t[s]=i}offset(t,s){s=+s,this.Xl+=t=+t,this.Yl+=s,this.Zl+=t,this.Kl+=s,this.Ql+=t,this.tu+=s,this.su+=t,this.iu+=s}round(){this.Xl=Math.round(this.Xl),this.Yl=Math.round(this.Yl),this.Zl=Math.round(this.Zl),this.Kl=Math.round(this.Kl),this.Ql=Math.round(this.Ql),this.tu=Math.round(this.tu),this.su=Math.round(this.su),this.iu=Math.round(this.iu)}floor(){this.Xl=Math.floor(this.Xl),this.Yl=Math.floor(this.Yl),this.Zl=Math.floor(this.Zl),this.Kl=Math.floor(this.Kl),this.Ql=Math.floor(this.Ql),this.tu=Math.floor(this.tu),this.su=Math.floor(this.su),this.iu=Math.floor(this.iu)}ceil(){this.Xl=Math.ceil(this.Xl),this.Yl=Math.ceil(this.Yl),this.Zl=Math.ceil(this.Zl),this.Kl=Math.ceil(this.Kl),this.Ql=Math.ceil(this.Ql),this.tu=Math.ceil(this.tu),this.su=Math.ceil(this.su),this.iu=Math.ceil(this.iu)}mu(t){this.Xl=t.rl,this.Yl=t.ol,this.Zl=t.al,this.Kl=t.ol,this.Ql=t.al,this.tu=t.ll,this.su=t.rl,this.iu=t.ll}gu(t,s){0===s?this.mu(t):this.yu(t,Math.sin(s),Math.cos(s))}yu(t,s,i){const e=t.rl*s,h=t.ol*s,n=t.al*s,r=t.ll*s,o=t.rl*i,a=t.ol*i,l=t.al*i,u=t.ll*i;this.Xl=o-h,this.Yl=a+e,this.Zl=l-h,this.Kl=a+n,this.Ql=l-r,this.tu=u+n,this.su=o-r,this.iu=u+e}wu(t){t.set(Math.min(this.Xl,this.Zl,this.Ql,this.su),Math.min(this.Yl,this.Kl,this.tu,this.iu),Math.max(this.Xl,this.Zl,this.Ql,this.su),Math.max(this.Yl,this.Kl,this.tu,this.iu))}Ul(t,s){let i=this.Zl-this.Xl,e=this.Kl-this.Yl,h=this.Ql-this.Xl,n=this.tu-this.Yl,r=t-this.Xl,o=s-this.Yl,a=i*i+e*e,l=i*h+e*n,u=i*r+e*o,c=h*h+n*n,f=h*r+n*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return 0<=p&&0<m&&p+m<1||(m=((a=(i=this.su-this.Xl)*i+(e=this.iu-this.Yl)*e)*f-(l=i*h+e*n)*(u=i*r+e*o))*(d=1/(a*c-l*l)),0<=(p=(c*u-l*f)*d)&&0<m&&p+m<1)}_l(){return(this.Xl+this.Zl+this.Ql+this.su)/4}Il(){return(this.Yl+this.Kl+this.tu+this.iu)/4}Su(t,s,i,e){return!(!this.Ul(t,s)&&!this.Ul(i,e))||Rt.Yn(t,s,i,e,this)}bu(t){let s=t._l(),i=t.Il();if(this.Ul(s,i))return!0;if(s=this._l(),i=this.Il(),t.Ul(s,i))return!0;const e=this.Xl,h=this.Yl,n=this.Zl,r=this.Kl,o=this.Ql,a=this.tu,l=this.su,u=this.iu;return Rt.Yn(e,h,n,r,t)||Rt.Yn(n,r,o,a,t)||Rt.Yn(o,a,l,u,t)||Rt.Yn(l,u,e,h,t)}vu(){const t=this.Xl,s=this.Yl;this.Xl=this.Zl,this.Yl=this.Kl,this.Zl=this.Ql,this.Kl=this.tu,this.Ql=this.su,this.tu=this.iu,this.su=t,this.iu=s}Mu(){this.xu(0,2),this.xu(1,3),this.xu(6,4),this.xu(7,5)}Gu(){this.xu(0,6),this.xu(1,7),this.xu(2,4),this.xu(3,5)}Tu(){this.xu(2,6),this.xu(3,7)}xu(t,s){const i=this._u(t);this.Iu(t,this._u(s)),this.Iu(s,i)}_u(t){switch(t){case 0:return this.Xl;case 1:return this.Yl;case 2:return this.Zl;case 3:return this.Kl;case 4:return this.Ql;case 5:return this.tu;case 6:return this.su;case 7:return this.iu;default:throw new RangeError("invalid quad point index")}}Iu(t,s){switch(s=+s,t){case 0:this.Xl=s;break;case 1:this.Yl=s;break;case 2:this.Zl=s;break;case 3:this.Kl=s;break;case 4:this.Ql=s;break;case 5:this.tu=s;break;case 6:this.su=s;break;case 7:this.iu=s;break;default:throw new RangeError("invalid quad point index")}}}}{const At=self.Ds,Ft=[0,0,1,0,1,1,0,1],Dt=At.hn(At.$l);At.Cu=class extends At.tn{constructor(t,s=!0){super(),t=t||Ft,this.Eu=Float64Array.from(t),this.Pu=new At.Rect,this.Ru=!0,this.Au=s}nn(){}Fu(){return this.Eu}Du(){return this.Eu.length/2}Ou(t){this.Eu.length===t.length?this.Eu.set(t):this.Eu=Float64Array.from(t),this.Ru=!0}Lu(){this.Ou(Ft)}T(t){this.Ou(t.Eu)}ku(){this.Ru=!0}Nu(){if(this.Ru){let i=this.Eu,e=i[0],h=i[1],n=e,r=h;for(let t=0,s=i.length;t<s;t+=2){const o=i[t],a=i[t+1];o<e&&(e=o),o>n&&(n=o),a<h&&(h=a),a>r&&(r=a)}this.Pu.set(e,h,n,r),this.Ru=!1}}mu(t,s,i){let e=this.Eu;8!==e.length&&(e=new Float64Array(8),this.Eu=e),e[0]=t.wl()-s,e[1]=t.Sl()-i,e[2]=t.bl()-s,e[3]=t.Sl()-i,e[4]=t.bl()-s,e[5]=t.vl()-i,e[6]=t.wl()-s,e[7]=t.vl()-i,this.Pu.T(t),0===s&&0===i||this.Pu.offset(-s,-i),this.Ru=!1}Bu(t,s,i){Dt.T(t),Dt.offset(s,i),this.Ou(Dt.toArray()),this.Ru=!0}transform(t,s,i){let e=0,h=1;0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.Wu(t,s,e,h)}Wu(i,e,h,n){const r=this.Eu;for(let t=0,s=r.length;t<s;t+=2){const o=t+1,a=r[t]*i,l=r[o]*e;r[t]=a*n-l*h,r[o]=l*n+a*h}this.Ru=!0}offset(i,e){const h=this.Eu;for(let t=0,s=h.length;t<s;t+=2)h[t]+=i,h[t+1]+=e}Ul(i,e){const h=this.Eu;if(i===h[0]&&e===h[1])return!0;this.Nu();let t=this.Pu,n=t.wl()-110,r=t.Sl()-101,o=t.bl()+131,a=t.vl()+120,l=0,u=0,c,f,d=0,p=0,m,g,y=(c=n<i?(l=n,i):(l=i,n),f=r<e?(u=r,e):(u=e,r),m=o<i?(d=o,i):(d=i,o),g=a<e?(p=a,e):(p=e,a),0),w=0;for(let t=0,s=h.length;t<s;t+=2){const S=(t+2)%s,b=h[t],v=h[t+1],M=h[S],x=h[1+S];At.Xn(n,r,i,e,l,c,u,f,b,v,M,x)&&++y,At.Xn(o,a,i,e,d,m,p,g,b,v,M,x)&&++w}return y%2==1||w%2==1}ju(t,c,f){const d=t.Eu,p=this.Eu;if(this.Ul(d[0]+c,d[1]+f))return!0;if(t.Ul(p[0]-c,p[1]-f))return!0;for(let s=0,u=p.length;s<u;s+=2){let t=(s+2)%u,i=p[s],e=p[s+1],h=p[t],n=p[1+t],r=0,o=0,a,l;a=i<h?(r=i,h):(r=h,i),l=e<n?(o=e,n):(o=n,e);for(let t=0,s=d.length;t<s;t+=2){const m=(t+2)%s,g=d[t]+c,y=d[t+1]+f,w=d[m]+c,S=d[1+m]+f;if(At.Xn(i,e,h,n,r,a,o,l,g,y,w,S))return!0}}return!1}Su(i,e,h,n,r,o){if(this.Ul(h-i,n-e))return!0;if(this.Ul(r-i,o-e))return!0;let a=0,l=0,u,c;u=h<r?(a=h,r):(a=r,h),c=n<o?(l=n,o):(l=o,n);const f=this.Eu;for(let t=0,s=f.length;t<s;t+=2){const d=(t+2)%s,p=f[t]+i,m=f[t+1]+e,g=f[d]+i,y=f[1+d]+e;if(At.Xn(h,n,r,o,a,u,l,c,p,m,g,y))return!0}return!1}Mu(i){const e=this.Eu;for(let t=0,s=e.length;t<s;t+=2)e[t]=2*i-e[t];this.Ru=!0}Gu(i){const e=this.Eu;for(let t=0,s=e.length;t<s;t+=2){const h=t+1;e[h]=2*i-e[h]}this.Ru=!0}Tu(){const i=this.Eu;for(let t=0,s=i.length;t<s;t+=2){const e=t+1,h=i[t];i[t]=i[e],i[e]=h}this.Ru=!0}Hu(){let i=this.Eu,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t];return e/this.Du()}Vu(){let i=this.Eu,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t+1];return e/this.Du()}Uu(){return this.Eu}zu(){return this.Du()}Ju(){return this.Au}}}{const Ot=self.Ds;Ot.qu=class extends Ot.tn{constructor(t){if(super(),this.$u=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}nn(){this.Xu(),this.$u=null}Yu(){return 0===this.$u.size}Xu(){const t=this.$u;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){let e=this.$u,h=e.get(t);h||(h=new Map,e.set(t,h)),h.set(s,i)}Ks(t,s){const i=this.$u.get(t);return i&&i.get(s)}Zs(t,s){const i=this.$u.get(t);return!!i&&i.has(s)}Zu(t,s){const i=this.$u,e=i.get(t);if(!e)return!1;const h=e.delete(s);return h&&0===e.size&&i.delete(t),h}Ku(t){const s=this.$u,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[e,h]of s.entries())h.delete(t)&&0===h.size&&s.delete(e)}Qu(){let t=0;for(const s of this.$u.values())t+=s.size;return t}*values(){for(const t of this.$u.values())yield*t.values()}*tc(){for(const[t,s]of this.$u.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.$u.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const Lt=self.Ds;Lt.sc=class extends Lt.tn{constructor(){super(),this.ic=new Set,this.ec=[],this.hc=!1}nn(){this.Xu()}Xu(){this.ic.clear(),Lt.Lr(this.ec),this.hc=!1}nc(t){this.ic.has(t)||(this.ic.add(t),this.hc)||this.ec.push(t)}Zs(t){return this.ic.has(t)}Zu(t){this.ic.delete(t)&&(this.hc=!0)}Qu(){return this.ic.size}Yu(){return 0===this.ic.size}rc(){return this.hc&&(this.oc(),this.hc=!1),this.ec}oc(){const t=this.ec;Lt.Lr(t);for(const s of this.ic)t.push(s)}}}{const kt=self.Ds,Nt=new Map,Bt=new Map,Wt=new Map,jt=new Map,Ht=new Map,Vt=new Map,Ut=new Map,zt=new Map,Jt=new Map,qt=(Jt.set("linear","noease"),Jt.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),$t=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Xt=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),Yt=(self.ac=class hs{constructor(){}static lc(){return"default"}static uc(){return"noease"}static cc(t){return Xt.get(t)}static fc(s,...i){this.dc();let t,e=(s?(Wt.has(s)||Wt.set(s,new Map),[...(t=Wt.get(s)).keys()].filter(t=>!hs.mc(t,s)||hs.mc(t,s).transition.IsForAnyPurpose())):[...(t=Ht).keys()]).sort();return[...Bt.keys()].concat(e).filter(t=>!i.includes(t))}static yc(){this.dc();const t=[...Ht.keys()];return t.sort(),[...Bt.keys()].concat(t)}static wc(){this.dc();const t=[...Ht.keys()];return t.sort(),t}static Sc(t){for(const s of qt){const i=self.lang("ui.bars.timeline.eases."+s);if(i===t)return!0}for(const e of $t){const h=self.lang("ui.bars.timeline.short-eases."+e);if(h===t)return!0}}static vc(t){return this.dc(),[...Bt.keys()].includes(t)}static Mc(t){const s=Jt.get(t);return s?Nt.get(s):hs.vc(t)?Nt.get(t):Ut.has(t)?Ut.get(t):void 0}static xc(t){return this.dc(),zt.get(t)}static Gc(t,s){this.dc();const i=hs.Mc(t);if(i)return i;if(s)return Wt.get(s).get(t);throw new Error("missing ease function")}static mc(t,s){this.dc();const i=jt.get(s);if(i)return i.get(t)}static Tc(t,s){this.dc();const i=hs.Mc(t);return!!i||!!Wt.get(s).get(t)}static _c(t){this.dc();const s=hs.Mc(t);return s||Ht.get(t)}static Ic(t){return this.dc(),Vt.get(t)}static Cc(t){this.dc();const s=this.yc();return s[t]}static Ec(t,s){this.dc();const i=this.fc(s);return i.indexOf(t)}static Pc(t){return this.Ec(t)}static dc(){0===Nt.size&&(this.Rc("default",()=>{}),this.Rc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.Rc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.Rc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.Rc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.Rc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.Rc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.Rc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.Rc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.Rc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.Rc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.Rc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.Rc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.Rc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.Rc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.Rc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.Rc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.Rc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.Rc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.Rc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Rc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.Rc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.Rc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.Rc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.Rc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.Rc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Rc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.Rc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Rc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.Rc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.Rc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.Rc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Ac("cubicbezier",this.Fc),this.Ac("spline",this.Dc))}static Rc(t,s,i=!1){if("function"==typeof s)hs.Oc(t,s,"predefined");else{if(!kt.De(s))throw new Error("unexpected arguments");if(self.BuiltInTransition){const h=kt.hn(self.BuiltInTransition,t,i);h.SetFromJson(s),hs.Oc(t,(t,s,i,e)=>h.Lc(t,s,i,e),"predefined"),zt.set(t,h)}else{const n=kt.hn(kt.kc,[t,s.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);n.Nc(i),hs.Oc(t,(t,s,i,e)=>n.Lc(t,s,i,e),"predefined")}}}static Ac(t,s){hs.Oc(t,s,"private")}static Bc(t,s,i,e){this.dc(),hs.Oc(t,s,"custom",i,e)}static Wc(t,s){if(!this.vc(t)&&![...Ut.keys()].includes(t)){const i=Wt.get(s),e=(i&&i.delete(t),jt.get(s));e&&e.delete(t)}}static Oc(t,s,i,e,h){switch(i){case"predefined":Nt.set(t,s),Bt.set(t,s);break;case"custom":if(e){Wt.has(e)||Wt.set(e,new Map),jt.has(e)||jt.set(e,new Map);const n=Wt.get(e),r=(n.set(t,s),jt.get(e));r.set(t,h)}else Ht.set(t,s),Vt.set(t,h);break;case"private":Nt.set(t,s),Ut.set(t,s);break;default:throw new Error("unexpected ease mode")}}static jc(t,s,i,e){return 0===e?s:i*t/e+s}static Fc(t,s,i,e,h){const n=s,r=3*t*(i-s),o=3*t**2*(s+e-2*i),a=t**3*(h-s+3*i-3*e);return n+r+o+a}static Dc(t,s,i,e,h,n,r,o,a,l){if(e===h&&n===r)return t;const u=es(t,s,e,n,o,l),c=Kt(i,h,r,a),f=Qt(i,h,r,a),d=ts(i,h,r,a);return ss(u,c,f,d)}static Hc(t,s,i,e){const h=[],n=Kt(t,s,i,e),r=Qt(t,s,i,e),o=ts(t,s,i,e);for(let t=0;t<Yt;++t){const a=ss(t*Zt,n,r,o);h.push(a)}return h}},11),Zt=1/(Yt-1),Kt=(t,s,i,e)=>e-3*i+3*s-t,Qt=(t,s,i,e)=>3*i-6*s+3*t,ts=(t,s,i,e)=>3*(s-t),ss=(t,s,i,e)=>((s*t+i)*t+e)*t,is=(t,s,i,e)=>3*s*t*t+2*i*t+e,es=(r,t,s,i,e,h)=>{if(1==r)return 1;let o=0,n=1,a=h[n],l=Yt-1;for(Yt;n!=l&&a<=r;)n++,a=h[n],o+=Zt;n--;let u=(r-(a=h[n]))/(h[n+1]-a),c=o+u*Zt,f=Kt(t,s,i,e),d=Qt(t,s,i,e),p=ts(t,s,i,e),m=is(c,f,d,p);if(0===m)return c;if(.01<=m){for(let t=0;t<4;++t){const g=ss(c,f,d,p)-r,y=is(c,f,d,p);c-=g/y}return c}{let s=o,i=o+Zt,e=0,h,n;do{c=s+(i-s)/2;let t=ss(c,f,d,p)-r;0<t?i=c:s=c,h=1e-7<Math.abs(t),n=++e<10}while(h&&n);return c}}}{let o=function(t){ns.we(t)};o;const ns=self.Ds;ns.Vc=class{constructor(t){this.Uc=[],this.ln=t||"",this.zc=0}nn(){this.Xu(),this.Uc=null}Jc(){return this.ln}Xu(){ns.kr(this.Uc),this.zc=0}qc(){return this.zc}$c(t=Math.random()*this.qc()){let s=0;for(const[i,e]of this.Uc)if(t<(s+=i))return e;return 0}Xc(t,s){o(s),this.zc+=t,this.Uc.push([t,s])}Yc(s,i){o(i);const e=0===s;for(let t=0;t<this.Uc.length;t++){const h=this.Uc[t],n=e||h[0]===s,r=h[1]===i;if(n&&r){this.Uc.splice(t,1),this.zc-=h[0];break}}}Zc(){return JSON.stringify(this.Uc)}static Kc(t,s){const i=new ns.Vc(s),e=JSON.parse(t);for(const h of e){const n=h[0],r=h[1];i.Xc(n,r)}return i}}}{let t=self.Ds,i=0;t.Qc=class{constructor(t,s){this.tf=t,this.if=s,this.ef=i++,this.tf.hf("runtime","screen-reader-text",{type:"create",id:this.ef,text:this.if})}nn(){this.tf.hf("runtime","screen-reader-text",{type:"release",id:this.ef}),this.tf=null,this.if="",this.ef=-1}nf(t){this.if!==t&&(this.if=t,this.tf.hf("runtime","screen-reader-text",{type:"update",id:this.ef,text:this.if}))}}}{const rs=self.Ds;rs.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.rf=!1,this.lf=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.lf)throw new Error(`cannot stop async event '${this.type}' propagation`);this.rf=!0}}}{const os=self.Ds;os.Event.uf=class extends os.tn{constructor(t){super(),this.cf=t,this.ff=[],this.df=new Set,this.pf=[],this.mf=new Set,this.gf=0,this.yf=[]}nn(){0<this.gf||(os.Lr(this.ff),this.df.clear(),os.Lr(this.pf),this.mf.clear(),os.Lr(this.yf),os.nn(this))}wf(t,s){this.Sf()?this.yf.push({bf:"add",vf:t,capture:s}):s?this.df.has(t)||(this.ff.push(t),this.df.add(t)):this.mf.has(t)||(this.pf.push(t),this.mf.add(t))}Mf(t,s){this.Sf()?this.yf.push({bf:"remove",vf:t,capture:s}):s?this.df.has(t)&&(this.df.delete(t),os.Hr(this.ff,t)):this.mf.has(t)&&(this.mf.delete(t),os.Hr(this.pf,t))}xf(){return!this.ff.length&&!this.pf.length}Sf(){return 0<this.gf}Gf(){const t=new Set,s=new Set;for(const i of this.yf)if("add"===i.bf)this.wf(i.vf,i.capture),(i.capture?s:t).delete(i.vf);else{if("remove"!==i.bf)throw new Error("invalid op");(i.capture?(this.df.delete(i.vf),s):(this.mf.delete(i.vf),t)).add(i.vf)}os.zr(this.pf,t),os.zr(this.ff,s),os.Lr(this.yf)}Tf(i){this._f();let e=!1;for(let t=0,s=this.ff.length;t<s;++t)if(this.ff[t](i),i.rf){e=!0;break}if(!e)for(let t=0,s=this.pf.length;t<s&&(this.pf[t](i),!i.rf);++t);return this.If(),!i.defaultPrevented}Cf(i){this._f();for(let t=0,s=this.ff.length;t<s;++t)this.ff[t](i);for(let t=0,s=this.pf.length;t<s;++t)this.pf[t](i);return this.If(),!0}_f(){this.gf++}If(){this.gf--,0===this.gf&&0<this.yf.length&&this.Gf()}Ef(t){t?this._f():this.If()}Pf(i){let e=[];for(let s=0,t=this.ff.length;s<t;++s){let t=this.ff[s];e.push(os.Rf(()=>t(i)))}for(let s=0,t=this.pf.length;s<t;++s){let t=this.pf[s];e.push(os.Rf(()=>t(i)))}return Promise.all(e).then(()=>!i.defaultPrevented)}Af(i){const e=[];this._f();for(let t=0,s=this.ff.length;t<s;++t){const h=this.ff[t](i);h instanceof Promise&&e.push(h)}for(let t=0,s=this.pf.length;t<s;++t){const n=this.pf[t](i);n instanceof Promise&&e.push(n)}return this.If(),e.length?Promise.all(e).then(()=>!i.defaultPrevented):!i.defaultPrevented}async Ff(t){return this.Af(t)}async Df(i){this._f();for(let t=0,s=this.ff.length;t<s;++t){const e=this.ff[t](i);e instanceof Promise&&await e}for(let t=0,s=this.pf.length;t<s;++t){const h=this.pf[t](i);h instanceof Promise&&await h}return this.If(),!i.defaultPrevented}*Of(i){this._f();for(let t=0,s=this.ff.length;t<s;++t){const e=this.ff[t](i);os.No(e)&&(yield*e)}for(let t=0,s=this.pf.length;t<s;++t){const h=this.pf[t](i);os.No(h)&&(yield*h)}this.If()}}}{const as=self.Ds;as.Event.Lf=class extends as.tn{constructor(){super(),this.kf=new Map,this.Nf=!1}nn(){if(this.Nf)throw new Error("already released");this.Bf(),this.Nf=!0,as.nn(this)}rn(){return this.Nf}Bf(){if(this.kf){for(let t of this.kf.values())t.nn();this.kf.clear()}}Wf(t,s){let i=this.kf.get(t);return i||(s?(i=as.hn(as.Event.uf,t),this.kf.set(t,i),i):null)}jf(t){return this.kf.has(t)}addEventListener(t,s,i){let e=this.Wf(t,!0);e.wf(s,!!i)}removeEventListener(t,s,i){let e=this.Wf(t,!1);e&&(e.Mf(s,!!i),e.xf())&&this.kf.delete(t)}dispatchEvent(t){const s=this.Wf(t.type,!1);return!s||(t.cancelable?s.Tf(t):s.Cf(t))}Hf(t){const s=this.Wf(t.type,!1);return s?(t.lf=!0,s.Pf(t)):Promise.resolve(!0)}async Vf(t){const s=this.Wf(t.type,!1);if(!s)return!0;this.kf.delete(t.type),t.lf=!0;const i=await s.Pf(t);return s.nn(),i}async Uf(t){const s=this.Wf(t.type,!1);return!s||s.Ff(t)}zf(t){const s=this.Wf(t.type,!1);return!s||s.Af(t)}async Jf(t){const s=this.Wf(t.type,!1);return!s||s.Df(t)}qf(t){const s=this.Wf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.Of(t)}Ef(t){for(const s of this.kf.values())s.Ef(t)}}}{let n=function(t){c=l&&0===f?requestIdleCallback(s,{timeout:i}):setTimeout(s,0<f?1:t)},s=function(h){if(c=-1,u.length){let i=performance.now(),e=i,t=0,s;for(;r(u.shift()),e=performance.now(),++t,s=(e-i)/t*1.1,u.length&&(l&&0===f&&void 0!==h?s<h.timeRemaining():e-i+s<o););if(-1===c&&u.length){let t=e-i,s=Math.max(a-t,4);n(s)}}},r=function(s){let t;try{t=s.vf()}catch(t){return void s.reject(t)}s.resolve(t)},t=(n,s,r,self.Ds),o=12,a=16,i=35,l="undefined"!=typeof requestIdleCallback,u=[],c=-1,f=0,h=t.si.Zs("disable-asyncify");h&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),t.Rf=function(i){let e=null;return t.isDebug&&(e=t.re()),new Promise((t,s)=>{u.push({vf:i,resolve:t,reject:s,stack:e}),h?r(u.pop()):-1===c&&n(a)})},t.Rf.$f=function(t){if(t)++f;else if(--f<0)throw new Error("already turned off high throughput mode")}}{let t=function(){n=-1},s=function(){r=-1,o=-1;let i=Date.now();for(let s of a)if(s.Xf(i)){let t=s.Yf();(-1===o||t<o)&&(o=t)}else a.delete(s);if(-1!==o){let t=Math.max(o-i+h,e);r=self.setTimeout(s,t)}},i=(t,s,self.Ds),e=1e3,h=100,n=-1,r=(i.Zf=function(){return-1===n&&(n=Date.now(),self.setTimeout(t,16)),n},-1),o=-1,a=new Set;i.Kf=class{constructor(t,s){this.Qf=t,this.t0=1e3*s,this.s0=0,this.i0=!1}e0(){let t=i.Zf();this.s0=t+this.t0,this.i0||(a.add(this),this.i0=!0),-1===r?(o=this.s0,r=self.setTimeout(s,this.t0+h)):this.s0<o&&o>t+e&&(self.clearTimeout(r),o=this.s0,r=self.setTimeout(s,this.t0+h))}Xf(t){return!(t>=this.s0)||(this.Qf()?(this.s0=t+this.t0,!0):this.i0=!1)}Yf(){return this.s0}h0(){this.i0&&(a.delete(this),this.i0=!1,0===a.size)&&-1!==r&&(self.clearTimeout(r),r=-1,o=-1)}nn(){this.h0(),this.Qf=null}}}{const ls=self.Ds;ls.n0=class us{constructor(t){this.r0=!1,this.o0=t}a0(){this.r0||(this.r0=!0,this.o0&&(this.o0(),this.o0=null))}l0(){return this.r0}nn(){this.a0()}static nn(t){return new us(()=>t.nn())}static u0(s,i,e,h,t){if(null==h)h=!1;else if("boolean"!=typeof h&&"object"!=typeof h)throw new TypeError("invalid event listener options");if(t&&(e=e.bind(t)),i.includes(" ")){i=i.split(" ");const n=new ls.c0;for(let t of i)s.addEventListener(t,e,h),n.nc(ls.hn(ls.n0,()=>s.removeEventListener(t,e,h)));return n}return s.addEventListener(i,e,h),ls.hn(ls.n0,()=>s.removeEventListener(i,e,h))}},ls.f0=class extends ls.n0{d0(t){this.o0=t}},ls.c0=class extends ls.n0{constructor(...s){super(),this.p0=new Set;for(let t of s)this.nc(t)}nc(...s){if(this.r0)throw new Error("already disposed");for(let t of s)this.p0.add(t)}m0(t){if(this.r0)throw new Error("already disposed");this.p0.delete(t)}g0(){if(this.r0)throw new Error("already disposed");if(this.p0){for(let t of this.p0)t.a0();this.p0.clear()}}l0(){return this.r0}a0(){if(this.r0)throw new Error("already disposed");this.r0=!0;for(let t of this.p0)t.a0();this.p0.clear(),this.p0=null}nn(){this.a0()}}}{const cs=self.Ds;cs.y0=class extends cs.tn{constructor(){super(),this.w0=0,this.Ya=0,this.S0=0,this.b0=0}nc(t){this.Ya=(t=+t)-this.w0,this.S0=this.b0+this.Ya,this.w0=this.S0-this.b0-this.Ya,this.b0=this.S0}v0(t){this.b0-=+t}Ks(){return this.b0}e0(){this.w0=0,this.Ya=0,this.S0=0,this.b0=0}Set(t){this.w0=0,this.Ya=0,this.S0=0,this.b0=+t}M0(t){this.w0=t.w0,this.Ya=t.Ya,this.S0=t.S0,this.b0=t.b0}nn(){}}}{const fs=self.Ds,r={};r.x0=function(t){this.G0=t,this.right=this.G0.T0,this.left=this.G0.T0,this.parent=null,this.color=!1,this.key=null},r._0=function(t){this.size=0,this.T0=new r.x0(this),this.T0.color=!1,this.root=this.T0,this.root.parent=this.T0,this.compare=t||this.I0},r._0.prototype.I0=function(t,s){return t<s?-1:s<t?1:0},r._0.prototype.clone=function(){var t=new r._0(this.compare);return t.C0(this),t},r._0.prototype.clear=function(){this.size=0,this.T0=new r.x0(this),this.T0.color=!1,this.root=this.T0,this.root.parent=this.T0},r._0.prototype.E0=function(t){var s=t.right;t.right=s.left,s.left!=this.T0&&(s.left.parent=t),s.parent=t.parent,t.parent==this.T0?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,(s.left=t).parent=s},r._0.prototype.P0=function(t){var s=t.left;t.left=s.right,s.right!=this.T0&&(s.right.parent=t),s.parent=t.parent,t.parent==this.T0?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,(s.right=t).parent=s},r._0.prototype.R0=function(t){if(this.contains(t))this.A0(t).key=t;else{for(var s=new r.x0(this),i=(s.key=t,this.T0),e=this.root;e!=this.T0;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;(s.parent=i)==this.T0?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.T0,s.right=this.T0,s.color=!0,this.F0(s),this.size++}},r._0.prototype.F0=function(t){for(;t!=this.T0&&t!=this.root&&1==t.parent.color;){var s;t.parent==t.parent.parent.left?1==(s=t.parent.parent.right).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.E0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.T0&&this.P0(t.parent.parent)):1==(s=t.parent.parent.left).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.P0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.T0&&this.E0(t.parent.parent))}this.root.color=!1},r._0.prototype.D0=function(t){var s=t.left==this.T0||t.right==this.T0?t:this.O0(t),i=s.left!=this.T0?s.left:s.right;i.parent=s.parent,s.parent==this.T0?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.L0(i),this.size--},r._0.prototype.L0=function(t){for(;t!=this.root&&0==t.color;){var s;t=t==t.parent.left?(1==(s=t.parent.right).color&&(s.color=!1,t.parent.color=!0,this.E0(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=!0,t.parent):(0==s.right.color&&(s.left.color=!1,s.color=!0,this.P0(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.E0(t.parent),this.root)):(1==(s=t.parent.left).color&&(s.color=!1,t.parent.color=!0,this.P0(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=!0,t.parent):(0==s.left.color&&(s.right.color=!1,s.color=!0,this.E0(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.P0(t.parent),this.root))}t.color=!1},r._0.prototype.remove=function(t){var s;return(t=this.A0(t))!=this.T0?(s=t.key,this.D0(t),s):null},r._0.prototype.k0=function(t,s){this.remove(s)},r._0.prototype.min=function(t){for(;t.left!=this.T0;)t=t.left;return t},r._0.prototype.max=function(t){for(;t.right!=this.T0;)t=t.right;return t},r._0.prototype.O0=function(t){if(t.right!=this.T0)return this.min(t.right);for(var s=t.parent;s!=this.T0&&t==s.right;)s=(t=s).parent;return s},r._0.prototype.N0=function(t){if(t.left!=this.T0)return this.max(t.left);for(var s=t.parent;s!=this.T0&&t==s.left;)s=(t=s).parent;return s},r._0.prototype.B0=function(t){if(0<this.size){var s=this.A0(t);if(s==this.T0)return null;if(s.right!=this.T0)return this.min(s.right).key;for(var i=s.parent;i!=this.T0&&s==i.right;)i=(s=i).parent;return i!=this.T0?i.key:null}return null},r._0.prototype.W0=function(t){if(0<this.size){var s=this.A0(t);if(s==this.T0)return null;if(s.left!=this.T0)return this.max(s.left).key;for(var i=s.parent;i!=this.T0&&s==i.left;)i=(s=i).parent;return i!=this.T0?i.key:null}return null},r._0.prototype.j0=function(){return this.min(this.root).key},r._0.prototype.H0=function(){return this.max(this.root).key},r._0.prototype.A0=function(t){for(var s=this.root;s!=this.T0&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},r._0.prototype.contains=function(t){return null!=this.A0(t).key},r._0.prototype.getValues=function(){var s=[];return this.forEach(function(t){s.push(t)}),s},r._0.prototype.C0=function(t){if("array"==r.typeOf(t))for(var s=0;s<t.length;s++)this.R0(t[s]);else if("function"==r.typeOf(t.forEach))t.forEach(this.R0,this);else if("function"==r.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.R0(i[s]);else if("object"==r.typeOf(t))for(var e in t)this.R0(t[e])},r._0.prototype.V0=function(t){if("array"==r.typeOf(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==r.typeOf(t.forEach))t.forEach(this.k0,this);else if("function"==r.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.remove(i[s]);else if("object"==r.typeOf(t))for(var e in t)this.remove(t[e])},r._0.prototype.U0=function(t){if("array"==r.typeOf(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==r.typeOf(t.forEach))return t.every(this.contains,this);if("function"==r.typeOf(t.getValues)){for(var i=t.getValues(),s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==r.typeOf(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},r._0.prototype.range=function(t,s){var i=[];return this.z0(function(t){i.push(t)},t,s),i},r._0.prototype.J0=function(t,s){if(!this.q0())for(var i=this.min(this.root);i!=this.T0;){if(t.call(s,i.key,this))return;i=this.O0(i)}},r._0.prototype.$0=function(t,s,i){if(!this.q0())for(var e=this.A0(s);e!=this.T0;){if(t.call(i,e.key,this))return;e=this.O0(e)}},r._0.prototype.X0=function(t,s,i){if(!this.q0())for(var e=this.min(this.root),h=this.A0(s);e!=h;){if(t.call(i,e.key,this))return;e=this.O0(e)}},r._0.prototype.z0=function(t,s,i,e){if(!this.q0())for(var h=this.A0(s),n=this.A0(i);h!=n;){if(t.call(e,h.key,this))return;h=this.O0(h)}},r._0.prototype.Y0=function(t,s){if(!this.q0())for(var i=this.max(this.root);i!=this.T0;){if(t.call(s,i.key,this))return;i=this.N0(i)}},r._0.prototype.forEach=function(t,s){if(!this.q0())for(var i=this.min(this.root);i!=this.T0;i=this.O0(i))t.call(s,i.key,i.key,this)},r._0.prototype.some=function(t,s){if(!this.q0())for(var i=this.min(this.root);i!=this.T0;i=this.O0(i))if(t.call(s,i.key,i.key,this))return!0;return!1},r._0.prototype.every=function(t,s){if(this.q0())return!1;for(var i=this.min(this.root);i!=this.T0;i=this.O0(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},r._0.prototype.map=function(t,s){var i=[];if(!this.q0())for(var e=this.min(this.root);e!=this.T0;e=this.O0(e))i.push(t.call(s,e.key,e.key,this));return i},r._0.prototype.filter=function(t,s){var i=[];if(!this.q0())for(var e=this.min(this.root);e!=this.T0;e=this.O0(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},r._0.prototype.getCount=function(){return this.size},r._0.prototype.q0=function(){return 0==this.size},r._0.prototype.isSubsetOf=function(t){var s=r.getCount(t);if(this.getCount()>s)return!1;var i=0;if(this.q0())return!0;for(var e=this.min(this.root);e!=this.T0;e=this.O0(e))r.contains.call(t,t,e.key)&&i++;return i==this.getCount()},r._0.prototype.intersection=function(t){var s=new r._0(this.compare);if(!this.q0())for(var i=this.min(this.root);i!=this.T0;i=this.O0(i))t.contains.call(t,i.key,i.key,this)&&s.R0(i.key);return s},fs._0=class extends fs.tn{constructor(t){super(),this.Z0=new r._0(t),this.K0=!1,this.Q0=new Set,this.t1=new Set}nc(t){this.K0?this.Z0.contains(t)?this.t1.delete(t):this.Q0.add(t):this.Z0.R0(t)}m0(t){this.K0?this.Z0.contains(t)?this.t1.add(t):this.Q0.delete(t):this.Z0.remove(t)}Zs(t){return this.K0?!!this.Q0.has(t)||!this.t1.has(t)&&this.Z0.contains(t):this.Z0.contains(t)}Xu(){this.Z0.clear(),this.Q0.clear(),this.t1.clear()}toArray(){if(this.K0)throw new Error("cannot be used in queueing mode");return this.Z0.getValues()}Qu(){return this.Z0.getCount()+this.Q0.size-this.t1.size}Yu(){return 0===this.Qu()}s1(){if(this.Yu())throw new Error("empty set");if(this.K0)throw new Error("cannot be used in queueing mode");const t=this.Z0,s=t.min(t.root);return s.key}i1(){if(this.Yu())throw new Error("empty set");if(this.K0)throw new Error("cannot be used in queueing mode");const t=this.s1();return this.m0(t),t}e1(t){if(this.K0!==(t=!!t)&&!(this.K0=t)){for(const s of this.t1)this.Z0.remove(s);this.t1.clear();for(const i of this.Q0)this.Z0.R0(i);this.Q0.clear()}}h1(t){this.Z0.forEach(t)}*values(){if(!this.Yu()){const s=this.Z0;for(let t=s.min(s.root);t!=s.T0;t=s.O0(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const ds=self.Ds;ds.n1=class{constructor(t=ds.hardwareConcurrency){this.o1=t,this.a1=[],this.l1=0}nc(i){return new Promise((t,s)=>{this.a1.push({vf:i,resolve:t,reject:s}),this.u1()})}c1(i){for(let t=0,s=this.a1.length;t<s;++t)if(this.a1[t].vf===i)return t;return-1}f1(t,s){const i=this.c1(t);if(-1===i)throw new Error("cannot find promise to resolve");this.a1[i].resolve(s),this.a1.splice(i,1)}d1(t,s){const i=this.c1(t);if(-1===i)throw new Error("cannot find promise to reject");this.a1[i].reject(s),this.a1.splice(i,1)}async u1(){if(this.a1.length&&!(this.l1>=this.o1)){this.l1++;const s=this.a1.shift();try{const t=await s.vf();s.resolve(t)}catch(t){s.reject(t)}this.l1--,this.u1()}}static async m1(t,s){let i=[],e=!1,h=[];for(;t--;)h.push((async()=>{let t;for(;t=s.pop();){if(e)return;try{i.push(await t())}catch(t){throw e=!0,t}}})());return await Promise.all(h),i}}}{const ps=self.Ds;ps.g1=class{constructor(t,s,i){this.Qf=t,this.w1=s,this.S1=i||2*s,this.b1=-1,this.v1=-1/0,this.M1=()=>this.G1(),this.T1=!1,this._1=!1,this.I1=null}C1(t){this._1=!!t}E1(){return void 0!==ps.Battery&&ps.Battery.IsOnBatteryPower()?this.S1:this.w1}P1(...e){if(-1===this.b1){this.I1=e;let t=ps.Zf(),s=t-this.v1,i=this.E1();i<=s&&this._1?(this.v1=t,this.R1()):this.b1=self.setTimeout(this.M1,Math.max(i-s,4))}}R1(){this.T1=!0;const t=this.I1;this.I1=null,t?this.Qf(...t):this.Qf(),this.T1=!1}e0(){this.T1||(this.A1(),this.I1=null,this.v1=ps.Zf())}G1(){this.b1=-1,this.v1=ps.Zf(),this.R1()}A1(){-1!==this.b1&&(self.clearTimeout(this.b1),this.b1=-1)}nn(){this.A1(),this.Qf=null,this.I1=null,this.M1=null}}}{const ms=self.Ds;ms.F1=class{constructor(){this.D1=new Map,this.O1=!1,this.L1=null,this.N1=null,this.B1=null,this.W1=null}j1(t){this.O1=!!t}H1(){return this.O1}V1(t){this.L1=t}U1(t){if(this.L1)return this.L1(t);throw new Error("no get base size callback set")}z1(t){this.N1=t}J1(t,s,i,e,h,n){if(this.N1)return this.N1(t,s,i,e,h,n);throw new Error("no raster at size callback set")}q1(t){this.B1=t}X1(t){if(!this.B1)throw new Error("no release result callback set");this.B1(t)}Y1(t){this.W1=t}Z1(){if(!this.W1)throw new Error("no redraw callback set");this.W1()}K1(t){let s=this.D1.get(t);return s||(s=ms.hn(ms.Q1,this,t),this.D1.set(t,s)),s.td(),s}sd(t){this.D1.delete(t.ed())}hd(){for(const t of this.D1.values())t.nd(),t.rd()}}}{const gs=self.Ds;gs.Q1=class{constructor(t,s){this.od=t,this.ad=s,this.ld=0,this.ud=0,this.fd=0,this.dd=this.od.U1(s).then(t=>{this.od&&(this.ud=t[0],this.fd=t[1],this.od.Z1())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.pd=!0,this.od&&this.od.Z1()}),this.md=0,this.gd=0,this.yd=0,this.wd=0,this.Sd=!1,this.bd=null,this.vd=!1,this.pd=!1}nn(){if(this.ld<=0)throw new Error("already released");this.ld--,0===this.ld&&this.Md()}nd(){this.bd&&(this.od.X1(this.bd),this.bd=null)}Md(){this.nd(),this.od.sd(this),this.od=null}ed(){return this.ad}td(){this.ld++}xd(){return 0<this.ld}Gd(){return this.bd}rd(){this.vd=!0}async Td(e,h,n){if(0!==h&&0!==n&&!this.pd&&!this.Sd){let t=gs.Dn(Math.ceil(h)),s=gs.Dn(Math.ceil(n)),i=Math.max(t,s);if(4096<i){const r=4096/i;h*=r,n*=r,t=Math.min(Math.ceil(t*r),4096),s=Math.min(Math.ceil(s*r),4096)}if(h<t&&n<s){const o=h/n,a=t/s;n=o<a?(h=s*o,s):(h=t)/o}if(this.od.H1()&&(t=Math.ceil(h),s=Math.ceil(n)),!(t<=this.md&&s<=this.gd)||this.vd){this.Sd=!0,this.md=t,this.gd=s;const l=await this.od.J1(this.ad,e,this.md,this.gd,h,n);this.od&&(this.nd(),this.bd=l,this.yd=h,this.wd=n,this.Sd=!1,this.vd=!1,this.od.Z1())}}}_d(){return this.dd}Id(){return this.ud}Cd(){return this.fd}Ed(){return this.yd}Pd(){return this.wd}Rd(){return this.pd}}}{let s=function(t){return bs.get(t)};s;const c=self.Ds,ys=(c.Ad="\ufeff",new Set("0123456789")),ws=(c.Fd=function(t){return ys.has(t)},new Set(" \t\n\r            ​\u2028\u2029  　"));c.Dd=function(t){return ws.has(t)},c.Od=function(t){return[...t].filter(t=>!c.Dd(t)).join("")},c.Ld=function(t){for(const s of t)if(!c.Dd(s))return!1;return!0},c.kd=function(t){for(const s of t)if(!c.Dd(s))return!1;return!0},c.Nd=function(t){return 1===t.length&&t.charCodeAt(0)<32},c.Bd=function(t){return[...t].filter(t=>!c.Nd(t)).join("")};let i=null;try{i=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}c.Wd=function(t){return!c.Dd(t)&&i&&i.test(t)};const Ss=new Set("0123456789.+-e"),bs=(c.jd=function(s){if(!(s=s.trim()).length)return!1;let t=s.charAt(0);if("-"!==t&&!ys.has(t))return!1;for(let t of s)if(!Ss.has(t))return!1;return!0},c.Hd=function(s){let i=s.length;for(;0<i;){let t=s.charAt(i-1);if(!c.Fd(t))break;--i}return s.substr(0,i)},c.Vd=function(t){let s=c.Hd(t),i=t.substr(s.length);return s+(i?(parseInt(i,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),vs=/[&<>"']/g,Ms=(c.Ud=function(t){return t.replace(vs,s)},c.zd=function(t){let s=c.Jd(t,"\\","\\\\");return s=c.Jd(s,'"','\\"'),s=c.Jd(s,"\t","\\t"),s=c.Jd(s,"\r",""),c.Jd(s,"\n","\\n")},c.qd=function(t){let s=c.Jd(t,"&","&amp;");return s=c.Jd(s,"<","&lt;"),s=c.Jd(s,">","&gt;"),c.Jd(s,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),xs=(c.ne=function(t){return t.replace(Ms,"\\$&")},c.$d=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},c.Xd=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());let e=s.length,h=0,n,r=[];for(;-1<(n=t.indexOf(s,h));)r.push(n),h=n+e;return r},c.Jd=function(t,s,i){return t.replaceAll(s,()=>i)},c.Yd=function(t,s,i){return t.replace(new RegExp(c.ne(s),"gi"),()=>i)},c.Zd=function(t,s){"string"==typeof s?t.textContent=s:s.Kd()?t.textContent=s.toString():(t.innerHTML=s.Qd(),s instanceof c.Th&&s.tp(t))},c.sp=function(t,s){return t instanceof c.HtmlString||t instanceof c.Th?t.equals(s):s instanceof c.HtmlString||s instanceof c.Th?s.equals(t):t===s},c.ip=function(i,...e){let h=i;for(let t=0,s=e.length;t<s;++t){const n=`{${t}}`;if(!i.includes(n))throw new Error(`missing placeholder '${n}' in string substitution`);h=h.replace(n,e[t].toString())}return h},c.ep=function(i,...e){let h=i,n=-1,r=-1;for(let t=0,s=e.length;t<s;++t){const o=`{${t}}`;i.includes(o)?(r=t,h=h.replace(o,e[t].toString())):-1===n&&(n=t)}if(0<=n&&0<=r&&n<r)throw new Error(`missing placeholder '${n}' in string substitution`);return h},c.hp=function(t,i){let e=t;for(let[t,s]of Object.entries(i))e=e.replaceAll(t,s.toString());return e},c.np=function(t,s){return s<t?1:t<s?-1:0},c.rp=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return e<i?1:i<e?-1:0},new self.Intl.Segmenter),Gs=(c.op=function(t){const s=[];for(const i of xs.segment(t))s.push(i.segment);return s},c.lp=function*(t){for(const s of xs.segment(t))yield s.segment},c.up=function(t){let s=0;for(const i of xs.segment(t))++s;return s},1073741824),Ts=1024*Gs,_s={cp:!(c.fp=function(s,t){let i="common."+(t?"dataRates":"dataSizes")+".",e=self.langSub;if(s<1024)return e(i+"bytes",s);if(s<1048576){let t=s/1024;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"kilobytes",t)}if(s<Gs){let t=s/1048576;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"megabytes",t)}if(s<Ts){let t=s/Gs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"gigabytes",t)}{let t=s/Ts;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"terabytes",t)}}),pp:!0,mp:!0,gp:!0,yp:!0};c.wp=function(t,s){s=Object.assign({},_s,s),c.Lang.PushContext("common.time");const i=[],e=self.lang,h=self.langPluralSub;if(s.pp){const r=Math.floor(t/86400);0<r&&(t-=24*r*3600,i.push(h(".days",null,r)))}if(s.mp){const o=Math.floor(t/3600);(0<o||i.length)&&(t-=3600*o,i.push(h(".hours",null,o)))}if(s.gp){const a=Math.floor(t/60);(0<a||i.length||!s.yp)&&(t-=60*a,i.push(h(".minutes",null,a)))}if(s.yp){const l=Math.floor(t%60);i.push(h(".seconds",null,l))}const n=(s.cp?e(".approx-prefix"):"")+i.join(e(".separator"));return c.Lang.PopContext(),n},c.Sp=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),h=s-e.length;for(let t=0;t<h;++t)i+="0";return i+e},c.bp=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},c.vp=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());c.Br(i,4,"0"),c.Br(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const h=i[t]-e[t];if(0!=h)return h<0?-1:1}return 0},c.Mp=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random()),i="x"===t?s:3&s|8;return i.toString(16)})},c.xp=function(i,e){if(i.length!==e.length)throw new Error("strings must be same length");let h=0;for(let t=0,s=i.length;t<s;++t)i.charAt(t)!==e.charAt(t)&&++h;return h},c.Gp=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,h,n,r,o;for(s.length<t.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(n=e,h=1;h<=t.length;h++)r=s[e-1]===t[h-1]?o[h-1]:Math.min(o[h-1]+1,Math.min(n+1,o[h]+1)),o[h-1]=n,n=r;o[t.length]=n}return o[t.length]}}{let s=function(t,i,e){const h=o.get(e);if(!h)return"class"===e?i?"</span>":`<span class="bbclass${u++}">`:t;if("string"==typeof h){if("a"===h&&0===a.length||"abbr"===h&&0===l.length)return t;if("a"!==h||i){if("abbr"!==h||i)return"<"+i+h+">";{const n=parseInt(e.substring(3),10)-1;if(n<0||n>=l.length)throw new Error("invalid bbcode tip substitution");let t=l[n],s="";if("string"==typeof t?s=t:"function"==typeof t&&(s=t()),"string"!=typeof s)throw new TypeError("invalid bbcode tip");return`<abbr title="${f.Jd(s,'"',"&quot;")}">`}}{const s=parseInt(e.substring(1),10)-1;if(s<0||s>=a.length)throw new Error("invalid bbcode link substitution");const r=a[s];if("string"==typeof r)return`<a href="${a[s]}">`;if("function"==typeof r)return`<a class="bblink${s}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(h)){let t=h[0],s=h[1];return i?"</"+t+">":`<${t} class="${s}">`}},f=(s,self.Ds),o=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),d=new Set(["icon"]),i=/\[(\/?)([a-zA-Z0-9]+)\]/g,p=/\[(\/?)([^\[\n]*?)\]/g,a=null,l=null,u=0,e=/\n/g;f.Th=class{constructor(t,s){if(this.Tp=s&&s._p?t:f.Ud(t),this.Ip="",this.Cp=!1,this.Ep=[],this.Pp=[],s){if(this.Cp=!!s.convertLineBreaks,s.links){if(9<s.links.length)throw new Error("too many links");this.Ep=s.links}if(s.tips){if(9<s.tips.length)throw new Error("too many tips");this.Pp=s.tips}}this.Rp=this.Tp.includes("["),this.Ap=this.Cp&&this.Tp.includes("\n"),this.Fp=!this.Rp&&!this.Ap&&!this.Tp.includes("&"),this.Dp=!1,this.Op=[]}toString(){return this.Tp}valueOf(){return this.Tp}Kd(){return this.Fp}Lp(){return this.Rp?this.Tp.replace(i,""):this.Tp}Qd(){if(this.Fp)return this.Tp;if(!this.Ip&&this.Tp){let t=this.Tp;this.Rp&&(u=0,a=this.Ep,l=this.Pp,t=t.replace(i,s),a=null,l=null),this.Ap&&(t=t.replace(e,"<br>")),this.Ip=t}return this.Ip}tp(i){if(this.Ep.length)for(let t=0,s=this.Ep.length;t<s;++t){const e=this.Ep[t];if("function"==typeof e){const h=i.querySelector(".bblink"+t);if(!h)throw new Error("unable to attach BBString link handler");h.onclick=e}}}equals(t){return t instanceof f.HtmlString?this.Qd()===t.Qd():t instanceof f.Th?this.Tp===t.Tp:this.Tp===t}kp(){if(!this.Dp){let e=[],t=this.Tp,h=[],s=p.lastIndex=0,i;for(;null!==(i=p.exec(t));){const n=i.index;if(!(0<n&&"\\"===t.charAt(n-1))){const r=i[0],o=i[1],a=i[2],l=t.substring(s,n);if(s=n+r.length,l&&e.push({text:l,Np:h.slice(0)}),a)if(o){const u=a.toLowerCase();for(let t=h.length-1;0<=t;--t)if(h[t].tag===u){h.splice(t,1);break}}else{let t=a,s=null,i=a.indexOf("=");if(-1!==i?(t=a.substring(0,i).toLowerCase(),s=a.substring(i+1)):t=t.toLowerCase(),d.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);e.push({icon:s,Np:h.slice(0)})}else h.push({tag:t,Bp:s})}}}s<t.length&&e.push({text:t.substring(s),Np:h.slice(0)});for(const c of e)c.text&&(c.text=this.Wp(c.text));this.Op=e.map(t=>t.icon?f.hn(f.jp,{icon:t.icon,Np:t.Np}):f.hn(f.Hp,{Vp:f.op(t.text),Np:t.Np})),this.Dp=!0}return this.Op}Wp(t){return t=f.Jd(t,"\\[","["),f.Jd(t,"\\\\","\\")}static Up(t){return f.hn(f.Th,t,{_p:!0}).Lp()}static zp(t){return t.replace(p,"")}}}{let l=function(t){return" "!==t&&" "!==t&&w.Dd(t)},a=function(t){return Is.has(t)},u=function(t){return w.Wd(t)&&!a(t)},c=function(t){for(;0<t.length&&l(t.at(-1));)t.pop()},y=function(t){return"\n"===t||"\r\n"===t};l,a,u,c,y;const w=self.Ds,Is=new Set("〈《「『【〔〖〘〚〝");w.Jp=class{constructor(){this.qp=[],this.$p=null}Xp(){return this.qp}Yp(){return this.qp.length}Zp(t){this.$p=t}Kp(t,s){let i=0,e=0,h=0,n=0,r=0;for(const o of t){if(-1===o.Qp()){const a=s(o);o.tm(a.height),o.im(a.fontBoundingBoxAscent||0),o.hm(a.fontBoundingBoxDescent||0),o.nm(a.rm||0),o.om()?o.am(a.width):o.lm()&&o.um(this.$p)}i+=o.Qp(),e=Math.max(e,o.fm()),h=Math.max(h,o.dm()),n=Math.max(n,o.pm()),r=Math.max(r,o.gm())}return{width:i,height:e,fontBoundingBoxAscent:h,fontBoundingBoxDescent:n,rm:r}}ym(t,s,i,e,h,n){this.qp.push(w.hn(w.Jp.wm,{Sm:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:h,rm:n}))}Jp(s,n,r,i,o){if("string"==typeof s&&(s=[w.hn(w.Hp,{Vp:w.op(s)})]),w.Lr(this.qp),!(!s.length||1===s.length&&s[0].om()&&s[0].Yu()||r<2)){if(1===s.length){const a=s[0];if(a.om()&&a.vm()<=100&&!a.Mm()){let{width:t,height:s,fontBoundingBoxAscent:i,fontBoundingBoxDescent:e,rm:h}=n(a);if(t+=o,a.am(t),a.tm(s),a.im(i||0),a.hm(e||0),a.nm(h||0),t<=r)return void this.ym([a],t,s,i,e,h)}}let t;t="word"===i?this.xm(s):"cjk"===i?this.Gm(s):this.Tm(s),this._m(t,n,r,o)}}xm(t){let s=[],i=[],e=!1;for(const h of t){const n=h.Im();if(h.lm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const r of h.Cm())if(y(r))0<i.length&&s.push(i),s.push([w.hn(w.Hp,{Vp:["\n"],Np:n})]),i=[];else if(0===i.length)i.push(w.hn(w.Hp,{Vp:[r],Np:n})),e=l(r);else{const o=l(r);if(o===e){const a=i.at(-1);a.Im()===n?a.Em(r):i.push(w.hn(w.Hp,{Vp:[r],Np:n}))}else s.push(i),i=[w.hn(w.Hp,{Vp:[r],Np:n})],e=o}}return 0<i.length&&s.push(i),s}Gm(t){let s=[],i=[],e=!1;for(const h of t){const n=h.Im();if(h.lm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const r of h.Cm())if(y(r))0<i.length&&s.push(i),s.push([w.hn(w.Hp,{Vp:["\n"],Np:n})]),i=[];else{if(0===i.length)i.push(w.hn(w.Hp,{Vp:[r],Np:n}));else if(e||u(r)){const o=i.at(-1);o.Im()===n?o.Em(r):i.push(w.hn(w.Hp,{Vp:[r],Np:n}))}else s.push(i),i=[w.hn(w.Hp,{Vp:[r],Np:n})];e=a(r)}}return 0<i.length&&s.push(i),s}Tm(t){const s=[];for(const i of t)if(i.om()){const e=i.Cm();w.zh(s,e.map(t=>[w.hn(w.Hp,{Vp:[t],Np:i.Im()})]))}else s.push([i]);return s}Pm(t){return t.map(t=>t.Rm())}Am(s,i){let t=s.length?s.at(-1):null,e=0;t&&t.om()&&i[0].om()&&i[0].Im()===t.Im()&&(t.Fm(i[0].Cm()),e=1);for(let t=i.length;e<t;++e){const h=i[e];s.push(h.Rm())}}_m(t,s,i,e){let h=[],n=0,r=0,o=0,a=0,l=0;for(const u of t)if(1===u.length&&u[0].om()&&1===u[0].vm()&&y(u[0].Cm()[0])){if(0===r){const c=w.hn(w.Hp,{Vp:[" "],Np:u[0].Im()}),f=s(c);r=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,l=f.rm||0}this.ym(h,n,r,o,a,l),h=[],n=0,r=0,o=0,a=0,l=0}else{const d=this.Pm(h),p=(this.Am(d,u),this.Kp(d,s)),m=p.width;if(i<=m)if(0<h.length&&this.ym(h,n,r,o,a,l),h=[],u[0].om()&&w.kd(u[0].Cm()))n=0,r=0,o=0,a=0,l=0;else{this.Am(h,u);const g=this.Kp(h,s);n=g.width,r=g.height,o=g.fontBoundingBoxAscent,a=g.fontBoundingBoxDescent,l=g.rm}else h=d,n=m,r=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,l=p.rm}0<h.length&&this.ym(h,n,r,o,a,l),this.Dm(s,e)}Dm(s,i){for(const e of this.qp){const h=e.Om();if(h.length){let t=h.at(-1);if(t.om()){const n=t.Cm(),r=n.slice(0);if(c(r),0===r.length)e.Lm(-t.Qp()),h.pop();else if(r.length<n.length){t.km(r);const o=s(t).width,a=t.Qp()-o;t.am(o),e.Lm(-a)}0!==i&&0<h.length&&((t=h.at(-1)).Lm(i),e.Lm(i))}}}}Xu(){w.Lr(this.qp)}Nm(){return this.qp.reduce((t,s)=>Math.max(t,s.Qp()),0)}Bm(){return this.qp.reduce((t,s)=>t+s.fm(),0)}}}{const Cs=self.Ds;Cs.Jp.wm=class{constructor(t){this.Op=t.Sm||[],this.Wm=t.width||-1,this.jm=t.height||-1,this.Hm=t.fontBoundingBoxAscent||-1,this.Vm=t.fontBoundingBoxDescent||-1,this.Um=t.rm||-1,this.zm=0,this.Jm=0}Sm(){return this.Op.values()}*qm(){const s=this.Op;for(let t=s.length-1;0<=t;--t)yield s[t]}Om(){return this.Op}Lm(t){this.Wm+=t}Qp(){return this.Wm}fm(){return this.jm}$m(){return this.Hm}pm(){return this.Vm}gm(){return this.Um}Xm(t){this.zm=t}Ym(){return this.zm}Zm(t){this.Jm=t}Km(){return this.Jm}}}{const Es=self.Ds;Es.Qm=class{constructor(t){this.tg=t.Np||[],this.Wm=t.width||-1,this.jm=t.height||-1,this.Hm=t.fontBoundingBoxAscent||-1,this.Vm=t.fontBoundingBoxDescent||-1,this.Um=t.rm||-1,this.zm=0,this.Jm=0}om(){return!1}lm(){return!1}Im(){return this.tg}sg(s){const i=this.tg;for(let t=i.length-1;0<=t;--t){const e=i[t];if(e.tag===s)return e}return null}ig(t){return!!this.sg(t)}eg(){const t=new Map;for(const s of this.tg)t.set(s.tag,s.Bp);return t}Lm(t){this.Wm+=t}am(t){this.Wm=t}Qp(){return this.Wm}tm(t){this.jm=t}fm(){return this.jm}im(t){this.Hm=t}dm(){return this.Hm}hm(t){this.Vm=t}pm(){return this.Vm}nm(t){this.Um=t}gm(){return this.Um}Xm(t){this.zm=t}Ym(){return this.zm}Zm(t){this.Jm=t}Km(){return this.Jm}}}{const Ps=self.Ds;Ps.Hp=class extends Ps.Qm{constructor(t){super(t),this.hg=t.Vp}om(){return!0}Fm(t){Ps.zh(this.hg,t),this.Wm=-1,this.jm=-1,this.Hm=-1,this.Vm=-1,this.Um=-1}Em(t){this.hg.push(t)}Rm(){return Ps.hn(Ps.Hp,{Vp:this.hg.slice(0),Np:this.tg,width:this.Wm,height:this.jm,fontBoundingBoxAscent:this.Hm,fontBoundingBoxDescent:this.Vm,rm:this.Um})}Cm(){return this.hg}km(t){this.hg=t}vm(){return this.hg.length}Yu(){return 0===this.hg.length}Mm(){return this.hg.includes("\n")}}}{const Rs=self.Ds;Rs.jp=class extends Rs.Qm{constructor(t){super(t),this.ng=t.icon}lm(){return!0}rg(){return this.ng}Rm(){return Rs.hn(Rs.jp,{icon:this.ng,Np:this.tg,width:this.Wm,height:this.jm,fontBoundingBoxAscent:this.Hm,fontBoundingBoxDescent:this.Vm,rm:this.Um})}og(t){if(!t)return null;let s=Number(this.ng);return String(s)===this.ng?(s=Math.floor(s),t.ag(s)):t.lg(this.ng)}um(t){const s=this.og(t);this.Wm=s?this.jm*s.Qp()/s.fm():0}ug(t){const s=this.og(t);return s?s.ug():null}vm(){return 1}}}{const As=self.Ds;As.fg=class{constructor(t){this.dg=new Map,this.pg=t.mg,this.gg=t.yg}nn(){for(const t of this.dg.values())t.nn();this.dg.clear()}wg(t){let s=this.dg.get(t);if(!s){const i=this.pg(t);s=As.hn(As.Sg,this,{source:t,bg:i}),this.dg.set(t,s)}return s}vg(t){return this.dg.has(t)}Mg(t){const s=this.dg.get(t);s&&s.nn(),this.dg.delete(t)}async xg(t){return this.gg(t)}}}{const Fs=self.Ds;Fs.Sg=class{constructor(t,s){this.Gg=t,this.Tg=s.source,this._g=[],this.Ig=new Map,this.Cg=!1,this.Eg=!1,this.Pg=null;const i=s.bg.Rg;for(let t=0,s=i.length;t<s;++t){const e=i[t],h=Fs.hn(Fs.Ag,this,{index:t,tag:e.tag,source:e.source,width:e.width,height:e.height});this._g.push(h),e.tag&&this.Ig.set(e.tag.toLowerCase(),h)}}nn(){for(const t of this._g)t.nn();Fs.Lr(this._g),this.Ig.clear(),this.Gg=null,this.Tg=null}Fg(){return this.Cg}Dg(){return this.Eg}Og(){return this.Pg||(this.Pg=this.Lg()),this.Pg}async Lg(){if(!this.Cg){this.Cg=!0,this.Eg=!0;const t=await this.Gg.xg(this.Tg);if(this.Gg){const i=t.Rg;for(let t=0,s=Math.min(i.length,this._g.length);t<s;++t){const e=i[t].kg;this._g[t].Ng(e)}this.Eg=!1}}}ag(t){return(t=Math.floor(t))<0||t>=this._g.length?null:this._g[t]}lg(t){return this.Ig.get(t.toLowerCase())||null}}}{const Ds=self.Ds;Ds.Ag=class{constructor(t,s){this.Bg=t,this.Tg=s.source||null,this.Wg=s.index,this.jg=s.tag,this.Wm=s.width,this.jm=s.height,this.Hg=null}nn(){this.Wm=0,this.jm=0,this.Bg=null}Vg(){return this.Tg}Qp(){return this.Wm}fm(){return this.jm}Ng(t){this.Hg=t}ug(){return this.Hg}}}{let e=function(t,s,i,e){const h=Bs;Gh.N(ks,i,s),Gh.N(Ns,t,s),Gh.At(h,ks,Ns),Gh.normalize(h,h),e.set(h[0],h[1],h[2],Gh.Rt(t,h))},r=function(t,s,i,e,h,n,r){const o=r.x,a=r.y,l=r.z,u=r.w,c=r.Ug,f=r.zg,d=r.Jg,p=1-c,m=1-f,g=1-d,y=o*t*c+o*e*p+a*s*f+a*h*m+l*i*d+l*n*g;if(u<=y)return!0;const w=o*e*c+o*t*p+a*h*f+a*s*m+l*n*d+l*i*g;return u<w},h=function(t,s,i,e){const h=e.x,n=e.y,r=e.z,o=e.w,a=h*t+n*s+r*i;return o<=a};e,r,h;const Os=self.Ds,Ls=self.ys,Gh=Ls.Ts,Hh=Ls._s,xh=Ls.vs,ks=Gh.create(),Ns=Gh.create(),Bs=Gh.create(),Ws=Hh.create(),js=xh.create(),Hs=Gh.create(),Vs=Gh.create(),Us=Gh.create(),zs=Gh.create(),Js=Gh.create(),qs=Gh.create(),$s=Gh.create(),Xs=Gh.create(),Ys=Hh._(0,0,1,1);Os.qg={$g(t,s,i,e,h,n,r){let o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15],c=h[0]*o+h[4]*a+h[8]*l+h[12]*u,f=h[1]*o+h[5]*a+h[9]*l+h[13]*u,d=h[2]*o+h[6]*a+h[10]*l+h[14]*u,p=h[3]*o+h[7]*a+h[11]*l+h[15]*u;return 0!=p&&(f*=p=1/p,d*=p,r[0]=(.5*(c*=p)+.5)*n[2]+n[0],r[1]=(.5*f+.5)*n[3]+n[1],r[2]=.5*(1+d),!0)},Xg(t,s,i,e,h,n,r){const o=js,a=Ws;return xh.multiply(o,h,e),null!==xh.C(o,o)&&(a[0]=(t-n[0])/n[2]*2-1,a[1]=(s-n[1])/n[3]*2-1,a[2]=2*i-1,a[3]=1,Hh.kt(a,a,o),0!==a[3])&&(a[3]=1/a[3],r[0]=a[0]*a[3],r[1]=a[1]*a[3],r[2]=a[2]*a[3],!0)},Yg(t,s,i,e,h,n,r){const o=ks,a=Ns;if(!Os.qg.Xg(t,s,0,e,h,n,o))return!1;if(!Os.qg.Xg(t,s,1,e,h,n,a))return!1;let l=Ns,u=(Gh.N(l,a,o),Bs),c=(Gh.set(u,0,0,1),-i),f=Gh.Rt(u,l),d=0;if(0===f){const p=Gh.Rt(u,o)+c;if(0!==p)return!1}else if((d=-(Gh.Rt(o,u)+c)/f)<0)return!1;return Gh._t(r,o,l,d),!0}};class Zs{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Ug=NaN,this.zg=NaN,this.Jg=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.Ug=0<t?1:0,this.zg=0<s?1:0,this.Jg=0<i?1:0}}Os.qg.Zg=class{constructor(){this.Kg=new Zs,this.Qg=new Zs,this.ty=new Zs,this.iy=new Zs,this.ey=new Zs,this.hy=new Zs}ny(t,s){const i=Ys;Os.qg.Xg(0,1,0,t,s,i,Hs),Os.qg.Xg(1,1,0,t,s,i,Vs),Os.qg.Xg(0,0,0,t,s,i,Us),Os.qg.Xg(1,0,0,t,s,i,zs),Os.qg.Xg(0,1,1,t,s,i,Js),Os.qg.Xg(1,1,1,t,s,i,qs),Os.qg.Xg(0,0,1,t,s,i,$s),Os.qg.Xg(1,0,1,t,s,i,Xs),e(Us,Hs,Js,this.Kg),e(Hs,Vs,qs,this.Qg),e(Vs,zs,Xs,this.ty),e(zs,Us,$s,this.iy),e($s,Js,qs,this.hy),e(zs,Vs,Hs,this.ey)}oy(t,s,i,e,h,n){return r(t,s,i,e,h,n,this.Kg)&&r(t,s,i,e,h,n,this.Qg)&&r(t,s,i,e,h,n,this.ty)&&r(t,s,i,e,h,n,this.iy)&&r(t,s,i,e,h,n,this.ey)&&r(t,s,i,e,h,n,this.hy)}ly(t,s,i){return!h(t,s,i,this.ey)}}}{const Ks=self.Ds,Qs=self.ys,Gh=Qs.Ts,Hh=Qs._s,xh=Qs.vs,ti=xh.create(),si=Gh._(0,0,0),ii=Gh._(0,0,0),ei=Gh._(0,0,0),hi=Gh._(0,1,0),ni=(Hh._(0,0,0,0),new Ks.$l),ri=new Ks.Rect,oi=new Ks.$l(0,0,1,0,1,1,0,1),ai={uy:1,my:1e4},li=xh._(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Ks.qg.gy=class{constructor(t){t=Object.assign({},ai,t),this.Wm=0,this.jm=0,this.yy=Ks.pn(45),this.wy=Math.tan(this.yy/2),this.Sy=xh.create(),this.by=xh.create(),this.vy=!1,this.My=t.uy,this.xy=t.my,this.Gy=[],this.Ty=new Map,this._y=null,this.Iy=null,this.Cy=null,this.Ey=null,this.Py=null,this.Ry=null,this.Ay=null,this.Fy=null,this.Dy=null,this.Oy=null,this.Ly=null,this.ky=null,this.Ny=new Map,this.By=null,this.Wy=[],this.jy=new Map,this.Hy=0,this.Vy=0,this.Uy=1,this.zy=[this.Uy],this.Jy=1,this.qy=[this.Jy],this.$y=.5,this.Xy=[this.$y],this.Yy=0,this.Zy=!0,this.Ky=!1}Qy(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}iw(){this.Hy=0,this.Vy=0,this._y=null,this.Iy=null,this.Cy=null,this.Ey=null,this.Py=null,this.Ry=null,this.Ay=null,this.Fy=null,this.Dy=null,this.Oy=null,this.Ly=null,this.ky=null,this.ew()}hw(){this.iw(),this.By=null}rw(){for(const t of this.Gy)t.nn();this.iw()}Qp(){return this.Wm}fm(){return this.jm}ow(t){return this.aw()?100:t/(2*this.lw())}uw(t){if(this.aw()){const s=t/(2*this.lw());return s/this.ow(t)}return 1}cw(t){this.My=t}fw(){return this.My}dw(t){this.xy=t}pw(){return this.xy}mw(t){this.yy=t,this.wy=Math.tan(this.yy/2)}gw(){return this.yy}lw(){return this.wy}yw(){this.vy=!1}ww(){this.vy=!0}aw(){return!this.vy}Sw(){return this.vy}bw(t,s,i=.5,e=.5){const h=this.fw(),n=this.pw(),r=this.gw();if(.5===i&&.5===e)this.Mw()?xh.St(t,r,s,h,n):xh.perspective(t,r,s,h,n);else{const o=2*(i=1-i)-2,a=2*i,l=2*e-2,u=2*e,c=this.lw()*h,f=c*s;xh.gt(t,o*f,a*f,l*c,u*c,h,n),this.Mw()&&xh.mul(t,li,t)}}xw(t,s,i,e=1){const h=self.devicePixelRatio,n=2*this.ow(i)*h*this.lw()/i,r=s*n/(2*h*e),o=i*n/(2*h*e),a=-r,l=r,u=-o,c=o;this.Mw()?xh.Mt(t,a,l,u,c,this.fw(),this.pw()):xh.ortho(t,a,l,u,c,this.fw(),this.pw())}Gw(t,s,i,e,h,n=1){let r=1;this.aw()&&(r=200*this.lw()/h);const o=ei,a=(Gh.set(o,r,-r,1),si),l=ii;Gh.multiply(a,s,o),Gh.multiply(l,i,o),xh.xt(t,a,l,e||hi),o[2]=n,xh.scale(t,t,o)}Tw(t,s,i,e,h,n,r,o){return Gh.set(si,t,s,i),Gh.set(ii,e,h,n),this.Gw(ti,si,ii,hi,r,o),ti}_w(t){this.Gy.push(t),this.Ty.set(t.Jc(),t)}Iw(t){const s=this.Gy.indexOf(t);-1!==s&&this.Gy.splice(s,1),this.Ty.delete(t.Jc())}ew(){Ks.Lr(this.Gy),this.Ty.clear()}Cw(t){return this.Ty.get(t)||null}Ew(){return this._y}Pw(){this.Rw(this._y)}Aw(){return this.Iy}Fw(){this.Rw(this.Iy)}Dw(){this.Rw(this.Cy)}Ow(){this.Rw(this.Ey)}Lw(){this.Rw(this.Py)}kw(){this.Rw(this.Ry)}Nw(){this.Rw(this.Ay)}Bw(){this.Rw(this.Fy)}Ww(){this.Rw(this.Dy)}jw(){this.Rw(this.Oy)}Hw(){this.Rw(this.Ly)}Vw(){this.Rw(this.ky)}Uw(t){this.By=t}zw(){return this.By}Jw(t,s,i,e){let h=Ks.qg.$w.qw(t,s,i,e),n=this.Ny.get(h);return n||(n=Ks.hn(Ks.qg.$w,this,t,s,i,e),this.Ny.set(h,n)),n.Xw(),n}Yw(t){t.Zw(),0===t.Kw()&&(this.By===t&&(this.By=null),this.Ny.delete(t.Qw()),t.nn())}tS(t){Ks.Lr(this.Wy),this.jy.clear();let s=0;for(const i of t){const e=i[0],h=i[1],n=i[2];this.Wy.push([h,n]),this.jy.set(e,{number:s,sS:h,iS:n}),s++}}eS(t){return this.Wy[t]}hS(t){return this.eS(t)[0]}nS(t){return this.eS(t)[1]}rS(t){const s=this.jy.get(t);if(void 0===s)throw new Error("invalid blend name");return s}oS(t){const s=this.jy.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}aS(t){this.Hy=t}lS(){return this.Hy}uS(t){this.Vy=t,this.By=null}cS(){return this.Vy}wm(t,s,i,e){const h=Ks.bn(t,s,i,e),n=Math.sin(h),r=Math.cos(h),o=.5*this.Uy,a=n*o,l=r*o,u=this.Jy;2===u?this.fS(t,s,0,i,e,0,a,l):1===u?this.dS(t,s,0,i,e,0,a,l):this.pS(t,s,0,i,e,0,a,l)}mS(t,s,i,e,h,n){const r=Ks.bn(t,s,e,h),o=Math.sin(r),a=Math.cos(r),l=.5*this.Uy,u=o*l,c=a*l,f=this.Jy;2===f?this.fS(t,s,i,e,h,n,u,c):1===f?this.dS(t,s,i,e,h,n,u,c):this.pS(t,s,i,e,h,n,u,c)}fS(t,s,i,e,h,n,r,o){const a=this.$y,l=t+a-o,u=s+a-r,c=e+a+o,f=h+a+r,d=2*o,p=2*r,m=l+r,g=u-o,y=l-r+d,w=u+o+p,S=c+r,b=f-o,v=c-r-d,M=f+o-p;this.gS(m,g,i,S,b,n,v,M,n,y,w,i,oi)}dS(t,s,i,e,h,n,r,o){const a=this.$y,l=t+a-o,u=s+a-r,c=e+a+o,f=h+a+r,d=l+r,p=u-o,m=l-r,g=u+o,y=c+r,w=f-o,S=c-r,b=f+o;this.gS(d,p,i,y,w,n,S,b,n,m,g,i,oi)}pS(t,s,i,e,h,n,r,o){const a=this.$y,l=t+a,u=s+a,c=e+a,f=h+a,d=l+r,p=u-o,m=l-r,g=u+o,y=c+r,w=f-o,S=c-r,b=f+o;this.gS(d,p,i,y,w,n,S,b,n,m,g,i,oi)}yS(t,s,i,e,h,n){const r=Ks.bn(t,s,i,e),o=Math.sin(r),a=Math.cos(r),l=.5*this.Uy,u=o*l,c=a*l,f=this.Jy;2===f?this.wS(t,s,i,e,u,c,h,n):1===f?this.SS(t,s,i,e,u,c,h,n):this.bS(t,s,i,e,u,c,h,n)}wS(t,s,i,e,h,n,r,o){const a=this.$y,l=t+a-n,u=s+a-h,c=i+a+n,f=e+a+h,d=2*n,p=2*h,m=l+h,g=u-n,y=l-h+d,w=u+n+p,S=c+h,b=f-n,v=c-h-d,M=f+n-p;ni.set(m,g,S,b,v,M,y,w),ri.set(r,0,o,0),this.vS(ni,ri)}SS(t,s,i,e,h,n,r,o){const a=this.$y,l=t+a-n,u=s+a-h,c=i+a+n,f=e+a+h,d=l+h,p=u-n,m=l-h,g=u+n,y=c+h,w=f-n,S=c-h,b=f+n;ni.set(d,p,y,w,S,b,m,g),ri.set(r,0,o,0),this.vS(ni,ri)}bS(t,s,i,e,h,n,r,o){const a=this.$y,l=t+a,u=s+a,c=i+a,f=e+a,d=l+h,p=u-n,m=l-h,g=u+n,y=c+h,w=f-n,S=c-h,b=f+n;ni.set(d,p,y,w,S,b,m,g),ri.set(r,0,o,0),this.vS(ni,ri)}MS(t,s,i,e){const h=.5*this.Uy,n=this.Jy;2===n?this.xS(t,s,i,e,h):1===n?this.GS(t,s,i,e,h):this.TS(t,s,i,e,h)}xS(t,s,i,e,h){this.fS(t,s,0,i,s,0,0,h),this.fS(i,s,0,i,e,0,h,0),this.fS(i,e,0,t,e,0,0,-h),this.fS(t,e,0,t,s,0,-h,0)}GS(t,s,i,e,h){this.dS(t,s,0,i,s,0,0,h),this.dS(i,s,0,i,e,0,h,0),this.dS(i,e,0,t,e,0,0,-h),this.dS(t,e,0,t,s,0,-h,0)}TS(t,s,i,e,h){this.pS(t,s,0,i,s,0,0,h),this.pS(i,s,0,i,e,0,h,0),this.pS(i,e,0,t,e,0,0,-h),this.pS(t,e,0,t,s,0,-h,0)}_S(t){this.MS(t.wl(),t.Sl(),t.bl(),t.vl())}IS(t){const s=Ks.bn(t.Zn(),t.Kn(),t.Qn(),t.tr()),i=Math.sin(s),e=Math.cos(s),h=.5*this.Uy,n=i*h,r=e*h,o=this.Jy;2===o?this.CS(t,n,r):1===o?this.ES(t,n,r):this.PS(t,n,r)}CS(t,s,i){this.fS(t.Zn(),t.Kn(),0,t.Qn(),t.tr(),0,s,i),this.fS(t.Qn(),t.tr(),0,t.ir(),t.er(),0,i,-s),this.fS(t.ir(),t.er(),0,t.hr(),t.nr(),0,-s,-i),this.fS(t.hr(),t.nr(),0,t.Zn(),t.Kn(),0,-i,s)}ES(t,s,i){this.dS(t.Zn(),t.Kn(),0,t.Qn(),t.tr(),0,s,i),this.dS(t.Qn(),t.tr(),0,t.ir(),t.er(),0,i,-s),this.dS(t.ir(),t.er(),0,t.hr(),t.nr(),0,-s,-i),this.dS(t.hr(),t.nr(),0,t.Zn(),t.Kn(),0,-i,s)}PS(t,s,i){this.pS(t.Zn(),t.Kn(),0,t.Qn(),t.tr(),0,s,i),this.pS(t.Qn(),t.tr(),0,t.ir(),t.er(),0,i,-s),this.pS(t.ir(),t.er(),0,t.hr(),t.nr(),0,-s,-i),this.pS(t.hr(),t.nr(),0,t.Zn(),t.Kn(),0,-i,s)}RS(t){this.Uy=t,this.zy[this.zy.length-1]=t}AS(){return this.Uy}FS(t){if(100<=this.zy.length)throw new Error("pushed too many line widths - check push/pop pairs");this.zy.push(t),this.Uy=t}DS(){if(this.zy.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.zy.pop(),this.Uy=this.zy.at(-1)}OS(){this.Jy=0,this.qy[this.qy.length-1]=0}LS(){this.Jy=1,this.qy[this.qy.length-1]=0}kS(){this.Jy=2,this.qy[this.qy.length-1]=0}NS(t){if("butt"===t)this.BS();else if("square"===t)this.WS();else{if("zag"!==t)throw new Error("invalid line cap");this.jS()}}BS(){if(100<=this.qy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.qy.push(0),this.Jy=0}WS(){if(100<=this.qy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.qy.push(1),this.Jy=1}jS(){if(100<=this.qy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.qy.push(2),this.Jy=2}HS(){if(this.qy.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.qy.pop(),this.Jy=this.qy.at(-1)}VS(t){this.$y=t,this.Xy[this.Xy.length-1]=t}US(){return this.$y}zS(t){if(100<=this.Xy.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.Xy.push(t),this.$y=t}JS(){if(this.Xy.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.Xy.pop(),this.$y=this.Xy.at(-1)}qS(s){const t=s.length/2;if(t<3)throw new Error("need at least 3 points");const i=t-2,e=i-1,h=s[0],n=s[1];for(let t=0;t<i;t+=2){const r=2*t,o=s[2+r],a=s[3+r],l=s[4+r],u=s[5+r];if(t===e)this.$S(h,n,o,a,l,u,l,u);else{const c=s[6+r],f=s[7+r];this.$S(h,n,o,a,l,u,c,f)}}}XS(){return 3}YS(){this.ZS(!0),this.Yy++}KS(){return this.Yy}QS(){this.Yy++}tb(t){this.Zy=!!t}sb(){return this.Zy}ib(t){this.Ky=!!t}eb(){return this.Ky}hb(){return!1}Mw(){return!1}nb(){}rb(){}ob(){}ab(){return this.nb()+this.rb()+this.ob()}lb(){return Ks.hn(Ks.qg.ub,this)}}}{const ui=self.Ds;ui.qg.cb=class{constructor(t,s){this.ln=s.name,this.fb=t,this.pb=s.extendBoxHorizontal||0,this.mb=s.extendBoxVertical||0,this.gb=!!s.crossSampling,this.yb=!!s.mustPreDraw,this.wb=!!s.preservesOpaqueness,this.Sb=!!s.supports3dDirectRendering,this.bb=!!s.animated,this.vb=!!s.blendsBackground,this.Mb=!!s.usesDepth,this.xb=!1,this.Gb=this.gb||this.vb||0!==this.pb||0!==this.mb}nn(){this.fb=null}Tb(){return this.fb}Jc(){return this.ln}_b(){return 0!==this.pb||0!==this.mb}Ib(){return this.pb}Cb(){return this.mb}Eb(){return this.gb}Pb(){return this.yb}Rb(){return this.wb}Ab(){return this.Sb}Fb(){return this.bb}Db(){return this.vb}Ob(){return this.Mb}Lb(){return this.xb}kb(){return this.Gb}Nb(){return!1}}}{const ci=self.Ds;ci.qg.$w=class{constructor(t,s,i,e,h){this.fb=t,this.ld=0,this.Bb=null,this.Wb="",this.jb=i,this.Hb=ci.hn(ci.Wo),this.Hb.set(e),this.Vb=h,"string"==typeof s?this.Wb=s:(this.Bb=s,this.Wb=this.Bb.Jc())}nn(){if(0<this.ld)throw new Error("releasing state group still in use");this.fb=null,this.Bb=null,this.Wb=""}Ub(){const t=this.fb;t.Rw(this.Bb),t.zb(this.jb),t.Jb(this.Hb),t.uS(this.Vb),t.Uw(this)}Qw(){return ci.qg.$w.qw(this.Wb,this.jb,this.Hb,this.Vb)}Xw(){++this.ld}Zw(){--this.ld}Kw(){return this.ld}qb(){this.Bb=null}$b(t){if(this.Bb=t.Cw(this.Wb),!this.Bb)throw new Error("failed to restore shader program")}static qw(t,s,i,e){const h="string"==typeof t?t:t.Jc();return h+","+s+","+i.ta()+","+i.ia()+","+i.ea()+","+i.na()+","+e}}}{let e=function(t,s,i){const e=i.Zn(),h=i.Kn(),n=i.Qn()-e,r=i.tr()-h,o=i.hr()-e,a=i.nr()-h,l=n*t,u=r*t,c=o*s,f=a*s;return[e+l+c,h+u+f]};e;const _=self.Ds,fi=_.hn(_.$l);_.qg.Xb=class{constructor(t,s,i){this.Yb=t,this.Zb=s,this.Kb=i,this.Xa=NaN,this.Ya=NaN,this.Vb=NaN,this.Qb=NaN,this.tv=NaN,this.Xa=0,this.Ya=0,this.Vb=0,this.Qb=0,this.tv=0}sv(t,s,i,e){this.Xa=t,this.Ya=s,this.Qb=i,this.tv=e}hv(){return this.Xa}nv(t){this.Xa!==t&&(this.Xa=t,this.Yb.rv())}ov(){return this.Ya}av(t){this.Ya!==t&&(this.Ya=t,this.Yb.rv())}lv(){return this.Vb}uv(t){this.Vb!==t&&(this.Vb=Math.max(t,0),this.Yb.rv())}cv(){return this.Qb}dv(t){this.Qb=t}pv(){return this.tv}mv(t){this.tv=t}gv(t,s,i){[this.Xa,this.Ya]=e(t.Xa,t.Ya,s),this.Vb=t.Vb,this.Qb=_.Ft(i.wl(),i.bl(),t.Qb),this.tv=_.Ft(i.Sl(),i.vl(),t.tv)}yv(t,s,i){[this.Xa,this.Ya]=e(t.Xa,t.Ya,s),this.Vb=t.Vb,[this.Qb,this.tv]=e(t.Qb,t.tv,i)}wv(){return{x:this.hv(),y:this.ov(),z:this.lv(),u:this.cv(),v:this.pv()}}Sv(t){this.nv(t.x),this.av(t.y),t.hasOwnProperty("z")&&this.uv(t.z),this.dv(t.u),this.mv(t.v)}bv(){return this.Yb}vv(){return this.Zb}Mv(){return this.Kb}},_.qg.xv=class{constructor(i,t,s){if(i<2||t<2)throw new Error("invalid mesh size");this.Gv=i,this.Tv=t,this._v=s||null,this.Iv=[],this.Cv=0,this.Ev=0,this.Pv=1,this.Rv=1,this.Av=0,this.Fv=!1;const e=i-1,h=t-1;for(let s=0;s<t;++s){const n=[];for(let t=0;t<i;++t){const r=_.hn(_.qg.Xb,this,t,s),o=t/e,a=s/h;r.sv(o,a,o,a),n.push(r)}this.Iv.push(n)}}nn(){_.Lr(this.Iv)}Dv(){return this.Gv}Ov(){return this.Tv}Lv(){return this._v}kv(){return this.Iv}rv(){this.Fv=!0}Nv(){if(this.Fv){let t=1/0,s=1/0,i=-1/0,e=-1/0,h=0;for(const n of this.Iv)for(const r of n){const o=r.hv(),a=r.ov();t=Math.min(t,o),s=Math.min(s,a),i=Math.max(i,o),e=Math.max(e,a),h=Math.max(h,r.lv())}this.Cv=t,this.Ev=s,this.Pv=i,this.Rv=e,this.Av=h,this.Fv=!1}}Bv(){return this.Nv(),this.Cv}Wv(){return this.Nv(),this.Ev}jv(){return this.Nv(),this.Pv}Hv(){return this.Nv(),this.Rv}Vv(){return this.Nv(),this.Av}Uv(){return 0<this.Vv()}zv(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.Gv||s<0||s>=this.Tv?null:this.Iv[s][t]}Jv(t,i,e){const h=e instanceof _.Rect;if(t.Dv()!==this.Dv()||t.Ov()!==this.Ov())throw new Error("source mesh wrong size");const n=t.Iv,r=this.Iv;for(let t=0,s=r.length;t<s;++t){const o=n[t],a=r[t];for(let t=0,s=a.length;t<s;++t){const l=o[t],u=a[t];h?u.gv(l,i,e):u.yv(l,i,e)}}}qv(n){let r=this.Iv,o=r[0];for(let t=1,s=r.length;t<s;++t){let i=r[t],e=o[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const a=o[t],l=i[t];fi.set(e.cv(),e.pv(),a.cv(),a.pv(),l.cv(),l.pv(),h.cv(),h.pv()),n.gS(e.hv(),e.ov(),e.lv(),a.hv(),a.ov(),a.lv(),l.hv(),l.ov(),l.lv(),h.hv(),h.ov(),h.lv(),fi),e=a,h=l}o=i}}$v(o,a){a=a||((t,s,i)=>[t,s,i]);let t=this.Iv,l=t[0];for(let n=1,r=t.length;n<r;++n){let i=t[n],e=l[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const u=l[t],c=i[t],[f,d,p]=a(e.hv(),e.ov(),e.lv()),[m,g,y]=a(u.hv(),u.ov(),u.lv()),[w,S,b]=a(c.hv(),c.ov(),c.lv()),[v,M,x]=a(h.hv(),h.ov(),h.lv());o.mS(f,d,p,m,g,y),o.mS(f,d,p,w,S,b),o.mS(f,d,p,v,M,x),t===s-1&&o.mS(m,g,y,w,S,b),n===r-1&&o.mS(v,M,x,w,S,b),e=u,h=c}l=i}}Xv(t){let i=.99999999,e=t.Fu(),h=[],n=this.Dv()-1,r=this.Ov()-1,o=1/n,a=1/r,l=n-1,u=r-1,c=e[0],f=e[1],d=_.cn(Math.floor(c*n),0,l),p=_.cn(Math.floor(f*r),0,u),m=!0,g=0,y=0,w=0,S=-1,b=()=>{c=_.cn(_.Ft(c,g,w),0,1),f=_.cn(_.Ft(f,y,w),0,1),h.push(c,f)};for(let t=0,s=e.length;t<s;t+=2){c=e[t],f=e[t+1],h.push(c,f),d=_.cn(Math.floor(c*n),0,l),p=_.cn(Math.floor(f*r),0,u);const v=(t+2)%s;for(g=e[v],y=e[1+v],S=-1;;){if(1e6<h.length)throw new Error("Too many mesh poly points");const M=d*o,x=p*a,G=(d+1)*o,T=(p+1)*a;if(m=_.cr(c,f,M,x,G,x,G,T),0!==S&&0<=(w=_.ur(c,f,g,y,M,x,G,T,-.001))&&w<=i)b(),m=!m,S=0;else if(0<p&&2!==S&&0<=(w=_.ur(c,f,g,y,M,x,G,x,.001))&&w<=i)b(),p--,m=!1,S=4;else if(d<l&&3!==S&&0<=(w=_.ur(c,f,g,y,G,x,G,T,.001))&&w<=i)b(),d++,m=!1,S=1;else if(0<d&&1!==S&&0<=(w=_.ur(c,f,g,y,M,x,M,T,.001))&&w<=i)b(),d--,m=!0,S=3;else{if(!(p<u&&4!==S&&0<=(w=_.ur(c,f,g,y,M,T,G,T,.001))&&w<=i))break;b(),p++,m=!0,S=2}}}return _.hn(_.Cu,h)}Yv(t,s){const i=this.Zv(t);this.Kv(i),s.Ou(i)}Zv(t){const i=[],e=t.Fu();for(let t=0,s=e.length;t<s;t+=2){const h=e[t],n=e[t+1],[r,o]=this.Qv(h,n);i.push(r,o)}return i}Qv(t,s){const i=this.Dv()-1,e=this.Ov()-1,h=1/i,n=1/e,r=_.cn(Math.floor(t*i),0,i-1),o=_.cn(Math.floor(s*e),0,e-1),a=r*h,l=o*n,u=(r+1)*h,c=(o+1)*n,f=this.zv(r,o),d=this.zv(r+1,o+1),p=_.cr(t,s,a,l,u,l,u,c),m=p?a+h:a,g=p?l:l+n,y=this.zv(r+(p?1:0),o+(p?0:1)),[w,S,b]=_.dr(t,s,a,l,m,g,u,c);return _.pr(w,S,b,f.hv(),f.ov(),f.lv(),y.hv(),y.ov(),y.lv(),d.hv(),d.ov(),d.lv())}Kv(i){let e=[],h=i[0],n=i[1],r=h-i.at(-2),o=n-i.at(-1);for(let t=0,s=i.length;t<s;t+=2){const a=(t+2)%s,l=i[a],u=i[1+a],c=l-h,f=u-n,d=Math.abs(c)<1e-7&&Math.abs(r)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(c)===Math.sign(r);(!d&&!p&&.001<Math.abs(c/r-f/o)||0==c&&0==f)&&e.push(h,n),h=l,n=u,r=c,o=f}6<=e.length&&e.length<i.length&&_.Wr(i,e)}wv(){return{cols:this.Dv(),rows:this.Ov(),points:this.Iv.map(t=>t.map(t=>t.wv()))}}Sv(t){const i=this.Dv(),e=this.Ov();if(t.cols!==i||t.rows!==e)throw new Error("mesh data wrong size");const h=t.points;for(let s=0;s<e;++s){const n=h[s];for(let t=0;t<i;++t){const r=this.zv(t,s);r.Sv(n[t])}}}}}{let d=function(t,s){let i,e,h,n;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,h=s.RGBA,n=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,h=s.RGB,n=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,h=s.RGBA,n=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,h=s.RGBA,n=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,h=s.RGB,n=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{t2:i,s2:e,format:h,type:n}};d;const di=self.Ds,pi=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),mi=new Set(["nearest","bilinear","trilinear"]),gi=new Set(["default","low","high"]),yi=new Set(["clamp-to-edge","repeat","mirror-repeat"]),wi={i2:"clamp-to-edge",e2:"clamp-to-edge",h2:"trilinear",n2:0,o2:"rgba8",a2:!0,l2:"default",premultiplyAlpha:!0,u2:!1,width:-1,height:-1},Si={premultiplyAlpha:!0,flipY:!1},bi=new Set;di.qg.c2=class{constructor(t){this.fb=t,this.f2=null,this.Wm=0,this.jm=0,this.d2=!0,this.m2="clamp-to-edge",this.g2="clamp-to-edge",this.w2="trilinear",this.S2=0,this.b2="rgba8",this.v2=!1,this.M2="default",this.ld=0}G2(s,t){if(!("undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&s instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&s instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas||s instanceof ImageData||s instanceof ArrayBuffer||null===s))throw new Error("invalid texture source");if(t=Object.assign({},wi,t),this.f2)throw new Error("already created texture");if(this.m2=t.i2,this.g2=t.e2,this.w2=t.h2,this.S2=t.n2,this.b2=t.o2,this.v2=!!t.a2&&this.fb.sb(),this.M2=t.l2,!yi.has(this.m2)||!yi.has(this.g2))throw new Error("invalid wrap mode");if(!mi.has(this.w2))throw new Error("invalid sampling");if(!pi.has(this.b2))throw new Error("invalid pixel format");if(!gi.has(this.M2))throw new Error("invalid mipmap quality");if(this.d2=!0,s instanceof ArrayBuffer||null===s||t.u2){if(this.Wm=t.width,this.jm=t.height,s instanceof ArrayBuffer&&s.byteLength!==this.Wm*this.jm*4)throw new Error("ArrayBuffer wrong size")}else this.Wm=s.width,this.jm=s.height;if(this.Wm<=0||this.jm<=0)throw new Error("invalid texture data size");if(t.u2){const o=di.Co(this.Wm,this.jm),a=o.getContext("2d");a.drawImage(s,0,0,this.Wm,this.jm),s=o}const i=di.Fn(this.Wm)&&di.Fn(this.jm),e=this.fb.T2();if(this.Wm>e||this.jm>e)throw new Error("texture data exceeds maximum texture size");const h=this.fb._2(),n=this.fb.I2(),r=(this.f2=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.f2),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1),d(this.b2,h));if(this.fb.C2()||i||!this.E2())if(2<=n){let t;t=this.v2?Math.floor(Math.log2(Math.max(this.Wm,this.jm))+1):1,h.texStorage2D(h.TEXTURE_2D,t,r.t2,this.Wm,this.jm),s instanceof ArrayBuffer?h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.Wm,this.jm,r.format,r.type,new Uint8Array(s)):null!==s&&h.texSubImage2D(h.TEXTURE_2D,0,0,0,r.format,r.type,s)}else s instanceof ArrayBuffer?h.texImage2D(h.TEXTURE_2D,0,r.s2,this.Wm,this.jm,0,r.format,r.type,new Uint8Array(s)):null===s?h.texImage2D(h.TEXTURE_2D,0,r.s2,this.Wm,this.jm,0,r.format,r.type,null):h.texImage2D(h.TEXTURE_2D,0,r.s2,r.format,r.type,s);else{if(null===s)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((s=s instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(s),this.Wm,this.jm):s)instanceof ImageData){const c=di.Co(this.Wm,this.jm),f=c.getContext("2d");f.putImageData(s,0,0),s=c}const l=di.Co(di.Dn(this.Wm),di.Dn(this.jm)),u=l.getContext("2d");u.imageSmoothingEnabled="nearest"!==this.w2,u.drawImage(s,0,0,this.Wm,this.jm,0,0,l.width,l.height),h.texImage2D(h.TEXTURE_2D,0,r.s2,r.format,r.type,l)}null!==s&&this.P2(h),h.bindTexture(h.TEXTURE_2D,null),this.fb.R2(),this.ld=1,bi.add(this)}A2(t,s,i){if(i=Object.assign({},wi,i),this.f2)throw new Error("already created texture");if(this.m2=i.i2,this.g2=i.e2,this.w2=i.h2,this.b2=i.o2,this.v2=!!i.a2&&this.fb.sb(),this.M2=i.l2,!yi.has(this.m2)||!yi.has(this.g2))throw new Error("invalid wrap mode");if(!mi.has(this.w2))throw new Error("invalid sampling");if(!pi.has(this.b2))throw new Error("invalid pixel format");if(!gi.has(this.M2))throw new Error("invalid mipmap quality");this.d2=!1,this.Wm=Math.floor(t),this.jm=Math.floor(s);const e=di.Fn(this.Wm)&&di.Fn(this.jm),h=this.fb.T2();if(this.Wm<=0||this.jm<=0)throw new Error("invalid texture size");if(this.Wm>h||this.jm>h)throw new Error("texture exceeds maximum texture size");if(!this.fb.C2()&&this.E2()&&!e)throw new Error("non-power-of-two tiled textures not supported");const n=this.fb._2(),r=this.fb.I2(),o=(this.f2=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.f2),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),d(this.b2,n)),a=2<=r?o.t2:o.s2;n.texImage2D(n.TEXTURE_2D,0,a,this.Wm,this.jm,0,o.format,o.type,null),this.P2(n),n.bindTexture(n.TEXTURE_2D,null),this.fb.R2(),this.ld=1,bi.add(this)}F2(t){if("default"===this.M2)return this.d2?t.NICEST:t.FASTEST;if("low"===this.M2)return t.FASTEST;if("high"===this.M2)return t.NICEST;throw new Error("invalid mipmap quality")}E2(){return"clamp-to-edge"!==this.m2||"clamp-to-edge"!==this.g2}D2(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}P2(t){const s=di.Fn(this.Wm)&&di.Fn(this.jm);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.D2(t,this.m2)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.D2(t,this.g2)),"nearest"===this.w2)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.v2=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.fb.C2())&&this.v2){t.hint(t.GENERATE_MIPMAP_HINT,this.F2(t)),t.generateMipmap(t.TEXTURE_2D);const e="trilinear"===this.w2&&!this.fb.eb();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.v2=!1;const i=this.fb.O2();i&&0<this.S2&&"nearest"!==this.w2&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.S2,this.fb.L2()))}N2(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.f2||this.ld<=0)throw new Error("texture not created");if(this.d2)throw new Error("cannot update static texture");s=Object.assign({},Si,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,h=this.fb.I2(),n=this.fb._2(),r=(n.bindTexture(n.TEXTURE_2D,this.f2),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!!s.flipY),d(this.b2,n)),o=2<=h?r.t2:r.s2;try{if(this.Wm===i&&this.jm===e){const a=di.Fn(this.Wm)&&di.Fn(this.jm);n.texSubImage2D(n.TEXTURE_2D,0,0,0,r.format,r.type,t),(a||this.fb.C2())&&this.v2&&(n.hint(n.GENERATE_MIPMAP_HINT,this.F2(n)),n.generateMipmap(n.TEXTURE_2D))}else{this.Wm=i,this.jm=e;const l=di.Fn(this.Wm)&&di.Fn(this.jm);if(!this.fb.C2()&&this.E2()&&!l)throw new Error("non-power-of-two tiled textures not supported");n.texImage2D(n.TEXTURE_2D,0,o,r.format,r.type,t),(l||this.fb.C2())&&this.v2&&(n.hint(n.GENERATE_MIPMAP_HINT,this.F2(n)),n.generateMipmap(n.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}n.bindTexture(n.TEXTURE_2D,null),this.fb.R2()}B2(){if(0<this.ld)throw new Error("texture still has references");if(!this.f2)throw new Error("already deleted texture");bi.delete(this);const t=this.fb._2();t.deleteTexture(this.f2),this.f2=null}W2(){return!!this.f2}j2(){return this.f2}Tb(){return this.fb}H2(){this.ld++}V2(){if(this.ld<=0)throw new Error("no more references");this.ld--}U2(){return this.ld}Qp(){return this.Wm}fm(){return this.jm}z2(){return this.d2}J2(){let t=this.Wm*this.jm;switch(this.b2){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.v2&&(t+=Math.floor(t/3)),t}static qb(){bi.clear()}static q2(){return bi.values()}}}{const vi=self.Ds,Mi=self.ys,Gh=Mi.Ts,xh=Mi.vs,xi=new Set(["nearest","bilinear","trilinear"]),Gi={h2:"trilinear",alpha:!0,depth:!1,X2:!0,Y2:!0,Z2:0},Ti=new Set;vi.qg.K2=class{constructor(t){this.fb=t,this.Q2=null,this.tM=null,this.f2=null,this.sM=null,this.Wm=0,this.jm=0,this.iM=!0,this.w2="trilinear",this.eM=!0,this.hM=!1,this.nM=!0,this.rM=0,this.oM=xh.create(),this.aM=0,this.lM=0,this.uM=0}cM(t,s,i){i=Object.assign({},Gi,i);const e=this.fb.I2();if(this.f2||this.sM)throw new Error("already created render target");if(this.w2=i.h2,this.eM=!!i.alpha,this.hM=!!i.depth,this.nM=!!i.X2,this.iM=!!i.Y2,this.rM=i.Z2,!xi.has(this.w2))throw new Error("invalid sampling");if(0<this.rM&&(e<2||this.nM))throw new Error("invalid use of multisampling");if(e<2&&(this.nM=!0),this.Wm=t,this.jm=s,this.Wm<=0||this.jm<=0)throw new Error("invalid render target size");this.fM();const h=this.fb._2();if(this.Q2=h.createFramebuffer(),this.hM&&(this.tM=h.createFramebuffer()),this.nM){this.f2=this.fb.dM(this.Wm,this.jm,{h2:this.w2,o2:this.eM?"rgba8":"rgb8",a2:!1});const r=this.f2.j2();h.bindFramebuffer(h.FRAMEBUFFER,this.Q2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,r,0),this.hM&&(h.bindFramebuffer(h.FRAMEBUFFER,this.tM),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,r,0))}else{this.sM=h.createRenderbuffer(),h.bindRenderbuffer(h.RENDERBUFFER,this.sM);const o=this.eM?h.RGBA8:h.RGB8;if(0<this.rM){const a=h.getInternalformatParameter(h.RENDERBUFFER,o,h.SAMPLES);if(a&&a[0]){const l=a[0];this.rM>l&&(this.rM=l)}else this.rM=0}0===this.rM?h.renderbufferStorage(h.RENDERBUFFER,o,this.Wm,this.jm):h.renderbufferStorageMultisample(h.RENDERBUFFER,this.rM,o,this.Wm,this.jm),h.bindFramebuffer(h.FRAMEBUFFER,this.Q2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.sM),this.hM&&(h.bindFramebuffer(h.FRAMEBUFFER,this.tM),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.sM)),h.bindRenderbuffer(h.RENDERBUFFER,null)}const n=this.fb.pM();this.hM&&n&&(h.bindFramebuffer(h.FRAMEBUFFER,this.Q2),this.fb.mM()?h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.TEXTURE_2D,n,0):h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,n)),h.bindFramebuffer(h.FRAMEBUFFER,null),Ti.add(this)}gM(t,s){if(this.Wm!==t||this.jm!==s){this.Wm=t,this.jm=s,this.fM();const i=this.fb._2(),e=(i.bindFramebuffer(i.FRAMEBUFFER,this.Q2),this.f2?this.f2.N2(new ImageData(this.Wm,this.jm)):(i.bindRenderbuffer(i.RENDERBUFFER,this.sM),i.renderbufferStorage(i.RENDERBUFFER,this.eM?i.RGBA8:i.RGB8,this.Wm,this.jm),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.fb.pM());this.hM&&e&&(this.fb.mM()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}}B2(){if(!this.f2&&!this.sM)throw new Error("already deleted render target");Ti.delete(this);const t=this.fb._2(),s=(this.f2?(t.bindFramebuffer(t.FRAMEBUFFER,this.Q2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.hM&&(t.bindFramebuffer(t.FRAMEBUFFER,this.tM),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.fb.yM(this.f2),this.f2=null):this.sM&&(t.bindFramebuffer(t.FRAMEBUFFER,this.Q2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.hM&&(t.bindFramebuffer(t.FRAMEBUFFER,this.tM),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.sM),this.sM=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.fb.I2()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.Q2),this.hM&&t.deleteFramebuffer(this.tM),this.fb.wM());s.SM=null,this.Q2=s.bM=null}fM(){this.fb.bw(this.oM,this.Wm/this.jm),this.aM=this.fb.gw(),this.lM=this.fb.fw(),this.uM=this.fb.pw()}vM(){return this.Q2}MM(){return this.tM}Tb(){return this.fb}xM(){return this.f2}GM(){return this.fb.gw()===this.aM&&this.fb.fw()===this.lM&&this.fb.pw()===this.uM||this.fM(),this.oM}TM(){return"nearest"!==this.w2}_M(){return this.eM}IM(){return this.nM}CM(){return this.hM}Qp(){return this.Wm}fm(){return this.jm}EM(){return this.iM}PM(){return this.rM}RM(){const t={h2:this.w2,alpha:this.eM,X2:this.nM};return this.iM||(t.width=this.Wm,t.height=this.jm),t}AM(t){return"nearest"!==(t=Object.assign({},Gi,t)).h2===this.TM()&&!!t.alpha===this._M()&&!!t.depth===this.CM()&&!(2<=this.fb.I2()&&!!t.X2!==this.IM())&&("number"==typeof t.width||"number"==typeof t.height?!this.EM()&&this.Qp()===Math.floor(t.width)&&this.fm()===Math.floor(t.height):this.EM())}FM(){return this.f2?this.f2.j2():null}J2(){return this.f2?this.f2.J2():this.Wm*this.jm*(this.eM?4:3)}static async DM(t,s){const i=await t.OM(s,!0);return vi.Ro(i)}static qb(){Ti.clear()}static LM(){return Ti.values()}static kM(t,s){for(const i of Ti)i.EM()&&i.gM(t,s)}}}{const m=self.Ds,_i=self.ys,Gh=_i.Ts,xh=_i.vs,Ii=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);m.qg.NM=class extends m.qg.cb{static async BM(t,s){const i=t._2(),e=s.src,h=s.WM,n=s.name,r=i.createShader(i.FRAGMENT_SHADER),o=(i.shaderSource(r,e),i.compileShader(r),i.createShader(i.VERTEX_SHADER)),a=(i.shaderSource(o,h),i.compileShader(o),i.createProgram()),l=(i.attachShader(a,r),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a),t.jM());if(l?await t.HM(()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await m.Pr(5),!i.getShaderParameter(r,i.COMPILE_STATUS)){const c=i.getShaderInfoLog(r);throw i.deleteShader(r),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+c)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const f=i.getShaderInfoLog(o);throw i.deleteShader(r),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const d=i.getProgramInfoLog(a);throw i.deleteShader(r),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+d)}const u=m.Bd(i.getProgramInfoLog(a)||"").trim();return u&&!m.Ld(u)&&console.info(`[WebGL] Shader program '${n}' compilation log: `,u),i.deleteShader(r),i.deleteShader(o),a}static async VM(t,s){const i=await m.qg.NM.BM(t,s);return new m.qg.NM(t,i,s)}constructor(t,s,i){super(t,i);const e=t._2(),h=t.wM(),n=(t.ZS(),e.useProgram(s),this.UM=e,this.Bb=s,this.zM="<default-device-transform>"===i.name,e.getAttribLocation(s,"aPos")),r=e.getAttribLocation(s,"aTex"),o=(this.JM=e.getAttribLocation(s,"aPoints"),-1!==n&&(e.bindBuffer(e.ARRAY_BUFFER,t.qM),e.vertexAttribPointer(n,t.XS(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(n)),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.$M),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==this.JM&&(e.bindBuffer(e.ARRAY_BUFFER,t.XM),e.vertexAttribPointer(this.JM,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.JM)),e.bindBuffer(e.ARRAY_BUFFER,null),this.YM=new m.qg.ZM(this,"matP","mat4"),this.KM=new m.qg.ZM(this,"matMV","mat4"),this.QM=new m.qg.ZM(this,"color","vec4"),this.tx=new m.qg.ZM(this,"samplerFront","sampler"),this.ix=new m.qg.ZM(this,"pointTexStart","vec2"),this.hx=new m.qg.ZM(this,"pointTexEnd","vec2"),this.nx=new m.qg.ZM(this,"zElevation","float"),this.ox=new m.qg.ZM(this,"tileSize","vec2"),this.lx=new m.qg.ZM(this,"tileSpacing","vec2"),this.ux=new m.qg.ZM(this,"color2_","vec4"),this.mx=new m.qg.ZM(this,"outlineThickness","float"),this.gx=new m.qg.ZM(this,"samplerBack","sampler"),this.yx=new m.qg.ZM(this,"samplerDepth","sampler"),this.wx=new m.qg.ZM(this,"destStart","vec2"),this.Sx=new m.qg.ZM(this,"destEnd","vec2"),this.bx=new m.qg.ZM(this,"srcStart","vec2"),this.vx=new m.qg.ZM(this,"srcEnd","vec2"),this.Mx=new m.qg.ZM(this,"srcOriginStart","vec2"),this.xx=new m.qg.ZM(this,"srcOriginEnd","vec2"),this.Gx=new m.qg.ZM(this,"pixelSize","vec2"),this.Tx=new m.qg.ZM(this,"seconds","float"),this._x=new m.qg.ZM(this,"devicePixelRatio","float"),this.Ix=new m.qg.ZM(this,"layerScale","float"),this.Cx=new m.qg.ZM(this,"layerAngle","float"),this.Ex=new m.qg.ZM(this,"layoutStart","vec2"),this.Px=new m.qg.ZM(this,"layoutEnd","vec2"),this.Rx=new m.qg.ZM(this,"zNear","float"),this.Ax=new m.qg.ZM(this,"zFar","float"),this.Fx=!!(this.Gx.Dx()||this.Tx.Dx()||this.gx.Dx()||this.wx.Dx()||this.Sx.Dx()||this.bx.Dx()||this.vx.Dx()||this.Mx.Dx()||this.xx.Dx()||this._x.Dx()||this.Ix.Dx()||this.Cx.Dx()||this.Ex.Dx()||this.Px.Dx()),i.parameters||[]);this.Ox=[],this.xb=this.Gx.Dx()||this.bx.Dx()||this.vx.Dx()||this.Mx.Dx()||this.xx.Dx(),this.Lx=!1,this.kx=!1,this.QM.Nx(1,1,1,1),this.ux.Nx(1,1,1,1),this.tx.Bx(0),this.gx.Bx(1),this.yx.Bx(2),this.ix.Wx(0,0),this.hx.Wx(1,1),this.nx.jx(0),this.ox.Wx(0,0),this.lx.Wx(0,0),this.wx.Wx(0,0),this.Sx.Wx(1,1),this.bx.Wx(0,0),this.vx.Wx(0,0),this.Mx.Wx(0,0),this.xx.Wx(0,0),this.Gx.Wx(0,0),this._x.jx(1),this.Rx.jx(t.fw()),this.Ax.jx(t.pw()),this.Ix.jx(1),this.Cx.jx(0),this.Tx.jx(0),this.Ex.Wx(0,0),this.Px.Wx(0,0),this.mx.jx(1);for(const l of o){const u=l[0],c=l[2],f=new m.qg.ZM(this,u,c);"color"===c?f.Hx(0,0,0):f.jx(0),this.Ox.push(f)}this.zM?this.Vx(h.Ux):(this.zx(h.Ux,!0),this.Jx(h.qx,!0));const a=h.$x;e.useProgram(a?a.Bb:null)}nn(){this.UM.deleteProgram(this.Bb),this.Bb=null,this.fb.Iw(this),this.UM=null,super.nn()}Xx(){return this.UM}Yx(){return this.Bb}Zx(){return this.Ox.length}Kx(t){return t<0||t>=this.Ox.length?null:this.Ox[t].Qx()}tG(i){for(let t=0,s=i.length;t<s;++t)if(!this.Ox[t].sG(i[t]))return!1;return!0}iG(i){for(let t=0,s=i.length;t<s;++t)this.Ox[t].eG(i[t])}hG(t,s,i,e,h,n,r,o,a,l){return!this.gx.Dx()&&!(this.Gx.Dx()&&!this.Gx.nG(h,n)||this.wx.Dx()&&!this.wx.nG(t.wl(),t.Sl())||this.Sx.Dx()&&!this.Sx.nG(t.bl(),t.vl())||this._x.Dx()&&!this._x.rG(r)||this.Ix.Dx()&&!this.Ix.rG(o)||this.Cx.Dx()&&!this.Cx.rG(a)||this.bx.Dx()&&!this.bx.nG(s.wl(),s.Sl())||this.vx.Dx()&&!this.vx.nG(s.bl(),s.vl())||this.Mx.Dx()&&!this.Mx.nG(i.wl(),i.Sl())||this.xx.Dx()&&!this.xx.nG(i.bl(),i.vl())||this.Ex.Dx()&&!this.Ex.nG(e.wl(),e.Sl())||this.Px.Dx()&&!this.Px.nG(e.Sl(),e.vl())||this.Tx.Dx()&&!this.Tx.rG(l))}oG(t,s,i,e,h,n,r,o,a,l){this.gx.Dx()||(this.Gx.Dx()&&this.Gx.aG(h,n),this.wx.Dx()&&this.wx.aG(t.wl(),t.Sl()),this.Sx.Dx()&&this.Sx.aG(t.bl(),t.vl()),this._x.Dx()&&this._x.lG(r),this.Ix.Dx()&&this.Ix.lG(o),this.Cx.Dx()&&this.Cx.lG(a),this.bx.Dx()&&this.bx.aG(s.wl(),s.Sl()),this.vx.Dx()&&this.vx.aG(s.bl(),s.vl()),this.Mx.Dx()&&this.Mx.aG(i.wl(),i.Sl()),this.xx.Dx()&&this.xx.aG(i.bl(),i.vl()),this.Ex.Dx()&&this.Ex.aG(e.wl(),e.Sl()),this.Px.Dx()&&this.Px.aG(e.Sl(),e.vl()),this.Tx.Dx()&&this.Tx.lG(l))}zx(t,s){this.Lx&&!s||this.zM||(this.YM.Dx()&&this.YM.uG(t),this.Lx=!0)}cG(){this.Lx=!1}Jx(t,s){this.kx&&!s||this.zM||(this.KM.Dx()&&this.KM.uG(t),this.kx=!0)}fG(){this.kx=!1}Vx(t){if(!this.zM)throw new Error("not device transform shader");this.YM.uG(t);const s=this.fb,i=s.Qp()/2,e=s.fm()/2,h=s.Tw(i,e,s.ow(s.fm()),i,e,0,s.fm());this.KM.uG(h)}dG(t){this.QM.Dx()&&this.QM.pG(t[0],t[1],t[2],t[3])}static mG(){return Ii}static gG(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static yG(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static wG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static SG(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static bG(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static vG(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static MG(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static xG(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static GG(t,s,i){let e="";return 2<=t?e="#version 300 es\n":(s&&(e="#extension GL_EXT_frag_depth : enable\n"),i&&(e+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),e+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!i?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static TG(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static _G(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static IG(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static CG(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static EG(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static PG(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static AG(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static FG(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static DG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static OG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static LG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static kG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static NG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const Ci=self.Ds,Ei=self.ys,xh=Ei.vs,Pi=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);Ci.qg.ZM=class{constructor(t,s,i){if(!Pi.has(i))throw new Error("invalid uniform type");this._v=t,this.UM=this._v.Xx(),this.ln=s,this.cf=i,this.BG="color"===this.cf,this.WG=this.UM.getUniformLocation(this._v.Yx(),s),this.jG=!!this.WG;const e=Pi.get(i);this.HG=new Float32Array(e),this.VG=new Float32Array(e)}nn(){this._v=null,this.UM=null,this.WG=null}Dx(){return this.jG}Qx(){return this.cf}UG(){return this.BG}jx(t){this.Dx()&&(this.HG[0]=t,this.VG.set(this.HG),this.UM.uniform1f(this.WG,t))}Bx(t){this.Dx()&&(this.HG[0]=t,this.VG.set(this.HG),this.UM.uniform1i(this.WG,t))}Wx(t,s){this.Dx()&&(this.HG[0]=t,this.HG[1]=s,this.VG.set(this.HG),this.UM.uniform2f(this.WG,t,s))}Hx(t,s,i){this.Dx()&&(this.HG[0]=t,this.HG[1]=s,this.HG[2]=i,this.VG.set(this.HG),this.UM.uniform3f(this.WG,t,s,i))}Nx(t,s,i,e){this.Dx()&&(this.HG[0]=t,this.HG[1]=s,this.HG[2]=i,this.HG[3]=e,this.VG.set(this.HG),this.UM.uniform4f(this.WG,t,s,i,e))}zG(t){t=Math.fround(t);const s=this.HG;s[0]!==t&&(s[0]=t,this.UM.uniform1f(this.WG,t))}JG(t){const s=this.HG;s[0]!==t&&this.UM.uniform1i(this.WG,s[0]=t)}qG(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.HG;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.UM.uniform2f(this.WG,t,s))}$G(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.HG;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.UM.uniform3f(this.WG,t,s,i))}pG(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const h=this.HG;h[0]===t&&h[1]===s&&h[2]===i&&h[3]===e||(h[0]=t,h[1]=s,h[2]=i,h[3]=e,this.UM.uniform4f(this.WG,t,s,i,e))}uG(t){const s=this.HG;xh.B(s,t)||(Ci.Dr(s,t,0),this.UM.uniformMatrix4fv(this.WG,!1,t))}sG(t){const s=this.VG;return this.UG()?s[0]===Math.fround(t.ta())&&s[1]===Math.fround(t.ia())&&s[2]===Math.fround(t.ea()):s[0]===Math.fround(t)}eG(t){const s=this.VG;this.UG()?(s[0]=t.ta(),s[1]=t.ia(),s[2]=t.ea()):s[0]=t}rG(t){return this.VG[0]===Math.fround(t)}nG(t,s){const i=this.VG;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}lG(t){this.VG[0]=t}aG(t,s){const i=this.VG;i[0]=t,i[1]=s}}}{const Ri=self.Ds,Ai=self.ys,Hh=Ai._s,xh=Ai.vs;Ri.qg.XG=class{constructor(t){this.renderer=t,this.qx=xh.create(),this.Ux=xh.create(),this.SM=null,this.bM=null,this.YG=!1,this.ZG=Hh._(1,1,1,1),this.$x=null,this.KG=new Ri.Rect,this.clearColor=Ri.hn(Ri.Wo,0,0,0,0)}},Ri.qg.QG=class{constructor(t){const s=new ArrayBuffer(96);this.cf=0,this.tT=t,this.UM=t.renderer._2(),this.sT=0,this.iT=0,this.eT=null,this.hT=new Float32Array(s,0,16),this.nT=new Float32Array(s,64,4),this.rT=new Float32Array(s,80,4),this.oT=[]}aT(t,s){this.cf=1,this.sT=t,this.iT=s}lT(){const t=this.UM;t.drawElements(t.TRIANGLES,this.iT,t.UNSIGNED_SHORT,this.sT)}uT(t){this.cf=2,this.eT=t}cT(){const t=this.UM,s=this.eT;t.bindTexture(t.TEXTURE_2D,s?s.j2():null)}fT(t){this.cf=3,t.oa(this.nT,0)}dT(){const t=this.nT,s=this.tT;Hh.T(s.ZG,t),s.$x.dG(t)}pT(t){this.cf=21,t.oa(this.nT,0)}mT(){const t=this.nT,s=this.tT.$x;s.ux.Dx()&&s.ux.pG(t[0],t[1],t[2],t[3])}gT(t,s){this.cf=4,this.sT=t,this.iT=s}yT(){this.UM.blendFunc(this.sT,this.iT)}wT(t,s,i,e){this.cf=5;const h=this.nT;h[0]=t,h[1]=s,h[2]=i,h[3]=e}ST(){const t=this.nT;this.UM.viewport(t[0],t[1],t[2],t[3])}bT(t){this.cf=6,xh.T(this.hT,t)}vT(){const t=this.tT,i=t.renderer.Gy,e=t.$x,h=this.hT;for(let t=0,s=i.length;t<s;++t){const n=i[t];n===e?n.zx(h,!0):n.cG()}xh.T(t.Ux,h)}MT(t){this.cf=7,xh.T(this.hT,t)}xT(){const t=this.tT,i=t.renderer.Gy,e=t.$x,h=this.hT;for(let t=0,s=i.length;t<s;++t){const n=i[t];n===e?n.Jx(h,!0):n.fG()}xh.T(t.qx,h)}GT(t){this.cf=8,this.eT=t}TT(){const t=this.UM,s=this.eT,i=this.tT;s?(i.SM=s.vM(),i.bM=s.MM(),i.YG&&i.bM?t.bindFramebuffer(t.FRAMEBUFFER,i.bM):t.bindFramebuffer(t.FRAMEBUFFER,i.SM)):(i.SM=null,i.bM=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}_T(t){this.cf=9,t.oa(this.hT,0)}IT(t,s,i,e){this.cf=9;const h=this.hT;h[0]=t,h[1]=s,h[2]=i,h[3]=e}CT(){const t=this.UM,s=this.hT,i=this.tT,e=i.clearColor,h=s[0],n=s[1],r=s[2],o=s[3];e.ca(h,n,r,o)||(t.clearColor(h,n,r,o),e.zo(h,n,r,o)),t.clear(t.COLOR_BUFFER_BIT)}ET(t){this.cf=15,t.oa(this.hT,0)}PT(){const t=this.hT;this.tT.KG.set(t[0],t[1],t[2],t[3])}RT(t,s){this.cf=10,this.sT=t,this.iT=1,this.hT[0]=s}AT(){const t=this.UM,s=this.tT,i=s.renderer,e=i.Iy,h=(t.useProgram(e.Bb),e.zx(s.Ux,!1),e.Jx(s.qx,!1),s.KG),n=(e.ix.Dx()&&e.ix.qG(h.wl(),h.Sl()),e.hx.Dx()&&e.hx.qG(h.bl(),h.vl()),this.hT[0]);if(e.nx.Dx()&&e.nx.zG(n),e.QM.Dx()){const r=s.ZG;e.QM.pG(r[0],r[1],r[2],r[3])}t.drawArrays(t.POINTS,this.sT/4,this.iT),t.useProgram(s.$x.Bb)}FT(t){this.cf=11,this.eT=t}DT(){const t=this.UM,s=this.tT,i=this.eT;if(s.$x=i,t.useProgram(i.Bb),i.zx(s.Ux,!1),i.Jx(s.qx,!1),i.QM.Dx()){const e=s.ZG;i.QM.pG(e[0],e[1],e[2],e[3])}}OT(){this.cf=12}LT(){const t=this.tT.$x,s=this.UM,i=this.hT,e=this.nT,h=this.rT;if(t.gx.Dx()){const n=this.tT.renderer,r=this.eT;n.kT!==r&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,r?r.j2():null),n.kT=r,s.activeTexture(s.TEXTURE0))}t.Gx.Dx()&&t.Gx.qG(i[0],i[1]),t.wx.Dx()&&t.wx.qG(i[2],i[3]),t.Sx.Dx()&&t.Sx.qG(i[4],i[5]),t._x.Dx()&&t._x.zG(this.iT),t.Ix.Dx()&&t.Ix.zG(i[6]),t.Cx.Dx()&&t.Cx.zG(i[7]),t.bx.Dx()&&t.bx.qG(i[12],i[13]),t.vx.Dx()&&t.vx.qG(i[14],i[15]),t.Mx.Dx()&&t.Mx.qG(h[0],h[1]),t.xx.Dx()&&t.xx.qG(h[2],h[3]),t.Ex.Dx()&&t.Ex.qG(e[0],e[1]),t.Px.Dx()&&t.Px.qG(e[2],e[3]),t.Tx.Dx()&&t.Tx.zG(this.sT)}NT(){this.cf=13}BT(){const t=this.tT.$x,i=t.Ox,e=this.oT;for(let t=0,s=i.length;t<s;++t){const h=i[t],n=e[t];h.UG()?h.$G(n.ta(),n.ia(),n.ea()):h.zG(n)}}WT(t){this.cf=14,this.eT=t}jT(){const t=this.UM,s=this.eT,i=this.tT.SM;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}HT(t,s,i){this.cf=17;const e=this.hT,h=this.tT.renderer,n=(e[0]=t.Qp(),e[1]=t.fm(),e[2]=(s||h).Qp(),e[3]=(s||h).fm(),e[4]=t.TM()?1:0,e[5]="stretch"===i,this.oT);Ri.Lr(n),n.push(t.vM()),n.push(s?s.vM():null)}VT(){const t=this.hT,s=this.oT,i=this.UM,e=t[0],h=t[1],n=t[2],r=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,h,0,0,n,r,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const c=Math.min(e,n),f=Math.min(h,r),d=Math.max(h-r,0),p=Math.max(r-h,0);i.blitFramebuffer(0,d,c,f+d,0,p,c,f+p,i.COLOR_BUFFER_BIT,i.NEAREST)}}UT(t){this.cf=18,this.eT=t}zT(){this.eT.JT(),this.eT=null}qT(t){this.cf=19,this.eT=t}$T(){this.eT.XT(),this.eT=null}YT(t,s,i){this.cf=20;const e=this.hT;e[0]=t,e[1]=s,e[2]=i}ZT(){const t=this.tT.$x,s=this.hT;t.Gx.Dx()&&t.Gx.qG(s[0],s[1]),t.mx.Dx()&&t.mx.zG(s[2])}KT(t,s,i,e,h,n,r){this.cf=16;const o=this.hT;t.oa(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=h/i,o[8]=n/s,o[9]=r/i}QT(){const t=this.tT.$x,s=this.hT;t.bx.Dx()&&t.bx.qG(s[0],s[1]),t.Gx.Dx()&&t.Gx.qG(s[4],s[5]),t.ox.Dx()&&t.ox.qG(s[6],s[7]),t.lx.Dx()&&t.lx.qG(s[8],s[9])}t_(t,s,i,e,h,n,r){this.cf=29;const o=this.hT;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=h,o[5]=n,o[6]=r}s_(){const t=this.tT.$x,s=this.hT;t.Gx.Dx()&&t.Gx.qG(s[0],s[1]),t.ox.Dx()&&t.ox.qG(s[2],s[3]),t.mx.Dx()&&t.mx.zG(s[4]),t.lx.Dx()&&t.lx.qG(s[5],s[6])}i_(t){this.cf=22,this.sT=t?1:0}e_(){const t=this.UM,s=0!==this.sT;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}h_(t){this.cf=23,this.sT=t?1:0}n_(){const t=this.UM;0===this.sT?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}r_(t){this.cf=24,this.sT=t?1:0}o_(){const t=this.UM,s=this.tT,i=s.renderer,e=0!==this.sT;s.YG=e,t.activeTexture(t.TEXTURE2),e?(s.bM&&t.bindFramebuffer(t.FRAMEBUFFER,s.bM),t.bindTexture(t.TEXTURE_2D,i.pM())):(t.bindTexture(t.TEXTURE_2D,null),s.bM&&t.bindFramebuffer(t.FRAMEBUFFER,s.SM)),t.activeTexture(t.TEXTURE0)}a_(){this.cf=25}l_(){const t=this.UM;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}u_(){this.cf=26}c_(){const t=this.UM;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}f_(){this.cf=27}d_(){const t=this.UM;t.disable(t.STENCIL_TEST)}p_(t,s,i,e,h){this.cf=28,this.sT=t?1:0;const n=this.hT;n[0]=s,n[1]=i,n[2]=e,n[3]=h}m_(){const t=this.UM,s=this.hT;1===this.sT?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}g_(){switch(this.cf){case 1:return void this.lT();case 2:return void this.cT();case 3:return void this.dT();case 4:return void this.yT();case 5:return void this.ST();case 6:return void this.vT();case 7:return void this.xT();case 8:return void this.TT();case 9:return void this.CT();case 10:return void this.AT();case 11:return void this.DT();case 12:return void this.LT();case 13:return void this.BT();case 14:return void this.jT();case 15:return void this.PT();case 16:return void this.QT();case 17:return void this.VT();case 18:return void this.zT();case 19:return void this.$T();case 20:return void this.ZT();case 21:return void this.mT();case 22:return void this.e_();case 23:return void this.n_();case 24:return void this.o_();case 25:return void this.l_();case 26:return void this.c_();case 27:return void this.d_();case 28:return void this.m_();case 29:return void this.s_()}}}}{let I=function(t,s,i,e,h,n){s?t.strokeRect(i,e,h,n):t.fillRect(i,e,h,n)},t=function(t){return t*(4/3)},o=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};I,t,o;const Fi=self.Ds,Di=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Oi={timeout:60},Li=new Fi.Wo(0,0,0,1),ki=new Set(["left","center","right"]),Ni=new Set(["top","center","bottom"]),Bi=new Set(["word","cjk","character"]),Wi=new Set(["ltr","rtl"]),ji=new Set;Fi.FontManager&&Fi.FontManager.addEventListener("fontload",t=>{const s=t.font.Jc();for(const i of ji)(i.y_()||Fi.uh(i.w_(),s))&&i.S_()});let s=!1,i=!1;Fi.qg.ub=class{constructor(t,s){s=Object.assign({},Oi,s),this.fb=t,this.b_="Arial",this.v_=16,this.M_=1,this.x_=0,this.G_=!1,this.T_=!1,this.__="black",this.I_=!1,this.$p=null,this.C_=!0,this.E_=null,this.P_=new Set,this.R_="left",this.A_="top",this.if="",this.F_=null,this.D_=Fi.hn(Fi.Jp),this.O_="word",this.L_="ltr",this.k_=!1,this.N_=!1,this.B_=!1,this.W_=-1,this.j_=0,this.H_=0,this.V_=0,this.Wm=0,this.jm=0,this.U_=1,this.z_=null,this.J_=null,this.q_=null,this.X_=null,this.Y_=-1,this.Z_=-1,this.K_="",this.Q_="",this.tI="",this.sI=1,this.iI=1,this.eI=t=>this.hI(t),this.f2=null,this.nI=new Fi.Rect,this.rI=1,this.oI=new Fi.Kf(()=>{this.aI(),this.lI(8,8)},s.timeout),this.uI=null,this.cI=!1,ji.add(this)}nn(){this.E_=null,this.P_.clear(),this.$p=null,this.F_=null,this.z_=null,this.J_=null,this.q_=null,this.X_=null,this.eI=null,this.oI.nn(),this.uI=null,this.aI(),this.D_.Xu(),this.D_=null,this.fb=null,this.cI=!0,ji.delete(this)}fI(){this.B_=!0}dI(){this.fI(),this.N_=!0}S_(){this.dI(),this.k_=!0}pI(t){if(this.I_!==(t=!!t)){this.I_=t;const s=this.I_?"alphabetic":"top";this.J_&&(this.J_.textBaseline=s),this.q_&&(this.q_.textBaseline=s),this.S_()}}y_(){return this.I_}Zp(t){this.$p!==t&&(this.$p=t,this.D_.Zp(t),this.$p&&this.$p.Dg()&&this.$p.Og().then(()=>this.fI()),this.S_())}mI(t){this.C_!==(t=!!t)&&(this.C_=t,this.fI())}gI(t){this.b_!==(t=t||"serif")&&(this.b_=t,this.S_())}w_(){return this.b_}yI(t){this.v_!==(t=t<.1?.1:t)&&(this.v_=t,this.S_())}wI(){return this.v_}SI(t){this.M_!==t&&(this.M_=t,this.S_())}bI(t){this.x_!==t&&(this.x_=t,this.dI())}vI(){return this.x_}MI(t){this.G_!==(t=!!t)&&(this.G_=t,this.S_())}xI(){return this.G_}GI(t){this.T_!==(t=!!t)&&(this.T_=t,this.S_())}TI(){return this.T_}_I(t){t=Math.floor(t),this.W_!==t&&(this.W_=t,this.fI())}II(){return this.W_}CI(t,s){let i=[];(this.G_||s.ig("b"))&&i.push("bold"),(this.T_||s.ig("i"))&&i.push("italic");const e=s.sg("size"),h=(e?parseFloat(e.Bp):this.v_)*this.M_;i.push(t?h+"pt":h*this.EI()+"pt");let n=this.b_,r=s.sg("font");return r&&r.Bp&&(n=r.Bp,this.E_)&&!this.P_.has(n)&&(this.E_(n),this.P_.add(n)),n&&(Di.has(n)?i.push(n):i.push('"'+n+'"')),i.join(" ")}Jb(t){t instanceof Fi.Wo&&(t=t.wa()),this.__!==t&&(this.__=t,this.fI())}RI(t,s,i){Li.Jo(t,s,i),this.Jb(Li)}AI(t){if(!ki.has(t))throw new Error("invalid horizontal alignment");this.R_!==t&&(this.R_=t,this.dI())}FI(){return this.R_}DI(t){if(!Ni.has(t))throw new Error("invalid vertical alignment");this.A_!==t&&(this.A_=t,this.dI())}OI(){return this.A_}LI(t){if(!Bi.has(t))throw new Error("invalid word wrap mode");this.O_!==t&&(this.O_=t,this.S_())}kI(){return this.O_}NI(t){if(!Wi.has(t))throw new Error("invalid text direction");this.L_!==t&&(this.L_=t,this.J_&&(this.J_.direction=this.L_),this.q_&&(this.q_.direction=this.L_),this.S_())}BI(){return this.L_}nf(t){this.if!==t&&(this.if=t,this.S_())}WI(){return this.if}EI(){return this.rI*this.U_*self.devicePixelRatio}jI(n,r,o){if(void 0===o&&(o=1),!(n<=0||this.H_===n&&this.V_===r&&this.U_===o)){let t=this.H_,s=(this.H_=n,this.V_=r,this.U_=o,self.devicePixelRatio),i=(this.Wm=this.H_*this.U_*s,this.jm=this.V_*this.U_*s,Math.max(this.Wm,this.jm)),e=Math.min(this.fb.T2(),4096),h=1;e<i&&(h=e/i,this.Wm=Math.min(this.Wm*h,e),this.jm=Math.min(this.jm*h,e)),this.rI=h,this.H_!==t?this.S_():this.dI()}}Qp(){return this.Wm}fm(){return this.jm}HI(){return this.U_}VI(){return this.UI(),this.D_.Nm()}zI(){return this.UI(),this.D_.Bm()+this.D_.Yp()*(this.x_+4)-this.x_}JI(){this.UI();let t=0;for(const s of this.D_.Xp())for(const i of s.Sm())t+=i.vm();return t}xM(){return this.oI.e0(),this.qI(),this.f2}$I(t,s){this.UI();const i=this.EI(),e=this.D_.Xp();for(const h of e){const n=h.pm()*i;if(s>=h.Km()-h.fm()*i+n&&s<h.Km()+n)for(const r of h.Sm())if(t>=r.Ym()&&t<r.Ym()+r.Qp()*i)return r}return null}*XI(t){this.UI();const s=this.D_.Xp();for(const i of s)for(const e of i.Sm()){const h=e.sg("tag");h&&Fi.uh(h.Bp,t)&&(yield e)}}YI(t,s){for(const i of this.XI(t)){if(0===s)return i;--s}return null}ZI(t){let s=0;for(const i of this.XI(t))++s;return s}qI(){this.f2&&!this.B_&&!this.N_&&!this.k_||this.cI||this.Wm<=0||this.jm<=0||(this.B_=!1,this.KI())}KI(){this.cI||(this.UI(),this.lI(Math.max(Fi.Dn(Math.ceil(this.Wm)),128),Math.max(Fi.Dn(Math.ceil(this.jm)),64)),this.QI(),this.tC(),this.oI.e0())}lI(t,s){this.z_||(this.z_=Fi.Co(16,16));let i=!1;this.Y_===t&&this.Z_===s||(this.Y_=t,this.Z_=s,this.z_.width=t,this.z_.height=s,i=!0),this.J_||(this.J_=this.z_.getContext("2d"),i=!0),i?(this.J_.textBaseline=this.I_?"alphabetic":"top",this.J_.direction=this.L_,this.J_.font=this.K_,this.J_.fillStyle=this.tI,this.J_.strokeStyle=this.tI,this.J_.globalAlpha=this.sI,this.J_.lineWidth=this.iI):this.J_.clearRect(0,0,t,s)}sC(){this.q_||(this.q_=Fi.Co(16,16).getContext("2d"),this.X_=Fi.Co(16,16).getContext("2d"),this.q_.textBaseline=this.I_?"alphabetic":"top",this.X_.textBaseline="top",this.q_.direction=this.L_,this.X_.direction=this.L_)}iC(t){this.Q_!==t&&(this.Q_=t,this.q_.font=t,this.X_.font=t)}eC(){if(!s){s=!0,this.sC();const t=this.q_.measureText("test");i="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return i}UI(){this.hC(),this.nC()}hC(){this.k_&&(this.sC(),!this.I_||this.F_&&this.F_.toString()===this.if||(this.F_=new Fi.Th(this.if,{_p:!0})),this.D_.Jp(this.I_?this.F_.kp():this.if,this.eI,this.H_,this.O_,0),this.k_=!1)}nC(){this.N_&&(this.rC(),this.N_=!1)}hI(t){let s=t.om()?t.Cm().join(""):" ",i=(this.iC(this.CI(!0,t)),t.sg("size")),e=(i?parseFloat(i.Bp):this.v_)*this.M_,h=this.q_.measureText(s),n=0;if(this.I_&&this.eC()){const r=this.X_.measureText(s);n=h.fontBoundingBoxAscent-r.fontBoundingBoxAscent}return{width:h.width,height:4/3*e,fontBoundingBoxAscent:h.fontBoundingBoxAscent||0,fontBoundingBoxDescent:h.fontBoundingBoxDescent||0,rm:n}}oC(t){this.K_!==t&&(this.K_=t,this.J_.font=t)}aC(t){this.tI!==t&&(this.tI=t,this.J_.fillStyle=t,this.J_.strokeStyle=t)}lC(t){this.sI!==t&&(this.sI=t,this.J_.globalAlpha=t)}uC(t){this.iI!==t&&(this.iI=t,this.J_.lineWidth=t)}rC(){let e=this.EI(),h=(4+this.x_)*e,n=0,r=this.D_.Xp();if(0!==r.length){for(const s of r){s.Xm(NaN),s.Zm(NaN);for(const o of s.Sm())o.Xm(NaN),o.Zm(NaN)}let t=this.I_&&this.eC(),i=r[0].fm()*e;if("center"===this.A_){const a=r.reduce((t,s)=>t+s.fm()*e+h,0)-h;n=Math.max(this.jm/2-a/2,0),t&&(i=r[0].gm()*e)}else if("bottom"===this.A_){const l=r.reduce((t,s)=>t+s.fm()*e+h,0)-this.x_*e,u=t?r.at(-1).pm()*e:0;n=this.jm-l-u-2}for(let t=0,s=r.length;t<s;++t){const c=r[t],f=c.fm()*e,d=n;if(this.I_){if(n+=0===t?i:f,0<t&&n>this.jm-4*e)break}else if(0<t&&n>=this.jm-f)break;0<=d&&this.cC(c,n,e),this.I_||(n+=f),n+=h}}}cC(t,s,i){let e=0;"center"===this.R_?e=Math.floor((this.Wm-t.Qp()*i)/2):"right"===this.R_&&(e=this.Wm-t.Qp()*i),t.Xm(e),t.Zm(s);for(const h of"ltr"===this.L_?t.Sm():t.qm())this.fC(h,e,s,i),e+=h.Qp()*i}fC(t,s,i,e){const h=t.sg("offsetx"),n=(s+=h?o(h.Bp,t.fm())*e:0,t.sg("offsety"));if(i+=n?o(n.Bp,t.fm())*e:0,t.lm()){const r=t.sg("iconoffsety");i+=r?o(r.Bp,t.fm())*e:.2*t.fm()*e}t.Xm(s),t.Zm(i)}QI(){this.J_.imageSmoothingEnabled=this.C_,this.J_.imageSmoothingQuality="high",this.j_=0;const t=this.EI(),s=this.D_.Xp();for(const i of s)this.dC(i,t)}dC(t,s){const i=t.Ym(),e=t.Km();if(Number.isFinite(i)&&Number.isFinite(e))for(const h of"ltr"===this.L_?t.Sm():t.qm())this.pC(h,s,t.fm())}pC(r,o,a){const l=this.J_,u=r.Ym(),c=r.Km();if(Number.isFinite(u)&&Number.isFinite(c)){let t=a/16,s=r.Qp()*o,i=r.fm()*o,e=r.fm()/16,h=(4+this.x_)*o,n=r.om()?r.Cm():null;if(-1!==this.W_){if(this.j_>=this.W_)return;r.om()&&this.j_+n.length>this.W_&&(n=n.slice(0,this.W_-this.j_),s=this.hI(r).width*o),this.j_+=r.vm()}const f=r.sg("background"),d=r.ig("u"),p=r.ig("s");if((!r.om()||!Fi.kd(n)||f||d||p)&&!r.ig("hide")){const m=r.sg("color"),g=r.sg("opacity"),y=(this.lC(g?parseFloat(g.Bp)/100:1),f&&(this.aC(f.Bp),l.fillRect(u,c-i,s,i+h)),r.sg("linethickness")),w=y?parseFloat(y.Bp):1,S=r.ig("stroke");if(S&&this.uC(.5*e*w*this.EI()),r.om()){const b=n.join("");if(this.oC(this.CI(!1,r)),!S){this.uC(.5*e*w*this.EI());const v=r.sg("outlineback");v&&(this.aC(v.Bp),this.mC(!0,b,u,c,s))}if(this.aC(m?m.Bp:this.__),this.mC(S,b,u,c,s),!S){this.uC(.5*e*w*this.EI());const M=r.sg("outline");M&&(this.aC(M.Bp),this.mC(!0,b,u,c,s))}}else if(r.lm()&&0<r.Qp()){const x=r.ug(this.$p);x&&l.drawImage(x,u,c-i,s,i)}if(this.aC(m?m.Bp:this.__),d&&I(l,S,u,c+o*t,s,o*t*w),p){const G=c-i/4,T=o*e,_=G+T/2;l.fillRect(u,_-T*w/2,s,T*w)}}}}mC(t,s,i,e,h){"rtl"===this.L_&&(i+=h),t?"Gecko"===Fi.hi.ci?this.J_.strokeText(s,i,e,h):this.J_.strokeText(s,i,e):"Gecko"===Fi.hi.ci?this.J_.fillText(s,i,e,h):this.J_.fillText(s,i,e)}tC(){this.fb.gC()||(this.f2||(this.f2=this.fb.dM(this.z_.width,this.z_.height,{a2:!0,l2:"high"})),this.fb.yC(this.z_,this.f2),this.nI.set(0,0,this.Wm/this.f2.Qp(),this.jm/this.f2.fm()),this.uI&&this.uI())}wC(){return this.nI}aI(){this.f2&&(this.fb.gC()||this.fb.yM(this.f2),this.f2=null)}static qb(){for(const t of ji)t.aI()}static SC(){return ji.values()}}}{const Hi=self.Ds;class Vi{constructor(t){this.UM=t._2(),this.bC=t.I2(),this.vC=t.MC(),this.xC=null,this.i0=!1,this.GC=!1,this.TC=0,1===this.bC?this.xC=this.vC.createQueryEXT():this.xC=this.UM.createQuery()}nn(){this._C(),this.UM=null,this.vC=null,this.GC=!1}_C(){this.xC&&(1===this.bC?this.vC.deleteQueryEXT(this.xC):this.UM.deleteQuery(this.xC),this.xC=null)}JT(){if(this.i0)throw new Error("query already active");1===this.bC?this.vC.beginQueryEXT(this.vC.TIME_ELAPSED_EXT,this.xC):this.UM.beginQuery(this.vC.TIME_ELAPSED_EXT,this.xC),this.i0=!0}XT(){if(!this.i0)throw new Error("query not active");1===this.bC?this.vC.endQueryEXT(this.vC.TIME_ELAPSED_EXT):this.UM.endQuery(this.vC.TIME_ELAPSED_EXT),this.i0=!1}IC(){if(this.xC&&!this.GC&&!this.i0){let t;t=1===this.bC?this.vC.getQueryObjectEXT(this.xC,this.vC.QUERY_RESULT_AVAILABLE_EXT):this.UM.getQueryParameter(this.xC,this.UM.QUERY_RESULT_AVAILABLE);const s=this.UM.getParameter(this.vC.GPU_DISJOINT_EXT);t&&!s&&(1===this.bC?this.TC=this.vC.getQueryObjectEXT(this.xC,this.vC.QUERY_RESULT_EXT):this.TC=this.UM.getQueryParameter(this.xC,this.UM.QUERY_RESULT),this.TC/=1e9,this.GC=!0),(t||s)&&this._C()}}CC(){return this.GC}EC(){if(this.GC)return this.TC;throw new Error("no result available")}}Hi.qg.PC=class{constructor(t){this.fb=t,this.Yy=t.KS(),this.i0=!1,this.RC=null,this.AC=!1,this.FC=null,this.DC=[]}nn(){for(const t of this.DC)t instanceof Vi&&t.nn();Hi.Lr(this.DC),this.RC=null,this.FC=null,this.fb=null}JT(){if(this.i0)throw new Error("query already active");const t=this.fb.OC();0<t.length?(this.AC=!0,this.RC=t.at(-1),this.RC.LC(),this.RC.DC.push(this)):(this.AC=!1,this.RC=null),this.i0=!0,t.push(this),this.kC()}XT(){if(!this.i0)throw new Error("query not active");const t=this.fb.OC().pop();if(t!==this)throw new Error("can only end most nested query");this.i0=!1,this.LC(),this.RC&&(this.RC.kC(),this.RC=null)}kC(){this.FC=Hi.hn(Vi,this.fb),this.DC.push(this.FC),this.FC.JT()}LC(){this.FC.XT(),this.FC=null}IC(){for(const t of this.DC)t.IC()}NC(){return this.AC}CC(){return this.DC.every(t=>t.CC())}EC(){return this.DC.reduce((t,s)=>t+s.EC(),0)}KS(){return this.Yy}}}{const Ui=self.Ds;Ui.qg.BC=class{constructor(t,s=1e3){this.fb=t,this.WC=s,this.jC=[],this.fb.HC(this)}nn(){this.Xu(),this.fb.VC(this),this.fb=null}Xu(){for(const t of this.jC)t.nn();Ui.Lr(this.jC)}UC(){const t=new Ui.qg.PC(this.fb);if(this.jC.push(t),this.jC.length>this.WC){const s=this.jC.shift();s.nn()}return t}zC(t){for(const s of this.jC){if(s.KS()>=t)return;if(s.NC())return;s.IC()}}JC(t,s){if(s<=t)return NaN;let i=0;for(const e of this.jC){if(e.KS()>=s)break;if(!(e.KS()<t)){if(!e.CC())return NaN;i+=e.EC()}}return i}qC(i){for(let t=0,s=this.jC.length;t<s;++t){const e=this.jC[t];if(!(e.KS()<i))return void(0<t&&this.jC.splice(0,t));e.nn()}}}}{let i=function(){h=-1;for(const t of e)t.$C()&&(t.resolve(),e.delete(t));0<e.size&&(h=self.requestAnimationFrame(i))},b=(i,self.Ds),t=self.ys,v=(t.Ts,t._s),y=t.vs,n={powerPreference:"default",XC:!0,alpha:!1,depth:!1,YC:!1,ZC:2,failIfMajorPerformanceCaveat:!1},r=new Set(["default","low-power","high-performance"]),c=new b.$l(0,0,1,0,1,1,0,1),w=y.create(),S=y.create(),M=new b.$l,x=new b.Rect,G=null,e=(b.isDebug&&(self.KC=function(){G?G.loseContext():console.warn("WEBGL_lose_context not supported")},self.QC=function(){G?G.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),h=-1;b.qg.tE=class extends b.qg.gy{constructor(t,s){if(super(s),s=Object.assign({},n,s),!r.has(s.powerPreference))throw new Error("invalid power preference");let i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat},e=null,h=0;if(2<=s.ZC&&(e=t.getContext("webgl2",i),h=2),e||(e=t.getContext("webgl",i),h=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.UM=e,this.sE=e.getContextAttributes(),this.iE=e.getParameter(e.VERSION),this.bC=h,this.eE=v.create(),this.hE=!1,this.nE=y.create(),this.rE=!!s.depth,this.oE=!(!s.depth||!s.YC),this.aE=this.rE,this.lE=!1,this.uE=null,this.cE=!0,this.fE=0,this.dE=0,this.qM=null,this.$M=null,this.pE=null,this.XM=null,this.mE=new Float32Array(8e3*this.XS()),this.gE=new Uint16Array(12e3),this.yE=new Float32Array(16e3),this.wE=new Float32Array(32e3),this.SE=0,this.bE=0,this.vE=0,this.ME=0,this.xE=null,this.GE=null,this.TE=[],this._E=0,this.IE=0,this.CE=null,this.EE=0,this.tT=b.hn(b.qg.XG,this),this.PE=b.hn(b.Wo,1,1,1,1),this.RE=null,this.kT=null,this.AE=0,this.FE=0,this.DE=new b.Rect,this.OE=b.hn(b.Rect,0,0,-1,-1),this.LE=0,this.kE=-1,this.NE=0,this.BE=0,this.WE=0,this.jE="(unavailable)",this.HE="(unavailable)",this.VE=[],this.UE=!1,this.zE=null,this.JE=null,this.qE=null,this.$E=null,this.XE=null,this.YE=null,this.ZE=0,this.KE=!!s.XC,this.vC=null,this.QE=new Set,this.tP=[],this.Qy(this.gE)}hb(){return!0}async hw(){super.hw();const t=this.UM,s=this.XS(),i=(this.PE.zo(1,1,1,1),this.RE=null,this.kT=null,this.SE=0,this.vE=0,this.ME=8e3*s-4*s,b.Lr(this.TE),this._E=0,this.IE=0,this.xE=null,this.CE=null,this.DE.set(0,0,1,1),this.EE=0,this.tT),e=(i.$x=null,i.SM=null,i.bM=null,v.set(i.ZG,1,1,1,1),i.clearColor.zo(0,0,0,0),i.KG.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.AE=t.ONE,this.FE=t.ONE_MINUS_SRC_ALPHA,this.sP(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.rE?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.aE=this.rE,this.lE=!1,this.XM=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.XM),t.bufferData(t.ARRAY_BUFFER,this.wE.byteLength,t.DYNAMIC_DRAW),this.qM=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.qM),t.bufferData(t.ARRAY_BUFFER,this.mE.byteLength,t.DYNAMIC_DRAW),this.$M=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.$M),t.bufferData(t.ARRAY_BUFFER,this.yE.byteLength,t.DYNAMIC_DRAW),this.pE=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.pE),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.gE,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.kE=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),h=(this.NE=e[0],this.BE=e[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),n=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),r=(this.WE=h&&n?Math.min(h.precision,n.precision):0,2048<this.BE&&(this.BE=2048),this.VE=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(r&&(this.jE=t.getParameter(r.UNMASKED_VENDOR_WEBGL),this.HE=t.getParameter(r.UNMASKED_RENDERER_WEBGL)),this.zE=t.getExtension("KHR_parallel_shader_compile"),b.isDebug&&(G=t.getExtension("WEBGL_lose_context")),this.KE&&(1===this.I2()?this.vC=t.getExtension("EXT_disjoint_timer_query"):this.vC=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.JE=t.getExtension("EXT_texture_filter_anisotropic"),this.JE?this.ZE=t.getParameter(this.JE.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.ZE=0,this.I2()<2&&this.rE&&this.oE&&(this.qE=t.getExtension("WEBGL_depth_texture"),!this.qE))throw new Error("no depth texture support");this.I2()<2&&(this.$E=t.getExtension("EXT_frag_depth"),this.XE=t.getExtension("OES_standard_derivatives"),this.YE=t.getExtension("EXT_shader_texture_lod"));let o=b.qg.NM,a=o.gG(!1),l=o.wG(),u=a,c=o.IG(),f=o.TG(),d=o.vG(),p=o.gG(!0),m=!1;this.rE&&(this.I2()<2?this.$E&&(l=o.SG(),c=o.CG(),d=o.MG(),m=!0):(u=o.yG(),l=o.bG(),c=o.EG(),f=o._G(),d=o.xG(),p=o.yG(!0)));const g=o.GG(this.I2(),m,this.XE&&this.YE),y=2<=this.I2()?o.yG():a,w=[[l,u,"<default>"],[l,u,"<default-device-transform>"],[c,f,"<point>"],[o.PG(),a,"<fill>"],[o.AG(),a,"<lineargradient>"],[o.FG(),a,"<penumbra>"],[o.OG(),a,"<hardellipse>"],[o.LG(),a,"<hardellipseoutline>"],[o.kG(),a,"<smoothellipse>"],[o.NG(),a,"<smoothellipseoutline>"],[o.DG(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],S=await Promise.all(w.map(t=>this.iP({src:t[0],WM:t[1],name:t[2]})));this._y=S[0],this.GE=S[1],this.Iy=S[2],this.Py=S[3],this.Ry=S[4],this.Ay=S[5],this.Fy=S[6],this.Dy=S[7],this.Oy=S[8],this.Ly=S[9],this.ky=S[10],this.Cy=S[11],this.Ey=S[12],this.Pw()}async iP(t){const s=await b.qg.NM.VM(this,t);return this._w(s),s}eP(){this.xE=null}jI(t,s,i){if(this.Wm!==t||this.jm!==s||i){this.ZS();const e=this.UM,h=this.tT;this.Wm=t,this.jm=s,this.hP(0,0,t,s),this.bw(this.nE,t/s),this.nP(this.nE),this.GE&&(e.useProgram(this.GE.Yx()),this.GE.Vx(this.Sy),this.xE=this.GE,this.tT.$x=this.GE),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.RE=null,this.kT=null,this.rE&&this.cE&&this.rP(this.Wm,this.jm),this.CE&&this.CE.gM(this.Wm,this.jm),e.bindFramebuffer(e.FRAMEBUFFER,null),this.CE=null,h.SM=null,h.bM=null}}rP(t,s){const i=this.UM;this.uE&&this.fE===t&&this.dE===s||(this.oE?(this.uE&&i.deleteTexture(this.uE),this.uE=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.uE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),2<=this.I2()?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.qE&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.qE.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.uE&&i.deleteRenderbuffer(this.uE),this.uE=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.uE),i.renderbufferStorage(i.RENDERBUFFER,2<=this.bC?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.fE=t,this.dE=s)}oP(t,s){this.rE&&(this.cE=!1,this.rP(t,s))}aP(){this.rE&&(this.cE=!0,this.rP(this.Wm,this.jm))}hP(t,s,i,e){const h=this.eE;if(h[0]!==t||h[1]!==s||h[2]!==i||h[3]!==e){const n=this.lP();n.wT(t,s,i,e),v.set(h,t,s,i,e),this.IE=0}}mw(t){super.mw(t),this.bw(this.nE,this.Wm/this.jm)}cw(t){super.cw(t),this.bw(this.nE,this.Wm/this.jm)}dw(t){super.dw(t),this.bw(this.nE,this.Wm/this.jm)}nP(t){if(!y.B(this.Sy,t)){const s=this.lP();s.bT(t),y.T(this.Sy,t),this.IE=0,this.hE=!0}}uP(){let t,s,i,e=this.CE;i=(null===e?(t=this.nE,s=this.Qp(),this):(t=e.GM(),s=e.Qp(),e)).fm(),this.nP(t),this.hP(0,0,s,i)}cP(t){if(!y.B(this.by,t)){const s=this.lP();s.MT(t),y.T(this.by,t),this.IE=0,this.hE=!0}}fP(){this.hE=!1}dP(){return this.hE}wM(){return this.tT}lP(){const t=this.TE;return this._E===t.length&&t.push(new b.qg.QG(this.tT)),t[this._E++]}ZS(){0===this._E||this.gC()||(this.pP(),this.mP(),this._E=0,this.SE=0,this.bE=0,this.vE=0,this.IE=0)}pP(){const t=this.UM;0<this.vE&&(t.bindBuffer(t.ARRAY_BUFFER,this.XM),t.bufferSubData(t.ARRAY_BUFFER,0,this.wE.subarray(0,this.vE))),0<this.SE&&(t.bindBuffer(t.ARRAY_BUFFER,this.qM),t.bufferSubData(t.ARRAY_BUFFER,0,this.mE.subarray(0,this.SE)),t.bindBuffer(t.ARRAY_BUFFER,this.$M),t.bufferSubData(t.ARRAY_BUFFER,0,this.yE.subarray(0,this.bE)))}mP(){const i=this.TE;for(let t=0,s=this._E;t<s;++t)i[t].g_()}gP(){return this.PE.na()}yP(t,s,i,e){const h=this.PE;if(!h.ca(t,s,i,e)){h.zo(t,s,i,e);const n=this.lP();n.fT(h),this.IE=0,this.By=null}}wP(t){const s=this.PE;if(s.na()!==t){s.Ko(t);const i=this.lP();i.fT(s),this.IE=0,this.By=null}}Jb(t){const s=this.PE;if(!s.equals(t)){s.set(t);const i=this.lP();i.fT(s),this.IE=0,this.By=null}}SP(){this.yP(1,1,1,1)}bP(){return this.PE}vP(t){if(t!==this.RE){const s=this.lP();s.uT(t),this.RE=t,this.IE=0}}R2(){this.RE=null}zb(t){const s=this.eS(t);this.MP(s[0],s[1])}xP(t){const s=this.rS(t);this.MP(s.sS,s.iS)}MP(t,s){if(t!==this.AE||s!==this.FE){const i=this.lP();i.gT(t,s),this.AE=t,this.FE=s,this.IE=0,this.By=null}}GP(){return this.AE===this.UM.ONE&&this.FE===this.UM.ONE_MINUS_SRC_ALPHA}TP(){this.MP(this.UM.ONE,this.UM.ONE_MINUS_SRC_ALPHA)}_P(){this.MP(this.UM.SRC_ALPHA,this.UM.ONE_MINUS_SRC_ALPHA)}IP(){this.MP(this.UM.ONE,this.UM.ZERO)}Rect(t){this.CP(t.wl(),t.Sl(),t.bl(),t.vl())}CP(t,s,i,e){this.$S(t,s,i,s,i,e,t,e)}EP(){let t=this.SE;if(t>=this.ME&&(this.ZS(),t=0),1===this.IE)this.TE[this._E-1].iT+=6;else{const s=this.lP();s.aT(t,6),this.IE=1}}PP(t){t.pu(this.mE,this.SE,this.Hy+this.Vy),this.SE+=12}$l(t){this.EP(),this.PP(t),c.oa(this.yE,this.bE),this.bE+=8}$S(t,s,i,e,h,n,r,o){this.EP();let a=this.mE,l=this.SE,u=this.Hy+this.Vy;a[l++]=t,a[l++]=s,a[l++]=u,a[l++]=i,a[l++]=e,a[l++]=u,a[l++]=h,a[l++]=n,a[l++]=u,a[l++]=r,a[l++]=o,a[l++]=u,this.SE=l,c.oa(this.yE,this.bE),this.bE+=8}vS(t,s){this.EP(),this.PP(t),s.Gl(this.yE,this.bE),this.bE+=8}RP(t,s){this.EP(),this.PP(t),s.oa(this.yE,this.bE),this.bE+=8}AP(t,s,i,e,h,n,r,o,a,l,u,c,f){this.EP();let d=this.mE,p=this.SE,m=this.Hy+this.Vy;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+n,d[p++]=r,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.SE=p,f.Gl(this.yE,this.bE),this.bE+=8}gS(t,s,i,e,h,n,r,o,a,l,u,c,f){this.EP();let d=this.mE,p=this.SE,m=this.Hy+this.Vy;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+n,d[p++]=r,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.SE=p,f.oa(this.yE,this.bE),this.bE+=8}FP(e,h,n){const r=this.mE,o=this.yE;if(n.length%3!=0)throw new Error("invalid index buffer length");for(let i=0,t=n.length;i<t;){const a=n[i++],l=n[i++],u=n[i++],c=3*a,f=3*l,d=3*u,p=2*a,m=2*l,g=2*u;this.EP();let t=this.SE,s=this.bE;r[t++]=e[0+c],r[t++]=e[1+c],r[t++]=e[2+c],r[t++]=e[0+f],r[t++]=e[1+f],r[t++]=e[2+f],r[t++]=e[0+d],r[t++]=e[1+d],r[t++]=e[2+d],r[t++]=e[0+d],r[t++]=e[1+d],r[t++]=e[2+d],o[s++]=h[0+p],o[s++]=h[1+p],o[s++]=h[0+m],o[s++]=h[1+m],o[s++]=h[0+g],o[s++]=h[1+g],o[s++]=h[0+g],o[s++]=h[1+g],this.SE=t,this.bE=s}}DP(t,s){this.uS(0),y.T(w,this.Sy),y.T(S,this.by),this.uP();const[i,e]=this.OP(this.CE),h=this.Tw(0,0,this.ow(e),0,0,0,e);if(this.cP(h),"crop"===t&&this.CE&&s){const n=this.Wm/2,r=this.jm/2,o=s.Qp(),a=s.fm(),l=this.CE.Qp(),u=this.CE.fm(),c=Math.min(l,o),f=Math.min(u,a),d=Math.max(a-u,0),p=Math.max(u-a,0);x.set(-n,r-p,-n+c,r-f-p),M.mu(x),x.set(0,d,c,f+d),x.Tt(o,a),this.vS(M,x)}else{const m=i/2,g=e/2;this.CP(-m,g,m,-g)}this.nP(w),this.cP(S)}LP(t){if(!this.DE.equals(t)){this.DE.T(t);const s=this.lP();s.ET(t),this.IE=0}}kP(){}NP(t,s,i,e){7996<=this.vE&&this.ZS();let h=this.vE,n=this.Hy+this.Vy;if(2===this.IE&&this.EE===n)this.TE[this._E-1].iT++;else{const o=this.lP();o.RT(h,n),this.IE=2,this.EE=n}const r=this.wE;r[h++]=t,r[h++]=s,r[h++]=i,r[h++]=e,this.vE=h}Rw(t){if(this.xE!==t){const s=this.lP();s.FT(t),this.xE=t,this.IE=0,this.By=null}}BP(){return this.xE}WP(){this.Rw(this.GE)}jP(t){const s=this.lP();s.pT(t),this.IE=0}HP(t,s,i=1){const e=this.lP();e.YT(t,s,i),this.IE=0}VP(t,s,i,e,h,n,r){if(this.xE!==this.Cy)throw new Error("must set tilemap fill mode first");const o=this.lP();o.KT(t,s,i,e,h,n,r),this.IE=0}UP(t,s,i,e,h,n,r){if(this.xE!==this.Ey)throw new Error("must set tile randomization mode first");const o=this.lP();o.t_(t,s,i,e,h,n,r),this.IE=0}zP(t,s,i,e,h,n,r,o,a,l,u){const c=this.xE;if(u%=10800,c.Fx&&!c.hG(s,i,e,h,n,r,o,a,l,u)){const f=this.lP(),d=(f.OT(),c.oG(s,i,e,h,n,r,o,a,l,u),f.hT),p=(d[0]=n,d[1]=r,s.oa(d,2),d[6]=a,d[7]=l,i.oa(d,12),f.nT),m=(h.oa(p,0),p[1]);p[1]=p[3],p[3]=m,e.oa(f.rT,0),f.sT=u,f.iT=o,c.gx.Dx()?f.eT=t?t.xM():null:f.eT=null,this.IE=0}}JP(t){const s=this.xE;if(0!==t.length&&!s.tG(t)){const i=this.lP();i.NT(),s.iG(t),b.Wr(i.oT,t),this.IE=0}}qP(t,s,i,e){const h=this.lP();h.IT(t,s,i,e),this.IE=0}Xu(t){const s=this.lP();s._T(t),this.IE=0}$P(){}YS(){super.YS(),this.UM.flush()}XP(){if(this.rE&&this.CE&&this.CE.CM()){const t=this.lP();t.i_(this.aE),this.IE=0}}YP(t){if(this.aE!==(t=!!t)&&this.rE){this.aE=t;const s=this.lP();s.h_(t),this.IE=0}}ZP(){return this.aE}pM(){return this.uE}mM(){return this.oE}KP(t){if(t=!!t,this.oE&&this.lE!==t){if(t&&this.ZP())throw new Error("depth still enabled");this.lE=t;const s=this.lP();s.r_(t),this.IE=0}}QP(t,s,i,e,h=0){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),!this.OE.yl(t,s,i,e)){this.OE.ul(t,s,i,e);const n=h||this.OP(this.tR())[1],r=(s=n-s-e,this.lP());r.p_(!0,t,s,i,e),this.IE=0}}sR(){if(-1!==this.OE.bl()){this.OE.set(0,0,-1,-1);const t=this.lP();t.p_(!1,0,0,0,0),this.IE=0}}iR(){for(const t of this.QE)t.zC(this.Yy)}gC(){return!this.UM||this.UM.isContextLost()||this.UE}qb(){super.rw(),b.qg.c2.qb(),b.qg.K2.qb(),b.qg.ub.qb();for(const t of this.QE)t.Xu();this.VE=[],this.vC=null,this.zE=null,this.JE=null,this.qE=null,this.$E=null,this.XE=null,this.YE=null,this.ZE=0,this.jE="(unavailable)",this.HE="(unavailable)",this.xE=null,this.GE=null,this.uE=null;for(const s of this.Ny.values())s.qb()}async $b(){this.UE=!0,await this.hw(),this.UE=!1;for(const t of this.Ny.values())t.$b(this);this.jI(this.Wm,this.jm,!0)}eR(t,s){if(this.gC())throw new Error("context lost");this.ZS();const i=b.hn(b.qg.c2,this);return i.G2(t,s),i}async hR(e,h){if(this.gC())throw new Error("context lost");if(h=Object.assign({},h),b.Li.ImageBitmapOptions){let t=await createImageBitmap(e,{premultiplyAlpha:"premultiply"}),s=h.i2&&"clamp-to-edge"!==h.i2||h.e2&&"clamp-to-edge"!==h.e2,i=b.Fn(t.width)&&b.Fn(t.height);return this.C2()||i||!s?h.premultiplyAlpha=!1:b.Li.Wi?(t=await createImageBitmap(e,{premultiplyAlpha:"premultiply",resizeWidth:b.Dn(t.width),resizeHeight:b.Dn(t.height)}),h.premultiplyAlpha=!1):t=await createImageBitmap(e,{premultiplyAlpha:"none"}),b.Rf(()=>this.eR(t,h))}if(e instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await b.Io(e);e=t}return b.Rf(()=>this.eR(e,h))}dM(t,s,i){this.ZS();const e=b.hn(b.qg.c2,this);return e.A2(t,s,i),e}yC(t,s,i){this.ZS(),s.N2(t,i)}yM(t){t&&(t.V2(),0<t.U2()||(this.ZS(),t===this.RE&&(this.UM.bindTexture(this.UM.TEXTURE_2D,null),this.RE=null),t===this.kT&&(this.UM.activeTexture(this.UM.TEXTURE1),this.UM.bindTexture(this.UM.TEXTURE_2D,null),this.UM.activeTexture(this.UM.TEXTURE0),this.kT=null),t.B2()))}nR(t){let s=this.Wm,i=this.jm,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height)&&(i=Math.floor(t.height),e=!1),s<=0||i<=0)throw new Error("invalid size");this.ZS();const h=b.hn(b.qg.K2,this);return h.cM(s,i,Object.assign({Y2:e},t)),this.CE=null,this.tT.SM=null,this.tT.bM=null,h}rR(t,s=!0){if(t!==this.CE){t&&t.EM()&&t.gM(this.Wm,this.jm);const i=this.lP();i.GT(t),this.CE=t,this.IE=0,s&&this.uP()}}tR(){return this.CE}OP(t){return t?[t.Qp(),t.fm()]:[this.Wm,this.jm]}oR(t,s="stretch"){if(this.bC<2||this.CE&&0<this.CE.PM())this.IP(),this.SP(),this.aR(t,s);else{const i=this.lP();i.HT(t,this.CE,s),this.IE=0}}aR(t,s="stretch"){const i=t.xM();if(!i)throw new Error("not a texture-backed render target");this.vP(i),this.DP(s,i)}lR(t){if(!(this.bC<2)){const s=this.lP();s.WT(t.vM()),this.IE=0}}uR(t){this.rR(null),this.ZS();const s=t.xM();s===this.RE&&(this.UM.bindTexture(this.UM.TEXTURE_2D,null),this.RE=null),s===this.kT&&(this.UM.activeTexture(this.UM.TEXTURE1),this.UM.bindTexture(this.UM.TEXTURE_2D,null),this.UM.activeTexture(this.UM.TEXTURE0),this.kT=null),t.B2()}async OM(t,s,i){this.ZS();let e=this.CE,h,n,r,o=(r=t?(h=t.Qp(),n=t.fm(),t.vM()):(h=this.Qp(),n=this.fm(),null),0),a=0,l=h,u=n;if(i){o=b.cn(Math.floor(i.wl()),0,h-1),a=b.cn(Math.floor(i.Sl()),0,n-1);let t=i.width(),s=(t=0===t?h-o:b.cn(Math.floor(t),0,h-o),i.height());s=0===s?n-a:b.cn(Math.floor(s),0,n-a),l=t,u=s,a=n-(a+u)}let c=this.UM,f=(c.bindFramebuffer(c.FRAMEBUFFER,r),()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.CE=null,this.tT.SM=null,this.tT.bM=null,this.rR(e)}),d;if(!s&&2<=this.I2()){c.bindFramebuffer(c.READ_FRAMEBUFFER,r);const p=c.createBuffer(),m=l*u*4,g=c.PIXEL_PACK_BUFFER,y=(c.bindBuffer(g,p),c.bufferData(g,m,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(g,null),f(),c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0));await this.HM(()=>c.getSyncParameter(y,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(y),d=new ImageData(l,u),c.bindBuffer(g,p),c.getBufferSubData(g,0,new Uint8Array(d.data.buffer),0,m),c.bindBuffer(g,null),c.deleteBuffer(p)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}cR(){this.YP(!0);const t=this.lP();t.a_(),this.IE=0,this.LE=1}fR(){this.YP(!1);const t=this.lP();t.u_(),this.IE=0,this.LE=2}dR(){return 2===this.LE}pR(){this.YP(!0);const t=this.lP();t.f_(),this.IE=0,this.LE=0}mR(t){if(this.gR()){const s=this.lP();s.UT(t),this.IE=0}}yR(t){if(this.gR()){const s=this.lP();s.qT(t),this.IE=0}}HM(s){const t=new Promise(t=>e.add({resolve:t,$C:s}));return-1===h&&(h=self.requestAnimationFrame(i)),t}nb(){return this.Wm*this.jm*(this.sE.alpha?4:3)}rb(){let t=0;for(const s of b.qg.K2.LM())s.xM()||(t+=s.J2());return t}ob(){let t=0;for(const s of b.qg.c2.q2())t+=s.J2();return t}wR(){return this.iE}I2(){return this.bC}SR(){return"webgl"+this.I2()}C2(){return 2<=this.I2()}T2(){return this.kE}bR(){return this.NE}vR(){return this.BE}MR(){return 0!==this.WE}xR(){return this.WE}GR(){return this.jE}TR(){return this.HE}_R(){if(2<=this.I2())return"webgl2";{const t=[];return this.$E&&t.push("EXT_frag_depth"),this.XE&&t.push("OES_standard_derivatives"),this.YE&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}IR(){return this.VE}gR(){return!!this.vC}MC(){return this.vC}jM(){return this.zE}O2(){return this.JE}L2(){return this.ZE}HC(t){this.QE.add(t)}VC(t){this.QE.delete(t)}OC(){return this.tP}_2(){return this.UM}sP(t){this.tS([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}CR(){return this.lb()}}}{const zi=self.Ds,Ji={ER:null,PR:null,RR:null,getTime:null,AR:null};zi.qg.FR=class{constructor(t){t=Object.assign({},Ji,t),this.DR=t.ER,this.OR=t.PR,this.LR=t.RR,this.kR=t.getTime,this.NR=t.AR,this.BR=null,this.WR=new Set}jR(t){this.WR.add(t)}HR(t){this.WR.delete(t)}qb(){this.BR=null;for(const t of this.WR)t.qb()}VR(t){return this.DR?this.DR(t):[t.Qp(),t.fm()]}tR(t){return this.OR(t)}UR(t,s){this.LR(t,s)}zR(){return this.kR()}Z1(t){this.NR(t)}JR(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.BR||this.BR.Qp()===s&&this.BR.fm()===i||(t.yM(this.BR),this.BR=null),null===this.BR&&(this.BR=t.eR(null,{width:s,height:i,h2:"nearest",a2:!1})),this.BR}}}{const o=self.Ds,qi=self.ys,xh=qi.vs,$i=o.hn(o.Rect),Xi=o.hn(o.Rect),Yi=o.hn(o.Rect),Zi=o.hn(o.Rect),Ki=xh.create(),Qi=xh.create(),te={qR:null,$R:null,YR:null,ZR:!1},se={KR:null,QR:!1,tA:!1,sA:!1,iA:!1,eA:!1,hA:!1};o.qg.nA=class{constructor(t,s){s=Object.assign({},te,s),this.od=t,this.rA=s.qR,this.oA=s.$R,this.aA=s.YR,this.lA=null,this.uA=[],this.cA=[],this.fA=[],this.dA=!1,this.jb=0,this.pA=!1,this.mA=!1,this.gA=!1,this.yA=!1,this.wA=!1,this.SA=!1,this.hE=!1,this.bA=!1,this.vA=!1,this.MA=!1,this.xA=!1,this.GA=!1,this.TA=0,this._A=[null,null,null],this.IA=!!s.ZR,this.CA=0,this.EA=0,this.PA=0,this.RA=0,this.AA=null,this.FA=null,this.DA=o.hn(o.Rect),this.OA=o.hn(o.Rect),this.LA=o.hn(o.Rect),this.kA=o.hn(o.Rect),this.NA=o.hn(o.Rect),this.BA=1,this.WA=1,this.jA=0,this.HA=0,this.VA=null,this.UA=null,this.zA=0,this.JA=0,this.qA=!1,this.oM=xh.create(),this.$A=xh.create(),this.od.jR(this)}nn(){this.od.HR(this),o.Lr(this.fA),o.Lr(this.uA),o.Lr(this.cA),this.AA=null,this.FA=null,this.rA=null,this.oA=null,this.aA=null}qb(){this.dA=!0,o.Lr(this.fA),o.Lr(this.uA),o.Lr(this.cA)}XA(){return this.dA}YA(h,t){if(t=Object.assign({},se,t),o.Lr(this.fA),this.CA=0,this.EA=0,this.pA=!1,this.mA=!1,this.gA=!1,this.yA=!1,this.wA=!1,this.SA=!1,this.TA=0,this.GA=!!t.iA,this.xA=!!t.hA,this.dA=!1,o.Wr(this.uA,h),0!==h.length){if(t.KR){if(t.KR.length!==h.length)throw new Error("incorrect indexMap length");o.Wr(this.cA,t.KR)}else{o.Lr(this.cA);for(let t=0,s=h.length;t<s;++t)this.cA.push(t)}for(const s of h)this.CA+=s.Ib(),this.EA+=s.Cb(),s.Fb()&&(this.pA=!0),s.Ob()&&(this.mA=!0),s.Db()&&(this.gA=!0),s.Eb()&&(this.yA=!0),s.Nb()&&(this.wA=!0);this.SA=this.ZA(h[0].Tb());const n=this.KA(h[0],t),r=this.QA(h.at(-1),t);if(1!==h.length||n||r){this.MA=!1;let e=0;n&&(this.TA=1,this.fA.push(o.hn(o.qg.nA.s3.t3,this,-1,1)),e=1);for(let s=0,i=h.length;s<i;++s)if(0!==s||n){let t=1===e?2:1;s!==i-1||r||(t=0),this.TA=Math.max(this.TA,t),this.fA.push(o.hn(o.qg.nA.s3.i3,this,e,t,s)),e=t}else this.TA=1,this.fA.push(o.hn(o.qg.nA.s3.e3,this,-1,1,s)),e=1;r&&this.fA.push(o.hn(o.qg.nA.s3.h3,this,e,0))}else this.MA=!0}}KA(t,s){return!!(s.QR||t.Pb()||s.sA&&!t.Ab()||t.Ob()&&!this.xA||0!==this.CA||0!==this.EA)||(t.Tb().hb()?t.Db()&&(s.eA||s.iA)||t.Lb()&&s.iA:t.Db()&&!this.SA&&s.eA)}QA(t,s){return!!s.tA||(t.Tb().hb()?t.Db()||t.Eb():(t.Db()||t.Eb())&&this.n3())}ZA(t){return t.Mw()&&this.gA&&!this.yA}r3(t,s,i){t.Mw()&&null===s&&(s=t.GetBackbufferRenderTarget()),this.VA=s,this.AA=i.o3||null,this.FA=i.contextObject||null,this.jb=i.a3||0,this.BA=i.devicePixelRatio||1,this.WA=i.l3||1,this.jA=i.u3||0,this.HA="number"==typeof i.time?i.time:this.od.zR(),this.hE=!1,t.fP(),this.pA&&this.f3();let e=!1;if(this.d3()&&(this.m3(t,i),e=!0,this.UA=this.od.JR(t,this.PA,this.RA),$i.T(this.OA),$i.Wl(),t.Mw()&&t._MaybeDoPendingClearRenderPass(this.VA),t.CopyTextureToTexture(this.VA.xM(),this.UA,$i.wl(),$i.Sl(),$i.width(),$i.height())),this.MA)this.g3(t,i);else if(e||this.m3(t,i),0!==this.LA.width()||0!==this.LA.height()){t.TP(),t.SP(),t.aS(0),t.uS(0),this.lA=i.y3||null,this.zA=i.w3||0,this.JA=i.S3||0,this.qA=!!i.b3,this.v3(t),this._A[0]=s,this._A[1]=1<=this.TA?this.M3():null,this._A[2]=2===this.TA?this.M3():null;for(const h of this.fA){const n=this.x3(h.G3()),r=this.x3(h.T3());t.Mw()?h._3(t,n,r):h.I3(t,n,r)}t.vP(null),this._A[1]&&this.C3(this._A[1]),this._A[2]&&this.C3(this._A[2]),this._A.fill(null),this.E3(t),this.VA=null,this.UA=null,this.AA=null,this.FA=null,this.lA=null}}m3(t,s){const[i,e]=this.od.VR(t);this.P3(t,i,e),this.R3(s)}P3(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.PA===s&&this.RA===i||this.A3(t,s,i,0,0,this.oM,this.$A),this.PA=s,this.RA=i}A3(t,s,i,e,h,n,r){const o=s/2+e,a=i/2+h,l=(t.bw(n,s/i),t.Tw(o,a,t.ow(i),o,a,0,i));xh.T(r,l)}R3(t){this.DA.T(t.F3),t.D3?this.OA.T(t.D3):this.OA.set(0,0,this.PA,this.RA),this.LA.T(this.OA),this.LA.Tt(this.PA,this.RA);const s=this.WA*this.BA;this.OA.Rl(this.CA*s,this.EA*s),this.NA.T(this.OA),this.NA.Tt(this.PA,this.RA),this.OA.jl(0,0,this.PA,this.RA),this.kA.T(this.OA),this.kA.Tt(this.PA,this.RA)}v3(t){if(this.bA=t.ZP(),this.vA=t.dR(),this.xA)t.YP(!1),this.mA&&t.KP(!0);else{if($i.T(this.OA),t.hb()){const s=this.WA*this.BA;$i.Rl(Math.max(this.CA,1)*s,Math.max(this.EA,1)*s),$i.Wl(),$i.cn(0,0,this.PA,this.RA)}else $i.Wl();t.QP($i.wl(),$i.Sl(),$i.width(),$i.height(),this.RA)}}O3(t){t.SP(),this.xA||(this.vA&&t.pR(),t.YP(!1),this.mA&&t.KP(!0)),t.Mw()&&t.SetNormalizedCoordsProgramVariant(!0)}E3(t){t.KP(!1),this.vA&&t.fR(),t.YP(this.bA),this.xA||t.sR(),t.Mw()&&t.SetNormalizedCoordsProgramVariant(!1),this.hE=t.dP()}L3(){this.NA.cn(0,0,1,1)}x3(t){return t<0?null:this._A[t]}M3(){return this.od.tR(this)}N3(){return this.VA}C3(t){this.od.UR(t,this)}B3(t){return this.uA[t]}W3(t){this.lA?this.lA(this,t,()=>this.rA(t,this)):this.rA(t,this),this.MA||this.O3(t)}j3(t){if(this.xA)return!0;if(0!==this.zA||0!==this.JA)return!1;const[s,i]=t.OP(t.tR());return s===this.PA&&i===this.RA}H3(t,s){let i=this.oM,e=this.$A;if(s&&!this.j3(t)){i=Ki,e=Qi;const[h,n]=t.OP(t.tR());this.A3(t,h,n,this.zA,this.JA,i,e),this.xA||t.sR()}t.nP(i),t.cP(e)}f3(){this.od.Z1(this)}V3(t,s){return this.aA(this.cA[t],s)}U3(t,s){let i=this.NA,e=this.kA,h=this.LA;t.hb()&&(Xi.T(i),Xi.Dl(1),i=Xi,Yi.T(e),Yi.Dl(1),e=Yi,Zi.T(h),Zi.Dl(1),h=Zi),this.z3(t,s,e,h,i,1/this.PA,1/this.RA)}J3(t,s){let e=this.kA,h=this.LA,n=1/this.PA,r=1/this.RA;if(this.oA){let{q3:t,X3:s,Y3:i}=this.oA(this.AA);t||($i.set(0,0,0,0),t=$i),s=s||this.PA,i=i||this.RA,e=t,h=t,n=1/s,r=1/i}else t.hb()&&(Yi.T(e),Yi.Dl(1),e=Yi,Zi.T(h),Zi.Dl(1),h=Zi);let i=this.NA;t.hb()&&((i=Xi).T(this.NA),i.Dl(1)),this.z3(t,s,e,h,i,n,r),t.Mw()&&this.wA&&t.SetProgramParameter_IsSrcTexRotated(this.GA)}Z3(t){return this.gA?t.Mw()?this.d3()?this.UA:this.VA.xM():this.VA:null}z3(t,s,i,e,h,n,r){t.zP(this.Z3(t),h,i,e,this.DA,n,r,this.BA,this.WA,this.jA,this.HA),t.JP(this.V3(s,t))}g3(t,s){const i=this.uA[0],e=t.ZP(),h=i.Ob();h&&(t.YP(!1),t.KP(!0),this.NA.set(0,0,1,1),this.LA.set(0,0,1,1)),t.Rw(i),t.zb(this.jb),t.rR(this.VA);let n=0,r=1;if(this.LA.set(0,0,1,1),i.Lb()&&this.oA){const{q3:o,X3:a,Y3:l}=this.oA(this.AA);o&&this.LA.T(o),n=Number.isFinite(a)?1/a:0,r=Number.isFinite(l)?1/l:0}else{const[u,c]=this.od.VR(t);n=1/u,r=1/c}s.F3?this.DA.T(s.F3):this.DA.set(0,0,0,0),t.zP(this.Z3(t),this.NA,this.LA,this.LA,this.DA,n,r,this.BA,this.WA,this.jA,this.HA),t.JP(this.V3(0,t)),t.Mw()&&this.wA&&t.SetProgramParameter_IsSrcTexRotated(this.GA),t.aS(0),this.W3(t),h&&(t.KP(!1),t.YP(e))}d3(){return this.SA}n3(){return!this.SA}K3(){return this.gA}Q3(){return!!this.MA&&!this.d3()}tF(){return this.xA}sF(){return this.AA}iF(){return this.FA}eF(){return this.jb}hF(){return this.qA}dP(){return this.hE}nF(){return this.OA}rF(){return this.kA}oF(){return this.IA}async aF(t,s,i){}}}{const ie=self.Ds;ie.qg.nA.s3=class{constructor(t,s,i,e=-1){this.lF=t,this.uF=s,this.cF=i,this.Wg=e}fF(){return this.lF}G3(){return this.uF}T3(){return this.cF}dF(){return this.Wg}Yx(){return this.fF().B3(this.dF())}I3(t,s,i){}_3(t,s,i){}}}{const ee=self.Ds;ee.qg.nA.s3.t3=class extends ee.qg.nA.s3{constructor(t,s,i,e){super(t,s,i,e)}I3(t,s,i){const e=this.fF();t.TP(),t.Pw(),t.rR(i,e.hF()),t.qP(0,0,0,0),e.W3(t),e.L3()}_3(t,s,i){const e=this.fF();t.TP(),t.Pw(),t.rR(i,!1),t.qP(0,0,0,0),e.W3(t),e.L3()}}}{const he=self.Ds,ne=he.hn(he.Rect),re=he.hn(he.$l);he.qg.nA.s3.h3=class extends he.qg.nA.s3{constructor(t,s,i,e){super(t,s,i,e)}I3(t,s,i){const e=this.fF();t.Pw(),t.rR(i),e.H3(t,!0),t.zb(e.eF()),t.vP(s.xM()),re.mu(e.nF()),ne.T(e.rF()),ne.Dl(1),t.vS(re,ne),e.oF()&&t.lR(s)}_3(t,s,i){const e=this.fF();t.Pw(),t.rR(i,!1),e.j3(t)?re.mu(e.rF()):(t.SetNormalizedCoordsProgramVariant(!1),e.H3(t,!0),re.mu(e.nF())),t.SetBackTexture(null),t.zb(e.eF()),t.vP(s.xM()),e.tF()?t.DP():t.vS(re,e.rF())}}}{const oe=self.Ds;oe.qg.nA.s3.e3=class extends oe.qg.nA.s3{constructor(t,s,i,e){super(t,s,i,e)}I3(t,s,i){const e=this.fF();t.rR(i,e.hF()),t.qP(0,0,0,0),t.IP(),t.Rw(this.Yx()),e.J3(t,this.dF()),e.W3(t),e.L3()}_3(t,s,i){const e=this.fF();t.rR(i,!1),t.qP(0,0,0,0),t.IP(),t.Rw(this.Yx()),e.J3(t,this.dF()),e.W3(t),e.L3()}}}{const ae=self.Ds,le=ae.hn(ae.Rect),ue=ae.hn(ae.$l);ae.qg.nA.s3.i3=class extends ae.qg.nA.s3{constructor(t,s,i,e){super(t,s,i,e)}I3(t,s,i){const e=this.fF(),h=(t.rR(i),0===this.T3());h?t.zb(e.eF()):(t.qP(0,0,0,0),t.IP()),t.Rw(this.Yx()),e.U3(t,this.dF()),t.vP(s.xM()),e.H3(t,h),ue.mu(e.nF()),le.T(e.rF()),le.Dl(1),t.vS(ue,le),e.oF()&&t.lR(s)}_3(t,s,i){const e=this.fF(),h=(t.rR(i,!1),0===this.T3());h?(t.zb(e.eF()),t.SetBackTexture(null),e.j3(t)?ue.mu(e.rF()):(t.SetNormalizedCoordsProgramVariant(!1),e.H3(t,!0),ue.mu(e.nF()))):(t.qP(0,0,0,0),t.IP(),ue.mu(e.rF())),t.Rw(this.Yx()),e.U3(t,this.dF()),t.vP(s.xM()),e.tF()?t.DP():t.vS(ue,e.rF())}}}{let u=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const n=t[1],r=s[1];return n-r},c=(u,self.Ds),f=self.Us,d=null,s=new Set,p=[],m=[],i=!1,t=!1,e=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.pF=class{constructor(t){d=t,Object.defineProperties(this,{mF:{value:d.yF().gF(),writable:!1},wF:{value:d.bF().SF(),writable:!1},vF:{value:{},writable:!1},MF:{value:{},writable:!1},xF:{value:d.GF(),writable:!1},TF:{value:d._F(),writable:!1},IF:{value:new Date(d.CF()),writable:!1},storage:{value:new self.EF(d),writable:!1},isInWorker:{value:d.PF(),writable:!1},RF:{value:d.AF(),writable:!1},FF:{value:d.DF(),writable:!1},h2:{value:d.OF(),writable:!1},LF:{value:d.kF(),writable:!1},NF:{value:new self.BF(t),writable:!1},WF:{value:new self.jF(t),writable:!1}}),d.HF().addEventListener("keydown",t=>{s.has(t.key)?t.stopPropagation():s.add(t.key)}),d.HF().addEventListener("keyup",t=>s.delete(t.key)),d.Lf().addEventListener("window-blur",()=>s.clear()),d.PF()&&(self.alert=t=>(i||(i=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}VF(t){Object.defineProperties(this.vF,t)}UF(t){Object.defineProperties(this.MF,t)}addEventListener(t,s){d.HF().addEventListener(t,s)}removeEventListener(t,s){d.HF().removeEventListener(t,s)}zF(t,...s){f.Se(t);const i=d.JF(),e=i.qF(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.Ju())return e.$F();if(s.length<e.XF())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.XF()} expected)`);let h=e.YF(),n=h.ZF(),r=i.KF();if(r){n=n.slice(0);const a=new Set(n);for(const l of r.ZF())a.has(l)||(n.push(l),a.add(l));for(const u of i.QF())a.has(u)||(n.push(u),a.add(u))}const o=h.tD(n,e.sD(),e.iD(),e.$F(),...s);return o}eD(t){const s=d.nD().hD();if(!s)throw new Error("not in a function which returns a value");switch(s.rD()){case 1:"number"==typeof t&&s.oD(t);break;case 2:"string"==typeof t&&s.oD(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.oD(t)}}signal(t){f.Se(t),d.JF().aD(t)}lD(t){return f.Se(t),d.JF().uD(t)}cD(){return[d.AF(),d.DF()]}get isSuspended(){return d.fD()}get dD(){return d.pD()}get mD(){return d.gD()}get yD(){return d.wD()}get SD(){return d.bD()}get vD(){return d.MD()}set vD(t){f.me(t),d.xD(t)}get fps(){return t||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),t=!0),d.GD()}get framesPerSecond(){return d.GD()}get TD(){return d._D()}get ID(){return d.CD()}get ED(){return d.PD()}get RD(){return d.AD()}set RD(t){if(!e.has(t))throw new Error("invalid framerate mode");d.FD(t)}get DD(){return d.OD()}set DD(t){f.me(t),d.LD(t)}get kD(){return d.ND()}set kD(t){d.BD(t)}get WD(){return d.yF().jD()}get HD(){return d.yF().VD()}random(){return d.UD()}get layout(){const t=d.zD();if(t)return t.JD();throw new Error("no layout is running - make sure a layout is loaded before accessing")}qD(t){let s=d.$D(),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.XD(t))return i.JD();throw new Error("invalid layout")}YD(){return d.$D().ZD().map(t=>t.JD())}KD(t){let s=d.$D(),i;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(i=s.XD(t)))throw new Error("invalid layout");s.QD()||s.tO(i)}get keyboard(){const t=d.sO().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get iO(){const t=d.sO().iO;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get eO(){const t=d.sO().eO;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get hO(){const t=d.sO().hO;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}nO(t,s){f.Se(t),f.Se(s),d.rO(t,s)}oO(t){f.me(t);const s=d.aO(t);return s?s.lO():null}uO(t,e){f.He(e);const h=d.cO();for(const s of t){const i=d.fO(s),n=i.dO();p.push([n.pO().dF(),n.mO()]),m.push(i)}if(0!==p.length){p.sort(u),m.sort((t,s)=>e(t.lO(),s.lO()));let i=!1;for(let t=0,s=p.length;t<s;++t){const r=m[t],o=h.gO(p[t][0]),a=p[t][1],l=o.yO();l[a]!==r&&((l[a]=r).dO().wO(o,!0),o.SO(r),i=!0)}i&&d.bO(),c.Lr(p),c.Lr(m)}}async vO(t,s){const i=new MessageChannel,e=i.port1,h=i.port2;return await d.MO("runtime","script-create-worker",{url:t,opts:s,port2:h},[h]),e}alert(t){return d.MO("runtime","alert",{message:t+(d.PF()?" [via Web Worker]":"")})}xO(t){return f.me(t),d.GO(t)}TO(t){d._O(t)}}}{let s=self.Ds,i=null;self.IO=class{constructor(t){i=t,Object.defineProperties(this,{CO:{value:!0,writable:!1}})}EO(t){const s=self.RO.PO(t);if(!s)throw new Error("invalid IImageInfo");s.AO(i.FO())}DO(t){return i.So(t)}OO(t){return i.bo(t)}LO(t){return i.vo(t)}kO(t){return i.Mo(t)}NO(t){return i.BO(t)}WO(t){return"flat"===i.jO()&&s.mo(t)&&(t=t.toLowerCase()),i.HO(t)}get VO(){return i.UO()}async zO(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}JO(...t){return i.qO(...t)}$O(t){return i.XO(t)}YO(t){return i.ZO(t)}}}{let r=self.Ds,i=self.Us,o=null;self.KO=class{constructor(t){o=t,Object.defineProperties(this,{runtime:{value:o.FO(),writable:!1}})}QO(t,s){const i=o.FO(),e=i.fO(t),h=i.fO(s);return o.tL(e,h)}sL(t,s){const i=o.FO(),e=i.fO(t);for(const h of s){const n=i.fO(h);if(o.tL(e,n))return h}return null}iL(t){const s=o.FO().fO(t),i=o.eL(s);return i?i.lO():null}hL(t,s){if(i.me(t),i.me(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");o.nL(t,s)}rL(){return o.oL()}aL(t,s){let i=o.FO(),e;e=Array.isArray(t)?t.map(t=>i.lL(t)):[i.lL(t)];const h=r.Rect.gl(s),n=[];return o.uL(null,e,h,n),n.map(t=>t.lO())}}}{let s=self.Ds,i=null,e=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),h=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),n=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.BF=class{constructor(t){i=t,Object.defineProperties(this,{cL:{value:s.hi.mi,writable:!1},fL:{value:e.get(s.hi.ni)||"unknown",writable:!1},dL:{value:s.hi.ri,writable:!1},pL:{value:h.get(s.hi.oi)||"unknown",writable:!1},mL:{value:s.hi.ai,writable:!1},gL:{value:n.get(s.hi.ci)||"unknown",writable:!1}})}get exportType(){let t=i.yL();return i.wL()?t="nwjs":i.SL()?t="windows-webview2":"cordova"===t?t="Android"===s.hi.ni?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get renderer(){return i.vL().bL()}get ML(){return i.vL().xL()}get GL(){return i.vL().TL()}get _L(){return i.vL().IL()}get CL(){return i.vL().EL()}get PL(){return i.vL().RL()}get devicePixelRatio(){return i.AL()}}}{const ce=self.Us;self.EF=class{constructor(t){this.FL=t.DL()}getItem(t){return ce.Se(t),this.FL.getItem(t)}setItem(t,s){return ce.Se(t),this.FL.setItem(t,s)}removeItem(t){return ce.Se(t),this.FL.removeItem(t)}clear(){return this.FL.clear()}keys(){return this.FL.keys()}}}{const fe=self.Ds,de=fe.Os();self.OL=class{#LL;constructor(){const t=fe.NL.kL(de);this.#LL=t,Object.defineProperties(this,{runtime:{value:t.FO().BL(),writable:!1},WL:{value:t.jL(),writable:!1},HL:{value:t.VL(),writable:!1},UL:{value:t.zL(),writable:!1},JL:{value:t.qL(),writable:!1},$L:{value:t.XL(),writable:!1},YL:{value:t.ZL(),writable:!1},KL:{value:t.QL(),writable:!1},tk:{value:t.sk(),writable:!1}}),t.FO().ik(this,t)}static ek(t){if(!t)return null;const s=fe.NL.hk(t);return s?s.nk():null}rk(){return this.#LL.lk().ak()}uk(){return this.#LL.ck().lO()}}}{const pe=self.Ds,me=self.Us,ge=pe.Os();self.fk=class{#LL;constructor(){const t=pe.NL.kL(ge);this.#LL=t,Object.defineProperties(this,{name:{value:t.Jc(),writable:!1},runtime:{value:t.FO().BL(),writable:!1},dk:{value:t.pk().nk(),writable:!1}}),t.FO().ik(this,t)}addEventListener(t,s){me.Se(t),me.He(s),this.#LL.HF().addEventListener(t,s)}removeEventListener(t,s){me.Se(t),me.He(s),this.#LL.HF().removeEventListener(t,s)}mk(){return[...this.instances()]}gk(){return pe.first(this.instances())}yk(){return[...this.wk()]}Sk(){return pe.first(this.wk())}bk(t){const s=this.#LL,i=s.FO().vk(t),e=s.Mk(i);return e?e.lO():null}*instances(){for(const t of this.#LL.xk())yield t.lO()}*wk(){for(const t of this.#LL.Tk().Gk())yield t.lO()}_k(t){me.He(t);const s=this.#LL;if(0<s.Ik())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.Ck(t)}Ai(t,s,i,e,h){if(me.le(s),me.le(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const n=this.#LL,r=n.FO(),o=r.zD().pO(t);if(!o)throw new Error("invalid layer");const a=r.Ek(n,o,s,i,e,h),l=(e&&o.Pk(a),r.JF());return l.Rk(!0),a.Ak(),l.Rk(!1),l.Fk()||r.$D().Dk()||r.Ok(),a.lO()}}}{const ye=self.Us,l=new WeakMap,we=["above","below","top-sublayer","bottom-sublayer"];self.Lk=class{constructor(t){l.set(this,t);const s=[],i=t.kk(),e=i.Nk().length;for(let t=0;t<e;++t)s.push(new self.Bk(i,t));Object.defineProperties(this,{name:{value:t.Jc(),writable:!1},index:{value:t.dF(),writable:!1},Wk:{value:s,writable:!1}})}addEventListener(t,s){ye.Se(t),ye.He(s),l.get(this).HF().addEventListener(t,s)}removeEventListener(t,s){ye.Se(t),ye.He(s),l.get(this).HF().removeEventListener(t,s)}get width(){return l.get(this).Qp()}set width(t){ye.me(t),l.get(this).am(t)}get height(){return l.get(this).fm()}set height(t){ye.me(t),l.get(this).tm(t)}jk(t,s){ye.me(t),ye.me(s);const i=l.get(this);i.am(t),i.tm(s)}getSize(){const t=l.get(this);return[t.Qp(),t.fm()]}set scale(t){ye.me(t),l.get(this).Hk(t)}get scale(){return l.get(this).Vk()}set angle(t){ye.me(t),l.get(this).Uk(t)}get angle(){return l.get(this).zk()}set scrollX(t){ye.le(t),l.get(this).Jk(t)}get scrollX(){return l.get(this).qk()}set scrollY(t){ye.le(t),l.get(this).$k(t)}get scrollY(){return l.get(this).Xk()}scrollTo(t,s){ye.le(t),ye.le(s);const i=l.get(this);i.Jk(t),i.$k(s)}Yk(){const t=l.get(this);return[t.qk(),t.Xk()]}Zk(t){let s=l.get(this),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(i=s.pO(t))?i.Kk():null}Qk(){return l.get(this).t5().map(t=>t.Kk())}*s5(){for(const t of l.get(this).s5())yield t.Kk()}i5(t,s,i){const e=l.get(this),h=self.e5,n=(ye.Se(t),ye.Ze(s,h),s?e.FO().h5(s):null),r=we.indexOf(i);if(r<0)throw new Error("invalid location");e.n5(t,n,r)}r5(t,s,i){const e=l.get(this),h=e.FO(),n=self.e5,r=(ye.Ye(t,n),h.h5(t));if(!r)throw new Error("invalid layer");ye.Ze(s,n);const o=s?h.h5(s):null,a=we.indexOf(i);if(a<0)throw new Error("invalid location");e.o5(r,o,a)}a5(t){const s=l.get(this),i=self.e5,e=(ye.Ye(t,i),s.FO().h5(t));if(!e)throw new Error("invalid layer");const h=e.FO();s.l5(e),h.JF().Fk()||h.Ok()}u5(){const t=l.get(this),s=t.FO();t.c5(),s.JF().Fk()||s.Ok()}f5(t,s){ye.me(t),ye.me(s),l.get(this).d5(t,s)}p5(){return l.get(this).m5()}set X(t){ye.Se(t);const s=l.get(this);if("perspective"===t)s.g5();else{if("orthographic"!==t)throw new Error("invalid projection");s.y5()}}get X(){return l.get(this).w5()?"orthographic":"perspective"}}}{const Se=self.Ds,f=self.Us,d=new WeakMap,be=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),ve=new Map([...be.entries()].map(t=>[t[1],t[0]])),Me=Se.hn(Se.Wo);self.e5=class{constructor(t){d.set(this,t);const s=[],i=t.kk(),e=i.Nk().length;for(let t=0;t<e;++t)s.push(new self.Bk(i,t));Object.defineProperties(this,{name:{value:t.Jc(),writable:!1},layout:{value:t.XD().JD(),writable:!1},Wk:{value:s,writable:!1}}),t.FO().ik(this,t)}get S5(){const t=d.get(this).b5();return t?t.Kk():null}*v5(){for(const t of d.get(this).v5())yield t.Kk()}*M5(){for(const t of d.get(this).x5())yield t.Kk()}*G5(){for(const t of d.get(this).x5())for(const s of t.T5())yield s.Kk()}get index(){return d.get(this).dF()}get isVisible(){return d.get(this)._5()}set isVisible(t){d.get(this).I5(t)}get C5(){return d.get(this).E5()}get isInteractive(){return d.get(this).P5()}set isInteractive(t){d.get(this).R5(t)}get A5(){return d.get(this).F5()}set A5(t){d.get(this).D5(!!t)}get O5(){return d.get(this).L5()}get opacity(){return d.get(this).gP()}set opacity(t){t=Se.cn(+t,0,1),isNaN(t)||d.get(this).wP(t)}set scale(t){f.me(t),d.get(this).k5(t)}get scale(){return d.get(this).N5()}set scaleRate(t){f.me(t),d.get(this).B5(t)}get scaleRate(){return d.get(this).W5()}set angle(t){f.me(t),d.get(this).Uk(t)}get angle(){return d.get(this).j5()}set parallaxX(t){f.me(t),d.get(this).H5(t)}get parallaxX(){return d.get(this).V5()}set parallaxY(t){f.me(t),d.get(this).U5(t)}get parallaxY(){return d.get(this).z5()}set J5(t){f.me(t),d.get(this).uv(t)}get J5(){return d.get(this).lv()}set q5(t){d.get(this).X5(t)}get q5(){return d.get(this).Y5()}set Z5(t){d.get(this).K5(t)}get Z5(){return d.get(this).Q5()}set a3(t){f.Se(t);const s=be.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");d.get(this).zb(s)}get a3(){return ve.get(d.get(this).tN())}set backgroundColor(t){if(f.Oe(t),t.length<3)throw new Error("expected 3 elements");Me.Jo(t[0],t[1],t[2]);const s=d.get(this),i=s.sN();i.la(Me)||(i.Qo(Me),s.FO().bO())}get backgroundColor(){const t=d.get(this).sN();return[t.ta(),t.ia(),t.ea()]}set scrollX(t){f.le(t);const s=d.get(this);s.iN(!0),s.Jk(t)}get scrollX(){return d.get(this).qk()}set scrollY(t){f.le(t);const s=d.get(this);s.iN(!0),s.$k(t)}get scrollY(){return d.get(this).Xk()}scrollTo(t,s){f.le(t),f.le(s);const i=d.get(this);i.iN(!0),i.Jk(t),i.$k(s)}Yk(){const t=d.get(this);return[t.qk(),t.Xk()]}eN(){d.get(this).iN(!1)}getViewport(){return d.get(this).hN().Ml()}nN(t,s,i=0){f.le(t),f.le(s),f.le(i);const e=d.get(this),h=e.FO();return e.rN(t-h.oN(),s-h.aN(),i)}lN(t,s,i=0){f.le(t),f.le(s),f.le(i);const e=d.get(this),h=e.FO(),[n,r]=e.uN(t,s,i);return[n+h.oN(),r+h.aN()]}cN(t,s,i=0){return f.le(t),f.le(s),f.le(i),d.get(this).fN(t,s,i)}dN(t,s,i=0){return f.le(t),f.le(s),f.le(i),d.get(this).pN(t,s,i)}get mN(){return d.get(this).gN()}}}{let e=function(t){let s=Te.get(t);return s||(s=xe.hn(xe.Event.Lf),Te.set(t,s)),s};e;const xe=self.Ds,Ge=self.Us,Te=new WeakMap,_e=xe.Os();self.yN=class{#LL;constructor(){const t=xe.NL.kL(_e),s={runtime:{value:(this.#LL=t).FO().BL(),writable:!1},wN:{value:t.SN().ak(),writable:!1},dk:{value:t.pk().nk(),writable:!1}};t.bN(s),t.vN(s),Object.defineProperties(this,s),t.FO().ik(this,t)}static MN(){return xe.NL.xN()}GN(){const t=Te.get(this);t&&(t.nn(),Te.delete(this))}addEventListener(t,s,i){Ge.Se(t),Ge.He(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Ge.Se(t),Ge.He(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}TN(){const t=this.#LL,s=t.FO();s._N(t),s.JF().Fk()||s.$D().Dk()||s.JF().IN()||s.Ok()}CN(){const t=this.#LL.EN();return t?t.map(t=>t.lO()):[]}*PN(){const t=this.#LL;if(t.RN())for(const s of t.AN())yield s.lO()}get uid(){return this.#LL.FN()}get DN(){return this.#LL.ON()}get LN(){return this.#LL.kN()}set vD(t){Ge.me(t),this.#LL.xD(t)}get vD(){return this.#LL.NN()}BN(){this.#LL.WN()}get dD(){const t=this.#LL;return t.FO().pD(t)}jN(...t){Ge.Oe(t);const s=new Set(t),i=this.#LL.HN();return s.isSubsetOf(i)}VN(t){Ge.Ye(t,Set),this.#LL.UN(t)}zN(){return new Set(this.#LL.HN())}signal(t){Ge.Se(t);const s=this.#LL;s.FO().JF().JN(s,t)}lD(t){Ge.Se(t);const s=this.#LL;return s.FO().JF().qN(s,t)}}}{const Ie=self.Ds,Ce=self.Us,Ee=Ie.Os();self.$N=class extends self.yN{#LL;#XN=!1;#YN=null;#ZN=!1;#KN=null;#QN;#t4;constructor(t){super(),this.#LL=Ie.NL.kL(Ee),this.#XN=!1,this.#YN=null,this.#ZN=!1,this.#KN=null,this.#QN=t?.domComponentId,this.#t4=t?.wrapperComponentId}GN(){this.s4(!1),this.i4(!1),super.GN()}e4(){return Ie.NL.h4()}n4(t){const s=this.#LL;s.FO().r4(t,s)}o4(t){const s=this.#LL;return s.FO().a4(t,s)}l4(t,s){if(Ce.Se(t),Ce.He(s),!this.#QN)throw new Error("no DOM component id set");const i=this.#LL.FO();i.u4(this.#QN,t,s)}c4(t){Ce.Oe(t);for(const[s,i]of t)this.l4(s,i)}f4(t,s){if(Ce.Se(t),!this.#QN)throw new Error("no DOM component id set");const i=this.#LL.FO();i.hf(this.#QN,t,s)}d4(t,s){if(Ce.Se(t),!this.#QN)throw new Error("no DOM component id set");const i=this.#LL.FO();return i.MO(this.#QN,t,s)}m4(t,s){const i=this.#LL.FO();if(!i.PF())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#QN,handler:t,data:s,responseId:null});this.f4(t,s)}s4(t){if(this.#XN!==(t=!!t)){this.#XN=t;const s=this.#LL.FO();if(t){if(!this.#YN)if(this.#LL.FO().g4()){const i=globalThis.C3Debugger,e=this.dk;this.#YN=()=>{const t=performance.now();this.y4(),i.AddIndividualPluginTickTime(e,performance.now()-t)}}else this.#YN=()=>this.y4();s.Lf().addEventListener("tick",this.#YN)}else s.Lf().removeEventListener("tick",this.#YN)}}w4(){return this.#XN}y4(){}i4(t){if(this.#ZN!==(t=!!t)){this.#ZN=t;const s=this.#LL.FO();if(t){if(!this.#KN)if(this.#LL.FO().g4()){const i=globalThis.C3Debugger,e=this.dk;this.#KN=()=>{const t=performance.now();this.S4(),i.AddIndividualPluginTickTime(e,performance.now()-t)}}else this.#KN=()=>this.S4();s.Lf().addEventListener("tick2",this.#KN)}else s.Lf().removeEventListener("tick2",this.#KN)}}b4(){return this.#ZN}S4(){}v4(){return[]}M4(){return null}x4(t){}G4(){if(!this.#t4)throw new Error("no wrapper component id set");const t=this.#LL.FO();return t.T4(this.#t4)}_4(t,s){if(Ce.Se(t),Ce.He(s),!this.#t4)throw new Error("no wrapper component id set");const i=this.#LL.FO();i.I4(this.#t4,t,s)}C4(t){Ce.Oe(t);for(const[s,i]of t)this._4(s,i)}E4(t,s){if(!this.#t4)throw new Error("no wrapper component id set");this.runtime.WF.P4(this.#t4,t,s)}R4(t,s){if(this.#t4)return this.runtime.WF.A4(this.#t4,t,s);throw new Error("no wrapper component id set")}}}{let t=function(t){return class h extends t{#F4;#D4;constructor(t){super(t);const s=Pe.NL.kL(De),i=s.dO(),e=(this.#F4=s,this.#D4=i,Fe.set(this,s),[]),h=i.O4();if(h){const r=i.SN().kk().Nk().length;for(let t=0;t<r;++t)e.push(new self.Bk(h,t))}const n={Wk:{value:e,writable:!1}};Object.defineProperties(this,n)}get layout(){return this.#D4.XD().JD()}get L4(){return this.#D4.pO().Kk()}get x(){return this.#D4.hv()}set x(t){t=+t;const s=this.#D4;isNaN(t)||s.hv()===t||(s.nv(t),s.N4())}get y(){return this.#D4.ov()}set y(t){t=+t;const s=this.#D4;isNaN(t)||s.ov()===t||(s.av(t),s.N4())}setPosition(t,s){t=+t,s=+s;const i=this.#D4;isNaN(t)||isNaN(s)||i.hv()===t&&i.ov()===s||(i.B4(t,s),i.N4())}W4(){const t=this.#D4;return[t.hv(),t.ov()]}j4(t,s){if(t=+t,s=+s,!(isNaN(t)||isNaN(s)||0===t&&0===s)){const i=this.#D4;i.H4(t,s),i.N4()}}get J5(){return this.#D4.lv()}set J5(t){t=+t;const s=this.#F4,i=this.#D4;isNaN(t)||i.lv()===t||(i.uv(t),s.FO().bO())}get V4(){return this.#D4.U4()}get width(){return this.#D4.Qp()}set width(t){t=+t;const s=this.#D4;isNaN(t)||s.Qp()===t||(s.am(t),s.N4())}get height(){return this.#D4.fm()}set height(t){t=+t;const s=this.#D4;isNaN(t)||s.fm()===t||(s.tm(t),s.N4())}jk(t,s){t=+t,s=+s;const i=this.#D4;isNaN(t)||isNaN(s)||i.Qp()===t&&i.fm()===s||(i.jI(t,s),i.N4())}getSize(){const t=this.#D4;return[t.Qp(),t.fm()]}get angle(){return this.#D4.zk()}set angle(t){t=Pe.dn(+t);const s=this.#D4;isNaN(t)||s.zk()===t||(s.Uk(t),s.N4())}get z4(){return Pe.mn(this.angle)}set z4(t){this.angle=Pe.pn(t)}wu(){return this.#D4.J4().Ml()}q4(){return this.#D4.X4().fu()}Y4(){return this.#D4.Z4()}get isVisible(){return this.#D4.E5()}set isVisible(t){t=!!t;const s=this.#F4,i=this.#D4;i.E5()!==t&&(i.I5(t),s.FO().bO())}get opacity(){return this.#D4.gP()}set opacity(t){t=Pe.cn(+t,0,1);const s=this.#F4,i=this.#D4;isNaN(t)||i.gP()===t||(i.wP(t),s.FO().bO())}set K4(t){if(Re.Oe(t),t.length<3)throw new Error("expected 3 elements");ke.Jo(t[0],t[1],t[2]);const s=this.#F4,i=this.#D4;i.Q4().la(ke)||(i.tB(ke),s.FO().bO())}get K4(){const t=this.#D4.Q4();return[t.ta(),t.ia(),t.ea()]}set a3(t){Re.Se(t);const s=Oe.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#F4,e=this.#D4;e.zb(s),i.FO().bO()}get a3(){return Le.get(this.#D4.tN())}sB(){this.#D4.iB()}eB(){this.#D4.hB()}nB(t){Re.Ye(t,Ae);const s=this.#F4,i=s.FO().h5(t);if(!i)throw new Error("invalid layer");s.dO().rB(i)}oB(t,s){Re.Ye(t,h),this.#D4.aB(Fe.get(t),s)}get zIndex(){return this.#D4.mO()}get lB(){return this.#D4.uB()}set lB(t){this.#D4.cB(!!t)}Ul(t,s){return Re.le(t),Re.le(s),this.#D4.fB(+t,+s)}QO(t){Re.Ye(t,h);const s=this.#F4,i=Fe.get(t);return s.FO().bF().tL(s,i)}iL(){const t=this.#F4,s=t.FO().bF().eL(t);return s?s.lO():null}getParent(){const t=this.#F4.dB();return t?t.lO():null}pB(){const t=this.#F4.mB();return t?t.lO():null}*gB(){for(const t of this.#F4.gB())yield t.lO()}yB(){return this.#F4.wB()}SB(t){const s=this.#F4.bB(t);return s?s.lO():null}*children(){for(const t of this.#F4.children())yield t.lO()}*vB(){for(const t of this.#F4.vB())yield t.lO()}MB(t,s){Re.Ye(t,h),Re.Ce(s),s=s||{};const i=this.#F4,e=Fe.get(t);i.xB(e,s)}removeChild(t){Re.Ye(t,h);const s=this.#F4,i=Fe.get(t);s.GB(i)}TB(){const t=this.#F4;if(t._B()){const s=t.dB();s.GB(t)}}IB(){const t=this.#D4;return{CB:t.EB(),PB:t.RB(),AB:t.DB(),OB:t.LB(),kB:t.NB(),BB:t.WB(),jB:t.HB(),VB:t.UB(),zB:t.JB()}}qB(t,s){Re.me(t),Re.me(s),this.#D4.$B(t,s)}XB(){const t=this.#D4;t.YB(),t.N4()}ZB(t,s,i){Re.me(t),Re.me(s),Re.Ie(i);const e=this.#D4;e.KB(t,s,i)&&e.N4()}QB(t,s){let i=NaN,e=NaN,h=NaN,n=NaN,r=NaN,o=this.#D4;if(o.t6()){const a=o.s6(),l=a.zv(t,s);null!==l&&(i=l.hv(),e=l.ov(),h=l.lv(),n=l.cv(),r=l.pv())}return{x:i,y:e,J5:h,u:n,v:r}}i6(){const t=this.#D4;if(!t.t6())return[0,0];const s=t.s6();return[s.Dv(),s.Ov()]}}};0;const Pe=self.Ds,Re=self.Us,Ae=self.e5,Fe=new WeakMap,De=Pe.Os(),Oe=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Le=new Map([...Oe.entries()].map(t=>[t[1],t[0]])),ke=Pe.hn(Pe.Wo);self.e6=t(self.yN),self.h6=t(self.$N)}{const Ne=self.Us;self.n6=class extends self.e6{#LL;constructor(){super(),this.#LL=self.yN.MN()}r6(){return this.#LL.a6().o6()}focus(){this.#LL.a6().l6()}blur(){this.#LL.a6().u6()}c6(t,s){Ne.Se(t),this.#LL.a6().f6(t,s)}}}{let e=function(t){let s=je.get(t);return s||(s=Be.hn(Be.Event.Lf),je.set(t,s)),s};e;const Be=self.Ds,We=self.Us,je=new WeakMap,He=Be.Os();self.d6=class{#LL;constructor(){const t=Be.NL.kL(He),s={runtime:{value:(this.#LL=t).FO().BL(),writable:!1},behavior:{value:t.m6().p6(),writable:!1},g6:{value:t.w6().y6(),writable:!1}};Object.defineProperties(this,s),t.FO().ik(this,t)}static MN(){return Be.NL.xN()}get S6(){return this.#LL.b6().lO()}GN(){const t=je.get(this);t&&(t.nn(),je.delete(this))}addEventListener(t,s,i){We.Se(t),We.He(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){We.Se(t),We.He(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}}}{const Ve=self.Ds,Ue=Ve.Os();self.v6=class{constructor(){const t=Ve.NL.kL(Ue),s={runtime:{value:t.FO().BL(),writable:!1},behavior:{value:t.m6().p6(),writable:!1},name:{value:t.Jc(),writable:!1}};Object.defineProperties(this,s)}}}{const ze=self.Ds,Je=ze.Os();self.M6=class{#LL;constructor(){const t=ze.NL.kL(Je),s={runtime:{value:(this.#LL=t).FO().BL(),writable:!1}};Object.defineProperties(this,s),t.FO().ik(this,t)}mk(){return this.#LL.Gk().map(t=>t.lO())}static ek(t){if(!t)return null;const s=ze.NL.x6(t);return s?s.p6():null}}}{const qe=self.Ds,$e=self.Us,Xe=qe.hn(qe.Wo);self.Bk=class{#LL;constructor(t,s){this.#LL=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){const t=this.#LL.Nk();return t[this.index].Jc()}get isActive(){return this.#LL.G6(this.index)}set isActive(t){t=!!t;const s=this.#LL;s.G6(this.index)!==t&&(s.T6(this.index,t),s._6(),s.FO().bO())}setParameter(t,s){$e.me(t),t=Math.floor(+t);const i=this.#LL,e=i.I6(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof qe.Wo){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");Xe.Jo(s[0],s[1],s[2]),s=Xe}else if("number"!=typeof s)throw new TypeError("expected number");const h=i.C6(this.index,t,s);h&&i.G6(this.index)&&i.FO().bO()}getParameter(t){$e.me(t),t=Math.floor(+t);const s=this.#LL,i=s.I6(this.index,t);if(null===i)throw new RangeError("invalid index");return i instanceof qe.Wo?[i.ta(),i.ia(),i.ea()]:i}}}self.E6=class{#LL;constructor(t){this.#LL=t,Object.defineProperties(this,{name:{value:t.Jc(),writable:!1}})}get speed(){return this.#LL.P6()}get R6(){return this.#LL.A6()}get repeatCount(){return this.#LL.F6()}get D6(){return this.#LL.O6()}get L6(){return this.#LL.k6()}get frameCount(){return this.#LL.N6()}B6(){return this.#LL.W6().map(t=>t.j6())}*frames(){for(const t of this.#LL.W6())yield t.j6()}};self.RO=class{#LL;constructor(t){this.#LL=t}static PO(t){return t.#LL}get width(){return this.#LL.Qp()}get height(){return this.#LL.fm()}getSize(){const t=this.#LL;return[t.Qp(),t.fm()]}H6(t){return t.V6(this)}U6(){return this.#LL.wC().Ml()}};{const Ye=self.Us;self.z6=class extends self.RO{#LL;constructor(t){super(t.J6()),this.#LL=t,Object.defineProperties(this,{duration:{value:t.q6(),writable:!1},X6:{value:t.Y6(),writable:!1},Z6:{value:t.K6(),writable:!1}})}Q6(){const t=this.#LL;return[t.Y6(),t.K6()]}tW(){return this.#LL.sW()}iW(t){return this.eW(t)[0]}hW(t){return this.eW(t)[1]}eW(t){let s=this.#LL,i=null;if("number"==typeof t)i=s.nW(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.rW(t)}return i?[i.hv(),i.ov()]:this.Q6()}oW(){const t=this.#LL.aW();return t?t.Du():0}lW(t){return this.uW(t)[0]}cW(t){return this.uW(t)[1]}uW(t){Ye.me(t),t=Math.floor(t);const s=this.#LL.aW();if(!s||t<0||t>=s.Du())return[0,0];const i=s.Fu(),e=i[2*t],h=i[2*t+1];return[e,h]}get tag(){return this.#LL.fW()}}}{let s=function(t){const s=Ke.get(t);if(s.dW())throw new Error("timeline/tween was released and is no longer valid");return s};s;const Ze=self.Us,Ke=new WeakMap;self.pW=class{constructor(t){Ke.set(this,t),t.FO().ik(this,t)}pause(){s(this).mW()}resume(){s(this).gW()}stop(){s(this).e0()}jN(t){return s(this).yW(t)}set time(t){Ze.me(t),s(this).wW(t)}get time(){return s(this).zR()}set totalTime(t){Ze.me(t),s(this).SW(t)}get totalTime(){return s(this).bW()}set R6(t){s(this).vW(!!t)}get R6(){return s(this).MW()}set L6(t){s(this).xW(!!t)}get L6(){return s(this).GW()}set playbackRate(t){Ze.me(t),s(this).TW(t)}get playbackRate(){return s(this)._W()}get progress(){const t=s(this);return t.zR()/t.bW()}get tags(){return s(this).IW()}get finished(){return s(this).EW()}get isPlaying(){return s(this).IsPlaying()}get PW(){return s(this).RW()}get AW(){return Ke.get(this).dW()}}}{let i=new WeakMap;self.FW=class extends self.pW{constructor(t){super(t),i.set(this,t);const s={name:{value:t.Jc(),writable:!1}};Object.defineProperties(this,s)}}}{let i=function(t){const s=h.get(t);if(s.dW())throw new Error("tween was released and is no longer valid");return s},e=(i,self.Us),h=new WeakMap,n=new WeakMap,r=null;self.DW=class extends self.pW{constructor(t,s,i){super(t),r=r||i.easeToIndexFunc,h.set(this,t),s&&n.set(this,s)}stop(){const t=i(this),s=n.get(this);s.ReleaseTween(t)}OW(t){e.Se(t);const s=self.ac.Cc(r(t));i(this).LW(s)}get S6(){const t=i(this).kW();return t?t.lO():null}get NW(){return i(this).BW()}set NW(t){i(this).WW(!!t)}get value(){const t=i(this);if("value"!==t.jW())throw new Error("not a value tween");return t.VW("value").HW()}}}self.UW=class extends self.OL{constructor(){super()}};{const Qe=self.Ds,th=self.Us,sh=Qe.Os();self.zW=class extends self.UW{#LL;#QN;#JW=0;#qW=new Map;constructor(t){if(super(),this.#LL=Qe.NL.kL(sh),!t?.domComponentId)throw new Error("no DOM component ID specified");this.#QN=t.domComponentId,this.$W("elem-focused",t=>t.XW()),this.$W("elem-blurred",t=>{t&&t.YW()})}ZW(t){const s=this.#JW++;return this.#qW.set(s,t),s}KW(t){this.#qW.delete(t)}$W(t,i){const s=this.#LL.FO();s.u4(this.#QN,t,t=>{const s=this.#qW.get(t.elementId);i(s,t)})}QW(t){th.Oe(t);for(const[s,i]of t)this.QW(s,i)}}}{const ih=self.Ds,eh=(new WeakMap,ih.Os());self.tj=class extends self.fk{#LL;constructor(){super(),this.#LL=ih.NL.kL(eh)}sj(){}ij(){return this.#LL.J6().ej()}hj(t){}nj(t){}rj(){}oj(t){}}}{const hh=self.Ds,nh=(new WeakMap,hh.Os());self.aj=class extends self.h6{#LL;#lj=null;#uj=null;constructor(t){super(t),this.#LL=hh.NL.kL(nh)}GN(){if(super.GN(),this.#lj){const t=this.#LL.FO().Lf();t.removeEventListener("renderercontextlost",this.#lj),t.removeEventListener("renderercontextrestored",this.#uj),this.#lj=null,this.#uj=null}}cj(){if(!this.#lj){this.#lj=()=>this.fj(),this.#uj=()=>this.dj();const t=this.#LL.FO().Lf();t.addEventListener("renderercontextlost",this.#lj),t.addEventListener("renderercontextrestored",this.#uj)}}fj(){}dj(){}pj(t){}}}{const rh=self.Ds,oh=rh.hn(rh.Rect),ah=new WeakMap,lh=rh.Os();self.mj=class extends self.aj{#gj=-1;#yj=!0;#wj=!1;#Sj=!1;#bj=-.2;#vj=rh.hn(rh.Rect,0,0,-1,-1);#Mj=0;#xj=0;#Gj=-1;#Tj=-1;#_j=!1;constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const s=rh.NL.kL(lh),i=(ah.set(this,s),this.#gj=this.dk.ZW(this),s.FO().vL());this.#Mj=i.Ij(),this.#xj=i.Cj(),this.s4(!0)}GN(){super.GN(),this.dk.KW(this.#gj),this.Ej("destroy"),this.#gj=-1,ah.delete(this)}Pj(){const t=ah.get(this).FO();if(t.PF())throw new Error("not valid in worker mode");return this.Rj("get-element")}Ej(t,s){(s=s||{}).elementId=this.#gj,this.f4(t,s)}Rj(t,s){return(s=s||{}).elementId=this.#gj,this.m4(t,s)}Aj(t,s){return(s=s||{}).elementId=this.#gj,this.d4(t,s)}Fj(t){t=t||{};const s=ah.get(this).dO();t.elementId=this.#gj,t.isVisible=s.E5(),t.htmlIndex=s.pO().Dj(),t.htmlZIndex=s.Oj(),Object.assign(t,this.Lj()),this.#yj=!!t.isVisible,this.m4("create",t),this.kj(!0)}Nj(t){this.#yj!==(t=!!t)&&(this.#yj=t,this.Ej("set-visible",{isVisible:t}))}y4(){this.kj(!1)}Bj(){const t=ah.get(this).FO(),s=t.vL().Wj();return"Android"===rh.hi.ni&&("scale-inner"===s||"scale-outer"===s||"crop"===s)}kj(u){const c=ah.get(this);if(!c.jj()){let t=c.dO(),s=t.pO(),i=t.J4(),[e,h]=s.uN(i.wl(),i.Sl()),[n,r]=s.uN(i.bl(),i.vl()),o=c.FO().vL(),a=o.TL(),l=o.IL();if(t.E5()&&s.E5())if(!this.Bj()&&(n<=0||r<=0||a<=e||l<=h))this.Nj(!1);else{oh.set(e,h,n,r);const f=o.Ij(),d=o.Cj(),p=s.Dj(),m=t.Oj();if(!u&&oh.equals(this.#vj)&&this.#Mj===f&&this.#xj===d&&this.#Gj===p&&this.#Tj===m)this.Nj(!0);else{this.#vj.T(oh),this.#Mj=f,this.#xj=d,this.#Gj=p,this.#Tj=m,this.Nj(!0);let t=null;this.#Sj&&(t=s.Hj()+this.#bj),this.Ej("update-position",{left:Math.round(this.#vj.wl()),top:Math.round(this.#vj.Sl()),width:Math.round(this.#vj.width()),height:Math.round(this.#vj.height()),htmlIndex:p,htmlZIndex:m,fontSize:t})}}else this.Nj(!1)}}Vj(){this.Rj("focus",{focus:!0})}Uj(){this.Rj("focus",{focus:!1})}XW(){this.#wj=!0}YW(){this.#wj=!1}zj(){return this.#wj}Jj(t,s){this.postToDOMElement("set-css-style",{prop:rh.ko(t),val:s})}qj(t,s){this.postToDOMElement("set-attribute",{name:t,val:s})}$j(t){this.postToDOMElement("remove-attribute",{name:t})}Xj(){this.#_j||(this.#_j=!0,Promise.resolve().then(()=>{this.#_j=!1,this.Ej("update-state",this.Lj())}))}Lj(){}Yj(){return this.#gj}}}self.Zj=class extends self.M6{constructor(){super()}};self.Kj=class extends globalThis.v6{constructor(){super()}sj(){}};{const uh=self.Ds,ch=new WeakMap,fh=uh.Os();self.Qj=class extends self.d6{#XN=!1;#ZN=!1;#t8=!1;constructor(){super(),ch.set(this,uh.NL.kL(fh))}GN(){super.GN(),this.s4(!1),this.i4(!1),this.s8(!1),ch.delete(this)}e4(){return uh.NL.h4()}i8(){}n4(t){const s=ch.get(this);s.FO().r4(t,s.b6(),s.w6())}o4(t){const s=ch.get(this);return s.FO().a4(t,s.b6(),s.w6())}s4(t){if(this.#XN!==(t=!!t)){this.#XN=t;const s=ch.get(this).FO();t?s.e8(this):s.h8(this)}}w4(){return this.#XN}y4(){}i4(t){if(this.#ZN!==(t=!!t)){this.#ZN=t;const s=ch.get(this).FO();t?s.n8(this):s.r8(this)}}b4(){return this.#ZN}S4(){}s8(t){if(this.#t8!==(t=!!t)){this.#t8=t;const s=ch.get(this).FO();t?s.o8(this):s.a8(this)}}l8(){return this.#t8}u8(){}v4(){return[]}M4(){return null}x4(t){}}}{let e=self.Us,h=null;self.jF=class{constructor(t){h=t}TO(t){h._O(t)}P4(t,s,i){e.Se(t),e.Se(s),e.Le(i),h.c8(t,s,i)}A4(t,s,i){return e.Se(t),e.Se(s),e.Le(i),h.f8(t,s,i)}d8(t){return e.ve(t),new self.p8(h,t)}set m8(t){h.g8(!!t)}get m8(){return h.y8()}w8(t){h.S8(!!t)}b8(t){e.le(t);const s=h.v8(t);return s?s.ak():null}}}self.p8=class{#M8;#x8;#G8;#T8;#_8;#I8;constructor(t,s){const i=(this.#M8=t).JF(),e=t.KF(),h=(this.#x8=e,this.#G8=e.C8(),t.nD()),n=(this.#T8=h.E8(),this.#_8=h.P8(e),i.A8()),r=n.P8();this.#I8=r,s&&r.F8(s),t.D8(!1)}O8(){const t=this.#M8.JF(),s=this.#G8,i=this.#I8;t.L8(s),this.#x8.k8(this.#T8,this.#_8),t.N8(s),i.B8(i.dF()+1)}get W8(){return this.#I8.j8()}release(){const t=this.#M8,s=t.nD(),i=t.JF().A8();t.D8(!0),i.H8(),s.H8()}};{let d=self.Ds,h=self.Us,p=null,n=null;self.V8=class{constructor(t,s){n=t,p=s}U8(){p.TP()}z8(t){p.xP(t)}J8(){p.Lw()}q8(){p.Pw()}X8(){p.Vw()}setColor(t){p.yP(t[0],t[1],t[2],t[3])}Y8(t,s,i,e){p.yP(t,s,i,e)}Z8(){p.SP()}K8(t){p.wP(t)}Q8(t){p.uS(t)}tH(){p.cS()}rect(t){p.CP(t.left,t.top,t.right,t.bottom)}sH(t,s,i,e){p.CP(t,s,i,e)}iH(t){p.$l(d.$l.du(t))}eH(t,s,i,e,h,n,r,o){p.$S(t,s,i,e,h,n,r,o)}hH(t,s){p.vS(d.$l.du(t),d.Rect.xl(s))}nH(t,s){p.RP(d.$l.du(t),d.$l.du(s))}rH(t,s,i,e,h,n,r,o,a,l,u,c,f){p.AP(t,s,i,e,h,n,r,o,a,l,u,c,d.Rect.xl(f))}oH(t,s,i,e,h,n,r,o,a,l,u,c,f){p.gS(t,s,i,e,h,n,r,o,a,l,u,c,d.$l.du(f))}aH(t,s,i){p.FP(t,s,i)}lH(t){p.qS(t)}line(t,s,i,e){p.wm(t,s,i,e)}uH(t,s,i,e,h,n){p.yS(t,s,i,e,h,n)}cH(t,s,i,e){p.MS(t,s,i,e)}fH(t){p._S(d.Rect.xl(t))}dH(t){p.IS(d.$l.du(t))}pH(t){p.FS(t)}mH(){p.DS()}gH(t){p.NS(t)}yH(){p.HS()}wH(t){h.Ze(t,self.SH);const s=t?n.h5(t):null;p.vP(s)}bH(t,s){const i=self.RO.PO(t);if(i)return i.vH(p,{i2:s?.i2??"clamp-to-edge",e2:s?.e2??"clamp-to-edge",h2:s?.h2??"trilinear",a2:s?.a2??!0});throw new Error("invalid IImageInfo")}MH(t){const s=self.RO.PO(t);if(!s)throw new Error("invalid IImageInfo");s.aI()}V6(t){const s=self.RO.PO(t);if(!s)throw new Error("invalid IImageInfo");const i=s.xM();return self.SH.xH(n,i)}GH(t,s,i){h.me(t),h.me(s);const e=p.dM(t,s,{i2:i?.i2??"clamp-to-edge",e2:i?.e2??"clamp-to-edge",h2:i?.h2??"trilinear",a2:i?.a2??!0});return self.SH.xH(n,e)}TH(t,s,i){h.Ye(s,self.SH);const e=n.h5(s);p.yC(t,e,{premultiplyAlpha:i?.premultiplyAlpha??!0})}deleteTexture(t){h.Ye(t,self.SH);const s=n.h5(t);p.yM(s)}_H(){const t=p.lb();return new self.IH(n,t)}CH(){n.vL().EH(p)}PH(t){h.Ye(t,globalThis.e5);const s=n.h5(t);s.RH(p)}}}{const dh=new WeakMap,ph=new WeakMap;self.SH=class{constructor(t,s){dh.set(this,{runtime:t,AH:s}),ph.set(s,this),t.ik(this,s),Object.defineProperties(this,{width:{value:s.Qp(),writable:!1},height:{value:s.fm(),writable:!1}})}static xH(t,s){if(!s)return null;const i=ph.get(s);return i||new self.SH(t,s)}}}{let e=function(t){return gh.get(t).FH};e;const mh=self.Us,gh=new WeakMap;self.IH=class{constructor(t,s){gh.set(this,{runtime:t,FH:s}),t.ik(this,s)}release(){e(this).nn()}set DH(t){mh.Se(t),e(this).gI(t)}get DH(){return e(this).w_()}set OH(t){mh.me(t),e(this).yI(t)}get OH(){return e(this).wI()}set lineHeight(t){mh.me(t),e(this).bI(t)}get lineHeight(){return e(this).vI()}set LH(t){e(this).MI(t)}get LH(){return e(this).xI()}set kH(t){e(this).GI(t)}get kH(){return e(this).TI()}setColor(t){mh.Oe(t),this.NH(t[0],t[1],t[2])}NH(t,s,i){e(this).RI(t,s,i)}BH(t){mh.Se(t),e(this).Jb(t)}set WH(t){e(this).AI(t)}get WH(){return e(this).FI()}set verticalAlign(t){e(this).DI(t)}get verticalAlign(){return e(this).OI()}set jH(t){e(this).LI(t)}get jH(){return e(this).kI()}set HH(t){e(this).NI(t)}get HH(){return e(this).BI()}set text(t){mh.Se(t),e(this).nf(t)}get text(){return e(this).WI()}jk(t,s,i){mh.me(t),mh.me(s),mh.me(i),e(this).jI(t,s,i)}H6(){const{runtime:t,FH:s}=gh.get(this),i=s.xM();return self.SH.xH(t,i)}U6(){return e(this).wC().Ml()}VH(t){mh.He(t),e(this).uI=t}UH(){e(this).aI()}get zH(){return e(this).VI()}get JH(){return e(this).zI()}}}{let e=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return wh.get(i)||""},n=function(e){return new Promise((t,s)=>{const i=document.createElement("script");i.onload=t,i.onerror=s,i.async=!1,i.type="module",i.src=e,document.head.appendChild(i)})};e,n;const g=self.Ds,yh=new Set(["local","remote"]),wh=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);g.qH=class extends g.tn{constructor(t,s){super();const i=s.exportType,e=(this.tf=t,this.$H="folders",this.XH=new Map,this.YH="cordova"===i,this.ZH=!!s.isiOSCordova,this.KH=!!s.isFileProtocol,this.QH=s.swClientId,this.tV=s.supportedAudioFormats||{},this.sV=new Map,this.iV=!1,this.eV=s.scriptFolder,this.hV="",this.nV="",this.rV="",this.oV=s.fileMap||new Map,this.aV=new Map,"html5"===i||"scirra-arcade"===i||"instant-games"===i);this.lV=e?"remote":"local",this.uV=new Map,this.cV=[],this.fV=[],this.dV=!1,this.pV=0,this.mV=0,this.gV=0,this.yV=!1,this.wV=g.hn(g.g1,()=>this.SV(),50),this.bV=g.hn(g.n1,Math.max(g.hardwareConcurrency,8)),this.vV=g.hn(g.n1,20),this.MV=new self.IO(this)}nn(){for(const t of this.uV.values())t.nn();this.uV.clear(),g.Lr(this.fV),this.tf=null}FO(){return this.tf}xV(t){this.$H=t}jO(){return this.$H}GV(){return this.eV}TV(t){this.hV=t}UO(){return this.hV}_V(t){this.nV=t}IV(){return this.nV}CV(t){this.rV=t}EV(){return this.rV}PV(){return this.KH}vo(t,s){return s=s||this.lV,g.mo(t)?("flat"===this.$H&&(t=t.toLowerCase()),this.YH&&this.KH?this.RV(t):"playable-ad-single-file"===this.tf.yL()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===s?this.bV:this.vV).nc(()=>g.vo(t))):g.vo(t)}Mo(t){return g.mo(t)?("flat"===this.$H&&(t=t.toLowerCase()),this.YH&&this.KH?this.AV(t):"playable-ad-single-file"===this.tf.yL()?g.Go(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.lV?this.bV:this.vV).nc(()=>g.Mo(t))):g.Mo(t)}So(t){return g.mo(t)?("flat"===this.$H&&(t=t.toLowerCase()),this.YH&&this.KH?this.FV(t):"playable-ad-single-file"===this.tf.yL()?g.To(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.lV?this.bV:this.vV).nc(()=>g.So(t))):g.So(t)}async bo(t){const s=await this.So(t);return JSON.parse(s)}DV(t,s){return"flat"===this.$H&&(t=t.toLowerCase()),this.tf.MO("runtime","cordova-fetch-local-file",{filename:t,as:s})}FV(t){return this.DV(t,"text")}async RV(t){const s=await this.DV(t,"buffer"),i=e(t);return new Blob([s],{type:i})}async OV(t){"flat"===this.$H&&(t=t.toLowerCase());let s=this.XH.get(t);if(!s){const i=await this.RV(t);s=URL.createObjectURL(i),this.XH.set(t,s)}return s}AV(t){return this.DV(t,"buffer")}HO(t){"flat"===this.$H&&(t=t.toLowerCase());let s=this.hV+t;return"Gecko"===g.hi.ci&&"preview"===this.tf.yL()?this.LV(s):s}BO(t){return g.po(t)?Promise.resolve(t):this.YH&&this.KH?this.OV(t):"playable-ad-single-file"===this.tf.yL()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.$H&&(t=t.toLowerCase()),Promise.resolve(t))}kV(s){if(g.po(s)||"preview"!==this.tf.yL()||!this.QH||!s)return s;try{const t=new URL(s,location.href);return t.searchParams.set("__c3_client_id",this.QH),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+s),s}}NV(t){return this.BO(t)}BV(t){if(t.WV&&!yh.has(t.WV))throw new Error("invalid load policy");let s=this.uV.get(t.url);return s||(s=g.hn(g.jV,this,{url:t.url,size:t.size||0,WV:t.WV||this.lV}),this.uV.set(s.HV(),s),this.dV)||(this.pV+=s.Qu(),this.fV.push(s.VV().then(()=>this.UV(s.Qu())))),s}zV(t){this.uV.delete(t.HV())}async JV(){try{await Promise.all(this.fV),this.gV=1}catch(t){console.error("Error loading: ",t),this.yV=!0,this.SV()}}qV(){this.dV=!0}$V(){return this.yV}UV(t){this.mV+=t,this.wV.P1()}SV(){const t=g.hn(g.Event,"loadingprogress");this.gV=g.cn(this.mV/this.pV,0,1),t.progress=this.gV,this.tf.Lf().dispatchEvent(t)}jD(){return this.gV}VD(){return this.tf.YV().XV()}ZV(t){g.Wr(this.cV,t),this.cV.length&&this.fV.push(this.KV())}async KV(){const t=[],s=[];for(const[i,e,h]of this.cV)this.pV+=h,t.push(this.QV(i,e,s).then(()=>this.UV(h)));await Promise.all(t),this.tf.PF()&&0<s.length&&await this.tf.MO("runtime","load-webfonts",{webfonts:s})}async QV(s,i,e){try{let t=await this.BO(i);"Gecko"===g.hi.ci&&(s=`'${s}'`),("Gecko"===g.hi.ci&&"preview"===this.tf.yL()||"playable-ad-single-file"===this.tf.yL())&&(t=this.LV(t));const h=new FontFace(s,`url('${t}')`);(this.tf.PF()?self:document).fonts.add(h),await h.load(),this.tf.PF()&&e.push({name:s,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${s}': `,t)}}t7(t){return!!this.tV[t]}s7(t,s){this.iV=!!s;for(const[i,e,h]of t)this.sV.set(i,{fileName:i,i7:e.map(t=>({type:t[0],e7:t[1],h7:i+t[1],fileSize:t[2]})),n7:h})}r7(t){"flat"===this.$H&&(t=t.toLowerCase());const s=this.sV.get(t);if(!s)return null;let i=null;for(const e of s.i7)if(i||"audio/webm; codecs=opus"!==e.type||(i=e),this.t7(e.type))return e;return i}o7(t){const s=this.r7(t);return s?{url:this.HO(s.h7),type:s.type}:null}a7(){if(this.iV){const t=[];for(const s of this.sV.values())if(!s.n7){const i=this.r7(s.fileName);i&&t.push({l7:s.fileName,url:this.HO(i.h7),type:i.type,fileSize:i.fileSize})}return t}return[]}u7(t){return"preview"===this.tf.yL()&&(t=new URL(t,location.href).toString()),this.oV.get(t)||null}LV(t){let s=this.aV.get(t);if(!s){const i=this.u7(t);if(!i)return t;s=URL.createObjectURL(i),this.aV.set(t,s)}return s}gF(){return this.MV}async qO(...t){const s=await Promise.all(t.map(t=>this.BO(t)));if(this.tf.PF())if(1===t.length){const i=t[0];await import((g.mo(i)?"./":"")+i)}else{const e=t.map(t=>`import "${g.mo(t)?"./":""}${t}";`).join("\n"),h=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));await import(h)}else await Promise.all(s.map(t=>n(t)))}async XO(t){if(WebAssembly.compileStreaming){const s=await this.BO(t);return WebAssembly.compileStreaming(fetch(s))}{const i=await g.Mo(t);return WebAssembly.compile(i)}}async ZO(t){const s=await this.BO(t);return this.tf.MO("runtime","add-stylesheet",{url:s})}}}{const Sh=self.Ds;Sh.c7=class extends Sh.tn{constructor(t,s){super(),this.f7=t,this.tf=t.FO(),this.d7=s.url||"",this.p7=s.size,this.m7=s.WV,this.g7=s.blob||null,this.y7=!!this.g7,this.Pg=null}nn(){this.Pg=null,this.f7=null,this.tf=null,this.g7=null}HV(){return this.d7}Qu(){return this.p7}VV(){return"local"===this.m7||this.g7?(this.y7=!0,Promise.resolve()):(this.Pg||(this.Pg=this.f7.vo(this.d7,this.m7).then(t=>(this.y7=!0,this.Pg=null,this.g7=t)).catch(t=>{console.error("Error loading resource: ",t),this.Pg=null})),this.Pg)}w7(){return this.y7}S7(){return this.g7?Promise.resolve(this.g7):this.Pg||this.f7.vo(this.d7,this.m7)}}}{const bh=self.Ds,ln=new bh.n1,un=new Set;bh.jV=class extends bh.c7{constructor(t,s){super(t,s),this.b7=null,this.v7=null,this.ld=0,this.M7=-1,this.x7=-1,un.add(this)}nn(){if(0!==this.ld)throw new Error("released image asset which still has texture references");this.f7.zV(this),this.b7=null,un.delete(this),super.nn()}static G7(){for(const t of un)t.b7=null,t.v7=null,t.ld=0}vH(t,s){return s=s||{},this.ld++,this.v7?Promise.resolve(this.v7):(this.b7||(s.n2=this.tf.vL().T7(),this.b7=this._7(t,s)),this.b7)}async _7(s,i){try{const e=await this.S7();return 0===this.ld?this.b7=null:await ln.nc(async()=>{const t=await s.hR(e,i);return this.b7=null,0===this.ld?(s.yM(t),null):(this.v7=t,this.M7=t.Qp(),this.x7=t.fm(),this.v7)})}catch(t){throw console.error("Failed to load texture: ",t),t}}aI(){if(this.ld<=0)throw new Error("texture released too many times");if(this.ld--,0===this.ld&&this.v7){const t=this.v7.Tb();t.yM(this.v7),this.v7=null}}I7(){return this.ld}xM(){return this.v7}Qp(){return this.M7}fm(){return this.x7}async C7(){const t=await this.S7();return bh.Li.ImageBitmap?createImageBitmap(t):bh.Io(t)}}}{let t=function(t,s){return t.dO().E7()-s.dO().E7()};t;const cn=self.Ds;cn.P7=class extends cn.tn{constructor(t,s,i){super(),this.R7=t,this.Xa=s,this.Ya=i,this.A7=[],this.F7=!0,this.D7=new Set,this.O7=!1}nn(){cn.Lr(this.A7),this.D7.clear(),this.R7=null}e0(){cn.Lr(this.A7),this.F7=!0,this.D7.clear(),this.O7=!1}L7(){this.F7=!1}Yu(){if(this.A7.length){if(this.A7.length>this.D7.size)return!1;this.k7()}return!0}N7(t){this.D7.has(t)?(this.D7.delete(t),0===this.D7.size&&(this.O7=!1)):(this.A7.push(t),this.F7=1===this.A7.length)}m0(t){this.D7.add(t),this.O7=!0,50<=this.D7.size&&this.k7()}k7(){this.O7&&(this.A7.length===this.D7.size?this.e0():(cn.zr(this.A7,this.D7),this.D7.clear(),this.O7=!1))}B7(){this.F7||(this.A7.sort(t),this.F7=!0)}W7(t){this.k7(),this.B7(),this.A7.length&&t.push(this.A7)}}}{const fn=self.Ds;fn.j7=class extends fn.tn{constructor(t,s){super(),this.H7=t,this.V7=s,this.U7=fn.hn(fn.qu)}nn(){this.U7.nn(),this.U7=null}z7(t,s,i){let e=this.U7.Ks(t,s);return e||(i?(e=fn.hn(fn.P7,this,t,s),this.U7.Set(t,s,e),e):null)}J7(t){return Math.floor(t/this.H7)}q7(t){return Math.floor(t/this.V7)}X7(e,h,n){if(h)for(let i=h.wl(),t=h.bl();i<=t;++i)for(let t=h.Sl(),s=h.vl();t<=s;++t)if(!n||!n.Ul(i,t)){const r=this.z7(i,t,!1);r&&(r.m0(e),r.Yu())&&this.U7.Zu(i,t)}if(n)for(let i=n.wl(),t=n.bl();i<=t;++i)for(let t=n.Sl(),s=n.vl();t<=s;++t)h&&h.Ul(i,t)||this.z7(i,t,!0).N7(e)}Y7(t,s){let i=this.J7(t.wl()),e=this.q7(t.Sl()),h=this.J7(t.bl()),n=this.q7(t.vl());for(;i<=h;++i)for(let t=e;t<=n;++t){const r=this.z7(i,t,!1);r&&r.W7(s)}}Z7(t){let s=t.wl(),i=t.Sl(),e=t.bl(),h=t.vl();for(;s<=e;++s)for(let t=i;t<=h;++t){const n=this.z7(s,t,!1);n&&n.L7()}}}}{let r=function(t,s){return t.dO().E7()-s.dO().E7()},t=function(t,s){return t.dO().lv()-s.dO().lv()};r,t;const S=self.Ds,dn=new S.Rect,pn=new S.$l,mn=[],gn=(new S.Rect,new S.Rect,self.ys),Gh=gn.Ts,Hh=gn._s,xh=gn.vs,yn=xh.create(),wn=Gh.create(),Sn=Hh.create(),bn=Gh.create(),vn=Gh.create(),Mn=Gh.create(),xn=S.hn(S.$a),Gn=(S.hn(S.Rect),[]),Tn=[],_n=[],In={name:"",sid:-1,K7:!1,isVisible:!0,isInteractive:!0,A5:!1,backgroundColor:[1,1,1,1],q5:!0,Q7:[1,1],opacity:1,Z5:!1,tU:!1,sU:!1,iU:!1,scaleRate:1,a3:0,J5:0,eU:[],hU:[],nU:[]};S.rU=class extends S.tn{constructor(t,s,i){super(),i=Object.assign({},In,i),this.oU=t,this.tf=t.FO(),this.aU=s,this.ln=i.name,this.Wg=-1,this.lU=!!i.A5,this.uU=-1,this.cU=i.sid,this.fU=!!i.K7,this.dU=!!i.isVisible,this.pU=!!i.isInteractive,this.mU=S.hn(S.Wo),this.mU.ka(i.backgroundColor),this.gU=!!i.q5,this.yU=i.Q7[0],this.wU=i.Q7[1],this.Hb=S.hn(S.Wo,1,1,1,i.opacity),this.SU=S.hn(S.Wo),this.bU=!!i.Z5,this.vU=!!i.tU,this.MU=!!i.sU,this.xU=!!i.iU,this.GU=i.scaleRate,this.jb=i.a3,this.TU=null,this._U=1,this.Vb=i.J5,this.IU=0,this.CU=0,this.EU=0,this.PU=!1,this.eE=S.hn(S.Rect),this.RU=S.hn(S.Rect),this.AU=S.hn(S.Rect),this.FU=!0,this.oM=xh.create(),this.DU=!0,this.$A=xh.create(),this.OU=!0,this.LU=S.hn(S.qg.Zg),this.kU=!0,this.NU=[],this.BU=i.eU,this.WU=[],this.jU=[],this.HU=new Map,this.A7=[],this.VU=!1,this.UU=!1,this.zU=!1;const h=this.tf.vL();this.JU=S.hn(S.qU,this,i.hU),this.lF=S.hn(S.qg.nA,h.$U(),{qR:(t,s)=>{const i=s.sF(),e=i.tR();t.Jb(i.XU()),t.aR(e),t.lR(e),h.YU(e)},YR:t=>this.kk().ZU(t)}),this.KU=!0,this.QU=!0,this.sz=null,this.iz=[],this.ez=!1,this.hz=S.hn(S.Rect,0,0,-1,-1),this.nz=S.hn(S.Rect,0,0,-1,-1),this.rz=new self.e5(this),this.oz(),this.az()&&(this.sz=S.hn(S.j7,this.tf.AF(),this.tf.DF())),this.lz=i.nU.map(t=>S.rU.uz(this.oU,this,t))}cz(){for(const t of this.BU){const s=this.tf.fz(t[1]);this.oU.dz(s),s.pz()||(s.mz(t),s.gz(this.Wg)),this.WU.push(t),this.HU.set(t[2],t)}S.Wr(this.NU,this.WU),this.BU=null}static uz(t,s,i){return S.hn(S.rU,t,s,{name:i[0],sid:i[2],isVisible:i[3],isInteractive:i[13],A5:i[19],backgroundColor:i[4].map(t=>t/255),q5:i[5],Q7:[i[6],i[7]],opacity:i[8],Z5:i[9],tU:i[17],sU:i[18],iU:i[10],scaleRate:i[11],a3:i[12],J5:i[16],eU:i[14],hU:i[15],nU:i[20]})}nn(){for(const t of this.lz)t.nn();S.Lr(this.lz);for(const s of this.A7)this.tf._N(s);S.Lr(this.A7),this.JU.nn(),this.JU=null,this.lF.nn(),this.lF=null,this.rz=null,this.aU=null,this.oU=null,this.tf=null}yz(t){return this.HU.get(t)}wz(h){let n=this.oU.Sz(),r=0,o=this.WU;for(let e=0,t=o.length;e<t;++e){let t=o[e],s=this.tf.fz(t[1]),i=!0;if(!s.bz()||n){const a=this.tf.vz(t,this,!0);h.push(a),s.Mz()&&(i=!1,this.jU.push(a.FN()))}i&&(o[r]=o[e],++r)}S.Or(o,r),this.tf.Ok(),this.SO()}xz(t,s){if(!t.pk().VL())throw new Error("instance is not of world type");const i=t.dO();if(i.pO()!==this)throw new Error("instance added to wrong layer");this.A7.push(t),0!==i.lv()&&(this.zU=!0),s&&this.az()&&t.dO().N4(),this.SO(t)}Gz(t){this.A7.includes(t)||(this.A7.push(t),0!==t.dO().lv()&&(this.zU=!0),this.SO(t))}Tz(t,s){const i=t.dO();if(i.pO()!==this)throw new Error("instance added to wrong layer");this.A7.unshift(t),0!==i.lv()&&(this.zU=!0),this.SO(t),s&&this.az()&&t.dO().N4()}_z(t,s){const i=this.A7.indexOf(t);i<0||(s&&this.az()&&t.dO().Iz(),this.A7.splice(i,1),this.SO(t),this.Cz())}Ez(){this.zU=!0}Cz(){0===this.A7.length&&(this.zU=!1)}Pz(t){if(t){const s=new Set;for(const i of this.A7){const e=i.dO().E7();0<=e&&s.add(e)}let t=-1;for(const h of this.A7){const n=h.dO();if(!(0<=n.E7())){for(++t;s.has(t);)++t;n.Rz(t)}}}this.A7.sort(r)}Az(){}Fz(){for(const t of this.A7)t.SN().Mz()||this.tf._N(t);this.tf.Ok(),S.Lr(this.A7),this.zU=!1,this.SO()}Dz(s,t,i,e,h,n){const r=this.tf.JF(),o=this.tf.Oz(),a=s.Lz(),l=[];for(const u of this.WU){const c=u[0],f=c[0],d=c[1];if(t.Ul(f,d)){const p=o[u[1]];if(p!==s){if(!a)continue;if(!s.kz(p))continue}let t=h;if(!t){const y=this.tf.cO();t=this.XD()===y?this:(t=y.Nz(this.Jc()))||y.gO(this.dF())}const m=this.tf.vz(u,t,!1,void 0,void 0,!1,n),g=(t.Pk(m),m.dO());g.H4(i,e),g.N4(),r.Rk(!0),m.Ak(),r.Rk(!1),l.push(m)}}return l}Ik(){return this.A7.length}XD(){return this.oU}Jc(){return this.ln}Bz(t){this.Wg=t}dF(){return this.Wg}Wz(t){this.uU=t}Dj(){return this.uU}F5(){return this.lU}D5(t){this.lU!==(t=!!t)&&(this.lU=t,this.oU.jz(),this.tf.bO())}Vz(){let t=this.b5();return(t?t.x5():this.XD().Uz()).indexOf(this)}zz(){return this.cU}FO(){return this.tf}Jz(){return this.fU}qz(){for(const t of this.v5())if(t.Jz())return!0;return!1}AL(){return this.tf.AL()}kk(){return this.JU}fF(){return this.$z(),this.lF}$z(){const t=this.Xz();if(this.KU||t!==this.QU||this.lF.XA()){const s=this.kk().Yz();this.lF.YA(s.map(t=>t.Yx()),{KR:s.map(t=>t.dF()),QR:!t,hA:!0}),this.KU=!1,this.QU=t}}_6(){this.kk()._6(),this.KU=!0}az(){return this.xU&&!this.MU}Zz(){return this.sz}Kz(){this.ez=!1}E5(){for(const t of this.Qz())if(!t._5())return!1;return!0}_5(){return this.dU}I5(t){this.dU!==(t=!!t)&&(this.dU=t,this.tf.bO())}R5(t){this.pU=!!t}P5(){return this.pU}L5(){for(const t of this.Qz())if(!t.P5())return!1;return!0}iN(t){if(this.PU!==(t=!!t)){if(this.PU=t){const s=this.XD();this.CU=s.qk(),this.EU=s.Xk()}this.tJ(),this.tf.bO()}}sJ(){return this.PU}Jk(t){const s=this.XD(),i=s.iJ(),e=s.eJ();this.CU!==(t=(t=e<t?e:t)<i?i:t)&&(this.CU=t,this.sJ())&&(this.tJ(),this.tf.bO())}$k(t){const s=this.XD(),i=s.hJ(),e=s.nJ();this.EU!==(t=(t=e<t?e:t)<i?i:t)&&(this.EU=t,this.sJ())&&(this.tJ(),this.tf.bO())}qk(){return this.sJ()?this.CU:this.XD().qk()}Xk(){return this.sJ()?this.EU:this.XD().Xk()}hN(){return this.rJ(),this.eE}oJ(){return this.rJ(),this.RU}aJ(){return this.rJ(),this.AU}m5(){const t=this.XD();return[t.lJ(),t.uJ()]}ow(t){return this.tf.ow(t)}cJ(c,e){const h=this.oJ();if(0===c)e.T(h);else{let o=h._l(),a=h.Il(),t=this.fJ(c),s=h.width()/t,i=h.height()/t,[l,u]=this.m5();if(.5!==l||.5!==u){let t=this.dJ(),s=this.tf,i=this.ow()/t,e=(l-.5)*s.pJ()/i,h=(u-.5)*s.mJ()/i,n=this.zk(),r=(0!==n&&(xn.set(e,h),xn.rotate(n),e=xn.Qa(),h=xn.sl()),S.Cn(t,0,c));o+=S.Ft(e,0,r),a+=S.Ft(h,0,r)}e.set(o-s/2,a-i/2,o+s/2,a+i/2)}}gP(){return this.Hb.na()}wP(t){t=S.cn(t,0,1),this.Hb.na()!==t&&(this.Hb.Ko(t),this.oz(),this.tf.bO())}oz(){this.SU.T(this.Hb),this.SU.ma()}XU(){return this.SU}Xz(){return this.Hb.ca(1,1,1,1)}W5(){return this.GU}B5(t){this.GU!==t&&(this.GU=t,this.tJ(),this.tf.bO())}V5(){return this.yU}z5(){return this.wU}gJ(t,s){this.yU===t&&this.wU===s||(this.yU=t,this.wU=s,this.tJ(),this.tf.bO())}H5(t){this.gJ(t,this.z5())}U5(t){this.gJ(this.V5(),t)}uv(t){this.Vb!==t&&(this.Vb=t,this.tf.bO())}lv(){return this.Vb}Uk(t){t=S.dn(t),this.IU!==t&&(this.IU=t,this.tJ(),this.tf.bO())}zk(){return S.dn(this.oU.zk()+this.IU)}j5(){return this.IU}yJ(){return 0<this.A7.length}yO(){return this.A7}wJ(){return this.SJ()&&this.MU?(S.Wr(_n,this.yO()),_n.sort((t,s)=>this.bJ(t,s)),_n):this.yO()}vJ(t){S.zh(t,this.wJ());for(const s of this.lz)s.E5()&&0<s.gP()&&s.vJ(t)}bJ(t,s){const i=this.XD().MJ(),e=i[0],h=i[1],n=i[2],r=t.dO(),o=s.dO(),a=r.hv()-e,l=r.ov()-h,u=r.lv()-n,c=o.hv()-e,f=o.ov()-h,d=o.lv()-n;return c*c+f*f+d*d-(a*a+l*l+u*u)}sN(){return this.mU}Y5(){return this.gU}X5(t){this.gU!==(t=!!t)&&(this.gU=t,this.tf.bO())}Q5(){return this.bU}K5(t){this.bU!==(t=!!t)&&(this.bU=t,this.tf.bO())}xJ(){return!this.FO().GJ()||!this.vU}SJ(){return!this.xJ()}TJ(){return this.SJ()&&this.XD()._J()}IJ(){if(!this.TJ())return!1;for(const t of this.lz)if(!t.IJ())return!1;return!0}zb(t){this.jb!==t&&(this.jb=t,this.tf.bO())}tN(){return this.jb}CJ(){return!this.aU}b5(){return this.aU}EJ(t){this.aU=t}x5(){return this.lz}PJ(){return 0<this.lz.length}RJ(t,s=!0){s?this.lz.push(t):this.lz.unshift(t)}AJ(t,s,i){let e=this.lz.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.lz.splice(e,0,t)}FJ(t){const s=this.lz.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.lz.splice(s,1)}DJ(){for(const t of this.lz)if(t.OJ())return!0;return!1}*T5(){for(const t of this.lz)yield*t.T5();yield this}*v5(){let t=this.b5();for(;t;)yield t,t=t.b5()}*Qz(){yield this,yield*this.v5()}LJ(t){for(const s of this.v5())if(s===t)return!0;return!1}kJ(t){return this===t||this.yU===t.yU&&this.wU===t.wU&&this._U===t._U&&this.GU===t.GU&&this.IU===t.IU&&this.qk()===t.qk()&&this.Xk()===t.Xk()}NJ(){return{parallaxX:this.V5(),parallaxY:this.z5(),scale:this.N5(),scaleRate:this.W5(),angle:this.j5(),hasOwnScroll:this.sJ(),scrollX:this.qk(),scrollY:this.Xk()}}BJ(t){this.gJ(t.parallaxX,t.parallaxY),this.k5(t.scale),this.B5(t.scaleRate),this.Uk(t.angle),this.iN(t.hasOwnScroll),this.Jk(t.scrollX),this.$k(t.scrollY),this.rJ()}WJ(t){if(0!==t.size){const s=S.zr(this.A7,t);0<s&&(this.Cz(),this.SO())}}SO(t){this.VU=!1,this.ez=!1,t&&!t.SN().pk().zL()||(this.UU=!1)}jJ(){if(!this.VU){if(this.A7.sort(t),this.az())for(let t=0,s=this.A7.length;t<s;++t){const i=this.A7[t].dO();i.Rz(t),this.sz.Z7(i.HJ())}else for(let t=0,s=this.A7.length;t<s;++t)this.A7[t].dO().Rz(t);this.VU=!0}}VJ(){if(!this.UU){let t=this.oU.UJ(this.Dj()),s=t.map(t=>[...t.T5()]).flat(),i=0;for(const e of s){for(const h of e.yO())h.SN().pk().zL()&&h.dO().zJ(i++);e.JJ()}}}JJ(){this.UU=!0}qJ(){return{isVisible:this.E5(),opacity:this.gP(),isInteractive:this.P5()}}$J(t,s,i){const e=t.dO(),h=s.dO();if(e.pO()!==this||h.pO()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let n=e.mO(),r=h.mO();return n!==r+(i?1:-1)&&(S.jr(this.A7,n),n<r&&r--,i&&r++,r===this.A7.length?this.A7.push(t):this.A7.splice(r,0,t),this.SO(t),!0)}XJ(t,s){let i=[],e=0,h=0,n=t.length,r=s.length;for(;e<n&&h<r;){const o=t[e],a=s[h];o.dO().E7()<a.dO().E7()?(i.push(o),++e):(i.push(a),++h)}for(;e<n;++e)i.push(t[e]);for(;h<r;++h)i.push(s[h]);return i}YJ(s){const i=[],e=s.length;for(let t=0;t<e-1;t+=2){const h=s[t],n=s[t+1];i.push(this.XJ(h,n))}return e%2==1&&i.push(s[e-1]),i}ZJ(t){for(;1<t.length;)t=this.YJ(t);return t[0]}KJ(){return this.jJ(),S.Lr(mn),this.sz.Y7(this.hN(),mn),mn.length?1===mn.length?mn[0]:this.ZJ(mn):[]}OJ(){return this.E5()&&0<this.gP()&&this.QJ()}QJ(){if(this.yJ()||!this.Y5())return!0;for(const t of this.lz)if(t.QJ())return!0;return!1}t9(){return this.Q5()||!this.Xz()||0!==this.tN()||this.JU.s9()}i9(){if(this.t9())return!0;for(const t of this.lz)if(t.i9())return!0;return!1}tR(){return this.TU}fJ(t){if(this.oU.w5())return 1;{const s=this.e9();return s/(s-t)}}h9(t){const s=this.tf.gN();if(this.oU.w5())return s;{const i=this.e9(),e=this.ow();return e/Math.abs(i-t)*s}}tJ(){this.OU=!0,this.kU=!0,this.FU=!0}n9(t){return this.OU&&(this.r9(t,this.$A,0,0,null),this.OU=!1),this.$A}dJ(t){return this.ow(t)/this.o9()}e9(){return this.TJ()?this.XD().MJ()[2]:this.dJ()}a9(){if(this.TJ()){const t=this.XD().MJ();return[t[0],t[1],t[2]]}return this.l9()}l9(t=0,s=0,h=0){let n=this.tf,i=this.XD(),e=n.u9(),r=n.c9(),o=(this.qk()-e)*this.yU+e,a=(this.Xk()-r)*this.wU+r,l=(n.kF()&&(o=Math.round(o),a=Math.round(a)),o+t),u=a+s,c=i.w5()?this.ow(h):this.dJ(h),[f,d]=this.m5();if(.5!==f||.5!==d){let t=this.ow(h)/c,s=(f-.5)*n.pJ()/t,i=(d-.5)*n.mJ()/t,e=this.zk();0!==e&&(xn.set(s,i),xn.rotate(e),s=xn.Qa(),i=xn.sl()),l+=s,u+=i}return[l,u,c]}r9(t,s,i,e,h){const n=this.tf,r=this.XD();if(this.TJ()){Gh.T(bn,r.MJ()),Gh.T(vn,r.f9()),Gh.T(Mn,r.d9());const o=n.u9(),a=n.c9(),l=vn[0]-bn[0],u=vn[1]-bn[1],c=vn[2]-bn[2];bn[0]=(bn[0]-o)*this.yU+o,bn[1]=(bn[1]-a)*this.wU+a,bn[2]*=Math.max(this.yU,this.wU),vn[0]=bn[0]+l,vn[1]=bn[1]+u,vn[2]=bn[2]+c}else{const[f,d,p]=this.l9(i,e,h),m=(Gh.set(bn,f,d,p),Gh.set(vn,f,d,p-100),this.zk());0===m?Gh.set(Mn,0,1,0):Gh.set(Mn,Math.sin(m),Math.cos(m),0)}t.Gw(s,bn,vn,Mn,h||n.mJ())}p9(){this.DU=!0,this.kU=!0,this.FU=!0}m9(t){return this.DU&&(this.g9(t),this.DU=!1),this.oM}g9(t){const s=this.tf.vL(),[i,e]=this.m5();if(this.oU.w5())t.xw(this.oM,s.y9(),s.w9());else if(.5===i&&.5===e)xh.T(this.oM,s.S9());else{const h=s.y9(),n=s.w9();t.bw(this.oM,h/n,i,e)}}RH(t,s=!0,i=0,e=0,h=0){s&&t.nP(this.m9(t));let n;n=0===i&&0===e&&0===h?this.n9(t):(this.r9(t,yn,i,e,h),yn),t.cP(n)}b9(t){this.RH(t),t.aS(this.lv())}v9(t){let s=null;if(t.hb()&&this.tf.M9()){const i=this.tf.vL().x9(this);i&&(s=i.UC(),t.mR(s))}return s}G9(t){if(t.Mw()&&this.tf.M9()){const s=2*(this.dF()+1);t.StartMeasuringRenderPassTime(s,1+s)}}qv(t,s,i){let e=this.tf.vL(),h=this.t9(),n=null,r=this.v9(t);if(this.G9(t),h){const o={h2:this.tf.OF(),X2:!0,T9:!!t.Mw()&&this.tf._9()};"low"===e.I9()&&(o.width=e.y9(),o.height=e.w9()),n=this.tf.C9(o),this.TU=n,t.rR(n),this.Y5()&&t.qP(0,0,0,0)}else this.TU=s,t.rR(s);if(this.Y5()||t.Xu(this.mU),this.oU.E9(t,this.TU,this.lz,h&&this.Y5()),this.G9(t),this.RH(t),t.aS(this.lv()),t.YP(this.SJ()),this.o9()>Number.EPSILON){this.jJ();const a=this.az()&&0===this.lv()&&!this.zU;this.TJ()?this.P9(t):a?this.R9(t):this.A9(t,this.wJ())}t.aS(0),t.uS(0),h&&(t.YP(!1),this.F9(t,n,s,i)),r&&t.yR(r),this.TU=null}A9(i,e){let h=this.hN(),n=this.TU,r=this.XD().w5(),o=this.XD().D9(),a=null;for(let t=0,s=e.length;t<s;++t){const l=e[t];if(l!==a){const u=(a=l).dO();u.E5()&&u.O9(h,o,r)&&this.L9(l,u,i,n)}}}P9(e){const h=this.TU,n=this.k9(),r=Gn,o=Tn,a=this.wJ();for(let s=0,i=a.length;s<i;){const l=a[s],u=l.dO();if(u.E5()&&u.N9(n)){(!l.B9()||0<u.W9())&&o.push(l);const c=l.dO().U4();r.push(l);let t=s+1;for(;t<i;++t){const f=a[t],d=f.dO();if(d.E5()&&d.N9(n)){if(d.U4()!==c)break;(f.B9()?(0<d.W9()&&o.push(f),r):o).push(f)}}if(1!==r.length||r[0].j9()){this.H9(e,r);for(let t=0,s=o.length;t<s;++t){const p=o[t],m=p.dO();m.V9(!0),this.L9(p,m,e,h),m.V9(!1)}}else{this.L9(l,u,e,h);for(let t=0,s=o.length;t<s;++t){const g=o[t];if(g!==l){const y=g.dO(),w=y.pO();w.L9(g,y,e,h)}}}s=t,S.Lr(r),S.Lr(o)}else++s}}H9(i,e){const h=this.TU;i.cR();for(let t=0,s=e.length;t<s;++t){const n=e[t],r=n.dO();r.U9(!0),this.z9(n,r,i)}i.fR();for(let t=0,s=e.length;t<s;++t){const o=e[t],a=o.dO();this.L9(o,a,i,h),a.U9(!1)}i.pR()}R9(t){let s=this.sz,i=this.nz,e=this.hz,h=this.hN(),n;i.set(s.J7(h.wl()),s.q7(h.Sl()),s.J7(h.bl()),s.q7(h.vl())),this.ez&&i.equals(e)?n=this.iz:(n=this.KJ(),this.ez=!0,e.T(i)),this.A9(t,n),n!==this.iz&&S.Wr(this.iz,n)}L9(t,s,i,e){s.s9()?this.J9(t,s,i,e):this.z9(t,s,i)}z9(t,s,i){const e=s.q9();i.zw()!==e&&e.Ub(),t.qv(i)}J9(t,s,i,e){this.X9(t,s,i,e,null)&&this.RH(i)}X9(t,s,i,e,h){const n=s.O4().fF();return n.r3(i,e,{o3:t,a3:s.tN(),devicePixelRatio:this.tf.Y9(),time:t.Z9(),l3:this.tf.K9()*this.o9(),u3:this.zk(),F3:s.J4(),D3:n.Q3()?null:this.Q9(s),y3:h&&h.y3,w3:h&&h.w3,S3:h&&h.S3,b3:h&&h.b3}),i.aS(this.lv()),n.dP()}F9(t,s,i,e){const h=this.JU.Yz(),n=this.tf;0===h.length?(t.rR(i),t.Pw(),e&&0===this.jb&&this.Xz()?t.oR(s):(t.zb(this.jb),t.Jb(this.SU),t.aR(s)),t.lR(s),n.YU(s)):this.fF().r3(t,i,{o3:this,a3:this.tN(),devicePixelRatio:n.Y9(),l3:n.K9()*this.o9(),u3:this.zk(),F3:this.hN(),D3:null,ZR:!0})}N5(){return this._U}k5(t){this._U!==t&&(this._U=t,this.oU.tq(),this.tJ(),this.tf.bO())}gN(){return this.o9()*this.tf.gN()}Hj(){return this.o9()*this.tf.Hj()}o9(){return(this._U*this.oU.Vk()-1)*this.GU+1}rJ(){if(this.FU){this.FU=!1;let t=this.tf.u9(),s=this.tf.c9(),i=(this.qk()-t)*this.yU+t,e=(this.Xk()-s)*this.wU+s,h=this.o9(),n=this.tf.pJ()/h,r=this.tf.mJ()/h,o=i-n/2,a=e-r/2;this.tf.kF()&&(o=Math.round(o),a=Math.round(a));const l=this.RU,u=(l.set(o,a,o+n,a+r),this.zk()),c=(0!==u&&(dn.T(l),dn.offset(-l._l(),-l.Il()),pn.gu(dn,u),pn.wu(dn),dn.offset(l._l(),l.Il()),l.T(dn)),this.Vb);this.cJ(c,this.eE),this.TJ()?this.sq(c,this.AU):this.AU.T(this.eE)}}sq(t,s){let i=this.tf.vL(),e=i.TL(),h=i.IL(),[n,r]=this.rN(0,0,t),[o,a]=this.rN(e,0,t),[l,u]=this.rN(e,h,t),[c,f]=this.rN(0,h,t),d=Math.min(n,o,l,c),p=Math.min(r,a,u,f),m=Math.max(n,o,l,c),g=Math.max(r,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}rN(t,s,i=0){return this.iq(t,s,i,this.Hj())}fN(t,s,i=0){return this.iq(t,s,i,this.gN()*this.AL())}iq(t,s,i,e){const h=this.tf,n=h.Tb(),r=this.o9(),o=h.pJ()/r,a=h.mJ()/r,l=Sn,u=(Hh.set(l,0,0,o,a),t/=e,s=l[3]-s/e,this.m9(n)),c=this.n9(n),f=wn,d=S.qg.Yg(t,s,i,c,u,l,f);return d?[f[0],f[1]]:[NaN,NaN]}eq(t,s){const i=this._U,e=this.GU,h=this.yU,n=this.wU,r=this.IU,o=(this._U=1,this.GU=1,this.yU=1,this.wU=1,this.IU=0,this.tJ(),this.rN(t,s));return this._U=i,this.GU=e,this.yU=h,this.wU=n,this.IU=r,this.tJ(),o}uN(t,s,i=0){return this.hq(t,s,i,this.Hj())}pN(t,s,i=0){return this.hq(t,s,i,this.gN()*this.AL())}hq(t,s,i,e){const h=this.tf,n=h.Tb(),r=this.o9(),o=h.pJ()/r,a=h.mJ()/r,l=Sn,u=(Hh.set(l,0,0,o,a),this.m9(n)),c=this.n9(n),f=wn,d=S.qg.$g(t,s,i,c,u,l,f);return d?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}nq(t,s){return t*=this.gN()*this.AL(),0!==s&&(t*=this.fJ(s)),t}Q9(t){const s=t.J4(),i=t.U4(),e=t.W9(),l=i+e,u=s.wl(),c=s.Sl(),f=s.bl(),d=s.vl();if(this.TJ()){if(this.rq(u,c,i)||this.rq(f,c,i)||this.rq(f,d,i)||this.rq(u,d,i))return null;if(0<e&&(this.rq(u,c,l)||this.rq(f,c,l)||this.rq(f,d,l)||this.rq(u,d,l)))return null}else if(l>=this.dJ())return null;let[p,m]=this.pN(u,c,i),[g,y]=this.pN(f,d,i);if(0!==this.zk()||0<e||this.TJ()){const[w,S]=this.pN(f,c,i),[b,v]=this.pN(u,d,i);if(0<e){let[t,s]=this.pN(u,c,l),[i,e]=this.pN(f,c,l),[h,n]=this.pN(f,d,l),[r,o]=this.pN(u,d,l),a=Math.min(p,g,w,b,t,i,h,r);g=Math.max(p,g,w,b,t,i,h,r),p=a,a=Math.min(m,y,S,v,s,e,n,o),y=Math.max(m,y,S,v,s,e,n,o),m=a}else{let t=Math.min(p,g,w,b);g=Math.max(p,g,w,b),p=t,t=Math.min(m,y,S,v),y=Math.max(m,y,S,v),m=t}}return dn.set(p,m,g,y),dn}k9(){return this.kU&&(this.oq(),this.kU=!1),this.LU}oq(){const t=this.tf.Tb(),s=this.m9(t),i=this.n9(t);this.LU.ny(i,s)}rq(t,s,i){return this.k9().ly(t,s,i)}aq(){const t={d:this.Jz(),s:this.N5(),a:this.j5(),v:this._5(),i:this.P5(),html:this.F5(),bc:this.mU.toJSON(),t:this.Y5(),sx:this.CU,sy:this.EU,hosp:this.PU,px:this.V5(),py:this.z5(),c:this.Hb.toJSON(),sr:this.W5(),fx:this.JU.wv(),cg:this.jU};return t}lq(t){this.fU=!!t.d,this._U=t.s,this.IU=t.a,this.dU=!!t.v,this.pU=!t.hasOwnProperty("i")||t.i,this.lU=!!t.html,this.mU.ka(t.bc),this.gU=!!t.t,t.hasOwnProperty("sx")&&(this.CU=t.sx),t.hasOwnProperty("sy")&&(this.EU=t.sy),t.hasOwnProperty("hosp")&&(this.PU=!!t.hosp),this.yU=t.px,this.wU=t.py,this.Hb.ka(t.c),this.oz(),this.GU=t.sr,S.Wr(this.jU,t.cg),S.Wr(this.WU,this.NU);let i=new Set(this.jU),e=0;for(let t=0,s=this.WU.length;t<s;++t)i.has(this.WU[t][2])||(this.WU[e]=this.WU[t],++e);S.Or(this.WU,e),this.JU.Sv(t.fx),this.KU=!0}uq(){this.Pz(!1),this.SO(),this.tJ(),this.p9()}Kk(){return this.rz}Pk(t,s=!1){if(this.A7.includes(t))s&&this.A7.sort((t,s)=>{const i=t.dO().cq(),e=s.dO().cq();return i-e});else if(t.fq()){const i=[...t.vB()];i.push(t),i.sort((t,s)=>{const i=t.dO().cq(),e=s.dO().cq();return i-e});for(const e of i)if(e.RN())for(const h of e.AN())if(!i.includes(h)){const n=[...h.vB()];n.push(h),n.sort((t,s)=>{const i=t.dO().cq(),e=s.dO().cq();return i-e}),n&&n.length&&i.splice(i.length,0,...n)}for(const r of i)r.pk().VL()&&this.xz(r,!0)}else if(t.pk().VL()&&this.xz(t,!0),t.RN())for(const o of t.AN()){const a=[...o.vB()];if(a.push(o),a.sort((t,s)=>{const i=t.dO().cq(),e=s.dO().cq();return i-e}),a&&a.length)for(const l of a)l.pk().VL()&&this.xz(l,!0)}}}}{let l=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},v=function(t,s){I!==t&&(t.b9(s),I=t)},M=(l,v,self.Ds),e=self.C3Debugger,h=(M.hn(M.Rect),M.hn(M.Rect),M.hn(M.Rect)),x=M.hn(M.Wo),t=self.ys,u=t.Ts,a=[],G=[],T=[],_=[],I=null;M.pq=class extends M.tn{constructor(t,s,i){super(),this.mq=t,this.tf=t.FO(),this.ln=i[0],this.gq=i[1],this.yq=i[2],this.Wm=i[1],this.jm=i[2],this.wq=!!i[3],this.Sq=!!i[4],this.bq=i[5],this.vq=i[6],this.Mq=i[7],this.xq=null,this.cU=i[8],this.Wg=s,this.CU=0,this.EU=0,this._U=1,this.IU=0,this.Gq=new Set,this.Tq=new Set,this._q=new Set,this.Iq=[],this.Cq=[],this.Eq=new Map,this.Pq=new Map,this.Rq=[],this.Aq=!1,this.Fq=u.create(),this.Dq=u.create(),this.Oq=u.create(),this.Lq=[],this.kq=[],this.Nq=new Map,this.Bq=new Map,this.Wq=-1;const h=this.tf.vL();this.JU=M.hn(M.qU,this,i[11]),this.lF=M.hn(M.qg.nA,h.$U(),{qR:(t,s)=>{const i=s.sF(),e=i.tR();t.SP(),t.aR(e),t.lR(e),h.YU(e)},YR:t=>this.kk().ZU(t)}),this.KU=!0,this.jq=!1,this.TU=null,this.Hq={},this.Vq=new Map,this.Uq=!0,this.zq=new self.Lk(this),this.Jq=M.hn(M.Event.Lf);for(const e of i[9])this.Lq.push(M.rU.uz(this,null,e));this.qq();for(const n of this.s5())n.cz();for(const r of i[10]){const o=this.tf.fz(r[1]);if(!o)throw new Error("missing nonworld object class");o.pz()||o.mz(r),this.Rq.push(r),this.dz(o)}}nn(){for(const t of this.kq)t.nn();M.Lr(this.kq),this._q.clear(),this.xq=null,this.mq=null,this.tf=null}FO(){return this.tf}Jc(){return this.ln}zz(){return this.cU}dF(){return this.Wg}kk(){return this.JU}fF(){return this.$z(),this.lF}$z(){const t="low"===this.tf.vL().I9();if(this.KU||this.jq!==t||this.lF.XA()){const s=this.kk().Yz();this.lF.YA(s.map(t=>t.Yx()),{KR:s.map(t=>t.dF()),tA:t,hA:!0}),this.KU=!1,this.jq=t}}_6(){this.kk()._6(),this.KU=!0}$q(){let i=this.kq[0].o9();for(let t=1,s=this.kq.length;t<s;++t){const e=this.kq[t];0===e.V5()&&0===e.z5()||(i=Math.min(i,e.o9()))}return i}Xq(){return.5*this.tf.pJ()/this.$q()}Yq(){return.5*this.tf.mJ()/this.$q()}iJ(){return this.Zq()?-1/0:this.Xq()}eJ(){return this.Zq()?1/0:this.Qp()-this.Xq()}hJ(){return this.Zq()?-1/0:this.Yq()}nJ(){return this.Zq()?1/0:this.fm()-this.Yq()}Jk(t){const s=this.iJ(),i=this.eJ();this.CU!==(t=(t=i<t?i:t)<s?s:t)&&(this.CU=t,this.Kq(),this.tf.bO())}qk(){return this.CU}$k(t){const s=this.hJ(),i=this.nJ();this.EU!==(t=(t=i<t?i:t)<s?s:t)&&(this.EU=t,this.Kq(),this.tf.bO())}Xk(){return this.EU}Zq(){return this.wq}tq(){this.Jk(this.qk()),this.$k(this.Xk());for(const t of this.kq)t.sJ()&&(t.Jk(t.qk()),t.$k(t.Xk()))}d5(t,s){this.bq===t&&this.vq===s||(this.bq=t,this.vq=s,this.Qq()&&(this.t$(),this.Kq(),this.tf.bO()))}lJ(){return this.w5()?.5:this.bq}uJ(){return this.w5()?.5:this.vq}D9(){const t=this.lJ(),s=this.uJ();return t<0||1<t||s<0||1<s}g5(){this.Sq&&(this.Sq=!1,this.t$(),this.Kq(),this.tf.bO())}y5(){this.Sq||(this.Sq=!0,this.t$(),this.Kq(),this.tf.bO())}w5(){return this.Sq}Qq(){return!this.w5()}s$(t){this.Aq!==(t=!!t)&&(this.Aq=t,this.Kq(),this.tf.bO())}_J(){return this.Aq}i$(t,s,i,e,h,n,r,o,a){l(this.Fq,t,s,i)&&l(this.Dq,e,h,n)&&l(this.Oq,r,o,a)||(u.set(this.Fq,t,s,i),u.set(this.Dq,e,h,n),u.set(this.Oq,r,o,a),this.e$())}e$(){this.Kq(),this.tf.bO()}MJ(){return this.Fq}f9(){return this.Dq}d9(){return this.Oq}Vk(){return this._U}Hk(t){this._U!==t&&(this._U=t,this.Kq(),this.tq(),this.tf.bO())}Uk(t){t=M.dn(t),this.IU!==t&&(this.IU=t,this.Kq(),this.tf.bO())}zk(){return this.IU}Qp(){return this.Wm}am(t){!isFinite(t)||t<1||(this.Wm=t)}fm(){return this.jm}tm(t){!isFinite(t)||t<1||(this.jm=t)}h$(){return this.xq}Uz(){return this.Lq}*s5(){for(const t of this.Lq)yield*t.T5()}t5(){return this.kq}n$(){return this.kq.length}pO(t){return"number"==typeof t?this.gO(t):this.Nz(t.toString())}gO(t){return t=M.cn(Math.floor(t),0,this.kq.length-1),this.kq[t]}Nz(t){return this.Nq.get(t.toLowerCase())||null}r$(t){return!!this.Nz(t)}o$(t){return this.Bq.get(t)||null}t$(){for(const t of this.kq)t.p9()}Kq(){for(const t of this.kq)t.tJ()}n5(t,s,i){if(this.r$(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=2<=i?s:s.b5(),h=M.hn(M.rU,this,e,{name:t,sid:Math.floor(1e15*Math.random()),K7:!0});this.a$(h,s,i),this.FO().bO(),this.jz()}o5(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.l$(t),this.a$(t,s,i),this.FO().bO(),this.jz())}l5(t){if(this.l$(t)){const s=this.tf.JF();s.Rk(!0),t.nn(),s.Rk(!1),this.FO().bO(),this.jz()}}c5(){const t=new Set;for(const s of this.s5())s.Jz()&&!s.qz()&&t.add(s);if(0!==t.size){const i=this.tf.JF();i.Rk(!0);for(const e of t)this.l$(e),e.nn();i.Rk(!1),this.FO().bO(),this.jz()}}a$(s,i,e){if(2<=e)if(i){if(i===s||i.LJ(s))throw new Error(`cannot move layer '${s.Jc()}' to sub-layer of itself`);i.RJ(s,2===e),s.EJ(i)}else 2===e?this.Lq.push(s):this.Lq.unshift(s),s.EJ(null);else{const t=i.b5();if(t){if(i.LJ(s))throw new Error(`cannot move layer '${s.Jc()}' to sub-layer of itself`);t.AJ(s,i,0===e),s.EJ(t)}else{let t=this.Lq.indexOf(i);if(-1===t)throw new Error("cannot find layer to insert by");0===e&&++t,this.Lq.splice(t,0,s),s.EJ(null)}}}l$(t){const s=t.b5();if(s)return s.FJ(t),!0;if(1<this.Lq.length){const i=this.Lq.indexOf(t);if(-1===i)throw new Error("cannot find layer to remove");return this.Lq.splice(i,1),!0}return!1}qq(){this.kq=[...this.s5()],this.Nq.clear(),this.Bq.clear();for(let t=0,s=this.kq.length;t<s;++t){const i=this.kq[t];i.Bz(t),this.Nq.set(i.Jc().toLowerCase(),i),this.Bq.set(i.zz(),i)}}u$(){let t=0;for(const s of this.Lq){for(const i of s.T5())i.Wz(t);s.F5()&&t++}}c$(){return this.Lq.at(-1).Dj()+1}async jz(){this.qq(),this.u$(),this.Wq=this.c$()}f$(){return this.Wq}d$(){this.Wq=-1}UJ(t){const s=[];for(const i of this.Lq){const e=i.Dj();if(e===t)s.push(i);else if(t<e)break}return s}NJ(){return{scrollX:this.qk(),scrollY:this.Xk(),scale:this.Vk(),angle:this.zk(),vpX:this.lJ(),vpY:this.uJ()}}BJ(t){this.Jk(t.scrollX),this.$k(t.scrollY),this.Hk(t.scale),this.Uk(t.angle),this.d5(t.vpX,t.vpY)}p$(){let t=this.Lq.filter(t=>t.OJ())[0];for(;t;){if(!t.Y5())return x.Qo(t.sN()),x.Ko(1),x;if(t.t9())return x.zo(0,0,0,0),x;t=t.x5().filter(t=>t.OJ())[0]}return x.zo(0,0,0,0),x}Sz(){return this.Uq}m$(){return[...this.Gq]}dz(t){if(t.RN())for(const s of t.y$().g$())this.Gq.add(s);else this.Gq.add(t)}w$(){return[...this.Tq]}S$(t,s){if(t===this||!s)return Promise.resolve();t&&(M.Ao(this.Tq,t.Tq),t.Tq.clear());const i=[];for(const e of this.Gq)this.Tq.has(e)||(i.push(e.b$(s)),this.Tq.add(e));return Promise.all(i)}async v$(t){if(t.Lz())throw new Error("cannot load textures for family");const s=this.tf.Tb();if(s&&!s.gC()&&!this.Tq.has(t)){this.Tq.add(t);const i=t.b$(s);this.M$(i),await i,t.x$(),this.tf.bO()}}M$(t){this._q.add(t),t.then(()=>this._q.delete(t)).catch(()=>this._q.delete(t))}G$(){return Promise.all([...this._q])}T$(t){if(t.Lz()||0<t.Ik())throw new Error("cannot unload textures");const s=this.tf.Tb();s&&this.Tq.has(t)&&(this.Tq.delete(t),t._$(s))}I$(t,s){if(t!==this&&s)for(const i of this.Tq)i.Mz()||t.Gq.has(i)||(i._$(),this.Tq.delete(i))}C$(){this.Tq.clear()}async E$(t){const s=this.tf,i=this.mq,e=s.JF(),h=(this.Mq&&(this.xq=e.P$(this.Mq),this.xq.R$()),i.A$(this),this.Wm=this.gq,this.jm=this.yq,this.CU=s.AF()/2,this.EU=s.DF()/2,this.tq(),this.t$(),this.Kq(),this.u$(),await this.tf.vL().F$(this.c$(),!0),this.D$(t),this.tf.O$(!0),this.L$(),this.Uq||this.k$(),this.N$(this.Iq),this.N$(this.Cq),this.B$(),i.W$(),s.Ok(),this.tf.O$(!1),this.tf.j$());if(await Promise.all(h),M.Lr(h),!s.H$()){for(const n of this.Iq)n.V$();for(const r of this.Cq)r.U$(this.Eq,this.Pq);for(const[o,a]of Object.entries(this.Hq)){const l=this.tf.v8(parseInt(o,10));l&&!l.Lz()&&l.bz()&&M.Lr(a)}for(const u of this.Iq)u.z$();for(const c of this.Cq)c.z$();for(const f of this.Iq)f._B()||f.J$();for(const d of this.Cq)d._B()||d.J$()}M.Lr(this.Iq),M.Lr(this.Cq),this.Eq.clear(),this.Pq.clear(),await Promise.all([...this.Gq].map(t=>t.q$(this.tf.Tb()))),t&&(s.Lf().dispatchEvent(new M.Event("beforefirstlayoutstart")),await s.$$(new M.Event("beforeprojectstart"))),await this.X$(new M.Event("beforeanylayoutstart")),s.Lf().dispatchEvent(new M.Event("beforelayoutstart")),await this.$$(new M.Event("beforelayoutstart")),s.H$()||await s.a4(M.Q$.K$.Z$.Y$,null,null),s.Lf().dispatchEvent(new M.Event("afterlayoutstart")),await this.$$(new M.Event("afterlayoutstart")),await this.X$(new M.Event("afteranylayoutstart")),t&&(s.Lf().dispatchEvent(new M.Event("afterfirstlayoutstart")),await s.$$(new M.Event("afterprojectstart"))),e.tX(i),await this.G$(),this.Uq=!1}D$(t){for(const s of this.tf.Oz())if(!s.Lz()&&s.VL())for(const i of s.Gk()){const e=i.dO(),h=e.pO(),n=M.cn(h.dF(),0,this.kq.length-1),r=this.kq[n];e.wO(r,!0),r.Gz(i)}if(!t)for(const o of this.kq)o.Pz(!1)}L$(){for(const t of this.kq)t.wz(this.Iq),t.Az()}k$(){let s=!1;for(const[t,i]of Object.entries(this.Hq)){const e=this.tf.v8(parseInt(t,10));if(e&&!e.Lz()&&e.bz())for(const h of i){let t=null;if(!e.VL()||(t=h.hasOwnProperty("instJson")?this.o$(h.instJson.w.l):this.o$(h.w.l))){const n=this.tf.vz(e,t,!1,0,0,!0);h.hasOwnProperty("instJson")?n.Sv(h.instJson):n.Sv(h),s=!0,this.Cq.push(n),h.hasOwnProperty("instJson")&&(this.Eq.set(n,h),this.Pq.set(h.index,n))}}}for(const r of this.kq)r.Pz(!0),r.SO();s&&(this.tf.Ok(),this.tf.sX())}N$(s){for(const i of s)if(i.RN()){const e=i.dO(),t=i.ON();for(const h of i.SN().y$().iX())if(h!==i.SN()){const n=h.Gk();if(n.length>t)i.eX(n[t]);else{let t;t=e?this.tf.vz(h,e.pO(),!0,e.hv(),e.ov(),!0):this.tf.vz(h,null,!0,0,0,!0),this.tf.Ok(),h.hX(),i.eX(t),s.push(t)}}}}B$(){for(const t of this.Rq){const s=this.tf.fz(t[1]);s.RN()||this.tf.vz(t,null,!0)}}nX(){let i=[],e=this.Rq,h=0;for(let t=0,s=e.length;t<s;++t){const n=e[t],r=this.tf.fz(n[1]);r.Mz()?r.RN()&&r.y$().rX()||i.push(this.tf.vz(n,null,!0)):(e[h]=n,++h)}M.Or(e,h),this.tf.Ok(),this.N$(i)}Dz(t,s,i,e,h,n,r){if(i)return i.Dz(t,s,h,n,e,r);{const o=[];for(const a of this.kq)o.push(a.Dz(t,s,h,n,e,r));return o.flat()}}async aX(){const t=this.mq;this.tf.H$()||(await this.X$(new M.Event("beforeanylayoutend")),await this.$$(new M.Event("beforelayoutend")),await this.tf.a4(M.Q$.K$.Z$.lX,null,null),await this.$$(new M.Event("afterlayoutend")),await this.X$(new M.Event("afteranylayoutend"))),t.uX(!0),this.tf.JF().cX(),this.Uq||this.fX();for(const s of this.kq)s.Fz();for(const i of this.tf.Oz())if(!(i.Mz()||i.VL()||i.pk().jL()||i.Lz())){for(const e of i.Gk())this.tf._N(e);this.tf.Ok()}t.uX(!1),t.zD()===this&&t.A$(null)}dX(t,s){const i=t.SN().zz().toString(),e=(this.Hq.hasOwnProperty(i)||(this.Hq[i]=[]),this.Hq[i]),h={index:s,instJson:t.wv(),sceneGraphJson:{children:[]}};e.push(h),this.Vq.set(t,h)}pX(t){const s=this.Vq.get(t);for(const i of t.mX()){const e=this.Vq.get(i);e&&s.sceneGraphJson.children.push({index:e.index,flags:M.yX.gX(i.dO())})}}fX(){this.Vq.clear();let t=0;for(const s of this.kq){s.jJ();for(const i of s.yO()){const e=i.SN();!e.Mz()&&e.bz()&&(this.dX(i,t),t++)}}for(const h of this.kq)for(const n of h.yO()){const r=n.SN();!r.Mz()&&r.bz()&&this.pX(n)}this.Vq.clear()}wX(){this.Hq={},this.Uq=!0}tR(){return this.TU}t9(){const t=this.tf,s=t.Tb().hb();return"low"===t.vL().I9()||s&&t._9()||this.JU.s9()||s&&t.GJ()}SX(t){const s=this.tf.vL();if(this.t9()){t.rR(null),t.qP(0,0,0,0);const i={h2:this.tf.OF(),X2:t.Mw()||this.tf._9()||this.JU.s9(),T9:!!t.Mw()&&this.tf._9()};"low"===s.I9()&&(i.width=s.y9(),i.height=s.w9()),this.TU=this.tf.C9(i)}else this.TU=null}bX(t){this.tf.vX(t)&&(t.YP(!1),t.rR(null),t.Pw(),t.oR(this.TU))}MX(t){this.t9()&&(t.YP(!1),this.xX(t,this.TU))}GX(t){t.rR(this.TU),t.Xu(this.p$()),this.tf.GJ()&&t.XP();const s=this.UJ(0);this.E9(t,this.TU,s,!0),t.Mw()&&t.StartMeasuringRenderPassTime(0,1),this.MX(t),this.TU=null}TX(t,s){let i=null;this.tf.vX(t)&&(i=this.TU),t.rR(i),t.qP(0,0,0,0),this.tf.GJ()&&t.XP();const e=this.UJ(s);this.E9(t,i,e,!0),this.bX(t),t.ZS(),this.tf.vL()._X(s)}E9(t,e,s,h){const n=s.filter(t=>t.OJ());for(let s=0,i=n.length;s<i;){const r=n[s];if(r.IJ()&&!r.i9()){a.push(r);for(let t=s+1;t<i;++t){const o=n[t];if(!o.IJ()||o.i9())break;a.push(n[t])}if(2<=a.length||1===a.length&&a[0].DJ()){this.IX(t,e,a),s+=a.length,M.Lr(a);continue}M.Lr(a)}r.qv(t,e,h&&0===s),++s}}xX(t,s){const i=this.JU.Yz(),e=this.tf;0===i.length?(t.rR(null),t.Pw(),t.oR(s),t.lR(s),e.YU(s)):(h.set(0,0,e.pJ(),e.mJ()),this.fF().r3(t,null,{o3:this,a3:3,devicePixelRatio:this.tf.Y9(),l3:this.tf.K9()*this.Vk(),u3:this.zk(),F3:h,D3:null,ZR:!0}))}IX(e,h,t){t[0].Y5()||(x.Qo(t[0].sN()),x.Ko(1),e.Xu(x)),this.tf.vL(),e.YP(!0);const n=G,r=T,o=_;for(const a of t)a.jJ(),a.vJ(n);const s=t[0],i=s.v9(e);s.G9(e);for(let s=0,i=n.length;s<i;){const l=n[s],u=l.dO(),c=u.pO();if(u.E5()&&u.N9(c.k9())){(!l.B9()||0<u.W9())&&o.push(l);const f=l.dO().U4();r.push(l);let t=s+1;for(;t<i;++t){const d=n[t],p=d.dO();if(p.E5()&&p.N9(p.pO().k9())){if(p.U4()!==f)break;(d.B9()?(0<p.W9()&&o.push(d),r):o).push(d)}}if(1!==r.length||r[0].j9()){this.CX(e,h,r);for(let t=0,s=o.length;t<s;++t){const m=o[t],g=m.dO(),y=g.pO();g.V9(!0),v(y,e),y.L9(m,g,e,h),g.V9(!1)}}else{v(c,e),c.L9(l,u,e,h);for(let t=0,s=o.length;t<s;++t){const w=o[t];if(w!==l){const S=w.dO(),b=S.pO();v(b,e),b.L9(w,S,e,h)}}}s=t,M.Lr(r),M.Lr(o)}else++s}i&&e.yR(i),M.Lr(n),I=null}CX(i,e,h){i.cR();for(let t=0,s=h.length;t<s;++t){const n=h[t],r=n.dO(),o=r.pO();r.U9(!0),v(o,i),o.z9(n,r,i)}i.fR();for(let t=0,s=h.length;t<s;++t){const a=h[t],l=a.dO(),u=l.pO();v(u,i),u.L9(a,l,i,e),l.U9(!1)}i.pR()}aq(){const t={sx:this.qk(),sy:this.Xk(),s:this.Vk(),a:this.zk(),w:this.Qp(),h:this.fm(),ortho:this.w5(),vpX:this.lJ(),vpY:this.uJ(),fv:this.Uq,persist:this.Hq,fx:this.JU.wv(),layers:{},dynamicLayers:[]};for(const s of this.kq)if(s.Jz()){const i=s.b5();t.dynamicLayers.push({sid:s.zz(),name:s.Jc(),parentSid:i?i.zz():null,siblingIndex:s.Vz(),data:s.aq()})}else t.layers[s.zz().toString()]=s.aq();return t}lq(t){this.CU=t.sx,this.EU=t.sy,this._U=t.s,this.IU=t.a,this.Wm=t.w,this.jm=t.h,this.Sq=!!t.ortho,t.hasOwnProperty("vpX")&&(this.bq=t.vpX),t.hasOwnProperty("vpY")&&(this.vq=t.vpY),this.Uq=!!t.fv,this.Hq=t.persist,this.JU.Sv(t.fx),this.KU=!0;for(const[s,i]of Object.entries(t.layers)){const e=parseInt(s,10),h=this.o$(e);h&&h.lq(i)}if(t.hasOwnProperty("dynamicLayers")){this.c5(),this.tf.Ok();const n=new Map,r=t.dynamicLayers;for(let t=r.length-1;0<=t;--t){const o=r[t],a=o.sid,l=o.name,u=o.parentSid,c=o.siblingIndex,f=o.data;if(this.qq(),!this.r$(l)&&!this.o$(a)){let t,s;if(null===u)t=null,s=this.Lq;else{if(!(t=this.o$(u)))continue;s=t.x5()}const d=M.hn(M.rU,this,t,{name:l,sid:a,K7:!0});s.push(d);let i=n.get(s);i||(i=[],n.set(s,i)),i.push({L4:d,siblingIndex:c}),d.lq(f)}}for(const[p,m]of n){m.sort((t,s)=>t.siblingIndex-s.siblingIndex);for(const g of m){let t=g.L4,s=g.siblingIndex,i=p.indexOf(t);p.splice(i,1),p.splice(s,0,t)}}}this.jz(),this.t$(),this.Kq()}JD(){return this.zq}HF(){return this.Jq}EX(t){t.layout=this.JD();const s=this.tf,i=s.g4()&&!s.JF().Fk();i&&e.StartMeasuringScriptTime(),this.Jq.dispatchEvent(t),i&&e.AddScriptTime()}$$(t){return t.layout=this.JD(),this.Jq.Uf(t)}X$(t){return t.layout=this.JD(),this.tf.$$(t)}PX(){this.RX(this.Lq)}RX(t,s=0){const i=t.slice(0);i.reverse();for(const e of i)console.log("\t".repeat(s)+"- "+e.Jc()),this.RX(e.x5(),s+1)}}}{const Cn=self.Ds;Cn.AX=class extends Cn.tn{#M8;#FX=[];#DX=new Map;#OX=new Map;#LX=null;#kX=[];#NX=null;#BX=0;#WX=null;constructor(t){super(),this.#M8=t}nn(){this.#M8=null,this.#LX=null,this.#NX=null,this.#WX=null,Cn.Lr(this.#FX),this.#DX.clear(),this.#OX.clear(),Cn.Lr(this.#kX)}VM(t){const s=Cn.hn(Cn.pq,this,this.#FX.length,t);this.#FX.push(s),this.#DX.set(s.Jc().toLowerCase(),s),this.#OX.set(s.zz(),s)}FO(){return this.#M8}jX(t){this.#NX=t}HX(){if(this.#NX)return this.#NX;if(this.#FX.length)return this.#FX[0];throw new Error("no first layout")}VX(t){return this.#DX.get(t.toLowerCase())||null}UX(t){return this.#OX.get(t)||null}zX(t){return t=Cn.cn(Math.floor(t),0,this.#FX.length-1),this.#FX[t]}XD(t){return"number"==typeof t?this.zX(t):this.VX(t.toString())}ZD(){return this.#FX}A$(t){this.#LX=t}zD(){return this.#LX}JX(t){if(this.#kX.includes(t))throw new Error("layout already running");this.#kX.push(t)}qX(t){const s=this.#kX.indexOf(t);if(-1===s)throw new Error("layout not running");this.#kX.splice(s,1)}*$X(){this.#LX&&(yield this.#LX),this.#kX.length&&(yield*this.#kX)}XX(t){return this.#LX===t||this.#kX.includes(t)}uX(t){if(t)this.#BX++;else{if(this.#BX<=0)throw new Error("already unset");this.#BX--}}Dk(){return 0<this.#BX}tO(t){this.#WX=t}W$(){this.#WX=null}QD(){return!!this.#WX}YX(){return this.#WX}ZX(){const t=this.zD();t&&t.t$()}KX(){const t=this.zD();t&&t.Kq()}}}{const b=self.Ds,En=new RegExp("<(.+?)>","g");b.QX=class extends b.tn{constructor(t){super(),this.tf=t,this.tY=b.hn(b.sY),this.iY=null,this.eY=[],this.hY=new Map,this.nY=new Map,this.rY=new Map,this.aY=[],this.lY=[],this.uY=[],this.cY=!1,this.fY=!1,this.dY=!1,this.pY=()=>this.mY(),this.gY=()=>this.yY(),this.wY=()=>this.SY(),this.bY=()=>this.vY(),this.MY=t=>this.xY(t.S6),this.GY=t=>this.TY(),this._Y=t=>this.IY(),this.CY=t=>this.EY(),this.PY=[],this.RY=0}nn(){this.AY(),this.pY=null,this.gY=null,this.wY=null,this.bY=null,this.MY=null,this._Y=null;for(const t of this.eY)t.mW(),t.nn();b.Lr(this.eY),this.eY=null,this.tY.nn(),this.tY=null,b.Lr(this.aY),this.aY=null,b.Lr(this.lY),this.lY=null,b.Lr(this.uY),this.uY=null,this.hY.clear(),this.hY=null,this.nY.clear(),this.nY=null,this.rY.clear(),this.rY=null,b.Lr(this.PY),this.PY=null,this.tf=null}FY(){const t=this.tf.Lf();t.addEventListener("pretick",this.pY),t.addEventListener("tick2",this.gY),t.addEventListener("beforelayoutchange",this.wY),t.addEventListener("layoutchange",this.bY),t.addEventListener("instancedestroy",this.MY),t.addEventListener("beforeload",this.GY),t.addEventListener("afterload",this._Y),t.addEventListener("afterlayoutstart",this.CY)}AY(){const t=this.tf.Lf();t.removeEventListener("pretick",this.pY),t.removeEventListener("tick2",this.gY),t.removeEventListener("beforelayoutchange",this.wY),t.removeEventListener("layoutchange",this.bY),t.removeEventListener("instancedestroy",this.MY),t.removeEventListener("beforeload",this.GY),t.removeEventListener("afterload",this._Y),t.removeEventListener("afterlayoutstart",this.CY)}VM(t){this.tY.nc(t);const s=b.OY.DY(t,this);this.nc(s),this.LY(s),this.rY.set(s.Jc(),0)}kY(t){const s=this.NY(),i=t.kN(),e=s.Ks(i),h=b.OY.kY(i+":"+this.rY.get(i),e,this);return this.BY(i),this.nc(h),h}BY(t){this.rY.set(t,this.rY.get(t)+1)}WY(){for(const t of this.eY)if(!t.jY()){const s=t.kN();this.BY(s)}}HY(){for(const t of this.rY.keys())this.rY.set(t,0)}nc(t){this.eY.push(t),this.hY.set(t.Jc().toLowerCase(),t)}m0(t){t.VY(),t.jY()||(b.Hr(this.eY,t),b.Hr(this.aY,t),b.Hr(this.lY,t),b.Hr(this.uY,t),this.hY.delete(t.Jc().toLowerCase()),this.UY(t),t.dW())||t.nn()}r4(t){this.tf.r4(t,this.iY,null)}FO(){return this.tf}NY(){return this.tY}zY(t){this.iY=t}JY(){return this.iY}*qY(){for(const t of this.eY)yield t}*$Y(){for(const t of this.lY)yield t}XY(t,s){this.nY.has(t)||this.nY.set(t,new Set),this.nY.get(t).add(s)}LY(t){for(const s of t.YY())this.XY(s,t)}UY(t){for(const[s,i]of this.nY.entries())i.has(t)&&(i.delete(t),0===i.size)&&this.nY.delete(s)}ZY(t){if(this.nY.has(t))return this.nY.get(t)}KY(t,s){if(s)for(const i of this.eY){const e=s.every(t=>i.QY(t.S6,t.trackId));if(e&&i.Jc().includes(t.Jc()))return i}}tZ(t){return this.hY.get(t.toLowerCase())||null}sZ(t){for(const s of this.aY)if(s.Jc()===t)return s;for(const i of this.lY)if(i.Jc()===t)return i;return null}*iZ(i){if(En.test(i)){En.lastIndex=0;let t,s=new Set;do{if(t=En.exec(i)){const e=t[1].split(",");for(const h of e)s.add(h)}}while(t);for(const n of s.values()){const r=this.tZ(n);r&&(yield r)}s.clear()}else{const t=this.tZ(i);t&&(yield t)}}*eZ(t){for(const s of this.eY)s.yW(t)&&(yield s)}hZ(t){this.aY.includes(t)||this.aY.push(t),this.nZ()}rZ(t){b.Hr(this.lY,t),this.oZ()}aZ(t){this.lY.includes(t)?(t.lZ(!0),t.uZ(!1),t.cZ(!1)):(t.lZ(!1),t.uZ(!0),t.cZ(!1),this.aY.includes(t)||this.aY.push(t)),this.nZ()}fZ(t){t.lZ(!1),t.uZ(!1),t.dZ(),b.Hr(this.aY,t),this.oZ()}pZ(t){t.lZ(!1),t.uZ(!1),this.lY.includes(t)&&(t.cZ(!0),this.uY.push(t),b.Hr(this.lY,t)),this.aY.includes(t)&&t.cZ(!0)}mZ(t){t.lZ(!1),t.uZ(!1),t.cZ(!1),t.TW(1),b.Hr(this.lY,t)}gZ(t){this.pZ(t),t.dZ()}mY(){if(!this.FO().H$()&&this.cY&&!this.fY){for(this.dY=!0;this.aY.length;){const t=this.aY.pop();(t.yZ()?(t.wZ(),this.uY):(t.SZ(),this.lY)).push(t),0!==t.bZ()&&(this.RY=1)}const s=this.tf.vZ(),i=this.tf.MZ(),e=this.tf.MD();for(let t=this.lY.length-1;0<=t;t--){const h=this.lY[t];h&&h.xZ(s,e,i)}this.dY=!1,0!==this.RY&&this.FO().bO()}}yY(){if(!this.FO().H$()&&this.cY&&!this.fY){let i;for(let t=0,s=this.uY.length;t<s;t++){const e=this.uY[t];i=i||new Set,e.VY(),this.GZ(e),i.add(e)}if(i){b.zr(this.uY,i);for(let t=this.RY=0,s=this.lY.length;t<s;t++)if(0!==this.lY[t].bZ()){this.RY=1;break}}this.oZ()}}GZ(t){t.dW()||t.TZ()&&t._Z()&&t.IZ()&&t.CZ()}nZ(){this.cY||(this.cY=!0)}oZ(){this.uY.length||this.lY.length||this.aY.length||this.dY||(this.cY=!1)}SY(){for(this.fY=!0;this.aY.length;)this.fZ(this.aY.pop());const t=new Set;for(const s of this.lY){const i=s.SY();i&&(s.VY(),t.add(s))}b.zr(this.lY,t),t.clear();for(const e of this.uY){const h=e.SY();h&&(e.VY(),t.add(e))}b.zr(this.uY,t),this.oZ();for(const n of this.eY)n.EZ()}vY(){this.fY=!1}xY(t){const s=t.SN(),i=this.ZY(s);if(i)if(this.tf.H$())this.PY.push(t);else for(const e of i)e.jY()||(e.dW()?this.m0(e):e.TZ()||(this.GZ(e),this.m0(e)))}TY(){for(const t of this.aY.map(t=>t))this.GZ(t),this.m0(t);for(const s of this.lY.map(t=>t))this.GZ(s),this.m0(s)}IY(){for(const t of this.PY)this.xY(t);b.Lr(this.PY);for(const s of this.eY)s.IY()}EY(){const t=this.tf.$D(),s=t.zD();if(s)for(const i of this.eY){const e=i.PZ();e&&s.Jc()===e&&this.aZ(i)}}aq(){return{timelinesJson:this.RZ(),scheduledTimelinesJson:this.AZ(),playingTimelinesJson:this.FZ(),markedForRemovalTimelinesJson:this.DZ(),hasRuntimeListeners:this.cY,changingLayout:this.fY,isTickingTimelines:this.dY}}lq(t){t&&(this.HY(),this.OZ(t.timelinesJson),this.LZ(t.scheduledTimelinesJson),this.kZ(t.playingTimelinesJson),this.NZ(t.markedForRemovalTimelinesJson),this.cY=!t.hasRuntimeListeners,this.fY=!!t.changingLayout,this.dY=!!t.isTickingTimelines,this.WY(),this.nZ(),this.oZ())}RZ(){return this.eY.map(t=>t.aq())}OZ(t){for(const s of t){let t=this.tZ(s.name);if(t)t.lq(s);else{const i=this.BZ(s);if(!i)continue;const e=this.tZ(i);(t=this.kY(e)).lq(s)}t.WZ()||this.m0(t)}}BZ(t){const s=t.name,i=s.split(":");return i&&2===i.length?i[0]:null}AZ(){return this.jZ(this.aY)}LZ(t){this.HZ(t,this.aY)}FZ(){return this.jZ(this.lY)}kZ(t){this.HZ(t,this.lY)}DZ(){return this.jZ(this.uY)}NZ(t){this.HZ(t,this.uY)}VZ(t,s){if(s)for(const i of s)if(i===t.Jc())return!0;return!1}jZ(t){return t.map(t=>t.Jc())}HZ(t,s){const i=new Set;for(const e of s)this.VZ(e,t)||i.add(e);if(b.zr(s,i),t)for(const h of t){const n=this.tZ(h);if(n){const r=s.find((s=>t=>t.Jc()===s)(h));r||s.push(n)}}}}}{const Pn=self.Ds,Rn=[0,0],An=[0,0],Fn=[0,0],Dn=[0,0,0,0,0],On=new Array(4),Ln=[{x:0,y:0,t:0,It:0},{x:0,y:0,t:0,It:0},{x:0,y:0,t:0,It:0}],kn={x:0,y:0,t:0,It:0};Pn.UZ=class{constructor(t,s){this.zZ=!1,this.JZ=t,this.qZ=[];let i=null;if(i=s?this.JZ.$Z(s):Pn.first(this.JZ.XZ())){const e=i.VW("offsetX"),h=i.VW("offsetY");if(e&&h){this.YZ=e,this.ZZ=h;const n=e.KZ(),r=h.KZ();for(let t=1,s=Math.min(n.length,r.length);t<s;++t){const o=n[t],a=(o.QZ(),o.tK()),l=r[t],u=(l.QZ(),l.tK());a&&"cubic-bezier"===a.sK()&&u&&"cubic-bezier"===u.sK()?this.qZ.push(Pn.hn(Pn.iK,a,u,o,l,this.qZ.length)):(a&&"line"===a.sK()&&u&&u.sK(),this.qZ.push(Pn.hn(Pn.eK,o,l,this.qZ.length)))}this.zZ=!0}}}nn(){for(const t of this.qZ)t.nn();Pn.Lr(this.qZ),this.qZ=null,this.JZ=null,this.YZ=null,this.ZZ=null}hK(){return this.zZ}nK(){return this.qZ}rK(t){const s="relative"===this.YZ.oK()?t.hv():0,i="relative"===this.ZZ.oK()?t.ov():0;for(const e of this.qZ)e.rK(s,i)}$g(s,i,t){let e=NaN,h=this.qZ.length;for(let t=0;t<h;t++){const n=this.qZ[t];if("cubic-bezier"===n.Qx()){const r=n.$g(s,i);(isNaN(e)||r[3]<e)&&(e=r[3],Fn[0]=r[2],Fn[1]=n.dF())}}return Fn}aK(s,i,t){const e=t.tRange;Pn.ae(e[0])||(e[0]=0),Pn.ae(e[1])||(e[1]=1);let h=NaN,n=this.qZ.length;for(let t=0;t<n;t++){const r=this.qZ[t];if("cubic-bezier"===r.Qx()){const o=r.lK(s,i,e);(isNaN(h)||o[3]<h)&&(h=o[3],Fn[0]=o[2],Fn[1]=r.dF())}}return Fn}uK(t,s){return this.qZ[s].uK(t)}cK(t,s){return this.qZ[s].cK(t)}},Pn.iK=class{constructor(t,s,i,e,h){this.Wg=h;const n=t.fK("cubic-bezier"),r=i.fK("cubic-bezier"),o=s.fK("cubic-bezier"),a=e.fK("cubic-bezier");this.dK=t.pK(),this.mK=s.pK(),this.gK=t.pK()+n.yK(),this.wK=s.pK()+o.yK(),this.SK=i.pK()+r.bK(),this.vK=e.pK()+a.bK(),this.MK=i.pK(),this.xK=e.pK(),this.GK=0,this.TK=0,this._K=0,this.IK=0,this.CK=0,this.EK=0,this.PK=0,this.RK=0,this.AK=0,this.FK=0,this.DK=0,this.LK=0,this.kK=0,this.NK=0,this.BK=0,this.WK=0,this.jK=0,this.HK=0,this.VK=0,this.UK=0,this.zK=NaN,this.zZ=!1,this.JK=100,this.qK=new Array(this.JK+1),this.qK[0]=0,this.$K=0,this.XK=[],this.YK=[];for(let t=0;t<100;t++)this.YK.push({x:0,y:0,t:0,It:0});this.ZK()}nn(){Pn.Lr(this.qK),this.qK=null,Pn.Lr(this.XK),this.XK=null,Pn.Lr(this.YK),this.YK=null}Qx(){return"cubic-bezier"}dF(){return this.Wg}KK(){return Math.floor(this.$K/25)}QK(){return 1/this.KK()}rK(t,s){this.tQ=t,this.sQ=s,this.qK=new Array(this.JK+1),this.qK[0]=0,this.ZK(),this.GK=this.dK+this.tQ,this.TK=this.mK+this.sQ,this._K=this.gK+this.tQ,this.IK=this.wK+this.sQ,this.CK=this.SK+this.tQ,this.EK=this.vK+this.sQ,this.PK=this.MK+this.tQ,this.RK=this.xK+this.sQ,this.AK=3*(this._K-this.GK),this.FK=3*(this.IK-this.TK),this.DK=3*(this.CK-this._K),this.LK=3*(this.EK-this.IK),this.kK=3*(this.PK-this.CK),this.NK=3*(this.RK-this.EK),this.BK=3*(this._K-this.GK),this.WK=3*(this.GK+this.CK-2*this._K),this.jK=this.PK-this.GK+3*(this._K-this.CK),this.HK=3*(this.IK-this.TK),this.VK=3*(this.TK+this.EK-2*this.IK),this.UK=this.RK-this.TK+3*(this.IK-this.EK)}Map(t){if(!this.zZ)return NaN;const s=this.iQ(t);return An[0]=this.eQ(s),An[1]=this.hQ(s),An}$g(t,s){const i=this.nQ(100),e=this.rQ(t,s,i),h=this.oQ(t,s,i,e);return Dn[0]=h.x,Dn[1]=h.y,Dn[2]=h.t,Dn[3]=h.It,Dn}lK(t,s,i){const e=this.nQ(100),h=this.aQ(t,s,e,i),n=this.oQ(t,s,e,h);return Dn[0]=n.x,Dn[1]=n.y,Dn[2]=n.t,Dn[3]=n.It,Dn}uK(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,n=i*this.AK+e*this.DK+h*this.kK,r=i*this.FK+e*this.LK+h*this.NK,o=Pn.gn(n,r);return Rn[0]=n/o,Rn[1]=r/o,Rn}cK(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,n=i*this.AK+e*this.DK+h*this.kK,r=i*this.FK+e*this.LK+h*this.NK;return Math.atan2(r,n)}iQ(h){if(this.zZ){let t=h*this.qK[this.JK],s=0,i=this.JK,e=0;for(;s<i;)e=s+((i-s)/2|0),this.qK[e]<t?s=e+1:i=e;this.qK[e]>t&&e--;const n=this.qK[e];return n===t?e/this.JK:(e+(t-n)/(this.qK[e+1]-n))/this.JK}}eQ(t){return this.zZ?self.ac._c("cubicbezier")(t,this.dK+this.tQ,this.gK+this.tQ,this.SK+this.tQ,this.MK+this.tQ):NaN}hQ(t){return this.zZ?self.ac._c("cubicbezier")(t,this.mK+this.sQ,this.wK+this.sQ,this.vK+this.sQ,this.xK+this.sQ):NaN}nQ(s){if(!(this.XK.length>=(s=s||100))){this.XK=new Array(s),s++;for(let t=0;t<s-1;t++){const i=t/(s-1),e=i**2,h=i**3,n=this.BK*i,r=this.WK*e,o=this.jK*h,a=this.HK*i,l=this.VK*e,u=this.UK*h,c=this.GK+n+r+o,f=this.TK+a+l+u;this.YK[t].x=c,this.YK[t].y=f,this.YK[t].t=i,this.YK[t].It=0,this.XK[t]=this.YK[t]}}return this.XK}rQ(s,i,e,t=0,h=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.zK))for(let t=0;t<100;t++){const r=e[t],o=r.x-s,a=r.y-i;r.It=o*o+a*a,r.It<h&&(h=r.It,n=t)}else{for(let t=this.zK;t<this.zK+5&&!(t>=e.length);t++){const l=e[t],u=l.x-s,c=l.y-i;l.It=u*u+c*c,l.It<h&&(h=l.It,n=t)}for(let t=this.zK;t>this.zK-5&&!(t<0);t--){const f=e[t],d=f.x-s,p=f.y-i;f.It=d*d+p*p,f.It<h&&(h=f.It,n=t)}}return this.zK=n}aQ(s,i,e,h,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.zK))for(let t=0;t<100;t++){const o=e[t],a=o.x-s,l=o.y-i;o.It=a*a+l*l,o.t>=h[0]&&o.t<=h[1]&&o.It<n&&(n=o.It,r=t)}else{for(let t=this.zK;t<this.zK+5&&!(t>=e.length);t++){const u=e[t],c=u.x-s,f=u.y-i;u.It=c*c+f*f,u.t>=h[0]&&u.t<=h[1]&&u.It<n&&(n=u.It,r=t)}for(let t=this.zK;t>this.zK-5&&!(t<0);t--){const d=e[t],p=d.x-s,m=d.y-i;d.It=p*p+m*m,d.t>=h[0]&&d.t<=h[1]&&d.It<n&&(n=d.It,r=t)}}return this.zK=r}oQ(r,o,a,l){let u=a[l],t=1,c=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,s=0===l?0:l-1,i=l===t-1?t-1:l+1,e=a[s].t,h=a[i].t,n=(h-e)/4;if(n<.001)break;On[0]=a[s];for(let t=1;t<=2;t++){const f=e+t*n,d=f**2,p=f**3,m=this.BK*f,g=this.WK*d,y=this.jK*p,w=this.HK*f,S=this.VK*d,b=this.UK*p,v=this.GK+m+g+y,M=this.TK+w+S+b,x=v-r,G=M-o,T=x*x+G*G;if(T<c){c=T,l=t,kn.x=v,kn.y=M,kn.t=f,kn.It=T,u=kn;break t}const _=Ln[t-1];_.x=v,_.y=M,_.t=f,_.It=T,On[t]=_}On[3]=a[i],a=On}while(t++<20);return u}ZK(){this.zZ=!0;let s=this.eQ(0),i=this.hQ(0),e=0;for(let t=1;t<=this.JK;t++){const h=this.eQ(.01*t),n=this.hQ(.01*t),r=s-h,o=i-n;e+=Pn.gn(r,o),this.qK[t]=e,s=h,i=n}this.$K=e}},Pn.eK=class{constructor(t,s,i){this.Wg=i,this.lQ=t.pK(),this.uQ=s.pK(),this.tQ=0,this.sQ=0}nn(){}Qx(){return"line"}dF(){return this.Wg}rK(t,s){this.tQ=t,this.sQ=s}hv(){return this.lQ+this.tQ}ov(){return this.uQ+this.sQ}}}{const v=self.Ds;v.OY=class extends v.tn{constructor(t,s,i){super(),this.tf=i.FO(),this.cQ=i,this.fQ=s,this.ln=t,this.dQ=[],this.pQ=0,this.mQ=null,this.gQ=0,this.yQ(),this.wQ=null,this.SQ=null,this.bQ=0,this.vQ=0,this.MQ=1,this.xQ=0,this.GQ=1,this.TQ=!1,this._Q=!1,this.IQ=!1,this.CQ=!0,this.EQ=!1,this.PQ=!1,this.RQ=-1,this.AQ=!1,this.FQ=!1,this.DQ=!1,this.OQ=!1,this.LQ=NaN,this.kQ=[""],this.NQ="",this.BQ=!1,this.RY=0,this.WQ=0,this.jQ=null}static DY(t,s){const i=s.NY(),e=i.HQ(),h=i.Ks(t[e]),n=v.hn(v.OY,t[e],h,s);return n.VQ(!0),n}static kY(t,s,i){return v.hn(v.OY,t,s,i)}nn(){if(!this.dW()){const t=this.tf.Lf();this.cQ.fZ(this),this.cQ.gZ(this);for(const s of this.dQ)s.nn();v.Lr(this.dQ),this.dQ=null,this.tf=null,this.cQ=null,this.fQ=null,this.EQ=!0,this.wQ=null,this.SQ=null,this.UQ(t)}}UQ(t){const s=v.hn(v.Event,"timelinestatereleased");s.zQ=this,t.dispatchEvent(s)}Qx(){return 0}yQ(){for(const t of this.fQ.qQ().JQ())this.pQ=this.dQ.push(v.$Q.VM(this,t))}XQ(){return this.cQ}FO(){return this.tf}XZ(){return this.dQ}YQ(e,h,n,r){if(this.WQ){let i;for(let s=0;s<this.dQ.length;s++){let t=this.dQ[s];if(e===t.kW()){const o=t.VW(n);o&&h.constructor===o.ZQ().constructor&&o.oK()===r.oK()&&(i=i||[]).push(o)}}return i}}WZ(){return!!this.dQ.length}$Z(t){for(const s of this.dQ)if(v.uh(s.jW(),t))return s;return null}KQ(t){for(const s of this.dQ)if(!s.QQ()&&v.uh(s.Jc(),t))return s;return null}F8(t){this.ln=t}Jc(){return this.ln}ttt(){return this.fQ}kN(){return this.fQ.Jc()}bW(){return this.fQ.bW()}SW(t){this.fQ.SW(t)}stt(){return this.fQ.stt()}itt(t){this.fQ.itt(t)}ett(){return this.fQ.ett()}htt(t){this.fQ.htt(t)}oK(){return this.fQ.oK()}ntt(t){this.fQ.oK(t)}LW(t){for(const s of this.XZ())s.LW(t)}MW(){return this.fQ.MW()}vW(t){return this.fQ.vW(t)}GW(){return this.fQ.GW()}xW(t){return this.fQ.xW(t)}F6(){return this.fQ.F6()}ott(t){return this.fQ.ott(t)}TW(t){return this.MQ=t}_W(){return this.MQ}PZ(){return this.fQ.PZ()}att(){return this.fQ.att()}ltt(){return this.fQ.ltt()}utt(){return this.xQ}ctt(){return!this.IsPlaying()||0<this.MQ}EW(){return this.wQ||(this.wQ=new Promise(t=>{this.SQ=t})),this.wQ}dZ(){this.wQ&&(this.SQ(),this.wQ=null,this.SQ=null)}ftt(t){this.kQ=v.OY.dtt(t),this.BQ=!0}IW(){return this.kQ}ptt(){return this.BQ&&(this.NQ=this.kQ.join(" ")),this.BQ=!1,this.NQ}yW(t){if(!this.kQ)return!1;if(!this.kQ.length)return!1;const s=v.OY.dtt(t);return!!s&&!!s.length&&s.every(v.OY.mtt,this)}gtt(){v.Q$.Timeline&&this.constructor===v.OY&&(v.Q$.Timeline.Z$.PushTriggerTimeline(this),this.cQ.r4(v.Q$.Timeline.Z$.OnTimelineStarted),this.cQ.r4(v.Q$.Timeline.Z$.OnTimelineStartedByName),this.cQ.r4(v.Q$.Timeline.Z$.OnTimelineStartedByTags),this.cQ.r4(v.Q$.Timeline.Z$.OnAnyTimelineStarted),v.Q$.Timeline.Z$.PopTriggerTimeline())}ytt(){this.RQ=this.tf.wtt()}CZ(){this.DQ||(this.DQ=!0,v.Q$.Timeline&&this.constructor===v.OY&&(v.Q$.Timeline.Z$.PushTriggerTimeline(this),this.cQ.r4(v.Q$.Timeline.Z$.OnTimelineFinished),this.cQ.r4(v.Q$.Timeline.Z$.OnTimelineFinishedByName),this.cQ.r4(v.Q$.Timeline.Z$.OnTimelineFinishedByTags),this.cQ.r4(v.Q$.Timeline.Z$.OnAnyTimelineFinished),v.Q$.Timeline.Z$.PopTriggerTimeline()))}lZ(t){this.TQ=t}Stt(){return this.RQ===this.tf.wtt()}IsPlaying(t=!1){return!!this.Stt()||!(!this.btt()||t)||this.TQ}vtt(){return this.IsPlaying(!0)}RW(){return this.Mtt()}Mtt(){return!(this.dW()||this.btt()||this.vtt()||this._Z())}uZ(t){this._Q=t}btt(){return this._Q}xtt(t){this.CQ=t;const s=this.zR();(s<=0||s>=this.bW())&&(this.CQ=!0)}_Z(){return this.CQ}dW(){return this.EQ}cZ(t){this.PQ=t}yZ(){return this.PQ}Gtt(t){this.AQ=t}Ttt(){return this.AQ}VQ(t){this.FQ=!!t}jY(){return this.FQ}IZ(){return this.IQ}zR(){return this.bQ}wW(t){const s=this.zR();this._tt(t),this.xtt(!1),this._Z()||this.Gtt(!0),!this.vtt()&&!this.btt()&&this.IQ||(this.vtt()||this.btt()||this.IQ?this.vtt()?this.mW():this.btt()&&(this.cQ.fZ(this),this.Itt()):this.Itt()),this.Ctt(),this.Ett(this.zR(),!1,!0,!0,s),this.Ptt(),this.RY&&this.FO().bO(),this.Rtt()}_tt(t){(t=v.ae(t)?t:this.bW())<0?this.bQ=0:t>=this.bW()?this.bQ=this.bW():this.bQ=t}Att(t){(t=v.ae(t)?t:this.bW())<0?this.bQ=0:t>=this.bW()?this.bQ=this.bW():this.bQ=t;for(const s of this.dQ)s.Ftt()}Rtt(){v.Q$.Timeline&&this.constructor===v.OY&&(v.Q$.Timeline.Z$.PushTriggerTimeline(this),this.cQ.r4(v.Q$.Timeline.Z$.OnTimeSet),this.cQ.r4(v.Q$.Timeline.Z$.OnTimeSetByName),this.cQ.r4(v.Q$.Timeline.Z$.OnTimeSetByTags),v.Q$.Timeline.Z$.PopTriggerTimeline())}Dtt(){if(!this.MW())if(this.GW()&&1===this.xQ){if(this.ctt()){if(this.zR()>=this.bW())return!1}else if(this.zR()<=0)return!1}else if(!this.MW()&&!this.GW())if(this.ctt()){if(this.zR()>=this.bW())return!1}else if(this.zR()<=0)return!1;return!0}gW(){this.dW()||this.Dtt()&&this.Play(!0)}Play(t=!1){return!this.dW()&&!this.btt()&&(this.vtt()&&this.Stt()?this.Ott():!this.vtt()&&!!(this._Z()||t||this.Ttt())&&this.Ltt())}Ott(){return this.Gtt(!1),this.cQ.rZ(this),this.cQ.aZ(this),this.EW(),!0}Ltt(){return this.Gtt(!1),this.cQ.aZ(this),this.EW(),!0}mW(t=!1){this.dW()||(this.xtt(t),this.cQ.pZ(this),this._Z()&&this.dZ())}e0(t=!0,s=!1){if(!this.dW()){if(!this.vtt()&&this.btt())return this.cQ.fZ(this);if(!this._Z()){this.mW(!0),this.ctt()?this._tt(0):this._tt(this.bW());const i=this.zR();this.Ctt(),s?this.ktt(i):this.Ett(i,!1,!1,!0),t&&this.Rtt(),this.Ptt(),this.RY&&t&&this.FO().bO()}}}Ntt(){this.e0(!1,!0)}ktt(t){this.Ett(t,!1,!1,!0,NaN,!1,!0)}SY(){if(!this.dW()){if(!this.FO().H$()&&this.Btt())return!1;this.cQ.mZ(this),this.FO().H$()||this.Ntt()}return!0}Itt(){this.SZ(!0)}wZ(){this.SZ(!1,!0),this.lZ(!1),this.uZ(!1)}SZ(t=!1,s=!1){if(!this.yZ()||s){if(t){this.DQ=!1,this.IQ=!0,this.OQ=!0,this.Ctt();for(const i of this.dQ)i.SZ()}else if(this.lZ(!0),this.uZ(!1),this.gtt(),this._Z()){this.RQ=-1,0!==this.xQ&&(this.MQ=Math.abs(this.MQ)),this.xQ=0,this.GQ=1,this.CQ=!1,this.DQ=!1,this.IQ=!0,this.OQ=!0,this.ctt()?this._tt(0):this._tt(this.bW()),this.Ctt();for(const e of this.dQ)e.SZ()}else{this.OQ=!0,this.DQ=!1,this.Ctt();for(const h of this.dQ)h.Wtt()}this.Ptt()}}bZ(){return this.RY}Ctt(){this.WQ=0;for(const t of this.dQ)t.NC()&&(this.WQ=1)}Ptt(){this.RY=0;for(const t of this.dQ)t.jtt(),0===this.RY&&1===t.bZ()&&(this.RY=1),this.mQ||1!==t.Htt()||(this.mQ||(this.mQ=[]),this.gQ=this.mQ.push(t))}xZ(t,s,i){if(this.ltt()){if(0===t&&0===this.LQ)return;this.LQ=t,t=i}else{if(0===i&&0===this.LQ)return;t=this.LQ=i,s=1}const e=this.bQ+this.vQ,h=t*s*this.MQ,n=e+h,r=this.fQ.Vtt;n<0?(this.bQ=0,this.vQ=-n):r<=n?(this.bQ=r,this.vQ=this.bQ-n):(this.bQ=n,this.vQ=0);let o=!1,a=!1,l=this.MW(),u=this.GW();l||u?l&&!u?0<this.MQ?this.bQ>=r&&(this.Att(0),a=!0):this.bQ<=0&&(this.Att(r),a=!0):!l&&u?0<this.MQ?this.bQ>=r&&(this._tt(r),this.TW(-1*this._W()),a=!0,1===this.xQ?this.GQ<this.F6()?(this.GQ++,this.xQ=0):o=!0:0===this.xQ&&(this.xQ=1)):this.bQ<=0&&(this._tt(0),this.TW(-1*this._W()),a=!0,1===this.xQ?this.GQ<this.F6()?(this.GQ++,this.xQ=0):o=!0:0===this.xQ&&(this.xQ=1)):l&&u&&(0<this.MQ?this.bQ>=r&&(this._tt(r),this.TW(-1*this._W()),a=!0,this.xQ++,v.wrap(this.xQ,0,2)):this.bQ<=0&&(this._tt(0),this.TW(-1*this._W()),a=!0,this.xQ++,v.wrap(this.xQ,0,2))):0<this.MQ?this.bQ>=r&&(this.GQ<this.F6()?(this.GQ++,this.Att(0),a=!0):(this._tt(r),o=!0)):this.bQ<=0&&(this.GQ<this.F6()?(this.GQ++,this.Att(r),a=!0):(this._tt(0),o=!0));let c,f=this.pQ;if(o){for(c=0;c<f;c++)this.dQ[c].Utt();this.mW(!0),this.ytt()}else{const d=this.gQ;for(c=0;c<d;c++)this.mQ[c].ztt();if(1===this.WQ)for(c=0;c<f;c++){const p=this.dQ[c],m=p.Jtt(),g=this.bQ-m,y=e-m;g<0&&0<y?(this.bQ=m<0?0:r<=m?r:m,p.Lc(m,!0,!1,a,this.OQ,!1)):p.Lc(this.bQ,!0,!1,a,this.OQ,!1)}else for(c=0;c<f;c++)this.dQ[c].Lc(this.bQ,!0,!1,a,this.OQ,!1);for(c=0;c<d;c++)this.mQ[c].qtt();this.OQ&&(this.OQ=!1)}}Ett(s,i=!1,e=!1,h=!1,n=NaN,t=!1,r=!1){for(const o of this.dQ)o.ztt();for(const a of this.dQ){let t=s;if("number"==typeof n&&!isNaN(n)){const l=this.zR(),u=l-a.Jtt(),c=n-a.Jtt();u<0&&0<c&&(t=a.Jtt(),this._tt(t))}a.Lc(t,i,e,h,this.OQ,r)}for(const f of this.dQ)f.qtt();this.OQ&&t&&(this.OQ=!1)}$tt(){const t=this.fQ.qQ().Xtt(),s=v.$Q.VM(this,t);return this.pQ=this.dQ.push(s),s}VY(){if(!this.dW())for(const t of this.dQ)t.Ytt()}EZ(){for(const t of this.dQ)t.EZ()}Ztt(){for(const t of this.dQ)t.Ktt()}Qtt(t,s,i){if(s){if("number"==typeof i&&0<=i){const e=this.dQ[i];return e?(e.tst(s),void this.cQ.XY(s.SN(),this)):void 0}for(const h of this.dQ)if(h.QQ())if(t){if(h.jW()===t){h.tst(s),this.cQ.XY(s.SN(),this);break}}else if(!h.sst()){h.tst(s),this.cQ.XY(s.SN(),this);break}}}QY(t,s){for(const i of this.dQ)if(i.QQ())if(s){if(s===i.jW()&&t===i.kW())return!0}else if(t===i.kW())return!0;return!1}TZ(){return this.dQ.some(t=>!t.QQ()||t.ist())}Btt(){return this.dQ.some(t=>{if(t.QQ()){if(!t.ist())return!1;const s=t.SN();return!!s&&s.Mz()}return!1})}VW(t){for(const s of this.XZ())for(const i of s.est())if(i.hst()===t)return i}nst(t){for(const s of this.dQ)if(t===s.kW())return s;return null}rst(t){let s=t?t.split(" "):[],i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const e of this.XZ())for(const h of e.ost()){const n=s.every(t=>h.ast(t));if(n)return h}}YY(){const t=[];for(const s of this.XZ())t.push(s.SN());return t.filter(t=>t)}IY(){for(const t of this.XZ())t.IY()}aq(){return{tracksJson:this.lst(),name:this.ln,playheadTime:this.zR(),playbackRate:this.MQ,pingPongState:this.xQ,currentRepeatCount:this.GQ,isPlaying:this.TQ,isScheduled:this._Q,initialStateSet:this.IQ,finishedTriggers:this.DQ,complete:this.CQ,released:this.EQ,markedForRemoval:this.PQ,completedTick:this.RQ,implicitPause:this.AQ,isTemplate:this.FQ,tags:this.kQ.join(" "),stringTags:this.NQ,tagsChanged:this.BQ,firstTick:this.OQ}}lq(t){t&&(this.ust(t.tracksJson),this.ln=t.name,this.bQ=t.playheadTime,this.MQ=t.playbackRate,this.xQ=t.pingPongState,this.GQ=t.currentRepeatCount,this.TQ=!!t.isPlaying,this._Q=!!t.isScheduled,this.IQ=!!t.initialStateSet,this.DQ=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.CQ=!!t.complete,this.EQ=!!t.released,this.PQ=!!t.markedForRemoval,this.RQ=t.completedTick,this.AQ=!!t.implicitPause,this.FQ=!!t.isTemplate,this.kQ=t.tags.split(" "),this.NQ=t.stringTags,this.BQ=!!t.tagsChanged,this.OQ=!!t.firstTick)}lst(){return this.dQ.map(t=>t.aq())}ust(t){this.Ztt(),t.forEach((t,s)=>{const i=this.dQ[s];i.lq(t)}),this.dQ.filter(t=>t.ist())}static mtt(t){const s=this.IW();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static dtt(t){if(v.De(t))return t.slice(0);if(v.we(t))return t.split(" ");throw new Error("invalid tags")}cst(){return this.jQ||(this.jQ=v.hn(self.FW,this)),this.jQ}}}{const Nn=self.Ds;Nn.$Q=class extends Nn.tn{constructor(t,s){super(),this.JZ=t,this.fst=s,this.dst=s.qQ(),this.pst=NaN,this.mst=NaN,this.gst=null,this.yst=null,this.wst=!1,this.AC=0<s.Jtt(),this.Sst=!1,this.bst=!1,this.vst=NaN,this.Mst=null,this.xst=this.fst.Tst().Gst(),this._st=[],this.Ist(),this.Cst=0,this.RY=0,this.Est=0}static VM(t,s){return Nn.hn(Nn.$Q,t,s)}nn(){this.xst=null;for(const t of this._st)t.nn();Nn.Lr(this._st),this._st=null,this.JZ=null,this.gst=null,this.yst=null,this.fst=null,this.Mst=null}Ist(){for(const t of this.fst.Rst().Pst())this._st.push(Nn.Ast.VM(this,t))}Ytt(){for(const t of this._st)t.Ytt()}EZ(){for(const t of this._st)t.EZ();this.gst=null,this.yst=null}Fst(){return this.JZ}FO(){return this.JZ.FO()}ost(){return this.xst||(this.xst=this.fst.Tst().Gst()),this.xst}est(){return this._st}VW(s){for(let t=0;t<this._st.length;t++){const i=this._st[t];if(i.hst()===s)return i}}Dst(){this.gst||this.kW()}Ost(){return!!this.gst&&!this.gst.jj()}ist(){if(!this.QQ())return!1;const t=this.Lst(),s=this.FO().aO(t);return!!s&&!s.jj()}SN(){if(this.QQ()){const t=this.kst();if(-1!==t)return this.FO().fz(t)}}Nst(){return this.JZ.XZ().indexOf(this)}Ktt(){this.gst=null,this.pst=NaN,this.yst=null,this.mst=NaN,this.wst=!0}sst(){return!!this.gst}kW(){if(!this.wst){if(!this.gst||!this.Ost()){const t=this.Lst();this.gst=this.FO().aO(t)}return this.gst}}tst(t){if(this.wst=!1,this.gst!==t){this.EZ(),this.gst=t,this.mst=t.SN().dF(),this.pst=t.FN(),this.yst=t.dO();for(const s of this.Bst()){const i=s.Wst,e=s.jst,h=i.Hst();switch(h){case"instance-variable":{e.Vst();const n=t.SN(),r=n.Ust(s.name),o=n.zst(r),a=n.Jst(r);o===s.name&&a===s.type&&e.qst(r);break}case"behavior":{const l=s.g6,u=this.SN(),c=t.SN(),f=e.w6(c);if(l&&f){const d=l.Jc();u.$st(d),c.$st(d),e.Vst(),e.Xst(f.zz())}break}}}}}*Bst(){for(const t of this._st){const s=t.ZQ(),i=this.SN(),e={Wst:t,jst:s};switch(t.Hst()){case"world-instance":e.property=t.hst();break;case"instance-variable":{const h=s.Vst();e.name=i.zst(h),e.type=i.Jst(h);break}case"effect":{const n=i.kk(),r=s.Yst(n);e.Zst=r;break}case"behavior":{const o=s.w6(i);e.g6=o;break}case"plugin":e.dk=i.pk()}yield e}}dO(){if(!this.yst||!this.Ost()){const t=this.kW();t&&(this.yst=t.dO())}return this.yst}Kst(){return this.fst}Lst(){return isNaN(this.pst)?this.fst.Lst():this.pst}Qst(t){this.fst.Qst(t)}ett(){return this.fst.ett()}htt(t){this.fst.htt(t)}oK(){return this.fst.oK()}jW(){return this.fst.jW()}Jtt(){return this.fst.Jtt()}tit(){return this.fst.tit()}sit(t){this.fst.sit(t)}ntt(t){this.fst.ntt(t)}LW(t){for(const s of this.ost())s.LW(t);for(const i of this.est())i.LW(t)}iit(){return this.fst.iit()}eit(t){this.fst.eit(t)}kst(){return isNaN(this.mst)?this.fst.kst():this.mst}hit(t){this.fst.hit(t)}nit(t){this.fst.nit(t)}rit(){const t=this.kW();if(t){const s=t.a6();if(s.oit())return t.a6().rit()}return this.fst.rit()}ait(t){this.fst.ait(t)}lit(){const t=this.kW();if(t){const s=t.a6();if(s.oit())return t.a6().lit()}return this.fst.lit()}Qx(){return this.fst.Qx()}Jc(){return this.fst.Jc()}QQ(){return 0===this.Qx()}uit(){return 1===this.Qx()}cit(){return 2===this.Qx()}fit(){return this.Cst}bZ(){return this.RY}Htt(){return this.Est}NC(){return this.AC}Ftt(){for(const t of this._st)t.Ftt()}SZ(){if(this.Dst(),this.Ost()||!this.QQ()){const t=this.Fst(),s=t.ctt(),i=s?0:this.tit();for(const h of this._st)h.SZ(i),0===this.Cst&&1===h.fit()&&(this.Cst=1),0===this.RY&&1===h.bZ()&&(this.RY=1);this.Est=0;const e=this._st.some(t=>t.Htt());e&&(this.Est=1),this.Mst=this.dit(i),this.Sst=!1,this.bst=!1,this.Lc(i),this.pit(this.dit(i))}}Wtt(){if(this.Dst(),this.Ost()||!this.QQ()){this.JZ.ctt();const t=this.JZ.zR()-this.Jtt();this.Mst=this.dit(t);for(const s of this._st)s.Wtt(t)}}Utt(){if(!this.Fst()._Z()&&(this.Dst(),this.Ost()||!this.QQ())&&!this.AC){const t=this.JZ.zR(),s=this.Jtt()+this.tit();s<=t?this.Lc(this.tit(),!0,!1,!0,!1,!1,!0):t<=0&&this.Lc(0,!0,!1,!0,!1,!1,!0)}}jtt(){for(let t=0,s=this._st.length;t<s;t++){const i=this._st[t];i.jtt(),0===this.Cst&&1===i.fit()&&(this.Cst=1),0===this.RY&&1===i.bZ()&&(this.RY=1)}}ztt(){const s=this._st.length;for(let t=0;t<s;t++)this._st[t].ztt()}Lc(i,t=!1,e=!1,h=!1,s=!1,n=!1,r=!1){this.gst||this.kW();const o=this.gst&&!this.gst.jj(),a=0===this.fst.cf;if((o||!a)&&!(n&&a&&this.SN().Mz()||(i-=this.Jtt())<0)){this.mit(i,t),this.git(i,t,s);for(let t=0,s=this._st.length;t<s;t++)this._st[t].Lc(i,e,h,r);this.yit(i,t),0!==this.Cst&&(this.yst||(this.yst=this.gst.dO()),this.yst)&&this.yst.N4()}}qtt(){const s=this._st.length;for(let t=0;t<s;t++)this._st[t].qtt()}mit(t,s){if(s&&this.AC&&!this.Sst){const i=this.Fst();if(i.ctt()){if(t<0)return}else if(t>this.tit())return;for(const e of this._st)e.SZ();this.Sst=!0}}yit(t,s){if(s&&this.AC&&!this.bst){const i=this.Fst();if(i.ctt()){if(t>=this.tit()){for(const e of this._st)e.Lc(this.tit(),!1,!0);this.bst=!0}}else if(t<=0){for(const h of this._st)h.Lc(0,!1,!0);this.bst=!0}}}git(t,s,i){if(!i&&s&&Nn.Q$.Timeline){const e=this.Fst(),h=this.Mst.QZ(),n=this.Mst.zR(),r=h?h.zR():e.bW();if(t<=n||r<=t)if(this.Mst=this.dst.wit(t,this.fst),e.ctt())h&&this.pit(this.Mst);else{const o=this.Mst.QZ();o&&this.pit(o)}}}dit(t){const s=this.dst.Sit(t,this.fst);return s||this.dst.wit(t,this.fst)}pit(t){if(Nn.Q$.Timeline){const s=this.Fst(),i=s.XQ();Nn.Q$.Timeline.Z$.PushTriggerTimeline(s),Nn.Q$.Timeline.Z$.PushTriggerKeyframe(t),i.r4(Nn.Q$.Timeline.Z$.OnAnyKeyframeReached),i.r4(Nn.Q$.Timeline.Z$.pit),Nn.Q$.Timeline.Z$.PopTriggerTimeline(s),Nn.Q$.Timeline.Z$.PopTriggerKeyframe(t)}}bit(){const t=this.fst.Tst(),s=t.vit();return s}Mit(){const t=this.fst.Rst(),s=t.xit(),i=Nn.Ast.VM(this,s);return this._st.push(i),i}Git(t){const s=this.fst.Tst();s.Tit(t)}_it(t){for(const s of this._st)s._it(t)}Iit(){for(const t of this._st)t.Iit()}Cit(){if(this.Dst(),this.Ost()||!this.QQ())for(const t of this._st)t.Cit()}Eit(){if(this.Dst(),this.Ost()||!this.QQ()){let t=!1;for(const s of this._st){const i=s.Eit();!t&&i&&(t=!0)}if(t){const e=this.bit();e.wW(this.Fst().zR()),e.LW("noease"),e.eit(!0),e.ftt("")}}}IY(){isNaN(this.vst)||this.Pit(this.vst),this.vst=NaN}aq(){const t=this.kW(),s=t?t.FN():this.Lst();return{propertyTracksJson:this.Rit(),lastKeyframeDataItemJson:this.Ait(),initialStateOfNestedSet:this.Sst,endStateOfNestedSet:this.bst,instanceUid:s,cleared:this.wst}}lq(t){if(t){this.Fit(t.propertyTracksJson),this.Dit(t.lastKeyframeDataItemJson),this.vst=t.instanceUid,this.Sst=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Sst=t.initialStateOfNestedSet),this.bst=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.bst=t.endStateOfNestedSet),this.wst=!!t.hasOwnProperty("cleared")&&t.cleared;for(const s of this._st)0===this.Cst&&1===s.fit()&&(this.Cst=1),0===this.RY&&1===s.bZ()&&(this.RY=1);this.Est=0,this._st.some(t=>t.Htt())&&(this.Est=1)}}Ait(){const t=this.fst.Tst();return t.Oit(this.Mst)}Rit(){return this._st.map(t=>t.aq())}Fit(t){t.forEach((t,s)=>{const i=this._st[s];i.lq(t)})}Pit(t){if(Nn.ae(t)){const s=this.FO().aO(t);if(s){const i=this.Fst();i.Qtt(this.fst.jW(),s,this.Nst())}}}Dit(t){const s=this.fst.Tst();this.Mst=s.Lit(t)}}}{const Bn=self.Ds;Bn.Ast=class extends Bn.tn{constructor(t,s){super(),this.kit=t,this.Nit=s,this.Bit=s.Rst(),this.Cst=0,this.RY=0,this.Est=0,this.Wit=this.ZQ(),this.jit=this.Nit.Vit().Hit(),this.Uit=null,this.zit=null}static VM(t,s){return Bn.hn(Bn.Ast,t,s)}nn(){this.kit=null,this.Wit&&(this.Wit.nn(),this.Wit=null),this.jit=null,this.Nit=null,this.Bit=null}fit(){return this.Cst}bZ(){return this.RY}Htt(){return this.Est}Jit(){return!!this.zit}qit(t){this.zit=t}$it(){return this.zit}Xit(){return this.kit}Yit(){return this.Nit}Rst(){return this.Bit}Fst(){return this.kit.Fst()}FO(){return this.kit.FO()}kW(){return this.kit.kW()}ZQ(){if(!this.Wit){let t=this.Nit.Hst(),s;switch(t){case"behavior":s=new Bn.Ast.Zit(this);break;case"effect":s=new Bn.Ast.Kit(this),this.RY=1;break;case"instance-variable":s=new Bn.Ast.Qit(this);break;case"plugin":s=new Bn.Ast.tet(this),this.RY=1;break;case"world-instance":s=new Bn.Ast.iet(this),this.RY=1,this.Cst=1;break;case"value":s=new Bn.Ast.eet(this);break;case"audio":s=new Bn.Ast.het(this)}this.Wit=s}return this.Wit}Hst(){return this.Nit.Hst()}net(t){this.Nit.net(t)}ret(){return this.Nit.oet()}aet(t){this.Nit.let(t)}HW(){return this.ZQ().uet()}hst(){return this.Nit.cet()}fet(t){this.Nit.det(t)}pet(){return this.Nit.Qx()}met(t){this.Nit.yet(t)}wet(){return this.Rst().bet(this.Nit).Qx()}vet(){return this.Nit.vet()}Met(t){this.Nit.Met(t)}xet(){return this.Nit.xet()}Get(t){this.Nit.Get(t)}iit(){return this.Nit.iit()}eit(t){this.Nit.eit(t)}ett(){return this.Nit.ett()}htt(t){this.Nit.htt(t)}oK(){return this.Nit.oK()}ntt(t){this.Nit.ntt(t)}LW(t){for(const s of this.Tet())s.LW(t)}_et(){return this.Nit._et()}Tet(){return this.jit||(this.jit=this.Nit.Vit().Hit()),this.jit}KZ(){return this.Nit.Vit().KZ()}Iet(t){return this.Bit.Iet(t,this.Nit)}Cet(t){return this.Bit.Cet(t,this.Nit)}Eet(t){let s=this.Bit.Iet(t,this.Nit),i;return i=s?this.Bit.Pet(t,this.Nit):(s=this.Bit.Cet(t,this.Nit),this.Bit.Ret(t,this.Nit)),{start:s,end:i}}*Aet(){for(const t of this.Tet())yield t.pK()}*Fet(){for(const t of this.Tet())yield t.zR()}Ytt(){this.ZQ().Ytt()}EZ(){this.ZQ().EZ()}Det(){return this.ZQ().Det()}Ftt(){this.ZQ().Ftt()}SZ(t){this.ZQ().SZ(),this.Uit=this.Oet(t),this.jtt()}Wtt(t){this.ZQ().Wtt(),this.Uit=this.Oet(t)}jtt(){const t=this.Xit();if(this.Est=0,t.QQ()){const s=this.Fst(),i=t.kW(),e=this.ZQ(),h=this.hst(),n=e.Let();if(n){const r=s.YQ(i,e,h,this);r&&r.length&&(this.Est=1)}else this.Est=0}}Oet(t){const s=this.Fst(),i=this.Bit.Iet(t,this.Nit);return i||(s.ctt()?this.Bit.Cet(t,this.Nit):this.Bit.Ret(t,this.Nit))}ztt(){this.Wit.ztt()}Lc(t,s=!1,i=!1,e=!1){let h,n,r=!1;if(s)h=this.Bit.Cet(t,this.Nit);else{if(this.Uit){const o=this.Fst(),a=this.Uit.QZ(),l=this.Uit.zR(),u=a?a.zR():o.bW();(t<=l||u<=t)&&(this.Uit=this.Bit.Cet(t,this.Nit),r=!0)}else this.Uit=this.Bit.Cet(t,this.Nit),r=!0;h=this.Uit}h&&(n=h.QZ()),this.Wit.Lc(t,h,n,s,i,e,r)}ket(t){if(this.Uit){const e=this.Fst(),h=this.Uit.QZ(),n=this.Uit.zR(),r=h?h.zR():e.bW();(t<=n||r<=t)&&(this.Uit=this.Bit.Cet(t,this.Nit))}else this.Uit=this.Bit.Cet(t,this.Nit);const s=this.Uit,i=s.QZ();return this.Wit.ket(t,s,i)}Net(t,s,i){return this.Wit.ket(t,s,i)}qtt(){this.Wit.qtt()}static Bet(t,s){const i=s.Yit(),e=s.Bit;return e.Cet(t,i)}static Wet(t,s){const i=s.Yit(),e=s.Bit;return e.Ret(t,i)}jet(){const t=this.Nit.Vit(),s=t.Het();return this.Uit=null,s}_it(t){this.Uit=null;const s=this.Nit.Vit();s.Vet(t)}Iit(){this.ZQ().Iit()}Cit(){const t=this.ZQ().Cit();if(t){const s=this.Bit.bet(this.Nit),i=this.ZQ().Det();s.Uet(i)}}Eit(){const t=this.ZQ().Eit();return t&&this.zet(),this.ZQ().Jet(),t}zet(){const t=this.Fst().zR(),s=this.ZQ(),i=Bn.Ast.Bet(t,this),e=this.jet();e.yet(i.Qx()),e.wW(t),e.LW(i.qet()),e.eit(!0),e.$et(s.Xet()),e.Uet(s.Det())}aq(){return{sourceAdapterJson:this.ZQ().aq()}}lq(t){t&&this.ZQ().lq(t.sourceAdapterJson)}}}{const Wn=self.Ds,jn=Wn.Ast;jn.iet=class{constructor(t){this.Yet=t,this.Zet=null,this.Ket()}nn(){this.Zet&&(this.Zet.nn(),this.Zet=null),this.Yet=null}Let(){return this.Zet.Let()}VW(){return this.Yet}Ytt(){this.Zet&&this.Zet.Ytt()}EZ(){this.Zet&&this.Zet.EZ()}Ket(){return this.Zet||(this.Zet=this.Qet()),this.Zet}Vst(){}dF(){return this.Vst()}tht(){}Ftt(){this.Ket().Ftt()}SZ(){this.Ket().SZ()}Wtt(){this.Ket().Wtt()}ztt(){this.Zet.sht()}Lc(t,s,i,e,h,n,r){let o=this.Yet.wet(),a;switch(o){case"numeric":a=jn.iht.Lc(t,s,i,this.Yet);break;case"angle":a=jn.eht.Lc(t,s,i,this.Yet);break;case"boolean":a=jn.hht.Lc(t,s,i,this.Yet);break;case"color":a=jn.nht.Lc(t,s,i,this.Yet);break;case"text":a=jn.rht.Lc(t,s,i,this.Yet)}this.Zet.oht(t,a,s,i,e,h,n,r)}ket(t,s,i){switch(this.Yet.wet()){case"numeric":return jn.iht.Lc(t,s,i,this.Yet);case"angle":return jn.eht.Lc(t,s,i,this.Yet);case"boolean":return jn.hht.Lc(t,s,i,this.Yet);case"color":return jn.nht.Lc(t,s,i,this.Yet);case"text":return jn.rht.Lc(t,s,i,this.Yet)}}qtt(){this.Zet.aht()}Iit(){this.Ket().lht()}Jet(){this.Ket().Jet()}Det(){return this.Ket().Det()}Cit(){return this.Ket().Cit()}Eit(){return this.Ket().Eit()}Xet(){const t=this.Yet,s=t.Xit(),i=s.Fst().zR(),e=jn.Bet(i,t),h=e.QZ(),n=t.wet();switch(n){case"numeric":return jn.iht.Lc(i,e,h,t);case"angle":return jn.eht.Lc(i,e,h,t);case"boolean":return jn.hht.Lc(i,e,h,t);case"color":return jn.nht.Lc(i,e,h,t);case"text":return jn.rht.Lc(i,e,h,t)}}Qet(){const t=this.Yet,s=t._et()?t.wet():"";switch(s){case"combo":case"boolean":case"text":case"string":return new jn.cht.uht(this);case"numeric":case"number":case"angle":return new("combo"===this.Yet.pet()?jn.cht.uht:jn.cht.fht)(this);case"color":case"offsetColor":return new jn.cht.dht(this);default:return new jn.cht.fht(this)}}aq(){return{propertyAdapterJson:this.Ket().aq()}}lq(t){t&&this.Ket().lq(t.propertyAdapterJson)}}}{const Hn=self.Ds;class Vn extends Hn.Ast.iet{constructor(t){super(t),this.pht=NaN}Vst(){return this.Yet.Yit().oet()[0]}dF(){return this.pht||super.dF()}tht(){return this.Yet.Xit().kW()}qst(t){const s=this.Yet.Yit().oet()[0];s!==t&&(this.pht=t)}Lc(t,s,i,e,h,n,r){this.Ket().mht(s.uet())&&super.Lc(t,s,i,e,h,n,r)}ket(t,s,i){if(this.Ket().mht(s.uet()))return super.ket(t,s,i)}aq(){return Object.assign(super.aq(),{index:this.pht})}lq(t){t&&(super.lq(t),this.pht=t.index)}}Hn.Ast.Qit=Vn}{const Un=self.Ds;class zn extends Un.Ast.iet{constructor(t){super(t),this.cU=NaN}Vst(){const t=this.Yet.Yit();return t.oet()[1]}tht(){const t=this.Yet.Yit(),s=this.Yet.Xit(),i=this.cU||t.oet()[0],e=s.kW(),h=e.ght(i),n=e.yht()[h];return n.a6()}w6(t){const s=this.Yet.Yit(),i=s.oet()[2];return t.wht(i)}Xst(t){const s=this.Yet.Yit();s.oet()[0]!==t&&(this.cU=t)}Lc(t,s,i,e,h,n,r){const o=this.Yet.Xit(),a=o.kW();this.w6(a.SN())&&super.Lc(t,s,i,e,h,n,r)}ket(t,s,i){const e=this.Yet.Xit(),h=e.kW();if(this.w6(h.SN()))return super.ket(t,s,i)}aq(){return Object.assign(super.aq(),{sid:this.cU})}lq(t){t&&(super.lq(t),this.cU=t.sid)}}Un.Ast.Zit=zn}{const Jn=self.Ds;class qn extends Jn.Ast.iet{constructor(t){super(t)}Vst(){return this.Yet.Yit().oet()[1]}tht(){const t=this.Yet,s=t.Xit(),i=s.dO(),e=i.O4(),h=e.kk(),n=this.Yst(h),r=n.dF();return e.G6(r)?e.Sht(r):null}Yst(t){const s=this.Yet,i=s.Yit().oet()[0];return t.bht(i)}Lc(t,s,i,e,h,n,r){this.vht()&&super.Lc(t,s,i,e,h,n,r)}ket(t,s,i){if(this.vht())return super.ket(t,s,i)}vht(){const t=this.Yet,s=t.Xit(),i=s.dO(),e=i.O4(),h=e.kk(),n=this.Yst(h);if(n){const r=n.dF();return e.G6(r)}}}Jn.Ast.Kit=qn}{const $n=self.Ds;class Xn extends $n.Ast.iet{constructor(t){super(t)}Vst(){return this.Yet.Yit().oet()[0]}tht(){return this.Yet.Xit().kW().a6()}Lc(t,s,i,e,h,n,r){const o=this.Yet.Xit(),a=o.SN().pk(),l=o.kW().SN().pk();a===l&&super.Lc(t,s,i,e,h,n,r)}ket(t,s,i){const e=this.Yet.Xit(),h=e.SN().pk(),n=e.kW().SN().pk();if(h===n)return super.ket(t,s,i)}Mht(){const t=this.Yet.Xit(),s=t.SN().pk();if($n.Q$.xht&&s instanceof $n.Q$.xht&&("initial-frame"===this.Yet.hst()||"initial-animation"===this.Yet.hst()))switch(this.Yet.oK()){case"relative":case"absolute":return null}}}$n.Ast.tet=Xn}{const Yn=self.Ds;class Zn extends Yn.Ast.iet{constructor(t){super(t),this.Ght=0,this.Tht=!1}Let(){return!1}SZ(){let t=this.Yet.Rst(),s=this.Yet.Yit();s=t.bet(s),this.Ght=s.pK()}Wtt(){}uet(){return this.Tht||this.Yet.Lc(0),this.Ght}Lc(t,s,i,e,h,n,r){this.Ght=Yn.Ast.iht.Lc(t,s,i,this.Yet),this.Tht=!0}Iit(){}Jet(){}Det(){return this.Ght}Cit(){return!1}Eit(){return!1}aq(){return{value:this.Ght,init:this.Tht}}lq(t){t&&(this.Ght=t.value,this.Tht=!t.hasOwnProperty("init")||t.init)}}Yn.Ast.eet=Zn}{const Kn=self.Ds;class Qn extends Kn.Ast.iet{constructor(t){super(t),this._ht=!1,this.Iht=null,this.Cht=null,this.Eht=null,this.JZ=this.Yet.Fst(),this.kit=this.Yet.Xit(),this.Pht=this.Yet.ret(),this.Rht=this.Pht[0],this.Aht=this.Pht[1],this.Pht[3]?this.Fht=this.Pht[3]:this.Fht=Math.random().toString(36).slice(2),this.Dht=NaN,this.Oht=NaN,this.Lht=NaN,this.kht=null,this.Nht()}nn(){super.nn(),this.Iht=null,this.Cht=null,this.Eht=null,this.JZ=null,this.kit=null,this.Pht=null,this.Rht=null,this.kht=null}Nht(){if(self.Ds.Q$.Audio){const t=this.Yet.FO(),s=t.Bht(self.Ds.Q$.Audio);s&&(this.Iht=s.ck().a6()),this.Cht=self.Ds.Q$.Audio.Wht,this.Eht=self.Ds.Q$.Audio.jht}}Hht(){if(!this.kht){const t=this.Yet.Xit(),s=t.VW("audioSource");s&&(this.kht=s.ZQ())}}Vht(){const t=this.Yet.Xit(),s=t.VW("volume");return(s?s.ZQ():this).Oht}Ytt(){super.Ytt(),this._ht=!1,this.Iht&&(this.Eht&&(this.Dht=this.Eht.PlaybackTime.call(this.Iht,this.Fht),this.Oht=this.Eht.Volume.call(this.Iht,this.Fht)),this.Cht)&&this.Cht.mW.call(this.Iht,this.Fht)}Uht(){return this.Fht}zht(){return this.Lht}Jht(t){this.Lht=t}SZ(){super.SZ(),this.Dht=NaN,this._ht=!1}Wtt(){super.Wtt();const t=this.Yet.Fst(),s=t.zR();switch(this.Dht=s-this.Aht,this.Yet.hst()){case"audioSource":break;case"volume":this.Oht=this.Yet.ket(s)}this._ht=!1}Lc(t,s,i,e,h,n,r){if(this.Iht)switch(this.Yet.hst()){case"audioSource":{if(!this.JZ.ctt())return;if(e)return void(this.Cht&&this.Cht.mW.call(this.Iht,this.Fht));if(t<this.Aht)return void(this._ht=!1);const o=this.Eht.PlaybackRate.call(this.Iht,this.Fht),a=this.JZ._W();if(a!==o&&this.Cht.TW.call(this.Iht,this.Fht,a),this._ht)return;if(!this.Yet.Fst().IsPlaying())return;if(this._ht=!0,isNaN(this.Dht)){const l=self.performance.now(),u=t-this.Aht,c=this.Iht.GetAudioContextState();if("suspended"===c)return void(this._ht=!1);const f=self.performance.now(),d=(f-l)/1e3,p=u+d;if(this.Cht){let t=this.zht();isNaN(t)?(this.Jht(0),t=0):this.Jht(t),this.Cht.PlayFromTimeline.call(this.Iht,this.Rht,t,this.Fht,p)}}else{const m=this.Dht,g=(this.Dht=NaN,this.Vht()),y=(this.Oht=NaN,this.Iht.GetAudioContextState());if("suspended"===y)return void(this._ht=!1);this.Cht&&(this.Jht(g),this.Cht.PlayFromTimeline.call(this.Iht,this.Rht,g,this.Fht,m))}break}case"volume":this.Hht(),super.Lc(t,s,i,e,h,n,r)}}ket(t,s,i){if(this.Iht)switch(this.Yet.hst()){case"audioSource":return;case"volume":return this.Hht(),super.ket(t,s,i)}}qht(t,s){return this.kht?this.kht.zht():0}$ht(t,s,i,e){this.kht&&this.kht.Jht(this.qht()+s),this.Cht&&this.kht&&this.Cht.Jht.call(this.Iht,this.kht.Uht(),this.kht.zht())}Xht(t,s,i){this.kht&&this.kht.Jht(s),this.Cht&&this.kht&&this.Cht.Jht.call(this.Iht,this.kht.Uht(),this.kht.zht())}Yht(){return!0}aq(){return{audioPlaybackStarted:this._ht,audioTag:this.Fht,pauseTime:this.Dht,pauseVolume:this.Oht,volume:this.Lht}}lq(t){t&&(this._ht=t.audioPlaybackStarted,this.Fht=t.audioTag,this.Dht=t.pauseTime,this.Oht=t.pauseVolume,this.Lht=t.volume,this.Nht())}}Kn.Ast.het=Qn}{const tr=self.Ds;tr.Ast.cht=class{constructor(t){this.Wit=t,this.Yet=t.VW(),this.yst=this.Yet.Xit().dO(),this.Zht=this.Yet.hst(),this.Kht=!1,this.Qht=null,this.tnt=null}nn(){this.Wit=null,this.Yet=null,this.yst=null,this.Qht=null,this.tnt=null}Let(){return!1}Ytt(){}EZ(){this.yst=null,this.Qht=null,this.tnt=null}ZQ(){return this.Wit}VW(){return this.Yet}dO(){return this.yst||(this.yst=this.Yet.Xit().dO()),this.yst}snt(t){this.Kht=!!t}int(){return this.Kht}Ftt(){}SZ(){}Wtt(){}lht(){this.Qht=this.Det()}Jet(){this.Qht=null}Det(){}Cit(){}Eit(){}mht(t){const s=typeof this.ent(),i=typeof t;return s==i}sht(){}oht(t,s,i,e,h,n,r,o){}aht(){}hnt(){const t=this.nnt(()=>{const t=this.Yet.Yit(),s=this.Yet.Rst();return s.bet(t)},()=>{const t=this.Yet.Yit(),s=this.Yet.Rst();return s.rnt(t)});return t.ont()}ant(){const t=this.Yet.Fst(),e=t.zR()-this.Yet.Xit().Jtt(),s=this.nnt(()=>{const t=this.Yet.Yit(),s=this.Yet.Rst();return s.Cet(e,t)},()=>{const t=this.Yet.Yit(),s=this.Yet.Rst(),i=s.Ret(e,t);return i||s.rnt(t)});return s.ont()}nnt(t,s){const i=this.Yet.Fst();return(i.ctt()?t:s)()}lnt(t,s){const i=this.Yet.oK();return("relative"===i?t:s)()}unt(t,s){return(this.int()?(this.snt(!1),t):s)()}cnt(t){}fnt(){return this.Wit.dF()}dnt(){return this.tnt||(this.tnt=this.Wit.tht()),this.tnt}pnt(t,s,i,e,h,n){const r=this.Yet.Hst();switch(r){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return h();case"audio":return n()}}aq(){return{firstAbsoluteUpdate:this.Kht,saveState:this.Qht}}lq(t){t&&(this.Kht=t.firstAbsoluteUpdate,this.Qht=t.saveState)}mnt(t,s=!1){const i=[];for(const e of t){const h=e.Xit().Jtt();for(const n of e.Tet())(s&&0===n.zR()||!s)&&i.push({time:h+n.zR(),value:n.ont()})}return i.sort((t,s)=>t.time-s.time)}gnt(t,s,i){return this.ynt(s,i)}ynt(s,i){for(let t=i.length-1;0<=t;t--){const e=i[t].time;if(e<=s)return i[t]}return null}}}{const sr=self.Ds,ir=new Map,er=[0,0,0];class hr extends sr.Ast.cht{constructor(t){super(t)}Ftt(){}SZ(){}Wtt(){}Det(){const t=this.Yet.Hst(),s=this.dnt(),i=this.fnt();switch(t){case"behavior":return this.wnt(s.Snt(i));case"effect":return this.wnt(s[i]);case"plugin":return this.wnt(s.Snt(i));case"world-instance":return this.wnt(this.ent())}}Cit(){const t=this.hnt();return!this.bnt(t,this.ent())}Eit(){return!sr.fe(this.Qht)&&!this.bnt(this.Qht,this.ent())}bnt(t,s){return t=this.vnt(t),s=this.vnt(s),t.la(s)}hnt(){const t=super.hnt();return this.vnt(t)}ant(){const t=super.ant();return this.vnt(t)}cnt(t){}wnt(t){return(sr.$e(t,sr.Wo)?t.toArray():t).slice(0,3)}vnt(t){return sr.$e(t,sr.Wo)?t:new sr.Wo(t[0],t[1],t[2],1)}mht(t){return!0}Let(){return!0}sht(){const t=this.Yet.Fst(),s=this.Yet.kW(),i=this.Yet.ZQ(),e=t.YQ(s,i,this.Zht,this.Yet);if(e&&1<e.length){ir.has(s)||ir.set(s,new Map);const h=ir.get(s),n=this.Yet.Hst(),r=(h.has(n)||h.set(n,new Map),h.get(n));r.has(this.Zht)||r.set(this.Zht,{Mnt:!1,color:new sr.Wo(0,0,0,1)})}}xnt(t,s,i){const e=ir.get(t).get(s).get(i);return e.Mnt=!0,e.color}oht(t,s,i,e,h,n,r,o){const a=this.Yet.Fst(),l=this.Yet.Xit(),u=this.Yet.kW(),c=this.Yet.ZQ(),f=this.Yet.Hst(),d=this.Zht,p=a.YQ(u,c,d,this.Yet);if(p&&1<p.length){const m=this.mnt(p,!0),g=this.gnt(a,a.zR(),m);if(g){const y=l.Jtt(),w=g.time-y;if(0==w)this.xnt(u,f,this.Zht).qo(s[0],s[1],s[2]);else if(!(w<0)){const S=s[0],b=s[1],v=s[2],M=this.Yet.Lc(w,!1,!0),x=sr.Wo.Ha(S,M[0]),G=sr.Wo.Ha(b,M[1]),T=sr.Wo.Ha(v,M[2]);this.xnt(u,f,this.Zht).qo(x,G,T)}}}else this.Gnt(s[0],s[1],s[2])}aht(){const t=this.Yet.kW();if(ir.has(t)){const s=ir.get(t),i=this.Yet.Hst();if(s.has(i)){const e=s.get(i);if(e.has(this.Zht)){const h=e.get(this.Zht),n=h.Mnt,r=h.color;n&&this.Gnt(r.ta(),r.ia(),r.ea()),0===e.size&&s.delete(i),0===s.size&&ir.delete(t)}}}}ent(){const t=this.Yet.Hst(),s=this.dnt(),i=this.fnt();switch(t){case"behavior":return this.vnt(s.Snt(i));case"effect":return s[i].clone();case"plugin":return this.vnt(s.Snt(i));case"world-instance":return this.dO().Q4().clone()}}Gnt(t,s,i){const e=this.Yet.Hst(),h=this.dnt(),n=this.fnt();switch(e){case"behavior":er[0]=t,er[1]=s,er[2]=i,h.Tnt(n,er);break;case"effect":h[n].Jo(t,s,i);break;case"plugin":er[0]=t,er[1]=s,er[2]=i,h.Tnt(n,er);break;case"world-instance":this.dO()._nt(t,s,i)}}aq(){}lq(t){}}sr.Ast.cht.dht=hr}{const nr=self.Ds,rr=nr.Ast;class or extends nr.Ast.cht{constructor(t){super(t)}Ftt(){}SZ(){}Wtt(){}Det(){return this.ent()}Cit(){const t=this.hnt();return t!==this.Det()}Eit(){return!nr.fe(this.Qht)&&this.Qht!==this.Det()}Let(){return!1}oht(t,s,i,e,h,n,r,o){const a=this.Yet,l=a.Xit(),u=a.Hst(),c=a.Fst(),f=l.kW(),d=a.ZQ(),p=this.Zht,m=c.YQ(f,d,p,a);if(m&&1<m.length){const y=this.mnt(m),w=t+l.Jtt(),S=this.gnt(c,w,y);S&&(s=S.value)}const g=a.wet();switch(g){case"numeric":if(rr.iht.Int(this.fnt(),this.dnt(),s,u))break;return;case"angle":if(rr.eht.Int(this.fnt(),this.dnt(),s,u))break;return;case"boolean":if(rr.hht.Int(this.fnt(),this.dnt(),s,u))break;return;case"color":if(rr.nht.Int(this.fnt(),this.dnt(),s,u))break;return;case"text":if(!rr.rht.Int(this.fnt(),this.dnt(),s,u))return}this.Gnt(s)}ent(){const t=this.Yet.Hst(),s=this.dnt(),i=this.fnt();switch(t){case"behavior":return s.Snt(i);case"effect":return s[i];case"instance-variable":return s.Cnt(i);case"plugin":return s.Snt(i)}}Gnt(t){const s=this.Yet.Hst(),i=this.dnt(),e=this.fnt();switch(s){case"behavior":i.Tnt(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.Ent(e,t);break;case"plugin":i.Tnt(e,t)}}}nr.Ast.cht.uht=or}{const ar=self.Ds,lr=(ar.Ast.cht,new Map),ur=(t,s,i,e,h,n=!1,r=null,o=null)=>{lr.set(t,{Pnt:s,Rnt:i,Ant:e,round:h,Fnt:n,init:r,reset:o})};ur("offsetX",(t,s,i,e)=>{"relative"===e.Yet.oK()?t.Dnt(s,i.Fst().att()):t.Dnt(s)},(t,s)=>t.nv(s),t=>t.hv(),!0),ur("offsetY",(t,s,i,e)=>{"relative"===e.Yet.oK()?t.Ont(s,i.Fst().att()):t.Ont(s)},(t,s)=>t.av(s),t=>t.ov(),!0),ur("offsetWidth",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.Yet.oK(),l=1===i.Lnt.Qx();if((h||l)&&s._B()&&s.DB()){if(isNaN(i.knt)){let e=[],t=s.dB();for(;t;)e.push(t),t=t.dB();e.reverse();let a=(t,s)=>s.Fst().nst(t.kW()),h=(t,s)=>{const i=a(t,s);if(i)return i.rit();const e=t.kW().a6();return e.oit()?e.rit():t.Bnt().Nnt()},n=(t,s,i,e=0)=>{const h=a(t,s);if(!h)return e;const n=h.VW(i);if(!n)return e;const r=n.Yit().Vit();if(!r)return e;const o=r.rnt();return o?o.uet():e},r;if(l){let t=e[e.length-1];r=t.Qp()}else{let s=e[0],t=s.Bnt().Nnt(),i=s.Bnt().Wnt();r=t*i,r=(r+=n(s,o,"offsetWidth"))+h(s,o)*n(s,o,"offsetScaleX");for(let t=1;t<e.length;t++){const u=(s=e[t]).Bnt().Wnt();r=(r=(r*=u)+n(s,o,"offsetWidth"))+h(s,o)*n(s,o,"offsetScaleX")}}i.knt=0===r?Number.EPSILON:r}e||s.Lm(t/i.knt,!0)}else s.Lm(t)}},(t,s)=>t.am(s),t=>t.Qp(),!0),ur("offsetHeight",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.Yet.oK(),a=1===i.Lnt.Qx();if((h||a)&&s._B()&&s.LB()){if(isNaN(i.knt)){let e=[],t=s.dB();for(;t;)e.push(t),t=t.dB();e.reverse();let h=(t,s)=>{e=t;const i=s.Fst().nst(e.kW());var e;if(i)return i.lit();const h=t.kW().a6();return h.oit()?h.lit():t.Bnt().jnt()},n=(t,s,i,e=0)=>{const h=s.Fst().nst(t.kW());if(!h)return e;const n=h.VW(i);if(!n)return e;const r=n.Yit().Vit();if(!r)return e;const o=r.rnt();return o?o.uet():e},r;if(a){let t=e[e.length-1];r=t.fm()}else{let s=e[0],t=s.Bnt().jnt(),i=s.Bnt().Hnt();r=t*i,r=(r+=n(s,o,"offsetHeight"))+h(s,o)*n(s,o,"offsetScaleY");for(let t=1;t<e.length;t++){const l=(s=e[t]).Bnt().Hnt();r=(r=(r*=l)+n(s,o))+h(s,o)*n(s,o,"offsetScaleY")}}i.knt=0===r?Number.EPSILON:r}e||s.Vnt(t/i.knt,!0)}else s.Vnt(t)}},(t,s)=>t.tm(s),t=>t.fm(),!0),ur("offsetAngle",(t,s,i,e,h)=>{t.Unt(s)},(t,s)=>t.Uk(s),t=>t.zk(),!1,!0),ur("offsetOpacity",(t,s,i,e,h)=>{const n=e.znt||1,r=(s/=n,t.gP()),o=r+s;if(0===e.Jnt)1<o?e.Jnt+=o-1:o<0&&(e.Jnt+=o),t.qnt(s);else{const a=t.gP()+s;0<s&&0<e.Jnt?1<a&&(e.Jnt+=a-1):0<s&&e.Jnt<0?(e.Jnt+=s,0<e.Jnt&&(t.qnt(e.Jnt),e.Jnt=0)):s<0&&0<e.Jnt?(e.Jnt+=s,e.Jnt<0&&(t.qnt(e.Jnt),e.Jnt=0)):s<0&&e.Jnt<0&&a<0&&(e.Jnt+=a)}},(t,s)=>{t.wP(s)},t=>t.gP(),!1,!0,(n,h,r)=>{switch(n.Jnt=0,n.Yet.oK()){case"relative":{n.Yet.Rst();let t=n.Yet.Yit(),s=t.Vit(),i=s.Hit(),e=n.dO().gP(),h=e;for(const o of i){const a=o.zR(),l=n.Yet.ket(a);h=e+l,h=ar.cn(h,0,1)}n.$nt=e-h,n.$nt=Math.round(100*(n.$nt+Number.EPSILON))/100,h=e;for(let t=i.length-1;0<=t;t--){const u=i[t].zR(),c=n.Yet.ket(u);h-=c,h=ar.cn(h,0,1)}n.Xnt=h,n.Xnt=Math.round(100*(n.Xnt+Number.EPSILON))/100;break}}const t="relative"===n.Yet.oK(),s=1===n.Lnt.Qx();if((t||s)&&h._B()&&h.HB()){let s=[],t=h.dB();for(;t;)s.push(t),t=t.dB();s.reverse();let i=(t,s,i)=>{const e=s.Fst().nst(t.kW());if(!e)return 0;const h=e.VW(i);if(!h)return 0;const n=h.Yit().Vit();if(!n)return 0;const r=n.rnt();return r?r.uet():0},e=s[0].Bnt().Ynt();e+=i(s[0],r,"offsetOpacity");for(let t=1;t<s.length;t++)e+=i(s[t],r,"offsetOpacity");n.znt=0===e?1:e}},i=>{switch(i.Yet.oK()){case"relative":{i.Jnt=0;let t=i.dO(),s=t.gP();s=Math.round(100*(s+Number.EPSILON))/100,i.Yet.Fst().ctt()?(t.wP(s+i.$nt),i.HG=0):(t.wP(s-i.Xnt),i.HG=i.ZQ().Xet());break}}}),ur("offsetOriginX",(t,s)=>t.Znt(s),(t,s)=>t.Knt(s),t=>t.Y6(),!1),ur("offsetOriginY",(t,s)=>t.Qnt(s),(t,s)=>t.trt(s),t=>t.K6(),!1),ur("offsetZElevation",(t,s)=>t.srt(s),(t,s)=>t.uv(s),t=>t.lv(),!0),ur("offsetScaleX",(t,s,i,e)=>{if(0!==s){const h=t.Qp()<0?-1:1;if("relative"===e.Yet.oK()&&t._B()&&t.DB()){const n=i.rit()*h*s;isNaN(e.knt)&&lr.get("offsetWidth").Pnt(t,1,i,e,!0),t.Lm(n/e.knt,!0)}else t.Lm(i.rit()*h*s)}},(t,s,i)=>{t.am(i.rit()*s)},(e,h)=>{const n=e.Qp()<0?-1:1;if(e.DB()){let t=e.dB(),s=h.Fst().nst(t.kW()),i=NaN;if(s)i=t.Qp()/s.rit();else{const r=t.kW().a6();i=r.oit()?t.Qp()/r.rit():1}return e.Qp()*n/(h.rit()*i)}return e.Qp()*n/h.rit()},!1),ur("offsetScaleY",(t,s,i,e)=>{if(0!==s){const h=t.fm()<0?-1:1;if("relative"===e.Yet.oK()&&t._B()&&t.LB()){const n=i.lit()*h*s;isNaN(e.knt)&&lr.get("offsetHeight").Pnt(t,1,i,e,!0),t.Vnt(n/e.knt,!0)}else t.Vnt(i.lit()*h*s)}},(t,s,i)=>{t.tm(i.lit()*s)},(e,h)=>{const n=e.fm()<0?-1:1;if(e.LB()){let t=e.dB(),s=h.Fst().nst(t.kW()),i=NaN;if(s)i=t.fm()/s.lit();else{const r=t.kW().a6();i=r.oit()?t.fm()/r.lit():1}return e.fm()*n/(h.lit()*i)}return e.fm()*n/h.lit()},!1);class cr extends ar.Ast.cht{constructor(t){super(t),this.HG=0,this.Jnt=0,this.$nt=0,this.Xnt=0,this.znt=NaN,this.knt=NaN,this.irt=void 0,this.ert=void 0,this.hrt=null,this.nrt=null,this.rrt=null,this.ort=null,this.art=null,this.lrt=null,this.urt=null,this.crt=null,this.frt=!1,this.drt=!1,ar.$e(this.Yet.Fst(),ar.prt)?this.Lnt=new ar.Ast.cht.mrt(this):this.Lnt=new ar.Ast.cht.grt(this);const s=this.Yet.hst();switch(this.Yet.Hst()){case"world-instance":{const i=lr.get(s);this.hrt=i.Ant,this.nrt=i.Pnt,this.rrt=i.Rnt,this.frt=i.round,this.drt=i.Fnt,this.art=i.init,this.ort=i.reset;break}case"audio":this.lrt=t.qht,this.urt=t.$ht,this.crt=t.Xht,this.frt=!!t.Yht(),this.drt=!1}}nn(){this.Lnt=null,this.hrt=null,this.nrt=null,this.rrt=null,this.ort=null,this.art=null,this.lrt=null,this.urt=null,this.crt=null,super.nn()}Let(){return this.Lnt.Let()}yrt(){return this.HG}wrt(t){this.HG=t}Ftt(){this.ort&&this.ort(this)}SZ(){const t=this.Lnt.SZ();if("number"==typeof t&&(this.HG=t),this.art){const s=this.dO(),i=this.Yet.Xit();this.art(this,s,i)}}Wtt(){const t=this.Lnt.Wtt();"number"==typeof t&&(this.HG=t)}Det(){return this.ent()}Cit(){const t=this.hnt();return t!==this.Det()}Eit(){return!ar.fe(this.Qht)&&this.Qht!==this.Det()}sht(){this.Lnt.sht()}oht(t,s,i,e,h,n,r,o){return this.Lnt.oht(t,s,i,e,h,n,r,o)}aht(){this.Lnt.aht()}ent(){const t=this.dnt(),s=this.fnt(),i=this.dO(),e=this.Yet.Xit(),h=this.Yet.Hst();switch(h){case"behavior":return t.Snt(s);case"effect":return t[s];case"instance-variable":return t.Cnt(s);case"plugin":return t.Snt(s);case"world-instance":return this.hrt(i,e);case"audio":return this.lrt.call(this.ZQ(),i,e)}}Gnt(t,s,i){const e=this.dnt(),h=this.fnt(),n=this.dO(),r=this.Yet.Xit(),o=this.Yet.Hst();switch(o){case"behavior":e.Srt(h,t);break;case"effect":e[h]+=t;break;case"instance-variable":e.brt(h,t);break;case"plugin":e.Srt(h,t,this.ZQ().Mht());break;case"world-instance":this.nrt(n,t,r,this);break;case"audio":this.urt.call(this.ZQ(),n,t,r,this)}}vrt(t,s,i){let e=this.Yet.ett();if("discrete"!==(e="default"===e?"continuous":e)||s){if("discrete"===e&&i){const l=this.Yet.Fst(),u=l.zR(),c=this.Yet.Iet(u);if(!c)return}const h=this.dnt(),n=this.fnt(),r=this.dO(),o=this.Yet.Xit(),a=this.Yet.Hst();switch(a){case"behavior":h.Tnt(n,t);break;case"effect":h[n]=t;break;case"instance-variable":h.Ent(n,t);break;case"plugin":h.Tnt(n,t,this.ZQ().Mht());break;case"world-instance":this.rrt(r,t,o);break;case"audio":this.crt.call(this.ZQ(),r,t,o)}}}Mrt(t,s,i,e,h,n,r,o){this.Lnt.Mrt(t,s,i,e,h,n,r,o)}xrt(t,s,i,e,h){let n=(t="angle"===this.Yet.pet()?ar.mn(t):t).toString(),r=n.split(".")[1]||"",o=r.length,a=this.ent(),l;switch(l=0===o?this.frt?Math.round(a):this.drt?"angle"===this.Yet.pet()?ar.pn(Math.round(ar.mn(a))):Number(ar.toFixed(a,2)):a:this.frt?Number(ar.toFixed(a,o)):(this.drt,a),this.Gnt(l-a,s,i),this.Yet.hst()){case"offsetWidth":case"offsetScaleX":{const u=this.dO(),c=u.Qp(),f=Number(ar.toFixed(c,2));u.Lm(f-c);break}case"offsetHeight":case"offsetScaleY":{const d=this.dO(),p=d.fm(),m=Number(ar.toFixed(p,2));d.Vnt(m-p);break}}}aq(){return Object.assign(super.aq(),{v:this.HG,a:this.Jnt,fod:this.$nt,bod:this.Xnt,of:this.znt,sf:this.knt,armorf:this.irt,armandf:this.ert})}lq(t){t&&(super.lq(t),this.HG=t.v,this.Jnt=t.a,this.$nt=ar.ae(t.fod)?t.fod:0,this.Xnt=ar.ae(t.bod)?t.bod:0,this.znt=ar.ae(t.of)?t.of:NaN,this.knt=ar.ae(t.sf)?t.sf:NaN,this.irt=ar.ae(t.armorf)?t.armorf:void 0,this.ert=ar.ae(t.armandf)?t.armandf:void 0)}}ar.Ast.cht.fht=cr}{const fr=self.Ds;class dr{constructor(t){this.Grt=!1,this.Ght=0,this.Trt=!1,this._rt=!1,this._st=t;for(let t=0,s=this._st.length;t<s;t++)this._st[t].qit(this)}est(){return this._st}Irt(){this.Grt=!0}Crt(){return this.Grt}$et(t){this.Ght=t}uet(){return this.Ght}Ert(t){this.Trt=t}Prt(){return this.Trt}Utt(t){this._rt=t}Rrt(){return this._rt}e0(){this.Grt=!1,this.Ght=0,this.Trt=!1,this._rt=!1}}class pr{constructor(t){this.Art=t}nn(){this.Art=null}Qx(){return 0}SZ(){const t=this.Art;return this.Art.VW(),t.lnt(()=>t.nnt(()=>0,()=>t.ZQ().Xet()),()=>{})}Wtt(){}Let(){this.Art;const t=this.Art.VW();switch(t.oK()){case"relative":return!1;case"absolute":return!0}}sht(){this.Art;const t=this.Art.VW(),s=t.hst();switch(t.oK()){case"relative":break;case"absolute":if(t.Jit()){const i=t.$it();i.e0()}else{const e=t.Fst(),h=t.kW(),n=t.ZQ(),r=e.YQ(h,n,s,t);r&&1<r.length&&new dr(r)}}}oht(t,s,i,e,h,n,r,o){const a=this.Art,l=this.Art.VW();switch(l.oK()){case"relative":{const u=a.yrt();a.Gnt(s-u,i,e),n&&this.Mrt(t,i,e,h,u,s),a.wrt(s);break}case"absolute":{const c=l.Fst(),f=l.Xit();if(l.kW(),l.ZQ(),l.Jit()){const d=l.$it(),p=d.est(),m=a.mnt(p,!0),g=a.gnt(c,c.zR(),m);if(g){const y=f.Jtt(),w=g.time-y;if(0==w)d.Utt(r),d.Ert(o),d.Irt(),d.$et(d.uet()+s);else{if(w<0)return;const S=l.ket(w);d.Utt(r),d.Ert(o),d.Irt(),d.$et(d.uet()+(s-S))}}}else a.vrt(s,o,r);break}}}aht(){const t=this.Art,s=this.Art.VW();switch(s.oK()){case"relative":break;case"absolute":if(s.Jit()){const i=s.$it();i.Crt()&&t.vrt(i.uet(),i.Prt(),i.Rrt())}}}Mrt(t,s,i,e,h,n){const r=this.Art;e||(s&&t===s.zR()?r.xrt(s.pK(),s,i):i&&t===i.zR()?r.xrt(i.pK(),s,i):n-h==0&&r.xrt(s.pK(),s,i))}}fr.Ast.cht.grt=pr}{const mr=self.Ds;class gr{constructor(t){this.Art=t}nn(){this.Art=null}Qx(){return 1}SZ(){const t=this.Art;return t.snt(!0),this.cnt(t.hnt())}Wtt(){const t=this.Art;if(t.hnt()!==t.ant())return t.snt(!0),this.cnt(t.ant())}Let(){return!1}sht(){}oht(t,s,i,e,h,n,r,o){const a=this.Art,l=a.yrt();switch(a.VW().oK()){case"relative":a.Gnt(s-l,i,e),n&&this.Mrt(t,i,e,h,l,s,!1,r);break;case"absolute":a.int()?(a.snt(!1),a.Gnt(l,i,e)):0===t&&0===a.VW().Fst().bW()?a.vrt(s,!0,!1):(a.Gnt(s-l,i,e),n&&this.Mrt(t,i,e,h,l,s,this.Frt(),r))}a.wrt(s)}aht(){}cnt(t){const s=this.Art;return t-s.Det()}Frt(){let t=this.Art,s=t.dO().kW(),i=t.VW().FO(),e=i.XQ(),h=0;for(const n of e.$Y())0===n.Qx()?n.QY(s)&&h++:1===n.Qx()&&n.kW()===s&&h++;return h<=1}Mrt(t,s,i,e,h,n,r,o){const a=this.Art;e?s&&t===s.zR()?a.xrt(s.pK(),s,i,r,o):i&&t===i.zR()?a.xrt(i.pK(),s,i,r,o):i||a.xrt(s.pK(),s,i,r,o):s&&t===s.zR()?a.xrt(s.pK(),s,i,r,o):i&&t===i.zR()?a.xrt(i.pK(),s,i,r,o):n-h==0&&a.xrt(s.pK(),s,i,r,o)}}mr.Ast.cht.mrt=gr}{const yr=self.Ds,wr=self.ac;yr.Ast.iht=class{constructor(){}static Int(t,s,i,e){let h;switch(e){case"behavior":h=s.Snt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Cnt(t);break;case"plugin":h=s.Snt(t)}return h!==i}static Lc(n,r,o,a){if(!o){let t=a.Yit(),s=a.Rst();return(t=s.rnt(t)).pK()}let l=a.ett();if("default"===l&&(l="continuous"),"discrete"===(l="combo"===a.pet()?"discrete":l))return r.pK();if("continuous"===l||"step"===l){const u=a.Fst().stt();if("step"===l&&0!==u){const g=1/u;n=Math.floor(n*g)/g}const c=r.pK(),f=o.pK(),d=r.fK("cubic-bezier"),p=o.fK("cubic-bezier"),m=d&&d.Drt()&&p&&p.Ort();if(!m&&c===f)return c;let t=r.zR(),s=o.zR(),i=("step"===l&&0!==u&&(n=yr.cn(n,t,s)),yr.normalize(n,t,s)),e=r.qet(),h;if(m){const y=s-t;h=wr._c(e)(y*i,0,1,y),h=wr._c("cubicbezier")(h,c,c+d.yK(),f+p.bK(),f)}else h=wr._c(e)((s-t)*i,c,f-c,s-t);return"integer"===a.pet()?Math.floor(h):h}}}}{const Sr=self.Ds;Sr.Ast.eht=class{constructor(){}static Int(t,s,i,e){let h;switch(e){case"behavior":h=s.Snt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Cnt(t);break;case"plugin":h=s.Snt(t)}return h!==i}static Lc(t,s,i,e){if(!i){let t=e.Yit(),s=e.Rst();return(t=s.rnt(t)).pK()}let h=e.ett();if("default"===h&&(h="continuous"),"discrete"===(h="combo"===e.pet()?"discrete":h))return s.pK();if("continuous"===h||"step"===h){const n=e.Fst().stt();if("step"===h&&0!==n){const c=1/n;t=Math.floor(t*c)/c}const r=s.zR(),o=i.zR(),a=s.pK(),l=i.pK(),u=("step"===h&&0!==n&&(t=Sr.cn(t,r,o)),s.fK("angle"));if(!u){if(a===l)return a;const f=Sr.normalize(t,r,o),d=self.ac._c(s.qet());return Sr.Gn(a,l,d(f,0,1,1))}{const p=u.Lrt();if(a===l&&0===p)return a;const m=Sr.normalize(t,r,o),g=self.ac._c(s.qet()),y=g(m,0,1,1);switch(u.krt()){case"closest":return Sr.Gn(a,l,y,p);case"clockwise":return Sr.Tn(a,l,y,p);case"anti-clockwise":return Sr._n(a,l,y,p)}}}}}}{const br=self.Ds;br.Ast.hht=class{constructor(){}static Int(t,s,i,e){let h;switch(e){case"behavior":h=s.Snt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Cnt(t);break;case"plugin":h=s.Snt(t)}return!!h!=!!i}static Lc(t,s,i,e){if(i)return s.pK()?1:0;{let t=e.Yit(),s=e.Rst();return(t=s.rnt(t)).pK()?1:0}}}}{const vr=self.Ds,Mr=[0,0,0],xr=[0,0,0],Gr=[0,0,0];vr.Ast.nht=class{constructor(){}static Int(t,s,i,e){let h;switch(e){case"behavior":h=s.Snt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Cnt(t);break;case"plugin":h=s.Snt(t)}return Array.isArray(i)?(Mr[0]=i[0],Mr[1]=i[1],Mr[2]=i[2]):(Gr.Ta(i),Mr[0]=Math.floor(255*Gr.ta()),Mr[1]=Math.floor(255*Gr.ia()),Mr[2]=Math.floor(255*Gr.ea())),Array.isArray(h)?(xr[0]=h[0],xr[1]=h[1],xr[2]=h[2]):(Gr.Ta(h),xr[0]=Math.floor(255*Gr.ta()),xr[1]=Math.floor(255*Gr.ia()),xr[2]=Math.floor(255*Gr.ea())),Mr[0]!==xr[0]||Mr[1]!==xr[1]||Mr[2]!==xr[2]}static Lc(t,s,i,e){if(!i){let t=e.Yit(),s=e.Rst(),i=(t=s.rnt(t)).pK();return Mr[0]=i[0],Mr[1]=i[1],Mr[2]=i[2],Mr}let h=e.ett();if("discrete"===(h="default"===h?"continuous":h)){const n=s.pK();return Mr[0]=n[0],Mr[1]=n[1],Mr[2]=n[2],Mr}if("continuous"===h||"step"===h){const r=e.Fst().stt();if("step"===h&&0!==r){const M=1/r;t=Math.floor(t*M)/M}const o=s.zR(),a=i.zR(),l=s.pK(),u=i.pK(),c=("step"===h&&0!==r&&(t=vr.cn(t,o,a)),vr.normalize(t,o,a)),f=s.qet(),d=l[0],p=l[1],m=l[2],g=u[0],y=u[1],w=u[2],S=self.ac._c(f),b=a-o,v=b*c;return Mr[0]=d===g?d:S(v,d,g-d,b),Mr[1]=p===y?p:S(v,p,y-p,b),Mr[2]=m===w?m:S(v,m,w-m,b),Mr}}}}{const Tr=self.Ds;Tr.Ast.rht=class{constructor(){}static Int(t,s,i,e){let h;switch(e){case"behavior":h=s.Snt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Cnt(t);break;case"plugin":h=s.Snt(t)}return h!==i}static Lc(t,s,i,e){if(i)return s.pK();{let t=e.Yit(),s=e.Rst();return(t=s.rnt(t)).pK()}}}}{const _r=self.Ds;_r.sY=class{constructor(){this.Nrt=new Map}nn(){for(const t of this.Nrt.values())t.nn();this.Nrt.clear(),this.Nrt=null}nc(t){const s=new _r.Brt(t),i=s.Jc();this.Nrt.set(i,s)}Ks(t){return this.Nrt.get(t)}HQ(){return 0}static Wrt(t,s,i,e){if(s)for(const h of s)_r.sY.jrt("create",h,t,i,e)}static Hrt(t,s,i,e){if(s)for(const h of s)_r.sY.jrt("create-including-disabled",h,t,i,e)}static Vrt(i,t,s,e){i.length?t.forEach((t,s)=>{i[s].lq(t)}):t.forEach(t=>{_r.sY.jrt("load",t,i,s,e)})}static jrt(t,s,i,e,h){let n;if("function"==typeof e)switch(t){case"load":n=new e(null,h);break;case"create":case"create-including-disabled":n=new e(s,h)}else if("object"==typeof e){const r=e.prop,o=s[r],a=e.map.get(o);switch(t){case"load":n=new a(null,h);break;case"create":case"create-including-disabled":n=new a(s,h)}}switch(t){case"load":n.lq(s),i.push(n);break;case"create":if("function"==typeof n.iit&&!n.iit())return n.nn();i.push(n);break;case"create-including-disabled":i.push(n)}}}}{const Ir=self.Ds;Ir.Brt=class{constructor(t){this.ln="",this.Vtt=NaN,this.Urt=0,this.zrt="default",this.Jrt="default",this.qrt=!1,this.$rt=!1,this.Xrt=1,this.dst=null,this.Yrt="",this.Zrt=!1,this.Krt=!0,t&&(this.ln=t[0],this.Vtt=t[1],this.Urt=t[2],this.zrt=t[3],this.Jrt=t[4],this.qrt=!!t[6],this.$rt=!!t[7],this.Xrt=t[8],this.Yrt=t[9],this.Zrt=!!t[10],this.Krt=!!t[11],this.dst=new Ir.Qrt(t[5],this))}nn(){this.dst.nn(),this.dst=null}qQ(){return this.dst||(this.dst=new Ir.Qrt(null,this)),this.dst}Jc(){return this.ln}F8(t){this.ln=t}bW(){return this.Vtt}SW(t){this.Vtt=t}stt(){return this.Urt}itt(t){this.Urt=t}ett(){return this.zrt}htt(t){this.zrt=t}oK(){return this.Jrt}ntt(t){this.Jrt=t}MW(){return this.qrt}vW(t){this.qrt=t}GW(){return this.$rt}xW(t){this.$rt=t}F6(){return this.Xrt}ott(t){this.Xrt=t}PZ(){return this.Yrt}att(){return this.Zrt}ltt(){return this.Krt}aq(){return{trackDataJson:this.dst.aq(),name:this.ln,totalTime:this.Vtt,step:this.Urt,interpolationMode:this.zrt,resultMode:this.Jrt,loop:this.qrt,pingPong:this.$rt,repeatCount:this.Xrt,startOnLayout:this.Yrt,transformWithSceneGraph:!!this.Zrt,useSystemTimescale:this.Krt}}lq(t){t&&(this.qQ().lq(t.trackDataJson),this.ln=t.name,this.Vtt=t.totalTime,this.Urt=t.step,this.zrt=t.interpolationMode,this.Jrt=t.resultMode,this.qrt=t.loop,this.$rt=t.pingPong,this.Xrt=t.repeatCount,this.Yrt=t.startOnLayout,this.Zrt=!!t.transformWithSceneGraph,this.Krt=!!t.useSystemTimescale)}}}{const Cr=self.Ds;class Er{constructor(t,s){this.dst=s,this.tot=null,this.sot=null,this.pst=NaN,this.mst=NaN,this.zrt="default",this.Jrt="default",this.Au=!1,this.iot=null,this.Bit=null,this.ef="",this.eot=null,this.hot=0,this.not=this.dst.ttt().bW(),this.cf=0,this.ln="",t&&(t[0]&&(this.tot=t[0],this.pst=t[0][2],this.mst=t[0][1]),this.zrt=t[1],this.Jrt=t[2],this.Au=!!t[3],t[6]&&(this.ef=t[6]),t[7]&&(this.eot=t[7],this.hot=t[7][0],this.not=t[7][1]),t[8]&&(this.sot=t[8]),t[8]&&(this.sot=t[8]),t[9]&&(this.cf=t[9]),t[10]&&(this.ln=t[10]),this.iot=new Cr.rot(t[4],this),this.Bit=new Cr.oot(t[5],this))}nn(){this.tot=null,this.dst=null,this.iot&&(this.iot.nn(),this.iot=null),this.Bit&&(this.Bit.nn(),this.Bit=null),this.eot=null}qQ(){return this.dst}Tst(){return this.iot||(this.iot=new Cr.rot(null,this)),this.iot}Rst(){return this.Bit||(this.Bit=new Cr.oot(null,this)),this.Bit}aot(){return this.tot}kst(){return this.mst}hit(t){this.mst=t}Lst(){return this.pst}Qst(t){this.pst=t}ett(){return this.zrt}htt(t){this.zrt=t}oK(){return this.Jrt}ntt(t){this.Jrt=t}iit(){return this.Au}eit(t){this.Au=!!t}jW(){return this.ef}Jtt(){return this.hot}tit(){return this.not}sit(t){this.not=t}rit(){return this.sot[0]}nit(t){this.sot||(this.sot=[]),this.sot[0]=t}lit(){return this.sot||(this.sot=[]),this.sot[1]}ait(t){this.sot||(this.sot=[]),this.sot[1]=t}Qx(){return this.cf}Jc(){return this.ln}aq(){return{keyframeDataJson:this.iot.aq(),propertyTrackDataJson:this.Bit.aq(),instanceData:this.tot,additionalInstanceData:this.sot,instanceUid:this.pst,objectClassIndex:this.mst,interpolationMode:this.zrt,resultMode:this.Jrt,enabled:this.Au,id:this.ef,nestedData:this.eot,type:this.cf,name:this.ln}}lq(t){t&&(this.tot=t.instanceData,this.pst=t.instanceUid,this.mst=t.objectClassIndex,this.zrt=t.interpolationMode,this.Jrt=t.resultMode,this.Au=t.enabled,this.ef=t.id,this.cf=t.type||0,this.ln=t.name||"",this.not=this.dst.ttt().bW(),t.nestedData&&(this.eot=t.nestedData,this.hot=this.eot[0],this.not=this.eot[1]),t.additionalInstanceData&&(this.sot=t.additionalInstanceData),this.Tst().lq(t.keyframeDataJson),this.Rst().lq(t.propertyTrackDataJson))}}Cr.Qrt=class{constructor(t,s){this.fQ=s,this.lot=[],Cr.sY.Wrt(this.lot,t,Er,this)}nn(){this.fQ=null;for(const t of this.lot)t.nn();Cr.Lr(this.lot),this.lot=null}ttt(){return this.fQ}Xtt(){const t=new Er(null,this);return this.lot.push(t),t}uot(t){return t.Tst().Gst()[0]}cot(t){const s=t.Tst().Gst();return s.at(-1)}Sit(s,t){const i=t.Tst().Gst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.zR()===s)return h}}fot(s,t){const i=t.Tst().Gst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.zR()>s)return h}}dot(s,t){const i=t.Tst().Gst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.zR()>=s)return h}}wit(s,t){const i=t.Tst().Gst();for(let t=i.length-1;0<=t;t--){const e=i[t];if(e.zR()<=s)return e}}*JQ(){for(const t of this.lot)yield t}aq(){return{trackDataItemsJson:this.lot.map(t=>t.aq())}}lq(t){t&&Cr.sY.Vrt(this.lot,t.trackDataItemsJson,Er,this)}}}{const Pr=self.Ds;class Rr{constructor(t,s){this.Bit=s,this.pot="",this.mot=null,this.Zht=null,this.cf=null,this.got=NaN,this.yot=NaN,this.zrt="default",this.Jrt="default",this.Au=!1,this.wot=null,this.Sot=!0,t&&(this.pot=t[0][0],this.mot=t[0].slice(1),this.Zht=t[1],this.cf=t[2],this.got=t[3],this.yot=t[4],this.zrt=t[5],this.Jrt=t[6],this.Au=!!t[7],this.wot=new Pr.bot(t[8],this),this.Sot=t[9])}nn(){this.wot.nn(),this.wot=null,this.Bit=null,this.mot=null}Rst(){return this.Bit}Vit(){return this.wot||(this.wot=new Pr.bot(null,this)),this.wot}Hst(){return this.pot}net(t){this.pot=t}oet(){return this.mot}let(t){this.mot=t}cet(){return this.Zht}det(t){this.Zht=t}Qx(){return this.cf}yet(t){this.cf=t}vet(){return this.got}Met(t){this.got=t}xet(){return this.yot}Get(t){this.yot=t}ett(){return this.zrt}htt(t){this.zrt=t}oK(){return this.Jrt}ntt(t){this.Jrt=t}iit(){return this.Au}eit(t){this.Au=!!t}_et(){return!!this.Sot}aq(){return{propertyKeyframeDataJson:this.wot.aq(),sourceAdapterId:this.pot,sourceAdapterArguments:this.mot,property:this.Zht,type:this.cf,min:this.got,max:this.yot,interpolationMode:this.zrt,resultMode:this.Jrt,enabled:this.Au,canHavePropertyKeyframes:this.Sot}}lq(t){t&&(this.pot=t.sourceAdapterId,this.mot=t.sourceAdapterArguments,this.Zht=t.property,this.cf=t.type,this.got=t.min,this.yot=t.max,this.zrt=t.interpolationMode,this.Jrt=t.resultMode,this.Au=t.enabled,this.Sot=t.canHavePropertyKeyframes,this.Vit().lq(t.propertyKeyframeDataJson))}}Pr.oot=class{constructor(t,s){this.fst=s,this.vot=[],Pr.sY.Wrt(this.vot,t,Rr,this)}nn(){this.fst=null;for(const t of this.vot)t.nn();Pr.Lr(this.vot),this.vot=null}Kst(){return this.fst}xit(){const t=new Rr(null,this);return this.vot.push(t),t}bet(t){const s=t.Vit();return s.Hit()[0]}rnt(t){const s=t.Vit(),i=s.Hit();return i.at(-1)}Iet(s,t){const i=t.Vit(),e=i.Hit(),h=e.length;for(let t=0;t<h;t++){const n=e[t];if(n.zR()===s)return n}}Pet(s,t){const i=t.Vit(),e=i.Hit(),h=e.length;for(let t=0;t<h;t++){const n=e[t];if(n.zR()>s)return n}}Ret(s,t){const i=t.Vit(),e=i.Hit(),h=e.length;for(let t=0;t<h;t++){const n=e[t];if(n.zR()>=s)return n}}Cet(s,t){const i=t.Vit(),e=i.Hit();for(let t=e.length-1;0<=t;t--){const h=e[t];if(h.zR()<=s)return h}}*Pst(){for(const t of this.vot)yield t}aq(){return{propertyTrackDataItemsJson:this.vot.map(t=>t.aq())}}lq(t){t&&Pr.sY.Vrt(this.vot,t.propertyTrackDataItemsJson,Rr,this)}}}{const Ar=self.Ds;class Fr{constructor(t,s){if(this.iot=s,this.HA=-1,this.Mot="noease",this.xot=!1,this.kQ=null,this.Got=null,t){this.HA=t[0],this.Mot=t[1],this.xot=!!t[2];const i=t[3];this.kQ=i?i.split(" "):[],this.Got=new Set(this.kQ.map(t=>t.toLowerCase())),this.Tot=null}}nn(){this.iot=null,Ar.Lr(this.kQ),this.kQ=null,this.Got.clear(),this.Got=null,this.Tot=null}Tst(){return this.iot}QZ(){return this.Tot}_ot(t){this.Tot=t}zR(){return this.HA}wW(t){this.HA=t,this.iot.Iot()}qet(){return this.Mot}LW(t){this.Mot=t}iit(){return this.xot}eit(t){this.xot=!!t}IW(){return this.kQ}ftt(t){this.kQ=t?t.split(" "):[],this.Got=new Set(this.kQ.map(t=>t.toLowerCase()))}Cot(){return this.Got}ast(t){return this.Got.has(t.toLowerCase())}aq(){return{time:this.HA,ease:this.Mot,enable:this.xot,tags:this.kQ}}lq(t){t&&(this.HA=t.time,this.Mot=t.ease,this.xot=t.enable,this.kQ=t.tags,this.Got=new Set(this.kQ.map(t=>t.toLowerCase())))}}Ar.rot=class{constructor(t,s){this.fst=s,this.xst=[],Ar.sY.Wrt(this.xst,t,Fr,this),this.Iot()}nn(){this.fst=null;for(const t of this.xst)t.nn();Ar.Lr(this.xst),this.xst=null}Iot(){this.xst.sort((t,s)=>t.zR()-s.zR());for(let t=0;t<this.xst.length;t++){const s=this.xst[t];s._ot(this.xst[t+1])}}Kst(){return this.fst}Eot(){return this.xst.length}Gst(){return this.xst}vit(){const t=new Fr(null,this);return this.xst.push(t),this.Iot(),t}Tit(t){for(const s of this.xst)if(t(s)){const i=this.xst.indexOf(s);-1!==i&&(s.nn(),this.xst.splice(i,1))}this.Pot(),this.Iot()}Pot(){this.xst.sort((t,s)=>t.zR()-s.zR())}Oit(t){return this.xst.indexOf(t)}Lit(t){return this.xst[t]}*Rot(){for(const t of this.xst)yield t}*Aot(){for(let t=this.xst.length-1;0<=t;t--)yield this.xst[t]}aq(){return{keyframeDataItemsJson:this.xst.map(t=>t.aq())}}lq(t){t&&(Ar.sY.Vrt(this.xst,t.keyframeDataItemsJson,Fr,this),this.Iot())}}}{const Dr=self.Ds;class Or{constructor(t,s){this.wot=s,this.Ght=null,this.Fot=null,this.cf="",this.HA=NaN,this.Mot="noease",this.xot=!1,this.Dot=null,this.Oot=void 0,this.Lot="line",t&&(this.Ght=t[0][0],this.Fot=t[0][1],this.cf=t[0][2],this.HA=t[1],this.Mot=t[2],this.xot=!!t[3],this.Lot=t[5],this.Dot=null,t[4]&&(this.Dot=new Dr.kot(t[4],this)),this.Tot=null,this.Not=null)}nn(){this.wot=null,this.Dot&&(this.Dot.nn(),this.Dot=null),this.Tot=null,this.Not=null}Bot(){return this.Dot}_ot(t){this.Tot=t}QZ(){return this.Tot}Wot(t){this.Not=t}tK(){return this.Not}uet(){return this.Ght}$et(t){"color"===this.cf&&Dr.ae(t)?(this.Ght[0]=Dr.Hn(t),this.Ght[1]=Dr.Vn(t),this.Ght[2]=Dr.Un(t)):this.Ght=t}ont(){return this.Fot}Uet(t){"color"===this.cf&&Dr.ae(t)?(this.Fot[0]=Dr.Hn(t),this.Fot[1]=Dr.Vn(t),this.Fot[2]=Dr.Un(t)):this.Fot=t}pK(){const t=this.wot.Yit().oK();return"relative"===t?this.uet():"absolute"===t?this.ont():void 0}Qx(){return this.cf}yet(t){this.cf=t}zR(){return this.HA}wW(t){this.HA=t,this.wot.jot()}qet(){return this.Mot}LW(t){this.Mot=t}iit(){return this.xot}eit(t){this.xot=!!t}sK(){return this.Lot}fK(s){if(this.Dot){if(!this.Oot&&null!==this.Oot){const i=this.Dot.Hot();if(i){const e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.jW()===s)return this.Oot=h,this.Oot}}this.Oot=null}return this.Oot}}aq(){const t=this.Dot;return{addonDataJson:t&&t.aq(),value:this.Ght,aValue:this.Fot,type:this.cf,time:this.HA,ease:this.Mot,enable:this.xot}}lq(t){t&&(t.addonDataJson&&this.Dot._SetFromJson(t.addonDataJson),this.Ght=t.value,this.Fot=t.aValue,this.cf=t.type,this.HA=t.time,this.Mot=t.ease,this.xot=t.enable)}}Dr.bot=class{constructor(t,s){this.Nit=s,this.jit=[],this.Vot=[],Dr.sY.Wrt(this.jit,t,Or,this),Dr.sY.Hrt(this.Vot,t,Or,this),this.jot()}nn(){this.Nit=null;for(const t of this.jit)t.nn();Dr.Lr(this.jit),this.jit=null;for(const s of this.Vot)s.nn();Dr.Lr(this.Vot),this.Vot=null}jot(){let s=this.jit;s.sort((t,s)=>t.zR()-s.zR());for(let t=0;t<s.length;t++){const i=s[t];t+1<s.length&&i._ot(s[t+1]),0<=t-1&&i.Wot(s[t-1])}(s=this.Vot).sort((t,s)=>t.zR()-s.zR());for(let t=0;t<s.length;t++){const e=s[t];t+1<s.length&&e._ot(s[t+1]),0<=t-1&&e.Wot(s[t-1])}}Het(){const t=new Or(null,this);return this.jit.push(t),this.jot(),t}Vet(t){for(const s of this.jit)if(t(s)){const i=this.jit.indexOf(s);-1!==i&&(s.nn(),this.jit.splice(i,1))}this.Uot(),this.jot()}Uot(){this.jit.sort((t,s)=>t.zR()-s.zR())}Yit(){return this.Nit}zot(){return this.jit.length}rnt(){return this.jit[this.jit.length-1]}Hit(){return this.jit}KZ(){return this.Vot}*Jot(){for(const t of this.jit)yield t}*qot(){for(let t=this.jit.length-1;0<=t;t--)yield this.jit[t]}aq(){const t=this.jit,s=this.Vot;return{propertyKeyframeDataItemsJson:t.map(t=>t.aq()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.aq())}}lq(t){t&&(Dr.sY.Vrt(this.jit,t.propertyKeyframeDataItemsJson,Or,this),Dr.sY.Vrt(this.Vot,t.propertyKeyframeDataItemsIncludingDisabledJson,Or,this),this.jot())}}}{const Lr=self.Ds;class kr{constructor(t,s){this.Dot=s,this.ef=t[0],this.$ot=t[1]}nn(){this.Dot=null,this.$ot=null}Bot(){return this.Dot}jW(){return this.ef}aq(){return{id:this.ef,data:this.$ot}}lq(t){t&&(this.ef=t.id,this.$ot=t.data)}}class Nr extends kr{constructor(t,s){super(t,s),this.Xot=this.$ot[0],this.Yot=!!this.$ot[1],this.Zot=this.$ot[2],this.Kot=!!this.$ot[3]}nn(){super.nn()}yK(){return this.Xot}Drt(){return this.Yot}bK(){return this.Zot}Ort(){return this.Kot}aq(){return Object.assign(super.aq(),{startAnchor:this.Xot,startEnable:!!this.Yot,endAnchor:this.Zot,endEnable:!!this.Kot})}lq(t){t&&(super.lq(t),this.Xot=t.startAnchor,this.Yot=!!t.startEnable,this.Zot=t.endAnchor,this.Kot=!!t.endEnable)}}class Br extends kr{constructor(t,s){super(t,s),this.Qot=this.$ot[0],this.tat=this.$ot[1]}nn(){super.nn()}krt(){return this.Qot}Lrt(){return this.tat}aq(){return Object.assign(super.aq(),{direction:this.Qot,revolutions:this.tat})}lq(t){t&&(super.lq(t),this.Qot=t.direction,this.tat=t.revolutions)}}Lr.kot=class{constructor(t,s){this.sat=s,this.iat=[],Lr.sY.Wrt(this.iat,t,{prop:0,map:new Map([["cubic-bezier",Nr],["angle",Br]])},this)}nn(){this.sat=null;for(const t of this.iat)t.nn();Lr.Lr(this.iat),this.iat=null}eat(){return this.sat}Hot(){return this.iat}*hat(){for(const t of this.iat)yield t}aq(){return{addonDataItemsJson:this.iat.map(t=>t.aq())}}lq(t){t&&Lr.sY.Vrt(this.iat,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",Nr],["angle",Br]])},this)}}}{let m=self.Ds,i=0;m.prt=class extends m.OY{constructor(t,s){super("tween-"+i++,t,s),this.ef="",this.nat=!1,this.rat="start-value",this.gst=null,this.oat=null,this.aat=null,this.kit=null,this.lat=null}UQ(t){const s=m.hn(m.Event,"tweenstatereleased");s.uat=this,t.dispatchEvent(s)}Qx(){return 1}yQ(){for(const t of this.fQ.qQ().JQ())this.dQ.push(m.cat.VM(this,t));this.kit=this.dQ[0]}$tt(){const t=this.fQ.qQ().Xtt(),s=m.cat.VM(this,t);return this.dQ.push(s),this.fat(),s}fat(){this.kit=this.dQ[0]}VW(t){return this.kit.est()[0]}met(t){this.dat=t}kW(){const t=this.XZ();if(t&&t.length){const s=t[0];if(this.kit=s){const i=s.kW();return s.Ost()?i:void 0}}}pat(t){this.aat||(this.aat=[]),this.aat.push(t)}mat(t){this.oat||(this.oat=[]),this.oat.push(t)}gat(t){if(this.aat){const s=this.aat.indexOf(t);-1!==s&&this.aat.splice(s,1)}}yat(t){if(this.oat){const s=this.oat.indexOf(t);-1!==s&&this.oat.splice(s,1)}}wat(t,s){for(const i of this.dQ)for(const e of i._st)if(e.hst()===s){const h=e.Rst(),n=e.Yit(),r=h.bet(n);r.$et(t),r.Uet(t)}}Sat(t){for(const s of this.dQ)for(const i of s._st)if(i.hst()===t)return i}bat(t){for(const s of t){const i=this.Sat(s);this.wat(i.Det(),s)}if(this.ctt()){const e=this.bW()-this.zR();this.SW(e);for(const h of this.dQ)h.sit(e);this._tt(0)}else{const n=this.zR();this.SW(n);for(const r of this.dQ)r.sit(n);this._tt(n)}this.Itt()}vat(t,s){const i=this.Sat(s),e=i.Rst(),h=i.Yit(),n=e.rnt(h);n.wW(this.bW()),n.$et(t),n.Uet(t)}Mat(t){this.ef=t}jW(){return this.ef}xat(t){this.rat=t}Gat(){return this.rat}WW(t){this.nat=t}BW(){return this.nat}gtt(){if(this.aat)for(const t of this.aat)t(this);if(!this._Z())for(const s of this.dQ)s.Eit()}ytt(){this.RQ=this.tf.wtt()}CZ(){if(!this.DQ&&(this.DQ=!0,this.oat))for(const t of this.oat)t(this)}wW(t){this.Tat(),super.wW(t)}Att(t){(t=m.ae(t)?t:this.bW())<0?this.bQ=0:t>=this.bW()?this.bQ=this.bW():this.bQ=t,this.kit.Ftt()}SZ(t){if(!this.IZ()&&"current-state"===this.Gat())for(const s of this.dQ)s.Cit();super.SZ(t)}mW(t=!1){if(super.mW(t),!this._Z())for(const s of this.dQ)s.Iit()}e0(t=!0,s=!1){this.Tat(),super.e0(t,s)}Tat(){for(const t of this.dQ){const s=t=>{const s=t.zR(),i=this.bW();return 0!==s&&s!==i};t.Git(s),t._it(s)}}SY(){if(!this.dW()){const t=this.kW();if(t&&t.SN().Mz())return!1;this.cQ.mZ(this),this.Ntt()}return!0}xZ(h,t,s){if(this.gst||(this.gst=this.kW()),!this.gst||this.gst.jj())this.mW(!0),this.ytt();else{const i=this.gst.MD();if(0!==(h=-1!==i?s*i:h)||0!==this.LQ){this.LQ=h;const n=this.bQ+this.vQ,r=h*this.MQ,o=n+r,a=this.fQ.Vtt;o<0?(this.bQ=0,this.vQ=-o):a<=o?(this.bQ=a,this.vQ=this.bQ-o):(this.bQ=o,this.vQ=0);let t=!1,s=!1,i=this.MW(),e=this.GW();i||e?i&&!e?0<this.MQ?this.bQ>=a&&(this.Att(0),this._at(m.Iat.Tween.Z$.OnAnyTweenLoop),this._at(m.Iat.Tween.Z$.OnTweensLoop),s=!0):this.bQ<=0&&(this.Att(a),this._at(m.Iat.Tween.Z$.OnAnyTweenLoop),this._at(m.Iat.Tween.Z$.OnTweensLoop),s=!0):!i&&e?0<this.MQ?this.bQ>=a&&(this._tt(a),this.TW(-1*this._W()),s=!0,1===this.xQ?this.GQ<this.F6()?(this.GQ++,this._at(m.Iat.Tween.Z$.OnAnyTweenLoop),this._at(m.Iat.Tween.Z$.OnTweensLoop),this._at(m.Iat.Tween.Z$.OnAnyTweenPingPong),this._at(m.Iat.Tween.Z$.OnTweensPingPong),this.xQ=0):(this._at(m.Iat.Tween.Z$.OnAnyTweenPingPong),this._at(m.Iat.Tween.Z$.OnTweensPingPong),t=!0):0===this.xQ&&(this._at(m.Iat.Tween.Z$.OnAnyTweenPingPong),this._at(m.Iat.Tween.Z$.OnTweensPingPong),this.xQ=1)):this.bQ<=0&&(this._tt(0),this.TW(-1*this._W()),s=!0,1===this.xQ?this.GQ<this.F6()?(this.GQ++,this._at(m.Iat.Tween.Z$.OnAnyTweenLoop),this._at(m.Iat.Tween.Z$.OnTweensLoop),this._at(m.Iat.Tween.Z$.OnAnyTweenPingPong),this._at(m.Iat.Tween.Z$.OnTweensPingPong),this.xQ=0):(t=!0,this._at(m.Iat.Tween.Z$.OnAnyTweenPingPong),this._at(m.Iat.Tween.Z$.OnTweensPingPong)):0===this.xQ&&(this._at(m.Iat.Tween.Z$.OnAnyTweenPingPong),this._at(m.Iat.Tween.Z$.OnTweensPingPong),this.xQ=1)):i&&e&&(0<this.MQ?this.bQ>=a&&(this._tt(a),this.TW(-1*this._W()),s=!0,0===this.xQ&&(this._at(m.Iat.Tween.Z$.OnAnyTweenPingPong),this._at(m.Iat.Tween.Z$.OnTweensPingPong)),1===this.xQ&&(this._at(m.Iat.Tween.Z$.OnAnyTweenLoop),this._at(m.Iat.Tween.Z$.OnTweensLoop),this._at(m.Iat.Tween.Z$.OnAnyTweenPingPong),this._at(m.Iat.Tween.Z$.OnTweensPingPong)),this.xQ++,this.xQ=m.wrap(this.xQ,0,2)):this.bQ<=0&&(this._tt(0),this.TW(-1*this._W()),s=!0,0===this.xQ&&(this._at(m.Iat.Tween.Z$.OnAnyTweenPingPong),this._at(m.Iat.Tween.Z$.OnTweensPingPong)),1===this.xQ&&(this._at(m.Iat.Tween.Z$.OnAnyTweenLoop),this._at(m.Iat.Tween.Z$.OnTweensLoop),this._at(m.Iat.Tween.Z$.OnAnyTweenPingPong),this._at(m.Iat.Tween.Z$.OnTweensPingPong)),this.xQ++,this.xQ=m.wrap(this.xQ,0,2))):0<this.MQ?this.bQ>=a&&(this.GQ<this.F6()?(this.GQ++,this.Att(0),this._at(m.Iat.Tween.Z$.OnAnyTweenLoop),this._at(m.Iat.Tween.Z$.OnTweensLoop),s=!0):(this._tt(a),t=!0)):this.bQ<=0&&(this.GQ<this.F6()?(this.GQ++,this.Att(a),this._at(m.Iat.Tween.Z$.OnAnyTweenLoop),this._at(m.Iat.Tween.Z$.OnTweensLoop),s=!0):(this._tt(0),t=!0)),t?(this.kit.Utt(),this.mW(!0),this.ytt()):(this.kit.Lc(this.bQ,!0,!1,s,this.OQ,!1),this.OQ&&(this.OQ=!1))}}}_at(t){const s=this.kW(),i=s.Cat(m.Iat.Tween);i.PushTriggerTween(this),this.tf.r4(t,s,i.w6()),i.PopTriggerTween()}aq(){const t=super.aq(),s=this.ttt();return Object.assign(t,{tweenDataItemJson:s.aq(),id:this.ef,destroyInstanceOnComplete:this.nat,initialValueMode:this.rat})}lq(t){if(t){const s=this.ttt();s.lq(t.tweenDataItemJson),super.lq(t),this.ef=t.id,this.nat=t.destroyInstanceOnComplete,this.rat=t.initialValueMode,this.fat()}}static IsPlaying(t){return t.IsPlaying()}static RW(t){return t.RW()}static Eat(t){return!!t.GW()&&0===t.utt()}static Pat(t){return!!t.GW()&&1===t.utt()}static Rat(t){const s=t.runtime.XQ(),i=new m.Brt;if(t.json){i.lq(t.json.tweenDataItemJson);const e=new m.prt(i,s);return e.lq(t.json),e}{const h=new m.prt(i,s),n=(m.De(t.Aat)||(t.Aat=[t.Aat]),h.Mat(t.id),h.ftt(t.tags),h.xat(t.initialValueMode),h.WW(t.releaseOnComplete),h.vW(t.loop),h.xW(t.pingPong),h.SW(t.time),h.itt(0),h.htt("default"),h.ntt(t.Aat[0].resultMode),h.ott(t.repeatCount),h.$tt()),r=(n.Qst(t.S6.FN()),n.htt("default"),n.ntt(t.Aat[0].resultMode),n.eit(!0),n.hit(t.S6.SN().dF()),t.S6.a6()),o=r.oit()?r.rit():t.S6.dO().Qp(),a=r.oit()?r.lit():t.S6.dO().fm(),l=(n.nit(o),n.ait(a),n.bit()),u=(l.wW(0),l.LW("noease"),l.eit(!0),l.ftt(""),n.bit());u.wW(t.time),u.LW("noease"),u.eit(!0),u.ftt("");for(const c of t.Aat){const f=n.Mit(),d=(f.net(c.sourceId),f.aet(c.sourceArgs),f.fet(c.property),f.met(c.type),f.Met(NaN),f.Get(NaN),f.htt("default"),f.ntt(c.resultMode),f.eit(!0),f.jet()),p=(d.yet(c.valueType),d.wW(0),d.LW(c.ease),d.eit(!0),d.$et(c.startValue),d.Uet(c.startValue),f.jet());p.yet(c.valueType),p.wW(t.time),p.LW(c.ease),p.eit(!0),p.$et(c.endValue),p.Uet(c.endValue),f.ZQ()}return h}}static Qst(t,s){if(!isNaN(s))for(const i of t.XZ())i.Qst(s)}Fat(t,s){return this.lat||(this.lat=m.hn(self.DW,this,t,s)),this.lat}}}{const Wr=self.Ds;Wr.cat=class extends Wr.$Q{constructor(t,s){super(t,s),this.Dat=null,this.Oat=null}static VM(t,s){return Wr.hn(Wr.cat,t,s)}Lat(){1===this._st.length?this.Dat=this._st[0]:(this.Dat=this._st[0],this.Oat=this._st[1])}Ist(){for(const t of this.fst.Rst().Pst())this._st.push(Wr.kat.VM(this,t));this.Lat()}Mit(){const t=this.fst.Rst(),s=t.xit(),i=Wr.kat.VM(this,s);return this._st.push(i),this.Lat(),i}SZ(){if(this.Dst(),this.Ost()||!this.QQ()){const t=this.Fst(),s=t.ctt(),i=s?0:this.tit();for(const h of this._st)h.SZ(i),0===this.Cst&&1===h.fit()&&(this.Cst=1),0===this.RY&&1===h.bZ()&&(this.RY=1);this.Est=0;const e=this._st.some(t=>t.Htt());e&&(this.Est=1),this.Mst=this.dit(i),this.Sst=!1,this.bst=!1,this.Lc(i)}}ztt(){}Lc(t,s=0,i=!1,e=!1,h,n=!1,r=!1){if(this.gst||this.kW(),this.gst){const o=!this.gst.jj();return o&&(!n||!this.SN().Mz())&&((this.Oat?(this.Dat.Lc(t,i,e,r),this.Oat):this.Dat).Lc(t,i,e,r),void(0!==this.Dat.fit()&&(this.yst||(this.yst=this.gst.dO()),this.yst)&&this.yst.N4()))}}qtt(){}lq(t){super.lq(t),this.Lat()}}}{const jr=self.Ds;jr.kat=class extends jr.Ast{constructor(t,s){super(t,s),this.Nat=!1}static VM(t,s){return jr.hn(jr.kat,t,s)}Lc(t,s=!1,i=!1,e=!1){let h,n;if(this.Nat)h=this.jit[0],n=this.jit[1];else{if(s)h=this.Bit.Cet(t,this.Nit);else{if(this.Uit){const r=this.Fst(),o=this.Uit.QZ(),a=this.Uit.zR(),l=o?o.zR():r.bW();(t<=a||l<=t)&&(this.Uit=this.Bit.Cet(t,this.Nit))}else this.Uit=this.Bit.Cet(t,this.Nit);h=this.Uit}n=h.QZ()}this.Wit.Lc(t,h,n,s,i,e)}jet(){const t=this.Nit.Vit(),s=t.Het();return this.Uit=null,this.Nat=this.Tet().length<=2,s}_it(t){this.Uit=null;const s=this.Nit.Vit();s.Vet(t),this.Nat=this.Tet().length<=2}aq(){return{sourceAdapterJson:this.ZQ().aq(),basic:this.Nat}}lq(t){t&&(this.ZQ().lq(t.sourceAdapterJson),this.Nat=t.basic)}}}{const Hr=self.Ds,Vr=self.ac;Hr.kc=class extends Hr.tn{constructor(t,s=!0){super(),this.ln=t[0],this.Bat=t[2],this.Wat=[];for(const i of t[1]){const e=Hr.jat.VM(this,i);this.Wat.push(e)}for(let t=0;t<this.Wat.length;t++){const h=this.Wat[t],n=this.Wat[t+1],r=this.Wat[t-1];h._ot(n),h.Wot(r)}this.Hat=new Map,this.Vat=new Map,this.Uat(),s&&Vr.Bc(this.ln,(t,s,i,e)=>this.Lc(t,s,i,e),null,{transition:this})}static VM(t){return Hr.hn(Hr.kc,t)}nn(){for(const t of this.Wat)t.nn();Hr.Lr(this.Wat),this.Wat=null,this.Hat.clear(),this.Hat=null,this.Vat.clear(),this.Vat=null}Nc(t){this.Bat=!!t}zat(t){const s=this.Vat.get(t);if(s)return s;for(const i of this.Wat)if(i.Jat()===t)return this.Vat.set(t,i),i}qat(s){for(let t=this.Wat.length-1;0<=t;t--){const i=this.Wat[t],e=i.Jat();if(e<=s){let t=i;if(e<s)return t;if(e===s){for(;t;){const h=t.tK();if(!h)break;if(h.Jat()!==t.Jat())break;t=h}return t}}}}Lc(t,s,i,e){let h=t/e;if(this.Bat){const w=this.zat(0),S=this.zat(1),b=s+(s+i)*w.$at(),v=(s+i)*S.$at(),M=v-b;return 0===e?b+M:Vr.jc(t,b,M,e)}0===e&&(h=1);let n=this.qat(h),r=n.QZ();if(!r){const x=n.tK(),G=n;n=x,r=G}const o=r.Jat()-n.Jat(),a=Hr.un(h,n.Jat(),r.Jat(),0,o);if(n.Xat()||0==o){const T=s+(s+i)*n.$at(),_=(s+i)*r.$at(),I=_-T;return 0==o?1===a?T+I:T:Vr.jc(a,T,I,o)}let l=n.Jat(),u=n.$at(),c=n.Jat()+n.Yat(),f=n.$at()+n.Zat(),d=r.Jat()+r.Kat(),p=r.$at()+r.Qat(),m=r.Jat(),g=r.$at(),y=Vr._c("spline")(a,l,u,c,f,d,p,m,g,this.Hat.get(n));return(1-(y+=n.$at()))*s+y*(s+i)}Uat(){this.Hat.clear();for(let t=0;t<this.Wat.length-1;t++){const s=this.Wat[t];if(s.Drt()){const i=s,e=this.Wat[t+1];if(e.Ort()){const h=i.Jat(),n=i.Jat()+i.Yat(),r=e.Jat()+e.Kat(),o=e.Jat();this.Hat.set(i,Vr.Hc(h,n,r,o))}}}}}}{const Ur=self.Ds;Ur.jat=class extends Ur.tn{constructor(t,s){super(),this.tlt=t,this.slt=s[0],this.ilt=s[1],this.elt=s[2],this.hlt=s[3],this.nlt=s[4],this.rlt=s[5],this.Yot=s[6],this.Kot=s[7],this.olt=s[8],this.Tot=null,this.Not=null}nn(){this.tlt=null}static VM(t,s){return Ur.hn(Ur.jat,t,s)}_ot(t){this.Tot=t}QZ(){return this.Tot}Wot(t){this.Not=t}tK(){return this.Not}Jat(){return this.slt}$at(){return this.ilt}Yat(){return this.elt}Zat(){return this.hlt}Kat(){return this.nlt}Qat(){return this.rlt}Drt(){return this.Yot}Ort(){return this.Kot}Xat(){return"linear"===this.olt}llt(){return"cubic"===this.olt}}}{const zr=self.Ds;zr.ult=class extends zr.tn{constructor(t){super(),this.tf=t,this.clt=[]}nn(){for(const t of this.clt)t.nn();zr.Lr(this.clt),this.clt=null}VM(t){this.clt.push(zr.kc.VM(t))}}}{const Jr=self.Ds;Jr.flt=class extends Jr.tn{constructor(t){super(),this.tf=t,this.dlt=null,this.plt=null,this.MY=t=>this.xY(t.S6)}nn(){if(this.AY(),this.dlt){for(const t of this.dlt.values())t.clear();this.dlt.clear()}this.dlt=null,this.tf=null}VM(t){if(this.dlt||(this.dlt=new Map),t){const s=t[0][16],i=s[0],e=t[1],h=(this.dlt.has(e)||this.dlt.set(e,new Map),this.dlt.get(e));h.set(i,t)}}FY(){const t=this.tf.Lf();t&&t.addEventListener("instancedestroy",this.MY)}AY(){const t=this.tf.Lf();t&&t.removeEventListener("instancedestroy",this.MY)}mlt(){return!!this.dlt&&0!==this.dlt.size}glt(t,s){let i;if(i=t instanceof Jr.ylt?t.dF():t,this.dlt.has(i)){const e=this.dlt.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}}wlt(t,s){this.plt||(this.plt=new WeakMap),this.plt.has(t)||this.plt.set(t,s)}Slt(t){if(!this.plt)return"";const s=this.plt.get(t);return s||""}xY(t){this.plt&&this.plt.has(t)&&this.plt.delete(t)}}}{const qr=self.Ds;qr.blt=class{constructor(t){this.tf=t,this.vlt=new qr.Mlt}nn(){this.vlt.nn(),this.vlt=null,this.tf=null}FO(){return this.tf}VM(t){this.vlt.nc(t)}xlt(t){return this.vlt.Ks(t)}Glt(){return this.vlt.Glt()}}}{const M=self.Ds;M.Tlt=class{constructor(t,s,i,e,h,n,r){this.tf=h.FO(),this._lt=h,this.Ilt=t,this.Clt=i,this.Elt=e,this.jg=s,this.iY=n,this.Plt=r??n.kW().FN(),this.Rlt(),this.Alt=this.Dlt?.Flt()??-1,this.Olt=[],this.Llt=null,this.klt=NaN,this.Nlt=null,this.Blt=null,this.Wlt=null,this.jlt="",this.Hlt=null,this.Vlt="",this.Ult="",this.zlt=0,this.Jlt=!1,this.EQ=!1}nn(){this.EQ||(M.Lr(this.Olt),this.Olt=null,this.tf=null,this._lt=null,this.Elt=null,this.iY=null,this.Llt=null,this.klt=NaN,this.Nlt&&this.Nlt.clear(),this.Nlt=null,this.Blt=null,this.Wlt=null,this.jlt="",this.Hlt=null,this.Vlt="",this.Ult="",this.EQ=!0)}rn(){return this.EQ}qlt(){return this._lt}FO(){return this.tf}Jc(){return this.Ilt}$lt(){return this.Elt}fW(){return this.jg}JY(){return this.iY||(this.iY=this.tf.aO(this.Plt).a6()),this.iY}Xlt(){return this.Ylt(this.Alt)}Zlt(){const t=this.Xlt();return t?t.fW():""}Klt(){const t=this.Xlt();return t?t.IW():[]}Qlt(t){const s=this.Klt();if(!s)return!1;if(!s.length)return!1;const i=M.Tlt.dtt(t);return!(!i||!i.length)&&i.every(M.Tlt.mtt,s)}tut(t,s){const i=this.Klt();if(!i)return!1;if(!i.length)return!1;const e=M.Tlt.dtt(t);return!(!e||!e.length)&&e.every(t=>M.Tlt.sut.call(i,t,s))}static mtt(t){return""===t?1===this.length&&""===this[0]:this.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static dtt(t){return t.trim().split(" ")}static sut(s,i){return""===s?1===this.length&&""===this[0]:this.some(t=>M.compare(t.trim(),i,s.trim()))}iut(t){const s=this.Xlt();if(s){if(M.ae(t)){const i=s.eut(),e=i?i[t]:void 0;if(M.ae(e))return this.Ylt(e)}if("string"==typeof t)for(const h of s.eut()){const n=this.Ylt(h);if(n.yW(t))return this.Ylt(n.Flt())}}}hut(t){const s=this.iut(t);return s?s.fW():""}nut(t){const s=this.iut(t);return s?s.IW():""}rut(t){const s=this.Xlt();if(!s)return-1;const i=s.eut();if(!i)return-1;const e=this.iut(t);return e?i.indexOf(e.Flt()):-1}out(){const t=this.Xlt();if(!t)return 0;const s=t.eut();return s?s.length:0}Ylt(t){return this.Elt.Ylt(t)}e0(){const t=this.aut();t.lut(!0)}lut(t){if(this.uut()){for(const[s,i]of this.uut().entries())i.lut(!1);this.uut().clear()}if(this.Nlt=null,this.Llt=null,this.cut=null,this.Blt=null,this.jlt="",this.Hlt=null,this.Vlt="",this.Ult="",this.Olt=[],t){this._lt.fut(this);const e=this.Dlt.Flt();e!==this.Alt&&this.dut(e)}else this.Alt=this.Dlt.Flt()}mut(){const t=this.Elt.Ylt(this.Alt);return t?t.yut().gut():0}wut(t){const s=this.Sut(t);return s?s.Jc():""}but(t){let s;return M.ae(t)&&(s=this.Sut(t)),"string"==typeof t&&(s=this.vut(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.uet():""}Mut(t){let s;if(M.ae(t)&&(s=this.Sut(t)),s="string"==typeof t?this.vut(t):s){const i=s.xut();M.ae(i)&&(this.Olt.push(this.Alt),this.dut(i))}}Gut(t){const s=this.Elt.Tut(t);if(s){const i=this.Elt.Ylt(s.Flt());i&&(this.Olt.push(this.Alt),this.dut(i.Flt()))}}_ut(){const t=this.Olt.pop();M.ae(t)?this.dut(t):this.Iut()&&(this._lt.fut(this.Iut(),!0,!1,!1),this.Iut().dut(this.Cut()),this.aut().Eut(this.Iut()))}Put(t){const s=this.Xlt();if(s){s.Flt();const i=this.iut(t);i&&(this.Olt.push(this.Alt),this.dut(i.Flt()))}}Rut(s){if(M.ae(s)){const t=this.Elt.Ylt(this.Alt),i=t.yut().Aut();return!!i[s]}if("string"==typeof s){const e=this.Elt.Ylt(this.Alt),h=e.yut().Aut();for(let t=0;t<h.length;t++)if(h[t].Jc()===s)return!0}return!1}Fut(){this.Jlt=!0}Dut(){return 0<this.zlt}Out(){this.zlt++}Lut(){this.zlt--,0===this.zlt&&this.Jlt&&this._lt.kut(this)}dut(t){const i=this.Alt,s=this.JY().kW();if(this.Out(),this._lt.Nut(this),this.tf.r4(M.Q$.Flowchart.Z$.OnBeforeAnyNodeChange,s),this.tf.r4(M.Q$.Flowchart.Z$.OnBeforeTaggedNodeChange,s),this.tf.r4(M.Q$.Flowchart.Z$.OnBeforeAnyNodeChangeInFlowchart,s),this.tf.r4(M.Q$.Flowchart.Z$.OnBeforeTaggedNodeChangeInFlowchart,s),this.Alt=t,this.tf.r4(M.Q$.Flowchart.Z$.OnAnyNodeChange,s),this.tf.r4(M.Q$.Flowchart.Z$.OnTaggedNodeChange,s),this.tf.r4(M.Q$.Flowchart.Z$.OnAnyNodeChangeInFlowchart,s),this.tf.r4(M.Q$.Flowchart.Z$.OnTaggedNodeChangeInFlowchart,s),this._lt.But(),this.Lut(),!this.rn()){const e=this.Ylt(this.Alt);if("reference"===e.Qx()){const h=e.Wut();if(this.jut(e)){this.Olt.pop();const n=this.Hut(e),r=(this._lt.fut(n,!0,!0,!1),n.Vut(this,i),this.aut());r.Eut(n)}else{const o=e.Uut();if(h){this.Olt.pop();let s=e.zut();if(s){let t=this._lt.Jut(s);for(;t;)s=M.Vd(s),t=this._lt.Jut(s)}else{s=h+"-ref";let t=this._lt.Jut(s);for(;t;)s=M.Vd(s),t=this._lt.Jut(s)}const a=this._lt.qut(h,o,s,this.iY,!0),l=(a.Vut(this,i),this.$ut(e,a),this.aut());a.Xut(l),l.Eut(a)}}}}}Sut(t){const s=this.Elt.Ylt(this.Alt);if(!s)return null;const i=s.yut().Aut();if(!i)return null;const e=i[t];return e||null}vut(t){const s=this.Elt.Ylt(this.Alt);if(!s)return null;const i=s.yut().Yut(t);return i||null}Rlt(s){if("number"==typeof s){let t=this.Ylt(s);t=t||this.Elt.Zut(),this.Dlt=t}else{let t=this.Elt.Tut(this.Clt);t=t||this.Elt.Zut(),this.Dlt=t}}aq(){return this.Jlt?null:{flowchartName:this.Ilt,flowchartTag:this.jg,startNodeTag:this.Clt,currentNodeId:this.Alt,previousNodeIds:this.Olt,pluginUID:this.iY.kW().FN(),reference:{previousFlowchartTag:this.Iut()?this.Iut().fW():"",previousStartNodeId:M.ae(this.Cut())?this.Cut():NaN,referencesJson:this.Kut(),currentReferenceFlowchartTag:this.Qut()?this.Qut().fW():"",rootFlowchartTag:this.aut()?this.aut().fW():""}}}Kut(){if(!this.tct())return null;const t=[];for(const[s,i]of this.uut().entries())t.push({flowchartElementId:s.Flt(),flowchartStateTag:i.fW()});return t.length?t:null}lq(t){if(t){if(this.Ilt=t.flowchartName,this.jg=t.flowchartTag,this.Clt=t.startNodeTag,this.Alt=t.currentNodeId,this.Olt=t.previousNodeIds,this.Plt=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.jlt=s.previousFlowchartTag,this.klt=s.previousStartNodeId,this.Hlt=s.referencesJson,this.Vlt=s.currentReferenceFlowchartTag,this.Ult=s.rootFlowchartTag}this.Rlt()}}Iut(){return"string"==typeof this.jlt&&this.jlt&&(this.Llt=this._lt.Jut(this.jlt),this.jlt=""),this.Llt}Cut(){return this.klt}Vut(t,s){this.Llt=t,this.klt=s}Qut(){return"string"==typeof this.Vlt&&this.Vlt&&(this.Blt=this._lt.Jut(this.Vlt),this.Vlt=""),this.Blt}Eut(t){this.Blt=t,this.Blt===this&&(this.Blt=null)}aut(){return"string"==typeof this.Ult&&this.Ult&&(this.Wlt=this._lt.Jut(this.Ult),this.Ult=""),this.Wlt||this}Xut(t){this.Wlt=t}tct(){return this.sct(),!!this.Nlt}jut(t){return this.sct(),this.Nlt&&this.Nlt.has(t)}sct(){if(this.Hlt){this.Nlt&&this.Nlt.clear(),this.Nlt||(this.Nlt=new Map);for(const t of this.Hlt){const s=this._lt.Jut(t.flowchartStateTag),i=s.Ylt(t.flowchartElementId);this.Nlt.set(i,s)}this.Hlt=null}}uut(){return this.sct(),this.Nlt}Hut(t){return this.sct(),this.Nlt.get(t)}$ut(t,s){this.Nlt||(this.Nlt=new Map),this.Nlt.set(t,s)}}}{const $r=self.Ds;$r.ict=class{constructor(t){this.tf=t,this.ect=new Map,this.hct=null,this.nct=[],this.rct=()=>this.IY(),this.oct=null}nn(){$r.Lr(this.nct),this.nct=null,this.ect.clear(),this.ect=null,this.hct=null,this.tf=null,this.oct=null}FO(){return this.tf}qut(t,s,i,e,h,n){const r=this.tf.qlt().xlt(t);if(r){if(!this.ect.has(i)){const o=new $r.Tlt(t,i,s,r,this,e,n);return this.ect.set(i,o),h&&this.fut(o,!0),o}{const a=this.ect.get(i);a&&this.kut(a)}}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}kut(t){if(t.Fut(),!t.Dut()){const s=t.fW();this.ect.delete(s),t.nn(),this.hct===t&&(this.hct=null)}}lct(t){t.e0()}Jut(t){return this.ect.get(t)}Nut(t){this.nct.push(t)}But(){this.nct.pop()}fut(t,s=!1,i=!1,e=!0){if(e){const h=t.Qut();t=h||t}t!==this.hct&&(this.uct(),this.cct(t,s,i))}fct(t){return"string"==typeof t?this.Jut(t):this.nct.length?this.nct[this.nct.length-1]:this.hct}uct(){if(this.hct&&!this.hct.rn()){const t=this.hct.JY().kW();this.hct.Out(),this.Nut(this.hct),this.tf.r4($r.Q$.Flowchart.Z$.OnBeforeFlowchartChange,t),this.But(),this.hct.Lut()}}cct(t,s=!1,i=!1){if(this.hct=t,this.hct&&!this.hct.rn()){const e=this.hct.JY().kW();this.hct.Out(),this.Nut(this.hct),this.tf.r4($r.Q$.Flowchart.Z$.OnFlowchartChange,e),!0!==i&&"number"!=typeof i||this.hct.Rlt(i),s&&(this.tf.r4($r.Q$.Flowchart.Z$.OnAnyNodeChange,e),this.tf.r4($r.Q$.Flowchart.Z$.OnTaggedNodeChange,e)),this.But(),this.hct.Lut()}}aq(){return{flowchartJsonObjects:[...this.ect.values()].map(t=>t.aq()),currentFlowchartTag:this.hct?this.hct.fW():null}}lq(t){if(t){this.oct=t;const s=new Map;for(const i of this.oct.flowchartJsonObjects){const e=i.flowchartTag;if(this.ect.has(e)){const h=this.ect.get(e);h.lq(i),s.set(e,h)}else{const n=this.qut(i.flowchartName,i.startNodeTag,i.flowchartTag,null,!1,i.pluginUID);n.lq(i),s.set(i.flowchartTag,n)}}for(const[r,o]of this.ect.entries())s.has(r)||o.nn();this.ect.clear(),this.ect=s,this.tf.H$()?this.tf.Lf().addEventListener("afterload",this.rct):this.IY()}}IY(){this.tf.Lf().removeEventListener("afterload",this.rct);const t=this.ect.get(this.oct.currentFlowchartTag);t&&this.fut(t,!0),this.oct=null}}}{const Xr=self.Ds;Xr.Mlt=class{constructor(){this.dct=new Map}nn(){for(const t of this.dct.values())t.nn();this.dct.clear(),this.dct=null}nc(t){const s=new Xr.pct(t),i=s.Jc();this.dct.set(i,s)}Ks(t){return this.dct.get(t)}Glt(){return!!this.dct.size}static mct(t,s,i,e){if(s)for(const h of s){const n=new i(h,e);t.push(n)}}}}{const Yr=self.Ds;Yr.pct=class{constructor(t){this.ln=t[0],this.gct=new Yr.yct(t[1],this)}nn(){this.gct.nn(),this.gct=null}wct(){return this.gct}Ylt(t){return this.gct.Ylt(t)}Tut(t){return this.gct.Tut(t)}Zut(){return this.gct.Zut()}Jc(){return this.ln}}}{const Zr=self.Ds;class Kr{constructor(t,s){this.gct=s,this.cf=t[7],this.Sct=t[0],this.jg=t[1],this.jg?this.kQ=this.jg.trim().split(" ").map(t=>t.trim()):this.kQ=[],this.bct=t[2],this.vct=null,this.Mct=null,"dictionary"===this.cf&&(this.vct=t[3],this.Mct=t[4]),this.xct=t[6],this.Gct=null,this.Tct=null,this._ct=null,"reference"===this.cf&&(this.Gct=t[8],this.Tct=t[9],this._ct=t[10]),this.Ict=new Zr.Cct(t[5],this)}nn(){this.gct=null}wct(){return this.gct}yut(){return this.Ict}Flt(){return this.Sct}fW(){return this.jg}IW(){return this.kQ}yW(t){if(!this.kQ)return!1;if(!this.kQ.length)return!1;const s=Zr.Tlt.dtt(t);return!(!s||!s.length)&&s.every(Zr.Tlt.mtt,this.kQ)}Ect(){return this.xct}Pct(t){this.xct=!!t}Rct(){if("dictionary"===this.cf)return!0;if("reference"===this.cf)return!1;throw new Error("unexpected flowchart node type: "+this.cf)}eut(){return this.bct}Act(){return this.vct}Fct(){return this.Mct}Qx(){return this.cf}Wut(){return this.Gct}Uut(){return this.Tct}zut(){return this._ct}}Zr.yct=class{constructor(t,s){this.Elt=s,this.Dct=[],this.Oct=new Map,this.Lct=new Map,this.kct=null,Zr.Mlt.mct(this.Dct,t,Kr,this);for(const i of this.Dct){const e=i.Flt(),h=i.fW(),n=i.IW(),r=i.Ect();if(this.Oct.set(e,i),h)for(const a of n)this.Lct.has(a)||this.Lct.set(a,new Set),this.Lct.get(a).add(i);r&&(this.kct=i);const o=i.yut();for(const l of o.Nct()){const u=l.Flt();this.Oct.set(u,l)}}this.kct||this.Bct()}nn(){this.Elt=null;for(const t of this.Dct)t.nn();Zr.Lr(this.Dct),this.Dct=null}$lt(){return this.Elt}Ylt(t){return this.Oct.get(t)}Tut(t){if(!t||!t.length)return null;const i=[];for(const e of t.trim().split(" ")){let t=this.Lct.get(e.trim())??new Set;if(0===t.size)return null;i.push(t)}const s=i.reduce((t,s)=>s.size<t.size?s:t);return[...s].filter(s=>i.every(t=>t.has(s)))[0]}Zut(){return this.kct}*Wct(){for(const t of this.Dct)yield t}Bct(){let t=0;for(const s of this.Wct())s.Ect()&&t++;if(0===t){for(const i of this.Wct())if(i.Rct()&&!i.Ect())return void i.Pct(!0)}else{if(1===t)return;if(1<t){let t=!0;for(const e of this.Wct())e.Rct()&&(e.Ect()&&t?t=!1:e.Ect()&&!t&&e.Pct(!1))}}for(const h of this.Wct())if(h.Rct()&&h.Ect())return void(this.kct=h)}}}{const Qr=self.Ds;class to{constructor(t,s){this.Ict=s,this.Sct=t[0],this.ln=t[1],this.Ght=t[2],this.jct=t[3]}nn(){this.Ict=null}yut(){return this.Ict}Flt(){return this.Sct}Jc(){return this.ln}uet(){return this.Ght}xut(){return this.jct}}Qr.Cct=class{constructor(t,s){this.Hct=s,this.Vct=[],this.Uct=new Map,Qr.Mlt.mct(this.Vct,t,to,this);for(const i of this.Vct)this.Uct.set(i.Jc(),i)}nn(){this.Hct=null;for(const t of this.Vct)t.nn();Qr.Lr(this.Vct),this.Vct=null}zct(){return this.Hct}gut(){return this.Vct.length}Aut(){return this.Vct}Yut(t){return this.Uct.get(t)}*Nct(){for(const t of this.Vct)yield t}}}{const so=self.Ds;so.Jct=class extends so.tn{constructor(t){super(),this.qct=t,this.$ct=[],this.$ct.push(so.hn(so.Xct,this)),this.Wg=0,this.Yct=this.$ct[0]}nn(){for(const t of this.$ct)t.nn();so.Lr(this.$ct),this.Yct=null,this.qct=null}SN(){return this.qct}Tk(){return this.Yct}Zct(){return this.$ct[this.Wg-1]}Xu(){this.Tk().Xu()}Kct(){const t=this.$ct,s=++this.Wg;if(s===t.length){const i=so.hn(so.Xct,this);t.push(i),this.Yct=i}else{const e=t[s];e.e0(),this.Yct=e}}Qct(){const t=this.$ct,s=++this.Wg,i=(s===t.length&&t.push(so.hn(so.Xct,this)),t[s]);i.M0(t[s-1]),this.Yct=i}H8(){this.Yct=this.$ct[--this.Wg]}tft(i){const e=this.$ct;for(let t=0,s=e.length;t<s;++t)e[t].tft(i)}}}{const io=self.Ds;io.Xct=class extends io.tn{constructor(t){super(),this.$ct=t,this.qct=this.$ct.SN(),this.ift=this.qct.FO().nD(),this.eft=!0,this.A7=[],this.hft=[]}nn(){this.nft(),this.$ct=null,this.qct=null,this.ift=null}nft(){io.Lr(this.A7),io.Lr(this.hft)}SN(){return this.qct}rft(){return this.eft}oft(){return this.eft?!!this.qct.Ik():!!this.A7.length}Gk(){return this.eft?this.qct.Gk():this.A7}aft(){return!!this.hft.length}lft(){return this.hft}uft(){const t=this.Gk();return t.length?t:this.hft}e0(){this.eft=!0,io.Lr(this.hft)}Xu(){this.eft=!0}M0(t){t.rft()?this.e0():(this.eft=!1,io.Wr(this.A7,t.A7),io.Lr(this.hft))}cft(t){this.A7.push(t)}fft(t){this.hft.push(t)}dft(t){this.eft=!!t}pft(){return this.A7}mft(){return this.hft}gft(t){this.eft=!1,io.Lr(this.A7),this.A7.push(t)}yft(t){this.eft=!1,io.Wr(this.A7,t)}wft(t){this.eft=!1,io.Lr(this.A7);for(const s of t)this.A7.push(s)}Sft(t,s){for(const i of s)t.has(i)||this.hft.push(i)}bft(t){for(const s of t)this.A7.push(s);io.zr(this.hft,t)}vft(){io.Lr(this.hft)}Mft(t){if(t)if(this.ift.E8().KF().xft()){this.rft()&&(io.Lr(this.A7),io.Wr(this.hft,t.SN().Gk()),this.eft=!1);const s=this.hft.indexOf(t);-1!==s&&(this.A7.push(this.hft[s]),this.hft.splice(s,1))}else this.gft(t)}tft(t){io.zr(this.A7,t),io.zr(this.hft,t)}}}{const eo=self.Ds;eo.Gft=class extends eo.tn{constructor(t){super(),this.Tft=t,this.tf=this.Tft.FO(),this.$ct=[],this.$ct.push(eo.hn(eo._ft,this,null)),this.Wg=0,this.Ift=[]}nn(){for(const t of this.$ct)t.nn();eo.Lr(this.$ct),eo.Lr(this.Ift),this.Tft=null,this.tf=null}JF(){return this.Tft}FO(){return this.tf}E8(){return this.$ct[this.Wg]}Cft(){return this.$ct}Eft(){return this.Wg}P8(t){const s=this.$ct,i=++this.Wg;if(i===s.length){const e=eo.hn(eo._ft,this,t);return s.push(e),e}{const h=s[i];return h.e0(t),h}}H8(){--this.Wg}Pft(t){this.Ift.push(t)}Rft(){this.Ift.pop()}hD(){const t=this.Ift;return 0===t.length?null:t.at(-1)}}}{const ho=self.Ds;ho._ft=class extends ho.tn{constructor(t,s){super(),this.$ct=t,this.tf=this.$ct.FO(),this.Aft=s,this.Fft=0,this.Dft=0,this.Oft=!1,this.Lft=!1,this.kft=null,this.Nft=0,this.Bft=0,this.Wft=null}nn(){this.e0(null),this.$ct=null,this.tf=null}e0(t){this.Aft=t,this.Fft=0,this.Dft=0,this.Oft=!1,this.Lft=!1,this.Wft=null}jft(t,s){this.Aft=t,this.Fft=0,this.Dft=s}Hft(){this.Fft=0,this.Dft=0}KF(){return this.Aft}Vft(t){this.Aft=t}Uft(){return this.Fft}zft(t){this.Fft=t}Jft(){return this.Dft}qft(t){this.Dft=t}$ft(t){this.Oft=!!t}Xft(){return this.Oft}Yft(t){this.Lft=!!t}Zft(){return this.Lft}Kft(t){this.kft=t}Qft(){return this.kft}t0t(t,s){this.Nft=t,this.Bft=s}rD(){return this.Nft}oD(t){this.Bft=t}s0t(){return this.Bft}i0t(){const t=this.Aft;return!!t.e0t()||this.Fft<t.h0t()-1&&!!t.C8().length}n0t(t){this.Wft=t}r0t(){return this.Wft}}}{const no=self.Ds;no.o0t=class extends no.tn{constructor(t){super(),this.Tft=t,this.tf=this.Tft.FO(),this.$ct=[],this.Wg=-1,this.Yct=null,this.a0t=[]}nn(){no.Lr(this.$ct),this.Tft=null,this.tf=null}l0t(t){this.a0t=t;const s=this.a0t.slice(0);this.$ct.push(s),this.Wg=0,this.Yct=s}JF(){return this.Tft}FO(){return this.tf}u0t(){return this.Yct}P8(){const t=++this.Wg,s=this.$ct;t===s.length?s.push(this.a0t.slice(0)):no.Wr(s[t],this.a0t),this.Yct=s[t]}H8(){this.Yct=this.$ct[--this.Wg]}}}{const ro=self.Ds;ro.c0t=class extends ro.tn{constructor(t){super(),this.Tft=t,this.tf=this.Tft.FO(),this.$ct=[],this.Wg=-1}nn(){ro.Lr(this.$ct),this.Tft=null,this.tf=null}JF(){return this.Tft}FO(){return this.tf}f0t(){return 0<=this.Wg}u0t(){return this.$ct[this.Wg]}P8(){if(++this.Wg,this.Wg===this.$ct.length){const t=ro.hn(ro.d0t,this);return this.$ct.push(t),t}{const s=this.$ct[this.Wg];return s.e0(),s}}H8(){--this.Wg}p0t(s){const i=this.$ct;for(let t=this.Wg;0<=t;--t){const e=i[t];if(e.Jc()===s)return e}return null}m0t(){return this.$ct.slice(0,this.Wg+1)}}}{const oo=self.Ds;oo.d0t=class extends oo.tn{constructor(t){super(),this.g0t=t,this.ln="",this.Wg=0,this.y0t=!1,this.w0t=NaN}e0(){this.ln="",this.Wg=0,this.y0t=!1,this.w0t=NaN}F8(t){this.ln=t}Jc(){return this.ln}B8(t){this.Wg=t}dF(){return this.Wg}mW(){this.y0t=!0}j8(){return this.y0t}S0t(t){this.w0t=t}b0t(){return this.w0t}}}{const ao=self.Ds;ao.v0t=class extends ao.tn{constructor(){super(),this.$ct=[],this.Wg=-1}nn(){ao.Lr(this.$ct)}u0t(){return this.$ct[this.Wg]}P8(){if(++this.Wg,this.Wg!==this.$ct.length)return this.$ct[this.Wg];{const t=[];return this.$ct.push(t),t}}H8(){--this.Wg}}}{let t=function(t,s){return t.dF()-s.dF()},n=function(i,e){for(let t=0,s=i.length;t<s;++t)if(i[t]!==e[t])return!1;return!0};t,n;const x=self.Ds;x.M0t=class extends x.tn{constructor(t){super(),this.tf=t,this.x0t=[],this.G0t=new Map,this.T0t=[],this._0t=new Map,this.I0t=new Map,this.C0t=new Map,this.E0t=new Map,this.P0t=new Map,this.R0t=new Map,this.A0t=0,this.F0t=[],this.D0t=[],this.O0t=[],this.L0t=new Map,this.k0t=new Map,this.ift=x.hn(x.Gft,this),this.N0t=x.hn(x.o0t,this),this.g0t=x.hn(x.c0t,this),this.B0t=[],this.W0t=[],this.j0t=[],this.H0t=0,this.V0t=0,this.U0t=0,this.z0t=[],this.J0t=[],this.q0t=[],this.$0t=new Map,this.X0t=new Map,self.c3_callFunction=(t,s)=>this.Y0t(t,s)}nn(){this.cX(),this.ift.nn(),this.ift=null,this.N0t.nn(),this.N0t=null,x.Lr(this.W0t),x.Lr(this.j0t),this.tf=null,x.Lr(this.x0t),this.G0t.clear()}VM(t){const s=x.hn(x.Z0t,this,t);this.x0t.push(s),this.G0t.set(s.Jc().toLowerCase(),s)}K0t(t){this.B0t.push(t)}Q0t(){for(const t of this.k0t.values())t.t1t();for(const s of this.L0t.values())s.Q0t();for(const i of this.k0t.values())i.Q0t();for(const e of this.x0t)e.Q0t();for(const h of this.x0t)h.R$();for(const n of this.B0t)n.Q0t(!1);x.Lr(this.B0t),this.N0t.l0t(this.O0t)}FO(){return this.tf}P$(t){return this.G0t.get(t.toLowerCase())||null}s1t(t){this.T0t.push(t),this._0t.set(t.i1t(),t)}e1t(t){this.I0t.set(t.zz(),t)}h1t(t){this.C0t.set(t.zz(),t)}n1t(t){this.E0t.set(t.zz(),t)}r1t(t){switch(t.o1t()){case 0:this.L0t.set(t.a1t().toLowerCase(),t);break;case 1:this.k0t.set(t.a1t().toLowerCase(),t)}}l1t(t){this.R0t.set(t.zz(),t),(t.Mz()?this.F0t:this.D0t).push(t)}u1t(i){2<=i.length&&i.sort(t);let e=this.P0t.get(i.length);e||(e=[],this.P0t.set(i.length,e));for(let t=0,s=e.length;t<s;++t){const h=e[t];if(n(i,h))return h}return e.push(i),i}c1t(t){return this.O0t.push(t.f1t()),this.A0t++}nD(){return this.ift}d1t(){return this.nD().E8()}KF(){return this.d1t().KF()}p1t(){const t=this.d1t(),s=t.KF();return s.m1t(t.Uft())}g1t(){const t=this.d1t(),s=t.KF();return s.y1t(t.Jft())}w1t(){return this.N0t}A8(){return this.g0t}S1t(t){const s=[];for(t=t.b1t();t;)x.zh(s,t.v1t()),t=t.b1t();return s}M1t(t){const s={};for(const i of this.S1t(t))s[i.x1t()]=i.G1t();return Object.create(Object.prototype,s)}T1t(t){return this.R0t.get(t)||null}_1t(t){return this.I0t.get(t)||null}I1t(t){return this.C0t.get(t)||null}C1t(t){return this.E0t.get(t)||null}qF(t){return this.L0t.get(t.toLowerCase())||null}E1t(t,s){let i=this.k0t.get((t.Jc()+"."+s).toLowerCase());if(i)return i;if(!t.Lz())for(const e of t.P1t())if(i=this.k0t.get((e.Jc()+"."+s).toLowerCase()))return i;return null}R1t(){return this.F0t}A1t(){return this.D0t}F1t(t){for(const s of this.F0t)s.D1t();if(t)for(const i of this.D0t)i.z2()&&i.D1t()}O1t(t){return this._0t.get(t.toLowerCase())||null}L1t(t){const s=this.I0t.get(t);return s&&s.k1t()?s:null}N1t(){return this.T0t}B1t(){for(const t of this.T0t)t.W1t()}j1t(){for(const t of this.x0t)t.H1t()}V1t(t){this.j1t(),this.H0t++;for(const s of t.$X()){const i=s.h$();i&&(this.tf.U1t(s),i.g_(),this.tf.z1t())}this.H0t--}async J1t(t){this.j1t(),this.H0t++;for(const s of this.q1t(t))await this.tf.$1t(s);this.H0t--}*q1t(t){for(const s of t.$X()){const i=s.h$();i&&(this.tf.U1t(s),yield*i.X1t(),this.tf.z1t())}}Y1t(t,s,i,e){let h=!1;if(!t.zD())return this.Z1t(s,i,e);this.V0t++;for(const n of t.$X()){const r=n.h$();if(r){this.tf.U1t(n);for(const a of r.K1t()){const l=a.Y1t(s,i,e);h=h||l}const o=r.Y1t(s,i,e);h=h||o,this.tf.z1t()}}return this.V0t--,h}*Q1t(t,s,i,e){let h=!1;if(!t.zD())return this.Z1t(s,i,e);this.V0t++;for(const n of t.$X()){const r=n.h$();if(r){this.tf.U1t(n);for(const a of r.K1t()){const l=yield*a.Q1t(s,i,e);h=h||l}const o=yield*r.Q1t(s,i,e);h=h||o,this.tf.z1t()}}return this.V0t--,h}Z1t(t,s,i){return this.W0t.push([t,s,i]),!1}tdt(t,s,i){let e=null,h=new Promise(t=>e=t);return this.j0t.push([t,s,i,e]),h}*sdt(){if(this.tf.idt())throw new Error("should not be in breakpoint");const t=this.tf.$D();for(;this.j0t.length;){const[s,i,e,h]=this.j0t.shift(),n=yield*this.Q1t(t,s,i,e);h(n)}}async edt(){for(const t of this.sdt())await this.tf.$1t(t)}hdt(t,i,e,h){let n=!1,s=t.zD(),r=s.h$();if(r){this.V0t++,this.tf.U1t(s);const o=r.K1t();for(let t=0,s=o.length;t<s;++t){const l=o[t].hdt(i,e,h);n=n||l}const a=r.hdt(i,e,h);return n=n||a,this.tf.z1t(),this.V0t--,n}}*ndt(t,i,e,h){let n=!1,s=t.zD(),r=s.h$();if(r){this.V0t++,this.tf.U1t(s);const o=r.K1t();for(let t=0,s=o.length;t<s;++t){const l=yield*o[t].ndt(i,e,h);n=n||l}const a=yield*r.ndt(i,e,h);return n=n||a,this.tf.z1t(),this.V0t--,n}}rdt(){return this.V0t}odt(){return 0<this.rdt()}adt(){return++this.V0t}ldt(){--this.V0t}udt(){return 0<this.H0t}Fk(){return this.udt()||this.odt()}tX(t){for(const[s,i,e]of this.W0t)this.Y1t(t,s,i,e);x.Lr(this.W0t)}Rk(t){t?this.U0t++:this.U0t--}IN(){return 0<this.U0t}cdt(i){for(let t=0,s=i.length;t<s;++t)i[t].fdt().Xu()}ddt(i){for(let t=0,s=i.length;t<s;++t)i[t].fdt().Kct()}L8(i){for(let t=0,s=i.length;t<s;++t)i[t].fdt().Qct()}N8(i){for(let t=0,s=i.length;t<s;++t)i[t].fdt().H8()}QF(s){const i=new Set,e=this.ift.Cft(),h=this.ift.Eft();for(let t=0;t<=h;++t){const n=e[t].r0t();if(n)for(const r of n)s&&s.has(r)||i.add(r)}return i}pdt(t){const s=new Set([...t]),i=this.QF(s);if(0<i.size){for(const e of i)e.fdt().Kct();return[...i]}return null}mdt(){const t=x.hn(x.gdt,this);return this.z0t.push(t),t}ydt(){return this.z0t}wdt(){if(this.z0t.length){let i=this.d1t(),e=!1;this.H0t++;for(let t=0,s=this.z0t.length;t<s;++t){const h=this.z0t[t];h.Sdt()&&h.bdt(i),h.vdt()&&(e=!0)}e&&(this.Mdt(),i.e0(null)),this.H0t--}}async xdt(){if(this.z0t.length){let i=this.d1t(),e=!1;this.H0t++;for(let t=0,s=this.z0t.length;t<s;++t){const h=this.z0t[t];h.Sdt()&&await h.Gdt(i),h.vdt()&&(e=!0)}e&&(this.Mdt(),i.e0(null)),this.H0t--}}Mdt(){const t=x.Ur(this.z0t,t=>t.vdt());for(const s of t)s.nn()}cX(){for(const t of this.z0t)t.nn();x.Lr(this.z0t)}Tdt(t){for(const s of this.z0t)s.tft(t);for(const i of t){const e=this.X0t.get(i);if(this.X0t.delete(i),e)for(const{resolve:h}of e._dt.values())h(!0)}}Idt(t){this.J0t.push({promise:t,Cdt:this.rdt()})}Edt(){x.Lr(this.J0t)}Pdt(){const s=this.rdt();this.J0t=this.J0t.filter(t=>t.Cdt<=s)}Rdt(){const t=Promise.all(this.J0t.map(t=>t.promise));return this.J0t=[],t}aD(t){const s=t.toLowerCase();this.q0t.push(s),this.tf.r4(x.Q$.K$.Z$.Adt,null),this.q0t.pop();for(const e of this.tf.JF().ydt())e.Fdt()&&e.Ddt()===s&&e.Odt();const i=this.$0t.get(s);i&&(i.resolve(),this.$0t.delete(s))}uD(t){const i=t.toLowerCase(),s=this.$0t.get(i);if(s)return s.promise;{let s=null,t=new Promise(t=>s=t);return this.$0t.set(i,{promise:t,resolve:s}),t}}Ldt(){if(0===this.q0t.length)throw new Error("not in a signal");return this.q0t.at(-1)}kdt(t){let s=this.X0t.get(t);return s||(s={Ndt:[],_dt:new Map},this.X0t.set(t,s)),s}JN(t,s){const i=this.kdt(t),e=s.toLowerCase();i.Ndt.push(e),this.tf.r4(t.pk().Wdt().Z$.Bdt,t),i.Ndt.pop();for(const n of this.tf.JF().ydt())n.jdt()&&n.Ddt()===e&&n.Hdt(t);const h=i._dt.get(e);h&&(h.resolve(!1),i._dt.delete(e)),0===i.Ndt.length&&0===i._dt.size&&this.X0t.delete(t)}qN(t,s){const i=this.kdt(t),e=s.toLowerCase(),h=i._dt.get(e);if(h)return h.promise;{let s=null,t=new Promise(t=>s=t);return i._dt.set(e,{promise:t,resolve:s}),t}}Vdt(t){const s=this.kdt(t);if(s&&0!==s.Ndt.length)return s.Ndt.at(-1);throw new Error("not in a signal")}aq(){return{groups:this.Udt(),cnds:this.zdt(),acts:this.Jdt(),vars:this.qdt(),waits:this.$dt()}}lq(t){this.Xdt(t.groups),this.Ydt(t.cnds),this.Zdt(t.acts),this.Kdt(t.vars),this.Qdt(t.waits)}Udt(){const t={};for(const s of this.N1t())t[s.zz().toString()]=s.tpt();return t}Xdt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.L1t(e);h&&h.spt(i)}}zdt(){const t={};for(const[s,i]of this.C0t){const e=i.aq();e&&(t[s.toString()]=e)}return t}Ydt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,n]of this.C0t)n.lq(s.get(h)||null)}Jdt(){const t={};for(const[s,i]of this.E0t){const e=i.aq();e&&(t[s.toString()]=e)}return t}Zdt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,n]of this.E0t)n.lq(s.get(h)||null)}qdt(){const t={};for(const[s,i]of this.R0t)i.ipt()||!i.Mz()&&!i.z2()||(t[s.toString()]=i.uet());return t}Kdt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.T1t(e);h&&h.$et(i)}}$dt(){return this.z0t.filter(t=>!t.ept()).map(t=>t.aq())}Qdt(t){this.cX();for(const s of t){const i=x.gdt.hpt(this,s);i&&this.z0t.push(i)}}npt(){return[...this.tf.$D().$X()].map(t=>t.h$()).filter(t=>t).map(t=>t.rpt())}opt(t){for(;t;){const s=t.b1t();if(s instanceof x.apt)return s;t=s}return null}Y0t(t,s){Array.isArray(s)||(s=[]);const i=this.qF(t.toLowerCase());if(!i)return null;if(!i.Ju())return i.$F();const e=i.lpt();if(s.length<e.length)for(s=s.slice(0);s.push(e[s.length].f1t()),s.length<e.length;);const h=i.YF();return h.tD(h.ZF(),!1,i.iD(),i.$F(),...s)}}}{const lo=self.Ds;lo.Z0t=class extends lo.tn{constructor(t,s){super(),this.Tft=t,this.tf=t.FO(),this.ln=s[0],this.upt=[],this.cpt=new Map,this.fpt=new Map,this.dpt=new Map,this.ppt=!1,this.mpt=[],this.gpt=[],this.ypt=new Set;for(const i of s[1])this.wpt(i,null,this.upt);this.Spt=this.tf.g4()?{type:"sheet",name:this.ln,bpt:0,children:[]}:null}nn(){this.Tft=null,this.tf=null}wpt(t,s,i){switch(t[0]){case 0:case 3:this.vpt(t,s,i);break;case 1:this.Mpt(t,s,i);break;case 2:this.xpt(t,s,i);break;case 4:this.Gpt(t,s);break;case 5:this.Tpt(t,s,i);break;case 6:this._pt(t,s);break;default:throw new Error("invalid event type")}}vpt(t,s,i){const e=lo.Ipt.VM(this,s,t);if(e.xft()){i.push(e);const h=e.Cpt();for(let t=0,s=h.length;t<s;++t)h[t].Ept()&&this.Ppt(e,t)}else e.Ept()?this.Ppt(e,0):i.push(e)}Gpt(t,s){const i=lo.apt.Rpt(this,s,t);this.Tft.r1t(i)}_pt(t,s){const i=lo.apt.Apt(this,s,t);this.Tft.r1t(i)}Mpt(t,s,i){const e=lo.Fpt.VM(this,s,t);i.push(e)}xpt(t,s,i){const e=lo.Dpt.VM(this,s,t);i.push(e)}Tpt(t,s,i){const e=lo.Opt.VM(this,s,t);i.push(e)}Ppt(h,n){h.xft()||this.Tft.K0t(h);const r=h.m1t(n),o=r.Lpt(),a=r.SN();if(r.kpt()){let t=this.fpt.get(a),s=(t||(t=new Map,this.fpt.set(a,t)),r.Npt().toLowerCase()),i=t.get(o),e=(i||(i=new Map,t.set(o,i)),i.get(s));e||(e=[],i.set(s,e)),e.push([h,n])}else{let t=this.cpt.get(a),s=(t||(t={Bpt:new Map,Wpt:new Map},this.cpt.set(a,t)),r.w6()),i,e=(s?(i=t.Wpt.get(s))||(i=new Map,t.Wpt.set(s,i)):i=t.Bpt,i.get(o));e||(e=[],i.set(o,e)),e.push([h,n])}}Q0t(){const i=this.upt;for(let t=0,s=i.length;t<s;++t){const e=t<s-1&&i[t+1]instanceof lo.Ipt&&i[t+1].jpt();i[t].Q0t(e)}}Hpt(t){this.mpt.push(t)}R$(){lo.Lr(this.gpt),this.Vpt(this),this.ypt.clear()}Vpt(t){const s=t.gpt,i=t.ypt;for(const e of this.mpt){const h=e.Upt();e.zpt()&&t!==h&&!i.has(h)&&(i.add(h),h.Vpt(t),s.push(h))}}K1t(){return this.gpt}JF(){return this.Tft}FO(){return this.tf}Jc(){return this.ln}Jpt(t,s){this.dpt.set(s,t)}qpt(t){return this.dpt.get(t)||null}H1t(){this.ppt=!1}g_(){if(!this.ppt){const t=this.tf,s=t.$pt(),i=s?performance.now():0,e=(this.ppt=!0,this.JF()),h=e.d1t();for(const n of this.upt)n.g_(h),e.cdt(n.C8()),e.Edt(),t.Ok();h.e0(null),s&&(this.Spt.bpt+=performance.now()-i)}}*X1t(){if(!this.ppt){this.ppt=!0;const t=this.tf,s=this.JF(),i=s.d1t();for(const e of this.upt)yield*e.X1t(i),s.cdt(e.C8()),s.Edt(),t.Ok();i.e0(null)}}Y1t(e,h,n){if(!h)return this.Xpt(e,h,null,null);{let t=h.SN(),s=!1,i=this.Xpt(e,h,t,n);s=s||i;for(const r of t.P1t())i=this.Xpt(e,h,r,n),s=s||i}}Xpt(t,s,i,e){const h=this.cpt.get(i);if(!h)return!1;const n=e?h.Wpt.get(e):h.Bpt;if(!n)return!1;const r=n.get(t);if(!r)return!1;let o=!1;for(const[a,l]of r){const u=this.Ypt(s,a,l);o=o||u}return o}*Q1t(e,h,n){if(!h)return yield*this.Zpt(e,h,null,null);{let t=h.SN(),s=!1,i=yield*this.Zpt(e,h,t,n);s=s||i;for(const r of t.P1t())i=yield*this.Zpt(e,h,r,n),s=s||i}}*Zpt(t,s,i,e){const h=this.cpt.get(i);if(!h)return!1;const n=e?h.Wpt.get(e):h.Bpt;if(!n)return!1;const r=n.get(t);if(!r)return!1;let o=!1;for(const[a,l]of r){let t;t=a.Kpt()?this.Ypt(s,a,l):yield*this.Qpt(s,a,l),o=o||t}return o}hdt(t,s,i){const e=s.SN(),h=this.fpt.get(e);if(!h)return!1;const n=h.get(t);if(!n)return!1;const r=n.get(i);if(!r)return!1;let o=!1;for(let t=0,s=r.length;t<s;++t){const a=r[t],l=this.Ypt(null,a[0],a[1]);o=o||l}return o}*ndt(t,s,i){const e=s.SN(),h=this.fpt.get(e);if(!h)return!1;const n=h.get(t);if(!n)return!1;const r=n.get(i);if(!r)return!1;let o=!1;for(let h=0,t=r.length;h<t;++h){let t=r[h],s=t[0],i=t[1],e;e=s.Kpt()?this.Ypt(null,s,i):yield*this.Qpt(null,s,i),o=o||e}return o}Ypt(t,s,i){let e=this.tf,h=this.Tft,n=h.KF(),r=h.nD(),o=h.rdt(),a=!1;n&&h.ddt(n.ZF()),h.ddt(s.ZF());const l=1<o,u=(l&&h.w1t().P8(),r.P8(s));if(t){const f=s.Cpt()[i].SN(),d=f.Tk();d.gft(t),t.RN()&&t.tmt()}let c=!0;if(s.dB()){const p=s.smt();for(let t=0,s=p.length;t<s;++t)if(!p[t].imt(u)){c=!1;break}}return c&&(s.xft()?s.emt(u,i):s.g_(u),a=u.Xft()),r.H8(),l&&h.w1t().H8(),h.N8(s.ZF()),n&&h.N8(n.ZF()),n||1!==o||(h.Edt(),h.IN())||e.Ok(),a}*Qpt(t,s,i){let e=this.tf,h=this.Tft,n=h.KF(),r=h.nD(),o=h.rdt(),a=!1;n&&h.ddt(n.ZF()),h.ddt(s.ZF());const l=1<o,u=(l&&h.w1t().P8(),r.P8(s));if(t){const f=s.Cpt()[i].SN(),d=f.Tk();d.gft(t),t.RN()&&t.tmt()}let c=!0;if(s.dB()){const p=s.smt();for(let t=0,s=p.length;t<s;++t)if(!(yield*p[t].hmt(u))){c=!1;break}}return c&&(s.xft()?yield*s.nmt(u,i):yield*s.X1t(u),a=u.Xft()),r.H8(),l&&h.w1t().H8(),h.N8(s.ZF()),n&&h.N8(n.ZF()),n||1!==o||(h.Edt(),h.IN())||e.Ok(),a}rpt(){return this.Spt}}}{let u=function(t,s){return!0};u;const uo=self.Ds,co=[];function*B(t,s){return!0}uo.Ipt=class extends uo.tn{constructor(t,s,i){super(),this.xq=t,this.tf=t.FO(),this.rmt=s,this.omt=null,this.ift=this.tf.JF().nD(),this.amt=[],this.lmt=[],this.umt=!1,this.cmt=!1,this.fmt=!1,this.dmt=!1,this.pmt=!!i[2],this.mmt=!1,this.gmt=null,this.ymt=[],this.Cht=[],this.wmt=[],this.Smt=u,this.bmt=B,this.vmt=!1,this.Mmt=!1,this.xmt="",this.Gmt=!1,this.Tmt=null,this.Spt=null,this.cU=i[4],this._mt=i[5],this.xq.Jpt(this,this._mt),this.Imt=this.tf.g4()?{Cmt:i[3][0],Emt:i[3][1],Pmt:!1,Rmt:!1,Amt:!1,Fmt:!1}:null,this.JF().e1t(this),3===i[0]&&this.Dmt(i[1]);let e=0;for(const h of i[6]){const n=uo.Omt.VM(this,h,e++);this.ymt.push(n),this.Lmt(n.SN())}e=0;for(const r of i[7]){const o=uo.kmt.VM(this,r,e++);this.Cht.push(o)}if(9===i.length){const a=i[8];for(const l of a)this.xq.wpt(l,this,this.wmt)}this.ymt.length&&(this.mmt=null===this.ymt[0].SN()&&this.ymt[0].Lpt()===uo.Q$.K$.Z$.Nmt),0===this.ymt.length&&(this.ymt=co),0===this.Cht.length&&(this.Cht=co),0===this.wmt.length&&(this.wmt=co)}static VM(t,s,i){return uo.hn(uo.Ipt,t,s,i)}Dmt(t){this.vmt=!0,this.Mmt=!!t[0],this.Gmt=this.Mmt,this.xmt=t[1].toLowerCase(),this.Tmt=[],this.JF().s1t(this),this.tf.g4()&&(this.Spt={type:"group",name:t[1],bpt:0,children:[]})}Bmt(t){this.Tmt.push(t)}Wmt(t,s){for(const i of t.y$().iX())s.includes(i)||s.push(i)}jmt(t,s){if(t)if(s.includes(t)||s.push(t),t.Lz())for(const i of t.Hmt())i.RN()&&this.Wmt(i,s);else t.RN()&&this.Wmt(t,s)}Lmt(t){this.jmt(t,this.amt)}Vmt(t){this.jmt(t,this.lmt)}Umt(){this.amt=this.tf.Oz()}Q0t(t){this.dmt=!!t,this.zmt(),this.Jmt();for(const s of this.ymt)s.Q0t();if(0<this.Cht.length){let t=!1;for(const e of this.Cht)e.Q0t(),e.qmt()&&(t=!0);t?(this.Smt=this.$mt,this.bmt=this.Xmt):(this.Smt=this.Ymt,this.bmt=this.Zmt)}const i=this.wmt;for(let t=0,s=i.length;t<s;++t){const h=t<s-1&&i[t+1]instanceof uo.Ipt&&i[t+1].jpt();i[t].Q0t(h)}this.Imt&&this.Kmt(),this.Spt&&this.Qmt().rpt().children.push(this.Spt)}rpt(){return this.Spt}Qmt(){let t=this.dB();for(;t;){if(t.k1t())return t;t=t.dB()}return this.xq}Kmt(){const t=this.Imt;t.Pmt=this.ymt.every(t=>t.Kpt()),t.Rmt=this.Cht.every(t=>t.Kpt()),t.Amt=this.wmt.every(t=>t.Kpt()),t.Fmt=t.Pmt&&t.Rmt&&t.Amt}tgt(){let t=this;for(;t.Kmt(),t=t.dB(););}zmt(){if(this.k1t()){let t=this.dB();for(this.fmt=!0;t;){if(!t.k1t()){this.fmt=!1;break}t=t.dB()}}}sgt(){const t=this.tf.Oz();if(this.amt===t)this.lmt=t;else{this.lmt=uo.$r(this.amt);let t=this.dB();for(;t;){for(const i of t.amt)this.Vmt(i);t=t.dB()}const s=this.JF();this.amt=s.u1t(this.amt),this.lmt=s.u1t(this.lmt)}}Jmt(){if(this.igt()){this.gmt=[];let t=this.dB();for(;t;)this.gmt.push(t),t=t.dB();this.gmt.reverse()}}egt(){this.cmt=!0,this.rmt&&this.rmt.egt()}e0t(){return this.cmt}C8(){return this.amt}ZF(){return this.umt||(this.umt=!0,this.sgt()),this.lmt}hgt(t){return this.amt.includes(t)}smt(){return this.gmt}h$(){return this.xq}JF(){return this.xq.JF()}FO(){return this.tf}dB(){return this.rmt}ngt(t){this.omt=t}b1t(){return this.omt||this.rmt}rgt(){return this._mt}ogt(){return this.Imt&&this.Imt.Emt}agt(){return this.ogt()&&this.Imt.Cmt}lgt(t){this.Imt.Cmt=!!t,this.tgt()}k1t(){return this.vmt}ugt(){return this.fmt}jpt(){return this.mmt}cgt(){return this.dmt}i1t(){return this.xmt}tpt(){return this.Gmt}W1t(){this.spt(this.Mmt)}spt(t){if(t=!!t,!this.vmt)throw new Error("not a group");if(this.Gmt!==t){this.Gmt=t;for(const s of this.Tmt)s.fgt();if(this.Tmt.length){const i=this.tf.cO(),e=i.h$();e&&e.R$()}}}zz(){return this.cU}xft(){return this.pmt}Ept(){return this.ymt.length&&this.ymt[0].Ept()}dgt(){return this.omt&&this.omt instanceof uo.apt}igt(){return this.dgt()||this.ymt.some(t=>t.Ept())}Cpt(){return this.ymt}h0t(){return this.ymt.length}m1t(t){if((t=Math.floor(t))<0||t>=this.ymt.length)throw new RangeError("invalid condition index");return this.ymt[t]}pgt(t){return this.m1t(t)}mgt(t){let s=t.dF();if(0!==s){--s;const i=t.ggt()?t.ygt():t.SN();for(;0<=s;--s){const e=this.ymt[s];if(i===e.SN()||e.ggt()&&e.ygt()===i)return!1}}return!0}wgt(){return this.Cht}Sgt(){return this.Cht.length}y1t(t){if((t=Math.floor(t))<0||t>=this.Cht.length)throw new RangeError("invalid action index");return this.Cht[t]}bgt(s){s=Math.floor(s);const t=this.Cht.find(t=>t.vgt()===s);if(t)return t;throw new RangeError("invalid action debug index")}Mgt(t){return 0<=(t=Math.floor(t))&&t<this.Cht.length}xgt(){return this.wmt}v1t(){return this.wmt.filter(t=>t instanceof uo.Fpt)}imt(i){i.Vft(this);let e=this.ymt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const n=e[t];if(i.zft(t),n.A6())throw new Error("trigger cannot be used as sub-event to a loop");if(n.g_())h=!0;else if(!this.pmt)return!1}return!this.pmt||h}emt(t,s){t.Vft(this),t.zft(s),this.ymt[s].g_()&&(this.Smt(t,0)&&this.Ggt(t),t.$ft(!0))}*hmt(i){i.Vft(this);let e=this.ymt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const n=e[t];if(i.zft(t),n.A6())throw new Error("trigger cannot be used as sub-event to a loop");if(n.Kpt()?n.g_():yield*n.X1t())h=!0;else if(!this.pmt)return!1}return!this.pmt||h}*nmt(t,s){t.Vft(this),t.zft(s);let i=this.ymt[s];if(i.Kpt()?i.g_():yield*i.X1t())(this.Tgt()?this.Smt(t,0):yield*this.bmt(t,0))&&(this._gt()?this.Ggt():yield*this.Igt()),t.$ft(!0)}g_(t){t.Vft(this),this.mmt||t.Yft(!1),this.pmt?this.Cgt(t):this.Egt(t)}*X1t(t){(this.agt()||this.tf.Pgt())&&(yield this),t.Vft(this),this.mmt||t.Yft(!1),this.pmt?yield*this.Rgt(t):yield*this.Agt(t)}Cgt(i){let e=this.ymt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const n=e[t];if(!n.Ept()){i.zft(t);const r=n.g_();h=h||r}}i.$ft(h),h&&(this.Smt(i,0)&&this.Ggt(i),this.dmt)&&i.Yft(!0)}*Rgt(i){let e=this.ymt,h=0===e.length;for(let s=0,t=e.length;s<t;++s){const n=e[s];if(!n.Ept()){i.zft(s);let t;t=n.Kpt()?n.g_():yield*n.X1t(),h=h||t}}if(i.$ft(h),h)(this.Tgt()?this.Smt(i,0):yield*this.bmt(i,0))&&(this._gt()?this.Ggt():yield*this.Igt()),this.dmt&&i.Yft(!0)}Egt(i){const e=this.ymt;for(let t=0,s=e.length;t<s;++t){const h=e[t],n=(i.zft(t),h.g_());if(!n)return void i.$ft(!1)}i.$ft(!0),this.Smt(i,0)&&this.Ggt(i),i.Xft()&&this.dmt&&i.Yft(!0)}*Agt(i){const e=this.ymt;for(let t=0,s=e.length;t<s;++t){const h=e[t];i.zft(t);if(!(h.Kpt()?h.g_():yield*h.X1t()))return void i.$ft(!1)}i.$ft(!0);(this.Tgt()?this.Smt(i,0):yield*this.bmt(i,0))&&(this._gt()?this.Ggt():yield*this.Igt()),i.Xft()&&this.dmt&&i.Yft(!0)}Ymt(i,e){const h=this.Cht;for(let t=e,s=h.length;t<s;++t){const n=h[t];i.qft(t),n.g_()}return!0}*Zmt(i,e){const h=this.Cht;for(let t=e,s=h.length;t<s;++t){const n=h[t];i.qft(t),n.Kpt()?n.g_():yield*n.X1t()}return!0}$mt(i,e){const h=this.JF(),n=this.Cht;for(let t=e,s=n.length;t<s;++t){const r=n[t],o=(i.qft(t),r.g_());if(r.Fgt()&&!0===o)return!1;r.Dgt()&&o instanceof Promise&&h.Idt(o)}return!0}*Xmt(i,e){const h=this.JF(),n=this.Cht;for(let s=e,t=n.length;s<t;++s){const r=n[s];i.qft(s);let t;if(t=r.Kpt()?r.g_():yield*r.X1t(),r.Fgt()&&!0===t)return!1;r.Dgt()&&t instanceof Promise&&h.Idt(t)}return!0}Ogt(t){this.Smt(t,t.Jft())&&this.Ggt()}*Lgt(t){(yield*this.bmt(t,t.Jft()))&&(yield*this.Igt())}Ggt(){if(this.wmt.length){const t=this.k1t()&&this.tf.$pt(),s=t?performance.now():0,i=this.ift,e=i.P8(this);this.cmt?this.kgt(e):this.Ngt(e),i.H8(),t&&(this.Spt.bpt+=performance.now()-s)}}kgt(e){const h=this.vmt,n=this.fmt,r=this.JF(),o=this.wmt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.C8(),u=!n||!h&&t<i;u&&r.L8(l),a.g_(e),u?r.N8(l):r.cdt(l)}}Ngt(i){const e=this.wmt;for(let t=0,s=e.length;t<s;++t)e[t].g_(i)}*Igt(){if(this.wmt.length){const t=this.ift,s=t.P8(this);this.cmt?yield*this.Bgt(s):yield*this.Wgt(s),t.H8()}}*Bgt(e){const h=this.vmt,n=this.fmt,r=this.JF(),o=this.wmt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.C8(),u=!n||!h&&t<i;u&&r.L8(l),yield*a.X1t(e),u?r.N8(l):r.cdt(l)}}*Wgt(i){const e=this.wmt;for(let t=0,s=e.length;t<s;++t)yield*e[t].X1t(i)}k8(i,e){e.Hft();const h=this.ymt;if(!this.xft())for(let t=i.Uft()+1,s=h.length;t<s;++t){const n=h[t],r=(e.zft(t),n.g_());if(!r)return!1}return this.Smt(e,0)&&this.Ggt(e),!0}*jgt(i,e){e.Hft();const h=this.ymt;if(!this.xft())for(let t=i.Uft()+1,s=h.length;t<s;++t){const n=h[t];e.zft(t);if(!(n.Kpt()?n.g_():yield*n.X1t()))return!1}return(this.Tgt()?this.Smt(e,0):yield*this.bmt(e,0))&&(this._gt()?this.Ggt():yield*this.Igt()),!0}Kpt(){return!this.agt()&&!this.tf.Pgt()&&this.Imt.Fmt}Tgt(){return!this.tf.Pgt()&&this.Imt.Rmt}_gt(){return!this.tf.Pgt()&&this.Imt.Amt}Hgt(i){if(this.dB()){const e=this.smt();for(let t=0,s=e.length;t<s;++t)if(!e[t].imt(i))return!1}return!0}*Vgt(i){if(this.dB()){const e=this.smt();for(let t=0,s=e.length;t<s;++t)if(!(yield*e[t].hmt(i)))return!1}return!0}Ugt(t,s,i){if(0<s.length)if(i){const e=s.map(t=>t.Ks(0));t.w1t().P8(),this.omt.zgt(e)}else this.omt.Jgt(s);else i&&t.w1t().P8()}qgt(t,s,i,e){let h,n,r=0<t.length,o=null,a=this.tf,l=this.ift,u=a.JF(),c=this.omt,f=c.Dgt(),d=u.adt(),p=1<d;if(this.Ugt(u,s,p),r&&(i?u.L8(t):u.ddt(t)),null!==e){if(e.$gt){const g=i?e.$gt.Tk():e.$gt.fdt().Zct(),y=e.Xgt.Tk();y.yft(g.Gk()),y.vft(),i||e.Xgt.Ygt()}else if(e.Zgt){const w=e.Zgt.Tk();w.yft(e.Kgt),w.vft()}e.Qgt&&(o=u.pdt(t))}const m=l.P8(this);return i&&m.n0t(t),this.Hgt(m)&&(m.Vft(this),f&&([n,h]=c.tyt()),this.Egt(m),f)&&c.syt(n),l.H8(),p&&u.w1t().H8(),null!==o&&u.N8(o),r&&u.N8(t),u.ldt(),f||u.Pdt(),h}*iyt(t,s,i,e){let h,n,r=((this.agt()||this.tf.Pgt())&&(yield this),0<t.length),o=null,a=this.tf,l=this.ift,u=a.JF(),c=this.omt,f=c.Dgt(),d=u.adt(),p=1<d;if(this.Ugt(u,s,p),r&&(i?u.L8(t):u.ddt(t)),null!==e){if(e.$gt){const g=i?e.$gt.Tk():e.$gt.fdt().Zct(),y=e.Xgt.Tk();y.yft(g.Gk()),y.vft(),i||e.Xgt.Ygt()}else if(e.Zgt){const w=e.Zgt.Tk();w.yft(e.Kgt),w.vft()}e.Qgt&&(o=u.pdt(t))}const m=l.P8(this);return i&&m.n0t(t),(yield*this.Vgt(m))&&(m.Vft(this),f&&([n,h]=c.tyt()),yield*this.Agt(m),f)&&c.syt(n),l.H8(),p&&u.w1t().H8(),null!==o&&u.N8(o),r&&u.N8(t),u.ldt(),f||u.Pdt(),h}eyt(t,s){const i=this.ZF(),e=0<i.length,h=this.tf,n=this.ift,r=h.JF(),o=r.adt(),a=1<o,l=(a&&r.w1t().P8(),this.omt.zgt(t),e&&(s?r.L8(i):r.ddt(i)),n.P8(this));this.Hgt(l)&&(l.Vft(this),this.Egt(l)),n.H8(),a&&r.w1t().H8(),e&&r.N8(i),r.ldt(),r.Pdt()}*hyt(t,s){(this.agt()||this.tf.Pgt())&&(yield this);const i=this.ZF(),e=0<i.length,h=this.tf,n=this.ift,r=h.JF(),o=r.adt(),a=1<o,l=(a&&r.w1t().P8(),this.omt.zgt(t),e&&(s?r.L8(i):r.ddt(i)),n.P8(this));(yield*this.Vgt(l))&&(l.Vft(this),yield*this.Agt(l)),n.H8(),a&&r.w1t().H8(),e&&r.N8(i),r.ldt(),r.Pdt()}tD(t,s,i,e,...h){let n,r,o=0<t.length,a=this.tf,l=this.ift,u=a.JF(),c=this.omt,f=c.Dgt(),d=u.adt(),p=1<d,m=(p&&u.w1t().P8(),0<h.length&&this.omt.zgt(h),o&&(s?u.L8(t):u.ddt(t)),l.P8(this));return m.t0t(i,e),l.Pft(m),a.D8(!1),this.Hgt(m)&&(m.Vft(this),f&&([r,n]=c.tyt()),this.Egt(m),f)&&c.syt(r),a.D8(!0),l.H8(),l.Rft(),p&&u.w1t().H8(),o&&u.N8(t),u.ldt(),f||u.Pdt(),n||m.s0t()}}}{let e=self.Ds,t=[],s=!1;e.Opt=class extends e.tn{constructor(t,s,i){super();const e=t.FO(),h=t.JF(),n=(this.xq=t,this.Tft=h,this.tf=t.FO(),this.rmt=s,e.nyt(i[1]));this.ryt=n,this._mt=i[2],this.xq.Jpt(this,this._mt),this.Imt=e.g4()?{Cmt:i[3][0],Emt:i[3][1]}:null}static VM(t,s,i){return e.hn(e.Opt,t,s,i)}Q0t(){const t=this.ryt,s=this.tf.JF().M1t(this);this.ryt=t.bind(null,this.tf.BL(),s)}dB(){return this.rmt}b1t(){return this.rmt}h$(){return this.xq}rgt(){return this._mt}ogt(){return this.Imt&&this.Imt.Emt}agt(){return this.ogt()&&this.Imt.Cmt}lgt(t){this.Imt.Cmt=!!t}jpt(){return!1}C8(){return t}ZF(){return this.rmt?this.rmt.ZF():t}g_(t){t.Vft(this),this.Tft.Idt(this.oyt())}async oyt(){try{await this.ryt()}catch(t){console.error(`Unhandled exception running script %c${this.h$().Jc()}, event ${this.rgt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),s||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),s=!0)}}*X1t(t){t.Vft(this),(this.agt()||this.tf.Pgt())&&(yield this),this.g_(t)}Kpt(){return!this.agt()&&!this.tf.Pgt()}static ayt(){return s}static lyt(){s=!0}}}{const fo=self.Ds;fo.apt=class extends fo.tn{constructor(t,s,i){super(),this.xq=t,this.tf=t.FO(),this.rmt=s,this.uyt=0,this.cyt="",this.fyt=0,this.dyt=[],this.pyt=!0,this.myt="",this.qct=null,this.gyt=!1,this.yyt=[],this.wyt=!1,this.Syt=!1,this.byt=0,this.vyt=-1,this.Myt=new Map,this.xyt=fo.Ipt.VM(t,s,i),this.xyt.ngt(this)}Gyt(t){this.uyt=0,this.cyt=t[0],this.fyt=t[1],this.dyt=t[2].map(t=>fo.Fpt.VM(this.xq,this,t)),this.pyt=t[3],this.Syt=t[4],this.wyt=t[5]}Tyt(t){this.uyt=1,this.myt=t[1],this.qct=this.tf.fz(t[2]),this.xyt.Lmt(this.qct),this.cyt=this.qct.Jc()+"."+this.myt,this.fyt=t[3],this.dyt=t[4].map(t=>fo.Fpt.VM(this.xq,this,t)),this.pyt=t[5],this.Syt=t[6],this.wyt=t[7],this.qct._yt(this)}static Rpt(t,s,i){const e=fo.hn(fo.apt,t,s,i),h=i[1];return e.Gyt(h),e}static Apt(t,s,i){const e=fo.hn(fo.apt,t,s,i),h=i[1];return e.Tyt(h),e}t1t(){if(this.qct&&this.qct.Lz())for(const t of this.qct.Hmt())if(t.Iyt(this.myt)){this.gyt=!0;break}}Q0t(){for(const t of this.dyt)t.Q0t();this.xyt.Q0t(!1)}o1t(){return this.uyt}v1t(){return this.dyt}lpt(){return this.dyt}XF(){return this.dyt.length}Cyt(t){this.yyt.push(t)}Eyt(){return this.yyt}Jgt(i){const e=this.dyt;for(let t=0,s=e.length;t<s;++t)e[t].$et(i[t].Ks(0))}zgt(i){const e=this.dyt;for(let t=0,s=e.length;t<s;++t)e[t].$et(i[t])}Pyt(){return this.dyt.map(t=>t.uet())}dB(){return this.rmt}b1t(){return this.rmt}a1t(){return this.cyt}Ryt(){return this.myt}Ayt(){return this.gyt}iD(){return this.fyt}SN(){return this.qct}Ju(){return this.pyt}$F(){switch(this.fyt){case 0:return null;case 2:return"";default:return 0}}YF(){return this.xyt}sD(){return this.wyt}Dgt(){return this.Syt}tyt(){const t=this.byt++;this.vyt=t;let s,i=new Promise(t=>s=t);return this.Myt.set(t,{resolve:s,Fyt:0}),[t,i]}syt(t){const s=this.Myt.get(t);0===s.Fyt&&(s.resolve(),this.Myt.delete(t)),this.vyt=-1}Dyt(){const t=this.Myt.get(this.vyt);return t.Fyt++,this.vyt}Oyt(t){this.vyt=t;const s=this.Myt.get(t);s.Fyt--}Lyt(t,s){const i=new Map,e=[];for(const h of this.qct.Tk().Gk()){const n=h.SN();if(n.Iyt(this.myt)){const r=i.get(n);Array.isArray(r)?r.push(h):i.set(n,[h])}else e.push(h)}if(0<e.length&&this.xyt.qgt(t,s,this.wyt,{Zgt:this.qct,Kgt:e}),0<i.size)for(const[o,a]of i){const l=o.kyt(this.myt).YF(),u=[...new Set([...t,...l.C8()])];l.qgt(u,s,this.wyt,{Zgt:o,Kgt:a})}}*Nyt(t,s){const i=new Map,e=[];for(const h of this.qct.Tk().Gk()){const n=h.SN();if(n.Iyt(this.myt)){const r=i.get(n);Array.isArray(r)?r.push(h):i.set(n,[h])}else e.push(h)}if(0<e.length&&(yield*this.xyt.iyt(t,s,this.wyt,{Zgt:this.qct,Kgt:e})),0<i.size)for(const[o,a]of i){const l=o.kyt(this.myt).YF(),u=[...new Set([...t,...l.C8()])];yield*l.iyt(u,s,this.wyt,{Zgt:o,Kgt:a})}}}}{const po=self.Ds,mo=[];po.Fpt=class extends po.tn{constructor(t,s,i){super();const e=t.JF();this.xq=t,this.Tft=e,this.tf=t.FO(),this.rmt=s,this.N0t=e.w1t(),this.ln=i[1],this.cf=i[2],this.Byt=i[3],this.d2=!!i[4],this.Wyt=!!i[5],this.jyt=s instanceof po.apt,this.cU=i[6],this.Hyt=this.tf.x1t(i[8]),this.Vyt=t=>this.$et(t),this.Uyt=()=>this.uet(),this.zyt=!this.rmt||this.d2||this.Wyt,this.Ght=this.Byt,this.Jyt=-1,this.qyt()&&(this.Ght=this.Ght?1:0),!this.$yt()||this.z2()||this.ipt()||(this.Jyt=e.c1t(this)),e.l1t(this)}static VM(t,s,i){return po.hn(po.Fpt,t,s,i)}Q0t(){if(this.$yt()&&!this.z2()&&!this.ipt()&&!this.Xyt()){const t=this.Tft.opt(this);t&&t.Cyt(this)}}Jc(){return this.ln}x1t(){return this.Hyt}dB(){return this.rmt}b1t(){return this.dB()}Mz(){return!this.dB()}$yt(){return!this.Mz()}Xyt(){return this.jyt}z2(){return this.d2}ipt(){return this.Wyt}oe(){return 0===this.cf}we(){return 1===this.cf}qyt(){return 2===this.cf}jpt(){return!1}zz(){return this.cU}f1t(){return this.Byt}C8(){return mo}g_(t){!this.$yt()||this.z2()||this.ipt()||this.$et(this.f1t())}Kpt(){return!0}*X1t(t){this.g_(t)}$et(t){this.oe()?"number"!=typeof t&&(t=parseFloat(t)):this.we()?"string"!=typeof t&&(t=t.toString()):this.qyt()&&(t=t?1:0),this.zyt?this.Ght=t:this.N0t.u0t()[this.Jyt]=t}uet(){return this.zyt?this.Ght:this.N0t.u0t()[this.Jyt]}Yyt(){let t=this.uet();return this.qyt()?!!t:t}D1t(){this.Ght=this.Byt}G1t(){return{configurable:!1,enumerable:!0,get:this.Uyt,set:this.Vyt}}}}{const go=self.Ds,yo=[];go.Dpt=class extends go.tn{constructor(t,s,i){super();const e=t.JF();this.xq=t,this.Tft=e,this.tf=t.FO(),this.rmt=s,this.Zyt=null,this.Kyt=i[1],this.i0=!0}static VM(t,s,i){return go.hn(go.Dpt,t,s,i)}Q0t(){this.Zyt=this.Tft.P$(this.Kyt),this.xq.Hpt(this);let t=this.dB();for(;t;)t instanceof go.Ipt&&t.k1t()&&t.Bmt(this),t=t.dB();this.fgt(),this.tf.g4()&&this.xq.rpt().children.push(this.Zyt.rpt())}dB(){return this.rmt}C8(){return yo}Upt(){return this.Zyt}g_(t){const s=!!this.dB(),i=this.tf.Oz();s&&this.Tft.ddt(i),this.Zyt.g_(),s&&this.Tft.N8(i)}*X1t(t){const s=!!this.dB(),i=this.tf.Oz();s&&this.Tft.ddt(i),yield*this.Zyt.X1t(),s&&this.Tft.N8(i)}Kpt(){return!1}zpt(){return this.i0}fgt(){let t=this.dB();for(;t;){if(t instanceof go.Ipt&&t.k1t()&&!t.tpt())return void(this.i0=!1);t=t.dB()}this.i0=!0}}}{let a=function(t,s){return s<=t?t%s:(t<0&&(t<=-s&&(t%=s),t<0)&&(t+=s),t)};a;const wo=self.Ds;wo.Qyt=class extends wo.tn{constructor(t){super(),this._v=t,this.tf=t.FO()}Q0t(){}static twt(t,s){const i=s[0],e=[xo,vo,Mo,Go,So,bo];return wo.hn(e[i],t,s)}};class So extends wo.Qyt{constructor(t,s){super(t),this.swt=this.tf.YV(),this.ryt=this.tf.nyt(s[1]),this.ryt!==wo.Q$.K$.jht.random&&this.ryt!==wo.Q$.K$.jht.iwt||this._v.ewt()}hwt(){return this.swt.nwt(this.ryt,this.swt)}}class bo extends wo.Qyt{constructor(t,s){super(t),this.rwt=null,this.cyt=s[1],this._v.ewt()}Q0t(){const t=this.tf.JF(),s=(this.rwt=t.qF(this.cyt),this.cyt=null,this._v.YF()),i=this.rwt.YF();this.owt=[...new Set([...s.ZF(),...i.ZF()])],this.owt=t.u1t(this.owt)}hwt(){const t=this.rwt;if(t.Ju()){const s=t.YF();return wo.Ipt.prototype.tD.bind(s,this.owt,t.sD(),t.iD(),t.$F())}{const i=t.$F();return()=>i}}}class vo extends wo.Qyt{constructor(t,s){super(t),this.qct=this.tf.fz(s[1]),this.ryt=this.tf.nyt(s[2]),this.awt=!!s[3],this.ift=this.tf.JF().nD(),this._v.lwt(this.qct)}hwt(){return this.qct.pk().nwt(this.ryt,this.qct.ck().a6())}uwt(...t){const s=this.qct,i=s.Tk().uft(),e=i.length;if(0===e)return this.awt?"":0;const h=a(this._v.cwt(),e);return this.ift.E8().Kft(s),this.ryt.apply(i[h].a6(),t)}fwt(t,...s){const i=this.qct,e=i.Gk(),h=e.length;if(0===h||"number"!=typeof t)return this.awt?"":0;const n=a(t,h);return this.ift.E8().Kft(i),this.ryt.apply(e[n].a6(),s)}}class Mo extends wo.Qyt{constructor(t,s){super(t),this.qct=this.tf.fz(s[1]),this.dwt=s[3],this.awt=!!s[2],this._v.lwt(this.qct)}pwt(){const t=this.qct.Tk().uft(),s=t.length;if(0===s)return this.awt?"":0;const i=a(this._v.cwt(),s);return t[i].mwt(this.dwt)}gwt(){const t=this.qct,s=t.Tk().uft(),i=s.length;if(0===i)return this.awt?"":0;const e=a(this._v.cwt(),i),h=s[e],n=h.SN().ywt(t.wwt());return h.mwt(this.dwt+n)}Swt(t){const s=this.qct,i=s.Gk(),e=i.length;if(0===e||"number"!=typeof t)return this.awt?"":0;let h=a(t,e),n=i[h],r=0;return s.Lz()&&(r=n.SN().ywt(s.wwt())),n.mwt(this.dwt+r)}}class xo extends wo.Qyt{constructor(t,s){super(t),this.qct=this.tf.fz(s[1]),this.bwt=this.qct.wht(s[2]),this.vwt=this.qct.$st(s[2]),this.ryt=this.tf.nyt(s[3]),this.awt=!!s[4],this.ift=this.tf.JF().nD(),this._v.lwt(this.qct)}Mwt(...t){const s=this.qct,i=s.Tk().uft(),e=i.length;if(0===e)return this.awt?"":0;let h=a(this._v.cwt(),e),n=(this.ift.E8().Kft(s),i[h]),r=0;return s.Lz()&&(r=n.SN().xwt(s.wwt())),this.ryt.apply(n.yht()[this.vwt+r].a6(),t)}Gwt(t,...s){const i=this.qct,e=i.Gk(),h=e.length;if(0===h||"number"!=typeof t)return this.awt?"":0;let n=a(t,h),r=(this.ift.E8().Kft(i),e[n]),o=0;return i.Lz()&&(o=r.SN().xwt(i.wwt())),this.ryt.apply(r.yht()[this.vwt+o].a6(),s)}}class Go extends wo.Qyt{constructor(t,s){super(t),this.Twt=null,this._wt=s[1]}Q0t(){this.Twt=this.tf.JF().T1t(this._wt)}Iwt(){return this.Twt}}}{let n=function(t){const s=self.Cwt[t];if(s)return s;throw new Error("invalid expression number")};n;const To=self.Ds;To.Ewt=class extends To.tn{constructor(t,s,i){super(),this._v=t,this.Wg=i,this.cf=s,this.Ks=null,this.Pwt=!1,this.Wyt=!1}static VM(t,s,i){const e=s[0],h=[_o,Io,Do,Eo,Ro,Co,Ao,_o,Eo,Eo,Oo,Lo,Do,No,Io,Fo,Po,ko,Bo,Wo,jo,Ho];return To.hn(h[e],t,e,i,s)}Q0t(){}ewt(){this.Pwt=!0}lwt(t){this.Pwt||!t||t.pk().jL()||(this.Pwt=!0)}Rwt(){return this.Pwt}dF(){return this.Wg}FO(){return this._v.FO()}YF(){return this._v.YF()}ipt(){return this.Wyt}Awt(){return 4===this.cf}};class _o extends To.Ewt{constructor(t,s,i,e){super(t,s,i),this.Fwt=0;const h=e[1];this.Dwt=h[0],this.Owt=[],this.Lwt=null;for(let t=1,s=h.length;t<s;++t)this.Owt.push(To.Qyt.twt(this,h[t]));this.Owt.length?this.Ks=this.kwt:(this.Ks=n(this.Dwt),this.Wyt=!0)}Nwt(t){if(t<0||t>=this.Owt.length)throw new RangeError("invalid numbered node");return this.Owt[t]}Q0t(){for(const s of this.Owt)s.Q0t();const t=n(this.Dwt);this.Owt.length?this.Lwt=t(this):this.Lwt=t}cwt(){return this.Fwt}kwt(t){return this.Fwt=t,this.Lwt()}}class Io extends _o{constructor(t,s,i,e){super(t,s,i,e),this.Ks=this.Bwt,14===s&&(this.YF().Umt(),this._v instanceof To.kmt)&&this.YF().egt()}Bwt(t){this.Fwt=t;const s=this.Lwt();return"string"==typeof s?s:""}Wwt(){return n(this.Dwt)()}}class Co extends _o{constructor(t,s,i,e){super(t,s,i,e),2<=t.jwt()?this.Ks=this.Kk:this.Ks=this.pO,this.Wyt=!1}pO(t){this.Fwt=t;const s=this.Lwt(),i=this.FO().cO();return i.pO(s)}Kk(t){const s=this.pO(t);return s?s.Kk():null}}class Eo extends To.Ewt{constructor(t,s,i,e){super(t,s,i),this.Hwt=e[1],this.Ks=this.Vwt,this.Wyt=!0}Vwt(){return this.Hwt}}class Po extends To.Ewt{constructor(t,s,i,e){super(t,s,i),this.Uwt=e[1],this.Ks=this.zwt,this.Wyt=!0}zwt(){return this.Uwt}}class Ro extends To.Ewt{constructor(t,s,i,e){super(t,s,i),this.qct=this.FO().fz(e[1]),2<=t.jwt()?this.Ks=this.ak:this.Ks=this.SN;const h=this.YF();h.Lmt(this.qct),this._v instanceof To.kmt?h.egt():h.dB()&&h.dB().egt(),this.Wyt=!0}SN(){return this.qct}ak(){return this.qct?this.qct.ak():null}}class Ao extends To.Ewt{constructor(t,s,i,e){super(t,s,i),this.oU=this.FO().$D().VX(e[1]),2<=t.jwt()?this.Ks=this.JD:this.Ks=this.XD,this.Wyt=!0}XD(){return this.oU}JD(){return this.oU?this.oU.JD():null}}class Fo extends To.Ewt{constructor(t,s,i,e){super(t,s,i),this.JZ=this.FO().XQ().tZ(e[1]),2<=t.jwt()?this.Ks=this.cst:this.Ks=this.Fst,this.Wyt=!0}Fst(){return this.JZ}cst(){return this.JZ?this.JZ.cst():null}}class Do extends To.Ewt{constructor(t,s,i,e){super(t,s,i),this.Jwt=e[1],this.Ks=this.qwt,this.Wyt=!0}qwt(){return this.Jwt}}class Oo extends To.Ewt{constructor(t,s,i,e){super(t,s,i),this.$wt=e[1];const h=this._v.SN();this._v instanceof To.Omt&&this._v.z2()||!h||!h.Lz()?(this.Ks=this.Xwt,this.Wyt=!0):(this.Ks=this.Ywt,this.ewt())}Xwt(){return this.$wt}Ywt(t){t=t||0;let s=this._v.SN(),i=s.Tk(),e=i.Gk(),h=null;if(e.length)h=e[t%e.length].SN();else if(i.aft()){const n=i.lft();h=n[t%n.length].SN()}else{if(!(0<s.Ik()))return 0;{const r=s.Gk();h=r[t%r.length].SN()}}return this.$wt+h.ywt(s.wwt())}}class Lo extends To.Ewt{constructor(t,s,i,e){super(t,s,i),this._wt=e[1],this.Twt=null,2<=t.jwt()?this.Ks=this.Zwt:this.Ks=this.Kwt,this.Wyt=!0}Q0t(){this.Twt=this.FO().JF().T1t(this._wt)}Kwt(){return this.Twt}Zwt(){return null}}class ko extends To.Ewt{constructor(t,s,i,e){super(t,s,i),this.Qwt=e[1],this.rwt=null,2<=t.jwt()?this.Ks=this.tSt:this.Ks=this.sSt,this.Wyt=!0}Q0t(){this.rwt=this.FO().JF().qF(this.Qwt),this.Qwt=null}sSt(){return this.rwt}tSt(){return null}}class No extends To.Ewt{constructor(t,s,i,e){super(t,s,i),this.iSt=[],this.eSt=[],this.Wyt=!0;for(let t=1,s=e.length;t<s;++t){const h=To.Ewt.VM(this._v,e[t],0);this.iSt.push(h),this.eSt.push(0),h.ipt()||(this.Wyt=!1)}this.Ks=this.hSt}Q0t(){for(const t of this.iSt)t.Q0t()}hSt(){const i=this.iSt,e=this.eSt;for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Ks(0);return e}}class Bo extends To.Ewt{constructor(t,s,i,e){super(t,s,i),this.nSt=e[1],this.Ks=this.qet,this.Wyt=!0}qet(){return this.nSt}}class Wo extends To.Ewt{constructor(t,s,i,e){super(t,s,i),this.rSt=e[1],this.Ks=this.oSt,this.Wyt=!0}oSt(){return this.rSt}}class jo extends _o{constructor(t,s,i,e){super(t,s,i,e),this.Ks=this.kN,this.Wyt=!1}kN(){return this.Lwt()}}class Ho extends To.Ewt{constructor(t,s,i,e){super(t,s,i),this.Elt=this.FO().qlt().xlt(e[1]),this.Ks=this.aSt,this.Wyt=!0}aSt(){return this.Elt.Jc()}}}{let e=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Ks(0)};e;const Vo=self.Ds,Uo=[],zo=function(){};Vo.Omt=class extends Vo.tn{constructor(t,i,s){if(super(),this.xyt=t,this.tf=t.FO(),this.Wg=s,this.ryt=this.tf.nyt(i[1]),this.lSt=0<i[3],this.uSt=2===i[3],this.cSt=!!i[4],this.fSt=!!i[5],this.d2=!!i[6],this.cU=i[7],this.dSt=this.xyt.xft(),this.qct=null,this.bwt=null,this.vwt=-1,this.swt=null,this.g_=zo,this.X1t=zo,this.qs=[],this.pSt=[],this.mSt=!1,this.gSt=null,this.ySt=null,this.Imt=this.tf.g4()?{Cmt:i[8][0],wSt:i[8][1]}:null,-1===i[0]?this.swt=this.tf.YV():(this.qct=this.tf.fz(i[0]),i[2]&&(this.bwt=this.qct.wht(i[2]),this.vwt=this.qct.$st(i[2])),this.xyt.dB()&&this.xyt.dB().egt()),10===i.length){let s=i[9];for(let t of s)this.qs.push(Vo.Ewt.VM(this,t,this.qs.length)),this.pSt.push(0)}0===this.qs.length&&(this.qs=Uo,this.pSt=Uo),this.xyt.JF().h1t(this)}static VM(t,s,i){return Vo.hn(Vo.Omt,t,s,i)}Q0t(){for(const t of this.qs)t.Q0t(),t.Rwt()&&(this.mSt=!0);this.uSt?(this.g_=this.SSt,this.X1t=this.bSt):this.swt?(this.vSt(),this.X1t=this.MSt):this.qct.pk().jL()?(this.xSt(),this.X1t=this.GSt):this.d2?(this.g_=this.TSt,this.X1t=this._St):(this.g_=this.ISt,this.X1t=this.CSt)}vSt(){const t=this.swt,s=this.swt;this.ESt(t,s,this.PSt)}xSt(){const t=this.qct.pk(),s=this.qct.ck().a6();this.ESt(t,s,this.RSt)}ESt(t,s,i){const e=this.ryt,h=this.fSt,n=this.qs;if(0===n.length){const r=t.nwt(e,s);h?this.g_=function(){return Vo.xor(r(),h)}:this.g_=r}else if(1===n.length){const o=n[0];if(!h&&o.ipt())this.g_=t.ASt(e,s,o.Ks(0));else{const a=t.nwt(e,s);this.g_=function(){return Vo.xor(a(o.Ks(0)),h)}}}else if(2===n.length){const l=n[0],u=n[1];if(!h&&l.ipt()&&u.ipt())this.g_=t.FSt(e,s,l.Ks(0),u.Ks(0));else{const c=t.nwt(e,s);this.g_=function(){return Vo.xor(c(l.Ks(0),u.Ks(0)),h)}}}else if(3===n.length){const f=n[0],d=n[1],p=n[2];if(!h&&f.ipt()&&d.ipt()&&p.ipt())this.g_=t.DSt(e,s,f.Ks(0),d.Ks(0),p.Ks(0));else{const m=t.nwt(e,s);this.g_=function(){return Vo.xor(m(f.Ks(0),d.Ks(0),p.Ks(0)),h)}}}else this.g_=i}zz(){return this.cU}Lpt(){return this.ryt}SN(){return this.qct}w6(){return this.bwt}OSt(){return this.bwt?this.bwt.m6():this.qct?this.qct.pk():null}jwt(){const t=this.OSt();return t?t.LSt():1}YF(){return this.xyt}FO(){return this.tf}dF(){return this.Wg}vgt(){return this.dF()}Ept(){return this.lSt}kpt(){return this.uSt}kSt(){return this.fSt}A6(){return this.cSt}z2(){return this.d2}NSt(){return this.Imt.Cmt}BSt(){return!!this.swt}ggt(){return this.BSt()||this.qct.pk().jL()}ygt(){for(const t of this.qs)if(t.Awt())return t.SN();return null}WSt(t){this.Imt.Cmt=!!t,this.xyt.tgt()}jSt(){return this.Imt.wSt}Kpt(){return!this.NSt()&&!this.tf.Pgt()&&!this.jSt()}HSt(){return this.gSt||(this.gSt=new Map),this.gSt}VSt(){return this.ySt||(this.ySt=new Map),this.ySt}PSt(){const t=this.pSt;return e(this.qs,t),Vo.xor(this.ryt.apply(this.swt,t),this.fSt)}*MSt(){if((this.NSt()||this.tf.Pgt())&&(yield this),this.jSt()){const s=this.pSt;e(this.qs,s);let t=this.ryt.apply(this.swt,s);return Vo.No(t)&&(t=yield*t),Vo.xor(t,this.fSt)}return this.g_()}RSt(){const t=this.pSt,s=(e(this.qs,t),this.qct.ck().a6());return Vo.xor(this.ryt.apply(s,t),this.fSt)}*GSt(){if((this.NSt()||this.tf.Pgt())&&(yield this),this.jSt()){let t=this.pSt,s=(e(this.qs,t),this.qct.ck().a6()),i=this.ryt.apply(s,t);return Vo.No(i)&&(i=yield*i),Vo.xor(i,this.fSt)}return this.g_()}SSt(){return!0}*bSt(){return(this.NSt()||this.tf.Pgt())&&(yield this),!0}USt(){return this.bwt?2<=this.bwt.m6().LSt()?this.bwt.y6():this.bwt:2<=this.qct.pk().LSt()?this.qct.ak():this.qct}TSt(){const t=this.pSt,s=(e(this.qs,t),this.ryt.apply(this.USt(),t));return this.qct.Ygt(),s}*_St(){if((this.NSt()||this.tf.Pgt())&&(yield this),this.jSt()){const s=this.pSt;e(this.qs,s);let t=this.ryt.apply(this.USt(),s);return Vo.No(t)&&(t=yield*t),this.qct.Ygt(),t}return this.g_()}ISt(){const i=this.qs,e=this.pSt,t=this.qct.Tk();for(let t=0,s=i.length;t<s;++t){const h=i[t];h.Rwt()||(e[t]=h.Ks(0))}return t.rft()?this.zSt(t):this.JSt(t)}*CSt(){return(this.NSt()||this.tf.Pgt())&&(yield this),this.ISt()}qSt(i){const e=this.qs,h=this.pSt;for(let t=0,s=e.length;t<s;++t){const n=e[t];n.Rwt()&&(h[t]=n.Ks(i))}}zSt(i){const t=this.qct,e=t.Lz(),h=t.wwt(),n=this.vwt,r=0<=n,o=t.Gk(),a=this.mSt,l=this.pSt,u=this.ryt,c=this.fSt,f=this.dSt&&!this.lSt;i.nft();for(let s=0,t=o.length;s<t;++s){const d=o[s];a&&this.qSt(s);let t;if(r){const p=e?d.SN().xwt(h):0;t=u.apply(d.yht()[n+p].a6(),l)}else t=u.apply(d.a6(),l);Vo.xor(t,c)?i.cft(d):f&&i.fft(d)}return t.$St(!0),i.dft(!1),t.Ygt(),i.oft()}JSt(t){let s=this.qct,i=s.Lz(),e=s.wwt(),h=s.RN(),n=this.vwt,r=0<=n,o=this.mSt,a=this.pSt,l=this.ryt,u=this.fSt,c=this.dSt&&!this.lSt,f=t.pft(),d=t.mft(),p=c&&!this.xyt.mgt(this),m=p?d:f,g=0,y=!1;for(let s=0,t=m.length;s<t;++s){const S=m[s];o&&this.qSt(s);let t;if(r){const b=i?S.SN().xwt(e):0;t=l.apply(S.yht()[n+b].a6(),a)}else t=l.apply(S.a6(),a);Vo.xor(t,u)?(y=!0,p?(f.push(S),h&&S.XSt()):(m[g]=S,h&&S.YSt(g),++g)):p?(m[g]=S,h&&S.ZSt(g),++g):c&&(d.push(S),h)&&S.KSt()}Vo.Or(m,g),h&&s.QSt(p,g);const w=y;return p&&!y&&(y=this.tbt(f)),s.$St(w||c),c?y:t.oft()}tbt(i){const t=this.qct,e=t.Lz(),h=t.wwt(),n=this.mSt,r=this.vwt,o=0<=r,a=this.pSt,l=this.ryt,u=this.fSt;for(let s=0,t=i.length;s<t;++s){const c=i[s];n&&this.qSt(s);let t;if(o){const f=e?c.SN().xwt(h):0;t=l.apply(c.yht()[r+f].a6(),a)}else t=l.apply(c.a6(),a);if(Vo.xor(t,u))return!0}return!1}sbt(t,s){return this.qs[t].Ks(s)}Npt(){const t=this.qs;if(t.length)return t[0].Wwt();throw new Error("no parameters")}aq(){if(!this.gSt||!this.gSt.size)return null;const s={};for(const[i,e]of this.gSt.entries()){let t=e;"collmemory"===i&&(t=[...e.entries()].map(t=>[t[0].FN(),t[1].FN(),t[2]])),s[i]=t}return{ex:s}}lq(t){if(this.gSt&&(this.gSt.clear(),this.gSt=null),t){const s=this.tf,i=t.ex;if(i){const e=this.HSt();e.clear();for(const[h,n]of Object.entries(i)){let t=n;"collmemory"===h&&(t=Vo.hn(Vo.qu,n.map(t=>[s.aO(t[0]),s.aO(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),e.set(h,t)}}}}}}{let h=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Ks(0)};h;const Jo=self.Ds,qo=[],$o=function(){},Xo=function*(){};Jo.kmt=class extends Jo.tn{constructor(t,s,i){super();const e=(this.xyt=t).FO(),h=(this.tf=e,this.Wg=i,this.cU=4<=s.length?s[3]:-1,this.ibt=5<=s.length?255&s[4]:0,this.ebt=5<=s.length?s[4]>>8:0,this.ryt=null,this.qct=null,this.bwt=null,this.vwt=-1,this.swt=null,this.hbt="",this.nbt=null,this.rbt=null,this.g_=$o,this.X1t=$o,this.qs=[],this.pSt=[],this.mSt=!1,this.gSt=null,this.ySt=null,-3===s[0]),n=h?s[2]:s[5];if(this.Imt=e.g4()||h?{Cmt:n[0],wSt:n[1],index:n[2]}:null,-1===s[0])this.swt=e.YV(),this.ryt=e.nyt(s[1]);else if(-2===s[0])this.hbt=s[1];else if(h){const r=e.nyt(s[1]);this.ryt=r,this.g_=this.obt,this.X1t=this.abt,this.ebt|=8}else this.qct=e.fz(s[0]),4&this.ebt?(this.hbt=s[1],this.nbt=e.fz(s[2])):(s[2]&&(this.bwt=this.qct.wht(s[2]),this.vwt=this.qct.$st(s[2])),this.ryt=e.nyt(s[1]));if(7===s.length){const o=s[6];for(const a of o)this.qs.push(Jo.Ewt.VM(this,a,this.qs.length)),this.pSt.push(0)}0===this.qs.length&&(this.qs=qo,this.pSt=qo),this.lbt()&&(this.xyt.Umt(),this.xyt.egt()),this.xyt.JF().n1t(this)}static VM(t,s,i){return Jo.hn(Jo.kmt,t,s,i)}Q0t(){for(const t of this.qs)t.Q0t(),t.Rwt()&&(this.mSt=!0);if(this.swt)this.vSt(),this.X1t=this.MSt;else if(this.hbt)4&this.ebt?this.ubt():this.cbt(),this.hbt="",this.nbt=null;else if(this.g_===this.obt){const s=this.ryt,i=this.tf.JF().M1t(this.xyt);this.ryt=s.bind(null,this.tf.BL(),i)}else this.bwt?this.Dgt()?(this.g_=this.fbt,this.X1t=this.dbt):(this.g_=this.pbt,this.X1t=this.mbt):this.qct.pk().jL()?(this.xSt(),this.X1t=this.GSt):this.z2()?(this.g_=this.gbt,this.X1t=this.ybt):this.Dgt()?(this.g_=this.wbt,this.X1t=this.Sbt):this.bbt()?(this.g_=this.vbt,this.X1t=this.Mbt):this.qs.length?this.qs.every(t=>t.Rwt())?(this.g_=this.xbt,this.X1t=this.Gbt):this.mSt?(this.g_=this.Tbt,this.X1t=this._bt):this.qs.every(t=>t.ipt())?(h(this.qs,this.pSt),this.g_=this.Ibt,this.X1t=this.Cbt):(this.g_=this.Ebt,this.X1t=this.Pbt):(this.g_=this.Ibt,this.X1t=this.Cbt)}vSt(){const t=this.swt,s=this.swt;this.ESt(t,s,this.PSt)}xSt(){const t=this.qct.pk(),s=this.qct.ck().a6();this.ESt(t,s,this.RSt)}cbt(){const t=this.xyt.JF(),i=t.qF(this.hbt);if(i.Ju()){const e=0!=(2&this.ebt);this.rbt=i.YF();let s=[...new Set([...this.xyt.ZF(),...this.rbt.ZF()])];s=t.u1t(s);const h=!i.sD()&&this.Rbt()?{Qgt:!0}:null;if(this.g_=Jo.Ipt.prototype.qgt.bind(this.rbt,s,this.qs,e,h),this.tf.g4()){const n=this;this.X1t=function*(){(n.NSt()||n.tf.Pgt())&&(yield n);const t=yield*n.rbt.iyt(s,n.qs,e,h);return t}}else this.X1t=Xo}else this.g_=$o,this.X1t=Xo}ubt(){const n=this.xyt.JF(),r=n.E1t(this.nbt,this.hbt);if(r.Ju()){const o=0!=(2&this.ebt);this.rbt=r.YF();let s=[...new Set([...this.xyt.ZF(),...this.rbt.ZF(),this.qct,r.SN()])],t=(s=n.u1t(s),!this.qct.Lz()&&!r.SN().Lz()),i=!this.qct.Lz()&&r.SN().Lz(),e=this.qct.Lz(),h=null;if(!r.sD()&&this.Rbt()&&((h=h||{}).Qgt=!0),!i&&o||((h=h||{}).$gt=this.qct,h.Xgt=r.SN()),t||i||e&&!r.Ayt()?this.g_=Jo.Ipt.prototype.qgt.bind(this.rbt,s,this.qs,o,h):e&&(this.g_=Jo.apt.prototype.Lyt.bind(r,s,this.qs)),this.tf.g4()){const a=this;t||i||e&&!r.Ayt()?this.X1t=function*(){(a.NSt()||a.tf.Pgt())&&(yield a);const t=yield*a.rbt.iyt(s,a.qs,o,h);return t}:e&&(this.X1t=function*(){(a.NSt()||a.tf.Pgt())&&(yield a);const t=yield*r.Nyt(s,a.qs);return t})}else this.X1t=Xo}else this.g_=$o,this.X1t=Xo}ESt(t,s,i){const e=this.ryt,h=this.qs;if(0===h.length)this.g_=t.nwt(e,s);else if(1===h.length){const n=h[0];if(n.ipt())this.g_=t.ASt(e,s,n.Ks(0));else{const r=t.nwt(e,s);this.g_=function(){return r(n.Ks(0))}}}else if(2===h.length){const o=h[0],a=h[1];if(o.ipt()&&a.ipt())this.g_=t.FSt(e,s,o.Ks(0),a.Ks(0));else{const l=t.nwt(e,s);this.g_=function(){return l(o.Ks(0),a.Ks(0))}}}else if(3===h.length){const u=h[0],c=h[1],f=h[2];if(u.ipt()&&c.ipt()&&f.ipt())this.g_=t.DSt(e,s,u.Ks(0),c.Ks(0),f.Ks(0));else{const d=t.nwt(e,s);this.g_=function(){return d(u.Ks(0),c.Ks(0),f.Ks(0))}}}else this.g_=i}zz(){return this.cU}Dgt(){return 0!=(8&this.ebt)}Fgt(){return 0!=(16&this.ebt)}bbt(){return 1===this.ibt}z2(){return 2===this.ibt}lbt(){return 0!=(1&this.ebt)}qmt(){return this.Dgt()||this.Fgt()}SN(){return this.qct}OSt(){return this.bwt?this.bwt.m6():this.qct?this.qct.pk():null}jwt(){const t=this.OSt();return t?t.LSt():1}YF(){return this.xyt}Rbt(){let t=this.xyt;do{if(t instanceof Jo.apt&&t.sD())return!0}while(t=t.b1t());return!1}FO(){return this.tf}dF(){return this.Wg}vgt(){return this.Imt.index}NSt(){return this.Imt.Cmt}WSt(t){this.Imt.Cmt=!!t,this.xyt.tgt()}jSt(){return this.Imt.wSt}Kpt(){return!this.NSt()&&!this.tf.Pgt()&&!this.jSt()}HSt(){return this.gSt||(this.gSt=new Map),this.gSt}VSt(){return this.ySt||(this.ySt=new Map),this.ySt}PSt(){const t=this.pSt;return h(this.qs,t),this.ryt.apply(this.swt,t)}*MSt(){if((this.NSt()||this.tf.Pgt())&&(yield this),this.jSt()){const t=this.pSt,s=(h(this.qs,t),yield*this.ryt.apply(this.swt,t));return s}return this.g_()}RSt(){const t=this.pSt;return h(this.qs,t),this.ryt.apply(this.qct.ck().a6(),t)}*GSt(){if((this.NSt()||this.tf.Pgt())&&(yield this),this.jSt()){const t=this.pSt,s=(h(this.qs,t),yield*this.ryt.apply(this.qct.ck().a6(),t));return s}return this.g_()}Ibt(){const i=this.pSt,e=this.qct.Tk().Gk();for(let t=0,s=e.length;t<s;++t)this.ryt.apply(e[t].a6(),i)}*Cbt(){if((this.NSt()||this.tf.Pgt())&&(yield this),this.jSt()){const i=this.pSt,e=this.qct.Tk().Gk();for(let t=0,s=e.length;t<s;++t)yield*this.ryt.apply(e[t].a6(),i)}else this.Ibt()}Ebt(){const i=this.pSt,e=(h(this.qs,i),this.qct.Tk().Gk());for(let t=0,s=e.length;t<s;++t)this.ryt.apply(e[t].a6(),i)}*Pbt(){if((this.NSt()||this.tf.Pgt())&&(yield this),this.jSt()){const i=this.pSt,e=(h(this.qs,i),this.qct.Tk().Gk());for(let t=0,s=e.length;t<s;++t)yield*this.ryt.apply(e[t].a6(),i)}else this.Ebt()}xbt(){const e=this.qs,h=this.pSt,s=this.ryt,n=this.qct.Tk().Gk();for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);s.apply(r.a6(),h)}}*Gbt(){if((this.NSt()||this.tf.Pgt())&&(yield this),this.jSt()){const e=this.qs,h=this.pSt,s=this.ryt,n=this.qct.Tk().Gk();for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);yield*s.apply(r.a6(),h)}}else this.xbt()}Tbt(){const e=this.qs,h=this.pSt,s=this.ryt,n=this.qct.Tk().Gk();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.Rwt()||(h[t]=i.Ks(0))}for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.Rwt()&&(h[t]=o.Ks(i))}s.apply(r.a6(),h)}}*_bt(){if((this.NSt()||this.tf.Pgt())&&(yield this),this.jSt()){const e=this.qs,h=this.pSt,s=this.ryt,n=this.qct.Tk().Gk();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.Rwt()||(h[t]=i.Ks(0))}for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.Rwt()&&(h[t]=o.Ks(i))}yield*s.apply(r.a6(),h)}}else this.Tbt()}vbt(){const e=this.qs,h=this.pSt,s=this.ryt,t=this.qct,i=t.Abt(),n=t.Tk().Gk();i.Fbt(s);for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);s.apply(r.a6(),h)}i.Dbt(s)}*Mbt(){if((this.NSt()||this.tf.Pgt())&&(yield this),this.jSt()){const e=this.qs,h=this.pSt,s=this.ryt,t=this.qct,i=t.Abt(),n=t.Tk().Gk();i.Fbt(s);for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);yield*s.apply(r.a6(),h)}i.Dbt(s)}else this.vbt()}Obt(){return this.bwt?2<=this.bwt.m6().LSt()?this.bwt.y6():this.bwt:2<=this.qct.pk().LSt()?this.qct.ak():this.qct}gbt(){const t=this.pSt;return h(this.qs,t),this.ryt.apply(this.Obt(),t)}*ybt(){if((this.NSt()||this.tf.Pgt())&&(yield this),this.jSt()){const s=this.pSt;h(this.qs,s);let t=this.ryt.apply(this.Obt(),s);return Jo.No(t)?yield*t:t}return this.gbt()}pbt(){const t=this.qct,s=t.Lz(),e=t.wwt(),h=this.qs,n=this.mSt,r=this.pSt,o=this.ryt,a=this.vwt,l=t.Tk().Gk();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.Rwt()||(r[t]=i.Ks(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(n)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.Rwt()&&(r[t]=f.Ks(i))}const c=s?u.SN().xwt(e):0;o.apply(u.yht()[a+c].a6(),r)}}*mbt(){if((this.NSt()||this.tf.Pgt())&&(yield this),this.jSt()){const t=this.qct,s=t.Lz(),e=t.wwt(),h=this.qs,n=this.mSt,r=this.pSt,o=this.ryt,a=this.vwt,l=t.Tk().Gk();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.Rwt()||(r[t]=i.Ks(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(n)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.Rwt()&&(r[t]=f.Ks(i))}const c=s?u.SN().xwt(e):0;yield*o.apply(u.yht()[a+c].a6(),r)}}else this.pbt()}wbt(){const e=this.qs,h=this.pSt,s=this.ryt,n=this.qct.Tk().Gk(),r=[];for(let i=0,t=n.length;i<t;++i){const o=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);r.push(s.apply(o.a6(),h))}return Promise.all(r)}*Sbt(){if((this.NSt()||this.tf.Pgt())&&(yield this),this.jSt()){const e=this.qs,h=this.pSt,s=this.ryt,n=this.qct.Tk().Gk(),r=[];for(let i=0,t=n.length;i<t;++i){const o=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);r.push(yield*s.apply(o.a6(),h))}return Promise.all(r)}return this.wbt()}fbt(){const t=this.qct,s=t.Lz(),e=t.wwt(),h=this.qs,n=this.pSt,r=this.ryt,o=this.vwt,a=t.Tk().Gk(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=h.length;t<s;++t)n[t]=h[t].Ks(i);const c=s?u.SN().xwt(e):0;l.push(r.apply(u.yht()[o+c].a6(),n))}return Promise.all(l)}*dbt(){if((this.NSt()||this.tf.Pgt())&&(yield this),this.jSt()){const t=this.qct,s=t.Lz(),e=t.wwt(),h=this.qs,n=this.pSt,r=this.ryt,o=this.vwt,a=t.Tk().Gk(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=h.length;t<s;++t)n[t]=h[t].Ks(i);const c=s?u.SN().xwt(e):0;l.push(yield*r.apply(u.yht()[o+c].a6(),n))}return Promise.all(l)}return this.fbt()}async obt(){try{await this.ryt()}catch(t){console.error(`Unhandled exception running script %c${this.xyt.h$().Jc()}, event ${this.xyt.rgt()}, action ${this.vgt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),Jo.Opt.ayt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Jo.Opt.lyt())}}*abt(){return(this.NSt()||this.tf.Pgt())&&(yield this),this.obt()}aq(){return this.gSt&&this.gSt.size?{ex:Jo.Oo(this.gSt)}:null}lq(t){if(this.gSt&&(this.gSt.clear(),this.gSt=null),t){const s=t.ex;s&&(this.gSt=Jo.Lo(s))}}}}{let d=function(t){return t instanceof o?w.h5(t):t.kW()},u=function(t){return d(t).dO()},h=function(t){return w.h5(t)},m=function(t){return t instanceof a?w.h5(t):t},s=function(t){return t instanceof c?w.h5(t):t},C=function(t,s,i,e){const h=s.FN(),n=i.FN();h<n?t.Set(s,i,e):t.Set(i,s,e)},E=function(t,s,i){const e=s.FN(),h=i.FN();e<h?t.Zu(s,i):t.Zu(i,s)},P=function(t,s){t.Ku(s)},R=function(t,s,i){const e=s.FN(),h=i.FN();return e<h?t.Ks(s,i):t.Ks(i,s)},e=function(t,s,i,e){if(!s)return!1;const h=0!==i||0!==e,n=t.dO(),r=w.bF(),o=w.p1t(),a=o.YF().xft(),l=o.SN(),u=o.kSt(),c=s.Tk(),f=l!==s;_=s,T=f&&!u;let d,p=0,m=0,g=I=!1;c.rft()?(S.T(n.J4()),S.offset(i,e),r.Lbt(n.pO(),s,S,b),d=b):!a||w.kbt()&&!c.mft().length&&c.pft().length?d=c.pft():(d=c.mft(),I=!0),h&&(p=n.hv(),m=n.ov(),n.H4(i,e),n.N4());for(const y of d)if(r.tL(t,y)){if(g=!0,u)break;f&&D.add(y)}return h&&(n.B4(p,m),n.N4()),A.Lr(b),g},i=function(t){const s=w.KF().xft(),i=_.Tk(),e=i.pft(),h=i.mft();i.rft()?(i.wft(D),s&&(A.Lr(h),i.Sft(D,_.Gk()))):s?I?i.bft(D):(i.Sft(D,e),i.wft(D)):i.wft(D),_.Ygt()},v=function(t,s){T&&(s&&i(),D.clear(),_=null,T=!1)},n=function(t,s){const i=w.aO(s);if(i){const e=t.Tk();if(e.rft()||e.pft().includes(i))if(t.Lz()){if(i.SN().Nbt(t))return e.Mft(i),t.Ygt(),!0}else if(i.SN()===t)return e.Mft(i),t.Ygt(),!0}return!1},r=function(t,h){const n=t.Tk();if(n.rft()){n.dft(!1),n.nft();const i=t.Gk();for(let t=0,s=i.length;t<s;++t){const e=i[t];e.FN()===h?n.fft(e):n.cft(e)}return t.Ygt(),!!n.pft().length}{let i=n.pft(),e=0;for(let t=0,s=i.length;t<s;++t){const r=i[t];(i[e]=r).FN()===h?n.fft(r):++e}return A.Or(i,e),t.Ygt(),!!i.length}},A=(d,u,h,m,s,C,E,P,R,e,i,v,n,r,self.Ds),l=new A.Wo,M={},x={},G={},w=null,o=(A.Bbt=function(t){w=t},self.yN),a=self.fk,c=self.e5,S=(x.Wbt=function(t,s){return A.compare(this.dO().hv(),t,s)},G.Wbt=function(t,s){return A.compare(this.x,t,s)},x.jbt=function(t,s){return A.compare(this.dO().ov(),t,s)},G.jbt=function(t,s){return A.compare(this.y,t,s)},x.Hbt=function(){return this.dO().Z4()},G.Hbt=function(){return this.Y4()},M.Vbt=function(){const t=u(this),s=t.XD(),i=t.J4();return i.bl()<0||i.vl()<0||i.wl()>s.Qp()||i.Sl()>s.fm()},M.Ubt=function(i,e,h){const t=m(this),s=t.Tk(),n=s.Gk();if(!n.length)return!1;let r=n[0],o=r.dO(),a=r,l=A.Sn(o.hv(),o.ov(),e,h);for(let t=1,s=n.length;t<s;++t){r=n[t],o=r.dO();const u=A.Sn(o.hv(),o.ov(),e,h);(0===i&&u<l||1===i&&u>l)&&(l=u,a=r)}return s.Mft(a),!0},x.nv=function(t){const s=this.dO();s.hv()!==t&&(s.nv(t),s.N4())},G.nv=function(t){this.x=+t},x.av=function(t){const s=this.dO();s.ov()!==t&&(s.av(t),s.N4())},G.av=function(t){this.y=+t},x.zbt=function(t,s){const i=this.dO();i.Jbt(t,s)||(i.B4(t,s),i.N4())},G.zbt=function(t,s){this.setPosition(t,s)},M.qbt=function(t,s){if(t=m(t)){const i=d(this),e=t.Mk(i);if(e){const[h,n]=e.$bt(s),r=i.dO();r.hv()===h&&r.ov()===n||(r.B4(h,n),r.N4())}}},M.Xbt=function(t){if(0!==t){const s=u(this);s.H4(s.Ybt()*t,s.Zbt()*t),s.N4()}},x.Kbt=function(t,s){if(0!==s){const i=this.dO();t=A.pn(t),i.H4(Math.cos(t)*s,Math.sin(t)*s),i.N4()}},G.Kbt=function(t,s){0!==s&&(t=A.pn(t),this.j4(Math.cos(t)*s,Math.sin(t)*s))},x.hv=function(){return this.dO().hv()},G.hv=function(){return this.x},x.ov=function(){return this.dO().ov()},G.ov=function(){return this.y},M.pD=function(){return w.pD(d(this))},x.Qbt=function(t,s){return A.compare(this.dO().Qp(),t,s)},G.Qbt=function(t,s){return A.compare(this.width,t,s)},x.tvt=function(t,s){return A.compare(this.dO().fm(),t,s)},G.tvt=function(t,s){return A.compare(this.height,t,s)},x.am=function(t){const s=this.dO();s.Qp()!==t&&(s.am(t),s.N4())},G.am=function(t){this.width=t},x.tm=function(t){const s=this.dO();s.fm()!==t&&(s.tm(t),s.N4())},G.tm=function(t){this.height=t},x.jI=function(t,s){const i=u(this);i.Qp()===t&&i.fm()===s||(i.jI(t,s),i.N4())},G.jI=function(t,s){this.jk(t,s)},x.Qp=function(){return this.dO().Qp()},G.Qp=function(){return this.width},x.fm=function(){return this.dO().fm()},G.fm=function(){return this.height},M.svt=function(){return u(this).J4().wl()},M.ivt=function(){return u(this).J4().Sl()},M.evt=function(){return u(this).J4().bl()},M.hvt=function(){return u(this).J4().vl()},M.nvt=function(){const t=u(this).J4();return(t.wl()+t.bl())/2},M.rvt=function(){const t=u(this).J4();return(t.Sl()+t.vl())/2},M.ovt=function(t,s){return A.vn(u(this).zk(),A.pn(s))<=A.pn(t)},M.avt=function(t){return A.xn(u(this).zk(),A.pn(t))},M.lvt=function(t,s){const i=A.pn(t),e=A.pn(s),h=u(this).zk(),n=!A.xn(e,i);return n?!(!A.xn(h,i)&&A.xn(h,e)):A.xn(h,i)&&!A.xn(h,e)},x.Uk=function(t){const s=this.dO(),i=A.dn(A.pn(t));isNaN(i)||s.zk()===i||(s.Uk(i),s.N4())},G.Uk=function(t){this.z4=t},M.uvt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.Uk(s.zk()+A.pn(t)),s.N4()}},M.cvt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.Uk(s.zk()-A.pn(t)),s.N4()}},M.fvt=function(t,s){const i=u(this),e=i.zk(),h=A.Mn(e,A.pn(s),A.pn(t));isNaN(h)||e===h||(i.Uk(h),i.N4())},M.dvt=function(t,s,i){const e=u(this),h=e.zk(),n=s-e.hv(),r=i-e.ov(),o=Math.atan2(r,n),a=A.Mn(h,o,A.pn(t));isNaN(a)||h===a||(e.Uk(a),e.N4())},M.pvt=function(t,s){const i=u(this),e=i.zk(),h=t-i.hv(),n=s-i.ov(),r=Math.atan2(n,h);isNaN(r)||e===r||(i.Uk(r),i.N4())},x.zk=function(){return A.mn(this.dO().zk())},G.zk=function(){return this.z4},M.mvt=function(t,s){return A.compare(A.kn(100*u(this).gP(),6),t,s)},x.E5=function(){return this.dO().E5()},G.E5=function(){return this.isVisible},M.I5=function(t){const s=u(this);t=2===t?!s.E5():0!==t,s.E5()!==t&&(s.I5(t),w.bO())},M.wP=function(t){const s=A.cn(t/100,0,1),i=u(this);if(i.HB()){if(i.Bnt().gvt()===s)return}else if(i.gP()===s)return;i.wP(s),w.bO()},M.yvt=function(t){l.ya(t);const s=u(this);s.Q4().la(l)||(s.tB(l),w.bO())},M.bP=function(){const t=u(this).Q4();return A.Wn(t.ta(),t.ia(),t.ea(),t.na())},M.gP=function(){return A.kn(100*u(this).gP(),6)},M.wvt=function(t){return!!(t=s(t))&&u(this).pO()===t},M.Svt=function(i){const t=m(this),s=t.Tk(),e=s.Gk();if(!e.length)return!1;let h=e[0],n=h;for(let t=1,s=e.length;t<s;++t){const r=e[t],o=r.dO(),a=n.dO(),l=o.pO().dF(),u=a.pO().dF();0===i?(u<l||l===u&&o.mO()>a.mO())&&(n=r):(l<u||l===u&&o.mO()<a.mO())&&(n=r)}return s.Mft(n),!0},x.bvt=function(t,s,i){const e=this.dO(),h=0===t?e.lv():e.U4();return A.compare(h,s,i)},G.bvt=function(t,s,i){const e=0===t?this.J5:this.V4;return A.compare(e,s,i)},x.vvt=function(){this.dO().iB()},G.vvt=function(){this.sB()},x.Mvt=function(){this.dO().hB()},G.Mvt=function(){this.eB()},M.xvt=function(t){(t=s(t))&&u(this).rB(t)},M.Gvt=function(t,s){const i=0===t;if(s=m(s)){const e=d(this),h=s.Tvt(e);h&&e.dO().aB(h,i)}},x.uv=function(t){const s=this.dO();s.lv()!==t&&(s.uv(t),w.bO())},G.uv=function(t){this.J5=t},M._vt=function(){return u(this).pO().dF()},M.Ivt=function(){return u(this).pO().Jc()},x.Cvt=function(){return this.dO().mO()},G.Cvt=function(){return this.zIndex},x.Evt=function(){return this.dO().lv()},G.Evt=function(){return this.J5},x.Pvt=function(){return this.dO().U4()},G.Pvt=function(){return this.V4},M.Rvt=function(t){const s=d(this),i=s.SN().kk().bht(t);if(i){const e=i.dF(),h=s.dO().O4();return h.G6(e)}},M.Avt=function(t,s){const i=d(this),e=i.SN().kk().bht(s);if(e){const h=e.dF(),n=1===t,r=i.dO().O4();r.G6(h)!==n&&(r.T6(h,n),r._6(),w.bO())}},M.Fvt=function(t,s,i){const e=d(this),h=e.SN().kk().bht(t);if(h){s=Math.floor(s);const n=h.Yx().Kx(s);if(n){"color"===n?(l.ya(i),i=l):"percent"===n&&(i/=100);const r=h.dF(),o=e.dO().O4(),a=o.C6(r,s,i);a&&o.G6(r)&&w.bO()}}},A.hn(A.Rect)),F=[],b=[],T=!1,_=null,I=!1,D=new Set;M.Dvt=function(y){const t=m(this),w=(y=m(y),t.FO());if(w.Ovt())return function*(w){if(w){let t=this.FO(),s=t.bF(),e=t.JF(),i=e.nD(),h=e.p1t(),n=h.SN(),r=h.HSt(),o=h.VSt(),a=i.E8(),l=t.wtt(),u=l-1,c=a.KF(),f=i.P8(c),d=r.get("collmemory"),p=(d||(d=A.hn(A.qu),r.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Lf().addEventListener("instancedestroy",t=>P(d,t.S6))),n.Tk()),m=w.Tk(),g=p.Gk(),y=null;for(let t=0;t<g.length;++t){const S=g[t];m.rft()?(s.Lbt(S.dO().pO(),w,S.dO().J4(),F),y=F,s.Lvt(S,w,y)):y=m.Gk();for(let t=0;t<y.length;++t){const b=y[t];if(s.tL(S,b)||s.kvt(S,b)){let t=R(d,S,b),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const v=!s||i<u;if(C(d,S,b,l),v){const M=c.C8(),x=(e.L8(M),n.Tk()),G=w.Tk();if(x.dft(!1),G.dft(!1),n===w){const T=x.pft();A.Lr(T),T.push(S),T.push(b),n.Ygt()}else{const _=x.pft(),I=G.pft();A.Lr(_),A.Lr(I),_.push(S),I.push(b),n.Ygt(),w.Ygt()}yield*c.jgt(a,f),e.N8(M)}}else E(d,S,b)}A.Lr(F)}i.H8()}return!1}.call(t,y);if(y){let s=w.bF(),e=w.JF(),t=e.nD(),i=e.p1t(),h=i.SN(),n=i.HSt(),r=i.VSt(),o=t.E8(),a=w.wtt(),l=a-1,u=o.KF(),c=t.P8(u),f=n.get("collmemory"),d=(f||(f=A.hn(A.qu),n.set("collmemory",f)),r.get("collisionCreatedDestroyCallback")||(r.set("collisionCreatedDestroyCallback",!0),w.Lf().addEventListener("instancedestroy",t=>P(f,t.S6))),h.Tk()),p=y.Tk(),m=d.Gk(),g=null;for(let t=0;t<m.length;++t){const S=m[t];p.rft()?(s.Lbt(S.dO().pO(),y,S.dO().J4(),F),g=F,s.Lvt(S,y,g)):g=p.Gk();for(let t=0;t<g.length;++t){const b=g[t];if(s.tL(S,b)||s.kvt(S,b)){let t=R(f,S,b),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const v=!s||i<l;if(C(f,S,b,a),v){const M=u.C8(),x=(e.L8(M),h.Tk()),G=y.Tk();if(x.dft(!1),G.dft(!1),h===y){const T=x.pft();A.Lr(T),T.push(S),T.push(b),h.Ygt()}else{const _=x.pft(),I=G.pft();A.Lr(_),A.Lr(I),_.push(S),I.push(b),h.Ygt(),y.Ygt()}u.k8(o,c),e.N8(M)}}else E(f,S,b)}A.Lr(F)}t.H8()}return!1},M.Nvt=function(t){return t=m(t),e(d(this),t,0,0)},M.Bvt=function(t,s,i){return t=m(t),e(d(this),t,s,i)},M.Wvt=function(){return!0},M._B=function(){return u(this)._B()},M.fq=function(){return u(this).fq()},M.jvt=function(i,e){const t=m(this),s=(i=m(i),t.FO()),h=this.Tk(),n=h.Gk();if(0===n.length)return!1;let r=i.Tk(),o=r.Gk();if(r.rft()){const u=[...s.Hvt(i)];0<u.length&&(o=o.concat(u))}if(0===o.length)return!1;const a=r.rft()?null:new Set(o),l=new Set;for(let t=0,s=n.length;t<s;++t){const c=n[t];if(1===e)for(const f of c.gB())f.Vvt(i)&&(null===a||a.has(f))&&l.add(f);else{let t;if(0===e){if(null===(t=c.dB()))continue}else t=c.mB();t.Vvt(i)&&(null===a||a.has(t))&&l.add(t)}}return 0!==l.size&&(r.wft(l),i.Ygt(),!0)},M.Uvt=function(i,e){const t=m(this),s=(i=m(i),t.FO()),h=t.Tk(),n=h.Gk();if(0===n.length)return!1;let r=i.Tk(),o=r.Gk();if(r.rft()){const u=[...s.Hvt(i)];0<u.length&&(o=o.concat(u))}if(0===o.length)return!1;const a=r.rft()?null:new Set(o),l=new Set;for(let t=0,s=n.length;t<s;++t){const c=n[t];2!==e||c.fq()||!c.Vvt(i)||null!==a&&!a.has(c)||l.add(c);for(const f of 0===e?c.children():c.vB())2===e&&f.fq()||f.Vvt(i)&&(null===a||a.has(f))&&l.add(f)}return 0!==l.size&&(r.wft(l),i.Ygt(),!0)},M.zvt=function(i,e,h){const t=m(this),s=(i=m(i),t.FO()),n=t.Tk(),r=n.Gk();if(0===r.length)return!1;let o=i.Tk(),a=o.Gk();if(o.rft()){const c=[...s.Hvt(i)];0<c.length&&(a=a.concat(c))}if(0===a.length)return!1;const l=o.rft()?null:new Set(a),u=[];for(let t=0,s=r.length;t<s;++t){const f=r[t];if(0===e){const d=f.bB(h);null!==d&&d.Vvt(i)&&(null===l||l.has(d))&&u.push(d)}else if(1===e)for(const p of f.children())if(p.Vvt(i)){if(0===h){null!==l&&!l.has(p)||u.push(p);break}--h}}return 0!==u.length&&(o.yft(u),i.Ygt(),!0)},M.Jvt=function(t,s,i){const e=d(this);switch(t){case 0:default:return A.compare(e.wB(),s,i);case 1:return A.compare(e.qvt(),s,i)}},M.xB=function(t,s,i,e,h,n,r,o,a,l){t=m(t);const u=d(this),c=w.g1t().SN();for(const f of t.$vt(u,c)){if(!f.pk().QL())return;u.xB(f,{CB:s,PB:i,AB:e,OB:h,kB:n,jB:r,BB:o,VB:a,zB:l})}},M.GB=function(t){t=m(t);const s=d(this),i=w.g1t().SN();for(const e of t.$vt(s,i))s.GB(e)},M.Xvt=function(){const t=d(this);if(t._B()){const s=t.dB();s.GB(t)}},M.Yvt=function(){const t=d(this).dB();return t?t.FN():-1},M.Zvt=function(){return d(this).wB()},M.Kvt=function(){return d(this).qvt()},M.Qvt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=u(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.YB(),i.N4()):i.$B(t,s)},M.KB=function(t,s,i,e,h,n,r,o){const a=u(this),l=a.KB(t,s,{mode:0===i?"absolute":"relative",x:e,y:h,J5:n,u:r,v:o});l&&a.N4()},M.t2t=function(){const t=u(this);return t.t6()?t.s6().Dv():0},M.s2t=function(){const t=u(this);return t.t6()?t.s6().Ov():0},M.i2t=function(t){const s=u(this);t=2===t?!s.E5():0!==t,s.E5()!==t&&s.I5(t)},M.f6=function(t,s){this instanceof self.yN?this.Jj(t,s):this.f6(t,s)},M.e2t=function(t,s){this instanceof self.yN?this.qj(t,""+s):this.e2t(t,""+s)},M.h2t=function(t){this instanceof self.yN?this.$j(t):this.h2t(t)},M.n2t=function(){this instanceof self.yN?this.Vj():this.l6()},M.r2t=function(){this instanceof self.yN?this.Uj():this.u6()},M.o2t=function(){return this instanceof self.yN?this.zj():this.o2t()},M.a2t=function(t){this instanceof self.yN?this._setEnabled(0!==t):this._SetEnabled(0!==t)},M.l2t=function(){return this instanceof self.yN?this.pyt():this._IsEnabled()},x.u2t=function(t,s,i){return A.compare(this.kW().Cnt(t),s,i)},G.u2t=function(t,s,i){return A.compare(h(this).Cnt(t),s,i)},x.c2t=function(t){return!!this.kW().Cnt(t)},G.c2t=function(t){return!!h(this).Cnt(t)},M.f2t=function(i,e){const h=m(this),t=h.Tk(),n=t.Gk();if(!n.length)return!1;let r=h.Lz(),o=null,a=0;for(let t=0,s=n.length;t<s;++t){const l=n[t],u=r?l.SN().ywt(h.wwt()):0,c=l.Cnt(u+e);(null===o||0===i&&c<a||1===i&&c>a)&&(a=c,o=l)}return t.Mft(o),!0},M.d2t=function(t){const s=m(this);return(s.FO().p1t().kSt()?r:n)(s,t)},M.yW=function(t){const s=new Set(A.Zr(t)),i=d(this).HN();return s.isSubsetOf(i)},M.p2t=function(){return d(this).m2t()},M.g2t=function(){return d(this).HN().size},M.y2t=function(t){return d(this).w2t(t)},M.S2t=function(t,s){const i=A.Zr(s);if(0!==i.length){const e=d(this),h=new Set(e.HN());if(0===t)for(const n of i)h.add(n);else if(1===t)for(const r of i)h.delete(r);e.UN(h)}},M.b2t=function(){w._N(d(this))},M.v2t=function(){return!0},M.M2t=function(){return!0},x.x2t=function(t,s){this.kW().Ent(t,s)},G.x2t=function(t,s){h(this).Ent(t,s)},x.G2t=function(t,s){const i=this.kW(),e=i.Cnt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Ent(t,e+s)},G.G2t=function(t,s){const i=h(this),e=i.Cnt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Ent(t,e+s)},x.T2t=function(t,s){const i=this.kW(),e=i.Cnt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Ent(t,e-s))},G.T2t=function(t,s){const i=h(this),e=i.Cnt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Ent(t,e-s))},x._2t=function(t,s){this.kW().Ent(t,s?1:0)},G._2t=function(t,s){h(this).Ent(t,s?1:0)},x.I2t=function(t){const s=this.kW();s.Ent(t,0===s.Cnt(t)?1:0)},G.I2t=function(t){const s=h(this);s.Ent(t,0===s.Cnt(t)?1:0)},M.C2t=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=d(this);w.E2t(),i.TY("state"),i.Sv(s,"state"),w.P2t("state",{R2t:!0})},M.A2t=function(){return JSON.stringify(d(this).wv("state"))},M.F2t=function(){return d(this).SN().Jc()},M.D2t=function(){let t=w.d1t().Qft(),s=t.Ik();for(const i of w.Hvt(t))++s;return s},M.O2t=function(){return w.d1t().Qft().Tk().Gk().length},x.ON=function(){return this.kW().ON()},G.ON=function(){return h(this).ON()},x.FN=function(){return this.kW().FN()},G.FN=function(){return h(this).FN()},M.Bdt=function(t){const s=d(this);return t.toLowerCase()===w.JF().Vdt(s)},M.JN=function(t){const s=d(this);w.JF().JN(s,t)},M.L2t=function(t){const s=m(this);return w.JF().mdt().k2t(s.Tk().Gk(),t),!0},M.N2t=function(){return d(this).kN()},A.B2t=function(t,s,i){const e=t[1],h=t[3],n=t[4],r=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.Z$,w=s.Wht,S=s.jht,b=Object.assign({},M,2<=i?G:x);h&&(y.Wbt=b.Wbt,y.jbt=b.jbt,y.Hbt=b.Hbt,y.Vbt=b.Vbt,y.Ubt=b.Ubt,w.nv=b.nv,w.av=b.av,w.zbt=b.zbt,w.qbt=b.qbt,w.Xbt=b.Xbt,w.Kbt=b.Kbt,S.W2t=b.hv,S.j2t=b.ov,S.dD=b.pD),n&&(y.Qbt=b.Qbt,y.tvt=b.tvt,w.am=b.am,w.tm=b.tm,w.jI=b.jI,S.H2t=b.Qp,S.V2t=b.fm,S.U2t=b.svt,S.z2t=b.ivt,S.J2t=b.evt,S.q2t=b.hvt,S.$2t=b.nvt,S.X2t=b.rvt),r&&(y.Y2t=b.ovt,y.Z2t=b.avt,y.lvt=b.lvt,w.Uk=b.Uk,w.uvt=b.uvt,w.cvt=b.cvt,w.fvt=b.fvt,w.dvt=b.dvt,w.pvt=b.pvt,S.K2t=b.zk),o&&(y.E5=b.E5,y.mvt=b.mvt,w.I5=b.I5,w.wP=b.wP,w.yvt=b.yvt,S.Opacity=b.gP,S.Q2t=b.bP),a&&(y.wvt=b.wvt,y.Svt=b.Svt,y.bvt=b.bvt,w.vvt=b.vvt,w.Mvt=b.Mvt,w.xvt=b.xvt,w.Gvt=b.Gvt,w.uv=b.uv,S._vt=b._vt,S.Ivt=b.Ivt,S.Cvt=b.Cvt,S.Evt=b.Evt,S.Pvt=b.Pvt),l&&(y.Rvt=b.Rvt,w.Avt=b.Avt,w.Fvt=b.Fvt),d&&(y.Wvt=b.Wvt,y._B=b._B,y.fq=b.fq,y.jvt=b.jvt,y.Uvt=b.Uvt,y.zvt=b.zvt,y.Jvt=b.Jvt,w.xB=b.xB,w.GB=b.GB,w.Xvt=b.Xvt,S.Yvt=b.Yvt,S.Zvt=b.Zvt,S.Kvt=b.Kvt),p&&(w.Qvt=b.Qvt,w.KB=b.KB,S.t2t=b.t2t,S.s2t=b.s2t),u&&(y.E5=b.E5,w.I5=b.i2t,w.tMt=b.f6,w.sMt=b.e2t,w.iMt=b.h2t),c&&(y.eMt=b.o2t,w.hMt=b.n2t,w.nMt=b.r2t),f&&(y.Ju=b.l2t,w.rMt=b.a2t),m&&(y.Dvt=b.Dvt,y.Nvt=b.Nvt,y.Bvt=b.Bvt,s.oMt=v),e||(y.u2t=b.u2t,y.c2t=b.c2t,y.f2t=b.f2t,y.d2t=b.d2t,y.yW=b.yW,w.x2t=b.x2t,w.G2t=b.G2t,w.T2t=b.T2t,w._2t=b._2t,w.I2t=b.I2t,w.S2t=b.S2t,y.v2t=b.v2t,y.M2t=b.M2t,w.b2t=b.b2t,w.C2t||(w.C2t=b.C2t),S.A2t||(S.A2t=b.A2t),S.D2t=b.D2t,S.O2t=b.O2t,S.aMt=b.ON,S.lMt=b.FN,S.F2t=b.F2t,S.p2t=b.p2t,S.g2t=b.g2t,S.y2t=b.y2t,y.Bdt=b.Bdt,w.JN=b.JN,w.L2t=b.L2t),g&&(S.N2t=b.N2t)}}{const Yo=self.Ds;Yo.gdt=class extends Yo.tn{constructor(t){super(),this.Tft=t,this.cf="",this.HA=-1,this.uMt="",this.cMt=!1,this.fMt=null,this.Dft=0,this.amt=[],this.Wft=null,this.dMt=new Map,this.pMt=null,this.mMt=null,this.gMt=-1,this.dyt=null,this.yMt=null,this.wMt=!1}nn(){this.cf="",this.HA=-1,this.uMt="",this.fMt=null,this.mMt=null,this.dyt=null,this.yMt=null,this.gMt=-1,Yo.Lr(this.amt),this.Wft&&(this.Wft.clear(),this.Wft=null);for(const t of this.dMt.values())t.nn();this.dMt.clear(),this.pMt=null}sv(){const t=this.Tft,s=t.FO().Oz(),i=t.d1t(),e=(this.fMt=i.KF(),this.Dft=i.Jft()+1,t.opt(this.fMt));e&&(this.mMt=e,this.dyt=e.Pyt(),this.yMt=e.Eyt().map(t=>t.uet()),e.Dgt())&&(this.gMt=e.Dyt());for(const n of s){const r=n.Tk();r.rft()&&!this.fMt.hgt(n)||(this.amt.push(n),this.dMt.set(n,Yo.hn(Yo.SMt,r)))}const h=t.QF();this.Wft=0<h.size?h:null}bMt(t){this.cf="timer",this.sv(),this.HA=this.Tft.FO().wD()+t}vMt(t){this.cf="walltimer",this.sv(),this.HA=this.Tft.FO().bD()+t}MMt(t){this.cf="signal",this.sv(),this.uMt=t.toLowerCase()}k2t(t,s){this.cf="instance-signals",this.sv(),this.uMt=s.toLowerCase(),this.pMt=new Set(t)}xMt(t){this.cf="promise",this.sv(),t.then(()=>this.Odt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.Odt()})}GMt(){return"timer"===this.cf}TMt(){return"walltimer"===this.cf}Fdt(){return"signal"===this.cf}jdt(){return"instance-signals"===this.cf}ept(){return"promise"===this.cf}Ddt(){return this.uMt}_Mt(){return this.cMt}Odt(){this.cMt=!0}Hdt(t){this.pMt.delete(t),0===this.pMt.size&&this.Odt()}Sdt(){return this.GMt()?this.HA<=this.Tft.FO().wD():this.TMt()?this.HA<=this.Tft.FO().bD():this._Mt()}IMt(t){t.jft(this.fMt,this.Dft);for(const[i,e]of this.dMt.entries()){const h=i.Tk();e.jft(h)}this.Wft&&t.n0t([...this.Wft]);const s=this.mMt;s&&(s.zgt(this.dyt),s.Eyt().map((t,s)=>t.$et(this.yMt[s])),s.Dgt())&&s.Oyt(this.gMt)}bdt(t){this.IMt(t),this.fMt.Ogt(t),this.mMt&&this.mMt.Dgt()&&this.mMt.syt(this.gMt),this.Tft.cdt(this.amt),this.wMt=!0}async Gdt(t){this.IMt(t);for(const s of this.fMt.Lgt(t))await this.Tft.FO().$1t(s);this.mMt&&this.mMt.Dgt()&&this.mMt.syt(this.gMt),this.Tft.cdt(this.amt),this.wMt=!0}vdt(){return this.wMt}tft(t){for(const s of this.dMt.values())s.tft(t);if("instance-signals"===this.cf){for(const i of t)this.pMt.delete(i);0===this.pMt.size&&this.Odt()}}aq(){const t={},s={wt:this.cf,t:this.HA,st:this.uMt,s:this.cMt,ev:this.fMt.zz(),sm:this.amt.map(t=>t.zz()),dsm:this.Wft?[...this.Wft].map(t=>t.zz()):null,sols:t};this.fMt.Mgt(this.Dft)&&(s.act=this.fMt.y1t(this.Dft).zz());for(const[i,e]of this.dMt)t[i.zz().toString()]=e.aq();return"instance-signals"===this.cf&&(s.pi=[...this.pMt].map(t=>t.FN())),s}static hpt(t,s){const i=t.FO(),e=t._1t(s.ev);if(!e)return null;let h=0;if(s.hasOwnProperty("act")){const r=t.C1t(s.act);if(!r)return null;h=r.dF()}const n=Yo.hn(Yo.gdt,t);n.HA=s.t,s.hasOwnProperty("wt")?n.cf=s.wt:n.cf=-1===n.HA?"signal":"timer",n.uMt=s.st,n.cMt=s.s,n.fMt=e,n.Dft=h;for(const o of s.sm){const a=i.v8(o);a&&n.amt.push(a)}if(Array.isArray(s.dsm))for(const l of s.dsm){const u=i.v8(l);u&&(n.Wft||(n.Wft=new Set),n.Wft.add(u))}for(const[c,f]of Object.entries(s.sols)){const d=parseInt(c,10),p=i.v8(d);if(p){const m=Yo.hn(Yo.SMt,null);m.lq(t,f),n.dMt.set(p,m)}}if("instance-signals"===n.cf){n.pMt=new Set;for(const g of s.pi){const y=i.aO(g);y&&n.pMt.add(y)}}return n}}}{const Zo=self.Ds;Zo.SMt=class extends Zo.tn{constructor(t){super(),this.qct=null,this.CMt=!0,this.A7=[],t&&(this.qct=t.SN(),this.CMt=t.rft(),Zo.Wr(this.A7,t.pft()))}nn(){this.qct=null,Zo.Lr(this.A7)}jft(t){t.dft(this.CMt),Zo.Wr(t.pft(),this.A7)}tft(t){Zo.zr(this.A7,t)}aq(){return{sa:this.CMt,insts:this.A7.map(t=>t.FN())}}lq(t,s){const i=t.FO();this.CMt=!!s.sa,Zo.Lr(this.A7);for(const e of s.insts){const h=i.aO(e);h&&this.A7.push(h)}}}}{let l=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};l;const Ko=self.Ds;Ko.EMt=class extends Ko.tn{constructor(t){super(),this.tf=t.runtime,this.ln=t.name??"",this.PMt=!!t.WL,this.RMt=!!t.AMt,this.FMt=!!t.JL,this.DMt=!!t.OMt,this.LMt=!!t.$L,this.kMt=!!t.NMt,this.BMt=!!t.tk,this.WMt=!!t.UL,this.jMt=!!t.YL,this.HMt=t.VMt,this.UMt=null,this.zMt=new Map,this.JMt=new Map,this.qMt=new Map,this.$Mt=new Map,this.XMt=t.YMt,this.ZMt=null}nn(){this.tf=null}FO(){return this.tf}Jc(){return this.ln}KMt(){}Wdt(){return(2<=this.LSt()?this.ZMt:this).constructor}LSt(){return this.HMt}QMt(t=!1){let s=this.XMt;return t&&"function"!=typeof s&&2<=this.LSt()?globalThis.UW:s}jL(){return this.PMt}VL(){return this.RMt}zL(){return this.WMt}ZL(){return this.jMt}qL(){return this.FMt}Pb(){return this.DMt}XL(){return this.LMt}QL(){return this.kMt}sk(){return this.BMt}nwt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.zMt.get(t);return i||(i=t.bind(s),this.zMt.set(t,i)),i}ASt(t,s,i){if(!s)throw new Error("missing 'this' binding");let e=l(this.JMt,t),h=e.get(i);return h||(h=t.bind(s,i),e.set(i,h)),h}FSt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");let h=l(this.qMt,t),n=l(h,i),r=n.get(e);return r||(r=t.bind(s,i,e),n.set(e,r)),r}DSt(t,s,i,e,h){if(!s)throw new Error("missing 'this' binding");let n=l(this.$Mt,t),r=l(n,i),o=l(r,e),a=o.get(h);return a||(a=t.bind(s,i,e,h),o.set(h,a)),a}txt(t){if(!this.jL())throw new Error("must be single-global plugin");this.UMt=t}lk(){if(this.jL())return this.UMt;throw new Error("must be single-global plugin")}ck(){if(this.jL())return this.UMt.ck();throw new Error("must be single-global plugin")}sxt(){const t=this.LSt(),s=(Ko.NL.ixt(this,t),this.QMt(!0));if(s){if(this.ZMt=new s,!(this.ZMt instanceof self.OL))throw new TypeError("plugin class must derive from IPlugin")}else this.ZMt=new self.OL;Ko.NL.hxt(t)}nk(){return this.ZMt}}}{const Qo=self.Ds;Qo.nxt=class extends Qo.EMt{constructor(t,s){super(t),this.rxt=s,this.oxt=0,this.axt=new Map,this.lxt("elem-focused",t=>t.uxt()),this.lxt("elem-blurred",t=>{t&&t.cxt()})}nn(){super.nn()}fxt(t){const s=this.oxt++;return this.axt.set(s,t),s}dxt(t){this.axt.delete(t)}lxt(t,i){this.tf.u4(this.rxt,t,t=>{const s=this.axt.get(t.elementId);i(s,t)})}}}{const ta=self.Ds;ta.pxt=class extends ta.tn{constructor(t){super(),this.qct=t,this.tf=t.FO(),this.mxt=t.pk()}nn(){this.qct=null,this.tf=null,this.mxt=null}SN(){return this.qct}FO(){return this.tf}pk(){return this.mxt}J6(){return this.qct.J6()}KMt(){}$St(t){}Fbt(t){}Dbt(t){}b$(t){}_$(){}x$(){}q$(t){}gxt(){}QMt(){return null}yxt(t,s,i){const e=ta.hn(ta.Event,t,s);e.wxt=this,i&&Object.assign(e,i),this.SN().EX(e)}}}{const sa=self.Ds;sa.Sxt=class extends sa.tn{constructor(t,s){super(),this.bi=t,this.rxt=s,this.bxt=null,this.tf=t.FO(),this.qct=this.bi.SN(),this.vxt=this.qct.Abt(),this.pY=null,this.gY=null,this.w4=!1,this.b4=!1,this.p0=null,this.cI=!1}nn(){this.cI=!0,this.Mxt(),this.xxt(),this.pY=null,this.gY=null,this.p0&&(this.p0.nn(),this.p0=null),this.bi=null,this.tf=null,this.qct=null,this.vxt=null}rn(){return this.cI}kW(){return this.bi}FO(){return this.tf}SN(){return this.qct}pk(){return this.vxt.pk()}Abt(){return this.vxt}Gxt(){return this.bi.lO()}r4(t){return this.tf.r4(t,this.bi,null)}Txt(t){return this.tf.Txt(t,this.bi,null)}a4(t){return this.tf.a4(t,this.bi,null)}_xt(t,s){return this.tf._xt(t,this.bi,s)}Ixt(t,s){return this.tf.Ixt(t,this.bi,s)}Cxt(t){return this.tf.Cxt(t)}Ext(t,s){this.tf.u4(this.rxt,t,s)}Pxt(t){for(const[s,i]of t)this.Ext(s,i)}Rxt(t,s){this.tf.hf(this.rxt,t,s)}Axt(t,s){return this.tf.MO(this.rxt,t,s)}Fxt(t,s){if(!this.tf.PF())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.rxt,handler:t,data:s,responseId:null});this.Rxt(t,s)}Dxt(t){if(!t)throw new Error("cannot set empty component id");this.bxt=t}Oxt(){if(this.bxt)return this.tf.T4(this.bxt);throw new Error("wrapper extension component id not set")}I4(t,s){if(!this.bxt)throw new Error("wrapper extension component id not set");this.tf.I4(this.bxt,t,s)}Lxt(t){for(const[s,i]of t)this.I4(s,i)}c8(t,s){if(!this.bxt)throw new Error("wrapper extension component id not set");this.tf.c8(this.bxt,t,s)}f8(t,s){if(this.bxt)return this.tf.f8(this.bxt,t,s);throw new Error("wrapper extension component id not set")}xZ(){}kxt(){}Nxt(){if(!this.w4){if(!this.pY)if(this.tf.g4()){const s=globalThis.C3Debugger,i=this.pk();this.pY=()=>{const t=performance.now();this.xZ(),s.AddIndividualPluginTickTime(i,performance.now()-t)}}else this.pY=()=>this.xZ();this.tf.Lf().addEventListener("tick",this.pY),this.w4=!0}}Mxt(){this.w4&&(this.tf.Lf().removeEventListener("tick",this.pY),this.w4=!1)}Bxt(){return this.w4}Wxt(){if(!this.b4){if(!this.gY)if(this.tf.g4()){const s=globalThis.C3Debugger,i=this.pk();this.gY=()=>{const t=performance.now();this.kxt(),s.AddIndividualPluginTickTime(i,performance.now()-t)}}else this.gY=()=>this.kxt();this.tf.Lf().addEventListener("tick2",this.gY),this.b4=!0}}xxt(){this.b4&&(this.tf.Lf().removeEventListener("tick2",this.gY),this.b4=!1)}jxt(){return this.b4}Hxt(){return[]}wv(){return null}Sv(t){}Snt(t){}Tnt(t,s){}Srt(t,s,i){if(0!==s){const e=this.Snt(t);if("number"!=typeof e)throw new Error("expected number");this.Tnt(t,e+s,i)}}Vxt(t,s,i,e){}Uxt(t,...s){t.call(this,...s)}zxt(t,...s){return t.call(this,...s)}QMt(){return null}yxt(t,s,i){if(this.bi.Jxt()){const e=this.Gxt(),h=sa.hn(sa.Event,t,s);h.S6=e,i&&Object.assign(h,i),e.dispatchEvent(h)}}Pb(){return!1}}}{const ia=self.Ds;ia.qxt=class extends ia.Sxt{constructor(t,s){super(t,s),this.yst=t.dO(),this.$xt=null,this.Xxt=null}nn(){if(this.$xt){const t=this.tf.Lf();t.removeEventListener("renderercontextlost",this.$xt),t.removeEventListener("renderercontextrestored",this.Xxt),this.$xt=null,this.Xxt=null}this.yst=null,super.nn()}Yxt(){this.Zxt()}Kxt(){}Qxt(){}Zxt(){if(!this.$xt){this.$xt=()=>this.G7(),this.Xxt=()=>this.tGt();const t=this.tf.Lf();t.addEventListener("renderercontextlost",this.$xt),t.addEventListener("renderercontextrestored",this.Xxt)}}G7(){this.Kxt()}tGt(){this.Qxt()}dO(){return this.yst}oit(){return!1}rit(){if(!this.oit())throw new Error("original size not known");const t=this.sGt();if(t)return t.Qp()}lit(){if(!this.oit())throw new Error("original size not known");const t=this.sGt();if(t)return t.fm()}sGt(){return null}iGt(){const t=this.sGt();if(t){const s=t.xM();if(s)return[s.Qp(),s.fm()]}return[100,100]}eGt(){const t=this.sGt();return t?t.wC():null}hGt(){const t=this.sGt();return t?t.nGt():null}rGt(){const t=this.sGt();return!!t&&t.oGt()}$bt(t){const s=this.bi.dO();return[s.hv(),s.ov(),s.U4()]}gxt(t,s,i){}aGt(t,s){}B9(){return!0}}}{const ea=self.Ds,ha=ea.hn(ea.Rect);ea.lGt=class extends ea.qxt{constructor(t,s){super(t,s),this.uGt=this.pk().fxt(this),this.cGt=!0,this.fGt=!1,this.dGt=!1,this.pGt=-.2,this.mGt=ea.hn(ea.Rect,0,0,-1,-1);const i=this.tf.vL();this.gGt=i.Ij(),this.yGt=i.Cj(),this.wGt=-1,this.SGt=-1,this.bGt=!1,this.Nxt()}nn(){this.pk().dxt(this.uGt),this.vGt("destroy"),this.uGt=-1,super.nn()}o6(){if(this.tf.PF())throw new Error("not valid in worker mode");return this.MGt("get-element")}vGt(t,s){(s=s||{}).elementId=this.uGt,this.Rxt(t,s)}MGt(t,s){return(s=s||{}).elementId=this.uGt,this.Fxt(t,s)}xGt(t,s){return(s=s||{}).elementId=this.uGt,this.Axt(t,s)}GGt(t){t=t||{};const s=this.dO();t.elementId=this.uGt,t.isVisible=s.E5(),t.htmlIndex=s.pO().Dj(),t.htmlZIndex=s.Oj(),Object.assign(t,this.TGt()),this.cGt=!!t.isVisible,this.Fxt("create",t),this._Gt(!0)}i2t(t){this.cGt!==(t=!!t)&&(this.cGt=t,this.vGt("set-visible",{isVisible:t}))}xZ(){this._Gt(!1)}IGt(){const t=this.tf.vL().Wj();return"Android"===ea.hi.ni&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}_Gt(u){if(!this.kW().jj()){let t=this.dO(),s=t.pO(),i=t.J4(),[e,h]=s.uN(i.wl(),i.Sl()),[n,r]=s.uN(i.bl(),i.vl()),o=this.tf.vL(),a=o.TL(),l=o.IL();if(t.E5()&&s.E5())if(!this.IGt()&&(n<=0||r<=0||a<=e||l<=h))this.i2t(!1);else{ha.set(e,h,n,r);const c=o.Ij(),f=o.Cj(),d=s.Dj(),p=t.Oj();if(!u&&ha.equals(this.mGt)&&this.gGt===c&&this.yGt===f&&this.wGt===d&&this.SGt===p)this.i2t(!0);else{this.mGt.T(ha),this.gGt=c,this.yGt=f,this.wGt=d,this.SGt=p,this.i2t(!0);let t=null;this.dGt&&(t=s.Hj()+this.pGt),this.vGt("update-position",{left:Math.round(this.mGt.wl()),top:Math.round(this.mGt.Sl()),width:Math.round(this.mGt.width()),height:Math.round(this.mGt.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this.i2t(!1)}}l6(){this.MGt("focus",{focus:!0})}u6(){this.MGt("focus",{focus:!1})}uxt(){this.fGt=!0}cxt(){this.fGt=!1}o2t(){return this.fGt}f6(t,s){this.vGt("set-css-style",{prop:ea.ko(t),val:s})}e2t(t,s){this.vGt("set-attribute",{name:t,val:s})}h2t(t){this.vGt("remove-attribute",{name:t})}CGt(){this.bGt||(this.bGt=!0,Promise.resolve().then(()=>{this.bGt=!1,this.vGt("update-state",this.TGt())}))}TGt(){}EGt(){return this.uGt}}}{const na=self.Ds,ra=self.M6;na.PGt=class extends na.tn{constructor(t){super(),this.tf=t.runtime,this.ln=t.name??"",this.RGt=na.hn(na.sc),this.AGt=na.hn(na.sc),this.HMt=t.VMt,this.XMt=t.YMt,this.FGt=null}nn(){this.AGt.nn(),this.RGt.nn(),this.tf=null}FO(){return this.tf}Jc(){return this.ln}KMt(){}LSt(){return this.HMt}QMt(t=!1){let s=this.XMt;return t&&"function"!=typeof s&&2<=this.LSt()?globalThis.Zj:s}DGt(t){this.RGt.nc(t)}YY(){return this.RGt.rc()}xz(t){this.AGt.nc(t)}_z(t){this.AGt.Zu(t)}Gk(){return this.AGt.rc()}sxt(){const t=this.LSt(),s=(na.NL.ixt(this,t),this.QMt(!0));if(s){if(this.FGt=new s,!(this.FGt instanceof ra))throw new TypeError("behavior class must derive from IBehavior")}else this.FGt=new ra;na.NL.hxt(t)}p6(){return this.FGt}}}{const oa=self.Ds;oa.OGt=class extends oa.tn{constructor(t){super(),this.tf=t.FO(),this.bwt=t,this.qct=t.SN(),this.LGt=t.m6(),this.LGt.DGt(this.qct)}nn(){this.tf=null,this.bwt=null,this.qct=null,this.LGt=null}KMt(){}w6(){return this.bwt}SN(){return this.qct}FO(){return this.tf}m6(){return this.LGt}}}{const aa=self.Ds;aa.kGt=class extends aa.tn{constructor(t,s){super(),this.NGt=t,this.rxt=s,this.bi=t.b6(),this.tf=t.FO(),this.bwt=t.w6(),this.vxt=this.bwt.Abt(),this.w4=!1,this.b4=!1,this.l8=!1,this.p0=null}nn(){this.Mxt(),this.xxt(),this.BGt(),this.p0&&(this.p0.nn(),this.p0=null),this.NGt=null,this.bi=null,this.tf=null,this.bwt=null,this.vxt=null}m6(){return this.bwt.m6()}WGt(){return this.NGt}b6(){return this.bi}SN(){return this.bi.SN()}dO(){return this.bi.dO()}FO(){return this.tf}w6(){return this.bwt}Abt(){return this.vxt}Gxt(){return this.NGt.Gxt()}r4(t){return this.tf.r4(t,this.bi,this.bwt)}Txt(t){return this.tf.Txt(t,this.bi,this.bwt)}a4(t){return this.tf.a4(t,this.bi,this.bwt)}jGt(){}xZ(){}kxt(){}HGt(){}Nxt(){this.w4||(this.tf.e8(this),this.w4=!0)}Mxt(){this.w4&&(this.tf.h8(this),this.w4=!1)}Bxt(){return this.w4}Wxt(){this.b4||(this.tf.n8(this),this.b4=!0)}xxt(){this.b4&&(this.tf.r8(this),this.b4=!1)}jxt(){return this.b4}VGt(){this.l8||(this.tf.o8(this),this.l8=!0)}BGt(){this.l8&&(this.tf.a8(this),this.l8=!1)}UGt(){return this.l8}Hxt(){return[]}Ext(t,s){this.tf.u4(this.rxt,t,s)}zGt(t,s){}wv(){return null}Sv(t){}Snt(t){}Tnt(t,s){}Srt(t,s){if(0!==s){const i=this.Snt(t);if("number"!=typeof i)throw new Error("expected number");this.Tnt(t,i+s)}}Vxt(t,s,i,e){}Uxt(t,...s){t.call(this,...s)}zxt(t,...s){return t.call(this,...s)}QMt(){return null}yxt(t,s,i){if(this.NGt.Jxt()){const e=this.Gxt(),h=aa.hn(aa.Event,t,s);h.JGt=e,h.S6=e.S6,i&&Object.assign(h,i),e.dispatchEvent(h)}}}}{let s=function(t){if(t!==i)throw new Error("invalid internal API token")},n=(s,self.Ds),i=(n.Q$={},n.Iat={},n.Os()),e=[],h=[],r=[],o=null,a=null,t=null,l=null,u=new Map,c=new Map;n.NL=class extends n.tn{constructor(t,s){super(),this.tf=t,this.qGt=[],this.swt=null,this.$Gt=[],this.XGt=new Map,this.YGt=null,this.ZGt=null,this.KGt=new Set(s)}QGt(t){const s=t[19],i=this.tf.nyt(t[0]);if(!i)throw new Error("missing plugin");n.B2t(t,i,s);const e=2<=s?n.EMt:i,h=n.hn(e,{runtime:this.tf,WL:t[1],AMt:t[2],JL:t[5],$L:t[8],OMt:t[9],NMt:t[13],tk:t[14],UL:t[17],YL:t[18],VMt:s,name:t[20],YMt:2<=s?i:null});h.KMt(),this.qGt.push(h),u.set(i,h)}tTt(){this.swt=n.hn(n.Q$.K$,{runtime:this.tf,WL:!0}),this.swt.KMt()}sTt(t){const i=t[1],e=t[2],h=this.tf.nyt(t[0]);if(!h)throw new Error("missing behavior");this.XGt.set(h,()=>{const t=2<=i?n.PGt:h,s=n.hn(t,{runtime:this.tf,name:e,VMt:i,YMt:2<=i?h:null});s.KMt(),this.$Gt.push(s),c.set(h,s),!this.YGt&&n.Iat.solid&&s instanceof n.Iat.solid?this.YGt=s:!this.ZGt&&n.Iat.jumpthru&&s instanceof n.Iat.jumpthru&&(this.ZGt=s),s.sxt()})}iTt(t){const s=this.XGt.get(t);s&&(s(),this.XGt.delete(t))}static ixt(t,s=1){if(n.NL.ixt!==o)throw new Error("invalid method");1===s&&e.push(t),h.push(t)}static hxt(t=1){if(n.NL.hxt!==a)throw new Error("invalid method");1===t&&e.pop(),h.pop()}static xN(){if(n.NL.xN!==t)throw new Error("invalid method");if(0===e.length)throw new Error("no init object set");return e.at(-1)}static kL(t){if(n.NL.kL!==l)throw new Error("invalid method");if(s(t),0===h.length)throw new Error("no init object set");return h.at(-1)}static eTt(t){r.push(t)}static hTt(){r.pop()}static h4(){if(0===r.length)throw new Error("no init properties set");return r.at(-1)}nTt(){for(const t of this.qGt)t.sxt()}static hk(t){return u.get(t)||null}static x6(t){return c.get(t)||null}YV(){return this.swt}rTt(){return this.YGt}oTt(){return this.ZGt}T4(t){return this.KGt.has(t)}},o=n.NL.ixt,a=n.NL.hxt,t=n.NL.xN,l=n.NL.kL}{const la=self.Ds,ua=new Set;la.aTt=class extends la.tn{constructor(){super(),this.lTt=0,this.d7="",this.p7=0,this.uTt=0,this.cTt=0,this.Wm=0,this.jm=0,this.fTt=!1,this.dTt=!1,this.pTt=null,this.mTt="",this.nI=la.hn(la.Rect),this.gTt=la.hn(la.$l),this.yTt="",this.wTt=new self.RO(this),ua.add(this)}nn(){this.aI(),this.pTt&&0===this.pTt.I7()&&this.pTt.nn(),this.pTt=null,ua.delete(this),this.STt()}static G7(){for(const t of ua)t.mTt="",t.nI.set(0,0,0,0),t.gTt.mu(t.nI)}bTt(t){this.d7=t[0],this.p7=t[1],this.uTt=t[2],this.cTt=t[3],this.Wm=t[4],this.jm=t[5],this.fTt=t[6],this.dTt=!0}vTt(t,s){if(this.pTt)throw new Error("already loaded asset");this.d7=s;const i={};return la.po(s)&&(i.WV="remote"),this.AO(t,i),this.pTt.VV()}MTt(t,s){if(this.pTt)throw new Error("already loaded asset");this.d7="",this.p7=s.size,this.pTt=la.hn(la.jV,t.yF(),{blob:s,size:this.p7,WV:"local"})}xTt(t){if(t===this)throw new Error("cannot replace with self");this.lTt++,this.aI(),this.d7=t.d7,this.p7=t.p7,this.uTt=t.uTt,this.cTt=t.cTt,this.Wm=t.Wm,this.jm=t.jm,this.fTt=t.fTt,this.dTt=t.dTt,this.pTt=t.pTt,this.mTt=t.mTt,this.nI=t.nI,this.gTt=t.gTt,this.STt()}HV(){return this.d7}Qu(){return this.p7}GTt(){return this.uTt}TTt(){return this.cTt}oGt(){return this.fTt}Qp(){return this.Wm}fm(){return this.jm}_Tt(){return this.pTt.Qp()}ITt(){return this.pTt.fm()}AO(t,s){if(this.pTt)throw new Error("already got asset");s=Object.assign({},s,{url:this.HV(),size:this.Qu()}),this.pTt=t.BV(s)}w7(){return this.pTt&&this.pTt.w7()}async vH(t,s){if(!this.pTt)throw new Error("no asset");if(this.mTt)throw new Error("already loaded texture");const i=this.lTt,e=(this.mTt="loading",await this.pTt.vH(t,s));if(this.lTt!==i)return null;if(!e)return this.mTt="",null;this.mTt="loaded",this.dTt||(this.Wm=e.Qp(),this.jm=e.fm(),this.dTt=!0);const h=this.fTt?this.jm:this.Wm,n=this.fTt?this.Wm:this.jm;return this.nI.set(this.uTt,this.cTt,this.uTt+h,this.cTt+n),this.nI.Tt(e.Qp(),e.fm()),this.gTt.mu(this.nI),this.fTt&&this.gTt.vu(),e}aI(){this.mTt&&(this.pTt&&this.pTt.aI(),this.mTt="",this.nI.set(0,0,0,0),this.gTt.mu(this.nI))}xM(){return this.pTt&&"loaded"===this.mTt?this.pTt.xM():null}wC(){return this.nI}nGt(){return this.gTt}ej(){return this.wTt}CTt(){return this.pTt}async ETt(t){t=t||await this.pTt.C7();const s=la.Co(this.Wm,this.jm),i=s.getContext("2d");return this.fTt?(i.rotate(Math.PI/-2),i.translate(-this.jm,0),i.drawImage(t,this.uTt,this.cTt,this.jm,this.Wm,0,0,this.jm,this.Wm)):i.drawImage(t,this.uTt,this.cTt,this.Wm,this.jm,0,0,this.Wm,this.jm),s}async PTt(t){if(!this.yTt){const s=await this.ETt(t),i=await la.Eo(s);this.yTt=URL.createObjectURL(i)}return this.yTt}STt(){this.yTt&&(URL.revokeObjectURL(this.yTt),this.yTt="")}}}{const ca=self.Ds;ca.RTt=class extends ca.tn{constructor(t){super(),this.ln=t[0],this.ATt=t[1],this.cSt=!!t[2],this.Xrt=t[3],this.FTt=t[4],this.DTt=!!t[5],this.cU=t[6],this.OTt=t[7].map(t=>ca.hn(ca.LTt,t)),this.kTt=new self.E6(this)}static NTt(t,s){const i=ca.hn(ca.RTt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.OTt.push(ca.LTt.NTt(t)),i}nn(){for(const t of this.OTt)t.nn();ca.Lr(this.OTt)}BTt(t){for(const s of this.OTt)s.J6().AO(t)}WTt(s,i){return Promise.all(this.OTt.map(t=>t.J6().vH(s,i)))}jTt(){for(const t of this.OTt)t.J6().aI()}Jc(){return this.ln}zz(){return this.cU}N6(){return this.OTt.length}W6(){return this.OTt}HTt(t){if((t=Math.floor(t))<0||t>=this.OTt.length)throw new RangeError("invalid frame");return this.OTt[t]}VTt(t,s){(s=Math.floor(s))<0?this.OTt.unshift(t):s>=this.OTt.length?this.OTt.push(t):this.OTt.splice(s,0,t)}UTt(t){if((t=Math.floor(t))<0||t>=this.OTt.length)throw new RangeError("invalid frame");this.OTt[t].nn(),this.OTt.splice(t,1)}zTt(i){for(let t=0,s=this.OTt.length;t<s;++t)if(ca.uh(this.OTt[t].fW(),i))return t;return-1}JTt(t){if("string"!=typeof t)return t;{const s=this.zTt(t);if(-1===s)throw new Error("cannot find animation frame with tag "+t);return s}}P6(){return this.ATt}A6(){return this.cSt}F6(){return this.Xrt}O6(){return this.FTt}k6(){return this.DTt}qTt(){return this.kTt}}}{const fa=self.Ds,da=(()=>{const i=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),e=new Uint8Array(i.length);for(let t=0,s=i.length;t<s;++t)e[t]=i.charCodeAt(t);return new Blob([e],{type:"image/png"})})();fa.LTt=class extends fa.tn{constructor(t){super(),this.$Tt=fa.hn(fa.aTt),this.$Tt.bTt(t),this.XTt=t[7],this.YTt=fa.hn(fa.$a,t[8],t[9]),this.ZTt=t[10].map(t=>fa.hn(fa.KTt,this,t)),this.QTt=new Map;for(const i of this.ZTt)this.QTt.set(i.Jc().toLowerCase(),i);this.t_t=null;const s=t[11];6<=s.length&&(this.t_t=fa.hn(fa.Cu,s)),this.jg=t[12]||"",this.s_t=new self.z6(this)}static NTt(t){const s=fa.hn(fa.LTt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.$Tt.MTt(t,da),s}nn(){this.t_t&&(this.t_t.nn(),this.t_t=null),this.$Tt.nn(),this.$Tt=null}J6(){return this.$Tt}q6(){return this.XTt}Y6(){return this.YTt.Qa()}K6(){return this.YTt.sl()}aW(){return this.t_t}rW(t){return this.QTt.get(t.toLowerCase())||null}nW(t){return(t=Math.floor(t))<0||t>=this.ZTt.length?null:this.ZTt[t]}sW(){return this.ZTt.length}fW(){return this.jg}j6(){return this.s_t}}}{const pa=self.Ds;pa.KTt=class extends pa.tn{constructor(t,s){super(),this.i_t=t,this.ln=s[0],this.e_t=pa.hn(pa.$a,s[1],s[2])}nn(){}Jc(){return this.ln}hv(){return this.e_t.Qa()}ov(){return this.e_t.sl()}h_t(){return this.e_t}}}{const G=self.Ds,ma=self.C3Debugger,ga=self.fk;G.ylt=class extends G.tn{constructor(s,t,i){super();const e=s.nyt(i[1]),[h,n]=(this.tf=s,this.mxt=G.NL.hk(e),this.vxt=null,this.n_t=e.Instance,this.Wg=t,this.cU=i[11],this.ln=i[0],this.Hyt=this.tf.x1t(i[14]),this.r_t=!!i[9],this.o_t=!!i[2],this.a_t=!!i[10],this.l_t=i[3].map(t=>({sid:t[0],type:t[1],name:t[2],u_t:s.x1t(t[3])})),this.c_t=i[4],this.f_t=i[5],this.RMt=this.mxt.VL(),this.d_t=G.hn(G.Event.Lf),this.JU=null,s.bF().oL());if(this.p_t=G.hn(G.m_t,h,n),this.g_t=!0,this.y_t=null,this.w_t=null,this.S_t=-1,this.b_t=null,this.v_t=null,this.M_t=null,this.x_t=null,this.G_t=null,this.T_t=!1,this.__t=null,this.I_t=i[8].map(t=>G.C_t.VM(this,t)),this.E_t=[],this.P_t=new Map,this.R_t=new Map,this.A_t=new Set,this.F_t=new Map,this.D_t=G.hn(G.Jct,this),this.O_t=null,this.L_t=0,this.k_t=!1,this.__t=null,this.$Tt=null,this.N_t=null,this.B_t=null,this.W_t=null,this.j_t=0,this.gSt=new Map,this.ySt=new Map,this.A7=[],this.H_t=new Map,this.V_t=!0,this.mxt.XL()&&(this.JU=G.hn(G.qU,this,i[12])),i[6]&&(this.$Tt=G.hn(G.aTt),this.$Tt.bTt(i[6])),i[7]){this.N_t=i[7].map(t=>G.hn(G.RTt,t)),this.B_t=new Map,this.W_t=new Map;for(const a of this.N_t)this.B_t.set(a.Jc().toLowerCase(),a),this.W_t.set(a.zz(),a)}this.o_t?(this.y_t=[],this.w_t=new Set,this.S_t=this.tf.U_t()):(this.b_t=[],this.v_t=new Set,this.M_t=[],this.x_t=[],this.G_t=[]);const r=this.mxt.LSt();if(r<2&&(this.vxt=G.hn(e.z_t,this,i[15]),!(this.vxt instanceof G.pxt)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.J_t=null,this.q_t=null,this.Jq=G.hn(G.Event.Lf),G.NL.ixt(this,r);let o;if(o=2<=r?(o=e.z_t)||globalThis.tj:this.vxt.QMt()){if(this.J_t=new o(r<2?this:null),r<2&&!(this.J_t instanceof ga))throw new TypeError("script interface class must derive from IObjectClass");if(2<=r&&!(this.J_t instanceof globalThis.tj))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.J_t=new ga;if(G.NL.hxt(r),i[13]){const l=i[13];if(l){const u=l[0],c=l[1],f=l[2];this.vxt.gxt(u,c,f)}}this.tf.$_t()&&!this.o_t&&!this.a_t&&this.RMt||this.KMt(),this.mxt.jL()&&(this.mxt.txt(this),this.X_t(i)),this.Y_t=null}static VM(t,s,i){return G.hn(G.ylt,t,s,i)}nn(){if(this.d_t.nn(),this.d_t=null,this.$Tt&&(this.$Tt.nn(),this.$Tt=null),this.N_t){for(const t of this.N_t)t.nn();G.Lr(this.N_t),this.B_t.clear(),this.W_t.clear()}this.Y_t=null,this.D_t.nn(),this.D_t=null,this.gSt.clear(),this.ySt.clear(),this.__t=null,this.tf=null}Z_t(i){for(let t=1,s=i.length;t<s;++t){const e=this.tf.fz(i[t]);this.y_t.push(e),this.w_t.add(e),e.b_t.push(this),e.v_t.add(this)}}K_t(t){this.T_t=!0,this.__t=t}RN(){return this.T_t}y$(){return this.__t}Q_t(){let t=0;if(!this.o_t)for(const s of this.b_t)for(const i of s.tIt()){const e=i.Jc().toLowerCase();this.P_t.set(e,i),this.R_t.set(e,t),this.E_t.push(i),++t}for(const h of this.tIt()){const n=h.Jc().toLowerCase();this.P_t.set(n,h),this.R_t.set(n,t),this.E_t.push(h),++t}for(const r of this.E_t)this.A_t.add(r.m6().constructor);if(!this.o_t&&this.b_t.length){let t=this.tf.sIt(),s=(G.Nr(this.M_t,t,0),G.Nr(this.x_t,t,0),G.Nr(this.G_t,t,0),[]),i=0,e=0,h=0;for(const o of this.b_t){const a=o.wwt(),l=(this.M_t[a]=i,i+=o.iIt(),this.x_t[a]=e,e+=o.eIt(),this.G_t[a]=h,h+=o.hIt(),o.kk());if(l&&this.JU)for(const u of l.Nk())s.push(u.nIt(this.JU))}this.JU&&this.JU.rIt(s)}}X_t(t){const s=this.tf.oIt(),i=G.hn(G.Instance,{runtime:this.tf,wN:this,uid:s});i.aIt(t[16],[]),this.tf.lIt(s,i),this.A7.push(i)}Abt(){return this.vxt}uIt(){return this.a_t}Lf(){return this.d_t}KMt(){this.o_t||(this.vxt?this.vxt.KMt():this.J_t.sj())}cIt(){return 0<this.j_t}async b$(t){this.o_t||(this.j_t++,1===this.j_t&&(this.vxt?await this.vxt.b$(t):await this.J_t.hj(this.tf.vL().fIt())))}_$(){if(!this.o_t){if(this.j_t--,this.j_t<0)throw new Error("released textures too many times");0===this.j_t&&(this.vxt?this.vxt._$():this.J_t.nj(this.tf.vL().fIt()))}}x$(){if(this.o_t)throw new Error("not applicable to family");this.vxt?this.vxt.x$():this.J_t.rj()}async q$(t){this.o_t||(this.vxt?await this.vxt.q$(t):await this.J_t.oj(this.tf.vL().fIt()))}FO(){return this.tf}pk(){return this.mxt}dIt(){return this.n_t}Jc(){return this.ln}x1t(){return this.Hyt}dF(){return this.Wg}zz(){return this.cU}Lz(){return this.o_t}Mz(){return this.r_t}VL(){return this.RMt}wwt(){return this.S_t}tIt(){return this.I_t}eIt(){return this.c_t}pIt(t){return t&&this.A_t.has(t)}iIt(){return this.l_t.length}mIt(){return this.l_t.map(t=>t.sid)}gIt(s){return this.l_t.findIndex(t=>t.sid===s)}Ust(s){return this.l_t.findIndex(t=>t.name===s)}yIt(){return this.l_t.map(t=>t.name)}wIt(){return this.l_t.map(t=>t.u_t)}Jst(t){if((t=Math.floor(t))<0||t>=this.l_t.length)throw new RangeError("invalid instance variable index");return this.l_t[t].type}zst(t){if((t=Math.floor(t))<0||t>=this.l_t.length)throw new RangeError("invalid instance variable index");return this.l_t[t].name}hIt(){return this.f_t}SIt(){return this.E_t}wht(t){return this.P_t.get(t.toLowerCase())||null}$st(t){const s=this.R_t.get(t.toLowerCase());return void 0===s?-1:s}kk(){return this.JU}XL(){return this.mxt.XL()}bIt(){return this.JU&&this.JU.vIt()}fdt(){return this.D_t}Tk(){return this.D_t.Tk()}J6(){return this.$Tt}mz(t){this.O_t=t}pz(){return this.O_t}gz(t){this.L_t=t}MIt(){return this.L_t}xIt(){return this.N_t}GIt(){return this.N_t.length}P1t(){return this.b_t}Nbt(t){return this.v_t.has(t)}Hmt(){return this.y_t}kz(t){return this.w_t.has(t)}xwt(t){return this.x_t[t]}ywt(t){return this.M_t[t]}_yt(t){this.F_t.set(t.Ryt().toLowerCase(),t)}Iyt(t){return!!this.kyt(t)}kyt(t){const s=this.F_t.get(t.toLowerCase());return s&&s.Ju()?s:null}TIt(){return this.N_t}_It(t){if(this.N_t)return this.B_t.get(t.toLowerCase())||null;throw new Error("no animations")}IIt(t){if(this.N_t)return this.W_t.get(t)||null;throw new Error("no animations")}CIt(t){if(this._It(t))throw new Error(`animation name '${t}' already exists`);const s=G.RTt.NTt(this.FO(),t);return this.N_t.push(s),this.B_t.set(s.Jc().toLowerCase(),s),this.W_t.set(s.zz(),s),s}EIt(t){const s=this._It(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.N_t.length)throw new Error("cannot remove last animation");const i=this.N_t.indexOf(s);this.N_t.splice(i,1),this.B_t.delete(s.Jc().toLowerCase()),this.W_t.delete(s.zz()),s.nn()}PIt(){if(this.N_t)return this.N_t[0];throw new Error("no animations")}RIt(){return this.PIt().HTt(0)}AIt(){if(this.N_t){const t=this.RIt().J6();return[t.Qp(),t.fm()]}return this.$Tt?[this.$Tt.Qp(),this.$Tt.fm()]:[100,100]}ck(){if(this.mxt.jL())return this.A7[0];throw new Error("not a single-global plugin")}Gk(){return this.A7}*instances(){yield*this.A7}*xk(){yield*this.A7,yield*this.tf.Hvt(this)}Ik(){return this.A7.length}xz(t){this.A7.push(t)}FIt(){this.V_t=!0}hX(){if(this.V_t&&!this.o_t){let s=this.A7,i=0;for(let t=s.length;i<t;++i)s[i].DIt(i);const t=this.tf.OIt();for(const e of t)e.SN()===this&&e.DIt(i++);this.V_t=!1}}LIt(t){const s=this.A7;if(t<s.length)return s[t];t-=s.length;const i=this.tf.OIt();for(const e of i)if(e.SN()===this){if(0===t)return e;--t}return null}Tvt(t){if(t&&t.RN()&&t.SN()!==this)for(const i of t.AN())if(i.SN()===this)return i;const s=this.Tk().Gk();return s.length?s[0]:null}Mk(t){const s=this.Tk().Gk();return 0<s.length?s[t.ON()%s.length]:null}*$vt(t,s){let i=this.Tk().Gk(),e=i.length,h=s.Tk(),n=s.Tk().Gk(),r=n.length,o=t.ON(),a=(!s.Lz()&&h.rft()||(o=n.indexOf(t)),Math.ceil(e/r)),l=e%r,u=0,c;c=0==l||o<l?(u=o*a,a):(u=l*a+(o-l)*(a-1),a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}$St(t){this.vxt?.$St(t)}Ygt(){if(this.T_t&&!this.o_t){this.hX();const t=this.Tk(),s=t.pft(),i=t.rft(),e=this.tf.d1t(),h=e&&e.KF()&&e.KF().xft();for(const n of this.__t.iX())if(n!==this){n.hX();const r=n.Tk();if(r.dft(i),!i){const o=r.pft();G.Lr(o);for(const a of s)o.push(n.LIt(a.ON()));if(h){const l=t.mft(),u=r.mft();G.Lr(u);for(const c of l)u.push(n.LIt(c.ON()))}}}}}QSt(t,s){for(const i of this.y$().iX()){const e=i.Tk();t?G.Or(e.mft(),s):G.Or(e.pft(),s)}}kIt(){return this.p_t}NIt(t){this.g_t=!!t}BIt(){if(this.g_t&&this.RMt){for(const t of this.A7)t.dO().WIt();for(const s of this.tf.OIt())s.SN()===this&&s.dO().WIt();this.g_t=!1}}jIt(s,t,i){if(t){const e=this.H_t.get(t);e&&(e.delete(s),0===e.size)&&this.H_t.delete(t)}if(i){let t=this.H_t.get(i);t||(t=new Set,this.H_t.set(i,t)),t.add(s)}}HIt(){if(this.Lz()){const t=new Set;for(const s of this.y_t)for(const i of s.HIt())t.add(i);return t.values()}return this.H_t.keys()}HSt(){return this.gSt||(this.gSt=new Map),this.gSt}VSt(){return this.ySt||(this.ySt=new Map),this.ySt}VIt(){return this.pIt(G.Iat.solid)}UIt(){return this.pIt(G.Iat.jumpthru)}zIt(){return this.pIt(G.Iat.NoSave)}bz(){return this.pIt(G.Iat.Persist)}aq(){const t={instances:this.A7.map(t=>t.wv())};return this.gSt&&this.gSt.size&&(t.ex=G.Oo(this.gSt)),t}lq(t,e){this.gSt&&(this.gSt.clear(),this.gSt=null);const s=t.ex,h=(s&&(this.gSt=G.Lo(s)),this.A7),n=t.instances;for(let t=0,s=Math.min(h.length,n.length);t<s;++t)h[t].Sv(n[t]);for(let t=n.length,s=h.length;t<s;++t)this.tf._N(h[t]);for(let i=h.length,t=n.length;i<t;++i){let t=n[i],s=null;if(!this.VL()||(s=this.tf.zD().o$(t.w.l))){const r=this.tf.vz(this.O_t||this,s,!1,0,0,!0);r.Sv(t),e&&e.add(r)}}this.Y_t=n,this.FIt()}JIt(){return this.Y_t}qIt(){this.Y_t=null}$It(){for(let t=0,s=this.A7;t<s;++t)this.A7[t].$It()}ak(){return this.J_t}HF(){return this.Jq}XIt(){return this.q_t}Ck(t){this.q_t=t}EX(t){const s=this.tf,i=s.g4()&&!s.JF().Fk();i&&ma.StartMeasuringScriptTime(),this.Jq.dispatchEvent(t),i&&ma.AddScriptTime()}}}{const ya=self.Ds;ya.YIt=class extends ya.tn{constructor(t,s){super(),this.tf=t,this.ZIt=s;for(const i of this.ZIt)i.K_t(this)}nn(){this.tf=null}FO(){return this.tf}g$(){return this.ZIt}iX(){return this.ZIt}rX(){return this.ZIt.some(t=>t.VL())}}}{let S=self.Ds,h=self.C3Debugger,r=S.NL,o=[],a=0,b=new WeakMap,e=new WeakMap;S.Instance=class extends S.tn{constructor(t){if(S.NL!==r)throw new Error("invalid addon manager");super(),this.tf=t.runtime,this.KIt=t.wN,this.yst=null,this.QIt=null,this.tCt=null,this.sCt=0,this.iCt=t.uid,this.eCt=a++,this.ebt=0,this.hCt=null;const s=S.Zr(t.tags),i=(0<s.length&&(this.hCt=new Set(s)),this.nCt=o,this.rCt=o,this.KIt.SIt()),e=(0<i.length&&(this.rCt=i.map((t,s)=>S.hn(S.oCt,{runtime:this.tf,g6:t,S6:this,index:s}))),this.aCt=this.KIt.RN()?[]:null,this.lCt=-1,this.d_t=null,this.pk());if(e.Pb()&&(this.ebt|=4),e.VL())if(this.yst=S.hn(S.uCt,this,t.L4),t.cCt)this.yst.fCt(t.cCt);else{this.yst.dCt();const[h,n]=this.KIt.AIt();this.yst.jI(h,n),this.SN().bIt()&&this.yst.O4().pCt()}t.mCt?this.gCt(t.mCt):this.yCt()}nn(){if(this.tCt&&(this.tCt.GN(),this.tCt=null),0<this.rCt.length){for(const i of this.rCt)i.nn();S.Lr(this.rCt)}this.QIt&&(this.QIt.nn(),this.QIt=null);const t=b.get(this),s=(t&&(t.clear(),b.delete(this)),e.get(this));s&&(s.clear(),e.delete(this)),this.aCt&&S.Lr(this.aCt),this.d_t&&(this.d_t.nn(),this.d_t=null),this.hCt&&this.hCt.clear(),this.hCt=null,this.tf=null,this.KIt=null,0<this.nCt.length&&S.Lr(this.nCt),this.yst&&(this.yst.nn(),this.yst=null)}gCt(t){0<t.length&&(this.nCt=[],S.Wr(this.nCt,t))}yCt(){const s=this.KIt.iIt();if(0!==s){this.nCt=[];const i=[0,0,""];for(let t=0;t<s;++t)this.nCt.push(i[this.KIt.Jst(t)])}}aIt(t,i){if(this.QIt)throw new Error("already got sdk instance");for(let t=0,s=this.rCt.length;t<s;++t){const e=this.rCt[t];e.aIt(i?i[t]:null)}const s=this.pk().LSt();if(s<2){if(this.QIt=S.hn(this.KIt.dIt(),this,t),!(this.QIt instanceof S.Sxt))throw new Error("sdk type must derive from SDKInstanceBase");!this.pk().VL()&&this.KIt.XIt()&&this.lO()}else{const h=this.pk().QMt();this.wCt(h.Instance,t)}}a6(){return this.QIt??this.tCt}dO(){return this.yst}FO(){return this.tf}MD(){return this.lCt}NN(){const t=this.lCt;return-1===t?this.FO().MD():t}xD(t){((t=+t)<0||!isFinite(t))&&(t=0),this.lCt=t,this.SN().bIt()&&this.tf.SCt(this,!0)}WN(){this.lCt=-1,this.SN().bIt()&&this.tf.SCt(this,!1)}Z9(){return this.tf.bCt(this)}Lf(){return this.d_t||(this.d_t=S.hn(S.Event.Lf)),this.d_t}qv(t){this.QIt?this.QIt.qv(t):this.tCt.pj(this.tf.vL().fIt())}KMt(t){this.QIt.KMt(t)}vCt(){this.ebt|=2}MCt(){return 0!=(2&this.ebt)}xCt(){this.ebt|=1}jj(){return 0!=(1&this.ebt)}Pb(){return 0!=(4&this.ebt)||this.QIt.Pb()}GCt(){this.ebt|=32}j9(){return 0!=(32&this.ebt)}TCt(){return 0!=(8&this.ebt)}_Ct(t){t?this.ebt|=8:this.ebt&=-9}ICt(){return 0!=(16&this.ebt)}CCt(t){t?this.ebt|=16:this.ebt&=-17}ECt(){return 0!=(64&this.ebt)}PCt(t){t?this.ebt|=64:this.ebt&=-65}RCt(t,s){t<<=16,s?this.ebt|=t:this.ebt&=~t}ACt(t){return 0!=(this.ebt&t<<16)}sGt(){return this.QIt.sGt()}iGt(){return this.QIt.iGt()}eGt(){return this.QIt.eGt()}hGt(){return this.QIt.hGt()}rGt(){return this.QIt.rGt()}$bt(t){return this.QIt.$bt(t)}SN(){return this.KIt}B9(){return this.QIt.B9()}Vvt(t){return t.Lz()?t.kz(this.SN()):this.SN()===t}FCt(h,t,s){const i=(t,s)=>{const i=s||t.SN(),e=h.get(i);e?e.add(t):h.set(i,new Set([t]))};if(i(this,t),this.RN())for(const e of this.AN())i(e);if(s)for(const n of this.vB())i(n)}DCt(){if(!this.pk().QL())throw new Error("object does not support scene graph")}_B(){return null!==this.dB()}dB(){const t=this.dO();if(!t)return null;const s=t.dB();return s?s.kW():null}mB(){const t=this.dO();if(!t)return null;const s=t.mB();return s?s.kW():null}*gB(){const t=this.dO();if(t)for(const s of t.gB())yield s.kW()}OCt(t){if(t)for(const s of this.children())if(s===t)return!0;return!1}fq(){const t=this.dO();return!!t&&t.fq()}LCt(t){const s=this.dO();if(!s)return[];const i=t.Jc();return s.mX().map(t=>t.kW()).filter(t=>t.SN().Jc()===i)}mX(){const t=this.dO();return t?t.mX().map(t=>t.kW()):[]}*children(){const t=this.dO();if(t)for(const s of t.children())yield s.kW()}*vB(){const t=this.dO();if(t)for(const s of t.vB())yield s.kW()}wB(){const t=this.dO();return t?t.wB():0}kCt(){return[...this.gB()].length}qvt(){const t=this.dO();return t?t.qvt():0}bB(t){const s=this.dO();if(!s)return null;const i=s.bB(t);return i?i.kW():null}NCt(){const t=this.dO();if(!t)return NaN;const s=t.dB();return s?s.BCt(t):NaN}WCt(t){for(const s of this.dO().mX())if(s.kW().FN()===t)return!0;return!1}xB(t,s){this.DCt(),t.DCt(),this.dO().xB(t.dO(),s||{})}GB(t){const s=this.dO();s&&s.GB(t.dO())}JB(){const t=this.dO();return!!t&&t.JB()}V$(){const t=this.dO();if(t){const s=t.jCt();if(s)for(const i of s){const e=this.tf.aO(i[2]);if(e){const h=i[3];this.xB(e,{CB:!!(h>>0&1),PB:!!(h>>1&1),AB:!!(h>>2&1),OB:!!(h>>3&1),kB:!!(h>>4&1),zB:!!(h>>5&1),BB:!!(h>>6&1),jB:!!(h>>7&1),VB:!!(h>>8&1)})}}}}U$(t,s){const i=t.get(this);if(i)for(const e of i.sceneGraphJson.children){const h=s.get(e.index);if(h){const n=e.flags;this.xB(h,{CB:!!(n>>0&1),PB:!!(n>>1&1),AB:!!(n>>2&1),OB:!!(n>>3&1),kB:!!(n>>4&1),zB:!!(n>>5&1),BB:!!(n>>6&1),jB:!!(n>>7&1),VB:!!(n>>8&1)})}}}kN(){const t=this.tf.HCt();return t?t.Slt(this):""}RN(){return null!==this.aCt}eX(t){this.aCt.push(t)}EN(){return this.aCt}VCt(t){return!!this.UCt(t)}UCt(t){const s=this.AN();if(null===s||0===s.length)return!1;for(const i of s)if(i.SN()===t)return i;return null}AN(){return this.aCt}tmt(){for(const t of this.AN())t.SN().Tk().gft(t)}XSt(){for(const t of this.AN())t.SN().Tk().cft(t)}YSt(t){for(const s of this.AN())s.SN().Tk().pft()[t]=s}KSt(){for(const t of this.AN())t.SN().Tk().fft(t)}ZSt(t){for(const s of this.AN())s.SN().Tk().mft()[t]=s}pk(){return this.KIt.pk()}DIt(t){this.sCt=t}ON(){return this.KIt.hX(),this.sCt}FN(){return this.iCt}zCt(){return this.eCt}JCt(t){t?this.UN(new Set(t)):this.hCt=null}UN(t){if(0===t.size)this.hCt=null;else{this.hCt?this.hCt.clear():this.hCt=new Set;for(const s of t)this.hCt.add(s)}}HN(){return this.hCt??new Set}m2t(){return Array.from(this.HN()).join(" ")}w2t(t){t=Math.floor(t);for(const s of this.HN()){if(0===t)return s;--t}return""}yht(){return this.rCt}qCt(t){if(t)for(const s of this.rCt)if(s.m6()instanceof t)return s;return null}Cat(t){if(!t)return null;const s=this.qCt(t);return s?s.a6():null}ght(i){const e=this.rCt;for(let t=0,s=e.length;t<s;++t)if(e[t].w6().zz()===i)return t;return-1}$Ct(){return this.nCt}yIt(){return this.KIt.yIt()}XCt(){return this.nCt.length}Cnt(t){const s=this.nCt;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}mwt(t){return this.nCt[t]}YCt(t){const s=this.nCt[t];return 0===this.KIt.Jst(t)?!!s:s}Ent(t,s){const i=this.nCt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=this.KIt.Jst(t);switch(e){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}brt(t,s){if(0!==s){const i=this.nCt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}}HSt(){let t=b.get(this);return t||(t=new Map,b.set(this,t)),t}VSt(){let t=e.get(this);return t||(t=new Map,e.set(this,t)),t}ZCt(t){const s=this.SN();if(s.HF().jf(t))return!0;for(const i of s.P1t())if(i.HF().jf(t))return!0;return!!this.tf.HF().jf(t)}Ak(){const t=new Set,s=(t.add(this),this.dO());if(s&&s.fq())for(const i of this.vB())if(t.add(i),i.RN())for(const e of i.AN())t.add(e);if(this.RN())for(const h of this.AN())t.add(h);for(const n of t.values())n.z$();this.J$()}KCt(){this.KIt.XIt()&&this.lO();for(const t of this.rCt)t.jGt()}QCt(){this.KCt()}z$(){if(this.KCt(),this.ZCt("instancecreate")){const t=this.SN(),s=new S.Event("instancecreate");s.S6=this.lO(),t.EX(s);for(const i of t.P1t())i.EX(s);this.tf.EX(s)}this.tf.r4(this.pk().Wdt().Z$.v2t,this,null)}J$(){if(this.pk().QL()){if(this.EX(new S.Event("hierarchyready")),this.ZCt("hierarchyready")){const t=this.SN(),s=new S.Event("hierarchyready");s.S6=this.lO(),t.EX(s);for(const i of t.P1t())i.EX(s);this.tf.EX(s)}this.tf.r4(this.pk().Wdt().Z$.Wvt,this,null)}}tEt(){this.tf.r4(this.pk().Wdt().Z$.M2t,this,null)}sEt(t){if(this.tCt){const s=new S.Event("destroy");s.iEt=t,this.EX(s)}if(this.ZCt("instancedestroy")){const i=this.SN(),e=new S.Event("instancedestroy");e.S6=this.lO(),e.iEt=t,i.EX(e);for(const h of i.P1t())h.EX(e);this.tf.EX(e)}}eEt(){return this.QIt?this.QIt.Hxt():this.tCt.v4()}wv(t="full",s=null){const i={},e=("full"===t?i.uid=this.FN():i.c3=!0,this.HN());if(0<e.size&&(i.tags=Array.from(e)),"visual-state"!==t){const n=b.get(this);if(n&&n.size&&(i.ex=S.Oo(n)),-1!==this.MD()&&(i.mts=this.MD()),0<this.KIt.iIt()){const r={},o=this.KIt.mIt();for(let t=0,s=this.nCt.length;t<s;++t)r[o[t].toString()]=this.nCt[t];i.ivs=r}if(this.rCt.length){const a={};for(const l of this.rCt){const u=l.wv(t);u&&(a[l.w6().zz().toString()]=u)}i.behs=a}}this.yst&&(i.w=this.yst.aq(t,s));const h=this.QIt?this.QIt.wv():this.tCt.M4();return h&&(i.data=h),i}TY(t="full",s){this.yst&&this.yst.TY(t)}IY(t,s="full",i=null){this.yst&&this.yst.IY(t,s,i)}hEt(t,s="full",i=null){this.yst&&this.yst.hEt(t,s,i)}$It(){this.pk().VL()&&this.yst.$It()}Sv(s,t="full",i){if("full"===t)this.iCt=s.uid;else if(!s.c3)return;if(this.JCt(s.tags),"visual-state"!==t){let t=b.get(this);t&&(t.clear(),b.delete(this));const h=s.ex,n=(h&&(t=S.Lo(h),b.set(this,t)),this.lCt=s.hasOwnProperty("mts")?s.mts:-1,s.ivs);if(n)for(const[r,o]of Object.entries(n)){const a=parseInt(r,10),l=this.KIt.gIt(a);if(!(l<0||l>=this.nCt.length)){let t=o;null===t&&(t=NaN),this.nCt[l]=t}}}if(this.pk().VL()){const u=s.w;if(u){const c=u.l;if(this.yst.pO().zz()!==c){const f=this.yst.pO(),d=f.XD().o$(c);d?(this.yst.wO(d),f._z(this,!0),d.xz(this,!0),d.SO(this),this.yst.N4()):"full"===t&&this.tf._N(this)}this.yst.lq(u,t)}}if("visual-state"!==t){const p=s.behs;if(p)for(const[m,g]of Object.entries(p)){const y=parseInt(m,10),w=this.ght(y);w<0||w>=this.rCt.length||this.rCt[w].Sv(g,t)}}const e=s.data;e&&(this.QIt?this.QIt.Sv(e,t):this.tCt.x4(e))}lO(){return this.tCt||this.wCt()}Jxt(){return!!this.tCt}wCt(t,s){const i=this.yst?t?self.aj:self.e6:t?self.$N:self.yN,e=t||this.QIt.QMt(),h=this.KIt.XIt(),n=h||e||i,r=this.pk().LSt();if(S.NL.ixt(this,r),S.NL.eTt(s),this.tCt=new n,S.NL.hTt(),S.NL.hxt(r),e&&!(this.tCt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(h){const o=e||i;if(!(this.tCt instanceof o))throw new TypeError(`setInstanceClass(): class '${h.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.tCt}bN(t){if(0!==this.nCt.length){const i={},e=this.KIt.wIt();for(let t=0,s=e.length;t<s;++t)i[e[t]]={configurable:!1,enumerable:!0,get:S.Instance.prototype.YCt.bind(this,t),set:S.Instance.prototype.Ent.bind(this,t)};const s=Object.create(Object.prototype,i);t.nEt={value:s,writable:!1}}}vN(t){const s=this.rCt;if(0!==s.length){const i={};for(const h of s)i[h.w6().x1t()]={value:h.Gxt(),writable:!1};const e=Object.create(Object.prototype,i);t.Wpt={value:e,writable:!1}}}EX(t){if(this.Jxt()){const s=this.lO(),i=(t.S6=s,this.tf),e=i.g4()&&!i.JF().Fk();e&&h.StartMeasuringScriptTime(),s.dispatchEvent(t),e&&h.AddScriptTime()}}}}{const wa=self.Ds;wa.yX=class extends wa.tn{constructor(e){super(),this._v=e,this.rmt=null,this.rEt=[],this.oEt=e.Qp(),this.aEt=e.fm(),this.lEt=1,this.uEt=1,this.cEt=0,this.fEt=1,this.dEt=e.gP(),this.pEt=null,this.mEt=null,this.gEt=NaN,this.yEt=!1,this.gq=NaN,this.yq=NaN,this.wEt=t=>{if(t.S6===this.rmt.kW()){const s=e.FO(),i=(s.Lf().removeEventListener("instancecreate",this.wEt),this.rmt.kW().a6());this.yEt=!!i.oit(),this.gq=this.yEt?i.rit():NaN,this.yq=this.yEt?i.lit():NaN}}}nn(){this.rmt=null,this.pEt=null,this.mEt=null,this.gEt=NaN,this.yEt=!1,this.gq=NaN,this.yq=NaN,wa.Lr(this.rEt)}SEt(t){if(this.fEt=this._v.gP(),this.dEt=this.fEt,this.rmt=t,this.cEt=t?t.zk():0,this.rmt){const s=this._v,i=s.FO(),e=this.rmt.kW().pk().LSt();if(e<2){const h=this.rmt.kW().a6();h?(this.yEt=!!h.oit(),this.gq=this.yEt?h.rit():NaN,this.yq=this.yEt?h.lit():NaN):this.rmt.kW().jj()||i.Lf().addEventListener("instancecreate",this.wEt)}else this.yEt=!1,this.gq=NaN,this.yq=NaN}else this.yEt=!1,this.gq=NaN,this.yq=NaN}dB(){return this.rmt}fq(){return 0<this.rEt.length}mX(){return this.rEt}bEt(){this.fq()&&1!==this.rEt.length&&(this.mEt?this.rEt.sort((t,s)=>{const i=this.mEt.get(t.kW()),e=this.mEt.get(s.kW());return wa.ae(i)&&wa.ae(e)?i-e:0}):this.rEt.sort((t,s)=>{const i=t.Bnt().vEt(),e=s.Bnt().vEt();return wa.ae(i)&&wa.ae(e)?i-e:0}))}vEt(){return this.gEt}Wnt(){return this.lEt}MEt(t){this.lEt=t}Hnt(){return this.uEt}xEt(t){this.uEt=t}Ynt(){return this.dEt}gvt(){return this.fEt}GEt(t){this.fEt=t}Nnt(){return 0===this.oEt?Number.EPSILON:this.oEt}jnt(){return 0===this.aEt?Number.EPSILON:this.aEt}TEt(){if(this._v.DB()){let t=this.rmt,s=t.Qp(),i=t.Bnt().Nnt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.yEt?1+s/this.gq:s/i}return 1}_Et(){if(this._v.LB()){let t=this.rmt,s=t.fm(),i=t.Bnt().jnt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.yEt?1+s/this.yq:s/i}return 1}IEt(){return 0}CEt(){return{sw:this.oEt,sh:this.aEt,sx:this.lEt,sy:this.uEt,psa:this.cEt,oo:this.fEt,so:this.dEt,pi:this._v.kW().NCt()}}aq(t,s=null){const i=this.CEt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.EEt(t),c:this.PEt(t)})}REt(t){let s="";return t.EB()&&(s+="x"),t.RB()&&(s+="y"),t.DB()&&(s+="w"),t.LB()&&(s+="h"),t.NB()&&(s+="a"),t.WB()&&(s+="z"),t.JB()&&(s+="d"),t.HB()&&(s+="o"),t.UB()&&(s+="v"),s}EEt(t){return this.rmt&&this.rmt.kW()&&!this.rmt.kW().jj()?this.AEt(this.rmt,this._v,t):null}PEt(s){return this.rEt.map(t=>this.AEt(t,t,s)).filter(t=>t)}AEt(t,s,i){const e=t.kW();if(e&&e.jj())return null;const h={};return h.uid=e.FN(),h.f=this.REt(s),h.offsets=s.FEt(),h.data=wa.yX.DEt(e),h.oci=e.SN().dF(),"state"===i?(h.inst=e.wv("full",{selfOnly:!0}),h.instIndex=NaN):(h.instIndex=e.SN().Gk().indexOf(e),h.inst=null),h}lq(t){this.oEt=t.sw,this.aEt=t.sh,this.lEt=t.sx,this.uEt=t.sy,this.cEt=t.psa,this.fEt=t.oo,this.dEt=t.so,this.gEt=wa.ae(t.pi)?t.pi:NaN}OEt(t,s){if(!t&&!s&&this.pEt)for(const i of this.pEt)i.jj()||i._B()||i.FO()._N(i);this.pEt=t,this.mEt=s}IY(t,s){const i=this._v,e=i.FO(),h=new Set;if(t.p&&!this.rmt){const o=t.p.uid,a=e.aO(o);if(s?.R2t,a){const l=a.dO();if(a.OCt(i.kW()))this.rmt=l;else{a.WCt(i.kW().FN())?e._N(i.kW()):a.xB(i.kW(),this.LEt(t.p.f)),h.has(i)||(i.kEt(t.p.offsets),this.NEt(a,t.p,s)),h.add(i);const u=a.dO();u.Bnt().bEt()}}else if(wa.ae(t.p.oci)){const c=e.fz(t.p.oci),f=(e.YV(),e.Ek(c,i.pO(),0,0,!0));if(s?.R2t,f){const d=this.BEt(t.p,e),p=(d&&f.Sv(d),f.dO()),m=(p.pO().Pk(f),f.xB(i.kW(),this.LEt(t.p.f)),f.dO());m.Bnt().bEt()}}}const n=[];for(const g of t.c){const y=g.uid,w=e.aO(y);w&&n.push(w)}let r=0;for(const S of t.c){const b=S.uid,v=e.aO(b);if(s?.R2t,v){if(this.pEt){if(this.pEt.includes(v)){const T=v;if(T.SN()!==v.SN()){r++;continue}if(T.jj()){r++;continue}const _=t.c[r];if(!s?.R2t&&this.WEt(T,n,i)){this.jEt(r,_,i,h,s),r++;continue}if(T._B()&&T.dB()!==i.kW()){const I=this.HEt(_,s);this.VEt(I,_,h,s),r++;continue}this.VEt(T.dO(),_,h,s,!0),r++;continue}if(this.pEt[r]){const C=this.pEt[r];if(C.SN()!==v.SN()){r++;continue}if(C.jj()){r++;continue}const E=t.c[r];if(!s?.R2t&&this.WEt(C,n,i)){this.jEt(r,E,i,h,s),r++;continue}if(C._B()&&C.dB()!==i.kW()){const P=this.HEt(E,s);this.VEt(P,E,h,s),r++;continue}this.VEt(C.dO(),E,h,s,!0),r++;continue}}const M=v.SN(),x=this.UEt(n,M),G=i.kW().LCt(M).length;if(x===G){const R=i.kW().bB(r);if(R){const A=R.dO();A&&(h.has(A)||(A.kEt(S.offsets),this.NEt(R,S,s)),h.add(A))}r++;continue}if(v._B()&&v.dB()!==i.kW()){const F=this.HEt(S,s);this.VEt(F,S,h,s),r++;continue}this.VEt(v.dO(),S,h,s)}else if(this.pEt&&this.pEt[r]){const D=this.pEt[r],L=e.fz(this.zEt(S));if(D.SN()!==L){r++;continue}if(D.jj()){r++;continue}const O=t.c[r];if(!s?.R2t&&this.WEt(D,n,i)){this.jEt(r,O,i,h,s),r++;continue}if(D._B()&&D.dB()!==i.kW()){const k=this.HEt(O,s);this.VEt(k,O,h,s),r++;continue}this.VEt(D.dO(),O,h,s)}else{const N=this.HEt(S,s);this.VEt(N,S,h,s)}r++}}WEt(t,s,i){const e=t.SN(),h=this.UEt(s,e),n=i.kW().LCt(e).length;return h===n}jEt(t,s,i,e,h){const n=i.kW().bB(t,s);if(n){const r=n.dO();r&&(e.has(r)||(r.kEt(s.offsets),this.NEt(n,s,h)),e.add(r))}}LEt(t){const s={};return s.CB=t.includes("x"),s.PB=t.includes("y"),s.AB=t.includes("w"),s.OB=t.includes("h"),s.kB=t.includes("a"),s.BB=t.includes("z"),s.zB=t.includes("d"),s.jB=t.includes("o"),s.VB=t.includes("v"),s}zEt(t){return wa.ae(t.oci)?t.oci:t[1]}HEt(e,h){if(wa.ae(e.oci)){let t=this._v,s=t.FO(),i;if(e.data)i=s.vz(e.data,t.pO(),!1,0,0,!1,!0);else{const n=s.fz(e.oci);i=s.Ek(n,t.pO(),0,0,!0)}if(h?.R2t,i){const r=this.BEt(e,s),o=(r&&i.Sv(r),i.dO());return o.pO().Pk(i,!0),o}}}VEt(t,s,i,e,h=!0){const n=this._v,r=n.xB(t,this.LEt(s.f));r&&h&&(i.has(t)||(t.kEt(s.offsets),this.NEt(t.kW(),s,e)),i.add(t)),this.bEt()}NEt(t,s,i){let e=this.BEt(s,this._v.FO());e&&((e=JSON.parse(JSON.stringify(e))).w=null,t.Sv(e))}UEt(t,s){return t.filter(t=>t.SN().Jc()===s.Jc()).length}BEt(t,s){if(wa.ae(t.instIndex)){const i=s.fz(t.oci),e=i.JIt();return e?e[t.instIndex]:null}return wa.we(t.inst)?JSON.parse(t.inst):t.inst||void 0}static DEt(t){let s=t.dO().pO().yz(t.FN());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const e of[...t.mX()]){const h=e.dO();i.push([h.XD().zz(),h.pO().dF(),e.FN(),wa.yX.gX(h),e.SN().RN()?1:0,h.mO(),wa.yX.DEt(e)])}return wa.De(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=wa.yX.JEt(),s[0][14][1]=i,s[0][14][2]=t.dO().mO()),s}static gX(t){let s=0;return(s|=Number(t.UB())<<8)|Number(t.HB())<<7|Number(t.WB())<<6|Number(t.JB())<<5|Number(t.NB())<<4|Number(t.LB())<<3|Number(t.DB())<<2|Number(t.RB())<<1|Number(t.EB())<<0}static JEt(t){let s=0;return s,511}}}{let d=self.Ds,t=self.ys,n=(t.Ts,d.hn(d.Rect)),r=d.hn(d.$l),s=d.hn(d.Event,"bboxchange",!1),f=d.hn(d.Wo,0,0,0,0),u=d.hn(d.Cu),i=d.hn(d.Wo,1,1,1,1),o=d.hn(d.Rect,0,0,-1,-1),h=d.hn(d.Rect,0,0,-1,-1),p=new Set(["absolute","relative"]),e=[],m=!0,g=new WeakMap,a=new WeakMap;d.uCt=class extends d.tn{constructor(t,s){super(),this.bi=t,this.qct=t.SN(),this.tf=t.FO(),this.qEt=s,this.qct.jIt(this,null,s),this.$Et=-1,this.XEt=-1,this.ebt=196635,this.qct.pk().qL()&&(this.ebt|=128),this.Xa=NaN,this.Ya=NaN,this.Vb=NaN,this.YEt=NaN,this.ZEt=NaN,this.hM=NaN,this.Uo=NaN,this.KEt=NaN,this.QEt=NaN,this.tPt=NaN,this.sPt=NaN,this.iPt=d.hn(d.Rect),this.ePt=d.hn(d.$l),this.hPt=h,this.nPt=o,this.rPt=null,this.oPt=null,this.aPt=null,this.Hb=i,this.lPt=i,this.uPt=null,this.cPt=null,this.bi.SN().bIt()&&(this.cPt=d.hn(d.fPt,this.bi,this)),this.dPt=null,this.pEt=null,this.mEt=null,this.pPt=-1,this.mPt=null}xCt(){this.ebt|=256}nn(){if(this.qct.jIt(this,this.qEt,null),this.uPt&&(this.tf.Tb().Yw(this.uPt),this.uPt=null),this.rPt=null,this.oPt&&(this.oPt.gPt.nn(),this.oPt=null),this.aPt&&(this.aPt.clear(),this.aPt=null),this.YB(),this.cPt&&this.cPt.nn(),this._B()&&this.dB().GB(this),this.fq()){const t=[...this.mX()];for(const s of t)this.GB(s)}this.yPt(),this.wPt(),g.delete(this),a.delete(this),this.bi=null,this.qct=null,this.tf=null,this.qEt=null}fCt(t){if(m=!1,this.B4(t[0],t[1]),this.uv(t[2]),this.jI(t[3],t[4]),this.hM=0,this.qL()?this.Uk(t[6]):this.Uo=0,f.ka(t[7]),this.SPt(f),this.Knt(t[8]),this.trt(t[9]),this.zb(t[10]),this.cPt&&this.cPt.bPt(t[12]),t[14]&&g.set(this,{vPt:t[14][1],MPt:t[14][2]}),t[15]){const s=t[15],e=(this.$B(s[0],s[1]),this.s6()),h=s[2];for(let i=0,t=h.length;i<t;++i){const n=h[i];for(let t=0,s=n.length;t<s;++t){const r=n[t],o=e.zv(t,i);o.nv(r[0]),o.av(r[1]),o.uv(r[2]),o.dv(r[3]),o.mv(r[4])}}}if(t[16]){const i=t[16][0],a=t[16][1],l=!!a,u=!l,c=this.tf.HCt();l&&c&&c.wlt(this.kW(),a),u&&c&&c.wlt(this.kW(),i)}m=!0,this.xPt()}dCt(){this.Xa=0,this.Ya=0,this.Vb=0,this.YEt=0,this.ZEt=0,this.hM=0,this.Uo=0,this.KEt=0,this.QEt=1,this.tPt=0,this.sPt=0,this.xPt()}FO(){return this.tf}SN(){return this.qct}kW(){return this.bi}GPt(){return this.NB()?this.TPt(this.dB()._Pt()-this.dPt.IEt()):0}nv(t){if(t=+t,this.EB()){const s=this.dPt,i=t-this.hv(),e=-this.GPt();0==e?this.Xa+=i/s.TEt():(this.Xa+=Math.cos(e)*i/s.TEt(),this.RB()&&(this.Ya+=Math.sin(e)*i/s._Et()))}else this.Xa=t}Dnt(t,s=!1){t=+t,!s&&this.EB()?this.nv(this.hv()+t):this.Xa+=t}hv(){if(this.EB()){let t=this.Xa,s=this.dPt,i=this.dB(),e=this.GPt();return 0===e?t*=s.TEt():(t=t*s.TEt()*Math.cos(e),this.RB()&&(t-=this.Ya*s._Et()*Math.sin(e))),i.hv()+t}return this.Xa}av(t){if(t=+t,this.RB()){const s=this.dPt,i=t-this.ov(),e=-this.GPt();0==e?this.Ya+=i/s._Et():(this.EB()&&(this.Xa-=Math.sin(e)*i/s.TEt()),this.Ya+=Math.cos(e)*i/s._Et())}else this.Ya=t}Ont(t,s=!1){t=+t,!s&&this.RB()?this.av(this.ov()+t):this.Ya+=t}ov(){if(this.RB()){let t=this.Ya,s=this.dPt,i=this.dB(),e=this.GPt();return 0===e?t*=s._Et():(t=t*s._Et()*Math.cos(e),this.EB()&&(t+=this.Xa*s.TEt()*Math.sin(e))),i.ov()+t}return this.Ya}B4(t,s){if(t=+t,s=+s,this.IPt()){const i=this.EB(),e=this.RB(),h=this.dPt,n=t-this.hv(),r=s-this.ov(),o=-this.GPt();if(0==o)i?this.Xa+=n/h.TEt():this.Xa=t,e?this.Ya+=r/h._Et():this.Ya=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.Xa+=e?(l*n-a*r)/h.TEt():l*n/h.TEt():this.Xa=t,e?this.Ya+=i?(a*n+l*r)/h._Et():l*r/h._Et():this.Ya=s}}else this.Xa=t,this.Ya=s}CPt(){return[this.hv(),this.ov()]}H4(t,s){t=+t,s=+s,this.IPt()?this.B4(this.hv()+t,this.ov()+s):(this.Xa+=t,this.Ya+=s)}Jbt(t,s){return this.hv()===t&&this.ov()===s}uv(t){if(t=+t,this.WB()&&(t-=this.dB().lv()),this.Vb!==t){this.Vb=t,this.EPt();const s=this.pO();0!==this.Vb&&s.Ez(),s.SO(this)}}EPt(){if(this.xPt(),this.fq()){const i=this.mX();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.WB()&&e.EPt()}}}srt(t){this.uv(this.lv()+t)}lv(){return this.WB()?this.dB().lv()+this.Vb:this.Vb}U4(){return this.pO().lv()+this.lv()}oit(){const t=this.kW().pk().LSt();return t<2&&this.kW().a6().oit()}am(t){if(t=+t,this.DB()){const s=this.Qp();0===s?this.YEt=Number.EPSILON:this.YEt*=t/s}else this.YEt=t;this.PPt()}Lm(t,s){t=+t,!s&&this.DB()?this.am(this.Qp()+t):this.YEt+=t,this.PPt()}Qp(){if(this.DB()){const t=this.dB(),s=t.Qp(),i=t.Bnt().Nnt();return i===Number.EPSILON?(this.Bnt().Nnt()+s)*this.YEt:s*this.YEt}return this.YEt}tm(t){if(t=+t,this.LB()){const s=this.fm();0===s?this.ZEt=Number.EPSILON:this.ZEt*=t/s}else this.ZEt=t;this.PPt()}Vnt(t,s){t=+t,!s&&this.LB()?this.tm(this.fm()+t):this.ZEt+=t,this.PPt()}fm(){if(this.LB()){const t=this.dB(),s=t.fm(),i=t.Bnt().jnt();return i===Number.EPSILON?(this.Bnt().jnt()+s)*this.ZEt:s*this.ZEt}return this.ZEt}jI(t,s){if(t=+t,s=+s,this.DB()){const i=this.Qp();0===i?this.YEt=Number.EPSILON:this.YEt*=t/i}else this.YEt=t;if(this.LB()){const e=this.fm();0===e?this.ZEt=Number.EPSILON:this.ZEt*=s/e}else this.ZEt=s;this.PPt()}Qu(){return[this.Qp(),this.fm()]}W9(){return this.hM}RPt(t){if(t<0)throw new RangeError("invalid depth");this.hM=t}APt(){if(this._B()){const t=this.dPt;return Math.min(t.TEt(),t._Et())}return 1}qL(){return 0!=(128&this.ebt)}Uk(t){t=+t,this.qL()&&(this.NB()&&(t-=this.dB().zk()),t=d.dn(t),this.Uo!==t)&&(this.Uo=t,this.PPt())}Unt(t){0!=(t=+t)&&this.qL()&&(this.Uo=d.dn(this.Uo+t),this.PPt())}PPt(){if(this.ebt|=1<<18,this.fq()){const i=this.mX();for(let t=0,s=i.length;t<s;t++)i[t].PPt()}}zk(){return this.NB()&&this.qL()?this.TPt(d.dn(this.dB()._Pt()+this.Uo)):this.Uo}_Pt(){return this.NB()&&this.qL()?d.dn(this.dB()._Pt()+this.Uo):this.Uo}TPt(t){return this.DB()&&this.mB().Qp()<0&&(t=d.dn(d.In(t,this.mB().zk()+Math.PI))),this.LB()&&this.mB().fm()<0?d.In(t,this.mB().zk()):t}FPt(){const t=this.dB();return!!(this.DB()&&t.Qp()<0)||!!(this.LB()&&t.fm()<0)}DPt(){const t=this.dB();return!!(this.DB()&&t.Qp()<0&&this.LB()&&t.fm()<0)}OPt(){const t=this.ebt;if(0!=(t&1<<18)){const s=this.zk();this.KEt=Math.sin(s),this.QEt=Math.cos(s),this.ebt=-262145&t}}Zbt(){return this.OPt(),this.KEt}Ybt(){return this.OPt(),this.QEt}Knt(t){this.tPt=+t}Znt(t){this.tPt+=+t}Y6(){return this.tPt}trt(t){this.sPt=+t}Qnt(t){this.sPt+=+t}K6(){return this.sPt}SPt(t){this.Hb.equals(t)||(this.Hb===i?(this.Hb=d.hn(d.Wo,t),this.lPt=d.hn(d.Wo,t),this.lPt.ma()):t.ca(1,1,1,1)?(this.Hb=i,this.lPt=i):(this.Hb.set(t),this.lPt.set(t),this.lPt.ma()),this.xPt())}wP(t){if(t=d.cn(+t,0,1),this.HB()){if(this.Bnt().gvt()===t)return;this.Bnt().GEt(t),t=this.gP()}else if(this.Hb.a===t)return;this.LPt(t)}kPt(){if(this.fq()){const i=this.mX();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.LPt(e.gP())}}}LPt(t){f.Qo(this.Hb),f.a=t,this.SPt(f),this.kPt()}qnt(t){this.HB()?this.wP(this.Bnt().gvt()+t):this.wP(this.gP()+t)}gP(){return this.HB()?this.dB().gP()*this.Bnt().gvt():this.Hb.a}tB(t){this.Hb.la(t)||(f.Qo(t),f.a=this.gP(),this.SPt(f))}_nt(t,s,i){f.Jo(t,s,i),this.tB(f)}NPt(t,s,i){0===t&&0===s&&0===i||(f.Qo(this.Hb),f.r+=t,f.Na+=s,f.b+=i,this.tB(f))}Q4(){return this.Hb}XU(){return this.lPt}JB(){return 0!=(512&this.ebt)}BPt(t){this.WPt(512,t)}EB(){return 0!=(1024&this.ebt)}jPt(t){this.WPt(1024,t)}RB(){return 0!=(2048&this.ebt)}IPt(){return 0!=(3072&this.ebt)}HPt(t){this.WPt(2048,t)}DB(){return 0!=(4096&this.ebt)}VPt(t){this.WPt(4096,t)}LB(){return 0!=(8192&this.ebt)}UPt(t){this.WPt(8192,t)}NB(){return 0!=(16384&this.ebt)}zPt(t){this.WPt(16384,t)}WB(){return 0!=(32768&this.ebt)}JPt(t){this.WPt(32768,t)}HB(){return 0!=(this.ebt&1<<22)}qPt(t){this.WPt(1<<22,t)}UB(){return 0!=(this.ebt&1<<23)}$Pt(t){this.WPt(1<<23,t)}XPt(){this.ebt&=-12647937}xB(t,s){if(t===this)return!1;if(t._B())return!1;if(this.YPt(t))return!1;if(this.ZPt(t))return!1;const i=t.hv(),e=t.ov(),h=t.Qp(),n=t.fm(),r=t.zk(),o=t.lv(),a=t.gP(),l=(t.KPt(this),t.jPt(s.CB),t.HPt(s.PB),t.VPt(s.AB),t.UPt(s.OB),t.zPt(s.kB),t.JPt(s.BB),t.qPt(s.jB),t.$Pt(s.VB),t.BPt(s.zB),i-this.hv()),u=e-this.ov(),c=-this.zk(),f=Math.cos(c),d=Math.sin(c);if(s.CB&&(s.kB?t.Xa=l*f-u*d:t.Xa=l,s.AB)){const p=this.Qp()/this.dPt.Nnt();0!=p&&(t.Xa/=p)}if(s.PB&&(s.kB?t.Ya=l*d+u*f:t.Ya=u,s.OB)){const m=this.fm()/this.dPt.jnt();0!=m&&(t.Ya/=m)}if(s.AB){const g=this.Qp();0===g||g===Number.EPSILON?(t.YEt=1,t.dPt.MEt(1)):(t.YEt=h/this.Qp(),t.dPt.MEt(t.YEt))}if(s.OB){const y=this.fm();0===y||y===Number.EPSILON?(t.ZEt=1,t.dPt.xEt(1)):(t.ZEt=n/this.fm(),t.dPt.xEt(t.ZEt))}return s.kB&&(t.Uo=r-this.zk()),s.BB&&(t.Vb=o-this.lv()),s.jB&&t.dPt.GEt(a),s.VB&&t.I5(this.E5()),this.QPt(t),this.N4(),this.kPt(),!0}GB(t){if(t.dB()===this){const s=t.hv(),i=t.ov(),e=t.Qp(),h=t.fm(),n=t.zk(),r=t.lv(),o=t.gP();t.KPt(null),t.XPt(),t.B4(s,i),t.jI(e,h),t.Uk(n),t.uv(r),t.wP(o),this.tRt(t),this.N4()}}sRt(){return this.pPt}iRt(){this.eRt();const t=[...this.children()];for(const i of t)this.GB(i);const s=this.dB();s&&s.GB(this),this.XPt()}eRt(){if(this.hRt(),!this.pEt){const s=[...this.children()];s.length&&(this.pEt=[],this.mEt=new WeakMap);let t=0;for(const i of s){const e=i.kW();this.pEt.push(e),this.mEt.set(e,t),t++}}const t=this.dB();t&&t.eRt()}hRt(){if(-1===this.pPt){const t=[...this.gB()];this.pPt=t.length;for(const i of t)i.hRt();const s=[...this.children()];for(const e of s)e.hRt()}}wPt(){this.pEt&&(this.pEt.length=0),this.pEt=null,this.mEt=null;const t=this.dB();t&&t.wPt(),this.pPt=-1}_B(){return null!==this.dB()}dB(){const t=this.dPt;return null!==t?t.dB():null}mB(){let t=this;for(;t._B();)t=t.dB();return t}*gB(){let t=this.dB();for(;t;)yield t,t=t.dB()}OCt(t){return this.mX().includes(t)}fq(){const t=this.dPt;return null!==t&&t.fq()}mX(){const t=this.dPt;return null!==t?t.mX():e}children(){return this.mX()}*vB(){for(const t of this.children())yield t,yield*t.vB()}wB(){return this.mX().length}qvt(){return[...this.vB()].length}bB(t){const s=this.mX();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}BCt(s){if(s){const i=this.mX();if(i)for(let t=0;t<i.length;t++)if(s===i[t])return t}return NaN}nRt(t){this.dPt||(this.dPt=d.hn(d.yX,this)),t&&this.dPt.SEt(t)}Bnt(){return this.dPt}yPt(){this.dPt&&(this.dPt.nn(),this.dPt=null)}KPt(t){t?(t.nRt(null),this.nRt(t)):(this.dPt&&this.dPt.SEt(null),this.fq()||this.yPt())}ZPt(t){if(!this._B())return!1;const s=this.dB();return s===t||s.ZPt(t)}YPt(t){if(this.OCt(t))return!0;for(const s of this.mX())if(s.YPt(t))return!0;return!1}QPt(t){this.dPt.mX().push(t)}tRt(t){const s=this.dPt.mX(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this._B()||this.yPt(),t.fq()||t.yPt()}jCt(){const t=g.get(this);return t?t.vPt:null}rRt(){const t=g.get(this);return t?t.MPt:NaN}cq(){const t=a.get(this);return d.ae(t)?t:NaN}oRt(t){a.set(this,t)}aRt(){this.WPt(1<<19,!0),this.xPt()}xPt(){if(m){const s=this.tf.Tb();this.uPt&&s.Yw(this.uPt);let t;t=0!=(this.ebt&1<<19)?s.Aw()||"<point>":s.Ew()||"<default>",this.uPt=s.Jw(t,this.tN(),this.lPt,this.lv())}}q9(){return this.uPt}Xz(){return this.Hb===i}zb(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.tN()!==t&&(this.ebt=this.ebt&~(31<<26)|t<<26,this.xPt())}tN(){return(this.ebt&31<<26)>>26}wO(t,s){const i=s&&this.qEt!==t;i&&this.Iz(),this.qct.jIt(this,this.qEt,t),this.qEt=t,i&&this.lRt(),0!==this.lv()&&this.qEt.Ez()}pO(){return this.qEt}XD(){return this.pO().XD()}Rz(t){this.$Et=0|t}mO(){return this.qEt.jJ(),this.$Et}zJ(t){this.XEt=0|t}Oj(){return this.qEt.VJ(),this.XEt}E7(){return this.$Et}WPt(t,s){s?this.ebt|=t:this.ebt&=~t}E5(){return 0!=(1&this.ebt)}I5(t){if(this.WPt(1,t),this.fq())for(const s of this.mX())s.UB()&&s.I5(t)}uB(){return 0!=(8&this.ebt)}cB(t){t=!!t,this.uB()!==t&&(this.WPt(8,t),t?this.N4():this.uRt())}cRt(t,s){if(this.WPt(32,t),this.aPt&&this.aPt.clear(),s.trim()){this.aPt||(this.aPt=new Set);for(const i of s.split(" "))i&&this.aPt.add(i.toLowerCase())}else this.aPt=null}fRt(t){const s=0!=(32&this.ebt),i=this.aPt;if(t&&i)for(const e of i)if(t.has(e))return s;return!s}N4(){if(this.ebt|=65554,this.qct.NIt(!0),this.tf.bO(),this.qEt.az()&&(this.dRt(this.iPt,this.ePt,!0),this.ebt&=-3,this.lRt()),0!=(4&this.ebt)&&this.bi.Lf().dispatchEvent(s),null!==this.dPt){const i=this.dPt.mX();for(let t=0,s=i.length;t<s;++t)i[t].N4()}}dRt(t,s,i){const e=this.hv(),h=this.ov(),n=this.Qp(),r=this.fm(),o=this.zk();t.ul(e-this.tPt*n,h-this.sPt*r,n,r),i&&this.t6()&&this.pRt(t),0===o?s.mu(t):(t.offset(-e,-h),s.yu(t,this.Zbt(),this.Ybt()),s.offset(e,h),s.wu(t)),t.normalize()}mRt(){const t=this.ebt;0!=(2&t)&&(this.dRt(this.iPt,this.ePt,!0),this.ebt=-3&t)}J4(){return this.mRt(),this.iPt}X4(){return this.mRt(),this.ePt}gRt(t){const s=this.hv(),i=this.ov(),e=Math.round(s)-s,h=Math.round(i)-i;return 0==e&&0==h?t:(r.T(t),r.offset(e,h),r)}yRt(t){this.iPt.T(t),this.ePt.mu(this.iPt),this.ebt&=-3,this.WIt(),this.lRt()}wRt(t){this.WPt(4,t)}SRt(){return 0!=(4&this.ebt)}O9(t,s,i){return s&&0!==this.W9()?this.N9(this.pO().k9()):0===this.lv()||i?t.Hl(this.J4()):this.bRt()}bRt(){const t=this.pO(),s=this.U4();return!(s>=t.dJ())&&(t.cJ(s,n),n.Hl(this.J4()))}N9(t){const s=this.J4(),i=s.wl(),e=s.bl(),h=s.Sl(),n=s.vl(),r=this.U4(),o=r+this.W9();return t.oy(i,h,r,e,n,o)}Z4(){const t=this.pO();if(t.TJ())return this.N9(t.k9());{const s=t.XD();return this.O9(t.hN(),s.D9(),s.w5())}}U9(t){this.WPt(1<<20,t)}V9(t){this.WPt(1<<21,t)}vRt(){return 0!=(this.ebt&1<<20)}MRt(){return 0!=(this.ebt&1<<21)}xRt(t){this.rPt=t,this.GRt(),this.t6()&&(this.mPt.TRt=null)}_Rt(){return this.rPt}IRt(){return null!==this.rPt||this.t6()}CRt(){return this.ERt(this.Qp(),this.fm(),this.zk(),this.Zbt(),this.Ybt())}PRt(t,s,i){let e=0,h=1;return 0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.ERt(t,s,i,e,h)}ERt(h,n,t,r,o){let s=this.oPt;null===s&&(s={gPt:d.hn(d.Cu),width:NaN,height:NaN,angle:NaN},this.oPt=s);const a=s.gPt;if(s.width!==h||s.height!==n||s.angle!==t){const l=this.rPt;if(this.t6()){let t=this.Y6(),s=this.K6(),i=this.s6(),e=this.mPt.TRt;e||(l?(u.T(l),u.offset(t,s)):u.Lu(),e=i.Xv(u),this.mPt.TRt=e),i.Yv(e,a),a.offset(-t,-s),a.Wu(h,n,r,o)}else l?(a.T(l),a.Wu(h,n,r,o)):a.Bu(this.X4(),-this.hv(),-this.ov());s.width=h,s.height=n,s.angle=t}return a}GRt(){this.RRt(!0);const t=this.oPt;null!==t&&(t.width=NaN)}$B(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.kW().pk().sk())throw new Error("object does not support mesh");this.YB(),this.mPt={ARt:d.hn(d.qg.xv,t,s),FRt:d.hn(d.qg.xv,t,s),TRt:null}}t6(){return null!==this.mPt}s6(){if(this.t6())return this.mPt.ARt;throw new Error("no mesh")}DRt(){if(this.t6())return this.mPt.FRt;throw new Error("no mesh")}ORt(t){this.WPt(65536,t)}LRt(){return 0!=(65536&this.ebt)}RRt(t){this.WPt(1<<17,t)}kRt(){return 0!=(this.ebt&1<<17)}pRt(t){const s=this.mPt.ARt,i=Math.min(s.Bv(),0),e=Math.min(s.Wv(),0),h=Math.max(s.jv(),1),n=Math.max(s.Hv(),1),r=t.width(),o=t.height();t.offsetLeft(i*r),t.offsetTop(e*o),t.Cl((h-1)*r),t.El((n-1)*o),this.hM=s.Vv()}YB(){this.mPt&&(this.mPt.ARt.nn(),this.mPt.FRt.nn(),this.mPt=null,this.GRt())}KB(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!p.has(e))throw new Error("invalid mode");let h="relative"===e,n=i.x,r=i.y,o=i.J5,a="number"==typeof i.u?i.u:h?0:-1,l="number"==typeof i.v?i.v:h?0:-1;if(!this.t6())return!1;const u=this.s6(),c=u.zv(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.lv()!==o&&(c.uv(o),f=!0),h&&(n+=t/(u.Dv()-1),r+=s/(u.Ov()-1)),a=-1!==a||h?(h&&(a+=t/(u.Dv()-1)),d.cn(a,0,1)):c.cv(),l=-1!==l||h?(h&&(l+=s/(u.Ov()-1)),d.cn(l,0,1)):c.pv(),c.hv()===n&&c.ov()===r&&c.cv()===a&&c.pv()===l?f:(c.nv(n),c.av(r),c.dv(a),c.mv(l),this.GRt(),!0)}MCt(){return this.bi.MCt()}fB(t,s){return!!this.J4().Ul(t,s)&&!!this.X4().Ul(t,s)&&(this.MCt()?this.bi.a6().aGt(t,s):!this.IRt()||this.CRt().Ul(t-this.hv(),s-this.ov()))}NRt(){return 0!=(16&this.ebt)}WIt(){if(this.NRt()&&this.uB()&&0==(256&this.ebt)){const t=this.J4(),s=this.qct.kIt(),i=this.hPt;if(n.set(s.J7(t.wl()),s.q7(t.Sl()),s.J7(t.bl()),s.q7(t.vl())),!i.equals(n)){const e=this.bi;i===h?(s.X7(e,null,n),this.hPt=d.hn(d.Rect,n)):(s.X7(e,i,n),i.T(n)),this.ebt&=-17}}}BRt(){this.ebt|=16}uRt(){const t=this.hPt;t!==h&&(this.qct.kIt().X7(this.bi,t,null),this.hPt=h)}lRt(){const t=this.pO();if(t.az()&&0==(256&this.ebt)){const s=t.Zz(),i=this.J4(),e=this.nPt;if(n.set(s.J7(i.wl()),s.q7(i.Sl()),s.J7(i.bl()),s.q7(i.vl())),!e.equals(n)){const h=this.bi;e===o?(s.X7(h,null,n),this.nPt=d.hn(d.Rect,n)):(s.X7(h,e,n),e.T(n)),t.Kz()}}}Iz(){const t=this.nPt;t!==o&&(this.pO().Zz().X7(this.bi,t,null),this.nPt=o)}HJ(){return this.nPt}iB(){const t=this.bi,s=this.qEt,i=s.yO();i.length&&i.at(-1)===t||(s._z(t,!1),s.xz(t,!1),this.tf.bO())}hB(){const t=this.bi,s=this.qEt,i=s.yO();i.length&&i[0]===t||(s._z(t,!1),s.Tz(t,!1),this.tf.bO())}rB(t){const s=this.bi,i=this.qEt;if(i.XD()!==t.XD())throw new Error("layer from different layout");t!==i&&(i._z(s,!0),this.wO(t),t.xz(s,!0),this.tf.bO())}aB(t,s){let i=this.bi,e=!1,h=this.qEt;if(t.FN()!==i.FN()){const n=t.dO();if(!n)throw new Error("expected world instance");const r=n.pO(),o=(h.dF()!==r.dF()&&(h._z(i,!0),this.wO(r),r.xz(i,!0),e=!0),r.$J(i,t,!!s));(e||o)&&this.tf.bO()}}O4(){return this.cPt}WRt(t){this.WPt(64,t)}s9(){return 0!=(64&this.ebt)}aq(t,s=null){const i={x:this.hv(),y:this.ov(),w:this.Qp(),h:this.fm(),l:this.pO().zz(),zi:this.mO()},e=(0!==this.lv()&&(i.ze=this.lv()),0!==this.zk()&&(i.a=this._Pt()),this.Xz()||(i.c=this.Hb.toJSON()),.5!==this.Y6()&&(i.oX=this.Y6()),.5!==this.K6()&&(i.oY=this.K6()),0!==this.tN()&&(i.bm=this.tN()),this.E5()||(i.v=this.E5()),this.uB()||(i.ce=this.uB()),this.SRt()&&(i.be=this.SRt()),this.cPt&&(i.fx=this.cPt.aq()),0!=(32&this.ebt));return e&&(i.sfi=e),this.aPt&&(i.sft=[...this.aPt].join(" ")),this.dPt&&"visual-state"!==t&&(i.sgi=this.dPt.aq(t,s),g.has(this))&&(i.sgcd=g.get(this).vPt,i.sgzid=g.get(this).MPt),this.t6()&&(i.mesh=this.s6().wv()),i}FEt(){return{x:this.Xa,y:this.Ya,z:this.Vb,w:this.YEt,h:this.ZEt,a:this.Uo,sgi:this.Bnt()?this.Bnt().CEt():null}}kEt(t){t&&(this.Xa=t.x,this.Ya=t.y,this.Vb=t.z,this.YEt=t.w,this.ZEt=t.h,this.Uo=t.a,t.sgi&&this.Bnt()&&this.Bnt().lq(t.sgi),this.PPt(),this.N4())}$It(){this.wPt(),this.iRt(),this.nRt(null),this.dPt&&this.dPt.OEt(this.pEt,this.mEt)}TY(t){"visual-state"!==t&&this.iRt()}IY(t,s="full",i=null){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.ebt)&&this.dPt.IY(t.sgi,i)}hEt(t,s="full",i){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.ebt)&&(this.dPt.OEt(null,null),this.wPt(),this.N4())}lq(t,s){if(m=!1,this.nv(t.x),this.av(t.y),this.am(t.w),this.tm(t.h),this.Rz(t.zi),this.uv(t.hasOwnProperty("ze")?t.ze:0),this.Uk(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?f.ka(t.c):t.hasOwnProperty("o")?(f.Qo(this.Hb),f.a=t.o):f.zo(1,1,1,1),this.SPt(f),this.Knt(t.hasOwnProperty("oX")?t.oX:.5),this.trt(t.hasOwnProperty("oY")?t.oY:.5),this.zb(t.hasOwnProperty("bm")?t.bm:0),this.I5(!t.hasOwnProperty("v")||t.v),this.cB(!t.hasOwnProperty("ce")||t.ce),this.wRt(!!t.hasOwnProperty("be")&&t.be),this.cRt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.cPt&&t.hasOwnProperty("fx")&&this.cPt.lq(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==s&&this.pEt)for(const i of this.pEt)i.jj()||this.tf._N(i);if(t.hasOwnProperty("sgi")&&"visual-state"!==s){this.nRt(null);const e=this.dPt,h=t.sgi;e.lq(h),e.OEt(this.pEt,this.mEt),t.sgcd&&d.ae(t.sgzid)&&g.set(this,{vPt:t.sgcd,MPt:t.sgzid})}if(t.hasOwnProperty("mesh")){const n=t.mesh;this.$B(n.cols,n.rows),this.s6().Sv(n)}else this.YB();this.N4(),m=!0,this.xPt(),"visual-state"!==s&&this.tf.jRt(this.kW(),t)}}}{const Sa=self.Ds;Sa.C_t=class extends Sa.tn{constructor(t,s){super();const i=t.FO(),e=i.nyt(s[1]),h=(i.HRt().iTt(e),this.tf=i,this.qct=t,this.LGt=Sa.NL.x6(e),this.vxt=null,this.VRt=null,this.n_t=e.Instance,this.cU=s[2],this.ln=s[0],this.Hyt=this.tf.x1t(s[3]),this.LGt.LSt());if(h<2&&(this.vxt=Sa.hn(e.z_t,this),!(this.vxt instanceof Sa.OGt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(Sa.NL.ixt(this,h),2<=h){const n=e.z_t??globalThis.Kj;if(this.VRt=new n,!(this.VRt instanceof globalThis.Kj))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.VRt=new globalThis.v6;Sa.NL.hxt(h),this.KMt()}static VM(t,s){return Sa.hn(Sa.C_t,t,s)}nn(){this.tf=null,this.LGt=null,this.vxt&&(this.vxt.nn(),this.vxt=null),this.n_t=null}Abt(){return this.vxt}KMt(){this.vxt?this.vxt.KMt():this.VRt&&this.VRt.sj()}FO(){return this.tf}SN(){return this.qct}m6(){return this.LGt}dIt(){return this.n_t}Jc(){return this.ln}zz(){return this.cU}y6(){return this.VRt}x1t(){return this.Hyt}}}{const ba=self.Ds,va=self.d6;ba.oCt=class extends ba.tn{constructor(t){super(),this.tf=t.runtime,this.bwt=t.g6,this.LGt=this.bwt.m6(),this.bi=t.S6,this.Wg=t.index,this.QIt=null,this.tCt=null,this.LGt.xz(this.bi)}nn(){this.tCt&&(this.tCt.GN(),this.tCt=null),this.LGt._z(this.bi),this.QIt&&(this.QIt.nn(),this.QIt=null),this.tf=null,this.bwt=null,this.LGt=null,this.bi=null}aIt(t){if(this.QIt)throw new Error("already got sdk instance");const s=this.m6().LSt();if(s<2){if(this.QIt=ba.hn(this.bwt.dIt(),this,t),!(this.QIt instanceof ba.kGt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const i=this.m6().QMt();this.sxt(i.Instance,t)}}a6(){return this.QIt??this.tCt}b6(){return this.bi}FO(){return this.tf}w6(){return this.bwt}m6(){return this.LGt}fnt(){return this.Wg}jGt(){this.QIt?this.QIt.jGt():this.tCt.i8()}zGt(t,s){this.QIt&&this.QIt.zGt(t,s)}eEt(){return this.QIt?this.QIt.Hxt():this.tCt.v4()}wv(t="full"){return this.QIt?this.QIt.wv(t):this.tCt.M4(t)}Sv(t,s="full"){if(this.QIt)return this.QIt.Sv(t,s);this.tCt.x4(t,s)}static URt(t,s,i){let e=globalThis.Qj,h,n;h=s instanceof e?t.h5(s):s.WGt(),n=i instanceof e?t.h5(i):i.WGt();const r=h.b6(),o=n.b6(),a=r.SN().dF(),l=o.SN().dF();if(a!==l)return a-l;const u=r.zCt(),c=o.zCt();return u!==c?u-c:h.fnt()-n.fnt()}sxt(t,s){const i=va,e=t??this.QIt.QMt(),h=e||i,n=this.m6().LSt();if(ba.NL.ixt(this,n),ba.NL.eTt(s),this.tCt=new h,ba.NL.hTt(),ba.NL.hxt(n),!e||this.tCt instanceof i)return this.tCt;throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`)}Gxt(){return this.tCt||this.sxt()}Jxt(){return!!this.tCt}}}{const Ma=self.Ds;Ma.qU=class extends Ma.tn{constructor(t,s){super(),this._v=t,this.zRt=[],this.JRt=[],this.qRt=new Map,this.$Rt=[],this.XRt=[],this.YRt=new Set,this.wb=!0;for(const i of s){const e=Ma.hn(Ma.ZRt,this,i,this.zRt.length);this.zRt.push(e),this.qRt.set(e.Jc().toLowerCase(),e),3<=i.length&&this.$Rt.push(this.KRt(e,i[2]))}this.FO().QRt(this)}nn(){this.FO().tAt(this);for(const t of this.XRt)t.nn();Ma.Lr(this.XRt),Ma.Lr(this.zRt),Ma.Lr(this.JRt),this.qRt.clear(),Ma.Lr(this.$Rt),this._v=null}sAt(t){this.YRt.add(t)}iAt(t){this.YRt.delete(t)}eAt(t){t.Mw()&&(this.XRt=this.zRt.map(t=>{const s=t.Yx();return 0<s.GetCustomParametersByteSize()?Ma.hn(Ma.qg.WebGPUEffectCustomParamsBuffer,s):null}),this.hAt());for(const s of this.YRt)s.eAt(t)}rIt(t){if(t.length){this.zRt=t.concat(this.zRt);for(const s of t)this.qRt.set(s.Jc().toLowerCase(),s);for(let t=0,s=this.zRt.length;t<s;++t)this.zRt[t].Bz(t)}}KRt(t,s){t.nAt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=Ma.hn(Ma.Wo);h.ka(e),i[t]=h}}return i}Lv(){return this._v}FO(){return this._v.FO()}_6(){Ma.Lr(this.JRt);let t=!0;for(const s of this.zRt)s.zpt()&&(this.JRt.push(s),s.Yx().Rb()||(t=!1));this.wb=t}Nk(){return this.zRt}vIt(){return 0<this.zRt.length}bht(t){return this.qRt.get(t.toLowerCase())||null}rAt(t){if((t=Math.floor(+t))<0||t>=this.zRt.length)throw new RangeError("invalid effect type index");return this.zRt[t]}G6(t){return this.rAt(t).zpt()}T6(t,s){this.rAt(t).nAt(s)}Yz(){return this.JRt}s9(){return 0<this.JRt.length}Rb(){return this.wb}Sht(t){return this.$Rt[t]}ZU(t){return(t<this.XRt.length?this.XRt:this.$Rt)[t]}I6(t,s){if(t<0||t>=this.$Rt.length)return null;const i=this.$Rt[t];return s<0||s>=i.length?null:i[s]}C6(t,s,i){if(t<0||t>=this.$Rt.length)return!1;const e=this.$Rt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof Ma.Wo){if(h.la(i))return!1;h.Qo(i)}else{if(h===i)return!1;e[s]=i}return t<this.XRt.length&&this.XRt[t].SetParameterValue(s,i),!0}hAt(){const i=this.$Rt,e=this.XRt;for(let t=0,s=Math.min(i.length,e.length);t<s;++t){const h=e[t],n=i[t];for(let t=0,s=n.length;t<s;++t)h.SetParameterValue(t,n[t])}}static oAt(t){return t&&t instanceof Ma.Wo?{t:"color",v:t.toJSON()}:t}static aAt(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const s=t.t;if("color"!==s)throw new Error("invalid effect parameter type");{const i=Ma.hn(Ma.Wo);return i.ka(t.v),i}}}static lAt(t){return t.map(Ma.qU.oAt)}static uAt(t){return t.map(Ma.qU.aAt)}wv(){return this.zRt.map(t=>({name:t.Jc(),active:t.zpt(),params:Ma.qU.lAt(this.$Rt[t.dF()])}))}Sv(t){for(const s of t){const i=this.bht(s.name);i&&(i.nAt(s.active),this.$Rt[i.dF()]=Ma.qU.uAt(s.params))}this._6(),this.hAt()}}}{const xa=self.Ds;xa.ZRt=class extends xa.tn{constructor(t,s,i){super(),this.JU=t,this.ef=s[0],this.ln=s[1],this.Wg=i,this.Bb=null,this.i0=!0}nn(){this.JU=null,this.Bb=null}nIt(t){const s=xa.hn(xa.ZRt,t,[this.ef,this.ln],-1);return s.Bb=this.Bb,s.i0=this.i0,s}eAt(t){const s=t.Cw(this.ef);if(!s)throw new Error("failed to find shader program '"+this.ef+"'");this.Bb=s}kk(){return this.JU}Jc(){return this.ln}Bz(t){this.Wg=t}dF(){return this.Wg}Lv(){return this.JU.Lv()}FO(){return this.JU.FO()}nAt(t){this.i0=!!t}zpt(){return this.i0}Yx(){return this.Bb}cAt(){const i=[];for(let t=0,s=this.Bb.Zx();t<s;++t){const e=this.Bb.Kx(t);if("float"===e||"percent"===e)i.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");i.push(xa.hn(xa.Wo,1,1,1,1))}}return i}}}{const Ga=self.Ds;Ga.fPt=class extends Ga.tn{constructor(t,s){super(),this.bi=t,this.fAt=s,this.JU=t.SN().kk(),this.dAt=!0,this.QU=!0,this.pAt=!1,this.mAt=!1,this.gAt=!1,this.yAt=!1,this.lF=Ga.hn(Ga.qg.nA,t.FO().vL().$U(),{qR:(t,s)=>{const i=s.sF(),e=i.dO();t.Jb(e.XU()),t.uS(e.U4()),i.qv(t),t.uS(0)},$R:t=>{const s=t.eGt(),[i,e]=t.iGt();return{q3:s,X3:i,Y3:e}},YR:t=>this.ZU(t)}),this.wAt=[],this.JRt=[],this.wb=!0,this.$Rt=[],this.XRt=[],this.eAt(t.FO().Tb());for(let t=0,s=this.JU.Nk().length;t<s;++t)this.wAt.push(!0);this._6(),this.JU.sAt(this)}nn(){this.JU.iAt(this);for(const t of this.XRt)t&&t.nn();Ga.Lr(this.XRt),this.lF.nn(),this.lF=null,Ga.Lr(this.wAt),Ga.Lr(this.JRt),Ga.Lr(this.$Rt),this.bi=null,this.JU=null}eAt(t){t.Mw()&&(this.XRt=this.JU.Nk().map(t=>{const s=t.Yx();return 0<s.GetCustomParametersByteSize()?Ga.hn(Ga.qg.WebGPUEffectCustomParamsBuffer,s):null}))}bPt(t){let s=0;for(const i of t)this.$Rt.push(this.KRt(s,i)),++s;this.hAt(),this._6()}KRt(t,s){this.wAt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=Ga.hn(Ga.Wo);h.ka(e),i[t]=h}}return i}pCt(){for(const t of this.JU.Nk())this.$Rt.push(t.cAt());this.hAt()}Lv(){return this._v}kk(){return this.JU}fF(){return this.$z(),this.lF}FO(){return this.bi.FO()}_6(){Ga.Lr(this.JRt);let t=this.fAt,i=this.JU.Nk(),e=this.JRt,h=this.wAt,n=!0;for(let t=0,s=i.length;t<s;++t)if(h[t]){const r=i[t];e.push(r),r.Yx().Rb()||(n=!1)}this.wb=n,t.WRt(!!e.length),this.dAt=!0}$z(){const t=this.bi,s=this.fAt,i=s.Xz(),e=t.pk().ZL(),h=0!==s.zk()||0!==s.pO().zk()||s.Qp()<0||s.fm()<0,n=t.rGt(),r=t.Pb();(this.dAt||i!==this.QU||e!==this.pAt||h!==this.mAt||n!==this.gAt||r!==this.yAt||this.lF.XA())&&(this.lF.YA(this.JRt.map(t=>t.Yx()),{KR:this.JRt.map(t=>t.dF()),QR:!i||r,sA:e,iA:n,eA:h}),this.dAt=!1,this.QU=i,this.pAt=e,this.mAt=h,this.gAt=n,this.yAt=r)}Yz(){return this.JRt}Sht(t){return this.$Rt[t]}ZU(t){return(t<this.XRt.length?this.XRt:this.$Rt)[t]}I6(t,s){if(t<0||t>=this.$Rt.length)return null;const i=this.$Rt[t];return s<0||s>=i.length?null:i[s]}C6(t,s,i){if(t<0||t>=this.$Rt.length)return!1;const e=this.$Rt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof Ga.Wo){if(h.la(i))return!1;h.Qo(i)}else{if(h===i)return!1;e[s]=i}return t<this.XRt.length&&this.XRt[t].SetParameterValue(s,i),!0}hAt(){const i=this.$Rt,e=this.XRt;for(let t=0,s=e.length;t<s;++t){const h=e[t],n=i[t];for(let t=0,s=n.length;t<s;++t)h.SetParameterValue(t,n[t])}}Rb(){return this.wb}SAt(){return this.JRt.some(t=>t.Yx().Db())}G6(t){return this.wAt[t]}T6(t,s){this.wAt[t]=!!s}Nk(){return this.JU.Nk()}aq(){return this.JU.Nk().map(t=>({name:t.Jc(),active:this.wAt[t.dF()],params:Ga.qU.lAt(this.$Rt[t.dF()])}))}lq(t){for(const s of t){const i=this.JU.bht(s.name);i&&(this.wAt[i.dF()]=s.active,this.$Rt[i.dF()]=Ga.qU.uAt(s.params))}this._6(),this.hAt()}}}{let _=self.Ds,n=[],b=[],r=[],v=_.hn(_.Cu),w=_.hn(_.Cu),M=_.hn(_.$l),d=_.hn(_.Rect),p=_.hn(_.Rect),m=null,g=null,y=null;_.bAt=class extends _.tn{constructor(t){super(),this.tf=t,this.vAt=0,this.MAt=0,this.xAt=[],this.GAt=0,this.TAt=0,this._At=0,this.IAt=0,this.CAt=new self.KO(this)}nn(){this.tf=null}FO(){return this.tf}SF(){return this.CAt}EAt(){this.TAt=this.GAt,this.GAt=0,this.IAt=this._At,this._At=0}PAt(){return this.TAt}RAt(){return this.IAt}AAt(t,s){const i=t.dO(),e=s.dO();i&&e&&i.uB()&&e.uB()&&this.xAt.push([t,s])}Lvt(s,i,e){for(const[h,n]of this.xAt){let t=null;if(s===h)t=n;else{if(s!==n)continue;t=h}t.Vvt(i)&&!e.includes(t)&&e.push(t)}}kvt(t,s){if(this.xAt.length)for(const[i,e]of this.xAt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}FAt(){_.Lr(this.xAt)}tL(t,s){if(!t||!s||t===s)return!1;const i=t.dO(),e=s.dO();if(!i.uB()||!e.uB())return!1;this.GAt++;const h=i.pO(),n=e.pO(),r=h.kJ(n);return r?this.DAt(i,e):this.OAt(i,e)}DAt(t,s){if(!t.J4().Hl(s.J4()))return!1;if(this._At++,!t.X4().bu(s.X4()))return!1;if(t.MCt()&&s.MCt())return!1;if(t.MCt())return this.LAt(t,s);if(s.MCt())return this.LAt(s,t);if(!t.IRt()&&!s.IRt())return!0;const i=t.CRt(),e=s.CRt();return i.ju(e,s.hv()-t.hv(),s.ov()-t.ov())}OAt(i,e){const t=i.MCt(),s=e.MCt();if(t&&!s)return this.kAt(i,e);if(s&&!t)return this.kAt(e,i);if(s||t)return!1;{const h=i.pO(),n=e.pO(),r=(v.T(i.CRt()),w.T(e.CRt()),v.Fu());for(let t=0,s=r.length;t<s;t+=2){const a=t+1,l=r[t],u=r[a],[c,f]=h.uN(l+i.hv(),u+i.ov());r[t]=c,r[a]=f}const o=w.Fu();for(let t=0,s=o.length;t<s;t+=2){const d=t+1,p=o[t],m=o[d],[g,y]=n.uN(p+e.hv(),m+e.ov());o[t]=g,o[d]=y}return v.ku(),w.ku(),this._At++,v.ju(w,0,0)}}kAt(t,s){const i=t.pO(),e=s.pO(),h=(m=m||_.hn(_.Cu),g=g||_.hn(_.Rect),y=y||_.hn(_.$l),s.hv()),n=s.ov(),[r,o]=e.uN(h,n),[a,l]=i.rN(r,o),u=a-h,c=l-n;if(g.T(s.J4()),g.offset(u,c),!t.J4().Hl(g))return!1;if(y.T(s.X4()),y.offset(u,c),this._At++,!t.X4().bu(y))return!1;m.T(s.CRt());const f=m.Fu();for(let t=0,s=f.length;t<s;t+=2){const d=t+1;f[t]+=u,f[d]+=c}return m.ku(),this.LAt(t,s,a,l,m,g,y)}LAt(t,e,s,i,h,n,r){const o=void 0!==n?n:e.J4(),a=t.hv(),l=t.ov(),u=t.kW().a6(),c=void 0!==s?s:e.hv(),f=void 0!==i?i:e.ov(),d=e.IRt(),p=void 0!==r?r:e.X4(),m=b;u.GetCollisionRectCandidates(o,m);for(let t=0,s=m.length;t<s;++t){const g=m[t],y=g.GetRect();if(this.GAt++,o.Vl(y,a,l)&&(M.mu(y),M.offset(a,l),M.bu(p)))if(d){let t=void 0!==h?h:e.CRt(),s=c,i=f;void 0!==h&&(s=e.hv(),i=e.ov());const w=g.GetPoly();if(w){if(this._At++,w.ju(t,s-(a+y.wl()),i-(l+y.Sl())))return _.Lr(m),!0}else if(v.Bu(M,0,0),v.ju(t,s,i))return _.Lr(m),!0}else{const S=g.GetPoly();if(!S)return _.Lr(m),!0;if(v.Bu(p,0,0),S.ju(v,-(a+y.wl()),-(l+y.Sl())))return _.Lr(m),!0}}return _.Lr(m),!1}NAt(t,o,a){const l=t.Tk(),s=this.tf.KF();if(!s)throw new Error("cannot call outside event");const u=s.xft(),i=new Map,c=t=>{let s=i.get(t);return void 0===s&&(s=t.L5(),i.set(t,s)),s};if(l.rft()){a||(l.dft(!1),_.Lr(l.pft())),u&&_.Lr(l.mft());for(const e of t.Gk()){let h=e.dO(),n=h.pO();if(!(!c(n)||!h.Z4())&&o.some(([t,s])=>{const[i,e]=n.rN(t,s,h.U4());return h.fB(i,e)})){if(a)return!1;l.cft(e)}else u&&l.fft(e)}}else{let i,e=!1,r=(!u||s.mgt(this.tf.p1t())||this.tf.kbt()&&!l.mft().length&&l.pft().length?i=l.pft():(i=l.mft(),e=!0),0);for(let s=0,t=i.length;s<t;++s){let t=i[s],h=t.dO(),n=h.pO();if(!(!c(n)||!h.Z4())&&o.some(([t,s])=>{const[i,e]=n.rN(t,s,h.U4());return h.fB(i,e)})){if(a)return!1;e?l.cft(t):i[r++]=t}else e?i[r++]=t:u&&l.fft(t)}a||(i.length=r)}return t.Ygt(),i.clear(),!!a||l.oft()}BAt(t,s){if(t)for(const i of s.HIt())if(!t.kJ(i))return!1;return!0}Lbt(t,s,i,e){if(s.Lz())for(const h of s.Hmt())this.BAt(t,h)?(h.BIt(),h.kIt().Y7(i,e)):_.zh(e,h.Gk());else this.BAt(t,s)?(s.BIt(),s.kIt().Y7(i,e)):_.zh(e,s.Gk())}uL(t,s,i,e){for(const h of s)this.Lbt(t,h,i,e)}WAt(t,s,i){const e=this.tf.rTt();e&&this.uL(t,e.YY(),s,i)}jAt(t,s,i){const e=this.tf.oTt();e&&this.uL(t,e.YY(),s,i)}fRt(t,s){return t.TCt()&&(!s||s.dO().fRt(t.HSt().get("solidTags")))}eL(t){const s=t.dO();this.WAt(s.pO(),s.J4(),n);for(const i of n)if(this.fRt(i,t)&&this.tL(t,i))return _.Lr(n),i;return _.Lr(n),null}HAt(t,s){this.WAt(null,t,n);for(const i of n)if(this.fRt(i,s)&&this.VAt(t,i))return _.Lr(n),i;return _.Lr(n),null}UAt(t,s){let i=null;s&&(i=r,_.Lr(i));const e=t.dO();this.jAt(e.pO(),e.J4(),n);for(const h of n)if(h.ICt()&&this.tL(t,h)){if(!s)return _.Lr(n),h;i.push(h)}return _.Lr(n),i}zAt(s,i,e,h,n){h=h||50;const r=s.dO(),o=r.hv(),a=r.ov();for(let t=0;t<h;++t)if(r.B4(o+i*t,a+e*t),r.N4(),!this.tL(s,n))return!0;return r.B4(o,a),r.N4(),!1}JAt(s,i,e,h,n,r){h=h||50;let o=s.dO(),a=o.hv(),l=o.ov(),u=null,c=null;for(let t=0;t<h;++t)if(o.B4(a+i*t,l+e*t),o.N4(),!this.tL(s,u))if(u=this.eL(s))c=u;else if(n&&(u=r?this.tL(s,r)?r:null:this.UAt(s))&&(c=u),!u)return c&&this.qAt(s,i,e,c,16,!0),!0;return o.B4(a,l),o.N4(),!1}$At(i,e,h,t){t=t||50;let n=i.dO(),r=n.hv(),o=n.ov(),a=null,l=null;for(let s=0;s<t;++s)for(let t=0;t<2;++t){const u=2*t-1;if(n.B4(r+e*s*u,o+h*s*u),n.N4(),!this.tL(i,a)){if(!(a=this.eL(i)))return l&&this.qAt(i,e*u,h*u,l,16,!0),!0;l=a}}return n.B4(r,o),n.N4(),!1}qAt(t,s,i,e,h,n){let r=2,o=!1,a=!1,l=t.dO(),u=l.hv(),c=l.ov();for(;r<=h;){const f=1/r;r*=2,l.H4(s*f*(o?1:-1),i*f*(o?1:-1)),l.N4(),this.tL(t,e)||n&&this.eL(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.hv(),c=l.ov())}a&&(l.B4(u,c),l.N4())}XAt(i,t=100){let e=0,h=i.dO(),n=h.hv(),r=h.ov(),o=0,a=this.eL(i);if(!a)return!0;for(;e<=t;){let t=0,s=0;switch(o){case 0:t=0,s=-1,e++;break;case 1:t=1,s=-1;break;case 2:t=1,s=0;break;case 3:t=1,s=1;break;case 4:t=0,s=1;break;case 5:t=-1,s=1;break;case 6:t=-1,s=0;break;case 7:t=-1,s=-1}if(o=(o+1)%8,h.B4(Math.floor(n+t*e),Math.floor(r+s*e)),h.N4(),!this.tL(i,a)&&!(a=this.eL(i)))return!0}return h.B4(n,r),h.N4(),!1}YAt(t,s,i,e){const h=t.dO(),n=h.hv(),r=h.ov(),o=Math.max(10,_.wn(s,i,n,r)),a=_.bn(s,i,n,r),l=e||this.eL(t);if(!l)return _.dn(a+Math.PI);let u=l,c=0,f=0,d=_.pn(5),p;for(p=1;p<36;++p){const G=a-p*d;if(h.B4(s+Math.cos(G)*o,i+Math.sin(G)*o),h.N4(),!this.tL(t,u)&&!(u=e?null:this.eL(t))){c=G;break}}for(36===p&&(c=_.dn(a+Math.PI)),u=l,p=1;p<36;++p){const T=a+p*d;if(h.B4(s+Math.cos(T)*o,i+Math.sin(T)*o),h.N4(),!this.tL(t,u)&&!(u=e?null:this.eL(t))){f=T;break}}if(36===p&&(f=_.dn(a+Math.PI)),h.B4(n,r),h.N4(),f===c)return f;let m=_.vn(f,c)/2,g;g=_.xn(f,c)?_.dn(c+m+Math.PI):_.dn(f+m);const y=Math.cos(a),w=Math.sin(a),S=Math.cos(g),b=Math.sin(g),v=y*S+w*b,M=y-2*v*S,x=w-2*v*b;return _.bn(0,0,M,x)}ZAt(t,s,i,e,h){if(!h)return!1;const n=h.dO();if(!n.uB())return!1;if(this.GAt++,d.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!n.J4().Hl(d))return!1;if(h.MCt())return this.KAt(t,s,i,e,h,n);if(this._At++,!n.X4().Su(t,s,i,e))return!1;if(!n.IRt())return!0;const r=n.CRt();return r.Su(n.hv(),n.ov(),t,s,i,e)}KAt(i,e,h,n,t,s){const r=s.hv(),o=s.ov(),a=t.a6(),l=b;p.set(i,e,h,n),p.normalize(),a.GetCollisionRectCandidates(p,l);for(let t=0,s=l.length;t<s;++t){const u=l[t],c=u.GetRect();if(this.GAt++,d.Vl(c,r,o)&&(M.mu(c),M.offset(r,o),M.Su(i,e,h,n))){const f=u.GetPoly();if(!f)return _.Lr(l),!0;if(this._At++,f.Su(r+c.wl(),o+c.Sl(),i,e,h,n))return _.Lr(l),!0}}return _.Lr(l),!1}VAt(t,s){if(!s)return!1;const i=s.dO();if(!i.uB())return!1;if(this.GAt++,!i.J4().Hl(t))return!1;if(s.MCt())return this.QAt(t,s,i);if(this._At++,M.mu(t),!i.X4().bu(M))return!1;if(!i.IRt())return!0;const e=v,h=(e.mu(t,i.hv(),i.ov()),i.CRt());return e.ju(h,0,0)}QAt(i,t,s){const e=s.hv(),h=s.ov(),n=t.a6(),r=b;n.GetCollisionRectCandidates(i,r);for(let t=0,s=r.length;t<s;++t){const o=r[t],a=o.GetRect();if(this.GAt++,i.Vl(a,e,h)){const l=o.GetPoly();if(!l)return _.Lr(r),!0;if(this._At++,v.mu(i,0,0),l.ju(v,-(e+a.wl()),-(h+a.Sl())))return _.Lr(r),!0}}return _.Lr(r),!1}t3t(t,s){if(t){const i=t.dO();i.uB()&&(this.GAt++,i.J4().Hl(s.rect))&&(t.MCt()?this.s3t(t,i,s):(this._At++,i.IRt()?s.i3t(t,i.hv(),i.ov(),i.CRt()):s.e3t(t,i.X4())))}}s3t(i,e,h){const n=e.hv(),r=e.ov(),o=b;i.a6().GetCollisionRectCandidates(h.rect,o);for(let t=0,s=o.length;t<s;t++){const a=o[t],l=a.GetRect();if(this.GAt++,h.rect.Vl(l,n,r)){const u=a.GetPoly();this._At++,u?h.i3t(i,n+l.wl(),r+l.Sl(),u):h.h3t(i,e.hv(),e.ov(),l)}}_.Lr(o)}nL(t,s){if(t!==this.vAt||s!==this.MAt){this.vAt=t,this.MAt=s;const i=this.tf.Oz();for(const e of i)if(e.VL()){for(const h of e.xk())h.dO().uRt();e.kIt().n3t(t,s),e.NIt();for(const n of e.xk()){const r=n.dO();r.BRt(),r.WIt()}}}}oL(){return[this.vAt,this.MAt]}r3t(t,s){this.vAt=t,this.MAt=s}}}{const Ta=self.Ds;Ta.m_t=class extends Ta.tn{constructor(t,s){super(),this.H7=t,this.V7=s,this.U7=Ta.hn(Ta.qu)}nn(){this.U7.nn(),this.U7=null}n3t(t,s){if(!this.U7.Yu())throw new Error("grid not empty");this.H7=t,this.V7=s}z7(t,s,i){let e=this.U7.Ks(t,s);return e||(i?(e=Ta.hn(Ta.o3t,this,t,s),this.U7.Set(t,s,e),e):null)}J7(t){const s=Math.floor(t/this.H7);return isFinite(s)?s:0}q7(t){const s=Math.floor(t/this.V7);return isFinite(s)?s:0}X7(e,h,n){if(h)for(let i=h.wl(),t=h.bl();i<=t;++i)for(let t=h.Sl(),s=h.vl();t<=s;++t)if(!n||!n.Ul(i,t)){const r=this.z7(i,t,!1);r&&(r.m0(e),r.Yu())&&this.U7.Zu(i,t)}if(n)for(let i=n.wl(),t=n.bl();i<=t;++i)for(let t=n.Sl(),s=n.vl();t<=s;++t)h&&h.Ul(i,t)||this.z7(i,t,!0).N7(e)}Y7(t,s){let i=this.J7(t.wl()),e=this.q7(t.Sl()),h=this.J7(t.bl()),n=this.q7(t.vl());if(isFinite(h)&&isFinite(n))for(;i<=h;++i)for(let t=e;t<=n;++t){const r=this.z7(i,t,!1);r&&r.W7(s)}}}}{const _a=self.Ds;_a.o3t=class extends _a.tn{constructor(t,s,i){super(),this.R7=t,this.Xa=s,this.Ya=i,this.A7=_a.hn(_a.sc)}nn(){this.A7.nn(),this.A7=null,this.R7=null}Yu(){return this.A7.Yu()}N7(t){this.A7.nc(t)}m0(t){this.A7.Zu(t)}W7(t){_a.zh(t,this.A7.rc())}}}{const Ia=self.Ds;Ia.a3t=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Ia.Rect,this.l3t=2,this.u3t=null,this.c3t=0,this.f3t=0,this.d3t=0,this.p3t=0,this.m3t=0,this.It=0,this.g3t=1,this.y3t=0,this.w3t=1,this.S3t=0}b3t(){return this.l3t<1+1e-6}e0(){this.l3t=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.l3t=2,this.u3t=null,this.c3t=0,this.f3t=0,this.d3t=0,this.p3t=0,this.m3t=0,this.It=0,this.g3t=1,this.y3t=0,this.w3t=1,this.S3t=0,this}v3t(){if(!1!==this.b3t()){const t=this.dx*this.l3t,s=this.dy*this.l3t,i=Ia.gn(t,s),e=t/i,h=s/i,n=(this.It=i-1e-6,this.p3t=this.x1+e*this.It,this.m3t=this.y1+h*this.It,this.c3t=Math.atan2(this.d3t,this.f3t)+Math.PI/2,this.g3t=Math.cos(this.c3t),this.y3t=Math.sin(this.c3t),e*this.g3t+h*this.y3t);if(this.w3t=e-2*this.g3t*n,this.S3t=h-2*this.y3t*n,0<n){const r=Math.PI;this.c3t=Ia.dn(this.c3t+r),this.g3t=-this.g3t,this.y3t=-this.y3t}}}M3t(t,s,i,e,h){const n=Ia.lr(this.x1,this.y1,this.x2,this.y2,s,i,e,h);0<=n&&n<this.l3t&&(this.l3t=n,this.u3t=t.FN(),this.f3t=s-e,this.d3t=i-h)}h3t(t,s,i,e){const h=s+e.wl(),n=s+e.bl(),r=i+e.Sl(),o=i+e.vl();this.M3t(t,h,r,n,r),this.M3t(t,n,r,n,o),this.M3t(t,n,o,h,o),this.M3t(t,h,o,h,r)}e3t(t,s){const i=s.Zn(),e=s.Kn(),h=s.Qn(),n=s.tr(),r=s.ir(),o=s.er(),a=s.hr(),l=s.nr();this.M3t(t,i,e,h,n),this.M3t(t,h,n,r,o),this.M3t(t,r,o,a,l),this.M3t(t,a,l,i,e)}i3t(i,e,h,t){const n=t.Fu();for(let t=0,s=n.length;t<s;t+=2){const r=(t+2)%s,o=n[t]+e,a=n[t+1]+h,l=n[r]+e,u=n[1+r]+h;this.M3t(i,o,a,l,u)}}}}{const T=self.Ds,Ca=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Ea=new Set(["high","low"]),Pa=self.ys,xh=Pa.vs,Gh=Pa.Ts,Ra=xh.create(),Aa=T.hn(T.$l),I=T.hn(T.Rect);T.x3t=class extends T.tn{constructor(t){super(),this.tf=t,this.G3t=[],this.T3t=!1,this._3t=null,this.I3t=null,this.C3t=null,this.E3t="high-performance",this.P3t=!1,this.R3t="auto",this.A3t=0,this.F3t=0,this.D3t="",this.O3t=0,this.L3t=0,this.k3t=0,this.N3t=0,this.B3t=0,this.W3t=0,this.vy="normalized",this.j3t=0,this.H3t=1,this.V3t=1e4,this.Zy=!0,this.U3t=0,this.PA=0,this.RA=0,this.z3t="letterbox-scale",this.J3t="letterbox-scale",this.q3t=0,this.$3t=0,this.X3t=xh.create(),this.Y3t="high",this.Z3t=this.Y3t,this.K3t=!1,this.Q3t=[],this.tFt=new Set,this.sFt=self.C3_Shaders,this.iFt=T.hn(T.qg.FR,{ER:()=>[this.y9(),this.w9()],PR:()=>this.eFt(),RR:t=>this.hFt(t),getTime:()=>this.FO().wD(),AR:()=>this.FO().bO()}),this.nFt=0,this.rFt=0,this.oFt=NaN,this.aFt=null,this.lFt=new Map,this.uFt=NaN,this.cFt=new Map,this.fFt="",this.dFt=1,this.pFt=T.hn(T.Rect),this.mFt="",this.gFt=null,this.yFt=null,this.wFt=0,this.SFt=0,this.bFt=-1,this.vFt=0,this.MFt=t=>this.vFt=t.progress,this.xFt=null,this.GFt={TFt:null,_Ft:null,IFt:null},this.CFt=0,this.EFt=0,this.PFt=0,this.RFt="fade-in",this.AFt=null,this.FFt=new Promise(t=>this.AFt=t)}DFt(t){this.E3t=t}OFt(t){this.T3t=!!t}LFt(t){this.vy=t}kFt(){return this.vy}NFt(t){this.j3t=t}BFt(t,s){this.H3t=t,this.V3t=s}WFt(t){this.P3t=!!t}jFt(t){this.R3t=t}async Co(t){let s=t.canvas,i=(this.G3t.push({canvas:s,HFt:null}),this.tf.u4("runtime","window-resize",t=>this.VFt(t)),this.tf.u4("runtime","fullscreenchange",t=>this.UFt(t)),this.tf.u4("runtime","fullscreenerror",t=>this.zFt(t)),s.addEventListener("webglcontextlost",t=>this.JFt(t)),s.addEventListener("webglcontextrestored",t=>this.qFt(t)),this.K3t=!!t.isFullscreen,this.D3t=t.cssDisplayMode,navigator.gpu&&this.T3t),e=!1;if(i)try{await this.$Ft(!0)}catch(t){this.XFt("WebGPU",t),this.I3t=null}if(!this.Tb())try{await this.YFt(!0)}catch(t){this.XFt("WebGL",t),this._3t=null}if(this.Tb()||(e=!0),!this.Tb()&&i)try{await this.$Ft(!1)}catch(t){this.XFt("WebGPU",t),this.I3t=null}if(!this.Tb())try{await this.YFt(!1)}catch(t){this.XFt("WebGL",t),this._3t=null}const h=this.Tb();if(!h)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");h.ib(e),this.I3t&&(this.I3t.ZFt=()=>this.KFt(),this.I3t.QFt=()=>this.tDt()),"normalized"===this.vy?h.yw():(h.ww(),h.mw(this.j3t)),this.jI(t.windowInnerWidth,t.windowInnerHeight,!0),await this.eAt()}XFt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async $Ft(t){let s={uy:this.H3t,my:this.V3t},i=!0;"no"===this.R3t?i=!1:"auto"===this.R3t&&(i=T.hi.di);const e={powerPreference:this.E3t,depth:this.tf.GJ(),failIfMajorPerformanceCaveat:t,sDt:this.tf._9(),iDt:this.tf.eDt(),YC:this.tf.hDt(),nDt:i};this.I3t=T.hn(T.qg.WebGPURenderer,s),await this.I3t.VM(this.G3t[0].canvas,e)}async YFt(t){const s={alpha:!0,powerPreference:this.E3t,XC:"xbox-uwp-webview2"!==this.tf.yL(),depth:this.tf.GJ(),YC:this.tf.hDt(),failIfMajorPerformanceCaveat:t,uy:this.H3t,my:this.V3t};this.P3t&&(s.ZC=1),this._3t=T.hn(T.qg.tE,this.G3t[0].canvas,s),await this._3t.hw()}async rDt(){if(this.sFt){const t=[];for(const[s,i]of Object.entries(this.sFt)){i.src=i.wgsl;const e=T.qg.WebGPUShaderProgram.gG();t.push(this.I3t.iP(Object.assign({WM:e,name:s},i)))}await Promise.all(t)}}async oDt(){if(this.sFt){const s=[];for(const[i,e]of Object.entries(this.sFt)){let t;if(e.glslWebGL2&&2<=this._3t.I2())e.src=e.glslWebGL2,t=T.qg.NM.yG();else{if(!e.glsl)throw new Error(`shader '${i}' does not support WebGL 1`);e.src=e.glsl,t=T.qg.NM.gG()}s.push(this._3t.iP(Object.assign({WM:t,name:i},e)))}await Promise.all(s),this._3t.eP(),this._3t.Pw()}this._3t.gR()&&(this.aFt=T.hn(T.qg.BC,this._3t))}async eAt(){this.I3t?await this.rDt():this._3t&&await this.oDt();const t=this.Tb();t.tb(this.Zy),t.gR()&&(this.oFt=0);for(const s of this.tf.aDt()){for(const i of s.Nk())i.eAt(t);s.eAt(t),s._6()}this.C3t=new self.V8(this.tf,t)}nn(){this.tf=null,this._3t=null,this.G3t.length=0}PF(){return this.tf.PF()}VFt(t){const s=this.tf;if(!s.lDt()){const i=t.devicePixelRatio,e=(this.PF()&&(self.devicePixelRatio=i),s.uDt(i),this.K3t=!!t.isFullscreen,this.D3t=t.cssDisplayMode,this.jI(t.innerWidth,t.innerHeight),s.bO(),new T.Event("window-resize")),h=(e.data=t,s.Lf().Jf(e),new T.Event("resize"));h.cDt=this.TL(),h.fDt=this.IL(),h.dDt=this.EL(),h.pDt=this.RL(),s.EX(h),s.g4()&&(s.idt()||self.C3Debugger.IsDebuggerPaused())&&s.r3()}}UFt(t){this.K3t=!!t.isFullscreen,this.jI(t.innerWidth,t.innerHeight,!0),this.tf.bO()}zFt(t){this.K3t=!!t.isFullscreen,this.jI(t.innerWidth,t.innerHeight,!0),this.tf.bO()}jI(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.A3t!==t||this.F3t!==s||i){this.A3t=t,this.F3t=s;const e=this.mDt();"letterbox-scale"===e?this.gDt(t,s):"letterbox-integer-scale"===e?this.yDt(t,s):"off"===e?this.wDt(t,s):this.SDt(t,s),this.bDt(e);for(const{canvas:r}of this.G3t)r.width=this.k3t,r.height=this.N3t;this.tf.hf("canvas","update-size",{marginLeft:this.B3t,marginTop:this.W3t,styleWidth:this.O3t,styleHeight:this.L3t,displayScale:this.Hj()});const h=this.Tb();h.jI(this.k3t,this.N3t,!0);for(const o of this.Q3t)h.uR(o);T.Lr(this.Q3t),this.vDt();const n=this.tf.$D();n.ZX(),n.KX()}}vDt(){this.Tb().bw(this.X3t,this.y9()/this.w9())}S9(){return this.X3t}gDt(t,s){const i=this.tf.AL(),e=this.tf.AF(),h=this.tf.DF(),n=e/h,r=t/s;if(n<r){const o=s*n;this.O3t=Math.round(o),this.L3t=s,this.B3t=Math.floor((t-this.O3t)/2),this.W3t=0}else{const a=t/n;this.O3t=t,this.L3t=Math.round(a),this.B3t=0,this.W3t=Math.floor((s-this.L3t)/2)}this.k3t=Math.round(this.O3t*i),this.N3t=Math.round(this.L3t*i),this.tf.MDt(e,h)}yDt(t,s){let i=this.tf.AL(),e=(1!==i&&(t+=1,s+=1),this.tf.AF()),h=this.tf.DF(),n=e/h,r=t/s,o;if(n<r){const a=s*n;o=a*i/e}else{const l=t/n;o=l*i/h}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.k3t=Math.round(e*o),this.N3t=Math.round(h*o),this.O3t=this.k3t/i,this.L3t=this.N3t/i,this.B3t=Math.max(Math.floor((t-this.O3t)/2),0),this.W3t=Math.max(Math.floor((s-this.L3t)/2),0),this.tf.MDt(e,h)}SDt(t,s){const i=this.tf.AL(),e=(this.O3t=t,this.L3t=s,this.k3t=Math.round(this.O3t*i),this.N3t=Math.round(this.L3t*i),this.B3t=0,this.W3t=0,this.Hj());this.tf.MDt(this.O3t/e,this.L3t/e)}wDt(t,s){const i=this.tf.AL();this.O3t=this.tf.pJ(),this.L3t=this.tf.mJ(),this.k3t=Math.round(this.O3t*i),this.N3t=Math.round(this.L3t*i),this.xDt()?(this.B3t=Math.floor((t-this.O3t)/2),this.W3t=Math.floor((s-this.L3t)/2)):(this.B3t=0,this.W3t=0),this.tf.MDt(this.tf.pJ(),this.tf.mJ())}bDt(i){if("high"===this.Y3t)this.PA=this.k3t,this.RA=this.N3t,this.Z3t="high";else{let t,s;if(s="off"===this.mDt()?(t=this.tf.pJ(),this.tf.mJ()):(t=this.tf.AF(),this.tf.DF()),this.k3t<t||this.N3t<s)this.PA=this.k3t,this.RA=this.N3t,this.Z3t="high";else if(this.PA=t,this.RA=s,this.Z3t="low","scale-inner"===i){const e=t/s,h=this.A3t/this.F3t;h<e?this.PA=this.RA*h:e<h&&(this.RA=this.PA/h)}else if("scale-outer"===i){const n=t/s,r=this.A3t/this.F3t;n<r?this.PA=this.RA*r:r<n&&(this.RA=this.PA/r)}}}FO(){return this.tf}GDt(){return this.G3t[0].canvas}$U(){return this.iFt}xDt(){return this.K3t}TDt(){return this.D3t}_Dt(t){if(!Ca.has(t))throw new Error("invalid fullscreen mode");this.z3t=t;const s=this.tf.$D();s.ZX(),s.KX()}Wj(){return this.z3t}IDt(t){if(!Ca.has(t))throw new Error("invalid fullscreen mode");this.J3t=t;const s=this.tf.$D();s.ZX(),s.KX()}CDt(){return this.J3t}mDt(){return this.xDt()?this.CDt():this.Wj()}EDt(t){if(!Ea.has(t))throw new Error("invalid fullscreen scaling quality");this.Y3t=t,this.tf.$D().ZX()}PDt(){return this.Y3t}I9(){return this.Z3t}static RDt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}Ij(){return this.A3t}Cj(){return this.F3t}y9(){return this.PA}w9(){return this.RA}tb(t){this.Zy=!!t}ADt(t){this.U3t=t}T7(){return this.U3t}FDt(){return this.Tb().gC()}JFt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.Q3t=[],this.tFt.clear(),this.iFt.qb(),this._3t.qb(),this.tf.C$()}KFt(){console.log("[Construct] WebGPU device lost"),this.Q3t=[],this.tFt.clear(),this.iFt.qb(),this.tf.C$()}async qFt(t){await this._3t.$b(),await this.eAt(),await this.tf.DDt(),console.log("[Construct] WebGL context restored")}async tDt(){await this.eAt(),await this.tf.DDt(),console.log("[Construct] WebGPU device restored")}ODt(){return this._3t}LDt(){return this.I3t}Tb(){return this.I3t||this._3t}fIt(){return this.C3t}bL(){let t="";return t=this.tf.LDt()?"webgpu":"webgl"+this.tf.ODt().I2(),this.tf.Tb().eb()&&(t+="-software"),t}xL(){return this.tf.LDt()?this.tf.LDt().GetAdapterInfoString():this.tf.ODt().TR()}gN(){return"low"===this.Z3t?1/this.tf.AL():this.Hj()}Hj(){const t=this.mDt();if("off"===t||"crop"===t)return 1;const s=this.tf.AF(),i=this.tf.DF(),e=s/i,h=this.k3t/this.N3t;return"scale-inner"!==t&&e<h||"scale-inner"===t&&h<e?this.L3t/i:this.O3t/s}K9(){return"low"===this.I9()?1:this.Hj()}Y9(){return"low"===this.I9()?1:this.tf.AL()}kDt(t,s){this.q3t=t,this.$3t=s}EH(s,i,e,t=!0){i=i||this.PA,e=e||this.RA;const h=i/2+this.q3t,n=e/2+this.$3t;if(t){let t=this.S9();i===this.PA&&e===this.RA||(s.bw(Ra,i/e),t=Ra),s.nP(t)}const r=s.Tw(h,n,s.ow(e),h,n,0,e);s.cP(r)}NDt(t,s=!0){const i=this.TL(),e=this.IL(),h=i/2,n=e/2,r=(s&&t.nP(this.S9()),t.Tw(h,n,t.ow(e),h,n,0,e));t.cP(r)}EL(){return this.k3t}RL(){return this.N3t}TL(){return this.O3t}IL(){return this.L3t}oN(){return this.B3t}aN(){return this.W3t}c$(){return this.G3t.length}BDt(){return"undefined"!=typeof OffscreenCanvas&&this.GDt()instanceof OffscreenCanvas&&("Chromium"!==T.hi.ci||124<=T.hi.li)}async F$(e,h=!1){if(e<1)throw new Error("invalid HTML layer count");if(this.G3t.length!==e){let t=this.tf.$D().zD(),s={count:e,layersDomState:t.Uz().filter(t=>t.F5()).map(t=>t.qJ()),immediate:h,marginLeft:this.B3t,marginTop:this.W3t,styleWidth:this.O3t,styleHeight:this.L3t},i;if(i=this.PF()?await this.tf.MO("canvas","set-html-layer-count",s):self.c3_runtimeInterface._OnSetHTMLLayerCount(s),e<this.G3t.length)this.G3t.length=e;else for(const n of i.addedCanvases){n.width=this.k3t,n.height=this.N3t;const r=this.BDt()?"bitmaprenderer":"2d",o=n.getContext(r);if(!o)throw new Error(`failed to acquire '${r}' canvas context`);this.G3t.push({canvas:n,HFt:o})}this.tf.bO()}}_X(t){if(!(t>=this.G3t.length)){const s=this.GDt(),i=this.G3t[t].HFt;this.BDt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}}C9(s){s.depth=this.tf.GJ();let t=this.Q3t,i=t.findIndex(t=>t.AM(s)),e;return-1!==i?(e=t[i],t.splice(i,1)):e=this.Tb().nR(s),this.tFt.add(e),e}YU(t){if(!this.tFt.has(t))throw new Error("render target not in use");this.tFt.delete(t),this.Q3t.push(t)}eFt(){const t={h2:this.tf.OF()};return"low"===this.I9()&&(t.width=this.y9(),t.height=this.w9()),this.C9(t)}hFt(t){this.YU(t)}*WDt(){for(const t of this.tf.$D().$X())for(const s of t.t5()){const i=this.lFt.get(s);i&&(yield i)}}x9(t){if(!this.Tb().gR())return null;let s=this.lFt.get(t);return s||(s={L4:t,name:t.Jc(),jDt:T.hn(T.qg.BC,this._3t),HDt:0,VDt:0,UDt:0},this.lFt.set(t,s)),s.jDt}zDt(){const t=this.Tb();if(t.gR()&&0===this.rFt){this.rFt=t.KS(),this.uFt=NaN;for(const s of this.WDt())s.HDt=NaN}}JDt(){this._3t&&this._3t.gR()&&this.qDt(),this.I3t&&this.I3t.gR()&&this.$Dt()}qDt(){if(isNaN(this.uFt)&&(this.uFt=this.aFt.JC(this.nFt,this.rFt),!isNaN(this.uFt))){if(this.tf.g4())for(const t of this.WDt())if(t.HDt=t.jDt.JC(this.nFt,this.rFt),isNaN(t.HDt))return;if(this.aFt.qC(this.rFt),this.oFt=Math.min(this.uFt,1),this.tf.g4()){const i=new Map;for(const h of this.WDt())h.jDt.qC(this.rFt),h.VDt=Math.min(h.HDt,1),i.set(h.L4,h.VDt);for(const n of this.WDt()){const r=n.L4,o=i.get(r)||0,a=o-r.x5().reduce((t,s)=>t+(i.get(s)||0),0);n.UDt=T.cn(a,0,1)}const s=this.tf.zD(),e=this.oFt-s.Uz().reduce((t,s)=>t+(i.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(T.cn(e,0,1),this.oFt,[...this.WDt()])}this.nFt=this.rFt,this.rFt=0}}XDt(){return this.aFt}$Dt(){if(0!==this.rFt){for(let t=this.nFt;t<this.rFt;++t){const i=this.cFt.get(t);if(i&&!i.CC())return}let t=this.tf.zD(),r=T.Bo(t.n$()+1,0),s=0;for(let t=this.nFt;t<this.rFt;++t){const o=this.cFt.get(t);if(o){let i=o.EC(),e=BigInt(0),h=BigInt(0),n=BigInt(0);for(let t=0,s=Math.min(r.length,i.length/2);t<s;++t){const u=i[2*t],c=i[2*t+1],f=(u!==n&&(e===n||u<e)&&(e=u),c>h&&(h=c),c-u),d=Number(f)/1e9;r[t]+=d}const a=h-e,l=Number(a)/1e9;s+=l}}if(this.oFt=T.cn(s,0,1),this.tf.g4()){const e=t.t5(),h=new Map;for(let t=0,s=Math.min(e.length,r.length-1);t<s;++t){const g=r[t+1];h.set(e[t],g)}const n=[],p=new Map;for(const[y,w]of h){const S=[...y.T5()].reduce((t,s)=>t+(h.get(s)||0),0);p.set(y,S),n.push({name:y.Jc(),UDt:T.cn(w,0,1),VDt:T.cn(S,0,1)})}const m=this.oFt-t.Uz().reduce((t,s)=>t+(p.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(T.cn(m,0,1),this.oFt,n)}for(let t=this.nFt;t<this.rFt;++t)this.cFt.delete(t);this.nFt=this.rFt,this.rFt=0}}YDt(t){this.cFt.set(this.I3t.KS(),t)}PD(){return this.oFt}ZDt(t,s,i,e,h,n){return this.fFt=t,this.dFt=s,this.pFt.ul(i,e,h,n),this.gFt||(this.gFt=new Promise(t=>{this.yFt=t})),this.gFt}KDt(){if(this.fFt){let t=this.GDt(),s=this.pFt,i=T.cn(Math.floor(s.wl()),0,t.width),e=T.cn(Math.floor(s.Sl()),0,t.height),h=s.width(),n=(h=0===h?t.width-i:T.cn(Math.floor(h),0,t.width-i),s.height());if(n=0===n?t.height-e:T.cn(Math.floor(n),0,t.height-e),(0!==i||0!==e||h!==t.width||n!==t.height)&&0<h&&0<n){const r=T.Co(h,n),o=r.getContext("2d");o.drawImage(t,i,e,h,n,0,0,h,n),t=r}T.Eo(t,this.fFt,this.dFt).then(t=>{this.mFt&&URL.revokeObjectURL(this.mFt),this.mFt=URL.createObjectURL(t),this.gFt=null,this.yFt(this.mFt)}),this.fFt="",this.dFt=1}}QDt(){return this.mFt}tOt(t){t?this.wFt++:this.wFt--}sOt(){return 0<this.wFt}iOt(t){const s=this.Tb();if(2===t)this.xFt=T.hn(T.qg.ub,this.Tb()),this.xFt.gI("Arial"),this.xFt.yI(16),this.xFt.AI("center"),this.xFt.DI("center"),this.xFt.jI(300,200);else if(0===t){const i=this.tf.eOt();i&&i.vH(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.hOt("splash-images/splash-logo.svg").then(t=>{"done"===this.RFt?s.yM(t):this.GFt.TFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.nOt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.RFt?s.yM(t):this.GFt._Ft=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.nOt("splash-images/splash-website-512.png").then(t=>{"done"===this.RFt?s.yM(t):this.GFt.IFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async hOt(t){t=new URL(t,this.tf.rOt()).toString();const s=await T.vo(t),i=await this.tf.oOt(s,2048,2048);return this.Tb().hR(i,{l2:"high"})}async nOt(t){t=new URL(t,this.tf.rOt()).toString();const s=await T.vo(t);return this.Tb().hR(s,{l2:"high"})}aOt(){this.tf.hf("runtime","hide-cordova-splash")}lOt(){this.SFt=Date.now(),this.tf.Lf().addEventListener("loadingprogress",this.MFt),this.bFt=requestAnimationFrame(()=>this.uOt());const t=this.tf.cOt();3!==t&&this.aOt()}async fOt(){const t=this.Tb(),s=(this.vFt=1,this.tf.cOt());4===s&&await this.FFt,this.AFt=null,this.FFt=null,-1!==this.bFt&&(cancelAnimationFrame(this.bFt),this.bFt=-1),this.tf.Lf().removeEventListener("loadingprogress",this.MFt),this.MFt=null,this.xFt&&(this.xFt.nn(),this.xFt=null),this.tf.dOt(),t.$P(),this.GFt.TFt&&(t.yM(this.GFt.TFt),this.GFt.TFt=null),this.GFt._Ft&&(t.yM(this.GFt._Ft),this.GFt._Ft=null),this.GFt.IFt&&(t.yM(this.GFt.IFt),this.GFt.IFt=null),t.qP(0,0,0,0),t.YS(),this.RFt="done",this.nFt=t.KS(),3===s&&this.aOt()}uOt(){if(-1!==this.bFt){const t=this.Tb(),s=(t.$P(),this.bFt=-1,this.tf.yF().$V()),i=this.tf.cOt();if(3!==i&&(this.NDt(t),t.qP(0,0,0,0),t.SP(),t.Pw(),t.vP(null)),0===i)this.pOt(s);else if(1===i)this.mOt(s,120,0);else if(2===i)this.gOt(s);else if(3===i)T.Ar();else{if(4!==i)throw new Error("invalid loader style");this.yOt(s)}t.YS(),this.bFt=requestAnimationFrame(()=>this.uOt())}}gOt(t){t?this.xFt.RI(1,0,0):this.xFt.RI(.6,.6,.6),this.xFt.nf(Math.round(100*this.vFt)+"%");const s=this.O3t/2,i=this.L3t/2,e=(Aa.eu(s-150,i-100,150+s,100+i),this.Tb());e.vP(this.xFt.xM()),e.vS(Aa,this.xFt.wC())}mOt(t,s,i){const e=this.Tb(),h=(e.Lw(),t?e.yP(1,0,0,1):e.yP(.118,.565,1,1),this.O3t/2),n=this.L3t/2,r=s/2;I.ul(h-r,n-4+i,Math.floor(s*this.vFt),8),e.Rect(I),I.ul(h-r,n-4+i,s,8),I.offset(-.5,-.5),I.Rl(.5,.5),e.yP(0,0,0,1),e._S(I),I.Rl(1,1),e.yP(1,1,1,1),e._S(I)}pOt(t){const s=this.Tb(),i=this.tf.eOt();if(i){const e=i.xM();if(e){const h=e.Qp(),n=e.fm(),r=this.O3t/2,o=this.L3t/2,a=h/2,l=n/2;Aa.eu(r-a,o-l,r+a,o+l),s.vP(e),s.$l(Aa),this.mOt(t,h,16+l)}else this.mOt(t,120,0)}else this.mOt(t,120,0)}yOt(t){let s=this.Tb(),i=this.GFt.TFt,e=this.GFt._Ft,h=this.GFt.IFt,n=Date.now(),r=(0===this.CFt&&(this.SFt=n),this.tf.wOt()||this.tf.SOt()&&!this.tf.bOt()),o=r?0:200,a=r?0:3e3,l=1,u=("fade-in"===this.RFt?l=Math.min((n-this.SFt)/300,1):"fade-out"===this.RFt&&(l=Math.max(1-(n-this.PFt)/300,0)),s.Lw(),s.yP(.231*l,.251*l,.271*l,l),I.set(0,0,this.O3t,this.L3t),s.Rect(I),Math.ceil(this.O3t)),c=Math.ceil(this.L3t),f,d;256<this.L3t?(s.yP(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),I.ul(0,.8*c-d/2,f,d),s.Rect(I),t?s.yP(l,0,0,l):s.yP(.161*l,.953*l,.816*l,l),f=u*this.vFt,I.ul(.5*u-f/2,.8*c-d/2,f,d),s.Rect(I),s.yP(l,l,l,l),s.Pw(),e&&(f=1.5*T.cn(.22*c,105,.6*u),d=f/8,I.ul(.5*u-f/2,.2*c-d/2,f,d),s.vP(e),s.Rect(I)),i&&(f=Math.min(.395*c,.95*u),d=f,I.ul(.5*u-f/2,.485*c-d/2,f,d),s.vP(i),s.Rect(I)),h&&(f=1.5*T.cn(.22*c,105,.6*u),d=f/8,I.ul(.5*u-f/2,.868*c-d/2,f,d),s.vP(h),s.Rect(I))):(s.yP(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),I.ul(0,.85*c-d/2,f,d),s.Rect(I),t?s.yP(l,0,0,l):s.yP(.161*l,.953*l,.816*l,l),f=u*this.vFt,I.ul(.5*u-f/2,.85*c-d/2,f,d),s.Rect(I),s.yP(l,l,l,l),s.Pw(),i&&(f=.55*c,d=f,I.ul(.5*u-f/2,.45*c-d/2,f,d),s.vP(i),s.Rect(I))),this.CFt++,"fade-in"===this.RFt&&300<=n-this.SFt&&2<=this.CFt&&(this.RFt="wait",this.EFt=n),"wait"===this.RFt&&n-this.EFt>=a&&1<=this.vFt&&(this.RFt="fade-out",this.PFt=n),("fade-out"===this.RFt&&n-this.PFt>=300+o||r&&1<=this.vFt&&n-this.SFt<500)&&this.AFt()}}}{let H=self.Ds,V=self.C3Debugger,h=self.Qj,i={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},r=!0;H.vOt=class extends H.tn{constructor(t){t=Object.assign({},i,t),super(),this.MOt=t.messagePort,this.xOt=t.runtimeBaseUrl,this.GOt=t.previewUrl,this.TOt=!!t.headless,this._Ot=!!t.hasDom,this.IOt=!!t.isInWorker,r=t.ife,this.COt=!!t.useAudio,this.EOt=t.exportType,this.POt=t.isNWjs,this.ZH=!!t.isiOSCordova,this.ROt=!!t.isiOSWebView,this.AOt=!!t.isWindowsWebView2,this.FOt=!!t.isAnyWebView2Wrapper,this.DOt=!!t.isFBInstantAvailable,this.OOt=!("preview"!==this.EOt||!t.isDebug),this.LOt=this.OOt,this.kOt=this.OOt,this.NOt=0,this.BOt=[],this.WOt=[],this.jOt=!1,this.HOt="",this.VOt="",this.UOt="",this.zOt="",this.JOt=0,this.qOt=0,this.$Ot=0,this.BA=self.devicePixelRatio,this.XOt=0,this.YOt=0,this.ZOt=0,this.KOt=0,this.QOt=0,this.tLt=!1,this.Eg=!0,this.sLt=!1,this.iLt=!1,this.eLt=!1,this.hLt=null,this.f7=H.hn(H.qH,this,t),this.mq=H.hn(H.AX,this),this.Tft=H.hn(H.M0t,this),this.nLt=H.hn(H.NL,this,t.wrapperComponentIds),this.rLt=H.hn(H.bAt,this),this.cQ=H.hn(H.QX,this),this.oLt=H.hn(H.ult,this),this.aLt=H.hn(H.flt,this),this._lt=H.hn(H.blt,this),this.Gg=H.hn(H.fg,{mg:t=>this.lLt(t),yg:t=>this.uLt(t)}),this.cLt=new Map,this.fLt=[],this.dLt=new Map,this.pLt=new Map,this.mLt=0,this.gLt=[],this.yLt=new Set,this.wLt=[],this.SLt=[],this.bLt=new Map,this.vLt=!1,this.MLt=!1,this.xLt=0,this.GLt=0,this.TLt=new Map,this._Lt=new Set,this.ILt=new Set,this.CLt=[],this.ELt=[],this.PLt=null,this.RLt=!1,this.ALt="vsync",this.w2="trilinear",this.FLt=!1,this.DLt=!0,this.OLt=!1,this.LLt=!1,this.kLt=null,this.NLt={BLt:t=>{this.bFt=-1,this.WLt=-1,this.xZ(t)},jLt:t=>{this.WLt=-1,this.xZ(t,!1,"skip-render")},HLt:()=>{this.bFt=-1,this.r3()}},this.bFt=-1,this.WLt=-1,this.VLt=0,this.ULt=0,this.zLt=!1,this.JLt=!1,this.qLt=!1,this.$Lt=!0,this.XLt=!0,this.YLt=!1,this.ZLt=0,this.KLt=new H.n1(1),this.QLt=()=>Math.random(),this.tkt=0,this.skt=0,this.ikt=0,this.ekt=0,this.hkt=0,this.lCt=1,this.nkt=1/30,this.rkt=0,this.okt=H.hn(H.y0),this.akt=H.hn(H.y0),this.lkt=H.hn(H.y0),this.ukt=new Map,this.ckt=-1,this.fkt=0,this.dkt=0,this.pkt=-1,this.mkt=0,this.gkt=0,this.ykt=0,this.wkt=!1,this.Skt="",this.bkt=!1,this.vkt="",this.x4=null,this.Mkt="",this.xkt=null,this.Gkt=null,this.d_t=H.hn(H.Event.Lf),this.Tkt=new Map,this._kt=new Map,this.Ikt=0,this.Ckt=!1,this.Ekt=!1,this.Pkt=!1,this.Rkt=[],this.Akt={pretick:H.hn(H.Event,"pretick",!1),tick:H.hn(H.Event,"tick",!1),tick2:H.hn(H.Event,"tick2",!1),instancecreate:H.hn(H.Event,"instancecreate",!1),instancedestroy:H.hn(H.Event,"instancedestroy",!1),beforelayoutchange:H.hn(H.Event,"beforelayoutchange",!1),layoutchange:H.hn(H.Event,"layoutchange",!1)},this.Akt.instancecreate.S6=null,this.Akt.instancedestroy.S6=null,this.Jq=H.hn(H.Event.Lf),this.Fkt=null;const s=(t,s)=>H.oCt.URt(this,t,s);this.Dkt=H.hn(H._0,s),this.Okt=H.hn(H._0,s),this.Lkt=H.hn(H._0,s),this.kkt=H.hn(H.Nkt,this,t.jobScheduler),t.canvas&&(this.PLt=H.hn(H.x3t,this)),this.MOt.onmessage=t=>this._OnMessageFromDOM(t.data),this.u4("runtime","visibilitychange",t=>this.Bkt(t)),this.u4("runtime","wrapper-extension-message",t=>this.Wkt(t)),this.u4("runtime","get-remote-preview-status-info",()=>this.jkt()),this.u4("runtime","js-invoke-function",t=>this.Y0t(t)),this.u4("runtime","go-to-last-error-script",self.goToLastErrorScript),this.u4("runtime","offline-audio-render-completed",t=>this.Hkt(t)),this.d_t.addEventListener("window-blur",t=>this.Vkt(t)),this.d_t.addEventListener("window-focus",()=>this.Ukt()),this.cQ.FY(),this.aLt.FY(),this.zkt=null,this.Jkt=new WeakMap,this.qkt={keyboard:null,iO:null,eO:null,hO:null},this.$kt=new WeakMap,this.Xkt=[]}static VM(t){return H.hn(H.vOt,t)}nn(){H.Lr(this.fLt),this.dLt.clear(),this.pLt.clear(),this.mq.nn(),this.mq=null,this.Tft.nn(),this.Tft=null,this.nLt.nn(),this.nLt=null,this.f7.nn(),this.f7=null,this.rLt.nn(),this.rLt=null,this.cQ.nn(),this.cQ=null,this.oLt.nn(),this.oLt=null,this.aLt.nn(),this.aLt=null,this._lt.nn(),this._lt=null,this.Gg.nn(),this.Gg=null,this.PLt&&(this.PLt.nn(),this.PLt=null),this.d_t.nn(),this.d_t=null,this.Ykt=null}["_OnMessageFromDOM"](t){const s=t.type;if("event"===s)this.Zkt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.Kkt(t)}}Zkt(t){if(this.Pkt){const s=t.component,i=t.handler,e=t.data,h=t.dispatchOpts,n=!(!h||!h.dispatchRuntimeEvent),r=!(!h||!h.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(n){const l=new H.Event(i);l.data=e,this.d_t.Jf(l)}if(r){const u=new H.Event(i,!0);for(const[c,f]of Object.entries(e))u[c]=f;this.EX(u)}}const a=this.Tkt.get(s);if(a){const d=a.get(i);if(d){let t=null;try{t=d(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.Qkt(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this.Qkt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.Qkt(o,!1,""+t)}):this.Qkt(o,!0,t))}else n||r||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`)}else n||r||console.warn(`[Runtime] No DOM event handlers for component '${s}'`)}else this.Rkt.push(t)}Qkt(t,s,i){this.MOt.postMessage({type:"result",responseId:t,isOk:s,result:i})}Kkt(t){const s=t.responseId,i=t.isOk,e=t.result,h=this._kt.get(s);i?h.resolve(e):h.reject(e),this._kt.delete(s)}u4(t,s,i){let e=this.Tkt.get(t);if(e||(e=new Map,this.Tkt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}hf(t,s,i,e){this.MOt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}MO(t,s,i,e){const h=this.Ikt++,n=new Promise((t,s)=>{this._kt.set(h,{resolve:t,reject:s})});return this.MOt.postMessage({type:"event",component:t,handler:s,data:i,responseId:h},e),n}c8(t,s,i,e=-1){this.hf("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}f8(t,s,i){const e=this.Ikt++,h=new Promise((t,s)=>{this._kt.set(e,{resolve:t,reject:s})});return this.c8(t,s,i,e),h}Wkt(t){if(-1!==t.asyncId){const s=t.asyncId,i=this._kt.get(s);i.resolve(t.params),this._kt.delete(s)}else this.Zkt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}I4(t,s,i){this.u4("wrapper-extension:"+t,s,i)}T4(t){return this.nLt.T4(t)}t5t(t){if(!this.g4())throw new Error("not in debug mode");this.hf("runtime","post-to-debugger",t)}async fCt(t){H.Bbt(this),this.g4()?await V.fCt(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const s=await this.f7.bo("data.json");if(await this.s5t(s),await this.i5t(t),this.wOt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.ODt()){const i=this.ODt();console.info(`[C3 runtime] Hosted in ${this.PF()?"worker":"DOM"}, rendering with WebGL ${i.I2()} [${i.TR()}]`)}else this.LDt()&&console.info(`[C3 runtime] Hosted in ${this.PF()?"worker":"DOM"}, rendering with WebGPU [${this.LDt().GetAdapterInfoString()}]`);this.Tb().eb()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.Pkt=!0;for(const e of this.Rkt)this.Zkt(e);H.Lr(this.Rkt),this.PLt&&this.PLt.lOt();for(const h of t.runOnStartupFunctions)this.BOt.push(this.e5t(h));if(await Promise.all([this.f7.JV(),...this.BOt]),H.Lr(this.BOt),!this.f7.$V())return this.PLt&&await this.PLt.fOt(),await this.d_t.Uf(new H.Event("beforeruntimestart")),await this.$P(),this.MOt.postMessage({type:"runtime-ready"}),this;this.PLt&&this.PLt.aOt()}async e5t(t){try{await t(this.zkt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async s5t(t){const s=t.project,i=(this.HOt=s[0],this.VOt=s[16],this.UOt=s[31],this.zOt=s[38],this.JOt=s[36],s[39]||"loading-logo.png"),e=(this.FLt=!!s[9],this.qOt=this.ZOt=s[10],this.$Ot=this.KOt=s[11],this.rLt.r3t(this.qOt,this.$Ot),this.XOt=this.qOt/2,this.YOt=this.$Ot/2,this.ALt=s[37],this.RLt=!!s[40],this.w2=s[14],this.sLt=s[15],this.iLt=s[42],this.eLt=s[17],this.tLt=!!s[18],this.QOt=s[19],this.GLt=s[21],this.OLt=s[22],this.f7);if(e.xV(s[45]),e.s7(s[7],s[25]),e.TV(s[8]),e._V(s[32]),e.CV(s[28]),e.ZV(s[29]),0===this.QOt){let t;(t="flat"===e.jO()?e.EV()+i:i)&&(this.hLt=e.BV({url:t}))}this.PLt&&(this.PLt._Dt(H.x3t.RDt(s[12])),this.PLt.EDt(s[23]?"high":"low"),this.PLt.tb(0!==s[24]),this.PLt.DFt(s[34]),this.PLt.ADt(s[41]),this.PLt.OFt(s[13]),this.PLt.LFt(s[30]),this.PLt.BFt(s[46],s[47]),this.PLt.NFt(s[26]),this.PLt.WFt(s[48]),this.PLt.jFt(s[50]));const h=s[43],n=(h&&await this.h5t(h),this.n5t(),this.nLt.tTt(),this.CLt=self.r5t(),s[2]);for(const l of n[1])this.nLt.sTt(l);for(const u of n[0])this.nLt.QGt(u);this.CLt=self.r5t(),this.o5t(),this.nLt.nTt();for(const c of s[3]){const f=H.ylt.VM(this,this.fLt.length,c);this.fLt.push(f),this.dLt.set(f.Jc().toLowerCase(),f),this.pLt.set(f.zz(),f)}for(const d of s[4]){const p=this.fLt[d[0]];p.Z_t(d)}for(const m of s[27]){const g=m.map(t=>this.fLt[t]);this.gLt.push(H.hn(H.YIt,this,g))}this.a5t();for(const y of this.fLt)y.Q_t();for(const w of s[5])this.mq.VM(w);const r=s[1];if(r){const S=this.mq.VX(r);S&&this.mq.jX(S)}for(const b of s[35])this.oLt.VM(b);for(const v of s[33])this.cQ.VM(v);for(const M of s[44])this.aLt.VM(M);this.aLt.mlt()||(this.aLt.nn(),this.aLt=null);for(const x of s[49])this._lt.VM(x);this._lt.Glt()||(this._lt.nn(),this._lt=null);for(const G of s[6])this.Tft.VM(G);this.Tft.Q0t(),this.l5t(),H.Lr(this.CLt),this.Ok();let o="any",a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.hf("runtime","set-target-orientation",{targetOrientation:o})}async h5t(t){const s=t.format;"image-sequence"===s?this.kLt=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===s?this.kLt=new self.C3ExportToGIF(this,t):"webm"===s?this.kLt=new self.C3ExportToWebMVideo(this,t):"mp4"===s&&(this.kLt=new self.C3ExportToMP4Video(this,t)),this.ALt="unlimited-frame",this.PLt._Dt("off"),this.BA=1,self.devicePixelRatio=1,await this.MO("runtime","set-exporting-to-video",{message:this.kLt.GetExportingMessageForPercent(0),duration:this.kLt.q6()})}cOt(){return this.QOt}lDt(){return null!==this.kLt}u5t(){return this.kLt.q6()}c5t(){return this.kLt.GetFramerate()}f5t(){return this.kLt.fCt({width:this.PLt.EL(),height:this.PLt.RL()})}d5t(){const t=this.VLt/this.c5t();return this.kLt.AddFrame(this.PLt.GDt(),t)}p5t(){this.kLt&&this.kLt.bit()}Hkt(t){this.kLt.OnOfflineAudioRenderCompleted(t)}m5t(){return this.kLt.YS()}SOt(){return this.DOt}Dg(){return this.Eg}_O(t){this.BOt.push(t)}O$(t){this.jOt=!!t}g5t(t){this.jOt&&this.WOt.push(t)}j$(){return this.WOt}U_t(){return this.mLt++}sIt(){return this.mLt}QRt(t){this.yLt.add(t)}tAt(t){this.yLt.delete(t)}aDt(){return this.yLt}async i5t(t){this.PLt&&(await this.PLt.Co(t),this.PLt.iOt(this.QOt))}async $P(){this.zLt=!0,this.tkt=Date.now();let s=null,t=new Promise(t=>s=t);if(this.tLt){for(const h of this.fLt)h.Lz()||h.uIt()||!h.VL()||h.KMt();(async()=>{await this.f7.JV(),await t,this.Eg=!1,this.y5t()})()}else this.Eg=!1;this.f7.qV(),this.g4()&&V.RuntimeInit(r);for(const n of this.mq.ZD())n.nX();this.lDt()&&await this.f5t();const i=this.mq.HX(),e=(await i.S$(null,this.Tb()),await i.E$(!0),this.fkt=performance.now(),s(),this.tLt||this.y5t(),await this.MO("runtime","before-start-ticking"));e.isSuspended&&!this.lDt()?(this.ZLt++,this.YLt=!0):this.xZ()}y5t(){this.r4(H.Q$.K$.Z$.w5t,null,null),this.hf("runtime","register-sw")}nyt(t){t=Math.floor(t);const s=this.CLt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}o5t(){for(const t of self.S5t){const s=H.first(Object.keys(t));this.ELt.push(s)}}x1t(t){t=Math.floor(t);const s=this.ELt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}b5t(){return this._Ot}v5t(){return this.TOt}PF(){return this.IOt}rOt(){return this.xOt}M5t(){return this.GOt}JF(){return this.Tft}nD(){return this.Tft.nD()}d1t(){return this.Tft.d1t()}KF(){return this.Tft.KF()}p1t(){return this.Tft.p1t()}kbt(){return 0===this.d1t().Uft()}g1t(){return this.Tft.g1t()}HRt(){return this.nLt}YV(){return this.nLt.YV()}fz(t){if((t=Math.floor(t))<0||t>=this.fLt.length)throw new RangeError("invalid index");return this.fLt[t]}x5t(t){return this.dLt.get(t.toLowerCase())||null}v8(t){return this.pLt.get(t)||null}Bht(t){const s=H.NL.hk(t);return s?s.lk():null}Oz(){return this.fLt}*G5t(){for(const t of this.fLt)t.Lz()||(yield*t.instances())}Lf(){return this.d_t}HF(){return this.Jq}EX(t){t.runtime=this.BL();const s=this.g4()&&!this.Tft.Fk();s&&V.StartMeasuringScriptTime(),this.Jq.dispatchEvent(t),s&&V.AddScriptTime()}$$(t){return t.runtime=this.BL(),this.Jq.Uf(t)}AF(){return this.qOt}DF(){return this.$Ot}T5t(t,s){if(this.qOt!==t||this.$Ot!==s){this.qOt=t,this.$Ot=s;const i=this.$D();i.ZX(),i.KX()}}pJ(){return this.ZOt}mJ(){return this.KOt}MDt(t,s){if(this.ZOt!==t||this.KOt!==s){this.ZOt=t,this.KOt=s;const i=this.$D();i.ZX(),i.KX()}}uDt(t){this.lDt()||(this.BA=t)}AL(){return this.BA}u9(){return this.XOt}c9(){return this.YOt}vL(){return this.PLt}y9(){return this.PLt?this.PLt.y9():this.ZOt}w9(){return this.PLt?this.PLt.w9():this.KOt}gN(){return this.PLt?this.PLt.gN():1}Hj(){return this.PLt?this.PLt.Hj():1}K9(){return this.PLt?this.PLt.K9():1}Y9(){return this.PLt?this.PLt.Y9():1}oN(){return this.PLt?this.PLt.oN():0}aN(){return this.PLt?this.PLt.aN():0}_5t(){return this.PLt?this.PLt.TL():0}I5t(){return this.PLt?this.PLt.IL():0}Wj(){return this.PLt?this.PLt.Wj():"off"}C9(t){return this.PLt?this.PLt.C9(t):null}YU(t){this.PLt&&this.PLt.YU(t)}_9(){return this.sLt}eDt(){return this.iLt}hDt(){return this.eLt}PD(){return this.PLt?this.PLt.PD():NaN}TM(){return"nearest"!==this.OF()}AD(){return this.ALt}FD(t){this.ALt!==t&&(this.ALt=t,-1!==this.bFt||-1!==this.WLt)&&(this.C5t(),this.E5t())}OF(){return this.w2}$_t(){return this.tLt}eOt(){return this.hLt}dOt(){this.hLt&&(this.hLt.aI(),this.hLt.nn(),this.hLt=null)}$D(){return this.mq}zD(){return this.mq.zD()}XQ(){return this.cQ}P5t(){return this.oLt}HCt(){return this.aLt}qlt(){return this._lt}yF(){return this.f7}BV(t){return this.f7.BV(t)}Ek(t,s,i,e,h,n){if(n&&this.aLt){if(t instanceof H.ylt&&t.Lz()){const o=t.Hmt(),a=Math.floor(this.UD()*o.length);return this.Ek(o[a],s,i,e,h,n)}const r=this.aLt.glt(t,n);if(r){const l=this.vz(r,s,!1,i,e,!1,h,void 0,h);return this.aLt.wlt(l,n),l}}return this.vz(t,s,!1,i,e,!1,h,void 0,h)}vz(t,s,i,e,h,n,r,o,a){let l=null,u=null;if(t instanceof H.ylt){if((u=t).Lz()){const b=u.Hmt(),v=Math.floor(this.UD()*b.length);u=b[v]}l=u.pz()}else l=t,u=this.fz(l[1]);const c=u.pk().VL();if(this.Eg&&c&&!u.uIt())return null;const f=s;c||(s=null);let d;d=i&&!n&&l&&!this.TLt.has(l[2])?l[2]:this.GLt++;const p=l?l[0]:null,m=H.hn(H.Instance,{runtime:this,wN:u,L4:s,cCt:p,mCt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.TLt.set(d,m);let g=null,y=(c&&(g=m.dO(),void 0!==e&&void 0!==h&&(g.nv(e),g.av(h)),u.NIt(!0)),s&&(a||s.xz(m,!0),s.XD().v$(u)),this.xLt++,!0);if(o){const M=o.SN();if(M.RN()&&u.RN()){const x=u.y$(),G=M.y$();x===G&&(y=!1)}}if(u.RN()&&!i&&!n&&y){const T=new Set;for(const _ of u.y$().iX())if(_!==u){const I=this.R5t(_,g,T);if(I){const C=this.vz(I,f,!1,g?g.hv():e,g?g.ov():h,!0,!1,void 0,a);m.eX(C)}else{const N=this.vz(_,f,!1,g?g.hv():e,g?g.ov():h,!0,!1,void 0,a);m.eX(N)}}for(const E of m.AN()){E.eX(m);for(const P of m.AN())E!==P&&E.eX(P)}}if(c&&!i&&r&&this.A5t(m,p,g,s,e,h,a),u.RN()&&!i&&!n&&r)for(const R of m.AN()){const A=R.dO();if(A){const B=R.pk(),F=R.SN().pz()[0];B.VL()?this.A5t(R,F,A,s,A.hv(),A.ov(),a):this.A5t(R,F,A,s,void 0,void 0,a)}}if(!n&&r){void 0===e&&(e=p[0]),void 0===h&&(h=p[1]);const D=g.mB(),W=e-g.hv()+D.hv(),j=h-g.ov()+D.ov();D.B4(W,j)}u.FIt();const L=l?H.$r(l[5]):null,k=l?l[4].map(t=>H.$r(t)):null,w=c&&p&&p[13];if(w&&m.vCt(),m.aIt(L,k),w){const O=p[13];m.a6().gxt(O[2],O[0],O[1])}this.SLt.push(m),this.vLt=!0,this.g4()&&V.InstanceCreated(m);const S=this.Akt.instancecreate;return S.S6=m,this.d_t.dispatchEvent(S),m}BEt(t){const s=t[0],i=t[1],e=t[2],h=t[6];if(h)return h;const n=this.mq.UX(s),r=n.pO(i);return r.yz(e)}R5t(t,s,i){const e=s?.jCt()??[];for(const h of e){const n=this.BEt(h),r=!!h[4],o=this.fz(n[1]);if(!i.has(n)&&t===o&&r)return i.add(n),n}}A5t(a,t,s,l,u,c,f){const i=s.rRt(),e=s.jCt();if(a.dO().oRt(i),e){void 0===u&&(u=t[0]),void 0===c&&(c=t[1]);const d=new Set,p=t[0],m=t[1];for(const g of e){let t=g[0],s=g[1],i=g[2],e=g[3],h=!!g[4],n=g[5],r=g[6],o;if(r)o=r;else{const b=this.mq.UX(t),v=b.pO(s);o=v.yz(i)}const y=this.fz(o[1]),w=a.VCt(y),S=d.has(y);if(w&&!S&&h){const M=a.UCt(y),x=(M.dO().fCt(o[0]),u+o[0][0]-p),G=c+o[0][1]-m;M.dO().B4(x,G),M.dO().oRt(n),a.xB(M,{CB:!!(e>>0&1),PB:!!(e>>1&1),AB:!!(e>>2&1),OB:!!(e>>3&1),kB:!!(e>>4&1),zB:!!(e>>5&1),BB:!!(e>>6&1),jB:!!(e>>7&1),VB:!!(e>>8&1)}),d.add(y)}else{const T=u+o[0][0]-p,_=c+o[0][1]-m,I=this.vz(o,l,!1,T,_,!1,!0,a,f);I.dO().oRt(n),a.xB(I,{CB:!!(e>>0&1),PB:!!(e>>1&1),AB:!!(e>>2&1),OB:!!(e>>3&1),kB:!!(e>>4&1),zB:!!(e>>5&1),BB:!!(e>>6&1),jB:!!(e>>7&1),VB:!!(e>>8&1)})}}}}_N(i){if(!this._Lt.has(i)){let t=i.SN(),s=this.bLt.get(t);if(s){if(s.has(i))return;s.add(i)}else(s=new Set).add(i),this.bLt.set(t,s);if(this.g4()&&V.InstanceDestroyed(i),i.xCt(),this.vLt=!0,i.RN())for(const e of i.AN())this._N(e);for(const h of i.children())h.JB()&&this._N(h);if(!this.mq.Dk()&&!this.wkt){const n=this.JF();n.Rk(!0),i.tEt(),n.Rk(!1)}i.sEt(this.mq.Dk())}}Ok(){this.vLt&&(this.MLt=!0,this.F5t(),this.D5t(),this.MLt=!1,this.vLt=!1,this.bO())}F5t(){for(const t of this.SLt){const s=t.SN();s.xz(t);for(const i of s.P1t())i.xz(t),i.FIt()}H.Lr(this.SLt)}D5t(){this.d_t.Ef(!0);for(const[t,s]of this.bLt.entries())this.O5t(t,s),s.clear();this.bLt.clear(),this.d_t.Ef(!1)}O5t(t,s){for(const i of s){const e=this.Akt.instancedestroy,h=(e.S6=i,this.d_t.dispatchEvent(e),this.TLt.delete(i.FN()),this.ukt.delete(i),i.dO());h&&(h.uRt(),h.Iz(),h.xCt()),this._Lt.add(i),this.xLt--}H.zr(t.Gk(),s),t.FIt(),this.ILt.add(t);for(const n of t.P1t())H.zr(n.Gk(),s),n.FIt(),this.ILt.add(n);if(t.pk().VL()){const r=new Set([...s].map(t=>t.dO().pO()));for(const o of r)o.WJ(s)}}OIt(){return this.SLt}*Hvt(t){for(const s of this.OIt())t.Lz()?s.SN().Nbt(t)&&(yield s):s.SN()===t&&(yield s)}oIt(){return this.GLt++}lIt(t,s){this.TLt.set(t,s)}g8(t){this.XLt!==(t=!!t)&&(this.XLt=!!t,this.XLt)&&this.YLt&&(this.S8(!1),this.YLt=!1)}y8(){return this.XLt}C$(){this.d_t.dispatchEvent(H.hn(H.Event,"renderercontextlost")),this.S8(!0);for(const s of this.fLt)!s.Lz()&&s.cIt()&&s._$();const t=this.zD();t&&t.C$(),H.aTt.G7(),H.jV.G7()}async DDt(){await this.zD().S$(null,this.Tb()),this.d_t.dispatchEvent(H.hn(H.Event,"renderercontextrestored")),this.S8(!1),this.bO()}Bkt(t){if(this.XLt){const s=t.hidden;this.S8(s),(this.YLt=s)||this.bO()}}Vkt(t){this.wOt()&&this.OLt&&!H.hi.mi&&!t.data.parentHasFocus&&(this.S8(!0),this.LLt=!0)}Ukt(){this.LLt&&(this.S8(!1),this.LLt=!1)}E5t(){const t=this.NLt;"vsync"===this.ALt?-1===this.bFt&&(this.bFt=self.requestAnimationFrame(t.BLt)):"unlimited-tick"===this.ALt?(-1===this.WLt&&(this.WLt=H.ao(t.jLt)),-1===this.bFt&&(this.bFt=self.requestAnimationFrame(t.HLt))):-1===this.WLt&&(this.WLt=H.ao(t.BLt))}C5t(){-1!==this.bFt&&(self.cancelAnimationFrame(this.bFt),this.bFt=-1),-1!==this.WLt&&(H.lo(this.WLt),this.WLt=-1)}fD(){return 0<this.ZLt}S8(t){if(!this.lDt()){const s=this.fD(),i=(this.ZLt+=t?1:-1,this.ZLt<0&&(this.ZLt=0),this.fD());if(!s&&i)console.log("[Construct] Suspending"),this.C5t(),this.d_t.dispatchEvent(H.hn(H.Event,"suspend")),this.r4(H.Q$.K$.Z$.L5t,null,null);else if(s&&!i){console.log("[Construct] Resuming");const e=performance.now();this.skt=e,this.fkt=e,this.ckt=0,this.dkt=0,this.pkt=0,this.mkt=0,this.ykt=0,this.gkt=0,this.d_t.dispatchEvent(H.hn(H.Event,"resume")),this.r4(H.Q$.K$.Z$.k5t,null,null),this.idt()||this.xZ(e)}}}e8(t){this.Dkt.nc(t)}o8(t){this.Okt.nc(t)}n8(t){this.Lkt.nc(t)}h8(t){this.Dkt.m0(t)}a8(t){this.Okt.m0(t)}r8(t){this.Lkt.m0(t)}N5t(t,s){let i=s?performance.now():0,e;return t instanceof h?(e=t.y4(),s&&V.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.xZ(),s&&V.AddIndividualBehaviorTickTime(t.m6(),performance.now()-i)),e}B5t(){const t=this.g4();this.Dkt.e1(!0);for(const s of this.Dkt)this.N5t(s,t);this.Dkt.e1(!1)}W5t(t,s){let i=s?performance.now():0,e;return t instanceof h?(e=t.u8(),s&&V.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.HGt(),s&&V.AddIndividualBehaviorTickTime(t.m6(),performance.now()-i)),e}j5t(){const t=this.g4();this.Okt.e1(!0);for(const s of this.Okt)this.W5t(s,t);this.Okt.e1(!1)}H5t(t,s){let i=s?performance.now():0,e;return t instanceof h?(e=t.S4(),s&&V.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.kxt(),s&&V.AddIndividualBehaviorTickTime(t.m6(),performance.now()-i)),e}V5t(){const t=this.g4();this.Lkt.e1(!0);for(const s of this.Lkt)this.H5t(s,t);this.Lkt.e1(!1)}*U5t(){const t=this.g4();this.Dkt.e1(!0);for(const s of this.Dkt){const i=this.N5t(s,t);H.No(i)&&(yield*i)}this.Dkt.e1(!1)}*z5t(){const t=this.g4();this.Okt.e1(!0);for(const s of this.Okt){const i=this.W5t(s,t);H.No(i)&&(yield*i)}this.Okt.e1(!1)}*J5t(){const t=this.g4();this.Lkt.e1(!0);for(const s of this.Lkt){const i=this.H5t(s,t);H.No(i)&&(yield*i)}this.Lkt.e1(!1)}async xZ(a,t,s){this.qLt=!0;const l="background-wake"===s,u="background-wake"!==s&&"skip-render"!==s,c=this.$D(),f=this.vL();if(this.zLt&&(!this.fD()||t||l)){let t=performance.now(),s=(this.JLt=!0,this.q5t(a||0),this.pkt++,this.$5t(),this.X5t()),i=(this.Ovt()&&await s,this.d_t.zf(this.Akt.pretick)),e=(i instanceof Promise&&await i,this.EX(this.Fkt.pretick),this.Y5t()),h=(this.Ovt()&&await e,this.Z5t()&&await this.K5t(),c.QD()&&await this.Q5t(),this.tNt()),n=(this.Ovt()&&await h,c.zD()),r=n.f$(),o=!1;if(-1!==r&&(n.d$(),f.c$()!==r)){const d=this.vL().F$(r);this.PF()&&(o=!0,await d)}this.hf("canvas","update-html-layer-dom-state",{layersDomState:n.Uz().filter(t=>t.F5()).map(t=>t.qJ())}),u&&this.r3(),o&&this.hf("canvas","cleanup-html-layers"),this.lDt()&&(await this.d5t(),this.wD()>=this.u5t())?this.m5t():(this.fD()||l||this.E5t(),this.VLt++,this.ULt++,this.JLt=!1,this.gkt+=performance.now()-t)}}async X5t(){const t=this.Tft,s=this.g4();this.Ok(),t.Rk(!0),this.U1t(this.zD()),s&&V.StartMeasuringTime(),this.Ovt()?await t.xdt():t.wdt(),s&&V.AddEventsTime(),this.z1t(),t.Rk(!1),this.Ok(),t.Rk(!0)}async Y5t(){const t=this.Tft,s=this.g4(),i=this.Ovt(),e=this.d_t,h=this.Akt,n=this.Fkt;s&&V.StartMeasuringTime(),i?await this.sNt(this.U5t()):this.B5t(),i?await this.sNt(this.z5t()):this.j5t(),s&&V.AddBehaviorTotalTickTime(),s&&V.StartMeasuringTime(),i?await this.iNt(h.tick):e.dispatchEvent(h.tick),s&&V.AddPluginTotalTickTime(),t.Rk(!1),this.EX(n.tick)}async tNt(){const t=this.Tft,s=this.d_t,i=this.Akt,e=this.Fkt,h=this.g4(),n=this.Ovt();h&&V.StartMeasuringTime(),n?await t.J1t(this.mq):t.V1t(this.mq),h&&V.AddEventsTime(),this.rLt.FAt(),this.$5t(),this.$Lt=!1,t.Rk(!0),h&&V.StartMeasuringTime(),n?await this.sNt(this.J5t()):this.V5t(),h&&V.AddBehaviorTotalTickTime(),h&&V.StartMeasuringTime(),n?await this.iNt(i.tick2):s.dispatchEvent(i.tick2),h&&V.AddPluginTotalTickTime(),t.Rk(!1),this.EX(e.tick2),n&&await t.edt()}$5t(){if(0!==this._Lt.size){const t=this.d_t;t.Ef(!0);for(const s of this.ILt)s.fdt().tft(this._Lt);this.ILt.clear(),this.Tft.Tdt(this._Lt);for(const i of this._Lt)i.nn();this._Lt.clear(),t.Ef(!1)}}async Q5t(){let t=this.$D(),s=0;for(;t.QD()&&s++<10;)await this.eNt(t.YX())}q5t(t){let s=0;if(this.lDt())s=1/this.c5t(),this.ikt=s,this.ekt=s;else if(0!==this.skt){const i=Math.max(t-this.skt,0);.5<(s=i/1e3)&&(s=0),this.ikt=s,this.ekt=H.cn(s,this.rkt,this.nkt)}this.skt=t,this.hkt=this.ekt*this.lCt,this.okt.nc(this.hkt),this.akt.nc(s*this.lCt),this.lkt.nc(this.ekt);for(const[e,h]of this.ukt)h.nc(this.ekt*e.MD());this.PLt&&this.PLt.JDt(),1e3<=t-this.fkt&&(this.fkt+=1e3,1e3<=t-this.fkt&&(this.fkt=t),this.dkt=this.ckt,this.ckt=0,this.mkt=this.pkt,this.pkt=0,this.ykt=Math.min(this.gkt/1e3,1),this.gkt=0,this.PLt&&this.PLt.zDt(),this.rLt.EAt(),this.g4())&&V.Update1sPerfStats()}SCt(t,s){if(s){if(!this.ukt.has(t)){const i=H.hn(H.y0);i.M0(this.okt),this.ukt.set(t,i)}}else this.ukt.delete(t)}bCt(t){const s=this.ukt.get(t);return s?s.Ks():this.wD()}async eNt(t){const s=this.d_t,i=this.$D(),e=i.zD();await e.aX(),e.I$(t,this.Tb()),e===t&&this.Tft.cX(),this.rLt.FAt(),this.$5t(),s.dispatchEvent(this.Akt.beforelayoutchange),H.Rf.$f(!0),await t.S$(e,this.Tb()),H.Rf.$f(!1),await t.E$(!1),s.dispatchEvent(this.Akt.layoutchange),this.bO(),this.$Lt=!0,this.Ok(),this.p5t()}bO(){this.DLt=!0}ODt(){return this.PLt?this.PLt.ODt():null}LDt(){return this.PLt?this.PLt.LDt():null}Tb(){return this.PLt?this.PLt.Tb():null}r3(){const i=this.PLt;if(i&&!i.FDt()){const e=this.Tb(),t=e.gR(),h=t&&e.hb(),n=t&&e.Mw();if(h&&e.iR(),this.DLt||this.lDt()){const r=this.mq.zD(),o=(this.ckt++,e.$P(),this.g4());o&&V.StartMeasuringTime(),this.DLt=!1;let t=null,s=(h&&(t=i.XDt().UC(),e.mR(t)),null);n&&(s=e.StartFrameTiming(2*(1+r.n$())),e.StartMeasuringRenderPassTime(0,1)),this.GJ()&&"low"===i.I9()?e.oP(i.y9(),i.w9()):e.aP(),this.hNt(this.Tb(),r),t&&e.yR(t),n&&(e.StopMeasuringRenderPassTime(),this.PLt.YDt(s)),e.YS(),o&&(V.AddDrawCallsTime(),V.UpdateInspectHighlight()),i&&i.KDt()}else e.QS()}}vX(t){return"low"===this.vL().I9()||t.hb()&&(this._9()||this.GJ())}hNt(s,i){s.Pw(),s.TP(),s.yP(1,1,1,1),s.rR(null),s.vP(null),s.YP(this.GJ()),this.vX(s)&&i.SX(s);const e=i.c$();for(let t=1;t<e;++t)i.TX(s,t),s.Mw()&&s.Restart();this.vX(s)||i.SX(s),i.GX(s)}r4(t,s,i){if(!this.zLt)return!1;let e=!this.JLt&&!this.Tft.odt(),h=0;e&&(h=performance.now());const n=this.g4(),r=(n&&this.D8(!1),this.Tft.Y1t(this.mq,t,s,i));if(e){const o=performance.now()-h;this.gkt+=o,n&&V.AddTriggersTime(o)}return n&&this.D8(!0),r}Txt(t,s,i){if(!this.Ovt())return this.r4(t,s,i);if(this.idt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.JLt||this.Tft.odt())return this.Tft.Q1t(this.mq,t,s,i);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async a4(t,s,i){if(!this.Ovt())return this.r4(t,s,i);if(!this.zLt)return!1;if(this.idt())return this.Tft.tdt(t,s,i);if(!this.zD())return this.Tft.Z1t(t,s,i);let e=performance.now(),h=this.Tft.Q1t(this.mq,t,s,i),n=h.next();for(;!n.done;)await this.$1t(n.value),n=h.next();return this.fD()||this.Tft.odt()||(await this.Tft.edt(),this.qLt&&!this.JLt&&this.E5t()),this.gkt+=performance.now()-e,n.value}_xt(t,s,i){const e=this.g4(),h=(e&&this.D8(!1),this.Tft.hdt(this.mq,t,s,i));return e&&this.D8(!0),h}Ixt(t,s,i){return this.Tft.ndt(this.mq,t,s,i)}Cxt(t){return this.KLt.nc(t)}U1t(t){this.wLt.push(t)}z1t(){if(!this.wLt.length)throw new Error("layout stack empty");this.wLt.pop()}cO(){return this.wLt.length?this.wLt.at(-1):this.zD()}pD(t){return t&&-1!==t.MD()?this.ekt*t.MD():this.hkt}vZ(){return this.hkt}MZ(){return this.ekt}gD(){return this.ikt}MD(){return this.lCt}xD(t){(isNaN(t)||t<0)&&(t=0),this.lCt=t}LD(t){this.rkt=Math.max(t,0)}OD(){return this.rkt}BD(t){this.nkt=Math.max(t,0)}ND(){return this.nkt}GD(){return this.dkt}_D(){return this.mkt}CD(){return this.ykt}nNt(){return this.tkt}wD(){return this.okt.Ks()}rNt(){return this.akt.Ks()}bD(){return this.lkt.Ks()}wtt(){return this.VLt}oNt(){return this.ULt}aNt(){return this.xLt}GF(){return this.HOt}_F(){return this.VOt}lNt(){return this.UOt}uNt(){return this.zOt}CF(){return this.JOt}aO(t){if(this.wkt)throw new Error("cannot call while loading state - wait until afterload event");return this.TLt.get(t)||null}sX(){this.TLt.clear();for(const t of this.fLt)if(!t.Lz())for(const s of t.Gk())this.TLt.set(s.FN(),s)}wOt(){return"preview"===this.EOt}g4(){return this.OOt}yL(){return this.EOt}wL(){return"nwjs"===this.yL()||this.POt}bOt(){return"cordova"===this.EOt}cNt(){return"Android"===H.hi.ni&&("cordova"===this.EOt||"playable-ad-single-file"===this.EOt||"playable-ad-zip"===this.EOt||"instant-games"===this.EOt)}fNt(){return this.ZH}dNt(){return this.ROt}SL(){return this.AOt}pNt(){return this.FOt}bF(){return this.rLt}rTt(){return this.nLt.rTt()}oTt(){return this.nLt.oTt()}GJ(){return this.RLt}mNt(){return this.Tb().uw(this.mJ())}ow(t){return this.Tb().ow(t||this.mJ())}gNt(){return this.$Lt}yNt(t){this.FLt!==(t=!!t)&&(this.FLt=t,this.$D().KX(),this.bO())}kF(){return this.FLt}wNt(t){if(!this.cLt.has(t)){const i=()=>this.SNt(t);this.cLt.set(t,i),t.Lf().addEventListener("animationframeimagechange",i)}const s=this.Gg.wg(t);return s.Fg()||s.Og().then(()=>this.bO()),s}SNt(t){this.Gg.Mg(t)}lLt(t){const s=[];for(const i of t.xIt())for(const e of i.W6()){const h=e.J6();s.push({source:e,width:h.Qp(),height:h.fm(),tag:e.fW()})}return{Rg:s}}async uLt(t){const s=H.hn(H.n1),i=[],h=new Map;for(const r of t.xIt())for(const o of r.W6()){const a=o.J6().CTt();h.has(a)||(h.set(a,null),i.push(s.nc(async()=>{const t=await a.C7();h.set(a,t)})))}await Promise.all(i);const e=[];for(const l of t.xIt())for(const u of l.W6())e.push(s.nc(async()=>{const t=u.J6(),s=h.get(t.CTt()),i=await t.ETt(s),e=await createImageBitmap(i);return{kg:e}}));const n=await Promise.all(e);for(const c of h.values())c instanceof ImageBitmap&&c.close&&c.close();return{Rg:n}}bNt(t){this.Skt=t,this.bkt=!1}vNt(){this.Skt="",this.bkt=!0}MNt(t){this.vkt=t}C2t(t){this.x4=t}xNt(){return this.Mkt}Z5t(){return!!(this.Skt||this.bkt||this.vkt||null!==this.x4)}async K5t(){if(this.Skt&&(this.Ok(),await this.GNt(this.Skt),this.TNt()),this.vkt&&(await this._Nt(this.vkt),this.TNt(),this.g4())&&V.StepIfPausedInDebugger(),this.bkt){const t=await this.INt();this.Mkt=t,await this.a4(H.Q$.K$.Z$.CNt,null),this.Mkt="",this.TNt()}if(null!==this.x4){this.Ok();try{await this.ENt(this.x4),this.Mkt=this.x4,await this.a4(H.Q$.K$.Z$.PNt,null),this.Mkt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.a4(H.Q$.K$.Z$.RNt,null)}this.TNt()}}TNt(){this.Skt="",this.bkt=!1,this.vkt="",this.x4=null}DL(){return this.xkt||(this.xkt=localforage.Ai({name:"c3-localstorage-"+this.lNt(),description:this.GF()})),this.xkt}ANt(){return this.Gkt||(this.Gkt=localforage.Ai({name:"c3-savegames-"+this.lNt(),description:this.GF()})),this.Gkt}async GNt(t){const s=await this.INt();try{await this.ANt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.Mkt=s,await this.a4(H.Q$.K$.Z$.CNt,null),this.Mkt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.a4(H.Q$.K$.Z$.FNt,null)}}async _Nt(t){try{const s=await this.ANt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.ENt(s),this.Mkt=s,await this.a4(H.Q$.K$.Z$.PNt,null),this.Mkt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.a4(H.Q$.K$.Z$.RNt,null)}}async INt(){const t={c3save:!0,version:1,rt:{time:this.wD(),timeRaw:this.rNt(),walltime:this.bD(),timescale:this.MD(),tickcount:this.wtt(),next_uid:this.GLt,running_layout:this.zD().zz(),start_time_offset:Date.now()-this.tkt},types:{},layouts:{},events:this.Tft.aq(),timelines:this.cQ.aq(),user_script_data:null};for(const i of this.fLt)i.Lz()||i.zIt()||(t.types[i.zz().toString()]=i.aq());for(const e of this.mq.ZD())t.layouts[e.zz().toString()]=e.aq();const s=this.DNt("save");return s.saveData=null,await this.$$(s),t.user_script_data=s.saveData,JSON.stringify(t)}H$(){return this.wkt}async ENt(t){const s=this.$D(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(1<i.version)throw new Error("C3 save data from future version");this.E2t(),this.d_t.dispatchEvent(H.hn(H.Event,"beforeload"));for(const a of this.G5t()){const l=a.SN();l.zIt()||a.TY()}let e=i.rt,h=(this.okt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.akt.Set(e.timeRaw),this.lkt.Set(e.walltime),this.lCt=e.timescale,this.VLt=e.tickcount,this.tkt=Date.now()-e.start_time_offset,e.running_layout),n=!(this.wkt=!0);if(h!==this.zD().zz()){const u=s.UX(h);if(!u)return;await this.eNt(u),n=!0}for(const[c,f]of Object.entries(i.layouts)){const d=parseInt(c,10),p=s.UX(d);p&&p.lq(f)}const r=new Set;for(const[m,g]of Object.entries(i.types)){const y=parseInt(m,10),w=this.v8(y);!w||w.Lz()||w.zIt()||w.lq(g,r)}for(const S of this.mq.ZD())for(const b of S.s5())b.uq();if(this.Ok(),this.sX(),this.wkt=!1,n){for(const v of this.G5t())v.V$();for(const[M,x]of Object.entries(i.types)){const G=parseInt(M,10),T=this.v8(G);!T||T.Lz()||T.zIt()||T.$It(x)}}this.GLt=e.next_uid,this.Tft.lq(i.events);for(const _ of this.fLt)if(!_.Lz()&&_.RN())for(const I of _.Gk()){const C=I.ON();for(const E of _.y$().iX())if(E!==_){const P=E.Gk();if(C<0||C>=P.length)throw new Error("missing sibling instance");I.eX(P[C])}}this.cQ.lq(i.timelines),s.ZX(),s.KX();for(const R of r)R.QCt();this.P2t(),this.d_t.dispatchEvent(H.hn(H.Event,"afterload")),this.EX(this.DNt("afterload"));for(const[A,F]of Object.entries(i.types)){const D=parseInt(A,10),O=this.v8(D);O&&O.qIt()}const o=this.DNt("load");o.saveData=i.user_script_data,await this.$$(o),this.bO()}ONt(t,s){return t.dO().sRt()-s.dO().sRt()}jRt(t,s){t.dO()&&!this.$kt.has(t)&&(this.$kt.set(t,s),this.Xkt.push(t))}E2t(){this.$kt=new WeakMap,H.Lr(this.Xkt)}P2t(t="full",s=null){this.Xkt.sort(this.ONt);for(const i of this.Xkt)i.IY(this.$kt.get(i),t,s);for(const e of this.Xkt)e.hEt(this.$kt.get(e),t,s);this.E2t()}async LNt(t){const s=await Promise.all(t.map(async t=>{const s=this.bOt()&&this.f7.PV();if(s||"playable-ad-single-file"===this.yL()){const i=await this.f7.vo(t);return URL.createObjectURL(i)}return new URL(t,location.href).toString()}));this.kkt.kNt(s)}NNt(t,s){this.kkt.BNt(t,s)}WNt(t,s){this.kkt.jNt(t,s)}HNt(t,s,i,e){return this.kkt.HNt(t,s,i,null,null,e)}VNt(t,s,i,e){return this.kkt.VNt(t,s,i,e)}UNt(){return this.kkt.zNt()}rO(t,s){this.hf("runtime","invoke-download",{url:t,filename:s})}async oOt(t,s,i,e,h,n){if(e=e||s,h=h||i,this.PF()){const r=await this.MO("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:h,imageBitmapOpts:n});return r.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,s,i,e,h);return n?self.createImageBitmap(o,n):o}}async JNt(t){return this.PF()?this.MO("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}qNt(){this.Ckt||(this.Ckt=!0,this.hf("runtime","enable-device-orientation"))}$Nt(){this.Ekt||(this.Ekt=!0,this.hf("runtime","enable-device-motion"))}UD(){return this.QLt()}XNt(t){this.QLt=t}jkt(){const t=this.Tb();return{fps:this.GD(),tps:this._D(),cpu:this.CD(),gpu:this.PD(),layout:this.zD()?this.zD().Jc():"",renderer:t.hb()?t.TR():t.GetAdapterInfoString()}}idt(){return!!this.g4()&&V.idt()}$1t(t){return this.Ovt()?V.$1t(t):Promise.resolve()}Pgt(){return!!this.Ovt()&&V.BreakNext()}YNt(t){this.LOt=!!t,this.ZNt()}KNt(){return this.LOt}Ovt(){return this.kOt}D8(t){t?this.NOt--:this.NOt++,this.ZNt()}ZNt(){this.kOt=this.g4()&&this.LOt&&0===this.NOt}$pt(){return this.g4()&&V.$pt()}M9(){return this.g4()&&this.Tb().gR()&&V.M9()}async sNt(t){if(t)for(const s of t)await this.$1t(s)}iNt(t){return this.sNt(this.d_t.qf(t))}Y0t(t){return this.Tft.Y0t(t.name,t.params)}GO(t){if(this.PF())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}BL(){return this.zkt}DNt(t){const s=H.hn(H.Event,t,!1);return s.runtime=this.zkt,s}n5t(){this.zkt=new self.pF(this),this.Fkt={pretick:this.DNt("pretick"),tick:this.DNt("tick"),tick2:this.DNt("tick2")}}a5t(){const t={};for(const s of this.fLt)t[s.x1t()]={value:s.ak(),enumerable:!0,writable:!1};this.zkt.VF(t)}l5t(){const t={};for(const s of this.JF().R1t())t[s.x1t()]=s.G1t();this.zkt.UF(t)}sO(){return this.qkt}ik(t,s){this.Jkt.set(t,s)}h5(t){return this.Jkt.get(t)}lL(t){if(!(t instanceof self.fk))throw new TypeError("expected IObjectClass");const s=this.h5(t);if(s&&s instanceof H.ylt)return s;throw new Error("invalid IObjectClass")}vk(t){if(!(t instanceof self.yN))throw new TypeError("expected IInstance");const s=this.h5(t);if(s&&s instanceof H.Instance)return s;throw new Error("invalid IInstance")}fO(t){if(!(t instanceof self.e6))throw new TypeError("expected IWorldInstance");const s=this.h5(t);if(s&&s instanceof H.Instance)return s;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=H.vOt.VM,self.C3_InitRuntime=(t,s)=>t.fCt(s)}{const Fa=self.Ds;Fa.Nkt=class extends Fa.tn{constructor(t,s){super(),this.tf=t,this.QNt=new Map,this.t4t=0,this.s4t=s.inputPort,s.outputPort.onmessage=t=>this.i4t(t),this.e4t=s.maxNumWorkers,this.h4t=1,this.n4t=!1,this.r4t=!1}zNt(){return this.e4t}kNt(t){this.s4t.postMessage({type:"_import_scripts",scripts:t})}BNt(t,s){this.s4t.postMessage({type:"_send_blob",blob:t,id:s})}jNt(t,s){this.s4t.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}HNt(t,s,i,e,h,n){if(i=i||[],"number"==typeof n&&(n=Math.floor(n))<=0)throw new Error("invalid maxWorkerNum");const r=this.t4t++,o={type:t,isBroadcast:!1,maxWorkerNum:n,jobId:r,params:s,transferables:i},a=new Promise((t,s)=>{this.QNt.set(r,{resolve:t,progress:e,reject:s,o4t:!1,maxWorkerNum:n})});return h&&h.d0(()=>this.a4t(r)),this.s4t.postMessage(o,i),this.l4t(),a}VNt(t,s,i,e){if(i=i||[],"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const h=this.t4t++,n={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:h,params:s,transferables:i};this.s4t.postMessage(n,i)}a4t(t){const s=this.QNt.get(t);s&&(s.o4t=!0,s.resolve=null,s.progress=null,s.reject=null,this.s4t.postMessage({type:"_cancel",jobId:t}))}i4t(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.u4t(e,s.result);break;case"progress":this.c4t(e,s.progress);break;case"error":this.f4t(e,s.error);break;case"ready":this.d4t();break;default:throw new Error(`unknown message from worker '${i}'`)}}u4t(t,s){const i=this.QNt.get(t);if(!i)throw new Error("invalid job ID");i.o4t||i.resolve(s),this.QNt.delete(t)}c4t(t,s){const i=this.QNt.get(t);if(!i)throw new Error("invalid job ID");!i.o4t&&i.progress&&i.progress(s)}f4t(t,s){const i=this.QNt.get(t);if(!i)throw new Error("invalid job ID");i.o4t||i.reject(s),this.QNt.delete(t)}d4t(){this.n4t&&(this.n4t=!1,this.h4t++,this.h4t<this.e4t?this.l4t():this.s4t.postMessage({type:"_no_more_workers"}))}p4t(){let t=0,s=[...this.QNt.values()].sort((t,s)=>{const i=t.maxWorkerNum||1/0,e=s.maxWorkerNum||1/0;return i-e});for(const i of s){const e=i.maxWorkerNum||1/0;t<e&&t++}return t}async l4t(){if(!(this.h4t>=this.e4t||this.n4t||this.r4t||this.p4t()<=this.h4t))try{this.n4t=!0;const t=await this.tf.MO("runtime","create-job-worker");t.outputPort.onmessage=t=>this.i4t(t)}catch(t){this.r4t=!0,this.n4t=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.h4t} so far)`,t)}}}}self.C3_Shaders={};{let S=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const h=""+i,n=""+e;return h<n?-1:n<h?1:0}},b=(S,self.Ds),i=null,e="",h="",n=[],r="",o="",a="",v=b.hn(b.v0t);b.Q$.K$=class extends b.EMt{constructor(t){super(t),this.g0t=this.tf.JF().A8(),this.ift=this.tf.JF().nD(),this.m4t=0,this.g4t=0,this.y4t=new Map}nn(){super.nn()}bO(){this.tf.bO()}r4(t){this.tf.r4(t,null,null)}w4t(t,s){return i&&t===e&&s===h||(i=new RegExp(t,s),e=t,h=s),i.lastIndex=0,i}S4t(t,s,i){if(t!==r||s!==o||i!==a){const e=this.w4t(s,i);n=t.match(e),r=t,o=s,a=i}return n}async b4t(t,s){if(s.length){this.m4t+=s.length;const i=[];for(const e of s)i.push(t.v$(e));await b.ho(i,()=>{this.g4t++}),this.g4t++,this.g4t===this.m4t&&(this.g4t=0,this.m4t=0,this.tf.r4(b.Q$.K$.Z$.v4t,null,null))}}XV(){return 0===this.m4t?1:this.g4t/this.m4t}M4t(t,s){for(const i of s)0===i.Ik()&&t.T$(i)}x4t(){return v}G4t(s){const i=this.tf.JF(),t=i.nD(),e=t.E8(),h=e.KF(),n=h.C8(),r=e.i0t(),o=t.P8(h),a=i.A8(),l=a.P8();if(l.S0t(s),r)for(let t=0;t<s&&!l.j8();++t)i.L8(n),l.B8(t),h.k8(e,o),i.N8(n);else for(let t=0;t<s&&!l.j8();++t)l.B8(t),h.k8(e,o);return t.H8(),a.H8(),!1}*T4t(s){const i=this.tf.JF(),t=i.nD(),e=t.E8(),h=e.KF(),n=h.C8(),r=e.i0t(),o=t.P8(h),a=i.A8(),l=a.P8();if(l.S0t(s),r)for(let t=0;t<s&&!l.j8();++t)i.L8(n),l.B8(t),yield*h.jgt(e,o),i.N8(n);else for(let t=0;t<s&&!l.j8();++t)l.B8(t),yield*h.jgt(e,o);return t.H8(),a.H8(),!1}_4t(){const s=this.tf.JF(),t=s.nD(),i=t.E8(),e=i.KF(),h=e.C8(),n=i.i0t(),r=t.P8(e),o=s.A8(),a=o.P8();if(n)for(let t=0;!a.j8();++t)s.L8(h),a.B8(t),e.k8(i,r)||a.mW(),s.N8(h);else for(let t=0;!a.j8();++t)a.B8(t),e.k8(i,r)||a.mW();return t.H8(),o.H8(),!1}*I4t(){const s=this.tf.JF(),t=s.nD(),i=t.E8(),e=i.KF(),h=e.C8(),n=i.i0t(),r=t.P8(e),o=s.A8(),a=o.P8();if(n)for(let t=0;!a.j8();++t){s.L8(h),a.B8(t);const l=yield*e.jgt(i,r);l||a.mW(),s.N8(h)}else for(let t=0;!a.j8();++t){a.B8(t);const u=yield*e.jgt(i,r);u||a.mW()}return t.H8(),o.H8(),!1}C4t(t,s,i){const e=this.tf.JF(),h=e.nD(),n=h.E8(),r=n.KF(),o=r.C8(),a=n.i0t(),l=h.P8(r),u=e.A8(),c=u.P8();if(c.F8(t),c.S0t(i),i<s)if(a)for(let t=s;t>=i&&!c.j8();--t)e.L8(o),c.B8(t),r.k8(n,l),e.N8(o);else for(let t=s;t>=i&&!c.j8();--t)c.B8(t),r.k8(n,l);else if(a)for(let t=s;t<=i&&!c.j8();++t)e.L8(o),c.B8(t),r.k8(n,l),e.N8(o);else for(let t=s;t<=i&&!c.j8();++t)c.B8(t),r.k8(n,l);return h.H8(),u.H8(),!1}*E4t(t,s,i){const e=this.tf.JF(),h=e.nD(),n=h.E8(),r=n.KF(),o=r.C8(),a=n.i0t(),l=h.P8(r),u=e.A8(),c=u.P8();if(c.F8(t),c.S0t(i),i<s)if(a)for(let t=s;t>=i&&!c.j8();--t)e.L8(o),c.B8(t),yield*r.jgt(n,l),e.N8(o);else for(let t=s;t>=i&&!c.j8();--t)c.B8(t),yield*r.jgt(n,l);else if(a)for(let t=s;t<=i&&!c.j8();++t)e.L8(o),c.B8(t),yield*r.jgt(n,l),e.N8(o);else for(let t=s;t<=i&&!c.j8();++t)c.B8(t),yield*r.jgt(n,l);return h.H8(),u.H8(),!1}P4t(i){const t=i.Tk(),s=t.Gk();if(0!==s.length){const e=this.tf.JF(),h=e.nD(),n=h.E8(),r=n.KF(),o=r.C8(),a=n.i0t(),l=h.P8(r),u=e.A8(),c=u.P8(),f=i.RN(),d=v.P8();if(b.Wr(d,s),c.S0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.j8();++t){e.L8(o);const p=d[t];i.Tk().gft(p),f&&p.tmt(),c.B8(t),r.k8(n,l),e.N8(o)}else{t.dft(!1);const m=t.pft();b.Lr(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.j8();++t){const g=d[t];m[0]=g,f&&g.tmt(),c.B8(t),r.k8(n,l)}}h.H8(),u.H8(),b.Lr(d),v.H8()}return!1}*R4t(i){const t=i.Tk(),s=t.Gk();if(0!==s.length){const e=this.tf.JF(),h=e.nD(),n=h.E8(),r=n.KF(),o=r.C8(),a=n.i0t(),l=h.P8(r),u=e.A8(),c=u.P8(),f=i.RN(),d=v.P8();if(b.Wr(d,s),c.S0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.j8();++t){e.L8(o);const p=d[t];i.Tk().gft(p),f&&p.tmt(),c.B8(t),yield*r.jgt(n,l),e.N8(o)}else{t.dft(!1);const m=t.pft();b.Lr(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.j8();++t){const g=d[t];m[0]=g,f&&g.tmt(),c.B8(t),yield*r.jgt(n,l)}}h.H8(),u.H8(),b.Lr(d),v.H8()}return!1}A4t(i,t){const s=i.Tk(),e=s.Gk();if(0!==e.length){const h=this.tf.JF(),n=h.nD(),r=h.p1t(),o=n.E8(),a=o.KF(),l=a.C8(),u=o.i0t(),c=n.P8(a),f=h.A8(),d=f.P8(),p=i.RN(),m=v.P8();b.Lr(m),d.S0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],r.sbt(1,t)]);if(m.sort(S),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.j8();++t){h.L8(l);const g=m[t][0];i.Tk().gft(g),p&&g.tmt(),d.B8(t),a.k8(o,c),h.N8(l)}else{s.dft(!1);const y=s.pft();b.Lr(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.j8();++t){const w=m[t][0];y[0]=w,p&&w.tmt(),d.B8(t),a.k8(o,c)}}n.H8(),f.H8(),b.Lr(m),v.H8()}return!1}*F4t(i,t){const s=i.Tk(),e=s.Gk();if(0!==e.length){const h=this.tf.JF(),n=h.nD(),r=h.p1t(),o=n.E8(),a=o.KF(),l=a.C8(),u=o.i0t(),c=n.P8(a),f=h.A8(),d=f.P8(),p=i.RN(),m=v.P8();b.Lr(m),d.S0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],r.sbt(1,t)]);if(m.sort(S),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.j8();++t){h.L8(l);const g=m[t][0];i.Tk().gft(g),p&&g.tmt(),d.B8(t),yield*a.jgt(o,c),h.N8(l)}else{s.dft(!1);const y=s.pft();b.Lr(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.j8();++t){const w=m[t][0];y[0]=w,p&&w.tmt(),d.B8(t),yield*a.jgt(o,c)}}n.H8(),f.H8(),b.Lr(m),v.H8()}return!1}D4t(t,s){let i=this.y4t.get(t);if(!i){if(!s)return null;i={O4t:null,L4t:new Map},this.y4t.set(t,i)}return i}k4t(t,s,i,e,h){s.YF().eyt(i,s.sD()),e&&t.N8(h)}*N4t(t,s,i,e,h){yield*s.YF().hyt(i,s.sD()),e&&t.N8(h)}}}{const Da=self.Ds;Da.Q$.K$.z_t=class extends Da.tn{constructor(t){super(),this.qct=t,this.tf=t.FO(),this.mxt=t.pk()}KMt(){}nn(){this.qct=null,this.tf=null,this.mxt=null}}}{const Oa=self.Ds;Oa.Q$.K$.Instance=class extends Oa.tn{constructor(t,s){super(),this.bi=t,this.qct=this.bi.SN(),this.vxt=this.qct.Abt(),this.tf=this.bi.FO()}nn(){this.bi=null,this.qct=null,this.vxt=null,this.tf=null}}}{const C=self.Ds,La=[];C.Q$.K$.Z$={B4t(){return!0},Y$(){return!0},lX(){return!0},L5t(){return!0},k5t(){return!0},fD(){return this.tf.fD()},Nmt(){const t=this.tf.d1t();return!t.Zft()&&!t.Xft()},W4t(){let t=this.tf.p1t(),s=t.HSt(),i=s.get("TriggerOnce_lastTick");void 0===i&&(i=-1,s.set("TriggerOnce_lastTick",-1));const e=this.tf.wtt();return s.set("TriggerOnce_lastTick",e),this.tf.gNt()||i!==e-1},j4t(t){const s=this.tf.p1t(),i=s.HSt(),e=i.get("Every_lastTime")||0,h=this.tf.wD(),n=(i.has("Every_seconds")||i.set("Every_seconds",t),i.get("Every_seconds"));return e+n<=h?(i.set("Every_lastTime",e+n),h>=i.get("Every_lastTime")+.04&&i.set("Every_lastTime",h),i.set("Every_seconds",t),!0):(h<e-.1&&i.set("Every_lastTime",h),!1)},tpt(t){const s=this.tf.JF().O1t(t);return s&&s.tpt()},wOt(){return this.tf.wOt()},mi(){return C.hi.mi},w5t(){return!0},H4t(){return!0},V4t(){return!0},CNt(){return!0},FNt(){return!0},PNt(){return!0},RNt(){return!0},U4t(t){return!!this.tf.aO(t)},z4t(t){switch(t){case 0:return"browser"===C.hi.fi;case 1:return"iOS"===C.hi.ni;case 2:return"Android"===C.hi.ni;case 8:return"cordova"===C.hi.fi;case 9:return"scirra-arcade"===this.tf.yL();case 10:return"nwjs"===C.hi.fi;case 13:return"windows-uwp"===this.tf.yL();default:return!1}},J4t(t,s,i){const e=this.w4t(s,i);return e.test(t)},q4t(t,s,i){return C.compare(t,s,i)},$4t(t,s,i){return s<=t&&t<=i},X4t(t,s,i){return C.compare(t.uet(),s,i)},Y4t(t){return!!t.uet()},Z4t(t,s){const i=this.tf.wD();if(0!==t)return C.compare(i,t,s);{const e=this.tf.p1t(),h=e.HSt();return!h.get("CompareTime_executed")&&s<=i&&(h.set("CompareTime_executed",!0),!0)}},K4t(t){return isNaN(t)},Y2t(t,s,i){return C.vn(C.pn(t),C.pn(i))<=C.pn(s)},Z2t(t,s){return C.xn(C.pn(t),C.pn(s))},lvt(t,s,i){let e=C.pn(t),h=C.pn(s),n=C.pn(i),r=!C.xn(n,h);return r?!(!C.xn(e,h)&&C.xn(e,n)):C.xn(e,h)&&!C.xn(e,n)},Q4t(t,s){return"number"==typeof t?0===s:1===s},tBt(t){return!!t},Adt(t){return t.toLowerCase()===this.tf.JF().Ldt()},sBt(t,i,e,h){if(!t)return!1;let s=this.x4t(),n=s.P8(),r=t.Tk(),o=(C.Wr(n,r.Gk()),r.rft()&&C.Lr(r.mft()),this.tf.p1t()),a=0;for(let t=0,s=n.length;t<s;++t){const u=n[t];n[a]=u,i=o.sbt(1,t),h=o.sbt(3,t),C.compare(i,e,h)?++a:r.fft(u)}C.Or(n,a),r.yft(n);const l=!!n.length;return C.Lr(n),s.H8(),t.Ygt(),l},iBt(t,s){if(!t)return!1;let i=this.x4t(),e=i.P8(),h=t.Tk(),n=(C.Wr(e,h.Gk()),h.rft()&&C.Lr(h.mft()),this.tf.p1t()),r=0;for(let t=0,s=e.length;t<s;++t){const a=e[t];e[r]=a,n.sbt(1,t)?++r:h.fft(a)}C.Or(e,r),h.yft(e);const o=!!e.length;return C.Lr(e),i.H8(),t.Ygt(),o},eBt(t,i,e){if(!t)return!1;const s=t.Tk(),h=s.Gk();if(0===h.length)return!1;let n=this.tf.p1t(),r=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t];e=n.sbt(2,t),(null===r||0===i&&e<o||1===i&&e>o)&&(o=e,r=a)}return s.Mft(r),t.Ygt(),!0},hBt(t,s){if(!t)return!1;const i=t.Tk(),e=i.Gk();if((s=Math.floor(s))>=e.length)return!1;const h=e[s];return i.Mft(h),t.Ygt(),!0},nBt(t){if(!t)return!1;const s=t.Tk(),i=s.Gk(),e=Math.floor(this.tf.UD()*i.length);if(e>=i.length)return!1;const h=i[e];return s.Mft(h),t.Ygt(),!0},rBt(t){if(!t)return!1;if(!t.Ik())return!1;const s=t.Tk();return s.dft(!0),t.Ygt(),!0},oBt(t,i,e){if(!t)return!1;const h=t.Tk(),s=h.Gk(),n=this.tf.KF(),r=n.xft(),o=this.tf.p1t().kSt();h.rft()?(C.Wr(La,s),h.nft(),h.dft(!1)):r?(C.Wr(La,h.mft()),C.Lr(h.mft())):(C.Wr(La,h.pft()),C.Lr(h.pft()));for(let t=0,s=La.length;t<s;++t){const a=La[t];C.xor(a.dO().fB(i,e),o)?h.cft(a):h.fft(a)}return t.Ygt(),C.xor(!!h.pft().length,o)},aBt(s){if(!s)return!1;let i=s.Lz(),e=null,h=this.tf.OIt();for(let t=h.length-1;0<=t;--t){const n=h[t];if(i){if(n.SN().Nbt(s)){e=n;break}}else if(n.SN()===s){e=n;break}}if(!e){const r=s.Gk();r.length&&(e=r.at(-1))}if(!e)return!1;const t=s.Tk();return t.Mft(e),s.Ygt(),!0},lBt(t){return this.tf.Ovt()?this.T4t(t):this.G4t(t)},uBt(){return this.tf.Ovt()?this.I4t():this._4t()},cBt(t,s,i){return this.tf.Ovt()?this.E4t(t,s,i):this.C4t(t,s,i)},h1(t){return this.tf.Ovt()?this.R4t(t):this.P4t(t)},fBt(t,s,i){return this.tf.Ovt()?this.F4t(t,i):this.A4t(t,i)},dBt(t){return!!t&&t.E5()},pBt(t){return!!t&&t.L5()},mBt(t){return!!t&&t.F5()},gBt(t){return!!t&&!t.Ik()},yBt(t,s,i){return!!t&&C.compare(100*t.gP(),s,i)},wBt(t){const s=this.tf.zD();return!!s&&s.r$(t)},v4t(){return!0},SBt(){return 0<this.m4t},bBt(t,s){const i=this.tf.HCt();return!!i&&!!s&&!!i.glt(t,s)}}}{let m=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const n=t[1],r=s[1];return n-r},g=function(t,s){return t[1]-s[1]};m,g;const ka=self.Ds,Na=[],Ba=[],Wa=ka.hn(ka.Rect),ja=ka.hn(ka.Wo),Ha=[];ka.Q$.K$.Wht={vBt(t,s){t.$et(s)},MBt(t,s){t.oe()&&"number"!=typeof s&&(s=parseFloat(s)),t.$et(t.uet()+s)},xBt(t,s){t.oe()&&t.$et(t.uet()-s)},GBt(t,s){t.$et(!!s)},TBt(t){t.$et(!t.uet())},_Bt(t){t.$et(t.f1t())},IBt(t){this.tf.JF().F1t(t)},CBt(t,s,i,e,h,n){if(t&&s){const r=this.tf.Ek(t,s,i,e,h,n);if(r){h&&s.Pk(r);const o=this.tf.JF(),a=(o.Rk(!0),r.Ak(),o.Rk(!1),new Map);r.FCt(a,t,h);for(const[l,u]of a)l.Tk().wft(u)}}},EBt(t,s,i,e,h,n){if(t&&s){const r=this.tf.x5t(t);r&&ka.Q$.K$.Wht.CBt.call(this,r,s,i,e,h,n)}},Dz(h,n,r,o,a,t,l,u,c,f,d){if(h){let s=this.tf.cO(),i=s;if(t){const p=this.tf.$D().VX(t);if(!p)return;i=p}let e=null;if(!("number"!=typeof l||0<=l)||(e=i.pO(l))){let t=null;if(!("number"!=typeof u||0<=u)||(t=s.pO(u))){Wa.set(n,r,o,a);const m=i.Dz(h,Wa,e,t,c,f,d);h.Tk().yft(m),h.Ygt()}}}},PBt(){const t=this.g0t;t.f0t()&&t.u0t().mW()},spt(t,s){const i=this.tf.JF().O1t(t);i&&(0===s?i.spt(!1):1===s?i.spt(!0):i.spt(!i.tpt()))},RBt(t){this.tf.xD(t)},ABt(t,s){if(s<0&&(s=0),t){const i=t.Tk(),e=i.Gk();for(const h of e)h.xD(s)}},FBt(t){if(t){const s=t.Tk(),i=s.Gk();for(const e of i)e.WN()}},Pr(t,s){if(!(t<0)){const i=this.tf.JF().mdt();return s?i.bMt(t):i.vMt(t),!0}},uD(t){return this.tf.JF().mdt().MMt(t),!0},DBt(){const t=this.tf.JF();return t.mdt().xMt(t.Rdt()),!0},aD(t){this.tf.JF().aD(t)},async ZDt(t,s,i,e,h,n){const r=this.tf.vL();r&&(this.bO(),await r.ZDt(0===t?"image/png":"image/jpeg",s/100,i,e,h,n),await this.tf.a4(ka.Q$.K$.Z$.H4t,null))},OBt(t,s){if(!(t<=0||s<=0)){this.tf.MDt(t,s),this.tf.cO().tq();const i=this.tf.vL();i&&("off"!==i.mDt()&&this.tf.T5t(t,s),i.jI(i.Ij(),i.Cj(),!0),this.tf.bO())}},LBt(t){const s=this.tf.vL();s&&"off"!==s.mDt()&&(s.EDt(0!==t?"high":"low"),s.jI(s.Ij(),s.Cj(),!0))},Iit(t){this.tf.bNt(t)},kBt(){this.tf.vNt()},NBt(t){this.tf.MNt(t)},BBt(t){this.tf.C2t(t)},WBt(t){},jBt(){for(const t of this.tf.$D().ZD())t.wX()},HBt(t){this.tf.yNt(0!==t)},VBt(t,s){this.tf.BD(1/t),this.tf.LD(1/s)},UBt(t,s){this.tf.LD(t),this.tf.BD(s)},zBt(t){this.tf.FD(["vsync","unlimited-tick","unlimited-frame"][t])},JBt(t,i){if(t){const s=t.Tk(),e=s.Gk(),h=Na,n=Ba,r=this.tf.cO(),o=t.Lz(),a=t.wwt();for(let t=0,s=e.length;t<s;++t){const l=e[t],u=l.dO();if(u){let t;t=o?l.Cnt(i+l.SN().ywt(a)):l.Cnt(i),h.push([u.pO().dF(),u.mO()]),n.push([l,t])}}if(h.length){h.sort(m),n.sort(g);let i=!1;for(let t=0,s=h.length;t<s;++t){const c=n[t][0],f=r.gO(h[t][0]),d=h[t][1],p=f.yO();p[d]!==c&&((p[d]=c).dO().wO(f,!0),f.SO(c),i=!0)}i&&this.tf.bO(),ka.Lr(Na),ka.Lr(Ba)}}},nL(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.tf.bF().nL(t,s)},qBt(t){if(!this.tf.Dg()){const s=this.tf.$D();s.QD()||s.tO(t)}},$Bt(t){if(!this.tf.Dg()){const s=this.tf.$D();if(!s.QD()){const i=s.VX(t);i&&s.tO(i)}}},XBt(t){if(!this.tf.Dg()){const s=this.tf.$D();if(!s.QD()){const i=s.ZD(),e=i.indexOf(s.zD());if((!t||0!==e)&&(t||e!==i.length-1)){const h=i[e+(t?-1:1)];s.tO(h)}}}},YBt(){if(!this.tf.Dg()){const t=this.tf.$D();t.QD()||(t.tO(t.zD()),this.tf.JF().B1t())}},ZBt(t,s){t&&t.I5(s)},KBt(t,s){t&&t.R5(s)},QBt(t,s){t&&t.D5(s)},t6t(t,s){t&&t.wP(s/100)},s6t(t,s){t&&t.k5(s)},i6t(t,s){t&&t.B5(s)},e6t(t,s){t&&t.Uk(ka.pn(+s))},h6t(t,s,i){t&&(t.iN(!0),t.Jk(s),t.$k(i))},n6t(t){t&&t.iN(!1)},r6t(t,s,i){t&&t.gJ(s/100,i/100)},o6t(t,s){t&&t.uv(+s)},a6t(t,s){if(t){ja.ya(s),ja.cn();const i=t.sN();i.la(ja)||(i.Qo(ja),this.bO())}},l6t(t,s){t&&t.X5(s)},u6t(t,s){t&&t.zb(s)},c6t(t,s,i){if(t){const e=t.kk(),h=e.bht(i);if(h){const n=1===s;h.zpt()!==n&&(h.nAt(n),t._6(),this.tf.bO())}}},f6t(t,s,i,e){if(t){const h=t.kk(),n=h.bht(s);if(n){i=Math.floor(i);const r=n.Yx().Kx(i);if(r){"color"===r?(ja.ya(e),e=ja):"percent"===r&&(e/=100);const o=h.C6(n.dF(),i,e);o&&n.zpt()&&this.tf.bO()}}}},d6t(t,s){t&&t.K5(s)},p6t(t){this.tf.cO().Hk(+t)},m6t(t){this.tf.cO().Uk(ka.pn(+t))},g6t(t,s){const i=this.tf.cO(),e=i.kk(),h=e.bht(s);if(h){const n=1===t;h.zpt()!==n&&(h.nAt(n),i._6(),this.tf.bO())}},y6t(t,s,i){const e=this.tf.cO(),h=e.kk(),n=h.bht(t);if(n){s=Math.floor(s);const r=n.Yx().Kx(s);if(r){"color"===r?(ja.ya(i),i=ja):"percent"===r&&(i/=100);const o=h.C6(n.dF(),s,i);o&&n.zpt()&&this.tf.bO()}}},w6t(t,s){const i=this.tf.cO();i.d5(t/100,s/100)},S6t(t){const s=this.tf.cO();0===t?s.g5():s.y5()},b6t(t){const s=this.tf.cO();s.Jk(t)},v6t(t){const s=this.tf.cO();s.$k(t)},M6t(t,s){const i=this.tf.cO();i.Jk(t),i.$k(s)},x6t(t){if(t){const s=t.Tvt();if(s){const i=s.dO();if(i){const e=this.tf.cO();e.Jk(i.hv()),e.$k(i.ov())}}}},n5(t,s,i){const e=this.tf.cO();try{e.n5(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},o5(t,s,i){if(t){const e=this.tf.cO();try{e.o5(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},l5(t){if(t){const s=this.tf.cO();s.l5(t)}},c5(){this.tf.cO().c5()},async G6t(t){const s=this.tf.zD();if(s&&t&&!this.tf.Dg()){const i=t.Lz()?t.Hmt():[t];await this.b4t(s,i)}},async T6t(t){await ka.Q$.K$.Wht.G6t.call(this,this.tf.x5t(t))},_6t(t){const s=this.tf.zD();if(s&&t){const i=t.Lz()?t.Hmt():[t];this.M4t(s,i)}},I6t(t){ka.Q$.K$.Wht._6t.call(this,this.tf.x5t(t))},C6t(){const t=this.tf.zD();if(t){const s=t.w$();this.M4t(t,s)}},async E6t(t){const s=this.tf.zD();t&&s&&!this.tf.Dg()&&await this.b4t(s,t.m$())},async P6t(t){const s=this.tf.zD(),i=this.tf.$D().VX(t);i&&s&&!this.tf.Dg()&&await this.b4t(s,i.m$())},oD(t){const s=this.ift.hD();if(s)switch(s.rD()){case 1:"number"==typeof t&&s.oD(t);break;case 2:"string"==typeof t&&s.oD(t);break;case 3:s.oD(t)}},R6t(t,s,i){const e=this.D4t(t.toLowerCase(),!0),h=e.L4t,n=s.toLowerCase(),r=(h.has(n)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`),ka.first(h.values())||e.O4t);if(r){const o=0!==r.iD(),a=0!==i.iD();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`)}h.set(n,i)},A6t(t,s){const i=this.D4t(t.toLowerCase(),!0),e=(i.O4t&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),ka.first(i.L4t.values())||i.O4t);if(e){const h=0!==e.iD(),n=0!==s.iD();if(h!=n)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}i.O4t=s},F6t(t,s,i){const e=this.tf,h=e.Ovt()?Ha:null,n=(i=Math.floor(i),this.D4t(t.toLowerCase(),!1));if(!n)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),h;let r=n.L4t.get(s.toLowerCase());if(!r){if(!n.O4t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),h;r=n.O4t,i=0}if(!r.Ju())return h;if(0!==r.iD())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),h;const o=e.JF(),a=o.KF(),l=a.ZF(),u=0<l.length,c=(u&&(r.sD()?o.L8(l):o.ddt(l)),[]),f=o.opt(a);if(f){const p=f.lpt();for(let t=i,s=p.length;t<s;++t)c.push(p[t].uet())}const d=r.lpt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].f1t());return e.Ovt()?this.N4t(o,r,c,u,l):this.k4t(o,r,c,u,l)}}}{const E=self.Ds;E.Q$.K$.jht={D6t:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},D(t){return t.toString()},Vt(t){return"string"==typeof t?t.length:0},random(t,s){return void 0===s?this.tf.UD()*t:this.tf.UD()*(s-t)+t},iwt(...t){const s=Math.floor(this.tf.UD()*t.length);return t[s]},O6t(t,...s){return"number"!=typeof t&&(t=0),s[t=E.cn(Math.floor(t),0,s.length-1)]},pi(){return Math.PI},L6t(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},k6t(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(E.pn(t))},cos(t){return Math.cos(E.pn(t))},tan(t){return Math.tan(E.pn(t))},asin(t){return E.mn(Math.asin(t))},acos(t){return E.mn(Math.acos(t))},atan(t){return E.mn(Math.atan(t))},exp(t){return Math.exp(t)},Xt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e<t&&(e=t)}return e},min(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e>t&&(e=t)}return e},cn(t,s,i){return E.cn(t,s,i)},It(t,s,i,e){return E.wn(t,s,i,e)},angle(t,s,i,e){return E.mn(E.bn(t,s,i,e))},Ft(t,s,i){return E.Ft(t,s,i)},Cn(t,s,i){return E.Cn(t,s,i)},Pn(t,s,i,e){return E.Pn(t,s,i,e)},Rn(t,s,i,e,h){return E.Rn(t,s,i,e,h)},An(t,s,i){return E.An(t,s,i)},N6t(t,s){return E.mn(E.vn(E.pn(t),E.pn(s)))},B6t(t,s,i){return E.mn(E.Gn(E.pn(t),E.pn(s),i))},W6t(t,s,i){return E.mn(E.Mn(E.pn(t),E.pn(s),E.pn(i)))},j6t(t,s,i){return(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s},H6t(t,s){return(t|=0)^1<<(0|s)},V6t(t,s){return(t|=0)&1<<(0|s)?1:0},U6t(){return"\n"},z6t(t){return"string"==typeof t?t.toUpperCase():""},J6t(t){return"string"==typeof t?t.toLowerCase():""},left(t,s){return"string"==typeof t?t.substr(0,s):""},mid(t,s,i){return"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i)},right(t,s){return"string"==typeof t?t.substr(Math.max(t.length-s,0)):""},trim(t){return"string"==typeof t?t.trim():""},q6t(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},$6t(t,s){return"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0},find(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(E.ne(s),"i")):-1},X6t(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(E.ne(s),"")):-1},replace(t,s,i){return"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(E.ne(s),"gi"),i):"string"==typeof t?t:""},Y6t(t,...i){let e=t;for(let t=0,s=i.length;t<s;++t)e=e.replaceAll(`{${t}}`,i[t].toString());return e},Z6t(t,s,i){const e=this.w4t(s,i);return t?t.search(e):-1},K6t(t,s,i,e){const h=this.w4t(s,i);return t?t.replace(h,e):""},Q6t(t,s,i){const e=this.S4t(t.toString(),s,i);return e?e.length:0},tWt(t,s,i,e){e=Math.floor(e);const h=this.S4t(t.toString(),s,i);return!h||e<0||e>=h.length?"":h[e]},sWt(t,s){let i=t<0?"-":"",e=s-(t=t<0?-t:t).toString().length;return(i+="0".repeat(Math.max(e,0)))+t.toString()},iWt(t){return encodeURIComponent(t)},eWt(t){return decodeURIComponent(t)},dD(){return this.tf.vZ()},hWt(){return this.tf.MZ()},timescale(){return this.tf.MD()},nWt(){return(Date.now()-this.tf.nNt())/1e3},rWt(){return Date.now()},time(){return this.tf.wD()},tickcount(){return this.tf.wtt()},oWt(){return this.tf.aNt()},fps(){return this.tf.GD()},aWt(){return this.tf.CD()},lWt(){return this.tf.PD()},uWt(){return this.tf.vL().EL()},cWt(){return this.tf.vL().RL()},fWt(){return this.tf.AF()},dWt(){return this.tf.DF()},pWt(){return this.tf.AF()},mWt(){return this.tf.DF()},gWt(){return this.tf.cO().qk()},yWt(){return this.tf.cO().Xk()},wWt(){return this.tf.cO().Jc()},SWt(){return this.tf.cO().Vk()},bWt(){return E.mn(this.tf.cO().zk())},vWt(){return this.tf.cO().Qp()},MWt(){return this.tf.cO().fm()},xWt(){return 100*this.tf.cO().lJ()},GWt(){return 100*this.tf.cO().uJ()},TWt(t){const s=this.tf.cO().pO(t);return s?s.aJ().wl():0},_Wt(t){const s=this.tf.cO().pO(t);return s?s.aJ().Sl():0},IWt(t){const s=this.tf.cO().pO(t);return s?s.aJ().bl():0},CWt(t){const s=this.tf.cO().pO(t);return s?s.aJ().vl():0},EWt(t){const s=this.tf.cO().pO(t);return s?s.aJ().width():0},PWt(t){const s=this.tf.cO().pO(t);return s?s.aJ().height():0},RWt(t){const s=this.tf.cO().pO(t);if(s){const i=s.aJ();return(i.wl()+i.bl())/2}return 0},AWt(t){const s=this.tf.cO().pO(t);if(s){const i=s.aJ();return(i.Sl()+i.vl())/2}return 0},FWt(t,s,i){const e=this.tf.cO().pO(t);return e?e.rN(s,i)[0]:0},DWt(t,s,i){const e=this.tf.cO().pO(t);return e?e.rN(s,i)[1]:0},OWt(t,s,i){const e=this.tf.cO().pO(t);return e?e.uN(s,i)[0]:0},LWt(t,s,i){const e=this.tf.cO().pO(t);return e?e.uN(s,i)[1]:0},kWt(t,s,i,e){const h=this.tf.cO(),n=h.pO(t),r=h.pO(s);if(!n||!r||n===r)return i;const[o,a]=n.uN(i,e);return r.rN(o,a)[0]},NWt(t,s,i,e){const h=this.tf.cO(),n=h.pO(t),r=h.pO(s);if(!n||!r||n===r)return e;const[o,a]=n.uN(i,e);return r.rN(o,a)[1]},BWt(t){const s=this.tf.cO().pO(t);return s?s.N5():0},WWt(t){const s=this.tf.cO().pO(t);return s?E.mn(s.j5()):0},jWt(t){const s=this.tf.cO().pO(t);return s?100*s.gP():0},HWt(t){const s=this.tf.cO().pO(t);return s?s.W5():0},VWt(t){const s=this.tf.cO().pO(t);return s?s.qk():0},UWt(t){const s=this.tf.cO().pO(t);return s?s.Xk():0},zWt(t){const s=this.tf.cO().pO(t);return s?100*s.V5():0},JWt(t){const s=this.tf.cO().pO(t);return s?100*s.z5():0},qWt(t){const s=this.tf.cO().pO(t);return s?s.lv():0},$Wt(t){const s=this.tf.cO().pO(t);return s?s.dF():-1},XWt(){const t=this.tf.vL();return t?t.QDt():""},YWt(t){const s=this.g0t;if(!s.f0t())return 0;if(t){const i=s.p0t(t);return i?i.dF():0}return s.u0t().dF()},ZWt(){return this.tf.xNt()},KWt(t,s,...i){const e=this.D4t(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let h=e.L4t.get(s.toLowerCase());if(!h){if(!e.O4t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;h=e.O4t}const n=h.iD(),r=h.$F();if(0===n)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!h.Ju())return r;const o=this.tf,a=o.JF(),l=a.KF(),u=l.ZF(),c=0<u.length,f=(c&&(h.sD()?a.L8(u):a.ddt(u)),h.lpt());for(let t=i.length,s=f.length;t<s;++t)i.push(f[t].f1t());const d=h.YF(),p=d.tD(d.ZF(),h.sD(),n,r,...i);return c&&a.N8(u),p},QWt(){return this.tf.yF().jD()},tjt(){return this.XV()},renderer(){return this.tf.LDt()?"webgpu":"webgl"},sjt(){return this.tf.LDt()?this.tf.LDt().GetAdapterInfoString():this.tf.ODt().TR()},ijt(){let t=this.tf.Tb().ob();return Math.round(100*t/1048576)/100},ejt(t,s,i){return E.Bn(t,s,i)},hjt(t,s,i){return E.jn(t/100,s/100,i/100)},njt(t,s,i,e){return E.Wn(t/100,s/100,i/100,e/100)},rjt(t,s,i){return E.jn(t/255,s/255,i/255)},ojt(t,s,i,e){return E.Wn(t/255,s/255,i/255,e/255)},ajt(){return this.tf.GF()},ljt(){return this.tf._F()},ujt(){return this.tf.KF().h$().Jc()},cjt(){return this.tf.KF().rgt()}}}{const Va=self.Ds;Va.Q$.xht=class extends Va.EMt{constructor(t){super(t)}nn(){super.nn()}}}{const Ua=self.Ds,za=self.Us,Ja=[],qa=(Ua.Q$.xht.z_t=class extends Ua.pxt{constructor(t){super(t),this.N_t=t.xIt()}nn(){Ua.Lr(this.N_t),super.nn()}KMt(){for(const t of this.N_t)t.BTt(this.tf)}b$(s){const i={h2:this.tf.OF()};return Promise.all(this.N_t.map(t=>t.WTt(s,i)))}_$(){for(const t of this.N_t)t.jTt()}x$(){this.fjt()}fjt(){for(const t of this.qct.xk())t.a6().djt()}$St(t){Ua.Q$.xht.oMt(this,t)}Fbt(t){Ja.push({wxt:null,pjt:!1,instances:[]})}mjt(t,s,i){const e=Ja.at(-1);e.wxt=t,e.pjt=i,e.instances.push(s)}Dbt(t){const s=Ja.pop(),i=s.wxt,e=s.pjt;if(i){const h=new Map;for(const n of s.instances)n.FCt(h,i,e);for(const[r,o]of h)r.Tk().wft(o)}}gjt(t){const s=this.SN().CIt(t),i=this.FO(),e=s.HTt(0);return e.J6().vH(i.Tb(),{h2:i.OF()}).then(()=>this.fjt()),s}yjt(t){for(const s of this.qct.xk())s.a6().wjt(t);this.SN().EIt(t)}Sjt(t,s){const i=this.qct._It(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.JTt(s);e<0&&(e+=i.N6()+1);const h=Ua.LTt.NTt(this.FO()),n=(i.VTt(h,e),this.FO());h.J6().vH(n.Tb(),{h2:n.OF()}).then(()=>this.fjt());for(const r of this.qct.xk())r.a6().bjt();return h}vjt(t,s){const i=this.qct._It(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.N6())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.JTt(s);e<0&&(e+=i.N6()),i.UTt(e);for(const h of this.qct.xk())h.a6().bjt()}QMt(){return self.Mjt}},new WeakMap);self.Mjt=class extends self.fk{constructor(t){super(t),qa.set(this,t.Abt())}xjt(t){za.Se(t);const s=qa.get(this).SN()._It(t);return s?s.qTt():null}Gjt(){return qa.get(this).SN().TIt().map(t=>t.qTt())}Tjt(t){return za.Se(t),qa.get(this).gjt(t).qTt()}_jt(t){za.Se(t),qa.get(this).yjt(t)}Ijt(t,s){if(za.Se(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return qa.get(this).Sjt(t,s).j6()}Cjt(t,s){if(za.Se(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");qa.get(this).vjt(t,s)}}}{const P=self.Ds,$a=self.Us,Xa=P.hn(P.Rect),Ya=P.hn(P.$l),Za=P.hn(P.$a),R=(P.Q$.xht.Instance=class extends P.qxt{constructor(t,s){super(t);let i=!0,e="",h=0,n=!0;s&&(i=!!s[0],e=s[1],h=s[2],n=s[3]),this.Ejt=this.qct._It(e)||this.qct.xIt()[0],this.Pjt=P.cn(h,0,this.Ejt.N6()-1),this.Rjt=this.Ejt.HTt(this.Pjt);const r=this.Rjt.J6(),o=(this.Ajt=r.xM(),this.Fjt=r.wC(),this.Djt=r.nGt(),this.Zxt(),t.RCt(2,!0),t.RCt(1,0<=this.Ejt.P6()),this.Ojt=Math.abs(this.Ejt.P6()),this.Ljt=this.Ejt.O6(),this.kjt=P.hn(P.y0),this.Njt=0,this.Bjt=0,this.Wjt="",this.jjt=-1,this.Hjt="",this.Vjt=0,this.dO());this.Ujt=o.X4(),o.I5(i),o.cB(n),o.Knt(this.Rjt.Y6()),o.trt(this.Rjt.K6()),o.xRt(this.Rjt.aW()),o.N4(),1===this.qct.GIt()&&1===this.qct.xIt()[0].N6()||0===this.Ojt||this.Nxt()}nn(){this.Ejt=null,this.Rjt=null,this.Ajt=null,this.kjt=null,super.nn()}sGt(){return this.Rjt.J6()}oit(){return!0}G7(){this.Ajt=null}tGt(){this.djt()}qv(t){const s=this.Ajt;if(null!==s){t.vP(s);const i=this.dO();i.t6()?this.zjt(i,t):this.Jjt(i,t)}}Jjt(t,s){let i=this.Ujt;this.tf.kF()&&(i=t.gRt(i)),s.RP(i,this.Djt)}zjt(s,t){const i=s.DRt();if(s.LRt()){s.dRt(Xa,Ya,!1);let t=Ya;this.tf.kF()&&(t=s.gRt(t)),i.Jv(s.s6(),t,this.Djt),s.ORt(!1)}i.qv(t)}qjt(){return this.kjt.Ks()}$jt(){return this.bi.ACt(2)}Xjt(t){this.bi.RCt(2,t)}Yjt(){return this.bi.ACt(1)}Zjt(t){this.bi.RCt(1,t)}Kjt(){return this.bi.ACt(4)}Qjt(t){this.bi.RCt(4,t)}xZ(){this.Hjt&&this.t8t(),0<=this.jjt&&this.s8t();const t=this.Ojt;if(this.$jt()&&0!==t){const s=this.tf.pD(this.bi),i=(this.kjt.nc(s),this.qjt()),e=this.Rjt,h=e.q6()/t;if(!(i<this.Njt+h)){const n=this.Ejt,r=this.Ljt,o=n.N6(),a=n.F6(),l=n.A6(),u=n.k6(),c=(this.Yjt()?this.Pjt++:this.Pjt--,this.Njt+=h,this.Pjt>=o&&(u?(this.Zjt(!1),this.Pjt=o-2):!l&&(this.Bjt++,this.Bjt>=a)?this.i8t(!1):this.Pjt=r),this.Pjt<0&&(u?(this.Pjt=1,this.Zjt(!0),l||(this.Bjt++,this.Bjt>=a&&this.i8t(!0))):!l&&(this.Bjt++,this.Bjt>=a)?this.i8t(!0):this.Pjt=r),this.Pjt=P.cn(this.Pjt,0,o-1),n.HTt(this.Pjt));i>this.Njt+c.q6()/t&&(this.Njt=i),this.e8t(e,c)}}else this.Mxt()}i8t(t){this.Pjt=t?0:this.Ejt.N6()-1,this.Xjt(!1),this.Wjt=this.Ejt.Jc(),this.Qjt(!0),this.yxt("animationend",!1,{animationName:this.Wjt}),this.r4(P.Q$.xht.Z$.h8t),this.r4(P.Q$.xht.Z$.n8t),this.Qjt(!1),this.Bjt=0}e8t(i,e,t){if(i!==e){const s=this.dO(),h=i.J6(),n=e.J6(),r=h.Qp(),o=h.fm(),a=n.Qp(),l=n.fm(),u=(t&&t.onFrameChange?t.onFrameChange(s,r,o,a,l):(r!==a&&s.am(s.Qp()*(a/r)),o!==l&&s.tm(s.fm()*(l/o))),s.Knt(e.Y6()),s.trt(e.K6()),s.xRt(e.aW()),s.N4(),this.Rjt=e,this.Ajt=n.xM(),this.Fjt=n.wC(),this.Djt=n.nGt(),this.kW().yht());for(let t=0,s=u.length;t<s;++t)u[t].zGt(i,e);this.yxt("framechange",!1,{animationName:this.Ejt.Jc(),r8t:this.Pjt}),this.r4(P.Q$.xht.Z$.o8t),this.tf.bO()}}a8t(t){this.Xjt(!0),this.Njt=this.qjt(),1===t&&0!==this.Pjt&&(this.jjt=0,this.Kjt()||this.s8t()),this.Nxt()}l8t(t,s,i){this.Hjt=t,this.Vjt=s,this.Nxt(),!i&&this.Kjt()||this.t8t()}u8t(){return this.Ejt}c8t(){return this.Hjt||this.Ejt.Jc()}wjt(t){P.uh(t,this.c8t())&&this.l8t(this.qct.PIt().Jc(),1,!0)}f8t(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.qct._It(this.c8t());if(!s)return;if(-1===(t=s.zTt(t)))return}isFinite(t)&&(this.jjt=t,this.Kjt()||this.s8t())}bjt(){if(!this.Hjt&&-1===this.jjt){const t=this.Rjt,s=this.Ejt.HTt(P.cn(this.Pjt,0,this.Ejt.N6()-1));t!==s&&this.e8t(t,s),1<this.Ejt.N6()&&0<this.Ojt&&this.Nxt()}}d8t(){return this.Pjt}p8t(){return this.Rjt.fW()}m8t(t){this.Ojt=Math.abs(t),this.Zjt(0<=t),0<this.Ojt&&this.Nxt()}g8t(){return this.Yjt()?this.Ojt:-this.Ojt}y8t(t){"string"==typeof t&&-1===(t=this.Ejt.zTt(t))||(t=P.cn(Math.floor(t),0,this.Ejt.N6()-1),this.Ljt=t)}w8t(){return this.Ljt}t8t(t){const s=this.Rjt,i=this.qct._It(this.Hjt);if(this.Hjt="",i&&(i!==this.Ejt||!this.$jt())){this.Ejt=i,this.Zjt(0<=i.P6()),this.Ojt=Math.abs(i.P6()),this.Ljt=i.O6(),this.Pjt=P.cn(this.Pjt,0,this.Ejt.N6()-1),1===this.Vjt&&(this.Pjt=0),this.Xjt(!0),this.Njt=this.qjt();const e=this.Ejt.HTt(this.Pjt);this.e8t(s,e,t)}}s8t(t){const s=this.Rjt,i=this.Pjt;if(this.Pjt=P.cn(Math.floor(this.jjt),0,this.Ejt.N6()-1),this.jjt=-1,t||i!==this.Pjt){const e=this.Ejt.HTt(this.Pjt);this.e8t(s,e),this.Njt=this.qjt()}}djt(){const t=this.Rjt.J6();this.Ajt=t.xM(),this.Fjt=t.wC(),this.Djt=t.nGt(),this.dO().ORt(!0)}xM(){return this.Ajt}wC(){return this.Fjt}nGt(){return this.Djt}sW(){return this.Rjt.sW()}$bt(t){let s=this.Rjt,i=this.dO(),e=null;if("string"==typeof t)e=s.rW(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.nW(t-1)}let h=i.U4();if(!e)return[i.hv(),i.ov(),h];if(Za.T(e.h_t()),i.t6()){const[n,r,o]=i.s6().Qv(Za.Qa(),Za.sl());Za.set(n,r),h+=o}return Za.offset(-s.Y6(),-s.K6()),Za.scale(i.Qp(),i.fm()),Za.rotate(i.zk()),Za.offset(i.hv(),i.ov()),[Za.Qa(),Za.sl(),h]}S8t(){return this.dO().CRt().Du()}b8t(t){t=Math.floor(t);const s=this.dO(),i=s.CRt(),e=i.Du();if((t=t===e?0:t)<0||e<=t)return[0,0];const h=i.Fu();return[h[2*t+0]+s.hv(),h[2*t+1]+s.ov()]}Hxt(){const s=P.Q$.xht.Wht,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.Ejt.Jc(),v8t:t=>this.Uxt(s.M8t,t,0)},{name:t+".current-frame",value:this.Pjt,v8t:t=>this.Uxt(s.x8t,t)},{name:t+".is-playing",value:this.$jt(),v8t:t=>t?this.Uxt(s.G8t,0):this.Uxt(s.T8t)},{name:t+".speed",value:this.Ojt,v8t:t=>this.Uxt(s._8t,t)},{name:t+".repeats",value:this.Bjt,v8t:t=>this.Bjt=t}]}]}wv(){const t={a:this.Ejt.zz()},s=(0!==this.Njt&&(t.fs=this.Njt),this.qjt()),i=(0!==s&&(t.at=s),0!==this.Pjt&&(t.f=this.Pjt),0!==this.Ojt&&(t.cas=this.Ojt),1!==this.Bjt&&(t.ar=this.Bjt),0!==this.Ljt&&(t.rt=this.Ljt),this.$jt()||(t.ap=this.$jt()),this.Yjt()||(t.af=this.Yjt()),this.dO());return i.uB()&&(t.ce=i.uB()),t}Sv(t){const s=this.SN().IIt(t.a),i=(s&&(this.Ejt=s),this.Njt=t.hasOwnProperty("fs")?t.fs:0,this.kjt.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),e=(this.Pjt=P.cn(i,0,this.Ejt.N6()-1),this.Ojt=t.hasOwnProperty("cas")?t.cas:0,this.Bjt=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),h=(this.Ljt=P.cn(e,0,this.Ejt.N6()-1),this.Xjt(!t.hasOwnProperty("ap")||!!t.ap),this.Zjt(!t.hasOwnProperty("af")||!!t.af),this.Ejt.HTt(this.Pjt)),n=(this.Rjt=h,this.djt(),this.dO());n.Knt(h.Y6()),n.trt(h.K6()),n.xRt(h.aW()),n.cB(!!t.ce),this.$jt()&&this.Nxt()}Snt(t){const s=this.dO();switch(t){case 3:return s.uB();case 2:return P.cn(this.Pjt,0,this.Ejt.N6()-1);case 1:return this.Ejt.Jc()}}Tnt(t,s,i){const e=this.dO();switch(t){case 3:e.cB(!!s);break;case 2:{this.Xjt(!1);const h=this.Ejt.N6()-1,n=s=P.cn(s,0,h),r=this.Ejt.HTt(this.Pjt),o=this.Ejt.HTt(n);this.e8t(r,o,i),this.Pjt=P.cn(n,0,h);break}case 1:{this.Hjt=s,this.t8t(i);const a=this.Ejt.N6();1<a&&0<this.Ejt.P6()?this.Nxt():this.Mxt();break}}}QMt(){return self.I8t}},new WeakMap),Ka=new Map([["current-frame",0],["beginning",1]]);self.I8t=class extends self.e6{constructor(){super(),R.set(this,self.yN.MN().a6())}tW(){return R.get(this).sW()}iW(t){return this.eW(t)[0]}hW(t){return this.eW(t)[1]}C8t(t){return this.eW(t)[2]}eW(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return R.get(this).$bt(t)}oW(){return R.get(this).S8t()}lW(t){return $a.me(t),R.get(this).b8t(t)[0]}cW(t){return $a.me(t),R.get(this).b8t(t)[1]}uW(t){return $a.me(t),R.get(this).b8t(t)}E8t(){R.get(this).Xjt(!1)}P8t(t="current-frame"){$a.Se(t);const s=Ka.get(t);if(void 0===s)throw new Error("invalid mode");R.get(this).a8t(s)}R8t(t,s="beginning"){$a.Se(t),$a.Se(s);const i=Ka.get(s);if(void 0===i)throw new Error("invalid mode");const e=R.get(this);if(!e.SN()._It(t))throw new Error(`animation name "${t}" does not exist`);e.l8t(t,i)}xjt(t){$a.Se(t);const s=R.get(this).SN()._It(t);return s?s.qTt():null}get animation(){return R.get(this).u8t().qTt()}get animationName(){return R.get(this).c8t()}set r8t(t){$a.me(t),R.get(this).f8t(t)}get r8t(){return R.get(this).d8t()}set A8t(t){$a.Se(t),R.get(this).f8t(t)}get A8t(){return R.get(this).p8t()}set F8t(t){$a.me(t),R.get(this).m8t(t)}get F8t(){return R.get(this).g8t()}set D8t(t){$a.me(t),R.get(this).y8t(t)}get D8t(){return R.get(this).w8t()}get imageWidth(){return R.get(this).sGt().Qp()}get imageHeight(){return R.get(this).sGt().fm()}O8t(){const t=R.get(this).sGt();return[t.Qp(),t.fm()]}async L8t(t){$a.Ye(t,Blob);const s=R.get(this),i=s.FO(),e=s.sGt(),h=P.hn(P.aTt);if(h.MTt(i,t),await h.vH(i.Tb(),{h2:i.OF()}),s.rn())h.nn();else{e.xTt(h);const n=s.Abt();n.fjt(),n.SN().Lf().dispatchEvent(new P.Event("animationframeimagechange")),i.bO()}}k8t(t,s){$a.Se(s),R.get(this).dO().cRt(!!t,s)}}}{const Qa=self.Ds;Qa.Q$.xht.Z$={N8t(t){return Qa.uh(this.c8t(),t)},B8t(t,s){return Qa.compare(this.Pjt,t,s)},W8t(t,s){if("string"!=typeof s)return!1;const i=this.Rjt.fW();return Qa.compare(i.toLowerCase(),t,s.toLowerCase())},j8t(t,s){return Qa.compare(this.g8t(),t,s)},n8t(t){return Qa.uh(this.Wjt,t)},h8t(){return!0},o8t(){return!0},H8t(){return this.dO().Qp()<0},V8t(){return this.dO().fm()<0},U8t(){return!0},z8t(){return!0},uB(){return this.dO().uB()}}}{const tl=self.Ds;tl.Q$.xht.Wht={J8t(t,s,i,e,h){if(t&&s){const[n,r]=this.$bt(i),o=this.tf.Ek(t,s,n,r,e,h);if(o){if(e&&s.Pk(o),t.pk().qL()){const l=o.dO();l.Uk(this.dO().zk()),l.N4()}const a=this.tf.JF();a.Rk(!0),o.Ak(),a.Rk(!1),t!==this.tf.g1t().SN()&&this.vxt.mjt(t,o,e)}}},T8t(){this.Xjt(!1)},G8t(t){this.a8t(t)},M8t(t,s){this.l8t(t,s)},x8t(t){this.f8t(t)},_8t(t){this.m8t(t)},q8t(t){this.y8t(t)},$8t(s,t){try{0===s?this.Abt().gjt(t):this.Abt().yjt(t)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation: `,t)}},X8t(s,t,i){try{0===s?this.Abt().Sjt(t,i):this.Abt().vjt(t,i)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation frame: `,t)}},Y8t(t){const s=this.dO(),i=s.Qp(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.am(e),s.N4())},Z8t(t){const s=this.dO(),i=s.fm(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.tm(e),s.N4())},Hk(t){const s=this.Rjt,i=s.J6(),e=this.dO(),h=e.Qp()<0?-1:1,n=e.fm()<0?-1:1,r=i.Qp()*t*h,o=i.fm()*t*n;e.Qp()===r&&e.fm()===o||(e.jI(r,o),e.N4())},async K8t(t,s,i){const e=this.Rjt,h=e.J6(),n=this.dO(),r=this.tf,o=this.vxt;if(h.HV()===t)0===s&&(n.jI(h.Qp(),h.fm()),n.N4()),this.r4(tl.Q$.xht.Z$.U8t);else{const a=tl.hn(tl.aTt);try{if(await a.vTt(r,t),!a.w7())throw new Error("image failed to load");if(this.rn())return void a.nn();await a.vH(r.Tb(),{h2:r.OF()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.rn()||this.r4(tl.Q$.xht.Z$.z8t))}this.rn()?a.nn():(h.xTt(a),o.fjt(),o.SN().Lf().dispatchEvent(new tl.Event("animationframeimagechange")),r.bO(),0===s&&(n.jI(h.Qp(),h.fm()),n.N4()),await this.a4(tl.Q$.xht.Z$.U8t))}},Q8t(t){this.dO().cB(t)},cRt(t,s){this.dO().cRt(0===t,s)},tHt(t){this.dO().zb(t),this.tf.bO()}}}{const sl=self.Ds;sl.Q$.xht.jht={sHt(){return this.d8t()},iHt(){return this.p8t()},eHt(){return this.Ejt.N6()},hHt(){return this.Ejt.Jc()},nHt(){return this.g8t()},rHt(){return this.Ejt.P6()},oHt(t){return this.$bt(t)[0]},aHt(t){return this.$bt(t)[1]},lHt(t){return this.$bt(t)[2]},uHt(){return this.sW()},cHt(){return this.sGt().Qp()},fHt(){return this.sGt().fm()},dHt(t){return this.b8t(t)[0]},pHt(t){return this.b8t(t)[1]},mHt(){return this.S8t()}}}{const il=self.Ds;il.Q$.Touch=class extends il.EMt{constructor(t){super(t)}nn(){super.nn()}}}{let i=function(){return s.ck().a6()};i;const el=self.Ds,hl=self.Us;el.Q$.Touch.z_t=class extends el.pxt{constructor(t){super(t)}nn(){super.nn()}KMt(){}QMt(){return self.gHt}};let s=null;self.gHt=class extends self.fk{constructor(t){super(t),(s=t).FO().sO().eO=this}requestPermission(t){hl.Se(t);const s=i();if("orientation"===t)return s.yHt(0);if("motion"===t)return s.yHt(1);throw new Error("invalid type")}}}{const A=self.Ds;A.Q$.Touch.Instance=class extends A.Sxt{constructor(t,s){super(t,"touch"),this.wHt=new Map,this.SHt=!1,this.bHt=!1,this.vHt=0,this.MHt=0,this.xHt=0,this.GHt=0,this.THt=0,this._Ht=0,this.IHt=0,this.CHt=0,this.EHt=0,this.PHt=0,this.RHt=0,this.AHt=0,this.FHt=0,this.DHt=0,this.OHt=0,this.LHt=0,this.kHt=0,this.NHt=[],s&&(this.SHt=s[0]),this.Ext("permission-result",t=>this.BHt(t));const i=this.FO().Lf();this.p0=new A.c0(A.n0.u0(i,"pointerdown",t=>this.WHt(t.data)),A.n0.u0(i,"pointermove",t=>this.jHt(t.data)),A.n0.u0(i,"pointerup",t=>this.HHt(t.data,!1)),A.n0.u0(i,"pointercancel",t=>this.HHt(t.data,!0)),A.n0.u0(i,"deviceorientation",t=>this.VHt(t.data)),A.n0.u0(i,"deviceorientationabsolute",t=>this.UHt(t.data)),A.n0.u0(i,"devicemotion",t=>this.zHt(t.data)),A.n0.u0(i,"tick2",t=>this.yY()))}nn(){this.wHt.clear(),super.nn()}WHt(t){if("mouse"===t.pointerType){if(!this.SHt)return;this.bHt=!0}const s=t.pointerId;if(!this.wHt.has(s)){const i=t.pageX-this.tf.oN(),e=t.pageY-this.tf.aN(),h=performance.now(),n=this.wHt.size,r=(this.RHt=n,this.AHt=s,A.hn(A.Q$.Touch.JHt));r.fCt(h,i,e,s,n),this.wHt.set(s,r),this.r4(A.Q$.Touch.Z$.qHt),this.r4(A.Q$.Touch.Z$.$Ht),this.DHt=i,this.OHt=e,this.kHt=0,this.r4(A.Q$.Touch.Z$.XHt)}}jHt(t){if("mouse"!==t.pointerType||this.bHt){const s=this.wHt.get(t.pointerId);if(s){const i=performance.now();if(!(i-s.zR()<2)){const e=t.pageX-this.tf.oN(),h=t.pageY-this.tf.aN();s.X7(i,e,h,t.width,t.height,t.pressure)}}}}HHt(t,s){if("mouse"===t.pointerType){if(!this.bHt)return;this.bHt=!1}const i=performance.now(),e=t.pointerId,h=this.wHt.get(e);if(h){if(this.RHt=h.YHt(),this.AHt=h.jW(),!s){const n=t.pageX-this.tf.oN(),r=t.pageY-this.tf.aN();this.DHt=n,this.OHt=r,this.kHt=1,this.r4(A.Q$.Touch.Z$.XHt)}if(this.r4(A.Q$.Touch.Z$.ZHt),this.r4(A.Q$.Touch.Z$.KHt),!s){const o=h.QHt(i);"single-tap"===o?(this.r4(A.Q$.Touch.Z$.tVt),this.DHt=h.hv(),this.OHt=h.ov(),this.r4(A.Q$.Touch.Z$.sVt)):"double-tap"===o&&(this.r4(A.Q$.Touch.Z$.iVt),this.DHt=h.hv(),this.OHt=h.ov(),this.r4(A.Q$.Touch.Z$.eVt))}h.nn(),this.wHt.delete(e)}}yHt(i){return this.Fxt("request-permission",{type:i}),new Promise((t,s)=>{this.NHt.push({type:i,resolve:t,reject:s})})}BHt(t){const s=t.result,i=t.type,e=(this.FHt=i,this.NHt.filter(t=>t.type===i));for(const h of e)h.resolve(s?"granted":"denied");this.NHt=this.NHt.filter(t=>t.type!==i),s?(this.r4(A.Q$.Touch.Z$.hVt),0===i?this.tf.qNt():this.tf.$Nt()):this.r4(A.Q$.Touch.Z$.nVt)}VHt(t){"number"==typeof t.webkitCompassHeading?this.vHt=t.webkitCompassHeading:t.absolute&&(this.vHt=t.alpha),this.MHt=t.alpha,this.xHt=t.beta,this.GHt=t.gamma}UHt(t){this.vHt=t.alpha}zHt(t){const s=t.acceleration,i=(s&&(this.THt=s.x,this._Ht=s.y,this.IHt=s.z),t.accelerationIncludingGravity);i&&(this.CHt=i.x,this.EHt=i.y,this.PHt=i.z)}yY(){let t=performance.now(),s=0;for(const i of this.wHt.values())i.zR()<=t-50&&i.rVt(t),i.oVt(t)&&(this.RHt=i.YHt(),this.AHt=i.jW(),this.LHt=s,this.r4(A.Q$.Touch.Z$.aVt),this.DHt=i.hv(),this.OHt=i.ov(),this.r4(A.Q$.Touch.Z$.lVt),this.LHt=0),++s}uVt(t){t=Math.floor(t);for(const s of this.wHt.values()){if(0===t)return s;--t}return null}cVt(t,s){return 0<=t&&0<=s&&t<this.tf._5t()&&s<this.tf.I5t()}Hxt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.wHt.values()].map(t=>({name:"$"+t.jW(),value:t.hv()+", "+t.ov()}))}]}}}{const nl=self.Ds;nl.Q$.Touch.Z$={$Ht(){return!0},KHt(){return!0},fVt(){return 0<this.wHt.size},XHt(t,s){return!!t&&s===this.kHt&&!!this.cVt(this.DHt,this.OHt)&&this.tf.bF().NAt(t,[[this.DHt,this.OHt]],!1)},dVt(t){if(!t)return!1;const s=this.tf.p1t(),i=s.kSt(),e=[...this.wHt.values()].filter(t=>this.cVt(t.hv(),t.ov())).map(t=>[t.hv(),t.ov()]);return nl.xor(this.tf.bF().NAt(t,e,i),i)},pVt(t,s,i){const e=this.uVt(t);return!!e&&nl.compare(e.P6(),s,i)},mVt(){return!0},gVt(){return!0},yVt(t,s,i){this.tf.qNt();let e;return e=0===t?this.MHt:1===t?this.xHt:this.GHt,nl.compare(e,s,i)},wVt(t,s,i){this.tf.$Nt();let e;return e=0===t?this.CHt:1===t?this.EHt:2===t?this.PHt:3===t?this.THt:4===t?this._Ht:this.IHt,nl.compare(e,s,i)},qHt(t){return(t=Math.floor(t))===this.RHt},ZHt(t){return(t=Math.floor(t))===this.RHt},SVt(t){return t=Math.floor(t),this.wHt.size>=t+1},aVt(){return!0},tVt(){return!0},iVt(){return!0},lVt(t){return!!t&&!!this.cVt(this.DHt,this.OHt)&&this.tf.bF().NAt(t,[[this.DHt,this.OHt]],!1)},sVt(t){return!!t&&!!this.cVt(this.DHt,this.OHt)&&this.tf.bF().NAt(t,[[this.DHt,this.OHt]],!1)},eVt(t){return!!t&&!!this.cVt(this.DHt,this.OHt)&&this.tf.bF().NAt(t,[[this.DHt,this.OHt]],!1)},hVt(t){return this.FHt===t},nVt(t){return this.FHt===t}}}{const rl=self.Ds;rl.Q$.Touch.Wht={bVt(t){this.yHt(t)}}}{const ol=self.Ds;ol.Q$.Touch.jht={vVt(){return this.wHt.size},W2t(t){const s=this.uVt(this.LHt);return s?s.MVt(this.tf.cO(),t,!0):0},j2t(t){const s=this.uVt(this.LHt);return s?s.MVt(this.tf.cO(),t,!1):0},xVt(t,s){const i=this.uVt(t);return i?i.MVt(this.tf.cO(),s,!0):0},GVt(t,s){const i=this.uVt(t);return i?i.MVt(this.tf.cO(),s,!1):0},TVt(t,s){const i=this.wHt.get(t);return i?i.MVt(this.tf.cO(),s,!0):0},_Vt(t,s){const i=this.wHt.get(t);return i?i.MVt(this.tf.cO(),s,!1):0},IVt(){const t=this.uVt(0);return t?t.hv():0},CVt(){const t=this.uVt(0);return t?t.ov():0},EVt(t){const s=this.uVt(t);return s?s.hv():0},PVt(t){const s=this.uVt(t);return s?s.ov():0},RVt(t){const s=this.wHt.get(t);return s?s.hv():0},AVt(t){const s=this.wHt.get(t);return s?s.ov():0},FVt(t){const s=this.uVt(t);return s?s.P6():0},DVt(t){const s=this.wHt.get(t);return s?s.P6():0},OVt(t){const s=this.uVt(t);return s?ol.mn(s.zk()):0},LVt(t){const s=this.wHt.get(t);return s?ol.mn(s.zk()):0},kVt(){return this.tf.qNt(),this.vHt},NVt(){return this.tf.qNt(),this.MHt},BVt(){return this.tf.qNt(),this.xHt},WVt(){return this.tf.qNt(),this.GHt},jVt(){return this.tf.$Nt(),this.CHt},HVt(){return this.tf.$Nt(),this.EHt},VVt(){return this.tf.$Nt(),this.PHt},UVt(){return this.tf.$Nt(),this.THt},zVt(){return this.tf.$Nt(),this._Ht},JVt(){return this.tf.$Nt(),this.IHt},qVt(){return this.RHt},$Vt(){return this.AHt},XVt(t){const s=this.wHt.get(t);return s?s.Qp():0},YVt(t){const s=this.wHt.get(t);return s?s.fm():0},ZVt(t){const s=this.wHt.get(t);return s?s.KVt():0}}}{let r=self.Ds,s=-1e3,i=-1e3,e=-1e4;r.Q$.Touch.JHt=class extends r.tn{constructor(){super(),this.QVt=0,this.sT=0,this.tkt=0,this.HA=0,this.t7t=0,this.s7t=0,this.i7t=0,this.Xa=0,this.Ya=0,this.e7t=0,this.h7t=0,this.Wm=0,this.jm=0,this.n7t=0,this.r7t=!1,this.o7t=!1}nn(){}fCt(t,s,i,e,h){this.QVt=e,this.sT=h,this.HA=t,this.t7t=t,this.tkt=t,this.s7t=s,this.i7t=i,this.Xa=s,this.Ya=i,this.e7t=s,this.h7t=i}X7(t,s,i,e,h,n){this.t7t=this.HA,this.HA=t,this.e7t=this.Xa,this.h7t=this.Ya,this.Xa=s,this.Ya=i,this.Wm=e,this.jm=h,this.n7t=n,!this.o7t&&15<=r.wn(this.s7t,this.i7t,this.Xa,this.Ya)&&(this.o7t=!0)}jW(){return this.QVt}YHt(){return this.sT}zR(){return this.HA}rVt(t){this.t7t=t}hv(){return this.Xa}ov(){return this.Ya}P6(){const t=r.wn(this.Xa,this.Ya,this.e7t,this.h7t),s=(this.HA-this.t7t)/1e3;return 0<s?t/s:0}zk(){return r.bn(this.e7t,this.h7t,this.Xa,this.Ya)}Qp(){return this.Wm}fm(){return this.jm}KVt(){return this.n7t}oVt(t){return!this.r7t&&500<=t-this.tkt&&!this.o7t&&r.wn(this.s7t,this.i7t,this.Xa,this.Ya)<15&&(this.r7t=!0)}QHt(t){return!this.r7t&&t-this.tkt<=333&&!this.o7t&&r.wn(this.s7t,this.i7t,this.Xa,this.Ya)<15?t-e<=666&&r.wn(s,i,this.Xa,this.Ya)<25?(s=-1e3,i=-1e3,e=-1e4,"double-tap"):(s=this.Xa,i=this.Ya,e=t,"single-tap"):""}MVt(t,s,i){if(void 0===s){const e=t.gO(0);return e.eq(this.Xa,this.Ya)[i?0:1]}{const h=t.pO(s);return h?h.rN(this.Xa,this.Ya)[i?0:1]:0}}}}{const al=self.Ds;al.Q$.Text=class extends al.EMt{constructor(t){super(t)}nn(){super.nn()}}}{const ll=self.Ds;ll.Q$.Text.z_t=class extends ll.pxt{constructor(t){super(t)}nn(){super.nn()}KMt(){}b$(t){}_$(){}}}{const ul=self.Ds,cl=self.Us,fl=[0,0,0],dl=["left","center","right"],pl=["top","center","bottom"],ml=["ltr","rtl"],gl=["word","cjk","character"],yl=new ul.Rect,wl=new ul.$l,Sl=new ul.Wo,bl=ul.hn(ul.$a),vl=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]),F=(ul.Q$.Text.Instance=class extends ul.qxt{constructor(t,s){if(super(t),this.if="",this.a7t=!0,this.l7t="Arial",this.u7t=12,this.c7t=0,this.G_=!1,this.T_=!1,this.Hb=ul.hn(ul.Wo),this.R_=0,this.A_=0,this.O_="word",this.L_=0,this.f7t="auto",this.d7t=1,this.p7t=null,this.m7t="",this.g7t=!1,this.y7t=!1,this.w7t=null,this.S7t=-1,this.b7t=-1,this.v7t=0,this.M7t=ul.hn(ul.qg.ub,this.tf.Tb(),{timeout:5}),this.M7t.uI=()=>this.tf.bO(),this.x7t=()=>this.G7t(),this.T7t=!1,s){this.if=s[0],this.a7t=!!s[1],this.l7t=s[2],this.u7t=s[3],this.c7t=s[4],this.G_=!!s[5],this.T_=!!s[6],this.R_=s[8],this.A_=s[9],this.O_=gl[s[10]],this.L_=s[11],this._7t(this.tf.v8(s[12]));const i=s[7];this.Hb.Jo(i[0],i[1],i[2]),this.dO().I5(s[13]),this.y7t=!!s[15]}this.I7t(),this.C7t()}nn(){this._7t(null),this.E7t(),this.w7t&&(this.w7t.nn(),this.w7t=null),this.M7t.nn(),this.M7t=null,super.nn()}I7t(){const t=this.M7t;t.nf(this.if),t.pI(this.a7t),this.M7t.y_()&&this.p7t?this.M7t.Zp(this.FO().wNt(this.p7t)):this.M7t.Zp(null),t.mI("nearest"!==this.tf.OF()),t.gI(this.l7t),t.bI(this.c7t),t.MI(this.G_),t.GI(this.T_),t.Jb(this.Hb),t.AI(dl[this.R_]),t.DI(pl[this.A_]),t.LI(this.O_),t.NI(ml[this.L_])}P7t(){let t=this.dO(),s=(this.M7t.yI(this.u7t),this.M7t.SI(t.APt()),t.pO()),i;"auto"===this.f7t?i=s.h9(t.U4()):"fixed"===this.f7t&&(i=this.d7t),t.t6()&&i!==this.M7t.HI()&&t.ORt(!0),this.M7t.jI(t.Qp(),t.fm(),i)}_7t(t){t&&(t.Lz()||t.pk().constructor!==ul.Q$.xht)||t!==this.p7t&&(this.p7t&&this.p7t.Lf().removeEventListener("animationframeimagechange",this.x7t),this.p7t=t,this.p7t&&this.p7t.Lf().addEventListener("animationframeimagechange",this.x7t),this.I7t(),this.g7t=!1,this.tf.bO())}G7t(){this.tf.SNt(this.p7t),this.tf.bO(),this.T7t=!0}C7t(){if(this.y7t){let t=this.if;this.a7t&&(t=ul.Th.zp(t)),this.w7t?this.w7t.nf(t):this.w7t=ul.hn(ul.Qc,this.tf,t)}else this.w7t&&(this.w7t.nn(),this.w7t=null)}qv(t){const s=this.dO(),i=(this.P7t(),this.T7t&&(this.T7t=!1,this.M7t.y_())&&this.p7t&&this.M7t.Zp(this.FO().wNt(this.p7t)),this.M7t.xM());if(i){const e=s.pO();if(0===s.zk()&&0===e.zk()&&0===s.U4()&&!s.t6()&&e.xJ()){const h=s.X4(),[n,r]=e.pN(h.Zn(),h.Kn()),[o,a]=e.pN(h.ir(),h.er()),l=n-Math.round(n),u=r-Math.round(r),[c,f]=(yl.set(n,r,o,a),yl.offset(-l,-u),wl.mu(yl),t.OP(t.tR()));this.tf.vL().EH(t,c,f),t.vP(i),t.vS(wl,this.M7t.wC()),e.RH(t)}else t.vP(i),s.t6()?this.zjt(s,t):this.Jjt(s,t)}}Jjt(t,s){let i=t.X4();this.tf.kF()&&(i=this.R7t(i)),s.vS(i,this.M7t.wC())}zjt(s,t){const i=s.DRt();if(s.LRt()){s.dRt(yl,wl,!1);let t=wl;this.tf.kF()&&(t=this.R7t(t)),i.Jv(s.s6(),t,this.M7t.wC()),s.ORt(!1)}i.qv(t)}R7t(t){const s=t.Zn()-Math.round(t.Zn()),i=t.Kn()-Math.round(t.Kn());return 0==s&&0==i?t:(wl.T(t),wl.offset(-s,-i),wl)}iGt(){const t=this.M7t.xM();return t?[t.Qp(),t.fm()]:[100,100]}eGt(){return this.M7t.wC()}rGt(){return!1}wv(){const t={t:this.if,c:this.Hb.toJSON(),fn:this.l7t,ps:this.u7t};return this.a7t&&(t.bbc=this.a7t),0!==this.R_&&(t.ha=this.R_),0!==this.A_&&(t.va=this.A_),"word"!==this.O_&&(t.wr=this.O_),0!==this.c7t&&(t.lho=this.c7t),this.G_&&(t.b=this.G_),this.T_&&(t.i=this.T_),-1!==this.b7t&&(t.tw={st:this.S7t,en:this.b7t,l:this.v7t}),this.p7t&&(t.ioc=this.p7t.zz()),"fixed"===this.f7t&&(t.fs=this.d7t),t}Sv(t){if(this.E7t(),this.if=t.t,this.Hb.ka(t.c),this.l7t=t.fn,this.u7t=t.ps,this.a7t=!!t.hasOwnProperty("bbc")&&t.bbc,this.R_=t.hasOwnProperty("ha")?t.ha:0,this.A_=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.O_="boolean"==typeof s?s?"word":"character":s}else this.O_="word";if(this.c7t=t.hasOwnProperty("lho")?t.lho:0,this.G_=!!t.hasOwnProperty("b")&&t.b,this.T_=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const i=t.tw;this.S7t=i.st,this.b7t=i.en,this.v7t=i.l}if(t.hasOwnProperty("ioc")){const e=this.FO().v8(t.ioc);e&&this._7t(e)}else this._7t(null);t.hasOwnProperty("fs")?(this.f7t="fixed",this.d7t=t.fs):this.f7t="auto",this.I7t(),this.C7t(),this.g7t=!1,-1!==this.b7t&&this.Nxt()}Snt(t){switch(t){case 0:return this.WI();case 1:return this.a7t;case 2:return this.A7t();case 3:return this.F7t();case 4:return this.D7t();case 5:return this.O7t();case 6:return this.L7t();case 7:return fl[0]=this.Hb.ta(),fl[1]=this.Hb.ia(),fl[2]=this.Hb.ea(),fl;case 8:return this.k7t();case 9:return this.N7t();case 10:return this.B7t();case 15:return this.W7t()}}Tnt(t,s){switch(t){case 0:this.j7t(s);break;case 1:this.a7t!==!!s&&(this.a7t=!!s,this.I7t());break;case 2:this.H7t(s);break;case 3:this.V7t(s);break;case 4:this.U7t(s);break;case 5:this.z7t(s);break;case 6:this.J7t(s);break;case 7:const i=this.Hb,e=s;i.ta()===e[0]&&i.ia()===e[1]&&i.ea()===e[2]||(this.Hb.Jo(e[0],e[1],e[2]),this.I7t());break;case 8:this.q7t(s);break;case 9:this.$7t(s);break;case 10:this.X7t(s)}}Vxt(t,s,i,e){0===s&&0===i&&0===e||7===t&&(this.Hb.qo(s,i,e),this.I7t())}j7t(t){this.if!==t&&(this.if=t,this.M7t.nf(t),this.C7t(),this.g7t=!1,this.tf.bO())}WI(){return this.if}Y7t(t,s){this.P7t(),this.j7t(t),this.S7t=this.tf.bD(),this.b7t=this.S7t+s/this.kW().NN(),this.v7t=this.M7t.JI(),this.M7t._I(0),this.Nxt()}E7t(){this.S7t=-1,this.b7t=-1,this.v7t=0,this.M7t._I(-1),this.Mxt()}Z7t(){-1!==this.b7t&&(this.E7t(),this.r4(ul.Q$.Text.Z$.K7t),this.tf.bO())}H7t(t){this.l7t!==t&&(this.l7t=t,this.M7t.gI(t),this.tf.bO())}A7t(){return this.l7t}z7t(t){this.G_!==(t=!!t)&&(this.G_=t,this.M7t.MI(t),this.tf.bO())}O7t(){return this.G_}J7t(t){this.T_!==(t=!!t)&&(this.T_=t,this.M7t.GI(t),this.tf.bO())}L7t(){return this.T_}V7t(t){this.u7t!==t&&(this.u7t=t,this.tf.bO())}F7t(){return this.u7t}Q7t(t){this.Hb.la(t)||(this.Hb.Qo(t),this.M7t.Jb(this.Hb),this.tf.bO())}tUt(){return this.Hb}U7t(t){this.c7t!==t&&(this.c7t=t,this.I7t(),this.tf.bO())}D7t(){return this.c7t}q7t(t){this.R_!==t&&(this.R_=t,this.I7t(),this.tf.bO())}k7t(){return this.R_}$7t(t){this.A_!==t&&(this.A_=t,this.I7t(),this.tf.bO())}N7t(){return this.A_}sUt(t){this.X7t(gl[t])}X7t(t){this.O_!==t&&(this.O_=t,this.I7t(),this.tf.bO())}B7t(){return this.O_}iUt(t){this.L_!==t&&(this.L_=t,this.I7t(),this.tf.bO())}eUt(){return this.L_}hUt(t){this.y7t=!!t,this.C7t()}W7t(){return this.y7t}nUt(t){this.f7t!==t&&(this.f7t=t,this.tf.bO())}rUt(){return this.f7t}oUt(t){this.d7t!==t&&(this.d7t=t,"fixed"===this.f7t)&&this.tf.bO()}aUt(){return this.d7t}lUt(){return this.P7t(),this.M7t.VI()}uUt(){return this.P7t(),this.M7t.zI()}cUt(t,s){this.P7t();const i=this.dO(),e=(bl.set(t-i.hv(),s-i.ov()),bl.rotate(-i.zk()),bl.offset(i.Qp()*i.Y6(),i.fm()*i.K6()),bl.Tt(i.Qp(),i.fm()),bl.scale(this.M7t.Qp(),this.M7t.fm()),this.M7t.$I(bl.Qa(),bl.sl()));if(e){const h=e.sg("tag");if(h)return h.Bp}return""}fUt(t,s,i){const e=this.cUt(s,i);return e&&ul.uh(t,e)}dUt(t,s){this.P7t(),s=Math.floor(s);const i=this.M7t.YI(t,s);if(!i)return null;const e=this.dO(),h=this.M7t.EI(),n=i.Ym(),r=i.Km()-(i.fm()-i.pm())*h,o=i.Qp()*h/this.M7t.Qp()*e.Qp(),a=i.fm()*h/this.M7t.fm()*e.fm();return bl.set(n,r),bl.Tt(this.M7t.Qp(),this.M7t.fm()),bl.scale(e.Qp(),e.fm()),bl.offset(-e.Qp()*e.Y6(),-e.fm()*e.K6()),bl.rotate(e.zk()),bl.offset(e.hv(),e.ov()),{x:bl.Qa(),y:bl.sl(),width:o,height:a}}pUt(t){return this.P7t(),this.M7t.ZI(t)}mUt(t){let s=vl.get(t);return null===s?"":`</${s||"span"||"span"}>`}gUt(t,s){let i=vl.get(t);if(null===i)return"";switch(i=i||"span",t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async yUt(){if(!this.g7t){let t=new ul.Th(this.if,{_p:!0}).kp(),s=new Map,h='<span class="c3-text"',i=[],n=(i.push(`font-family: '${this.A7t()}';`),this.O7t()&&i.push("font-weight: bold;"),this.L7t()&&i.push("font-style: italic;"),"character"===this.B7t()&&i.push("word-break: break-all;"),h+=` style="${i.join(" ")}">`,this.p7t?this.FO().wNt(this.p7t):null);if(this.p7t){const o=ul.hn(ul.n1),a=[],l=new Map;for(const c of t)if(c.lm()){const f=c.og(n);if(f){const d=f.Vg(),p=d.J6().CTt();l.has(p)||(l.set(p,null),a.push(o.nc(async()=>{const t=await p.C7();l.set(p,t)})))}}await Promise.all(a);const u=[];for(const m of t)if(m.lm()){const g=m.og(n);if(g){const y=g.Vg(),w=y.J6().CTt();u.push(o.nc(async()=>{const t=await y.J6().PTt(l.get(w));s.set(g,t)}))}}await Promise.all(u);for(const S of l.values())S instanceof ImageBitmap&&S.close&&S.close()}const r=new Map;for(const b of t){let e=b.eg(),t=[...r.keys()];t.reverse();for(const v of t)e.has(v)&&e.get(v)===r.get(v)||(r.delete(v),h+=this.mUt(v));for(const[M,x]of e)r.has(M)||(r.set(M,x),h+=this.gUt(M,x));if(b.om()&&(h+=ul.Jd(ul.Ud(b.Cm().join("")),"\n","<br>")),b.lm()&&n){const G=b.og(n);if(G){const T=s.get(G);if(T){let t=[],s="0.2em",i=e.get("iconoffsety");if(i){let t=i.trim();s=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}t.push("top: "+s),"nearest"===this.tf.OF()&&t.push("image-rendering: pixelated"),h+=`<img class="c3-text-icon" data-icon="${b.rg()}" width="${G.Qp()}" height="${G.fm()}" style="${t.join(";")}" src="${T}">`}}}}const e=[...r.keys()];e.reverse();for(const _ of e)h+=this.mUt(_);h+="</span>",this.m7t=h,this.g7t=!0}return this.m7t}xZ(){const s=this.tf.bD();if(s>=this.b7t)this.E7t(),this.r4(ul.Q$.Text.Z$.K7t),this.tf.bO();else{let t=ul.En(this.S7t,this.b7t,s,0,this.v7t);(t=Math.floor(t))!==this.M7t.II()&&(this.M7t._I(t),this.tf.bO())}}Hxt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.WI(),v8t:t=>this.j7t(t)},{name:t+".properties.font.name",value:this.A7t(),v8t:t=>this.H7t(t)},{name:t+".properties.size.name",value:this.F7t(),v8t:t=>this.V7t(t)},{name:t+".properties.line-height.name",value:this.D7t(),v8t:t=>this.U7t(t)},{name:t+".properties.bold.name",value:this.O7t(),v8t:t=>this.z7t(t)},{name:t+".properties.italic.name",value:this.L7t(),v8t:t=>this.J7t(t)}]}]}QMt(){return self.wUt}},new WeakMap),Ml=new Map([["left",0],["center",1],["right",2]]),xl=new Map([["top",0],["center",1],["bottom",2]]),Gl=["ltr","rtl"];new Set(["auto","fixed"]);self.wUt=class extends self.e6{constructor(){super(),F.set(this,self.yN.MN().a6())}get text(){return F.get(this).WI()}set text(t){cl.Se(t);const s=F.get(this);s.E7t(),s.j7t(t)}SUt(t,s){cl.Se(t),cl.me(s);const i=F.get(this);i.E7t(),i.Y7t(t,s)}bUt(){F.get(this).Z7t()}set DH(t){cl.Se(t),F.get(this).H7t(t)}get DH(){return F.get(this).A7t()}set LH(t){F.get(this).z7t(t)}get LH(){return F.get(this).O7t()}set kH(t){F.get(this).J7t(t)}get kH(){return F.get(this).L7t()}set OH(t){cl.me(t),F.get(this).V7t(t)}get OH(){return F.get(this).F7t()}set vUt(t){if(cl.Oe(t),t.length<3)throw new Error("expected 3 elements");Sl.Jo(t[0],t[1],t[2]),F.get(this).Q7t(Sl)}get vUt(){const t=F.get(this).tUt();return[t.ta(),t.ia(),t.ea()]}set lineHeight(t){cl.me(t),F.get(this).U7t(t)}get lineHeight(){return F.get(this).D7t()}set WH(t){cl.Se(t);const s=Ml.get(t);if(void 0===s)throw new Error("invalid mode");F.get(this).q7t(s)}get WH(){return dl[F.get(this).k7t()]}set verticalAlign(t){cl.Se(t);const s=xl.get(t);if(void 0===s)throw new Error("invalid mode");F.get(this).$7t(s)}get verticalAlign(){return pl[F.get(this).N7t()]}set jH(t){if(!gl.includes(t))throw new Error("invalid mode");F.get(this).X7t(t)}get jH(){return F.get(this).B7t()}set HH(t){cl.Se(t);const s=Gl.indexOf(t);if(-1===s)throw new Error("invalid text direction");F.get(this).iUt(s)}get HH(){return Gl[F.get(this).eUt()]}set MUt(t){F.get(this).hUt(!!t)}get MUt(){return F.get(this).W7t()}xUt(t){cl.me(t);const s=F.get(this);s.nUt("fixed"),s.oUt(t)}GUt(){F.get(this).nUt("auto")}get zH(){return F.get(this).lUt()}get JH(){return F.get(this).uUt()}TUt(){const t=F.get(this);return[t.lUt(),t.uUt()]}_Ut(t,s,i){return cl.Se(t),cl.me(s),cl.me(i),F.get(this).fUt(t,s,i)}IUt(t,s){return cl.me(t),cl.me(s),F.get(this).cUt(t,s)}CUt(t,s=0){return cl.Se(t),cl.me(s),F.get(this).dUt(t,s)}EUt(t){return cl.Se(t),F.get(this).pUt(t)}PUt(t){const s=F.get(this),i=s.FO().lL(t);s._7t(i)}RUt(){return F.get(this).yUt()}}}{const Tl=self.Ds;Tl.Q$.Text.Z$={AUt(t,s){return s?this.if===t:Tl.uh(this.if,t)},FUt(){return-1!==this.b7t},K7t(){return!0},DUt(t,s,i){return this.fUt(t,s,i)}}}{const _l=self.Ds,Il=_l.hn(_l.Wo);_l.Q$.Text.Wht={nf(t){this.E7t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.j7t(t.toString())},OUt(t){this.E7t(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.j7t(this.if+t)},LUt(t,s){this.E7t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.Y7t(t.toString(),s)},kUt(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.l7t&&i===this.G_&&e===this.T_||(this.H7t(t),this.z7t(i),this.J7t(e))},yI(t){this.V7t(t)},NUt(t){Il.ya(t),Il.cn(),this.Q7t(Il)},BUt(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},tHt(t){this.dO().zb(t),this.tf.bO()},WUt(){this.Z7t()},bI(t){this.U7t(t)},jUt(t){this.q7t(t)},HUt(t){this.$7t(t)},VUt(t){this.sUt(t)},NI(t){this.iUt(t)},UUt(t){this._7t(t)},zUt(){return this.yUt()},JUt(t){this.hUt(t)},qUt(t,s){this.nUt(["auto","fixed"][t]),this.oUt(s)}}}{const Cl=self.Ds;Cl.Q$.Text.jht={Text(){return this.if},$Ut(){return this.a7t?Cl.Th.zp(this.if):this.if},XUt(){return this.l7t},YUt(){return this.u7t},ZUt(){return this.lUt()},KUt(){return this.uUt()},QUt(){return this.c7t},tzt(t,s){return this.cUt(t,s)},szt(t){return this.pUt(t)},izt(t,s){const i=this.dUt(t,s);return i?i.x:0},ezt(t,s){const i=this.dUt(t,s);return i?i.y:0},hzt(t,s){const i=this.dUt(t,s);return i?i.width:0},nzt(t,s){const i=this.dUt(t,s);return i?i.height:0},rzt(){return this.m7t}}}{let t=function(t,s){return"number"==typeof t&&"number"==typeof s},r=function(i,e){if("string"!=typeof i&&"string"!=typeof e)return i&&e?1:0;{let t,s;return t="number"==typeof i?(Math.round(1e10*i)/1e10).toString():i,s="number"==typeof e?(Math.round(1e10*e)/1e10).toString():e,t+s}};t,r,0;const El=self.Ds;self.Cwt=[()=>0,()=>"BugLayer",t=>{const s=t.Nwt(0).hwt(),i=t.Nwt(1),e=t.Nwt(2),h=t.Nwt(3);return()=>s(i.uwt(),e.uwt()+h.uwt())},()=>"",t=>{const s=t.Nwt(0).Iwt();return()=>s.uet()},()=>6,()=>1,()=>10,()=>"Red",()=>"Purple",()=>"Yellow",()=>"White",()=>"CountLayer",t=>{const s=t.Nwt(0).hwt();return()=>s()},t=>{const s=t.Nwt(0).hwt(),i=t.Nwt(1).hwt(),e=t.Nwt(2),h=t.Nwt(3);return()=>El.wn(s(),i(),e.uwt(),h.uwt())},()=>40,t=>{const s=t.Nwt(0).Iwt();return()=>r("Eaten: ",s.uet())},()=>"FinishedLayer",t=>{const s=t.Nwt(0).Iwt();return()=>r("Generation: ",s.uet())},t=>{const s=t.Nwt(0);return()=>s.uwt()},t=>{const s=t.Nwt(0).Iwt();return()=>r("Red Count: ",s.uet())},t=>{const s=t.Nwt(0).Iwt();return()=>r("Purple Count: ",s.uet())},t=>{const s=t.Nwt(0).Iwt(),i=t.Nwt(1).Iwt(),e=t.Nwt(2).Iwt(),h=t.Nwt(3).Iwt(),n=t.Nwt(4).Iwt();return()=>r(r("Yellow Count: ",s.uet())+"      Total: ",i.uet()+e.uet()+h.uet()+n.uet())},t=>{const s=t.Nwt(0).Iwt();return()=>r("White Count: ",s.uet())},t=>{const s=t.Nwt(0).hwt(),i=t.Nwt(1).hwt();return()=>s()+" - "+i()+" - (C) Wild Haired Science Teacher - Find More at whscience.org"},t=>{const s=t.Nwt(0),i=t.Nwt(1);return()=>s.uwt()+i.uwt()/2},t=>{const s=t.Nwt(0);return()=>El.cn(Math.floor(.9*s.gwt()),1,1e4)},t=>{const s=t.Nwt(0);return()=>s.gwt()}]}var t=self.Ds;self.r5t=function(){return[t.Q$.xht,t.Q$.Touch,t.Q$.Text,t.Q$.xht.Z$.Ubt,t.Q$.K$.Wht.CBt,t.Q$.K$.jht.random,t.Q$.xht.jht.W2t,t.Q$.xht.jht.H2t,t.Q$.xht.jht.j2t,t.Q$.xht.jht.V2t,t.Q$.xht.Wht.M8t,t.Q$.xht.Wht.jI,t.Q$.xht.Z$.d2t,t.Q$.xht.Wht.zbt,t.Q$.xht.Wht.b2t,t.Q$.K$.Wht.IBt,t.Q$.K$.Z$.cBt,t.Q$.K$.Z$.Y$,t.Q$.Touch.Z$.tVt,t.Q$.Touch.Z$.dVt,t.Q$.K$.Z$.dBt,t.Q$.K$.Z$.X4t,t.Q$.Touch.jht.W2t,t.Q$.Touch.jht.j2t,t.Q$.K$.Z$.q4t,t.Q$.K$.Wht.MBt,t.Q$.Text.Wht.nf,t.Q$.K$.Wht.ZBt,t.Q$.K$.Wht.vBt,t.Q$.K$.Z$.h1,t.Q$.xht.jht.lMt,t.Q$.xht.jht.hHt,t.Q$.Touch.Z$.sVt,t.Q$.K$.Wht.qBt,t.Q$.xht.Z$.N8t,t.Q$.xht.jht.O2t,t.Q$.K$.Wht.$Bt,t.Q$.Text.jht.W2t,t.Q$.Text.jht.j2t,t.Q$.K$.jht.ajt,t.Q$.K$.jht.ljt,t.Q$.K$.Wht.Pr,t.Q$.xht.Wht.nv,t.Q$.Text.jht.ZUt,t.Q$.Touch.Z$.XHt,t.Q$.K$.Z$.W4t,t.Q$.Text.Z$.u2t,t.Q$.Text.Wht.x2t,t.Q$.Text.jht.YUt,t.Q$.Text.Wht.yI]},self.S5t=[{ozt:0},{azt:0},{Touch:0},{lzt:0},{uzt:0},{czt:0},{fzt:0},{dzt:0},{pzt:0},{mzt:0},{gzt:0},{yzt:0},{wzt:0},{Szt:0},{bzt:0},{vzt:0},{Mzt:0},{xzt:0},{Gzt:0},{Tzt:0},{_zt:0},{Izt:0},{Czt:0},{Ezt:0},{Pzt:0},{Rzt:0},{Azt:0},{Fzt:0},{Dzt:0},{Ozt:0},{Animation:0},{lMt:0}],self.Lzt={ozt:class extends self.I8t{},azt:class extends self.I8t{},Touch:class extends self.yN{},lzt:class extends self.I8t{},czt:class extends self.wUt{},fzt:class extends self.wUt{},dzt:class extends self.wUt{},pzt:class extends self.wUt{},mzt:class extends self.wUt{},gzt:class extends self.wUt{},yzt:class extends self.wUt{},wzt:class extends self.wUt{},Szt:class extends self.wUt{},bzt:class extends self.wUt{},vzt:class extends self.wUt{},Mzt:class extends self.wUt{},xzt:class extends self.wUt{},Gzt:class extends self.wUt{},Tzt:class extends self.I8t{},_zt:class extends self.wUt{},Izt:class extends self.wUt{},Czt:class extends self.I8t{},Ezt:class extends self.wUt{},Pzt:class extends self.I8t{},Rzt:class extends self.wUt{}};