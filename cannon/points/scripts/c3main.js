// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let k=function(t){xn=t},L=function(t){return t*Ln},N=function(t,s){return Math.abs(t-s)<=Mn*Math.max(1,Math.abs(t),Math.abs(s))},B=function(){var t=new xn(4);return xn!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},W=function(t){var s=new xn(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},j=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},V=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},H=function(t,s,i,e){var n=new xn(4);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n},U=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},z=function(t,s){var i;return t===s?(i=s[1],t[1]=s[2],t[2]=i):(t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3]),t},J=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*(s=s[3])-n*e;return r?(t[0]=s*(r=1/r),t[1]=-e*r,t[2]=-n*r,t[3]=i*r,t):null},q=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},$=function(t){return t[0]*t[3]-t[2]*t[1]},t=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3],h=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*h+r*o,t[1]=n*h+s*o,t[2]=e*a+r*i,t[3]=n*a+s*i,t},X=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3],h=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*h,t[1]=n*i+s*h,t[2]=e*-h+r*i,t[3]=n*-h+s*i,t},K=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3],h=i[0],i=i[1];return t[0]=e*h,t[1]=n*h,t[2]=r*i,t[3]=s*i,t},Y=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t},Z=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},Q=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},tt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},st=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},it=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},s=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},et=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},nt=function(t,s){var i=t[0],e=t[1],n=t[2],t=t[3],r=s[0],h=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=Mn*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-h)<=Mn*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-o)<=Mn*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(t-s)<=Mn*Math.max(1,Math.abs(t),Math.abs(s))},rt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},ht=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ot=function(){var t=new xn(6);return xn!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},at=function(t){var s=new xn(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},ut=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ct=function(t,s,i,e,n,r){var h=new xn(6);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h[4]=n,h[5]=r,h},ft=function(t,s,i,e,n,r,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t},dt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],s=s[5],o=i*r-e*n;return o?(t[0]=r*(o=1/o),t[1]=-e*o,t[2]=-n*o,t[3]=i*o,t[4]=(n*s-r*h)*o,t[5]=(e*h-i*s)*o,t):null},pt=function(t){return t[0]*t[3]-t[1]*t[2]},i=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],s=s[5],a=i[0],l=i[1],u=i[2],c=i[3],f=i[4],i=i[5];return t[0]=e*a+r*l,t[1]=n*a+h*l,t[2]=e*u+r*c,t[3]=n*u+h*c,t[4]=e*f+r*i+o,t[5]=n*f+h*i+s,t},mt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],s=s[5],a=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*a,t[1]=n*i+h*a,t[2]=e*-a+r*i,t[3]=n*-a+h*i,t[4]=o,t[5]=s,t},gt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e*a,t[1]=n*a,t[2]=r*i,t[3]=h*i,t[4]=o,t[5]=s,t},yt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=e*a+r*i+o,t[5]=n*a+h*i+s,t},wt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t},St=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},vt=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},Mt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},xt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},e=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},Gt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},Tt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},_t=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},It=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],t=t[5],o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],s=s[5];return Math.abs(i-o)<=Mn*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(e-a)<=Mn*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(n-l)<=Mn*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-u)<=Mn*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(h-c)<=Mn*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(t-s)<=Mn*Math.max(1,Math.abs(t),Math.abs(s))},n=function(){var t=new xn(9);return xn!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Ct=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Et=function(t){var s=new xn(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},Pt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Rt=function(t,s,i,e,n,r,h,o,a){var l=new xn(9);return l[0]=t,l[1]=s,l[2]=i,l[3]=e,l[4]=n,l[5]=r,l[6]=h,l[7]=o,l[8]=a,l},At=function(t,s,i,e,n,r,h,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t},Ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Dt=function(t,s){var i,e,n;return t===s?(i=s[1],e=s[2],n=s[5],t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=n):(t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8]),t},Ot=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=(s=s[8])*h-o*l,c=-s*r+o*a,f=l*r-h*a,d=i*u+e*c+n*f;return d?(t[0]=u*(d=1/d),t[1]=(-s*e+n*l)*d,t[2]=(o*e-n*h)*d,t[3]=c*d,t[4]=(s*i-n*a)*d,t[5]=(-o*i+n*r)*d,t[6]=f*d,t[7]=(-l*i+e*a)*d,t[8]=(h*i-e*r)*d,t):null},kt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],s=s[8];return t[0]=h*s-o*l,t[1]=n*l-e*s,t[2]=e*o-n*h,t[3]=o*a-r*s,t[4]=i*s-n*a,t[5]=n*r-i*o,t[6]=r*l-h*a,t[7]=e*a-i*l,t[8]=i*h-e*r,t},Lt=function(t){var s=t[0],i=t[3],e=t[4],n=t[5],r=t[6],h=t[7],o=t[8];return s*(o*e-n*h)+t[1]*(-o*i+n*r)+t[2]*(h*i-e*r)},r=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],w=i[7],i=i[8];return t[0]=c*e+f*h+d*l,t[1]=c*n+f*o+d*u,t[2]=c*r+f*a+d*s,t[3]=p*e+m*h+g*l,t[4]=p*n+m*o+g*u,t[5]=p*r+m*a+g*s,t[6]=y*e+w*h+i*l,t[7]=y*n+w*o+i*u,t[8]=y*r+w*a+i*s,t},Nt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],i=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=c*e+i*h+l,t[7]=c*n+i*o+u,t[8]=c*r+i*a+s,t},Bt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=Math.sin(i),i=Math.cos(i);return t[0]=i*e+c*h,t[1]=i*n+c*o,t[2]=i*r+c*a,t[3]=i*h-c*e,t[4]=i*o-c*n,t[5]=i*a-c*r,t[6]=l,t[7]=u,t[8]=s,t},Wt=function(t,s,i){var e=i[0],i=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=i*s[3],t[4]=i*s[4],t[5]=i*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},jt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Vt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ht=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ut=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},zt=function(t,s){var i=s[0],e=s[2],n=e+e,i=i*(l=i+i),r=(h=s[1])*l,h=h*(u=h+h),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*n;return t[0]=1-h-(e=e*n),t[3]=r-s,t[6]=o+u,t[1]=r+s,t[4]=1-i-e,t[7]=a-l,t[2]=o-u,t[5]=a+l,t[8]=1-i-h,t},Jt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*h,w=i*a-n*h,S=i*l-r*h,b=e*a-n*o,v=e*l-r*o,M=n*l-r*a,x=u*m-c*p,G=u*g-f*p,T=c*g-f*m;return(d=y*(f=f*(s=s[15])-d*g)-w*(c=c*s-d*m)+S*T+b*(u=u*s-d*p)-v*G+M*x)?(t[0]=(o*f-a*c+l*T)*(d=1/d),t[1]=(a*u-h*f-l*G)*d,t[2]=(h*c-o*u+l*x)*d,t[3]=(n*c-e*f-r*T)*d,t[4]=(i*f-n*u+r*G)*d,t[5]=(e*u-i*c-r*x)*d,t[6]=(m*M-g*v+s*b)*d,t[7]=(g*S-p*M-s*w)*d,t[8]=(p*v-m*S+s*y)*d,t):null},qt=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},$t=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Xt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Kt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},h=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Yt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Zt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Qt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},ts=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],t=t[8],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7],s=s[8];return Math.abs(i-u)<=Mn*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-c)<=Mn*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(n-f)<=Mn*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=Mn*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(h-p)<=Mn*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=Mn*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=Mn*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=Mn*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(t-s)<=Mn*Math.max(1,Math.abs(t),Math.abs(s))},ss=function(){var t=new xn(16);return xn!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},is=function(t){var s=new xn(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},ns=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m){var g=new xn(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=n,g[5]=r,g[6]=h,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},rs=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},p=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},hs=function(t,s){var i,e,n,r,h,o;return t===s?(i=s[1],e=s[2],n=s[3],r=s[6],h=s[7],o=s[11],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=n,t[13]=h,t[14]=o):(t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15]),t},os=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*h,w=i*a-n*h,S=i*l-r*h,b=e*a-n*o,v=e*l-r*o,M=n*l-r*a,x=u*m-c*p,G=u*g-f*p,T=u*(s=s[15])-d*p,_=c*g-f*m,I=c*s-d*m,C=f*s-d*g,E=y*C-w*I+S*_+b*T-v*G+M*x;return E?(t[0]=(o*C-a*I+l*_)*(E=1/E),t[1]=(n*I-e*C-r*_)*E,t[2]=(m*M-g*v+s*b)*E,t[3]=(f*v-c*M-d*b)*E,t[4]=(a*T-h*C-l*G)*E,t[5]=(i*C-n*T+r*G)*E,t[6]=(g*S-p*M-s*w)*E,t[7]=(u*M-f*S+d*w)*E,t[8]=(h*I-o*T+l*x)*E,t[9]=(e*T-i*I-r*x)*E,t[10]=(p*v-m*S+s*y)*E,t[11]=(c*S-u*v-d*y)*E,t[12]=(o*G-h*_-a*x)*E,t[13]=(i*_-e*G+n*x)*E,t[14]=(m*w-p*b-g*y)*E,t[15]=(u*b-c*w+f*y)*E,t):null},as=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*h,w=i*a-n*h,S=i*l-r*h,b=e*a-n*o,v=e*l-r*o,M=n*l-r*a,x=u*m-c*p,G=u*g-f*p,T=u*(s=s[15])-d*p,_=c*g-f*m,I=c*s-d*m,C=f*s-d*g;return t[0]=o*C-a*I+l*_,t[1]=n*I-e*C-r*_,t[2]=m*M-g*v+s*b,t[3]=f*v-c*M-d*b,t[4]=a*T-h*C-l*G,t[5]=i*C-n*T+r*G,t[6]=g*S-p*M-s*w,t[7]=u*M-f*S+d*w,t[8]=h*I-o*T+l*x,t[9]=e*T-i*I-r*x,t[10]=p*v-m*S+s*y,t[11]=c*S-u*v-d*y,t[12]=o*G-h*_-a*x,t[13]=i*_-e*G+n*x,t[14]=m*w-p*b-g*y,t[15]=u*b-c*w+f*y,t},ls=function(t){var s=t[0],i=t[1],e=t[2],n=t[4],r=t[5],h=t[6],o=t[8],a=t[9],l=t[10],u=t[12],c=t[13],f=t[14],d=s*r-i*n,p=s*h-e*n,m=i*h-e*r,g=o*c-a*u,y=o*f-l*u,w=a*f-l*c;return t[7]*(s*w-i*y+e*g)-t[3]*(n*w-r*y+h*g)+t[15]*(o*m-a*p+l*d)-t[11]*(u*m-c*p+f*d)},o=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],s=s[15],w=i[0],S=i[1],b=i[2],v=i[3];return t[0]=w*e+S*o+b*c+v*m,t[1]=w*n+S*a+b*f+v*g,t[2]=w*r+S*l+b*d+v*y,t[3]=w*h+S*u+b*p+v*s,t[4]=(w=i[4])*e+(S=i[5])*o+(b=i[6])*c+(v=i[7])*m,t[5]=w*n+S*a+b*f+v*g,t[6]=w*r+S*l+b*d+v*y,t[7]=w*h+S*u+b*p+v*s,t[8]=(w=i[8])*e+(S=i[9])*o+(b=i[10])*c+(v=i[11])*m,t[9]=w*n+S*a+b*f+v*g,t[10]=w*r+S*l+b*d+v*y,t[11]=w*h+S*u+b*p+v*s,t[12]=(w=i[12])*e+(S=i[13])*o+(b=i[14])*c+(v=i[15])*m,t[13]=w*n+S*a+b*f+v*g,t[14]=w*r+S*l+b*d+v*y,t[15]=w*h+S*u+b*p+v*s,t},us=function(t,s,i){var e,n,r,h,o,a,l,u,c,f,d,p,m=i[0],g=i[1],i=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*i+s[12],t[13]=s[1]*m+s[5]*g+s[9]*i+s[13],t[14]=s[2]*m+s[6]*g+s[10]*i+s[14],t[15]=s[3]*m+s[7]*g+s[11]*i+s[15]):(e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*i+s[12],t[13]=n*m+a*g+f*i+s[13],t[14]=r*m+l*g+d*i+s[14],t[15]=h*m+u*g+p*i+s[15]),t},cs=function(t,s,i){var e=i[0],n=i[1],i=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*n,t[5]=s[5]*n,t[6]=s[6]*n,t[7]=s[7]*n,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fs=function(t,s,i,e){var n,r,h,o,a,l,u,c,f,d,p,m,g,y,w,S,b,v,M,x,G=e[0],T=e[1],e=e[2],_=Math.hypot(G,T,e);return _<Mn?null:(G*=_=1/_,T*=_,e*=_,_=Math.sin(i),i=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],u=s[5],c=s[6],f=s[7],p=s[9],m=s[10],g=s[11],w=G*T*(n=1-i)-e*_,S=T*T*n+i,b=e*T*n+G*_,v=G*e*n+T*_,M=T*e*n-G*_,x=e*e*n+i,t[0]=r*(i=G*G*n+i)+(l=s[4])*(y=T*G*n+e*_)+(d=s[8])*(e=e*G*n-T*_),t[1]=h*i+u*y+p*e,t[2]=o*i+c*y+m*e,t[3]=a*i+f*y+g*e,t[4]=r*w+l*S+d*b,t[5]=h*w+u*S+p*b,t[6]=o*w+c*S+m*b,t[7]=a*w+f*S+g*b,t[8]=r*v+l*M+d*x,t[9]=h*v+u*M+p*x,t[10]=o*v+c*M+m*x,t[11]=a*v+f*M+g*x,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},ds=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),n=s[4],r=s[5],h=s[6],o=s[7],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=n*i+a*e,t[5]=r*i+l*e,t[6]=h*i+u*e,t[7]=o*i+c*e,t[8]=a*i-n*e,t[9]=l*i-r*e,t[10]=u*i-h*e,t[11]=c*i-o*e,t},ps=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),n=s[0],r=s[1],h=s[2],o=s[3],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=n*i-a*e,t[1]=r*i-l*e,t[2]=h*i-u*e,t[3]=o*i-c*e,t[8]=n*e+a*i,t[9]=r*e+l*i,t[10]=h*e+u*i,t[11]=o*e+c*i,t},ms=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),n=s[0],r=s[1],h=s[2],o=s[3],a=s[4],l=s[5],u=s[6],c=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=n*i+a*e,t[1]=r*i+l*e,t[2]=h*i+u*e,t[3]=o*i+c*e,t[4]=a*i-n*e,t[5]=l*i-r*e,t[6]=u*i-h*e,t[7]=c*i-o*e,t},gs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ys=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ws=function(t,s,i){var e,n=i[0],r=i[1],i=i[2],h=Math.hypot(n,r,i);return h<Mn?null:(n*=h=1/h,r*=h,i*=h,h=Math.sin(s),s=Math.cos(s),t[0]=n*n*(e=1-s)+s,t[1]=r*n*e+i*h,t[2]=i*n*e-r*h,t[3]=0,t[4]=n*r*e-i*h,t[5]=r*r*e+s,t[6]=i*r*e+n*h,t[7]=0,t[8]=n*i*e+r*h,t[9]=r*i*e-n*h,t[10]=i*i*e+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},Ss=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},bs=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},vs=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f=function(t,s,i){var e=s[0],n=s[2],r=n+n,h=e*(u=e+e),o=e*(c=(l=s[1])+l),e=e*r,a=l*c,l=l*r,u=(s=s[3])*u,c=s*c,s=s*r;return t[0]=1-(a+(n=n*r)),t[1]=o+s,t[2]=e-c,t[3]=0,t[4]=o-s,t[5]=1-(h+n),t[6]=l+u,t[7]=0,t[8]=e+c,t[9]=l-u,t[10]=1-(h+a),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ms=function(t,s){var i=new xn(3),e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=e*e+n*n+r*r+h*h;return 0<c?(i[0]=2*(o*h+u*e+a*r-l*n)/c,i[1]=2*(a*h+u*n+l*e-o*r)/c,i[2]=2*(l*h+u*r+o*n-a*e)/c):(i[0]=2*(o*h+u*e+a*r-l*n),i[1]=2*(a*h+u*n+l*e-o*r),i[2]=2*(l*h+u*r+o*n-a*e)),f(t,s,i),t},a=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},d=function(t,s){var i=s[0],e=s[4],n=s[5],r=s[6],h=s[8],o=s[9],a=s[10];return t[0]=Math.hypot(i,s[1],s[2]),t[1]=Math.hypot(e,n,r),t[2]=Math.hypot(h,o,a),t},l=function(t,s){var i=new xn(3),e=(d(i,s),1/i[0]),n=s[0]*e,r=s[1]*(u=1/i[1]),h=s[2]*(i=1/i[2]),o=s[4]*e,a=s[5]*u,l=s[6]*i,e=s[8]*e,u=s[9]*u,c=0;return 0<(i=n+a+(s=s[10]*i))?(c=2*Math.sqrt(1+i),t[3]=.25*c,t[0]=(l-u)/c,t[1]=(e-h)/c,t[2]=(r-o)/c):a<n&&s<n?(c=2*Math.sqrt(1+n-a-s),t[3]=(l-u)/c,t[0]=.25*c,t[1]=(r+o)/c,t[2]=(e+h)/c):s<a?(c=2*Math.sqrt(1+a-n-s),t[3]=(e-h)/c,t[0]=(r+o)/c,t[1]=.25*c,t[2]=(l+u)/c):(c=2*Math.sqrt(1+s-n-a),t[3]=(r-o)/c,t[0]=(e+h)/c,t[1]=(l+u)/c,t[2]=.25*c),t},xs=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var s=e[0],n=e[1],r=e[2],h=e[4],o=e[5],a=e[6],l=e[8],u=e[9],e=e[10],c=(i[0]=Math.hypot(s,n,r),i[1]=Math.hypot(h,o,a),i[2]=Math.hypot(l,u,e),1/i[0]),f=1/i[1],s=s*c,n=n*f,r=r*(i=1/i[2]),h=h*c,a=a*i,l=l*c,c=u*f,u=e*i,e=0;return 0<(f=s+(o=o*f)+u)?(e=2*Math.sqrt(1+f),t[3]=.25*e,t[0]=(a-c)/e,t[1]=(l-r)/e,t[2]=(n-h)/e):o<s&&u<s?(e=2*Math.sqrt(1+s-o-u),t[3]=(a-c)/e,t[0]=.25*e,t[1]=(n+h)/e,t[2]=(l+r)/e):u<o?(e=2*Math.sqrt(1+o-s-u),t[3]=(l-r)/e,t[0]=(n+h)/e,t[1]=.25*e,t[2]=(a+c)/e):(e=2*Math.sqrt(1+u-s-o),t[3]=(n-h)/e,t[0]=(l+r)/e,t[1]=(a+c)/e,t[2]=.25*e),t},Gs=function(t,s,i,e){var n=(h=s[0])*(u=h+h),r=h*(c=(a=s[1])+a),h=h*(f=(l=s[2])+l),o=a*c,a=a*f,l=l*f,u=(s=s[3])*u,c=s*c,s=s*f,f=e[0],d=e[1],e=e[2];return t[0]=(1-(o+l))*f,t[1]=(r+s)*f,t[2]=(h-c)*f,t[3]=0,t[4]=(r-s)*d,t[5]=(1-(n+l))*d,t[6]=(a+u)*d,t[7]=0,t[8]=(h+c)*e,t[9]=(a-u)*e,t[10]=(1-(n+o))*e,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ts=function(t,s,i,e,n){var r=(o=s[0])*(c=o+o),h=o*(f=(l=s[1])+l),o=o*(d=(u=s[2])+u),a=l*f,l=l*d,u=u*d,c=(s=s[3])*c,f=s*f,s=s*d,d=e[0],p=e[1],e=e[2],m=n[0],g=n[1],n=n[2],y=(1-(a+u))*d,w=(h+s)*d,d=(o-f)*d,h=(h-s)*p,s=(1-(r+u))*p,u=(l+c)*p,p=(o+f)*e,o=(l-c)*e,f=(1-(r+a))*e;return t[0]=y,t[1]=w,t[2]=d,t[3]=0,t[4]=h,t[5]=s,t[6]=u,t[7]=0,t[8]=p,t[9]=o,t[10]=f,t[11]=0,t[12]=i[0]+m-(y*m+h*g+p*n),t[13]=i[1]+g-(w*m+s*g+o*n),t[14]=i[2]+n-(d*m+u*g+f*n),t[15]=1,t},_s=function(t,s){var i=s[0],e=s[2],n=e+e,i=i*(l=i+i),r=(h=s[1])*l,h=h*(u=h+h),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*n;return t[0]=1-h-(e=e*n),t[1]=r+s,t[2]=o-u,t[3]=0,t[4]=r-s,t[5]=1-i-e,t[6]=a+l,t[7]=0,t[8]=o+u,t[9]=a-l,t[10]=1-i-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Is=function(t,s,i,e,n,r,h){var o=1/(i-s),a=1/(n-e),l=1/(r-h);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(n+e)*a,t[10]=(h+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*r*2*l,t[15]=0,t},u=function(t,s,i,e,n){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(t[10]=(n+e)*(i=1/(e-n)),t[14]=2*n*e*i):(t[10]=-1,t[14]=-2*e),t},Cs=function(t,s,i,e,n){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(t[10]=n*(i=1/(e-n)),t[14]=n*e*i):(t[10]=-1,t[14]=-e),t},Es=function(t,s,i,e){var n=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),h=Math.tan(s.leftDegrees*Math.PI/180),o=2/(h+(s=Math.tan(s.rightDegrees*Math.PI/180))),a=2/(n+r);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(h-s)*o*.5,t[9]=(n-r)*a*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},c=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=(h+r)*l,t[15]=1,t},Ps=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),h=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=h,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=r*h,t[15]=1,t},Rs=function(t,s,i,e){var n,r,h,o,a=s[0],l=s[1],s=s[2],u=e[0],c=e[1],e=e[2],f=i[0],d=i[1],i=i[2];return Math.abs(a-f)<Mn&&Math.abs(l-d)<Mn&&Math.abs(s-i)<Mn?p(t):(f=a-f,d=l-d,i=s-i,n=c*(i*=o=1/Math.hypot(f,d,i))-e*(d*=o),e=e*(f*=o)-u*i,u=u*d-c*f,(o=Math.hypot(n,e,u))?(n*=o=1/o,e*=o,u*=o):u=e=n=0,c=d*u-i*e,r=i*n-f*u,h=f*e-d*n,(o=Math.hypot(c,r,h))?(c*=o=1/o,r*=o,h*=o):h=r=c=0,t[0]=n,t[1]=c,t[2]=f,t[3]=0,t[4]=e,t[5]=r,t[6]=d,t[7]=0,t[8]=u,t[9]=h,t[10]=i,t[11]=0,t[12]=-(n*a+e*l+u*s),t[13]=-(c*a+r*l+h*s),t[14]=-(f*a+d*l+i*s),t[15]=1,t)},As=function(t,s,i,e){var n=s[0],r=s[1],s=s[2],h=e[0],o=e[1],e=e[2],a=n-i[0],l=r-i[1],u=a*a+l*l+(i=s-i[2])*i,c=(0<u&&(a*=u=1/Math.sqrt(u),l*=u,i*=u),o*i-e*l);return 0<(u=c*c+(e=e*a-h*i)*e+(h=h*l-o*a)*h)&&(c*=u=1/Math.sqrt(u),e*=u,h*=u),t[0]=c,t[1]=e,t[2]=h,t[3]=0,t[4]=l*h-i*e,t[5]=i*c-a*h,t[6]=a*e-l*c,t[7]=0,t[8]=a,t[9]=l,t[10]=i,t[11]=0,t[12]=n,t[13]=r,t[14]=s,t[15]=1,t},Fs=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Ds=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Os=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},ks=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},Ls=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Ns=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},Bs=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Ws=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],t=t[15],y=s[0],w=s[1],S=s[2],b=s[3],v=s[4],M=s[5],x=s[6],G=s[7],T=s[8],_=s[9],I=s[10],C=s[11],E=s[12],P=s[13],R=s[14],s=s[15];return Math.abs(i-y)<=Mn*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(e-w)<=Mn*Math.max(1,Math.abs(e),Math.abs(w))&&Math.abs(n-S)<=Mn*Math.max(1,Math.abs(n),Math.abs(S))&&Math.abs(r-b)<=Mn*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(h-v)<=Mn*Math.max(1,Math.abs(h),Math.abs(v))&&Math.abs(o-M)<=Mn*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(a-x)<=Mn*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(l-G)<=Mn*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(u-T)<=Mn*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(c-_)<=Mn*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(f-I)<=Mn*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-C)<=Mn*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-E)<=Mn*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(m-P)<=Mn*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(g-R)<=Mn*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(t-s)<=Mn*Math.max(1,Math.abs(t),Math.abs(s))},m=function(){var t=new xn(3);return xn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},js=function(t){var s=new xn(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Vs=function(t){var s=t[0];return Math.hypot(s,t[1],t[2])},g=function(t,s,i){var e=new xn(3);return e[0]=t,e[1]=s,e[2]=i,e},Hs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Us=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},zs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Js=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},qs=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},$s=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},Xs=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Ks=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Ys=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Zs=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},Qs=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ti=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},si=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ii=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2])},ei=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e+(s=s[2]-t[2])*s},ni=function(t){var s=t[0],i=t[1];return s*s+i*i+(t=t[2])*t},ri=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},hi=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},y=function(t,s){var i=s[0],e=s[1],n=s[2];return 0<(i=i*i+e*e+n*n)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},w=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},S=function(t,s,i){var e=s[0],n=s[1],s=s[2],r=i[0],h=i[1],i=i[2];return t[0]=n*i-s*h,t[1]=s*r-e*i,t[2]=e*h-n*r,t},oi=function(t,s,i,e){var n=s[0],r=s[1],s=s[2];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=s+e*(i[2]-s),t},ai=function(t,s,i,e){var n=Math.acos(Math.min(Math.max(w(s,i),-1),1)),r=Math.sin(n),h=Math.sin((1-e)*n)/r,e=Math.sin(e*n)/r;return t[0]=h*s[0]+e*i[0],t[1]=h*s[1]+e*i[1],t[2]=h*s[2]+e*i[2],t},li=function(t,s,i,e,n,r){var h=r*r,o=h*(2*r-3)+1,a=h*(r-2)+r,l=h*(r-1);return t[0]=s[0]*o+i[0]*a+e[0]*l+n[0]*(h=h*(3-2*r)),t[1]=s[1]*o+i[1]*a+e[1]*l+n[1]*h,t[2]=s[2]*o+i[2]*a+e[2]*l+n[2]*h,t},ui=function(t,s,i,e,n,r){var h=1-r,o=h*h,a=r*r,l=o*h;return t[0]=s[0]*l+i[0]*(o=3*r*o)+e[0]*(h=3*a*h)+n[0]*(a=a*r),t[1]=s[1]*l+i[1]*o+e[1]*h+n[1]*a,t[2]=s[2]*l+i[2]*o+e[2]*h+n[2]*a,t},ci=function(t,s){s=s||1;var i=2*On()*Math.PI,e=2*On()-1,n=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*n,t[1]=Math.sin(i)*n,t[2]=e*s,t},fi=function(t,s,i){var e=s[0],n=s[1],s=s[2],r=i[3]*e+i[7]*n+i[11]*s+i[15];return t[0]=(i[0]*e+i[4]*n+i[8]*s+i[12])/(r=r||1),t[1]=(i[1]*e+i[5]*n+i[9]*s+i[13])/r,t[2]=(i[2]*e+i[6]*n+i[10]*s+i[14])/r,t},di=function(t,s,i){var e=s[0],n=s[1],s=s[2];return t[0]=e*i[0]+n*i[3]+s*i[6],t[1]=e*i[1]+n*i[4]+s*i[7],t[2]=e*i[2]+n*i[5]+s*i[8],t},pi=function(t,s,i){var e=i[0],n=i[1],r=s[0],h=s[1],o=n*(s=s[2])-(c=i[2])*h,a=c*r-e*s,l=e*h-n*r,u=n*l-c*a,c=c*o-e*l,e=e*a-n*o;return a*=n=2*i[3],l*=n,c*=2,e*=2,t[0]=r+(o*=n)+(u*=2),t[1]=h+a+c,t[2]=s+l+e,t},mi=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0],r[1]=n[1]*Math.cos(e)-n[2]*Math.sin(e),r[2]=n[1]*Math.sin(e)+n[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},gi=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[2]*Math.sin(e)+n[0]*Math.cos(e),r[1]=n[1],r[2]=n[2]*Math.cos(e)-n[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},yi=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0]*Math.cos(e)-n[1]*Math.sin(e),r[1]=n[0]*Math.sin(e)+n[1]*Math.cos(e),r[2]=n[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},wi=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2],e=(i=Math.sqrt((i*i+e*e+n*n)*(r*r+h*h+o*o)))&&w(t,s)/i;return Math.acos(Math.min(Math.max(e,-1),1))},Si=function(t){return t[0]=0,t[1]=0,t[2]=0,t},bi=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},vi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},Mi=function(t,s){var i=t[0],e=t[1],t=t[2],n=s[0],r=s[1],s=s[2];return Math.abs(i-n)<=Mn*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(e-r)<=Mn*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(t-s)<=Mn*Math.max(1,Math.abs(t),Math.abs(s))},b=function(){var t=new xn(4);return xn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},xi=function(t){var s=new xn(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Gi=function(t,s,i,e){var n=new xn(4);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n},Ti=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},_i=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},Ii=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Ci=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Ei=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Pi=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Ri=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ai=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Fi=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Di=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Oi=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},ki=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Li=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Ni=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2],s[3]-t[3])},Bi=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return i*i+e*e+n*n+(s=s[3]-t[3])*s},v=function(t){var s=t[0];return Math.hypot(s,t[1],t[2],t[3])},M=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e+(t=t[3])*t},Wi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},ji=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Vi=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*i+e*e+n*n+(s=s[3])*s;return 0<r&&(r=1/Math.sqrt(r)),t[0]=i*r,t[1]=e*r,t[2]=n*r,t[3]=s*r,t},x=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Hi=function(t,s,i,e){var n=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],h=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],i=i[2]*e[3]-i[3]*e[2],e=s[0],l=s[1],u=s[2],s=s[3];return t[0]=l*i-u*a+s*o,t[1]=-e*i+u*h-s*r,t[2]=e*a-l*h+s*n,t[3]=-e*o+l*r-u*n,t},Ui=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],s=s[3];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t[3]=s+e*(i[3]-s),t},zi=function(t,s){var i,e,n,r,h,o;for(s=s||1;1<=(h=(i=2*On()-1)*i+(e=2*On()-1)*e););for(;1<=(o=(n=2*On()-1)*n+(r=2*On()-1)*r););var a=Math.sqrt((1-h)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*n*a,t[3]=s*r*a,t},Ji=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3];return t[0]=i[0]*e+i[4]*n+i[8]*r+i[12]*s,t[1]=i[1]*e+i[5]*n+i[9]*r+i[13]*s,t[2]=i[2]*e+i[6]*n+i[10]*r+i[14]*s,t[3]=i[3]*e+i[7]*n+i[11]*r+i[15]*s,t},qi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2],l=(i=i[3])*e+o*r-a*n,u=i*n+a*e-h*r,c=i*r+h*n-o*e;return t[0]=l*i+(e=-h*e-o*n-a*r)*-h+u*-a-c*-o,t[1]=u*i+e*-o+c*-h-l*-a,t[2]=c*i+e*-a+l*-o-u*-h,t[3]=s[3],t},$i=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},Xi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Ki=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Yi=function(t,s){var i=t[0],e=t[1],n=t[2],t=t[3],r=s[0],h=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=Mn*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-h)<=Mn*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-o)<=Mn*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(t-s)<=Mn*Math.max(1,Math.abs(t),Math.abs(s))},G=function(){var t=new xn(4);return xn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Zi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},T=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},Qi=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return Mn<e?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){return t=Jn(t,s),Math.acos(2*t*t-1)},se=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3],h=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*i+s*h+n*a-r*o,t[1]=n*i+s*o+r*h-e*a,t[2]=r*i+s*a+e*o-n*h,t[3]=s*i-e*h-n*o-r*a,t},_=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],s=s[3],h=Math.sin(i),i=Math.cos(i);return t[0]=e*i+s*h,t[1]=n*i+r*h,t[2]=r*i-n*h,t[3]=s*i-e*h,t},I=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],s=s[3],h=Math.sin(i),i=Math.cos(i);return t[0]=e*i-r*h,t[1]=n*i+s*h,t[2]=r*i+e*h,t[3]=s*i-n*h,t},C=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],s=s[3],h=Math.sin(i),i=Math.cos(i);return t[0]=e*i+n*h,t[1]=n*i-e*h,t[2]=r*i+s*h,t[3]=s*i-r*h,t},ie=function(t,s){var i=s[0],e=s[1],s=s[2];return t[0]=i,t[1]=e,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-s*s)),t},E=function(t,s){var i=s[0],e=s[1],n=s[2],s=s[3],r=Math.sqrt(i*i+e*e+n*n),s=Math.exp(s),h=0<r?s*Math.sin(r)/r:0;return t[0]=i*h,t[1]=e*h,t[2]=n*h,t[3]=s*Math.cos(r),t},P=function(t,s){var i=s[0],e=s[1],n=s[2],s=s[3],r=0<(r=Math.sqrt(i*i+e*e+n*n))?Math.atan2(r,s)/r:0;return t[0]=i*r,t[1]=e*r,t[2]=n*r,t[3]=.5*Math.log(i*i+e*e+n*n+s*s),t},ee=function(t,s,i){return P(t,s),zn(t,t,i),E(t,t),t},R=function(t,s,i,e){var n,r,h=s[0],o=s[1],a=s[2],s=s[3],l=i[0],u=i[1],c=i[2],f=h*l+o*u+a*c+s*(i=i[3]);return f<0&&(f=-f,l=-l,u=-u,c=-c,i=-i),f=Mn<1-f?(f=Math.acos(f),n=Math.sin(f),r=Math.sin((1-e)*f)/n,Math.sin(e*f)/n):(r=1-e,e),t[0]=r*h+f*l,t[1]=r*o+f*u,t[2]=r*a+f*c,t[3]=r*s+f*i,t},ne=function(t){var s=On(),i=On(),e=On(),n=Math.sqrt(1-s),s=Math.sqrt(s);return t[0]=n*Math.sin(2*Math.PI*i),t[1]=n*Math.cos(2*Math.PI*i),t[2]=s*Math.sin(2*Math.PI*e),t[3]=s*Math.cos(2*Math.PI*e),t},re=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*i+e*e+n*n+(s=s[3])*s;return t[0]=-i*(r=r?1/r:0),t[1]=-e*r,t[2]=-n*r,t[3]=s*r,t},he=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},A=function(t,s){var i,e,n,r=s[0]+s[4]+s[8];return 0<r?(n=Math.sqrt(r+1),t[3]=.5*n,t[0]=(s[5]-s[7])*(n=.5/n),t[1]=(s[6]-s[2])*n,t[2]=(s[1]-s[3])*n):(i=(1+(r=s[3*(r=s[4]>s[0]?1:0)+r]<s[8]?2:r))%3,e=(2+r)%3,n=Math.sqrt(s[3*r+r]-s[3*i+i]-s[3*e+e]+1),t[r]=.5*n,t[3]=(s[3*i+e]-s[3*e+i])*(n=.5/n),t[i]=(s[3*i+r]+s[3*r+i])*n,t[e]=(s[3*e+r]+s[3*r+e])*n),t},oe=function(t,s,i,e){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:kn,r=Math.PI/360,h=(e*=r,i*=r,Math.sin(s*=r)),o=Math.cos(s),a=Math.sin(i),l=Math.cos(i),u=Math.sin(e),c=Math.cos(e);switch(n){case"xyz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"xzy":t[0]=h*l*c-o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c+h*a*u;break;case"yxz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;case"yzx":t[0]=h*l*c+o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c-h*a*u;break;case"zxy":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"zyx":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;default:throw new Error("Unknown angle order "+n)}return t},ae=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},le=function(t,s){return Math.abs(x(t,s))>=1-Mn},ue=function(){var t=new xn(8);return xn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},ce=function(t){var s=new xn(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},fe=function(t,s,i,e,n,r,h,o){var a=new xn(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=n,a[5]=r,a[6]=h,a[7]=o,a},de=function(t,s,i,e,n,r,h){var o=new xn(8),n=(o[0]=t,o[1]=s,o[2]=i,o[3]=e,.5*n),r=.5*r,h=.5*h;return o[4]=n*e+r*i-h*s,o[5]=r*e+h*t-n*i,o[6]=h*e+n*s-r*t,o[7]=-n*t-r*s-h*i,o},F=function(t,s,i){var e=.5*i[0],n=.5*i[1],i=.5*i[2],r=s[0],h=s[1],o=s[2],s=s[3];return t[0]=r,t[1]=h,t[2]=o,t[3]=s,t[4]=e*s+n*o-i*h,t[5]=n*s+i*r-e*o,t[6]=i*s+e*h-n*r,t[7]=-e*r-n*h-i*o,t},pe=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},me=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},ge=function(t,s){var i=G(),e=(l(i,s),new xn(3));return a(e,s),F(t,i,e),t},D=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},ye=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},we=function(t,s,i,e,n,r,h,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t},Se=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},be=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},ve=function(t,s){var i=s[4],e=s[5],n=s[6],r=s[7],h=-s[0],o=-s[1],a=-s[2],s=s[3];return t[0]=2*(i*s+r*h+e*a-n*o),t[1]=2*(e*s+r*o+n*h-i*a),t[2]=2*(n*s+r*a+i*o-e*h),t},Me=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=.5*i[0],a=.5*i[1],i=.5*i[2],l=s[4],u=s[5],c=s[6],s=s[7];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=h*o+n*i-r*a+l,t[5]=h*a+r*o-e*i+u,t[6]=h*i+e*a-n*o+c,t[7]=-e*o-n*a-r*i+s,t},xe=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=o*h+(d=s[7])*e+a*r-l*n,c=a*h+d*n+l*e-o*r,f=l*h+d*r+o*n-a*e,d=d*h-o*e-a*n-l*r;return _(t,s,i),e=t[0],t[4]=u*(h=t[3])+d*e+c*(r=t[2])-f*(n=t[1]),t[5]=c*h+d*n+f*e-u*r,t[6]=f*h+d*r+u*n-c*e,t[7]=d*h-u*e-c*n-f*r,t},Ge=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=o*h+(d=s[7])*e+a*r-l*n,c=a*h+d*n+l*e-o*r,f=l*h+d*r+o*n-a*e,d=d*h-o*e-a*n-l*r;return I(t,s,i),e=t[0],t[4]=u*(h=t[3])+d*e+c*(r=t[2])-f*(n=t[1]),t[5]=c*h+d*n+f*e-u*r,t[6]=f*h+d*r+u*n-c*e,t[7]=d*h-u*e-c*n-f*r,t},Te=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=o*h+(d=s[7])*e+a*r-l*n,c=a*h+d*n+l*e-o*r,f=l*h+d*r+o*n-a*e,d=d*h-o*e-a*n-l*r;return C(t,s,i),e=t[0],t[4]=u*(h=t[3])+d*e+c*(r=t[2])-f*(n=t[1]),t[5]=c*h+d*n+f*e-u*r,t[6]=f*h+d*r+u*n-c*e,t[7]=d*h-u*e-c*n-f*r,t},_e=function(t,s,i){var e=i[0],n=i[1],r=i[2],i=i[3],h=s[0],o=s[1],a=s[2],l=s[3];return t[0]=h*i+l*e+o*r-a*n,t[1]=o*i+l*n+a*e-h*r,t[2]=a*i+l*r+h*n-o*e,t[3]=l*i-h*e-o*n-a*r,t[4]=(h=s[4])*i+(l=s[7])*e+(o=s[5])*r-(a=s[6])*n,t[5]=o*i+l*n+a*e-h*r,t[6]=a*i+l*r+h*n-o*e,t[7]=l*i-h*e-o*n-a*r,t},Ie=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3],h=i[0],o=i[1],a=i[2],l=i[3];return t[0]=e*l+s*h+n*a-r*o,t[1]=n*l+s*o+r*h-e*a,t[2]=r*l+s*a+e*o-n*h,t[3]=s*l-e*h-n*o-r*a,t[4]=e*(l=i[7])+s*(h=i[4])+n*(a=i[6])-r*(o=i[5]),t[5]=n*l+s*o+r*h-e*a,t[6]=r*l+s*a+e*o-n*h,t[7]=s*l-e*h-n*o-r*a,t},Ce=function(t,s,i,e){var n,r,h,o,a,l;return Math.abs(e)<Mn?D(t,s):(l=Math.hypot(i[0],i[1],i[2]),e*=.5,n=(h=Math.sin(e))*i[0]/l,r=h*i[1]/l,h=h*i[2]/l,i=Math.cos(e),l=s[0],t[0]=l*i+(e=s[3])*n+(o=s[1])*h-(a=s[2])*r,t[1]=o*i+e*r+a*n-l*h,t[2]=a*i+e*h+l*r-o*n,t[3]=e*i-l*n-o*r-a*h,t[4]=(e=s[4])*i+(l=s[7])*n+(o=s[5])*h-(a=s[6])*r,t[5]=o*i+l*r+a*n-e*h,t[6]=a*i+l*h+e*r-o*n,t[7]=l*i-e*n-o*r-a*h,t)},Ee=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},Pe=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],s=s[7],p=i[0],m=i[1],g=i[2],i=i[3];return t[0]=e*i+h*p+n*g-r*m,t[1]=n*i+h*m+r*p-e*g,t[2]=r*i+h*g+e*m-n*p,t[3]=h*i-e*p-n*m-r*g,t[4]=e*u+h*o+n*l-r*a+c*i+s*p+f*g-d*m,t[5]=n*u+h*a+r*o-e*l+f*i+s*m+d*p-c*g,t[6]=r*u+h*l+e*a-n*o+d*i+s*g+c*m-f*p,t[7]=h*u-e*o-n*a-r*l+s*i-c*p-f*m-d*g,t},Re=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},Ae=function(t,s,i,e){var n=1-e;return Yn(s,i)<0&&(e=-e),t[0]=s[0]*n+i[0]*e,t[1]=s[1]*n+i[1]*e,t[2]=s[2]*n+i[2]*e,t[3]=s[3]*n+i[3]*e,t[4]=s[4]*n+i[4]*e,t[5]=s[5]*n+i[5]*e,t[6]=s[6]*n+i[6]*e,t[7]=s[7]*n+i[7]*e,t},Fe=function(t,s){var i=Zn(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},De=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},Oe=function(t,s){var i,e,n,r,h,o,a,l,u=Zn(s);return 0<u&&(u=Math.sqrt(u),l=(i=s[0]/u)*(h=s[4])+(e=s[1]/u)*(o=s[5])+(n=s[2]/u)*(a=s[6])+(r=s[3]/u)*(s=s[7]),t[0]=i,t[1]=e,t[2]=n,t[3]=r,t[4]=(h-i*l)/u,t[5]=(o-e*l)/u,t[6]=(a-n*l)/u,t[7]=(s-r*l)/u),t},ke=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},Le=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Ne=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],t=t[7],l=s[0],u=s[1],c=s[2],f=s[3],d=s[4],p=s[5],m=s[6],s=s[7];return Math.abs(i-l)<=Mn*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(e-u)<=Mn*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(n-c)<=Mn*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-f)<=Mn*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(h-d)<=Mn*Math.max(1,Math.abs(h),Math.abs(d))&&Math.abs(o-p)<=Mn*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=Mn*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(t-s)<=Mn*Math.max(1,Math.abs(t),Math.abs(s))},O=function(){var t=new xn(2);return xn!=Float32Array&&(t[0]=0,t[1]=0),t},Be=function(t){var s=new xn(2);return s[0]=t[0],s[1]=t[1],s},We=function(t,s){var i=new xn(2);return i[0]=t,i[1]=s,i},je=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ve=function(t,s,i){return t[0]=s,t[1]=i,t},He=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},Ue=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},ze=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},Je=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},qe=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},$e=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},Xe=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},Ke=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Ye=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Ze=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},Qe=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},tn=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1])},sn=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},en=function(t){var s=t[0];return Math.hypot(s,t[1])},nn=function(t){var s=t[0];return s*s+(t=t[1])*t},rn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},hn=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},on=function(t,s){var i=s[0],e=s[1];return 0<(i=i*i+e*e)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t},an=function(t,s){return t[0]*s[0]+t[1]*s[1]},ln=function(t,s,i){return s=s[0]*i[1]-s[1]*i[0],t[0]=t[1]=0,t[2]=s,t},un=function(t,s,i,e){var n=s[0],s=s[1];return t[0]=n+e*(i[0]-n),t[1]=s+e*(i[1]-s),t},cn=function(t,s){s=s||1;var i=2*On()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},fn=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s,t[1]=i[1]*e+i[3]*s,t},dn=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s+i[4],t[1]=i[1]*e+i[3]*s+i[5],t},pn=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[3]*s+i[6],t[1]=i[1]*e+i[4]*s+i[7],t},mn=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[4]*s+i[12],t[1]=i[1]*e+i[5]*s+i[13],t},gn=function(t,s,i,e){var n=s[0]-i[0],s=s[1]-i[1],r=Math.sin(e),e=Math.cos(e);return t[0]=n*e-s*r+i[0],t[1]=n*r+s*e+i[1],t},yn=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1],n=Math.sqrt((i*i+t*t)*(e*e+s*s));return Math.acos(Math.min(Math.max(n&&(i*e+t*s)/n,-1),1))},wn=function(t){return t[0]=0,t[1]=0,t},Sn=function(t){return"vec2("+t[0]+", "+t[1]+")"},bn=function(t,s){return t[0]===s[0]&&t[1]===s[1]},vn=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1];return Math.abs(i-e)<=Mn*Math.max(1,Math.abs(i),Math.abs(e))&&Math.abs(t-s)<=Mn*Math.max(1,Math.abs(t),Math.abs(s))};n,p,f,a,d,l,m,g,y,w,S,b,x,G,T,_,I,C,E,P,R,A,F,D,O,Mn=1e-6,xn="undefined"!=typeof Float32Array?Float32Array:Array,On=Math.random,kn="zyx",Ln=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),Nn={__proto__:null,EPSILON:Mn,get m(){return xn},S:On,M:kn,G:k,T:L,equals:N},Bn=Object.freeze({__proto__:null,create:B,clone:W,_:j,identity:V,I:H,set:U,C:z,P:J,R:q,A:$,multiply:t,rotate:X,scale:K,F:Y,D:Z,O:Q,L:tt,N:st,add:it,B:s,W:et,equals:nt,j:rt,V:ht,mul:t,sub:s}),Wn=Object.freeze({__proto__:null,create:ot,clone:at,_:lt,identity:ut,I:ct,set:ft,P:dt,A:pt,multiply:i,rotate:mt,scale:gt,translate:yt,F:wt,D:St,H:bt,O:vt,L:Mt,add:xt,B:e,j:Gt,V:Tt,W:_t,equals:It,mul:i,sub:e}),jn=Object.freeze({__proto__:null,create:n,U:Ct,clone:Et,_:Pt,I:Rt,set:At,identity:Ft,C:Dt,P:Ot,R:kt,A:Lt,multiply:r,translate:Nt,rotate:Bt,scale:Wt,H:jt,F:Vt,D:Ht,J:Ut,$:zt,X:Jt,K:qt,O:$t,L:Xt,add:Kt,B:h,j:Yt,V:Zt,W:Qt,equals:ts,mul:r,sub:h}),Gn=Object.freeze({__proto__:null,create:ss,clone:is,_:es,I:ns,set:rs,identity:p,C:hs,P:os,R:as,A:ls,multiply:o,translate:us,scale:cs,rotate:fs,Y:ds,Z:ps,tt:ms,H:gs,D:ys,F:ws,it:Ss,et:bs,nt:vs,ht:f,ot:Ms,lt:a,ut:d,ct:l,ft:xs,dt:Gs,gt:Ts,$:_s,yt:Is,St:u,perspective:u,bt:Cs,vt:Es,Mt:c,ortho:c,xt:Ps,Gt:Rs,Tt:As,O:Fs,L:Ds,add:Os,B:ks,j:Ls,V:Ns,W:Bs,equals:Ws,mul:o,sub:ks}),Kn=Js,Qn=qs,Un=$s,tr=ii,sr=ei,Vn=Vs,ir=ni,Dn=m(),Tn=Object.freeze({__proto__:null,create:m,clone:js,length:Vs,I:g,_:Hs,set:Us,add:zs,B:Js,multiply:qs,_t:$s,ceil:Xs,floor:Ks,min:Ys,max:Zs,round:Qs,scale:ti,It:si,Ct:ii,Et:ei,Pt:ni,Rt:ri,inverse:hi,normalize:y,At:w,Ft:S,Dt:oi,Ot:ai,kt:li,Lt:ui,random:ci,Nt:fi,Bt:di,Wt:pi,Y:mi,Z:gi,tt:yi,angle:wi,jt:Si,O:bi,W:vi,equals:Mi,sub:Kn,mul:Qn,div:Un,Vt:tr,Ht:sr,Ut:Vn,zt:ir,forEach:function(t,s,i,e,n,r){var h,o;for(s=s||3,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,h=i;h<o;h+=s)Dn[0]=t[h],Dn[1]=t[h+1],Dn[2]=t[h+2],n(Dn,Dn,r),t[h]=Dn[0],t[h+1]=Dn[1],t[h+2]=Dn[2];return t}}),Kn=Ci,Qn=Ei,Un=Pi,tr=Ni,sr=Bi,ir=v,er=M,Fn=b(),Hn=Object.freeze({__proto__:null,create:b,clone:xi,I:Gi,_:Ti,set:_i,add:Ii,B:Ci,multiply:Ei,_t:Pi,ceil:Ri,floor:Ai,min:Fi,max:Di,round:Oi,scale:ki,It:Li,Ct:Ni,Et:Bi,length:v,Pt:M,Rt:Wi,inverse:ji,normalize:Vi,At:x,Ft:Hi,Dt:Ui,random:zi,Nt:Ji,Wt:qi,jt:$i,O:Xi,W:Ki,equals:Yi,sub:Kn,mul:Qn,div:Un,Vt:tr,Ht:sr,Ut:ir,zt:er,forEach:function(t,s,i,e,n,r){var h,o;for(s=s||4,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,h=i;h<o;h+=s)Fn[0]=t[h],Fn[1]=t[h+1],Fn[2]=t[h+2],Fn[3]=t[h+3],n(Fn,Fn,r),t[h]=Fn[0],t[h+1]=Fn[1],t[h+2]=Fn[2],t[h+3]=Fn[3];return t}}),Kn=xi,Qn=Gi,Un=Ti,tr=_i,sr=Ii,ir=se,zn=ki,Jn=x,er=Ui,nr=qn=v,rr=$n=M,Xn=Vi,hr=Ki,Pn=m(),Rn=g(1,0,0),An=g(0,1,0),or=function(t,s,i){var e=w(s,i);return e<-.999999?(S(Pn,Rn,s),Vn(Pn)<1e-6&&S(Pn,An,s),y(Pn,Pn),T(t,Pn,Math.PI),t):.999999<e?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(S(Pn,s,i),t[0]=Pn[0],t[1]=Pn[1],t[2]=Pn[2],t[3]=1+e,Xn(t,t))},Cn=G(),En=G(),ar=function(t,s,i,e,n,r){return R(Cn,s,n,r),R(En,i,e,r),R(t,Cn,En,2*r*(1-r)),t},In=n(),Kn=Object.freeze({__proto__:null,create:G,identity:Zi,Jt:T,qt:Qi,$t:te,multiply:se,Y:_,Z:I,tt:C,Xt:ie,exp:E,Kt:P,pow:ee,Ot:R,random:ne,P:re,Yt:he,Zt:A,Qt:oe,O:ae,clone:Kn,I:Qn,_:Un,set:tr,add:sr,mul:ir,scale:zn,At:Jn,Dt:er,length:qn,Ut:nr,Pt:$n,zt:rr,normalize:Xn,W:hr,equals:le,ts:or,ss:ar,es:function(t,s,i,e){return In[0]=i[0],In[3]=i[1],In[6]=i[2],In[1]=e[0],In[4]=e[1],In[7]=e[2],In[2]=-s[0],In[5]=-s[1],In[8]=-s[2],Xn(t,A(t,In))}}),Yn=Jn,Qn=Zn=$n,tr=Object.freeze({__proto__:null,create:ue,clone:ce,I:fe,ns:de,ht:F,H:pe,F:me,U:ge,_:D,identity:ye,set:we,rs:Un,hs:Se,os:Un,ls:be,lt:ve,translate:Me,Y:xe,Z:Ge,tt:Te,us:_e,cs:Ie,ds:Ce,add:Ee,multiply:Pe,mul:Pe,scale:Re,At:Yn,Dt:Ae,P:Fe,Yt:De,length:qn,Ut:qn,Pt:Zn,zt:Qn,normalize:Oe,O:ke,W:Le,equals:Ne}),sr=en,ir=Ue,er=ze,nr=Je,rr=tn,hr=sn,or=nn,_n=O(),ar=Object.freeze({__proto__:null,create:O,clone:Be,I:We,_:je,set:Ve,add:He,B:Ue,multiply:ze,_t:Je,ceil:qe,floor:$e,min:Xe,max:Ke,round:Ye,scale:Ze,It:Qe,Ct:tn,Et:sn,length:en,Pt:nn,Rt:rn,inverse:hn,normalize:on,At:an,Ft:ln,Dt:un,random:cn,gs:fn,ys:dn,Bt:pn,Nt:mn,rotate:gn,angle:yn,jt:wn,O:Sn,W:bn,equals:vn,Ut:sr,sub:ir,mul:er,div:nr,Vt:rr,Ht:hr,zt:or,forEach:function(t,s,i,e,n,r){var h,o;for(s=s||2,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,h=i;h<o;h+=s)_n[0]=t[h],_n[1]=t[h+1],n(_n,_n,r),t[h]=_n[0],t[h+1]=_n[1];return t}}),globalThis.ws=Nn,globalThis.ws.Ss=Bn,globalThis.ws.bs=Wn,globalThis.ws.vs=jn,globalThis.ws.Ms=Gn,globalThis.ws.xs=Kn,globalThis.ws.Gs=tr,globalThis.ws.Ts=ar,globalThis.ws._s=Tn,globalThis.ws.Is=Hn}var _n,In,Cn,En,Pn,Rn,An,Fn,Dn,Mn,xn,On,kn,Ln,Nn,Bn,Wn,jn,Gn,Vn,Tn,Hn,Un,zn,Jn,qn,$n,Xn,Kn,Yn,Zn,Qn,tr,sr,ir,er,nr,rr,hr,or,ar,D,O,k,L;{let a=function(t,s,i){var e=[0,0],n=t[1][1]-t[0][1],r=t[0][0]-t[1][0],t=n*t[0][0]+r*t[0][1],h=s[1][1]-s[0][1],o=s[0][0]-s[1][0],s=h*s[0][0]+o*s[0][1],a=n*o-h*r;return m(a,0,i=i||0)||(e[0]=(o*t-r*s)/a,e[1]=(n*s-h*t)/a),e},n=function(t,s,i,e){var n,r=s[0]-t[0],s=s[1]-t[1],h=e[0]-i[0];return h*s-(e=e[1]-i[1])*r!=0&&(n=(h*(t[1]-i[1])+e*(i[0]-t[0]))/(e*r-h*s),0<=(t=(r*(i[1]-t[1])+s*(t[0]-i[0]))/(h*s-e*r)))&&t<=1&&0<=n&&n<=1},o=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},x=function(t,s,i){return 0<o(t,s,i)},G=function(t,s,i){return 0<=o(t,s,i)},T=function(t,s,i){return o(t,s,i)<0},_=function(t,s,i){return o(t,s,i)<=0},r=function(t,s,i,e){var n,r,h;return e?(h=O,(r=D)[0]=s[0]-t[0],r[1]=s[1]-t[1],h[0]=i[0]-s[0],h[1]=i[1]-s[1],n=r[0]*h[0]+r[1]*h[1],r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),h=Math.sqrt(h[0]*h[0]+h[1]*h[1]),Math.acos(n/(r*h))<e):0===o(t,s,i)},I=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},C=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},h=function(t){t.length=0},E=function(t,s,i,e){for(var n=i;n<e;n++)t.push(s[n])},t=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!x(C(t,s-1),C(t,s),C(t,s+1))&&(l(t),!0)},l=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},P=function(t,s){return T(C(t,s-1),C(t,s),C(t,s+1))},u=function(t,s,i){var e,n=k,r=L;if(G(C(t,s+1),C(t,s),C(t,i))&&_(C(t,s-1),C(t,s),C(t,i)))return!1;for(var h=I(C(t,s),C(t,i)),o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&G(C(t,s),C(t,i),C(t,o+1))&&_(C(t,s),C(t,i),C(t,o))&&(n[0]=C(t,s),n[1]=C(t,i),r[0]=C(t,o),r[1]=C(t,o+1),e=a(n,r),I(C(t,s),e)<h))return!1;return!0},R=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&n(C(t,s),C(t,i),C(t,e),C(t,e+1)))return!1;return!0},c=function(t,s,i,e){var n=e||[];if(h(n),s<i)for(var r=s;r<=i;r++)n.push(t[r]);else{for(r=0;r<=i;r++)n.push(t[r]);for(r=s;r<t.length;r++)n.push(t[r])}return n},f=function(t){for(var s=[],i=[],e=[],n=Number.MAX_VALUE,r=0;r<t.length;++r)if(P(t,r))for(var h=0;h<t.length;++h)if(u(t,r,h)){for(var i=f(c(t,r,h,e)),o=f(c(t,h,r,e)),a=0;a<o.length;a++)i.push(o[a]);i.length<n&&(n=(s=i).length,s.push([C(t,r),C(t,h)]))}return s},s=function(t){var s=f(t);return 0<s.length?d(t,s):[t]},d=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var n=s[e],r=0;r<i.length;r++){var h=d(i[r],n);if(h){i.splice(r,1),i.push(h[0],h[1]);break}}return i}return e=t.indexOf((n=s)[0]),r=t.indexOf(n[1]),-1!==e&&-1!==r&&[c(t,e,r),c(t,r,e)]},i=function(t){for(var s=t,i=0;i<s.length-1;i++)for(var e=0;e<i-1;e++)if(n(s[i],s[i+1],s[e],s[e+1]))return!1;for(i=1;i<s.length-2;i++)if(n(s[0],s[s.length-1],s[i],s[i+1]))return!1;return!0},A=function(t,s,i,e,n){var r=s[1]-t[1],s=t[0]-s[0],t=r*t[0]+s*t[1],h=e[1]-i[1],e=i[0]-e[0],i=h*i[0]+e*i[1],o=r*e-h*s;return m(o,0,n=n||0)?[0,0]:[(e*t-s*i)/o,(r*i-h*t)/o]},F=function(t,s,i,e,n,r,h){r=r||100,h=h||0,n=n||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],w=[],S=t,b=t;if(!(b.length<3))if(r<++h)console.warn("quickDecomp: max level ("+r+") reached.");else{for(var v=0;v<t.length;++v)if(P(S,v)){i.push(S[v]);for(var u=c=Number.MAX_VALUE,M=0;M<t.length;++M)x(C(S,v-1),C(S,v),C(S,M))&&_(C(S,v-1),C(S,v),C(S,M-1))&&(l=A(C(S,v-1),C(S,v),C(S,M),C(S,M-1)),T(C(S,v+1),C(S,v),l))&&(f=I(S[v],l))<c&&(c=f,a=l,m=M),x(C(S,v+1),C(S,v),C(S,M+1))&&_(C(S,v+1),C(S,v),C(S,M))&&(l=A(C(S,v+1),C(S,v),C(S,M),C(S,M+1)),x(C(S,v-1),C(S,v),l))&&(f=I(S[v],l))<u&&(u=f,o=l,p=M);if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),v<p?(E(y,S,v,p+1),y.push(l),w.push(l),0!==m&&E(w,S,m,S.length),E(w,S,0,v+1)):(0!==v&&E(y,S,v,S.length),E(y,S,0,p+1),y.push(l),w.push(l),E(w,S,m,v+1));else{if(p<m&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(M=m;M<=p;++M)G(C(S,v-1),C(S,v),C(S,M))&&_(C(S,v+1),C(S,v),C(S,M))&&(f=I(C(S,v),C(S,M)))<d&&R(S,v,M)&&(d=f,g=M%t.length);v<g?(E(y,S,v,g+1),0!==g&&E(w,S,g,b.length),E(w,S,0,v+1)):(0!==v&&E(y,S,v,b.length),E(y,S,0,g+1),E(w,S,g,v+1))}return y.length<w.length?(F(y,s,i,e,n,r,h),F(w,s,i,e,n,r,h)):(F(w,s,i,e,n,r,h),F(y,s,i,e,n,r,h)),s}s.push(t)}return s},e=function(t,s){for(var i=0,e=t.length-1;3<t.length&&0<=e;--e)r(C(t,e-1),C(t,e),C(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},p=function(t,s){for(var i=t.length-1;1<=i;--i)for(var e=t[i],n=i-1;0<=n;--n)g(e,t[n],s)&&t.splice(i,1)},m=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},g=function(t,s,i){return m(t[0],s[0],i)&&m(t[1],s[1],i)};a,n,o,x,G,T,_,r,I,C,h,E,l,P,u,R,c,f,d,A,F,m,g,D=[],O=[],k=[],L=[],self.Cs={Es:s,Ps:F,Rs:i,As:e,Fs:p,Ds:t}}{let t=!1,s=!1,i="dev",e=Symbol("Construct internal API token"),n=14,r=self.Os=class{constructor(){throw TypeError("static class can't be instantiated")}static ks(){if(n<=0)throw new Error("cannot obtain internal API token");return--n,e}static Ls(){t=!0}static Ns(){return t}static Bs(){s=!0}static Ws(){return s}static js(t){i=t}static Vs(){return i}static Hs(){return"final"===i}};r.isDebug=!1,r.Us=!1,r.hardwareConcurrency=navigator.hardwareConcurrency||2,self.zs={}}{const s=self.Os;s.Js=class{constructor(t){this.qs=t,this.$s=new Map,this.Xs()}Xs(){let t=this.qs,s=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const i of s)this.Ks(i)}Ks(t){if(t)if(t.includes("=")){const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.$s.set(i,e)}else this.$s.set(t,null)}Ys(){for(const t of this.$s)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}Zs(t){return this.$s.has(t)}Qs(t){const s=this.$s.get(t);return void 0===s?null:s}si(){history.replaceState("",document.title,location.pathname+location.search)}ii(t){this.qs=t,this.$s.clear(),this.Xs()}},s.ei=new s.Js(location.search),s.ni=new s.Js(location.hash),s.ei.Zs("perf")&&(s.ri=!0),"dev"!==s.ei.Qs("mode")&&s.js("final")}{let e=function(t){const s=parseFloat(t),i=j.get(s);return i||(13<=s?"11":"NT "+t)};e;const a=self.Os,W="(unknown)",j=(a.hi={oi:W,ai:W,li:W,ci:W,fi:NaN,di:W,mi:"browser",gi:!0,yi:!1,wi:!1,Si:!1,bi:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),V=navigator.userAgent,H=navigator.userAgentData;if(H&&0<H.brands.length){let s=function(t){let s="",i="",e="",n="";for(const r of t){const h=U.get(r.brand),o=(!s&&h&&(s=h,i=r.version),z.get(r.brand));!e&&o&&(e=o,n=r.version)}s||"Chromium"!==e||(a.hi.li="Chromium",a.hi.ci=n),a.hi.li=s||W,a.hi.ci=i||W,a.hi.di=e||W};s,a.hi.oi=H.platform,a.hi.yi=H.mobile,a.hi.gi=!a.hi.yi;const U=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),z=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);s(H.brands);let i=!1;a.hi.bi=async()=>{if(!i)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);s(t.fullVersionList),"Windows"===a.hi.oi?a.hi.ai=e(t.platformVersion):a.hi.ai=t.platformVersion,i=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let t=function(t,s){const i=Array.isArray(t)?t:[t];for(const e of i){const n=e.exec(V);if(n){s(n);break}}};t(/windows\s+nt\s+([\d\.]+)/i,t=>{a.hi.oi="Windows";const s=t[1];a.hi.ai=e(s)}),t(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{a.hi.oi="macOS",a.hi.ai=t[1].replace(/_/g,".")}),t(/CrOS/,()=>{a.hi.oi="Chrome OS"}),t(/linux|openbsd|freebsd|netbsd/i,()=>{a.hi.oi="Linux"}),t(/android/i,()=>{a.hi.oi="Android"}),t(/android\s+([\d\.]+)/i,t=>{a.hi.oi="Android",a.hi.ai=t[1]}),a.hi.oi===W&&(t(/(iphone|ipod|ipad)/i,t=>{a.hi.oi="iOS"}),t([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{a.hi.oi="iOS",a.hi.ai=t[1].replace(/_/g,".")}));const J=/chrome\//i.test(V),q=/chromium\//i.test(V),$=/edg\//i.test(V),X=/OPR\//.test(V),K=/nwjs/i.test(V),Y=/safari\//i.test(V),Z=/webkit/i.test(V),Q=($||X||t(/chrome\/([\d\.]+)/i,t=>{a.hi.li="Chrome",a.hi.ci=t[1],a.hi.di="Chromium"}),t(/edg\/([\d\.]+)/i,t=>{a.hi.li="Edge",a.hi.ci=t[1],a.hi.di="Chromium"}),t(/OPR\/([\d\.]+)/,t=>{a.hi.li="Opera",a.hi.ci=t[1],a.hi.di="Chromium"}),t(/chromium\/([\d\.]+)/i,t=>{a.hi.li="Chromium",a.hi.ci=t[1],a.hi.di="Chromium"}),t(/nwjs\/[0-9.]+/i,t=>{a.hi.li="NW.js",a.hi.ci=t[1],a.hi.di="Chromium",a.hi.mi="nwjs"}),t(/firefox\/([\d\.]+)/i,t=>{a.hi.li="Firefox",a.hi.ci=t[1],a.hi.di="Gecko"}),!Y||J||q||$||X||K||(a.hi.li="Safari",a.hi.di="WebKit",t(/version\/([\d\.]+)/i,t=>{a.hi.ci=t[1]}),t(/crios\/([\d\.]+)/i,t=>{a.hi.li="Chrome for iOS",a.hi.ci=t[1]}),t(/fxios\/([\d\.]+)/i,t=>{a.hi.li="Firefox for iOS",a.hi.ci=t[1]}),t(/edgios\/([\d\.]+)/i,t=>{a.hi.li="Edge for iOS",a.hi.ci=t[1]})),a.hi.di===W&&Z&&(a.hi.di="WebKit"),"Android"===a.hi.oi&&"Safari"===a.hi.li&&(a.hi.li="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),tt=Q.has(a.hi.oi)||"nwjs"===a.hi.mi;a.hi.gi=tt,a.hi.yi=!tt}"Chrome"===a.hi.li&&"browser"===a.hi.mi&&/wv\)/.test(V)&&(a.hi.mi="webview"),"nwjs"!==a.hi.mi&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(a.hi.mi="webapp"),a.hi.fi=parseFloat(a.hi.ci);const i="macOS"===a.hi.oi&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;i&&(a.hi.oi="iOS",a.hi.ai=a.hi.ci,a.hi.gi=!1,a.hi.yi=!0,a.hi.Si=!0),a.hi.wi="macOS"===a.hi.oi||"iOS"===a.hi.oi}{let h=function(i){return new Promise((t,s)=>{i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})},o=function(i){return new Promise((t,s)=>{i.oncomplete=()=>t(),i.onerror=()=>s(i.error),i.onabort=()=>s(i.error)})},t=function(t,s){return N(t,s)},s=function(t,s){return N(t,s,!0)},a=function(s){e(s);let t=et.get(s);return t instanceof Promise||(t=(async i=>{e(i);const t=indexedDB.open(i,st);return t.addEventListener("upgradeneeded",t=>{try{const s=t.target.result;s.createObjectStore(it)}catch(t){console.error("Failed to create objectstore for database "+i,t)}}),h(t)})(s),et.set(s,t),t.catch(t=>et.delete(s))),t},e=function(t){if("string"!=typeof t)throw new TypeError("expected string")},r=function(t,n){const s=t.objectStore(it).openCursor();return new Promise(i=>{const e=[];s.onsuccess=t=>{const s=t.target.result;if(s){switch(n){case"entries":e.push([s.key,s.value]);break;case"keys":e.push(s.key);break;case"values":e.push(s.value)}s.continue()}else i(e)}})};h,o,t,s,a,e,r;const st=2,it="keyvaluepairs",et=new Map,nt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,rt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function N(s,i,e=!1,n=!0){const t=await a(s);try{const r=t.transaction([it],e?"readwrite":"readonly");return i(r)}catch(t){if(n&&"InvalidStateError"===t.name)return et.delete(s),N(s,i,e,!1);throw t}}class ht{constructor(t){e(t),this.name=t}async ready(){await a(this.name)}set(n,r){return e(n),s(this.name,async t=>{const s=t.objectStore(it).put(r,n),i=h(s),e=o(t);await Promise.all([e,i])})}get(r){return e(r),t(this.name,async t=>{const s=t.objectStore(it).get(r),i=h(s),e=o(t),[,n]=await Promise.all([e,i]);return n})}delete(n){return e(n),s(this.name,async t=>{const s=t.objectStore(it).delete(n),i=h(s),e=o(t);await Promise.all([e,i])})}clear(){return s(this.name,async t=>{const s=t.objectStore(it).clear(),i=h(s),e=o(t);await Promise.all([e,i])})}keys(){return t(this.name,async t=>{let s;if(rt){const n=t.objectStore(it).getAllKeys();s=h(n)}else s=r(t,"keys");const i=o(t),[,e]=await Promise.all([i,s]);return e})}values(){return t(this.name,async t=>{let s;if(nt){const n=t.objectStore(it).getAll();s=h(n)}else s=r(t,"values");const i=o(t),[,e]=await Promise.all([i,s]);return e})}entries(){return t(this.name,async t=>{const s=r(t,"entries"),i=o(t),[,e]=await Promise.all([i,s]);return e})}}self.vi=ht}{let i=function(t){throw new Error(`"${t}" is not implemented`)},e=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},n=function(e){return"object"==typeof e?new Promise(s=>{const{port1:t,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),t.postMessage(e)}):Promise.resolve(e)};i,e,n;const ot=self.vi,at=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];new WeakMap;class lt{constructor(t){this.Mi=t,this.xi=!this.Mi,this.xi||"undefined"!=typeof indexedDB||(this.xi=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.Gi=new Map}Ti(t){if(!this.xi)for(const s of at)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.xi=!0;break}}async _i(t){const s=this.Gi.get(t),i=await n(s);return void 0===i?null:i}async Ii(t,s){s=await n(s),this.Gi.set(t,s)}Ci(t){this.Gi.delete(t)}Ei(){this.Gi.clear()}Pi(){return Array.from(this.Gi.keys())}Ri(){return this.xi}Ai(){return this.Gi}Fi(t){this.Gi=t}async getItem(s,t){if(e(t),this.xi)return this._i(s);let i;try{i=await this.Mi.get(s)}catch(t){return this.Ti(t),this.xi?this._i(s):(console.error(`Error reading '${s}' from storage, returning null: `,t),null)}return void 0===i?null:i}async setItem(s,i,t){if(e(t),void 0===i&&(i=null),this.xi)await this.Ii(s,i);else try{await this.Mi.set(s,i)}catch(t){if(this.Ti(t),!this.xi)throw t;await this.Ii(s,i)}}async removeItem(s,t){if(e(t),this.xi)this.Ci(s);else try{await this.Mi.delete(s)}catch(t){this.Ti(t),this.xi?this.Ci(s):console.error(`Error removing '${s}' from storage: `,t)}}async clear(t){if(e(t),this.xi)this.Ei();else try{await this.Mi.clear()}catch(t){this.Ti(t),this.xi?this.Ei():console.error("Error clearing storage: ",t)}}async keys(t){if(e(t),this.xi)return this.Pi();let s=[];try{s=await this.Mi.keys()}catch(t){if(this.Ti(t),this.xi)return this.Pi();console.error("Error getting storage keys: ",t)}return s}ready(t){return e(t),this.xi?Promise.resolve(!0):this.Mi.ready()}Di(t){if(t.forceInMemoryFallback)return new lt(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new ot(s);return new lt(i)}}length(t){i("localforage.length()")}key(t,s){i("localforage.key()")}iterate(t,s){i("localforage.iterate()")}Oi(t){i("localforage.setDriver()")}config(t){i("localforage.config()")}ki(t){i("localforage.defineDriver()")}Li(){i("localforage.driver()")}supports(t){i("localforage.supports()")}dropInstance(){i("localforage.dropInstance()")}}self.localforage=new lt(new ot("localforage"))}{const e=self.Os;if(e.Ni={},e.Ni.Bi=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const s=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==s.reverse}catch(t){return!1}})(),e.Ni.Wi="undefined"!=typeof HTMLDialogElement,e.Ni.ji=!!self.requestIdleCallback,e.Ni.ImageBitmap=!!self.createImageBitmap,e.Ni.ImageBitmapOptions=!1,e.Ni.Vi=!1,e.Ni.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{e.Ni.ImageBitmapOptions=!0}).catch(()=>{e.Ni.ImageBitmapOptions=!1})}catch(t){e.Ni.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{e.Ni.Vi=10===t.width&&10===t.height}).catch(()=>{e.Ni.Vi=!1})}catch(t){e.Ni.Vi=!1}}if(e.Ni.Hi=!(!navigator.clipboard||!navigator.clipboard.readText),e.Ni.Ui=!(!navigator.permissions||!navigator.permissions.query),e.Ni.Ji=!1,e.Ni.Ui){const ut={name:"clipboard-read"};navigator.permissions.query(ut).then(()=>{e.Ni.Ji=!0}).catch(()=>{e.Ni.Ji=!1})}e.Ni.$i=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),e.Ni.Xi="undefined"!=typeof Proxy,e.Ni.Ki=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),e.Ni.Yi="function"==typeof fetch,e.Ni.Zi=!!(self.isSecureContext&&"Opera"!==e.hi.li&&navigator.storage&&navigator.storage.persist),e.Ni.Qi=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),e.Ni.te=(()=>{if("undefined"==typeof document)return!1;if("iOS"===e.hi.oi)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),e.Ni.ImageDecoder=void 0!==self.ImageDecoder,e.Ni.ie=!!self.VideoEncoder,e.Ni.ne=!!self.showOpenFilePicker,e.Ni.re=!!self.queryLocalFonts,e.Ni.UserActivation=!!navigator.userActivation,e.Ni.he=!1,(async()=>{let s;"undefined"==typeof document?s=new OffscreenCanvas(32,32):((s=document.createElement("canvas")).width=32,s.height=32);const t=s.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let i=null;try{s.convertToBlob?i=await s.convertToBlob({type:"image/webp",quality:1}):s.toBlob&&(i=await new Promise(t=>s.toBlob(t,"image/webp",1))),e.Ni.he=i&&"image/webp"===i.type}catch(t){e.Ni.he=!1}})()}{let e=function(t,i){return t.reduce((t,s)=>(0<i&&Array.isArray(s)?Array.prototype.push.apply(t,e(s,i-1)):t.push(s),t),[])};e;const ct=self.Os;if(!String.prototype.trimStart){const ft=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(ft,"")}}if(!String.prototype.trimEnd){const dt=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(dt,"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(ct.oe(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),Array.prototype.flat||(Array.prototype.flat=function(t=1){return e(this,t)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((i,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,s)=>i({usage:t,quota:s}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let i=function(t){let s=pt.ae(),i="Assertion failure: "+t+"\n\nStack trace:\n"+s;console.error(i)};i;const pt=self.Os;self.assert=function(t,s){t||i(s)}}{const n=self.Os,mt=self.zs,gt=(n.le=function(t){return"number"==typeof t},n.ue=function(t){return n.le(t)&&isFinite(t)},n.fe=function(t){if(!n.le(t))throw new TypeError("expected number")},n.de=function(t){n.pe(t)},n.me=function(t,s,i){if(!n.le(t)||isNaN(t)||t<s||i<t)throw new RangeError("number outside of range")},n.ge=function(...s){for(let t of s);},n.ye=function(t){if(!n.ue(t))throw new TypeError("expected finite number")},n.we=function(t){n.pe(t)},n.Se=function(...s){for(let t of s);},n.ve=function(t){return"string"==typeof t},n.Me=function(t){if(!n.ve(t))throw new TypeError("expected string")},n.xe=function(t){n.pe(t)},n.Ge=function(...s){for(let t of s);},n.Te=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},n._e=function(t){if(!n.Te(t))throw new TypeError("expected simple object")},n.Ie=function(t){if(!n.pe(t)&&!n.Te(t))throw new TypeError("expected simple object")},n.Ce=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},n.Ee=function(t){if(!n.Ce(t))throw new TypeError("expected object")},n.Pe=function(t){n.pe(t)},n.Re=function(...s){for(let t of s);},n.Ae=function(t){return n.Fe(t,Blob)&&"string"==typeof t.name},n.De=function(t){if(!n.Ae(t))throw new TypeError("expected file")},n.Oe=function(t){n.pe(t)},n.ke=function(t){return Array.isArray(t)},n.Le=function(t){if(!n.ke(t))throw new TypeError("expected array")},n.Ne=function(t){n.pe(t)},n.Be=function(...s){for(let t of s);},n.We=function(t){return!(!n.ke(t)||t.length&&!n.ke(t[0]))},n.je=function(s){if(!n.We(s))throw new TypeError("expected 2d array");for(let t of s)if(!n.ke(t))throw new TypeError("expected 2d array")},n.Ve=function(t){n.pe(t)},n.He=function(t){return"function"==typeof t},n.Ue=function(t,s){if(!n.He(t))throw new TypeError("expected function");if(!n.pe(s)&&t!==s)throw new TypeError("expected same function reference")},n.Je=function(t){n.pe(t)},n.qe=function(...s){for(let t of s);},n.$e=function(s,...i){if(!n.He(s))throw new TypeError("expected function");if(!i.length)throw new Error("missing comparison functions");for(let t of i)if(!n.pe(t)&&s===t)return;throw new TypeError("expected same function reference")},n.Xe=function(...s){if(!n.pe(s))for(let t of s);},n.Ke=function(t,s){return t instanceof s},n.Ye=function(s,...i){for(let t of i)if(n.Ke(s,t))return!0;return!1},n.Ze=function(t,s){if(!n.Ke(t,s))throw new TypeError("unexpected type")},n.Qe=function(t,s){n.pe(t)},n.tn=function(t,...s){for(let t of s);},n.sn=function(t,...s){if(!n.Ye(t,...s))throw new TypeError("unexpected type")},n.nn=function(t,...s){if(!n.pe(t)&&!n.Ye(t,...s))throw new TypeError("unexpected type")},n.rn=function(s,i){for(let t of s)if(!n.Ke(t,i))return!1;return!0},n.hn=function(s){for(let t of s)if(!n.ue(t))return!1;return!0},n.an=function(s,t){for(let t of s);},n.ln=function(s,t){if(!n.pe(s))for(let t of s);},n.un=function(s,t){if(!n.pe(s))for(let t of s);},n.cn=function(s){for(let t of s);},n.dn=function(s){if(!n.pe(s))for(let t of s);},n.pn=function(t,s){return!(n.pe(t)||!n.ve(t.nodeName))&&(!s||n.mn(t.nodeName,s))},n.gn=function(t,s){if(n.pe(t)||!n.ve(t.nodeName))throw new TypeError("expected DOM node");if(s&&!n.mn(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},n.yn=function(t,s){n.pe(t)},n.wn=function(t,s){return!(n.pe(t)||!n.ve(t.tagName))&&(!s||n.mn(t.tagName,s))},n.Sn=function(t,s){if(n.pe(t)||!n.ve(t.tagName))throw new TypeError("expected HTML element");if(s&&!n.mn(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},n.bn=function(t,s){n.pe(t)},n.vn=function(t){return n.wn(t,"img")||n.wn(t,"canvas")||n.wn(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},n.Mn=function(t){if(!n.vn(t))throw new TypeError("expected drawable")},n.xn=function(t){n.pe(t)},n.Gn=function(t){return t instanceof ImageData||n.vn(t)},n.Tn=function(t){if(!n.Gn(t))throw new TypeError("expected drawable or image data")},n._n=function(t){if(!n.pe(t)&&!n.Gn(t))throw new TypeError("expected drawable or image data")},n.In=function(t){return"string"==typeof t||n.HtmlString&&t instanceof n.HtmlString||t instanceof n.Cn},n.En=function(t){if(!n.In(t))throw new TypeError("expected string-like")},n.Pn=function(t){n.pe(t)},n.Rn=function(...s){for(let t of s);},n.An=function(){throw new Error("must be overridden")},n.Fn=function(){throw new Error("not yet implemented")},n.Dn=function(t){return t.constructor===function*(){}.constructor},n.On=function(t){if(!n.Dn(t))throw new Error("expected generator function")},n.kn=function(t){return"function"===t[Symbol.iterator]},n.Ln=function(t){if(!n.kn(t))throw new Error("expected iterable")},n.Nn=function(t){return!n.pe(t)},n.pe=function(t){return null==t},n.Bn=function(s){let i=s[0].constructor;for(let t of s)if(t.constructor!==i)return!1;return i},n.Wn=function(s,i){for(let t of s)if(!(t instanceof i))return!1;return!0},Object.getPrototypeOf(Uint8Array));n.jn=function(t){return n.Ke(t,gt)},n.Vn=function(t){},n.Hn=function(t){n.Un(t,gt)},n.zn=function(t,...s){if(!n.Jn(t,...s))throw new TypeError("unexpected type")},n.Jn=function(t,...s){for(const i of s)if(n.Fe(t,i))return!0;return!1},n.Un=function(t,s){if(!n.Fe(t,s))throw new TypeError("unexpected type")},n.Fe=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},mt.fe=n.fe,mt.de=n.de,mt.ye=n.ye,mt.we=n.we,mt.Me=n.Me,mt.xe=n.xe,mt.Ee=n.Ee,mt.Pe=n.Pe,mt.Le=n.Le,mt.Ne=n.Ne,mt.Ue=n.Ue,mt.Je=n.Je,mt.Ze=n.Ze,mt.Qe=n.Qe,mt.pe=n.pe}{let e=function(t,s){let i=p.getType(t),e=p.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},n=function(t){console.warn("[Defence] "+t+" @",p.ae())},i=function(){if(f=-1,0<a.size||0<l.size){let t=new Set([...a.keys()].map(t=>p.qn(t))),s=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+s),a.clear(),l.clear()}},r=function(s){let i=new Set;for(let t in s)i.add(t);return i},h=function(t,s){let i=r(s),e=d.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);p.$n(s,[...i]),s.length&&console.warn(`[Defence] '${p.qn(t)}' constructor creates inconsistent properties: `+s.join(", "))}else d.set(t,i)};e,n,i,r,h;const p=self.Os,yt=new Map;p.Xn=function(t,s){console.log("%c"+t,"font-weight: bold; color:"+s)},p.Kn=function(t,...s){yt.has(t)||yt.set(t,-1),-1===yt.get(t)&&yt.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...s),yt.set(t,-1)}))};let o,a=(p.Yn=function(t){performance.mark(t),(o=o||new Map).has(t)||o.set(t,{current:0,total:0,Zn:0,Qn:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.Zn.toPrecision(3)} :: calls => `+this.Qn}})},p.tr=function(t){performance.measure("measure-"+t,t);const s=performance.getEntriesByName("measure-"+t)[0],i=o.get(t);i.current=s.duration,i.total+=i.current,i.Zn=i.total/i.Qn,console.log(i.toString()),i.Qn++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},p.ae=function(){return(new Error).stack},p.ir=function(){},p.cast=function(t,s){return t&&t instanceof s?t:null},p.qn=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":p.le(t)?"<number>":p.ve(t)?"<string>":p.ke(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":p.He(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},p.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},p.range=function*(s,i){if(!isFinite(Math.abs(s-i)))throw new Error("Invalid parameters");if(i<s)for(let t=s-1;t>=i;t--)yield t;else for(let t=s;t<i;t++)yield t},new Map),l=new Map,u=new WeakMap,c=new WeakMap;p.er={};const wt=new Set(["then","splice"]);p.er.get=function(t,s){return s in t||"symbol"==typeof s||wt.has(s)||n(`Accessed missing property '${s}' from defended object '${p.qn(t)}', returning undefined`),c.has(t)&&"symbol"!=typeof s&&!wt.has(s)&&n(`Accessed property '${s}' on a released object '${p.qn(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]},p.er.set=function(t,s,i){return s in t||a.has(t)||n(`Set non-existent property '${s}' to '${i}' on defended object '${p.qn(t)}'`),e(t[s],i)||a.has(t)||n(`Set '${p.getType(t[s])}' property '${s}' to type '${p.getType(i)}' on defended object '${p.qn(t)}'`),c.has(t)&&n(`Set property '${s}' on a released object '${p.qn(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]=i,!0},p.er.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${p.qn(t)}'`)},p.er.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${p.qn(t)}'`)},p.er.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${p.qn(t)}'`)};let f=-1,d=(p.nr=class{constructor(){if(p.Us&&p.Ni.Xi){let t=Object.create(new.target.prototype),s=new Proxy(t,p.er);return a.set(t,s),l.set(s,t),u.set(s,t),-1===f&&(f=requestAnimationFrame(i)),s}}},p.rr=function(s){if(p.Us&&p.Ni.Xi&&s instanceof p.nr){if(l.has(s)){let t=l.get(s);l.delete(s),a.delete(t)}return s}return p.isDebug?Object.seal(s):s},p.hr=function(t,...s){let i;try{i=new t(...s)}catch(t){throw l.clear(),a.clear(),t}return p.Us&&h(t,i),p.rr(i)},p.lr=function(t){let s=u.get(t);s&&c.set(s,p.ae())},p.ur=function(t){let s=u.get(t);return!!s&&!!c.get(s)},new Map);p.cr=class{constructor(t){this.dr="",t&&this.start(t)}start(t){p.ri&&(this.dr=t,performance.mark(this.dr+"-Start"))}end(){p.ri&&(performance.mark(this.dr+"-End"),performance.measure(this.dr,this.dr+"-Start",this.dr+"-End"))}next(t){p.ri&&(this.end(),this.dr=t,performance.mark(this.dr+"-Start"))}}}{let i=function(t){return 0===t&&1/t<0};i;const y=self.Os,St=2*Math.PI,bt=Math.PI/180,vt=180/Math.PI,Mt=(y.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0==e)return i;if(t<s){const n=i-(s-t)%e;return n===i?0:n}return s+(t-s)%e},y.pr=function(t,s,i,e,n){const r=i-s;if(0==r&&0===e)return t;const h=n-e;return(t-s)*h/r+e},y.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},y.mr=function(t,s,i){return t<s?s:i<t?i:t},y.gr=function(t){return(t%=St)<0&&(t+=St),t},y.yr=function(t){return t*bt},y.Sr=function(t){return t*vt},y.br=function(t,s){return Math.sqrt(t*t+s*s)},y.vr=function(t,s,i){return Math.sqrt(t*t+s*s+i*i)},y.Mr=function(t,s,i,e){return y.br(i-t,e-s)},y.Gr=function(t,s,i,e){const n=i-t,r=e-s;return n*n+r*r},y.Tr=function(t,s,i,e){return Math.atan2(e-s,i-t)},y._r=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),n=Math.sin(s),r=Math.cos(s),h=i*n+e*r;return 1<=h?0:h<=-1?Math.PI:Math.acos(h)},y.Ir=function(t,s,i){let e=Math.sin(t),n=Math.cos(t),r=Math.sin(s),h=Math.cos(s);return Math.acos(e*r+n*h)>i?0<n*r-e*h?y.gr(t+i):y.gr(t-i):y.gr(s)},y.Cr=function(t,s){let i=Math.sin(t),e=Math.cos(t),n=Math.sin(s),r=Math.cos(s);return e*n-i*r<=0},y.Er=function(t,s,i,e=0){let n=y._r(t,s),r=St*e;return y.Cr(s,t)?y.gr(t+(n+r)*i):y.gr(t-(n+r)*i)},y.Pr=function(t,s,i,e=0){const n=y._r(t,s),r=St*e;return y.Cr(s,t)?y.gr(t+(n+r)*i):y.gr(t+(St-n+r)*i)},y.Rr=function(t,s,i,e=0){const n=y._r(t,s),r=St*e;return y.Cr(s,t)?y.gr(t-(-St+n-r)*i):y.gr(t-(n+r)*i)},y.Ar=function(t,s){const i=y._r(t,s);return y.Cr(t,s)?y.gr(s-i):y.gr(s+i)},y.Dt=function(t,s,i){return t+i*(s-t)},y.Fr=function(t,s,i){return t===s?0:(i-t)/(s-t)},y.Dr=function(t,s,i,e,n){return y.Dt(e,n,y.Fr(t,s,i))},y.Or=function(t,s,i,e){return y.Dt(y.Dt(t,s,e),y.Dt(s,i,e),e)},y.kr=function(t,s,i,e,n){return y.Dt(y.Or(t,s,i,n),y.Or(s,i,e,n),n)},y.Lr=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},y.Nr=function(t){return 0<t&&0==(t-1&t)},y.Br=function(s){--s;for(let t=1;t<32;t<<=1)s|=s>>t;return s+1},y.Wr=function(t,s){return Math.round(t*s)/s},y.jr=function(t,s){return Math.floor(t*s)/s},y.Vr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},y.Hr=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},y.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;0<=e&&"0"===i.charAt(e);--e);return 0<=e&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},y.Ur=function(t,s,i){return y.mr(t,0,255)|y.mr(s,0,255)<<8|y.mr(i,0,255)<<16},1024),xt=16384,Gt=8191,Tt=(y.zr=function(t,s,i,e){return t=y.mr(Math.floor(1024*t),-8192,Gt),s=y.mr(Math.floor(1024*s),-8192,Gt),i=y.mr(Math.floor(1024*i),-8192,Gt),e=y.mr(Math.floor(1023*e),0,1023),t<0&&(t+=xt),s<0&&(s+=xt),i<0&&(i+=xt),-(t*xt*xt*Mt+s*xt*Mt+i*Mt+e)},y.Jr=function(t,s,i){return y.zr(t,s,i,1)},y.qr=function(s){if(0<=s)return(255&s)/255;{let t=Math.floor(-s/(xt*xt*Mt));return t>Gt&&(t-=xt),t/1024}},y.$r=function(s){if(0<=s)return((65280&s)>>8)/255;{let t=Math.floor(-s%(xt*xt*Mt)/(xt*Mt));return t>Gt&&(t-=xt),t/1024}},y.Xr=function(s){if(0<=s)return((16711680&s)>>16)/255;{let t=Math.floor(-s%(xt*Mt)/Mt);return t>Gt&&(t-=xt),t/1024}},y.Kr=function(t){if(i(t))return 0;if(0<=t)return 1;{const s=Math.floor(-t%Mt);return s/1023}},y.Yr=function(s,i){for(s=Math.floor(s),i=Math.floor(i);0!==i;){let t=i;i=s%i,s=t}return s},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]);y.Zr=function(i,e){if((i=Math.floor(i))===(e=Math.floor(e)))return[1,1];for(let s of Tt){let t=i/s[0]*s[1];if(Math.abs(e-t)<1)return s.slice(0);if(t=i/s[1]*s[0],Math.abs(e-t)<1)return[s[1],s[0]]}let t=y.Yr(i,e);return[i/t,e/t]},y.Qr=function(t,s,i,e,n,r,h,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(n,h),c=Math.max(n,h);if(l<u||c<a)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||m<f)return!1;const g=n-t+h-i,y=r-s+o-e,w=i-t,S=e-s,b=h-n,v=o-r,M=Math.abs(S*b-v*w),x=b*y-v*g;if(Math.abs(x)>M)return!1;const G=w*y-S*g;return Math.abs(G)<=M},y.th=function(t,s,i,e,n,r,h,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(r<f||d<n)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||m<h)return!1;const g=a-t+u-i,y=l-s+c-e,w=i-t,S=e-s,b=u-a,v=c-l,M=Math.abs(S*b-v*w),x=b*y-v*g;if(Math.abs(x)>M)return!1;const G=w*y-S*g;return Math.abs(G)<=M},y.ih=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=n.eh(),u=n.nh(),c=n.rh(),f=n.hh(),d=n.oh(),p=n.ah(),m=n.lh(),g=n.uh();return y.th(t,s,i,e,r,h,o,a,l,u,c,f)||y.th(t,s,i,e,r,h,o,a,c,f,d,p)||y.th(t,s,i,e,r,h,o,a,d,p,m,g)||y.th(t,s,i,e,r,h,o,a,m,g,l,u)},y.fh=function(s,i,e,n,r){let h=Math.min(s,e),o=Math.max(s,e),a=Math.min(i,n),l=Math.max(i,n),u=0;for(let t=r.length-4;u<=t;u+=2)if(y.th(s,i,e,n,h,o,a,l,r[u],r[u+1],r[u+2],r[u+3]))return!0;return y.th(s,i,e,n,h,o,a,l,r[u],r[u+1],r[0],r[1])};y.dh=function(t,s,i,e,n,r,h,o){const a=i-t,l=e-s,u=h-n,c=o-r,f=a*c-l*u;if(0==f)return 2;const d=((s-e)*(h-t)+a*(o-s))/f;return 0<d&&d<1+1e-6?(c*(h-t)+(n-h)*(o-s))/f:2},y.ph=function(t,s,i,e,n,r,h,o,a){const l=(h-n)*a,u=(o-r)*a;return y.dh(t,s,i,e,n-l,r-u,h+l,o+u)},y.mh=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,w=u*f+c*d,S=1/(p*y-m*m),b=(y*g-m*w)*S,v=(p*w-m*g)*S;return 0<=b&&0<=v&&b+v<=1},y.gh=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,w=f*u+d*c,S=p*g-m*m,b=(g*y-m*w)/S,v=(p*w-m*y)/S,M=1-b-v;return[M,b,v]},y.yh=function(t,s,i,e,n,r,h,o,a,l,u,c){return[t*e+s*h+i*l,t*n+s*o+i*u,t*r+s*a+i*c]}}{let l=self.Os,s=null,i="";if("undefined"!=typeof document){const _t=(s=document).querySelector("base");(i=_t&&_t.hasAttribute("href")?_t.getAttribute("href"):"")&&!(i=i.startsWith("/")?i.substr(1):i).endsWith("/")&&(i+="/")}l.wh=function(){return i},l.Sh=function(){if(!s)return"";const t=s.location;return l.bh(t.origin+t.pathname)+i},l.bh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},l.Mh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},l.xh=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},l.Gh=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},l.Th=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},l._h=function(t){return t.replace(/\\/g,"/")},l.Ih=function(t,s){const i=t?l.xh(t).slice(1):"";return s===i},l.Ch=function(t,s){let i,e;return l.Ae(t)&&(i=l.Th(t.name)),l.ve(t)&&(i=l.Th(t)),l.Ae(s)&&(e=l.Th(s.name)),l.ve(s)&&(e=l.Th(s)),i===e},l.Eh=function(t){t=l._h(t);let s=/^\w\:\//.exec(t),i=(s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),e="",n=t,r,h="";0<i&&(e=t.slice(0,i),n=t.slice(i));const o=(r=n).lastIndexOf("."),a=(0<o&&(h=n.slice(o),r=n.slice(0,-h.length)),s+e+n);return{dir:e,Ph:n,name:r,root:s,ext:h,Rh:a}},l.Ah=function(i,e){return new Promise((t,s)=>{self.setTimeout(t,i,e)})},l.Fh=function(t){try{t()}catch(t){l.isDebug&&console.warn("Swallowed exception: ",t)}},l.Dh=function(){},l.mn=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},l.Oh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},l.kh=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},l.Lh=function(t,s){t.length=s},l.Nh=function(t){t&&0!==t.length&&l.Lh(t,0)},l.Bh=function(i){if(i){for(let s=0;s<i.length;s++){let t=i[s];l.Lh(t,0)}l.Lh(i,0)}},l.Wh=function(s,i,e){const n=s.length;if(!((i|=0)<=n))for(let t=n;t<i;++t)s.push(e)},l.jh=function(t,s,i){const e=t.length;(s|=0)<e?l.Lh(t,s):e<s&&l.Wh(t,s,i)},l.Vh=function(t,s){l.Nh(t),l.$n(t,s)},l.$n=function(i,e){if(e.length<1e4)i.push(...e);else for(let t=0,s=e.length;t<s;++t)i.push(e[t])},l.Hh=function(i,e){if(!((e=Math.floor(e))<0||e>=i.length)){let s=i.length-1;for(let t=e;t<s;++t)i[t]=i[t+1];l.Lh(i,s)}},l.Uh=function(t,s){let i=t.indexOf(s);0<=i&&t.splice(i,1)},l.zh=function(s,i){let e=s.length;if(i.length!==e)return!1;for(let t=0;t<e;++t)if(s[t]!==i[t])return!1;return!0},l.Jh=function(i,e){let n=[],r=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e(t)?n.push(t):(i[r]=t,++r)}return l.Lh(i,r),n},l.qh=function(i,e){let t=i.length,n=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e.has(t)||(i[n++]=t)}return l.Lh(i,n),t-n},l.$h=function(t,s){return t===Math.floor(t)&&0<=t&&t<s.length},l.Xh=function(t,s){if(!l.$h(t,s))throw new RangeError("array index out of bounds")},l.Kh=function(t){return t.slice()},l.Yh=function(t,i){let e=[];for(let s of t)if(l.Ce(s)){let t=i(s);if(!t)throw new Error("missing clone");if(t.constructor!==s.constructor)throw new Error("object is not a clone");e.push(t)}else l.ke(s)?e.push(l.Yh(s,i)):e.push(s);return e},l.Zh=function(s){let i=[];for(let t of s)i.push(t.slice());return i},l.Qh=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},l.io=function(t,s,i){const e=new Set;for(const n of t.values())s(n)&&(i?e.add(i(n)):e.add(n));return e},l.eo=function(t,s){return t.union?t.union(s):new Set([...t,...s])},l.no=function(t,s){for(const i of s)t.add(i);return t},l.first=function(s){for(let t of s)return t;return null},l.xor=function(t,s){return!t!=!s},l.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}},l.ro=function(s){for(let t in s)if(s.hasOwnProperty(t))return!0;return!1},l.ho=function(o,a){return o.length?new Promise((i,e)=>{let n=[],r=0,h=!1;for(let s=0,t=o.length;s<t;++s)n.push(void 0),o[s].then(t=>{h||(n[s]=t,++r===o.length?i(n):a(r,o.length))}).catch(t=>{h=!0,e(t)})}):Promise.resolve([])};let e=[],n=(l.ao=function(t){e.push(t)},l.lo=function(){let i=0;for(let s of e){let t=s();i+=t}return Math.floor(i)},1),r=new Map,h=new MessageChannel,o=(h.port2.onmessage=function(t){const s=t.data,i=r.get(s);r.delete(s),i&&i(performance.now())},l.uo=function(t){const s=n++;return r.set(s,t),h.port1.postMessage(s),s},l.co=function(t){r.delete(t)},l.fo=l.uo,l.do=function(){return new Promise(t=>l.fo(t))},new Set);l.po=function(s){const i=self.requestAnimationFrame(async t=>{await l.do(),o.has(i)&&(o.delete(i),s(t))});return o.add(i),i},l.mo=function(t){o.has(t)&&(self.cancelAnimationFrame(t),o.delete(t))}}{const r=self.Os;r.yo=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},r.wo=function(t){return!r.yo(t)},r.So=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},r.bo=function(t,s){return fetch(t,s).then(t=>(r.So(t),t))},r.vo=function(t){return r.bo(t).then(t=>t.text())},r.Mo=function(t){return r.bo(t).then(t=>t.json())},r.xo=function(t){return r.bo(t).then(t=>t.blob())},r.Go=function(t){return r.bo(t).then(t=>t.arrayBuffer())},r.To=function(e){return new Promise((t,s)=>{const i=new Image;i.onload=()=>t(i),i.onerror=t=>s(t),i.src=e})},r._o=function(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsArrayBuffer(e)})},r.Io=function(e){return"function"==typeof e.text?e.text():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsText(e)})},r.Co=function(t){return r.Io(t).then(t=>JSON.parse(t))},r.Eo=async function(t,s){let i=URL.createObjectURL(t);try{const e=await r.To(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof e.decode&&await e.decode(),e}finally{i&&URL.revokeObjectURL(i)}},r.Po=function(t,s){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,s);{const i=document.createElement("canvas");return i.width=t,i.height=s,i}},r.Ro=function(s,i,e){if("number"!=typeof e&&(e=1),i=i||"image/png",e=r.mr(e,0,1),s.convertToBlob)return s.convertToBlob({type:i,quality:e});if(s.toBlob)return new Promise(t=>s.toBlob(t,i,e));throw new Error("could not convert canvas to blob")},r.Ao=function(t,s,i){const e=r.Po(t.width,t.height),n=e.getContext("2d");return n.drawImage(t,0,0),r.Ro(e,s,i)},r.Fo=function(t,s,i){if(r.Ni.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>r.Ao(t,s,i));if(r.Ni.ImageBitmap)return createImageBitmap(t).then(t=>r.Ao(t,s,i));{const e=r.Po(t.width,t.height),n=e.getContext("2d");return n.putImageData(t,0,0),r.Ro(e,s,i)}},r.Do=function(t,s){t.clear();for(const i of s)t.add(i)},r.Oo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},r.ko=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},r.Lo=function s(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>s(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],s(t[1])])};{const i=Object.create(null);for(const[e,n]of Object.entries(t))i[e]=s(n);return i}},r.No=function s(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>s(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],s(t[1])]));{const i=Object.create(null);for(const[e,n]of Object.entries(t))i[e]=s(n);return i}}return t},r.Bo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const n of t)"-"===n?0<e&&(i=!0):i?(s+=n.toUpperCase(),i=!1):s+=n,++e;return s},r.Wo=function(t){return"object"==typeof t&&"function"==typeof t.next},r.jo=function(s,i){const e=[];if("function"==typeof i)for(let t=0;t<s;++t)e.push(i());else for(let t=0;t<s;++t)e.push(i);return e}}{let e=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},l=function(t,s,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};e,l;const u=self.Os,It=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,Ct=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;u.Vo=class{constructor(t,s,i,e){this.Ho=NaN,this.Uo=NaN,this.zo=NaN,this.Jo=NaN,this.Ho=0,this.Uo=0,this.zo=0,this.Jo=0,t instanceof u.Vo?this.set(t):this.qo(t||0,s||0,i||0,e||0)}$o(t,s,i){return this.Ho=+t,this.Uo=+s,this.zo=+i,this.mr(),this}qo(t,s,i,e){return this.Ho=+t,this.Uo=+s,this.zo=+i,this.Jo=+e,this.mr(),this}set(t){return this.Ho=t.Ho,this.Uo=t.Uo,this.zo=t.zo,this.Jo=t.Jo,this}_(t){return this.set(t)}add(t){this.Ho+=t.Ho,this.Uo+=t.Uo,this.zo+=t.zo,this.Jo+=t.Jo,this.mr()}Xo(t,s,i,e=0){this.Ho+=+t,this.Uo+=+s,this.zo+=+i,this.Jo+=+e,this.mr()}Ko(t){this.Yo(Math.max(this.Ho,t.Ho)-Math.min(this.Ho,t.Ho)),this.Zo(Math.max(this.Uo,t.Uo)-Math.min(this.Uo,t.Uo)),this.Qo(Math.max(this.zo,t.zo)-Math.min(this.zo,t.zo)),this.ta(Math.max(this.Jo,t.Jo)-Math.min(this.Jo,t.Jo)),this.mr()}ia(t){this.Ho=t.Ho,this.Uo=t.Uo,this.zo=t.zo}Yo(t){this.Ho=u.mr(+t,0,1)}ea(){return this.Ho}Zo(t){this.Uo=u.mr(+t,0,1)}na(){return this.Uo}Qo(t){this.zo=u.mr(+t,0,1)}ra(){return this.zo}ta(t){this.Jo=u.mr(+t,0,1)}oa(){return this.Jo}clone(){return u.hr(u.Vo,this.Ho,this.Uo,this.zo,this.Jo)}toArray(){return[this.Ho,this.Uo,this.zo,this.Jo]}aa(){return new Float64Array(this.toArray())}la(t,s){t[s++]=this.Ho,t[s++]=this.Uo,t[s++]=this.zo,t[s]=this.Jo}ua(t,s){t[s++]=this.Ho,t[s++]=this.Uo,t[s]=this.zo}equals(t){return this.Ho===t.Ho&&this.Uo===t.Uo&&this.zo===t.zo&&this.Jo===t.Jo}ca(t){return this.Ho===t.Ho&&this.Uo===t.Uo&&this.zo===t.zo}fa(t,s,i){return this.Ho===t&&this.Uo===s&&this.zo===i}da(t,s,i,e){return this.Ho===t&&this.Uo===s&&this.zo===i&&this.Jo===e}pa(t,s){return t[s]===Math.fround(this.Ho)&&t[s+1]===Math.fround(this.Uo)&&t[s+2]===Math.fround(this.zo)&&t[s+3]===Math.fround(this.Jo)}ma(t,s){return t[s]===Math.fround(this.Ho)&&t[s+1]===Math.fround(this.Uo)&&t[s+2]===Math.fround(this.zo)}multiply(t){this.Ho*=t.Ho,this.Uo*=t.Uo,this.zo*=t.zo,this.Jo*=t.Jo}ga(t){this.Ho*=t,this.Uo*=t,this.zo*=t,this.Jo*=t}ya(){return this.Ho*=this.Jo,this.Uo*=this.Jo,this.zo*=this.Jo,this}wa(){return this.Ho/=this.Jo,this.Uo/=this.Jo,this.zo/=this.Jo,this}mr(){return this.Ho=u.mr(this.Ho,0,1),this.Uo=u.mr(this.Uo,0,1),this.zo=u.mr(this.zo,0,1),this.Jo=u.mr(this.Jo,0,1),this}Sa(t){this.Ho=u.qr(t),this.Uo=u.$r(t),this.zo=u.Xr(t),this.Jo=u.Kr(t)}ba(t,s,i){const e=u.ue(t)?t:this.ea(),n=u.ue(s)?s:this.na(),r=u.ue(i)?i:this.ra();return`rgb(${100*e}%, ${100*n}%, ${100*r}%)`}Ma(t,s,i,e){const n=u.ue(t)?t:this.ea(),r=u.ue(s)?s:this.na(),h=u.ue(i)?i:this.ra(),o=u.ue(e)?e:this.oa();return`rgba(${100*n}%, ${100*r}%, ${100*h}%, ${o})`}xa(){const t=Math.round(255*this.ea()),s=Math.round(255*this.na()),i=Math.round(255*this.ra());return"#"+e(t.toString(16))+e(s.toString(16))+e(i.toString(16))}Ga(t){if("string"!=typeof t)return!1;let s,i,e;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Yo(s),isFinite(i)&&this.Zo(i),isFinite(e)&&this.Qo(e),this.ta(1),!0}Ta(){const t=Math.round(255*this.ea()),s=Math.round(255*this.na()),i=Math.round(255*this.ra());return t+`, ${s}, `+i}_a(){const t=Math.round(255*this.ea()),s=Math.round(255*this.na()),i=Math.round(255*this.ra());return[t,s,i]}Ia(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Yo(i),isFinite(e)&&this.Zo(e),isFinite(n)&&this.Qo(n),this.ta(1),!0}Ca(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Yo(i),isFinite(e)&&this.Zo(e),isFinite(n)&&this.Qo(n),this.ta(1),!0}Ea(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.Yo(i),isFinite(e)&&this.Zo(e),isFinite(n)&&this.Qo(n),isFinite(r)&&this.ta(r),!0}Pa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.Yo(i),isFinite(e)&&this.Zo(e),isFinite(n)&&this.Qo(n),isFinite(r)&&this.ta(r),!0}Ra(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.Ca(t):this.Ia(t);if(t.startsWith("rgba("))return t.includes("%")?this.Pa(t):this.Ea(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.Aa(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.Ca(t):4===s.length&&this.Pa(t):3===s.length?this.Ia(t):4===s.length&&this.Ea(t)}}return this.Ga(t)}toJSON(){return[this.Ho,this.Uo,this.zo,this.Jo]}Fa(t,s,i,e){let n,r,h;if(t%=360,s=u.mr(s,0,100),i=u.mr(i,0,100),e=u.mr(e,0,1),t/=360,i/=100,0==(s/=100))n=r=h=i;else{const o=i<.5?i*(1+s):i+s-i*s,a=2*i-o;n=l(a,o,t+1/3),r=l(a,o,t),h=l(a,o,t-1/3)}return this.Yo(n),this.Zo(r),this.Qo(h),this.ta(e),this}Aa(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=It.exec(s),e=Ct.exec(s);return i&&4===i.length?(this.Fa(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.Fa(+i[1],+i[2],+i[3],+i[4]),0))}Da(){const t=this.Ho,s=this.Uo,i=this.zo,e=this.Jo,n=u.Vo.Oa(t,s,i),r=u.Vo.ka(t,s,i),h=u.Vo.La(t,s,i);return`hsla(${n}, ${r}%, ${h}%, ${e})`}Na(){const t=this.Ho,s=this.Uo,i=this.zo;return[u.Vo.Oa(t,s,i),u.Vo.ka(t,s,i),u.Vo.La(t,s,i),this.Jo]}Ba(t){!Array.isArray(t)||t.length<3||(this.Ho=t[0],this.Uo=t[1],this.zo=t[2],this.Jo=4<=t.length?t[3]:1)}set r(t){this.Yo(t)}get r(){return this.ea()}set g(t){this.Zo(t)}get g(){return this.na()}set b(t){this.Qo(t)}get b(){return this.ra()}set a(t){this.ta(t)}get a(){return this.oa()}Wa(t,s){switch(t){case 0:this.Yo(s);break;case 1:this.Zo(s);break;case 2:this.Qo(s);break;case 3:this.ta(s);break;default:throw new RangeError("invalid color index")}}ja(t){switch(t){case 0:return this.ea();case 1:return this.na();case 2:return this.ra();case 3:return this.oa();default:throw new RangeError("invalid color index")}}static Va(t,s){let i,e;if(Array.isArray(t))(i=new u.Vo).Ba(t);else{if(!(t instanceof u.Vo))throw new Error("unexpected type");i=t}if(Array.isArray(s))(e=new u.Vo).Ba(s);else{if(!(s instanceof u.Vo))throw new Error("unexpected type");e=s}return i.equals(e)}static Ha(t,s){return u.mr(Math.max(t,s)-Math.min(t,s),0,1)}static Ua(t,s){const i=new u.Vo;return i.Yo(Math.max(t.Ho,s.Ho)-Math.min(t.Ho,s.Ho)),i.Zo(Math.max(t.Uo,s.Uo)-Math.min(t.Uo,s.Uo)),i.Qo(Math.max(t.zo,s.zo)-Math.min(t.zo,s.zo)),i.ta(Math.max(t.Jo,s.Jo)-Math.min(t.Jo,s.Jo)),i}static za(t,s){const i=new u.Vo(0,0,0,1);return i.Yo(Math.max(t.Ho,s.Ho)-Math.min(t.Ho,s.Ho)),i.Zo(Math.max(t.Uo,s.Uo)-Math.min(t.Uo,s.Uo)),i.Qo(Math.max(t.zo,s.zo)-Math.min(t.zo,s.zo)),i}static Oa(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;let r=0;switch(e){case t:r=(s-i)/(e-n)+(s<i?6:0);break;case s:r=(i-t)/(e-n)+2;break;case i:r=(t-s)/(e-n)+4}return Math.round(r/6*360)}static ka(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;const r=(e+n)/2,h=e-n,o=.5<r?h/(2-e-n):h/(e+n);return Math.round(100*o)}static La(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i),r=(e+n)/2;return e?Math.round(100*r):0}},u.Vo.Ja=Object.freeze(u.hr(u.Vo,1,1,1,1)),u.Vo.qa=Object.freeze(u.hr(u.Vo,0,0,0,1)),u.Vo.$a=Object.freeze(u.hr(u.Vo,0,0,0,0))}{const Et=self.Os;Et.Xa=class{constructor(t,s){this.Ka=0,this.Ya=0,t instanceof Et.Xa?this._(t):this.set(t||0,s||0)}set(t,s){this.Ka=+t,this.Ya=+s}_(t){this.Ka=t.Ka,this.Ya=t.Ya}equals(t){return this.Ka===t.Ka&&this.Ya===t.Ya}Za(t,s){return this.Ka===t&&this.Ya===s}pa(t,s){return t[s]===Math.fround(this.Ka)&&t[s+1]===Math.fround(this.Ya)}Qa(t){this.Ka=+t}tl(){return this.Ka}sl(t){this.Ya=+t}il(){return this.Ya}toArray(){return[this.Ka,this.Ya]}aa(){return new Float64Array(this.toArray())}la(t,s){t[s++]=this.Ka,t[s]=this.Ya}offset(t,s){this.Ka+=+t,this.Ya+=+s}scale(t,s){this.Ka*=t,this.Ya*=s}_t(t,s){this.Ka/=t,this.Ya/=s}round(){this.Ka=Math.round(this.Ka),this.Ya=Math.round(this.Ya)}floor(){this.Ka=Math.floor(this.Ka),this.Ya=Math.floor(this.Ya)}ceil(){this.Ka=Math.ceil(this.Ka),this.Ya=Math.ceil(this.Ya)}angle(){return Et.Tr(0,0,this.Ka,this.Ya)}el(){return this.Ka*this.Ka+this.Ya*this.Ya}length(){return Et.br(this.Ka,this.Ya)}nl(t,s){const i=this.Ka*s-this.Ya*t;this.Ya=this.Ya*s+this.Ka*t,this.Ka=i}rotate(t){0!==t&&this.nl(Math.sin(t),Math.cos(t))}rl(t,s,i){0===t||s===this.Ka&&i===this.Ya||(this.Ka-=s,this.Ya-=i,this.nl(Math.sin(t),Math.cos(t)),this.Ka+=+s,this.Ya+=+i)}move(t,s){0!==s&&(this.Ka+=Math.cos(t)*s,this.Ya+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Ka/=t,this.Ya/=t)}mr(t,s){this.Ka=Et.mr(this.Ka,t,s),this.Ya=Et.mr(this.Ya,t,s)}At(t){return this.Ka*t.Ka+this.Ya*t.Ya}reverse(){this.Ka=-this.Ka,this.Ya=-this.Ya}hl(){let t=this.Ka;return this.Ka=this.Ya,this.Ya=-t,this}}}{const Pt=self.Os;Pt.Rect=class{constructor(t,s,i,e){this.ol=NaN,this.al=NaN,this.ll=NaN,this.ul=NaN,this.ol=0,this.al=0,this.ll=0,this.ul=0,t instanceof Pt.Rect?this._(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.ol=+t,this.al=+s,this.ll=+i,this.ul=+e}cl(t,s,i,e){s=+s,this.ol=t=+t,this.al=s,this.ll=t+ +i,this.ul=s+ +e}_(t){this.ol=+t.ol,this.al=+t.al,this.ll=+t.ll,this.ul=+t.ul}clone(){return new Pt.Rect(this.ol,this.al,this.ll,this.ul)}static fl(t,s){const i=new Pt.Rect;return i.dl(Math.min(t.ol,s.ol)),i.pl(Math.min(t.al,s.al)),i.gl(Math.max(t.ll,s.ll)),i.yl(Math.max(t.ul,s.ul)),i}static wl(t){return new Pt.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.ol===t.ol&&this.al===t.al&&this.ll===t.ll&&this.ul===t.ul}Sl(t,s,i,e){return this.ol===t&&this.al===s&&this.width()===i&&this.height()===e}pa(t,s){return t[s]===Math.fround(this.ol)&&t[s+1]===Math.fround(this.al)&&t[s+2]===Math.fround(this.ll)&&t[s+3]===Math.fround(this.ul)}dl(t){this.ol=+t}bl(){return this.ol}pl(t){this.al=+t}vl(){return this.al}gl(t){this.ll=+t}Ml(){return this.ll}yl(t){this.ul=+t}xl(){return this.ul}toArray(){return[this.ol,this.al,this.ll,this.ul]}aa(){return new Float64Array(this.toArray())}Gl(){return new DOMRect(this.ol,this.al,this.width(),this.height())}static Tl(t){return Pt.hr(Pt.Rect,t.left,t.top,t.right,t.bottom)}la(t,s){t[s++]=this.ol,t[s++]=this.al,t[s++]=this.ll,t[s]=this.ul}_l(t,s){t[s++]=this.ol,t[s++]=this.al,t[s++]=this.ll,t[s++]=this.al,t[s++]=this.ll,t[s++]=this.ul,t[s++]=this.ol,t[s]=this.ul}Il(t,s,i){t[s++]=this.ol,t[s++]=this.al,t[s++]=i,t[s++]=this.ll,t[s++]=this.al,t[s++]=i,t[s++]=this.ll,t[s++]=this.ul,t[s++]=i,t[s++]=this.ol,t[s++]=this.ul,t[s]=i}width(){return this.ll-this.ol}height(){return this.ul-this.al}Cl(){return(this.ol+this.ll)/2}El(){return(this.al+this.ul)/2}offset(t,s){s=+s,this.ol+=t=+t,this.al+=s,this.ll+=t,this.ul+=s}offsetLeft(t){this.ol+=+t}offsetTop(t){this.al+=+t}Pl(t){this.ll+=+t}Rl(t){this.ul+=+t}Al(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.al<this.ul?this.ol<this.ll?this.ul=this.al+this.width():this.ul=this.al-this.width():this.ol<this.ll?this.ul=this.al-this.width():this.ul=this.al+this.width()}Fl(t,s){s=+s,this.ol-=t=+t,this.al-=s,this.ll+=t,this.ul+=s}Dl(t,s){s=+s,this.ol+=t=+t,this.al+=s,this.ll-=t,this.ul-=s}multiply(t,s){this.ol*=t,this.al*=s,this.ll*=t,this.ul*=s}_t(t,s){this.ol/=t,this.al/=s,this.ll/=t,this.ul/=s}Ol(t){this.ol=+t-this.ol,this.ll=+t-this.ll}kl(t){this.al=+t-this.al,this.ul=+t-this.ul}Ll(t,s){const i=this.width(),e=this.height(),n=this.bl()+i*t,r=this.vl()+e*s;this.cl(n-e*s,r-i*t,e,i)}Nl(){const t=this.ol;this.ol=this.ll,this.ll=t}Bl(){const t=this.al;this.al=this.ul,this.ul=t}Wl(t){const s=this.al;this.al=+t-this.ul,this.ul=+t-s}round(){this.ol=Math.round(this.ol),this.al=Math.round(this.al),this.ll=Math.round(this.ll),this.ul=Math.round(this.ul)}jl(){this.ol=Math.ceil(this.ol),this.al=Math.ceil(this.al),this.ll=Math.floor(this.ll),this.ul=Math.floor(this.ul)}Vl(){this.ol=Math.floor(this.ol),this.al=Math.floor(this.al),this.ll=Math.ceil(this.ll),this.ul=Math.ceil(this.ul)}floor(){this.ol=Math.floor(this.ol),this.al=Math.floor(this.al),this.ll=Math.floor(this.ll),this.ul=Math.floor(this.ul)}ceil(){this.ol=Math.ceil(this.ol),this.al=Math.ceil(this.al),this.ll=Math.ceil(this.ll),this.ul=Math.ceil(this.ul)}mr(t,s,i,e){this.ol=Math.max(this.ol,+t),this.al=Math.max(this.al,+s),this.ll=Math.min(this.ll,+i),this.ul=Math.min(this.ul,+e)}Hl(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.ol=Pt.mr(this.ol,t,i),this.al=Pt.mr(this.al,s,e),this.ll=Pt.mr(this.ll,t,i),this.ul=Pt.mr(this.ul,s,e)}normalize(){this.ol>this.ll&&this.Nl(),this.al>this.ul&&this.Bl()}Ul(t){return!(t.ll<this.ol||t.ul<this.al||t.ol>this.ll||t.al>this.ul)}zl(t,s,i){return!(t.ll+s<this.ol||t.ul+i<this.al||t.ol+s>this.ll||t.al+i>this.ul)}Jl(t,s){return t>=this.ol&&t<=this.ll&&s>=this.al&&s<=this.ul}ql(t){return t.ol>=this.ol&&t.al>=this.al&&t.ll<=this.ll&&t.ul<=this.ul}$l(t){t.ol<this.ol&&(this.ol=+t.ol),t.al<this.al&&(this.al=+t.al),t.ll>this.ll&&(this.ll=+t.ll),t.ul>this.ul&&(this.ul=+t.ul)}Xl(t){this.ol=Pt.Dt(t.ol,t.ll,this.ol),this.al=Pt.Dt(t.al,t.ul,this.al),this.ll=Pt.Dt(t.ol,t.ll,this.ll),this.ul=Pt.Dt(t.al,t.ul,this.ul)}}}{const Rt=self.Os;Rt.Kl=class{constructor(t,s,i,e,n,r,h,o){this.Yl=NaN,this.Zl=NaN,this.Ql=NaN,this.tu=NaN,this.su=NaN,this.iu=NaN,this.eu=NaN,this.nu=NaN,this.Yl=0,this.Zl=0,this.Ql=0,this.tu=0,this.su=0,this.iu=0,this.eu=0,this.nu=0,t instanceof Rt.Kl?this._(t):this.set(t||0,s||0,i||0,e||0,n||0,r||0,h||0,o||0)}set(t,s,i,e,n,r,h,o){this.Yl=+t,this.Zl=+s,this.Ql=+i,this.tu=+e,this.su=+n,this.iu=+r,this.eu=+h,this.nu=+o}ru(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}_(t){this.Yl=t.Yl,this.Zl=t.Zl,this.Ql=t.Ql,this.tu=t.tu,this.su=t.su,this.iu=t.iu,this.eu=t.eu,this.nu=t.nu}equals(t){return this.Yl===t.Yl&&this.Zl===t.Zl&&this.Ql===t.Ql&&this.tu===t.tu&&this.su===t.su&&this.iu===t.iu&&this.eu===t.eu&&this.nu===t.nu}hu(t){this.Yl=+t}eh(){return this.Yl}ou(t){this.Zl=+t}nh(){return this.Zl}au(t){this.Ql=+t}rh(){return this.Ql}lu(t){this.tu=+t}hh(){return this.tu}uu(t){this.su=+t}oh(){return this.su}cu(t){this.iu=+t}ah(){return this.iu}fu(t){this.eu=+t}lh(){return this.eu}du(t){this.nu=+t}uh(){return this.nu}pu(){return new DOMQuad(new DOMPoint(this.Yl,this.Zl),new DOMPoint(this.Ql,this.tu),new DOMPoint(this.su,this.iu),new DOMPoint(this.eu,this.nu))}static mu(t){return Rt.hr(Rt.Kl,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Yl,this.Zl,this.Ql,this.tu,this.su,this.iu,this.eu,this.nu]}aa(){return new Float64Array(this.toArray())}la(t,s){t[s++]=this.Yl,t[s++]=this.Zl,t[s++]=this.Ql,t[s++]=this.tu,t[s++]=this.su,t[s++]=this.iu,t[s++]=this.eu,t[s]=this.nu}gu(t,s,i){t[s++]=this.Yl,t[s++]=this.Zl,t[s++]=i,t[s++]=this.Ql,t[s++]=this.tu,t[s++]=i,t[s++]=this.su,t[s++]=this.iu,t[s++]=i,t[s++]=this.eu,t[s++]=this.nu,t[s]=i}offset(t,s){s=+s,this.Yl+=t=+t,this.Zl+=s,this.Ql+=t,this.tu+=s,this.su+=t,this.iu+=s,this.eu+=t,this.nu+=s}round(){this.Yl=Math.round(this.Yl),this.Zl=Math.round(this.Zl),this.Ql=Math.round(this.Ql),this.tu=Math.round(this.tu),this.su=Math.round(this.su),this.iu=Math.round(this.iu),this.eu=Math.round(this.eu),this.nu=Math.round(this.nu)}floor(){this.Yl=Math.floor(this.Yl),this.Zl=Math.floor(this.Zl),this.Ql=Math.floor(this.Ql),this.tu=Math.floor(this.tu),this.su=Math.floor(this.su),this.iu=Math.floor(this.iu),this.eu=Math.floor(this.eu),this.nu=Math.floor(this.nu)}ceil(){this.Yl=Math.ceil(this.Yl),this.Zl=Math.ceil(this.Zl),this.Ql=Math.ceil(this.Ql),this.tu=Math.ceil(this.tu),this.su=Math.ceil(this.su),this.iu=Math.ceil(this.iu),this.eu=Math.ceil(this.eu),this.nu=Math.ceil(this.nu)}yu(t){this.Yl=t.ol,this.Zl=t.al,this.Ql=t.ll,this.tu=t.al,this.su=t.ll,this.iu=t.ul,this.eu=t.ol,this.nu=t.ul}wu(t,s){0===s?this.yu(t):this.Su(t,Math.sin(s),Math.cos(s))}Su(t,s,i){const e=t.ol*s,n=t.al*s,r=t.ll*s,h=t.ul*s,o=t.ol*i,a=t.al*i,l=t.ll*i,u=t.ul*i;this.Yl=o-n,this.Zl=a+e,this.Ql=l-n,this.tu=a+r,this.su=l-h,this.iu=u+r,this.eu=o-h,this.nu=u+e}bu(t){t.set(Math.min(this.Yl,this.Ql,this.su,this.eu),Math.min(this.Zl,this.tu,this.iu,this.nu),Math.max(this.Yl,this.Ql,this.su,this.eu),Math.max(this.Zl,this.tu,this.iu,this.nu))}Jl(t,s){let i=this.Ql-this.Yl,e=this.tu-this.Zl,n=this.su-this.Yl,r=this.iu-this.Zl,h=t-this.Yl,o=s-this.Zl,a=i*i+e*e,l=i*n+e*r,u=i*h+e*o,c=n*n+r*r,f=n*h+r*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return 0<=p&&0<m&&p+m<1||(m=((a=(i=this.eu-this.Yl)*i+(e=this.nu-this.Zl)*e)*f-(l=i*n+e*r)*(u=i*h+e*o))*(d=1/(a*c-l*l)),0<=(p=(c*u-l*f)*d)&&0<m&&p+m<1)}Cl(){return(this.Yl+this.Ql+this.su+this.eu)/4}El(){return(this.Zl+this.tu+this.iu+this.nu)/4}vu(t,s,i,e){return!(!this.Jl(t,s)&&!this.Jl(i,e))||Rt.ih(t,s,i,e,this)}Mu(t){let s=t.Cl(),i=t.El();if(this.Jl(s,i))return!0;if(s=this.Cl(),i=this.El(),t.Jl(s,i))return!0;const e=this.Yl,n=this.Zl,r=this.Ql,h=this.tu,o=this.su,a=this.iu,l=this.eu,u=this.nu;return Rt.ih(e,n,r,h,t)||Rt.ih(r,h,o,a,t)||Rt.ih(o,a,l,u,t)||Rt.ih(l,u,e,n,t)}xu(){const t=this.Yl,s=this.Zl;this.Yl=this.Ql,this.Zl=this.tu,this.Ql=this.su,this.tu=this.iu,this.su=this.eu,this.iu=this.nu,this.eu=t,this.nu=s}Gu(){this.Tu(0,2),this.Tu(1,3),this.Tu(6,4),this.Tu(7,5)}_u(){this.Tu(0,6),this.Tu(1,7),this.Tu(2,4),this.Tu(3,5)}Iu(){this.Tu(2,6),this.Tu(3,7)}Tu(t,s){const i=this.Cu(t);this.Eu(t,this.Cu(s)),this.Eu(s,i)}Cu(t){switch(t){case 0:return this.Yl;case 1:return this.Zl;case 2:return this.Ql;case 3:return this.tu;case 4:return this.su;case 5:return this.iu;case 6:return this.eu;case 7:return this.nu;default:throw new RangeError("invalid quad point index")}}Eu(t,s){switch(s=+s,t){case 0:this.Yl=s;break;case 1:this.Zl=s;break;case 2:this.Ql=s;break;case 3:this.tu=s;break;case 4:this.su=s;break;case 5:this.iu=s;break;case 6:this.eu=s;break;case 7:this.nu=s;break;default:throw new RangeError("invalid quad point index")}}}}{const At=self.Os,Ft=[0,0,1,0,1,1,0,1],Dt=At.hr(At.Kl);At.Pu=class extends At.nr{constructor(t,s=!0){super(),t=t||Ft,this.Ru=Float64Array.from(t),this.Au=new At.Rect,this.Fu=!0,this.Du=s}lr(){}Ou(){return this.Ru}ku(){return this.Ru.length/2}Lu(t){this.Ru.length===t.length?this.Ru.set(t):this.Ru=Float64Array.from(t),this.Fu=!0}Nu(){this.Lu(Ft)}_(t){this.Lu(t.Ru)}Bu(){this.Fu=!0}Wu(){if(this.Fu){let i=this.Ru,e=i[0],n=i[1],r=e,h=n;for(let t=0,s=i.length;t<s;t+=2){const o=i[t],a=i[t+1];o<e&&(e=o),o>r&&(r=o),a<n&&(n=a),a>h&&(h=a)}this.Au.set(e,n,r,h),this.Fu=!1}}yu(t,s,i){let e=this.Ru;8!==e.length&&(e=new Float64Array(8),this.Ru=e),e[0]=t.bl()-s,e[1]=t.vl()-i,e[2]=t.Ml()-s,e[3]=t.vl()-i,e[4]=t.Ml()-s,e[5]=t.xl()-i,e[6]=t.bl()-s,e[7]=t.xl()-i,this.Au._(t),0===s&&0===i||this.Au.offset(-s,-i),this.Fu=!1}ju(t,s,i){Dt._(t),Dt.offset(s,i),this.Lu(Dt.toArray()),this.Fu=!0}transform(t,s,i){let e=0,n=1;0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.Vu(t,s,e,n)}Vu(i,e,n,r){const h=this.Ru;for(let t=0,s=h.length;t<s;t+=2){const o=t+1,a=h[t]*i,l=h[o]*e;h[t]=a*r-l*n,h[o]=l*r+a*n}this.Fu=!0}offset(i,e){const n=this.Ru;for(let t=0,s=n.length;t<s;t+=2)n[t]+=i,n[t+1]+=e}Jl(i,e){const n=this.Ru;if(i===n[0]&&e===n[1])return!0;this.Wu();let t=this.Au,r=t.bl()-110,h=t.vl()-101,o=t.Ml()+131,a=t.xl()+120,l=0,u=0,c,f,d=0,p=0,m,g,y=(c=r<i?(l=r,i):(l=i,r),f=h<e?(u=h,e):(u=e,h),m=o<i?(d=o,i):(d=i,o),g=a<e?(p=a,e):(p=e,a),0),w=0;for(let t=0,s=n.length;t<s;t+=2){const S=(t+2)%s,b=n[t],v=n[t+1],M=n[S],x=n[1+S];At.th(r,h,i,e,l,c,u,f,b,v,M,x)&&++y,At.th(o,a,i,e,d,m,p,g,b,v,M,x)&&++w}return y%2==1||w%2==1}Hu(t,c,f){const d=t.Ru,p=this.Ru;if(this.Jl(d[0]+c,d[1]+f))return!0;if(t.Jl(p[0]-c,p[1]-f))return!0;for(let s=0,u=p.length;s<u;s+=2){let t=(s+2)%u,i=p[s],e=p[s+1],n=p[t],r=p[1+t],h=0,o=0,a,l;a=i<n?(h=i,n):(h=n,i),l=e<r?(o=e,r):(o=r,e);for(let t=0,s=d.length;t<s;t+=2){const m=(t+2)%s,g=d[t]+c,y=d[t+1]+f,w=d[m]+c,S=d[1+m]+f;if(At.th(i,e,n,r,h,a,o,l,g,y,w,S))return!0}}return!1}vu(i,e,n,r,h,o){if(this.Jl(n-i,r-e))return!0;if(this.Jl(h-i,o-e))return!0;let a=0,l=0,u,c;u=n<h?(a=n,h):(a=h,n),c=r<o?(l=r,o):(l=o,r);const f=this.Ru;for(let t=0,s=f.length;t<s;t+=2){const d=(t+2)%s,p=f[t]+i,m=f[t+1]+e,g=f[d]+i,y=f[1+d]+e;if(At.th(n,r,h,o,a,u,l,c,p,m,g,y))return!0}return!1}Gu(i){const e=this.Ru;for(let t=0,s=e.length;t<s;t+=2)e[t]=2*i-e[t];this.Fu=!0}_u(i){const e=this.Ru;for(let t=0,s=e.length;t<s;t+=2){const n=t+1;e[n]=2*i-e[n]}this.Fu=!0}Iu(){const i=this.Ru;for(let t=0,s=i.length;t<s;t+=2){const e=t+1,n=i[t];i[t]=i[e],i[e]=n}this.Fu=!0}Uu(){let i=this.Ru,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t];return e/this.ku()}zu(){let i=this.Ru,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t+1];return e/this.ku()}Ju(){return this.Ru}qu(){return this.ku()}$u(){return this.Du}}}{const Ot=self.Os;Ot.Xu=class extends Ot.nr{constructor(t){if(super(),this.Ku=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}lr(){this.Yu(),this.Ku=null}Zu(){return 0===this.Ku.size}Yu(){const t=this.Ku;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){let e=this.Ku,n=e.get(t);n||(n=new Map,e.set(t,n)),n.set(s,i)}Qs(t,s){const i=this.Ku.get(t);return i&&i.get(s)}Zs(t,s){const i=this.Ku.get(t);return!!i&&i.has(s)}Qu(t,s){const i=this.Ku,e=i.get(t);if(!e)return!1;const n=e.delete(s);return n&&0===e.size&&i.delete(t),n}tc(t){const s=this.Ku,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[e,n]of s.entries())n.delete(t)&&0===n.size&&s.delete(e)}sc(){let t=0;for(const s of this.Ku.values())t+=s.size;return t}*values(){for(const t of this.Ku.values())yield*t.values()}*ic(){for(const[t,s]of this.Ku.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.Ku.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const kt=self.Os;kt.ec=class extends kt.nr{constructor(){super(),this.nc=new Set,this.rc=[],this.hc=!1}lr(){this.Yu()}Yu(){this.nc.clear(),kt.Nh(this.rc),this.hc=!1}oc(t){this.nc.has(t)||(this.nc.add(t),this.hc)||this.rc.push(t)}Zs(t){return this.nc.has(t)}Qu(t){this.nc.delete(t)&&(this.hc=!0)}sc(){return this.nc.size}Zu(){return 0===this.nc.size}ac(){return this.hc&&(this.lc(),this.hc=!1),this.rc}lc(){const t=this.rc;kt.Nh(t);for(const s of this.nc)t.push(s)}}}{const Lt=self.Os,Nt=new Map,Bt=new Map,Wt=new Map,jt=new Map,Vt=new Map,Ht=new Map,Ut=new Map,zt=new Map,Jt=new Map,qt=(Jt.set("linear","noease"),Jt.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),$t=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Xt=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),Kt=(self.uc=class ns{constructor(){}static cc(){return"default"}static fc(){return"noease"}static dc(t){return Xt.get(t)}static mc(s,...i){this.yc();let t,e=(s?(Wt.has(s)||Wt.set(s,new Map),[...(t=Wt.get(s)).keys()].filter(t=>!ns.wc(t,s)||ns.wc(t,s).transition.IsForAnyPurpose())):[...(t=Vt).keys()]).sort();return[...Bt.keys()].concat(e).filter(t=>!i.includes(t))}static Sc(){this.yc();const t=[...Vt.keys()];return t.sort(),[...Bt.keys()].concat(t)}static vc(){this.yc();const t=[...Vt.keys()];return t.sort(),t}static Mc(t){for(const s of qt){const i=self.lang("ui.bars.timeline.eases."+s);if(i===t)return!0}for(const e of $t){const n=self.lang("ui.bars.timeline.short-eases."+e);if(n===t)return!0}}static xc(t){return this.yc(),[...Bt.keys()].includes(t)}static Gc(t){const s=Jt.get(t);return s?Nt.get(s):ns.xc(t)?Nt.get(t):Ut.has(t)?Ut.get(t):void 0}static Tc(t){return this.yc(),zt.get(t)}static _c(t,s){this.yc();const i=ns.Gc(t);if(i)return i;if(s)return Wt.get(s).get(t);throw new Error("missing ease function")}static wc(t,s){this.yc();const i=jt.get(s);if(i)return i.get(t)}static Ic(t,s){this.yc();const i=ns.Gc(t);return!!i||!!Wt.get(s).get(t)}static Cc(t){this.yc();const s=ns.Gc(t);return s||Vt.get(t)}static Ec(t){return this.yc(),Ht.get(t)}static Pc(t){this.yc();const s=this.Sc();return s[t]}static Rc(t,s){this.yc();const i=this.mc(s);return i.indexOf(t)}static Ac(t){return this.Rc(t)}static yc(){0===Nt.size&&(this.Fc("default",()=>{}),this.Fc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.Fc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.Fc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.Fc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.Fc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.Fc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.Fc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.Fc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.Fc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.Fc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.Fc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.Fc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.Fc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.Fc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.Fc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.Fc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.Fc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.Fc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.Fc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Fc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.Fc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.Fc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.Fc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.Fc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.Fc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Fc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.Fc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Fc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.Fc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.Fc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.Fc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Dc("cubicbezier",this.Oc),this.Dc("spline",this.kc))}static Fc(t,s,i=!1){if("function"==typeof s)ns.Lc(t,s,"predefined");else{if(!Lt.ke(s))throw new Error("unexpected arguments");if(self.BuiltInTransition){const n=Lt.hr(self.BuiltInTransition,t,i);n.SetFromJson(s),ns.Lc(t,(t,s,i,e)=>n.Nc(t,s,i,e),"predefined"),zt.set(t,n)}else{const r=Lt.hr(Lt.Bc,[t,s.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);r.Wc(i),ns.Lc(t,(t,s,i,e)=>r.Nc(t,s,i,e),"predefined")}}}static Dc(t,s){ns.Lc(t,s,"private")}static jc(t,s,i,e){this.yc(),ns.Lc(t,s,"custom",i,e)}static Vc(t,s){if(!this.xc(t)&&![...Ut.keys()].includes(t)){const i=Wt.get(s),e=(i&&i.delete(t),jt.get(s));e&&e.delete(t)}}static Lc(t,s,i,e,n){switch(i){case"predefined":Nt.set(t,s),Bt.set(t,s);break;case"custom":if(e){Wt.has(e)||Wt.set(e,new Map),jt.has(e)||jt.set(e,new Map);const r=Wt.get(e),h=(r.set(t,s),jt.get(e));h.set(t,n)}else Vt.set(t,s),Ht.set(t,n);break;case"private":Nt.set(t,s),Ut.set(t,s);break;default:throw new Error("unexpected ease mode")}}static Hc(t,s,i,e){return 0===e?s:i*t/e+s}static Oc(t,s,i,e,n){const r=s,h=3*t*(i-s),o=3*t**2*(s+e-2*i),a=t**3*(n-s+3*i-3*e);return r+h+o+a}static kc(t,s,i,e,n,r,h,o,a,l){if(e===n&&r===h)return t;const u=es(t,s,e,r,o,l),c=Zt(i,n,h,a),f=Qt(i,n,h,a),d=ts(i,n,h,a);return ss(u,c,f,d)}static Uc(t,s,i,e){const n=[],r=Zt(t,s,i,e),h=Qt(t,s,i,e),o=ts(t,s,i,e);for(let t=0;t<Kt;++t){const a=ss(t*Yt,r,h,o);n.push(a)}return n}},11),Yt=1/(Kt-1),Zt=(t,s,i,e)=>e-3*i+3*s-t,Qt=(t,s,i,e)=>3*i-6*s+3*t,ts=(t,s,i,e)=>3*(s-t),ss=(t,s,i,e)=>((s*t+i)*t+e)*t,is=(t,s,i,e)=>3*s*t*t+2*i*t+e,es=(h,t,s,i,e,n)=>{if(1==h)return 1;let o=0,r=1,a=n[r],l=Kt-1;for(Kt;r!=l&&a<=h;)r++,a=n[r],o+=Yt;r--;let u=(h-(a=n[r]))/(n[r+1]-a),c=o+u*Yt,f=Zt(t,s,i,e),d=Qt(t,s,i,e),p=ts(t,s,i,e),m=is(c,f,d,p);if(0===m)return c;if(.01<=m){for(let t=0;t<4;++t){const g=ss(c,f,d,p)-h,y=is(c,f,d,p);c-=g/y}return c}{let s=o,i=o+Yt,e=0,n,r;do{c=s+(i-s)/2;let t=ss(c,f,d,p)-h;0<t?i=c:s=c,n=1e-7<Math.abs(t),r=++e<10}while(n&&r);return c}}}{let o=function(t){rs.ve(t)};o;const rs=self.Os;rs.zc=class{constructor(t){this.Jc=[],this.dr=t||"",this.qc=0}lr(){this.Yu(),this.Jc=null}$c(){return this.dr}Yu(){rs.Bh(this.Jc),this.qc=0}Xc(){return this.qc}Kc(t=Math.random()*this.Xc()){let s=0;for(const[i,e]of this.Jc)if(t<(s+=i))return e;return 0}Yc(t,s){o(s),this.qc+=t,this.Jc.push([t,s])}Zc(s,i){o(i);const e=0===s;for(let t=0;t<this.Jc.length;t++){const n=this.Jc[t],r=e||n[0]===s,h=n[1]===i;if(r&&h){this.Jc.splice(t,1),this.qc-=n[0];break}}}Qc(){return JSON.stringify(this.Jc)}static tf(t,s){const i=new rs.zc(s),e=JSON.parse(t);for(const n of e){const r=n[0],h=n[1];i.Yc(r,h)}return i}}}{let t=self.Os,i=0;t.if=class{constructor(t,s){this.ef=t,this.nf=s,this.rf=i++,this.ef.hf("runtime","screen-reader-text",{type:"create",id:this.rf,text:this.nf})}lr(){this.ef.hf("runtime","screen-reader-text",{type:"release",id:this.rf}),this.ef=null,this.nf="",this.rf=-1}lf(t){this.nf!==t&&(this.nf=t,this.ef.hf("runtime","screen-reader-text",{type:"update",id:this.rf,text:this.nf}))}}}{const hs=self.Os;hs.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.uf=!1,this.cf=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.cf)throw new Error(`cannot stop async event '${this.type}' propagation`);this.uf=!0}}}{const os=self.Os;os.Event.ff=class extends os.nr{constructor(t){super(),this.df=t,this.pf=[],this.mf=new Set,this.gf=[],this.yf=new Set,this.wf=0,this.Sf=[]}lr(){0<this.wf||(os.Nh(this.pf),this.mf.clear(),os.Nh(this.gf),this.yf.clear(),os.Nh(this.Sf),os.lr(this))}bf(t,s){this.vf()?this.Sf.push({Mf:"add",xf:t,capture:s}):s?this.mf.has(t)||(this.pf.push(t),this.mf.add(t)):this.yf.has(t)||(this.gf.push(t),this.yf.add(t))}Gf(t,s){this.vf()?this.Sf.push({Mf:"remove",xf:t,capture:s}):s?this.mf.has(t)&&(this.mf.delete(t),os.Uh(this.pf,t)):this.yf.has(t)&&(this.yf.delete(t),os.Uh(this.gf,t))}Tf(){return!this.pf.length&&!this.gf.length}vf(){return 0<this.wf}_f(){const t=new Set,s=new Set;for(const i of this.Sf)if("add"===i.Mf)this.bf(i.xf,i.capture),(i.capture?s:t).delete(i.xf);else{if("remove"!==i.Mf)throw new Error("invalid op");(i.capture?(this.mf.delete(i.xf),s):(this.yf.delete(i.xf),t)).add(i.xf)}os.qh(this.gf,t),os.qh(this.pf,s),os.Nh(this.Sf)}If(i){this.Cf();let e=!1;for(let t=0,s=this.pf.length;t<s;++t)if(this.pf[t](i),i.uf){e=!0;break}if(!e)for(let t=0,s=this.gf.length;t<s&&(this.gf[t](i),!i.uf);++t);return this.Ef(),!i.defaultPrevented}Pf(i){this.Cf();for(let t=0,s=this.pf.length;t<s;++t)this.pf[t](i);for(let t=0,s=this.gf.length;t<s;++t)this.gf[t](i);return this.Ef(),!0}Cf(){this.wf++}Ef(){this.wf--,0===this.wf&&0<this.Sf.length&&this._f()}Rf(t){t?this.Cf():this.Ef()}Af(i){let e=[];for(let s=0,t=this.pf.length;s<t;++s){let t=this.pf[s];e.push(os.Ff(()=>t(i)))}for(let s=0,t=this.gf.length;s<t;++s){let t=this.gf[s];e.push(os.Ff(()=>t(i)))}return Promise.all(e).then(()=>!i.defaultPrevented)}Df(i){const e=[];this.Cf();for(let t=0,s=this.pf.length;t<s;++t){const n=this.pf[t](i);n instanceof Promise&&e.push(n)}for(let t=0,s=this.gf.length;t<s;++t){const r=this.gf[t](i);r instanceof Promise&&e.push(r)}return this.Ef(),e.length?Promise.all(e).then(()=>!i.defaultPrevented):!i.defaultPrevented}async Of(t){return this.Df(t)}async kf(i){this.Cf();for(let t=0,s=this.pf.length;t<s;++t){const e=this.pf[t](i);e instanceof Promise&&await e}for(let t=0,s=this.gf.length;t<s;++t){const n=this.gf[t](i);n instanceof Promise&&await n}return this.Ef(),!i.defaultPrevented}*Lf(i){this.Cf();for(let t=0,s=this.pf.length;t<s;++t){const e=this.pf[t](i);os.Wo(e)&&(yield*e)}for(let t=0,s=this.gf.length;t<s;++t){const n=this.gf[t](i);os.Wo(n)&&(yield*n)}this.Ef()}}}{const as=self.Os;as.Event.Nf=class extends as.nr{constructor(){super(),this.Bf=new Map,this.Wf=!1}lr(){if(this.Wf)throw new Error("already released");this.jf(),this.Wf=!0,as.lr(this)}ur(){return this.Wf}jf(){if(this.Bf){for(let t of this.Bf.values())t.lr();this.Bf.clear()}}Vf(t,s){let i=this.Bf.get(t);return i||(s?(i=as.hr(as.Event.ff,t),this.Bf.set(t,i),i):null)}Hf(t){return this.Bf.has(t)}addEventListener(t,s,i){let e=this.Vf(t,!0);e.bf(s,!!i)}removeEventListener(t,s,i){let e=this.Vf(t,!1);e&&(e.Gf(s,!!i),e.Tf())&&this.Bf.delete(t)}dispatchEvent(t){const s=this.Vf(t.type,!1);return!s||(t.cancelable?s.If(t):s.Pf(t))}Uf(t){const s=this.Vf(t.type,!1);return s?(t.cf=!0,s.Af(t)):Promise.resolve(!0)}async zf(t){const s=this.Vf(t.type,!1);if(!s)return!0;this.Bf.delete(t.type),t.cf=!0;const i=await s.Af(t);return s.lr(),i}async Jf(t){const s=this.Vf(t.type,!1);return!s||s.Of(t)}qf(t){const s=this.Vf(t.type,!1);return!s||s.Df(t)}async $f(t){const s=this.Vf(t.type,!1);return!s||s.kf(t)}Xf(t){const s=this.Vf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.Lf(t)}Rf(t){for(const s of this.Bf.values())s.Rf(t)}}}{let r=function(t){c=l&&0===f?requestIdleCallback(s,{timeout:i}):setTimeout(s,0<f?1:t)},s=function(n){if(c=-1,u.length){let i=performance.now(),e=i,t=0,s;for(;h(u.shift()),e=performance.now(),++t,s=(e-i)/t*1.1,u.length&&(l&&0===f&&void 0!==n?s<n.timeRemaining():e-i+s<o););if(-1===c&&u.length){let t=e-i,s=Math.max(a-t,4);r(s)}}},h=function(s){let t;try{t=s.xf()}catch(t){return void s.reject(t)}s.resolve(t)},t=(r,s,h,self.Os),o=12,a=16,i=35,l="undefined"!=typeof requestIdleCallback,u=[],c=-1,f=0,n=t.ei.Zs("disable-asyncify");n&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),t.Ff=function(i){let e=null;return t.isDebug&&(e=t.ae()),new Promise((t,s)=>{u.push({xf:i,resolve:t,reject:s,stack:e}),n?h(u.pop()):-1===c&&r(a)})},t.Ff.Kf=function(t){if(t)++f;else if(--f<0)throw new Error("already turned off high throughput mode")}}{let t=function(){r=-1},s=function(){h=-1,o=-1;let i=Date.now();for(let s of a)if(s.Yf(i)){let t=s.Zf();(-1===o||t<o)&&(o=t)}else a.delete(s);if(-1!==o){let t=Math.max(o-i+n,e);h=self.setTimeout(s,t)}},i=(t,s,self.Os),e=1e3,n=100,r=-1,h=(i.Qf=function(){return-1===r&&(r=Date.now(),self.setTimeout(t,16)),r},-1),o=-1,a=new Set;i.t0=class{constructor(t,s){this.s0=t,this.i0=1e3*s,this.e0=0,this.n0=!1}r0(){let t=i.Qf();this.e0=t+this.i0,this.n0||(a.add(this),this.n0=!0),-1===h?(o=this.e0,h=self.setTimeout(s,this.i0+n)):this.e0<o&&o>t+e&&(self.clearTimeout(h),o=this.e0,h=self.setTimeout(s,this.i0+n))}Yf(t){return!(t>=this.e0)||(this.s0()?(this.e0=t+this.i0,!0):this.n0=!1)}Zf(){return this.e0}h0(){this.n0&&(a.delete(this),this.n0=!1,0===a.size)&&-1!==h&&(self.clearTimeout(h),h=-1,o=-1)}lr(){this.h0(),this.s0=null}}}{const ls=self.Os;ls.o0=class us{constructor(t){this.a0=!1,this.l0=t}u0(){this.a0||(this.a0=!0,this.l0&&(this.l0(),this.l0=null))}c0(){return this.a0}lr(){this.u0()}static lr(t){return new us(()=>t.lr())}static f0(s,i,e,n,t){if(null==n)n=!1;else if("boolean"!=typeof n&&"object"!=typeof n)throw new TypeError("invalid event listener options");if(t&&(e=e.bind(t)),i.includes(" ")){i=i.split(" ");const r=new ls.d0;for(let t of i)s.addEventListener(t,e,n),r.oc(ls.hr(ls.o0,()=>s.removeEventListener(t,e,n)));return r}return s.addEventListener(i,e,n),ls.hr(ls.o0,()=>s.removeEventListener(i,e,n))}},ls.p0=class extends ls.o0{m0(t){this.l0=t}},ls.d0=class extends ls.o0{constructor(...s){super(),this.g0=new Set;for(let t of s)this.oc(t)}oc(...s){if(this.a0)throw new Error("already disposed");for(let t of s)this.g0.add(t)}y0(t){if(this.a0)throw new Error("already disposed");this.g0.delete(t)}w0(){if(this.a0)throw new Error("already disposed");if(this.g0){for(let t of this.g0)t.u0();this.g0.clear()}}c0(){return this.a0}u0(){if(this.a0)throw new Error("already disposed");this.a0=!0;for(let t of this.g0)t.u0();this.g0.clear(),this.g0=null}lr(){this.u0()}}}{const cs=self.Os;cs.S0=class extends cs.nr{constructor(){super(),this.b0=0,this.Ya=0,this.v0=0,this.M0=0}oc(t){this.Ya=(t=+t)-this.b0,this.v0=this.M0+this.Ya,this.b0=this.v0-this.M0-this.Ya,this.M0=this.v0}x0(t){this.M0-=+t}Qs(){return this.M0}r0(){this.b0=0,this.Ya=0,this.v0=0,this.M0=0}Set(t){this.b0=0,this.Ya=0,this.v0=0,this.M0=+t}G0(t){this.b0=t.b0,this.Ya=t.Ya,this.v0=t.v0,this.M0=t.M0}lr(){}}}{const fs=self.Os,h={};h.T0=function(t){this._0=t,this.right=this._0.I0,this.left=this._0.I0,this.parent=null,this.color=!1,this.key=null},h.C0=function(t){this.size=0,this.I0=new h.T0(this),this.I0.color=!1,this.root=this.I0,this.root.parent=this.I0,this.compare=t||this.E0},h.C0.prototype.E0=function(t,s){return t<s?-1:s<t?1:0},h.C0.prototype.clone=function(){var t=new h.C0(this.compare);return t.P0(this),t},h.C0.prototype.clear=function(){this.size=0,this.I0=new h.T0(this),this.I0.color=!1,this.root=this.I0,this.root.parent=this.I0},h.C0.prototype.R0=function(t){var s=t.right;t.right=s.left,s.left!=this.I0&&(s.left.parent=t),s.parent=t.parent,t.parent==this.I0?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,(s.left=t).parent=s},h.C0.prototype.A0=function(t){var s=t.left;t.left=s.right,s.right!=this.I0&&(s.right.parent=t),s.parent=t.parent,t.parent==this.I0?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,(s.right=t).parent=s},h.C0.prototype.F0=function(t){if(this.contains(t))this.D0(t).key=t;else{for(var s=new h.T0(this),i=(s.key=t,this.I0),e=this.root;e!=this.I0;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;(s.parent=i)==this.I0?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.I0,s.right=this.I0,s.color=!0,this.O0(s),this.size++}},h.C0.prototype.O0=function(t){for(;t!=this.I0&&t!=this.root&&1==t.parent.color;){var s;t.parent==t.parent.parent.left?1==(s=t.parent.parent.right).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.R0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.I0&&this.A0(t.parent.parent)):1==(s=t.parent.parent.left).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.A0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.I0&&this.R0(t.parent.parent))}this.root.color=!1},h.C0.prototype.k0=function(t){var s=t.left==this.I0||t.right==this.I0?t:this.L0(t),i=s.left!=this.I0?s.left:s.right;i.parent=s.parent,s.parent==this.I0?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.N0(i),this.size--},h.C0.prototype.N0=function(t){for(;t!=this.root&&0==t.color;){var s;t=t==t.parent.left?(1==(s=t.parent.right).color&&(s.color=!1,t.parent.color=!0,this.R0(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=!0,t.parent):(0==s.right.color&&(s.left.color=!1,s.color=!0,this.A0(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.R0(t.parent),this.root)):(1==(s=t.parent.left).color&&(s.color=!1,t.parent.color=!0,this.A0(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=!0,t.parent):(0==s.left.color&&(s.right.color=!1,s.color=!0,this.R0(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.A0(t.parent),this.root))}t.color=!1},h.C0.prototype.remove=function(t){var s;return(t=this.D0(t))!=this.I0?(s=t.key,this.k0(t),s):null},h.C0.prototype.B0=function(t,s){this.remove(s)},h.C0.prototype.min=function(t){for(;t.left!=this.I0;)t=t.left;return t},h.C0.prototype.max=function(t){for(;t.right!=this.I0;)t=t.right;return t},h.C0.prototype.L0=function(t){if(t.right!=this.I0)return this.min(t.right);for(var s=t.parent;s!=this.I0&&t==s.right;)s=(t=s).parent;return s},h.C0.prototype.W0=function(t){if(t.left!=this.I0)return this.max(t.left);for(var s=t.parent;s!=this.I0&&t==s.left;)s=(t=s).parent;return s},h.C0.prototype.j0=function(t){if(0<this.size){var s=this.D0(t);if(s==this.I0)return null;if(s.right!=this.I0)return this.min(s.right).key;for(var i=s.parent;i!=this.I0&&s==i.right;)i=(s=i).parent;return i!=this.I0?i.key:null}return null},h.C0.prototype.V0=function(t){if(0<this.size){var s=this.D0(t);if(s==this.I0)return null;if(s.left!=this.I0)return this.max(s.left).key;for(var i=s.parent;i!=this.I0&&s==i.left;)i=(s=i).parent;return i!=this.I0?i.key:null}return null},h.C0.prototype.H0=function(){return this.min(this.root).key},h.C0.prototype.U0=function(){return this.max(this.root).key},h.C0.prototype.D0=function(t){for(var s=this.root;s!=this.I0&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},h.C0.prototype.contains=function(t){return null!=this.D0(t).key},h.C0.prototype.getValues=function(){var s=[];return this.forEach(function(t){s.push(t)}),s},h.C0.prototype.P0=function(t){if("array"==h.typeOf(t))for(var s=0;s<t.length;s++)this.F0(t[s]);else if("function"==h.typeOf(t.forEach))t.forEach(this.F0,this);else if("function"==h.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.F0(i[s]);else if("object"==h.typeOf(t))for(var e in t)this.F0(t[e])},h.C0.prototype.z0=function(t){if("array"==h.typeOf(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==h.typeOf(t.forEach))t.forEach(this.B0,this);else if("function"==h.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.remove(i[s]);else if("object"==h.typeOf(t))for(var e in t)this.remove(t[e])},h.C0.prototype.J0=function(t){if("array"==h.typeOf(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==h.typeOf(t.forEach))return t.every(this.contains,this);if("function"==h.typeOf(t.getValues)){for(var i=t.getValues(),s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==h.typeOf(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},h.C0.prototype.range=function(t,s){var i=[];return this.q0(function(t){i.push(t)},t,s),i},h.C0.prototype.$0=function(t,s){if(!this.X0())for(var i=this.min(this.root);i!=this.I0;){if(t.call(s,i.key,this))return;i=this.L0(i)}},h.C0.prototype.K0=function(t,s,i){if(!this.X0())for(var e=this.D0(s);e!=this.I0;){if(t.call(i,e.key,this))return;e=this.L0(e)}},h.C0.prototype.Y0=function(t,s,i){if(!this.X0())for(var e=this.min(this.root),n=this.D0(s);e!=n;){if(t.call(i,e.key,this))return;e=this.L0(e)}},h.C0.prototype.q0=function(t,s,i,e){if(!this.X0())for(var n=this.D0(s),r=this.D0(i);n!=r;){if(t.call(e,n.key,this))return;n=this.L0(n)}},h.C0.prototype.Z0=function(t,s){if(!this.X0())for(var i=this.max(this.root);i!=this.I0;){if(t.call(s,i.key,this))return;i=this.W0(i)}},h.C0.prototype.forEach=function(t,s){if(!this.X0())for(var i=this.min(this.root);i!=this.I0;i=this.L0(i))t.call(s,i.key,i.key,this)},h.C0.prototype.some=function(t,s){if(!this.X0())for(var i=this.min(this.root);i!=this.I0;i=this.L0(i))if(t.call(s,i.key,i.key,this))return!0;return!1},h.C0.prototype.every=function(t,s){if(this.X0())return!1;for(var i=this.min(this.root);i!=this.I0;i=this.L0(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},h.C0.prototype.map=function(t,s){var i=[];if(!this.X0())for(var e=this.min(this.root);e!=this.I0;e=this.L0(e))i.push(t.call(s,e.key,e.key,this));return i},h.C0.prototype.filter=function(t,s){var i=[];if(!this.X0())for(var e=this.min(this.root);e!=this.I0;e=this.L0(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},h.C0.prototype.getCount=function(){return this.size},h.C0.prototype.X0=function(){return 0==this.size},h.C0.prototype.isSubsetOf=function(t){var s=h.getCount(t);if(this.getCount()>s)return!1;var i=0;if(this.X0())return!0;for(var e=this.min(this.root);e!=this.I0;e=this.L0(e))h.contains.call(t,t,e.key)&&i++;return i==this.getCount()},h.C0.prototype.intersection=function(t){var s=new h.C0(this.compare);if(!this.X0())for(var i=this.min(this.root);i!=this.I0;i=this.L0(i))t.contains.call(t,i.key,i.key,this)&&s.F0(i.key);return s},fs.C0=class extends fs.nr{constructor(t){super(),this.Q0=new h.C0(t),this.td=!1,this.sd=new Set,this.ed=new Set}oc(t){this.td?this.Q0.contains(t)?this.ed.delete(t):this.sd.add(t):this.Q0.F0(t)}y0(t){this.td?this.Q0.contains(t)?this.ed.add(t):this.sd.delete(t):this.Q0.remove(t)}Zs(t){return this.td?!!this.sd.has(t)||!this.ed.has(t)&&this.Q0.contains(t):this.Q0.contains(t)}Yu(){this.Q0.clear(),this.sd.clear(),this.ed.clear()}toArray(){if(this.td)throw new Error("cannot be used in queueing mode");return this.Q0.getValues()}sc(){return this.Q0.getCount()+this.sd.size-this.ed.size}Zu(){return 0===this.sc()}nd(){if(this.Zu())throw new Error("empty set");if(this.td)throw new Error("cannot be used in queueing mode");const t=this.Q0,s=t.min(t.root);return s.key}rd(){if(this.Zu())throw new Error("empty set");if(this.td)throw new Error("cannot be used in queueing mode");const t=this.nd();return this.y0(t),t}hd(t){if(this.td!==(t=!!t)&&!(this.td=t)){for(const s of this.ed)this.Q0.remove(s);this.ed.clear();for(const i of this.sd)this.Q0.F0(i);this.sd.clear()}}od(t){this.Q0.forEach(t)}*values(){if(!this.Zu()){const s=this.Q0;for(let t=s.min(s.root);t!=s.I0;t=s.L0(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const ds=self.Os;ds.ad=class{constructor(t=ds.hardwareConcurrency){this.ld=t,this.ud=[],this.fd=0}oc(i){return new Promise((t,s)=>{this.ud.push({xf:i,resolve:t,reject:s}),this.dd()})}pd(i){for(let t=0,s=this.ud.length;t<s;++t)if(this.ud[t].xf===i)return t;return-1}md(t,s){const i=this.pd(t);if(-1===i)throw new Error("cannot find promise to resolve");this.ud[i].resolve(s),this.ud.splice(i,1)}gd(t,s){const i=this.pd(t);if(-1===i)throw new Error("cannot find promise to reject");this.ud[i].reject(s),this.ud.splice(i,1)}async dd(){if(this.ud.length&&!(this.fd>=this.ld)){this.fd++;const s=this.ud.shift();try{const t=await s.xf();s.resolve(t)}catch(t){s.reject(t)}this.fd--,this.dd()}}static async yd(t,s){let i=[],e=!1,n=[];for(;t--;)n.push((async()=>{let t;for(;t=s.pop();){if(e)return;try{i.push(await t())}catch(t){throw e=!0,t}}})());return await Promise.all(n),i}}}{const ps=self.Os;ps.wd=class{constructor(t,s,i){this.s0=t,this.Sd=s,this.bd=i||2*s,this.vd=-1,this.Md=-1/0,this.xd=()=>this.Gd(),this.Td=!1,this._d=!1,this.Id=null}Cd(t){this._d=!!t}Ed(){return void 0!==ps.Battery&&ps.Battery.IsOnBatteryPower()?this.bd:this.Sd}Pd(...e){if(-1===this.vd){this.Id=e;let t=ps.Qf(),s=t-this.Md,i=this.Ed();i<=s&&this._d?(this.Md=t,this.Rd()):this.vd=self.setTimeout(this.xd,Math.max(i-s,4))}}Rd(){this.Td=!0;const t=this.Id;this.Id=null,t?this.s0(...t):this.s0(),this.Td=!1}r0(){this.Td||(this.Ad(),this.Id=null,this.Md=ps.Qf())}Gd(){this.vd=-1,this.Md=ps.Qf(),this.Rd()}Ad(){-1!==this.vd&&(self.clearTimeout(this.vd),this.vd=-1)}lr(){this.Ad(),this.s0=null,this.Id=null,this.xd=null}}}{const ms=self.Os;ms.Fd=class{constructor(){this.Dd=new Map,this.Od=!1,this.kd=null,this.Ld=null,this.Nd=null,this.Bd=null}Wd(t){this.Od=!!t}jd(){return this.Od}Vd(t){this.kd=t}Hd(t){if(this.kd)return this.kd(t);throw new Error("no get base size callback set")}Ud(t){this.Ld=t}zd(t,s,i,e,n,r){if(this.Ld)return this.Ld(t,s,i,e,n,r);throw new Error("no raster at size callback set")}Jd(t){this.Nd=t}qd(t){if(!this.Nd)throw new Error("no release result callback set");this.Nd(t)}$d(t){this.Bd=t}Xd(){if(!this.Bd)throw new Error("no redraw callback set");this.Bd()}Kd(t){let s=this.Dd.get(t);return s||(s=ms.hr(ms.Yd,this,t),this.Dd.set(t,s)),s.Zd(),s}Qd(t){this.Dd.delete(t.t1())}s1(){for(const t of this.Dd.values())t.i1(),t.e1()}}}{const gs=self.Os;gs.Yd=class{constructor(t,s){this.n1=t,this.h1=s,this.o1=0,this.a1=0,this.l1=0,this.u1=this.n1.Hd(s).then(t=>{this.n1&&(this.a1=t[0],this.l1=t[1],this.n1.Xd())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.c1=!0,this.n1&&this.n1.Xd()}),this.f1=0,this.d1=0,this.m1=0,this.g1=0,this.w1=!1,this.S1=null,this.b1=!1,this.c1=!1}lr(){if(this.o1<=0)throw new Error("already released");this.o1--,0===this.o1&&this.v1()}i1(){this.S1&&(this.n1.qd(this.S1),this.S1=null)}v1(){this.i1(),this.n1.Qd(this),this.n1=null}t1(){return this.h1}Zd(){this.o1++}M1(){return 0<this.o1}G1(){return this.S1}e1(){this.b1=!0}async T1(e,n,r){if(0!==n&&0!==r&&!this.c1&&!this.w1){let t=gs.Br(Math.ceil(n)),s=gs.Br(Math.ceil(r)),i=Math.max(t,s);if(4096<i){const h=4096/i;n*=h,r*=h,t=Math.min(Math.ceil(t*h),4096),s=Math.min(Math.ceil(s*h),4096)}if(n<t&&r<s){const o=n/r,a=t/s;r=o<a?(n=s*o,s):(n=t)/o}if(this.n1.jd()&&(t=Math.ceil(n),s=Math.ceil(r)),!(t<=this.f1&&s<=this.d1)||this.b1){this.w1=!0,this.f1=t,this.d1=s;const l=await this.n1.zd(this.h1,e,this.f1,this.d1,n,r);this.n1&&(this.i1(),this.S1=l,this.m1=n,this.g1=r,this.w1=!1,this.b1=!1,this.n1.Xd())}}}_1(){return this.u1}I1(){return this.a1}C1(){return this.l1}E1(){return this.m1}P1(){return this.g1}R1(){return this.c1}}}{let s=function(t){return bs.get(t)};s;const c=self.Os,ys=(c.A1="\ufeff",new Set("0123456789")),ws=(c.F1=function(t){return ys.has(t)},new Set(" \t\n\r            ​\u2028\u2029  　"));c.D1=function(t){return ws.has(t)},c.O1=function(t){return[...t].filter(t=>!c.D1(t)).join("")},c.L1=function(t){for(const s of t)if(!c.D1(s))return!1;return!0},c.N1=function(t){for(const s of t)if(!c.D1(s))return!1;return!0},c.B1=function(t){return 1===t.length&&t.charCodeAt(0)<32},c.W1=function(t){return[...t].filter(t=>!c.B1(t)).join("")};let i=null;try{i=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}c.j1=function(t){return!c.D1(t)&&i&&i.test(t)};const Ss=new Set("0123456789.+-e"),bs=(c.V1=function(s){if(!(s=s.trim()).length)return!1;let t=s.charAt(0);if("-"!==t&&!ys.has(t))return!1;for(let t of s)if(!Ss.has(t))return!1;return!0},c.H1=function(s){let i=s.length;for(;0<i;){let t=s.charAt(i-1);if(!c.F1(t))break;--i}return s.substr(0,i)},c.U1=function(t){let s=c.H1(t),i=t.substr(s.length);return s+(i?(parseInt(i,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),vs=/[&<>"']/g,Ms=(c.z1=function(t){return t.replace(vs,s)},c.J1=function(t){let s=c.q1(t,"\\","\\\\");return s=c.q1(s,'"','\\"'),s=c.q1(s,"\t","\\t"),s=c.q1(s,"\r",""),c.q1(s,"\n","\\n")},c.X1=function(t){let s=c.q1(t,"&","&amp;");return s=c.q1(s,"<","&lt;"),s=c.q1(s,">","&gt;"),c.q1(s,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),xs=(c.oe=function(t){return t.replace(Ms,"\\$&")},c.K1=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},c.Y1=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());let e=s.length,n=0,r,h=[];for(;-1<(r=t.indexOf(s,n));)h.push(r),n=r+e;return h},c.q1=function(t,s,i){return t.replaceAll(s,()=>i)},c.Z1=function(t,s,i){return t.replace(new RegExp(c.oe(s),"gi"),()=>i)},c.Q1=function(t,s){"string"==typeof s?t.textContent=s:s.tp()?t.textContent=s.toString():(t.innerHTML=s.ip(),s instanceof c.Cn&&s.ep(t))},c.np=function(t,s){return t instanceof c.HtmlString||t instanceof c.Cn?t.equals(s):s instanceof c.HtmlString||s instanceof c.Cn?s.equals(t):t===s},c.rp=function(i,...e){let n=i;for(let t=0,s=e.length;t<s;++t){const r=`{${t}}`;if(!i.includes(r))throw new Error(`missing placeholder '${r}' in string substitution`);n=n.replace(r,e[t].toString())}return n},c.hp=function(i,...e){let n=i,r=-1,h=-1;for(let t=0,s=e.length;t<s;++t){const o=`{${t}}`;i.includes(o)?(h=t,n=n.replace(o,e[t].toString())):-1===r&&(r=t)}if(0<=r&&0<=h&&r<h)throw new Error(`missing placeholder '${r}' in string substitution`);return n},c.op=function(t,i){let e=t;for(let[t,s]of Object.entries(i))e=e.replaceAll(t,s.toString());return e},c.lp=function(t,s){return s<t?1:t<s?-1:0},c.up=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return e<i?1:i<e?-1:0},new self.Intl.Segmenter),Gs=(c.cp=function(t){const s=[];for(const i of xs.segment(t))s.push(i.segment);return s},c.fp=function*(t){for(const s of xs.segment(t))yield s.segment},c.pp=function(t){let s=0;for(const i of xs.segment(t))++s;return s},1073741824),Ts=1024*Gs,_s={mp:!(c.gp=function(s,t){let i="common."+(t?"dataRates":"dataSizes")+".",e=self.langSub;if(s<1024)return e(i+"bytes",s);if(s<1048576){let t=s/1024;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"kilobytes",t)}if(s<Gs){let t=s/1048576;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"megabytes",t)}if(s<Ts){let t=s/Gs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"gigabytes",t)}{let t=s/Ts;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"terabytes",t)}}),yp:!0,wp:!0,Sp:!0,bp:!0};c.vp=function(t,s){s=Object.assign({},_s,s),c.Lang.PushContext("common.time");const i=[],e=self.lang,n=self.langPluralSub;if(s.yp){const h=Math.floor(t/86400);0<h&&(t-=24*h*3600,i.push(n(".days",null,h)))}if(s.wp){const o=Math.floor(t/3600);(0<o||i.length)&&(t-=3600*o,i.push(n(".hours",null,o)))}if(s.Sp){const a=Math.floor(t/60);(0<a||i.length||!s.bp)&&(t-=60*a,i.push(n(".minutes",null,a)))}if(s.bp){const l=Math.floor(t%60);i.push(n(".seconds",null,l))}const r=(s.mp?e(".approx-prefix"):"")+i.join(e(".separator"));return c.Lang.PopContext(),r},c.Mp=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),n=s-e.length;for(let t=0;t<n;++t)i+="0";return i+e},c.xp=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},c.Gp=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());c.jh(i,4,"0"),c.jh(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const n=i[t]-e[t];if(0!=n)return n<0?-1:1}return 0},c.Tp=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random()),i="x"===t?s:3&s|8;return i.toString(16)})},c._p=function(i,e){if(i.length!==e.length)throw new Error("strings must be same length");let n=0;for(let t=0,s=i.length;t<s;++t)i.charAt(t)!==e.charAt(t)&&++n;return n},c.Ip=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,n,r,h,o;for(s.length<t.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,n=1;n<=t.length;n++)h=s[e-1]===t[n-1]?o[n-1]:Math.min(o[n-1]+1,Math.min(r+1,o[n]+1)),o[n-1]=r,r=h;o[t.length]=r}return o[t.length]}}{let s=function(t,i,e){const n=o.get(e);if(!n)return"class"===e?i?"</span>":`<span class="bbclass${u++}">`:t;if("string"==typeof n){if("a"===n&&0===a.length||"abbr"===n&&0===l.length)return t;if("a"!==n||i){if("abbr"!==n||i)return"<"+i+n+">";{const r=parseInt(e.substring(3),10)-1;if(r<0||r>=l.length)throw new Error("invalid bbcode tip substitution");let t=l[r],s="";if("string"==typeof t?s=t:"function"==typeof t&&(s=t()),"string"!=typeof s)throw new TypeError("invalid bbcode tip");return`<abbr title="${f.q1(s,'"',"&quot;")}">`}}{const s=parseInt(e.substring(1),10)-1;if(s<0||s>=a.length)throw new Error("invalid bbcode link substitution");const h=a[s];if("string"==typeof h)return`<a href="${a[s]}">`;if("function"==typeof h)return`<a class="bblink${s}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(n)){let t=n[0],s=n[1];return i?"</"+t+">":`<${t} class="${s}">`}},f=(s,self.Os),o=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),d=new Set(["icon"]),i=/\[(\/?)([a-zA-Z0-9]+)\]/g,p=/\[(\/?)([^\[\n]*?)\]/g,a=null,l=null,u=0,e=/\n/g;f.Cn=class{constructor(t,s){if(this.Cp=s&&s.Ep?t:f.z1(t),this.Pp="",this.Rp=!1,this.Ap=[],this.Fp=[],s){if(this.Rp=!!s.convertLineBreaks,s.links){if(9<s.links.length)throw new Error("too many links");this.Ap=s.links}if(s.tips){if(9<s.tips.length)throw new Error("too many tips");this.Fp=s.tips}}this.Dp=this.Cp.includes("["),this.Op=this.Rp&&this.Cp.includes("\n"),this.kp=!this.Dp&&!this.Op&&!this.Cp.includes("&"),this.Lp=!1,this.Np=[]}toString(){return this.Cp}valueOf(){return this.Cp}tp(){return this.kp}Bp(){return this.Dp?this.Cp.replace(i,""):this.Cp}ip(){if(this.kp)return this.Cp;if(!this.Pp&&this.Cp){let t=this.Cp;this.Dp&&(u=0,a=this.Ap,l=this.Fp,t=t.replace(i,s),a=null,l=null),this.Op&&(t=t.replace(e,"<br>")),this.Pp=t}return this.Pp}ep(i){if(this.Ap.length)for(let t=0,s=this.Ap.length;t<s;++t){const e=this.Ap[t];if("function"==typeof e){const n=i.querySelector(".bblink"+t);if(!n)throw new Error("unable to attach BBString link handler");n.onclick=e}}}equals(t){return t instanceof f.HtmlString?this.ip()===t.ip():t instanceof f.Cn?this.Cp===t.Cp:this.Cp===t}Wp(){if(!this.Lp){let e=[],t=this.Cp,n=[],s=p.lastIndex=0,i;for(;null!==(i=p.exec(t));){const r=i.index;if(!(0<r&&"\\"===t.charAt(r-1))){const h=i[0],o=i[1],a=i[2],l=t.substring(s,r);if(s=r+h.length,l&&e.push({text:l,jp:n.slice(0)}),a)if(o){const u=a.toLowerCase();for(let t=n.length-1;0<=t;--t)if(n[t].tag===u){n.splice(t,1);break}}else{let t=a,s=null,i=a.indexOf("=");if(-1!==i?(t=a.substring(0,i).toLowerCase(),s=a.substring(i+1)):t=t.toLowerCase(),d.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);e.push({icon:s,jp:n.slice(0)})}else n.push({tag:t,Vp:s})}}}s<t.length&&e.push({text:t.substring(s),jp:n.slice(0)});for(const c of e)c.text&&(c.text=this.Hp(c.text));this.Np=e.map(t=>t.icon?f.hr(f.Up,{icon:t.icon,jp:t.jp}):f.hr(f.zp,{Jp:f.cp(t.text),jp:t.jp})),this.Lp=!0}return this.Np}Hp(t){return t=f.q1(t,"\\[","["),f.q1(t,"\\\\","\\")}static qp(t){return f.hr(f.Cn,t,{Ep:!0}).Bp()}static $p(t){return t.replace(p,"")}}}{let l=function(t){return" "!==t&&" "!==t&&w.D1(t)},a=function(t){return Is.has(t)},u=function(t){return w.j1(t)&&!a(t)},c=function(t){for(;0<t.length&&l(t.at(-1));)t.pop()},y=function(t){return"\n"===t||"\r\n"===t};l,a,u,c,y;const w=self.Os,Is=new Set("〈《「『【〔〖〘〚〝");w.Xp=class{constructor(){this.Kp=[],this.Yp=null}Zp(){return this.Kp}Qp(){return this.Kp.length}tm(t){this.Yp=t}im(t,s){let i=0,e=0,n=0,r=0,h=0;for(const o of t){if(-1===o.nm()){const a=s(o);o.rm(a.height),o.hm(a.fontBoundingBoxAscent||0),o.om(a.fontBoundingBoxDescent||0),o.am(a.lm||0),o.um()?o.fm(a.width):o.dm()&&o.pm(this.Yp)}i+=o.nm(),e=Math.max(e,o.gm()),n=Math.max(n,o.ym()),r=Math.max(r,o.wm()),h=Math.max(h,o.Sm())}return{width:i,height:e,fontBoundingBoxAscent:n,fontBoundingBoxDescent:r,lm:h}}vm(t,s,i,e,n,r){this.Kp.push(w.hr(w.Xp.Mm,{xm:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:n,lm:r}))}Xp(s,r,h,i,o){if("string"==typeof s&&(s=[w.hr(w.zp,{Jp:w.cp(s)})]),w.Nh(this.Kp),!(!s.length||1===s.length&&s[0].um()&&s[0].Zu()||h<2)){if(1===s.length){const a=s[0];if(a.um()&&a.Gm()<=100&&!a.Tm()){let{width:t,height:s,fontBoundingBoxAscent:i,fontBoundingBoxDescent:e,lm:n}=r(a);if(t+=o,a.fm(t),a.rm(s),a.hm(i||0),a.om(e||0),a.am(n||0),t<=h)return void this.vm([a],t,s,i,e,n)}}let t;t="word"===i?this._m(s):"cjk"===i?this.Im(s):this.Cm(s),this.Em(t,r,h,o)}}_m(t){let s=[],i=[],e=!1;for(const n of t){const r=n.Pm();if(n.dm())0<i.length&&s.push(i),s.push([n]),i=[];else for(const h of n.Rm())if(y(h))0<i.length&&s.push(i),s.push([w.hr(w.zp,{Jp:["\n"],jp:r})]),i=[];else if(0===i.length)i.push(w.hr(w.zp,{Jp:[h],jp:r})),e=l(h);else{const o=l(h);if(o===e){const a=i.at(-1);a.Pm()===r?a.Am(h):i.push(w.hr(w.zp,{Jp:[h],jp:r}))}else s.push(i),i=[w.hr(w.zp,{Jp:[h],jp:r})],e=o}}return 0<i.length&&s.push(i),s}Im(t){let s=[],i=[],e=!1;for(const n of t){const r=n.Pm();if(n.dm())0<i.length&&s.push(i),s.push([n]),i=[];else for(const h of n.Rm())if(y(h))0<i.length&&s.push(i),s.push([w.hr(w.zp,{Jp:["\n"],jp:r})]),i=[];else{if(0===i.length)i.push(w.hr(w.zp,{Jp:[h],jp:r}));else if(e||u(h)){const o=i.at(-1);o.Pm()===r?o.Am(h):i.push(w.hr(w.zp,{Jp:[h],jp:r}))}else s.push(i),i=[w.hr(w.zp,{Jp:[h],jp:r})];e=a(h)}}return 0<i.length&&s.push(i),s}Cm(t){const s=[];for(const i of t)if(i.um()){const e=i.Rm();w.$n(s,e.map(t=>[w.hr(w.zp,{Jp:[t],jp:i.Pm()})]))}else s.push([i]);return s}Fm(t){return t.map(t=>t.Dm())}Om(s,i){let t=s.length?s.at(-1):null,e=0;t&&t.um()&&i[0].um()&&i[0].Pm()===t.Pm()&&(t.km(i[0].Rm()),e=1);for(let t=i.length;e<t;++e){const n=i[e];s.push(n.Dm())}}Em(t,s,i,e){let n=[],r=0,h=0,o=0,a=0,l=0;for(const u of t)if(1===u.length&&u[0].um()&&1===u[0].Gm()&&y(u[0].Rm()[0])){if(0===h){const c=w.hr(w.zp,{Jp:[" "],jp:u[0].Pm()}),f=s(c);h=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,l=f.lm||0}this.vm(n,r,h,o,a,l),n=[],r=0,h=0,o=0,a=0,l=0}else{const d=this.Fm(n),p=(this.Om(d,u),this.im(d,s)),m=p.width;if(i<=m)if(0<n.length&&this.vm(n,r,h,o,a,l),n=[],u[0].um()&&w.N1(u[0].Rm()))r=0,h=0,o=0,a=0,l=0;else{this.Om(n,u);const g=this.im(n,s);r=g.width,h=g.height,o=g.fontBoundingBoxAscent,a=g.fontBoundingBoxDescent,l=g.lm}else n=d,r=m,h=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,l=p.lm}0<n.length&&this.vm(n,r,h,o,a,l),this.Lm(s,e)}Lm(s,i){for(const e of this.Kp){const n=e.Nm();if(n.length){let t=n.at(-1);if(t.um()){const r=t.Rm(),h=r.slice(0);if(c(h),0===h.length)e.Bm(-t.nm()),n.pop();else if(h.length<r.length){t.Wm(h);const o=s(t).width,a=t.nm()-o;t.fm(o),e.Bm(-a)}0!==i&&0<n.length&&((t=n.at(-1)).Bm(i),e.Bm(i))}}}}Yu(){w.Nh(this.Kp)}jm(){return this.Kp.reduce((t,s)=>Math.max(t,s.nm()),0)}Vm(){return this.Kp.reduce((t,s)=>t+s.gm(),0)}}}{const Cs=self.Os;Cs.Xp.Mm=class{constructor(t){this.Np=t.xm||[],this.Hm=t.width||-1,this.Um=t.height||-1,this.zm=t.fontBoundingBoxAscent||-1,this.Jm=t.fontBoundingBoxDescent||-1,this.qm=t.lm||-1,this.$m=0,this.Xm=0}xm(){return this.Np.values()}*Km(){const s=this.Np;for(let t=s.length-1;0<=t;--t)yield s[t]}Nm(){return this.Np}Bm(t){this.Hm+=t}nm(){return this.Hm}gm(){return this.Um}Ym(){return this.zm}wm(){return this.Jm}Sm(){return this.qm}Zm(t){this.$m=t}Qm(){return this.$m}tg(t){this.Xm=t}sg(){return this.Xm}}}{const Es=self.Os;Es.ig=class{constructor(t){this.eg=t.jp||[],this.Hm=t.width||-1,this.Um=t.height||-1,this.zm=t.fontBoundingBoxAscent||-1,this.Jm=t.fontBoundingBoxDescent||-1,this.qm=t.lm||-1,this.$m=0,this.Xm=0}um(){return!1}dm(){return!1}Pm(){return this.eg}ng(s){const i=this.eg;for(let t=i.length-1;0<=t;--t){const e=i[t];if(e.tag===s)return e}return null}rg(t){return!!this.ng(t)}hg(){const t=new Map;for(const s of this.eg)t.set(s.tag,s.Vp);return t}Bm(t){this.Hm+=t}fm(t){this.Hm=t}nm(){return this.Hm}rm(t){this.Um=t}gm(){return this.Um}hm(t){this.zm=t}ym(){return this.zm}om(t){this.Jm=t}wm(){return this.Jm}am(t){this.qm=t}Sm(){return this.qm}Zm(t){this.$m=t}Qm(){return this.$m}tg(t){this.Xm=t}sg(){return this.Xm}}}{const Ps=self.Os;Ps.zp=class extends Ps.ig{constructor(t){super(t),this.og=t.Jp}um(){return!0}km(t){Ps.$n(this.og,t),this.Hm=-1,this.Um=-1,this.zm=-1,this.Jm=-1,this.qm=-1}Am(t){this.og.push(t)}Dm(){return Ps.hr(Ps.zp,{Jp:this.og.slice(0),jp:this.eg,width:this.Hm,height:this.Um,fontBoundingBoxAscent:this.zm,fontBoundingBoxDescent:this.Jm,lm:this.qm})}Rm(){return this.og}Wm(t){this.og=t}Gm(){return this.og.length}Zu(){return 0===this.og.length}Tm(){return this.og.includes("\n")}}}{const Rs=self.Os;Rs.Up=class extends Rs.ig{constructor(t){super(t),this.ag=t.icon}dm(){return!0}lg(){return this.ag}Dm(){return Rs.hr(Rs.Up,{icon:this.ag,jp:this.eg,width:this.Hm,height:this.Um,fontBoundingBoxAscent:this.zm,fontBoundingBoxDescent:this.Jm,lm:this.qm})}ug(t){if(!t)return null;let s=Number(this.ag);return String(s)===this.ag?(s=Math.floor(s),t.fg(s)):t.dg(this.ag)}pm(t){const s=this.ug(t);this.Hm=s?this.Um*s.nm()/s.gm():0}pg(t){const s=this.ug(t);return s?s.pg():null}Gm(){return 1}}}{const As=self.Os;As.mg=class{constructor(t){this.gg=new Map,this.yg=t.wg,this.Sg=t.bg}lr(){for(const t of this.gg.values())t.lr();this.gg.clear()}vg(t){let s=this.gg.get(t);if(!s){const i=this.yg(t);s=As.hr(As.Mg,this,{source:t,xg:i}),this.gg.set(t,s)}return s}Gg(t){return this.gg.has(t)}Tg(t){const s=this.gg.get(t);s&&s.lr(),this.gg.delete(t)}async _g(t){return this.Sg(t)}}}{const Fs=self.Os;Fs.Mg=class{constructor(t,s){this.Ig=t,this.Cg=s.source,this.Eg=[],this.Pg=new Map,this.Rg=!1,this.Ag=!1,this.Fg=null;const i=s.xg.Dg;for(let t=0,s=i.length;t<s;++t){const e=i[t],n=Fs.hr(Fs.Og,this,{index:t,tag:e.tag,source:e.source,width:e.width,height:e.height});this.Eg.push(n),e.tag&&this.Pg.set(e.tag.toLowerCase(),n)}}lr(){for(const t of this.Eg)t.lr();Fs.Nh(this.Eg),this.Pg.clear(),this.Ig=null,this.Cg=null}kg(){return this.Rg}Lg(){return this.Ag}Ng(){return this.Fg||(this.Fg=this.Bg()),this.Fg}async Bg(){if(!this.Rg){this.Rg=!0,this.Ag=!0;const t=await this.Ig._g(this.Cg);if(this.Ig){const i=t.Dg;for(let t=0,s=Math.min(i.length,this.Eg.length);t<s;++t){const e=i[t].Wg;this.Eg[t].jg(e)}this.Ag=!1}}}fg(t){return(t=Math.floor(t))<0||t>=this.Eg.length?null:this.Eg[t]}dg(t){return this.Pg.get(t.toLowerCase())||null}}}{const Ds=self.Os;Ds.Og=class{constructor(t,s){this.Vg=t,this.Cg=s.source||null,this.Hg=s.index,this.Ug=s.tag,this.Hm=s.width,this.Um=s.height,this.zg=null}lr(){this.Hm=0,this.Um=0,this.Vg=null}Jg(){return this.Cg}nm(){return this.Hm}gm(){return this.Um}jg(t){this.zg=t}pg(){return this.zg}}}{let e=function(t,s,i,e){const n=Bs;Tn.B(Ls,i,s),Tn.B(Ns,t,s),Tn.Ft(n,Ls,Ns),Tn.normalize(n,n),e.set(n[0],n[1],n[2],Tn.At(t,n))},h=function(t,s,i,e,n,r,h){const o=h.x,a=h.y,l=h.z,u=h.w,c=h.qg,f=h.$g,d=h.Xg,p=1-c,m=1-f,g=1-d,y=o*t*c+o*e*p+a*s*f+a*n*m+l*i*d+l*r*g;if(u<=y)return!0;const w=o*e*c+o*t*p+a*n*f+a*s*m+l*r*d+l*i*g;return u<w},n=function(t,s,i,e){const n=e.x,r=e.y,h=e.z,o=e.w,a=n*t+r*s+h*i;return o<=a};e,h,n;const Os=self.Os,ks=self.ws,Tn=ks._s,Hn=ks.Is,Gn=ks.Ms,Ls=Tn.create(),Ns=Tn.create(),Bs=Tn.create(),Ws=Hn.create(),js=Gn.create(),Vs=Tn.create(),Hs=Tn.create(),Us=Tn.create(),zs=Tn.create(),Js=Tn.create(),qs=Tn.create(),$s=Tn.create(),Xs=Tn.create(),Ks=Hn.I(0,0,1,1);Os.Kg={Yg(t,s,i,e,n,r,h){let o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15],c=n[0]*o+n[4]*a+n[8]*l+n[12]*u,f=n[1]*o+n[5]*a+n[9]*l+n[13]*u,d=n[2]*o+n[6]*a+n[10]*l+n[14]*u,p=n[3]*o+n[7]*a+n[11]*l+n[15]*u;return 0!=p&&(f*=p=1/p,d*=p,h[0]=(.5*(c*=p)+.5)*r[2]+r[0],h[1]=(.5*f+.5)*r[3]+r[1],h[2]=.5*(1+d),!0)},Zg(t,s,i,e,n,r,h){const o=js,a=Ws;return Gn.multiply(o,n,e),null!==Gn.P(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,Hn.Nt(a,a,o),0!==a[3])&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0)},Qg(t,s,i,e,n,r,h){const o=Ls,a=Ns;if(!Os.Kg.Zg(t,s,0,e,n,r,o))return!1;if(!Os.Kg.Zg(t,s,1,e,n,r,a))return!1;let l=Ns,u=(Tn.B(l,a,o),Bs),c=(Tn.set(u,0,0,1),-i),f=Tn.At(u,l),d=0;if(0===f){const p=Tn.At(u,o)+c;if(0!==p)return!1}else if((d=-(Tn.At(o,u)+c)/f)<0)return!1;return Tn.It(h,o,l,d),!0}};class Ys{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.qg=NaN,this.$g=NaN,this.Xg=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.qg=0<t?1:0,this.$g=0<s?1:0,this.Xg=0<i?1:0}}Os.Kg.ty=class{constructor(){this.iy=new Ys,this.ey=new Ys,this.ny=new Ys,this.hy=new Ys,this.oy=new Ys,this.uy=new Ys}my(t,s){const i=Ks;Os.Kg.Zg(0,1,0,t,s,i,Vs),Os.Kg.Zg(1,1,0,t,s,i,Hs),Os.Kg.Zg(0,0,0,t,s,i,Us),Os.Kg.Zg(1,0,0,t,s,i,zs),Os.Kg.Zg(0,1,1,t,s,i,Js),Os.Kg.Zg(1,1,1,t,s,i,qs),Os.Kg.Zg(0,0,1,t,s,i,$s),Os.Kg.Zg(1,0,1,t,s,i,Xs),e(Us,Vs,Js,this.iy),e(Vs,Hs,qs,this.ey),e(Hs,zs,Xs,this.ny),e(zs,Us,$s,this.hy),e($s,Js,qs,this.uy),e(zs,Hs,Vs,this.oy)}gy(t,s,i,e,n,r){return h(t,s,i,e,n,r,this.iy)&&h(t,s,i,e,n,r,this.ey)&&h(t,s,i,e,n,r,this.ny)&&h(t,s,i,e,n,r,this.hy)&&h(t,s,i,e,n,r,this.oy)&&h(t,s,i,e,n,r,this.uy)}yy(t,s,i){return!n(t,s,i,this.oy)}}}{const Zs=self.Os,Qs=self.ws,Tn=Qs._s,Hn=Qs.Is,Gn=Qs.Ms,ti=Gn.create(),si=Tn.I(0,0,0),ii=Tn.I(0,0,0),ei=Tn.I(0,0,0),ni=Tn.I(0,1,0),ri=(Hn.I(0,0,0,0),new Zs.Kl),hi=new Zs.Rect,oi=new Zs.Kl(0,0,1,0,1,1,0,1),ai={wy:1,Sy:1e4},li=Gn.I(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Zs.Kg.by=class{constructor(t){t=Object.assign({},ai,t),this.Hm=0,this.Um=0,this.vy=Zs.yr(45),this.My=Math.tan(this.vy/2),this.xy=Gn.create(),this.Gy=Gn.create(),this.Ty=!1,this._y=t.wy,this.Iy=t.Sy,this.Cy=[],this.Ey=new Map,this.Py=null,this.Ry=null,this.Ay=null,this.Fy=null,this.Dy=null,this.Oy=null,this.ky=null,this.Ly=null,this.Ny=null,this.By=null,this.Wy=null,this.jy=null,this.Vy=new Map,this.Hy=null,this.Uy=[],this.zy=new Map,this.Jy=0,this.qy=0,this.$y=1,this.Xy=[this.$y],this.Ky=1,this.Yy=[this.Ky],this.Zy=.5,this.Qy=[this.Zy],this.iw=0,this.ew=!0,this.rw=!1}hw(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}ow(){this.Jy=0,this.qy=0,this.Py=null,this.Ry=null,this.Ay=null,this.Fy=null,this.Dy=null,this.Oy=null,this.ky=null,this.Ly=null,this.Ny=null,this.By=null,this.Wy=null,this.jy=null,this.aw()}lw(){this.ow(),this.Hy=null}uw(){for(const t of this.Cy)t.lr();this.ow()}nm(){return this.Hm}gm(){return this.Um}cw(t){return this.fw()?100:t/(2*this.dw())}pw(t){if(this.fw()){const s=t/(2*this.dw());return s/this.cw(t)}return 1}mw(t){this._y=t}gw(){return this._y}yw(t){this.Iy=t}ww(){return this.Iy}Sw(t){this.vy=t,this.My=Math.tan(this.vy/2)}bw(){return this.vy}dw(){return this.My}Mw(){this.Ty=!1}xw(){this.Ty=!0}fw(){return!this.Ty}Gw(){return this.Ty}Tw(t,s,i=.5,e=.5){const n=this.gw(),r=this.ww(),h=this.bw();if(.5===i&&.5===e)this._w()?Gn.bt(t,h,s,n,r):Gn.perspective(t,h,s,n,r);else{const o=2*(i=1-i)-2,a=2*i,l=2*e-2,u=2*e,c=this.dw()*n,f=c*s;Gn.yt(t,o*f,a*f,l*c,u*c,n,r),this._w()&&Gn.mul(t,li,t)}}Iw(t,s,i,e=1){const n=self.devicePixelRatio,r=2*this.cw(i)*n*this.dw()/i,h=s*r/(2*n*e),o=i*r/(2*n*e),a=-h,l=h,u=-o,c=o;this._w()?Gn.xt(t,a,l,u,c,this.gw(),this.ww()):Gn.ortho(t,a,l,u,c,this.gw(),this.ww())}Cw(t,s,i,e,n,r=1){let h=1;this.fw()&&(h=200*this.dw()/n);const o=ei,a=(Tn.set(o,h,-h,1),si),l=ii;Tn.multiply(a,s,o),Tn.multiply(l,i,o),Gn.Gt(t,a,l,e||ni),o[2]=r,Gn.scale(t,t,o)}Ew(t,s,i,e,n,r,h,o){return Tn.set(si,t,s,i),Tn.set(ii,e,n,r),this.Cw(ti,si,ii,ni,h,o),ti}Pw(t){this.Cy.push(t),this.Ey.set(t.$c(),t)}Rw(t){const s=this.Cy.indexOf(t);-1!==s&&this.Cy.splice(s,1),this.Ey.delete(t.$c())}aw(){Zs.Nh(this.Cy),this.Ey.clear()}Aw(t){return this.Ey.get(t)||null}Fw(){return this.Py}Dw(){this.Ow(this.Py)}kw(){return this.Ry}Lw(){this.Ow(this.Ry)}Nw(){this.Ow(this.Ay)}Bw(){this.Ow(this.Fy)}Ww(){this.Ow(this.Dy)}jw(){this.Ow(this.Oy)}Vw(){this.Ow(this.ky)}Hw(){this.Ow(this.Ly)}Uw(){this.Ow(this.Ny)}zw(){this.Ow(this.By)}Jw(){this.Ow(this.Wy)}qw(){this.Ow(this.jy)}$w(t){this.Hy=t}Xw(){return this.Hy}Kw(t,s,i,e){let n=Zs.Kg.Zw.Yw(t,s,i,e),r=this.Vy.get(n);return r||(r=Zs.hr(Zs.Kg.Zw,this,t,s,i,e),this.Vy.set(n,r)),r.Qw(),r}tS(t){t.sS(),0===t.iS()&&(this.Hy===t&&(this.Hy=null),this.Vy.delete(t.eS()),t.lr())}nS(t){Zs.Nh(this.Uy),this.zy.clear();let s=0;for(const i of t){const e=i[0],n=i[1],r=i[2];this.Uy.push([n,r]),this.zy.set(e,{number:s,rS:n,hS:r}),s++}}oS(t){return this.Uy[t]}aS(t){return this.oS(t)[0]}lS(t){return this.oS(t)[1]}uS(t){const s=this.zy.get(t);if(void 0===s)throw new Error("invalid blend name");return s}cS(t){const s=this.zy.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}fS(t){this.Jy=t}dS(){return this.Jy}pS(t){this.qy=t,this.Hy=null}mS(){return this.qy}Mm(t,s,i,e){const n=Zs.Tr(t,s,i,e),r=Math.sin(n),h=Math.cos(n),o=.5*this.$y,a=r*o,l=h*o,u=this.Ky;2===u?this.gS(t,s,0,i,e,0,a,l):1===u?this.yS(t,s,0,i,e,0,a,l):this.wS(t,s,0,i,e,0,a,l)}SS(t,s,i,e,n,r){const h=Zs.Tr(t,s,e,n),o=Math.sin(h),a=Math.cos(h),l=.5*this.$y,u=o*l,c=a*l,f=this.Ky;2===f?this.gS(t,s,i,e,n,r,u,c):1===f?this.yS(t,s,i,e,n,r,u,c):this.wS(t,s,i,e,n,r,u,c)}gS(t,s,i,e,n,r,h,o){const a=this.Zy,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=2*o,p=2*h,m=l+h,g=u-o,y=l-h+d,w=u+o+p,S=c+h,b=f-o,v=c-h-d,M=f+o-p;this.bS(m,g,i,S,b,r,v,M,r,y,w,i,oi)}yS(t,s,i,e,n,r,h,o){const a=this.Zy,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,b=f+o;this.bS(d,p,i,y,w,r,S,b,r,m,g,i,oi)}wS(t,s,i,e,n,r,h,o){const a=this.Zy,l=t+a,u=s+a,c=e+a,f=n+a,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,b=f+o;this.bS(d,p,i,y,w,r,S,b,r,m,g,i,oi)}vS(t,s,i,e,n,r){const h=Zs.Tr(t,s,i,e),o=Math.sin(h),a=Math.cos(h),l=.5*this.$y,u=o*l,c=a*l,f=this.Ky;2===f?this.MS(t,s,i,e,u,c,n,r):1===f?this.xS(t,s,i,e,u,c,n,r):this.GS(t,s,i,e,u,c,n,r)}MS(t,s,i,e,n,r,h,o){const a=this.Zy,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=2*r,p=2*n,m=l+n,g=u-r,y=l-n+d,w=u+r+p,S=c+n,b=f-r,v=c-n-d,M=f+r-p;ri.set(m,g,S,b,v,M,y,w),hi.set(h,0,o,0),this.TS(ri,hi)}xS(t,s,i,e,n,r,h,o){const a=this.Zy,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,S=c-n,b=f+r;ri.set(d,p,y,w,S,b,m,g),hi.set(h,0,o,0),this.TS(ri,hi)}GS(t,s,i,e,n,r,h,o){const a=this.Zy,l=t+a,u=s+a,c=i+a,f=e+a,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,S=c-n,b=f+r;ri.set(d,p,y,w,S,b,m,g),hi.set(h,0,o,0),this.TS(ri,hi)}_S(t,s,i,e){const n=.5*this.$y,r=this.Ky;2===r?this.IS(t,s,i,e,n):1===r?this.CS(t,s,i,e,n):this.ES(t,s,i,e,n)}IS(t,s,i,e,n){this.gS(t,s,0,i,s,0,0,n),this.gS(i,s,0,i,e,0,n,0),this.gS(i,e,0,t,e,0,0,-n),this.gS(t,e,0,t,s,0,-n,0)}CS(t,s,i,e,n){this.yS(t,s,0,i,s,0,0,n),this.yS(i,s,0,i,e,0,n,0),this.yS(i,e,0,t,e,0,0,-n),this.yS(t,e,0,t,s,0,-n,0)}ES(t,s,i,e,n){this.wS(t,s,0,i,s,0,0,n),this.wS(i,s,0,i,e,0,n,0),this.wS(i,e,0,t,e,0,0,-n),this.wS(t,e,0,t,s,0,-n,0)}PS(t){this._S(t.bl(),t.vl(),t.Ml(),t.xl())}RS(t){const s=Zs.Tr(t.eh(),t.nh(),t.rh(),t.hh()),i=Math.sin(s),e=Math.cos(s),n=.5*this.$y,r=i*n,h=e*n,o=this.Ky;2===o?this.AS(t,r,h):1===o?this.FS(t,r,h):this.DS(t,r,h)}AS(t,s,i){this.gS(t.eh(),t.nh(),0,t.rh(),t.hh(),0,s,i),this.gS(t.rh(),t.hh(),0,t.oh(),t.ah(),0,i,-s),this.gS(t.oh(),t.ah(),0,t.lh(),t.uh(),0,-s,-i),this.gS(t.lh(),t.uh(),0,t.eh(),t.nh(),0,-i,s)}FS(t,s,i){this.yS(t.eh(),t.nh(),0,t.rh(),t.hh(),0,s,i),this.yS(t.rh(),t.hh(),0,t.oh(),t.ah(),0,i,-s),this.yS(t.oh(),t.ah(),0,t.lh(),t.uh(),0,-s,-i),this.yS(t.lh(),t.uh(),0,t.eh(),t.nh(),0,-i,s)}DS(t,s,i){this.wS(t.eh(),t.nh(),0,t.rh(),t.hh(),0,s,i),this.wS(t.rh(),t.hh(),0,t.oh(),t.ah(),0,i,-s),this.wS(t.oh(),t.ah(),0,t.lh(),t.uh(),0,-s,-i),this.wS(t.lh(),t.uh(),0,t.eh(),t.nh(),0,-i,s)}OS(t){this.$y=t,this.Xy[this.Xy.length-1]=t}kS(){return this.$y}LS(t){if(100<=this.Xy.length)throw new Error("pushed too many line widths - check push/pop pairs");this.Xy.push(t),this.$y=t}NS(){if(this.Xy.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.Xy.pop(),this.$y=this.Xy.at(-1)}BS(){this.Ky=0,this.Yy[this.Yy.length-1]=0}WS(){this.Ky=1,this.Yy[this.Yy.length-1]=0}jS(){this.Ky=2,this.Yy[this.Yy.length-1]=0}VS(t){if("butt"===t)this.HS();else if("square"===t)this.US();else{if("zag"!==t)throw new Error("invalid line cap");this.zS()}}HS(){if(100<=this.Yy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.Yy.push(0),this.Ky=0}US(){if(100<=this.Yy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.Yy.push(1),this.Ky=1}zS(){if(100<=this.Yy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.Yy.push(2),this.Ky=2}JS(){if(this.Yy.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.Yy.pop(),this.Ky=this.Yy.at(-1)}qS(t){this.Zy=t,this.Qy[this.Qy.length-1]=t}$S(){return this.Zy}XS(t){if(100<=this.Qy.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.Qy.push(t),this.Zy=t}KS(){if(this.Qy.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.Qy.pop(),this.Zy=this.Qy.at(-1)}YS(s){const t=s.length/2;if(t<3)throw new Error("need at least 3 points");const i=t-2,e=i-1,n=s[0],r=s[1];for(let t=0;t<i;t+=2){const h=2*t,o=s[2+h],a=s[3+h],l=s[4+h],u=s[5+h];if(t===e)this.ZS(n,r,o,a,l,u,l,u);else{const c=s[6+h],f=s[7+h];this.ZS(n,r,o,a,l,u,c,f)}}}QS(){return 3}tb(){this.sb(!0),this.iw++}ib(){return this.iw}eb(){this.iw++}nb(t){this.ew=!!t}rb(){return this.ew}hb(t){this.rw=!!t}ob(){return this.rw}ab(){return!1}_w(){return!1}lb(){}ub(){}cb(){}fb(){return this.lb()+this.ub()+this.cb()}pb(){return Zs.hr(Zs.Kg.mb,this)}}}{const ui=self.Os;ui.Kg.gb=class{constructor(t,s){this.dr=s.name,this.yb=t,this.wb=s.extendBoxHorizontal||0,this.Sb=s.extendBoxVertical||0,this.bb=!!s.crossSampling,this.vb=!!s.mustPreDraw,this.Mb=!!s.preservesOpaqueness,this.xb=!!s.supports3dDirectRendering,this.Gb=!!s.animated,this.Tb=!!s.blendsBackground,this._b=!!s.usesDepth,this.Ib=!1,this.Cb=this.bb||this.Tb||0!==this.wb||0!==this.Sb}lr(){this.yb=null}Eb(){return this.yb}$c(){return this.dr}Pb(){return 0!==this.wb||0!==this.Sb}Rb(){return this.wb}Ab(){return this.Sb}Fb(){return this.bb}Db(){return this.vb}Ob(){return this.Mb}kb(){return this.xb}Lb(){return this.Gb}Nb(){return this.Tb}Bb(){return this._b}Wb(){return this.Ib}jb(){return this.Cb}Vb(){return!1}}}{const ci=self.Os;ci.Kg.Zw=class{constructor(t,s,i,e,n){this.yb=t,this.o1=0,this.Hb=null,this.Ub="",this.zb=i,this.Jb=ci.hr(ci.Vo),this.Jb.set(e),this.qb=n,"string"==typeof s?this.Ub=s:(this.Hb=s,this.Ub=this.Hb.$c())}lr(){if(0<this.o1)throw new Error("releasing state group still in use");this.yb=null,this.Hb=null,this.Ub=""}$b(){const t=this.yb;t.Ow(this.Hb),t.Xb(this.zb),t.Kb(this.Jb),t.pS(this.qb),t.$w(this)}eS(){return ci.Kg.Zw.Yw(this.Ub,this.zb,this.Jb,this.qb)}Qw(){++this.o1}sS(){--this.o1}iS(){return this.o1}Yb(){this.Hb=null}Zb(t){if(this.Hb=t.Aw(this.Ub),!this.Hb)throw new Error("failed to restore shader program")}static Yw(t,s,i,e){const n="string"==typeof t?t:t.$c();return n+","+s+","+i.ea()+","+i.na()+","+i.ra()+","+i.oa()+","+e}}}{let e=function(t,s,i){const e=i.eh(),n=i.nh(),r=i.rh()-e,h=i.hh()-n,o=i.lh()-e,a=i.uh()-n,l=r*t,u=h*t,c=o*s,f=a*s;return[e+l+c,n+u+f]};e;const _=self.Os,fi=_.hr(_.Kl);_.Kg.Qb=class{constructor(t,s,i){this.tv=t,this.sv=s,this.nv=i,this.Ka=NaN,this.Ya=NaN,this.qb=NaN,this.rv=NaN,this.hv=NaN,this.Ka=0,this.Ya=0,this.qb=0,this.rv=0,this.hv=0}ov(t,s,i,e){this.Ka=t,this.Ya=s,this.rv=i,this.hv=e}av(){return this.Ka}lv(t){this.Ka!==t&&(this.Ka=t,this.tv.uv())}cv(){return this.Ya}dv(t){this.Ya!==t&&(this.Ya=t,this.tv.uv())}pv(){return this.qb}mv(t){this.qb!==t&&(this.qb=Math.max(t,0),this.tv.uv())}gv(){return this.rv}yv(t){this.rv=t}wv(){return this.hv}Sv(t){this.hv=t}bv(t,s,i){[this.Ka,this.Ya]=e(t.Ka,t.Ya,s),this.qb=t.qb,this.rv=_.Dt(i.bl(),i.Ml(),t.rv),this.hv=_.Dt(i.vl(),i.xl(),t.hv)}vv(t,s,i){[this.Ka,this.Ya]=e(t.Ka,t.Ya,s),this.qb=t.qb,[this.rv,this.hv]=e(t.rv,t.hv,i)}Mv(){return{x:this.av(),y:this.cv(),z:this.pv(),u:this.gv(),v:this.wv()}}xv(t){this.lv(t.x),this.dv(t.y),t.hasOwnProperty("z")&&this.mv(t.z),this.yv(t.u),this.Sv(t.v)}Gv(){return this.tv}Tv(){return this.sv}_v(){return this.nv}},_.Kg.Iv=class{constructor(i,t,s){if(i<2||t<2)throw new Error("invalid mesh size");this.Cv=i,this.Ev=t,this.Pv=s||null,this.Rv=[],this.Av=0,this.Fv=0,this.Dv=1,this.Ov=1,this.kv=0,this.Lv=!1;const e=i-1,n=t-1;for(let s=0;s<t;++s){const r=[];for(let t=0;t<i;++t){const h=_.hr(_.Kg.Qb,this,t,s),o=t/e,a=s/n;h.ov(o,a,o,a),r.push(h)}this.Rv.push(r)}}lr(){_.Nh(this.Rv)}Nv(){return this.Cv}Bv(){return this.Ev}Wv(){return this.Pv}jv(){return this.Rv}uv(){this.Lv=!0}Vv(){if(this.Lv){let t=1/0,s=1/0,i=-1/0,e=-1/0,n=0;for(const r of this.Rv)for(const h of r){const o=h.av(),a=h.cv();t=Math.min(t,o),s=Math.min(s,a),i=Math.max(i,o),e=Math.max(e,a),n=Math.max(n,h.pv())}this.Av=t,this.Fv=s,this.Dv=i,this.Ov=e,this.kv=n,this.Lv=!1}}Hv(){return this.Vv(),this.Av}Uv(){return this.Vv(),this.Fv}zv(){return this.Vv(),this.Dv}Jv(){return this.Vv(),this.Ov}qv(){return this.Vv(),this.kv}$v(){return 0<this.qv()}Xv(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.Cv||s<0||s>=this.Ev?null:this.Rv[s][t]}Kv(t,i,e){const n=e instanceof _.Rect;if(t.Nv()!==this.Nv()||t.Bv()!==this.Bv())throw new Error("source mesh wrong size");const r=t.Rv,h=this.Rv;for(let t=0,s=h.length;t<s;++t){const o=r[t],a=h[t];for(let t=0,s=a.length;t<s;++t){const l=o[t],u=a[t];n?u.bv(l,i,e):u.vv(l,i,e)}}}Yv(r){let h=this.Rv,o=h[0];for(let t=1,s=h.length;t<s;++t){let i=h[t],e=o[0],n=i[0];for(let t=1,s=i.length;t<s;++t){const a=o[t],l=i[t];fi.set(e.gv(),e.wv(),a.gv(),a.wv(),l.gv(),l.wv(),n.gv(),n.wv()),r.bS(e.av(),e.cv(),e.pv(),a.av(),a.cv(),a.pv(),l.av(),l.cv(),l.pv(),n.av(),n.cv(),n.pv(),fi),e=a,n=l}o=i}}Zv(o,a){a=a||((t,s,i)=>[t,s,i]);let t=this.Rv,l=t[0];for(let r=1,h=t.length;r<h;++r){let i=t[r],e=l[0],n=i[0];for(let t=1,s=i.length;t<s;++t){const u=l[t],c=i[t],[f,d,p]=a(e.av(),e.cv(),e.pv()),[m,g,y]=a(u.av(),u.cv(),u.pv()),[w,S,b]=a(c.av(),c.cv(),c.pv()),[v,M,x]=a(n.av(),n.cv(),n.pv());o.SS(f,d,p,m,g,y),o.SS(f,d,p,w,S,b),o.SS(f,d,p,v,M,x),t===s-1&&o.SS(m,g,y,w,S,b),r===h-1&&o.SS(v,M,x,w,S,b),e=u,n=c}l=i}}Qv(t){let i=.99999999,e=t.Ou(),n=[],r=this.Nv()-1,h=this.Bv()-1,o=1/r,a=1/h,l=r-1,u=h-1,c=e[0],f=e[1],d=_.mr(Math.floor(c*r),0,l),p=_.mr(Math.floor(f*h),0,u),m=!0,g=0,y=0,w=0,S=-1,b=()=>{c=_.mr(_.Dt(c,g,w),0,1),f=_.mr(_.Dt(f,y,w),0,1),n.push(c,f)};for(let t=0,s=e.length;t<s;t+=2){c=e[t],f=e[t+1],n.push(c,f),d=_.mr(Math.floor(c*r),0,l),p=_.mr(Math.floor(f*h),0,u);const v=(t+2)%s;for(g=e[v],y=e[1+v],S=-1;;){if(1e6<n.length)throw new Error("Too many mesh poly points");const M=d*o,x=p*a,G=(d+1)*o,T=(p+1)*a;if(m=_.mh(c,f,M,x,G,x,G,T),0!==S&&0<=(w=_.ph(c,f,g,y,M,x,G,T,-.001))&&w<=i)b(),m=!m,S=0;else if(0<p&&2!==S&&0<=(w=_.ph(c,f,g,y,M,x,G,x,.001))&&w<=i)b(),p--,m=!1,S=4;else if(d<l&&3!==S&&0<=(w=_.ph(c,f,g,y,G,x,G,T,.001))&&w<=i)b(),d++,m=!1,S=1;else if(0<d&&1!==S&&0<=(w=_.ph(c,f,g,y,M,x,M,T,.001))&&w<=i)b(),d--,m=!0,S=3;else{if(!(p<u&&4!==S&&0<=(w=_.ph(c,f,g,y,M,T,G,T,.001))&&w<=i))break;b(),p++,m=!0,S=2}}}return _.hr(_.Pu,n)}t2(t,s){const i=this.s2(t);this.i2(i),s.Lu(i)}s2(t){const i=[],e=t.Ou();for(let t=0,s=e.length;t<s;t+=2){const n=e[t],r=e[t+1],[h,o]=this.e2(n,r);i.push(h,o)}return i}e2(t,s){const i=this.Nv()-1,e=this.Bv()-1,n=1/i,r=1/e,h=_.mr(Math.floor(t*i),0,i-1),o=_.mr(Math.floor(s*e),0,e-1),a=h*n,l=o*r,u=(h+1)*n,c=(o+1)*r,f=this.Xv(h,o),d=this.Xv(h+1,o+1),p=_.mh(t,s,a,l,u,l,u,c),m=p?a+n:a,g=p?l:l+r,y=this.Xv(h+(p?1:0),o+(p?0:1)),[w,S,b]=_.gh(t,s,a,l,m,g,u,c);return _.yh(w,S,b,f.av(),f.cv(),f.pv(),y.av(),y.cv(),y.pv(),d.av(),d.cv(),d.pv())}i2(i){let e=[],n=i[0],r=i[1],h=n-i.at(-2),o=r-i.at(-1);for(let t=0,s=i.length;t<s;t+=2){const a=(t+2)%s,l=i[a],u=i[1+a],c=l-n,f=u-r,d=Math.abs(c)<1e-7&&Math.abs(h)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(c)===Math.sign(h);(!d&&!p&&.001<Math.abs(c/h-f/o)||0==c&&0==f)&&e.push(n,r),n=l,r=u,h=c,o=f}6<=e.length&&e.length<i.length&&_.Vh(i,e)}Mv(){return{cols:this.Nv(),rows:this.Bv(),points:this.Rv.map(t=>t.map(t=>t.Mv()))}}xv(t){const i=this.Nv(),e=this.Bv();if(t.cols!==i||t.rows!==e)throw new Error("mesh data wrong size");const n=t.points;for(let s=0;s<e;++s){const r=n[s];for(let t=0;t<i;++t){const h=this.Xv(t,s);h.xv(r[t])}}}}}{let d=function(t,s){let i,e,n,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,n=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,n=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{n2:i,h2:e,format:n,type:r}};d;const di=self.Os,pi=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),mi=new Set(["nearest","bilinear","trilinear"]),gi=new Set(["default","low","high"]),yi=new Set(["clamp-to-edge","repeat","mirror-repeat"]),wi={o2:"clamp-to-edge",a2:"clamp-to-edge",l2:"trilinear",u2:0,c2:"rgba8",f2:!0,d2:"default",premultiplyAlpha:!0,m2:!1,width:-1,height:-1},Si={premultiplyAlpha:!0,flipY:!1},bi=new Set;di.Kg.g2=class{constructor(t){this.yb=t,this.w2=null,this.Hm=0,this.Um=0,this.S2=!0,this.b2="clamp-to-edge",this.v2="clamp-to-edge",this.M2="trilinear",this.G2=0,this.T2="rgba8",this._2=!1,this.I2="default",this.o1=0}C2(s,t){if(!("undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&s instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&s instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas||s instanceof ImageData||s instanceof ArrayBuffer||null===s))throw new Error("invalid texture source");if(t=Object.assign({},wi,t),this.w2)throw new Error("already created texture");if(this.b2=t.o2,this.v2=t.a2,this.M2=t.l2,this.G2=t.u2,this.T2=t.c2,this._2=!!t.f2&&this.yb.rb(),this.I2=t.d2,!yi.has(this.b2)||!yi.has(this.v2))throw new Error("invalid wrap mode");if(!mi.has(this.M2))throw new Error("invalid sampling");if(!pi.has(this.T2))throw new Error("invalid pixel format");if(!gi.has(this.I2))throw new Error("invalid mipmap quality");if(this.S2=!0,s instanceof ArrayBuffer||null===s||t.m2){if(this.Hm=t.width,this.Um=t.height,s instanceof ArrayBuffer&&s.byteLength!==this.Hm*this.Um*4)throw new Error("ArrayBuffer wrong size")}else this.Hm=s.width,this.Um=s.height;if(this.Hm<=0||this.Um<=0)throw new Error("invalid texture data size");if(t.m2){const o=di.Po(this.Hm,this.Um),a=o.getContext("2d");a.drawImage(s,0,0,this.Hm,this.Um),s=o}const i=di.Nr(this.Hm)&&di.Nr(this.Um),e=this.yb.E2();if(this.Hm>e||this.Um>e)throw new Error("texture data exceeds maximum texture size");const n=this.yb.P2(),r=this.yb.R2(),h=(this.w2=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.w2),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),d(this.T2,n));if(this.yb.A2()||i||!this.F2())if(2<=r){let t;t=this._2?Math.floor(Math.log2(Math.max(this.Hm,this.Um))+1):1,n.texStorage2D(n.TEXTURE_2D,t,h.n2,this.Hm,this.Um),s instanceof ArrayBuffer?n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.Hm,this.Um,h.format,h.type,new Uint8Array(s)):null!==s&&n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,s)}else s instanceof ArrayBuffer?n.texImage2D(n.TEXTURE_2D,0,h.h2,this.Hm,this.Um,0,h.format,h.type,new Uint8Array(s)):null===s?n.texImage2D(n.TEXTURE_2D,0,h.h2,this.Hm,this.Um,0,h.format,h.type,null):n.texImage2D(n.TEXTURE_2D,0,h.h2,h.format,h.type,s);else{if(null===s)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((s=s instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(s),this.Hm,this.Um):s)instanceof ImageData){const c=di.Po(this.Hm,this.Um),f=c.getContext("2d");f.putImageData(s,0,0),s=c}const l=di.Po(di.Br(this.Hm),di.Br(this.Um)),u=l.getContext("2d");u.imageSmoothingEnabled="nearest"!==this.M2,u.drawImage(s,0,0,this.Hm,this.Um,0,0,l.width,l.height),n.texImage2D(n.TEXTURE_2D,0,h.h2,h.format,h.type,l)}null!==s&&this.D2(n),n.bindTexture(n.TEXTURE_2D,null),this.yb.O2(),this.o1=1,bi.add(this)}L2(t,s,i){if(i=Object.assign({},wi,i),this.w2)throw new Error("already created texture");if(this.b2=i.o2,this.v2=i.a2,this.M2=i.l2,this.T2=i.c2,this._2=!!i.f2&&this.yb.rb(),this.I2=i.d2,!yi.has(this.b2)||!yi.has(this.v2))throw new Error("invalid wrap mode");if(!mi.has(this.M2))throw new Error("invalid sampling");if(!pi.has(this.T2))throw new Error("invalid pixel format");if(!gi.has(this.I2))throw new Error("invalid mipmap quality");this.S2=!1,this.Hm=Math.floor(t),this.Um=Math.floor(s);const e=di.Nr(this.Hm)&&di.Nr(this.Um),n=this.yb.E2();if(this.Hm<=0||this.Um<=0)throw new Error("invalid texture size");if(this.Hm>n||this.Um>n)throw new Error("texture exceeds maximum texture size");if(!this.yb.A2()&&this.F2()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.yb.P2(),h=this.yb.R2(),o=(this.w2=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.w2),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),d(this.T2,r)),a=2<=h?o.n2:o.h2;r.texImage2D(r.TEXTURE_2D,0,a,this.Hm,this.Um,0,o.format,o.type,null),this.D2(r),r.bindTexture(r.TEXTURE_2D,null),this.yb.O2(),this.o1=1,bi.add(this)}N2(t){if("default"===this.I2)return this.S2?t.NICEST:t.FASTEST;if("low"===this.I2)return t.FASTEST;if("high"===this.I2)return t.NICEST;throw new Error("invalid mipmap quality")}F2(){return"clamp-to-edge"!==this.b2||"clamp-to-edge"!==this.v2}B2(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}D2(t){const s=di.Nr(this.Hm)&&di.Nr(this.Um);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.B2(t,this.b2)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.B2(t,this.v2)),"nearest"===this.M2)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this._2=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.yb.A2())&&this._2){t.hint(t.GENERATE_MIPMAP_HINT,this.N2(t)),t.generateMipmap(t.TEXTURE_2D);const e="trilinear"===this.M2&&!this.yb.ob();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this._2=!1;const i=this.yb.W2();i&&0<this.G2&&"nearest"!==this.M2&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.G2,this.yb.j2()))}V2(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.w2||this.o1<=0)throw new Error("texture not created");if(this.S2)throw new Error("cannot update static texture");s=Object.assign({},Si,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,n=this.yb.R2(),r=this.yb.P2(),h=(r.bindTexture(r.TEXTURE_2D,this.w2),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY),d(this.T2,r)),o=2<=n?h.n2:h.h2;try{if(this.Hm===i&&this.Um===e){const a=di.Nr(this.Hm)&&di.Nr(this.Um);r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,t),(a||this.yb.A2())&&this._2&&(r.hint(r.GENERATE_MIPMAP_HINT,this.N2(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.Hm=i,this.Um=e;const l=di.Nr(this.Hm)&&di.Nr(this.Um);if(!this.yb.A2()&&this.F2()&&!l)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,h.format,h.type,t),(l||this.yb.A2())&&this._2&&(r.hint(r.GENERATE_MIPMAP_HINT,this.N2(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.yb.O2()}H2(){if(0<this.o1)throw new Error("texture still has references");if(!this.w2)throw new Error("already deleted texture");bi.delete(this);const t=this.yb.P2();t.deleteTexture(this.w2),this.w2=null}U2(){return!!this.w2}z2(){return this.w2}Eb(){return this.yb}J2(){this.o1++}q2(){if(this.o1<=0)throw new Error("no more references");this.o1--}X2(){return this.o1}nm(){return this.Hm}gm(){return this.Um}K2(){return this.S2}Y2(){let t=this.Hm*this.Um;switch(this.T2){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this._2&&(t+=Math.floor(t/3)),t}static Yb(){bi.clear()}static Z2(){return bi.values()}}}{const vi=self.Os,Mi=self.ws,Tn=Mi._s,Gn=Mi.Ms,xi=new Set(["nearest","bilinear","trilinear"]),Gi={l2:"trilinear",alpha:!0,depth:!1,Q2:!0,tM:!0,sM:0},Ti=new Set;vi.Kg.iM=class{constructor(t){this.yb=t,this.eM=null,this.nM=null,this.w2=null,this.rM=null,this.Hm=0,this.Um=0,this.hM=!0,this.M2="trilinear",this.oM=!0,this.aM=!1,this.lM=!0,this.uM=0,this.cM=Gn.create(),this.fM=0,this.dM=0,this.pM=0}mM(t,s,i){i=Object.assign({},Gi,i);const e=this.yb.R2();if(this.w2||this.rM)throw new Error("already created render target");if(this.M2=i.l2,this.oM=!!i.alpha,this.aM=!!i.depth,this.lM=!!i.Q2,this.hM=!!i.tM,this.uM=i.sM,!xi.has(this.M2))throw new Error("invalid sampling");if(0<this.uM&&(e<2||this.lM))throw new Error("invalid use of multisampling");if(e<2&&(this.lM=!0),this.Hm=t,this.Um=s,this.Hm<=0||this.Um<=0)throw new Error("invalid render target size");this.gM();const n=this.yb.P2();if(this.eM=n.createFramebuffer(),this.aM&&(this.nM=n.createFramebuffer()),this.lM){this.w2=this.yb.yM(this.Hm,this.Um,{l2:this.M2,c2:this.oM?"rgba8":"rgb8",f2:!1});const h=this.w2.z2();n.bindFramebuffer(n.FRAMEBUFFER,this.eM),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,h,0),this.aM&&(n.bindFramebuffer(n.FRAMEBUFFER,this.nM),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,h,0))}else{this.rM=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.rM);const o=this.oM?n.RGBA8:n.RGB8;if(0<this.uM){const a=n.getInternalformatParameter(n.RENDERBUFFER,o,n.SAMPLES);if(a&&a[0]){const l=a[0];this.uM>l&&(this.uM=l)}else this.uM=0}0===this.uM?n.renderbufferStorage(n.RENDERBUFFER,o,this.Hm,this.Um):n.renderbufferStorageMultisample(n.RENDERBUFFER,this.uM,o,this.Hm,this.Um),n.bindFramebuffer(n.FRAMEBUFFER,this.eM),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.rM),this.aM&&(n.bindFramebuffer(n.FRAMEBUFFER,this.nM),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.rM)),n.bindRenderbuffer(n.RENDERBUFFER,null)}const r=this.yb.wM();this.aM&&r&&(n.bindFramebuffer(n.FRAMEBUFFER,this.eM),this.yb.SM()?n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,r,0):n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r)),n.bindFramebuffer(n.FRAMEBUFFER,null),Ti.add(this)}bM(t,s){if(this.Hm!==t||this.Um!==s){this.Hm=t,this.Um=s,this.gM();const i=this.yb.P2(),e=(i.bindFramebuffer(i.FRAMEBUFFER,this.eM),this.w2?this.w2.V2(new ImageData(this.Hm,this.Um)):(i.bindRenderbuffer(i.RENDERBUFFER,this.rM),i.renderbufferStorage(i.RENDERBUFFER,this.oM?i.RGBA8:i.RGB8,this.Hm,this.Um),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.yb.wM());this.aM&&e&&(this.yb.SM()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}}H2(){if(!this.w2&&!this.rM)throw new Error("already deleted render target");Ti.delete(this);const t=this.yb.P2(),s=(this.w2?(t.bindFramebuffer(t.FRAMEBUFFER,this.eM),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.aM&&(t.bindFramebuffer(t.FRAMEBUFFER,this.nM),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.yb.vM(this.w2),this.w2=null):this.rM&&(t.bindFramebuffer(t.FRAMEBUFFER,this.eM),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.aM&&(t.bindFramebuffer(t.FRAMEBUFFER,this.nM),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.rM),this.rM=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.yb.R2()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.eM),this.aM&&t.deleteFramebuffer(this.nM),this.yb.MM());s.xM=null,this.eM=s.GM=null}gM(){this.yb.Tw(this.cM,this.Hm/this.Um),this.fM=this.yb.bw(),this.dM=this.yb.gw(),this.pM=this.yb.ww()}TM(){return this.eM}_M(){return this.nM}Eb(){return this.yb}IM(){return this.w2}CM(){return this.yb.bw()===this.fM&&this.yb.gw()===this.dM&&this.yb.ww()===this.pM||this.gM(),this.cM}EM(){return"nearest"!==this.M2}PM(){return this.oM}RM(){return this.lM}AM(){return this.aM}nm(){return this.Hm}gm(){return this.Um}FM(){return this.hM}DM(){return this.uM}OM(){const t={l2:this.M2,alpha:this.oM,Q2:this.lM};return this.hM||(t.width=this.Hm,t.height=this.Um),t}kM(t){return"nearest"!==(t=Object.assign({},Gi,t)).l2===this.EM()&&!!t.alpha===this.PM()&&!!t.depth===this.AM()&&!(2<=this.yb.R2()&&!!t.Q2!==this.RM())&&("number"==typeof t.width||"number"==typeof t.height?!this.FM()&&this.nm()===Math.floor(t.width)&&this.gm()===Math.floor(t.height):this.FM())}LM(){return this.w2?this.w2.z2():null}Y2(){return this.w2?this.w2.Y2():this.Hm*this.Um*(this.oM?4:3)}static async NM(t,s){const i=await t.BM(s,!0);return vi.Fo(i)}static Yb(){Ti.clear()}static WM(){return Ti.values()}static jM(t,s){for(const i of Ti)i.FM()&&i.bM(t,s)}}}{const m=self.Os,_i=self.ws,Tn=_i._s,Gn=_i.Ms,Ii=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);m.Kg.VM=class extends m.Kg.gb{static async HM(t,s){const i=t.P2(),e=s.src,n=s.UM,r=s.name,h=i.createShader(i.FRAGMENT_SHADER),o=(i.shaderSource(h,e),i.compileShader(h),i.createShader(i.VERTEX_SHADER)),a=(i.shaderSource(o,n),i.compileShader(o),i.createProgram()),l=(i.attachShader(a,h),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a),t.zM());if(l?await t.JM(()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await m.Ah(5),!i.getShaderParameter(h,i.COMPILE_STATUS)){const c=i.getShaderInfoLog(h);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+c)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const f=i.getShaderInfoLog(o);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const d=i.getProgramInfoLog(a);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+d)}const u=m.W1(i.getProgramInfoLog(a)||"").trim();return u&&!m.L1(u)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,u),i.deleteShader(h),i.deleteShader(o),a}static async qM(t,s){const i=await m.Kg.VM.HM(t,s);return new m.Kg.VM(t,i,s)}constructor(t,s,i){super(t,i);const e=t.P2(),n=t.MM(),r=(t.sb(),e.useProgram(s),this.$M=e,this.Hb=s,this.XM="<default-device-transform>"===i.name,e.getAttribLocation(s,"aPos")),h=e.getAttribLocation(s,"aTex"),o=(this.KM=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.YM),e.vertexAttribPointer(r,t.QS(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==h&&(e.bindBuffer(e.ARRAY_BUFFER,t.ZM),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(h)),-1!==this.KM&&(e.bindBuffer(e.ARRAY_BUFFER,t.QM),e.vertexAttribPointer(this.KM,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.KM)),e.bindBuffer(e.ARRAY_BUFFER,null),this.tx=new m.Kg.ix(this,"matP","mat4"),this.nx=new m.Kg.ix(this,"matMV","mat4"),this.hx=new m.Kg.ix(this,"color","vec4"),this.ox=new m.Kg.ix(this,"samplerFront","sampler"),this.ux=new m.Kg.ix(this,"pointTexStart","vec2"),this.mx=new m.Kg.ix(this,"pointTexEnd","vec2"),this.gx=new m.Kg.ix(this,"zElevation","float"),this.yx=new m.Kg.ix(this,"tileSize","vec2"),this.wx=new m.Kg.ix(this,"tileSpacing","vec2"),this.Sx=new m.Kg.ix(this,"color2_","vec4"),this.bx=new m.Kg.ix(this,"outlineThickness","float"),this.vx=new m.Kg.ix(this,"samplerBack","sampler"),this.Mx=new m.Kg.ix(this,"samplerDepth","sampler"),this.xx=new m.Kg.ix(this,"destStart","vec2"),this.Gx=new m.Kg.ix(this,"destEnd","vec2"),this.Tx=new m.Kg.ix(this,"srcStart","vec2"),this._x=new m.Kg.ix(this,"srcEnd","vec2"),this.Ix=new m.Kg.ix(this,"srcOriginStart","vec2"),this.Cx=new m.Kg.ix(this,"srcOriginEnd","vec2"),this.Ex=new m.Kg.ix(this,"pixelSize","vec2"),this.Px=new m.Kg.ix(this,"seconds","float"),this.Rx=new m.Kg.ix(this,"devicePixelRatio","float"),this.Ax=new m.Kg.ix(this,"layerScale","float"),this.Fx=new m.Kg.ix(this,"layerAngle","float"),this.Dx=new m.Kg.ix(this,"layoutStart","vec2"),this.Ox=new m.Kg.ix(this,"layoutEnd","vec2"),this.kx=new m.Kg.ix(this,"zNear","float"),this.Lx=new m.Kg.ix(this,"zFar","float"),this.Nx=!!(this.Ex.Bx()||this.Px.Bx()||this.vx.Bx()||this.xx.Bx()||this.Gx.Bx()||this.Tx.Bx()||this._x.Bx()||this.Ix.Bx()||this.Cx.Bx()||this.Rx.Bx()||this.Ax.Bx()||this.Fx.Bx()||this.Dx.Bx()||this.Ox.Bx()),i.parameters||[]);this.Wx=[],this.Ib=this.Ex.Bx()||this.Tx.Bx()||this._x.Bx()||this.Ix.Bx()||this.Cx.Bx(),this.jx=!1,this.Vx=!1,this.hx.Hx(1,1,1,1),this.Sx.Hx(1,1,1,1),this.ox.Ux(0),this.vx.Ux(1),this.Mx.Ux(2),this.ux.zx(0,0),this.mx.zx(1,1),this.gx.Jx(0),this.yx.zx(0,0),this.wx.zx(0,0),this.xx.zx(0,0),this.Gx.zx(1,1),this.Tx.zx(0,0),this._x.zx(0,0),this.Ix.zx(0,0),this.Cx.zx(0,0),this.Ex.zx(0,0),this.Rx.Jx(1),this.kx.Jx(t.gw()),this.Lx.Jx(t.ww()),this.Ax.Jx(1),this.Fx.Jx(0),this.Px.Jx(0),this.Dx.zx(0,0),this.Ox.zx(0,0),this.bx.Jx(1);for(const l of o){const u=l[0],c=l[2],f=new m.Kg.ix(this,u,c);"color"===c?f.qx(0,0,0):f.Jx(0),this.Wx.push(f)}this.XM?this.$x(n.Xx):(this.Kx(n.Xx,!0),this.Yx(n.Zx,!0));const a=n.Qx;e.useProgram(a?a.Hb:null)}lr(){this.$M.deleteProgram(this.Hb),this.Hb=null,this.yb.Rw(this),this.$M=null,super.lr()}tG(){return this.$M}sG(){return this.Hb}iG(){return this.Wx.length}eG(t){return t<0||t>=this.Wx.length?null:this.Wx[t].nG()}rG(i){for(let t=0,s=i.length;t<s;++t)if(!this.Wx[t].hG(i[t]))return!1;return!0}oG(i){for(let t=0,s=i.length;t<s;++t)this.Wx[t].aG(i[t])}lG(t,s,i,e,n,r,h,o,a,l){return!this.vx.Bx()&&!(this.Ex.Bx()&&!this.Ex.uG(n,r)||this.xx.Bx()&&!this.xx.uG(t.bl(),t.vl())||this.Gx.Bx()&&!this.Gx.uG(t.Ml(),t.xl())||this.Rx.Bx()&&!this.Rx.cG(h)||this.Ax.Bx()&&!this.Ax.cG(o)||this.Fx.Bx()&&!this.Fx.cG(a)||this.Tx.Bx()&&!this.Tx.uG(s.bl(),s.vl())||this._x.Bx()&&!this._x.uG(s.Ml(),s.xl())||this.Ix.Bx()&&!this.Ix.uG(i.bl(),i.vl())||this.Cx.Bx()&&!this.Cx.uG(i.Ml(),i.xl())||this.Dx.Bx()&&!this.Dx.uG(e.bl(),e.vl())||this.Ox.Bx()&&!this.Ox.uG(e.vl(),e.xl())||this.Px.Bx()&&!this.Px.cG(l))}fG(t,s,i,e,n,r,h,o,a,l){this.vx.Bx()||(this.Ex.Bx()&&this.Ex.dG(n,r),this.xx.Bx()&&this.xx.dG(t.bl(),t.vl()),this.Gx.Bx()&&this.Gx.dG(t.Ml(),t.xl()),this.Rx.Bx()&&this.Rx.pG(h),this.Ax.Bx()&&this.Ax.pG(o),this.Fx.Bx()&&this.Fx.pG(a),this.Tx.Bx()&&this.Tx.dG(s.bl(),s.vl()),this._x.Bx()&&this._x.dG(s.Ml(),s.xl()),this.Ix.Bx()&&this.Ix.dG(i.bl(),i.vl()),this.Cx.Bx()&&this.Cx.dG(i.Ml(),i.xl()),this.Dx.Bx()&&this.Dx.dG(e.bl(),e.vl()),this.Ox.Bx()&&this.Ox.dG(e.vl(),e.xl()),this.Px.Bx()&&this.Px.pG(l))}Kx(t,s){this.jx&&!s||this.XM||(this.tx.Bx()&&this.tx.mG(t),this.jx=!0)}gG(){this.jx=!1}Yx(t,s){this.Vx&&!s||this.XM||(this.nx.Bx()&&this.nx.mG(t),this.Vx=!0)}yG(){this.Vx=!1}$x(t){if(!this.XM)throw new Error("not device transform shader");this.tx.mG(t);const s=this.yb,i=s.nm()/2,e=s.gm()/2,n=s.Ew(i,e,s.cw(s.gm()),i,e,0,s.gm());this.nx.mG(n)}wG(t){this.hx.Bx()&&this.hx.SG(t[0],t[1],t[2],t[3])}static bG(){return Ii}static vG(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static MG(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static xG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static GG(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static TG(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static _G(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static IG(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static CG(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static EG(t,s,i){let e="";return 2<=t?e="#version 300 es\n":(s&&(e="#extension GL_EXT_frag_depth : enable\n"),i&&(e+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),e+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!i?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static PG(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static AG(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static FG(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static DG(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static OG(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static kG(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static LG(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static NG(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static BG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static WG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static jG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static VG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static HG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const Ci=self.Os,Ei=self.ws,Gn=Ei.Ms,Pi=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);Ci.Kg.ix=class{constructor(t,s,i){if(!Pi.has(i))throw new Error("invalid uniform type");this.Pv=t,this.$M=this.Pv.tG(),this.dr=s,this.df=i,this.UG="color"===this.df,this.zG=this.$M.getUniformLocation(this.Pv.sG(),s),this.JG=!!this.zG;const e=Pi.get(i);this.qG=new Float32Array(e),this.$G=new Float32Array(e)}lr(){this.Pv=null,this.$M=null,this.zG=null}Bx(){return this.JG}nG(){return this.df}XG(){return this.UG}Jx(t){this.Bx()&&(this.qG[0]=t,this.$G.set(this.qG),this.$M.uniform1f(this.zG,t))}Ux(t){this.Bx()&&(this.qG[0]=t,this.$G.set(this.qG),this.$M.uniform1i(this.zG,t))}zx(t,s){this.Bx()&&(this.qG[0]=t,this.qG[1]=s,this.$G.set(this.qG),this.$M.uniform2f(this.zG,t,s))}qx(t,s,i){this.Bx()&&(this.qG[0]=t,this.qG[1]=s,this.qG[2]=i,this.$G.set(this.qG),this.$M.uniform3f(this.zG,t,s,i))}Hx(t,s,i,e){this.Bx()&&(this.qG[0]=t,this.qG[1]=s,this.qG[2]=i,this.qG[3]=e,this.$G.set(this.qG),this.$M.uniform4f(this.zG,t,s,i,e))}KG(t){t=Math.fround(t);const s=this.qG;s[0]!==t&&(s[0]=t,this.$M.uniform1f(this.zG,t))}YG(t){const s=this.qG;s[0]!==t&&this.$M.uniform1i(this.zG,s[0]=t)}ZG(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.qG;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.$M.uniform2f(this.zG,t,s))}QG(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.qG;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.$M.uniform3f(this.zG,t,s,i))}SG(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const n=this.qG;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(n[0]=t,n[1]=s,n[2]=i,n[3]=e,this.$M.uniform4f(this.zG,t,s,i,e))}mG(t){const s=this.qG;Gn.W(s,t)||(Ci.kh(s,t,0),this.$M.uniformMatrix4fv(this.zG,!1,t))}hG(t){const s=this.$G;return this.XG()?s[0]===Math.fround(t.ea())&&s[1]===Math.fround(t.na())&&s[2]===Math.fround(t.ra()):s[0]===Math.fround(t)}aG(t){const s=this.$G;this.XG()?(s[0]=t.ea(),s[1]=t.na(),s[2]=t.ra()):s[0]=t}cG(t){return this.$G[0]===Math.fround(t)}uG(t,s){const i=this.$G;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}pG(t){this.$G[0]=t}dG(t,s){const i=this.$G;i[0]=t,i[1]=s}}}{const Ri=self.Os,Ai=self.ws,Hn=Ai.Is,Gn=Ai.Ms;Ri.Kg.tT=class{constructor(t){this.renderer=t,this.Zx=Gn.create(),this.Xx=Gn.create(),this.xM=null,this.GM=null,this.sT=!1,this.iT=Hn.I(1,1,1,1),this.Qx=null,this.eT=new Ri.Rect,this.clearColor=Ri.hr(Ri.Vo,0,0,0,0)}},Ri.Kg.nT=class{constructor(t){const s=new ArrayBuffer(96);this.df=0,this.rT=t,this.$M=t.renderer.P2(),this.hT=0,this.oT=0,this.aT=null,this.lT=new Float32Array(s,0,16),this.uT=new Float32Array(s,64,4),this.cT=new Float32Array(s,80,4),this.fT=[]}dT(t,s){this.df=1,this.hT=t,this.oT=s}pT(){const t=this.$M;t.drawElements(t.TRIANGLES,this.oT,t.UNSIGNED_SHORT,this.hT)}mT(t){this.df=2,this.aT=t}gT(){const t=this.$M,s=this.aT;t.bindTexture(t.TEXTURE_2D,s?s.z2():null)}yT(t){this.df=3,t.la(this.uT,0)}wT(){const t=this.uT,s=this.rT;Hn._(s.iT,t),s.Qx.wG(t)}ST(t){this.df=21,t.la(this.uT,0)}bT(){const t=this.uT,s=this.rT.Qx;s.Sx.Bx()&&s.Sx.SG(t[0],t[1],t[2],t[3])}vT(t,s){this.df=4,this.hT=t,this.oT=s}MT(){this.$M.blendFunc(this.hT,this.oT)}xT(t,s,i,e){this.df=5;const n=this.uT;n[0]=t,n[1]=s,n[2]=i,n[3]=e}GT(){const t=this.uT;this.$M.viewport(t[0],t[1],t[2],t[3])}TT(t){this.df=6,Gn._(this.lT,t)}_T(){const t=this.rT,i=t.renderer.Cy,e=t.Qx,n=this.lT;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.Kx(n,!0):r.gG()}Gn._(t.Xx,n)}IT(t){this.df=7,Gn._(this.lT,t)}CT(){const t=this.rT,i=t.renderer.Cy,e=t.Qx,n=this.lT;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.Yx(n,!0):r.yG()}Gn._(t.Zx,n)}ET(t){this.df=8,this.aT=t}PT(){const t=this.$M,s=this.aT,i=this.rT;s?(i.xM=s.TM(),i.GM=s._M(),i.sT&&i.GM?t.bindFramebuffer(t.FRAMEBUFFER,i.GM):t.bindFramebuffer(t.FRAMEBUFFER,i.xM)):(i.xM=null,i.GM=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}RT(t){this.df=9,t.la(this.lT,0)}AT(t,s,i,e){this.df=9;const n=this.lT;n[0]=t,n[1]=s,n[2]=i,n[3]=e}FT(){const t=this.$M,s=this.lT,i=this.rT,e=i.clearColor,n=s[0],r=s[1],h=s[2],o=s[3];e.da(n,r,h,o)||(t.clearColor(n,r,h,o),e.qo(n,r,h,o)),t.clear(t.COLOR_BUFFER_BIT)}DT(t){this.df=15,t.la(this.lT,0)}OT(){const t=this.lT;this.rT.eT.set(t[0],t[1],t[2],t[3])}kT(t,s){this.df=10,this.hT=t,this.oT=1,this.lT[0]=s}LT(){const t=this.$M,s=this.rT,i=s.renderer,e=i.Ry,n=(t.useProgram(e.Hb),e.Kx(s.Xx,!1),e.Yx(s.Zx,!1),s.eT),r=(e.ux.Bx()&&e.ux.ZG(n.bl(),n.vl()),e.mx.Bx()&&e.mx.ZG(n.Ml(),n.xl()),this.lT[0]);if(e.gx.Bx()&&e.gx.KG(r),e.hx.Bx()){const h=s.iT;e.hx.SG(h[0],h[1],h[2],h[3])}t.drawArrays(t.POINTS,this.hT/4,this.oT),t.useProgram(s.Qx.Hb)}NT(t){this.df=11,this.aT=t}BT(){const t=this.$M,s=this.rT,i=this.aT;if(s.Qx=i,t.useProgram(i.Hb),i.Kx(s.Xx,!1),i.Yx(s.Zx,!1),i.hx.Bx()){const e=s.iT;i.hx.SG(e[0],e[1],e[2],e[3])}}WT(){this.df=12}jT(){const t=this.rT.Qx,s=this.$M,i=this.lT,e=this.uT,n=this.cT;if(t.vx.Bx()){const r=this.rT.renderer,h=this.aT;r.VT!==h&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,h?h.z2():null),r.VT=h,s.activeTexture(s.TEXTURE0))}t.Ex.Bx()&&t.Ex.ZG(i[0],i[1]),t.xx.Bx()&&t.xx.ZG(i[2],i[3]),t.Gx.Bx()&&t.Gx.ZG(i[4],i[5]),t.Rx.Bx()&&t.Rx.KG(this.oT),t.Ax.Bx()&&t.Ax.KG(i[6]),t.Fx.Bx()&&t.Fx.KG(i[7]),t.Tx.Bx()&&t.Tx.ZG(i[12],i[13]),t._x.Bx()&&t._x.ZG(i[14],i[15]),t.Ix.Bx()&&t.Ix.ZG(n[0],n[1]),t.Cx.Bx()&&t.Cx.ZG(n[2],n[3]),t.Dx.Bx()&&t.Dx.ZG(e[0],e[1]),t.Ox.Bx()&&t.Ox.ZG(e[2],e[3]),t.Px.Bx()&&t.Px.KG(this.hT)}HT(){this.df=13}UT(){const t=this.rT.Qx,i=t.Wx,e=this.fT;for(let t=0,s=i.length;t<s;++t){const n=i[t],r=e[t];n.XG()?n.QG(r.ea(),r.na(),r.ra()):n.KG(r)}}zT(t){this.df=14,this.aT=t}JT(){const t=this.$M,s=this.aT,i=this.rT.xM;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}qT(t,s,i){this.df=17;const e=this.lT,n=this.rT.renderer,r=(e[0]=t.nm(),e[1]=t.gm(),e[2]=(s||n).nm(),e[3]=(s||n).gm(),e[4]=t.EM()?1:0,e[5]="stretch"===i,this.fT);Ri.Nh(r),r.push(t.TM()),r.push(s?s.TM():null)}$T(){const t=this.lT,s=this.fT,i=this.$M,e=t[0],n=t[1],r=t[2],h=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,n,0,0,r,h,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const c=Math.min(e,r),f=Math.min(n,h),d=Math.max(n-h,0),p=Math.max(h-n,0);i.blitFramebuffer(0,d,c,f+d,0,p,c,f+p,i.COLOR_BUFFER_BIT,i.NEAREST)}}XT(t){this.df=18,this.aT=t}KT(){this.aT.YT(),this.aT=null}ZT(t){this.df=19,this.aT=t}QT(){this.aT.t_(),this.aT=null}s_(t,s,i){this.df=20;const e=this.lT;e[0]=t,e[1]=s,e[2]=i}i_(){const t=this.rT.Qx,s=this.lT;t.Ex.Bx()&&t.Ex.ZG(s[0],s[1]),t.bx.Bx()&&t.bx.KG(s[2])}e_(t,s,i,e,n,r,h){this.df=16;const o=this.lT;t.la(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=n/i,o[8]=r/s,o[9]=h/i}n_(){const t=this.rT.Qx,s=this.lT;t.Tx.Bx()&&t.Tx.ZG(s[0],s[1]),t.Ex.Bx()&&t.Ex.ZG(s[4],s[5]),t.yx.Bx()&&t.yx.ZG(s[6],s[7]),t.wx.Bx()&&t.wx.ZG(s[8],s[9])}r_(t,s,i,e,n,r,h){this.df=29;const o=this.lT;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=n,o[5]=r,o[6]=h}h_(){const t=this.rT.Qx,s=this.lT;t.Ex.Bx()&&t.Ex.ZG(s[0],s[1]),t.yx.Bx()&&t.yx.ZG(s[2],s[3]),t.bx.Bx()&&t.bx.KG(s[4]),t.wx.Bx()&&t.wx.ZG(s[5],s[6])}o_(t){this.df=22,this.hT=t?1:0}a_(){const t=this.$M,s=0!==this.hT;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}l_(t){this.df=23,this.hT=t?1:0}u_(){const t=this.$M;0===this.hT?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}c_(t){this.df=24,this.hT=t?1:0}f_(){const t=this.$M,s=this.rT,i=s.renderer,e=0!==this.hT;s.sT=e,t.activeTexture(t.TEXTURE2),e?(s.GM&&t.bindFramebuffer(t.FRAMEBUFFER,s.GM),t.bindTexture(t.TEXTURE_2D,i.wM())):(t.bindTexture(t.TEXTURE_2D,null),s.GM&&t.bindFramebuffer(t.FRAMEBUFFER,s.xM)),t.activeTexture(t.TEXTURE0)}d_(){this.df=25}p_(){const t=this.$M;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}m_(){this.df=26}g_(){const t=this.$M;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}y_(){this.df=27}w_(){const t=this.$M;t.disable(t.STENCIL_TEST)}S_(t,s,i,e,n){this.df=28,this.hT=t?1:0;const r=this.lT;r[0]=s,r[1]=i,r[2]=e,r[3]=n}b_(){const t=this.$M,s=this.lT;1===this.hT?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}v_(){switch(this.df){case 1:return void this.pT();case 2:return void this.gT();case 3:return void this.wT();case 4:return void this.MT();case 5:return void this.GT();case 6:return void this._T();case 7:return void this.CT();case 8:return void this.PT();case 9:return void this.FT();case 10:return void this.LT();case 11:return void this.BT();case 12:return void this.jT();case 13:return void this.UT();case 14:return void this.JT();case 15:return void this.OT();case 16:return void this.n_();case 17:return void this.$T();case 18:return void this.KT();case 19:return void this.QT();case 20:return void this.i_();case 21:return void this.bT();case 22:return void this.a_();case 23:return void this.u_();case 24:return void this.f_();case 25:return void this.p_();case 26:return void this.g_();case 27:return void this.w_();case 28:return void this.b_();case 29:return void this.h_()}}}}{let I=function(t,s,i,e,n,r){s?t.strokeRect(i,e,n,r):t.fillRect(i,e,n,r)},t=function(t){return t*(4/3)},o=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};I,t,o;const Fi=self.Os,Di=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Oi={timeout:60},ki=new Fi.Vo(0,0,0,1),Li=new Set(["left","center","right"]),Ni=new Set(["top","center","bottom"]),Bi=new Set(["word","cjk","character"]),Wi=new Set(["ltr","rtl"]),ji=new Set;Fi.FontManager&&Fi.FontManager.addEventListener("fontload",t=>{const s=t.font.$c();for(const i of ji)(i.M_()||Fi.mn(i.x_(),s))&&i.G_()});let s=!1,i=!1;Fi.Kg.mb=class{constructor(t,s){s=Object.assign({},Oi,s),this.yb=t,this.T_="Arial",this.__=16,this.I_=1,this.C_=0,this.E_=!1,this.P_=!1,this.R_="black",this.A_=!1,this.Yp=null,this.F_=!0,this.D_=null,this.O_=new Set,this.k_="left",this.L_="top",this.nf="",this.N_=null,this.B_=Fi.hr(Fi.Xp),this.W_="word",this.j_="ltr",this.V_=!1,this.H_=!1,this.U_=!1,this.z_=-1,this.J_=0,this.q_=0,this.X_=0,this.Hm=0,this.Um=0,this.K_=1,this.Y_=null,this.Z_=null,this.Q_=null,this.tI=null,this.sI=-1,this.iI=-1,this.eI="",this.nI="",this.rI="",this.hI=1,this.oI=1,this.aI=t=>this.lI(t),this.w2=null,this.uI=new Fi.Rect,this.cI=1,this.fI=new Fi.t0(()=>{this.dI(),this.pI(8,8)},s.timeout),this.mI=null,this.gI=!1,ji.add(this)}lr(){this.D_=null,this.O_.clear(),this.Yp=null,this.N_=null,this.Y_=null,this.Z_=null,this.Q_=null,this.tI=null,this.aI=null,this.fI.lr(),this.mI=null,this.dI(),this.B_.Yu(),this.B_=null,this.yb=null,this.gI=!0,ji.delete(this)}yI(){this.U_=!0}wI(){this.yI(),this.H_=!0}G_(){this.wI(),this.V_=!0}SI(t){if(this.A_!==(t=!!t)){this.A_=t;const s=this.A_?"alphabetic":"top";this.Z_&&(this.Z_.textBaseline=s),this.Q_&&(this.Q_.textBaseline=s),this.G_()}}M_(){return this.A_}tm(t){this.Yp!==t&&(this.Yp=t,this.B_.tm(t),this.Yp&&this.Yp.Lg()&&this.Yp.Ng().then(()=>this.yI()),this.G_())}bI(t){this.F_!==(t=!!t)&&(this.F_=t,this.yI())}vI(t){this.T_!==(t=t||"serif")&&(this.T_=t,this.G_())}x_(){return this.T_}MI(t){this.__!==(t=t<.1?.1:t)&&(this.__=t,this.G_())}xI(){return this.__}GI(t){this.I_!==t&&(this.I_=t,this.G_())}TI(t){this.C_!==t&&(this.C_=t,this.wI())}_I(){return this.C_}II(t){this.E_!==(t=!!t)&&(this.E_=t,this.G_())}CI(){return this.E_}EI(t){this.P_!==(t=!!t)&&(this.P_=t,this.G_())}RI(){return this.P_}AI(t){t=Math.floor(t),this.z_!==t&&(this.z_=t,this.yI())}FI(){return this.z_}DI(t,s){let i=[];(this.E_||s.rg("b"))&&i.push("bold"),(this.P_||s.rg("i"))&&i.push("italic");const e=s.ng("size"),n=(e?parseFloat(e.Vp):this.__)*this.I_;i.push(t?n+"pt":n*this.OI()+"pt");let r=this.T_,h=s.ng("font");return h&&h.Vp&&(r=h.Vp,this.D_)&&!this.O_.has(r)&&(this.D_(r),this.O_.add(r)),r&&(Di.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}Kb(t){t instanceof Fi.Vo&&(t=t.ba()),this.R_!==t&&(this.R_=t,this.yI())}kI(t,s,i){ki.$o(t,s,i),this.Kb(ki)}LI(t){if(!Li.has(t))throw new Error("invalid horizontal alignment");this.k_!==t&&(this.k_=t,this.wI())}NI(){return this.k_}BI(t){if(!Ni.has(t))throw new Error("invalid vertical alignment");this.L_!==t&&(this.L_=t,this.wI())}WI(){return this.L_}jI(t){if(!Bi.has(t))throw new Error("invalid word wrap mode");this.W_!==t&&(this.W_=t,this.G_())}VI(){return this.W_}HI(t){if(!Wi.has(t))throw new Error("invalid text direction");this.j_!==t&&(this.j_=t,this.Z_&&(this.Z_.direction=this.j_),this.Q_&&(this.Q_.direction=this.j_),this.G_())}UI(){return this.j_}lf(t){this.nf!==t&&(this.nf=t,this.G_())}zI(){return this.nf}OI(){return this.cI*this.K_*self.devicePixelRatio}JI(r,h,o){if(void 0===o&&(o=1),!(r<=0||this.q_===r&&this.X_===h&&this.K_===o)){let t=this.q_,s=(this.q_=r,this.X_=h,this.K_=o,self.devicePixelRatio),i=(this.Hm=this.q_*this.K_*s,this.Um=this.X_*this.K_*s,Math.max(this.Hm,this.Um)),e=Math.min(this.yb.E2(),4096),n=1;e<i&&(n=e/i,this.Hm=Math.min(this.Hm*n,e),this.Um=Math.min(this.Um*n,e)),this.cI=n,this.q_!==t?this.G_():this.wI()}}nm(){return this.Hm}gm(){return this.Um}qI(){return this.K_}$I(){return this.XI(),this.B_.jm()}KI(){return this.XI(),this.B_.Vm()+this.B_.Qp()*(this.C_+4)-this.C_}YI(){this.XI();let t=0;for(const s of this.B_.Zp())for(const i of s.xm())t+=i.Gm();return t}IM(){return this.fI.r0(),this.ZI(),this.w2}QI(t,s){this.XI();const i=this.OI(),e=this.B_.Zp();for(const n of e){const r=n.wm()*i;if(s>=n.sg()-n.gm()*i+r&&s<n.sg()+r)for(const h of n.xm())if(t>=h.Qm()&&t<h.Qm()+h.nm()*i)return h}return null}*tC(t){this.XI();const s=this.B_.Zp();for(const i of s)for(const e of i.xm()){const n=e.ng("tag");n&&Fi.mn(n.Vp,t)&&(yield e)}}sC(t,s){for(const i of this.tC(t)){if(0===s)return i;--s}return null}iC(t){let s=0;for(const i of this.tC(t))++s;return s}ZI(){this.w2&&!this.U_&&!this.H_&&!this.V_||this.gI||this.Hm<=0||this.Um<=0||(this.U_=!1,this.eC())}eC(){this.gI||(this.XI(),this.pI(Math.max(Fi.Br(Math.ceil(this.Hm)),128),Math.max(Fi.Br(Math.ceil(this.Um)),64)),this.nC(),this.rC(),this.fI.r0())}pI(t,s){this.Y_||(this.Y_=Fi.Po(16,16));let i=!1;this.sI===t&&this.iI===s||(this.sI=t,this.iI=s,this.Y_.width=t,this.Y_.height=s,i=!0),this.Z_||(this.Z_=this.Y_.getContext("2d"),i=!0),i?(this.Z_.textBaseline=this.A_?"alphabetic":"top",this.Z_.direction=this.j_,this.Z_.font=this.eI,this.Z_.fillStyle=this.rI,this.Z_.strokeStyle=this.rI,this.Z_.globalAlpha=this.hI,this.Z_.lineWidth=this.oI):this.Z_.clearRect(0,0,t,s)}hC(){this.Q_||(this.Q_=Fi.Po(16,16).getContext("2d"),this.tI=Fi.Po(16,16).getContext("2d"),this.Q_.textBaseline=this.A_?"alphabetic":"top",this.tI.textBaseline="top",this.Q_.direction=this.j_,this.tI.direction=this.j_)}oC(t){this.nI!==t&&(this.nI=t,this.Q_.font=t,this.tI.font=t)}aC(){if(!s){s=!0,this.hC();const t=this.Q_.measureText("test");i="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return i}XI(){this.lC(),this.uC()}lC(){this.V_&&(this.hC(),!this.A_||this.N_&&this.N_.toString()===this.nf||(this.N_=new Fi.Cn(this.nf,{Ep:!0})),this.B_.Xp(this.A_?this.N_.Wp():this.nf,this.aI,this.q_,this.W_,0),this.V_=!1)}uC(){this.H_&&(this.cC(),this.H_=!1)}lI(t){let s=t.um()?t.Rm().join(""):" ",i=(this.oC(this.DI(!0,t)),t.ng("size")),e=(i?parseFloat(i.Vp):this.__)*this.I_,n=this.Q_.measureText(s),r=0;if(this.A_&&this.aC()){const h=this.tI.measureText(s);r=n.fontBoundingBoxAscent-h.fontBoundingBoxAscent}return{width:n.width,height:4/3*e,fontBoundingBoxAscent:n.fontBoundingBoxAscent||0,fontBoundingBoxDescent:n.fontBoundingBoxDescent||0,lm:r}}fC(t){this.eI!==t&&(this.eI=t,this.Z_.font=t)}dC(t){this.rI!==t&&(this.rI=t,this.Z_.fillStyle=t,this.Z_.strokeStyle=t)}pC(t){this.hI!==t&&(this.hI=t,this.Z_.globalAlpha=t)}mC(t){this.oI!==t&&(this.oI=t,this.Z_.lineWidth=t)}cC(){let e=this.OI(),n=(4+this.C_)*e,r=0,h=this.B_.Zp();if(0!==h.length){for(const s of h){s.Zm(NaN),s.tg(NaN);for(const o of s.xm())o.Zm(NaN),o.tg(NaN)}let t=this.A_&&this.aC(),i=h[0].gm()*e;if("center"===this.L_){const a=h.reduce((t,s)=>t+s.gm()*e+n,0)-n;r=Math.max(this.Um/2-a/2,0),t&&(i=h[0].Sm()*e)}else if("bottom"===this.L_){const l=h.reduce((t,s)=>t+s.gm()*e+n,0)-this.C_*e,u=t?h.at(-1).wm()*e:0;r=this.Um-l-u-2}for(let t=0,s=h.length;t<s;++t){const c=h[t],f=c.gm()*e,d=r;if(this.A_){if(r+=0===t?i:f,0<t&&r>this.Um-4*e)break}else if(0<t&&r>=this.Um-f)break;0<=d&&this.gC(c,r,e),this.A_||(r+=f),r+=n}}}gC(t,s,i){let e=0;"center"===this.k_?e=Math.floor((this.Hm-t.nm()*i)/2):"right"===this.k_&&(e=this.Hm-t.nm()*i),t.Zm(e),t.tg(s);for(const n of"ltr"===this.j_?t.xm():t.Km())this.yC(n,e,s,i),e+=n.nm()*i}yC(t,s,i,e){const n=t.ng("offsetx"),r=(s+=n?o(n.Vp,t.gm())*e:0,t.ng("offsety"));if(i+=r?o(r.Vp,t.gm())*e:0,t.dm()){const h=t.ng("iconoffsety");i+=h?o(h.Vp,t.gm())*e:.2*t.gm()*e}t.Zm(s),t.tg(i)}nC(){this.Z_.imageSmoothingEnabled=this.F_,this.Z_.imageSmoothingQuality="high",this.J_=0;const t=this.OI(),s=this.B_.Zp();for(const i of s)this.wC(i,t)}wC(t,s){const i=t.Qm(),e=t.sg();if(Number.isFinite(i)&&Number.isFinite(e))for(const n of"ltr"===this.j_?t.xm():t.Km())this.SC(n,s,t.gm())}SC(h,o,a){const l=this.Z_,u=h.Qm(),c=h.sg();if(Number.isFinite(u)&&Number.isFinite(c)){let t=a/16,s=h.nm()*o,i=h.gm()*o,e=h.gm()/16,n=(4+this.C_)*o,r=h.um()?h.Rm():null;if(-1!==this.z_){if(this.J_>=this.z_)return;h.um()&&this.J_+r.length>this.z_&&(r=r.slice(0,this.z_-this.J_),s=this.lI(h).width*o),this.J_+=h.Gm()}const f=h.ng("background"),d=h.rg("u"),p=h.rg("s");if((!h.um()||!Fi.N1(r)||f||d||p)&&!h.rg("hide")){const m=h.ng("color"),g=h.ng("opacity"),y=(this.pC(g?parseFloat(g.Vp)/100:1),f&&(this.dC(f.Vp),l.fillRect(u,c-i,s,i+n)),h.ng("linethickness")),w=y?parseFloat(y.Vp):1,S=h.rg("stroke");if(S&&this.mC(.5*e*w*this.OI()),h.um()){const b=r.join("");if(this.fC(this.DI(!1,h)),!S){this.mC(.5*e*w*this.OI());const v=h.ng("outlineback");v&&(this.dC(v.Vp),this.bC(!0,b,u,c,s))}if(this.dC(m?m.Vp:this.R_),this.bC(S,b,u,c,s),!S){this.mC(.5*e*w*this.OI());const M=h.ng("outline");M&&(this.dC(M.Vp),this.bC(!0,b,u,c,s))}}else if(h.dm()&&0<h.nm()){const x=h.pg(this.Yp);x&&l.drawImage(x,u,c-i,s,i)}if(this.dC(m?m.Vp:this.R_),d&&I(l,S,u,c+o*t,s,o*t*w),p){const G=c-i/4,T=o*e,_=G+T/2;l.fillRect(u,_-T*w/2,s,T*w)}}}}bC(t,s,i,e,n){"rtl"===this.j_&&(i+=n),t?"Gecko"===Fi.hi.di?this.Z_.strokeText(s,i,e,n):this.Z_.strokeText(s,i,e):"Gecko"===Fi.hi.di?this.Z_.fillText(s,i,e,n):this.Z_.fillText(s,i,e)}rC(){this.yb.vC()||(this.w2||(this.w2=this.yb.yM(this.Y_.width,this.Y_.height,{f2:!0,d2:"high"})),this.yb.MC(this.Y_,this.w2),this.uI.set(0,0,this.Hm/this.w2.nm(),this.Um/this.w2.gm()),this.mI&&this.mI())}xC(){return this.uI}dI(){this.w2&&(this.yb.vC()||this.yb.vM(this.w2),this.w2=null)}static Yb(){for(const t of ji)t.dI()}static GC(){return ji.values()}}}{const Vi=self.Os;class Hi{constructor(t){this.$M=t.P2(),this.TC=t.R2(),this._C=t.IC(),this.CC=null,this.n0=!1,this.EC=!1,this.PC=0,1===this.TC?this.CC=this._C.createQueryEXT():this.CC=this.$M.createQuery()}lr(){this.RC(),this.$M=null,this._C=null,this.EC=!1}RC(){this.CC&&(1===this.TC?this._C.deleteQueryEXT(this.CC):this.$M.deleteQuery(this.CC),this.CC=null)}YT(){if(this.n0)throw new Error("query already active");1===this.TC?this._C.beginQueryEXT(this._C.TIME_ELAPSED_EXT,this.CC):this.$M.beginQuery(this._C.TIME_ELAPSED_EXT,this.CC),this.n0=!0}t_(){if(!this.n0)throw new Error("query not active");1===this.TC?this._C.endQueryEXT(this._C.TIME_ELAPSED_EXT):this.$M.endQuery(this._C.TIME_ELAPSED_EXT),this.n0=!1}AC(){if(this.CC&&!this.EC&&!this.n0){let t;t=1===this.TC?this._C.getQueryObjectEXT(this.CC,this._C.QUERY_RESULT_AVAILABLE_EXT):this.$M.getQueryParameter(this.CC,this.$M.QUERY_RESULT_AVAILABLE);const s=this.$M.getParameter(this._C.GPU_DISJOINT_EXT);t&&!s&&(1===this.TC?this.PC=this._C.getQueryObjectEXT(this.CC,this._C.QUERY_RESULT_EXT):this.PC=this.$M.getQueryParameter(this.CC,this.$M.QUERY_RESULT),this.PC/=1e9,this.EC=!0),(t||s)&&this.RC()}}FC(){return this.EC}DC(){if(this.EC)return this.PC;throw new Error("no result available")}}Vi.Kg.OC=class{constructor(t){this.yb=t,this.iw=t.ib(),this.n0=!1,this.kC=null,this.LC=!1,this.NC=null,this.BC=[]}lr(){for(const t of this.BC)t instanceof Hi&&t.lr();Vi.Nh(this.BC),this.kC=null,this.NC=null,this.yb=null}YT(){if(this.n0)throw new Error("query already active");const t=this.yb.WC();0<t.length?(this.LC=!0,this.kC=t.at(-1),this.kC.jC(),this.kC.BC.push(this)):(this.LC=!1,this.kC=null),this.n0=!0,t.push(this),this.VC()}t_(){if(!this.n0)throw new Error("query not active");const t=this.yb.WC().pop();if(t!==this)throw new Error("can only end most nested query");this.n0=!1,this.jC(),this.kC&&(this.kC.VC(),this.kC=null)}VC(){this.NC=Vi.hr(Hi,this.yb),this.BC.push(this.NC),this.NC.YT()}jC(){this.NC.t_(),this.NC=null}AC(){for(const t of this.BC)t.AC()}HC(){return this.LC}FC(){return this.BC.every(t=>t.FC())}DC(){return this.BC.reduce((t,s)=>t+s.DC(),0)}ib(){return this.iw}}}{const Ui=self.Os;Ui.Kg.UC=class{constructor(t,s=1e3){this.yb=t,this.zC=s,this.JC=[],this.yb.qC(this)}lr(){this.Yu(),this.yb.$C(this),this.yb=null}Yu(){for(const t of this.JC)t.lr();Ui.Nh(this.JC)}XC(){const t=new Ui.Kg.OC(this.yb);if(this.JC.push(t),this.JC.length>this.zC){const s=this.JC.shift();s.lr()}return t}KC(t){for(const s of this.JC){if(s.ib()>=t)return;if(s.HC())return;s.AC()}}YC(t,s){if(s<=t)return NaN;let i=0;for(const e of this.JC){if(e.ib()>=s)break;if(!(e.ib()<t)){if(!e.FC())return NaN;i+=e.DC()}}return i}ZC(i){for(let t=0,s=this.JC.length;t<s;++t){const e=this.JC[t];if(!(e.ib()<i))return void(0<t&&this.JC.splice(0,t));e.lr()}}}}{let i=function(){n=-1;for(const t of e)t.QC()&&(t.resolve(),e.delete(t));0<e.size&&(n=self.requestAnimationFrame(i))},b=(i,self.Os),t=self.ws,v=(t._s,t.Is),y=t.Ms,r={powerPreference:"default",tE:!0,alpha:!1,depth:!1,sE:!1,iE:2,failIfMajorPerformanceCaveat:!1},h=new Set(["default","low-power","high-performance"]),c=new b.Kl(0,0,1,0,1,1,0,1),w=y.create(),S=y.create(),M=new b.Kl,x=new b.Rect,G=null,e=(b.isDebug&&(self.eE=function(){G?G.loseContext():console.warn("WEBGL_lose_context not supported")},self.nE=function(){G?G.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),n=-1;b.Kg.rE=class extends b.Kg.by{constructor(t,s){if(super(s),s=Object.assign({},r,s),!h.has(s.powerPreference))throw new Error("invalid power preference");let i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat},e=null,n=0;if(2<=s.iE&&(e=t.getContext("webgl2",i),n=2),e||(e=t.getContext("webgl",i),n=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.$M=e,this.hE=e.getContextAttributes(),this.oE=e.getParameter(e.VERSION),this.TC=n,this.aE=v.create(),this.lE=!1,this.uE=y.create(),this.cE=!!s.depth,this.fE=!(!s.depth||!s.sE),this.dE=this.cE,this.pE=!1,this.mE=null,this.gE=!0,this.yE=0,this.wE=0,this.YM=null,this.ZM=null,this.SE=null,this.QM=null,this.bE=new Float32Array(8e3*this.QS()),this.vE=new Uint16Array(12e3),this.ME=new Float32Array(16e3),this.xE=new Float32Array(32e3),this.GE=0,this.TE=0,this._E=0,this.IE=0,this.CE=null,this.EE=null,this.PE=[],this.RE=0,this.AE=0,this.FE=null,this.DE=0,this.rT=b.hr(b.Kg.tT,this),this.OE=b.hr(b.Vo,1,1,1,1),this.kE=null,this.VT=null,this.LE=0,this.NE=0,this.BE=new b.Rect,this.WE=b.hr(b.Rect,0,0,-1,-1),this.jE=0,this.VE=-1,this.HE=0,this.UE=0,this.zE=0,this.JE="(unavailable)",this.qE="(unavailable)",this.$E=[],this.XE=!1,this.KE=null,this.YE=null,this.ZE=null,this.QE=null,this.tP=null,this.sP=null,this.iP=0,this.eP=!!s.tE,this._C=null,this.nP=new Set,this.rP=[],this.hw(this.vE)}ab(){return!0}async lw(){super.lw();const t=this.$M,s=this.QS(),i=(this.OE.qo(1,1,1,1),this.kE=null,this.VT=null,this.GE=0,this._E=0,this.IE=8e3*s-4*s,b.Nh(this.PE),this.RE=0,this.AE=0,this.CE=null,this.FE=null,this.BE.set(0,0,1,1),this.DE=0,this.rT),e=(i.Qx=null,i.xM=null,i.GM=null,v.set(i.iT,1,1,1,1),i.clearColor.qo(0,0,0,0),i.eT.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.LE=t.ONE,this.NE=t.ONE_MINUS_SRC_ALPHA,this.hP(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.cE?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.dE=this.cE,this.pE=!1,this.QM=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.QM),t.bufferData(t.ARRAY_BUFFER,this.xE.byteLength,t.DYNAMIC_DRAW),this.YM=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.YM),t.bufferData(t.ARRAY_BUFFER,this.bE.byteLength,t.DYNAMIC_DRAW),this.ZM=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.ZM),t.bufferData(t.ARRAY_BUFFER,this.ME.byteLength,t.DYNAMIC_DRAW),this.SE=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.SE),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.vE,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.VE=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),n=(this.HE=e[0],this.UE=e[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),h=(this.zE=n&&r?Math.min(n.precision,r.precision):0,2048<this.UE&&(this.UE=2048),this.$E=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(h&&(this.JE=t.getParameter(h.UNMASKED_VENDOR_WEBGL),this.qE=t.getParameter(h.UNMASKED_RENDERER_WEBGL)),this.KE=t.getExtension("KHR_parallel_shader_compile"),b.isDebug&&(G=t.getExtension("WEBGL_lose_context")),this.eP&&(1===this.R2()?this._C=t.getExtension("EXT_disjoint_timer_query"):this._C=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.YE=t.getExtension("EXT_texture_filter_anisotropic"),this.YE?this.iP=t.getParameter(this.YE.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.iP=0,this.R2()<2&&this.cE&&this.fE&&(this.ZE=t.getExtension("WEBGL_depth_texture"),!this.ZE))throw new Error("no depth texture support");this.R2()<2&&(this.QE=t.getExtension("EXT_frag_depth"),this.tP=t.getExtension("OES_standard_derivatives"),this.sP=t.getExtension("EXT_shader_texture_lod"));let o=b.Kg.VM,a=o.vG(!1),l=o.xG(),u=a,c=o.FG(),f=o.PG(),d=o._G(),p=o.vG(!0),m=!1;this.cE&&(this.R2()<2?this.QE&&(l=o.GG(),c=o.DG(),d=o.IG(),m=!0):(u=o.MG(),l=o.TG(),c=o.OG(),f=o.AG(),d=o.CG(),p=o.MG(!0)));const g=o.EG(this.R2(),m,this.tP&&this.sP),y=2<=this.R2()?o.MG():a,w=[[l,u,"<default>"],[l,u,"<default-device-transform>"],[c,f,"<point>"],[o.kG(),a,"<fill>"],[o.LG(),a,"<lineargradient>"],[o.NG(),a,"<penumbra>"],[o.WG(),a,"<hardellipse>"],[o.jG(),a,"<hardellipseoutline>"],[o.VG(),a,"<smoothellipse>"],[o.HG(),a,"<smoothellipseoutline>"],[o.BG(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],S=await Promise.all(w.map(t=>this.oP({src:t[0],UM:t[1],name:t[2]})));this.Py=S[0],this.EE=S[1],this.Ry=S[2],this.Dy=S[3],this.Oy=S[4],this.ky=S[5],this.Ly=S[6],this.Ny=S[7],this.By=S[8],this.Wy=S[9],this.jy=S[10],this.Ay=S[11],this.Fy=S[12],this.Dw()}async oP(t){const s=await b.Kg.VM.qM(this,t);return this.Pw(s),s}aP(){this.CE=null}JI(t,s,i){if(this.Hm!==t||this.Um!==s||i){this.sb();const e=this.$M,n=this.rT;this.Hm=t,this.Um=s,this.lP(0,0,t,s),this.Tw(this.uE,t/s),this.uP(this.uE),this.EE&&(e.useProgram(this.EE.sG()),this.EE.$x(this.xy),this.CE=this.EE,this.rT.Qx=this.EE),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.kE=null,this.VT=null,this.cE&&this.gE&&this.cP(this.Hm,this.Um),this.FE&&this.FE.bM(this.Hm,this.Um),e.bindFramebuffer(e.FRAMEBUFFER,null),this.FE=null,n.xM=null,n.GM=null}}cP(t,s){const i=this.$M;this.mE&&this.yE===t&&this.wE===s||(this.fE?(this.mE&&i.deleteTexture(this.mE),this.mE=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.mE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),2<=this.R2()?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.ZE&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.ZE.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.mE&&i.deleteRenderbuffer(this.mE),this.mE=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.mE),i.renderbufferStorage(i.RENDERBUFFER,2<=this.TC?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.yE=t,this.wE=s)}fP(t,s){this.cE&&(this.gE=!1,this.cP(t,s))}dP(){this.cE&&(this.gE=!0,this.cP(this.Hm,this.Um))}lP(t,s,i,e){const n=this.aE;if(n[0]!==t||n[1]!==s||n[2]!==i||n[3]!==e){const r=this.pP();r.xT(t,s,i,e),v.set(n,t,s,i,e),this.AE=0}}Sw(t){super.Sw(t),this.Tw(this.uE,this.Hm/this.Um)}mw(t){super.mw(t),this.Tw(this.uE,this.Hm/this.Um)}yw(t){super.yw(t),this.Tw(this.uE,this.Hm/this.Um)}uP(t){if(!y.W(this.xy,t)){const s=this.pP();s.TT(t),y._(this.xy,t),this.AE=0,this.lE=!0}}mP(){let t,s,i,e=this.FE;i=(null===e?(t=this.uE,s=this.nm(),this):(t=e.CM(),s=e.nm(),e)).gm(),this.uP(t),this.lP(0,0,s,i)}gP(t){if(!y.W(this.Gy,t)){const s=this.pP();s.IT(t),y._(this.Gy,t),this.AE=0,this.lE=!0}}yP(){this.lE=!1}wP(){return this.lE}MM(){return this.rT}pP(){const t=this.PE;return this.RE===t.length&&t.push(new b.Kg.nT(this.rT)),t[this.RE++]}sb(){0===this.RE||this.vC()||(this.SP(),this.bP(),this.RE=0,this.GE=0,this.TE=0,this._E=0,this.AE=0)}SP(){const t=this.$M;0<this._E&&(t.bindBuffer(t.ARRAY_BUFFER,this.QM),t.bufferSubData(t.ARRAY_BUFFER,0,this.xE.subarray(0,this._E))),0<this.GE&&(t.bindBuffer(t.ARRAY_BUFFER,this.YM),t.bufferSubData(t.ARRAY_BUFFER,0,this.bE.subarray(0,this.GE)),t.bindBuffer(t.ARRAY_BUFFER,this.ZM),t.bufferSubData(t.ARRAY_BUFFER,0,this.ME.subarray(0,this.TE)))}bP(){const i=this.PE;for(let t=0,s=this.RE;t<s;++t)i[t].v_()}vP(){return this.OE.oa()}MP(t,s,i,e){const n=this.OE;if(!n.da(t,s,i,e)){n.qo(t,s,i,e);const r=this.pP();r.yT(n),this.AE=0,this.Hy=null}}xP(t){const s=this.OE;if(s.oa()!==t){s.ta(t);const i=this.pP();i.yT(s),this.AE=0,this.Hy=null}}Kb(t){const s=this.OE;if(!s.equals(t)){s.set(t);const i=this.pP();i.yT(s),this.AE=0,this.Hy=null}}GP(){this.MP(1,1,1,1)}TP(){return this.OE}_P(t){if(t!==this.kE){const s=this.pP();s.mT(t),this.kE=t,this.AE=0}}O2(){this.kE=null}Xb(t){const s=this.oS(t);this.IP(s[0],s[1])}CP(t){const s=this.uS(t);this.IP(s.rS,s.hS)}IP(t,s){if(t!==this.LE||s!==this.NE){const i=this.pP();i.vT(t,s),this.LE=t,this.NE=s,this.AE=0,this.Hy=null}}EP(){return this.LE===this.$M.ONE&&this.NE===this.$M.ONE_MINUS_SRC_ALPHA}PP(){this.IP(this.$M.ONE,this.$M.ONE_MINUS_SRC_ALPHA)}RP(){this.IP(this.$M.SRC_ALPHA,this.$M.ONE_MINUS_SRC_ALPHA)}AP(){this.IP(this.$M.ONE,this.$M.ZERO)}Rect(t){this.FP(t.bl(),t.vl(),t.Ml(),t.xl())}FP(t,s,i,e){this.ZS(t,s,i,s,i,e,t,e)}DP(){let t=this.GE;if(t>=this.IE&&(this.sb(),t=0),1===this.AE)this.PE[this.RE-1].oT+=6;else{const s=this.pP();s.dT(t,6),this.AE=1}}OP(t){t.gu(this.bE,this.GE,this.Jy+this.qy),this.GE+=12}Kl(t){this.DP(),this.OP(t),c.la(this.ME,this.TE),this.TE+=8}ZS(t,s,i,e,n,r,h,o){this.DP();let a=this.bE,l=this.GE,u=this.Jy+this.qy;a[l++]=t,a[l++]=s,a[l++]=u,a[l++]=i,a[l++]=e,a[l++]=u,a[l++]=n,a[l++]=r,a[l++]=u,a[l++]=h,a[l++]=o,a[l++]=u,this.GE=l,c.la(this.ME,this.TE),this.TE+=8}TS(t,s){this.DP(),this.OP(t),s._l(this.ME,this.TE),this.TE+=8}kP(t,s){this.DP(),this.OP(t),s.la(this.ME,this.TE),this.TE+=8}LP(t,s,i,e,n,r,h,o,a,l,u,c,f){this.DP();let d=this.bE,p=this.GE,m=this.Jy+this.qy;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=n,d[p++]=m+r,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.GE=p,f._l(this.ME,this.TE),this.TE+=8}bS(t,s,i,e,n,r,h,o,a,l,u,c,f){this.DP();let d=this.bE,p=this.GE,m=this.Jy+this.qy;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=n,d[p++]=m+r,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.GE=p,f.la(this.ME,this.TE),this.TE+=8}NP(e,n,r){const h=this.bE,o=this.ME;if(r.length%3!=0)throw new Error("invalid index buffer length");for(let i=0,t=r.length;i<t;){const a=r[i++],l=r[i++],u=r[i++],c=3*a,f=3*l,d=3*u,p=2*a,m=2*l,g=2*u;this.DP();let t=this.GE,s=this.TE;h[t++]=e[0+c],h[t++]=e[1+c],h[t++]=e[2+c],h[t++]=e[0+f],h[t++]=e[1+f],h[t++]=e[2+f],h[t++]=e[0+d],h[t++]=e[1+d],h[t++]=e[2+d],h[t++]=e[0+d],h[t++]=e[1+d],h[t++]=e[2+d],o[s++]=n[0+p],o[s++]=n[1+p],o[s++]=n[0+m],o[s++]=n[1+m],o[s++]=n[0+g],o[s++]=n[1+g],o[s++]=n[0+g],o[s++]=n[1+g],this.GE=t,this.TE=s}}BP(t,s){this.pS(0),y._(w,this.xy),y._(S,this.Gy),this.mP();const[i,e]=this.WP(this.FE),n=this.Ew(0,0,this.cw(e),0,0,0,e);if(this.gP(n),"crop"===t&&this.FE&&s){const r=this.Hm/2,h=this.Um/2,o=s.nm(),a=s.gm(),l=this.FE.nm(),u=this.FE.gm(),c=Math.min(l,o),f=Math.min(u,a),d=Math.max(a-u,0),p=Math.max(u-a,0);x.set(-r,h-p,-r+c,h-f-p),M.yu(x),x.set(0,d,c,f+d),x._t(o,a),this.TS(M,x)}else{const m=i/2,g=e/2;this.FP(-m,g,m,-g)}this.uP(w),this.gP(S)}jP(t){if(!this.BE.equals(t)){this.BE._(t);const s=this.pP();s.DT(t),this.AE=0}}VP(){}HP(t,s,i,e){7996<=this._E&&this.sb();let n=this._E,r=this.Jy+this.qy;if(2===this.AE&&this.DE===r)this.PE[this.RE-1].oT++;else{const o=this.pP();o.kT(n,r),this.AE=2,this.DE=r}const h=this.xE;h[n++]=t,h[n++]=s,h[n++]=i,h[n++]=e,this._E=n}Ow(t){if(this.CE!==t){const s=this.pP();s.NT(t),this.CE=t,this.AE=0,this.Hy=null}}UP(){return this.CE}zP(){this.Ow(this.EE)}JP(t){const s=this.pP();s.ST(t),this.AE=0}qP(t,s,i=1){const e=this.pP();e.s_(t,s,i),this.AE=0}$P(t,s,i,e,n,r,h){if(this.CE!==this.Ay)throw new Error("must set tilemap fill mode first");const o=this.pP();o.e_(t,s,i,e,n,r,h),this.AE=0}XP(t,s,i,e,n,r,h){if(this.CE!==this.Fy)throw new Error("must set tile randomization mode first");const o=this.pP();o.r_(t,s,i,e,n,r,h),this.AE=0}KP(t,s,i,e,n,r,h,o,a,l,u){const c=this.CE;if(u%=10800,c.Nx&&!c.lG(s,i,e,n,r,h,o,a,l,u)){const f=this.pP(),d=(f.WT(),c.fG(s,i,e,n,r,h,o,a,l,u),f.lT),p=(d[0]=r,d[1]=h,s.la(d,2),d[6]=a,d[7]=l,i.la(d,12),f.uT),m=(n.la(p,0),p[1]);p[1]=p[3],p[3]=m,e.la(f.cT,0),f.hT=u,f.oT=o,c.vx.Bx()?f.aT=t?t.IM():null:f.aT=null,this.AE=0}}YP(t){const s=this.CE;if(0!==t.length&&!s.rG(t)){const i=this.pP();i.HT(),s.oG(t),b.Vh(i.fT,t),this.AE=0}}ZP(t,s,i,e){const n=this.pP();n.AT(t,s,i,e),this.AE=0}Yu(t){const s=this.pP();s.RT(t),this.AE=0}QP(){}tb(){super.tb(),this.$M.flush()}tR(){if(this.cE&&this.FE&&this.FE.AM()){const t=this.pP();t.o_(this.dE),this.AE=0}}sR(t){if(this.dE!==(t=!!t)&&this.cE){this.dE=t;const s=this.pP();s.l_(t),this.AE=0}}iR(){return this.dE}wM(){return this.mE}SM(){return this.fE}eR(t){if(t=!!t,this.fE&&this.pE!==t){if(t&&this.iR())throw new Error("depth still enabled");this.pE=t;const s=this.pP();s.c_(t),this.AE=0}}nR(t,s,i,e,n=0){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),!this.WE.Sl(t,s,i,e)){this.WE.cl(t,s,i,e);const r=n||this.WP(this.rR())[1],h=(s=r-s-e,this.pP());h.S_(!0,t,s,i,e),this.AE=0}}hR(){if(-1!==this.WE.Ml()){this.WE.set(0,0,-1,-1);const t=this.pP();t.S_(!1,0,0,0,0),this.AE=0}}oR(){for(const t of this.nP)t.KC(this.iw)}vC(){return!this.$M||this.$M.isContextLost()||this.XE}Yb(){super.uw(),b.Kg.g2.Yb(),b.Kg.iM.Yb(),b.Kg.mb.Yb();for(const t of this.nP)t.Yu();this.$E=[],this._C=null,this.KE=null,this.YE=null,this.ZE=null,this.QE=null,this.tP=null,this.sP=null,this.iP=0,this.JE="(unavailable)",this.qE="(unavailable)",this.CE=null,this.EE=null,this.mE=null;for(const s of this.Vy.values())s.Yb()}async Zb(){this.XE=!0,await this.lw(),this.XE=!1;for(const t of this.Vy.values())t.Zb(this);this.JI(this.Hm,this.Um,!0)}aR(t,s){if(this.vC())throw new Error("context lost");this.sb();const i=b.hr(b.Kg.g2,this);return i.C2(t,s),i}async lR(e,n){if(this.vC())throw new Error("context lost");if(n=Object.assign({},n),b.Ni.ImageBitmapOptions){let t=await createImageBitmap(e,{premultiplyAlpha:"premultiply"}),s=n.o2&&"clamp-to-edge"!==n.o2||n.a2&&"clamp-to-edge"!==n.a2,i=b.Nr(t.width)&&b.Nr(t.height);return this.A2()||i||!s?n.premultiplyAlpha=!1:b.Ni.Vi?(t=await createImageBitmap(e,{premultiplyAlpha:"premultiply",resizeWidth:b.Br(t.width),resizeHeight:b.Br(t.height)}),n.premultiplyAlpha=!1):t=await createImageBitmap(e,{premultiplyAlpha:"none"}),b.Ff(()=>this.aR(t,n))}if(e instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await b.Eo(e);e=t}return b.Ff(()=>this.aR(e,n))}yM(t,s,i){this.sb();const e=b.hr(b.Kg.g2,this);return e.L2(t,s,i),e}MC(t,s,i){this.sb(),s.V2(t,i)}vM(t){t&&(t.q2(),0<t.X2()||(this.sb(),t===this.kE&&(this.$M.bindTexture(this.$M.TEXTURE_2D,null),this.kE=null),t===this.VT&&(this.$M.activeTexture(this.$M.TEXTURE1),this.$M.bindTexture(this.$M.TEXTURE_2D,null),this.$M.activeTexture(this.$M.TEXTURE0),this.VT=null),t.H2()))}uR(t){let s=this.Hm,i=this.Um,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height)&&(i=Math.floor(t.height),e=!1),s<=0||i<=0)throw new Error("invalid size");this.sb();const n=b.hr(b.Kg.iM,this);return n.mM(s,i,Object.assign({tM:e},t)),this.FE=null,this.rT.xM=null,this.rT.GM=null,n}cR(t,s=!0){if(t!==this.FE){t&&t.FM()&&t.bM(this.Hm,this.Um);const i=this.pP();i.ET(t),this.FE=t,this.AE=0,s&&this.mP()}}rR(){return this.FE}WP(t){return t?[t.nm(),t.gm()]:[this.Hm,this.Um]}fR(t,s="stretch"){if(this.TC<2||this.FE&&0<this.FE.DM())this.AP(),this.GP(),this.dR(t,s);else{const i=this.pP();i.qT(t,this.FE,s),this.AE=0}}dR(t,s="stretch"){const i=t.IM();if(!i)throw new Error("not a texture-backed render target");this._P(i),this.BP(s,i)}pR(t){if(!(this.TC<2)){const s=this.pP();s.zT(t.TM()),this.AE=0}}mR(t){this.cR(null),this.sb();const s=t.IM();s===this.kE&&(this.$M.bindTexture(this.$M.TEXTURE_2D,null),this.kE=null),s===this.VT&&(this.$M.activeTexture(this.$M.TEXTURE1),this.$M.bindTexture(this.$M.TEXTURE_2D,null),this.$M.activeTexture(this.$M.TEXTURE0),this.VT=null),t.H2()}async BM(t,s,i){this.sb();let e=this.FE,n,r,h,o=(h=t?(n=t.nm(),r=t.gm(),t.TM()):(n=this.nm(),r=this.gm(),null),0),a=0,l=n,u=r;if(i){o=b.mr(Math.floor(i.bl()),0,n-1),a=b.mr(Math.floor(i.vl()),0,r-1);let t=i.width(),s=(t=0===t?n-o:b.mr(Math.floor(t),0,n-o),i.height());s=0===s?r-a:b.mr(Math.floor(s),0,r-a),l=t,u=s,a=r-(a+u)}let c=this.$M,f=(c.bindFramebuffer(c.FRAMEBUFFER,h),()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.FE=null,this.rT.xM=null,this.rT.GM=null,this.cR(e)}),d;if(!s&&2<=this.R2()){c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const p=c.createBuffer(),m=l*u*4,g=c.PIXEL_PACK_BUFFER,y=(c.bindBuffer(g,p),c.bufferData(g,m,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(g,null),f(),c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0));await this.JM(()=>c.getSyncParameter(y,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(y),d=new ImageData(l,u),c.bindBuffer(g,p),c.getBufferSubData(g,0,new Uint8Array(d.data.buffer),0,m),c.bindBuffer(g,null),c.deleteBuffer(p)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}gR(){this.sR(!0);const t=this.pP();t.d_(),this.AE=0,this.jE=1}yR(){this.sR(!1);const t=this.pP();t.m_(),this.AE=0,this.jE=2}wR(){return 2===this.jE}SR(){this.sR(!0);const t=this.pP();t.y_(),this.AE=0,this.jE=0}bR(t){if(this.vR()){const s=this.pP();s.XT(t),this.AE=0}}MR(t){if(this.vR()){const s=this.pP();s.ZT(t),this.AE=0}}JM(s){const t=new Promise(t=>e.add({resolve:t,QC:s}));return-1===n&&(n=self.requestAnimationFrame(i)),t}lb(){return this.Hm*this.Um*(this.hE.alpha?4:3)}ub(){let t=0;for(const s of b.Kg.iM.WM())s.IM()||(t+=s.Y2());return t}cb(){let t=0;for(const s of b.Kg.g2.Z2())t+=s.Y2();return t}xR(){return this.oE}R2(){return this.TC}GR(){return"webgl"+this.R2()}A2(){return 2<=this.R2()}E2(){return this.VE}TR(){return this.HE}_R(){return this.UE}IR(){return 0!==this.zE}CR(){return this.zE}ER(){return this.JE}PR(){return this.qE}RR(){if(2<=this.R2())return"webgl2";{const t=[];return this.QE&&t.push("EXT_frag_depth"),this.tP&&t.push("OES_standard_derivatives"),this.sP&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}AR(){return this.$E}vR(){return!!this._C}IC(){return this._C}zM(){return this.KE}W2(){return this.YE}j2(){return this.iP}qC(t){this.nP.add(t)}$C(t){this.nP.delete(t)}WC(){return this.rP}P2(){return this.$M}hP(t){this.nS([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}FR(){return this.pb()}}}{const zi=self.Os,Ji={DR:null,OR:null,kR:null,getTime:null,LR:null};zi.Kg.NR=class{constructor(t){t=Object.assign({},Ji,t),this.BR=t.DR,this.WR=t.OR,this.jR=t.kR,this.VR=t.getTime,this.HR=t.LR,this.UR=null,this.zR=new Set}JR(t){this.zR.add(t)}qR(t){this.zR.delete(t)}Yb(){this.UR=null;for(const t of this.zR)t.Yb()}$R(t){return this.BR?this.BR(t):[t.nm(),t.gm()]}rR(t){return this.WR(t)}KR(t,s){this.jR(t,s)}YR(){return this.VR()}Xd(t){this.HR(t)}ZR(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.UR||this.UR.nm()===s&&this.UR.gm()===i||(t.vM(this.UR),this.UR=null),null===this.UR&&(this.UR=t.aR(null,{width:s,height:i,l2:"nearest",f2:!1})),this.UR}}}{const o=self.Os,qi=self.ws,Gn=qi.Ms,$i=o.hr(o.Rect),Xi=o.hr(o.Rect),Ki=o.hr(o.Rect),Yi=o.hr(o.Rect),Zi=Gn.create(),Qi=Gn.create(),te={QR:null,tA:null,sA:null,iA:!1},se={eA:null,nA:!1,rA:!1,hA:!1,oA:!1,aA:!1,lA:!1};o.Kg.uA=class{constructor(t,s){s=Object.assign({},te,s),this.n1=t,this.cA=s.QR,this.fA=s.tA,this.dA=s.sA,this.pA=null,this.mA=[],this.gA=[],this.yA=[],this.wA=!1,this.zb=0,this.SA=!1,this.bA=!1,this.vA=!1,this.MA=!1,this.xA=!1,this.GA=!1,this.lE=!1,this.TA=!1,this._A=!1,this.IA=!1,this.CA=!1,this.EA=!1,this.PA=0,this.RA=[null,null,null],this.AA=!!s.iA,this.FA=0,this.DA=0,this.OA=0,this.kA=0,this.LA=null,this.NA=null,this.BA=o.hr(o.Rect),this.WA=o.hr(o.Rect),this.jA=o.hr(o.Rect),this.VA=o.hr(o.Rect),this.HA=o.hr(o.Rect),this.UA=1,this.zA=1,this.JA=0,this.qA=0,this.$A=null,this.XA=null,this.KA=0,this.YA=0,this.ZA=!1,this.cM=Gn.create(),this.QA=Gn.create(),this.n1.JR(this)}lr(){this.n1.qR(this),o.Nh(this.yA),o.Nh(this.mA),o.Nh(this.gA),this.LA=null,this.NA=null,this.cA=null,this.fA=null,this.dA=null}Yb(){this.wA=!0,o.Nh(this.yA),o.Nh(this.mA),o.Nh(this.gA)}t3(){return this.wA}s3(n,t){if(t=Object.assign({},se,t),o.Nh(this.yA),this.FA=0,this.DA=0,this.SA=!1,this.bA=!1,this.vA=!1,this.MA=!1,this.xA=!1,this.GA=!1,this.PA=0,this.EA=!!t.oA,this.CA=!!t.lA,this.wA=!1,o.Vh(this.mA,n),0!==n.length){if(t.eA){if(t.eA.length!==n.length)throw new Error("incorrect indexMap length");o.Vh(this.gA,t.eA)}else{o.Nh(this.gA);for(let t=0,s=n.length;t<s;++t)this.gA.push(t)}for(const s of n)this.FA+=s.Rb(),this.DA+=s.Ab(),s.Lb()&&(this.SA=!0),s.Bb()&&(this.bA=!0),s.Nb()&&(this.vA=!0),s.Fb()&&(this.MA=!0),s.Vb()&&(this.xA=!0);this.GA=this.i3(n[0].Eb());const r=this.e3(n[0],t),h=this.n3(n.at(-1),t);if(1!==n.length||r||h){this.IA=!1;let e=0;r&&(this.PA=1,this.yA.push(o.hr(o.Kg.uA.h3.r3,this,-1,1)),e=1);for(let s=0,i=n.length;s<i;++s)if(0!==s||r){let t=1===e?2:1;s!==i-1||h||(t=0),this.PA=Math.max(this.PA,t),this.yA.push(o.hr(o.Kg.uA.h3.o3,this,e,t,s)),e=t}else this.PA=1,this.yA.push(o.hr(o.Kg.uA.h3.a3,this,-1,1,s)),e=1;h&&this.yA.push(o.hr(o.Kg.uA.h3.l3,this,e,0))}else this.IA=!0}}e3(t,s){return!!(s.nA||t.Db()||s.hA&&!t.kb()||t.Bb()&&!this.CA||0!==this.FA||0!==this.DA)||(t.Eb().ab()?t.Nb()&&(s.aA||s.oA)||t.Wb()&&s.oA:t.Nb()&&!this.GA&&s.aA)}n3(t,s){return!!s.rA||(t.Eb().ab()?t.Nb()||t.Fb():(t.Nb()||t.Fb())&&this.u3())}i3(t){return t._w()&&this.vA&&!this.MA}f3(t,s,i){t._w()&&null===s&&(s=t.GetBackbufferRenderTarget()),this.$A=s,this.LA=i.d3||null,this.NA=i.contextObject||null,this.zb=i.m3||0,this.UA=i.devicePixelRatio||1,this.zA=i.g3||1,this.JA=i.y3||0,this.qA="number"==typeof i.time?i.time:this.n1.YR(),this.lE=!1,t.yP(),this.SA&&this.w3();let e=!1;if(this.S3()&&(this.b3(t,i),e=!0,this.XA=this.n1.ZR(t,this.OA,this.kA),$i._(this.WA),$i.Vl(),t._w()&&t._MaybeDoPendingClearRenderPass(this.$A),t.CopyTextureToTexture(this.$A.IM(),this.XA,$i.bl(),$i.vl(),$i.width(),$i.height())),this.IA)this.v3(t,i);else if(e||this.b3(t,i),0!==this.jA.width()||0!==this.jA.height()){t.PP(),t.GP(),t.fS(0),t.pS(0),this.pA=i.M3||null,this.KA=i.x3||0,this.YA=i.G3||0,this.ZA=!!i.T3,this._3(t),this.RA[0]=s,this.RA[1]=1<=this.PA?this.I3():null,this.RA[2]=2===this.PA?this.I3():null;for(const n of this.yA){const r=this.C3(n.E3()),h=this.C3(n.P3());t._w()?n.R3(t,r,h):n.A3(t,r,h)}t._P(null),this.RA[1]&&this.F3(this.RA[1]),this.RA[2]&&this.F3(this.RA[2]),this.RA.fill(null),this.D3(t),this.$A=null,this.XA=null,this.LA=null,this.NA=null,this.pA=null}}b3(t,s){const[i,e]=this.n1.$R(t);this.O3(t,i,e),this.L3(s)}O3(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.OA===s&&this.kA===i||this.N3(t,s,i,0,0,this.cM,this.QA),this.OA=s,this.kA=i}N3(t,s,i,e,n,r,h){const o=s/2+e,a=i/2+n,l=(t.Tw(r,s/i),t.Ew(o,a,t.cw(i),o,a,0,i));Gn._(h,l)}L3(t){this.BA._(t.B3),t.W3?this.WA._(t.W3):this.WA.set(0,0,this.OA,this.kA),this.jA._(this.WA),this.jA._t(this.OA,this.kA);const s=this.zA*this.UA;this.WA.Fl(this.FA*s,this.DA*s),this.HA._(this.WA),this.HA._t(this.OA,this.kA),this.WA.Hl(0,0,this.OA,this.kA),this.VA._(this.WA),this.VA._t(this.OA,this.kA)}_3(t){if(this.TA=t.iR(),this._A=t.wR(),this.CA)t.sR(!1),this.bA&&t.eR(!0);else{if($i._(this.WA),t.ab()){const s=this.zA*this.UA;$i.Fl(Math.max(this.FA,1)*s,Math.max(this.DA,1)*s),$i.Vl(),$i.mr(0,0,this.OA,this.kA)}else $i.Vl();t.nR($i.bl(),$i.vl(),$i.width(),$i.height(),this.kA)}}j3(t){t.GP(),this.CA||(this._A&&t.SR(),t.sR(!1),this.bA&&t.eR(!0)),t._w()&&t.SetNormalizedCoordsProgramVariant(!0)}D3(t){t.eR(!1),this._A&&t.yR(),t.sR(this.TA),this.CA||t.hR(),t._w()&&t.SetNormalizedCoordsProgramVariant(!1),this.lE=t.wP()}V3(){this.HA.mr(0,0,1,1)}C3(t){return t<0?null:this.RA[t]}I3(){return this.n1.rR(this)}H3(){return this.$A}F3(t){this.n1.KR(t,this)}U3(t){return this.mA[t]}z3(t){this.pA?this.pA(this,t,()=>this.cA(t,this)):this.cA(t,this),this.IA||this.j3(t)}J3(t){if(this.CA)return!0;if(0!==this.KA||0!==this.YA)return!1;const[s,i]=t.WP(t.rR());return s===this.OA&&i===this.kA}q3(t,s){let i=this.cM,e=this.QA;if(s&&!this.J3(t)){i=Zi,e=Qi;const[n,r]=t.WP(t.rR());this.N3(t,n,r,this.KA,this.YA,i,e),this.CA||t.hR()}t.uP(i),t.gP(e)}w3(){this.n1.Xd(this)}X3(t,s){return this.dA(this.gA[t],s)}K3(t,s){let i=this.HA,e=this.VA,n=this.jA;t.ab()&&(Xi._(i),Xi.kl(1),i=Xi,Ki._(e),Ki.kl(1),e=Ki,Yi._(n),Yi.kl(1),n=Yi),this.Y3(t,s,e,n,i,1/this.OA,1/this.kA)}Z3(t,s){let e=this.VA,n=this.jA,r=1/this.OA,h=1/this.kA;if(this.fA){let{Q3:t,tF:s,sF:i}=this.fA(this.LA);t||($i.set(0,0,0,0),t=$i),s=s||this.OA,i=i||this.kA,e=t,n=t,r=1/s,h=1/i}else t.ab()&&(Ki._(e),Ki.kl(1),e=Ki,Yi._(n),Yi.kl(1),n=Yi);let i=this.HA;t.ab()&&((i=Xi)._(this.HA),i.kl(1)),this.Y3(t,s,e,n,i,r,h),t._w()&&this.xA&&t.SetProgramParameter_IsSrcTexRotated(this.EA)}iF(t){return this.vA?t._w()?this.S3()?this.XA:this.$A.IM():this.$A:null}Y3(t,s,i,e,n,r,h){t.KP(this.iF(t),n,i,e,this.BA,r,h,this.UA,this.zA,this.JA,this.qA),t.YP(this.X3(s,t))}v3(t,s){const i=this.mA[0],e=t.iR(),n=i.Bb();n&&(t.sR(!1),t.eR(!0),this.HA.set(0,0,1,1),this.jA.set(0,0,1,1)),t.Ow(i),t.Xb(this.zb),t.cR(this.$A);let r=0,h=1;if(this.jA.set(0,0,1,1),i.Wb()&&this.fA){const{Q3:o,tF:a,sF:l}=this.fA(this.LA);o&&this.jA._(o),r=Number.isFinite(a)?1/a:0,h=Number.isFinite(l)?1/l:0}else{const[u,c]=this.n1.$R(t);r=1/u,h=1/c}s.B3?this.BA._(s.B3):this.BA.set(0,0,0,0),t.KP(this.iF(t),this.HA,this.jA,this.jA,this.BA,r,h,this.UA,this.zA,this.JA,this.qA),t.YP(this.X3(0,t)),t._w()&&this.xA&&t.SetProgramParameter_IsSrcTexRotated(this.EA),t.fS(0),this.z3(t),n&&(t.eR(!1),t.sR(e))}S3(){return this.GA}u3(){return!this.GA}eF(){return this.vA}nF(){return!!this.IA&&!this.S3()}rF(){return this.CA}hF(){return this.LA}oF(){return this.NA}aF(){return this.zb}lF(){return this.ZA}wP(){return this.lE}uF(){return this.WA}cF(){return this.VA}fF(){return this.AA}async dF(t,s,i){}}}{const ie=self.Os;ie.Kg.uA.h3=class{constructor(t,s,i,e=-1){this.pF=t,this.mF=s,this.gF=i,this.Hg=e}yF(){return this.pF}E3(){return this.mF}P3(){return this.gF}wF(){return this.Hg}sG(){return this.yF().U3(this.wF())}A3(t,s,i){}R3(t,s,i){}}}{const ee=self.Os;ee.Kg.uA.h3.r3=class extends ee.Kg.uA.h3{constructor(t,s,i,e){super(t,s,i,e)}A3(t,s,i){const e=this.yF();t.PP(),t.Dw(),t.cR(i,e.lF()),t.ZP(0,0,0,0),e.z3(t),e.V3()}R3(t,s,i){const e=this.yF();t.PP(),t.Dw(),t.cR(i,!1),t.ZP(0,0,0,0),e.z3(t),e.V3()}}}{const ne=self.Os,re=ne.hr(ne.Rect),he=ne.hr(ne.Kl);ne.Kg.uA.h3.l3=class extends ne.Kg.uA.h3{constructor(t,s,i,e){super(t,s,i,e)}A3(t,s,i){const e=this.yF();t.Dw(),t.cR(i),e.q3(t,!0),t.Xb(e.aF()),t._P(s.IM()),he.yu(e.uF()),re._(e.cF()),re.kl(1),t.TS(he,re),e.fF()&&t.pR(s)}R3(t,s,i){const e=this.yF();t.Dw(),t.cR(i,!1),e.J3(t)?he.yu(e.cF()):(t.SetNormalizedCoordsProgramVariant(!1),e.q3(t,!0),he.yu(e.uF())),t.SetBackTexture(null),t.Xb(e.aF()),t._P(s.IM()),e.rF()?t.BP():t.TS(he,e.cF())}}}{const oe=self.Os;oe.Kg.uA.h3.a3=class extends oe.Kg.uA.h3{constructor(t,s,i,e){super(t,s,i,e)}A3(t,s,i){const e=this.yF();t.cR(i,e.lF()),t.ZP(0,0,0,0),t.AP(),t.Ow(this.sG()),e.Z3(t,this.wF()),e.z3(t),e.V3()}R3(t,s,i){const e=this.yF();t.cR(i,!1),t.ZP(0,0,0,0),t.AP(),t.Ow(this.sG()),e.Z3(t,this.wF()),e.z3(t),e.V3()}}}{const ae=self.Os,le=ae.hr(ae.Rect),ue=ae.hr(ae.Kl);ae.Kg.uA.h3.o3=class extends ae.Kg.uA.h3{constructor(t,s,i,e){super(t,s,i,e)}A3(t,s,i){const e=this.yF(),n=(t.cR(i),0===this.P3());n?t.Xb(e.aF()):(t.ZP(0,0,0,0),t.AP()),t.Ow(this.sG()),e.K3(t,this.wF()),t._P(s.IM()),e.q3(t,n),ue.yu(e.uF()),le._(e.cF()),le.kl(1),t.TS(ue,le),e.fF()&&t.pR(s)}R3(t,s,i){const e=this.yF(),n=(t.cR(i,!1),0===this.P3());n?(t.Xb(e.aF()),t.SetBackTexture(null),e.J3(t)?ue.yu(e.cF()):(t.SetNormalizedCoordsProgramVariant(!1),e.q3(t,!0),ue.yu(e.uF()))):(t.ZP(0,0,0,0),t.AP(),ue.yu(e.cF())),t.Ow(this.sG()),e.K3(t,this.wF()),t._P(s.IM()),e.rF()?t.BP():t.TS(ue,e.cF())}}}{let u=function(t,s){const i=t[0],e=s[0],n=i-e;if(0!=n)return n;const r=t[1],h=s[1];return r-h},c=(u,self.Os),f=self.zs,d=null,s=new Set,p=[],m=[],i=!1,t=!1,e=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.SF=class{constructor(t){d=t,Object.defineProperties(this,{bF:{value:d.MF().vF(),writable:!1},xF:{value:d.TF().GF(),writable:!1},_F:{value:{},writable:!1},IF:{value:{},writable:!1},CF:{value:d.EF(),writable:!1},PF:{value:d.RF(),writable:!1},AF:{value:new Date(d.FF()),writable:!1},storage:{value:new self.DF(d),writable:!1},isInWorker:{value:d.OF(),writable:!1},kF:{value:d.LF(),writable:!1},NF:{value:d.BF(),writable:!1},l2:{value:d.WF(),writable:!1},jF:{value:d.VF(),writable:!1},HF:{value:new self.UF(t),writable:!1},zF:{value:new self.JF(t),writable:!1}}),d.qF().addEventListener("keydown",t=>{s.has(t.key)?t.stopPropagation():s.add(t.key)}),d.qF().addEventListener("keyup",t=>s.delete(t.key)),d.Nf().addEventListener("window-blur",()=>s.clear()),d.OF()&&(self.alert=t=>(i||(i=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}$F(t){Object.defineProperties(this._F,t)}XF(t){Object.defineProperties(this.IF,t)}addEventListener(t,s){d.qF().addEventListener(t,s)}removeEventListener(t,s){d.qF().removeEventListener(t,s)}KF(t,...s){f.Me(t);const i=d.YF(),e=i.ZF(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.$u())return e.QF();if(s.length<e.tD())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.tD()} expected)`);let n=e.sD(),r=n.iD(),h=i.eD();if(h){r=r.slice(0);const a=new Set(r);for(const l of h.iD())a.has(l)||(r.push(l),a.add(l));for(const u of i.nD())a.has(u)||(r.push(u),a.add(u))}const o=n.rD(r,e.hD(),e.oD(),e.QF(),...s);return o}aD(t){const s=d.uD().lD();if(!s)throw new Error("not in a function which returns a value");switch(s.cD()){case 1:"number"==typeof t&&s.fD(t);break;case 2:"string"==typeof t&&s.fD(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.fD(t)}}signal(t){f.Me(t),d.YF().dD(t)}pD(t){return f.Me(t),d.YF().mD(t)}gD(){return[d.LF(),d.BF()]}get isSuspended(){return d.yD()}get wD(){return d.SD()}get bD(){return d.vD()}get MD(){return d.xD()}get GD(){return d.TD()}get _D(){return d.ID()}set _D(t){f.ye(t),d.CD(t)}get fps(){return t||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),t=!0),d.ED()}get framesPerSecond(){return d.ED()}get PD(){return d.RD()}get AD(){return d.FD()}get DD(){return d.OD()}get kD(){return d.LD()}set kD(t){if(!e.has(t))throw new Error("invalid framerate mode");d.ND(t)}get BD(){return d.WD()}set BD(t){f.ye(t),d.jD(t)}get VD(){return d.HD()}set VD(t){d.UD(t)}get zD(){return d.MF().JD()}get qD(){return d.MF().$D()}random(){return d.XD()}get layout(){const t=d.KD();if(t)return t.YD();throw new Error("no layout is running - make sure a layout is loaded before accessing")}ZD(t){let s=d.QD(),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.tO(t))return i.YD();throw new Error("invalid layout")}sO(){return d.QD().iO().map(t=>t.YD())}eO(t){let s=d.QD(),i;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(i=s.tO(t)))throw new Error("invalid layout");s.nO()||s.rO(i)}get keyboard(){const t=d.hO().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get oO(){const t=d.hO().oO;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get aO(){const t=d.hO().aO;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get lO(){const t=d.hO().lO;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}uO(t,s){f.Me(t),f.Me(s),d.cO(t,s)}fO(t){f.ye(t);const s=d.dO(t);return s?s.pO():null}mO(t,e){f.Ue(e);const n=d.gO();for(const s of t){const i=d.yO(s),r=i.wO();p.push([r.SO().wF(),r.bO()]),m.push(i)}if(0!==p.length){p.sort(u),m.sort((t,s)=>e(t.pO(),s.pO()));let i=!1;for(let t=0,s=p.length;t<s;++t){const h=m[t],o=n.vO(p[t][0]),a=p[t][1],l=o.MO();l[a]!==h&&((l[a]=h).wO().xO(o,!0),o.GO(h),i=!0)}i&&d.TO(),c.Nh(p),c.Nh(m)}}async _O(t,s){const i=new MessageChannel,e=i.port1,n=i.port2;return await d.IO("runtime","script-create-worker",{url:t,opts:s,port2:n},[n]),e}alert(t){return d.IO("runtime","alert",{message:t+(d.OF()?" [via Web Worker]":"")})}CO(t){return f.ye(t),d.EO(t)}PO(t){d.RO(t)}}}{let s=self.Os,i=null;self.AO=class{constructor(t){i=t,Object.defineProperties(this,{FO:{value:!0,writable:!1}})}DO(t){const s=self.kO.OO(t);if(!s)throw new Error("invalid IImageInfo");s.LO(i.NO())}BO(t){return i.vo(t)}WO(t){return i.Mo(t)}jO(t){return i.xo(t)}VO(t){return i.Go(t)}HO(t){return i.UO(t)}zO(t){return"flat"===i.JO()&&s.wo(t)&&(t=t.toLowerCase()),i.qO(t)}get $O(){return i.XO()}async KO(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}YO(...t){return i.ZO(...t)}QO(t){return i.sk(t)}ik(t){return i.ek(t)}}}{let h=self.Os,i=self.zs,o=null;self.nk=class{constructor(t){o=t,Object.defineProperties(this,{runtime:{value:o.NO(),writable:!1}})}rk(t,s){const i=o.NO(),e=i.yO(t),n=i.yO(s);return o.hk(e,n)}ak(t,s){const i=o.NO(),e=i.yO(t);for(const n of s){const r=i.yO(n);if(o.hk(e,r))return n}return null}lk(t){const s=o.NO().yO(t),i=o.uk(s);return i?i.pO():null}ck(t,s){if(i.ye(t),i.ye(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");o.fk(t,s)}dk(){return o.pk()}mk(t,s){let i=o.NO(),e;e=Array.isArray(t)?t.map(t=>i.gk(t)):[i.gk(t)];const n=h.Rect.wl(s),r=[];return o.yk(null,e,n,r),r.map(t=>t.pO())}}}{let s=self.Os,i=null,e=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),n=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),r=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.UF=class{constructor(t){i=t,Object.defineProperties(this,{wk:{value:s.hi.yi,writable:!1},Sk:{value:e.get(s.hi.oi)||"unknown",writable:!1},bk:{value:s.hi.ai,writable:!1},vk:{value:n.get(s.hi.li)||"unknown",writable:!1},Mk:{value:s.hi.ci,writable:!1},xk:{value:r.get(s.hi.di)||"unknown",writable:!1}})}get exportType(){let t=i.Gk();return i.Tk()?t="nwjs":i._k()?t="windows-webview2":"cordova"===t?t="Android"===s.hi.oi?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get renderer(){return i.Ck().Ik()}get Ek(){return i.Ck().Pk()}get Rk(){return i.Ck().Ak()}get Fk(){return i.Ck().Dk()}get Ok(){return i.Ck().kk()}get Lk(){return i.Ck().Nk()}get devicePixelRatio(){return i.Bk()}}}{const ce=self.zs;self.DF=class{constructor(t){this.Wk=t.jk()}getItem(t){return ce.Me(t),this.Wk.getItem(t)}setItem(t,s){return ce.Me(t),this.Wk.setItem(t,s)}removeItem(t){return ce.Me(t),this.Wk.removeItem(t)}clear(){return this.Wk.clear()}keys(){return this.Wk.keys()}}}{const fe=self.Os,de=fe.ks();self.Vk=class{#Hk;constructor(){const t=fe.zk.Uk(de);this.#Hk=t,Object.defineProperties(this,{runtime:{value:t.NO().Jk(),writable:!1},qk:{value:t.$k(),writable:!1},Xk:{value:t.Kk(),writable:!1},Yk:{value:t.Zk(),writable:!1},Qk:{value:t.tL(),writable:!1},sL:{value:t.iL(),writable:!1},eL:{value:t.nL(),writable:!1},rL:{value:t.hL(),writable:!1},oL:{value:t.aL(),writable:!1}}),t.NO().lL(this,t)}static uL(t){if(!t)return null;const s=fe.zk.cL(t);return s?s.fL():null}dL(){return this.#Hk.mL().pL()}gL(){return this.#Hk.yL().pO()}}}{const pe=self.Os,me=self.zs,ge=pe.ks();self.wL=class{#Hk;constructor(){const t=pe.zk.Uk(ge);this.#Hk=t,Object.defineProperties(this,{name:{value:t.$c(),writable:!1},runtime:{value:t.NO().Jk(),writable:!1},SL:{value:t.bL().fL(),writable:!1}}),t.NO().lL(this,t)}addEventListener(t,s){me.Me(t),me.Ue(s),this.#Hk.qF().addEventListener(t,s)}removeEventListener(t,s){me.Me(t),me.Ue(s),this.#Hk.qF().removeEventListener(t,s)}vL(){return[...this.instances()]}ML(){return pe.first(this.instances())}xL(){return[...this.GL()]}TL(){return pe.first(this.GL())}_L(t){const s=this.#Hk,i=s.NO().IL(t),e=s.CL(i);return e?e.pO():null}*instances(){for(const t of this.#Hk.EL())yield t.pO()}*GL(){for(const t of this.#Hk.RL().PL())yield t.pO()}AL(t){me.Ue(t);const s=this.#Hk;if(0<s.FL())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.DL(t)}Di(t,s,i,e,n){if(me.fe(s),me.fe(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#Hk,h=r.NO(),o=h.KD().SO(t);if(!o)throw new Error("invalid layer");const a=h.OL(r,o,s,i,e,n),l=(e&&o.kL(a),h.YF());return l.LL(!0),a.NL(),l.LL(!1),l.BL()||h.QD().WL()||h.jL(),a.pO()}}}{const ye=self.zs,l=new WeakMap,we=["above","below","top-sublayer","bottom-sublayer"];self.VL=class{constructor(t){l.set(this,t);const s=[],i=t.HL(),e=i.UL().length;for(let t=0;t<e;++t)s.push(new self.zL(i,t));Object.defineProperties(this,{name:{value:t.$c(),writable:!1},index:{value:t.wF(),writable:!1},JL:{value:s,writable:!1}})}addEventListener(t,s){ye.Me(t),ye.Ue(s),l.get(this).qF().addEventListener(t,s)}removeEventListener(t,s){ye.Me(t),ye.Ue(s),l.get(this).qF().removeEventListener(t,s)}get width(){return l.get(this).nm()}set width(t){ye.ye(t),l.get(this).fm(t)}get height(){return l.get(this).gm()}set height(t){ye.ye(t),l.get(this).rm(t)}qL(t,s){ye.ye(t),ye.ye(s);const i=l.get(this);i.fm(t),i.rm(s)}getSize(){const t=l.get(this);return[t.nm(),t.gm()]}set scale(t){ye.ye(t),l.get(this).$L(t)}get scale(){return l.get(this).XL()}set angle(t){ye.ye(t),l.get(this).KL(t)}get angle(){return l.get(this).YL()}set scrollX(t){ye.fe(t),l.get(this).ZL(t)}get scrollX(){return l.get(this).QL()}set scrollY(t){ye.fe(t),l.get(this).t5(t)}get scrollY(){return l.get(this).s5()}scrollTo(t,s){ye.fe(t),ye.fe(s);const i=l.get(this);i.ZL(t),i.t5(s)}i5(){const t=l.get(this);return[t.QL(),t.s5()]}e5(t){let s=l.get(this),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(i=s.SO(t))?i.n5():null}r5(){return l.get(this).h5().map(t=>t.n5())}*o5(){for(const t of l.get(this).o5())yield t.n5()}a5(t,s,i){const e=l.get(this),n=self.l5,r=(ye.Me(t),ye.Qe(s,n),s?e.NO().u5(s):null),h=we.indexOf(i);if(h<0)throw new Error("invalid location");e.c5(t,r,h)}f5(t,s,i){const e=l.get(this),n=e.NO(),r=self.l5,h=(ye.Ze(t,r),n.u5(t));if(!h)throw new Error("invalid layer");ye.Qe(s,r);const o=s?n.u5(s):null,a=we.indexOf(i);if(a<0)throw new Error("invalid location");e.d5(h,o,a)}p5(t){const s=l.get(this),i=self.l5,e=(ye.Ze(t,i),s.NO().u5(t));if(!e)throw new Error("invalid layer");const n=e.NO();s.m5(e),n.YF().BL()||n.jL()}g5(){const t=l.get(this),s=t.NO();t.y5(),s.YF().BL()||s.jL()}w5(t,s){ye.ye(t),ye.ye(s),l.get(this).S5(t,s)}b5(){return l.get(this).v5()}set K(t){ye.Me(t);const s=l.get(this);if("perspective"===t)s.M5();else{if("orthographic"!==t)throw new Error("invalid projection");s.x5()}}get K(){return l.get(this).G5()?"orthographic":"perspective"}}}{const Se=self.Os,f=self.zs,d=new WeakMap,be=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),ve=new Map([...be.entries()].map(t=>[t[1],t[0]])),Me=Se.hr(Se.Vo);self.l5=class{constructor(t){d.set(this,t);const s=[],i=t.HL(),e=i.UL().length;for(let t=0;t<e;++t)s.push(new self.zL(i,t));Object.defineProperties(this,{name:{value:t.$c(),writable:!1},layout:{value:t.tO().YD(),writable:!1},JL:{value:s,writable:!1}}),t.NO().lL(this,t)}get T5(){const t=d.get(this)._5();return t?t.n5():null}*I5(){for(const t of d.get(this).I5())yield t.n5()}*C5(){for(const t of d.get(this).E5())yield t.n5()}*P5(){for(const t of d.get(this).E5())for(const s of t.R5())yield s.n5()}get index(){return d.get(this).wF()}get isVisible(){return d.get(this).A5()}set isVisible(t){d.get(this).F5(t)}get D5(){return d.get(this).O5()}get isInteractive(){return d.get(this).k5()}set isInteractive(t){d.get(this).L5(t)}get N5(){return d.get(this).B5()}set N5(t){d.get(this).W5(!!t)}get j5(){return d.get(this).V5()}get opacity(){return d.get(this).vP()}set opacity(t){t=Se.mr(+t,0,1),isNaN(t)||d.get(this).xP(t)}set scale(t){f.ye(t),d.get(this).H5(t)}get scale(){return d.get(this).U5()}set scaleRate(t){f.ye(t),d.get(this).z5(t)}get scaleRate(){return d.get(this).J5()}set angle(t){f.ye(t),d.get(this).KL(t)}get angle(){return d.get(this).q5()}set parallaxX(t){f.ye(t),d.get(this).X5(t)}get parallaxX(){return d.get(this).K5()}set parallaxY(t){f.ye(t),d.get(this).Y5(t)}get parallaxY(){return d.get(this).Z5()}set Q5(t){f.ye(t),d.get(this).mv(t)}get Q5(){return d.get(this).pv()}set tN(t){d.get(this).sN(t)}get tN(){return d.get(this).iN()}set eN(t){d.get(this).nN(t)}get eN(){return d.get(this).rN()}set m3(t){f.Me(t);const s=be.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");d.get(this).Xb(s)}get m3(){return ve.get(d.get(this).hN())}set backgroundColor(t){if(f.Le(t),t.length<3)throw new Error("expected 3 elements");Me.$o(t[0],t[1],t[2]);const s=d.get(this),i=s.oN();i.ca(Me)||(i.ia(Me),s.NO().TO())}get backgroundColor(){const t=d.get(this).oN();return[t.ea(),t.na(),t.ra()]}set scrollX(t){f.fe(t);const s=d.get(this);s.aN(!0),s.ZL(t)}get scrollX(){return d.get(this).QL()}set scrollY(t){f.fe(t);const s=d.get(this);s.aN(!0),s.t5(t)}get scrollY(){return d.get(this).s5()}scrollTo(t,s){f.fe(t),f.fe(s);const i=d.get(this);i.aN(!0),i.ZL(t),i.t5(s)}i5(){const t=d.get(this);return[t.QL(),t.s5()]}lN(){d.get(this).aN(!1)}getViewport(){return d.get(this).uN().Gl()}cN(t,s,i=0){f.fe(t),f.fe(s),f.fe(i);const e=d.get(this),n=e.NO();return e.fN(t-n.dN(),s-n.pN(),i)}mN(t,s,i=0){f.fe(t),f.fe(s),f.fe(i);const e=d.get(this),n=e.NO(),[r,h]=e.gN(t,s,i);return[r+n.dN(),h+n.pN()]}yN(t,s,i=0){return f.fe(t),f.fe(s),f.fe(i),d.get(this).wN(t,s,i)}SN(t,s,i=0){return f.fe(t),f.fe(s),f.fe(i),d.get(this).bN(t,s,i)}get vN(){return d.get(this).MN()}}}{let e=function(t){let s=Te.get(t);return s||(s=xe.hr(xe.Event.Nf),Te.set(t,s)),s};e;const xe=self.Os,Ge=self.zs,Te=new WeakMap,_e=xe.ks();self.xN=class{#Hk;constructor(){const t=xe.zk.Uk(_e),s={runtime:{value:(this.#Hk=t).NO().Jk(),writable:!1},GN:{value:t.TN().pL(),writable:!1},SL:{value:t.bL().fL(),writable:!1}};t._N(s),t.IN(s),Object.defineProperties(this,s),t.NO().lL(this,t)}static CN(){return xe.zk.EN()}PN(){const t=Te.get(this);t&&(t.lr(),Te.delete(this))}addEventListener(t,s,i){Ge.Me(t),Ge.Ue(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Ge.Me(t),Ge.Ue(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}RN(){const t=this.#Hk,s=t.NO();s.AN(t),s.YF().BL()||s.QD().WL()||s.YF().FN()||s.jL()}DN(){const t=this.#Hk.ON();return t?t.map(t=>t.pO()):[]}*kN(){const t=this.#Hk;if(t.LN())for(const s of t.NN())yield s.pO()}get uid(){return this.#Hk.BN()}get WN(){return this.#Hk.jN()}get VN(){return this.#Hk.HN()}set _D(t){Ge.ye(t),this.#Hk.CD(t)}get _D(){return this.#Hk.UN()}zN(){this.#Hk.JN()}get wD(){const t=this.#Hk;return t.NO().SD(t)}qN(...t){Ge.Le(t);const s=new Set(t),i=this.#Hk.$N();return s.isSubsetOf(i)}XN(t){Ge.Ze(t,Set),this.#Hk.KN(t)}YN(){return new Set(this.#Hk.$N())}signal(t){Ge.Me(t);const s=this.#Hk;s.NO().YF().ZN(s,t)}pD(t){Ge.Me(t);const s=this.#Hk;return s.NO().YF().QN(s,t)}}}{const Ie=self.Os,Ce=self.zs,Ee=Ie.ks();self.t4=class extends self.xN{#Hk;#s4=!1;#i4=null;#e4=!1;#n4=null;#r4;#h4;constructor(t){super(),this.#Hk=Ie.zk.Uk(Ee),this.#s4=!1,this.#i4=null,this.#e4=!1,this.#n4=null,this.#r4=t?.domComponentId,this.#h4=t?.wrapperComponentId}PN(){this.o4(!1),this.a4(!1),super.PN()}l4(){return Ie.zk.u4()}c4(t){const s=this.#Hk;s.NO().f4(t,s)}d4(t){const s=this.#Hk;return s.NO().m4(t,s)}g4(t,s){if(Ce.Me(t),Ce.Ue(s),!this.#r4)throw new Error("no DOM component id set");const i=this.#Hk.NO();i.y4(this.#r4,t,s)}w4(t){Ce.Le(t);for(const[s,i]of t)this.g4(s,i)}S4(t,s){if(Ce.Me(t),!this.#r4)throw new Error("no DOM component id set");const i=this.#Hk.NO();i.hf(this.#r4,t,s)}b4(t,s){if(Ce.Me(t),!this.#r4)throw new Error("no DOM component id set");const i=this.#Hk.NO();return i.IO(this.#r4,t,s)}v4(t,s){const i=this.#Hk.NO();if(!i.OF())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#r4,handler:t,data:s,responseId:null});this.S4(t,s)}o4(t){if(this.#s4!==(t=!!t)){this.#s4=t;const s=this.#Hk.NO();if(t){if(!this.#i4)if(this.#Hk.NO().M4()){const i=globalThis.C3Debugger,e=this.SL;this.#i4=()=>{const t=performance.now();this.x4(),i.AddIndividualPluginTickTime(e,performance.now()-t)}}else this.#i4=()=>this.x4();s.Nf().addEventListener("tick",this.#i4)}else s.Nf().removeEventListener("tick",this.#i4)}}G4(){return this.#s4}x4(){}a4(t){if(this.#e4!==(t=!!t)){this.#e4=t;const s=this.#Hk.NO();if(t){if(!this.#n4)if(this.#Hk.NO().M4()){const i=globalThis.C3Debugger,e=this.SL;this.#n4=()=>{const t=performance.now();this.T4(),i.AddIndividualPluginTickTime(e,performance.now()-t)}}else this.#n4=()=>this.T4();s.Nf().addEventListener("tick2",this.#n4)}else s.Nf().removeEventListener("tick2",this.#n4)}}_4(){return this.#e4}T4(){}I4(){return[]}C4(){return null}E4(t){}P4(){if(!this.#h4)throw new Error("no wrapper component id set");const t=this.#Hk.NO();return t.R4(this.#h4)}A4(t,s){if(Ce.Me(t),Ce.Ue(s),!this.#h4)throw new Error("no wrapper component id set");const i=this.#Hk.NO();i.F4(this.#h4,t,s)}D4(t){Ce.Le(t);for(const[s,i]of t)this.A4(s,i)}O4(t,s){if(!this.#h4)throw new Error("no wrapper component id set");this.runtime.zF.L4(this.#h4,t,s)}N4(t,s){if(this.#h4)return this.runtime.zF.B4(this.#h4,t,s);throw new Error("no wrapper component id set")}}}{let t=function(t){return class n extends t{#W4;#j4;constructor(t){super(t);const s=Pe.zk.Uk(De),i=s.wO(),e=(this.#W4=s,this.#j4=i,Fe.set(this,s),[]),n=i.V4();if(n){const h=i.TN().HL().UL().length;for(let t=0;t<h;++t)e.push(new self.zL(n,t))}const r={JL:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#j4.tO().YD()}get H4(){return this.#j4.SO().n5()}get x(){return this.#j4.av()}set x(t){t=+t;const s=this.#j4;isNaN(t)||s.av()===t||(s.lv(t),s.U4())}get y(){return this.#j4.cv()}set y(t){t=+t;const s=this.#j4;isNaN(t)||s.cv()===t||(s.dv(t),s.U4())}setPosition(t,s){t=+t,s=+s;const i=this.#j4;isNaN(t)||isNaN(s)||i.av()===t&&i.cv()===s||(i.z4(t,s),i.U4())}J4(){const t=this.#j4;return[t.av(),t.cv()]}q4(t,s){if(t=+t,s=+s,!(isNaN(t)||isNaN(s)||0===t&&0===s)){const i=this.#j4;i.X4(t,s),i.U4()}}get Q5(){return this.#j4.pv()}set Q5(t){t=+t;const s=this.#W4,i=this.#j4;isNaN(t)||i.pv()===t||(i.mv(t),s.NO().TO())}get K4(){return this.#j4.Y4()}get width(){return this.#j4.nm()}set width(t){t=+t;const s=this.#j4;isNaN(t)||s.nm()===t||(s.fm(t),s.U4())}get height(){return this.#j4.gm()}set height(t){t=+t;const s=this.#j4;isNaN(t)||s.gm()===t||(s.rm(t),s.U4())}qL(t,s){t=+t,s=+s;const i=this.#j4;isNaN(t)||isNaN(s)||i.nm()===t&&i.gm()===s||(i.JI(t,s),i.U4())}getSize(){const t=this.#j4;return[t.nm(),t.gm()]}get angle(){return this.#j4.YL()}set angle(t){t=Pe.gr(+t);const s=this.#j4;isNaN(t)||s.YL()===t||(s.KL(t),s.U4())}get Z4(){return Pe.Sr(this.angle)}set Z4(t){this.angle=Pe.yr(t)}bu(){return this.#j4.Q4().Gl()}tB(){return this.#j4.sB().pu()}iB(){return this.#j4.eB()}get isVisible(){return this.#j4.O5()}set isVisible(t){t=!!t;const s=this.#W4,i=this.#j4;i.O5()!==t&&(i.F5(t),s.NO().TO())}get opacity(){return this.#j4.vP()}set opacity(t){t=Pe.mr(+t,0,1);const s=this.#W4,i=this.#j4;isNaN(t)||i.vP()===t||(i.xP(t),s.NO().TO())}set nB(t){if(Re.Le(t),t.length<3)throw new Error("expected 3 elements");Le.$o(t[0],t[1],t[2]);const s=this.#W4,i=this.#j4;i.rB().ca(Le)||(i.hB(Le),s.NO().TO())}get nB(){const t=this.#j4.rB();return[t.ea(),t.na(),t.ra()]}set m3(t){Re.Me(t);const s=Oe.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#W4,e=this.#j4;e.Xb(s),i.NO().TO()}get m3(){return ke.get(this.#j4.hN())}oB(){this.#j4.aB()}lB(){this.#j4.uB()}cB(t){Re.Ze(t,Ae);const s=this.#W4,i=s.NO().u5(t);if(!i)throw new Error("invalid layer");s.wO().fB(i)}dB(t,s){Re.Ze(t,n),this.#j4.pB(Fe.get(t),s)}get zIndex(){return this.#j4.bO()}get mB(){return this.#j4.gB()}set mB(t){this.#j4.yB(!!t)}Jl(t,s){return Re.fe(t),Re.fe(s),this.#j4.wB(+t,+s)}rk(t){Re.Ze(t,n);const s=this.#W4,i=Fe.get(t);return s.NO().TF().hk(s,i)}lk(){const t=this.#W4,s=t.NO().TF().uk(t);return s?s.pO():null}getParent(){const t=this.#W4.SB();return t?t.pO():null}bB(){const t=this.#W4.vB();return t?t.pO():null}*MB(){for(const t of this.#W4.MB())yield t.pO()}xB(){return this.#W4.GB()}TB(t){const s=this.#W4._B(t);return s?s.pO():null}*children(){for(const t of this.#W4.children())yield t.pO()}*IB(){for(const t of this.#W4.IB())yield t.pO()}CB(t,s){Re.Ze(t,n),Re.Pe(s),s=s||{};const i=this.#W4,e=Fe.get(t);i.EB(e,s)}removeChild(t){Re.Ze(t,n);const s=this.#W4,i=Fe.get(t);s.PB(i)}RB(){const t=this.#W4;if(t.AB()){const s=t.SB();s.PB(t)}}DB(){const t=this.#j4;return{OB:t.kB(),LB:t.NB(),BB:t.WB(),jB:t.VB(),HB:t.UB(),zB:t.JB(),qB:t.$B(),XB:t.KB(),YB:t.ZB()}}QB(t,s){Re.ye(t),Re.ye(s),this.#j4.t6(t,s)}s6(){const t=this.#j4;t.i6(),t.U4()}e6(t,s,i){Re.ye(t),Re.ye(s),Re.Ee(i);const e=this.#j4;e.n6(t,s,i)&&e.U4()}r6(t,s){let i=NaN,e=NaN,n=NaN,r=NaN,h=NaN,o=this.#j4;if(o.h6()){const a=o.o6(),l=a.Xv(t,s);null!==l&&(i=l.av(),e=l.cv(),n=l.pv(),r=l.gv(),h=l.wv())}return{x:i,y:e,Q5:n,u:r,v:h}}a6(){const t=this.#j4;if(!t.h6())return[0,0];const s=t.o6();return[s.Nv(),s.Bv()]}}};0;const Pe=self.Os,Re=self.zs,Ae=self.l5,Fe=new WeakMap,De=Pe.ks(),Oe=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),ke=new Map([...Oe.entries()].map(t=>[t[1],t[0]])),Le=Pe.hr(Pe.Vo);self.l6=t(self.xN),self.u6=t(self.t4)}{const Ne=self.zs;self.c6=class extends self.l6{#Hk;constructor(){super(),this.#Hk=self.xN.CN()}f6(){return this.#Hk.p6().d6()}focus(){this.#Hk.p6().m6()}blur(){this.#Hk.p6().g6()}y6(t,s){Ne.Me(t),this.#Hk.p6().w6(t,s)}}}{let e=function(t){let s=je.get(t);return s||(s=Be.hr(Be.Event.Nf),je.set(t,s)),s};e;const Be=self.Os,We=self.zs,je=new WeakMap,Ve=Be.ks();self.S6=class{#Hk;constructor(){const t=Be.zk.Uk(Ve),s={runtime:{value:(this.#Hk=t).NO().Jk(),writable:!1},behavior:{value:t.v6().b6(),writable:!1},M6:{value:t.G6().x6(),writable:!1}};Object.defineProperties(this,s),t.NO().lL(this,t)}static CN(){return Be.zk.EN()}get T6(){return this.#Hk._6().pO()}PN(){const t=je.get(this);t&&(t.lr(),je.delete(this))}addEventListener(t,s,i){We.Me(t),We.Ue(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){We.Me(t),We.Ue(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}}}{const He=self.Os,Ue=He.ks();self.I6=class{constructor(){const t=He.zk.Uk(Ue),s={runtime:{value:t.NO().Jk(),writable:!1},behavior:{value:t.v6().b6(),writable:!1},name:{value:t.$c(),writable:!1}};Object.defineProperties(this,s)}}}{const ze=self.Os,Je=ze.ks();self.C6=class{#Hk;constructor(){const t=ze.zk.Uk(Je),s={runtime:{value:(this.#Hk=t).NO().Jk(),writable:!1}};Object.defineProperties(this,s),t.NO().lL(this,t)}vL(){return this.#Hk.PL().map(t=>t.pO())}static uL(t){if(!t)return null;const s=ze.zk.E6(t);return s?s.b6():null}}}{const qe=self.Os,$e=self.zs,Xe=qe.hr(qe.Vo);self.zL=class{#Hk;constructor(t,s){this.#Hk=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){const t=this.#Hk.UL();return t[this.index].$c()}get isActive(){return this.#Hk.P6(this.index)}set isActive(t){t=!!t;const s=this.#Hk;s.P6(this.index)!==t&&(s.R6(this.index,t),s.A6(),s.NO().TO())}setParameter(t,s){$e.ye(t),t=Math.floor(+t);const i=this.#Hk,e=i.F6(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof qe.Vo){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");Xe.$o(s[0],s[1],s[2]),s=Xe}else if("number"!=typeof s)throw new TypeError("expected number");const n=i.D6(this.index,t,s);n&&i.P6(this.index)&&i.NO().TO()}getParameter(t){$e.ye(t),t=Math.floor(+t);const s=this.#Hk,i=s.F6(this.index,t);if(null===i)throw new RangeError("invalid index");return i instanceof qe.Vo?[i.ea(),i.na(),i.ra()]:i}}}self.O6=class{#Hk;constructor(t){this.#Hk=t,Object.defineProperties(this,{name:{value:t.$c(),writable:!1}})}get speed(){return this.#Hk.k6()}get L6(){return this.#Hk.N6()}get repeatCount(){return this.#Hk.B6()}get W6(){return this.#Hk.j6()}get V6(){return this.#Hk.H6()}get frameCount(){return this.#Hk.U6()}z6(){return this.#Hk.J6().map(t=>t.q6())}*frames(){for(const t of this.#Hk.J6())yield t.q6()}};self.kO=class{#Hk;constructor(t){this.#Hk=t}static OO(t){return t.#Hk}get width(){return this.#Hk.nm()}get height(){return this.#Hk.gm()}getSize(){const t=this.#Hk;return[t.nm(),t.gm()]}X6(t){return t.K6(this)}Y6(){return this.#Hk.xC().Gl()}};{const Ke=self.zs;self.Z6=class extends self.kO{#Hk;constructor(t){super(t.Q6()),this.#Hk=t,Object.defineProperties(this,{duration:{value:t.tW(),writable:!1},sW:{value:t.iW(),writable:!1},eW:{value:t.nW(),writable:!1}})}rW(){const t=this.#Hk;return[t.iW(),t.nW()]}hW(){return this.#Hk.oW()}aW(t){return this.lW(t)[0]}uW(t){return this.lW(t)[1]}lW(t){let s=this.#Hk,i=null;if("number"==typeof t)i=s.cW(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.fW(t)}return i?[i.av(),i.cv()]:this.rW()}dW(){const t=this.#Hk.pW();return t?t.ku():0}mW(t){return this.gW(t)[0]}yW(t){return this.gW(t)[1]}gW(t){Ke.ye(t),t=Math.floor(t);const s=this.#Hk.pW();if(!s||t<0||t>=s.ku())return[0,0];const i=s.Ou(),e=i[2*t],n=i[2*t+1];return[e,n]}get tag(){return this.#Hk.wW()}}}{let s=function(t){const s=Ze.get(t);if(s.SW())throw new Error("timeline/tween was released and is no longer valid");return s};s;const Ye=self.zs,Ze=new WeakMap;self.bW=class{constructor(t){Ze.set(this,t),t.NO().lL(this,t)}pause(){s(this).vW()}resume(){s(this).MW()}stop(){s(this).r0()}qN(t){return s(this).xW(t)}set time(t){Ye.ye(t),s(this).GW(t)}get time(){return s(this).YR()}set totalTime(t){Ye.ye(t),s(this).TW(t)}get totalTime(){return s(this)._W()}set L6(t){s(this).IW(!!t)}get L6(){return s(this).EW()}set V6(t){s(this).PW(!!t)}get V6(){return s(this).RW()}set playbackRate(t){Ye.ye(t),s(this).AW(t)}get playbackRate(){return s(this).FW()}get progress(){const t=s(this);return t.YR()/t._W()}get tags(){return s(this).DW()}get finished(){return s(this).OW()}get isPlaying(){return s(this).IsPlaying()}get kW(){return s(this).LW()}get NW(){return Ze.get(this).SW()}}}{let i=new WeakMap;self.BW=class extends self.bW{constructor(t){super(t),i.set(this,t);const s={name:{value:t.$c(),writable:!1}};Object.defineProperties(this,s)}}}{let i=function(t){const s=n.get(t);if(s.SW())throw new Error("tween was released and is no longer valid");return s},e=(i,self.zs),n=new WeakMap,r=new WeakMap,h=null;self.WW=class extends self.bW{constructor(t,s,i){super(t),h=h||i.easeToIndexFunc,n.set(this,t),s&&r.set(this,s)}stop(){const t=i(this),s=r.get(this);s.ReleaseTween(t)}jW(t){e.Me(t);const s=self.uc.Pc(h(t));i(this).VW(s)}get T6(){const t=i(this).HW();return t?t.pO():null}get UW(){return i(this).zW()}set UW(t){i(this).JW(!!t)}get value(){const t=i(this);if("value"!==t.qW())throw new Error("not a value tween");return t.XW("value").$W()}}}self.KW=class extends self.Vk{constructor(){super()}};{const Qe=self.Os,tn=self.zs,sn=Qe.ks();self.YW=class extends self.KW{#Hk;#r4;#ZW=0;#QW=new Map;constructor(t){if(super(),this.#Hk=Qe.zk.Uk(sn),!t?.domComponentId)throw new Error("no DOM component ID specified");this.#r4=t.domComponentId,this.tj("elem-focused",t=>t.sj()),this.tj("elem-blurred",t=>{t&&t.ij()})}ej(t){const s=this.#ZW++;return this.#QW.set(s,t),s}nj(t){this.#QW.delete(t)}tj(t,i){const s=this.#Hk.NO();s.y4(this.#r4,t,t=>{const s=this.#QW.get(t.elementId);i(s,t)})}rj(t){tn.Le(t);for(const[s,i]of t)this.rj(s,i)}}}{const en=self.Os,nn=(new WeakMap,en.ks());self.hj=class extends self.wL{#Hk;constructor(){super(),this.#Hk=en.zk.Uk(nn)}oj(){}aj(){return this.#Hk.Q6().lj()}uj(t){}cj(t){}fj(){}dj(t){}}}{const rn=self.Os,hn=(new WeakMap,rn.ks());self.pj=class extends self.u6{#Hk;#mj=null;#gj=null;constructor(t){super(t),this.#Hk=rn.zk.Uk(hn)}PN(){if(super.PN(),this.#mj){const t=this.#Hk.NO().Nf();t.removeEventListener("renderercontextlost",this.#mj),t.removeEventListener("renderercontextrestored",this.#gj),this.#mj=null,this.#gj=null}}yj(){if(!this.#mj){this.#mj=()=>this.wj(),this.#gj=()=>this.Sj();const t=this.#Hk.NO().Nf();t.addEventListener("renderercontextlost",this.#mj),t.addEventListener("renderercontextrestored",this.#gj)}}wj(){}Sj(){}bj(t){}}}{const on=self.Os,an=on.hr(on.Rect),ln=new WeakMap,un=on.ks();self.vj=class extends self.pj{#Mj=-1;#xj=!0;#Gj=!1;#Tj=!1;#_j=-.2;#Ij=on.hr(on.Rect,0,0,-1,-1);#Cj=0;#Ej=0;#Pj=-1;#Rj=-1;#Aj=!1;constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const s=on.zk.Uk(un),i=(ln.set(this,s),this.#Mj=this.SL.ej(this),s.NO().Ck());this.#Cj=i.Fj(),this.#Ej=i.Dj(),this.o4(!0)}PN(){super.PN(),this.SL.nj(this.#Mj),this.Oj("destroy"),this.#Mj=-1,ln.delete(this)}kj(){const t=ln.get(this).NO();if(t.OF())throw new Error("not valid in worker mode");return this.Lj("get-element")}Oj(t,s){(s=s||{}).elementId=this.#Mj,this.S4(t,s)}Lj(t,s){return(s=s||{}).elementId=this.#Mj,this.v4(t,s)}Nj(t,s){return(s=s||{}).elementId=this.#Mj,this.b4(t,s)}Bj(t){t=t||{};const s=ln.get(this).wO();t.elementId=this.#Mj,t.isVisible=s.O5(),t.htmlIndex=s.SO().Wj(),t.htmlZIndex=s.jj(),Object.assign(t,this.Vj()),this.#xj=!!t.isVisible,this.v4("create",t),this.Hj(!0)}Uj(t){this.#xj!==(t=!!t)&&(this.#xj=t,this.Oj("set-visible",{isVisible:t}))}x4(){this.Hj(!1)}zj(){const t=ln.get(this).NO(),s=t.Ck().Jj();return"Android"===on.hi.oi&&("scale-inner"===s||"scale-outer"===s||"crop"===s)}Hj(u){const c=ln.get(this);if(!c.qj()){let t=c.wO(),s=t.SO(),i=t.Q4(),[e,n]=s.gN(i.bl(),i.vl()),[r,h]=s.gN(i.Ml(),i.xl()),o=c.NO().Ck(),a=o.Ak(),l=o.Dk();if(t.O5()&&s.O5())if(!this.zj()&&(r<=0||h<=0||a<=e||l<=n))this.Uj(!1);else{an.set(e,n,r,h);const f=o.Fj(),d=o.Dj(),p=s.Wj(),m=t.jj();if(!u&&an.equals(this.#Ij)&&this.#Cj===f&&this.#Ej===d&&this.#Pj===p&&this.#Rj===m)this.Uj(!0);else{this.#Ij._(an),this.#Cj=f,this.#Ej=d,this.#Pj=p,this.#Rj=m,this.Uj(!0);let t=null;this.#Tj&&(t=s.$j()+this.#_j),this.Oj("update-position",{left:Math.round(this.#Ij.bl()),top:Math.round(this.#Ij.vl()),width:Math.round(this.#Ij.width()),height:Math.round(this.#Ij.height()),htmlIndex:p,htmlZIndex:m,fontSize:t})}}else this.Uj(!1)}}Xj(){this.Lj("focus",{focus:!0})}Kj(){this.Lj("focus",{focus:!1})}sj(){this.#Gj=!0}ij(){this.#Gj=!1}Yj(){return this.#Gj}Zj(t,s){this.postToDOMElement("set-css-style",{prop:on.Bo(t),val:s})}Qj(t,s){this.postToDOMElement("set-attribute",{name:t,val:s})}t8(t){this.postToDOMElement("remove-attribute",{name:t})}s8(){this.#Aj||(this.#Aj=!0,Promise.resolve().then(()=>{this.#Aj=!1,this.Oj("update-state",this.Vj())}))}Vj(){}i8(){return this.#Mj}}}self.e8=class extends self.C6{constructor(){super()}};self.n8=class extends globalThis.I6{constructor(){super()}oj(){}};{const cn=self.Os,fn=new WeakMap,dn=cn.ks();self.r8=class extends self.S6{#s4=!1;#e4=!1;#h8=!1;constructor(){super(),fn.set(this,cn.zk.Uk(dn))}PN(){super.PN(),this.o4(!1),this.a4(!1),this.o8(!1),fn.delete(this)}l4(){return cn.zk.u4()}a8(){}c4(t){const s=fn.get(this);s.NO().f4(t,s._6(),s.G6())}d4(t){const s=fn.get(this);return s.NO().m4(t,s._6(),s.G6())}o4(t){if(this.#s4!==(t=!!t)){this.#s4=t;const s=fn.get(this).NO();t?s.l8(this):s.u8(this)}}G4(){return this.#s4}x4(){}a4(t){if(this.#e4!==(t=!!t)){this.#e4=t;const s=fn.get(this).NO();t?s.c8(this):s.f8(this)}}_4(){return this.#e4}T4(){}o8(t){if(this.#h8!==(t=!!t)){this.#h8=t;const s=fn.get(this).NO();t?s.d8(this):s.p8(this)}}m8(){return this.#h8}g8(){}I4(){return[]}C4(){return null}E4(t){}}}{let e=self.zs,n=null;self.JF=class{constructor(t){n=t}PO(t){n.RO(t)}L4(t,s,i){e.Me(t),e.Me(s),e.Ne(i),n.y8(t,s,i)}B4(t,s,i){return e.Me(t),e.Me(s),e.Ne(i),n.w8(t,s,i)}S8(t){return e.xe(t),new self.b8(n,t)}set v8(t){n.M8(!!t)}get v8(){return n.x8()}G8(t){n.T8(!!t)}_8(t){e.fe(t);const s=n.I8(t);return s?s.pL():null}}}self.b8=class{#C8;#E8;#P8;#A8;#F8;#D8;constructor(t,s){const i=(this.#C8=t).YF(),e=t.eD(),n=(this.#E8=e,this.#P8=e.O8(),t.uD()),r=(this.#A8=n.k8(),this.#F8=n.L8(e),i.N8()),h=r.L8();this.#D8=h,s&&h.B8(s),t.W8(!1)}j8(){const t=this.#C8.YF(),s=this.#P8,i=this.#D8;t.V8(s),this.#E8.H8(this.#A8,this.#F8),t.U8(s),i.z8(i.wF()+1)}get J8(){return this.#D8.q8()}release(){const t=this.#C8,s=t.uD(),i=t.YF().N8();t.W8(!0),i.X8(),s.X8()}};{let d=self.Os,n=self.zs,p=null,r=null;self.K8=class{constructor(t,s){r=t,p=s}Y8(){p.PP()}Z8(t){p.CP(t)}Q8(){p.Ww()}tV(){p.Dw()}sV(){p.qw()}setColor(t){p.MP(t[0],t[1],t[2],t[3])}iV(t,s,i,e){p.MP(t,s,i,e)}eV(){p.GP()}nV(t){p.xP(t)}rV(t){p.pS(t)}hV(){p.mS()}rect(t){p.FP(t.left,t.top,t.right,t.bottom)}oV(t,s,i,e){p.FP(t,s,i,e)}aV(t){p.Kl(d.Kl.mu(t))}lV(t,s,i,e,n,r,h,o){p.ZS(t,s,i,e,n,r,h,o)}uV(t,s){p.TS(d.Kl.mu(t),d.Rect.Tl(s))}cV(t,s){p.kP(d.Kl.mu(t),d.Kl.mu(s))}fV(t,s,i,e,n,r,h,o,a,l,u,c,f){p.LP(t,s,i,e,n,r,h,o,a,l,u,c,d.Rect.Tl(f))}dV(t,s,i,e,n,r,h,o,a,l,u,c,f){p.bS(t,s,i,e,n,r,h,o,a,l,u,c,d.Kl.mu(f))}pV(t,s,i){p.NP(t,s,i)}mV(t){p.YS(t)}line(t,s,i,e){p.Mm(t,s,i,e)}gV(t,s,i,e,n,r){p.vS(t,s,i,e,n,r)}yV(t,s,i,e){p._S(t,s,i,e)}wV(t){p.PS(d.Rect.Tl(t))}SV(t){p.RS(d.Kl.mu(t))}bV(t){p.LS(t)}vV(){p.NS()}MV(t){p.VS(t)}xV(){p.JS()}GV(t){n.Qe(t,self.TV);const s=t?r.u5(t):null;p._P(s)}_V(t,s){const i=self.kO.OO(t);if(i)return i.IV(p,{o2:s?.o2??"clamp-to-edge",a2:s?.a2??"clamp-to-edge",l2:s?.l2??"trilinear",f2:s?.f2??!0});throw new Error("invalid IImageInfo")}CV(t){const s=self.kO.OO(t);if(!s)throw new Error("invalid IImageInfo");s.dI()}K6(t){const s=self.kO.OO(t);if(!s)throw new Error("invalid IImageInfo");const i=s.IM();return self.TV.EV(r,i)}PV(t,s,i){n.ye(t),n.ye(s);const e=p.yM(t,s,{o2:i?.o2??"clamp-to-edge",a2:i?.a2??"clamp-to-edge",l2:i?.l2??"trilinear",f2:i?.f2??!0});return self.TV.EV(r,e)}RV(t,s,i){n.Ze(s,self.TV);const e=r.u5(s);p.MC(t,e,{premultiplyAlpha:i?.premultiplyAlpha??!0})}deleteTexture(t){n.Ze(t,self.TV);const s=r.u5(t);p.vM(s)}AV(){const t=p.pb();return new self.FV(r,t)}DV(){r.Ck().OV(p)}kV(t){n.Ze(t,globalThis.l5);const s=r.u5(t);s.LV(p)}}}{const pn=new WeakMap,mn=new WeakMap;self.TV=class{constructor(t,s){pn.set(this,{runtime:t,NV:s}),mn.set(s,this),t.lL(this,s),Object.defineProperties(this,{width:{value:s.nm(),writable:!1},height:{value:s.gm(),writable:!1}})}static EV(t,s){if(!s)return null;const i=mn.get(s);return i||new self.TV(t,s)}}}{let e=function(t){return yn.get(t).BV};e;const gn=self.zs,yn=new WeakMap;self.FV=class{constructor(t,s){yn.set(this,{runtime:t,BV:s}),t.lL(this,s)}release(){e(this).lr()}set WV(t){gn.Me(t),e(this).vI(t)}get WV(){return e(this).x_()}set jV(t){gn.ye(t),e(this).MI(t)}get jV(){return e(this).xI()}set lineHeight(t){gn.ye(t),e(this).TI(t)}get lineHeight(){return e(this)._I()}set VV(t){e(this).II(t)}get VV(){return e(this).CI()}set HV(t){e(this).EI(t)}get HV(){return e(this).RI()}setColor(t){gn.Le(t),this.UV(t[0],t[1],t[2])}UV(t,s,i){e(this).kI(t,s,i)}zV(t){gn.Me(t),e(this).Kb(t)}set JV(t){e(this).LI(t)}get JV(){return e(this).NI()}set verticalAlign(t){e(this).BI(t)}get verticalAlign(){return e(this).WI()}set qV(t){e(this).jI(t)}get qV(){return e(this).VI()}set $V(t){e(this).HI(t)}get $V(){return e(this).UI()}set text(t){gn.Me(t),e(this).lf(t)}get text(){return e(this).zI()}qL(t,s,i){gn.ye(t),gn.ye(s),gn.ye(i),e(this).JI(t,s,i)}X6(){const{runtime:t,BV:s}=yn.get(this),i=s.IM();return self.TV.EV(t,i)}Y6(){return e(this).xC().Gl()}XV(t){gn.Ue(t),e(this).mI=t}KV(){e(this).dI()}get YV(){return e(this).$I()}get ZV(){return e(this).KI()}}}{let e=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return Sn.get(i)||""},r=function(e){return new Promise((t,s)=>{const i=document.createElement("script");i.onload=t,i.onerror=s,i.async=!1,i.type="module",i.src=e,document.head.appendChild(i)})};e,r;const g=self.Os,wn=new Set(["local","remote"]),Sn=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);g.QV=class extends g.nr{constructor(t,s){super();const i=s.exportType,e=(this.ef=t,this.tH="folders",this.sH=new Map,this.iH="cordova"===i,this.eH=!!s.isiOSCordova,this.nH=!!s.isFileProtocol,this.rH=s.swClientId,this.hH=s.supportedAudioFormats||{},this.oH=new Map,this.aH=!1,this.lH=s.scriptFolder,this.uH="",this.cH="",this.fH="",this.dH=s.fileMap||new Map,this.pH=new Map,"html5"===i||"scirra-arcade"===i||"instant-games"===i);this.mH=e?"remote":"local",this.gH=new Map,this.yH=[],this.wH=[],this.SH=!1,this.bH=0,this.vH=0,this.MH=0,this.xH=!1,this.GH=g.hr(g.wd,()=>this.TH(),50),this._H=g.hr(g.ad,Math.max(g.hardwareConcurrency,8)),this.IH=g.hr(g.ad,20),this.CH=new self.AO(this)}lr(){for(const t of this.gH.values())t.lr();this.gH.clear(),g.Nh(this.wH),this.ef=null}NO(){return this.ef}EH(t){this.tH=t}JO(){return this.tH}PH(){return this.lH}RH(t){this.uH=t}XO(){return this.uH}AH(t){this.cH=t}FH(){return this.cH}DH(t){this.fH=t}OH(){return this.fH}kH(){return this.nH}xo(t,s){return s=s||this.mH,g.wo(t)?("flat"===this.tH&&(t=t.toLowerCase()),this.iH&&this.nH?this.LH(t):"playable-ad-single-file"===this.ef.Gk()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===s?this._H:this.IH).oc(()=>g.xo(t))):g.xo(t)}Go(t){return g.wo(t)?("flat"===this.tH&&(t=t.toLowerCase()),this.iH&&this.nH?this.NH(t):"playable-ad-single-file"===this.ef.Gk()?g._o(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.mH?this._H:this.IH).oc(()=>g.Go(t))):g.Go(t)}vo(t){return g.wo(t)?("flat"===this.tH&&(t=t.toLowerCase()),this.iH&&this.nH?this.BH(t):"playable-ad-single-file"===this.ef.Gk()?g.Io(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.mH?this._H:this.IH).oc(()=>g.vo(t))):g.vo(t)}async Mo(t){const s=await this.vo(t);return JSON.parse(s)}WH(t,s){return"flat"===this.tH&&(t=t.toLowerCase()),this.ef.IO("runtime","cordova-fetch-local-file",{filename:t,as:s})}BH(t){return this.WH(t,"text")}async LH(t){const s=await this.WH(t,"buffer"),i=e(t);return new Blob([s],{type:i})}async jH(t){"flat"===this.tH&&(t=t.toLowerCase());let s=this.sH.get(t);if(!s){const i=await this.LH(t);s=URL.createObjectURL(i),this.sH.set(t,s)}return s}NH(t){return this.WH(t,"buffer")}qO(t){"flat"===this.tH&&(t=t.toLowerCase());let s=this.uH+t;return"Gecko"===g.hi.di&&"preview"===this.ef.Gk()?this.VH(s):s}UO(t){return g.yo(t)?Promise.resolve(t):this.iH&&this.nH?this.jH(t):"playable-ad-single-file"===this.ef.Gk()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.tH&&(t=t.toLowerCase()),Promise.resolve(t))}HH(s){if(g.yo(s)||"preview"!==this.ef.Gk()||!this.rH||!s)return s;try{const t=new URL(s,location.href);return t.searchParams.set("__c3_client_id",this.rH),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+s),s}}UH(t){return this.UO(t)}zH(t){if(t.JH&&!wn.has(t.JH))throw new Error("invalid load policy");let s=this.gH.get(t.url);return s||(s=g.hr(g.qH,this,{url:t.url,size:t.size||0,JH:t.JH||this.mH}),this.gH.set(s.$H(),s),this.SH)||(this.bH+=s.sc(),this.wH.push(s.XH().then(()=>this.KH(s.sc())))),s}YH(t){this.gH.delete(t.$H())}async ZH(){try{await Promise.all(this.wH),this.MH=1}catch(t){console.error("Error loading: ",t),this.xH=!0,this.TH()}}QH(){this.SH=!0}t7(){return this.xH}KH(t){this.vH+=t,this.GH.Pd()}TH(){const t=g.hr(g.Event,"loadingprogress");this.MH=g.mr(this.vH/this.bH,0,1),t.progress=this.MH,this.ef.Nf().dispatchEvent(t)}JD(){return this.MH}$D(){return this.ef.i7().s7()}e7(t){g.Vh(this.yH,t),this.yH.length&&this.wH.push(this.n7())}async n7(){const t=[],s=[];for(const[i,e,n]of this.yH)this.bH+=n,t.push(this.r7(i,e,s).then(()=>this.KH(n)));await Promise.all(t),this.ef.OF()&&0<s.length&&await this.ef.IO("runtime","load-webfonts",{webfonts:s})}async r7(s,i,e){try{let t=await this.UO(i);"Gecko"===g.hi.di&&(s=`'${s}'`),("Gecko"===g.hi.di&&"preview"===this.ef.Gk()||"playable-ad-single-file"===this.ef.Gk())&&(t=this.VH(t));const n=new FontFace(s,`url('${t}')`);(this.ef.OF()?self:document).fonts.add(n),await n.load(),this.ef.OF()&&e.push({name:s,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${s}': `,t)}}h7(t){return!!this.hH[t]}o7(t,s){this.aH=!!s;for(const[i,e,n]of t)this.oH.set(i,{fileName:i,a7:e.map(t=>({type:t[0],l7:t[1],u7:i+t[1],fileSize:t[2]})),c7:n})}f7(t){"flat"===this.tH&&(t=t.toLowerCase());const s=this.oH.get(t);if(!s)return null;let i=null;for(const e of s.a7)if(i||"audio/webm; codecs=opus"!==e.type||(i=e),this.h7(e.type))return e;return i}d7(t){const s=this.f7(t);return s?{url:this.qO(s.u7),type:s.type}:null}p7(){if(this.aH){const t=[];for(const s of this.oH.values())if(!s.c7){const i=this.f7(s.fileName);i&&t.push({m7:s.fileName,url:this.qO(i.u7),type:i.type,fileSize:i.fileSize})}return t}return[]}g7(t){return"preview"===this.ef.Gk()&&(t=new URL(t,location.href).toString()),this.dH.get(t)||null}VH(t){let s=this.pH.get(t);if(!s){const i=this.g7(t);if(!i)return t;s=URL.createObjectURL(i),this.pH.set(t,s)}return s}vF(){return this.CH}async ZO(...t){const s=await Promise.all(t.map(t=>this.UO(t)));if(this.ef.OF())if(1===t.length){const i=t[0];await import((g.wo(i)?"./":"")+i)}else{const e=t.map(t=>`import "${g.wo(t)?"./":""}${t}";`).join("\n"),n=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));await import(n)}else await Promise.all(s.map(t=>r(t)))}async sk(t){if(WebAssembly.compileStreaming){const s=await this.UO(t);return WebAssembly.compileStreaming(fetch(s))}{const i=await g.Go(t);return WebAssembly.compile(i)}}async ek(t){const s=await this.UO(t);return this.ef.IO("runtime","add-stylesheet",{url:s})}}}{const bn=self.Os;bn.y7=class extends bn.nr{constructor(t,s){super(),this.w7=t,this.ef=t.NO(),this.S7=s.url||"",this.b7=s.size,this.v7=s.JH,this.M7=s.blob||null,this.x7=!!this.M7,this.Fg=null}lr(){this.Fg=null,this.w7=null,this.ef=null,this.M7=null}$H(){return this.S7}sc(){return this.b7}XH(){return"local"===this.v7||this.M7?(this.x7=!0,Promise.resolve()):(this.Fg||(this.Fg=this.w7.xo(this.S7,this.v7).then(t=>(this.x7=!0,this.Fg=null,this.M7=t)).catch(t=>{console.error("Error loading resource: ",t),this.Fg=null})),this.Fg)}G7(){return this.x7}T7(){return this.M7?Promise.resolve(this.M7):this.Fg||this.w7.xo(this.S7,this.v7)}}}{const vn=self.Os,lr=new vn.ad,ur=new Set;vn.qH=class extends vn.y7{constructor(t,s){super(t,s),this._7=null,this.I7=null,this.o1=0,this.C7=-1,this.E7=-1,ur.add(this)}lr(){if(0!==this.o1)throw new Error("released image asset which still has texture references");this.w7.YH(this),this._7=null,ur.delete(this),super.lr()}static P7(){for(const t of ur)t._7=null,t.I7=null,t.o1=0}IV(t,s){return s=s||{},this.o1++,this.I7?Promise.resolve(this.I7):(this._7||(s.u2=this.ef.Ck().R7(),this._7=this.A7(t,s)),this._7)}async A7(s,i){try{const e=await this.T7();return 0===this.o1?this._7=null:await lr.oc(async()=>{const t=await s.lR(e,i);return this._7=null,0===this.o1?(s.vM(t),null):(this.I7=t,this.C7=t.nm(),this.E7=t.gm(),this.I7)})}catch(t){throw console.error("Failed to load texture: ",t),t}}dI(){if(this.o1<=0)throw new Error("texture released too many times");if(this.o1--,0===this.o1&&this.I7){const t=this.I7.Eb();t.vM(this.I7),this.I7=null}}F7(){return this.o1}IM(){return this.I7}nm(){return this.C7}gm(){return this.E7}async D7(){const t=await this.T7();return vn.Ni.ImageBitmap?createImageBitmap(t):vn.Eo(t)}}}{let t=function(t,s){return t.wO().O7()-s.wO().O7()};t;const cr=self.Os;cr.k7=class extends cr.nr{constructor(t,s,i){super(),this.L7=t,this.Ka=s,this.Ya=i,this.N7=[],this.B7=!0,this.W7=new Set,this.j7=!1}lr(){cr.Nh(this.N7),this.W7.clear(),this.L7=null}r0(){cr.Nh(this.N7),this.B7=!0,this.W7.clear(),this.j7=!1}V7(){this.B7=!1}Zu(){if(this.N7.length){if(this.N7.length>this.W7.size)return!1;this.H7()}return!0}U7(t){this.W7.has(t)?(this.W7.delete(t),0===this.W7.size&&(this.j7=!1)):(this.N7.push(t),this.B7=1===this.N7.length)}y0(t){this.W7.add(t),this.j7=!0,50<=this.W7.size&&this.H7()}H7(){this.j7&&(this.N7.length===this.W7.size?this.r0():(cr.qh(this.N7,this.W7),this.W7.clear(),this.j7=!1))}z7(){this.B7||(this.N7.sort(t),this.B7=!0)}J7(t){this.H7(),this.z7(),this.N7.length&&t.push(this.N7)}}}{const fr=self.Os;fr.q7=class extends fr.nr{constructor(t,s){super(),this.X7=t,this.K7=s,this.Y7=fr.hr(fr.Xu)}lr(){this.Y7.lr(),this.Y7=null}Z7(t,s,i){let e=this.Y7.Qs(t,s);return e||(i?(e=fr.hr(fr.k7,this,t,s),this.Y7.Set(t,s,e),e):null)}Q7(t){return Math.floor(t/this.X7)}tU(t){return Math.floor(t/this.K7)}sU(e,n,r){if(n)for(let i=n.bl(),t=n.Ml();i<=t;++i)for(let t=n.vl(),s=n.xl();t<=s;++t)if(!r||!r.Jl(i,t)){const h=this.Z7(i,t,!1);h&&(h.y0(e),h.Zu())&&this.Y7.Qu(i,t)}if(r)for(let i=r.bl(),t=r.Ml();i<=t;++i)for(let t=r.vl(),s=r.xl();t<=s;++t)n&&n.Jl(i,t)||this.Z7(i,t,!0).U7(e)}iU(t,s){let i=this.Q7(t.bl()),e=this.tU(t.vl()),n=this.Q7(t.Ml()),r=this.tU(t.xl());for(;i<=n;++i)for(let t=e;t<=r;++t){const h=this.Z7(i,t,!1);h&&h.J7(s)}}eU(t){let s=t.bl(),i=t.vl(),e=t.Ml(),n=t.xl();for(;s<=e;++s)for(let t=i;t<=n;++t){const r=this.Z7(s,t,!1);r&&r.V7()}}}}{let h=function(t,s){return t.wO().O7()-s.wO().O7()},t=function(t,s){return t.wO().pv()-s.wO().pv()};h,t;const S=self.Os,dr=new S.Rect,pr=new S.Kl,mr=[],gr=(new S.Rect,new S.Rect,self.ws),Tn=gr._s,Hn=gr.Is,Gn=gr.Ms,yr=Gn.create(),wr=Tn.create(),Sr=Hn.create(),br=Tn.create(),vr=Tn.create(),Mr=Tn.create(),xr=S.hr(S.Xa),Gr=(S.hr(S.Rect),[]),Tr=[],_r=[],Ir={name:"",sid:-1,nU:!1,isVisible:!0,isInteractive:!0,N5:!1,backgroundColor:[1,1,1,1],tN:!0,rU:[1,1],opacity:1,eN:!1,hU:!1,oU:!1,aU:!1,scaleRate:1,m3:0,Q5:0,lU:[],uU:[],cU:[]};S.fU=class extends S.nr{constructor(t,s,i){super(),i=Object.assign({},Ir,i),this.dU=t,this.ef=t.NO(),this.pU=s,this.dr=i.name,this.Hg=-1,this.mU=!!i.N5,this.gU=-1,this.yU=i.sid,this.wU=!!i.nU,this.SU=!!i.isVisible,this.bU=!!i.isInteractive,this.vU=S.hr(S.Vo),this.vU.Ba(i.backgroundColor),this.MU=!!i.tN,this.xU=i.rU[0],this.GU=i.rU[1],this.Jb=S.hr(S.Vo,1,1,1,i.opacity),this.TU=S.hr(S.Vo),this._U=!!i.eN,this.IU=!!i.hU,this.CU=!!i.oU,this.EU=!!i.aU,this.PU=i.scaleRate,this.zb=i.m3,this.RU=null,this.AU=1,this.qb=i.Q5,this.FU=0,this.DU=0,this.OU=0,this.kU=!1,this.aE=S.hr(S.Rect),this.LU=S.hr(S.Rect),this.NU=S.hr(S.Rect),this.BU=!0,this.cM=Gn.create(),this.WU=!0,this.QA=Gn.create(),this.jU=!0,this.VU=S.hr(S.Kg.ty),this.HU=!0,this.UU=[],this.zU=i.lU,this.JU=[],this.qU=[],this.$U=new Map,this.N7=[],this.XU=!1,this.KU=!1,this.YU=!1;const n=this.ef.Ck();this.ZU=S.hr(S.QU,this,i.uU),this.pF=S.hr(S.Kg.uA,n.sz(),{QR:(t,s)=>{const i=s.hF(),e=i.rR();t.Kb(i.iz()),t.dR(e),t.pR(e),n.ez(e)},sA:t=>this.HL().nz(t)}),this.rz=!0,this.hz=!0,this.oz=null,this.az=[],this.lz=!1,this.uz=S.hr(S.Rect,0,0,-1,-1),this.cz=S.hr(S.Rect,0,0,-1,-1),this.fz=new self.l5(this),this.dz(),this.pz()&&(this.oz=S.hr(S.q7,this.ef.LF(),this.ef.BF())),this.mz=i.cU.map(t=>S.fU.gz(this.dU,this,t))}yz(){for(const t of this.zU){const s=this.ef.wz(t[1]);this.dU.Sz(s),s.bz()||(s.vz(t),s.Mz(this.Hg)),this.JU.push(t),this.$U.set(t[2],t)}S.Vh(this.UU,this.JU),this.zU=null}static gz(t,s,i){return S.hr(S.fU,t,s,{name:i[0],sid:i[2],isVisible:i[3],isInteractive:i[13],N5:i[19],backgroundColor:i[4].map(t=>t/255),tN:i[5],rU:[i[6],i[7]],opacity:i[8],eN:i[9],hU:i[17],oU:i[18],aU:i[10],scaleRate:i[11],m3:i[12],Q5:i[16],lU:i[14],uU:i[15],cU:i[20]})}lr(){for(const t of this.mz)t.lr();S.Nh(this.mz);for(const s of this.N7)this.ef.AN(s);S.Nh(this.N7),this.ZU.lr(),this.ZU=null,this.pF.lr(),this.pF=null,this.fz=null,this.pU=null,this.dU=null,this.ef=null}xz(t){return this.$U.get(t)}Gz(n){let r=this.dU.Tz(),h=0,o=this.JU;for(let e=0,t=o.length;e<t;++e){let t=o[e],s=this.ef.wz(t[1]),i=!0;if(!s._z()||r){const a=this.ef.Iz(t,this,!0);n.push(a),s.Cz()&&(i=!1,this.qU.push(a.BN()))}i&&(o[h]=o[e],++h)}S.Lh(o,h),this.ef.jL(),this.GO()}Ez(t,s){if(!t.bL().Kk())throw new Error("instance is not of world type");const i=t.wO();if(i.SO()!==this)throw new Error("instance added to wrong layer");this.N7.push(t),0!==i.pv()&&(this.YU=!0),s&&this.pz()&&t.wO().U4(),this.GO(t)}Pz(t){this.N7.includes(t)||(this.N7.push(t),0!==t.wO().pv()&&(this.YU=!0),this.GO(t))}Rz(t,s){const i=t.wO();if(i.SO()!==this)throw new Error("instance added to wrong layer");this.N7.unshift(t),0!==i.pv()&&(this.YU=!0),this.GO(t),s&&this.pz()&&t.wO().U4()}Az(t,s){const i=this.N7.indexOf(t);i<0||(s&&this.pz()&&t.wO().Fz(),this.N7.splice(i,1),this.GO(t),this.Dz())}Oz(){this.YU=!0}Dz(){0===this.N7.length&&(this.YU=!1)}kz(t){if(t){const s=new Set;for(const i of this.N7){const e=i.wO().O7();0<=e&&s.add(e)}let t=-1;for(const n of this.N7){const r=n.wO();if(!(0<=r.O7())){for(++t;s.has(t);)++t;r.Lz(t)}}}this.N7.sort(h)}Nz(){}Bz(){for(const t of this.N7)t.TN().Cz()||this.ef.AN(t);this.ef.jL(),S.Nh(this.N7),this.YU=!1,this.GO()}Wz(s,t,i,e,n,r){const h=this.ef.YF(),o=this.ef.jz(),a=s.Vz(),l=[];for(const u of this.JU){const c=u[0],f=c[0],d=c[1];if(t.Jl(f,d)){const p=o[u[1]];if(p!==s){if(!a)continue;if(!s.Uz(p))continue}let t=n;if(!t){const y=this.ef.gO();t=this.tO()===y?this:(t=y.zz(this.$c()))||y.vO(this.wF())}const m=this.ef.Iz(u,t,!1,void 0,void 0,!1,r),g=(t.kL(m),m.wO());g.X4(i,e),g.U4(),h.LL(!0),m.NL(),h.LL(!1),l.push(m)}}return l}FL(){return this.N7.length}tO(){return this.dU}$c(){return this.dr}Jz(t){this.Hg=t}wF(){return this.Hg}qz(t){this.gU=t}Wj(){return this.gU}B5(){return this.mU}W5(t){this.mU!==(t=!!t)&&(this.mU=t,this.dU.$z(),this.ef.TO())}Xz(){let t=this._5();return(t?t.E5():this.tO().Kz()).indexOf(this)}Yz(){return this.yU}NO(){return this.ef}Zz(){return this.wU}Qz(){for(const t of this.I5())if(t.Zz())return!0;return!1}Bk(){return this.ef.Bk()}HL(){return this.ZU}yF(){return this.t9(),this.pF}t9(){const t=this.s9();if(this.rz||t!==this.hz||this.pF.t3()){const s=this.HL().i9();this.pF.s3(s.map(t=>t.sG()),{eA:s.map(t=>t.wF()),nA:!t,lA:!0}),this.rz=!1,this.hz=t}}A6(){this.HL().A6(),this.rz=!0}pz(){return this.EU&&!this.CU}e9(){return this.oz}n9(){this.lz=!1}O5(){for(const t of this.r9())if(!t.A5())return!1;return!0}A5(){return this.SU}F5(t){this.SU!==(t=!!t)&&(this.SU=t,this.ef.TO())}L5(t){this.bU=!!t}k5(){return this.bU}V5(){for(const t of this.r9())if(!t.k5())return!1;return!0}aN(t){if(this.kU!==(t=!!t)){if(this.kU=t){const s=this.tO();this.DU=s.QL(),this.OU=s.s5()}this.h9(),this.ef.TO()}}o9(){return this.kU}ZL(t){const s=this.tO(),i=s.a9(),e=s.l9();this.DU!==(t=(t=e<t?e:t)<i?i:t)&&(this.DU=t,this.o9())&&(this.h9(),this.ef.TO())}t5(t){const s=this.tO(),i=s.u9(),e=s.c9();this.OU!==(t=(t=e<t?e:t)<i?i:t)&&(this.OU=t,this.o9())&&(this.h9(),this.ef.TO())}QL(){return this.o9()?this.DU:this.tO().QL()}s5(){return this.o9()?this.OU:this.tO().s5()}uN(){return this.f9(),this.aE}d9(){return this.f9(),this.LU}p9(){return this.f9(),this.NU}v5(){const t=this.tO();return[t.m9(),t.g9()]}cw(t){return this.ef.cw(t)}y9(c,e){const n=this.d9();if(0===c)e._(n);else{let o=n.Cl(),a=n.El(),t=this.w9(c),s=n.width()/t,i=n.height()/t,[l,u]=this.v5();if(.5!==l||.5!==u){let t=this.S9(),s=this.ef,i=this.cw()/t,e=(l-.5)*s.b9()/i,n=(u-.5)*s.v9()/i,r=this.YL(),h=(0!==r&&(xr.set(e,n),xr.rotate(r),e=xr.tl(),n=xr.il()),S.Fr(t,0,c));o+=S.Dt(e,0,h),a+=S.Dt(n,0,h)}e.set(o-s/2,a-i/2,o+s/2,a+i/2)}}vP(){return this.Jb.oa()}xP(t){t=S.mr(t,0,1),this.Jb.oa()!==t&&(this.Jb.ta(t),this.dz(),this.ef.TO())}dz(){this.TU._(this.Jb),this.TU.ya()}iz(){return this.TU}s9(){return this.Jb.da(1,1,1,1)}J5(){return this.PU}z5(t){this.PU!==t&&(this.PU=t,this.h9(),this.ef.TO())}K5(){return this.xU}Z5(){return this.GU}M9(t,s){this.xU===t&&this.GU===s||(this.xU=t,this.GU=s,this.h9(),this.ef.TO())}X5(t){this.M9(t,this.Z5())}Y5(t){this.M9(this.K5(),t)}mv(t){this.qb!==t&&(this.qb=t,this.ef.TO())}pv(){return this.qb}KL(t){t=S.gr(t),this.FU!==t&&(this.FU=t,this.h9(),this.ef.TO())}YL(){return S.gr(this.dU.YL()+this.FU)}q5(){return this.FU}x9(){return 0<this.N7.length}MO(){return this.N7}G9(){return this.T9()&&this.CU?(S.Vh(_r,this.MO()),_r.sort((t,s)=>this._9(t,s)),_r):this.MO()}I9(t){S.$n(t,this.G9());for(const s of this.mz)s.O5()&&0<s.vP()&&s.I9(t)}_9(t,s){const i=this.tO().C9(),e=i[0],n=i[1],r=i[2],h=t.wO(),o=s.wO(),a=h.av()-e,l=h.cv()-n,u=h.pv()-r,c=o.av()-e,f=o.cv()-n,d=o.pv()-r;return c*c+f*f+d*d-(a*a+l*l+u*u)}oN(){return this.vU}iN(){return this.MU}sN(t){this.MU!==(t=!!t)&&(this.MU=t,this.ef.TO())}rN(){return this._U}nN(t){this._U!==(t=!!t)&&(this._U=t,this.ef.TO())}E9(){return!this.NO().P9()||!this.IU}T9(){return!this.E9()}R9(){return this.T9()&&this.tO().A9()}F9(){if(!this.R9())return!1;for(const t of this.mz)if(!t.F9())return!1;return!0}Xb(t){this.zb!==t&&(this.zb=t,this.ef.TO())}hN(){return this.zb}D9(){return!this.pU}_5(){return this.pU}O9(t){this.pU=t}E5(){return this.mz}k9(){return 0<this.mz.length}L9(t,s=!0){s?this.mz.push(t):this.mz.unshift(t)}N9(t,s,i){let e=this.mz.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.mz.splice(e,0,t)}B9(t){const s=this.mz.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.mz.splice(s,1)}W9(){for(const t of this.mz)if(t.j9())return!0;return!1}*R5(){for(const t of this.mz)yield*t.R5();yield this}*I5(){let t=this._5();for(;t;)yield t,t=t._5()}*r9(){yield this,yield*this.I5()}V9(t){for(const s of this.I5())if(s===t)return!0;return!1}H9(t){return this===t||this.xU===t.xU&&this.GU===t.GU&&this.AU===t.AU&&this.PU===t.PU&&this.FU===t.FU&&this.QL()===t.QL()&&this.s5()===t.s5()}U9(){return{parallaxX:this.K5(),parallaxY:this.Z5(),scale:this.U5(),scaleRate:this.J5(),angle:this.q5(),hasOwnScroll:this.o9(),scrollX:this.QL(),scrollY:this.s5()}}z9(t){this.M9(t.parallaxX,t.parallaxY),this.H5(t.scale),this.z5(t.scaleRate),this.KL(t.angle),this.aN(t.hasOwnScroll),this.ZL(t.scrollX),this.t5(t.scrollY),this.f9()}J9(t){if(0!==t.size){const s=S.qh(this.N7,t);0<s&&(this.Dz(),this.GO())}}GO(t){this.XU=!1,this.lz=!1,t&&!t.TN().bL().Zk()||(this.KU=!1)}q9(){if(!this.XU){if(this.N7.sort(t),this.pz())for(let t=0,s=this.N7.length;t<s;++t){const i=this.N7[t].wO();i.Lz(t),this.oz.eU(i.X9())}else for(let t=0,s=this.N7.length;t<s;++t)this.N7[t].wO().Lz(t);this.XU=!0}}K9(){if(!this.KU){let t=this.dU.Y9(this.Wj()),s=t.map(t=>[...t.R5()]).flat(),i=0;for(const e of s){for(const n of e.MO())n.TN().bL().Zk()&&n.wO().Z9(i++);e.Q9()}}}Q9(){this.KU=!0}tJ(){return{isVisible:this.O5(),opacity:this.vP(),isInteractive:this.k5()}}sJ(t,s,i){const e=t.wO(),n=s.wO();if(e.SO()!==this||n.SO()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let r=e.bO(),h=n.bO();return r!==h+(i?1:-1)&&(S.Hh(this.N7,r),r<h&&h--,i&&h++,h===this.N7.length?this.N7.push(t):this.N7.splice(h,0,t),this.GO(t),!0)}iJ(t,s){let i=[],e=0,n=0,r=t.length,h=s.length;for(;e<r&&n<h;){const o=t[e],a=s[n];o.wO().O7()<a.wO().O7()?(i.push(o),++e):(i.push(a),++n)}for(;e<r;++e)i.push(t[e]);for(;n<h;++n)i.push(s[n]);return i}eJ(s){const i=[],e=s.length;for(let t=0;t<e-1;t+=2){const n=s[t],r=s[t+1];i.push(this.iJ(n,r))}return e%2==1&&i.push(s[e-1]),i}nJ(t){for(;1<t.length;)t=this.eJ(t);return t[0]}rJ(){return this.q9(),S.Nh(mr),this.oz.iU(this.uN(),mr),mr.length?1===mr.length?mr[0]:this.nJ(mr):[]}j9(){return this.O5()&&0<this.vP()&&this.hJ()}hJ(){if(this.x9()||!this.iN())return!0;for(const t of this.mz)if(t.hJ())return!0;return!1}oJ(){return this.rN()||!this.s9()||0!==this.hN()||this.ZU.aJ()}lJ(){if(this.oJ())return!0;for(const t of this.mz)if(t.lJ())return!0;return!1}rR(){return this.RU}w9(t){if(this.dU.G5())return 1;{const s=this.uJ();return s/(s-t)}}cJ(t){const s=this.ef.MN();if(this.dU.G5())return s;{const i=this.uJ(),e=this.cw();return e/Math.abs(i-t)*s}}h9(){this.jU=!0,this.HU=!0,this.BU=!0}fJ(t){return this.jU&&(this.dJ(t,this.QA,0,0,null),this.jU=!1),this.QA}S9(t){return this.cw(t)/this.pJ()}uJ(){return this.R9()?this.tO().C9()[2]:this.S9()}mJ(){if(this.R9()){const t=this.tO().C9();return[t[0],t[1],t[2]]}return this.gJ()}gJ(t=0,s=0,n=0){let r=this.ef,i=this.tO(),e=r.yJ(),h=r.wJ(),o=(this.QL()-e)*this.xU+e,a=(this.s5()-h)*this.GU+h,l=(r.VF()&&(o=Math.round(o),a=Math.round(a)),o+t),u=a+s,c=i.G5()?this.cw(n):this.S9(n),[f,d]=this.v5();if(.5!==f||.5!==d){let t=this.cw(n)/c,s=(f-.5)*r.b9()/t,i=(d-.5)*r.v9()/t,e=this.YL();0!==e&&(xr.set(s,i),xr.rotate(e),s=xr.tl(),i=xr.il()),l+=s,u+=i}return[l,u,c]}dJ(t,s,i,e,n){const r=this.ef,h=this.tO();if(this.R9()){Tn._(br,h.C9()),Tn._(vr,h.SJ()),Tn._(Mr,h.bJ());const o=r.yJ(),a=r.wJ(),l=vr[0]-br[0],u=vr[1]-br[1],c=vr[2]-br[2];br[0]=(br[0]-o)*this.xU+o,br[1]=(br[1]-a)*this.GU+a,br[2]*=Math.max(this.xU,this.GU),vr[0]=br[0]+l,vr[1]=br[1]+u,vr[2]=br[2]+c}else{const[f,d,p]=this.gJ(i,e,n),m=(Tn.set(br,f,d,p),Tn.set(vr,f,d,p-100),this.YL());0===m?Tn.set(Mr,0,1,0):Tn.set(Mr,Math.sin(m),Math.cos(m),0)}t.Cw(s,br,vr,Mr,n||r.v9())}vJ(){this.WU=!0,this.HU=!0,this.BU=!0}MJ(t){return this.WU&&(this.xJ(t),this.WU=!1),this.cM}xJ(t){const s=this.ef.Ck(),[i,e]=this.v5();if(this.dU.G5())t.Iw(this.cM,s.GJ(),s.TJ());else if(.5===i&&.5===e)Gn._(this.cM,s._J());else{const n=s.GJ(),r=s.TJ();t.Tw(this.cM,n/r,i,e)}}LV(t,s=!0,i=0,e=0,n=0){s&&t.uP(this.MJ(t));let r;r=0===i&&0===e&&0===n?this.fJ(t):(this.dJ(t,yr,i,e,n),yr),t.gP(r)}IJ(t){this.LV(t),t.fS(this.pv())}CJ(t){let s=null;if(t.ab()&&this.ef.EJ()){const i=this.ef.Ck().PJ(this);i&&(s=i.XC(),t.bR(s))}return s}RJ(t){if(t._w()&&this.ef.EJ()){const s=2*(this.wF()+1);t.StartMeasuringRenderPassTime(s,1+s)}}Yv(t,s,i){let e=this.ef.Ck(),n=this.oJ(),r=null,h=this.CJ(t);if(this.RJ(t),n){const o={l2:this.ef.WF(),Q2:!0,AJ:!!t._w()&&this.ef.FJ()};"low"===e.DJ()&&(o.width=e.GJ(),o.height=e.TJ()),r=this.ef.OJ(o),this.RU=r,t.cR(r),this.iN()&&t.ZP(0,0,0,0)}else this.RU=s,t.cR(s);if(this.iN()||t.Yu(this.vU),this.dU.kJ(t,this.RU,this.mz,n&&this.iN()),this.RJ(t),this.LV(t),t.fS(this.pv()),t.sR(this.T9()),this.pJ()>Number.EPSILON){this.q9();const a=this.pz()&&0===this.pv()&&!this.YU;this.R9()?this.LJ(t):a?this.NJ(t):this.BJ(t,this.G9())}t.fS(0),t.pS(0),n&&(t.sR(!1),this.WJ(t,r,s,i)),h&&t.MR(h),this.RU=null}BJ(i,e){let n=this.uN(),r=this.RU,h=this.tO().G5(),o=this.tO().jJ(),a=null;for(let t=0,s=e.length;t<s;++t){const l=e[t];if(l!==a){const u=(a=l).wO();u.O5()&&u.VJ(n,o,h)&&this.HJ(l,u,i,r)}}}LJ(e){const n=this.RU,r=this.UJ(),h=Gr,o=Tr,a=this.G9();for(let s=0,i=a.length;s<i;){const l=a[s],u=l.wO();if(u.O5()&&u.zJ(r)){(!l.JJ()||0<u.qJ())&&o.push(l);const c=l.wO().Y4();h.push(l);let t=s+1;for(;t<i;++t){const f=a[t],d=f.wO();if(d.O5()&&d.zJ(r)){if(d.Y4()!==c)break;(f.JJ()?(0<d.qJ()&&o.push(f),h):o).push(f)}}if(1!==h.length||h[0].$J()){this.XJ(e,h);for(let t=0,s=o.length;t<s;++t){const p=o[t],m=p.wO();m.KJ(!0),this.HJ(p,m,e,n),m.KJ(!1)}}else{this.HJ(l,u,e,n);for(let t=0,s=o.length;t<s;++t){const g=o[t];if(g!==l){const y=g.wO(),w=y.SO();w.HJ(g,y,e,n)}}}s=t,S.Nh(h),S.Nh(o)}else++s}}XJ(i,e){const n=this.RU;i.gR();for(let t=0,s=e.length;t<s;++t){const r=e[t],h=r.wO();h.YJ(!0),this.ZJ(r,h,i)}i.yR();for(let t=0,s=e.length;t<s;++t){const o=e[t],a=o.wO();this.HJ(o,a,i,n),a.YJ(!1)}i.SR()}NJ(t){let s=this.oz,i=this.cz,e=this.uz,n=this.uN(),r;i.set(s.Q7(n.bl()),s.tU(n.vl()),s.Q7(n.Ml()),s.tU(n.xl())),this.lz&&i.equals(e)?r=this.az:(r=this.rJ(),this.lz=!0,e._(i)),this.BJ(t,r),r!==this.az&&S.Vh(this.az,r)}HJ(t,s,i,e){s.aJ()?this.QJ(t,s,i,e):this.ZJ(t,s,i)}ZJ(t,s,i){const e=s.tq();i.Xw()!==e&&e.$b(),t.Yv(i)}QJ(t,s,i,e){this.sq(t,s,i,e,null)&&this.LV(i)}sq(t,s,i,e,n){const r=s.V4().yF();return r.f3(i,e,{d3:t,m3:s.hN(),devicePixelRatio:this.ef.iq(),time:t.eq(),g3:this.ef.nq()*this.pJ(),y3:this.YL(),B3:s.Q4(),W3:r.nF()?null:this.rq(s),M3:n&&n.M3,x3:n&&n.x3,G3:n&&n.G3,T3:n&&n.T3}),i.fS(this.pv()),r.wP()}WJ(t,s,i,e){const n=this.ZU.i9(),r=this.ef;0===n.length?(t.cR(i),t.Dw(),e&&0===this.zb&&this.s9()?t.fR(s):(t.Xb(this.zb),t.Kb(this.TU),t.dR(s)),t.pR(s),r.ez(s)):this.yF().f3(t,i,{d3:this,m3:this.hN(),devicePixelRatio:r.iq(),g3:r.nq()*this.pJ(),y3:this.YL(),B3:this.uN(),W3:null,iA:!0})}U5(){return this.AU}H5(t){this.AU!==t&&(this.AU=t,this.dU.hq(),this.h9(),this.ef.TO())}MN(){return this.pJ()*this.ef.MN()}$j(){return this.pJ()*this.ef.$j()}pJ(){return(this.AU*this.dU.XL()-1)*this.PU+1}f9(){if(this.BU){this.BU=!1;let t=this.ef.yJ(),s=this.ef.wJ(),i=(this.QL()-t)*this.xU+t,e=(this.s5()-s)*this.GU+s,n=this.pJ(),r=this.ef.b9()/n,h=this.ef.v9()/n,o=i-r/2,a=e-h/2;this.ef.VF()&&(o=Math.round(o),a=Math.round(a));const l=this.LU,u=(l.set(o,a,o+r,a+h),this.YL()),c=(0!==u&&(dr._(l),dr.offset(-l.Cl(),-l.El()),pr.wu(dr,u),pr.bu(dr),dr.offset(l.Cl(),l.El()),l._(dr)),this.qb);this.y9(c,this.aE),this.R9()?this.oq(c,this.NU):this.NU._(this.aE)}}oq(t,s){let i=this.ef.Ck(),e=i.Ak(),n=i.Dk(),[r,h]=this.fN(0,0,t),[o,a]=this.fN(e,0,t),[l,u]=this.fN(e,n,t),[c,f]=this.fN(0,n,t),d=Math.min(r,o,l,c),p=Math.min(h,a,u,f),m=Math.max(r,o,l,c),g=Math.max(h,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}fN(t,s,i=0){return this.aq(t,s,i,this.$j())}wN(t,s,i=0){return this.aq(t,s,i,this.MN()*this.Bk())}aq(t,s,i,e){const n=this.ef,r=n.Eb(),h=this.pJ(),o=n.b9()/h,a=n.v9()/h,l=Sr,u=(Hn.set(l,0,0,o,a),t/=e,s=l[3]-s/e,this.MJ(r)),c=this.fJ(r),f=wr,d=S.Kg.Qg(t,s,i,c,u,l,f);return d?[f[0],f[1]]:[NaN,NaN]}lq(t,s){const i=this.AU,e=this.PU,n=this.xU,r=this.GU,h=this.FU,o=(this.AU=1,this.PU=1,this.xU=1,this.GU=1,this.FU=0,this.h9(),this.fN(t,s));return this.AU=i,this.PU=e,this.xU=n,this.GU=r,this.FU=h,this.h9(),o}gN(t,s,i=0){return this.uq(t,s,i,this.$j())}bN(t,s,i=0){return this.uq(t,s,i,this.MN()*this.Bk())}uq(t,s,i,e){const n=this.ef,r=n.Eb(),h=this.pJ(),o=n.b9()/h,a=n.v9()/h,l=Sr,u=(Hn.set(l,0,0,o,a),this.MJ(r)),c=this.fJ(r),f=wr,d=S.Kg.Yg(t,s,i,c,u,l,f);return d?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}cq(t,s){return t*=this.MN()*this.Bk(),0!==s&&(t*=this.w9(s)),t}rq(t){const s=t.Q4(),i=t.Y4(),e=t.qJ(),l=i+e,u=s.bl(),c=s.vl(),f=s.Ml(),d=s.xl();if(this.R9()){if(this.fq(u,c,i)||this.fq(f,c,i)||this.fq(f,d,i)||this.fq(u,d,i))return null;if(0<e&&(this.fq(u,c,l)||this.fq(f,c,l)||this.fq(f,d,l)||this.fq(u,d,l)))return null}else if(l>=this.S9())return null;let[p,m]=this.bN(u,c,i),[g,y]=this.bN(f,d,i);if(0!==this.YL()||0<e||this.R9()){const[w,S]=this.bN(f,c,i),[b,v]=this.bN(u,d,i);if(0<e){let[t,s]=this.bN(u,c,l),[i,e]=this.bN(f,c,l),[n,r]=this.bN(f,d,l),[h,o]=this.bN(u,d,l),a=Math.min(p,g,w,b,t,i,n,h);g=Math.max(p,g,w,b,t,i,n,h),p=a,a=Math.min(m,y,S,v,s,e,r,o),y=Math.max(m,y,S,v,s,e,r,o),m=a}else{let t=Math.min(p,g,w,b);g=Math.max(p,g,w,b),p=t,t=Math.min(m,y,S,v),y=Math.max(m,y,S,v),m=t}}return dr.set(p,m,g,y),dr}UJ(){return this.HU&&(this.pq(),this.HU=!1),this.VU}pq(){const t=this.ef.Eb(),s=this.MJ(t),i=this.fJ(t);this.VU.my(i,s)}fq(t,s,i){return this.UJ().yy(t,s,i)}mq(){const t={d:this.Zz(),s:this.U5(),a:this.q5(),v:this.A5(),i:this.k5(),html:this.B5(),bc:this.vU.toJSON(),t:this.iN(),sx:this.DU,sy:this.OU,hosp:this.kU,px:this.K5(),py:this.Z5(),c:this.Jb.toJSON(),sr:this.J5(),fx:this.ZU.Mv(),cg:this.qU};return t}gq(t){this.wU=!!t.d,this.AU=t.s,this.FU=t.a,this.SU=!!t.v,this.bU=!t.hasOwnProperty("i")||t.i,this.mU=!!t.html,this.vU.Ba(t.bc),this.MU=!!t.t,t.hasOwnProperty("sx")&&(this.DU=t.sx),t.hasOwnProperty("sy")&&(this.OU=t.sy),t.hasOwnProperty("hosp")&&(this.kU=!!t.hosp),this.xU=t.px,this.GU=t.py,this.Jb.Ba(t.c),this.dz(),this.PU=t.sr,S.Vh(this.qU,t.cg),S.Vh(this.JU,this.UU);let i=new Set(this.qU),e=0;for(let t=0,s=this.JU.length;t<s;++t)i.has(this.JU[t][2])||(this.JU[e]=this.JU[t],++e);S.Lh(this.JU,e),this.ZU.xv(t.fx),this.rz=!0}yq(){this.kz(!1),this.GO(),this.h9(),this.vJ()}n5(){return this.fz}kL(t,s=!1){if(this.N7.includes(t))s&&this.N7.sort((t,s)=>{const i=t.wO().wq(),e=s.wO().wq();return i-e});else if(t.Sq()){const i=[...t.IB()];i.push(t),i.sort((t,s)=>{const i=t.wO().wq(),e=s.wO().wq();return i-e});for(const e of i)if(e.LN())for(const n of e.NN())if(!i.includes(n)){const r=[...n.IB()];r.push(n),r.sort((t,s)=>{const i=t.wO().wq(),e=s.wO().wq();return i-e}),r&&r.length&&i.splice(i.length,0,...r)}for(const h of i)h.bL().Kk()&&this.Ez(h,!0)}else if(t.bL().Kk()&&this.Ez(t,!0),t.LN())for(const o of t.NN()){const a=[...o.IB()];if(a.push(o),a.sort((t,s)=>{const i=t.wO().wq(),e=s.wO().wq();return i-e}),a&&a.length)for(const l of a)l.bL().Kk()&&this.Ez(l,!0)}}}}{let l=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},v=function(t,s){I!==t&&(t.IJ(s),I=t)},M=(l,v,self.Os),e=self.C3Debugger,n=(M.hr(M.Rect),M.hr(M.Rect),M.hr(M.Rect)),x=M.hr(M.Vo),t=self.ws,u=t._s,a=[],G=[],T=[],_=[],I=null;M.bq=class extends M.nr{constructor(t,s,i){super(),this.vq=t,this.ef=t.NO(),this.dr=i[0],this.Mq=i[1],this.xq=i[2],this.Hm=i[1],this.Um=i[2],this.Gq=!!i[3],this.Tq=!!i[4],this._q=i[5],this.Iq=i[6],this.Cq=i[7],this.Eq=null,this.yU=i[8],this.Hg=s,this.DU=0,this.OU=0,this.AU=1,this.FU=0,this.Pq=new Set,this.Rq=new Set,this.Aq=new Set,this.Fq=[],this.Dq=[],this.Oq=new Map,this.kq=new Map,this.Lq=[],this.Nq=!1,this.Bq=u.create(),this.Wq=u.create(),this.jq=u.create(),this.Vq=[],this.Hq=[],this.Uq=new Map,this.zq=new Map,this.Jq=-1;const n=this.ef.Ck();this.ZU=M.hr(M.QU,this,i[11]),this.pF=M.hr(M.Kg.uA,n.sz(),{QR:(t,s)=>{const i=s.hF(),e=i.rR();t.GP(),t.dR(e),t.pR(e),n.ez(e)},sA:t=>this.HL().nz(t)}),this.rz=!0,this.qq=!1,this.RU=null,this.$q={},this.Xq=new Map,this.Kq=!0,this.Yq=new self.VL(this),this.Zq=M.hr(M.Event.Nf);for(const e of i[9])this.Vq.push(M.fU.gz(this,null,e));this.Qq();for(const r of this.o5())r.yz();for(const h of i[10]){const o=this.ef.wz(h[1]);if(!o)throw new Error("missing nonworld object class");o.bz()||o.vz(h),this.Lq.push(h),this.Sz(o)}}lr(){for(const t of this.Hq)t.lr();M.Nh(this.Hq),this.Aq.clear(),this.Eq=null,this.vq=null,this.ef=null}NO(){return this.ef}$c(){return this.dr}Yz(){return this.yU}wF(){return this.Hg}HL(){return this.ZU}yF(){return this.t9(),this.pF}t9(){const t="low"===this.ef.Ck().DJ();if(this.rz||this.qq!==t||this.pF.t3()){const s=this.HL().i9();this.pF.s3(s.map(t=>t.sG()),{eA:s.map(t=>t.wF()),rA:t,lA:!0}),this.rz=!1,this.qq=t}}A6(){this.HL().A6(),this.rz=!0}t$(){let i=this.Hq[0].pJ();for(let t=1,s=this.Hq.length;t<s;++t){const e=this.Hq[t];0===e.K5()&&0===e.Z5()||(i=Math.min(i,e.pJ()))}return i}s$(){return.5*this.ef.b9()/this.t$()}i$(){return.5*this.ef.v9()/this.t$()}a9(){return this.e$()?-1/0:this.s$()}l9(){return this.e$()?1/0:this.nm()-this.s$()}u9(){return this.e$()?-1/0:this.i$()}c9(){return this.e$()?1/0:this.gm()-this.i$()}ZL(t){const s=this.a9(),i=this.l9();this.DU!==(t=(t=i<t?i:t)<s?s:t)&&(this.DU=t,this.n$(),this.ef.TO())}QL(){return this.DU}t5(t){const s=this.u9(),i=this.c9();this.OU!==(t=(t=i<t?i:t)<s?s:t)&&(this.OU=t,this.n$(),this.ef.TO())}s5(){return this.OU}e$(){return this.Gq}hq(){this.ZL(this.QL()),this.t5(this.s5());for(const t of this.Hq)t.o9()&&(t.ZL(t.QL()),t.t5(t.s5()))}S5(t,s){this._q===t&&this.Iq===s||(this._q=t,this.Iq=s,this.r$()&&(this.h$(),this.n$(),this.ef.TO()))}m9(){return this.G5()?.5:this._q}g9(){return this.G5()?.5:this.Iq}jJ(){const t=this.m9(),s=this.g9();return t<0||1<t||s<0||1<s}M5(){this.Tq&&(this.Tq=!1,this.h$(),this.n$(),this.ef.TO())}x5(){this.Tq||(this.Tq=!0,this.h$(),this.n$(),this.ef.TO())}G5(){return this.Tq}r$(){return!this.G5()}o$(t){this.Nq!==(t=!!t)&&(this.Nq=t,this.n$(),this.ef.TO())}A9(){return this.Nq}a$(t,s,i,e,n,r,h,o,a){l(this.Bq,t,s,i)&&l(this.Wq,e,n,r)&&l(this.jq,h,o,a)||(u.set(this.Bq,t,s,i),u.set(this.Wq,e,n,r),u.set(this.jq,h,o,a),this.l$())}l$(){this.n$(),this.ef.TO()}C9(){return this.Bq}SJ(){return this.Wq}bJ(){return this.jq}XL(){return this.AU}$L(t){this.AU!==t&&(this.AU=t,this.n$(),this.hq(),this.ef.TO())}KL(t){t=M.gr(t),this.FU!==t&&(this.FU=t,this.n$(),this.ef.TO())}YL(){return this.FU}nm(){return this.Hm}fm(t){!isFinite(t)||t<1||(this.Hm=t)}gm(){return this.Um}rm(t){!isFinite(t)||t<1||(this.Um=t)}u$(){return this.Eq}Kz(){return this.Vq}*o5(){for(const t of this.Vq)yield*t.R5()}h5(){return this.Hq}c$(){return this.Hq.length}SO(t){return"number"==typeof t?this.vO(t):this.zz(t.toString())}vO(t){return t=M.mr(Math.floor(t),0,this.Hq.length-1),this.Hq[t]}zz(t){return this.Uq.get(t.toLowerCase())||null}f$(t){return!!this.zz(t)}d$(t){return this.zq.get(t)||null}h$(){for(const t of this.Hq)t.vJ()}n$(){for(const t of this.Hq)t.h9()}c5(t,s,i){if(this.f$(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=2<=i?s:s._5(),n=M.hr(M.fU,this,e,{name:t,sid:Math.floor(1e15*Math.random()),nU:!0});this.p$(n,s,i),this.NO().TO(),this.$z()}d5(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.m$(t),this.p$(t,s,i),this.NO().TO(),this.$z())}m5(t){if(this.m$(t)){const s=this.ef.YF();s.LL(!0),t.lr(),s.LL(!1),this.NO().TO(),this.$z()}}y5(){const t=new Set;for(const s of this.o5())s.Zz()&&!s.Qz()&&t.add(s);if(0!==t.size){const i=this.ef.YF();i.LL(!0);for(const e of t)this.m$(e),e.lr();i.LL(!1),this.NO().TO(),this.$z()}}p$(s,i,e){if(2<=e)if(i){if(i===s||i.V9(s))throw new Error(`cannot move layer '${s.$c()}' to sub-layer of itself`);i.L9(s,2===e),s.O9(i)}else 2===e?this.Vq.push(s):this.Vq.unshift(s),s.O9(null);else{const t=i._5();if(t){if(i.V9(s))throw new Error(`cannot move layer '${s.$c()}' to sub-layer of itself`);t.N9(s,i,0===e),s.O9(t)}else{let t=this.Vq.indexOf(i);if(-1===t)throw new Error("cannot find layer to insert by");0===e&&++t,this.Vq.splice(t,0,s),s.O9(null)}}}m$(t){const s=t._5();if(s)return s.B9(t),!0;if(1<this.Vq.length){const i=this.Vq.indexOf(t);if(-1===i)throw new Error("cannot find layer to remove");return this.Vq.splice(i,1),!0}return!1}Qq(){this.Hq=[...this.o5()],this.Uq.clear(),this.zq.clear();for(let t=0,s=this.Hq.length;t<s;++t){const i=this.Hq[t];i.Jz(t),this.Uq.set(i.$c().toLowerCase(),i),this.zq.set(i.Yz(),i)}}g$(){let t=0;for(const s of this.Vq){for(const i of s.R5())i.qz(t);s.B5()&&t++}}y$(){return this.Vq.at(-1).Wj()+1}async $z(){this.Qq(),this.g$(),this.Jq=this.y$()}w$(){return this.Jq}S$(){this.Jq=-1}Y9(t){const s=[];for(const i of this.Vq){const e=i.Wj();if(e===t)s.push(i);else if(t<e)break}return s}U9(){return{scrollX:this.QL(),scrollY:this.s5(),scale:this.XL(),angle:this.YL(),vpX:this.m9(),vpY:this.g9()}}z9(t){this.ZL(t.scrollX),this.t5(t.scrollY),this.$L(t.scale),this.KL(t.angle),this.S5(t.vpX,t.vpY)}b$(){let t=this.Vq.filter(t=>t.j9())[0];for(;t;){if(!t.iN())return x.ia(t.oN()),x.ta(1),x;if(t.oJ())return x.qo(0,0,0,0),x;t=t.E5().filter(t=>t.j9())[0]}return x.qo(0,0,0,0),x}Tz(){return this.Kq}v$(){return[...this.Pq]}Sz(t){if(t.LN())for(const s of t.x$().M$())this.Pq.add(s);else this.Pq.add(t)}G$(){return[...this.Rq]}T$(t,s){if(t===this||!s)return Promise.resolve();t&&(M.Do(this.Rq,t.Rq),t.Rq.clear());const i=[];for(const e of this.Pq)this.Rq.has(e)||(i.push(e._$(s)),this.Rq.add(e));return Promise.all(i)}async I$(t){if(t.Vz())throw new Error("cannot load textures for family");const s=this.ef.Eb();if(s&&!s.vC()&&!this.Rq.has(t)){this.Rq.add(t);const i=t._$(s);this.C$(i),await i,t.E$(),this.ef.TO()}}C$(t){this.Aq.add(t),t.then(()=>this.Aq.delete(t)).catch(()=>this.Aq.delete(t))}P$(){return Promise.all([...this.Aq])}R$(t){if(t.Vz()||0<t.FL())throw new Error("cannot unload textures");const s=this.ef.Eb();s&&this.Rq.has(t)&&(this.Rq.delete(t),t.A$(s))}F$(t,s){if(t!==this&&s)for(const i of this.Rq)i.Cz()||t.Pq.has(i)||(i.A$(),this.Rq.delete(i))}D$(){this.Rq.clear()}async O$(t){const s=this.ef,i=this.vq,e=s.YF(),n=(this.Cq&&(this.Eq=e.k$(this.Cq),this.Eq.L$()),i.N$(this),this.Hm=this.Mq,this.Um=this.xq,this.DU=s.LF()/2,this.OU=s.BF()/2,this.hq(),this.h$(),this.n$(),this.g$(),await this.ef.Ck().B$(this.y$(),!0),this.W$(t),this.ef.j$(!0),this.V$(),this.Kq||this.H$(),this.U$(this.Fq),this.U$(this.Dq),this.z$(),i.J$(),s.jL(),this.ef.j$(!1),this.ef.q$());if(await Promise.all(n),M.Nh(n),!s.$$()){for(const r of this.Fq)r.X$();for(const h of this.Dq)h.K$(this.Oq,this.kq);for(const[o,a]of Object.entries(this.$q)){const l=this.ef.I8(parseInt(o,10));l&&!l.Vz()&&l._z()&&M.Nh(a)}for(const u of this.Fq)u.Y$();for(const c of this.Dq)c.Y$();for(const f of this.Fq)f.AB()||f.Z$();for(const d of this.Dq)d.AB()||d.Z$()}M.Nh(this.Fq),M.Nh(this.Dq),this.Oq.clear(),this.kq.clear(),await Promise.all([...this.Pq].map(t=>t.Q$(this.ef.Eb()))),t&&(s.Nf().dispatchEvent(new M.Event("beforefirstlayoutstart")),await s.tX(new M.Event("beforeprojectstart"))),await this.sX(new M.Event("beforeanylayoutstart")),s.Nf().dispatchEvent(new M.Event("beforelayoutstart")),await this.tX(new M.Event("beforelayoutstart")),s.$$()||await s.m4(M.rX.nX.eX.iX,null,null),s.Nf().dispatchEvent(new M.Event("afterlayoutstart")),await this.tX(new M.Event("afterlayoutstart")),await this.sX(new M.Event("afteranylayoutstart")),t&&(s.Nf().dispatchEvent(new M.Event("afterfirstlayoutstart")),await s.tX(new M.Event("afterprojectstart"))),e.hX(i),await this.P$(),this.Kq=!1}W$(t){for(const s of this.ef.jz())if(!s.Vz()&&s.Kk())for(const i of s.PL()){const e=i.wO(),n=e.SO(),r=M.mr(n.wF(),0,this.Hq.length-1),h=this.Hq[r];e.xO(h,!0),h.Pz(i)}if(!t)for(const o of this.Hq)o.kz(!1)}V$(){for(const t of this.Hq)t.Gz(this.Fq),t.Nz()}H$(){let s=!1;for(const[t,i]of Object.entries(this.$q)){const e=this.ef.I8(parseInt(t,10));if(e&&!e.Vz()&&e._z())for(const n of i){let t=null;if(!e.Kk()||(t=n.hasOwnProperty("instJson")?this.d$(n.instJson.w.l):this.d$(n.w.l))){const r=this.ef.Iz(e,t,!1,0,0,!0);n.hasOwnProperty("instJson")?r.xv(n.instJson):r.xv(n),s=!0,this.Dq.push(r),n.hasOwnProperty("instJson")&&(this.Oq.set(r,n),this.kq.set(n.index,r))}}}for(const h of this.Hq)h.kz(!0),h.GO();s&&(this.ef.jL(),this.ef.aX())}U$(s){for(const i of s)if(i.LN()){const e=i.wO(),t=i.jN();for(const n of i.TN().x$().lX())if(n!==i.TN()){const r=n.PL();if(r.length>t)i.uX(r[t]);else{let t;t=e?this.ef.Iz(n,e.SO(),!0,e.av(),e.cv(),!0):this.ef.Iz(n,null,!0,0,0,!0),this.ef.jL(),n.cX(),i.uX(t),s.push(t)}}}}z$(){for(const t of this.Lq){const s=this.ef.wz(t[1]);s.LN()||this.ef.Iz(t,null,!0)}}fX(){let i=[],e=this.Lq,n=0;for(let t=0,s=e.length;t<s;++t){const r=e[t],h=this.ef.wz(r[1]);h.Cz()?h.LN()&&h.x$().dX()||i.push(this.ef.Iz(r,null,!0)):(e[n]=r,++n)}M.Lh(e,n),this.ef.jL(),this.U$(i)}Wz(t,s,i,e,n,r,h){if(i)return i.Wz(t,s,n,r,e,h);{const o=[];for(const a of this.Hq)o.push(a.Wz(t,s,n,r,e,h));return o.flat()}}async pX(){const t=this.vq;this.ef.$$()||(await this.sX(new M.Event("beforeanylayoutend")),await this.tX(new M.Event("beforelayoutend")),await this.ef.m4(M.rX.nX.eX.mX,null,null),await this.tX(new M.Event("afterlayoutend")),await this.sX(new M.Event("afteranylayoutend"))),t.gX(!0),this.ef.YF().yX(),this.Kq||this.wX();for(const s of this.Hq)s.Bz();for(const i of this.ef.jz())if(!(i.Cz()||i.Kk()||i.bL().$k()||i.Vz())){for(const e of i.PL())this.ef.AN(e);this.ef.jL()}t.gX(!1),t.KD()===this&&t.N$(null)}SX(t,s){const i=t.TN().Yz().toString(),e=(this.$q.hasOwnProperty(i)||(this.$q[i]=[]),this.$q[i]),n={index:s,instJson:t.Mv(),sceneGraphJson:{children:[]}};e.push(n),this.Xq.set(t,n)}bX(t){const s=this.Xq.get(t);for(const i of t.vX()){const e=this.Xq.get(i);e&&s.sceneGraphJson.children.push({index:e.index,flags:M.xX.MX(i.wO())})}}wX(){this.Xq.clear();let t=0;for(const s of this.Hq){s.q9();for(const i of s.MO()){const e=i.TN();!e.Cz()&&e._z()&&(this.SX(i,t),t++)}}for(const n of this.Hq)for(const r of n.MO()){const h=r.TN();!h.Cz()&&h._z()&&this.bX(r)}this.Xq.clear()}GX(){this.$q={},this.Kq=!0}rR(){return this.RU}oJ(){const t=this.ef,s=t.Eb().ab();return"low"===t.Ck().DJ()||s&&t.FJ()||this.ZU.aJ()||s&&t.P9()}TX(t){const s=this.ef.Ck();if(this.oJ()){t.cR(null),t.ZP(0,0,0,0);const i={l2:this.ef.WF(),Q2:t._w()||this.ef.FJ()||this.ZU.aJ(),AJ:!!t._w()&&this.ef.FJ()};"low"===s.DJ()&&(i.width=s.GJ(),i.height=s.TJ()),this.RU=this.ef.OJ(i)}else this.RU=null}_X(t){this.ef.IX(t)&&(t.sR(!1),t.cR(null),t.Dw(),t.fR(this.RU))}CX(t){this.oJ()&&(t.sR(!1),this.EX(t,this.RU))}PX(t){t.cR(this.RU),t.Yu(this.b$()),this.ef.P9()&&t.tR();const s=this.Y9(0);this.kJ(t,this.RU,s,!0),t._w()&&t.StartMeasuringRenderPassTime(0,1),this.CX(t),this.RU=null}RX(t,s){let i=null;this.ef.IX(t)&&(i=this.RU),t.cR(i),t.ZP(0,0,0,0),this.ef.P9()&&t.tR();const e=this.Y9(s);this.kJ(t,i,e,!0),this._X(t),t.sb(),this.ef.Ck().AX(s)}kJ(t,e,s,n){const r=s.filter(t=>t.j9());for(let s=0,i=r.length;s<i;){const h=r[s];if(h.F9()&&!h.lJ()){a.push(h);for(let t=s+1;t<i;++t){const o=r[t];if(!o.F9()||o.lJ())break;a.push(r[t])}if(2<=a.length||1===a.length&&a[0].W9()){this.FX(t,e,a),s+=a.length,M.Nh(a);continue}M.Nh(a)}h.Yv(t,e,n&&0===s),++s}}EX(t,s){const i=this.ZU.i9(),e=this.ef;0===i.length?(t.cR(null),t.Dw(),t.fR(s),t.pR(s),e.ez(s)):(n.set(0,0,e.b9(),e.v9()),this.yF().f3(t,null,{d3:this,m3:3,devicePixelRatio:this.ef.iq(),g3:this.ef.nq()*this.XL(),y3:this.YL(),B3:n,W3:null,iA:!0}))}FX(e,n,t){t[0].iN()||(x.ia(t[0].oN()),x.ta(1),e.Yu(x)),this.ef.Ck(),e.sR(!0);const r=G,h=T,o=_;for(const a of t)a.q9(),a.I9(r);const s=t[0],i=s.CJ(e);s.RJ(e);for(let s=0,i=r.length;s<i;){const l=r[s],u=l.wO(),c=u.SO();if(u.O5()&&u.zJ(c.UJ())){(!l.JJ()||0<u.qJ())&&o.push(l);const f=l.wO().Y4();h.push(l);let t=s+1;for(;t<i;++t){const d=r[t],p=d.wO();if(p.O5()&&p.zJ(p.SO().UJ())){if(p.Y4()!==f)break;(d.JJ()?(0<p.qJ()&&o.push(d),h):o).push(d)}}if(1!==h.length||h[0].$J()){this.DX(e,n,h);for(let t=0,s=o.length;t<s;++t){const m=o[t],g=m.wO(),y=g.SO();g.KJ(!0),v(y,e),y.HJ(m,g,e,n),g.KJ(!1)}}else{v(c,e),c.HJ(l,u,e,n);for(let t=0,s=o.length;t<s;++t){const w=o[t];if(w!==l){const S=w.wO(),b=S.SO();v(b,e),b.HJ(w,S,e,n)}}}s=t,M.Nh(h),M.Nh(o)}else++s}i&&e.MR(i),M.Nh(r),I=null}DX(i,e,n){i.gR();for(let t=0,s=n.length;t<s;++t){const r=n[t],h=r.wO(),o=h.SO();h.YJ(!0),v(o,i),o.ZJ(r,h,i)}i.yR();for(let t=0,s=n.length;t<s;++t){const a=n[t],l=a.wO(),u=l.SO();v(u,i),u.HJ(a,l,i,e),l.YJ(!1)}i.SR()}mq(){const t={sx:this.QL(),sy:this.s5(),s:this.XL(),a:this.YL(),w:this.nm(),h:this.gm(),ortho:this.G5(),vpX:this.m9(),vpY:this.g9(),fv:this.Kq,persist:this.$q,fx:this.ZU.Mv(),layers:{},dynamicLayers:[]};for(const s of this.Hq)if(s.Zz()){const i=s._5();t.dynamicLayers.push({sid:s.Yz(),name:s.$c(),parentSid:i?i.Yz():null,siblingIndex:s.Xz(),data:s.mq()})}else t.layers[s.Yz().toString()]=s.mq();return t}gq(t){this.DU=t.sx,this.OU=t.sy,this.AU=t.s,this.FU=t.a,this.Hm=t.w,this.Um=t.h,this.Tq=!!t.ortho,t.hasOwnProperty("vpX")&&(this._q=t.vpX),t.hasOwnProperty("vpY")&&(this.Iq=t.vpY),this.Kq=!!t.fv,this.$q=t.persist,this.ZU.xv(t.fx),this.rz=!0;for(const[s,i]of Object.entries(t.layers)){const e=parseInt(s,10),n=this.d$(e);n&&n.gq(i)}if(t.hasOwnProperty("dynamicLayers")){this.y5(),this.ef.jL();const r=new Map,h=t.dynamicLayers;for(let t=h.length-1;0<=t;--t){const o=h[t],a=o.sid,l=o.name,u=o.parentSid,c=o.siblingIndex,f=o.data;if(this.Qq(),!this.f$(l)&&!this.d$(a)){let t,s;if(null===u)t=null,s=this.Vq;else{if(!(t=this.d$(u)))continue;s=t.E5()}const d=M.hr(M.fU,this,t,{name:l,sid:a,nU:!0});s.push(d);let i=r.get(s);i||(i=[],r.set(s,i)),i.push({H4:d,siblingIndex:c}),d.gq(f)}}for(const[p,m]of r){m.sort((t,s)=>t.siblingIndex-s.siblingIndex);for(const g of m){let t=g.H4,s=g.siblingIndex,i=p.indexOf(t);p.splice(i,1),p.splice(s,0,t)}}}this.$z(),this.h$(),this.n$()}YD(){return this.Yq}qF(){return this.Zq}OX(t){t.layout=this.YD();const s=this.ef,i=s.M4()&&!s.YF().BL();i&&e.StartMeasuringScriptTime(),this.Zq.dispatchEvent(t),i&&e.AddScriptTime()}tX(t){return t.layout=this.YD(),this.Zq.Jf(t)}sX(t){return t.layout=this.YD(),this.ef.tX(t)}kX(){this.LX(this.Vq)}LX(t,s=0){const i=t.slice(0);i.reverse();for(const e of i)console.log("\t".repeat(s)+"- "+e.$c()),this.LX(e.E5(),s+1)}}}{const Cr=self.Os;Cr.NX=class extends Cr.nr{#C8;#BX=[];#WX=new Map;#jX=new Map;#VX=null;#HX=[];#UX=null;#zX=0;#JX=null;constructor(t){super(),this.#C8=t}lr(){this.#C8=null,this.#VX=null,this.#UX=null,this.#JX=null,Cr.Nh(this.#BX),this.#WX.clear(),this.#jX.clear(),Cr.Nh(this.#HX)}qM(t){const s=Cr.hr(Cr.bq,this,this.#BX.length,t);this.#BX.push(s),this.#WX.set(s.$c().toLowerCase(),s),this.#jX.set(s.Yz(),s)}NO(){return this.#C8}qX(t){this.#UX=t}$X(){if(this.#UX)return this.#UX;if(this.#BX.length)return this.#BX[0];throw new Error("no first layout")}XX(t){return this.#WX.get(t.toLowerCase())||null}KX(t){return this.#jX.get(t)||null}YX(t){return t=Cr.mr(Math.floor(t),0,this.#BX.length-1),this.#BX[t]}tO(t){return"number"==typeof t?this.YX(t):this.XX(t.toString())}iO(){return this.#BX}N$(t){this.#VX=t}KD(){return this.#VX}ZX(t){if(this.#HX.includes(t))throw new Error("layout already running");this.#HX.push(t)}QX(t){const s=this.#HX.indexOf(t);if(-1===s)throw new Error("layout not running");this.#HX.splice(s,1)}*tK(){this.#VX&&(yield this.#VX),this.#HX.length&&(yield*this.#HX)}sK(t){return this.#VX===t||this.#HX.includes(t)}gX(t){if(t)this.#zX++;else{if(this.#zX<=0)throw new Error("already unset");this.#zX--}}WL(){return 0<this.#zX}rO(t){this.#JX=t}J$(){this.#JX=null}nO(){return!!this.#JX}iK(){return this.#JX}eK(){const t=this.KD();t&&t.h$()}nK(){const t=this.KD();t&&t.n$()}}}{const b=self.Os,Er=new RegExp("<(.+?)>","g");b.rK=class extends b.nr{constructor(t){super(),this.ef=t,this.hK=b.hr(b.oK),this.aK=null,this.lK=[],this.uK=new Map,this.cK=new Map,this.fK=new Map,this.dK=[],this.pK=[],this.mK=[],this.gK=!1,this.yK=!1,this.wK=!1,this.SK=()=>this.bK(),this.vK=()=>this.MK(),this.xK=()=>this.GK(),this.TK=()=>this._K(),this.IK=t=>this.CK(t.T6),this.EK=t=>this.PK(),this.RK=t=>this.AK(),this.FK=t=>this.DK(),this.kK=[],this.LK=0}lr(){this.NK(),this.SK=null,this.vK=null,this.xK=null,this.TK=null,this.IK=null,this.RK=null;for(const t of this.lK)t.vW(),t.lr();b.Nh(this.lK),this.lK=null,this.hK.lr(),this.hK=null,b.Nh(this.dK),this.dK=null,b.Nh(this.pK),this.pK=null,b.Nh(this.mK),this.mK=null,this.uK.clear(),this.uK=null,this.cK.clear(),this.cK=null,this.fK.clear(),this.fK=null,b.Nh(this.kK),this.kK=null,this.ef=null}BK(){const t=this.ef.Nf();t.addEventListener("pretick",this.SK),t.addEventListener("tick2",this.vK),t.addEventListener("beforelayoutchange",this.xK),t.addEventListener("layoutchange",this.TK),t.addEventListener("instancedestroy",this.IK),t.addEventListener("beforeload",this.EK),t.addEventListener("afterload",this.RK),t.addEventListener("afterlayoutstart",this.FK)}NK(){const t=this.ef.Nf();t.removeEventListener("pretick",this.SK),t.removeEventListener("tick2",this.vK),t.removeEventListener("beforelayoutchange",this.xK),t.removeEventListener("layoutchange",this.TK),t.removeEventListener("instancedestroy",this.IK),t.removeEventListener("beforeload",this.EK),t.removeEventListener("afterload",this.RK),t.removeEventListener("afterlayoutstart",this.FK)}qM(t){this.hK.oc(t);const s=b.jK.WK(t,this);this.oc(s),this.VK(s),this.fK.set(s.$c(),0)}HK(t){const s=this.UK(),i=t.HN(),e=s.Qs(i),n=b.jK.HK(i+":"+this.fK.get(i),e,this);return this.zK(i),this.oc(n),n}zK(t){this.fK.set(t,this.fK.get(t)+1)}JK(){for(const t of this.lK)if(!t.qK()){const s=t.HN();this.zK(s)}}$K(){for(const t of this.fK.keys())this.fK.set(t,0)}oc(t){this.lK.push(t),this.uK.set(t.$c().toLowerCase(),t)}y0(t){t.XK(),t.qK()||(b.Uh(this.lK,t),b.Uh(this.dK,t),b.Uh(this.pK,t),b.Uh(this.mK,t),this.uK.delete(t.$c().toLowerCase()),this.KK(t),t.SW())||t.lr()}f4(t){this.ef.f4(t,this.aK,null)}NO(){return this.ef}UK(){return this.hK}YK(t){this.aK=t}ZK(){return this.aK}*QK(){for(const t of this.lK)yield t}*tY(){for(const t of this.pK)yield t}sY(t,s){this.cK.has(t)||this.cK.set(t,new Set),this.cK.get(t).add(s)}VK(t){for(const s of t.iY())this.sY(s,t)}KK(t){for(const[s,i]of this.cK.entries())i.has(t)&&(i.delete(t),0===i.size)&&this.cK.delete(s)}eY(t){if(this.cK.has(t))return this.cK.get(t)}nY(t,s){if(s)for(const i of this.lK){const e=s.every(t=>i.rY(t.T6,t.trackId));if(e&&i.$c().includes(t.$c()))return i}}hY(t){return this.uK.get(t.toLowerCase())||null}aY(t){for(const s of this.dK)if(s.$c()===t)return s;for(const i of this.pK)if(i.$c()===t)return i;return null}*lY(i){if(Er.test(i)){Er.lastIndex=0;let t,s=new Set;do{if(t=Er.exec(i)){const e=t[1].split(",");for(const n of e)s.add(n)}}while(t);for(const r of s.values()){const h=this.hY(r);h&&(yield h)}s.clear()}else{const t=this.hY(i);t&&(yield t)}}*uY(t){for(const s of this.lK)s.xW(t)&&(yield s)}cY(t){this.dK.includes(t)||this.dK.push(t),this.fY()}dY(t){b.Uh(this.pK,t),this.pY()}mY(t){this.pK.includes(t)?(t.gY(!0),t.yY(!1),t.wY(!1)):(t.gY(!1),t.yY(!0),t.wY(!1),this.dK.includes(t)||this.dK.push(t)),this.fY()}SY(t){t.gY(!1),t.yY(!1),t.bY(),b.Uh(this.dK,t),this.pY()}vY(t){t.gY(!1),t.yY(!1),this.pK.includes(t)&&(t.wY(!0),this.mK.push(t),b.Uh(this.pK,t)),this.dK.includes(t)&&t.wY(!0)}MY(t){t.gY(!1),t.yY(!1),t.wY(!1),t.AW(1),b.Uh(this.pK,t)}xY(t){this.vY(t),t.bY()}bK(){if(!this.NO().$$()&&this.gK&&!this.yK){for(this.wK=!0;this.dK.length;){const t=this.dK.pop();(t.GY()?(t.TY(),this.mK):(t._Y(),this.pK)).push(t),0!==t.IY()&&(this.LK=1)}const s=this.ef.CY(),i=this.ef.EY(),e=this.ef.ID();for(let t=this.pK.length-1;0<=t;t--){const n=this.pK[t];n&&n.PY(s,e,i)}this.wK=!1,0!==this.LK&&this.NO().TO()}}MK(){if(!this.NO().$$()&&this.gK&&!this.yK){let i;for(let t=0,s=this.mK.length;t<s;t++){const e=this.mK[t];i=i||new Set,e.XK(),this.RY(e),i.add(e)}if(i){b.qh(this.mK,i);for(let t=this.LK=0,s=this.pK.length;t<s;t++)if(0!==this.pK[t].IY()){this.LK=1;break}}this.pY()}}RY(t){t.SW()||t.AY()&&t.FY()&&t.DY()&&t.OY()}fY(){this.gK||(this.gK=!0)}pY(){this.mK.length||this.pK.length||this.dK.length||this.wK||(this.gK=!1)}GK(){for(this.yK=!0;this.dK.length;)this.SY(this.dK.pop());const t=new Set;for(const s of this.pK){const i=s.GK();i&&(s.XK(),t.add(s))}b.qh(this.pK,t),t.clear();for(const e of this.mK){const n=e.GK();n&&(e.XK(),t.add(e))}b.qh(this.mK,t),this.pY();for(const r of this.lK)r.kY()}_K(){this.yK=!1}CK(t){const s=t.TN(),i=this.eY(s);if(i)if(this.ef.$$())this.kK.push(t);else for(const e of i)e.qK()||(e.SW()?this.y0(e):e.AY()||(this.RY(e),this.y0(e)))}PK(){for(const t of this.dK.map(t=>t))this.RY(t),this.y0(t);for(const s of this.pK.map(t=>t))this.RY(s),this.y0(s)}AK(){for(const t of this.kK)this.CK(t);b.Nh(this.kK);for(const s of this.lK)s.AK()}DK(){const t=this.ef.QD(),s=t.KD();if(s)for(const i of this.lK){const e=i.LY();e&&s.$c()===e&&this.mY(i)}}mq(){return{timelinesJson:this.NY(),scheduledTimelinesJson:this.BY(),playingTimelinesJson:this.WY(),markedForRemovalTimelinesJson:this.jY(),hasRuntimeListeners:this.gK,changingLayout:this.yK,isTickingTimelines:this.wK}}gq(t){t&&(this.$K(),this.VY(t.timelinesJson),this.HY(t.scheduledTimelinesJson),this.UY(t.playingTimelinesJson),this.zY(t.markedForRemovalTimelinesJson),this.gK=!t.hasRuntimeListeners,this.yK=!!t.changingLayout,this.wK=!!t.isTickingTimelines,this.JK(),this.fY(),this.pY())}NY(){return this.lK.map(t=>t.mq())}VY(t){for(const s of t){let t=this.hY(s.name);if(t)t.gq(s);else{const i=this.JY(s);if(!i)continue;const e=this.hY(i);(t=this.HK(e)).gq(s)}t.qY()||this.y0(t)}}JY(t){const s=t.name,i=s.split(":");return i&&2===i.length?i[0]:null}BY(){return this.$Y(this.dK)}HY(t){this.XY(t,this.dK)}WY(){return this.$Y(this.pK)}UY(t){this.XY(t,this.pK)}jY(){return this.$Y(this.mK)}zY(t){this.XY(t,this.mK)}KY(t,s){if(s)for(const i of s)if(i===t.$c())return!0;return!1}$Y(t){return t.map(t=>t.$c())}XY(t,s){const i=new Set;for(const e of s)this.KY(e,t)||i.add(e);if(b.qh(s,i),t)for(const n of t){const r=this.hY(n);if(r){const h=s.find((s=>t=>t.$c()===s)(n));h||s.push(r)}}}}}{const Pr=self.Os,Rr=[0,0],Ar=[0,0],Fr=[0,0],Dr=[0,0,0,0,0],Or=new Array(4),kr=[{x:0,y:0,t:0,Ct:0},{x:0,y:0,t:0,Ct:0},{x:0,y:0,t:0,Ct:0}],Lr={x:0,y:0,t:0,Ct:0};Pr.YY=class{constructor(t,s){this.ZY=!1,this.QY=t,this.tZ=[];let i=null;if(i=s?this.QY.sZ(s):Pr.first(this.QY.iZ())){const e=i.XW("offsetX"),n=i.XW("offsetY");if(e&&n){this.eZ=e,this.nZ=n;const r=e.rZ(),h=n.rZ();for(let t=1,s=Math.min(r.length,h.length);t<s;++t){const o=r[t],a=(o.hZ(),o.oZ()),l=h[t],u=(l.hZ(),l.oZ());a&&"cubic-bezier"===a.aZ()&&u&&"cubic-bezier"===u.aZ()?this.tZ.push(Pr.hr(Pr.lZ,a,u,o,l,this.tZ.length)):(a&&"line"===a.aZ()&&u&&u.aZ(),this.tZ.push(Pr.hr(Pr.uZ,o,l,this.tZ.length)))}this.ZY=!0}}}lr(){for(const t of this.tZ)t.lr();Pr.Nh(this.tZ),this.tZ=null,this.QY=null,this.eZ=null,this.nZ=null}cZ(){return this.ZY}fZ(){return this.tZ}dZ(t){const s="relative"===this.eZ.pZ()?t.av():0,i="relative"===this.nZ.pZ()?t.cv():0;for(const e of this.tZ)e.dZ(s,i)}Yg(s,i,t){let e=NaN,n=this.tZ.length;for(let t=0;t<n;t++){const r=this.tZ[t];if("cubic-bezier"===r.nG()){const h=r.Yg(s,i);(isNaN(e)||h[3]<e)&&(e=h[3],Fr[0]=h[2],Fr[1]=r.wF())}}return Fr}mZ(s,i,t){const e=t.tRange;Pr.ue(e[0])||(e[0]=0),Pr.ue(e[1])||(e[1]=1);let n=NaN,r=this.tZ.length;for(let t=0;t<r;t++){const h=this.tZ[t];if("cubic-bezier"===h.nG()){const o=h.gZ(s,i,e);(isNaN(n)||o[3]<n)&&(n=o[3],Fr[0]=o[2],Fr[1]=h.wF())}}return Fr}yZ(t,s){return this.tZ[s].yZ(t)}wZ(t,s){return this.tZ[s].wZ(t)}},Pr.lZ=class{constructor(t,s,i,e,n){this.Hg=n;const r=t.SZ("cubic-bezier"),h=i.SZ("cubic-bezier"),o=s.SZ("cubic-bezier"),a=e.SZ("cubic-bezier");this.bZ=t.vZ(),this.MZ=s.vZ(),this.xZ=t.vZ()+r.GZ(),this.TZ=s.vZ()+o.GZ(),this._Z=i.vZ()+h.IZ(),this.CZ=e.vZ()+a.IZ(),this.EZ=i.vZ(),this.PZ=e.vZ(),this.RZ=0,this.AZ=0,this.FZ=0,this.DZ=0,this.OZ=0,this.kZ=0,this.LZ=0,this.NZ=0,this.BZ=0,this.WZ=0,this.jZ=0,this.VZ=0,this.HZ=0,this.UZ=0,this.zZ=0,this.JZ=0,this.qZ=0,this.$Z=0,this.XZ=0,this.KZ=0,this.YZ=NaN,this.ZY=!1,this.ZZ=100,this.QZ=new Array(this.ZZ+1),this.QZ[0]=0,this.tQ=0,this.sQ=[],this.iQ=[];for(let t=0;t<100;t++)this.iQ.push({x:0,y:0,t:0,Ct:0});this.eQ()}lr(){Pr.Nh(this.QZ),this.QZ=null,Pr.Nh(this.sQ),this.sQ=null,Pr.Nh(this.iQ),this.iQ=null}nG(){return"cubic-bezier"}wF(){return this.Hg}nQ(){return Math.floor(this.tQ/25)}rQ(){return 1/this.nQ()}dZ(t,s){this.hQ=t,this.oQ=s,this.QZ=new Array(this.ZZ+1),this.QZ[0]=0,this.eQ(),this.RZ=this.bZ+this.hQ,this.AZ=this.MZ+this.oQ,this.FZ=this.xZ+this.hQ,this.DZ=this.TZ+this.oQ,this.OZ=this._Z+this.hQ,this.kZ=this.CZ+this.oQ,this.LZ=this.EZ+this.hQ,this.NZ=this.PZ+this.oQ,this.BZ=3*(this.FZ-this.RZ),this.WZ=3*(this.DZ-this.AZ),this.jZ=3*(this.OZ-this.FZ),this.VZ=3*(this.kZ-this.DZ),this.HZ=3*(this.LZ-this.OZ),this.UZ=3*(this.NZ-this.kZ),this.zZ=3*(this.FZ-this.RZ),this.JZ=3*(this.RZ+this.OZ-2*this.FZ),this.qZ=this.LZ-this.RZ+3*(this.FZ-this.OZ),this.$Z=3*(this.DZ-this.AZ),this.XZ=3*(this.AZ+this.kZ-2*this.DZ),this.KZ=this.NZ-this.AZ+3*(this.DZ-this.kZ)}Map(t){if(!this.ZY)return NaN;const s=this.aQ(t);return Ar[0]=this.lQ(s),Ar[1]=this.uQ(s),Ar}Yg(t,s){const i=this.cQ(100),e=this.fQ(t,s,i),n=this.dQ(t,s,i,e);return Dr[0]=n.x,Dr[1]=n.y,Dr[2]=n.t,Dr[3]=n.Ct,Dr}gZ(t,s,i){const e=this.cQ(100),n=this.pQ(t,s,e,i),r=this.dQ(t,s,e,n);return Dr[0]=r.x,Dr[1]=r.y,Dr[2]=r.t,Dr[3]=r.Ct,Dr}yZ(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.BZ+e*this.jZ+n*this.HZ,h=i*this.WZ+e*this.VZ+n*this.UZ,o=Pr.br(r,h);return Rr[0]=r/o,Rr[1]=h/o,Rr}wZ(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.BZ+e*this.jZ+n*this.HZ,h=i*this.WZ+e*this.VZ+n*this.UZ;return Math.atan2(h,r)}aQ(n){if(this.ZY){let t=n*this.QZ[this.ZZ],s=0,i=this.ZZ,e=0;for(;s<i;)e=s+((i-s)/2|0),this.QZ[e]<t?s=e+1:i=e;this.QZ[e]>t&&e--;const r=this.QZ[e];return r===t?e/this.ZZ:(e+(t-r)/(this.QZ[e+1]-r))/this.ZZ}}lQ(t){return this.ZY?self.uc.Cc("cubicbezier")(t,this.bZ+this.hQ,this.xZ+this.hQ,this._Z+this.hQ,this.EZ+this.hQ):NaN}uQ(t){return this.ZY?self.uc.Cc("cubicbezier")(t,this.MZ+this.oQ,this.TZ+this.oQ,this.CZ+this.oQ,this.PZ+this.oQ):NaN}cQ(s){if(!(this.sQ.length>=(s=s||100))){this.sQ=new Array(s),s++;for(let t=0;t<s-1;t++){const i=t/(s-1),e=i**2,n=i**3,r=this.zZ*i,h=this.JZ*e,o=this.qZ*n,a=this.$Z*i,l=this.XZ*e,u=this.KZ*n,c=this.RZ+r+h+o,f=this.AZ+a+l+u;this.iQ[t].x=c,this.iQ[t].y=f,this.iQ[t].t=i,this.iQ[t].Ct=0,this.sQ[t]=this.iQ[t]}}return this.sQ}fQ(s,i,e,t=0,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.YZ))for(let t=0;t<100;t++){const h=e[t],o=h.x-s,a=h.y-i;h.Ct=o*o+a*a,h.Ct<n&&(n=h.Ct,r=t)}else{for(let t=this.YZ;t<this.YZ+5&&!(t>=e.length);t++){const l=e[t],u=l.x-s,c=l.y-i;l.Ct=u*u+c*c,l.Ct<n&&(n=l.Ct,r=t)}for(let t=this.YZ;t>this.YZ-5&&!(t<0);t--){const f=e[t],d=f.x-s,p=f.y-i;f.Ct=d*d+p*p,f.Ct<n&&(n=f.Ct,r=t)}}return this.YZ=r}pQ(s,i,e,n,r=Number.MAX_SAFE_INTEGER){let h=0;if(isNaN(this.YZ))for(let t=0;t<100;t++){const o=e[t],a=o.x-s,l=o.y-i;o.Ct=a*a+l*l,o.t>=n[0]&&o.t<=n[1]&&o.Ct<r&&(r=o.Ct,h=t)}else{for(let t=this.YZ;t<this.YZ+5&&!(t>=e.length);t++){const u=e[t],c=u.x-s,f=u.y-i;u.Ct=c*c+f*f,u.t>=n[0]&&u.t<=n[1]&&u.Ct<r&&(r=u.Ct,h=t)}for(let t=this.YZ;t>this.YZ-5&&!(t<0);t--){const d=e[t],p=d.x-s,m=d.y-i;d.Ct=p*p+m*m,d.t>=n[0]&&d.t<=n[1]&&d.Ct<r&&(r=d.Ct,h=t)}}return this.YZ=h}dQ(h,o,a,l){let u=a[l],t=1,c=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,s=0===l?0:l-1,i=l===t-1?t-1:l+1,e=a[s].t,n=a[i].t,r=(n-e)/4;if(r<.001)break;Or[0]=a[s];for(let t=1;t<=2;t++){const f=e+t*r,d=f**2,p=f**3,m=this.zZ*f,g=this.JZ*d,y=this.qZ*p,w=this.$Z*f,S=this.XZ*d,b=this.KZ*p,v=this.RZ+m+g+y,M=this.AZ+w+S+b,x=v-h,G=M-o,T=x*x+G*G;if(T<c){c=T,l=t,Lr.x=v,Lr.y=M,Lr.t=f,Lr.Ct=T,u=Lr;break t}const _=kr[t-1];_.x=v,_.y=M,_.t=f,_.Ct=T,Or[t]=_}Or[3]=a[i],a=Or}while(t++<20);return u}eQ(){this.ZY=!0;let s=this.lQ(0),i=this.uQ(0),e=0;for(let t=1;t<=this.ZZ;t++){const n=this.lQ(.01*t),r=this.uQ(.01*t),h=s-n,o=i-r;e+=Pr.br(h,o),this.QZ[t]=e,s=n,i=r}this.tQ=e}},Pr.uZ=class{constructor(t,s,i){this.Hg=i,this.mQ=t.vZ(),this.gQ=s.vZ(),this.hQ=0,this.oQ=0}lr(){}nG(){return"line"}wF(){return this.Hg}dZ(t,s){this.hQ=t,this.oQ=s}av(){return this.mQ+this.hQ}cv(){return this.gQ+this.oQ}}}{const v=self.Os;v.jK=class extends v.nr{constructor(t,s,i){super(),this.ef=i.NO(),this.yQ=i,this.wQ=s,this.dr=t,this.SQ=[],this.bQ=0,this.vQ=null,this.MQ=0,this.xQ(),this.GQ=null,this.TQ=null,this._Q=0,this.IQ=0,this.CQ=1,this.EQ=0,this.PQ=1,this.RQ=!1,this.AQ=!1,this.FQ=!1,this.DQ=!0,this.OQ=!1,this.kQ=!1,this.LQ=-1,this.NQ=!1,this.BQ=!1,this.WQ=!1,this.jQ=!1,this.VQ=NaN,this.HQ=[""],this.UQ="",this.zQ=!1,this.LK=0,this.JQ=0,this.qQ=null}static WK(t,s){const i=s.UK(),e=i.$Q(),n=i.Qs(t[e]),r=v.hr(v.jK,t[e],n,s);return r.XQ(!0),r}static HK(t,s,i){return v.hr(v.jK,t,s,i)}lr(){if(!this.SW()){const t=this.ef.Nf();this.yQ.SY(this),this.yQ.xY(this);for(const s of this.SQ)s.lr();v.Nh(this.SQ),this.SQ=null,this.ef=null,this.yQ=null,this.wQ=null,this.OQ=!0,this.GQ=null,this.TQ=null,this.KQ(t)}}KQ(t){const s=v.hr(v.Event,"timelinestatereleased");s.YQ=this,t.dispatchEvent(s)}nG(){return 0}xQ(){for(const t of this.wQ.QQ().ZQ())this.bQ=this.SQ.push(v.ttt.qM(this,t))}stt(){return this.yQ}NO(){return this.ef}iZ(){return this.SQ}itt(e,n,r,h){if(this.JQ){let i;for(let s=0;s<this.SQ.length;s++){let t=this.SQ[s];if(e===t.HW()){const o=t.XW(r);o&&n.constructor===o.ett().constructor&&o.pZ()===h.pZ()&&(i=i||[]).push(o)}}return i}}qY(){return!!this.SQ.length}sZ(t){for(const s of this.SQ)if(v.mn(s.qW(),t))return s;return null}ntt(t){for(const s of this.SQ)if(!s.htt()&&v.mn(s.$c(),t))return s;return null}B8(t){this.dr=t}$c(){return this.dr}ott(){return this.wQ}HN(){return this.wQ.$c()}_W(){return this.wQ._W()}TW(t){this.wQ.TW(t)}att(){return this.wQ.att()}ltt(t){this.wQ.ltt(t)}utt(){return this.wQ.utt()}ctt(t){this.wQ.ctt(t)}pZ(){return this.wQ.pZ()}ftt(t){this.wQ.pZ(t)}VW(t){for(const s of this.iZ())s.VW(t)}EW(){return this.wQ.EW()}IW(t){return this.wQ.IW(t)}RW(){return this.wQ.RW()}PW(t){return this.wQ.PW(t)}B6(){return this.wQ.B6()}dtt(t){return this.wQ.dtt(t)}AW(t){return this.CQ=t}FW(){return this.CQ}LY(){return this.wQ.LY()}ptt(){return this.wQ.ptt()}mtt(){return this.wQ.mtt()}gtt(){return this.EQ}ytt(){return!this.IsPlaying()||0<this.CQ}OW(){return this.GQ||(this.GQ=new Promise(t=>{this.TQ=t})),this.GQ}bY(){this.GQ&&(this.TQ(),this.GQ=null,this.TQ=null)}wtt(t){this.HQ=v.jK.Stt(t),this.zQ=!0}DW(){return this.HQ}btt(){return this.zQ&&(this.UQ=this.HQ.join(" ")),this.zQ=!1,this.UQ}xW(t){if(!this.HQ)return!1;if(!this.HQ.length)return!1;const s=v.jK.Stt(t);return!!s&&!!s.length&&s.every(v.jK.vtt,this)}Mtt(){v.rX.Timeline&&this.constructor===v.jK&&(v.rX.Timeline.eX.PushTriggerTimeline(this),this.yQ.f4(v.rX.Timeline.eX.OnTimelineStarted),this.yQ.f4(v.rX.Timeline.eX.OnTimelineStartedByName),this.yQ.f4(v.rX.Timeline.eX.OnTimelineStartedByTags),this.yQ.f4(v.rX.Timeline.eX.OnAnyTimelineStarted),v.rX.Timeline.eX.PopTriggerTimeline())}xtt(){this.LQ=this.ef.Gtt()}OY(){this.WQ||(this.WQ=!0,v.rX.Timeline&&this.constructor===v.jK&&(v.rX.Timeline.eX.PushTriggerTimeline(this),this.yQ.f4(v.rX.Timeline.eX.OnTimelineFinished),this.yQ.f4(v.rX.Timeline.eX.OnTimelineFinishedByName),this.yQ.f4(v.rX.Timeline.eX.OnTimelineFinishedByTags),this.yQ.f4(v.rX.Timeline.eX.OnAnyTimelineFinished),v.rX.Timeline.eX.PopTriggerTimeline()))}gY(t){this.RQ=t}Ttt(){return this.LQ===this.ef.Gtt()}IsPlaying(t=!1){return!!this.Ttt()||!(!this._tt()||t)||this.RQ}Itt(){return this.IsPlaying(!0)}LW(){return this.Ctt()}Ctt(){return!(this.SW()||this._tt()||this.Itt()||this.FY())}yY(t){this.AQ=t}_tt(){return this.AQ}Ett(t){this.DQ=t;const s=this.YR();(s<=0||s>=this._W())&&(this.DQ=!0)}FY(){return this.DQ}SW(){return this.OQ}wY(t){this.kQ=t}GY(){return this.kQ}Ptt(t){this.NQ=t}Rtt(){return this.NQ}XQ(t){this.BQ=!!t}qK(){return this.BQ}DY(){return this.FQ}YR(){return this._Q}GW(t){const s=this.YR();this.Att(t),this.Ett(!1),this.FY()||this.Ptt(!0),!this.Itt()&&!this._tt()&&this.FQ||(this.Itt()||this._tt()||this.FQ?this.Itt()?this.vW():this._tt()&&(this.yQ.SY(this),this.Ftt()):this.Ftt()),this.Dtt(),this.Ott(this.YR(),!1,!0,!0,s),this.ktt(),this.LK&&this.NO().TO(),this.Ltt()}Att(t){(t=v.ue(t)?t:this._W())<0?this._Q=0:t>=this._W()?this._Q=this._W():this._Q=t}Ntt(t){(t=v.ue(t)?t:this._W())<0?this._Q=0:t>=this._W()?this._Q=this._W():this._Q=t;for(const s of this.SQ)s.Btt()}Ltt(){v.rX.Timeline&&this.constructor===v.jK&&(v.rX.Timeline.eX.PushTriggerTimeline(this),this.yQ.f4(v.rX.Timeline.eX.OnTimeSet),this.yQ.f4(v.rX.Timeline.eX.OnTimeSetByName),this.yQ.f4(v.rX.Timeline.eX.OnTimeSetByTags),v.rX.Timeline.eX.PopTriggerTimeline())}Wtt(){if(!this.EW())if(this.RW()&&1===this.EQ){if(this.ytt()){if(this.YR()>=this._W())return!1}else if(this.YR()<=0)return!1}else if(!this.EW()&&!this.RW())if(this.ytt()){if(this.YR()>=this._W())return!1}else if(this.YR()<=0)return!1;return!0}MW(){this.SW()||this.Wtt()&&this.Play(!0)}Play(t=!1){return!this.SW()&&!this._tt()&&(this.Itt()&&this.Ttt()?this.jtt():!this.Itt()&&!!(this.FY()||t||this.Rtt())&&this.Vtt())}jtt(){return this.Ptt(!1),this.yQ.dY(this),this.yQ.mY(this),this.OW(),!0}Vtt(){return this.Ptt(!1),this.yQ.mY(this),this.OW(),!0}vW(t=!1){this.SW()||(this.Ett(t),this.yQ.vY(this),this.FY()&&this.bY())}r0(t=!0,s=!1){if(!this.SW()){if(!this.Itt()&&this._tt())return this.yQ.SY(this);if(!this.FY()){this.vW(!0),this.ytt()?this.Att(0):this.Att(this._W());const i=this.YR();this.Dtt(),s?this.Htt(i):this.Ott(i,!1,!1,!0),t&&this.Ltt(),this.ktt(),this.LK&&t&&this.NO().TO()}}}Utt(){this.r0(!1,!0)}Htt(t){this.Ott(t,!1,!1,!0,NaN,!1,!0)}GK(){if(!this.SW()){if(!this.NO().$$()&&this.ztt())return!1;this.yQ.MY(this),this.NO().$$()||this.Utt()}return!0}Ftt(){this._Y(!0)}TY(){this._Y(!1,!0),this.gY(!1),this.yY(!1)}_Y(t=!1,s=!1){if(!this.GY()||s){if(t){this.WQ=!1,this.FQ=!0,this.jQ=!0,this.Dtt();for(const i of this.SQ)i._Y()}else if(this.gY(!0),this.yY(!1),this.Mtt(),this.FY()){this.LQ=-1,0!==this.EQ&&(this.CQ=Math.abs(this.CQ)),this.EQ=0,this.PQ=1,this.DQ=!1,this.WQ=!1,this.FQ=!0,this.jQ=!0,this.ytt()?this.Att(0):this.Att(this._W()),this.Dtt();for(const e of this.SQ)e._Y()}else{this.jQ=!0,this.WQ=!1,this.Dtt();for(const n of this.SQ)n.Jtt()}this.ktt()}}IY(){return this.LK}Dtt(){this.JQ=0;for(const t of this.SQ)t.HC()&&(this.JQ=1)}ktt(){this.LK=0;for(const t of this.SQ)t.qtt(),0===this.LK&&1===t.IY()&&(this.LK=1),this.vQ||1!==t.$tt()||(this.vQ||(this.vQ=[]),this.MQ=this.vQ.push(t))}PY(t,s,i){if(this.mtt()){if(0===t&&0===this.VQ)return;this.VQ=t,t=i}else{if(0===i&&0===this.VQ)return;t=this.VQ=i,s=1}const e=this._Q+this.IQ,n=t*s*this.CQ,r=e+n,h=this.wQ.Xtt;r<0?(this._Q=0,this.IQ=-r):h<=r?(this._Q=h,this.IQ=this._Q-r):(this._Q=r,this.IQ=0);let o=!1,a=!1,l=this.EW(),u=this.RW();l||u?l&&!u?0<this.CQ?this._Q>=h&&(this.Ntt(0),a=!0):this._Q<=0&&(this.Ntt(h),a=!0):!l&&u?0<this.CQ?this._Q>=h&&(this.Att(h),this.AW(-1*this.FW()),a=!0,1===this.EQ?this.PQ<this.B6()?(this.PQ++,this.EQ=0):o=!0:0===this.EQ&&(this.EQ=1)):this._Q<=0&&(this.Att(0),this.AW(-1*this.FW()),a=!0,1===this.EQ?this.PQ<this.B6()?(this.PQ++,this.EQ=0):o=!0:0===this.EQ&&(this.EQ=1)):l&&u&&(0<this.CQ?this._Q>=h&&(this.Att(h),this.AW(-1*this.FW()),a=!0,this.EQ++,v.wrap(this.EQ,0,2)):this._Q<=0&&(this.Att(0),this.AW(-1*this.FW()),a=!0,this.EQ++,v.wrap(this.EQ,0,2))):0<this.CQ?this._Q>=h&&(this.PQ<this.B6()?(this.PQ++,this.Ntt(0),a=!0):(this.Att(h),o=!0)):this._Q<=0&&(this.PQ<this.B6()?(this.PQ++,this.Ntt(h),a=!0):(this.Att(0),o=!0));let c,f=this.bQ;if(o){for(c=0;c<f;c++)this.SQ[c].Ktt();this.vW(!0),this.xtt()}else{const d=this.MQ;for(c=0;c<d;c++)this.vQ[c].Ytt();if(1===this.JQ)for(c=0;c<f;c++){const p=this.SQ[c],m=p.Ztt(),g=this._Q-m,y=e-m;g<0&&0<y?(this._Q=m<0?0:h<=m?h:m,p.Nc(m,!0,!1,a,this.jQ,!1)):p.Nc(this._Q,!0,!1,a,this.jQ,!1)}else for(c=0;c<f;c++)this.SQ[c].Nc(this._Q,!0,!1,a,this.jQ,!1);for(c=0;c<d;c++)this.vQ[c].Qtt();this.jQ&&(this.jQ=!1)}}Ott(s,i=!1,e=!1,n=!1,r=NaN,t=!1,h=!1){for(const o of this.SQ)o.Ytt();for(const a of this.SQ){let t=s;if("number"==typeof r&&!isNaN(r)){const l=this.YR(),u=l-a.Ztt(),c=r-a.Ztt();u<0&&0<c&&(t=a.Ztt(),this.Att(t))}a.Nc(t,i,e,n,this.jQ,h)}for(const f of this.SQ)f.Qtt();this.jQ&&t&&(this.jQ=!1)}tst(){const t=this.wQ.QQ().sst(),s=v.ttt.qM(this,t);return this.bQ=this.SQ.push(s),s}XK(){if(!this.SW())for(const t of this.SQ)t.ist()}kY(){for(const t of this.SQ)t.kY()}est(){for(const t of this.SQ)t.nst()}rst(t,s,i){if(s){if("number"==typeof i&&0<=i){const e=this.SQ[i];return e?(e.hst(s),void this.yQ.sY(s.TN(),this)):void 0}for(const n of this.SQ)if(n.htt())if(t){if(n.qW()===t){n.hst(s),this.yQ.sY(s.TN(),this);break}}else if(!n.ost()){n.hst(s),this.yQ.sY(s.TN(),this);break}}}rY(t,s){for(const i of this.SQ)if(i.htt())if(s){if(s===i.qW()&&t===i.HW())return!0}else if(t===i.HW())return!0;return!1}AY(){return this.SQ.some(t=>!t.htt()||t.ast())}ztt(){return this.SQ.some(t=>{if(t.htt()){if(!t.ast())return!1;const s=t.TN();return!!s&&s.Cz()}return!1})}XW(t){for(const s of this.iZ())for(const i of s.lst())if(i.ust()===t)return i}cst(t){for(const s of this.SQ)if(t===s.HW())return s;return null}fst(t){let s=t?t.split(" "):[],i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const e of this.iZ())for(const n of e.dst()){const r=s.every(t=>n.pst(t));if(r)return n}}iY(){const t=[];for(const s of this.iZ())t.push(s.TN());return t.filter(t=>t)}AK(){for(const t of this.iZ())t.AK()}mq(){return{tracksJson:this.mst(),name:this.dr,playheadTime:this.YR(),playbackRate:this.CQ,pingPongState:this.EQ,currentRepeatCount:this.PQ,isPlaying:this.RQ,isScheduled:this.AQ,initialStateSet:this.FQ,finishedTriggers:this.WQ,complete:this.DQ,released:this.OQ,markedForRemoval:this.kQ,completedTick:this.LQ,implicitPause:this.NQ,isTemplate:this.BQ,tags:this.HQ.join(" "),stringTags:this.UQ,tagsChanged:this.zQ,firstTick:this.jQ}}gq(t){t&&(this.gst(t.tracksJson),this.dr=t.name,this._Q=t.playheadTime,this.CQ=t.playbackRate,this.EQ=t.pingPongState,this.PQ=t.currentRepeatCount,this.RQ=!!t.isPlaying,this.AQ=!!t.isScheduled,this.FQ=!!t.initialStateSet,this.WQ=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.DQ=!!t.complete,this.OQ=!!t.released,this.kQ=!!t.markedForRemoval,this.LQ=t.completedTick,this.NQ=!!t.implicitPause,this.BQ=!!t.isTemplate,this.HQ=t.tags.split(" "),this.UQ=t.stringTags,this.zQ=!!t.tagsChanged,this.jQ=!!t.firstTick)}mst(){return this.SQ.map(t=>t.mq())}gst(t){this.est(),t.forEach((t,s)=>{const i=this.SQ[s];i.gq(t)}),this.SQ.filter(t=>t.ast())}static vtt(t){const s=this.DW();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static Stt(t){if(v.ke(t))return t.slice(0);if(v.ve(t))return t.split(" ");throw new Error("invalid tags")}yst(){return this.qQ||(this.qQ=v.hr(self.BW,this)),this.qQ}}}{const Nr=self.Os;Nr.ttt=class extends Nr.nr{constructor(t,s){super(),this.QY=t,this.wst=s,this.Sst=s.QQ(),this.bst=NaN,this.vst=NaN,this.Mst=null,this.xst=null,this.Gst=!1,this.LC=0<s.Ztt(),this.Tst=!1,this._st=!1,this.Ist=NaN,this.Cst=null,this.Est=this.wst.Rst().Pst(),this.Ast=[],this.Fst(),this.Dst=0,this.LK=0,this.Ost=0}static qM(t,s){return Nr.hr(Nr.ttt,t,s)}lr(){this.Est=null;for(const t of this.Ast)t.lr();Nr.Nh(this.Ast),this.Ast=null,this.QY=null,this.Mst=null,this.xst=null,this.wst=null,this.Cst=null}Fst(){for(const t of this.wst.Lst().kst())this.Ast.push(Nr.Nst.qM(this,t))}ist(){for(const t of this.Ast)t.ist()}kY(){for(const t of this.Ast)t.kY();this.Mst=null,this.xst=null}Bst(){return this.QY}NO(){return this.QY.NO()}dst(){return this.Est||(this.Est=this.wst.Rst().Pst()),this.Est}lst(){return this.Ast}XW(s){for(let t=0;t<this.Ast.length;t++){const i=this.Ast[t];if(i.ust()===s)return i}}Wst(){this.Mst||this.HW()}jst(){return!!this.Mst&&!this.Mst.qj()}ast(){if(!this.htt())return!1;const t=this.Vst(),s=this.NO().dO(t);return!!s&&!s.qj()}TN(){if(this.htt()){const t=this.Hst();if(-1!==t)return this.NO().wz(t)}}Ust(){return this.QY.iZ().indexOf(this)}nst(){this.Mst=null,this.bst=NaN,this.xst=null,this.vst=NaN,this.Gst=!0}ost(){return!!this.Mst}HW(){if(!this.Gst){if(!this.Mst||!this.jst()){const t=this.Vst();this.Mst=this.NO().dO(t)}return this.Mst}}hst(t){if(this.Gst=!1,this.Mst!==t){this.kY(),this.Mst=t,this.vst=t.TN().wF(),this.bst=t.BN(),this.xst=t.wO();for(const s of this.zst()){const i=s.Jst,e=s.qst,n=i.$st();switch(n){case"instance-variable":{e.Xst();const r=t.TN(),h=r.Kst(s.name),o=r.Yst(h),a=r.Zst(h);o===s.name&&a===s.type&&e.Qst(h);break}case"behavior":{const l=s.M6,u=this.TN(),c=t.TN(),f=e.G6(c);if(l&&f){const d=l.$c();u.tit(d),c.tit(d),e.Xst(),e.sit(f.Yz())}break}}}}}*zst(){for(const t of this.Ast){const s=t.ett(),i=this.TN(),e={Jst:t,qst:s};switch(t.$st()){case"world-instance":e.property=t.ust();break;case"instance-variable":{const n=s.Xst();e.name=i.Yst(n),e.type=i.Zst(n);break}case"effect":{const r=i.HL(),h=s.iit(r);e.eit=h;break}case"behavior":{const o=s.G6(i);e.M6=o;break}case"plugin":e.SL=i.bL()}yield e}}wO(){if(!this.xst||!this.jst()){const t=this.HW();t&&(this.xst=t.wO())}return this.xst}nit(){return this.wst}Vst(){return isNaN(this.bst)?this.wst.Vst():this.bst}rit(t){this.wst.rit(t)}utt(){return this.wst.utt()}ctt(t){this.wst.ctt(t)}pZ(){return this.wst.pZ()}qW(){return this.wst.qW()}Ztt(){return this.wst.Ztt()}hit(){return this.wst.hit()}oit(t){this.wst.oit(t)}ftt(t){this.wst.ftt(t)}VW(t){for(const s of this.dst())s.VW(t);for(const i of this.lst())i.VW(t)}ait(){return this.wst.ait()}lit(t){this.wst.lit(t)}Hst(){return isNaN(this.vst)?this.wst.Hst():this.vst}uit(t){this.wst.uit(t)}cit(t){this.wst.cit(t)}fit(){const t=this.HW();if(t){const s=t.p6();if(s.dit())return t.p6().fit()}return this.wst.fit()}pit(t){this.wst.pit(t)}mit(){const t=this.HW();if(t){const s=t.p6();if(s.dit())return t.p6().mit()}return this.wst.mit()}nG(){return this.wst.nG()}$c(){return this.wst.$c()}htt(){return 0===this.nG()}git(){return 1===this.nG()}yit(){return 2===this.nG()}wit(){return this.Dst}IY(){return this.LK}$tt(){return this.Ost}HC(){return this.LC}Btt(){for(const t of this.Ast)t.Btt()}_Y(){if(this.Wst(),this.jst()||!this.htt()){const t=this.Bst(),s=t.ytt(),i=s?0:this.hit();for(const n of this.Ast)n._Y(i),0===this.Dst&&1===n.wit()&&(this.Dst=1),0===this.LK&&1===n.IY()&&(this.LK=1);this.Ost=0;const e=this.Ast.some(t=>t.$tt());e&&(this.Ost=1),this.Cst=this.Sit(i),this.Tst=!1,this._st=!1,this.Nc(i),this.bit(this.Sit(i))}}Jtt(){if(this.Wst(),this.jst()||!this.htt()){this.QY.ytt();const t=this.QY.YR()-this.Ztt();this.Cst=this.Sit(t);for(const s of this.Ast)s.Jtt(t)}}Ktt(){if(!this.Bst().FY()&&(this.Wst(),this.jst()||!this.htt())&&!this.LC){const t=this.QY.YR(),s=this.Ztt()+this.hit();s<=t?this.Nc(this.hit(),!0,!1,!0,!1,!1,!0):t<=0&&this.Nc(0,!0,!1,!0,!1,!1,!0)}}qtt(){for(let t=0,s=this.Ast.length;t<s;t++){const i=this.Ast[t];i.qtt(),0===this.Dst&&1===i.wit()&&(this.Dst=1),0===this.LK&&1===i.IY()&&(this.LK=1)}}Ytt(){const s=this.Ast.length;for(let t=0;t<s;t++)this.Ast[t].Ytt()}Nc(i,t=!1,e=!1,n=!1,s=!1,r=!1,h=!1){this.Mst||this.HW();const o=this.Mst&&!this.Mst.qj(),a=0===this.wst.df;if((o||!a)&&!(r&&a&&this.TN().Cz()||(i-=this.Ztt())<0)){this.vit(i,t),this.Mit(i,t,s);for(let t=0,s=this.Ast.length;t<s;t++)this.Ast[t].Nc(i,e,n,h);this.xit(i,t),0!==this.Dst&&(this.xst||(this.xst=this.Mst.wO()),this.xst)&&this.xst.U4()}}Qtt(){const s=this.Ast.length;for(let t=0;t<s;t++)this.Ast[t].Qtt()}vit(t,s){if(s&&this.LC&&!this.Tst){const i=this.Bst();if(i.ytt()){if(t<0)return}else if(t>this.hit())return;for(const e of this.Ast)e._Y();this.Tst=!0}}xit(t,s){if(s&&this.LC&&!this._st){const i=this.Bst();if(i.ytt()){if(t>=this.hit()){for(const e of this.Ast)e.Nc(this.hit(),!1,!0);this._st=!0}}else if(t<=0){for(const n of this.Ast)n.Nc(0,!1,!0);this._st=!0}}}Mit(t,s,i){if(!i&&s&&Nr.rX.Timeline){const e=this.Bst(),n=this.Cst.hZ(),r=this.Cst.YR(),h=n?n.YR():e._W();if(t<=r||h<=t)if(this.Cst=this.Sst.Git(t,this.wst),e.ytt())n&&this.bit(this.Cst);else{const o=this.Cst.hZ();o&&this.bit(o)}}}Sit(t){const s=this.Sst.Tit(t,this.wst);return s||this.Sst.Git(t,this.wst)}bit(t){if(Nr.rX.Timeline){const s=this.Bst(),i=s.stt();Nr.rX.Timeline.eX.PushTriggerTimeline(s),Nr.rX.Timeline.eX.PushTriggerKeyframe(t),i.f4(Nr.rX.Timeline.eX.OnAnyKeyframeReached),i.f4(Nr.rX.Timeline.eX.bit),Nr.rX.Timeline.eX.PopTriggerTimeline(s),Nr.rX.Timeline.eX.PopTriggerKeyframe(t)}}_it(){const t=this.wst.Rst(),s=t.Iit();return s}Cit(){const t=this.wst.Lst(),s=t.Eit(),i=Nr.Nst.qM(this,s);return this.Ast.push(i),i}Pit(t){const s=this.wst.Rst();s.Rit(t)}Ait(t){for(const s of this.Ast)s.Ait(t)}Fit(){for(const t of this.Ast)t.Fit()}Dit(){if(this.Wst(),this.jst()||!this.htt())for(const t of this.Ast)t.Dit()}Oit(){if(this.Wst(),this.jst()||!this.htt()){let t=!1;for(const s of this.Ast){const i=s.Oit();!t&&i&&(t=!0)}if(t){const e=this._it();e.GW(this.Bst().YR()),e.VW("noease"),e.lit(!0),e.wtt("")}}}AK(){isNaN(this.Ist)||this.kit(this.Ist),this.Ist=NaN}mq(){const t=this.HW(),s=t?t.BN():this.Vst();return{propertyTracksJson:this.Lit(),lastKeyframeDataItemJson:this.Nit(),initialStateOfNestedSet:this.Tst,endStateOfNestedSet:this._st,instanceUid:s,cleared:this.Gst}}gq(t){if(t){this.Bit(t.propertyTracksJson),this.Wit(t.lastKeyframeDataItemJson),this.Ist=t.instanceUid,this.Tst=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Tst=t.initialStateOfNestedSet),this._st=!1,t.hasOwnProperty.endStateOfNestedSet&&(this._st=t.endStateOfNestedSet),this.Gst=!!t.hasOwnProperty("cleared")&&t.cleared;for(const s of this.Ast)0===this.Dst&&1===s.wit()&&(this.Dst=1),0===this.LK&&1===s.IY()&&(this.LK=1);this.Ost=0,this.Ast.some(t=>t.$tt())&&(this.Ost=1)}}Nit(){const t=this.wst.Rst();return t.jit(this.Cst)}Lit(){return this.Ast.map(t=>t.mq())}Bit(t){t.forEach((t,s)=>{const i=this.Ast[s];i.gq(t)})}kit(t){if(Nr.ue(t)){const s=this.NO().dO(t);if(s){const i=this.Bst();i.rst(this.wst.qW(),s,this.Ust())}}}Wit(t){const s=this.wst.Rst();this.Cst=s.Vit(t)}}}{const Br=self.Os;Br.Nst=class extends Br.nr{constructor(t,s){super(),this.Hit=t,this.Uit=s,this.zit=s.Lst(),this.Dst=0,this.LK=0,this.Ost=0,this.Jit=this.ett(),this.qit=this.Uit.Xit().$it(),this.Kit=null,this.Yit=null}static qM(t,s){return Br.hr(Br.Nst,t,s)}lr(){this.Hit=null,this.Jit&&(this.Jit.lr(),this.Jit=null),this.qit=null,this.Uit=null,this.zit=null}wit(){return this.Dst}IY(){return this.LK}$tt(){return this.Ost}Zit(){return!!this.Yit}Qit(t){this.Yit=t}tet(){return this.Yit}iet(){return this.Hit}eet(){return this.Uit}Lst(){return this.zit}Bst(){return this.Hit.Bst()}NO(){return this.Hit.NO()}HW(){return this.Hit.HW()}ett(){if(!this.Jit){let t=this.Uit.$st(),s;switch(t){case"behavior":s=new Br.Nst.net(this);break;case"effect":s=new Br.Nst.ret(this),this.LK=1;break;case"instance-variable":s=new Br.Nst.het(this);break;case"plugin":s=new Br.Nst.oet(this),this.LK=1;break;case"world-instance":s=new Br.Nst.aet(this),this.LK=1,this.Dst=1;break;case"value":s=new Br.Nst.let(this);break;case"audio":s=new Br.Nst.uet(this)}this.Jit=s}return this.Jit}$st(){return this.Uit.$st()}cet(t){this.Uit.cet(t)}fet(){return this.Uit.det()}pet(t){this.Uit.met(t)}$W(){return this.ett().yet()}ust(){return this.Uit.wet()}bet(t){this.Uit.vet(t)}Met(){return this.Uit.nG()}xet(t){this.Uit.Get(t)}Tet(){return this.Lst()._et(this.Uit).nG()}Iet(){return this.Uit.Iet()}Cet(t){this.Uit.Cet(t)}Eet(){return this.Uit.Eet()}Pet(t){this.Uit.Pet(t)}ait(){return this.Uit.ait()}lit(t){this.Uit.lit(t)}utt(){return this.Uit.utt()}ctt(t){this.Uit.ctt(t)}pZ(){return this.Uit.pZ()}ftt(t){this.Uit.ftt(t)}VW(t){for(const s of this.Ret())s.VW(t)}Aet(){return this.Uit.Aet()}Ret(){return this.qit||(this.qit=this.Uit.Xit().$it()),this.qit}rZ(){return this.Uit.Xit().rZ()}Fet(t){return this.zit.Fet(t,this.Uit)}Det(t){return this.zit.Det(t,this.Uit)}Oet(t){let s=this.zit.Fet(t,this.Uit),i;return i=s?this.zit.ket(t,this.Uit):(s=this.zit.Det(t,this.Uit),this.zit.Let(t,this.Uit)),{start:s,end:i}}*Net(){for(const t of this.Ret())yield t.vZ()}*Bet(){for(const t of this.Ret())yield t.YR()}ist(){this.ett().ist()}kY(){this.ett().kY()}Wet(){return this.ett().Wet()}Btt(){this.ett().Btt()}_Y(t){this.ett()._Y(),this.Kit=this.jet(t),this.qtt()}Jtt(t){this.ett().Jtt(),this.Kit=this.jet(t)}qtt(){const t=this.iet();if(this.Ost=0,t.htt()){const s=this.Bst(),i=t.HW(),e=this.ett(),n=this.ust(),r=e.Vet();if(r){const h=s.itt(i,e,n,this);h&&h.length&&(this.Ost=1)}else this.Ost=0}}jet(t){const s=this.Bst(),i=this.zit.Fet(t,this.Uit);return i||(s.ytt()?this.zit.Det(t,this.Uit):this.zit.Let(t,this.Uit))}Ytt(){this.Jit.Ytt()}Nc(t,s=!1,i=!1,e=!1){let n,r,h=!1;if(s)n=this.zit.Det(t,this.Uit);else{if(this.Kit){const o=this.Bst(),a=this.Kit.hZ(),l=this.Kit.YR(),u=a?a.YR():o._W();(t<=l||u<=t)&&(this.Kit=this.zit.Det(t,this.Uit),h=!0)}else this.Kit=this.zit.Det(t,this.Uit),h=!0;n=this.Kit}n&&(r=n.hZ()),this.Jit.Nc(t,n,r,s,i,e,h)}Het(t){if(this.Kit){const e=this.Bst(),n=this.Kit.hZ(),r=this.Kit.YR(),h=n?n.YR():e._W();(t<=r||h<=t)&&(this.Kit=this.zit.Det(t,this.Uit))}else this.Kit=this.zit.Det(t,this.Uit);const s=this.Kit,i=s.hZ();return this.Jit.Het(t,s,i)}Uet(t,s,i){return this.Jit.Het(t,s,i)}Qtt(){this.Jit.Qtt()}static zet(t,s){const i=s.eet(),e=s.zit;return e.Det(t,i)}static Jet(t,s){const i=s.eet(),e=s.zit;return e.Let(t,i)}qet(){const t=this.Uit.Xit(),s=t.$et();return this.Kit=null,s}Ait(t){this.Kit=null;const s=this.Uit.Xit();s.Xet(t)}Fit(){this.ett().Fit()}Dit(){const t=this.ett().Dit();if(t){const s=this.zit._et(this.Uit),i=this.ett().Wet();s.Ket(i)}}Oit(){const t=this.ett().Oit();return t&&this.Yet(),this.ett().Zet(),t}Yet(){const t=this.Bst().YR(),s=this.ett(),i=Br.Nst.zet(t,this),e=this.qet();e.Get(i.nG()),e.GW(t),e.VW(i.Qet()),e.lit(!0),e.tnt(s.snt()),e.Ket(s.Wet())}mq(){return{sourceAdapterJson:this.ett().mq()}}gq(t){t&&this.ett().gq(t.sourceAdapterJson)}}}{const Wr=self.Os,jr=Wr.Nst;jr.aet=class{constructor(t){this.int=t,this.ent=null,this.nnt()}lr(){this.ent&&(this.ent.lr(),this.ent=null),this.int=null}Vet(){return this.ent.Vet()}XW(){return this.int}ist(){this.ent&&this.ent.ist()}kY(){this.ent&&this.ent.kY()}nnt(){return this.ent||(this.ent=this.rnt()),this.ent}Xst(){}wF(){return this.Xst()}hnt(){}Btt(){this.nnt().Btt()}_Y(){this.nnt()._Y()}Jtt(){this.nnt().Jtt()}Ytt(){this.ent.ont()}Nc(t,s,i,e,n,r,h){let o=this.int.Tet(),a;switch(o){case"numeric":a=jr.ant.Nc(t,s,i,this.int);break;case"angle":a=jr.lnt.Nc(t,s,i,this.int);break;case"boolean":a=jr.unt.Nc(t,s,i,this.int);break;case"color":a=jr.cnt.Nc(t,s,i,this.int);break;case"text":a=jr.fnt.Nc(t,s,i,this.int)}this.ent.dnt(t,a,s,i,e,n,r,h)}Het(t,s,i){switch(this.int.Tet()){case"numeric":return jr.ant.Nc(t,s,i,this.int);case"angle":return jr.lnt.Nc(t,s,i,this.int);case"boolean":return jr.unt.Nc(t,s,i,this.int);case"color":return jr.cnt.Nc(t,s,i,this.int);case"text":return jr.fnt.Nc(t,s,i,this.int)}}Qtt(){this.ent.pnt()}Fit(){this.nnt().mnt()}Zet(){this.nnt().Zet()}Wet(){return this.nnt().Wet()}Dit(){return this.nnt().Dit()}Oit(){return this.nnt().Oit()}snt(){const t=this.int,s=t.iet(),i=s.Bst().YR(),e=jr.zet(i,t),n=e.hZ(),r=t.Tet();switch(r){case"numeric":return jr.ant.Nc(i,e,n,t);case"angle":return jr.lnt.Nc(i,e,n,t);case"boolean":return jr.unt.Nc(i,e,n,t);case"color":return jr.cnt.Nc(i,e,n,t);case"text":return jr.fnt.Nc(i,e,n,t)}}rnt(){const t=this.int,s=t.Aet()?t.Tet():"";switch(s){case"combo":case"boolean":case"text":case"string":return new jr.ynt.gnt(this);case"numeric":case"number":case"angle":return new("combo"===this.int.Met()?jr.ynt.gnt:jr.ynt.wnt)(this);case"color":case"offsetColor":return new jr.ynt.Snt(this);default:return new jr.ynt.wnt(this)}}mq(){return{propertyAdapterJson:this.nnt().mq()}}gq(t){t&&this.nnt().gq(t.propertyAdapterJson)}}}{const Vr=self.Os;class Hr extends Vr.Nst.aet{constructor(t){super(t),this.bnt=NaN}Xst(){return this.int.eet().det()[0]}wF(){return this.bnt||super.wF()}hnt(){return this.int.iet().HW()}Qst(t){const s=this.int.eet().det()[0];s!==t&&(this.bnt=t)}Nc(t,s,i,e,n,r,h){this.nnt().vnt(s.yet())&&super.Nc(t,s,i,e,n,r,h)}Het(t,s,i){if(this.nnt().vnt(s.yet()))return super.Het(t,s,i)}mq(){return Object.assign(super.mq(),{index:this.bnt})}gq(t){t&&(super.gq(t),this.bnt=t.index)}}Vr.Nst.het=Hr}{const Ur=self.Os;class zr extends Ur.Nst.aet{constructor(t){super(t),this.yU=NaN}Xst(){const t=this.int.eet();return t.det()[1]}hnt(){const t=this.int.eet(),s=this.int.iet(),i=this.yU||t.det()[0],e=s.HW(),n=e.Mnt(i),r=e.xnt()[n];return r.p6()}G6(t){const s=this.int.eet(),i=s.det()[2];return t.Gnt(i)}sit(t){const s=this.int.eet();s.det()[0]!==t&&(this.yU=t)}Nc(t,s,i,e,n,r,h){const o=this.int.iet(),a=o.HW();this.G6(a.TN())&&super.Nc(t,s,i,e,n,r,h)}Het(t,s,i){const e=this.int.iet(),n=e.HW();if(this.G6(n.TN()))return super.Het(t,s,i)}mq(){return Object.assign(super.mq(),{sid:this.yU})}gq(t){t&&(super.gq(t),this.yU=t.sid)}}Ur.Nst.net=zr}{const Jr=self.Os;class qr extends Jr.Nst.aet{constructor(t){super(t)}Xst(){return this.int.eet().det()[1]}hnt(){const t=this.int,s=t.iet(),i=s.wO(),e=i.V4(),n=e.HL(),r=this.iit(n),h=r.wF();return e.P6(h)?e.Tnt(h):null}iit(t){const s=this.int,i=s.eet().det()[0];return t._nt(i)}Nc(t,s,i,e,n,r,h){this.Int()&&super.Nc(t,s,i,e,n,r,h)}Het(t,s,i){if(this.Int())return super.Het(t,s,i)}Int(){const t=this.int,s=t.iet(),i=s.wO(),e=i.V4(),n=e.HL(),r=this.iit(n);if(r){const h=r.wF();return e.P6(h)}}}Jr.Nst.ret=qr}{const $r=self.Os;class Xr extends $r.Nst.aet{constructor(t){super(t)}Xst(){return this.int.eet().det()[0]}hnt(){return this.int.iet().HW().p6()}Nc(t,s,i,e,n,r,h){const o=this.int.iet(),a=o.TN().bL(),l=o.HW().TN().bL();a===l&&super.Nc(t,s,i,e,n,r,h)}Het(t,s,i){const e=this.int.iet(),n=e.TN().bL(),r=e.HW().TN().bL();if(n===r)return super.Het(t,s,i)}Cnt(){const t=this.int.iet(),s=t.TN().bL();if($r.rX.Ent&&s instanceof $r.rX.Ent&&("initial-frame"===this.int.ust()||"initial-animation"===this.int.ust()))switch(this.int.pZ()){case"relative":case"absolute":return null}}}$r.Nst.oet=Xr}{const Kr=self.Os;class Yr extends Kr.Nst.aet{constructor(t){super(t),this.Pnt=0,this.Rnt=!1}Vet(){return!1}_Y(){let t=this.int.Lst(),s=this.int.eet();s=t._et(s),this.Pnt=s.vZ()}Jtt(){}yet(){return this.Rnt||this.int.Nc(0),this.Pnt}Nc(t,s,i,e,n,r,h){this.Pnt=Kr.Nst.ant.Nc(t,s,i,this.int),this.Rnt=!0}Fit(){}Zet(){}Wet(){return this.Pnt}Dit(){return!1}Oit(){return!1}mq(){return{value:this.Pnt,init:this.Rnt}}gq(t){t&&(this.Pnt=t.value,this.Rnt=!t.hasOwnProperty("init")||t.init)}}Kr.Nst.let=Yr}{const Zr=self.Os;class Qr extends Zr.Nst.aet{constructor(t){super(t),this.Ant=!1,this.Fnt=null,this.Dnt=null,this.Ont=null,this.QY=this.int.Bst(),this.Hit=this.int.iet(),this.knt=this.int.fet(),this.Lnt=this.knt[0],this.Nnt=this.knt[1],this.knt[3]?this.Bnt=this.knt[3]:this.Bnt=Math.random().toString(36).slice(2),this.Wnt=NaN,this.jnt=NaN,this.Vnt=NaN,this.Hnt=null,this.Unt()}lr(){super.lr(),this.Fnt=null,this.Dnt=null,this.Ont=null,this.QY=null,this.Hit=null,this.knt=null,this.Lnt=null,this.Hnt=null}Unt(){if(self.Os.rX.Audio){const t=this.int.NO(),s=t.znt(self.Os.rX.Audio);s&&(this.Fnt=s.yL().p6()),this.Dnt=self.Os.rX.Audio.Jnt,this.Ont=self.Os.rX.Audio.qnt}}$nt(){if(!this.Hnt){const t=this.int.iet(),s=t.XW("audioSource");s&&(this.Hnt=s.ett())}}Xnt(){const t=this.int.iet(),s=t.XW("volume");return(s?s.ett():this).jnt}ist(){super.ist(),this.Ant=!1,this.Fnt&&(this.Ont&&(this.Wnt=this.Ont.PlaybackTime.call(this.Fnt,this.Bnt),this.jnt=this.Ont.Volume.call(this.Fnt,this.Bnt)),this.Dnt)&&this.Dnt.vW.call(this.Fnt,this.Bnt)}Knt(){return this.Bnt}Ynt(){return this.Vnt}Znt(t){this.Vnt=t}_Y(){super._Y(),this.Wnt=NaN,this.Ant=!1}Jtt(){super.Jtt();const t=this.int.Bst(),s=t.YR();switch(this.Wnt=s-this.Nnt,this.int.ust()){case"audioSource":break;case"volume":this.jnt=this.int.Het(s)}this.Ant=!1}Nc(t,s,i,e,n,r,h){if(this.Fnt)switch(this.int.ust()){case"audioSource":{if(!this.QY.ytt())return;if(e)return void(this.Dnt&&this.Dnt.vW.call(this.Fnt,this.Bnt));if(t<this.Nnt)return void(this.Ant=!1);const o=this.Ont.PlaybackRate.call(this.Fnt,this.Bnt),a=this.QY.FW();if(a!==o&&this.Dnt.AW.call(this.Fnt,this.Bnt,a),this.Ant)return;if(!this.int.Bst().IsPlaying())return;if(this.Ant=!0,isNaN(this.Wnt)){const l=self.performance.now(),u=t-this.Nnt,c=this.Fnt.GetAudioContextState();if("suspended"===c)return void(this.Ant=!1);const f=self.performance.now(),d=(f-l)/1e3,p=u+d;if(this.Dnt){let t=this.Ynt();isNaN(t)?(this.Znt(0),t=0):this.Znt(t),this.Dnt.PlayFromTimeline.call(this.Fnt,this.Lnt,t,this.Bnt,p)}}else{const m=this.Wnt,g=(this.Wnt=NaN,this.Xnt()),y=(this.jnt=NaN,this.Fnt.GetAudioContextState());if("suspended"===y)return void(this.Ant=!1);this.Dnt&&(this.Znt(g),this.Dnt.PlayFromTimeline.call(this.Fnt,this.Lnt,g,this.Bnt,m))}break}case"volume":this.$nt(),super.Nc(t,s,i,e,n,r,h)}}Het(t,s,i){if(this.Fnt)switch(this.int.ust()){case"audioSource":return;case"volume":return this.$nt(),super.Het(t,s,i)}}Qnt(t,s){return this.Hnt?this.Hnt.Ynt():0}trt(t,s,i,e){this.Hnt&&this.Hnt.Znt(this.Qnt()+s),this.Dnt&&this.Hnt&&this.Dnt.Znt.call(this.Fnt,this.Hnt.Knt(),this.Hnt.Ynt())}srt(t,s,i){this.Hnt&&this.Hnt.Znt(s),this.Dnt&&this.Hnt&&this.Dnt.Znt.call(this.Fnt,this.Hnt.Knt(),this.Hnt.Ynt())}irt(){return!0}mq(){return{audioPlaybackStarted:this.Ant,audioTag:this.Bnt,pauseTime:this.Wnt,pauseVolume:this.jnt,volume:this.Vnt}}gq(t){t&&(this.Ant=t.audioPlaybackStarted,this.Bnt=t.audioTag,this.Wnt=t.pauseTime,this.jnt=t.pauseVolume,this.Vnt=t.volume,this.Unt())}}Zr.Nst.uet=Qr}{const th=self.Os;th.Nst.ynt=class{constructor(t){this.Jit=t,this.int=t.XW(),this.xst=this.int.iet().wO(),this.ert=this.int.ust(),this.nrt=!1,this.rrt=null,this.hrt=null}lr(){this.Jit=null,this.int=null,this.xst=null,this.rrt=null,this.hrt=null}Vet(){return!1}ist(){}kY(){this.xst=null,this.rrt=null,this.hrt=null}ett(){return this.Jit}XW(){return this.int}wO(){return this.xst||(this.xst=this.int.iet().wO()),this.xst}ort(t){this.nrt=!!t}art(){return this.nrt}Btt(){}_Y(){}Jtt(){}mnt(){this.rrt=this.Wet()}Zet(){this.rrt=null}Wet(){}Dit(){}Oit(){}vnt(t){const s=typeof this.lrt(),i=typeof t;return s==i}ont(){}dnt(t,s,i,e,n,r,h,o){}pnt(){}urt(){const t=this.crt(()=>{const t=this.int.eet(),s=this.int.Lst();return s._et(t)},()=>{const t=this.int.eet(),s=this.int.Lst();return s.frt(t)});return t.drt()}prt(){const t=this.int.Bst(),e=t.YR()-this.int.iet().Ztt(),s=this.crt(()=>{const t=this.int.eet(),s=this.int.Lst();return s.Det(e,t)},()=>{const t=this.int.eet(),s=this.int.Lst(),i=s.Let(e,t);return i||s.frt(t)});return s.drt()}crt(t,s){const i=this.int.Bst();return(i.ytt()?t:s)()}mrt(t,s){const i=this.int.pZ();return("relative"===i?t:s)()}grt(t,s){return(this.art()?(this.ort(!1),t):s)()}yrt(t){}wrt(){return this.Jit.wF()}Srt(){return this.hrt||(this.hrt=this.Jit.hnt()),this.hrt}brt(t,s,i,e,n,r){const h=this.int.$st();switch(h){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return n();case"audio":return r()}}mq(){return{firstAbsoluteUpdate:this.nrt,saveState:this.rrt}}gq(t){t&&(this.nrt=t.firstAbsoluteUpdate,this.rrt=t.saveState)}vrt(t,s=!1){const i=[];for(const e of t){const n=e.iet().Ztt();for(const r of e.Ret())(s&&0===r.YR()||!s)&&i.push({time:n+r.YR(),value:r.drt()})}return i.sort((t,s)=>t.time-s.time)}Mrt(t,s,i){return this.xrt(s,i)}xrt(s,i){for(let t=i.length-1;0<=t;t--){const e=i[t].time;if(e<=s)return i[t]}return null}}}{const sh=self.Os,ih=new Map,eh=[0,0,0];class nh extends sh.Nst.ynt{constructor(t){super(t)}Btt(){}_Y(){}Jtt(){}Wet(){const t=this.int.$st(),s=this.Srt(),i=this.wrt();switch(t){case"behavior":return this.Grt(s.Trt(i));case"effect":return this.Grt(s[i]);case"plugin":return this.Grt(s.Trt(i));case"world-instance":return this.Grt(this.lrt())}}Dit(){const t=this.urt();return!this._rt(t,this.lrt())}Oit(){return!sh.pe(this.rrt)&&!this._rt(this.rrt,this.lrt())}_rt(t,s){return t=this.Irt(t),s=this.Irt(s),t.ca(s)}urt(){const t=super.urt();return this.Irt(t)}prt(){const t=super.prt();return this.Irt(t)}yrt(t){}Grt(t){return(sh.Ke(t,sh.Vo)?t.toArray():t).slice(0,3)}Irt(t){return sh.Ke(t,sh.Vo)?t:new sh.Vo(t[0],t[1],t[2],1)}vnt(t){return!0}Vet(){return!0}ont(){const t=this.int.Bst(),s=this.int.HW(),i=this.int.ett(),e=t.itt(s,i,this.ert,this.int);if(e&&1<e.length){ih.has(s)||ih.set(s,new Map);const n=ih.get(s),r=this.int.$st(),h=(n.has(r)||n.set(r,new Map),n.get(r));h.has(this.ert)||h.set(this.ert,{Crt:!1,color:new sh.Vo(0,0,0,1)})}}Ert(t,s,i){const e=ih.get(t).get(s).get(i);return e.Crt=!0,e.color}dnt(t,s,i,e,n,r,h,o){const a=this.int.Bst(),l=this.int.iet(),u=this.int.HW(),c=this.int.ett(),f=this.int.$st(),d=this.ert,p=a.itt(u,c,d,this.int);if(p&&1<p.length){const m=this.vrt(p,!0),g=this.Mrt(a,a.YR(),m);if(g){const y=l.Ztt(),w=g.time-y;if(0==w)this.Ert(u,f,this.ert).Xo(s[0],s[1],s[2]);else if(!(w<0)){const S=s[0],b=s[1],v=s[2],M=this.int.Nc(w,!1,!0),x=sh.Vo.Ha(S,M[0]),G=sh.Vo.Ha(b,M[1]),T=sh.Vo.Ha(v,M[2]);this.Ert(u,f,this.ert).Xo(x,G,T)}}}else this.Prt(s[0],s[1],s[2])}pnt(){const t=this.int.HW();if(ih.has(t)){const s=ih.get(t),i=this.int.$st();if(s.has(i)){const e=s.get(i);if(e.has(this.ert)){const n=e.get(this.ert),r=n.Crt,h=n.color;r&&this.Prt(h.ea(),h.na(),h.ra()),0===e.size&&s.delete(i),0===s.size&&ih.delete(t)}}}}lrt(){const t=this.int.$st(),s=this.Srt(),i=this.wrt();switch(t){case"behavior":return this.Irt(s.Trt(i));case"effect":return s[i].clone();case"plugin":return this.Irt(s.Trt(i));case"world-instance":return this.wO().rB().clone()}}Prt(t,s,i){const e=this.int.$st(),n=this.Srt(),r=this.wrt();switch(e){case"behavior":eh[0]=t,eh[1]=s,eh[2]=i,n.Rrt(r,eh);break;case"effect":n[r].$o(t,s,i);break;case"plugin":eh[0]=t,eh[1]=s,eh[2]=i,n.Rrt(r,eh);break;case"world-instance":this.wO().Art(t,s,i)}}mq(){}gq(t){}}sh.Nst.ynt.Snt=nh}{const rh=self.Os,hh=rh.Nst;class oh extends rh.Nst.ynt{constructor(t){super(t)}Btt(){}_Y(){}Jtt(){}Wet(){return this.lrt()}Dit(){const t=this.urt();return t!==this.Wet()}Oit(){return!rh.pe(this.rrt)&&this.rrt!==this.Wet()}Vet(){return!1}dnt(t,s,i,e,n,r,h,o){const a=this.int,l=a.iet(),u=a.$st(),c=a.Bst(),f=l.HW(),d=a.ett(),p=this.ert,m=c.itt(f,d,p,a);if(m&&1<m.length){const y=this.vrt(m),w=t+l.Ztt(),S=this.Mrt(c,w,y);S&&(s=S.value)}const g=a.Tet();switch(g){case"numeric":if(hh.ant.Frt(this.wrt(),this.Srt(),s,u))break;return;case"angle":if(hh.lnt.Frt(this.wrt(),this.Srt(),s,u))break;return;case"boolean":if(hh.unt.Frt(this.wrt(),this.Srt(),s,u))break;return;case"color":if(hh.cnt.Frt(this.wrt(),this.Srt(),s,u))break;return;case"text":if(!hh.fnt.Frt(this.wrt(),this.Srt(),s,u))return}this.Prt(s)}lrt(){const t=this.int.$st(),s=this.Srt(),i=this.wrt();switch(t){case"behavior":return s.Trt(i);case"effect":return s[i];case"instance-variable":return s.Drt(i);case"plugin":return s.Trt(i)}}Prt(t){const s=this.int.$st(),i=this.Srt(),e=this.wrt();switch(s){case"behavior":i.Rrt(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.Ort(e,t);break;case"plugin":i.Rrt(e,t)}}}rh.Nst.ynt.gnt=oh}{const ah=self.Os,lh=(ah.Nst.ynt,new Map),uh=(t,s,i,e,n,r=!1,h=null,o=null)=>{lh.set(t,{krt:s,Lrt:i,Nrt:e,round:n,Brt:r,init:h,reset:o})};uh("offsetX",(t,s,i,e)=>{"relative"===e.int.pZ()?t.Wrt(s,i.Bst().ptt()):t.Wrt(s)},(t,s)=>t.lv(s),t=>t.av(),!0),uh("offsetY",(t,s,i,e)=>{"relative"===e.int.pZ()?t.jrt(s,i.Bst().ptt()):t.jrt(s)},(t,s)=>t.dv(s),t=>t.cv(),!0),uh("offsetWidth",(s,t,o,i,e)=>{if(0!==t){const n="relative"===i.int.pZ(),l=1===i.Vrt.nG();if((n||l)&&s.AB()&&s.WB()){if(isNaN(i.Hrt)){let e=[],t=s.SB();for(;t;)e.push(t),t=t.SB();e.reverse();let a=(t,s)=>s.Bst().cst(t.HW()),n=(t,s)=>{const i=a(t,s);if(i)return i.fit();const e=t.HW().p6();return e.dit()?e.fit():t.zrt().Urt()},r=(t,s,i,e=0)=>{const n=a(t,s);if(!n)return e;const r=n.XW(i);if(!r)return e;const h=r.eet().Xit();if(!h)return e;const o=h.frt();return o?o.yet():e},h;if(l){let t=e[e.length-1];h=t.nm()}else{let s=e[0],t=s.zrt().Urt(),i=s.zrt().Jrt();h=t*i,h=(h+=r(s,o,"offsetWidth"))+n(s,o)*r(s,o,"offsetScaleX");for(let t=1;t<e.length;t++){const u=(s=e[t]).zrt().Jrt();h=(h=(h*=u)+r(s,o,"offsetWidth"))+n(s,o)*r(s,o,"offsetScaleX")}}i.Hrt=0===h?Number.EPSILON:h}e||s.Bm(t/i.Hrt,!0)}else s.Bm(t)}},(t,s)=>t.fm(s),t=>t.nm(),!0),uh("offsetHeight",(s,t,o,i,e)=>{if(0!==t){const n="relative"===i.int.pZ(),a=1===i.Vrt.nG();if((n||a)&&s.AB()&&s.VB()){if(isNaN(i.Hrt)){let e=[],t=s.SB();for(;t;)e.push(t),t=t.SB();e.reverse();let n=(t,s)=>{e=t;const i=s.Bst().cst(e.HW());var e;if(i)return i.mit();const n=t.HW().p6();return n.dit()?n.mit():t.zrt().qrt()},r=(t,s,i,e=0)=>{const n=s.Bst().cst(t.HW());if(!n)return e;const r=n.XW(i);if(!r)return e;const h=r.eet().Xit();if(!h)return e;const o=h.frt();return o?o.yet():e},h;if(a){let t=e[e.length-1];h=t.gm()}else{let s=e[0],t=s.zrt().qrt(),i=s.zrt().$rt();h=t*i,h=(h+=r(s,o,"offsetHeight"))+n(s,o)*r(s,o,"offsetScaleY");for(let t=1;t<e.length;t++){const l=(s=e[t]).zrt().$rt();h=(h=(h*=l)+r(s,o))+n(s,o)*r(s,o,"offsetScaleY")}}i.Hrt=0===h?Number.EPSILON:h}e||s.Xrt(t/i.Hrt,!0)}else s.Xrt(t)}},(t,s)=>t.rm(s),t=>t.gm(),!0),uh("offsetAngle",(t,s,i,e,n)=>{t.Krt(s)},(t,s)=>t.KL(s),t=>t.YL(),!1,!0),uh("offsetOpacity",(t,s,i,e,n)=>{const r=e.Yrt||1,h=(s/=r,t.vP()),o=h+s;if(0===e.Zrt)1<o?e.Zrt+=o-1:o<0&&(e.Zrt+=o),t.Qrt(s);else{const a=t.vP()+s;0<s&&0<e.Zrt?1<a&&(e.Zrt+=a-1):0<s&&e.Zrt<0?(e.Zrt+=s,0<e.Zrt&&(t.Qrt(e.Zrt),e.Zrt=0)):s<0&&0<e.Zrt?(e.Zrt+=s,e.Zrt<0&&(t.Qrt(e.Zrt),e.Zrt=0)):s<0&&e.Zrt<0&&a<0&&(e.Zrt+=a)}},(t,s)=>{t.xP(s)},t=>t.vP(),!1,!0,(r,n,h)=>{switch(r.Zrt=0,r.int.pZ()){case"relative":{r.int.Lst();let t=r.int.eet(),s=t.Xit(),i=s.$it(),e=r.wO().vP(),n=e;for(const o of i){const a=o.YR(),l=r.int.Het(a);n=e+l,n=ah.mr(n,0,1)}r.tht=e-n,r.tht=Math.round(100*(r.tht+Number.EPSILON))/100,n=e;for(let t=i.length-1;0<=t;t--){const u=i[t].YR(),c=r.int.Het(u);n-=c,n=ah.mr(n,0,1)}r.sht=n,r.sht=Math.round(100*(r.sht+Number.EPSILON))/100;break}}const t="relative"===r.int.pZ(),s=1===r.Vrt.nG();if((t||s)&&n.AB()&&n.$B()){let s=[],t=n.SB();for(;t;)s.push(t),t=t.SB();s.reverse();let i=(t,s,i)=>{const e=s.Bst().cst(t.HW());if(!e)return 0;const n=e.XW(i);if(!n)return 0;const r=n.eet().Xit();if(!r)return 0;const h=r.frt();return h?h.yet():0},e=s[0].zrt().iht();e+=i(s[0],h,"offsetOpacity");for(let t=1;t<s.length;t++)e+=i(s[t],h,"offsetOpacity");r.Yrt=0===e?1:e}},i=>{switch(i.int.pZ()){case"relative":{i.Zrt=0;let t=i.wO(),s=t.vP();s=Math.round(100*(s+Number.EPSILON))/100,i.int.Bst().ytt()?(t.xP(s+i.tht),i.qG=0):(t.xP(s-i.sht),i.qG=i.ett().snt());break}}}),uh("offsetOriginX",(t,s)=>t.eht(s),(t,s)=>t.nht(s),t=>t.iW(),!1),uh("offsetOriginY",(t,s)=>t.rht(s),(t,s)=>t.hht(s),t=>t.nW(),!1),uh("offsetZElevation",(t,s)=>t.oht(s),(t,s)=>t.mv(s),t=>t.pv(),!0),uh("offsetScaleX",(t,s,i,e)=>{if(0!==s){const n=t.nm()<0?-1:1;if("relative"===e.int.pZ()&&t.AB()&&t.WB()){const r=i.fit()*n*s;isNaN(e.Hrt)&&lh.get("offsetWidth").krt(t,1,i,e,!0),t.Bm(r/e.Hrt,!0)}else t.Bm(i.fit()*n*s)}},(t,s,i)=>{t.fm(i.fit()*s)},(e,n)=>{const r=e.nm()<0?-1:1;if(e.WB()){let t=e.SB(),s=n.Bst().cst(t.HW()),i=NaN;if(s)i=t.nm()/s.fit();else{const h=t.HW().p6();i=h.dit()?t.nm()/h.fit():1}return e.nm()*r/(n.fit()*i)}return e.nm()*r/n.fit()},!1),uh("offsetScaleY",(t,s,i,e)=>{if(0!==s){const n=t.gm()<0?-1:1;if("relative"===e.int.pZ()&&t.AB()&&t.VB()){const r=i.mit()*n*s;isNaN(e.Hrt)&&lh.get("offsetHeight").krt(t,1,i,e,!0),t.Xrt(r/e.Hrt,!0)}else t.Xrt(i.mit()*n*s)}},(t,s,i)=>{t.rm(i.mit()*s)},(e,n)=>{const r=e.gm()<0?-1:1;if(e.VB()){let t=e.SB(),s=n.Bst().cst(t.HW()),i=NaN;if(s)i=t.gm()/s.mit();else{const h=t.HW().p6();i=h.dit()?t.gm()/h.mit():1}return e.gm()*r/(n.mit()*i)}return e.gm()*r/n.mit()},!1);class ch extends ah.Nst.ynt{constructor(t){super(t),this.qG=0,this.Zrt=0,this.tht=0,this.sht=0,this.Yrt=NaN,this.Hrt=NaN,this.aht=void 0,this.lht=void 0,this.uht=null,this.cht=null,this.fht=null,this.dht=null,this.pht=null,this.mht=null,this.ght=null,this.yht=null,this.wht=!1,this.Sht=!1,ah.Ke(this.int.Bst(),ah.bht)?this.Vrt=new ah.Nst.ynt.vht(this):this.Vrt=new ah.Nst.ynt.Mht(this);const s=this.int.ust();switch(this.int.$st()){case"world-instance":{const i=lh.get(s);this.uht=i.Nrt,this.cht=i.krt,this.fht=i.Lrt,this.wht=i.round,this.Sht=i.Brt,this.pht=i.init,this.dht=i.reset;break}case"audio":this.mht=t.Qnt,this.ght=t.trt,this.yht=t.srt,this.wht=!!t.irt(),this.Sht=!1}}lr(){this.Vrt=null,this.uht=null,this.cht=null,this.fht=null,this.dht=null,this.pht=null,this.mht=null,this.ght=null,this.yht=null,super.lr()}Vet(){return this.Vrt.Vet()}xht(){return this.qG}Ght(t){this.qG=t}Btt(){this.dht&&this.dht(this)}_Y(){const t=this.Vrt._Y();if("number"==typeof t&&(this.qG=t),this.pht){const s=this.wO(),i=this.int.iet();this.pht(this,s,i)}}Jtt(){const t=this.Vrt.Jtt();"number"==typeof t&&(this.qG=t)}Wet(){return this.lrt()}Dit(){const t=this.urt();return t!==this.Wet()}Oit(){return!ah.pe(this.rrt)&&this.rrt!==this.Wet()}ont(){this.Vrt.ont()}dnt(t,s,i,e,n,r,h,o){return this.Vrt.dnt(t,s,i,e,n,r,h,o)}pnt(){this.Vrt.pnt()}lrt(){const t=this.Srt(),s=this.wrt(),i=this.wO(),e=this.int.iet(),n=this.int.$st();switch(n){case"behavior":return t.Trt(s);case"effect":return t[s];case"instance-variable":return t.Drt(s);case"plugin":return t.Trt(s);case"world-instance":return this.uht(i,e);case"audio":return this.mht.call(this.ett(),i,e)}}Prt(t,s,i){const e=this.Srt(),n=this.wrt(),r=this.wO(),h=this.int.iet(),o=this.int.$st();switch(o){case"behavior":e.Tht(n,t);break;case"effect":e[n]+=t;break;case"instance-variable":e._ht(n,t);break;case"plugin":e.Tht(n,t,this.ett().Cnt());break;case"world-instance":this.cht(r,t,h,this);break;case"audio":this.ght.call(this.ett(),r,t,h,this)}}Iht(t,s,i){let e=this.int.utt();if("discrete"!==(e="default"===e?"continuous":e)||s){if("discrete"===e&&i){const l=this.int.Bst(),u=l.YR(),c=this.int.Fet(u);if(!c)return}const n=this.Srt(),r=this.wrt(),h=this.wO(),o=this.int.iet(),a=this.int.$st();switch(a){case"behavior":n.Rrt(r,t);break;case"effect":n[r]=t;break;case"instance-variable":n.Ort(r,t);break;case"plugin":n.Rrt(r,t,this.ett().Cnt());break;case"world-instance":this.fht(h,t,o);break;case"audio":this.yht.call(this.ett(),h,t,o)}}}Cht(t,s,i,e,n,r,h,o){this.Vrt.Cht(t,s,i,e,n,r,h,o)}Eht(t,s,i,e,n){let r=(t="angle"===this.int.Met()?ah.Sr(t):t).toString(),h=r.split(".")[1]||"",o=h.length,a=this.lrt(),l;switch(l=0===o?this.wht?Math.round(a):this.Sht?"angle"===this.int.Met()?ah.yr(Math.round(ah.Sr(a))):Number(ah.toFixed(a,2)):a:this.wht?Number(ah.toFixed(a,o)):(this.Sht,a),this.Prt(l-a,s,i),this.int.ust()){case"offsetWidth":case"offsetScaleX":{const u=this.wO(),c=u.nm(),f=Number(ah.toFixed(c,2));u.Bm(f-c);break}case"offsetHeight":case"offsetScaleY":{const d=this.wO(),p=d.gm(),m=Number(ah.toFixed(p,2));d.Xrt(m-p);break}}}mq(){return Object.assign(super.mq(),{v:this.qG,a:this.Zrt,fod:this.tht,bod:this.sht,of:this.Yrt,sf:this.Hrt,armorf:this.aht,armandf:this.lht})}gq(t){t&&(super.gq(t),this.qG=t.v,this.Zrt=t.a,this.tht=ah.ue(t.fod)?t.fod:0,this.sht=ah.ue(t.bod)?t.bod:0,this.Yrt=ah.ue(t.of)?t.of:NaN,this.Hrt=ah.ue(t.sf)?t.sf:NaN,this.aht=ah.ue(t.armorf)?t.armorf:void 0,this.lht=ah.ue(t.armandf)?t.armandf:void 0)}}ah.Nst.ynt.wnt=ch}{const fh=self.Os;class dh{constructor(t){this.Pht=!1,this.Pnt=0,this.Rht=!1,this.Aht=!1,this.Ast=t;for(let t=0,s=this.Ast.length;t<s;t++)this.Ast[t].Qit(this)}lst(){return this.Ast}Fht(){this.Pht=!0}Dht(){return this.Pht}tnt(t){this.Pnt=t}yet(){return this.Pnt}Oht(t){this.Rht=t}kht(){return this.Rht}Ktt(t){this.Aht=t}Lht(){return this.Aht}r0(){this.Pht=!1,this.Pnt=0,this.Rht=!1,this.Aht=!1}}class ph{constructor(t){this.Nht=t}lr(){this.Nht=null}nG(){return 0}_Y(){const t=this.Nht;return this.Nht.XW(),t.mrt(()=>t.crt(()=>0,()=>t.ett().snt()),()=>{})}Jtt(){}Vet(){this.Nht;const t=this.Nht.XW();switch(t.pZ()){case"relative":return!1;case"absolute":return!0}}ont(){this.Nht;const t=this.Nht.XW(),s=t.ust();switch(t.pZ()){case"relative":break;case"absolute":if(t.Zit()){const i=t.tet();i.r0()}else{const e=t.Bst(),n=t.HW(),r=t.ett(),h=e.itt(n,r,s,t);h&&1<h.length&&new dh(h)}}}dnt(t,s,i,e,n,r,h,o){const a=this.Nht,l=this.Nht.XW();switch(l.pZ()){case"relative":{const u=a.xht();a.Prt(s-u,i,e),r&&this.Cht(t,i,e,n,u,s),a.Ght(s);break}case"absolute":{const c=l.Bst(),f=l.iet();if(l.HW(),l.ett(),l.Zit()){const d=l.tet(),p=d.lst(),m=a.vrt(p,!0),g=a.Mrt(c,c.YR(),m);if(g){const y=f.Ztt(),w=g.time-y;if(0==w)d.Ktt(h),d.Oht(o),d.Fht(),d.tnt(d.yet()+s);else{if(w<0)return;const S=l.Het(w);d.Ktt(h),d.Oht(o),d.Fht(),d.tnt(d.yet()+(s-S))}}}else a.Iht(s,o,h);break}}}pnt(){const t=this.Nht,s=this.Nht.XW();switch(s.pZ()){case"relative":break;case"absolute":if(s.Zit()){const i=s.tet();i.Dht()&&t.Iht(i.yet(),i.kht(),i.Lht())}}}Cht(t,s,i,e,n,r){const h=this.Nht;e||(s&&t===s.YR()?h.Eht(s.vZ(),s,i):i&&t===i.YR()?h.Eht(i.vZ(),s,i):r-n==0&&h.Eht(s.vZ(),s,i))}}fh.Nst.ynt.Mht=ph}{const mh=self.Os;class gh{constructor(t){this.Nht=t}lr(){this.Nht=null}nG(){return 1}_Y(){const t=this.Nht;return t.ort(!0),this.yrt(t.urt())}Jtt(){const t=this.Nht;if(t.urt()!==t.prt())return t.ort(!0),this.yrt(t.prt())}Vet(){return!1}ont(){}dnt(t,s,i,e,n,r,h,o){const a=this.Nht,l=a.xht();switch(a.XW().pZ()){case"relative":a.Prt(s-l,i,e),r&&this.Cht(t,i,e,n,l,s,!1,h);break;case"absolute":a.art()?(a.ort(!1),a.Prt(l,i,e)):0===t&&0===a.XW().Bst()._W()?a.Iht(s,!0,!1):(a.Prt(s-l,i,e),r&&this.Cht(t,i,e,n,l,s,this.Bht(),h))}a.Ght(s)}pnt(){}yrt(t){const s=this.Nht;return t-s.Wet()}Bht(){let t=this.Nht,s=t.wO().HW(),i=t.XW().NO(),e=i.stt(),n=0;for(const r of e.tY())0===r.nG()?r.rY(s)&&n++:1===r.nG()&&r.HW()===s&&n++;return n<=1}Cht(t,s,i,e,n,r,h,o){const a=this.Nht;e?s&&t===s.YR()?a.Eht(s.vZ(),s,i,h,o):i&&t===i.YR()?a.Eht(i.vZ(),s,i,h,o):i||a.Eht(s.vZ(),s,i,h,o):s&&t===s.YR()?a.Eht(s.vZ(),s,i,h,o):i&&t===i.YR()?a.Eht(i.vZ(),s,i,h,o):r-n==0&&a.Eht(s.vZ(),s,i,h,o)}}mh.Nst.ynt.vht=gh}{const yh=self.Os,wh=self.uc;yh.Nst.ant=class{constructor(){}static Frt(t,s,i,e){let n;switch(e){case"behavior":n=s.Trt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Drt(t);break;case"plugin":n=s.Trt(t)}return n!==i}static Nc(r,h,o,a){if(!o){let t=a.eet(),s=a.Lst();return(t=s.frt(t)).vZ()}let l=a.utt();if("default"===l&&(l="continuous"),"discrete"===(l="combo"===a.Met()?"discrete":l))return h.vZ();if("continuous"===l||"step"===l){const u=a.Bst().att();if("step"===l&&0!==u){const g=1/u;r=Math.floor(r*g)/g}const c=h.vZ(),f=o.vZ(),d=h.SZ("cubic-bezier"),p=o.SZ("cubic-bezier"),m=d&&d.Wht()&&p&&p.jht();if(!m&&c===f)return c;let t=h.YR(),s=o.YR(),i=("step"===l&&0!==u&&(r=yh.mr(r,t,s)),yh.normalize(r,t,s)),e=h.Qet(),n;if(m){const y=s-t;n=wh.Cc(e)(y*i,0,1,y),n=wh.Cc("cubicbezier")(n,c,c+d.GZ(),f+p.IZ(),f)}else n=wh.Cc(e)((s-t)*i,c,f-c,s-t);return"integer"===a.Met()?Math.floor(n):n}}}}{const Sh=self.Os;Sh.Nst.lnt=class{constructor(){}static Frt(t,s,i,e){let n;switch(e){case"behavior":n=s.Trt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Drt(t);break;case"plugin":n=s.Trt(t)}return n!==i}static Nc(t,s,i,e){if(!i){let t=e.eet(),s=e.Lst();return(t=s.frt(t)).vZ()}let n=e.utt();if("default"===n&&(n="continuous"),"discrete"===(n="combo"===e.Met()?"discrete":n))return s.vZ();if("continuous"===n||"step"===n){const r=e.Bst().att();if("step"===n&&0!==r){const c=1/r;t=Math.floor(t*c)/c}const h=s.YR(),o=i.YR(),a=s.vZ(),l=i.vZ(),u=("step"===n&&0!==r&&(t=Sh.mr(t,h,o)),s.SZ("angle"));if(!u){if(a===l)return a;const f=Sh.normalize(t,h,o),d=self.uc.Cc(s.Qet());return Sh.Er(a,l,d(f,0,1,1))}{const p=u.Vht();if(a===l&&0===p)return a;const m=Sh.normalize(t,h,o),g=self.uc.Cc(s.Qet()),y=g(m,0,1,1);switch(u.Hht()){case"closest":return Sh.Er(a,l,y,p);case"clockwise":return Sh.Pr(a,l,y,p);case"anti-clockwise":return Sh.Rr(a,l,y,p)}}}}}}{const bh=self.Os;bh.Nst.unt=class{constructor(){}static Frt(t,s,i,e){let n;switch(e){case"behavior":n=s.Trt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Drt(t);break;case"plugin":n=s.Trt(t)}return!!n!=!!i}static Nc(t,s,i,e){if(i)return s.vZ()?1:0;{let t=e.eet(),s=e.Lst();return(t=s.frt(t)).vZ()?1:0}}}}{const vh=self.Os,Mh=[0,0,0],xh=[0,0,0],Gh=[0,0,0];vh.Nst.cnt=class{constructor(){}static Frt(t,s,i,e){let n;switch(e){case"behavior":n=s.Trt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Drt(t);break;case"plugin":n=s.Trt(t)}return Array.isArray(i)?(Mh[0]=i[0],Mh[1]=i[1],Mh[2]=i[2]):(Gh.Ia(i),Mh[0]=Math.floor(255*Gh.ea()),Mh[1]=Math.floor(255*Gh.na()),Mh[2]=Math.floor(255*Gh.ra())),Array.isArray(n)?(xh[0]=n[0],xh[1]=n[1],xh[2]=n[2]):(Gh.Ia(n),xh[0]=Math.floor(255*Gh.ea()),xh[1]=Math.floor(255*Gh.na()),xh[2]=Math.floor(255*Gh.ra())),Mh[0]!==xh[0]||Mh[1]!==xh[1]||Mh[2]!==xh[2]}static Nc(t,s,i,e){if(!i){let t=e.eet(),s=e.Lst(),i=(t=s.frt(t)).vZ();return Mh[0]=i[0],Mh[1]=i[1],Mh[2]=i[2],Mh}let n=e.utt();if("discrete"===(n="default"===n?"continuous":n)){const r=s.vZ();return Mh[0]=r[0],Mh[1]=r[1],Mh[2]=r[2],Mh}if("continuous"===n||"step"===n){const h=e.Bst().att();if("step"===n&&0!==h){const M=1/h;t=Math.floor(t*M)/M}const o=s.YR(),a=i.YR(),l=s.vZ(),u=i.vZ(),c=("step"===n&&0!==h&&(t=vh.mr(t,o,a)),vh.normalize(t,o,a)),f=s.Qet(),d=l[0],p=l[1],m=l[2],g=u[0],y=u[1],w=u[2],S=self.uc.Cc(f),b=a-o,v=b*c;return Mh[0]=d===g?d:S(v,d,g-d,b),Mh[1]=p===y?p:S(v,p,y-p,b),Mh[2]=m===w?m:S(v,m,w-m,b),Mh}}}}{const Th=self.Os;Th.Nst.fnt=class{constructor(){}static Frt(t,s,i,e){let n;switch(e){case"behavior":n=s.Trt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Drt(t);break;case"plugin":n=s.Trt(t)}return n!==i}static Nc(t,s,i,e){if(i)return s.vZ();{let t=e.eet(),s=e.Lst();return(t=s.frt(t)).vZ()}}}}{const _h=self.Os;_h.oK=class{constructor(){this.Uht=new Map}lr(){for(const t of this.Uht.values())t.lr();this.Uht.clear(),this.Uht=null}oc(t){const s=new _h.zht(t),i=s.$c();this.Uht.set(i,s)}Qs(t){return this.Uht.get(t)}$Q(){return 0}static Jht(t,s,i,e){if(s)for(const n of s)_h.oK.qht("create",n,t,i,e)}static $ht(t,s,i,e){if(s)for(const n of s)_h.oK.qht("create-including-disabled",n,t,i,e)}static Xht(i,t,s,e){i.length?t.forEach((t,s)=>{i[s].gq(t)}):t.forEach(t=>{_h.oK.qht("load",t,i,s,e)})}static qht(t,s,i,e,n){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,n);break;case"create":case"create-including-disabled":r=new e(s,n)}else if("object"==typeof e){const h=e.prop,o=s[h],a=e.map.get(o);switch(t){case"load":r=new a(null,n);break;case"create":case"create-including-disabled":r=new a(s,n)}}switch(t){case"load":r.gq(s),i.push(r);break;case"create":if("function"==typeof r.ait&&!r.ait())return r.lr();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const Ih=self.Os;Ih.zht=class{constructor(t){this.dr="",this.Xtt=NaN,this.Kht=0,this.Yht="default",this.Zht="default",this.Qht=!1,this.tot=!1,this.sot=1,this.Sst=null,this.iot="",this.eot=!1,this.not=!0,t&&(this.dr=t[0],this.Xtt=t[1],this.Kht=t[2],this.Yht=t[3],this.Zht=t[4],this.Qht=!!t[6],this.tot=!!t[7],this.sot=t[8],this.iot=t[9],this.eot=!!t[10],this.not=!!t[11],this.Sst=new Ih.rot(t[5],this))}lr(){this.Sst.lr(),this.Sst=null}QQ(){return this.Sst||(this.Sst=new Ih.rot(null,this)),this.Sst}$c(){return this.dr}B8(t){this.dr=t}_W(){return this.Xtt}TW(t){this.Xtt=t}att(){return this.Kht}ltt(t){this.Kht=t}utt(){return this.Yht}ctt(t){this.Yht=t}pZ(){return this.Zht}ftt(t){this.Zht=t}EW(){return this.Qht}IW(t){this.Qht=t}RW(){return this.tot}PW(t){this.tot=t}B6(){return this.sot}dtt(t){this.sot=t}LY(){return this.iot}ptt(){return this.eot}mtt(){return this.not}mq(){return{trackDataJson:this.Sst.mq(),name:this.dr,totalTime:this.Xtt,step:this.Kht,interpolationMode:this.Yht,resultMode:this.Zht,loop:this.Qht,pingPong:this.tot,repeatCount:this.sot,startOnLayout:this.iot,transformWithSceneGraph:!!this.eot,useSystemTimescale:this.not}}gq(t){t&&(this.QQ().gq(t.trackDataJson),this.dr=t.name,this.Xtt=t.totalTime,this.Kht=t.step,this.Yht=t.interpolationMode,this.Zht=t.resultMode,this.Qht=t.loop,this.tot=t.pingPong,this.sot=t.repeatCount,this.iot=t.startOnLayout,this.eot=!!t.transformWithSceneGraph,this.not=!!t.useSystemTimescale)}}}{const Ch=self.Os;class Eh{constructor(t,s){this.Sst=s,this.hot=null,this.oot=null,this.bst=NaN,this.vst=NaN,this.Yht="default",this.Zht="default",this.Du=!1,this.aot=null,this.zit=null,this.rf="",this.lot=null,this.uot=0,this.cot=this.Sst.ott()._W(),this.df=0,this.dr="",t&&(t[0]&&(this.hot=t[0],this.bst=t[0][2],this.vst=t[0][1]),this.Yht=t[1],this.Zht=t[2],this.Du=!!t[3],t[6]&&(this.rf=t[6]),t[7]&&(this.lot=t[7],this.uot=t[7][0],this.cot=t[7][1]),t[8]&&(this.oot=t[8]),t[8]&&(this.oot=t[8]),t[9]&&(this.df=t[9]),t[10]&&(this.dr=t[10]),this.aot=new Ch.fot(t[4],this),this.zit=new Ch.dot(t[5],this))}lr(){this.hot=null,this.Sst=null,this.aot&&(this.aot.lr(),this.aot=null),this.zit&&(this.zit.lr(),this.zit=null),this.lot=null}QQ(){return this.Sst}Rst(){return this.aot||(this.aot=new Ch.fot(null,this)),this.aot}Lst(){return this.zit||(this.zit=new Ch.dot(null,this)),this.zit}pot(){return this.hot}Hst(){return this.vst}uit(t){this.vst=t}Vst(){return this.bst}rit(t){this.bst=t}utt(){return this.Yht}ctt(t){this.Yht=t}pZ(){return this.Zht}ftt(t){this.Zht=t}ait(){return this.Du}lit(t){this.Du=!!t}qW(){return this.rf}Ztt(){return this.uot}hit(){return this.cot}oit(t){this.cot=t}fit(){return this.oot[0]}cit(t){this.oot||(this.oot=[]),this.oot[0]=t}mit(){return this.oot||(this.oot=[]),this.oot[1]}pit(t){this.oot||(this.oot=[]),this.oot[1]=t}nG(){return this.df}$c(){return this.dr}mq(){return{keyframeDataJson:this.aot.mq(),propertyTrackDataJson:this.zit.mq(),instanceData:this.hot,additionalInstanceData:this.oot,instanceUid:this.bst,objectClassIndex:this.vst,interpolationMode:this.Yht,resultMode:this.Zht,enabled:this.Du,id:this.rf,nestedData:this.lot,type:this.df,name:this.dr}}gq(t){t&&(this.hot=t.instanceData,this.bst=t.instanceUid,this.vst=t.objectClassIndex,this.Yht=t.interpolationMode,this.Zht=t.resultMode,this.Du=t.enabled,this.rf=t.id,this.df=t.type||0,this.dr=t.name||"",this.cot=this.Sst.ott()._W(),t.nestedData&&(this.lot=t.nestedData,this.uot=this.lot[0],this.cot=this.lot[1]),t.additionalInstanceData&&(this.oot=t.additionalInstanceData),this.Rst().gq(t.keyframeDataJson),this.Lst().gq(t.propertyTrackDataJson))}}Ch.rot=class{constructor(t,s){this.wQ=s,this.mot=[],Ch.oK.Jht(this.mot,t,Eh,this)}lr(){this.wQ=null;for(const t of this.mot)t.lr();Ch.Nh(this.mot),this.mot=null}ott(){return this.wQ}sst(){const t=new Eh(null,this);return this.mot.push(t),t}got(t){return t.Rst().Pst()[0]}yot(t){const s=t.Rst().Pst();return s.at(-1)}Tit(s,t){const i=t.Rst().Pst(),e=i.length;for(let t=0;t<e;t++){const n=i[t];if(n.YR()===s)return n}}wot(s,t){const i=t.Rst().Pst(),e=i.length;for(let t=0;t<e;t++){const n=i[t];if(n.YR()>s)return n}}Sot(s,t){const i=t.Rst().Pst(),e=i.length;for(let t=0;t<e;t++){const n=i[t];if(n.YR()>=s)return n}}Git(s,t){const i=t.Rst().Pst();for(let t=i.length-1;0<=t;t--){const e=i[t];if(e.YR()<=s)return e}}*ZQ(){for(const t of this.mot)yield t}mq(){return{trackDataItemsJson:this.mot.map(t=>t.mq())}}gq(t){t&&Ch.oK.Xht(this.mot,t.trackDataItemsJson,Eh,this)}}}{const Ph=self.Os;class Rh{constructor(t,s){this.zit=s,this.bot="",this.vot=null,this.ert=null,this.df=null,this.Mot=NaN,this.xot=NaN,this.Yht="default",this.Zht="default",this.Du=!1,this.Got=null,this.Tot=!0,t&&(this.bot=t[0][0],this.vot=t[0].slice(1),this.ert=t[1],this.df=t[2],this.Mot=t[3],this.xot=t[4],this.Yht=t[5],this.Zht=t[6],this.Du=!!t[7],this.Got=new Ph._ot(t[8],this),this.Tot=t[9])}lr(){this.Got.lr(),this.Got=null,this.zit=null,this.vot=null}Lst(){return this.zit}Xit(){return this.Got||(this.Got=new Ph._ot(null,this)),this.Got}$st(){return this.bot}cet(t){this.bot=t}det(){return this.vot}met(t){this.vot=t}wet(){return this.ert}vet(t){this.ert=t}nG(){return this.df}Get(t){this.df=t}Iet(){return this.Mot}Cet(t){this.Mot=t}Eet(){return this.xot}Pet(t){this.xot=t}utt(){return this.Yht}ctt(t){this.Yht=t}pZ(){return this.Zht}ftt(t){this.Zht=t}ait(){return this.Du}lit(t){this.Du=!!t}Aet(){return!!this.Tot}mq(){return{propertyKeyframeDataJson:this.Got.mq(),sourceAdapterId:this.bot,sourceAdapterArguments:this.vot,property:this.ert,type:this.df,min:this.Mot,max:this.xot,interpolationMode:this.Yht,resultMode:this.Zht,enabled:this.Du,canHavePropertyKeyframes:this.Tot}}gq(t){t&&(this.bot=t.sourceAdapterId,this.vot=t.sourceAdapterArguments,this.ert=t.property,this.df=t.type,this.Mot=t.min,this.xot=t.max,this.Yht=t.interpolationMode,this.Zht=t.resultMode,this.Du=t.enabled,this.Tot=t.canHavePropertyKeyframes,this.Xit().gq(t.propertyKeyframeDataJson))}}Ph.dot=class{constructor(t,s){this.wst=s,this.Iot=[],Ph.oK.Jht(this.Iot,t,Rh,this)}lr(){this.wst=null;for(const t of this.Iot)t.lr();Ph.Nh(this.Iot),this.Iot=null}nit(){return this.wst}Eit(){const t=new Rh(null,this);return this.Iot.push(t),t}_et(t){const s=t.Xit();return s.$it()[0]}frt(t){const s=t.Xit(),i=s.$it();return i.at(-1)}Fet(s,t){const i=t.Xit(),e=i.$it(),n=e.length;for(let t=0;t<n;t++){const r=e[t];if(r.YR()===s)return r}}ket(s,t){const i=t.Xit(),e=i.$it(),n=e.length;for(let t=0;t<n;t++){const r=e[t];if(r.YR()>s)return r}}Let(s,t){const i=t.Xit(),e=i.$it(),n=e.length;for(let t=0;t<n;t++){const r=e[t];if(r.YR()>=s)return r}}Det(s,t){const i=t.Xit(),e=i.$it();for(let t=e.length-1;0<=t;t--){const n=e[t];if(n.YR()<=s)return n}}*kst(){for(const t of this.Iot)yield t}mq(){return{propertyTrackDataItemsJson:this.Iot.map(t=>t.mq())}}gq(t){t&&Ph.oK.Xht(this.Iot,t.propertyTrackDataItemsJson,Rh,this)}}}{const Ah=self.Os;class Fh{constructor(t,s){if(this.aot=s,this.qA=-1,this.Cot="noease",this.Eot=!1,this.HQ=null,this.Pot=null,t){this.qA=t[0],this.Cot=t[1],this.Eot=!!t[2];const i=t[3];this.HQ=i?i.split(" "):[],this.Pot=new Set(this.HQ.map(t=>t.toLowerCase())),this.Rot=null}}lr(){this.aot=null,Ah.Nh(this.HQ),this.HQ=null,this.Pot.clear(),this.Pot=null,this.Rot=null}Rst(){return this.aot}hZ(){return this.Rot}Aot(t){this.Rot=t}YR(){return this.qA}GW(t){this.qA=t,this.aot.Fot()}Qet(){return this.Cot}VW(t){this.Cot=t}ait(){return this.Eot}lit(t){this.Eot=!!t}DW(){return this.HQ}wtt(t){this.HQ=t?t.split(" "):[],this.Pot=new Set(this.HQ.map(t=>t.toLowerCase()))}Dot(){return this.Pot}pst(t){return this.Pot.has(t.toLowerCase())}mq(){return{time:this.qA,ease:this.Cot,enable:this.Eot,tags:this.HQ}}gq(t){t&&(this.qA=t.time,this.Cot=t.ease,this.Eot=t.enable,this.HQ=t.tags,this.Pot=new Set(this.HQ.map(t=>t.toLowerCase())))}}Ah.fot=class{constructor(t,s){this.wst=s,this.Est=[],Ah.oK.Jht(this.Est,t,Fh,this),this.Fot()}lr(){this.wst=null;for(const t of this.Est)t.lr();Ah.Nh(this.Est),this.Est=null}Fot(){this.Est.sort((t,s)=>t.YR()-s.YR());for(let t=0;t<this.Est.length;t++){const s=this.Est[t];s.Aot(this.Est[t+1])}}nit(){return this.wst}Oot(){return this.Est.length}Pst(){return this.Est}Iit(){const t=new Fh(null,this);return this.Est.push(t),this.Fot(),t}Rit(t){for(const s of this.Est)if(t(s)){const i=this.Est.indexOf(s);-1!==i&&(s.lr(),this.Est.splice(i,1))}this.kot(),this.Fot()}kot(){this.Est.sort((t,s)=>t.YR()-s.YR())}jit(t){return this.Est.indexOf(t)}Vit(t){return this.Est[t]}*Lot(){for(const t of this.Est)yield t}*Not(){for(let t=this.Est.length-1;0<=t;t--)yield this.Est[t]}mq(){return{keyframeDataItemsJson:this.Est.map(t=>t.mq())}}gq(t){t&&(Ah.oK.Xht(this.Est,t.keyframeDataItemsJson,Fh,this),this.Fot())}}}{const Dh=self.Os;class Oh{constructor(t,s){this.Got=s,this.Pnt=null,this.Bot=null,this.df="",this.qA=NaN,this.Cot="noease",this.Eot=!1,this.Wot=null,this.jot=void 0,this.Vot="line",t&&(this.Pnt=t[0][0],this.Bot=t[0][1],this.df=t[0][2],this.qA=t[1],this.Cot=t[2],this.Eot=!!t[3],this.Vot=t[5],this.Wot=null,t[4]&&(this.Wot=new Dh.Hot(t[4],this)),this.Rot=null,this.Uot=null)}lr(){this.Got=null,this.Wot&&(this.Wot.lr(),this.Wot=null),this.Rot=null,this.Uot=null}zot(){return this.Wot}Aot(t){this.Rot=t}hZ(){return this.Rot}Jot(t){this.Uot=t}oZ(){return this.Uot}yet(){return this.Pnt}tnt(t){"color"===this.df&&Dh.ue(t)?(this.Pnt[0]=Dh.qr(t),this.Pnt[1]=Dh.$r(t),this.Pnt[2]=Dh.Xr(t)):this.Pnt=t}drt(){return this.Bot}Ket(t){"color"===this.df&&Dh.ue(t)?(this.Bot[0]=Dh.qr(t),this.Bot[1]=Dh.$r(t),this.Bot[2]=Dh.Xr(t)):this.Bot=t}vZ(){const t=this.Got.eet().pZ();return"relative"===t?this.yet():"absolute"===t?this.drt():void 0}nG(){return this.df}Get(t){this.df=t}YR(){return this.qA}GW(t){this.qA=t,this.Got.qot()}Qet(){return this.Cot}VW(t){this.Cot=t}ait(){return this.Eot}lit(t){this.Eot=!!t}aZ(){return this.Vot}SZ(s){if(this.Wot){if(!this.jot&&null!==this.jot){const i=this.Wot.$ot();if(i){const e=i.length;for(let t=0;t<e;t++){const n=i[t];if(n.qW()===s)return this.jot=n,this.jot}}this.jot=null}return this.jot}}mq(){const t=this.Wot;return{addonDataJson:t&&t.mq(),value:this.Pnt,aValue:this.Bot,type:this.df,time:this.qA,ease:this.Cot,enable:this.Eot}}gq(t){t&&(t.addonDataJson&&this.Wot._SetFromJson(t.addonDataJson),this.Pnt=t.value,this.Bot=t.aValue,this.df=t.type,this.qA=t.time,this.Cot=t.ease,this.Eot=t.enable)}}Dh._ot=class{constructor(t,s){this.Uit=s,this.qit=[],this.Xot=[],Dh.oK.Jht(this.qit,t,Oh,this),Dh.oK.$ht(this.Xot,t,Oh,this),this.qot()}lr(){this.Uit=null;for(const t of this.qit)t.lr();Dh.Nh(this.qit),this.qit=null;for(const s of this.Xot)s.lr();Dh.Nh(this.Xot),this.Xot=null}qot(){let s=this.qit;s.sort((t,s)=>t.YR()-s.YR());for(let t=0;t<s.length;t++){const i=s[t];t+1<s.length&&i.Aot(s[t+1]),0<=t-1&&i.Jot(s[t-1])}(s=this.Xot).sort((t,s)=>t.YR()-s.YR());for(let t=0;t<s.length;t++){const e=s[t];t+1<s.length&&e.Aot(s[t+1]),0<=t-1&&e.Jot(s[t-1])}}$et(){const t=new Oh(null,this);return this.qit.push(t),this.qot(),t}Xet(t){for(const s of this.qit)if(t(s)){const i=this.qit.indexOf(s);-1!==i&&(s.lr(),this.qit.splice(i,1))}this.Kot(),this.qot()}Kot(){this.qit.sort((t,s)=>t.YR()-s.YR())}eet(){return this.Uit}Yot(){return this.qit.length}frt(){return this.qit[this.qit.length-1]}$it(){return this.qit}rZ(){return this.Xot}*Zot(){for(const t of this.qit)yield t}*Qot(){for(let t=this.qit.length-1;0<=t;t--)yield this.qit[t]}mq(){const t=this.qit,s=this.Xot;return{propertyKeyframeDataItemsJson:t.map(t=>t.mq()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.mq())}}gq(t){t&&(Dh.oK.Xht(this.qit,t.propertyKeyframeDataItemsJson,Oh,this),Dh.oK.Xht(this.Xot,t.propertyKeyframeDataItemsIncludingDisabledJson,Oh,this),this.qot())}}}{const kh=self.Os;class Lh{constructor(t,s){this.Wot=s,this.rf=t[0],this.tat=t[1]}lr(){this.Wot=null,this.tat=null}zot(){return this.Wot}qW(){return this.rf}mq(){return{id:this.rf,data:this.tat}}gq(t){t&&(this.rf=t.id,this.tat=t.data)}}class Nh extends Lh{constructor(t,s){super(t,s),this.sat=this.tat[0],this.iat=!!this.tat[1],this.eat=this.tat[2],this.nat=!!this.tat[3]}lr(){super.lr()}GZ(){return this.sat}Wht(){return this.iat}IZ(){return this.eat}jht(){return this.nat}mq(){return Object.assign(super.mq(),{startAnchor:this.sat,startEnable:!!this.iat,endAnchor:this.eat,endEnable:!!this.nat})}gq(t){t&&(super.gq(t),this.sat=t.startAnchor,this.iat=!!t.startEnable,this.eat=t.endAnchor,this.nat=!!t.endEnable)}}class Bh extends Lh{constructor(t,s){super(t,s),this.rat=this.tat[0],this.hat=this.tat[1]}lr(){super.lr()}Hht(){return this.rat}Vht(){return this.hat}mq(){return Object.assign(super.mq(),{direction:this.rat,revolutions:this.hat})}gq(t){t&&(super.gq(t),this.rat=t.direction,this.hat=t.revolutions)}}kh.Hot=class{constructor(t,s){this.oat=s,this.aat=[],kh.oK.Jht(this.aat,t,{prop:0,map:new Map([["cubic-bezier",Nh],["angle",Bh]])},this)}lr(){this.oat=null;for(const t of this.aat)t.lr();kh.Nh(this.aat),this.aat=null}lat(){return this.oat}$ot(){return this.aat}*uat(){for(const t of this.aat)yield t}mq(){return{addonDataItemsJson:this.aat.map(t=>t.mq())}}gq(t){t&&kh.oK.Xht(this.aat,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",Nh],["angle",Bh]])},this)}}}{let m=self.Os,i=0;m.bht=class extends m.jK{constructor(t,s){super("tween-"+i++,t,s),this.rf="",this.cat=!1,this.fat="start-value",this.Mst=null,this.dat=null,this.pat=null,this.Hit=null,this.mat=null}KQ(t){const s=m.hr(m.Event,"tweenstatereleased");s.gat=this,t.dispatchEvent(s)}nG(){return 1}xQ(){for(const t of this.wQ.QQ().ZQ())this.SQ.push(m.yat.qM(this,t));this.Hit=this.SQ[0]}tst(){const t=this.wQ.QQ().sst(),s=m.yat.qM(this,t);return this.SQ.push(s),this.wat(),s}wat(){this.Hit=this.SQ[0]}XW(t){return this.Hit.lst()[0]}xet(t){this.Sat=t}HW(){const t=this.iZ();if(t&&t.length){const s=t[0];if(this.Hit=s){const i=s.HW();return s.jst()?i:void 0}}}bat(t){this.pat||(this.pat=[]),this.pat.push(t)}vat(t){this.dat||(this.dat=[]),this.dat.push(t)}Mat(t){if(this.pat){const s=this.pat.indexOf(t);-1!==s&&this.pat.splice(s,1)}}xat(t){if(this.dat){const s=this.dat.indexOf(t);-1!==s&&this.dat.splice(s,1)}}Gat(t,s){for(const i of this.SQ)for(const e of i.Ast)if(e.ust()===s){const n=e.Lst(),r=e.eet(),h=n._et(r);h.tnt(t),h.Ket(t)}}Tat(t){for(const s of this.SQ)for(const i of s.Ast)if(i.ust()===t)return i}_at(t){for(const s of t){const i=this.Tat(s);this.Gat(i.Wet(),s)}if(this.ytt()){const e=this._W()-this.YR();this.TW(e);for(const n of this.SQ)n.oit(e);this.Att(0)}else{const r=this.YR();this.TW(r);for(const h of this.SQ)h.oit(r);this.Att(r)}this.Ftt()}Iat(t,s){const i=this.Tat(s),e=i.Lst(),n=i.eet(),r=e.frt(n);r.GW(this._W()),r.tnt(t),r.Ket(t)}Cat(t){this.rf=t}qW(){return this.rf}Eat(t){this.fat=t}Pat(){return this.fat}JW(t){this.cat=t}zW(){return this.cat}Mtt(){if(this.pat)for(const t of this.pat)t(this);if(!this.FY())for(const s of this.SQ)s.Oit()}xtt(){this.LQ=this.ef.Gtt()}OY(){if(!this.WQ&&(this.WQ=!0,this.dat))for(const t of this.dat)t(this)}GW(t){this.Rat(),super.GW(t)}Ntt(t){(t=m.ue(t)?t:this._W())<0?this._Q=0:t>=this._W()?this._Q=this._W():this._Q=t,this.Hit.Btt()}_Y(t){if(!this.DY()&&"current-state"===this.Pat())for(const s of this.SQ)s.Dit();super._Y(t)}vW(t=!1){if(super.vW(t),!this.FY())for(const s of this.SQ)s.Fit()}r0(t=!0,s=!1){this.Rat(),super.r0(t,s)}Rat(){for(const t of this.SQ){const s=t=>{const s=t.YR(),i=this._W();return 0!==s&&s!==i};t.Pit(s),t.Ait(s)}}GK(){if(!this.SW()){const t=this.HW();if(t&&t.TN().Cz())return!1;this.yQ.MY(this),this.Utt()}return!0}PY(n,t,s){if(this.Mst||(this.Mst=this.HW()),!this.Mst||this.Mst.qj())this.vW(!0),this.xtt();else{const i=this.Mst.ID();if(0!==(n=-1!==i?s*i:n)||0!==this.VQ){this.VQ=n;const r=this._Q+this.IQ,h=n*this.CQ,o=r+h,a=this.wQ.Xtt;o<0?(this._Q=0,this.IQ=-o):a<=o?(this._Q=a,this.IQ=this._Q-o):(this._Q=o,this.IQ=0);let t=!1,s=!1,i=this.EW(),e=this.RW();i||e?i&&!e?0<this.CQ?this._Q>=a&&(this.Ntt(0),this.Aat(m.Fat.Tween.eX.OnAnyTweenLoop),this.Aat(m.Fat.Tween.eX.OnTweensLoop),s=!0):this._Q<=0&&(this.Ntt(a),this.Aat(m.Fat.Tween.eX.OnAnyTweenLoop),this.Aat(m.Fat.Tween.eX.OnTweensLoop),s=!0):!i&&e?0<this.CQ?this._Q>=a&&(this.Att(a),this.AW(-1*this.FW()),s=!0,1===this.EQ?this.PQ<this.B6()?(this.PQ++,this.Aat(m.Fat.Tween.eX.OnAnyTweenLoop),this.Aat(m.Fat.Tween.eX.OnTweensLoop),this.Aat(m.Fat.Tween.eX.OnAnyTweenPingPong),this.Aat(m.Fat.Tween.eX.OnTweensPingPong),this.EQ=0):(this.Aat(m.Fat.Tween.eX.OnAnyTweenPingPong),this.Aat(m.Fat.Tween.eX.OnTweensPingPong),t=!0):0===this.EQ&&(this.Aat(m.Fat.Tween.eX.OnAnyTweenPingPong),this.Aat(m.Fat.Tween.eX.OnTweensPingPong),this.EQ=1)):this._Q<=0&&(this.Att(0),this.AW(-1*this.FW()),s=!0,1===this.EQ?this.PQ<this.B6()?(this.PQ++,this.Aat(m.Fat.Tween.eX.OnAnyTweenLoop),this.Aat(m.Fat.Tween.eX.OnTweensLoop),this.Aat(m.Fat.Tween.eX.OnAnyTweenPingPong),this.Aat(m.Fat.Tween.eX.OnTweensPingPong),this.EQ=0):(t=!0,this.Aat(m.Fat.Tween.eX.OnAnyTweenPingPong),this.Aat(m.Fat.Tween.eX.OnTweensPingPong)):0===this.EQ&&(this.Aat(m.Fat.Tween.eX.OnAnyTweenPingPong),this.Aat(m.Fat.Tween.eX.OnTweensPingPong),this.EQ=1)):i&&e&&(0<this.CQ?this._Q>=a&&(this.Att(a),this.AW(-1*this.FW()),s=!0,0===this.EQ&&(this.Aat(m.Fat.Tween.eX.OnAnyTweenPingPong),this.Aat(m.Fat.Tween.eX.OnTweensPingPong)),1===this.EQ&&(this.Aat(m.Fat.Tween.eX.OnAnyTweenLoop),this.Aat(m.Fat.Tween.eX.OnTweensLoop),this.Aat(m.Fat.Tween.eX.OnAnyTweenPingPong),this.Aat(m.Fat.Tween.eX.OnTweensPingPong)),this.EQ++,this.EQ=m.wrap(this.EQ,0,2)):this._Q<=0&&(this.Att(0),this.AW(-1*this.FW()),s=!0,0===this.EQ&&(this.Aat(m.Fat.Tween.eX.OnAnyTweenPingPong),this.Aat(m.Fat.Tween.eX.OnTweensPingPong)),1===this.EQ&&(this.Aat(m.Fat.Tween.eX.OnAnyTweenLoop),this.Aat(m.Fat.Tween.eX.OnTweensLoop),this.Aat(m.Fat.Tween.eX.OnAnyTweenPingPong),this.Aat(m.Fat.Tween.eX.OnTweensPingPong)),this.EQ++,this.EQ=m.wrap(this.EQ,0,2))):0<this.CQ?this._Q>=a&&(this.PQ<this.B6()?(this.PQ++,this.Ntt(0),this.Aat(m.Fat.Tween.eX.OnAnyTweenLoop),this.Aat(m.Fat.Tween.eX.OnTweensLoop),s=!0):(this.Att(a),t=!0)):this._Q<=0&&(this.PQ<this.B6()?(this.PQ++,this.Ntt(a),this.Aat(m.Fat.Tween.eX.OnAnyTweenLoop),this.Aat(m.Fat.Tween.eX.OnTweensLoop),s=!0):(this.Att(0),t=!0)),t?(this.Hit.Ktt(),this.vW(!0),this.xtt()):(this.Hit.Nc(this._Q,!0,!1,s,this.jQ,!1),this.jQ&&(this.jQ=!1))}}}Aat(t){const s=this.HW(),i=s.Dat(m.Fat.Tween);i.PushTriggerTween(this),this.ef.f4(t,s,i.G6()),i.PopTriggerTween()}mq(){const t=super.mq(),s=this.ott();return Object.assign(t,{tweenDataItemJson:s.mq(),id:this.rf,destroyInstanceOnComplete:this.cat,initialValueMode:this.fat})}gq(t){if(t){const s=this.ott();s.gq(t.tweenDataItemJson),super.gq(t),this.rf=t.id,this.cat=t.destroyInstanceOnComplete,this.fat=t.initialValueMode,this.wat()}}static IsPlaying(t){return t.IsPlaying()}static LW(t){return t.LW()}static Oat(t){return!!t.RW()&&0===t.gtt()}static kat(t){return!!t.RW()&&1===t.gtt()}static Lat(t){const s=t.runtime.stt(),i=new m.zht;if(t.json){i.gq(t.json.tweenDataItemJson);const e=new m.bht(i,s);return e.gq(t.json),e}{const n=new m.bht(i,s),r=(m.ke(t.Nat)||(t.Nat=[t.Nat]),n.Cat(t.id),n.wtt(t.tags),n.Eat(t.initialValueMode),n.JW(t.releaseOnComplete),n.IW(t.loop),n.PW(t.pingPong),n.TW(t.time),n.ltt(0),n.ctt("default"),n.ftt(t.Nat[0].resultMode),n.dtt(t.repeatCount),n.tst()),h=(r.rit(t.T6.BN()),r.ctt("default"),r.ftt(t.Nat[0].resultMode),r.lit(!0),r.uit(t.T6.TN().wF()),t.T6.p6()),o=h.dit()?h.fit():t.T6.wO().nm(),a=h.dit()?h.mit():t.T6.wO().gm(),l=(r.cit(o),r.pit(a),r._it()),u=(l.GW(0),l.VW("noease"),l.lit(!0),l.wtt(""),r._it());u.GW(t.time),u.VW("noease"),u.lit(!0),u.wtt("");for(const c of t.Nat){const f=r.Cit(),d=(f.cet(c.sourceId),f.pet(c.sourceArgs),f.bet(c.property),f.xet(c.type),f.Cet(NaN),f.Pet(NaN),f.ctt("default"),f.ftt(c.resultMode),f.lit(!0),f.qet()),p=(d.Get(c.valueType),d.GW(0),d.VW(c.ease),d.lit(!0),d.tnt(c.startValue),d.Ket(c.startValue),f.qet());p.Get(c.valueType),p.GW(t.time),p.VW(c.ease),p.lit(!0),p.tnt(c.endValue),p.Ket(c.endValue),f.ett()}return n}}static rit(t,s){if(!isNaN(s))for(const i of t.iZ())i.rit(s)}Bat(t,s){return this.mat||(this.mat=m.hr(self.WW,this,t,s)),this.mat}}}{const Wh=self.Os;Wh.yat=class extends Wh.ttt{constructor(t,s){super(t,s),this.Wat=null,this.jat=null}static qM(t,s){return Wh.hr(Wh.yat,t,s)}Vat(){1===this.Ast.length?this.Wat=this.Ast[0]:(this.Wat=this.Ast[0],this.jat=this.Ast[1])}Fst(){for(const t of this.wst.Lst().kst())this.Ast.push(Wh.Hat.qM(this,t));this.Vat()}Cit(){const t=this.wst.Lst(),s=t.Eit(),i=Wh.Hat.qM(this,s);return this.Ast.push(i),this.Vat(),i}_Y(){if(this.Wst(),this.jst()||!this.htt()){const t=this.Bst(),s=t.ytt(),i=s?0:this.hit();for(const n of this.Ast)n._Y(i),0===this.Dst&&1===n.wit()&&(this.Dst=1),0===this.LK&&1===n.IY()&&(this.LK=1);this.Ost=0;const e=this.Ast.some(t=>t.$tt());e&&(this.Ost=1),this.Cst=this.Sit(i),this.Tst=!1,this._st=!1,this.Nc(i)}}Ytt(){}Nc(t,s=0,i=!1,e=!1,n,r=!1,h=!1){if(this.Mst||this.HW(),this.Mst){const o=!this.Mst.qj();return o&&(!r||!this.TN().Cz())&&((this.jat?(this.Wat.Nc(t,i,e,h),this.jat):this.Wat).Nc(t,i,e,h),void(0!==this.Wat.wit()&&(this.xst||(this.xst=this.Mst.wO()),this.xst)&&this.xst.U4()))}}Qtt(){}gq(t){super.gq(t),this.Vat()}}}{const jh=self.Os;jh.Hat=class extends jh.Nst{constructor(t,s){super(t,s),this.Uat=!1}static qM(t,s){return jh.hr(jh.Hat,t,s)}Nc(t,s=!1,i=!1,e=!1){let n,r;if(this.Uat)n=this.qit[0],r=this.qit[1];else{if(s)n=this.zit.Det(t,this.Uit);else{if(this.Kit){const h=this.Bst(),o=this.Kit.hZ(),a=this.Kit.YR(),l=o?o.YR():h._W();(t<=a||l<=t)&&(this.Kit=this.zit.Det(t,this.Uit))}else this.Kit=this.zit.Det(t,this.Uit);n=this.Kit}r=n.hZ()}this.Jit.Nc(t,n,r,s,i,e)}qet(){const t=this.Uit.Xit(),s=t.$et();return this.Kit=null,this.Uat=this.Ret().length<=2,s}Ait(t){this.Kit=null;const s=this.Uit.Xit();s.Xet(t),this.Uat=this.Ret().length<=2}mq(){return{sourceAdapterJson:this.ett().mq(),basic:this.Uat}}gq(t){t&&(this.ett().gq(t.sourceAdapterJson),this.Uat=t.basic)}}}{const Vh=self.Os,Hh=self.uc;Vh.Bc=class extends Vh.nr{constructor(t,s=!0){super(),this.dr=t[0],this.zat=t[2],this.Jat=[];for(const i of t[1]){const e=Vh.qat.qM(this,i);this.Jat.push(e)}for(let t=0;t<this.Jat.length;t++){const n=this.Jat[t],r=this.Jat[t+1],h=this.Jat[t-1];n.Aot(r),n.Jot(h)}this.$at=new Map,this.Xat=new Map,this.Kat(),s&&Hh.jc(this.dr,(t,s,i,e)=>this.Nc(t,s,i,e),null,{transition:this})}static qM(t){return Vh.hr(Vh.Bc,t)}lr(){for(const t of this.Jat)t.lr();Vh.Nh(this.Jat),this.Jat=null,this.$at.clear(),this.$at=null,this.Xat.clear(),this.Xat=null}Wc(t){this.zat=!!t}Yat(t){const s=this.Xat.get(t);if(s)return s;for(const i of this.Jat)if(i.Zat()===t)return this.Xat.set(t,i),i}Qat(s){for(let t=this.Jat.length-1;0<=t;t--){const i=this.Jat[t],e=i.Zat();if(e<=s){let t=i;if(e<s)return t;if(e===s){for(;t;){const n=t.oZ();if(!n)break;if(n.Zat()!==t.Zat())break;t=n}return t}}}}Nc(t,s,i,e){let n=t/e;if(this.zat){const w=this.Yat(0),S=this.Yat(1),b=s+(s+i)*w.tlt(),v=(s+i)*S.tlt(),M=v-b;return 0===e?b+M:Hh.Hc(t,b,M,e)}0===e&&(n=1);let r=this.Qat(n),h=r.hZ();if(!h){const x=r.oZ(),G=r;r=x,h=G}const o=h.Zat()-r.Zat(),a=Vh.pr(n,r.Zat(),h.Zat(),0,o);if(r.slt()||0==o){const T=s+(s+i)*r.tlt(),_=(s+i)*h.tlt(),I=_-T;return 0==o?1===a?T+I:T:Hh.Hc(a,T,I,o)}let l=r.Zat(),u=r.tlt(),c=r.Zat()+r.ilt(),f=r.tlt()+r.elt(),d=h.Zat()+h.nlt(),p=h.tlt()+h.rlt(),m=h.Zat(),g=h.tlt(),y=Hh.Cc("spline")(a,l,u,c,f,d,p,m,g,this.$at.get(r));return(1-(y+=r.tlt()))*s+y*(s+i)}Kat(){this.$at.clear();for(let t=0;t<this.Jat.length-1;t++){const s=this.Jat[t];if(s.Wht()){const i=s,e=this.Jat[t+1];if(e.jht()){const n=i.Zat(),r=i.Zat()+i.ilt(),h=e.Zat()+e.nlt(),o=e.Zat();this.$at.set(i,Hh.Uc(n,r,h,o))}}}}}}{const Uh=self.Os;Uh.qat=class extends Uh.nr{constructor(t,s){super(),this.hlt=t,this.olt=s[0],this.llt=s[1],this.ult=s[2],this.clt=s[3],this.flt=s[4],this.dlt=s[5],this.iat=s[6],this.nat=s[7],this.plt=s[8],this.Rot=null,this.Uot=null}lr(){this.hlt=null}static qM(t,s){return Uh.hr(Uh.qat,t,s)}Aot(t){this.Rot=t}hZ(){return this.Rot}Jot(t){this.Uot=t}oZ(){return this.Uot}Zat(){return this.olt}tlt(){return this.llt}ilt(){return this.ult}elt(){return this.clt}nlt(){return this.flt}rlt(){return this.dlt}Wht(){return this.iat}jht(){return this.nat}slt(){return"linear"===this.plt}mlt(){return"cubic"===this.plt}}}{const zh=self.Os;zh.glt=class extends zh.nr{constructor(t){super(),this.ef=t,this.ylt=[]}lr(){for(const t of this.ylt)t.lr();zh.Nh(this.ylt),this.ylt=null}qM(t){this.ylt.push(zh.Bc.qM(t))}}}{const Jh=self.Os;Jh.wlt=class extends Jh.nr{constructor(t){super(),this.ef=t,this.Slt=null,this.blt=null,this.IK=t=>this.CK(t.T6)}lr(){if(this.NK(),this.Slt){for(const t of this.Slt.values())t.clear();this.Slt.clear()}this.Slt=null,this.ef=null}qM(t){if(this.Slt||(this.Slt=new Map),t){const s=t[0][16],i=s[0],e=t[1],n=(this.Slt.has(e)||this.Slt.set(e,new Map),this.Slt.get(e));n.set(i,t)}}BK(){const t=this.ef.Nf();t&&t.addEventListener("instancedestroy",this.IK)}NK(){const t=this.ef.Nf();t&&t.removeEventListener("instancedestroy",this.IK)}vlt(){return!!this.Slt&&0!==this.Slt.size}Mlt(t,s){let i;if(i=t instanceof Jh.xlt?t.wF():t,this.Slt.has(i)){const e=this.Slt.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}}Glt(t,s){this.blt||(this.blt=new WeakMap),this.blt.has(t)||this.blt.set(t,s)}Tlt(t){if(!this.blt)return"";const s=this.blt.get(t);return s||""}CK(t){this.blt&&this.blt.has(t)&&this.blt.delete(t)}}}{const qh=self.Os;qh._lt=class{constructor(t){this.ef=t,this.Ilt=new qh.Clt}lr(){this.Ilt.lr(),this.Ilt=null,this.ef=null}NO(){return this.ef}qM(t){this.Ilt.oc(t)}Elt(t){return this.Ilt.Qs(t)}Plt(){return this.Ilt.Plt()}}}{const M=self.Os;M.Rlt=class{constructor(t,s,i,e,n,r,h){this.ef=n.NO(),this.Alt=n,this.Flt=t,this.Dlt=i,this.Olt=e,this.Ug=s,this.aK=r,this.klt=h??r.HW().BN(),this.Llt(),this.Nlt=this.Wlt?.Blt()??-1,this.jlt=[],this.Vlt=null,this.Hlt=NaN,this.Ult=null,this.zlt=null,this.Jlt=null,this.qlt="",this.$lt=null,this.Xlt="",this.Klt="",this.Ylt=0,this.Zlt=!1,this.OQ=!1}lr(){this.OQ||(M.Nh(this.jlt),this.jlt=null,this.ef=null,this.Alt=null,this.Olt=null,this.aK=null,this.Vlt=null,this.Hlt=NaN,this.Ult&&this.Ult.clear(),this.Ult=null,this.zlt=null,this.Jlt=null,this.qlt="",this.$lt=null,this.Xlt="",this.Klt="",this.OQ=!0)}ur(){return this.OQ}Qlt(){return this.Alt}NO(){return this.ef}$c(){return this.Flt}tut(){return this.Olt}wW(){return this.Ug}ZK(){return this.aK||(this.aK=this.ef.dO(this.klt).p6()),this.aK}sut(){return this.iut(this.Nlt)}eut(){const t=this.sut();return t?t.wW():""}nut(){const t=this.sut();return t?t.DW():[]}rut(t){const s=this.nut();if(!s)return!1;if(!s.length)return!1;const i=M.Rlt.Stt(t);return!(!i||!i.length)&&i.every(M.Rlt.vtt,s)}hut(t,s){const i=this.nut();if(!i)return!1;if(!i.length)return!1;const e=M.Rlt.Stt(t);return!(!e||!e.length)&&e.every(t=>M.Rlt.out.call(i,t,s))}static vtt(t){return""===t?1===this.length&&""===this[0]:this.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static Stt(t){return t.trim().split(" ")}static out(s,i){return""===s?1===this.length&&""===this[0]:this.some(t=>M.compare(t.trim(),i,s.trim()))}aut(t){const s=this.sut();if(s){if(M.ue(t)){const i=s.lut(),e=i?i[t]:void 0;if(M.ue(e))return this.iut(e)}if("string"==typeof t)for(const n of s.lut()){const r=this.iut(n);if(r.xW(t))return this.iut(r.Blt())}}}uut(t){const s=this.aut(t);return s?s.wW():""}cut(t){const s=this.aut(t);return s?s.DW():""}fut(t){const s=this.sut();if(!s)return-1;const i=s.lut();if(!i)return-1;const e=this.aut(t);return e?i.indexOf(e.Blt()):-1}dut(){const t=this.sut();if(!t)return 0;const s=t.lut();return s?s.length:0}iut(t){return this.Olt.iut(t)}r0(){const t=this.mut();t.gut(!0)}gut(t){if(this.yut()){for(const[s,i]of this.yut().entries())i.gut(!1);this.yut().clear()}if(this.Ult=null,this.Vlt=null,this.wut=null,this.zlt=null,this.qlt="",this.$lt=null,this.Xlt="",this.Klt="",this.jlt=[],t){this.Alt.Sut(this);const e=this.Wlt.Blt();e!==this.Nlt&&this.but(e)}else this.Nlt=this.Wlt.Blt()}vut(){const t=this.Olt.iut(this.Nlt);return t?t.xut().Mut():0}Gut(t){const s=this.Tut(t);return s?s.$c():""}_ut(t){let s;return M.ue(t)&&(s=this.Tut(t)),"string"==typeof t&&(s=this.Iut(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.yet():""}Cut(t){let s;if(M.ue(t)&&(s=this.Tut(t)),s="string"==typeof t?this.Iut(t):s){const i=s.Eut();M.ue(i)&&(this.jlt.push(this.Nlt),this.but(i))}}Put(t){const s=this.Olt.Rut(t);if(s){const i=this.Olt.iut(s.Blt());i&&(this.jlt.push(this.Nlt),this.but(i.Blt()))}}Aut(){const t=this.jlt.pop();M.ue(t)?this.but(t):this.Fut()&&(this.Alt.Sut(this.Fut(),!0,!1,!1),this.Fut().but(this.Dut()),this.mut().Out(this.Fut()))}kut(t){const s=this.sut();if(s){s.Blt();const i=this.aut(t);i&&(this.jlt.push(this.Nlt),this.but(i.Blt()))}}Lut(s){if(M.ue(s)){const t=this.Olt.iut(this.Nlt),i=t.xut().Nut();return!!i[s]}if("string"==typeof s){const e=this.Olt.iut(this.Nlt),n=e.xut().Nut();for(let t=0;t<n.length;t++)if(n[t].$c()===s)return!0}return!1}But(){this.Zlt=!0}Wut(){return 0<this.Ylt}jut(){this.Ylt++}Vut(){this.Ylt--,0===this.Ylt&&this.Zlt&&this.Alt.Hut(this)}but(t){const i=this.Nlt,s=this.ZK().HW();if(this.jut(),this.Alt.Uut(this),this.ef.f4(M.rX.Flowchart.eX.OnBeforeAnyNodeChange,s),this.ef.f4(M.rX.Flowchart.eX.OnBeforeTaggedNodeChange,s),this.ef.f4(M.rX.Flowchart.eX.OnBeforeAnyNodeChangeInFlowchart,s),this.ef.f4(M.rX.Flowchart.eX.OnBeforeTaggedNodeChangeInFlowchart,s),this.Nlt=t,this.ef.f4(M.rX.Flowchart.eX.OnAnyNodeChange,s),this.ef.f4(M.rX.Flowchart.eX.OnTaggedNodeChange,s),this.ef.f4(M.rX.Flowchart.eX.OnAnyNodeChangeInFlowchart,s),this.ef.f4(M.rX.Flowchart.eX.OnTaggedNodeChangeInFlowchart,s),this.Alt.zut(),this.Vut(),!this.ur()){const e=this.iut(this.Nlt);if("reference"===e.nG()){const n=e.Jut();if(this.qut(e)){this.jlt.pop();const r=this.$ut(e),h=(this.Alt.Sut(r,!0,!0,!1),r.Xut(this,i),this.mut());h.Out(r)}else{const o=e.Kut();if(n){this.jlt.pop();let s=e.Yut();if(s){let t=this.Alt.Zut(s);for(;t;)s=M.U1(s),t=this.Alt.Zut(s)}else{s=n+"-ref";let t=this.Alt.Zut(s);for(;t;)s=M.U1(s),t=this.Alt.Zut(s)}const a=this.Alt.Qut(n,o,s,this.aK,!0),l=(a.Xut(this,i),this.tct(e,a),this.mut());a.sct(l),l.Out(a)}}}}}Tut(t){const s=this.Olt.iut(this.Nlt);if(!s)return null;const i=s.xut().Nut();if(!i)return null;const e=i[t];return e||null}Iut(t){const s=this.Olt.iut(this.Nlt);if(!s)return null;const i=s.xut().ict(t);return i||null}Llt(s){if("number"==typeof s){let t=this.iut(s);t=t||this.Olt.ect(),this.Wlt=t}else{let t=this.Olt.Rut(this.Dlt);t=t||this.Olt.ect(),this.Wlt=t}}mq(){return this.Zlt?null:{flowchartName:this.Flt,flowchartTag:this.Ug,startNodeTag:this.Dlt,currentNodeId:this.Nlt,previousNodeIds:this.jlt,pluginUID:this.aK.HW().BN(),reference:{previousFlowchartTag:this.Fut()?this.Fut().wW():"",previousStartNodeId:M.ue(this.Dut())?this.Dut():NaN,referencesJson:this.nct(),currentReferenceFlowchartTag:this.rct()?this.rct().wW():"",rootFlowchartTag:this.mut()?this.mut().wW():""}}}nct(){if(!this.hct())return null;const t=[];for(const[s,i]of this.yut().entries())t.push({flowchartElementId:s.Blt(),flowchartStateTag:i.wW()});return t.length?t:null}gq(t){if(t){if(this.Flt=t.flowchartName,this.Ug=t.flowchartTag,this.Dlt=t.startNodeTag,this.Nlt=t.currentNodeId,this.jlt=t.previousNodeIds,this.klt=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.qlt=s.previousFlowchartTag,this.Hlt=s.previousStartNodeId,this.$lt=s.referencesJson,this.Xlt=s.currentReferenceFlowchartTag,this.Klt=s.rootFlowchartTag}this.Llt()}}Fut(){return"string"==typeof this.qlt&&this.qlt&&(this.Vlt=this.Alt.Zut(this.qlt),this.qlt=""),this.Vlt}Dut(){return this.Hlt}Xut(t,s){this.Vlt=t,this.Hlt=s}rct(){return"string"==typeof this.Xlt&&this.Xlt&&(this.zlt=this.Alt.Zut(this.Xlt),this.Xlt=""),this.zlt}Out(t){this.zlt=t,this.zlt===this&&(this.zlt=null)}mut(){return"string"==typeof this.Klt&&this.Klt&&(this.Jlt=this.Alt.Zut(this.Klt),this.Klt=""),this.Jlt||this}sct(t){this.Jlt=t}hct(){return this.oct(),!!this.Ult}qut(t){return this.oct(),this.Ult&&this.Ult.has(t)}oct(){if(this.$lt){this.Ult&&this.Ult.clear(),this.Ult||(this.Ult=new Map);for(const t of this.$lt){const s=this.Alt.Zut(t.flowchartStateTag),i=s.iut(t.flowchartElementId);this.Ult.set(i,s)}this.$lt=null}}yut(){return this.oct(),this.Ult}$ut(t){return this.oct(),this.Ult.get(t)}tct(t,s){this.Ult||(this.Ult=new Map),this.Ult.set(t,s)}}}{const $h=self.Os;$h.lct=class{constructor(t){this.ef=t,this.uct=new Map,this.cct=null,this.fct=[],this.dct=()=>this.AK(),this.pct=null}lr(){$h.Nh(this.fct),this.fct=null,this.uct.clear(),this.uct=null,this.cct=null,this.ef=null,this.pct=null}NO(){return this.ef}Qut(t,s,i,e,n,r){const h=this.ef.Qlt().Elt(t);if(h){if(!this.uct.has(i)){const o=new $h.Rlt(t,i,s,h,this,e,r);return this.uct.set(i,o),n&&this.Sut(o,!0),o}{const a=this.uct.get(i);a&&this.Hut(a)}}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}Hut(t){if(t.But(),!t.Wut()){const s=t.wW();this.uct.delete(s),t.lr(),this.cct===t&&(this.cct=null)}}mct(t){t.r0()}Zut(t){return this.uct.get(t)}Uut(t){this.fct.push(t)}zut(){this.fct.pop()}Sut(t,s=!1,i=!1,e=!0){if(e){const n=t.rct();t=n||t}t!==this.cct&&(this.gct(),this.yct(t,s,i))}wct(t){return"string"==typeof t?this.Zut(t):this.fct.length?this.fct[this.fct.length-1]:this.cct}gct(){if(this.cct&&!this.cct.ur()){const t=this.cct.ZK().HW();this.cct.jut(),this.Uut(this.cct),this.ef.f4($h.rX.Flowchart.eX.OnBeforeFlowchartChange,t),this.zut(),this.cct.Vut()}}yct(t,s=!1,i=!1){if(this.cct=t,this.cct&&!this.cct.ur()){const e=this.cct.ZK().HW();this.cct.jut(),this.Uut(this.cct),this.ef.f4($h.rX.Flowchart.eX.OnFlowchartChange,e),!0!==i&&"number"!=typeof i||this.cct.Llt(i),s&&(this.ef.f4($h.rX.Flowchart.eX.OnAnyNodeChange,e),this.ef.f4($h.rX.Flowchart.eX.OnTaggedNodeChange,e)),this.zut(),this.cct.Vut()}}mq(){return{flowchartJsonObjects:[...this.uct.values()].map(t=>t.mq()),currentFlowchartTag:this.cct?this.cct.wW():null}}gq(t){if(t){this.pct=t;const s=new Map;for(const i of this.pct.flowchartJsonObjects){const e=i.flowchartTag;if(this.uct.has(e)){const n=this.uct.get(e);n.gq(i),s.set(e,n)}else{const r=this.Qut(i.flowchartName,i.startNodeTag,i.flowchartTag,null,!1,i.pluginUID);r.gq(i),s.set(i.flowchartTag,r)}}for(const[h,o]of this.uct.entries())s.has(h)||o.lr();this.uct.clear(),this.uct=s,this.ef.$$()?this.ef.Nf().addEventListener("afterload",this.dct):this.AK()}}AK(){this.ef.Nf().removeEventListener("afterload",this.dct);const t=this.uct.get(this.pct.currentFlowchartTag);t&&this.Sut(t,!0),this.pct=null}}}{const Xh=self.Os;Xh.Clt=class{constructor(){this.Sct=new Map}lr(){for(const t of this.Sct.values())t.lr();this.Sct.clear(),this.Sct=null}oc(t){const s=new Xh.bct(t),i=s.$c();this.Sct.set(i,s)}Qs(t){return this.Sct.get(t)}Plt(){return!!this.Sct.size}static vct(t,s,i,e){if(s)for(const n of s){const r=new i(n,e);t.push(r)}}}}{const Kh=self.Os;Kh.bct=class{constructor(t){this.dr=t[0],this.Mct=new Kh.xct(t[1],this)}lr(){this.Mct.lr(),this.Mct=null}Gct(){return this.Mct}iut(t){return this.Mct.iut(t)}Rut(t){return this.Mct.Rut(t)}ect(){return this.Mct.ect()}$c(){return this.dr}}}{const Yh=self.Os;class Zh{constructor(t,s){this.Mct=s,this.df=t[7],this.Tct=t[0],this.Ug=t[1],this.Ug?this.HQ=this.Ug.trim().split(" ").map(t=>t.trim()):this.HQ=[],this._ct=t[2],this.Ict=null,this.Cct=null,"dictionary"===this.df&&(this.Ict=t[3],this.Cct=t[4]),this.Ect=t[6],this.Pct=null,this.Rct=null,this.Act=null,"reference"===this.df&&(this.Pct=t[8],this.Rct=t[9],this.Act=t[10]),this.Fct=new Yh.Dct(t[5],this)}lr(){this.Mct=null}Gct(){return this.Mct}xut(){return this.Fct}Blt(){return this.Tct}wW(){return this.Ug}DW(){return this.HQ}xW(t){if(!this.HQ)return!1;if(!this.HQ.length)return!1;const s=Yh.Rlt.Stt(t);return!(!s||!s.length)&&s.every(Yh.Rlt.vtt,this.HQ)}Oct(){return this.Ect}kct(t){this.Ect=!!t}Lct(){if("dictionary"===this.df)return!0;if("reference"===this.df)return!1;throw new Error("unexpected flowchart node type: "+this.df)}lut(){return this._ct}Nct(){return this.Ict}Bct(){return this.Cct}nG(){return this.df}Jut(){return this.Pct}Kut(){return this.Rct}Yut(){return this.Act}}Yh.xct=class{constructor(t,s){this.Olt=s,this.Wct=[],this.jct=new Map,this.Vct=new Map,this.Hct=null,Yh.Clt.vct(this.Wct,t,Zh,this);for(const i of this.Wct){const e=i.Blt(),n=i.wW(),r=i.DW(),h=i.Oct();if(this.jct.set(e,i),n)for(const a of r)this.Vct.has(a)||this.Vct.set(a,new Set),this.Vct.get(a).add(i);h&&(this.Hct=i);const o=i.xut();for(const l of o.Uct()){const u=l.Blt();this.jct.set(u,l)}}this.Hct||this.zct()}lr(){this.Olt=null;for(const t of this.Wct)t.lr();Yh.Nh(this.Wct),this.Wct=null}tut(){return this.Olt}iut(t){return this.jct.get(t)}Rut(t){if(!t||!t.length)return null;const i=[];for(const e of t.trim().split(" ")){let t=this.Vct.get(e.trim())??new Set;if(0===t.size)return null;i.push(t)}const s=i.reduce((t,s)=>s.size<t.size?s:t);return[...s].filter(s=>i.every(t=>t.has(s)))[0]}ect(){return this.Hct}*Jct(){for(const t of this.Wct)yield t}zct(){let t=0;for(const s of this.Jct())s.Oct()&&t++;if(0===t){for(const i of this.Jct())if(i.Lct()&&!i.Oct())return void i.kct(!0)}else{if(1===t)return;if(1<t){let t=!0;for(const e of this.Jct())e.Lct()&&(e.Oct()&&t?t=!1:e.Oct()&&!t&&e.kct(!1))}}for(const n of this.Jct())if(n.Lct()&&n.Oct())return void(this.Hct=n)}}}{const Qh=self.Os;class to{constructor(t,s){this.Fct=s,this.Tct=t[0],this.dr=t[1],this.Pnt=t[2],this.qct=t[3]}lr(){this.Fct=null}xut(){return this.Fct}Blt(){return this.Tct}$c(){return this.dr}yet(){return this.Pnt}Eut(){return this.qct}}Qh.Dct=class{constructor(t,s){this.$ct=s,this.Xct=[],this.Kct=new Map,Qh.Clt.vct(this.Xct,t,to,this);for(const i of this.Xct)this.Kct.set(i.$c(),i)}lr(){this.$ct=null;for(const t of this.Xct)t.lr();Qh.Nh(this.Xct),this.Xct=null}Yct(){return this.$ct}Mut(){return this.Xct.length}Nut(){return this.Xct}ict(t){return this.Kct.get(t)}*Uct(){for(const t of this.Xct)yield t}}}{const so=self.Os;so.Zct=class extends so.nr{constructor(t){super(),this.Qct=t,this.tft=[],this.tft.push(so.hr(so.ift,this)),this.Hg=0,this.eft=this.tft[0]}lr(){for(const t of this.tft)t.lr();so.Nh(this.tft),this.eft=null,this.Qct=null}TN(){return this.Qct}RL(){return this.eft}nft(){return this.tft[this.Hg-1]}Yu(){this.RL().Yu()}rft(){const t=this.tft,s=++this.Hg;if(s===t.length){const i=so.hr(so.ift,this);t.push(i),this.eft=i}else{const e=t[s];e.r0(),this.eft=e}}hft(){const t=this.tft,s=++this.Hg,i=(s===t.length&&t.push(so.hr(so.ift,this)),t[s]);i.G0(t[s-1]),this.eft=i}X8(){this.eft=this.tft[--this.Hg]}oft(i){const e=this.tft;for(let t=0,s=e.length;t<s;++t)e[t].oft(i)}}}{const io=self.Os;io.ift=class extends io.nr{constructor(t){super(),this.tft=t,this.Qct=this.tft.TN(),this.aft=this.Qct.NO().uD(),this.lft=!0,this.N7=[],this.uft=[]}lr(){this.cft(),this.tft=null,this.Qct=null,this.aft=null}cft(){io.Nh(this.N7),io.Nh(this.uft)}TN(){return this.Qct}fft(){return this.lft}dft(){return this.lft?!!this.Qct.FL():!!this.N7.length}PL(){return this.lft?this.Qct.PL():this.N7}pft(){return!!this.uft.length}mft(){return this.uft}gft(){const t=this.PL();return t.length?t:this.uft}r0(){this.lft=!0,io.Nh(this.uft)}Yu(){this.lft=!0}G0(t){t.fft()?this.r0():(this.lft=!1,io.Vh(this.N7,t.N7),io.Nh(this.uft))}yft(t){this.N7.push(t)}wft(t){this.uft.push(t)}Sft(t){this.lft=!!t}bft(){return this.N7}vft(){return this.uft}Mft(t){this.lft=!1,io.Nh(this.N7),this.N7.push(t)}xft(t){this.lft=!1,io.Vh(this.N7,t)}Gft(t){this.lft=!1,io.Nh(this.N7);for(const s of t)this.N7.push(s)}Tft(t,s){for(const i of s)t.has(i)||this.uft.push(i)}_ft(t){for(const s of t)this.N7.push(s);io.qh(this.uft,t)}Ift(){io.Nh(this.uft)}Cft(t){if(t)if(this.aft.k8().eD().Eft()){this.fft()&&(io.Nh(this.N7),io.Vh(this.uft,t.TN().PL()),this.lft=!1);const s=this.uft.indexOf(t);-1!==s&&(this.N7.push(this.uft[s]),this.uft.splice(s,1))}else this.Mft(t)}oft(t){io.qh(this.N7,t),io.qh(this.uft,t)}}}{const eo=self.Os;eo.Pft=class extends eo.nr{constructor(t){super(),this.Rft=t,this.ef=this.Rft.NO(),this.tft=[],this.tft.push(eo.hr(eo.Aft,this,null)),this.Hg=0,this.Fft=[]}lr(){for(const t of this.tft)t.lr();eo.Nh(this.tft),eo.Nh(this.Fft),this.Rft=null,this.ef=null}YF(){return this.Rft}NO(){return this.ef}k8(){return this.tft[this.Hg]}Dft(){return this.tft}Oft(){return this.Hg}L8(t){const s=this.tft,i=++this.Hg;if(i===s.length){const e=eo.hr(eo.Aft,this,t);return s.push(e),e}{const n=s[i];return n.r0(t),n}}X8(){--this.Hg}kft(t){this.Fft.push(t)}Lft(){this.Fft.pop()}lD(){const t=this.Fft;return 0===t.length?null:t.at(-1)}}}{const no=self.Os;no.Aft=class extends no.nr{constructor(t,s){super(),this.tft=t,this.ef=this.tft.NO(),this.Nft=s,this.Bft=0,this.Wft=0,this.jft=!1,this.Vft=!1,this.Hft=null,this.Uft=0,this.zft=0,this.Jft=null}lr(){this.r0(null),this.tft=null,this.ef=null}r0(t){this.Nft=t,this.Bft=0,this.Wft=0,this.jft=!1,this.Vft=!1,this.Jft=null}qft(t,s){this.Nft=t,this.Bft=0,this.Wft=s}$ft(){this.Bft=0,this.Wft=0}eD(){return this.Nft}Xft(t){this.Nft=t}Kft(){return this.Bft}Yft(t){this.Bft=t}Zft(){return this.Wft}Qft(t){this.Wft=t}t0t(t){this.jft=!!t}s0t(){return this.jft}i0t(t){this.Vft=!!t}e0t(){return this.Vft}n0t(t){this.Hft=t}r0t(){return this.Hft}h0t(t,s){this.Uft=t,this.zft=s}cD(){return this.Uft}fD(t){this.zft=t}o0t(){return this.zft}a0t(){const t=this.Nft;return!!t.l0t()||this.Bft<t.u0t()-1&&!!t.O8().length}c0t(t){this.Jft=t}f0t(){return this.Jft}}}{const ro=self.Os;ro.d0t=class extends ro.nr{constructor(t){super(),this.Rft=t,this.ef=this.Rft.NO(),this.tft=[],this.Hg=-1,this.eft=null,this.p0t=[]}lr(){ro.Nh(this.tft),this.Rft=null,this.ef=null}m0t(t){this.p0t=t;const s=this.p0t.slice(0);this.tft.push(s),this.Hg=0,this.eft=s}YF(){return this.Rft}NO(){return this.ef}g0t(){return this.eft}L8(){const t=++this.Hg,s=this.tft;t===s.length?s.push(this.p0t.slice(0)):ro.Vh(s[t],this.p0t),this.eft=s[t]}X8(){this.eft=this.tft[--this.Hg]}}}{const ho=self.Os;ho.y0t=class extends ho.nr{constructor(t){super(),this.Rft=t,this.ef=this.Rft.NO(),this.tft=[],this.Hg=-1}lr(){ho.Nh(this.tft),this.Rft=null,this.ef=null}YF(){return this.Rft}NO(){return this.ef}w0t(){return 0<=this.Hg}g0t(){return this.tft[this.Hg]}L8(){if(++this.Hg,this.Hg===this.tft.length){const t=ho.hr(ho.S0t,this);return this.tft.push(t),t}{const s=this.tft[this.Hg];return s.r0(),s}}X8(){--this.Hg}b0t(s){const i=this.tft;for(let t=this.Hg;0<=t;--t){const e=i[t];if(e.$c()===s)return e}return null}v0t(){return this.tft.slice(0,this.Hg+1)}}}{const oo=self.Os;oo.S0t=class extends oo.nr{constructor(t){super(),this.M0t=t,this.dr="",this.Hg=0,this.x0t=!1,this.G0t=NaN}r0(){this.dr="",this.Hg=0,this.x0t=!1,this.G0t=NaN}B8(t){this.dr=t}$c(){return this.dr}z8(t){this.Hg=t}wF(){return this.Hg}vW(){this.x0t=!0}q8(){return this.x0t}T0t(t){this.G0t=t}_0t(){return this.G0t}}}{const ao=self.Os;ao.I0t=class extends ao.nr{constructor(){super(),this.tft=[],this.Hg=-1}lr(){ao.Nh(this.tft)}g0t(){return this.tft[this.Hg]}L8(){if(++this.Hg,this.Hg!==this.tft.length)return this.tft[this.Hg];{const t=[];return this.tft.push(t),t}}X8(){--this.Hg}}}{let t=function(t,s){return t.wF()-s.wF()},r=function(i,e){for(let t=0,s=i.length;t<s;++t)if(i[t]!==e[t])return!1;return!0};t,r;const x=self.Os;x.C0t=class extends x.nr{constructor(t){super(),this.ef=t,this.E0t=[],this.P0t=new Map,this.R0t=[],this.A0t=new Map,this.F0t=new Map,this.D0t=new Map,this.O0t=new Map,this.k0t=new Map,this.L0t=new Map,this.N0t=0,this.B0t=[],this.W0t=[],this.j0t=[],this.V0t=new Map,this.H0t=new Map,this.aft=x.hr(x.Pft,this),this.U0t=x.hr(x.d0t,this),this.M0t=x.hr(x.y0t,this),this.z0t=[],this.J0t=[],this.q0t=[],this.$0t=0,this.X0t=0,this.K0t=0,this.Y0t=[],this.Z0t=[],this.Q0t=[],this.tdt=new Map,this.sdt=new Map,self.c3_callFunction=(t,s)=>this.idt(t,s)}lr(){this.yX(),this.aft.lr(),this.aft=null,this.U0t.lr(),this.U0t=null,x.Nh(this.J0t),x.Nh(this.q0t),this.ef=null,x.Nh(this.E0t),this.P0t.clear()}qM(t){const s=x.hr(x.edt,this,t);this.E0t.push(s),this.P0t.set(s.$c().toLowerCase(),s)}ndt(t){this.z0t.push(t)}rdt(){for(const t of this.H0t.values())t.hdt();for(const s of this.V0t.values())s.rdt();for(const i of this.H0t.values())i.rdt();for(const e of this.E0t)e.rdt();for(const n of this.E0t)n.L$();for(const r of this.z0t)r.rdt(!1);x.Nh(this.z0t),this.U0t.m0t(this.j0t)}NO(){return this.ef}k$(t){return this.P0t.get(t.toLowerCase())||null}odt(t){this.R0t.push(t),this.A0t.set(t.adt(),t)}ldt(t){this.F0t.set(t.Yz(),t)}udt(t){this.D0t.set(t.Yz(),t)}cdt(t){this.O0t.set(t.Yz(),t)}fdt(t){switch(t.ddt()){case 0:this.V0t.set(t.pdt().toLowerCase(),t);break;case 1:this.H0t.set(t.pdt().toLowerCase(),t)}}mdt(t){this.L0t.set(t.Yz(),t),(t.Cz()?this.B0t:this.W0t).push(t)}gdt(i){2<=i.length&&i.sort(t);let e=this.k0t.get(i.length);e||(e=[],this.k0t.set(i.length,e));for(let t=0,s=e.length;t<s;++t){const n=e[t];if(r(i,n))return n}return e.push(i),i}ydt(t){return this.j0t.push(t.wdt()),this.N0t++}uD(){return this.aft}Sdt(){return this.uD().k8()}eD(){return this.Sdt().eD()}bdt(){const t=this.Sdt(),s=t.eD();return s.vdt(t.Kft())}Mdt(){const t=this.Sdt(),s=t.eD();return s.xdt(t.Zft())}Gdt(){return this.U0t}N8(){return this.M0t}Tdt(t){const s=[];for(t=t._dt();t;)x.$n(s,t.Idt()),t=t._dt();return s}Cdt(t){const s={};for(const i of this.Tdt(t))s[i.Edt()]=i.Pdt();return Object.create(Object.prototype,s)}Rdt(t){return this.L0t.get(t)||null}Adt(t){return this.F0t.get(t)||null}Fdt(t){return this.D0t.get(t)||null}Ddt(t){return this.O0t.get(t)||null}ZF(t){return this.V0t.get(t.toLowerCase())||null}Odt(t,s){let i=this.H0t.get((t.$c()+"."+s).toLowerCase());if(i)return i;if(!t.Vz())for(const e of t.kdt())if(i=this.H0t.get((e.$c()+"."+s).toLowerCase()))return i;return null}Ldt(){return this.B0t}Ndt(){return this.W0t}Bdt(t){for(const s of this.B0t)s.Wdt();if(t)for(const i of this.W0t)i.K2()&&i.Wdt()}jdt(t){return this.A0t.get(t.toLowerCase())||null}Vdt(t){const s=this.F0t.get(t);return s&&s.Hdt()?s:null}Udt(){return this.R0t}zdt(){for(const t of this.R0t)t.Jdt()}qdt(){for(const t of this.E0t)t.$dt()}Xdt(t){this.qdt(),this.$0t++;for(const s of t.tK()){const i=s.u$();i&&(this.ef.Kdt(s),i.v_(),this.ef.Ydt())}this.$0t--}async Zdt(t){this.qdt(),this.$0t++;for(const s of this.Qdt(t))await this.ef.t1t(s);this.$0t--}*Qdt(t){for(const s of t.tK()){const i=s.u$();i&&(this.ef.Kdt(s),yield*i.s1t(),this.ef.Ydt())}}i1t(t,s,i,e){let n=!1;if(!t.KD())return this.e1t(s,i,e);this.X0t++;for(const r of t.tK()){const h=r.u$();if(h){this.ef.Kdt(r);for(const a of h.n1t()){const l=a.i1t(s,i,e);n=n||l}const o=h.i1t(s,i,e);n=n||o,this.ef.Ydt()}}return this.X0t--,n}*r1t(t,s,i,e){let n=!1;if(!t.KD())return this.e1t(s,i,e);this.X0t++;for(const r of t.tK()){const h=r.u$();if(h){this.ef.Kdt(r);for(const a of h.n1t()){const l=yield*a.r1t(s,i,e);n=n||l}const o=yield*h.r1t(s,i,e);n=n||o,this.ef.Ydt()}}return this.X0t--,n}e1t(t,s,i){return this.J0t.push([t,s,i]),!1}h1t(t,s,i){let e=null,n=new Promise(t=>e=t);return this.q0t.push([t,s,i,e]),n}*o1t(){if(this.ef.a1t())throw new Error("should not be in breakpoint");const t=this.ef.QD();for(;this.q0t.length;){const[s,i,e,n]=this.q0t.shift(),r=yield*this.r1t(t,s,i,e);n(r)}}async l1t(){for(const t of this.o1t())await this.ef.t1t(t)}u1t(t,i,e,n){let r=!1,s=t.KD(),h=s.u$();if(h){this.X0t++,this.ef.Kdt(s);const o=h.n1t();for(let t=0,s=o.length;t<s;++t){const l=o[t].u1t(i,e,n);r=r||l}const a=h.u1t(i,e,n);return r=r||a,this.ef.Ydt(),this.X0t--,r}}*c1t(t,i,e,n){let r=!1,s=t.KD(),h=s.u$();if(h){this.X0t++,this.ef.Kdt(s);const o=h.n1t();for(let t=0,s=o.length;t<s;++t){const l=yield*o[t].c1t(i,e,n);r=r||l}const a=yield*h.c1t(i,e,n);return r=r||a,this.ef.Ydt(),this.X0t--,r}}f1t(){return this.X0t}d1t(){return 0<this.f1t()}p1t(){return++this.X0t}m1t(){--this.X0t}g1t(){return 0<this.$0t}BL(){return this.g1t()||this.d1t()}hX(t){for(const[s,i,e]of this.J0t)this.i1t(t,s,i,e);x.Nh(this.J0t)}LL(t){t?this.K0t++:this.K0t--}FN(){return 0<this.K0t}y1t(i){for(let t=0,s=i.length;t<s;++t)i[t].w1t().Yu()}S1t(i){for(let t=0,s=i.length;t<s;++t)i[t].w1t().rft()}V8(i){for(let t=0,s=i.length;t<s;++t)i[t].w1t().hft()}U8(i){for(let t=0,s=i.length;t<s;++t)i[t].w1t().X8()}nD(s){const i=new Set,e=this.aft.Dft(),n=this.aft.Oft();for(let t=0;t<=n;++t){const r=e[t].f0t();if(r)for(const h of r)s&&s.has(h)||i.add(h)}return i}b1t(t){const s=new Set([...t]),i=this.nD(s);if(0<i.size){for(const e of i)e.w1t().rft();return[...i]}return null}v1t(){const t=x.hr(x.M1t,this);return this.Y0t.push(t),t}x1t(){return this.Y0t}G1t(){if(this.Y0t.length){let i=this.Sdt(),e=!1;this.$0t++;for(let t=0,s=this.Y0t.length;t<s;++t){const n=this.Y0t[t];n.T1t()&&n._1t(i),n.I1t()&&(e=!0)}e&&(this.C1t(),i.r0(null)),this.$0t--}}async E1t(){if(this.Y0t.length){let i=this.Sdt(),e=!1;this.$0t++;for(let t=0,s=this.Y0t.length;t<s;++t){const n=this.Y0t[t];n.T1t()&&await n.P1t(i),n.I1t()&&(e=!0)}e&&(this.C1t(),i.r0(null)),this.$0t--}}C1t(){const t=x.Jh(this.Y0t,t=>t.I1t());for(const s of t)s.lr()}yX(){for(const t of this.Y0t)t.lr();x.Nh(this.Y0t)}R1t(t){for(const s of this.Y0t)s.oft(t);for(const i of t){const e=this.sdt.get(i);if(this.sdt.delete(i),e)for(const{resolve:n}of e.A1t.values())n(!0)}}F1t(t){this.Z0t.push({promise:t,D1t:this.f1t()})}O1t(){x.Nh(this.Z0t)}k1t(){const s=this.f1t();this.Z0t=this.Z0t.filter(t=>t.D1t<=s)}L1t(){const t=Promise.all(this.Z0t.map(t=>t.promise));return this.Z0t=[],t}dD(t){const s=t.toLowerCase();this.Q0t.push(s),this.ef.f4(x.rX.nX.eX.N1t,null),this.Q0t.pop();for(const e of this.ef.YF().x1t())e.B1t()&&e.W1t()===s&&e.j1t();const i=this.tdt.get(s);i&&(i.resolve(),this.tdt.delete(s))}mD(t){const i=t.toLowerCase(),s=this.tdt.get(i);if(s)return s.promise;{let s=null,t=new Promise(t=>s=t);return this.tdt.set(i,{promise:t,resolve:s}),t}}V1t(){if(0===this.Q0t.length)throw new Error("not in a signal");return this.Q0t.at(-1)}H1t(t){let s=this.sdt.get(t);return s||(s={U1t:[],A1t:new Map},this.sdt.set(t,s)),s}ZN(t,s){const i=this.H1t(t),e=s.toLowerCase();i.U1t.push(e),this.ef.f4(t.bL().J1t().eX.z1t,t),i.U1t.pop();for(const r of this.ef.YF().x1t())r.q1t()&&r.W1t()===e&&r.$1t(t);const n=i.A1t.get(e);n&&(n.resolve(!1),i.A1t.delete(e)),0===i.U1t.length&&0===i.A1t.size&&this.sdt.delete(t)}QN(t,s){const i=this.H1t(t),e=s.toLowerCase(),n=i.A1t.get(e);if(n)return n.promise;{let s=null,t=new Promise(t=>s=t);return i.A1t.set(e,{promise:t,resolve:s}),t}}X1t(t){const s=this.H1t(t);if(s&&0!==s.U1t.length)return s.U1t.at(-1);throw new Error("not in a signal")}mq(){return{groups:this.K1t(),cnds:this.Y1t(),acts:this.Z1t(),vars:this.Q1t(),waits:this.tpt()}}gq(t){this.spt(t.groups),this.ipt(t.cnds),this.ept(t.acts),this.npt(t.vars),this.rpt(t.waits)}K1t(){const t={};for(const s of this.Udt())t[s.Yz().toString()]=s.hpt();return t}spt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),n=this.Vdt(e);n&&n.opt(i)}}Y1t(){const t={};for(const[s,i]of this.D0t){const e=i.mq();e&&(t[s.toString()]=e)}return t}ipt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[n,r]of this.D0t)r.gq(s.get(n)||null)}Z1t(){const t={};for(const[s,i]of this.O0t){const e=i.mq();e&&(t[s.toString()]=e)}return t}ept(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[n,r]of this.O0t)r.gq(s.get(n)||null)}Q1t(){const t={};for(const[s,i]of this.L0t)i.apt()||!i.Cz()&&!i.K2()||(t[s.toString()]=i.yet());return t}npt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),n=this.Rdt(e);n&&n.tnt(i)}}tpt(){return this.Y0t.filter(t=>!t.lpt()).map(t=>t.mq())}rpt(t){this.yX();for(const s of t){const i=x.M1t.upt(this,s);i&&this.Y0t.push(i)}}cpt(){return[...this.ef.QD().tK()].map(t=>t.u$()).filter(t=>t).map(t=>t.fpt())}dpt(t){for(;t;){const s=t._dt();if(s instanceof x.ppt)return s;t=s}return null}idt(t,s){Array.isArray(s)||(s=[]);const i=this.ZF(t.toLowerCase());if(!i)return null;if(!i.$u())return i.QF();const e=i.mpt();if(s.length<e.length)for(s=s.slice(0);s.push(e[s.length].wdt()),s.length<e.length;);const n=i.sD();return n.rD(n.iD(),!1,i.oD(),i.QF(),...s)}}}{const lo=self.Os;lo.edt=class extends lo.nr{constructor(t,s){super(),this.Rft=t,this.ef=t.NO(),this.dr=s[0],this.gpt=[],this.ypt=new Map,this.wpt=new Map,this.Spt=new Map,this.bpt=!1,this.vpt=[],this.Mpt=[],this.xpt=new Set;for(const i of s[1])this.Gpt(i,null,this.gpt);this.Tpt=this.ef.M4()?{type:"sheet",name:this.dr,_pt:0,children:[]}:null}lr(){this.Rft=null,this.ef=null}Gpt(t,s,i){switch(t[0]){case 0:case 3:this.Ipt(t,s,i);break;case 1:this.Cpt(t,s,i);break;case 2:this.Ept(t,s,i);break;case 4:this.Ppt(t,s);break;case 5:this.Rpt(t,s,i);break;case 6:this.Apt(t,s);break;default:throw new Error("invalid event type")}}Ipt(t,s,i){const e=lo.Fpt.qM(this,s,t);if(e.Eft()){i.push(e);const n=e.Dpt();for(let t=0,s=n.length;t<s;++t)n[t].Opt()&&this.kpt(e,t)}else e.Opt()?this.kpt(e,0):i.push(e)}Ppt(t,s){const i=lo.ppt.Lpt(this,s,t);this.Rft.fdt(i)}Apt(t,s){const i=lo.ppt.Npt(this,s,t);this.Rft.fdt(i)}Cpt(t,s,i){const e=lo.Bpt.qM(this,s,t);i.push(e)}Ept(t,s,i){const e=lo.Wpt.qM(this,s,t);i.push(e)}Rpt(t,s,i){const e=lo.jpt.qM(this,s,t);i.push(e)}kpt(n,r){n.Eft()||this.Rft.ndt(n);const h=n.vdt(r),o=h.Vpt(),a=h.TN();if(h.Hpt()){let t=this.wpt.get(a),s=(t||(t=new Map,this.wpt.set(a,t)),h.Upt().toLowerCase()),i=t.get(o),e=(i||(i=new Map,t.set(o,i)),i.get(s));e||(e=[],i.set(s,e)),e.push([n,r])}else{let t=this.ypt.get(a),s=(t||(t={zpt:new Map,Jpt:new Map},this.ypt.set(a,t)),h.G6()),i,e=(s?(i=t.Jpt.get(s))||(i=new Map,t.Jpt.set(s,i)):i=t.zpt,i.get(o));e||(e=[],i.set(o,e)),e.push([n,r])}}rdt(){const i=this.gpt;for(let t=0,s=i.length;t<s;++t){const e=t<s-1&&i[t+1]instanceof lo.Fpt&&i[t+1].qpt();i[t].rdt(e)}}$pt(t){this.vpt.push(t)}L$(){lo.Nh(this.Mpt),this.Xpt(this),this.xpt.clear()}Xpt(t){const s=t.Mpt,i=t.xpt;for(const e of this.vpt){const n=e.Kpt();e.Ypt()&&t!==n&&!i.has(n)&&(i.add(n),n.Xpt(t),s.push(n))}}n1t(){return this.Mpt}YF(){return this.Rft}NO(){return this.ef}$c(){return this.dr}Zpt(t,s){this.Spt.set(s,t)}Qpt(t){return this.Spt.get(t)||null}$dt(){this.bpt=!1}v_(){if(!this.bpt){const t=this.ef,s=t.tmt(),i=s?performance.now():0,e=(this.bpt=!0,this.YF()),n=e.Sdt();for(const r of this.gpt)r.v_(n),e.y1t(r.O8()),e.O1t(),t.jL();n.r0(null),s&&(this.Tpt._pt+=performance.now()-i)}}*s1t(){if(!this.bpt){this.bpt=!0;const t=this.ef,s=this.YF(),i=s.Sdt();for(const e of this.gpt)yield*e.s1t(i),s.y1t(e.O8()),s.O1t(),t.jL();i.r0(null)}}i1t(e,n,r){if(!n)return this.smt(e,n,null,null);{let t=n.TN(),s=!1,i=this.smt(e,n,t,r);s=s||i;for(const h of t.kdt())i=this.smt(e,n,h,r),s=s||i}}smt(t,s,i,e){const n=this.ypt.get(i);if(!n)return!1;const r=e?n.Jpt.get(e):n.zpt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[a,l]of h){const u=this.imt(s,a,l);o=o||u}return o}*r1t(e,n,r){if(!n)return yield*this.emt(e,n,null,null);{let t=n.TN(),s=!1,i=yield*this.emt(e,n,t,r);s=s||i;for(const h of t.kdt())i=yield*this.emt(e,n,h,r),s=s||i}}*emt(t,s,i,e){const n=this.ypt.get(i);if(!n)return!1;const r=e?n.Jpt.get(e):n.zpt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[a,l]of h){let t;t=a.nmt()?this.imt(s,a,l):yield*this.rmt(s,a,l),o=o||t}return o}u1t(t,s,i){const e=s.TN(),n=this.wpt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const a=h[t],l=this.imt(null,a[0],a[1]);o=o||l}return o}*c1t(t,s,i){const e=s.TN(),n=this.wpt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let n=0,t=h.length;n<t;++n){let t=h[n],s=t[0],i=t[1],e;e=s.nmt()?this.imt(null,s,i):yield*this.rmt(null,s,i),o=o||e}return o}imt(t,s,i){let e=this.ef,n=this.Rft,r=n.eD(),h=n.uD(),o=n.f1t(),a=!1;r&&n.S1t(r.iD()),n.S1t(s.iD());const l=1<o,u=(l&&n.Gdt().L8(),h.L8(s));if(t){const f=s.Dpt()[i].TN(),d=f.RL();d.Mft(t),t.LN()&&t.hmt()}let c=!0;if(s.SB()){const p=s.omt();for(let t=0,s=p.length;t<s;++t)if(!p[t].amt(u)){c=!1;break}}return c&&(s.Eft()?s.lmt(u,i):s.v_(u),a=u.s0t()),h.X8(),l&&n.Gdt().X8(),n.U8(s.iD()),r&&n.U8(r.iD()),r||1!==o||(n.O1t(),n.FN())||e.jL(),a}*rmt(t,s,i){let e=this.ef,n=this.Rft,r=n.eD(),h=n.uD(),o=n.f1t(),a=!1;r&&n.S1t(r.iD()),n.S1t(s.iD());const l=1<o,u=(l&&n.Gdt().L8(),h.L8(s));if(t){const f=s.Dpt()[i].TN(),d=f.RL();d.Mft(t),t.LN()&&t.hmt()}let c=!0;if(s.SB()){const p=s.omt();for(let t=0,s=p.length;t<s;++t)if(!(yield*p[t].umt(u))){c=!1;break}}return c&&(s.Eft()?yield*s.cmt(u,i):yield*s.s1t(u),a=u.s0t()),h.X8(),l&&n.Gdt().X8(),n.U8(s.iD()),r&&n.U8(r.iD()),r||1!==o||(n.O1t(),n.FN())||e.jL(),a}fpt(){return this.Tpt}}}{let u=function(t,s){return!0};u;const uo=self.Os,co=[];function*B(t,s){return!0}uo.Fpt=class extends uo.nr{constructor(t,s,i){super(),this.Eq=t,this.ef=t.NO(),this.fmt=s,this.dmt=null,this.aft=this.ef.YF().uD(),this.pmt=[],this.mmt=[],this.gmt=!1,this.ymt=!1,this.wmt=!1,this.Smt=!1,this.bmt=!!i[2],this.vmt=!1,this.Mmt=null,this.xmt=[],this.Dnt=[],this.Gmt=[],this.Tmt=u,this._mt=B,this.Imt=!1,this.Cmt=!1,this.Emt="",this.Pmt=!1,this.Rmt=null,this.Tpt=null,this.yU=i[4],this.Amt=i[5],this.Eq.Zpt(this,this.Amt),this.Fmt=this.ef.M4()?{Dmt:i[3][0],Omt:i[3][1],kmt:!1,Lmt:!1,Nmt:!1,Bmt:!1}:null,this.YF().ldt(this),3===i[0]&&this.Wmt(i[1]);let e=0;for(const n of i[6]){const r=uo.jmt.qM(this,n,e++);this.xmt.push(r),this.Vmt(r.TN())}e=0;for(const h of i[7]){const o=uo.Hmt.qM(this,h,e++);this.Dnt.push(o)}if(9===i.length){const a=i[8];for(const l of a)this.Eq.Gpt(l,this,this.Gmt)}this.xmt.length&&(this.vmt=null===this.xmt[0].TN()&&this.xmt[0].Vpt()===uo.rX.nX.eX.Umt),0===this.xmt.length&&(this.xmt=co),0===this.Dnt.length&&(this.Dnt=co),0===this.Gmt.length&&(this.Gmt=co)}static qM(t,s,i){return uo.hr(uo.Fpt,t,s,i)}Wmt(t){this.Imt=!0,this.Cmt=!!t[0],this.Pmt=this.Cmt,this.Emt=t[1].toLowerCase(),this.Rmt=[],this.YF().odt(this),this.ef.M4()&&(this.Tpt={type:"group",name:t[1],_pt:0,children:[]})}zmt(t){this.Rmt.push(t)}Jmt(t,s){for(const i of t.x$().lX())s.includes(i)||s.push(i)}qmt(t,s){if(t)if(s.includes(t)||s.push(t),t.Vz())for(const i of t.$mt())i.LN()&&this.Jmt(i,s);else t.LN()&&this.Jmt(t,s)}Vmt(t){this.qmt(t,this.pmt)}Xmt(t){this.qmt(t,this.mmt)}Kmt(){this.pmt=this.ef.jz()}rdt(t){this.Smt=!!t,this.Ymt(),this.Zmt();for(const s of this.xmt)s.rdt();if(0<this.Dnt.length){let t=!1;for(const e of this.Dnt)e.rdt(),e.Qmt()&&(t=!0);t?(this.Tmt=this.tgt,this._mt=this.sgt):(this.Tmt=this.igt,this._mt=this.egt)}const i=this.Gmt;for(let t=0,s=i.length;t<s;++t){const n=t<s-1&&i[t+1]instanceof uo.Fpt&&i[t+1].qpt();i[t].rdt(n)}this.Fmt&&this.ngt(),this.Tpt&&this.rgt().fpt().children.push(this.Tpt)}fpt(){return this.Tpt}rgt(){let t=this.SB();for(;t;){if(t.Hdt())return t;t=t.SB()}return this.Eq}ngt(){const t=this.Fmt;t.kmt=this.xmt.every(t=>t.nmt()),t.Lmt=this.Dnt.every(t=>t.nmt()),t.Nmt=this.Gmt.every(t=>t.nmt()),t.Bmt=t.kmt&&t.Lmt&&t.Nmt}hgt(){let t=this;for(;t.ngt(),t=t.SB(););}Ymt(){if(this.Hdt()){let t=this.SB();for(this.wmt=!0;t;){if(!t.Hdt()){this.wmt=!1;break}t=t.SB()}}}ogt(){const t=this.ef.jz();if(this.pmt===t)this.mmt=t;else{this.mmt=uo.Kh(this.pmt);let t=this.SB();for(;t;){for(const i of t.pmt)this.Xmt(i);t=t.SB()}const s=this.YF();this.pmt=s.gdt(this.pmt),this.mmt=s.gdt(this.mmt)}}Zmt(){if(this.agt()){this.Mmt=[];let t=this.SB();for(;t;)this.Mmt.push(t),t=t.SB();this.Mmt.reverse()}}lgt(){this.ymt=!0,this.fmt&&this.fmt.lgt()}l0t(){return this.ymt}O8(){return this.pmt}iD(){return this.gmt||(this.gmt=!0,this.ogt()),this.mmt}ugt(t){return this.pmt.includes(t)}omt(){return this.Mmt}u$(){return this.Eq}YF(){return this.Eq.YF()}NO(){return this.ef}SB(){return this.fmt}cgt(t){this.dmt=t}_dt(){return this.dmt||this.fmt}fgt(){return this.Amt}dgt(){return this.Fmt&&this.Fmt.Omt}pgt(){return this.dgt()&&this.Fmt.Dmt}mgt(t){this.Fmt.Dmt=!!t,this.hgt()}Hdt(){return this.Imt}ggt(){return this.wmt}qpt(){return this.vmt}ygt(){return this.Smt}adt(){return this.Emt}hpt(){return this.Pmt}Jdt(){this.opt(this.Cmt)}opt(t){if(t=!!t,!this.Imt)throw new Error("not a group");if(this.Pmt!==t){this.Pmt=t;for(const s of this.Rmt)s.wgt();if(this.Rmt.length){const i=this.ef.gO(),e=i.u$();e&&e.L$()}}}Yz(){return this.yU}Eft(){return this.bmt}Opt(){return this.xmt.length&&this.xmt[0].Opt()}Sgt(){return this.dmt&&this.dmt instanceof uo.ppt}agt(){return this.Sgt()||this.xmt.some(t=>t.Opt())}Dpt(){return this.xmt}u0t(){return this.xmt.length}vdt(t){if((t=Math.floor(t))<0||t>=this.xmt.length)throw new RangeError("invalid condition index");return this.xmt[t]}bgt(t){return this.vdt(t)}vgt(t){let s=t.wF();if(0!==s){--s;const i=t.Mgt()?t.xgt():t.TN();for(;0<=s;--s){const e=this.xmt[s];if(i===e.TN()||e.Mgt()&&e.xgt()===i)return!1}}return!0}Ggt(){return this.Dnt}Tgt(){return this.Dnt.length}xdt(t){if((t=Math.floor(t))<0||t>=this.Dnt.length)throw new RangeError("invalid action index");return this.Dnt[t]}_gt(s){s=Math.floor(s);const t=this.Dnt.find(t=>t.Igt()===s);if(t)return t;throw new RangeError("invalid action debug index")}Cgt(t){return 0<=(t=Math.floor(t))&&t<this.Dnt.length}Egt(){return this.Gmt}Idt(){return this.Gmt.filter(t=>t instanceof uo.Bpt)}amt(i){i.Xft(this);let e=this.xmt,n=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.Yft(t),r.N6())throw new Error("trigger cannot be used as sub-event to a loop");if(r.v_())n=!0;else if(!this.bmt)return!1}return!this.bmt||n}lmt(t,s){t.Xft(this),t.Yft(s),this.xmt[s].v_()&&(this.Tmt(t,0)&&this.Pgt(t),t.t0t(!0))}*umt(i){i.Xft(this);let e=this.xmt,n=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.Yft(t),r.N6())throw new Error("trigger cannot be used as sub-event to a loop");if(r.nmt()?r.v_():yield*r.s1t())n=!0;else if(!this.bmt)return!1}return!this.bmt||n}*cmt(t,s){t.Xft(this),t.Yft(s);let i=this.xmt[s];if(i.nmt()?i.v_():yield*i.s1t())(this.Rgt()?this.Tmt(t,0):yield*this._mt(t,0))&&(this.Agt()?this.Pgt():yield*this.Fgt()),t.t0t(!0)}v_(t){t.Xft(this),this.vmt||t.i0t(!1),this.bmt?this.Dgt(t):this.Ogt(t)}*s1t(t){(this.pgt()||this.ef.kgt())&&(yield this),t.Xft(this),this.vmt||t.i0t(!1),this.bmt?yield*this.Lgt(t):yield*this.Ngt(t)}Dgt(i){let e=this.xmt,n=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(!r.Opt()){i.Yft(t);const h=r.v_();n=n||h}}i.t0t(n),n&&(this.Tmt(i,0)&&this.Pgt(i),this.Smt)&&i.i0t(!0)}*Lgt(i){let e=this.xmt,n=0===e.length;for(let s=0,t=e.length;s<t;++s){const r=e[s];if(!r.Opt()){i.Yft(s);let t;t=r.nmt()?r.v_():yield*r.s1t(),n=n||t}}if(i.t0t(n),n)(this.Rgt()?this.Tmt(i,0):yield*this._mt(i,0))&&(this.Agt()?this.Pgt():yield*this.Fgt()),this.Smt&&i.i0t(!0)}Ogt(i){const e=this.xmt;for(let t=0,s=e.length;t<s;++t){const n=e[t],r=(i.Yft(t),n.v_());if(!r)return void i.t0t(!1)}i.t0t(!0),this.Tmt(i,0)&&this.Pgt(i),i.s0t()&&this.Smt&&i.i0t(!0)}*Ngt(i){const e=this.xmt;for(let t=0,s=e.length;t<s;++t){const n=e[t];i.Yft(t);if(!(n.nmt()?n.v_():yield*n.s1t()))return void i.t0t(!1)}i.t0t(!0);(this.Rgt()?this.Tmt(i,0):yield*this._mt(i,0))&&(this.Agt()?this.Pgt():yield*this.Fgt()),i.s0t()&&this.Smt&&i.i0t(!0)}igt(i,e){const n=this.Dnt;for(let t=e,s=n.length;t<s;++t){const r=n[t];i.Qft(t),r.v_()}return!0}*egt(i,e){const n=this.Dnt;for(let t=e,s=n.length;t<s;++t){const r=n[t];i.Qft(t),r.nmt()?r.v_():yield*r.s1t()}return!0}tgt(i,e){const n=this.YF(),r=this.Dnt;for(let t=e,s=r.length;t<s;++t){const h=r[t],o=(i.Qft(t),h.v_());if(h.Bgt()&&!0===o)return!1;h.Wgt()&&o instanceof Promise&&n.F1t(o)}return!0}*sgt(i,e){const n=this.YF(),r=this.Dnt;for(let s=e,t=r.length;s<t;++s){const h=r[s];i.Qft(s);let t;if(t=h.nmt()?h.v_():yield*h.s1t(),h.Bgt()&&!0===t)return!1;h.Wgt()&&t instanceof Promise&&n.F1t(t)}return!0}jgt(t){this.Tmt(t,t.Zft())&&this.Pgt()}*Vgt(t){(yield*this._mt(t,t.Zft()))&&(yield*this.Fgt())}Pgt(){if(this.Gmt.length){const t=this.Hdt()&&this.ef.tmt(),s=t?performance.now():0,i=this.aft,e=i.L8(this);this.ymt?this.Hgt(e):this.Ugt(e),i.X8(),t&&(this.Tpt._pt+=performance.now()-s)}}Hgt(e){const n=this.Imt,r=this.wmt,h=this.YF(),o=this.Gmt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.O8(),u=!r||!n&&t<i;u&&h.V8(l),a.v_(e),u?h.U8(l):h.y1t(l)}}Ugt(i){const e=this.Gmt;for(let t=0,s=e.length;t<s;++t)e[t].v_(i)}*Fgt(){if(this.Gmt.length){const t=this.aft,s=t.L8(this);this.ymt?yield*this.zgt(s):yield*this.Jgt(s),t.X8()}}*zgt(e){const n=this.Imt,r=this.wmt,h=this.YF(),o=this.Gmt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.O8(),u=!r||!n&&t<i;u&&h.V8(l),yield*a.s1t(e),u?h.U8(l):h.y1t(l)}}*Jgt(i){const e=this.Gmt;for(let t=0,s=e.length;t<s;++t)yield*e[t].s1t(i)}H8(i,e){e.$ft();const n=this.xmt;if(!this.Eft())for(let t=i.Kft()+1,s=n.length;t<s;++t){const r=n[t],h=(e.Yft(t),r.v_());if(!h)return!1}return this.Tmt(e,0)&&this.Pgt(e),!0}*qgt(i,e){e.$ft();const n=this.xmt;if(!this.Eft())for(let t=i.Kft()+1,s=n.length;t<s;++t){const r=n[t];e.Yft(t);if(!(r.nmt()?r.v_():yield*r.s1t()))return!1}return(this.Rgt()?this.Tmt(e,0):yield*this._mt(e,0))&&(this.Agt()?this.Pgt():yield*this.Fgt()),!0}nmt(){return!this.pgt()&&!this.ef.kgt()&&this.Fmt.Bmt}Rgt(){return!this.ef.kgt()&&this.Fmt.Lmt}Agt(){return!this.ef.kgt()&&this.Fmt.Nmt}$gt(i){if(this.SB()){const e=this.omt();for(let t=0,s=e.length;t<s;++t)if(!e[t].amt(i))return!1}return!0}*Xgt(i){if(this.SB()){const e=this.omt();for(let t=0,s=e.length;t<s;++t)if(!(yield*e[t].umt(i)))return!1}return!0}Kgt(t,s,i){if(0<s.length)if(i){const e=s.map(t=>t.Qs(0));t.Gdt().L8(),this.dmt.Ygt(e)}else this.dmt.Zgt(s);else i&&t.Gdt().L8()}Qgt(t,s,i,e){let n,r,h=0<t.length,o=null,a=this.ef,l=this.aft,u=a.YF(),c=this.dmt,f=c.Wgt(),d=u.p1t(),p=1<d;if(this.Kgt(u,s,p),h&&(i?u.V8(t):u.S1t(t)),null!==e){if(e.tyt){const g=i?e.tyt.RL():e.tyt.w1t().nft(),y=e.syt.RL();y.xft(g.PL()),y.Ift(),i||e.syt.iyt()}else if(e.eyt){const w=e.eyt.RL();w.xft(e.nyt),w.Ift()}e.ryt&&(o=u.b1t(t))}const m=l.L8(this);return i&&m.c0t(t),this.$gt(m)&&(m.Xft(this),f&&([r,n]=c.hyt()),this.Ogt(m),f)&&c.oyt(r),l.X8(),p&&u.Gdt().X8(),null!==o&&u.U8(o),h&&u.U8(t),u.m1t(),f||u.k1t(),n}*ayt(t,s,i,e){let n,r,h=((this.pgt()||this.ef.kgt())&&(yield this),0<t.length),o=null,a=this.ef,l=this.aft,u=a.YF(),c=this.dmt,f=c.Wgt(),d=u.p1t(),p=1<d;if(this.Kgt(u,s,p),h&&(i?u.V8(t):u.S1t(t)),null!==e){if(e.tyt){const g=i?e.tyt.RL():e.tyt.w1t().nft(),y=e.syt.RL();y.xft(g.PL()),y.Ift(),i||e.syt.iyt()}else if(e.eyt){const w=e.eyt.RL();w.xft(e.nyt),w.Ift()}e.ryt&&(o=u.b1t(t))}const m=l.L8(this);return i&&m.c0t(t),(yield*this.Xgt(m))&&(m.Xft(this),f&&([r,n]=c.hyt()),yield*this.Ngt(m),f)&&c.oyt(r),l.X8(),p&&u.Gdt().X8(),null!==o&&u.U8(o),h&&u.U8(t),u.m1t(),f||u.k1t(),n}lyt(t,s){const i=this.iD(),e=0<i.length,n=this.ef,r=this.aft,h=n.YF(),o=h.p1t(),a=1<o,l=(a&&h.Gdt().L8(),this.dmt.Ygt(t),e&&(s?h.V8(i):h.S1t(i)),r.L8(this));this.$gt(l)&&(l.Xft(this),this.Ogt(l)),r.X8(),a&&h.Gdt().X8(),e&&h.U8(i),h.m1t(),h.k1t()}*uyt(t,s){(this.pgt()||this.ef.kgt())&&(yield this);const i=this.iD(),e=0<i.length,n=this.ef,r=this.aft,h=n.YF(),o=h.p1t(),a=1<o,l=(a&&h.Gdt().L8(),this.dmt.Ygt(t),e&&(s?h.V8(i):h.S1t(i)),r.L8(this));(yield*this.Xgt(l))&&(l.Xft(this),yield*this.Ngt(l)),r.X8(),a&&h.Gdt().X8(),e&&h.U8(i),h.m1t(),h.k1t()}rD(t,s,i,e,...n){let r,h,o=0<t.length,a=this.ef,l=this.aft,u=a.YF(),c=this.dmt,f=c.Wgt(),d=u.p1t(),p=1<d,m=(p&&u.Gdt().L8(),0<n.length&&this.dmt.Ygt(n),o&&(s?u.V8(t):u.S1t(t)),l.L8(this));return m.h0t(i,e),l.kft(m),a.W8(!1),this.$gt(m)&&(m.Xft(this),f&&([h,r]=c.hyt()),this.Ogt(m),f)&&c.oyt(h),a.W8(!0),l.X8(),l.Lft(),p&&u.Gdt().X8(),o&&u.U8(t),u.m1t(),f||u.k1t(),r||m.o0t()}}}{let e=self.Os,t=[],s=!1;e.jpt=class extends e.nr{constructor(t,s,i){super();const e=t.NO(),n=t.YF(),r=(this.Eq=t,this.Rft=n,this.ef=t.NO(),this.fmt=s,e.cyt(i[1]));this.fyt=r,this.Amt=i[2],this.Eq.Zpt(this,this.Amt),this.Fmt=e.M4()?{Dmt:i[3][0],Omt:i[3][1]}:null}static qM(t,s,i){return e.hr(e.jpt,t,s,i)}rdt(){const t=this.fyt,s=this.ef.YF().Cdt(this);this.fyt=t.bind(null,this.ef.Jk(),s)}SB(){return this.fmt}_dt(){return this.fmt}u$(){return this.Eq}fgt(){return this.Amt}dgt(){return this.Fmt&&this.Fmt.Omt}pgt(){return this.dgt()&&this.Fmt.Dmt}mgt(t){this.Fmt.Dmt=!!t}qpt(){return!1}O8(){return t}iD(){return this.fmt?this.fmt.iD():t}v_(t){t.Xft(this),this.Rft.F1t(this.dyt())}async dyt(){try{await this.fyt()}catch(t){console.error(`Unhandled exception running script %c${this.u$().$c()}, event ${this.fgt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),s||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),s=!0)}}*s1t(t){t.Xft(this),(this.pgt()||this.ef.kgt())&&(yield this),this.v_(t)}nmt(){return!this.pgt()&&!this.ef.kgt()}static pyt(){return s}static myt(){s=!0}}}{const fo=self.Os;fo.ppt=class extends fo.nr{constructor(t,s,i){super(),this.Eq=t,this.ef=t.NO(),this.fmt=s,this.gyt=0,this.yyt="",this.wyt=0,this.Syt=[],this.byt=!0,this.vyt="",this.Qct=null,this.Myt=!1,this.xyt=[],this.Gyt=!1,this.Tyt=!1,this._yt=0,this.Iyt=-1,this.Cyt=new Map,this.Eyt=fo.Fpt.qM(t,s,i),this.Eyt.cgt(this)}Pyt(t){this.gyt=0,this.yyt=t[0],this.wyt=t[1],this.Syt=t[2].map(t=>fo.Bpt.qM(this.Eq,this,t)),this.byt=t[3],this.Tyt=t[4],this.Gyt=t[5]}Ryt(t){this.gyt=1,this.vyt=t[1],this.Qct=this.ef.wz(t[2]),this.Eyt.Vmt(this.Qct),this.yyt=this.Qct.$c()+"."+this.vyt,this.wyt=t[3],this.Syt=t[4].map(t=>fo.Bpt.qM(this.Eq,this,t)),this.byt=t[5],this.Tyt=t[6],this.Gyt=t[7],this.Qct.Ayt(this)}static Lpt(t,s,i){const e=fo.hr(fo.ppt,t,s,i),n=i[1];return e.Pyt(n),e}static Npt(t,s,i){const e=fo.hr(fo.ppt,t,s,i),n=i[1];return e.Ryt(n),e}hdt(){if(this.Qct&&this.Qct.Vz())for(const t of this.Qct.$mt())if(t.Fyt(this.vyt)){this.Myt=!0;break}}rdt(){for(const t of this.Syt)t.rdt();this.Eyt.rdt(!1)}ddt(){return this.gyt}Idt(){return this.Syt}mpt(){return this.Syt}tD(){return this.Syt.length}Dyt(t){this.xyt.push(t)}Oyt(){return this.xyt}Zgt(i){const e=this.Syt;for(let t=0,s=e.length;t<s;++t)e[t].tnt(i[t].Qs(0))}Ygt(i){const e=this.Syt;for(let t=0,s=e.length;t<s;++t)e[t].tnt(i[t])}kyt(){return this.Syt.map(t=>t.yet())}SB(){return this.fmt}_dt(){return this.fmt}pdt(){return this.yyt}Lyt(){return this.vyt}Nyt(){return this.Myt}oD(){return this.wyt}TN(){return this.Qct}$u(){return this.byt}QF(){switch(this.wyt){case 0:return null;case 2:return"";default:return 0}}sD(){return this.Eyt}hD(){return this.Gyt}Wgt(){return this.Tyt}hyt(){const t=this._yt++;this.Iyt=t;let s,i=new Promise(t=>s=t);return this.Cyt.set(t,{resolve:s,Byt:0}),[t,i]}oyt(t){const s=this.Cyt.get(t);0===s.Byt&&(s.resolve(),this.Cyt.delete(t)),this.Iyt=-1}Wyt(){const t=this.Cyt.get(this.Iyt);return t.Byt++,this.Iyt}jyt(t){this.Iyt=t;const s=this.Cyt.get(t);s.Byt--}Vyt(t,s){const i=new Map,e=[];for(const n of this.Qct.RL().PL()){const r=n.TN();if(r.Fyt(this.vyt)){const h=i.get(r);Array.isArray(h)?h.push(n):i.set(r,[n])}else e.push(n)}if(0<e.length&&this.Eyt.Qgt(t,s,this.Gyt,{eyt:this.Qct,nyt:e}),0<i.size)for(const[o,a]of i){const l=o.Hyt(this.vyt).sD(),u=[...new Set([...t,...l.O8()])];l.Qgt(u,s,this.Gyt,{eyt:o,nyt:a})}}*Uyt(t,s){const i=new Map,e=[];for(const n of this.Qct.RL().PL()){const r=n.TN();if(r.Fyt(this.vyt)){const h=i.get(r);Array.isArray(h)?h.push(n):i.set(r,[n])}else e.push(n)}if(0<e.length&&(yield*this.Eyt.ayt(t,s,this.Gyt,{eyt:this.Qct,nyt:e})),0<i.size)for(const[o,a]of i){const l=o.Hyt(this.vyt).sD(),u=[...new Set([...t,...l.O8()])];yield*l.ayt(u,s,this.Gyt,{eyt:o,nyt:a})}}}}{const po=self.Os,mo=[];po.Bpt=class extends po.nr{constructor(t,s,i){super();const e=t.YF();this.Eq=t,this.Rft=e,this.ef=t.NO(),this.fmt=s,this.U0t=e.Gdt(),this.dr=i[1],this.df=i[2],this.zyt=i[3],this.S2=!!i[4],this.Jyt=!!i[5],this.qyt=s instanceof po.ppt,this.yU=i[6],this.$yt=this.ef.Edt(i[8]),this.Xyt=t=>this.tnt(t),this.Kyt=()=>this.yet(),this.Yyt=!this.fmt||this.S2||this.Jyt,this.Pnt=this.zyt,this.Zyt=-1,this.Qyt()&&(this.Pnt=this.Pnt?1:0),!this.twt()||this.K2()||this.apt()||(this.Zyt=e.ydt(this)),e.mdt(this)}static qM(t,s,i){return po.hr(po.Bpt,t,s,i)}rdt(){if(this.twt()&&!this.K2()&&!this.apt()&&!this.swt()){const t=this.Rft.dpt(this);t&&t.Dyt(this)}}$c(){return this.dr}Edt(){return this.$yt}SB(){return this.fmt}_dt(){return this.SB()}Cz(){return!this.SB()}twt(){return!this.Cz()}swt(){return this.qyt}K2(){return this.S2}apt(){return this.Jyt}le(){return 0===this.df}ve(){return 1===this.df}Qyt(){return 2===this.df}qpt(){return!1}Yz(){return this.yU}wdt(){return this.zyt}O8(){return mo}v_(t){!this.twt()||this.K2()||this.apt()||this.tnt(this.wdt())}nmt(){return!0}*s1t(t){this.v_(t)}tnt(t){this.le()?"number"!=typeof t&&(t=parseFloat(t)):this.ve()?"string"!=typeof t&&(t=t.toString()):this.Qyt()&&(t=t?1:0),this.Yyt?this.Pnt=t:this.U0t.g0t()[this.Zyt]=t}yet(){return this.Yyt?this.Pnt:this.U0t.g0t()[this.Zyt]}iwt(){let t=this.yet();return this.Qyt()?!!t:t}Wdt(){this.Pnt=this.zyt}Pdt(){return{configurable:!1,enumerable:!0,get:this.Kyt,set:this.Xyt}}}}{const go=self.Os,yo=[];go.Wpt=class extends go.nr{constructor(t,s,i){super();const e=t.YF();this.Eq=t,this.Rft=e,this.ef=t.NO(),this.fmt=s,this.ewt=null,this.nwt=i[1],this.n0=!0}static qM(t,s,i){return go.hr(go.Wpt,t,s,i)}rdt(){this.ewt=this.Rft.k$(this.nwt),this.Eq.$pt(this);let t=this.SB();for(;t;)t instanceof go.Fpt&&t.Hdt()&&t.zmt(this),t=t.SB();this.wgt(),this.ef.M4()&&this.Eq.fpt().children.push(this.ewt.fpt())}SB(){return this.fmt}O8(){return yo}Kpt(){return this.ewt}v_(t){const s=!!this.SB(),i=this.ef.jz();s&&this.Rft.S1t(i),this.ewt.v_(),s&&this.Rft.U8(i)}*s1t(t){const s=!!this.SB(),i=this.ef.jz();s&&this.Rft.S1t(i),yield*this.ewt.s1t(),s&&this.Rft.U8(i)}nmt(){return!1}Ypt(){return this.n0}wgt(){let t=this.SB();for(;t;){if(t instanceof go.Fpt&&t.Hdt()&&!t.hpt())return void(this.n0=!1);t=t.SB()}this.n0=!0}}}{let a=function(t,s){return s<=t?t%s:(t<0&&(t<=-s&&(t%=s),t<0)&&(t+=s),t)};a;const wo=self.Os;wo.rwt=class extends wo.nr{constructor(t){super(),this.Pv=t,this.ef=t.NO()}rdt(){}static hwt(t,s){const i=s[0],e=[xo,vo,Mo,Go,So,bo];return wo.hr(e[i],t,s)}};class So extends wo.rwt{constructor(t,s){super(t),this.owt=this.ef.i7(),this.fyt=this.ef.cyt(s[1]),this.fyt!==wo.rX.nX.qnt.random&&this.fyt!==wo.rX.nX.qnt.awt||this.Pv.lwt()}uwt(){return this.owt.cwt(this.fyt,this.owt)}}class bo extends wo.rwt{constructor(t,s){super(t),this.fwt=null,this.yyt=s[1],this.Pv.lwt()}rdt(){const t=this.ef.YF(),s=(this.fwt=t.ZF(this.yyt),this.yyt=null,this.Pv.sD()),i=this.fwt.sD();this.dwt=[...new Set([...s.iD(),...i.iD()])],this.dwt=t.gdt(this.dwt)}uwt(){const t=this.fwt;if(t.$u()){const s=t.sD();return wo.Fpt.prototype.rD.bind(s,this.dwt,t.hD(),t.oD(),t.QF())}{const i=t.QF();return()=>i}}}class vo extends wo.rwt{constructor(t,s){super(t),this.Qct=this.ef.wz(s[1]),this.fyt=this.ef.cyt(s[2]),this.pwt=!!s[3],this.aft=this.ef.YF().uD(),this.Pv.mwt(this.Qct)}uwt(){return this.Qct.bL().cwt(this.fyt,this.Qct.yL().p6())}gwt(...t){const s=this.Qct,i=s.RL().gft(),e=i.length;if(0===e)return this.pwt?"":0;const n=a(this.Pv.ywt(),e);return this.aft.k8().n0t(s),this.fyt.apply(i[n].p6(),t)}wwt(t,...s){const i=this.Qct,e=i.PL(),n=e.length;if(0===n||"number"!=typeof t)return this.pwt?"":0;const r=a(t,n);return this.aft.k8().n0t(i),this.fyt.apply(e[r].p6(),s)}}class Mo extends wo.rwt{constructor(t,s){super(t),this.Qct=this.ef.wz(s[1]),this.Swt=s[3],this.pwt=!!s[2],this.Pv.mwt(this.Qct)}bwt(){const t=this.Qct.RL().gft(),s=t.length;if(0===s)return this.pwt?"":0;const i=a(this.Pv.ywt(),s);return t[i].vwt(this.Swt)}Mwt(){const t=this.Qct,s=t.RL().gft(),i=s.length;if(0===i)return this.pwt?"":0;const e=a(this.Pv.ywt(),i),n=s[e],r=n.TN().xwt(t.Gwt());return n.vwt(this.Swt+r)}Twt(t){const s=this.Qct,i=s.PL(),e=i.length;if(0===e||"number"!=typeof t)return this.pwt?"":0;let n=a(t,e),r=i[n],h=0;return s.Vz()&&(h=r.TN().xwt(s.Gwt())),r.vwt(this.Swt+h)}}class xo extends wo.rwt{constructor(t,s){super(t),this.Qct=this.ef.wz(s[1]),this._wt=this.Qct.Gnt(s[2]),this.Iwt=this.Qct.tit(s[2]),this.fyt=this.ef.cyt(s[3]),this.pwt=!!s[4],this.aft=this.ef.YF().uD(),this.Pv.mwt(this.Qct)}Cwt(...t){const s=this.Qct,i=s.RL().gft(),e=i.length;if(0===e)return this.pwt?"":0;let n=a(this.Pv.ywt(),e),r=(this.aft.k8().n0t(s),i[n]),h=0;return s.Vz()&&(h=r.TN().Ewt(s.Gwt())),this.fyt.apply(r.xnt()[this.Iwt+h].p6(),t)}Pwt(t,...s){const i=this.Qct,e=i.PL(),n=e.length;if(0===n||"number"!=typeof t)return this.pwt?"":0;let r=a(t,n),h=(this.aft.k8().n0t(i),e[r]),o=0;return i.Vz()&&(o=h.TN().Ewt(i.Gwt())),this.fyt.apply(h.xnt()[this.Iwt+o].p6(),s)}}class Go extends wo.rwt{constructor(t,s){super(t),this.Rwt=null,this.Awt=s[1]}rdt(){this.Rwt=this.ef.YF().Rdt(this.Awt)}Fwt(){return this.Rwt}}}{let r=function(t){const s=self.Dwt[t];if(s)return s;throw new Error("invalid expression number")};r;const To=self.Os;To.Owt=class extends To.nr{constructor(t,s,i){super(),this.Pv=t,this.Hg=i,this.df=s,this.Qs=null,this.kwt=!1,this.Jyt=!1}static qM(t,s,i){const e=s[0],n=[_o,Io,Do,Eo,Ro,Co,Ao,_o,Eo,Eo,Oo,ko,Do,No,Io,Fo,Po,Lo,Bo,Wo,jo,Vo];return To.hr(n[e],t,e,i,s)}rdt(){}lwt(){this.kwt=!0}mwt(t){this.kwt||!t||t.bL().$k()||(this.kwt=!0)}Lwt(){return this.kwt}wF(){return this.Hg}NO(){return this.Pv.NO()}sD(){return this.Pv.sD()}apt(){return this.Jyt}Nwt(){return 4===this.df}};class _o extends To.Owt{constructor(t,s,i,e){super(t,s,i),this.Bwt=0;const n=e[1];this.Wwt=n[0],this.jwt=[],this.Vwt=null;for(let t=1,s=n.length;t<s;++t)this.jwt.push(To.rwt.hwt(this,n[t]));this.jwt.length?this.Qs=this.Hwt:(this.Qs=r(this.Wwt),this.Jyt=!0)}Uwt(t){if(t<0||t>=this.jwt.length)throw new RangeError("invalid numbered node");return this.jwt[t]}rdt(){for(const s of this.jwt)s.rdt();const t=r(this.Wwt);this.jwt.length?this.Vwt=t(this):this.Vwt=t}ywt(){return this.Bwt}Hwt(t){return this.Bwt=t,this.Vwt()}}class Io extends _o{constructor(t,s,i,e){super(t,s,i,e),this.Qs=this.zwt,14===s&&(this.sD().Kmt(),this.Pv instanceof To.Hmt)&&this.sD().lgt()}zwt(t){this.Bwt=t;const s=this.Vwt();return"string"==typeof s?s:""}Jwt(){return r(this.Wwt)()}}class Co extends _o{constructor(t,s,i,e){super(t,s,i,e),2<=t.qwt()?this.Qs=this.n5:this.Qs=this.SO,this.Jyt=!1}SO(t){this.Bwt=t;const s=this.Vwt(),i=this.NO().gO();return i.SO(s)}n5(t){const s=this.SO(t);return s?s.n5():null}}class Eo extends To.Owt{constructor(t,s,i,e){super(t,s,i),this.$wt=e[1],this.Qs=this.Xwt,this.Jyt=!0}Xwt(){return this.$wt}}class Po extends To.Owt{constructor(t,s,i,e){super(t,s,i),this.Kwt=e[1],this.Qs=this.Ywt,this.Jyt=!0}Ywt(){return this.Kwt}}class Ro extends To.Owt{constructor(t,s,i,e){super(t,s,i),this.Qct=this.NO().wz(e[1]),2<=t.qwt()?this.Qs=this.pL:this.Qs=this.TN;const n=this.sD();n.Vmt(this.Qct),this.Pv instanceof To.Hmt?n.lgt():n.SB()&&n.SB().lgt(),this.Jyt=!0}TN(){return this.Qct}pL(){return this.Qct?this.Qct.pL():null}}class Ao extends To.Owt{constructor(t,s,i,e){super(t,s,i),this.dU=this.NO().QD().XX(e[1]),2<=t.qwt()?this.Qs=this.YD:this.Qs=this.tO,this.Jyt=!0}tO(){return this.dU}YD(){return this.dU?this.dU.YD():null}}class Fo extends To.Owt{constructor(t,s,i,e){super(t,s,i),this.QY=this.NO().stt().hY(e[1]),2<=t.qwt()?this.Qs=this.yst:this.Qs=this.Bst,this.Jyt=!0}Bst(){return this.QY}yst(){return this.QY?this.QY.yst():null}}class Do extends To.Owt{constructor(t,s,i,e){super(t,s,i),this.Zwt=e[1],this.Qs=this.Qwt,this.Jyt=!0}Qwt(){return this.Zwt}}class Oo extends To.Owt{constructor(t,s,i,e){super(t,s,i),this.tSt=e[1];const n=this.Pv.TN();this.Pv instanceof To.jmt&&this.Pv.K2()||!n||!n.Vz()?(this.Qs=this.sSt,this.Jyt=!0):(this.Qs=this.iSt,this.lwt())}sSt(){return this.tSt}iSt(t){t=t||0;let s=this.Pv.TN(),i=s.RL(),e=i.PL(),n=null;if(e.length)n=e[t%e.length].TN();else if(i.pft()){const r=i.mft();n=r[t%r.length].TN()}else{if(!(0<s.FL()))return 0;{const h=s.PL();n=h[t%h.length].TN()}}return this.tSt+n.xwt(s.Gwt())}}class ko extends To.Owt{constructor(t,s,i,e){super(t,s,i),this.Awt=e[1],this.Rwt=null,2<=t.qwt()?this.Qs=this.eSt:this.Qs=this.nSt,this.Jyt=!0}rdt(){this.Rwt=this.NO().YF().Rdt(this.Awt)}nSt(){return this.Rwt}eSt(){return null}}class Lo extends To.Owt{constructor(t,s,i,e){super(t,s,i),this.rSt=e[1],this.fwt=null,2<=t.qwt()?this.Qs=this.hSt:this.Qs=this.oSt,this.Jyt=!0}rdt(){this.fwt=this.NO().YF().ZF(this.rSt),this.rSt=null}oSt(){return this.fwt}hSt(){return null}}class No extends To.Owt{constructor(t,s,i,e){super(t,s,i),this.aSt=[],this.lSt=[],this.Jyt=!0;for(let t=1,s=e.length;t<s;++t){const n=To.Owt.qM(this.Pv,e[t],0);this.aSt.push(n),this.lSt.push(0),n.apt()||(this.Jyt=!1)}this.Qs=this.uSt}rdt(){for(const t of this.aSt)t.rdt()}uSt(){const i=this.aSt,e=this.lSt;for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Qs(0);return e}}class Bo extends To.Owt{constructor(t,s,i,e){super(t,s,i),this.cSt=e[1],this.Qs=this.Qet,this.Jyt=!0}Qet(){return this.cSt}}class Wo extends To.Owt{constructor(t,s,i,e){super(t,s,i),this.fSt=e[1],this.Qs=this.dSt,this.Jyt=!0}dSt(){return this.fSt}}class jo extends _o{constructor(t,s,i,e){super(t,s,i,e),this.Qs=this.HN,this.Jyt=!1}HN(){return this.Vwt()}}class Vo extends To.Owt{constructor(t,s,i,e){super(t,s,i),this.Olt=this.NO().Qlt().Elt(e[1]),this.Qs=this.pSt,this.Jyt=!0}pSt(){return this.Olt.$c()}}}{let e=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Qs(0)};e;const Ho=self.Os,Uo=[],zo=function(){};Ho.jmt=class extends Ho.nr{constructor(t,i,s){if(super(),this.Eyt=t,this.ef=t.NO(),this.Hg=s,this.fyt=this.ef.cyt(i[1]),this.mSt=0<i[3],this.gSt=2===i[3],this.ySt=!!i[4],this.wSt=!!i[5],this.S2=!!i[6],this.yU=i[7],this.SSt=this.Eyt.Eft(),this.Qct=null,this._wt=null,this.Iwt=-1,this.owt=null,this.v_=zo,this.s1t=zo,this.$s=[],this.bSt=[],this.vSt=!1,this.MSt=null,this.xSt=null,this.Fmt=this.ef.M4()?{Dmt:i[8][0],GSt:i[8][1]}:null,-1===i[0]?this.owt=this.ef.i7():(this.Qct=this.ef.wz(i[0]),i[2]&&(this._wt=this.Qct.Gnt(i[2]),this.Iwt=this.Qct.tit(i[2])),this.Eyt.SB()&&this.Eyt.SB().lgt()),10===i.length){let s=i[9];for(let t of s)this.$s.push(Ho.Owt.qM(this,t,this.$s.length)),this.bSt.push(0)}0===this.$s.length&&(this.$s=Uo,this.bSt=Uo),this.Eyt.YF().udt(this)}static qM(t,s,i){return Ho.hr(Ho.jmt,t,s,i)}rdt(){for(const t of this.$s)t.rdt(),t.Lwt()&&(this.vSt=!0);this.gSt?(this.v_=this.TSt,this.s1t=this._St):this.owt?(this.ISt(),this.s1t=this.CSt):this.Qct.bL().$k()?(this.ESt(),this.s1t=this.PSt):this.S2?(this.v_=this.RSt,this.s1t=this.ASt):(this.v_=this.FSt,this.s1t=this.DSt)}ISt(){const t=this.owt,s=this.owt;this.OSt(t,s,this.kSt)}ESt(){const t=this.Qct.bL(),s=this.Qct.yL().p6();this.OSt(t,s,this.LSt)}OSt(t,s,i){const e=this.fyt,n=this.wSt,r=this.$s;if(0===r.length){const h=t.cwt(e,s);n?this.v_=function(){return Ho.xor(h(),n)}:this.v_=h}else if(1===r.length){const o=r[0];if(!n&&o.apt())this.v_=t.NSt(e,s,o.Qs(0));else{const a=t.cwt(e,s);this.v_=function(){return Ho.xor(a(o.Qs(0)),n)}}}else if(2===r.length){const l=r[0],u=r[1];if(!n&&l.apt()&&u.apt())this.v_=t.BSt(e,s,l.Qs(0),u.Qs(0));else{const c=t.cwt(e,s);this.v_=function(){return Ho.xor(c(l.Qs(0),u.Qs(0)),n)}}}else if(3===r.length){const f=r[0],d=r[1],p=r[2];if(!n&&f.apt()&&d.apt()&&p.apt())this.v_=t.WSt(e,s,f.Qs(0),d.Qs(0),p.Qs(0));else{const m=t.cwt(e,s);this.v_=function(){return Ho.xor(m(f.Qs(0),d.Qs(0),p.Qs(0)),n)}}}else this.v_=i}Yz(){return this.yU}Vpt(){return this.fyt}TN(){return this.Qct}G6(){return this._wt}jSt(){return this._wt?this._wt.v6():this.Qct?this.Qct.bL():null}qwt(){const t=this.jSt();return t?t.VSt():1}sD(){return this.Eyt}NO(){return this.ef}wF(){return this.Hg}Igt(){return this.wF()}Opt(){return this.mSt}Hpt(){return this.gSt}HSt(){return this.wSt}N6(){return this.ySt}K2(){return this.S2}USt(){return this.Fmt.Dmt}zSt(){return!!this.owt}Mgt(){return this.zSt()||this.Qct.bL().$k()}xgt(){for(const t of this.$s)if(t.Nwt())return t.TN();return null}JSt(t){this.Fmt.Dmt=!!t,this.Eyt.hgt()}qSt(){return this.Fmt.GSt}nmt(){return!this.USt()&&!this.ef.kgt()&&!this.qSt()}$St(){return this.MSt||(this.MSt=new Map),this.MSt}XSt(){return this.xSt||(this.xSt=new Map),this.xSt}kSt(){const t=this.bSt;return e(this.$s,t),Ho.xor(this.fyt.apply(this.owt,t),this.wSt)}*CSt(){if((this.USt()||this.ef.kgt())&&(yield this),this.qSt()){const s=this.bSt;e(this.$s,s);let t=this.fyt.apply(this.owt,s);return Ho.Wo(t)&&(t=yield*t),Ho.xor(t,this.wSt)}return this.v_()}LSt(){const t=this.bSt,s=(e(this.$s,t),this.Qct.yL().p6());return Ho.xor(this.fyt.apply(s,t),this.wSt)}*PSt(){if((this.USt()||this.ef.kgt())&&(yield this),this.qSt()){let t=this.bSt,s=(e(this.$s,t),this.Qct.yL().p6()),i=this.fyt.apply(s,t);return Ho.Wo(i)&&(i=yield*i),Ho.xor(i,this.wSt)}return this.v_()}TSt(){return!0}*_St(){return(this.USt()||this.ef.kgt())&&(yield this),!0}KSt(){return this._wt?2<=this._wt.v6().VSt()?this._wt.x6():this._wt:2<=this.Qct.bL().VSt()?this.Qct.pL():this.Qct}RSt(){const t=this.bSt,s=(e(this.$s,t),this.fyt.apply(this.KSt(),t));return this.Qct.iyt(),s}*ASt(){if((this.USt()||this.ef.kgt())&&(yield this),this.qSt()){const s=this.bSt;e(this.$s,s);let t=this.fyt.apply(this.KSt(),s);return Ho.Wo(t)&&(t=yield*t),this.Qct.iyt(),t}return this.v_()}FSt(){const i=this.$s,e=this.bSt,t=this.Qct.RL();for(let t=0,s=i.length;t<s;++t){const n=i[t];n.Lwt()||(e[t]=n.Qs(0))}return t.fft()?this.YSt(t):this.ZSt(t)}*DSt(){return(this.USt()||this.ef.kgt())&&(yield this),this.FSt()}QSt(i){const e=this.$s,n=this.bSt;for(let t=0,s=e.length;t<s;++t){const r=e[t];r.Lwt()&&(n[t]=r.Qs(i))}}YSt(i){const t=this.Qct,e=t.Vz(),n=t.Gwt(),r=this.Iwt,h=0<=r,o=t.PL(),a=this.vSt,l=this.bSt,u=this.fyt,c=this.wSt,f=this.SSt&&!this.mSt;i.cft();for(let s=0,t=o.length;s<t;++s){const d=o[s];a&&this.QSt(s);let t;if(h){const p=e?d.TN().Ewt(n):0;t=u.apply(d.xnt()[r+p].p6(),l)}else t=u.apply(d.p6(),l);Ho.xor(t,c)?i.yft(d):f&&i.wft(d)}return t.tbt(!0),i.Sft(!1),t.iyt(),i.dft()}ZSt(t){let s=this.Qct,i=s.Vz(),e=s.Gwt(),n=s.LN(),r=this.Iwt,h=0<=r,o=this.vSt,a=this.bSt,l=this.fyt,u=this.wSt,c=this.SSt&&!this.mSt,f=t.bft(),d=t.vft(),p=c&&!this.Eyt.vgt(this),m=p?d:f,g=0,y=!1;for(let s=0,t=m.length;s<t;++s){const S=m[s];o&&this.QSt(s);let t;if(h){const b=i?S.TN().Ewt(e):0;t=l.apply(S.xnt()[r+b].p6(),a)}else t=l.apply(S.p6(),a);Ho.xor(t,u)?(y=!0,p?(f.push(S),n&&S.sbt()):(m[g]=S,n&&S.ibt(g),++g)):p?(m[g]=S,n&&S.ebt(g),++g):c&&(d.push(S),n)&&S.nbt()}Ho.Lh(m,g),n&&s.rbt(p,g);const w=y;return p&&!y&&(y=this.hbt(f)),s.tbt(w||c),c?y:t.dft()}hbt(i){const t=this.Qct,e=t.Vz(),n=t.Gwt(),r=this.vSt,h=this.Iwt,o=0<=h,a=this.bSt,l=this.fyt,u=this.wSt;for(let s=0,t=i.length;s<t;++s){const c=i[s];r&&this.QSt(s);let t;if(o){const f=e?c.TN().Ewt(n):0;t=l.apply(c.xnt()[h+f].p6(),a)}else t=l.apply(c.p6(),a);if(Ho.xor(t,u))return!0}return!1}obt(t,s){return this.$s[t].Qs(s)}Upt(){const t=this.$s;if(t.length)return t[0].Jwt();throw new Error("no parameters")}mq(){if(!this.MSt||!this.MSt.size)return null;const s={};for(const[i,e]of this.MSt.entries()){let t=e;"collmemory"===i&&(t=[...e.entries()].map(t=>[t[0].BN(),t[1].BN(),t[2]])),s[i]=t}return{ex:s}}gq(t){if(this.MSt&&(this.MSt.clear(),this.MSt=null),t){const s=this.ef,i=t.ex;if(i){const e=this.$St();e.clear();for(const[n,r]of Object.entries(i)){let t=r;"collmemory"===n&&(t=Ho.hr(Ho.Xu,r.map(t=>[s.dO(t[0]),s.dO(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),e.set(n,t)}}}}}}{let n=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Qs(0)};n;const Jo=self.Os,qo=[],$o=function(){},Xo=function*(){};Jo.Hmt=class extends Jo.nr{constructor(t,s,i){super();const e=(this.Eyt=t).NO(),n=(this.ef=e,this.Hg=i,this.yU=4<=s.length?s[3]:-1,this.abt=5<=s.length?255&s[4]:0,this.lbt=5<=s.length?s[4]>>8:0,this.fyt=null,this.Qct=null,this._wt=null,this.Iwt=-1,this.owt=null,this.ubt="",this.cbt=null,this.fbt=null,this.v_=$o,this.s1t=$o,this.$s=[],this.bSt=[],this.vSt=!1,this.MSt=null,this.xSt=null,-3===s[0]),r=n?s[2]:s[5];if(this.Fmt=e.M4()||n?{Dmt:r[0],GSt:r[1],index:r[2]}:null,-1===s[0])this.owt=e.i7(),this.fyt=e.cyt(s[1]);else if(-2===s[0])this.ubt=s[1];else if(n){const h=e.cyt(s[1]);this.fyt=h,this.v_=this.dbt,this.s1t=this.pbt,this.lbt|=8}else this.Qct=e.wz(s[0]),4&this.lbt?(this.ubt=s[1],this.cbt=e.wz(s[2])):(s[2]&&(this._wt=this.Qct.Gnt(s[2]),this.Iwt=this.Qct.tit(s[2])),this.fyt=e.cyt(s[1]));if(7===s.length){const o=s[6];for(const a of o)this.$s.push(Jo.Owt.qM(this,a,this.$s.length)),this.bSt.push(0)}0===this.$s.length&&(this.$s=qo,this.bSt=qo),this.mbt()&&(this.Eyt.Kmt(),this.Eyt.lgt()),this.Eyt.YF().cdt(this)}static qM(t,s,i){return Jo.hr(Jo.Hmt,t,s,i)}rdt(){for(const t of this.$s)t.rdt(),t.Lwt()&&(this.vSt=!0);if(this.owt)this.ISt(),this.s1t=this.CSt;else if(this.ubt)4&this.lbt?this.gbt():this.ybt(),this.ubt="",this.cbt=null;else if(this.v_===this.dbt){const s=this.fyt,i=this.ef.YF().Cdt(this.Eyt);this.fyt=s.bind(null,this.ef.Jk(),i)}else this._wt?this.Wgt()?(this.v_=this.wbt,this.s1t=this.Sbt):(this.v_=this.bbt,this.s1t=this.vbt):this.Qct.bL().$k()?(this.ESt(),this.s1t=this.PSt):this.K2()?(this.v_=this.Mbt,this.s1t=this.xbt):this.Wgt()?(this.v_=this.Gbt,this.s1t=this.Tbt):this._bt()?(this.v_=this.Ibt,this.s1t=this.Cbt):this.$s.length?this.$s.every(t=>t.Lwt())?(this.v_=this.Ebt,this.s1t=this.Pbt):this.vSt?(this.v_=this.Rbt,this.s1t=this.Abt):this.$s.every(t=>t.apt())?(n(this.$s,this.bSt),this.v_=this.Fbt,this.s1t=this.Dbt):(this.v_=this.Obt,this.s1t=this.kbt):(this.v_=this.Fbt,this.s1t=this.Dbt)}ISt(){const t=this.owt,s=this.owt;this.OSt(t,s,this.kSt)}ESt(){const t=this.Qct.bL(),s=this.Qct.yL().p6();this.OSt(t,s,this.LSt)}ybt(){const t=this.Eyt.YF(),i=t.ZF(this.ubt);if(i.$u()){const e=0!=(2&this.lbt);this.fbt=i.sD();let s=[...new Set([...this.Eyt.iD(),...this.fbt.iD()])];s=t.gdt(s);const n=!i.hD()&&this.Lbt()?{ryt:!0}:null;if(this.v_=Jo.Fpt.prototype.Qgt.bind(this.fbt,s,this.$s,e,n),this.ef.M4()){const r=this;this.s1t=function*(){(r.USt()||r.ef.kgt())&&(yield r);const t=yield*r.fbt.ayt(s,r.$s,e,n);return t}}else this.s1t=Xo}else this.v_=$o,this.s1t=Xo}gbt(){const r=this.Eyt.YF(),h=r.Odt(this.cbt,this.ubt);if(h.$u()){const o=0!=(2&this.lbt);this.fbt=h.sD();let s=[...new Set([...this.Eyt.iD(),...this.fbt.iD(),this.Qct,h.TN()])],t=(s=r.gdt(s),!this.Qct.Vz()&&!h.TN().Vz()),i=!this.Qct.Vz()&&h.TN().Vz(),e=this.Qct.Vz(),n=null;if(!h.hD()&&this.Lbt()&&((n=n||{}).ryt=!0),!i&&o||((n=n||{}).tyt=this.Qct,n.syt=h.TN()),t||i||e&&!h.Nyt()?this.v_=Jo.Fpt.prototype.Qgt.bind(this.fbt,s,this.$s,o,n):e&&(this.v_=Jo.ppt.prototype.Vyt.bind(h,s,this.$s)),this.ef.M4()){const a=this;t||i||e&&!h.Nyt()?this.s1t=function*(){(a.USt()||a.ef.kgt())&&(yield a);const t=yield*a.fbt.ayt(s,a.$s,o,n);return t}:e&&(this.s1t=function*(){(a.USt()||a.ef.kgt())&&(yield a);const t=yield*h.Uyt(s,a.$s);return t})}else this.s1t=Xo}else this.v_=$o,this.s1t=Xo}OSt(t,s,i){const e=this.fyt,n=this.$s;if(0===n.length)this.v_=t.cwt(e,s);else if(1===n.length){const r=n[0];if(r.apt())this.v_=t.NSt(e,s,r.Qs(0));else{const h=t.cwt(e,s);this.v_=function(){return h(r.Qs(0))}}}else if(2===n.length){const o=n[0],a=n[1];if(o.apt()&&a.apt())this.v_=t.BSt(e,s,o.Qs(0),a.Qs(0));else{const l=t.cwt(e,s);this.v_=function(){return l(o.Qs(0),a.Qs(0))}}}else if(3===n.length){const u=n[0],c=n[1],f=n[2];if(u.apt()&&c.apt()&&f.apt())this.v_=t.WSt(e,s,u.Qs(0),c.Qs(0),f.Qs(0));else{const d=t.cwt(e,s);this.v_=function(){return d(u.Qs(0),c.Qs(0),f.Qs(0))}}}else this.v_=i}Yz(){return this.yU}Wgt(){return 0!=(8&this.lbt)}Bgt(){return 0!=(16&this.lbt)}_bt(){return 1===this.abt}K2(){return 2===this.abt}mbt(){return 0!=(1&this.lbt)}Qmt(){return this.Wgt()||this.Bgt()}TN(){return this.Qct}jSt(){return this._wt?this._wt.v6():this.Qct?this.Qct.bL():null}qwt(){const t=this.jSt();return t?t.VSt():1}sD(){return this.Eyt}Lbt(){let t=this.Eyt;do{if(t instanceof Jo.ppt&&t.hD())return!0}while(t=t._dt());return!1}NO(){return this.ef}wF(){return this.Hg}Igt(){return this.Fmt.index}USt(){return this.Fmt.Dmt}JSt(t){this.Fmt.Dmt=!!t,this.Eyt.hgt()}qSt(){return this.Fmt.GSt}nmt(){return!this.USt()&&!this.ef.kgt()&&!this.qSt()}$St(){return this.MSt||(this.MSt=new Map),this.MSt}XSt(){return this.xSt||(this.xSt=new Map),this.xSt}kSt(){const t=this.bSt;return n(this.$s,t),this.fyt.apply(this.owt,t)}*CSt(){if((this.USt()||this.ef.kgt())&&(yield this),this.qSt()){const t=this.bSt,s=(n(this.$s,t),yield*this.fyt.apply(this.owt,t));return s}return this.v_()}LSt(){const t=this.bSt;return n(this.$s,t),this.fyt.apply(this.Qct.yL().p6(),t)}*PSt(){if((this.USt()||this.ef.kgt())&&(yield this),this.qSt()){const t=this.bSt,s=(n(this.$s,t),yield*this.fyt.apply(this.Qct.yL().p6(),t));return s}return this.v_()}Fbt(){const i=this.bSt,e=this.Qct.RL().PL();for(let t=0,s=e.length;t<s;++t)this.fyt.apply(e[t].p6(),i)}*Dbt(){if((this.USt()||this.ef.kgt())&&(yield this),this.qSt()){const i=this.bSt,e=this.Qct.RL().PL();for(let t=0,s=e.length;t<s;++t)yield*this.fyt.apply(e[t].p6(),i)}else this.Fbt()}Obt(){const i=this.bSt,e=(n(this.$s,i),this.Qct.RL().PL());for(let t=0,s=e.length;t<s;++t)this.fyt.apply(e[t].p6(),i)}*kbt(){if((this.USt()||this.ef.kgt())&&(yield this),this.qSt()){const i=this.bSt,e=(n(this.$s,i),this.Qct.RL().PL());for(let t=0,s=e.length;t<s;++t)yield*this.fyt.apply(e[t].p6(),i)}else this.Obt()}Ebt(){const e=this.$s,n=this.bSt,s=this.fyt,r=this.Qct.RL().PL();for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].Qs(i);s.apply(h.p6(),n)}}*Pbt(){if((this.USt()||this.ef.kgt())&&(yield this),this.qSt()){const e=this.$s,n=this.bSt,s=this.fyt,r=this.Qct.RL().PL();for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].Qs(i);yield*s.apply(h.p6(),n)}}else this.Ebt()}Rbt(){const e=this.$s,n=this.bSt,s=this.fyt,r=this.Qct.RL().PL();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.Lwt()||(n[t]=i.Qs(0))}for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.Lwt()&&(n[t]=o.Qs(i))}s.apply(h.p6(),n)}}*Abt(){if((this.USt()||this.ef.kgt())&&(yield this),this.qSt()){const e=this.$s,n=this.bSt,s=this.fyt,r=this.Qct.RL().PL();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.Lwt()||(n[t]=i.Qs(0))}for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.Lwt()&&(n[t]=o.Qs(i))}yield*s.apply(h.p6(),n)}}else this.Rbt()}Ibt(){const e=this.$s,n=this.bSt,s=this.fyt,t=this.Qct,i=t.Nbt(),r=t.RL().PL();i.Bbt(s);for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].Qs(i);s.apply(h.p6(),n)}i.Wbt(s)}*Cbt(){if((this.USt()||this.ef.kgt())&&(yield this),this.qSt()){const e=this.$s,n=this.bSt,s=this.fyt,t=this.Qct,i=t.Nbt(),r=t.RL().PL();i.Bbt(s);for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].Qs(i);yield*s.apply(h.p6(),n)}i.Wbt(s)}else this.Ibt()}jbt(){return this._wt?2<=this._wt.v6().VSt()?this._wt.x6():this._wt:2<=this.Qct.bL().VSt()?this.Qct.pL():this.Qct}Mbt(){const t=this.bSt;return n(this.$s,t),this.fyt.apply(this.jbt(),t)}*xbt(){if((this.USt()||this.ef.kgt())&&(yield this),this.qSt()){const s=this.bSt;n(this.$s,s);let t=this.fyt.apply(this.jbt(),s);return Jo.Wo(t)?yield*t:t}return this.Mbt()}bbt(){const t=this.Qct,s=t.Vz(),e=t.Gwt(),n=this.$s,r=this.vSt,h=this.bSt,o=this.fyt,a=this.Iwt,l=t.RL().PL();for(let t=0,s=n.length;t<s;++t){const i=n[t];i.Lwt()||(h[t]=i.Qs(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(r)for(let t=0,s=n.length;t<s;++t){const f=n[t];f.Lwt()&&(h[t]=f.Qs(i))}const c=s?u.TN().Ewt(e):0;o.apply(u.xnt()[a+c].p6(),h)}}*vbt(){if((this.USt()||this.ef.kgt())&&(yield this),this.qSt()){const t=this.Qct,s=t.Vz(),e=t.Gwt(),n=this.$s,r=this.vSt,h=this.bSt,o=this.fyt,a=this.Iwt,l=t.RL().PL();for(let t=0,s=n.length;t<s;++t){const i=n[t];i.Lwt()||(h[t]=i.Qs(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(r)for(let t=0,s=n.length;t<s;++t){const f=n[t];f.Lwt()&&(h[t]=f.Qs(i))}const c=s?u.TN().Ewt(e):0;yield*o.apply(u.xnt()[a+c].p6(),h)}}else this.bbt()}Gbt(){const e=this.$s,n=this.bSt,s=this.fyt,r=this.Qct.RL().PL(),h=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].Qs(i);h.push(s.apply(o.p6(),n))}return Promise.all(h)}*Tbt(){if((this.USt()||this.ef.kgt())&&(yield this),this.qSt()){const e=this.$s,n=this.bSt,s=this.fyt,r=this.Qct.RL().PL(),h=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].Qs(i);h.push(yield*s.apply(o.p6(),n))}return Promise.all(h)}return this.Gbt()}wbt(){const t=this.Qct,s=t.Vz(),e=t.Gwt(),n=this.$s,r=this.bSt,h=this.fyt,o=this.Iwt,a=t.RL().PL(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=n.length;t<s;++t)r[t]=n[t].Qs(i);const c=s?u.TN().Ewt(e):0;l.push(h.apply(u.xnt()[o+c].p6(),r))}return Promise.all(l)}*Sbt(){if((this.USt()||this.ef.kgt())&&(yield this),this.qSt()){const t=this.Qct,s=t.Vz(),e=t.Gwt(),n=this.$s,r=this.bSt,h=this.fyt,o=this.Iwt,a=t.RL().PL(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=n.length;t<s;++t)r[t]=n[t].Qs(i);const c=s?u.TN().Ewt(e):0;l.push(yield*h.apply(u.xnt()[o+c].p6(),r))}return Promise.all(l)}return this.wbt()}async dbt(){try{await this.fyt()}catch(t){console.error(`Unhandled exception running script %c${this.Eyt.u$().$c()}, event ${this.Eyt.fgt()}, action ${this.Igt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),Jo.jpt.pyt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Jo.jpt.myt())}}*pbt(){return(this.USt()||this.ef.kgt())&&(yield this),this.dbt()}mq(){return this.MSt&&this.MSt.size?{ex:Jo.Lo(this.MSt)}:null}gq(t){if(this.MSt&&(this.MSt.clear(),this.MSt=null),t){const s=t.ex;s&&(this.MSt=Jo.No(s))}}}}{let d=function(t){return t instanceof o?w.u5(t):t.HW()},u=function(t){return d(t).wO()},n=function(t){return w.u5(t)},m=function(t){return t instanceof a?w.u5(t):t},s=function(t){return t instanceof c?w.u5(t):t},C=function(t,s,i,e){const n=s.BN(),r=i.BN();n<r?t.Set(s,i,e):t.Set(i,s,e)},E=function(t,s,i){const e=s.BN(),n=i.BN();e<n?t.Qu(s,i):t.Qu(i,s)},P=function(t,s){t.tc(s)},R=function(t,s,i){const e=s.BN(),n=i.BN();return e<n?t.Qs(s,i):t.Qs(i,s)},e=function(t,s,i,e){if(!s)return!1;const n=0!==i||0!==e,r=t.wO(),h=w.TF(),o=w.bdt(),a=o.sD().Eft(),l=o.TN(),u=o.HSt(),c=s.RL(),f=l!==s;_=s,T=f&&!u;let d,p=0,m=0,g=I=!1;c.fft()?(S._(r.Q4()),S.offset(i,e),h.Vbt(r.SO(),s,S,b),d=b):!a||w.Hbt()&&!c.vft().length&&c.bft().length?d=c.bft():(d=c.vft(),I=!0),n&&(p=r.av(),m=r.cv(),r.X4(i,e),r.U4());for(const y of d)if(h.hk(t,y)){if(g=!0,u)break;f&&D.add(y)}return n&&(r.z4(p,m),r.U4()),A.Nh(b),g},i=function(t){const s=w.eD().Eft(),i=_.RL(),e=i.bft(),n=i.vft();i.fft()?(i.Gft(D),s&&(A.Nh(n),i.Tft(D,_.PL()))):s?I?i._ft(D):(i.Tft(D,e),i.Gft(D)):i.Gft(D),_.iyt()},v=function(t,s){T&&(s&&i(),D.clear(),_=null,T=!1)},r=function(t,s){const i=w.dO(s);if(i){const e=t.RL();if(e.fft()||e.bft().includes(i))if(t.Vz()){if(i.TN().Ubt(t))return e.Cft(i),t.iyt(),!0}else if(i.TN()===t)return e.Cft(i),t.iyt(),!0}return!1},h=function(t,n){const r=t.RL();if(r.fft()){r.Sft(!1),r.cft();const i=t.PL();for(let t=0,s=i.length;t<s;++t){const e=i[t];e.BN()===n?r.wft(e):r.yft(e)}return t.iyt(),!!r.bft().length}{let i=r.bft(),e=0;for(let t=0,s=i.length;t<s;++t){const h=i[t];(i[e]=h).BN()===n?r.wft(h):++e}return A.Lh(i,e),t.iyt(),!!i.length}},A=(d,u,n,m,s,C,E,P,R,e,i,v,r,h,self.Os),l=new A.Vo,M={},x={},G={},w=null,o=(A.zbt=function(t){w=t},self.xN),a=self.wL,c=self.l5,S=(x.Jbt=function(t,s){return A.compare(this.wO().av(),t,s)},G.Jbt=function(t,s){return A.compare(this.x,t,s)},x.qbt=function(t,s){return A.compare(this.wO().cv(),t,s)},G.qbt=function(t,s){return A.compare(this.y,t,s)},x.$bt=function(){return this.wO().eB()},G.$bt=function(){return this.iB()},M.Xbt=function(){const t=u(this),s=t.tO(),i=t.Q4();return i.Ml()<0||i.xl()<0||i.bl()>s.nm()||i.vl()>s.gm()},M.Kbt=function(i,e,n){const t=m(this),s=t.RL(),r=s.PL();if(!r.length)return!1;let h=r[0],o=h.wO(),a=h,l=A.Gr(o.av(),o.cv(),e,n);for(let t=1,s=r.length;t<s;++t){h=r[t],o=h.wO();const u=A.Gr(o.av(),o.cv(),e,n);(0===i&&u<l||1===i&&u>l)&&(l=u,a=h)}return s.Cft(a),!0},x.lv=function(t){const s=this.wO();s.av()!==t&&(s.lv(t),s.U4())},G.lv=function(t){this.x=+t},x.dv=function(t){const s=this.wO();s.cv()!==t&&(s.dv(t),s.U4())},G.dv=function(t){this.y=+t},x.Ybt=function(t,s){const i=this.wO();i.Zbt(t,s)||(i.z4(t,s),i.U4())},G.Ybt=function(t,s){this.setPosition(t,s)},M.Qbt=function(t,s){if(t=m(t)){const i=d(this),e=t.CL(i);if(e){const[n,r]=e.tvt(s),h=i.wO();h.av()===n&&h.cv()===r||(h.z4(n,r),h.U4())}}},M.svt=function(t){if(0!==t){const s=u(this);s.X4(s.ivt()*t,s.evt()*t),s.U4()}},x.nvt=function(t,s){if(0!==s){const i=this.wO();t=A.yr(t),i.X4(Math.cos(t)*s,Math.sin(t)*s),i.U4()}},G.nvt=function(t,s){0!==s&&(t=A.yr(t),this.q4(Math.cos(t)*s,Math.sin(t)*s))},x.av=function(){return this.wO().av()},G.av=function(){return this.x},x.cv=function(){return this.wO().cv()},G.cv=function(){return this.y},M.SD=function(){return w.SD(d(this))},x.rvt=function(t,s){return A.compare(this.wO().nm(),t,s)},G.rvt=function(t,s){return A.compare(this.width,t,s)},x.hvt=function(t,s){return A.compare(this.wO().gm(),t,s)},G.hvt=function(t,s){return A.compare(this.height,t,s)},x.fm=function(t){const s=this.wO();s.nm()!==t&&(s.fm(t),s.U4())},G.fm=function(t){this.width=t},x.rm=function(t){const s=this.wO();s.gm()!==t&&(s.rm(t),s.U4())},G.rm=function(t){this.height=t},x.JI=function(t,s){const i=u(this);i.nm()===t&&i.gm()===s||(i.JI(t,s),i.U4())},G.JI=function(t,s){this.qL(t,s)},x.nm=function(){return this.wO().nm()},G.nm=function(){return this.width},x.gm=function(){return this.wO().gm()},G.gm=function(){return this.height},M.ovt=function(){return u(this).Q4().bl()},M.avt=function(){return u(this).Q4().vl()},M.lvt=function(){return u(this).Q4().Ml()},M.uvt=function(){return u(this).Q4().xl()},M.cvt=function(){const t=u(this).Q4();return(t.bl()+t.Ml())/2},M.fvt=function(){const t=u(this).Q4();return(t.vl()+t.xl())/2},M.dvt=function(t,s){return A._r(u(this).YL(),A.yr(s))<=A.yr(t)},M.pvt=function(t){return A.Cr(u(this).YL(),A.yr(t))},M.mvt=function(t,s){const i=A.yr(t),e=A.yr(s),n=u(this).YL(),r=!A.Cr(e,i);return r?!(!A.Cr(n,i)&&A.Cr(n,e)):A.Cr(n,i)&&!A.Cr(n,e)},x.KL=function(t){const s=this.wO(),i=A.gr(A.yr(t));isNaN(i)||s.YL()===i||(s.KL(i),s.U4())},G.KL=function(t){this.Z4=t},M.gvt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.KL(s.YL()+A.yr(t)),s.U4()}},M.yvt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.KL(s.YL()-A.yr(t)),s.U4()}},M.wvt=function(t,s){const i=u(this),e=i.YL(),n=A.Ir(e,A.yr(s),A.yr(t));isNaN(n)||e===n||(i.KL(n),i.U4())},M.Svt=function(t,s,i){const e=u(this),n=e.YL(),r=s-e.av(),h=i-e.cv(),o=Math.atan2(h,r),a=A.Ir(n,o,A.yr(t));isNaN(a)||n===a||(e.KL(a),e.U4())},M.bvt=function(t,s){const i=u(this),e=i.YL(),n=t-i.av(),r=s-i.cv(),h=Math.atan2(r,n);isNaN(h)||e===h||(i.KL(h),i.U4())},x.YL=function(){return A.Sr(this.wO().YL())},G.YL=function(){return this.Z4},M.vvt=function(t,s){return A.compare(A.Vr(100*u(this).vP(),6),t,s)},x.O5=function(){return this.wO().O5()},G.O5=function(){return this.isVisible},M.F5=function(t){const s=u(this);t=2===t?!s.O5():0!==t,s.O5()!==t&&(s.F5(t),w.TO())},M.xP=function(t){const s=A.mr(t/100,0,1),i=u(this);if(i.$B()){if(i.zrt().Mvt()===s)return}else if(i.vP()===s)return;i.xP(s),w.TO()},M.xvt=function(t){l.Sa(t);const s=u(this);s.rB().ca(l)||(s.hB(l),w.TO())},M.TP=function(){const t=u(this).rB();return A.zr(t.ea(),t.na(),t.ra(),t.oa())},M.vP=function(){return A.Vr(100*u(this).vP(),6)},M.Gvt=function(t){return!!(t=s(t))&&u(this).SO()===t},M.Tvt=function(i){const t=m(this),s=t.RL(),e=s.PL();if(!e.length)return!1;let n=e[0],r=n;for(let t=1,s=e.length;t<s;++t){const h=e[t],o=h.wO(),a=r.wO(),l=o.SO().wF(),u=a.SO().wF();0===i?(u<l||l===u&&o.bO()>a.bO())&&(r=h):(l<u||l===u&&o.bO()<a.bO())&&(r=h)}return s.Cft(r),!0},x._vt=function(t,s,i){const e=this.wO(),n=0===t?e.pv():e.Y4();return A.compare(n,s,i)},G._vt=function(t,s,i){const e=0===t?this.Q5:this.K4;return A.compare(e,s,i)},x.Ivt=function(){this.wO().aB()},G.Ivt=function(){this.oB()},x.Cvt=function(){this.wO().uB()},G.Cvt=function(){this.lB()},M.Evt=function(t){(t=s(t))&&u(this).fB(t)},M.Pvt=function(t,s){const i=0===t;if(s=m(s)){const e=d(this),n=s.Rvt(e);n&&e.wO().pB(n,i)}},x.mv=function(t){const s=this.wO();s.pv()!==t&&(s.mv(t),w.TO())},G.mv=function(t){this.Q5=t},M.Avt=function(){return u(this).SO().wF()},M.Fvt=function(){return u(this).SO().$c()},x.Dvt=function(){return this.wO().bO()},G.Dvt=function(){return this.zIndex},x.Ovt=function(){return this.wO().pv()},G.Ovt=function(){return this.Q5},x.kvt=function(){return this.wO().Y4()},G.kvt=function(){return this.K4},M.Lvt=function(t){const s=d(this),i=s.TN().HL()._nt(t);if(i){const e=i.wF(),n=s.wO().V4();return n.P6(e)}},M.Nvt=function(t,s){const i=d(this),e=i.TN().HL()._nt(s);if(e){const n=e.wF(),r=1===t,h=i.wO().V4();h.P6(n)!==r&&(h.R6(n,r),h.A6(),w.TO())}},M.Bvt=function(t,s,i){const e=d(this),n=e.TN().HL()._nt(t);if(n){s=Math.floor(s);const r=n.sG().eG(s);if(r){"color"===r?(l.Sa(i),i=l):"percent"===r&&(i/=100);const h=n.wF(),o=e.wO().V4(),a=o.D6(h,s,i);a&&o.P6(h)&&w.TO()}}},A.hr(A.Rect)),F=[],b=[],T=!1,_=null,I=!1,D=new Set;M.Wvt=function(y){const t=m(this),w=(y=m(y),t.NO());if(w.jvt())return function*(w){if(w){let t=this.NO(),s=t.TF(),e=t.YF(),i=e.uD(),n=e.bdt(),r=n.TN(),h=n.$St(),o=n.XSt(),a=i.k8(),l=t.Gtt(),u=l-1,c=a.eD(),f=i.L8(c),d=h.get("collmemory"),p=(d||(d=A.hr(A.Xu),h.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Nf().addEventListener("instancedestroy",t=>P(d,t.T6))),r.RL()),m=w.RL(),g=p.PL(),y=null;for(let t=0;t<g.length;++t){const S=g[t];m.fft()?(s.Vbt(S.wO().SO(),w,S.wO().Q4(),F),y=F,s.Vvt(S,w,y)):y=m.PL();for(let t=0;t<y.length;++t){const b=y[t];if(s.hk(S,b)||s.Hvt(S,b)){let t=R(d,S,b),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const v=!s||i<u;if(C(d,S,b,l),v){const M=c.O8(),x=(e.V8(M),r.RL()),G=w.RL();if(x.Sft(!1),G.Sft(!1),r===w){const T=x.bft();A.Nh(T),T.push(S),T.push(b),r.iyt()}else{const _=x.bft(),I=G.bft();A.Nh(_),A.Nh(I),_.push(S),I.push(b),r.iyt(),w.iyt()}yield*c.qgt(a,f),e.U8(M)}}else E(d,S,b)}A.Nh(F)}i.X8()}return!1}.call(t,y);if(y){let s=w.TF(),e=w.YF(),t=e.uD(),i=e.bdt(),n=i.TN(),r=i.$St(),h=i.XSt(),o=t.k8(),a=w.Gtt(),l=a-1,u=o.eD(),c=t.L8(u),f=r.get("collmemory"),d=(f||(f=A.hr(A.Xu),r.set("collmemory",f)),h.get("collisionCreatedDestroyCallback")||(h.set("collisionCreatedDestroyCallback",!0),w.Nf().addEventListener("instancedestroy",t=>P(f,t.T6))),n.RL()),p=y.RL(),m=d.PL(),g=null;for(let t=0;t<m.length;++t){const S=m[t];p.fft()?(s.Vbt(S.wO().SO(),y,S.wO().Q4(),F),g=F,s.Vvt(S,y,g)):g=p.PL();for(let t=0;t<g.length;++t){const b=g[t];if(s.hk(S,b)||s.Hvt(S,b)){let t=R(f,S,b),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const v=!s||i<l;if(C(f,S,b,a),v){const M=u.O8(),x=(e.V8(M),n.RL()),G=y.RL();if(x.Sft(!1),G.Sft(!1),n===y){const T=x.bft();A.Nh(T),T.push(S),T.push(b),n.iyt()}else{const _=x.bft(),I=G.bft();A.Nh(_),A.Nh(I),_.push(S),I.push(b),n.iyt(),y.iyt()}u.H8(o,c),e.U8(M)}}else E(f,S,b)}A.Nh(F)}t.X8()}return!1},M.Uvt=function(t){return t=m(t),e(d(this),t,0,0)},M.zvt=function(t,s,i){return t=m(t),e(d(this),t,s,i)},M.Jvt=function(){return!0},M.AB=function(){return u(this).AB()},M.Sq=function(){return u(this).Sq()},M.qvt=function(i,e){const t=m(this),s=(i=m(i),t.NO()),n=this.RL(),r=n.PL();if(0===r.length)return!1;let h=i.RL(),o=h.PL();if(h.fft()){const u=[...s.$vt(i)];0<u.length&&(o=o.concat(u))}if(0===o.length)return!1;const a=h.fft()?null:new Set(o),l=new Set;for(let t=0,s=r.length;t<s;++t){const c=r[t];if(1===e)for(const f of c.MB())f.Xvt(i)&&(null===a||a.has(f))&&l.add(f);else{let t;if(0===e){if(null===(t=c.SB()))continue}else t=c.vB();t.Xvt(i)&&(null===a||a.has(t))&&l.add(t)}}return 0!==l.size&&(h.Gft(l),i.iyt(),!0)},M.Kvt=function(i,e){const t=m(this),s=(i=m(i),t.NO()),n=t.RL(),r=n.PL();if(0===r.length)return!1;let h=i.RL(),o=h.PL();if(h.fft()){const u=[...s.$vt(i)];0<u.length&&(o=o.concat(u))}if(0===o.length)return!1;const a=h.fft()?null:new Set(o),l=new Set;for(let t=0,s=r.length;t<s;++t){const c=r[t];2!==e||c.Sq()||!c.Xvt(i)||null!==a&&!a.has(c)||l.add(c);for(const f of 0===e?c.children():c.IB())2===e&&f.Sq()||f.Xvt(i)&&(null===a||a.has(f))&&l.add(f)}return 0!==l.size&&(h.Gft(l),i.iyt(),!0)},M.Yvt=function(i,e,n){const t=m(this),s=(i=m(i),t.NO()),r=t.RL(),h=r.PL();if(0===h.length)return!1;let o=i.RL(),a=o.PL();if(o.fft()){const c=[...s.$vt(i)];0<c.length&&(a=a.concat(c))}if(0===a.length)return!1;const l=o.fft()?null:new Set(a),u=[];for(let t=0,s=h.length;t<s;++t){const f=h[t];if(0===e){const d=f._B(n);null!==d&&d.Xvt(i)&&(null===l||l.has(d))&&u.push(d)}else if(1===e)for(const p of f.children())if(p.Xvt(i)){if(0===n){null!==l&&!l.has(p)||u.push(p);break}--n}}return 0!==u.length&&(o.xft(u),i.iyt(),!0)},M.Zvt=function(t,s,i){const e=d(this);switch(t){case 0:default:return A.compare(e.GB(),s,i);case 1:return A.compare(e.Qvt(),s,i)}},M.EB=function(t,s,i,e,n,r,h,o,a,l){t=m(t);const u=d(this),c=w.Mdt().TN();for(const f of t.t2t(u,c)){if(!f.bL().hL())return;u.EB(f,{OB:s,LB:i,BB:e,jB:n,HB:r,qB:h,zB:o,XB:a,YB:l})}},M.PB=function(t){t=m(t);const s=d(this),i=w.Mdt().TN();for(const e of t.t2t(s,i))s.PB(e)},M.s2t=function(){const t=d(this);if(t.AB()){const s=t.SB();s.PB(t)}},M.i2t=function(){const t=d(this).SB();return t?t.BN():-1},M.e2t=function(){return d(this).GB()},M.n2t=function(){return d(this).Qvt()},M.r2t=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=u(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.i6(),i.U4()):i.t6(t,s)},M.n6=function(t,s,i,e,n,r,h,o){const a=u(this),l=a.n6(t,s,{mode:0===i?"absolute":"relative",x:e,y:n,Q5:r,u:h,v:o});l&&a.U4()},M.h2t=function(){const t=u(this);return t.h6()?t.o6().Nv():0},M.o2t=function(){const t=u(this);return t.h6()?t.o6().Bv():0},M.a2t=function(t){const s=u(this);t=2===t?!s.O5():0!==t,s.O5()!==t&&s.F5(t)},M.w6=function(t,s){this instanceof self.xN?this.Zj(t,s):this.w6(t,s)},M.l2t=function(t,s){this instanceof self.xN?this.Qj(t,""+s):this.l2t(t,""+s)},M.u2t=function(t){this instanceof self.xN?this.t8(t):this.u2t(t)},M.c2t=function(){this instanceof self.xN?this.Xj():this.m6()},M.f2t=function(){this instanceof self.xN?this.Kj():this.g6()},M.d2t=function(){return this instanceof self.xN?this.Yj():this.d2t()},M.p2t=function(t){this instanceof self.xN?this._setEnabled(0!==t):this.m2t(0!==t)},M.g2t=function(){return this instanceof self.xN?this.byt():this.y2t()},x.w2t=function(t,s,i){return A.compare(this.HW().Drt(t),s,i)},G.w2t=function(t,s,i){return A.compare(n(this).Drt(t),s,i)},x.S2t=function(t){return!!this.HW().Drt(t)},G.S2t=function(t){return!!n(this).Drt(t)},M.b2t=function(i,e){const n=m(this),t=n.RL(),r=t.PL();if(!r.length)return!1;let h=n.Vz(),o=null,a=0;for(let t=0,s=r.length;t<s;++t){const l=r[t],u=h?l.TN().xwt(n.Gwt()):0,c=l.Drt(u+e);(null===o||0===i&&c<a||1===i&&c>a)&&(a=c,o=l)}return t.Cft(o),!0},M.v2t=function(t){const s=m(this);return(s.NO().bdt().HSt()?h:r)(s,t)},M.xW=function(t){const s=new Set(A.Qh(t)),i=d(this).$N();return s.isSubsetOf(i)},M.M2t=function(){return d(this).x2t()},M.G2t=function(){return d(this).$N().size},M.T2t=function(t){return d(this)._2t(t)},M.I2t=function(t,s){const i=A.Qh(s);if(0!==i.length){const e=d(this),n=new Set(e.$N());if(0===t)for(const r of i)n.add(r);else if(1===t)for(const h of i)n.delete(h);e.KN(n)}},M.C2t=function(){w.AN(d(this))},M.E2t=function(){return!0},M.P2t=function(){return!0},x.R2t=function(t,s){this.HW().Ort(t,s)},G.R2t=function(t,s){n(this).Ort(t,s)},x.A2t=function(t,s){const i=this.HW(),e=i.Drt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Ort(t,e+s)},G.A2t=function(t,s){const i=n(this),e=i.Drt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Ort(t,e+s)},x.F2t=function(t,s){const i=this.HW(),e=i.Drt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Ort(t,e-s))},G.F2t=function(t,s){const i=n(this),e=i.Drt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Ort(t,e-s))},x.D2t=function(t,s){this.HW().Ort(t,s?1:0)},G.D2t=function(t,s){n(this).Ort(t,s?1:0)},x.O2t=function(t){const s=this.HW();s.Ort(t,0===s.Drt(t)?1:0)},G.O2t=function(t){const s=n(this);s.Ort(t,0===s.Drt(t)?1:0)},M.k2t=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=d(this);w.L2t(),i.PK("state"),i.xv(s,"state"),w.N2t("state",{B2t:!0})},M.W2t=function(){return JSON.stringify(d(this).Mv("state"))},M.j2t=function(){return d(this).TN().$c()},M.V2t=function(){let t=w.Sdt().r0t(),s=t.FL();for(const i of w.$vt(t))++s;return s},M.H2t=function(){return w.Sdt().r0t().RL().PL().length},x.jN=function(){return this.HW().jN()},G.jN=function(){return n(this).jN()},x.BN=function(){return this.HW().BN()},G.BN=function(){return n(this).BN()},M.z1t=function(t){const s=d(this);return t.toLowerCase()===w.YF().X1t(s)},M.ZN=function(t){const s=d(this);w.YF().ZN(s,t)},M.U2t=function(t){const s=m(this);return w.YF().v1t().z2t(s.RL().PL(),t),!0},M.J2t=function(){return d(this).HN()},A.q2t=function(t,s,i){const e=t[1],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.eX,w=s.Jnt,S=s.qnt,b=Object.assign({},M,2<=i?G:x);n&&(y.Jbt=b.Jbt,y.qbt=b.qbt,y.$bt=b.$bt,y.Xbt=b.Xbt,y.Kbt=b.Kbt,w.lv=b.lv,w.dv=b.dv,w.Ybt=b.Ybt,w.Qbt=b.Qbt,w.svt=b.svt,w.nvt=b.nvt,S.$2t=b.av,S.X2t=b.cv,S.wD=b.SD),r&&(y.rvt=b.rvt,y.hvt=b.hvt,w.fm=b.fm,w.rm=b.rm,w.JI=b.JI,S.K2t=b.nm,S.Y2t=b.gm,S.Z2t=b.ovt,S.Q2t=b.avt,S.tMt=b.lvt,S.sMt=b.uvt,S.iMt=b.cvt,S.eMt=b.fvt),h&&(y.nMt=b.dvt,y.rMt=b.pvt,y.mvt=b.mvt,w.KL=b.KL,w.gvt=b.gvt,w.yvt=b.yvt,w.wvt=b.wvt,w.Svt=b.Svt,w.bvt=b.bvt,S.hMt=b.YL),o&&(y.O5=b.O5,y.vvt=b.vvt,w.F5=b.F5,w.xP=b.xP,w.xvt=b.xvt,S.Opacity=b.vP,S.oMt=b.TP),a&&(y.Gvt=b.Gvt,y.Tvt=b.Tvt,y._vt=b._vt,w.Ivt=b.Ivt,w.Cvt=b.Cvt,w.Evt=b.Evt,w.Pvt=b.Pvt,w.mv=b.mv,S.Avt=b.Avt,S.Fvt=b.Fvt,S.Dvt=b.Dvt,S.Ovt=b.Ovt,S.kvt=b.kvt),l&&(y.Lvt=b.Lvt,w.Nvt=b.Nvt,w.Bvt=b.Bvt),d&&(y.Jvt=b.Jvt,y.AB=b.AB,y.Sq=b.Sq,y.qvt=b.qvt,y.Kvt=b.Kvt,y.Yvt=b.Yvt,y.Zvt=b.Zvt,w.EB=b.EB,w.PB=b.PB,w.s2t=b.s2t,S.i2t=b.i2t,S.e2t=b.e2t,S.n2t=b.n2t),p&&(w.r2t=b.r2t,w.n6=b.n6,S.h2t=b.h2t,S.o2t=b.o2t),u&&(y.O5=b.O5,w.F5=b.a2t,w.aMt=b.w6,w.lMt=b.l2t,w.uMt=b.u2t),c&&(y.cMt=b.d2t,w.fMt=b.c2t,w.dMt=b.f2t),f&&(y.$u=b.g2t,w.pMt=b.p2t),m&&(y.Wvt=b.Wvt,y.Uvt=b.Uvt,y.zvt=b.zvt,s.mMt=v),e||(y.w2t=b.w2t,y.S2t=b.S2t,y.b2t=b.b2t,y.v2t=b.v2t,y.xW=b.xW,w.R2t=b.R2t,w.A2t=b.A2t,w.F2t=b.F2t,w.D2t=b.D2t,w.O2t=b.O2t,w.I2t=b.I2t,y.E2t=b.E2t,y.P2t=b.P2t,w.C2t=b.C2t,w.k2t||(w.k2t=b.k2t),S.W2t||(S.W2t=b.W2t),S.V2t=b.V2t,S.H2t=b.H2t,S.gMt=b.jN,S.yMt=b.BN,S.j2t=b.j2t,S.M2t=b.M2t,S.G2t=b.G2t,S.T2t=b.T2t,y.z1t=b.z1t,w.ZN=b.ZN,w.U2t=b.U2t),g&&(S.J2t=b.J2t)}}{const Ko=self.Os;Ko.M1t=class extends Ko.nr{constructor(t){super(),this.Rft=t,this.df="",this.qA=-1,this.wMt="",this.SMt=!1,this.bMt=null,this.Wft=0,this.pmt=[],this.Jft=null,this.vMt=new Map,this.MMt=null,this.xMt=null,this.GMt=-1,this.Syt=null,this.TMt=null,this._Mt=!1}lr(){this.df="",this.qA=-1,this.wMt="",this.bMt=null,this.xMt=null,this.Syt=null,this.TMt=null,this.GMt=-1,Ko.Nh(this.pmt),this.Jft&&(this.Jft.clear(),this.Jft=null);for(const t of this.vMt.values())t.lr();this.vMt.clear(),this.MMt=null}ov(){const t=this.Rft,s=t.NO().jz(),i=t.Sdt(),e=(this.bMt=i.eD(),this.Wft=i.Zft()+1,t.dpt(this.bMt));e&&(this.xMt=e,this.Syt=e.kyt(),this.TMt=e.Oyt().map(t=>t.yet()),e.Wgt())&&(this.GMt=e.Wyt());for(const r of s){const h=r.RL();h.fft()&&!this.bMt.ugt(r)||(this.pmt.push(r),this.vMt.set(r,Ko.hr(Ko.IMt,h)))}const n=t.nD();this.Jft=0<n.size?n:null}CMt(t){this.df="timer",this.ov(),this.qA=this.Rft.NO().xD()+t}EMt(t){this.df="walltimer",this.ov(),this.qA=this.Rft.NO().TD()+t}PMt(t){this.df="signal",this.ov(),this.wMt=t.toLowerCase()}z2t(t,s){this.df="instance-signals",this.ov(),this.wMt=s.toLowerCase(),this.MMt=new Set(t)}RMt(t){this.df="promise",this.ov(),t.then(()=>this.j1t()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.j1t()})}AMt(){return"timer"===this.df}FMt(){return"walltimer"===this.df}B1t(){return"signal"===this.df}q1t(){return"instance-signals"===this.df}lpt(){return"promise"===this.df}W1t(){return this.wMt}DMt(){return this.SMt}j1t(){this.SMt=!0}$1t(t){this.MMt.delete(t),0===this.MMt.size&&this.j1t()}T1t(){return this.AMt()?this.qA<=this.Rft.NO().xD():this.FMt()?this.qA<=this.Rft.NO().TD():this.DMt()}OMt(t){t.qft(this.bMt,this.Wft);for(const[i,e]of this.vMt.entries()){const n=i.RL();e.qft(n)}this.Jft&&t.c0t([...this.Jft]);const s=this.xMt;s&&(s.Ygt(this.Syt),s.Oyt().map((t,s)=>t.tnt(this.TMt[s])),s.Wgt())&&s.jyt(this.GMt)}_1t(t){this.OMt(t),this.bMt.jgt(t),this.xMt&&this.xMt.Wgt()&&this.xMt.oyt(this.GMt),this.Rft.y1t(this.pmt),this._Mt=!0}async P1t(t){this.OMt(t);for(const s of this.bMt.Vgt(t))await this.Rft.NO().t1t(s);this.xMt&&this.xMt.Wgt()&&this.xMt.oyt(this.GMt),this.Rft.y1t(this.pmt),this._Mt=!0}I1t(){return this._Mt}oft(t){for(const s of this.vMt.values())s.oft(t);if("instance-signals"===this.df){for(const i of t)this.MMt.delete(i);0===this.MMt.size&&this.j1t()}}mq(){const t={},s={wt:this.df,t:this.qA,st:this.wMt,s:this.SMt,ev:this.bMt.Yz(),sm:this.pmt.map(t=>t.Yz()),dsm:this.Jft?[...this.Jft].map(t=>t.Yz()):null,sols:t};this.bMt.Cgt(this.Wft)&&(s.act=this.bMt.xdt(this.Wft).Yz());for(const[i,e]of this.vMt)t[i.Yz().toString()]=e.mq();return"instance-signals"===this.df&&(s.pi=[...this.MMt].map(t=>t.BN())),s}static upt(t,s){const i=t.NO(),e=t.Adt(s.ev);if(!e)return null;let n=0;if(s.hasOwnProperty("act")){const h=t.Ddt(s.act);if(!h)return null;n=h.wF()}const r=Ko.hr(Ko.M1t,t);r.qA=s.t,s.hasOwnProperty("wt")?r.df=s.wt:r.df=-1===r.qA?"signal":"timer",r.wMt=s.st,r.SMt=s.s,r.bMt=e,r.Wft=n;for(const o of s.sm){const a=i.I8(o);a&&r.pmt.push(a)}if(Array.isArray(s.dsm))for(const l of s.dsm){const u=i.I8(l);u&&(r.Jft||(r.Jft=new Set),r.Jft.add(u))}for(const[c,f]of Object.entries(s.sols)){const d=parseInt(c,10),p=i.I8(d);if(p){const m=Ko.hr(Ko.IMt,null);m.gq(t,f),r.vMt.set(p,m)}}if("instance-signals"===r.df){r.MMt=new Set;for(const g of s.pi){const y=i.dO(g);y&&r.MMt.add(y)}}return r}}}{const Yo=self.Os;Yo.IMt=class extends Yo.nr{constructor(t){super(),this.Qct=null,this.kMt=!0,this.N7=[],t&&(this.Qct=t.TN(),this.kMt=t.fft(),Yo.Vh(this.N7,t.bft()))}lr(){this.Qct=null,Yo.Nh(this.N7)}qft(t){t.Sft(this.kMt),Yo.Vh(t.bft(),this.N7)}oft(t){Yo.qh(this.N7,t)}mq(){return{sa:this.kMt,insts:this.N7.map(t=>t.BN())}}gq(t,s){const i=t.NO();this.kMt=!!s.sa,Yo.Nh(this.N7);for(const e of s.insts){const n=i.dO(e);n&&this.N7.push(n)}}}}{let l=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};l;const Zo=self.Os;Zo.LMt=class extends Zo.nr{constructor(t){super(),this.ef=t.runtime,this.dr=t.name??"",this.NMt=!!t.qk,this.BMt=!!t.WMt,this.jMt=!!t.Qk,this.VMt=!!t.HMt,this.UMt=!!t.sL,this.zMt=!!t.JMt,this.qMt=!!t.oL,this.$Mt=!!t.Yk,this.XMt=!!t.eL,this.KMt=t.YMt,this.ZMt=null,this.QMt=new Map,this.txt=new Map,this.sxt=new Map,this.ixt=new Map,this.nxt=t.rxt,this.hxt=null}lr(){this.ef=null}NO(){return this.ef}$c(){return this.dr}oxt(){}J1t(){return(2<=this.VSt()?this.hxt:this).constructor}VSt(){return this.KMt}axt(t=!1){let s=this.nxt;return t&&"function"!=typeof s&&2<=this.VSt()?globalThis.KW:s}$k(){return this.NMt}Kk(){return this.BMt}Zk(){return this.$Mt}nL(){return this.XMt}tL(){return this.jMt}Db(){return this.VMt}iL(){return this.UMt}hL(){return this.zMt}aL(){return this.qMt}cwt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.QMt.get(t);return i||(i=t.bind(s),this.QMt.set(t,i)),i}NSt(t,s,i){if(!s)throw new Error("missing 'this' binding");let e=l(this.txt,t),n=e.get(i);return n||(n=t.bind(s,i),e.set(i,n)),n}BSt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");let n=l(this.sxt,t),r=l(n,i),h=r.get(e);return h||(h=t.bind(s,i,e),r.set(e,h)),h}WSt(t,s,i,e,n){if(!s)throw new Error("missing 'this' binding");let r=l(this.ixt,t),h=l(r,i),o=l(h,e),a=o.get(n);return a||(a=t.bind(s,i,e,n),o.set(n,a)),a}lxt(t){if(!this.$k())throw new Error("must be single-global plugin");this.ZMt=t}mL(){if(this.$k())return this.ZMt;throw new Error("must be single-global plugin")}yL(){if(this.$k())return this.ZMt.yL();throw new Error("must be single-global plugin")}uxt(){const t=this.VSt(),s=(Zo.zk.cxt(this,t),this.axt(!0));if(s){if(this.hxt=new s,!(this.hxt instanceof self.Vk))throw new TypeError("plugin class must derive from IPlugin")}else this.hxt=new self.Vk;Zo.zk.fxt(t)}fL(){return this.hxt}}}{const Qo=self.Os;Qo.dxt=class extends Qo.LMt{constructor(t,s){super(t),this.pxt=s,this.mxt=0,this.gxt=new Map,this.yxt("elem-focused",t=>t.wxt()),this.yxt("elem-blurred",t=>{t&&t.Sxt()})}lr(){super.lr()}bxt(t){const s=this.mxt++;return this.gxt.set(s,t),s}vxt(t){this.gxt.delete(t)}yxt(t,i){this.ef.y4(this.pxt,t,t=>{const s=this.gxt.get(t.elementId);i(s,t)})}}}{const ta=self.Os;ta.Mxt=class extends ta.nr{constructor(t){super(),this.Qct=t,this.ef=t.NO(),this.xxt=t.bL()}lr(){this.Qct=null,this.ef=null,this.xxt=null}TN(){return this.Qct}NO(){return this.ef}bL(){return this.xxt}Q6(){return this.Qct.Q6()}oxt(){}tbt(t){}Bbt(t){}Wbt(t){}_$(t){}A$(){}E$(){}Q$(t){}Gxt(){}axt(){return null}Txt(t,s,i){const e=ta.hr(ta.Event,t,s);e._xt=this,i&&Object.assign(e,i),this.TN().OX(e)}}}{const sa=self.Os;sa.Ixt=class extends sa.nr{constructor(t,s){super(),this.Mi=t,this.pxt=s,this.Cxt=null,this.ef=t.NO(),this.Qct=this.Mi.TN(),this.Ext=this.Qct.Nbt(),this.SK=null,this.vK=null,this.G4=!1,this._4=!1,this.g0=null,this.gI=!1}lr(){this.gI=!0,this.Pxt(),this.Rxt(),this.SK=null,this.vK=null,this.g0&&(this.g0.lr(),this.g0=null),this.Mi=null,this.ef=null,this.Qct=null,this.Ext=null}ur(){return this.gI}HW(){return this.Mi}NO(){return this.ef}TN(){return this.Qct}bL(){return this.Ext.bL()}Nbt(){return this.Ext}Axt(){return this.Mi.pO()}f4(t){return this.ef.f4(t,this.Mi,null)}Fxt(t){return this.ef.Fxt(t,this.Mi,null)}m4(t){return this.ef.m4(t,this.Mi,null)}Dxt(t,s){return this.ef.Dxt(t,this.Mi,s)}Oxt(t,s){return this.ef.Oxt(t,this.Mi,s)}kxt(t){return this.ef.kxt(t)}Lxt(t,s){this.ef.y4(this.pxt,t,s)}Nxt(t){for(const[s,i]of t)this.Lxt(s,i)}Bxt(t,s){this.ef.hf(this.pxt,t,s)}Wxt(t,s){return this.ef.IO(this.pxt,t,s)}jxt(t,s){if(!this.ef.OF())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.pxt,handler:t,data:s,responseId:null});this.Bxt(t,s)}Vxt(t){if(!t)throw new Error("cannot set empty component id");this.Cxt=t}Hxt(){if(this.Cxt)return this.ef.R4(this.Cxt);throw new Error("wrapper extension component id not set")}F4(t,s){if(!this.Cxt)throw new Error("wrapper extension component id not set");this.ef.F4(this.Cxt,t,s)}Uxt(t){for(const[s,i]of t)this.F4(s,i)}y8(t,s){if(!this.Cxt)throw new Error("wrapper extension component id not set");this.ef.y8(this.Cxt,t,s)}w8(t,s){if(this.Cxt)return this.ef.w8(this.Cxt,t,s);throw new Error("wrapper extension component id not set")}PY(){}zxt(){}Jxt(){if(!this.G4){if(!this.SK)if(this.ef.M4()){const s=globalThis.C3Debugger,i=this.bL();this.SK=()=>{const t=performance.now();this.PY(),s.AddIndividualPluginTickTime(i,performance.now()-t)}}else this.SK=()=>this.PY();this.ef.Nf().addEventListener("tick",this.SK),this.G4=!0}}Pxt(){this.G4&&(this.ef.Nf().removeEventListener("tick",this.SK),this.G4=!1)}qxt(){return this.G4}$xt(){if(!this._4){if(!this.vK)if(this.ef.M4()){const s=globalThis.C3Debugger,i=this.bL();this.vK=()=>{const t=performance.now();this.zxt(),s.AddIndividualPluginTickTime(i,performance.now()-t)}}else this.vK=()=>this.zxt();this.ef.Nf().addEventListener("tick2",this.vK),this._4=!0}}Rxt(){this._4&&(this.ef.Nf().removeEventListener("tick2",this.vK),this._4=!1)}Xxt(){return this._4}Kxt(){return[]}Mv(){return null}xv(t){}Trt(t){}Rrt(t,s){}Tht(t,s,i){if(0!==s){const e=this.Trt(t);if("number"!=typeof e)throw new Error("expected number");this.Rrt(t,e+s,i)}}Yxt(t,s,i,e){}Zxt(t,...s){t.call(this,...s)}Qxt(t,...s){return t.call(this,...s)}axt(){return null}Txt(t,s,i){if(this.Mi.tGt()){const e=this.Axt(),n=sa.hr(sa.Event,t,s);n.T6=e,i&&Object.assign(n,i),e.dispatchEvent(n)}}Db(){return!1}}}{const ia=self.Os;ia.sGt=class extends ia.Ixt{constructor(t,s){super(t,s),this.xst=t.wO(),this.iGt=null,this.eGt=null}lr(){if(this.iGt){const t=this.ef.Nf();t.removeEventListener("renderercontextlost",this.iGt),t.removeEventListener("renderercontextrestored",this.eGt),this.iGt=null,this.eGt=null}this.xst=null,super.lr()}nGt(){this.rGt()}hGt(){}oGt(){}rGt(){if(!this.iGt){this.iGt=()=>this.P7(),this.eGt=()=>this.aGt();const t=this.ef.Nf();t.addEventListener("renderercontextlost",this.iGt),t.addEventListener("renderercontextrestored",this.eGt)}}P7(){this.hGt()}aGt(){this.oGt()}wO(){return this.xst}dit(){return!1}fit(){if(!this.dit())throw new Error("original size not known");const t=this.lGt();if(t)return t.nm()}mit(){if(!this.dit())throw new Error("original size not known");const t=this.lGt();if(t)return t.gm()}lGt(){return null}uGt(){const t=this.lGt();if(t){const s=t.IM();if(s)return[s.nm(),s.gm()]}return[100,100]}cGt(){const t=this.lGt();return t?t.xC():null}fGt(){const t=this.lGt();return t?t.dGt():null}pGt(){const t=this.lGt();return!!t&&t.mGt()}tvt(t){const s=this.Mi.wO();return[s.av(),s.cv(),s.Y4()]}Gxt(t,s,i){}gGt(t,s){}JJ(){return!0}}}{const ea=self.Os,na=ea.hr(ea.Rect);ea.yGt=class extends ea.sGt{constructor(t,s){super(t,s),this.wGt=this.bL().bxt(this),this.SGt=!0,this.bGt=!1,this.vGt=!1,this.MGt=-.2,this.xGt=ea.hr(ea.Rect,0,0,-1,-1);const i=this.ef.Ck();this.GGt=i.Fj(),this.TGt=i.Dj(),this._Gt=-1,this.IGt=-1,this.CGt=!1,this.Jxt()}lr(){this.bL().vxt(this.wGt),this.EGt("destroy"),this.wGt=-1,super.lr()}d6(){if(this.ef.OF())throw new Error("not valid in worker mode");return this.PGt("get-element")}EGt(t,s){(s=s||{}).elementId=this.wGt,this.Bxt(t,s)}PGt(t,s){return(s=s||{}).elementId=this.wGt,this.jxt(t,s)}RGt(t,s){return(s=s||{}).elementId=this.wGt,this.Wxt(t,s)}AGt(t){t=t||{};const s=this.wO();t.elementId=this.wGt,t.isVisible=s.O5(),t.htmlIndex=s.SO().Wj(),t.htmlZIndex=s.jj(),Object.assign(t,this.FGt()),this.SGt=!!t.isVisible,this.jxt("create",t),this.DGt(!0)}a2t(t){this.SGt!==(t=!!t)&&(this.SGt=t,this.EGt("set-visible",{isVisible:t}))}PY(){this.DGt(!1)}OGt(){const t=this.ef.Ck().Jj();return"Android"===ea.hi.oi&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}DGt(u){if(!this.HW().qj()){let t=this.wO(),s=t.SO(),i=t.Q4(),[e,n]=s.gN(i.bl(),i.vl()),[r,h]=s.gN(i.Ml(),i.xl()),o=this.ef.Ck(),a=o.Ak(),l=o.Dk();if(t.O5()&&s.O5())if(!this.OGt()&&(r<=0||h<=0||a<=e||l<=n))this.a2t(!1);else{na.set(e,n,r,h);const c=o.Fj(),f=o.Dj(),d=s.Wj(),p=t.jj();if(!u&&na.equals(this.xGt)&&this.GGt===c&&this.TGt===f&&this._Gt===d&&this.IGt===p)this.a2t(!0);else{this.xGt._(na),this.GGt=c,this.TGt=f,this._Gt=d,this.IGt=p,this.a2t(!0);let t=null;this.vGt&&(t=s.$j()+this.MGt),this.EGt("update-position",{left:Math.round(this.xGt.bl()),top:Math.round(this.xGt.vl()),width:Math.round(this.xGt.width()),height:Math.round(this.xGt.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this.a2t(!1)}}m6(){this.PGt("focus",{focus:!0})}g6(){this.PGt("focus",{focus:!1})}wxt(){this.bGt=!0}Sxt(){this.bGt=!1}d2t(){return this.bGt}w6(t,s){this.EGt("set-css-style",{prop:ea.Bo(t),val:s})}l2t(t,s){this.EGt("set-attribute",{name:t,val:s})}u2t(t){this.EGt("remove-attribute",{name:t})}kGt(){this.CGt||(this.CGt=!0,Promise.resolve().then(()=>{this.CGt=!1,this.EGt("update-state",this.FGt())}))}FGt(){}LGt(){return this.wGt}}}{const ra=self.Os,ha=self.C6;ra.NGt=class extends ra.nr{constructor(t){super(),this.ef=t.runtime,this.dr=t.name??"",this.BGt=ra.hr(ra.ec),this.WGt=ra.hr(ra.ec),this.KMt=t.YMt,this.nxt=t.rxt,this.jGt=null}lr(){this.WGt.lr(),this.BGt.lr(),this.ef=null}NO(){return this.ef}$c(){return this.dr}oxt(){}VSt(){return this.KMt}axt(t=!1){let s=this.nxt;return t&&"function"!=typeof s&&2<=this.VSt()?globalThis.e8:s}VGt(t){this.BGt.oc(t)}iY(){return this.BGt.ac()}Ez(t){this.WGt.oc(t)}Az(t){this.WGt.Qu(t)}PL(){return this.WGt.ac()}uxt(){const t=this.VSt(),s=(ra.zk.cxt(this,t),this.axt(!0));if(s){if(this.jGt=new s,!(this.jGt instanceof ha))throw new TypeError("behavior class must derive from IBehavior")}else this.jGt=new ha;ra.zk.fxt(t)}b6(){return this.jGt}}}{const oa=self.Os;oa.HGt=class extends oa.nr{constructor(t){super(),this.ef=t.NO(),this._wt=t,this.Qct=t.TN(),this.UGt=t.v6(),this.UGt.VGt(this.Qct)}lr(){this.ef=null,this._wt=null,this.Qct=null,this.UGt=null}oxt(){}G6(){return this._wt}TN(){return this.Qct}NO(){return this.ef}v6(){return this.UGt}}}{const aa=self.Os;aa.zGt=class extends aa.nr{constructor(t,s){super(),this.JGt=t,this.pxt=s,this.Mi=t._6(),this.ef=t.NO(),this._wt=t.G6(),this.Ext=this._wt.Nbt(),this.G4=!1,this._4=!1,this.m8=!1,this.g0=null}lr(){this.Pxt(),this.Rxt(),this.qGt(),this.g0&&(this.g0.lr(),this.g0=null),this.JGt=null,this.Mi=null,this.ef=null,this._wt=null,this.Ext=null}v6(){return this._wt.v6()}$Gt(){return this.JGt}_6(){return this.Mi}TN(){return this.Mi.TN()}wO(){return this.Mi.wO()}NO(){return this.ef}G6(){return this._wt}Nbt(){return this.Ext}Axt(){return this.JGt.Axt()}f4(t){return this.ef.f4(t,this.Mi,this._wt)}Fxt(t){return this.ef.Fxt(t,this.Mi,this._wt)}m4(t){return this.ef.m4(t,this.Mi,this._wt)}XGt(){}PY(){}zxt(){}KGt(){}Jxt(){this.G4||(this.ef.l8(this),this.G4=!0)}Pxt(){this.G4&&(this.ef.u8(this),this.G4=!1)}qxt(){return this.G4}$xt(){this._4||(this.ef.c8(this),this._4=!0)}Rxt(){this._4&&(this.ef.f8(this),this._4=!1)}Xxt(){return this._4}YGt(){this.m8||(this.ef.d8(this),this.m8=!0)}qGt(){this.m8&&(this.ef.p8(this),this.m8=!1)}ZGt(){return this.m8}Kxt(){return[]}Lxt(t,s){this.ef.y4(this.pxt,t,s)}QGt(t,s){}Mv(){return null}xv(t){}Trt(t){}Rrt(t,s){}Tht(t,s){if(0!==s){const i=this.Trt(t);if("number"!=typeof i)throw new Error("expected number");this.Rrt(t,i+s)}}Yxt(t,s,i,e){}Zxt(t,...s){t.call(this,...s)}Qxt(t,...s){return t.call(this,...s)}axt(){return null}Txt(t,s,i){if(this.JGt.tGt()){const e=this.Axt(),n=aa.hr(aa.Event,t,s);n.tTt=e,n.T6=e.T6,i&&Object.assign(n,i),e.dispatchEvent(n)}}}}{let s=function(t){if(t!==i)throw new Error("invalid internal API token")},r=(s,self.Os),i=(r.rX={},r.Fat={},r.ks()),e=[],n=[],h=[],o=null,a=null,t=null,l=null,u=new Map,c=new Map;r.zk=class extends r.nr{constructor(t,s){super(),this.ef=t,this.sTt=[],this.owt=null,this.iTt=[],this.eTt=new Map,this.nTt=null,this.rTt=null,this.hTt=new Set(s)}oTt(t){const s=t[19],i=this.ef.cyt(t[0]);if(!i)throw new Error("missing plugin");r.q2t(t,i,s);const e=2<=s?r.LMt:i,n=r.hr(e,{runtime:this.ef,qk:t[1],WMt:t[2],Qk:t[5],sL:t[8],HMt:t[9],JMt:t[13],oL:t[14],Yk:t[17],eL:t[18],YMt:s,name:t[20],rxt:2<=s?i:null});n.oxt(),this.sTt.push(n),u.set(i,n)}aTt(){this.owt=r.hr(r.rX.nX,{runtime:this.ef,qk:!0}),this.owt.oxt()}lTt(t){const i=t[1],e=t[2],n=this.ef.cyt(t[0]);if(!n)throw new Error("missing behavior");this.eTt.set(n,()=>{const t=2<=i?r.NGt:n,s=r.hr(t,{runtime:this.ef,name:e,YMt:i,rxt:2<=i?n:null});s.oxt(),this.iTt.push(s),c.set(n,s),!this.nTt&&r.Fat.solid&&s instanceof r.Fat.solid?this.nTt=s:!this.rTt&&r.Fat.jumpthru&&s instanceof r.Fat.jumpthru&&(this.rTt=s),s.uxt()})}uTt(t){const s=this.eTt.get(t);s&&(s(),this.eTt.delete(t))}static cxt(t,s=1){if(r.zk.cxt!==o)throw new Error("invalid method");1===s&&e.push(t),n.push(t)}static fxt(t=1){if(r.zk.fxt!==a)throw new Error("invalid method");1===t&&e.pop(),n.pop()}static EN(){if(r.zk.EN!==t)throw new Error("invalid method");if(0===e.length)throw new Error("no init object set");return e.at(-1)}static Uk(t){if(r.zk.Uk!==l)throw new Error("invalid method");if(s(t),0===n.length)throw new Error("no init object set");return n.at(-1)}static cTt(t){h.push(t)}static fTt(){h.pop()}static u4(){if(0===h.length)throw new Error("no init properties set");return h.at(-1)}dTt(){for(const t of this.sTt)t.uxt()}static cL(t){return u.get(t)||null}static E6(t){return c.get(t)||null}i7(){return this.owt}pTt(){return this.nTt}mTt(){return this.rTt}R4(t){return this.hTt.has(t)}},o=r.zk.cxt,a=r.zk.fxt,t=r.zk.EN,l=r.zk.Uk}{const la=self.Os,ua=new Set;la.gTt=class extends la.nr{constructor(){super(),this.yTt=0,this.S7="",this.b7=0,this.wTt=0,this.STt=0,this.Hm=0,this.Um=0,this.bTt=!1,this.vTt=!1,this.MTt=null,this.xTt="",this.uI=la.hr(la.Rect),this.GTt=la.hr(la.Kl),this.TTt="",this._Tt=new self.kO(this),ua.add(this)}lr(){this.dI(),this.MTt&&0===this.MTt.F7()&&this.MTt.lr(),this.MTt=null,ua.delete(this),this.ITt()}static P7(){for(const t of ua)t.xTt="",t.uI.set(0,0,0,0),t.GTt.yu(t.uI)}CTt(t){this.S7=t[0],this.b7=t[1],this.wTt=t[2],this.STt=t[3],this.Hm=t[4],this.Um=t[5],this.bTt=t[6],this.vTt=!0}ETt(t,s){if(this.MTt)throw new Error("already loaded asset");this.S7=s;const i={};return la.yo(s)&&(i.JH="remote"),this.LO(t,i),this.MTt.XH()}PTt(t,s){if(this.MTt)throw new Error("already loaded asset");this.S7="",this.b7=s.size,this.MTt=la.hr(la.qH,t.MF(),{blob:s,size:this.b7,JH:"local"})}RTt(t){if(t===this)throw new Error("cannot replace with self");this.yTt++,this.dI(),this.S7=t.S7,this.b7=t.b7,this.wTt=t.wTt,this.STt=t.STt,this.Hm=t.Hm,this.Um=t.Um,this.bTt=t.bTt,this.vTt=t.vTt,this.MTt=t.MTt,this.xTt=t.xTt,this.uI=t.uI,this.GTt=t.GTt,this.ITt()}$H(){return this.S7}sc(){return this.b7}ATt(){return this.wTt}FTt(){return this.STt}mGt(){return this.bTt}nm(){return this.Hm}gm(){return this.Um}DTt(){return this.MTt.nm()}OTt(){return this.MTt.gm()}LO(t,s){if(this.MTt)throw new Error("already got asset");s=Object.assign({},s,{url:this.$H(),size:this.sc()}),this.MTt=t.zH(s)}G7(){return this.MTt&&this.MTt.G7()}async IV(t,s){if(!this.MTt)throw new Error("no asset");if(this.xTt)throw new Error("already loaded texture");const i=this.yTt,e=(this.xTt="loading",await this.MTt.IV(t,s));if(this.yTt!==i)return null;if(!e)return this.xTt="",null;this.xTt="loaded",this.vTt||(this.Hm=e.nm(),this.Um=e.gm(),this.vTt=!0);const n=this.bTt?this.Um:this.Hm,r=this.bTt?this.Hm:this.Um;return this.uI.set(this.wTt,this.STt,this.wTt+n,this.STt+r),this.uI._t(e.nm(),e.gm()),this.GTt.yu(this.uI),this.bTt&&this.GTt.xu(),e}dI(){this.xTt&&(this.MTt&&this.MTt.dI(),this.xTt="",this.uI.set(0,0,0,0),this.GTt.yu(this.uI))}IM(){return this.MTt&&"loaded"===this.xTt?this.MTt.IM():null}xC(){return this.uI}dGt(){return this.GTt}lj(){return this._Tt}kTt(){return this.MTt}async LTt(t){t=t||await this.MTt.D7();const s=la.Po(this.Hm,this.Um),i=s.getContext("2d");return this.bTt?(i.rotate(Math.PI/-2),i.translate(-this.Um,0),i.drawImage(t,this.wTt,this.STt,this.Um,this.Hm,0,0,this.Um,this.Hm)):i.drawImage(t,this.wTt,this.STt,this.Hm,this.Um,0,0,this.Hm,this.Um),s}async NTt(t){if(!this.TTt){const s=await this.LTt(t),i=await la.Ro(s);this.TTt=URL.createObjectURL(i)}return this.TTt}ITt(){this.TTt&&(URL.revokeObjectURL(this.TTt),this.TTt="")}}}{const ca=self.Os;ca.BTt=class extends ca.nr{constructor(t){super(),this.dr=t[0],this.WTt=t[1],this.ySt=!!t[2],this.sot=t[3],this.jTt=t[4],this.VTt=!!t[5],this.yU=t[6],this.HTt=t[7].map(t=>ca.hr(ca.UTt,t)),this.zTt=new self.O6(this)}static JTt(t,s){const i=ca.hr(ca.BTt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.HTt.push(ca.UTt.JTt(t)),i}lr(){for(const t of this.HTt)t.lr();ca.Nh(this.HTt)}qTt(t){for(const s of this.HTt)s.Q6().LO(t)}$Tt(s,i){return Promise.all(this.HTt.map(t=>t.Q6().IV(s,i)))}XTt(){for(const t of this.HTt)t.Q6().dI()}$c(){return this.dr}Yz(){return this.yU}U6(){return this.HTt.length}J6(){return this.HTt}KTt(t){if((t=Math.floor(t))<0||t>=this.HTt.length)throw new RangeError("invalid frame");return this.HTt[t]}YTt(t,s){(s=Math.floor(s))<0?this.HTt.unshift(t):s>=this.HTt.length?this.HTt.push(t):this.HTt.splice(s,0,t)}ZTt(t){if((t=Math.floor(t))<0||t>=this.HTt.length)throw new RangeError("invalid frame");this.HTt[t].lr(),this.HTt.splice(t,1)}QTt(i){for(let t=0,s=this.HTt.length;t<s;++t)if(ca.mn(this.HTt[t].wW(),i))return t;return-1}t_t(t){if("string"!=typeof t)return t;{const s=this.QTt(t);if(-1===s)throw new Error("cannot find animation frame with tag "+t);return s}}k6(){return this.WTt}N6(){return this.ySt}B6(){return this.sot}j6(){return this.jTt}H6(){return this.VTt}s_t(){return this.zTt}}}{const fa=self.Os,da=(()=>{const i=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),e=new Uint8Array(i.length);for(let t=0,s=i.length;t<s;++t)e[t]=i.charCodeAt(t);return new Blob([e],{type:"image/png"})})();fa.UTt=class extends fa.nr{constructor(t){super(),this.i_t=fa.hr(fa.gTt),this.i_t.CTt(t),this.e_t=t[7],this.n_t=fa.hr(fa.Xa,t[8],t[9]),this.r_t=t[10].map(t=>fa.hr(fa.h_t,this,t)),this.o_t=new Map;for(const i of this.r_t)this.o_t.set(i.$c().toLowerCase(),i);this.a_t=null;const s=t[11];6<=s.length&&(this.a_t=fa.hr(fa.Pu,s)),this.Ug=t[12]||"",this.l_t=new self.Z6(this)}static JTt(t){const s=fa.hr(fa.UTt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.i_t.PTt(t,da),s}lr(){this.a_t&&(this.a_t.lr(),this.a_t=null),this.i_t.lr(),this.i_t=null}Q6(){return this.i_t}tW(){return this.e_t}iW(){return this.n_t.tl()}nW(){return this.n_t.il()}pW(){return this.a_t}fW(t){return this.o_t.get(t.toLowerCase())||null}cW(t){return(t=Math.floor(t))<0||t>=this.r_t.length?null:this.r_t[t]}oW(){return this.r_t.length}wW(){return this.Ug}q6(){return this.l_t}}}{const pa=self.Os;pa.h_t=class extends pa.nr{constructor(t,s){super(),this.u_t=t,this.dr=s[0],this.c_t=pa.hr(pa.Xa,s[1],s[2])}lr(){}$c(){return this.dr}av(){return this.c_t.tl()}cv(){return this.c_t.il()}f_t(){return this.c_t}}}{const G=self.Os,ma=self.C3Debugger,ga=self.wL;G.xlt=class extends G.nr{constructor(s,t,i){super();const e=s.cyt(i[1]),[n,r]=(this.ef=s,this.xxt=G.zk.cL(e),this.Ext=null,this.d_t=e.Instance,this.Hg=t,this.yU=i[11],this.dr=i[0],this.$yt=this.ef.Edt(i[14]),this.p_t=!!i[9],this.m_t=!!i[2],this.g_t=!!i[10],this.y_t=i[3].map(t=>({sid:t[0],type:t[1],name:t[2],w_t:s.Edt(t[3])})),this.S_t=i[4],this.b_t=i[5],this.BMt=this.xxt.Kk(),this.v_t=G.hr(G.Event.Nf),this.ZU=null,s.TF().pk());if(this.M_t=G.hr(G.x_t,n,r),this.G_t=!0,this.T_t=null,this.__t=null,this.I_t=-1,this.C_t=null,this.E_t=null,this.P_t=null,this.R_t=null,this.A_t=null,this.F_t=!1,this.D_t=null,this.O_t=i[8].map(t=>G.k_t.qM(this,t)),this.L_t=[],this.N_t=new Map,this.B_t=new Map,this.W_t=new Set,this.j_t=new Map,this.V_t=G.hr(G.Zct,this),this.H_t=null,this.U_t=0,this.z_t=!1,this.D_t=null,this.i_t=null,this.J_t=null,this.q_t=null,this.$_t=null,this.X_t=0,this.MSt=new Map,this.xSt=new Map,this.N7=[],this.K_t=new Map,this.Y_t=!0,this.xxt.iL()&&(this.ZU=G.hr(G.QU,this,i[12])),i[6]&&(this.i_t=G.hr(G.gTt),this.i_t.CTt(i[6])),i[7]){this.J_t=i[7].map(t=>G.hr(G.BTt,t)),this.q_t=new Map,this.$_t=new Map;for(const a of this.J_t)this.q_t.set(a.$c().toLowerCase(),a),this.$_t.set(a.Yz(),a)}this.m_t?(this.T_t=[],this.__t=new Set,this.I_t=this.ef.Z_t()):(this.C_t=[],this.E_t=new Set,this.P_t=[],this.R_t=[],this.A_t=[]);const h=this.xxt.VSt();if(h<2&&(this.Ext=G.hr(e.Q_t,this,i[15]),!(this.Ext instanceof G.Mxt)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.tIt=null,this.sIt=null,this.Zq=G.hr(G.Event.Nf),G.zk.cxt(this,h);let o;if(o=2<=h?(o=e.Q_t)||globalThis.hj:this.Ext.axt()){if(this.tIt=new o(h<2?this:null),h<2&&!(this.tIt instanceof ga))throw new TypeError("script interface class must derive from IObjectClass");if(2<=h&&!(this.tIt instanceof globalThis.hj))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.tIt=new ga;if(G.zk.fxt(h),i[13]){const l=i[13];if(l){const u=l[0],c=l[1],f=l[2];this.Ext.Gxt(u,c,f)}}this.ef.iIt()&&!this.m_t&&!this.g_t&&this.BMt||this.oxt(),this.xxt.$k()&&(this.xxt.lxt(this),this.eIt(i)),this.nIt=null}static qM(t,s,i){return G.hr(G.xlt,t,s,i)}lr(){if(this.v_t.lr(),this.v_t=null,this.i_t&&(this.i_t.lr(),this.i_t=null),this.J_t){for(const t of this.J_t)t.lr();G.Nh(this.J_t),this.q_t.clear(),this.$_t.clear()}this.nIt=null,this.V_t.lr(),this.V_t=null,this.MSt.clear(),this.xSt.clear(),this.D_t=null,this.ef=null}rIt(i){for(let t=1,s=i.length;t<s;++t){const e=this.ef.wz(i[t]);this.T_t.push(e),this.__t.add(e),e.C_t.push(this),e.E_t.add(this)}}hIt(t){this.F_t=!0,this.D_t=t}LN(){return this.F_t}x$(){return this.D_t}oIt(){let t=0;if(!this.m_t)for(const s of this.C_t)for(const i of s.aIt()){const e=i.$c().toLowerCase();this.N_t.set(e,i),this.B_t.set(e,t),this.L_t.push(i),++t}for(const n of this.aIt()){const r=n.$c().toLowerCase();this.N_t.set(r,n),this.B_t.set(r,t),this.L_t.push(n),++t}for(const h of this.L_t)this.W_t.add(h.v6().constructor);if(!this.m_t&&this.C_t.length){let t=this.ef.lIt(),s=(G.Wh(this.P_t,t,0),G.Wh(this.R_t,t,0),G.Wh(this.A_t,t,0),[]),i=0,e=0,n=0;for(const o of this.C_t){const a=o.Gwt(),l=(this.P_t[a]=i,i+=o.uIt(),this.R_t[a]=e,e+=o.cIt(),this.A_t[a]=n,n+=o.fIt(),o.HL());if(l&&this.ZU)for(const u of l.UL())s.push(u.dIt(this.ZU))}this.ZU&&this.ZU.pIt(s)}}eIt(t){const s=this.ef.mIt(),i=G.hr(G.Instance,{runtime:this.ef,GN:this,uid:s});i.gIt(t[16],[]),this.ef.yIt(s,i),this.N7.push(i)}Nbt(){return this.Ext}wIt(){return this.g_t}Nf(){return this.v_t}oxt(){this.m_t||(this.Ext?this.Ext.oxt():this.tIt.oj())}SIt(){return 0<this.X_t}async _$(t){this.m_t||(this.X_t++,1===this.X_t&&(this.Ext?await this.Ext._$(t):await this.tIt.uj(this.ef.Ck().bIt())))}A$(){if(!this.m_t){if(this.X_t--,this.X_t<0)throw new Error("released textures too many times");0===this.X_t&&(this.Ext?this.Ext.A$():this.tIt.cj(this.ef.Ck().bIt()))}}E$(){if(this.m_t)throw new Error("not applicable to family");this.Ext?this.Ext.E$():this.tIt.fj()}async Q$(t){this.m_t||(this.Ext?await this.Ext.Q$(t):await this.tIt.dj(this.ef.Ck().bIt()))}NO(){return this.ef}bL(){return this.xxt}vIt(){return this.d_t}$c(){return this.dr}Edt(){return this.$yt}wF(){return this.Hg}Yz(){return this.yU}Vz(){return this.m_t}Cz(){return this.p_t}Kk(){return this.BMt}Gwt(){return this.I_t}aIt(){return this.O_t}cIt(){return this.S_t}MIt(t){return t&&this.W_t.has(t)}uIt(){return this.y_t.length}xIt(){return this.y_t.map(t=>t.sid)}GIt(s){return this.y_t.findIndex(t=>t.sid===s)}Kst(s){return this.y_t.findIndex(t=>t.name===s)}TIt(){return this.y_t.map(t=>t.name)}_It(){return this.y_t.map(t=>t.w_t)}Zst(t){if((t=Math.floor(t))<0||t>=this.y_t.length)throw new RangeError("invalid instance variable index");return this.y_t[t].type}Yst(t){if((t=Math.floor(t))<0||t>=this.y_t.length)throw new RangeError("invalid instance variable index");return this.y_t[t].name}fIt(){return this.b_t}IIt(){return this.L_t}Gnt(t){return this.N_t.get(t.toLowerCase())||null}tit(t){const s=this.B_t.get(t.toLowerCase());return void 0===s?-1:s}HL(){return this.ZU}iL(){return this.xxt.iL()}CIt(){return this.ZU&&this.ZU.EIt()}w1t(){return this.V_t}RL(){return this.V_t.RL()}Q6(){return this.i_t}vz(t){this.H_t=t}bz(){return this.H_t}Mz(t){this.U_t=t}PIt(){return this.U_t}RIt(){return this.J_t}AIt(){return this.J_t.length}kdt(){return this.C_t}Ubt(t){return this.E_t.has(t)}$mt(){return this.T_t}Uz(t){return this.__t.has(t)}Ewt(t){return this.R_t[t]}xwt(t){return this.P_t[t]}Ayt(t){this.j_t.set(t.Lyt().toLowerCase(),t)}Fyt(t){return!!this.Hyt(t)}Hyt(t){const s=this.j_t.get(t.toLowerCase());return s&&s.$u()?s:null}FIt(){return this.J_t}DIt(t){if(this.J_t)return this.q_t.get(t.toLowerCase())||null;throw new Error("no animations")}OIt(t){if(this.J_t)return this.$_t.get(t)||null;throw new Error("no animations")}kIt(t){if(this.DIt(t))throw new Error(`animation name '${t}' already exists`);const s=G.BTt.JTt(this.NO(),t);return this.J_t.push(s),this.q_t.set(s.$c().toLowerCase(),s),this.$_t.set(s.Yz(),s),s}LIt(t){const s=this.DIt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.J_t.length)throw new Error("cannot remove last animation");const i=this.J_t.indexOf(s);this.J_t.splice(i,1),this.q_t.delete(s.$c().toLowerCase()),this.$_t.delete(s.Yz()),s.lr()}NIt(){if(this.J_t)return this.J_t[0];throw new Error("no animations")}BIt(){return this.NIt().KTt(0)}WIt(){if(this.J_t){const t=this.BIt().Q6();return[t.nm(),t.gm()]}return this.i_t?[this.i_t.nm(),this.i_t.gm()]:[100,100]}yL(){if(this.xxt.$k())return this.N7[0];throw new Error("not a single-global plugin")}PL(){return this.N7}*instances(){yield*this.N7}*EL(){yield*this.N7,yield*this.ef.$vt(this)}FL(){return this.N7.length}Ez(t){this.N7.push(t)}jIt(){this.Y_t=!0}cX(){if(this.Y_t&&!this.m_t){let s=this.N7,i=0;for(let t=s.length;i<t;++i)s[i].VIt(i);const t=this.ef.HIt();for(const e of t)e.TN()===this&&e.VIt(i++);this.Y_t=!1}}UIt(t){const s=this.N7;if(t<s.length)return s[t];t-=s.length;const i=this.ef.HIt();for(const e of i)if(e.TN()===this){if(0===t)return e;--t}return null}Rvt(t){if(t&&t.LN()&&t.TN()!==this)for(const i of t.NN())if(i.TN()===this)return i;const s=this.RL().PL();return s.length?s[0]:null}CL(t){const s=this.RL().PL();return 0<s.length?s[t.jN()%s.length]:null}*t2t(t,s){let i=this.RL().PL(),e=i.length,n=s.RL(),r=s.RL().PL(),h=r.length,o=t.jN(),a=(!s.Vz()&&n.fft()||(o=r.indexOf(t)),Math.ceil(e/h)),l=e%h,u=0,c;c=0==l||o<l?(u=o*a,a):(u=l*a+(o-l)*(a-1),a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}tbt(t){this.Ext?.tbt(t)}iyt(){if(this.F_t&&!this.m_t){this.cX();const t=this.RL(),s=t.bft(),i=t.fft(),e=this.ef.Sdt(),n=e&&e.eD()&&e.eD().Eft();for(const r of this.D_t.lX())if(r!==this){r.cX();const h=r.RL();if(h.Sft(i),!i){const o=h.bft();G.Nh(o);for(const a of s)o.push(r.UIt(a.jN()));if(n){const l=t.vft(),u=h.vft();G.Nh(u);for(const c of l)u.push(r.UIt(c.jN()))}}}}}rbt(t,s){for(const i of this.x$().lX()){const e=i.RL();t?G.Lh(e.vft(),s):G.Lh(e.bft(),s)}}zIt(){return this.M_t}JIt(t){this.G_t=!!t}qIt(){if(this.G_t&&this.BMt){for(const t of this.N7)t.wO().$It();for(const s of this.ef.HIt())s.TN()===this&&s.wO().$It();this.G_t=!1}}XIt(s,t,i){if(t){const e=this.K_t.get(t);e&&(e.delete(s),0===e.size)&&this.K_t.delete(t)}if(i){let t=this.K_t.get(i);t||(t=new Set,this.K_t.set(i,t)),t.add(s)}}KIt(){if(this.Vz()){const t=new Set;for(const s of this.T_t)for(const i of s.KIt())t.add(i);return t.values()}return this.K_t.keys()}$St(){return this.MSt||(this.MSt=new Map),this.MSt}XSt(){return this.xSt||(this.xSt=new Map),this.xSt}YIt(){return this.MIt(G.Fat.solid)}ZIt(){return this.MIt(G.Fat.jumpthru)}QIt(){return this.MIt(G.Fat.NoSave)}_z(){return this.MIt(G.Fat.Persist)}mq(){const t={instances:this.N7.map(t=>t.Mv())};return this.MSt&&this.MSt.size&&(t.ex=G.Lo(this.MSt)),t}gq(t,e){this.MSt&&(this.MSt.clear(),this.MSt=null);const s=t.ex,n=(s&&(this.MSt=G.No(s)),this.N7),r=t.instances;for(let t=0,s=Math.min(n.length,r.length);t<s;++t)n[t].xv(r[t]);for(let t=r.length,s=n.length;t<s;++t)this.ef.AN(n[t]);for(let i=n.length,t=r.length;i<t;++i){let t=r[i],s=null;if(!this.Kk()||(s=this.ef.KD().d$(t.w.l))){const h=this.ef.Iz(this.H_t||this,s,!1,0,0,!0);h.xv(t),e&&e.add(h)}}this.nIt=r,this.jIt()}tCt(){return this.nIt}sCt(){this.nIt=null}iCt(){for(let t=0,s=this.N7;t<s;++t)this.N7[t].iCt()}pL(){return this.tIt}qF(){return this.Zq}eCt(){return this.sIt}DL(t){this.sIt=t}OX(t){const s=this.ef,i=s.M4()&&!s.YF().BL();i&&ma.StartMeasuringScriptTime(),this.Zq.dispatchEvent(t),i&&ma.AddScriptTime()}}}{const ya=self.Os;ya.nCt=class extends ya.nr{constructor(t,s){super(),this.ef=t,this.rCt=s;for(const i of this.rCt)i.hIt(this)}lr(){this.ef=null}NO(){return this.ef}M$(){return this.rCt}lX(){return this.rCt}dX(){return this.rCt.some(t=>t.Kk())}}}{let S=self.Os,n=self.C3Debugger,h=S.zk,o=[],a=0,b=new WeakMap,e=new WeakMap;S.Instance=class extends S.nr{constructor(t){if(S.zk!==h)throw new Error("invalid addon manager");super(),this.ef=t.runtime,this.hCt=t.GN,this.xst=null,this.oCt=null,this.aCt=null,this.lCt=0,this.uCt=t.uid,this.cCt=a++,this.lbt=0,this.fCt=null;const s=S.Qh(t.tags),i=(0<s.length&&(this.fCt=new Set(s)),this.dCt=o,this.pCt=o,this.hCt.IIt()),e=(0<i.length&&(this.pCt=i.map((t,s)=>S.hr(S.mCt,{runtime:this.ef,M6:t,T6:this,index:s}))),this.gCt=this.hCt.LN()?[]:null,this.yCt=-1,this.v_t=null,this.bL());if(e.Db()&&(this.lbt|=4),e.Kk())if(this.xst=S.hr(S.wCt,this,t.H4),t.SCt)this.xst.bCt(t.SCt);else{this.xst.vCt();const[n,r]=this.hCt.WIt();this.xst.JI(n,r),this.TN().CIt()&&this.xst.V4().MCt()}t.xCt?this.GCt(t.xCt):this.TCt()}lr(){if(this.aCt&&(this.aCt.PN(),this.aCt=null),0<this.pCt.length){for(const i of this.pCt)i.lr();S.Nh(this.pCt)}this.oCt&&(this.oCt.lr(),this.oCt=null);const t=b.get(this),s=(t&&(t.clear(),b.delete(this)),e.get(this));s&&(s.clear(),e.delete(this)),this.gCt&&S.Nh(this.gCt),this.v_t&&(this.v_t.lr(),this.v_t=null),this.fCt&&this.fCt.clear(),this.fCt=null,this.ef=null,this.hCt=null,0<this.dCt.length&&S.Nh(this.dCt),this.xst&&(this.xst.lr(),this.xst=null)}GCt(t){0<t.length&&(this.dCt=[],S.Vh(this.dCt,t))}TCt(){const s=this.hCt.uIt();if(0!==s){this.dCt=[];const i=[0,0,""];for(let t=0;t<s;++t)this.dCt.push(i[this.hCt.Zst(t)])}}gIt(t,i){if(this.oCt)throw new Error("already got sdk instance");for(let t=0,s=this.pCt.length;t<s;++t){const e=this.pCt[t];e.gIt(i?i[t]:null)}const s=this.bL().VSt();if(s<2){if(this.oCt=S.hr(this.hCt.vIt(),this,t),!(this.oCt instanceof S.Ixt))throw new Error("sdk type must derive from SDKInstanceBase");!this.bL().Kk()&&this.hCt.eCt()&&this.pO()}else{const n=this.bL().axt();this._Ct(n.Instance,t)}}p6(){return this.oCt??this.aCt}wO(){return this.xst}NO(){return this.ef}ID(){return this.yCt}UN(){const t=this.yCt;return-1===t?this.NO().ID():t}CD(t){((t=+t)<0||!isFinite(t))&&(t=0),this.yCt=t,this.TN().CIt()&&this.ef.ICt(this,!0)}JN(){this.yCt=-1,this.TN().CIt()&&this.ef.ICt(this,!1)}eq(){return this.ef.CCt(this)}Nf(){return this.v_t||(this.v_t=S.hr(S.Event.Nf)),this.v_t}Yv(t){this.oCt?this.oCt.Yv(t):this.aCt.bj(this.ef.Ck().bIt())}oxt(t){this.oCt.oxt(t)}ECt(){this.lbt|=2}PCt(){return 0!=(2&this.lbt)}RCt(){this.lbt|=1}qj(){return 0!=(1&this.lbt)}Db(){return 0!=(4&this.lbt)||this.oCt.Db()}ACt(){this.lbt|=32}$J(){return 0!=(32&this.lbt)}FCt(){return 0!=(8&this.lbt)}DCt(t){t?this.lbt|=8:this.lbt&=-9}OCt(){return 0!=(16&this.lbt)}kCt(t){t?this.lbt|=16:this.lbt&=-17}LCt(){return 0!=(64&this.lbt)}NCt(t){t?this.lbt|=64:this.lbt&=-65}BCt(t,s){t<<=16,s?this.lbt|=t:this.lbt&=~t}WCt(t){return 0!=(this.lbt&t<<16)}lGt(){return this.oCt.lGt()}uGt(){return this.oCt.uGt()}cGt(){return this.oCt.cGt()}fGt(){return this.oCt.fGt()}pGt(){return this.oCt.pGt()}tvt(t){return this.oCt.tvt(t)}TN(){return this.hCt}JJ(){return this.oCt.JJ()}Xvt(t){return t.Vz()?t.Uz(this.TN()):this.TN()===t}jCt(n,t,s){const i=(t,s)=>{const i=s||t.TN(),e=n.get(i);e?e.add(t):n.set(i,new Set([t]))};if(i(this,t),this.LN())for(const e of this.NN())i(e);if(s)for(const r of this.IB())i(r)}VCt(){if(!this.bL().hL())throw new Error("object does not support scene graph")}AB(){return null!==this.SB()}SB(){const t=this.wO();if(!t)return null;const s=t.SB();return s?s.HW():null}vB(){const t=this.wO();if(!t)return null;const s=t.vB();return s?s.HW():null}*MB(){const t=this.wO();if(t)for(const s of t.MB())yield s.HW()}HCt(t){if(t)for(const s of this.children())if(s===t)return!0;return!1}Sq(){const t=this.wO();return!!t&&t.Sq()}UCt(t){const s=this.wO();if(!s)return[];const i=t.$c();return s.vX().map(t=>t.HW()).filter(t=>t.TN().$c()===i)}vX(){const t=this.wO();return t?t.vX().map(t=>t.HW()):[]}*children(){const t=this.wO();if(t)for(const s of t.children())yield s.HW()}*IB(){const t=this.wO();if(t)for(const s of t.IB())yield s.HW()}GB(){const t=this.wO();return t?t.GB():0}zCt(){return[...this.MB()].length}Qvt(){const t=this.wO();return t?t.Qvt():0}_B(t){const s=this.wO();if(!s)return null;const i=s._B(t);return i?i.HW():null}JCt(){const t=this.wO();if(!t)return NaN;const s=t.SB();return s?s.qCt(t):NaN}$Ct(t){for(const s of this.wO().vX())if(s.HW().BN()===t)return!0;return!1}EB(t,s){this.VCt(),t.VCt(),this.wO().EB(t.wO(),s||{})}PB(t){const s=this.wO();s&&s.PB(t.wO())}ZB(){const t=this.wO();return!!t&&t.ZB()}X$(){const t=this.wO();if(t){const s=t.XCt();if(s)for(const i of s){const e=this.ef.dO(i[2]);if(e){const n=i[3];this.EB(e,{OB:!!(n>>0&1),LB:!!(n>>1&1),BB:!!(n>>2&1),jB:!!(n>>3&1),HB:!!(n>>4&1),YB:!!(n>>5&1),zB:!!(n>>6&1),qB:!!(n>>7&1),XB:!!(n>>8&1)})}}}}K$(t,s){const i=t.get(this);if(i)for(const e of i.sceneGraphJson.children){const n=s.get(e.index);if(n){const r=e.flags;this.EB(n,{OB:!!(r>>0&1),LB:!!(r>>1&1),BB:!!(r>>2&1),jB:!!(r>>3&1),HB:!!(r>>4&1),YB:!!(r>>5&1),zB:!!(r>>6&1),qB:!!(r>>7&1),XB:!!(r>>8&1)})}}}HN(){const t=this.ef.KCt();return t?t.Tlt(this):""}LN(){return null!==this.gCt}uX(t){this.gCt.push(t)}ON(){return this.gCt}YCt(t){return!!this.ZCt(t)}ZCt(t){const s=this.NN();if(null===s||0===s.length)return!1;for(const i of s)if(i.TN()===t)return i;return null}NN(){return this.gCt}hmt(){for(const t of this.NN())t.TN().RL().Mft(t)}sbt(){for(const t of this.NN())t.TN().RL().yft(t)}ibt(t){for(const s of this.NN())s.TN().RL().bft()[t]=s}nbt(){for(const t of this.NN())t.TN().RL().wft(t)}ebt(t){for(const s of this.NN())s.TN().RL().vft()[t]=s}bL(){return this.hCt.bL()}VIt(t){this.lCt=t}jN(){return this.hCt.cX(),this.lCt}BN(){return this.uCt}QCt(){return this.cCt}tEt(t){t?this.KN(new Set(t)):this.fCt=null}KN(t){if(0===t.size)this.fCt=null;else{this.fCt?this.fCt.clear():this.fCt=new Set;for(const s of t)this.fCt.add(s)}}$N(){return this.fCt??new Set}x2t(){return Array.from(this.$N()).join(" ")}_2t(t){t=Math.floor(t);for(const s of this.$N()){if(0===t)return s;--t}return""}xnt(){return this.pCt}sEt(t){if(t)for(const s of this.pCt)if(s.v6()instanceof t)return s;return null}Dat(t){if(!t)return null;const s=this.sEt(t);return s?s.p6():null}Mnt(i){const e=this.pCt;for(let t=0,s=e.length;t<s;++t)if(e[t].G6().Yz()===i)return t;return-1}iEt(){return this.dCt}TIt(){return this.hCt.TIt()}eEt(){return this.dCt.length}Drt(t){const s=this.dCt;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}vwt(t){return this.dCt[t]}nEt(t){const s=this.dCt[t];return 0===this.hCt.Zst(t)?!!s:s}Ort(t,s){const i=this.dCt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=this.hCt.Zst(t);switch(e){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}_ht(t,s){if(0!==s){const i=this.dCt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}}$St(){let t=b.get(this);return t||(t=new Map,b.set(this,t)),t}XSt(){let t=e.get(this);return t||(t=new Map,e.set(this,t)),t}rEt(t){const s=this.TN();if(s.qF().Hf(t))return!0;for(const i of s.kdt())if(i.qF().Hf(t))return!0;return!!this.ef.qF().Hf(t)}NL(){const t=new Set,s=(t.add(this),this.wO());if(s&&s.Sq())for(const i of this.IB())if(t.add(i),i.LN())for(const e of i.NN())t.add(e);if(this.LN())for(const n of this.NN())t.add(n);for(const r of t.values())r.Y$();this.Z$()}hEt(){this.hCt.eCt()&&this.pO();for(const t of this.pCt)t.XGt()}oEt(){this.hEt()}Y$(){if(this.hEt(),this.rEt("instancecreate")){const t=this.TN(),s=new S.Event("instancecreate");s.T6=this.pO(),t.OX(s);for(const i of t.kdt())i.OX(s);this.ef.OX(s)}this.ef.f4(this.bL().J1t().eX.E2t,this,null)}Z$(){if(this.bL().hL()){if(this.OX(new S.Event("hierarchyready")),this.rEt("hierarchyready")){const t=this.TN(),s=new S.Event("hierarchyready");s.T6=this.pO(),t.OX(s);for(const i of t.kdt())i.OX(s);this.ef.OX(s)}this.ef.f4(this.bL().J1t().eX.Jvt,this,null)}}aEt(){this.ef.f4(this.bL().J1t().eX.P2t,this,null)}lEt(t){if(this.aCt){const s=new S.Event("destroy");s.uEt=t,this.OX(s)}if(this.rEt("instancedestroy")){const i=this.TN(),e=new S.Event("instancedestroy");e.T6=this.pO(),e.uEt=t,i.OX(e);for(const n of i.kdt())n.OX(e);this.ef.OX(e)}}cEt(){return this.oCt?this.oCt.Kxt():this.aCt.I4()}Mv(t="full",s=null){const i={},e=("full"===t?i.uid=this.BN():i.c3=!0,this.$N());if(0<e.size&&(i.tags=Array.from(e)),"visual-state"!==t){const r=b.get(this);if(r&&r.size&&(i.ex=S.Lo(r)),-1!==this.ID()&&(i.mts=this.ID()),0<this.hCt.uIt()){const h={},o=this.hCt.xIt();for(let t=0,s=this.dCt.length;t<s;++t)h[o[t].toString()]=this.dCt[t];i.ivs=h}if(this.pCt.length){const a={};for(const l of this.pCt){const u=l.Mv(t);u&&(a[l.G6().Yz().toString()]=u)}i.behs=a}}this.xst&&(i.w=this.xst.mq(t,s));const n=this.oCt?this.oCt.Mv():this.aCt.C4();return n&&(i.data=n),i}PK(t="full",s){this.xst&&this.xst.PK(t)}AK(t,s="full",i=null){this.xst&&this.xst.AK(t,s,i)}fEt(t,s="full",i=null){this.xst&&this.xst.fEt(t,s,i)}iCt(){this.bL().Kk()&&this.xst.iCt()}xv(s,t="full",i){if("full"===t)this.uCt=s.uid;else if(!s.c3)return;if(this.tEt(s.tags),"visual-state"!==t){let t=b.get(this);t&&(t.clear(),b.delete(this));const n=s.ex,r=(n&&(t=S.No(n),b.set(this,t)),this.yCt=s.hasOwnProperty("mts")?s.mts:-1,s.ivs);if(r)for(const[h,o]of Object.entries(r)){const a=parseInt(h,10),l=this.hCt.GIt(a);if(!(l<0||l>=this.dCt.length)){let t=o;null===t&&(t=NaN),this.dCt[l]=t}}}if(this.bL().Kk()){const u=s.w;if(u){const c=u.l;if(this.xst.SO().Yz()!==c){const f=this.xst.SO(),d=f.tO().d$(c);d?(this.xst.xO(d),f.Az(this,!0),d.Ez(this,!0),d.GO(this),this.xst.U4()):"full"===t&&this.ef.AN(this)}this.xst.gq(u,t)}}if("visual-state"!==t){const p=s.behs;if(p)for(const[m,g]of Object.entries(p)){const y=parseInt(m,10),w=this.Mnt(y);w<0||w>=this.pCt.length||this.pCt[w].xv(g,t)}}const e=s.data;e&&(this.oCt?this.oCt.xv(e,t):this.aCt.E4(e))}pO(){return this.aCt||this._Ct()}tGt(){return!!this.aCt}_Ct(t,s){const i=this.xst?t?self.pj:self.l6:t?self.t4:self.xN,e=t||this.oCt.axt(),n=this.hCt.eCt(),r=n||e||i,h=this.bL().VSt();if(S.zk.cxt(this,h),S.zk.cTt(s),this.aCt=new r,S.zk.fTt(),S.zk.fxt(h),e&&!(this.aCt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(n){const o=e||i;if(!(this.aCt instanceof o))throw new TypeError(`setInstanceClass(): class '${n.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.aCt}_N(t){if(0!==this.dCt.length){const i={},e=this.hCt._It();for(let t=0,s=e.length;t<s;++t)i[e[t]]={configurable:!1,enumerable:!0,get:S.Instance.prototype.nEt.bind(this,t),set:S.Instance.prototype.Ort.bind(this,t)};const s=Object.create(Object.prototype,i);t.dEt={value:s,writable:!1}}}IN(t){const s=this.pCt;if(0!==s.length){const i={};for(const n of s)i[n.G6().Edt()]={value:n.Axt(),writable:!1};const e=Object.create(Object.prototype,i);t.Jpt={value:e,writable:!1}}}OX(t){if(this.tGt()){const s=this.pO(),i=(t.T6=s,this.ef),e=i.M4()&&!i.YF().BL();e&&n.StartMeasuringScriptTime(),s.dispatchEvent(t),e&&n.AddScriptTime()}}}}{const wa=self.Os;wa.xX=class extends wa.nr{constructor(e){super(),this.Pv=e,this.fmt=null,this.pEt=[],this.mEt=e.nm(),this.gEt=e.gm(),this.yEt=1,this.wEt=1,this.SEt=0,this.bEt=1,this.vEt=e.vP(),this.MEt=null,this.xEt=null,this.GEt=NaN,this.TEt=!1,this.Mq=NaN,this.xq=NaN,this._Et=t=>{if(t.T6===this.fmt.HW()){const s=e.NO(),i=(s.Nf().removeEventListener("instancecreate",this._Et),this.fmt.HW().p6());this.TEt=!!i.dit(),this.Mq=this.TEt?i.fit():NaN,this.xq=this.TEt?i.mit():NaN}}}lr(){this.fmt=null,this.MEt=null,this.xEt=null,this.GEt=NaN,this.TEt=!1,this.Mq=NaN,this.xq=NaN,wa.Nh(this.pEt)}IEt(t){if(this.bEt=this.Pv.vP(),this.vEt=this.bEt,this.fmt=t,this.SEt=t?t.YL():0,this.fmt){const s=this.Pv,i=s.NO(),e=this.fmt.HW().bL().VSt();if(e<2){const n=this.fmt.HW().p6();n?(this.TEt=!!n.dit(),this.Mq=this.TEt?n.fit():NaN,this.xq=this.TEt?n.mit():NaN):this.fmt.HW().qj()||i.Nf().addEventListener("instancecreate",this._Et)}else this.TEt=!1,this.Mq=NaN,this.xq=NaN}else this.TEt=!1,this.Mq=NaN,this.xq=NaN}SB(){return this.fmt}Sq(){return 0<this.pEt.length}vX(){return this.pEt}CEt(){this.Sq()&&1!==this.pEt.length&&(this.xEt?this.pEt.sort((t,s)=>{const i=this.xEt.get(t.HW()),e=this.xEt.get(s.HW());return wa.ue(i)&&wa.ue(e)?i-e:0}):this.pEt.sort((t,s)=>{const i=t.zrt().EEt(),e=s.zrt().EEt();return wa.ue(i)&&wa.ue(e)?i-e:0}))}EEt(){return this.GEt}Jrt(){return this.yEt}PEt(t){this.yEt=t}$rt(){return this.wEt}REt(t){this.wEt=t}iht(){return this.vEt}Mvt(){return this.bEt}AEt(t){this.bEt=t}Urt(){return 0===this.mEt?Number.EPSILON:this.mEt}qrt(){return 0===this.gEt?Number.EPSILON:this.gEt}FEt(){if(this.Pv.WB()){let t=this.fmt,s=t.nm(),i=t.zrt().Urt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.TEt?1+s/this.Mq:s/i}return 1}DEt(){if(this.Pv.VB()){let t=this.fmt,s=t.gm(),i=t.zrt().qrt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.TEt?1+s/this.xq:s/i}return 1}OEt(){return 0}kEt(){return{sw:this.mEt,sh:this.gEt,sx:this.yEt,sy:this.wEt,psa:this.SEt,oo:this.bEt,so:this.vEt,pi:this.Pv.HW().JCt()}}mq(t,s=null){const i=this.kEt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.LEt(t),c:this.NEt(t)})}BEt(t){let s="";return t.kB()&&(s+="x"),t.NB()&&(s+="y"),t.WB()&&(s+="w"),t.VB()&&(s+="h"),t.UB()&&(s+="a"),t.JB()&&(s+="z"),t.ZB()&&(s+="d"),t.$B()&&(s+="o"),t.KB()&&(s+="v"),s}LEt(t){return this.fmt&&this.fmt.HW()&&!this.fmt.HW().qj()?this.WEt(this.fmt,this.Pv,t):null}NEt(s){return this.pEt.map(t=>this.WEt(t,t,s)).filter(t=>t)}WEt(t,s,i){const e=t.HW();if(e&&e.qj())return null;const n={};return n.uid=e.BN(),n.f=this.BEt(s),n.offsets=s.jEt(),n.data=wa.xX.VEt(e),n.oci=e.TN().wF(),"state"===i?(n.inst=e.Mv("full",{selfOnly:!0}),n.instIndex=NaN):(n.instIndex=e.TN().PL().indexOf(e),n.inst=null),n}gq(t){this.mEt=t.sw,this.gEt=t.sh,this.yEt=t.sx,this.wEt=t.sy,this.SEt=t.psa,this.bEt=t.oo,this.vEt=t.so,this.GEt=wa.ue(t.pi)?t.pi:NaN}HEt(t,s){if(!t&&!s&&this.MEt)for(const i of this.MEt)i.qj()||i.AB()||i.NO().AN(i);this.MEt=t,this.xEt=s}AK(t,s){const i=this.Pv,e=i.NO(),n=new Set;if(t.p&&!this.fmt){const o=t.p.uid,a=e.dO(o);if(s?.B2t,a){const l=a.wO();if(a.HCt(i.HW()))this.fmt=l;else{a.$Ct(i.HW().BN())?e.AN(i.HW()):a.EB(i.HW(),this.UEt(t.p.f)),n.has(i)||(i.zEt(t.p.offsets),this.JEt(a,t.p,s)),n.add(i);const u=a.wO();u.zrt().CEt()}}else if(wa.ue(t.p.oci)){const c=e.wz(t.p.oci),f=(e.i7(),e.OL(c,i.SO(),0,0,!0));if(s?.B2t,f){const d=this.qEt(t.p,e),p=(d&&f.xv(d),f.wO()),m=(p.SO().kL(f),f.EB(i.HW(),this.UEt(t.p.f)),f.wO());m.zrt().CEt()}}}const r=[];for(const g of t.c){const y=g.uid,w=e.dO(y);w&&r.push(w)}let h=0;for(const S of t.c){const b=S.uid,v=e.dO(b);if(s?.B2t,v){if(this.MEt){if(this.MEt.includes(v)){const T=v;if(T.TN()!==v.TN()){h++;continue}if(T.qj()){h++;continue}const _=t.c[h];if(!s?.B2t&&this.$Et(T,r,i)){this.XEt(h,_,i,n,s),h++;continue}if(T.AB()&&T.SB()!==i.HW()){const I=this.KEt(_,s);this.YEt(I,_,n,s),h++;continue}this.YEt(T.wO(),_,n,s,!0),h++;continue}if(this.MEt[h]){const C=this.MEt[h];if(C.TN()!==v.TN()){h++;continue}if(C.qj()){h++;continue}const E=t.c[h];if(!s?.B2t&&this.$Et(C,r,i)){this.XEt(h,E,i,n,s),h++;continue}if(C.AB()&&C.SB()!==i.HW()){const P=this.KEt(E,s);this.YEt(P,E,n,s),h++;continue}this.YEt(C.wO(),E,n,s,!0),h++;continue}}const M=v.TN(),x=this.ZEt(r,M),G=i.HW().UCt(M).length;if(x===G){const R=i.HW()._B(h);if(R){const A=R.wO();A&&(n.has(A)||(A.zEt(S.offsets),this.JEt(R,S,s)),n.add(A))}h++;continue}if(v.AB()&&v.SB()!==i.HW()){const F=this.KEt(S,s);this.YEt(F,S,n,s),h++;continue}this.YEt(v.wO(),S,n,s)}else if(this.MEt&&this.MEt[h]){const D=this.MEt[h],k=e.wz(this.QEt(S));if(D.TN()!==k){h++;continue}if(D.qj()){h++;continue}const O=t.c[h];if(!s?.B2t&&this.$Et(D,r,i)){this.XEt(h,O,i,n,s),h++;continue}if(D.AB()&&D.SB()!==i.HW()){const L=this.KEt(O,s);this.YEt(L,O,n,s),h++;continue}this.YEt(D.wO(),O,n,s)}else{const N=this.KEt(S,s);this.YEt(N,S,n,s)}h++}}$Et(t,s,i){const e=t.TN(),n=this.ZEt(s,e),r=i.HW().UCt(e).length;return n===r}XEt(t,s,i,e,n){const r=i.HW()._B(t,s);if(r){const h=r.wO();h&&(e.has(h)||(h.zEt(s.offsets),this.JEt(r,s,n)),e.add(h))}}UEt(t){const s={};return s.OB=t.includes("x"),s.LB=t.includes("y"),s.BB=t.includes("w"),s.jB=t.includes("h"),s.HB=t.includes("a"),s.zB=t.includes("z"),s.YB=t.includes("d"),s.qB=t.includes("o"),s.XB=t.includes("v"),s}QEt(t){return wa.ue(t.oci)?t.oci:t[1]}KEt(e,n){if(wa.ue(e.oci)){let t=this.Pv,s=t.NO(),i;if(e.data)i=s.Iz(e.data,t.SO(),!1,0,0,!1,!0);else{const r=s.wz(e.oci);i=s.OL(r,t.SO(),0,0,!0)}if(n?.B2t,i){const h=this.qEt(e,s),o=(h&&i.xv(h),i.wO());return o.SO().kL(i,!0),o}}}YEt(t,s,i,e,n=!0){const r=this.Pv,h=r.EB(t,this.UEt(s.f));h&&n&&(i.has(t)||(t.zEt(s.offsets),this.JEt(t.HW(),s,e)),i.add(t)),this.CEt()}JEt(t,s,i){let e=this.qEt(s,this.Pv.NO());e&&((e=JSON.parse(JSON.stringify(e))).w=null,t.xv(e))}ZEt(t,s){return t.filter(t=>t.TN().$c()===s.$c()).length}qEt(t,s){if(wa.ue(t.instIndex)){const i=s.wz(t.oci),e=i.tCt();return e?e[t.instIndex]:null}return wa.ve(t.inst)?JSON.parse(t.inst):t.inst||void 0}static VEt(t){let s=t.wO().SO().xz(t.BN());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const e of[...t.vX()]){const n=e.wO();i.push([n.tO().Yz(),n.SO().wF(),e.BN(),wa.xX.MX(n),e.TN().LN()?1:0,n.bO(),wa.xX.VEt(e)])}return wa.ke(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=wa.xX.tPt(),s[0][14][1]=i,s[0][14][2]=t.wO().bO()),s}static MX(t){let s=0;return(s|=Number(t.KB())<<8)|Number(t.$B())<<7|Number(t.JB())<<6|Number(t.ZB())<<5|Number(t.UB())<<4|Number(t.VB())<<3|Number(t.WB())<<2|Number(t.NB())<<1|Number(t.kB())<<0}static tPt(t){let s=0;return s,511}}}{let d=self.Os,t=self.ws,r=(t._s,d.hr(d.Rect)),h=d.hr(d.Kl),s=d.hr(d.Event,"bboxchange",!1),f=d.hr(d.Vo,0,0,0,0),u=d.hr(d.Pu),i=d.hr(d.Vo,1,1,1,1),o=d.hr(d.Rect,0,0,-1,-1),n=d.hr(d.Rect,0,0,-1,-1),p=new Set(["absolute","relative"]),e=[],m=!0,g=new WeakMap,a=new WeakMap;d.wCt=class extends d.nr{constructor(t,s){super(),this.Mi=t,this.Qct=t.TN(),this.ef=t.NO(),this.sPt=s,this.Qct.XIt(this,null,s),this.iPt=-1,this.ePt=-1,this.lbt=196635,this.Qct.bL().tL()&&(this.lbt|=128),this.Ka=NaN,this.Ya=NaN,this.qb=NaN,this.nPt=NaN,this.rPt=NaN,this.aM=NaN,this.Jo=NaN,this.hPt=NaN,this.oPt=NaN,this.aPt=NaN,this.lPt=NaN,this.uPt=d.hr(d.Rect),this.cPt=d.hr(d.Kl),this.fPt=n,this.dPt=o,this.pPt=null,this.mPt=null,this.gPt=null,this.Jb=i,this.yPt=i,this.wPt=null,this.SPt=null,this.Mi.TN().CIt()&&(this.SPt=d.hr(d.bPt,this.Mi,this)),this.vPt=null,this.MEt=null,this.xEt=null,this.MPt=-1,this.xPt=null}RCt(){this.lbt|=256}lr(){if(this.Qct.XIt(this,this.sPt,null),this.wPt&&(this.ef.Eb().tS(this.wPt),this.wPt=null),this.pPt=null,this.mPt&&(this.mPt.GPt.lr(),this.mPt=null),this.gPt&&(this.gPt.clear(),this.gPt=null),this.i6(),this.SPt&&this.SPt.lr(),this.AB()&&this.SB().PB(this),this.Sq()){const t=[...this.vX()];for(const s of t)this.PB(s)}this.TPt(),this._Pt(),g.delete(this),a.delete(this),this.Mi=null,this.Qct=null,this.ef=null,this.sPt=null}bCt(t){if(m=!1,this.z4(t[0],t[1]),this.mv(t[2]),this.JI(t[3],t[4]),this.aM=0,this.tL()?this.KL(t[6]):this.Jo=0,f.Ba(t[7]),this.IPt(f),this.nht(t[8]),this.hht(t[9]),this.Xb(t[10]),this.SPt&&this.SPt.CPt(t[12]),t[14]&&g.set(this,{EPt:t[14][1],PPt:t[14][2]}),t[15]){const s=t[15],e=(this.t6(s[0],s[1]),this.o6()),n=s[2];for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=r.length;t<s;++t){const h=r[t],o=e.Xv(t,i);o.lv(h[0]),o.dv(h[1]),o.mv(h[2]),o.yv(h[3]),o.Sv(h[4])}}}if(t[16]){const i=t[16][0],a=t[16][1],l=!!a,u=!l,c=this.ef.KCt();l&&c&&c.Glt(this.HW(),a),u&&c&&c.Glt(this.HW(),i)}m=!0,this.RPt()}vCt(){this.Ka=0,this.Ya=0,this.qb=0,this.nPt=0,this.rPt=0,this.aM=0,this.Jo=0,this.hPt=0,this.oPt=1,this.aPt=0,this.lPt=0,this.RPt()}NO(){return this.ef}TN(){return this.Qct}HW(){return this.Mi}APt(){return this.UB()?this.FPt(this.SB().DPt()-this.vPt.OEt()):0}lv(t){if(t=+t,this.kB()){const s=this.vPt,i=t-this.av(),e=-this.APt();0==e?this.Ka+=i/s.FEt():(this.Ka+=Math.cos(e)*i/s.FEt(),this.NB()&&(this.Ya+=Math.sin(e)*i/s.DEt()))}else this.Ka=t}Wrt(t,s=!1){t=+t,!s&&this.kB()?this.lv(this.av()+t):this.Ka+=t}av(){if(this.kB()){let t=this.Ka,s=this.vPt,i=this.SB(),e=this.APt();return 0===e?t*=s.FEt():(t=t*s.FEt()*Math.cos(e),this.NB()&&(t-=this.Ya*s.DEt()*Math.sin(e))),i.av()+t}return this.Ka}dv(t){if(t=+t,this.NB()){const s=this.vPt,i=t-this.cv(),e=-this.APt();0==e?this.Ya+=i/s.DEt():(this.kB()&&(this.Ka-=Math.sin(e)*i/s.FEt()),this.Ya+=Math.cos(e)*i/s.DEt())}else this.Ya=t}jrt(t,s=!1){t=+t,!s&&this.NB()?this.dv(this.cv()+t):this.Ya+=t}cv(){if(this.NB()){let t=this.Ya,s=this.vPt,i=this.SB(),e=this.APt();return 0===e?t*=s.DEt():(t=t*s.DEt()*Math.cos(e),this.kB()&&(t+=this.Ka*s.FEt()*Math.sin(e))),i.cv()+t}return this.Ya}z4(t,s){if(t=+t,s=+s,this.OPt()){const i=this.kB(),e=this.NB(),n=this.vPt,r=t-this.av(),h=s-this.cv(),o=-this.APt();if(0==o)i?this.Ka+=r/n.FEt():this.Ka=t,e?this.Ya+=h/n.DEt():this.Ya=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.Ka+=e?(l*r-a*h)/n.FEt():l*r/n.FEt():this.Ka=t,e?this.Ya+=i?(a*r+l*h)/n.DEt():l*h/n.DEt():this.Ya=s}}else this.Ka=t,this.Ya=s}kPt(){return[this.av(),this.cv()]}X4(t,s){t=+t,s=+s,this.OPt()?this.z4(this.av()+t,this.cv()+s):(this.Ka+=t,this.Ya+=s)}Zbt(t,s){return this.av()===t&&this.cv()===s}mv(t){if(t=+t,this.JB()&&(t-=this.SB().pv()),this.qb!==t){this.qb=t,this.LPt();const s=this.SO();0!==this.qb&&s.Oz(),s.GO(this)}}LPt(){if(this.RPt(),this.Sq()){const i=this.vX();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.JB()&&e.LPt()}}}oht(t){this.mv(this.pv()+t)}pv(){return this.JB()?this.SB().pv()+this.qb:this.qb}Y4(){return this.SO().pv()+this.pv()}dit(){const t=this.HW().bL().VSt();return t<2&&this.HW().p6().dit()}fm(t){if(t=+t,this.WB()){const s=this.nm();0===s?this.nPt=Number.EPSILON:this.nPt*=t/s}else this.nPt=t;this.NPt()}Bm(t,s){t=+t,!s&&this.WB()?this.fm(this.nm()+t):this.nPt+=t,this.NPt()}nm(){if(this.WB()){const t=this.SB(),s=t.nm(),i=t.zrt().Urt();return i===Number.EPSILON?(this.zrt().Urt()+s)*this.nPt:s*this.nPt}return this.nPt}rm(t){if(t=+t,this.VB()){const s=this.gm();0===s?this.rPt=Number.EPSILON:this.rPt*=t/s}else this.rPt=t;this.NPt()}Xrt(t,s){t=+t,!s&&this.VB()?this.rm(this.gm()+t):this.rPt+=t,this.NPt()}gm(){if(this.VB()){const t=this.SB(),s=t.gm(),i=t.zrt().qrt();return i===Number.EPSILON?(this.zrt().qrt()+s)*this.rPt:s*this.rPt}return this.rPt}JI(t,s){if(t=+t,s=+s,this.WB()){const i=this.nm();0===i?this.nPt=Number.EPSILON:this.nPt*=t/i}else this.nPt=t;if(this.VB()){const e=this.gm();0===e?this.rPt=Number.EPSILON:this.rPt*=s/e}else this.rPt=s;this.NPt()}sc(){return[this.nm(),this.gm()]}qJ(){return this.aM}BPt(t){if(t<0)throw new RangeError("invalid depth");this.aM=t}WPt(){if(this.AB()){const t=this.vPt;return Math.min(t.FEt(),t.DEt())}return 1}tL(){return 0!=(128&this.lbt)}KL(t){t=+t,this.tL()&&(this.UB()&&(t-=this.SB().YL()),t=d.gr(t),this.Jo!==t)&&(this.Jo=t,this.NPt())}Krt(t){0!=(t=+t)&&this.tL()&&(this.Jo=d.gr(this.Jo+t),this.NPt())}NPt(){if(this.lbt|=1<<18,this.Sq()){const i=this.vX();for(let t=0,s=i.length;t<s;t++)i[t].NPt()}}YL(){return this.UB()&&this.tL()?this.FPt(d.gr(this.SB().DPt()+this.Jo)):this.Jo}DPt(){return this.UB()&&this.tL()?d.gr(this.SB().DPt()+this.Jo):this.Jo}FPt(t){return this.WB()&&this.vB().nm()<0&&(t=d.gr(d.Ar(t,this.vB().YL()+Math.PI))),this.VB()&&this.vB().gm()<0?d.Ar(t,this.vB().YL()):t}jPt(){const t=this.SB();return!!(this.WB()&&t.nm()<0)||!!(this.VB()&&t.gm()<0)}VPt(){const t=this.SB();return!!(this.WB()&&t.nm()<0&&this.VB()&&t.gm()<0)}HPt(){const t=this.lbt;if(0!=(t&1<<18)){const s=this.YL();this.hPt=Math.sin(s),this.oPt=Math.cos(s),this.lbt=-262145&t}}evt(){return this.HPt(),this.hPt}ivt(){return this.HPt(),this.oPt}nht(t){this.aPt=+t}eht(t){this.aPt+=+t}iW(){return this.aPt}hht(t){this.lPt=+t}rht(t){this.lPt+=+t}nW(){return this.lPt}IPt(t){this.Jb.equals(t)||(this.Jb===i?(this.Jb=d.hr(d.Vo,t),this.yPt=d.hr(d.Vo,t),this.yPt.ya()):t.da(1,1,1,1)?(this.Jb=i,this.yPt=i):(this.Jb.set(t),this.yPt.set(t),this.yPt.ya()),this.RPt())}xP(t){if(t=d.mr(+t,0,1),this.$B()){if(this.zrt().Mvt()===t)return;this.zrt().AEt(t),t=this.vP()}else if(this.Jb.a===t)return;this.UPt(t)}zPt(){if(this.Sq()){const i=this.vX();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.UPt(e.vP())}}}UPt(t){f.ia(this.Jb),f.a=t,this.IPt(f),this.zPt()}Qrt(t){this.$B()?this.xP(this.zrt().Mvt()+t):this.xP(this.vP()+t)}vP(){return this.$B()?this.SB().vP()*this.zrt().Mvt():this.Jb.a}hB(t){this.Jb.ca(t)||(f.ia(t),f.a=this.vP(),this.IPt(f))}Art(t,s,i){f.$o(t,s,i),this.hB(f)}JPt(t,s,i){0===t&&0===s&&0===i||(f.ia(this.Jb),f.r+=t,f.g+=s,f.b+=i,this.hB(f))}rB(){return this.Jb}iz(){return this.yPt}ZB(){return 0!=(512&this.lbt)}qPt(t){this.$Pt(512,t)}kB(){return 0!=(1024&this.lbt)}XPt(t){this.$Pt(1024,t)}NB(){return 0!=(2048&this.lbt)}OPt(){return 0!=(3072&this.lbt)}KPt(t){this.$Pt(2048,t)}WB(){return 0!=(4096&this.lbt)}YPt(t){this.$Pt(4096,t)}VB(){return 0!=(8192&this.lbt)}ZPt(t){this.$Pt(8192,t)}UB(){return 0!=(16384&this.lbt)}QPt(t){this.$Pt(16384,t)}JB(){return 0!=(32768&this.lbt)}tRt(t){this.$Pt(32768,t)}$B(){return 0!=(this.lbt&1<<22)}sRt(t){this.$Pt(1<<22,t)}KB(){return 0!=(this.lbt&1<<23)}iRt(t){this.$Pt(1<<23,t)}eRt(){this.lbt&=-12647937}EB(t,s){if(t===this)return!1;if(t.AB())return!1;if(this.nRt(t))return!1;if(this.rRt(t))return!1;const i=t.av(),e=t.cv(),n=t.nm(),r=t.gm(),h=t.YL(),o=t.pv(),a=t.vP(),l=(t.hRt(this),t.XPt(s.OB),t.KPt(s.LB),t.YPt(s.BB),t.ZPt(s.jB),t.QPt(s.HB),t.tRt(s.zB),t.sRt(s.qB),t.iRt(s.XB),t.qPt(s.YB),i-this.av()),u=e-this.cv(),c=-this.YL(),f=Math.cos(c),d=Math.sin(c);if(s.OB&&(s.HB?t.Ka=l*f-u*d:t.Ka=l,s.BB)){const p=this.nm()/this.vPt.Urt();0!=p&&(t.Ka/=p)}if(s.LB&&(s.HB?t.Ya=l*d+u*f:t.Ya=u,s.jB)){const m=this.gm()/this.vPt.qrt();0!=m&&(t.Ya/=m)}if(s.BB){const g=this.nm();0===g||g===Number.EPSILON?(t.nPt=1,t.vPt.PEt(1)):(t.nPt=n/this.nm(),t.vPt.PEt(t.nPt))}if(s.jB){const y=this.gm();0===y||y===Number.EPSILON?(t.rPt=1,t.vPt.REt(1)):(t.rPt=r/this.gm(),t.vPt.REt(t.rPt))}return s.HB&&(t.Jo=h-this.YL()),s.zB&&(t.qb=o-this.pv()),s.qB&&t.vPt.AEt(a),s.XB&&t.F5(this.O5()),this.oRt(t),this.U4(),this.zPt(),!0}PB(t){if(t.SB()===this){const s=t.av(),i=t.cv(),e=t.nm(),n=t.gm(),r=t.YL(),h=t.pv(),o=t.vP();t.hRt(null),t.eRt(),t.z4(s,i),t.JI(e,n),t.KL(r),t.mv(h),t.xP(o),this.aRt(t),this.U4()}}lRt(){return this.MPt}uRt(){this.cRt();const t=[...this.children()];for(const i of t)this.PB(i);const s=this.SB();s&&s.PB(this),this.eRt()}cRt(){if(this.fRt(),!this.MEt){const s=[...this.children()];s.length&&(this.MEt=[],this.xEt=new WeakMap);let t=0;for(const i of s){const e=i.HW();this.MEt.push(e),this.xEt.set(e,t),t++}}const t=this.SB();t&&t.cRt()}fRt(){if(-1===this.MPt){const t=[...this.MB()];this.MPt=t.length;for(const i of t)i.fRt();const s=[...this.children()];for(const e of s)e.fRt()}}_Pt(){this.MEt&&(this.MEt.length=0),this.MEt=null,this.xEt=null;const t=this.SB();t&&t._Pt(),this.MPt=-1}AB(){return null!==this.SB()}SB(){const t=this.vPt;return null!==t?t.SB():null}vB(){let t=this;for(;t.AB();)t=t.SB();return t}*MB(){let t=this.SB();for(;t;)yield t,t=t.SB()}HCt(t){return this.vX().includes(t)}Sq(){const t=this.vPt;return null!==t&&t.Sq()}vX(){const t=this.vPt;return null!==t?t.vX():e}children(){return this.vX()}*IB(){for(const t of this.children())yield t,yield*t.IB()}GB(){return this.vX().length}Qvt(){return[...this.IB()].length}_B(t){const s=this.vX();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}qCt(s){if(s){const i=this.vX();if(i)for(let t=0;t<i.length;t++)if(s===i[t])return t}return NaN}dRt(t){this.vPt||(this.vPt=d.hr(d.xX,this)),t&&this.vPt.IEt(t)}zrt(){return this.vPt}TPt(){this.vPt&&(this.vPt.lr(),this.vPt=null)}hRt(t){t?(t.dRt(null),this.dRt(t)):(this.vPt&&this.vPt.IEt(null),this.Sq()||this.TPt())}rRt(t){if(!this.AB())return!1;const s=this.SB();return s===t||s.rRt(t)}nRt(t){if(this.HCt(t))return!0;for(const s of this.vX())if(s.nRt(t))return!0;return!1}oRt(t){this.vPt.vX().push(t)}aRt(t){const s=this.vPt.vX(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.AB()||this.TPt(),t.Sq()||t.TPt()}XCt(){const t=g.get(this);return t?t.EPt:null}pRt(){const t=g.get(this);return t?t.PPt:NaN}wq(){const t=a.get(this);return d.ue(t)?t:NaN}mRt(t){a.set(this,t)}gRt(){this.$Pt(1<<19,!0),this.RPt()}RPt(){if(m){const s=this.ef.Eb();this.wPt&&s.tS(this.wPt);let t;t=0!=(this.lbt&1<<19)?s.kw()||"<point>":s.Fw()||"<default>",this.wPt=s.Kw(t,this.hN(),this.yPt,this.pv())}}tq(){return this.wPt}s9(){return this.Jb===i}Xb(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.hN()!==t&&(this.lbt=this.lbt&~(31<<26)|t<<26,this.RPt())}hN(){return(this.lbt&31<<26)>>26}xO(t,s){const i=s&&this.sPt!==t;i&&this.Fz(),this.Qct.XIt(this,this.sPt,t),this.sPt=t,i&&this.yRt(),0!==this.pv()&&this.sPt.Oz()}SO(){return this.sPt}tO(){return this.SO().tO()}Lz(t){this.iPt=0|t}bO(){return this.sPt.q9(),this.iPt}Z9(t){this.ePt=0|t}jj(){return this.sPt.K9(),this.ePt}O7(){return this.iPt}$Pt(t,s){s?this.lbt|=t:this.lbt&=~t}O5(){return 0!=(1&this.lbt)}F5(t){if(this.$Pt(1,t),this.Sq())for(const s of this.vX())s.KB()&&s.F5(t)}gB(){return 0!=(8&this.lbt)}yB(t){t=!!t,this.gB()!==t&&(this.$Pt(8,t),t?this.U4():this.wRt())}SRt(t,s){if(this.$Pt(32,t),this.gPt&&this.gPt.clear(),s.trim()){this.gPt||(this.gPt=new Set);for(const i of s.split(" "))i&&this.gPt.add(i.toLowerCase())}else this.gPt=null}bRt(t){const s=0!=(32&this.lbt),i=this.gPt;if(t&&i)for(const e of i)if(t.has(e))return s;return!s}U4(){if(this.lbt|=65554,this.Qct.JIt(!0),this.ef.TO(),this.sPt.pz()&&(this.vRt(this.uPt,this.cPt,!0),this.lbt&=-3,this.yRt()),0!=(4&this.lbt)&&this.Mi.Nf().dispatchEvent(s),null!==this.vPt){const i=this.vPt.vX();for(let t=0,s=i.length;t<s;++t)i[t].U4()}}vRt(t,s,i){const e=this.av(),n=this.cv(),r=this.nm(),h=this.gm(),o=this.YL();t.cl(e-this.aPt*r,n-this.lPt*h,r,h),i&&this.h6()&&this.MRt(t),0===o?s.yu(t):(t.offset(-e,-n),s.Su(t,this.evt(),this.ivt()),s.offset(e,n),s.bu(t)),t.normalize()}xRt(){const t=this.lbt;0!=(2&t)&&(this.vRt(this.uPt,this.cPt,!0),this.lbt=-3&t)}Q4(){return this.xRt(),this.uPt}sB(){return this.xRt(),this.cPt}GRt(t){const s=this.av(),i=this.cv(),e=Math.round(s)-s,n=Math.round(i)-i;return 0==e&&0==n?t:(h._(t),h.offset(e,n),h)}TRt(t){this.uPt._(t),this.cPt.yu(this.uPt),this.lbt&=-3,this.$It(),this.yRt()}_Rt(t){this.$Pt(4,t)}IRt(){return 0!=(4&this.lbt)}VJ(t,s,i){return s&&0!==this.qJ()?this.zJ(this.SO().UJ()):0===this.pv()||i?t.Ul(this.Q4()):this.CRt()}CRt(){const t=this.SO(),s=this.Y4();return!(s>=t.S9())&&(t.y9(s,r),r.Ul(this.Q4()))}zJ(t){const s=this.Q4(),i=s.bl(),e=s.Ml(),n=s.vl(),r=s.xl(),h=this.Y4(),o=h+this.qJ();return t.gy(i,n,h,e,r,o)}eB(){const t=this.SO();if(t.R9())return this.zJ(t.UJ());{const s=t.tO();return this.VJ(t.uN(),s.jJ(),s.G5())}}YJ(t){this.$Pt(1<<20,t)}KJ(t){this.$Pt(1<<21,t)}ERt(){return 0!=(this.lbt&1<<20)}PRt(){return 0!=(this.lbt&1<<21)}RRt(t){this.pPt=t,this.ARt(),this.h6()&&(this.xPt.FRt=null)}DRt(){return this.pPt}ORt(){return null!==this.pPt||this.h6()}kRt(){return this.LRt(this.nm(),this.gm(),this.YL(),this.evt(),this.ivt())}NRt(t,s,i){let e=0,n=1;return 0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.LRt(t,s,i,e,n)}LRt(n,r,t,h,o){let s=this.mPt;null===s&&(s={GPt:d.hr(d.Pu),width:NaN,height:NaN,angle:NaN},this.mPt=s);const a=s.GPt;if(s.width!==n||s.height!==r||s.angle!==t){const l=this.pPt;if(this.h6()){let t=this.iW(),s=this.nW(),i=this.o6(),e=this.xPt.FRt;e||(l?(u._(l),u.offset(t,s)):u.Nu(),e=i.Qv(u),this.xPt.FRt=e),i.t2(e,a),a.offset(-t,-s),a.Vu(n,r,h,o)}else l?(a._(l),a.Vu(n,r,h,o)):a.ju(this.sB(),-this.av(),-this.cv());s.width=n,s.height=r,s.angle=t}return a}ARt(){this.BRt(!0);const t=this.mPt;null!==t&&(t.width=NaN)}t6(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.HW().bL().aL())throw new Error("object does not support mesh");this.i6(),this.xPt={WRt:d.hr(d.Kg.Iv,t,s),jRt:d.hr(d.Kg.Iv,t,s),FRt:null}}h6(){return null!==this.xPt}o6(){if(this.h6())return this.xPt.WRt;throw new Error("no mesh")}VRt(){if(this.h6())return this.xPt.jRt;throw new Error("no mesh")}HRt(t){this.$Pt(65536,t)}URt(){return 0!=(65536&this.lbt)}BRt(t){this.$Pt(1<<17,t)}zRt(){return 0!=(this.lbt&1<<17)}MRt(t){const s=this.xPt.WRt,i=Math.min(s.Hv(),0),e=Math.min(s.Uv(),0),n=Math.max(s.zv(),1),r=Math.max(s.Jv(),1),h=t.width(),o=t.height();t.offsetLeft(i*h),t.offsetTop(e*o),t.Pl((n-1)*h),t.Rl((r-1)*o),this.aM=s.qv()}i6(){this.xPt&&(this.xPt.WRt.lr(),this.xPt.jRt.lr(),this.xPt=null,this.ARt())}n6(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!p.has(e))throw new Error("invalid mode");let n="relative"===e,r=i.x,h=i.y,o=i.Q5,a="number"==typeof i.u?i.u:n?0:-1,l="number"==typeof i.v?i.v:n?0:-1;if(!this.h6())return!1;const u=this.o6(),c=u.Xv(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.pv()!==o&&(c.mv(o),f=!0),n&&(r+=t/(u.Nv()-1),h+=s/(u.Bv()-1)),a=-1!==a||n?(n&&(a+=t/(u.Nv()-1)),d.mr(a,0,1)):c.gv(),l=-1!==l||n?(n&&(l+=s/(u.Bv()-1)),d.mr(l,0,1)):c.wv(),c.av()===r&&c.cv()===h&&c.gv()===a&&c.wv()===l?f:(c.lv(r),c.dv(h),c.yv(a),c.Sv(l),this.ARt(),!0)}PCt(){return this.Mi.PCt()}wB(t,s){return!!this.Q4().Jl(t,s)&&!!this.sB().Jl(t,s)&&(this.PCt()?this.Mi.p6().gGt(t,s):!this.ORt()||this.kRt().Jl(t-this.av(),s-this.cv()))}JRt(){return 0!=(16&this.lbt)}$It(){if(this.JRt()&&this.gB()&&0==(256&this.lbt)){const t=this.Q4(),s=this.Qct.zIt(),i=this.fPt;if(r.set(s.Q7(t.bl()),s.tU(t.vl()),s.Q7(t.Ml()),s.tU(t.xl())),!i.equals(r)){const e=this.Mi;i===n?(s.sU(e,null,r),this.fPt=d.hr(d.Rect,r)):(s.sU(e,i,r),i._(r)),this.lbt&=-17}}}qRt(){this.lbt|=16}wRt(){const t=this.fPt;t!==n&&(this.Qct.zIt().sU(this.Mi,t,null),this.fPt=n)}yRt(){const t=this.SO();if(t.pz()&&0==(256&this.lbt)){const s=t.e9(),i=this.Q4(),e=this.dPt;if(r.set(s.Q7(i.bl()),s.tU(i.vl()),s.Q7(i.Ml()),s.tU(i.xl())),!e.equals(r)){const n=this.Mi;e===o?(s.sU(n,null,r),this.dPt=d.hr(d.Rect,r)):(s.sU(n,e,r),e._(r)),t.n9()}}}Fz(){const t=this.dPt;t!==o&&(this.SO().e9().sU(this.Mi,t,null),this.dPt=o)}X9(){return this.dPt}aB(){const t=this.Mi,s=this.sPt,i=s.MO();i.length&&i.at(-1)===t||(s.Az(t,!1),s.Ez(t,!1),this.ef.TO())}uB(){const t=this.Mi,s=this.sPt,i=s.MO();i.length&&i[0]===t||(s.Az(t,!1),s.Rz(t,!1),this.ef.TO())}fB(t){const s=this.Mi,i=this.sPt;if(i.tO()!==t.tO())throw new Error("layer from different layout");t!==i&&(i.Az(s,!0),this.xO(t),t.Ez(s,!0),this.ef.TO())}pB(t,s){let i=this.Mi,e=!1,n=this.sPt;if(t.BN()!==i.BN()){const r=t.wO();if(!r)throw new Error("expected world instance");const h=r.SO(),o=(n.wF()!==h.wF()&&(n.Az(i,!0),this.xO(h),h.Ez(i,!0),e=!0),h.sJ(i,t,!!s));(e||o)&&this.ef.TO()}}V4(){return this.SPt}$Rt(t){this.$Pt(64,t)}aJ(){return 0!=(64&this.lbt)}mq(t,s=null){const i={x:this.av(),y:this.cv(),w:this.nm(),h:this.gm(),l:this.SO().Yz(),zi:this.bO()},e=(0!==this.pv()&&(i.ze=this.pv()),0!==this.YL()&&(i.a=this.DPt()),this.s9()||(i.c=this.Jb.toJSON()),.5!==this.iW()&&(i.oX=this.iW()),.5!==this.nW()&&(i.oY=this.nW()),0!==this.hN()&&(i.bm=this.hN()),this.O5()||(i.v=this.O5()),this.gB()||(i.ce=this.gB()),this.IRt()&&(i.be=this.IRt()),this.SPt&&(i.fx=this.SPt.mq()),0!=(32&this.lbt));return e&&(i.sfi=e),this.gPt&&(i.sft=[...this.gPt].join(" ")),this.vPt&&"visual-state"!==t&&(i.sgi=this.vPt.mq(t,s),g.has(this))&&(i.sgcd=g.get(this).EPt,i.sgzid=g.get(this).PPt),this.h6()&&(i.mesh=this.o6().Mv()),i}jEt(){return{x:this.Ka,y:this.Ya,z:this.qb,w:this.nPt,h:this.rPt,a:this.Jo,sgi:this.zrt()?this.zrt().kEt():null}}zEt(t){t&&(this.Ka=t.x,this.Ya=t.y,this.qb=t.z,this.nPt=t.w,this.rPt=t.h,this.Jo=t.a,t.sgi&&this.zrt()&&this.zrt().gq(t.sgi),this.NPt(),this.U4())}iCt(){this._Pt(),this.uRt(),this.dRt(null),this.vPt&&this.vPt.HEt(this.MEt,this.xEt)}PK(t){"visual-state"!==t&&this.uRt()}AK(t,s="full",i=null){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.lbt)&&this.vPt.AK(t.sgi,i)}fEt(t,s="full",i){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.lbt)&&(this.vPt.HEt(null,null),this._Pt(),this.U4())}gq(t,s){if(m=!1,this.lv(t.x),this.dv(t.y),this.fm(t.w),this.rm(t.h),this.Lz(t.zi),this.mv(t.hasOwnProperty("ze")?t.ze:0),this.KL(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?f.Ba(t.c):t.hasOwnProperty("o")?(f.ia(this.Jb),f.a=t.o):f.qo(1,1,1,1),this.IPt(f),this.nht(t.hasOwnProperty("oX")?t.oX:.5),this.hht(t.hasOwnProperty("oY")?t.oY:.5),this.Xb(t.hasOwnProperty("bm")?t.bm:0),this.F5(!t.hasOwnProperty("v")||t.v),this.yB(!t.hasOwnProperty("ce")||t.ce),this._Rt(!!t.hasOwnProperty("be")&&t.be),this.SRt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.SPt&&t.hasOwnProperty("fx")&&this.SPt.gq(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==s&&this.MEt)for(const i of this.MEt)i.qj()||this.ef.AN(i);if(t.hasOwnProperty("sgi")&&"visual-state"!==s){this.dRt(null);const e=this.vPt,n=t.sgi;e.gq(n),e.HEt(this.MEt,this.xEt),t.sgcd&&d.ue(t.sgzid)&&g.set(this,{EPt:t.sgcd,PPt:t.sgzid})}if(t.hasOwnProperty("mesh")){const r=t.mesh;this.t6(r.cols,r.rows),this.o6().xv(r)}else this.i6();this.U4(),m=!0,this.RPt(),"visual-state"!==s&&this.ef.XRt(this.HW(),t)}}}{const Sa=self.Os;Sa.k_t=class extends Sa.nr{constructor(t,s){super();const i=t.NO(),e=i.cyt(s[1]),n=(i.KRt().uTt(e),this.ef=i,this.Qct=t,this.UGt=Sa.zk.E6(e),this.Ext=null,this.YRt=null,this.d_t=e.Instance,this.yU=s[2],this.dr=s[0],this.$yt=this.ef.Edt(s[3]),this.UGt.VSt());if(n<2&&(this.Ext=Sa.hr(e.Q_t,this),!(this.Ext instanceof Sa.HGt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(Sa.zk.cxt(this,n),2<=n){const r=e.Q_t??globalThis.n8;if(this.YRt=new r,!(this.YRt instanceof globalThis.n8))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.YRt=new globalThis.I6;Sa.zk.fxt(n),this.oxt()}static qM(t,s){return Sa.hr(Sa.k_t,t,s)}lr(){this.ef=null,this.UGt=null,this.Ext&&(this.Ext.lr(),this.Ext=null),this.d_t=null}Nbt(){return this.Ext}oxt(){this.Ext?this.Ext.oxt():this.YRt&&this.YRt.oj()}NO(){return this.ef}TN(){return this.Qct}v6(){return this.UGt}vIt(){return this.d_t}$c(){return this.dr}Yz(){return this.yU}x6(){return this.YRt}Edt(){return this.$yt}}}{const ba=self.Os,va=self.S6;ba.mCt=class extends ba.nr{constructor(t){super(),this.ef=t.runtime,this._wt=t.M6,this.UGt=this._wt.v6(),this.Mi=t.T6,this.Hg=t.index,this.oCt=null,this.aCt=null,this.UGt.Ez(this.Mi)}lr(){this.aCt&&(this.aCt.PN(),this.aCt=null),this.UGt.Az(this.Mi),this.oCt&&(this.oCt.lr(),this.oCt=null),this.ef=null,this._wt=null,this.UGt=null,this.Mi=null}gIt(t){if(this.oCt)throw new Error("already got sdk instance");const s=this.v6().VSt();if(s<2){if(this.oCt=ba.hr(this._wt.vIt(),this,t),!(this.oCt instanceof ba.zGt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const i=this.v6().axt();this.uxt(i.Instance,t)}}p6(){return this.oCt??this.aCt}_6(){return this.Mi}NO(){return this.ef}G6(){return this._wt}v6(){return this.UGt}wrt(){return this.Hg}XGt(){this.oCt?this.oCt.XGt():this.aCt.a8()}QGt(t,s){this.oCt&&this.oCt.QGt(t,s)}cEt(){return this.oCt?this.oCt.Kxt():this.aCt.I4()}Mv(t="full"){return this.oCt?this.oCt.Mv(t):this.aCt.C4(t)}xv(t,s="full"){if(this.oCt)return this.oCt.xv(t,s);this.aCt.E4(t,s)}static ZRt(t,s,i){let e=globalThis.r8,n,r;n=s instanceof e?t.u5(s):s.$Gt(),r=i instanceof e?t.u5(i):i.$Gt();const h=n._6(),o=r._6(),a=h.TN().wF(),l=o.TN().wF();if(a!==l)return a-l;const u=h.QCt(),c=o.QCt();return u!==c?u-c:n.wrt()-r.wrt()}uxt(t,s){const i=va,e=t??this.oCt.axt(),n=e||i,r=this.v6().VSt();if(ba.zk.cxt(this,r),ba.zk.cTt(s),this.aCt=new n,ba.zk.fTt(),ba.zk.fxt(r),!e||this.aCt instanceof i)return this.aCt;throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`)}Axt(){return this.aCt||this.uxt()}tGt(){return!!this.aCt}}}{const Ma=self.Os;Ma.QU=class extends Ma.nr{constructor(t,s){super(),this.Pv=t,this.QRt=[],this.tAt=[],this.sAt=new Map,this.iAt=[],this.eAt=[],this.nAt=new Set,this.Mb=!0;for(const i of s){const e=Ma.hr(Ma.rAt,this,i,this.QRt.length);this.QRt.push(e),this.sAt.set(e.$c().toLowerCase(),e),3<=i.length&&this.iAt.push(this.hAt(e,i[2]))}this.NO().oAt(this)}lr(){this.NO().aAt(this);for(const t of this.eAt)t.lr();Ma.Nh(this.eAt),Ma.Nh(this.QRt),Ma.Nh(this.tAt),this.sAt.clear(),Ma.Nh(this.iAt),this.Pv=null}lAt(t){this.nAt.add(t)}uAt(t){this.nAt.delete(t)}cAt(t){t._w()&&(this.eAt=this.QRt.map(t=>{const s=t.sG();return 0<s.GetCustomParametersByteSize()?Ma.hr(Ma.Kg.WebGPUEffectCustomParamsBuffer,s):null}),this.fAt());for(const s of this.nAt)s.cAt(t)}pIt(t){if(t.length){this.QRt=t.concat(this.QRt);for(const s of t)this.sAt.set(s.$c().toLowerCase(),s);for(let t=0,s=this.QRt.length;t<s;++t)this.QRt[t].Jz(t)}}hAt(t,s){t.dAt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const n=Ma.hr(Ma.Vo);n.Ba(e),i[t]=n}}return i}Wv(){return this.Pv}NO(){return this.Pv.NO()}A6(){Ma.Nh(this.tAt);let t=!0;for(const s of this.QRt)s.Ypt()&&(this.tAt.push(s),s.sG().Ob()||(t=!1));this.Mb=t}UL(){return this.QRt}EIt(){return 0<this.QRt.length}_nt(t){return this.sAt.get(t.toLowerCase())||null}pAt(t){if((t=Math.floor(+t))<0||t>=this.QRt.length)throw new RangeError("invalid effect type index");return this.QRt[t]}P6(t){return this.pAt(t).Ypt()}R6(t,s){this.pAt(t).dAt(s)}i9(){return this.tAt}aJ(){return 0<this.tAt.length}Ob(){return this.Mb}Tnt(t){return this.iAt[t]}nz(t){return(t<this.eAt.length?this.eAt:this.iAt)[t]}F6(t,s){if(t<0||t>=this.iAt.length)return null;const i=this.iAt[t];return s<0||s>=i.length?null:i[s]}D6(t,s,i){if(t<0||t>=this.iAt.length)return!1;const e=this.iAt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof Ma.Vo){if(n.ca(i))return!1;n.ia(i)}else{if(n===i)return!1;e[s]=i}return t<this.eAt.length&&this.eAt[t].SetParameterValue(s,i),!0}fAt(){const i=this.iAt,e=this.eAt;for(let t=0,s=Math.min(i.length,e.length);t<s;++t){const n=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)n.SetParameterValue(t,r[t])}}static mAt(t){return t&&t instanceof Ma.Vo?{t:"color",v:t.toJSON()}:t}static gAt(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const s=t.t;if("color"!==s)throw new Error("invalid effect parameter type");{const i=Ma.hr(Ma.Vo);return i.Ba(t.v),i}}}static yAt(t){return t.map(Ma.QU.mAt)}static wAt(t){return t.map(Ma.QU.gAt)}Mv(){return this.QRt.map(t=>({name:t.$c(),active:t.Ypt(),params:Ma.QU.yAt(this.iAt[t.wF()])}))}xv(t){for(const s of t){const i=this._nt(s.name);i&&(i.dAt(s.active),this.iAt[i.wF()]=Ma.QU.wAt(s.params))}this.A6(),this.fAt()}}}{const xa=self.Os;xa.rAt=class extends xa.nr{constructor(t,s,i){super(),this.ZU=t,this.rf=s[0],this.dr=s[1],this.Hg=i,this.Hb=null,this.n0=!0}lr(){this.ZU=null,this.Hb=null}dIt(t){const s=xa.hr(xa.rAt,t,[this.rf,this.dr],-1);return s.Hb=this.Hb,s.n0=this.n0,s}cAt(t){const s=t.Aw(this.rf);if(!s)throw new Error("failed to find shader program '"+this.rf+"'");this.Hb=s}HL(){return this.ZU}$c(){return this.dr}Jz(t){this.Hg=t}wF(){return this.Hg}Wv(){return this.ZU.Wv()}NO(){return this.ZU.NO()}dAt(t){this.n0=!!t}Ypt(){return this.n0}sG(){return this.Hb}SAt(){const i=[];for(let t=0,s=this.Hb.iG();t<s;++t){const e=this.Hb.eG(t);if("float"===e||"percent"===e)i.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");i.push(xa.hr(xa.Vo,1,1,1,1))}}return i}}}{const Ga=self.Os;Ga.bPt=class extends Ga.nr{constructor(t,s){super(),this.Mi=t,this.bAt=s,this.ZU=t.TN().HL(),this.vAt=!0,this.hz=!0,this.MAt=!1,this.xAt=!1,this.GAt=!1,this.TAt=!1,this.pF=Ga.hr(Ga.Kg.uA,t.NO().Ck().sz(),{QR:(t,s)=>{const i=s.hF(),e=i.wO();t.Kb(e.iz()),t.pS(e.Y4()),i.Yv(t),t.pS(0)},tA:t=>{const s=t.cGt(),[i,e]=t.uGt();return{Q3:s,tF:i,sF:e}},sA:t=>this.nz(t)}),this._At=[],this.tAt=[],this.Mb=!0,this.iAt=[],this.eAt=[],this.cAt(t.NO().Eb());for(let t=0,s=this.ZU.UL().length;t<s;++t)this._At.push(!0);this.A6(),this.ZU.lAt(this)}lr(){this.ZU.uAt(this);for(const t of this.eAt)t&&t.lr();Ga.Nh(this.eAt),this.pF.lr(),this.pF=null,Ga.Nh(this._At),Ga.Nh(this.tAt),Ga.Nh(this.iAt),this.Mi=null,this.ZU=null}cAt(t){t._w()&&(this.eAt=this.ZU.UL().map(t=>{const s=t.sG();return 0<s.GetCustomParametersByteSize()?Ga.hr(Ga.Kg.WebGPUEffectCustomParamsBuffer,s):null}))}CPt(t){let s=0;for(const i of t)this.iAt.push(this.hAt(s,i)),++s;this.fAt(),this.A6()}hAt(t,s){this._At[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const n=Ga.hr(Ga.Vo);n.Ba(e),i[t]=n}}return i}MCt(){for(const t of this.ZU.UL())this.iAt.push(t.SAt());this.fAt()}Wv(){return this.Pv}HL(){return this.ZU}yF(){return this.t9(),this.pF}NO(){return this.Mi.NO()}A6(){Ga.Nh(this.tAt);let t=this.bAt,i=this.ZU.UL(),e=this.tAt,n=this._At,r=!0;for(let t=0,s=i.length;t<s;++t)if(n[t]){const h=i[t];e.push(h),h.sG().Ob()||(r=!1)}this.Mb=r,t.$Rt(!!e.length),this.vAt=!0}t9(){const t=this.Mi,s=this.bAt,i=s.s9(),e=t.bL().nL(),n=0!==s.YL()||0!==s.SO().YL()||s.nm()<0||s.gm()<0,r=t.pGt(),h=t.Db();(this.vAt||i!==this.hz||e!==this.MAt||n!==this.xAt||r!==this.GAt||h!==this.TAt||this.pF.t3())&&(this.pF.s3(this.tAt.map(t=>t.sG()),{eA:this.tAt.map(t=>t.wF()),nA:!i||h,hA:e,oA:r,aA:n}),this.vAt=!1,this.hz=i,this.MAt=e,this.xAt=n,this.GAt=r,this.TAt=h)}i9(){return this.tAt}Tnt(t){return this.iAt[t]}nz(t){return(t<this.eAt.length?this.eAt:this.iAt)[t]}F6(t,s){if(t<0||t>=this.iAt.length)return null;const i=this.iAt[t];return s<0||s>=i.length?null:i[s]}D6(t,s,i){if(t<0||t>=this.iAt.length)return!1;const e=this.iAt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof Ga.Vo){if(n.ca(i))return!1;n.ia(i)}else{if(n===i)return!1;e[s]=i}return t<this.eAt.length&&this.eAt[t].SetParameterValue(s,i),!0}fAt(){const i=this.iAt,e=this.eAt;for(let t=0,s=e.length;t<s;++t){const n=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)n.SetParameterValue(t,r[t])}}Ob(){return this.Mb}IAt(){return this.tAt.some(t=>t.sG().Nb())}P6(t){return this._At[t]}R6(t,s){this._At[t]=!!s}UL(){return this.ZU.UL()}mq(){return this.ZU.UL().map(t=>({name:t.$c(),active:this._At[t.wF()],params:Ga.QU.yAt(this.iAt[t.wF()])}))}gq(t){for(const s of t){const i=this.ZU._nt(s.name);i&&(this._At[i.wF()]=s.active,this.iAt[i.wF()]=Ga.QU.wAt(s.params))}this.A6(),this.fAt()}}}{let _=self.Os,r=[],b=[],h=[],v=_.hr(_.Pu),w=_.hr(_.Pu),M=_.hr(_.Kl),d=_.hr(_.Rect),p=_.hr(_.Rect),m=null,g=null,y=null;_.CAt=class extends _.nr{constructor(t){super(),this.ef=t,this.EAt=0,this.PAt=0,this.RAt=[],this.AAt=0,this.FAt=0,this.DAt=0,this.OAt=0,this.kAt=new self.nk(this)}lr(){this.ef=null}NO(){return this.ef}GF(){return this.kAt}LAt(){this.FAt=this.AAt,this.AAt=0,this.OAt=this.DAt,this.DAt=0}NAt(){return this.FAt}BAt(){return this.OAt}WAt(t,s){const i=t.wO(),e=s.wO();i&&e&&i.gB()&&e.gB()&&this.RAt.push([t,s])}Vvt(s,i,e){for(const[n,r]of this.RAt){let t=null;if(s===n)t=r;else{if(s!==r)continue;t=n}t.Xvt(i)&&!e.includes(t)&&e.push(t)}}Hvt(t,s){if(this.RAt.length)for(const[i,e]of this.RAt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}jAt(){_.Nh(this.RAt)}hk(t,s){if(!t||!s||t===s)return!1;const i=t.wO(),e=s.wO();if(!i.gB()||!e.gB())return!1;this.AAt++;const n=i.SO(),r=e.SO(),h=n.H9(r);return h?this.VAt(i,e):this.HAt(i,e)}VAt(t,s){if(!t.Q4().Ul(s.Q4()))return!1;if(this.DAt++,!t.sB().Mu(s.sB()))return!1;if(t.PCt()&&s.PCt())return!1;if(t.PCt())return this.UAt(t,s);if(s.PCt())return this.UAt(s,t);if(!t.ORt()&&!s.ORt())return!0;const i=t.kRt(),e=s.kRt();return i.Hu(e,s.av()-t.av(),s.cv()-t.cv())}HAt(i,e){const t=i.PCt(),s=e.PCt();if(t&&!s)return this.zAt(i,e);if(s&&!t)return this.zAt(e,i);if(s||t)return!1;{const n=i.SO(),r=e.SO(),h=(v._(i.kRt()),w._(e.kRt()),v.Ou());for(let t=0,s=h.length;t<s;t+=2){const a=t+1,l=h[t],u=h[a],[c,f]=n.gN(l+i.av(),u+i.cv());h[t]=c,h[a]=f}const o=w.Ou();for(let t=0,s=o.length;t<s;t+=2){const d=t+1,p=o[t],m=o[d],[g,y]=r.gN(p+e.av(),m+e.cv());o[t]=g,o[d]=y}return v.Bu(),w.Bu(),this.DAt++,v.Hu(w,0,0)}}zAt(t,s){const i=t.SO(),e=s.SO(),n=(m=m||_.hr(_.Pu),g=g||_.hr(_.Rect),y=y||_.hr(_.Kl),s.av()),r=s.cv(),[h,o]=e.gN(n,r),[a,l]=i.fN(h,o),u=a-n,c=l-r;if(g._(s.Q4()),g.offset(u,c),!t.Q4().Ul(g))return!1;if(y._(s.sB()),y.offset(u,c),this.DAt++,!t.sB().Mu(y))return!1;m._(s.kRt());const f=m.Ou();for(let t=0,s=f.length;t<s;t+=2){const d=t+1;f[t]+=u,f[d]+=c}return m.Bu(),this.UAt(t,s,a,l,m,g,y)}UAt(t,e,s,i,n,r,h){const o=void 0!==r?r:e.Q4(),a=t.av(),l=t.cv(),u=t.HW().p6(),c=void 0!==s?s:e.av(),f=void 0!==i?i:e.cv(),d=e.ORt(),p=void 0!==h?h:e.sB(),m=b;u.GetCollisionRectCandidates(o,m);for(let t=0,s=m.length;t<s;++t){const g=m[t],y=g.GetRect();if(this.AAt++,o.zl(y,a,l)&&(M.yu(y),M.offset(a,l),M.Mu(p)))if(d){let t=void 0!==n?n:e.kRt(),s=c,i=f;void 0!==n&&(s=e.av(),i=e.cv());const w=g.GetPoly();if(w){if(this.DAt++,w.Hu(t,s-(a+y.bl()),i-(l+y.vl())))return _.Nh(m),!0}else if(v.ju(M,0,0),v.Hu(t,s,i))return _.Nh(m),!0}else{const S=g.GetPoly();if(!S)return _.Nh(m),!0;if(v.ju(p,0,0),S.Hu(v,-(a+y.bl()),-(l+y.vl())))return _.Nh(m),!0}}return _.Nh(m),!1}JAt(t,o,a){const l=t.RL(),s=this.ef.eD();if(!s)throw new Error("cannot call outside event");const u=s.Eft(),i=new Map,c=t=>{let s=i.get(t);return void 0===s&&(s=t.V5(),i.set(t,s)),s};if(l.fft()){a||(l.Sft(!1),_.Nh(l.bft())),u&&_.Nh(l.vft());for(const e of t.PL()){let n=e.wO(),r=n.SO();if(!(!c(r)||!n.eB())&&o.some(([t,s])=>{const[i,e]=r.fN(t,s,n.Y4());return n.wB(i,e)})){if(a)return!1;l.yft(e)}else u&&l.wft(e)}}else{let i,e=!1,h=(!u||s.vgt(this.ef.bdt())||this.ef.Hbt()&&!l.vft().length&&l.bft().length?i=l.bft():(i=l.vft(),e=!0),0);for(let s=0,t=i.length;s<t;++s){let t=i[s],n=t.wO(),r=n.SO();if(!(!c(r)||!n.eB())&&o.some(([t,s])=>{const[i,e]=r.fN(t,s,n.Y4());return n.wB(i,e)})){if(a)return!1;e?l.yft(t):i[h++]=t}else e?i[h++]=t:u&&l.wft(t)}a||(i.length=h)}return t.iyt(),i.clear(),!!a||l.dft()}qAt(t,s){if(t)for(const i of s.KIt())if(!t.H9(i))return!1;return!0}Vbt(t,s,i,e){if(s.Vz())for(const n of s.$mt())this.qAt(t,n)?(n.qIt(),n.zIt().iU(i,e)):_.$n(e,n.PL());else this.qAt(t,s)?(s.qIt(),s.zIt().iU(i,e)):_.$n(e,s.PL())}yk(t,s,i,e){for(const n of s)this.Vbt(t,n,i,e)}$At(t,s,i){const e=this.ef.pTt();e&&this.yk(t,e.iY(),s,i)}XAt(t,s,i){const e=this.ef.mTt();e&&this.yk(t,e.iY(),s,i)}bRt(t,s){return t.FCt()&&(!s||s.wO().bRt(t.$St().get("solidTags")))}uk(t){const s=t.wO();this.$At(s.SO(),s.Q4(),r);for(const i of r)if(this.bRt(i,t)&&this.hk(t,i))return _.Nh(r),i;return _.Nh(r),null}KAt(t,s){this.$At(null,t,r);for(const i of r)if(this.bRt(i,s)&&this.YAt(t,i))return _.Nh(r),i;return _.Nh(r),null}ZAt(t,s){let i=null;s&&(i=h,_.Nh(i));const e=t.wO();this.XAt(e.SO(),e.Q4(),r);for(const n of r)if(n.OCt()&&this.hk(t,n)){if(!s)return _.Nh(r),n;i.push(n)}return _.Nh(r),i}QAt(s,i,e,n,r){n=n||50;const h=s.wO(),o=h.av(),a=h.cv();for(let t=0;t<n;++t)if(h.z4(o+i*t,a+e*t),h.U4(),!this.hk(s,r))return!0;return h.z4(o,a),h.U4(),!1}t3t(s,i,e,n,r,h){n=n||50;let o=s.wO(),a=o.av(),l=o.cv(),u=null,c=null;for(let t=0;t<n;++t)if(o.z4(a+i*t,l+e*t),o.U4(),!this.hk(s,u))if(u=this.uk(s))c=u;else if(r&&(u=h?this.hk(s,h)?h:null:this.ZAt(s))&&(c=u),!u)return c&&this.s3t(s,i,e,c,16,!0),!0;return o.z4(a,l),o.U4(),!1}i3t(i,e,n,t){t=t||50;let r=i.wO(),h=r.av(),o=r.cv(),a=null,l=null;for(let s=0;s<t;++s)for(let t=0;t<2;++t){const u=2*t-1;if(r.z4(h+e*s*u,o+n*s*u),r.U4(),!this.hk(i,a)){if(!(a=this.uk(i)))return l&&this.s3t(i,e*u,n*u,l,16,!0),!0;l=a}}return r.z4(h,o),r.U4(),!1}s3t(t,s,i,e,n,r){let h=2,o=!1,a=!1,l=t.wO(),u=l.av(),c=l.cv();for(;h<=n;){const f=1/h;h*=2,l.X4(s*f*(o?1:-1),i*f*(o?1:-1)),l.U4(),this.hk(t,e)||r&&this.uk(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.av(),c=l.cv())}a&&(l.z4(u,c),l.U4())}e3t(i,t=100){let e=0,n=i.wO(),r=n.av(),h=n.cv(),o=0,a=this.uk(i);if(!a)return!0;for(;e<=t;){let t=0,s=0;switch(o){case 0:t=0,s=-1,e++;break;case 1:t=1,s=-1;break;case 2:t=1,s=0;break;case 3:t=1,s=1;break;case 4:t=0,s=1;break;case 5:t=-1,s=1;break;case 6:t=-1,s=0;break;case 7:t=-1,s=-1}if(o=(o+1)%8,n.z4(Math.floor(r+t*e),Math.floor(h+s*e)),n.U4(),!this.hk(i,a)&&!(a=this.uk(i)))return!0}return n.z4(r,h),n.U4(),!1}n3t(t,s,i,e){const n=t.wO(),r=n.av(),h=n.cv(),o=Math.max(10,_.Mr(s,i,r,h)),a=_.Tr(s,i,r,h),l=e||this.uk(t);if(!l)return _.gr(a+Math.PI);let u=l,c=0,f=0,d=_.yr(5),p;for(p=1;p<36;++p){const G=a-p*d;if(n.z4(s+Math.cos(G)*o,i+Math.sin(G)*o),n.U4(),!this.hk(t,u)&&!(u=e?null:this.uk(t))){c=G;break}}for(36===p&&(c=_.gr(a+Math.PI)),u=l,p=1;p<36;++p){const T=a+p*d;if(n.z4(s+Math.cos(T)*o,i+Math.sin(T)*o),n.U4(),!this.hk(t,u)&&!(u=e?null:this.uk(t))){f=T;break}}if(36===p&&(f=_.gr(a+Math.PI)),n.z4(r,h),n.U4(),f===c)return f;let m=_._r(f,c)/2,g;g=_.Cr(f,c)?_.gr(c+m+Math.PI):_.gr(f+m);const y=Math.cos(a),w=Math.sin(a),S=Math.cos(g),b=Math.sin(g),v=y*S+w*b,M=y-2*v*S,x=w-2*v*b;return _.Tr(0,0,M,x)}r3t(t,s,i,e,n){if(!n)return!1;const r=n.wO();if(!r.gB())return!1;if(this.AAt++,d.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!r.Q4().Ul(d))return!1;if(n.PCt())return this.h3t(t,s,i,e,n,r);if(this.DAt++,!r.sB().vu(t,s,i,e))return!1;if(!r.ORt())return!0;const h=r.kRt();return h.vu(r.av(),r.cv(),t,s,i,e)}h3t(i,e,n,r,t,s){const h=s.av(),o=s.cv(),a=t.p6(),l=b;p.set(i,e,n,r),p.normalize(),a.GetCollisionRectCandidates(p,l);for(let t=0,s=l.length;t<s;++t){const u=l[t],c=u.GetRect();if(this.AAt++,d.zl(c,h,o)&&(M.yu(c),M.offset(h,o),M.vu(i,e,n,r))){const f=u.GetPoly();if(!f)return _.Nh(l),!0;if(this.DAt++,f.vu(h+c.bl(),o+c.vl(),i,e,n,r))return _.Nh(l),!0}}return _.Nh(l),!1}YAt(t,s){if(!s)return!1;const i=s.wO();if(!i.gB())return!1;if(this.AAt++,!i.Q4().Ul(t))return!1;if(s.PCt())return this.o3t(t,s,i);if(this.DAt++,M.yu(t),!i.sB().Mu(M))return!1;if(!i.ORt())return!0;const e=v,n=(e.yu(t,i.av(),i.cv()),i.kRt());return e.Hu(n,0,0)}o3t(i,t,s){const e=s.av(),n=s.cv(),r=t.p6(),h=b;r.GetCollisionRectCandidates(i,h);for(let t=0,s=h.length;t<s;++t){const o=h[t],a=o.GetRect();if(this.AAt++,i.zl(a,e,n)){const l=o.GetPoly();if(!l)return _.Nh(h),!0;if(this.DAt++,v.yu(i,0,0),l.Hu(v,-(e+a.bl()),-(n+a.vl())))return _.Nh(h),!0}}return _.Nh(h),!1}a3t(t,s){if(t){const i=t.wO();i.gB()&&(this.AAt++,i.Q4().Ul(s.rect))&&(t.PCt()?this.l3t(t,i,s):(this.DAt++,i.ORt()?s.u3t(t,i.av(),i.cv(),i.kRt()):s.c3t(t,i.sB())))}}l3t(i,e,n){const r=e.av(),h=e.cv(),o=b;i.p6().GetCollisionRectCandidates(n.rect,o);for(let t=0,s=o.length;t<s;t++){const a=o[t],l=a.GetRect();if(this.AAt++,n.rect.zl(l,r,h)){const u=a.GetPoly();this.DAt++,u?n.u3t(i,r+l.bl(),h+l.vl(),u):n.f3t(i,e.av(),e.cv(),l)}}_.Nh(o)}fk(t,s){if(t!==this.EAt||s!==this.PAt){this.EAt=t,this.PAt=s;const i=this.ef.jz();for(const e of i)if(e.Kk()){for(const n of e.EL())n.wO().wRt();e.zIt().d3t(t,s),e.JIt();for(const r of e.EL()){const h=r.wO();h.qRt(),h.$It()}}}}pk(){return[this.EAt,this.PAt]}p3t(t,s){this.EAt=t,this.PAt=s}}}{const Ta=self.Os;Ta.x_t=class extends Ta.nr{constructor(t,s){super(),this.X7=t,this.K7=s,this.Y7=Ta.hr(Ta.Xu)}lr(){this.Y7.lr(),this.Y7=null}d3t(t,s){if(!this.Y7.Zu())throw new Error("grid not empty");this.X7=t,this.K7=s}Z7(t,s,i){let e=this.Y7.Qs(t,s);return e||(i?(e=Ta.hr(Ta.m3t,this,t,s),this.Y7.Set(t,s,e),e):null)}Q7(t){const s=Math.floor(t/this.X7);return isFinite(s)?s:0}tU(t){const s=Math.floor(t/this.K7);return isFinite(s)?s:0}sU(e,n,r){if(n)for(let i=n.bl(),t=n.Ml();i<=t;++i)for(let t=n.vl(),s=n.xl();t<=s;++t)if(!r||!r.Jl(i,t)){const h=this.Z7(i,t,!1);h&&(h.y0(e),h.Zu())&&this.Y7.Qu(i,t)}if(r)for(let i=r.bl(),t=r.Ml();i<=t;++i)for(let t=r.vl(),s=r.xl();t<=s;++t)n&&n.Jl(i,t)||this.Z7(i,t,!0).U7(e)}iU(t,s){let i=this.Q7(t.bl()),e=this.tU(t.vl()),n=this.Q7(t.Ml()),r=this.tU(t.xl());if(isFinite(n)&&isFinite(r))for(;i<=n;++i)for(let t=e;t<=r;++t){const h=this.Z7(i,t,!1);h&&h.J7(s)}}}}{const _a=self.Os;_a.m3t=class extends _a.nr{constructor(t,s,i){super(),this.L7=t,this.Ka=s,this.Ya=i,this.N7=_a.hr(_a.ec)}lr(){this.N7.lr(),this.N7=null,this.L7=null}Zu(){return this.N7.Zu()}U7(t){this.N7.oc(t)}y0(t){this.N7.Qu(t)}J7(t){_a.$n(t,this.N7.ac())}}}{const Ia=self.Os;Ia.g3t=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Ia.Rect,this.y3t=2,this.w3t=null,this.S3t=0,this.b3t=0,this.v3t=0,this.M3t=0,this.x3t=0,this.Ct=0,this.G3t=1,this.T3t=0,this._3t=1,this.I3t=0}C3t(){return this.y3t<1+1e-6}r0(){this.y3t=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.y3t=2,this.w3t=null,this.S3t=0,this.b3t=0,this.v3t=0,this.M3t=0,this.x3t=0,this.Ct=0,this.G3t=1,this.T3t=0,this._3t=1,this.I3t=0,this}E3t(){if(!1!==this.C3t()){const t=this.dx*this.y3t,s=this.dy*this.y3t,i=Ia.br(t,s),e=t/i,n=s/i,r=(this.Ct=i-1e-6,this.M3t=this.x1+e*this.Ct,this.x3t=this.y1+n*this.Ct,this.S3t=Math.atan2(this.v3t,this.b3t)+Math.PI/2,this.G3t=Math.cos(this.S3t),this.T3t=Math.sin(this.S3t),e*this.G3t+n*this.T3t);if(this._3t=e-2*this.G3t*r,this.I3t=n-2*this.T3t*r,0<r){const h=Math.PI;this.S3t=Ia.gr(this.S3t+h),this.G3t=-this.G3t,this.T3t=-this.T3t}}}P3t(t,s,i,e,n){const r=Ia.dh(this.x1,this.y1,this.x2,this.y2,s,i,e,n);0<=r&&r<this.y3t&&(this.y3t=r,this.w3t=t.BN(),this.b3t=s-e,this.v3t=i-n)}f3t(t,s,i,e){const n=s+e.bl(),r=s+e.Ml(),h=i+e.vl(),o=i+e.xl();this.P3t(t,n,h,r,h),this.P3t(t,r,h,r,o),this.P3t(t,r,o,n,o),this.P3t(t,n,o,n,h)}c3t(t,s){const i=s.eh(),e=s.nh(),n=s.rh(),r=s.hh(),h=s.oh(),o=s.ah(),a=s.lh(),l=s.uh();this.P3t(t,i,e,n,r),this.P3t(t,n,r,h,o),this.P3t(t,h,o,a,l),this.P3t(t,a,l,i,e)}u3t(i,e,n,t){const r=t.Ou();for(let t=0,s=r.length;t<s;t+=2){const h=(t+2)%s,o=r[t]+e,a=r[t+1]+n,l=r[h]+e,u=r[1+h]+n;this.P3t(i,o,a,l,u)}}}}{const T=self.Os,Ca=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Ea=new Set(["high","low"]),Pa=self.ws,Gn=Pa.Ms,Tn=Pa._s,Ra=Gn.create(),Aa=T.hr(T.Kl),I=T.hr(T.Rect);T.R3t=class extends T.nr{constructor(t){super(),this.ef=t,this.A3t=[],this.F3t=!1,this.D3t=null,this.O3t=null,this.k3t=null,this.L3t="high-performance",this.N3t=!1,this.B3t="auto",this.W3t=0,this.j3t=0,this.V3t="",this.H3t=0,this.U3t=0,this.z3t=0,this.J3t=0,this.q3t=0,this.$3t=0,this.Ty="normalized",this.X3t=0,this.K3t=1,this.Y3t=1e4,this.ew=!0,this.Z3t=0,this.OA=0,this.kA=0,this.Q3t="letterbox-scale",this.tFt="letterbox-scale",this.sFt=0,this.iFt=0,this.eFt=Gn.create(),this.nFt="high",this.rFt=this.nFt,this.hFt=!1,this.oFt=[],this.aFt=new Set,this.lFt=self.C3_Shaders,this.uFt=T.hr(T.Kg.NR,{DR:()=>[this.GJ(),this.TJ()],OR:()=>this.cFt(),kR:t=>this.fFt(t),getTime:()=>this.NO().xD(),LR:()=>this.NO().TO()}),this.dFt=0,this.pFt=0,this.mFt=NaN,this.gFt=null,this.yFt=new Map,this.wFt=NaN,this.SFt=new Map,this.bFt="",this.vFt=1,this.MFt=T.hr(T.Rect),this.xFt="",this.GFt=null,this.TFt=null,this._Ft=0,this.IFt=0,this.CFt=-1,this.EFt=0,this.PFt=t=>this.EFt=t.progress,this.RFt=null,this.AFt={FFt:null,DFt:null,OFt:null},this.kFt=0,this.LFt=0,this.NFt=0,this.BFt="fade-in",this.WFt=null,this.jFt=new Promise(t=>this.WFt=t)}VFt(t){this.L3t=t}HFt(t){this.F3t=!!t}UFt(t){this.Ty=t}zFt(){return this.Ty}JFt(t){this.X3t=t}qFt(t,s){this.K3t=t,this.Y3t=s}$Ft(t){this.N3t=!!t}XFt(t){this.B3t=t}async Po(t){let s=t.canvas,i=(this.A3t.push({canvas:s,KFt:null}),this.ef.y4("runtime","window-resize",t=>this.YFt(t)),this.ef.y4("runtime","fullscreenchange",t=>this.ZFt(t)),this.ef.y4("runtime","fullscreenerror",t=>this.QFt(t)),s.addEventListener("webglcontextlost",t=>this.tDt(t)),s.addEventListener("webglcontextrestored",t=>this.sDt(t)),this.hFt=!!t.isFullscreen,this.V3t=t.cssDisplayMode,navigator.gpu&&this.F3t),e=!1;if(i)try{await this.iDt(!0)}catch(t){this.eDt("WebGPU",t),this.O3t=null}if(!this.Eb())try{await this.nDt(!0)}catch(t){this.eDt("WebGL",t),this.D3t=null}if(this.Eb()||(e=!0),!this.Eb()&&i)try{await this.iDt(!1)}catch(t){this.eDt("WebGPU",t),this.O3t=null}if(!this.Eb())try{await this.nDt(!1)}catch(t){this.eDt("WebGL",t),this.D3t=null}const n=this.Eb();if(!n)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");n.hb(e),this.O3t&&(this.O3t.rDt=()=>this.hDt(),this.O3t.oDt=()=>this.aDt()),"normalized"===this.Ty?n.Mw():(n.xw(),n.Sw(this.X3t)),this.JI(t.windowInnerWidth,t.windowInnerHeight,!0),await this.cAt()}eDt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async iDt(t){let s={wy:this.K3t,Sy:this.Y3t},i=!0;"no"===this.B3t?i=!1:"auto"===this.B3t&&(i=T.hi.gi);const e={powerPreference:this.L3t,depth:this.ef.P9(),failIfMajorPerformanceCaveat:t,lDt:this.ef.FJ(),uDt:this.ef.cDt(),sE:this.ef.fDt(),dDt:i};this.O3t=T.hr(T.Kg.WebGPURenderer,s),await this.O3t.qM(this.A3t[0].canvas,e)}async nDt(t){const s={alpha:!0,powerPreference:this.L3t,tE:"xbox-uwp-webview2"!==this.ef.Gk(),depth:this.ef.P9(),sE:this.ef.fDt(),failIfMajorPerformanceCaveat:t,wy:this.K3t,Sy:this.Y3t};this.N3t&&(s.iE=1),this.D3t=T.hr(T.Kg.rE,this.A3t[0].canvas,s),await this.D3t.lw()}async pDt(){if(this.lFt){const t=[];for(const[s,i]of Object.entries(this.lFt)){i.src=i.wgsl;const e=T.Kg.WebGPUShaderProgram.vG();t.push(this.O3t.oP(Object.assign({UM:e,name:s},i)))}await Promise.all(t)}}async mDt(){if(this.lFt){const s=[];for(const[i,e]of Object.entries(this.lFt)){let t;if(e.glslWebGL2&&2<=this.D3t.R2())e.src=e.glslWebGL2,t=T.Kg.VM.MG();else{if(!e.glsl)throw new Error(`shader '${i}' does not support WebGL 1`);e.src=e.glsl,t=T.Kg.VM.vG()}s.push(this.D3t.oP(Object.assign({UM:t,name:i},e)))}await Promise.all(s),this.D3t.aP(),this.D3t.Dw()}this.D3t.vR()&&(this.gFt=T.hr(T.Kg.UC,this.D3t))}async cAt(){this.O3t?await this.pDt():this.D3t&&await this.mDt();const t=this.Eb();t.nb(this.ew),t.vR()&&(this.mFt=0);for(const s of this.ef.gDt()){for(const i of s.UL())i.cAt(t);s.cAt(t),s.A6()}this.k3t=new self.K8(this.ef,t)}lr(){this.ef=null,this.D3t=null,this.A3t.length=0}OF(){return this.ef.OF()}YFt(t){const s=this.ef;if(!s.yDt()){const i=t.devicePixelRatio,e=(this.OF()&&(self.devicePixelRatio=i),s.wDt(i),this.hFt=!!t.isFullscreen,this.V3t=t.cssDisplayMode,this.JI(t.innerWidth,t.innerHeight),s.TO(),new T.Event("window-resize")),n=(e.data=t,s.Nf().$f(e),new T.Event("resize"));n.SDt=this.Ak(),n.bDt=this.Dk(),n.vDt=this.kk(),n.MDt=this.Nk(),s.OX(n),s.M4()&&(s.a1t()||self.C3Debugger.IsDebuggerPaused())&&s.f3()}}ZFt(t){this.hFt=!!t.isFullscreen,this.JI(t.innerWidth,t.innerHeight,!0),this.ef.TO()}QFt(t){this.hFt=!!t.isFullscreen,this.JI(t.innerWidth,t.innerHeight,!0),this.ef.TO()}JI(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.W3t!==t||this.j3t!==s||i){this.W3t=t,this.j3t=s;const e=this.xDt();"letterbox-scale"===e?this.GDt(t,s):"letterbox-integer-scale"===e?this.TDt(t,s):"off"===e?this._Dt(t,s):this.IDt(t,s),this.CDt(e);for(const{canvas:h}of this.A3t)h.width=this.z3t,h.height=this.J3t;this.ef.hf("canvas","update-size",{marginLeft:this.q3t,marginTop:this.$3t,styleWidth:this.H3t,styleHeight:this.U3t,displayScale:this.$j()});const n=this.Eb();n.JI(this.z3t,this.J3t,!0);for(const o of this.oFt)n.mR(o);T.Nh(this.oFt),this.EDt();const r=this.ef.QD();r.eK(),r.nK()}}EDt(){this.Eb().Tw(this.eFt,this.GJ()/this.TJ())}_J(){return this.eFt}GDt(t,s){const i=this.ef.Bk(),e=this.ef.LF(),n=this.ef.BF(),r=e/n,h=t/s;if(r<h){const o=s*r;this.H3t=Math.round(o),this.U3t=s,this.q3t=Math.floor((t-this.H3t)/2),this.$3t=0}else{const a=t/r;this.H3t=t,this.U3t=Math.round(a),this.q3t=0,this.$3t=Math.floor((s-this.U3t)/2)}this.z3t=Math.round(this.H3t*i),this.J3t=Math.round(this.U3t*i),this.ef.PDt(e,n)}TDt(t,s){let i=this.ef.Bk(),e=(1!==i&&(t+=1,s+=1),this.ef.LF()),n=this.ef.BF(),r=e/n,h=t/s,o;if(r<h){const a=s*r;o=a*i/e}else{const l=t/r;o=l*i/n}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.z3t=Math.round(e*o),this.J3t=Math.round(n*o),this.H3t=this.z3t/i,this.U3t=this.J3t/i,this.q3t=Math.max(Math.floor((t-this.H3t)/2),0),this.$3t=Math.max(Math.floor((s-this.U3t)/2),0),this.ef.PDt(e,n)}IDt(t,s){const i=this.ef.Bk(),e=(this.H3t=t,this.U3t=s,this.z3t=Math.round(this.H3t*i),this.J3t=Math.round(this.U3t*i),this.q3t=0,this.$3t=0,this.$j());this.ef.PDt(this.H3t/e,this.U3t/e)}_Dt(t,s){const i=this.ef.Bk();this.H3t=this.ef.b9(),this.U3t=this.ef.v9(),this.z3t=Math.round(this.H3t*i),this.J3t=Math.round(this.U3t*i),this.RDt()?(this.q3t=Math.floor((t-this.H3t)/2),this.$3t=Math.floor((s-this.U3t)/2)):(this.q3t=0,this.$3t=0),this.ef.PDt(this.ef.b9(),this.ef.v9())}CDt(i){if("high"===this.nFt)this.OA=this.z3t,this.kA=this.J3t,this.rFt="high";else{let t,s;if(s="off"===this.xDt()?(t=this.ef.b9(),this.ef.v9()):(t=this.ef.LF(),this.ef.BF()),this.z3t<t||this.J3t<s)this.OA=this.z3t,this.kA=this.J3t,this.rFt="high";else if(this.OA=t,this.kA=s,this.rFt="low","scale-inner"===i){const e=t/s,n=this.W3t/this.j3t;n<e?this.OA=this.kA*n:e<n&&(this.kA=this.OA/n)}else if("scale-outer"===i){const r=t/s,h=this.W3t/this.j3t;r<h?this.OA=this.kA*h:h<r&&(this.kA=this.OA/h)}}}NO(){return this.ef}ADt(){return this.A3t[0].canvas}sz(){return this.uFt}RDt(){return this.hFt}FDt(){return this.V3t}DDt(t){if(!Ca.has(t))throw new Error("invalid fullscreen mode");this.Q3t=t;const s=this.ef.QD();s.eK(),s.nK()}Jj(){return this.Q3t}ODt(t){if(!Ca.has(t))throw new Error("invalid fullscreen mode");this.tFt=t;const s=this.ef.QD();s.eK(),s.nK()}kDt(){return this.tFt}xDt(){return this.RDt()?this.kDt():this.Jj()}LDt(t){if(!Ea.has(t))throw new Error("invalid fullscreen scaling quality");this.nFt=t,this.ef.QD().eK()}NDt(){return this.nFt}DJ(){return this.rFt}static BDt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}Fj(){return this.W3t}Dj(){return this.j3t}GJ(){return this.OA}TJ(){return this.kA}nb(t){this.ew=!!t}WDt(t){this.Z3t=t}R7(){return this.Z3t}jDt(){return this.Eb().vC()}tDt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.oFt=[],this.aFt.clear(),this.uFt.Yb(),this.D3t.Yb(),this.ef.D$()}hDt(){console.log("[Construct] WebGPU device lost"),this.oFt=[],this.aFt.clear(),this.uFt.Yb(),this.ef.D$()}async sDt(t){await this.D3t.Zb(),await this.cAt(),await this.ef.VDt(),console.log("[Construct] WebGL context restored")}async aDt(){await this.cAt(),await this.ef.VDt(),console.log("[Construct] WebGPU device restored")}HDt(){return this.D3t}UDt(){return this.O3t}Eb(){return this.O3t||this.D3t}bIt(){return this.k3t}Ik(){let t="";return t=this.ef.UDt()?"webgpu":"webgl"+this.ef.HDt().R2(),this.ef.Eb().ob()&&(t+="-software"),t}Pk(){return this.ef.UDt()?this.ef.UDt().GetAdapterInfoString():this.ef.HDt().PR()}MN(){return"low"===this.rFt?1/this.ef.Bk():this.$j()}$j(){const t=this.xDt();if("off"===t||"crop"===t)return 1;const s=this.ef.LF(),i=this.ef.BF(),e=s/i,n=this.z3t/this.J3t;return"scale-inner"!==t&&e<n||"scale-inner"===t&&n<e?this.U3t/i:this.H3t/s}nq(){return"low"===this.DJ()?1:this.$j()}iq(){return"low"===this.DJ()?1:this.ef.Bk()}zDt(t,s){this.sFt=t,this.iFt=s}OV(s,i,e,t=!0){i=i||this.OA,e=e||this.kA;const n=i/2+this.sFt,r=e/2+this.iFt;if(t){let t=this._J();i===this.OA&&e===this.kA||(s.Tw(Ra,i/e),t=Ra),s.uP(t)}const h=s.Ew(n,r,s.cw(e),n,r,0,e);s.gP(h)}JDt(t,s=!0){const i=this.Ak(),e=this.Dk(),n=i/2,r=e/2,h=(s&&t.uP(this._J()),t.Ew(n,r,t.cw(e),n,r,0,e));t.gP(h)}kk(){return this.z3t}Nk(){return this.J3t}Ak(){return this.H3t}Dk(){return this.U3t}dN(){return this.q3t}pN(){return this.$3t}y$(){return this.A3t.length}qDt(){return"undefined"!=typeof OffscreenCanvas&&this.ADt()instanceof OffscreenCanvas&&("Chromium"!==T.hi.di||124<=T.hi.fi)}async B$(e,n=!1){if(e<1)throw new Error("invalid HTML layer count");if(this.A3t.length!==e){let t=this.ef.QD().KD(),s={count:e,layersDomState:t.Kz().filter(t=>t.B5()).map(t=>t.tJ()),immediate:n,marginLeft:this.q3t,marginTop:this.$3t,styleWidth:this.H3t,styleHeight:this.U3t},i;if(i=this.OF()?await this.ef.IO("canvas","set-html-layer-count",s):self.c3_runtimeInterface._OnSetHTMLLayerCount(s),e<this.A3t.length)this.A3t.length=e;else for(const r of i.addedCanvases){r.width=this.z3t,r.height=this.J3t;const h=this.qDt()?"bitmaprenderer":"2d",o=r.getContext(h);if(!o)throw new Error(`failed to acquire '${h}' canvas context`);this.A3t.push({canvas:r,KFt:o})}this.ef.TO()}}AX(t){if(!(t>=this.A3t.length)){const s=this.ADt(),i=this.A3t[t].KFt;this.qDt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}}OJ(s){s.depth=this.ef.P9();let t=this.oFt,i=t.findIndex(t=>t.kM(s)),e;return-1!==i?(e=t[i],t.splice(i,1)):e=this.Eb().uR(s),this.aFt.add(e),e}ez(t){if(!this.aFt.has(t))throw new Error("render target not in use");this.aFt.delete(t),this.oFt.push(t)}cFt(){const t={l2:this.ef.WF()};return"low"===this.DJ()&&(t.width=this.GJ(),t.height=this.TJ()),this.OJ(t)}fFt(t){this.ez(t)}*$Dt(){for(const t of this.ef.QD().tK())for(const s of t.h5()){const i=this.yFt.get(s);i&&(yield i)}}PJ(t){if(!this.Eb().vR())return null;let s=this.yFt.get(t);return s||(s={H4:t,name:t.$c(),XDt:T.hr(T.Kg.UC,this.D3t),KDt:0,YDt:0,ZDt:0},this.yFt.set(t,s)),s.XDt}QDt(){const t=this.Eb();if(t.vR()&&0===this.pFt){this.pFt=t.ib(),this.wFt=NaN;for(const s of this.$Dt())s.KDt=NaN}}tOt(){this.D3t&&this.D3t.vR()&&this.sOt(),this.O3t&&this.O3t.vR()&&this.iOt()}sOt(){if(isNaN(this.wFt)&&(this.wFt=this.gFt.YC(this.dFt,this.pFt),!isNaN(this.wFt))){if(this.ef.M4())for(const t of this.$Dt())if(t.KDt=t.XDt.YC(this.dFt,this.pFt),isNaN(t.KDt))return;if(this.gFt.ZC(this.pFt),this.mFt=Math.min(this.wFt,1),this.ef.M4()){const i=new Map;for(const n of this.$Dt())n.XDt.ZC(this.pFt),n.YDt=Math.min(n.KDt,1),i.set(n.H4,n.YDt);for(const r of this.$Dt()){const h=r.H4,o=i.get(h)||0,a=o-h.E5().reduce((t,s)=>t+(i.get(s)||0),0);r.ZDt=T.mr(a,0,1)}const s=this.ef.KD(),e=this.mFt-s.Kz().reduce((t,s)=>t+(i.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(T.mr(e,0,1),this.mFt,[...this.$Dt()])}this.dFt=this.pFt,this.pFt=0}}eOt(){return this.gFt}iOt(){if(0!==this.pFt){for(let t=this.dFt;t<this.pFt;++t){const i=this.SFt.get(t);if(i&&!i.FC())return}let t=this.ef.KD(),h=T.jo(t.c$()+1,0),s=0;for(let t=this.dFt;t<this.pFt;++t){const o=this.SFt.get(t);if(o){let i=o.DC(),e=BigInt(0),n=BigInt(0),r=BigInt(0);for(let t=0,s=Math.min(h.length,i.length/2);t<s;++t){const u=i[2*t],c=i[2*t+1],f=(u!==r&&(e===r||u<e)&&(e=u),c>n&&(n=c),c-u),d=Number(f)/1e9;h[t]+=d}const a=n-e,l=Number(a)/1e9;s+=l}}if(this.mFt=T.mr(s,0,1),this.ef.M4()){const e=t.h5(),n=new Map;for(let t=0,s=Math.min(e.length,h.length-1);t<s;++t){const g=h[t+1];n.set(e[t],g)}const r=[],p=new Map;for(const[y,w]of n){const S=[...y.R5()].reduce((t,s)=>t+(n.get(s)||0),0);p.set(y,S),r.push({name:y.$c(),ZDt:T.mr(w,0,1),YDt:T.mr(S,0,1)})}const m=this.mFt-t.Kz().reduce((t,s)=>t+(p.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(T.mr(m,0,1),this.mFt,r)}for(let t=this.dFt;t<this.pFt;++t)this.SFt.delete(t);this.dFt=this.pFt,this.pFt=0}}nOt(t){this.SFt.set(this.O3t.ib(),t)}OD(){return this.mFt}rOt(t,s,i,e,n,r){return this.bFt=t,this.vFt=s,this.MFt.cl(i,e,n,r),this.GFt||(this.GFt=new Promise(t=>{this.TFt=t})),this.GFt}hOt(){if(this.bFt){let t=this.ADt(),s=this.MFt,i=T.mr(Math.floor(s.bl()),0,t.width),e=T.mr(Math.floor(s.vl()),0,t.height),n=s.width(),r=(n=0===n?t.width-i:T.mr(Math.floor(n),0,t.width-i),s.height());if(r=0===r?t.height-e:T.mr(Math.floor(r),0,t.height-e),(0!==i||0!==e||n!==t.width||r!==t.height)&&0<n&&0<r){const h=T.Po(n,r),o=h.getContext("2d");o.drawImage(t,i,e,n,r,0,0,n,r),t=h}T.Ro(t,this.bFt,this.vFt).then(t=>{this.xFt&&URL.revokeObjectURL(this.xFt),this.xFt=URL.createObjectURL(t),this.GFt=null,this.TFt(this.xFt)}),this.bFt="",this.vFt=1}}oOt(){return this.xFt}aOt(t){t?this._Ft++:this._Ft--}lOt(){return 0<this._Ft}uOt(t){const s=this.Eb();if(2===t)this.RFt=T.hr(T.Kg.mb,this.Eb()),this.RFt.vI("Arial"),this.RFt.MI(16),this.RFt.LI("center"),this.RFt.BI("center"),this.RFt.JI(300,200);else if(0===t){const i=this.ef.cOt();i&&i.IV(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.fOt("splash-images/splash-logo.svg").then(t=>{"done"===this.BFt?s.vM(t):this.AFt.FFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.dOt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.BFt?s.vM(t):this.AFt.DFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.dOt("splash-images/splash-website-512.png").then(t=>{"done"===this.BFt?s.vM(t):this.AFt.OFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async fOt(t){t=new URL(t,this.ef.pOt()).toString();const s=await T.xo(t),i=await this.ef.mOt(s,2048,2048);return this.Eb().lR(i,{d2:"high"})}async dOt(t){t=new URL(t,this.ef.pOt()).toString();const s=await T.xo(t);return this.Eb().lR(s,{d2:"high"})}gOt(){this.ef.hf("runtime","hide-cordova-splash")}yOt(){this.IFt=Date.now(),this.ef.Nf().addEventListener("loadingprogress",this.PFt),this.CFt=requestAnimationFrame(()=>this.wOt());const t=this.ef.SOt();3!==t&&this.gOt()}async bOt(){const t=this.Eb(),s=(this.EFt=1,this.ef.SOt());4===s&&await this.jFt,this.WFt=null,this.jFt=null,-1!==this.CFt&&(cancelAnimationFrame(this.CFt),this.CFt=-1),this.ef.Nf().removeEventListener("loadingprogress",this.PFt),this.PFt=null,this.RFt&&(this.RFt.lr(),this.RFt=null),this.ef.vOt(),t.QP(),this.AFt.FFt&&(t.vM(this.AFt.FFt),this.AFt.FFt=null),this.AFt.DFt&&(t.vM(this.AFt.DFt),this.AFt.DFt=null),this.AFt.OFt&&(t.vM(this.AFt.OFt),this.AFt.OFt=null),t.ZP(0,0,0,0),t.tb(),this.BFt="done",this.dFt=t.ib(),3===s&&this.gOt()}wOt(){if(-1!==this.CFt){const t=this.Eb(),s=(t.QP(),this.CFt=-1,this.ef.MF().t7()),i=this.ef.SOt();if(3!==i&&(this.JDt(t),t.ZP(0,0,0,0),t.GP(),t.Dw(),t._P(null)),0===i)this.MOt(s);else if(1===i)this.xOt(s,120,0);else if(2===i)this.GOt(s);else if(3===i)T.Dh();else{if(4!==i)throw new Error("invalid loader style");this.TOt(s)}t.tb(),this.CFt=requestAnimationFrame(()=>this.wOt())}}GOt(t){t?this.RFt.kI(1,0,0):this.RFt.kI(.6,.6,.6),this.RFt.lf(Math.round(100*this.EFt)+"%");const s=this.H3t/2,i=this.U3t/2,e=(Aa.ru(s-150,i-100,150+s,100+i),this.Eb());e._P(this.RFt.IM()),e.TS(Aa,this.RFt.xC())}xOt(t,s,i){const e=this.Eb(),n=(e.Ww(),t?e.MP(1,0,0,1):e.MP(.118,.565,1,1),this.H3t/2),r=this.U3t/2,h=s/2;I.cl(n-h,r-4+i,Math.floor(s*this.EFt),8),e.Rect(I),I.cl(n-h,r-4+i,s,8),I.offset(-.5,-.5),I.Fl(.5,.5),e.MP(0,0,0,1),e.PS(I),I.Fl(1,1),e.MP(1,1,1,1),e.PS(I)}MOt(t){const s=this.Eb(),i=this.ef.cOt();if(i){const e=i.IM();if(e){const n=e.nm(),r=e.gm(),h=this.H3t/2,o=this.U3t/2,a=n/2,l=r/2;Aa.ru(h-a,o-l,h+a,o+l),s._P(e),s.Kl(Aa),this.xOt(t,n,16+l)}else this.xOt(t,120,0)}else this.xOt(t,120,0)}TOt(t){let s=this.Eb(),i=this.AFt.FFt,e=this.AFt.DFt,n=this.AFt.OFt,r=Date.now(),h=(0===this.kFt&&(this.IFt=r),this.ef._Ot()||this.ef.IOt()&&!this.ef.COt()),o=h?0:200,a=h?0:3e3,l=1,u=("fade-in"===this.BFt?l=Math.min((r-this.IFt)/300,1):"fade-out"===this.BFt&&(l=Math.max(1-(r-this.NFt)/300,0)),s.Ww(),s.MP(.231*l,.251*l,.271*l,l),I.set(0,0,this.H3t,this.U3t),s.Rect(I),Math.ceil(this.H3t)),c=Math.ceil(this.U3t),f,d;256<this.U3t?(s.MP(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),I.cl(0,.8*c-d/2,f,d),s.Rect(I),t?s.MP(l,0,0,l):s.MP(.161*l,.953*l,.816*l,l),f=u*this.EFt,I.cl(.5*u-f/2,.8*c-d/2,f,d),s.Rect(I),s.MP(l,l,l,l),s.Dw(),e&&(f=1.5*T.mr(.22*c,105,.6*u),d=f/8,I.cl(.5*u-f/2,.2*c-d/2,f,d),s._P(e),s.Rect(I)),i&&(f=Math.min(.395*c,.95*u),d=f,I.cl(.5*u-f/2,.485*c-d/2,f,d),s._P(i),s.Rect(I)),n&&(f=1.5*T.mr(.22*c,105,.6*u),d=f/8,I.cl(.5*u-f/2,.868*c-d/2,f,d),s._P(n),s.Rect(I))):(s.MP(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),I.cl(0,.85*c-d/2,f,d),s.Rect(I),t?s.MP(l,0,0,l):s.MP(.161*l,.953*l,.816*l,l),f=u*this.EFt,I.cl(.5*u-f/2,.85*c-d/2,f,d),s.Rect(I),s.MP(l,l,l,l),s.Dw(),i&&(f=.55*c,d=f,I.cl(.5*u-f/2,.45*c-d/2,f,d),s._P(i),s.Rect(I))),this.kFt++,"fade-in"===this.BFt&&300<=r-this.IFt&&2<=this.kFt&&(this.BFt="wait",this.LFt=r),"wait"===this.BFt&&r-this.LFt>=a&&1<=this.EFt&&(this.BFt="fade-out",this.NFt=r),("fade-out"===this.BFt&&r-this.NFt>=300+o||h&&1<=this.EFt&&r-this.IFt<500)&&this.WFt()}}}{let V=self.Os,H=self.C3Debugger,n=self.r8,i={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},h=!0;V.EOt=class extends V.nr{constructor(t){t=Object.assign({},i,t),super(),this.POt=t.messagePort,this.ROt=t.runtimeBaseUrl,this.AOt=t.previewUrl,this.FOt=!!t.headless,this.DOt=!!t.hasDom,this.OOt=!!t.isInWorker,h=t.ife,this.kOt=!!t.useAudio,this.LOt=t.exportType,this.NOt=t.isNWjs,this.eH=!!t.isiOSCordova,this.BOt=!!t.isiOSWebView,this.WOt=!!t.isWindowsWebView2,this.jOt=!!t.isAnyWebView2Wrapper,this.VOt=!!t.isFBInstantAvailable,this.HOt=!("preview"!==this.LOt||!t.isDebug),this.UOt=this.HOt,this.zOt=this.HOt,this.JOt=0,this.qOt=[],this.$Ot=[],this.XOt=!1,this.KOt="",this.YOt="",this.ZOt="",this.QOt="",this.tkt=0,this.skt=0,this.ikt=0,this.UA=self.devicePixelRatio,this.ekt=0,this.nkt=0,this.rkt=0,this.hkt=0,this.okt=0,this.akt=!1,this.Ag=!0,this.lkt=!1,this.ukt=!1,this.ckt=!1,this.fkt=null,this.w7=V.hr(V.QV,this,t),this.vq=V.hr(V.NX,this),this.Rft=V.hr(V.C0t,this),this.dkt=V.hr(V.zk,this,t.wrapperComponentIds),this.pkt=V.hr(V.CAt,this),this.yQ=V.hr(V.rK,this),this.mkt=V.hr(V.glt,this),this.gkt=V.hr(V.wlt,this),this.Alt=V.hr(V._lt,this),this.Ig=V.hr(V.mg,{wg:t=>this.ykt(t),bg:t=>this.wkt(t)}),this.Skt=new Map,this.bkt=[],this.vkt=new Map,this.Mkt=new Map,this.xkt=0,this.Gkt=[],this.Tkt=new Set,this._kt=[],this.Ikt=[],this.Ckt=new Map,this.Ekt=!1,this.Pkt=!1,this.Rkt=0,this.Akt=0,this.Fkt=new Map,this.Dkt=new Set,this.Okt=new Set,this.kkt=[],this.Lkt=[],this.Nkt=null,this.Bkt=!1,this.Wkt="vsync",this.M2="trilinear",this.jkt=!1,this.Vkt=!0,this.Hkt=!1,this.Ukt=!1,this.zkt=null,this.Jkt={qkt:t=>{this.CFt=-1,this.$kt=-1,this.PY(t)},Xkt:t=>{this.$kt=-1,this.PY(t,!1,"skip-render")},Kkt:()=>{this.CFt=-1,this.f3()}},this.CFt=-1,this.$kt=-1,this.Ykt=0,this.Zkt=0,this.Qkt=!1,this.tLt=!1,this.sLt=!1,this.iLt=!0,this.eLt=!0,this.nLt=!1,this.rLt=0,this.hLt=new V.ad(1),this.oLt=()=>Math.random(),this.aLt=0,this.lLt=0,this.uLt=0,this.cLt=0,this.fLt=0,this.yCt=1,this.dLt=1/30,this.pLt=0,this.mLt=V.hr(V.S0),this.gLt=V.hr(V.S0),this.yLt=V.hr(V.S0),this.wLt=new Map,this.SLt=-1,this.bLt=0,this.vLt=0,this.MLt=-1,this.xLt=0,this.GLt=0,this.TLt=0,this._Lt=!1,this.ILt="",this.CLt=!1,this.ELt="",this.E4=null,this.PLt="",this.RLt=null,this.ALt=null,this.v_t=V.hr(V.Event.Nf),this.FLt=new Map,this.DLt=new Map,this.OLt=0,this.kLt=!1,this.LLt=!1,this.NLt=!1,this.BLt=[],this.WLt={pretick:V.hr(V.Event,"pretick",!1),tick:V.hr(V.Event,"tick",!1),tick2:V.hr(V.Event,"tick2",!1),instancecreate:V.hr(V.Event,"instancecreate",!1),instancedestroy:V.hr(V.Event,"instancedestroy",!1),beforelayoutchange:V.hr(V.Event,"beforelayoutchange",!1),layoutchange:V.hr(V.Event,"layoutchange",!1)},this.WLt.instancecreate.T6=null,this.WLt.instancedestroy.T6=null,this.Zq=V.hr(V.Event.Nf),this.jLt=null;const s=(t,s)=>V.mCt.ZRt(this,t,s);this.VLt=V.hr(V.C0,s),this.HLt=V.hr(V.C0,s),this.ULt=V.hr(V.C0,s),this.zLt=V.hr(V.JLt,this,t.jobScheduler),t.canvas&&(this.Nkt=V.hr(V.R3t,this)),this.POt.onmessage=t=>this._OnMessageFromDOM(t.data),this.y4("runtime","visibilitychange",t=>this.qLt(t)),this.y4("runtime","wrapper-extension-message",t=>this.$Lt(t)),this.y4("runtime","get-remote-preview-status-info",()=>this.XLt()),this.y4("runtime","js-invoke-function",t=>this.idt(t)),this.y4("runtime","go-to-last-error-script",self.goToLastErrorScript),this.y4("runtime","offline-audio-render-completed",t=>this.KLt(t)),this.v_t.addEventListener("window-blur",t=>this.YLt(t)),this.v_t.addEventListener("window-focus",()=>this.ZLt()),this.yQ.BK(),this.gkt.BK(),this.QLt=null,this.t5t=new WeakMap,this.s5t={keyboard:null,oO:null,aO:null,lO:null},this.i5t=new WeakMap,this.e5t=[]}static qM(t){return V.hr(V.EOt,t)}lr(){V.Nh(this.bkt),this.vkt.clear(),this.Mkt.clear(),this.vq.lr(),this.vq=null,this.Rft.lr(),this.Rft=null,this.dkt.lr(),this.dkt=null,this.w7.lr(),this.w7=null,this.pkt.lr(),this.pkt=null,this.yQ.lr(),this.yQ=null,this.mkt.lr(),this.mkt=null,this.gkt.lr(),this.gkt=null,this.Alt.lr(),this.Alt=null,this.Ig.lr(),this.Ig=null,this.Nkt&&(this.Nkt.lr(),this.Nkt=null),this.v_t.lr(),this.v_t=null,this.n5t=null}["_OnMessageFromDOM"](t){const s=t.type;if("event"===s)this.r5t(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.h5t(t)}}r5t(t){if(this.NLt){const s=t.component,i=t.handler,e=t.data,n=t.dispatchOpts,r=!(!n||!n.dispatchRuntimeEvent),h=!(!n||!n.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const l=new V.Event(i);l.data=e,this.v_t.$f(l)}if(h){const u=new V.Event(i,!0);for(const[c,f]of Object.entries(e))u[c]=f;this.OX(u)}}const a=this.FLt.get(s);if(a){const d=a.get(i);if(d){let t=null;try{t=d(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.o5t(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this.o5t(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.o5t(o,!1,""+t)}):this.o5t(o,!0,t))}else r||h||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`)}else r||h||console.warn(`[Runtime] No DOM event handlers for component '${s}'`)}else this.BLt.push(t)}o5t(t,s,i){this.POt.postMessage({type:"result",responseId:t,isOk:s,result:i})}h5t(t){const s=t.responseId,i=t.isOk,e=t.result,n=this.DLt.get(s);i?n.resolve(e):n.reject(e),this.DLt.delete(s)}y4(t,s,i){let e=this.FLt.get(t);if(e||(e=new Map,this.FLt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}hf(t,s,i,e){this.POt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}IO(t,s,i,e){const n=this.OLt++,r=new Promise((t,s)=>{this.DLt.set(n,{resolve:t,reject:s})});return this.POt.postMessage({type:"event",component:t,handler:s,data:i,responseId:n},e),r}y8(t,s,i,e=-1){this.hf("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}w8(t,s,i){const e=this.OLt++,n=new Promise((t,s)=>{this.DLt.set(e,{resolve:t,reject:s})});return this.y8(t,s,i,e),n}$Lt(t){if(-1!==t.asyncId){const s=t.asyncId,i=this.DLt.get(s);i.resolve(t.params),this.DLt.delete(s)}else this.r5t({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}F4(t,s,i){this.y4("wrapper-extension:"+t,s,i)}R4(t){return this.dkt.R4(t)}a5t(t){if(!this.M4())throw new Error("not in debug mode");this.hf("runtime","post-to-debugger",t)}async bCt(t){V.zbt(this),this.M4()?await H.bCt(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const s=await this.w7.Mo("data.json");if(await this.l5t(s),await this.u5t(t),this._Ot()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.HDt()){const i=this.HDt();console.info(`[C3 runtime] Hosted in ${this.OF()?"worker":"DOM"}, rendering with WebGL ${i.R2()} [${i.PR()}]`)}else this.UDt()&&console.info(`[C3 runtime] Hosted in ${this.OF()?"worker":"DOM"}, rendering with WebGPU [${this.UDt().GetAdapterInfoString()}]`);this.Eb().ob()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.NLt=!0;for(const e of this.BLt)this.r5t(e);V.Nh(this.BLt),this.Nkt&&this.Nkt.yOt();for(const n of t.runOnStartupFunctions)this.qOt.push(this.c5t(n));if(await Promise.all([this.w7.ZH(),...this.qOt]),V.Nh(this.qOt),!this.w7.t7())return this.Nkt&&await this.Nkt.bOt(),await this.v_t.Jf(new V.Event("beforeruntimestart")),await this.QP(),this.POt.postMessage({type:"runtime-ready"}),this;this.Nkt&&this.Nkt.gOt()}async c5t(t){try{await t(this.QLt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async l5t(t){const s=t.project,i=(this.KOt=s[0],this.YOt=s[16],this.ZOt=s[31],this.QOt=s[38],this.tkt=s[36],s[39]||"loading-logo.png"),e=(this.jkt=!!s[9],this.skt=this.rkt=s[10],this.ikt=this.hkt=s[11],this.pkt.p3t(this.skt,this.ikt),this.ekt=this.skt/2,this.nkt=this.ikt/2,this.Wkt=s[37],this.Bkt=!!s[40],this.M2=s[14],this.lkt=s[15],this.ukt=s[42],this.ckt=s[17],this.akt=!!s[18],this.okt=s[19],this.Akt=s[21],this.Hkt=s[22],this.w7);if(e.EH(s[45]),e.o7(s[7],s[25]),e.RH(s[8]),e.AH(s[32]),e.DH(s[28]),e.e7(s[29]),0===this.okt){let t;(t="flat"===e.JO()?e.OH()+i:i)&&(this.fkt=e.zH({url:t}))}this.Nkt&&(this.Nkt.DDt(V.R3t.BDt(s[12])),this.Nkt.LDt(s[23]?"high":"low"),this.Nkt.nb(0!==s[24]),this.Nkt.VFt(s[34]),this.Nkt.WDt(s[41]),this.Nkt.HFt(s[13]),this.Nkt.UFt(s[30]),this.Nkt.qFt(s[46],s[47]),this.Nkt.JFt(s[26]),this.Nkt.$Ft(s[48]),this.Nkt.XFt(s[50]));const n=s[43],r=(n&&await this.f5t(n),this.d5t(),this.dkt.aTt(),this.kkt=self.p5t(),s[2]);for(const l of r[1])this.dkt.lTt(l);for(const u of r[0])this.dkt.oTt(u);this.kkt=self.p5t(),this.m5t(),this.dkt.dTt();for(const c of s[3]){const f=V.xlt.qM(this,this.bkt.length,c);this.bkt.push(f),this.vkt.set(f.$c().toLowerCase(),f),this.Mkt.set(f.Yz(),f)}for(const d of s[4]){const p=this.bkt[d[0]];p.rIt(d)}for(const m of s[27]){const g=m.map(t=>this.bkt[t]);this.Gkt.push(V.hr(V.nCt,this,g))}this.g5t();for(const y of this.bkt)y.oIt();for(const w of s[5])this.vq.qM(w);const h=s[1];if(h){const S=this.vq.XX(h);S&&this.vq.qX(S)}for(const b of s[35])this.mkt.qM(b);for(const v of s[33])this.yQ.qM(v);for(const M of s[44])this.gkt.qM(M);this.gkt.vlt()||(this.gkt.lr(),this.gkt=null);for(const x of s[49])this.Alt.qM(x);this.Alt.Plt()||(this.Alt.lr(),this.Alt=null);for(const G of s[6])this.Rft.qM(G);this.Rft.rdt(),this.y5t(),V.Nh(this.kkt),this.jL();let o="any",a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.hf("runtime","set-target-orientation",{targetOrientation:o})}async f5t(t){const s=t.format;"image-sequence"===s?this.zkt=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===s?this.zkt=new self.C3ExportToGIF(this,t):"webm"===s?this.zkt=new self.C3ExportToWebMVideo(this,t):"mp4"===s&&(this.zkt=new self.C3ExportToMP4Video(this,t)),this.Wkt="unlimited-frame",this.Nkt.DDt("off"),this.UA=1,self.devicePixelRatio=1,await this.IO("runtime","set-exporting-to-video",{message:this.zkt.GetExportingMessageForPercent(0),duration:this.zkt.tW()})}SOt(){return this.okt}yDt(){return null!==this.zkt}w5t(){return this.zkt.tW()}S5t(){return this.zkt.GetFramerate()}b5t(){return this.zkt.bCt({width:this.Nkt.kk(),height:this.Nkt.Nk()})}v5t(){const t=this.Ykt/this.S5t();return this.zkt.AddFrame(this.Nkt.ADt(),t)}M5t(){this.zkt&&this.zkt._it()}KLt(t){this.zkt.OnOfflineAudioRenderCompleted(t)}x5t(){return this.zkt.tb()}IOt(){return this.VOt}Lg(){return this.Ag}RO(t){this.qOt.push(t)}j$(t){this.XOt=!!t}G5t(t){this.XOt&&this.$Ot.push(t)}q$(){return this.$Ot}Z_t(){return this.xkt++}lIt(){return this.xkt}oAt(t){this.Tkt.add(t)}aAt(t){this.Tkt.delete(t)}gDt(){return this.Tkt}async u5t(t){this.Nkt&&(await this.Nkt.Po(t),this.Nkt.uOt(this.okt))}async QP(){this.Qkt=!0,this.aLt=Date.now();let s=null,t=new Promise(t=>s=t);if(this.akt){for(const n of this.bkt)n.Vz()||n.wIt()||!n.Kk()||n.oxt();(async()=>{await this.w7.ZH(),await t,this.Ag=!1,this.T5t()})()}else this.Ag=!1;this.w7.QH(),this.M4()&&H.RuntimeInit(h);for(const r of this.vq.iO())r.fX();this.yDt()&&await this.b5t();const i=this.vq.$X(),e=(await i.T$(null,this.Eb()),await i.O$(!0),this.bLt=performance.now(),s(),this.akt||this.T5t(),await this.IO("runtime","before-start-ticking"));e.isSuspended&&!this.yDt()?(this.rLt++,this.nLt=!0):this.PY()}T5t(){this.f4(V.rX.nX.eX._5t,null,null),this.hf("runtime","register-sw")}cyt(t){t=Math.floor(t);const s=this.kkt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}m5t(){for(const t of self.I5t){const s=V.first(Object.keys(t));this.Lkt.push(s)}}Edt(t){t=Math.floor(t);const s=this.Lkt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}C5t(){return this.DOt}E5t(){return this.FOt}OF(){return this.OOt}pOt(){return this.ROt}P5t(){return this.AOt}YF(){return this.Rft}uD(){return this.Rft.uD()}Sdt(){return this.Rft.Sdt()}eD(){return this.Rft.eD()}bdt(){return this.Rft.bdt()}Hbt(){return 0===this.Sdt().Kft()}Mdt(){return this.Rft.Mdt()}KRt(){return this.dkt}i7(){return this.dkt.i7()}wz(t){if((t=Math.floor(t))<0||t>=this.bkt.length)throw new RangeError("invalid index");return this.bkt[t]}R5t(t){return this.vkt.get(t.toLowerCase())||null}I8(t){return this.Mkt.get(t)||null}znt(t){const s=V.zk.cL(t);return s?s.mL():null}jz(){return this.bkt}*A5t(){for(const t of this.bkt)t.Vz()||(yield*t.instances())}Nf(){return this.v_t}qF(){return this.Zq}OX(t){t.runtime=this.Jk();const s=this.M4()&&!this.Rft.BL();s&&H.StartMeasuringScriptTime(),this.Zq.dispatchEvent(t),s&&H.AddScriptTime()}tX(t){return t.runtime=this.Jk(),this.Zq.Jf(t)}LF(){return this.skt}BF(){return this.ikt}F5t(t,s){if(this.skt!==t||this.ikt!==s){this.skt=t,this.ikt=s;const i=this.QD();i.eK(),i.nK()}}b9(){return this.rkt}v9(){return this.hkt}PDt(t,s){if(this.rkt!==t||this.hkt!==s){this.rkt=t,this.hkt=s;const i=this.QD();i.eK(),i.nK()}}wDt(t){this.yDt()||(this.UA=t)}Bk(){return this.UA}yJ(){return this.ekt}wJ(){return this.nkt}Ck(){return this.Nkt}GJ(){return this.Nkt?this.Nkt.GJ():this.rkt}TJ(){return this.Nkt?this.Nkt.TJ():this.hkt}MN(){return this.Nkt?this.Nkt.MN():1}$j(){return this.Nkt?this.Nkt.$j():1}nq(){return this.Nkt?this.Nkt.nq():1}iq(){return this.Nkt?this.Nkt.iq():1}dN(){return this.Nkt?this.Nkt.dN():0}pN(){return this.Nkt?this.Nkt.pN():0}D5t(){return this.Nkt?this.Nkt.Ak():0}O5t(){return this.Nkt?this.Nkt.Dk():0}Jj(){return this.Nkt?this.Nkt.Jj():"off"}OJ(t){return this.Nkt?this.Nkt.OJ(t):null}ez(t){this.Nkt&&this.Nkt.ez(t)}FJ(){return this.lkt}cDt(){return this.ukt}fDt(){return this.ckt}OD(){return this.Nkt?this.Nkt.OD():NaN}EM(){return"nearest"!==this.WF()}LD(){return this.Wkt}ND(t){this.Wkt!==t&&(this.Wkt=t,-1!==this.CFt||-1!==this.$kt)&&(this.k5t(),this.L5t())}WF(){return this.M2}iIt(){return this.akt}cOt(){return this.fkt}vOt(){this.fkt&&(this.fkt.dI(),this.fkt.lr(),this.fkt=null)}QD(){return this.vq}KD(){return this.vq.KD()}stt(){return this.yQ}N5t(){return this.mkt}KCt(){return this.gkt}Qlt(){return this.Alt}MF(){return this.w7}zH(t){return this.w7.zH(t)}OL(t,s,i,e,n,r){if(r&&this.gkt){if(t instanceof V.xlt&&t.Vz()){const o=t.$mt(),a=Math.floor(this.XD()*o.length);return this.OL(o[a],s,i,e,n,r)}const h=this.gkt.Mlt(t,r);if(h){const l=this.Iz(h,s,!1,i,e,!1,n,void 0,n);return this.gkt.Glt(l,r),l}}return this.Iz(t,s,!1,i,e,!1,n,void 0,n)}Iz(t,s,i,e,n,r,h,o,a){let l=null,u=null;if(t instanceof V.xlt){if((u=t).Vz()){const b=u.$mt(),v=Math.floor(this.XD()*b.length);u=b[v]}l=u.bz()}else l=t,u=this.wz(l[1]);const c=u.bL().Kk();if(this.Ag&&c&&!u.wIt())return null;const f=s;c||(s=null);let d;d=i&&!r&&l&&!this.Fkt.has(l[2])?l[2]:this.Akt++;const p=l?l[0]:null,m=V.hr(V.Instance,{runtime:this,GN:u,H4:s,SCt:p,xCt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.Fkt.set(d,m);let g=null,y=(c&&(g=m.wO(),void 0!==e&&void 0!==n&&(g.lv(e),g.dv(n)),u.JIt(!0)),s&&(a||s.Ez(m,!0),s.tO().I$(u)),this.Rkt++,!0);if(o){const M=o.TN();if(M.LN()&&u.LN()){const x=u.x$(),G=M.x$();x===G&&(y=!1)}}if(u.LN()&&!i&&!r&&y){const T=new Set;for(const _ of u.x$().lX())if(_!==u){const I=this.B5t(_,g,T);if(I){const C=this.Iz(I,f,!1,g?g.av():e,g?g.cv():n,!0,!1,void 0,a);m.uX(C)}else{const N=this.Iz(_,f,!1,g?g.av():e,g?g.cv():n,!0,!1,void 0,a);m.uX(N)}}for(const E of m.NN()){E.uX(m);for(const P of m.NN())E!==P&&E.uX(P)}}if(c&&!i&&h&&this.W5t(m,p,g,s,e,n,a),u.LN()&&!i&&!r&&h)for(const R of m.NN()){const A=R.wO();if(A){const B=R.bL(),F=R.TN().bz()[0];B.Kk()?this.W5t(R,F,A,s,A.av(),A.cv(),a):this.W5t(R,F,A,s,void 0,void 0,a)}}if(!r&&h){void 0===e&&(e=p[0]),void 0===n&&(n=p[1]);const D=g.vB(),W=e-g.av()+D.av(),j=n-g.cv()+D.cv();D.z4(W,j)}u.jIt();const k=l?V.Kh(l[5]):null,L=l?l[4].map(t=>V.Kh(t)):null,w=c&&p&&p[13];if(w&&m.ECt(),m.gIt(k,L),w){const O=p[13];m.p6().Gxt(O[2],O[0],O[1])}this.Ikt.push(m),this.Ekt=!0,this.M4()&&H.InstanceCreated(m);const S=this.WLt.instancecreate;return S.T6=m,this.v_t.dispatchEvent(S),m}qEt(t){const s=t[0],i=t[1],e=t[2],n=t[6];if(n)return n;const r=this.vq.KX(s),h=r.SO(i);return h.xz(e)}B5t(t,s,i){const e=s?.XCt()??[];for(const n of e){const r=this.qEt(n),h=!!n[4],o=this.wz(r[1]);if(!i.has(r)&&t===o&&h)return i.add(r),r}}W5t(a,t,s,l,u,c,f){const i=s.pRt(),e=s.XCt();if(a.wO().mRt(i),e){void 0===u&&(u=t[0]),void 0===c&&(c=t[1]);const d=new Set,p=t[0],m=t[1];for(const g of e){let t=g[0],s=g[1],i=g[2],e=g[3],n=!!g[4],r=g[5],h=g[6],o;if(h)o=h;else{const b=this.vq.KX(t),v=b.SO(s);o=v.xz(i)}const y=this.wz(o[1]),w=a.YCt(y),S=d.has(y);if(w&&!S&&n){const M=a.ZCt(y),x=(M.wO().bCt(o[0]),u+o[0][0]-p),G=c+o[0][1]-m;M.wO().z4(x,G),M.wO().mRt(r),a.EB(M,{OB:!!(e>>0&1),LB:!!(e>>1&1),BB:!!(e>>2&1),jB:!!(e>>3&1),HB:!!(e>>4&1),YB:!!(e>>5&1),zB:!!(e>>6&1),qB:!!(e>>7&1),XB:!!(e>>8&1)}),d.add(y)}else{const T=u+o[0][0]-p,_=c+o[0][1]-m,I=this.Iz(o,l,!1,T,_,!1,!0,a,f);I.wO().mRt(r),a.EB(I,{OB:!!(e>>0&1),LB:!!(e>>1&1),BB:!!(e>>2&1),jB:!!(e>>3&1),HB:!!(e>>4&1),YB:!!(e>>5&1),zB:!!(e>>6&1),qB:!!(e>>7&1),XB:!!(e>>8&1)})}}}}AN(i){if(!this.Dkt.has(i)){let t=i.TN(),s=this.Ckt.get(t);if(s){if(s.has(i))return;s.add(i)}else(s=new Set).add(i),this.Ckt.set(t,s);if(this.M4()&&H.InstanceDestroyed(i),i.RCt(),this.Ekt=!0,i.LN())for(const e of i.NN())this.AN(e);for(const n of i.children())n.ZB()&&this.AN(n);if(!this.vq.WL()&&!this._Lt){const r=this.YF();r.LL(!0),i.aEt(),r.LL(!1)}i.lEt(this.vq.WL())}}jL(){this.Ekt&&(this.Pkt=!0,this.j5t(),this.V5t(),this.Pkt=!1,this.Ekt=!1,this.TO())}j5t(){for(const t of this.Ikt){const s=t.TN();s.Ez(t);for(const i of s.kdt())i.Ez(t),i.jIt()}V.Nh(this.Ikt)}V5t(){this.v_t.Rf(!0);for(const[t,s]of this.Ckt.entries())this.H5t(t,s),s.clear();this.Ckt.clear(),this.v_t.Rf(!1)}H5t(t,s){for(const i of s){const e=this.WLt.instancedestroy,n=(e.T6=i,this.v_t.dispatchEvent(e),this.Fkt.delete(i.BN()),this.wLt.delete(i),i.wO());n&&(n.wRt(),n.Fz(),n.RCt()),this.Dkt.add(i),this.Rkt--}V.qh(t.PL(),s),t.jIt(),this.Okt.add(t);for(const r of t.kdt())V.qh(r.PL(),s),r.jIt(),this.Okt.add(r);if(t.bL().Kk()){const h=new Set([...s].map(t=>t.wO().SO()));for(const o of h)o.J9(s)}}HIt(){return this.Ikt}*$vt(t){for(const s of this.HIt())t.Vz()?s.TN().Ubt(t)&&(yield s):s.TN()===t&&(yield s)}mIt(){return this.Akt++}yIt(t,s){this.Fkt.set(t,s)}M8(t){this.eLt!==(t=!!t)&&(this.eLt=!!t,this.eLt)&&this.nLt&&(this.T8(!1),this.nLt=!1)}x8(){return this.eLt}D$(){this.v_t.dispatchEvent(V.hr(V.Event,"renderercontextlost")),this.T8(!0);for(const s of this.bkt)!s.Vz()&&s.SIt()&&s.A$();const t=this.KD();t&&t.D$(),V.gTt.P7(),V.qH.P7()}async VDt(){await this.KD().T$(null,this.Eb()),this.v_t.dispatchEvent(V.hr(V.Event,"renderercontextrestored")),this.T8(!1),this.TO()}qLt(t){if(this.eLt){const s=t.hidden;this.T8(s),(this.nLt=s)||this.TO()}}YLt(t){this._Ot()&&this.Hkt&&!V.hi.yi&&!t.data.parentHasFocus&&(this.T8(!0),this.Ukt=!0)}ZLt(){this.Ukt&&(this.T8(!1),this.Ukt=!1)}L5t(){const t=this.Jkt;"vsync"===this.Wkt?-1===this.CFt&&(this.CFt=self.requestAnimationFrame(t.qkt)):"unlimited-tick"===this.Wkt?(-1===this.$kt&&(this.$kt=V.uo(t.Xkt)),-1===this.CFt&&(this.CFt=self.requestAnimationFrame(t.Kkt))):-1===this.$kt&&(this.$kt=V.uo(t.qkt))}k5t(){-1!==this.CFt&&(self.cancelAnimationFrame(this.CFt),this.CFt=-1),-1!==this.$kt&&(V.co(this.$kt),this.$kt=-1)}yD(){return 0<this.rLt}T8(t){if(!this.yDt()){const s=this.yD(),i=(this.rLt+=t?1:-1,this.rLt<0&&(this.rLt=0),this.yD());if(!s&&i)console.log("[Construct] Suspending"),this.k5t(),this.v_t.dispatchEvent(V.hr(V.Event,"suspend")),this.f4(V.rX.nX.eX.U5t,null,null);else if(s&&!i){console.log("[Construct] Resuming");const e=performance.now();this.lLt=e,this.bLt=e,this.SLt=0,this.vLt=0,this.MLt=0,this.xLt=0,this.TLt=0,this.GLt=0,this.v_t.dispatchEvent(V.hr(V.Event,"resume")),this.f4(V.rX.nX.eX.z5t,null,null),this.a1t()||this.PY(e)}}}l8(t){this.VLt.oc(t)}d8(t){this.HLt.oc(t)}c8(t){this.ULt.oc(t)}u8(t){this.VLt.y0(t)}p8(t){this.HLt.y0(t)}f8(t){this.ULt.y0(t)}J5t(t,s){let i=s?performance.now():0,e;return t instanceof n?(e=t.x4(),s&&H.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.PY(),s&&H.AddIndividualBehaviorTickTime(t.v6(),performance.now()-i)),e}q5t(){const t=this.M4();this.VLt.hd(!0);for(const s of this.VLt)this.J5t(s,t);this.VLt.hd(!1)}$5t(t,s){let i=s?performance.now():0,e;return t instanceof n?(e=t.g8(),s&&H.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.KGt(),s&&H.AddIndividualBehaviorTickTime(t.v6(),performance.now()-i)),e}X5t(){const t=this.M4();this.HLt.hd(!0);for(const s of this.HLt)this.$5t(s,t);this.HLt.hd(!1)}K5t(t,s){let i=s?performance.now():0,e;return t instanceof n?(e=t.T4(),s&&H.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.zxt(),s&&H.AddIndividualBehaviorTickTime(t.v6(),performance.now()-i)),e}Y5t(){const t=this.M4();this.ULt.hd(!0);for(const s of this.ULt)this.K5t(s,t);this.ULt.hd(!1)}*Z5t(){const t=this.M4();this.VLt.hd(!0);for(const s of this.VLt){const i=this.J5t(s,t);V.Wo(i)&&(yield*i)}this.VLt.hd(!1)}*Q5t(){const t=this.M4();this.HLt.hd(!0);for(const s of this.HLt){const i=this.$5t(s,t);V.Wo(i)&&(yield*i)}this.HLt.hd(!1)}*tNt(){const t=this.M4();this.ULt.hd(!0);for(const s of this.ULt){const i=this.K5t(s,t);V.Wo(i)&&(yield*i)}this.ULt.hd(!1)}async PY(a,t,s){this.sLt=!0;const l="background-wake"===s,u="background-wake"!==s&&"skip-render"!==s,c=this.QD(),f=this.Ck();if(this.Qkt&&(!this.yD()||t||l)){let t=performance.now(),s=(this.tLt=!0,this.sNt(a||0),this.MLt++,this.iNt(),this.eNt()),i=(this.jvt()&&await s,this.v_t.qf(this.WLt.pretick)),e=(i instanceof Promise&&await i,this.OX(this.jLt.pretick),this.nNt()),n=(this.jvt()&&await e,this.rNt()&&await this.hNt(),c.nO()&&await this.oNt(),this.aNt()),r=(this.jvt()&&await n,c.KD()),h=r.w$(),o=!1;if(-1!==h&&(r.S$(),f.y$()!==h)){const d=this.Ck().B$(h);this.OF()&&(o=!0,await d)}this.hf("canvas","update-html-layer-dom-state",{layersDomState:r.Kz().filter(t=>t.B5()).map(t=>t.tJ())}),u&&this.f3(),o&&this.hf("canvas","cleanup-html-layers"),this.yDt()&&(await this.v5t(),this.xD()>=this.w5t())?this.x5t():(this.yD()||l||this.L5t(),this.Ykt++,this.Zkt++,this.tLt=!1,this.GLt+=performance.now()-t)}}async eNt(){const t=this.Rft,s=this.M4();this.jL(),t.LL(!0),this.Kdt(this.KD()),s&&H.StartMeasuringTime(),this.jvt()?await t.E1t():t.G1t(),s&&H.AddEventsTime(),this.Ydt(),t.LL(!1),this.jL(),t.LL(!0)}async nNt(){const t=this.Rft,s=this.M4(),i=this.jvt(),e=this.v_t,n=this.WLt,r=this.jLt;s&&H.StartMeasuringTime(),i?await this.lNt(this.Z5t()):this.q5t(),i?await this.lNt(this.Q5t()):this.X5t(),s&&H.AddBehaviorTotalTickTime(),s&&H.StartMeasuringTime(),i?await this.uNt(n.tick):e.dispatchEvent(n.tick),s&&H.AddPluginTotalTickTime(),t.LL(!1),this.OX(r.tick)}async aNt(){const t=this.Rft,s=this.v_t,i=this.WLt,e=this.jLt,n=this.M4(),r=this.jvt();n&&H.StartMeasuringTime(),r?await t.Zdt(this.vq):t.Xdt(this.vq),n&&H.AddEventsTime(),this.pkt.jAt(),this.iNt(),this.iLt=!1,t.LL(!0),n&&H.StartMeasuringTime(),r?await this.lNt(this.tNt()):this.Y5t(),n&&H.AddBehaviorTotalTickTime(),n&&H.StartMeasuringTime(),r?await this.uNt(i.tick2):s.dispatchEvent(i.tick2),n&&H.AddPluginTotalTickTime(),t.LL(!1),this.OX(e.tick2),r&&await t.l1t()}iNt(){if(0!==this.Dkt.size){const t=this.v_t;t.Rf(!0);for(const s of this.Okt)s.w1t().oft(this.Dkt);this.Okt.clear(),this.Rft.R1t(this.Dkt);for(const i of this.Dkt)i.lr();this.Dkt.clear(),t.Rf(!1)}}async oNt(){let t=this.QD(),s=0;for(;t.nO()&&s++<10;)await this.cNt(t.iK())}sNt(t){let s=0;if(this.yDt())s=1/this.S5t(),this.uLt=s,this.cLt=s;else if(0!==this.lLt){const i=Math.max(t-this.lLt,0);.5<(s=i/1e3)&&(s=0),this.uLt=s,this.cLt=V.mr(s,this.pLt,this.dLt)}this.lLt=t,this.fLt=this.cLt*this.yCt,this.mLt.oc(this.fLt),this.gLt.oc(s*this.yCt),this.yLt.oc(this.cLt);for(const[e,n]of this.wLt)n.oc(this.cLt*e.ID());this.Nkt&&this.Nkt.tOt(),1e3<=t-this.bLt&&(this.bLt+=1e3,1e3<=t-this.bLt&&(this.bLt=t),this.vLt=this.SLt,this.SLt=0,this.xLt=this.MLt,this.MLt=0,this.TLt=Math.min(this.GLt/1e3,1),this.GLt=0,this.Nkt&&this.Nkt.QDt(),this.pkt.LAt(),this.M4())&&H.Update1sPerfStats()}ICt(t,s){if(s){if(!this.wLt.has(t)){const i=V.hr(V.S0);i.G0(this.mLt),this.wLt.set(t,i)}}else this.wLt.delete(t)}CCt(t){const s=this.wLt.get(t);return s?s.Qs():this.xD()}async cNt(t){const s=this.v_t,i=this.QD(),e=i.KD();await e.pX(),e.F$(t,this.Eb()),e===t&&this.Rft.yX(),this.pkt.jAt(),this.iNt(),s.dispatchEvent(this.WLt.beforelayoutchange),V.Ff.Kf(!0),await t.T$(e,this.Eb()),V.Ff.Kf(!1),await t.O$(!1),s.dispatchEvent(this.WLt.layoutchange),this.TO(),this.iLt=!0,this.jL(),this.M5t()}TO(){this.Vkt=!0}HDt(){return this.Nkt?this.Nkt.HDt():null}UDt(){return this.Nkt?this.Nkt.UDt():null}Eb(){return this.Nkt?this.Nkt.Eb():null}f3(){const i=this.Nkt;if(i&&!i.jDt()){const e=this.Eb(),t=e.vR(),n=t&&e.ab(),r=t&&e._w();if(n&&e.oR(),this.Vkt||this.yDt()){const h=this.vq.KD(),o=(this.SLt++,e.QP(),this.M4());o&&H.StartMeasuringTime(),this.Vkt=!1;let t=null,s=(n&&(t=i.eOt().XC(),e.bR(t)),null);r&&(s=e.StartFrameTiming(2*(1+h.c$())),e.StartMeasuringRenderPassTime(0,1)),this.P9()&&"low"===i.DJ()?e.fP(i.GJ(),i.TJ()):e.dP(),this.fNt(this.Eb(),h),t&&e.MR(t),r&&(e.StopMeasuringRenderPassTime(),this.Nkt.nOt(s)),e.tb(),o&&(H.AddDrawCallsTime(),H.UpdateInspectHighlight()),i&&i.hOt()}else e.eb()}}IX(t){return"low"===this.Ck().DJ()||t.ab()&&(this.FJ()||this.P9())}fNt(s,i){s.Dw(),s.PP(),s.MP(1,1,1,1),s.cR(null),s._P(null),s.sR(this.P9()),this.IX(s)&&i.TX(s);const e=i.y$();for(let t=1;t<e;++t)i.RX(s,t),s._w()&&s.Restart();this.IX(s)||i.TX(s),i.PX(s)}f4(t,s,i){if(!this.Qkt)return!1;let e=!this.tLt&&!this.Rft.d1t(),n=0;e&&(n=performance.now());const r=this.M4(),h=(r&&this.W8(!1),this.Rft.i1t(this.vq,t,s,i));if(e){const o=performance.now()-n;this.GLt+=o,r&&H.AddTriggersTime(o)}return r&&this.W8(!0),h}Fxt(t,s,i){if(!this.jvt())return this.f4(t,s,i);if(this.a1t())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.tLt||this.Rft.d1t())return this.Rft.r1t(this.vq,t,s,i);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async m4(t,s,i){if(!this.jvt())return this.f4(t,s,i);if(!this.Qkt)return!1;if(this.a1t())return this.Rft.h1t(t,s,i);if(!this.KD())return this.Rft.e1t(t,s,i);let e=performance.now(),n=this.Rft.r1t(this.vq,t,s,i),r=n.next();for(;!r.done;)await this.t1t(r.value),r=n.next();return this.yD()||this.Rft.d1t()||(await this.Rft.l1t(),this.sLt&&!this.tLt&&this.L5t()),this.GLt+=performance.now()-e,r.value}Dxt(t,s,i){const e=this.M4(),n=(e&&this.W8(!1),this.Rft.u1t(this.vq,t,s,i));return e&&this.W8(!0),n}Oxt(t,s,i){return this.Rft.c1t(this.vq,t,s,i)}kxt(t){return this.hLt.oc(t)}Kdt(t){this._kt.push(t)}Ydt(){if(!this._kt.length)throw new Error("layout stack empty");this._kt.pop()}gO(){return this._kt.length?this._kt.at(-1):this.KD()}SD(t){return t&&-1!==t.ID()?this.cLt*t.ID():this.fLt}CY(){return this.fLt}EY(){return this.cLt}vD(){return this.uLt}ID(){return this.yCt}CD(t){(isNaN(t)||t<0)&&(t=0),this.yCt=t}jD(t){this.pLt=Math.max(t,0)}WD(){return this.pLt}UD(t){this.dLt=Math.max(t,0)}HD(){return this.dLt}ED(){return this.vLt}RD(){return this.xLt}FD(){return this.TLt}dNt(){return this.aLt}xD(){return this.mLt.Qs()}pNt(){return this.gLt.Qs()}TD(){return this.yLt.Qs()}Gtt(){return this.Ykt}mNt(){return this.Zkt}gNt(){return this.Rkt}EF(){return this.KOt}RF(){return this.YOt}yNt(){return this.ZOt}wNt(){return this.QOt}FF(){return this.tkt}dO(t){if(this._Lt)throw new Error("cannot call while loading state - wait until afterload event");return this.Fkt.get(t)||null}aX(){this.Fkt.clear();for(const t of this.bkt)if(!t.Vz())for(const s of t.PL())this.Fkt.set(s.BN(),s)}_Ot(){return"preview"===this.LOt}M4(){return this.HOt}Gk(){return this.LOt}Tk(){return"nwjs"===this.Gk()||this.NOt}COt(){return"cordova"===this.LOt}SNt(){return"Android"===V.hi.oi&&("cordova"===this.LOt||"playable-ad-single-file"===this.LOt||"playable-ad-zip"===this.LOt||"instant-games"===this.LOt)}bNt(){return this.eH}vNt(){return this.BOt}_k(){return this.WOt}MNt(){return this.jOt}TF(){return this.pkt}pTt(){return this.dkt.pTt()}mTt(){return this.dkt.mTt()}P9(){return this.Bkt}xNt(){return this.Eb().pw(this.v9())}cw(t){return this.Eb().cw(t||this.v9())}GNt(){return this.iLt}TNt(t){this.jkt!==(t=!!t)&&(this.jkt=t,this.QD().nK(),this.TO())}VF(){return this.jkt}_Nt(t){if(!this.Skt.has(t)){const i=()=>this.INt(t);this.Skt.set(t,i),t.Nf().addEventListener("animationframeimagechange",i)}const s=this.Ig.vg(t);return s.kg()||s.Ng().then(()=>this.TO()),s}INt(t){this.Ig.Tg(t)}ykt(t){const s=[];for(const i of t.RIt())for(const e of i.J6()){const n=e.Q6();s.push({source:e,width:n.nm(),height:n.gm(),tag:e.wW()})}return{Dg:s}}async wkt(t){const s=V.hr(V.ad),i=[],n=new Map;for(const h of t.RIt())for(const o of h.J6()){const a=o.Q6().kTt();n.has(a)||(n.set(a,null),i.push(s.oc(async()=>{const t=await a.D7();n.set(a,t)})))}await Promise.all(i);const e=[];for(const l of t.RIt())for(const u of l.J6())e.push(s.oc(async()=>{const t=u.Q6(),s=n.get(t.kTt()),i=await t.LTt(s),e=await createImageBitmap(i);return{Wg:e}}));const r=await Promise.all(e);for(const c of n.values())c instanceof ImageBitmap&&c.close&&c.close();return{Dg:r}}CNt(t){this.ILt=t,this.CLt=!1}ENt(){this.ILt="",this.CLt=!0}PNt(t){this.ELt=t}k2t(t){this.E4=t}RNt(){return this.PLt}rNt(){return!!(this.ILt||this.CLt||this.ELt||null!==this.E4)}async hNt(){if(this.ILt&&(this.jL(),await this.ANt(this.ILt),this.FNt()),this.ELt&&(await this.DNt(this.ELt),this.FNt(),this.M4())&&H.StepIfPausedInDebugger(),this.CLt){const t=await this.ONt();this.PLt=t,await this.m4(V.rX.nX.eX.kNt,null),this.PLt="",this.FNt()}if(null!==this.E4){this.jL();try{await this.LNt(this.E4),this.PLt=this.E4,await this.m4(V.rX.nX.eX.NNt,null),this.PLt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.m4(V.rX.nX.eX.BNt,null)}this.FNt()}}FNt(){this.ILt="",this.CLt=!1,this.ELt="",this.E4=null}jk(){return this.RLt||(this.RLt=localforage.Di({name:"c3-localstorage-"+this.yNt(),description:this.EF()})),this.RLt}WNt(){return this.ALt||(this.ALt=localforage.Di({name:"c3-savegames-"+this.yNt(),description:this.EF()})),this.ALt}async ANt(t){const s=await this.ONt();try{await this.WNt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.PLt=s,await this.m4(V.rX.nX.eX.kNt,null),this.PLt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.m4(V.rX.nX.eX.jNt,null)}}async DNt(t){try{const s=await this.WNt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.LNt(s),this.PLt=s,await this.m4(V.rX.nX.eX.NNt,null),this.PLt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.m4(V.rX.nX.eX.BNt,null)}}async ONt(){const t={c3save:!0,version:1,rt:{time:this.xD(),timeRaw:this.pNt(),walltime:this.TD(),timescale:this.ID(),tickcount:this.Gtt(),next_uid:this.Akt,running_layout:this.KD().Yz(),start_time_offset:Date.now()-this.aLt},types:{},layouts:{},events:this.Rft.mq(),timelines:this.yQ.mq(),user_script_data:null};for(const i of this.bkt)i.Vz()||i.QIt()||(t.types[i.Yz().toString()]=i.mq());for(const e of this.vq.iO())t.layouts[e.Yz().toString()]=e.mq();const s=this.VNt("save");return s.saveData=null,await this.tX(s),t.user_script_data=s.saveData,JSON.stringify(t)}$$(){return this._Lt}async LNt(t){const s=this.QD(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(1<i.version)throw new Error("C3 save data from future version");this.L2t(),this.v_t.dispatchEvent(V.hr(V.Event,"beforeload"));for(const a of this.A5t()){const l=a.TN();l.QIt()||a.PK()}let e=i.rt,n=(this.mLt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.gLt.Set(e.timeRaw),this.yLt.Set(e.walltime),this.yCt=e.timescale,this.Ykt=e.tickcount,this.aLt=Date.now()-e.start_time_offset,e.running_layout),r=!(this._Lt=!0);if(n!==this.KD().Yz()){const u=s.KX(n);if(!u)return;await this.cNt(u),r=!0}for(const[c,f]of Object.entries(i.layouts)){const d=parseInt(c,10),p=s.KX(d);p&&p.gq(f)}const h=new Set;for(const[m,g]of Object.entries(i.types)){const y=parseInt(m,10),w=this.I8(y);!w||w.Vz()||w.QIt()||w.gq(g,h)}for(const S of this.vq.iO())for(const b of S.o5())b.yq();if(this.jL(),this.aX(),this._Lt=!1,r){for(const v of this.A5t())v.X$();for(const[M,x]of Object.entries(i.types)){const G=parseInt(M,10),T=this.I8(G);!T||T.Vz()||T.QIt()||T.iCt(x)}}this.Akt=e.next_uid,this.Rft.gq(i.events);for(const _ of this.bkt)if(!_.Vz()&&_.LN())for(const I of _.PL()){const C=I.jN();for(const E of _.x$().lX())if(E!==_){const P=E.PL();if(C<0||C>=P.length)throw new Error("missing sibling instance");I.uX(P[C])}}this.yQ.gq(i.timelines),s.eK(),s.nK();for(const R of h)R.oEt();this.N2t(),this.v_t.dispatchEvent(V.hr(V.Event,"afterload")),this.OX(this.VNt("afterload"));for(const[A,F]of Object.entries(i.types)){const D=parseInt(A,10),O=this.I8(D);O&&O.sCt()}const o=this.VNt("load");o.saveData=i.user_script_data,await this.tX(o),this.TO()}HNt(t,s){return t.wO().lRt()-s.wO().lRt()}XRt(t,s){t.wO()&&!this.i5t.has(t)&&(this.i5t.set(t,s),this.e5t.push(t))}L2t(){this.i5t=new WeakMap,V.Nh(this.e5t)}N2t(t="full",s=null){this.e5t.sort(this.HNt);for(const i of this.e5t)i.AK(this.i5t.get(i),t,s);for(const e of this.e5t)e.fEt(this.i5t.get(e),t,s);this.L2t()}async UNt(t){const s=await Promise.all(t.map(async t=>{const s=this.COt()&&this.w7.kH();if(s||"playable-ad-single-file"===this.Gk()){const i=await this.w7.xo(t);return URL.createObjectURL(i)}return new URL(t,location.href).toString()}));this.zLt.zNt(s)}JNt(t,s){this.zLt.qNt(t,s)}$Nt(t,s){this.zLt.XNt(t,s)}KNt(t,s,i,e){return this.zLt.KNt(t,s,i,null,null,e)}YNt(t,s,i,e){return this.zLt.YNt(t,s,i,e)}ZNt(){return this.zLt.QNt()}cO(t,s){this.hf("runtime","invoke-download",{url:t,filename:s})}async mOt(t,s,i,e,n,r){if(e=e||s,n=n||i,this.OF()){const h=await this.IO("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:n,imageBitmapOpts:r});return h.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,s,i,e,n);return r?self.createImageBitmap(o,r):o}}async t4t(t){return this.OF()?this.IO("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}s4t(){this.kLt||(this.kLt=!0,this.hf("runtime","enable-device-orientation"))}i4t(){this.LLt||(this.LLt=!0,this.hf("runtime","enable-device-motion"))}XD(){return this.oLt()}e4t(t){this.oLt=t}XLt(){const t=this.Eb();return{fps:this.ED(),tps:this.RD(),cpu:this.FD(),gpu:this.OD(),layout:this.KD()?this.KD().$c():"",renderer:t.ab()?t.PR():t.GetAdapterInfoString()}}a1t(){return!!this.M4()&&H.a1t()}t1t(t){return this.jvt()?H.t1t(t):Promise.resolve()}kgt(){return!!this.jvt()&&H.BreakNext()}n4t(t){this.UOt=!!t,this.r4t()}h4t(){return this.UOt}jvt(){return this.zOt}W8(t){t?this.JOt--:this.JOt++,this.r4t()}r4t(){this.zOt=this.M4()&&this.UOt&&0===this.JOt}tmt(){return this.M4()&&H.tmt()}EJ(){return this.M4()&&this.Eb().vR()&&H.EJ()}async lNt(t){if(t)for(const s of t)await this.t1t(s)}uNt(t){return this.lNt(this.v_t.Xf(t))}idt(t){return this.Rft.idt(t.name,t.params)}EO(t){if(this.OF())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}Jk(){return this.QLt}VNt(t){const s=V.hr(V.Event,t,!1);return s.runtime=this.QLt,s}d5t(){this.QLt=new self.SF(this),this.jLt={pretick:this.VNt("pretick"),tick:this.VNt("tick"),tick2:this.VNt("tick2")}}g5t(){const t={};for(const s of this.bkt)t[s.Edt()]={value:s.pL(),enumerable:!0,writable:!1};this.QLt.$F(t)}y5t(){const t={};for(const s of this.YF().Ldt())t[s.Edt()]=s.Pdt();this.QLt.XF(t)}hO(){return this.s5t}lL(t,s){this.t5t.set(t,s)}u5(t){return this.t5t.get(t)}gk(t){if(!(t instanceof self.wL))throw new TypeError("expected IObjectClass");const s=this.u5(t);if(s&&s instanceof V.xlt)return s;throw new Error("invalid IObjectClass")}IL(t){if(!(t instanceof self.xN))throw new TypeError("expected IInstance");const s=this.u5(t);if(s&&s instanceof V.Instance)return s;throw new Error("invalid IInstance")}yO(t){if(!(t instanceof self.l6))throw new TypeError("expected IWorldInstance");const s=this.u5(t);if(s&&s instanceof V.Instance)return s;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=V.EOt.qM,self.C3_InitRuntime=(t,s)=>t.bCt(s)}{const Fa=self.Os;Fa.JLt=class extends Fa.nr{constructor(t,s){super(),this.ef=t,this.o4t=new Map,this.a4t=0,this.l4t=s.inputPort,s.outputPort.onmessage=t=>this.u4t(t),this.c4t=s.maxNumWorkers,this.f4t=1,this.d4t=!1,this.p4t=!1}QNt(){return this.c4t}zNt(t){this.l4t.postMessage({type:"_import_scripts",scripts:t})}qNt(t,s){this.l4t.postMessage({type:"_send_blob",blob:t,id:s})}XNt(t,s){this.l4t.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}KNt(t,s,i,e,n,r){if(i=i||[],"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const h=this.a4t++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:h,params:s,transferables:i},a=new Promise((t,s)=>{this.o4t.set(h,{resolve:t,progress:e,reject:s,m4t:!1,maxWorkerNum:r})});return n&&n.m0(()=>this.g4t(h)),this.l4t.postMessage(o,i),this.y4t(),a}YNt(t,s,i,e){if(i=i||[],"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const n=this.a4t++,r={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:n,params:s,transferables:i};this.l4t.postMessage(r,i)}g4t(t){const s=this.o4t.get(t);s&&(s.m4t=!0,s.resolve=null,s.progress=null,s.reject=null,this.l4t.postMessage({type:"_cancel",jobId:t}))}u4t(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.w4t(e,s.result);break;case"progress":this.S4t(e,s.progress);break;case"error":this.b4t(e,s.error);break;case"ready":this.v4t();break;default:throw new Error(`unknown message from worker '${i}'`)}}w4t(t,s){const i=this.o4t.get(t);if(!i)throw new Error("invalid job ID");i.m4t||i.resolve(s),this.o4t.delete(t)}S4t(t,s){const i=this.o4t.get(t);if(!i)throw new Error("invalid job ID");!i.m4t&&i.progress&&i.progress(s)}b4t(t,s){const i=this.o4t.get(t);if(!i)throw new Error("invalid job ID");i.m4t||i.reject(s),this.o4t.delete(t)}v4t(){this.d4t&&(this.d4t=!1,this.f4t++,this.f4t<this.c4t?this.y4t():this.l4t.postMessage({type:"_no_more_workers"}))}M4t(){let t=0,s=[...this.o4t.values()].sort((t,s)=>{const i=t.maxWorkerNum||1/0,e=s.maxWorkerNum||1/0;return i-e});for(const i of s){const e=i.maxWorkerNum||1/0;t<e&&t++}return t}async y4t(){if(!(this.f4t>=this.c4t||this.d4t||this.p4t||this.M4t()<=this.f4t))try{this.d4t=!0;const t=await this.ef.IO("runtime","create-job-worker");t.outputPort.onmessage=t=>this.u4t(t)}catch(t){this.p4t=!0,this.d4t=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.f4t} so far)`,t)}}}}self.C3_Shaders={};{let S=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const n=""+i,r=""+e;return n<r?-1:r<n?1:0}},b=(S,self.Os),i=null,e="",n="",r=[],h="",o="",a="",v=b.hr(b.I0t);b.rX.nX=class extends b.LMt{constructor(t){super(t),this.M0t=this.ef.YF().N8(),this.aft=this.ef.YF().uD(),this.x4t=0,this.G4t=0,this.T4t=new Map}lr(){super.lr()}TO(){this.ef.TO()}f4(t){this.ef.f4(t,null,null)}_4t(t,s){return i&&t===e&&s===n||(i=new RegExp(t,s),e=t,n=s),i.lastIndex=0,i}I4t(t,s,i){if(t!==h||s!==o||i!==a){const e=this._4t(s,i);r=t.match(e),h=t,o=s,a=i}return r}async C4t(t,s){if(s.length){this.x4t+=s.length;const i=[];for(const e of s)i.push(t.I$(e));await b.ho(i,()=>{this.G4t++}),this.G4t++,this.G4t===this.x4t&&(this.G4t=0,this.x4t=0,this.ef.f4(b.rX.nX.eX.E4t,null,null))}}s7(){return 0===this.x4t?1:this.G4t/this.x4t}P4t(t,s){for(const i of s)0===i.FL()&&t.R$(i)}R4t(){return v}A4t(s){const i=this.ef.YF(),t=i.uD(),e=t.k8(),n=e.eD(),r=n.O8(),h=e.a0t(),o=t.L8(n),a=i.N8(),l=a.L8();if(l.T0t(s),h)for(let t=0;t<s&&!l.q8();++t)i.V8(r),l.z8(t),n.H8(e,o),i.U8(r);else for(let t=0;t<s&&!l.q8();++t)l.z8(t),n.H8(e,o);return t.X8(),a.X8(),!1}*F4t(s){const i=this.ef.YF(),t=i.uD(),e=t.k8(),n=e.eD(),r=n.O8(),h=e.a0t(),o=t.L8(n),a=i.N8(),l=a.L8();if(l.T0t(s),h)for(let t=0;t<s&&!l.q8();++t)i.V8(r),l.z8(t),yield*n.qgt(e,o),i.U8(r);else for(let t=0;t<s&&!l.q8();++t)l.z8(t),yield*n.qgt(e,o);return t.X8(),a.X8(),!1}D4t(){const s=this.ef.YF(),t=s.uD(),i=t.k8(),e=i.eD(),n=e.O8(),r=i.a0t(),h=t.L8(e),o=s.N8(),a=o.L8();if(r)for(let t=0;!a.q8();++t)s.V8(n),a.z8(t),e.H8(i,h)||a.vW(),s.U8(n);else for(let t=0;!a.q8();++t)a.z8(t),e.H8(i,h)||a.vW();return t.X8(),o.X8(),!1}*O4t(){const s=this.ef.YF(),t=s.uD(),i=t.k8(),e=i.eD(),n=e.O8(),r=i.a0t(),h=t.L8(e),o=s.N8(),a=o.L8();if(r)for(let t=0;!a.q8();++t){s.V8(n),a.z8(t);const l=yield*e.qgt(i,h);l||a.vW(),s.U8(n)}else for(let t=0;!a.q8();++t){a.z8(t);const u=yield*e.qgt(i,h);u||a.vW()}return t.X8(),o.X8(),!1}k4t(t,s,i){const e=this.ef.YF(),n=e.uD(),r=n.k8(),h=r.eD(),o=h.O8(),a=r.a0t(),l=n.L8(h),u=e.N8(),c=u.L8();if(c.B8(t),c.T0t(i),i<s)if(a)for(let t=s;t>=i&&!c.q8();--t)e.V8(o),c.z8(t),h.H8(r,l),e.U8(o);else for(let t=s;t>=i&&!c.q8();--t)c.z8(t),h.H8(r,l);else if(a)for(let t=s;t<=i&&!c.q8();++t)e.V8(o),c.z8(t),h.H8(r,l),e.U8(o);else for(let t=s;t<=i&&!c.q8();++t)c.z8(t),h.H8(r,l);return n.X8(),u.X8(),!1}*L4t(t,s,i){const e=this.ef.YF(),n=e.uD(),r=n.k8(),h=r.eD(),o=h.O8(),a=r.a0t(),l=n.L8(h),u=e.N8(),c=u.L8();if(c.B8(t),c.T0t(i),i<s)if(a)for(let t=s;t>=i&&!c.q8();--t)e.V8(o),c.z8(t),yield*h.qgt(r,l),e.U8(o);else for(let t=s;t>=i&&!c.q8();--t)c.z8(t),yield*h.qgt(r,l);else if(a)for(let t=s;t<=i&&!c.q8();++t)e.V8(o),c.z8(t),yield*h.qgt(r,l),e.U8(o);else for(let t=s;t<=i&&!c.q8();++t)c.z8(t),yield*h.qgt(r,l);return n.X8(),u.X8(),!1}N4t(i){const t=i.RL(),s=t.PL();if(0!==s.length){const e=this.ef.YF(),n=e.uD(),r=n.k8(),h=r.eD(),o=h.O8(),a=r.a0t(),l=n.L8(h),u=e.N8(),c=u.L8(),f=i.LN(),d=v.L8();if(b.Vh(d,s),c.T0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.q8();++t){e.V8(o);const p=d[t];i.RL().Mft(p),f&&p.hmt(),c.z8(t),h.H8(r,l),e.U8(o)}else{t.Sft(!1);const m=t.bft();b.Nh(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.q8();++t){const g=d[t];m[0]=g,f&&g.hmt(),c.z8(t),h.H8(r,l)}}n.X8(),u.X8(),b.Nh(d),v.X8()}return!1}*B4t(i){const t=i.RL(),s=t.PL();if(0!==s.length){const e=this.ef.YF(),n=e.uD(),r=n.k8(),h=r.eD(),o=h.O8(),a=r.a0t(),l=n.L8(h),u=e.N8(),c=u.L8(),f=i.LN(),d=v.L8();if(b.Vh(d,s),c.T0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.q8();++t){e.V8(o);const p=d[t];i.RL().Mft(p),f&&p.hmt(),c.z8(t),yield*h.qgt(r,l),e.U8(o)}else{t.Sft(!1);const m=t.bft();b.Nh(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.q8();++t){const g=d[t];m[0]=g,f&&g.hmt(),c.z8(t),yield*h.qgt(r,l)}}n.X8(),u.X8(),b.Nh(d),v.X8()}return!1}W4t(i,t){const s=i.RL(),e=s.PL();if(0!==e.length){const n=this.ef.YF(),r=n.uD(),h=n.bdt(),o=r.k8(),a=o.eD(),l=a.O8(),u=o.a0t(),c=r.L8(a),f=n.N8(),d=f.L8(),p=i.LN(),m=v.L8();b.Nh(m),d.T0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.obt(1,t)]);if(m.sort(S),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.q8();++t){n.V8(l);const g=m[t][0];i.RL().Mft(g),p&&g.hmt(),d.z8(t),a.H8(o,c),n.U8(l)}else{s.Sft(!1);const y=s.bft();b.Nh(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.q8();++t){const w=m[t][0];y[0]=w,p&&w.hmt(),d.z8(t),a.H8(o,c)}}r.X8(),f.X8(),b.Nh(m),v.X8()}return!1}*j4t(i,t){const s=i.RL(),e=s.PL();if(0!==e.length){const n=this.ef.YF(),r=n.uD(),h=n.bdt(),o=r.k8(),a=o.eD(),l=a.O8(),u=o.a0t(),c=r.L8(a),f=n.N8(),d=f.L8(),p=i.LN(),m=v.L8();b.Nh(m),d.T0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.obt(1,t)]);if(m.sort(S),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.q8();++t){n.V8(l);const g=m[t][0];i.RL().Mft(g),p&&g.hmt(),d.z8(t),yield*a.qgt(o,c),n.U8(l)}else{s.Sft(!1);const y=s.bft();b.Nh(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.q8();++t){const w=m[t][0];y[0]=w,p&&w.hmt(),d.z8(t),yield*a.qgt(o,c)}}r.X8(),f.X8(),b.Nh(m),v.X8()}return!1}V4t(t,s){let i=this.T4t.get(t);if(!i){if(!s)return null;i={H4t:null,U4t:new Map},this.T4t.set(t,i)}return i}z4t(t,s,i,e,n){s.sD().lyt(i,s.hD()),e&&t.U8(n)}*J4t(t,s,i,e,n){yield*s.sD().uyt(i,s.hD()),e&&t.U8(n)}}}{const Da=self.Os;Da.rX.nX.Q_t=class extends Da.nr{constructor(t){super(),this.Qct=t,this.ef=t.NO(),this.xxt=t.bL()}oxt(){}lr(){this.Qct=null,this.ef=null,this.xxt=null}}}{const Oa=self.Os;Oa.rX.nX.Instance=class extends Oa.nr{constructor(t,s){super(),this.Mi=t,this.Qct=this.Mi.TN(),this.Ext=this.Qct.Nbt(),this.ef=this.Mi.NO()}lr(){this.Mi=null,this.Qct=null,this.Ext=null,this.ef=null}}}{const C=self.Os,ka=[];C.rX.nX.eX={q4t(){return!0},iX(){return!0},mX(){return!0},U5t(){return!0},z5t(){return!0},yD(){return this.ef.yD()},Umt(){const t=this.ef.Sdt();return!t.e0t()&&!t.s0t()},$4t(){let t=this.ef.bdt(),s=t.$St(),i=s.get("TriggerOnce_lastTick");void 0===i&&(i=-1,s.set("TriggerOnce_lastTick",-1));const e=this.ef.Gtt();return s.set("TriggerOnce_lastTick",e),this.ef.GNt()||i!==e-1},X4t(t){const s=this.ef.bdt(),i=s.$St(),e=i.get("Every_lastTime")||0,n=this.ef.xD(),r=(i.has("Every_seconds")||i.set("Every_seconds",t),i.get("Every_seconds"));return e+r<=n?(i.set("Every_lastTime",e+r),n>=i.get("Every_lastTime")+.04&&i.set("Every_lastTime",n),i.set("Every_seconds",t),!0):(n<e-.1&&i.set("Every_lastTime",n),!1)},hpt(t){const s=this.ef.YF().jdt(t);return s&&s.hpt()},_Ot(){return this.ef._Ot()},yi(){return C.hi.yi},_5t(){return!0},K4t(){return!0},Y4t(){return!0},kNt(){return!0},jNt(){return!0},NNt(){return!0},BNt(){return!0},Z4t(t){return!!this.ef.dO(t)},Q4t(t){switch(t){case 0:return"browser"===C.hi.mi;case 1:return"iOS"===C.hi.oi;case 2:return"Android"===C.hi.oi;case 8:return"cordova"===C.hi.mi;case 9:return"scirra-arcade"===this.ef.Gk();case 10:return"nwjs"===C.hi.mi;case 13:return"windows-uwp"===this.ef.Gk();default:return!1}},tBt(t,s,i){const e=this._4t(s,i);return e.test(t)},sBt(t,s,i){return C.compare(t,s,i)},iBt(t,s,i){return s<=t&&t<=i},eBt(t,s,i){return C.compare(t.yet(),s,i)},nBt(t){return!!t.yet()},rBt(t,s){const i=this.ef.xD();if(0!==t)return C.compare(i,t,s);{const e=this.ef.bdt(),n=e.$St();return!n.get("CompareTime_executed")&&s<=i&&(n.set("CompareTime_executed",!0),!0)}},hBt(t){return isNaN(t)},nMt(t,s,i){return C._r(C.yr(t),C.yr(i))<=C.yr(s)},rMt(t,s){return C.Cr(C.yr(t),C.yr(s))},mvt(t,s,i){let e=C.yr(t),n=C.yr(s),r=C.yr(i),h=!C.Cr(r,n);return h?!(!C.Cr(e,n)&&C.Cr(e,r)):C.Cr(e,n)&&!C.Cr(e,r)},oBt(t,s){return"number"==typeof t?0===s:1===s},aBt(t){return!!t},N1t(t){return t.toLowerCase()===this.ef.YF().V1t()},lBt(t,i,e,n){if(!t)return!1;let s=this.R4t(),r=s.L8(),h=t.RL(),o=(C.Vh(r,h.PL()),h.fft()&&C.Nh(h.vft()),this.ef.bdt()),a=0;for(let t=0,s=r.length;t<s;++t){const u=r[t];r[a]=u,i=o.obt(1,t),n=o.obt(3,t),C.compare(i,e,n)?++a:h.wft(u)}C.Lh(r,a),h.xft(r);const l=!!r.length;return C.Nh(r),s.X8(),t.iyt(),l},uBt(t,s){if(!t)return!1;let i=this.R4t(),e=i.L8(),n=t.RL(),r=(C.Vh(e,n.PL()),n.fft()&&C.Nh(n.vft()),this.ef.bdt()),h=0;for(let t=0,s=e.length;t<s;++t){const a=e[t];e[h]=a,r.obt(1,t)?++h:n.wft(a)}C.Lh(e,h),n.xft(e);const o=!!e.length;return C.Nh(e),i.X8(),t.iyt(),o},cBt(t,i,e){if(!t)return!1;const s=t.RL(),n=s.PL();if(0===n.length)return!1;let r=this.ef.bdt(),h=null,o=0;for(let t=0,s=n.length;t<s;++t){const a=n[t];e=r.obt(2,t),(null===h||0===i&&e<o||1===i&&e>o)&&(o=e,h=a)}return s.Cft(h),t.iyt(),!0},fBt(t,s){if(!t)return!1;const i=t.RL(),e=i.PL();if((s=Math.floor(s))>=e.length)return!1;const n=e[s];return i.Cft(n),t.iyt(),!0},dBt(t){if(!t)return!1;const s=t.RL(),i=s.PL(),e=Math.floor(this.ef.XD()*i.length);if(e>=i.length)return!1;const n=i[e];return s.Cft(n),t.iyt(),!0},pBt(t){if(!t)return!1;if(!t.FL())return!1;const s=t.RL();return s.Sft(!0),t.iyt(),!0},mBt(t,i,e){if(!t)return!1;const n=t.RL(),s=n.PL(),r=this.ef.eD(),h=r.Eft(),o=this.ef.bdt().HSt();n.fft()?(C.Vh(ka,s),n.cft(),n.Sft(!1)):h?(C.Vh(ka,n.vft()),C.Nh(n.vft())):(C.Vh(ka,n.bft()),C.Nh(n.bft()));for(let t=0,s=ka.length;t<s;++t){const a=ka[t];C.xor(a.wO().wB(i,e),o)?n.yft(a):n.wft(a)}return t.iyt(),C.xor(!!n.bft().length,o)},gBt(s){if(!s)return!1;let i=s.Vz(),e=null,n=this.ef.HIt();for(let t=n.length-1;0<=t;--t){const r=n[t];if(i){if(r.TN().Ubt(s)){e=r;break}}else if(r.TN()===s){e=r;break}}if(!e){const h=s.PL();h.length&&(e=h.at(-1))}if(!e)return!1;const t=s.RL();return t.Cft(e),s.iyt(),!0},yBt(t){return this.ef.jvt()?this.F4t(t):this.A4t(t)},wBt(){return this.ef.jvt()?this.O4t():this.D4t()},SBt(t,s,i){return this.ef.jvt()?this.L4t(t,s,i):this.k4t(t,s,i)},od(t){return this.ef.jvt()?this.B4t(t):this.N4t(t)},bBt(t,s,i){return this.ef.jvt()?this.j4t(t,i):this.W4t(t,i)},vBt(t){return!!t&&t.O5()},MBt(t){return!!t&&t.V5()},xBt(t){return!!t&&t.B5()},GBt(t){return!!t&&!t.FL()},TBt(t,s,i){return!!t&&C.compare(100*t.vP(),s,i)},_Bt(t){const s=this.ef.KD();return!!s&&s.f$(t)},E4t(){return!0},IBt(){return 0<this.x4t},CBt(t,s){const i=this.ef.KCt();return!!i&&!!s&&!!i.Mlt(t,s)}}}{let m=function(t,s){const i=t[0],e=s[0],n=i-e;if(0!=n)return n;const r=t[1],h=s[1];return r-h},g=function(t,s){return t[1]-s[1]};m,g;const La=self.Os,Na=[],Ba=[],Wa=La.hr(La.Rect),ja=La.hr(La.Vo),Va=[];La.rX.nX.Jnt={EBt(t,s){t.tnt(s)},PBt(t,s){t.le()&&"number"!=typeof s&&(s=parseFloat(s)),t.tnt(t.yet()+s)},RBt(t,s){t.le()&&t.tnt(t.yet()-s)},ABt(t,s){t.tnt(!!s)},FBt(t){t.tnt(!t.yet())},DBt(t){t.tnt(t.wdt())},OBt(t){this.ef.YF().Bdt(t)},kBt(t,s,i,e,n,r){if(t&&s){const h=this.ef.OL(t,s,i,e,n,r);if(h){n&&s.kL(h);const o=this.ef.YF(),a=(o.LL(!0),h.NL(),o.LL(!1),new Map);h.jCt(a,t,n);for(const[l,u]of a)l.RL().Gft(u)}}},LBt(t,s,i,e,n,r){if(t&&s){const h=this.ef.R5t(t);h&&La.rX.nX.Jnt.kBt.call(this,h,s,i,e,n,r)}},Wz(n,r,h,o,a,t,l,u,c,f,d){if(n){let s=this.ef.gO(),i=s;if(t){const p=this.ef.QD().XX(t);if(!p)return;i=p}let e=null;if(!("number"!=typeof l||0<=l)||(e=i.SO(l))){let t=null;if(!("number"!=typeof u||0<=u)||(t=s.SO(u))){Wa.set(r,h,o,a);const m=i.Wz(n,Wa,e,t,c,f,d);n.RL().xft(m),n.iyt()}}}},NBt(){const t=this.M0t;t.w0t()&&t.g0t().vW()},opt(t,s){const i=this.ef.YF().jdt(t);i&&(0===s?i.opt(!1):1===s?i.opt(!0):i.opt(!i.hpt()))},BBt(t){this.ef.CD(t)},WBt(t,s){if(s<0&&(s=0),t){const i=t.RL(),e=i.PL();for(const n of e)n.CD(s)}},jBt(t){if(t){const s=t.RL(),i=s.PL();for(const e of i)e.JN()}},Ah(t,s){if(!(t<0)){const i=this.ef.YF().v1t();return s?i.CMt(t):i.EMt(t),!0}},mD(t){return this.ef.YF().v1t().PMt(t),!0},VBt(){const t=this.ef.YF();return t.v1t().RMt(t.L1t()),!0},dD(t){this.ef.YF().dD(t)},async rOt(t,s,i,e,n,r){const h=this.ef.Ck();h&&(this.TO(),await h.rOt(0===t?"image/png":"image/jpeg",s/100,i,e,n,r),await this.ef.m4(La.rX.nX.eX.K4t,null))},HBt(t,s){if(!(t<=0||s<=0)){this.ef.PDt(t,s),this.ef.gO().hq();const i=this.ef.Ck();i&&("off"!==i.xDt()&&this.ef.F5t(t,s),i.JI(i.Fj(),i.Dj(),!0),this.ef.TO())}},UBt(t){const s=this.ef.Ck();s&&"off"!==s.xDt()&&(s.LDt(0!==t?"high":"low"),s.JI(s.Fj(),s.Dj(),!0))},Fit(t){this.ef.CNt(t)},zBt(){this.ef.ENt()},JBt(t){this.ef.PNt(t)},qBt(t){this.ef.k2t(t)},$Bt(t){},XBt(){for(const t of this.ef.QD().iO())t.GX()},KBt(t){this.ef.TNt(0!==t)},YBt(t,s){this.ef.UD(1/t),this.ef.jD(1/s)},ZBt(t,s){this.ef.jD(t),this.ef.UD(s)},QBt(t){this.ef.ND(["vsync","unlimited-tick","unlimited-frame"][t])},t6t(t,i){if(t){const s=t.RL(),e=s.PL(),n=Na,r=Ba,h=this.ef.gO(),o=t.Vz(),a=t.Gwt();for(let t=0,s=e.length;t<s;++t){const l=e[t],u=l.wO();if(u){let t;t=o?l.Drt(i+l.TN().xwt(a)):l.Drt(i),n.push([u.SO().wF(),u.bO()]),r.push([l,t])}}if(n.length){n.sort(m),r.sort(g);let i=!1;for(let t=0,s=n.length;t<s;++t){const c=r[t][0],f=h.vO(n[t][0]),d=n[t][1],p=f.MO();p[d]!==c&&((p[d]=c).wO().xO(f,!0),f.GO(c),i=!0)}i&&this.ef.TO(),La.Nh(Na),La.Nh(Ba)}}},fk(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.ef.TF().fk(t,s)},s6t(t){if(!this.ef.Lg()){const s=this.ef.QD();s.nO()||s.rO(t)}},i6t(t){if(!this.ef.Lg()){const s=this.ef.QD();if(!s.nO()){const i=s.XX(t);i&&s.rO(i)}}},e6t(t){if(!this.ef.Lg()){const s=this.ef.QD();if(!s.nO()){const i=s.iO(),e=i.indexOf(s.KD());if((!t||0!==e)&&(t||e!==i.length-1)){const n=i[e+(t?-1:1)];s.rO(n)}}}},n6t(){if(!this.ef.Lg()){const t=this.ef.QD();t.nO()||(t.rO(t.KD()),this.ef.YF().zdt())}},r6t(t,s){t&&t.F5(s)},h6t(t,s){t&&t.L5(s)},o6t(t,s){t&&t.W5(s)},a6t(t,s){t&&t.xP(s/100)},l6t(t,s){t&&t.H5(s)},u6t(t,s){t&&t.z5(s)},c6t(t,s){t&&t.KL(La.yr(+s))},f6t(t,s,i){t&&(t.aN(!0),t.ZL(s),t.t5(i))},d6t(t){t&&t.aN(!1)},p6t(t,s,i){t&&t.M9(s/100,i/100)},m6t(t,s){t&&t.mv(+s)},g6t(t,s){if(t){ja.Sa(s),ja.mr();const i=t.oN();i.ca(ja)||(i.ia(ja),this.TO())}},y6t(t,s){t&&t.sN(s)},w6t(t,s){t&&t.Xb(s)},S6t(t,s,i){if(t){const e=t.HL(),n=e._nt(i);if(n){const r=1===s;n.Ypt()!==r&&(n.dAt(r),t.A6(),this.ef.TO())}}},b6t(t,s,i,e){if(t){const n=t.HL(),r=n._nt(s);if(r){i=Math.floor(i);const h=r.sG().eG(i);if(h){"color"===h?(ja.Sa(e),e=ja):"percent"===h&&(e/=100);const o=n.D6(r.wF(),i,e);o&&r.Ypt()&&this.ef.TO()}}}},v6t(t,s){t&&t.nN(s)},M6t(t){this.ef.gO().$L(+t)},x6t(t){this.ef.gO().KL(La.yr(+t))},G6t(t,s){const i=this.ef.gO(),e=i.HL(),n=e._nt(s);if(n){const r=1===t;n.Ypt()!==r&&(n.dAt(r),i.A6(),this.ef.TO())}},T6t(t,s,i){const e=this.ef.gO(),n=e.HL(),r=n._nt(t);if(r){s=Math.floor(s);const h=r.sG().eG(s);if(h){"color"===h?(ja.Sa(i),i=ja):"percent"===h&&(i/=100);const o=n.D6(r.wF(),s,i);o&&r.Ypt()&&this.ef.TO()}}},_6t(t,s){const i=this.ef.gO();i.S5(t/100,s/100)},I6t(t){const s=this.ef.gO();0===t?s.M5():s.x5()},C6t(t){const s=this.ef.gO();s.ZL(t)},E6t(t){const s=this.ef.gO();s.t5(t)},P6t(t,s){const i=this.ef.gO();i.ZL(t),i.t5(s)},R6t(t){if(t){const s=t.Rvt();if(s){const i=s.wO();if(i){const e=this.ef.gO();e.ZL(i.av()),e.t5(i.cv())}}}},c5(t,s,i){const e=this.ef.gO();try{e.c5(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},d5(t,s,i){if(t){const e=this.ef.gO();try{e.d5(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},m5(t){if(t){const s=this.ef.gO();s.m5(t)}},y5(){this.ef.gO().y5()},async A6t(t){const s=this.ef.KD();if(s&&t&&!this.ef.Lg()){const i=t.Vz()?t.$mt():[t];await this.C4t(s,i)}},async F6t(t){await La.rX.nX.Jnt.A6t.call(this,this.ef.R5t(t))},D6t(t){const s=this.ef.KD();if(s&&t){const i=t.Vz()?t.$mt():[t];this.P4t(s,i)}},O6t(t){La.rX.nX.Jnt.D6t.call(this,this.ef.R5t(t))},k6t(){const t=this.ef.KD();if(t){const s=t.G$();this.P4t(t,s)}},async L6t(t){const s=this.ef.KD();t&&s&&!this.ef.Lg()&&await this.C4t(s,t.v$())},async N6t(t){const s=this.ef.KD(),i=this.ef.QD().XX(t);i&&s&&!this.ef.Lg()&&await this.C4t(s,i.v$())},fD(t){const s=this.aft.lD();if(s)switch(s.cD()){case 1:"number"==typeof t&&s.fD(t);break;case 2:"string"==typeof t&&s.fD(t);break;case 3:s.fD(t)}},B6t(t,s,i){const e=this.V4t(t.toLowerCase(),!0),n=e.U4t,r=s.toLowerCase(),h=(n.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`),La.first(n.values())||e.H4t);if(h){const o=0!==h.oD(),a=0!==i.oD();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`)}n.set(r,i)},W6t(t,s){const i=this.V4t(t.toLowerCase(),!0),e=(i.H4t&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),La.first(i.U4t.values())||i.H4t);if(e){const n=0!==e.oD(),r=0!==s.oD();if(n!=r)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}i.H4t=s},j6t(t,s,i){const e=this.ef,n=e.jvt()?Va:null,r=(i=Math.floor(i),this.V4t(t.toLowerCase(),!1));if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),n;let h=r.U4t.get(s.toLowerCase());if(!h){if(!r.H4t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),n;h=r.H4t,i=0}if(!h.$u())return n;if(0!==h.oD())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),n;const o=e.YF(),a=o.eD(),l=a.iD(),u=0<l.length,c=(u&&(h.hD()?o.V8(l):o.S1t(l)),[]),f=o.dpt(a);if(f){const p=f.mpt();for(let t=i,s=p.length;t<s;++t)c.push(p[t].yet())}const d=h.mpt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].wdt());return e.jvt()?this.J4t(o,h,c,u,l):this.z4t(o,h,c,u,l)}}}{const E=self.Os;E.rX.nX.qnt={V6t:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},O(t){return t.toString()},Ut(t){return"string"==typeof t?t.length:0},random(t,s){return void 0===s?this.ef.XD()*t:this.ef.XD()*(s-t)+t},awt(...t){const s=Math.floor(this.ef.XD()*t.length);return t[s]},H6t(t,...s){return"number"!=typeof t&&(t=0),s[t=E.mr(Math.floor(t),0,s.length-1)]},pi(){return Math.PI},U6t(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},z6t(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(E.yr(t))},cos(t){return Math.cos(E.yr(t))},tan(t){return Math.tan(E.yr(t))},asin(t){return E.Sr(Math.asin(t))},acos(t){return E.Sr(Math.acos(t))},atan(t){return E.Sr(Math.atan(t))},exp(t){return Math.exp(t)},Kt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e<t&&(e=t)}return e},min(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e>t&&(e=t)}return e},mr(t,s,i){return E.mr(t,s,i)},Ct(t,s,i,e){return E.Mr(t,s,i,e)},angle(t,s,i,e){return E.Sr(E.Tr(t,s,i,e))},Dt(t,s,i){return E.Dt(t,s,i)},Fr(t,s,i){return E.Fr(t,s,i)},Or(t,s,i,e){return E.Or(t,s,i,e)},kr(t,s,i,e,n){return E.kr(t,s,i,e,n)},Lr(t,s,i){return E.Lr(t,s,i)},J6t(t,s){return E.Sr(E._r(E.yr(t),E.yr(s)))},q6t(t,s,i){return E.Sr(E.Er(E.yr(t),E.yr(s),i))},$6t(t,s,i){return E.Sr(E.Ir(E.yr(t),E.yr(s),E.yr(i)))},X6t(t,s,i){return(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s},K6t(t,s){return(t|=0)^1<<(0|s)},Y6t(t,s){return(t|=0)&1<<(0|s)?1:0},Z6t(){return"\n"},Q6t(t){return"string"==typeof t?t.toUpperCase():""},tWt(t){return"string"==typeof t?t.toLowerCase():""},left(t,s){return"string"==typeof t?t.substr(0,s):""},mid(t,s,i){return"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i)},right(t,s){return"string"==typeof t?t.substr(Math.max(t.length-s,0)):""},trim(t){return"string"==typeof t?t.trim():""},sWt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},iWt(t,s){return"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0},find(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(E.oe(s),"i")):-1},eWt(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(E.oe(s),"")):-1},replace(t,s,i){return"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(E.oe(s),"gi"),i):"string"==typeof t?t:""},nWt(t,...i){let e=t;for(let t=0,s=i.length;t<s;++t)e=e.replaceAll(`{${t}}`,i[t].toString());return e},rWt(t,s,i){const e=this._4t(s,i);return t?t.search(e):-1},hWt(t,s,i,e){const n=this._4t(s,i);return t?t.replace(n,e):""},oWt(t,s,i){const e=this.I4t(t.toString(),s,i);return e?e.length:0},aWt(t,s,i,e){e=Math.floor(e);const n=this.I4t(t.toString(),s,i);return!n||e<0||e>=n.length?"":n[e]},lWt(t,s){let i=t<0?"-":"",e=s-(t=t<0?-t:t).toString().length;return(i+="0".repeat(Math.max(e,0)))+t.toString()},uWt(t){return encodeURIComponent(t)},cWt(t){return decodeURIComponent(t)},wD(){return this.ef.CY()},fWt(){return this.ef.EY()},timescale(){return this.ef.ID()},dWt(){return(Date.now()-this.ef.dNt())/1e3},pWt(){return Date.now()},time(){return this.ef.xD()},tickcount(){return this.ef.Gtt()},mWt(){return this.ef.gNt()},fps(){return this.ef.ED()},gWt(){return this.ef.FD()},yWt(){return this.ef.OD()},wWt(){return this.ef.Ck().kk()},SWt(){return this.ef.Ck().Nk()},bWt(){return this.ef.LF()},vWt(){return this.ef.BF()},MWt(){return this.ef.LF()},xWt(){return this.ef.BF()},GWt(){return this.ef.gO().QL()},TWt(){return this.ef.gO().s5()},_Wt(){return this.ef.gO().$c()},IWt(){return this.ef.gO().XL()},CWt(){return E.Sr(this.ef.gO().YL())},EWt(){return this.ef.gO().nm()},PWt(){return this.ef.gO().gm()},RWt(){return 100*this.ef.gO().m9()},AWt(){return 100*this.ef.gO().g9()},FWt(t){const s=this.ef.gO().SO(t);return s?s.p9().bl():0},DWt(t){const s=this.ef.gO().SO(t);return s?s.p9().vl():0},OWt(t){const s=this.ef.gO().SO(t);return s?s.p9().Ml():0},kWt(t){const s=this.ef.gO().SO(t);return s?s.p9().xl():0},LWt(t){const s=this.ef.gO().SO(t);return s?s.p9().width():0},NWt(t){const s=this.ef.gO().SO(t);return s?s.p9().height():0},BWt(t){const s=this.ef.gO().SO(t);if(s){const i=s.p9();return(i.bl()+i.Ml())/2}return 0},WWt(t){const s=this.ef.gO().SO(t);if(s){const i=s.p9();return(i.vl()+i.xl())/2}return 0},jWt(t,s,i){const e=this.ef.gO().SO(t);return e?e.fN(s,i)[0]:0},VWt(t,s,i){const e=this.ef.gO().SO(t);return e?e.fN(s,i)[1]:0},HWt(t,s,i){const e=this.ef.gO().SO(t);return e?e.gN(s,i)[0]:0},UWt(t,s,i){const e=this.ef.gO().SO(t);return e?e.gN(s,i)[1]:0},zWt(t,s,i,e){const n=this.ef.gO(),r=n.SO(t),h=n.SO(s);if(!r||!h||r===h)return i;const[o,a]=r.gN(i,e);return h.fN(o,a)[0]},JWt(t,s,i,e){const n=this.ef.gO(),r=n.SO(t),h=n.SO(s);if(!r||!h||r===h)return e;const[o,a]=r.gN(i,e);return h.fN(o,a)[1]},qWt(t){const s=this.ef.gO().SO(t);return s?s.U5():0},$Wt(t){const s=this.ef.gO().SO(t);return s?E.Sr(s.q5()):0},XWt(t){const s=this.ef.gO().SO(t);return s?100*s.vP():0},KWt(t){const s=this.ef.gO().SO(t);return s?s.J5():0},YWt(t){const s=this.ef.gO().SO(t);return s?s.QL():0},ZWt(t){const s=this.ef.gO().SO(t);return s?s.s5():0},QWt(t){const s=this.ef.gO().SO(t);return s?100*s.K5():0},tjt(t){const s=this.ef.gO().SO(t);return s?100*s.Z5():0},sjt(t){const s=this.ef.gO().SO(t);return s?s.pv():0},ijt(t){const s=this.ef.gO().SO(t);return s?s.wF():-1},ejt(){const t=this.ef.Ck();return t?t.oOt():""},njt(t){const s=this.M0t;if(!s.w0t())return 0;if(t){const i=s.b0t(t);return i?i.wF():0}return s.g0t().wF()},rjt(){return this.ef.RNt()},hjt(t,s,...i){const e=this.V4t(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let n=e.U4t.get(s.toLowerCase());if(!n){if(!e.H4t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;n=e.H4t}const r=n.oD(),h=n.QF();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!n.$u())return h;const o=this.ef,a=o.YF(),l=a.eD(),u=l.iD(),c=0<u.length,f=(c&&(n.hD()?a.V8(u):a.S1t(u)),n.mpt());for(let t=i.length,s=f.length;t<s;++t)i.push(f[t].wdt());const d=n.sD(),p=d.rD(d.iD(),n.hD(),r,h,...i);return c&&a.U8(u),p},ojt(){return this.ef.MF().JD()},ajt(){return this.s7()},renderer(){return this.ef.UDt()?"webgpu":"webgl"},ljt(){return this.ef.UDt()?this.ef.UDt().GetAdapterInfoString():this.ef.HDt().PR()},ujt(){let t=this.ef.Eb().cb();return Math.round(100*t/1048576)/100},cjt(t,s,i){return E.Ur(t,s,i)},fjt(t,s,i){return E.Jr(t/100,s/100,i/100)},djt(t,s,i,e){return E.zr(t/100,s/100,i/100,e/100)},pjt(t,s,i){return E.Jr(t/255,s/255,i/255)},mjt(t,s,i,e){return E.zr(t/255,s/255,i/255,e/255)},gjt(){return this.ef.EF()},yjt(){return this.ef.RF()},wjt(){return this.ef.eD().u$().$c()},Sjt(){return this.ef.eD().fgt()}}}{const Ha=self.Os;Ha.rX.Ent=class extends Ha.LMt{constructor(t){super(t)}lr(){super.lr()}}}{const Ua=self.Os,za=self.zs,Ja=[],qa=(Ua.rX.Ent.Q_t=class extends Ua.Mxt{constructor(t){super(t),this.J_t=t.RIt()}lr(){Ua.Nh(this.J_t),super.lr()}oxt(){for(const t of this.J_t)t.qTt(this.ef)}_$(s){const i={l2:this.ef.WF()};return Promise.all(this.J_t.map(t=>t.$Tt(s,i)))}A$(){for(const t of this.J_t)t.XTt()}E$(){this.bjt()}bjt(){for(const t of this.Qct.EL())t.p6().vjt()}tbt(t){Ua.rX.Ent.mMt(this,t)}Bbt(t){Ja.push({_xt:null,Mjt:!1,instances:[]})}xjt(t,s,i){const e=Ja.at(-1);e._xt=t,e.Mjt=i,e.instances.push(s)}Wbt(t){const s=Ja.pop(),i=s._xt,e=s.Mjt;if(i){const n=new Map;for(const r of s.instances)r.jCt(n,i,e);for(const[h,o]of n)h.RL().Gft(o)}}Gjt(t){const s=this.TN().kIt(t),i=this.NO(),e=s.KTt(0);return e.Q6().IV(i.Eb(),{l2:i.WF()}).then(()=>this.bjt()),s}Tjt(t){for(const s of this.Qct.EL())s.p6()._jt(t);this.TN().LIt(t)}Ijt(t,s){const i=this.Qct.DIt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.t_t(s);e<0&&(e+=i.U6()+1);const n=Ua.UTt.JTt(this.NO()),r=(i.YTt(n,e),this.NO());n.Q6().IV(r.Eb(),{l2:r.WF()}).then(()=>this.bjt());for(const h of this.Qct.EL())h.p6().Cjt();return n}Ejt(t,s){const i=this.Qct.DIt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.U6())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.t_t(s);e<0&&(e+=i.U6()),i.ZTt(e);for(const n of this.Qct.EL())n.p6().Cjt()}axt(){return self.Pjt}},new WeakMap);self.Pjt=class extends self.wL{constructor(t){super(t),qa.set(this,t.Nbt())}Rjt(t){za.Me(t);const s=qa.get(this).TN().DIt(t);return s?s.s_t():null}Ajt(){return qa.get(this).TN().FIt().map(t=>t.s_t())}Fjt(t){return za.Me(t),qa.get(this).Gjt(t).s_t()}Djt(t){za.Me(t),qa.get(this).Tjt(t)}Ojt(t,s){if(za.Me(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return qa.get(this).Ijt(t,s).q6()}kjt(t,s){if(za.Me(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");qa.get(this).Ejt(t,s)}}}{const P=self.Os,$a=self.zs,Xa=P.hr(P.Rect),Ka=P.hr(P.Kl),Ya=P.hr(P.Xa),R=(P.rX.Ent.Instance=class extends P.sGt{constructor(t,s){super(t);let i=!0,e="",n=0,r=!0;s&&(i=!!s[0],e=s[1],n=s[2],r=s[3]),this.Ljt=this.Qct.DIt(e)||this.Qct.RIt()[0],this.Njt=P.mr(n,0,this.Ljt.U6()-1),this.Bjt=this.Ljt.KTt(this.Njt);const h=this.Bjt.Q6(),o=(this.Wjt=h.IM(),this.jjt=h.xC(),this.Vjt=h.dGt(),this.rGt(),t.BCt(2,!0),t.BCt(1,0<=this.Ljt.k6()),this.Hjt=Math.abs(this.Ljt.k6()),this.Ujt=this.Ljt.j6(),this.zjt=P.hr(P.S0),this.Jjt=0,this.qjt=0,this.$jt="",this.Xjt=-1,this.Kjt="",this.Yjt=0,this.wO());this.Zjt=o.sB(),o.F5(i),o.yB(r),o.nht(this.Bjt.iW()),o.hht(this.Bjt.nW()),o.RRt(this.Bjt.pW()),o.U4(),1===this.Qct.AIt()&&1===this.Qct.RIt()[0].U6()||0===this.Hjt||this.Jxt()}lr(){this.Ljt=null,this.Bjt=null,this.Wjt=null,this.zjt=null,super.lr()}lGt(){return this.Bjt.Q6()}dit(){return!0}P7(){this.Wjt=null}aGt(){this.vjt()}Yv(t){const s=this.Wjt;if(null!==s){t._P(s);const i=this.wO();i.h6()?this.Qjt(i,t):this.t8t(i,t)}}t8t(t,s){let i=this.Zjt;this.ef.VF()&&(i=t.GRt(i)),s.kP(i,this.Vjt)}Qjt(s,t){const i=s.VRt();if(s.URt()){s.vRt(Xa,Ka,!1);let t=Ka;this.ef.VF()&&(t=s.GRt(t)),i.Kv(s.o6(),t,this.Vjt),s.HRt(!1)}i.Yv(t)}s8t(){return this.zjt.Qs()}i8t(){return this.Mi.WCt(2)}e8t(t){this.Mi.BCt(2,t)}n8t(){return this.Mi.WCt(1)}r8t(t){this.Mi.BCt(1,t)}h8t(){return this.Mi.WCt(4)}o8t(t){this.Mi.BCt(4,t)}PY(){this.Kjt&&this.a8t(),0<=this.Xjt&&this.l8t();const t=this.Hjt;if(this.i8t()&&0!==t){const s=this.ef.SD(this.Mi),i=(this.zjt.oc(s),this.s8t()),e=this.Bjt,n=e.tW()/t;if(!(i<this.Jjt+n)){const r=this.Ljt,h=this.Ujt,o=r.U6(),a=r.B6(),l=r.N6(),u=r.H6(),c=(this.n8t()?this.Njt++:this.Njt--,this.Jjt+=n,this.Njt>=o&&(u?(this.r8t(!1),this.Njt=o-2):!l&&(this.qjt++,this.qjt>=a)?this.u8t(!1):this.Njt=h),this.Njt<0&&(u?(this.Njt=1,this.r8t(!0),l||(this.qjt++,this.qjt>=a&&this.u8t(!0))):!l&&(this.qjt++,this.qjt>=a)?this.u8t(!0):this.Njt=h),this.Njt=P.mr(this.Njt,0,o-1),r.KTt(this.Njt));i>this.Jjt+c.tW()/t&&(this.Jjt=i),this.c8t(e,c)}}else this.Pxt()}u8t(t){this.Njt=t?0:this.Ljt.U6()-1,this.e8t(!1),this.$jt=this.Ljt.$c(),this.o8t(!0),this.Txt("animationend",!1,{animationName:this.$jt}),this.f4(P.rX.Ent.eX.f8t),this.f4(P.rX.Ent.eX.d8t),this.o8t(!1),this.qjt=0}c8t(i,e,t){if(i!==e){const s=this.wO(),n=i.Q6(),r=e.Q6(),h=n.nm(),o=n.gm(),a=r.nm(),l=r.gm(),u=(t&&t.onFrameChange?t.onFrameChange(s,h,o,a,l):(h!==a&&s.fm(s.nm()*(a/h)),o!==l&&s.rm(s.gm()*(l/o))),s.nht(e.iW()),s.hht(e.nW()),s.RRt(e.pW()),s.U4(),this.Bjt=e,this.Wjt=r.IM(),this.jjt=r.xC(),this.Vjt=r.dGt(),this.HW().xnt());for(let t=0,s=u.length;t<s;++t)u[t].QGt(i,e);this.Txt("framechange",!1,{animationName:this.Ljt.$c(),p8t:this.Njt}),this.f4(P.rX.Ent.eX.m8t),this.ef.TO()}}g8t(t){this.e8t(!0),this.Jjt=this.s8t(),1===t&&0!==this.Njt&&(this.Xjt=0,this.h8t()||this.l8t()),this.Jxt()}y8t(t,s,i){this.Kjt=t,this.Yjt=s,this.Jxt(),!i&&this.h8t()||this.a8t()}w8t(){return this.Ljt}S8t(){return this.Kjt||this.Ljt.$c()}_jt(t){P.mn(t,this.S8t())&&this.y8t(this.Qct.NIt().$c(),1,!0)}b8t(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.Qct.DIt(this.S8t());if(!s)return;if(-1===(t=s.QTt(t)))return}isFinite(t)&&(this.Xjt=t,this.h8t()||this.l8t())}Cjt(){if(!this.Kjt&&-1===this.Xjt){const t=this.Bjt,s=this.Ljt.KTt(P.mr(this.Njt,0,this.Ljt.U6()-1));t!==s&&this.c8t(t,s),1<this.Ljt.U6()&&0<this.Hjt&&this.Jxt()}}v8t(){return this.Njt}M8t(){return this.Bjt.wW()}x8t(t){this.Hjt=Math.abs(t),this.r8t(0<=t),0<this.Hjt&&this.Jxt()}G8t(){return this.n8t()?this.Hjt:-this.Hjt}T8t(t){"string"==typeof t&&-1===(t=this.Ljt.QTt(t))||(t=P.mr(Math.floor(t),0,this.Ljt.U6()-1),this.Ujt=t)}_8t(){return this.Ujt}a8t(t){const s=this.Bjt,i=this.Qct.DIt(this.Kjt);if(this.Kjt="",i&&(i!==this.Ljt||!this.i8t())){this.Ljt=i,this.r8t(0<=i.k6()),this.Hjt=Math.abs(i.k6()),this.Ujt=i.j6(),this.Njt=P.mr(this.Njt,0,this.Ljt.U6()-1),1===this.Yjt&&(this.Njt=0),this.e8t(!0),this.Jjt=this.s8t();const e=this.Ljt.KTt(this.Njt);this.c8t(s,e,t)}}l8t(t){const s=this.Bjt,i=this.Njt;if(this.Njt=P.mr(Math.floor(this.Xjt),0,this.Ljt.U6()-1),this.Xjt=-1,t||i!==this.Njt){const e=this.Ljt.KTt(this.Njt);this.c8t(s,e),this.Jjt=this.s8t()}}vjt(){const t=this.Bjt.Q6();this.Wjt=t.IM(),this.jjt=t.xC(),this.Vjt=t.dGt(),this.wO().HRt(!0)}IM(){return this.Wjt}xC(){return this.jjt}dGt(){return this.Vjt}oW(){return this.Bjt.oW()}tvt(t){let s=this.Bjt,i=this.wO(),e=null;if("string"==typeof t)e=s.fW(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.cW(t-1)}let n=i.Y4();if(!e)return[i.av(),i.cv(),n];if(Ya._(e.f_t()),i.h6()){const[r,h,o]=i.o6().e2(Ya.tl(),Ya.il());Ya.set(r,h),n+=o}return Ya.offset(-s.iW(),-s.nW()),Ya.scale(i.nm(),i.gm()),Ya.rotate(i.YL()),Ya.offset(i.av(),i.cv()),[Ya.tl(),Ya.il(),n]}I8t(){return this.wO().kRt().ku()}C8t(t){t=Math.floor(t);const s=this.wO(),i=s.kRt(),e=i.ku();if((t=t===e?0:t)<0||e<=t)return[0,0];const n=i.Ou();return[n[2*t+0]+s.av(),n[2*t+1]+s.cv()]}Kxt(){const s=P.rX.Ent.Jnt,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.Ljt.$c(),E8t:t=>this.Zxt(s.P8t,t,0)},{name:t+".current-frame",value:this.Njt,E8t:t=>this.Zxt(s.R8t,t)},{name:t+".is-playing",value:this.i8t(),E8t:t=>t?this.Zxt(s.A8t,0):this.Zxt(s.F8t)},{name:t+".speed",value:this.Hjt,E8t:t=>this.Zxt(s.D8t,t)},{name:t+".repeats",value:this.qjt,E8t:t=>this.qjt=t}]}]}Mv(){const t={a:this.Ljt.Yz()},s=(0!==this.Jjt&&(t.fs=this.Jjt),this.s8t()),i=(0!==s&&(t.at=s),0!==this.Njt&&(t.f=this.Njt),0!==this.Hjt&&(t.cas=this.Hjt),1!==this.qjt&&(t.ar=this.qjt),0!==this.Ujt&&(t.rt=this.Ujt),this.i8t()||(t.ap=this.i8t()),this.n8t()||(t.af=this.n8t()),this.wO());return i.gB()&&(t.ce=i.gB()),t}xv(t){const s=this.TN().OIt(t.a),i=(s&&(this.Ljt=s),this.Jjt=t.hasOwnProperty("fs")?t.fs:0,this.zjt.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),e=(this.Njt=P.mr(i,0,this.Ljt.U6()-1),this.Hjt=t.hasOwnProperty("cas")?t.cas:0,this.qjt=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),n=(this.Ujt=P.mr(e,0,this.Ljt.U6()-1),this.e8t(!t.hasOwnProperty("ap")||!!t.ap),this.r8t(!t.hasOwnProperty("af")||!!t.af),this.Ljt.KTt(this.Njt)),r=(this.Bjt=n,this.vjt(),this.wO());r.nht(n.iW()),r.hht(n.nW()),r.RRt(n.pW()),r.yB(!!t.ce),this.i8t()&&this.Jxt()}Trt(t){const s=this.wO();switch(t){case 3:return s.gB();case 2:return P.mr(this.Njt,0,this.Ljt.U6()-1);case 1:return this.Ljt.$c()}}Rrt(t,s,i){const e=this.wO();switch(t){case 3:e.yB(!!s);break;case 2:{this.e8t(!1);const n=this.Ljt.U6()-1,r=s=P.mr(s,0,n),h=this.Ljt.KTt(this.Njt),o=this.Ljt.KTt(r);this.c8t(h,o,i),this.Njt=P.mr(r,0,n);break}case 1:{this.Kjt=s,this.a8t(i);const a=this.Ljt.U6();1<a&&0<this.Ljt.k6()?this.Jxt():this.Pxt();break}}}axt(){return self.O8t}},new WeakMap),Za=new Map([["current-frame",0],["beginning",1]]);self.O8t=class extends self.l6{constructor(){super(),R.set(this,self.xN.CN().p6())}hW(){return R.get(this).oW()}aW(t){return this.lW(t)[0]}uW(t){return this.lW(t)[1]}k8t(t){return this.lW(t)[2]}lW(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return R.get(this).tvt(t)}dW(){return R.get(this).I8t()}mW(t){return $a.ye(t),R.get(this).C8t(t)[0]}yW(t){return $a.ye(t),R.get(this).C8t(t)[1]}gW(t){return $a.ye(t),R.get(this).C8t(t)}L8t(){R.get(this).e8t(!1)}N8t(t="current-frame"){$a.Me(t);const s=Za.get(t);if(void 0===s)throw new Error("invalid mode");R.get(this).g8t(s)}B8t(t,s="beginning"){$a.Me(t),$a.Me(s);const i=Za.get(s);if(void 0===i)throw new Error("invalid mode");const e=R.get(this);if(!e.TN().DIt(t))throw new Error(`animation name "${t}" does not exist`);e.y8t(t,i)}Rjt(t){$a.Me(t);const s=R.get(this).TN().DIt(t);return s?s.s_t():null}get animation(){return R.get(this).w8t().s_t()}get animationName(){return R.get(this).S8t()}set p8t(t){$a.ye(t),R.get(this).b8t(t)}get p8t(){return R.get(this).v8t()}set W8t(t){$a.Me(t),R.get(this).b8t(t)}get W8t(){return R.get(this).M8t()}set j8t(t){$a.ye(t),R.get(this).x8t(t)}get j8t(){return R.get(this).G8t()}set V8t(t){$a.ye(t),R.get(this).T8t(t)}get V8t(){return R.get(this)._8t()}get imageWidth(){return R.get(this).lGt().nm()}get imageHeight(){return R.get(this).lGt().gm()}H8t(){const t=R.get(this).lGt();return[t.nm(),t.gm()]}async U8t(t){$a.Ze(t,Blob);const s=R.get(this),i=s.NO(),e=s.lGt(),n=P.hr(P.gTt);if(n.PTt(i,t),await n.IV(i.Eb(),{l2:i.WF()}),s.ur())n.lr();else{e.RTt(n);const r=s.Nbt();r.bjt(),r.TN().Nf().dispatchEvent(new P.Event("animationframeimagechange")),i.TO()}}z8t(t,s){$a.Me(s),R.get(this).wO().SRt(!!t,s)}}}{const Qa=self.Os;Qa.rX.Ent.eX={J8t(t){return Qa.mn(this.S8t(),t)},q8t(t,s){return Qa.compare(this.Njt,t,s)},$8t(t,s){if("string"!=typeof s)return!1;const i=this.Bjt.wW();return Qa.compare(i.toLowerCase(),t,s.toLowerCase())},X8t(t,s){return Qa.compare(this.G8t(),t,s)},d8t(t){return Qa.mn(this.$jt,t)},f8t(){return!0},m8t(){return!0},K8t(){return this.wO().nm()<0},Y8t(){return this.wO().gm()<0},Z8t(){return!0},Q8t(){return!0},gB(){return this.wO().gB()}}}{const tl=self.Os;tl.rX.Ent.Jnt={tVt(t,s,i,e,n){if(t&&s){const[r,h]=this.tvt(i),o=this.ef.OL(t,s,r,h,e,n);if(o){if(e&&s.kL(o),t.bL().tL()){const l=o.wO();l.KL(this.wO().YL()),l.U4()}const a=this.ef.YF();a.LL(!0),o.NL(),a.LL(!1),t!==this.ef.Mdt().TN()&&this.Ext.xjt(t,o,e)}}},F8t(){this.e8t(!1)},A8t(t){this.g8t(t)},P8t(t,s){this.y8t(t,s)},R8t(t){this.b8t(t)},D8t(t){this.x8t(t)},sVt(t){this.T8t(t)},iVt(s,t){try{0===s?this.Nbt().Gjt(t):this.Nbt().Tjt(t)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation: `,t)}},eVt(s,t,i){try{0===s?this.Nbt().Ijt(t,i):this.Nbt().Ejt(t,i)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation frame: `,t)}},nVt(t){const s=this.wO(),i=s.nm(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.fm(e),s.U4())},rVt(t){const s=this.wO(),i=s.gm(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.rm(e),s.U4())},$L(t){const s=this.Bjt,i=s.Q6(),e=this.wO(),n=e.nm()<0?-1:1,r=e.gm()<0?-1:1,h=i.nm()*t*n,o=i.gm()*t*r;e.nm()===h&&e.gm()===o||(e.JI(h,o),e.U4())},async hVt(t,s,i){const e=this.Bjt,n=e.Q6(),r=this.wO(),h=this.ef,o=this.Ext;if(n.$H()===t)0===s&&(r.JI(n.nm(),n.gm()),r.U4()),this.f4(tl.rX.Ent.eX.Z8t);else{const a=tl.hr(tl.gTt);try{if(await a.ETt(h,t),!a.G7())throw new Error("image failed to load");if(this.ur())return void a.lr();await a.IV(h.Eb(),{l2:h.WF()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.ur()||this.f4(tl.rX.Ent.eX.Q8t))}this.ur()?a.lr():(n.RTt(a),o.bjt(),o.TN().Nf().dispatchEvent(new tl.Event("animationframeimagechange")),h.TO(),0===s&&(r.JI(n.nm(),n.gm()),r.U4()),await this.m4(tl.rX.Ent.eX.Z8t))}},oVt(t){this.wO().yB(t)},SRt(t,s){this.wO().SRt(0===t,s)},aVt(t){this.wO().Xb(t),this.ef.TO()}}}{const sl=self.Os;sl.rX.Ent.qnt={lVt(){return this.v8t()},uVt(){return this.M8t()},cVt(){return this.Ljt.U6()},fVt(){return this.Ljt.$c()},dVt(){return this.G8t()},pVt(){return this.Ljt.k6()},mVt(t){return this.tvt(t)[0]},gVt(t){return this.tvt(t)[1]},yVt(t){return this.tvt(t)[2]},wVt(){return this.oW()},SVt(){return this.lGt().nm()},bVt(){return this.lGt().gm()},vVt(t){return this.C8t(t)[0]},MVt(t){return this.C8t(t)[1]},xVt(){return this.I8t()}}}{const il=self.Os;il.rX.Text=class extends il.LMt{constructor(t){super(t)}lr(){super.lr()}}}{const el=self.Os;el.rX.Text.Q_t=class extends el.Mxt{constructor(t){super(t)}lr(){super.lr()}oxt(){}_$(t){}A$(){}}}{const nl=self.Os,rl=self.zs,hl=[0,0,0],ol=["left","center","right"],al=["top","center","bottom"],ll=["ltr","rtl"],ul=["word","cjk","character"],cl=new nl.Rect,fl=new nl.Kl,dl=new nl.Vo,pl=nl.hr(nl.Xa),ml=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]),A=(nl.rX.Text.Instance=class extends nl.sGt{constructor(t,s){if(super(t),this.nf="",this.GVt=!0,this.TVt="Arial",this._Vt=12,this.IVt=0,this.E_=!1,this.P_=!1,this.Jb=nl.hr(nl.Vo),this.k_=0,this.L_=0,this.W_="word",this.j_=0,this.CVt="auto",this.EVt=1,this.PVt=null,this.RVt="",this.AVt=!1,this.FVt=!1,this.DVt=null,this.OVt=-1,this.kVt=-1,this.LVt=0,this.NVt=nl.hr(nl.Kg.mb,this.ef.Eb(),{timeout:5}),this.NVt.mI=()=>this.ef.TO(),this.BVt=()=>this.WVt(),this.jVt=!1,s){this.nf=s[0],this.GVt=!!s[1],this.TVt=s[2],this._Vt=s[3],this.IVt=s[4],this.E_=!!s[5],this.P_=!!s[6],this.k_=s[8],this.L_=s[9],this.W_=ul[s[10]],this.j_=s[11],this.VVt(this.ef.I8(s[12]));const i=s[7];this.Jb.$o(i[0],i[1],i[2]),this.wO().F5(s[13]),this.FVt=!!s[15]}this.HVt(),this.UVt()}lr(){this.VVt(null),this.zVt(),this.DVt&&(this.DVt.lr(),this.DVt=null),this.NVt.lr(),this.NVt=null,super.lr()}HVt(){const t=this.NVt;t.lf(this.nf),t.SI(this.GVt),this.NVt.M_()&&this.PVt?this.NVt.tm(this.NO()._Nt(this.PVt)):this.NVt.tm(null),t.bI("nearest"!==this.ef.WF()),t.vI(this.TVt),t.TI(this.IVt),t.II(this.E_),t.EI(this.P_),t.Kb(this.Jb),t.LI(ol[this.k_]),t.BI(al[this.L_]),t.jI(this.W_),t.HI(ll[this.j_])}JVt(){let t=this.wO(),s=(this.NVt.MI(this._Vt),this.NVt.GI(t.WPt()),t.SO()),i;"auto"===this.CVt?i=s.cJ(t.Y4()):"fixed"===this.CVt&&(i=this.EVt),t.h6()&&i!==this.NVt.qI()&&t.HRt(!0),this.NVt.JI(t.nm(),t.gm(),i)}VVt(t){t&&(t.Vz()||t.bL().constructor!==nl.rX.Ent)||t!==this.PVt&&(this.PVt&&this.PVt.Nf().removeEventListener("animationframeimagechange",this.BVt),this.PVt=t,this.PVt&&this.PVt.Nf().addEventListener("animationframeimagechange",this.BVt),this.HVt(),this.AVt=!1,this.ef.TO())}WVt(){this.ef.INt(this.PVt),this.ef.TO(),this.jVt=!0}UVt(){if(this.FVt){let t=this.nf;this.GVt&&(t=nl.Cn.$p(t)),this.DVt?this.DVt.lf(t):this.DVt=nl.hr(nl.if,this.ef,t)}else this.DVt&&(this.DVt.lr(),this.DVt=null)}Yv(t){const s=this.wO(),i=(this.JVt(),this.jVt&&(this.jVt=!1,this.NVt.M_())&&this.PVt&&this.NVt.tm(this.NO()._Nt(this.PVt)),this.NVt.IM());if(i){const e=s.SO();if(0===s.YL()&&0===e.YL()&&0===s.Y4()&&!s.h6()&&e.E9()){const n=s.sB(),[r,h]=e.bN(n.eh(),n.nh()),[o,a]=e.bN(n.oh(),n.ah()),l=r-Math.round(r),u=h-Math.round(h),[c,f]=(cl.set(r,h,o,a),cl.offset(-l,-u),fl.yu(cl),t.WP(t.rR()));this.ef.Ck().OV(t,c,f),t._P(i),t.TS(fl,this.NVt.xC()),e.LV(t)}else t._P(i),s.h6()?this.Qjt(s,t):this.t8t(s,t)}}t8t(t,s){let i=t.sB();this.ef.VF()&&(i=this.qVt(i)),s.TS(i,this.NVt.xC())}Qjt(s,t){const i=s.VRt();if(s.URt()){s.vRt(cl,fl,!1);let t=fl;this.ef.VF()&&(t=this.qVt(t)),i.Kv(s.o6(),t,this.NVt.xC()),s.HRt(!1)}i.Yv(t)}qVt(t){const s=t.eh()-Math.round(t.eh()),i=t.nh()-Math.round(t.nh());return 0==s&&0==i?t:(fl._(t),fl.offset(-s,-i),fl)}uGt(){const t=this.NVt.IM();return t?[t.nm(),t.gm()]:[100,100]}cGt(){return this.NVt.xC()}pGt(){return!1}Mv(){const t={t:this.nf,c:this.Jb.toJSON(),fn:this.TVt,ps:this._Vt};return this.GVt&&(t.bbc=this.GVt),0!==this.k_&&(t.ha=this.k_),0!==this.L_&&(t.va=this.L_),"word"!==this.W_&&(t.wr=this.W_),0!==this.IVt&&(t.lho=this.IVt),this.E_&&(t.b=this.E_),this.P_&&(t.i=this.P_),-1!==this.kVt&&(t.tw={st:this.OVt,en:this.kVt,l:this.LVt}),this.PVt&&(t.ioc=this.PVt.Yz()),"fixed"===this.CVt&&(t.fs=this.EVt),t}xv(t){if(this.zVt(),this.nf=t.t,this.Jb.Ba(t.c),this.TVt=t.fn,this._Vt=t.ps,this.GVt=!!t.hasOwnProperty("bbc")&&t.bbc,this.k_=t.hasOwnProperty("ha")?t.ha:0,this.L_=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.W_="boolean"==typeof s?s?"word":"character":s}else this.W_="word";if(this.IVt=t.hasOwnProperty("lho")?t.lho:0,this.E_=!!t.hasOwnProperty("b")&&t.b,this.P_=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const i=t.tw;this.OVt=i.st,this.kVt=i.en,this.LVt=i.l}if(t.hasOwnProperty("ioc")){const e=this.NO().I8(t.ioc);e&&this.VVt(e)}else this.VVt(null);t.hasOwnProperty("fs")?(this.CVt="fixed",this.EVt=t.fs):this.CVt="auto",this.HVt(),this.UVt(),this.AVt=!1,-1!==this.kVt&&this.Jxt()}Trt(t){switch(t){case 0:return this.zI();case 1:return this.GVt;case 2:return this.$Vt();case 3:return this.XVt();case 4:return this.KVt();case 5:return this.YVt();case 6:return this.ZVt();case 7:return hl[0]=this.Jb.ea(),hl[1]=this.Jb.na(),hl[2]=this.Jb.ra(),hl;case 8:return this.QVt();case 9:return this.tHt();case 10:return this.sHt();case 15:return this.iHt()}}Rrt(t,s){switch(t){case 0:this.eHt(s);break;case 1:this.GVt!==!!s&&(this.GVt=!!s,this.HVt());break;case 2:this.nHt(s);break;case 3:this.rHt(s);break;case 4:this.hHt(s);break;case 5:this.oHt(s);break;case 6:this.aHt(s);break;case 7:const i=this.Jb,e=s;i.ea()===e[0]&&i.na()===e[1]&&i.ra()===e[2]||(this.Jb.$o(e[0],e[1],e[2]),this.HVt());break;case 8:this.lHt(s);break;case 9:this.uHt(s);break;case 10:this.cHt(s)}}Yxt(t,s,i,e){0===s&&0===i&&0===e||7===t&&(this.Jb.Xo(s,i,e),this.HVt())}eHt(t){this.nf!==t&&(this.nf=t,this.NVt.lf(t),this.UVt(),this.AVt=!1,this.ef.TO())}zI(){return this.nf}fHt(t,s){this.JVt(),this.eHt(t),this.OVt=this.ef.TD(),this.kVt=this.OVt+s/this.HW().UN(),this.LVt=this.NVt.YI(),this.NVt.AI(0),this.Jxt()}zVt(){this.OVt=-1,this.kVt=-1,this.LVt=0,this.NVt.AI(-1),this.Pxt()}dHt(){-1!==this.kVt&&(this.zVt(),this.f4(nl.rX.Text.eX.pHt),this.ef.TO())}nHt(t){this.TVt!==t&&(this.TVt=t,this.NVt.vI(t),this.ef.TO())}$Vt(){return this.TVt}oHt(t){this.E_!==(t=!!t)&&(this.E_=t,this.NVt.II(t),this.ef.TO())}YVt(){return this.E_}aHt(t){this.P_!==(t=!!t)&&(this.P_=t,this.NVt.EI(t),this.ef.TO())}ZVt(){return this.P_}rHt(t){this._Vt!==t&&(this._Vt=t,this.ef.TO())}XVt(){return this._Vt}mHt(t){this.Jb.ca(t)||(this.Jb.ia(t),this.NVt.Kb(this.Jb),this.ef.TO())}gHt(){return this.Jb}hHt(t){this.IVt!==t&&(this.IVt=t,this.HVt(),this.ef.TO())}KVt(){return this.IVt}lHt(t){this.k_!==t&&(this.k_=t,this.HVt(),this.ef.TO())}QVt(){return this.k_}uHt(t){this.L_!==t&&(this.L_=t,this.HVt(),this.ef.TO())}tHt(){return this.L_}yHt(t){this.cHt(ul[t])}cHt(t){this.W_!==t&&(this.W_=t,this.HVt(),this.ef.TO())}sHt(){return this.W_}wHt(t){this.j_!==t&&(this.j_=t,this.HVt(),this.ef.TO())}SHt(){return this.j_}bHt(t){this.FVt=!!t,this.UVt()}iHt(){return this.FVt}vHt(t){this.CVt!==t&&(this.CVt=t,this.ef.TO())}MHt(){return this.CVt}xHt(t){this.EVt!==t&&(this.EVt=t,"fixed"===this.CVt)&&this.ef.TO()}GHt(){return this.EVt}THt(){return this.JVt(),this.NVt.$I()}_Ht(){return this.JVt(),this.NVt.KI()}IHt(t,s){this.JVt();const i=this.wO(),e=(pl.set(t-i.av(),s-i.cv()),pl.rotate(-i.YL()),pl.offset(i.nm()*i.iW(),i.gm()*i.nW()),pl._t(i.nm(),i.gm()),pl.scale(this.NVt.nm(),this.NVt.gm()),this.NVt.QI(pl.tl(),pl.il()));if(e){const n=e.ng("tag");if(n)return n.Vp}return""}CHt(t,s,i){const e=this.IHt(s,i);return e&&nl.mn(t,e)}EHt(t,s){this.JVt(),s=Math.floor(s);const i=this.NVt.sC(t,s);if(!i)return null;const e=this.wO(),n=this.NVt.OI(),r=i.Qm(),h=i.sg()-(i.gm()-i.wm())*n,o=i.nm()*n/this.NVt.nm()*e.nm(),a=i.gm()*n/this.NVt.gm()*e.gm();return pl.set(r,h),pl._t(this.NVt.nm(),this.NVt.gm()),pl.scale(e.nm(),e.gm()),pl.offset(-e.nm()*e.iW(),-e.gm()*e.nW()),pl.rotate(e.YL()),pl.offset(e.av(),e.cv()),{x:pl.tl(),y:pl.il(),width:o,height:a}}PHt(t){return this.JVt(),this.NVt.iC(t)}RHt(t){let s=ml.get(t);return null===s?"":`</${s||"span"||"span"}>`}AHt(t,s){let i=ml.get(t);if(null===i)return"";switch(i=i||"span",t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async FHt(){if(!this.AVt){let t=new nl.Cn(this.nf,{Ep:!0}).Wp(),s=new Map,n='<span class="c3-text"',i=[],r=(i.push(`font-family: '${this.$Vt()}';`),this.YVt()&&i.push("font-weight: bold;"),this.ZVt()&&i.push("font-style: italic;"),"character"===this.sHt()&&i.push("word-break: break-all;"),n+=` style="${i.join(" ")}">`,this.PVt?this.NO()._Nt(this.PVt):null);if(this.PVt){const o=nl.hr(nl.ad),a=[],l=new Map;for(const c of t)if(c.dm()){const f=c.ug(r);if(f){const d=f.Jg(),p=d.Q6().kTt();l.has(p)||(l.set(p,null),a.push(o.oc(async()=>{const t=await p.D7();l.set(p,t)})))}}await Promise.all(a);const u=[];for(const m of t)if(m.dm()){const g=m.ug(r);if(g){const y=g.Jg(),w=y.Q6().kTt();u.push(o.oc(async()=>{const t=await y.Q6().NTt(l.get(w));s.set(g,t)}))}}await Promise.all(u);for(const S of l.values())S instanceof ImageBitmap&&S.close&&S.close()}const h=new Map;for(const b of t){let e=b.hg(),t=[...h.keys()];t.reverse();for(const v of t)e.has(v)&&e.get(v)===h.get(v)||(h.delete(v),n+=this.RHt(v));for(const[M,x]of e)h.has(M)||(h.set(M,x),n+=this.AHt(M,x));if(b.um()&&(n+=nl.q1(nl.z1(b.Rm().join("")),"\n","<br>")),b.dm()&&r){const G=b.ug(r);if(G){const T=s.get(G);if(T){let t=[],s="0.2em",i=e.get("iconoffsety");if(i){let t=i.trim();s=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}t.push("top: "+s),"nearest"===this.ef.WF()&&t.push("image-rendering: pixelated"),n+=`<img class="c3-text-icon" data-icon="${b.lg()}" width="${G.nm()}" height="${G.gm()}" style="${t.join(";")}" src="${T}">`}}}}const e=[...h.keys()];e.reverse();for(const _ of e)n+=this.RHt(_);n+="</span>",this.RVt=n,this.AVt=!0}return this.RVt}PY(){const s=this.ef.TD();if(s>=this.kVt)this.zVt(),this.f4(nl.rX.Text.eX.pHt),this.ef.TO();else{let t=nl.Dr(this.OVt,this.kVt,s,0,this.LVt);(t=Math.floor(t))!==this.NVt.FI()&&(this.NVt.AI(t),this.ef.TO())}}Kxt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.zI(),E8t:t=>this.eHt(t)},{name:t+".properties.font.name",value:this.$Vt(),E8t:t=>this.nHt(t)},{name:t+".properties.size.name",value:this.XVt(),E8t:t=>this.rHt(t)},{name:t+".properties.line-height.name",value:this.KVt(),E8t:t=>this.hHt(t)},{name:t+".properties.bold.name",value:this.YVt(),E8t:t=>this.oHt(t)},{name:t+".properties.italic.name",value:this.ZVt(),E8t:t=>this.aHt(t)}]}]}axt(){return self.DHt}},new WeakMap),gl=new Map([["left",0],["center",1],["right",2]]),yl=new Map([["top",0],["center",1],["bottom",2]]),wl=["ltr","rtl"];new Set(["auto","fixed"]);self.DHt=class extends self.l6{constructor(){super(),A.set(this,self.xN.CN().p6())}get text(){return A.get(this).zI()}set text(t){rl.Me(t);const s=A.get(this);s.zVt(),s.eHt(t)}OHt(t,s){rl.Me(t),rl.ye(s);const i=A.get(this);i.zVt(),i.fHt(t,s)}kHt(){A.get(this).dHt()}set WV(t){rl.Me(t),A.get(this).nHt(t)}get WV(){return A.get(this).$Vt()}set VV(t){A.get(this).oHt(t)}get VV(){return A.get(this).YVt()}set HV(t){A.get(this).aHt(t)}get HV(){return A.get(this).ZVt()}set jV(t){rl.ye(t),A.get(this).rHt(t)}get jV(){return A.get(this).XVt()}set LHt(t){if(rl.Le(t),t.length<3)throw new Error("expected 3 elements");dl.$o(t[0],t[1],t[2]),A.get(this).mHt(dl)}get LHt(){const t=A.get(this).gHt();return[t.ea(),t.na(),t.ra()]}set lineHeight(t){rl.ye(t),A.get(this).hHt(t)}get lineHeight(){return A.get(this).KVt()}set JV(t){rl.Me(t);const s=gl.get(t);if(void 0===s)throw new Error("invalid mode");A.get(this).lHt(s)}get JV(){return ol[A.get(this).QVt()]}set verticalAlign(t){rl.Me(t);const s=yl.get(t);if(void 0===s)throw new Error("invalid mode");A.get(this).uHt(s)}get verticalAlign(){return al[A.get(this).tHt()]}set qV(t){if(!ul.includes(t))throw new Error("invalid mode");A.get(this).cHt(t)}get qV(){return A.get(this).sHt()}set $V(t){rl.Me(t);const s=wl.indexOf(t);if(-1===s)throw new Error("invalid text direction");A.get(this).wHt(s)}get $V(){return wl[A.get(this).SHt()]}set NHt(t){A.get(this).bHt(!!t)}get NHt(){return A.get(this).iHt()}BHt(t){rl.ye(t);const s=A.get(this);s.vHt("fixed"),s.xHt(t)}WHt(){A.get(this).vHt("auto")}get YV(){return A.get(this).THt()}get ZV(){return A.get(this)._Ht()}jHt(){const t=A.get(this);return[t.THt(),t._Ht()]}VHt(t,s,i){return rl.Me(t),rl.ye(s),rl.ye(i),A.get(this).CHt(t,s,i)}HHt(t,s){return rl.ye(t),rl.ye(s),A.get(this).IHt(t,s)}UHt(t,s=0){return rl.Me(t),rl.ye(s),A.get(this).EHt(t,s)}zHt(t){return rl.Me(t),A.get(this).PHt(t)}JHt(t){const s=A.get(this),i=s.NO().gk(t);s.VVt(i)}qHt(){return A.get(this).FHt()}}}{const Sl=self.Os;Sl.rX.Text.eX={$Ht(t,s){return s?this.nf===t:Sl.mn(this.nf,t)},XHt(){return-1!==this.kVt},pHt(){return!0},KHt(t,s,i){return this.CHt(t,s,i)}}}{const bl=self.Os,vl=bl.hr(bl.Vo);bl.rX.Text.Jnt={lf(t){this.zVt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.eHt(t.toString())},YHt(t){this.zVt(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.eHt(this.nf+t)},ZHt(t,s){this.zVt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.fHt(t.toString(),s)},QHt(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.TVt&&i===this.E_&&e===this.P_||(this.nHt(t),this.oHt(i),this.aHt(e))},MI(t){this.rHt(t)},t7t(t){vl.Sa(t),vl.mr(),this.mHt(vl)},s7t(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},aVt(t){this.wO().Xb(t),this.ef.TO()},i7t(){this.dHt()},TI(t){this.hHt(t)},e7t(t){this.lHt(t)},n7t(t){this.uHt(t)},r7t(t){this.yHt(t)},HI(t){this.wHt(t)},h7t(t){this.VVt(t)},o7t(){return this.FHt()},a7t(t){this.bHt(t)},l7t(t,s){this.vHt(["auto","fixed"][t]),this.xHt(s)}}}{const Ml=self.Os;Ml.rX.Text.qnt={Text(){return this.nf},u7t(){return this.GVt?Ml.Cn.$p(this.nf):this.nf},c7t(){return this.TVt},f7t(){return this._Vt},d7t(){return this.THt()},p7t(){return this._Ht()},m7t(){return this.IVt},g7t(t,s){return this.IHt(t,s)},y7t(t){return this.PHt(t)},w7t(t,s){const i=this.EHt(t,s);return i?i.x:0},S7t(t,s){const i=this.EHt(t,s);return i?i.y:0},b7t(t,s){const i=this.EHt(t,s);return i?i.width:0},v7t(t,s){const i=this.EHt(t,s);return i?i.height:0},M7t(){return this.RVt}}}{const xl=self.Os;xl.rX.Touch=class extends xl.LMt{constructor(t){super(t)}lr(){super.lr()}}}{let i=function(){return s.yL().p6()};i;const Gl=self.Os,Tl=self.zs;Gl.rX.Touch.Q_t=class extends Gl.Mxt{constructor(t){super(t)}lr(){super.lr()}oxt(){}axt(){return self.x7t}};let s=null;self.x7t=class extends self.wL{constructor(t){super(t),(s=t).NO().hO().aO=this}requestPermission(t){Tl.Me(t);const s=i();if("orientation"===t)return s.G7t(0);if("motion"===t)return s.G7t(1);throw new Error("invalid type")}}}{const F=self.Os;F.rX.Touch.Instance=class extends F.Ixt{constructor(t,s){super(t,"touch"),this.T7t=new Map,this._7t=!1,this.I7t=!1,this.C7t=0,this.E7t=0,this.P7t=0,this.R7t=0,this.A7t=0,this.F7t=0,this.D7t=0,this.O7t=0,this.k7t=0,this.L7t=0,this.N7t=0,this.B7t=0,this.W7t=0,this.j7t=0,this.V7t=0,this.H7t=0,this.U7t=0,this.z7t=[],s&&(this._7t=s[0]),this.Lxt("permission-result",t=>this.J7t(t));const i=this.NO().Nf();this.g0=new F.d0(F.o0.f0(i,"pointerdown",t=>this.q7t(t.data)),F.o0.f0(i,"pointermove",t=>this.$7t(t.data)),F.o0.f0(i,"pointerup",t=>this.X7t(t.data,!1)),F.o0.f0(i,"pointercancel",t=>this.X7t(t.data,!0)),F.o0.f0(i,"deviceorientation",t=>this.K7t(t.data)),F.o0.f0(i,"deviceorientationabsolute",t=>this.Y7t(t.data)),F.o0.f0(i,"devicemotion",t=>this.Z7t(t.data)),F.o0.f0(i,"tick2",t=>this.MK()))}lr(){this.T7t.clear(),super.lr()}q7t(t){if("mouse"===t.pointerType){if(!this._7t)return;this.I7t=!0}const s=t.pointerId;if(!this.T7t.has(s)){const i=t.pageX-this.ef.dN(),e=t.pageY-this.ef.pN(),n=performance.now(),r=this.T7t.size,h=(this.N7t=r,this.B7t=s,F.hr(F.rX.Touch.Q7t));h.bCt(n,i,e,s,r),this.T7t.set(s,h),this.f4(F.rX.Touch.eX.tUt),this.f4(F.rX.Touch.eX.sUt),this.j7t=i,this.V7t=e,this.U7t=0,this.f4(F.rX.Touch.eX.iUt)}}$7t(t){if("mouse"!==t.pointerType||this.I7t){const s=this.T7t.get(t.pointerId);if(s){const i=performance.now();if(!(i-s.YR()<2)){const e=t.pageX-this.ef.dN(),n=t.pageY-this.ef.pN();s.sU(i,e,n,t.width,t.height,t.pressure)}}}}X7t(t,s){if("mouse"===t.pointerType){if(!this.I7t)return;this.I7t=!1}const i=performance.now(),e=t.pointerId,n=this.T7t.get(e);if(n){if(this.N7t=n.eUt(),this.B7t=n.qW(),!s){const r=t.pageX-this.ef.dN(),h=t.pageY-this.ef.pN();this.j7t=r,this.V7t=h,this.U7t=1,this.f4(F.rX.Touch.eX.iUt)}if(this.f4(F.rX.Touch.eX.nUt),this.f4(F.rX.Touch.eX.rUt),!s){const o=n.hUt(i);"single-tap"===o?(this.f4(F.rX.Touch.eX.oUt),this.j7t=n.av(),this.V7t=n.cv(),this.f4(F.rX.Touch.eX.aUt)):"double-tap"===o&&(this.f4(F.rX.Touch.eX.lUt),this.j7t=n.av(),this.V7t=n.cv(),this.f4(F.rX.Touch.eX.uUt))}n.lr(),this.T7t.delete(e)}}G7t(i){return this.jxt("request-permission",{type:i}),new Promise((t,s)=>{this.z7t.push({type:i,resolve:t,reject:s})})}J7t(t){const s=t.result,i=t.type,e=(this.W7t=i,this.z7t.filter(t=>t.type===i));for(const n of e)n.resolve(s?"granted":"denied");this.z7t=this.z7t.filter(t=>t.type!==i),s?(this.f4(F.rX.Touch.eX.cUt),0===i?this.ef.s4t():this.ef.i4t()):this.f4(F.rX.Touch.eX.fUt)}K7t(t){"number"==typeof t.webkitCompassHeading?this.C7t=t.webkitCompassHeading:t.absolute&&(this.C7t=t.alpha),this.E7t=t.alpha,this.P7t=t.beta,this.R7t=t.gamma}Y7t(t){this.C7t=t.alpha}Z7t(t){const s=t.acceleration,i=(s&&(this.A7t=s.x,this.F7t=s.y,this.D7t=s.z),t.accelerationIncludingGravity);i&&(this.O7t=i.x,this.k7t=i.y,this.L7t=i.z)}MK(){let t=performance.now(),s=0;for(const i of this.T7t.values())i.YR()<=t-50&&i.dUt(t),i.pUt(t)&&(this.N7t=i.eUt(),this.B7t=i.qW(),this.H7t=s,this.f4(F.rX.Touch.eX.mUt),this.j7t=i.av(),this.V7t=i.cv(),this.f4(F.rX.Touch.eX.gUt),this.H7t=0),++s}yUt(t){t=Math.floor(t);for(const s of this.T7t.values()){if(0===t)return s;--t}return null}wUt(t,s){return 0<=t&&0<=s&&t<this.ef.D5t()&&s<this.ef.O5t()}Kxt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.T7t.values()].map(t=>({name:"$"+t.qW(),value:t.av()+", "+t.cv()}))}]}}}{const _l=self.Os;_l.rX.Touch.eX={sUt(){return!0},rUt(){return!0},SUt(){return 0<this.T7t.size},iUt(t,s){return!!t&&s===this.U7t&&!!this.wUt(this.j7t,this.V7t)&&this.ef.TF().JAt(t,[[this.j7t,this.V7t]],!1)},bUt(t){if(!t)return!1;const s=this.ef.bdt(),i=s.HSt(),e=[...this.T7t.values()].filter(t=>this.wUt(t.av(),t.cv())).map(t=>[t.av(),t.cv()]);return _l.xor(this.ef.TF().JAt(t,e,i),i)},vUt(t,s,i){const e=this.yUt(t);return!!e&&_l.compare(e.k6(),s,i)},MUt(){return!0},xUt(){return!0},GUt(t,s,i){this.ef.s4t();let e;return e=0===t?this.E7t:1===t?this.P7t:this.R7t,_l.compare(e,s,i)},TUt(t,s,i){this.ef.i4t();let e;return e=0===t?this.O7t:1===t?this.k7t:2===t?this.L7t:3===t?this.A7t:4===t?this.F7t:this.D7t,_l.compare(e,s,i)},tUt(t){return(t=Math.floor(t))===this.N7t},nUt(t){return(t=Math.floor(t))===this.N7t},_Ut(t){return t=Math.floor(t),this.T7t.size>=t+1},mUt(){return!0},oUt(){return!0},lUt(){return!0},gUt(t){return!!t&&!!this.wUt(this.j7t,this.V7t)&&this.ef.TF().JAt(t,[[this.j7t,this.V7t]],!1)},aUt(t){return!!t&&!!this.wUt(this.j7t,this.V7t)&&this.ef.TF().JAt(t,[[this.j7t,this.V7t]],!1)},uUt(t){return!!t&&!!this.wUt(this.j7t,this.V7t)&&this.ef.TF().JAt(t,[[this.j7t,this.V7t]],!1)},cUt(t){return this.W7t===t},fUt(t){return this.W7t===t}}}{const Il=self.Os;Il.rX.Touch.Jnt={IUt(t){this.G7t(t)}}}{const Cl=self.Os;Cl.rX.Touch.qnt={CUt(){return this.T7t.size},$2t(t){const s=this.yUt(this.H7t);return s?s.EUt(this.ef.gO(),t,!0):0},X2t(t){const s=this.yUt(this.H7t);return s?s.EUt(this.ef.gO(),t,!1):0},PUt(t,s){const i=this.yUt(t);return i?i.EUt(this.ef.gO(),s,!0):0},RUt(t,s){const i=this.yUt(t);return i?i.EUt(this.ef.gO(),s,!1):0},AUt(t,s){const i=this.T7t.get(t);return i?i.EUt(this.ef.gO(),s,!0):0},FUt(t,s){const i=this.T7t.get(t);return i?i.EUt(this.ef.gO(),s,!1):0},DUt(){const t=this.yUt(0);return t?t.av():0},OUt(){const t=this.yUt(0);return t?t.cv():0},kUt(t){const s=this.yUt(t);return s?s.av():0},LUt(t){const s=this.yUt(t);return s?s.cv():0},NUt(t){const s=this.T7t.get(t);return s?s.av():0},BUt(t){const s=this.T7t.get(t);return s?s.cv():0},WUt(t){const s=this.yUt(t);return s?s.k6():0},jUt(t){const s=this.T7t.get(t);return s?s.k6():0},VUt(t){const s=this.yUt(t);return s?Cl.Sr(s.YL()):0},HUt(t){const s=this.T7t.get(t);return s?Cl.Sr(s.YL()):0},UUt(){return this.ef.s4t(),this.C7t},zUt(){return this.ef.s4t(),this.E7t},JUt(){return this.ef.s4t(),this.P7t},qUt(){return this.ef.s4t(),this.R7t},$Ut(){return this.ef.i4t(),this.O7t},XUt(){return this.ef.i4t(),this.k7t},KUt(){return this.ef.i4t(),this.L7t},YUt(){return this.ef.i4t(),this.A7t},ZUt(){return this.ef.i4t(),this.F7t},QUt(){return this.ef.i4t(),this.D7t},tzt(){return this.N7t},szt(){return this.B7t},izt(t){const s=this.T7t.get(t);return s?s.nm():0},ezt(t){const s=this.T7t.get(t);return s?s.gm():0},nzt(t){const s=this.T7t.get(t);return s?s.rzt():0}}}{let h=self.Os,s=-1e3,i=-1e3,e=-1e4;h.rX.Touch.Q7t=class extends h.nr{constructor(){super(),this.hzt=0,this.hT=0,this.aLt=0,this.qA=0,this.ozt=0,this.azt=0,this.lzt=0,this.Ka=0,this.Ya=0,this.uzt=0,this.czt=0,this.Hm=0,this.Um=0,this.fzt=0,this.dzt=!1,this.pzt=!1}lr(){}bCt(t,s,i,e,n){this.hzt=e,this.hT=n,this.qA=t,this.ozt=t,this.aLt=t,this.azt=s,this.lzt=i,this.Ka=s,this.Ya=i,this.uzt=s,this.czt=i}sU(t,s,i,e,n,r){this.ozt=this.qA,this.qA=t,this.uzt=this.Ka,this.czt=this.Ya,this.Ka=s,this.Ya=i,this.Hm=e,this.Um=n,this.fzt=r,!this.pzt&&15<=h.Mr(this.azt,this.lzt,this.Ka,this.Ya)&&(this.pzt=!0)}qW(){return this.hzt}eUt(){return this.hT}YR(){return this.qA}dUt(t){this.ozt=t}av(){return this.Ka}cv(){return this.Ya}k6(){const t=h.Mr(this.Ka,this.Ya,this.uzt,this.czt),s=(this.qA-this.ozt)/1e3;return 0<s?t/s:0}YL(){return h.Tr(this.uzt,this.czt,this.Ka,this.Ya)}nm(){return this.Hm}gm(){return this.Um}rzt(){return this.fzt}pUt(t){return!this.dzt&&500<=t-this.aLt&&!this.pzt&&h.Mr(this.azt,this.lzt,this.Ka,this.Ya)<15&&(this.dzt=!0)}hUt(t){return!this.dzt&&t-this.aLt<=333&&!this.pzt&&h.Mr(this.azt,this.lzt,this.Ka,this.Ya)<15?t-e<=666&&h.Mr(s,i,this.Ka,this.Ya)<25?(s=-1e3,i=-1e3,e=-1e4,"double-tap"):(s=this.Ka,i=this.Ya,e=t,"single-tap"):""}EUt(t,s,i){if(void 0===s){const e=t.vO(0);return e.lq(this.Ka,this.Ya)[i?0:1]}{const n=t.SO(s);return n?n.fN(this.Ka,this.Ya)[i?0:1]:0}}}}{const El=self.Os;El.rX.Function=class extends El.LMt{constructor(t){super(t)}lr(){super.lr()}}}{const Pl=self.Os;Pl.rX.Function.Q_t=class extends Pl.Mxt{constructor(t){super(t)}lr(){super.lr()}oxt(){}}}{const Rl=self.Os;class Al{constructor(){this.name="",this.mzt=0,this.params=[]}}Rl.rX.Function.Instance=class extends Rl.Ixt{constructor(t,s){super(t),this.gzt=this.ef._Ot(),this.yzt=-1,this.wzt=[];const i=(t,s)=>this.Szt(t,s);self.c2_callFunction=i,self.c3_callFunction=i}lr(){super.lr()}L8(){const t=this.wzt,s=++this.yzt;return s===t.length&&t.push(new Al),t[s]}X8(){--this.yzt}g0t(){const t=this.yzt;return t<0?null:this.wzt[t]}bzt(){const t=this.wzt;if(!t.length)return null;const s=Math.min(this.yzt+1,t.length-1);return t[s]}vzt(t,s){const i=this.L8(),e=(i.name=t.toLowerCase(),i.mzt=0,Rl.Vh(i.params,s),this.Dxt(Rl.rX.Function.eX.Mzt,i.name));this.gzt&&!e&&console.warn(`[Construct] Function object: called function '${t}' but no event was triggered. Is the function call spelt incorrectly or no longer used?`),this.X8()}*xzt(t,s){const i=this.L8(),e=(i.name=t.toLowerCase(),i.mzt=0,Rl.Vh(i.params,s),yield*this.Oxt(Rl.rX.Function.eX.Mzt,i.name));this.gzt&&!e&&console.warn(`[Construct] Function object: called function '${t}' but no event was triggered. Is the function call spelt incorrectly or no longer used?`),this.X8()}Szt(t,s){const i=this.L8();return i.name=t.toLowerCase(),i.mzt=0,i.params=(s||[]).map(t=>"number"==typeof t||"string"==typeof t?t:"boolean"==typeof t&&t?1:0),this.Dxt(Rl.rX.Function.eX.Mzt,i.name),this.X8(),i.mzt}}}{const Fl=self.Os;Fl.rX.Function.eX={Mzt(t){return!0},Gzt(t,s,i){const e=this.g0t();if(!e)return this.gzt&&console.warn("[Construct] Function object: used 'Compare parameter' condition when not in a function call"),!1;let n=e.params,r=0;return(t=Math.floor(t))<0||t>=n.length?this.gzt&&console.warn(`[Construct] Function object: in function '${e.name}', compared parameter out of bounds (accessed index ${t} of ${n.length})`):r=n[t],Fl.compare(r,s,i)}}}{const Dl=self.Os;Dl.rX.Function.Jnt={CallFunction(t,s){if(this.ef.jvt())return this.xzt(t,s);this.vzt(t,s)},Tzt(t){const s=this.g0t();s?s.mzt=t:this.gzt&&console.warn("[Construct] Function object: used 'Set return value' when not in a function call")},Qxt(t){}}}{const Ol=self.Os;Ol.rX.Function.qnt={_zt(){const t=this.bzt();return t?t.mzt:0},Izt(){const t=this.g0t();return t?t.params.length:(this.gzt&&console.warn("[Construct] Function object: used 'ParamCount' expression when not in a function call"),0)},Czt(t){t=Math.floor(t);const s=this.g0t();if(s){const i=s.params;return 0<=t&&t<i.length?i[t]:(this.gzt&&console.warn(`[Construct] Function object: in function '${s.name}', accessed parameter out of bounds (accessed index ${t} of ${i.length})`),0)}return this.gzt&&console.warn("[Construct] Function object: used 'Param' expression when not in a function call"),0},Pd(t,...s){const i=this.L8(),e=(i.name=t.toLowerCase(),i.mzt=0,i.params=s,this.Dxt(Ol.rX.Function.eX.Mzt,i.name));return this.gzt&&!e&&console.warn(`[Construct] Function object: expression Function.Call("${t}" ...) was used, but no event was triggered. Is the function call spelt incorrectly or no longer used?`),this.X8(),i.mzt}}}{const kl=self.Os;kl.rX.Ezt=class extends kl.dxt{constructor(t){super(t,"text-input"),this.yxt("click",(t,s)=>t.Pzt(s)),this.yxt("dblclick",(t,s)=>t.Rzt(s)),this.yxt("change",(t,s)=>t.Azt(s))}lr(){super.lr()}}}{const Ll=self.Os;Ll.rX.Ezt.Q_t=class extends Ll.Mxt{constructor(t){super(t)}lr(){super.lr()}oxt(){}}}{const Nl=self.Os,Bl=self.zs,Wl=["text","password","email","number","tel","url","textarea","search"],jl=(Nl.rX.Ezt.Instance=class extends Nl.yGt{constructor(t,s){super(t,"text-input"),this.nf="",this.Fzt="",this.Dzt="",this.byt=!0,this.Ozt=!1,this.kzt=!1,this.df="text",this.vGt=!0,this.Lzt=-1,this.rf="",this.Nzt="",s&&(this.nf=s[0],this.Fzt=s[1],this.Dzt=s[2],this.wO().F5(s[3]),this.byt=s[4],this.Ozt=s[5],this.kzt=s[6],this.df=Wl[s[7]],this.vGt=s[8],this.rf=s[9],this.Nzt=s[10]),this.AGt({type:this.df,id:this.rf,className:this.Nzt})}lr(){super.lr()}FGt(){return{text:this.nf,placeholder:this.Fzt,title:this.Dzt,isEnabled:this.byt,isReadOnly:this.Ozt,spellCheck:this.kzt,maxLength:this.Lzt}}async Pzt(t){this.Txt("click",!0),await this.m4(Nl.rX.Ezt.eX.Bzt)}async Rzt(t){this.Txt("dblclick",!0),await this.m4(Nl.rX.Ezt.eX.Wzt)}async Azt(t){this.nf=t.text,this.Txt("change",!0),await this.m4(Nl.rX.Ezt.eX.jzt)}eHt(t){this.nf!==t&&(this.nf=t,this.kGt())}Vzt(){return this.nf}Hzt(t){this.Fzt!==t&&(this.Fzt=t,this.kGt())}Uzt(){return this.Fzt}zzt(t){this.Dzt!==t&&(this.Dzt=t,this.kGt())}Jzt(){return this.Dzt}m2t(t){this.byt!==(t=!!t)&&(this.byt=t,this.kGt())}y2t(){return this.byt}qzt(t){this.Ozt!==(t=!!t)&&(this.Ozt=t,this.kGt())}$zt(){return this.Ozt}Xzt(t){t=Math.max(+t,-1),this.Lzt!==t&&(this.Lzt=t,this.kGt())}Kzt(){return this.Lzt}Yzt(){Promise.resolve().then(()=>this.EGt("scroll-to-bottom"))}Yv(t){}Mv(){return{t:this.nf,p:this.Fzt,ti:this.Dzt,e:this.byt,r:this.Ozt,sp:this.kzt,ml:this.Lzt,type:this.df,id:this.rf}}xv(t){this.nf=t.t,this.Fzt=t.p,this.Dzt=t.ti,this.byt=t.e,this.Ozt=t.r,this.kzt=t.sp,this.Lzt=t.hasOwnProperty("ml")?t.ml:-1,this.df=t.type,this.rf=t.id,this.kGt()}Trt(t){switch(t){case 0:return this.nf;case 1:return this.Fzt;case 2:return this.Dzt;case 4:return this.byt;case 5:return this.Ozt;case 6:return this.kzt;case 8:return this.vGt}}Rrt(t,s){switch(t){case 0:this.nf!==s&&(this.nf=s,this.kGt());break;case 1:this.Fzt!==s&&(this.Fzt=s,this.kGt());break;case 2:this.Dzt!==s&&(this.Dzt=s,this.kGt());break;case 4:this.byt!==!!s&&(this.byt=!!s,this.kGt());break;case 5:this.Ozt!==!!s&&(this.Ozt=!!s,this.kGt());break;case 6:this.kzt!==!!s&&(this.kzt=!!s,this.kGt());break;case 8:this.vGt=!!s}}Kxt(){const s=Nl.rX.Ezt.Jnt,t="plugins.textbox";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.nf,E8t:t=>this.Zxt(s.lf,t)},{name:t+".properties.enabled.name",value:this.byt,E8t:t=>this.Zxt(s.pMt,t)},{name:t+".properties.read-only.name",value:this.Ozt,E8t:t=>this.Zxt(s.Zzt,t)}]}]}axt(){return self.Qzt}},new WeakMap);self.Qzt=class extends self.c6{constructor(){super(),jl.set(this,self.xN.CN().p6())}set text(t){Bl.Me(t),jl.get(this).eHt(t)}get text(){return jl.get(this).Vzt()}set placeholder(t){Bl.Me(t),jl.get(this).Hzt(t)}get placeholder(){return jl.get(this).Uzt()}set t9t(t){Bl.Me(t),jl.get(this).zzt(t)}get t9t(){return jl.get(this).Jzt()}set isEnabled(t){jl.get(this).m2t(t)}get isEnabled(){return jl.get(this).y2t()}set isReadOnly(t){jl.get(this).qzt(t)}get isReadOnly(){return jl.get(this).$zt()}set maxLength(t){Bl.ye(t),jl.get(this).Xzt(t)}get maxLength(){return jl.get(this).Kzt()}s9t(){jl.get(this).Yzt()}}}{const Vl=self.Os;Vl.rX.Ezt.eX={$Ht(t,s){return 0===s?Vl.mn(this.nf,t):this.nf===t},jzt(){return!0},Bzt(){return!0},Wzt(){return!0}}}{const Hl=self.Os;Hl.rX.Ezt.Jnt={lf(t){this.eHt(t.toString())},YHt(t){""!==t&&this.eHt(this.Vzt()+t)},i9t(t){this.Hzt(t)},e9t(t){this.zzt(t)},Zzt(t){this.qzt(0===t)},n9t(){this.Yzt()},r9t(t){this.Xzt(t)}}}{const Ul=self.Os;Ul.rX.Ezt.qnt={Text(){return this.Vzt()},h9t(){return this.Kzt()}}}{const zl=self.Os;zl.rX.Keyboard=class extends zl.LMt{constructor(t){super(t)}lr(){super.lr()}}}{let i=function(){return s.yL().p6()};i;const Jl=self.Os;Jl.rX.Keyboard.Q_t=class extends Jl.Mxt{constructor(t){super(t)}lr(){super.lr()}oxt(){}axt(){return self.o9t}};let s=null;self.o9t=class extends self.wL{constructor(t){super(t),(s=t).NO().hO().keyboard=this}a9t(t){const s=i();if("string"==typeof t)return s.l9t(t);if("number"==typeof t)return s.u9t(t);throw new TypeError("expected string or number")}}}{const ql=self.Os;ql.rX.Keyboard.Instance=class extends ql.Ixt{constructor(t,s){super(t,"keyboard"),this.c9t=new Set,this.f9t=new Set,this.d9t=0,this.p9t="",this.m9t="",this.g9t=!1;const i=this.NO().Nf();this.g0=new ql.d0(ql.o0.f0(i,"keydown",t=>this.y9t(t.data)),ql.o0.f0(i,"keyup",t=>this.w9t(t.data)),ql.o0.f0(i,"window-blur",()=>this.S9t()),ql.o0.f0(i,"keyboard-blur",()=>this.S9t())),this.ef.RO(this.ov())}lr(){super.lr()}async ov(){const t=await this.Wxt("init");this.g9t=t.isKeyboardLockSupported}y9t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.c9t.has(i)||(this.c9t.add(i),this.f9t.add(s),this.p9t=i,this.d9t=s,this.m9t=e,this.f4(ql.rX.Keyboard.eX.b9t),this.f4(ql.rX.Keyboard.eX.v9t),this.f4(ql.rX.Keyboard.eX.M9t),this.f4(ql.rX.Keyboard.eX.x9t))}w9t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.c9t.delete(i),this.f9t.delete(s),this.p9t=i,this.d9t=s,this.m9t=e,this.f4(ql.rX.Keyboard.eX.G9t),this.f4(ql.rX.Keyboard.eX.T9t),this.f4(ql.rX.Keyboard.eX._9t),this.f4(ql.rX.Keyboard.eX.I9t)}S9t(){for(const t of this.f9t)this.f9t.delete(t),this.d9t=t,this.f4(ql.rX.Keyboard.eX.G9t),this.f4(ql.rX.Keyboard.eX.T9t),this.f4(ql.rX.Keyboard.eX.I9t);this.c9t.clear()}l9t(t){return this.c9t.has(t)}u9t(t){return this.f9t.has(t)}Mv(){return{tk:this.d9t,tkk:this.m9t}}xv(t){this.d9t=t.tk,t.hasOwnProperty("tkk")&&(this.m9t=t.tkk)}Kxt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.d9t},{name:t+".debugger.last-key-string",value:ql.rX.Keyboard.qnt.C9t(this.d9t)},{name:t+".debugger.last-typed-key",value:this.m9t}]}]}}}{const $l=self.Os,Xl=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];$l.rX.Keyboard.eX={l9t(t){return this.f9t.has(t)},v9t(t){return this.d9t===t},b9t(){return!0},G9t(){return!0},T9t(t){return this.d9t===t},u9t(t){return t=Math.floor(t),this.f9t.has(t)},x9t(t){return this.d9t===t},I9t(t){return this.d9t===t},M9t(t){const s=Xl[t];return this.p9t===s},_9t(t){const s=Xl[t];return this.p9t===s},E9t(t){const s=Xl[t];return this.c9t.has(s)},P9t(){return this.g9t},R9t(){return!0},A9t(){return!0}}}{const Kl=self.Os;Kl.rX.Keyboard.Jnt={async F9t(s){if(this.g9t){let t=[];s&&(t=s.split(","));const i=await this.Wxt("lock-keyboard",{keysArr:t});i.isOk?this.f4(Kl.rX.Keyboard.eX.R9t):this.f4(Kl.rX.Keyboard.eX.A9t)}},D9t(){this.g9t&&this.Wxt("unlock-keyboard")}}}{let s=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"←";case 38:return"↑";case 39:return"→";case 40:return"↓";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};s;const Yl=self.Os;Yl.rX.Keyboard.qnt={O9t(){return this.d9t},C9t(t){return s(t)},k9t(){return this.m9t}}}{const Zl=self.Os;Zl.Fat.L9t=class extends Zl.NGt{constructor(t){super(t);const s=this.ef.Nf();this.g0=new Zl.d0(Zl.o0.f0(s,"pointerdown",t=>this.q7t(t.data)),Zl.o0.f0(s,"pointermove",t=>this.$7t(t.data)),Zl.o0.f0(s,"pointerup",t=>this.X7t(t.data,!1)),Zl.o0.f0(s,"pointercancel",t=>this.X7t(t.data,!0)))}lr(){this.g0.lr(),this.g0=null,super.lr()}q7t(t){"mouse"===t.pointerType&&0!==t.button||this.N9t(t.pointerId.toString(),t.pageX-this.ef.dN(),t.pageY-this.ef.pN())}$7t(t){0!=(1&t.lastButtons)&&0==(1&t.buttons)?this.B9t(t.pointerId.toString()):this.W9t(t.pointerId.toString(),t.pageX-this.ef.dN(),t.pageY-this.ef.pN())}X7t(t,s){"mouse"===t.pointerType&&0!==t.button||this.B9t(t.pointerId.toString())}async N9t(t,s,i){let e=this.PL(),n=null,r=null,h=0,o=0;for(const a of e){const l=a.Dat(Zl.Fat.L9t);if(l.$u()&&!l.j9t()&&!a.qj()){const u=a.wO(),c=u.SO(),[f,d]=c.fN(s,i,u.Y4());if(c.V5()&&u.wB(f,d))if(n){const p=n.wO();(c.wF()>p.SO().wF()||c.wF()===p.SO().wF()&&u.bO()>p.bO())&&(n=a,r=l,h=f,o=d)}else n=a,r=l,h=f,o=d}}n&&await r.V9t(t,h,o)}W9t(t,s,i){const e=this.PL();for(const n of e){const r=n.Dat(Zl.Fat.L9t);if(r.$u()&&r.j9t()&&(!r.j9t()||r.H9t()===t)){const h=n.wO(),o=h.SO(),[a,l]=o.fN(s,i,h.Y4());r.U9t(a,l)}}}async B9t(t){const s=this.PL();for(const i of s){const e=i.Dat(Zl.Fat.L9t);e.j9t()&&e.H9t()===t&&await e.z9t()}}}}{const Ql=self.Os;Ql.Fat.L9t.Q_t=class extends Ql.HGt{constructor(t){super(t)}lr(){super.lr()}oxt(){}}}{const tu=self.Os,su=self.S6,iu=(tu.Fat.L9t.Instance=class extends tu.zGt{constructor(t,s){super(t),this.J9t=!1,this.q9t=0,this.$9t=0,this.X9t="<none>",this.K9t=0,this.byt=!0,s&&(this.K9t=s[0],this.byt=s[1])}lr(){super.lr()}Mv(){return{a:this.K9t,e:this.byt}}xv(t){this.K9t=t.a,this.byt=t.e,this.J9t=!1}m2t(t){this.byt=!!t,this.byt||(this.J9t=!1)}$u(){return this.byt}Y9t(t){this.K9t=t}Z9t(){return this.K9t}Q9t(){this.J9t&&this.z9t()}j9t(){return this.J9t}H9t(){return this.X9t}async V9t(t,s,i){const e=this.wO();this.q9t=s-e.av(),this.$9t=i-e.cv(),this.J9t=!0,this.X9t=t,this.Txt("dragstart"),await this.m4(tu.Fat.L9t.eX.tJt)}U9t(t,s){const i=this.wO(),e=t-this.q9t,n=s-this.$9t;0===this.K9t?i.av()===e&&i.cv()===n||(i.z4(e,n),i.U4()):1===this.K9t?i.av()!==e&&(i.lv(e),i.U4()):2===this.K9t&&i.cv()!==n&&(i.dv(n),i.U4())}async z9t(){this.J9t=!1,this.Txt("drop"),await this.m4(tu.Fat.L9t.eX.sJt)}Trt(t){switch(t){case 0:return this.Z9t();case 1:return this.$u()}}Rrt(t,s){switch(t){case 0:this.Y9t(s);break;case 1:this.m2t(!!s)}}Kxt(){let t="behaviors.dragndrop",s=t+".properties.axes",i="";return 0===this.K9t?i=s+".items.both":1===this.K9t?i=s+".items.horizontal-only":2===this.K9t&&(i=s+".items.vertical-only"),[{title:"$"+this.G6().$c(),properties:[{name:t+".debugger.is-dragging",value:this.j9t()},{name:s+".name",value:[i]},{name:t+".properties.enabled.name",value:this.$u(),E8t:t=>this.m2t(t)}]}]}axt(){return self.iJt}},new WeakMap),eu=["both","horizontal","vertical"];self.iJt=class extends su{constructor(){super(),iu.set(this,su.CN().p6())}set axes(t){const s=eu.indexOf(t);if(-1===s)throw new Error("invalid axes");iu.get(this).Y9t(s)}get axes(){return eu[iu.get(this).Z9t()]}eJt(){iu.get(this).Q9t()}get nJt(){return iu.get(this).j9t()}get isEnabled(){return iu.get(this).$u()}set isEnabled(t){iu.get(this).m2t(t)}}}{const nu=self.Os;nu.Fat.L9t.eX={j9t(){return this.j9t()},tJt(){return!0},sJt(){return!0},$u(){return this.$u()}}}{const ru=self.Os;ru.Fat.L9t.Jnt={pMt(t){this.m2t(!!t)},rJt(t){this.Y9t(t)},hJt(){this.Q9t()}}}{const hu=self.Os;hu.Fat.L9t.qnt={}}{const ou=self.Os;ou.Fat.oJt=class extends ou.NGt{constructor(t){super(t)}lr(){super.lr()}}}{const au=self.Os;au.Fat.oJt.Q_t=class extends au.HGt{constructor(t){super(t)}lr(){super.lr()}oxt(){}}}{const lu=self.Os,uu=self.zs,cu=self.S6,fu=(lu.Fat.oJt.Instance=class extends lu.zGt{constructor(t,s){super(t);const i=this.wO(),e=(this.WTt=0,this.aJt=0,this.Uo=0,this.lJt=!1,this.uJt=!1,this.cJt=!1,this.byt=!0,this.q9t=0,this.$9t=0,this.uzt=i.av(),this.czt=i.cv(),this.fJt=i.YL(),this.dJt=0,this.pJt=Math.min(Math.abs(i.nm()),Math.abs(i.gm())/2),this.mJt=!1,s&&(this.WTt=s[0],this.aJt=s[1],this.Uo=s[2],this.lJt=!!s[3],this.uJt=!!s[4],this.cJt=!!s[5],this.byt=!!s[6]),i.YL());this.q9t=Math.cos(e)*this.WTt,this.$9t=Math.sin(e)*this.WTt,this.byt&&(this.Jxt(),this.lJt)&&this.YGt()}lr(){super.lr()}Mv(){const t={dx:this.q9t,dy:this.$9t,lx:this.uzt,ly:this.czt,lka:this.fJt,t:this.dJt};return 0!==this.aJt&&(t.acc=this.aJt),0!==this.Uo&&(t.g=this.Uo),this.cJt&&(t.st=this.cJt),this.byt||(t.e=this.byt),this.lJt&&(t.bos=this.lJt),this.uJt&&(t.sa=this.uJt),t}xv(t){this.q9t=t.dx,this.$9t=t.dy,this.uzt=t.lx,this.czt=t.ly,this.fJt=t.lka,this.dJt=t.t,this.aJt=t.hasOwnProperty("acc")?t.acc:0,this.Uo=t.hasOwnProperty("g")?t.g:0,this.cJt=!!t.hasOwnProperty("st")&&t.st,this.lJt=!!t.hasOwnProperty("bos")&&t.bos,this.uJt=!!t.hasOwnProperty("sa")&&t.sa,this.m2t(!t.hasOwnProperty("e")||t.e)}PY(){if(this.byt){const n=this.ef.SD(this.Mi),r=this.Mi.wO();if(r.YL()!==this.fJt){const t=r.YL();if(this.uJt){const s=lu.Mr(0,0,this.q9t,this.$9t);this.q9t=Math.cos(t)*s,this.$9t=Math.sin(t)*s}this.fJt=t}let i=0,e=0;if(0!==this.aJt){let t=lu.Mr(0,0,this.q9t,this.$9t),s;s=0===this.q9t&&0===this.$9t?r.YL():lu.Tr(0,0,this.q9t,this.$9t),t+=this.aJt*n,i=Math.cos(s)*this.aJt,e=Math.sin(s)*this.aJt,t<0&&(t=0,i=0,e=0),this.q9t=Math.cos(s)*t,this.$9t=Math.sin(s)*t}if(0!==this.Uo&&(this.$9t+=this.Uo*n,e+=this.Uo),this.uzt=r.av(),this.czt=r.cv(),0!==this.q9t||0!==this.$9t){const h=this.q9t*n+.5*i*n*n,o=this.$9t*n+.5*e*n*n,a=lu.Mr(0,0,h,o);if(this.gJt(h,o,a),this.dJt+=a,this.uJt&&(0!=h||0!=o)){const l=lu.Tr(0,0,h,o);r.KL(l),this.fJt=r.YL()}r.U4()}}}gJt(t,s,i){const e=this.wO();if(!this.cJt||i<=this.pJt)e.X4(t,s),e.U4(),this.cJt&&this.f4(lu.Fat.oJt.eX.yJt);else{this.mJt=!1;const n=e.av(),r=e.cv(),h=n+t,o=r+s,a=lu.Tr(0,0,t,s),l=Math.cos(a)*this.pJt,u=Math.sin(a)*this.pJt,c=Math.floor(i/this.pJt);for(let t=1;t<=c;++t)if(e.z4(n+l*t,r+u*t),e.U4(),this.f4(lu.Fat.oJt.eX.yJt),this.Mi.qj()||this.mJt)return;e.z4(h,o),e.U4(),this.f4(lu.Fat.oJt.eX.yJt)}}KGt(){if(this.byt&&this.lJt&&(0!==this.q9t||0!==this.$9t)){const t=this.ef.SD(this.Mi),s=this.Mi.wO(),i=this.ef.TF(),e=i.uk(this.Mi);if(e){i.WAt(this.Mi,e);const n=lu.Mr(0,0,this.q9t,this.$9t),r=i.n3t(this.Mi,this.uzt,this.czt);this.q9t=Math.cos(r)*n,this.$9t=Math.sin(r)*n,s.X4(this.q9t*t,this.$9t*t),s.U4(),this.uJt&&(s.KL(r),this.fJt=s.YL(),s.U4()),i.t3t(this.Mi,this.q9t/n,this.$9t/n,Math.max(2.5*n*t,30))||i.e3t(this.Mi,100)}}}Trt(t){switch(t){case 0:return this.wJt();case 1:return this.SJt();case 2:return this.bJt();case 4:return this.uJt;case 5:return this.cJt;case 6:return this.y2t()}}Rrt(t,s){switch(t){case 0:this.vJt(s);break;case 1:this.aJt=s;break;case 2:this.Uo=s;break;case 4:this.uJt=!!s;break;case 5:this.cJt=!!s;break;case 6:this.m2t(!!s)}}vJt(t){const s=lu.Tr(0,0,this.q9t,this.$9t);this.q9t=Math.cos(s)*t,this.$9t=Math.sin(s)*t}wJt(){return lu.Vr(lu.Mr(0,0,this.q9t,this.$9t),6)}MJt(t){this.aJt=t}SJt(){return this.aJt}xJt(t){this.Uo=t}bJt(){return this.Uo}GJt(t){const s=lu.Mr(0,0,this.q9t,this.$9t);this.q9t=Math.cos(t)*s,this.$9t=Math.sin(t)*s}TJt(){return lu.Tr(0,0,this.q9t,this.$9t)}_Jt(t){this.lJt!==(t=!!t)&&(this.lJt=t,this.byt)&&(this.lJt?this.YGt():this.qGt())}IJt(){return this.lJt}CJt(t){this.dJt=t}EJt(){return this.dJt}m2t(t){this.byt=!!t,this.byt?(this.Jxt(),this.lJt&&this.YGt()):(this.Pxt(),this.qGt())}y2t(){return this.byt}Kxt(){const t="behaviors.bullet";return[{title:"$"+this.G6().$c(),properties:[{name:t+".debugger.vector-x",value:this.q9t,E8t:t=>this.q9t=t},{name:t+".debugger.vector-y",value:this.$9t,E8t:t=>this.$9t=t},{name:t+".properties.speed.name",value:this.wJt(),E8t:t=>this.vJt(t)},{name:t+".debugger.angle-of-motion",value:lu.Sr(this.TJt())},{name:t+".properties.gravity.name",value:this.bJt(),E8t:t=>this.xJt(t)},{name:t+".properties.acceleration.name",value:this.SJt(),E8t:t=>this.MJt(t)},{name:t+".debugger.distance-travelled",value:this.EJt()},{name:t+".properties.enabled.name",value:this.y2t(),E8t:t=>this.m2t(t)}]}]}axt(){return self.PJt}},new WeakMap);self.PJt=class extends cu{constructor(){super(),fu.set(this,cu.CN().p6())}get speed(){return fu.get(this).wJt()}set speed(t){uu.ye(t),fu.get(this).vJt(t)}get acceleration(){return fu.get(this).SJt()}set acceleration(t){uu.ye(t),fu.get(this).MJt(t)}get RJt(){return fu.get(this).bJt()}set RJt(t){uu.ye(t),fu.get(this).xJt(t)}get AJt(){return fu.get(this).TJt()}set AJt(t){uu.ye(t),fu.get(this).GJt(t)}get FJt(){return fu.get(this).IJt()}set FJt(t){fu.get(this)._Jt(!!t)}get DJt(){return fu.get(this).EJt()}set DJt(t){uu.ye(t),fu.get(this).CJt(t)}get isEnabled(){return fu.get(this).y2t()}set isEnabled(t){fu.get(this).m2t(t)}}}{const du=self.Os;du.Fat.oJt.eX={OJt(t,s){const i=Math.hypot(this.q9t,this.$9t);return du.compare(i,t,s)},kJt(t,s){return du.compare(this.EJt(),t,s)},yJt(){return!0},$u(){return this.y2t()}}}{const pu=self.Os;pu.Fat.oJt.Jnt={LJt(t){this.vJt(t)},NJt(t){this.MJt(t)},BJt(t){this.xJt(t)},WJt(t){this.GJt(pu.yr(t))},o3(t){if(t){const s=t.Rvt(this.Mi);if(s){const i=this.Mi.wO(),e=this.ef.TF(),n=this.ef.SD(this.Mi),r=pu.Mr(0,0,this.q9t,this.$9t),h=e.n3t(this.Mi,this.uzt,this.czt,s);this.q9t=Math.cos(h)*r,this.$9t=Math.sin(h)*r,i.X4(this.q9t*n,this.$9t*n),i.U4(),this.uJt&&(i.KL(h),this.fJt=i.YL(),i.U4()),0!==r&&(this.lJt?e.t3t(this.Mi,this.q9t/r,this.$9t/r,Math.max(2.5*r*n,30))||e.e3t(this.Mi,100):e.QAt(this.Mi,this.q9t/r,this.$9t/r,Math.max(2.5*r*n,30),s))}}},jJt(t){this._Jt(t)},VJt(t){this.CJt(t)},pMt(t){this.m2t(t)},HJt(){this.mJt=!0}}}{const mu=self.Os;mu.Fat.oJt.qnt={UJt(){return this.wJt()},zJt(){return this.SJt()},JJt(){return mu.Sr(this.TJt())},qJt(){return this.EJt()},$Jt(){return this.bJt()}}}{let t=function(t,s){return"number"==typeof t&&"number"==typeof s},n=function(i,e){if("string"!=typeof i&&"string"!=typeof e)return i&&e?1:0;{let t,s;return t="number"==typeof i?(Math.round(1e10*i)/1e10).toString():i,s="number"==typeof e?(Math.round(1e10*e)/1e10).toString():e,t+s}};t,n,0;const gu=self.Os;self.Dwt=[()=>"PhysObjSetup",t=>{const s=t.Uwt(0);return()=>s.gwt()},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1);return()=>s()-i.Mwt()},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1).uwt(),e=t.Uwt(2),n=t.Uwt(3);return()=>s(i(e.Mwt(),n.Mwt(),"|"))},t=>{const s=t.Uwt(0);return()=>s.Mwt()-1},()=>0,t=>{const s=t.Uwt(0).uwt();return()=>Math.round(50*s())/50},t=>{const s=t.Uwt(0);return()=>s.Mwt()+1},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1),e=t.Uwt(2).uwt(),n=t.Uwt(3).uwt(),r=t.Uwt(4),h=t.Uwt(5);return()=>s()-i.Mwt()-e(n(r.Mwt(),h.Mwt()-1,"|"))},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1).uwt(),e=t.Uwt(2),n=t.Uwt(3),r=t.Uwt(4).uwt(),h=t.Uwt(5).uwt(),o=t.Uwt(6),a=t.Uwt(7),l=t.Uwt(8).Fwt(),u=t.Uwt(9).uwt(),c=t.Uwt(10).uwt(),f=t.Uwt(11),d=t.Uwt(12),p=t.Uwt(13).Fwt(),m=t.Uwt(14).Fwt();return()=>(s(i(e.Mwt(),n.Mwt(),"|"))+r(h(o.Mwt(),a.Mwt(),"|"))*l.yet()+.5*u(c(f.Mwt(),d.Mwt(),"|"))*Math.pow(p.yet(),2))*m.yet()},t=>{const s=t.Uwt(0).uwt();return()=>s(0)},()=>"",t=>{const s=t.Uwt(0);return()=>s.Mwt()},t=>{const s=t.Uwt(0).uwt();return()=>s()},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1).uwt(),e=t.Uwt(2),n=t.Uwt(3).uwt();return()=>s(i(e.Mwt(),n(),"|"))},t=>{const s=t.Uwt(0).Fwt(),i=t.Uwt(1).Fwt();return()=>s.yet()+i.yet()},t=>{const s=t.Uwt(0),i=t.Uwt(1).uwt(),e=t.Uwt(2).Fwt();return()=>n(s.Mwt()+(0===i()?"":"|"),e.yet())},()=>1,t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1).uwt(),e=t.Uwt(2),n=t.Uwt(3).uwt();return()=>s(i(e.Mwt(),n()-1,"|"))},t=>{const s=t.Uwt(0).Fwt(),i=t.Uwt(1).uwt(),e=t.Uwt(2).uwt(),n=t.Uwt(3),r=t.Uwt(4).uwt(),h=t.Uwt(5).Fwt(),o=t.Uwt(6).uwt(),a=t.Uwt(7).uwt(),l=t.Uwt(8),u=t.Uwt(9).uwt(),c=t.Uwt(10).Fwt();return()=>s.yet()+i(e(n.Mwt(),r()-1,"|"))*h.yet()+.5*o(a(l.Mwt(),u()-1,"|"))*Math.pow(c.yet(),2)},t=>{const s=t.Uwt(0),i=t.Uwt(1).Fwt();return()=>n(s.Mwt()+"|",i.yet())},()=>"TextButtons",t=>{const s=t.Uwt(0);return()=>gu.mr(Math.floor(.875*s.Mwt()),1,1e3)},()=>"ToggleButtons",t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1);return()=>s(i.Mwt(),"|")-1},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1),e=t.Uwt(2).uwt();return()=>s(i.Mwt(),e(),"|")},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1);return()=>s(i.Mwt(),"|")},t=>{const s=t.Uwt(0).Fwt();return()=>s.yet()+1},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1);return()=>s(i.Mwt(),0,"|")},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1),e=t.Uwt(2).Fwt();return()=>s(i.Mwt(),e.yet()+1,"|")},()=>"PlaceToggleButton",()=>"MultipleChoice",()=>"MultipleChoiceSetup",t=>{const s=t.Uwt(0);return()=>s.bwt()},t=>{const s=t.Uwt(0).Fwt();return()=>s.yet()},()=>50,()=>100,()=>"MultipleChoiceReturn",()=>"UFChooseNot",t=>{const s=t.Uwt(0).uwt();return()=>n("|",s(1))+"|"},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1).Fwt(),e=t.Uwt(2).uwt();return()=>s(i.yet(),n("|",e(0))+"|","|")},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1).Fwt(),e=t.Uwt(2).uwt(),n=t.Uwt(3).uwt(),r=t.Uwt(4).Fwt();return()=>s(i.yet(),Math.ceil(e(n(r.yet(),"|")-2)),"|")},()=>"UFUpdateInARow",t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1).uwt();return()=>n(n("In a row: ",s(0))+"  (",i(1))+")"},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1).uwt();return()=>n(s(0),i(1))},()=>"Ruler",()=>"Stopwatch",t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1),e=t.Uwt(2);return()=>s()-i.bwt()+e.bwt()},()=>"Start",()=>"60.00",()=>"Stop",()=>"00.00",()=>60,t=>{const s=t.Uwt(0),i=t.Uwt(1);return()=>(s.gwt()+i.gwt())/2},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1).Fwt(),e=t.Uwt(2).uwt(),n=t.Uwt(3).uwt(),r=t.Uwt(4).Fwt();return()=>s(Math.floor(i.yet()),2)+"."+e(n((Math.round(100*r.yet())/100+.001).toString(),1,"."),2)},t=>{const s=t.Uwt(0);return()=>Math.round(s.gwt()+90)},t=>{const s=t.Uwt(0),i=t.Uwt(1).uwt();return()=>s.gwt()-i()},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1),e=t.Uwt(2).uwt();return()=>s()-(i.gwt()-e())},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1),e=t.Uwt(2).uwt();return()=>s()+(i.gwt()-e())},()=>"NumberEnterMakeKeyboard",()=>"Selected",()=>"Default",()=>10,t=>{const s=t.Uwt(0).Fwt(),i=t.Uwt(1).uwt(),e=t.Uwt(2).Fwt();return()=>s.yet()/-2+i()*e.yet()},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1);return()=>s()-i.gwt()/2},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1).uwt();return()=>s(i().toString(),1)},t=>{const s=t.Uwt(0).Fwt(),i=t.Uwt(1).Fwt();return()=>s.yet()/-2+11*i.yet()},()=>".",t=>{const s=t.Uwt(0).Fwt(),i=t.Uwt(1).Fwt();return()=>s.yet()/-2+12*i.yet()},()=>"<X",t=>{const s=t.Uwt(0).Fwt(),i=t.Uwt(1).Fwt();return()=>s.yet()/-2+14*i.yet()},()=>"C",t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1);return()=>s(i.gwt())},t=>{const s=t.Uwt(0),i=t.Uwt(1);return()=>s.gwt()/(i.gwt()*(22/24))},t=>{const s=t.Uwt(0),i=t.Uwt(1);return()=>s.gwt()+i.gwt()},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1);return()=>s(i.gwt(),".")},()=>-1,t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1),e=t.Uwt(2).uwt(),n=t.Uwt(3);return()=>s(i.gwt(),e(n.gwt())-1)},()=>"PlaceNumberEnter",()=>"WaveParticleCreate",t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1).uwt();return()=>0===s(3)?32:i(3)},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1).uwt(),e=t.Uwt(2).uwt();return()=>0===s(4)?i()/2:e(4)},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1).Fwt();return()=>Math.ceil(s()/i.yet())},()=>2,()=>64,()=>128,()=>8,()=>-10,t=>{const s=t.Uwt(0);return()=>s.gwt(1)},t=>{const s=t.Uwt(0).Fwt(),i=t.Uwt(1).Fwt(),e=t.Uwt(2).uwt(),n=t.Uwt(3).Fwt();return()=>s.yet()*(1-i.yet()+e(2*n.yet()))},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1);return()=>-1*s(i.gwt())},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1);return()=>800*Math.sqrt(s(i.gwt())/800)},t=>{const s=t.Uwt(0).uwt(),i=t.Uwt(1).uwt();return()=>s()+" - "+i()+" - (C) Wild Haired Science Teacher - Find More at whscience.org"},t=>{const s=t.Uwt(0),i=t.Uwt(1);return()=>s.gwt()+i.gwt()/2+2},t=>{const s=t.Uwt(0);return()=>Math.floor(.875*s.bwt())},t=>{const s=t.Uwt(0).uwt();return()=>s()%2},t=>{const s=t.Uwt(0),i=t.Uwt(1),e=t.Uwt(2);return()=>n(n("[background=#fffc]h = ",Math.round(s.gwt()-i.gwt()))+"cm\nv = ",Math.round(e.Cwt()))+"cm/s"},()=>25,()=>12]}var t=self.Os;self.p5t=function(){return[t.rX.Ent,t.rX.Text,t.Fat.L9t,t.rX.Touch,t.rX.Function,t.rX.Ezt,t.Fat.oJt,t.rX.Keyboard,t.rX.nX.eX.iX,t.rX.nX.eX.od,t.rX.Function.Jnt.CallFunction,t.rX.Ent.qnt.yMt,t.rX.Ent.eX.E2t,t.rX.Ent.eX.S2t,t.rX.nX.eX.sBt,t.rX.nX.qnt.dWt,t.rX.nX.qnt.float,t.rX.nX.qnt.sWt,t.rX.Ent.eX.w2t,t.rX.Ent.Jnt.R2t,t.rX.nX.eX.Umt,t.rX.Ent.Jnt.D2t,t.rX.nX.Jnt.EBt,t.rX.Ent.Jnt.Ybt,t.rX.Ent.qnt.X2t,t.rX.Function.eX.Mzt,t.rX.Ent.eX.v2t,t.rX.Function.qnt.Czt,t.rX.nX.eX.SBt,t.rX.nX.qnt.njt,t.rX.nX.eX.hpt,t.rX.Text.eX.w2t,t.rX.Touch.eX.bUt,t.rX.Text.Jnt.R2t,t.rX.Text.qnt.f7t,t.rX.Text.eX.S2t,t.rX.nX.eX.$4t,t.rX.Text.Jnt.MI,t.rX.Touch.eX.aUt,t.rX.Touch.eX.uUt,t.rX.Text.eX.v2t,t.rX.Text.qnt.yMt,t.rX.nX.qnt.iWt,t.rX.Text.qnt.Text,t.rX.nX.Jnt.NBt,t.rX.Text.Jnt.lf,t.rX.Ent.eX.Uvt,t.rX.nX.eX.dBt,t.rX.Text.eX.Kbt,t.rX.Text.qnt.$2t,t.rX.Text.qnt.X2t,t.rX.Text.Jnt.Ybt,t.rX.Ent.qnt.$2t,t.rX.Text.Jnt.D2t,t.rX.nX.eX.pBt,t.rX.Text.Jnt.xP,t.rX.Function.Jnt.Tzt,t.rX.nX.qnt.replace,t.rX.nX.qnt.random,t.rX.nX.eX._Ot,t.rX.Text.Jnt.F5,t.rX.Keyboard.eX.v9t,t.rX.Text.eX.$Ht,t.rX.Text.qnt.Q2t,t.rX.Text.qnt.Z2t,t.rX.Text.qnt.tMt,t.rX.Text.qnt.sMt,t.rX.nX.qnt.lWt,t.rX.nX.qnt.left,t.rX.Ent.Jnt.KL,t.rX.Ent.qnt.hMt,t.rX.Touch.qnt.$2t,t.rX.Touch.qnt.X2t,t.rX.Ent.Jnt.C2t,t.rX.Ent.Jnt.P8t,t.rX.nX.Jnt.kBt,t.rX.Text.qnt.Fvt,t.rX.Ent.Jnt.JI,t.rX.Text.qnt.K2t,t.rX.Text.qnt.Y2t,t.rX.Ent.Jnt.Cvt,t.rX.Text.Jnt.C2t,t.rX.nX.qnt.PWt,t.rX.Ent.Jnt.fm,t.rX.nX.qnt.EWt,t.rX.nX.qnt.right,t.rX.nX.qnt.Ut,t.rX.nX.qnt.find,t.rX.Touch.eX.oUt,t.rX.Touch.eX.lUt,t.rX.Ent.eX.Kbt,t.rX.Ent.eX.zvt,t.Fat.oJt.Jnt.pMt,t.rX.Ent.qnt.mVt,t.rX.Ent.qnt.gVt,t.Fat.oJt.Jnt.LJt,t.rX.nX.Jnt.Ah,t.rX.nX.qnt.V6t,t.rX.nX.qnt.gjt,t.rX.nX.qnt.yjt,t.rX.Ent.Jnt.lv,t.rX.Text.qnt.d7t,t.rX.Keyboard.eX.l9t,t.rX.nX.eX.q4t,t.rX.nX.qnt.tickcount,t.Fat.oJt.qnt.UJt,t.rX.Touch.eX.SUt,t.rX.Ent.Jnt.xP]},self.I5t=[{XJt:0},{KJt:0},{YJt:0},{ZJt:0},{QJt:0},{tqt:0},{sqt:0},{iqt:0},{eqt:0},{startTime:0},{nqt:0},{rqt:0},{hqt:0},{oqt:0},{aqt:0},{lqt:0},{uqt:0},{cqt:0},{fqt:0},{dqt:0},{pqt:0},{mqt:0},{gqt:0},{yqt:0},{wqt:0},{Sqt:0},{bqt:0},{vqt:0},{Mqt:0},{xqt:0},{Gqt:0},{Tqt:0},{_qt:0},{Touch:0},{Function:0},{Iqt:0},{Text:0},{Cqt:0},{Eqt:0},{Pqt:0},{Rqt:0},{Aqt:0},{Fqt:0},{Dqt:0},{Oqt:0},{kqt:0},{Lqt:0},{Nqt:0},{Bqt:0},{Wqt:0},{jqt:0},{Vqt:0},{Hqt:0},{Uqt:0},{zqt:0},{Jqt:0},{qqt:0},{$qt:0},{Xqt:0},{Kqt:0},{Yqt:0},{Zqt:0},{Qqt:0},{t$t:0},{s$t:0},{i$t:0},{e$t:0},{n$t:0},{r$t:0},{h$t:0},{o$t:0},{a$t:0},{l$t:0},{u$t:0},{c$t:0},{f$t:0},{d$t:0},{p$t:0},{oJt:0},{m$t:0},{g$t:0},{y$t:0},{w$t:0},{Keyboard:0},{S$t:0},{b$t:0},{v$t:0},{M$t:0},{x$t:0},{G$t:0},{T$t:0},{_$t:0},{I$t:0},{C$t:0},{E$t:0},{P$t:0},{R$t:0},{A$t:0},{F$t:0},{D$t:0},{O$t:0},{k$t:0},{L$t:0},{N$t:0},{B$t:0},{W$t:0},{j$t:0},{V$t:0},{H$t:0},{U$t:0},{z$t:0}],self.J$t={oqt:class extends self.O8t{},cqt:class extends self.DHt{},fqt:class extends self.DHt{},pqt:class extends self.O8t{},mqt:class extends self.O8t{},gqt:class extends self.DHt{},Sqt:class extends self.O8t{},Mqt:class extends self.DHt{},Tqt:class extends self.DHt{},_qt:class extends self.DHt{},Touch:class extends self.xN{},Function:class extends self.xN{},Iqt:class extends self.DHt{},Text:class extends self.DHt{},Cqt:class extends self.DHt{},Rqt:class extends self.DHt{},Fqt:class extends self.DHt{},Dqt:class extends self.DHt{},Oqt:class extends self.DHt{},kqt:class extends self.DHt{},Lqt:class extends self.DHt{},Bqt:class extends self.DHt{},Wqt:class extends self.DHt{},jqt:class extends self.DHt{},Vqt:class extends self.DHt{},Hqt:class extends self.DHt{},Uqt:class extends self.DHt{},zqt:class extends self.DHt{},Jqt:class extends self.DHt{},qqt:class extends self.DHt{},$qt:class extends self.DHt{},Xqt:class extends self.DHt{},Kqt:class extends self.DHt{},Yqt:class extends self.DHt{},Zqt:class extends self.O8t{},Qqt:class extends self.O8t{},t$t:class extends self.DHt{},s$t:class extends self.DHt{},i$t:class extends self.DHt{},e$t:class extends self.DHt{},n$t:class extends self.O8t{},r$t:class extends self.Qzt{},h$t:class extends self.DHt{},o$t:class extends self.DHt{},a$t:class extends self.DHt{},l$t:class extends self.O8t{},u$t:class extends self.O8t{},c$t:class extends self.O8t{},f$t:class extends self.O8t{},d$t:class extends self.O8t{},m$t:class extends self.O8t{},g$t:class extends self.DHt{},y$t:class extends self.DHt{},w$t:class extends self.O8t{},Keyboard:class extends self.xN{},b$t:class extends self.DHt{},v$t:class extends self.O8t{},M$t:class extends self.O8t{},x$t:class extends self.DHt{},G$t:class extends self.DHt{},T$t:class extends self.DHt{},_$t:class extends self.DHt{}};