// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__commonJS=(t,s)=>function(){return s||(0,t[__getOwnPropNames(t)[0]])((s={exports:{}}).exports,s),s.exports},__copyProps=(t,s,i,e)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let n of __getOwnPropNames(s))__hasOwnProp.call(t,n)||n===i||__defProp(t,n,{get:()=>s[n],enumerable:!(e=__getOwnPropDesc(s,n))||e.enumerable});return t},__toESM=(t,s,i)=>(i=null!=t?__create(__getProtoOf(t)):{},__copyProps(!s&&t&&t.i?i:__defProp(i,"default",{value:t,enumerable:!0}),t)),require_c3runtime=__commonJS({"file-map:scripts/c3runtime.js"(exports,module){{let e=function(t){ARRAY_TYPE=t},n=function(t){return t*degree},h=function(t,s){return Math.abs(t-s)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(s))},u=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},p=function(t){var s=new ARRAY_TYPE(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},m=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},g=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},y=function(t,s,i,e){var n=new ARRAY_TYPE(4);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n},w=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},S=function(t,s){if(t===s){var i=s[1];t[1]=s[2],t[2]=i}else t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3];return t},b=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*r-n*e;return h?(h=1/h,t[0]=r*h,t[1]=-e*h,t[2]=-n*h,t[3]=i*h,t):null},v=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},M=function(t){return t[0]*t[3]-t[2]*t[1]},x=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*o+r*a,t[1]=n*o+h*a,t[2]=e*l+r*u,t[3]=n*l+h*u,t},T=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+r*o,t[1]=n*a+h*o,t[2]=e*-o+r*a,t[3]=n*-o+h*a,t},G=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1];return t[0]=e*o,t[1]=n*o,t[2]=r*a,t[3]=h*a,t},I=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t},_=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},C=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},E=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},P=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},A=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},R=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},O=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},F=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=s[0],o=s[1],a=s[2],l=s[3];return Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-o)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(l))},D=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},L=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},k=function(){var t=new ARRAY_TYPE(6);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},N=function(t){var s=new ARRAY_TYPE(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},$=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},B=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},W=function(t,s,i,e,n,r){var h=new ARRAY_TYPE(6);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h[4]=n,h[5]=r,h},j=function(t,s,i,e,n,r,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t},V=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=i*r-e*n;return a?(a=1/a,t[0]=r*a,t[1]=-e*a,t[2]=-n*a,t[3]=i*a,t[4]=(n*o-r*h)*a,t[5]=(e*h-i*o)*a,t):null},U=function(t){return t[0]*t[3]-t[1]*t[2]},H=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1],c=i[2],f=i[3],d=i[4],p=i[5];return t[0]=e*l+r*u,t[1]=n*l+h*u,t[2]=e*c+r*f,t[3]=n*c+h*f,t[4]=e*d+r*p+o,t[5]=n*d+h*p+a,t},q=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=Math.sin(i),u=Math.cos(i);return t[0]=e*u+r*l,t[1]=n*u+h*l,t[2]=e*-l+r*u,t[3]=n*-l+h*u,t[4]=o,t[5]=a,t},z=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e*l,t[1]=n*l,t[2]=r*u,t[3]=h*u,t[4]=o,t[5]=a,t},J=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=e*l+r*u+o,t[5]=n*l+h*u+a,t},Y=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t[4]=0,t[5]=0,t},X=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},Z=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},K=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},Q=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},tt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},st=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},it=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},et=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},nt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},rt=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=s[0],l=s[1],u=s[2],c=s[3],f=s[4],d=s[5];return Math.abs(i-a)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(e-l)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(n-u)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(h-f)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(o-d)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(d))},ht=function(){var t=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},ot=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},at=function(t){var s=new ARRAY_TYPE(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},ut=function(t,s,i,e,n,r,h,o,a){var l=new ARRAY_TYPE(9);return l[0]=t,l[1]=s,l[2]=i,l[3]=e,l[4]=n,l[5]=r,l[6]=h,l[7]=o,l[8]=a,l},ct=function(t,s,i,e,n,r,h,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t},ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},dt=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[5];t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=n}else t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8];return t},pt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=u*h-o*l,f=-u*r+o*a,d=l*r-h*a,p=i*c+e*f+n*d;return p?(p=1/p,t[0]=c*p,t[1]=(-u*e+n*l)*p,t[2]=(o*e-n*h)*p,t[3]=f*p,t[4]=(u*i-n*a)*p,t[5]=(-o*i+n*r)*p,t[6]=d*p,t[7]=(-l*i+e*a)*p,t[8]=(h*i-e*r)*p,t):null},mt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8];return t[0]=h*u-o*l,t[1]=n*l-e*u,t[2]=e*o-n*h,t[3]=o*a-r*u,t[4]=i*u-n*a,t[5]=n*r-i*o,t[6]=r*l-h*a,t[7]=e*a-i*l,t[8]=i*h-e*r,t},gt=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8];return s*(l*r-h*a)+i*(-l*n+h*o)+e*(a*n-r*o)},yt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1],p=i[2],m=i[3],g=i[4],y=i[5],w=i[6],S=i[7],b=i[8];return t[0]=f*e+d*h+p*l,t[1]=f*n+d*o+p*u,t[2]=f*r+d*a+p*c,t[3]=m*e+g*h+y*l,t[4]=m*n+g*o+y*u,t[5]=m*r+g*a+y*c,t[6]=w*e+S*h+b*l,t[7]=w*n+S*o+b*u,t[8]=w*r+S*a+b*c,t},wt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=f*e+d*h+l,t[7]=f*n+d*o+u,t[8]=f*r+d*a+c,t},St=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=Math.sin(i),d=Math.cos(i);return t[0]=d*e+f*h,t[1]=d*n+f*o,t[2]=d*r+f*a,t[3]=d*h-f*e,t[4]=d*o-f*n,t[5]=d*a-f*r,t[6]=l,t[7]=u,t[8]=c,t},bt=function(t,s,i){var e=i[0],n=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=n*s[3],t[4]=n*s[4],t[5]=n*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},vt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Mt=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=-i,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},xt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Tt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Gt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,l=i*h,u=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[3]=u-y,t[6]=f+g,t[1]=u+y,t[4]=1-l-p,t[7]=d-m,t[2]=f-g,t[5]=d+m,t[8]=1-l-c,t},It=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,S=i*a-n*h,b=i*l-r*h,v=e*a-n*o,M=e*l-r*o,x=n*l-r*a,T=u*m-c*p,G=u*g-f*p,I=u*y-d*p,_=c*g-f*m,C=c*y-d*m,E=f*y-d*g,P=w*E-S*C+b*_+v*I-M*G+x*T;return P?(P=1/P,t[0]=(o*E-a*C+l*_)*P,t[1]=(a*I-h*E-l*G)*P,t[2]=(h*C-o*I+l*T)*P,t[3]=(n*C-e*E-r*_)*P,t[4]=(i*E-n*I+r*G)*P,t[5]=(e*I-i*C-r*T)*P,t[6]=(m*x-g*M+y*v)*P,t[7]=(g*b-p*x-y*S)*P,t[8]=(p*M-m*b+y*w)*P,t):null},_t=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Ct=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Et=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Pt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},At=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Rt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Ot=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Ft=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},Dt=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=s[0],f=s[1],d=s[2],p=s[3],m=s[4],g=s[5],y=s[6],w=s[7],S=s[8];return Math.abs(i-c)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(e-f)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(n-d)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-p)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(h-m)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(o-g)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-y)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(l-w)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(u-S)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(S))},Lt=function(){var t=new ARRAY_TYPE(16);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},kt=function(t){var s=new ARRAY_TYPE(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},Nt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},$t=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m){var g=new ARRAY_TYPE(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=n,g[5]=r,g[6]=h,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},Bt=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},Wt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},jt=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[3],r=s[6],h=s[7],o=s[11];t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=n,t[13]=h,t[14]=o}else t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15];return t},Vt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,S=i*a-n*h,b=i*l-r*h,v=e*a-n*o,M=e*l-r*o,x=n*l-r*a,T=u*m-c*p,G=u*g-f*p,I=u*y-d*p,_=c*g-f*m,C=c*y-d*m,E=f*y-d*g,P=w*E-S*C+b*_+v*I-M*G+x*T;return P?(P=1/P,t[0]=(o*E-a*C+l*_)*P,t[1]=(n*C-e*E-r*_)*P,t[2]=(m*x-g*M+y*v)*P,t[3]=(f*M-c*x-d*v)*P,t[4]=(a*I-h*E-l*G)*P,t[5]=(i*E-n*I+r*G)*P,t[6]=(g*b-p*x-y*S)*P,t[7]=(u*x-f*b+d*S)*P,t[8]=(h*C-o*I+l*T)*P,t[9]=(e*I-i*C-r*T)*P,t[10]=(p*M-m*b+y*w)*P,t[11]=(c*b-u*M-d*w)*P,t[12]=(o*G-h*_-a*T)*P,t[13]=(i*_-e*G+n*T)*P,t[14]=(m*S-p*v-g*w)*P,t[15]=(u*v-c*S+f*w)*P,t):null},Ut=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,S=i*a-n*h,b=i*l-r*h,v=e*a-n*o,M=e*l-r*o,x=n*l-r*a,T=u*m-c*p,G=u*g-f*p,I=u*y-d*p,_=c*g-f*m,C=c*y-d*m,E=f*y-d*g;return t[0]=o*E-a*C+l*_,t[1]=n*C-e*E-r*_,t[2]=m*x-g*M+y*v,t[3]=f*M-c*x-d*v,t[4]=a*I-h*E-l*G,t[5]=i*E-n*I+r*G,t[6]=g*b-p*x-y*S,t[7]=u*x-f*b+d*S,t[8]=h*C-o*I+l*T,t[9]=e*I-i*C-r*T,t[10]=p*M-m*b+y*w,t[11]=c*b-u*M-d*w,t[12]=o*G-h*_-a*T,t[13]=i*_-e*G+n*T,t[14]=m*S-p*v-g*w,t[15]=u*v-c*S+f*w,t},Ht=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[9],c=t[10],f=t[11],d=t[12],p=t[13],m=t[14],g=s*h-i*r,y=s*o-e*r,w=i*o-e*h,S=l*p-u*d,b=l*m-c*d,v=u*m-c*p;return a*(s*v-i*b+e*S)-n*(r*v-h*b+o*S)+t[15]*(l*w-u*y+c*g)-f*(d*w-p*y+m*g)},qt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],w=s[15],S=i[0],b=i[1],v=i[2],M=i[3];return t[0]=S*e+b*o+v*c+M*m,t[1]=S*n+b*a+v*f+M*g,t[2]=S*r+b*l+v*d+M*y,t[3]=S*h+b*u+v*p+M*w,S=i[4],b=i[5],v=i[6],M=i[7],t[4]=S*e+b*o+v*c+M*m,t[5]=S*n+b*a+v*f+M*g,t[6]=S*r+b*l+v*d+M*y,t[7]=S*h+b*u+v*p+M*w,S=i[8],b=i[9],v=i[10],M=i[11],t[8]=S*e+b*o+v*c+M*m,t[9]=S*n+b*a+v*f+M*g,t[10]=S*r+b*l+v*d+M*y,t[11]=S*h+b*u+v*p+M*w,S=i[12],b=i[13],v=i[14],M=i[15],t[12]=S*e+b*o+v*c+M*m,t[13]=S*n+b*a+v*f+M*g,t[14]=S*r+b*l+v*d+M*y,t[15]=S*h+b*u+v*p+M*w,t},zt=function(t,s,i){var e,n,r,h,o,a,l,u,c,f,d,p,m=i[0],g=i[1],y=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*y+s[12],t[13]=s[1]*m+s[5]*g+s[9]*y+s[13],t[14]=s[2]*m+s[6]*g+s[10]*y+s[14],t[15]=s[3]*m+s[7]*g+s[11]*y+s[15]):(e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*y+s[12],t[13]=n*m+a*g+f*y+s[13],t[14]=r*m+l*g+d*y+s[14],t[15]=h*m+u*g+p*y+s[15]),t},Jt=function(t,s,i){var e=i[0],n=i[1],r=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*n,t[5]=s[5]*n,t[6]=s[6]*n,t[7]=s[7]*n,t[8]=s[8]*r,t[9]=s[9]*r,t[10]=s[10]*r,t[11]=s[11]*r,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},Yt=function(t,s,i,e){var n,r,h,o,a,l,u,c,f,d,p,m,g,y,w,S,b,v,M,x,T,G,I,_,C=e[0],E=e[1],P=e[2],A=Math.hypot(C,E,P);return A<EPSILON?null:(C*=A=1/A,E*=A,P*=A,n=Math.sin(i),h=1-(r=Math.cos(i)),o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],f=s[5],d=s[6],p=s[7],m=s[8],g=s[9],y=s[10],w=s[11],S=C*C*h+r,b=E*C*h+P*n,v=P*C*h-E*n,M=C*E*h-P*n,x=E*E*h+r,T=P*E*h+C*n,G=C*P*h+E*n,I=E*P*h-C*n,_=P*P*h+r,t[0]=o*S+c*b+m*v,t[1]=a*S+f*b+g*v,t[2]=l*S+d*b+y*v,t[3]=u*S+p*b+w*v,t[4]=o*M+c*x+m*T,t[5]=a*M+f*x+g*T,t[6]=l*M+d*x+y*T,t[7]=u*M+p*x+w*T,t[8]=o*G+c*I+m*_,t[9]=a*G+f*I+g*_,t[10]=l*G+d*I+y*_,t[11]=u*G+p*I+w*_,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},Xt=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[4],h=s[5],o=s[6],a=s[7],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=r*n+l*e,t[5]=h*n+u*e,t[6]=o*n+c*e,t[7]=a*n+f*e,t[8]=l*n-r*e,t[9]=u*n-h*e,t[10]=c*n-o*e,t[11]=f*n-a*e,t},Zt=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n-l*e,t[1]=h*n-u*e,t[2]=o*n-c*e,t[3]=a*n-f*e,t[8]=r*e+l*n,t[9]=h*e+u*n,t[10]=o*e+c*n,t[11]=a*e+f*n,t},Kt=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],l=s[4],u=s[5],c=s[6],f=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n+l*e,t[1]=h*n+u*e,t[2]=o*n+c*e,t[3]=a*n+f*e,t[4]=l*n-r*e,t[5]=u*n-h*e,t[6]=c*n-o*e,t[7]=f*n-a*e,t},Qt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ts=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ss=function(t,s,i){var e,n,r,h=i[0],o=i[1],a=i[2],l=Math.hypot(h,o,a);return l<EPSILON?null:(h*=l=1/l,o*=l,a*=l,e=Math.sin(s),r=1-(n=Math.cos(s)),t[0]=h*h*r+n,t[1]=o*h*r+a*e,t[2]=a*h*r-o*e,t[3]=0,t[4]=h*o*r-a*e,t[5]=o*o*r+n,t[6]=a*o*r+h*e,t[7]=0,t[8]=h*a*r+o*e,t[9]=o*a*r-h*e,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},is=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},es=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ns=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rs=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=e+e,a=n+n,l=r+r,u=e*o,c=e*a,f=e*l,d=n*a,p=n*l,m=r*l,g=h*o,y=h*a,w=h*l;return t[0]=1-(d+m),t[1]=c+w,t[2]=f-y,t[3]=0,t[4]=c-w,t[5]=1-(u+m),t[6]=p+g,t[7]=0,t[8]=f+y,t[9]=p-g,t[10]=1-(u+d),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},hs=function(t,s){var i=new ARRAY_TYPE(3),e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=e*e+n*n+r*r+h*h;return c>0?(i[0]=2*(o*h+u*e+a*r-l*n)/c,i[1]=2*(a*h+u*n+l*e-o*r)/c,i[2]=2*(l*h+u*r+o*n-a*e)/c):(i[0]=2*(o*h+u*e+a*r-l*n),i[1]=2*(a*h+u*n+l*e-o*r),i[2]=2*(l*h+u*r+o*n-a*e)),rs(t,s,i),t},os=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},as=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[4],h=s[5],o=s[6],a=s[8],l=s[9],u=s[10];return t[0]=Math.hypot(i,e,n),t[1]=Math.hypot(r,h,o),t[2]=Math.hypot(a,l,u),t},ls=function(t,s){var i=new ARRAY_TYPE(3);as(i,s);var e=1/i[0],n=1/i[1],r=1/i[2],h=s[0]*e,o=s[1]*n,a=s[2]*r,l=s[4]*e,u=s[5]*n,c=s[6]*r,f=s[8]*e,d=s[9]*n,p=s[10]*r,m=h+u+p,g=0;return m>0?(g=2*Math.sqrt(m+1),t[3]=.25*g,t[0]=(c-d)/g,t[1]=(f-a)/g,t[2]=(o-l)/g):h>u&&h>p?(g=2*Math.sqrt(1+h-u-p),t[3]=(c-d)/g,t[0]=.25*g,t[1]=(o+l)/g,t[2]=(f+a)/g):u>p?(g=2*Math.sqrt(1+u-h-p),t[3]=(f-a)/g,t[0]=(o+l)/g,t[1]=.25*g,t[2]=(c+d)/g):(g=2*Math.sqrt(1+p-h-u),t[3]=(o-l)/g,t[0]=(f+a)/g,t[1]=(c+d)/g,t[2]=.25*g),t},us=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var n=e[0],r=e[1],h=e[2],o=e[4],a=e[5],l=e[6],u=e[8],c=e[9],f=e[10];i[0]=Math.hypot(n,r,h),i[1]=Math.hypot(o,a,l),i[2]=Math.hypot(u,c,f);var d=1/i[0],p=1/i[1],m=1/i[2],g=n*d,y=r*p,w=h*m,S=o*d,b=a*p,v=l*m,M=u*d,x=c*p,T=f*m,G=g+b+T,I=0;return G>0?(I=2*Math.sqrt(G+1),t[3]=.25*I,t[0]=(v-x)/I,t[1]=(M-w)/I,t[2]=(y-S)/I):g>b&&g>T?(I=2*Math.sqrt(1+g-b-T),t[3]=(v-x)/I,t[0]=.25*I,t[1]=(y+S)/I,t[2]=(M+w)/I):b>T?(I=2*Math.sqrt(1+b-g-T),t[3]=(M-w)/I,t[0]=(y+S)/I,t[1]=.25*I,t[2]=(v+x)/I):(I=2*Math.sqrt(1+T-g-b),t[3]=(y-S)/I,t[0]=(M+w)/I,t[1]=(v+x)/I,t[2]=.25*I),t},cs=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3],a=n+n,l=r+r,u=h+h,c=n*a,f=n*l,d=n*u,p=r*l,m=r*u,g=h*u,y=o*a,w=o*l,S=o*u,b=e[0],v=e[1],M=e[2];return t[0]=(1-(p+g))*b,t[1]=(f+S)*b,t[2]=(d-w)*b,t[3]=0,t[4]=(f-S)*v,t[5]=(1-(c+g))*v,t[6]=(m+y)*v,t[7]=0,t[8]=(d+w)*M,t[9]=(m-y)*M,t[10]=(1-(c+p))*M,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},fs=function(t,s,i,e,n){var r=s[0],h=s[1],o=s[2],a=s[3],l=r+r,u=h+h,c=o+o,f=r*l,d=r*u,p=r*c,m=h*u,g=h*c,y=o*c,w=a*l,S=a*u,b=a*c,v=e[0],M=e[1],x=e[2],T=n[0],G=n[1],I=n[2],_=(1-(m+y))*v,C=(d+b)*v,E=(p-S)*v,P=(d-b)*M,A=(1-(f+y))*M,R=(g+w)*M,O=(p+S)*x,F=(g-w)*x,D=(1-(f+m))*x;return t[0]=_,t[1]=C,t[2]=E,t[3]=0,t[4]=P,t[5]=A,t[6]=R,t[7]=0,t[8]=O,t[9]=F,t[10]=D,t[11]=0,t[12]=i[0]+T-(_*T+P*G+O*I),t[13]=i[1]+G-(C*T+A*G+F*I),t[14]=i[2]+I-(E*T+R*G+D*I),t[15]=1,t},ds=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,l=i*h,u=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[1]=u+y,t[2]=f-g,t[3]=0,t[4]=u-y,t[5]=1-l-p,t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ps=function(t,s,i,e,n,r,h){var o=1/(i-s),a=1/(n-e),l=1/(r-h);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(n+e)*a,t[10]=(h+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*r*2*l,t[15]=0,t},ms=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=(n+e)*h,t[14]=2*n*e*h}else t[10]=-1,t[14]=-2*e;return t},gs=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=n*h,t[14]=n*e*h}else t[10]=-1,t[14]=-e;return t},ys=function(t,s,i,e){var n=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),h=Math.tan(s.leftDegrees*Math.PI/180),o=Math.tan(s.rightDegrees*Math.PI/180),a=2/(h+o),l=2/(n+r);return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(h-o)*a*.5,t[9]=(n-r)*l*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},ws=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=(h+r)*l,t[15]=1,t},Ss=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=r*l,t[15]=1,t},bs=function(t,s,i,e){var n,r,h,o,a,l,u,c,f,d,p=s[0],m=s[1],g=s[2],y=e[0],w=e[1],S=e[2],b=i[0],v=i[1],M=i[2];return Math.abs(p-b)<EPSILON&&Math.abs(m-v)<EPSILON&&Math.abs(g-M)<EPSILON?Wt(t):(u=p-b,c=m-v,f=g-M,n=w*(f*=d=1/Math.hypot(u,c,f))-S*(c*=d),r=S*(u*=d)-y*f,h=y*c-w*u,(d=Math.hypot(n,r,h))?(n*=d=1/d,r*=d,h*=d):(n=0,r=0,h=0),o=c*h-f*r,a=f*n-u*h,l=u*r-c*n,(d=Math.hypot(o,a,l))?(o*=d=1/d,a*=d,l*=d):(o=0,a=0,l=0),t[0]=n,t[1]=o,t[2]=u,t[3]=0,t[4]=r,t[5]=a,t[6]=c,t[7]=0,t[8]=h,t[9]=l,t[10]=f,t[11]=0,t[12]=-(n*p+r*m+h*g),t[13]=-(o*p+a*m+l*g),t[14]=-(u*p+c*m+f*g),t[15]=1,t)},vs=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=e[0],a=e[1],l=e[2],u=n-i[0],c=r-i[1],f=h-i[2],d=u*u+c*c+f*f;d>0&&(u*=d=1/Math.sqrt(d),c*=d,f*=d);var p=a*f-l*c,m=l*u-o*f,g=o*c-a*u;return(d=p*p+m*m+g*g)>0&&(p*=d=1/Math.sqrt(d),m*=d,g*=d),t[0]=p,t[1]=m,t[2]=g,t[3]=0,t[4]=c*g-f*m,t[5]=f*p-u*g,t[6]=u*m-c*p,t[7]=0,t[8]=u,t[9]=c,t[10]=f,t[11]=0,t[12]=n,t[13]=r,t[14]=h,t[15]=1,t},Ms=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},xs=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Ts=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Gs=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},Is=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},_s=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},Cs=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Es=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],y=t[15],w=s[0],S=s[1],b=s[2],v=s[3],M=s[4],x=s[5],T=s[6],G=s[7],I=s[8],_=s[9],C=s[10],E=s[11],P=s[12],A=s[13],R=s[14],O=s[15];return Math.abs(i-w)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(e-S)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(S))&&Math.abs(n-b)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-v)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(h-M)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(o-x)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-T)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(l-G)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(u-I)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(c-_)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(f-C)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(d-E)<=EPSILON*Math.max(1,Math.abs(d),Math.abs(E))&&Math.abs(p-P)<=EPSILON*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(m-A)<=EPSILON*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(g-R)<=EPSILON*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(y-O)<=EPSILON*Math.max(1,Math.abs(y),Math.abs(O))},Ps=function(){var t=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},As=function(t){var s=new ARRAY_TYPE(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Rs=function(t){var s=t[0],i=t[1],e=t[2];return Math.hypot(s,i,e)},Os=function(t,s,i){var e=new ARRAY_TYPE(3);return e[0]=t,e[1]=s,e[2]=i,e},Fs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Ds=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},Ls=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},ks=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},Ns=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},$s=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},Bs=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Ws=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},js=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Vs=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},Us=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},Hs=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},qs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},zs=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return Math.hypot(i,e,n)},Js=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return i*i+e*e+n*n},Ys=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e},Xs=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},Zs=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},Ks=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*i+e*e+n*n;return r>0&&(r=1/Math.sqrt(r)),t[0]=s[0]*r,t[1]=s[1]*r,t[2]=s[2]*r,t},Qs=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},ti=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2];return t[0]=n*a-r*o,t[1]=r*h-e*a,t[2]=e*o-n*h,t},si=function(t,s,i,e){var n=s[0],r=s[1],h=s[2];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t},ii=function(t,s,i,e){var n=Math.acos(Math.min(Math.max(Qs(s,i),-1),1)),r=Math.sin(n),h=Math.sin((1-e)*n)/r,o=Math.sin(e*n)/r;return t[0]=h*s[0]+o*i[0],t[1]=h*s[1]+o*i[1],t[2]=h*s[2]+o*i[2],t},ei=function(t,s,i,e,n,r){var h=r*r,o=h*(2*r-3)+1,a=h*(r-2)+r,l=h*(r-1),u=h*(3-2*r);return t[0]=s[0]*o+i[0]*a+e[0]*l+n[0]*u,t[1]=s[1]*o+i[1]*a+e[1]*l+n[1]*u,t[2]=s[2]*o+i[2]*a+e[2]*l+n[2]*u,t},ni=function(t,s,i,e,n,r){var h=1-r,o=h*h,a=r*r,l=o*h,u=3*r*o,c=3*a*h,f=a*r;return t[0]=s[0]*l+i[0]*u+e[0]*c+n[0]*f,t[1]=s[1]*l+i[1]*u+e[1]*c+n[1]*f,t[2]=s[2]*l+i[2]*u+e[2]*c+n[2]*f,t},ri=function(t,s){s=s||1;var i=2*RANDOM()*Math.PI,e=2*RANDOM()-1,n=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*n,t[1]=Math.sin(i)*n,t[2]=e*s,t},hi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[3]*e+i[7]*n+i[11]*r+i[15];return h=h||1,t[0]=(i[0]*e+i[4]*n+i[8]*r+i[12])/h,t[1]=(i[1]*e+i[5]*n+i[9]*r+i[13])/h,t[2]=(i[2]*e+i[6]*n+i[10]*r+i[14])/h,t},oi=function(t,s,i){var e=s[0],n=s[1],r=s[2];return t[0]=e*i[0]+n*i[3]+r*i[6],t[1]=e*i[1]+n*i[4]+r*i[7],t[2]=e*i[2]+n*i[5]+r*i[8],t},ai=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],l=s[2],u=n*l-r*a,c=r*o-e*l,f=e*a-n*o,d=n*f-r*c,p=r*u-e*f,m=e*c-n*u,g=2*h;return u*=g,c*=g,f*=g,d*=2,p*=2,m*=2,t[0]=o+u+d,t[1]=a+c+p,t[2]=l+f+m,t},li=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0],r[1]=n[1]*Math.cos(e)-n[2]*Math.sin(e),r[2]=n[1]*Math.sin(e)+n[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},ui=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[2]*Math.sin(e)+n[0]*Math.cos(e),r[1]=n[1],r[2]=n[2]*Math.cos(e)-n[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},ci=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0]*Math.cos(e)-n[1]*Math.sin(e),r[1]=n[0]*Math.sin(e)+n[1]*Math.cos(e),r[2]=n[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},fi=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2],a=Math.sqrt((i*i+e*e+n*n)*(r*r+h*h+o*o)),l=a&&Qs(t,s)/a;return Math.acos(Math.min(Math.max(l,-1),1))},di=function(t){return t[0]=0,t[1]=0,t[2]=0,t},pi=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},mi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},gi=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2];return Math.abs(i-r)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-h)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-o)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(o))},yi=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},wi=function(t){var s=new ARRAY_TYPE(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Si=function(t,s,i,e){var n=new ARRAY_TYPE(4);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n},bi=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},vi=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},Mi=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},xi=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Ti=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Gi=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Ii=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},_i=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Ci=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Ei=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Pi=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Ai=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Ri=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Oi=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return Math.hypot(i,e,n,r)},Fi=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return i*i+e*e+n*n+r*r},Di=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return Math.hypot(s,i,e,n)},Li=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return s*s+i*i+e*e+n*n},ki=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},Ni=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},$i=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r;return h>0&&(h=1/Math.sqrt(h)),t[0]=i*h,t[1]=e*h,t[2]=n*h,t[3]=r*h,t},Bi=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Wi=function(t,s,i,e){var n=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],h=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],l=i[2]*e[3]-i[3]*e[2],u=s[0],c=s[1],f=s[2],d=s[3];return t[0]=c*l-f*a+d*o,t[1]=-u*l+f*h-d*r,t[2]=u*a-c*h+d*n,t[3]=-u*o+c*r-f*n,t},ji=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t[3]=o+e*(i[3]-o),t},Vi=function(t,s){var i,e,n,r,h,o;s=s||1;do{h=(i=2*RANDOM()-1)*i+(e=2*RANDOM()-1)*e}while(h>=1);do{o=(n=2*RANDOM()-1)*n+(r=2*RANDOM()-1)*r}while(o>=1);var a=Math.sqrt((1-h)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*n*a,t[3]=s*r*a,t},Ui=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3];return t[0]=i[0]*e+i[4]*n+i[8]*r+i[12]*h,t[1]=i[1]*e+i[5]*n+i[9]*r+i[13]*h,t[2]=i[2]*e+i[6]*n+i[10]*r+i[14]*h,t[3]=i[3]*e+i[7]*n+i[11]*r+i[15]*h,t},Hi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2],l=i[3],u=l*e+o*r-a*n,c=l*n+a*e-h*r,f=l*r+h*n-o*e,d=-h*e-o*n-a*r;return t[0]=u*l+d*-h+c*-a-f*-o,t[1]=c*l+d*-o+f*-h-u*-a,t[2]=f*l+d*-a+u*-o-c*-h,t[3]=s[3],t},qi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},zi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Ji=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Yi=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=s[0],o=s[1],a=s[2],l=s[3];return Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-o)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(l))},Xi=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Zi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},Ki=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},Qi=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return e>EPSILON?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){var i=dot$2(t,s);return Math.acos(2*i*i-1)},se=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-e*l,t[2]=r*u+h*l+e*a-n*o,t[3]=h*u-e*o-n*a-r*l,t},ie=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+h*o,t[1]=n*a+r*o,t[2]=r*a-n*o,t[3]=h*a-e*o,t},ee=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a-r*o,t[1]=n*a+h*o,t[2]=r*a+e*o,t[3]=h*a-n*o,t},ne=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+n*o,t[1]=n*a-e*o,t[2]=r*a+h*o,t[3]=h*a-r*o,t},re=function(t,s){var i=s[0],e=s[1],n=s[2];return t[0]=i,t[1]=e,t[2]=n,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-n*n)),t},he=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=Math.exp(r),a=h>0?o*Math.sin(h)/h:0;return t[0]=i*a,t[1]=e*a,t[2]=n*a,t[3]=o*Math.cos(h),t},oe=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=h>0?Math.atan2(h,r)/h:0;return t[0]=i*o,t[1]=e*o,t[2]=n*o,t[3]=.5*Math.log(i*i+e*e+n*n+r*r),t},ae=function(t,s,i){return oe(t,s),scale$2(t,t,i),he(t,t),t},le=function(t,s,i,e){var n,r,h,o,a,l=s[0],u=s[1],c=s[2],f=s[3],d=i[0],p=i[1],m=i[2],g=i[3];return(r=l*d+u*p+c*m+f*g)<0&&(r=-r,d=-d,p=-p,m=-m,g=-g),1-r>EPSILON?(n=Math.acos(r),h=Math.sin(n),o=Math.sin((1-e)*n)/h,a=Math.sin(e*n)/h):(o=1-e,a=e),t[0]=o*l+a*d,t[1]=o*u+a*p,t[2]=o*c+a*m,t[3]=o*f+a*g,t},ue=function(t){var s=RANDOM(),i=RANDOM(),e=RANDOM(),n=Math.sqrt(1-s),r=Math.sqrt(s);return t[0]=n*Math.sin(2*Math.PI*i),t[1]=n*Math.cos(2*Math.PI*i),t[2]=r*Math.sin(2*Math.PI*e),t[3]=r*Math.cos(2*Math.PI*e),t},ce=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r,o=h?1/h:0;return t[0]=-i*o,t[1]=-e*o,t[2]=-n*o,t[3]=r*o,t},fe=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},de=function(t,s){var i,e=s[0]+s[4]+s[8];if(e>0)i=Math.sqrt(e+1),t[3]=.5*i,i=.5/i,t[0]=(s[5]-s[7])*i,t[1]=(s[6]-s[2])*i,t[2]=(s[1]-s[3])*i;else{var n=0;s[4]>s[0]&&(n=1),s[8]>s[3*n+n]&&(n=2);var r=(n+1)%3,h=(n+2)%3;i=Math.sqrt(s[3*n+n]-s[3*r+r]-s[3*h+h]+1),t[n]=.5*i,i=.5/i,t[3]=(s[3*r+h]-s[3*h+r])*i,t[r]=(s[3*r+n]+s[3*n+r])*i,t[h]=(s[3*h+n]+s[3*n+h])*i}return t},pe=function(t,s,i,e){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ANGLE_ORDER,r=Math.PI/360;s*=r,e*=r,i*=r;var h=Math.sin(s),o=Math.cos(s),a=Math.sin(i),l=Math.cos(i),u=Math.sin(e),c=Math.cos(e);switch(n){case"xyz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"xzy":t[0]=h*l*c-o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c+h*a*u;break;case"yxz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;case"yzx":t[0]=h*l*c+o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c-h*a*u;break;case"zxy":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"zyx":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;default:throw new Error("Unknown angle order "+n)}return t},me=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},ge=function(t,s){return Math.abs(Bi(t,s))>=1-EPSILON},ye=function(){var t=new ARRAY_TYPE(8);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},we=function(t){var s=new ARRAY_TYPE(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},Se=function(t,s,i,e,n,r,h,o){var a=new ARRAY_TYPE(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=n,a[5]=r,a[6]=h,a[7]=o,a},be=function(t,s,i,e,n,r,h){var o=new ARRAY_TYPE(8);o[0]=t,o[1]=s,o[2]=i,o[3]=e;var a=.5*n,l=.5*r,u=.5*h;return o[4]=a*e+l*i-u*s,o[5]=l*e+u*t-a*i,o[6]=u*e+a*s-l*t,o[7]=-a*t-l*s-u*i,o},ve=function(t,s,i){var e=.5*i[0],n=.5*i[1],r=.5*i[2],h=s[0],o=s[1],a=s[2],l=s[3];return t[0]=h,t[1]=o,t[2]=a,t[3]=l,t[4]=e*l+n*a-r*o,t[5]=n*l+r*h-e*a,t[6]=r*l+e*o-n*h,t[7]=-e*h-n*o-r*a,t},Me=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},xe=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Te=function(t,s){var i=Xi();ls(i,s);var e=new ARRAY_TYPE(3);return os(e,s),ve(t,i,e),t},Ge=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},Ie=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},_e=function(t,s,i,e,n,r,h,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t},Ce=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},Ee=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Pe=function(t,s){var i=s[4],e=s[5],n=s[6],r=s[7],h=-s[0],o=-s[1],a=-s[2],l=s[3];return t[0]=2*(i*l+r*h+e*a-n*o),t[1]=2*(e*l+r*o+n*h-i*a),t[2]=2*(n*l+r*a+i*o-e*h),t},Ae=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=.5*i[0],a=.5*i[1],l=.5*i[2],u=s[4],c=s[5],f=s[6],d=s[7];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=h*o+n*l-r*a+u,t[5]=h*a+r*o-e*l+c,t[6]=h*l+e*a-n*o+f,t[7]=-e*o-n*a-r*l+d,t},Re=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return ie(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Oe=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return ee(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Fe=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return ne(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},De=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],l=s[2],u=s[3];return t[0]=o*h+u*e+a*r-l*n,t[1]=a*h+u*n+l*e-o*r,t[2]=l*h+u*r+o*n-a*e,t[3]=u*h-o*e-a*n-l*r,o=s[4],a=s[5],l=s[6],u=s[7],t[4]=o*h+u*e+a*r-l*n,t[5]=a*h+u*n+l*e-o*r,t[6]=l*h+u*r+o*n-a*e,t[7]=u*h-o*e-a*n-l*r,t},Le=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-e*l,t[2]=r*u+h*l+e*a-n*o,t[3]=h*u-e*o-n*a-r*l,o=i[4],a=i[5],l=i[6],u=i[7],t[4]=e*u+h*o+n*l-r*a,t[5]=n*u+h*a+r*o-e*l,t[6]=r*u+h*l+e*a-n*o,t[7]=h*u-e*o-n*a-r*l,t},ke=function(t,s,i,e){if(Math.abs(e)<EPSILON)return Ge(t,s);var n=Math.hypot(i[0],i[1],i[2]);e*=.5;var r=Math.sin(e),h=r*i[0]/n,o=r*i[1]/n,a=r*i[2]/n,l=Math.cos(e),u=s[0],c=s[1],f=s[2],d=s[3];t[0]=u*l+d*h+c*a-f*o,t[1]=c*l+d*o+f*h-u*a,t[2]=f*l+d*a+u*o-c*h,t[3]=d*l-u*h-c*o-f*a;var p=s[4],m=s[5],g=s[6],y=s[7];return t[4]=p*l+y*h+m*a-g*o,t[5]=m*l+y*o+g*h-p*a,t[6]=g*l+y*a+p*o-m*h,t[7]=y*l-p*h-m*o-g*a,t},Ne=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},$e=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],p=s[7],m=i[0],g=i[1],y=i[2],w=i[3];return t[0]=e*w+h*m+n*y-r*g,t[1]=n*w+h*g+r*m-e*y,t[2]=r*w+h*y+e*g-n*m,t[3]=h*w-e*m-n*g-r*y,t[4]=e*u+h*o+n*l-r*a+c*w+p*m+f*y-d*g,t[5]=n*u+h*a+r*o-e*l+f*w+p*g+d*m-c*y,t[6]=r*u+h*l+e*a-n*o+d*w+p*y+c*g-f*m,t[7]=h*u-e*o-n*a-r*l+p*w-c*m-f*g-d*y,t},Be=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},We=function(t,s,i,e){var n=1-e;return dot$1(s,i)<0&&(e=-e),t[0]=s[0]*n+i[0]*e,t[1]=s[1]*n+i[1]*e,t[2]=s[2]*n+i[2]*e,t[3]=s[3]*n+i[3]*e,t[4]=s[4]*n+i[4]*e,t[5]=s[5]*n+i[5]*e,t[6]=s[6]*n+i[6]*e,t[7]=s[7]*n+i[7]*e,t},je=function(t,s){var i=squaredLength$1(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},Ve=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},Ue=function(t,s){var i=squaredLength$1(s);if(i>0){i=Math.sqrt(i);var e=s[0]/i,n=s[1]/i,r=s[2]/i,h=s[3]/i,o=s[4],a=s[5],l=s[6],u=s[7],c=e*o+n*a+r*l+h*u;t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=(o-e*c)/i,t[5]=(a-n*c)/i,t[6]=(l-r*c)/i,t[7]=(u-h*c)/i}return t},He=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},qe=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},ze=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7];return Math.abs(i-u)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-c)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(n-f)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(h-p)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(y))},Je=function(){var t=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t},Ye=function(t){var s=new ARRAY_TYPE(2);return s[0]=t[0],s[1]=t[1],s},Xe=function(t,s){var i=new ARRAY_TYPE(2);return i[0]=t,i[1]=s,i},Ze=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ke=function(t,s,i){return t[0]=s,t[1]=i,t},Qe=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},tn=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},sn=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},en=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},nn=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},rn=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},hn=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},on=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},an=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},un=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},cn=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},fn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return Math.hypot(i,e)},dn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},pn=function(t){var s=t[0],i=t[1];return Math.hypot(s,i)},mn=function(t){var s=t[0],i=t[1];return s*s+i*i},gn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},yn=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},wn=function(t,s){var i=s[0],e=s[1],n=i*i+e*e;return n>0&&(n=1/Math.sqrt(n)),t[0]=s[0]*n,t[1]=s[1]*n,t},Sn=function(t,s){return t[0]*s[0]+t[1]*s[1]},bn=function(t,s,i){var e=s[0]*i[1]-s[1]*i[0];return t[0]=t[1]=0,t[2]=e,t},vn=function(t,s,i,e){var n=s[0],r=s[1];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t},Mn=function(t,s){s=s||1;var i=2*RANDOM()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},xn=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n,t[1]=i[1]*e+i[3]*n,t},Tn=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n+i[4],t[1]=i[1]*e+i[3]*n+i[5],t},Gn=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[3]*n+i[6],t[1]=i[1]*e+i[4]*n+i[7],t},In=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[4]*n+i[12],t[1]=i[1]*e+i[5]*n+i[13],t},_n=function(t,s,i,e){var n=s[0]-i[0],r=s[1]-i[1],h=Math.sin(e),o=Math.cos(e);return t[0]=n*o-r*h+i[0],t[1]=n*h+r*o+i[1],t},Cn=function(t,s){var i=t[0],e=t[1],n=s[0],r=s[1],h=Math.sqrt((i*i+e*e)*(n*n+r*r)),o=h&&(i*n+e*r)/h;return Math.acos(Math.min(Math.max(o,-1),1))},En=function(t){return t[0]=0,t[1]=0,t},Pn=function(t){return"vec2("+t[0]+", "+t[1]+")"},An=function(t,s){return t[0]===s[0]&&t[1]===s[1]},Rn=function(t,s){var i=t[0],e=t[1],n=s[0],r=s[1];return Math.abs(i-n)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(e-r)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(r))};setMatrixArrayType=e,toRadian=n,equals$9=h,create$8=u,clone$8=p,copy$8=m,identity$5=g,fromValues$8=y,set$8=w,transpose$2=S,invert$5=b,adjoint$2=v,determinant$3=M,multiply$8=x,rotate$4=T,scale$8=G,fromRotation$4=I,fromScaling$3=_,str$8=C,frob$3=E,LDU=P,add$8=A,subtract$6=R,exactEquals$8=O,equals$8=F,multiplyScalar$3=D,multiplyScalarAndAdd$3=L,create$7=k,clone$7=N,copy$7=$,identity$4=B,fromValues$7=W,set$7=j,invert$4=V,determinant$2=U,multiply$7=H,rotate$3=q,scale$7=z,translate$3=J,fromRotation$3=Y,fromScaling$2=X,fromTranslation$3=Z,str$7=K,frob$2=Q,add$7=tt,subtract$5=st,multiplyScalar$2=it,multiplyScalarAndAdd$2=et,exactEquals$7=nt,equals$7=rt,create$6=ht,fromMat4$1=ot,clone$6=at,copy$6=lt,fromValues$6=ut,set$6=ct,identity$3=ft,transpose$1=dt,invert$3=pt,adjoint$1=mt,determinant$1=gt,multiply$6=yt,translate$2=wt,rotate$2=St,scale$6=bt,fromTranslation$2=vt,fromRotation$2=Mt,fromScaling$1=xt,fromMat2d=Tt,fromQuat$1=Gt,normalFromMat4=It,projection=_t,str$6=Ct,frob$1=Et,add$6=Pt,subtract$4=At,multiplyScalar$1=Rt,multiplyScalarAndAdd$1=Ot,exactEquals$6=Ft,equals$6=Dt,create$5=Lt,clone$5=kt,copy$5=Nt,fromValues$5=$t,set$5=Bt,identity$2=Wt,transpose=jt,invert$2=Vt,adjoint=Ut,determinant=Ht,multiply$5=qt,translate$1=zt,scale$5=Jt,rotate$1=Yt,rotateX$3=Xt,rotateY$3=Zt,rotateZ$3=Kt,fromTranslation$1=Qt,fromScaling=ts,fromRotation$1=ss,fromXRotation=is,fromYRotation=es,fromZRotation=ns,fromRotationTranslation$1=rs,fromQuat2=hs,getTranslation$1=os,getScaling=as,getRotation=ls,decompose=us,fromRotationTranslationScale=cs,fromRotationTranslationScaleOrigin=fs,fromQuat=ds,frustum=ps,perspectiveNO=ms,perspectiveZO=gs,perspectiveFromFieldOfView=ys,orthoNO=ws,orthoZO=Ss,lookAt=bs,targetTo=vs,str$5=Ms,frob=xs,add$5=Ts,subtract$3=Gs,multiplyScalar=Is,multiplyScalarAndAdd=_s,exactEquals$5=Cs,equals$5=Es,create$4=Ps,clone$4=As,length$4=Rs,fromValues$4=Os,copy$4=Fs,set$4=Ds,add$4=Ls,subtract$2=ks,multiply$4=Ns,divide$2=$s,ceil$2=Bs,floor$2=Ws,min$2=js,max$2=Vs,round$2=Us,scale$4=Hs,scaleAndAdd$2=qs,distance$2=zs,squaredDistance$2=Js,squaredLength$4=Ys,negate$2=Xs,inverse$2=Zs,normalize$4=Ks,dot$4=Qs,cross$2=ti,lerp$4=si,slerp$1=ii,hermite=ei,bezier=ni,random$3=ri,transformMat4$2=hi,transformMat3$1=oi,transformQuat$1=ai,rotateX$2=li,rotateY$2=ui,rotateZ$2=ci,angle$1=fi,zero$2=di,str$4=pi,exactEquals$4=mi,equals$4=gi,create$3=yi,clone$3=wi,fromValues$3=Si,copy$3=bi,set$3=vi,add$3=Mi,subtract$1=xi,multiply$3=Ti,divide$1=Gi,ceil$1=Ii,floor$1=_i,min$1=Ci,max$1=Ei,round$1=Pi,scale$3=Ai,scaleAndAdd$1=Ri,distance$1=Oi,squaredDistance$1=Fi,length$3=Di,squaredLength$3=Li,negate$1=ki,inverse$1=Ni,normalize$3=$i,dot$3=Bi,cross$1=Wi,lerp$3=ji,random$2=Vi,transformMat4$1=Ui,transformQuat=Hi,zero$1=qi,str$3=zi,exactEquals$3=Ji,equals$3=Yi,create$2=Xi,identity$1=Zi,setAxisAngle=Ki,getAxisAngle=Qi,getAngle=te,multiply$2=se,rotateX$1=ie,rotateY$1=ee,rotateZ$1=ne,calculateW=re,exp=he,ln=oe,pow=ae,slerp=le,random$1=ue,invert$1=ce,conjugate$1=fe,fromMat3=de,fromEuler=pe,str$2=me,equals$2=ge,create$1=ye,clone$1=we,fromValues$1=Se,fromRotationTranslationValues=be,fromRotationTranslation=ve,fromTranslation=Me,fromRotation=xe,fromMat4=Te,copy$1=Ge,identity=Ie,set$1=_e,getDual=Ce,setDual=Ee,getTranslation=Pe,translate=Ae,rotateX=Re,rotateY=Oe,rotateZ=Fe,rotateByQuatAppend=De,rotateByQuatPrepend=Le,rotateAroundAxis=ke,add$1=Ne,multiply$1=$e,scale$1=Be,lerp$1=We,invert=je,conjugate=Ve,normalize$1=Ue,str$1=He,exactEquals$1=qe,equals$1=ze,create=Je,clone=Ye,fromValues=Xe,copy=Ze,set=Ke,add=Qe,subtract=tn,multiply=sn,divide=en,ceil=nn,floor=rn,min=hn,max=on,round=an,scale=un,scaleAndAdd=cn,distance=fn,squaredDistance=dn,length=pn,squaredLength=mn,negate=gn,inverse=yn,normalize=wn,dot=Sn,cross=bn,lerp=vn,random=Mn,transformMat2=xn,transformMat2d=Tn,transformMat3=Gn,transformMat4=In,rotate=_n,angle=Cn,zero=En,str=Pn,exactEquals=An,equals=Rn,EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,RANDOM=Math.random,ANGLE_ORDER="zyx",degree=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),common={__proto__:null,EPSILON:EPSILON,get h(){return ARRAY_TYPE},o:RANDOM,l:ANGLE_ORDER,u:e,m:n,equals:h},mul$8=x,sub$6=R,mat2=Object.freeze({__proto__:null,create:u,clone:p,S:m,identity:g,v:y,set:w,M:S,T:b,G:v,I:M,multiply:x,rotate:T,scale:G,_:I,C:_,P:C,A:E,R:P,add:A,O:R,F:O,equals:F,D:D,L:L,mul:mul$8,sub:sub$6}),mul$7=H,sub$5=st,mat2d=Object.freeze({__proto__:null,create:k,clone:N,S:$,identity:B,v:W,set:j,T:V,I:U,multiply:H,rotate:q,scale:z,translate:J,_:Y,C:X,N:Z,P:K,A:Q,add:tt,O:st,D:it,L:et,F:nt,equals:rt,mul:mul$7,sub:sub$5}),mul$6=yt,sub$4=At,mat3=Object.freeze({__proto__:null,create:ht,$:ot,clone:at,S:lt,v:ut,set:ct,identity:ft,M:dt,T:pt,G:mt,I:gt,multiply:yt,translate:wt,rotate:St,scale:bt,N:vt,_:Mt,C:xt,B:Tt,W:Gt,j:It,V:_t,P:Ct,A:Et,add:Pt,O:At,D:Rt,L:Ot,F:Ft,equals:Dt,mul:mul$6,sub:sub$4}),perspective=ms,ortho=ws,mul$5=qt,sub$3=Gs,mat4=Object.freeze({__proto__:null,create:Lt,clone:kt,S:Nt,v:$t,set:Bt,identity:Wt,M:jt,T:Vt,G:Ut,I:Ht,multiply:qt,translate:zt,scale:Jt,rotate:Yt,U:Xt,H:Zt,J:Kt,N:Qt,C:ts,_:ss,Y:is,X:es,Z:ns,K:rs,tt:hs,st:os,it:as,et:ls,nt:us,rt:cs,ht:fs,W:ds,ot:ps,lt:ms,perspective:perspective,ut:gs,ct:ys,ft:ws,dt:ortho,gt:Ss,yt:bs,wt:vs,P:Ms,A:xs,add:Ts,O:Gs,D:Is,L:_s,F:Cs,equals:Es,mul:mul$5,sub:sub$3}),sub$2=ks,mul$4=Ns,div$2=$s,dist$2=zs,sqrDist$2=Js,len$4=Rs,sqrLen$4=Ys,t=Ps(),forEach$2=function(s,i,e,n,r,h){var o,a;for(i||(i=3),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2];return s},vec3=Object.freeze({__proto__:null,create:Ps,clone:As,length:Rs,v:Os,S:Fs,set:Ds,add:Ls,O:ks,multiply:Ns,St:$s,ceil:Bs,floor:Ws,min:js,max:Vs,round:Us,scale:Hs,bt:qs,vt:zs,Mt:Js,xt:Ys,Tt:Xs,inverse:Zs,normalize:Ks,Gt:Qs,It:ti,_t:si,Ct:ii,Et:ei,Pt:ni,random:ri,At:hi,Rt:oi,Ot:ai,U:li,H:ui,J:ci,angle:fi,Ft:di,P:pi,F:mi,equals:gi,sub:sub$2,mul:mul$4,div:div$2,Dt:dist$2,Lt:sqrDist$2,kt:len$4,Nt:sqrLen$4,forEach:forEach$2}),sub$1=xi,mul$3=Ti,div$1=Gi,dist$1=Oi,sqrDist$1=Fi,len$3=Di,sqrLen$3=Li,forEach$1=function(){var t=yi();return function(s,i,e,n,r,h){var o,a;for(i||(i=4),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],t[3]=s[o+3],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2],s[o+3]=t[3];return s}}(),vec4=Object.freeze({__proto__:null,create:yi,clone:wi,v:Si,S:bi,set:vi,add:Mi,O:xi,multiply:Ti,St:Gi,ceil:Ii,floor:_i,min:Ci,max:Ei,round:Pi,scale:Ai,bt:Ri,vt:Oi,Mt:Fi,length:Di,xt:Li,Tt:ki,inverse:Ni,normalize:$i,Gt:Bi,It:Wi,_t:ji,random:Vi,At:Ui,Ot:Hi,Ft:qi,P:zi,F:Ji,equals:Yi,sub:sub$1,mul:mul$3,div:div$1,Dt:dist$1,Lt:sqrDist$1,kt:len$3,Nt:sqrLen$3,forEach:forEach$1}),clone$2=wi,fromValues$2=Si,copy$2=bi,set$2=vi,add$2=Mi,mul$2=se,scale$2=Ai,dot$2=Bi,lerp$2=ji,length$2=Di,len$2=length$2,squaredLength$2=Li,sqrLen$2=squaredLength$2,normalize$2=$i,exactEquals$2=Ji,rotationTo=function(){var t=Ps(),s=Os(1,0,0),i=Os(0,1,0);return function(e,n,r){var h=Qs(n,r);return h<-.999999?(ti(t,s,n),len$4(t)<1e-6&&ti(t,i,n),Ks(t,t),Ki(e,t,Math.PI),e):h>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(ti(t,n,r),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1+h,normalize$2(e,e))}}(),sqlerp=function(){var t=Xi(),s=Xi();return function(i,e,n,r,h,o){return le(t,e,h,o),le(s,n,r,o),le(i,t,s,2*o*(1-o)),i}}(),setAxes=function(){var t=ht();return function(s,i,e,n){return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-i[0],t[5]=-i[1],t[8]=-i[2],normalize$2(s,de(s,t))}}(),quat=Object.freeze({__proto__:null,create:Xi,identity:Zi,$t:Ki,Bt:Qi,Wt:te,multiply:se,U:ie,H:ee,J:ne,jt:re,exp:he,Vt:oe,pow:ae,Ct:le,random:ue,T:ce,Ut:fe,Ht:de,qt:pe,P:me,clone:clone$2,v:fromValues$2,S:copy$2,set:set$2,add:add$2,mul:mul$2,scale:scale$2,Gt:dot$2,_t:lerp$2,length:length$2,kt:len$2,xt:squaredLength$2,Nt:sqrLen$2,normalize:normalize$2,F:exactEquals$2,equals:ge,zt:rotationTo,Jt:sqlerp,Yt:setAxes}),getReal=copy$2,setReal=copy$2,mul$1=$e,dot$1=dot$2,length$1=length$2,len$1=length$1,squaredLength$1=squaredLength$2,sqrLen$1=squaredLength$1,quat2=Object.freeze({__proto__:null,create:ye,clone:we,v:Se,Xt:be,K:ve,N:Me,_:xe,$:Te,S:Ge,identity:Ie,set:_e,Zt:getReal,Kt:Ce,Qt:setReal,ts:Ee,st:Pe,translate:Ae,U:Re,H:Oe,J:Fe,ss:De,es:Le,ns:ke,add:Ne,multiply:$e,mul:mul$1,scale:Be,Gt:dot$1,_t:We,T:je,Ut:Ve,length:length$1,kt:len$1,xt:squaredLength$1,Nt:sqrLen$1,normalize:Ue,P:He,F:qe,equals:ze}),len=pn,sub=tn,mul=sn,div=en,dist=fn,sqrDist=dn,sqrLen=mn,forEach=function(){var t=Je();return function(s,i,e,n,r,h){var o,a;for(i||(i=2),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],r(t,t,h),s[o]=t[0],s[o+1]=t[1];return s}}(),vec2=Object.freeze({__proto__:null,create:Je,clone:Ye,v:Xe,S:Ze,set:Ke,add:Qe,O:tn,multiply:sn,St:en,ceil:nn,floor:rn,min:hn,max:on,round:an,scale:un,bt:cn,vt:fn,Mt:dn,length:pn,xt:mn,Tt:gn,inverse:yn,normalize:wn,Gt:Sn,It:bn,_t:vn,random:Mn,rs:xn,hs:Tn,Rt:Gn,At:In,rotate:_n,angle:Cn,Ft:En,P:Pn,F:An,equals:Rn,kt:len,sub:sub,mul:mul,div:div,Dt:dist,Lt:sqrDist,Nt:sqrLen,forEach:forEach}),globalThis.ls=common,globalThis.ls.us=mat2,globalThis.ls.cs=mat2d,globalThis.ls.fs=mat3,globalThis.ls.ds=mat4,globalThis.ls.ps=quat,globalThis.ls.gs=quat2,globalThis.ls.ys=vec2,globalThis.ls.ws=vec3,globalThis.ls.Ss=vec4}var t,EPSILON,ARRAY_TYPE,RANDOM,ANGLE_ORDER,degree,common,mul$8,sub$6,mat2,mul$7,sub$5,mat2d,mul$6,sub$4,mat3,perspective,ortho,mul$5,sub$3,mat4,sub$2,mul$4,div$2,dist$2,sqrDist$2,len$4,sqrLen$4,forEach$2,vec3,sub$1,mul$3,div$1,dist$1,sqrDist$1,len$3,sqrLen$3,forEach$1,vec4,clone$2,fromValues$2,copy$2,set$2,add$2,mul$2,scale$2,dot$2,lerp$2,length$2,len$2,squaredLength$2,sqrLen$2,normalize$2,exactEquals$2,rotationTo,sqlerp,setAxes,quat,getReal,setReal,mul$1,dot$1,length$1,len$1,squaredLength$1,sqrLen$1,quat2,len,sub,mul,div,dist,sqrDist,sqrLen,forEach,vec2,setMatrixArrayType,toRadian,equals$9,create$8,clone$8,copy$8,identity$5,fromValues$8,set$8,transpose$2,invert$5,adjoint$2,determinant$3,multiply$8,rotate$4,scale$8,fromRotation$4,fromScaling$3,str$8,frob$3,LDU,add$8,subtract$6,exactEquals$8,equals$8,multiplyScalar$3,multiplyScalarAndAdd$3,create$7,clone$7,copy$7,identity$4,fromValues$7,set$7,invert$4,determinant$2,multiply$7,rotate$3,scale$7,translate$3,fromRotation$3,fromScaling$2,fromTranslation$3,str$7,frob$2,add$7,subtract$5,multiplyScalar$2,multiplyScalarAndAdd$2,exactEquals$7,equals$7,create$6,fromMat4$1,clone$6,copy$6,fromValues$6,set$6,identity$3,transpose$1,invert$3,adjoint$1,determinant$1,multiply$6,translate$2,rotate$2,scale$6,fromTranslation$2,fromRotation$2,fromScaling$1,fromMat2d,fromQuat$1,normalFromMat4,projection,str$6,frob$1,add$6,subtract$4,multiplyScalar$1,multiplyScalarAndAdd$1,exactEquals$6,equals$6,create$5,clone$5,copy$5,fromValues$5,set$5,identity$2,transpose,invert$2,adjoint,determinant,multiply$5,translate$1,scale$5,rotate$1,rotateX$3,rotateY$3,rotateZ$3,fromTranslation$1,fromScaling,fromRotation$1,fromXRotation,fromYRotation,fromZRotation,fromRotationTranslation$1,fromQuat2,getTranslation$1,getScaling,getRotation,decompose,fromRotationTranslationScale,fromRotationTranslationScaleOrigin,fromQuat,frustum,perspectiveNO,perspectiveZO,perspectiveFromFieldOfView,orthoNO,orthoZO,lookAt,targetTo,str$5,frob,add$5,subtract$3,multiplyScalar,multiplyScalarAndAdd,exactEquals$5,equals$5,create$4,clone$4,length$4,fromValues$4,copy$4,set$4,add$4,subtract$2,multiply$4,divide$2,ceil$2,floor$2,min$2,max$2,round$2,scale$4,scaleAndAdd$2,distance$2,squaredDistance$2,squaredLength$4,negate$2,inverse$2,normalize$4,dot$4,cross$2,lerp$4,slerp$1,hermite,bezier,random$3,transformMat4$2,transformMat3$1,transformQuat$1,rotateX$2,rotateY$2,rotateZ$2,angle$1,zero$2,str$4,exactEquals$4,equals$4,create$3,clone$3,fromValues$3,copy$3,set$3,add$3,subtract$1,multiply$3,divide$1,ceil$1,floor$1,min$1,max$1,round$1,scale$3,scaleAndAdd$1,distance$1,squaredDistance$1,length$3,squaredLength$3,negate$1,inverse$1,normalize$3,dot$3,cross$1,lerp$3,random$2,transformMat4$1,transformQuat,zero$1,str$3,exactEquals$3,equals$3,create$2,identity$1,setAxisAngle,getAxisAngle,getAngle,multiply$2,rotateX$1,rotateY$1,rotateZ$1,calculateW,exp,ln,pow,slerp,random$1,invert$1,conjugate$1,fromMat3,fromEuler,str$2,equals$2,create$1,clone$1,fromValues$1,fromRotationTranslationValues,fromRotationTranslation,fromTranslation,fromRotation,fromMat4,copy$1,identity,set$1,getDual,setDual,getTranslation,translate,rotateX,rotateY,rotateZ,rotateByQuatAppend,rotateByQuatPrepend,rotateAroundAxis,add$1,multiply$1,scale$1,lerp$1,invert,conjugate,normalize$1,str$1,exactEquals$1,equals$1,create,clone,fromValues,copy,set,add,subtract,multiply,divide,ceil,floor,min,max,round,scale,scaleAndAdd,distance,squaredDistance,length,squaredLength,negate,inverse,normalize,dot,cross,lerp,random,transformMat2,transformMat2d,transformMat3,transformMat4,rotate,angle,zero,str,exactEquals,equals,tmpPoint1,tmpPoint2,tmpLine1,tmpLine2,lineInt,lineSegmentsIntersect,triangleArea,isLeft,isLeftOn,isRight,isRightOn,collinear,sqdist,polygonAt,polygonClear,polygonAppend,polygonMakeCCW,polygonReverse,polygonIsReflex,polygonCanSee,polygonCanSee2,polygonCopy,polygonGetCutEdges,polygonDecomp,polygonSlice,polygonIsSimple,getIntersectionPoint,polygonQuickDecomp,polygonRemoveCollinearPoints,polygonRemoveDuplicatePoints,scalar_eq,points_eq,ReadBrandList,RunTest,GetWindowsNTVersionName,s,a,c,i,l,f,d,r,a,o,arrayFlat,assertFail,isValidTypeChange,logDefendedObjectWarning,CheckDefendedObjectsUsedCorrectly,getObjectPropertySet,VerifyObjectPropertiesConsistent,isNegativeZero,padTwoDigits,hueToRGB,RequireStringOrNumber,SetNewCallback,DoAsyncifiedWork,DoNextAsyncifiedJob,ClearTimeCache,CheckActiveIdleTimeouts,lookupHtmlEntity,bbToHtmlReplacerFunc,IsWordBreakWhiteSpace,IsOpeningCJKPunctiationChar,IsContinuingCJKPunctuationChar,WordBreakTrimEnd,IsNewline,PlaneFromPoints,IsInFrontOfPlane,IsPointInFrontOfPlane,interpolateQuad,GetFormatSpecifiers,fillOrStrokeRect,ptToPx,getOffsetParam,CheckPendingPolls,SortZOrderList,GetDispatcher,MakeIWorldInstanceClass,GetDispatcher,GetTimelineState,GetTimelineState,GetTweenState,getActual,GetTypeFromFileExtension,AddScript,SortByInstLastCachedZIndex,SortByInstLastCachedZIndex,SortByInstZElevation,vec3EqualsXYZ,MaybePrepareLayerDraw,SortSolArray,IsSolArrayIdentical,NoActions,WrapIndex,GetExpressionFunc,EvalParams,EvalParams,GetInst,GetWorldInfo,GetInst_SDKv2,GetWorldInfo_SDKv2,GetObjectClass,GetLayer,CollMemory_Add,CollMemory_Remove,CollMemory_RemoveInstance,CollMemory_Get,DoOverlapCondition,FinishCollisionConditionPicking,FinishCollisionCondition,PickByUID_Normal,PickByUID_Inverted,GetNextParamMap,ValidateInternalAPIToken,ForEachOrdered_SortInstances,SortZOrderList,SortInstancesByValue,GetTouchSdkInstance,GetAudioSdkInstance,GetAudioDOMInterface,unaryminus,bothNumbers,add,subtract,multiply,divide,mod,pow,and,or;{let On=function(t,s,i){i=i||0;var e,n,r,h,o,a,l,u=[0,0];return e=t[1][1]-t[0][1],n=t[0][0]-t[1][0],r=e*t[0][0]+n*t[0][1],h=s[1][1]-s[0][1],o=s[0][0]-s[1][0],a=h*s[0][0]+o*s[0][1],rr(l=e*o-h*n,0,i)||(u[0]=(o*r-n*a)/l,u[1]=(e*a-h*r)/l),u},Fn=function(t,s,i,e){var n=s[0]-t[0],r=s[1]-t[1],h=e[0]-i[0],o=e[1]-i[1];if(h*r-o*n==0)return!1;var a=(n*(i[1]-t[1])+r*(t[0]-i[0]))/(h*r-o*n),l=(h*(t[1]-i[1])+o*(i[0]-t[0]))/(o*n-h*r);return a>=0&&a<=1&&l>=0&&l<=1},Dn=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},Ln=function(t,s,i){return Dn(t,s,i)>0},kn=function(t,s,i){return Dn(t,s,i)>=0},Nn=function(t,s,i){return Dn(t,s,i)<0},$n=function(t,s,i){return Dn(t,s,i)<=0},Bn=function(t,s,i,e){if(e){var n=tmpPoint1,r=tmpPoint2;n[0]=s[0]-t[0],n[1]=s[1]-t[1],r[0]=i[0]-s[0],r[1]=i[1]-s[1];var h=n[0]*r[0]+n[1]*r[1],o=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=Math.sqrt(r[0]*r[0]+r[1]*r[1]);return Math.acos(h/(o*a))<e}return 0===Dn(t,s,i)},Wn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},jn=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},Vn=function(t){t.length=0},Un=function(t,s,i,e){for(var n=i;n<e;n++)t.push(s[n])},Hn=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!Ln(jn(t,s-1),jn(t,s),jn(t,s+1))&&(qn(t),!0)},qn=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},zn=function(t,s){return Nn(jn(t,s-1),jn(t,s),jn(t,s+1))},Jn=function(t,s,i){var e,n,r=tmpLine1,h=tmpLine2;if(kn(jn(t,s+1),jn(t,s),jn(t,i))&&$n(jn(t,s-1),jn(t,s),jn(t,i)))return!1;n=Wn(jn(t,s),jn(t,i));for(var o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&kn(jn(t,s),jn(t,i),jn(t,o+1))&&$n(jn(t,s),jn(t,i),jn(t,o))&&(r[0]=jn(t,s),r[1]=jn(t,i),h[0]=jn(t,o),h[1]=jn(t,o+1),e=On(r,h),Wn(jn(t,s),e)<n))return!1;return!0},Yn=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&Fn(jn(t,s),jn(t,i),jn(t,e),jn(t,e+1)))return!1;return!0},Xn=function(t,s,i,e){var n=e||[];if(Vn(n),s<i)for(var r=s;r<=i;r++)n.push(t[r]);else{for(r=0;r<=i;r++)n.push(t[r]);for(r=s;r<t.length;r++)n.push(t[r])}return n},Zn=function(t){for(var s=[],i=[],e=[],n=[],r=Number.MAX_VALUE,h=0;h<t.length;++h)if(zn(t,h))for(var o=0;o<t.length;++o)if(Jn(t,h,o)){i=Zn(Xn(t,h,o,n)),e=Zn(Xn(t,o,h,n));for(var a=0;a<e.length;a++)i.push(e[a]);i.length<r&&(s=i,r=i.length,s.push([jn(t,h),jn(t,o)]))}return s},Kn=function(t){var s=Zn(t);return s.length>0?Qn(t,s):[t]},Qn=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var n=s[e],r=0;r<i.length;r++){var h=Qn(i[r],n);if(h){i.splice(r,1),i.push(h[0],h[1]);break}}return i}return n=s,e=t.indexOf(n[0]),r=t.indexOf(n[1]),-1!==e&&-1!==r&&[Xn(t,e,r),Xn(t,r,e)]},tr=function(t){var s,i=t;for(s=0;s<i.length-1;s++)for(var e=0;e<s-1;e++)if(Fn(i[s],i[s+1],i[e],i[e+1]))return!1;for(s=1;s<i.length-2;s++)if(Fn(i[0],i[i.length-1],i[s],i[s+1]))return!1;return!0},sr=function(t,s,i,e,n){n=n||0;var r=s[1]-t[1],h=t[0]-s[0],o=r*t[0]+h*t[1],a=e[1]-i[1],l=i[0]-e[0],u=a*i[0]+l*i[1],c=r*l-a*h;return rr(c,0,n)?[0,0]:[(l*o-h*u)/c,(r*u-a*o)/c]},ir=function(t,s,i,e,n,r,h){r=r||100,h=h||0,n=n||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],w=[],S=t,b=t;if(b.length<3)return s;if(++h>r)return console.warn("quickDecomp: max level ("+r+") reached."),s;for(var v=0;v<t.length;++v)if(zn(S,v)){i.push(S[v]),u=c=Number.MAX_VALUE;for(var M=0;M<t.length;++M)Ln(jn(S,v-1),jn(S,v),jn(S,M))&&$n(jn(S,v-1),jn(S,v),jn(S,M-1))&&(l=sr(jn(S,v-1),jn(S,v),jn(S,M),jn(S,M-1)),Nn(jn(S,v+1),jn(S,v),l)&&(f=Wn(S[v],l))<c&&(c=f,a=l,m=M)),Ln(jn(S,v+1),jn(S,v),jn(S,M+1))&&$n(jn(S,v+1),jn(S,v),jn(S,M))&&(l=sr(jn(S,v+1),jn(S,v),jn(S,M),jn(S,M+1)),Ln(jn(S,v-1),jn(S,v),l)&&(f=Wn(S[v],l))<u&&(u=f,o=l,p=M));if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),v<p?(Un(y,S,v,p+1),y.push(l),w.push(l),0!==m&&Un(w,S,m,S.length),Un(w,S,0,v+1)):(0!==v&&Un(y,S,v,S.length),Un(y,S,0,p+1),y.push(l),w.push(l),Un(w,S,m,v+1));else{if(m>p&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(M=m;M<=p;++M)kn(jn(S,v-1),jn(S,v),jn(S,M))&&$n(jn(S,v+1),jn(S,v),jn(S,M))&&(f=Wn(jn(S,v),jn(S,M)))<d&&Yn(S,v,M)&&(d=f,g=M%t.length);v<g?(Un(y,S,v,g+1),0!==g&&Un(w,S,g,b.length),Un(w,S,0,v+1)):(0!==v&&Un(y,S,v,b.length),Un(y,S,0,g+1),Un(w,S,g,v+1))}return y.length<w.length?(ir(y,s,i,e,n,r,h),ir(w,s,i,e,n,r,h)):(ir(w,s,i,e,n,r,h),ir(y,s,i,e,n,r,h)),s}return s.push(t),s},er=function(t,s){for(var i=0,e=t.length-1;t.length>3&&e>=0;--e)Bn(jn(t,e-1),jn(t,e),jn(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},nr=function(t,s){for(var i=t.length-1;i>=1;--i)for(var e=t[i],n=i-1;n>=0;--n)hr(e,t[n],s)&&t.splice(i,1)},rr=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},hr=function(t,s,i){return rr(t[0],s[0],i)&&rr(t[1],s[1],i)};lineInt=On,lineSegmentsIntersect=Fn,triangleArea=Dn,isLeft=Ln,isLeftOn=kn,isRight=Nn,isRightOn=$n,collinear=Bn,sqdist=Wn,polygonAt=jn,polygonClear=Vn,polygonAppend=Un,polygonMakeCCW=Hn,polygonReverse=qn,polygonIsReflex=zn,polygonCanSee=Jn,polygonCanSee2=Yn,polygonCopy=Xn,polygonGetCutEdges=Zn,polygonDecomp=Kn,polygonSlice=Qn,polygonIsSimple=tr,getIntersectionPoint=sr,polygonQuickDecomp=ir,polygonRemoveCollinearPoints=er,polygonRemoveDuplicatePoints=nr,scalar_eq=rr,points_eq=hr,tmpPoint1=[],tmpPoint2=[],tmpLine1=[],tmpLine2=[],self.bs={vs:Kn,Ms:ir,xs:tr,Ts:er,Gs:nr,Is:Hn}}{let ar=!1,lr=!1,ur="dev";const cr=Symbol("Construct internal API token");let fr=16;const dr=self._s=class{constructor(){throw TypeError("static class can't be instantiated")}static Cs(){if(fr<=0)throw new Error("cannot obtain internal API token");return--fr,cr}static Es(){ar=!0}static Ps(){return ar}static As(){lr=!0}static Rs(){return lr}static Os(t){ur=t}static Fs(){return ur}static Ds(){return"final"===ur}};dr.Ls=!1,dr.ks=!1,dr.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Ns={}}{const pr=self._s;pr.$s=class{constructor(t){this.Bs=t,this.Ws=new Map,this.js()}js(){let t=this.Bs;(t.startsWith("?")||t.startsWith("#"))&&(t=t.substr(1));const s=t.split("&");for(const t of s)this.Vs(t)}Vs(t){if(!t)return;if(!t.includes("="))return void this.Ws.set(t,null);const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Ws.set(i,e)}Us(){for(const t of this.Ws)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}Hs(t){return this.Ws.has(t)}qs(t){const s=this.Ws.get(t);return void 0===s?null:s}zs(){history.replaceState("",document.title,location.pathname+location.search)}Js(t){this.Bs=t,this.Ws.clear(),this.js()}},pr.Ys=new pr.$s(location.search),pr.Xs=new pr.$s(location.hash),pr.Ys.Hs("perf")&&(pr.Zs=!0),"dev"!==pr.Ys.qs("mode")&&pr.Os("final")}{let mr=function(t){const s=parseFloat(t);return wr.get(s)||(s>=13?"11":"NT "+t)};GetWindowsNTVersionName=mr;const gr=self._s,yr="(unknown)";gr.Ks={Qs:yr,ti:yr,si:yr,ii:yr,ei:NaN,ni:yr,ri:"browser",hi:!0,oi:!1,ai:!1,li:!1,ci:async()=>{}};const wr=new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]]),Sr=navigator.userAgent,br=navigator.userAgentData;if(br&&br.brands.length>0){let Mr=function(t){let s="",i="",e="",n="";for(const r of t){const t=xr.get(r.brand);!s&&t&&(s=t,i=r.version);const h=Tr.get(r.brand);!e&&h&&(e=h,n=r.version)}s||"Chromium"!==e||(gr.Ks.si="Chromium",gr.Ks.ii=n),gr.Ks.si=s||yr,gr.Ks.ii=i||yr,gr.Ks.ni=e||yr};ReadBrandList=Mr,gr.Ks.Qs=br.platform,gr.Ks.oi=br.mobile,gr.Ks.hi=!gr.Ks.oi;const xr=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),Tr=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);Mr(br.brands);let Gr=!1;gr.Ks.ci=async()=>{if(!Gr)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);Mr(t.fullVersionList),"Windows"===gr.Ks.Qs?gr.Ks.ti=mr(t.platformVersion):gr.Ks.ti=t.platformVersion,Gr=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let Ir=function(t,s){const i=Array.isArray(t)?t:[t];for(const t of i){const i=t.exec(Sr);if(i){s(i);break}}};RunTest=Ir,Ir(/windows\s+nt\s+([\d\.]+)/i,(t=>{gr.Ks.Qs="Windows";const s=t[1];gr.Ks.ti=mr(s)})),Ir(/mac\s+os\s+x\s+([\d\._]+)/i,(t=>{gr.Ks.Qs="macOS",gr.Ks.ti=t[1].replace(/_/g,".")})),Ir(/CrOS/,(()=>{gr.Ks.Qs="Chrome OS"})),Ir(/linux|openbsd|freebsd|netbsd/i,(()=>{gr.Ks.Qs="Linux"})),Ir(/android/i,(()=>{gr.Ks.Qs="Android"})),Ir(/android\s+([\d\.]+)/i,(t=>{gr.Ks.Qs="Android",gr.Ks.ti=t[1]})),gr.Ks.Qs===yr&&(Ir(/(iphone|ipod|ipad)/i,(t=>{gr.Ks.Qs="iOS"})),Ir([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],(t=>{gr.Ks.Qs="iOS",gr.Ks.ti=t[1].replace(/_/g,".")})));const _r=/chrome\//i.test(Sr),Cr=/chromium\//i.test(Sr),Er=/edg\//i.test(Sr),Pr=/OPR\//.test(Sr),Ar=/nwjs/i.test(Sr),Rr=/safari\//i.test(Sr),Or=/webkit/i.test(Sr);Er||Pr||Ir(/chrome\/([\d\.]+)/i,(t=>{gr.Ks.si="Chrome",gr.Ks.ii=t[1],gr.Ks.ni="Chromium"})),Ir(/edg\/([\d\.]+)/i,(t=>{gr.Ks.si="Edge",gr.Ks.ii=t[1],gr.Ks.ni="Chromium"})),Ir(/OPR\/([\d\.]+)/,(t=>{gr.Ks.si="Opera",gr.Ks.ii=t[1],gr.Ks.ni="Chromium"})),Ir(/chromium\/([\d\.]+)/i,(t=>{gr.Ks.si="Chromium",gr.Ks.ii=t[1],gr.Ks.ni="Chromium"})),Ir(/nwjs\/[0-9.]+/i,(t=>{gr.Ks.si="NW.js",gr.Ks.ii=t[1],gr.Ks.ni="Chromium",gr.Ks.ri="nwjs"})),Ir(/firefox\/([\d\.]+)/i,(t=>{gr.Ks.si="Firefox",gr.Ks.ii=t[1],gr.Ks.ni="Gecko"})),!Rr||_r||Cr||Er||Pr||Ar||(gr.Ks.si="Safari",gr.Ks.ni="WebKit",Ir(/version\/([\d\.]+)/i,(t=>{gr.Ks.ii=t[1]})),Ir(/crios\/([\d\.]+)/i,(t=>{gr.Ks.si="Chrome for iOS",gr.Ks.ii=t[1]})),Ir(/fxios\/([\d\.]+)/i,(t=>{gr.Ks.si="Firefox for iOS",gr.Ks.ii=t[1]})),Ir(/edgios\/([\d\.]+)/i,(t=>{gr.Ks.si="Edge for iOS",gr.Ks.ii=t[1]}))),gr.Ks.ni===yr&&Or&&(gr.Ks.ni="WebKit"),"Android"===gr.Ks.Qs&&"Safari"===gr.Ks.si&&(gr.Ks.si="Stock");const Fr=new Set(["Windows","macOS","Linux","Chrome OS"]).has(gr.Ks.Qs)||"nwjs"===gr.Ks.ri;gr.Ks.hi=Fr,gr.Ks.oi=!Fr}"Chrome"===gr.Ks.si&&"browser"===gr.Ks.ri&&/wv\)/.test(Sr)&&(gr.Ks.ri="webview"),"nwjs"!==gr.Ks.ri&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(gr.Ks.ri="webapp"),gr.Ks.ei=parseFloat(gr.Ks.ii);const vr="macOS"===gr.Ks.Qs&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2;vr&&(gr.Ks.Qs="iOS",gr.Ks.ti=gr.Ks.ii,gr.Ks.hi=!1,gr.Ks.oi=!0,gr.Ks.li=!0),gr.Ks.ai="macOS"===gr.Ks.Qs||"iOS"===gr.Ks.Qs}{let Dr=function(t){return new Promise(((s,i)=>{t.onsuccess=()=>s(t.result),t.onerror=()=>i(t.error)}))},Lr=function(t){return new Promise(((s,i)=>{t.oncomplete=()=>s(),t.onerror=()=>i(t.error),t.onabort=()=>i(t.error)}))},kr=function(t,s){return zr(t,s)},Nr=function(t,s){return zr(t,s,!0)},$r=function(t){Br(t);let s=Ur.get(t);return s instanceof Promise||(s=Jr(t),Ur.set(t,s),s.catch((s=>Ur.delete(t)))),s},Br=function(t){if("string"!=typeof t)throw new TypeError("expected string")},Wr=function(t,s){const i=t.objectStore(Vr).openCursor();return new Promise((t=>{const e=[];i.onsuccess=i=>{const n=i.target.result;if(n){switch(s){case"entries":e.push([n.key,n.value]);break;case"keys":e.push(n.key);break;case"values":e.push(n.value)}n.continue()}else t(e)}}))};s=Dr,a=Lr,c=kr,i=Nr,l=$r,f=Br,d=Wr;const jr=2,Vr="keyvaluepairs",Ur=new Map,Hr="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,qr="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function zr(t,s,i=!1,e=!0){const n=await $r(t);try{return s(n.transaction([Vr],i?"readwrite":"readonly"))}catch(n){if(e&&"InvalidStateError"===n.name)return Ur.delete(t),zr(t,s,i,!1);throw n}}async function Jr(t){Br(t);const s=indexedDB.open(t,jr);return s.addEventListener("upgradeneeded",(s=>{try{s.target.result.createObjectStore(Vr)}catch(s){console.error(`Failed to create objectstore for database ${t}`,s)}})),Dr(s)}class Yr{constructor(t){Br(t),this.name=t}async ready(){await $r(this.name)}set(t,s){return Br(t),Nr(this.name,(async i=>{const e=Dr(i.objectStore(Vr).put(s,t)),n=Lr(i);await Promise.all([n,e])}))}get(t){return Br(t),kr(this.name,(async s=>{const i=Dr(s.objectStore(Vr).get(t)),e=Lr(s),[n,r]=await Promise.all([e,i]);return r}))}delete(t){return Br(t),Nr(this.name,(async s=>{const i=Dr(s.objectStore(Vr).delete(t)),e=Lr(s);await Promise.all([e,i])}))}clear(){return Nr(this.name,(async t=>{const s=Dr(t.objectStore(Vr).clear()),i=Lr(t);await Promise.all([i,s])}))}keys(){return kr(this.name,(async t=>{let s;s=qr?Dr(t.objectStore(Vr).getAllKeys()):Wr(t,"keys");const i=Lr(t),[e,n]=await Promise.all([i,s]);return n}))}values(){return kr(this.name,(async t=>{let s;s=Hr?Dr(t.objectStore(Vr).getAll()):Wr(t,"values");const i=Lr(t),[e,n]=await Promise.all([i,s]);return n}))}entries(){return kr(this.name,(async t=>{const s=Wr(t,"entries"),i=Lr(t),[e,n]=await Promise.all([i,s]);return n}))}}self.fi=Yr}{let Xr=function(t){throw new Error(`"${t}" is not implemented`)},Zr=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},Kr=function(t){return"object"==typeof t?new Promise((s=>{const{port1:i,port2:e}=new MessageChannel;e.onmessage=t=>s(t.data),i.postMessage(t)})):Promise.resolve(t)};r=Xr,a=Zr,o=Kr;const Qr=self.fi,th=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];class sh{constructor(t){this.di=t,this.pi=!this.di,this.pi||"undefined"!=typeof indexedDB||(this.pi=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.mi=new Map}gi(t){if(!this.pi)for(const s of th)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.pi=!0;break}}async yi(t){const s=this.mi.get(t),i=await Kr(s);return void 0===i?null:i}async wi(t,s){s=await Kr(s),this.mi.set(t,s)}Si(t){this.mi.delete(t)}bi(){this.mi.clear()}Mi(){return Array.from(this.mi.keys())}xi(){return this.pi}Ti(){return this.mi}Gi(t){this.mi=t}async getItem(t,s){if(Zr(s),this.pi)return await this.yi(t);let i;try{i=await this.di.get(t)}catch(s){return this.gi(s),this.pi?await this.yi(t):(console.error(`Error reading '${t}' from storage, returning null: `,s),null)}return void 0===i?null:i}async setItem(t,s,i){if(Zr(i),void 0===s&&(s=null),this.pi)await this.wi(t,s);else try{await this.di.set(t,s)}catch(i){if(this.gi(i),!this.pi)throw i;await this.wi(t,s)}}async removeItem(t,s){if(Zr(s),this.pi)this.Si(t);else try{await this.di.delete(t)}catch(s){this.gi(s),this.pi?this.Si(t):console.error(`Error removing '${t}' from storage: `,s)}}async clear(t){if(Zr(t),this.pi)this.bi();else try{await this.di.clear()}catch(t){this.gi(t),this.pi?this.bi():console.error("Error clearing storage: ",t)}}async keys(t){if(Zr(t),this.pi)return this.Mi();let s=[];try{s=await this.di.keys()}catch(t){if(this.gi(t),this.pi)return this.Mi();console.error("Error getting storage keys: ",t)}return s}ready(t){return Zr(t),this.pi?Promise.resolve(!0):this.di.ready()}Ii(t){if(t._i)return new sh(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new Qr(s);return new sh(i)}}length(t){Xr("localforage.length()")}key(t,s){Xr("localforage.key()")}iterate(t,s){Xr("localforage.iterate()")}Ci(t){Xr("localforage.setDriver()")}config(t){Xr("localforage.config()")}Ei(t){Xr("localforage.defineDriver()")}Pi(){Xr("localforage.driver()")}supports(t){Xr("localforage.supports()")}dropInstance(){Xr("localforage.dropInstance()")}}self.localforage=new sh(new Qr("localforage"))}{const ih=self._s;if(ih.Ai={},ih.Ai.Ri=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");return void 0!==t.animate&&void 0!==t.animate([{opacity:"0"},{opacity:"1"}],1e3).reverse}catch(t){return!1}})(),ih.Ai.Oi="undefined"!=typeof HTMLDialogElement,ih.Ai.Fi=!!self.requestIdleCallback,ih.Ai.ImageBitmap=!!self.createImageBitmap,ih.Ai.ImageBitmapOptions=!1,ih.Ai.Di=!1,ih.Ai.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then((()=>{ih.Ai.ImageBitmapOptions=!0})).catch((()=>{ih.Ai.ImageBitmapOptions=!1}))}catch(eh){ih.Ai.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then((t=>{ih.Ai.Di=10===t.width&&10===t.height})).catch((()=>{ih.Ai.Di=!1}))}catch(nh){ih.Ai.Di=!1}}if(ih.Ai.Li=!(!navigator.clipboard||!navigator.clipboard.readText),ih.Ai.ki=!(!navigator.permissions||!navigator.permissions.query),ih.Ai.Ni=!1,ih.Ai.ki){const rh={name:"clipboard-read"};navigator.permissions.query(rh).then((()=>{ih.Ai.Ni=!0})).catch((()=>{ih.Ai.Ni=!1}))}ih.Ai.$i=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),ih.Ai.Bi="undefined"!=typeof Proxy,ih.Ai.Wi="undefined"!=typeof document&&void 0!==document.createElement("a").download,ih.Ai.ji="function"==typeof fetch,ih.Ai.Vi=!!(self.isSecureContext&&"Opera"!==ih.Ks.si&&navigator.storage&&navigator.storage.persist),ih.Ai.Ui=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),ih.Ai.Hi=(()=>{if("undefined"==typeof document)return!1;if("iOS"===ih.Ks.Qs)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),ih.Ai.ImageDecoder=void 0!==self.ImageDecoder,ih.Ai.zi=!!self.VideoEncoder,ih.Ai.Ji=!!self.showOpenFilePicker,ih.Ai.Yi=!!self.queryLocalFonts,ih.Ai.UserActivation=!!navigator.userActivation,ih.Ai.Xi=!1,(async()=>{let t;"undefined"==typeof document?t=new OffscreenCanvas(32,32):(t=document.createElement("canvas"),t.width=32,t.height=32);const s=t.getContext("2d");s.fillStyle="blue",s.fillRect(0,0,32,32);let i=null;try{t.convertToBlob?i=await t.convertToBlob({type:"image/webp",quality:1}):t.toBlob&&(i=await new Promise((s=>t.toBlob(s,"image/webp",1)))),ih.Ai.Xi=i&&"image/webp"===i.type}catch(t){ih.Ai.Xi=!1}})()}{const hh=self._s;if(!String.prototype.trimStart){const oh=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(oh,"")}}if(!String.prototype.trimEnd){const ah=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(ah,"")}}if(String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(hh.Zi(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),!Array.prototype.flat){let lh=function(t,s){return t.reduce(((t,i)=>s>0&&Array.isArray(i)?(Array.prototype.push.apply(t,lh(i,s-1)),t):(t.push(i),t)),[])};arrayFlat=lh,Array.prototype.flat=function(t=1){return lh(this,t)}}Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise(((t,s)=>navigator.webkitTemporaryStorage.queryUsageAndQuota(((s,i)=>t({usage:s,quota:i})),s)))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let uh=function(t){let s="Assertion failure: "+t+"\n\nStack trace:\n"+ch.Ki();console.error(s)};assertFail=uh;const ch=self._s;self.assert=function(t,s){t||uh(s)}}{const fh=self._s,dh=self.Ns;fh.Qi=function(t){return"number"==typeof t},fh.te=function(t){return fh.Qi(t)&&isFinite(t)},fh.se=function(t){if(!fh.Qi(t))throw new TypeError("expected number")},fh.ie=function(t){fh.ee(t)},fh.ne=function(t,s,i){if(!fh.Qi(t)||isNaN(t)||s>t||i<t)throw new RangeError("number outside of range")},fh.re=function(...t){for(let s of t);},fh.he=function(t){if(!fh.te(t))throw new TypeError("expected finite number")},fh.oe=function(t){fh.ee(t)},fh.ae=function(...t){for(let s of t);},fh.le=function(t){return"string"==typeof t},fh.ue=function(t){if(!fh.le(t))throw new TypeError("expected string")},fh.ce=function(t){fh.ee(t)},fh.fe=function(...t){for(let s of t);},fh.de=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},fh.pe=function(t){if(!fh.de(t))throw new TypeError("expected simple object")},fh.me=function(t){if(!fh.ee(t)&&!fh.de(t))throw new TypeError("expected simple object")},fh.ge=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},fh.ye=function(t){if(!fh.ge(t))throw new TypeError("expected object")},fh.we=function(t){fh.ee(t)},fh.Se=function(...t){for(let s of t);},fh.be=function(t){return fh.ve(t,Blob)&&"string"==typeof t.name},fh.Me=function(t){if(!fh.be(t))throw new TypeError("expected file")},fh.xe=function(t){fh.ee(t)},fh.Te=function(t){return Array.isArray(t)},fh.Ge=function(t){if(!fh.Te(t))throw new TypeError("expected array")},fh.Ie=function(t){fh.ee(t)},fh._e=function(...t){for(let s of t);},fh.Ce=function(t){return!(!fh.Te(t)||t.length&&!fh.Te(t[0]))},fh.Ee=function(t){if(!fh.Ce(t))throw new TypeError("expected 2d array");for(let s of t)if(!fh.Te(s))throw new TypeError("expected 2d array")},fh.Pe=function(t){fh.ee(t)},fh.Ae=function(t){return"function"==typeof t},fh.Re=function(t,s){if(!fh.Ae(t))throw new TypeError("expected function");if(!fh.ee(s)&&t!==s)throw new TypeError("expected same function reference")},fh.Oe=function(t){fh.ee(t)},fh.Fe=function(...t){for(let s of t);},fh.De=function(t,...s){if(!fh.Ae(t))throw new TypeError("expected function");if(!s.length)throw new Error("missing comparison functions");for(let i of s)if(!fh.ee(i)&&t===i)return;throw new TypeError("expected same function reference")},fh.Le=function(...t){if(!fh.ee(t))for(let s of t);},fh.ke=function(t,s){return t instanceof s},fh.Ne=function(t,...s){for(let i of s)if(fh.ke(t,i))return!0;return!1},fh.$e=function(t,s){if(!fh.ke(t,s))throw new TypeError("unexpected type")},fh.Be=function(t,s){fh.ee(t)},fh.We=function(t,...s){for(let t of s);},fh.je=function(t,...s){if(!fh.Ne(t,...s))throw new TypeError("unexpected type")},fh.Ve=function(t,...s){if(!fh.ee(t)&&!fh.Ne(t,...s))throw new TypeError("unexpected type")},fh.Ue=function(t,s){for(let i of t)if(!fh.ke(i,s))return!1;return!0},fh.He=function(t){for(let s of t)if(!fh.te(s))return!1;return!0},fh.qe=function(t,s){for(let s of t);},fh.ze=function(t,s){if(!fh.ee(t))for(let s of t);},fh.Je=function(t,s){if(!fh.ee(t))for(let s of t);},fh.Ye=function(t,...s){for(let s of t);},fh.Xe=function(t,...s){if(!fh.ee(t))for(let s of t);},fh.Ze=function(t,s){return!(fh.ee(t)||!fh.le(t.nodeName))&&(!s||fh.Ke(t.nodeName,s))},fh.Qe=function(t,s){if(fh.ee(t)||!fh.le(t.nodeName))throw new TypeError("expected DOM node");if(s&&!fh.Ke(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},fh.tn=function(t,s){fh.ee(t)},fh.sn=function(t,s){return!(fh.ee(t)||!fh.le(t.tagName))&&(!s||fh.Ke(t.tagName,s))},fh.en=function(t,s){if(fh.ee(t)||!fh.le(t.tagName))throw new TypeError("expected HTML element");if(s&&!fh.Ke(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},fh.nn=function(t,s){fh.ee(t)},fh.rn=function(t){return fh.sn(t,"img")||fh.sn(t,"canvas")||fh.sn(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},fh.hn=function(t){if(!fh.rn(t))throw new TypeError("expected drawable")},fh.an=function(t){fh.ee(t)},fh.ln=function(t){return t instanceof ImageData||fh.rn(t)},fh.un=function(t){if(!fh.ln(t))throw new TypeError("expected drawable or image data")},fh.cn=function(t){if(!fh.ee(t)&&!fh.ln(t))throw new TypeError("expected drawable or image data")},fh.fn=function(t){return"string"==typeof t||fh.dn&&t instanceof fh.dn||t instanceof fh.pn},fh.mn=function(t){if(!fh.fn(t))throw new TypeError("expected string-like")},fh.gn=function(t){fh.ee(t)},fh.yn=function(...t){for(let s of t);},fh.wn=function(){throw new Error("must be overridden")},fh.Sn=function(){throw new Error("not yet implemented")},fh.bn=function(t){return t.constructor===function*(){}.constructor},fh.vn=function(t){if(!fh.bn(t))throw new Error("expected generator function")},fh.Mn=function(t){return"function"===t[Symbol.iterator]},fh.xn=function(t){if(!fh.Mn(t))throw new Error("expected iterable")},fh.Tn=function(t){return!fh.ee(t)},fh.ee=function(t){return null==t},fh.Gn=function(t){let s=t[0].constructor;for(let i of t)if(i.constructor!==s)return!1;return s},fh.In=function(t,s){for(let i of t)if(!(i instanceof s))return!1;return!0};const ph=Object.getPrototypeOf(Uint8Array);fh._n=function(t){return fh.ke(t,ph)},fh.Cn=function(t){},fh.En=function(t){fh.Pn(t,ph)},fh.An=function(t,...s){if(!fh.Rn(t,...s))throw new TypeError("unexpected type")},fh.Rn=function(t,...s){for(const i of s)if(fh.ve(t,i))return!0;return!1},fh.Pn=function(t,s){if(!fh.ve(t,s))throw new TypeError("unexpected type")},fh.ve=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},dh.se=fh.se,dh.ie=fh.ie,dh.he=fh.he,dh.oe=fh.oe,dh.ue=fh.ue,dh.ce=fh.ce,dh.ye=fh.ye,dh.we=fh.we,dh.Ge=fh.Ge,dh.Ie=fh.Ie,dh.Re=fh.Re,dh.Oe=fh.Oe,dh.$e=fh.$e,dh.Be=fh.Be,dh.ee=fh.ee}{let mh=function(t,s){let i=bh.getType(t),e=bh.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},gh=function(t){console.warn("[Defence] "+t+" @",bh.Ki())},yh=function(){if(Ch=-1,xh.size>0||Th.size>0){let t=[...new Set([...xh.keys()].map((t=>bh.getName(t))))].join(",");console.warn(`An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${t}`),xh.clear(),Th.clear()}},wh=function(t){let s=new Set;for(let i in t)s.add(i);return s},Sh=function(t,s){let i=wh(s),e=Eh.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);bh.On(s,[...i]),s.length&&console.warn(`[Defence] '${bh.getName(t)}' constructor creates inconsistent properties: ${s.join(", ")}`)}else Eh.set(t,i)};isValidTypeChange=mh,logDefendedObjectWarning=gh,CheckDefendedObjectsUsedCorrectly=yh,getObjectPropertySet=wh,VerifyObjectPropertiesConsistent=Sh;const bh=self._s,vh=new Map;let Mh;bh.Fn=function(t,s){console.log(`%c${t}`,`font-weight: bold; color:${s}`)},bh.Dn=function(t,...s){vh.has(t)||vh.set(t,-1),-1===vh.get(t)&&vh.set(t,requestAnimationFrame((()=>{console.log(`%c${t}`,"font-weight: bold",...s),vh.set(t,-1)})))},bh.Ln=function(t){performance.mark(t),Mh||(Mh=new Map),Mh.has(t)||Mh.set(t,{kn:0,total:0,Nn:0,$n:1,toString:function(){return`${t} :: current => ${this.kn.toPrecision(3)} :: average => ${this.Nn.toPrecision(3)} :: calls => ${this.$n}`}})},bh.Bn=function(t){performance.measure(`measure-${t}`,t);const s=performance.getEntriesByName(`measure-${t}`)[0],i=Mh.get(t);i.kn=s.duration,i.total+=i.kn,i.Nn=i.total/i.$n,console.log(i.toString()),i.$n++,performance.clearMarks(t),performance.clearMeasures(`measure-${t}`)},bh.Ki=function(){return(new Error).stack},bh.Wn=function(){},bh.cast=function(t,s){return t&&t instanceof s?t:null},bh.getName=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":bh.Qi(t)?"<number>":bh.le(t)?"<string>":bh.Te(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":bh.Ae(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},bh.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},bh.range=function*(t,s){if(!isFinite(Math.abs(t-s)))throw new Error("Invalid parameters");if(t>s)for(let i=t-1;i>=s;i--)yield i;else for(let i=t;i<s;i++)yield i};let xh=new Map,Th=new Map,Gh=new WeakMap,Ih=new WeakMap;bh.jn={};const _h=new Set(["then","splice"]);bh.jn.get=function(t,s){return s in t||"symbol"==typeof s||_h.has(s)||gh(`Accessed missing property '${s}' from defended object '${bh.getName(t)}', returning undefined`),Ih.has(t)&&"symbol"!=typeof s&&!_h.has(s)&&gh(`Accessed property '${s}' on a released object '${bh.getName(t)}'\nObject was originally released at: ${Ih.get(t)})\nCall stack at access: `),t[s]},bh.jn.set=function(t,s,i){return s in t||xh.has(t)||gh(`Set non-existent property '${s}' to '${i}' on defended object '${bh.getName(t)}'`),mh(t[s],i)||xh.has(t)||gh(`Set '${bh.getType(t[s])}' property '${s}' to type '${bh.getType(i)}' on defended object '${bh.getName(t)}'`),Ih.has(t)&&gh(`Set property '${s}' on a released object '${bh.getName(t)}'\nObject was originally released at: ${Ih.get(t)})\nCall stack at access: `),t[s]=i,!0},bh.jn.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${bh.getName(t)}'`)},bh.jn.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${bh.getName(t)}'`)},bh.jn.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${bh.getName(t)}'`)};let Ch=-1;bh.Vn=class{constructor(){if(!bh.ks||!bh.Ai.Bi)return;let t=new.target,s=Object.create(t.prototype),i=new Proxy(s,bh.jn);return xh.set(s,i),Th.set(i,s),Gh.set(i,s),-1===Ch&&(Ch=requestAnimationFrame(yh)),i}},bh.Un=function(t){if(bh.ks&&bh.Ai.Bi&&t instanceof bh.Vn){if(!Th.has(t))return t;let s=Th.get(t);return Th.delete(t),xh.delete(s),t}return bh.Ls?Object.seal(t):t},bh.Hn=function(t,...s){let i;try{i=new t(...s)}catch(t){throw Th.clear(),xh.clear(),t}return bh.ks&&Sh(t,i),bh.Un(i)},bh.qn=function(t){let s=Gh.get(t);s&&Ih.set(s,bh.Ki())},bh.zn=function(t){let s=Gh.get(t);return!!s&&!!Ih.get(s)};let Eh=new Map;bh.Jn=class{constructor(t){this.Yn="",t&&this.start(t)}start(t){bh.Zs&&(this.Yn=t,performance.mark(this.Yn+"-Start"))}end(){bh.Zs&&(performance.mark(this.Yn+"-End"),performance.measure(this.Yn,this.Yn+"-Start",this.Yn+"-End"))}next(t){bh.Zs&&(this.end(),this.Yn=t,performance.mark(this.Yn+"-Start"))}}}{let Ph=function(t){return 0===t&&1/t<0};isNegativeZero=Ph;const Ah=self._s,Rh=2*Math.PI,Oh=Math.PI/180,Fh=180/Math.PI;Ah.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0===e)return i;if(t<s){const n=i-(s-t)%e;return n===i?0:n}return s+(t-s)%e},Ah.Xn=function(t,s,i,e,n){const r=i-s;return 0===r&&0===e?t:(t-s)*(n-e)/r+e},Ah.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},Ah.Zn=function(t,s,i){return t<s?s:t>i?i:t},Ah.Kn=function(t){return(t%=Rh)<0&&(t+=Rh),t},Ah.Qn=function(t){return t*Oh},Ah.tr=function(t){return t*Fh},Ah.sr=function(t,s){return Math.sqrt(t*t+s*s)},Ah.ir=function(t,s,i){return Math.sqrt(t*t+s*s+i*i)},Ah.er=function(t,s,i,e){return Ah.sr(i-t,e-s)},Ah.nr=function(t,s,i,e){const n=i-t,r=e-s;return n*n+r*r},Ah.rr=function(t,s,i,e){return Math.atan2(e-s,i-t)},Ah.hr=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),n=i*Math.sin(s)+e*Math.cos(s);return n>=1?0:n<=-1?Math.PI:Math.acos(n)},Ah.ar=function(t,s,i){let e=Math.sin(t),n=Math.cos(t),r=Math.sin(s),h=Math.cos(s);return Math.acos(e*r+n*h)>i?n*r-e*h>0?Ah.Kn(t+i):Ah.Kn(t-i):Ah.Kn(s)},Ah.lr=function(t,s){let i=Math.sin(t);return Math.cos(t)*Math.sin(s)-i*Math.cos(s)<=0},Ah.ur=function(t,s,i,e=0){let n=Ah.hr(t,s);const r=Rh*e;return Ah.lr(s,t)?Ah.Kn(t+(n+r)*i):Ah.Kn(t-(n+r)*i)},Ah.cr=function(t,s,i,e=0){const n=Ah.hr(t,s),r=Rh*e;return Ah.lr(s,t)?Ah.Kn(t+(n+r)*i):Ah.Kn(t+(Rh-n+r)*i)},Ah.dr=function(t,s,i,e=0){const n=Ah.hr(t,s),r=Rh*e;return Ah.lr(s,t)?Ah.Kn(t-(-Rh+n-r)*i):Ah.Kn(t-(n+r)*i)},Ah.pr=function(t,s){const i=Ah.hr(t,s);return Ah.lr(t,s)?Ah.Kn(s-i):Ah.Kn(s+i)},Ah._t=function(t,s,i){return t+i*(s-t)},Ah.mr=function(t,s,i){return t===s?0:(i-t)/(s-t)},Ah.gr=function(t,s,i,e,n){return Ah._t(e,n,Ah.mr(t,s,i))},Ah.yr=function(t,s,i,e){return Ah._t(Ah._t(t,s,e),Ah._t(s,i,e),e)},Ah.wr=function(t,s,i,e,n){return Ah._t(Ah.yr(t,s,i,n),Ah.yr(s,i,e,n),n)},Ah.Sr=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},Ah.br=function(t){return t>0&&!(t-1&t)},Ah.vr=function(t){--t;for(let s=1;s<32;s<<=1)t|=t>>s;return t+1},Ah.Mr=function(t,s){return Math.round(t*s)/s},Ah.Tr=function(t,s){return Math.floor(t*s)/s},Ah.Gr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},Ah.Ir=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},Ah.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;e>=0&&"0"===i.charAt(e);--e);return e>=0&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},Ah._r=function(t,s,i){return Ah.Zn(t,0,255)|Ah.Zn(s,0,255)<<8|Ah.Zn(i,0,255)<<16};const Dh=1024,Lh=1023,kh=16384,Nh=8191,$h=-8192;Ah.Cr=function(t,s,i,e){return(t=Ah.Zn(Math.floor(1024*t),-8192,8191))<0&&(t+=16384),(s=Ah.Zn(Math.floor(1024*s),-8192,8191))<0&&(s+=16384),(i=Ah.Zn(Math.floor(1024*i),-8192,8191))<0&&(i+=16384),-(16384*t*16384*1024+16384*s*1024+1024*i+(e=Ah.Zn(Math.floor(1023*e),0,1023)))},Ah.Er=function(t,s,i){return Ah.Cr(t,s,i,1)},Ah.Pr=function(t){if(t>=0)return(255&t)/255;{let s=Math.floor(-t/274877906944);return s>8191&&(s-=16384),s/1024}},Ah.Ar=function(t){if(t>=0)return((65280&t)>>8)/255;{let s=Math.floor(-t%274877906944/16777216);return s>8191&&(s-=16384),s/1024}},Ah.Rr=function(t){if(t>=0)return((16711680&t)>>16)/255;{let s=Math.floor(-t%16777216/1024);return s>8191&&(s-=16384),s/1024}},Ah.Or=function(t){return Ph(t)?0:t>=0?1:Math.floor(-t%1024)/1023},Ah.Fr=function(t,s){for(t=Math.floor(t),s=Math.floor(s);0!==s;){let i=s;s=t%s,t=i}return t};const Bh=[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]];Ah.Dr=function(t,s){if((t=Math.floor(t))===(s=Math.floor(s)))return[1,1];for(let i of Bh){let e=t/i[0]*i[1];if(Math.abs(s-e)<1)return i.slice(0);if(e=t/i[1]*i[0],Math.abs(s-e)<1)return[i[1],i[0]]}let i=Ah.Fr(t,s);return[t/i,s/i]},Ah.Lr=function(t,s,i,e,n,r,h,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(n,h),c=Math.max(n,h);if(l<u||a>c)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||f>m)return!1;const g=n-t+h-i,y=r-s+o-e,w=i-t,S=e-s,b=h-n,v=o-r,M=Math.abs(S*b-v*w),x=b*y-v*g;if(Math.abs(x)>M)return!1;const T=w*y-S*g;return Math.abs(T)<=M},Ah.kr=function(t,s,i,e,n,r,h,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(r<f||n>d)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||h>m)return!1;const g=a-t+u-i,y=l-s+c-e,w=i-t,S=e-s,b=u-a,v=c-l,M=Math.abs(S*b-v*w),x=b*y-v*g;if(Math.abs(x)>M)return!1;const T=w*y-S*g;return Math.abs(T)<=M},Ah.Nr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=n.$r(),u=n.Br(),c=n.Wr(),f=n.jr(),d=n.Vr(),p=n.Ur(),m=n.Hr(),g=n.qr();return Ah.kr(t,s,i,e,r,h,o,a,l,u,c,f)||Ah.kr(t,s,i,e,r,h,o,a,c,f,d,p)||Ah.kr(t,s,i,e,r,h,o,a,d,p,m,g)||Ah.kr(t,s,i,e,r,h,o,a,m,g,l,u)},Ah.zr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e);let l=0;for(let u=n.length-4;l<=u;l+=2)if(Ah.kr(t,s,i,e,r,h,o,a,n[l],n[l+1],n[l+2],n[l+3]))return!0;return Ah.kr(t,s,i,e,r,h,o,a,n[l],n[l+1],n[0],n[1])};const Wh=2,jh=1e-6;Ah.Jr=function(t,s,i,e,n,r,h,o){const a=i-t,l=o-r,u=a*l-(e-s)*(h-n);if(0===u)return 2;const c=((s-e)*(h-t)+a*(o-s))/u;return 0<c&&c<1.000001?(l*(h-t)+(n-h)*(o-s))/u:2},Ah.Yr=function(t,s,i,e,n,r,h,o,a){const l=(h-n)*a,u=(o-r)*a;return Ah.Jr(t,s,i,e,n-l,r-u,h+l,o+u)},Ah.Xr=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,w=u*f+c*d,S=1/(p*y-m*m),b=(y*g-m*w)*S,v=(p*w-m*g)*S;return b>=0&&v>=0&&b+v<=1},Ah.Zr=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,w=f*u+d*c,S=p*g-m*m,b=(g*y-m*w)/S,v=(p*w-m*y)/S;return[1-b-v,b,v]},Ah.Kr=function(t,s,i,e,n,r,h,o,a,l,u,c){return[t*e+s*h+i*l,t*n+s*o+i*u,t*r+s*a+i*c]}}{const Vh=self._s;let Uh=null,Hh="";if("undefined"!=typeof document){Uh=document;const Zh=document.querySelector("base");Hh=Zh&&Zh.hasAttribute("href")?Zh.getAttribute("href"):"",Hh&&(Hh.startsWith("/")&&(Hh=Hh.substr(1)),Hh.endsWith("/")||(Hh+="/"))}Vh.Qr=function(){return Hh},Vh.th=function(){if(!Uh)return"";const t=Uh.location;return Vh.sh(t.origin+t.pathname)+Hh},Vh.sh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},Vh.ih=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},Vh.eh=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},Vh.nh=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},Vh.rh=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},Vh.hh=function(t){return t.replace(/\\/g,"/")},Vh.oh=function(t,s){return s===(t?Vh.eh(t).slice(1):"")},Vh.ah=function(t,s){let i,e;return Vh.be(t)&&(i=Vh.rh(t.name)),Vh.le(t)&&(i=Vh.rh(t)),Vh.be(s)&&(e=Vh.rh(s.name)),Vh.le(s)&&(e=Vh.rh(s)),i===e},Vh.uh=function(t){t=Vh.hh(t);let s=/^\w\:\//.exec(t);s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=t.replace(/\/{2,}/g,"/")).length>1&&"/"===t.slice(-1)&&(t=t.slice(0,-1));const i=t.lastIndexOf("/")+1;let e,n="",r=t,h="";i>0&&(n=t.slice(0,i),r=t.slice(i)),e=r;const o=r.lastIndexOf(".");return o>0&&(h=r.slice(o),e=r.slice(0,-h.length)),{dir:n,fh:r,name:e,root:s,ext:h,dh:s+n+r}},Vh.ph=function(t,s){return new Promise(((i,e)=>{self.setTimeout(i,t,s)}))},Vh.mh=function(t){try{t()}catch(t){Vh.Ls&&console.warn("Swallowed exception: ",t)}},Vh.gh=function(){},Vh.Ke=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},Vh.yh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},Vh.wh=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},Vh.Sh=function(t,s){t.length=s},Vh.bh=function(t){t&&0!==t.length&&Vh.Sh(t,0)},Vh.Mh=function(t){if(t){for(let s=0;s<t.length;s++){let i=t[s];Vh.Sh(i,0)}Vh.Sh(t,0)}},Vh.xh=function(t,s,i){s|=0;const e=t.length;if(!(s<=e))for(let n=e;n<s;++n)t.push(i)},Vh.Th=function(t,s,i){s|=0;const e=t.length;s<e?Vh.Sh(t,s):s>e&&Vh.xh(t,s,i)},Vh.Gh=function(t,s){Vh.bh(t),Vh.On(t,s)},Vh.On=function(t,s){if(s.length<1e4)t.push(...s);else for(let i=0,e=s.length;i<e;++i)t.push(s[i])},Vh.Ih=function(t,s){if((s=Math.floor(s))<0||s>=t.length)return;let i=t.length-1;for(let e=s;e<i;++e)t[e]=t[e+1];Vh.Sh(t,i)},Vh._h=function(t,s){let i=t.indexOf(s);i>=0&&t.splice(i,1)},Vh.Ch=function(t,s){let i=t.length;if(s.length!==i)return!1;for(let e=0;e<i;++e)if(t[e]!==s[e])return!1;return!0},Vh.Eh=function(t,s){let i=[],e=0;for(let n=0,r=t.length;n<r;++n){let r=t[n];s(r)?i.push(r):(t[e]=r,++e)}return Vh.Sh(t,e),i},Vh.Ph=function(t,s){const i=t.length;let e=0;for(let i=0,n=t.length;i<n;++i){let n=t[i];s.has(n)||(t[e++]=n)}return Vh.Sh(t,e),i-e},Vh.Ah=function(t,s){return t===Math.floor(t)&&t>=0&&t<s.length},Vh.Rh=function(t,s){if(!Vh.Ah(t,s))throw new RangeError("array index out of bounds")},Vh.Oh=function(t){return t.slice()},Vh.Fh=function(t,s){let i=[];for(let e of t)if(Vh.ge(e)){let t=s(e);if(!t)throw new Error("missing clone");if(t.constructor!==e.constructor)throw new Error("object is not a clone");i.push(t)}else Vh.Te(e)?i.push(Vh.Fh(e,s)):i.push(e);return i},Vh.Dh=function(t){let s=[];for(let i of t)s.push(i.slice());return s},Vh.Lh=function(t,s=" "){return t?t.split(s).map((t=>t.trim())).filter((t=>!!t)):[]},Vh.kh=function(t,s,i){const e=new Set;for(const n of t.values())s(n)&&(i?e.add(i(n)):e.add(n));return e},Vh.Nh=function(t,s){return t.union?t.union(s):new Set([...t,...s])},Vh.$h=function(t,s){for(const i of s)t.add(i);return t},Vh.Bh=function(t){for(let s of t)return s;return null},Vh.xor=function(t,s){return!t!=!s},Vh.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return t>i;case 5:return t>=i;default:return!1}},Vh.Wh=function(t){for(let s in t)if(t.hasOwnProperty(s))return!0;return!1},Vh.jh=function(t,s){return t.length?new Promise(((i,e)=>{const n=[];let r=0,h=!1;for(let o=0,a=t.length;o<a;++o)n.push(void 0),t[o].then((e=>{h||(n[o]=e,++r,r===t.length?i(n):s(r,t.length))})).catch((t=>{h=!0,e(t)}))})):Promise.resolve([])};let qh=[];Vh.Vh=function(t){qh.push(t)},Vh.Uh=function(){let t=0;for(let s of qh)t+=s();return Math.floor(t)};let zh=1;const Jh=new Map,Yh=new MessageChannel;Yh.port2.onmessage=function(t){const s=t.data,i=Jh.get(s);Jh.delete(s),i&&i(performance.now())},Vh.Hh=function(t){const s=zh++;return Jh.set(s,t),Yh.port1.postMessage(s),s},Vh.qh=function(t){Jh.delete(t)},Vh.zh=Vh.Hh,Vh.Jh=function(){return new Promise((t=>Vh.zh(t)))};const Xh=new Set;Vh.Yh=function(t){const s=self.requestAnimationFrame((async i=>{await Vh.Jh(),Xh.has(s)&&(Xh.delete(s),t(i))}));return Xh.add(s),s},Vh.Xh=function(t){Xh.has(t)&&(self.cancelAnimationFrame(t),Xh.delete(t))}}{const Kh=self._s;Kh.Zh=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},Kh.Kh=function(t){return!Kh.Zh(t)},Kh.Qh=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} ${t.statusText}`)},Kh.so=function(t,s){return fetch(t,s).then((t=>(Kh.Qh(t),t)))},Kh.io=function(t){return Kh.so(t).then((t=>t.text()))},Kh.eo=function(t){return Kh.so(t).then((t=>t.json()))},Kh.no=function(t){return Kh.so(t).then((t=>t.blob()))},Kh.ro=function(t){return Kh.so(t).then((t=>t.arrayBuffer()))},Kh.ho=function(t){return new Promise(((s,i)=>{const e=new Image;e.onload=()=>s(e),e.onerror=t=>i(t),e.src=t}))},Kh.oo=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise(((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsArrayBuffer(t)}))},Kh.ao=function(t){return"function"==typeof t.text?t.text():new Promise(((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsText(t)}))},Kh.lo=function(t){return Kh.ao(t).then((t=>JSON.parse(t)))},Kh.uo=async function(t,s){let i=URL.createObjectURL(t);try{const t=await Kh.ho(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof t.decode&&await t.decode(),t}finally{i&&URL.revokeObjectURL(i)}},Kh.co=function(t,s){if("undefined"!=typeof document&&"function"==typeof document.createElement){const i=document.createElement("canvas");return i.width=t,i.height=s,i}return new OffscreenCanvas(t,s)},Kh.fo=function(t,s,i){if("number"!=typeof i&&(i=1),s=s||"image/png",i=Kh.Zn(i,0,1),t.convertToBlob)return t.convertToBlob({type:s,quality:i});if(t.toBlob)return new Promise((e=>t.toBlob(e,s,i)));throw new Error("could not convert canvas to blob")},Kh.do=function(t,s,i){const e=Kh.co(t.width,t.height);return e.getContext("2d").drawImage(t,0,0),Kh.fo(e,s,i)},Kh.po=function(t,s,i){if(Kh.Ai.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then((t=>Kh.do(t,s,i)));if(Kh.Ai.ImageBitmap)return createImageBitmap(t).then((t=>Kh.do(t,s,i)));{const e=Kh.co(t.width,t.height);return e.getContext("2d").putImageData(t,0,0),Kh.fo(e,s,i)}},Kh.mo=function(t,s){t.clear();for(const i of s)t.add(i)},Kh.yo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},Kh.wo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},Kh.So=function t(s){if("object"==typeof s&&null!==s){if(s instanceof Set)return{_c3type_:"set",data:[...s].map((s=>t(s)))};if(s instanceof Map)return{_c3type_:"map",data:[...s].map((s=>[s[0],t(s[1])]))};{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},Kh.bo=function t(s){if("object"==typeof s&null!==s){if("set"===s._c3type_)return new Set(s.data.map((s=>t(s))));if("map"===s._c3type_)return new Map(s.data.map((s=>[s[0],t(s[1])])));{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},Kh.vo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const n of t)"-"===n?e>0&&(i=!0):i?(s+=n.toUpperCase(),i=!1):s+=n,++e;return s},Kh.Mo=function(t){return"object"==typeof t&&"function"==typeof t.next},Kh.xo=function(t,s){const i=[];if("function"==typeof s)for(let e=0;e<t;++e)i.push(s());else for(let e=0;e<t;++e)i.push(s);return i}}{let Qh=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},to=function(t,s,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};padTwoDigits=Qh,hueToRGB=to;const so=self._s,io=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,eo=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;so.To=class{constructor(t,s,i,e){this.Go=NaN,this.Io=NaN,this._o=NaN,this.Co=NaN,this.Go=0,this.Io=0,this._o=0,this.Co=0,t instanceof so.To?this.set(t):this.Eo(t||0,s||0,i||0,e||0)}Po(t,s,i){return this.Go=+t,this.Io=+s,this._o=+i,this.Zn(),this}Eo(t,s,i,e){return this.Go=+t,this.Io=+s,this._o=+i,this.Co=+e,this.Zn(),this}set(t){return this.Go=t.Go,this.Io=t.Io,this._o=t._o,this.Co=t.Co,this}S(t){return this.set(t)}add(t){this.Go+=t.Go,this.Io+=t.Io,this._o+=t._o,this.Co+=t.Co,this.Zn()}Ao(t,s,i,e=0){this.Go+=+t,this.Io+=+s,this._o+=+i,this.Co+=+e,this.Zn()}Ro(t){this.Oo(Math.max(this.Go,t.Go)-Math.min(this.Go,t.Go)),this.Fo(Math.max(this.Io,t.Io)-Math.min(this.Io,t.Io)),this.Do(Math.max(this._o,t._o)-Math.min(this._o,t._o)),this.Lo(Math.max(this.Co,t.Co)-Math.min(this.Co,t.Co)),this.Zn()}ko(t){this.Go=t.Go,this.Io=t.Io,this._o=t._o}Oo(t){this.Go=so.Zn(+t,0,1)}No(){return this.Go}Fo(t){this.Io=so.Zn(+t,0,1)}$o(){return this.Io}Do(t){this._o=so.Zn(+t,0,1)}Bo(){return this._o}Lo(t){this.Co=so.Zn(+t,0,1)}Wo(){return this.Co}clone(){return so.Hn(so.To,this.Go,this.Io,this._o,this.Co)}toArray(){return[this.Go,this.Io,this._o,this.Co]}jo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.Go,t[s++]=this.Io,t[s++]=this._o,t[s]=this.Co}Uo(t,s){t[s++]=this.Go,t[s++]=this.Io,t[s]=this._o}equals(t){return this.Go===t.Go&&this.Io===t.Io&&this._o===t._o&&this.Co===t.Co}Ho(t){return this.Go===t.Go&&this.Io===t.Io&&this._o===t._o}qo(t,s,i){return this.Go===t&&this.Io===s&&this._o===i}zo(t,s,i,e){return this.Go===t&&this.Io===s&&this._o===i&&this.Co===e}Jo(t,s){return t[s]===Math.fround(this.Go)&&t[s+1]===Math.fround(this.Io)&&t[s+2]===Math.fround(this._o)&&t[s+3]===Math.fround(this.Co)}Yo(t,s){return t[s]===Math.fround(this.Go)&&t[s+1]===Math.fround(this.Io)&&t[s+2]===Math.fround(this._o)}multiply(t){this.Go*=t.Go,this.Io*=t.Io,this._o*=t._o,this.Co*=t.Co}Xo(t){this.Go*=t,this.Io*=t,this._o*=t,this.Co*=t}Zo(){return this.Go*=this.Co,this.Io*=this.Co,this._o*=this.Co,this}Ko(){return this.Go/=this.Co,this.Io/=this.Co,this._o/=this.Co,this}Zn(){return this.Go=so.Zn(this.Go,0,1),this.Io=so.Zn(this.Io,0,1),this._o=so.Zn(this._o,0,1),this.Co=so.Zn(this.Co,0,1),this}Qo(t){this.Go=so.Pr(t),this.Io=so.Ar(t),this._o=so.Rr(t),this.Co=so.Or(t)}ta(t,s,i){return`rgb(${100*(so.te(t)?t:this.No())}%, ${100*(so.te(s)?s:this.$o())}%, ${100*(so.te(i)?i:this.Bo())}%)`}sa(t,s,i,e){return`rgba(${100*(so.te(t)?t:this.No())}%, ${100*(so.te(s)?s:this.$o())}%, ${100*(so.te(i)?i:this.Bo())}%, ${so.te(e)?e:this.Wo()})`}ia(){const t=Math.round(255*this.No()),s=Math.round(255*this.$o()),i=Math.round(255*this.Bo());return"#"+Qh(t.toString(16))+Qh(s.toString(16))+Qh(i.toString(16))}ea(t){if("string"!=typeof t)return!1;let s,i,e;if("#"===(t=t.trim()).charAt(0)&&(t=t.substr(1)),3===t.length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Oo(s),isFinite(i)&&this.Fo(i),isFinite(e)&&this.Do(e),this.Lo(1),!0}na(){return`${Math.round(255*this.No())}, ${Math.round(255*this.$o())}, ${Math.round(255*this.Bo())}`}ra(){return[Math.round(255*this.No()),Math.round(255*this.$o()),Math.round(255*this.Bo())]}ha(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Do(n),this.Lo(1),!0}oa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Do(n),this.Lo(1),!0}aa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Do(n),isFinite(r)&&this.Lo(r),!0}la(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Do(n),isFinite(r)&&this.Lo(r),!0}ua(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.oa(t):this.ha(t);if(t.startsWith("rgba("))return t.includes("%")?this.la(t):this.aa(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.ca(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.oa(t):4===s.length&&this.la(t):3===s.length?this.ha(t):4===s.length&&this.aa(t)}}return this.ea(t)}toJSON(){return[this.Go,this.Io,this._o,this.Co]}fa(t,s,i,e){let n,r,h;if(t%=360,s=so.Zn(s,0,100),i=so.Zn(i,0,100),e=so.Zn(e,0,1),t/=360,i/=100,0==(s/=100))n=r=h=i;else{const e=i<.5?i*(1+s):i+s-i*s,o=2*i-e;n=to(o,e,t+1/3),r=to(o,e,t),h=to(o,e,t-1/3)}return this.Oo(n),this.Fo(r),this.Do(h),this.Lo(e),this}ca(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=io.exec(s),e=eo.exec(s);return i&&4===i.length?(this.fa(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.fa(+i[1],+i[2],+i[3],+i[4]),0))}da(){const t=this.Go,s=this.Io,i=this._o,e=this.Co;return`hsla(${so.To.pa(t,s,i)}, ${so.To.ma(t,s,i)}%, ${so.To.ga(t,s,i)}%, ${e})`}ya(){const t=this.Go,s=this.Io,i=this._o;return[so.To.pa(t,s,i),so.To.ma(t,s,i),so.To.ga(t,s,i),this.Co]}wa(t){Array.isArray(t)&&(t.length<3||(this.Go=t[0],this.Io=t[1],this._o=t[2],t.length>=4?this.Co=t[3]:this.Co=1))}set r(t){this.Oo(t)}get r(){return this.No()}set g(t){this.Fo(t)}get g(){return this.$o()}set b(t){this.Do(t)}get b(){return this.Bo()}set a(t){this.Lo(t)}get a(){return this.Wo()}Sa(t,s){switch(t){case 0:this.Oo(s);break;case 1:this.Fo(s);break;case 2:this.Do(s);break;case 3:this.Lo(s);break;default:throw new RangeError("invalid color index")}}ba(t){switch(t){case 0:return this.No();case 1:return this.$o();case 2:return this.Bo();case 3:return this.Wo();default:throw new RangeError("invalid color index")}}static va(t,s){let i,e;if(Array.isArray(t))i=new so.To,i.wa(t);else{if(!(t instanceof so.To))throw new Error("unexpected type");i=t}if(Array.isArray(s))e=new so.To,e.wa(s);else{if(!(s instanceof so.To))throw new Error("unexpected type");e=s}return i.equals(e)}static Ma(t,s){return so.Zn(Math.max(t,s)-Math.min(t,s),0,1)}static xa(t,s){const i=new so.To;return i.Oo(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),i.Fo(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),i.Do(Math.max(t._o,s._o)-Math.min(t._o,s._o)),i.Lo(Math.max(t.Co,s.Co)-Math.min(t.Co,s.Co)),i}static Ta(t,s){const i=new so.To(0,0,0,1);return i.Oo(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),i.Fo(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),i.Do(Math.max(t._o,s._o)-Math.min(t._o,s._o)),i}static pa(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;let r=0;switch(e){case t:r=(s-i)/(e-n)+(s<i?6:0);break;case s:r=(i-t)/(e-n)+2;break;case i:r=(t-s)/(e-n)+4}return Math.round(r/6*360)}static ma(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;const r=e-n,h=(e+n)/2>.5?r/(2-e-n):r/(e+n);return Math.round(100*h)}static ga(t,s,i){const e=Math.max(t,s,i),n=(e+Math.min(t,s,i))/2;return e?Math.round(100*n):0}},so.To.Ga=Object.freeze(so.Hn(so.To,1,1,1,1)),so.To.Ia=Object.freeze(so.Hn(so.To,0,0,0,1)),so.To._a=Object.freeze(so.Hn(so.To,0,0,0,0))}{const no=self._s;no.Ca=class{constructor(t,s){this.Ea=0,this.Pa=0,t instanceof no.Ca?this.S(t):this.set(t||0,s||0)}set(t,s){this.Ea=+t,this.Pa=+s}S(t){this.Ea=t.Ea,this.Pa=t.Pa}equals(t){return this.Ea===t.Ea&&this.Pa===t.Pa}Aa(t,s){return this.Ea===t&&this.Pa===s}Jo(t,s){return t[s]===Math.fround(this.Ea)&&t[s+1]===Math.fround(this.Pa)}Ra(t){this.Ea=+t}Oa(){return this.Ea}Fa(t){this.Pa=+t}Da(){return this.Pa}toArray(){return[this.Ea,this.Pa]}jo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.Ea,t[s]=this.Pa}offset(t,s){this.Ea+=+t,this.Pa+=+s}scale(t,s){this.Ea*=t,this.Pa*=s}St(t,s){this.Ea/=t,this.Pa/=s}round(){this.Ea=Math.round(this.Ea),this.Pa=Math.round(this.Pa)}floor(){this.Ea=Math.floor(this.Ea),this.Pa=Math.floor(this.Pa)}ceil(){this.Ea=Math.ceil(this.Ea),this.Pa=Math.ceil(this.Pa)}angle(){return no.rr(0,0,this.Ea,this.Pa)}La(){return this.Ea*this.Ea+this.Pa*this.Pa}length(){return no.sr(this.Ea,this.Pa)}ka(t,s){const i=this.Ea*s-this.Pa*t;this.Pa=this.Pa*s+this.Ea*t,this.Ea=i}rotate(t){0!==t&&this.ka(Math.sin(t),Math.cos(t))}Na(t,s,i){0===t||s===this.Ea&&i===this.Pa||(this.Ea-=s,this.Pa-=i,this.ka(Math.sin(t),Math.cos(t)),this.Ea+=+s,this.Pa+=+i)}move(t,s){0!==s&&(this.Ea+=Math.cos(t)*s,this.Pa+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Ea/=t,this.Pa/=t)}Zn(t,s){this.Ea=no.Zn(this.Ea,t,s),this.Pa=no.Zn(this.Pa,t,s)}Gt(t){return this.Ea*t.Ea+this.Pa*t.Pa}reverse(){this.Ea=-this.Ea,this.Pa=-this.Pa}$a(){let t=this.Ea;return this.Ea=this.Pa,this.Pa=-t,this}}}{const ro=self._s;ro.Rect=class{constructor(t,s,i,e){this.Ba=NaN,this.Wa=NaN,this.ja=NaN,this.Va=NaN,this.Ba=0,this.Wa=0,this.ja=0,this.Va=0,t instanceof ro.Rect?this.S(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.Ba=+t,this.Wa=+s,this.ja=+i,this.Va=+e}Ua(t,s,i,e){t=+t,s=+s,this.Ba=t,this.Wa=s,this.ja=t+ +i,this.Va=s+ +e}S(t){this.Ba=+t.Ba,this.Wa=+t.Wa,this.ja=+t.ja,this.Va=+t.Va}clone(){return new ro.Rect(this.Ba,this.Wa,this.ja,this.Va)}static Ha(t,s){const i=new ro.Rect;return i.qa(Math.min(t.Ba,s.Ba)),i.za(Math.min(t.Wa,s.Wa)),i.Ja(Math.max(t.ja,s.ja)),i.Ya(Math.max(t.Va,s.Va)),i}static Xa(t){return new ro.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.Ba===t.Ba&&this.Wa===t.Wa&&this.ja===t.ja&&this.Va===t.Va}Za(t,s,i,e){return this.Ba===t&&this.Wa===s&&this.width()===i&&this.height()===e}Jo(t,s){return t[s]===Math.fround(this.Ba)&&t[s+1]===Math.fround(this.Wa)&&t[s+2]===Math.fround(this.ja)&&t[s+3]===Math.fround(this.Va)}qa(t){this.Ba=+t}Ka(){return this.Ba}za(t){this.Wa=+t}Qa(){return this.Wa}Ja(t){this.ja=+t}tl(){return this.ja}Ya(t){this.Va=+t}sl(){return this.Va}toArray(){return[this.Ba,this.Wa,this.ja,this.Va]}jo(){return new Float64Array(this.toArray())}il(){return new DOMRect(this.Ba,this.Wa,this.width(),this.height())}static el(t){return ro.Hn(ro.Rect,t.left,t.top,t.right,t.bottom)}Vo(t,s){t[s++]=this.Ba,t[s++]=this.Wa,t[s++]=this.ja,t[s]=this.Va}nl(t,s){t[s++]=this.Ba,t[s++]=this.Wa,t[s++]=this.ja,t[s++]=this.Wa,t[s++]=this.ja,t[s++]=this.Va,t[s++]=this.Ba,t[s]=this.Va}rl(t,s,i){t[s++]=this.Ba,t[s++]=this.Wa,t[s++]=i,t[s++]=this.ja,t[s++]=this.Wa,t[s++]=i,t[s++]=this.ja,t[s++]=this.Va,t[s++]=i,t[s++]=this.Ba,t[s++]=this.Va,t[s]=i}width(){return this.ja-this.Ba}height(){return this.Va-this.Wa}hl(){return(this.Ba+this.ja)/2}ol(){return(this.Wa+this.Va)/2}offset(t,s){t=+t,s=+s,this.Ba+=t,this.Wa+=s,this.ja+=t,this.Va+=s}offsetLeft(t){this.Ba+=+t}offsetTop(t){this.Wa+=+t}al(t){this.ja+=+t}ll(t){this.Va+=+t}ul(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.Wa<this.Va?this.Ba<this.ja?this.Va=this.Wa+this.width():this.Va=this.Wa-this.width():this.Ba<this.ja?this.Va=this.Wa-this.width():this.Va=this.Wa+this.width()}cl(t,s){t=+t,s=+s,this.Ba-=t,this.Wa-=s,this.ja+=t,this.Va+=s}fl(t,s){t=+t,s=+s,this.Ba+=t,this.Wa+=s,this.ja-=t,this.Va-=s}multiply(t,s){this.Ba*=t,this.Wa*=s,this.ja*=t,this.Va*=s}St(t,s){this.Ba/=t,this.Wa/=s,this.ja/=t,this.Va/=s}dl(t){this.Ba=+t-this.Ba,this.ja=+t-this.ja}pl(t){this.Wa=+t-this.Wa,this.Va=+t-this.Va}ml(t,s){const i=this.width(),e=this.height(),n=this.Ka()+i*t,r=this.Qa()+e*s;this.Ua(n-e*s,r-i*t,e,i)}gl(){const t=this.Ba;this.Ba=this.ja,this.ja=t}yl(){const t=this.Wa;this.Wa=this.Va,this.Va=t}wl(t){const s=this.Wa;this.Wa=+t-this.Va,this.Va=+t-s}round(){this.Ba=Math.round(this.Ba),this.Wa=Math.round(this.Wa),this.ja=Math.round(this.ja),this.Va=Math.round(this.Va)}Sl(){this.Ba=Math.ceil(this.Ba),this.Wa=Math.ceil(this.Wa),this.ja=Math.floor(this.ja),this.Va=Math.floor(this.Va)}bl(){this.Ba=Math.floor(this.Ba),this.Wa=Math.floor(this.Wa),this.ja=Math.ceil(this.ja),this.Va=Math.ceil(this.Va)}floor(){this.Ba=Math.floor(this.Ba),this.Wa=Math.floor(this.Wa),this.ja=Math.floor(this.ja),this.Va=Math.floor(this.Va)}ceil(){this.Ba=Math.ceil(this.Ba),this.Wa=Math.ceil(this.Wa),this.ja=Math.ceil(this.ja),this.Va=Math.ceil(this.Va)}Zn(t,s,i,e){this.Ba=Math.max(this.Ba,+t),this.Wa=Math.max(this.Wa,+s),this.ja=Math.min(this.ja,+i),this.Va=Math.min(this.Va,+e)}vl(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.Ba=ro.Zn(this.Ba,t,i),this.Wa=ro.Zn(this.Wa,s,e),this.ja=ro.Zn(this.ja,t,i),this.Va=ro.Zn(this.Va,s,e)}normalize(){this.Ba>this.ja&&this.gl(),this.Wa>this.Va&&this.yl()}Ml(t){return!(t.ja<this.Ba||t.Va<this.Wa||t.Ba>this.ja||t.Wa>this.Va)}xl(t,s,i){return!(t.ja+s<this.Ba||t.Va+i<this.Wa||t.Ba+s>this.ja||t.Wa+i>this.Va)}Tl(t,s){return t>=this.Ba&&t<=this.ja&&s>=this.Wa&&s<=this.Va}Gl(t){return t.Ba>=this.Ba&&t.Wa>=this.Wa&&t.ja<=this.ja&&t.Va<=this.Va}Il(t){t.Ba<this.Ba&&(this.Ba=+t.Ba),t.Wa<this.Wa&&(this.Wa=+t.Wa),t.ja>this.ja&&(this.ja=+t.ja),t.Va>this.Va&&(this.Va=+t.Va)}_l(t){this.Ba=ro._t(t.Ba,t.ja,this.Ba),this.Wa=ro._t(t.Wa,t.Va,this.Wa),this.ja=ro._t(t.Ba,t.ja,this.ja),this.Va=ro._t(t.Wa,t.Va,this.Va)}}}{const ho=self._s;ho.Cl=class{constructor(t,s,i,e,n,r,h,o){this.El=NaN,this.Pl=NaN,this.Al=NaN,this.Rl=NaN,this.Ol=NaN,this.Fl=NaN,this.Dl=NaN,this.Ll=NaN,this.El=0,this.Pl=0,this.Al=0,this.Rl=0,this.Ol=0,this.Fl=0,this.Dl=0,this.Ll=0,t instanceof ho.Cl?this.S(t):this.set(t||0,s||0,i||0,e||0,n||0,r||0,h||0,o||0)}set(t,s,i,e,n,r,h,o){this.El=+t,this.Pl=+s,this.Al=+i,this.Rl=+e,this.Ol=+n,this.Fl=+r,this.Dl=+h,this.Ll=+o}kl(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}S(t){this.El=t.El,this.Pl=t.Pl,this.Al=t.Al,this.Rl=t.Rl,this.Ol=t.Ol,this.Fl=t.Fl,this.Dl=t.Dl,this.Ll=t.Ll}equals(t){return this.El===t.El&&this.Pl===t.Pl&&this.Al===t.Al&&this.Rl===t.Rl&&this.Ol===t.Ol&&this.Fl===t.Fl&&this.Dl===t.Dl&&this.Ll===t.Ll}Nl(t){this.El=+t}$r(){return this.El}$l(t){this.Pl=+t}Br(){return this.Pl}Bl(t){this.Al=+t}Wr(){return this.Al}Wl(t){this.Rl=+t}jr(){return this.Rl}jl(t){this.Ol=+t}Vr(){return this.Ol}Vl(t){this.Fl=+t}Ur(){return this.Fl}Ul(t){this.Dl=+t}Hr(){return this.Dl}Hl(t){this.Ll=+t}qr(){return this.Ll}ql(){return new DOMQuad(new DOMPoint(this.El,this.Pl),new DOMPoint(this.Al,this.Rl),new DOMPoint(this.Ol,this.Fl),new DOMPoint(this.Dl,this.Ll))}static zl(t){return ho.Hn(ho.Cl,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.El,this.Pl,this.Al,this.Rl,this.Ol,this.Fl,this.Dl,this.Ll]}jo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.El,t[s++]=this.Pl,t[s++]=this.Al,t[s++]=this.Rl,t[s++]=this.Ol,t[s++]=this.Fl,t[s++]=this.Dl,t[s]=this.Ll}Jl(t,s,i){t[s++]=this.El,t[s++]=this.Pl,t[s++]=i,t[s++]=this.Al,t[s++]=this.Rl,t[s++]=i,t[s++]=this.Ol,t[s++]=this.Fl,t[s++]=i,t[s++]=this.Dl,t[s++]=this.Ll,t[s]=i}offset(t,s){t=+t,s=+s,this.El+=t,this.Pl+=s,this.Al+=t,this.Rl+=s,this.Ol+=t,this.Fl+=s,this.Dl+=t,this.Ll+=s}round(){this.El=Math.round(this.El),this.Pl=Math.round(this.Pl),this.Al=Math.round(this.Al),this.Rl=Math.round(this.Rl),this.Ol=Math.round(this.Ol),this.Fl=Math.round(this.Fl),this.Dl=Math.round(this.Dl),this.Ll=Math.round(this.Ll)}floor(){this.El=Math.floor(this.El),this.Pl=Math.floor(this.Pl),this.Al=Math.floor(this.Al),this.Rl=Math.floor(this.Rl),this.Ol=Math.floor(this.Ol),this.Fl=Math.floor(this.Fl),this.Dl=Math.floor(this.Dl),this.Ll=Math.floor(this.Ll)}ceil(){this.El=Math.ceil(this.El),this.Pl=Math.ceil(this.Pl),this.Al=Math.ceil(this.Al),this.Rl=Math.ceil(this.Rl),this.Ol=Math.ceil(this.Ol),this.Fl=Math.ceil(this.Fl),this.Dl=Math.ceil(this.Dl),this.Ll=Math.ceil(this.Ll)}Yl(t){this.El=t.Ba,this.Pl=t.Wa,this.Al=t.ja,this.Rl=t.Wa,this.Ol=t.ja,this.Fl=t.Va,this.Dl=t.Ba,this.Ll=t.Va}Xl(t,s){0===s?this.Yl(t):this.Zl(t,Math.sin(s),Math.cos(s))}Zl(t,s,i){const e=t.Ba*s,n=t.Wa*s,r=t.ja*s,h=t.Va*s,o=t.Ba*i,a=t.Wa*i,l=t.ja*i,u=t.Va*i;this.El=o-n,this.Pl=a+e,this.Al=l-n,this.Rl=a+r,this.Ol=l-h,this.Fl=u+r,this.Dl=o-h,this.Ll=u+e}Kl(t){t.set(Math.min(this.El,this.Al,this.Ol,this.Dl),Math.min(this.Pl,this.Rl,this.Fl,this.Ll),Math.max(this.El,this.Al,this.Ol,this.Dl),Math.max(this.Pl,this.Rl,this.Fl,this.Ll))}Tl(t,s){let i=this.Al-this.El,e=this.Rl-this.Pl;const n=this.Ol-this.El,r=this.Fl-this.Pl,h=t-this.El,o=s-this.Pl;let a=i*i+e*e,l=i*n+e*r,u=i*h+e*o;const c=n*n+r*r,f=n*h+r*o;let d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return p>=0&&m>0&&p+m<1||(i=this.Dl-this.El,e=this.Ll-this.Pl,a=i*i+e*e,l=i*n+e*r,u=i*h+e*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d,p>=0&&m>0&&p+m<1)}hl(){return(this.El+this.Al+this.Ol+this.Dl)/4}ol(){return(this.Pl+this.Rl+this.Fl+this.Ll)/4}Ql(t,s,i,e){return!(!this.Tl(t,s)&&!this.Tl(i,e))||ho.Nr(t,s,i,e,this)}tu(t){let s=t.hl(),i=t.ol();if(this.Tl(s,i))return!0;if(s=this.hl(),i=this.ol(),t.Tl(s,i))return!0;const e=this.El,n=this.Pl,r=this.Al,h=this.Rl,o=this.Ol,a=this.Fl,l=this.Dl,u=this.Ll;return ho.Nr(e,n,r,h,t)||ho.Nr(r,h,o,a,t)||ho.Nr(o,a,l,u,t)||ho.Nr(l,u,e,n,t)}su(){const t=this.El,s=this.Pl;this.El=this.Al,this.Pl=this.Rl,this.Al=this.Ol,this.Rl=this.Fl,this.Ol=this.Dl,this.Fl=this.Ll,this.Dl=t,this.Ll=s}iu(){this.eu(0,2),this.eu(1,3),this.eu(6,4),this.eu(7,5)}nu(){this.eu(0,6),this.eu(1,7),this.eu(2,4),this.eu(3,5)}ru(){this.eu(2,6),this.eu(3,7)}eu(t,s){const i=this.hu(t);this.ou(t,this.hu(s)),this.ou(s,i)}hu(t){switch(t){case 0:return this.El;case 1:return this.Pl;case 2:return this.Al;case 3:return this.Rl;case 4:return this.Ol;case 5:return this.Fl;case 6:return this.Dl;case 7:return this.Ll;default:throw new RangeError("invalid quad point index")}}ou(t,s){switch(s=+s,t){case 0:this.El=s;break;case 1:this.Pl=s;break;case 2:this.Al=s;break;case 3:this.Rl=s;break;case 4:this.Ol=s;break;case 5:this.Fl=s;break;case 6:this.Dl=s;break;case 7:this.Ll=s;break;default:throw new RangeError("invalid quad point index")}}}}{const oo=self._s,ao=self.assert,lo=[0,0,1,0,1,1,0,1],uo=oo.Hn(oo.Cl);oo.au=class extends oo.Vn{constructor(t,s=!0){super(),t||(t=lo),this.lu=Float64Array.from(t),this.uu=new oo.Rect,this.cu=!0,this.fu=s}qn(){}du(){return this.lu}pu(){return this.lu.length/2}mu(t){this.lu.length===t.length?this.lu.set(t):this.lu=Float64Array.from(t),this.cu=!0}gu(){this.mu(lo)}S(t){this.mu(t.lu)}yu(){this.cu=!0}wu(){if(!this.cu)return;const t=this.lu;let s=t[0],i=t[1],e=s,n=i;for(let r=0,h=t.length;r<h;r+=2){const h=t[r],o=t[r+1];h<s&&(s=h),h>e&&(e=h),o<i&&(i=o),o>n&&(n=o)}this.uu.set(s,i,e,n),this.cu=!1}Yl(t,s,i){let e=this.lu;8!==e.length&&(e=new Float64Array(8),this.lu=e),e[0]=t.Ka()-s,e[1]=t.Qa()-i,e[2]=t.tl()-s,e[3]=t.Qa()-i,e[4]=t.tl()-s,e[5]=t.sl()-i,e[6]=t.Ka()-s,e[7]=t.sl()-i,this.uu.S(t),0===s&&0===i||this.uu.offset(-s,-i),this.cu=!1}Su(t,s,i){uo.S(t),uo.offset(s,i),this.mu(uo.toArray()),this.cu=!0}transform(t,s,i){let e=0,n=1;0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.bu(t,s,e,n)}bu(t,s,i,e){const n=this.lu;for(let r=0,h=n.length;r<h;r+=2){const h=r+1,o=n[r]*t,a=n[h]*s;n[r]=o*e-a*i,n[h]=a*e+o*i}this.cu=!0}offset(t,s){const i=this.lu;for(let e=0,n=i.length;e<n;e+=2)i[e]+=t,i[e+1]+=s}Tl(t,s){const i=this.lu;if(t===i[0]&&s===i[1])return!0;this.wu();const e=this.uu,n=e.Ka()-110,r=e.Qa()-101,h=e.tl()+131,o=e.sl()+120;let a=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0;n<t?(a=n,u=t):(a=t,u=n),r<s?(l=r,c=s):(l=s,c=r),h<t?(f=h,p=t):(f=t,p=h),o<s?(d=o,m=s):(d=s,m=o);let g=0,y=0;for(let e=0,w=i.length;e<w;e+=2){const S=(e+2)%w,b=i[e],v=i[e+1],M=i[S],x=i[S+1];oo.kr(n,r,t,s,a,u,l,c,b,v,M,x)&&++g,oo.kr(h,o,t,s,f,p,d,m,b,v,M,x)&&++y}return g%2==1||y%2==1}vu(t,s,i){const e=t.lu,n=this.lu;if(this.Tl(e[0]+s,e[1]+i))return!0;if(t.Tl(n[0]-s,n[1]-i))return!0;for(let t=0,r=n.length;t<r;t+=2){const h=(t+2)%r,o=n[t],a=n[t+1],l=n[h],u=n[h+1];let c=0,f=0,d=0,p=0;o<l?(c=o,d=l):(c=l,d=o),a<u?(f=a,p=u):(f=u,p=a);for(let t=0,n=e.length;t<n;t+=2){const r=(t+2)%n,h=e[t]+s,m=e[t+1]+i,g=e[r]+s,y=e[r+1]+i;if(oo.kr(o,a,l,u,c,d,f,p,h,m,g,y))return!0}}return!1}Ql(t,s,i,e,n,r){if(this.Tl(i-t,e-s))return!0;if(this.Tl(n-t,r-s))return!0;let h=0,o=0,a=0,l=0;i<n?(h=i,a=n):(h=n,a=i),e<r?(o=e,l=r):(o=r,l=e);const u=this.lu;for(let c=0,f=u.length;c<f;c+=2){const d=(c+2)%f,p=u[c]+t,m=u[c+1]+s,g=u[d]+t,y=u[d+1]+s;if(oo.kr(i,e,n,r,h,a,o,l,p,m,g,y))return!0}return!1}iu(t){const s=this.lu;for(let i=0,e=s.length;i<e;i+=2)s[i]=2*t-s[i];this.cu=!0}nu(t){const s=this.lu;for(let i=0,e=s.length;i<e;i+=2){const e=i+1;s[e]=2*t-s[e]}this.cu=!0}ru(){const t=this.lu;for(let s=0,i=t.length;s<i;s+=2){const i=s+1,e=t[s];t[s]=t[i],t[i]=e}this.cu=!0}Mu(){const t=this.lu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i];return s/this.pu()}xu(){const t=this.lu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i+1];return s/this.pu()}Tu(){return this.lu}Gu(){return this.pu()}Iu(){return this.fu}}}{const co=self._s;co._u=class extends co.Vn{constructor(t){if(super(),this.Cu=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}qn(){this.Eu(),this.Cu=null}Pu(){return 0===this.Cu.size}Eu(){const t=this.Cu;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){const e=this.Cu;let n=e.get(t);n||(n=new Map,e.set(t,n)),n.set(s,i)}qs(t,s){const i=this.Cu.get(t);return i?i.get(s):i}Hs(t,s){const i=this.Cu.get(t);return!!i&&i.has(s)}Au(t,s){const i=this.Cu,e=i.get(t);if(!e)return!1;const n=e.delete(s);return n&&0===e.size&&i.delete(t),n}Ru(t){const s=this.Cu,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[i,e]of s.entries())e.delete(t)&&0===e.size&&s.delete(i)}Ou(){let t=0;for(const s of this.Cu.values())t+=s.size;return t}*values(){for(const t of this.Cu.values())yield*t.values()}*Fu(){for(const[t,s]of this.Cu.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.Cu.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const fo=self._s;fo.Du=class extends fo.Vn{constructor(){super(),this.Lu=new Set,this.ku=[],this.Nu=!1}qn(){this.Eu()}Eu(){this.Lu.clear(),fo.bh(this.ku),this.Nu=!1}$u(t){this.Lu.has(t)||(this.Lu.add(t),this.Nu||this.ku.push(t))}Hs(t){return this.Lu.has(t)}Au(t){this.Lu.delete(t)&&(this.Nu=!0)}Ou(){return this.Lu.size}Pu(){return 0===this.Lu.size}Bu(){return this.Nu&&(this.Wu(),this.Nu=!1),this.ku}Wu(){const t=this.ku;fo.bh(t);for(const s of this.Lu)t.push(s)}}}{const po=self._s,mo=new Map,go=new Map,yo=new Map,wo=new Map,So=new Map,bo=new Map,vo=new Map,Mo=new Map,xo=new Map;xo.set("linear","noease"),xo.set("default","noease");const To=["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"],Go=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Io=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]);self.ju=class t{constructor(){}static Vu(){return"default"}static Uu(){return"noease"}static Hu(t){return Io.get(t)}static qu(s,...i){let e,n;this.zu(),s?(yo.has(s)||yo.set(s,new Map),e=yo.get(s),n=[...e.keys()].filter((i=>!t.Ju(i,s)||t.Ju(i,s).transition.Yu()))):(e=So,n=[...e.keys()]);const r=n.sort();return[...go.keys()].concat(r).filter((t=>!i.includes(t)))}static Xu(){this.zu();const t=[...So.keys()];return t.sort(),[...go.keys()].concat(t)}static Zu(){this.zu();const t=[...So.keys()];return t.sort(),t}static Ku(t){for(const s of To)if(self.lang(`ui.bars.timeline.eases.${s}`)===t)return!0;for(const s of Go)if(self.lang(`ui.bars.timeline.short-eases.${s}`)===t)return!0}static Qu(t){return this.zu(),[...go.keys()].includes(t)}static tc(s){const i=xo.get(s);return i?mo.get(i):t.Qu(s)?mo.get(s):vo.has(s)?vo.get(s):void 0}static sc(t){return this.zu(),Mo.get(t)}static ec(s,i){this.zu();const e=t.tc(s);if(e)return e;if(!i)throw new Error("missing ease function");return yo.get(i).get(s)}static Ju(t,s){this.zu();const i=wo.get(s);if(i)return i.get(t)}static nc(s,i){return this.zu(),!!t.tc(s)||!!yo.get(i).get(s)}static rc(s){this.zu();return t.tc(s)||So.get(s)}static hc(t){return this.zu(),bo.get(t)}static oc(t){return this.zu(),this.Xu()[t]}static ac(t,s){return this.zu(),this.qu(s).indexOf(t)}static lc(t){return this.ac(t)}static zu(){0===mo.size&&(this.uc("default",(()=>{})),this.uc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.uc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.uc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.uc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.uc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.uc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.uc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.uc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.uc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.uc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.uc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.uc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.uc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.uc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.uc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.uc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.uc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.uc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.uc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.uc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.uc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.uc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.uc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.uc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.uc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.uc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.cc("cubicbezier",this.fc),this.cc("spline",this.dc))}static uc(s,i,e=!1){if("function"==typeof i)t.mc(s,i,"predefined");else{if(!po.Te(i))throw new Error("unexpected arguments");if(self.yc){const n=po.Hn(self.yc,s,e);n.wc(i),t.mc(s,((t,s,i,e)=>n.Sc(t,s,i,e)),"predefined"),Mo.set(s,n)}else{const n=po.Hn(po.bc,[s,i.map((t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee]))],!1);n.vc(e),t.mc(s,((t,s,i,e)=>n.Sc(t,s,i,e)),"predefined")}}}static cc(s,i){t.mc(s,i,"private")}static Mc(s,i,e,n){this.zu(),t.mc(s,i,"custom",e,n)}static xc(t,s){if(this.Qu(t))return;if([...vo.keys()].includes(t))return;const i=yo.get(s);i&&i.delete(t);const e=wo.get(s);e&&e.delete(t)}static mc(t,s,i,e,n){switch(i){case"predefined":mo.set(t,s),go.set(t,s);break;case"custom":e?(yo.has(e)||yo.set(e,new Map),wo.has(e)||wo.set(e,new Map),yo.get(e).set(t,s),wo.get(e).set(t,n)):(So.set(t,s),bo.set(t,n));break;case"private":mo.set(t,s),vo.set(t,s);break;default:throw new Error("unexpected ease mode")}}static Tc(t,s,i,e){return 0===e?s:i*t/e+s}static fc(t,s,i,e,n){return s+3*t*(i-s)+3*t**2*(s+e-2*i)+t**3*(n-s+3*i-3*e)}static dc(t,s,i,e,n,r,h,o,a,l){if(e===n&&r===h)return t;const u=No(t,s,e,r,o,l),c=Oo(i,n,h,a),f=Fo(i,n,h,a),d=Do(i,n,h,a);return Lo(u,c,f,d)}static Gc(t,s,i,e){const n=[],r=Oo(t,s,i,e),h=Fo(t,s,i,e),o=Do(t,s,i,e);for(let t=0;t<_o;++t){const s=Lo(t*Co,r,h,o);n.push(s)}return n}};const _o=11,Co=1/(_o-1),Eo=4,Po=.01,Ao=1e-7,Ro=10,Oo=(t,s,i,e)=>e-3*i+3*s-t,Fo=(t,s,i,e)=>3*i-6*s+3*t,Do=(t,s,i,e)=>3*(s-t),Lo=(t,s,i,e)=>((s*t+i)*t+e)*t,ko=(t,s,i,e)=>3*s*t*t+2*i*t+e,No=(t,s,i,e,n,r)=>{if(1==t)return 1;let h=0,o=1,a=r[o],l=_o-1;for(r[_o-1];o!=l&&a<=t;)o++,a=r[o],h+=Co;o--,a=r[o];let u=h+(t-a)/(r[o+1]-a)*Co;const c=Oo(s,i,e,n),f=Fo(s,i,e,n),d=Do(s,i,e,n),p=ko(u,c,f,d);if(0===p)return u;if(p>=.01){for(let s=0;s<4;++s)u-=(Lo(u,c,f,d)-t)/ko(u,c,f,d);return u}{let s,i,e=h,n=h+Co,r=0;do{u=e+(n-e)/2;let h=Lo(u,c,f,d)-t;h>0?n=u:e=u,s=Math.abs(h)>1e-7,i=++r<10}while(s&&i);return u}}}{let $o=function(t){Bo.le(t)};RequireStringOrNumber=$o;const Bo=self._s;Bo.Ic=class{constructor(t){this._c=[],this.Yn=t||"",this.Cc=0}qn(){this.Eu(),this._c=null}Ec(){return this.Yn}Eu(){Bo.Mh(this._c),this.Cc=0}Pc(){return this.Cc}Ac(t=Math.random()*this.Pc()){let s=0;for(const[i,e]of this._c)if(s+=i,t<s)return e;return 0}Rc(){return!!this._c.length}Oc(t,s){$o(s),this.Cc+=t,this._c.push([t,s])}Fc(t,s){$o(s);const i=0===t;for(let e=0;e<this._c.length;e++){const n=this._c[e],r=i||n[0]===t,h=n[1]===s;if(r&&h){this._c.splice(e,1),this.Cc-=n[0];break}}}Dc(){return JSON.stringify(this._c)}static Lc(t,s){const i=new Bo.Ic(s),e=JSON.parse(t);for(const t of e){const s=t[0],e=t[1];i.Oc(s,e)}return i}}}{const Wo=self._s;let jo=0;Wo.kc=class{constructor(t,s){this.Nc=t,this.$c=s,this.Bc=jo++,this.Nc.Wc("runtime","screen-reader-text",{type:"create",id:this.Bc,text:this.$c})}qn(){this.Nc.Wc("runtime","screen-reader-text",{type:"release",id:this.Bc}),this.Nc=null,this.$c="",this.Bc=-1}jc(t){this.$c!==t&&(this.$c=t,this.Nc.Wc("runtime","screen-reader-text",{type:"update",id:this.Bc,text:this.$c}))}}}{const Vo=self._s;Vo.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.Vc=!1,this.Uc=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.Uc)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Vc=!0}}}{const Uo=self._s,Ho=self.assert;Uo.Event.Hc=class extends Uo.Vn{constructor(t){super(),this.qc=t,this.zc=[],this.Jc=new Set,this.Yc=[],this.Xc=new Set,this.Zc=0,this.Kc=[]}qn(){this.Zc>0||(Uo.bh(this.zc),this.Jc.clear(),Uo.bh(this.Yc),this.Xc.clear(),Uo.bh(this.Kc),Uo.qn(this))}Qc(t,s){if(this.tf())this.Kc.push({sf:"add",if:t,capture:s});else if(s){if(this.Jc.has(t))return;this.zc.push(t),this.Jc.add(t)}else{if(this.Xc.has(t))return;this.Yc.push(t),this.Xc.add(t)}}ef(t,s){this.tf()?this.Kc.push({sf:"remove",if:t,capture:s}):s?this.Jc.has(t)&&(this.Jc.delete(t),Uo._h(this.zc,t)):this.Xc.has(t)&&(this.Xc.delete(t),Uo._h(this.Yc,t))}nf(){return!this.zc.length&&!this.Yc.length}tf(){return this.Zc>0}rf(){const t=new Set,s=new Set;for(const i of this.Kc)if("add"===i.sf)this.Qc(i.if,i.capture),i.capture?s.delete(i.if):t.delete(i.if);else{if("remove"!==i.sf)throw new Error("invalid op");i.capture?(this.Jc.delete(i.if),s.add(i.if)):(this.Xc.delete(i.if),t.add(i.if))}Uo.Ph(this.Yc,t),Uo.Ph(this.zc,s),Uo.bh(this.Kc)}hf(t){this.af();let s=!1;for(let i=0,e=this.zc.length;i<e;++i)if(this.zc[i](t),t.Vc){s=!0;break}if(!s)for(let s=0,i=this.Yc.length;s<i&&(this.Yc[s](t),!t.Vc);++s);return this.lf(),!t.defaultPrevented}uf(t){this.af();for(let s=0,i=this.zc.length;s<i;++s)this.zc[s](t);for(let s=0,i=this.Yc.length;s<i;++s)this.Yc[s](t);return this.lf(),!0}af(){this.Zc++}lf(){this.Zc--,0===this.Zc&&this.Kc.length>0&&this.rf()}cf(t){t?this.af():this.lf()}ff(t){let s=[];for(let i=0,e=this.zc.length;i<e;++i){let e=this.zc[i];s.push(Uo.df((()=>e(t))))}for(let i=0,e=this.Yc.length;i<e;++i){let e=this.Yc[i];s.push(Uo.df((()=>e(t))))}return Promise.all(s).then((()=>!t.defaultPrevented))}pf(t){const s=[];this.af();for(let i=0,e=this.zc.length;i<e;++i){const e=this.zc[i](t);e instanceof Promise&&s.push(e)}for(let i=0,e=this.Yc.length;i<e;++i){const e=this.Yc[i](t);e instanceof Promise&&s.push(e)}return this.lf(),s.length?Promise.all(s).then((()=>!t.defaultPrevented)):!t.defaultPrevented}async mf(t){return await this.pf(t)}async gf(t){this.af();for(let s=0,i=this.zc.length;s<i;++s){const i=this.zc[s](t);i instanceof Promise&&await i}for(let s=0,i=this.Yc.length;s<i;++s){const i=this.Yc[s](t);i instanceof Promise&&await i}return this.lf(),!t.defaultPrevented}*yf(t){this.af();for(let s=0,i=this.zc.length;s<i;++s){const i=this.zc[s](t);Uo.Mo(i)&&(yield*i)}for(let s=0,i=this.Yc.length;s<i;++s){const i=this.Yc[s](t);Uo.Mo(i)&&(yield*i)}this.lf()}}}{const qo=self._s;qo.Event.wf=class extends qo.Vn{constructor(){super(),this.Sf=new Map,this.bf=!1}qn(){if(this.bf)throw new Error("already released");this.vf(),this.bf=!0,qo.qn(this)}zn(){return this.bf}vf(){if(this.Sf){for(let t of this.Sf.values())t.qn();this.Sf.clear()}}Mf(t,s){let i=this.Sf.get(t);return i||(s?(i=qo.Hn(qo.Event.Hc,t),this.Sf.set(t,i),i):null)}xf(t){return this.Sf.has(t)}addEventListener(t,s,i){this.Mf(t,!0).Qc(s,!!i)}removeEventListener(t,s,i){let e=this.Mf(t,!1);e&&(e.ef(s,!!i),e.nf()&&this.Sf.delete(t))}dispatchEvent(t){const s=this.Mf(t.type,!1);return!s||(t.cancelable?s.hf(t):s.uf(t))}Tf(t){const s=this.Mf(t.type,!1);return s?(t.Uc=!0,s.ff(t)):Promise.resolve(!0)}async Gf(t){const s=this.Mf(t.type,!1);if(!s)return!0;this.Sf.delete(t.type),t.Uc=!0;const i=await s.ff(t);return s.qn(),i}async If(t){const s=this.Mf(t.type,!1);return!s||await s.mf(t)}_f(t){const s=this.Mf(t.type,!1);return!s||s.pf(t)}async Cf(t){const s=this.Mf(t.type,!1);return!s||await s.gf(t)}Ef(t){const s=this.Mf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.yf(t)}cf(t){for(const s of this.Sf.values())s.cf(t)}}}{let zo=function(t){ia=ta&&0===ea?requestIdleCallback(Jo,{timeout:35}):setTimeout(Jo,ea>0?1:t)},Jo=function(t){if(ia=-1,!sa.length)return;let s=performance.now(),i=s,e=0,n=0;do{Yo(sa.shift()),i=performance.now(),++e,n=(i-s)/e*1.1}while(sa.length&&(ta&&0===ea&&void 0!==t?n<t.timeRemaining():i-s+n<12));if(-1===ia&&sa.length){let t=i-s;zo(Math.max(16-t,4))}},Yo=function(t){let s;try{s=t.if()}catch(s){return void t.reject(s)}t.resolve(s)};SetNewCallback=zo,DoAsyncifiedWork=Jo,DoNextAsyncifiedJob=Yo;const Xo=self._s,Zo=12,Ko=16,Qo=35,ta="undefined"!=typeof requestIdleCallback;let sa=[],ia=-1,ea=0,na=Xo.Ys.Hs("disable-asyncify");na&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),Xo.df=function(t){let s=null;return Xo.Ls&&(s=Xo.Ki()),new Promise(((i,e)=>{sa.push({if:t,resolve:i,reject:e,stack:s}),na?Yo(sa.pop()):-1===ia&&zo(16)}))},Xo.df.Pf=function(t){if(t)++ea;else if(--ea,ea<0)throw new Error("already turned off high throughput mode")}}{let ra=function(){ua=-1},ha=function(){ca=-1,fa=-1;let t=Date.now();for(let s of da)if(s.Af(t)){let t=s.Rf();(-1===fa||t<fa)&&(fa=t)}else da.delete(s);if(-1!==fa){let s=Math.max(fa-t+100,1e3);ca=self.setTimeout(ha,s)}};ClearTimeCache=ra,CheckActiveIdleTimeouts=ha;const oa=self._s,aa=1e3,la=100;let ua=-1;oa.Of=function(){return-1===ua&&(ua=Date.now(),self.setTimeout(ra,16)),ua};let ca=-1,fa=-1,da=new Set;oa.Ff=class{constructor(t,s){this.Df=t,this.Lf=1e3*s,this.kf=0,this.Nf=!1}$f(){let t=oa.Of();this.kf=t+this.Lf,this.Nf||(da.add(this),this.Nf=!0),-1===ca?(fa=this.kf,ca=self.setTimeout(ha,this.Lf+100)):this.kf<fa&&fa>t+1e3&&(self.clearTimeout(ca),fa=this.kf,ca=self.setTimeout(ha,this.Lf+100))}Af(t){return!(t>=this.kf&&(this.Df()?(this.kf=t+this.Lf,0):(this.Nf=!1,1)))}Rf(){return this.kf}Bf(){this.Nf&&(da.delete(this),this.Nf=!1,0===da.size&&-1!==ca&&(self.clearTimeout(ca),ca=-1,fa=-1))}qn(){this.Bf(),this.Df=null}}}{const pa=self._s;pa.Wf=class t{constructor(t){this.jf=!1,this.Vf=t}Uf(){this.jf||(this.jf=!0,this.Vf&&(this.Vf(),this.Vf=null))}Hf(){return this.jf}qn(){this.Uf()}static qn(s){return new t((()=>s.qn()))}static qf(t,s,i,e,n){if("string"!=typeof s&&!Array.isArray(s))throw new TypeError("expected string or array");if(null==e)e=!1;else if("boolean"!=typeof e&&"object"!=typeof e)throw new TypeError("invalid event listener options");if(n&&(i=i.bind(n)),Array.isArray(s)||s.includes(" ")){"string"==typeof s&&(s=s.split(" "));const n=new pa.zf;for(const r of s)t.addEventListener(r,i,e),n.$u(pa.Hn(pa.Wf,(()=>t.removeEventListener(r,i,e))));return n}return t.addEventListener(s,i,e),pa.Hn(pa.Wf,(()=>t.removeEventListener(s,i,e)))}},pa.Jf=class extends pa.Wf{Yf(t){this.Vf=t}},pa.zf=class extends pa.Wf{constructor(...t){super(),this.Xf=new Set;for(let s of t)this.$u(s)}$u(...t){if(this.jf)throw new Error("already disposed");for(let s of t)this.Xf.add(s)}Zf(t){if(this.jf)throw new Error("already disposed");this.Xf.delete(t)}Kf(){if(this.jf)throw new Error("already disposed");if(this.Xf){for(let t of this.Xf)t.Uf();this.Xf.clear()}}Hf(){return this.jf}Uf(){if(this.jf)throw new Error("already disposed");this.jf=!0;for(let t of this.Xf)t.Uf();this.Xf.clear(),this.Xf=null}qn(){this.Uf()}}}{const ma=self._s;ma.Qf=class extends ma.Vn{constructor(){super(),this.td=0,this.Pa=0,this.sd=0,this.ed=0}$u(t){t=+t,this.Pa=t-this.td,this.sd=this.ed+this.Pa,this.td=this.sd-this.ed-this.Pa,this.ed=this.sd}nd(t){this.ed-=+t}qs(){return this.ed}$f(){this.td=0,this.Pa=0,this.sd=0,this.ed=0}Set(t){this.td=0,this.Pa=0,this.sd=0,this.ed=+t}rd(t){this.td=t.td,this.Pa=t.Pa,this.sd=t.sd,this.ed=t.ed}qn(){}}}{const ga=self._s,ya={},wa=!0,Sa=!1;ya.hd=function(t){this.od=t,this.right=this.od.ad,this.left=this.od.ad,this.parent=null,this.color=!1,this.key=null},ya.ld=function(t){this.size=0,this.ad=new ya.hd(this),this.ad.color=!1,this.root=this.ad,this.root.parent=this.ad,this.compare=t||this.ud},ya.ld.prototype.ud=function(t,s){return t<s?-1:s<t?1:0},ya.ld.prototype.clone=function(){var t=new ya.ld(this.compare);return t.fd(this),t},ya.ld.prototype.clear=function(){this.size=0,this.ad=new ya.hd(this),this.ad.color=!1,this.root=this.ad,this.root.parent=this.ad},ya.ld.prototype.dd=function(t){var s=t.right;t.right=s.left,s.left!=this.ad&&(s.left.parent=t),s.parent=t.parent,t.parent==this.ad?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,s.left=t,t.parent=s},ya.ld.prototype.pd=function(t){var s=t.left;t.left=s.right,s.right!=this.ad&&(s.right.parent=t),s.parent=t.parent,t.parent==this.ad?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,s.right=t,t.parent=s},ya.ld.prototype.md=function(t){if(this.contains(t))this.gd(t).key=t;else{var s=new ya.hd(this);s.key=t;for(var i=this.ad,e=this.root;e!=this.ad;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;s.parent=i,i==this.ad?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.ad,s.right=this.ad,s.color=wa,this.yd(s),this.size++}},ya.ld.prototype.yd=function(t){for(;t!=this.ad&&t!=this.root&&t.parent.color==wa;){var s;t.parent==t.parent.parent.left?(s=t.parent.parent.right).color==wa?(t.parent.color=!1,s.color=!1,t.parent.parent.color=wa,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.dd(t)),t.parent.color=!1,t.parent.parent.color=wa,t.parent.parent!=this.ad&&this.pd(t.parent.parent)):(s=t.parent.parent.left).color==wa?(t.parent.color=!1,s.color=!1,t.parent.parent.color=wa,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.pd(t)),t.parent.color=!1,t.parent.parent.color=wa,t.parent.parent!=this.ad&&this.dd(t.parent.parent))}this.root.color=!1},ya.ld.prototype.wd=function(t){var s,i;(i=(s=t.left==this.ad||t.right==this.ad?t:this.Sd(t)).left!=this.ad?s.left:s.right).parent=s.parent,s.parent==this.ad?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.bd(i),this.size--},ya.ld.prototype.bd=function(t){for(;t!=this.root&&0==t.color;){var s;t==t.parent.left?((s=t.parent.right).color==wa&&(s.color=!1,t.parent.color=wa,this.dd(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=wa,t=t.parent):(0==s.right.color&&(s.left.color=!1,s.color=wa,this.pd(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.dd(t.parent),t=this.root)):((s=t.parent.left).color==wa&&(s.color=!1,t.parent.color=wa,this.pd(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=wa,t=t.parent):(0==s.left.color&&(s.right.color=!1,s.color=wa,this.dd(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.pd(t.parent),t=this.root))}t.color=!1},ya.ld.prototype.remove=function(t){var s=this.gd(t);if(s!=this.ad){var i=s.key;return this.wd(s),i}return null},ya.ld.prototype.vd=function(t,s){this.remove(s)},ya.ld.prototype.min=function(t){for(;t.left!=this.ad;)t=t.left;return t},ya.ld.prototype.max=function(t){for(;t.right!=this.ad;)t=t.right;return t},ya.ld.prototype.Sd=function(t){if(t.right!=this.ad)return this.min(t.right);for(var s=t.parent;s!=this.ad&&t==s.right;)t=s,s=s.parent;return s},ya.ld.prototype.Md=function(t){if(t.left!=this.ad)return this.max(t.left);for(var s=t.parent;s!=this.ad&&t==s.left;)t=s,s=s.parent;return s},ya.ld.prototype.xd=function(t){if(this.size>0){var s=this.gd(t);if(s==this.ad)return null;if(s.right!=this.ad)return this.min(s.right).key;for(var i=s.parent;i!=this.ad&&s==i.right;)s=i,i=i.parent;return i!=this.ad?i.key:null}return null},ya.ld.prototype.Td=function(t){if(this.size>0){var s=this.gd(t);if(s==this.ad)return null;if(s.left!=this.ad)return this.max(s.left).key;for(var i=s.parent;i!=this.ad&&s==i.left;)s=i,i=i.parent;return i!=this.ad?i.key:null}return null},ya.ld.prototype.Gd=function(){return this.min(this.root).key},ya.ld.prototype.Id=function(){return this.max(this.root).key},ya.ld.prototype.gd=function(t){for(var s=this.root;s!=this.ad&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},ya.ld.prototype.contains=function(t){return null!=this.gd(t).key},ya.ld.prototype.getValues=function(){var t=[];return this.forEach((function(s){t.push(s)})),t},ya.ld.prototype.fd=function(t){if("array"==ya._d(t))for(var s=0;s<t.length;s++)this.md(t[s]);else if("function"==ya._d(t.forEach))t.forEach(this.md,this);else if("function"==ya._d(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.md(i[s])}else if("object"==ya._d(t))for(var e in t)this.md(t[e])},ya.ld.prototype.Cd=function(t){if("array"==ya._d(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==ya._d(t.forEach))t.forEach(this.vd,this);else if("function"==ya._d(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.remove(i[s])}else if("object"==ya._d(t))for(var e in t)this.remove(t[e])},ya.ld.prototype.Ed=function(t){if("array"==ya._d(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==ya._d(t.forEach))return t.every(this.contains,this);if("function"==ya._d(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==ya._d(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},ya.ld.prototype.range=function(t,s){var i=[];return this.Pd((function(t){i.push(t)}),t,s),i},ya.ld.prototype.Ad=function(t,s){if(!this.Rd())for(var i=this.min(this.root);i!=this.ad;){if(t.call(s,i.key,this))return;i=this.Sd(i)}},ya.ld.prototype.Od=function(t,s,i){if(!this.Rd())for(var e=this.gd(s);e!=this.ad;){if(t.call(i,e.key,this))return;e=this.Sd(e)}},ya.ld.prototype.traverseTo=function(t,s,i){if(!this.Rd())for(var e=this.min(this.root),n=this.gd(s);e!=n;){if(t.call(i,e.key,this))return;e=this.Sd(e)}},ya.ld.prototype.Pd=function(t,s,i,e){if(!this.Rd())for(var n=this.gd(s),r=this.gd(i);n!=r;){if(t.call(e,n.key,this))return;n=this.Sd(n)}},ya.ld.prototype.Fd=function(t,s){if(!this.Rd())for(var i=this.max(this.root);i!=this.ad;){if(t.call(s,i.key,this))return;i=this.Md(i)}},ya.ld.prototype.forEach=function(t,s){if(!this.Rd())for(var i=this.min(this.root);i!=this.ad;i=this.Sd(i))t.call(s,i.key,i.key,this)},ya.ld.prototype.some=function(t,s){if(this.Rd())return!1;for(var i=this.min(this.root);i!=this.ad;i=this.Sd(i))if(t.call(s,i.key,i.key,this))return!0;return!1},ya.ld.prototype.every=function(t,s){if(this.Rd())return!1;for(var i=this.min(this.root);i!=this.ad;i=this.Sd(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},ya.ld.prototype.map=function(t,s){var i=[];if(this.Rd())return i;for(var e=this.min(this.root);e!=this.ad;e=this.Sd(e))i.push(t.call(s,e.key,e.key,this));return i},ya.ld.prototype.filter=function(t,s){var i=[];if(this.Rd())return i;for(var e=this.min(this.root);e!=this.ad;e=this.Sd(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},ya.ld.prototype.Dd=function(){return this.size},ya.ld.prototype.Rd=function(){return 0==this.size},ya.ld.prototype.isSubsetOf=function(t){var s=ya.Dd(t);if(this.Dd()>s)return!1;var i=0;if(this.Rd())return!0;for(var e=this.min(this.root);e!=this.ad;e=this.Sd(e))ya.contains.call(t,t,e.key)&&i++;return i==this.Dd()},ya.ld.prototype.intersection=function(t){var s=new ya.ld(this.compare);if(this.Rd())return s;for(var i=this.min(this.root);i!=this.ad;i=this.Sd(i))t.contains.call(t,i.key,i.key,this)&&s.md(i.key);return s},ga.ld=class extends ga.Vn{constructor(t){super(),this.Ld=new ya.ld(t),this.kd=!1,this.Nd=new Set,this.$d=new Set}$u(t){this.kd?this.Ld.contains(t)?this.$d.delete(t):this.Nd.add(t):this.Ld.md(t)}Zf(t){this.kd?this.Ld.contains(t)?this.$d.add(t):this.Nd.delete(t):this.Ld.remove(t)}Hs(t){return this.kd?!!this.Nd.has(t)||!this.$d.has(t)&&this.Ld.contains(t):this.Ld.contains(t)}Eu(){this.Ld.clear(),this.Nd.clear(),this.$d.clear()}toArray(){if(this.kd)throw new Error("cannot be used in queueing mode");return this.Ld.getValues()}Ou(){return this.Ld.Dd()+this.Nd.size-this.$d.size}Pu(){return 0===this.Ou()}Bd(){if(this.Pu())throw new Error("empty set");if(this.kd)throw new Error("cannot be used in queueing mode");const t=this.Ld;return t.min(t.root).key}Wd(){if(this.Pu())throw new Error("empty set");if(this.kd)throw new Error("cannot be used in queueing mode");const t=this.Bd();return this.Zf(t),t}jd(t){if(t=!!t,this.kd!==t&&(this.kd=t,!t)){for(const t of this.$d)this.Ld.remove(t);this.$d.clear();for(const t of this.Nd)this.Ld.md(t);this.Nd.clear()}}Vd(t){this.Ld.forEach(t)}*values(){if(this.Pu())return;const t=this.Ld;for(let s=t.min(t.root);s!=t.ad;s=t.Sd(s))yield s.key}[Symbol.iterator](){return this.values()}}}{const ba=self._s;ba.Ud=class{constructor(t=ba.hardwareConcurrency){this.Hd=t,this.qd=[],this.zd=0}$u(t){return new Promise(((s,i)=>{this.qd.push({if:t,resolve:s,reject:i}),this.Jd()}))}Yd(t){for(let s=0,i=this.qd.length;s<i;++s)if(this.qd[s].if===t)return s;return-1}Xd(t,s){const i=this.Yd(t);if(-1===i)throw new Error("cannot find promise to resolve");this.qd[i].resolve(s),this.qd.splice(i,1)}Zd(t,s){const i=this.Yd(t);if(-1===i)throw new Error("cannot find promise to reject");this.qd[i].reject(s),this.qd.splice(i,1)}async Jd(){if(!this.qd.length)return;if(this.zd>=this.Hd)return;this.zd++;const t=this.qd.shift();try{const s=await t.if();t.resolve(s)}catch(s){t.reject(s)}this.zd--,this.Jd()}static async Kd(t,s){const i=[];let e=!1;const n=async t=>{let n;for(;n=s.pop();){if(e)return;try{i.push(await n())}catch(t){throw e=!0,t}}},r=[];for(;t--;)r.push(n());return await Promise.all(r),i}}}{const va=self._s;va.Qd=class{constructor(t,s,i){this.Df=t,this.tp=s,this.sp=i||2*s,this.ip=-1,this.ep=-1/0,this.np=()=>this.rp(),this.hp=!1,this.op=!1,this.ap=null}lp(t){this.op=!!t}up(){return void 0!==va.cp&&va.cp.fp()?this.sp:this.tp}pp(...t){if(-1!==this.ip)return;this.ap=t;let s=va.Of(),i=s-this.ep,e=this.up();i>=e&&this.op?(this.ep=s,this.mp()):this.ip=self.setTimeout(this.np,Math.max(e-i,4))}mp(){this.hp=!0;const t=this.ap;this.ap=null,t?this.Df(...t):this.Df(),this.hp=!1}$f(){this.hp||(this.gp(),this.ap=null,this.ep=va.Of())}rp(){this.ip=-1,this.ep=va.Of(),this.mp()}gp(){-1!==this.ip&&(self.clearTimeout(this.ip),this.ip=-1)}qn(){this.gp(),this.Df=null,this.ap=null,this.np=null}}}{const Ma=self._s;Ma.yp=class{constructor(){this.wp=new Map,this.Sp=!1,this.bp=null,this.vp=null,this.Mp=null,this.xp=null}Tp(t){this.Sp=!!t}Gp(){return this.Sp}Ip(t){this.bp=t}_p(t){if(!this.bp)throw new Error("no get base size callback set");return this.bp(t)}Cp(t){this.vp=t}Ep(t,s,i,e,n,r){if(!this.vp)throw new Error("no raster at size callback set");return this.vp(t,s,i,e,n,r)}Pp(t){this.Mp=t}Ap(t){if(!this.Mp)throw new Error("no release result callback set");this.Mp(t)}Rp(t){this.xp=t}Op(){if(!this.xp)throw new Error("no redraw callback set");this.xp()}Fp(t){let s=this.wp.get(t);return s||(s=Ma.Hn(Ma.Dp,this,t),this.wp.set(t,s)),s.Lp(),s}kp(t){this.wp.delete(t.Np())}$p(){for(const t of this.wp.values())t.Bp(),t.Wp()}}}{const xa=self._s,Ta=4096;xa.Dp=class{constructor(t,s){this.jp=t,this.Vp=s,this.Up=0,this.Hp=0,this.qp=0,this.zp=this.jp._p(s).then((t=>{this.jp&&(this.Hp=t[0],this.qp=t[1],this.jp.Op())})).catch((t=>{console.error("[SVG] Error loading SVG: ",t),this.Jp=!0,this.jp&&this.jp.Op()})),this.Yp=0,this.Xp=0,this.Zp=0,this.Kp=0,this.Qp=!1,this.tm=null,this.sm=!1,this.Jp=!1}qn(){if(this.Up<=0)throw new Error("already released");this.Up--,0===this.Up&&this.im()}Bp(){this.tm&&(this.jp.Ap(this.tm),this.tm=null)}im(){this.Bp(),this.jp.kp(this),this.jp=null}Np(){return this.Vp}Lp(){this.Up++}nm(){return this.Up>0}rm(){return this.tm}Wp(){this.sm=!0}async hm(t,s,i){if(0===s||0===i||this.Jp)return;if(this.Qp)return;let e=xa.vr(Math.ceil(s)),n=xa.vr(Math.ceil(i));const r=Math.max(e,n);if(r>4096){const t=4096/r;s*=t,i*=t,e=Math.min(Math.ceil(e*t),4096),n=Math.min(Math.ceil(n*t),4096)}if(s<e&&i<n){const t=s/i;e/n>t?(s=n*t,i=n):(s=e,i=e/t)}if(this.jp.Gp()&&(e=Math.ceil(s),n=Math.ceil(i)),e<=this.Yp&&n<=this.Xp&&!this.sm)return;this.Qp=!0,this.Yp=e,this.Xp=n;const h=await this.jp.Ep(this.Vp,t,this.Yp,this.Xp,s,i);this.jp&&(this.Bp(),this.tm=h,this.Zp=s,this.Kp=i,this.Qp=!1,this.sm=!1,this.jp.Op())}om(){return this.zp}am(){return this.Hp}lm(){return this.qp}um(){return this.Zp}fm(){return this.Kp}dm(){return this.Jp}}}{let Ga=function(t){return Aa.get(t)};lookupHtmlEntity=Ga;const Ia=self._s;Ia.pm="\ufeff";const _a=new Set("0123456789");Ia.gm=function(t){return _a.has(t)};const Ca=new Set(" \t\n\r\u2028\u2029");Ia.ym=function(t){return Ca.has(t)},Ia.wm=function(t){return[...t].filter((t=>!Ia.ym(t))).join("")},Ia.Sm=function(t){for(const s of t)if(!Ia.ym(s))return!1;return!0},Ia.bm=function(t){for(const s of t)if(!Ia.ym(s))return!1;return!0},Ia.vm=function(t){return 1===t.length&&t.charCodeAt(0)<32},Ia.Mm=function(t){return[...t].filter((t=>!Ia.vm(t))).join("")};let Ea=null;try{Ea=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}Ia.xm=function(t){return!Ia.ym(t)&&Ea&&Ea.test(t)};const Pa=new Set("0123456789.+-e");Ia.Tm=function(t){if(!(t=t.trim()).length)return!1;let s=t.charAt(0);if("-"!==s&&!_a.has(s))return!1;for(let s of t)if(!Pa.has(s))return!1;return!0},Ia.Gm=function(t){let s=t.length;for(;s>0;){let i=t.charAt(s-1);if(!Ia.gm(i))break;--s}return t.substr(0,s)},Ia.Im=function(t){let s=Ia.Gm(t),i=t.substr(s.length);return i=i?(parseInt(i,10)+1).toString():"2",s+i};const Aa=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]]),Ra=/[&<>"']/g;Ia._m=function(t){return t.replace(Ra,Ga)},Ia.Cm=function(t){let s=Ia.Em(t,"\\","\\\\");return s=Ia.Em(s,'"','\\"'),s=Ia.Em(s,"\t","\\t"),s=Ia.Em(s,"\r",""),Ia.Em(s,"\n","\\n")},Ia.Pm=function(t){let s=Ia.Em(t,"&","&amp;");return s=Ia.Em(s,"<","&lt;"),s=Ia.Em(s,">","&gt;"),Ia.Em(s,'"',"&quot;")};const Oa=/[-[\]{}()*+?.,\\^$|#\s]/g;Ia.Zi=function(t){return t.replace(Oa,"\\$&")},Ia.Am=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},Ia.Rm=function(t,s){let i=0,e=0;for(;i<s;){if(i=t.indexOf("\n",i),-1===i)return e;e++,i++}return e},Ia.Om=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());const e=s.length;let n=0,r=0,h=[];for(;(r=t.indexOf(s,n))>-1;)h.push(r),n=r+e;return h},Ia.Em=function(t,s,i){return t.replaceAll(s,(()=>i))},Ia.Fm=function(t,s,i){return t.replace(new RegExp(Ia.Zi(s),"gi"),(()=>i))},Ia.Dm=function(t,s){"string"==typeof s?t.textContent=s:s.Lm()?t.textContent=s.toString():(t.innerHTML=s.km(),s instanceof Ia.pn&&s.Nm(t))},Ia.$m=function(t,s){return t instanceof Ia.dn||t instanceof Ia.pn?t.equals(s):s instanceof Ia.dn||s instanceof Ia.pn?s.equals(t):t===s},Ia.Bm=function(t,...s){let i=t;for(let e=0,n=s.length;e<n;++e){const n=`{${e}}`;if(!t.includes(n))throw new Error(`missing placeholder '${n}' in string substitution`);i=i.replace(n,s[e].toString())}return i},Ia.Wm=function(t,...s){let i=t,e=-1,n=-1;for(let r=0,h=s.length;r<h;++r){const h=`{${r}}`;t.includes(h)?(n=r,i=i.replace(h,s[r].toString())):-1===e&&(e=r)}if(e>=0&&n>=0&&e<n)throw new Error(`missing placeholder '${e}' in string substitution`);return i},Ia.jm=function(t,s){let i=t;for(let[t,e]of Object.entries(s))i=i.replaceAll(t,e.toString());return i},Ia.Vm=function(t,s){return t>s?1:t<s?-1:0},Ia.Um=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return i>e?1:i<e?-1:0};const Fa=new self.Intl.Segmenter;Ia.Hm=function(t){const s=[];for(const i of Fa.segment(t))s.push(i.segment);return s},Ia.qm=function*(t){for(const s of Fa.segment(t))yield s.segment},Ia.zm=function(t){let s=0;for(const i of Fa.segment(t))++s;return s};const Da=1024,La=1048576,ka=1073741824,Na=1099511627776;Ia.Jm=function(t,s){let i="common."+(s?"dataRates":"dataSizes")+".";const e=self.Ym;if(t<1024)return e(i+"bytes",t);if(t<1048576){let s=t/1024;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"kilobytes",s)}if(t<ka){let s=t/1048576;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"megabytes",s)}if(t<Na){let s=t/ka;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"gigabytes",s)}{let s=t/Na;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"terabytes",s)}};const $a={Xm:!1,Zm:!0,Km:!0,Qm:!0,tg:!0};Ia.sg=function(t,s){s=Object.assign({},$a,s),Ia.eg.ig("common.time");const i=[],e=self.lang,n=self.ng;if(s.Zm){const s=Math.floor(t/86400);s>0&&(t-=24*s*3600,i.push(n(".days",null,s)))}if(s.Km){const s=Math.floor(t/3600);(s>0||i.length)&&(t-=3600*s,i.push(n(".hours",null,s)))}if(s.Qm){const e=Math.floor(t/60);(e>0||i.length||!s.tg)&&(t-=60*e,i.push(n(".minutes",null,e)))}if(s.tg){const s=Math.floor(t%60);i.push(n(".seconds",null,s))}const r=(s.Xm?e(".approx-prefix"):"")+i.join(e(".separator"));return Ia.eg.rg(),r},Ia.hg=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),n=s-e.length;for(let t=0;t<n;++t)i+="0";return i+e},Ia.og=function(t){return t.toLowerCase().replace(/\b\w/g,(t=>t.toUpperCase()))},Ia.ag=function(t,s){let i=t.split(".").map((t=>t.trim())),e=s.split(".").map((t=>t.trim()));Ia.Th(i,4,"0"),Ia.Th(e,4,"0"),i=i.map((t=>parseInt(t,10))),e=e.map((t=>parseInt(t,10)));for(let t=0;t<4;++t){const s=i[t]-e[t];if(0!==s)return s<0?-1:1}return 0},Ia.lg=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const s=Math.floor(16*Math.random());return("x"===t?s:3&s|8).toString(16)}))},Ia.ug=function(t,s){if(t.length!==s.length)throw new Error("strings must be same length");let i=0;for(let e=0,n=t.length;e<n;++e)t.charAt(e)!==s.charAt(e)&&++i;return i},Ia.cg=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,n,r,h,o;for(t.length>s.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,n=1;n<=t.length;n++)h=s[e-1]===t[n-1]?o[n-1]:Math.min(o[n-1]+1,Math.min(r+1,o[n]+1)),o[n-1]=r,r=h;o[t.length]=r}return o[t.length]}}{let Ba=function(t,s,i){const e=Va.get(i);if(!e)return"class"===i?s?"</span>":`<span class="bbclass${Ya++}">`:t;if("string"==typeof e){if("a"===e&&0===za.length||"abbr"===e&&0===Ja.length)return t;if("a"!==e||s){if("abbr"!==e||s)return"<"+s+e+">";{const t=parseInt(i.substring(3),10)-1;if(t<0||t>=Ja.length)throw new Error("invalid bbcode tip substitution");const s=Ja[t];let e="";if("string"==typeof s?e=s:"function"==typeof s&&(e=s()),"string"!=typeof e)throw new TypeError("invalid bbcode tip");return`<abbr title="${Wa.Em(e,'"',"&quot;")}">`}}{const t=parseInt(i.substring(1),10)-1;if(t<0||t>=za.length)throw new Error("invalid bbcode link substitution");const s=za[t];if("string"==typeof s)return`<a href="${za[t]}">`;if("function"==typeof s)return`<a class="bblink${t}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(e)){let t=e[0],i=e[1];return s?"</"+t+">":`<${t} class="${i}">`}};bbToHtmlReplacerFunc=Ba;const Wa=self._s,ja=self.assert,Va=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),Ua=new Set(["icon"]),Ha=/\[(\/?)([a-zA-Z0-9]+)\]/g,qa=/\[(\/?)([^\[\n]*?)\]/g;let za=null,Ja=null,Ya=0;const Xa=/\n/g;Wa.pn=class{constructor(t,s){if(this.fg=s&&s.dg?t:Wa._m(t),this.pg="",this.mg=!1,this.gg=[],this.yg=[],s){if(this.mg=!!s.wg,s.links){if(s.links.length>9)throw new Error("too many links");this.gg=s.links}if(s.Sg){if(s.Sg.length>9)throw new Error("too many tips");this.yg=s.Sg}}this.bg=this.fg.includes("["),this.vg=this.mg&&this.fg.includes("\n"),this.Mg=!this.bg&&!this.vg&&!this.fg.includes("&"),this.xg=!1,this.Tg=[]}toString(){return this.fg}valueOf(){return this.fg}Lm(){return this.Mg}Gg(){return this.bg?this.fg.replace(Ha,""):this.fg}km(){if(this.Mg)return this.fg;if(!this.pg&&this.fg){let t=this.fg;this.bg&&(Ya=0,za=this.gg,Ja=this.yg,t=t.replace(Ha,Ba),za=null,Ja=null),this.vg&&(t=t.replace(Xa,"<br>")),this.pg=t}return this.pg}Nm(t){if(this.gg.length)for(let s=0,i=this.gg.length;s<i;++s){const i=this.gg[s];if("function"!=typeof i)continue;const e=t.querySelector(".bblink"+s);if(!e)throw new Error("unable to attach BBString link handler");e.onclick=i}}equals(t){return t instanceof Wa.dn?this.km()===t.km():t instanceof Wa.pn?this.fg===t.fg:this.fg===t}Ig(){if(this.xg)return this.Tg;const t=[],s=this.fg,i=[];qa.lastIndex=0;let e=0,n=null;for(;null!==(n=qa.exec(s));){const r=n.index;if(r>0&&"\\"===s.charAt(r-1))continue;const h=n[0],o=n[1],a=n[2],l=s.substring(e,r);if(e=r+h.length,l&&t.push({text:l,_g:i.slice(0)}),a)if(o){const t=a.toLowerCase();for(let s=i.length-1;s>=0;--s)if(i[s].tag===t){i.splice(s,1);break}}else{let s=a,e=null;const n=a.indexOf("=");if(-1!==n?(s=a.substring(0,n).toLowerCase(),e=a.substring(n+1)):s=s.toLowerCase(),Ua.has(s)){if("icon"!==s)throw new Error(`unknown self-closing tag ${s}`);t.push({icon:e,_g:i.slice(0)})}else i.push({tag:s,Cg:e})}}e<s.length&&t.push({text:s.substring(e),_g:i.slice(0)});for(const s of t)s.text&&(s.text=this.Eg(s.text));return this.Tg=t.map((t=>t.icon?Wa.Hn(Wa.Pg,{icon:t.icon,_g:t._g}):Wa.Hn(Wa.Ag,{Rg:Wa.Hm(t.text),_g:t._g}))),this.xg=!0,this.Tg}Eg(t){return t=Wa.Em(t,"\\[","["),Wa.Em(t,"\\\\","\\")}static Og(t){return Wa.Hn(Wa.pn,t,{dg:!0}).Gg()}static Fg(t){return t.replace(qa,"")}}}{let Za=function(t){return""!==t&&""!==t&&il.ym(t)},Ka=function(t){return el.has(t)},Qa=function(t){return il.xm(t)&&!Ka(t)},tl=function(t){for(;t.length>0&&Za(t.at(-1));)t.pop()},sl=function(t){return"\n"===t||"\r\n"===t};IsWordBreakWhiteSpace=Za,IsOpeningCJKPunctiationChar=Ka,IsContinuingCJKPunctuationChar=Qa,WordBreakTrimEnd=tl,IsNewline=sl;const il=self._s,el=new Set("");il.Dg=class{constructor(){this.Lg=[],this.kg=null}Ng(){return this.Lg}$g(){return this.Lg.length}Bg(t){this.kg=t}Wg(t,s){let i=0,e=0,n=0,r=0,h=0;for(const o of t){if(-1===o.jg()){const t=s(o);o.Vg(t.height),o.Ug(t.fontBoundingBoxAscent||0),o.Hg(t.fontBoundingBoxDescent||0),o.qg(t.zg||0),o.Jg()?o.Yg(t.width):o.Xg()&&o.Zg(this.kg)}i+=o.jg(),e=Math.max(e,o.Kg()),n=Math.max(n,o.Qg()),r=Math.max(r,o.ty()),h=Math.max(h,o.sy())}return{width:i,height:e,fontBoundingBoxAscent:n,fontBoundingBoxDescent:r,zg:h}}iy(t,s,i,e,n,r){this.Lg.push(il.Hn(il.Dg.ey,{ny:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:n,zg:r}))}Dg(t,s,i,e,n){if("string"==typeof t&&(t=[il.Hn(il.Ag,{Rg:il.Hm(t)})]),il.bh(this.Lg),!t.length||1===t.length&&t[0].Jg()&&t[0].Pu()||i<2)return;if(1===t.length){const e=t[0];if(e.Jg()&&e.hy()<=100&&!e.oy()){let{width:t,height:r,fontBoundingBoxAscent:h,fontBoundingBoxDescent:o,zg:a}=s(e);if(t+=n,e.Yg(t),e.Vg(r),e.Ug(h||0),e.Hg(o||0),e.qg(a||0),t<=i)return void this.iy([e],t,r,h,o,a)}}let r;r="word"===e?this.ly(t):"cjk"===e?this.uy(t):this.py(t),this.my(r,s,i,n)}ly(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.gy();if(n.Xg())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.yy())if(sl(r))i.length>0&&s.push(i),s.push([il.Hn(il.Ag,{Rg:["\n"],_g:t})]),i=[];else if(0===i.length)i.push(il.Hn(il.Ag,{Rg:[r],_g:t})),e=Za(r);else{const n=Za(r);if(n===e){const s=i.at(-1);s.gy()===t?s.wy(r):i.push(il.Hn(il.Ag,{Rg:[r],_g:t}))}else s.push(i),i=[il.Hn(il.Ag,{Rg:[r],_g:t})],e=n}}return i.length>0&&s.push(i),s}uy(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.gy();if(n.Xg())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.yy())if(sl(r))i.length>0&&s.push(i),s.push([il.Hn(il.Ag,{Rg:["\n"],_g:t})]),i=[];else if(0===i.length)i.push(il.Hn(il.Ag,{Rg:[r],_g:t})),e=Ka(r);else if(e||Qa(r)){const s=i.at(-1);s.gy()===t?s.wy(r):i.push(il.Hn(il.Ag,{Rg:[r],_g:t})),e=Ka(r)}else s.push(i),i=[il.Hn(il.Ag,{Rg:[r],_g:t})],e=Ka(r)}return i.length>0&&s.push(i),s}py(t){const s=[];for(const i of t)if(i.Jg()){const t=i.yy();il.On(s,t.map((t=>[il.Hn(il.Ag,{Rg:[t],_g:i.gy()})])))}else s.push([i]);return s}Sy(t){return t.map((t=>t.by()))}vy(t,s){const i=t.length?t.at(-1):null;let e=0;i&&i.Jg()&&s[0].Jg()&&s[0].gy()===i.gy()&&(i.My(s[0].yy()),e=1);for(let i=s.length;e<i;++e){const i=s[e];t.push(i.by())}}my(t,s,i,e){let n=[],r=0,h=0,o=0,a=0,l=0;for(const e of t){if(1===e.length&&e[0].Jg()&&1===e[0].hy()&&sl(e[0].yy()[0])){if(0===h){const t=s(il.Hn(il.Ag,{Rg:[" "],_g:e[0].gy()}));h=t.height,o=t.fontBoundingBoxAscent||0,a=t.fontBoundingBoxDescent||0,l=t.zg||0}this.iy(n,r,h,o,a,l),n=[],r=0,h=0,o=0,a=0,l=0;continue}const t=this.Sy(n);this.vy(t,e);const u=this.Wg(t,s),c=u.width;if(c>=i)if(n.length>0&&this.iy(n,r,h,o,a,l),n=[],e[0].Jg()&&il.bm(e[0].yy()))r=0,h=0,o=0,a=0,l=0;else{this.vy(n,e);const t=this.Wg(n,s);r=t.width,h=t.height,o=t.fontBoundingBoxAscent,a=t.fontBoundingBoxDescent,l=t.zg}else n=t,r=c,h=u.height,o=u.fontBoundingBoxAscent,a=u.fontBoundingBoxDescent,l=u.zg}n.length>0&&this.iy(n,r,h,o,a,l),this.xy(s,e)}xy(t,s){for(const i of this.Lg){const e=i.Ty();if(!e.length)continue;let n=e.at(-1);if(n.Jg()){const r=n.yy(),h=r.slice(0);if(tl(h),0===h.length)i.Gy(-n.jg()),e.pop();else if(h.length<r.length){n.Iy(h);const s=t(n).width,e=n.jg()-s;n.Yg(s),i.Gy(-e)}0!==s&&e.length>0&&(n=e.at(-1),n.Gy(s),i.Gy(s))}}}Eu(){il.bh(this.Lg)}_y(){return this.Lg.reduce(((t,s)=>Math.max(t,s.jg())),0)}Cy(){return this.Lg.reduce(((t,s)=>t+s.Kg()),0)}}}{const nl=self._s;nl.Dg.ey=class{constructor(t){this.Tg=t.ny||[],this.Ey=t.width||-1,this.Py=t.height||-1,this.Ay=t.fontBoundingBoxAscent||-1,this.Ry=t.fontBoundingBoxDescent||-1,this.Oy=t.zg||-1,this.Fy=0,this.Dy=0}ny(){return this.Tg.values()}*Ly(){const t=this.Tg;for(let s=t.length-1;s>=0;--s)yield t[s]}Ty(){return this.Tg}Gy(t){this.Ey+=t}jg(){return this.Ey}Kg(){return this.Py}ky(){return this.Ay}ty(){return this.Ry}sy(){return this.Oy}Ny(t){this.Fy=t}$y(){return this.Fy}By(t){this.Dy=t}Wy(){return this.Dy}}}{const rl=self._s;rl.jy=class{constructor(t){this.Vy=t._g||[],this.Ey=t.width||-1,this.Py=t.height||-1,this.Ay=t.fontBoundingBoxAscent||-1,this.Ry=t.fontBoundingBoxDescent||-1,this.Oy=t.zg||-1,this.Fy=0,this.Dy=0}Jg(){return!1}Xg(){return!1}gy(){return this.Vy}Uy(t){const s=this.Vy;for(let i=s.length-1;i>=0;--i){const e=s[i];if(e.tag===t)return e}return null}Hy(t){return!!this.Uy(t)}qy(){const t=new Map;for(const s of this.Vy)t.set(s.tag,s.Cg);return t}Gy(t){this.Ey+=t}Yg(t){this.Ey=t}jg(){return this.Ey}Vg(t){this.Py=t}Kg(){return this.Py}Ug(t){this.Ay=t}Qg(){return this.Ay}Hg(t){this.Ry=t}ty(){return this.Ry}qg(t){this.Oy=t}sy(){return this.Oy}Ny(t){this.Fy=t}$y(){return this.Fy}By(t){this.Dy=t}Wy(){return this.Dy}}}{const hl=self._s;hl.Ag=class extends hl.jy{constructor(t){super(t),this.zy=t.Rg}Jg(){return!0}My(t){hl.On(this.zy,t),this.Ey=-1,this.Py=-1,this.Ay=-1,this.Ry=-1,this.Oy=-1}wy(t){this.zy.push(t)}by(){return hl.Hn(hl.Ag,{Rg:this.zy.slice(0),_g:this.Vy,width:this.Ey,height:this.Py,fontBoundingBoxAscent:this.Ay,fontBoundingBoxDescent:this.Ry,zg:this.Oy})}yy(){return this.zy}Iy(t){this.zy=t}hy(){return this.zy.length}Pu(){return 0===this.zy.length}oy(){return this.zy.includes("\n")}}}{const ol=self._s;ol.Pg=class extends ol.jy{constructor(t){super(t),this.Jy=t.icon}Xg(){return!0}Yy(){return this.Jy}by(){return ol.Hn(ol.Pg,{icon:this.Jy,_g:this.Vy,width:this.Ey,height:this.Py,fontBoundingBoxAscent:this.Ay,fontBoundingBoxDescent:this.Ry,zg:this.Oy})}Xy(t){if(!t)return null;let s=Number(this.Jy);return String(s)===this.Jy?(s=Math.floor(s),t.Zy(s)):t.Ky(this.Jy)}Zg(t){const s=this.Xy(t);this.Ey=s?this.Py*s.jg()/s.Kg():0}Qy(t){const s=this.Xy(t);return s?s.Qy():null}hy(){return 1}}}{const al=self._s;al.tw=class{constructor(t){this.sw=new Map,this.iw=t.ew,this.rw=t.hw}qn(){for(const t of this.sw.values())t.qn();this.sw.clear()}ow(t){let s=this.sw.get(t);if(s)return s;const i=this.iw(t);return s=al.Hn(al.aw,this,{source:t,lw:i}),this.sw.set(t,s),s}uw(t){return this.sw.has(t)}cw(t){const s=this.sw.get(t);s&&s.qn(),this.sw.delete(t)}async fw(t){return await this.rw(t)}}}{const ll=self._s;ll.aw=class{constructor(t,s){this.dw=t,this.pw=s.source,this.mw=[],this.gw=new Map,this.yw=!1,this.ww=!1,this.Sw=null;const i=s.lw.bw;for(let t=0,s=i.length;t<s;++t){const s=i[t],e=ll.Hn(ll.Mw,this,{index:t,tag:s.tag,source:s.source,width:s.width,height:s.height});this.mw.push(e),s.tag&&this.gw.set(s.tag.toLowerCase(),e)}}qn(){for(const t of this.mw)t.qn();ll.bh(this.mw),this.gw.clear(),this.dw=null,this.pw=null}xw(){return this.yw}Tw(){return this.ww}Gw(){return this.Sw||(this.Sw=this.Iw()),this.Sw}async Iw(){if(this.yw)return;this.yw=!0,this.ww=!0;const t=await this.dw.fw(this.pw);if(!this.dw)return;const s=t.bw;for(let t=0,i=Math.min(s.length,this.mw.length);t<i;++t){const i=s[t]._w;this.mw[t].Cw(i)}this.ww=!1}Zy(t){return(t=Math.floor(t))<0||t>=this.mw.length?null:this.mw[t]}Ky(t){return this.gw.get(t.toLowerCase())||null}}}{const ul=self._s;ul.Mw=class{constructor(t,s){this.Ew=t,this.pw=s.source||null,this.Pw=s.index,this.Aw=s.tag,this.Ey=s.width,this.Py=s.height,this.Rw=null}qn(){this.Ey=0,this.Py=0,this.Ew=null}Ow(){return this.pw}jg(){return this.Ey}Kg(){return this.Py}Cw(t){this.Rw=t}Qy(){return this.Rw}}}{let cl=function(t,s,i,e){const n=vl;gl.O(Sl,i,s),gl.O(bl,t,s),gl.It(n,Sl,bl),gl.normalize(n,n),e.set(n[0],n[1],n[2],gl.Gt(t,n))},fl=function(t,s,i,e,n,r,h){const o=h.x,a=h.y,l=h.z,u=h.w,c=h.Fw,f=h.Dw,d=h.Lw,p=1-c,m=1-f,g=1-d;return o*t*c+o*e*p+a*s*f+a*n*m+l*i*d+l*r*g>=u||o*e*c+o*t*p+a*n*f+a*s*m+l*r*d+l*i*g>u},dl=function(t,s,i,e){return e.x*t+e.y*s+e.z*i>=e.w};PlaneFromPoints=cl,IsInFrontOfPlane=fl,IsPointInFrontOfPlane=dl;const pl=self._s,ml=self.ls,gl=ml.ws,yl=ml.Ss,wl=ml.ds,Sl=gl.create(),bl=gl.create(),vl=gl.create(),Ml=yl.create(),xl=wl.create(),Tl=gl.create(),Gl=gl.create(),Il=gl.create(),_l=gl.create(),Cl=gl.create(),El=gl.create(),Pl=gl.create(),Al=gl.create(),Rl=yl.v(0,0,1,1);pl.kw={Nw(t,s,i,e,n,r,h){const o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15];let c=n[0]*o+n[4]*a+n[8]*l+n[12]*u,f=n[1]*o+n[5]*a+n[9]*l+n[13]*u,d=n[2]*o+n[6]*a+n[10]*l+n[14]*u,p=n[3]*o+n[7]*a+n[11]*l+n[15]*u;return 0!==p&&(p=1/p,c*=p,f*=p,d*=p,h[0]=(.5*c+.5)*r[2]+r[0],h[1]=(.5*f+.5)*r[3]+r[1],h[2]=.5*(1+d),!0)},$w(t,s,i,e,n,r,h){const o=xl,a=Ml;return wl.multiply(o,n,e),null!==wl.T(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,yl.At(a,a,o),0!==a[3]&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0))},Bw(t,s,i,e,n,r,h){const o=Sl,a=bl;if(!pl.kw.$w(t,s,0,e,n,r,o))return!1;if(!pl.kw.$w(t,s,1,e,n,r,a))return!1;const l=bl;gl.O(l,a,o);const u=vl;gl.set(u,0,0,1);const c=-i,f=gl.Gt(u,l);let d=0;if(0===f){if(0!==gl.Gt(u,o)+c)return!1}else if(d=-(gl.Gt(o,u)+c)/f,d<0)return!1;return gl.bt(h,o,l,d),!0}};class Ol{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Fw=NaN,this.Dw=NaN,this.Lw=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.Fw=t>0?1:0,this.Dw=s>0?1:0,this.Lw=i>0?1:0}}pl.kw.Ww=class{constructor(){this.jw=new Ol,this.Vw=new Ol,this.Uw=new Ol,this.Hw=new Ol,this.qw=new Ol,this.zw=new Ol}Jw(t,s){const i=Rl;pl.kw.$w(0,1,0,t,s,i,Tl),pl.kw.$w(1,1,0,t,s,i,Gl),pl.kw.$w(0,0,0,t,s,i,Il),pl.kw.$w(1,0,0,t,s,i,_l),pl.kw.$w(0,1,1,t,s,i,Cl),pl.kw.$w(1,1,1,t,s,i,El),pl.kw.$w(0,0,1,t,s,i,Pl),pl.kw.$w(1,0,1,t,s,i,Al),cl(Il,Tl,Cl,this.jw),cl(Tl,Gl,El,this.Vw),cl(Gl,_l,Al,this.Uw),cl(_l,Il,Pl,this.Hw),cl(Pl,Cl,El,this.zw),cl(_l,Gl,Tl,this.qw)}Yw(t,s,i,e,n,r){return fl(t,s,i,e,n,r,this.jw)&&fl(t,s,i,e,n,r,this.Vw)&&fl(t,s,i,e,n,r,this.Uw)&&fl(t,s,i,e,n,r,this.Hw)&&fl(t,s,i,e,n,r,this.qw)&&fl(t,s,i,e,n,r,this.zw)}Xw(t,s,i){return!dl(t,s,i,this.qw)}}}{const Fl=self._s,Dl=self.ls,Ll=Dl.ws,kl=Dl.Ss,Nl=Dl.ds,$l=Nl.create(),Bl=Ll.v(0,0,0),Wl=Ll.v(0,0,0),jl=Ll.v(0,0,0),Vl=Ll.v(0,1,0),Ul=kl.v(0,0,0,0),Hl=new Fl.Cl,ql=new Fl.Rect,zl=new Fl.Cl(0,0,1,0,1,1,0,1),Jl={Zw:1,Kw:1e4},Yl=Nl.v(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Fl.kw.Qw=class{constructor(t){t=Object.assign({},Jl,t),this.Ey=0,this.Py=0,this.tS=Fl.Qn(45),this.sS=Math.tan(this.tS/2),this.iS=Nl.create(),this.eS=Nl.create(),this.nS=!1,this.rS=t.Zw,this.hS=t.Kw,this.oS=[],this.aS=new Map,this.lS=null,this.uS=null,this.cS=null,this.fS=null,this.dS=null,this.pS=null,this.mS=null,this.gS=null,this.yS=null,this.wS=null,this.SS=null,this.bS=null,this.vS=new Map,this.MS=null,this.xS=[],this.TS=new Map,this.GS=0,this.IS=0,this._S=1,this.CS=[this._S],this.ES=1,this.PS=[this.ES],this.AS=.5,this.RS=[this.AS],this.OS=0,this.FS=!0,this.DS=!1}LS(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}kS(){this.GS=0,this.IS=0,this.lS=null,this.uS=null,this.cS=null,this.fS=null,this.dS=null,this.pS=null,this.mS=null,this.gS=null,this.yS=null,this.wS=null,this.SS=null,this.bS=null,this.NS()}$S(){this.kS(),this.MS=null}BS(){for(const t of this.oS)t.qn();this.kS()}jg(){return this.Ey}Kg(){return this.Py}WS(t){return this.jS()?100:t/(2*this.VS())}US(t){return this.jS()?t/(2*this.VS())/this.WS(t):1}HS(t){this.rS=t}qS(){return this.rS}zS(t){this.hS=t}JS(){return this.hS}YS(t){this.tS=t,this.sS=Math.tan(this.tS/2)}XS(){return this.tS}VS(){return this.sS}ZS(){this.nS=!1}KS(){this.nS=!0}jS(){return!this.nS}QS(){return this.nS}tb(t,s,i=.5,e=.5){const n=this.qS(),r=this.JS(),h=this.XS();if(.5===i&&.5===e)this.sb()?Nl.ut(t,h,s,n,r):Nl.perspective(t,h,s,n,r);else{const h=2*(i=1-i)-2,o=2*i,a=2*e-2,l=2*e,u=this.VS()*n,c=u*s;Nl.ot(t,h*c,o*c,a*u,l*u,n,r),this.sb()&&Nl.mul(t,Yl,t)}}ib(t,s,i,e=1){const n=self.devicePixelRatio,r=2*this.WS(i)*n*this.VS()/i,h=s*r/(2*n*e),o=i*r/(2*n*e),a=-h,l=h,u=-o,c=o;this.sb()?Nl.gt(t,a,l,u,c,this.qS(),this.JS()):Nl.dt(t,a,l,u,c,this.qS(),this.JS())}eb(t,s,i,e,n,r=1){let h=1;this.jS()&&(h=200*this.VS()/n);const o=jl;Ll.set(o,h,-h,1);const a=Bl,l=Wl;Ll.multiply(a,s,o),Ll.multiply(l,i,o),Nl.yt(t,a,l,e||Vl),o[2]=r,Nl.scale(t,t,o)}nb(t,s,i,e,n,r,h,o){return Ll.set(Bl,t,s,i),Ll.set(Wl,e,n,r),this.eb($l,Bl,Wl,Vl,h,o),$l}rb(t){this.oS.push(t),this.aS.set(t.Ec(),t)}hb(t){const s=this.oS.indexOf(t);-1!==s&&this.oS.splice(s,1),this.aS.delete(t.Ec())}NS(){Fl.bh(this.oS),this.aS.clear()}ob(t){return this.aS.get(t)||null}ab(){return this.lS}lb(){this.ub(this.lS)}cb(){return this.uS}fb(){this.ub(this.uS)}pb(){this.ub(this.cS)}mb(){this.ub(this.fS)}gb(){this.ub(this.dS)}yb(){this.ub(this.pS)}wb(){this.ub(this.mS)}Sb(){this.ub(this.gS)}bb(){this.ub(this.yS)}Mb(){this.ub(this.wS)}xb(){this.ub(this.SS)}Tb(){this.ub(this.bS)}Gb(t){this.MS=t}Ib(){return this.MS}_b(t,s,i,e){const n=Fl.kw.Eb.Cb(t,s,i,e);let r=this.vS.get(n);return r||(r=Fl.Hn(Fl.kw.Eb,this,t,s,i,e),this.vS.set(n,r)),r.Pb(),r}Ab(t){t.Rb(),0===t.Ob()&&(this.MS===t&&(this.MS=null),this.vS.delete(t.Fb()),t.qn())}Db(t){Fl.bh(this.xS),this.TS.clear();let s=0;for(const i of t){const t=i[0],e=i[1],n=i[2];this.xS.push([e,n]),this.TS.set(t,{number:s,Lb:e,kb:n}),s++}}Nb(t){return this.xS[t]}$b(t){return this.Nb(t)[0]}Bb(t){return this.Nb(t)[1]}Wb(t){const s=this.TS.get(t);if(void 0===s)throw new Error("invalid blend name");return s}jb(t){const s=this.TS.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}Vb(t){this.GS=t}Ub(){return this.GS}Hb(t){this.IS=t,this.MS=null}qb(){return this.IS}ey(t,s,i,e){const n=Fl.rr(t,s,i,e),r=Math.sin(n),h=Math.cos(n),o=.5*this._S,a=r*o,l=h*o,u=this.ES;2===u?this.zb(t,s,0,i,e,0,a,l):1===u?this.Jb(t,s,0,i,e,0,a,l):this.Yb(t,s,0,i,e,0,a,l)}Xb(t,s,i,e,n,r){const h=Fl.rr(t,s,e,n),o=Math.sin(h),a=Math.cos(h),l=.5*this._S,u=o*l,c=a*l,f=this.ES;2===f?this.zb(t,s,i,e,n,r,u,c):1===f?this.Jb(t,s,i,e,n,r,u,c):this.Yb(t,s,i,e,n,r,u,c)}zb(t,s,i,e,n,r,h,o){const a=this.AS,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=2*o,p=2*h,m=l+h,g=u-o,y=l-h+d,w=u+o+p,S=c+h,b=f-o,v=c-h-d,M=f+o-p;this.Zb(m,g,i,S,b,r,v,M,r,y,w,i,zl)}Jb(t,s,i,e,n,r,h,o){const a=this.AS,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,b=f+o;this.Zb(d,p,i,y,w,r,S,b,r,m,g,i,zl)}Yb(t,s,i,e,n,r,h,o){const a=this.AS,l=t+a,u=s+a,c=e+a,f=n+a,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,b=f+o;this.Zb(d,p,i,y,w,r,S,b,r,m,g,i,zl)}Kb(t,s,i,e,n,r){const h=Fl.rr(t,s,i,e),o=Math.sin(h),a=Math.cos(h),l=.5*this._S,u=o*l,c=a*l,f=this.ES;2===f?this.Qb(t,s,i,e,u,c,n,r):1===f?this.tv(t,s,i,e,u,c,n,r):this.sv(t,s,i,e,u,c,n,r)}Qb(t,s,i,e,n,r,h,o){const a=this.AS,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=2*r,p=2*n,m=l+n,g=u-r,y=l-n+d,w=u+r+p,S=c+n,b=f-r,v=c-n-d,M=f+r-p;Hl.set(m,g,S,b,v,M,y,w),ql.set(h,0,o,0),this.ev(Hl,ql)}tv(t,s,i,e,n,r,h,o){const a=this.AS,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,S=c-n,b=f+r;Hl.set(d,p,y,w,S,b,m,g),ql.set(h,0,o,0),this.ev(Hl,ql)}sv(t,s,i,e,n,r,h,o){const a=this.AS,l=t+a,u=s+a,c=i+a,f=e+a,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,S=c-n,b=f+r;Hl.set(d,p,y,w,S,b,m,g),ql.set(h,0,o,0),this.ev(Hl,ql)}nv(t,s,i,e){const n=.5*this._S,r=this.ES;2===r?this.rv(t,s,i,e,n):1===r?this.hv(t,s,i,e,n):this.ov(t,s,i,e,n)}rv(t,s,i,e,n){this.zb(t,s,0,i,s,0,0,n),this.zb(i,s,0,i,e,0,n,0),this.zb(i,e,0,t,e,0,0,-n),this.zb(t,e,0,t,s,0,-n,0)}hv(t,s,i,e,n){this.Jb(t,s,0,i,s,0,0,n),this.Jb(i,s,0,i,e,0,n,0),this.Jb(i,e,0,t,e,0,0,-n),this.Jb(t,e,0,t,s,0,-n,0)}ov(t,s,i,e,n){this.Yb(t,s,0,i,s,0,0,n),this.Yb(i,s,0,i,e,0,n,0),this.Yb(i,e,0,t,e,0,0,-n),this.Yb(t,e,0,t,s,0,-n,0)}av(t){this.nv(t.Ka(),t.Qa(),t.tl(),t.sl())}lv(t){const s=Fl.rr(t.$r(),t.Br(),t.Wr(),t.jr()),i=Math.sin(s),e=Math.cos(s),n=.5*this._S,r=i*n,h=e*n,o=this.ES;2===o?this.uv(t,r,h):1===o?this.cv(t,r,h):this.fv(t,r,h)}uv(t,s,i){this.zb(t.$r(),t.Br(),0,t.Wr(),t.jr(),0,s,i),this.zb(t.Wr(),t.jr(),0,t.Vr(),t.Ur(),0,i,-s),this.zb(t.Vr(),t.Ur(),0,t.Hr(),t.qr(),0,-s,-i),this.zb(t.Hr(),t.qr(),0,t.$r(),t.Br(),0,-i,s)}cv(t,s,i){this.Jb(t.$r(),t.Br(),0,t.Wr(),t.jr(),0,s,i),this.Jb(t.Wr(),t.jr(),0,t.Vr(),t.Ur(),0,i,-s),this.Jb(t.Vr(),t.Ur(),0,t.Hr(),t.qr(),0,-s,-i),this.Jb(t.Hr(),t.qr(),0,t.$r(),t.Br(),0,-i,s)}fv(t,s,i){this.Yb(t.$r(),t.Br(),0,t.Wr(),t.jr(),0,s,i),this.Yb(t.Wr(),t.jr(),0,t.Vr(),t.Ur(),0,i,-s),this.Yb(t.Vr(),t.Ur(),0,t.Hr(),t.qr(),0,-s,-i),this.Yb(t.Hr(),t.qr(),0,t.$r(),t.Br(),0,-i,s)}dv(t){this._S=t,this.CS[this.CS.length-1]=t}pv(){return this._S}mv(t){if(this.CS.length>=100)throw new Error("pushed too many line widths - check push/pop pairs");this.CS.push(t),this._S=t}gv(){if(this.CS.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.CS.pop(),this._S=this.CS.at(-1)}yv(){this.ES=0,this.PS[this.PS.length-1]=0}wv(){this.ES=1,this.PS[this.PS.length-1]=0}Sv(){this.ES=2,this.PS[this.PS.length-1]=0}bv(t){if("butt"===t)this.vv();else if("square"===t)this.Mv();else{if("zag"!==t)throw new Error("invalid line cap");this.xv()}}vv(){if(this.PS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.PS.push(0),this.ES=0}Mv(){if(this.PS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.PS.push(1),this.ES=1}xv(){if(this.PS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.PS.push(2),this.ES=2}Tv(){if(this.PS.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.PS.pop(),this.ES=this.PS.at(-1)}Gv(t){this.AS=t,this.RS[this.RS.length-1]=t}Iv(){return this.AS}_v(t){if(this.RS.length>=100)throw new Error("pushed too many line offsets - check push/pop pairs");this.RS.push(t),this.AS=t}Cv(){if(this.RS.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.RS.pop(),this.AS=this.RS.at(-1)}Ev(t){const s=t.length/2;if(s<3)throw new Error("need at least 3 points");const i=s-2,e=i-1,n=t[0],r=t[1];for(let s=0;s<i;s+=2){const i=2*s,h=t[i+2],o=t[i+3],a=t[i+4],l=t[i+5];if(s===e)this.Pv(n,r,h,o,a,l,a,l);else{const s=t[i+6],e=t[i+7];this.Pv(n,r,h,o,a,l,s,e)}}}Av(){return 3}Rv(){this.Ov(!0),this.OS++}Fv(){return this.OS}Dv(){this.OS++}Lv(t){this.FS=!!t}kv(){return this.FS}Nv(t){this.DS=!!t}$v(){return this.DS}Bv(){return!1}sb(){return!1}Wv(){}jv(){}Vv(){}Uv(){return this.Wv()+this.jv()+this.Vv()}Hv(){return Fl.Hn(Fl.kw.qv,this)}}}{const Xl=self._s;Xl.kw.zv=class{constructor(t,s){this.Yn=s.name,this.Jv=t,this.Yv=s.Xv||0,this.Zv=s.Kv||0,this.Qv=!!s.tM,this.sM=!!s.iM,this.eM=!!s.nM,this.rM=!!s.hM,this.oM=!!s.animated,this.aM=!!s.lM,this.uM=!!s.cM,this.fM=!1,this.dM=this.Qv||this.aM||0!==this.Yv||0!==this.Zv}qn(){this.Jv=null}pM(){return this.Jv}Ec(){return this.Yn}mM(){return 0!==this.Yv||0!==this.Zv}gM(){return this.Yv}yM(){return this.Zv}wM(){return this.Qv}SM(){return this.sM}bM(){return this.eM}vM(){return this.rM}MM(){return this.oM}xM(){return this.aM}TM(){return this.uM}GM(){return this.fM}IM(){return this.dM}_M(){return!1}}}{const Zl=self._s;Zl.kw.Eb=class{constructor(t,s,i,e,n){this.Jv=t,this.Up=0,this.CM=null,this.EM="",this.PM=i,this.AM=Zl.Hn(Zl.To),this.AM.set(e),this.RM=n,"string"==typeof s?this.EM=s:(this.CM=s,this.EM=this.CM.Ec())}qn(){if(this.Up>0)throw new Error("releasing state group still in use");this.Jv=null,this.CM=null,this.EM=""}OM(){const t=this.Jv;t.ub(this.CM),t.FM(this.PM),t.DM(this.AM),t.Hb(this.RM),t.Gb(this)}Fb(){return Zl.kw.Eb.Cb(this.EM,this.PM,this.AM,this.RM)}Pb(){++this.Up}Rb(){--this.Up}Ob(){return this.Up}LM(){this.CM=null}kM(t){if(this.CM=t.ob(this.EM),!this.CM)throw new Error("failed to restore shader program")}static Cb(t,s,i,e){return("string"==typeof t?t:t.Ec())+","+s+","+i.No()+","+i.$o()+","+i.Bo()+","+i.Wo()+","+e}}}{let Kl=function(t,s,i){const e=i.$r(),n=i.Br(),r=i.Wr()-e,h=i.jr()-n;return[e+r*t+(i.Hr()-e)*s,n+h*t+(i.qr()-n)*s]};interpolateQuad=Kl;const Ql=self._s,tu=Ql.Hn(Ql.Cl);Ql.kw.NM=class{constructor(t,s,i){this.$M=t,this.BM=s,this.WM=i,this.Ea=NaN,this.Pa=NaN,this.RM=NaN,this.jM=NaN,this.VM=NaN,this.Ea=0,this.Pa=0,this.RM=0,this.jM=0,this.VM=0}UM(t,s,i,e){this.Ea=t,this.Pa=s,this.jM=i,this.VM=e}HM(){return this.Ea}qM(t){this.Ea!==t&&(this.Ea=t,this.$M.zM())}JM(){return this.Pa}YM(t){this.Pa!==t&&(this.Pa=t,this.$M.zM())}XM(){return this.RM}ZM(t){this.RM!==t&&(this.RM=Math.max(t,0),this.$M.zM())}KM(){return this.jM}QM(t){this.jM=t}tx(){return this.VM}sx(t){this.VM=t}ix(t,s,i){[this.Ea,this.Pa]=Kl(t.Ea,t.Pa,s),this.RM=t.RM,this.jM=Ql._t(i.Ka(),i.tl(),t.jM),this.VM=Ql._t(i.Qa(),i.sl(),t.VM)}nx(t,s,i){[this.Ea,this.Pa]=Kl(t.Ea,t.Pa,s),this.RM=t.RM,[this.jM,this.VM]=Kl(t.jM,t.VM,i)}hx(){return{x:this.HM(),y:this.JM(),z:this.XM(),u:this.KM(),v:this.tx()}}ox(t){this.qM(t.x),this.YM(t.y),t.hasOwnProperty("z")&&this.ZM(t.z),this.QM(t.u),this.sx(t.v)}lx(){return this.$M}ux(){return this.BM}mx(){return this.WM}},Ql.kw.gx=class{constructor(t,s,i){if(t<2||s<2)throw new Error("invalid mesh size");this.yx=t,this.wx=s,this.Sx=i||null,this.bx=[],this.vx=0,this.Mx=0,this.xx=1,this.Tx=1,this.Gx=0,this.Ix=!1;const e=t-1,n=s-1;for(let i=0;i<s;++i){const s=[];for(let r=0;r<t;++r){const t=Ql.Hn(Ql.kw.NM,this,r,i),h=r/e,o=i/n;t.UM(h,o,h,o),s.push(t)}this.bx.push(s)}}qn(){Ql.bh(this.bx)}_x(){return this.yx}Cx(){return this.wx}Ex(){return this.Sx}Px(){return this.bx}zM(){this.Ix=!0}Ax(){if(!this.Ix)return;let t=1/0,s=1/0,i=-1/0,e=-1/0,n=0;for(const r of this.bx)for(const h of r){const r=h.HM(),o=h.JM();t=Math.min(t,r),s=Math.min(s,o),i=Math.max(i,r),e=Math.max(e,o),n=Math.max(n,h.XM())}this.vx=t,this.Mx=s,this.xx=i,this.Tx=e,this.Gx=n,this.Ix=!1}Rx(){return this.Ax(),this.vx}Ox(){return this.Ax(),this.Mx}Fx(){return this.Ax(),this.xx}Dx(){return this.Ax(),this.Tx}Lx(){return this.Ax(),this.Gx}kx(){return this.Lx()>0}Nx(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.yx||s<0||s>=this.wx?null:this.bx[s][t]}$x(t,s,i){const e=i instanceof Ql.Rect;if(t._x()!==this._x()||t.Cx()!==this.Cx())throw new Error("source mesh wrong size");const n=t.bx,r=this.bx;for(let t=0,h=r.length;t<h;++t){const h=n[t],o=r[t];for(let t=0,n=o.length;t<n;++t){const n=h[t],r=o[t];e?r.ix(n,s,i):r.nx(n,s,i)}}}Bx(t){const s=this.bx;let i=s[0];for(let e=1,n=s.length;e<n;++e){const n=s[e];let r=i[0],h=n[0];for(let s=1,e=n.length;s<e;++s){const e=i[s],o=n[s];tu.set(r.KM(),r.tx(),e.KM(),e.tx(),o.KM(),o.tx(),h.KM(),h.tx()),t.Zb(r.HM(),r.JM(),r.XM(),e.HM(),e.JM(),e.XM(),o.HM(),o.JM(),o.XM(),h.HM(),h.JM(),h.XM(),tu),r=e,h=o}i=n}}Wx(t,s){s||(s=(t,s,i)=>[t,s,i]);const i=this.bx;let e=i[0];for(let n=1,r=i.length;n<r;++n){const h=i[n];let o=e[0],a=h[0];for(let i=1,l=h.length;i<l;++i){const u=e[i],c=h[i],[f,d,p]=s(o.HM(),o.JM(),o.XM()),[m,g,y]=s(u.HM(),u.JM(),u.XM()),[w,S,b]=s(c.HM(),c.JM(),c.XM()),[v,M,x]=s(a.HM(),a.JM(),a.XM());t.Xb(f,d,p,m,g,y),t.Xb(f,d,p,w,S,b),t.Xb(f,d,p,v,M,x),i===l-1&&t.Xb(m,g,y,w,S,b),n===r-1&&t.Xb(v,M,x,w,S,b),o=u,a=c}e=h}}jx(t){const s=.001,i=.99999999,e=t.du(),n=[],r=this._x()-1,h=this.Cx()-1,o=1/r,a=1/h,l=r-1,u=h-1;let c=e[0],f=e[1],d=Ql.Zn(Math.floor(c*r),0,l),p=Ql.Zn(Math.floor(f*h),0,u),m=!0,g=0,y=0,w=0,S=-1;const b=()=>{c=Ql.Zn(Ql._t(c,g,w),0,1),f=Ql.Zn(Ql._t(f,y,w),0,1),n.push(c,f)};for(let t=0,v=e.length;t<v;t+=2){c=e[t],f=e[t+1],n.push(c,f),d=Ql.Zn(Math.floor(c*r),0,l),p=Ql.Zn(Math.floor(f*h),0,u);const M=(t+2)%v;for(g=e[M],y=e[M+1],S=-1;;){if(n.length>1e6)throw new Error("Too many mesh poly points");const t=d*o,e=p*a,r=(d+1)*o,h=(p+1)*a;if(m=Ql.Xr(c,f,t,e,r,e,r,h),0!==S&&(w=Ql.Yr(c,f,g,y,t,e,r,h,-.001),w>=0&&w<=i))b(),m=!m,S=0;else if(p>0&&2!==S&&(w=Ql.Yr(c,f,g,y,t,e,r,e,s),w>=0&&w<=i))b(),p--,m=!1,S=4;else if(d<l&&3!==S&&(w=Ql.Yr(c,f,g,y,r,e,r,h,s),w>=0&&w<=i))b(),d++,m=!1,S=1;else if(d>0&&1!==S&&(w=Ql.Yr(c,f,g,y,t,e,t,h,s),w>=0&&w<=i))b(),d--,m=!0,S=3;else{if(!(p<u&&4!==S&&(w=Ql.Yr(c,f,g,y,t,h,r,h,s),w>=0&&w<=i)))break;b(),p++,m=!0,S=2}}}return Ql.Hn(Ql.au,n)}Vx(t,s){const i=this.Ux(t);this.Hx(i),s.mu(i)}Ux(t){const s=[],i=t.du();for(let t=0,e=i.length;t<e;t+=2){const e=i[t],n=i[t+1],[r,h]=this.qx(e,n);s.push(r,h)}return s}qx(t,s){const i=this._x()-1,e=this.Cx()-1,n=1/i,r=1/e,h=Ql.Zn(Math.floor(t*i),0,i-1),o=Ql.Zn(Math.floor(s*e),0,e-1),a=h*n,l=o*r,u=(h+1)*n,c=(o+1)*r,f=this.Nx(h,o),d=this.Nx(h+1,o+1),p=Ql.Xr(t,s,a,l,u,l,u,c),m=p?a+n:a,g=p?l:l+r,y=this.Nx(h+(p?1:0),o+(p?0:1)),[w,S,b]=Ql.Zr(t,s,a,l,m,g,u,c);return Ql.Kr(w,S,b,f.HM(),f.JM(),f.XM(),y.HM(),y.JM(),y.XM(),d.HM(),d.JM(),d.XM())}Hx(t){const s=[],i=1e-7;let e=t[0],n=t[1],r=e-t.at(-2),h=n-t.at(-1);for(let o=0,a=t.length;o<a;o+=2){const l=(o+2)%a,u=t[l],c=t[l+1],f=u-e,d=c-n,p=Math.abs(f)<i&&Math.abs(r)<i&&Math.sign(d)===Math.sign(h),m=Math.abs(d)<i&&Math.abs(h)<i&&Math.sign(f)===Math.sign(r);(!p&&!m&&Math.abs(f/r-d/h)>.001||0==f&&0===d)&&s.push(e,n),e=u,n=c,r=f,h=d}s.length>=6&&s.length<t.length&&Ql.Gh(t,s)}hx(){return{cols:this._x(),rows:this.Cx(),points:this.bx.map((t=>t.map((t=>t.hx()))))}}ox(t){const s=this._x(),i=this.Cx();if(t.cols!==s||t.rows!==i)throw new Error("mesh data wrong size");const e=t.points;for(let t=0;t<i;++t){const i=e[t];for(let e=0;e<s;++e)this.Nx(e,t).ox(i[e])}}}}{let su=function(t,s){let i,e,n,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,n=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,n=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{zx:i,Jx:e,format:n,type:r}};GetFormatSpecifiers=su;const iu=self._s,eu=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),nu=new Set(["nearest","bilinear","trilinear"]),ru=new Set(["default","low","high"]),hu=new Set(["clamp-to-edge","repeat","mirror-repeat"]),ou={Yx:"clamp-to-edge",Xx:"clamp-to-edge",Zx:"trilinear",Kx:0,Qx:"rgba8",tT:!0,sT:"default",iT:!0,eT:!1,width:-1,height:-1},au={iT:!0,flipY:!1},lu=new Set;iu.kw.nT=class{constructor(t){this.Jv=t,this.rT=null,this.Ey=0,this.Py=0,this.hT=!0,this.oT="clamp-to-edge",this.aT="clamp-to-edge",this.lT="trilinear",this.uT=0,this.cT="rgba8",this.fT=!1,this.dT="default",this.Up=0}pT(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData||t instanceof ArrayBuffer||null===t))throw new Error("invalid texture source");if(s=Object.assign({},ou,s),this.rT)throw new Error("already created texture");if(this.oT=s.Yx,this.aT=s.Xx,this.lT=s.Zx,this.uT=s.Kx,this.cT=s.Qx,this.fT=!!s.tT&&this.Jv.kv(),this.dT=s.sT,!hu.has(this.oT)||!hu.has(this.aT))throw new Error("invalid wrap mode");if(!nu.has(this.lT))throw new Error("invalid sampling");if(!eu.has(this.cT))throw new Error("invalid pixel format");if(!ru.has(this.dT))throw new Error("invalid mipmap quality");if(this.hT=!0,t instanceof ArrayBuffer||null===t||s.eT){if(this.Ey=s.width,this.Py=s.height,t instanceof ArrayBuffer&&t.byteLength!==this.Ey*this.Py*4)throw new Error("ArrayBuffer wrong size")}else this.Ey=t.width,this.Py=t.height;if(this.Ey<=0||this.Py<=0)throw new Error("invalid texture data size");if(s.eT){const s=iu.co(this.Ey,this.Py);s.getContext("2d").drawImage(t,0,0,this.Ey,this.Py),t=s}const i=iu.br(this.Ey)&&iu.br(this.Py),e=this.Jv.mT();if(this.Ey>e||this.Py>e)throw new Error("texture data exceeds maximum texture size");const n=this.Jv.gT(),r=this.Jv.yT();this.rT=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.rT),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.iT),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const h=su(this.cT,n);if(this.Jv.wT()||i||!this.ST())if(r>=2){let s;s=this.fT?Math.floor(Math.log2(Math.max(this.Ey,this.Py))+1):1,n.texStorage2D(n.TEXTURE_2D,s,h.zx,this.Ey,this.Py),t instanceof ArrayBuffer?n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.Ey,this.Py,h.format,h.type,new Uint8Array(t)):null!==t&&n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,t)}else t instanceof ArrayBuffer?n.texImage2D(n.TEXTURE_2D,0,h.Jx,this.Ey,this.Py,0,h.format,h.type,new Uint8Array(t)):null===t?n.texImage2D(n.TEXTURE_2D,0,h.Jx,this.Ey,this.Py,0,h.format,h.type,null):n.texImage2D(n.TEXTURE_2D,0,h.Jx,h.format,h.type,t);else{if(null===t)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if(t instanceof ArrayBuffer&&(t=new ImageData(new Uint8ClampedArray(t),this.Ey,this.Py)),t instanceof ImageData){const s=iu.co(this.Ey,this.Py);s.getContext("2d").putImageData(t,0,0),t=s}const s=iu.co(iu.vr(this.Ey),iu.vr(this.Py)),i=s.getContext("2d");i.imageSmoothingEnabled="nearest"!==this.lT,i.drawImage(t,0,0,this.Ey,this.Py,0,0,s.width,s.height),n.texImage2D(n.TEXTURE_2D,0,h.Jx,h.format,h.type,s)}null!==t&&this.bT(n),n.bindTexture(n.TEXTURE_2D,null),this.Jv.vT(),this.Up=1,lu.add(this)}MT(t,s,i){if(i=Object.assign({},ou,i),this.rT)throw new Error("already created texture");if(this.oT=i.Yx,this.aT=i.Xx,this.lT=i.Zx,this.cT=i.Qx,this.fT=!!i.tT&&this.Jv.kv(),this.dT=i.sT,!hu.has(this.oT)||!hu.has(this.aT))throw new Error("invalid wrap mode");if(!nu.has(this.lT))throw new Error("invalid sampling");if(!eu.has(this.cT))throw new Error("invalid pixel format");if(!ru.has(this.dT))throw new Error("invalid mipmap quality");this.hT=!1,this.Ey=Math.floor(t),this.Py=Math.floor(s);const e=iu.br(this.Ey)&&iu.br(this.Py),n=this.Jv.mT();if(this.Ey<=0||this.Py<=0)throw new Error("invalid texture size");if(this.Ey>n||this.Py>n)throw new Error("texture exceeds maximum texture size");if(!this.Jv.wT()&&this.ST()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.Jv.gT(),h=this.Jv.yT();this.rT=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.rT),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.iT),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const o=su(this.cT,r),a=h>=2?o.zx:o.Jx;r.texImage2D(r.TEXTURE_2D,0,a,this.Ey,this.Py,0,o.format,o.type,null),this.bT(r),r.bindTexture(r.TEXTURE_2D,null),this.Jv.vT(),this.Up=1,lu.add(this)}xT(t){if("default"===this.dT)return this.hT?t.NICEST:t.FASTEST;if("low"===this.dT)return t.FASTEST;if("high"===this.dT)return t.NICEST;throw new Error("invalid mipmap quality")}ST(){return"clamp-to-edge"!==this.oT||"clamp-to-edge"!==this.aT}TT(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}bT(t){const s=iu.br(this.Ey)&&iu.br(this.Py);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.TT(t,this.oT)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.TT(t,this.aT)),"nearest"===this.lT)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.fT=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.Jv.wT())&&this.fT){t.hint(t.GENERATE_MIPMAP_HINT,this.xT(t)),t.generateMipmap(t.TEXTURE_2D);const s="trilinear"===this.lT&&!this.Jv.$v();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.fT=!1;const i=this.Jv.GT();i&&this.uT>0&&"nearest"!==this.lT&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.uT,this.Jv.IT()))}_T(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.rT||this.Up<=0)throw new Error("texture not created");if(this.hT)throw new Error("cannot update static texture");s=Object.assign({},au,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,n=this.Jv.yT(),r=this.Jv.gT();r.bindTexture(r.TEXTURE_2D,this.rT),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.iT),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY);const h=su(this.cT,r),o=n>=2?h.zx:h.Jx;try{if(this.Ey===i&&this.Py===e){const s=iu.br(this.Ey)&&iu.br(this.Py);r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,t),(s||this.Jv.wT())&&this.fT&&(r.hint(r.GENERATE_MIPMAP_HINT,this.xT(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.Ey=i,this.Py=e;const s=iu.br(this.Ey)&&iu.br(this.Py);if(!this.Jv.wT()&&this.ST()&&!s)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,h.format,h.type,t),(s||this.Jv.wT())&&this.fT&&(r.hint(r.GENERATE_MIPMAP_HINT,this.xT(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.Jv.vT()}CT(){if(this.Up>0)throw new Error("texture still has references");if(!this.rT)throw new Error("already deleted texture");lu.delete(this),this.Jv.gT().deleteTexture(this.rT),this.rT=null}ET(){return!!this.rT}PT(){return this.rT}pM(){return this.Jv}AT(){this.Up++}RT(){if(this.Up<=0)throw new Error("no more references");this.Up--}OT(){return this.Up}jg(){return this.Ey}Kg(){return this.Py}FT(){return this.hT}DT(){let t=this.Ey*this.Py;switch(this.cT){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.fT&&(t+=Math.floor(t/3)),t}static LM(){lu.clear()}static LT(){return lu.values()}}}{const uu=self._s,cu=self.assert,fu=self.ls,du=fu.ws,pu=fu.ds,mu=new Set(["nearest","bilinear","trilinear"]),gu={Zx:"trilinear",alpha:!0,depth:!1,kT:!0,NT:!0,$T:0},yu=new Set;uu.kw.BT=class{constructor(t){this.Jv=t,this.WT=null,this.jT=null,this.rT=null,this.VT=null,this.Ey=0,this.Py=0,this.UT=!0,this.lT="trilinear",this.HT=!0,this.qT=!1,this.zT=!0,this.JT=0,this.YT=pu.create(),this.XT=0,this.ZT=0,this.KT=0}QT(t,s,i){i=Object.assign({},gu,i);const e=this.Jv.yT();if(this.rT||this.VT)throw new Error("already created render target");if(this.lT=i.Zx,this.HT=!!i.alpha,this.qT=!!i.depth,this.zT=!!i.kT,this.UT=!!i.NT,this.JT=i.$T,!mu.has(this.lT))throw new Error("invalid sampling");if(this.JT>0&&(e<2||this.zT))throw new Error("invalid use of multisampling");if(e<2&&(this.zT=!0),this.Ey=t,this.Py=s,this.Ey<=0||this.Py<=0)throw new Error("invalid render target size");this.tG();const n=this.Jv.gT();if(this.WT=n.createFramebuffer(),this.qT&&(this.jT=n.createFramebuffer()),this.zT){this.rT=this.Jv.sG(this.Ey,this.Py,{Zx:this.lT,Qx:this.HT?"rgba8":"rgb8",tT:!1});const t=this.rT.PT();n.bindFramebuffer(n.FRAMEBUFFER,this.WT),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),this.qT&&(n.bindFramebuffer(n.FRAMEBUFFER,this.jT),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0))}else{this.VT=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.VT);const t=this.HT?n.RGBA8:n.RGB8;if(this.JT>0){const s=n.getInternalformatParameter(n.RENDERBUFFER,t,n.SAMPLES);if(s&&s[0]){const t=s[0];this.JT>t&&(this.JT=t)}else this.JT=0}0===this.JT?n.renderbufferStorage(n.RENDERBUFFER,t,this.Ey,this.Py):n.renderbufferStorageMultisample(n.RENDERBUFFER,this.JT,t,this.Ey,this.Py),n.bindFramebuffer(n.FRAMEBUFFER,this.WT),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.VT),this.qT&&(n.bindFramebuffer(n.FRAMEBUFFER,this.jT),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.VT)),n.bindRenderbuffer(n.RENDERBUFFER,null)}const r=this.Jv.iG();this.qT&&r&&(n.bindFramebuffer(n.FRAMEBUFFER,this.WT),this.Jv.eG()?n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,r,0):n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r)),n.bindFramebuffer(n.FRAMEBUFFER,null),yu.add(this)}nG(t,s){if(this.Ey===t&&this.Py===s)return;this.Ey=t,this.Py=s,this.tG();const i=this.Jv.gT();i.bindFramebuffer(i.FRAMEBUFFER,this.WT),this.rT?this.rT._T(new ImageData(this.Ey,this.Py)):(i.bindRenderbuffer(i.RENDERBUFFER,this.VT),i.renderbufferStorage(i.RENDERBUFFER,this.HT?i.RGBA8:i.RGB8,this.Ey,this.Py),i.bindRenderbuffer(i.RENDERBUFFER,null));const e=this.Jv.iG();this.qT&&e&&(this.Jv.eG()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}CT(){if(!this.rT&&!this.VT)throw new Error("already deleted render target");yu.delete(this);const t=this.Jv.gT();this.rT?(t.bindFramebuffer(t.FRAMEBUFFER,this.WT),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.qT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.jT),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.Jv.rG(this.rT),this.rT=null):this.VT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.WT),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.qT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.jT),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.VT),this.VT=null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.Jv.yT()>=2&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.WT),this.qT&&t.deleteFramebuffer(this.jT);const s=this.Jv.hG();s.oG=null,s.aG=null,this.WT=null}tG(){this.Jv.tb(this.YT,this.Ey/this.Py),this.XT=this.Jv.XS(),this.ZT=this.Jv.qS(),this.KT=this.Jv.JS()}lG(){return this.WT}uG(){return this.jT}pM(){return this.Jv}cG(){return this.rT}fG(){return this.Jv.XS()===this.XT&&this.Jv.qS()===this.ZT&&this.Jv.JS()===this.KT||this.tG(),this.YT}dG(){return"nearest"!==this.lT}pG(){return this.HT}mG(){return this.zT}gG(){return this.qT}jg(){return this.Ey}Kg(){return this.Py}yG(){return this.UT}wG(){return this.JT}SG(){const t={Zx:this.lT,alpha:this.HT,kT:this.zT};return this.UT||(t.width=this.Ey,t.height=this.Py),t}bG(t){return"nearest"!==(t=Object.assign({},gu,t)).Zx===this.dG()&&!!t.alpha===this.pG()&&!!t.depth===this.gG()&&!(this.Jv.yT()>=2&&!!t.kT!==this.mG())&&("number"==typeof t.width||"number"==typeof t.height?!this.yG()&&this.jg()===Math.floor(t.width)&&this.Kg()===Math.floor(t.height):this.yG())}vG(){return this.rT?this.rT.PT():null}DT(){return this.rT?this.rT.DT():this.Ey*this.Py*(this.HT?4:3)}static async MG(t,s){const i=await t.xG(s,!0);return await uu.po(i)}static LM(){yu.clear()}static TG(){return yu.values()}static GG(t,s){for(const i of yu)i.yG()&&i.nG(t,s)}}}{const wu=self._s,Su=self.ls,bu=Su.ws,vu=Su.ds,Mu=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);wu.kw.IG=class extends wu.kw.zv{static async _G(t,s){const i=t.gT(),e=s.src,n=s.CG,r=s.name,h=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(h,e),i.compileShader(h);const o=i.createShader(i.VERTEX_SHADER);i.shaderSource(o,n),i.compileShader(o);const a=i.createProgram();i.attachShader(a,h),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a);const l=t.EG();if(l?await t.PG((()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR))):await wu.ph(5),!i.getShaderParameter(h,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(h);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+t)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(o);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+t)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const t=i.getProgramInfoLog(a);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+t)}const u=wu.Mm(i.getProgramInfoLog(a)||"").trim();return u&&!wu.Sm(u)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,u),i.deleteShader(h),i.deleteShader(o),a}static async AG(t,s){const i=await wu.kw.IG._G(t,s);return new wu.kw.IG(t,i,s)}constructor(t,s,i){super(t,i);const e=t.gT(),n=t.hG();t.Ov(),e.useProgram(s),this.OG=e,this.CM=s,this.FG="<default-device-transform>"===i.name;const r=e.getAttribLocation(s,"aPos"),h=e.getAttribLocation(s,"aTex");this.DG=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.LG),e.vertexAttribPointer(r,t.Av(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==h&&(e.bindBuffer(e.ARRAY_BUFFER,t.kG),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(h)),-1!==this.DG&&(e.bindBuffer(e.ARRAY_BUFFER,t.NG),e.vertexAttribPointer(this.DG,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.DG)),e.bindBuffer(e.ARRAY_BUFFER,null),this.$G=new wu.kw.BG(this,"matP","mat4"),this.WG=new wu.kw.BG(this,"matMV","mat4"),this.jG=new wu.kw.BG(this,"color","vec4"),this.VG=new wu.kw.BG(this,"samplerFront","sampler"),this.UG=new wu.kw.BG(this,"pointTexStart","vec2"),this.HG=new wu.kw.BG(this,"pointTexEnd","vec2"),this.qG=new wu.kw.BG(this,"zElevation","float"),this.zG=new wu.kw.BG(this,"tileSize","vec2"),this.JG=new wu.kw.BG(this,"tileSpacing","vec2"),this.YG=new wu.kw.BG(this,"color2_","vec4"),this.XG=new wu.kw.BG(this,"outlineThickness","float"),this.ZG=new wu.kw.BG(this,"samplerBack","sampler"),this.KG=new wu.kw.BG(this,"samplerDepth","sampler"),this.QG=new wu.kw.BG(this,"destStart","vec2"),this.tI=new wu.kw.BG(this,"destEnd","vec2"),this.sI=new wu.kw.BG(this,"srcStart","vec2"),this.iI=new wu.kw.BG(this,"srcEnd","vec2"),this.eI=new wu.kw.BG(this,"srcOriginStart","vec2"),this.nI=new wu.kw.BG(this,"srcOriginEnd","vec2"),this.rI=new wu.kw.BG(this,"pixelSize","vec2"),this.hI=new wu.kw.BG(this,"seconds","float"),this.oI=new wu.kw.BG(this,"devicePixelRatio","float"),this.aI=new wu.kw.BG(this,"layerScale","float"),this.lI=new wu.kw.BG(this,"layerAngle","float"),this.uI=new wu.kw.BG(this,"layoutStart","vec2"),this.cI=new wu.kw.BG(this,"layoutEnd","vec2"),this.fI=new wu.kw.BG(this,"zNear","float"),this.dI=new wu.kw.BG(this,"zFar","float"),this.pI=!!(this.rI.mI()||this.hI.mI()||this.ZG.mI()||this.QG.mI()||this.tI.mI()||this.sI.mI()||this.iI.mI()||this.eI.mI()||this.nI.mI()||this.oI.mI()||this.aI.mI()||this.lI.mI()||this.uI.mI()||this.cI.mI());const o=i.parameters||[];this.gI=[],this.fM=this.rI.mI()||this.sI.mI()||this.iI.mI()||this.eI.mI()||this.nI.mI(),this.yI=!1,this.wI=!1,this.jG.SI(1,1,1,1),this.YG.SI(1,1,1,1),this.VG.bI(0),this.ZG.bI(1),this.KG.bI(2),this.UG.vI(0,0),this.HG.vI(1,1),this.qG.MI(0),this.zG.vI(0,0),this.JG.vI(0,0),this.QG.vI(0,0),this.tI.vI(1,1),this.sI.vI(0,0),this.iI.vI(0,0),this.eI.vI(0,0),this.nI.vI(0,0),this.rI.vI(0,0),this.oI.MI(1),this.fI.MI(t.qS()),this.dI.MI(t.JS()),this.aI.MI(1),this.lI.MI(0),this.hI.MI(0),this.uI.vI(0,0),this.cI.vI(0,0),this.XG.MI(1);for(const t of o){const s=t[0],i=t[2],e=new wu.kw.BG(this,s,i);"color"===i?e.xI(0,0,0):e.MI(0),this.gI.push(e)}this.FG?this.TI(n.GI):(this.II(n.GI,!0),this._I(n.CI,!0));const a=n.EI;e.useProgram(a?a.CM:null)}qn(){this.OG.deleteProgram(this.CM),this.CM=null,this.Jv.hb(this),this.OG=null,super.qn()}AI(){return this.OG}RI(){return this.CM}OI(){return this.gI.length}FI(t){return t<0||t>=this.gI.length?null:this.gI[t].DI()}LI(t){for(let s=0,i=t.length;s<i;++s)if(!this.gI[s].kI(t[s]))return!1;return!0}NI(t){for(let s=0,i=t.length;s<i;++s)this.gI[s].$I(t[s])}BI(t,s,i,e,n,r,h,o,a,l){return!(this.ZG.mI()||this.rI.mI()&&!this.rI.WI(n,r)||this.QG.mI()&&!this.QG.WI(t.Ka(),t.Qa())||this.tI.mI()&&!this.tI.WI(t.tl(),t.sl())||this.oI.mI()&&!this.oI.jI(h)||this.aI.mI()&&!this.aI.jI(o)||this.lI.mI()&&!this.lI.jI(a)||this.sI.mI()&&!this.sI.WI(s.Ka(),s.Qa())||this.iI.mI()&&!this.iI.WI(s.tl(),s.sl())||this.eI.mI()&&!this.eI.WI(i.Ka(),i.Qa())||this.nI.mI()&&!this.nI.WI(i.tl(),i.sl())||this.uI.mI()&&!this.uI.WI(e.Ka(),e.Qa())||this.cI.mI()&&!this.cI.WI(e.Qa(),e.sl())||this.hI.mI()&&!this.hI.jI(l))}VI(t,s,i,e,n,r,h,o,a,l){this.ZG.mI()||(this.rI.mI()&&this.rI.UI(n,r),this.QG.mI()&&this.QG.UI(t.Ka(),t.Qa()),this.tI.mI()&&this.tI.UI(t.tl(),t.sl()),this.oI.mI()&&this.oI.HI(h),this.aI.mI()&&this.aI.HI(o),this.lI.mI()&&this.lI.HI(a),this.sI.mI()&&this.sI.UI(s.Ka(),s.Qa()),this.iI.mI()&&this.iI.UI(s.tl(),s.sl()),this.eI.mI()&&this.eI.UI(i.Ka(),i.Qa()),this.nI.mI()&&this.nI.UI(i.tl(),i.sl()),this.uI.mI()&&this.uI.UI(e.Ka(),e.Qa()),this.cI.mI()&&this.cI.UI(e.Qa(),e.sl()),this.hI.mI()&&this.hI.HI(l))}II(t,s){this.yI&&!s||this.FG||(this.$G.mI()&&this.$G.qI(t),this.yI=!0)}zI(){this.yI=!1}_I(t,s){this.wI&&!s||this.FG||(this.WG.mI()&&this.WG.qI(t),this.wI=!0)}JI(){this.wI=!1}TI(t){if(!this.FG)throw new Error("not device transform shader");this.$G.qI(t);const s=this.Jv,i=s.jg()/2,e=s.Kg()/2,n=s.nb(i,e,s.WS(s.Kg()),i,e,0,s.Kg());this.WG.qI(n)}YI(t){this.jG.mI()&&this.jG.XI(t[0],t[1],t[2],t[3])}static ZI(){return Mu}static KI(t){return t?"\n#extension GL_EXT_conservative_depth : enable\nlayout (depth_greater) out highp float gl_FragDepth;\n\t":""}static QI(t){const s=t?"highp":"mediump";return["attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","}"].join("\n")}static t_(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","}"].join("\n")}static s_(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static i_(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static e_(t){return["#version 300 es",wu.kw.IG.KI(t),"in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static n_(){return["varying highp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static r_(){return["#extension GL_EXT_frag_depth : enable","varying highp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static h_(t){return["#version 300 es",wu.kw.IG.KI(t),"in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static o_(t,s,i,e){let n="";return t>=2?n="#version 300 es\n"+wu.kw.IG.KI(e):(s&&(n="#extension GL_EXT_frag_depth : enable\n"),i&&(n+="#extension GL_EXT_shader_texture_lod : enable\n",n+="#extension GL_OES_standard_derivatives : enable\n")),n+`\nprecision highp float;\n${t>=2?"in":"varying"} vec2 vTex;\n${t>=2?"out lowp vec4 outColor;":""}\nuniform lowp vec4 color;\nuniform lowp sampler2D samplerFront;\nuniform vec2 pixelSize;\n\nuniform vec2 tileSize;\nuniform vec2 tileSpacing;\nuniform float outlineThickness;\n\nconst float PI = 3.1415926;\n\nlowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nvec3 randVec3(vec2 seed)\n{\n\treturn vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));\n}\n\nlowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)\n{\n\tvec2 posRandom = tileSize;\n\tfloat angleRandom = outlineThickness;\n\t\n\tvec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;\n\t\n\tfloat angle = angleRandom * rand.z * PI;\n\tfloat sin_a = sin(angle);\n\tfloat cos_a = cos(angle);\n\tfloat aspect = pixelSize.x / pixelSize.y;\n\n\tvec2 mid = tile + vec2(0.5, 0.5);\n\tvec2 dp = uv - mid;\n\tdp.x /= aspect;\n\tvec2 r = vec2(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvec2 p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\t${t>=2?"return textureGrad(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&!i?"return texture2D(samplerFront, p);":""}\n}\n\nvoid main(void) {\n\t\n\t${t<2?"lowp vec4 outColor;":""}\n\t\n\tfloat blendMarginX = tileSpacing.x;\n\tfloat blendMarginY = tileSpacing.y;\n\t\n\tvec2 tile = floor(vTex);\n\tvec2 tex = fract(vTex);\n\tvec2 ddx = ${t>=2||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};\n\tvec2 ddy = ${t>=2||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};\n\t\n\tvec4 curTile = sampleTile(tile, vTex, ddx, ddy);\n\t\n\tbool inLeftMargin = (tex.x < blendMarginX);\n\tbool inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tbool inTopMargin = (tex.y < blendMarginY);\n\tbool inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tlowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tlowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tlowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tlowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tlowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tlowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutColor = curTile;\n\t}\n\t\n\toutColor *= color;\n\t${t<2?"gl_FragColor = outColor;":""}\n\t${t>=2?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n\t${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n}\n`}static a_(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static l_(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static u_(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static c_(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static f_(t){return["#version 300 es",wu.kw.IG.KI(t),"uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static d_(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static p_(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static m_(){return["precision lowp float;","varying highp vec2 vTex;","uniform vec4 color;","void main(void) {","\thighp float grad = vTex.x / (1.0 - vTex.y);","\tgl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);","}"].join("\n")}static g_(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static y_(){return["varying highp vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static w_(){return["varying highp vec2 vTex;","uniform lowp vec4 color;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp float innerF = step(distSq, 0.25);","\thighp vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static S_(){return["varying highp vec2 vTex;","uniform lowp vec4 color;","uniform highp vec2 pixelSize;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 innerEdge = halfNorm - pixelSize * norm;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static b_(){return["varying highp vec2 vTex;","uniform lowp vec4 color;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 pxNorm = pixelSize * norm;","\thighp vec2 innerEdge1 = halfNorm - pxNorm;","\thighp vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\thighp float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\thighp vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\thighp vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\thighp vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\thighp vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\thighp float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const xu=self._s,Tu=self.ls,Gu=Tu.ds,Iu=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);xu.kw.BG=class{constructor(t,s,i){if(!Iu.has(i))throw new Error("invalid uniform type");this.Sx=t,this.OG=this.Sx.AI(),this.Yn=s,this.qc=i,this.v_="color"===this.qc,this.M_=this.OG.getUniformLocation(this.Sx.RI(),s),this.x_=!!this.M_;const e=Iu.get(i);this.T_=new Float32Array(e),this.G_=new Float32Array(e)}qn(){this.Sx=null,this.OG=null,this.M_=null}mI(){return this.x_}DI(){return this.qc}I_(){return this.v_}MI(t){this.mI()&&(this.T_[0]=t,this.G_.set(this.T_),this.OG.uniform1f(this.M_,t))}bI(t){this.mI()&&(this.T_[0]=t,this.G_.set(this.T_),this.OG.uniform1i(this.M_,t))}vI(t,s){this.mI()&&(this.T_[0]=t,this.T_[1]=s,this.G_.set(this.T_),this.OG.uniform2f(this.M_,t,s))}xI(t,s,i){this.mI()&&(this.T_[0]=t,this.T_[1]=s,this.T_[2]=i,this.G_.set(this.T_),this.OG.uniform3f(this.M_,t,s,i))}SI(t,s,i,e){this.mI()&&(this.T_[0]=t,this.T_[1]=s,this.T_[2]=i,this.T_[3]=e,this.G_.set(this.T_),this.OG.uniform4f(this.M_,t,s,i,e))}__(t){t=Math.fround(t);const s=this.T_;s[0]!==t&&(s[0]=t,this.OG.uniform1f(this.M_,t))}C_(t){const s=this.T_;s[0]!==t&&(s[0]=t,this.OG.uniform1i(this.M_,t))}E_(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.T_;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.OG.uniform2f(this.M_,t,s))}P_(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.T_;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.OG.uniform3f(this.M_,t,s,i))}XI(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const n=this.T_;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(n[0]=t,n[1]=s,n[2]=i,n[3]=e,this.OG.uniform4f(this.M_,t,s,i,e))}qI(t){const s=this.T_;Gu.F(s,t)||(xu.wh(s,t,0),this.OG.uniformMatrix4fv(this.M_,!1,t))}kI(t){const s=this.G_;return this.I_()?s[0]===Math.fround(t.No())&&s[1]===Math.fround(t.$o())&&s[2]===Math.fround(t.Bo()):s[0]===Math.fround(t)}$I(t){const s=this.G_;this.I_()?(s[0]=t.No(),s[1]=t.$o(),s[2]=t.Bo()):s[0]=t}jI(t){return this.G_[0]===Math.fround(t)}WI(t,s){const i=this.G_;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}HI(t){this.G_[0]=t}UI(t,s){const i=this.G_;i[0]=t,i[1]=s}}}{const _u=self._s,Cu=self.ls,Eu=Cu.Ss,Pu=Cu.ds,Au=0,Ru=1,Ou=2,Fu=3,Du=4,Lu=5,ku=6,Nu=7,$u=8,Bu=9,Wu=10,ju=11,Vu=12,Uu=13,Hu=14,qu=15,zu=16,Ju=17,Yu=18,Xu=19,Zu=20,Ku=21,Qu=22,tc=23,sc=24,ic=25,ec=26,nc=27,rc=28,hc=29;_u.kw.A_=class{constructor(t){this.R_=t,this.CI=Pu.create(),this.GI=Pu.create(),this.oG=null,this.aG=null,this.O_=!1,this.F_=Eu.v(1,1,1,1),this.EI=null,this.D_=new _u.Rect,this.clearColor=_u.Hn(_u.To,0,0,0,0)}},_u.kw.L_=class{constructor(t){const s=new ArrayBuffer(96);this.qc=0,this.k_=t,this.OG=t.R_.gT(),this.N_=0,this.B_=0,this.W_=null,this.j_=new Float32Array(s,0,16),this.V_=new Float32Array(s,64,4),this.U_=new Float32Array(s,80,4),this.H_=[]}q_(t,s){this.qc=1,this.N_=t,this.B_=s}z_(){const t=this.OG;t.drawElements(t.TRIANGLES,this.B_,t.UNSIGNED_SHORT,this.N_)}J_(t){this.qc=2,this.W_=t}Y_(){const t=this.OG,s=this.W_;t.bindTexture(t.TEXTURE_2D,s?s.PT():null)}X_(t){this.qc=3,t.Vo(this.V_,0)}Z_(){const t=this.V_,s=this.k_;Eu.S(s.F_,t),s.EI.YI(t)}K_(t){this.qc=21,t.Vo(this.V_,0)}Q_(){const t=this.V_,s=this.k_.EI;s.YG.mI()&&s.YG.XI(t[0],t[1],t[2],t[3])}tC(t,s){this.qc=4,this.N_=t,this.B_=s}sC(){this.OG.blendFunc(this.N_,this.B_)}iC(t,s,i,e){this.qc=5;const n=this.V_;n[0]=t,n[1]=s,n[2]=i,n[3]=e}eC(){const t=this.V_;this.OG.viewport(t[0],t[1],t[2],t[3])}nC(t){this.qc=6,Pu.S(this.j_,t)}rC(){const t=this.k_,s=t.R_.oS,i=t.EI,e=this.j_;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.II(e,!0):n.zI()}Pu.S(t.GI,e)}hC(t){this.qc=7,Pu.S(this.j_,t)}oC(){const t=this.k_,s=t.R_.oS,i=t.EI,e=this.j_;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n._I(e,!0):n.JI()}Pu.S(t.CI,e)}aC(t){this.qc=8,this.W_=t}lC(){const t=this.OG,s=this.W_,i=this.k_;s?(i.oG=s.lG(),i.aG=s.uG(),i.O_&&i.aG?t.bindFramebuffer(t.FRAMEBUFFER,i.aG):t.bindFramebuffer(t.FRAMEBUFFER,i.oG)):(i.oG=null,i.aG=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}uC(t){this.qc=9,t.Vo(this.j_,0)}cC(t,s,i,e){this.qc=9;const n=this.j_;n[0]=t,n[1]=s,n[2]=i,n[3]=e}fC(){const t=this.OG,s=this.j_,i=this.k_.clearColor,e=s[0],n=s[1],r=s[2],h=s[3];i.zo(e,n,r,h)||(t.clearColor(e,n,r,h),i.Eo(e,n,r,h)),t.clear(t.COLOR_BUFFER_BIT)}dC(t){this.qc=15,t.Vo(this.j_,0)}pC(){const t=this.j_;this.k_.D_.set(t[0],t[1],t[2],t[3])}mC(t,s){this.qc=10,this.N_=t,this.B_=1,this.j_[0]=s}gC(){const t=this.OG,s=this.k_,i=s.R_.uS;t.useProgram(i.CM),i.II(s.GI,!1),i._I(s.CI,!1);const e=s.D_;i.UG.mI()&&i.UG.E_(e.Ka(),e.Qa()),i.HG.mI()&&i.HG.E_(e.tl(),e.sl());const n=this.j_[0];if(i.qG.mI()&&i.qG.__(n),i.jG.mI()){const t=s.F_;i.jG.XI(t[0],t[1],t[2],t[3])}t.drawArrays(t.POINTS,this.N_/4,this.B_),t.useProgram(s.EI.CM)}yC(t){this.qc=11,this.W_=t}wC(){const t=this.OG,s=this.k_,i=this.W_;if(s.EI=i,t.useProgram(i.CM),i.II(s.GI,!1),i._I(s.CI,!1),i.jG.mI()){const t=s.F_;i.jG.XI(t[0],t[1],t[2],t[3])}}SC(){this.qc=12}bC(){const t=this.k_.EI,s=this.OG,i=this.j_,e=this.V_,n=this.U_;if(t.ZG.mI()){const t=this.k_.R_,i=this.W_;t.vC!==i&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,i?i.PT():null),t.vC=i,s.activeTexture(s.TEXTURE0))}t.rI.mI()&&t.rI.E_(i[0],i[1]),t.QG.mI()&&t.QG.E_(i[2],i[3]),t.tI.mI()&&t.tI.E_(i[4],i[5]),t.oI.mI()&&t.oI.__(this.B_),t.aI.mI()&&t.aI.__(i[6]),t.lI.mI()&&t.lI.__(i[7]),t.sI.mI()&&t.sI.E_(i[12],i[13]),t.iI.mI()&&t.iI.E_(i[14],i[15]),t.eI.mI()&&t.eI.E_(n[0],n[1]),t.nI.mI()&&t.nI.E_(n[2],n[3]),t.uI.mI()&&t.uI.E_(e[0],e[1]),t.cI.mI()&&t.cI.E_(e[2],e[3]),t.hI.mI()&&t.hI.__(this.N_)}MC(){this.qc=13}xC(){const t=this.k_.EI.gI,s=this.H_;for(let i=0,e=t.length;i<e;++i){const e=t[i],n=s[i];e.I_()?e.P_(n.No(),n.$o(),n.Bo()):e.__(n)}}TC(t){this.qc=14,this.W_=t}GC(){const t=this.OG,s=this.W_,i=this.k_.oG;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}IC(t,s,i){this.qc=17;const e=this.j_,n=this.k_.R_;e[0]=t.jg(),e[1]=t.Kg(),e[2]=s?s.jg():n.jg(),e[3]=s?s.Kg():n.Kg(),e[4]=t.dG()?1:0,e[5]="stretch"===i;const r=this.H_;_u.bh(r),r.push(t.lG()),r.push(s?s.lG():null)}_C(){const t=this.j_,s=this.H_,i=this.OG,e=t[0],n=t[1],r=t[2],h=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,n,0,0,r,h,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const t=Math.min(e,r),s=Math.min(n,h),o=Math.max(n-h,0),a=Math.max(h-n,0);i.blitFramebuffer(0,o,t,s+o,0,a,t,s+a,i.COLOR_BUFFER_BIT,i.NEAREST)}}CC(t){this.qc=18,this.W_=t}EC(){this.W_.PC(),this.W_=null}AC(t){this.qc=19,this.W_=t}RC(){this.W_.OC(),this.W_=null}FC(t,s,i){this.qc=20;const e=this.j_;e[0]=t,e[1]=s,e[2]=i}DC(){const t=this.k_.EI,s=this.j_;t.rI.mI()&&t.rI.E_(s[0],s[1]),t.XG.mI()&&t.XG.__(s[2])}LC(t,s,i,e,n,r,h){this.qc=16;const o=this.j_;t.Vo(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=n/i,o[8]=r/s,o[9]=h/i}kC(){const t=this.k_.EI,s=this.j_;t.sI.mI()&&t.sI.E_(s[0],s[1]),t.rI.mI()&&t.rI.E_(s[4],s[5]),t.zG.mI()&&t.zG.E_(s[6],s[7]),t.JG.mI()&&t.JG.E_(s[8],s[9])}NC(t,s,i,e,n,r,h){this.qc=29;const o=this.j_;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=n,o[5]=r,o[6]=h}$C(){const t=this.k_.EI,s=this.j_;t.rI.mI()&&t.rI.E_(s[0],s[1]),t.zG.mI()&&t.zG.E_(s[2],s[3]),t.XG.mI()&&t.XG.__(s[4]),t.JG.mI()&&t.JG.E_(s[5],s[6])}BC(t){this.qc=22,this.N_=t?1:0}WC(){const t=this.OG,s=0!==this.N_;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}jC(t){this.qc=23,this.N_=t?1:0}VC(){const t=this.OG;0===this.N_?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}UC(t){this.qc=24,this.N_=t?1:0}HC(){const t=this.OG,s=this.k_,i=s.R_,e=0!==this.N_;s.O_=e,t.activeTexture(t.TEXTURE2),e?(s.aG&&t.bindFramebuffer(t.FRAMEBUFFER,s.aG),t.bindTexture(t.TEXTURE_2D,i.iG())):(t.bindTexture(t.TEXTURE_2D,null),s.aG&&t.bindFramebuffer(t.FRAMEBUFFER,s.oG)),t.activeTexture(t.TEXTURE0)}qC(){this.qc=25}zC(){const t=this.OG;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}JC(){this.qc=26}YC(){const t=this.OG;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}XC(){this.qc=27}ZC(){const t=this.OG;t.disable(t.STENCIL_TEST)}KC(t,s,i,e,n){this.qc=28,this.N_=t?1:0;const r=this.j_;r[0]=s,r[1]=i,r[2]=e,r[3]=n}QC(){const t=this.OG,s=this.j_;1===this.N_?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}tE(){switch(this.qc){case 1:return void this.z_();case 2:return void this.Y_();case 3:return void this.Z_();case 4:return void this.sC();case 5:return void this.eC();case 6:return void this.rC();case 7:return void this.oC();case 8:return void this.lC();case 9:return void this.fC();case 10:return void this.gC();case 11:return void this.wC();case 12:return void this.bC();case 13:return void this.xC();case 14:return void this.GC();case 15:return void this.pC();case 16:return void this.kC();case 17:return void this._C();case 18:return void this.EC();case 19:return void this.RC();case 20:return void this.DC();case 21:return void this.Q_();case 22:return void this.WC();case 23:return void this.VC();case 24:return void this.HC();case 25:return void this.zC();case 26:return void this.YC();case 27:return void this.ZC();case 28:return void this.QC();case 29:return void this.$C()}}}}{let oc=function(t,s,i,e,n,r){s?t.strokeRect(i,e,n,r):t.fillRect(i,e,n,r)},ac=function(t){return t*(4/3)},lc=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};fillOrStrokeRect=oc,ptToPx=ac,getOffsetParam=lc;const uc=self._s,cc=4096,fc=4,dc=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),pc={timeout:60},mc=new uc.To(0,0,0,1),gc=new Set(["left","center","right"]),yc=new Set(["top","center","bottom"]),wc=new Set(["word","cjk","character"]),Sc=new Set(["ltr","rtl"]),bc=new Set;uc.sE&&uc.sE.addEventListener("fontload",(t=>{const s=t.font.Ec();for(const t of bc)(t.iE()||uc.Ke(t.eE(),s))&&t.nE()}));let vc=!1,Mc=!1;uc.kw.qv=class{constructor(t,s){s=Object.assign({},pc,s),this.Jv=t,this.rE="Arial",this.hE=16,this.oE=1,this.aE=0,this.lE=!1,this.uE=!1,this.cE="black",this.fE=!1,this.kg=null,this.dE=!0,this.pE=null,this.mE=new Set,this.gE="left",this.yE="top",this.$c="",this.wE=null,this.SE=uc.Hn(uc.Dg),this.bE="word",this.vE="ltr",this.ME=!1,this.xE=!1,this.TE=!1,this.GE=-1,this.IE=0,this._E=0,this.CE=0,this.Ey=0,this.Py=0,this.EE=1,this.PE=null,this.AE=null,this.RE=null,this.OE=null,this.FE=-1,this.DE=-1,this.LE="",this.kE="",this.NE="",this.$E=1,this.BE=1,this.WE=t=>this.jE(t),this.rT=null,this.VE=new uc.Rect,this.UE=1,this.HE=new uc.Ff((()=>{this.qE(),this.zE(8,8)}),s.timeout),this.JE=null,this.YE=!1,bc.add(this)}qn(){this.pE=null,this.mE.clear(),this.kg=null,this.wE=null,this.PE=null,this.AE=null,this.RE=null,this.OE=null,this.WE=null,this.HE.qn(),this.JE=null,this.qE(),this.SE.Eu(),this.SE=null,this.Jv=null,this.YE=!0,bc.delete(this)}XE(){this.TE=!0}ZE(){this.XE(),this.xE=!0}nE(){this.ZE(),this.ME=!0}KE(t){if(t=!!t,this.fE===t)return;this.fE=t;const s=this.fE?"alphabetic":"top";this.AE&&(this.AE.textBaseline=s),this.RE&&(this.RE.textBaseline=s),this.nE()}iE(){return this.fE}Bg(t){this.kg!==t&&(this.kg=t,this.SE.Bg(t),this.kg&&this.kg.Tw()&&this.kg.Gw().then((()=>this.XE())),this.nE())}QE(t){t=!!t,this.dE!==t&&(this.dE=t,this.XE())}tP(t){t||(t="serif"),this.rE!==t&&(this.rE=t,this.nE())}eE(){return this.rE}sP(t){t<.1&&(t=.1),this.hE!==t&&(this.hE=t,this.nE())}iP(){return this.hE}eP(t){this.oE!==t&&(this.oE=t,this.nE())}nP(t){this.aE!==t&&(this.aE=t,this.ZE())}rP(){return this.aE}hP(t){t=!!t,this.lE!==t&&(this.lE=t,this.nE())}oP(){return this.lE}aP(t){t=!!t,this.uE!==t&&(this.uE=t,this.nE())}lP(){return this.uE}uP(t){t=Math.floor(t),this.GE!==t&&(this.GE=t,this.XE())}cP(){return this.GE}fP(t,s){let i=[];(this.lE||s.Hy("b"))&&i.push("bold"),(this.uE||s.Hy("i"))&&i.push("italic");const e=s.Uy("size"),n=(e?parseFloat(e.Cg):this.hE)*this.oE;t?i.push(n+"pt"):i.push(n*this.dP()+"pt");let r=this.rE;const h=s.Uy("font");return h&&h.Cg&&(r=h.Cg,this.pE&&!this.mE.has(r)&&(this.pE(r),this.mE.add(r))),r&&(dc.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}DM(t){t instanceof uc.To&&(t=t.ta()),this.cE!==t&&(this.cE=t,this.XE())}pP(t,s,i){mc.Po(t,s,i),this.DM(mc)}mP(t){if(!gc.has(t))throw new Error("invalid horizontal alignment");this.gE!==t&&(this.gE=t,this.ZE())}gP(){return this.gE}yP(t){if(!yc.has(t))throw new Error("invalid vertical alignment");this.yE!==t&&(this.yE=t,this.ZE())}wP(){return this.yE}SP(t){if(!wc.has(t))throw new Error("invalid word wrap mode");this.bE!==t&&(this.bE=t,this.nE())}bP(){return this.bE}vP(t){if(!Sc.has(t))throw new Error("invalid text direction");this.vE!==t&&(this.vE=t,this.AE&&(this.AE.direction=this.vE),this.RE&&(this.RE.direction=this.vE),this.nE())}MP(){return this.vE}jc(t){this.$c!==t&&(this.$c=t,this.nE())}xP(){return this.$c}dP(){return this.UE*this.EE*self.devicePixelRatio}TP(t,s,i){if(void 0===i&&(i=1),t<=0||t<=0)return;if(this._E===t&&this.CE===s&&this.EE===i)return;const e=this._E;this._E=t,this.CE=s,this.EE=i;const n=self.devicePixelRatio;this.Ey=this._E*this.EE*n,this.Py=this.CE*this.EE*n;const r=Math.max(this.Ey,this.Py),h=Math.min(this.Jv.mT(),4096);let o=1;r>h&&(o=h/r,this.Ey=Math.min(this.Ey*o,h),this.Py=Math.min(this.Py*o,h)),this.UE=o,this._E!==e?this.nE():this.ZE()}jg(){return this.Ey}Kg(){return this.Py}GP(){return this.EE}IP(){return this._P(),this.SE._y()}CP(){return this._P(),this.SE.Cy()+this.SE.$g()*(this.aE+4)-this.aE}EP(){this._P();let t=0;for(const s of this.SE.Ng())for(const i of s.ny())t+=i.hy();return t}cG(){return this.HE.$f(),this.PP(),this.rT}AP(t,s){this._P();const i=this.dP(),e=this.SE.Ng();for(const n of e){const e=n.ty()*i;if(s>=n.Wy()-n.Kg()*i+e&&s<n.Wy()+e)for(const s of n.ny())if(t>=s.$y()&&t<s.$y()+s.jg()*i)return s}return null}*RP(t){this._P();const s=this.SE.Ng();for(const i of s)for(const s of i.ny()){const i=s.Uy("tag");i&&uc.Ke(i.Cg,t)&&(yield s)}}OP(t,s){for(const i of this.RP(t)){if(0===s)return i;--s}return null}FP(t){let s=0;for(const i of this.RP(t))++s;return s}PP(){(!this.rT||this.TE||this.xE||this.ME)&&(this.YE||this.Ey<=0||this.Py<=0||(this.TE=!1,this.DP()))}DP(){this.YE||(this._P(),this.zE(Math.max(uc.vr(Math.ceil(this.Ey)),128),Math.max(uc.vr(Math.ceil(this.Py)),64)),this.LP(),this.kP(),this.HE.$f())}zE(t,s){this.PE||(this.PE=uc.co(16,16));let i=!1;this.FE===t&&this.DE===s||(this.FE=t,this.DE=s,this.PE.width=t,this.PE.height=s,i=!0),this.AE||(this.AE=this.PE.getContext("2d"),i=!0),i?(this.AE.textBaseline=this.fE?"alphabetic":"top",this.AE.direction=this.vE,this.AE.font=this.LE,this.AE.fillStyle=this.NE,this.AE.strokeStyle=this.NE,this.AE.globalAlpha=this.$E,this.AE.lineWidth=this.BE):this.AE.clearRect(0,0,t,s)}NP(){this.RE||(this.RE=uc.co(16,16).getContext("2d"),this.OE=uc.co(16,16).getContext("2d"),this.RE.textBaseline=this.fE?"alphabetic":"top",this.OE.textBaseline="top",this.RE.direction=this.vE,this.OE.direction=this.vE)}$P(t){this.kE!==t&&(this.kE=t,this.RE.font=t,this.OE.font=t)}BP(){if(!vc){vc=!0,this.NP();const t=this.RE.measureText("test");Mc="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return Mc}_P(){this.WP(),this.jP()}WP(){this.ME&&(this.NP(),!this.fE||this.wE&&this.wE.toString()===this.$c||(this.wE=new uc.pn(this.$c,{dg:!0})),this.SE.Dg(this.fE?this.wE.Ig():this.$c,this.WE,this._E,this.bE,0),this.ME=!1)}jP(){this.xE&&(this.VP(),this.xE=!1)}jE(t){const s=t.Jg()?t.yy().join(""):" ";this.$P(this.fP(!0,t));const i=t.Uy("size"),e=(i?parseFloat(i.Cg):this.hE)*this.oE,n=this.RE.measureText(s);let r=0;if(this.fE&&this.BP()){const t=this.OE.measureText(s);r=n.fontBoundingBoxAscent-t.fontBoundingBoxAscent}return{width:n.width,height:ac(e),fontBoundingBoxAscent:n.fontBoundingBoxAscent||0,fontBoundingBoxDescent:n.fontBoundingBoxDescent||0,zg:r}}UP(t){this.LE!==t&&(this.LE=t,this.AE.font=t)}HP(t){this.NE!==t&&(this.NE=t,this.AE.fillStyle=t,this.AE.strokeStyle=t)}qP(t){this.$E!==t&&(this.$E=t,this.AE.globalAlpha=t)}zP(t){this.BE!==t&&(this.BE=t,this.AE.lineWidth=t)}VP(){const t=this.dP(),s=(4+this.aE)*t;let i=0;const e=this.SE.Ng();if(0===e.length)return;for(const t of e){t.Ny(NaN),t.By(NaN);for(const s of t.ny())s.Ny(NaN),s.By(NaN)}const n=this.fE&&this.BP();let r=e[0].Kg()*t;if("center"===this.yE){const h=e.reduce(((i,e)=>i+e.Kg()*t+s),0)-s;i=Math.max(this.Py/2-h/2,0),n&&(r=e[0].sy()*t)}else if("bottom"===this.yE){const r=e.reduce(((i,e)=>i+e.Kg()*t+s),0)-this.aE*t,h=n?e.at(-1).ty()*t:0;i=this.Py-r-h-2}for(let n=0,h=e.length;n<h;++n){const h=e[n],o=h.Kg()*t,a=i;if(this.fE){if(i+=0===n?r:o,n>0&&i>this.Py-4*t)break}else if(n>0&&i>=this.Py-o)break;a>=0&&this.JP(h,i,t),this.fE||(i+=o),i+=s}}JP(t,s,i){let e=0;"center"===this.gE?e=Math.floor((this.Ey-t.jg()*i)/2):"right"===this.gE&&(e=this.Ey-t.jg()*i),t.Ny(e),t.By(s);for(const n of"ltr"===this.vE?t.ny():t.Ly())this.YP(n,e,s,i),e+=n.jg()*i}YP(t,s,i,e){const n=t.Uy("offsetx");s+=n?lc(n.Cg,t.Kg())*e:0;const r=t.Uy("offsety");if(i+=r?lc(r.Cg,t.Kg())*e:0,t.Xg()){const s=t.Uy("iconoffsety");i+=s?lc(s.Cg,t.Kg())*e:.2*t.Kg()*e}t.Ny(s),t.By(i)}LP(){this.AE.imageSmoothingEnabled=this.dE,this.AE.imageSmoothingQuality="high",this.IE=0;const t=this.dP(),s=this.SE.Ng();for(const i of s)this.XP(i,t)}XP(t,s){const i=t.$y(),e=t.Wy();if(Number.isFinite(i)&&Number.isFinite(e))for(const i of"ltr"===this.vE?t.ny():t.Ly())this.ZP(i,s,t.Kg())}ZP(t,s,i){const e=this.AE,n=t.$y(),r=t.Wy();if(!Number.isFinite(n)||!Number.isFinite(r))return;const h=i/16;let o=t.jg()*s;const a=t.Kg()*s,l=t.Kg()/16,u=(4+this.aE)*s;let c=t.Jg()?t.yy():null;if(-1!==this.GE){if(this.IE>=this.GE)return;t.Jg()&&this.IE+c.length>this.GE&&(c=c.slice(0,this.GE-this.IE),o=this.jE(t).width*s),this.IE+=t.hy()}const f=t.Uy("background"),d=t.Hy("u"),p=t.Hy("s");if(t.Jg()&&uc.bm(c)&&!f&&!d&&!p||t.Hy("hide"))return;const m=t.Uy("color"),g=t.Uy("opacity");this.qP(g?parseFloat(g.Cg)/100:1),f&&(this.HP(f.Cg),e.fillRect(n,r-a,o,a+u));const y=t.Uy("linethickness"),w=y?parseFloat(y.Cg):1,S=t.Hy("stroke");if(S&&this.zP(.5*l*w*this.dP()),t.Jg()){const s=c.join("");if(this.UP(this.fP(!1,t)),!S){this.zP(.5*l*w*this.dP());const i=t.Uy("outlineback");i&&(this.HP(i.Cg),this.KP(!0,s,n,r,o))}if(this.HP(m?m.Cg:this.cE),this.KP(S,s,n,r,o),!S){this.zP(.5*l*w*this.dP());const i=t.Uy("outline");i&&(this.HP(i.Cg),this.KP(!0,s,n,r,o))}}else if(t.Xg()&&t.jg()>0){const s=t.Qy(this.kg);s&&e.drawImage(s,n,r-a,o,a)}if(this.HP(m?m.Cg:this.cE),d&&oc(e,S,n,r+s*h,o,s*h*w),p){const t=s*l,i=r-a/4+t/2;e.fillRect(n,i-t*w/2,o,t*w)}}KP(t,s,i,e,n){"rtl"===this.vE&&(i+=n),t?"Gecko"===uc.Ks.ni?this.AE.strokeText(s,i,e,n):this.AE.strokeText(s,i,e):"Gecko"===uc.Ks.ni?this.AE.fillText(s,i,e,n):this.AE.fillText(s,i,e)}kP(){this.Jv.QP()||(this.rT||(this.rT=this.Jv.sG(this.PE.width,this.PE.height,{tT:!0,sT:"high"})),this.Jv.tA(this.PE,this.rT),this.VE.set(0,0,this.Ey/this.rT.jg(),this.Py/this.rT.Kg()),this.JE&&this.JE())}sA(){return this.VE}qE(){this.rT&&(this.Jv.QP()||this.Jv.rG(this.rT),this.rT=null)}static LM(){for(const t of bc)t.qE()}static iA(){return bc.values()}}}{const xc=self._s;class Tc{constructor(t){this.OG=t.gT(),this.eA=t.yT(),this.nA=t.rA(),this.hA=null,this.Nf=!1,this.oA=!1,this.aA=0,1===this.eA?this.hA=this.nA.createQueryEXT():this.hA=this.OG.createQuery()}qn(){this.lA(),this.OG=null,this.nA=null,this.oA=!1}lA(){this.hA&&(1===this.eA?this.nA.deleteQueryEXT(this.hA):this.OG.deleteQuery(this.hA),this.hA=null)}PC(){if(this.Nf)throw new Error("query already active");1===this.eA?this.nA.beginQueryEXT(this.nA.TIME_ELAPSED_EXT,this.hA):this.OG.beginQuery(this.nA.TIME_ELAPSED_EXT,this.hA),this.Nf=!0}OC(){if(!this.Nf)throw new Error("query not active");1===this.eA?this.nA.endQueryEXT(this.nA.TIME_ELAPSED_EXT):this.OG.endQuery(this.nA.TIME_ELAPSED_EXT),this.Nf=!1}uA(){if(!this.hA||this.oA||this.Nf)return;let t=!1;t=1===this.eA?this.nA.getQueryObjectEXT(this.hA,this.nA.QUERY_RESULT_AVAILABLE_EXT):this.OG.getQueryParameter(this.hA,this.OG.QUERY_RESULT_AVAILABLE);const s=this.OG.getParameter(this.nA.GPU_DISJOINT_EXT);t&&!s&&(1===this.eA?this.aA=this.nA.getQueryObjectEXT(this.hA,this.nA.QUERY_RESULT_EXT):this.aA=this.OG.getQueryParameter(this.hA,this.OG.QUERY_RESULT),this.aA/=1e9,this.oA=!0),(t||s)&&this.lA()}cA(){return this.oA}fA(){if(!this.oA)throw new Error("no result available");return this.aA}}xc.kw.dA=class{constructor(t){this.Jv=t,this.OS=t.Fv(),this.Nf=!1,this.pA=null,this.mA=!1,this.gA=null,this.yA=[]}qn(){for(const t of this.yA)t instanceof Tc&&t.qn();xc.bh(this.yA),this.pA=null,this.gA=null,this.Jv=null}PC(){if(this.Nf)throw new Error("query already active");const t=this.Jv.wA();t.length>0?(this.mA=!0,this.pA=t.at(-1),this.pA.SA(),this.pA.yA.push(this)):(this.mA=!1,this.pA=null),this.Nf=!0,t.push(this),this.bA()}OC(){if(!this.Nf)throw new Error("query not active");if(this.Jv.wA().pop()!==this)throw new Error("can only end most nested query");this.Nf=!1,this.SA(),this.pA&&(this.pA.bA(),this.pA=null)}bA(){this.gA=xc.Hn(Tc,this.Jv),this.yA.push(this.gA),this.gA.PC()}SA(){this.gA.OC(),this.gA=null}uA(){for(const t of this.yA)t.uA()}vA(){return this.mA}cA(){return this.yA.every((t=>t.cA()))}fA(){return this.yA.reduce(((t,s)=>t+s.fA()),0)}Fv(){return this.OS}}}{const Gc=self._s;Gc.kw.MA=class{constructor(t,s=1e3){this.Jv=t,this.xA=s,this.TA=[],this.Jv.GA(this)}qn(){this.Eu(),this.Jv.IA(this),this.Jv=null}Eu(){for(const t of this.TA)t.qn();Gc.bh(this.TA)}_A(){const t=new Gc.kw.dA(this.Jv);return this.TA.push(t),this.TA.length>this.xA&&this.TA.shift().qn(),t}CA(t){for(const s of this.TA){if(s.Fv()>=t)return;if(s.vA())return;s.uA()}}EA(t,s){if(s<=t)return NaN;let i=0;for(const e of this.TA){if(e.Fv()>=s)break;if(!(e.Fv()<t)){if(!e.cA())return NaN;i+=e.fA()}}return i}PA(t){for(let s=0,i=this.TA.length;s<i;++s){const i=this.TA[s];if(!(i.Fv()<t))return void(s>0&&this.TA.splice(0,s));i.qn()}}}}{let Ic=function(){zc=-1;for(const t of qc)t.AA()&&(t.resolve(),qc.delete(t));qc.size>0&&(zc=self.requestAnimationFrame(Ic))};CheckPendingPolls=Ic;const _c=self._s,Cc=self.assert,Ec=self.ls,Pc=Ec.ws,Ac=Ec.Ss,Rc=Ec.ds,Oc={powerPreference:"default",RA:!0,alpha:!1,depth:!1,OA:!1,FA:2,failIfMajorPerformanceCaveat:!1},Fc=new Set(["default","low-power","high-performance"]),Dc=8e3,Lc=12e3,kc=8e3,Nc=7996,$c=262144,Bc=new _c.Cl(0,0,1,0,1,1,0,1),Wc=Rc.create(),jc=Rc.create(),Vc=new _c.Cl,Uc=new _c.Rect;let Hc=null;_c.Ls&&(self.DA=function(){Hc?Hc.loseContext():console.warn("WEBGL_lose_context not supported")},self.LA=function(){Hc?Hc.restoreContext():console.warn("WEBGL_lose_context not supported")});const qc=new Set;let zc=-1;_c.kw.kA=class extends _c.kw.Qw{constructor(t,s){if(super(s),s=Object.assign({},Oc,s),!Fc.has(s.powerPreference))throw new Error("invalid power preference");const i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat};let e=null,n=0;if(s.FA>=2&&(e=t.getContext("webgl2",i),n=2),e||(e=t.getContext("webgl",i),n=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.OG=e,this.NA=e.getContextAttributes(),this.$A=e.getParameter(e.VERSION),this.eA=n,this.BA=Ac.create(),this.WA=!1,this.jA=Rc.create(),this.VA=!!s.depth,this.UA=!(!s.depth||!s.OA),this.HA=this.VA,this.qA=!1,this.zA=null,this.JA=!0,this.YA=0,this.XA=0,this.LG=null,this.kG=null,this.ZA=null,this.NG=null,this.KA=new Float32Array(8e3*this.Av()),this.QA=new Uint16Array(12e3),this.tR=new Float32Array(16e3),this.sR=new Float32Array(32e3),this.iR=0,this.eR=0,this.nR=0,this.rR=0,this.hR=null,this.oR=null,this.aR=[],this.lR=0,this.uR=0,this.cR=null,this.fR=0,this.k_=_c.Hn(_c.kw.A_,this),this.dR=_c.Hn(_c.To,1,1,1,1),this.pR=null,this.vC=null,this.mR=0,this.gR=0,this.yR=new _c.Rect,this.wR=_c.Hn(_c.Rect,0,0,-1,-1),this.SR=0,this.bR=-1,this.vR=0,this.MR=0,this.xR="(unavailable)",this.TR="(unavailable)",this.GR=[],this.IR=!1,this._R=null,this.CR=null,this.ER=null,this.PR=null,this.AR=null,this.RR=null,this.OR=null,this.FR=0,this.DR=!!s.RA,this.nA=null,this.LR=new Set,this.kR=[],this.LS(this.QA)}Bv(){return!0}async $S(){super.$S();const t=this.OG,s=this.Av();this.dR.Eo(1,1,1,1),this.pR=null,this.vC=null,this.iR=0,this.nR=0,this.rR=8e3*s-4*s,_c.bh(this.aR),this.lR=0,this.uR=0,this.hR=null,this.cR=null,this.yR.set(0,0,1,1),this.fR=0;const i=this.k_;i.EI=null,i.oG=null,i.aG=null,Ac.set(i.F_,1,1,1,1),i.clearColor.Eo(0,0,0,0),i.D_.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.mR=t.ONE,this.gR=t.ONE_MINUS_SRC_ALPHA,this.NR(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.VA?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.HA=this.VA,this.qA=!1,this.NG=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.NG),t.bufferData(t.ARRAY_BUFFER,this.sR.byteLength,t.DYNAMIC_DRAW),this.LG=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.LG),t.bufferData(t.ARRAY_BUFFER,this.KA.byteLength,t.DYNAMIC_DRAW),this.kG=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.kG),t.bufferData(t.ARRAY_BUFFER,this.tR.byteLength,t.DYNAMIC_DRAW),this.ZA=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.ZA),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.QA,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.bR=t.getParameter(t.MAX_TEXTURE_SIZE);const e=t.getParameter(t.ALIASED_POINT_SIZE_RANGE);this.vR=e[0],this.MR=e[1],this.MR>2048&&(this.MR=2048),this.GR=t.getSupportedExtensions();const n=t.getExtension("WEBGL_debug_renderer_info");if(n&&(this.xR=t.getParameter(n.UNMASKED_VENDOR_WEBGL),this.TR=t.getParameter(n.UNMASKED_RENDERER_WEBGL)),this._R=t.getExtension("KHR_parallel_shader_compile"),this.eA>=2&&("Chromium"!==_c.Ks.ni||_c.Ks.ei>=135)&&(this.ER=t.getExtension("EXT_conservative_depth")),_c.Ls&&(Hc=t.getExtension("WEBGL_lose_context")),this.DR&&(1===this.yT()?this.nA=t.getExtension("EXT_disjoint_timer_query"):this.nA=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.CR=t.getExtension("EXT_texture_filter_anisotropic"),this.CR?this.FR=t.getParameter(this.CR.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.FR=0,this.yT()<2&&this.VA&&this.UA&&(this.PR=t.getExtension("WEBGL_depth_texture"),!this.PR))throw new Error("no depth texture support");this.yT()<2&&(this.AR=t.getExtension("EXT_frag_depth"),this.RR=t.getExtension("OES_standard_derivatives"),this.OR=t.getExtension("EXT_shader_texture_lod"));const r=_c.kw.IG,h=r.QI(!1);let o=r.s_(),a=h,l=r.u_(),u=r.a_(),c=r.n_(),f=r.QI(!0),d=!1;this.VA&&(this.yT()<2?this.AR&&(o=r.i_(),l=r.c_(),c=r.r_(),d=!0):(a=r.t_(),o=r.e_(this.$R()),l=r.f_(this.$R()),u=r.l_(),c=r.h_(this.$R()),f=r.t_(!0)));const p=r.o_(this.yT(),d,this.RR&&this.OR,this.$R()),m=this.yT()>=2?r.t_():h,g=[[o,a,"<default>"],[o,a,"<default-device-transform>"],[l,u,"<point>"],[r.d_(),h,"<fill>"],[r.p_(),h,"<lineargradient>"],[r.m_(),h,"<penumbra>"],[r.y_(),h,"<hardellipse>"],[r.w_(),h,"<hardellipseoutline>"],[r.S_(),h,"<smoothellipse>"],[r.b_(),h,"<smoothellipseoutline>"],[r.g_(),h,"<smoothline>"],[c,f,"<tilemap>"],[p,m,"<tilerandomization>"]],y=await Promise.all(g.map((t=>this.BR({src:t[0],CG:t[1],name:t[2]}))));this.lS=y[0],this.oR=y[1],this.uS=y[2],this.dS=y[3],this.pS=y[4],this.mS=y[5],this.gS=y[6],this.yS=y[7],this.wS=y[8],this.SS=y[9],this.bS=y[10],this.cS=y[11],this.fS=y[12],this.lb()}async BR(t){const s=await _c.kw.IG.AG(this,t);return this.rb(s),s}WR(){this.hR=null}TP(t,s,i){if(this.Ey===t&&this.Py===s&&!i)return;this.Ov();const e=this.OG,n=this.k_;this.Ey=t,this.Py=s,this.jR(0,0,t,s),this.tb(this.jA,t/s),this.VR(this.jA),this.oR&&(e.useProgram(this.oR.RI()),this.oR.TI(this.iS),this.hR=this.oR,this.k_.EI=this.oR),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.pR=null,this.vC=null,this.VA&&this.JA&&this.UR(this.Ey,this.Py),this.cR&&this.cR.nG(this.Ey,this.Py),e.bindFramebuffer(e.FRAMEBUFFER,null),this.cR=null,n.oG=null,n.aG=null}UR(t,s){const i=this.OG;this.zA&&this.YA===t&&this.XA===s||(this.UA?(this.zA&&i.deleteTexture(this.zA),this.zA=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.zA),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),this.yT()>=2?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.PR&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.PR.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.zA&&i.deleteRenderbuffer(this.zA),this.zA=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.zA),i.renderbufferStorage(i.RENDERBUFFER,this.eA>=2?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.YA=t,this.XA=s)}HR(t,s){this.VA&&(this.JA=!1,this.UR(t,s))}qR(){this.VA&&(this.JA=!0,this.UR(this.Ey,this.Py))}jR(t,s,i,e){const n=this.BA;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(this.zR().iC(t,s,i,e),Ac.set(n,t,s,i,e),this.uR=0)}YS(t){super.YS(t),this.tb(this.jA,this.Ey/this.Py)}HS(t){super.HS(t),this.tb(this.jA,this.Ey/this.Py)}zS(t){super.zS(t),this.tb(this.jA,this.Ey/this.Py)}VR(t){Rc.F(this.iS,t)||(this.zR().nC(t),Rc.S(this.iS,t),this.uR=0,this.WA=!0)}JR(){let t,s,i;const e=this.cR;null===e?(t=this.jA,s=this.jg(),i=this.Kg()):(t=e.fG(),s=e.jg(),i=e.Kg()),this.VR(t),this.jR(0,0,s,i)}YR(t){Rc.F(this.eS,t)||(this.zR().hC(t),Rc.S(this.eS,t),this.uR=0,this.WA=!0)}XR(){this.WA=!1}ZR(){return this.WA}hG(){return this.k_}zR(){const t=this.aR;return this.lR===t.length&&t.push(new _c.kw.L_(this.k_)),t[this.lR++]}Ov(){0!==this.lR&&(this.QP()||(this.KR(),this.QR(),this.lR=0,this.iR=0,this.eR=0,this.nR=0,this.uR=0))}KR(){const t=this.OG;this.nR>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.NG),t.bufferSubData(t.ARRAY_BUFFER,0,this.sR.subarray(0,this.nR))),this.iR>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.LG),t.bufferSubData(t.ARRAY_BUFFER,0,this.KA.subarray(0,this.iR)),t.bindBuffer(t.ARRAY_BUFFER,this.kG),t.bufferSubData(t.ARRAY_BUFFER,0,this.tR.subarray(0,this.eR)))}QR(){const t=this.aR;for(let s=0,i=this.lR;s<i;++s)t[s].tE()}tO(){return this.dR.Wo()}sO(t,s,i,e){const n=this.dR;n.zo(t,s,i,e)||(n.Eo(t,s,i,e),this.zR().X_(n),this.uR=0,this.MS=null)}iO(t){const s=this.dR;s.Wo()!==t&&(s.Lo(t),this.zR().X_(s),this.uR=0,this.MS=null)}DM(t){const s=this.dR;s.equals(t)||(s.set(t),this.zR().X_(s),this.uR=0,this.MS=null)}eO(){this.sO(1,1,1,1)}nO(){return this.dR}rO(t){t!==this.pR&&(this.zR().J_(t),this.pR=t,this.uR=0)}vT(){this.pR=null}FM(t){const s=this.Nb(t);this.hO(s[0],s[1])}oO(t){const s=this.Wb(t);this.hO(s.Lb,s.kb)}hO(t,s){t===this.mR&&s===this.gR||(this.zR().tC(t,s),this.mR=t,this.gR=s,this.uR=0,this.MS=null)}aO(){return this.mR===this.OG.ONE&&this.gR===this.OG.ONE_MINUS_SRC_ALPHA}lO(){this.hO(this.OG.ONE,this.OG.ONE_MINUS_SRC_ALPHA)}uO(){this.hO(this.OG.SRC_ALPHA,this.OG.ONE_MINUS_SRC_ALPHA)}cO(){this.hO(this.OG.ONE,this.OG.ZERO)}Rect(t){this.fO(t.Ka(),t.Qa(),t.tl(),t.sl())}fO(t,s,i,e){this.Pv(t,s,i,s,i,e,t,e)}dO(){let t=this.iR;t>=this.rR&&(this.Ov(),t=0),1===this.uR?this.aR[this.lR-1].B_+=6:(this.zR().q_(t,6),this.uR=1)}pO(t){t.Jl(this.KA,this.iR,this.GS+this.IS),this.iR+=12}Cl(t){this.dO(),this.pO(t),Bc.Vo(this.tR,this.eR),this.eR+=8}Pv(t,s,i,e,n,r,h,o){this.dO();const a=this.KA;let l=this.iR;const u=this.GS+this.IS;a[l++]=t,a[l++]=s,a[l++]=u,a[l++]=i,a[l++]=e,a[l++]=u,a[l++]=n,a[l++]=r,a[l++]=u,a[l++]=h,a[l++]=o,a[l++]=u,this.iR=l,Bc.Vo(this.tR,this.eR),this.eR+=8}ev(t,s){this.dO(),this.pO(t),s.nl(this.tR,this.eR),this.eR+=8}mO(t,s){this.dO(),this.pO(t),s.Vo(this.tR,this.eR),this.eR+=8}gO(t,s,i,e,n,r,h,o,a,l,u,c,f){this.dO();const d=this.KA;let p=this.iR;const m=this.GS+this.IS;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=n,d[p++]=m+r,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.iR=p,f.nl(this.tR,this.eR),this.eR+=8}Zb(t,s,i,e,n,r,h,o,a,l,u,c,f){this.dO();const d=this.KA;let p=this.iR;const m=this.GS+this.IS;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=n,d[p++]=m+r,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.iR=p,f.Vo(this.tR,this.eR),this.eR+=8}yO(t,s,i){const e=this.KA,n=this.tR;if(i.length%3!=0)throw new Error("invalid index buffer length");for(let r=0,h=i.length;r<h;){const h=i[r++],o=i[r++],a=i[r++],l=3*h,u=3*o,c=3*a,f=2*h,d=2*o,p=2*a;this.dO();let m=this.iR,g=this.eR;e[m++]=t[l+0],e[m++]=t[l+1],e[m++]=t[l+2],e[m++]=t[u+0],e[m++]=t[u+1],e[m++]=t[u+2],e[m++]=t[c+0],e[m++]=t[c+1],e[m++]=t[c+2],e[m++]=t[c+0],e[m++]=t[c+1],e[m++]=t[c+2],n[g++]=s[f+0],n[g++]=s[f+1],n[g++]=s[d+0],n[g++]=s[d+1],n[g++]=s[p+0],n[g++]=s[p+1],n[g++]=s[p+0],n[g++]=s[p+1],this.iR=m,this.eR=g}}wO(t,s){this.Hb(0),Rc.S(Wc,this.iS),Rc.S(jc,this.eS),this.JR();const[i,e]=this.SO(this.cR),n=this.nb(0,0,this.WS(e),0,0,0,e);if(this.YR(n),"crop"===t&&this.cR&&s){const t=this.Ey/2,i=this.Py/2,e=s.jg(),n=s.Kg(),r=this.cR.jg(),h=this.cR.Kg(),o=Math.min(r,e),a=Math.min(h,n),l=Math.max(n-h,0),u=Math.max(h-n,0);Uc.set(-t,i-u,-t+o,i-a-u),Vc.Yl(Uc),Uc.set(0,l,o,a+l),Uc.St(e,n),this.ev(Vc,Uc)}else{const t=i/2,s=e/2;this.fO(-t,s,t,-s)}this.VR(Wc),this.YR(jc)}bO(t){this.yR.equals(t)||(this.yR.S(t),this.zR().dC(t),this.uR=0)}vO(){}MO(t,s,i,e){this.nR>=7996&&this.Ov();let n=this.nR;const r=this.GS+this.IS;2===this.uR&&this.fR===r?this.aR[this.lR-1].B_++:(this.zR().mC(n,r),this.uR=2,this.fR=r);const h=this.sR;h[n++]=t,h[n++]=s,h[n++]=i,h[n++]=e,this.nR=n}ub(t){this.hR!==t&&(this.zR().yC(t),this.hR=t,this.uR=0,this.MS=null)}xO(){return this.hR}TO(){this.ub(this.oR)}GO(t){this.zR().K_(t),this.uR=0}IO(t,s,i=1){this.zR().FC(t,s,i),this.uR=0}_O(t,s,i,e,n,r,h){if(this.hR!==this.cS)throw new Error("must set tilemap fill mode first");this.zR().LC(t,s,i,e,n,r,h),this.uR=0}CO(t,s,i,e,n,r,h){if(this.hR!==this.fS)throw new Error("must set tile randomization mode first");this.zR().NC(t,s,i,e,n,r,h),this.uR=0}EO(t,s,i,e,n,r,h,o,a,l,u){const c=this.hR;if(u%=10800,!c.pI||c.BI(s,i,e,n,r,h,o,a,l,u))return;const f=this.zR();f.SC(),c.VI(s,i,e,n,r,h,o,a,l,u);const d=f.j_;d[0]=r,d[1]=h,s.Vo(d,2),d[6]=a,d[7]=l,i.Vo(d,12);const p=f.V_;n.Vo(p,0);const m=p[1];p[1]=p[3],p[3]=m,e.Vo(f.U_,0),f.N_=u,f.B_=o,c.ZG.mI()?f.W_=t?t.cG():null:f.W_=null,this.uR=0}PO(t){const s=this.hR;if(0===t.length||s.LI(t))return;const i=this.zR();i.MC(),s.NI(t),_c.Gh(i.H_,t),this.uR=0}AO(t,s,i,e){this.zR().cC(t,s,i,e),this.uR=0}Eu(t){this.zR().uC(t),this.uR=0}RO(){}Rv(){super.Rv(),this.OG.flush()}OO(){this.VA&&this.cR&&this.cR.gG()&&(this.zR().BC(this.HA),this.uR=0)}FO(t){t=!!t,this.HA!==t&&this.VA&&(this.HA=t,this.zR().jC(t),this.uR=0)}DO(){return this.HA}iG(){return this.zA}eG(){return this.UA}LO(t){if(t=!!t,this.UA&&this.qA!==t){if(t&&this.DO())throw new Error("depth still enabled");this.qA=t,this.zR().UC(t),this.uR=0}}kO(t,s,i,e,n=0){t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),this.wR.Za(t,s,i,e)||(this.wR.Ua(t,s,i,e),s=(n||this.SO(this.NO())[1])-s-e,this.zR().KC(!0,t,s,i,e),this.uR=0)}$O(){-1!==this.wR.tl()&&(this.wR.set(0,0,-1,-1),this.zR().KC(!1,0,0,0,0),this.uR=0)}BO(){for(const t of this.LR)t.CA(this.OS)}QP(){return!this.OG||this.OG.isContextLost()||this.IR}LM(){super.BS(),_c.kw.nT.LM(),_c.kw.BT.LM(),_c.kw.qv.LM();for(const t of this.LR)t.Eu();this.GR=[],this.nA=null,this._R=null,this.ER=null,this.CR=null,this.PR=null,this.AR=null,this.RR=null,this.OR=null,this.FR=0,this.xR="(unavailable)",this.TR="(unavailable)",this.hR=null,this.oR=null,this.zA=null;for(const t of this.vS.values())t.LM()}async kM(){this.IR=!0,await this.$S(),this.IR=!1;for(const t of this.vS.values())t.kM(this);this.TP(this.Ey,this.Py,!0)}WO(t,s){if(this.QP())throw new Error("context lost");this.Ov();const i=_c.Hn(_c.kw.nT,this);return i.pT(t,s),i}async jO(t,s){if(this.QP())throw new Error("context lost");if(s=Object.assign({},s),_c.Ai.ImageBitmapOptions){let i=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});const e=s.Yx&&"clamp-to-edge"!==s.Yx||s.Xx&&"clamp-to-edge"!==s.Xx,n=_c.br(i.width)&&_c.br(i.height);return this.wT()||n||!e?s.iT=!1:_c.Ai.Di?(i=await createImageBitmap(t,{premultiplyAlpha:"premultiply",resizeWidth:_c.vr(i.width),resizeHeight:_c.vr(i.height)}),s.iT=!1):i=await createImageBitmap(t,{premultiplyAlpha:"none"}),await _c.df((()=>this.WO(i,s)))}if(t instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const s=await _c.uo(t);t=s}return await _c.df((()=>this.WO(t,s)))}sG(t,s,i){this.Ov();const e=_c.Hn(_c.kw.nT,this);return e.MT(t,s,i),e}tA(t,s,i){this.Ov(),s._T(t,i)}rG(t){t&&(t.RT(),t.OT()>0||(this.Ov(),t===this.pR&&(this.OG.bindTexture(this.OG.TEXTURE_2D,null),this.pR=null),t===this.vC&&(this.OG.activeTexture(this.OG.TEXTURE1),this.OG.bindTexture(this.OG.TEXTURE_2D,null),this.OG.activeTexture(this.OG.TEXTURE0),this.vC=null),t.CT()))}VO(t){let s=this.Ey,i=this.Py,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height&&(i=Math.floor(t.height),e=!1)),s<=0||i<=0)throw new Error("invalid size");this.Ov();const n=_c.Hn(_c.kw.BT,this);return n.QT(s,i,Object.assign({NT:e},t)),this.cR=null,this.k_.oG=null,this.k_.aG=null,n}UO(t,s=!0){t!==this.cR&&(t&&t.yG()&&t.nG(this.Ey,this.Py),this.zR().aC(t),this.cR=t,this.uR=0,s&&this.JR())}NO(){return this.cR}SO(t){return t?[t.jg(),t.Kg()]:[this.Ey,this.Py]}HO(t,s="stretch"){this.eA<2||this.cR&&this.cR.wG()>0?(this.cO(),this.eO(),this.qO(t,s)):(this.zR().IC(t,this.cR,s),this.uR=0)}qO(t,s="stretch"){const i=t.cG();if(!i)throw new Error("not a texture-backed render target");this.rO(i),this.wO(s,i)}zO(t){this.eA<2||(this.zR().TC(t.lG()),this.uR=0)}JO(t){this.UO(null),this.Ov();const s=t.cG();s===this.pR&&(this.OG.bindTexture(this.OG.TEXTURE_2D,null),this.pR=null),s===this.vC&&(this.OG.activeTexture(this.OG.TEXTURE1),this.OG.bindTexture(this.OG.TEXTURE_2D,null),this.OG.activeTexture(this.OG.TEXTURE0),this.vC=null),t.CT()}async xG(t,s,i){this.Ov();const e=this.cR;let n,r,h;t?(n=t.jg(),r=t.Kg(),h=t.lG()):(n=this.jg(),r=this.Kg(),h=null);let o=0,a=0,l=n,u=r;if(i){o=_c.Zn(Math.floor(i.Ka()),0,n-1),a=_c.Zn(Math.floor(i.Qa()),0,r-1);let t=i.width();t=0===t?n-o:_c.Zn(Math.floor(t),0,n-o);let s=i.height();s=0===s?r-a:_c.Zn(Math.floor(s),0,r-a),l=t,u=s,a=r-(a+u)}const c=this.OG;c.bindFramebuffer(c.FRAMEBUFFER,h);const f=()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.cR=null,this.k_.oG=null,this.k_.aG=null,this.UO(e)};let d;if(!s&&this.yT()>=2){c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const t=c.createBuffer(),s=l*u*4,i=c.PIXEL_PACK_BUFFER;c.bindBuffer(i,t),c.bufferData(i,s,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(i,null),f();const e=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);await this.PG((()=>c.getSyncParameter(e,c.SYNC_STATUS)===c.SIGNALED)),c.deleteSync(e),d=new ImageData(l,u),c.bindBuffer(i,t),c.getBufferSubData(i,0,new Uint8Array(d.data.buffer),0,s),c.bindBuffer(i,null),c.deleteBuffer(t)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}YO(){this.FO(!0),this.zR().qC(),this.uR=0,this.SR=1}XO(){this.FO(!1),this.zR().JC(),this.uR=0,this.SR=2}ZO(){return 2===this.SR}KO(){this.FO(!0),this.zR().XC(),this.uR=0,this.SR=0}QO(t){this.tF()&&(this.zR().CC(t),this.uR=0)}sF(t){this.tF()&&(this.zR().AC(t),this.uR=0)}PG(t){const s=new Promise((s=>qc.add({resolve:s,AA:t})));return-1===zc&&(zc=self.requestAnimationFrame(Ic)),s}Wv(){return this.Ey*this.Py*(this.NA.alpha?4:3)}jv(){let t=0;for(const s of _c.kw.BT.TG())s.cG()||(t+=s.DT());return t}Vv(){let t=0;for(const s of _c.kw.nT.LT())t+=s.DT();return t}iF(){return this.$A}yT(){return this.eA}eF(){return"webgl"+this.yT()}wT(){return this.yT()>=2}mT(){return this.bR}nF(){return this.vR}rF(){return this.MR}hF(){return this.xR}oF(){return this.TR}aF(){if(this.yT()>=2)return"webgl2";{const t=[];return this.AR&&t.push("EXT_frag_depth"),this.RR&&t.push("OES_standard_derivatives"),this.OR&&t.push("EXT_shader_texture_lod"),t.length>0?"webgl1:"+t.join(","):"webgl1:none"}}lF(){return this.GR}tF(){return!!this.nA}rA(){return this.nA}EG(){return this._R}$R(){return!!this.ER}GT(){return this.CR}IT(){return this.FR}GA(t){this.LR.add(t)}IA(t){this.LR.delete(t)}wA(){return this.kR}gT(){return this.OG}NR(t){this.Db([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}uF(){return this.Hv()}}}{const Jc=self._s,Yc={cF:null,fF:null,dF:null,getTime:null,pF:null};Jc.kw.mF=class{constructor(t){t=Object.assign({},Yc,t),this.gF=t.cF,this.yF=t.fF,this.wF=t.dF,this.SF=t.getTime,this.bF=t.pF,this.vF=null,this.MF=new Set}xF(t){this.MF.add(t)}TF(t){this.MF.delete(t)}LM(){this.vF=null;for(const t of this.MF)t.LM()}GF(t){return this.gF?this.gF(t):[t.jg(),t.Kg()]}NO(t){return this.yF(t)}IF(t,s){this.wF(t,s)}_F(){return this.SF()}Op(t){this.bF(t)}CF(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.vF||this.vF.jg()===s&&this.vF.Kg()===i||(t.rG(this.vF),this.vF=null),null===this.vF&&(this.vF=t.WO(null,{width:s,height:i,Zx:"nearest",tT:!1})),this.vF}}}{const Xc=self._s,Zc=self.assert,Kc=self.ls,Qc=Kc.ds,tf=Xc.Hn(Xc.Rect),sf=Xc.Hn(Xc.Rect),ef=Xc.Hn(Xc.Rect),nf=Xc.Hn(Xc.Rect),rf=Qc.create(),hf=Qc.create(),of={EF:null,PF:null,AF:null,RF:!1},af={OF:null,FF:!1,DF:!1,LF:!1,kF:!1,NF:!1,$F:!1};Xc.kw.BF=class{constructor(t,s){s=Object.assign({},of,s),this.jp=t,this.WF=s.EF,this.jF=s.PF,this.VF=s.AF,this.UF=null,this.HF=[],this.qF=[],this.zF=[],this.JF=!1,this.PM=0,this.YF=!1,this.XF=!1,this.ZF=!1,this.KF=!1,this.QF=!1,this.tD=!1,this.WA=!1,this.sD=!1,this.iD=!1,this.eD=!1,this.nD=!1,this.rD=!1,this.hD=0,this.oD=[null,null,null],this.aD=!!s.RF,this.lD=0,this.uD=0,this.cD=0,this.fD=0,this.dD=null,this.pD=null,this.mD=Xc.Hn(Xc.Rect),this.gD=Xc.Hn(Xc.Rect),this.yD=Xc.Hn(Xc.Rect),this.wD=Xc.Hn(Xc.Rect),this.SD=Xc.Hn(Xc.Rect),this.bD=1,this.vD=1,this.MD=0,this.xD=0,this.TD=null,this.GD=null,this.ID=0,this._D=0,this.CD=0,this.ED=0,this.PD=!1,this.YT=Qc.create(),this.AD=Qc.create(),this.jp.xF(this)}qn(){this.jp.TF(this),Xc.bh(this.zF),Xc.bh(this.HF),Xc.bh(this.qF),this.dD=null,this.pD=null,this.WF=null,this.jF=null,this.VF=null}LM(){this.JF=!0,Xc.bh(this.zF),Xc.bh(this.HF),Xc.bh(this.qF)}RD(){return this.JF}OD(t,s){if(s=Object.assign({},af,s),Xc.bh(this.zF),this.lD=0,this.uD=0,this.YF=!1,this.XF=!1,this.ZF=!1,this.KF=!1,this.QF=!1,this.tD=!1,this.hD=0,this.rD=!!s.kF,this.nD=!!s.$F,this.JF=!1,Xc.Gh(this.HF,t),0===t.length)return;if(s.OF){if(s.OF.length!==t.length)throw new Error("incorrect indexMap length");Xc.Gh(this.qF,s.OF)}else{Xc.bh(this.qF);for(let s=0,i=t.length;s<i;++s)this.qF.push(s)}for(const s of t)this.lD+=s.gM(),this.uD+=s.yM(),s.MM()&&(this.YF=!0),s.TM()&&(this.XF=!0),s.xM()&&(this.ZF=!0),s.wM()&&(this.KF=!0),s._M()&&(this.QF=!0);this.tD=this.FD(t[0].pM());const i=this.DD(t[0],s),e=this.LD(t.at(-1),s);if(1===t.length&&!i&&!e)return void(this.eD=!0);this.eD=!1;let n=0;i&&(this.hD=1,this.zF.push(Xc.Hn(Xc.kw.BF.ND.kD,this,-1,1)),n=1);for(let s=0,r=t.length;s<r;++s)if(0!==s||i){let t=1===n?2:1;s!==r-1||e||(t=0),this.hD=Math.max(this.hD,t),this.zF.push(Xc.Hn(Xc.kw.BF.ND.$D,this,n,t,s)),n=t}else this.hD=1,this.zF.push(Xc.Hn(Xc.kw.BF.ND.BD,this,-1,1,s)),n=1;e&&this.zF.push(Xc.Hn(Xc.kw.BF.ND.WD,this,n,0))}DD(t,s){return!!(s.FF||t.SM()||s.LF&&!t.vM()||t.TM()&&!this.nD||0!==this.lD||0!==this.uD)||(t.pM().Bv()?t.xM()&&(s.NF||s.kF)||t.GM()&&s.kF:t.xM()&&!this.tD&&s.NF)}LD(t,s){return!!s.DF||(t.pM().Bv()?t.xM()||t.wM():(t.xM()||t.wM())&&this.jD())}FD(t){return t.sb()&&this.ZF&&!this.KF}VD(t,s,i){t.sb()&&null===s&&(s=t.UD()),this.TD=s,this.dD=i.HD||null,this.pD=i.qD||null,this.PM=i.zD||0,this.bD=i.devicePixelRatio||1,this.vD=i.JD||1,this.MD=i.YD||0,this.xD="number"==typeof i.time?i.time:this.jp._F(),this.WA=!1,t.XR(),this.YF&&this.XD();let e=!1;if(this.ZD()&&(this.KD(t,i),e=!0,this.GD=this.jp.CF(t,this.cD,this.fD),tf.S(this.gD),tf.bl(),t.sb()&&t.QD(this.TD),t.tL(this.TD.cG(),this.GD,tf.Ka(),tf.Qa(),tf.width(),tf.height())),this.eD)this.sL(t,i);else if(e||this.KD(t,i),0!==this.yD.width()||0!==this.yD.height()){t.lO(),t.eO(),t.Vb(0),t.Hb(0),this.UF=i.iL||null,this.ID=i.eL||0,this._D=i.nL||0,this.CD=i.rL||0,this.ED=i.hL||0,this.PD=!!i.oL,this.aL(t),this.oD[0]=s,this.oD[1]=this.hD>=1?this.lL():null,this.oD[2]=2===this.hD?this.lL():null;for(const s of this.zF){const i=this.uL(s.cL()),e=this.uL(s.fL());t.sb()?s.dL(t,i,e):s.pL(t,i,e)}t.rO(null),this.oD[1]&&this.mL(this.oD[1]),this.oD[2]&&this.mL(this.oD[2]),this.oD.fill(null),this.gL(t),this.TD=null,this.GD=null,this.dD=null,this.pD=null,this.UF=null}}KD(t,s){const[i,e]=this.jp.GF(t);this.yL(t,i,e),this.wL(s)}yL(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.cD===s&&this.fD===i||this.SL(t,s,i,0,0,this.YT,this.AD),this.cD=s,this.fD=i}SL(t,s,i,e,n,r,h){const o=s/2+e,a=i/2+n;t.tb(r,s/i);const l=t.nb(o,a,t.WS(i),o,a,0,i);Qc.S(h,l)}wL(t){this.mD.S(t.bL),t.vL?this.gD.S(t.vL):this.gD.set(0,0,this.cD,this.fD),this.yD.S(this.gD),this.yD.St(this.cD,this.fD);const s=this.vD*this.bD;this.gD.cl(this.lD*s,this.uD*s),this.SD.S(this.gD),this.SD.St(this.cD,this.fD),this.gD.vl(0,0,this.cD,this.fD),this.wD.S(this.gD),this.wD.St(this.cD,this.fD)}aL(t){if(this.sD=t.DO(),this.iD=t.ZO(),this.nD)t.FO(!1),this.XF&&t.LO(!0);else{if(tf.S(this.gD),t.Bv()){const t=this.vD*this.bD;tf.cl(Math.max(this.lD,1)*t,Math.max(this.uD,1)*t),tf.bl(),tf.Zn(0,0,this.cD,this.fD)}else tf.bl();t.kO(tf.Ka(),tf.Qa(),tf.width(),tf.height(),this.fD)}}ML(t){t.eO(),this.nD||(this.iD&&t.KO(),t.FO(!1),this.XF&&t.LO(!0)),t.sb()&&t.xL(!0)}gL(t){t.LO(!1),this.iD&&t.XO(),t.FO(this.sD),this.nD||t.$O(),t.sb()&&t.xL(!1),this.WA=t.ZR()}TL(){this.SD.Zn(0,0,1,1)}uL(t){return t<0?null:this.oD[t]}lL(){return this.jp.NO(this)}GL(){return this.TD}mL(t){this.jp.IF(t,this)}IL(t){return this.HF[t]}_L(t){this.UF?this.UF(this,t,(()=>this.WF(t,this))):this.WF(t,this),this.eD||this.ML(t)}CL(t){if(this.nD)return!0;if(0!==this.ID||0!==this._D||0!==this.CD||0!==this.ED)return!1;const[s,i]=t.SO(t.NO());return s===this.cD&&i===this.fD}EL(t,s){let i=this.YT,e=this.AD;if(s&&!this.CL(t)){let s,n;i=rf,e=hf,0!==this.CD&&0!==this.ED?[s,n]=[this.CD,this.ED]:[s,n]=t.SO(t.NO()),this.SL(t,s,n,this.ID,this._D,i,e),this.nD||t.$O()}t.VR(i),t.YR(e)}XD(){this.jp.Op(this)}PL(t,s){return this.VF(this.qF[t],s)}AL(t,s){let i=this.SD,e=this.wD,n=this.yD;t.Bv()&&(sf.S(i),sf.pl(1),i=sf,ef.S(e),ef.pl(1),e=ef,nf.S(n),nf.pl(1),n=nf),this.RL(t,s,e,n,i,1/this.cD,1/this.fD)}OL(t,s){let i=this.wD,e=this.yD,n=1/this.cD,r=1/this.fD;if(this.jF){let{FL:t,DL:s,LL:h}=this.jF(this.dD);t||(tf.set(0,0,0,0),t=tf),s||(s=this.cD),h||(h=this.fD),i=t,e=t,n=1/s,r=1/h}else t.Bv()&&(ef.S(i),ef.pl(1),i=ef,nf.S(e),nf.pl(1),e=nf);let h=this.SD;t.Bv()&&(h=sf,h.S(this.SD),h.pl(1)),this.RL(t,s,i,e,h,n,r),t.sb()&&this.QF&&t.kL(this.rD)}NL(t){return this.ZF?t.sb()?this.ZD()?this.GD:this.TD.cG():this.TD:null}RL(t,s,i,e,n,r,h){t.EO(this.NL(t),n,i,e,this.mD,r,h,this.bD,this.vD,this.MD,this.xD),t.PO(this.PL(s,t))}sL(t,s){const i=this.HF[0],e=t.DO(),n=i.TM();n&&(t.FO(!1),t.LO(!0),this.SD.set(0,0,1,1),this.yD.set(0,0,1,1)),t.ub(i),t.FM(this.PM),t.UO(this.TD);let r=0,h=1;if(this.yD.set(0,0,1,1),i.GM()&&this.jF){const{FL:t,DL:s,LL:i}=this.jF(this.dD);t&&this.yD.S(t),r=Number.isFinite(s)?1/s:0,h=Number.isFinite(i)?1/i:0}else{const[s,i]=this.jp.GF(t);r=1/s,h=1/i}s.bL?this.mD.S(s.bL):this.mD.set(0,0,0,0),t.EO(this.NL(t),this.SD,this.yD,this.yD,this.mD,r,h,this.bD,this.vD,this.MD,this.xD),t.PO(this.PL(0,t)),t.sb()&&this.QF&&t.kL(this.rD),t.Vb(0),this._L(t),n&&(t.LO(!1),t.FO(e))}ZD(){return this.tD}jD(){return!this.tD}$L(){return this.ZF}BL(){return!!this.eD&&!this.ZD()}WL(){return this.nD}jL(){return this.dD}VL(){return this.pD}UL(){return this.PM}HL(){return this.PD}ZR(){return this.WA}qL(){return this.gD}zL(){return this.wD}JL(){return this.aD}async YL(t,s,i){}}}{const lf=self._s;lf.kw.BF.ND=class{constructor(t,s,i,e=-1){this.XL=t,this.ZL=s,this.KL=i,this.Pw=e}QL(){return this.XL}cL(){return this.ZL}fL(){return this.KL}tk(){return this.Pw}RI(){return this.QL().IL(this.tk())}pL(t,s,i){}dL(t,s,i){}}}{const uf=self._s;uf.kw.BF.ND.kD=class extends uf.kw.BF.ND{constructor(t,s,i,e){super(t,s,i,e)}pL(t,s,i){const e=this.QL();t.lO(),t.lb(),t.UO(i,e.HL()),t.AO(0,0,0,0),e._L(t),e.TL()}dL(t,s,i){const e=this.QL();t.lO(),t.lb(),t.UO(i,!1),t.AO(0,0,0,0),e._L(t),e.TL()}}}{const cf=self._s,ff=cf.Hn(cf.Rect),df=cf.Hn(cf.Cl);cf.kw.BF.ND.WD=class extends cf.kw.BF.ND{constructor(t,s,i,e){super(t,s,i,e)}pL(t,s,i){const e=this.QL();t.lb(),t.UO(i),e.EL(t,!0),t.FM(e.UL()),t.rO(s.cG()),df.Yl(e.qL()),ff.S(e.zL()),ff.pl(1),t.ev(df,ff),e.JL()&&t.zO(s)}dL(t,s,i){const e=this.QL();t.lb(),t.UO(i,!1),e.CL(t)?df.Yl(e.zL()):(t.xL(!1),e.EL(t,!0),df.Yl(e.qL())),t.sk(null),t.FM(e.UL()),t.rO(s.cG()),e.WL()?t.wO():t.ev(df,e.zL())}}}{const pf=self._s;pf.kw.BF.ND.BD=class extends pf.kw.BF.ND{constructor(t,s,i,e){super(t,s,i,e)}pL(t,s,i){const e=this.QL();t.UO(i,e.HL()),t.AO(0,0,0,0),t.cO(),t.ub(this.RI()),e.OL(t,this.tk()),e._L(t),e.TL()}dL(t,s,i){const e=this.QL();t.UO(i,!1),t.AO(0,0,0,0),t.cO(),t.ub(this.RI()),e.OL(t,this.tk()),e._L(t),e.TL()}}}{const mf=self._s,gf=mf.Hn(mf.Rect),yf=mf.Hn(mf.Cl);mf.kw.BF.ND.$D=class extends mf.kw.BF.ND{constructor(t,s,i,e){super(t,s,i,e)}pL(t,s,i){const e=this.QL();t.UO(i);const n=0===this.fL();n?t.FM(e.UL()):(t.AO(0,0,0,0),t.cO()),t.ub(this.RI()),e.AL(t,this.tk()),t.rO(s.cG()),e.EL(t,n),yf.Yl(e.qL()),gf.S(e.zL()),gf.pl(1),t.ev(yf,gf),e.JL()&&t.zO(s)}dL(t,s,i){const e=this.QL();t.UO(i,!1),0===this.fL()?(t.FM(e.UL()),t.sk(null),e.CL(t)?yf.Yl(e.zL()):(t.xL(!1),e.EL(t,!0),yf.Yl(e.qL()))):(t.AO(0,0,0,0),t.cO(),yf.Yl(e.zL())),t.ub(this.RI()),e.AL(t,this.tk()),t.rO(s.cG()),e.WL()?t.wO():t.ev(yf,e.zL())}}}{let wf=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]};SortZOrderList=wf;const Sf=self._s,bf=self.Ns;let vf=null;const Mf=new Set,xf=[],Tf=[];let Gf=!1,If=!1,_f=!1;const Cf=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.ik=class{constructor(t){vf=t,Object.defineProperties(this,{ek:{value:vf.rk().nk(),writable:!1},hk:{value:vf.lk().ak(),writable:!1},uk:{value:{},writable:!1},ck:{value:{},writable:!1},fk:{value:vf.dk(),writable:!1},pk:{value:vf.mk(),writable:!1},gk:{value:vf.yk(),writable:!1},wk:{value:vf.Sk(),writable:!1},bk:{value:new Date(vf.vk()),writable:!1},storage:{value:new self.Mk(vf),writable:!1},xk:{value:vf.Tk(),writable:!1},Gk:{value:vf.Ik(),writable:!1},_k:{value:vf.Ck(),writable:!1},Zx:{value:vf.Ek(),writable:!1},Pk:{value:vf.Ak(),writable:!1},Rk:{value:new self.Ok(t),writable:!1},Fk:{value:new self.Dk(t),writable:!1}}),vf.Lk().addEventListener("keydown",(t=>{Mf.has(t.key)?t.stopPropagation():Mf.add(t.key)})),vf.Lk().addEventListener("keyup",(t=>Mf.delete(t.key))),vf.wf().addEventListener("window-blur",(()=>Mf.clear())),vf.Tk()&&(self.alert=t=>(Gf||(Gf=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}kk(t){Object.defineProperties(this.uk,t)}Nk(t){Object.defineProperties(this.ck,t)}addEventListener(t,s){vf.Lk().addEventListener(t,s)}removeEventListener(t,s){vf.Lk().removeEventListener(t,s)}$k(t,...s){bf.ue(t);const i=vf.Bk(),e=i.Wk(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.Iu())return e.jk();if(s.length<e.Vk())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.Vk()} expected)`);const n=e.Uk();let r=n.Hk();const h=i.qk();if(h){r=r.slice(0);const t=new Set(r);for(const s of h.Hk())t.has(s)||(r.push(s),t.add(s));for(const s of i.zk())t.has(s)||(r.push(s),t.add(s))}return n.Jk(r,e.Yk(),e.Xk(),e.jk(),...s)}Zk(t){const s=vf.Qk().Kk();if(!s)throw new Error("not in a function which returns a value");switch(s.tN()){case 1:"number"==typeof t&&s.sN(t);break;case 2:"string"==typeof t&&s.sN(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.sN(t)}}signal(t){bf.ue(t),vf.Bk().iN(t)}eN(t){return bf.ue(t),vf.Bk().nN(t)}rN(){return[vf.Ik(),vf.Ck()]}get hN(){return vf.oN()}get aN(){return vf.lN()}get uN(){return vf.cN()}get fN(){return vf.dN()}get pN(){return vf.mN()}get gN(){return vf.yN()}get wN(){return vf.SN()}set wN(t){bf.he(t),vf.bN(t)}get vN(){return If||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),If=!0),vf.MN()}get framesPerSecond(){return vf.MN()}get xN(){return vf.TN()}get GN(){return vf.IN()}get _N(){return vf.CN()}get EN(){return vf.PN()}set EN(t){if(!Cf.has(t))throw new Error("invalid framerate mode");vf.AN(t)}get RN(){return vf.ON()}set RN(t){bf.he(t),vf.FN(t)}get DN(){return vf.LN()}set DN(t){vf.kN(t)}get NN(){return vf.rk().$N()}get BN(){return vf.rk().WN()}random(){return vf.jN()}get layout(){const t=vf.VN();if(!t)throw new Error("no layout is running - make sure a layout is loaded before accessing");return t.UN()}HN(t){const s=vf.qN();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.zN(t),!i)throw new Error("invalid layout");return i.UN()}JN(){return vf.qN().YN().map((t=>t.UN()))}XN(t){const s=vf.qN();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.zN(t),!i)throw new Error("invalid layout");s.ZN()||s.KN(i)}get keyboard(){const t=vf.QN().keyboard;if(!t)throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first");return t}get t$(){const t=vf.QN().t$;if(!t)throw new Error("runtime.mouse used but Mouse object missing - add it to your project first");return t}get s$(){const t=vf.QN().s$;if(!t)throw new Error("runtime.touch used but Touch object missing - add it to your project first");return t}get i$(){const t=vf.QN().i$;if(!t)throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first");return t}e$(t,s){bf.ue(t),bf.ue(s),vf.n$(t,s)}r$(t){bf.he(t);const s=vf.h$(t);return s?s.o$():null}a$(t,s){bf.Re(s);const i=vf.l$();for(const s of t){const t=vf.u$(s),i=t.c$();xf.push([i.f$().tk(),i.d$()]),Tf.push(t)}if(0===xf.length)return;xf.sort(wf),Tf.sort(((t,i)=>s(t.o$(),i.o$())));let e=!1;for(let t=0,s=xf.length;t<s;++t){const s=Tf[t],n=i.p$(xf[t][0]),r=xf[t][1],h=n.m$();h[r]!==s&&(h[r]=s,s.c$().g$(n,!0),n.y$(s),e=!0)}e&&vf.w$(),Sf.bh(xf),Sf.bh(Tf)}async S$(t,s){_f||(console.warn("IRuntime.createWorker() is deprecated. All modern browsers now support nested workers so this method is no longer needed."),_f=!0);const i=new MessageChannel,e=i.port1,n=i.port2;return await vf.b$("runtime","script-create-worker",{url:t,opts:s,port2:n},[n]),e}alert(t){return vf.b$("runtime","alert",{message:t+(vf.Tk()?" [via Web Worker]":"")})}v$(t){return bf.he(t),vf.M$(t)}x$(t){vf.T$(t)}async G$(t,s,i){bf.ce(t),bf.ie(s),bf.Be(i,DOMRect),i||(i=new DOMRect(0,0,0,0));const e=vf.I$();if(!e)return;vf.w$();const n=await e._$(t||"image/png",s,i.x,i.y,i.width,i.height);return await vf.C$(Sf.R$.A$.P$.E$,null),n}}}{const Ef=self._s,Pf=self.Ns;let Af=null;self.O$=class{constructor(t){Af=t,Object.defineProperties(this,{F$:{value:!0,writable:!1}})}D$(t){const s=self.k$.L$(t);if(!s)throw new Error("invalid IImageInfo");s.N$(Af.$$())}B$(t){return Af.io(t)}W$(t){return Af.eo(t)}j$(t){return Af.no(t)}V$(t){return Af.ro(t)}U$(t){return Af.H$(t)}q$(t){return"flat"===Af.z$()&&Ef.Kh(t)&&(t=t.toLowerCase()),Af.J$(t)}get Y$(){return Af.X$()}async Z$(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}K$(...t){return Af.Q$(...t)}tB(t){return Af.sB(t)}iB(t){return Af.eB(t)}}}{const Rf=self._s,Of=self.Ns;let Ff=null;self.nB=class{constructor(t){Ff=t,Object.defineProperties(this,{runtime:{value:Ff.$$(),writable:!1}})}rB(t,s){const i=Ff.$$(),e=i.u$(t),n=i.u$(s);return Ff.hB(e,n)}oB(t,s){const i=Ff.$$(),e=i.u$(t);for(const t of s){const s=i.u$(t);if(Ff.hB(e,s))return t}return null}aB(t){const s=Ff.$$().u$(t),i=Ff.lB(s);return i?i.o$():null}uB(t,s){if(Of.he(t),Of.he(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");Ff.cB(t,s)}fB(){return Ff.dB()}pB(t,s){const i=Ff.$$();let e;e=Array.isArray(t)?t.map((t=>i.mB(t))):[i.mB(t)];const n=Rf.Rect.Xa(s),r=[];return Ff.gB(null,e,n,r),r.map((t=>t.o$()))}}}{const Df=self._s,Lf=self.Ns;let kf=null;const Nf=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),$f=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),Bf=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.Ok=class{constructor(t){kf=t,Object.defineProperties(this,{yB:{value:Df.Ks.oi,writable:!1},os:{value:Nf.get(Df.Ks.Qs)||"unknown",writable:!1},wB:{value:Df.Ks.ti,writable:!1},browser:{value:$f.get(Df.Ks.si)||"unknown",writable:!1},SB:{value:Df.Ks.ii,writable:!1},bB:{value:Bf.get(Df.Ks.ni)||"unknown",writable:!1}})}get vB(){let t=kf.MB();return kf.xB()?t="nwjs":kf.TB()?t="windows-webview2":"cordova"===t?t="Android"===Df.Ks.Qs?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get R_(){return kf.I$().GB()}get IB(){return kf.I$()._B()}get CB(){return kf.I$().EB()}get PB(){return kf.I$().AB()}get RB(){return kf.I$().OB()}get DB(){return kf.I$().LB()}get kB(){return kf.I$().NB()}get $B(){return kf.I$().BB()}get devicePixelRatio(){return kf.WB()}}}{const Wf=self._s,jf=self.Ns;self.Mk=class{constructor(t){this.jB=t.VB()}getItem(t){return jf.ue(t),this.jB.getItem(t)}setItem(t,s){return jf.ue(t),this.jB.setItem(t,s)}removeItem(t){return jf.ue(t),this.jB.removeItem(t)}clear(){return this.jB.clear()}keys(){return this.jB.keys()}}}{const Vf=self._s,Uf=self.Ns,Hf=Vf.Cs();self.UB=class{#t;constructor(){const t=Vf.qB.HB(Hf);this.#t=t,Object.defineProperties(this,{runtime:{value:t.$$().zB(),writable:!1},id:{value:t.JB(),writable:!1},YB:{value:t.XB(),writable:!1},ZB:{value:t.KB(),writable:!1},QB:{value:t.tW(),writable:!1},sW:{value:t.iW(),writable:!1},eW:{value:t.nW(),writable:!1},rW:{value:t.hW(),writable:!1},oW:{value:t.aW(),writable:!1},lW:{value:t.uW(),writable:!1}}),t.$$().cW(this,t)}static fW(t){if(!t)return null;const s=Vf.qB.dW(t);return s?s.pW():null}mW(){return this.#t.yW().gW()}wW(){return this.#t.SW().o$()}}}{const qf=globalThis._s,zf=globalThis.Ns,Jf=qf.Cs();globalThis.bW=class{#t;constructor(){const t=qf.qB.HB(Jf);this.#t=t,Object.defineProperties(this,{name:{value:t.Ec(),writable:!1},runtime:{value:t.$$().zB(),writable:!1},vW:{value:t.MW().pW(),writable:!1}}),t.$$().cW(this,t)}addEventListener(t,s){zf.ue(t),zf.Re(s),this.#t.Lk().addEventListener(t,s)}removeEventListener(t,s){zf.ue(t),zf.Re(s),this.#t.Lk().removeEventListener(t,s)}xW(){return[...this.TW()]}GW(){return qf.Bh(this.TW())}IW(){return[...this._W()]}EW(){return qf.Bh(this._W())}PW(t){const s=this.#t,i=s.$$().AW(t),e=s.RW(i);return e?e.o$():null}*TW(){for(const t of this.#t.OW())yield t.o$()}*_W(){for(const t of this.#t.DW().FW())yield t.o$()}}}{const Yf=globalThis._s,Xf=globalThis.Ns,Zf=Yf.Cs();globalThis.LW=class extends globalThis.bW{#t;constructor(){super();const t=Yf.qB.HB(Zf);this.#t=t}kW(t){Xf.Re(t);const s=this.#t;if(s.NW()>0)throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.$W(t)}Ii(t,s,i,e,n){if(Xf.se(s),Xf.se(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#t,h=r.$$(),o=h.VN().f$(t);if(!o)throw new Error("invalid layer");const a=h.BW(r,o,s,i,e,n);e&&o.WW(a);const l=h.Bk();return l.jW(!0),a.VW(),l.jW(!1),l.UW()||h.qN().HW()||h.qW(),a.o$()}zW(){return this.#t.JW().map((t=>t.gW()))}*YW(){for(const t of this.#t.JW())yield t.gW()}XW(t){return Xf.$e(t,globalThis.ZW),t.KW(this)}}}{const Kf=globalThis._s,Qf=globalThis.Ns,td=globalThis.LW,sd=Kf.Cs();globalThis.ZW=class extends globalThis.bW{#t;constructor(){super();const t=Kf.qB.HB(sd);this.#t=t}QW(){return this.#t.tj().map((t=>t.gW()))}*sj(){for(const t of this.#t.tj())yield t.gW()}KW(t){Qf.$e(t,td);const s=this.#t,i=s.$$().mB(t);return s.ij(i)}}}{const id=self._s,ed=self.Ns,nd=new WeakMap,rd=["above","below","top-sublayer","bottom-sublayer"];self.ej=class{constructor(t){nd.set(this,t);const s=[],i=t.nj(),e=i.rj().length;for(let t=0;t<e;++t)s.push(new self.hj(i,t));Object.defineProperties(this,{name:{value:t.Ec(),writable:!1},index:{value:t.tk(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){ed.ue(t),ed.Re(s),nd.get(this).Lk().addEventListener(t,s)}removeEventListener(t,s){ed.ue(t),ed.Re(s),nd.get(this).Lk().removeEventListener(t,s)}get width(){return nd.get(this).jg()}set width(t){ed.he(t),nd.get(this).Yg(t)}get height(){return nd.get(this).Kg()}set height(t){ed.he(t),nd.get(this).Vg(t)}oj(t,s){ed.he(t),ed.he(s);const i=nd.get(this);i.Yg(t),i.Vg(s)}getSize(){const t=nd.get(this);return[t.jg(),t.Kg()]}set scale(t){ed.he(t),nd.get(this).aj(t)}get scale(){return nd.get(this).lj()}set angle(t){ed.he(t),nd.get(this).uj(t)}get angle(){return nd.get(this).cj()}set scrollX(t){ed.se(t),nd.get(this).fj(t)}get scrollX(){return nd.get(this).dj()}set scrollY(t){ed.se(t),nd.get(this).pj(t)}get scrollY(){return nd.get(this).mj()}scrollTo(t,s){ed.se(t),ed.se(s);const i=nd.get(this);i.fj(t),i.pj(s)}gj(){const t=nd.get(this);return[t.dj(),t.mj()]}yj(t){const s=nd.get(this);let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return i=s.f$(t),i?i.wj():null}Sj(){return nd.get(this).bj().map((t=>t.wj()))}*vj(){for(const t of nd.get(this).vj())yield t.wj()}Mj(t,s,i){const e=nd.get(this),n=self.xj;ed.ue(t),ed.Be(s,n);const r=s?e.$$().Tj(s):null,h=rd.indexOf(i);if(h<0)throw new Error("invalid location");e.Gj(t,r,h)}Ij(t,s,i){const e=nd.get(this),n=e.$$(),r=self.xj;ed.$e(t,r);const h=n.Tj(t);if(!h)throw new Error("invalid layer");ed.Be(s,r);const o=s?n.Tj(s):null,a=rd.indexOf(i);if(a<0)throw new Error("invalid location");e._j(h,o,a)}Cj(t){const s=nd.get(this),i=self.xj;ed.$e(t,i);const e=s.$$().Tj(t);if(!e)throw new Error("invalid layer");const n=e.$$();s.Ej(e),n.Bk().UW()||n.qW()}Pj(){const t=nd.get(this),s=t.$$();t.Aj(),s.Bk().UW()||s.qW()}Rj(t,s){ed.he(t),ed.he(s),nd.get(this).Oj(t,s)}Fj(){return nd.get(this).Dj()}set V(t){ed.ue(t);const s=nd.get(this);if("perspective"===t)s.Lj();else{if("orthographic"!==t)throw new Error("invalid projection");s.kj()}}get V(){return nd.get(this).Nj()?"orthographic":"perspective"}}}{const hd=self._s,od=self.Ns,ad=new WeakMap,ld=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),ud=new Map([...ld.entries()].map((t=>[t[1],t[0]]))),cd=new Set(["2d","3d"]),fd=hd.Hn(hd.To);self.xj=class{constructor(t){ad.set(this,t);const s=[],i=t.nj(),e=i.rj().length;for(let t=0;t<e;++t)s.push(new self.hj(i,t));Object.defineProperties(this,{name:{value:t.Ec(),writable:!1},layout:{value:t.zN().UN(),writable:!1},effects:{value:s,writable:!1}}),t.$$().cW(this,t)}get $j(){const t=ad.get(this).Bj();return t?t.wj():null}*Wj(){for(const t of ad.get(this).Wj())yield t.wj()}*jj(){for(const t of ad.get(this).Vj())yield t.wj()}*Uj(){for(const t of ad.get(this).Vj())for(const s of t.Hj())yield s.wj()}get index(){return ad.get(this).tk()}get isVisible(){return ad.get(this).qj()}set isVisible(t){ad.get(this).zj(t)}get Jj(){return ad.get(this).Yj()}get Xj(){return ad.get(this).Zj()}set Xj(t){ad.get(this).Kj(t)}get Qj(){return ad.get(this).tV()}set Qj(t){ad.get(this).sV(!!t)}get iV(){return ad.get(this).eV()}get opacity(){return ad.get(this).tO()}set opacity(t){t=hd.Zn(+t,0,1),isNaN(t)||ad.get(this).iO(t)}set scale(t){od.he(t),ad.get(this).nV(t)}get scale(){return ad.get(this).rV()}set hV(t){od.he(t),ad.get(this).oV(t)}get hV(){return ad.get(this).aV()}set angle(t){od.he(t),ad.get(this).uj(t)}get angle(){return ad.get(this).lV()}set uV(t){od.he(t),ad.get(this).cV(t)}get uV(){return ad.get(this).fV()}set dV(t){od.he(t),ad.get(this).pV(t)}get dV(){return ad.get(this).mV()}set gV(t){od.he(t),ad.get(this).ZM(t)}get gV(){return ad.get(this).XM()}set renderingMode(t){if(!cd.has(t))throw TypeError("invalid rendering mode");ad.get(this).yV("3d"===t)}get renderingMode(){return ad.get(this).wV()?"3d":"2d"}set SV(t){ad.get(this).bV(t)}get SV(){return ad.get(this).vV()}set MV(t){ad.get(this).xV(t)}get MV(){return ad.get(this).TV()}set zD(t){od.ue(t);const s=ld.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");ad.get(this).FM(s)}get zD(){return ud.get(ad.get(this).GV())}set backgroundColor(t){if(od.Ge(t),t.length<3)throw new Error("expected 3 elements");fd.Po(t[0],t[1],t[2]);const s=ad.get(this),i=s.IV();i.Ho(fd)||(i.ko(fd),s.$$().w$())}get backgroundColor(){const t=ad.get(this).IV();return[t.No(),t.$o(),t.Bo()]}set scrollX(t){od.se(t);const s=ad.get(this);s._V(!0),s.fj(t)}get scrollX(){return ad.get(this).dj()}set scrollY(t){od.se(t);const s=ad.get(this);s._V(!0),s.pj(t)}get scrollY(){return ad.get(this).mj()}scrollTo(t,s){od.se(t),od.se(s);const i=ad.get(this);i._V(!0),i.fj(t),i.pj(s)}gj(){const t=ad.get(this);return[t.dj(),t.mj()]}CV(){ad.get(this)._V(!1)}getViewport(){return ad.get(this).EV().il()}PV(t,s,i=0){od.se(t),od.se(s),od.se(i);const e=ad.get(this),n=e.$$();return e.AV(t-n.EB(),s-n.AB(),i)}RV(t,s,i=0){od.se(t),od.se(s),od.se(i);const e=ad.get(this),n=e.$$(),[r,h]=e.OV(t,s,i);return[r+n.EB(),h+n.AB()]}FV(t,s,i=0){return od.se(t),od.se(s),od.se(i),ad.get(this).DV(t,s,i)}LV(t,s,i=0){return od.se(t),od.se(s),od.se(i),ad.get(this).kV(t,s,i)}get NV(){return ad.get(this).$V()}}}{let dd=function(t){let s=gd.get(t);return s||(s=pd.Hn(pd.Event.wf),gd.set(t,s),s)};GetDispatcher=dd;const pd=self._s,md=self.Ns,gd=new WeakMap,yd=pd.Cs();self.BV=class{#t;constructor(){const t=pd.qB.HB(yd);this.#t=t;const s={runtime:{value:t.$$().zB(),writable:!1},objectType:{value:t.WV().gW(),writable:!1},vW:{value:t.MW().pW(),writable:!1}};t.jV(s),t.VV(s),Object.defineProperties(this,s),t.$$().cW(this,t)}static UV(){return pd.qB.HV()}qV(){const t=gd.get(this);t&&(t.qn(),gd.delete(this))}addEventListener(t,s,i){md.ue(t),md.Re(s),dd(this).addEventListener(t,s,i)}removeEventListener(t,s,i){md.ue(t),md.Re(s),dd(this).removeEventListener(t,s,i)}dispatchEvent(t){dd(this).dispatchEvent(t)}destroy(){const t=this.#t,s=t.$$();s.zV(t),s.Bk().UW()||s.qN().HW()||s.Bk().JV()||s.qW()}YV(){const t=this.#t.XV();return t?t.map((t=>t.o$())):[]}*ZV(){const t=this.#t;if(t.KV())for(const s of t.QV())yield s.o$()}get uid(){return this.#t.tU()}get sU(){return this.#t.iU()}get eU(){return this.#t.nU()}set wN(t){md.he(t),this.#t.bN(t)}get wN(){return this.#t.rU()}hU(){this.#t.oU()}get aN(){const t=this.#t;return t.$$().lN(t)}aU(...t){md.Ge(t);const s=new Set(t),i=this.#t.lU();return s.isSubsetOf(i)}uU(t){md.$e(t,Set),this.#t.cU(t)}fU(){return new Set(this.#t.lU())}signal(t){md.ue(t);const s=this.#t;s.$$().Bk().dU(s,t)}eN(t){md.ue(t);const s=this.#t;return s.$$().Bk().pU(s,t)}}}{const wd=self._s,Sd=self.Ns,bd=wd.Cs();self.mU=class extends self.BV{#t;#s=!1;#i=null;#e=!1;#n=null;#r;#h;constructor(t){super(),this.#t=wd.qB.HB(bd),this.#s=!1,this.#i=null,this.#e=!1,this.#n=null,this.#r=t?.gU,this.#h=t?.yU}qV(){this.wU(!1),this.SU(!1),super.qV()}bU(){return wd.qB.vU()}MU(t){const s=this.#t;s.$$().xU(t,s)}TU(t){const s=this.#t;return s.$$().C$(t,s)}GU(t,s){if(Sd.ue(t),Sd.Re(s),!this.#r)throw new Error("no DOM component id set");this.#t.$$().IU(this.#r,t,s)}_U(t){Sd.Ge(t);for(const[s,i]of t)this.GU(s,i)}CU(t,s){if(Sd.ue(t),!this.#r)throw new Error("no DOM component id set");this.#t.$$().Wc(this.#r,t,s)}EU(t,s){if(Sd.ue(t),!this.#r)throw new Error("no DOM component id set");return this.#t.$$().b$(this.#r,t,s)}PU(t,s){if(!this.#t.$$().Tk())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#r,handler:t,data:s,responseId:null});this.CU(t,s)}wU(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=this.#t.$$();if(t){if(!this.#i)if(this.#t.$$().AU()){const t=globalThis.RU,s=this.vW;this.#i=()=>{const i=performance.now();this.OU(),t.FU(s,performance.now()-i)}}else this.#i=()=>this.OU();s.wf().addEventListener("tick",this.#i)}else s.wf().removeEventListener("tick",this.#i)}DU(){return this.#s}OU(){}SU(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=this.#t.$$();if(t){if(!this.#n)if(this.#t.$$().AU()){const t=globalThis.RU,s=this.vW;this.#n=()=>{const i=performance.now();this.LU(),t.FU(s,performance.now()-i)}}else this.#n=()=>this.LU();s.wf().addEventListener("tick2",this.#n)}else s.wf().removeEventListener("tick2",this.#n)}kU(){return this.#e}LU(){}NU(){return[]}$U(){return null}BU(t){}WU(){if(!this.#h)throw new Error("no wrapper component id set");return this.#t.$$().jU(this.#h)}VU(t,s){if(Sd.ue(t),Sd.Re(s),!this.#h)throw new Error("no wrapper component id set");this.#t.$$().UU(this.#h,t,s)}HU(t){Sd.Ge(t);for(const[s,i]of t)this.VU(s,i)}qU(t,s){if(!this.#h)throw new Error("no wrapper component id set");this.runtime.Fk.zU(this.#h,t,s)}JU(t,s){if(!this.#h)throw new Error("no wrapper component id set");return this.runtime.Fk.YU(this.#h,t,s)}}}{let vd=function(t){return class s extends t{#t;#s;constructor(t){super(t);const s=Md.qB.HB(Ed),i=s.c$();this.#t=s,this.#s=i,Cd.set(this,s);const e=[],n=i.XU();if(n){const t=i.WV().nj().rj().length;for(let s=0;s<t;++s)e.push(new self.hj(n,s))}const r={effects:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#s.zN().UN()}get ZU(){return this.#s.f$().wj()}get x(){return this.#s.HM()}set x(t){t=+t;const s=this.#s;isNaN(t)||s.HM()===t||(s.qM(t),s.KU())}get y(){return this.#s.JM()}set y(t){t=+t;const s=this.#s;isNaN(t)||s.JM()===t||(s.YM(t),s.KU())}setPosition(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.HM()===t&&i.JM()===s||(i.QU(t,s),i.KU())}tH(){const t=this.#s;return[t.HM(),t.JM()]}offsetPosition(t,s){if(t=+t,s=+s,isNaN(t)||isNaN(s)||0===t&&0===s)return;const i=this.#s;i.sH(t,s),i.KU()}set iH(t){t=+t;const s=this.#s;isNaN(t)||s.eH()===t||(s.nH(t),s.KU())}get iH(){return this.#s.eH()}set rH(t){t=+t;const s=this.#s;isNaN(t)||s.hH()===t||(s.oH(t),s.KU())}get rH(){return this.#s.hH()}aH(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.eH()===t&&i.hH()===s||(i.nH(t),i.oH(s),i.KU())}lH(){const t=this.#s;return[t.eH(),t.hH()]}get gV(){return this.#s.XM()}set gV(t){t=+t;const s=this.#t,i=this.#s;isNaN(t)||i.XM()===t||(i.ZM(t),s.$$().w$())}get uH(){return this.#s.cH()}get width(){return this.#s.jg()}set width(t){t=+t;const s=this.#s;isNaN(t)||s.jg()===t||(s.Yg(t),s.KU())}get height(){return this.#s.Kg()}set height(t){t=+t;const s=this.#s;isNaN(t)||s.Kg()===t||(s.Vg(t),s.KU())}oj(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.jg()===t&&i.Kg()===s||(i.TP(t,s),i.KU())}getSize(){const t=this.#s;return[t.jg(),t.Kg()]}get angle(){return this.#s.cj()}set angle(t){t=Md.Kn(+t);const s=this.#s;isNaN(t)||s.cj()===t||(s.uj(t),s.KU())}get fH(){return Md.tr(this.angle)}set fH(t){this.angle=Md.Qn(t)}Kl(t){return t?(this.#s.dH(Id,_d,!1),Id.il()):this.#s.pH().il()}mH(t){return t?(this.#s.dH(Id,_d,!1),_d.ql()):this.#s.gH().ql()}yH(){return this.#s.wH()}get isVisible(){return this.#s.Yj()}set isVisible(t){t=!!t;const s=this.#t,i=this.#s;i.Yj()!==t&&(i.zj(t),s.$$().w$())}get opacity(){return this.#s.tO()}set opacity(t){t=Md.Zn(+t,0,1);const s=this.#t,i=this.#s;isNaN(t)||i.tO()===t||(i.iO(t),s.$$().w$())}set SH(t){if(xd.Ge(t),t.length<3)throw new Error("expected 3 elements");Rd.Po(t[0],t[1],t[2]);const s=this.#t,i=this.#s;i.bH().Ho(Rd)||(i.vH(Rd),s.$$().w$())}get SH(){const t=this.#s.bH();return[t.No(),t.$o(),t.Bo()]}set zD(t){xd.ue(t);const s=Pd.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#t;this.#s.FM(s),i.$$().w$()}get zD(){return Ad.get(this.#s.GV())}MH(){this.#s.xH()}TH(){this.#s.GH()}IH(t){xd.$e(t,Gd);const s=this.#t,i=s.$$().Tj(t);if(!i)throw new Error("invalid layer");s.c$()._H(i)}CH(t,i){xd.$e(t,s),this.#s.EH(Cd.get(t),i)}get zIndex(){return this.#s.d$()}get PH(){return this.#s.AH()}set PH(t){this.#s.RH(!!t)}Tl(t,s){return xd.se(t),xd.se(s),this.#s.OH(+t,+s)}rB(t){xd.$e(t,s);const i=this.#t,e=Cd.get(t);return i.$$().lk().hB(i,e)}aB(){const t=this.#t,s=t.$$().lk().lB(t);return s?s.o$():null}getParent(){const t=this.#t.FH();return t?t.o$():null}DH(){const t=this.#t.LH();return t?t.o$():null}*kH(){for(const t of this.#t.kH())yield t.o$()}NH(){return this.#t.$H()}BH(t){const s=this.#t.WH(t);return s?s.o$():null}*children(){for(const t of this.#t.children())yield t.o$()}*jH(){for(const t of this.#t.jH())yield t.o$()}VH(t,i){xd.$e(t,s),xd.we(i),i||(i={});const e=this.#t,n=Cd.get(t);e.UH(n,i)}removeChild(t){xd.$e(t,s);const i=this.#t,e=Cd.get(t);i.HH(e)}qH(){const t=this.#t;t.zH()&&t.FH().HH(t)}JH(){const t=this.#s;return{YH:t.XH(),ZH:t.KH(),QH:t.tq(),sq:t.iq(),eq:t.nq(),rq:t.hq(),oq:t.aq(),lq:t.uq(),cq:t.fq()}}pq(t,s){xd.he(t),xd.he(s),this.#s.mq(t,s)}gq(){const t=this.#s;t.yq(),t.KU()}wq(t,s,i){xd.he(t),xd.he(s),xd.ye(i);const e=this.#s;e.Sq(t,s,i)&&e.KU()}bq(t,s){let i=NaN,e=NaN,n=NaN,r=NaN,h=NaN;const o=this.#s;if(o.vq()){const a=o.Mq().Nx(t,s);null!==a&&(i=a.HM(),e=a.JM(),n=a.XM(),r=a.KM(),h=a.tx())}return{x:i,y:e,gV:n,xq:r,Tq:h}}Gq(){const t=this.#s;if(!t.vq())return[0,0];const s=t.Mq();return[s._x(),s.Cx()]}}};MakeIWorldInstanceClass=vd;const Md=self._s,xd=self.Ns,Td=self.BV,Gd=self.xj,Id=Md.Hn(Md.Rect),_d=Md.Hn(Md.Cl),Cd=new WeakMap,Ed=Md.Cs(),Pd=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Ad=new Map([...Pd.entries()].map((t=>[t[1],t[0]]))),Rd=Md.Hn(Md.To);self.Iq=vd(self.BV),self._q=vd(self.mU)}{const Od=self._s,Fd=self.Ns;self.Cq=class extends self.Iq{#t;constructor(){super(),this.#t=self.BV.UV()}Eq(){return this.#t.Aq().Pq()}focus(){this.#t.Aq().Rq()}blur(){this.#t.Aq().Oq()}Fq(t,s){Fd.ue(t),this.#t.Aq().Dq(t,s)}}}{let Dd=function(t){let s=Nd.get(t);return s||(s=Ld.Hn(Ld.Event.wf),Nd.set(t,s),s)};GetDispatcher=Dd;const Ld=self._s,kd=self.Ns,Nd=new WeakMap,$d=Ld.Cs();self.Lq=class{#t;constructor(){const t=Ld.qB.HB($d);this.#t=t;const s={runtime:{value:t.$$().zB(),writable:!1},behavior:{value:t.Nq().kq(),writable:!1},$q:{value:t.Wq().Bq(),writable:!1}};Object.defineProperties(this,s),t.$$().cW(this,t)}static UV(){return Ld.qB.HV()}get jq(){return this.#t.Vq().o$()}qV(){const t=Nd.get(this);t&&(t.qn(),Nd.delete(this))}addEventListener(t,s,i){kd.ue(t),kd.Re(s),Dd(this).addEventListener(t,s,i)}removeEventListener(t,s,i){kd.ue(t),kd.Re(s),Dd(this).removeEventListener(t,s,i)}dispatchEvent(t){Dd(this).dispatchEvent(t)}}}{const Bd=self._s,Wd=self.Ns,jd=Bd.Cs();self.Uq=class{constructor(){const t=Bd.qB.HB(jd),s={runtime:{value:t.$$().zB(),writable:!1},behavior:{value:t.Nq().kq(),writable:!1},name:{value:t.Ec(),writable:!1}};Object.defineProperties(this,s)}}}{const Vd=self._s,Ud=self.Ns,Hd=Vd.Cs();self.Hq=class{#s;constructor(){const t=Vd.qB.HB(Hd);this.#s=t;const s={runtime:{value:t.$$().zB(),writable:!1},id:{value:t.JB(),writable:!1}};Object.defineProperties(this,s),t.$$().cW(this,t)}xW(){return this.#s.FW().map((t=>t.o$()))}static fW(t){if(!t)return null;const s=Vd.qB.qq(t);return s?s.kq():null}}}{const qd=self._s,zd=self.Ns,Jd=qd.Hn(qd.To);self.hj=class{#t;constructor(t,s){this.#t=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){return this.#t.rj()[this.index].Ec()}get isActive(){return this.#t.zq(this.index)}set isActive(t){t=!!t;const s=this.#t;s.zq(this.index)!==t&&(s.Jq(this.index,t),s.Yq(),s.$$().w$())}setParameter(t,s){zd.he(t),t=Math.floor(+t);const i=this.#t,e=i.Xq(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof qd.To){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");Jd.Po(s[0],s[1],s[2]),s=Jd}else if("number"!=typeof s)throw new TypeError("expected number");i.Zq(this.index,t,s)&&i.zq(this.index)&&i.$$().w$()}getParameter(t){zd.he(t),t=Math.floor(+t);const s=this.#t.Xq(this.index,t);if(null===s)throw new RangeError("invalid index");return s instanceof qd.To?[s.No(),s.$o(),s.Bo()]:s}}}{const Yd=self._s,Xd=self.Ns;self.Kq=class{#t;constructor(t){this.#t=t,Object.defineProperties(this,{name:{value:t.Ec(),writable:!1}})}get speed(){return this.#t.Qq()}get tz(){return this.#t.sz()}get iz(){return this.#t.ez()}get nz(){return this.#t.rz()}get hz(){return this.#t.oz()}get frameCount(){return this.#t.az()}lz(){return this.#t.uz().map((t=>t.cz()))}*frames(){for(const t of this.#t.uz())yield t.cz()}}}{const Zd=self._s,Kd=self.Ns;self.k$=class{#s;constructor(t){this.#s=t}static L$(t){return t.#s}get width(){return this.#s.jg()}get height(){return this.#s.Kg()}getSize(){const t=this.#s;return[t.jg(),t.Kg()]}fz(t){return t.dz(this)}pz(){return this.#s.sA().il()}}}{const Qd=self._s,tp=self.Ns;self.mz=class extends self.k${#s;constructor(t){super(t.gz()),this.#s=t,Object.defineProperties(this,{duration:{value:t.yz(),writable:!1},iH:{value:t.eH(),writable:!1},rH:{value:t.hH(),writable:!1}})}lH(){const t=this.#s;return[t.eH(),t.hH()]}wz(){return this.#s.Sz()}bz(t){return this.vz(t)[0]}Mz(t){return this.vz(t)[1]}vz(t){const s=this.#s;let i=null;if("number"==typeof t)i=s.xz(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.Tz(t)}return i?[i.HM(),i.JM()]:this.lH()}Gz(){const t=this.#s.Iz();return t?t.pu():0}_z(t){return this.Cz(t)[0]}Ez(t){return this.Cz(t)[1]}Cz(t){tp.he(t),t=Math.floor(t);const s=this.#s.Iz();if(!s||t<0||t>=s.pu())return[0,0];const i=s.du();return[i[2*t],i[2*t+1]]}get tag(){return this.#s.Pz()}}}{let sp=function(t){const s=np.get(t);if(s.Az())throw new Error("timeline/tween was released and is no longer valid");return s};GetTimelineState=sp;const ip=self._s,ep=self.Ns,np=new WeakMap;self.Rz=class{constructor(t){np.set(this,t),t.$$().cW(this,t)}pause(){sp(this).Oz()}resume(){sp(this).Fz()}stop(){sp(this).$f()}aU(t){return sp(this).Dz(t)}set time(t){ep.he(t),sp(this).Lz(t)}get time(){return sp(this)._F()}set totalTime(t){ep.he(t),sp(this).kz(t)}get totalTime(){return sp(this).Nz()}set tz(t){sp(this).$z(!!t)}get tz(){return sp(this).Bz()}set hz(t){sp(this).Wz(!!t)}get hz(){return sp(this).jz()}set playbackRate(t){ep.he(t),sp(this).Vz(t)}get playbackRate(){return sp(this).Uz()}get progress(){const t=sp(this);return t._F()/t.Nz()}get tags(){return sp(this).qz()}get finished(){return sp(this).zz()}get Jz(){return sp(this).IsPlaying()}get Yz(){return sp(this).Xz()}get Zz(){return np.get(this).Az()}}}{let rp=function(t){const s=ap.get(t);if(s.Az())throw new Error("timeline was released and is no longer valid");return s};GetTimelineState=rp;const hp=self._s,op=self.Ns,ap=new WeakMap;let lp=null;self.Kz=class extends self.Rz{constructor(t){super(t),ap.set(this,t);const s={name:{value:t.Ec(),writable:!1}};Object.defineProperties(this,s)}}}{let up=function(t){const s=dp.get(t);if(s.Az())throw new Error("tween was released and is no longer valid");return s};GetTweenState=up;const cp=self._s,fp=self.Ns,dp=new WeakMap,pp=new WeakMap;let mp=null;self.Qz=class extends self.Rz{constructor(t,s,i){super(t),mp||(mp=i.tJ),dp.set(this,t),s&&pp.set(this,s)}stop(){const t=up(this);pp.get(this).sJ(t)}iJ(t){fp.ue(t);const s=self.ju.oc(mp(t));up(this).eJ(s)}get jq(){const t=up(this).nJ();return t?t.o$():null}get rJ(){return up(this).hJ()}set rJ(t){up(this).oJ(!!t)}get value(){const t=up(this);if("value"!==t.aJ())throw new Error("not a value tween");return t.uJ("value").lJ()}}}{const gp=self._s,yp=self.Ns;self.cJ=class extends self.UB{constructor(){super()}}}{const wp=self._s,Sp=self.Ns,bp=wp.Cs();self.fJ=class extends self.cJ{#t;#i;#s=0;#r=new Map;constructor(t){if(super(),this.#t=wp.qB.HB(bp),!t?.gU)throw new Error("no DOM component ID specified");this.#i=t.gU,this.dJ("elem-focused",(t=>t.pJ())),this.dJ("elem-blurred",(t=>{t&&t.mJ()}))}gJ(t){const s=this.#s++;return this.#r.set(s,t),s}yJ(t){this.#r.delete(t)}dJ(t,s){this.#t.$$().IU(this.#i,t,(t=>{const i=this.#r.get(t.elementId);s(i,t)}))}wJ(t){Sp.Ge(t);for(const[s,i]of t)this.wJ(s,i)}}}{const vp=self._s,Mp=self.Ns,xp=new WeakMap,Tp=vp.Cs();self.SJ=class extends self.LW{#t;constructor(){super(),this.#t=vp.qB.HB(Tp)}bJ(){}vJ(){return this.#t.gz().MJ()}xJ(t){}TJ(t){}GJ(){}IJ(t){}}}{const Gp=self._s,Ip=self.Ns,_p=new WeakMap,Cp=Gp.Cs();self._J=class extends self._q{#t;#n=null;#s=null;constructor(t){super(t),this.#t=Gp.qB.HB(Cp)}qV(){if(super.qV(),this.#n){const t=this.#t.$$().wf();t.removeEventListener("renderercontextlost",this.#n),t.removeEventListener("renderercontextrestored",this.#s),this.#n=null,this.#s=null}}CJ(){if(this.#n)return;this.#n=()=>this.EJ(),this.#s=()=>this.PJ();const t=this.#t.$$().wf();t.addEventListener("renderercontextlost",this.#n),t.addEventListener("renderercontextrestored",this.#s)}EJ(){}PJ(){}AJ(t){}}}{const Ep=self._s,Pp=self.Ns,Ap=Ep.Hn(Ep.Rect),Rp=new WeakMap,Op=Ep.Cs();self.RJ=class extends self._J{#t=-1;#s=!0;#r=!1;#e=!1;#i=-.2;#h=Ep.Hn(Ep.Rect,0,0,-1,-1);#o=0;#a=0;#l=-1;#u=-1;#c=!1;constructor(t){if(!t?.gU)throw new Error("no DOM component ID specified");super(t);const s=Ep.qB.HB(Op);Rp.set(this,s),this.#t=this.vW.gJ(this);const i=s.$$().I$();this.#o=i.OJ(),this.#a=i.FJ(),this.wU(!0)}qV(){super.qV(),this.vW.yJ(this.#t),this.DJ("destroy"),this.#t=-1,Rp.delete(this)}LJ(){if(Rp.get(this).$$().Tk())throw new Error("not valid in worker mode");return this.kJ("get-element")}DJ(t,s){s||(s={}),s.elementId=this.#t,this.CU(t,s)}kJ(t,s){return s||(s={}),s.elementId=this.#t,this.PU(t,s)}NJ(t,s){return s||(s={}),s.elementId=this.#t,this.EU(t,s)}$J(t){t||(t={});const s=Rp.get(this).c$();t.elementId=this.#t,t.isVisible=s.Yj(),t.htmlIndex=s.f$().BJ(),t.htmlZIndex=s.WJ(),Object.assign(t,this.jJ()),this.#s=!!t.isVisible,this.PU("create",t),this.VJ(!0)}UJ(t){t=!!t,this.#s!==t&&(this.#s=t,this.DJ("set-visible",{isVisible:t}))}OU(){this.VJ(!1)}HJ(){const t=Rp.get(this).$$().I$().qJ();return"Android"===Ep.Ks.Qs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}VJ(t){const s=Rp.get(this);if(s.zJ())return;const i=s.c$(),e=i.f$(),n=i.pH();let[r,h]=e.OV(n.Ka(),n.Qa()),[o,a]=e.OV(n.tl(),n.sl());const l=s.$$().I$(),u=l.OB(),c=l.LB();if(!i.Yj()||!e.Yj())return void this.UJ(!1);if(!this.HJ()&&(o<=0||a<=0||r>=u||h>=c))return void this.UJ(!1);Ap.set(r,h,o,a);const f=l.OJ(),d=l.FJ(),p=e.BJ(),m=i.WJ();if(!t&&Ap.equals(this.#h)&&this.#o===f&&this.#a===d&&this.#l===p&&this.#u===m)return void this.UJ(!0);this.#h.S(Ap),this.#o=f,this.#a=d,this.#l=p,this.#u=m,this.UJ(!0);let g=null;this.#e&&(g=e.JJ()+this.#i),this.DJ("update-position",{left:Math.round(this.#h.Ka()),top:Math.round(this.#h.Qa()),width:Math.round(this.#h.width()),height:Math.round(this.#h.height()),htmlIndex:p,htmlZIndex:m,fontSize:g})}YJ(){this.kJ("focus",{focus:!0})}XJ(){this.kJ("focus",{focus:!1})}pJ(){this.#r=!0}mJ(){this.#r=!1}ZJ(){return this.#r}KJ(t,s){this.QJ("set-css-style",{prop:Ep.vo(t),val:s})}tY(t,s){this.QJ("set-attribute",{name:t,val:s})}sY(t){this.QJ("remove-attribute",{name:t})}iY(){this.#c||(this.#c=!0,Promise.resolve().then((()=>{this.#c=!1,this.DJ("update-state",this.jJ())})))}jJ(){}eY(){return this.#t}}}{const Fp=self._s,Dp=self.Ns;self.nY=class extends self.Hq{constructor(){super()}}}{const Lp=self._s,kp=self.Ns;self.rY=class extends globalThis.Uq{constructor(){super()}bJ(){}}}{const Np=self._s,$p=self.Ns,Bp=new WeakMap,Wp=Np.Cs();self.hY=class extends self.Lq{#e=!1;#s=!1;#t=!1;constructor(){super(),Bp.set(this,Np.qB.HB(Wp))}qV(){super.qV(),this.wU(!1),this.SU(!1),this.oY(!1),Bp.delete(this)}bU(){return Np.qB.vU()}aY(){}MU(t){const s=Bp.get(this);s.$$().xU(t,s.Vq(),s.Wq())}TU(t){const s=Bp.get(this);return s.$$().C$(t,s.Vq(),s.Wq())}wU(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=Bp.get(this).$$();t?s.lY(this):s.uY(this)}DU(){return this.#e}OU(){}SU(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=Bp.get(this).$$();t?s.cY(this):s.fY(this)}kU(){return this.#s}LU(){}oY(t){if(t=!!t,this.#t===t)return;this.#t=t;const s=Bp.get(this).$$();t?s.dY(this):s.pY(this)}mY(){return this.#t}gY(){}NU(){return[]}$U(){return null}BU(t){}}}{const jp=self._s,Vp=self.Ns;let Up=null;self.Dk=class{constructor(t){Up=t}x$(t){Up.T$(t)}zU(t,s,i){Vp.ue(t),Vp.ue(s),Vp.Ie(i),Up.yY(t,s,i)}YU(t,s,i){return Vp.ue(t),Vp.ue(s),Vp.Ie(i),Up.wY(t,s,i)}SY(t){return Vp.ce(t),new self.bY(Up,t)}set vY(t){Up.MY(!!t)}get vY(){return Up.xY()}TY(t){Up.GY(!!t)}IY(t){Vp.se(t);const s=Up._Y(t);return s?s.gW():null}}}{const Hp=self._s,qp=self.Ns;self.bY=class{#t;#s;#h;#i;#r;#n;constructor(t,s){this.#t=t;const i=t.Bk(),e=t.qk();this.#s=e,this.#h=e.CY();const n=t.Qk();this.#i=n.EY(),this.#r=n.PY(e);const r=i.AY().PY();this.#n=r,s&&r.RY(s),t.OY(!1)}FY(){const t=this.#t.Bk(),s=this.#h,i=this.#n;t.DY(s),this.#s.LY(this.#i,this.#r),t.kY(s),i.NY(i.tk()+1)}get $Y(){return this.#n.BY()}release(){const t=this.#t,s=t.Qk(),i=t.Bk().AY();t.OY(!0),i.WY(),s.WY()}}}{const zp=self._s,Jp=self.Ns;let Yp=null,Xp=null;self.jY=class{constructor(t,s){Xp=t,Yp=s}VY(){Yp.lO()}UY(t){Yp.oO(t)}HY(){Yp.gb()}qY(){Yp.lb()}zY(){Yp.Tb()}setColor(t){Yp.sO(t[0],t[1],t[2],t[3])}JY(t,s,i,e){Yp.sO(t,s,i,e)}YY(){Yp.eO()}XY(t){Yp.iO(t)}ZY(t){Yp.Hb(t)}KY(){Yp.qb()}rect(t){Yp.fO(t.left,t.top,t.right,t.bottom)}QY(t,s,i,e){Yp.fO(t,s,i,e)}tX(t){Yp.Cl(zp.Cl.zl(t))}sX(t,s,i,e,n,r,h,o){Yp.Pv(t,s,i,e,n,r,h,o)}iX(t,s){Yp.ev(zp.Cl.zl(t),zp.Rect.el(s))}eX(t,s){Yp.mO(zp.Cl.zl(t),zp.Cl.zl(s))}nX(t,s,i,e,n,r,h,o,a,l,u,c,f){Yp.gO(t,s,i,e,n,r,h,o,a,l,u,c,zp.Rect.el(f))}rX(t,s,i,e,n,r,h,o,a,l,u,c,f){Yp.Zb(t,s,i,e,n,r,h,o,a,l,u,c,zp.Cl.zl(f))}hX(t,s,i){Yp.yO(t,s,i)}oX(t){Yp.Ev(t)}line(t,s,i,e){Yp.ey(t,s,i,e)}aX(t,s,i,e,n,r){Yp.Kb(t,s,i,e,n,r)}lX(t,s,i,e){Yp.nv(t,s,i,e)}uX(t){Yp.av(zp.Rect.el(t))}cX(t){Yp.lv(zp.Cl.zl(t))}fX(t){Yp.mv(t)}dX(){Yp.gv()}pX(t){Yp.bv(t)}mX(){Yp.Tv()}gX(t){Jp.Be(t,self.yX);const s=t?Xp.Tj(t):null;Yp.rO(s)}wX(t,s){const i=self.k$.L$(t);if(!i)throw new Error("invalid IImageInfo");return i.SX(Yp,{Yx:s?.Yx??"clamp-to-edge",Xx:s?.Xx??"clamp-to-edge",Zx:s?.Zx??"trilinear",tT:s?.tT??!0})}bX(t){const s=self.k$.L$(t);if(!s)throw new Error("invalid IImageInfo");s.qE()}dz(t){const s=self.k$.L$(t);if(!s)throw new Error("invalid IImageInfo");const i=s.cG();return self.yX.vX(Xp,i)}MX(t,s,i){Jp.he(t),Jp.he(s);const e=Yp.sG(t,s,{Yx:i?.Yx??"clamp-to-edge",Xx:i?.Xx??"clamp-to-edge",Zx:i?.Zx??"trilinear",tT:i?.tT??!0});return self.yX.vX(Xp,e)}xX(t,s,i){Jp.$e(s,self.yX);const e=Xp.Tj(s);Yp.tA(t,e,{iT:i?.iT??!0})}deleteTexture(t){Jp.$e(t,self.yX);const s=Xp.Tj(t);Yp.rG(s)}TX(){const t=Yp.Hv();return new self.GX(Xp,t)}IX(){Xp.I$()._X(Yp)}CX(t){Jp.$e(t,globalThis.xj),Xp.Tj(t).EX(Yp)}}}{const Zp=self._s,Kp=self.Ns,Qp=new WeakMap,tm=new WeakMap;self.yX=class{constructor(t,s){Qp.set(this,{runtime:t,texture:s}),tm.set(s,this),t.cW(this,s),Object.defineProperties(this,{width:{value:s.jg(),writable:!1},height:{value:s.Kg(),writable:!1}})}static vX(t,s){if(!s)return null;return tm.get(s)||new self.yX(t,s)}}}{let sm=function(t){return nm.get(t).PX};getActual=sm;const im=self._s,em=self.Ns,nm=new WeakMap;self.GX=class{constructor(t,s){nm.set(this,{runtime:t,PX:s}),t.cW(this,s)}release(){sm(this).qn()}set AX(t){em.ue(t),sm(this).tP(t)}get AX(){return sm(this).eE()}set RX(t){em.he(t),sm(this).sP(t)}get RX(){return sm(this).iP()}set lineHeight(t){em.he(t),sm(this).nP(t)}get lineHeight(){return sm(this).rP()}set OX(t){sm(this).hP(t)}get OX(){return sm(this).oP()}set FX(t){sm(this).aP(t)}get FX(){return sm(this).lP()}setColor(t){em.Ge(t),this.DX(t[0],t[1],t[2])}DX(t,s,i){sm(this).pP(t,s,i)}LX(t){em.ue(t),sm(this).DM(t)}set kX(t){sm(this).mP(t)}get kX(){return sm(this).gP()}set verticalAlign(t){sm(this).yP(t)}get verticalAlign(){return sm(this).wP()}set NX(t){sm(this).SP(t)}get NX(){return sm(this).bP()}set $X(t){sm(this).vP(t)}get $X(){return sm(this).MP()}set text(t){em.ue(t),sm(this).jc(t)}get text(){return sm(this).xP()}oj(t,s,i){em.he(t),em.he(s),em.he(i),sm(this).TP(t,s,i)}fz(){const{runtime:t,PX:s}=nm.get(this),i=s.cG();return self.yX.vX(t,i)}pz(){return sm(this).sA().il()}BX(t){em.Re(t),sm(this).JE=t}WX(){sm(this).qE()}get jX(){return sm(this).IP()}get VX(){return sm(this).CP()}}}{let rm=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return lm.get(i)||""},hm=function(t){return new Promise(((s,i)=>{const e=document.createElement("script");e.onload=s,e.onerror=i,e.async=!1,e.type="module",e.src=t,document.head.appendChild(e)}))};GetTypeFromFileExtension=rm,AddScript=hm;const om=self._s,am=new Set(["local","remote"]),lm=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);om.UX=class extends om.Vn{constructor(t,s){super();const i=s.exportType;this.Nc=t,this.HX="folders",this.qX=new Map,this.zX="cordova"===i,this.JX=!!s.isiOSCordova,this.YX=!!s.isFileProtocol,this.XX=s.swClientId,this.ZX=s.supportedAudioFormats||{},this.KX=new Map,this.QX=!1,this.tZ=s.scriptFolder,this.sZ="",this.iZ="",this.eZ="",this.nZ=s.fileMap||new Map,this.rZ=new Map;const e="html5"===i||"scirra-arcade"===i||"instant-games"===i;this.hZ=e?"remote":"local",this.oZ=new Map,this.aZ=[],this.lZ=[],this.uZ=!1,this.cZ=0,this.fZ=0,this.dZ=0,this.pZ=!1,this.mZ=om.Hn(om.Qd,(()=>this.gZ()),50),this.yZ=om.Hn(om.Ud,Math.max(om.hardwareConcurrency,8)),this.wZ=om.Hn(om.Ud,20),this.SZ=new self.O$(this)}qn(){for(const t of this.oZ.values())t.qn();this.oZ.clear(),om.bh(this.lZ),this.Nc=null}$$(){return this.Nc}bZ(t){this.HX=t}z$(){return this.HX}vZ(){return this.tZ}MZ(t){this.sZ=t}X$(){return this.sZ}xZ(t){this.iZ=t}TZ(){return this.iZ}GZ(t){this.eZ=t}IZ(){return this.eZ}_Z(){return this.YX}no(t,s){return s=s||this.hZ,om.Kh(t)?("flat"===this.HX&&(t=t.toLowerCase()),this.zX&&this.YX?this.CZ(t):"playable-ad-single-file"===this.Nc.MB()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):"local"===s?this.yZ.$u((()=>om.no(t))):this.wZ.$u((()=>om.no(t)))):om.no(t)}ro(t){return om.Kh(t)?("flat"===this.HX&&(t=t.toLowerCase()),this.zX&&this.YX?this.EZ(t):"playable-ad-single-file"===this.Nc.MB()?om.oo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.hZ?this.yZ.$u((()=>om.ro(t))):this.wZ.$u((()=>om.ro(t)))):om.ro(t)}io(t){return om.Kh(t)?("flat"===this.HX&&(t=t.toLowerCase()),this.zX&&this.YX?this.PZ(t):"playable-ad-single-file"===this.Nc.MB()?om.ao(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.hZ?this.yZ.$u((()=>om.io(t))):this.wZ.$u((()=>om.io(t)))):om.io(t)}async eo(t){const s=await this.io(t);return JSON.parse(s)}AZ(t,s){return"flat"===this.HX&&(t=t.toLowerCase()),this.Nc.b$("runtime","cordova-fetch-local-file",{filename:t,as:s})}PZ(t){return this.AZ(t,"text")}async CZ(t){const s=await this.AZ(t,"buffer"),i=rm(t);return new Blob([s],{type:i})}async RZ(t){"flat"===this.HX&&(t=t.toLowerCase());let s=this.qX.get(t);if(s)return s;const i=await this.CZ(t);return s=URL.createObjectURL(i),this.qX.set(t,s),s}EZ(t){return this.AZ(t,"buffer")}J$(t){"flat"===this.HX&&(t=t.toLowerCase());let s=this.sZ+t;return"Gecko"===om.Ks.ni&&"preview"===this.Nc.MB()&&(s=this.OZ(s)),s}H$(t){return om.Zh(t)?Promise.resolve(t):this.zX&&this.YX?this.RZ(t):"playable-ad-single-file"===this.Nc.MB()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.HX&&(t=t.toLowerCase()),Promise.resolve(t))}FZ(t){if(om.Zh(t)||"preview"!==this.Nc.MB()||!this.XX||!t)return t;try{const s=new URL(t,location.href);return s.searchParams.set("__c3_client_id",this.XX),s.toString()}catch(s){return console.warn("Invalid iframe URL: "+t),t}}DZ(t){return this.H$(t)}LZ(t,s){return(s?"true":"false")+"|"+t}kZ(t){const s=!!t.NZ;if(t.$Z&&!am.has(t.$Z))throw new Error("invalid load policy");const i=this.LZ(t.url,s);let e=this.oZ.get(i);return e||(e=om.Hn(om.BZ,this,{url:t.url,size:t.size||0,$Z:t.$Z||this.hZ,NZ:s}),this.oZ.set(i,e),this.uZ||(this.cZ+=e.Ou(),this.lZ.push(e.WZ().then((()=>this.jZ(e.Ou()))))),e)}VZ(t){const s=this.LZ(t.UZ(),t.HZ());this.oZ.delete(s)}async qZ(){try{await Promise.all(this.lZ),this.dZ=1}catch(t){console.error("Error loading: ",t),this.pZ=!0,this.gZ()}}zZ(){this.uZ=!0}JZ(){return this.pZ}jZ(t){this.fZ+=t,this.mZ.pp()}gZ(){const t=om.Hn(om.Event,"loadingprogress");this.dZ=om.Zn(this.fZ/this.cZ,0,1),t.progress=this.dZ,this.Nc.wf().dispatchEvent(t),this.Nc.YZ(om.Hn(om.Event,"loadingprogress"))}$N(){return this.dZ}WN(){return this.Nc.ZZ().XZ()}KZ(t){om.Gh(this.aZ,t),this.aZ.length&&this.lZ.push(this.QZ())}async QZ(){const t=[],s=[];for(const[i,e,n]of this.aZ)this.cZ+=n,t.push(this.tK(i,e,s).then((()=>this.jZ(n))));await Promise.all(t),this.Nc.Tk()&&s.length>0&&await this.Nc.b$("runtime","load-webfonts",{webfonts:s})}async tK(t,s,i){try{let e=await this.H$(s);"Gecko"===om.Ks.ni&&(t=`'${t}'`),("Gecko"===om.Ks.ni&&"preview"===this.Nc.MB()||"playable-ad-single-file"===this.Nc.MB())&&(e=this.OZ(e));const n=new FontFace(t,`url('${e}')`);this.Nc.Tk()?self.fonts.add(n):document.fonts.add(n),await n.load(),this.Nc.Tk()&&i.push({name:t,url:e})}catch(s){console.warn(`[C3 runtime] Failed to load web font '${t}': `,s)}}sK(t){return!!this.ZX[t]}iK(t,s){this.QX=!!s;for(const[s,i,e]of t)this.KX.set(s,{fileName:s,eK:i.map((t=>({type:t[0],nK:t[1],fullName:s+t[1],fileSize:t[2]}))),rK:e})}hK(t){"flat"===this.HX&&(t=t.toLowerCase());const s=this.KX.get(t);if(!s)return null;let i=null;for(const t of s.eK)if(i||"audio/webm; codecs=opus"!==t.type||(i=t),this.sK(t.type))return t;return i}oK(t){const s=this.hK(t);return s?{url:this.J$(s.fullName),type:s.type}:null}aK(){if(this.QX){const t=[];for(const s of this.KX.values()){if(s.rK)continue;const i=this.hK(s.fileName);i&&t.push({lK:s.fileName,url:this.J$(i.fullName),type:i.type,fileSize:i.fileSize})}return t}return[]}uK(t){return"preview"===this.Nc.MB()&&(t=new URL(t,location.href).toString()),this.nZ.get(t)||null}OZ(t){let s=this.rZ.get(t);if(s)return s;const i=this.uK(t);return i?(s=URL.createObjectURL(i),this.rZ.set(t,s),s):t}nk(){return this.SZ}async Q$(...t){const s=await Promise.all(t.map((t=>this.H$(t))));if(this.Nc.Tk())if(1===t.length){const s=t[0];await import((om.Kh(s)?"./":"")+s)}else{const s=t.map((t=>`import "${om.Kh(t)?"./":""}${t}";`)).join("\n"),i=URL.createObjectURL(new Blob([s],{type:"application/javascript"}));await import(i)}else await Promise.all(s.map((t=>hm(t))))}async sB(t){if(WebAssembly.compileStreaming){const s=await this.H$(t);return await WebAssembly.compileStreaming(fetch(s))}{const s=await om.ro(t);return await WebAssembly.compile(s)}}async eB(t){const s=await this.H$(t);return await this.Nc.b$("runtime","add-stylesheet",{url:s})}}}{const um=self._s;um.cK=class extends um.Vn{constructor(t,s){super(),this.fK=t,this.Nc=t.$$(),this.dK=s.url||"",this.pK=s.size,this.mK=s.$Z,this.gK=s.blob||null,this.yK=!!this.gK,this.Sw=null}qn(){this.Sw=null,this.fK=null,this.Nc=null,this.gK=null}UZ(){return this.dK}Ou(){return this.pK}WZ(){return"local"===this.mK||this.gK?(this.yK=!0,Promise.resolve()):(this.Sw||(this.Sw=this.fK.no(this.dK,this.mK).then((t=>(this.yK=!0,this.Sw=null,this.gK=t,t))).catch((t=>{console.error("Error loading resource: ",t),this.Sw=null}))),this.Sw)}wK(){return this.yK}SK(){return this.gK?Promise.resolve(this.gK):this.Sw?this.Sw:this.fK.no(this.dK,this.mK)}}}{const cm=self._s,fm=new cm.Ud,dm=new Set;cm.BZ=class extends cm.cK{constructor(t,s){super(t,s),this.bK=null,this.vK=null,this.Up=0,this.MK=-1,this.xK=-1,this.TK=!!s.NZ,dm.add(this)}qn(){if(0!==this.Up)throw new Error("released image asset which still has texture references");this.fK.VZ(this),this.bK=null,dm.delete(this),super.qn()}static GK(){for(const t of dm)t.bK=null,t.vK=null,t.Up=0}SX(t,s){return s=s||{},this.Up++,this.vK?Promise.resolve(this.vK):(this.bK||(s.Kx=this.Nc.I$().IK(),this.bK=this._K(t,s)),this.bK)}async _K(t,s){try{const i=await this.SK();return 0===this.Up?(this.bK=null,null):await fm.$u((async()=>{const e=await t.jO(i,s);return this.bK=null,0===this.Up?(t.rG(e),null):(this.vK=e,this.MK=e.jg(),this.xK=e.Kg(),this.vK)}))}catch(t){throw console.error("Failed to load texture: ",t),t}}qE(){if(this.Up<=0)throw new Error("texture released too many times");this.Up--,0===this.Up&&this.vK&&(this.vK.pM().rG(this.vK),this.vK=null)}CK(){return this.Up}cG(){return this.vK}jg(){return this.MK}Kg(){return this.xK}HZ(){return this.TK}async EK(){const t=await this.SK();return cm.Ai.ImageBitmap?await createImageBitmap(t):await cm.uo(t)}}}{let pm=function(t,s){return t.c$().PK()-s.c$().PK()};SortByInstLastCachedZIndex=pm;const mm=self._s,gm=self.assert;mm.AK=class extends mm.Vn{constructor(t,s,i){super(),this.RK=t,this.Ea=s,this.Pa=i,this.FK=[],this.DK=!0,this.LK=new Set,this.kK=!1}qn(){mm.bh(this.FK),this.LK.clear(),this.RK=null}$f(){mm.bh(this.FK),this.DK=!0,this.LK.clear(),this.kK=!1}NK(){this.DK=!1}Pu(){return!this.FK.length||!(this.FK.length>this.LK.size)&&(this.$K(),!0)}BK(t){if(this.LK.has(t))return this.LK.delete(t),void(0===this.LK.size&&(this.kK=!1));this.FK.push(t),this.DK=1===this.FK.length}Zf(t){this.LK.add(t),this.kK=!0,this.LK.size>=50&&this.$K()}$K(){this.kK&&(this.FK.length!==this.LK.size?(mm.Ph(this.FK,this.LK),this.LK.clear(),this.kK=!1):this.$f())}WK(){this.DK||(this.FK.sort(pm),this.DK=!0)}jK(t){this.$K(),this.WK(),this.FK.length&&t.push(this.FK)}}}{const ym=self._s;ym.VK=class extends ym.Vn{constructor(t,s){super(),this.UK=t,this.HK=s,this.qK=ym.Hn(ym._u)}qn(){this.qK.qn(),this.qK=null}zK(t,s,i){let e=this.qK.qs(t,s);return e||(i?(e=ym.Hn(ym.AK,this,t,s),this.qK.Set(t,s,e),e):null)}JK(t){return Math.floor(t/this.UK)}YK(t){return Math.floor(t/this.HK)}XK(t,s,i){if(s)for(let e=s.Ka(),n=s.tl();e<=n;++e)for(let n=s.Qa(),r=s.sl();n<=r;++n){if(i&&i.Tl(e,n))continue;const s=this.zK(e,n,!1);s&&(s.Zf(t),s.Pu()&&this.qK.Au(e,n))}if(i)for(let e=i.Ka(),n=i.tl();e<=n;++e)for(let n=i.Qa(),r=i.sl();n<=r;++n)s&&s.Tl(e,n)||this.zK(e,n,!0).BK(t)}ZK(t,s){let i=this.JK(t.Ka());const e=this.YK(t.Qa()),n=this.JK(t.tl()),r=this.YK(t.sl());for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this.zK(i,t,!1);e&&e.jK(s)}}KK(t){let s=t.Ka();const i=t.Qa(),e=t.tl(),n=t.sl();for(;s<=e;++s)for(let t=i;t<=n;++t){const i=this.zK(s,t,!1);i&&i.NK()}}}}{let wm=function(t,s){return t.c$().PK()-s.c$().PK()},Sm=function(t,s){return t.c$().XM()-s.c$().XM()};SortByInstLastCachedZIndex=wm,SortByInstZElevation=Sm;const bm=self._s,vm=self.assert,Mm=new bm.Rect,xm=new bm.Cl,Tm=[],Gm=new bm.Rect,Im=new bm.Rect,_m=self.ls,Cm=_m.ws,Em=_m.Ss,Pm=_m.ds,Am=Pm.create(),Rm=Cm.create(),Om=Em.create(),Fm=Cm.create(),Dm=Cm.create(),Lm=Cm.create(),km=bm.Hn(bm.Ca),Nm=bm.Hn(bm.Rect),$m=[],Bm=[],Wm=[],jm={name:"",QK:-1,tQ:!1,isVisible:!0,Xj:!0,Qj:!1,backgroundColor:[1,1,1,1],SV:!0,sQ:[1,1],opacity:1,MV:!1,iQ:!1,eQ:!1,nQ:!1,hV:1,zD:0,gV:0,rQ:[],hQ:[],oQ:[]};bm.aQ=class extends bm.Vn{constructor(t,s,i){super(),i=Object.assign({},jm,i),this.lQ=t,this.Nc=t.$$(),this.uQ=s,this.Yn=i.name,this.Pw=-1,this.cQ=!!i.Qj,this.fQ=-1,this.dQ=i.QK,this.pQ=!!i.tQ,this.mQ=!!i.isVisible,this.gQ=!!i.Xj,this.yQ=bm.Hn(bm.To),this.yQ.wa(i.backgroundColor),this.wQ=!!i.SV,this.SQ=i.sQ[0],this.bQ=i.sQ[1],this.AM=bm.Hn(bm.To,1,1,1,i.opacity),this.vQ=bm.Hn(bm.To),this.MQ=!!i.MV,this.xQ=!!i.iQ,this.TQ=!!i.eQ,this.GQ=!!i.nQ,this.IQ=i.hV,this.PM=i.zD,this._Q=null,this.CQ=1,this.RM=i.gV,this.EQ=0,this.PQ=0,this.AQ=0,this.RQ=!1,this.BA=bm.Hn(bm.Rect),this.OQ=bm.Hn(bm.Rect),this.FQ=bm.Hn(bm.Rect),this.DQ=!0,this.YT=Pm.create(),this.LQ=!0,this.AD=Pm.create(),this.kQ=!0,this.NQ=bm.Hn(bm.kw.Ww),this.$Q=!0,this.BQ=[],this.WQ=i.rQ,this.jQ=[],this.VQ=[],this.UQ=new Map,this.FK=[],this.HQ=!1,this.qQ=!1,this.zQ=!1;const e=this.Nc.I$();this.JQ=bm.Hn(bm.YQ,this,i.hQ),this.XL=bm.Hn(bm.kw.BF,e.XQ(),{EF:(t,s)=>{const i=s.jL(),n=i.NO();t.DM(i.ZQ()),t.qO(n),t.zO(n),e.KQ(n)},AF:t=>this.nj().QQ(t)}),this.t0=!0,this.s0=!0,this.i0=null,this.e0=[],this.n0=!1,this.r0=bm.Hn(bm.Rect,0,0,-1,-1),this.h0=bm.Hn(bm.Rect,0,0,-1,-1),this.o0=new self.xj(this),this.a0(),this.l0()&&(this.i0=bm.Hn(bm.VK,this.Nc.Ik(),this.Nc.Ck())),this.u0=i.oQ.map((t=>bm.aQ.c0(this.lQ,this,t)))}f0(){for(const t of this.WQ){const s=this.Nc.d0(t[1]);this.lQ.p0(s),s.m0()||(s.g0(t),s.y0(this.Pw)),this.jQ.push(t),this.UQ.set(t[2],t)}bm.Gh(this.BQ,this.jQ),this.WQ=null}static c0(t,s,i){return bm.Hn(bm.aQ,t,s,{name:i[0],QK:i[2],isVisible:i[3],Xj:i[13],Qj:i[19],backgroundColor:i[4].map((t=>t/255)),SV:i[5],sQ:[i[6],i[7]],opacity:i[8],MV:i[9],iQ:i[17],eQ:i[18],nQ:i[10],hV:i[11],zD:i[12],gV:i[16],rQ:i[14],hQ:i[15],oQ:i[20]})}qn(){for(const t of this.u0)t.qn();bm.bh(this.u0);for(const t of this.FK)this.Nc.zV(t);bm.bh(this.FK),this.JQ.qn(),this.JQ=null,this.XL.qn(),this.XL=null,this.o0=null,this.uQ=null,this.lQ=null,this.Nc=null}zn(){return!this.lQ}w0(t){return this.UQ.get(t)}S0(t){const s=this.lQ.b0(),i=this.jQ;let e=0;for(let n=0,r=i.length;n<r;++n){const r=i[n],h=this.Nc.d0(r[1]);let o=!0;if(!h.v0()||s){const s=this.Nc.M0(r,this,!0);t.push(s),h.x0()&&(o=!1,this.VQ.push(s.tU()))}o&&(i[e]=i[n],++e)}bm.Sh(i,e),this.Nc.qW(),this.y$()}T0(t,s){if(!t.MW().KB())throw new Error("instance is not of world type");const i=t.c$();if(i.f$()!==this)throw new Error("instance added to wrong layer");this.FK.push(t),0!==i.XM()&&(this.zQ=!0),s&&this.l0()&&t.c$().KU(),this.y$(t)}G0(t){this.FK.includes(t)||(this.FK.push(t),0!==t.c$().XM()&&(this.zQ=!0),this.y$(t))}I0(t,s){const i=t.c$();if(i.f$()!==this)throw new Error("instance added to wrong layer");this.FK.unshift(t),0!==i.XM()&&(this.zQ=!0),this.y$(t),s&&this.l0()&&t.c$().KU()}_0(t,s){const i=this.FK.indexOf(t);i<0||(s&&this.l0()&&t.c$().C0(),this.FK.splice(i,1),this.y$(t),this.E0())}P0(){this.zQ=!0}E0(){0===this.FK.length&&(this.zQ=!1)}A0(t){if(t){const t=new Set;for(const s of this.FK){const i=s.c$().PK();i>=0&&t.add(i)}let s=-1;for(const i of this.FK){const e=i.c$();if(!(e.PK()>=0)){for(++s;t.has(s);)++s;e.R0(s)}}}this.FK.sort(wm)}O0(){}F0(){for(const t of this.FK)t.WV().x0()||this.Nc.zV(t);this.Nc.qW(),bm.bh(this.FK),this.zQ=!1,this.y$()}D0(t,s,i,e,n,r){const h=this.Nc.Bk(),o=this.Nc.L0(),a=t.k0(),l=[];for(const u of this.jQ){const c=u[0],f=c[0],d=c[1];if(!s.Tl(f,d))continue;const p=o[u[1]];if(p!==t){if(!a)continue;if(!t.ij(p))continue}let m=n;if(!m){const t=this.Nc.l$();this.zN()===t?m=this:(m=t.N0(this.Ec()),m||(m=t.p$(this.tk())))}const g=this.Nc.M0(u,m,!1,void 0,void 0,!1,r);m.WW(g);const y=g.c$();y.sH(i,e),y.KU(),h.jW(!0),g.VW(),h.jW(!1),l.push(g)}return l}NW(){return this.FK.length}zN(){return this.lQ}Ec(){return this.Yn}$0(t){this.Pw=t}tk(){return this.Pw}B0(t){this.fQ=t}BJ(){return this.fQ}tV(){return this.cQ}sV(t){t=!!t,this.cQ!==t&&(this.cQ=t,this.lQ.W0(),this.Nc.w$())}j0(){let t=-1;const s=this.Bj();return t=s?s.Vj().indexOf(this):this.zN().V0().indexOf(this),t}U0(){return this.dQ}$$(){return this.Nc}H0(){return this.pQ}q0(){for(const t of this.Wj())if(t.H0())return!0;return!1}WB(){return this.Nc.WB()}nj(){return this.JQ}QL(){return this.z0(),this.XL}z0(){const t=this.J0();if(!this.t0&&t===this.s0&&!this.XL.RD())return;const s=this.nj().Y0();this.XL.OD(s.map((t=>t.RI())),{OF:s.map((t=>t.tk())),FF:!t,$F:!0}),this.t0=!1,this.s0=t}Yq(){this.nj().Yq(),this.t0=!0}l0(){return this.GQ&&!this.TQ}X0(){return this.i0}Z0(){this.n0=!1}Yj(){for(const t of this.K0())if(!t.qj())return!1;return!0}qj(){return this.mQ}zj(t){t=!!t,this.mQ!==t&&(this.mQ=t,this.Nc.w$())}Kj(t){this.gQ=!!t}Zj(){return this.gQ}eV(){for(const t of this.K0())if(!t.Zj())return!1;return!0}_V(t){if(t=!!t,this.RQ!==t){if(this.RQ=t,t){const t=this.zN();this.PQ=t.dj(),this.AQ=t.mj()}this.Q0(),this.Nc.w$()}}t1(){return this.RQ}fj(t){const s=this.zN(),i=s.s1(),e=s.i1();t>e&&(t=e),t<i&&(t=i),this.PQ!==t&&(this.PQ=t,this.t1()&&(this.Q0(),this.Nc.w$()))}pj(t){const s=this.zN(),i=s.e1(),e=s.n1();t>e&&(t=e),t<i&&(t=i),this.AQ!==t&&(this.AQ=t,this.t1()&&(this.Q0(),this.Nc.w$()))}dj(){return this.t1()?this.PQ:this.zN().dj()}mj(){return this.t1()?this.AQ:this.zN().mj()}EV(){return this.h1(),this.BA}o1(){return this.h1(),this.OQ}a1(){return this.h1(),this.FQ}Dj(){const t=this.zN();return[t.l1(),t.u1()]}WS(t){return this.Nc.WS(t)}c1(t,s){const i=this.o1();if(0===t)s.S(i);else{let e=i.hl(),n=i.ol();const r=this.f1(t),h=i.width()/r,o=i.height()/r,[a,l]=this.Dj();if(.5!==a||.5!==l){const s=this.d1(),i=this.Nc,r=this.WS()/s;let h=(a-.5)*i.m1()/r,o=(l-.5)*i.g1()/r;const u=this.cj();0!==u&&(km.set(h,o),km.rotate(u),h=km.Oa(),o=km.Da());const c=bm.mr(s,0,t);e+=bm._t(h,0,c),n+=bm._t(o,0,c)}s.set(e-h/2,n-o/2,e+h/2,n+o/2)}}tO(){return this.AM.Wo()}iO(t){t=bm.Zn(t,0,1),this.AM.Wo()!==t&&(this.AM.Lo(t),this.a0(),this.Nc.w$())}a0(){this.vQ.S(this.AM),this.vQ.Zo()}ZQ(){return this.vQ}J0(){return this.AM.zo(1,1,1,1)}aV(){return this.IQ}oV(t){this.IQ!==t&&(this.IQ=t,this.Q0(),this.Nc.w$())}fV(){return this.SQ}mV(){return this.bQ}w1(t,s){this.SQ===t&&this.bQ===s||(this.SQ=t,this.bQ=s,this.Q0(),this.Nc.w$())}cV(t){this.w1(t,this.mV())}pV(t){this.w1(this.fV(),t)}ZM(t){this.RM!==t&&(this.RM=t,this.Nc.w$())}XM(){return this.RM}uj(t){t=bm.Kn(t),this.EQ!==t&&(this.EQ=t,this.Q0(),this.Nc.w$())}cj(){return bm.Kn(this.lQ.cj()+this.EQ)}lV(){return this.EQ}S1(){return this.FK.length>0}m$(){return this.FK}b1(){return this.v1()&&this.TQ?(bm.Gh(Wm,this.m$()),Wm.sort(((t,s)=>this.M1(t,s))),Wm):this.m$()}T1(t){bm.On(t,this.b1());for(const s of this.u0)s.Yj()&&s.tO()>0&&s.T1(t)}M1(t,s){const i=this.zN().G1(),e=i[0],n=i[1],r=i[2],h=t.c$(),o=s.c$(),a=h.HM()-e,l=h.JM()-n,u=h.XM()-r,c=o.HM()-e,f=o.JM()-n,d=o.XM()-r;return c*c+f*f+d*d-(a*a+l*l+u*u)}IV(){return this.yQ}vV(){return this.wQ}bV(t){t=!!t,this.wQ!==t&&(this.wQ=t,this.Nc.w$())}TV(){return this.MQ}xV(t){t=!!t,this.MQ!==t&&(this.MQ=t,this.Nc.w$())}yV(t){t=!!t,this.xQ!==t&&(this.xQ=t,this.Q0(),this.Nc.w$())}wV(){return this.xQ}I1(){return!this.$$()._1()||!this.xQ}v1(){return!this.I1()}C1(){return this.v1()&&this.zN().E1()}P1(){if(!this.C1())return!1;for(const t of this.u0)if(!t.P1())return!1;return!0}FM(t){this.PM!==t&&(this.PM=t,this.Nc.w$())}GV(){return this.PM}A1(){return!this.uQ}Bj(){return this.uQ}R1(t){this.uQ=t}Vj(){return this.u0}O1(){return this.u0.length>0}F1(t,s=!0){s?this.u0.push(t):this.u0.unshift(t)}D1(t,s,i){let e=this.u0.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.u0.splice(e,0,t)}L1(t){const s=this.u0.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.u0.splice(s,1)}N1(){for(const t of this.u0)if(t.B1())return!0;return!1}*Hj(){for(const t of this.u0)yield*t.Hj();yield this}*Wj(){let t=this.Bj();for(;t;)yield t,t=t.Bj()}*K0(){yield this,yield*this.Wj()}W1(t){for(const s of this.Wj())if(s===t)return!0;return!1}j1(t){return this===t||this.SQ===t.SQ&&this.bQ===t.bQ&&this.CQ===t.CQ&&this.IQ===t.IQ&&this.EQ===t.EQ&&this.dj()===t.dj()&&this.mj()===t.mj()}V1(){return{parallaxX:this.fV(),parallaxY:this.mV(),scale:this.rV(),scaleRate:this.aV(),angle:this.lV(),hasOwnScroll:this.t1(),scrollX:this.dj(),scrollY:this.mj()}}U1(t){this.w1(t.parallaxX,t.parallaxY),this.nV(t.scale),this.oV(t.scaleRate),this.uj(t.angle),this._V(t.hasOwnScroll),this.fj(t.scrollX),this.pj(t.scrollY),this.h1()}H1(t){0!==t.size&&bm.Ph(this.FK,t)>0&&(this.E0(),this.y$())}y$(t){this.HQ=!1,this.n0=!1,t&&!t.WV().MW().tW()||(this.qQ=!1)}q1(){if(!this.HQ){if(this.FK.sort(Sm),this.l0())for(let t=0,s=this.FK.length;t<s;++t){const s=this.FK[t].c$();s.R0(t),this.i0.KK(s.z1())}else for(let t=0,s=this.FK.length;t<s;++t)this.FK[t].c$().R0(t);this.HQ=!0}}J1(){if(this.qQ)return;const t=this.lQ.Y1(this.BJ()).map((t=>[...t.Hj()])).flat();let s=0;for(const i of t){for(const t of i.m$())t.WV().MW().tW()&&t.c$().X1(s++);i.Z1()}}Z1(){this.qQ=!0}K1(){return{isVisible:this.Yj(),opacity:this.tO(),isInteractive:this.Zj()}}Q1(t,s,i){const e=t.c$(),n=s.c$();if(e.f$()!==this||n.f$()!==this)throw new Error("can't arrange Z order unless both objects on this layer");const r=e.d$();let h=n.d$();return r!==h+(i?1:-1)&&(bm.Ih(this.FK,r),r<h&&h--,i&&h++,h===this.FK.length?this.FK.push(t):this.FK.splice(h,0,t),this.y$(t),!0)}t2(t,s){const i=[];let e=0,n=0,r=t.length,h=s.length;for(;e<r&&n<h;){const r=t[e],h=s[n];r.c$().PK()<h.c$().PK()?(i.push(r),++e):(i.push(h),++n)}for(;e<r;++e)i.push(t[e]);for(;n<h;++n)i.push(s[n]);return i}s2(t){const s=[],i=t.length;for(let e=0;e<i-1;e+=2){const i=t[e],n=t[e+1];s.push(this.t2(i,n))}return i%2==1&&s.push(t[i-1]),s}i2(t){for(;t.length>1;)t=this.s2(t);return t[0]}e2(){return this.q1(),bm.bh(Tm),this.i0.ZK(this.EV(),Tm),Tm.length?1===Tm.length?Tm[0]:this.i2(Tm):[]}B1(){return this.Yj()&&this.tO()>0&&this.n2()}n2(){if(this.S1()||!this.vV())return!0;for(const t of this.u0)if(t.n2())return!0;return!1}h2(){return this.TV()||!this.J0()||0!==this.GV()||this.JQ.o2()}a2(){if(this.h2())return!0;for(const t of this.u0)if(t.a2())return!0;return!1}NO(){return this._Q}f1(t){if(this.lQ.Nj())return 1;{const s=this.l2();return s/(s-t)}}u2(t){const s=this.Nc.$V();if(this.lQ.Nj())return s;{const i=this.l2();return this.WS()/Math.abs(i-t)*s}}Q0(){this.kQ=!0,this.$Q=!0,this.DQ=!0}c2(t){return this.kQ&&(this.f2(t,this.AD,0,0,null),this.kQ=!1),this.AD}d1(t){return this.WS(t)/this.d2()}l2(){return this.C1()?this.zN().G1()[2]:this.d1()}m2(){if(this.C1()){const t=this.zN().G1();return[t[0],t[1],t[2]]}return this.g2()}g2(t=0,s=0,i=0){const e=this.Nc,n=this.zN(),r=e.w2(),h=e.S2();let o=(this.dj()-r)*this.SQ+r,a=(this.mj()-h)*this.bQ+h;e.Ak()&&(o=Math.round(o),a=Math.round(a));let l=o+t,u=a+s;const c=n.Nj()?this.WS(i):this.d1(i),[f,d]=this.Dj();if(.5!==f||.5!==d){const t=this.WS(i)/c;let s=(f-.5)*e.m1()/t,n=(d-.5)*e.g1()/t;const r=this.cj();0!==r&&(km.set(s,n),km.rotate(r),s=km.Oa(),n=km.Da()),l+=s,u+=n}return[l,u,c]}f2(t,s,i,e,n){const r=this.Nc,h=this.zN();if(this.C1()){Cm.S(Fm,h.G1()),Cm.S(Dm,h.b2()),Cm.S(Lm,h.v2());const t=r.w2(),s=r.S2(),i=Dm[0]-Fm[0],e=Dm[1]-Fm[1],n=Dm[2]-Fm[2];Fm[0]=(Fm[0]-t)*this.SQ+t,Fm[1]=(Fm[1]-s)*this.bQ+s,Fm[2]*=Math.max(this.SQ,this.bQ),Dm[0]=Fm[0]+i,Dm[1]=Fm[1]+e,Dm[2]=Fm[2]+n}else{const[t,s,r]=this.g2(i,e,n);Cm.set(Fm,t,s,r),Cm.set(Dm,t,s,r-100);const h=this.cj();0===h?Cm.set(Lm,0,1,0):Cm.set(Lm,Math.sin(h),Math.cos(h),0)}t.eb(s,Fm,Dm,Lm,n||r.g1())}M2(){this.LQ=!0,this.$Q=!0,this.DQ=!0}T2(t){return this.LQ&&(this.G2(t),this.LQ=!1),this.YT}G2(t){const s=this.Nc.I$(),[i,e]=this.Dj();if(this.lQ.Nj())t.ib(this.YT,s.I2(),s._2());else if(.5===i&&.5===e)Pm.S(this.YT,s.C2());else{const n=s.I2(),r=s._2();t.tb(this.YT,n/r,i,e)}}EX(t,s=!0,i=0,e=0,n=0){s&&t.VR(this.T2(t));let r=null;0===i&&0===e&&0===n?r=this.c2(t):(this.f2(t,Am,i,e,n),r=Am),t.YR(r)}E2(t){this.EX(t),t.Vb(this.XM())}P2(t){let s=null;if(t.Bv()&&this.Nc.A2()){const i=this.Nc.I$().R2(this);i&&(s=i._A(),t.QO(s))}return s}O2(t){if(t.sb()&&this.Nc.A2()){const s=2*(this.tk()+1);t.F2(s,s+1)}}Bx(t,s,i){const e=this.Nc.I$(),n=this.h2();let r=null;const h=this.P2(t);if(this.O2(t),n){const s={Zx:this.Nc.Ek(),kT:!0,D2:!!t.sb()&&this.Nc.L2()};"low"===e.N2()&&(s.width=e.I2(),s.height=e._2()),r=this.Nc.B2(s),this._Q=r,t.UO(r),this.vV()&&t.AO(0,0,0,0)}else this._Q=s,t.UO(s);if(this.vV()||t.Eu(this.yQ),this.lQ.W2(t,this._Q,this.u0,n&&this.vV()),this.O2(t),this.EX(t),t.Vb(this.XM()),t.FO(this.v1()),this.d2()>Number.EPSILON){this.q1();const s=this.l0()&&0===this.XM()&&!this.zQ;this.C1()?this.j2(t):s?this.V2(t):this.U2(t,this.b1())}t.Vb(0),t.Hb(0),n&&(t.FO(!1),this.H2(t,r,s,i)),h&&t.sF(h),this._Q=null}U2(t,s){const i=this.EV(),e=this._Q,n=this.zN().Nj(),r=this.zN().q2();let h=null;for(let o=0,a=s.length;o<a;++o){const a=s[o];if(a===h)continue;h=a;const l=a.c$();l.Yj()&&l.z2(i,r,n)&&this.J2(a,l,t,e)}}j2(t){const s=this._Q,i=this.Y2(),e=$m,n=Bm,r=this.b1();for(let h=0,o=r.length;h<o;){const a=r[h],l=a.c$();if(!l.Yj()||!l.X2(i)){++h;continue}(!a.Z2()||l.K2()>0)&&n.push(a);const u=a.c$().cH();e.push(a);let c=h+1;for(;c<o;++c){const t=r[c],s=t.c$();if(s.Yj()&&s.X2(i)){if(s.cH()!==u)break;t.Z2()?(s.K2()>0&&n.push(t),e.push(t)):n.push(t)}}if(1!==e.length||e[0].Q2()){this.t3(t,e);for(let i=0,e=n.length;i<e;++i){const e=n[i],r=e.c$();r.s3(!0),this.J2(e,r,t,s),r.s3(!1)}}else{this.J2(a,l,t,s);for(let i=0,e=n.length;i<e;++i){const e=n[i];if(e===a)continue;const r=e.c$();r.f$().J2(e,r,t,s)}}h=c,bm.bh(e),bm.bh(n)}}t3(t,s){const i=this._Q;t.YO();for(let i=0,e=s.length;i<e;++i){const e=s[i],n=e.c$();n.i3(!0),this.e3(e,n,t)}t.XO();for(let e=0,n=s.length;e<n;++e){const n=s[e],r=n.c$();this.J2(n,r,t,i),r.i3(!1)}t.KO()}V2(t){const s=this.i0,i=this.h0,e=this.r0,n=this.EV();let r;i.set(s.JK(n.Ka()),s.YK(n.Qa()),s.JK(n.tl()),s.YK(n.sl())),this.n0&&i.equals(e)?r=this.e0:(r=this.e2(),this.n0=!0,e.S(i)),this.U2(t,r),r!==this.e0&&bm.Gh(this.e0,r)}J2(t,s,i,e){s.o2()?this.n3(t,s,i,e):this.e3(t,s,i)}e3(t,s,i){const e=s.r3();i.Ib()!==e&&e.OM(),t.Bx(i)}n3(t,s,i,e){this.h3(t,s,i,e,null)&&this.EX(i)}h3(t,s,i,e,n){const r=s.XU().QL();return r.VD(i,e,{HD:t,zD:s.GV(),devicePixelRatio:this.Nc.o3(),time:t.a3(),JD:this.Nc.l3()*this.d2(),YD:this.cj(),bL:s.pH(),vL:r.BL()?null:this.u3(s),iL:n&&n.iL,eL:n&&n.eL,nL:n&&n.nL,rL:n&&n.rL,hL:n&&n.hL,oL:n&&n.oL}),i.Vb(this.XM()),r.ZR()}H2(t,s,i,e){const n=this.JQ.Y0(),r=this.Nc;0===n.length?(t.UO(i),t.lb(),e&&0===this.PM&&this.J0()?t.HO(s):(t.FM(this.PM),t.DM(this.vQ),t.qO(s)),t.zO(s),r.KQ(s)):this.QL().VD(t,i,{HD:this,zD:this.GV(),devicePixelRatio:r.o3(),JD:r.l3()*this.d2(),YD:this.cj(),bL:this.EV(),vL:null,RF:!0})}rV(){return this.CQ}nV(t){this.CQ!==t&&(this.CQ=t,this.lQ.c3(),this.Q0(),this.Nc.w$())}$V(){return this.d2()*this.Nc.$V()}JJ(){return this.d2()*this.Nc.JJ()}d2(){return(this.CQ*this.lQ.lj()-1)*this.IQ+1}h1(){if(!this.DQ)return;this.DQ=!1;const t=this.Nc.w2(),s=this.Nc.S2(),i=(this.dj()-t)*this.SQ+t,e=(this.mj()-s)*this.bQ+s,n=this.d2(),r=this.Nc.m1()/n,h=this.Nc.g1()/n;let o=i-r/2,a=e-h/2;this.Nc.Ak()&&(o=Math.round(o),a=Math.round(a));const l=this.OQ;l.set(o,a,o+r,a+h);const u=this.cj();0!==u&&(Mm.S(l),Mm.offset(-l.hl(),-l.ol()),xm.Xl(Mm,u),xm.Kl(Mm),Mm.offset(l.hl(),l.ol()),l.S(Mm));const c=this.RM;this.c1(c,this.BA),this.C1()?this.f3(c,this.FQ):this.FQ.S(this.BA)}f3(t,s){const i=this.Nc.I$(),e=i.OB(),n=i.LB(),[r,h]=this.AV(0,0,t),[o,a]=this.AV(e,0,t),[l,u]=this.AV(e,n,t),[c,f]=this.AV(0,n,t);let d=Math.min(r,o,l,c),p=Math.min(h,a,u,f),m=Math.max(r,o,l,c),g=Math.max(h,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}AV(t,s,i=0){return this.d3(t,s,i,this.JJ())}DV(t,s,i=0){return this.d3(t,s,i,this.$V()*this.WB())}d3(t,s,i,e){const n=this.Nc,r=n.pM(),h=this.d2(),o=n.m1()/h,a=n.g1()/h,l=Om;Em.set(l,0,0,o,a),t/=e,s=l[3]-s/e;const u=this.T2(r),c=this.c2(r),f=Rm;return bm.kw.Bw(t,s,i,c,u,l,f)?[f[0],f[1]]:[NaN,NaN]}m3(t,s){const i=this.CQ,e=this.IQ,n=this.SQ,r=this.bQ,h=this.EQ;this.CQ=1,this.IQ=1,this.SQ=1,this.bQ=1,this.EQ=0,this.Q0();const o=this.AV(t,s);return this.CQ=i,this.IQ=e,this.SQ=n,this.bQ=r,this.EQ=h,this.Q0(),o}OV(t,s,i=0){return this.g3(t,s,i,this.JJ())}kV(t,s,i=0){return this.g3(t,s,i,this.$V()*this.WB())}g3(t,s,i,e){const n=this.Nc,r=n.pM(),h=this.d2(),o=n.m1()/h,a=n.g1()/h,l=Om;Em.set(l,0,0,o,a);const u=this.T2(r),c=this.c2(r),f=Rm;return bm.kw.Nw(t,s,i,c,u,l,f)?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}y3(t,s){return t*=this.$V()*this.WB(),0!==s&&(t*=this.f1(s)),t}u3(t){const s=t.pH(),i=t.cH(),e=t.K2(),n=i+e,r=s.Ka(),h=s.Qa(),o=s.tl(),a=s.sl();if(this.C1()){if(this.w3(r,h,i)||this.w3(o,h,i)||this.w3(o,a,i)||this.w3(r,a,i))return null;if(e>0&&(this.w3(r,h,n)||this.w3(o,h,n)||this.w3(o,a,n)||this.w3(r,a,n)))return null}else if(n>=this.d1())return null;let[l,u]=this.kV(r,h,i),[c,f]=this.kV(o,a,i);if(0!==this.cj()||e>0||this.C1()){const[t,s]=this.kV(o,h,i),[d,p]=this.kV(r,a,i);if(e>0){const[i,e]=this.kV(r,h,n),[m,g]=this.kV(o,h,n),[y,w]=this.kV(o,a,n),[S,b]=this.kV(r,a,n);let v=Math.min(l,c,t,d,i,m,y,S);c=Math.max(l,c,t,d,i,m,y,S),l=v,v=Math.min(u,f,s,p,e,g,w,b),f=Math.max(u,f,s,p,e,g,w,b),u=v}else{let i=Math.min(l,c,t,d);c=Math.max(l,c,t,d),l=i,i=Math.min(u,f,s,p),f=Math.max(u,f,s,p),u=i}}return Mm.set(l,u,c,f),Mm}Y2(){return this.$Q&&(this.S3(),this.$Q=!1),this.NQ}S3(){const t=this.Nc.pM(),s=this.T2(t),i=this.c2(t);this.NQ.Jw(i,s)}w3(t,s,i){return this.Y2().Xw(t,s,i)}b3(){return{d:this.H0(),s:this.rV(),a:this.lV(),v:this.qj(),i:this.Zj(),html:this.tV(),bc:this.yQ.toJSON(),t:this.vV(),sx:this.PQ,sy:this.AQ,hosp:this.RQ,px:this.fV(),py:this.mV(),c:this.AM.toJSON(),sr:this.aV(),fx:this.JQ.hx(),cg:this.VQ}}v3(t){this.pQ=!!t.d,this.CQ=t.s,this.EQ=t.a,this.mQ=!!t.v,this.gQ=!t.hasOwnProperty("i")||t.i,this.cQ=!!t.html,this.yQ.wa(t.bc),this.wQ=!!t.t,t.hasOwnProperty("sx")&&(this.PQ=t.sx),t.hasOwnProperty("sy")&&(this.AQ=t.sy),t.hasOwnProperty("hosp")&&(this.RQ=!!t.hosp),this.SQ=t.px,this.bQ=t.py,this.AM.wa(t.c),this.a0(),this.IQ=t.sr,bm.Gh(this.VQ,t.cg),bm.Gh(this.jQ,this.BQ);const s=new Set(this.VQ);let i=0;for(let t=0,e=this.jQ.length;t<e;++t)s.has(this.jQ[t][2])||(this.jQ[i]=this.jQ[t],++i);bm.Sh(this.jQ,i),this.JQ.ox(t.fx),this.t0=!0}M3(){this.A0(!1),this.y$(),this.Q0(),this.M2()}wj(){return this.o0}WW(t,s=!1,i=!1){if(this.FK.includes(t))return s&&this.FK.sort(((t,s)=>(t.c$().x3()??0)-(s.c$().x3()??0))),void(i&&this.FK.forEach(((t,s)=>t.c$().R0(s))));if(t.T3()){const s=[...t.jH()];s.push(t),s.sort(((t,s)=>(t.c$().x3()??0)-(s.c$().x3()??0)));for(const t of s)if(t.KV())for(const i of t.QV()){if(s.includes(i))continue;const t=[...i.jH()];t.push(i),t.sort(((t,s)=>(t.c$().x3()??0)-(s.c$().x3()??0))),t&&t.length&&s.splice(s.length,0,...t)}for(const t of s)t.MW().KB()&&this.T0(t,!0);i&&this.FK.forEach(((t,s)=>t.c$().R0(s)))}else{if(t.MW().KB()&&this.T0(t,!0),!t.KV())return void(i&&this.FK.forEach(((t,s)=>t.c$().R0(s))));for(const s of t.QV()){const t=[...s.jH()];if(t.push(s),t.sort(((t,s)=>(t.c$().x3()??0)-(s.c$().x3()??0))),t&&t.length)for(const s of t)s.MW().KB()&&this.T0(s,!0)}i&&this.FK.forEach(((t,s)=>t.c$().R0(s)))}}}}{let Vm=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},Um=function(t,s){ng!==t&&(t.E2(s),ng=t)};vec3EqualsXYZ=Vm,MaybePrepareLayerDraw=Um;const Hm=self._s,qm=self.RU,zm=self.assert,Jm=Hm.Hn(Hm.Rect),Ym=Hm.Hn(Hm.Rect),Xm=Hm.Hn(Hm.Rect),Zm=Hm.Hn(Hm.To),Km=self.ls,Qm=Km.ws,tg=[],sg=[],ig=[],eg=[];let ng=null;Hm.G3=class extends Hm.Vn{constructor(t,s,i){super(),this.I3=t,this.Nc=t.$$(),this.Yn=i[0],this._3=i[1],this.C3=i[2],this.Ey=i[1],this.Py=i[2],this.E3=!!i[3],this.P3=!!i[4],this.A3=i[5],this.R3=i[6],this.O3=i[7],this.F3=null,this.dQ=i[8],this.Pw=s,this.PQ=0,this.AQ=0,this.CQ=1,this.EQ=0,this.D3=new Set,this.L3=new Set,this.N3=new Set,this.B3=[],this.W3=[],this.j3=new Map,this.V3=new Map,this.U3=[],this.H3=!1,this.q3=Qm.create(),this.z3=Qm.create(),this.J3=Qm.create(),this.Y3=[],this.X3=[],this.Z3=new Map,this.K3=new Map,this.Q3=-1;const e=this.Nc.I$();this.JQ=Hm.Hn(Hm.YQ,this,i[11]),this.XL=Hm.Hn(Hm.kw.BF,e.XQ(),{EF:(t,s)=>{const i=s.jL().NO();t.eO(),t.qO(i),t.zO(i),e.KQ(i)},AF:t=>this.nj().QQ(t)}),this.t0=!0,this.t5=!1,this._Q=null,this.s5={},this.i5=new Map,this.e5=!0,this.n5=new self.ej(this),this.r5=Hm.Hn(Hm.Event.wf);for(const t of i[9])this.Y3.push(Hm.aQ.c0(this,null,t));this.h5();for(const t of this.vj())t.f0();for(const t of i[10]){const s=this.Nc.d0(t[1]);if(!s)throw new Error("missing nonworld object class");s.m0()||s.g0(t),this.U3.push(t),this.p0(s)}}qn(){for(const t of this.X3)t.qn();Hm.bh(this.X3),this.N3.clear(),this.F3=null,this.I3=null,this.Nc=null}$$(){return this.Nc}Ec(){return this.Yn}U0(){return this.dQ}tk(){return this.Pw}nj(){return this.JQ}QL(){return this.z0(),this.XL}z0(){const t="low"===this.Nc.I$().N2();if(!this.t0&&this.t5===t&&!this.XL.RD())return;const s=this.nj().Y0();this.XL.OD(s.map((t=>t.RI())),{OF:s.map((t=>t.tk())),DF:t,$F:!0}),this.t0=!1,this.t5=t}Yq(){this.nj().Yq(),this.t0=!0}o5(){let t=this.X3[0].d2();for(let s=1,i=this.X3.length;s<i;++s){const i=this.X3[s];0===i.fV()&&0===i.mV()||(t=Math.min(t,i.d2()))}return t}a5(){return.5*this.Nc.m1()/this.o5()}l5(){return.5*this.Nc.g1()/this.o5()}s1(){return this.u5()?-1/0:this.a5()}i1(){return this.u5()?1/0:this.jg()-this.a5()}e1(){return this.u5()?-1/0:this.l5()}n1(){return this.u5()?1/0:this.Kg()-this.l5()}fj(t){const s=this.s1(),i=this.i1();t>i&&(t=i),t<s&&(t=s),this.PQ!==t&&(this.PQ=t,this.c5(),this.Nc.w$())}dj(){return this.PQ}pj(t){const s=this.e1(),i=this.n1();t>i&&(t=i),t<s&&(t=s),this.AQ!==t&&(this.AQ=t,this.c5(),this.Nc.w$())}mj(){return this.AQ}u5(){return this.E3}c3(){this.fj(this.dj()),this.pj(this.mj());for(const t of this.X3)t.t1()&&(t.fj(t.dj()),t.pj(t.mj()))}Oj(t,s){this.A3===t&&this.R3===s||(this.A3=t,this.R3=s,this.f5()&&(this.d5(),this.c5(),this.Nc.w$()))}l1(){return this.Nj()?.5:this.A3}u1(){return this.Nj()?.5:this.R3}q2(){const t=this.l1(),s=this.u1();return t<0||t>1||s<0||s>1}Lj(){this.P3&&(this.P3=!1,this.d5(),this.c5(),this.Nc.w$())}kj(){this.P3||(this.P3=!0,this.d5(),this.c5(),this.Nc.w$())}Nj(){return this.P3}f5(){return!this.Nj()}p5(t){t=!!t,this.H3!==t&&(this.H3=t,this.c5(),this.Nc.w$())}E1(){return this.H3}m5(t,s,i,e,n,r,h,o,a){Vm(this.q3,t,s,i)&&Vm(this.z3,e,n,r)&&Vm(this.J3,h,o,a)||(Qm.set(this.q3,t,s,i),Qm.set(this.z3,e,n,r),Qm.set(this.J3,h,o,a),this.g5())}g5(){this.c5(),this.Nc.w$()}G1(){return this.q3}b2(){return this.z3}v2(){return this.J3}lj(){return this.CQ}aj(t){this.CQ!==t&&(this.CQ=t,this.c5(),this.c3(),this.Nc.w$())}uj(t){t=Hm.Kn(t),this.EQ!==t&&(this.EQ=t,this.c5(),this.Nc.w$())}cj(){return this.EQ}jg(){return this.Ey}Yg(t){!isFinite(t)||t<1||(this.Ey=t)}Kg(){return this.Py}Vg(t){!isFinite(t)||t<1||(this.Py=t)}y5(){return this.F3}V0(){return this.Y3}*vj(){for(const t of this.Y3)yield*t.Hj()}bj(){return this.X3}w5(){return this.X3.length}f$(t){return"number"==typeof t?this.p$(t):this.N0(t.toString())}p$(t){return t=Hm.Zn(Math.floor(t),0,this.X3.length-1),this.X3[t]}N0(t){return this.Z3.get(t.toLowerCase())||null}S5(t){return!!this.N0(t)}b5(t){return this.K3.get(t)||null}d5(){for(const t of this.X3)t.M2()}c5(){for(const t of this.X3)t.Q0()}Gj(t,s,i){if(this.S5(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=i>=2?s:s.Bj(),n=Hm.Hn(Hm.aQ,this,e,{name:t,QK:Math.floor(1e15*Math.random()),tQ:!0});this.v5(n,s,i),this.$$().w$(),this.W0()}_j(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.M5(t),this.v5(t,s,i),this.$$().w$(),this.W0())}Ej(t){if(this.M5(t)){const s=this.Nc.Bk();s.jW(!0),t.qn(),s.jW(!1),this.$$().w$(),this.W0()}}Aj(){const t=new Set;for(const s of this.vj())s.H0()&&!s.q0()&&t.add(s);if(0===t.size)return;const s=this.Nc.Bk();s.jW(!0);for(const s of t)this.M5(s),s.qn();s.jW(!1),this.$$().w$(),this.W0()}v5(t,s,i){if(i>=2)if(s){if(s===t||s.W1(t))throw new Error(`cannot move layer '${t.Ec()}' to sub-layer of itself`);s.F1(t,2===i),t.R1(s)}else 2===i?this.Y3.push(t):this.Y3.unshift(t),t.R1(null);else{const e=s.Bj();if(e){if(s.W1(t))throw new Error(`cannot move layer '${t.Ec()}' to sub-layer of itself`);e.D1(t,s,0===i),t.R1(e)}else{let e=this.Y3.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");0===i&&++e,this.Y3.splice(e,0,t),t.R1(null)}}}M5(t){const s=t.Bj();if(s)return s.L1(t),!0;if(this.Y3.length>1){const s=this.Y3.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");return this.Y3.splice(s,1),!0}return!1}h5(){this.X3=[...this.vj()],this.Z3.clear(),this.K3.clear();for(let t=0,s=this.X3.length;t<s;++t){const s=this.X3[t];s.$0(t),this.Z3.set(s.Ec().toLowerCase(),s),this.K3.set(s.U0(),s)}}x5(){let t=0;for(const s of this.Y3){for(const i of s.Hj())i.B0(t);s.tV()&&t++}}T5(){return this.Y3.at(-1).BJ()+1}async W0(){this.h5(),this.x5(),this.Q3=this.T5()}G5(){return this.Q3}I5(){this.Q3=-1}Y1(t){const s=[];for(const i of this.Y3){const e=i.BJ();if(e===t)s.push(i);else if(e>t)break}return s}V1(){return{scrollX:this.dj(),scrollY:this.mj(),scale:this.lj(),angle:this.cj(),vpX:this.l1(),vpY:this.u1()}}U1(t){this.fj(t.scrollX),this.pj(t.scrollY),this.aj(t.scale),this.uj(t.angle),this.Oj(t.vpX,t.vpY)}_5(){let t=this.Y3.filter((t=>t.B1()))[0];for(;t;){if(!t.vV())return Zm.ko(t.IV()),Zm.Lo(1),Zm;if(t.h2())return Zm.Eo(0,0,0,0),Zm;t=t.Vj().filter((t=>t.B1()))[0]}return Zm.Eo(0,0,0,0),Zm}b0(){return this.e5}C5(){return[...this.D3]}p0(t){if(t.KV())for(const s of t.P5().E5())this.D3.add(s);else this.D3.add(t)}A5(){return[...this.L3]}R5(t,s){if(t===this||!s)return Promise.resolve();t&&(Hm.mo(this.L3,t.L3),t.L3.clear());const i=[];for(const t of this.D3)this.L3.has(t)||(i.push(t.O5(s)),this.L3.add(t));return Promise.all(i)}async F5(t){if(t.k0())throw new Error("cannot load textures for family");const s=this.Nc.pM();if(!s||s.QP()||this.L3.has(t))return;this.L3.add(t);const i=t.O5(s);this.D5(i),await i,t.L5(),this.Nc.w$()}D5(t){this.N3.add(t),t.then((()=>this.N3.delete(t))).catch((()=>this.N3.delete(t)))}k5(){return Promise.all([...this.N3])}N5(t){if(t.k0()||t.NW()>0)throw new Error("cannot unload textures");const s=this.Nc.pM();s&&this.L3.has(t)&&(this.L3.delete(t),t.B5(s))}W5(t,s){if(t!==this&&s)for(const s of this.L3)s.x0()||t.D3.has(s)||(s.B5(),this.L3.delete(s))}j5(){this.L3.clear()}async V5(t){const s=this.Nc,i=this.I3,e=s.Bk();this.O3&&(this.F3=e.U5(this.O3),this.F3.H5()),i.q5(this),this.Ey=this._3,this.Py=this.C3,this.PQ=s.Ik()/2,this.AQ=s.Ck()/2,this.c3(),this.d5(),this.c5(),this.x5(),await this.Nc.I$().z5(this.T5(),!0),this.J5(t),this.Nc.Y5(!0),this.X5(),this.e5||this.Z5(),this.K5(this.B3),this.K5(this.W3),this.Q5(),i.t4(),s.qW(),this.Nc.Y5(!1);const n=this.Nc.s4();if(await Promise.all(n),Hm.bh(n),!s.i4()){for(const t of this.B3)t.e4();for(const t of this.W3)t.n4(this.j3,this.V3);for(const[t,s]of Object.entries(this.s5)){const i=this.Nc._Y(parseInt(t,10));i&&!i.k0()&&i.v0()&&Hm.bh(s)}for(const t of this.B3)t.r4();for(const t of this.W3)t.r4();for(const t of this.B3)t.zH()||t.h4();for(const t of this.W3)t.zH()||t.h4()}Hm.bh(this.B3),Hm.bh(this.W3),this.j3.clear(),this.V3.clear(),await Promise.all([...this.D3].map((t=>t.o4(this.Nc.pM())))),t&&(s.wf().dispatchEvent(new Hm.Event("beforefirstlayoutstart")),await s.a4(new Hm.Event("beforeprojectstart"))),await this.l4(new Hm.Event("beforeanylayoutstart")),s.wf().dispatchEvent(new Hm.Event("beforelayoutstart")),await this.a4(new Hm.Event("beforelayoutstart")),s.i4()||await s.C$(Hm.R$.A$.P$.u4,null,null),s.wf().dispatchEvent(new Hm.Event("afterlayoutstart")),await this.a4(new Hm.Event("afterlayoutstart")),await this.l4(new Hm.Event("afteranylayoutstart")),t&&(s.wf().dispatchEvent(new Hm.Event("afterfirstlayoutstart")),await s.a4(new Hm.Event("afterprojectstart"))),e.c4(i),await this.k5(),this.e5=!1}J5(t){for(const t of this.Nc.L0())if(!t.k0()&&t.KB())for(const s of t.FW()){const t=s.c$(),i=t.f$(),e=Hm.Zn(i.tk(),0,this.X3.length-1),n=this.X3[e];t.g$(n,!0),n.G0(s)}if(!t)for(const t of this.X3)t.A0(!1)}X5(){for(const t of this.X3)t.S0(this.B3),t.O0()}Z5(){let t=!1;for(const[s,i]of Object.entries(this.s5)){const e=this.Nc._Y(parseInt(s,10));if(e&&!e.k0()&&e.v0())for(const s of i){let i=null;if(e.KB()&&(i=s.hasOwnProperty("instJson")?this.b5(s.instJson.w.l):this.b5(s.w.l),!i))continue;const n=this.Nc.M0(e,i,!1,0,0,!0);s.hasOwnProperty("instJson")?n.ox(s.instJson):n.ox(s),t=!0,this.W3.push(n),s.hasOwnProperty("instJson")&&(this.j3.set(n,s),this.V3.set(s.index,n))}}for(const t of this.X3)t.A0(!0),t.y$();t&&(this.Nc.qW(),this.Nc.f4())}K5(t){for(const s of t){if(!s.KV())continue;const i=s.c$(),e=s.iU();for(const n of s.WV().P5().sj()){if(n===s.WV())continue;const r=n.FW();if(r.length>e)s.d4(r[e]);else{let e;e=i?this.Nc.M0(n,i.f$(),!0,i.HM(),i.JM(),!0):this.Nc.M0(n,null,!0,0,0,!0),this.Nc.qW(),n.m4(),s.d4(e),t.push(e)}}}}Q5(){for(const t of this.U3)this.Nc.d0(t[1]).KV()||this.Nc.M0(t,null,!0)}g4(){const t=[],s=this.U3;let i=0;for(let e=0,n=s.length;e<n;++e){const n=s[e],r=this.Nc.d0(n[1]);r.x0()?r.KV()&&r.P5().y4()||t.push(this.Nc.M0(n,null,!0)):(s[i]=n,++i)}Hm.Sh(s,i),this.Nc.qW(),this.K5(t)}D0(t,s,i,e,n,r,h){if(i)return i.D0(t,s,n,r,e,h);{const i=[];for(const o of this.X3)i.push(o.D0(t,s,n,r,e,h));return i.flat()}}async w4(){const t=this.I3;this.Nc.i4()||(await this.l4(new Hm.Event("beforeanylayoutend")),await this.a4(new Hm.Event("beforelayoutend")),await this.Nc.C$(Hm.R$.A$.P$.S4,null,null),await this.a4(new Hm.Event("afterlayoutend")),await this.l4(new Hm.Event("afteranylayoutend"))),t.b4(!0),this.Nc.Bk().v4(),this.e5||this.M4();for(const t of this.X3)t.F0();for(const t of this.Nc.L0())if(!(t.x0()||t.KB()||t.MW().XB()||t.k0())){for(const s of t.FW())this.Nc.zV(s);this.Nc.qW()}t.b4(!1),t.VN()===this&&t.q5(null)}x4(t,s){const i=t.WV().U0().toString();this.s5.hasOwnProperty(i)||(this.s5[i]=[]);const e=this.s5[i],n={index:s,instJson:t.hx(),sceneGraphJson:{children:[]}};e.push(n),this.i5.set(t,n)}T4(t){const s=this.i5.get(t);for(const i of t.G4()){const t=this.i5.get(i);t&&s.sceneGraphJson.children.push({index:t.index,flags:Hm._4.I4(i.c$())})}}M4(){this.i5.clear();let t=0;for(const s of this.X3){s.q1();for(const i of s.m$()){const s=i.WV();!s.x0()&&s.v0()&&(this.x4(i,t),t++)}}for(const t of this.X3)for(const s of t.m$()){const t=s.WV();!t.x0()&&t.v0()&&this.T4(s)}this.i5.clear()}C4(){this.s5={},this.e5=!0}NO(){return this._Q}h2(){const t=this.Nc,s=t.pM().Bv();return"low"===t.I$().N2()||s&&t.L2()||this.JQ.o2()||s&&t._1()}E4(t){const s=this.Nc.I$();if(this.h2()){t.UO(null),t.AO(0,0,0,0);const i={Zx:this.Nc.Ek(),kT:t.sb()||this.Nc.L2()||this.JQ.o2(),D2:!!t.sb()&&this.Nc.L2()};"low"===s.N2()&&(i.width=s.I2(),i.height=s._2()),this._Q=this.Nc.B2(i)}else this._Q=null}P4(t){this.Nc.A4(t)&&(t.FO(!1),t.UO(null),t.lb(),t.HO(this._Q))}R4(t){this.h2()&&(t.FO(!1),this.O4(t,this._Q))}F4(t){t.UO(this._Q),t.Eu(this._5()),this.Nc._1()&&t.OO();const s=this.Y1(0);this.W2(t,this._Q,s,!0),t.sb()&&t.F2(0,1),this.R4(t),this._Q=null}D4(t,s){let i=null;this.Nc.A4(t)&&(i=this._Q),t.UO(i),t.AO(0,0,0,0),this.Nc._1()&&t.OO();const e=this.Y1(s);this.W2(t,i,e,!0),this.P4(t),t.Ov(),this.Nc.I$().L4(s)}W2(t,s,i,e){const n=i.filter((t=>t.B1()));for(let i=0,r=n.length;i<r;){const h=n[i];if(h.P1()&&!h.a2()){tg.push(h);for(let t=i+1;t<r;++t){const s=n[t];if(!s.P1()||s.a2())break;tg.push(n[t])}if(tg.length>=2||1===tg.length&&tg[0].N1()){this.N4(t,s,tg),i+=tg.length,Hm.bh(tg);continue}Hm.bh(tg)}h.Bx(t,s,e&&0===i),++i}}O4(t,s){const i=this.JQ.Y0(),e=this.Nc;0===i.length?(t.UO(null),t.lb(),t.HO(s),t.zO(s),e.KQ(s)):(Xm.set(0,0,e.m1(),e.g1()),this.QL().VD(t,null,{HD:this,zD:3,devicePixelRatio:this.Nc.o3(),JD:this.Nc.l3()*this.lj(),YD:this.cj(),bL:Xm,vL:null,RF:!0}))}N4(t,s,i){i[0].vV()||(Zm.ko(i[0].IV()),Zm.Lo(1),t.Eu(Zm)),this.Nc.I$(),t.FO(!0);const e=sg,n=ig,r=eg;for(const t of i)t.q1(),t.T1(e);const h=i[0],o=h.P2(t);h.O2(t);for(let i=0,h=e.length;i<h;){const o=e[i],a=o.c$(),l=a.f$();if(!a.Yj()||!a.X2(l.Y2())){++i;continue}(!o.Z2()||a.K2()>0)&&r.push(o);const u=o.c$().cH();n.push(o);let c=i+1;for(;c<h;++c){const t=e[c],s=t.c$();if(s.Yj()&&s.X2(s.f$().Y2())){if(s.cH()!==u)break;t.Z2()?(s.K2()>0&&r.push(t),n.push(t)):r.push(t)}}if(1!==n.length||n[0].Q2()){this.B4(t,s,n);for(let i=0,e=r.length;i<e;++i){const e=r[i],n=e.c$(),h=n.f$();n.s3(!0),Um(h,t),h.J2(e,n,t,s),n.s3(!1)}}else{Um(l,t),l.J2(o,a,t,s);for(let i=0,e=r.length;i<e;++i){const e=r[i];if(e===o)continue;const n=e.c$(),h=n.f$();Um(h,t),h.J2(e,n,t,s)}}i=c,Hm.bh(n),Hm.bh(r)}o&&t.sF(o),Hm.bh(e),ng=null}B4(t,s,i){t.YO();for(let s=0,e=i.length;s<e;++s){const e=i[s],n=e.c$(),r=n.f$();n.i3(!0),Um(r,t),r.e3(e,n,t)}t.XO();for(let e=0,n=i.length;e<n;++e){const n=i[e],r=n.c$(),h=r.f$();Um(h,t),h.J2(n,r,t,s),r.i3(!1)}t.KO()}b3(){const t={sx:this.dj(),sy:this.mj(),s:this.lj(),a:this.cj(),w:this.jg(),h:this.Kg(),ortho:this.Nj(),vpX:this.l1(),vpY:this.u1(),fv:this.e5,persist:this.s5,fx:this.JQ.hx(),layers:{},dynamicLayers:[]};for(const s of this.X3)if(s.H0()){const i=s.Bj();t.dynamicLayers.push({sid:s.U0(),name:s.Ec(),parentSid:i?i.U0():null,siblingIndex:s.j0(),data:s.b3()})}else t.layers[s.U0().toString()]=s.b3();return t}v3(t){this.PQ=t.sx,this.AQ=t.sy,this.CQ=t.s,this.EQ=t.a,this.Ey=t.w,this.Py=t.h,this.P3=!!t.ortho,t.hasOwnProperty("vpX")&&(this.A3=t.vpX),t.hasOwnProperty("vpY")&&(this.R3=t.vpY),this.e5=!!t.fv,this.s5=t.persist,this.JQ.ox(t.fx),this.t0=!0;for(const[s,i]of Object.entries(t.layers)){const t=parseInt(s,10),e=this.b5(t);e&&e.v3(i)}if(t.hasOwnProperty("dynamicLayers")){this.Aj(),this.Nc.qW();const s=new Map,i=t.dynamicLayers;for(let t=i.length-1;t>=0;--t){const e=i[t],n=e.sid,r=e.name,h=e.parentSid,o=e.siblingIndex,a=e.data;if(this.h5(),this.S5(r)||this.b5(n))continue;let l,u;if(null===h)l=null,u=this.Y3;else{if(l=this.b5(h),!l)continue;u=l.Vj()}const c=Hm.Hn(Hm.aQ,this,l,{name:r,QK:n,tQ:!0});u.push(c);let f=s.get(u);f||(f=[],s.set(u,f)),f.push({ZU:c,W4:o}),c.v3(a)}for(const[t,i]of s){i.sort(((t,s)=>t.W4-s.W4));for(const s of i){const i=s.ZU,e=s.W4;let n=t.indexOf(i);t.splice(n,1),t.splice(e,0,i)}}}this.W0(),this.d5(),this.c5()}UN(){return this.n5}Lk(){return this.r5}YZ(t){t.layout=this.UN();const s=this.Nc,i=s.AU()&&!s.Bk().UW();i&&qm.j4(),this.r5.dispatchEvent(t),i&&qm.V4()}a4(t){return t.layout=this.UN(),this.r5.If(t)}l4(t){return t.layout=this.UN(),this.Nc.a4(t)}U4(){this.H4(this.Y3)}H4(t,s=0){const i=t.slice(0);i.reverse();for(const t of i)console.log(`${"\t".repeat(s)}- ${t.Ec()}`),this.H4(t.Vj(),s+1)}}}{const rg=self._s;rg.q4=class extends rg.Vn{#s;#i=[];#f=new Map;#a=new Map;#e=null;#t=[];#r=null;#h=0;#d=null;constructor(t){super(),this.#s=t}qn(){this.#s=null,this.#e=null,this.#r=null,this.#d=null,rg.bh(this.#i),this.#f.clear(),this.#a.clear(),rg.bh(this.#t)}AG(t){const s=rg.Hn(rg.G3,this,this.#i.length,t);this.#i.push(s),this.#f.set(s.Ec().toLowerCase(),s),this.#a.set(s.U0(),s)}$$(){return this.#s}z4(t){this.#r=t}J4(){if(this.#r)return this.#r;if(this.#i.length)return this.#i[0];throw new Error("no first layout")}Y4(t){return this.#f.get(t.toLowerCase())||null}X4(t){return this.#a.get(t)||null}Z4(t){return t=rg.Zn(Math.floor(t),0,this.#i.length-1),this.#i[t]}zN(t){return"number"==typeof t?this.Z4(t):this.Y4(t.toString())}YN(){return this.#i}q5(t){this.#e=t}VN(){return this.#e}K4(t){if(this.#t.includes(t))throw new Error("layout already running");this.#t.push(t)}Q4(t){const s=this.#t.indexOf(t);if(-1===s)throw new Error("layout not running");this.#t.splice(s,1)}*t6(){this.#e&&(yield this.#e),this.#t.length&&(yield*this.#t)}s6(t){return this.#e===t||this.#t.includes(t)}b4(t){if(t)this.#h++;else{if(this.#h<=0)throw new Error("already unset");this.#h--}}HW(){return this.#h>0}KN(t){this.#d=t}t4(){this.#d=null}ZN(){return!!this.#d}i6(){return this.#d}e6(){const t=this.VN();t&&t.d5()}n6(){const t=this.VN();t&&t.c5()}}}{const hg=self._s,og=new RegExp("<(.+?)>","g");hg.r6=class extends hg.Vn{constructor(t){super(),this.Nc=t,this.h6=hg.Hn(hg.o6),this.a6=null,this.l6=[],this.u6=new Map,this.c6=new Map,this.f6=new Map,this.d6=[],this.p6=[],this.m6=[],this.g6=!1,this.y6=!1,this.w6=!1,this.S6=()=>this.b6(),this.v6=()=>this.M6(),this.x6=()=>this.T6(),this.G6=()=>this.I6(),this._6=t=>this.C6(t.jq),this.E6=t=>this.P6(),this.A6=t=>this.R6(),this.O6=t=>this.F6(),this.D6=[],this.L6=0}qn(){this.k6(),this.S6=null,this.v6=null,this.x6=null,this.G6=null,this._6=null,this.A6=null;for(const t of this.l6)t.Oz(),t.qn();hg.bh(this.l6),this.l6=null,this.h6.qn(),this.h6=null,hg.bh(this.d6),this.d6=null,hg.bh(this.p6),this.p6=null,hg.bh(this.m6),this.m6=null,this.u6.clear(),this.u6=null,this.c6.clear(),this.c6=null,this.f6.clear(),this.f6=null,hg.bh(this.D6),this.D6=null,this.Nc=null}N6(){const t=this.Nc.wf();t.addEventListener("pretick",this.S6),t.addEventListener("tick2",this.v6),t.addEventListener("beforelayoutchange",this.x6),t.addEventListener("layoutchange",this.G6),t.addEventListener("instancedestroy",this._6),t.addEventListener("beforeload",this.E6),t.addEventListener("afterload",this.A6),t.addEventListener("afterlayoutstart",this.O6)}k6(){const t=this.Nc.wf();t.removeEventListener("pretick",this.S6),t.removeEventListener("tick2",this.v6),t.removeEventListener("beforelayoutchange",this.x6),t.removeEventListener("layoutchange",this.G6),t.removeEventListener("instancedestroy",this._6),t.removeEventListener("beforeload",this.E6),t.removeEventListener("afterload",this.A6),t.removeEventListener("afterlayoutstart",this.O6)}AG(t){this.h6.$u(t);const s=hg.W6.B6(t,this);this.$u(s),this.j6(s),this.f6.set(s.Ec(),0)}V6(t){const s=this.U6(),i=t.nU(),e=s.qs(i),n=hg.W6.V6(`${i}:${this.f6.get(i)}`,e,this);return this.H6(i),this.$u(n),n}H6(t){this.f6.set(t,this.f6.get(t)+1)}q6(){for(const t of this.l6){if(t.z6())continue;const s=t.nU();this.H6(s)}}J6(){for(const t of this.f6.keys())this.f6.set(t,0)}$u(t){this.l6.push(t),this.u6.set(t.Ec().toLowerCase(),t)}Zf(t){t.Y6(),t.z6()||(hg._h(this.l6,t),hg._h(this.d6,t),hg._h(this.p6,t),hg._h(this.m6,t),this.u6.delete(t.Ec().toLowerCase()),this.X6(t),t.Az()||t.qn())}xU(t){this.Nc.xU(t,this.a6,null)}$$(){return this.Nc}U6(){return this.h6}Z6(t){this.a6=t}K6(){return this.a6}*Q6(){for(const t of this.l6)yield t}*t8(){for(const t of this.p6)yield t}s8(t,s){this.c6.has(t)||this.c6.set(t,new Set),this.c6.get(t).add(s)}j6(t){for(const s of t.i8())this.s8(s,t)}X6(t){for(const[s,i]of this.c6.entries())i.has(t)&&(i.delete(t),0===i.size&&this.c6.delete(s))}e8(t){if(this.c6.has(t))return this.c6.get(t)}n8(t,s){if(s)for(const i of this.l6)if(s.every((t=>i.r8(t.jq,t.trackId)))&&i.Ec().includes(t.Ec()))return i}h8(t){return this.u6.get(t.toLowerCase())||null}o8(t){for(const s of this.d6)if(s.Ec()===t)return s;for(const s of this.p6)if(s.Ec()===t)return s;return null}*a8(t){if(og.test(t)){let s;og.lastIndex=0;const i=new Set;do{if(s=og.exec(t),s){const t=s[1].split(",");for(const s of t)i.add(s)}}while(s);for(const t of i.values()){const s=this.h8(t);s&&(yield s)}i.clear()}else{const s=this.h8(t);s&&(yield s)}}*l8(t){for(const s of this.l6)s.Dz(t)&&(yield s)}u8(t){this.d6.includes(t)||this.d6.push(t),this.c8()}f8(t){hg._h(this.p6,t),this.d8()}p8(t){this.p6.includes(t)?(t.m8(!0),t.g8(!1),t.y8(!1)):(t.m8(!1),t.g8(!0),t.y8(!1),this.d6.includes(t)||this.d6.push(t)),this.c8()}w8(t){t.m8(!1),t.g8(!1),t.S8(),hg._h(this.d6,t),this.d8()}b8(t){t.m8(!1),t.g8(!1),this.p6.includes(t)&&(t.y8(!0),this.m6.push(t),hg._h(this.p6,t)),this.d6.includes(t)&&t.y8(!0)}v8(t){t.m8(!1),t.g8(!1),t.y8(!1),t.Vz(1),hg._h(this.p6,t)}M8(t){this.b8(t),t.S8()}b6(){const t=this.$$();if(t.i4())return;if(!this.g6)return;if(this.y6)return;let s=0;for(t.AU()&&(s=performance.now()),this.w6=!0;this.d6.length;){const t=this.d6.pop();t.x8()?(t.T8(),this.m6.push(t)):(t.G8(),this.p6.push(t)),0!==t.I8()&&(this.L6=1)}const i=this.Nc._8(),e=this.Nc.C8(),n=this.Nc.SN();for(let t=this.p6.length-1;t>=0;t--){const s=this.p6[t];s&&s.E8(i,n,e)}this.w6=!1,t.AU()&&globalThis.RU.P8(performance.now()-s),0!==this.L6&&t.w$()}M6(){const t=this.$$();if(t.i4())return;if(!this.g6)return;if(this.y6)return;let s,i=0;t.AU()&&(i=performance.now());for(let t=0,i=this.m6.length;t<i;t++){const i=this.m6[t];s||(s=new Set),i.Y6(),this.A8(i),s.add(i)}if(s){hg.Ph(this.m6,s),this.L6=0;for(let t=0,s=this.p6.length;t<s;t++)if(0!==this.p6[t].I8()){this.L6=1;break}}this.d8(),t.AU()&&globalThis.RU.P8(performance.now()-i)}A8(t){t.Az()||t.O8()&&t.F8()&&t.D8()&&t.L8()}c8(){this.g6||(this.g6=!0)}d8(){this.m6.length||this.p6.length||this.d6.length||this.w6||(this.g6=!1)}T6(){for(this.y6=!0;this.d6.length;)this.w8(this.d6.pop());const t=new Set;for(const s of this.p6)s.T6()&&(s.Y6(),t.add(s));hg.Ph(this.p6,t),t.clear();for(const s of this.m6)s.T6()&&(s.Y6(),t.add(s));hg.Ph(this.m6,t),this.d8();for(const t of this.l6)t.k8()}I6(){this.y6=!1}C6(t){const s=t.WV(),i=this.e8(s);if(i)if(this.Nc.i4())this.D6.push(t);else for(const t of i)t.z6()||(t.Az()?this.Zf(t):t.O8()||(this.A8(t),this.Zf(t)))}P6(){for(const t of this.d6.map((t=>t)))this.A8(t),this.Zf(t);for(const t of this.p6.map((t=>t)))this.A8(t),this.Zf(t)}R6(){for(const t of this.D6)this.C6(t);hg.bh(this.D6);for(const t of this.l6)t.R6()}F6(){const t=this.Nc.qN().VN();if(t)for(const s of this.l6){const i=s.N8();i&&t.Ec()===i&&this.p8(s)}}b3(){return{timelinesJson:this.B8(),scheduledTimelinesJson:this.W8(),playingTimelinesJson:this.j8(),markedForRemovalTimelinesJson:this.V8(),hasRuntimeListeners:this.g6,changingLayout:this.y6,isTickingTimelines:this.w6}}v3(t){t&&(this.J6(),this.U8(t.timelinesJson),this.H8(t.scheduledTimelinesJson),this.q8(t.playingTimelinesJson),this.z8(t.markedForRemovalTimelinesJson),this.g6=!t.hasRuntimeListeners,this.y6=!!t.changingLayout,this.w6=!!t.isTickingTimelines,this.q6(),this.c8(),this.d8())}B8(){return this.l6.map((t=>t.b3()))}U8(t){for(const s of t){let t=this.h8(s.name);if(t)t.v3(s);else{const i=this.J8(s);if(!i)continue;const e=this.h8(i);t=this.V6(e),t.v3(s)}t.Y8()||this.Zf(t)}}J8(t){const s=t.name.split(":");return s&&2===s.length?s[0]:null}W8(){return this.X8(this.d6)}H8(t){this.Z8(t,this.d6)}j8(){return this.X8(this.p6)}q8(t){this.Z8(t,this.p6)}V8(){return this.X8(this.m6)}z8(t){this.Z8(t,this.m6)}K8(t,s){if(!s)return!1;for(const i of s)if(i===t.Ec())return!0;return!1}X8(t){return t.map((t=>t.Ec()))}Z8(t,s){const i=new Set;for(const e of s)this.K8(e,t)||i.add(e);if(hg.Ph(s,i),t){const i=t=>s=>s.Ec()===t;for(const e of t){const t=this.h8(e);t&&(s.find(i(e))||s.push(t))}}}}}{const ag=self._s,lg=100,ug=.01,cg=25,fg=20,dg=5,pg=[0,0],mg=[0,0],gg=[0,0],yg=[0,0,0,0,0],wg=new Array(4),Sg=[{x:0,y:0,t:0,vt:0},{x:0,y:0,t:0,vt:0},{x:0,y:0,t:0,vt:0}],bg={x:0,y:0,t:0,vt:0};ag.Q8=class{constructor(t,s){this.t7=!1,this.s7=t,this.i7=[];let i=null;if(i=s?this.s7.e7(s):ag.Bh(this.s7.n7()),!i)return;const e=i.uJ("offsetX"),n=i.uJ("offsetY");if(!e||!n)return;this.r7=e,this.h7=n;const r=e.o7(),h=n.o7();for(let t=1,s=Math.min(r.length,h.length);t<s;++t){const s=r[t],i=(s.a7(),s.l7()),e=h[t],n=(e.a7(),e.l7());i&&"cubic-bezier"===i.u7()&&n&&"cubic-bezier"===n.u7()?this.i7.push(ag.Hn(ag.c7,i,n,s,e,this.i7.length)):(i&&"line"===i.u7()&&n&&n.u7(),this.i7.push(ag.Hn(ag.f7,s,e,this.i7.length)))}this.t7=!0}qn(){for(const t of this.i7)t.qn();ag.bh(this.i7),this.i7=null,this.s7=null,this.r7=null,this.h7=null}d7(){return this.t7}p7(){return this.i7}m7(t){const s="relative"===this.r7.g7()?t.HM():0,i="relative"===this.h7.g7()?t.JM():0;for(const t of this.i7)t.m7(s,i)}Nw(t,s,i){let e=NaN,n=this.i7.length;for(let i=0;i<n;i++){const n=this.i7[i];if("cubic-bezier"===n.DI()){const i=n.Nw(t,s);(isNaN(e)||i[3]<e)&&(e=i[3],gg[0]=i[2],gg[1]=n.tk())}}return gg}y7(t,s,i){const e=i.w7;ag.te(e[0])||(e[0]=0),ag.te(e[1])||(e[1]=1);let n=NaN,r=this.i7.length;for(let i=0;i<r;i++){const r=this.i7[i];if("cubic-bezier"===r.DI()){const i=r.S7(t,s,e);(isNaN(n)||i[3]<n)&&(n=i[3],gg[0]=i[2],gg[1]=r.tk())}}return gg}b7(t,s){return this.i7[s].b7(t)}v7(t,s){return this.i7[s].v7(t)}},ag.c7=class{constructor(t,s,i,e,n){this.Pw=n;const r=t.M7("cubic-bezier"),h=i.M7("cubic-bezier"),o=s.M7("cubic-bezier"),a=e.M7("cubic-bezier");this.x7=t.T7(),this.G7=s.T7(),this.I7=t.T7()+r._7(),this.C7=s.T7()+o._7(),this.E7=i.T7()+h.P7(),this.A7=e.T7()+a.P7(),this.R7=i.T7(),this.O7=e.T7(),this.F7=0,this.D7=0,this.L7=0,this.k7=0,this.N7=0,this.B7=0,this.W7=0,this.j7=0,this.V7=0,this.U7=0,this.H7=0,this.q7=0,this.z7=0,this.J7=0,this.Y7=0,this.X7=0,this.Z7=0,this.K7=0,this.Q7=0,this.t9=0,this.s9=NaN,this.t7=!1,this.i9=100,this.e9=new Array(this.i9+1),this.e9[0]=0,this.n9=0,this.r9=[],this.h9=[];for(let t=0;t<100;t++)this.h9.push({x:0,y:0,t:0,vt:0});this.o9()}qn(){ag.bh(this.e9),this.e9=null,ag.bh(this.r9),this.r9=null,ag.bh(this.h9),this.h9=null}DI(){return"cubic-bezier"}tk(){return this.Pw}a9(){return Math.floor(this.n9/25)}l9(){return 1/this.a9()}m7(t,s){this.u9=t,this.c9=s,this.e9=new Array(this.i9+1),this.e9[0]=0,this.o9(),this.F7=this.x7+this.u9,this.D7=this.G7+this.c9,this.L7=this.I7+this.u9,this.k7=this.C7+this.c9,this.N7=this.E7+this.u9,this.B7=this.A7+this.c9,this.W7=this.R7+this.u9,this.j7=this.O7+this.c9,this.V7=3*(this.L7-this.F7),this.U7=3*(this.k7-this.D7),this.H7=3*(this.N7-this.L7),this.q7=3*(this.B7-this.k7),this.z7=3*(this.W7-this.N7),this.J7=3*(this.j7-this.B7),this.Y7=3*(this.L7-this.F7),this.X7=3*(this.F7+this.N7-2*this.L7),this.Z7=this.W7-this.F7+3*(this.L7-this.N7),this.K7=3*(this.k7-this.D7),this.Q7=3*(this.D7+this.B7-2*this.k7),this.t9=this.j7-this.D7+3*(this.k7-this.B7)}Map(t){if(!this.t7)return NaN;const s=this.f9(t);return mg[0]=this.d9(s),mg[1]=this.p9(s),mg}Nw(t,s){const i=this.m9(100),e=this.g9(t,s,i),n=this.y9(t,s,i,e);return yg[0]=n.x,yg[1]=n.y,yg[2]=n.t,yg[3]=n.vt,yg}S7(t,s,i){const e=this.m9(100),n=this.w9(t,s,e,i),r=this.y9(t,s,e,n);return yg[0]=r.x,yg[1]=r.y,yg[2]=r.t,yg[3]=r.vt,yg}b7(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.V7+e*this.H7+n*this.z7,h=i*this.U7+e*this.q7+n*this.J7,o=ag.sr(r,h);return pg[0]=r/o,pg[1]=h/o,pg}v7(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.V7+e*this.H7+n*this.z7,h=i*this.U7+e*this.q7+n*this.J7;return Math.atan2(h,r)}f9(t){if(!this.t7)return;let s=t*this.e9[this.i9],i=0,e=this.i9,n=0;for(;i<e;)n=i+((e-i)/2|0),this.e9[n]<s?i=n+1:e=n;this.e9[n]>s&&n--;const r=this.e9[n];return r===s?n/this.i9:(n+(s-r)/(this.e9[n+1]-r))/this.i9}d9(t){return this.t7?self.ju.rc("cubicbezier")(t,this.x7+this.u9,this.I7+this.u9,this.E7+this.u9,this.R7+this.u9):NaN}p9(t){return this.t7?self.ju.rc("cubicbezier")(t,this.G7+this.c9,this.C7+this.c9,this.A7+this.c9,this.O7+this.c9):NaN}m9(t){if(t=t||100,this.r9.length>=t)return this.r9;this.r9=new Array(t),t++;for(let s=0;s<t-1;s++){const i=s/(t-1),e=i**2,n=i**3,r=this.Y7*i,h=this.X7*e,o=this.Z7*n,a=this.K7*i,l=this.Q7*e,u=this.t9*n,c=this.F7+r+h+o,f=this.D7+a+l+u;this.h9[s].x=c,this.h9[s].y=f,this.h9[s].t=i,this.h9[s].vt=0,this.r9[s]=this.h9[s]}return this.r9}g9(t,s,i,e=null,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.s9))for(let e=0;e<100;e++){const h=i[e],o=h.x-t,a=h.y-s;h.vt=o*o+a*a,h.vt<n&&(n=h.vt,r=e)}else{for(let e=this.s9;e<this.s9+5&&!(e>=i.length);e++){const h=i[e],o=h.x-t,a=h.y-s;h.vt=o*o+a*a,h.vt<n&&(n=h.vt,r=e)}for(let e=this.s9;e>this.s9-5&&!(e<0);e--){const h=i[e],o=h.x-t,a=h.y-s;h.vt=o*o+a*a,h.vt<n&&(n=h.vt,r=e)}}return this.s9=r,r}w9(t,s,i,e,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.s9))for(let h=0;h<100;h++){const o=i[h],a=o.x-t,l=o.y-s;o.vt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.vt<n&&(n=o.vt,r=h)}else{for(let h=this.s9;h<this.s9+5&&!(h>=i.length);h++){const o=i[h],a=o.x-t,l=o.y-s;o.vt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.vt<n&&(n=o.vt,r=h)}for(let h=this.s9;h>this.s9-5&&!(h<0);h--){const o=i[h],a=o.x-t,l=o.y-s;o.vt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.vt<n&&(n=o.vt,r=h)}}return this.s9=r,r}y9(t,s,i,e){let n=i[e],r=1,h=Number.MAX_SAFE_INTEGER;t:do{const r=i.length;let o=0===e?0:e-1,a=e===r-1?r-1:e+1,l=i[o].t,u=(i[a].t-l)/4;if(u<.001)break;wg[0]=i[o];for(let i=1;i<=2;i++){const r=l+i*u,o=r**2,a=r**3,c=this.Y7*r,f=this.X7*o,d=this.Z7*a,p=this.K7*r,m=this.Q7*o,g=this.t9*a,y=this.F7+c+f+d,w=this.D7+p+m+g,S=y-t,b=w-s,v=S*S+b*b;if(v<h){h=v,e=i,bg.x=y,bg.y=w,bg.t=r,bg.vt=v,n=bg;break t}const M=Sg[i-1];M.x=y,M.y=w,M.t=r,M.vt=v,wg[i]=M}wg[3]=i[a],i=wg}while(r++<20);return n}o9(){this.t7=!0;let t=this.d9(0),s=this.p9(0),i=0;for(let e=1;e<=this.i9;e++){const n=this.d9(.01*e),r=this.p9(.01*e),h=t-n,o=s-r;i+=ag.sr(h,o),this.e9[e]=i,t=n,s=r}this.n9=i}},ag.f7=class{constructor(t,s,i){this.Pw=i,this.S9=t.T7(),this.b9=s.T7(),this.u9=0,this.c9=0}qn(){}DI(){return"line"}tk(){return this.Pw}m7(t,s){this.u9=t,this.c9=s}HM(){return this.S9+this.u9}JM(){return this.b9+this.c9}}}{const vg=self._s,Mg=0,xg=1;vg.W6=class extends vg.Vn{constructor(t,s,i){super(),this.Nc=i.$$(),this.v9=i,this.M9=s,this.Yn=t,this.x9=[],this.T9=0,this.G9=null,this.I9=0,this._9(),this.C9=null,this.E9=null,this.P9=0,this.A9=0,this.R9=1,this.O9=0,this.F9=-1,this.D9=1,this.L9=!1,this.k9=!1,this.N9=!1,this.B9=!0,this.W9=!1,this.j9=!1,this.V9=-1,this.U9=!1,this.H9=!1,this.q9=!1,this.z9=!1,this.J9=NaN,this.Y9=[""],this.X9="",this.Z9=!1,this.L6=0,this.K9=0,this.Q9=null,this.ttt=null}static B6(t,s){const i=s.U6(),e=i.stt(),n=i.qs(t[e]),r=vg.Hn(vg.W6,t[e],n,s);return r.itt(!0),r}static V6(t,s,i){return vg.Hn(vg.W6,t,s,i)}qn(){if(this.Az())return;const t=this.Nc.wf();this.v9.w8(this),this.v9.M8(this);for(const t of this.x9)t.qn();vg.bh(this.x9),this.x9=null,this.Nc=null,this.v9=null,this.M9=null,this.W9=!0,this.C9=null,this.E9=null,this.ett(t)}ett(t){const s=vg.Hn(vg.Event,"timelinestatereleased");s.ntt=this,t.dispatchEvent(s)}DI(){return 0}_9(){for(const t of this.M9.ott().htt())this.T9=this.x9.push(vg.att.AG(this,t))}ltt(){return this.v9}$$(){return this.Nc}n7(){return this.x9}utt(t,s,i,e){if(!this.K9)return;let n;for(let r=0;r<this.x9.length;r++){let h=this.x9[r];if(t!==h.nJ())continue;const o=h.uJ(i);o&&s.constructor===o.ctt().constructor&&o.g7()===e.g7()&&(n||(n=[]),n.push(o))}return n}Y8(){return!!this.x9.length}e7(t){for(const s of this.x9)if(vg.Ke(s.aJ(),t))return s;return null}ftt(t){for(const s of this.x9)if(!s.dtt()&&vg.Ke(s.Ec(),t))return s;return null}RY(t){this.Yn=t}Ec(){return this.Yn}ptt(){return this.M9}nU(){return this.M9.Ec()}Nz(){return this.M9.Nz()}kz(t){this.M9.kz(t)}mtt(){return this.M9.mtt()}gtt(t){this.M9.gtt(t)}ytt(){return this.M9.ytt()}wtt(t){this.M9.wtt(t)}g7(){return this.M9.g7()}Stt(t){this.M9.g7(t)}eJ(t){for(const s of this.n7())s.eJ(t)}Bz(){return this.M9.Bz()}$z(t){return this.M9.$z(t)}jz(){return this.M9.jz()}Wz(t){return this.M9.Wz(t)}ez(){return this.M9.ez()}btt(t){return this.M9.btt(t)}Vz(t){return this.R9=t}Uz(){return this.R9}N8(){return this.M9.N8()}vtt(){return this.M9.vtt()}Mtt(){return this.M9.Mtt()}xtt(){return this.O9}Ttt(){return!this.IsPlaying()||this.R9>0}zz(){return this.C9||(this.C9=new Promise((t=>{this.E9=t}))),this.C9}S8(){this.C9&&(this.E9(),this.C9=null,this.E9=null)}Gtt(t){this.Y9=vg.W6.Itt(t),this.Z9=!0}qz(){return this.Y9}_tt(){return this.Z9&&(this.X9=this.Y9.join(" ")),this.Z9=!1,this.X9}Dz(t){if(!this.Y9)return!1;if(!this.Y9.length)return!1;const s=vg.W6.Itt(t);return!!s&&!!s.length&&s.every(vg.W6.Ctt,this)}Ett(){vg.R$.Ptt&&this.constructor===vg.W6&&(vg.R$.Ptt.P$.Att(this),this.v9.xU(vg.R$.Ptt.P$.Rtt),this.v9.xU(vg.R$.Ptt.P$.Ott),this.v9.xU(vg.R$.Ptt.P$.Ftt),this.v9.xU(vg.R$.Ptt.P$.Dtt),vg.R$.Ptt.P$.Ltt())}ktt(){this.V9=this.Nc.mN()}L8(){this.q9||(this.q9=!0,vg.R$.Ptt&&this.constructor===vg.W6&&(vg.R$.Ptt.P$.Att(this),this.v9.xU(vg.R$.Ptt.P$.Ntt),this.v9.xU(vg.R$.Ptt.P$.$tt),this.v9.xU(vg.R$.Ptt.P$.Btt),this.v9.xU(vg.R$.Ptt.P$.Wtt),vg.R$.Ptt.P$.Ltt()))}m8(t){this.L9=t}jtt(){return this.V9===this.Nc.mN()}IsPlaying(t=!1){return!!this.jtt()||!(!this.Vtt()||t)||this.L9}Utt(){return this.IsPlaying(!0)}Xz(){return this.Htt()}Htt(){return!(this.Az()||this.Vtt()||this.Utt()||this.F8())}g8(t){this.k9=t}Vtt(){return this.k9}qtt(t){this.B9=t;const s=this.Bz(),i=this.jz();if(s||i){if(s&&!i);else if(!s&&i){const t=this._F();1===this.O9&&(t<=0||t>=this.Nz())&&(this.B9=!0)}}else{const t=this._F();(t<=0||t>=this.Nz())&&(this.B9=!0)}}F8(){return this.B9}Az(){return this.W9}y8(t){this.j9=t}x8(){return this.j9}ztt(t){this.U9=t}Jtt(){return this.U9}itt(t){this.H9=!!t}z6(){return this.H9}D8(){return this.N9}_F(){return this.P9}Lz(t){const s=this._F();this.Ytt(t),this.qtt(!1),this.F8()||this.ztt(!0),(this.Utt()||this.Vtt()||!this.N9)&&(this.Utt()||this.Vtt()||this.N9?this.Utt()?this.Oz():this.Vtt()&&(this.v9.w8(this),this.Xtt()):this.Xtt()),this.Ztt(),this.Ktt(this._F(),!1,!0,!0,s),this.Qtt(),this.L6&&this.$$().w$(),this.tst()}Ytt(t){vg.te(t)||(t=this.Nz()),t<0?this.P9=0:t>=this.Nz()?this.P9=this.Nz():this.P9=t}sst(t){vg.te(t)||(t=this.Nz()),t<0?this.P9=0:t>=this.Nz()?this.P9=this.Nz():this.P9=t;for(const t of this.x9)t.ist()}tst(){vg.R$.Ptt&&this.constructor===vg.W6&&(vg.R$.Ptt.P$.Att(this),this.v9.xU(vg.R$.Ptt.P$.est),this.v9.xU(vg.R$.Ptt.P$.nst),this.v9.xU(vg.R$.Ptt.P$.rst),vg.R$.Ptt.P$.Ltt())}hst(){if(this.Bz())return!0;if(this.jz()&&1===this.O9){if(this.Ttt()){if(this._F()>=this.Nz())return!1}else if(this._F()<=0)return!1}else if(!this.Bz()&&!this.jz())if(this.Ttt()){if(this._F()>=this.Nz())return!1}else if(this._F()<=0)return!1;return!0}Fz(){this.Az()||this.hst()&&this.Play(!0)}Play(t=!1){return!this.Az()&&!this.Vtt()&&(this.Utt()&&this.jtt()?this.ost():!this.Utt()&&!!(this.F8()||t||this.Jtt())&&this.ast())}ost(){return this.ztt(!1),this.v9.f8(this),this.v9.p8(this),this.zz(),!0}ast(){return this.ztt(!1),this.v9.p8(this),this.zz(),!0}Oz(t=!1){this.Az()||(this.qtt(t),this.v9.b8(this),this.F8()&&this.S8())}$f(t=!0,s=!1){if(this.Az())return;if(!this.Utt()&&this.Vtt())return this.v9.w8(this);if(this.F8())return;this.Oz(!0),this.Ttt()?this.Ytt(0):this.Ytt(this.Nz());const i=this._F();this.Ztt(),s?this.lst(i):this.Ktt(i,!1,!1,!0),t&&this.tst(),this.Qtt(),this.L6&&t&&this.$$().w$()}ust(){this.$f(!1,!0)}lst(t){this.Ktt(t,!1,!1,!0,NaN,!1,!0)}T6(){return!!this.Az()||!(!this.$$().i4()&&this.cst())&&(this.v9.v8(this),this.$$().i4()||this.ust(),!0)}Xtt(){this.G8(!0)}T8(){this.G8(!1,!0),this.m8(!1),this.g8(!1)}G8(t=!1,s=!1){if(!this.x8()||s)if(t){this.q9=!1,this.N9=!0,this.z9=!0,this.Ztt();for(const t of this.x9)t.G8();this.Qtt()}else if(this.m8(!0),this.g8(!1),this.Ett(),this.F8()){this.V9=-1,0!==this.O9&&(this.R9=Math.abs(this.R9)),this.O9=0,this.F9=-1,this.D9=1,this.B9=!1,this.q9=!1,this.N9=!0,this.z9=!0,this.Ttt()?this.Ytt(0):this.Ytt(this.Nz()),this.Ztt();for(const t of this.x9)t.G8();this.Qtt()}else{-1!==this.F9&&(this.O9=this.F9),this.z9=!0,this.q9=!1,this.Ztt();for(const t of this.x9)t.fst();this.Qtt()}}I8(){return this.L6}Ztt(){this.K9=0;for(const t of this.x9)t.vA()&&(this.K9=1)}Qtt(){this.L6=0;for(const t of this.x9)t.dst(),0===this.L6&&1===t.I8()&&(this.L6=1),this.G9||1!==t.pst()||(this.G9||(this.G9=[]),this.I9=this.G9.push(t))}E8(t,s,i){if(this.Mtt()){if(0===t&&0===this.J9)return;this.J9=t,t=i}else{if(0===i&&0===this.J9)return;this.J9=i,t=i,s=1}const e=this.P9+this.A9,n=e+t*s*this.R9,r=this.M9.mst;n<0?(this.P9=0,this.A9=-n):n>=r?(this.P9=r,this.A9=this.P9-n):(this.P9=n,this.A9=0);let h=!1,o=!1;const a=this.Bz(),l=this.jz();let u;a||l?a&&!l?this.R9>0?this.P9>=r&&(this.sst(0),o=!0):this.P9<=0&&(this.sst(r),o=!0):!a&&l?this.R9>0?this.P9>=r&&(this.Ytt(r),this.Vz(-1*this.Uz()),o=!0,1===this.O9?this.D9<this.ez()?(this.D9++,this.O9=0):h=!0:0===this.O9&&(this.O9=1)):this.P9<=0&&(this.Ytt(0),this.Vz(-1*this.Uz()),o=!0,1===this.O9?this.D9<this.ez()?(this.D9++,this.O9=0):h=!0:0===this.O9&&(this.O9=1)):a&&l&&(this.R9>0?this.P9>=r&&(this.Ytt(r),this.Vz(-1*this.Uz()),o=!0,this.O9++,vg.wrap(this.O9,0,2)):this.P9<=0&&(this.Ytt(0),this.Vz(-1*this.Uz()),o=!0,this.O9++,vg.wrap(this.O9,0,2))):this.R9>0?this.P9>=r&&(this.D9<this.ez()?(this.D9++,this.sst(0),o=!0):(this.Ytt(r),h=!0)):this.P9<=0&&(this.D9<this.ez()?(this.D9++,this.sst(r),o=!0):(this.Ytt(0),h=!0));const c=this.T9;if(h){for(u=0;u<c;u++)this.x9[u].gst();return this.Oz(!0),void this.ktt()}const f=this.I9;for(u=0;u<f;u++)this.G9[u].yst();if(1===this.K9)for(u=0;u<c;u++){const t=this.x9[u],s=t.wst();this.P9-s<0&&e-s>0?(this.P9=s<0?0:s>=r?r:s,t.Sc(s,!0,!1,o,this.z9,!1)):t.Sc(this.P9,!0,!1,o,this.z9,!1)}else for(u=0;u<c;u++)this.x9[u].Sc(this.P9,!0,!1,o,this.z9,!1);if(!this.IsPlaying()&&this.Q9){const t=this.Q9._F()+this.Q9.bst().Sst().wst(),s=this.P9-t;this.P9-=s,0!==this.A9&&(this.A9-=s),this.Q9=null}for(u=0;u<f;u++)this.G9[u].vst();this.z9&&(this.z9=!1)}Mst(t){this.Q9=t}xst(){return this.Q9}Ktt(t,s=!1,i=!1,e=!1,n=NaN,r=!1,h=!1){for(const t of this.x9)t.yst();for(const r of this.x9){let o=t;if("number"==typeof n&&!isNaN(n)){const t=this._F()-r.wst(),s=n-r.wst();t<0&&s>0&&(o=r.wst(),this.Ytt(o))}r.Sc(o,s,i,e,this.z9,h)}for(const t of this.x9)t.vst();this.z9&&r&&(this.z9=!1)}Tst(){const t=this.M9.ott().Gst(),s=vg.att.AG(this,t);return this.T9=this.x9.push(s),s}Y6(){if(!this.Az())for(const t of this.x9)t.Ist()}k8(){for(const t of this.x9)t.k8()}_st(){for(const t of this.x9)t.Cst()}Est(t,s,i){if(s){if("number"==typeof i&&i>=0){const t=this.x9[i];if(!t)return;return t.Pst(s),void this.v9.s8(s.WV(),this)}for(const i of this.x9)if(i.dtt()){if(t){if(i.aJ()!==t)continue;i.Pst(s),this.v9.s8(s.WV(),this);break}if(!i.Ast()){i.Pst(s),this.v9.s8(s.WV(),this);break}}}}r8(t,s){for(const i of this.x9)if(i.dtt())if(s){if(s===i.aJ()&&t===i.nJ())return!0}else if(t===i.nJ())return!0;return!1}O8(){return this.x9.some((t=>!t.dtt()||t.Rst()))}cst(){return this.x9.some((t=>{if(t.dtt()){if(!t.Rst())return!1;const s=t.WV();return!!s&&s.x0()}return!1}))}uJ(t){for(const s of this.n7())for(const i of s.Ost())if(i.Fst()===t)return i}Dst(t){for(const s of this.x9)if(t===s.nJ())return s;return null}Lst(t){let s=t?t.split(" "):[];const i=new Set(s.map((t=>t.toLowerCase().trim())));s=[...i.values()];for(const t of this.n7())for(const i of t.kst())if(s.every((t=>i.Nst(t))))return i}i8(){const t=[];for(const s of this.n7())t.push(s.WV());return t.filter((t=>t))}R6(){for(const t of this.n7())t.R6()}b3(){return{tracksJson:this.$st(),name:this.Yn,playheadTime:this._F(),playbackRate:this.R9,pingPongState:this.O9,resumePingPongState:this.F9,currentRepeatCount:this.D9,isPlaying:this.L9,isScheduled:this.k9,initialStateSet:this.N9,finishedTriggers:this.q9,complete:this.B9,released:this.W9,markedForRemoval:this.j9,completedTick:this.V9,implicitPause:this.U9,isTemplate:this.H9,tags:this.Y9.join(" "),stringTags:this.X9,tagsChanged:this.Z9,firstTick:this.z9}}v3(t){t&&(this.Bst(t.tracksJson),this.Yn=t.name,this.P9=t.playheadTime,this.R9=t.playbackRate,this.O9=t.pingPongState,this.F9=t.hasOwnProperty("resumePingPongState")?t.resumePingPongState:-1,this.D9=t.currentRepeatCount,this.L9=!!t.isPlaying,this.k9=!!t.isScheduled,this.N9=!!t.initialStateSet,this.q9=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.B9=!!t.complete,this.W9=!!t.released,this.j9=!!t.markedForRemoval,this.V9=t.completedTick,this.U9=!!t.implicitPause,this.H9=!!t.isTemplate,this.Y9=t.tags.split(" "),this.X9=t.stringTags,this.Z9=!!t.tagsChanged,this.z9=!!t.firstTick)}$st(){return this.x9.map((t=>t.b3()))}Bst(t){this._st(),t.forEach(((t,s)=>{this.x9[s].v3(t)})),this.x9.filter((t=>t.Rst()))}static Ctt(t){const s=this.qz();return""===t?1===s.length&&""===s[0]:s.map((t=>t.toLowerCase())).includes(t.toLowerCase())}static Itt(t){if(vg.Te(t))return t.slice(0);if(vg.le(t))return t.split(" ");throw new Error("invalid tags")}Wst(){return this.ttt||(this.ttt=vg.Hn(self.Kz,this)),this.ttt}}}{const Tg=self._s,Gg=0,Ig=1,_g=2;Tg.att=class extends Tg.Vn{constructor(t,s){super(),this.s7=t,this.jst=s,this.Vst=s.ott(),this.Ust=NaN,this.Hst=NaN,this.qst=null,this.zst=null,this.Jst=!1,this.mA=s.wst()>0,this.Yst=!1,this.Xst=!1,this.Zst=NaN,this.Kst=null,this.Qst=this.jst.bst().tit(),this.sit=[],this.iit(),this.eit=0,this.L6=0,this.nit=0}static AG(t,s){return Tg.Hn(Tg.att,t,s)}qn(){this.Qst=null;for(const t of this.sit)t.qn();Tg.bh(this.sit),this.sit=null,this.s7=null,this.qst=null,this.zst=null,this.jst=null,this.Kst=null}iit(){for(const t of this.jst.hit().rit())this.sit.push(Tg.oit.AG(this,t))}Ist(){for(const t of this.sit)t.Ist()}k8(){for(const t of this.sit)t.k8();this.qst=null,this.zst=null}ait(){return this.s7}$$(){return this.s7.$$()}kst(){return this.Qst||(this.Qst=this.jst.bst().tit()),this.Qst}Ost(){return this.sit}uJ(t){for(let s=0;s<this.sit.length;s++){const i=this.sit[s];if(i.Fst()===t)return i}}lit(){this.qst||this.nJ()}uit(){return!!this.qst&&!this.qst.zJ()}Rst(){if(!this.dtt())return!1;const t=this.cit(),s=this.$$().h$(t);return!!s&&!s.zJ()}WV(){if(!this.dtt())return;const t=this.fit();return-1!==t?this.$$().d0(t):void 0}dit(){return this.s7.n7().indexOf(this)}Cst(){this.qst=null,this.Ust=NaN,this.zst=null,this.Hst=NaN,this.Jst=!0}Ast(){return!!this.qst}nJ(){if(this.Jst)return;if(this.qst&&this.uit())return this.qst;const t=this.cit();return this.qst=this.$$().h$(t),this.qst}Pst(t){if(this.Jst=!1,this.qst!==t){this.k8(),this.qst=t,this.Hst=t.WV().tk(),this.Ust=t.tU(),this.zst=t.c$();for(const s of this.pit()){const i=s.mit,e=s.git;switch(i.yit()){case"instance-variable":{e.wit();const i=t.WV(),n=i.Sit(s.name),r=i.bit(n),h=i.vit(n);r===s.name&&h===s.type&&e.Mit(n);break}case"behavior":{const i=s.$q,n=this.WV(),r=t.WV(),h=e.Wq(r);if(i&&h){const t=i.Ec();n.xit(t),r.xit(t),e.wit(),e.Tit(h.U0())}break}}}}}*pit(){for(const t of this.sit){const s=t.ctt(),i=this.WV(),e={mit:t,git:s};switch(t.yit()){case"world-instance":e.Git=t.Fst();break;case"instance-variable":{const t=s.wit();e.name=i.bit(t),e.type=i.vit(t);break}case"effect":{const t=i.nj(),n=s.Iit(t);e._it=n;break}case"behavior":{const t=s.Wq(i);e.$q=t;break}case"plugin":e.vW=i.MW()}yield e}}c$(){if(this.zst&&this.uit())return this.zst;const t=this.nJ();return t&&(this.zst=t.c$()),this.zst}Sst(){return this.jst}cit(){return isNaN(this.Ust)?this.jst.cit():this.Ust}Cit(t){this.jst.Cit(t)}ytt(){return this.jst.ytt()}wtt(t){this.jst.wtt(t)}g7(){return this.jst.g7()}aJ(){return this.jst.aJ()}wst(){return this.jst.wst()}Eit(){return this.jst.Eit()}Pit(t){this.jst.Pit(t)}Stt(t){this.jst.Stt(t)}eJ(t){for(const s of this.kst())s.eJ(t);for(const s of this.Ost())s.eJ(t)}Ait(){return this.jst.Ait()}Rit(t){this.jst.Rit(t)}fit(){return isNaN(this.Hst)?this.jst.fit():this.Hst}Oit(t){this.jst.Oit(t)}Fit(t){this.jst.Fit(t)}Dit(){const t=this.nJ();return t&&t.Aq().Lit()?t.Aq().Dit():this.jst.Dit()}kit(t){this.jst.kit(t)}Nit(){const t=this.nJ();return t&&t.Aq().Lit()?t.Aq().Nit():this.jst.Nit()}DI(){return this.jst.DI()}Ec(){return this.jst.Ec()}dtt(){return 0===this.DI()}$it(){return 1===this.DI()}Bit(){return 2===this.DI()}Wit(){return this.eit}I8(){return this.L6}pst(){return this.nit}vA(){return this.mA}ist(){for(const t of this.sit)t.ist()}G8(){if(this.lit(),!this.uit()&&this.dtt())return;const t=this.ait().Ttt(),s=t?0:this.Eit();for(const t of this.sit)t.G8(s),0===this.eit&&1===t.Wit()&&(this.eit=1),0===this.L6&&1===t.I8()&&(this.L6=1);this.nit=0,this.sit.some((t=>t.pst()))&&(this.nit=1),this.Kst=t?this.jit(s):this.Vit(s),this.Yst=!1,this.Xst=!1,this.Sc(s),this.Uit(this.Kst)}fst(){if(this.lit(),!this.uit()&&this.dtt())return;const t=this.s7.Ttt(),s=this.s7._F()-this.wst();this.Kst=t?this.jit(s):this.Vit(s);for(const t of this.sit)t.fst(s)}gst(){if(!this.ait().F8()&&(this.lit(),(this.uit()||!this.dtt())&&!this.mA)){const t=this.s7._F();t>=this.wst()+this.Eit()?this.Sc(this.Eit(),!0,!1,!0,!1,!1,!0):t<=0&&this.Sc(0,!0,!1,!0,!1,!1,!0)}}dst(){for(let t=0,s=this.sit.length;t<s;t++){const s=this.sit[t];s.dst(),0===this.eit&&1===s.Wit()&&(this.eit=1),0===this.L6&&1===s.I8()&&(this.L6=1)}}yst(){const t=this.sit.length;for(let s=0;s<t;s++)this.sit[s].yst()}Sc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){this.qst||this.nJ();const o=this.qst&&!this.qst.zJ(),a=0===this.jst.qc;if((o||!a)&&!(r&&a&&this.WV().x0()||(t-=this.wst())<0)){this.Hit(t,s),this.qit(t,s,n),!this.ait().IsPlaying()&&this.ait().xst()&&(t=this.ait().xst()._F());for(let s=0,n=this.sit.length;s<n;s++)this.sit[s].Sc(t,i,e,h);this.zit(t,s),0!==this.eit&&(this.zst||(this.zst=this.qst.c$()),this.zst&&this.zst.KU())}}vst(){const t=this.sit.length;for(let s=0;s<t;s++)this.sit[s].vst()}Hit(t,s){if(s&&this.mA&&!this.Yst){if(this.ait().Ttt()){if(t<0)return}else if(t>this.Eit())return;for(const t of this.sit)t.G8();this.Yst=!0}}zit(t,s){if(s&&this.mA&&!this.Xst)if(this.ait().Ttt()){if(t>=this.Eit()){for(const t of this.sit)t.Sc(this.Eit(),!1,!0);this.Xst=!0}}else if(t<=0){for(const t of this.sit)t.Sc(0,!1,!0);this.Xst=!0}}qit(t,s,i){if(i)return;if(!s)return;if(!Tg.R$.Ptt)return;const e=this.ait();if(e.Ttt()){const s=this.Kst.a7(),i=this.Kst._F(),n=s?s._F():e.Nz();(t<=i||t>=n)&&(this.Kst=this.Vst.Jit(t,this.jst),s&&this.Yit(this.Kst))}else{if(!this.Vst.Xit(t,this.jst))return;this.Kst||(this.Kst=this.Vst.Xit(t,this.jst));const s=this.Kst.Zit(),i=this.Kst._F(),e=s?s._F():0;(t>=i||t<=e)&&(this.Kst=this.Vst.Xit(t,this.jst),this.Kst&&this.Yit(this.Kst))}}jit(t){return this.Vst.Kit(t,this.jst)||this.Vst.Jit(t,this.jst)}Vit(t){return this.Vst.Kit(t,this.jst)||this.Vst.Xit(t,this.jst)}Yit(t,s=!1){if(!Tg.R$.Ptt)return;const i=this.ait(),e=i.ltt();Tg.R$.Ptt.P$.Att(i),Tg.R$.Ptt.P$.Qit(t),e.xU(Tg.R$.Ptt.P$.tet),e.xU(Tg.R$.Ptt.P$.Yit),i.IsPlaying()||s||i.Mst(t),Tg.R$.Ptt.P$.Ltt(i),Tg.R$.Ptt.P$.iet(t)}Uit(t){this.Yit(t,!0)}eet(){return this.jst.bst().net()}ret(){const t=this.jst.hit().het(),s=Tg.oit.AG(this,t);return this.sit.push(s),s}oet(t){this.jst.bst().aet(t)}let(t){for(const s of this.sit)s.let(t)}uet(){for(const t of this.sit)t.uet()}cet(){if(this.lit(),this.uit()||!this.dtt())for(const t of this.sit)t.cet()}fet(){if(this.lit(),!this.uit()&&this.dtt())return;let t=!1;for(const s of this.sit){const i=s.fet();!t&&i&&(t=!0)}if(t){const t=this.eet();t.Lz(this.ait()._F()),t.eJ("noease"),t.Rit(!0),t.Gtt("")}}R6(){isNaN(this.Zst)||this.det(this.Zst),this.Zst=NaN}b3(){const t=this.nJ(),s=t?t.tU():this.cit();return{propertyTracksJson:this.pet(),lastKeyframeDataItemJson:this.met(),initialStateOfNestedSet:this.Yst,endStateOfNestedSet:this.Xst,instanceUid:s,cleared:this.Jst}}v3(t){if(t){this.yet(t.propertyTracksJson),this.wet(t.lastKeyframeDataItemJson),this.Zst=t.instanceUid,this.Yst=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Yst=t.initialStateOfNestedSet),this.Xst=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Xst=t.endStateOfNestedSet),this.Jst=!!t.hasOwnProperty("cleared")&&t.cleared;for(const t of this.sit)0===this.eit&&1===t.Wit()&&(this.eit=1),0===this.L6&&1===t.I8()&&(this.L6=1);this.nit=0,this.sit.some((t=>t.pst()))&&(this.nit=1)}}met(){return this.jst.bst().bet(this.Kst)}pet(){return this.sit.map((t=>t.b3()))}yet(t){t.forEach(((t,s)=>{this.sit[s].v3(t)}))}det(t){if(!Tg.te(t))return;const s=this.$$().h$(t);s&&this.ait().Est(this.jst.aJ(),s,this.dit())}wet(t){const s=this.jst.bst();this.Kst=s.vet(t)}}}{const Cg=self._s;Cg.oit=class extends Cg.Vn{constructor(t,s){super(),this.Met=t,this.xet=s,this.Tet=s.hit(),this.eit=0,this.L6=0,this.nit=0,this.Get=this.ctt(),this.Iet=this.xet.Cet()._et(),this.Eet=null,this.Pet=null}static AG(t,s){return Cg.Hn(Cg.oit,t,s)}qn(){this.Met=null,this.Get&&(this.Get.qn(),this.Get=null),this.Iet=null,this.xet=null,this.Tet=null}Wit(){return this.eit}I8(){return this.L6}pst(){return this.nit}Aet(){return!!this.Pet}Ret(t){this.Pet=t}Oet(){return this.Pet}Fet(){return this.Met}Det(){return this.xet}hit(){return this.Tet}ait(){return this.Met.ait()}$$(){return this.Met.$$()}nJ(){return this.Met.nJ()}ctt(){if(this.Get)return this.Get;let t;switch(this.xet.yit()){case"behavior":t=new Cg.oit.Let(this);break;case"effect":t=new Cg.oit.ket(this),this.L6=1;break;case"instance-variable":t=new Cg.oit.Net(this);break;case"plugin":t=new Cg.oit.$et(this),this.L6=1;break;case"world-instance":t=new Cg.oit.Bet(this),this.L6=1,this.eit=1;break;case"value":t=new Cg.oit.Wet(this);break;case"audio":t=new Cg.oit.jet(this)}return this.Get=t,this.Get}yit(){return this.xet.yit()}Vet(t){this.xet.Vet(t)}Uet(){return this.xet.Het()}qet(t){this.xet.zet(t)}lJ(){return this.ctt().Jet()}Fst(){return this.xet.Yet()}Xet(t){this.xet.Zet(t)}Ket(){return this.xet.DI()}Qet(t){this.xet.tnt(t)}snt(){return this.hit().int(this.xet).DI()}ent(){return this.xet.ent()}nnt(t){this.xet.nnt(t)}rnt(){return this.xet.rnt()}hnt(t){this.xet.hnt(t)}Ait(){return this.xet.Ait()}Rit(t){this.xet.Rit(t)}ytt(){return this.xet.ytt()}wtt(t){this.xet.wtt(t)}g7(){return this.xet.g7()}Stt(t){this.xet.Stt(t)}eJ(t){for(const s of this.ont())s.eJ(t)}ant(){return this.xet.ant()}ont(){return this.Iet||(this.Iet=this.xet.Cet()._et()),this.Iet}o7(){return this.xet.Cet().o7()}lnt(t){return this.Tet.lnt(t,this.xet)}unt(t){return this.Tet.unt(t,this.xet)}cnt(t){let s,i=this.Tet.lnt(t,this.xet);return i?s=this.Tet.fnt(t,this.xet):(i=this.Tet.unt(t,this.xet),s=this.Tet.dnt(t,this.xet)),{start:i,end:s}}*pnt(){for(const t of this.ont())yield t.T7()}*mnt(){for(const t of this.ont())yield t._F()}Ist(){this.ctt().Ist()}k8(){this.ctt().k8()}gnt(){return this.ctt().gnt()}ist(){this.ctt().ist()}G8(t){this.ctt().G8(),this.Eet=this.ynt(t),this.dst()}fst(t){this.ctt().fst(),this.Eet=this.ynt(t)}dst(){const t=this.Fet();if(this.nit=0,t.dtt()){const s=this.ait(),i=t.nJ(),e=this.ctt(),n=this.Fst();if(e.wnt()){const t=s.utt(i,e,n,this);t&&t.length&&(this.nit=1)}else this.nit=0}}ynt(t){const s=this.ait();return this.Tet.lnt(t,this.xet)||(s.Ttt()?this.Tet.unt(t,this.xet):this.Tet.dnt(t,this.xet))}yst(){this.Get.yst()}Sc(t,s=!1,i=!1,e=!1){let n,r,h=!1;if(s)n=this.Tet.unt(t,this.xet);else{if(this.Eet){const s=this.ait(),i=this.Eet.a7(),e=this.Eet._F(),n=i?i._F():s.Nz();(t<=e||t>=n)&&(this.Eet=this.Tet.unt(t,this.xet),h=!0)}else this.Eet=this.Tet.unt(t,this.xet),h=!0;n=this.Eet}n&&(r=n.a7()),this.Get.Sc(t,n,r,s,i,e,h)}Snt(t){if(this.Eet){const s=this.ait(),i=this.Eet.a7(),e=this.Eet._F(),n=i?i._F():s.Nz();(t<=e||t>=n)&&(this.Eet=this.Tet.unt(t,this.xet))}else this.Eet=this.Tet.unt(t,this.xet);const s=this.Eet,i=s.a7();return this.Get.Snt(t,s,i)}bnt(t,s,i){return this.Get.Snt(t,s,i)}vst(){this.Get.vst()}static vnt(t,s){const i=s.Det();return s.Tet.unt(t,i)}static Mnt(t,s){const i=s.Det();return s.Tet.dnt(t,i)}xnt(){const t=this.xet.Cet().Tnt();return this.Eet=null,t}let(t){this.Eet=null,this.xet.Cet().Gnt(t)}uet(){this.ctt().uet()}cet(){if(this.ctt().cet()){const t=this.Tet.int(this.xet),s=this.ctt().gnt();t.Int(s)}}fet(){const t=this.ctt().fet();return t&&this._nt(),this.ctt().Cnt(),t}_nt(){const t=this.ait()._F(),s=this.ctt(),i=Cg.oit.vnt(t,this),e=this.xnt();e.tnt(i.DI()),e.Lz(t),e.eJ(i.Ent()),e.Rit(!0),e.Pnt(s.Ant()),e.Int(s.gnt())}b3(){return{sourceAdapterJson:this.ctt().b3()}}v3(t){t&&this.ctt().v3(t.sourceAdapterJson)}}}{const Eg=self._s,Pg=Eg.oit;Pg.Bet=class{constructor(t){this.Rnt=t,this.Ont=null,this.Fnt()}qn(){this.Ont&&(this.Ont.qn(),this.Ont=null),this.Rnt=null}wnt(){return this.Ont.wnt()}uJ(){return this.Rnt}Ist(){this.Ont&&this.Ont.Ist()}k8(){this.Ont&&this.Ont.k8()}Fnt(){return this.Ont||(this.Ont=this.Dnt()),this.Ont}wit(){}tk(){return this.wit()}Lnt(){}ist(){this.Fnt().ist()}G8(){this.Fnt().G8()}fst(){this.Fnt().fst()}yst(){this.Ont.knt()}Sc(t,s,i,e,n,r,h){let o;switch(this.Rnt.snt()){case"numeric":o=Pg.Nnt.Sc(t,s,i,this.Rnt);break;case"angle":o=Pg.$nt.Sc(t,s,i,this.Rnt);break;case"boolean":o=Pg.Bnt.Sc(t,s,i,this.Rnt);break;case"color":o=Pg.Wnt.Sc(t,s,i,this.Rnt);break;case"text":o=Pg.jnt.Sc(t,s,i,this.Rnt)}this.Ont.Vnt(t,o,s,i,e,n,r,h)}Snt(t,s,i){switch(this.Rnt.snt()){case"numeric":return Pg.Nnt.Sc(t,s,i,this.Rnt);case"angle":return Pg.$nt.Sc(t,s,i,this.Rnt);case"boolean":return Pg.Bnt.Sc(t,s,i,this.Rnt);case"color":return Pg.Wnt.Sc(t,s,i,this.Rnt);case"text":return Pg.jnt.Sc(t,s,i,this.Rnt)}}vst(){this.Ont.Unt()}uet(){this.Fnt().Hnt()}Cnt(){this.Fnt().Cnt()}gnt(){return this.Fnt().gnt()}cet(){return this.Fnt().cet()}fet(){return this.Fnt().fet()}Ant(){const t=this.Rnt,s=t.Fet().ait()._F(),i=Pg.vnt(s,t),e=i.a7();switch(t.snt()){case"numeric":return Pg.Nnt.Sc(s,i,e,t);case"angle":return Pg.$nt.Sc(s,i,e,t);case"boolean":return Pg.Bnt.Sc(s,i,e,t);case"color":return Pg.Wnt.Sc(s,i,e,t);case"text":return Pg.jnt.Sc(s,i,e,t)}}Dnt(){const t=this.Rnt;switch(t.ant()?t.snt():""){case"combo":case"boolean":case"text":case"string":return new Pg.znt.qnt(this);case"numeric":case"number":case"angle":return"combo"===this.Rnt.Ket()?new Pg.znt.qnt(this):new Pg.znt.Jnt(this);case"color":case"offsetColor":return new Pg.znt.Ynt(this);default:return new Pg.znt.Jnt(this)}}b3(){return{propertyAdapterJson:this.Fnt().b3()}}v3(t){t&&this.Fnt().v3(t.propertyAdapterJson)}}}{const Ag=self._s,Rg=0;class Og extends Ag.oit.Bet{constructor(t){super(t),this.Xnt=NaN}wit(){return this.Rnt.Det().Het()[0]}tk(){return this.Xnt?this.Xnt:super.tk()}Lnt(){return this.Rnt.Fet().nJ()}Mit(t){this.Rnt.Det().Het()[0]!==t&&(this.Xnt=t)}Sc(t,s,i,e,n,r,h){this.Fnt().Znt(s.Jet())&&super.Sc(t,s,i,e,n,r,h)}Snt(t,s,i){if(this.Fnt().Znt(s.Jet()))return super.Snt(t,s,i)}b3(){return Object.assign(super.b3(),{index:this.Xnt})}v3(t){t&&(super.v3(t),this.Xnt=t.index)}}Ag.oit.Net=Og}{const Fg=self._s,Dg=0,Lg=1,kg=2;class Ng extends Fg.oit.Bet{constructor(t){super(t),this.dQ=NaN}wit(){return this.Rnt.Det().Het()[1]}Lnt(){const t=this.Rnt.Det(),s=this.Rnt.Fet(),i=this.dQ?this.dQ:t.Het()[0],e=s.nJ(),n=e.Knt(i);return e.Qnt()[n].Aq()}Wq(t){const s=this.Rnt.Det().Het()[2];return t.trt(s)}Tit(t){this.Rnt.Det().Het()[0]!==t&&(this.dQ=t)}Sc(t,s,i,e,n,r,h){const o=this.Rnt.Fet().nJ();this.Wq(o.WV())&&super.Sc(t,s,i,e,n,r,h)}Snt(t,s,i){const e=this.Rnt.Fet().nJ();if(this.Wq(e.WV()))return super.Snt(t,s,i)}b3(){return Object.assign(super.b3(),{sid:this.dQ})}v3(t){t&&(super.v3(t),this.dQ=t.sid)}}Fg.oit.Let=Ng}{const $g=self._s,Bg=0,Wg=1;class jg extends $g.oit.Bet{constructor(t){super(t)}wit(){return this.Rnt.Det().Het()[1]}Lnt(){const t=this.Rnt.Fet().c$().XU(),s=t.nj(),i=this.Iit(s).tk();return t.zq(i)?t.srt(i):null}Iit(t){const s=this.Rnt.Det().Het()[0];return t.irt(s)}Sc(t,s,i,e,n,r,h){this.ert()&&super.Sc(t,s,i,e,n,r,h)}Snt(t,s,i){if(this.ert())return super.Snt(t,s,i)}ert(){const t=this.Rnt.Fet().c$().XU(),s=t.nj(),i=this.Iit(s);if(!i)return;const e=i.tk();return t.zq(e)}}$g.oit.ket=jg}{const Vg=self._s,Ug=0;class Hg extends Vg.oit.Bet{constructor(t){super(t)}wit(){return this.Rnt.Det().Het()[0]}Lnt(){return this.Rnt.Fet().nJ().Aq()}Sc(t,s,i,e,n,r,h){const o=this.Rnt.Fet();o.WV().MW()===o.nJ().WV().MW()&&super.Sc(t,s,i,e,n,r,h)}Snt(t,s,i){const e=this.Rnt.Fet();if(e.WV().MW()===e.nJ().WV().MW())return super.Snt(t,s,i)}nrt(){const t=this.Rnt.Fet(),s=t.WV().MW();if(Vg.R$.rrt&&s instanceof Vg.R$.rrt&&("initial-frame"===this.Rnt.Fst()||"initial-animation"===this.Rnt.Fst()))switch(this.Rnt.g7()){case"relative":return{hrt:(s,i,e,n,r)=>{if(i!==n){const e=n/i,r=t.uJ("offsetWidth"),h=t.uJ("offsetScaleX");if(r||h){const o=r?.ctt()?.Fnt(),a=h?.ctt()?.Fnt();if(s.zH()&&s.tq())a&&a.ort(n),s.Yg(this.art(n,i,s,t,o,a));else{const i=n*((s.urt()?.lrt()??this.crt(s,t))/this.crt(s,t));a&&a.ort(n);const r=o?.frt()??0,h=a?.frt()??0;s.Yg(i+(r+h*e))}}else s.Yg(s.jg()*e)}if(e!==r){const i=r/e,n=t.uJ("offsetHeight"),h=t.uJ("offsetScaleY");if(n||h){const o=n?.ctt()?.Fnt(),a=h?.ctt()?.Fnt();if(s.zH()&&s.iq())a&&a.ort(r),s.Vg(this.drt(r,e,s,t,o,a));else{const e=r*((s.urt()?.prt()??this.mrt(s,t))/this.mrt(s,t));a&&a.ort(r);const n=o?.frt()??0,h=a?.frt()??0;s.Vg(e+(n+h*i))}}else s.Vg(s.Kg()*i)}}};case"absolute":return null}}grt(t,s,i,e=0){const n=s.ait().Dst(t.nJ());if(!n)return e;const r=n.uJ(i);if(!r)return e;const h=r.Det().Cet();if(!h)return e;const o=h.yrt();return o?o.Jet():e}crt(t,s){const i=s.ait().Dst(t.nJ());if(i)return i.Dit();const e=t.nJ().Aq();return e.Lit()?e.Dit():t.urt().lrt()}mrt(t,s){const i=s.ait().Dst(t.nJ());if(i)return i.Nit();const e=t.nJ().Aq();return e.Lit()?e.Nit():t.urt().prt()}art(t,s,i,e,n,r){const h=i.urt().lrt(),o=h/i.FH().urt().lrt();let a=1;const l=r?.wrt()??0;if(0!==l){const t=h/this.crt(i,e);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=n?.Srt()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return i.FH().jg()*o*a*f}drt(t,s,i,e,n,r){const h=i.urt().prt(),o=h/i.FH().urt().prt();let a=1;const l=r?.brt()??0;if(0!==l){const t=h/this.mrt(i,e);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=n?.vrt()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return i.FH().Kg()*o*a*f}}Vg.oit.$et=Hg}{const qg=self._s;class zg extends qg.oit.Bet{constructor(t){super(t),this.Mrt=0,this.xrt=!1}wnt(){return!1}G8(){const t=this.Rnt.hit();let s=this.Rnt.Det();s=t.int(s),this.Mrt=s.T7()}fst(){}Jet(){return this.xrt||this.Rnt.Sc(0),this.Mrt}Sc(t,s,i,e,n,r,h){this.Mrt=qg.oit.Nnt.Sc(t,s,i,this.Rnt),this.xrt=!0}uet(){}Cnt(){}gnt(){return this.Mrt}cet(){return!1}fet(){return!1}b3(){return{value:this.Mrt,init:this.xrt}}v3(t){t&&(this.Mrt=t.value,this.xrt=!t.hasOwnProperty("init")||t.init)}}qg.oit.Wet=zg}{const Jg=self._s,Yg=0,Xg=0,Zg=1,Kg=1,Qg=2,ty=3;class sy extends Jg.oit.Bet{constructor(t){super(t),this.Trt=!1,this.Grt=null,this.Irt=null,this._rt=null,this.s7=this.Rnt.ait(),this.Met=this.Rnt.Fet(),this.Crt=this.Rnt.Uet(),this.Ert=this.Crt[0],this.Prt=this.Crt[1],this.Crt[3]?this.Art=this.Crt[3]:this.Art=Math.random().toString(36).slice(2),this.Rrt=NaN,this.Ort=NaN,this.Frt=NaN,this.Drt=null,this.Lrt()}qn(){super.qn(),this.Grt=null,this.Irt=null,this._rt=null,this.s7=null,this.Met=null,this.Crt=null,this.Ert=null,this.Drt=null}Lrt(){if(!self._s.R$.Audio)return;const t=this.Rnt.$$().krt(self._s.R$.Audio);t&&(this.Grt=t.SW().Aq()),this.Irt=self._s.R$.Audio.Nrt,this._rt=self._s.R$.Audio.$rt}Brt(){if(this.Drt)return;const t=this.Rnt.Fet().uJ("audioSource");t&&(this.Drt=t.ctt())}Wrt(){const t=this.Rnt.Fet().uJ("volume");return t?t.ctt().Ort:this.Ort}Ist(){super.Ist(),this.Trt=!1,this.Grt&&(this._rt&&(this.Rrt=this._rt.jrt.call(this.Grt,this.Art),this.Ort=this._rt.Vrt.call(this.Grt,this.Art)),this.Irt&&this.Irt.Oz.call(this.Grt,this.Art))}Urt(){return this.Art}Hrt(){return this.Frt}qrt(t){this.Frt=t}G8(){super.G8(),this.Rrt=NaN,this.Trt=!1}fst(){super.fst();const t=this.Rnt.ait()._F();switch(this.Rrt=t-this.Prt,this.Rnt.Fst()){case"audioSource":break;case"volume":this.Ort=this.Rnt.Snt(t)}this.Trt=!1}Sc(t,s,i,e,n,r,h){if(this.Grt)switch(this.Rnt.Fst()){case"audioSource":{if(!this.s7.Ttt())return;if(e)return void(this.Irt&&this.Irt.Oz.call(this.Grt,this.Art));if(t<this.Prt)return void(this.Trt=!1);const s=this._rt.zrt.call(this.Grt,this.Art),i=this.s7.Uz();if(i!==s&&this.Irt.Vz.call(this.Grt,this.Art,i),this.Trt)return;if(!this.Rnt.ait().IsPlaying())return;if(this.Trt=!0,isNaN(this.Rrt)){const s=self.performance.now(),i=t-this.Prt;if("suspended"===this.Grt.Jrt())return void(this.Trt=!1);const e=i+(self.performance.now()-s)/1e3;if(this.Irt){let t=this.Hrt();isNaN(t)?(this.qrt(0),t=0):this.qrt(t),this.Irt.Yrt.call(this.Grt,this.Ert,t,this.Art,e)}}else{const t=this.Rrt;this.Rrt=NaN;const s=this.Wrt();if(this.Ort=NaN,"suspended"===this.Grt.Jrt())return void(this.Trt=!1);this.Irt&&(this.qrt(s),this.Irt.Yrt.call(this.Grt,this.Ert,s,this.Art,t))}break}case"volume":this.Brt(),super.Sc(t,s,i,e,n,r,h)}}Snt(t,s,i){if(this.Grt)switch(this.Rnt.Fst()){case"audioSource":return;case"volume":return this.Brt(),super.Snt(t,s,i)}}Xrt(t,s){return this.Drt?this.Drt.Hrt():0}Zrt(t,s,i,e){this.Drt&&this.Drt.qrt(this.Xrt()+s),this.Irt&&this.Drt&&this.Irt.qrt.call(this.Grt,this.Drt.Urt(),this.Drt.Hrt())}Krt(t,s,i){this.Drt&&this.Drt.qrt(s),this.Irt&&this.Drt&&this.Irt.qrt.call(this.Grt,this.Drt.Urt(),this.Drt.Hrt())}Qrt(){return!0}b3(){return{audioPlaybackStarted:this.Trt,audioTag:this.Art,pauseTime:this.Rrt,pauseVolume:this.Ort,volume:this.Frt}}v3(t){t&&(this.Trt=t.audioPlaybackStarted,this.Art=t.audioTag,this.Rrt=t.pauseTime,this.Ort=t.pauseVolume,this.Frt=t.volume,this.Lrt())}}Jg.oit.jet=sy}{const iy=self._s;iy.oit.znt=class{constructor(t){this.Get=t,this.Rnt=t.uJ(),this.zst=this.Rnt.Fet().c$(),this.tht=this.Rnt.Fst(),this.sht=!1,this.iht=null,this.eht=null}qn(){this.Get=null,this.Rnt=null,this.zst=null,this.iht=null,this.eht=null}wnt(){return!1}Ist(){}k8(){this.zst=null,this.iht=null,this.eht=null}ctt(){return this.Get}uJ(){return this.Rnt}c$(){return this.zst||(this.zst=this.Rnt.Fet().c$()),this.zst}nht(t){this.sht=!!t}rht(){return this.sht}ist(){}G8(){}fst(){}Hnt(){this.iht=this.gnt()}Cnt(){this.iht=null}gnt(){}cet(){}fet(){}Znt(t){return typeof this.hht()==typeof t}knt(){}Vnt(t,s,i,e,n,r,h,o){}Unt(){}oht(){return this.lht((()=>{const t=this.Rnt.Det();return this.Rnt.hit().int(t)}),(()=>{const t=this.Rnt.Det();return this.Rnt.hit().yrt(t)})).aht()}uht(){const t=this.Rnt.ait()._F()-this.Rnt.Fet().wst();return this.lht((()=>{const s=this.Rnt.Det();return this.Rnt.hit().unt(t,s)}),(()=>{const s=this.Rnt.Det(),i=this.Rnt.hit();return i.dnt(t,s)||i.yrt(s)})).aht()}lht(t,s){return this.Rnt.ait().Ttt()?t():s()}cht(t,s){return"relative"===this.Rnt.g7()?t():s()}fht(t,s){return this.rht()?(this.nht(!1),t()):s()}dht(t){}pht(){return this.Get.tk()}mht(){return this.eht||(this.eht=this.Get.Lnt()),this.eht}ght(t,s,i,e,n,r){switch(this.Rnt.yit()){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return n();case"audio":return r()}}b3(){return{firstAbsoluteUpdate:this.sht,saveState:this.iht}}v3(t){t&&(this.sht=t.firstAbsoluteUpdate,this.iht=t.saveState)}yht(t,s=!1){const i=[];for(const e of t){const t=e.Fet().wst();for(const n of e.ont())s&&0===n._F()?i.push({time:t+n._F(),value:n.aht()}):s||i.push({time:t+n._F(),value:n.aht()})}return i.sort(((t,s)=>t.time-s.time))}wht(t,s,i){return this.Sht(s,i)}Sht(t,s){for(let i=s.length-1;i>=0;i--)if(s[i].time<=t)return s[i];return null}}}{const ey=self._s,ny=new Map,ry=[0,0,0];class hy extends ey.oit.znt{constructor(t){super(t)}ist(){}G8(){}fst(){}gnt(){const t=this.Rnt.yit(),s=this.mht(),i=this.pht();switch(t){case"behavior":case"plugin":return this.bht(s.vht(i));case"effect":return this.bht(s[i]);case"world-instance":return this.bht(this.hht())}}cet(){const t=this.oht();return!this.Mht(t,this.hht())}fet(){return!ey.ee(this.iht)&&!this.Mht(this.iht,this.hht())}Mht(t,s){return t=this.xht(t),s=this.xht(s),t.Ho(s)}oht(){const t=super.oht();return this.xht(t)}uht(){const t=super.uht();return this.xht(t)}dht(t){}bht(t){return ey.ke(t,ey.To)?t.toArray().slice(0,3):t.slice(0,3)}xht(t){return ey.ke(t,ey.To)?t:new ey.To(t[0],t[1],t[2],1)}Znt(t){return!0}wnt(){return!0}knt(){const t=this.Rnt.ait(),s=this.Rnt.nJ(),i=this.Rnt.ctt(),e=t.utt(s,i,this.tht,this.Rnt);if(e&&e.length>1){ny.has(s)||ny.set(s,new Map);const t=ny.get(s),i=this.Rnt.yit();t.has(i)||t.set(i,new Map);const e=t.get(i);e.has(this.tht)||e.set(this.tht,{Tht:!1,color:new ey.To(0,0,0,1)})}}Ght(t,s,i){const e=ny.get(t).get(s).get(i);return e.Tht=!0,e.color}Vnt(t,s,i,e,n,r,h,o){const a=this.Rnt.ait(),l=this.Rnt.Fet(),u=this.Rnt.nJ(),c=this.Rnt.ctt(),f=this.Rnt.yit(),d=this.tht,p=a.utt(u,c,d,this.Rnt);if(p&&p.length>1){const t=this.yht(p,!0),i=this.wht(a,a._F(),t);if(i){const t=l.wst(),e=i.time-t;if(0===e)this.Ght(u,f,this.tht).Ao(s[0],s[1],s[2]);else{if(e<0)return;const t=s[0],i=s[1],n=s[2],r=this.Rnt.Sc(e,!1,!0),h=ey.To.Ma(t,r[0]),o=ey.To.Ma(i,r[1]),a=ey.To.Ma(n,r[2]);this.Ght(u,f,this.tht).Ao(h,o,a)}}}else this.Iht(s[0],s[1],s[2])}Unt(){const t=this.Rnt.nJ();if(!ny.has(t))return;const s=ny.get(t),i=this.Rnt.yit();if(!s.has(i))return;const e=s.get(i);if(!e.has(this.tht))return;const n=e.get(this.tht),r=n.Tht,h=n.color;r&&this.Iht(h.No(),h.$o(),h.Bo()),0===e.size&&s.delete(i),0===s.size&&ny.delete(t)}hht(){const t=this.Rnt.yit(),s=this.mht(),i=this.pht();switch(t){case"behavior":case"plugin":return this.xht(s.vht(i));case"effect":return s[i].clone();case"world-instance":return this.c$().bH().clone()}}Iht(t,s,i){const e=this.Rnt.yit(),n=this.mht(),r=this.pht();switch(e){case"behavior":case"plugin":ry[0]=t,ry[1]=s,ry[2]=i,n._ht(r,ry);break;case"effect":n[r].Po(t,s,i);break;case"world-instance":this.c$().Cht(t,s,i)}}b3(){}v3(t){}}ey.oit.znt.Ynt=hy}{const oy=self._s,ay=oy.oit;class ly extends oy.oit.znt{constructor(t){super(t)}ist(){}G8(){}fst(){}gnt(){return this.hht()}cet(){return this.oht()!==this.gnt()}fet(){return!oy.ee(this.iht)&&this.iht!==this.gnt()}wnt(){return!1}Vnt(t,s,i,e,n,r,h,o){const a=this.Rnt,l=a.Fet(),u=a.yit(),c=a.ait(),f=l.nJ(),d=a.ctt(),p=this.tht,m=c.utt(f,d,p,a);if(m&&m.length>1){const i=this.yht(m),e=t+l.wst(),n=this.wht(c,e,i);n&&(s=n.value)}switch(a.snt()){case"numeric":if(!ay.Nnt.Eht(this.pht(),this.mht(),s,u))return;break;case"angle":if(!ay.$nt.Eht(this.pht(),this.mht(),s,u))return;break;case"boolean":if(!ay.Bnt.Eht(this.pht(),this.mht(),s,u))return;break;case"color":if(!ay.Wnt.Eht(this.pht(),this.mht(),s,u))return;break;case"text":if(!ay.jnt.Eht(this.pht(),this.mht(),s,u))return}this.Iht(s)}hht(){const t=this.Rnt.yit(),s=this.mht(),i=this.pht();switch(t){case"behavior":case"plugin":return s.vht(i);case"effect":return s[i];case"instance-variable":return s.Pht(i)}}Iht(t){const s=this.Rnt.yit(),i=this.mht(),e=this.pht();switch(s){case"behavior":case"plugin":i._ht(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.Aht(e,t)}}}oy.oit.znt.qnt=ly}{const uy=self._s,cy=uy.oit.znt,fy=new Map,dy=(t,s,i,e,n,r=!1,h=null,o=null)=>{fy.set(t,{Rht:s,Oht:i,Fht:e,round:n,Dht:r,init:h,reset:o})},py=(t,s)=>{const i=s.ait().Dst(t.nJ());if(i)return i.Dit();const e=t.nJ().Aq();return e.Lit()?e.Dit():t.urt().lrt()},my=(t,s,i,e=0)=>{const n=s.ait().Dst(t.nJ());if(!n)return e;const r=n.uJ(i);if(!r)return e;const h=r.Det().Cet();if(!h)return e;const o=h.yrt();return o?o.Jet():e},gy=t=>{const s=[];let i=t.FH();for(;i;)s.push(i),i=i.FH();return s.reverse(),s};dy("offsetX",((t,s,i,e)=>{"relative"===e.Rnt.g7()?t.Lht(s,i.ait().vtt()):t.Lht(s)}),((t,s)=>t.qM(s)),(t=>t.HM()),!0),dy("offsetY",((t,s,i,e)=>{"relative"===e.Rnt.g7()?t.kht(s,i.ait().vtt()):t.kht(s)}),((t,s)=>t.YM(s)),(t=>t.JM()),!0),dy("offsetWidth",((t,s,i,e,n=!1,r=!0)=>{if(0===s)return;const h="relative"===e.Rnt.g7(),o=1===e.Nht.DI();if((h||o)&&t.zH()&&t.tq()){if(isNaN(e.$ht)){const s=gy(t);let i;i=o?s[s.length-1].jg():s[s.length-1].urt().lrt(),e.$ht=0===i?Number.EPSILON:i}if(n)return;e.Bht+=s;const i=s/e.$ht;t.Gy(i,r),e.Wht+=i}else t.Gy(s),e.Wht+=s}),((t,s)=>t.Yg(s)),(t=>t.jg()),!0,!1,null,(t=>{t.Wht=0,t.Bht=0})),dy("offsetHeight",((t,s,i,e,n=!1,r=!0)=>{if(0===s)return;const h="relative"===e.Rnt.g7(),o=1===e.Nht.DI();if((h||o)&&t.zH()&&t.iq()){if(isNaN(e.$ht)){const s=gy(t);let i;i=o?s[s.length-1].Kg():s[s.length-1].urt().prt(),e.$ht=0===i?Number.EPSILON:i}if(n)return;e.jht+=s;const i=s/e.$ht;t.Vht(i,r),e.Wht+=i}else t.Vht(s),e.Wht+=s}),((t,s)=>t.Vg(s)),(t=>t.Kg()),!0,!1,null,(t=>{t.Wht=0,t.jht=0})),dy("offsetAngle",((t,s,i,e,n)=>{t.Uht(s)}),((t,s)=>t.uj(s)),(t=>t.cj()),!1,!0),dy("offsetOpacity",((t,s,i,e,n)=>{s/=e.Hht?e.Hht:1;const r=t.tO()+s;if(0===e.qht)r>1?e.qht+=r-1:r<0&&(e.qht+=r),t.zht(s);else{const i=t.tO()+s;s>0&&e.qht>0?i>1&&(e.qht+=i-1):s>0&&e.qht<0?(e.qht+=s,e.qht>0&&(t.zht(e.qht),e.qht=0)):s<0&&e.qht>0?(e.qht+=s,e.qht<0&&(t.zht(e.qht),e.qht=0)):s<0&&e.qht<0&&i<0&&(e.qht+=i)}}),((t,s)=>{t.iO(s)}),(t=>t.tO()),!1,!0,((t,s,i)=>{switch(t.qht=0,t.Rnt.g7()){case"relative":{t.Rnt.hit();const s=t.Rnt.Det().Cet()._et();let i=t.c$().tO(),e=i;for(const n of s){const s=n._F();e=i+t.Rnt.Snt(s),e=uy.Zn(e,0,1)}t.Jht=i-e,t.Jht=Math.round(100*(t.Jht+Number.EPSILON))/100,e=i;for(let i=s.length-1;i>=0;i--){const n=s[i]._F();e-=t.Rnt.Snt(n),e=uy.Zn(e,0,1)}t.Yht=e,t.Yht=Math.round(100*(t.Yht+Number.EPSILON))/100;break}}const e="relative"===t.Rnt.g7(),n=1===t.Nht.DI();if((e||n)&&s.zH()&&s.aq()){const e=gy(s);let n=e[0].urt().Xht();n+=my(e[0],i,"offsetOpacity");for(let t=1;t<e.length;t++)n+=my(e[t],i,"offsetOpacity");t.Hht=0===n?1:n}}),(t=>{switch(t.Rnt.g7()){case"relative":{t.qht=0;const s=t.c$();let i=s.tO();i=Math.round(100*(i+Number.EPSILON))/100,t.Rnt.ait().Ttt()?(s.iO(i+t.Jht),t.T_=0):(s.iO(i-t.Yht),t.T_=t.ctt().Ant());break}}})),dy("offsetOriginX",((t,s)=>t.Zht(s)),((t,s)=>t.nH(s)),(t=>t.eH()),!1),dy("offsetOriginY",((t,s)=>t.Kht(s)),((t,s)=>t.oH(s)),(t=>t.hH()),!1),dy("offsetZElevation",((t,s)=>t.Qht(s)),((t,s)=>t.ZM(s)),(t=>t.XM()),!0),dy("offsetScaleX",((t,s,i,e)=>{if(0===s)return;const n=t.jg()<0?-1:1;if(e.tot+=s,"relative"===e.Rnt.g7()&&t.zH()&&t.tq()){const r=my(t,i,"offsetWidth"),h=isNaN(e.sot)?i.Dit():e.sot,o=(h+r/(t.urt().lrt()/h))*n*s;isNaN(e.$ht)&&fy.get("offsetWidth").Rht(t,1,i,e,!0);const a=o/e.$ht;t.Gy(a,!0),e.Wht+=a}else{const r=(isNaN(e.sot)?i.Dit():e.sot)*n*s;t.Gy(r),e.Wht+=r}}),((t,s,i)=>{t.Yg(i.Dit()*s)}),((t,s)=>{const i=t.jg()<0?-1:1;if(t.tq()){const e=t.FH(),n=s.ait().Dst(e.nJ());let r=NaN;if(n)r=e.jg()/n.Dit();else{const t=e.nJ().Aq();r=t.Lit()?e.jg()/t.Dit():1}return t.jg()*i/(s.Dit()*r)}return t.jg()*i/s.Dit()}),!1,!1,null,(t=>{t.Wht=0,t.sot=NaN,t.tot=0})),dy("offsetScaleY",((t,s,i,e)=>{if(0===s)return;const n=t.Kg()<0?-1:1;if(e.iot+=s,"relative"===e.Rnt.g7()&&t.zH()&&t.iq()){const r=my(t,i,"offsetHeight"),h=isNaN(e.sot)?i.Nit():e.sot,o=(h+r/(t.urt().prt()/h))*n*s;isNaN(e.$ht)&&fy.get("offsetHeight").Rht(t,1,i,e,!0);const a=o/e.$ht;t.Vht(a,!0),e.Wht+=a}else{const r=(isNaN(e.sot)?i.Nit():e.sot)*n*s;t.Vht(r),e.Wht+=r}}),((t,s,i)=>{t.Vg(i.Nit()*s)}),((t,s)=>{const i=t.Kg()<0?-1:1;if(t.iq()){const e=t.FH(),n=s.ait().Dst(e.nJ());let r=NaN;if(n)r=e.Kg()/n.Nit();else{const t=e.nJ().Aq();r=t.Lit()?e.Kg()/t.Nit():1}return t.Kg()*i/(s.Nit()*r)}return t.Kg()*i/s.Nit()}),!1,!1,null,(t=>{t.Wht=0,t.sot=NaN,t.iot=0}));class yy extends uy.oit.znt{constructor(t){super(t),this.T_=0,this.qht=0,this.Jht=0,this.Yht=0,this.Hht=NaN,this.$ht=NaN,this.Wht=0,this.sot=NaN,this.Bht=0,this.tot=0,this.jht=0,this.iot=0,this.eot=void 0,this.not=void 0,this.rot=null,this.hot=null,this.oot=null,this.aot=null,this.lot=null,this.uot=null,this.cot=null,this.fot=null,this.dot=!1,this.pot=!1,uy.ke(this.Rnt.ait(),uy.mot)?this.Nht=new uy.oit.znt.got(this):this.Nht=new uy.oit.znt.yot(this);const s=this.Rnt.Fst();switch(this.Rnt.yit()){case"world-instance":{const t=fy.get(s);this.rot=t.Fht,this.hot=t.Rht,this.oot=t.Oht,this.dot=t.round,this.pot=t.Dht,this.lot=t.init,this.aot=t.reset;break}case"audio":this.uot=t.Xrt,this.cot=t.Zrt,this.fot=t.Krt,this.dot=!!t.Qrt(),this.pot=!1}}qn(){this.Nht=null,this.rot=null,this.hot=null,this.oot=null,this.aot=null,this.lot=null,this.uot=null,this.cot=null,this.fot=null,super.qn()}wnt(){return this.Nht.wnt()}wot(){return this.T_}Sot(t){this.T_=t}ist(){this.aot&&this.aot(this)}G8(){const t=this.Nht.G8();if("number"==typeof t&&(this.T_=t),this.lot){const t=this.c$(),s=this.Rnt.Fet();this.lot(this,t,s)}}fst(){const t=this.Nht.fst();"number"==typeof t&&(this.T_=t)}gnt(){return this.hht()}cet(){return this.oht()!==this.gnt()}fet(){return!uy.ee(this.iht)&&this.iht!==this.gnt()}knt(){this.Nht.knt()}Vnt(t,s,i,e,n,r,h,o){return this.Nht.Vnt(t,s,i,e,n,r,h,o)}Unt(){this.Nht.Unt()}hht(){const t=this.mht(),s=this.pht(),i=this.c$(),e=this.Rnt.Fet();switch(this.Rnt.yit()){case"behavior":case"plugin":return t.vht(s);case"effect":return t[s];case"instance-variable":return t.Pht(s);case"world-instance":return this.rot(i,e);case"audio":return this.uot.call(this.ctt(),i,e)}}Iht(t,s,i,e=!0){const n=this.mht(),r=this.pht(),h=this.c$(),o=this.Rnt.Fet();switch(this.Rnt.yit()){case"behavior":n.bot(r,t);break;case"effect":n[r]+=t;break;case"instance-variable":n.vot(r,t);break;case"plugin":n.bot(r,t,this.ctt().nrt());break;case"world-instance":this.hot(h,t,o,this,!1,e);break;case"audio":this.cot.call(this.ctt(),h,t,o,this)}}Mot(t,s,i){let e=this.Rnt.ytt();if(e="default"===e?"continuous":e,"discrete"===e&&!s)return;if("discrete"===e&&i){const t=this.Rnt.ait()._F();if(!this.Rnt.lnt(t))return}const n=this.mht(),r=this.pht(),h=this.c$(),o=this.Rnt.Fet();switch(this.Rnt.yit()){case"behavior":n._ht(r,t);break;case"effect":n[r]=t;break;case"instance-variable":n.Aht(r,t);break;case"plugin":n._ht(r,t,this.ctt().nrt());break;case"world-instance":this.oot(h,t,o);break;case"audio":this.fot.call(this.ctt(),h,t,o)}}xot(t,s,i,e,n,r,h,o){this.Nht.xot(t,s,i,e,n,r,h,o)}Tot(t,s,i,e,n){"angle"===this.Rnt.Ket()&&(t=uy.tr(t));const r=(t.toString().split(".")[1]||"").length,h=this.hht();let o;switch(o=0===r?this.dot?Math.round(h):this.pot?"angle"===this.Rnt.Ket()?uy.Qn(Math.round(uy.tr(h))):Number(uy.toFixed(h,2)):h:this.dot?Number(uy.toFixed(h,r)):(this.pot,h),this.Iht(o-h,s,i,!1),this.Rnt.Fst()){case"offsetWidth":case"offsetScaleX":{const t=this.c$(),s=t.jg(),i=Number(uy.toFixed(s,2));t.Gy(i-s);break}case"offsetHeight":case"offsetScaleY":{const t=this.c$(),s=t.Kg(),i=Number(uy.toFixed(s,2));t.Vht(i-s);break}}}b3(){return Object.assign(super.b3(),{v:this.T_,a:this.qht,fod:this.Jht,bod:this.Yht,of:this.Hht,sf:this.$ht,armorf:this.eot,armandf:this.not,ca:this.Wht,os:this.sot,awo:this.Bht,aho:this.jht,asxo:this.tot,asyo:this.iot})}v3(t){t&&(super.v3(t),this.T_=t.v,this.qht=t.a,this.Jht=uy.te(t.fod)?t.fod:0,this.Yht=uy.te(t.bod)?t.bod:0,this.Hht=uy.te(t.of)?t.of:NaN,this.$ht=uy.te(t.sf)?t.sf:NaN,this.eot=uy.te(t.armorf)?t.armorf:void 0,this.not=uy.te(t.armandf)?t.armandf:void 0,this.Wht=uy.te(t.ca)?t.ca:0,this.sot=uy.te(t.os)?t.os:NaN,this.Bht=uy.te(t.awo)?t.awo:0,this.jht=uy.te(t.aho)?t.aho:0,this.tot=uy.te(t.asxo)?t.asxo:0,this.iot=uy.te(t.asyo)?t.asyo:0)}ort(t){this.sot=t}frt(){return this.Wht}Srt(){return this.Bht}vrt(){return this.jht}wrt(){return this.tot}brt(){return this.iot}}uy.oit.znt.Jnt=yy}{const wy=self._s;class Sy{constructor(t){this.Got=!1,this.Mrt=0,this.Iot=!1,this._ot=!1,this.sit=t;for(let t=0,s=this.sit.length;t<s;t++)this.sit[t].Ret(this)}Ost(){return this.sit}Cot(){this.Got=!0}Eot(){return this.Got}Pnt(t){this.Mrt=t}Jet(){return this.Mrt}Pot(t){this.Iot=t}Aot(){return this.Iot}gst(t){this._ot=t}Rot(){return this._ot}$f(){this.Got=!1,this.Mrt=0,this.Iot=!1,this._ot=!1}}class by{constructor(t){this.Oot=t}qn(){this.Oot=null}DI(){return 0}G8(){const t=this.Oot;return this.Oot.uJ(),t.cht((()=>t.lht((()=>0),(()=>t.ctt().Ant()))),(()=>{}))}fst(){}wnt(){switch(this.Oot,this.Oot.uJ().g7()){case"relative":return!1;case"absolute":return!0}}knt(){this.Oot;const t=this.Oot.uJ(),s=t.Fst();switch(t.g7()){case"relative":break;case"absolute":if(t.Aet())t.Oet().$f();else{const i=t.ait(),e=t.nJ(),n=t.ctt(),r=i.utt(e,n,s,t);r&&r.length>1&&new Sy(r)}}}Vnt(t,s,i,e,n,r,h,o){const a=this.Oot,l=this.Oot.uJ();switch(l.g7()){case"relative":{const h=a.wot();a.Iht(s-h,i,e),r&&this.xot(t,i,e,n,h,s),a.Sot(s);break}case"absolute":{const t=l.ait(),i=l.Fet();if(l.nJ(),l.ctt(),l.Aet()){const e=l.Oet(),n=e.Ost(),r=a.yht(n,!0),u=a.wht(t,t._F(),r);if(u){const t=i.wst(),n=u.time-t;if(0===n)e.gst(h),e.Pot(o),e.Cot(),e.Pnt(e.Jet()+s);else{if(n<0)return;const t=l.Snt(n);e.gst(h),e.Pot(o),e.Cot(),e.Pnt(e.Jet()+(s-t))}}}else a.Mot(s,o,h);break}}}Unt(){const t=this.Oot,s=this.Oot.uJ();switch(s.g7()){case"relative":break;case"absolute":if(s.Aet()){const i=s.Oet();i.Eot()&&t.Mot(i.Jet(),i.Aot(),i.Rot())}}}xot(t,s,i,e,n,r){const h=this.Oot;e||(s&&t===s._F()?h.Tot(s.T7(),s,i):i&&t===i._F()?h.Tot(i.T7(),s,i):r-n==0&&h.Tot(s.T7(),s,i))}}wy.oit.znt.yot=by}{const vy=self._s;class My{constructor(t){this.Oot=t}qn(){this.Oot=null}DI(){return 1}G8(){const t=this.Oot;return t.nht(!0),this.dht(t.oht())}fst(){const t=this.Oot;if(t.oht()!==t.uht())return t.nht(!0),this.dht(t.uht())}wnt(){return!1}knt(){}Vnt(t,s,i,e,n,r,h,o){const a=this.Oot,l=a.wot();switch(a.uJ().g7()){case"relative":a.Iht(s-l,i,e),r&&this.xot(t,i,e,n,l,s,!1,h);break;case"absolute":a.rht()?(a.nht(!1),a.Iht(l,i,e)):0===t&&0===a.uJ().ait().Nz()?a.Mot(s,!0,!1):(a.Iht(s-l,i,e),r&&this.xot(t,i,e,n,l,s,this.Fot(),h))}a.Sot(s)}Unt(){}dht(t){return t-this.Oot.gnt()}Fot(){const t=this.Oot,s=t.c$().nJ(),i=t.uJ().$$().ltt();let e=0;for(const t of i.t8())0===t.DI()?t.r8(s)&&e++:1===t.DI()&&t.nJ()===s&&e++;return e<=1}xot(t,s,i,e,n,r,h,o){const a=this.Oot;e?s&&t===s._F()?a.Tot(s.T7(),s,i,h,o):i&&t===i._F()?a.Tot(i.T7(),s,i,h,o):i||a.Tot(s.T7(),s,i,h,o):s&&t===s._F()?a.Tot(s.T7(),s,i,h,o):i&&t===i._F()?a.Tot(i.T7(),s,i,h,o):r-n==0&&a.Tot(s.T7(),s,i,h,o)}}vy.oit.znt.got=My}{const xy=self._s,Ty=self.ju;xy.oit.Nnt=class{constructor(){}static Eht(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.vht(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Pht(t)}return n!==i}static Sc(t,s,i,e){if(!i){let t=e.Det();return t=e.hit().yrt(t),t.T7()}let n=e.ytt();if("default"===n&&(n="continuous"),"combo"===e.Ket()&&(n="discrete"),"discrete"===n)return s.T7();if("continuous"===n||"step"===n){const r=e.ait().mtt();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.T7(),o=i.T7(),a=s.M7("cubic-bezier"),l=i.M7("cubic-bezier"),u=a&&a.Dot()&&l&&l.Lot();if(!u&&h===o)return h;const c=s._F(),f=i._F();"step"===n&&0!==r&&(t=xy.Zn(t,c,f));const d=xy.normalize(t,c,f),p=s.Ent();let m;if(u){const t=f-c;m=Ty.rc(p)(t*d,0,1,t),m=Ty.rc("cubicbezier")(m,h,h+a._7(),o+l.P7(),o)}else m=Ty.rc(p)((f-c)*d,h,o-h,f-c);return"integer"===e.Ket()?Math.floor(m):m}}}}{const Gy=self._s;Gy.oit.$nt=class{constructor(){}static Eht(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.vht(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Pht(t)}return n!==i}static Sc(t,s,i,e){if(!i){let t=e.Det();return t=e.hit().yrt(t),t.T7()}let n=e.ytt();if("default"===n&&(n="continuous"),"combo"===e.Ket()&&(n="discrete"),"discrete"===n)return s.T7();if("continuous"===n||"step"===n){const r=e.ait().mtt();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s._F(),o=i._F(),a=s.T7(),l=i.T7();"step"===n&&0!==r&&(t=Gy.Zn(t,h,o));const u=s.M7("angle");if(!u){if(a===l)return a;const i=Gy.normalize(t,h,o),e=self.ju.rc(s.Ent());return Gy.ur(a,l,e(i,0,1,1))}{const i=u.kot();if(a===l&&0===i)return a;const e=Gy.normalize(t,h,o),n=self.ju.rc(s.Ent())(e,0,1,1);switch(u.Not()){case"closest":return Gy.ur(a,l,n,i);case"clockwise":return Gy.cr(a,l,n,i);case"anti-clockwise":return Gy.dr(a,l,n,i)}}}}}}{const Iy=self._s;Iy.oit.Bnt=class{constructor(){}static Eht(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.vht(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Pht(t)}return!!n!=!!i}static Sc(t,s,i,e){if(!i){let t=e.Det();return t=e.hit().yrt(t),t.T7()?1:0}return s.T7()?1:0}}}{const _y=self._s,Cy=[0,0,0],Ey=[0,0,0],Py=[0,0,0];_y.oit.Wnt=class{constructor(){}static Eht(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.vht(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Pht(t)}return Array.isArray(i)?(Cy[0]=i[0],Cy[1]=i[1],Cy[2]=i[2]):(Py.ha(i),Cy[0]=Math.floor(255*Py.No()),Cy[1]=Math.floor(255*Py.$o()),Cy[2]=Math.floor(255*Py.Bo())),Array.isArray(n)?(Ey[0]=n[0],Ey[1]=n[1],Ey[2]=n[2]):(Py.ha(n),Ey[0]=Math.floor(255*Py.No()),Ey[1]=Math.floor(255*Py.$o()),Ey[2]=Math.floor(255*Py.Bo())),Cy[0]!==Ey[0]||Cy[1]!==Ey[1]||Cy[2]!==Ey[2]}static Sc(t,s,i,e){if(!i){let t=e.Det();t=e.hit().yrt(t);const s=t.T7();return Cy[0]=s[0],Cy[1]=s[1],Cy[2]=s[2],Cy}let n=e.ytt();if("default"===n&&(n="continuous"),"discrete"===n){const t=s.T7();return Cy[0]=t[0],Cy[1]=t[1],Cy[2]=t[2],Cy}if("continuous"===n||"step"===n){const r=e.ait().mtt();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s._F(),o=i._F(),a=s.T7(),l=i.T7();"step"===n&&0!==r&&(t=_y.Zn(t,h,o));const u=_y.normalize(t,h,o),c=s.Ent(),f=a[0],d=a[1],p=a[2],m=l[0],g=l[1],y=l[2],w=self.ju.rc(c),S=o-h,b=S*u;return Cy[0]=f===m?f:w(b,f,m-f,S),Cy[1]=d===g?d:w(b,d,g-d,S),Cy[2]=p===y?p:w(b,p,y-p,S),Cy}}}}{const Ay=self._s;Ay.oit.jnt=class{constructor(){}static Eht(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.vht(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Pht(t)}return n!==i}static Sc(t,s,i,e){if(!i){let t=e.Det();return t=e.hit().yrt(t),t.T7()}return s.T7()}}}{const Ry=self._s;Ry.o6=class{constructor(){this.$ot=new Map}qn(){for(const t of this.$ot.values())t.qn();this.$ot.clear(),this.$ot=null}$u(t){const s=new Ry.Bot(t),i=s.Ec();this.$ot.set(i,s)}qs(t){return this.$ot.get(t)}stt(){return 0}static Wot(t,s,i,e){if(s)for(const n of s)Ry.o6.jot("create",n,t,i,e)}static Vot(t,s,i,e){if(s)for(const n of s)Ry.o6.jot("create-including-disabled",n,t,i,e)}static Uot(t,s,i,e){t.length?s.forEach(((s,i)=>{t[i].v3(s)})):s.forEach((s=>{Ry.o6.jot("load",s,t,i,e)}))}static jot(t,s,i,e,n){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,n);break;case"create":case"create-including-disabled":r=new e(s,n)}else if("object"==typeof e){const i=s[e.Hot],h=e.map.get(i);switch(t){case"load":r=new h(null,n);break;case"create":case"create-including-disabled":r=new h(s,n)}}switch(t){case"load":r.v3(s),i.push(r);break;case"create":if("function"==typeof r.Ait&&!r.Ait())return r.qn();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const Oy=self._s,Fy=0,Dy=1,Ly=2,ky=3,Ny=4,$y=5,By=6,Wy=7,jy=8,Vy=9,Uy=10,Hy=11;Oy.Bot=class{constructor(t){this.Yn="",this.mst=NaN,this.qot=0,this.zot="default",this.Jot="default",this.Yot=!1,this.Xot=!1,this.Zot=1,this.Vst=null,this.Kot="",this.Qot=!1,this.tat=!0,t&&(this.Yn=t[0],this.mst=t[1],this.qot=t[2],this.zot=t[3],this.Jot=t[4],this.Yot=!!t[6],this.Xot=!!t[7],this.Zot=t[8],this.Kot=t[9],this.Qot=!!t[10],this.tat=!!t[11],this.Vst=new Oy.sat(t[5],this))}qn(){this.Vst.qn(),this.Vst=null}ott(){return this.Vst||(this.Vst=new Oy.sat(null,this)),this.Vst}Ec(){return this.Yn}RY(t){this.Yn=t}Nz(){return this.mst}kz(t){this.mst=t}mtt(){return this.qot}gtt(t){this.qot=t}ytt(){return this.zot}wtt(t){this.zot=t}g7(){return this.Jot}Stt(t){this.Jot=t}Bz(){return this.Yot}$z(t){this.Yot=t}jz(){return this.Xot}Wz(t){this.Xot=t}ez(){return this.Zot}btt(t){this.Zot=t}N8(){return this.Kot}vtt(){return this.Qot}Mtt(){return this.tat}b3(){return{trackDataJson:this.Vst.b3(),name:this.Yn,totalTime:this.mst,step:this.qot,interpolationMode:this.zot,resultMode:this.Jot,loop:this.Yot,pingPong:this.Xot,repeatCount:this.Zot,startOnLayout:this.Kot,transformWithSceneGraph:!!this.Qot,useSystemTimescale:this.tat}}v3(t){t&&(this.ott().v3(t.trackDataJson),this.Yn=t.name,this.mst=t.totalTime,this.qot=t.step,this.zot=t.interpolationMode,this.Jot=t.resultMode,this.Yot=t.loop,this.Xot=t.pingPong,this.Zot=t.repeatCount,this.Kot=t.startOnLayout,this.Qot=!!t.transformWithSceneGraph,this.tat=!!t.useSystemTimescale)}}}{const qy=self._s,zy=0,Jy=1,Yy=2,Xy=1,Zy=2,Ky=3,Qy=4,tw=5,sw=6,iw=7,ew=0,nw=1,rw=8,hw=0,ow=1,aw=9,lw=10;class uw{constructor(t,s){this.Vst=s,this.iat=null,this.eat=null,this.Ust=NaN,this.Hst=NaN,this.zot="default",this.Jot="default",this.fu=!1,this.nat=null,this.Tet=null,this.Bc="",this.rat=null,this.hat=0,this.oat=this.Vst.ptt().Nz(),this.qc=0,this.Yn="",t&&(t[0]&&(this.iat=t[0],this.Ust=t[0][2],this.Hst=t[0][1]),this.zot=t[1],this.Jot=t[2],this.fu=!!t[3],t[6]&&(this.Bc=t[6]),t[7]&&(this.rat=t[7],this.hat=t[7][0],this.oat=t[7][1]),t[8]&&(this.eat=t[8]),t[8]&&(this.eat=t[8]),t[9]&&(this.qc=t[9]),t[10]&&(this.Yn=t[10]),this.nat=new qy.aat(t[4],this),this.Tet=new qy.lat(t[5],this))}qn(){this.iat=null,this.Vst=null,this.nat&&(this.nat.qn(),this.nat=null),this.Tet&&(this.Tet.qn(),this.Tet=null),this.rat=null}ott(){return this.Vst}bst(){return this.nat||(this.nat=new qy.aat(null,this)),this.nat}hit(){return this.Tet||(this.Tet=new qy.lat(null,this)),this.Tet}uat(){return this.iat}fit(){return this.Hst}Oit(t){this.Hst=t}cit(){return this.Ust}Cit(t){this.Ust=t}ytt(){return this.zot}wtt(t){this.zot=t}g7(){return this.Jot}Stt(t){this.Jot=t}Ait(){return this.fu}Rit(t){this.fu=!!t}aJ(){return this.Bc}wst(){return this.hat}Eit(){return this.oat}Pit(t){this.oat=t}Dit(){return this.eat[0]}Fit(t){this.eat||(this.eat=[]),this.eat[0]=t}Nit(){return this.eat||(this.eat=[]),this.eat[1]}kit(t){this.eat||(this.eat=[]),this.eat[1]=t}DI(){return this.qc}Ec(){return this.Yn}b3(){return{keyframeDataJson:this.nat.b3(),propertyTrackDataJson:this.Tet.b3(),instanceData:this.iat,additionalInstanceData:this.eat,instanceUid:this.Ust,objectClassIndex:this.Hst,interpolationMode:this.zot,resultMode:this.Jot,enabled:this.fu,id:this.Bc,nestedData:this.rat,type:this.qc,name:this.Yn}}v3(t){t&&(this.iat=t.instanceData,this.Ust=t.instanceUid,this.Hst=t.objectClassIndex,this.zot=t.interpolationMode,this.Jot=t.resultMode,this.fu=t.enabled,this.Bc=t.id,this.qc=t.type?t.type:0,this.Yn=t.name?t.name:"",this.oat=this.Vst.ptt().Nz(),t.nestedData&&(this.rat=t.nestedData,this.hat=this.rat[0],this.oat=this.rat[1]),t.additionalInstanceData&&(this.eat=t.additionalInstanceData),this.bst().v3(t.keyframeDataJson),this.hit().v3(t.propertyTrackDataJson))}}qy.sat=class{constructor(t,s){this.M9=s,this.cat=[],qy.o6.Wot(this.cat,t,uw,this)}qn(){this.M9=null;for(const t of this.cat)t.qn();qy.bh(this.cat),this.cat=null}ptt(){return this.M9}Gst(){const t=new uw(null,this);return this.cat.push(t),t}fat(t){return t.bst().tit()[0]}dat(t){return t.bst().tit().at(-1)}Kit(t,s){const i=s.bst().tit(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e._F()===t)return e}}pat(t,s){const i=s.bst().tit(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e._F()>t)return e}}Xit(t,s){const i=s.bst().tit(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e._F()>=t)return e}}Jit(t,s){const i=s.bst().tit();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e._F()<=t)return e}}*htt(){for(const t of this.cat)yield t}b3(){return{trackDataItemsJson:this.cat.map((t=>t.b3()))}}v3(t){t&&qy.o6.Uot(this.cat,t.trackDataItemsJson,uw,this)}}}{const cw=self._s,fw=0,dw=0,pw=1,mw=2,gw=3,yw=4,ww=5,Sw=6,bw=7,vw=8,Mw=9;class xw{constructor(t,s){this.Tet=s,this.mat="",this.gat=null,this.tht=null,this.qc=null,this.yat=NaN,this.wat=NaN,this.zot="default",this.Jot="default",this.fu=!1,this.Sat=null,this.bat=!0,t&&(this.mat=t[0][0],this.gat=t[0].slice(1),this.tht=t[1],this.qc=t[2],this.yat=t[3],this.wat=t[4],this.zot=t[5],this.Jot=t[6],this.fu=!!t[7],this.Sat=new cw.vat(t[8],this),this.bat=t[9])}qn(){this.Sat.qn(),this.Sat=null,this.Tet=null,this.gat=null}hit(){return this.Tet}Cet(){return this.Sat||(this.Sat=new cw.vat(null,this)),this.Sat}yit(){return this.mat}Vet(t){this.mat=t}Het(){return this.gat}zet(t){this.gat=t}Yet(){return this.tht}Zet(t){this.tht=t}DI(){return this.qc}tnt(t){this.qc=t}ent(){return this.yat}nnt(t){this.yat=t}rnt(){return this.wat}hnt(t){this.wat=t}ytt(){return this.zot}wtt(t){this.zot=t}g7(){return this.Jot}Stt(t){this.Jot=t}Ait(){return this.fu}Rit(t){this.fu=!!t}ant(){return!!this.bat}b3(){return{propertyKeyframeDataJson:this.Sat.b3(),sourceAdapterId:this.mat,sourceAdapterArguments:this.gat,property:this.tht,type:this.qc,min:this.yat,max:this.wat,interpolationMode:this.zot,resultMode:this.Jot,enabled:this.fu,canHavePropertyKeyframes:this.bat}}v3(t){t&&(this.mat=t.sourceAdapterId,this.gat=t.sourceAdapterArguments,this.tht=t.property,this.qc=t.type,this.yat=t.min,this.wat=t.max,this.zot=t.interpolationMode,this.Jot=t.resultMode,this.fu=t.enabled,this.bat=t.canHavePropertyKeyframes,this.Cet().v3(t.propertyKeyframeDataJson))}}cw.lat=class{constructor(t,s){this.jst=s,this.Mat=[],cw.o6.Wot(this.Mat,t,xw,this)}qn(){this.jst=null;for(const t of this.Mat)t.qn();cw.bh(this.Mat),this.Mat=null}Sst(){return this.jst}het(){const t=new xw(null,this);return this.Mat.push(t),t}int(t){return t.Cet()._et()[0]}yrt(t){return t.Cet()._et().at(-1)}lnt(t,s){const i=s.Cet()._et(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e._F()===t)return e}}fnt(t,s){const i=s.Cet()._et(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e._F()>t)return e}}dnt(t,s){const i=s.Cet()._et(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e._F()>=t)return e}}unt(t,s){const i=s.Cet()._et();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e._F()<=t)return e}}*rit(){for(const t of this.Mat)yield t}b3(){return{propertyTrackDataItemsJson:this.Mat.map((t=>t.b3()))}}v3(t){t&&cw.o6.Uot(this.Mat,t.propertyTrackDataItemsJson,xw,this)}}}{const Tw=self._s,Gw=0,Iw=1,_w=2,Cw=3;class Ew{constructor(t,s){if(this.nat=s,this.xD=-1,this.xat="noease",this.Tat=!1,this.Y9=null,this.Gat=null,!t)return;this.xD=t[0],this.xat=t[1],this.Tat=!!t[2];const i=t[3];this.Y9=i?i.split(" "):[],this.Gat=new Set(this.Y9.map((t=>t.toLowerCase()))),this.Iat=null,this._at=null}qn(){this.nat=null,Tw.bh(this.Y9),this.Y9=null,this.Gat.clear(),this.Gat=null,this.Iat=null}bst(){return this.nat}a7(){return this.Iat}Cat(t){this.Iat=t}Zit(){return this._at}Eat(t){this._at=t}_F(){return this.xD}Lz(t){this.xD=t,this.nat.Pat()}Ent(){return this.xat}eJ(t){this.xat=t}Ait(){return this.Tat}Rit(t){this.Tat=!!t}qz(){return this.Y9}Gtt(t){this.Y9=t?t.split(" "):[],this.Gat=new Set(this.Y9.map((t=>t.toLowerCase())))}Aat(){return this.Gat}Nst(t){return this.Gat.has(t.toLowerCase())}b3(){return{time:this.xD,ease:this.xat,enable:this.Tat,tags:this.Y9}}v3(t){t&&(this.xD=t.time,this.xat=t.ease,this.Tat=t.enable,this.Y9=t.tags,this.Gat=new Set(this.Y9.map((t=>t.toLowerCase()))))}}Tw.aat=class{constructor(t,s){this.jst=s,this.Qst=[],Tw.o6.Wot(this.Qst,t,Ew,this),this.Pat()}qn(){this.jst=null;for(const t of this.Qst)t.qn();Tw.bh(this.Qst),this.Qst=null}Pat(){this.Qst.sort(((t,s)=>t._F()-s._F()));for(let t=0;t<this.Qst.length;t++){const s=this.Qst[t];s.Cat(this.Qst[t+1]),s.Eat(this.Qst[t-1])}}Sst(){return this.jst}Rat(){return this.Qst.length}tit(){return this.Qst}net(){const t=new Ew(null,this);return this.Qst.push(t),this.Pat(),t}aet(t){for(const s of this.Qst){if(!t(s))continue;const i=this.Qst.indexOf(s);-1!==i&&(s.qn(),this.Qst.splice(i,1))}this.Oat(),this.Pat()}Oat(){this.Qst.sort(((t,s)=>t._F()-s._F()))}bet(t){return this.Qst.indexOf(t)}vet(t){return this.Qst[t]}*Fat(){for(const t of this.Qst)yield t}*Dat(){for(let t=this.Qst.length-1;t>=0;t--)yield this.Qst[t]}b3(){return{keyframeDataItemsJson:this.Qst.map((t=>t.b3()))}}v3(t){t&&(Tw.o6.Uot(this.Qst,t.keyframeDataItemsJson,Ew,this),this.Pat())}}}{const Pw=self._s,Aw=0,Rw=0,Ow=1,Fw=2,Dw=1,Lw=2,kw=3,Nw=4,$w=5;class Bw{constructor(t,s){this.Sat=s,this.Mrt=null,this.Lat=null,this.qc="",this.xD=NaN,this.xat="noease",this.Tat=!1,this.kat=null,this.Nat=void 0,this.$at="line",t&&(this.Mrt=t[0][0],this.Lat=t[0][1],this.qc=t[0][2],this.xD=t[1],this.xat=t[2],this.Tat=!!t[3],this.$at=t[5],this.kat=null,t[4]&&(this.kat=new Pw.Bat(t[4],this)),this.Iat=null,this.Wat=null)}qn(){this.Sat=null,this.kat&&(this.kat.qn(),this.kat=null),this.Iat=null,this.Wat=null}jat(){return this.kat}Cat(t){this.Iat=t}a7(){return this.Iat}Vat(t){this.Wat=t}l7(){return this.Wat}Jet(){return this.Mrt}Pnt(t){"color"===this.qc&&Pw.te(t)?(this.Mrt[0]=Pw.Pr(t),this.Mrt[1]=Pw.Ar(t),this.Mrt[2]=Pw.Rr(t)):this.Mrt=t}aht(){return this.Lat}Int(t){"color"===this.qc&&Pw.te(t)?(this.Lat[0]=Pw.Pr(t),this.Lat[1]=Pw.Ar(t),this.Lat[2]=Pw.Rr(t)):this.Lat=t}T7(){const t=this.Sat.Det().g7();return"relative"===t?this.Jet():"absolute"===t?this.aht():void 0}DI(){return this.qc}tnt(t){this.qc=t}_F(){return this.xD}Lz(t){this.xD=t,this.Sat.Uat()}Ent(){return this.xat}eJ(t){this.xat=t}Ait(){return this.Tat}Rit(t){this.Tat=!!t}u7(){return this.$at}M7(t){if(!this.kat)return;if(this.Nat||null===this.Nat)return this.Nat;const s=this.kat.Hat();if(!s)return this.Nat=null,this.Nat;const i=s.length;for(let e=0;e<i;e++){const i=s[e];if(i.aJ()===t)return this.Nat=i,this.Nat}return this.Nat=null,this.Nat}b3(){const t=this.kat;return{addonDataJson:t?t.b3():t,value:this.Mrt,aValue:this.Lat,type:this.qc,time:this.xD,ease:this.xat,enable:this.Tat}}v3(t){t&&(t.addonDataJson&&this.kat.qat(t.addonDataJson),this.Mrt=t.value,this.Lat=t.aValue,this.qc=t.type,this.xD=t.time,this.xat=t.ease,this.Tat=t.enable)}}Pw.vat=class{constructor(t,s){this.xet=s,this.Iet=[],this.zat=[],Pw.o6.Wot(this.Iet,t,Bw,this),Pw.o6.Vot(this.zat,t,Bw,this),this.Uat()}qn(){this.xet=null;for(const t of this.Iet)t.qn();Pw.bh(this.Iet),this.Iet=null;for(const t of this.zat)t.qn();Pw.bh(this.zat),this.zat=null}Uat(){let t=this.Iet;t.sort(((t,s)=>t._F()-s._F()));for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.Cat(t[s+1]),s-1>=0&&i.Vat(t[s-1])}t=this.zat,t.sort(((t,s)=>t._F()-s._F()));for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.Cat(t[s+1]),s-1>=0&&i.Vat(t[s-1])}}Tnt(){const t=new Bw(null,this);return this.Iet.push(t),this.Uat(),t}Gnt(t){for(const s of this.Iet){if(!t(s))continue;const i=this.Iet.indexOf(s);-1!==i&&(s.qn(),this.Iet.splice(i,1))}this.Jat(),this.Uat()}Jat(){this.Iet.sort(((t,s)=>t._F()-s._F()))}Det(){return this.xet}Yat(){return this.Iet.length}yrt(){return this.Iet[this.Iet.length-1]}_et(){return this.Iet}o7(){return this.zat}*Xat(){for(const t of this.Iet)yield t}*Zat(){for(let t=this.Iet.length-1;t>=0;t--)yield this.Iet[t]}b3(){const t=this.Iet,s=this.zat;return{propertyKeyframeDataItemsJson:t.map((t=>t.b3())),propertyKeyframeDataItemsIncludingDisabledJson:s.map((t=>t.b3()))}}v3(t){t&&(Pw.o6.Uot(this.Iet,t.propertyKeyframeDataItemsJson,Bw,this),Pw.o6.Uot(this.zat,t.propertyKeyframeDataItemsIncludingDisabledJson,Bw,this),this.Uat())}}}{const Ww=self._s,jw=0,Vw=1;class Uw{constructor(t,s){this.kat=s,this.Bc=t[0],this.Kat=t[1]}qn(){this.kat=null,this.Kat=null}jat(){return this.kat}aJ(){return this.Bc}b3(){return{id:this.Bc,data:this.Kat}}v3(t){t&&(this.Bc=t.id,this.Kat=t.data)}}const Hw=0,qw=1,zw=2,Jw=3;class Yw extends Uw{constructor(t,s){super(t,s),this.Qat=this.Kat[0],this.tlt=!!this.Kat[1],this.slt=this.Kat[2],this.ilt=!!this.Kat[3]}qn(){super.qn()}_7(){return this.Qat}Dot(){return this.tlt}P7(){return this.slt}Lot(){return this.ilt}b3(){return Object.assign(super.b3(),{startAnchor:this.Qat,startEnable:!!this.tlt,endAnchor:this.slt,endEnable:!!this.ilt})}v3(t){t&&(super.v3(t),this.Qat=t.startAnchor,this.tlt=!!t.startEnable,this.slt=t.endAnchor,this.ilt=!!t.endEnable)}}const Xw=0,Zw=1;class Kw extends Uw{constructor(t,s){super(t,s),this.elt=this.Kat[0],this.nlt=this.Kat[1]}qn(){super.qn()}Not(){return this.elt}kot(){return this.nlt}b3(){return Object.assign(super.b3(),{direction:this.elt,revolutions:this.nlt})}v3(t){t&&(super.v3(t),this.elt=t.direction,this.nlt=t.revolutions)}}Ww.Bat=class{constructor(t,s){this.rlt=s,this.hlt=[],Ww.o6.Wot(this.hlt,t,{Hot:0,map:new Map([["cubic-bezier",Yw],["angle",Kw]])},this)}qn(){this.rlt=null;for(const t of this.hlt)t.qn();Ww.bh(this.hlt),this.hlt=null}olt(){return this.rlt}Hat(){return this.hlt}*llt(){for(const t of this.hlt)yield t}b3(){return{addonDataItemsJson:this.hlt.map((t=>t.b3()))}}v3(t){t&&Ww.o6.Uot(this.hlt,t.addonDataItemsJson,{Hot:"id",map:new Map([["cubic-bezier",Yw],["angle",Kw]])},this)}}}{const Qw=self._s,tS="start-value",sS="current-state",iS=0,eS=1;let nS=0;Qw.mot=class extends Qw.W6{constructor(t,s){super("tween-"+nS++,t,s),this.Bc="",this.ult=!1,this.clt="start-value",this.qst=null,this.flt=null,this.dlt=null,this.plt=null,this.Met=null,this.mlt=null}ett(t){const s=Qw.Hn(Qw.Event,"tweenstatereleased");s.glt=this,t.dispatchEvent(s)}DI(){return 1}_9(){for(const t of this.M9.ott().htt())this.x9.push(Qw.ylt.AG(this,t));this.Met=this.x9[0]}Tst(){const t=this.M9.ott().Gst(),s=Qw.ylt.AG(this,t);return this.x9.push(s),this.wlt(),s}wlt(){this.Met=this.x9[0]}uJ(t){return this.Met.Ost()[0]}Qet(t){this.Slt=t}nJ(){const t=this.n7();if(!t||!t.length)return;const s=t[0];if(this.Met=s,!s)return;const i=s.nJ();return s.uit()?i:void 0}blt(t){this.plt=t}vlt(t){this.dlt||(this.dlt=[]),this.dlt.push(t)}Mlt(t){this.flt||(this.flt=[]),this.flt.push(t)}xlt(t){if(!this.dlt)return;const s=this.dlt.indexOf(t);-1!==s&&this.dlt.splice(s,1)}Tlt(t){if(!this.flt)return;const s=this.flt.indexOf(t);-1!==s&&this.flt.splice(s,1)}Glt(t,s){for(const i of this.x9)for(const e of i.sit){if(e.Fst()!==s)continue;const i=e.hit(),n=e.Det(),r=i.int(n);r.Pnt(t),r.Int(t)}}Ilt(t){for(const s of this.x9)for(const i of s.sit)if(i.Fst()===t)return i}_lt(t){for(const s of t){const t=this.Ilt(s);this.Glt(t.gnt(),s)}if(this.Ttt()){const t=this.Nz()-this._F();this.kz(t);for(const s of this.x9)s.Pit(t);this.Ytt(0)}else{const t=this._F();this.kz(t);for(const s of this.x9)s.Pit(t);this.Ytt(t)}this.Xtt()}Clt(t,s){const i=this.Ilt(s),e=i.hit(),n=i.Det(),r=e.yrt(n);r.Lz(this.Nz()),r.Pnt(t),r.Int(t)}Elt(t){this.Bc=t}aJ(){return this.Bc}Plt(t){this.clt=t}Alt(){return this.clt}oJ(t){this.ult=t}hJ(){return this.ult}Ett(){if(this.dlt)for(const t of this.dlt)t(this);if(!this.F8())for(const t of this.x9)t.fet()}ktt(){this.V9=this.Nc.mN()}L8(){if(!this.q9&&(this.q9=!0,this.flt))for(const t of this.flt)t(this)}Lz(t){this.Rlt(),super.Lz(t)}sst(t){Qw.te(t)||(t=this.Nz()),t<0?this.P9=0:t>=this.Nz()?this.P9=this.Nz():this.P9=t,this.Met.ist()}G8(t){if(!this.D8()&&"current-state"===this.Alt())for(const t of this.x9)t.cet();super.G8(t)}Oz(t=!1){if(super.Oz(t),!this.F8())for(const t of this.x9)t.uet()}$f(t=!0,s=!1){this.Rlt(),super.$f(t,s)}Rlt(){for(const t of this.x9){const s=t=>{const s=t._F(),i=this.Nz();return 0!==s&&s!==i};t.oet(s),t.let(s)}}T6(){if(this.Az())return!0;const t=this.nJ();return!(t&&t.WV().x0()||(this.v9.v8(this),this.ust(),0))}E8(t,s,i){if(this.qst||(this.qst=this.nJ()),!this.qst||this.qst.zJ())return this.Oz(!0),void this.ktt();const e=this.qst.SN();if(-1!==e&&(t=i*e),0===t&&0===this.J9)return;this.J9=t;const n=this.P9+this.A9+t*this.R9,r=this.M9.mst;n<0?(this.P9=0,this.A9=-n):n>=r?(this.P9=r,this.A9=this.P9-n):(this.P9=n,this.A9=0);let h=!1,o=!1;const a=this.Bz(),l=this.jz();if(a||l?a&&!l?this.R9>0?this.P9>=r&&(this.sst(0),this.Olt(Qw.Llt.Dlt.P$.Flt),this.Olt(Qw.Llt.Dlt.P$.klt),o=!0):this.P9<=0&&(this.sst(r),this.Olt(Qw.Llt.Dlt.P$.Flt),this.Olt(Qw.Llt.Dlt.P$.klt),o=!0):!a&&l?this.R9>0?this.P9>=r&&(this.Ytt(r),this.Vz(-1*this.Uz()),o=!0,1===this.O9?this.D9<this.ez()?(this.D9++,this.Olt(Qw.Llt.Dlt.P$.Flt),this.Olt(Qw.Llt.Dlt.P$.klt),this.Olt(Qw.Llt.Dlt.P$.Nlt),this.Olt(Qw.Llt.Dlt.P$.$lt),this.IsPlaying()?this.O9=0:this.F9=0):(this.Olt(Qw.Llt.Dlt.P$.Nlt),this.Olt(Qw.Llt.Dlt.P$.$lt),h=!0):0===this.O9&&(this.Olt(Qw.Llt.Dlt.P$.Nlt),this.Olt(Qw.Llt.Dlt.P$.$lt),this.IsPlaying()?this.O9=1:this.F9=1)):this.P9<=0&&(this.Ytt(0),this.Vz(-1*this.Uz()),o=!0,1===this.O9?this.D9<this.ez()?(this.D9++,this.Olt(Qw.Llt.Dlt.P$.Flt),this.Olt(Qw.Llt.Dlt.P$.klt),this.Olt(Qw.Llt.Dlt.P$.Nlt),this.Olt(Qw.Llt.Dlt.P$.$lt),this.IsPlaying()?this.O9=0:this.F9=0):(h=!0,this.Olt(Qw.Llt.Dlt.P$.Nlt),this.Olt(Qw.Llt.Dlt.P$.$lt)):0===this.O9&&(this.Olt(Qw.Llt.Dlt.P$.Nlt),this.Olt(Qw.Llt.Dlt.P$.$lt),this.IsPlaying()?this.O9=1:this.F9=1)):a&&l&&(this.R9>0?this.P9>=r&&(this.Ytt(r),this.Vz(-1*this.Uz()),o=!0,0===this.O9&&(this.Olt(Qw.Llt.Dlt.P$.Nlt),this.Olt(Qw.Llt.Dlt.P$.$lt)),1===this.O9&&(this.Olt(Qw.Llt.Dlt.P$.Flt),this.Olt(Qw.Llt.Dlt.P$.klt),this.Olt(Qw.Llt.Dlt.P$.Nlt),this.Olt(Qw.Llt.Dlt.P$.$lt)),this.IsPlaying()?(this.O9++,this.O9=Qw.wrap(this.O9,0,2)):(this.F9=this.O9+1,this.F9=Qw.wrap(this.F9,0,2))):this.P9<=0&&(this.Ytt(0),this.Vz(-1*this.Uz()),o=!0,0===this.O9&&(this.Olt(Qw.Llt.Dlt.P$.Nlt),this.Olt(Qw.Llt.Dlt.P$.$lt)),1===this.O9&&(this.Olt(Qw.Llt.Dlt.P$.Flt),this.Olt(Qw.Llt.Dlt.P$.klt),this.Olt(Qw.Llt.Dlt.P$.Nlt),this.Olt(Qw.Llt.Dlt.P$.$lt)),this.IsPlaying()?(this.O9++,this.O9=Qw.wrap(this.O9,0,2)):(this.F9=this.O9+1,this.F9=Qw.wrap(this.F9,0,2)))):this.R9>0?this.P9>=r&&(this.D9<this.ez()?(this.D9++,this.sst(0),this.Olt(Qw.Llt.Dlt.P$.Flt),this.Olt(Qw.Llt.Dlt.P$.klt),o=!0):(this.Ytt(r),h=!0)):this.P9<=0&&(this.D9<this.ez()?(this.D9++,this.sst(r),this.Olt(Qw.Llt.Dlt.P$.Flt),this.Olt(Qw.Llt.Dlt.P$.klt),o=!0):(this.Ytt(0),h=!0)),this.IsPlaying()){if(h)return this.Met.gst(),this.Oz(!0),void this.ktt();this.Met.Sc(this.P9,!0,!1,o,this.z9,!1),this.z9&&(this.z9=!1)}}Olt(t){const s=this.nJ();this.plt.Blt(this),this.Nc.xU(t,s,this.plt.Wq()),this.plt.Wlt()}b3(){const t=super.b3(),s=this.ptt();return Object.assign(t,{tweenDataItemJson:s.b3(),id:this.Bc,destroyInstanceOnComplete:this.ult,initialValueMode:this.clt})}v3(t){t&&(this.ptt().v3(t.tweenDataItemJson),super.v3(t),this.Bc=t.id,this.ult=t.destroyInstanceOnComplete,this.clt=t.initialValueMode,this.wlt())}static IsPlaying(t){return t.IsPlaying()}static Xz(t){return t.Xz()}static jlt(t){return!!t.jz()&&0===t.xtt()}static Vlt(t){return!!t.jz()&&1===t.xtt()}static Ult(t){const s=t.runtime.ltt(),i=new Qw.Bot;if(t.json){i.v3(t.json.tweenDataItemJson);const e=new Qw.mot(i,s);return e.v3(t.json),e}{const e=new Qw.mot(i,s);Qw.Te(t.Hlt)||(t.Hlt=[t.Hlt]),e.Elt(t.id),e.Gtt(t.tags),e.Plt(t.qlt),e.oJ(t.zlt),e.$z(t.loop),e.Wz(t.Jlt),e.kz(t.time),e.gtt(0),e.wtt("default"),e.Stt(t.Hlt[0].Ylt),e.btt(t.iz);const n=e.Tst();n.Cit(t.jq.tU()),n.wtt("default"),n.Stt(t.Hlt[0].Ylt),n.Rit(!0),n.Oit(t.jq.WV().tk());const r=t.jq.Aq(),h=r.Lit()?r.Dit():t.jq.c$().jg(),o=r.Lit()?r.Nit():t.jq.c$().Kg();n.Fit(h),n.kit(o);const a=n.eet();a.Lz(0),a.eJ("noease"),a.Rit(!0),a.Gtt("");const l=n.eet();l.Lz(t.time),l.eJ("noease"),l.Rit(!0),l.Gtt("");for(const s of t.Hlt){const i=n.ret();i.Vet(s.Xlt),i.qet(s.Zlt),i.Xet(s.Git),i.Qet(s.type),i.nnt(NaN),i.hnt(NaN),i.wtt("default"),i.Stt(s.Ylt),i.Rit(!0);const e=i.xnt();e.tnt(s.valueType),e.Lz(0),e.eJ(s.Klt),e.Rit(!0),e.Pnt(s.Qlt),e.Int(s.Qlt);const r=i.xnt();r.tnt(s.valueType),r.Lz(t.time),r.eJ(s.Klt),r.Rit(!0),r.Pnt(s.tut),r.Int(s.tut),i.ctt()}return e}}static Cit(t,s){if(!isNaN(s))for(const i of t.n7())i.Cit(s)}static blt(t,s){t.blt(s)}sut(t,s){return this.mlt||(this.mlt=Qw.Hn(self.Qz,this,t,s)),this.mlt}}}{const rS=self._s;rS.ylt=class extends rS.att{constructor(t,s){super(t,s),this.iut=null,this.eut=null}static AG(t,s){return rS.Hn(rS.ylt,t,s)}nut(){1===this.sit.length?this.iut=this.sit[0]:(this.iut=this.sit[0],this.eut=this.sit[1])}iit(){for(const t of this.jst.hit().rit())this.sit.push(rS.rut.AG(this,t));this.nut()}ret(){const t=this.jst.hit().het(),s=rS.rut.AG(this,t);return this.sit.push(s),this.nut(),s}G8(){if(this.lit(),!this.uit()&&this.dtt())return;const t=this.ait().Ttt()?0:this.Eit();for(const s of this.sit)s.G8(t),0===this.eit&&1===s.Wit()&&(this.eit=1),0===this.L6&&1===s.I8()&&(this.L6=1);this.nit=0,this.sit.some((t=>t.pst()))&&(this.nit=1),this.Kst=this.jit(t),this.Yst=!1,this.Xst=!1,this.Sc(t)}yst(){}Sc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){if(this.qst||this.nJ(),this.qst)return!this.qst.zJ()&&(!r||!this.WV().x0())&&(this.eut?(this.iut.Sc(t,i,e,h),this.eut.Sc(t,i,e,h)):this.iut.Sc(t,i,e,h),void(0!==this.iut.Wit()&&(this.zst||(this.zst=this.qst.c$()),this.zst&&this.zst.KU())))}vst(){}v3(t){super.v3(t),this.nut()}}}{const hS=self._s;hS.rut=class extends hS.oit{constructor(t,s){super(t,s),this.hut=!1}static AG(t,s){return hS.Hn(hS.rut,t,s)}Sc(t,s=!1,i=!1,e=!1){let n,r;if(this.hut)n=this.Iet[0],r=this.Iet[1];else if(s)n=this.Tet.unt(t,this.xet),r=n.a7();else{if(this.Eet){const s=this.ait(),i=this.Eet.a7(),e=this.Eet._F(),n=i?i._F():s.Nz();(t<=e||t>=n)&&(this.Eet=this.Tet.unt(t,this.xet))}else this.Eet=this.Tet.unt(t,this.xet);n=this.Eet,r=n.a7()}this.Get.Sc(t,n,r,s,i,e)}xnt(){const t=this.xet.Cet().Tnt();return this.Eet=null,this.hut=this.ont().length<=2,t}let(t){this.Eet=null,this.xet.Cet().Gnt(t),this.hut=this.ont().length<=2}b3(){return{sourceAdapterJson:this.ctt().b3(),basic:this.hut}}v3(t){t&&(this.ctt().v3(t.sourceAdapterJson),this.hut=t.basic)}}}{const oS=self._s,aS=self.ju,lS=0,uS=1,cS=2;oS.bc=class extends oS.Vn{constructor(t,s=!0){super(),this.Yn=t[0],this.out=t[2],this.aut=[];for(const s of t[1]){const t=oS.lut.AG(this,s);this.aut.push(t)}for(let t=0;t<this.aut.length;t++){const s=this.aut[t],i=this.aut[t+1],e=this.aut[t-1];s.Cat(i),s.Vat(e)}this.uut=new Map,this.cut=new Map,this.fut(),s&&aS.Mc(this.Yn,((t,s,i,e)=>this.Sc(t,s,i,e)),null,{transition:this})}static AG(t){return oS.Hn(oS.bc,t)}qn(){for(const t of this.aut)t.qn();oS.bh(this.aut),this.aut=null,this.uut.clear(),this.uut=null,this.cut.clear(),this.cut=null}vc(t){this.out=!!t}dut(t){const s=this.cut.get(t);if(s)return s;for(const s of this.aut)if(s.mut()===t)return this.cut.set(t,s),s}gut(t){for(let s=this.aut.length-1;s>=0;s--){const i=this.aut[s],e=i.mut();if(e<=t){let s=i;if(e<t)return s;if(e===t){for(;s;){const t=s.l7();if(!t)break;if(t.mut()!==s.mut())break;s=t}return s}}}}Sc(t,s,i,e){let n=t/e;if(this.out){const n=this.dut(0),r=this.dut(1),h=s+(s+i)*n.yut(),o=(s+i)*r.yut()-h;return 0===e?h+o:aS.Tc(t,h,o,e)}0===e&&(n=1);let r=this.gut(n),h=r.a7();if(!h){const t=r.l7(),s=r;r=t,h=s}const o=h.mut()-r.mut(),a=oS.Xn(n,r.mut(),h.mut(),0,o);if(r.wut()||0===o){const t=s+(s+i)*r.yut(),e=(s+i)*h.yut()-t;return 0===o?1===a?t+e:t:aS.Tc(a,t,e,o)}const l=r.mut(),u=r.yut(),c=r.mut()+r.Sut(),f=r.yut()+r.but(),d=h.mut()+h.vut(),p=h.yut()+h.Mut(),m=h.mut(),g=h.yut();let y=aS.rc("spline")(a,l,u,c,f,d,p,m,g,this.uut.get(r));return y+=r.yut(),(1-y)*s+y*(s+i)}fut(){this.uut.clear();for(let t=0;t<this.aut.length-1;t++){const s=this.aut[t];if(!s.Dot())continue;const i=s,e=this.aut[t+1];if(!e.Lot())continue;const n=i.mut(),r=i.mut()+i.Sut(),h=e.mut()+e.vut(),o=e.mut();this.uut.set(i,aS.Gc(n,r,h,o))}}}}{const fS=self._s,dS=0,pS=1,mS=2,gS=3,yS=4,wS=5,SS=6,bS=7,vS=8;fS.lut=class extends fS.Vn{constructor(t,s){super(),this.xut=t,this.Tut=s[0],this.Gut=s[1],this.Iut=s[2],this._ut=s[3],this.Cut=s[4],this.Eut=s[5],this.tlt=s[6],this.ilt=s[7],this.Put=s[8],this.Iat=null,this.Wat=null}qn(){this.xut=null}static AG(t,s){return fS.Hn(fS.lut,t,s)}Cat(t){this.Iat=t}a7(){return this.Iat}Vat(t){this.Wat=t}l7(){return this.Wat}mut(){return this.Tut}yut(){return this.Gut}Sut(){return this.Iut}but(){return this._ut}vut(){return this.Cut}Mut(){return this.Eut}Dot(){return this.tlt}Lot(){return this.ilt}wut(){return"linear"===this.Put}Aut(){return"cubic"===this.Put}}}{const MS=self._s;MS.Rut=class extends MS.Vn{constructor(t){super(),this.Nc=t,this.Out=[]}qn(){for(const t of this.Out)t.qn();MS.bh(this.Out),this.Out=null}AG(t){this.Out.push(MS.bc.AG(t))}}}{const xS=self._s;xS.Fut=class extends xS.Vn{constructor(t){super(),this.Nc=t,this.Dut=null,this.Lut=null,this._6=t=>this.C6(t.jq)}qn(){if(this.k6(),this.Dut){for(const t of this.Dut.values())t.clear();this.Dut.clear()}this.Dut=null,this.Nc=null}AG(t){if(this.Dut||(this.Dut=new Map),!t)return;const s=t[0][16][0],i=t[1];this.Dut.has(i)||this.Dut.set(i,new Map),this.Dut.get(i).set(s,t)}N6(){const t=this.Nc.wf();t&&t.addEventListener("instancedestroy",this._6)}k6(){const t=this.Nc.wf();t&&t.removeEventListener("instancedestroy",this._6)}kut(){return!!this.Dut&&0!==this.Dut.size}Nut(t,s){let i=0;if(i=t instanceof xS.$ut?t.tk():t,!this.Dut.has(i))return;const e=this.Dut.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}But(t,s){this.Lut||(this.Lut=new WeakMap),this.Lut.has(t)||this.Lut.set(t,s)}Wut(t){if(!this.Lut)return"";return this.Lut.get(t)||""}C6(t){this.Lut&&this.Lut.has(t)&&this.Lut.delete(t)}}}{const TS=self._s;TS.jut=class{constructor(t){this.Nc=t,this.Vut=new TS.Uut}qn(){this.Vut.qn(),this.Vut=null,this.Nc=null}$$(){return this.Nc}AG(t){this.Vut.$u(t)}Hut(t){return this.Vut.qs(t)}qut(){return this.Vut.qut()}}}{const GS=self._s;GS.zut=class{constructor(t,s,i,e,n,r,h){this.Nc=n.$$(),this.Jut=n,this.Yut=t,this.Xut=i,this.Zut=e,this.Aw=s,this.a6=r,this.Kut=h??r.nJ().tU(),this.Qut(),this.tct=this.ict?.sct()??-1,this.ect=[],this.nct=null,this.rct=NaN,this.hct=null,this.oct=null,this.act=null,this.lct="",this.uct=null,this.cct="",this.fct="",this.dct=0,this.pct=!1,this.W9=!1}qn(){this.W9||(GS.bh(this.ect),this.ect=null,this.Nc=null,this.Jut=null,this.Zut=null,this.a6=null,this.nct=null,this.rct=NaN,this.hct&&this.hct.clear(),this.hct=null,this.oct=null,this.act=null,this.lct="",this.uct=null,this.cct="",this.fct="",this.W9=!0)}zn(){return this.W9}mct(){return this.Jut}$$(){return this.Nc}Ec(){return this.Yut}gct(){return this.Zut}Pz(){return this.Aw}K6(){return this.a6||(this.a6=this.Nc.h$(this.Kut).Aq()),this.a6}yct(){return this.wct(this.tct)}Sct(){const t=this.yct();return t?t.Pz():""}bct(){const t=this.yct();return t?t.qz():[]}vct(t){const s=this.bct();if(!s)return!1;if(!s.length)return!1;const i=GS.zut.Itt(t);return!(!i||!i.length)&&i.every(GS.zut.Ctt,s)}Mct(t,s){const i=this.bct();if(!i)return!1;if(!i.length)return!1;const e=GS.zut.Itt(t);return!(!e||!e.length)&&e.every((t=>GS.zut.xct.call(i,t,s)))}static Ctt(t){const s=this;return""===t?1===s.length&&""===s[0]:s.map((t=>t.trim().toLowerCase())).includes(t.trim().toLowerCase())}static Itt(t){return t.trim().split(" ")}static xct(t,s){const i=this;return""===t?1===i.length&&""===i[0]:i.some((i=>GS.compare(i.trim(),s,t.trim())))}Tct(t){const s=this.yct();if(s){if(GS.te(t)){const i=s.Gct(),e=i?i[t]:void 0;if(GS.te(e))return this.wct(e)}if("string"==typeof t)for(const i of s.Gct()){const s=this.wct(i);if(s.Dz(t))return this.wct(s.sct())}}}Ict(t){const s=this.Tct(t);return s?s.Pz():""}_ct(t){const s=this.Tct(t);return s?s.qz():""}Cct(t){const s=this.yct();if(!s)return-1;const i=s.Gct();if(!i)return-1;const e=this.Tct(t);return e?i.indexOf(e.sct()):-1}Ect(){const t=this.yct();if(!t)return 0;const s=t.Gct();return s?s.length:0}wct(t){return this.Zut.wct(t)}$f(){this.Act().Pct(!0)}Pct(t){if(this.Rct()){for(const[t,s]of this.Rct().entries())s.Pct(!1);this.Rct().clear()}if(this.hct=null,this.nct=null,this.Oct=null,this.oct=null,this.lct="",this.uct=null,this.cct="",this.fct="",this.ect=[],t){this.Jut.Fct(this);const t=this.ict.sct();t!==this.tct&&this.Dct(t)}else this.tct=this.ict.sct()}Lct(){const t=this.Zut.wct(this.tct);return t?t.Nct().kct():0}$ct(t){return!(t<0)&&t===this.Bct()}Bct(){const t=this.Zut.wct(this.tct);if(!t)return-1;let s=t.Nct().Wct();return s?t.Nct().jct().indexOf(s):-1}Vct(t){const s=this.Uct(t);return s?s.Ec():""}Hct(t){let s;return GS.te(t)&&(s=this.Uct(t)),"string"==typeof t&&(s=this.qct(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Jet():""}zct(t,s){if(t.Ait())return t.sct();{const i=t.Nct().Wct();if(!i)return s.sct();const e=i.Jct();if(!GS.te(e))return s.sct();const n=this.wct(e);return n?this.zct(n,s):s.sct()}}Yct(t,s){if(t.Ait()){if("reference"===t.DI()){const s=t.Xct(),i=t.Zct(),e=this.Jut.Hut(s);if(!e)return[-1,null];const n=e.Kct(i);return n?this.Yct(n,e):this.Yct(e.Qct(),e)}return[t.sct(),s]}{const i=t.Nct().Wct();if(!i)return[-1,null];const e=i.Jct();if(!GS.te(e))return[-1,null];const n=s.wct(e);return n?this.Yct(n,s):[-1,null]}}tft(t,s){let i=this.wct(t);if(i){if(!i.Ait()){const s=this.wct(this.tct);t=this.zct(i,s)}if(GS.te(t)&&t!==this.tct)if(i=this.wct(t),"reference"===i.DI()){const e=i.Xct(),n=i.Zct(),r=this.Jut.Hut(e);let h=r.Kct(n);if(h){const i=this.Yct(h,r);if(-1===i[0])return;s(this.tct,t,i[1],i[0])}else s(this.tct,t)}else s(this.tct,t)}}sft(t){let s;if(GS.te(t)&&(s=this.Uct(t)),"string"==typeof t&&(s=this.qct(t)),!s)return;let i=s.Jct();GS.te(i)&&this.tft(i,((t,s,i,e)=>{this.ect.push(t),this.Dct(s,i,e)}))}ift(){const t=this.eft();if(!t)return;const s=t.Jct();GS.te(s)&&this.tft(s,((t,s,i,e)=>{this.ect.push(t),this.Dct(s,i,e)}))}nft(t){const s=this.Zut.Kct(t);if(!s)return;const i=s.sct();GS.te(i)&&this.tft(i,((t,s,i,e)=>{this.ect.push(t),this.Dct(s,i,e)}))}rft(){const t=this.ect.pop();GS.te(t)?this.Dct(t):this.hft()&&(this.Jut.Fct(this.hft(),!0,!1,!1),this.hft().Dct(this.oft()),this.Act().aft(this.hft()))}lft(t){if(!this.yct())return;const s=this.Tct(t);if(s){if(!s.Ait())return;const t=s.sct();if(!GS.te(t))return;this.ect.push(this.tct),this.Dct(s.sct())}}uft(t){if(GS.te(t))return!!this.Zut.wct(this.tct).Nct().jct()[t];if("string"==typeof t){const s=this.Zut.wct(this.tct).Nct().jct();for(let i=0;i<s.length;i++)if(s[i].Ec()===t)return!0;return!1}return!1}cft(){this.pct=!0}fft(){return this.dct>0}dft(){this.dct++}pft(){this.dct--,0===this.dct&&this.pct&&this.Jut.mft(this)}Dct(t,s,i){const e=this.tct,n=this.K6().nJ();this.dft(),this.Jut.gft(this),this.Nc.xU(GS.R$.wft.P$.yft,n),this.Nc.xU(GS.R$.wft.P$.Sft,n),this.Nc.xU(GS.R$.wft.P$.bft,n),this.Nc.xU(GS.R$.wft.P$.vft,n),this.tct=t;let r=this.wct(this.tct);if("dictionary"===r.DI()&&(this.Nc.xU(GS.R$.wft.P$.Mft,n),this.Nc.xU(GS.R$.wft.P$.xft,n),this.Nc.xU(GS.R$.wft.P$.Tft,n),this.Nc.xU(GS.R$.wft.P$.Gft,n)),this.Jut.Ift(),this.pft(),!this.zn()&&(r=this.wct(this.tct),"reference"===r.DI())){const t=s?s.Ec():r.Xct();if(this._ft(r)){this.ect.pop();const t=this.Cft(r);this.Jut.Fct(t,!0,!0,!1),t.Eft(this,e),this.Act().aft(t)}else{const s="number"==typeof i?i:r.Zct();if(t){this.ect.pop();let i=r.Pft();if(i){let t=this.Jut.Aft(i);for(;t;)i=GS.Im(i),t=this.Jut.Aft(i)}else{i=`${t}-ref`;let s=this.Jut.Aft(i);for(;s;)i=GS.Im(i),s=this.Jut.Aft(i)}const n=this.Jut.Rft(t,s,i,this.a6,!0);n.Eft(this,e),this.Oft(r,n);const h=this.Act();n.Fft(h),h.aft(n)}}}}eft(){const t=this.Zut.wct(this.tct);return t?t.Nct().Wct():null}Uct(t){const s=this.Zut.wct(this.tct);if(!s)return null;const i=s.Nct().jct();if(!i)return null;return i[t]||null}qct(t){const s=this.Zut.wct(this.tct);if(!s)return null;return s.Nct().Dft(t)||null}Qut(t){if("number"==typeof t){let s=this.wct(t);s||(s=this.Zut.Qct()),this.ict=s}else if("number"==typeof this.Xut){let t=this.wct(this.Xut);t||(t=this.Zut.Qct()),this.ict=t}else{let t=this.Zut.Kct(this.Xut);t||(t=this.Zut.Qct()),this.ict=t}}b3(){return this.pct?null:{flowchartName:this.Yut,flowchartTag:this.Aw,startNodeTag:this.Xut,currentNodeId:this.tct,previousNodeIds:this.ect,pluginUID:this.a6.nJ().tU(),reference:{previousFlowchartTag:this.hft()?this.hft().Pz():"",previousStartNodeId:GS.te(this.oft())?this.oft():NaN,referencesJson:this.Lft(),currentReferenceFlowchartTag:this.kft()?this.kft().Pz():"",rootFlowchartTag:this.Act()?this.Act().Pz():""}}}Lft(){if(!this.Nft())return null;const t=[];for(const[s,i]of this.Rct().entries())t.push({flowchartElementId:s.sct(),flowchartStateTag:i.Pz()});return t.length?t:null}v3(t){if(t){if(this.Yut=t.flowchartName,this.Aw=t.flowchartTag,this.Xut=t.startNodeTag,this.tct=t.currentNodeId,this.ect=t.previousNodeIds,this.Kut=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.lct=s.previousFlowchartTag,this.rct=s.previousStartNodeId,this.uct=s.referencesJson,this.cct=s.currentReferenceFlowchartTag,this.fct=s.rootFlowchartTag}this.Qut()}}hft(){return"string"==typeof this.lct&&this.lct&&(this.nct=this.Jut.Aft(this.lct),this.lct=""),this.nct}oft(){return this.rct}Eft(t,s){this.nct=t,this.rct=s}kft(){return"string"==typeof this.cct&&this.cct&&(this.oct=this.Jut.Aft(this.cct),this.cct=""),this.oct}aft(t){this.oct=t,this.oct===this&&(this.oct=null)}Act(){return"string"==typeof this.fct&&this.fct&&(this.act=this.Jut.Aft(this.fct),this.fct=""),this.act?this.act:this}Fft(t){this.act=t}Nft(){return this.$ft(),!!this.hct}_ft(t){return this.$ft(),this.hct&&this.hct.has(t)}$ft(){if(this.uct){this.hct&&this.hct.clear(),this.hct||(this.hct=new Map);for(const t of this.uct){const s=this.Jut.Aft(t.flowchartStateTag),i=s.wct(t.flowchartElementId);this.hct.set(i,s)}this.uct=null}}Rct(){return this.$ft(),this.hct}Cft(t){return this.$ft(),this.hct.get(t)}Oft(t,s){this.hct||(this.hct=new Map),this.hct.set(t,s)}}}{const IS=self._s;IS.Bft=class{constructor(t){this.Nc=t,this.Wft=new Map,this.jft=null,this.Vft=[],this.Uft=()=>this.R6(),this.Hft=null}qn(){IS.bh(this.Vft),this.Vft=null,this.Wft.clear(),this.Wft=null,this.jft=null,this.Nc=null,this.Hft=null}$$(){return this.Nc}Hut(t){return this.Nc.mct().Hut(t)}Rft(t,s,i,e,n,r){const h=this.Nc.mct().Hut(t);if(!h)return void console.warn(`[Flowcharts] no flowchart found with name '${t}'`);if(this.Wft.has(i)){const t=this.Wft.get(i);t&&this.mft(t)}const o=new IS.zut(t,i,s,h,this,e,r);return this.Wft.set(i,o),n&&this.Fct(o,!0),o}mft(t){if(t.cft(),t.fft())return;const s=t.Pz();this.Wft.delete(s),t.qn(),this.jft===t&&(this.jft=null)}qft(t){t.$f()}Aft(t){return this.Wft.get(t)}gft(t){this.Vft.push(t)}Ift(){this.Vft.pop()}Fct(t,s=!1,i=!1,e=!0){if(e){const s=t.kft();t=s||t}t!==this.jft&&(this.zft(),this.Jft(t,s,i))}Yft(t){return"string"==typeof t?this.Aft(t):this.Vft.length?this.Vft[this.Vft.length-1]:this.jft}zft(){if(!this.jft)return;if(this.jft.zn())return;const t=this.jft.K6().nJ();this.jft.dft(),this.gft(this.jft),this.Nc.xU(IS.R$.wft.P$.Xft,t),this.Ift(),this.jft.pft()}Jft(t,s=!1,i=!1){if(this.jft=t,!this.jft)return;if(this.jft.zn())return;const e=this.jft.K6().nJ();this.jft.dft(),this.gft(this.jft),this.Nc.xU(IS.R$.wft.P$.Zft,e),!0!==i&&"number"!=typeof i||this.jft.Qut(i),s&&(this.Nc.xU(IS.R$.wft.P$.Mft,e),this.Nc.xU(IS.R$.wft.P$.xft,e),this.Nc.xU(IS.R$.wft.P$.Tft,e),this.Nc.xU(IS.R$.wft.P$.Gft,e)),this.Ift(),this.jft.pft()}b3(){return{flowchartJsonObjects:[...this.Wft.values()].map((t=>t.b3())),currentFlowchartTag:this.jft?this.jft.Pz():null}}v3(t){if(!t)return;this.Hft=t;const s=new Map;for(const t of this.Hft.flowchartJsonObjects){const i=t.flowchartTag;if(this.Wft.has(i)){const e=this.Wft.get(i);e.v3(t),s.set(i,e)}else{const i=this.Rft(t.flowchartName,t.startNodeTag,t.flowchartTag,null,!1,t.pluginUID);i.v3(t),s.set(t.flowchartTag,i)}}for(const[t,i]of this.Wft.entries())s.has(t)||i.qn();this.Wft.clear(),this.Wft=s,this.Nc.i4()?this.Nc.wf().addEventListener("afterload",this.Uft):this.R6()}R6(){this.Nc.wf().removeEventListener("afterload",this.Uft);const t=this.Wft.get(this.Hft.currentFlowchartTag);t&&this.Fct(t,!0),this.Hft=null}}}{const _S=self._s;_S.Uut=class{constructor(){this.Kft=new Map}qn(){for(const t of this.Kft.values())t.qn();this.Kft.clear(),this.Kft=null}$u(t){const s=new _S.Qft(t),i=s.Ec();this.Kft.set(i,s)}qs(t){return this.Kft.get(t)}qut(){return!!this.Kft.size}static tdt(t,s,i,e){if(s)for(const n of s){const s=new i(n,e);t.push(s)}}}}{const CS=self._s,ES=0,PS=1;CS.Qft=class{constructor(t){this.Yn=t[0],this.sdt=new CS.idt(t[1],this)}qn(){this.sdt.qn(),this.sdt=null}edt(){return this.sdt}wct(t){return this.sdt.wct(t)}Kct(t){return this.sdt.Kct(t)}Qct(){return this.sdt.Qct()}Ec(){return this.Yn}}}{const AS=self._s,RS=0,OS=1,FS=2,DS=3,LS=4,kS=5,NS=6,$S=7,BS=8,WS=8,jS=9,VS=10,US=11;class HS{constructor(t,s){this.sdt=s,this.qc=t[7],this.ndt=t[0],this.Aw=t[1],this.Aw?this.Y9=this.Aw.trim().split(" ").map((t=>t.trim())):this.Y9=[],this.rdt=t[2],this.hdt=null,this.odt=null,this.Tat=!1,"dictionary"===this.qc&&(this.hdt=t[3],this.odt=t[4],this.Tat=t[8]),this.adt=t[6],this.ldt=null,this.udt=null,this.cdt=null,"reference"===this.qc&&(this.ldt=t[8],this.udt=t[9],this.cdt=t[10],this.Tat=t[11]),this.fdt=new AS.ddt(t[5],this)}qn(){this.sdt=null}edt(){return this.sdt}Nct(){return this.fdt}sct(){return this.ndt}Pz(){return this.Aw}qz(){return this.Y9}Dz(t){if(!this.Y9)return!1;if(!this.Y9.length)return!1;const s=AS.zut.Itt(t);return!(!s||!s.length)&&s.every(AS.zut.Ctt,this.Y9)}pdt(){return this.adt}mdt(t){this.adt=!!t}gdt(){if("dictionary"===this.qc)return!0;if("reference"===this.qc)return!1;throw new Error(`unexpected flowchart node type: ${this.qc}`)}Gct(){return this.rdt}ydt(){return this.hdt}wdt(){return this.odt}DI(){return this.qc}Ait(){return this.Tat}Xct(){return this.ldt}Zct(){return this.udt}Pft(){return this.cdt}}AS.idt=class{constructor(t,s){this.Zut=s,this.Sdt=[],this.bdt=new Map,this.vdt=new Map,this.Mdt=null,AS.Uut.tdt(this.Sdt,t,HS,this);for(const t of this.Sdt){const s=t.sct(),i=t.Pz(),e=t.qz(),n=t.pdt();if(this.bdt.set(s,t),i)for(const s of e)this.vdt.has(s)||this.vdt.set(s,new Set),this.vdt.get(s).add(t);n&&(this.Mdt=t);const r=t.Nct();for(const t of r.xdt()){const s=t.sct();this.bdt.set(s,t)}}this.Mdt||this.Tdt()}qn(){this.Zut=null;for(const t of this.Sdt)t.qn();AS.bh(this.Sdt),this.Sdt=null}gct(){return this.Zut}wct(t){return this.bdt.get(t)}Kct(t){if(!t||!t.length)return null;const s=[];for(const i of t.trim().split(" ")){let t=this.vdt.get(i.trim())??new Set;if(0===t.size)return null;s.push(t)}return[...s.reduce(((t,s)=>s.size<t.size?s:t))].filter((t=>s.every((s=>s.has(t)))))[0]}Qct(){return this.Mdt}*Gdt(){for(const t of this.Sdt)yield t}Tdt(){let t=0;for(const s of this.Gdt())s.pdt()&&t++;if(0===t){for(const t of this.Gdt())if(t.gdt()&&!t.pdt())return void t.mdt(!0)}else{if(1===t)return;if(t>1){let t=!0;for(const s of this.Gdt())s.gdt()&&(s.pdt()&&t?t=!1:s.pdt()&&!t&&s.mdt(!1))}}for(const t of this.Gdt())if(t.gdt()&&t.pdt())return void(this.Mdt=t)}}}{const qS=self._s,zS=0,JS=1,YS=2,XS=3,ZS=4,KS=5;class QS{constructor(t,s){this.fdt=s,this.ndt=t[0],this.Yn=t[1],this.Mrt=t[2],this.Idt=t[3],this.Tat=t[4],this._dt=t[5]}qn(){this.fdt=null}Nct(){return this.fdt}sct(){return this.ndt}Ec(){return this.Yn}Jet(){return this.Mrt}Jct(){return this.Idt}Ait(){return this.Tat}Cdt(){return this._dt}}qS.ddt=class{constructor(t,s){this.Edt=s,this.Pdt=[],this.Adt=new Map,qS.Uut.tdt(this.Pdt,t,QS,this),this.Rdt=this.Pdt.filter((t=>t.Ait()));for(const t of this.Rdt)this.Adt.set(t.Ec(),t)}qn(){this.Edt=null;for(const t of this.Pdt)t.qn();qS.bh(this.Pdt),this.Pdt=null,qS.bh(this.Rdt),this.Rdt=null}Odt(){return this.Edt}kct(){return this.Rdt.length}jct(){return this.Rdt}Dft(t){return this.Adt.get(t)}Wct(){for(const t of this.Rdt)if(t.Cdt())return t}*xdt(){for(const t of this.Rdt)yield t}}}{const tb=self._s;tb.Fdt=class extends tb.Vn{constructor(t){super(),this.Ddt=t,this.Ldt=[],this.Ldt.push(tb.Hn(tb.kdt,this)),this.Pw=0,this.Ndt=this.Ldt[0]}qn(){for(const t of this.Ldt)t.qn();tb.bh(this.Ldt),this.Ndt=null,this.Ddt=null}WV(){return this.Ddt}DW(){return this.Ndt}$dt(){return this.Ldt[this.Pw-1]}Eu(){this.DW().Eu()}Bdt(){const t=this.Ldt,s=++this.Pw;if(s===t.length){const s=tb.Hn(tb.kdt,this);t.push(s),this.Ndt=s}else{const i=t[s];i.$f(),this.Ndt=i}}Wdt(){const t=this.Ldt,s=++this.Pw;s===t.length&&t.push(tb.Hn(tb.kdt,this));const i=t[s];i.rd(t[s-1]),this.Ndt=i}WY(){this.Ndt=this.Ldt[--this.Pw]}jdt(t){const s=this.Ldt;for(let i=0,e=s.length;i<e;++i)s[i].jdt(t)}}}{const sb=self._s;sb.kdt=class extends sb.Vn{constructor(t){super(),this.Ldt=t,this.Ddt=this.Ldt.WV(),this.Vdt=this.Ddt.$$().Qk(),this.Udt=!0,this.FK=[],this.Hdt=[]}qn(){this.qdt(),this.Ldt=null,this.Ddt=null,this.Vdt=null}qdt(){sb.bh(this.FK),sb.bh(this.Hdt)}WV(){return this.Ddt}zdt(){return this.Udt}Jdt(){return this.Udt?!!this.Ddt.NW():!!this.FK.length}FW(){return this.Udt?this.Ddt.FW():this.FK}Ydt(){return!!this.Hdt.length}Xdt(){return this.Hdt}Zdt(){const t=this.FW();return t.length?t:this.Hdt}$f(){this.Udt=!0,sb.bh(this.Hdt)}Eu(){this.Udt=!0}rd(t){t.zdt()?this.$f():(this.Udt=!1,sb.Gh(this.FK,t.FK),sb.bh(this.Hdt))}Kdt(t){this.FK.push(t)}Qdt(t){this.Hdt.push(t)}tpt(t){this.Udt=!!t}spt(){return this.FK}ipt(){return this.Hdt}ept(t){this.Udt=!1,sb.bh(this.FK),this.FK.push(t)}npt(t){this.Udt=!1,sb.Gh(this.FK,t)}rpt(t){this.Udt=!1,sb.bh(this.FK);for(const s of t)this.FK.push(s)}hpt(t,s){for(const i of s)t.has(i)||this.Hdt.push(i)}opt(t){for(const s of t)this.FK.push(s);sb.Ph(this.Hdt,t)}apt(){sb.bh(this.Hdt)}lpt(t){if(t)if(this.Vdt.EY().qk().upt()){this.zdt()&&(sb.bh(this.FK),sb.Gh(this.Hdt,t.WV().FW()),this.Udt=!1);const s=this.Hdt.indexOf(t);-1!==s&&(this.FK.push(this.Hdt[s]),this.Hdt.splice(s,1))}else this.ept(t)}jdt(t){sb.Ph(this.FK,t),sb.Ph(this.Hdt,t)}}}{const ib=self._s;ib.cpt=class extends ib.Vn{constructor(t){super(),this.fpt=t,this.Nc=this.fpt.$$(),this.Ldt=[],this.Ldt.push(ib.Hn(ib.dpt,this,null)),this.Pw=0,this.ppt=[]}qn(){for(const t of this.Ldt)t.qn();ib.bh(this.Ldt),ib.bh(this.ppt),this.fpt=null,this.Nc=null}Bk(){return this.fpt}$$(){return this.Nc}EY(){return this.Ldt[this.Pw]}mpt(){return this.Ldt}gpt(){return this.Pw}PY(t){const s=this.Ldt,i=++this.Pw;if(i===s.length){const i=ib.Hn(ib.dpt,this,t);return s.push(i),i}{const e=s[i];return e.$f(t),e}}WY(){--this.Pw}ypt(t){this.ppt.push(t)}wpt(){this.ppt.pop()}Kk(){const t=this.ppt;return 0===t.length?null:t.at(-1)}}}{const eb=self._s;eb.dpt=class extends eb.Vn{constructor(t,s){super(),this.Ldt=t,this.Nc=this.Ldt.$$(),this.Spt=s,this.bpt=0,this.vpt=0,this.Mpt=!1,this.xpt=!1,this.Tpt=null,this.Gpt=0,this.Ipt=0,this._pt=null}qn(){this.$f(null),this.Ldt=null,this.Nc=null}$f(t){this.Spt=t,this.bpt=0,this.vpt=0,this.Mpt=!1,this.xpt=!1,this._pt=null}Cpt(t,s){this.Spt=t,this.bpt=0,this.vpt=s}Ept(){this.bpt=0,this.vpt=0}qk(){return this.Spt}Ppt(t){this.Spt=t}Apt(){return this.bpt}Rpt(t){this.bpt=t}Opt(){return this.vpt}Fpt(t){this.vpt=t}Dpt(t){this.Mpt=!!t}Lpt(){return this.Mpt}kpt(t){this.xpt=!!t}Npt(){return this.xpt}$pt(t){this.Tpt=t}Bpt(){return this.Tpt}Wpt(t,s){this.Gpt=t,this.Ipt=s}tN(){return this.Gpt}sN(t){this.Ipt=t}jpt(){return this.Ipt}Vpt(){const t=this.Spt;return!!t.Upt()||this.bpt<t.Hpt()-1&&!!t.CY().length}qpt(t){this._pt=t}zpt(){return this._pt}}}{const nb=self._s;nb.Jpt=class extends nb.Vn{constructor(t){super(),this.fpt=t,this.Nc=this.fpt.$$(),this.Ldt=[],this.Pw=-1,this.Ndt=null,this.Ypt=[]}qn(){nb.bh(this.Ldt),this.fpt=null,this.Nc=null}Xpt(t){this.Ypt=t;const s=this.Ypt.slice(0);this.Ldt.push(s),this.Pw=0,this.Ndt=s}Bk(){return this.fpt}$$(){return this.Nc}Zpt(){return this.Ndt}PY(){const t=++this.Pw,s=this.Ldt;t===s.length?s.push(this.Ypt.slice(0)):nb.Gh(s[t],this.Ypt),this.Ndt=s[t]}WY(){this.Ndt=this.Ldt[--this.Pw]}}}{const rb=self._s;rb.Kpt=class extends rb.Vn{constructor(t){super(),this.fpt=t,this.Nc=this.fpt.$$(),this.Ldt=[],this.Pw=-1}qn(){rb.bh(this.Ldt),this.fpt=null,this.Nc=null}Bk(){return this.fpt}$$(){return this.Nc}Qpt(){return this.Pw>=0}Zpt(){return this.Ldt[this.Pw]}PY(){if(++this.Pw,this.Pw===this.Ldt.length){const t=rb.Hn(rb.tmt,this);return this.Ldt.push(t),t}{const t=this.Ldt[this.Pw];return t.$f(),t}}WY(){--this.Pw}smt(t){const s=this.Ldt;for(let i=this.Pw;i>=0;--i){const e=s[i];if(e.Ec()===t)return e}return null}imt(){return this.Ldt.slice(0,this.Pw+1)}}}{const hb=self._s;hb.tmt=class extends hb.Vn{constructor(t){super(),this.emt=t,this.Yn="",this.Pw=0,this.nmt=!1,this.rmt=NaN}$f(){this.Yn="",this.Pw=0,this.nmt=!1,this.rmt=NaN}RY(t){this.Yn=t}Ec(){return this.Yn}NY(t){this.Pw=t}tk(){return this.Pw}Oz(){this.nmt=!0}BY(){return this.nmt}hmt(t){this.rmt=t}omt(){return this.rmt}}}{const ob=self._s;ob.amt=class extends ob.Vn{constructor(){super(),this.Ldt=[],this.Pw=-1}qn(){ob.bh(this.Ldt)}Zpt(){return this.Ldt[this.Pw]}PY(){if(++this.Pw,this.Pw===this.Ldt.length){const t=[];return this.Ldt.push(t),t}return this.Ldt[this.Pw]}WY(){--this.Pw}}}{let ab=function(t,s){return t.tk()-s.tk()},lb=function(t,s){for(let i=0,e=t.length;i<e;++i)if(t[i]!==s[i])return!1;return!0};SortSolArray=ab,IsSolArrayIdentical=lb;const ub=self._s,cb=self.assert;ub.lmt=class extends ub.Vn{constructor(t){super(),this.Nc=t,this.umt=[],this.cmt=new Map,this.fmt=[],this.dmt=new Map,this.pmt=new Map,this.mmt=new Map,this.gmt=new Map,this.ymt=new Map,this.wmt=new Map,this.Smt=0,this.bmt=[],this.vmt=[],this.Mmt=[],this.xmt=new Map,this.Tmt=new Map,this.Vdt=ub.Hn(ub.cpt,this),this.Gmt=ub.Hn(ub.Jpt,this),this.emt=ub.Hn(ub.Kpt,this),this.Imt=[],this._mt=[],this.Cmt=[],this.Emt=0,this.Pmt=0,this.Amt=0,this.Rmt=[],this.Omt=[],this.Fmt=[],this.Dmt=new Map,this.Lmt=new Map,self.c3_callFunction=(t,s)=>this.kmt(t,s)}qn(){this.v4(),this.Vdt.qn(),this.Vdt=null,this.Gmt.qn(),this.Gmt=null,ub.bh(this._mt),ub.bh(this.Cmt),this.Nc=null,ub.bh(this.umt),this.cmt.clear()}AG(t){const s=ub.Hn(ub.Nmt,this,t);this.umt.push(s),this.cmt.set(s.Ec().toLowerCase(),s)}$mt(t){this.Imt.push(t)}Bmt(){for(const t of this.Tmt.values())t.Wmt();for(const t of this.xmt.values())t.Bmt();for(const t of this.Tmt.values())t.Bmt();for(const t of this.umt)t.Bmt();for(const t of this.umt)t.H5();for(const t of this.Imt)t.Bmt(!1);ub.bh(this.Imt),this.Gmt.Xpt(this.Mmt)}$$(){return this.Nc}U5(t){return this.cmt.get(t.toLowerCase())||null}jmt(t){this.fmt.push(t),this.dmt.set(t.Vmt(),t)}Umt(t){this.pmt.set(t.U0(),t)}Hmt(t){this.mmt.set(t.U0(),t)}qmt(t){this.gmt.set(t.U0(),t)}zmt(t){switch(t.Jmt()){case 0:this.xmt.set(t.Ymt().toLowerCase(),t);break;case 1:this.Tmt.set(t.Ymt().toLowerCase(),t)}}Xmt(t){this.wmt.set(t.U0(),t),t.x0()?this.bmt.push(t):this.vmt.push(t)}Zmt(t){t.length>=2&&t.sort(ab);let s=this.ymt.get(t.length);s||(s=[],this.ymt.set(t.length,s));for(let i=0,e=s.length;i<e;++i){const e=s[i];if(lb(t,e))return e}return s.push(t),t}Kmt(t){return this.Mmt.push(t.Qmt()),this.Smt++}Qk(){return this.Vdt}tgt(){return this.Qk().EY()}qk(){return this.tgt().qk()}sgt(){const t=this.tgt();return t.qk().igt(t.Apt())}egt(){const t=this.tgt();return t.qk().ngt(t.Opt())}rgt(){return this.Gmt}AY(){return this.emt}hgt(t){const s=[];for(t=t.ogt();t;)ub.On(s,t.agt()),t=t.ogt();return s}lgt(t){const s={};for(const i of this.hgt(t))s[i.ugt()]=i.cgt();return Object.create(Object.prototype,s)}fgt(t){return this.wmt.get(t)||null}dgt(t){return this.pmt.get(t)||null}pgt(t){return this.mmt.get(t)||null}mgt(t){return this.gmt.get(t)||null}Wk(t){return this.xmt.get(t.toLowerCase())||null}ggt(t,s){let i=this.Tmt.get((t.Ec()+"."+s).toLowerCase());if(i)return i;if(!t.k0())for(const e of t.JW())if(i=this.Tmt.get((e.Ec()+"."+s).toLowerCase()),i)return i;return null}ygt(){return this.bmt}wgt(){return this.vmt}Sgt(t){for(const t of this.bmt)t.bgt();if(t)for(const t of this.vmt)t.FT()&&t.bgt()}vgt(t){return this.dmt.get(t.toLowerCase())||null}Mgt(t){const s=this.pmt.get(t);return s&&s.xgt()?s:null}Tgt(){return this.fmt}Ggt(){for(const t of this.fmt)t.Igt()}_gt(){for(const t of this.umt)t.Cgt()}Egt(t){this._gt(),this.Emt++;for(const s of t.t6()){const t=s.y5();t&&(this.Nc.Pgt(s),t.tE(),this.Nc.Agt())}this.Emt--}async Rgt(t){this._gt(),this.Emt++;for(const s of this.Ogt(t))await this.Nc.Fgt(s);this.Emt--}*Ogt(t){for(const s of t.t6()){const t=s.y5();t&&(this.Nc.Pgt(s),yield*t.Dgt(),this.Nc.Agt())}}Lgt(t,s,i,e){let n=!1;if(!t.VN())return this.kgt(s,i,e);this.Pmt++;for(const r of t.t6()){const t=r.y5();if(!t)continue;this.Nc.Pgt(r);for(const r of t.Ngt()){const t=r.Lgt(s,i,e);n=n||t}const h=t.Lgt(s,i,e);n=n||h,this.Nc.Agt()}return this.Pmt--,n}*$gt(t,s,i,e){let n=!1;if(!t.VN())return this.kgt(s,i,e);this.Pmt++;for(const r of t.t6()){const t=r.y5();if(!t)continue;this.Nc.Pgt(r);for(const r of t.Ngt()){const t=yield*r.$gt(s,i,e);n=n||t}const h=yield*t.$gt(s,i,e);n=n||h,this.Nc.Agt()}return this.Pmt--,n}kgt(t,s,i){return this._mt.push([t,s,i]),!1}Bgt(t,s,i){let e=null;const n=new Promise((t=>e=t));return this.Cmt.push([t,s,i,e]),n}*Wgt(){if(this.Nc.jgt())throw new Error("should not be in breakpoint");const t=this.Nc.qN();for(;this.Cmt.length;){const[s,i,e,n]=this.Cmt.shift();n(yield*this.$gt(t,s,i,e))}}async Vgt(){for(const t of this.Wgt())await this.Nc.Fgt(t)}Ugt(t,s,i,e){let n=!1;const r=t.VN(),h=r.y5();if(!h)return;this.Pmt++,this.Nc.Pgt(r);const o=h.Ngt();for(let t=0,r=o.length;t<r;++t){const r=o[t].Ugt(s,i,e);n=n||r}const a=h.Ugt(s,i,e);return n=n||a,this.Nc.Agt(),this.Pmt--,n}*Hgt(t,s,i,e){let n=!1;const r=t.VN(),h=r.y5();if(!h)return;this.Pmt++,this.Nc.Pgt(r);const o=h.Ngt();for(let t=0,r=o.length;t<r;++t){const r=yield*o[t].Hgt(s,i,e);n=n||r}const a=yield*h.Hgt(s,i,e);return n=n||a,this.Nc.Agt(),this.Pmt--,n}qgt(){return this.Pmt}zgt(){return this.qgt()>0}Jgt(){return++this.Pmt}Ygt(){--this.Pmt}Xgt(){return this.Emt>0}UW(){return this.Xgt()||this.zgt()}c4(t){for(const[s,i,e]of this._mt)this.Lgt(t,s,i,e);ub.bh(this._mt)}jW(t){t?this.Amt++:this.Amt--}JV(){return this.Amt>0}Zgt(t){for(let s=0,i=t.length;s<i;++s)t[s].Kgt().Eu()}Qgt(t){for(let s=0,i=t.length;s<i;++s)t[s].Kgt().Bdt()}DY(t){for(let s=0,i=t.length;s<i;++s)t[s].Kgt().Wdt()}kY(t){for(let s=0,i=t.length;s<i;++s)t[s].Kgt().WY()}zk(t){const s=new Set,i=this.Vdt.mpt(),e=this.Vdt.gpt();for(let n=0;n<=e;++n){const e=i[n].zpt();if(e)for(const i of e)t&&t.has(i)||s.add(i)}return s}tyt(t){const s=new Set([...t]),i=this.zk(s);if(i.size>0){for(const t of i)t.Kgt().Bdt();return[...i]}return null}syt(){const t=ub.Hn(ub.iyt,this);return this.Rmt.push(t),t}eyt(){return this.Rmt}nyt(){if(!this.Rmt.length)return;const t=this.tgt();let s=!1;this.Emt++;for(let i=0,e=this.Rmt.length;i<e;++i){const e=this.Rmt[i];e.ryt()&&e.hyt(t),e.oyt()&&(s=!0)}s&&(this.ayt(),t.$f(null)),this.Emt--}async lyt(){if(!this.Rmt.length)return;const t=this.tgt();let s=!1;this.Emt++;for(let i=0,e=this.Rmt.length;i<e;++i){const e=this.Rmt[i];e.ryt()&&await e.uyt(t),e.oyt()&&(s=!0)}s&&(this.ayt(),t.$f(null)),this.Emt--}ayt(){const t=ub.Eh(this.Rmt,(t=>t.oyt()));for(const s of t)s.qn()}v4(){for(const t of this.Rmt)t.qn();ub.bh(this.Rmt)}cyt(t){for(const s of this.Rmt)s.jdt(t);for(const s of t){const t=this.Lmt.get(s);if(this.Lmt.delete(s),t)for(const{resolve:s}of t.fyt.values())s(!0)}}dyt(t){this.Omt.push({promise:t,pyt:this.qgt()})}myt(){ub.bh(this.Omt)}gyt(){const t=this.qgt(),s=Promise.all(this.Omt.filter((s=>s.pyt===t)).map((t=>t.promise)));return this.Omt=this.Omt.filter((s=>s.pyt<t)),s}iN(t){const s=t.toLowerCase();this.Fmt.push(s),this.Nc.xU(ub.R$.A$.P$.yyt,null),this.Fmt.pop();for(const t of this.Nc.Bk().eyt())t.wyt()&&t.Syt()===s&&t.byt();const i=this.Dmt.get(s);i&&(i.resolve(),this.Dmt.delete(s))}nN(t){const s=t.toLowerCase(),i=this.Dmt.get(s);if(i)return i.promise;{let t=null;const i=new Promise((s=>t=s));return this.Dmt.set(s,{promise:i,resolve:t}),i}}vyt(){if(0===this.Fmt.length)throw new Error("not in a signal");return this.Fmt.at(-1)}Myt(t){let s=this.Lmt.get(t);return s||(s={xyt:[],fyt:new Map},this.Lmt.set(t,s)),s}dU(t,s){const i=this.Myt(t),e=s.toLowerCase();i.xyt.push(e),this.Nc.xU(t.MW().Gyt().P$.Tyt,t),i.xyt.pop();for(const s of this.Nc.Bk().eyt())s.Iyt()&&s.Syt()===e&&s._yt(t);const n=i.fyt.get(e);n&&(n.resolve(!1),i.fyt.delete(e)),0===i.xyt.length&&0===i.fyt.size&&this.Lmt.delete(t)}pU(t,s){const i=this.Myt(t),e=s.toLowerCase(),n=i.fyt.get(e);if(n)return n.promise;{let t=null;const s=new Promise((s=>t=s));return i.fyt.set(e,{promise:s,resolve:t}),s}}Cyt(t){const s=this.Myt(t);if(!s||0===s.xyt.length)throw new Error("not in a signal");return s.xyt.at(-1)}b3(){return{groups:this.Eyt(),cnds:this.Pyt(),acts:this.Ayt(),vars:this.Ryt(),waits:this.Oyt()}}v3(t){this.Fyt(t.groups),this.Dyt(t.cnds),this.Lyt(t.acts),this.kyt(t.vars),this.Nyt(t.waits)}Eyt(){const t={};for(const s of this.Tgt())t[s.U0().toString()]=s.$yt();return t}Fyt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.Mgt(t);e&&e.Byt(i)}}Pyt(){const t={};for(const[s,i]of this.mmt){const e=i.b3();e&&(t[s.toString()]=e)}return t}Dyt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.mmt)i.v3(s.get(t)||null)}Ayt(){const t={};for(const[s,i]of this.gmt){const e=i.b3();e&&(t[s.toString()]=e)}return t}Lyt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.gmt)i.v3(s.get(t)||null)}Ryt(){const t={};for(const[s,i]of this.wmt)i.Wyt()||!i.x0()&&!i.FT()||(t[s.toString()]=i.Jet());return t}kyt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.fgt(t);e&&e.Pnt(i)}}Oyt(){return this.Rmt.filter((t=>!t.jyt())).map((t=>t.b3()))}Nyt(t){this.v4();for(const s of t){const t=ub.iyt.Vyt(this,s);t&&this.Rmt.push(t)}}Uyt(){return[...this.Nc.qN().t6()].map((t=>t.y5())).filter((t=>t)).map((t=>t.Hyt()))}qyt(t){for(;t;){const s=t.ogt();if(s instanceof ub.zyt)return s;t=s}return null}kmt(t,s){Array.isArray(s)||(s=[]);const i=this.Wk(t.toLowerCase());if(!i)return null;if(!i.Iu())return i.jk();const e=i.Jyt();if(s.length<e.length){s=s.slice(0);do{s.push(e[s.length].Qmt())}while(s.length<e.length)}const n=i.Uk();return n.Jk(n.Hk(),!1,i.Xk(),i.jk(),...s)}}}{const fb=self._s;fb.Nmt=class extends fb.Vn{constructor(t,s){super(),this.fpt=t,this.Nc=t.$$(),this.Yn=s[0],this.Yyt=[],this.Xyt=new Map,this.Zyt=new Map,this.Kyt=new Map,this.Qyt=!1,this.twt=[],this.swt=[],this.iwt=new Set;for(const t of s[1])this.ewt(t,null,this.Yyt);this.nwt=this.Nc.AU()?{type:"sheet",name:this.Yn,rwt:0,children:[]}:null}qn(){this.fpt=null,this.Nc=null}ewt(t,s,i){switch(t[0]){case 0:case 3:this.hwt(t,s,i);break;case 1:this.owt(t,s,i);break;case 2:this.awt(t,s,i);break;case 4:this.lwt(t,s);break;case 5:this.uwt(t,s,i);break;case 6:this.cwt(t,s);break;default:throw new Error("invalid event type")}}hwt(t,s,i){const e=fb.fwt.AG(this,s,t);if(e.upt()){i.push(e);const t=e.dwt();for(let s=0,i=t.length;s<i;++s)t[s].pwt()&&this.mwt(e,s)}else e.pwt()?this.mwt(e,0):i.push(e)}lwt(t,s){const i=fb.zyt.gwt(this,s,t);this.fpt.zmt(i)}cwt(t,s){const i=fb.zyt.ywt(this,s,t);this.fpt.zmt(i)}owt(t,s,i){const e=fb.wwt.AG(this,s,t);i.push(e)}awt(t,s,i){const e=fb.Swt.AG(this,s,t);i.push(e)}uwt(t,s,i){const e=fb.bwt.AG(this,s,t);i.push(e)}mwt(t,s){t.upt()||this.fpt.$mt(t);const i=t.igt(s),e=i.vwt(),n=i.WV();if(i.Mwt()){let r=this.Zyt.get(n);r||(r=new Map,this.Zyt.set(n,r));const h=i.xwt().toLowerCase();let o=r.get(e);o||(o=new Map,r.set(e,o));let a=o.get(h);a||(a=[],o.set(h,a)),a.push([t,s])}else{let r=this.Xyt.get(n);r||(r={Twt:new Map,Gwt:new Map},this.Xyt.set(n,r));const h=i.Wq();let o;h?(o=r.Gwt.get(h),o||(o=new Map,r.Gwt.set(h,o))):o=r.Twt;let a=o.get(e);a||(a=[],o.set(e,a)),a.push([t,s])}}Bmt(){const t=this.Yyt;for(let s=0,i=t.length;s<i;++s){const e=s<i-1&&t[s+1]instanceof fb.fwt&&t[s+1].Iwt();t[s].Bmt(e)}}_wt(t){this.twt.push(t)}H5(){fb.bh(this.swt),this.Cwt(this),this.iwt.clear()}Cwt(t){const s=t.swt,i=t.iwt;for(const e of this.twt){const n=e.Ewt();e.Pwt()&&t!==n&&!i.has(n)&&(i.add(n),n.Cwt(t),s.push(n))}}Ngt(){return this.swt}Bk(){return this.fpt}$$(){return this.Nc}Ec(){return this.Yn}Awt(t,s){this.Kyt.set(s,t)}Rwt(t){return this.Kyt.get(t)||null}Cgt(){this.Qyt=!1}tE(){if(this.Qyt)return;const t=this.Nc,s=t.Owt(),i=s?performance.now():0;this.Qyt=!0;const e=this.Bk(),n=e.tgt();for(const s of this.Yyt)s.tE(n),e.Zgt(s.CY()),e.myt(),t.qW();n.$f(null),s&&(this.nwt.rwt+=performance.now()-i)}*Dgt(){if(this.Qyt)return;this.Qyt=!0;const t=this.Nc,s=this.Bk(),i=s.tgt();for(const e of this.Yyt)yield*e.Dgt(i),s.Zgt(e.CY()),s.myt(),t.qW();i.$f(null)}Lgt(t,s,i){if(!s)return this.Fwt(t,s,null,null);{const e=s.WV();let n=!1,r=this.Fwt(t,s,e,i);n=n||r;for(const h of e.JW())r=this.Fwt(t,s,h,i),n=n||r}}Fwt(t,s,i,e){const n=this.Xyt.get(i);if(!n)return!1;const r=e?n.Gwt.get(e):n.Twt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){const e=this.Dwt(s,t,i);o=o||e}return o}*$gt(t,s,i){if(!s)return yield*this.Lwt(t,s,null,null);{const e=s.WV();let n=!1,r=yield*this.Lwt(t,s,e,i);n=n||r;for(const h of e.JW())r=yield*this.Lwt(t,s,h,i),n=n||r}}*Lwt(t,s,i,e){const n=this.Xyt.get(i);if(!n)return!1;const r=e?n.Gwt.get(e):n.Twt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){let e;e=t.kwt()?this.Dwt(s,t,i):yield*this.Nwt(s,t,i),o=o||e}return o}Ugt(t,s,i){const e=s.WV(),n=this.Zyt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=this.Dwt(null,s[0],s[1]);o=o||i}return o}*Hgt(t,s,i){const e=s.WV(),n=this.Zyt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=s[0],e=s[1];let n;n=i.kwt()?this.Dwt(null,i,e):yield*this.Nwt(null,i,e),o=o||n}return o}Dwt(t,s,i){const e=this.Nc,n=this.fpt,r=n.qk(),h=n.Qk(),o=n.qgt();let a=!1;r&&n.Qgt(r.Hk()),n.Qgt(s.Hk());const l=o>1;l&&n.rgt().PY();const u=h.PY(s);t&&(s.dwt()[i].WV().DW().ept(t),t.KV()&&t.$wt());let c=!0;if(s.FH()){const t=s.Bwt();for(let s=0,i=t.length;s<i;++s)if(!t[s].Wwt(u)){c=!1;break}}return c&&(s.upt()?s.jwt(u,i):s.tE(u),a=u.Lpt()),h.WY(),l&&n.rgt().WY(),n.kY(s.Hk()),r&&n.kY(r.Hk()),r||1!==o||(n.myt(),n.JV()||e.qW()),a}*Nwt(t,s,i){const e=this.Nc,n=this.fpt,r=n.qk(),h=n.Qk(),o=n.qgt();let a=!1;r&&n.Qgt(r.Hk()),n.Qgt(s.Hk());const l=o>1;l&&n.rgt().PY();const u=h.PY(s);t&&(s.dwt()[i].WV().DW().ept(t),t.KV()&&t.$wt());let c=!0;if(s.FH()){const t=s.Bwt();for(let s=0,i=t.length;s<i;++s)if(!(yield*t[s].Vwt(u))){c=!1;break}}return c&&(s.upt()?yield*s.Uwt(u,i):yield*s.Dgt(u),a=u.Lpt()),h.WY(),l&&n.rgt().WY(),n.kY(s.Hk()),r&&n.kY(r.Hk()),r||1!==o||(n.myt(),n.JV()||e.qW()),a}Hyt(){return this.nwt}}}{let db=function(t,s){return!0};NoActions=db;const pb=self._s,mb=[];function*gb(t,s){return!0}pb.fwt=class extends pb.Vn{constructor(t,s,i){super(),this.F3=t,this.Nc=t.$$(),this.Hwt=s,this.qwt=null,this.Vdt=this.Nc.Bk().Qk(),this.zwt=[],this.Jwt=[],this.Ywt=!1,this.Xwt=!1,this.Zwt=!1,this.Kwt=!1,this.Qwt=!!i[2],this.tSt=!1,this.sSt=null,this.iSt=[],this.Irt=[],this.eSt=[],this.nSt=db,this.rSt=gb,this.hSt=!1,this.oSt=!1,this.aSt="",this.lSt=!1,this.uSt=null,this.nwt=null,this.dQ=i[4],this.cSt=i[5],this.F3.Awt(this,this.cSt),this.fSt=this.Nc.AU()?{dSt:i[3][0],pSt:i[3][1],mSt:!1,gSt:!1,ySt:!1,wSt:!1}:null,this.Bk().Umt(this),3===i[0]&&this.SSt(i[1]);let e=0;for(const t of i[6]){const s=pb.bSt.AG(this,t,e++);this.iSt.push(s),this.vSt(s.WV())}e=0;for(const t of i[7]){const s=pb.MSt.AG(this,t,e++);this.Irt.push(s)}if(9===i.length){const t=i[8];for(const s of t)this.F3.ewt(s,this,this.eSt)}this.iSt.length&&(this.tSt=null===this.iSt[0].WV()&&this.iSt[0].vwt()===pb.R$.A$.P$.xSt),0===this.iSt.length&&(this.iSt=mb),0===this.Irt.length&&(this.Irt=mb),0===this.eSt.length&&(this.eSt=mb)}static AG(t,s,i){return pb.Hn(pb.fwt,t,s,i)}SSt(t){this.hSt=!0,this.oSt=!!t[0],this.lSt=this.oSt,this.aSt=t[1].toLowerCase(),this.uSt=[],this.Bk().jmt(this),this.Nc.AU()&&(this.nwt={type:"group",name:t[1],rwt:0,children:[]})}TSt(t){this.uSt.push(t)}GSt(t,s){for(const i of t.P5().sj())s.includes(i)||s.push(i)}ISt(t,s){if(t)if(s.includes(t)||s.push(t),t.k0())for(const i of t.tj())i.KV()&&this.GSt(i,s);else t.KV()&&this.GSt(t,s)}vSt(t){this.ISt(t,this.zwt)}_St(t){this.ISt(t,this.Jwt)}CSt(){this.zwt=this.Nc.L0()}Bmt(t){this.Kwt=!!t,this.ESt(),this.PSt();for(const t of this.iSt)t.Bmt();if(this.Irt.length>0){let t=!1;for(const s of this.Irt)s.Bmt(),s.ASt()&&(t=!0);t?(this.nSt=this.RSt,this.rSt=this.OSt):(this.nSt=this.FSt,this.rSt=this.DSt)}const s=this.eSt;for(let t=0,i=s.length;t<i;++t){const e=t<i-1&&s[t+1]instanceof pb.fwt&&s[t+1].Iwt();s[t].Bmt(e)}this.fSt&&this.LSt(),this.nwt&&this.kSt().Hyt().children.push(this.nwt)}Hyt(){return this.nwt}kSt(){let t=this.FH();for(;t;){if(t.xgt())return t;t=t.FH()}return this.F3}LSt(){const t=this.fSt;t.mSt=this.iSt.every((t=>t.kwt())),t.gSt=this.Irt.every((t=>t.kwt())),t.ySt=this.eSt.every((t=>t.kwt())),t.wSt=t.mSt&&t.gSt&&t.ySt}NSt(){let t=this;do{t.LSt(),t=t.FH()}while(t)}ESt(){if(!this.xgt())return;let t=this.FH();for(this.Zwt=!0;t;){if(!t.xgt()){this.Zwt=!1;break}t=t.FH()}}$St(){const t=this.Nc.L0();if(this.zwt===t)this.Jwt=t;else{this.Jwt=pb.Oh(this.zwt);let t=this.FH();for(;t;){for(const s of t.zwt)this._St(s);t=t.FH()}const s=this.Bk();this.zwt=s.Zmt(this.zwt),this.Jwt=s.Zmt(this.Jwt)}}PSt(){if(!this.BSt())return;this.sSt=[];let t=this.FH();for(;t;)this.sSt.push(t),t=t.FH();this.sSt.reverse()}WSt(){this.Xwt=!0,this.Hwt&&this.Hwt.WSt()}Upt(){return this.Xwt}CY(){return this.zwt}Hk(){return this.Ywt||(this.Ywt=!0,this.$St()),this.Jwt}jSt(t){return this.zwt.includes(t)}Bwt(){return this.sSt}y5(){return this.F3}Bk(){return this.F3.Bk()}$$(){return this.Nc}FH(){return this.Hwt}VSt(t){this.qwt=t}ogt(){return this.qwt||this.Hwt}USt(){return this.cSt}HSt(){return this.fSt&&this.fSt.pSt}qSt(){return this.HSt()&&this.fSt.dSt}zSt(t){this.fSt.dSt=!!t,this.NSt()}xgt(){return this.hSt}JSt(){return this.Zwt}Iwt(){return this.tSt}YSt(){return this.Kwt}Vmt(){return this.aSt}$yt(){return this.lSt}Igt(){this.Byt(this.oSt)}Byt(t){if(t=!!t,!this.hSt)throw new Error("not a group");if(this.lSt!==t){this.lSt=t;for(const t of this.uSt)t.XSt();if(this.uSt.length){const t=this.Nc.l$().y5();t&&t.H5()}}}U0(){return this.dQ}upt(){return this.Qwt}pwt(){return this.iSt.length&&this.iSt[0].pwt()}ZSt(){return this.qwt&&this.qwt instanceof pb.zyt}BSt(){return this.ZSt()||this.iSt.some((t=>t.pwt()))}dwt(){return this.iSt}Hpt(){return this.iSt.length}igt(t){if((t=Math.floor(t))<0||t>=this.iSt.length)throw new RangeError("invalid condition index");return this.iSt[t]}KSt(t){return this.igt(t)}QSt(t){let s=t.tk();if(0===s)return!0;--s;const i=t.tbt()?t.sbt():t.WV();for(;s>=0;--s){const t=this.iSt[s];if(i===t.WV()||t.tbt()&&t.sbt()===i)return!1}return!0}ibt(){return this.Irt}ebt(){return this.Irt.length}ngt(t){if((t=Math.floor(t))<0||t>=this.Irt.length)throw new RangeError("invalid action index");return this.Irt[t]}nbt(t){t=Math.floor(t);const s=this.Irt.find((s=>s.rbt()===t));if(!s)throw new RangeError("invalid action debug index");return s}hbt(t){return(t=Math.floor(t))>=0&&t<this.Irt.length}obt(){return this.eSt}agt(){return this.eSt.filter((t=>t instanceof pb.wwt))}Wwt(t){t.Ppt(this);const s=this.iSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t.Rpt(e),n.sz())throw new Error("trigger cannot be used as sub-event to a loop");if(n.tE())i=!0;else if(!this.Qwt)return!1}return!this.Qwt||i}jwt(t,s){t.Ppt(this),t.Rpt(s),this.iSt[s].tE()&&(this.nSt(t,0)&&this.abt(t),t.Dpt(!0))}*Vwt(t){t.Ppt(this);const s=this.iSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t.Rpt(e),n.sz())throw new Error("trigger cannot be used as sub-event to a loop");let r;if(r=n.kwt()?n.tE():yield*n.Dgt(),r)i=!0;else if(!this.Qwt)return!1}return!this.Qwt||i}*Uwt(t,s){t.Ppt(this),t.Rpt(s);const i=this.iSt[s];let e;if(e=i.kwt()?i.tE():yield*i.Dgt(),e){let s;s=this.lbt()?this.nSt(t,0):yield*this.rSt(t,0),s&&(this.ubt()?this.abt():yield*this.cbt()),t.Dpt(!0)}}tE(t){t.Ppt(this),this.tSt||t.kpt(!1),this.Qwt?this.fbt(t):this.dbt(t)}*Dgt(t){(this.qSt()||this.Nc.pbt())&&(yield this),t.Ppt(this),this.tSt||t.kpt(!1),this.Qwt?yield*this.mbt(t):yield*this.gbt(t)}fbt(t){const s=this.iSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.pwt())continue;t.Rpt(e);const r=n.tE();i=i||r}t.Dpt(i),i&&(this.nSt(t,0)&&this.abt(t),this.Kwt&&t.kpt(!0))}*mbt(t){const s=this.iSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.pwt())continue;let r;t.Rpt(e),r=n.kwt()?n.tE():yield*n.Dgt(),i=i||r}if(t.Dpt(i),i){let s;s=this.lbt()?this.nSt(t,0):yield*this.rSt(t,0),s&&(this.ubt()?this.abt():yield*this.cbt()),this.Kwt&&t.kpt(!0)}}dbt(t){const s=this.iSt;for(let i=0,e=s.length;i<e;++i){const e=s[i];if(t.Rpt(i),!e.tE())return void t.Dpt(!1)}t.Dpt(!0),this.nSt(t,0)&&this.abt(t),t.Lpt()&&this.Kwt&&t.kpt(!0)}*gbt(t){const s=this.iSt;for(let i=0,e=s.length;i<e;++i){const e=s[i];let n;if(t.Rpt(i),n=e.kwt()?e.tE():yield*e.Dgt(),!n)return void t.Dpt(!1)}let i;t.Dpt(!0),i=this.lbt()?this.nSt(t,0):yield*this.rSt(t,0),i&&(this.ubt()?this.abt():yield*this.cbt()),t.Lpt()&&this.Kwt&&t.kpt(!0)}FSt(t,s){const i=this.Irt;for(let e=s,n=i.length;e<n;++e){const s=i[e];t.Fpt(e),s.tE()}return!0}*DSt(t,s){const i=this.Irt;for(let e=s,n=i.length;e<n;++e){const s=i[e];t.Fpt(e),s.kwt()?s.tE():yield*s.Dgt()}return!0}RSt(t,s){const i=this.Bk(),e=this.Irt;for(let n=s,r=e.length;n<r;++n){const s=e[n];t.Fpt(n);const r=s.tE();if(s.ybt()&&!0===r)return!1;s.wbt()&&r instanceof Promise&&i.dyt(r)}return!0}*OSt(t,s){const i=this.Bk(),e=this.Irt;for(let n=s,r=e.length;n<r;++n){const s=e[n];let r;if(t.Fpt(n),r=s.kwt()?s.tE():yield*s.Dgt(),s.ybt()&&!0===r)return!1;s.wbt()&&r instanceof Promise&&i.dyt(r)}return!0}Sbt(t){this.nSt(t,t.Opt())&&this.abt()}*bbt(t){(yield*this.rSt(t,t.Opt()))&&(yield*this.cbt())}abt(){if(!this.eSt.length)return;const t=this.xgt()&&this.Nc.Owt(),s=t?performance.now():0,i=this.Vdt,e=i.PY(this);this.Xwt?this.vbt(e):this.Mbt(e),i.WY(),t&&(this.nwt.rwt+=performance.now()-s)}vbt(t){const s=this.hSt,i=this.Zwt,e=this.Bk(),n=this.eSt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.CY(),l=!i||!s&&r<o;l&&e.DY(a),h.tE(t),l?e.kY(a):e.Zgt(a)}}Mbt(t){const s=this.eSt;for(let i=0,e=s.length;i<e;++i)s[i].tE(t)}*cbt(){if(!this.eSt.length)return;const t=this.Vdt,s=t.PY(this);this.Xwt?yield*this.xbt(s):yield*this.Tbt(s),t.WY()}*xbt(t){const s=this.hSt,i=this.Zwt,e=this.Bk(),n=this.eSt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.CY(),l=!i||!s&&r<o;l&&e.DY(a),yield*h.Dgt(t),l?e.kY(a):e.Zgt(a)}}*Tbt(t){const s=this.eSt;for(let i=0,e=s.length;i<e;++i)yield*s[i].Dgt(t)}LY(t,s){s.Ept();const i=this.iSt;if(!this.upt())for(let e=t.Apt()+1,n=i.length;e<n;++e){const t=i[e];if(s.Rpt(e),!t.tE())return!1}return this.nSt(s,0)&&this.abt(s),!0}*Gbt(t,s){s.Ept();const i=this.iSt;if(!this.upt())for(let e=t.Apt()+1,n=i.length;e<n;++e){const t=i[e];let n;if(s.Rpt(e),n=t.kwt()?t.tE():yield*t.Dgt(),!n)return!1}let e;return e=this.lbt()?this.nSt(s,0):yield*this.rSt(s,0),e&&(this.ubt()?this.abt():yield*this.cbt()),!0}kwt(){return!this.qSt()&&!this.Nc.pbt()&&this.fSt.wSt}lbt(){return!this.Nc.pbt()&&this.fSt.gSt}ubt(){return!this.Nc.pbt()&&this.fSt.ySt}Ibt(t){if(this.FH()){const s=this.Bwt();for(let i=0,e=s.length;i<e;++i)if(!s[i].Wwt(t))return!1}return!0}*_bt(t){if(this.FH()){const s=this.Bwt();for(let i=0,e=s.length;i<e;++i)if(!(yield*s[i].Vwt(t)))return!1}return!0}Cbt(t,s,i){if(s.length>0)if(i){const i=s.map((t=>t.qs(0)));t.rgt().PY(),this.qwt.Ebt(i)}else this.qwt.Pbt(s);else i&&t.rgt().PY()}Abt(t,s,i,e){let n,r;const h=t.length>0;let o=null;const a=this.Nc,l=this.Vdt,u=a.Bk(),c=this.qwt,f=c.wbt(),d=u.Jgt()>1;if(this.Cbt(u,s,d),h&&(i?u.DY(t):u.Qgt(t)),null!==e){if(e.Rbt){const t=i?e.Rbt.DW():e.Rbt.Kgt().$dt(),s=e.Obt.DW();s.npt(t.FW()),s.apt(),i||e.Obt.Fbt()}else if(e.Dbt){const t=e.Dbt.DW();t.npt(e.Lbt),t.apt()}e.kbt&&(o=u.tyt(t))}const p=l.PY(this);return i&&p.qpt(t),this.Ibt(p)&&(p.Ppt(this),f&&([r,n]=c.Nbt()),this.dbt(p),f&&c.$bt(r)),l.WY(),d&&u.rgt().WY(),null!==o&&u.kY(o),h&&u.kY(t),u.Ygt(),n}*Bbt(t,s,i,e){let n,r;(this.qSt()||this.Nc.pbt())&&(yield this);const h=t.length>0;let o=null;const a=this.Nc,l=this.Vdt,u=a.Bk(),c=this.qwt,f=c.wbt(),d=u.Jgt()>1;if(this.Cbt(u,s,d),h&&(i?u.DY(t):u.Qgt(t)),null!==e){if(e.Rbt){const t=i?e.Rbt.DW():e.Rbt.Kgt().$dt(),s=e.Obt.DW();s.npt(t.FW()),s.apt(),i||e.Obt.Fbt()}else if(e.Dbt){const t=e.Dbt.DW();t.npt(e.Lbt),t.apt()}e.kbt&&(o=u.tyt(t))}const p=l.PY(this);return i&&p.qpt(t),(yield*this._bt(p))&&(p.Ppt(this),f&&([r,n]=c.Nbt()),yield*this.gbt(p),f&&c.$bt(r)),l.WY(),d&&u.rgt().WY(),null!==o&&u.kY(o),h&&u.kY(t),u.Ygt(),n}Wbt(t,s){const i=this.Hk(),e=i.length>0,n=this.Nc,r=this.Vdt,h=n.Bk(),o=h.Jgt()>1;o&&h.rgt().PY(),this.qwt.Ebt(t),e&&(s?h.DY(i):h.Qgt(i));const a=r.PY(this);this.Ibt(a)&&(a.Ppt(this),this.dbt(a)),r.WY(),o&&h.rgt().WY(),e&&h.kY(i),h.Ygt()}*jbt(t,s){(this.qSt()||this.Nc.pbt())&&(yield this);const i=this.Hk(),e=i.length>0,n=this.Nc,r=this.Vdt,h=n.Bk(),o=h.Jgt()>1;o&&h.rgt().PY(),this.qwt.Ebt(t),e&&(s?h.DY(i):h.Qgt(i));const a=r.PY(this);(yield*this._bt(a))&&(a.Ppt(this),yield*this.gbt(a)),r.WY(),o&&h.rgt().WY(),e&&h.kY(i),h.Ygt()}Jk(t,s,i,e,...n){let r,h;const o=t.length>0,a=this.Nc,l=this.Vdt,u=a.Bk(),c=this.qwt,f=c.wbt(),d=u.Jgt()>1;d&&u.rgt().PY(),n.length>0&&this.qwt.Ebt(n),o&&(s?u.DY(t):u.Qgt(t));const p=l.PY(this);return p.Wpt(i,e),l.ypt(p),a.OY(!1),this.Ibt(p)&&(p.Ppt(this),f&&([h,r]=c.Nbt()),this.dbt(p),f&&c.$bt(h)),a.OY(!0),l.WY(),l.wpt(),d&&u.rgt().WY(),o&&u.kY(t),u.Ygt(),r||p.jpt()}}}{const yb=self._s,wb=[];let Sb=!1;yb.bwt=class extends yb.Vn{constructor(t,s,i){super();const e=t.$$(),n=t.Bk();this.F3=t,this.fpt=n,this.Nc=t.$$(),this.Hwt=s;const r=e.Vbt(i[1]);this.Ubt=r,this.cSt=i[2],this.F3.Awt(this,this.cSt),this.fSt=e.AU()?{dSt:i[3][0],pSt:i[3][1]}:null}static AG(t,s,i){return yb.Hn(yb.bwt,t,s,i)}Bmt(){const t=this.Ubt,s=this.Nc.Bk().lgt(this);this.Ubt=t.bind(null,this.Nc.zB(),s)}FH(){return this.Hwt}ogt(){return this.Hwt}y5(){return this.F3}USt(){return this.cSt}HSt(){return this.fSt&&this.fSt.pSt}qSt(){return this.HSt()&&this.fSt.dSt}zSt(t){this.fSt.dSt=!!t}Iwt(){return!1}CY(){return wb}Hk(){return this.Hwt?this.Hwt.Hk():wb}tE(t){t.Ppt(this),this.fpt.dyt(this.Hbt())}async Hbt(){try{await this.Ubt()}catch(t){console.error(`Unhandled exception running script %c${this.y5().Ec()}, event ${this.USt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.RU&&self.RU.qbt(this),Sb||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Sb=!0)}}*Dgt(t){t.Ppt(this),(this.qSt()||this.Nc.pbt())&&(yield this),this.tE(t)}kwt(){return!this.qSt()&&!this.Nc.pbt()}static zbt(){return Sb}static Jbt(){Sb=!0}}}{const bb=self._s,vb=self.assert;bb.zyt=class extends bb.Vn{constructor(t,s,i){super(),this.F3=t,this.Nc=t.$$(),this.Hwt=s,this.Ybt=0,this.Xbt="",this.Zbt=0,this.Kbt=[],this.Qbt=!0,this.tvt="",this.Ddt=null,this.svt=!1,this.ivt=[],this.evt=!1,this.nvt=!1,this.rvt=0,this.hvt=-1,this.ovt=new Map,this.avt=bb.fwt.AG(t,s,i),this.avt.VSt(this)}lvt(t){this.Ybt=0,this.Xbt=t[0],this.Zbt=t[1],this.Kbt=t[2].map((t=>bb.wwt.AG(this.F3,this,t))),this.Qbt=t[3],this.nvt=t[4],this.evt=t[5]}uvt(t){this.Ybt=1,this.tvt=t[1],this.Ddt=this.Nc.d0(t[2]),this.avt.vSt(this.Ddt),this.Xbt=this.Ddt.Ec()+"."+this.tvt,this.Zbt=t[3],this.Kbt=t[4].map((t=>bb.wwt.AG(this.F3,this,t))),this.Qbt=t[5],this.nvt=t[6],this.evt=t[7],this.Ddt.cvt(this)}static gwt(t,s,i){const e=bb.Hn(bb.zyt,t,s,i),n=i[1];return e.lvt(n),e}static ywt(t,s,i){const e=bb.Hn(bb.zyt,t,s,i),n=i[1];return e.uvt(n),e}Wmt(){if(this.Ddt&&this.Ddt.k0())for(const t of this.Ddt.tj())if(t.fvt(this.tvt)){this.svt=!0;break}}Bmt(){for(const t of this.Kbt)t.Bmt();this.avt.Bmt(!1)}Jmt(){return this.Ybt}agt(){return this.Kbt}Jyt(){return this.Kbt}Vk(){return this.Kbt.length}dvt(t){this.ivt.push(t)}pvt(){return this.ivt}Pbt(t){const s=this.Kbt;for(let i=0,e=s.length;i<e;++i)s[i].Pnt(t[i].qs(0))}Ebt(t){const s=this.Kbt;for(let i=0,e=s.length;i<e;++i)s[i].Pnt(t[i])}mvt(){return this.Kbt.map((t=>t.Jet()))}FH(){return this.Hwt}ogt(){return this.Hwt}Ymt(){return this.Xbt}gvt(){return this.tvt}yvt(){return this.svt}Xk(){return this.Zbt}WV(){return this.Ddt}Iu(){return this.Qbt}jk(){switch(this.Zbt){case 0:return null;case 2:return"";default:return 0}}Uk(){return this.avt}Yk(){return this.evt}wbt(){return this.nvt}Nbt(){const t=this.rvt++;let s;this.hvt=t;const i=new Promise((t=>s=t));return this.ovt.set(t,{resolve:s,wvt:0}),[t,i]}$bt(t){const s=this.ovt.get(t);0===s.wvt&&(s.resolve(),this.ovt.delete(t)),this.hvt=-1}Svt(){return this.ovt.get(this.hvt).wvt++,this.hvt}bvt(t){this.hvt=t,this.ovt.get(t).wvt--}vvt(t,s){const i=new Map,e=[];for(const t of this.Ddt.DW().FW()){const s=t.WV();if(s.fvt(this.tvt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&this.avt.Abt(t,s,this.evt,{Dbt:this.Ddt,Lbt:e}),i.size>0)for(const[e,n]of i){const i=e.Mvt(this.tvt).Uk(),r=[...new Set([...t,...i.CY()])];i.Abt(r,s,this.evt,{Dbt:e,Lbt:n})}}*xvt(t,s){const i=new Map,e=[];for(const t of this.Ddt.DW().FW()){const s=t.WV();if(s.fvt(this.tvt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&(yield*this.avt.Bbt(t,s,this.evt,{Dbt:this.Ddt,Lbt:e})),i.size>0)for(const[e,n]of i){const i=e.Mvt(this.tvt).Uk(),r=[...new Set([...t,...i.CY()])];yield*i.Bbt(r,s,this.evt,{Dbt:e,Lbt:n})}}}}{const Mb=self._s,xb=[];Mb.wwt=class extends Mb.Vn{constructor(t,s,i){super();const e=t.Bk();this.F3=t,this.fpt=e,this.Nc=t.$$(),this.Hwt=s,this.Gmt=e.rgt(),this.Yn=i[1],this.qc=i[2],this.Tvt=i[3],this.hT=!!i[4],this.Gvt=!!i[5],this.Ivt=s instanceof Mb.zyt,this.dQ=i[6],this._vt=this.Nc.ugt(i[8]),this.Cvt=t=>this.Pnt(t),this.Evt=()=>this.Jet(),this.Pvt=!this.Hwt||this.hT||this.Gvt,this.Mrt=this.Tvt,this.Avt=-1,this.Rvt()&&(this.Mrt=this.Mrt?1:0),!this.Ovt()||this.FT()||this.Wyt()||(this.Avt=e.Kmt(this)),e.Xmt(this)}static AG(t,s,i){return Mb.Hn(Mb.wwt,t,s,i)}Bmt(){if(this.Ovt()&&!this.FT()&&!this.Wyt()&&!this.Fvt()){const t=this.fpt.qyt(this);t&&t.dvt(this)}}Ec(){return this.Yn}ugt(){return this._vt}FH(){return this.Hwt}ogt(){return this.FH()}x0(){return!this.FH()}Ovt(){return!this.x0()}Fvt(){return this.Ivt}FT(){return this.hT}Wyt(){return this.Gvt}Qi(){return 0===this.qc}le(){return 1===this.qc}Rvt(){return 2===this.qc}Iwt(){return!1}U0(){return this.dQ}Qmt(){return this.Tvt}CY(){return xb}tE(t){!this.Ovt()||this.FT()||this.Wyt()||this.Pnt(this.Qmt())}kwt(){return!0}*Dgt(t){this.tE(t)}Pnt(t){this.Qi()?"number"!=typeof t&&(t=parseFloat(t)):this.le()?"string"!=typeof t&&(t=t.toString()):this.Rvt()&&(t=t?1:0),this.Pvt?this.Mrt=t:this.Gmt.Zpt()[this.Avt]=t}Jet(){return this.Pvt?this.Mrt:this.Gmt.Zpt()[this.Avt]}Dvt(){let t=this.Jet();return this.Rvt()&&(t=!!t),t}bgt(){this.Mrt=this.Tvt}cgt(){return{configurable:!1,enumerable:!0,get:this.Evt,set:this.Cvt}}}}{const Tb=self._s,Gb=self.assert,Ib=[];Tb.Swt=class extends Tb.Vn{constructor(t,s,i){super();const e=t.Bk();this.F3=t,this.fpt=e,this.Nc=t.$$(),this.Hwt=s,this.Lvt=null,this.kvt=i[1],this.Nf=!0}static AG(t,s,i){return Tb.Hn(Tb.Swt,t,s,i)}Bmt(){this.Lvt=this.fpt.U5(this.kvt),this.F3._wt(this);let t=this.FH();for(;t;)t instanceof Tb.fwt&&t.xgt()&&t.TSt(this),t=t.FH();this.XSt(),this.Nc.AU()&&this.F3.Hyt().children.push(this.Lvt.Hyt())}FH(){return this.Hwt}CY(){return Ib}Ewt(){return this.Lvt}tE(t){const s=!!this.FH(),i=this.Nc.L0();s&&this.fpt.Qgt(i),this.Lvt.tE(),s&&this.fpt.kY(i)}*Dgt(t){const s=!!this.FH(),i=this.Nc.L0();s&&this.fpt.Qgt(i),yield*this.Lvt.Dgt(),s&&this.fpt.kY(i)}kwt(){return!1}Pwt(){return this.Nf}XSt(){let t=this.FH();for(;t;){if(t instanceof Tb.fwt&&t.xgt()&&!t.$yt())return void(this.Nf=!1);t=t.FH()}this.Nf=!0}}}{let _b=function(t,s){return t>=s?t%s:t<0?(t<=-s&&(t%=s),t<0&&(t+=s),t):t};WrapIndex=_b;const Cb=self._s,Eb=self.assert;Cb.Nvt=class extends Cb.Vn{constructor(t){super(),this.Sx=t,this.Nc=t.$$()}Bmt(){}static $vt(t,s){const i=s[0],e=[Fb,Rb,Ob,Db,Pb,Ab];return Cb.Hn(e[i],t,s)}};class Pb extends Cb.Nvt{constructor(t,s){super(t),this.Bvt=this.Nc.ZZ(),this.Ubt=this.Nc.Vbt(s[1]),this.Ubt!==Cb.R$.A$.$rt.random&&this.Ubt!==Cb.R$.A$.$rt.Wvt||this.Sx.jvt()}Vvt(){return this.Bvt.Uvt(this.Ubt,this.Bvt)}}class Ab extends Cb.Nvt{constructor(t,s){super(t),this.Hvt=null,this.Xbt=s[1],this.Sx.jvt()}Bmt(){const t=this.Nc.Bk();this.Hvt=t.Wk(this.Xbt),this.Xbt=null;const s=this.Sx.Uk(),i=this.Hvt.Uk();this.qvt=[...new Set([...s.Hk(),...i.Hk()])],this.qvt=t.Zmt(this.qvt)}Vvt(){const t=this.Hvt;if(t.Iu()){const s=t.Uk();return Cb.fwt.prototype.Jk.bind(s,this.qvt,t.Yk(),t.Xk(),t.jk())}{const s=t.jk();return()=>s}}}class Rb extends Cb.Nvt{constructor(t,s){super(t),this.Ddt=this.Nc.d0(s[1]),this.Ubt=this.Nc.Vbt(s[2]),this.zvt=!!s[3],this.Vdt=this.Nc.Bk().Qk(),this.Sx.Jvt(this.Ddt)}Vvt(){return this.Ddt.MW().Uvt(this.Ubt,this.Ddt.SW().Aq())}Yvt(...t){const s=this.Ddt,i=s.DW().Zdt(),e=i.length;if(0===e)return this.zvt?"":0;const n=_b(this.Sx.Xvt(),e);return this.Vdt.EY().$pt(s),this.Ubt.apply(i[n].Aq(),t)}Zvt(t,...s){const i=this.Ddt,e=i.FW(),n=e.length;if(0===n||"number"!=typeof t)return this.zvt?"":0;const r=_b(t,n);return this.Vdt.EY().$pt(i),this.Ubt.apply(e[r].Aq(),s)}}class Ob extends Cb.Nvt{constructor(t,s){super(t),this.Ddt=this.Nc.d0(s[1]),this.Kvt=s[3],this.zvt=!!s[2],this.Sx.Jvt(this.Ddt)}Qvt(){const t=this.Ddt.DW().Zdt(),s=t.length;return 0===s?this.zvt?"":0:t[_b(this.Sx.Xvt(),s)].tMt(this.Kvt)}sMt(){const t=this.Ddt,s=t.DW().Zdt(),i=s.length;if(0===i)return this.zvt?"":0;const e=s[_b(this.Sx.Xvt(),i)],n=e.WV().iMt(t.eMt());return e.tMt(this.Kvt+n)}nMt(t){const s=this.Ddt,i=s.FW(),e=i.length;if(0===e||"number"!=typeof t)return this.zvt?"":0;const n=i[_b(t,e)];let r=0;return s.k0()&&(r=n.WV().iMt(s.eMt())),n.tMt(this.Kvt+r)}}class Fb extends Cb.Nvt{constructor(t,s){super(t),this.Ddt=this.Nc.d0(s[1]),this.rMt=this.Ddt.trt(s[2]),this.hMt=this.Ddt.xit(s[2]),this.Ubt=this.Nc.Vbt(s[3]),this.zvt=!!s[4],this.Vdt=this.Nc.Bk().Qk(),this.Sx.Jvt(this.Ddt)}oMt(...t){const s=this.Ddt,i=s.DW().Zdt(),e=i.length;if(0===e)return this.zvt?"":0;const n=_b(this.Sx.Xvt(),e);this.Vdt.EY().$pt(s);const r=i[n];let h=0;return s.k0()&&(h=r.WV().aMt(s.eMt())),this.Ubt.apply(r.Qnt()[this.hMt+h].Aq(),t)}lMt(t,...s){const i=this.Ddt,e=i.FW(),n=e.length;if(0===n||"number"!=typeof t)return this.zvt?"":0;const r=_b(t,n);this.Vdt.EY().$pt(i);const h=e[r];let o=0;return i.k0()&&(o=h.WV().aMt(i.eMt())),this.Ubt.apply(h.Qnt()[this.hMt+o].Aq(),s)}}class Db extends Cb.Nvt{constructor(t,s){super(t),this.uMt=null,this.cMt=s[1]}Bmt(){this.uMt=this.Nc.Bk().fgt(this.cMt)}fMt(){return this.uMt}}}{let Lb=function(t){const s=self.dMt[t];if(!s)throw new Error("invalid expression number");return s};GetExpressionFunc=Lb;const kb=self._s,Nb=self.assert;kb.pMt=class extends kb.Vn{constructor(t,s,i){super(),this.Sx=t,this.Pw=i,this.qc=s,this.qs=null,this.mMt=!1,this.Gvt=!1}static AG(t,s,i){const e=s[0],n=[$b,Bb,zb,jb,Ub,Wb,Hb,$b,jb,jb,Jb,Yb,zb,Zb,Bb,qb,Vb,Xb,Kb,Qb,tv,sv];return kb.Hn(n[e],t,e,i,s)}Bmt(){}jvt(){this.mMt=!0}Jvt(t){this.mMt||t&&(t.MW().XB()||(this.mMt=!0))}gMt(){return this.mMt}tk(){return this.Pw}$$(){return this.Sx.$$()}Uk(){return this.Sx.Uk()}Wyt(){return this.Gvt}yMt(){return 4===this.qc}};class $b extends kb.pMt{constructor(t,s,i,e){super(t,s,i),this.wMt=0;const n=e[1];this.SMt=n[0],this.bMt=[],this.vMt=null;for(let t=1,s=n.length;t<s;++t)this.bMt.push(kb.Nvt.$vt(this,n[t]));this.bMt.length?this.qs=this.MMt:(this.qs=Lb(this.SMt),this.Gvt=!0)}xMt(t){if(t<0||t>=this.bMt.length)throw new RangeError("invalid numbered node");return this.bMt[t]}Bmt(){for(const t of this.bMt)t.Bmt();const t=Lb(this.SMt);this.bMt.length?this.vMt=t(this):this.vMt=t}Xvt(){return this.wMt}MMt(t){return this.wMt=t,this.vMt()}}class Bb extends $b{constructor(t,s,i,e){super(t,s,i,e),this.qs=this.TMt,14===s&&(this.Uk().CSt(),this.Sx instanceof kb.MSt&&this.Uk().WSt())}TMt(t){this.wMt=t;const s=this.vMt();return"string"==typeof s?s:""}GMt(){return Lb(this.SMt)()}}class Wb extends $b{constructor(t,s,i,e){super(t,s,i,e),t.IMt()>=2?this.qs=this.wj:this.qs=this.f$,this.Gvt=!1}f$(t){this.wMt=t;const s=this.vMt();return this.$$().l$().f$(s)}wj(t){const s=this.f$(t);return s?s.wj():null}}class jb extends kb.pMt{constructor(t,s,i,e){super(t,s,i),this._Mt=e[1],this.qs=this.CMt,this.Gvt=!0}CMt(){return this._Mt}}class Vb extends kb.pMt{constructor(t,s,i,e){super(t,s,i),this.EMt=e[1],this.qs=this.PMt,this.Gvt=!0}PMt(){return this.EMt}}class Ub extends kb.pMt{constructor(t,s,i,e){super(t,s,i),this.Ddt=this.$$().d0(e[1]),t.IMt()>=2?this.qs=this.gW:this.qs=this.WV;const n=this.Uk();n.vSt(this.Ddt),this.Sx instanceof kb.MSt?n.WSt():n.FH()&&n.FH().WSt(),this.Gvt=!0}WV(){return this.Ddt}gW(){return this.Ddt?this.Ddt.gW():null}}class Hb extends kb.pMt{constructor(t,s,i,e){super(t,s,i),this.lQ=this.$$().qN().Y4(e[1]),t.IMt()>=2?this.qs=this.UN:this.qs=this.zN,this.Gvt=!0}zN(){return this.lQ}UN(){return this.lQ?this.lQ.UN():null}}class qb extends kb.pMt{constructor(t,s,i,e){super(t,s,i),this.s7=this.$$().ltt().h8(e[1]),t.IMt()>=2?this.qs=this.Wst:this.qs=this.ait,this.Gvt=!0}ait(){return this.s7}Wst(){return this.s7?this.s7.Wst():null}}class zb extends kb.pMt{constructor(t,s,i,e){super(t,s,i),this.AMt=e[1],this.qs=this.RMt,this.Gvt=!0}RMt(){return this.AMt}}class Jb extends kb.pMt{constructor(t,s,i,e){super(t,s,i),this.OMt=e[1];const n=this.Sx.WV();this.Sx instanceof kb.bSt&&this.Sx.FT()?(this.qs=this.FMt,this.Gvt=!0):n&&n.k0()?(this.qs=this.DMt,this.jvt()):(this.qs=this.FMt,this.Gvt=!0)}FMt(){return this.OMt}DMt(t){t=t||0;const s=this.Sx.WV(),i=s.DW(),e=i.FW();let n=null;if(e.length)n=e[t%e.length].WV();else if(i.Ydt()){const s=i.Xdt();n=s[t%s.length].WV()}else{if(!(s.NW()>0))return 0;{const i=s.FW();n=i[t%i.length].WV()}}return this.OMt+n.iMt(s.eMt())}}class Yb extends kb.pMt{constructor(t,s,i,e){super(t,s,i),this.cMt=e[1],this.uMt=null,t.IMt()>=2?this.qs=this.LMt:this.qs=this.kMt,this.Gvt=!0}Bmt(){this.uMt=this.$$().Bk().fgt(this.cMt)}kMt(){return this.uMt}LMt(){return null}}class Xb extends kb.pMt{constructor(t,s,i,e){super(t,s,i),this.NMt=e[1],this.Hvt=null,t.IMt()>=2?this.qs=this.$Mt:this.qs=this.BMt,this.Gvt=!0}Bmt(){this.Hvt=this.$$().Bk().Wk(this.NMt),this.NMt=null}BMt(){return this.Hvt}$Mt(){return null}}class Zb extends kb.pMt{constructor(t,s,i,e){super(t,s,i),this.WMt=[],this.jMt=[],this.Gvt=!0;for(let t=1,s=e.length;t<s;++t){const s=kb.pMt.AG(this.Sx,e[t],0);this.WMt.push(s),this.jMt.push(0),s.Wyt()||(this.Gvt=!1)}this.qs=this.VMt}Bmt(){for(const t of this.WMt)t.Bmt()}VMt(){const t=this.WMt,s=this.jMt;for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(0);return s}}class Kb extends kb.pMt{constructor(t,s,i,e){super(t,s,i),this.UMt=e[1],this.qs=this.Ent,this.Gvt=!0}Ent(){return this.UMt}}class Qb extends kb.pMt{constructor(t,s,i,e){super(t,s,i),this.HMt=e[1],this.qs=this.qMt,this.Gvt=!0}qMt(){return this.HMt}}class tv extends $b{constructor(t,s,i,e){super(t,s,i,e),this.qs=this.nU,this.Gvt=!1}nU(){return this.vMt()}}class sv extends kb.pMt{constructor(t,s,i,e){super(t,s,i),this.Zut=this.$$().mct().Hut(e[1]),this.qs=this.zMt,this.Gvt=!0}zMt(){return this.Zut.Ec()}}}{let iv=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(0)};EvalParams=iv;const ev=self._s,nv=self.assert,rv=[],hv=function(){};ev.bSt=class extends ev.Vn{constructor(t,s,i){if(super(),this.avt=t,this.Nc=t.$$(),this.Pw=i,this.Ubt=this.Nc.Vbt(s[1]),this.JMt=s[3]>0,this.YMt=2===s[3],this.XMt=!!s[4],this.ZMt=!!s[5],this.hT=!!s[6],this.dQ=s[7],this.KMt=this.avt.upt(),this.Ddt=null,this.rMt=null,this.hMt=-1,this.Bvt=null,this.tE=hv,this.Dgt=hv,this.Ws=[],this.QMt=[],this.txt=!1,this.sxt=null,this.ixt=null,this.fSt=this.Nc.AU()?{dSt:s[8][0],nxt:s[8][1]}:null,-1===s[0]?this.Bvt=this.Nc.ZZ():(this.Ddt=this.Nc.d0(s[0]),s[2]&&(this.rMt=this.Ddt.trt(s[2]),this.hMt=this.Ddt.xit(s[2])),this.avt.FH()&&this.avt.FH().WSt()),10===s.length){let t=s[9];for(let s of t)this.Ws.push(ev.pMt.AG(this,s,this.Ws.length)),this.QMt.push(0)}0===this.Ws.length&&(this.Ws=rv,this.QMt=rv),this.avt.Bk().Hmt(this)}static AG(t,s,i){return ev.Hn(ev.bSt,t,s,i)}Bmt(){for(const t of this.Ws)t.Bmt(),t.gMt()&&(this.txt=!0);this.YMt?(this.tE=this.rxt,this.Dgt=this.hxt):this.Bvt?(this.oxt(),this.Dgt=this.axt):this.Ddt.MW().XB()?(this.lxt(),this.Dgt=this.uxt):this.hT?(this.tE=this.cxt,this.Dgt=this.fxt):(this.tE=this.dxt,this.Dgt=this.pxt)}oxt(){const t=this.Bvt,s=this.Bvt;this.mxt(t,s,this.gxt)}lxt(){const t=this.Ddt.MW(),s=this.Ddt.SW().Aq();this.mxt(t,s,this.yxt)}mxt(t,s,i){const e=this.Ubt,n=this.ZMt,r=this.Ws;if(0===r.length){const i=t.Uvt(e,s);this.tE=n?function(){return ev.xor(i(),n)}:i}else if(1===r.length){const i=r[0];if(!n&&i.Wyt())this.tE=t.wxt(e,s,i.qs(0));else{const r=t.Uvt(e,s);this.tE=function(){return ev.xor(r(i.qs(0)),n)}}}else if(2===r.length){const i=r[0],h=r[1];if(!n&&i.Wyt()&&h.Wyt())this.tE=t.Sxt(e,s,i.qs(0),h.qs(0));else{const r=t.Uvt(e,s);this.tE=function(){return ev.xor(r(i.qs(0),h.qs(0)),n)}}}else if(3===r.length){const i=r[0],h=r[1],o=r[2];if(!n&&i.Wyt()&&h.Wyt()&&o.Wyt())this.tE=t.bxt(e,s,i.qs(0),h.qs(0),o.qs(0));else{const r=t.Uvt(e,s);this.tE=function(){return ev.xor(r(i.qs(0),h.qs(0),o.qs(0)),n)}}}else this.tE=i}U0(){return this.dQ}vwt(){return this.Ubt}WV(){return this.Ddt}Wq(){return this.rMt}vxt(){return this.rMt?this.rMt.Nq():this.Ddt?this.Ddt.MW():null}IMt(){const t=this.vxt();return t?t.Mxt():1}Uk(){return this.avt}$$(){return this.Nc}tk(){return this.Pw}rbt(){return this.tk()}pwt(){return this.JMt}Mwt(){return this.YMt}xxt(){return this.ZMt}sz(){return this.XMt}FT(){return this.hT}Txt(){return this.fSt.dSt}Gxt(){return!!this.Bvt}tbt(){return this.Gxt()||this.Ddt.MW().XB()}sbt(){for(const t of this.Ws)if(t.yMt())return t.WV();return null}Ixt(t){this.fSt.dSt=!!t,this.avt.NSt()}_xt(){return this.fSt.nxt}kwt(){return!this.Txt()&&!this.Nc.pbt()&&!this._xt()}Cxt(){return this.sxt||(this.sxt=new Map),this.sxt}Ext(){return this.ixt||(this.ixt=new Map),this.ixt}gxt(){const t=this.QMt;return iv(this.Ws,t),ev.xor(this.Ubt.apply(this.Bvt,t),this.ZMt)}*axt(){if((this.Txt()||this.Nc.pbt())&&(yield this),this._xt()){const t=this.QMt;iv(this.Ws,t);let s=this.Ubt.apply(this.Bvt,t);return ev.Mo(s)&&(s=yield*s),ev.xor(s,this.ZMt)}return this.tE()}yxt(){const t=this.QMt;iv(this.Ws,t);const s=this.Ddt.SW().Aq();return ev.xor(this.Ubt.apply(s,t),this.ZMt)}*uxt(){if((this.Txt()||this.Nc.pbt())&&(yield this),this._xt()){const t=this.QMt;iv(this.Ws,t);const s=this.Ddt.SW().Aq();let i=this.Ubt.apply(s,t);return ev.Mo(i)&&(i=yield*i),ev.xor(i,this.ZMt)}return this.tE()}rxt(){return!0}*hxt(){return(this.Txt()||this.Nc.pbt())&&(yield this),!0}Pxt(){return this.rMt?this.rMt.Nq().Mxt()>=2?this.rMt.Bq():this.rMt:this.Ddt.MW().Mxt()>=2?this.Ddt.gW():this.Ddt}cxt(){const t=this.QMt;iv(this.Ws,t);const s=this.Ubt.apply(this.Pxt(),t);return this.Ddt.Fbt(),s}*fxt(){if((this.Txt()||this.Nc.pbt())&&(yield this),this._xt()){const t=this.QMt;iv(this.Ws,t);let s=this.Ubt.apply(this.Pxt(),t);return ev.Mo(s)&&(s=yield*s),this.Ddt.Fbt(),s}return this.tE()}dxt(){const t=this.Ws,s=this.QMt,i=this.Ddt.DW();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.gMt()||(s[i]=e.qs(0))}return i.zdt()?this.Axt(i):this.Rxt(i)}*pxt(){return(this.Txt()||this.Nc.pbt())&&(yield this),this.dxt()}Oxt(t){const s=this.Ws,i=this.QMt;for(let e=0,n=s.length;e<n;++e){const n=s[e];n.gMt()&&(i[e]=n.qs(t))}}Axt(t){const s=this.Ddt,i=s.k0(),e=s.eMt(),n=this.hMt,r=n>=0,h=s.FW(),o=this.txt,a=this.QMt,l=this.Ubt,u=this.ZMt,c=this.KMt&&!this.JMt;t.qdt();for(let s=0,f=h.length;s<f;++s){const f=h[s];let d;if(o&&this.Oxt(s),r){const t=i?f.WV().aMt(e):0;d=l.apply(f.Qnt()[n+t].Aq(),a)}else d=l.apply(f.Aq(),a);ev.xor(d,u)?t.Kdt(f):c&&t.Qdt(f)}return s.Fxt(!0),t.tpt(!1),s.Fbt(),t.Jdt()}Rxt(t){const s=this.Ddt,i=s.k0(),e=s.eMt(),n=s.KV(),r=this.hMt,h=r>=0,o=this.txt,a=this.QMt,l=this.Ubt,u=this.ZMt,c=this.KMt&&!this.JMt,f=t.spt(),d=t.ipt(),p=c&&!this.avt.QSt(this),m=p?d:f;let g=0,y=!1;for(let t=0,s=m.length;t<s;++t){const s=m[t];let w;if(o&&this.Oxt(t),h){const t=i?s.WV().aMt(e):0;w=l.apply(s.Qnt()[r+t].Aq(),a)}else w=l.apply(s.Aq(),a);ev.xor(w,u)?(y=!0,p?(f.push(s),n&&s.Dxt()):(m[g]=s,n&&s.Lxt(g),++g)):p?(m[g]=s,n&&s.kxt(g),++g):c&&(d.push(s),n&&s.Nxt())}ev.Sh(m,g),n&&s.$xt(p,g);const w=y;return p&&!y&&(y=this.Bxt(f)),s.Fxt(w||c),c?y:t.Jdt()}Bxt(t){const s=this.Ddt,i=s.k0(),e=s.eMt(),n=this.txt,r=this.hMt,h=r>=0,o=this.QMt,a=this.Ubt,l=this.ZMt;for(let s=0,u=t.length;s<u;++s){const u=t[s];let c;if(n&&this.Oxt(s),h){const t=i?u.WV().aMt(e):0;c=a.apply(u.Qnt()[r+t].Aq(),o)}else c=a.apply(u.Aq(),o);if(ev.xor(c,l))return!0}return!1}Wxt(t,s){return this.Ws[t].qs(s)}xwt(){const t=this.Ws;if(!t.length)throw new Error("no parameters");return t[0].GMt()}b3(){if(!this.sxt||!this.sxt.size)return null;const t={};for(const[s,i]of this.sxt.entries()){let e=i;"collmemory"===s&&(e=[...i.entries()].map((t=>[t[0].tU(),t[1].tU(),t[2]]))),t[s]=e}return{ex:t}}v3(t){if(this.sxt&&(this.sxt.clear(),this.sxt=null),!t)return;const s=this.Nc,i=t.ex;if(i){const t=this.Cxt();t.clear();for(const[e,n]of Object.entries(i)){let i=n;"collmemory"===e&&(i=ev.Hn(ev._u,n.map((t=>[s.h$(t[0]),s.h$(t[1]),t[2]])).filter((t=>t[0]&&t[1])))),t.set(e,i)}}}}}{let ov=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(0)};EvalParams=ov;const av=self._s,lv=self.assert,uv=[],cv=function(){},fv=function*(){},dv=1,pv=2,mv=4,gv=8,yv=16;av.MSt=class extends av.Vn{constructor(t,s,i){super(),this.avt=t;const e=t.$$();this.Nc=e,this.Pw=i,this.dQ=s.length>=4?s[3]:-1,this.jxt=s.length>=5?255&s[4]:0,this.Vxt=s.length>=5?s[4]>>8:0,this.Ubt=null,this.Ddt=null,this.rMt=null,this.hMt=-1,this.Bvt=null,this.Uxt="",this.Hxt=null,this.qxt=null,this.tE=cv,this.Dgt=cv,this.Ws=[],this.QMt=[],this.txt=!1,this.sxt=null,this.ixt=null;const n=-3===s[0],r=n?s[2]:s[5];if(this.fSt=e.AU()||n?{dSt:r[0],nxt:r[1],index:r[2]}:null,-1===s[0])this.Bvt=e.ZZ(),this.Ubt=e.Vbt(s[1]);else if(-2===s[0])this.Uxt=s[1];else if(n){const t=e.Vbt(s[1]);this.Ubt=t,this.tE=this.zxt,this.Dgt=this.Jxt,this.Vxt|=8}else this.Ddt=e.d0(s[0]),4&this.Vxt?(this.Uxt=s[1],this.Hxt=e.d0(s[2])):(s[2]&&(this.rMt=this.Ddt.trt(s[2]),this.hMt=this.Ddt.xit(s[2])),this.Ubt=e.Vbt(s[1]));if(7===s.length){const t=s[6];for(const s of t)this.Ws.push(av.pMt.AG(this,s,this.Ws.length)),this.QMt.push(0)}0===this.Ws.length&&(this.Ws=uv,this.QMt=uv),this.Yxt()&&(this.avt.CSt(),this.avt.WSt()),this.avt.Bk().qmt(this)}static AG(t,s,i){return av.Hn(av.MSt,t,s,i)}Bmt(){for(const t of this.Ws)t.Bmt(),t.gMt()&&(this.txt=!0);if(this.Bvt)this.oxt(),this.Dgt=this.axt;else if(this.Uxt)4&this.Vxt?this.Xxt():this.Zxt(),this.Uxt="",this.Hxt=null;else if(this.tE===this.zxt){const t=this.Ubt,s=this.Nc.Bk().lgt(this.avt);this.Ubt=t.bind(null,this.Nc.zB(),s)}else this.rMt?this.wbt()?(this.tE=this.Kxt,this.Dgt=this.Qxt):(this.tE=this.tTt,this.Dgt=this.sTt):this.Ddt.MW().XB()?(this.lxt(),this.Dgt=this.uxt):this.FT()?(this.tE=this.iTt,this.Dgt=this.eTt):this.wbt()?(this.tE=this.nTt,this.Dgt=this.rTt):this.hTt()?(this.tE=this.oTt,this.Dgt=this.aTt):this.Ws.length?this.Ws.every((t=>t.gMt()))?(this.tE=this.lTt,this.Dgt=this.uTt):this.txt?(this.tE=this.cTt,this.Dgt=this.fTt):this.Ws.every((t=>t.Wyt()))?(ov(this.Ws,this.QMt),this.tE=this.dTt,this.Dgt=this.pTt):(this.tE=this.mTt,this.Dgt=this.gTt):(this.tE=this.dTt,this.Dgt=this.pTt)}oxt(){const t=this.Bvt,s=this.Bvt;this.mxt(t,s,this.gxt)}lxt(){const t=this.Ddt.MW(),s=this.Ddt.SW().Aq();this.mxt(t,s,this.yxt)}Zxt(){const t=this.avt.Bk(),s=t.Wk(this.Uxt);if(s.Iu()){const i=!!(2&this.Vxt);this.qxt=s.Uk();let e=[...new Set([...this.avt.Hk(),...this.qxt.Hk()])];e=t.Zmt(e);const n=!s.Yk()&&this.yTt()?{kbt:!0}:null;if(this.tE=av.fwt.prototype.Abt.bind(this.qxt,e,this.Ws,i,n),this.Nc.AU()){const t=this;this.Dgt=function*(){return(t.Txt()||t.Nc.pbt())&&(yield t),yield*t.qxt.Bbt(e,t.Ws,i,n)}}else this.Dgt=fv}else this.tE=cv,this.Dgt=fv}Xxt(){const t=this.avt.Bk(),s=t.ggt(this.Hxt,this.Uxt);if(s.Iu()){const i=!!(2&this.Vxt);this.qxt=s.Uk();let e=[...new Set([...this.avt.Hk(),...this.qxt.Hk(),this.Ddt,s.WV()])];e=t.Zmt(e);const n=!this.Ddt.k0()&&!s.WV().k0(),r=!this.Ddt.k0()&&s.WV().k0(),h=this.Ddt.k0();let o=null;if(!s.Yk()&&this.yTt()&&(o=o||{},o.kbt=!0),!r&&i||(o=o||{},o.Rbt=this.Ddt,o.Obt=s.WV()),n||r||h&&!s.yvt()?this.tE=av.fwt.prototype.Abt.bind(this.qxt,e,this.Ws,i,o):h&&(this.tE=av.zyt.prototype.vvt.bind(s,e,this.Ws)),this.Nc.AU()){const t=this;n||r||h&&!s.yvt()?this.Dgt=function*(){return(t.Txt()||t.Nc.pbt())&&(yield t),yield*t.qxt.Bbt(e,t.Ws,i,o)}:h&&(this.Dgt=function*(){return(t.Txt()||t.Nc.pbt())&&(yield t),yield*s.xvt(e,t.Ws)})}else this.Dgt=fv}else this.tE=cv,this.Dgt=fv}mxt(t,s,i){const e=this.Ubt,n=this.Ws;if(0===n.length)this.tE=t.Uvt(e,s);else if(1===n.length){const i=n[0];if(i.Wyt())this.tE=t.wxt(e,s,i.qs(0));else{const n=t.Uvt(e,s);this.tE=function(){return n(i.qs(0))}}}else if(2===n.length){const i=n[0],r=n[1];if(i.Wyt()&&r.Wyt())this.tE=t.Sxt(e,s,i.qs(0),r.qs(0));else{const n=t.Uvt(e,s);this.tE=function(){return n(i.qs(0),r.qs(0))}}}else if(3===n.length){const i=n[0],r=n[1],h=n[2];if(i.Wyt()&&r.Wyt()&&h.Wyt())this.tE=t.bxt(e,s,i.qs(0),r.qs(0),h.qs(0));else{const n=t.Uvt(e,s);this.tE=function(){return n(i.qs(0),r.qs(0),h.qs(0))}}}else this.tE=i}U0(){return this.dQ}wbt(){return!!(8&this.Vxt)}ybt(){return!!(16&this.Vxt)}hTt(){return 1===this.jxt}FT(){return 2===this.jxt}Yxt(){return!!(1&this.Vxt)}ASt(){return this.wbt()||this.ybt()}WV(){return this.Ddt}vxt(){return this.rMt?this.rMt.Nq():this.Ddt?this.Ddt.MW():null}IMt(){const t=this.vxt();return t?t.Mxt():1}Uk(){return this.avt}yTt(){let t=this.avt;do{if(t instanceof av.zyt&&t.Yk())return!0;t=t.ogt()}while(t);return!1}$$(){return this.Nc}tk(){return this.Pw}rbt(){return this.fSt.index}Txt(){return this.fSt.dSt}Ixt(t){this.fSt.dSt=!!t,this.avt.NSt()}_xt(){return this.fSt.nxt}kwt(){return!this.Txt()&&!this.Nc.pbt()&&!this._xt()}Cxt(){return this.sxt||(this.sxt=new Map),this.sxt}Ext(){return this.ixt||(this.ixt=new Map),this.ixt}gxt(){const t=this.QMt;return ov(this.Ws,t),this.Ubt.apply(this.Bvt,t)}*axt(){if((this.Txt()||this.Nc.pbt())&&(yield this),this._xt()){const t=this.QMt;return ov(this.Ws,t),yield*this.Ubt.apply(this.Bvt,t)}return this.tE()}yxt(){const t=this.QMt;return ov(this.Ws,t),this.Ubt.apply(this.Ddt.SW().Aq(),t)}*uxt(){if((this.Txt()||this.Nc.pbt())&&(yield this),this._xt()){const t=this.QMt;return ov(this.Ws,t),yield*this.Ubt.apply(this.Ddt.SW().Aq(),t)}return this.tE()}dTt(){const t=this.QMt,s=this.Ddt.DW().FW();for(let i=0,e=s.length;i<e;++i)this.Ubt.apply(s[i].Aq(),t)}*pTt(){if((this.Txt()||this.Nc.pbt())&&(yield this),this._xt()){const t=this.QMt,s=this.Ddt.DW().FW();for(let i=0,e=s.length;i<e;++i)yield*this.Ubt.apply(s[i].Aq(),t)}else this.dTt()}mTt(){const t=this.QMt;ov(this.Ws,t);const s=this.Ddt.DW().FW();for(let i=0,e=s.length;i<e;++i)this.Ubt.apply(s[i].Aq(),t)}*gTt(){if((this.Txt()||this.Nc.pbt())&&(yield this),this._xt()){const t=this.QMt;ov(this.Ws,t);const s=this.Ddt.DW().FW();for(let i=0,e=s.length;i<e;++i)yield*this.Ubt.apply(s[i].Aq(),t)}else this.mTt()}lTt(){const t=this.Ws,s=this.QMt,i=this.Ubt,e=this.Ddt.DW().FW();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(n);i.apply(r.Aq(),s)}}*uTt(){if((this.Txt()||this.Nc.pbt())&&(yield this),this._xt()){const t=this.Ws,s=this.QMt,i=this.Ubt,e=this.Ddt.DW().FW();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(n);yield*i.apply(r.Aq(),s)}}else this.lTt()}cTt(){const t=this.Ws,s=this.QMt,i=this.Ubt,e=this.Ddt.DW().FW();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.gMt()||(s[i]=e.qs(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.gMt()&&(s[i]=e.qs(n))}i.apply(r.Aq(),s)}}*fTt(){if((this.Txt()||this.Nc.pbt())&&(yield this),this._xt()){const t=this.Ws,s=this.QMt,i=this.Ubt,e=this.Ddt.DW().FW();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.gMt()||(s[i]=e.qs(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.gMt()&&(s[i]=e.qs(n))}yield*i.apply(r.Aq(),s)}}else this.cTt()}oTt(){const t=this.Ws,s=this.QMt,i=this.Ubt,e=this.Ddt,n=e.wTt(),r=e.DW().FW();n.STt(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].qs(e);i.apply(n.Aq(),s)}n.bTt(i)}*aTt(){if((this.Txt()||this.Nc.pbt())&&(yield this),this._xt()){const t=this.Ws,s=this.QMt,i=this.Ubt,e=this.Ddt,n=e.wTt(),r=e.DW().FW();n.STt(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].qs(e);yield*i.apply(n.Aq(),s)}n.bTt(i)}else this.oTt()}vTt(){return this.rMt?this.rMt.Nq().Mxt()>=2?this.rMt.Bq():this.rMt:this.Ddt.MW().Mxt()>=2?this.Ddt.gW():this.Ddt}iTt(){const t=this.QMt;return ov(this.Ws,t),this.Ubt.apply(this.vTt(),t)}*eTt(){if((this.Txt()||this.Nc.pbt())&&(yield this),this._xt()){const t=this.QMt;ov(this.Ws,t);let s=this.Ubt.apply(this.vTt(),t);return av.Mo(s)&&(s=yield*s),s}return this.iTt()}tTt(){const t=this.Ddt,s=t.k0(),i=t.eMt(),e=this.Ws,n=this.txt,r=this.QMt,h=this.Ubt,o=this.hMt,a=t.DW().FW();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.gMt()||(r[t]=s.qs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.gMt()&&(r[s]=i.qs(t))}const u=s?l.WV().aMt(i):0;h.apply(l.Qnt()[o+u].Aq(),r)}}*sTt(){if((this.Txt()||this.Nc.pbt())&&(yield this),this._xt()){const t=this.Ddt,s=t.k0(),i=t.eMt(),e=this.Ws,n=this.txt,r=this.QMt,h=this.Ubt,o=this.hMt,a=t.DW().FW();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.gMt()||(r[t]=s.qs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.gMt()&&(r[s]=i.qs(t))}const u=s?l.WV().aMt(i):0;yield*h.apply(l.Qnt()[o+u].Aq(),r)}}else this.tTt()}nTt(){const t=this.Ws,s=this.QMt,i=this.Ubt,e=this.Ddt.DW().FW(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(r);n.push(i.apply(h.Aq(),s))}return Promise.all(n)}*rTt(){if((this.Txt()||this.Nc.pbt())&&(yield this),this._xt()){const t=this.Ws,s=this.QMt,i=this.Ubt,e=this.Ddt.DW().FW(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(r);n.push(yield*i.apply(h.Aq(),s))}return Promise.all(n)}return this.nTt()}Kxt(){const t=this.Ddt,s=t.k0(),i=t.eMt(),e=this.Ws,n=this.QMt,r=this.Ubt,h=this.hMt,o=t.DW().FW(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].qs(t);const u=s?l.WV().aMt(i):0;a.push(r.apply(l.Qnt()[h+u].Aq(),n))}return Promise.all(a)}*Qxt(){if((this.Txt()||this.Nc.pbt())&&(yield this),this._xt()){const t=this.Ddt,s=t.k0(),i=t.eMt(),e=this.Ws,n=this.QMt,r=this.Ubt,h=this.hMt,o=t.DW().FW(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].qs(t);const u=s?l.WV().aMt(i):0;a.push(yield*r.apply(l.Qnt()[h+u].Aq(),n))}return Promise.all(a)}return this.Kxt()}async zxt(){try{await this.Ubt()}catch(t){console.error(`Unhandled exception running script %c${this.avt.y5().Ec()}, event ${this.avt.USt()}, action ${this.rbt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.RU&&self.RU.qbt(this),av.bwt.zbt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),av.bwt.Jbt())}}*Jxt(){return(this.Txt()||this.Nc.pbt())&&(yield this),this.zxt()}b3(){return this.sxt&&this.sxt.size?{ex:av.So(this.sxt)}:null}v3(t){if(this.sxt&&(this.sxt.clear(),this.sxt=null),!t)return;const s=t.ex;s&&(this.sxt=av.bo(s))}}}{let wv=function(t){return t instanceof $v?Nv.Tj(t):t.nJ()},Sv=function(t){return wv(t).c$()},bv=function(t){return Nv.Tj(t)},vv=function(t){return bv(t).c$()},Mv=function(t){return t instanceof Bv?Nv.Tj(t):t},xv=function(t){return t instanceof Wv?Nv.Tj(t):t},Tv=function(t,s,i,e){s.tU()<i.tU()?t.Set(s,i,e):t.Set(i,s,e)},Gv=function(t,s,i){s.tU()<i.tU()?t.Au(s,i):t.Au(i,s)},Iv=function(t,s){t.Ru(s)},_v=function(t,s,i){return s.tU()<i.tU()?t.qs(s,i):t.qs(i,s)},Cv=function(t,s,i,e){if(!s)return!1;const n=0!==i||0!==e,r=t.c$(),h=Nv.lk(),o=Nv.sgt(),a=o.Uk().upt(),l=o.WV(),u=o.xxt(),c=s.DW(),f=l!==s;let d;qv=s,Hv=f&&!u,zv=!1;let p=0,m=0,g=!1;c.zdt()?(jv.S(r.pH()),jv.offset(i,e),h.MTt(r.f$(),s,jv,Uv),d=Uv):a?Nv.xTt()&&!c.ipt().length&&c.spt().length?d=c.spt():(d=c.ipt(),zv=!0):d=c.spt(),n&&(p=r.HM(),m=r.JM(),r.sH(i,e),r.KU());for(const s of d)if(h.hB(t,s)){if(g=!0,u)break;f&&Jv.add(s)}return n&&(r.QU(p,m),r.KU()),Ov.bh(Uv),g},Ev=function(t){const s=Nv.qk().upt(),i=qv.DW(),e=i.spt(),n=i.ipt();i.zdt()?(i.rpt(Jv),s&&(Ov.bh(n),i.hpt(Jv,qv.FW()))):s?zv?i.opt(Jv):(i.hpt(Jv,e),i.rpt(Jv)):i.rpt(Jv),qv.Fbt()},Pv=function(t,s){Hv&&(s&&Ev(t),Jv.clear(),qv=null,Hv=!1)},Av=function(t,s){const i=Nv.h$(s);if(!i)return!1;const e=t.DW();if(!e.zdt()&&!e.spt().includes(i))return!1;if(t.k0()){if(i.WV().TTt(t))return e.lpt(i),t.Fbt(),!0}else if(i.WV()===t)return e.lpt(i),t.Fbt(),!0;return!1},Rv=function(t,s){const i=t.DW();if(i.zdt()){i.tpt(!1),i.qdt();const e=t.FW();for(let t=0,n=e.length;t<n;++t){const n=e[t];n.tU()===s?i.Qdt(n):i.Kdt(n)}return t.Fbt(),!!i.spt().length}{const e=i.spt();let n=0;for(let t=0,r=e.length;t<r;++t){const r=e[t];e[n]=r,r.tU()===s?i.Qdt(r):++n}return Ov.Sh(e,n),t.Fbt(),!!e.length}};GetInst=wv,GetWorldInfo=Sv,GetInst_SDKv2=bv,GetWorldInfo_SDKv2=vv,GetObjectClass=Mv,GetLayer=xv,CollMemory_Add=Tv,CollMemory_Remove=Gv,CollMemory_RemoveInstance=Iv,CollMemory_Get=_v,DoOverlapCondition=Cv,FinishCollisionConditionPicking=Ev,FinishCollisionCondition=Pv,PickByUID_Normal=Av,PickByUID_Inverted=Rv;const Ov=self._s,Fv=new Ov.To,Dv={},Lv={},kv={};let Nv=null;Ov.GTt=function(t){Nv=t};const $v=self.BV,Bv=self.bW,Wv=self.xj;Lv.ITt=function(t,s){return Ov.compare(this.c$().HM(),t,s)},kv.ITt=function(t,s){return Ov.compare(this.x,t,s)},Lv._Tt=function(t,s){return Ov.compare(this.c$().JM(),t,s)},kv._Tt=function(t,s){return Ov.compare(this.y,t,s)},Lv.CTt=function(){return this.c$().wH()},kv.CTt=function(){return this.yH()},Dv.ETt=function(){const t=Sv(this),s=t.zN(),i=t.pH();return i.tl()<0||i.sl()<0||i.Ka()>s.jg()||i.Qa()>s.Kg()},Dv.PTt=function(t,s,i){const e=Mv(this).DW(),n=e.FW();if(!n.length)return!1;let r=n[0],h=r.c$(),o=r,a=Ov.nr(h.HM(),h.JM(),s,i);for(let e=1,l=n.length;e<l;++e){r=n[e],h=r.c$();const l=Ov.nr(h.HM(),h.JM(),s,i);(0===t&&l<a||1===t&&l>a)&&(a=l,o=r)}return e.lpt(o),!0},Lv.qM=function(t){const s=this.c$();s.HM()!==t&&(s.qM(t),s.KU())},kv.qM=function(t){this.x=+t},Lv.YM=function(t){const s=this.c$();s.JM()!==t&&(s.YM(t),s.KU())},kv.YM=function(t){this.y=+t},Lv.ATt=function(t,s){const i=this.c$();i.RTt(t,s)||(i.QU(t,s),i.KU())},kv.ATt=function(t,s){this.setPosition(t,s)},Dv.OTt=function(t,s){if(!(t=Mv(t)))return;const i=wv(this),e=t.RW(i);if(!e)return;const[n,r]=e.FTt(s),h=i.c$();h.HM()===n&&h.JM()===r||(h.QU(n,r),h.KU())},Dv.DTt=function(t){if(0===t)return;const s=Sv(this);s.sH(s.LTt()*t,s.kTt()*t),s.KU()},Lv.NTt=function(t,s){if(0===s)return;const i=this.c$();t=Ov.Qn(t),i.sH(Math.cos(t)*s,Math.sin(t)*s),i.KU()},kv.NTt=function(t,s){0!==s&&(t=Ov.Qn(t),this.offsetPosition(Math.cos(t)*s,Math.sin(t)*s))},Lv.HM=function(){return this.c$().HM()},kv.HM=function(){return this.x},Lv.JM=function(){return this.c$().JM()},kv.JM=function(){return this.y},Dv.lN=function(){return Nv.lN(wv(this))},Lv.$Tt=function(t,s){return Ov.compare(this.c$().jg(),t,s)},kv.$Tt=function(t,s){return Ov.compare(this.width,t,s)},Lv.BTt=function(t,s){return Ov.compare(this.c$().Kg(),t,s)},kv.BTt=function(t,s){return Ov.compare(this.height,t,s)},Lv.Yg=function(t){const s=this.c$();s.jg()!==t&&(s.Yg(t),s.KU())},kv.Yg=function(t){this.width=t},Lv.Vg=function(t){const s=this.c$();s.Kg()!==t&&(s.Vg(t),s.KU())},kv.Vg=function(t){this.height=t},Lv.TP=function(t,s){const i=Sv(this);i.jg()===t&&i.Kg()===s||(i.TP(t,s),i.KU())},kv.TP=function(t,s){this.oj(t,s)},Lv.jg=function(){return this.c$().jg()},kv.jg=function(){return this.width},Lv.Kg=function(){return this.c$().Kg()},kv.Kg=function(){return this.height},Dv.WTt=function(){return Sv(this).pH().Ka()},Dv.jTt=function(){return Sv(this).pH().Qa()},Dv.VTt=function(){return Sv(this).pH().tl()},Dv.UTt=function(){return Sv(this).pH().sl()},Dv.HTt=function(){const t=Sv(this).pH();return(t.Ka()+t.tl())/2},Dv.qTt=function(){const t=Sv(this).pH();return(t.Qa()+t.sl())/2},Dv.zTt=function(t,s){return Ov.hr(Sv(this).cj(),Ov.Qn(s))<=Ov.Qn(t)},Dv.JTt=function(t){return Ov.lr(Sv(this).cj(),Ov.Qn(t))},Dv.YTt=function(t,s){const i=Ov.Qn(t),e=Ov.Qn(s),n=Sv(this).cj();return Ov.lr(e,i)?Ov.lr(n,i)&&!Ov.lr(n,e):!(!Ov.lr(n,i)&&Ov.lr(n,e))},Lv.uj=function(t){const s=this.c$(),i=Ov.Kn(Ov.Qn(t));isNaN(i)||s.cj()===i||(s.uj(i),s.KU())},kv.uj=function(t){this.fH=t},Dv.XTt=function(t){if(isNaN(t)||0===t)return;const s=Sv(this);s.uj(s.cj()+Ov.Qn(t)),s.KU()},Dv.ZTt=function(t){if(isNaN(t)||0===t)return;const s=Sv(this);s.uj(s.cj()-Ov.Qn(t)),s.KU()},Dv.KTt=function(t,s){const i=Sv(this),e=i.cj(),n=Ov.ar(e,Ov.Qn(s),Ov.Qn(t));isNaN(n)||e===n||(i.uj(n),i.KU())},Dv.QTt=function(t,s,i){const e=Sv(this),n=e.cj(),r=s-e.HM(),h=i-e.JM(),o=Math.atan2(h,r),a=Ov.ar(n,o,Ov.Qn(t));isNaN(a)||n===a||(e.uj(a),e.KU())},Dv.tGt=function(t,s){const i=Sv(this),e=i.cj(),n=t-i.HM(),r=s-i.JM(),h=Math.atan2(r,n);isNaN(h)||e===h||(i.uj(h),i.KU())},Lv.cj=function(){return Ov.tr(this.c$().cj())},kv.cj=function(){return this.fH},Dv.sGt=function(t,s){return Ov.compare(Ov.Gr(100*Sv(this).tO(),6),t,s)},Lv.Yj=function(){return this.c$().Yj()},kv.Yj=function(){return this.isVisible},Dv.zj=function(t){const s=Sv(this);t=2===t?!s.Yj():0!==t,s.Yj()!==t&&(s.zj(t),Nv.w$())},Dv.iO=function(t){const s=Ov.Zn(t/100,0,1),i=Sv(this);if(i.aq()){if(i.urt().iGt()===s)return}else if(i.tO()===s)return;i.iO(s),Nv.w$()},Dv.eGt=function(t){Fv.Qo(t);const s=Sv(this);s.bH().Ho(Fv)||(s.vH(Fv),Nv.w$())},Dv.nO=function(){const t=Sv(this).bH();return Ov.Cr(t.No(),t.$o(),t.Bo(),t.Wo())},Dv.tO=function(){return Ov.Gr(100*Sv(this).tO(),6)},Dv.nGt=function(t){return!!(t=xv(t))&&Sv(this).f$()===t},Dv.rGt=function(t){const s=Mv(this).DW(),i=s.FW();if(!i.length)return!1;let e=i[0];for(let s=1,n=i.length;s<n;++s){const n=i[s],r=n.c$(),h=e.c$(),o=r.f$().tk(),a=h.f$().tk();0===t?(o>a||o===a&&r.d$()>h.d$())&&(e=n):(o<a||o===a&&r.d$()<h.d$())&&(e=n)}return s.lpt(e),!0},Lv.hGt=function(t,s,i){const e=this.c$(),n=0===t?e.XM():e.cH();return Ov.compare(n,s,i)},kv.hGt=function(t,s,i){const e=0===t?this.gV:this.uH;return Ov.compare(e,s,i)},Lv.oGt=function(){this.c$().xH()},kv.oGt=function(){this.MH()},Lv.aGt=function(){this.c$().GH()},kv.aGt=function(){this.TH()},Dv.lGt=function(t){(t=xv(t))&&Sv(this)._H(t)},Dv.uGt=function(t,s){const i=0===t;if(!(s=Mv(s)))return;const e=wv(this),n=s.cGt(e);n&&e.c$().EH(n,i)},Lv.ZM=function(t){const s=this.c$();s.XM()!==t&&(s.ZM(t),Nv.w$())},kv.ZM=function(t){this.gV=t},Dv.fGt=function(){return Sv(this).f$().tk()},Dv.dGt=function(){return Sv(this).f$().Ec()},Lv.pGt=function(){return this.c$().d$()},kv.pGt=function(){return this.zIndex},Lv.mGt=function(){return this.c$().XM()},kv.mGt=function(){return this.gV},Lv.gGt=function(){return this.c$().cH()},kv.gGt=function(){return this.uH},Dv.yGt=function(t){const s=wv(this),i=s.WV().nj().irt(t);if(!i)return;const e=i.tk();return s.c$().XU().zq(e)},Dv.wGt=function(t,s){const i=wv(this),e=i.WV().nj().irt(s);if(!e)return;const n=e.tk(),r=1===t,h=i.c$().XU();h.zq(n)!==r&&(h.Jq(n,r),h.Yq(),Nv.w$())},Dv.SGt=function(t,s,i){const e=wv(this),n=e.WV().nj().irt(t);if(!n)return;s=Math.floor(s);const r=n.RI().FI(s);if(!r)return;"color"===r?(Fv.Qo(i),i=Fv):"percent"===r&&(i/=100);const h=n.tk(),o=e.c$().XU();o.Zq(h,s,i)&&o.zq(h)&&Nv.w$()};const jv=Ov.Hn(Ov.Rect),Vv=[],Uv=[];let Hv=!1,qv=null,zv=!1;const Jv=new Set;function*Yv(t){if(!t)return!1;const s=this.$$(),i=s.lk(),e=s.Bk(),n=e.Qk(),r=e.sgt(),h=r.WV(),o=r.Cxt(),a=r.Ext(),l=n.EY(),u=s.mN(),c=u-1,f=l.qk(),d=n.PY(f);let p=o.get("collmemory");p||(p=Ov.Hn(Ov._u),o.set("collmemory",p)),a.get("collisionCreatedDestroyCallback")||(a.set("collisionCreatedDestroyCallback",!0),s.wf().addEventListener("instancedestroy",(t=>Iv(p,t.jq))));const m=h.DW(),g=t.DW(),y=m.FW();let w=null;for(let s=0;s<y.length;++s){const n=y[s];g.zdt()?(i.MTt(n.c$().f$(),t,n.c$().pH(),Vv),w=Vv,i.bGt(n,t,w)):w=g.FW();for(let s=0;s<w.length;++s){const r=w[s];if(i.hB(n,r)||i.vGt(n,r)){const s=_v(p,n,r);let i=!1,o=-2;"number"==typeof s&&(i=!0,o=s);const a=!i||o<c;if(Tv(p,n,r,u),a){const s=f.CY();e.DY(s);const i=h.DW(),o=t.DW();if(i.tpt(!1),o.tpt(!1),h===t){const t=i.spt();Ov.bh(t),t.push(n),t.push(r),h.Fbt()}else{const s=i.spt(),e=o.spt();Ov.bh(s),Ov.bh(e),s.push(n),e.push(r),h.Fbt(),t.Fbt()}yield*f.Gbt(l,d),e.kY(s)}}else Gv(p,n,r)}Ov.bh(Vv)}return n.WY(),!1}Dv.MGt=function(t){const s=Mv(this);t=Mv(t);const i=s.$$();if(i.xGt())return Yv.call(s,t);if(!t)return!1;const e=i.lk(),n=i.Bk(),r=n.Qk(),h=n.sgt(),o=h.WV(),a=h.Cxt(),l=h.Ext(),u=r.EY(),c=i.mN(),f=c-1,d=u.qk(),p=r.PY(d);let m=a.get("collmemory");m||(m=Ov.Hn(Ov._u),a.set("collmemory",m)),l.get("collisionCreatedDestroyCallback")||(l.set("collisionCreatedDestroyCallback",!0),i.wf().addEventListener("instancedestroy",(t=>Iv(m,t.jq))));const g=o.DW(),y=t.DW(),w=g.FW();let S=null;for(let s=0;s<w.length;++s){const i=w[s];y.zdt()?(e.MTt(i.c$().f$(),t,i.c$().pH(),Vv),S=Vv,e.bGt(i,t,S)):S=y.FW();for(let s=0;s<S.length;++s){const r=S[s];if(e.hB(i,r)||e.vGt(i,r)){const s=_v(m,i,r);let e=!1,h=-2;"number"==typeof s&&(e=!0,h=s);const a=!e||h<f;if(Tv(m,i,r,c),a){const s=d.CY();n.DY(s);const e=o.DW(),h=t.DW();if(e.tpt(!1),h.tpt(!1),o===t){const t=e.spt();Ov.bh(t),t.push(i),t.push(r),o.Fbt()}else{const s=e.spt(),n=h.spt();Ov.bh(s),Ov.bh(n),s.push(i),n.push(r),o.Fbt(),t.Fbt()}d.LY(u,p),n.kY(s)}}else Gv(m,i,r)}Ov.bh(Vv)}return r.WY(),!1},Dv.TGt=function(t){return t=Mv(t),Cv(wv(this),t,0,0)},Dv.GGt=function(t,s,i){return t=Mv(t),Cv(wv(this),t,s,i)},Dv.IGt=function(){return!0},Dv.zH=function(){return Sv(this).zH()},Dv.T3=function(){return Sv(this).T3()},Dv._Gt=function(t,s){const i=Mv(this);t=Mv(t);const e=i.$$(),n=this.DW().FW();if(0===n.length)return!1;const r=t.DW();let h=r.FW();if(r.zdt()){const s=[...e.CGt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r.zdt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];if(1===s)for(const s of e.kH())s.EGt(t)&&(null===o||o.has(s))&&a.add(s);else{let i;if(0===s){if(i=e.FH(),null===i)continue}else i=e.LH();i.EGt(t)&&(null===o||o.has(i))&&a.add(i)}}return 0!==a.size&&(r.rpt(a),t.Fbt(),!0)},Dv.PGt=function(t,s){const i=Mv(this);t=Mv(t);const e=i.$$(),n=i.DW().FW();if(0===n.length)return!1;const r=t.DW();let h=r.FW();if(r.zdt()){const s=[...e.CGt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r.zdt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];2!==s||e.T3()||!e.EGt(t)||null!==o&&!o.has(e)||a.add(e);for(const i of 0===s?e.children():e.jH())2===s&&i.T3()||i.EGt(t)&&(null===o||o.has(i))&&a.add(i)}return 0!==a.size&&(r.rpt(a),t.Fbt(),!0)},Dv.AGt=function(t,s,i){const e=Mv(this);t=Mv(t);const n=e.$$(),r=e.DW().FW();if(0===r.length)return!1;const h=t.DW();let o=h.FW();if(h.zdt()){const s=[...n.CGt(t)];s.length>0&&(o=o.concat(s))}if(0===o.length)return!1;const a=h.zdt()?null:new Set(o),l=[];for(let e=0,n=r.length;e<n;++e){const n=r[e];if(0===s){const s=n.WH(i);null!==s&&s.EGt(t)&&(null===a||a.has(s))&&l.push(s)}else if(1===s)for(const s of n.children())if(s.EGt(t)){if(0===i){(null===a||a.has(s))&&l.push(s);break}--i}}return 0!==l.length&&(h.npt(l),t.Fbt(),!0)},Dv.RGt=function(t,s,i){const e=wv(this);switch(t){case 0:default:return Ov.compare(e.$H(),s,i);case 1:return Ov.compare(e.OGt(),s,i)}},Dv.UH=function(t,s,i,e,n,r,h,o,a,l){t=Mv(t);const u=wv(this),c=Nv.egt().WV();for(const f of t.FGt(u,c)){if(!f.MW().aW())return;u.UH(f,{YH:s,ZH:i,QH:e,sq:n,eq:r,oq:h,rq:o,lq:a,cq:l})}},Dv.HH=function(t){t=Mv(t);const s=wv(this),i=Nv.egt().WV();for(const e of t.FGt(s,i))s.HH(e)},Dv.DGt=function(){const t=wv(this);t.zH()&&t.FH().HH(t)},Dv.LGt=function(){const t=wv(this).FH();return t?t.tU():-1},Dv.kGt=function(){return wv(this).$H()},Dv.NGt=function(){return wv(this).OGt()},Dv.$Gt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=Sv(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.yq(),i.KU()):i.mq(t,s)},Dv.Sq=function(t,s,i,e,n,r,h,o){const a=Sv(this);a.Sq(t,s,{mode:0===i?"absolute":"relative",x:e,y:n,gV:r,xq:h,Tq:o})&&a.KU()},Dv.BGt=function(){const t=Sv(this);return t.vq()?t.Mq()._x():0},Dv.WGt=function(){const t=Sv(this);return t.vq()?t.Mq().Cx():0},Dv.jGt=function(t){const s=Sv(this);t=2===t?!s.Yj():0!==t,s.Yj()!==t&&s.zj(t)},Dv.Dq=function(t,s){this instanceof self.BV?this.KJ(t,s):this.Dq(t,s)},Dv.VGt=function(t,s){this instanceof self.BV?this.tY(t,""+s):this.VGt(t,""+s)},Dv.UGt=function(t){this instanceof self.BV?this.sY(t):this.UGt(t)},Dv.HGt=function(){this instanceof self.BV?this.YJ():this.Rq()},Dv.qGt=function(){this instanceof self.BV?this.XJ():this.Oq()},Dv.zGt=function(){return this instanceof self.BV?this.ZJ():this.zGt()},Dv.JGt=function(t){this instanceof self.BV?this.YGt(0!==t):this.XGt(0!==t)},Dv.ZGt=function(){return this instanceof self.BV?this.Qbt():this.KGt()},Lv.QGt=function(t,s,i){return Ov.compare(this.nJ().Pht(t),s,i)},kv.QGt=function(t,s,i){return Ov.compare(bv(this).Pht(t),s,i)},Lv.tIt=function(t){return!!this.nJ().Pht(t)},kv.tIt=function(t){return!!bv(this).Pht(t)},Dv.sIt=function(t,s){const i=Mv(this),e=i.DW(),n=e.FW();if(!n.length)return!1;const r=i.k0();let h=null,o=0;for(let e=0,a=n.length;e<a;++e){const a=n[e],l=r?a.WV().iMt(i.eMt()):0,u=a.Pht(l+s);(null===h||0===t&&u<o||1===t&&u>o)&&(o=u,h=a)}return e.lpt(h),!0},Dv.iIt=function(t){const s=Mv(this);return s.$$().sgt().xxt()?Rv(s,t):Av(s,t)},Dv.Dz=function(t){const s=new Set(Ov.Lh(t)),i=wv(this).lU();return s.isSubsetOf(i)},Dv.eIt=function(){return wv(this).nIt()},Dv.rIt=function(){return wv(this).lU().size},Dv.hIt=function(t){return wv(this).oIt(t)},Dv.aIt=function(t,s){const i=Ov.Lh(s);if(0===i.length)return;const e=wv(this),n=new Set(e.lU());if(0===t)for(const t of i)n.add(t);else if(1===t)for(const t of i)n.delete(t);e.cU(n)},Dv.lIt=function(){Nv.zV(wv(this))},Dv.uIt=function(){return!0},Dv.cIt=function(){return!0},Lv.fIt=function(t,s){this.nJ().Aht(t,s)},kv.fIt=function(t,s){bv(this).Aht(t,s)},Lv.dIt=function(t,s){const i=this.nJ(),e=i.Pht(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Aht(t,e+s)},kv.dIt=function(t,s){const i=bv(this),e=i.Pht(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Aht(t,e+s)},Lv.pIt=function(t,s){const i=this.nJ(),e=i.Pht(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Aht(t,e-s))},kv.pIt=function(t,s){const i=bv(this),e=i.Pht(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Aht(t,e-s))},Lv.mIt=function(t,s){this.nJ().Aht(t,s?1:0)},kv.mIt=function(t,s){bv(this).Aht(t,s?1:0)},Lv.gIt=function(t){const s=this.nJ();s.Aht(t,0===s.Pht(t)?1:0)},kv.gIt=function(t){const s=bv(this);s.Aht(t,0===s.Pht(t)?1:0)},Dv.yIt=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=wv(this),e="state";Nv.wIt(),i.P6(e),i.ox(s,e),Nv.SIt(e,{bIt:!0})},Dv.vIt=function(){return JSON.stringify(wv(this).hx("state"))},Dv.MIt=function(){return wv(this).WV().Ec()},Dv.xIt=function(){const t=Nv.tgt().Bpt();let s=t.NW();for(const i of Nv.CGt(t))++s;return s},Dv.TIt=function(){return Nv.tgt().Bpt().DW().FW().length},Lv.iU=function(){return this.nJ().iU()},kv.iU=function(){return bv(this).iU()},Lv.tU=function(){return this.nJ().tU()},kv.tU=function(){return bv(this).tU()},Dv.Tyt=function(t){const s=wv(this);return t.toLowerCase()===Nv.Bk().Cyt(s)},Dv.dU=function(t){const s=wv(this);Nv.Bk().dU(s,t)},Dv.GIt=function(t){const s=Mv(this);return Nv.Bk().syt().IIt(s.DW().FW(),t),!0},Dv._It=function(){return wv(this).nU()},Ov.CIt=function(t,s,i){const e=t[1],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.P$,w=s.Nrt,S=s.$rt,b=Object.assign({},Dv,i>=2?kv:Lv);n&&(y.ITt=b.ITt,y._Tt=b._Tt,y.CTt=b.CTt,y.ETt=b.ETt,y.PTt=b.PTt,w.qM=b.qM,w.YM=b.YM,w.ATt=b.ATt,w.OTt=b.OTt,w.DTt=b.DTt,w.NTt=b.NTt,S.EIt=b.HM,S.PIt=b.JM,S.aN=b.lN),r&&(y.$Tt=b.$Tt,y.BTt=b.BTt,w.Yg=b.Yg,w.Vg=b.Vg,w.TP=b.TP,S.AIt=b.jg,S.RIt=b.Kg,S.OIt=b.WTt,S.FIt=b.jTt,S.DIt=b.VTt,S.LIt=b.UTt,S.kIt=b.HTt,S.NIt=b.qTt),h&&(y.$It=b.zTt,y.BIt=b.JTt,y.YTt=b.YTt,w.uj=b.uj,w.XTt=b.XTt,w.ZTt=b.ZTt,w.KTt=b.KTt,w.QTt=b.QTt,w.tGt=b.tGt,S.WIt=b.cj),o&&(y.Yj=b.Yj,y.sGt=b.sGt,w.zj=b.zj,w.iO=b.iO,w.eGt=b.eGt,S.Opacity=b.tO,S.ColorValue=b.nO),a&&(y.nGt=b.nGt,y.rGt=b.rGt,y.hGt=b.hGt,w.oGt=b.oGt,w.aGt=b.aGt,w.lGt=b.lGt,w.uGt=b.uGt,w.ZM=b.ZM,S.fGt=b.fGt,S.dGt=b.dGt,S.pGt=b.pGt,S.mGt=b.mGt,S.gGt=b.gGt),l&&(y.yGt=b.yGt,w.wGt=b.wGt,w.SGt=b.SGt),d&&(y.IGt=b.IGt,y.zH=b.zH,y.T3=b.T3,y._Gt=b._Gt,y.PGt=b.PGt,y.AGt=b.AGt,y.RGt=b.RGt,w.UH=b.UH,w.HH=b.HH,w.DGt=b.DGt,S.LGt=b.LGt,S.kGt=b.kGt,S.NGt=b.NGt),p&&(w.$Gt=b.$Gt,w.Sq=b.Sq,S.BGt=b.BGt,S.WGt=b.WGt),u&&(y.Yj=b.Yj,w.zj=b.jGt,w.jIt=b.Dq,w.VIt=b.VGt,w.UIt=b.UGt),c&&(y.HIt=b.zGt,w.qIt=b.HGt,w.zIt=b.qGt),f&&(y.Iu=b.ZGt,w.JIt=b.JGt),m&&(y.MGt=b.MGt,y.TGt=b.TGt,y.GGt=b.GGt,s.YIt=Pv),e||(y.QGt=b.QGt,y.tIt=b.tIt,y.sIt=b.sIt,y.iIt=b.iIt,y.Dz=b.Dz,w.fIt=b.fIt,w.dIt=b.dIt,w.pIt=b.pIt,w.mIt=b.mIt,w.gIt=b.gIt,w.aIt=b.aIt,y.uIt=b.uIt,y.cIt=b.cIt,w.lIt=b.lIt,w.yIt||(w.yIt=b.yIt),S.vIt||(S.vIt=b.vIt),S.xIt=b.xIt,S.TIt=b.TIt,S.XIt=b.iU,S.ZIt=b.tU,S.MIt=b.MIt,S.eIt=b.eIt,S.rIt=b.rIt,S.hIt=b.hIt,y.Tyt=b.Tyt,w.dU=b.dU,w.GIt=b.GIt),g&&(S._It=b._It)}}{const Xv=self._s;Xv.iyt=class extends Xv.Vn{constructor(t){super(),this.fpt=t,this.qc="",this.xD=-1,this.KIt="",this.QIt=!1,this.t_t=null,this.vpt=0,this.zwt=[],this._pt=null,this.s_t=new Map,this.i_t=null,this.e_t=null,this.n_t=-1,this.Kbt=null,this.r_t=null,this.h_t=!1}qn(){this.qc="",this.xD=-1,this.KIt="",this.t_t=null,this.e_t=null,this.Kbt=null,this.r_t=null,this.n_t=-1,Xv.bh(this.zwt),this._pt&&(this._pt.clear(),this._pt=null);for(const t of this.s_t.values())t.qn();this.s_t.clear(),this.i_t=null}UM(){const t=this.fpt,s=t.$$().L0(),i=t.tgt();this.t_t=i.qk(),this.vpt=i.Opt()+1;const e=t.qyt(this.t_t);e&&(this.e_t=e,this.Kbt=e.mvt(),this.r_t=e.pvt().map((t=>t.Jet())),e.wbt()&&(this.n_t=e.Svt()));for(const t of s){const s=t.DW();s.zdt()&&!this.t_t.jSt(t)||(this.zwt.push(t),this.s_t.set(t,Xv.Hn(Xv.o_t,s)))}const n=t.zk();this._pt=n.size>0?n:null}a_t(t){this.qc="timer",this.UM(),this.xD=this.fpt.$$().dN()+t}l_t(t){this.qc="walltimer",this.UM(),this.xD=this.fpt.$$().yN()+t}u_t(t){this.qc="signal",this.UM(),this.KIt=t.toLowerCase()}IIt(t,s){this.qc="instance-signals",this.UM(),this.KIt=s.toLowerCase(),this.i_t=new Set(t)}c_t(t){this.qc="promise",this.UM(),t.then((()=>this.byt())).catch((t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.byt()}))}f_t(){return"timer"===this.qc}d_t(){return"walltimer"===this.qc}wyt(){return"signal"===this.qc}Iyt(){return"instance-signals"===this.qc}jyt(){return"promise"===this.qc}Syt(){return this.KIt}p_t(){return this.QIt}byt(){this.QIt=!0}_yt(t){this.i_t.delete(t),0===this.i_t.size&&this.byt()}ryt(){return this.f_t()?this.xD<=this.fpt.$$().dN():this.d_t()?this.xD<=this.fpt.$$().yN():this.p_t()}m_t(t){t.Cpt(this.t_t,this.vpt);for(const[t,s]of this.s_t.entries()){const i=t.DW();s.Cpt(i)}this._pt&&t.qpt([...this._pt]);const s=this.e_t;s&&(s.Ebt(this.Kbt),s.pvt().map(((t,s)=>t.Pnt(this.r_t[s]))),s.wbt()&&s.bvt(this.n_t))}hyt(t){this.m_t(t),this.t_t.Sbt(t),this.e_t&&this.e_t.wbt()&&this.e_t.$bt(this.n_t),this.fpt.Zgt(this.zwt),this.h_t=!0}async uyt(t){this.m_t(t);for(const s of this.t_t.bbt(t))await this.fpt.$$().Fgt(s);this.e_t&&this.e_t.wbt()&&this.e_t.$bt(this.n_t),this.fpt.Zgt(this.zwt),this.h_t=!0}oyt(){return this.h_t}jdt(t){for(const s of this.s_t.values())s.jdt(t);if("instance-signals"===this.qc){for(const s of t)this.i_t.delete(s);0===this.i_t.size&&this.byt()}}b3(){const t={},s={wt:this.qc,t:this.xD,st:this.KIt,s:this.QIt,ev:this.t_t.U0(),sm:this.zwt.map((t=>t.U0())),dsm:this._pt?[...this._pt].map((t=>t.U0())):null,sols:t};this.t_t.hbt(this.vpt)&&(s.act=this.t_t.ngt(this.vpt).U0());for(const[s,i]of this.s_t)t[s.U0().toString()]=i.b3();return"instance-signals"===this.qc&&(s.pi=[...this.i_t].map((t=>t.tU()))),s}static Vyt(t,s){const i=t.$$(),e=t.dgt(s.ev);if(!e)return null;let n=0;if(s.hasOwnProperty("act")){const i=t.mgt(s.act);if(!i)return null;n=i.tk()}const r=Xv.Hn(Xv.iyt,t);r.xD=s.t,s.hasOwnProperty("wt")?r.qc=s.wt:r.qc=-1===r.xD?"signal":"timer",r.KIt=s.st,r.QIt=s.s,r.t_t=e,r.vpt=n;for(const t of s.sm){const s=i._Y(t);s&&r.zwt.push(s)}if(Array.isArray(s.dsm))for(const t of s.dsm){const s=i._Y(t);s&&(r._pt||(r._pt=new Set),r._pt.add(s))}for(const[e,n]of Object.entries(s.sols)){const s=parseInt(e,10),h=i._Y(s);if(!h)continue;const o=Xv.Hn(Xv.o_t,null);o.v3(t,n),r.s_t.set(h,o)}if("instance-signals"===r.qc){r.i_t=new Set;for(const t of s.pi){const s=i.h$(t);s&&r.i_t.add(s)}}return r}}}{const Zv=self._s;Zv.o_t=class extends Zv.Vn{constructor(t){super(),this.Ddt=null,this.g_t=!0,this.FK=[],t&&(this.Ddt=t.WV(),this.g_t=t.zdt(),Zv.Gh(this.FK,t.spt()))}qn(){this.Ddt=null,Zv.bh(this.FK)}Cpt(t){t.tpt(this.g_t),Zv.Gh(t.spt(),this.FK)}jdt(t){Zv.Ph(this.FK,t)}b3(){return{sa:this.g_t,insts:this.FK.map((t=>t.tU()))}}v3(t,s){const i=t.$$();this.g_t=!!s.sa,Zv.bh(this.FK);for(const t of s.insts){const s=i.h$(t);s&&this.FK.push(s)}}}}{let Kv=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};GetNextParamMap=Kv;const Qv=self._s;Qv.y_t=class extends Qv.Vn{constructor(t){super(),this.Nc=t.runtime,this.Bc=t.id,this.Yn=t.name??"",this.w_t=!!t.YB,this.S_t=!!t.b_t,this.v_t=!!t.sW,this.M_t=!!t.x_t,this.T_t=!!t.eW,this.G_t=!!t.I_t,this.__t=!!t.lW,this.C_t=!!t.QB,this.E_t=!!t.rW,this.P_t=t.A_t,this.R_t=null,this.O_t=new Map,this.F_t=new Map,this.D_t=new Map,this.L_t=new Map,this.k_t=t.N_t,this.$_t=null}qn(){this.Nc=null}$$(){return this.Nc}JB(){return this.Bc}Ec(){return this.Yn}B_t(){}Gyt(){return this.Mxt()>=2?this.$_t.constructor:this.constructor}Mxt(){return this.P_t}W_t(t=!1){let s=this.k_t;return t&&"function"!=typeof s&&this.Mxt()>=2&&(s=globalThis.cJ),s}XB(){return this.w_t}KB(){return this.S_t}tW(){return this.C_t}hW(){return this.E_t}iW(){return this.v_t}SM(){return this.M_t}nW(){return this.T_t}aW(){return this.G_t}uW(){return this.__t}Uvt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.O_t.get(t);return i||(i=t.bind(s),this.O_t.set(t,i),i)}wxt(t,s,i){if(!s)throw new Error("missing 'this' binding");const e=Kv(this.F_t,t);let n=e.get(i);return n||(n=t.bind(s,i),e.set(i,n),n)}Sxt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");const n=Kv(this.D_t,t),r=Kv(n,i);let h=r.get(e);return h||(h=t.bind(s,i,e),r.set(e,h),h)}bxt(t,s,i,e,n){if(!s)throw new Error("missing 'this' binding");const r=Kv(this.L_t,t),h=Kv(r,i),o=Kv(h,e);let a=o.get(n);return a||(a=t.bind(s,i,e,n),o.set(n,a),a)}j_t(t){if(!this.XB())throw new Error("must be single-global plugin");this.R_t=t}yW(){if(!this.XB())throw new Error("must be single-global plugin");return this.R_t}SW(){if(!this.XB())throw new Error("must be single-global plugin");return this.R_t.SW()}V_t(){const t=this.Mxt();Qv.qB.U_t(this,t);const s=this.W_t(!0);if(s){if(this.$_t=new s,!(this.$_t instanceof self.UB))throw new TypeError("plugin class must derive from IPlugin")}else this.$_t=new self.UB;Qv.qB.H_t(t)}pW(){return this.$_t}}}{const tM=self._s;tM.q_t=class extends tM.y_t{constructor(t,s){super(t),this.z_t=s,this.J_t=0,this.Y_t=new Map,this.X_t("elem-focused",(t=>t.Z_t())),this.X_t("elem-blurred",(t=>{t&&t.K_t()}))}qn(){super.qn()}Q_t(t){const s=this.J_t++;return this.Y_t.set(s,t),s}tCt(t){this.Y_t.delete(t)}X_t(t,s){this.Nc.IU(this.z_t,t,(t=>{const i=this.Y_t.get(t.elementId);s(i,t)}))}}}{const sM=self._s;sM.sCt=class extends sM.Vn{constructor(t){super(),this.Ddt=t,this.Nc=t.$$(),this.iCt=t.MW()}qn(){this.Ddt=null,this.Nc=null,this.iCt=null}WV(){return this.Ddt}$$(){return this.Nc}MW(){return this.iCt}gz(){return this.Ddt.gz()}B_t(){}Fxt(t){}STt(t){}bTt(t){}O5(t){}B5(){}L5(){}o4(t){}eCt(){}W_t(){return null}nCt(t,s,i){const e=sM.Hn(sM.Event,t,s);e.rCt=this,i&&Object.assign(e,i),this.WV().YZ(e)}}}{const iM=self._s;iM.hCt=class extends iM.Vn{constructor(t,s){super(),this.di=t,this.z_t=s,this.oCt=null,this.Nc=t.$$(),this.Ddt=this.di.WV(),this.aCt=this.Ddt.wTt(),this.S6=null,this.v6=null,this.DU=!1,this.kU=!1,this.Xf=null,this.YE=!1}qn(){this.YE=!0,this.lCt(),this.uCt(),this.S6=null,this.v6=null,this.Xf&&(this.Xf.qn(),this.Xf=null),this.di=null,this.Nc=null,this.Ddt=null,this.aCt=null}zn(){return this.YE}nJ(){return this.di}$$(){return this.Nc}WV(){return this.Ddt}MW(){return this.aCt.MW()}wTt(){return this.aCt}cCt(){return this.di.o$()}xU(t){return this.Nc.xU(t,this.di,null)}fCt(t){return this.Nc.fCt(t,this.di,null)}C$(t){return this.Nc.C$(t,this.di,null)}dCt(t,s){return this.Nc.dCt(t,this.di,s)}pCt(t,s){return this.Nc.pCt(t,this.di,s)}mCt(t){return this.Nc.mCt(t)}gCt(t,s){this.Nc.IU(this.z_t,t,s)}yCt(t){for(const[s,i]of t)this.gCt(s,i)}wCt(t,s){this.Nc.Wc(this.z_t,t,s)}SCt(t,s){return this.Nc.b$(this.z_t,t,s)}bCt(t,s){if(!this.Nc.Tk())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.z_t,handler:t,data:s,responseId:null});this.wCt(t,s)}vCt(t){if(!t)throw new Error("cannot set empty component id");this.oCt=t}MCt(){if(!this.oCt)throw new Error("wrapper extension component id not set");return this.Nc.jU(this.oCt)}UU(t,s){if(!this.oCt)throw new Error("wrapper extension component id not set");this.Nc.UU(this.oCt,t,s)}xCt(t){for(const[s,i]of t)this.UU(s,i)}yY(t,s){if(!this.oCt)throw new Error("wrapper extension component id not set");this.Nc.yY(this.oCt,t,s)}wY(t,s){if(!this.oCt)throw new Error("wrapper extension component id not set");return this.Nc.wY(this.oCt,t,s)}E8(){}TCt(){}GCt(){if(!this.DU){if(!this.S6)if(this.Nc.AU()){const t=globalThis.RU,s=this.MW();this.S6=()=>{const i=performance.now();this.E8(),t.FU(s,performance.now()-i)}}else this.S6=()=>this.E8();this.Nc.wf().addEventListener("tick",this.S6),this.DU=!0}}lCt(){this.DU&&(this.Nc.wf().removeEventListener("tick",this.S6),this.DU=!1)}ICt(){return this.DU}_Ct(){if(!this.kU){if(!this.v6)if(this.Nc.AU()){const t=globalThis.RU,s=this.MW();this.v6=()=>{const i=performance.now();this.TCt(),t.FU(s,performance.now()-i)}}else this.v6=()=>this.TCt();this.Nc.wf().addEventListener("tick2",this.v6),this.kU=!0}}uCt(){this.kU&&(this.Nc.wf().removeEventListener("tick2",this.v6),this.kU=!1)}CCt(){return this.kU}ECt(){return[]}hx(){return null}ox(t){}vht(t){}_ht(t,s){}bot(t,s,i){if(0===s)return;const e=this.vht(t);if("number"!=typeof e)throw new Error("expected number");this._ht(t,e+s,i)}PCt(t,s,i,e){}ACt(t,...s){t.call(this,...s)}RCt(t,...s){return t.call(this,...s)}W_t(){return null}nCt(t,s,i){if(!this.di.OCt())return;const e=this.cCt(),n=iM.Hn(iM.Event,t,s);n.jq=e,i&&Object.assign(n,i),e.dispatchEvent(n)}SM(){return!1}}}{const eM=self._s;eM.FCt=class extends eM.hCt{constructor(t,s){super(t,s),this.zst=t.c$(),this.DCt=null,this.LCt=null}qn(){if(this.DCt){const t=this.Nc.wf();t.removeEventListener("renderercontextlost",this.DCt),t.removeEventListener("renderercontextrestored",this.LCt),this.DCt=null,this.LCt=null}this.zst=null,super.qn()}kCt(){this.NCt()}$Ct(){}BCt(){}NCt(){if(this.DCt)return;this.DCt=()=>this.GK(),this.LCt=()=>this.WCt();const t=this.Nc.wf();t.addEventListener("renderercontextlost",this.DCt),t.addEventListener("renderercontextrestored",this.LCt)}GK(){this.$Ct()}WCt(){this.BCt()}c$(){return this.zst}Lit(){return!1}Dit(){if(!this.Lit())throw new Error("original size not known");const t=this.jCt();if(t)return t.jg()}Nit(){if(!this.Lit())throw new Error("original size not known");const t=this.jCt();if(t)return t.Kg()}jCt(){return null}VCt(){const t=this.jCt();if(t){const s=t.cG();if(s)return[s.jg(),s.Kg()]}return[100,100]}UCt(){const t=this.jCt();return t?t.sA():null}HCt(){const t=this.jCt();return t?t.qCt():null}zCt(){const t=this.jCt();return!!t&&t.JCt()}FTt(t){const s=this.di.c$();return[s.HM(),s.JM(),s.cH()]}eCt(t,s,i){}YCt(t,s){}Z2(){return!0}}}{const nM=self._s,rM=nM.Hn(nM.Rect);nM.XCt=class extends nM.FCt{constructor(t,s){super(t,s),this.ZCt=this.MW().Q_t(this),this.KCt=!0,this.QCt=!1,this.tEt=!1,this.sEt=-.2,this.iEt=nM.Hn(nM.Rect,0,0,-1,-1);const i=this.Nc.I$();this.eEt=i.OJ(),this.nEt=i.FJ(),this.rEt=-1,this.hEt=-1,this.oEt=!1,this.GCt()}qn(){this.MW().tCt(this.ZCt),this.aEt("destroy"),this.ZCt=-1,super.qn()}Pq(){if(this.Nc.Tk())throw new Error("not valid in worker mode");return this.lEt("get-element")}aEt(t,s){s||(s={}),s.elementId=this.ZCt,this.wCt(t,s)}lEt(t,s){return s||(s={}),s.elementId=this.ZCt,this.bCt(t,s)}uEt(t,s){return s||(s={}),s.elementId=this.ZCt,this.SCt(t,s)}cEt(t){t||(t={});const s=this.c$();t.elementId=this.ZCt,t.isVisible=s.Yj(),t.htmlIndex=s.f$().BJ(),t.htmlZIndex=s.WJ(),Object.assign(t,this.fEt()),this.KCt=!!t.isVisible,this.bCt("create",t),this.dEt(!0)}jGt(t){t=!!t,this.KCt!==t&&(this.KCt=t,this.aEt("set-visible",{isVisible:t}))}E8(){this.dEt(!1)}pEt(){const t=this.Nc.I$().qJ();return"Android"===nM.Ks.Qs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}dEt(t){if(this.nJ().zJ())return;const s=this.c$(),i=s.f$(),e=s.pH();let[n,r]=i.OV(e.Ka(),e.Qa()),[h,o]=i.OV(e.tl(),e.sl());const a=this.Nc.I$(),l=a.OB(),u=a.LB();if(!s.Yj()||!i.Yj())return void this.jGt(!1);if(!this.pEt()&&(h<=0||o<=0||n>=l||r>=u))return void this.jGt(!1);rM.set(n,r,h,o);const c=a.OJ(),f=a.FJ(),d=i.BJ(),p=s.WJ();if(!t&&rM.equals(this.iEt)&&this.eEt===c&&this.nEt===f&&this.rEt===d&&this.hEt===p)return void this.jGt(!0);this.iEt.S(rM),this.eEt=c,this.nEt=f,this.rEt=d,this.hEt=p,this.jGt(!0);let m=null;this.tEt&&(m=i.JJ()+this.sEt),this.lEt("update-position",{left:Math.round(this.iEt.Ka()),top:Math.round(this.iEt.Qa()),width:Math.round(this.iEt.width()),height:Math.round(this.iEt.height()),htmlIndex:d,htmlZIndex:p,fontSize:m})}Rq(){this.lEt("focus",{focus:!0})}Oq(){this.lEt("focus",{focus:!1})}Z_t(){this.QCt=!0}K_t(){this.QCt=!1}zGt(){return this.QCt}Dq(t,s){this.aEt("set-css-style",{prop:nM.vo(t),val:s})}VGt(t,s){this.aEt("set-attribute",{name:t,val:s})}UGt(t){this.aEt("remove-attribute",{name:t})}mEt(){this.oEt||(this.oEt=!0,Promise.resolve().then((()=>{this.oEt=!1,this.aEt("update-state",this.fEt())})))}fEt(){}gEt(){return this.ZCt}}}{const hM=self._s,oM=self.Hq;hM.yEt=class extends hM.Vn{constructor(t){super(),this.Nc=t.runtime,this.Bc=t.id,this.Yn=t.name??"",this.wEt=hM.Hn(hM.Du),this.SEt=hM.Hn(hM.Du),this.P_t=t.A_t,this.k_t=t.N_t,this.bEt=null}qn(){this.SEt.qn(),this.wEt.qn(),this.Nc=null}$$(){return this.Nc}JB(){return this.Bc}Ec(){return this.Yn}B_t(){}Mxt(){return this.P_t}W_t(t=!1){let s=this.k_t;return t&&"function"!=typeof s&&this.Mxt()>=2&&(s=globalThis.nY),s}vEt(t){this.wEt.$u(t)}i8(){return this.wEt.Bu()}T0(t){this.SEt.$u(t)}_0(t){this.SEt.Au(t)}FW(){return this.SEt.Bu()}V_t(){const t=this.Mxt();hM.qB.U_t(this,t);const s=this.W_t(!0);if(s){if(this.bEt=new s,!(this.bEt instanceof oM))throw new TypeError("behavior class must derive from IBehavior")}else this.bEt=new oM;hM.qB.H_t(t)}kq(){return this.bEt}}}{const aM=self._s;aM.MEt=class extends aM.Vn{constructor(t){super(),this.Nc=t.$$(),this.rMt=t,this.Ddt=t.WV(),this.xEt=t.Nq(),this.xEt.vEt(this.Ddt)}qn(){this.Nc=null,this.rMt=null,this.Ddt=null,this.xEt=null}B_t(){}Wq(){return this.rMt}WV(){return this.Ddt}$$(){return this.Nc}Nq(){return this.xEt}}}{const lM=self._s;lM.TEt=class extends lM.Vn{constructor(t,s){super(),this.plt=t,this.z_t=s,this.di=t.Vq(),this.Nc=t.$$(),this.rMt=t.Wq(),this.aCt=this.rMt.wTt(),this.DU=!1,this.kU=!1,this.mY=!1,this.Xf=null}qn(){this.lCt(),this.uCt(),this.GEt(),this.Xf&&(this.Xf.qn(),this.Xf=null),this.plt=null,this.di=null,this.Nc=null,this.rMt=null,this.aCt=null}Nq(){return this.rMt.Nq()}IEt(){return this.plt}Vq(){return this.di}WV(){return this.di.WV()}c$(){return this.di.c$()}$$(){return this.Nc}Wq(){return this.rMt}wTt(){return this.aCt}cCt(){return this.plt.cCt()}xU(t){return this.Nc.xU(t,this.di,this.rMt)}fCt(t){return this.Nc.fCt(t,this.di,this.rMt)}C$(t){return this.Nc.C$(t,this.di,this.rMt)}_Et(){}E8(){}TCt(){}CEt(){}GCt(){this.DU||(this.Nc.lY(this),this.DU=!0)}lCt(){this.DU&&(this.Nc.uY(this),this.DU=!1)}ICt(){return this.DU}_Ct(){this.kU||(this.Nc.cY(this),this.kU=!0)}uCt(){this.kU&&(this.Nc.fY(this),this.kU=!1)}CCt(){return this.kU}EEt(){this.mY||(this.Nc.dY(this),this.mY=!0)}GEt(){this.mY&&(this.Nc.pY(this),this.mY=!1)}PEt(){return this.mY}ECt(){return[]}gCt(t,s){this.Nc.IU(this.z_t,t,s)}AEt(t,s){}hx(){return null}ox(t){}vht(t){}_ht(t,s){}bot(t,s){if(0===s)return;const i=this.vht(t);if("number"!=typeof i)throw new Error("expected number");this._ht(t,i+s)}PCt(t,s,i,e){}ACt(t,...s){t.call(this,...s)}RCt(t,...s){return t.call(this,...s)}W_t(){return null}nCt(t,s,i){if(!this.plt.OCt())return;const e=this.cCt(),n=lM.Hn(lM.Event,t,s);n.REt=e,n.jq=e.jq,i&&Object.assign(n,i),e.dispatchEvent(n)}}}{let uM=function(t){if(t!==fM)throw new Error("invalid internal API token")};ValidateInternalAPIToken=uM;const cM=self._s;cM.R$={},cM.Llt={};const fM=cM.Cs();let dM=[],pM=[],mM=[],gM=null,yM=null,wM=null,SM=null;const bM=new Map,vM=new Map;cM.qB=class extends cM.Vn{constructor(t,s){super(),this.Nc=t,this.OEt=[],this.Bvt=null,this.FEt=[],this.DEt=new Map,this.LEt=null,this.kEt=null,this.NEt=new Set(s)}$Et(t){const s=t[19],i=this.Nc.Vbt(t[0]);if(!i)throw new Error("missing plugin");cM.CIt(t,i,s);const e=s>=2?cM.y_t:i,n=cM.Hn(e,{runtime:this.Nc,YB:t[1],b_t:t[2],sW:t[5],eW:t[8],x_t:t[9],I_t:t[13],lW:t[14],QB:t[17],rW:t[18],A_t:s,id:t[20],name:t[21],N_t:s>=2?i:null});n.B_t(),this.OEt.push(n),bM.set(i,n)}BEt(){this.Bvt=cM.Hn(cM.R$.A$,{runtime:this.Nc,YB:!0}),this.Bvt.B_t()}WEt(t){const s=t[1],i=t[2],e=t[3],n=this.Nc.Vbt(t[0]);if(!n)throw new Error("missing behavior");this.DEt.set(n,(()=>{const t=s>=2?cM.yEt:n,r=cM.Hn(t,{runtime:this.Nc,id:i,name:e,A_t:s,N_t:s>=2?n:null});r.B_t(),this.FEt.push(r),vM.set(n,r),!this.LEt&&cM.Llt.jEt&&r instanceof cM.Llt.jEt?this.LEt=r:!this.kEt&&cM.Llt.VEt&&r instanceof cM.Llt.VEt&&(this.kEt=r),r.V_t()}))}UEt(t){const s=this.DEt.get(t);s&&(s(),this.DEt.delete(t))}static U_t(t,s=1){if(cM.qB.U_t!==gM)throw new Error("invalid method");1===s&&dM.push(t),pM.push(t)}static H_t(t=1){if(cM.qB.H_t!==yM)throw new Error("invalid method");1===t&&dM.pop(),pM.pop()}static HV(){if(cM.qB.HV!==wM)throw new Error("invalid method");if(0===dM.length)throw new Error("no init object set");return dM.at(-1)}static HB(t){if(cM.qB.HB!==SM)throw new Error("invalid method");if(uM(t),0===pM.length)throw new Error("no init object set");return pM.at(-1)}static HEt(t){mM.push(t)}static qEt(){mM.pop()}static vU(){if(0===mM.length)throw new Error("no init properties set");return mM.at(-1)}zEt(){for(const t of this.OEt)t.V_t()}static dW(t){return bM.get(t)||null}static qq(t){return vM.get(t)||null}ZZ(){return this.Bvt}JEt(){return this.LEt}YEt(){return this.kEt}jU(t){return this.NEt.has(t)}},gM=cM.qB.U_t,yM=cM.qB.H_t,wM=cM.qB.HV,SM=cM.qB.HB}{const MM=self._s,xM=new Set;MM.XEt=class extends MM.Vn{constructor(){super(),this.ZEt=0,this.dK="",this.pK=0,this.KEt=0,this.QEt=0,this.Ey=0,this.Py=0,this.tPt=!1,this.sPt=!1,this.iPt=null,this.ePt="",this.VE=MM.Hn(MM.Rect),this.nPt=MM.Hn(MM.Cl),this.rPt="",this.hPt=new self.k$(this),xM.add(this)}qn(){this.qE(),this.iPt&&0===this.iPt.CK()&&this.iPt.qn(),this.iPt=null,xM.delete(this),this.oPt()}static GK(){for(const t of xM)t.ePt="",t.VE.set(0,0,0,0),t.nPt.Yl(t.VE)}aPt(t){this.dK=t[0],this.pK=t[1],this.KEt=t[2],this.QEt=t[3],this.Ey=t[4],this.Py=t[5],this.tPt=t[6],this.sPt=!0}lPt(t,s,i){if(i=!!i,this.iPt)throw new Error("already loaded asset");this.dK=s;const e={NZ:i};return MM.Zh(s)&&(e.$Z="remote"),this.N$(t,e),this.iPt.WZ()}uPt(t,s){if(this.iPt)throw new Error("already loaded asset");this.dK="",this.pK=s.size,this.iPt=MM.Hn(MM.BZ,t.rk(),{blob:s,size:this.pK,$Z:"local"})}cPt(t){if(t===this)throw new Error("cannot replace with self");this.ZEt++,this.qE(),this.dK=t.dK,this.pK=t.pK,this.KEt=t.KEt,this.QEt=t.QEt,this.Ey=t.Ey,this.Py=t.Py,this.tPt=t.tPt,this.sPt=t.sPt,this.iPt=t.iPt,this.ePt=t.ePt,this.VE=t.VE,this.nPt=t.nPt,this.oPt()}UZ(){return this.dK}Ou(){return this.pK}fPt(){return this.KEt}dPt(){return this.QEt}JCt(){return this.tPt}jg(){return this.Ey}Kg(){return this.Py}pPt(){return this.iPt.jg()}mPt(){return this.iPt.Kg()}N$(t,s){if(this.iPt)throw new Error("already got asset");s=Object.assign({},s,{url:this.UZ(),size:this.Ou()}),this.iPt=t.kZ(s)}wK(){return this.iPt&&this.iPt.wK()}async SX(t,s){if(!this.iPt)throw new Error("no asset");if(this.ePt)throw new Error("already loaded texture");const i=this.ZEt;this.ePt="loading";const e=await this.iPt.SX(t,s);if(this.ZEt!==i)return null;if(!e)return this.ePt="",null;this.ePt="loaded",this.sPt||(this.Ey=e.jg(),this.Py=e.Kg(),this.sPt=!0);const n=this.tPt?this.Py:this.Ey,r=this.tPt?this.Ey:this.Py;return this.VE.set(this.KEt,this.QEt,this.KEt+n,this.QEt+r),this.VE.St(e.jg(),e.Kg()),this.nPt.Yl(this.VE),this.tPt&&this.nPt.su(),e}qE(){this.ePt&&(this.iPt&&this.iPt.qE(),this.ePt="",this.VE.set(0,0,0,0),this.nPt.Yl(this.VE))}cG(){return this.iPt&&"loaded"===this.ePt?this.iPt.cG():null}sA(){return this.VE}qCt(){return this.nPt}MJ(){return this.hPt}gPt(){return this.iPt}async yPt(t){t||(t=await this.iPt.EK());const s=MM.co(this.Ey,this.Py),i=s.getContext("2d");return this.tPt?(i.rotate(Math.PI/-2),i.translate(-this.Py,0),i.drawImage(t,this.KEt,this.QEt,this.Py,this.Ey,0,0,this.Py,this.Ey)):i.drawImage(t,this.KEt,this.QEt,this.Ey,this.Py,0,0,this.Ey,this.Py),s}async wPt(t){if(this.rPt)return this.rPt;const s=await this.yPt(t),i=await MM.fo(s);return this.rPt=URL.createObjectURL(i),this.rPt}oPt(){this.rPt&&(URL.revokeObjectURL(this.rPt),this.rPt="")}}}{const TM=self._s;TM.SPt=class extends TM.Vn{constructor(t){super(),this.Yn=t[0],this.bPt=t[1],this.XMt=!!t[2],this.Zot=t[3],this.vPt=t[4],this.MPt=!!t[5],this.dQ=t[6],this.xPt=t[7].map((t=>TM.Hn(TM.TPt,t))),this.GPt=new self.Kq(this)}static IPt(t,s){const i=TM.Hn(TM.SPt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.xPt.push(TM.TPt.IPt(t)),i}qn(){for(const t of this.xPt)t.qn();TM.bh(this.xPt)}_Pt(t){for(const s of this.xPt)s.gz().N$(t)}CPt(t,s){return Promise.all(this.xPt.map((i=>i.gz().SX(t,s))))}EPt(){for(const t of this.xPt)t.gz().qE()}Ec(){return this.Yn}U0(){return this.dQ}az(){return this.xPt.length}uz(){return this.xPt}PPt(t){if((t=Math.floor(t))<0||t>=this.xPt.length)throw new RangeError("invalid frame");return this.xPt[t]}APt(t,s){(s=Math.floor(s))<0?this.xPt.unshift(t):s>=this.xPt.length?this.xPt.push(t):this.xPt.splice(s,0,t)}RPt(t){if((t=Math.floor(t))<0||t>=this.xPt.length)throw new RangeError("invalid frame");this.xPt[t].qn(),this.xPt.splice(t,1)}OPt(t){for(let s=0,i=this.xPt.length;s<i;++s)if(TM.Ke(this.xPt[s].Pz(),t))return s;return-1}FPt(t){if("string"==typeof t){const s=this.OPt(t);if(-1===s)throw new Error(`cannot find animation frame with tag ${t}`);return s}return t}Qq(){return this.bPt}sz(){return this.XMt}ez(){return this.Zot}rz(){return this.vPt}oz(){return this.MPt}DPt(){return this.GPt}}}{const GM=self._s,IM=(()=>{const t=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),s=new Uint8Array(t.length);for(let i=0,e=t.length;i<e;++i)s[i]=t.charCodeAt(i);return new Blob([s],{type:"image/png"})})();GM.TPt=class extends GM.Vn{constructor(t){super(),this.LPt=GM.Hn(GM.XEt),this.LPt.aPt(t),this.kPt=t[7],this.NPt=GM.Hn(GM.Ca,t[8],t[9]),this.$Pt=t[10].map((t=>GM.Hn(GM.BPt,this,t))),this.WPt=new Map;for(const t of this.$Pt)this.WPt.set(t.Ec().toLowerCase(),t);this.jPt=null;const s=t[11];s.length>=6&&(this.jPt=GM.Hn(GM.au,s)),this.Aw=t[12]?t[12]:"",this.VPt=new self.mz(this)}static IPt(t){const s=GM.Hn(GM.TPt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.LPt.uPt(t,IM),s}qn(){this.jPt&&(this.jPt.qn(),this.jPt=null),this.LPt.qn(),this.LPt=null}gz(){return this.LPt}yz(){return this.kPt}eH(){return this.NPt.Oa()}hH(){return this.NPt.Da()}Iz(){return this.jPt}Tz(t){return this.WPt.get(t.toLowerCase())||null}xz(t){return(t=Math.floor(t))<0||t>=this.$Pt.length?null:this.$Pt[t]}Sz(){return this.$Pt.length}Pz(){return this.Aw}cz(){return this.VPt}}}{const _M=self._s;_M.BPt=class extends _M.Vn{constructor(t,s){super(),this.UPt=t,this.Yn=s[0],this.HPt=_M.Hn(_M.Ca,s[1],s[2])}qn(){}Ec(){return this.Yn}HM(){return this.HPt.Oa()}JM(){return this.HPt.Da()}qPt(){return this.HPt}}}{const CM=globalThis._s,EM=globalThis.RU,PM=globalThis.bW,AM=globalThis.LW,RM=globalThis.ZW,OM=globalThis.assert;CM.$ut=class extends CM.Vn{constructor(t,s,i){super();const e=t.Vbt(i[1]);this.Nc=t,this.iCt=CM.qB.dW(e),this.aCt=null,this.zPt=e.Instance,this.Pw=s,this.dQ=i[11],this.Yn=i[0],this._vt=this.Nc.ugt(i[14]),this.JPt=!!i[9],this.YPt=!!i[2],this.XPt=!!i[10],this.ZPt=i[3].map((s=>({QK:s[0],type:s[1],name:s[2],KPt:t.ugt(s[3])}))),this.QPt=i[4],this.tAt=i[5],this.S_t=this.iCt.KB(),this.sAt=CM.Hn(CM.Event.wf),this.JQ=null;const[n,r]=t.lk().dB();if(this.iAt=CM.Hn(CM.eAt,n,r),this.nAt=!0,this.rAt=null,this.hAt=null,this.oAt=-1,this.aAt=null,this.lAt=null,this.uAt=null,this.cAt=null,this.fAt=null,this.dAt=!1,this.pAt=null,this.mAt=i[8].map((t=>CM.gAt.AG(this,t))),this.yAt=[],this.wAt=new Map,this.SAt=new Map,this.bAt=new Set,this.vAt=new Map,this.MAt=CM.Hn(CM.Fdt,this),this.xAt=null,this.TAt=0,this.GAt=!1,this.pAt=null,this.LPt=null,this.IAt=null,this._At=null,this.CAt=null,this.EAt=0,this.sxt=new Map,this.ixt=new Map,this.FK=[],this.PAt=new Map,this.AAt=!0,this.iCt.nW()&&(this.JQ=CM.Hn(CM.YQ,this,i[12])),i[6]&&(this.LPt=CM.Hn(CM.XEt),this.LPt.aPt(i[6])),i[7]){this.IAt=i[7].map((t=>CM.Hn(CM.SPt,t))),this._At=new Map,this.CAt=new Map;for(const t of this.IAt)this._At.set(t.Ec().toLowerCase(),t),this.CAt.set(t.U0(),t)}this.YPt?(this.rAt=[],this.hAt=new Set,this.oAt=this.Nc.RAt()):(this.aAt=[],this.lAt=new Set,this.uAt=[],this.cAt=[],this.fAt=[]);const h=this.iCt.Mxt();if(h<2&&(this.aCt=CM.Hn(e.OAt,this,i[15]),!(this.aCt instanceof CM.sCt)))throw new Error("v1 sdk type must derive from SDKTypeBase");let o;if(this.FAt=null,this.DAt=null,this.r5=CM.Hn(CM.Event.wf),CM.qB.U_t(this,h),h>=2?(o=e.OAt,o||(o=globalThis.SJ)):o=this.aCt.W_t(),o&&!this.YPt){if(this.FAt=new o(h<2?this:null),h<2&&!(this.FAt instanceof AM))throw new TypeError("script interface class must derive from IObjectType");if(h>=2&&!(this.FAt instanceof globalThis.SJ))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else{const t=this.YPt?RM:AM;this.FAt=new t}if(CM.qB.H_t(h),i[13]){const t=i[13];if(t){const s=t[0],i=t[1],e=t[2];this.aCt.eCt(s,i,e)}}this.Nc.LAt()&&!this.YPt&&!this.XPt&&this.S_t||this.B_t(),this.iCt.XB()&&(this.iCt.j_t(this),this.kAt(i)),this.NAt=null}static AG(t,s,i){return CM.Hn(CM.$ut,t,s,i)}qn(){if(this.sAt.qn(),this.sAt=null,this.LPt&&(this.LPt.qn(),this.LPt=null),this.IAt){for(const t of this.IAt)t.qn();CM.bh(this.IAt),this._At.clear(),this.CAt.clear()}this.NAt=null,this.MAt.qn(),this.MAt=null,this.sxt.clear(),this.ixt.clear(),this.pAt=null,this.Nc=null}$At(t){for(let s=1,i=t.length;s<i;++s){const i=this.Nc.d0(t[s]);this.rAt.push(i),this.hAt.add(i),i.aAt.push(this),i.lAt.add(this)}}BAt(t){this.dAt=!0,this.pAt=t}KV(){return this.dAt}P5(){return this.pAt}WAt(){let t=0;if(!this.YPt)for(const s of this.aAt)for(const i of s.jAt()){const s=i.Ec().toLowerCase();this.wAt.set(s,i),this.SAt.set(s,t),this.yAt.push(i),++t}for(const s of this.jAt()){const i=s.Ec().toLowerCase();this.wAt.set(i,s),this.SAt.set(i,t),this.yAt.push(s),++t}for(const t of this.yAt)this.bAt.add(t.Nq().constructor);if(!this.YPt&&this.aAt.length){const t=this.Nc.VAt();CM.xh(this.uAt,t,0),CM.xh(this.cAt,t,0),CM.xh(this.fAt,t,0);const s=[];let i=0,e=0,n=0;for(const t of this.aAt){const r=t.eMt();this.uAt[r]=i,i+=t.UAt(),this.cAt[r]=e,e+=t.HAt(),this.fAt[r]=n,n+=t.qAt();const h=t.nj();if(h&&this.JQ)for(const t of h.rj())s.push(t.zAt(this.JQ))}this.JQ&&this.JQ.JAt(s)}}kAt(t){const s=CM.te(t[17])?t[17]:this.Nc.YAt(),i=CM.Hn(CM.Instance,{runtime:this.Nc,objectType:this,uid:s});i.XAt(t[16],[]),this.Nc.ZAt(s,i),this.FK.push(i)}wTt(){return this.aCt}KAt(){return this.XPt}wf(){return this.sAt}B_t(){this.YPt||(this.aCt?this.aCt.B_t():this.FAt.bJ())}QAt(){return this.EAt>0}async O5(t){this.YPt||(this.EAt++,1===this.EAt&&(this.aCt?await this.aCt.O5(t):await this.FAt.xJ(this.Nc.I$().tRt())))}B5(){if(!this.YPt){if(this.EAt--,this.EAt<0)throw new Error("released textures too many times");0===this.EAt&&(this.aCt?this.aCt.B5():this.FAt.TJ(this.Nc.I$().tRt()))}}L5(){if(this.YPt)throw new Error("not applicable to family");this.aCt?this.aCt.L5():this.FAt.GJ()}async o4(t){this.YPt||(this.aCt?await this.aCt.o4(t):await this.FAt.IJ(this.Nc.I$().tRt()))}$$(){return this.Nc}MW(){return this.iCt}sRt(){return this.zPt}Ec(){return this.Yn}ugt(){return this._vt}tk(){return this.Pw}U0(){return this.dQ}k0(){return this.YPt}x0(){return this.JPt}KB(){return this.S_t}eMt(){return this.oAt}jAt(){return this.mAt}HAt(){return this.QPt}iRt(t){return t&&this.bAt.has(t)}UAt(){return this.ZPt.length}eRt(){return this.ZPt.map((t=>t.QK))}nRt(t){return this.ZPt.findIndex((s=>s.QK===t))}Sit(t){return this.ZPt.findIndex((s=>s.name===t))}rRt(){return this.ZPt.map((t=>t.name))}hRt(){return this.ZPt.map((t=>t.KPt))}vit(t){if((t=Math.floor(t))<0||t>=this.ZPt.length)throw new RangeError("invalid instance variable index");return this.ZPt[t].type}bit(t){if((t=Math.floor(t))<0||t>=this.ZPt.length)throw new RangeError("invalid instance variable index");return this.ZPt[t].name}qAt(){return this.tAt}oRt(){return this.yAt}trt(t){return this.wAt.get(t.toLowerCase())||null}xit(t){const s=this.SAt.get(t.toLowerCase());return void 0===s?-1:s}nj(){return this.JQ}nW(){return this.iCt.nW()}aRt(){return this.JQ&&this.JQ.lRt()}Kgt(){return this.MAt}DW(){return this.MAt.DW()}gz(){return this.LPt}g0(t){this.xAt=t}m0(){return this.xAt}y0(t){this.TAt=t}uRt(){return this.TAt}cRt(){return this.IAt}fRt(){return this.IAt.length}JW(){return this.aAt}TTt(t){return this.lAt.has(t)}tj(){return this.rAt}ij(t){return this.hAt.has(t)}aMt(t){return this.cAt[t]}iMt(t){return this.uAt[t]}cvt(t){this.vAt.set(t.gvt().toLowerCase(),t)}fvt(t){return!!this.Mvt(t)}Mvt(t){const s=this.vAt.get(t.toLowerCase());return s&&s.Iu()?s:null}dRt(){return this.IAt}pRt(t){if(!this.IAt)throw new Error("no animations");return this._At.get(t.toLowerCase())||null}mRt(t){if(!this.IAt)throw new Error("no animations");return this.CAt.get(t)||null}gRt(t){if(this.pRt(t))throw new Error(`animation name '${t}' already exists`);const s=CM.SPt.IPt(this.$$(),t);return this.IAt.push(s),this._At.set(s.Ec().toLowerCase(),s),this.CAt.set(s.U0(),s),s}yRt(t){const s=this.pRt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.IAt.length)throw new Error("cannot remove last animation");const i=this.IAt.indexOf(s);this.IAt.splice(i,1),this._At.delete(s.Ec().toLowerCase()),this.CAt.delete(s.U0()),s.qn()}wRt(){if(!this.IAt)throw new Error("no animations");return this.IAt[0]}SRt(){return this.wRt().PPt(0)}bRt(){if(this.IAt){const t=this.SRt().gz();return[t.jg(),t.Kg()]}return this.LPt?[this.LPt.jg(),this.LPt.Kg()]:[100,100]}SW(){if(!this.iCt.XB())throw new Error("not a single-global plugin");return this.FK[0]}FW(){return this.FK}*TW(){yield*this.FK}*OW(){yield*this.FK,yield*this.Nc.CGt(this)}NW(){return this.FK.length}T0(t){this.FK.push(t)}vRt(){this.AAt=!0}m4(){if(!this.AAt||this.YPt)return;const t=this.FK;let s=0;for(let i=t.length;s<i;++s)t[s].MRt(s);const i=this.Nc.xRt();for(const t of i)t.WV()===this&&t.MRt(s++);this.AAt=!1}TRt(t){const s=this.FK;if(t<s.length)return s[t];t-=s.length;const i=this.Nc.xRt();for(const s of i)if(s.WV()===this){if(0===t)return s;--t}return null}cGt(t){if(t&&t.KV()&&t.WV()!==this)for(const s of t.QV())if(s.WV()===this)return s;const s=this.DW().FW();return s.length?s[0]:null}RW(t){const s=this.DW().FW();return s.length>0?s[t.iU()%s.length]:null}*FGt(t,s){const i=this.DW().FW(),e=i.length,n=s.DW(),r=s.DW().FW(),h=r.length;let o=t.iU();!s.k0()&&n.zdt()||(o=r.indexOf(t));const a=Math.ceil(e/h),l=e%h;let u=0,c=0;0===l||o<l?(u=o*a,c=a):(u=l*a+(o-l)*(a-1),c=a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}Fxt(t){this.aCt?.Fxt(t)}Fbt(){if(!this.dAt||this.YPt)return;this.m4();const t=this.DW(),s=t.spt(),i=t.zdt(),e=this.Nc.tgt(),n=e&&e.qk()&&e.qk().upt();for(const e of this.pAt.sj()){if(e===this)continue;e.m4();const r=e.DW();if(r.tpt(i),!i){const i=r.spt();CM.bh(i);for(const t of s)i.push(e.TRt(t.iU()));if(n){const s=t.ipt(),i=r.ipt();CM.bh(i);for(const t of s)i.push(e.TRt(t.iU()))}}}}$xt(t,s){for(const i of this.P5().sj()){const e=i.DW();t?CM.Sh(e.ipt(),s):CM.Sh(e.spt(),s)}}GRt(){return this.iAt}IRt(t){this.nAt=!!t}_Rt(){if(this.nAt&&this.S_t){for(const t of this.FK)t.c$().CRt();for(const t of this.Nc.xRt())t.WV()===this&&t.c$().CRt();this.nAt=!1}}ERt(t,s,i){if(s){const i=this.PAt.get(s);i&&(i.delete(t),0===i.size&&this.PAt.delete(s))}if(i){let s=this.PAt.get(i);s||(s=new Set,this.PAt.set(i,s)),s.add(t)}}*PRt(){if(this.k0()){const t=new Set;for(const s of this.rAt)for(const i of s.PRt())t.add(i);yield*t.values()}else for(const t of this.PAt.keys())t.zn()||(yield t)}Cxt(){return this.sxt||(this.sxt=new Map),this.sxt}Ext(){return this.ixt||(this.ixt=new Map),this.ixt}ARt(){return this.iRt(CM.Llt.jEt)}RRt(){return this.iRt(CM.Llt.VEt)}ORt(){return this.iRt(CM.Llt.FRt)}v0(){return this.iRt(CM.Llt.DRt)}b3(){const t={instances:this.FK.map((t=>t.hx()))};return this.sxt&&this.sxt.size&&(t.ex=CM.So(this.sxt)),t}v3(t,s){this.sxt&&(this.sxt.clear(),this.sxt=null);const i=t.ex;i&&(this.sxt=CM.bo(i));const e=this.FK,n=t.instances;for(let t=0,s=Math.min(e.length,n.length);t<s;++t)e[t].ox(n[t]);for(let t=n.length,s=e.length;t<s;++t)this.Nc.zV(e[t]);for(let t=e.length,i=n.length;t<i;++t){const i=n[t];let e=null;if(this.KB()&&(e=this.Nc.VN().b5(i.w.l),!e))continue;const r=this.Nc.M0(this.xAt||this,e,!1,0,0,!0);r.ox(i),s&&s.add(r)}this.NAt=n,this.vRt()}LRt(){return this.NAt}kRt(){this.NAt=null}NRt(){for(let t=0,s=this.FK;t<s;++t)this.FK[t].NRt()}gW(){return this.FAt}Lk(){return this.r5}$Rt(){return this.DAt}$W(t){this.DAt=t}YZ(t){const s=this.Nc,i=s.AU()&&!s.Bk().UW();i&&EM.j4(),this.r5.dispatchEvent(t),i&&EM.V4()}}}{const FM=self._s;FM.BRt=class extends FM.Vn{constructor(t,s){super(),this.Nc=t,this.WRt=s;for(const t of this.WRt)t.BAt(this)}qn(){this.Nc=null}$$(){return this.Nc}E5(){return this.WRt}sj(){return this.WRt}y4(){return this.WRt.some((t=>t.KB()))}}}{const DM=self._s,LM=self.RU,kM=self.BV,NM=DM.qB,$M=[];let BM=0;const WM=new WeakMap,jM=new WeakMap,VM=1,UM=2,HM=4,qM=8,zM=16,JM=32,YM=64;DM.Instance=class extends DM.Vn{constructor(t){if(DM.qB!==NM)throw new Error("invalid addon manager");super(),this.Nc=t.runtime,this.jRt=t.objectType,this.zst=null,this.VRt=null,this.URt=null,this.HRt=0,this.qRt=t.uid,this.zRt=BM++,this.Vxt=0,this.JRt=null;const s=DM.Lh(t.tags);s.length>0&&(this.JRt=new Set(s)),this.YRt=$M,this.XRt=$M;const i=this.jRt.oRt();i.length>0&&(this.XRt=i.map(((t,s)=>DM.Hn(DM.ZRt,{runtime:this.Nc,$q:t,jq:this,index:s})))),this.KRt=this.jRt.KV()?[]:null,this.QRt=-1,this.sAt=null;const e=this.MW();if(e.SM()&&(this.Vxt|=4),e.KB())if(this.zst=DM.Hn(DM.tOt,this,t.ZU),t.sOt)this.zst.iOt(t.sOt);else{this.zst.eOt();const[t,s]=this.jRt.bRt();this.zst.TP(t,s),this.WV().aRt()&&this.zst.XU().nOt()}t.rOt?this.hOt(t.rOt):this.oOt()}qn(){if(this.URt&&(this.URt.qV(),this.URt=null),this.XRt.length>0){for(const t of this.XRt)t.qn();DM.bh(this.XRt)}this.VRt&&(this.VRt.qn(),this.VRt=null);const t=WM.get(this);t&&(t.clear(),WM.delete(this));const s=jM.get(this);s&&(s.clear(),jM.delete(this)),this.KRt&&DM.bh(this.KRt),this.sAt&&(this.sAt.qn(),this.sAt=null),this.JRt&&this.JRt.clear(),this.JRt=null,this.Nc=null,this.jRt=null,this.YRt.length>0&&DM.bh(this.YRt),this.zst&&(this.zst.qn(),this.zst=null)}hOt(t){t.length>0&&(this.YRt=[],DM.Gh(this.YRt,t))}oOt(){const t=this.jRt.UAt();if(0===t)return;this.YRt=[];const s=[0,0,""];for(let i=0;i<t;++i)this.YRt.push(s[this.jRt.vit(i)])}XAt(t,s){if(this.VRt)throw new Error("already got sdk instance");for(let t=0,i=this.XRt.length;t<i;++t)this.XRt[t].XAt(s?s[t]:null);if(this.MW().Mxt()<2){if(this.VRt=DM.Hn(this.jRt.sRt(),this,t),!(this.VRt instanceof DM.hCt))throw new Error("sdk type must derive from SDKInstanceBase");!this.MW().KB()&&this.jRt.$Rt()&&this.o$()}else{const s=this.MW().W_t();this.aOt(s.Instance,t)}}Aq(){return this.VRt??this.URt}c$(){return this.zst}$$(){return this.Nc}SN(){return this.QRt}rU(){const t=this.QRt;return-1===t?this.$$().SN():t}bN(t){((t=+t)<0||!isFinite(t))&&(t=0),this.QRt=t,this.WV().aRt()&&this.Nc.lOt(this,!0)}oU(){this.QRt=-1,this.WV().aRt()&&this.Nc.lOt(this,!1)}a3(){return this.Nc.uOt(this)}wf(){return this.sAt||(this.sAt=DM.Hn(DM.Event.wf)),this.sAt}Bx(t){this.VRt?this.VRt.Bx(t):this.URt.AJ(this.Nc.I$().tRt())}B_t(t){this.VRt.B_t(t)}cOt(){this.Vxt|=2}fOt(){return!!(2&this.Vxt)}dOt(){this.Vxt|=1}zJ(){return!!(1&this.Vxt)}SM(){return!!(4&this.Vxt)||this.VRt.SM()}pOt(){this.Vxt|=32}Q2(){return!!(32&this.Vxt)}mOt(){return!!(8&this.Vxt)}gOt(t){t?this.Vxt|=8:this.Vxt&=-9}yOt(){return!!(16&this.Vxt)}wOt(t){t?this.Vxt|=16:this.Vxt&=-17}SOt(){return!!(64&this.Vxt)}bOt(t){t?this.Vxt|=64:this.Vxt&=-65}vOt(t,s){t<<=16,s?this.Vxt|=t:this.Vxt&=~t}MOt(t){return!!(this.Vxt&t<<16)}jCt(){return this.VRt.jCt()}VCt(){return this.VRt.VCt()}UCt(){return this.VRt.UCt()}HCt(){return this.VRt.HCt()}zCt(){return this.VRt.zCt()}FTt(t){return this.VRt.FTt(t)}WV(){return this.jRt}Z2(){return this.VRt.Z2()}EGt(t){return t.k0()?t.ij(this.WV()):this.WV()===t}xOt(t,s,i){const e=(s,i)=>{const e=i||s.WV(),n=t.get(e);n?n.add(s):t.set(e,new Set([s]))};if(e(this,s),this.KV())for(const t of this.QV())e(t);if(i)for(const t of this.jH())e(t)}TOt(){if(!this.MW().aW())throw new Error("object does not support scene graph")}zH(){return null!==this.FH()}FH(){const t=this.c$();if(!t)return null;const s=t.FH();return s?s.nJ():null}LH(){const t=this.c$();if(!t)return null;const s=t.LH();return s?s.nJ():null}*kH(){const t=this.c$();if(t)for(const s of t.kH())yield s.nJ()}GOt(t){if(!t)return!1;for(const s of this.children())if(s===t)return!0;return!1}T3(){const t=this.c$();return!!t&&t.T3()}IOt(t){const s=this.c$();if(!s)return[];const i=t.Ec();return s.G4().map((t=>t.nJ())).filter((t=>t.WV().Ec()===i))}G4(){const t=this.c$();return t?t.G4().map((t=>t.nJ())):[]}*children(){const t=this.c$();if(t)for(const s of t.children())yield s.nJ()}*jH(){const t=this.c$();if(t)for(const s of t.jH())yield s.nJ()}$H(){const t=this.c$();return t?t.$H():0}_Ot(){return[...this.kH()].length}OGt(){const t=this.c$();return t?t.OGt():0}WH(t){const s=this.c$();if(!s)return null;const i=s.WH(t);return i?i.nJ():null}COt(){const t=this.c$();if(!t)return NaN;const s=t.FH();return s?s.EOt(t):NaN}POt(t){for(const s of this.c$().G4())if(s.nJ().tU()===t)return!0;return!1}UH(t,s){this.TOt(),t.TOt(),this.c$().UH(t.c$(),s||{})}HH(t){const s=this.c$();s&&s.HH(t.c$())}fq(){const t=this.c$();return!!t&&t.fq()}e4(){const t=this.c$();if(!t)return;const s=t.AOt();if(s)for(const t of s){const s=this.Nc.h$(t[2]);if(s){const i=t[3];this.UH(s,{YH:!!(1&i),ZH:!!(i>>1&1),QH:!!(i>>2&1),sq:!!(i>>3&1),eq:!!(i>>4&1),cq:!!(i>>5&1),rq:!!(i>>6&1),oq:!!(i>>7&1),lq:!!(i>>8&1)})}}}n4(t,s){const i=t.get(this);if(i)for(const t of i.sceneGraphJson.children){const i=s.get(t.index);if(!i)continue;const e=t.flags;this.UH(i,{YH:!!(1&e),ZH:!!(e>>1&1),QH:!!(e>>2&1),sq:!!(e>>3&1),eq:!!(e>>4&1),cq:!!(e>>5&1),rq:!!(e>>6&1),oq:!!(e>>7&1),lq:!!(e>>8&1)})}}nU(){const t=this.Nc.ROt();return t?t.Wut(this):""}KV(){return null!==this.KRt}OOt(){DM.bh(this.KRt)}d4(t){this.KRt.push(t)}XV(){return this.KRt}FOt(t){return!!this.DOt(t)}DOt(t){const s=this.QV();if(null===s||0===s.length)return!1;for(const i of s)if(i.WV()===t)return i;return null}QV(){return this.KRt}$wt(){for(const t of this.QV())t.WV().DW().ept(t)}Dxt(){for(const t of this.QV())t.WV().DW().Kdt(t)}Lxt(t){for(const s of this.QV())s.WV().DW().spt()[t]=s}Nxt(){for(const t of this.QV())t.WV().DW().Qdt(t)}kxt(t){for(const s of this.QV())s.WV().DW().ipt()[t]=s}MW(){return this.jRt.MW()}MRt(t){this.HRt=t}iU(){return this.jRt.m4(),this.HRt}tU(){return this.qRt}LOt(t){this.qRt=t}kOt(){return this.zRt}NOt(t){t?this.cU(new Set(t)):this.JRt=null}cU(t){if(0===t.size)this.JRt=null;else{this.JRt?this.JRt.clear():this.JRt=new Set;for(const s of t)this.JRt.add(s)}}lU(){return this.JRt??new Set}nIt(){return Array.from(this.lU()).join(" ")}oIt(t){t=Math.floor(t);for(const s of this.lU()){if(0===t)return s;--t}return""}Qnt(){return this.XRt}$Ot(t){if(!t)return null;for(const s of this.XRt)if(s.Nq()instanceof t)return s;return null}BOt(t){if(!t)return null;const s=this.$Ot(t);return s?s.Aq():null}Knt(t){const s=this.XRt;for(let i=0,e=s.length;i<e;++i)if(s[i].Wq().U0()===t)return i;return-1}WOt(){return this.YRt}rRt(){return this.jRt.rRt()}jOt(){return this.YRt.length}Pht(t){t|=0;const s=this.YRt;if(t<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}tMt(t){return this.YRt[t]}VOt(t){const s=this.YRt[t];return 0===this.jRt.vit(t)?!!s:s}Aht(t,s){t|=0;const i=this.YRt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");switch(this.jRt.vit(t)){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}vot(t,s){if(0===s)return;t|=0;const i=this.YRt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}Cxt(){let t=WM.get(this);return t||(t=new Map,WM.set(this,t),t)}Ext(){let t=jM.get(this);return t||(t=new Map,jM.set(this,t),t)}UOt(t){const s=this.WV();if(s.Lk().xf(t))return!0;for(const i of s.JW())if(i.Lk().xf(t))return!0;return!!this.Nc.Lk().xf(t)}VW(t=void 0){const s=t??new Set;if(s.has(this))return;s.add(this);const i=this.c$();if(i&&i.T3())for(const t of this.jH())if(s.add(t),t.KV())for(const i of t.QV())s.add(i);if(this.KV())for(const t of this.QV())t.VW(s);if(!t){for(const t of s.values())t.r4();this.h4()}}HOt(){this.jRt.$Rt()&&this.o$();for(const t of this.XRt)t._Et()}qOt(){this.HOt()}r4(){if(this.HOt(),this.UOt("instancecreate")){const t=this.WV(),s=new DM.Event("instancecreate");s.jq=this.o$(),t.YZ(s);for(const i of t.JW())i.YZ(s);this.Nc.YZ(s)}this.Nc.xU(this.MW().Gyt().P$.uIt,this,null)}h4(){if(this.MW().aW()){if(this.YZ(new DM.Event("hierarchyready")),this.UOt("hierarchyready")){const t=this.WV(),s=new DM.Event("hierarchyready");s.jq=this.o$(),t.YZ(s);for(const i of t.JW())i.YZ(s);this.Nc.YZ(s)}this.Nc.xU(this.MW().Gyt().P$.IGt,this,null)}}zOt(){this.Nc.xU(this.MW().Gyt().P$.cIt,this,null)}JOt(t){if(this.URt){const s=new DM.Event("destroy");s.YOt=t,this.YZ(s)}if(!this.UOt("instancedestroy"))return;const s=this.WV(),i=new DM.Event("instancedestroy");i.jq=this.o$(),i.YOt=t,s.YZ(i);for(const t of s.JW())t.YZ(i);this.Nc.YZ(i)}XOt(){return this.VRt?this.VRt.ECt():this.URt.NU()}hx(t="full",s=null){const i={};"full"===t?i.uid=this.tU():i.c3=!0;const e=this.lU();if(e.size>0&&(i.tags=Array.from(e)),"visual-state"!==t){const s=WM.get(this);if(s&&s.size&&(i.ex=DM.So(s)),-1!==this.SN()&&(i.mts=this.SN()),this.jRt.UAt()>0){const t={},s=this.jRt.eRt();for(let i=0,e=this.YRt.length;i<e;++i)t[s[i].toString()]=this.YRt[i];i.ivs=t}if(this.XRt.length){const s={};for(const i of this.XRt){const e=i.hx(t);e&&(s[i.Wq().U0().toString()]=e)}i.behs=s}}this.zst&&(i.w=this.zst.b3(t,s));const n=this.VRt?this.VRt.hx():this.URt.$U();return n&&(i.data=n),i}P6(t="full",s=null){this.zst&&this.zst.P6(t)}R6(t,s="full",i=null){this.zst&&this.zst.R6(t,s,i)}ZOt(t,s="full",i=null){this.zst&&this.zst.ZOt(t,s,i)}NRt(){this.MW().KB()&&this.zst.NRt()}ox(t,s="full",i=null){if("full"===s)this.qRt=t.uid;else if(!t.c3)return;if(this.NOt(t.tags),"visual-state"!==s){let s=WM.get(this);s&&(s.clear(),WM.delete(this));const i=t.ex;i&&(s=DM.bo(i),WM.set(this,s)),this.QRt=t.hasOwnProperty("mts")?t.mts:-1;const e=t.ivs;if(e)for(const[t,s]of Object.entries(e)){const i=parseInt(t,10),e=this.jRt.nRt(i);if(e<0||e>=this.YRt.length)continue;let n=s;null===n&&(n=NaN),this.YRt[e]=n}}if(this.MW().KB()){const e=t.w;if(e){const t=e.l;if(this.zst.f$().U0()!==t){const i=this.zst.f$(),e=i.zN().b5(t);e?(this.zst.g$(e),i._0(this,!0),e.T0(this,!0),e.y$(this),this.zst.KU()):"full"===s&&this.Nc.zV(this)}this.zst.v3(e,s,i)}}if("visual-state"!==s){const i=t.behs;if(i)for(const[t,e]of Object.entries(i)){const i=parseInt(t,10),n=this.Knt(i);n<0||n>=this.XRt.length||this.XRt[n].ox(e,s)}}const e=t.data;e&&(this.VRt?this.VRt.ox(e,s):this.URt.BU(e))}KOt(t){if(this.zst.f$().U0()===t)return;const s=this.zst.f$(),i=s.zN().b5(t);i&&(this.zst.g$(i),s._0(this,!0),i.T0(this,!0),i.y$(this),this.zst.KU())}o$(){return this.URt||this.aOt()}OCt(){return!!this.URt}aOt(t,s){const i=this.zst?t?self._J:self.Iq:t?self.mU:self.BV,e=t||this.VRt.W_t(),n=this.jRt.$Rt(),r=n||e||i,h=this.MW().Mxt();if(DM.qB.U_t(this,h),DM.qB.HEt(s),this.URt=new r,DM.qB.qEt(),DM.qB.H_t(h),e&&!(this.URt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(n){const t=e||i;if(!(this.URt instanceof t))throw new TypeError(`setInstanceClass(): class '${n.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.URt}jV(t){if(0===this.YRt.length)return;const s={},i=this.jRt.hRt();for(let t=0,e=i.length;t<e;++t)s[i[t]]={configurable:!1,enumerable:!0,get:DM.Instance.prototype.VOt.bind(this,t),set:DM.Instance.prototype.Aht.bind(this,t)};const e=Object.create(Object.prototype,s);t.QOt={value:e,writable:!1}}VV(t){const s=this.XRt;if(0===s.length)return;const i={};for(const t of s)i[t.Wq().ugt()]={value:t.cCt(),writable:!1};const e=Object.create(Object.prototype,i);t.Gwt={value:e,writable:!1}}YZ(t){if(!this.OCt())return;const s=this.o$();t.jq=s;const i=this.Nc,e=i.AU()&&!i.Bk().UW();e&&LM.j4(),s.dispatchEvent(t),e&&LM.V4()}}}{const XM=self._s,ZM=new Map;XM._4=class extends XM.Vn{constructor(t){super(),this.Sx=t,this.Hwt=null,this.tFt=[],this.sFt=t.jg(),this.iFt=t.Kg(),this.eFt=1,this.nFt=1,this.rFt=0,this.hFt=1,this.oFt=t.tO(),this.aFt=null,this.lFt=null,this.uFt=NaN,this.cFt=!1,this._3=NaN,this.C3=NaN,this.fFt=s=>{if(s.jq!==this.Hwt.nJ())return;t.$$().wf().removeEventListener("instancecreate",this.fFt);const i=this.Hwt.nJ().Aq();this.cFt=!!i.Lit(),this._3=this.cFt?i.Dit():NaN,this.C3=this.cFt?i.Nit():NaN}}qn(){this.Hwt=null,this.aFt=null,this.lFt=null,this.uFt=NaN,this.cFt=!1,this._3=NaN,this.C3=NaN,XM.bh(this.tFt)}dFt(t){if(this.hFt=this.Sx.tO(),this.oFt=this.hFt,this.Hwt=t,this.rFt=t?t.cj():0,this.Hwt){const t=this.Sx.$$();if(this.Hwt.nJ().MW().Mxt()<2){const s=this.Hwt.nJ().Aq();s?(this.cFt=!!s.Lit(),this._3=this.cFt?s.Dit():NaN,this.C3=this.cFt?s.Nit():NaN):this.Hwt.nJ().zJ()||t.wf().addEventListener("instancecreate",this.fFt)}else this.cFt=!1,this._3=NaN,this.C3=NaN}else this.cFt=!1,this._3=NaN,this.C3=NaN}FH(){return this.Hwt}T3(){return this.tFt.length>0}G4(){return this.tFt}pFt(){this.T3()&&1!==this.tFt.length&&(this.lFt?this.tFt.sort(((t,s)=>{const i=this.lFt.get(t.nJ()),e=this.lFt.get(s.nJ());return XM.te(i)&&XM.te(e)?i-e:0})):this.tFt.sort(((t,s)=>{const i=t.urt().mFt(),e=s.urt().mFt();return XM.te(i)&&XM.te(e)?i-e:0})))}mFt(){return this.uFt}gFt(){return this.eFt}yFt(t){this.eFt=t}wFt(){return this.nFt}SFt(t){this.nFt=t}Xht(){return this.oFt}iGt(){return this.hFt}bFt(t){this.hFt=t}lrt(){return 0===this.sFt?Number.EPSILON:this.sFt}prt(){return 0===this.iFt?Number.EPSILON:this.iFt}vFt(){if(this.Sx.tq()){const t=this.Hwt;let s=t.jg(),i=t.urt().lrt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.cFt?1+s/this._3:s/i}return 1}MFt(){if(this.Sx.iq()){const t=this.Hwt;let s=t.Kg(),i=t.urt().prt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.cFt?1+s/this.C3:s/i}return 1}xFt(){return 0}TFt(){return{sw:this.sFt,sh:this.iFt,sx:this.eFt,sy:this.nFt,psa:this.rFt,oo:this.hFt,so:this.oFt,pi:this.Sx.nJ().COt()}}b3(t,s=null){const i=this.TFt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.GFt(t),c:this.IFt(t)})}_Ft(t){let s="";return t.XH()&&(s+="x"),t.KH()&&(s+="y"),t.tq()&&(s+="w"),t.iq()&&(s+="h"),t.nq()&&(s+="a"),t.hq()&&(s+="z"),t.fq()&&(s+="d"),t.aq()&&(s+="o"),t.uq()&&(s+="v"),s}GFt(t){return this.Hwt?!this.Hwt.nJ()||this.Hwt.nJ().zJ()?null:this.CFt(this.Hwt,this.Sx,t):null}IFt(t){return this.tFt.map((s=>this.CFt(s,s,t))).filter((t=>t))}CFt(t,s,i){const e=t.nJ();if(e&&e.zJ())return null;const n={};return n.uid=e.tU(),n.f=this._Ft(s),n.offsets=s.EFt(),n.data=XM._4.PFt(e),n.oci=e.WV().tk(),"state"===i?(n.inst=e.hx("full",{selfOnly:!0}),n.instIndex=NaN):(n.instIndex=e.WV().FW().indexOf(e),n.inst=null),n}v3(t){this.sFt=t.sw,this.iFt=t.sh,this.eFt=t.sx,this.nFt=t.sy,this.rFt=t.psa,this.hFt=t.oo,this.oFt=t.so,this.uFt=XM.te(t.pi)?t.pi:NaN}AFt(t,s,i,e){if(!t&&!s)if(e?.bIt){if(this.aFt)for(const t of this.aFt)t.zJ()||t.zH()||t.$$().zV(t)}else if(this.aFt)for(const t of this.aFt)if(i.c&&i.c.length){if(!i.c.some((s=>s.uid===t.tU())))continue;t.zJ()||t.zH()||t.$$().zV(t)}this.aFt=t,this.lFt=s}RFt(t){const s=this.Sx.$$();return ZM.has(t)?ZM.get(t):s.h$(t)}R6(t,s){const i=this.Sx,e=i.$$(),n=s?.OFt??new Set;if(t.p&&!this.Hwt){const r=t.p.uid,h=this.RFt(r);if(h){const r=h.c$();h.GOt(i.nJ())?this.Hwt=r:(h.POt(i.nJ().tU())?(e.zV(i.nJ()),e.FFt(i.nJ().tU()),ZM.delete(i.nJ().tU())):h.UH(i.nJ(),this.DFt(t.p.f)),n.has(i)||(i.LFt(t.p.offsets),this.kFt(h,t.p,s),this.NFt(h,h.tU(),i.$$(),s)),n.add(i),h.c$().urt().pFt())}else if(XM.te(t.p.oci)){const n=e.BW(e.d0(t.p.oci),i.f$(),0,0,!0);if(n){const r=this.$Ft(t.p,e);r&&n.ox(r);const h=n.c$(),o=!!s?.bIt;h.f$().WW(n,!1,o),n.UH(i.nJ(),this.DFt(t.p.f)),ZM.set(n.tU(),n),this.NFt(n,n.tU(),e,s),n.c$().urt().pFt()}}}const r=[];for(const s of t.c){const t=s.uid,i=this.RFt(t);i&&r.push(i)}let h=0;for(const o of t.c){const a=o.uid,l=this.RFt(a);if(l){if(this.aFt){if(this.aFt.includes(l)){const e=l;if(e.WV()!==l.WV()){h++;continue}if(e.zJ()){h++;continue}const o=t.c[h];if(!s?.bIt&&this.BFt(e,r,i)){if(i.nJ().WH(h)){const r=e.WV().tk(),a=o.oci,l=i.nJ().WH(h).WV().tk();if(r!==a||a!==l){this.WFt(t.c,i,n,s);break}this.jFt(h,o,i,n,s)}else this.jFt(h,o,i,n,s);h++;continue}if(e.zH()&&e.FH()!==i.nJ()){const t=this.VFt(o,s);this.UFt(t,o,n,s),h++;continue}this.UFt(e.c$(),o,n,s,!0),h++;continue}if(this.aFt[h]){const e=this.aFt[h];if(e.WV()!==l.WV()){h++;continue}if(e.zJ()){h++;continue}const o=t.c[h];if(!s?.bIt&&this.BFt(e,r,i)){if(i.nJ().WH(h)){const r=e.WV().tk(),a=o.oci,l=i.nJ().WH(h).WV().tk();if(r!==a||a!==l){this.WFt(t.c,i,n,s);break}this.jFt(h,o,i,n,s)}else this.jFt(h,o,i,n,s);h++;continue}if(e.zH()&&e.FH()!==i.nJ()){const t=this.VFt(o,s);this.UFt(t,o,n,s),h++;continue}this.UFt(e.c$(),o,n,s,!0),h++;continue}}const e=l.WV();if(this.HFt(r,e)===i.nJ().IOt(e).length){for(const t of i.nJ().G4()){if(t.WV()!==e)continue;const i=t.c$();if(i&&!n.has(i)){n.add(i),i.LFt(o.offsets),this.kFt(t,o,s);break}}h++;continue}if(l.zH()&&l.FH()!==i.nJ()){const t=this.VFt(o,s);this.UFt(t,o,n,s),h++;continue}this.UFt(l.c$(),o,n,s)}else if(this.aFt&&this.aFt[h]){const a=this.aFt[h],l=e.d0(this.qFt(o));if(a.WV()!==l){h++;continue}if(a.zJ()){h++;continue}const u=t.c[h];if(!s?.bIt&&this.BFt(a,r,i)){if(i.nJ().WH(h)){const e=a.WV().tk(),r=u.oci,o=i.nJ().WH(h).WV().tk();if(e!==r||r!==o){this.WFt(t.c,i,n,s);break}this.jFt(h,u,i,n,s)}else this.jFt(h,u,i,n,s);h++;continue}if(a.zH()&&a.FH()!==i.nJ()){const t=this.VFt(u,s);this.UFt(t,u,n,s),h++;continue}this.UFt(a.c$(),u,n,s)}else{const t=this.VFt(o,s);this.UFt(t,o,n,s)}h++}}WFt(t,s,i,e){const n=s.$$();for(const t of s.nJ().children())t&&!t.zJ()&&(n.zV(t),n.FFt(t.tU()),ZM.delete(t.tU()));this.aFt&&(this.aFt=[]),this.lFt&&(this.lFt=new WeakMap),Object.assign({},e,{assignZIndex:!1});for(const s of t){const t=this.VFt(s,e);this.UFt(t,s,i,e),this.aFt.push(t.nJ()),this.lFt.set(t.nJ(),this.aFt.length-1)}s.urt().pFt()}BFt(t,s,i){const e=t.WV();return this.HFt(s,e)===i.nJ().IOt(e).length}jFt(t,s,i,e,n){const r=i.nJ().WH(t);if(!r)return;const h=r.c$();h&&(e.has(h)||(h.LFt(s.offsets),this.kFt(r,s,n)),e.add(h))}DFt(t){const s={};return s.YH=t.includes("x"),s.ZH=t.includes("y"),s.QH=t.includes("w"),s.sq=t.includes("h"),s.eq=t.includes("a"),s.rq=t.includes("z"),s.cq=t.includes("d"),s.oq=t.includes("o"),s.lq=t.includes("v"),s}qFt(t){return XM.te(t.oci)?t.oci:t[1]}VFt(t,s){if(!XM.te(t.oci))return;const i=this.Sx,e=i.$$();let n;const r=!s.hasOwnProperty("createHierarchy")||s.createHierarchy;if(n=t.data?e.M0(t.data,i.f$(),!1,0,0,!1,r):e.BW(e.d0(t.oci),i.f$(),0,0,r),!n)return;const h=this.$Ft(t,e);h&&n.ox(h);const o=n.c$(),a=!!s?.bIt;return o.f$().WW(n,!0,a),o}NFt(t,s,i,e){if(this.RFt(s)&&!e?.bIt){const e=this.RFt(s);e!==t&&i.zV(e)}i.FFt(s),i.ZAt(s,t)}UFt(t,s,i,e,n=!0){const r=this.Sx,h=r.UH(t,this.DFt(s.f));h&&n?(i.has(t)||(t.LFt(s.offsets),this.kFt(t.nJ(),s,e)),i.add(t)):h&&(ZM.set(t.nJ().tU(),t.nJ()),this.NFt(t.nJ(),s.uid,r.$$(),e)),this.pFt()}kFt(t,s,i){let e=this.$Ft(s,this.Sx.$$());if(!e)return;const n=!i.hasOwnProperty("clearChildren")||i.clearChildren,r=!i.hasOwnProperty("assignZIndex")||i.assignZIndex,h=t.$$();if(ZM.set(t.tU(),t),e=JSON.parse(JSON.stringify(e)),n&&t.tU()!==e.uid){for(const s of t.children())s&&!s.zJ()&&(h.zV(s),h.FFt(s.tU()),ZM.delete(s.tU()));if(e.w?.sgi&&e.w.sgi.c?.length)for(const s of e.w.sgi.c){const e=Object.assign({},i,{clearChildren:!1,createHierarchy:!1}),n=this.VFt(s,e);ZM.set(n.nJ().tU(),n.nJ()),t.UH(n.nJ(),this.DFt(s.f)),n.LFt(s.offsets),this.kFt(n.nJ(),s,e)}}const o=e.w?.zi,a=e.w?.l;e.w=null,t.ox(e),i?.bIt||(XM.te(o)&&r&&t.c$().R0(o),XM.te(a)&&t.KOt(a)),this.NFt(t,e.uid,h,i)}HFt(t,s){return t.filter((t=>t.WV().Ec()===s.Ec())).length}$Ft(t,s){if(XM.te(t.instIndex)){const i=s.d0(t.oci).LRt();return i?i[t.instIndex]:null}return XM.le(t.inst)?JSON.parse(t.inst):t.inst?t.inst:void 0}static PFt(t){let s=t.c$().f$().w0(t.tU());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const s of[...t.G4()]){const t=s.c$();i.push([t.zN().U0(),t.f$().tk(),s.tU(),XM._4.I4(t),s.WV().KV()?1:0,t.d$(),XM._4.PFt(s)])}return XM.Te(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=XM._4.zFt(),s[0][14][1]=i,s[0][14][2]=t.c$().d$()),s}static I4(t){let s=0;return s|=Number(t.uq())<<8,s|=Number(t.aq())<<7,s|=Number(t.hq())<<6,s|=Number(t.fq())<<5,s|=Number(t.nq())<<4,s|=Number(t.iq())<<3,s|=Number(t.tq())<<2,s|=Number(t.KH())<<1,s|=0|Number(t.XH()),s}static zFt(t){let s=0;return s|=256,s|=128,s|=64,s|=32,s|=16,s|=8,s|=4,s|=2,s|=1,511}static JFt(){ZM.clear()}}}{const KM=self._s,QM=self.ls,tx=QM.ws,sx=QM.Ss,ix=KM.Hn(KM.Rect),ex=KM.Hn(KM.Cl),nx=KM.Hn(KM.Event,"bboxchange",!1),rx=KM.Hn(KM.To,0,0,0,0),hx=KM.Hn(KM.au),ox=KM.Hn(KM.To,1,1,1,1),ax=KM.Hn(KM.Rect,0,0,-1,-1),lx=KM.Hn(KM.Rect,0,0,-1,-1),ux=new Set(["absolute","relative"]),cx=[];let fx=!0;const dx=1,px=2,mx=4,gx=8,yx=16,wx=32,Sx=64,bx=128,vx=256,Mx=512,xx=1024,Tx=2048,Gx=4096,Ix=8192,_x=16384,Cx=32768,Ex=1<<22,Px=1<<23,Ax=12647936,Rx=65536,Ox=1<<17,Fx=1<<18,Dx=1<<19,Lx=1<<20,kx=1<<21,Nx=26,$x=31<<26,Bx=new WeakMap,Wx=new WeakMap;KM.tOt=class extends KM.Vn{constructor(t,s){super(),this.di=t,this.Ddt=t.WV(),this.Nc=t.$$(),this.YFt=s,this.Ddt.ERt(this,null,s),this.XFt=-1,this.ZFt=-1,this.Vxt=196635,this.Ddt.MW().iW()&&(this.Vxt|=128),this.Ea=NaN,this.Pa=NaN,this.RM=NaN,this.KFt=NaN,this.QFt=NaN,this.qT=NaN,this.Co=NaN,this.tDt=NaN,this.sDt=NaN,this.iDt=NaN,this.eDt=NaN,this.nDt=KM.Hn(KM.Rect),this.rDt=KM.Hn(KM.Cl),this.hDt=lx,this.oDt=ax,this.aDt=null,this.lDt=null,this.uDt=null,this.AM=ox,this.cDt=ox,this.fDt=null,this.dDt=null,this.di.WV().aRt()&&(this.dDt=KM.Hn(KM.pDt,this.di,this)),this.mDt=null,this.aFt=null,this.lFt=null,this.gDt=-1,this.yDt=null}dOt(){this.Vxt|=256}qn(){if(this.Ddt.ERt(this,this.YFt,null),this.fDt&&(this.Nc.pM().Ab(this.fDt),this.fDt=null),this.aDt=null,this.lDt&&(this.lDt.wDt.qn(),this.lDt=null),this.uDt&&(this.uDt.clear(),this.uDt=null),this.yq(),this.dDt&&this.dDt.qn(),this.zH()&&this.FH().HH(this),this.T3()){const t=[...this.G4()];for(const s of t)this.HH(s)}this.SDt(),this.bDt(),Bx.delete(this),Wx.delete(this),this.di=null,this.Ddt=null,this.Nc=null,this.YFt=null}iOt(t){if(fx=!1,this.QU(t[0],t[1]),this.ZM(t[2]),this.TP(t[3],t[4]),this.qT=0,this.iW()?this.uj(t[6]):this.Co=0,rx.wa(t[7]),this.vDt(rx),this.nH(t[8]),this.oH(t[9]),this.FM(t[10]),this.dDt&&this.dDt.MDt(t[12]),t[14]&&Bx.set(this,{xDt:t[14][1],TDt:t[14][2]}),t[15]){const s=t[15];this.mq(s[0],s[1]);const i=this.Mq(),e=s[2];for(let t=0,s=e.length;t<s;++t){const s=e[t];for(let e=0,n=s.length;e<n;++e){const n=s[e],r=i.Nx(e,t);r.qM(n[0]),r.YM(n[1]),r.ZM(n[2]),r.QM(n[3]),r.sx(n[4])}}}if(t[16]){const s=t[16][0],i=t[16][1],e=!!i,n=!e,r=this.Nc.ROt();e&&r&&r.But(this.nJ(),i),n&&r&&r.But(this.nJ(),s)}fx=!0,this.GDt()}eOt(){this.Ea=0,this.Pa=0,this.RM=0,this.KFt=0,this.QFt=0,this.qT=0,this.Co=0,this.tDt=0,this.sDt=1,this.iDt=0,this.eDt=0,this.GDt()}$$(){return this.Nc}WV(){return this.Ddt}nJ(){return this.di}IDt(){return this.nq()?this._Dt(this.FH().CDt()-this.mDt.xFt()):0}qM(t){if(t=+t,this.XH()){const s=this.mDt,i=t-this.HM(),e=-this.IDt();0===e?this.Ea+=i/s.vFt():(this.Ea+=Math.cos(e)*i/s.vFt(),this.KH()&&(this.Pa+=Math.sin(e)*i/s.MFt()))}else this.Ea=t}Lht(t,s=!1){t=+t,s?this.Ea+=t:this.XH()?this.qM(this.HM()+t):this.Ea+=t}HM(){if(this.XH()){let t=this.Ea;const s=this.mDt,i=this.FH(),e=this.IDt();return 0===e?t*=s.vFt():(t=t*s.vFt()*Math.cos(e),this.KH()&&(t-=this.Pa*s.MFt()*Math.sin(e))),i.HM()+t}return this.Ea}YM(t){if(t=+t,this.KH()){const s=this.mDt,i=t-this.JM(),e=-this.IDt();0===e?this.Pa+=i/s.MFt():(this.XH()&&(this.Ea-=Math.sin(e)*i/s.vFt()),this.Pa+=Math.cos(e)*i/s.MFt())}else this.Pa=t}kht(t,s=!1){t=+t,s?this.Pa+=t:this.KH()?this.YM(this.JM()+t):this.Pa+=t}JM(){if(this.KH()){let t=this.Pa;const s=this.mDt,i=this.FH(),e=this.IDt();return 0===e?t*=s.MFt():(t=t*s.MFt()*Math.cos(e),this.XH()&&(t+=this.Ea*s.vFt()*Math.sin(e))),i.JM()+t}return this.Pa}QU(t,s){if(t=+t,s=+s,this.EDt()){const i=this.XH(),e=this.KH(),n=this.mDt,r=t-this.HM(),h=s-this.JM(),o=-this.IDt();if(0===o)i?this.Ea+=r/n.vFt():this.Ea=t,e?this.Pa+=h/n.MFt():this.Pa=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.Ea+=e?(l*r-a*h)/n.vFt():l*r/n.vFt():this.Ea=t,e?this.Pa+=i?(a*r+l*h)/n.MFt():l*h/n.MFt():this.Pa=s}}else this.Ea=t,this.Pa=s}PDt(){return[this.HM(),this.JM()]}sH(t,s){t=+t,s=+s,this.EDt()?this.QU(this.HM()+t,this.JM()+s):(this.Ea+=t,this.Pa+=s)}RTt(t,s){return this.HM()===t&&this.JM()===s}ZM(t){if(t=+t,this.hq()&&(t-=this.FH().XM()),this.RM===t)return;this.RM=t,this.ADt();const s=this.f$();0!==this.RM&&s.P0(),s.y$(this)}ADt(){if(this.GDt(),this.T3()){const t=this.G4();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.hq()&&i.ADt()}}}Qht(t){this.ZM(this.XM()+t)}XM(){return this.hq()?this.FH().XM()+this.RM:this.RM}cH(){return this.f$().XM()+this.XM()}Lit(){return this.nJ().MW().Mxt()<2&&this.nJ().Aq().Lit()}Yg(t){if(t=+t,this.tq()){const s=this.jg();0===s?this.KFt=Number.EPSILON:this.KFt*=t/s}else this.KFt=t;this.RDt()}Gy(t,s){t=+t,s?this.KFt+=t:this.tq()?this.Yg(this.jg()+t):this.KFt+=t,this.RDt()}jg(){if(this.tq()){const t=this.FH(),s=t.jg();return t.urt().lrt()===Number.EPSILON?(this.urt().lrt()+s)*this.KFt:s*this.KFt}return this.KFt}Vg(t){if(t=+t,this.iq()){const s=this.Kg();0===s?this.QFt=Number.EPSILON:this.QFt*=t/s}else this.QFt=t;this.RDt()}Vht(t,s){t=+t,s?this.QFt+=t:this.iq()?this.Vg(this.Kg()+t):this.QFt+=t,this.RDt()}Kg(){if(this.iq()){const t=this.FH(),s=t.Kg();return t.urt().prt()===Number.EPSILON?(this.urt().prt()+s)*this.QFt:s*this.QFt}return this.QFt}TP(t,s){if(t=+t,s=+s,this.tq()){const s=this.jg();0===s?this.KFt=Number.EPSILON:this.KFt*=t/s}else this.KFt=t;if(this.iq()){const t=this.Kg();0===t?this.QFt=Number.EPSILON:this.QFt*=s/t}else this.QFt=s;this.RDt()}Ou(){return[this.jg(),this.Kg()]}K2(){return this.qT}ODt(t){if(t<0)throw new RangeError("invalid depth");this.qT=t}FDt(){if(this.zH()){const t=this.mDt;return Math.min(t.vFt(),t.MFt())}return 1}iW(){return!!(128&this.Vxt)}uj(t){t=+t,this.iW()&&(this.nq()&&(t-=this.FH().cj()),t=KM.Kn(t),this.Co!==t&&(this.Co=t,this.RDt()))}Uht(t){0!=(t=+t)&&this.iW()&&(this.Co=KM.Kn(this.Co+t),this.RDt())}RDt(){if(this.Vxt|=262144,this.T3()){const t=this.G4();for(let s=0,i=t.length;s<i;s++)t[s].RDt()}}cj(){return this.nq()&&this.iW()?this._Dt(KM.Kn(this.FH().CDt()+this.Co)):this.Co}CDt(){return this.nq()&&this.iW()?KM.Kn(this.FH().CDt()+this.Co):this.Co}_Dt(t){return this.tq()&&this.LH().jg()<0&&(t=KM.Kn(KM.pr(t,this.LH().cj()+Math.PI))),this.iq()&&this.LH().Kg()<0&&(t=KM.pr(t,this.LH().cj())),t}DDt(){const t=this.FH();return!!(this.tq()&&t.jg()<0)||!!(this.iq()&&t.Kg()<0)}LDt(){const t=this.FH();return!!(this.tq()&&t.jg()<0&&this.iq()&&t.Kg()<0)}kDt(){const t=this.Vxt;if(!(262144&t))return;const s=this.cj();this.tDt=Math.sin(s),this.sDt=Math.cos(s),this.Vxt=-262145&t}kTt(){return this.kDt(),this.tDt}LTt(){return this.kDt(),this.sDt}nH(t){this.iDt=+t}Zht(t){this.iDt+=+t}eH(){return this.iDt}oH(t){this.eDt=+t}Kht(t){this.eDt+=+t}hH(){return this.eDt}vDt(t){this.AM.equals(t)||(this.AM===ox?(this.AM=KM.Hn(KM.To,t),this.cDt=KM.Hn(KM.To,t),this.cDt.Zo()):t.zo(1,1,1,1)?(this.AM=ox,this.cDt=ox):(this.AM.set(t),this.cDt.set(t),this.cDt.Zo()),this.GDt())}iO(t){if(t=KM.Zn(+t,0,1),this.aq()){if(this.urt().iGt()===t)return;this.urt().bFt(t),t=this.tO()}else if(this.AM.a===t)return;this.NDt(t)}$Dt(){if(!this.T3())return;const t=this.G4();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.NDt(i.tO())}}NDt(t){rx.ko(this.AM),rx.a=t,this.vDt(rx),this.$Dt()}zht(t){this.aq()?this.iO(this.urt().iGt()+t):this.iO(this.tO()+t)}tO(){return this.aq()?this.FH().tO()*this.urt().iGt():this.AM.a}vH(t){this.AM.Ho(t)||(rx.ko(t),rx.a=this.tO(),this.vDt(rx))}Cht(t,s,i){rx.Po(t,s,i),this.vH(rx)}BDt(t,s,i){0===t&&0===s&&0===i||(rx.ko(this.AM),rx.r+=t,rx.g+=s,rx.b+=i,this.vH(rx))}bH(){return this.AM}ZQ(){return this.cDt}fq(){return!!(512&this.Vxt)}WDt(t){this.jDt(512,t)}XH(){return!!(1024&this.Vxt)}VDt(t){this.jDt(1024,t)}KH(){return!!(2048&this.Vxt)}EDt(){return!!(3072&this.Vxt)}UDt(t){this.jDt(2048,t)}tq(){return!!(4096&this.Vxt)}HDt(t){this.jDt(4096,t)}iq(){return!!(8192&this.Vxt)}qDt(t){this.jDt(8192,t)}nq(){return!!(16384&this.Vxt)}zDt(t){this.jDt(16384,t)}hq(){return!!(32768&this.Vxt)}JDt(t){this.jDt(32768,t)}aq(){return!!(4194304&this.Vxt)}YDt(t){this.jDt(4194304,t)}uq(){return!!(8388608&this.Vxt)}XDt(t){this.jDt(8388608,t)}ZDt(){this.Vxt&=-12647937}UH(t,s){if(t===this)return!1;if(t.zH())return!1;if(this.KDt(t))return!1;if(this.QDt(t))return!1;const i=t.HM(),e=t.JM(),n=t.jg(),r=t.Kg(),h=t.cj(),o=t.XM(),a=t.tO();t.tLt(this),t.VDt(s.YH),t.UDt(s.ZH),t.HDt(s.QH),t.qDt(s.sq),t.zDt(s.eq),t.JDt(s.rq),t.YDt(s.oq),t.XDt(s.lq),t.WDt(s.cq);const l=i-this.HM(),u=e-this.JM(),c=-this.cj(),f=Math.cos(c),d=Math.sin(c);if(s.YH&&(s.eq?t.Ea=l*f-u*d:t.Ea=l,s.QH)){const s=this.jg()/this.mDt.lrt();0!==s&&(t.Ea/=s)}if(s.ZH&&(s.eq?t.Pa=l*d+u*f:t.Pa=u,s.sq)){const s=this.Kg()/this.mDt.prt();0!==s&&(t.Pa/=s)}if(s.QH){const s=this.jg();0===s||s===Number.EPSILON?(t.KFt=1,t.mDt.yFt(1)):(t.KFt=n/this.jg(),t.mDt.yFt(t.KFt))}if(s.sq){const s=this.Kg();0===s||s===Number.EPSILON?(t.QFt=1,t.mDt.SFt(1)):(t.QFt=r/this.Kg(),t.mDt.SFt(t.QFt))}return s.eq&&(t.Co=h-this.cj()),s.rq&&(t.RM=o-this.XM()),s.oq&&t.mDt.bFt(a),s.lq&&t.zj(this.Yj()),this.sLt(t),this.KU(),this.$Dt(),!0}HH(t){if(t.FH()!==this)return;const s=t.HM(),i=t.JM(),e=t.jg(),n=t.Kg(),r=t.cj(),h=t.XM(),o=t.tO();t.tLt(null),t.ZDt(),t.QU(s,i),t.TP(e,n),t.uj(r),t.ZM(h),t.iO(o),this.iLt(t),this.KU()}eLt(){return this.gDt}nLt(){this.rLt();const t=[...this.children()];for(const s of t)this.HH(s);const s=this.FH();s&&s.HH(this),this.ZDt()}rLt(){if(this.hLt(),!this.aFt){const t=[...this.children()];t.length&&(this.aFt=[],this.lFt=new WeakMap);let s=0;for(const i of t){const t=i.nJ();this.aFt.push(t),this.lFt.set(t,s),s++}}const t=this.FH();t&&t.rLt()}hLt(){if(-1!==this.gDt)return;const t=[...this.kH()];this.gDt=t.length;for(const s of t)s.hLt();const s=[...this.children()];for(const t of s)t.hLt()}bDt(){this.aFt&&(this.aFt.length=0),this.aFt=null,this.lFt=null;const t=this.FH();t&&t.bDt(),this.gDt=-1}zH(){return null!==this.FH()}FH(){const t=this.mDt;return null!==t?t.FH():null}LH(){let t=this;for(;t.zH();)t=t.FH();return t}*kH(){let t=this.FH();for(;t;)yield t,t=t.FH()}GOt(t){return this.G4().includes(t)}T3(){const t=this.mDt;return null!==t&&t.T3()}G4(){const t=this.mDt;return null!==t?t.G4():cx}children(){return this.G4()}*jH(){for(const t of this.children())yield t,yield*t.jH()}$H(){return this.G4().length}OGt(){return[...this.jH()].length}WH(t){const s=this.G4();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}EOt(t){if(!t)return NaN;const s=this.G4();if(!s)return NaN;for(let i=0;i<s.length;i++)if(t===s[i])return i;return NaN}oLt(t){this.mDt||(this.mDt=KM.Hn(KM._4,this)),t&&this.mDt.dFt(t)}urt(){return this.mDt}SDt(){this.mDt&&(this.mDt.qn(),this.mDt=null)}tLt(t){t?(t.oLt(null),this.oLt(t)):(this.mDt&&this.mDt.dFt(null),this.T3()||this.SDt())}QDt(t){if(!this.zH())return!1;const s=this.FH();return s===t||s.QDt(t)}KDt(t){if(this.GOt(t))return!0;for(const s of this.G4())if(s.KDt(t))return!0;return!1}sLt(t){this.mDt.G4().push(t)}iLt(t){const s=this.mDt.G4(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.zH()||this.SDt(),t.T3()||t.SDt()}AOt(){const t=Bx.get(this);return t?t.xDt:null}aLt(){const t=Bx.get(this);return t?t.TDt:NaN}x3(){const t=Wx.get(this);return KM.te(t)?t:NaN}lLt(t){Wx.set(this,t)}uLt(){this.jDt(524288,!0),this.GDt()}GDt(){if(!fx)return;const t=this.Nc.pM();let s;this.fDt&&t.Ab(this.fDt),s=524288&this.Vxt?t.cb()||"<point>":t.ab()||"<default>",this.fDt=t._b(s,this.GV(),this.cDt,this.XM())}r3(){return this.fDt}J0(){return this.AM===ox}FM(t){if((t|=0)<0||t>31)throw new RangeError("invalid blend mode");this.GV()!==t&&(this.Vxt=-2080374785&this.Vxt|t<<26,this.GDt())}GV(){return(2080374784&this.Vxt)>>26}g$(t,s){const i=s&&this.YFt!==t;i&&this.C0(),this.Ddt.ERt(this,this.YFt,t),this.YFt=t,i&&this.cLt(),0!==this.XM()&&this.YFt.P0()}f$(){return this.YFt}zN(){return this.f$().zN()}R0(t){this.XFt=0|t}d$(){return this.YFt.q1(),this.XFt}X1(t){this.ZFt=0|t}WJ(){return this.YFt.J1(),this.ZFt}PK(){return this.XFt}jDt(t,s){s?this.Vxt|=t:this.Vxt&=~t}Yj(){return!!(1&this.Vxt)}zj(t){if(this.jDt(1,t),this.T3())for(const s of this.G4())s.uq()&&s.zj(t)}AH(){return!!(8&this.Vxt)}RH(t){t=!!t,this.AH()!==t&&(this.jDt(8,t),t?this.KU():this.fLt())}dLt(t,s){if(this.jDt(32,t),this.uDt&&this.uDt.clear(),s.trim()){this.uDt||(this.uDt=new Set);for(const t of s.split(" "))t&&this.uDt.add(t.toLowerCase())}else this.uDt=null}pLt(t){const s=!!(32&this.Vxt),i=this.uDt;if(!t||!i)return!s;for(const e of i)if(t.has(e))return s;return!s}KU(){if(this.Vxt|=65554,this.Ddt.IRt(!0),this.Nc.w$(),this.YFt.l0()&&(this.dH(this.nDt,this.rDt,!0),this.Vxt&=-3,this.cLt()),4&this.Vxt&&this.di.wf().dispatchEvent(nx),null!==this.mDt){const t=this.mDt.G4();for(let s=0,i=t.length;s<i;++s)t[s].KU()}}dH(t,s,i){const e=this.HM(),n=this.JM(),r=this.jg(),h=this.Kg(),o=this.cj();t.Ua(e-this.iDt*r,n-this.eDt*h,r,h),i&&this.vq()&&this.mLt(t),0===o?s.Yl(t):(t.offset(-e,-n),s.Zl(t,this.kTt(),this.LTt()),s.offset(e,n),s.Kl(t)),t.normalize()}gLt(){const t=this.Vxt;2&t&&(this.dH(this.nDt,this.rDt,!0),this.Vxt=-3&t)}pH(){return this.gLt(),this.nDt}gH(){return this.gLt(),this.rDt}yLt(t){const s=this.HM(),i=this.JM(),e=Math.round(s)-s,n=Math.round(i)-i;return 0===e&&0===n?t:(ex.S(t),ex.offset(e,n),ex)}wLt(t){this.nDt.S(t),this.rDt.Yl(this.nDt),this.Vxt&=-3,this.CRt(),this.cLt()}SLt(t){this.jDt(4,t)}bLt(){return!!(4&this.Vxt)}z2(t,s,i){return s&&0!==this.K2()?this.X2(this.f$().Y2()):0===this.XM()||i?t.Ml(this.pH()):this.vLt()}vLt(){const t=this.f$(),s=this.cH();return!(s>=t.d1())&&(t.c1(s,ix),ix.Ml(this.pH()))}X2(t){const s=this.pH(),i=s.Ka(),e=s.tl(),n=s.Qa(),r=s.sl(),h=this.cH(),o=h+this.K2();return t.Yw(i,n,h,e,r,o)}wH(){const t=this.f$();if(t.C1())return this.X2(t.Y2());{const s=t.zN();return this.z2(t.EV(),s.q2(),s.Nj())}}i3(t){this.jDt(1048576,t)}s3(t){this.jDt(2097152,t)}MLt(){return!!(1048576&this.Vxt)}xLt(){return!!(2097152&this.Vxt)}TLt(t){this.aDt=t,this.GLt(),this.vq()&&(this.yDt.ILt=null)}_Lt(){return this.aDt}CLt(){return null!==this.aDt||this.vq()}ELt(){return this.PLt(this.jg(),this.Kg(),this.cj(),this.kTt(),this.LTt())}ALt(t,s,i){let e=0,n=1;return 0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.PLt(t,s,i,e,n)}PLt(t,s,i,e,n){let r=this.lDt;null===r&&(r={wDt:KM.Hn(KM.au),width:NaN,height:NaN,angle:NaN},this.lDt=r);const h=r.wDt;if(r.width===t&&r.height===s&&r.angle===i)return h;const o=this.aDt;if(this.vq()){const i=this.eH(),r=this.hH(),a=this.Mq();let l=this.yDt.ILt;l||(o?(hx.S(o),hx.offset(i,r)):hx.gu(),l=a.jx(hx),this.yDt.ILt=l),a.Vx(l,h),h.offset(-i,-r),h.bu(t,s,e,n)}else o?(h.S(o),h.bu(t,s,e,n)):h.Su(this.gH(),-this.HM(),-this.JM());return r.width=t,r.height=s,r.angle=i,h}GLt(){this.RLt(!0);const t=this.lDt;null!==t&&(t.width=NaN)}mq(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.nJ().MW().uW())throw new Error("object does not support mesh");this.yq(),this.yDt={OLt:KM.Hn(KM.kw.gx,t,s),FLt:KM.Hn(KM.kw.gx,t,s),ILt:null}}vq(){return null!==this.yDt}Mq(){if(!this.vq())throw new Error("no mesh");return this.yDt.OLt}DLt(){if(!this.vq())throw new Error("no mesh");return this.yDt.FLt}LLt(t){this.jDt(65536,t)}kLt(){return!!(65536&this.Vxt)}RLt(t){this.jDt(131072,t)}NLt(){return!!(131072&this.Vxt)}mLt(t){const s=this.yDt.OLt,i=Math.min(s.Rx(),0),e=Math.min(s.Ox(),0),n=Math.max(s.Fx(),1),r=Math.max(s.Dx(),1),h=t.width(),o=t.height();t.offsetLeft(i*h),t.offsetTop(e*o),t.al((n-1)*h),t.ll((r-1)*o),this.qT=s.Lx()}yq(){this.yDt&&(this.yDt.OLt.qn(),this.yDt.FLt.qn(),this.yDt=null,this.GLt())}Sq(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!ux.has(e))throw new Error("invalid mode");const n="relative"===e;let r=i.x,h=i.y;const o=i.gV;let a="number"==typeof i.xq?i.xq:n?0:-1,l="number"==typeof i.Tq?i.Tq:n?0:-1;if(!this.vq())return!1;const u=this.Mq(),c=u.Nx(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.XM()!==o&&(c.ZM(o),f=!0),n&&(r+=t/(u._x()-1),h+=s/(u.Cx()-1)),-1!==a||n?(n&&(a+=t/(u._x()-1)),a=KM.Zn(a,0,1)):a=c.KM(),-1!==l||n?(n&&(l+=s/(u.Cx()-1)),l=KM.Zn(l,0,1)):l=c.tx(),c.HM()===r&&c.JM()===h&&c.KM()===a&&c.tx()===l?f:(c.qM(r),c.YM(h),c.QM(a),c.sx(l),this.GLt(),!0)}fOt(){return this.di.fOt()}OH(t,s){return!!this.pH().Tl(t,s)&&!!this.gH().Tl(t,s)&&(this.fOt()?this.di.Aq().YCt(t,s):!this.CLt()||this.ELt().Tl(t-this.HM(),s-this.JM()))}$Lt(){return!!(16&this.Vxt)}CRt(){if(!this.$Lt()||!this.AH()||256&this.Vxt)return;const t=this.pH(),s=this.Ddt.GRt(),i=this.hDt;if(ix.set(s.JK(t.Ka()),s.YK(t.Qa()),s.JK(t.tl()),s.YK(t.sl())),i.equals(ix))return;const e=this.di;i===lx?(s.XK(e,null,ix),this.hDt=KM.Hn(KM.Rect,ix)):(s.XK(e,i,ix),i.S(ix)),this.Vxt&=-17}BLt(){this.Vxt|=16}fLt(){const t=this.hDt;t!==lx&&(this.Ddt.GRt().XK(this.di,t,null),this.hDt=lx)}cLt(){const t=this.f$();if(!t.l0()||256&this.Vxt)return;const s=t.X0(),i=this.pH(),e=this.oDt;if(ix.set(s.JK(i.Ka()),s.YK(i.Qa()),s.JK(i.tl()),s.YK(i.sl())),e.equals(ix))return;const n=this.di;e===ax?(s.XK(n,null,ix),this.oDt=KM.Hn(KM.Rect,ix)):(s.XK(n,e,ix),e.S(ix)),t.Z0()}C0(){const t=this.oDt;t!==ax&&(this.f$().X0().XK(this.di,t,null),this.oDt=ax)}z1(){return this.oDt}xH(){const t=this.di,s=this.YFt,i=s.m$();i.length&&i.at(-1)===t||(s._0(t,!1),s.T0(t,!1),this.Nc.w$())}GH(){const t=this.di,s=this.YFt,i=s.m$();i.length&&i[0]===t||(s._0(t,!1),s.I0(t,!1),this.Nc.w$())}_H(t){const s=this.di,i=this.YFt;if(i.zN()!==t.zN())throw new Error("layer from different layout");t!==i&&(i._0(s,!0),this.g$(t),t.T0(s,!0),this.Nc.w$())}EH(t,s){const i=this.di;let e=!1;const n=this.YFt;if(t.tU()===i.tU())return;const r=t.c$();if(!r)throw new Error("expected world instance");const h=r.f$();n.tk()!==h.tk()&&(n._0(i,!0),this.g$(h),h.T0(i,!0),e=!0);const o=h.Q1(i,t,!!s);(e||o)&&this.Nc.w$()}XU(){return this.dDt}WLt(t){this.jDt(64,t)}o2(){return!!(64&this.Vxt)}b3(t,s=null){const i={x:this.HM(),y:this.JM(),w:this.jg(),h:this.Kg(),l:this.f$().U0(),zi:this.d$()};0!==this.XM()&&(i.ze=this.XM()),0!==this.cj()&&(i.a=this.CDt()),this.J0()||(i.c=this.AM.toJSON()),.5!==this.eH()&&(i.oX=this.eH()),.5!==this.hH()&&(i.oY=this.hH()),0!==this.GV()&&(i.bm=this.GV()),this.Yj()||(i.v=this.Yj()),this.AH()||(i.ce=this.AH()),this.bLt()&&(i.be=this.bLt()),this.dDt&&(i.fx=this.dDt.b3());const e=!!(32&this.Vxt);return e&&(i.sfi=e),this.uDt&&(i.sft=[...this.uDt].join(" ")),this.mDt&&"visual-state"!==t&&(i.sgi=this.mDt.b3(t,s),Bx.has(this)&&(i.sgcd=Bx.get(this).xDt,i.sgzid=Bx.get(this).TDt)),this.vq()&&(i.mesh=this.Mq().hx()),i}EFt(){return{x:this.Ea,y:this.Pa,z:this.RM,w:this.KFt,h:this.QFt,a:this.Co,sgi:this.urt()?this.urt().TFt():null}}LFt(t){t&&(this.Ea=t.x,this.Pa=t.y,this.RM=t.z,this.KFt=t.w,this.QFt=t.h,this.Co=t.a,t.sgi&&this.urt()&&this.urt().v3(t.sgi),this.RDt(),this.KU())}NRt(){this.bDt(),this.nLt(),this.oLt(null),this.mDt&&this.mDt.AFt(this.aFt,this.lFt)}P6(t){"visual-state"!==t&&this.nLt()}R6(t,s="full",i=null){if(t.hasOwnProperty("sgi")&&"visual-state"!==s){if(256&this.Vxt)return;this.mDt.R6(t.sgi,i)}}ZOt(t,s="full",i=null){if("visual-state"!==s)if(256&this.Vxt)this.bDt();else{if(t.hasOwnProperty("sgi"))this.mDt.AFt(null,null,t.sgi,i);else if(i?.bIt&&this.aFt)for(const t of this.aFt)t.zJ()||this.Nc.zV(t);this.bDt(),this.KU()}}v3(t,s,i=null){if(fx=!1,this.qM(t.x),this.YM(t.y),this.Yg(t.w),this.Vg(t.h),this.R0(t.zi),this.ZM(t.hasOwnProperty("ze")?t.ze:0),this.uj(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?rx.wa(t.c):t.hasOwnProperty("o")?(rx.ko(this.AM),rx.a=t.o):rx.Eo(1,1,1,1),this.vDt(rx),this.nH(t.hasOwnProperty("oX")?t.oX:.5),this.oH(t.hasOwnProperty("oY")?t.oY:.5),this.FM(t.hasOwnProperty("bm")?t.bm:0),this.zj(!t.hasOwnProperty("v")||t.v),this.RH(!t.hasOwnProperty("ce")||t.ce),this.SLt(!!t.hasOwnProperty("be")&&t.be),this.dLt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.dDt&&t.hasOwnProperty("fx")&&this.dDt.v3(t.fx),t.hasOwnProperty("sgi")&&"visual-state"!==s){this.oLt(null);const s=this.mDt,i=t.sgi;s.v3(i),s.AFt(this.aFt,this.lFt),this.jLt(t.sgcd,t.sgzid)}if(t.hasOwnProperty("mesh")){const s=t.mesh;this.mq(s.cols,s.rows),this.Mq().ox(s)}else this.yq();this.KU(),fx=!0,this.GDt(),"visual-state"!==s&&this.Nc.VLt(this.nJ(),t)}jLt(t,s){t&&KM.te(s)&&Bx.set(this,{xDt:t,TDt:s})}}}{const jx=self._s;jx.gAt=class extends jx.Vn{constructor(t,s){super();const i=t.$$(),e=i.Vbt(s[1]);i.ULt().UEt(e),this.Nc=i,this.Ddt=t,this.xEt=jx.qB.qq(e),this.aCt=null,this.HLt=null,this.zPt=e.Instance,this.dQ=s[2],this.Yn=s[0],this._vt=this.Nc.ugt(s[3]);const n=this.xEt.Mxt();if(n<2&&(this.aCt=jx.Hn(e.OAt,this),!(this.aCt instanceof jx.MEt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(jx.qB.U_t(this,n),n>=2){const t=e.OAt??globalThis.rY;if(this.HLt=new t,!(this.HLt instanceof globalThis.rY))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.HLt=new globalThis.Uq;jx.qB.H_t(n),this.B_t()}static AG(t,s){return jx.Hn(jx.gAt,t,s)}qn(){this.Nc=null,this.xEt=null,this.aCt&&(this.aCt.qn(),this.aCt=null),this.zPt=null}wTt(){return this.aCt}B_t(){this.aCt?this.aCt.B_t():this.HLt&&this.HLt.bJ()}$$(){return this.Nc}WV(){return this.Ddt}Nq(){return this.xEt}sRt(){return this.zPt}Ec(){return this.Yn}U0(){return this.dQ}Bq(){return this.HLt}ugt(){return this._vt}}}{const Vx=self._s,Ux=self.Lq;Vx.ZRt=class extends Vx.Vn{constructor(t){super(),this.Nc=t.runtime,this.rMt=t.$q,this.xEt=this.rMt.Nq(),this.di=t.jq,this.Pw=t.index,this.VRt=null,this.URt=null,this.xEt.T0(this.di)}qn(){this.URt&&(this.URt.qV(),this.URt=null),this.xEt._0(this.di),this.VRt&&(this.VRt.qn(),this.VRt=null),this.Nc=null,this.rMt=null,this.xEt=null,this.di=null}XAt(t){if(this.VRt)throw new Error("already got sdk instance");if(this.Nq().Mxt()<2){if(this.VRt=Vx.Hn(this.rMt.sRt(),this,t),!(this.VRt instanceof Vx.TEt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const s=this.Nq().W_t();this.V_t(s.Instance,t)}}Aq(){return this.VRt??this.URt}Vq(){return this.di}$$(){return this.Nc}Wq(){return this.rMt}Nq(){return this.xEt}pht(){return this.Pw}_Et(){this.VRt?this.VRt._Et():this.URt.aY()}AEt(t,s){this.VRt&&this.VRt.AEt(t,s)}XOt(){return this.VRt?this.VRt.ECt():this.URt.NU()}hx(t="full"){return this.VRt?this.VRt.hx(t):this.URt.$U(t)}ox(t,s="full"){if(this.VRt)return this.VRt.ox(t,s);this.URt.BU(t,s)}static qLt(t,s,i){const e=globalThis.hY;let n,r;n=s instanceof e?t.Tj(s):s.IEt(),r=i instanceof e?t.Tj(i):i.IEt();const h=n.Vq(),o=r.Vq(),a=h.WV().tk(),l=o.WV().tk();if(a!==l)return a-l;const u=h.kOt(),c=o.kOt();return u!==c?u-c:n.pht()-r.pht()}V_t(t,s){const i=Ux,e=t??this.VRt.W_t(),n=e||i,r=this.Nq().Mxt();if(Vx.qB.U_t(this,r),Vx.qB.HEt(s),this.URt=new n,Vx.qB.qEt(),Vx.qB.H_t(r),e&&!(this.URt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);return this.URt}cCt(){return this.URt||this.V_t()}OCt(){return!!this.URt}}}{const Hx=self._s;Hx.YQ=class extends Hx.Vn{constructor(t,s){super(),this.Sx=t,this.zLt=[],this.JLt=[],this.YLt=new Map,this.XLt=[],this.ZLt=[],this.KLt=new Set,this.eM=!0;for(const t of s){const s=Hx.Hn(Hx.QLt,this,t,this.zLt.length);this.zLt.push(s),this.YLt.set(s.Ec().toLowerCase(),s),t.length>=3&&this.XLt.push(this.tkt(s,t[2]))}this.$$().skt(this)}qn(){this.$$().ikt(this);for(const t of this.ZLt)t.qn();Hx.bh(this.ZLt),Hx.bh(this.zLt),Hx.bh(this.JLt),this.YLt.clear(),Hx.bh(this.XLt),this.Sx=null}ekt(t){this.KLt.add(t)}nkt(t){this.KLt.delete(t)}rkt(t){t.sb()&&(this.ZLt=this.zLt.map((t=>{const s=t.RI();return s.hkt()>0?Hx.Hn(Hx.kw.okt,s):null})),this.akt());for(const s of this.KLt)s.rkt(t)}JAt(t){if(t.length){this.zLt=t.concat(this.zLt);for(const s of t)this.YLt.set(s.Ec().toLowerCase(),s);for(let t=0,s=this.zLt.length;t<s;++t)this.zLt[t].$0(t)}}tkt(t,s){t.lkt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=Hx.Hn(Hx.To);e.wa(s),i[t]=e}}return i}Ex(){return this.Sx}$$(){return this.Sx.$$()}Yq(){Hx.bh(this.JLt);let t=!0;for(const s of this.zLt)s.Pwt()&&(this.JLt.push(s),s.RI().bM()||(t=!1));this.eM=t}rj(){return this.zLt}lRt(){return this.zLt.length>0}irt(t){return this.YLt.get(t.toLowerCase())||null}ukt(t){if((t=Math.floor(+t))<0||t>=this.zLt.length)throw new RangeError("invalid effect type index");return this.zLt[t]}zq(t){return this.ukt(t).Pwt()}Jq(t,s){this.ukt(t).lkt(s)}Y0(){return this.JLt}o2(){return this.JLt.length>0}bM(){return this.eM}srt(t){return this.XLt[t]}QQ(t){return t<this.ZLt.length?this.ZLt[t]:this.XLt[t]}Xq(t,s){if(t<0||t>=this.XLt.length)return null;const i=this.XLt[t];return s<0||s>=i.length?null:i[s]}Zq(t,s,i){if(t<0||t>=this.XLt.length)return!1;const e=this.XLt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof Hx.To){if(n.Ho(i))return!1;n.ko(i)}else{if(n===i)return!1;e[s]=i}return t<this.ZLt.length&&this.ZLt[t].ckt(s,i),!0}akt(){const t=this.XLt,s=this.ZLt;for(let i=0,e=Math.min(t.length,s.length);i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.ckt(t,n[t])}}static fkt(t){return t&&t instanceof Hx.To?{t:"color",v:t.toJSON()}:t}static dkt(t){if(null===t)return NaN;if("object"==typeof t){if("color"===t.t){const s=Hx.Hn(Hx.To);return s.wa(t.v),s}throw new Error("invalid effect parameter type")}return t}static pkt(t){return t.map(Hx.YQ.fkt)}static mkt(t){return t.map(Hx.YQ.dkt)}hx(){return this.zLt.map((t=>({name:t.Ec(),active:t.Pwt(),params:Hx.YQ.pkt(this.XLt[t.tk()])})))}ox(t){for(const s of t){const t=this.irt(s.name);t&&(t.lkt(s.active),this.XLt[t.tk()]=Hx.YQ.mkt(s.params))}this.Yq(),this.akt()}}}{const qx=self._s;qx.QLt=class extends qx.Vn{constructor(t,s,i){super(),this.JQ=t,this.Bc=s[0],this.Yn=s[1],this.Pw=i,this.CM=null,this.Nf=!0}qn(){this.JQ=null,this.CM=null}zAt(t){const s=qx.Hn(qx.QLt,t,[this.Bc,this.Yn],-1);return s.CM=this.CM,s.Nf=this.Nf,s}rkt(t){const s=t.ob(this.Bc);if(!s)throw new Error("failed to find shader program '"+this.Bc+"'");this.CM=s}nj(){return this.JQ}Ec(){return this.Yn}$0(t){this.Pw=t}tk(){return this.Pw}Ex(){return this.JQ.Ex()}$$(){return this.JQ.$$()}lkt(t){this.Nf=!!t}Pwt(){return this.Nf}RI(){return this.CM}gkt(){const t=[];for(let s=0,i=this.CM.OI();s<i;++s){const i=this.CM.FI(s);if("float"===i||"percent"===i)t.push(0);else{if("color"!==i)throw new TypeError("unknown effect parameter type");t.push(qx.Hn(qx.To,1,1,1,1))}}return t}}}{const zx=self._s;zx.pDt=class extends zx.Vn{constructor(t,s){super(),this.di=t,this.ykt=s,this.JQ=t.WV().nj(),this.wkt=!0,this.s0=!0,this.Skt=!1,this.bkt=!1,this.vkt=!1,this.Mkt=!1,this.XL=zx.Hn(zx.kw.BF,t.$$().I$().XQ(),{EF:(t,s)=>{const i=s.jL(),e=i.c$();t.DM(e.ZQ()),t.Hb(e.cH()),i.Bx(t),t.Hb(0)},PF:t=>{const s=t.UCt(),[i,e]=t.VCt();return{FL:s,DL:i,LL:e}},AF:t=>this.QQ(t)}),this.xkt=[],this.JLt=[],this.eM=!0,this.XLt=[],this.ZLt=[],this.rkt(t.$$().pM());for(let t=0,s=this.JQ.rj().length;t<s;++t)this.xkt.push(!0);this.Yq(),this.JQ.ekt(this)}qn(){this.JQ.nkt(this);for(const t of this.ZLt)t&&t.qn();zx.bh(this.ZLt),this.XL.qn(),this.XL=null,zx.bh(this.xkt),zx.bh(this.JLt),zx.bh(this.XLt),this.di=null,this.JQ=null}rkt(t){t.sb()&&(this.ZLt=this.JQ.rj().map((t=>{const s=t.RI();return s.hkt()>0?zx.Hn(zx.kw.okt,s):null})))}MDt(t){let s=0;for(const i of t)this.XLt.push(this.tkt(s,i)),++s;this.akt(),this.Yq()}tkt(t,s){this.xkt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=zx.Hn(zx.To);e.wa(s),i[t]=e}}return i}nOt(){for(const t of this.JQ.rj())this.XLt.push(t.gkt());this.akt()}Ex(){return this.Sx}nj(){return this.JQ}QL(){return this.z0(),this.XL}$$(){return this.di.$$()}Yq(){zx.bh(this.JLt);const t=this.ykt,s=this.JQ.rj(),i=this.JLt,e=this.xkt;let n=!0;for(let t=0,r=s.length;t<r;++t)if(e[t]){const e=s[t];i.push(e),e.RI().bM()||(n=!1)}this.eM=n,t.WLt(!!i.length),this.wkt=!0}z0(){const t=this.di,s=this.ykt,i=s.J0(),e=t.MW().hW(),n=0!==s.cj()||0!==s.f$().cj()||s.jg()<0||s.Kg()<0,r=t.zCt(),h=t.SM();(this.wkt||i!==this.s0||e!==this.Skt||n!==this.bkt||r!==this.vkt||h!==this.Mkt||this.XL.RD())&&(this.XL.OD(this.JLt.map((t=>t.RI())),{OF:this.JLt.map((t=>t.tk())),FF:!i||h,LF:e,kF:r,NF:n}),this.wkt=!1,this.s0=i,this.Skt=e,this.bkt=n,this.vkt=r,this.Mkt=h)}Y0(){return this.JLt}srt(t){return this.XLt[t]}QQ(t){return t<this.ZLt.length?this.ZLt[t]:this.XLt[t]}Xq(t,s){if(t<0||t>=this.XLt.length)return null;const i=this.XLt[t];return s<0||s>=i.length?null:i[s]}Zq(t,s,i){if(t<0||t>=this.XLt.length)return!1;const e=this.XLt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof zx.To){if(n.Ho(i))return!1;n.ko(i)}else{if(n===i)return!1;e[s]=i}return t<this.ZLt.length&&this.ZLt[t].ckt(s,i),!0}akt(){const t=this.XLt,s=this.ZLt;for(let i=0,e=s.length;i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.ckt(t,n[t])}}bM(){return this.eM}Tkt(){return this.JLt.some((t=>t.RI().xM()))}zq(t){return this.xkt[t]}Jq(t,s){this.xkt[t]=!!s}rj(){return this.JQ.rj()}b3(){return this.JQ.rj().map((t=>({name:t.Ec(),active:this.xkt[t.tk()],params:zx.YQ.pkt(this.XLt[t.tk()])})))}v3(t){for(const s of t){const t=this.JQ.irt(s.name);t&&(this.xkt[t.tk()]=s.active,this.XLt[t.tk()]=zx.YQ.mkt(s.params))}this.Yq(),this.akt()}}}{const Jx=self._s,Yx=[],Xx=[],Zx=[],Kx=Jx.Hn(Jx.au),Qx=Jx.Hn(Jx.au),tT=Jx.Hn(Jx.Cl),sT=Jx.Hn(Jx.Rect),iT=Jx.Hn(Jx.Rect);let eT=null,nT=null,rT=null;Jx.Gkt=class extends Jx.Vn{constructor(t){super(),this.Nc=t,this.Ikt=0,this._kt=0,this.Ckt=[],this.Ekt=0,this.Pkt=0,this.Akt=0,this.Rkt=0,this.Okt=new self.nB(this)}qn(){this.Nc=null}$$(){return this.Nc}ak(){return this.Okt}Fkt(){this.Pkt=this.Ekt,this.Ekt=0,this.Rkt=this.Akt,this.Akt=0}Dkt(){return this.Pkt}Lkt(){return this.Rkt}kkt(t,s){const i=t.c$(),e=s.c$();i&&e&&i.AH()&&e.AH()&&this.Ckt.push([t,s])}bGt(t,s,i){for(const[e,n]of this.Ckt){let r=null;if(t===e)r=n;else{if(t!==n)continue;r=e}r.EGt(s)&&(i.includes(r)||i.push(r))}}vGt(t,s){if(!this.Ckt.length)return!1;for(const[i,e]of this.Ckt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}Nkt(){Jx.bh(this.Ckt)}hB(t,s){if(!t||!s||t===s)return!1;const i=t.c$(),e=s.c$();if(!i.AH()||!e.AH())return!1;this.Ekt++;const n=i.f$(),r=e.f$();return n.j1(r)?this.$kt(i,e):this.Bkt(i,e)}$kt(t,s){if(!t.pH().Ml(s.pH()))return!1;if(this.Akt++,!t.gH().tu(s.gH()))return!1;if(t.fOt()&&s.fOt())return!1;if(t.fOt())return this.Wkt(t,s);if(s.fOt())return this.Wkt(s,t);if(!t.CLt()&&!s.CLt())return!0;const i=t.ELt(),e=s.ELt();return i.vu(e,s.HM()-t.HM(),s.JM()-t.JM())}Bkt(t,s){const i=t.fOt(),e=s.fOt();if(i&&!e)return this.jkt(t,s);if(e&&!i)return this.jkt(s,t);if(e||i)return!1;{const i=t.f$(),e=s.f$();Kx.S(t.ELt()),Qx.S(s.ELt());const n=Kx.du();for(let s=0,e=n.length;s<e;s+=2){const e=s+1,r=n[s],h=n[e],[o,a]=i.OV(r+t.HM(),h+t.JM());n[s]=o,n[e]=a}const r=Qx.du();for(let t=0,i=r.length;t<i;t+=2){const i=t+1,n=r[t],h=r[i],[o,a]=e.OV(n+s.HM(),h+s.JM());r[t]=o,r[i]=a}return Kx.yu(),Qx.yu(),this.Akt++,Kx.vu(Qx,0,0)}}jkt(t,s){const i=t.f$(),e=s.f$();eT||(eT=Jx.Hn(Jx.au)),nT||(nT=Jx.Hn(Jx.Rect)),rT||(rT=Jx.Hn(Jx.Cl));const n=s.HM(),r=s.JM(),[h,o]=e.OV(n,r),[a,l]=i.AV(h,o),u=a-n,c=l-r;if(nT.S(s.pH()),nT.offset(u,c),!t.pH().Ml(nT))return!1;if(rT.S(s.gH()),rT.offset(u,c),this.Akt++,!t.gH().tu(rT))return!1;eT.S(s.ELt());const f=eT.du();for(let t=0,s=f.length;t<s;t+=2){const s=t+1;f[t]+=u,f[s]+=c}return eT.yu(),this.Wkt(t,s,a,l,eT,nT,rT)}Wkt(t,s,i,e,n,r,h){const o=void 0!==r?r:s.pH(),a=t.HM(),l=t.JM(),u=t.nJ().Aq(),c=void 0!==i?i:s.HM(),f=void 0!==e?e:s.JM(),d=s.CLt(),p=void 0!==h?h:s.gH(),m=Xx;u.Vkt(o,m);for(let t=0,i=m.length;t<i;++t){const i=m[t],e=i.Ukt();if(this.Ekt++,o.xl(e,a,l)&&(tT.Yl(e),tT.offset(a,l),tT.tu(p)))if(d){const t=void 0!==n?n:s.ELt();let r=c,h=f;void 0!==n&&(r=s.HM(),h=s.JM());const o=i.Hkt();if(o){if(this.Akt++,o.vu(t,r-(a+e.Ka()),h-(l+e.Qa())))return Jx.bh(m),!0}else if(Kx.Su(tT,0,0),Kx.vu(t,r,h))return Jx.bh(m),!0}else{const t=i.Hkt();if(!t)return Jx.bh(m),!0;if(Kx.Su(p,0,0),t.vu(Kx,-(a+e.Ka()),-(l+e.Qa())))return Jx.bh(m),!0}}return Jx.bh(m),!1}qkt(t,s,i){const e=t.DW(),n=this.Nc.qk();if(!n)throw new Error("cannot call outside event");const r=n.upt(),h=new Jx.zkt;if(e.zdt()){i||(e.tpt(!1),Jx.bh(e.spt())),r&&Jx.bh(e.ipt());for(const n of t.FW()){const t=n.c$(),o=t.f$();let a=!1;if(h.Zj(o)&&t.wH()&&(a=s.some((([s,i])=>{const[e,n]=h.AV(o,s,i,t.cH());return t.OH(e,n)}))),a){if(i)return!1;e.Kdt(n)}else r&&e.Qdt(n)}}else{let t,o=!1;r&&!n.QSt(this.Nc.sgt())?this.Nc.xTt()&&!e.ipt().length&&e.spt().length?t=e.spt():(t=e.ipt(),o=!0):t=e.spt();let a=0;for(let n=0,l=t.length;n<l;++n){const l=t[n],u=l.c$(),c=u.f$();let f=!1;if(h.Zj(c)&&u.wH()&&(f=s.some((([t,s])=>{const[i,e]=h.AV(c,t,s,u.cH());return u.OH(i,e)}))),f){if(i)return!1;o?e.Kdt(l):t[a++]=l}else o?t[a++]=l:r&&e.Qdt(l)}i||(t.length=a)}return t.Fbt(),h.qn(),!!i||e.Jdt()}Jkt(t,s){if(!t)return!0;for(const i of s.PRt())if(!t.j1(i))return!1;return!0}MTt(t,s,i,e){if(s.k0())for(const n of s.tj())this.Jkt(t,n)?(n._Rt(),n.GRt().ZK(i,e)):Jx.On(e,n.FW());else this.Jkt(t,s)?(s._Rt(),s.GRt().ZK(i,e)):Jx.On(e,s.FW())}gB(t,s,i,e){for(const n of s)this.MTt(t,n,i,e)}Ykt(t,s,i){const e=this.Nc.JEt();e&&this.gB(t,e.i8(),s,i)}Xkt(t,s,i){const e=this.Nc.YEt();e&&this.gB(t,e.i8(),s,i)}pLt(t,s){return t.mOt()&&(!s||s.c$().pLt(t.Cxt().get("solidTags")))}lB(t){const s=t.c$();this.Ykt(s.f$(),s.pH(),Yx);for(const s of Yx)if(this.pLt(s,t)&&this.hB(t,s))return Jx.bh(Yx),s;return Jx.bh(Yx),null}Zkt(t,s){this.Ykt(null,t,Yx);for(const i of Yx)if(this.pLt(i,s)&&this.Kkt(t,i))return Jx.bh(Yx),i;return Jx.bh(Yx),null}Qkt(t,s){let i=null;s&&(i=Zx,Jx.bh(i));const e=t.c$();this.Xkt(e.f$(),e.pH(),Yx);for(const e of Yx)if(e.yOt()&&this.hB(t,e)){if(!s)return Jx.bh(Yx),e;i.push(e)}return Jx.bh(Yx),i}tNt(t,s,i,e,n){e=e||50;const r=t.c$(),h=r.HM(),o=r.JM();for(let a=0;a<e;++a)if(r.QU(h+s*a,o+i*a),r.KU(),!this.hB(t,n))return!0;return r.QU(h,o),r.KU(),!1}sNt(t,s,i,e,n,r){e=e||50;const h=t.c$(),o=h.HM(),a=h.JM();let l=null,u=null;for(let c=0;c<e;++c)if(h.QU(o+s*c,a+i*c),h.KU(),!this.hB(t,l))if(l=this.lB(t),l)u=l;else if(n&&(l=r?this.hB(t,r)?r:null:this.Qkt(t),l&&(u=l)),!l)return u&&this.iNt(t,s,i,u,16,!0),!0;return h.QU(o,a),h.KU(),!1}eNt(t,s,i,e){e=e||50;const n=t.c$(),r=n.HM(),h=n.JM();let o=null,a=null;for(let l=0;l<e;++l)for(let e=0;e<2;++e){const u=2*e-1;if(n.QU(r+s*l*u,h+i*l*u),n.KU(),!this.hB(t,o)){if(o=this.lB(t),!o)return a&&this.iNt(t,s*u,i*u,a,16,!0),!0;a=o}}return n.QU(r,h),n.KU(),!1}iNt(t,s,i,e,n,r){let h=2,o=!1,a=!1;const l=t.c$();let u=l.HM(),c=l.JM();for(;h<=n;){const n=1/h;h*=2,l.sH(s*n*(o?1:-1),i*n*(o?1:-1)),l.KU(),this.hB(t,e)||r&&this.lB(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.HM(),c=l.JM())}a&&(l.QU(u,c),l.KU())}nNt(t,s=100){let i=0;const e=t.c$(),n=e.HM(),r=e.JM();let h=0,o=this.lB(t);if(!o)return!0;for(;i<=s;){let s=0,a=0;switch(h){case 0:s=0,a=-1,i++;break;case 1:s=1,a=-1;break;case 2:s=1,a=0;break;case 3:s=1,a=1;break;case 4:s=0,a=1;break;case 5:s=-1,a=1;break;case 6:s=-1,a=0;break;case 7:s=-1,a=-1}if(h=(h+1)%8,e.QU(Math.floor(n+s*i),Math.floor(r+a*i)),e.KU(),!this.hB(t,o)&&(o=this.lB(t),!o))return!0}return e.QU(n,r),e.KU(),!1}rNt(t,s,i,e){const n=t.c$(),r=n.HM(),h=n.JM(),o=Math.max(10,Jx.er(s,i,r,h)),a=Jx.rr(s,i,r,h),l=e||this.lB(t);if(!l)return Jx.Kn(a+Math.PI);let u=l,c=0,f=0;const d=Jx.Qn(5);let p;for(p=1;p<36;++p){const r=a-p*d;if(n.QU(s+Math.cos(r)*o,i+Math.sin(r)*o),n.KU(),!this.hB(t,u)&&(u=e?null:this.lB(t),!u)){c=r;break}}for(36===p&&(c=Jx.Kn(a+Math.PI)),u=l,p=1;p<36;++p){const r=a+p*d;if(n.QU(s+Math.cos(r)*o,i+Math.sin(r)*o),n.KU(),!this.hB(t,u)&&(u=e?null:this.lB(t),!u)){f=r;break}}if(36===p&&(f=Jx.Kn(a+Math.PI)),n.QU(r,h),n.KU(),f===c)return f;const m=Jx.hr(f,c)/2;let g;g=Jx.lr(f,c)?Jx.Kn(c+m+Math.PI):Jx.Kn(f+m);const y=Math.cos(a),w=Math.sin(a),S=Math.cos(g),b=Math.sin(g),v=y*S+w*b,M=y-2*v*S,x=w-2*v*b;return Jx.rr(0,0,M,x)}hNt(t,s,i,e,n){if(!n)return!1;const r=n.c$();return!!r.AH()&&(this.Ekt++,sT.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!!r.pH().Ml(sT)&&(n.fOt()?this.oNt(t,s,i,e,n,r):(this.Akt++,!!r.gH().Ql(t,s,i,e)&&(!r.CLt()||r.ELt().Ql(r.HM(),r.JM(),t,s,i,e)))))}oNt(t,s,i,e,n,r){const h=r.HM(),o=r.JM(),a=n.Aq(),l=Xx;iT.set(t,s,i,e),iT.normalize(),a.Vkt(iT,l);for(let n=0,r=l.length;n<r;++n){const r=l[n],a=r.Ukt();if(this.Ekt++,sT.xl(a,h,o)&&(tT.Yl(a),tT.offset(h,o),tT.Ql(t,s,i,e))){const n=r.Hkt();if(!n)return Jx.bh(l),!0;if(this.Akt++,n.Ql(h+a.Ka(),o+a.Qa(),t,s,i,e))return Jx.bh(l),!0}}return Jx.bh(l),!1}Kkt(t,s){if(!s)return!1;const i=s.c$();if(!i.AH())return!1;if(this.Ekt++,!i.pH().Ml(t))return!1;if(s.fOt())return this.aNt(t,s,i);if(this.Akt++,tT.Yl(t),!i.gH().tu(tT))return!1;if(!i.CLt())return!0;const e=Kx;e.Yl(t,i.HM(),i.JM());const n=i.ELt();return e.vu(n,0,0)}aNt(t,s,i){const e=i.HM(),n=i.JM(),r=s.Aq(),h=Xx;r.Vkt(t,h);for(let s=0,i=h.length;s<i;++s){const i=h[s],r=i.Ukt();if(this.Ekt++,t.xl(r,e,n)){const s=i.Hkt();if(!s)return Jx.bh(h),!0;if(this.Akt++,Kx.Yl(t,0,0),s.vu(Kx,-(e+r.Ka()),-(n+r.Qa())))return Jx.bh(h),!0}}return Jx.bh(h),!1}lNt(t,s){if(!t)return;const i=t.c$();i.AH()&&(this.Ekt++,i.pH().Ml(s.rect)&&(t.fOt()?this.uNt(t,i,s):(this.Akt++,i.CLt()?s.cNt(t,i.HM(),i.JM(),i.ELt()):s.fNt(t,i.gH()))))}uNt(t,s,i){const e=s.HM(),n=s.JM(),r=Xx;t.Aq().Vkt(i.rect,r);for(let h=0,o=r.length;h<o;h++){const o=r[h],a=o.Ukt();if(this.Ekt++,i.rect.xl(a,e,n)){const r=o.Hkt();this.Akt++,r?i.cNt(t,e+a.Ka(),n+a.Qa(),r):i.dNt(t,s.HM(),s.JM(),a)}}Jx.bh(r)}cB(t,s){if(t===this.Ikt&&s===this._kt)return;this.Ikt=t,this._kt=s;const i=this.Nc.L0();for(const e of i)if(e.KB()){for(const t of e.OW())t.c$().fLt();e.GRt().pNt(t,s),e.IRt();for(const t of e.OW()){const s=t.c$();s.BLt(),s.CRt()}}}dB(){return[this.Ikt,this._kt]}mNt(t,s){this.Ikt=t,this._kt=s}}}{const hT=self._s;hT.eAt=class extends hT.Vn{constructor(t,s){super(),this.UK=t,this.HK=s,this.qK=hT.Hn(hT._u)}qn(){this.qK.qn(),this.qK=null}pNt(t,s){if(!this.qK.Pu())throw new Error("grid not empty");this.UK=t,this.HK=s}zK(t,s,i){let e=this.qK.qs(t,s);return e||(i?(e=hT.Hn(hT.gNt,this,t,s),this.qK.Set(t,s,e),e):null)}JK(t){const s=Math.floor(t/this.UK);return isFinite(s)?s:0}YK(t){const s=Math.floor(t/this.HK);return isFinite(s)?s:0}XK(t,s,i){if(s)for(let e=s.Ka(),n=s.tl();e<=n;++e)for(let n=s.Qa(),r=s.sl();n<=r;++n){if(i&&i.Tl(e,n))continue;const s=this.zK(e,n,!1);s&&(s.Zf(t),s.Pu()&&this.qK.Au(e,n))}if(i)for(let e=i.Ka(),n=i.tl();e<=n;++e)for(let n=i.Qa(),r=i.sl();n<=r;++n)s&&s.Tl(e,n)||this.zK(e,n,!0).BK(t)}ZK(t,s){let i=this.JK(t.Ka());const e=this.YK(t.Qa()),n=this.JK(t.tl()),r=this.YK(t.sl());if(isFinite(n)&&isFinite(r))for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this.zK(i,t,!1);e&&e.jK(s)}}}}{const oT=self._s;oT.gNt=class extends oT.Vn{constructor(t,s,i){super(),this.RK=t,this.Ea=s,this.Pa=i,this.FK=oT.Hn(oT.Du)}qn(){this.FK.qn(),this.FK=null,this.RK=null}Pu(){return this.FK.Pu()}BK(t){this.FK.$u(t)}Zf(t){this.FK.Au(t)}jK(t){oT.On(t,this.FK.Bu())}}}{const aT=self._s,lT=1e-6,uT=2;aT.yNt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new aT.Rect,this.wNt=2,this.SNt=null,this.bNt=0,this.vNt=0,this.MNt=0,this.xNt=0,this.TNt=0,this.vt=0,this.GNt=1,this.INt=0,this._Nt=1,this.CNt=0}ENt(){return this.wNt<1.000001}$f(){this.wNt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.wNt=2,this.SNt=null,this.bNt=0,this.vNt=0,this.MNt=0,this.xNt=0,this.TNt=0,this.vt=0,this.GNt=1,this.INt=0,this._Nt=1,this.CNt=0,this}PNt(){if(!1===this.ENt())return;const t=this.dx*this.wNt,s=this.dy*this.wNt,i=aT.sr(t,s),e=t/i,n=s/i;this.vt=i-lT,this.xNt=this.x1+e*this.vt,this.TNt=this.y1+n*this.vt,this.bNt=Math.atan2(this.MNt,this.vNt)+Math.PI/2,this.GNt=Math.cos(this.bNt),this.INt=Math.sin(this.bNt);const r=e*this.GNt+n*this.INt;if(this._Nt=e-2*this.GNt*r,this.CNt=n-2*this.INt*r,r>0){const t=Math.PI;this.bNt=aT.Kn(this.bNt+t),this.GNt=-this.GNt,this.INt=-this.INt}}ANt(t,s,i,e,n){const r=aT.Jr(this.x1,this.y1,this.x2,this.y2,s,i,e,n);r>=0&&r<this.wNt&&(this.wNt=r,this.SNt=t.tU(),this.vNt=s-e,this.MNt=i-n)}dNt(t,s,i,e){const n=s+e.Ka(),r=s+e.tl(),h=i+e.Qa(),o=i+e.sl();this.ANt(t,n,h,r,h),this.ANt(t,r,h,r,o),this.ANt(t,r,o,n,o),this.ANt(t,n,o,n,h)}fNt(t,s){const i=s.$r(),e=s.Br(),n=s.Wr(),r=s.jr(),h=s.Vr(),o=s.Ur(),a=s.Hr(),l=s.qr();this.ANt(t,i,e,n,r),this.ANt(t,n,r,h,o),this.ANt(t,h,o,a,l),this.ANt(t,a,l,i,e)}cNt(t,s,i,e){const n=e.du();for(let e=0,r=n.length;e<r;e+=2){const h=(e+2)%r,o=n[e]+s,a=n[e+1]+i,l=n[h]+s,u=n[h+1]+i;this.ANt(t,o,a,l,u)}}}}{const cT=self._s;cT.zkt=class{constructor(){this.RNt=new Map}qn(){for(const t of this.RNt.values())t.ONt.Eu();this.RNt.clear()}FNt(t){let s=this.RNt.get(t);return void 0===s&&(s={Xj:null,ONt:new cT._u},this.RNt.set(t,s)),s}Zj(t){const s=this.FNt(t);return null===s.Xj&&(s.Xj=t.eV()),s.Xj}AV(t,s,i,e){if(0!==e)return t.AV(s,i,e);const n=this.FNt(t);let r=n.ONt.qs(s,i);return void 0===r&&(r=t.AV(s,i,e),n.ONt.Set(s,i,r)),r}}}{const fT=self._s,dT=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),pT=new Set(["high","low"]),mT=self.ls,gT=mT.ds,yT=mT.ws,wT=gT.create(),ST=300,bT=200,vT=120,MT=8,xT=fT.Hn(fT.Cl),TT=fT.Hn(fT.Rect),GT=3e3,IT=200,_T=300;fT.DNt=class extends fT.Vn{constructor(t){super(),this.Nc=t,this.LNt=[],this.kNt=!1,this.NNt=null,this.$Nt=null,this.BNt=null,this.WNt="high-performance",this.jNt=!1,this.VNt="auto",this.UNt=0,this.HNt=0,this.qNt="",this.zNt=0,this.JNt=0,this.YNt=0,this.XNt=0,this.ZNt=0,this.KNt=0,this.nS="normalized",this.QNt=0,this.t$t=1,this.s$t=1e4,this.FS=!0,this.i$t=0,this.cD=0,this.fD=0,this.e$t="letterbox-scale",this.n$t="letterbox-scale",this.r$t=0,this.h$t=0,this.o$t=gT.create(),this.a$t="high",this.l$t=this.a$t,this.u$t=!1,this.c$t=[],this.f$t=new Set,this.d$t=self.C3_Shaders,this.p$t=fT.Hn(fT.kw.mF,{cF:()=>[this.I2(),this._2()],fF:()=>this.m$t(),dF:t=>this.g$t(t),getTime:()=>this.$$().dN(),pF:()=>this.$$().w$()}),this.y$t=0,this.w$t=0,this.S$t=NaN,this.b$t=null,this.v$t=new Map,this.M$t=NaN,this.x$t=new Map,this.T$t="",this.G$t=1,this.I$t=fT.Hn(fT.Rect),this._$t="",this.C$t=null,this.E$t=null,this.P$t=0,this.A$t=0,this.R$t=-1,this.O$t=0,this.F$t=t=>this.O$t=t.progress,this.D$t=null,this.L$t={k$t:null,N$t:null,$$t:null},this.B$t=0,this.W$t=0,this.j$t=0,this.V$t="fade-in",this.U$t=null,this.H$t=new Promise((t=>this.U$t=t))}q$t(t){this.WNt=t}z$t(t){this.kNt=!!t}J$t(t){this.nS=t}Y$t(){return this.nS}X$t(t){this.QNt=t}Z$t(t,s){this.t$t=t,this.s$t=s}K$t(t){this.jNt=!!t}Q$t(t){this.VNt=t}async co(t){let s=t.canvas;this.LNt.push({canvas:s,tBt:null}),this.Nc.IU("runtime","window-resize",(t=>this.sBt(t))),this.Nc.IU("runtime","fullscreenchange",(t=>this.iBt(t))),this.Nc.IU("runtime","fullscreenerror",(t=>this.eBt(t))),s.addEventListener("webglcontextlost",(t=>this.nBt(t))),s.addEventListener("webglcontextrestored",(t=>this.rBt(t))),this.u$t=!!t.isFullscreen,this.qNt=t.cssDisplayMode;const i=navigator.gpu&&this.kNt;let e=!1;if(i)try{await this.hBt(!0)}catch(t){this.oBt("WebGPU",t),this.$Nt=null}if(!this.pM())try{await this.aBt(!0)}catch(t){this.oBt("WebGL",t),this.NNt=null}if(this.pM()||(e=!0),!this.pM()&&i)try{await this.hBt(!1)}catch(t){this.oBt("WebGPU",t),this.$Nt=null}if(!this.pM())try{await this.aBt(!1)}catch(t){this.oBt("WebGL",t),this.NNt=null}const n=this.pM();if(!n)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");n.Nv(e),this.$Nt&&(this.$Nt.lBt=()=>this.uBt(),this.$Nt.cBt=()=>this.fBt()),"normalized"===this.nS?n.ZS():(n.KS(),n.YS(this.QNt)),this.TP(t.windowInnerWidth,t.windowInnerHeight,!0),await this.rkt()}oBt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async hBt(t){const s={Zw:this.t$t,Kw:this.s$t};let i=!0;"no"===this.VNt?i=!1:"auto"===this.VNt&&(i=fT.Ks.hi);const e={powerPreference:this.WNt,depth:this.Nc._1(),failIfMajorPerformanceCaveat:t,dBt:this.Nc.L2(),pBt:this.Nc.mBt(),OA:this.Nc.gBt(),yBt:i};this.$Nt=fT.Hn(fT.kw.wBt,s),await this.$Nt.AG(this.LNt[0].canvas,e)}async aBt(t){const s={alpha:!0,powerPreference:this.WNt,RA:"xbox-uwp-webview2"!==this.Nc.MB(),depth:this.Nc._1(),OA:this.Nc.gBt(),failIfMajorPerformanceCaveat:t,Zw:this.t$t,Kw:this.s$t};this.jNt&&(s.FA=1),this.NNt=fT.Hn(fT.kw.kA,this.LNt[0].canvas,s),await this.NNt.$S()}async SBt(){if(this.d$t){const t=[];for(const[s,i]of Object.entries(this.d$t)){i.src=i.bBt;const e=fT.kw.vBt.QI(this.$Nt.MBt());t.push(this.$Nt.BR(Object.assign({CG:e,name:s},i)))}await Promise.all(t)}}async xBt(){if(this.d$t){const t=[];for(const[s,i]of Object.entries(this.d$t)){let e;if(i.TBt&&this.NNt.yT()>=2)i.src=i.TBt,e=fT.kw.IG.t_();else{if(!i.GBt)throw new Error(`shader '${s}' does not support WebGL 1`);i.src=i.GBt,e=fT.kw.IG.QI()}t.push(this.NNt.BR(Object.assign({CG:e,name:s},i)))}await Promise.all(t),this.NNt.WR(),this.NNt.lb()}this.NNt.tF()&&(this.b$t=fT.Hn(fT.kw.MA,this.NNt))}async rkt(){this.$Nt?await this.SBt():this.NNt&&await this.xBt();const t=this.pM();t.Lv(this.FS),t.tF()&&(this.S$t=0);for(const s of this.Nc.IBt()){for(const i of s.rj())i.rkt(t);s.rkt(t),s.Yq()}this.BNt=new self.jY(this.Nc,t)}qn(){this.Nc=null,this.NNt=null,this.LNt.length=0}Tk(){return this.Nc.Tk()}sBt(t){const s=this.Nc;if(s._Bt())return;const i=t.devicePixelRatio;this.Tk()&&(self.devicePixelRatio=i),s.CBt(i),this.u$t=!!t.isFullscreen,this.qNt=t.cssDisplayMode,this.TP(t.innerWidth,t.innerHeight),s.w$();const e=new fT.Event("window-resize");e.data=t,s.wf().Cf(e);const n=new fT.Event("resize");n.EBt=this.OB(),n.PBt=this.LB(),n.ABt=this.NB(),n.RBt=this.BB(),s.YZ(n),this.Nc.l$()?.c3(),s.AU()&&(s.jgt()||self.RU.OBt())&&s.VD()}iBt(t){this.u$t=!!t.isFullscreen,this.TP(t.innerWidth,t.innerHeight,!0),this.Nc.w$()}eBt(t){this.u$t=!!t.isFullscreen,this.TP(t.innerWidth,t.innerHeight,!0),this.Nc.w$()}TP(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.UNt===t&&this.HNt===s&&!i)return;this.UNt=t,this.HNt=s;const e=this.FBt();"letterbox-scale"===e?this.DBt(t,s):"letterbox-integer-scale"===e?this.LBt(t,s):"off"===e?this.kBt(t,s):this.NBt(t,s),this.$Bt(e);for(const{canvas:t}of this.LNt)t.width=this.YNt,t.height=this.XNt;this.Nc.Wc("canvas","update-size",{marginLeft:this.ZNt,marginTop:this.KNt,styleWidth:this.zNt,styleHeight:this.JNt,displayScale:this.JJ()});const n=this.pM();n.TP(this.YNt,this.XNt,!0);for(const t of this.c$t)n.JO(t);fT.bh(this.c$t),this.BBt();const r=this.Nc.qN();r.e6(),r.n6()}BBt(){this.pM().tb(this.o$t,this.I2()/this._2())}C2(){return this.o$t}DBt(t,s){const i=this.Nc.WB(),e=this.Nc.Ik(),n=this.Nc.Ck(),r=e/n;if(t/s>r){const i=s*r;this.zNt=Math.round(i),this.JNt=s,this.ZNt=Math.floor((t-this.zNt)/2),this.KNt=0}else{const i=t/r;this.zNt=t,this.JNt=Math.round(i),this.ZNt=0,this.KNt=Math.floor((s-this.JNt)/2)}this.YNt=Math.round(this.zNt*i),this.XNt=Math.round(this.JNt*i),this.Nc.WBt(e,n)}LBt(t,s){const i=this.Nc.WB();1!==i&&(t+=1,s+=1);const e=this.Nc.Ik(),n=this.Nc.Ck(),r=e/n;let h;h=t/s>r?s*r*i/e:t/r*i/n,h>1?h=Math.floor(h):h<1&&(h=1/Math.ceil(1/h)),this.YNt=Math.round(e*h),this.XNt=Math.round(n*h),this.zNt=this.YNt/i,this.JNt=this.XNt/i,this.ZNt=Math.max(Math.floor((t-this.zNt)/2),0),this.KNt=Math.max(Math.floor((s-this.JNt)/2),0),this.Nc.WBt(e,n)}NBt(t,s){const i=this.Nc.WB();this.zNt=t,this.JNt=s,this.YNt=Math.round(this.zNt*i),this.XNt=Math.round(this.JNt*i),this.ZNt=0,this.KNt=0;const e=this.JJ();this.Nc.WBt(this.zNt/e,this.JNt/e)}kBt(t,s){const i=this.Nc.WB();this.zNt=this.Nc.m1(),this.JNt=this.Nc.g1(),this.YNt=Math.round(this.zNt*i),this.XNt=Math.round(this.JNt*i),this.jBt()?(this.ZNt=Math.floor((t-this.zNt)/2),this.KNt=Math.floor((s-this.JNt)/2)):(this.ZNt=0,this.KNt=0),this.Nc.WBt(this.Nc.m1(),this.Nc.g1())}$Bt(t){if("high"===this.a$t)this.cD=this.YNt,this.fD=this.XNt,this.l$t="high";else{let s,i;if("off"===this.FBt()?(s=this.Nc.m1(),i=this.Nc.g1()):(s=this.Nc.Ik(),i=this.Nc.Ck()),this.YNt<s||this.XNt<i)this.cD=this.YNt,this.fD=this.XNt,this.l$t="high";else if(this.cD=s,this.fD=i,this.l$t="low","scale-inner"===t){const t=s/i,e=this.UNt/this.HNt;e<t?this.cD=this.fD*e:e>t&&(this.fD=this.cD/e)}else if("scale-outer"===t){const t=s/i,e=this.UNt/this.HNt;e>t?this.cD=this.fD*e:e<t&&(this.fD=this.cD/e)}}}$$(){return this.Nc}VBt(){return this.LNt[0].canvas}XQ(){return this.p$t}jBt(){return this.u$t}UBt(){return this.qNt}HBt(t){if(!dT.has(t))throw new Error("invalid fullscreen mode");this.e$t=t;const s=this.Nc.qN();s.e6(),s.n6()}qJ(){return this.e$t}qBt(t){if(!dT.has(t))throw new Error("invalid fullscreen mode");this.n$t=t;const s=this.Nc.qN();s.e6(),s.n6()}zBt(){return this.n$t}FBt(){return this.jBt()?this.zBt():this.qJ()}JBt(t){if(!pT.has(t))throw new Error("invalid fullscreen scaling quality");this.a$t=t,this.Nc.qN().e6()}YBt(){return this.a$t}N2(){return this.l$t}static XBt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}OJ(){return this.UNt}FJ(){return this.HNt}I2(){return this.cD}_2(){return this.fD}Lv(t){this.FS=!!t}ZBt(t){this.i$t=t}IK(){return this.i$t}KBt(){return this.pM().QP()}nBt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.c$t=[],this.f$t.clear(),this.p$t.LM(),this.NNt.LM(),this.Nc.j5()}uBt(){console.log("[Construct] WebGPU device lost"),this.c$t=[],this.f$t.clear(),this.p$t.LM(),this.Nc.j5()}async rBt(t){await this.NNt.kM(),await this.rkt(),await this.Nc.QBt(),console.log("[Construct] WebGL context restored")}async fBt(){await this.rkt(),await this.Nc.QBt(),console.log("[Construct] WebGPU device restored")}tWt(){return this.NNt}sWt(){return this.$Nt}pM(){return this.$Nt||this.NNt}tRt(){return this.BNt}GB(){let t="";return t=this.Nc.sWt()?"webgpu":"webgl"+this.Nc.tWt().yT(),this.Nc.pM().$v()&&(t+="-software"),t}_B(){return this.Nc.sWt()?this.Nc.sWt().iWt():this.Nc.tWt().oF()}$V(){return"low"===this.l$t?1/this.Nc.WB():this.JJ()}JJ(){const t=this.FBt();if("off"===t||"crop"===t)return 1;const s=this.Nc.Ik(),i=this.Nc.Ck(),e=s/i,n=this.YNt/this.XNt;return"scale-inner"!==t&&n>e||"scale-inner"===t&&n<e?this.JNt/i:this.zNt/s}l3(){return"low"===this.N2()?1:this.JJ()}o3(){return"low"===this.N2()?1:this.Nc.WB()}eWt(t,s){this.r$t=t,this.h$t=s}_X(t,s,i,e=!0){s=s||this.cD,i=i||this.fD;const n=s/2+this.r$t,r=i/2+this.h$t;if(e){let e=this.C2();s===this.cD&&i===this.fD||(t.tb(wT,s/i),e=wT),t.VR(e)}const h=t.nb(n,r,t.WS(i),n,r,0,i);t.YR(h)}nWt(t,s=!0){const i=this.OB(),e=this.LB(),n=i/2,r=e/2;s&&t.VR(this.C2());const h=t.nb(n,r,t.WS(e),n,r,0,e);t.YR(h)}NB(){return this.YNt}BB(){return this.XNt}OB(){return this.zNt}LB(){return this.JNt}EB(){return this.ZNt}AB(){return this.KNt}T5(){return this.LNt.length}rWt(){return"undefined"!=typeof OffscreenCanvas&&this.VBt()instanceof OffscreenCanvas&&("Chromium"!==fT.Ks.ni||fT.Ks.ei>=124)}async z5(t,s=!1){if(t<1)throw new Error("invalid HTML layer count");if(this.LNt.length===t)return;const i={count:t,layersDomState:this.Nc.qN().VN().V0().filter((t=>t.tV())).map((t=>t.K1())),immediate:s,marginLeft:this.ZNt,marginTop:this.KNt,styleWidth:this.zNt,styleHeight:this.JNt};let e;if(e=this.Tk()?await this.Nc.b$("canvas","set-html-layer-count",i):self.c3_runtimeInterface._OnSetHTMLLayerCount(i),t<this.LNt.length)this.LNt.length=t;else for(const t of e.addedCanvases){t.width=this.YNt,t.height=this.XNt;const s=this.rWt()?"bitmaprenderer":"2d",i=t.getContext(s);if(!i)throw new Error(`failed to acquire '${s}' canvas context`);this.LNt.push({canvas:t,tBt:i})}this.Nc.w$()}L4(t){if(t>=this.LNt.length)return;const s=this.VBt(),i=this.LNt[t].tBt;this.rWt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}B2(t){t.depth=this.Nc._1();const s=this.c$t,i=s.findIndex((s=>s.bG(t)));let e;return-1!==i?(e=s[i],s.splice(i,1)):e=this.pM().VO(t),this.f$t.add(e),e}KQ(t){if(!this.f$t.has(t))throw new Error("render target not in use");this.f$t.delete(t),this.c$t.push(t)}m$t(){const t={Zx:this.Nc.Ek()};return"low"===this.N2()&&(t.width=this.I2(),t.height=this._2()),this.B2(t)}g$t(t){this.KQ(t)}*hWt(){for(const t of this.Nc.qN().t6())for(const s of t.bj()){const t=this.v$t.get(s);t&&(yield t)}}R2(t){if(!this.pM().tF())return null;let s=this.v$t.get(t);return s||(s={ZU:t,name:t.Ec(),oWt:fT.Hn(fT.kw.MA,this.NNt),aWt:0,lWt:0,uWt:0},this.v$t.set(t,s)),s.oWt}cWt(){const t=this.pM();if(t.tF()&&0===this.w$t){this.w$t=t.Fv(),this.M$t=NaN;for(const t of this.hWt())t.aWt=NaN}}fWt(){this.NNt&&this.NNt.tF()&&this.dWt(),this.$Nt&&this.$Nt.tF()&&this.pWt()}dWt(){if(isNaN(this.M$t)&&(this.M$t=this.b$t.EA(this.y$t,this.w$t),!isNaN(this.M$t))){if(this.Nc.AU())for(const t of this.hWt())if(t.aWt=t.oWt.EA(this.y$t,this.w$t),isNaN(t.aWt))return;if(this.b$t.PA(this.w$t),this.S$t=Math.min(this.M$t,1),this.Nc.AU()){const t=new Map;for(const s of this.hWt())s.oWt.PA(this.w$t),s.lWt=Math.min(s.aWt,1),t.set(s.ZU,s.lWt);for(const s of this.hWt()){const i=s.ZU,e=(t.get(i)||0)-i.Vj().reduce(((s,i)=>s+(t.get(i)||0)),0);s.uWt=fT.Zn(e,0,1)}const s=this.Nc.VN(),i=this.S$t-s.V0().reduce(((s,i)=>s+(t.get(i)||0)),0);self.RU.mWt(fT.Zn(i,0,1),this.S$t,[...this.hWt()])}this.y$t=this.w$t,this.w$t=0}}gWt(){return this.b$t}pWt(){if(0===this.w$t)return;for(let t=this.y$t;t<this.w$t;++t){const s=this.x$t.get(t);if(s&&!s.cA())return}const t=this.Nc.VN(),s=fT.xo(t.w5()+1,0);let i=0;for(let t=this.y$t;t<this.w$t;++t){const e=this.x$t.get(t);if(!e)continue;const n=e.fA();let r=BigInt(0),h=BigInt(0);const o=BigInt(0);for(let t=0,i=Math.min(s.length,n.length/2);t<i;++t){const i=n[2*t],e=n[2*t+1];i!==o&&(r===o||i<r)&&(r=i),e>h&&(h=e);const a=Number(e-i)/1e9;s[t]+=a}i+=Number(h-r)/1e9}if(this.S$t=fT.Zn(i,0,1),this.Nc.AU()){const i=t.bj(),e=new Map;for(let t=0,n=Math.min(i.length,s.length-1);t<n;++t){const n=s[t+1];e.set(i[t],n)}const n=[],r=new Map;for(const[t,s]of e){const i=[...t.Hj()].reduce(((t,s)=>t+(e.get(s)||0)),0);r.set(t,i),n.push({name:t.Ec(),uWt:fT.Zn(s,0,1),lWt:fT.Zn(i,0,1)})}const h=this.S$t-t.V0().reduce(((t,s)=>t+(r.get(s)||0)),0);self.RU.mWt(fT.Zn(h,0,1),this.S$t,n)}for(let t=this.y$t;t<this.w$t;++t)this.x$t.delete(t);this.y$t=this.w$t,this.w$t=0}yWt(t){this.x$t.set(this.$Nt.Fv(),t)}CN(){return this.S$t}_$(t,s,i,e,n,r){return this.T$t=t,this.G$t=s,this.I$t.Ua(i,e,n,r),this.C$t||(this.C$t=new Promise((t=>{this.E$t=t}))),this.C$t}wWt(){if(!this.T$t)return;let t=this.VBt();const s=this.I$t,i=fT.Zn(Math.floor(s.Ka()),0,t.width),e=fT.Zn(Math.floor(s.Qa()),0,t.height);let n=s.width();n=0===n?t.width-i:fT.Zn(Math.floor(n),0,t.width-i);let r=s.height();if(r=0===r?t.height-e:fT.Zn(Math.floor(r),0,t.height-e),(0!==i||0!==e||n!==t.width||r!==t.height)&&n>0&&r>0){const s=fT.co(n,r);s.getContext("2d").drawImage(t,i,e,n,r,0,0,n,r),t=s}fT.fo(t,this.T$t,this.G$t).then((t=>{this._$t&&URL.revokeObjectURL(this._$t),this._$t=URL.createObjectURL(t),this.C$t=null,this.E$t(t)})),this.T$t="",this.G$t=1}SWt(){return this._$t}bWt(t){t?this.P$t++:this.P$t--}vWt(){return this.P$t>0}MWt(t){const s=this.pM();if(2===t)this.D$t=fT.Hn(fT.kw.qv,this.pM()),this.D$t.tP("Arial"),this.D$t.sP(16),this.D$t.mP("center"),this.D$t.yP("center"),this.D$t.TP(300,200);else if(0===t){const t=this.Nc.xWt();t&&t.SX(s).catch((t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t)))}else 4===t&&(this.TWt("splash-images/splash-logo.svg").then((t=>{"done"===this.V$t?s.rG(t):this.L$t.k$t=t})).catch((t=>console.warn("Failed to load splash image: ",t))),this.GWt("splash-images/splash-poweredby-512.png").then((t=>{"done"===this.V$t?s.rG(t):this.L$t.N$t=t})).catch((t=>console.warn("Failed to load splash image: ",t))),this.GWt("splash-images/splash-website-512.png").then((t=>{"done"===this.V$t?s.rG(t):this.L$t.$$t=t})).catch((t=>console.warn("Failed to load splash image: ",t))))}async TWt(t){t=new URL(t,this.Nc.IWt()).toString();const s=await fT.no(t),i=await this.Nc._Wt(s,2048,2048);return await this.pM().jO(i,{sT:"high"})}async GWt(t){t=new URL(t,this.Nc.IWt()).toString();const s=await fT.no(t);return await this.pM().jO(s,{sT:"high"})}CWt(){this.Nc.Wc("runtime","hide-cordova-splash")}EWt(){this.A$t=Date.now(),this.Nc.wf().addEventListener("loadingprogress",this.F$t),this.R$t=requestAnimationFrame((()=>this.PWt())),3!==this.Nc.AWt()&&this.CWt()}async RWt(){const t=this.pM();this.O$t=1;const s=this.Nc.AWt();4===s&&await this.H$t,this.U$t=null,this.H$t=null,-1!==this.R$t&&(cancelAnimationFrame(this.R$t),this.R$t=-1),this.Nc.wf().removeEventListener("loadingprogress",this.F$t),this.F$t=null,this.D$t&&(this.D$t.qn(),this.D$t=null),this.Nc.OWt(),t.RO(),this.L$t.k$t&&(t.rG(this.L$t.k$t),this.L$t.k$t=null),this.L$t.N$t&&(t.rG(this.L$t.N$t),this.L$t.N$t=null),this.L$t.$$t&&(t.rG(this.L$t.$$t),this.L$t.$$t=null),t.AO(0,0,0,0),t.Rv(),this.V$t="done",this.y$t=t.Fv(),3===s&&this.CWt()}PWt(){if(-1===this.R$t)return;const t=this.pM();t.RO(),this.R$t=-1;const s=this.Nc.rk().JZ(),i=this.Nc.AWt();if(3!==i&&(this.nWt(t),t.AO(0,0,0,0),t.eO(),t.lb(),t.rO(null)),0===i)this.FWt(s);else if(1===i)this.DWt(s,120,0);else if(2===i)this.LWt(s);else if(3===i)fT.gh();else{if(4!==i)throw new Error("invalid loader style");this.kWt(s)}t.Rv(),this.R$t=requestAnimationFrame((()=>this.PWt()))}LWt(t){t?this.D$t.pP(1,0,0):this.D$t.pP(.6,.6,.6),this.D$t.jc(Math.round(100*this.O$t)+"%");const s=this.zNt/2,i=this.JNt/2;xT.kl(s-150,i-100,s+150,i+100);const e=this.pM();e.rO(this.D$t.cG()),e.ev(xT,this.D$t.sA())}DWt(t,s,i){const e=this.pM();e.gb(),t?e.sO(1,0,0,1):e.sO(.118,.565,1,1);const n=this.zNt/2,r=this.JNt/2,h=s/2;TT.Ua(n-h,r-4+i,Math.floor(s*this.O$t),8),e.Rect(TT),TT.Ua(n-h,r-4+i,s,8),TT.offset(-.5,-.5),TT.cl(.5,.5),e.sO(0,0,0,1),e.av(TT),TT.cl(1,1),e.sO(1,1,1,1),e.av(TT)}FWt(t){const s=this.pM(),i=this.Nc.xWt();if(!i)return void this.DWt(t,120,0);const e=i.cG();if(!e)return void this.DWt(t,120,0);const n=e.jg(),r=e.Kg(),h=this.zNt/2,o=this.JNt/2,a=n/2,l=r/2;xT.kl(h-a,o-l,h+a,o+l),s.rO(e),s.Cl(xT),this.DWt(t,n,l+16)}kWt(t){const s=this.pM(),i=this.L$t.k$t,e=this.L$t.N$t,n=this.L$t.$$t,r=Date.now();0===this.B$t&&(this.A$t=r);const h=this.Nc.NWt()||this.Nc.$Wt()&&!this.Nc.BWt(),o=h?0:200,a=h?0:3e3;let l=1;"fade-in"===this.V$t?l=Math.min((r-this.A$t)/300,1):"fade-out"===this.V$t&&(l=Math.max(1-(r-this.j$t)/300,0)),s.gb(),s.sO(.231*l,.251*l,.271*l,l),TT.set(0,0,this.zNt,this.JNt),s.Rect(TT);const u=Math.ceil(this.zNt),c=Math.ceil(this.JNt);let f,d;this.JNt>256?(s.sO(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),TT.Ua(0,.8*c-d/2,f,d),s.Rect(TT),t?s.sO(l,0,0,l):s.sO(.161*l,.953*l,.816*l,l),f=u*this.O$t,TT.Ua(.5*u-f/2,.8*c-d/2,f,d),s.Rect(TT),s.sO(l,l,l,l),s.lb(),e&&(f=1.5*fT.Zn(.22*c,105,.6*u),d=f/8,TT.Ua(.5*u-f/2,.2*c-d/2,f,d),s.rO(e),s.Rect(TT)),i&&(f=Math.min(.395*c,.95*u),d=f,TT.Ua(.5*u-f/2,.485*c-d/2,f,d),s.rO(i),s.Rect(TT)),n&&(f=1.5*fT.Zn(.22*c,105,.6*u),d=f/8,TT.Ua(.5*u-f/2,.868*c-d/2,f,d),s.rO(n),s.Rect(TT))):(s.sO(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),TT.Ua(0,.85*c-d/2,f,d),s.Rect(TT),t?s.sO(l,0,0,l):s.sO(.161*l,.953*l,.816*l,l),f=u*this.O$t,TT.Ua(.5*u-f/2,.85*c-d/2,f,d),s.Rect(TT),s.sO(l,l,l,l),s.lb(),i&&(f=.55*c,d=f,TT.Ua(.5*u-f/2,.45*c-d/2,f,d),s.rO(i),s.Rect(TT))),this.B$t++,"fade-in"===this.V$t&&r-this.A$t>=300&&this.B$t>=2&&(this.V$t="wait",this.W$t=r),"wait"===this.V$t&&r-this.W$t>=a&&this.O$t>=1&&(this.V$t="fade-out",this.j$t=r),("fade-out"===this.V$t&&r-this.j$t>=300+o||h&&this.O$t>=1&&r-this.A$t<500)&&this.U$t()}}}{const CT=self._s,ET=self.RU,PT=self.assert,AT=self.hY,RT={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""};let OT=!0;CT.WWt=class extends CT.Vn{constructor(t){t=Object.assign({},RT,t),super(),this.jWt=t.messagePort,this.VWt=t.runtimeBaseUrl,this.UWt=t.previewUrl,this.HWt=!!t.headless,this.qWt=!!t.hasDom,this.zWt=!!t.isInWorker,OT=t.ife,this.JWt=!!t.useAudio,this.YWt=t.exportType,this.XWt=t.isNWjs,this.JX=!!t.isiOSCordova,this.ZWt=!!t.isiOSWebView,this.KWt=!!t.isWindowsWebView2,this.QWt=!!t.isAnyWebView2Wrapper,this.tjt=!!t.isFBInstantAvailable,this.sjt=!("preview"!==this.YWt||!t.isDebug),this.ijt=this.sjt,this.ejt=this.sjt,this.njt=0,this.rjt=[],this.hjt=[],this.ojt=!1,this.ajt="",this.ljt="",this.ujt="",this.cjt="",this.fjt=0,this.djt=0,this.pjt=0,this.bD=self.devicePixelRatio,this.mjt=0,this.gjt=0,this.yjt=0,this.wjt=0,this.Sjt=0,this.bjt=!1,this.ww=!0,this.vjt=!1,this.Mjt=!1,this.xjt=!1,this.Tjt=null,this.fK=CT.Hn(CT.UX,this,t),this.I3=CT.Hn(CT.q4,this),this.fpt=CT.Hn(CT.lmt,this),this.Gjt=CT.Hn(CT.qB,this,t.wrapperComponentIds),this.Ijt=CT.Hn(CT.Gkt,this),this.v9=CT.Hn(CT.r6,this),this._jt=CT.Hn(CT.Rut,this),this.Cjt=CT.Hn(CT.Fut,this),this.Jut=CT.Hn(CT.jut,this),this.dw=CT.Hn(CT.tw,{ew:t=>this.Ejt(t),hw:t=>this.Pjt(t)}),this.Ajt=new Map,this.Rjt=[],this.Ojt=new Map,this.Fjt=new Map,this.Djt=0,this.Ljt=[],this.kjt=new Set,this.Njt=[],this.$jt=[],this.Bjt=new Map,this.Wjt=!1,this.jjt=!1,this.Vjt=0,this.Ujt=0,this.Hjt=new Map,this.qjt=new Set,this.zjt=new Set,this.Jjt=[],this.Yjt=[],this.Xjt=null,this.Zjt=!1,this.Kjt="vsync",this.lT="trilinear",this.Qjt=!1,this.tVt=!0,this.sVt=!1,this.iVt=!1,this.eVt=null,this.nVt={rVt:t=>{this.R$t=-1,this.hVt=-1,this.E8(t)},oVt:t=>{this.hVt=-1,this.E8(t,!1,"skip-render")},aVt:()=>{this.R$t=-1,this.VD()}},this.R$t=-1,this.hVt=-1,this.lVt=0,this.uVt=0,this.cVt=!1,this.fVt=!1,this.dVt=!1,this.pVt=!0,this.mVt=!0,this.gVt=!1,this.yVt=0,this.wVt=new CT.Ud(1),this.SVt=()=>Math.random(),this.bVt=0,this.vVt=0,this.MVt=0,this.xVt=0,this.TVt=0,this.QRt=1,this.GVt=1/30,this.IVt=0,this._Vt=CT.Hn(CT.Qf),this.CVt=CT.Hn(CT.Qf),this.EVt=CT.Hn(CT.Qf),this.PVt=new Map,this.AVt=-1,this.RVt=0,this.OVt=0,this.FVt=-1,this.DVt=0,this.LVt=0,this.kVt=0,this.NVt=!1,this.$Vt="",this.BVt=!1,this.WVt="",this.BU=null,this.jVt="",this.VVt=null,this.UVt=null,this.sAt=CT.Hn(CT.Event.wf),this.HVt=new Map,this.qVt=new Map,this.zVt=0,this.JVt=!1,this.YVt=!1,this.XVt=!1,this.ZVt=[],this.KVt={pretick:CT.Hn(CT.Event,"pretick",!1),tick:CT.Hn(CT.Event,"tick",!1),tick2:CT.Hn(CT.Event,"tick2",!1),instancecreate:CT.Hn(CT.Event,"instancecreate",!1),instancedestroy:CT.Hn(CT.Event,"instancedestroy",!1),beforelayoutchange:CT.Hn(CT.Event,"beforelayoutchange",!1),layoutchange:CT.Hn(CT.Event,"layoutchange",!1)},this.KVt.instancecreate.jq=null,this.KVt.instancedestroy.jq=null,this.r5=CT.Hn(CT.Event.wf),this.QVt=null;const s=(t,s)=>CT.ZRt.qLt(this,t,s);this.tUt=CT.Hn(CT.ld,s),this.sUt=CT.Hn(CT.ld,s),this.iUt=CT.Hn(CT.ld,s),this.eUt=CT.Hn(CT.nUt,this,t.jobScheduler),t.canvas&&(this.Xjt=CT.Hn(CT.DNt,this)),this.jWt.onmessage=t=>this._OnMessageFromDOM(t.data),this.IU("runtime","visibilitychange",(t=>this.rUt(t))),this.IU("runtime","wrapper-extension-message",(t=>this.hUt(t))),this.IU("runtime","get-remote-preview-status-info",(()=>this.oUt())),this.IU("runtime","js-invoke-function",(t=>this.kmt(t))),this.IU("runtime","go-to-last-error-script",self.goToLastErrorScript),this.IU("runtime","offline-audio-render-completed",(t=>this.aUt(t))),this.sAt.addEventListener("window-blur",(t=>this.lUt(t))),this.sAt.addEventListener("window-focus",(()=>this.uUt())),this.v9.N6(),this.Cjt.N6(),this.cUt=null,this.fUt=new WeakMap,this.dUt={keyboard:null,t$:null,s$:null,i$:null},this.pUt=new WeakMap,this.mUt=[]}static AG(t){return CT.Hn(CT.WWt,t)}qn(){CT.bh(this.Rjt),this.Ojt.clear(),this.Fjt.clear(),this.I3.qn(),this.I3=null,this.fpt.qn(),this.fpt=null,this.Gjt.qn(),this.Gjt=null,this.fK.qn(),this.fK=null,this.Ijt.qn(),this.Ijt=null,this.v9.qn(),this.v9=null,this._jt.qn(),this._jt=null,this.Cjt.qn(),this.Cjt=null,this.Jut.qn(),this.Jut=null,this.dw.qn(),this.dw=null,this.Xjt&&(this.Xjt.qn(),this.Xjt=null),this.sAt.qn(),this.sAt=null,this.gUt=null}_OnMessageFromDOM(t){const s=t.type;if("event"===s)this.yUt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.wUt(t)}}yUt(t){if(!this.XVt)return void this.ZVt.push(t);const s=t.component,i=t.handler,e=t.data,n=t.dispatchOpts,r=!(!n||!n.dispatchRuntimeEvent),h=!(!n||!n.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const t=new CT.Event(i);t.data=e,this.sAt.Cf(t)}if(h){const t=new CT.Event(i,!0);for(const[s,i]of Object.entries(e))t[s]=i;this.YZ(t)}}const a=this.HVt.get(s);if(!a)return void(r||h||console.warn(`[Runtime] No DOM event handlers for component '${s}'`));const l=a.get(i);if(!l)return void(r||h||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`));let u=null;try{u=l(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.SUt(o,!1,""+t))}null!==o&&(u&&u.then?u.then((t=>this.SUt(o,!0,t))).catch((t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.SUt(o,!1,""+t)})):this.SUt(o,!0,u))}SUt(t,s,i){this.jWt.postMessage({type:"result",responseId:t,isOk:s,result:i})}wUt(t){const s=t.responseId,i=t.isOk,e=t.result,n=this.qVt.get(s);i?n.resolve(e):n.reject(e),this.qVt.delete(s)}IU(t,s,i){let e=this.HVt.get(t);if(e||(e=new Map,this.HVt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}Wc(t,s,i,e){this.jWt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}b$(t,s,i,e){const n=this.zVt++,r=new Promise(((t,s)=>{this.qVt.set(n,{resolve:t,reject:s})}));return this.jWt.postMessage({type:"event",component:t,handler:s,data:i,responseId:n},e),r}yY(t,s,i,e=-1){this.Wc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}wY(t,s,i){const e=this.zVt++,n=new Promise(((t,s)=>{this.qVt.set(e,{resolve:t,reject:s})}));return this.yY(t,s,i,e),n}hUt(t){if(-1!==t.asyncId){const s=t.asyncId;this.qVt.get(s).resolve(t.params),this.qVt.delete(s)}else this.yUt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}UU(t,s,i){this.IU("wrapper-extension:"+t,s,i)}jU(t){return this.Gjt.jU(t)}bUt(t){if(!this.AU())throw new Error("not in debug mode");this.Wc("runtime","post-to-debugger",t)}async iOt(t){CT.GTt(this),this.AU()?await ET.iOt(this):self.RU&&self.RU.vUt(this);const s=await this.fK.eo("data.json");if(await this.MUt(s),await this.xUt(t),this.NWt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.tWt()){const t=this.tWt();console.info(`[C3 runtime] Hosted in ${this.Tk()?"worker":"DOM"}, rendering with WebGL ${t.yT()} [${t.oF()}]`)}else this.sWt()&&console.info(`[C3 runtime] Hosted in ${this.Tk()?"worker":"DOM"}, rendering with WebGPU [${this.sWt().iWt()}]`);this.pM().$v()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.XVt=!0;for(const t of this.ZVt)this.yUt(t);CT.bh(this.ZVt),this.Xjt&&this.Xjt.EWt();for(const s of t.runOnStartupFunctions)this.rjt.push(this.TUt(s));if(await Promise.all([this.fK.qZ(),...this.rjt]),CT.bh(this.rjt),!this.fK.JZ())return this.Xjt&&await this.Xjt.RWt(),await this.sAt.If(new CT.Event("beforeruntimestart")),await this.RO(),this.jWt.postMessage({type:"runtime-ready"}),this;this.Xjt&&this.Xjt.CWt()}async TUt(t){try{await t(this.cUt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async MUt(t){const s=t.project;this.ajt=s[0],this.ljt=s[16],this.ujt=s[31],this.cjt=s[38],this.fjt=s[36];const i=s[39]||"loading-logo.png";this.Qjt=!!s[9],this.djt=this.yjt=s[10],this.pjt=this.wjt=s[11],this.Ijt.mNt(this.djt,this.pjt),this.mjt=this.djt/2,this.gjt=this.pjt/2,this.Kjt=s[37],this.Zjt=!!s[40],this.lT=s[14],this.vjt=s[15],this.Mjt=s[42],this.xjt=s[17],this.bjt=!!s[18],this.Sjt=s[19],this.Ujt=s[21],this.sVt=s[22];const e=this.fK;if(e.bZ(s[45]),e.iK(s[7],s[25]),e.MZ(s[8]),e.xZ(s[32]),e.GZ(s[28]),e.KZ(s[29]),0===this.Sjt){let t="";t="flat"===e.z$()?e.IZ()+i:i,t&&(this.Tjt=e.kZ({url:t}))}this.Xjt&&(this.Xjt.HBt(CT.DNt.XBt(s[12])),this.Xjt.JBt(s[23]?"high":"low"),this.Xjt.Lv(0!==s[24]),this.Xjt.q$t(s[34]),this.Xjt.ZBt(s[41]),this.Xjt.z$t(s[13]),this.Xjt.J$t(s[30]),this.Xjt.Z$t(s[46],s[47]),this.Xjt.X$t(s[26]),this.Xjt.K$t(s[48]),this.Xjt.Q$t(s[50]));const n=s[43];n&&await this.GUt(n),this.IUt(),this.Gjt.BEt(),this.Jjt=self._Ut();const r=s[2];for(const t of r[1])this.Gjt.WEt(t);for(const t of r[0])this.Gjt.$Et(t);this.Jjt=self._Ut(),this.CUt(),this.Gjt.zEt();for(const t of s[3]){const s=CT.$ut.AG(this,this.Rjt.length,t);this.Rjt.push(s),this.Ojt.set(s.Ec().toLowerCase(),s),this.Fjt.set(s.U0(),s)}for(const t of s[4])this.Rjt[t[0]].$At(t);for(const t of s[27]){const s=t.map((t=>this.Rjt[t]));this.Ljt.push(CT.Hn(CT.BRt,this,s))}this.EUt();for(const t of this.Rjt)t.WAt();for(const t of s[5])this.I3.AG(t);const h=s[1];if(h){const t=this.I3.Y4(h);t&&this.I3.z4(t)}for(const t of s[35])this._jt.AG(t);for(const t of s[33])this.v9.AG(t);for(const t of s[44])this.Cjt.AG(t);this.Cjt.kut()||(this.Cjt.qn(),this.Cjt=null);for(const t of s[49])this.Jut.AG(t);this.Jut.qut()||(this.Jut.qn(),this.Jut=null);for(const t of s[6])this.fpt.AG(t);this.fpt.Bmt(),this.PUt(),CT.bh(this.Jjt),this.qW();let o="any";const a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.Wc("runtime","set-target-orientation",{targetOrientation:o})}async GUt(t){const s=t.format;"image-sequence"===s?this.eVt=new self.AUt(this,t):"image-sequence-gif"===s?this.eVt=new self.RUt(this,t):"webm"===s?this.eVt=new self.OUt(this,t):"mp4"===s&&(this.eVt=new self.FUt(this,t)),this.Kjt="unlimited-frame",this.Xjt.HBt("off"),this.bD=1,self.devicePixelRatio=1,await this.b$("runtime","set-exporting-to-video",{message:this.eVt.DUt(0),duration:this.eVt.yz()})}AWt(){return this.Sjt}_Bt(){return null!==this.eVt}LUt(){return this.eVt.yz()}kUt(){return this.eVt.NUt()}$Ut(){return this.eVt.iOt({width:this.Xjt.NB(),height:this.Xjt.BB()})}BUt(){const t=this.lVt/this.kUt();return this.eVt.WUt(this.Xjt.VBt(),t)}jUt(){this.eVt&&this.eVt.eet()}aUt(t){this.eVt.VUt(t)}UUt(){return this.eVt.Rv()}$Wt(){return this.tjt}Tw(){return this.ww}T$(t){this.rjt.push(t)}Y5(t){this.ojt=!!t}HUt(t){this.ojt&&this.hjt.push(t)}s4(){return this.hjt}RAt(){return this.Djt++}VAt(){return this.Djt}skt(t){this.kjt.add(t)}ikt(t){this.kjt.delete(t)}IBt(){return this.kjt}async xUt(t){this.Xjt&&(await this.Xjt.co(t),this.Xjt.MWt(this.Sjt))}async RO(){this.cVt=!0,this.bVt=Date.now();let t=null;const s=new Promise((s=>t=s));if(this.bjt){for(const t of this.Rjt)t.k0()||t.KAt()||!t.KB()||t.B_t();(async()=>{await this.fK.qZ(),await s,this.ww=!1,this.qUt()})()}else this.ww=!1;this.fK.zZ(),this.AU()&&ET.zUt(OT);for(const t of this.I3.YN())t.g4();this._Bt()&&await this.$Ut();const i=this.I3.J4();await i.R5(null,this.pM()),await i.V5(!0),this.RVt=performance.now(),t(),this.bjt||this.qUt(),(await this.b$("runtime","before-start-ticking")).isSuspended&&!this._Bt()?(this.yVt++,this.gVt=!0):this.E8()}qUt(){this.xU(CT.R$.A$.P$.JUt,null,null),this.Wc("runtime","register-sw")}Vbt(t){t=Math.floor(t);const s=this.Jjt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}CUt(){for(const t of self.YUt){const s=CT.Bh(Object.keys(t));this.Yjt.push(s)}}ugt(t){t=Math.floor(t);const s=this.Yjt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}XUt(){return this.qWt}ZUt(){return this.HWt}Tk(){return this.zWt}IWt(){return this.VWt}KUt(){return this.UWt}Bk(){return this.fpt}Qk(){return this.fpt.Qk()}tgt(){return this.fpt.tgt()}qk(){return this.fpt.qk()}sgt(){return this.fpt.sgt()}xTt(){return 0===this.tgt().Apt()}egt(){return this.fpt.egt()}ULt(){return this.Gjt}ZZ(){return this.Gjt.ZZ()}d0(t){if((t=Math.floor(t))<0||t>=this.Rjt.length)throw new RangeError("invalid index");return this.Rjt[t]}QUt(t){return this.Ojt.get(t.toLowerCase())||null}_Y(t){return this.Fjt.get(t)||null}krt(t){const s=CT.qB.dW(t);return s?s.yW():null}L0(){return this.Rjt}*tHt(){for(const t of this.Rjt)t.k0()||(yield*t.TW())}wf(){return this.sAt}Lk(){return this.r5}YZ(t){t.runtime=this.zB();const s=this.AU()&&!this.fpt.UW();s&&ET.j4(),this.r5.dispatchEvent(t),s&&ET.V4()}a4(t){return t.runtime=this.zB(),this.r5.If(t)}Ik(){return this.djt}Ck(){return this.pjt}sHt(t,s){if(this.djt===t&&this.pjt===s)return;this.djt=t,this.pjt=s;const i=this.qN();i.e6(),i.n6()}m1(){return this.yjt}g1(){return this.wjt}WBt(t,s){if(this.yjt===t&&this.wjt===s)return;this.yjt=t,this.wjt=s;const i=this.qN();i.e6(),i.n6()}CBt(t){this._Bt()||(this.bD=t)}WB(){return this.bD}w2(){return this.mjt}S2(){return this.gjt}I$(){return this.Xjt}I2(){return this.Xjt?this.Xjt.I2():this.yjt}_2(){return this.Xjt?this.Xjt._2():this.wjt}$V(){return this.Xjt?this.Xjt.$V():1}JJ(){return this.Xjt?this.Xjt.JJ():1}l3(){return this.Xjt?this.Xjt.l3():1}o3(){return this.Xjt?this.Xjt.o3():1}EB(){return this.Xjt?this.Xjt.EB():0}AB(){return this.Xjt?this.Xjt.AB():0}iHt(){return this.Xjt?this.Xjt.OB():0}eHt(){return this.Xjt?this.Xjt.LB():0}qJ(){return this.Xjt?this.Xjt.qJ():"off"}B2(t){return this.Xjt?this.Xjt.B2(t):null}KQ(t){this.Xjt&&this.Xjt.KQ(t)}L2(){return this.vjt}mBt(){return this.Mjt}gBt(){return this.xjt}CN(){return this.Xjt?this.Xjt.CN():NaN}dG(){return"nearest"!==this.Ek()}PN(){return this.Kjt}AN(t){this.Kjt!==t&&(this.Kjt=t,-1===this.R$t&&-1===this.hVt||(this.nHt(),this.rHt()))}Ek(){return this.lT}LAt(){return this.bjt}xWt(){return this.Tjt}OWt(){this.Tjt&&(this.Tjt.qE(),this.Tjt.qn(),this.Tjt=null)}qN(){return this.I3}VN(){return this.I3.VN()}ltt(){return this.v9}hHt(){return this._jt}ROt(){return this.Cjt}mct(){return this.Jut}rk(){return this.fK}kZ(t){return this.fK.kZ(t)}BW(t,s,i,e,n,r){if(r&&this.Cjt){if(t instanceof CT.$ut&&t.k0()){const h=t.tj(),o=Math.floor(this.jN()*h.length);return this.BW(h[o],s,i,e,n,r)}const h=this.Cjt.Nut(t,r);if(h){const t=this.M0(h,s,!1,i,e,!1,n,void 0,n);return this.Cjt.But(t,r),t}}return this.M0(t,s,!1,i,e,!1,n,void 0,n)}M0(t,s,i,e,n,r,h,o,a){let l=null,u=null;if(t instanceof CT.$ut){if(u=t,u.k0()){const t=u.tj();u=t[Math.floor(this.jN()*t.length)]}l=u.m0()}else l=t,u=this.d0(l[1]);const c=u.MW().KB();if(this.ww&&c&&!u.KAt())return null;const f=s;let d;c||(s=null),d=i&&!r&&l&&!this.Hjt.has(l[2])?l[2]:this.Ujt++;const p=l?l[0]:null,m=CT.Hn(CT.Instance,{runtime:this,objectType:u,ZU:s,sOt:p,rOt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.Hjt.set(d,m);let g=null;if(c&&(g=m.c$(),void 0!==e&&void 0!==n&&(g.qM(e),g.YM(n)),u.IRt(!0)),s&&(a||s.T0(m,!0),s.zN().F5(u)),this.Vjt++,u.KV()&&!i&&!r){const t=new Set;for(const s of u.P5().sj()){if(s===u)continue;const i=this.oHt(s,g,t);if(i){const t=this.M0(i,f,!1,g?g.HM():e,g?g.JM():n,!0,!1,void 0,a);m.d4(t)}else{const t=this.M0(s,f,!1,g?g.HM():e,g?g.JM():n,!0,!1,void 0,a);m.d4(t)}}for(const t of m.QV()){t.d4(m);for(const s of m.QV())t!==s&&t.d4(s)}}if(c&&!i&&h&&this.aHt(m,p,g,s,e,n,a),u.KV()&&!i&&!r&&h)for(const t of m.QV()){const i=t.c$();if(!i)continue;const e=t.MW(),n=t.WV().m0()[0];e.KB()?this.aHt(t,n,i,s,i.HM(),i.JM(),a):this.aHt(t,n,i,s,void 0,void 0,a)}if(!r&&h){void 0===e&&(e=p[0]),void 0===n&&(n=p[1]);const t=g.LH(),s=e-g.HM()+t.HM(),i=n-g.JM()+t.JM();t.QU(s,i)}u.vRt();const y=l?CT.Oh(l[5]):null,w=l?l[4].map((t=>CT.Oh(t))):null,S=c&&p&&p[13];if(S&&m.cOt(),m.XAt(y,w),S){const t=p[13];m.Aq().eCt(t[2],t[0],t[1])}this.$jt.push(m),this.Wjt=!0,this.AU()&&ET.lHt(m);const b=this.KVt.instancecreate;return b.jq=m,this.sAt.dispatchEvent(b),m}$Ft(t){const s=t[0],i=t[1],e=t[2],n=t[6];return n||this.I3.X4(s).f$(i).w0(e)}oHt(t,s,i){const e=s?.AOt()??[];for(const s of e){const e=this.$Ft(s),n=!!s[4],r=this.d0(e[1]);if(!i.has(e)&&t===r&&n)return i.add(e),e}}aHt(t,s,i,e,n,r,h){const o=i.aLt(),a=i.AOt();if(t.c$().lLt(o),!a)return;void 0===n&&(n=s[0]),void 0===r&&(r=s[1]);const l=new Set,u=s[0],c=s[1];for(const s of a){const i=s[0],o=s[1],a=s[2],f=s[3],d=!!s[4],p=s[5],m=s[6];let g;g=m||this.I3.X4(i).f$(o).w0(a);const y=this.d0(g[1]),w=t.FOt(y),S=l.has(y);if(w&&!S&&d){const s=t.DOt(y);s.c$().iOt(g[0]);const i=n+g[0][0]-u,e=r+g[0][1]-c;s.c$().QU(i,e),s.c$().lLt(p),t.UH(s,{YH:!!(1&f),ZH:!!(f>>1&1),QH:!!(f>>2&1),sq:!!(f>>3&1),eq:!!(f>>4&1),cq:!!(f>>5&1),rq:!!(f>>6&1),oq:!!(f>>7&1),lq:!!(f>>8&1)}),l.add(y)}else{const s=n+g[0][0]-u,i=r+g[0][1]-c,o=this.M0(g,e,!1,s,i,!1,!0,t,h);o.c$().lLt(p),t.UH(o,{YH:!!(1&f),ZH:!!(f>>1&1),QH:!!(f>>2&1),sq:!!(f>>3&1),eq:!!(f>>4&1),cq:!!(f>>5&1),rq:!!(f>>6&1),oq:!!(f>>7&1),lq:!!(f>>8&1)})}}}zV(t){if(this.qjt.has(t))return;const s=t.WV();let i=this.Bjt.get(s);if(i){if(i.has(t))return;i.add(t)}else i=new Set,i.add(t),this.Bjt.set(s,i);if(this.AU()&&ET.uHt(t),t.dOt(),this.Wjt=!0,t.KV())for(const s of t.QV())this.zV(s);for(const s of t.children())s.fq()&&this.zV(s);if(!this.I3.HW()&&!this.NVt){const s=this.Bk();s.jW(!0),t.zOt(),s.jW(!1)}t.JOt(this.I3.HW())}qW(){this.Wjt&&(this.jjt=!0,this.cHt(),this.fHt(),this.jjt=!1,this.Wjt=!1,this.w$())}cHt(){for(const t of this.$jt){const s=t.WV();s.T0(t);for(const i of s.JW())i.T0(t),i.vRt()}CT.bh(this.$jt)}fHt(){this.sAt.cf(!0);for(const[t,s]of this.Bjt.entries())this.dHt(t,s),s.clear();this.Bjt.clear(),this.sAt.cf(!1)}dHt(t,s){for(const t of s){const s=this.KVt.instancedestroy;s.jq=t,this.sAt.dispatchEvent(s),this.Hjt.delete(t.tU()),this.PVt.delete(t);const i=t.c$();i&&(i.fLt(),i.C0(),i.dOt()),this.qjt.add(t),this.Vjt--}CT.Ph(t.FW(),s),t.vRt(),this.zjt.add(t);for(const i of t.JW())CT.Ph(i.FW(),s),i.vRt(),this.zjt.add(i);if(t.MW().KB()){const t=new Set([...s].map((t=>t.c$().f$())));for(const i of t)i.H1(s)}}xRt(){return this.$jt}*CGt(t){for(const s of this.xRt())t.k0()?s.WV().TTt(t)&&(yield s):s.WV()===t&&(yield s)}YAt(){return this.Ujt++}ZAt(t,s){this.Hjt.set(t,s)}MY(t){t=!!t,this.mVt!==t&&(this.mVt=!!t,this.mVt&&this.gVt&&(this.GY(!1),this.gVt=!1))}xY(){return this.mVt}j5(){this.sAt.dispatchEvent(CT.Hn(CT.Event,"renderercontextlost")),this.GY(!0);for(const t of this.Rjt)!t.k0()&&t.QAt()&&t.B5();const t=this.VN();t&&t.j5(),CT.XEt.GK(),CT.BZ.GK()}async QBt(){await this.VN().R5(null,this.pM()),this.sAt.dispatchEvent(CT.Hn(CT.Event,"renderercontextrestored")),this.GY(!1),this.w$()}rUt(t){if(!this.mVt)return;const s=t.hidden;this.GY(s),this.gVt=s,s||this.w$()}lUt(t){this.NWt()&&this.sVt&&!CT.Ks.oi&&(t.data.parentHasFocus||(this.GY(!0),this.iVt=!0))}uUt(){this.iVt&&(this.GY(!1),this.iVt=!1)}rHt(){const t=this.nVt;"vsync"===this.Kjt?-1===this.R$t&&(this.R$t=self.requestAnimationFrame(t.rVt)):"unlimited-tick"===this.Kjt?(-1===this.hVt&&(this.hVt=CT.Hh(t.oVt)),-1===this.R$t&&(this.R$t=self.requestAnimationFrame(t.aVt))):-1===this.hVt&&(this.hVt=CT.Hh(t.rVt))}nHt(){-1!==this.R$t&&(self.cancelAnimationFrame(this.R$t),this.R$t=-1),-1!==this.hVt&&(CT.qh(this.hVt),this.hVt=-1)}oN(){return this.yVt>0}GY(t){if(this._Bt())return;const s=this.oN();this.yVt+=t?1:-1,this.yVt<0&&(this.yVt=0);const i=this.oN();if(!s&&i)console.log("[Construct] Suspending"),this.nHt(),this.sAt.dispatchEvent(CT.Hn(CT.Event,"suspend")),this.YZ(CT.Hn(CT.Event,"suspend")),this.xU(CT.R$.A$.P$.pHt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const t=performance.now();this.vVt=t,this.RVt=t,this.AVt=0,this.OVt=0,this.FVt=0,this.DVt=0,this.kVt=0,this.LVt=0,this.sAt.dispatchEvent(CT.Hn(CT.Event,"resume")),this.YZ(CT.Hn(CT.Event,"resume")),this.xU(CT.R$.A$.P$.mHt,null,null),this.jgt()||this.E8(t)}}lY(t){this.tUt.$u(t)}dY(t){this.sUt.$u(t)}cY(t){this.iUt.$u(t)}uY(t){this.tUt.Zf(t)}pY(t){this.sUt.Zf(t)}fY(t){this.iUt.Zf(t)}gHt(t,s){const i=s?performance.now():0;let e;return t instanceof AT?(e=t.OU(),s&&ET.yHt(t.behavior,performance.now()-i)):(e=t.E8(),s&&ET.yHt(t.Nq(),performance.now()-i)),e}wHt(){const t=this.AU();this.tUt.jd(!0);for(const s of this.tUt)this.gHt(s,t);this.tUt.jd(!1)}SHt(t,s){const i=s?performance.now():0;let e;return t instanceof AT?(e=t.gY(),s&&ET.yHt(t.behavior,performance.now()-i)):(e=t.CEt(),s&&ET.yHt(t.Nq(),performance.now()-i)),e}bHt(){const t=this.AU();this.sUt.jd(!0);for(const s of this.sUt)this.SHt(s,t);this.sUt.jd(!1)}vHt(t,s){const i=s?performance.now():0;let e;return t instanceof AT?(e=t.LU(),s&&ET.yHt(t.behavior,performance.now()-i)):(e=t.TCt(),s&&ET.yHt(t.Nq(),performance.now()-i)),e}MHt(){const t=this.AU();this.iUt.jd(!0);for(const s of this.iUt)this.vHt(s,t);this.iUt.jd(!1)}*xHt(){const t=this.AU();this.tUt.jd(!0);for(const s of this.tUt){const i=this.gHt(s,t);CT.Mo(i)&&(yield*i)}this.tUt.jd(!1)}*THt(){const t=this.AU();this.sUt.jd(!0);for(const s of this.sUt){const i=this.SHt(s,t);CT.Mo(i)&&(yield*i)}this.sUt.jd(!1)}*GHt(){const t=this.AU();this.iUt.jd(!0);for(const s of this.iUt){const i=this.vHt(s,t);CT.Mo(i)&&(yield*i)}this.iUt.jd(!1)}async E8(t,s,i){this.dVt=!0;const e="background-wake"===i,n="background-wake"!==i&&"skip-render"!==i,r=this.qN(),h=this.I$();if(!this.cVt||this.oN()&&!s&&!e)return;const o=performance.now();this.fVt=!0,this.IHt(t||0),this.FVt++,this._Ht();const a=this.CHt();this.xGt()&&await a;const l=this.sAt._f(this.KVt.pretick);l instanceof Promise&&await l,this.YZ(this.QVt.pretick);const u=this.EHt();this.xGt()&&await u,this.PHt()&&await this.AHt(),r.ZN()&&await this.RHt();const c=this.OHt();this.xGt()&&await c;const f=r.VN(),d=f.G5();let p=!1;if(-1!==d&&(f.I5(),h.T5()!==d)){const t=this.I$().z5(d);this.Tk()&&(p=!0,await t)}this.Wc("canvas","update-html-layer-dom-state",{layersDomState:f.V0().filter((t=>t.tV())).map((t=>t.K1()))}),n&&this.VD(),p&&this.Wc("canvas","cleanup-html-layers"),this._Bt()&&(await this.BUt(),this.dN()>=this.LUt())?this.UUt():(this.oN()||e||this.rHt(),this.lVt++,this.uVt++,this.fVt=!1,this.LVt+=performance.now()-o)}async CHt(){const t=this.fpt,s=this.AU();this.qW(),t.jW(!0),this.Pgt(this.VN()),s&&ET.FHt(),this.xGt()?await t.lyt():t.nyt(),s&&ET.DHt(),this.Agt(),t.jW(!1),this.qW(),t.jW(!0)}async EHt(){const t=this.fpt,s=this.AU(),i=this.xGt(),e=this.sAt,n=this.KVt,r=this.QVt;s&&ET.FHt(),i?await this.LHt(this.xHt()):this.wHt(),i?await this.LHt(this.THt()):this.bHt(),s&&ET.kHt(),s&&ET.FHt(),i?await this.NHt(n.tick):e.dispatchEvent(n.tick),s&&ET.$Ht(),t.jW(!1),this.YZ(r.tick)}async OHt(){const t=this.fpt,s=this.sAt,i=this.KVt,e=this.QVt,n=this.AU(),r=this.xGt();n&&ET.FHt(),r?await t.Rgt(this.I3):t.Egt(this.I3),n&&ET.DHt(),this.Ijt.Nkt(),this._Ht(),this.pVt=!1,t.jW(!0),n&&ET.FHt(),r?await this.LHt(this.GHt()):this.MHt(),n&&ET.kHt(),n&&ET.FHt(),r?await this.NHt(i.tick2):s.dispatchEvent(i.tick2),n&&ET.$Ht(),t.jW(!1),this.YZ(e.tick2),r&&await t.Vgt(),this.qW(),this._Ht()}_Ht(){if(0===this.qjt.size)return;const t=this.sAt;t.cf(!0);for(const t of this.zjt)t.Kgt().jdt(this.qjt);this.zjt.clear(),this.fpt.cyt(this.qjt);for(const t of this.qjt)t.qn();this.qjt.clear(),t.cf(!1)}async RHt(){const t=this.qN();let s=0;for(;t.ZN()&&s++<10;)await this.BHt(t.i6())}IHt(t){let s=0;this._Bt()?(s=1/this.kUt(),this.MVt=s,this.xVt=s):0!==this.vVt&&(s=Math.max(t-this.vVt,0)/1e3,s>.5&&(s=0),this.MVt=s,this.xVt=CT.Zn(s,this.IVt,this.GVt)),this.vVt=t,this.TVt=this.xVt*this.QRt,this._Vt.$u(this.TVt),this.CVt.$u(s*this.QRt),this.EVt.$u(this.xVt);for(const[t,s]of this.PVt)s.$u(this.xVt*t.SN());this.Xjt&&this.Xjt.fWt(),t-this.RVt>=1e3&&(this.RVt+=1e3,t-this.RVt>=1e3&&(this.RVt=t),this.OVt=this.AVt,this.AVt=0,this.DVt=this.FVt,this.FVt=0,this.kVt=Math.min(this.LVt/1e3,1),this.LVt=0,this.Xjt&&this.Xjt.cWt(),this.Ijt.Fkt(),this.AU()&&ET.WHt())}lOt(t,s){if(s){if(!this.PVt.has(t)){const s=CT.Hn(CT.Qf);s.rd(this._Vt),this.PVt.set(t,s)}}else this.PVt.delete(t)}uOt(t){const s=this.PVt.get(t);return s?s.qs():this.dN()}async BHt(t){const s=this.sAt,i=this.qN().VN();await i.w4(),i.W5(t,this.pM()),i===t&&this.fpt.v4(),this.Ijt.Nkt(),this._Ht(),s.dispatchEvent(this.KVt.beforelayoutchange),CT.df.Pf(!0),await t.R5(i,this.pM()),CT.df.Pf(!1),await t.V5(!1),s.dispatchEvent(this.KVt.layoutchange),this.w$(),this.pVt=!0,this.qW(),this.jUt()}w$(){this.tVt=!0}tWt(){return this.Xjt?this.Xjt.tWt():null}sWt(){return this.Xjt?this.Xjt.sWt():null}pM(){return this.Xjt?this.Xjt.pM():null}VD(){const t=this.Xjt;if(!t||t.KBt())return;const s=this.pM(),i=s.tF(),e=i&&s.Bv(),n=i&&s.sb();if(e&&s.BO(),!this.tVt&&!this._Bt())return void s.Dv();const r=this.I3.VN();this.AVt++,s.RO();const h=this.AU();h&&ET.FHt(),this.tVt=!1;let o=null;e&&(o=t.gWt()._A(),s.QO(o));let a=null;n&&(a=s.jHt(2*(1+r.w5())),s.F2(0,1)),this._1()&&"low"===t.N2()?s.HR(t.I2(),t._2()):s.qR(),this.VHt(this.pM(),r),o&&s.sF(o),n&&(s.UHt(),this.Xjt.yWt(a)),s.Rv(),h&&(ET.HHt(),ET.qHt()),t&&t.wWt()}A4(t){return"low"===this.I$().N2()||t.Bv()&&(this.L2()||this._1())}VHt(t,s){t.lb(),t.lO(),t.sO(1,1,1,1),t.UO(null),t.rO(null),t.FO(this._1()),this.A4(t)&&s.E4(t);const i=s.T5();for(let e=1;e<i;++e)s.D4(t,e),t.sb()&&t.zHt();this.A4(t)||s.E4(t),s.F4(t)}xU(t,s,i){if(!this.cVt)return!1;const e=!this.fVt&&!this.fpt.zgt();let n=0;e&&(n=performance.now());const r=this.AU();r&&this.OY(!1);const h=this.fpt.Lgt(this.I3,t,s,i);if(e){const t=performance.now()-n;this.LVt+=t,r&&ET.JHt(t)}return r&&this.OY(!0),h}fCt(t,s,i){if(!this.xGt())return this.xU(t,s,i);if(this.jgt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(!this.fVt&&!this.fpt.zgt())throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead");return this.fpt.$gt(this.I3,t,s,i)}async C$(t,s,i){if(!this.xGt())return this.xU(t,s,i);if(!this.cVt)return!1;if(this.jgt())return this.fpt.Bgt(t,s,i);if(!this.VN())return this.fpt.kgt(t,s,i);const e=performance.now(),n=this.fpt.$gt(this.I3,t,s,i);let r=n.next();for(;!r.done;)await this.Fgt(r.value),r=n.next();return this.oN()||this.fpt.zgt()||(await this.fpt.Vgt(),this.dVt&&!this.fVt&&this.rHt()),this.LVt+=performance.now()-e,r.value}dCt(t,s,i){const e=this.AU();e&&this.OY(!1);const n=this.fpt.Ugt(this.I3,t,s,i);return e&&this.OY(!0),n}pCt(t,s,i){return this.fpt.Hgt(this.I3,t,s,i)}mCt(t){return this.wVt.$u(t)}Pgt(t){this.Njt.push(t)}Agt(){if(!this.Njt.length)throw new Error("layout stack empty");this.Njt.pop()}l$(){return this.Njt.length?this.Njt.at(-1):this.VN()}lN(t){return t&&-1!==t.SN()?this.xVt*t.SN():this.TVt}_8(){return this.TVt}C8(){return this.xVt}cN(){return this.MVt}SN(){return this.QRt}bN(t){(isNaN(t)||t<0)&&(t=0),this.QRt=t}FN(t){this.IVt=Math.max(t,0)}ON(){return this.IVt}kN(t){this.GVt=Math.max(t,0)}LN(){return this.GVt}MN(){return this.OVt}TN(){return this.DVt}IN(){return this.kVt}YHt(){return this.bVt}dN(){return this._Vt.qs()}XHt(){return this.CVt.qs()}yN(){return this.EVt.qs()}mN(){return this.lVt}ZHt(){return this.uVt}KHt(){return this.Vjt}dk(){return this.ajt}mk(){return this.ljt}Sk(){return this.ujt}yk(){return this.cjt}vk(){return this.fjt}h$(t){if(this.NVt)throw new Error("cannot call while loading state - wait until afterload event");return this.Hjt.get(t)||null}FFt(t){if(this.NVt)throw new Error("cannot call while loading state - wait until afterload event");this.Hjt.delete(t)}f4(){this.Hjt.clear();for(const t of this.Rjt)if(!t.k0())for(const s of t.FW())this.Hjt.set(s.tU(),s)}NWt(){return"preview"===this.YWt}AU(){return this.sjt}MB(){return this.YWt}xB(){return"nwjs"===this.MB()||this.XWt}BWt(){return"cordova"===this.YWt}QHt(){return"Android"===CT.Ks.Qs&&("cordova"===this.YWt||"playable-ad-single-file"===this.YWt||"playable-ad-zip"===this.YWt||"instant-games"===this.YWt)}tqt(){return this.JX}sqt(){return this.ZWt}TB(){return this.KWt}iqt(){return this.QWt}lk(){return this.Ijt}JEt(){return this.Gjt.JEt()}YEt(){return this.Gjt.YEt()}_1(){return this.Zjt}eqt(){return this.pM().US(this.g1())}WS(t){return this.pM().WS(t||this.g1())}nqt(){return this.pVt}rqt(t){t=!!t,this.Qjt!==t&&(this.Qjt=t,this.qN().n6(),this.w$())}Ak(){return this.Qjt}hqt(t){if(!this.Ajt.has(t)){const s=()=>this.oqt(t);this.Ajt.set(t,s),t.wf().addEventListener("animationframeimagechange",s)}const s=this.dw.ow(t);return s.xw()||s.Gw().then((()=>this.w$())),s}oqt(t){this.dw.cw(t)}Ejt(t){const s=[];for(const i of t.cRt())for(const t of i.uz()){const i=t.gz();s.push({source:t,width:i.jg(),height:i.Kg(),tag:t.Pz()})}return{bw:s}}async Pjt(t){const s=CT.Hn(CT.Ud),i=[],e=new Map;for(const n of t.cRt())for(const t of n.uz()){const n=t.gz().gPt();e.has(n)||(e.set(n,null),i.push(s.$u((async()=>{const t=await n.EK();e.set(n,t)}))))}await Promise.all(i);const n=[];for(const i of t.cRt())for(const t of i.uz())n.push(s.$u((async()=>{const s=t.gz(),i=e.get(s.gPt()),n=await s.yPt(i);return{_w:await createImageBitmap(n)}})));const r=await Promise.all(n);for(const t of e.values())t instanceof ImageBitmap&&t.close&&t.close();return{bw:r}}aqt(t){this.$Vt=t,this.BVt=!1}lqt(){this.$Vt="",this.BVt=!0}uqt(t){this.WVt=t}yIt(t){this.BU=t}cqt(){return this.jVt}PHt(){return!!(this.$Vt||this.BVt||this.WVt||null!==this.BU)}async AHt(){if(this.$Vt&&(this.qW(),await this.fqt(this.$Vt),this.dqt()),this.WVt&&(await this.pqt(this.WVt),this.dqt(),this.AU()&&ET.mqt()),this.BVt){const t=await this.gqt();this.jVt=t,await this.C$(CT.R$.A$.P$.yqt,null),this.jVt="",this.dqt()}if(null!==this.BU){this.qW();try{await this.wqt(this.BU),this.jVt=this.BU,await this.C$(CT.R$.A$.P$.Sqt,null),this.jVt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.C$(CT.R$.A$.P$.bqt,null)}this.dqt()}}dqt(){this.$Vt="",this.BVt=!1,this.WVt="",this.BU=null}VB(){return this.VVt||(this.VVt=localforage.Ii({name:"c3-localstorage-"+this.Sk(),description:this.dk()})),this.VVt}vqt(){return this.UVt||(this.UVt=localforage.Ii({name:"c3-savegames-"+this.Sk(),description:this.dk()})),this.UVt}async fqt(t){const s=await this.gqt();try{await this.vqt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.jVt=s,await this.C$(CT.R$.A$.P$.yqt,null),this.jVt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.C$(CT.R$.A$.P$.Mqt,null)}}async pqt(t){try{const s=await this.vqt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.wqt(s),this.jVt=s,await this.C$(CT.R$.A$.P$.Sqt,null),this.jVt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.C$(CT.R$.A$.P$.bqt,null)}}async gqt(){const t={c3save:!0,version:1,rt:{time:this.dN(),timeRaw:this.XHt(),walltime:this.yN(),timescale:this.SN(),tickcount:this.mN(),next_uid:this.Ujt,running_layout:this.VN().U0(),start_time_offset:Date.now()-this.bVt},types:{},layouts:{},events:this.fpt.b3(),timelines:this.v9.b3(),user_script_data:null};for(const s of this.Rjt)s.k0()||s.ORt()||(t.types[s.U0().toString()]=s.b3());for(const s of this.I3.YN())t.layouts[s.U0().toString()]=s.b3();const s=this.xqt("save");return s.saveData=null,await this.a4(s),t.user_script_data=s.saveData,JSON.stringify(t)}i4(){return this.NVt}async wqt(t){const s=this.qN(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(i.version>1)throw new Error("C3 save data from future version");this.wIt(),this.sAt.dispatchEvent(CT.Hn(CT.Event,"beforeload"));for(const t of this.tHt())t.WV().ORt()||t.P6();const e=i.rt;this._Vt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.CVt.Set(e.timeRaw),this.EVt.Set(e.walltime),this.QRt=e.timescale,this.lVt=e.tickcount,this.bVt=Date.now()-e.start_time_offset;const n=e.running_layout;this.NVt=!0;let r=!1;if(n!==this.VN().U0()){const t=s.X4(n);if(!t)return;await this.BHt(t),r=!0}for(const[t,e]of Object.entries(i.layouts)){const i=parseInt(t,10),n=s.X4(i);n&&n.v3(e)}const h=new Set;for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this._Y(i);!e||e.k0()||e.ORt()||e.v3(s,h)}for(const t of this.I3.YN())for(const s of t.vj())s.M3();if(this.qW(),this.f4(),this.NVt=!1,r){for(const t of this.tHt())t.e4();for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this._Y(i);!e||e.k0()||e.ORt()||e.NRt(s)}}this.Ujt=e.next_uid,this.fpt.v3(i.events);for(const t of this.Rjt)if(!t.k0()&&t.KV())for(const s of t.FW()){const i=s.iU();s.OOt();for(const e of t.P5().sj()){if(e===t)continue;const n=e.FW();if(i<0||i>=n.length)throw new Error("missing sibling instance");s.d4(n[i])}}this.v9.v3(i.timelines),s.e6(),s.n6();for(const t of h)t.qOt();this.SIt(),this.sAt.dispatchEvent(CT.Hn(CT.Event,"afterload")),this.YZ(this.xqt("afterload"));for(const[t,s]of Object.entries(i.types)){const s=parseInt(t,10),i=this._Y(s);i&&i.kRt()}const o=this.xqt("load");o.saveData=i.user_script_data,await this.a4(o),this.w$()}Tqt(t,s){return s.c$().eLt()-t.c$().eLt()}VLt(t,s){t.c$()&&(this.pUt.has(t)||(this.pUt.set(t,s),this.mUt.push(t)))}wIt(){this.pUt=new WeakMap,CT.bh(this.mUt),CT._4.JFt()}SIt(t="full",s=null){this.mUt.sort(this.Tqt),s||(s={}),s.OFt=new Set;const i=this.mUt.length;for(const i of this.mUt)i.R6(this.pUt.get(i),t,s);for(const i of this.mUt)i.ZOt(this.pUt.get(i),t,s);if(this.wIt(),i){this.qW(),this.f4();for(const t of this.I3.YN())for(const s of t.vj())s.A0(),s.y$()}}async Gqt(t){const s=await Promise.all(t.map((async t=>{if(this.BWt()&&this.fK._Z()||"playable-ad-single-file"===this.MB()){const s=await this.fK.no(t);return URL.createObjectURL(s)}return new URL(t,location.href).toString()})));this.eUt.Iqt(s)}_qt(t,s){this.eUt.Cqt(t,s)}Eqt(t,s){this.eUt.Pqt(t,s)}Aqt(t,s,i,e){return this.eUt.Aqt(t,s,i,null,null,e)}Rqt(t,s,i,e){return this.eUt.Rqt(t,s,i,e)}Oqt(){return this.eUt.Fqt()}n$(t,s){this.Wc("runtime","invoke-download",{url:t,filename:s})}async _Wt(t,s,i,e,n,r){if(e=e||s,n=n||i,this.Tk())return(await this.b$("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:n,imageBitmapOpts:r})).imageBitmap;{const h=await self.C3_RasterSvgImageBlob(t,s,i,e,n);return r?await self.createImageBitmap(h,r):h}}async Dqt(t){return this.Tk()?await this.b$("runtime","get-svg-image-size",{blob:t}):await self.C3_GetSvgImageSize(t)}Lqt(){this.JVt||(this.JVt=!0,this.Wc("runtime","enable-device-orientation"))}kqt(){this.YVt||(this.YVt=!0,this.Wc("runtime","enable-device-motion"))}jN(){return this.SVt()}Nqt(t){this.SVt=t}oUt(){const t=this.pM();return{fps:this.MN(),tps:this.TN(),cpu:this.IN(),gpu:this.CN(),layout:this.VN()?this.VN().Ec():"",renderer:t.Bv()?t.oF():t.iWt()}}jgt(){return!!this.AU()&&ET.jgt()}Fgt(t){return this.xGt()?ET.Fgt(t):Promise.resolve()}pbt(){return!!this.xGt()&&ET.$qt()}Bqt(t){this.ijt=!!t,this.Wqt()}jqt(){return this.ijt}xGt(){return this.ejt}OY(t){t?this.njt--:this.njt++,this.Wqt()}Wqt(){this.ejt=this.AU()&&this.ijt&&0===this.njt}Owt(){return this.AU()&&ET.Owt()}A2(){return this.AU()&&this.pM().tF()&&ET.A2()}async LHt(t){if(t)for(const s of t)await this.Fgt(s)}NHt(t){return this.LHt(this.sAt.Ef(t))}kmt(t){return this.fpt.kmt(t.name,t.params)}M$(t){if(this.Tk())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}zB(){return this.cUt}xqt(t){const s=CT.Hn(CT.Event,t,!1);return s.runtime=this.cUt,s}IUt(){this.cUt=new self.ik(this),this.QVt={pretick:this.xqt("pretick"),tick:this.xqt("tick"),tick2:this.xqt("tick2")}}EUt(){const t={};for(const s of this.Rjt)t[s.ugt()]={value:s.gW(),enumerable:!0,writable:!1};this.cUt.kk(t)}PUt(){const t={};for(const s of this.Bk().ygt())t[s.ugt()]=s.cgt();this.cUt.Nk(t)}QN(){return this.dUt}cW(t,s){this.fUt.set(t,s)}Tj(t){return this.fUt.get(t)}mB(t){if(!(t instanceof self.bW))throw new TypeError("expected IObjectClass");const s=this.Tj(t);if(!(s&&s instanceof CT.$ut))throw new Error("invalid IObjectClass");return s}AW(t){if(!(t instanceof self.BV))throw new TypeError("expected IInstance");const s=this.Tj(t);if(!(s&&s instanceof CT.Instance))throw new Error("invalid IInstance");return s}u$(t){if(!(t instanceof self.Iq))throw new TypeError("expected IWorldInstance");const s=this.Tj(t);if(!(s&&s instanceof CT.Instance))throw new Error("invalid IInstance");return s}},self.C3_CreateRuntime=CT.WWt.AG,self.C3_InitRuntime=(t,s)=>t.iOt(s)}{const FT=self._s;FT.nUt=class extends FT.Vn{constructor(t,s){super(),this.Nc=t,this.Vqt=new Map,this.Uqt=0,this.Hqt=s.inputPort,s.outputPort.onmessage=t=>this.qqt(t),this.zqt=s.maxNumWorkers,this.Jqt=1,this.Yqt=!1,this.Xqt=!1}Fqt(){return this.zqt}Iqt(t){this.Hqt.postMessage({type:"_import_scripts",scripts:t})}Cqt(t,s){this.Hqt.postMessage({type:"_send_blob",blob:t,id:s})}Pqt(t,s){this.Hqt.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}Aqt(t,s,i,e,n,r){if(i||(i=[]),"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const h=this.Uqt++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:h,params:s,transferables:i},a=new Promise(((t,s)=>{this.Vqt.set(h,{resolve:t,progress:e,reject:s,Zqt:!1,Kqt:r})}));return n&&n.Yf((()=>this.Qqt(h))),this.Hqt.postMessage(o,i),this.tzt(),a}Rqt(t,s,i,e){if(i||(i=[]),"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const n={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:this.Uqt++,params:s,transferables:i};this.Hqt.postMessage(n,i)}Qqt(t){const s=this.Vqt.get(t);s&&(s.Zqt=!0,s.resolve=null,s.progress=null,s.reject=null,this.Hqt.postMessage({type:"_cancel",jobId:t}))}qqt(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.szt(e,s.result);break;case"progress":this.izt(e,s.progress);break;case"error":this.ezt(e,s.error);break;case"ready":this.nzt();break;default:throw new Error(`unknown message from worker '${i}'`)}}szt(t,s){const i=this.Vqt.get(t);if(!i)throw new Error("invalid job ID");i.Zqt||i.resolve(s),this.Vqt.delete(t)}izt(t,s){const i=this.Vqt.get(t);if(!i)throw new Error("invalid job ID");!i.Zqt&&i.progress&&i.progress(s)}ezt(t,s){const i=this.Vqt.get(t);if(!i)throw new Error("invalid job ID");i.Zqt||i.reject(s),this.Vqt.delete(t)}nzt(){this.Yqt&&(this.Yqt=!1,this.Jqt++,this.Jqt<this.zqt?this.tzt():this.Hqt.postMessage({type:"_no_more_workers"}))}rzt(){let t=0;const s=[...this.Vqt.values()].sort(((t,s)=>(t.Kqt||1/0)-(s.Kqt||1/0)));for(const i of s)t<(i.Kqt||1/0)&&t++;return t}async tzt(){if(!(this.Jqt>=this.zqt||this.Yqt||this.Xqt||this.rzt()<=this.Jqt))try{this.Yqt=!0,(await this.Nc.b$("runtime","create-job-worker")).outputPort.onmessage=t=>this.qqt(t)}catch(t){this.Xqt=!0,this.Yqt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.Jqt} so far)`,t)}}}}self.C3_Shaders={};{let DT=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const t=""+i,s=""+e;return t<s?-1:t>s?1:0}};ForEachOrdered_SortInstances=DT;const LT=self._s;let kT=null,NT="",$T="",BT=[],WT="",jT="",VT="";const UT=LT.Hn(LT.amt);LT.R$.A$=class extends LT.y_t{constructor(t){super(t),this.emt=this.Nc.Bk().AY(),this.Vdt=this.Nc.Bk().Qk(),this.hzt=0,this.ozt=0,this.azt=new Map}qn(){super.qn()}w$(){this.Nc.w$()}xU(t){this.Nc.xU(t,null,null)}lzt(t,s){return kT&&t===NT&&s===$T||(kT=new RegExp(t,s),NT=t,$T=s),kT.lastIndex=0,kT}uzt(t,s,i){if(t===WT&&s===jT&&i===VT)return BT;const e=this.lzt(s,i);return BT=t.match(e),WT=t,jT=s,VT=i,BT}async czt(t,s){if(!s.length)return;this.hzt+=s.length;const i=[];for(const e of s)i.push(t.F5(e));await LT.jh(i,(()=>{this.ozt++})),this.ozt++,this.ozt===this.hzt&&(this.ozt=0,this.hzt=0,this.Nc.xU(LT.R$.A$.P$.fzt,null,null))}XZ(){return 0===this.hzt?1:this.ozt/this.hzt}dzt(t,s){for(const i of s)0===i.NW()&&t.N5(i)}pzt(){return UT}mzt(t){const s=this.Nc.Bk(),i=s.Qk(),e=i.EY(),n=e.qk(),r=n.CY(),h=e.Vpt(),o=i.PY(n),a=s.AY(),l=a.PY();if(l.hmt(t),h)for(let i=0;i<t&&!l.BY();++i)s.DY(r),l.NY(i),n.LY(e,o),s.kY(r);else for(let s=0;s<t&&!l.BY();++s)l.NY(s),n.LY(e,o);return i.WY(),a.WY(),!1}*gzt(t){const s=this.Nc.Bk(),i=s.Qk(),e=i.EY(),n=e.qk(),r=n.CY(),h=e.Vpt(),o=i.PY(n),a=s.AY(),l=a.PY();if(l.hmt(t),h)for(let i=0;i<t&&!l.BY();++i)s.DY(r),l.NY(i),yield*n.Gbt(e,o),s.kY(r);else for(let s=0;s<t&&!l.BY();++s)l.NY(s),yield*n.Gbt(e,o);return i.WY(),a.WY(),!1}yzt(){const t=this.Nc.Bk(),s=t.Qk(),i=s.EY(),e=i.qk(),n=e.CY(),r=i.Vpt(),h=s.PY(e),o=t.AY(),a=o.PY();if(r)for(let s=0;!a.BY();++s)t.DY(n),a.NY(s),e.LY(i,h)||a.Oz(),t.kY(n);else for(let t=0;!a.BY();++t)a.NY(t),e.LY(i,h)||a.Oz();return s.WY(),o.WY(),!1}*wzt(){const t=this.Nc.Bk(),s=t.Qk(),i=s.EY(),e=i.qk(),n=e.CY(),r=i.Vpt(),h=s.PY(e),o=t.AY(),a=o.PY();if(r)for(let s=0;!a.BY();++s)t.DY(n),a.NY(s),(yield*e.Gbt(i,h))||a.Oz(),t.kY(n);else for(let t=0;!a.BY();++t)a.NY(t),(yield*e.Gbt(i,h))||a.Oz();return s.WY(),o.WY(),!1}Szt(t,s,i){const e=this.Nc.Bk(),n=e.Qk(),r=n.EY(),h=r.qk(),o=h.CY(),a=r.Vpt(),l=n.PY(h),u=e.AY(),c=u.PY();if(c.RY(t),c.hmt(i),i<s)if(a)for(let t=s;t>=i&&!c.BY();--t)e.DY(o),c.NY(t),h.LY(r,l),e.kY(o);else for(let t=s;t>=i&&!c.BY();--t)c.NY(t),h.LY(r,l);else if(a)for(let t=s;t<=i&&!c.BY();++t)e.DY(o),c.NY(t),h.LY(r,l),e.kY(o);else for(let t=s;t<=i&&!c.BY();++t)c.NY(t),h.LY(r,l);return n.WY(),u.WY(),!1}*bzt(t,s,i){const e=this.Nc.Bk(),n=e.Qk(),r=n.EY(),h=r.qk(),o=h.CY(),a=r.Vpt(),l=n.PY(h),u=e.AY(),c=u.PY();if(c.RY(t),c.hmt(i),i<s)if(a)for(let t=s;t>=i&&!c.BY();--t)e.DY(o),c.NY(t),yield*h.Gbt(r,l),e.kY(o);else for(let t=s;t>=i&&!c.BY();--t)c.NY(t),yield*h.Gbt(r,l);else if(a)for(let t=s;t<=i&&!c.BY();++t)e.DY(o),c.NY(t),yield*h.Gbt(r,l),e.kY(o);else for(let t=s;t<=i&&!c.BY();++t)c.NY(t),yield*h.Gbt(r,l);return n.WY(),u.WY(),!1}vzt(t){const s=t.DW(),i=s.FW();if(0===i.length)return!1;const e=this.Nc.Bk(),n=e.Qk(),r=n.EY(),h=r.qk(),o=h.CY(),a=r.Vpt(),l=n.PY(h),u=e.AY(),c=u.PY(),f=t.KV(),d=UT.PY();if(LT.Gh(d,i),c.hmt(d.length),a)for(let s=0,i=d.length;s<i&&!c.BY();++s){e.DY(o);const i=d[s];t.DW().ept(i),f&&i.$wt(),c.NY(s),h.LY(r,l),e.kY(o)}else{s.tpt(!1);const t=s.spt();LT.bh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.BY();++s){const i=d[s];t[0]=i,f&&i.$wt(),c.NY(s),h.LY(r,l)}}return n.WY(),u.WY(),LT.bh(d),UT.WY(),!1}*Mzt(t){const s=t.DW(),i=s.FW();if(0===i.length)return!1;const e=this.Nc.Bk(),n=e.Qk(),r=n.EY(),h=r.qk(),o=h.CY(),a=r.Vpt(),l=n.PY(h),u=e.AY(),c=u.PY(),f=t.KV(),d=UT.PY();if(LT.Gh(d,i),c.hmt(d.length),a)for(let s=0,i=d.length;s<i&&!c.BY();++s){e.DY(o);const i=d[s];t.DW().ept(i),f&&i.$wt(),c.NY(s),yield*h.Gbt(r,l),e.kY(o)}else{s.tpt(!1);const t=s.spt();LT.bh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.BY();++s){const i=d[s];t[0]=i,f&&i.$wt(),c.NY(s),yield*h.Gbt(r,l)}}return n.WY(),u.WY(),LT.bh(d),UT.WY(),!1}xzt(t,s){const i=t.DW(),e=i.FW();if(0===e.length)return!1;const n=this.Nc.Bk(),r=n.Qk(),h=n.sgt(),o=r.EY(),a=o.qk(),l=a.CY(),u=o.Vpt(),c=r.PY(a),f=n.AY(),d=f.PY(),p=t.KV(),m=UT.PY();LT.bh(m),d.hmt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.Wxt(1,t)]);if(m.sort(DT),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.BY();++s){n.DY(l);const i=m[s][0];t.DW().ept(i),p&&i.$wt(),d.NY(s),a.LY(o,c),n.kY(l)}else{i.tpt(!1);const t=i.spt();LT.bh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.BY();++s){const i=m[s][0];t[0]=i,p&&i.$wt(),d.NY(s),a.LY(o,c)}}return r.WY(),f.WY(),LT.bh(m),UT.WY(),!1}*Tzt(t,s){const i=t.DW(),e=i.FW();if(0===e.length)return!1;const n=this.Nc.Bk(),r=n.Qk(),h=n.sgt(),o=r.EY(),a=o.qk(),l=a.CY(),u=o.Vpt(),c=r.PY(a),f=n.AY(),d=f.PY(),p=t.KV(),m=UT.PY();LT.bh(m),d.hmt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.Wxt(1,t)]);if(m.sort(DT),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.BY();++s){n.DY(l);const i=m[s][0];t.DW().ept(i),p&&i.$wt(),d.NY(s),yield*a.Gbt(o,c),n.kY(l)}else{i.tpt(!1);const t=i.spt();LT.bh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.BY();++s){const i=m[s][0];t[0]=i,p&&i.$wt(),d.NY(s),yield*a.Gbt(o,c)}}return r.WY(),f.WY(),LT.bh(m),UT.WY(),!1}Gzt(t,s){let i=this.azt.get(t);return i||(s?(i={Izt:null,_zt:new Map},this.azt.set(t,i),i):null)}Czt(t,s,i,e,n){s.Uk().Wbt(i,s.Yk()),e&&t.kY(n)}*Ezt(t,s,i,e,n){yield*s.Uk().jbt(i,s.Yk()),e&&t.kY(n)}}}{const HT=self._s;HT.R$.A$.OAt=class extends HT.Vn{constructor(t){super(),this.Ddt=t,this.Nc=t.$$(),this.iCt=t.MW()}B_t(){}qn(){this.Ddt=null,this.Nc=null,this.iCt=null}}}{const qT=self._s;qT.R$.A$.Instance=class extends qT.Vn{constructor(t,s){super(),this.di=t,this.Ddt=this.di.WV(),this.aCt=this.Ddt.wTt(),this.Nc=this.di.$$()}qn(){this.di=null,this.Ddt=null,this.aCt=null,this.Nc=null}}}{const zT=self._s,JT=[];zT.R$.A$.P$={Pzt:()=>!0,u4:()=>!0,S4:()=>!0,pHt:()=>!0,mHt:()=>!0,oN(){return this.Nc.oN()},xSt(){const t=this.Nc.tgt();return!t.Npt()&&!t.Lpt()},Azt(){const t=this.Nc.sgt().Cxt();let s=t.get("TriggerOnce_lastTick");void 0===s&&(s=-1,t.set("TriggerOnce_lastTick",-1));const i=this.Nc.mN();return t.set("TriggerOnce_lastTick",i),this.Nc.nqt()||s!==i-1},Rzt(t){const s=this.Nc.sgt().Cxt(),i=s.get("Every_lastTime")||0,e=this.Nc.dN();s.has("Every_seconds")||s.set("Every_seconds",t);const n=s.get("Every_seconds");return e>=i+n?(s.set("Every_lastTime",i+n),e>=s.get("Every_lastTime")+.04&&s.set("Every_lastTime",e),s.set("Every_seconds",t),!0):(e<i-.1&&s.set("Every_lastTime",e),!1)},$yt(t){const s=this.Nc.Bk().vgt(t);return s&&s.$yt()},NWt(){return this.Nc.NWt()},oi:()=>zT.Ks.oi,JUt:()=>!0,E$:()=>!0,Ozt:()=>!0,yqt:()=>!0,Mqt:()=>!0,Sqt:()=>!0,bqt:()=>!0,Fzt(t){return!!this.Nc.h$(t)},Dzt(t){switch(t){case 0:return"browser"===zT.Ks.ri;case 1:return"iOS"===zT.Ks.Qs;case 2:return"Android"===zT.Ks.Qs;case 8:return"cordova"===zT.Ks.ri;case 9:return"scirra-arcade"===this.Nc.MB();case 10:return"nwjs"===zT.Ks.ri;case 13:return"windows-uwp"===this.Nc.MB();default:return!1}},Lzt(t,s,i){return this.lzt(s,i).test(t)},kzt:(t,s,i)=>zT.compare(t,s,i),Nzt:(t,s,i)=>t>=s&&t<=i,$zt:(t,s,i)=>zT.compare(t.Jet(),s,i),Bzt:t=>!!t.Jet(),Wzt(t,s){const i=this.Nc.dN();if(0===t){const t=this.Nc.sgt().Cxt();return!t.get("CompareTime_executed")&&i>=s&&(t.set("CompareTime_executed",!0),!0)}return zT.compare(i,t,s)},jzt:t=>isNaN(t),$It:(t,s,i)=>zT.hr(zT.Qn(t),zT.Qn(i))<=zT.Qn(s),BIt:(t,s)=>zT.lr(zT.Qn(t),zT.Qn(s)),YTt(t,s,i){let e=zT.Qn(t),n=zT.Qn(s),r=zT.Qn(i);return zT.lr(r,n)?zT.lr(e,n)&&!zT.lr(e,r):!(!zT.lr(e,n)&&zT.lr(e,r))},Vzt:(t,s)=>"number"==typeof t?0===s:1===s,Uzt:t=>!!t,yyt(t){return t.toLowerCase()===this.Nc.Bk().vyt()},Hzt(t,s,i,e){if(!t)return!1;const n=this.pzt(),r=n.PY(),h=t.DW();zT.Gh(r,h.FW()),h.zdt()&&zT.bh(h.ipt());const o=this.Nc.sgt();let a=0;for(let t=0,n=r.length;t<n;++t){const n=r[t];r[a]=n,s=o.Wxt(1,t),e=o.Wxt(3,t),zT.compare(s,i,e)?++a:h.Qdt(n)}zT.Sh(r,a),h.npt(r);const l=!!r.length;return zT.bh(r),n.WY(),t.Fbt(),l},qzt(t,s){if(!t)return!1;const i=this.pzt(),e=i.PY(),n=t.DW();zT.Gh(e,n.FW()),n.zdt()&&zT.bh(n.ipt());const r=this.Nc.sgt();let h=0;for(let t=0,s=e.length;t<s;++t){const s=e[t];e[h]=s,r.Wxt(1,t)?++h:n.Qdt(s)}zT.Sh(e,h),n.npt(e);const o=!!e.length;return zT.bh(e),i.WY(),t.Fbt(),o},zzt(t,s,i){if(!t)return!1;const e=t.DW(),n=e.FW();if(0===n.length)return!1;const r=this.Nc.sgt();let h=null,o=0;for(let t=0,e=n.length;t<e;++t){const e=n[t];i=r.Wxt(2,t),(null===h||0===s&&i<o||1===s&&i>o)&&(o=i,h=e)}return e.lpt(h),t.Fbt(),!0},Jzt(t,s){if(!t)return!1;const i=t.DW(),e=i.FW();if((s=Math.floor(s))>=e.length)return!1;const n=e[s];return i.lpt(n),t.Fbt(),!0},Yzt(t){if(!t)return!1;const s=t.DW(),i=s.FW(),e=Math.floor(this.Nc.jN()*i.length);if(e>=i.length)return!1;const n=i[e];return s.lpt(n),t.Fbt(),!0},Xzt:t=>!!t&&(!!t.NW()&&(t.DW().tpt(!0),t.Fbt(),!0)),Zzt(t,s,i){if(!t)return!1;const e=t.DW(),n=e.FW(),r=this.Nc.qk().upt(),h=this.Nc.sgt().xxt();e.zdt()?(zT.Gh(JT,n),e.qdt(),e.tpt(!1)):r?(zT.Gh(JT,e.ipt()),zT.bh(e.ipt())):(zT.Gh(JT,e.spt()),zT.bh(e.spt()));for(let t=0,n=JT.length;t<n;++t){const n=JT[t];zT.xor(n.c$().OH(s,i),h)?e.Kdt(n):e.Qdt(n)}return t.Fbt(),zT.xor(!!e.spt().length,h)},Kzt(t){if(!t)return!1;const s=t.k0();let i=null;const e=this.Nc.xRt();for(let n=e.length-1;n>=0;--n){const r=e[n];if(s){if(r.WV().TTt(t)){i=r;break}}else if(r.WV()===t){i=r;break}}if(!i){const s=t.FW();s.length&&(i=s.at(-1))}return!!i&&(t.DW().lpt(i),t.Fbt(),!0)},Qzt(t){return this.Nc.xGt()?this.gzt(t):this.mzt(t)},tJt(){return this.Nc.xGt()?this.wzt():this.yzt()},sJt(t,s,i){return this.Nc.xGt()?this.bzt(t,s,i):this.Szt(t,s,i)},Vd(t){return this.Nc.xGt()?this.Mzt(t):this.vzt(t)},iJt(t,s,i){return this.Nc.xGt()?this.Tzt(t,i):this.xzt(t,i)},eJt:t=>!!t&&t.Yj(),nJt:t=>!!t&&t.eV(),rJt:t=>!!t&&t.tV(),hJt:t=>!!t&&!t.NW(),oJt:(t,s,i)=>!!t&&zT.compare(100*t.tO(),s,i),aJt(t){const s=this.Nc.VN();return!!s&&s.S5(t)},fzt:()=>!0,lJt(){return this.hzt>0},uJt(t,s){const i=this.Nc.ROt();return!!i&&!!s&&!!i.Nut(t,s)}}}{let YT=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]},XT=function(t,s){return t[1]-s[1]};SortZOrderList=YT,SortInstancesByValue=XT;const ZT=self._s,KT=[],QT=[],tG=ZT.Hn(ZT.Rect),sG=ZT.Hn(ZT.To),iG=[];ZT.R$.A$.Nrt={cJt(t,s){t.Pnt(s)},fJt(t,s){t.Qi()&&"number"!=typeof s&&(s=parseFloat(s)),t.Pnt(t.Jet()+s)},dJt(t,s){t.Qi()&&t.Pnt(t.Jet()-s)},pJt(t,s){t.Pnt(!!s)},mJt(t){t.Pnt(!t.Jet())},gJt(t){t.Pnt(t.Qmt())},yJt(t){this.Nc.Bk().Sgt(t)},wJt(t,s,i,e,n,r){if(!t||!s)return;const h=this.Nc.BW(t,s,i,e,n,r);if(!h)return;n&&s.WW(h);const o=this.Nc.Bk();o.jW(!0),h.VW(),o.jW(!1);const a=new Map;h.xOt(a,t,n);for(const[t,s]of a)t.DW().rpt(s)},SJt(t,s,i,e,n,r){if(!t||!s)return;const h=this.Nc.QUt(t);h&&ZT.R$.A$.Nrt.wJt.call(this,h,s,i,e,n,r)},D0(t,s,i,e,n,r,h,o,a,l,u){if(!t)return;const c=this.Nc.l$();let f=c;if(r){const t=this.Nc.qN().Y4(r);if(!t)return;f=t}let d=null;if(("number"!=typeof h||h>=0)&&(d=f.f$(h),!d))return;let p=null;if(("number"!=typeof o||o>=0)&&(p=c.f$(o),!p))return;tG.set(s,i,e,n);const m=f.D0(t,tG,d,p,a,l,u);t.DW().npt(m),t.Fbt()},bJt(){const t=this.emt;t.Qpt()&&t.Zpt().Oz()},Byt(t,s){const i=this.Nc.Bk().vgt(t);i&&(0===s?i.Byt(!1):1===s?i.Byt(!0):i.Byt(!i.$yt()))},vJt(t){this.Nc.bN(t)},MJt(t,s){if(s<0&&(s=0),!t)return;const i=t.DW().FW();for(const t of i)t.bN(s)},xJt(t){if(!t)return;const s=t.DW().FW();for(const t of s)t.oU()},ph(t,s){if(t<0)return;const i=this.Nc.Bk().syt();return s?i.a_t(t):i.l_t(t),!0},nN(t){return this.Nc.Bk().syt().u_t(t),!0},TJt(){const t=this.Nc.Bk();return t.syt().c_t(t.gyt()),!0},iN(t){this.Nc.Bk().iN(t)},async _$(t,s,i,e,n,r){const h=this.Nc.I$();h&&(this.w$(),await h._$(0===t?"image/png":"image/jpeg",s/100,i,e,n,r),await this.Nc.C$(ZT.R$.A$.P$.E$,null))},GJt(t,s){if(t<=0||s<=0)return;this.Nc.WBt(t,s),this.Nc.l$().c3();const i=this.Nc.I$();i&&("off"===i.FBt()||this.Nc.sHt(t,s),i.TP(i.OJ(),i.FJ(),!0),this.Nc.w$())},IJt(t){const s=this.Nc.I$();s&&"off"!==s.FBt()&&(s.JBt(0!==t?"high":"low"),s.TP(s.OJ(),s.FJ(),!0))},uet(t){this.Nc.aqt(t)},_Jt(){this.Nc.lqt()},CJt(t){this.Nc.uqt(t)},EJt(t){this.Nc.yIt(t)},PJt(t){},AJt(){for(const t of this.Nc.qN().YN())t.C4()},RJt(t){this.Nc.rqt(0!==t)},OJt(t,s){this.Nc.kN(1/t),this.Nc.FN(1/s)},FJt(t,s){this.Nc.FN(t),this.Nc.kN(s)},DJt(t){this.Nc.AN(["vsync","unlimited-tick","unlimited-frame"][t])},LJt(t,s){if(!t)return;const i=t.DW().FW(),e=KT,n=QT,r=this.Nc.l$(),h=t.k0(),o=t.eMt();for(let t=0,r=i.length;t<r;++t){const r=i[t],a=r.c$();if(!a)continue;let l;l=h?r.Pht(s+r.WV().iMt(o)):r.Pht(s),e.push([a.f$().tk(),a.d$()]),n.push([r,l])}if(!e.length)return;e.sort(YT),n.sort(XT);let a=!1;for(let t=0,s=e.length;t<s;++t){const s=n[t][0],i=r.p$(e[t][0]),h=e[t][1],o=i.m$();o[h]!==s&&(o[h]=s,s.c$().g$(i,!0),i.y$(s),a=!0)}a&&this.Nc.w$(),ZT.bh(KT),ZT.bh(QT)},cB(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.Nc.lk().cB(t,s)},kJt(t){if(this.Nc.Tw())return;const s=this.Nc.qN();s.ZN()||s.KN(t)},NJt(t){if(this.Nc.Tw())return;const s=this.Nc.qN();if(s.ZN())return;const i=s.Y4(t);i&&s.KN(i)},$Jt(t){if(this.Nc.Tw())return;const s=this.Nc.qN();if(s.ZN())return;const i=s.YN(),e=i.indexOf(s.VN());if(t&&0===e)return;if(!t&&e===i.length-1)return;const n=i[e+(t?-1:1)];s.KN(n)},BJt(){if(this.Nc.Tw())return;const t=this.Nc.qN();t.ZN()||(t.KN(t.VN()),this.Nc.Bk().Ggt())},WJt(t,s){t&&t.zj(s)},jJt(t,s){t&&t.Kj(s)},VJt(t,s){t&&t.sV(s)},UJt(t,s){t&&t.iO(s/100)},HJt(t,s){t&&t.nV(s)},qJt(t,s){t&&t.oV(s)},zJt(t,s){t&&t.uj(ZT.Qn(+s))},JJt(t,s,i){t&&(t._V(!0),t.fj(s),t.pj(i))},YJt(t){t&&t._V(!1)},XJt(t,s,i){t&&t.w1(s/100,i/100)},ZJt(t,s){t&&t.ZM(+s)},KJt(t,s){t&&t.yV(1===s)},QJt(t,s){if(!t)return;sG.Qo(s),sG.Zn();const i=t.IV();i.Ho(sG)||(i.ko(sG),this.w$())},tYt(t,s){t&&t.bV(s)},sYt(t,s){t&&t.FM(s)},iYt(t,s,i){if(!t)return;const e=t.nj().irt(i);if(!e)return;const n=1===s;e.Pwt()!==n&&(e.lkt(n),t.Yq(),this.Nc.w$())},eYt(t,s,i,e){if(!t)return;const n=t.nj(),r=n.irt(s);if(!r)return;i=Math.floor(i);const h=r.RI().FI(i);h&&("color"===h?(sG.Qo(e),e=sG):"percent"===h&&(e/=100),n.Zq(r.tk(),i,e)&&r.Pwt()&&this.Nc.w$())},nYt(t,s){t&&t.xV(s)},rYt(t){this.Nc.l$().aj(+t)},hYt(t){this.Nc.l$().uj(ZT.Qn(+t))},oYt(t,s){const i=this.Nc.l$(),e=i.nj().irt(s);if(!e)return;const n=1===t;e.Pwt()!==n&&(e.lkt(n),i.Yq(),this.Nc.w$())},aYt(t,s,i){const e=this.Nc.l$().nj(),n=e.irt(t);if(!n)return;s=Math.floor(s);const r=n.RI().FI(s);r&&("color"===r?(sG.Qo(i),i=sG):"percent"===r&&(i/=100),e.Zq(n.tk(),s,i)&&n.Pwt()&&this.Nc.w$())},lYt(t,s){this.Nc.l$().Oj(t/100,s/100)},uYt(t){const s=this.Nc.l$();0===t?s.Lj():s.kj()},cYt(t){this.Nc.l$().fj(t)},fYt(t){this.Nc.l$().pj(t)},dYt(t,s){const i=this.Nc.l$();i.fj(t),i.pj(s)},pYt(t){if(!t)return;const s=t.cGt();if(!s)return;const i=s.c$();if(!i)return;const e=this.Nc.l$();e.fj(i.HM()),e.pj(i.JM())},Gj(t,s,i){const e=this.Nc.l$();try{e.Gj(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},_j(t,s,i){if(!t)return;const e=this.Nc.l$();try{e._j(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}},Ej(t){t&&this.Nc.l$().Ej(t)},Aj(){this.Nc.l$().Aj()},async mYt(t){const s=this.Nc.VN();if(!s||!t||this.Nc.Tw())return;const i=t.k0()?t.tj():[t];await this.czt(s,i)},async gYt(t){await ZT.R$.A$.Nrt.mYt.call(this,this.Nc.QUt(t))},yYt(t){const s=this.Nc.VN();if(!s||!t)return;const i=t.k0()?t.tj():[t];this.dzt(s,i)},wYt(t){ZT.R$.A$.Nrt.yYt.call(this,this.Nc.QUt(t))},SYt(){const t=this.Nc.VN();if(!t)return;const s=t.A5();this.dzt(t,s)},async bYt(t){const s=this.Nc.VN();t&&s&&!this.Nc.Tw()&&await this.czt(s,t.C5())},async vYt(t){const s=this.Nc.VN(),i=this.Nc.qN().Y4(t);i&&s&&!this.Nc.Tw()&&await this.czt(s,i.C5())},sN(t){const s=this.Vdt.Kk();if(s)switch(s.tN()){case 1:"number"==typeof t&&s.sN(t);break;case 2:"string"==typeof t&&s.sN(t);break;case 3:s.sN(t)}},MYt(t,s,i){const e=this.Gzt(t.toLowerCase(),!0),n=e._zt,r=s.toLowerCase();n.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`);const h=ZT.Bh(n.values())||e.Izt;h&&0!==h.Xk()!=(0!==i.Xk())?console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`):n.set(r,i)},xYt(t,s){const i=this.Gzt(t.toLowerCase(),!0);i.Izt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`);const e=ZT.Bh(i._zt.values())||i.Izt;e&&0!==e.Xk()!=(0!==s.Xk())?console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`):i.Izt=s},TYt(t,s,i){const e=this.Nc,n=e.xGt()?iG:null;i=Math.floor(i);const r=this.Gzt(t.toLowerCase(),!1);if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),n;let h=r._zt.get(s.toLowerCase());if(!h){if(!r.Izt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),n;h=r.Izt,i=0}if(!h.Iu())return n;if(0!==h.Xk())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),n;const o=e.Bk(),a=o.qk(),l=a.Hk(),u=l.length>0;u&&(h.Yk()?o.DY(l):o.Qgt(l));const c=[],f=o.qyt(a);if(f){const t=f.Jyt();for(let s=i,e=t.length;s<e;++s)c.push(t[s].Jet())}const d=h.Jyt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].Qmt());return e.xGt()?this.Ezt(o,h,c,u,l):this.Czt(o,h,c,u,l)}}}{const eG=self._s;eG.R$.A$.$rt={GYt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t)&&(t=0)),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t)&&(t=0)),t},P:t=>t.toString(),kt:t=>"string"==typeof t?t.length:0,random(t,s){return void 0===s?this.Nc.jN()*t:this.Nc.jN()*(s-t)+t},Wvt(...t){return t[Math.floor(this.Nc.jN()*t.length)]},IYt:(t,...s)=>("number"!=typeof t&&(t=0),s[t=eG.Zn(Math.floor(t),0,s.length-1)]),_Yt:()=>Math.PI,CYt:()=>1/0,sqrt:t=>Math.sqrt(t),abs:t=>Math.abs(t),round:t=>Math.round(t),EYt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor:t=>Math.floor(t),ceil:t=>Math.ceil(t),sign:t=>Math.sign(t),sin:t=>Math.sin(eG.Qn(t)),cos:t=>Math.cos(eG.Qn(t)),tan:t=>Math.tan(eG.Qn(t)),asin:t=>eG.tr(Math.asin(t)),acos:t=>eG.tr(Math.acos(t)),atan:t=>eG.tr(Math.atan(t)),exp:t=>Math.exp(t),Vt:t=>Math.log(t),log10:t=>Math.log10(t),max(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s<e&&(s=e)}return s},min(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s>e&&(s=e)}return s},Zn:(t,s,i)=>eG.Zn(t,s,i),vt:(t,s,i,e)=>eG.er(t,s,i,e),angle:(t,s,i,e)=>eG.tr(eG.rr(t,s,i,e)),_t:(t,s,i)=>eG._t(t,s,i),mr:(t,s,i)=>eG.mr(t,s,i),yr:(t,s,i,e)=>eG.yr(t,s,i,e),wr:(t,s,i,e,n)=>eG.wr(t,s,i,e,n),Sr:(t,s,i)=>eG.Sr(t,s,i),PYt:(t,s)=>eG.tr(eG.hr(eG.Qn(t),eG.Qn(s))),AYt:(t,s,i)=>eG.tr(eG.ur(eG.Qn(t),eG.Qn(s),i)),RYt:(t,s,i)=>eG.tr(eG.ar(eG.Qn(t),eG.Qn(s),eG.Qn(i))),OYt:(t,s,i)=>(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s,FYt:(t,s)=>(t|=0)^1<<s,DYt:(t,s)=>(t|=0)&1<<(s|=0)?1:0,LYt:()=>"\n",kYt:t=>"string"==typeof t?t.toUpperCase():"",NYt:t=>"string"==typeof t?t.toLowerCase():"",left:(t,s)=>"string"==typeof t?t.substr(0,s):"",mid:(t,s,i)=>"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i),right:(t,s)=>"string"==typeof t?t.substr(Math.max(t.length-s,0)):"",trim:t=>"string"==typeof t?t.trim():"",$Yt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},BYt:(t,s)=>"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0,find:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(eG.Zi(s),"i")):-1,WYt:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(eG.Zi(s),"")):-1,replace:(t,s,i)=>"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(eG.Zi(s),"gi"),i):"string"==typeof t?t:"",jYt(t,...s){let i=t;for(let t=0,e=s.length;t<e;++t)i=i.replaceAll(`{${t}}`,s[t].toString());return i},VYt(t,s,i){const e=this.lzt(s,i);return t?t.search(e):-1},UYt(t,s,i,e){const n=this.lzt(s,i);return t?t.replace(n,e):""},HYt(t,s,i){const e=this.uzt(t.toString(),s,i);return e?e.length:0},qYt(t,s,i,e){e=Math.floor(e);const n=this.uzt(t.toString(),s,i);return!n||e<0||e>=n.length?"":n[e]},zYt(t,s){let i=t<0?"-":"";t<0&&(t=-t);const e=s-t.toString().length;return i+="0".repeat(Math.max(e,0)),i+t.toString()},JYt:t=>encodeURIComponent(t),YYt:t=>decodeURIComponent(t),aN(){return this.Nc._8()},XYt(){return this.Nc.C8()},ZYt(){return this.Nc.SN()},KYt(){return(Date.now()-this.Nc.YHt())/1e3},QYt:()=>Date.now(),time(){return this.Nc.dN()},tXt(){return this.Nc.mN()},sXt(){return this.Nc.KHt()},vN(){return this.Nc.MN()},iXt(){return this.Nc.IN()},eXt(){return this.Nc.CN()},nXt(){return this.Nc.I$().NB()},rXt(){return this.Nc.I$().BB()},hXt(){return this.Nc.Ik()},oXt(){return this.Nc.Ck()},aXt(){return this.Nc.Ik()},lXt(){return this.Nc.Ck()},uXt(){return this.Nc.l$().dj()},cXt(){return this.Nc.l$().mj()},fXt(){return this.Nc.l$().Ec()},dXt(){return this.Nc.l$().lj()},pXt(){return eG.tr(this.Nc.l$().cj())},mXt(){return this.Nc.l$().jg()},gXt(){return this.Nc.l$().Kg()},yXt(){return 100*this.Nc.l$().l1()},wXt(){return 100*this.Nc.l$().u1()},SXt(t){const s=this.Nc.l$().f$(t);return s?s.a1().Ka():0},bXt(t){const s=this.Nc.l$().f$(t);return s?s.a1().Qa():0},vXt(t){const s=this.Nc.l$().f$(t);return s?s.a1().tl():0},MXt(t){const s=this.Nc.l$().f$(t);return s?s.a1().sl():0},xXt(t){const s=this.Nc.l$().f$(t);return s?s.a1().width():0},TXt(t){const s=this.Nc.l$().f$(t);return s?s.a1().height():0},GXt(t){const s=this.Nc.l$().f$(t);if(s){const t=s.a1();return(t.Ka()+t.tl())/2}return 0},IXt(t){const s=this.Nc.l$().f$(t);if(s){const t=s.a1();return(t.Qa()+t.sl())/2}return 0},_Xt(t,s,i){const e=this.Nc.l$().f$(t);return e?e.AV(s,i)[0]:0},CXt(t,s,i){const e=this.Nc.l$().f$(t);return e?e.AV(s,i)[1]:0},EXt(t,s,i){const e=this.Nc.l$().f$(t);return e?e.OV(s,i)[0]:0},PXt(t,s,i){const e=this.Nc.l$().f$(t);return e?e.OV(s,i)[1]:0},AXt(t,s,i,e){const n=this.Nc.l$(),r=n.f$(t),h=n.f$(s);if(!r||!h||r===h)return i;const[o,a]=r.OV(i,e);return h.AV(o,a)[0]},RXt(t,s,i,e){const n=this.Nc.l$(),r=n.f$(t),h=n.f$(s);if(!r||!h||r===h)return e;const[o,a]=r.OV(i,e);return h.AV(o,a)[1]},OXt(t){const s=this.Nc.l$().f$(t);return s?s.rV():0},FXt(t){const s=this.Nc.l$().f$(t);return s?eG.tr(s.lV()):0},DXt(t){const s=this.Nc.l$().f$(t);return s?100*s.tO():0},LXt(t){const s=this.Nc.l$().f$(t);return s?s.aV():0},kXt(t){const s=this.Nc.l$().f$(t);return s?s.dj():0},NXt(t){const s=this.Nc.l$().f$(t);return s?s.mj():0},$Xt(t){const s=this.Nc.l$().f$(t);return s?100*s.fV():0},BXt(t){const s=this.Nc.l$().f$(t);return s?100*s.mV():0},WXt(t){const s=this.Nc.l$().f$(t);return s?s.XM():0},jXt(t){const s=this.Nc.l$().f$(t);return s?s.tk():-1},VXt(){const t=this.Nc.I$();return t?t.SWt():""},UXt(t){const s=this.emt;if(!s.Qpt())return 0;if(t){const i=s.smt(t);return i?i.tk():0}return s.Zpt().tk()},HXt(){return this.Nc.cqt()},qXt(t,s,...i){const e=this.Gzt(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let n=e._zt.get(s.toLowerCase());if(!n){if(!e.Izt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;n=e.Izt}const r=n.Xk(),h=n.jk();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!n.Iu())return h;const o=this.Nc.Bk(),a=o.qk().Hk(),l=a.length>0;l&&(n.Yk()?o.DY(a):o.Qgt(a));const u=n.Jyt();for(let t=i.length,s=u.length;t<s;++t)i.push(u[t].Qmt());const c=n.Uk(),f=c.Jk(c.Hk(),n.Yk(),r,h,...i);return l&&o.kY(a),f},zXt(){return this.Nc.rk().$N()},JXt(){return this.XZ()},R_(){return this.Nc.sWt()?"webgpu":"webgl"},YXt(){return this.Nc.sWt()?this.Nc.sWt().iWt():this.Nc.tWt().oF()},XXt(){let t=this.Nc.pM().Vv();return Math.round(100*t/1048576)/100},ZXt:(t,s,i)=>eG._r(t,s,i),KXt:(t,s,i)=>eG.Er(t/100,s/100,i/100),QXt:(t,s,i,e)=>eG.Cr(t/100,s/100,i/100,e/100),tZt:(t,s,i)=>eG.Er(t/255,s/255,i/255),sZt:(t,s,i,e)=>eG.Cr(t/255,s/255,i/255,e/255),iZt(){return this.Nc.dk()},eZt(){return this.Nc.mk()},nZt(){return this.Nc.yk()},rZt(){return this.Nc.Sk()},hZt(){return this.Nc.qk().y5().Ec()},oZt(){return this.Nc.qk().USt()}}}{const nG=self._s;nG.R$.Touch=class extends nG.y_t{constructor(t){super(t)}qn(){super.qn()}}}{let rG=function(){return aG.SW().Aq()};GetTouchSdkInstance=rG;const hG=self._s,oG=self.Ns;hG.R$.Touch.OAt=class extends hG.sCt{constructor(t){super(t)}qn(){super.qn()}B_t(){}W_t(){return self.aZt}};let aG=null;self.aZt=class extends self.LW{constructor(t){super(t),aG=t,t.$$().QN().s$=this}requestPermission(t){oG.ue(t);const s=rG();if("orientation"===t)return s.lZt(0);if("motion"===t)return s.lZt(1);throw new Error("invalid type")}}}{const lG=self._s,uG="touch";lG.R$.Touch.Instance=class extends lG.hCt{constructor(t,s){super(t,uG),this.uZt=new Map,this.cZt=!1,this.fZt=!1,this.dZt=0,this.pZt=0,this.mZt=0,this.gZt=0,this.yZt=0,this.wZt=0,this.SZt=0,this.bZt=0,this.vZt=0,this.MZt=0,this.xZt=0,this.TZt=0,this.GZt=0,this.IZt=0,this._Zt=0,this.CZt=0,this.EZt=0,this.PZt=[],s&&(this.cZt=s[0]),this.gCt("permission-result",(t=>this.AZt(t)));const i=this.$$().wf();this.Xf=new lG.zf(lG.Wf.qf(i,"pointerdown",(t=>this.RZt(t.data))),lG.Wf.qf(i,"pointermove",(t=>this.OZt(t.data))),lG.Wf.qf(i,"pointerup",(t=>this.FZt(t.data,!1))),lG.Wf.qf(i,"pointercancel",(t=>this.FZt(t.data,!0))),lG.Wf.qf(i,"deviceorientation",(t=>this.DZt(t.data))),lG.Wf.qf(i,"deviceorientationabsolute",(t=>this.LZt(t.data))),lG.Wf.qf(i,"devicemotion",(t=>this.kZt(t.data))),lG.Wf.qf(i,"tick2",(t=>this.M6())))}qn(){this.uZt.clear(),super.qn()}RZt(t){if("mouse"===t.pointerType){if(!this.cZt)return;this.fZt=!0}const s=t.pointerId;if(this.uZt.has(s))return;const i=t.pageX-this.Nc.EB(),e=t.pageY-this.Nc.AB(),n=performance.now(),r=this.uZt.size;this.xZt=r,this.TZt=s;const h=lG.Hn(lG.R$.Touch.NZt);h.iOt(n,i,e,s,r),this.uZt.set(s,h),this.xU(lG.R$.Touch.P$.$Zt),this.xU(lG.R$.Touch.P$.BZt),this.IZt=i,this._Zt=e,this.EZt=0,this.xU(lG.R$.Touch.P$.WZt)}OZt(t){if("mouse"===t.pointerType&&!this.fZt)return;const s=this.uZt.get(t.pointerId);if(!s)return;const i=performance.now();if(i-s._F()<2)return;const e=t.pageX-this.Nc.EB(),n=t.pageY-this.Nc.AB();s.XK(i,e,n,t.width,t.height,t.pressure)}FZt(t,s){if("mouse"===t.pointerType){if(!this.fZt)return;this.fZt=!1}const i=performance.now(),e=t.pointerId,n=this.uZt.get(e);if(n){if(this.xZt=n.jZt(),this.TZt=n.aJ(),!s){const s=t.pageX-this.Nc.EB(),i=t.pageY-this.Nc.AB();this.IZt=s,this._Zt=i,this.EZt=1,this.xU(lG.R$.Touch.P$.WZt)}if(this.xU(lG.R$.Touch.P$.VZt),this.xU(lG.R$.Touch.P$.UZt),!s){const t=n.HZt(i);"single-tap"===t?(this.xU(lG.R$.Touch.P$.qZt),this.IZt=n.HM(),this._Zt=n.JM(),this.xU(lG.R$.Touch.P$.zZt)):"double-tap"===t&&(this.xU(lG.R$.Touch.P$.JZt),this.IZt=n.HM(),this._Zt=n.JM(),this.xU(lG.R$.Touch.P$.YZt))}n.qn(),this.uZt.delete(e)}}lZt(t){return this.bCt("request-permission",{type:t}),new Promise(((s,i)=>{this.PZt.push({type:t,resolve:s,reject:i})}))}AZt(t){const s=t.result,i=t.type;this.GZt=i;const e=this.PZt.filter((t=>t.type===i));for(const t of e)t.resolve(s?"granted":"denied");this.PZt=this.PZt.filter((t=>t.type!==i)),s?(this.xU(lG.R$.Touch.P$.XZt),0===i?this.Nc.Lqt():this.Nc.kqt()):this.xU(lG.R$.Touch.P$.ZZt)}DZt(t){"number"==typeof t.webkitCompassHeading?this.dZt=t.webkitCompassHeading:t.absolute&&(this.dZt=t.alpha),this.pZt=t.alpha,this.mZt=t.beta,this.gZt=t.gamma}LZt(t){this.dZt=t.alpha}kZt(t){const s=t.acceleration;s&&(this.yZt=s.x,this.wZt=s.y,this.SZt=s.z);const i=t.accelerationIncludingGravity;i&&(this.bZt=i.x,this.vZt=i.y,this.MZt=i.z)}M6(){const t=performance.now();let s=0;for(const i of this.uZt.values())i._F()<=t-50&&i.KZt(t),i.QZt(t)&&(this.xZt=i.jZt(),this.TZt=i.aJ(),this.CZt=s,this.xU(lG.R$.Touch.P$.tKt),this.IZt=i.HM(),this._Zt=i.JM(),this.xU(lG.R$.Touch.P$.sKt),this.CZt=0),++s}iKt(t){t=Math.floor(t);for(const s of this.uZt.values()){if(0===t)return s;--t}return null}eKt(t,s){return t>=0&&s>=0&&t<this.Nc.iHt()&&s<this.Nc.eHt()}ECt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.uZt.values()].map((t=>({name:"$"+t.aJ(),value:t.HM()+", "+t.JM()})))}]}}}{const cG=self._s;cG.R$.Touch.P$={BZt:()=>!0,UZt:()=>!0,nKt(){return this.uZt.size>0},WZt(t,s){return!!t&&s===this.EZt&&!!this.eKt(this.IZt,this._Zt)&&this.Nc.lk().qkt(t,[[this.IZt,this._Zt]],!1)},rKt(t){if(!t)return!1;const s=this.Nc.sgt().xxt(),i=[...this.uZt.values()].filter((t=>this.eKt(t.HM(),t.JM()))).map((t=>[t.HM(),t.JM()]));return cG.xor(this.Nc.lk().qkt(t,i,s),s)},hKt(t,s,i){const e=this.iKt(t);return!!e&&cG.compare(e.Qq(),s,i)},oKt:()=>!0,aKt:()=>!0,lKt(t,s,i){this.Nc.Lqt();let e=0;return e=0===t?this.pZt:1===t?this.mZt:this.gZt,cG.compare(e,s,i)},uKt(t,s,i){this.Nc.kqt();let e=0;return e=0===t?this.bZt:1===t?this.vZt:2===t?this.MZt:3===t?this.yZt:4===t?this.wZt:this.SZt,cG.compare(e,s,i)},$Zt(t){return(t=Math.floor(t))===this.xZt},VZt(t){return(t=Math.floor(t))===this.xZt},cKt(t){return t=Math.floor(t),this.uZt.size>=t+1},tKt:()=>!0,qZt:()=>!0,JZt:()=>!0,sKt(t){return!!t&&!!this.eKt(this.IZt,this._Zt)&&this.Nc.lk().qkt(t,[[this.IZt,this._Zt]],!1)},zZt(t){return!!t&&!!this.eKt(this.IZt,this._Zt)&&this.Nc.lk().qkt(t,[[this.IZt,this._Zt]],!1)},YZt(t){return!!t&&!!this.eKt(this.IZt,this._Zt)&&this.Nc.lk().qkt(t,[[this.IZt,this._Zt]],!1)},XZt(t){return this.GZt===t},ZZt(t){return this.GZt===t}}}self._s.R$.Touch.Nrt={fKt(t){this.lZt(t)}};{const fG=self._s;fG.R$.Touch.$rt={dKt(){return this.uZt.size},EIt(t){const s=this.iKt(this.CZt);return s?s.pKt(this.Nc.l$(),t,!0):0},PIt(t){const s=this.iKt(this.CZt);return s?s.pKt(this.Nc.l$(),t,!1):0},mKt(t,s){const i=this.iKt(t);return i?i.pKt(this.Nc.l$(),s,!0):0},gKt(t,s){const i=this.iKt(t);return i?i.pKt(this.Nc.l$(),s,!1):0},yKt(t,s){const i=this.uZt.get(t);return i?i.pKt(this.Nc.l$(),s,!0):0},wKt(t,s){const i=this.uZt.get(t);return i?i.pKt(this.Nc.l$(),s,!1):0},SKt(){const t=this.iKt(0);return t?t.HM():0},bKt(){const t=this.iKt(0);return t?t.JM():0},vKt(t){const s=this.iKt(t);return s?s.HM():0},MKt(t){const s=this.iKt(t);return s?s.JM():0},xKt(t){const s=this.uZt.get(t);return s?s.HM():0},TKt(t){const s=this.uZt.get(t);return s?s.JM():0},GKt(t){const s=this.iKt(t);return s?s.Qq():0},IKt(t){const s=this.uZt.get(t);return s?s.Qq():0},_Kt(t){const s=this.iKt(t);return s?fG.tr(s.cj()):0},CKt(t){const s=this.uZt.get(t);return s?fG.tr(s.cj()):0},EKt(){return this.Nc.Lqt(),this.dZt},PKt(){return this.Nc.Lqt(),this.pZt},AKt(){return this.Nc.Lqt(),this.mZt},RKt(){return this.Nc.Lqt(),this.gZt},OKt(){return this.Nc.kqt(),this.bZt},FKt(){return this.Nc.kqt(),this.vZt},DKt(){return this.Nc.kqt(),this.MZt},LKt(){return this.Nc.kqt(),this.yZt},kKt(){return this.Nc.kqt(),this.wZt},NKt(){return this.Nc.kqt(),this.SZt},$Kt(){return this.xZt},BKt(){return this.TZt},WKt(t){const s=this.uZt.get(t);return s?s.jg():0},jKt(t){const s=this.uZt.get(t);return s?s.Kg():0},VKt(t){const s=this.uZt.get(t);return s?s.UKt():0}}}{const dG=self._s,pG=15,mG=500,gG=333,yG=25;let wG=-1e3,SG=-1e3,bG=-1e4;dG.R$.Touch.NZt=class extends dG.Vn{constructor(){super(),this.HKt=0,this.N_=0,this.bVt=0,this.xD=0,this.qKt=0,this.zKt=0,this.JKt=0,this.Ea=0,this.Pa=0,this.YKt=0,this.XKt=0,this.Ey=0,this.Py=0,this.ZKt=0,this.KKt=!1,this.QKt=!1}qn(){}iOt(t,s,i,e,n){this.HKt=e,this.N_=n,this.xD=t,this.qKt=t,this.bVt=t,this.zKt=s,this.JKt=i,this.Ea=s,this.Pa=i,this.YKt=s,this.XKt=i}XK(t,s,i,e,n,r){this.qKt=this.xD,this.xD=t,this.YKt=this.Ea,this.XKt=this.Pa,this.Ea=s,this.Pa=i,this.Ey=e,this.Py=n,this.ZKt=r,!this.QKt&&dG.er(this.zKt,this.JKt,this.Ea,this.Pa)>=15&&(this.QKt=!0)}aJ(){return this.HKt}jZt(){return this.N_}_F(){return this.xD}KZt(t){this.qKt=t}HM(){return this.Ea}JM(){return this.Pa}Qq(){const t=dG.er(this.Ea,this.Pa,this.YKt,this.XKt),s=(this.xD-this.qKt)/1e3;return s>0?t/s:0}cj(){return dG.rr(this.YKt,this.XKt,this.Ea,this.Pa)}jg(){return this.Ey}Kg(){return this.Py}UKt(){return this.ZKt}QZt(t){return!this.KKt&&t-this.bVt>=500&&!this.QKt&&dG.er(this.zKt,this.JKt,this.Ea,this.Pa)<15&&(this.KKt=!0,!0)}HZt(t){return this.KKt?"":t-this.bVt<=333&&!this.QKt&&dG.er(this.zKt,this.JKt,this.Ea,this.Pa)<15?t-bG<=666&&dG.er(wG,SG,this.Ea,this.Pa)<25?(wG=-1e3,SG=-1e3,bG=-1e4,"double-tap"):(wG=this.Ea,SG=this.Pa,bG=t,"single-tap"):""}pKt(t,s,i){if(void 0===s)return t.p$(0).m3(this.Ea,this.Pa)[i?0:1];{const e=t.f$(s);return e?e.AV(this.Ea,this.Pa)[i?0:1]:0}}}}{const vG=self._s;vG.R$.si=class extends vG.y_t{constructor(t){super(t)}qn(){super.qn()}}}{const MG=self._s;MG.R$.si.OAt=class extends MG.sCt{constructor(t){super(t)}qn(){super.qn()}B_t(){}}}{const xG=self._s,TG="browser";xG.R$.si.Instance=class extends xG.hCt{constructor(t,s){super(t,TG),this.tQt="",this.sQt=!1,this.iQt="",this.eQt="",this.nQt=!1,this.rQt=0,this.hQt=0,this.oQt=0,this.aQt=0,this.lQt=!1,this.uQt=!1,this.cQt=new Map,this.fQt=!1,this.dQt="",this.pQt=!1,this.yCt([["online-state",t=>this.mQt(t)],["backbutton",()=>this.gQt()],["sw-message",t=>this.yQt(t)],["hashchange",t=>this.wQt(t)],["install-available",()=>this.SQt()],["app-installed",t=>this.bQt(t)]]);const i=this.$$().wf();this.Xf=new xG.zf(xG.Wf.qf(i,"afterfirstlayoutstart",(()=>this.vQt())),xG.Wf.qf(i,"window-resize",(()=>this.sBt())),xG.Wf.qf(i,"window-focus",(()=>this.uUt())),xG.Wf.qf(i,"window-blur",(()=>this.lUt())),xG.Wf.qf(i,"suspend",(()=>this.MQt())),xG.Wf.qf(i,"resume",(()=>this.xQt()))),this.Nc.T$(this.SCt("get-initial-state",{exportType:this.Nc.MB()}).then((t=>{this.tQt=t.location,this.sQt=t.isOnline,this.iQt=t.referrer,this.eQt=t.title,this.nQt=t.isCookieEnabled,this.rQt=t.screenWidth,this.hQt=t.screenHeight,this.oQt=t.windowOuterWidth,this.aQt=t.windowOuterHeight,this.lQt=t.windowHasFocus,this.uQt=t.isConstructArcade})))}qn(){super.qn()}vQt(){this.wCt("ready-for-sw-messages")}async mQt(t){const s=!!t.isOnline;this.sQt!==s&&(this.sQt=s,this.sQt?await this.C$(xG.R$.si.P$.TQt):await this.C$(xG.R$.si.P$.GQt))}async sBt(){await this.C$(xG.R$.si.P$.IQt)}async uUt(){this.lQt=!0,await this.C$(xG.R$.si.P$._Qt)}async lUt(){this.lQt=!1,await this.C$(xG.R$.si.P$.CQt)}MQt(){this.xU(xG.R$.si.P$.EQt)}xQt(){this.xU(xG.R$.si.P$.PQt)}async gQt(){await this.C$(xG.R$.si.P$.AQt)}yQt(t){const s=t.type;"downloading-update"===s?this.xU(xG.R$.si.P$.RQt):"update-ready"===s||"update-pending"===s?this.xU(xG.R$.si.P$.OQt):"offline-ready"===s&&this.xU(xG.R$.si.P$.FQt)}wQt(t){this.tQt=t.location,this.xU(xG.R$.si.P$.DQt)}SQt(){this.fQt=!0,this.xU(xG.R$.si.P$.LQt)}bQt(t){this.fQt=!1,this.xU(xG.R$.si.P$.kQt)}NQt(){return this.pQt}$Qt(t){t=!!t,this.pQt!==t&&(this.pQt=t,this.wCt("set-warn-on-close",{enabled:t}))}ECt(){const t="plugins.browser.debugger";return[{title:"plugins.browser.name",properties:[{name:t+".user-agent",value:navigator.userAgent},{name:t+".is-online",value:this.sQt},{name:t+".is-fullscreen",value:this.Nc.I$().jBt()}]}]}}}{const GG=self._s;GG.R$.si.P$={BQt(){return this.sQt},TQt:()=>!0,GQt:()=>!0,IQt:()=>!0,_Qt:()=>!0,CQt:()=>!0,WQt(){return this.lQt},jQt(){return this.nQt},VQt(){return this.Nc.I$().jBt()},AQt:()=>!0,UQt(t){return(this.Nc.I$().OJ()<=this.Nc.I$().FJ()?0:1)===t},RQt:()=>!0,OQt:()=>!0,FQt:()=>!0,DQt:()=>!0,LQt:()=>!0,HQt(){return this.fQt},qQt(t){switch(t){case 0:return"accepted"===this.dQt;case 1:return"dismissed"===this.dQt;case 2:return"error"===this.dQt;case 3:return!0;default:return!1}},kQt:()=>!0,zQt(t){const s=this.Nc.I$().UBt();switch(t){case 0:return"browser"===s;case 1:return"minimal-ui"===s;case 2:return"standalone"===s;case 3:return"fullscreen"===s;default:return!1}},JQt(){return this.NQt()},YQt(){return!this.Nc.oN()},EQt:()=>!0,PQt:()=>!0,XQt:()=>!1,ZQt:()=>!1,KQt:()=>!1,QQt:()=>!1,t0t:()=>!1,s0t:()=>!0,i0t:()=>!0}}{const C3=self._s,ORIENTATIONS=["portrait","landscape","portrait-primary","portrait-secondary","landscape-primary","landscape-secondary"];C3.R$.si.Nrt={e0t(t){this.wCt("alert",{message:t.toString()})},n0t(){this.uQt||(this.Nc.AU()?self.RU.r0t():this.wCt("close"))},h0t(){this.wCt("set-focus",{isFocus:!0})},o0t(){this.wCt("set-focus",{isFocus:!1})},a0t(){this.uQt||this.wCt("navigate",{type:"back"})},l0t(){this.uQt||this.wCt("navigate",{type:"forward"})},u0t(){},c0t(){this.uQt||(this.Nc.AU()?this.Nc.bUt({type:"reload"}):this.wCt("navigate",{type:"reload"}))},f0t(t,s){this.bCt("navigate",{type:"url",url:t,target:s,exportType:this.Nc.MB()})},d0t(t,s){this.bCt("navigate",{type:"new-window",url:t,tag:s,exportType:this.Nc.MB()})},p0t(t,s){t>=2&&(t+=1),6===t&&(t=2),1===t&&(t=0);const i=C3.DNt.XBt(t);this.Nc.I$().qBt(i),this.bCt("request-fullscreen",{navUI:s})},m0t(){this.bCt("exit-fullscreen")},g0t(t){const s=t.split(",");for(let t=0,i=s.length;t<i;++t)s[t]=parseInt(s[t],10);this.bCt("vibrate",{pattern:s})},async n$(t,s){if(!t||!s)return;const i=await this.Nc.rk().H$(t);this.Nc.n$(i,s)},y0t(t,s,i){if(!i)return;const e=`data:${s},${encodeURIComponent(t)}`;this.Nc.n$(e,i)},w0t(t,s){s=s.toString(),0===t?console.log(s):1===t?console.warn(s):2===t&&console.error(s)},S0t(t){console.group(t)},b0t(){console.groupEnd()},v0t(jsStr){try{eval(jsStr)}catch(t){console.error("Error executing JavaScript: ",t)}},M0t(t){if((t=Math.floor(t))<0||t>=ORIENTATIONS.length)return;const s=ORIENTATIONS[t];this.bCt("lock-orientation",{orientation:s})},x0t(){this.bCt("unlock-orientation")},eB(t){this.Nc.rk().eB(t)},async T0t(t,s,i,e){await this.SCt("set-document-css-style",{prop:C3.vo(t),value:s,selector:i,"is-all":0!==e})},async G0t(t,s,i){const e=await this.SCt("get-document-css-style",{prop:t,selector:s});e.isOk&&this.cQt.set(i.toLowerCase(),e.result.trim())},I0t(t){this.wCt("set-hash",{hash:t})},_0t(t,s){this.wCt("set-window-size",{windowWidth:t,windowHeight:s})},C0t(t,s){this.wCt("set-window-position",{windowX:t,windowY:s})},async E0t(){const t=await this.SCt("request-install");this.dQt=t.result,this.xU(C3.R$.si.P$.qQt)},P0t(t){this.$Qt(t)}}}{const C3=self._s;C3.R$.si.$rt={URL(){return this.Nc.Tk()?this.tQt:location.toString()},A0t(){return this.Nc.Tk()?new URL(this.tQt).protocol:location.protocol},R0t(){return this.Nc.Tk()?new URL(this.tQt).hostname:location.hostname},Port(){return this.Nc.Tk()?new URL(this.tQt).port:location.port},O0t(){return this.Nc.Tk()?new URL(this.tQt).pathname:location.pathname},F0t(){return this.Nc.Tk()?new URL(this.tQt).hash:location.hash},Ys(){return this.Nc.Tk()?new URL(this.tQt).search:location.search},D0t(t){const s=this.Nc.Tk()?new URL(this.tQt).search:location.search,i=RegExp("[?&]"+t+"=([^&]*)").exec(s);return i?decodeURIComponent(i[1].replace(/\+/g," ")):""},L0t(){return this.iQt},k0t(){return this.eQt},N0t:()=>navigator.language,Ks:()=>navigator.platform,$0t:()=>navigator.userAgent,B0t(jsStr){let result=0;try{result=eval(jsStr)}catch(t){console.error("Error executing JavaScript: ",t)}return"number"==typeof result||"string"==typeof result?result:"boolean"==typeof result&&result?1:0},CSSStyleValue(t){return this.cQt.get(t)||""},W0t:()=>navigator.appName,j0t:()=>navigator.appVersion,V0t:()=>navigator.product,U0t:()=>navigator.vendor,H0t:()=>1,q0t:()=>1/0,z0t(){const t=navigator.connection;return t&&(t.downlink||t.downlinkMax||t.bandwidth)||1/0},ConnectionType(){const t=navigator.connection;return t&&t.type||"unknown"},J0t:()=>self.devicePixelRatio,Y0t(){return this.rQt},X0t(){return this.hQt},Z0t(){return this.Nc.I$().OJ()},K0t(){return this.Nc.I$().FJ()},Q0t(){return this.oQt},t1t(){return this.oQt},s1t(){return this.Nc.I$().UBt()},i1t(){return this.dQt}}}{const IG=self._s;IG.R$.Text=class extends IG.y_t{constructor(t){super(t)}qn(){super.qn()}}}{const _G=self._s;_G.R$.Text.OAt=class extends _G.sCt{constructor(t){super(t)}qn(){super.qn()}B_t(){}O5(t){}B5(){}}}{const CG=self._s,EG=self.Ns,PG=[0,0,0],AG=0,RG=1,OG=2,FG=3,DG=4,LG=5,kG=6,NG=7,$G=8,BG=9,WG=10,jG=11,VG=12,UG=13,HG=15,qG=["left","center","right"],zG=["top","center","bottom"],JG=["ltr","rtl"],YG=["word","cjk","character"],XG=new CG.Rect,ZG=new CG.Cl,KG=new CG.To,QG=CG.Hn(CG.Ca),tI=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]);CG.R$.Text.Instance=class extends CG.FCt{constructor(t,s){if(super(t),this.$c="",this.e1t=!0,this.n1t="Arial",this.r1t=12,this.h1t=0,this.lE=!1,this.uE=!1,this.AM=CG.Hn(CG.To),this.gE=0,this.yE=0,this.bE="word",this.vE=0,this.o1t="auto",this.a1t=1,this.l1t=null,this.u1t="",this.c1t=!1,this.f1t=!1,this.d1t=null,this.p1t=-1,this.m1t=-1,this.g1t=0,this.y1t=CG.Hn(CG.kw.qv,this.Nc.pM(),{timeout:5}),this.y1t.JE=()=>this.Nc.w$(),this.w1t=()=>this.S1t(),this.b1t=!1,s){this.$c=s[AG],this.e1t=!!s[RG],this.n1t=s[OG],this.r1t=s[FG],this.h1t=s[DG],this.lE=!!s[LG],this.uE=!!s[kG],this.gE=s[$G],this.yE=s[BG],this.bE=YG[s[WG]],this.vE=s[jG],this.v1t(this.Nc._Y(s[VG]));const t=s[NG];this.AM.Po(t[0],t[1],t[2]),this.c$().zj(s[UG]),this.f1t=!!s[HG]}this.M1t(),this.x1t()}qn(){this.v1t(null),this.T1t(),this.d1t&&(this.d1t.qn(),this.d1t=null),this.y1t.qn(),this.y1t=null,super.qn()}M1t(){const t=this.y1t;t.jc(this.$c),t.KE(this.e1t),this.y1t.iE()&&this.l1t?this.y1t.Bg(this.$$().hqt(this.l1t)):this.y1t.Bg(null),t.QE("nearest"!==this.Nc.Ek()),t.tP(this.n1t),t.nP(this.h1t),t.hP(this.lE),t.aP(this.uE),t.DM(this.AM),t.mP(qG[this.gE]),t.yP(zG[this.yE]),t.SP(this.bE),t.vP(JG[this.vE])}G1t(){const t=this.c$();this.y1t.sP(this.r1t),this.y1t.eP(t.FDt());const s=t.f$();let i;"auto"===this.o1t?i=s.u2(t.cH()):"fixed"===this.o1t&&(i=this.a1t),t.vq()&&i!==this.y1t.GP()&&t.LLt(!0),this.y1t.TP(t.jg(),t.Kg(),i)}v1t(t){t&&(t.k0()||t.MW().constructor!==CG.R$.rrt)||t!==this.l1t&&(this.l1t&&this.l1t.wf().removeEventListener("animationframeimagechange",this.w1t),this.l1t=t,this.l1t&&this.l1t.wf().addEventListener("animationframeimagechange",this.w1t),this.M1t(),this.c1t=!1,this.Nc.w$())}S1t(){this.Nc.oqt(this.l1t),this.Nc.w$(),this.b1t=!0}x1t(){if(this.f1t){let t=this.$c;this.e1t&&(t=CG.pn.Fg(t)),this.d1t?this.d1t.jc(t):this.d1t=CG.Hn(CG.kc,this.Nc,t)}else this.d1t&&(this.d1t.qn(),this.d1t=null)}Bx(t){const s=this.c$();this.G1t(),this.b1t&&(this.b1t=!1,this.y1t.iE()&&this.l1t&&this.y1t.Bg(this.$$().hqt(this.l1t)));const i=this.y1t.cG();if(!i)return;const e=s.f$();if(0===s.cj()&&0===e.cj()&&0===s.cH()&&!s.vq()&&e.I1()){const n=s.gH(),[r,h]=e.kV(n.$r(),n.Br()),[o,a]=e.kV(n.Vr(),n.Ur()),l=r-Math.round(r),u=h-Math.round(h);XG.set(r,h,o,a),XG.offset(-l,-u),ZG.Yl(XG);const[c,f]=t.SO(t.NO());this.Nc.I$()._X(t,c,f),t.rO(i),t.ev(ZG,this.y1t.sA()),e.EX(t)}else t.rO(i),s.vq()?this.I1t(s,t):this._1t(s,t)}_1t(t,s){let i=t.gH();this.Nc.Ak()&&(i=this.C1t(i)),s.ev(i,this.y1t.sA())}I1t(t,s){const i=t.DLt();if(t.kLt()){t.dH(XG,ZG,!1);let s=ZG;this.Nc.Ak()&&(s=this.C1t(s)),i.$x(t.Mq(),s,this.y1t.sA()),t.LLt(!1)}i.Bx(s)}C1t(t){const s=t.$r()-Math.round(t.$r()),i=t.Br()-Math.round(t.Br());return 0===s&&0===i?t:(ZG.S(t),ZG.offset(-s,-i),ZG)}VCt(){const t=this.y1t.cG();return t?[t.jg(),t.Kg()]:[100,100]}UCt(){return this.y1t.sA()}zCt(){return!1}hx(){const t={t:this.$c,c:this.AM.toJSON(),fn:this.n1t,ps:this.r1t};return this.e1t&&(t.bbc=this.e1t),0!==this.gE&&(t.ha=this.gE),0!==this.yE&&(t.va=this.yE),"word"!==this.bE&&(t.wr=this.bE),0!==this.h1t&&(t.lho=this.h1t),this.lE&&(t.b=this.lE),this.uE&&(t.i=this.uE),-1!==this.m1t&&(t.tw={st:this.p1t,en:this.m1t,l:this.g1t}),this.l1t&&(t.ioc=this.l1t.U0()),"fixed"===this.o1t&&(t.fs=this.a1t),t}ox(t){if(this.T1t(),this.$c=t.t,this.AM.wa(t.c),this.n1t=t.fn,this.r1t=t.ps,this.e1t=!!t.hasOwnProperty("bbc")&&t.bbc,this.gE=t.hasOwnProperty("ha")?t.ha:0,this.yE=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.bE="boolean"==typeof s?s?"word":"character":s}else this.bE="word";if(this.h1t=t.hasOwnProperty("lho")?t.lho:0,this.lE=!!t.hasOwnProperty("b")&&t.b,this.uE=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const s=t.tw;this.p1t=s.st,this.m1t=s.en,this.g1t=s.l}if(t.hasOwnProperty("ioc")){const s=this.$$()._Y(t.ioc);s&&this.v1t(s)}else this.v1t(null);t.hasOwnProperty("fs")?(this.o1t="fixed",this.a1t=t.fs):this.o1t="auto",this.M1t(),this.x1t(),this.c1t=!1,-1!==this.m1t&&this.GCt()}vht(t){switch(t){case AG:return this.xP();case RG:return this.e1t;case OG:return this.E1t();case FG:return this.P1t();case DG:return this.A1t();case LG:return this.R1t();case kG:return this.O1t();case NG:return PG[0]=this.AM.No(),PG[1]=this.AM.$o(),PG[2]=this.AM.Bo(),PG;case $G:return this.F1t();case BG:return this.D1t();case WG:return this.L1t();case HG:return this.k1t()}}_ht(t,s){switch(t){case AG:this.N1t(s);break;case RG:if(this.e1t===!!s)return;this.e1t=!!s,this.M1t();break;case OG:this.$1t(s);break;case FG:this.B1t(s);break;case DG:this.W1t(s);break;case LG:this.j1t(s);break;case kG:this.V1t(s);break;case NG:const t=this.AM,i=s;if(t.No()===i[0]&&t.$o()===i[1]&&t.Bo()===i[2])return;this.AM.Po(i[0],i[1],i[2]),this.M1t();break;case $G:this.U1t(s);break;case BG:this.H1t(s);break;case WG:this.q1t(s)}}PCt(t,s,i,e){0===s&&0===i&&0===e||t!==NG||(this.AM.Ao(s,i,e),this.M1t())}N1t(t){this.$c!==t&&(this.$c=t,this.y1t.jc(t),this.x1t(),this.c1t=!1,this.Nc.w$())}xP(){return this.$c}z1t(t,s){this.G1t(),this.N1t(t),this.p1t=this.Nc.yN(),this.m1t=this.p1t+s/this.nJ().rU(),this.g1t=this.y1t.EP(),this.y1t.uP(0),this.GCt()}T1t(){this.p1t=-1,this.m1t=-1,this.g1t=0,this.y1t.uP(-1),this.lCt()}J1t(){-1!==this.m1t&&(this.T1t(),this.xU(CG.R$.Text.P$.Y1t),this.Nc.w$())}$1t(t){this.n1t!==t&&(this.n1t=t,this.y1t.tP(t),this.Nc.w$())}E1t(){return this.n1t}j1t(t){t=!!t,this.lE!==t&&(this.lE=t,this.y1t.hP(t),this.Nc.w$())}R1t(){return this.lE}V1t(t){t=!!t,this.uE!==t&&(this.uE=t,this.y1t.aP(t),this.Nc.w$())}O1t(){return this.uE}B1t(t){this.r1t!==t&&(this.r1t=t,this.Nc.w$())}P1t(){return this.r1t}X1t(t){this.AM.Ho(t)||(this.AM.ko(t),this.y1t.DM(this.AM),this.Nc.w$())}Z1t(){return this.AM}W1t(t){this.h1t!==t&&(this.h1t=t,this.M1t(),this.Nc.w$())}A1t(){return this.h1t}U1t(t){this.gE!==t&&(this.gE=t,this.M1t(),this.Nc.w$())}F1t(){return this.gE}H1t(t){this.yE!==t&&(this.yE=t,this.M1t(),this.Nc.w$())}D1t(){return this.yE}K1t(t){this.q1t(YG[t])}q1t(t){this.bE!==t&&(this.bE=t,this.M1t(),this.Nc.w$())}L1t(){return this.bE}Q1t(t){this.vE!==t&&(this.vE=t,this.M1t(),this.Nc.w$())}t2t(){return this.vE}s2t(t){this.f1t=!!t,this.x1t()}k1t(){return this.f1t}i2t(t){this.o1t!==t&&(this.o1t=t,this.Nc.w$())}e2t(){return this.o1t}n2t(t){this.a1t!==t&&(this.a1t=t,"fixed"===this.o1t&&this.Nc.w$())}r2t(){return this.a1t}h2t(){return this.G1t(),this.y1t.IP()}o2t(){return this.G1t(),this.y1t.CP()}a2t(t,s){this.G1t();const i=this.c$();QG.set(t-i.HM(),s-i.JM()),QG.rotate(-i.cj()),QG.offset(i.jg()*i.eH(),i.Kg()*i.hH()),QG.St(i.jg(),i.Kg()),QG.scale(this.y1t.jg(),this.y1t.Kg());const e=this.y1t.AP(QG.Oa(),QG.Da());if(e){const t=e.Uy("tag");if(t)return t.Cg}return""}l2t(t,s,i){const e=this.a2t(s,i);return e&&CG.Ke(t,e)}u2t(t,s){this.G1t(),s=Math.floor(s);const i=this.y1t.OP(t,s);if(!i)return null;const e=this.c$(),n=this.y1t.dP(),r=i.$y(),h=i.Wy()-(i.Kg()-i.ty())*n,o=i.jg()*n/this.y1t.jg()*e.jg(),a=i.Kg()*n/this.y1t.Kg()*e.Kg();return QG.set(r,h),QG.St(this.y1t.jg(),this.y1t.Kg()),QG.scale(e.jg(),e.Kg()),QG.offset(-e.jg()*e.eH(),-e.Kg()*e.hH()),QG.rotate(e.cj()),QG.offset(e.HM(),e.JM()),{x:QG.Oa(),y:QG.Da(),width:o,height:a}}c2t(t){return this.G1t(),this.y1t.FP(t)}f2t(t){let s=tI.get(t);return null===s?"":(s||(s="span"),`</${s||"span"}>`)}d2t(t,s){let i=tI.get(t);if(null===i)return"";switch(i||(i="span"),t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async p2t(){if(this.c1t)return this.u1t;const t=new CG.pn(this.$c,{dg:!0}).Ig(),s=new Map;let i='<span class="c3-text"';const e=[];e.push(`font-family: '${this.E1t()}';`),this.R1t()&&e.push("font-weight: bold;"),this.O1t()&&e.push("font-style: italic;"),"character"===this.L1t()&&e.push("word-break: break-all;"),i+=` style="${e.join(" ")}">`;const n=this.l1t?this.$$().hqt(this.l1t):null;if(this.l1t){const i=CG.Hn(CG.Ud),e=[],r=new Map;for(const s of t)if(s.Xg()){const t=s.Xy(n);if(t){const s=t.Ow().gz().gPt();if(r.has(s))continue;r.set(s,null),e.push(i.$u((async()=>{const t=await s.EK();r.set(s,t)})))}}await Promise.all(e);const h=[];for(const e of t)if(e.Xg()){const t=e.Xy(n);if(t){const e=t.Ow(),n=e.gz().gPt();h.push(i.$u((async()=>{const i=await e.gz().wPt(r.get(n));s.set(t,i)})))}}await Promise.all(h);for(const t of r.values())t instanceof ImageBitmap&&t.close&&t.close()}const r=new Map;for(const e of t){const t=e.qy();let h=[...r.keys()];h.reverse();for(const s of h)t.has(s)&&t.get(s)===r.get(s)||(r.delete(s),i+=this.f2t(s));for(const[s,e]of t)r.has(s)||(r.set(s,e),i+=this.d2t(s,e));if(e.Jg()&&(i+=CG.Em(CG._m(e.yy().join("")),"\n","<br>")),e.Xg()&&n){const r=e.Xy(n);if(r){const n=s.get(r);if(n){const s=[];let h="0.2em";const o=t.get("iconoffsety");if(o){let t=o.trim();h=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}s.push(`top: ${h}`),"nearest"===this.Nc.Ek()&&s.push("image-rendering: pixelated"),i+=`<img class="c3-text-icon" data-icon="${e.Yy()}" width="${r.jg()}" height="${r.Kg()}" style="${s.join(";")}" src="${n}">`}}}}const h=[...r.keys()];h.reverse();for(const t of h)i+=this.f2t(t);return i+="</span>",this.u1t=i,this.c1t=!0,this.u1t}E8(){const t=this.Nc.yN();if(t>=this.m1t)this.T1t(),this.xU(CG.R$.Text.P$.Y1t),this.Nc.w$();else{let s=CG.gr(this.p1t,this.m1t,t,0,this.g1t);s=Math.floor(s),s!==this.y1t.cP()&&(this.y1t.uP(s),this.Nc.w$())}}ECt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.xP(),m2t:t=>this.N1t(t)},{name:t+".properties.font.name",value:this.E1t(),m2t:t=>this.$1t(t)},{name:t+".properties.size.name",value:this.P1t(),m2t:t=>this.B1t(t)},{name:t+".properties.line-height.name",value:this.A1t(),m2t:t=>this.W1t(t)},{name:t+".properties.bold.name",value:this.R1t(),m2t:t=>this.j1t(t)},{name:t+".properties.italic.name",value:this.O1t(),m2t:t=>this.V1t(t)}]}]}W_t(){return self.g2t}};const sI=new WeakMap,iI=new Map([["left",0],["center",1],["right",2]]),eI=new Map([["top",0],["center",1],["bottom",2]]),nI=["ltr","rtl"];self.g2t=class extends self.Iq{constructor(){super(),sI.set(this,self.BV.UV().Aq())}get text(){return sI.get(this).xP()}set text(t){EG.ue(t);const s=sI.get(this);s.T1t(),s.N1t(t)}y2t(t,s){EG.ue(t),EG.he(s);const i=sI.get(this);i.T1t(),i.z1t(t,s)}w2t(){sI.get(this).J1t()}set AX(t){EG.ue(t),sI.get(this).$1t(t)}get AX(){return sI.get(this).E1t()}set OX(t){sI.get(this).j1t(t)}get OX(){return sI.get(this).R1t()}set FX(t){sI.get(this).V1t(t)}get FX(){return sI.get(this).O1t()}set RX(t){EG.he(t),sI.get(this).B1t(t)}get RX(){return sI.get(this).P1t()}set S2t(t){if(EG.Ge(t),t.length<3)throw new Error("expected 3 elements");KG.Po(t[0],t[1],t[2]),sI.get(this).X1t(KG)}get S2t(){const t=sI.get(this).Z1t();return[t.No(),t.$o(),t.Bo()]}set lineHeight(t){EG.he(t),sI.get(this).W1t(t)}get lineHeight(){return sI.get(this).A1t()}set kX(t){EG.ue(t);const s=iI.get(t);if(void 0===s)throw new Error("invalid mode");sI.get(this).U1t(s)}get kX(){return qG[sI.get(this).F1t()]}set verticalAlign(t){EG.ue(t);const s=eI.get(t);if(void 0===s)throw new Error("invalid mode");sI.get(this).H1t(s)}get verticalAlign(){return zG[sI.get(this).D1t()]}set NX(t){if(!YG.includes(t))throw new Error("invalid mode");sI.get(this).q1t(t)}get NX(){return sI.get(this).L1t()}set $X(t){EG.ue(t);const s=nI.indexOf(t);if(-1===s)throw new Error("invalid text direction");sI.get(this).Q1t(s)}get $X(){return nI[sI.get(this).t2t()]}set b2t(t){sI.get(this).s2t(!!t)}get b2t(){return sI.get(this).k1t()}v2t(t){EG.he(t);const s=sI.get(this);s.i2t("fixed"),s.n2t(t)}M2t(){sI.get(this).i2t("auto")}get jX(){return sI.get(this).h2t()}get VX(){return sI.get(this).o2t()}x2t(){const t=sI.get(this);return[t.h2t(),t.o2t()]}T2t(t,s,i){return EG.ue(t),EG.he(s),EG.he(i),sI.get(this).l2t(t,s,i)}G2t(t,s){return EG.he(t),EG.he(s),sI.get(this).a2t(t,s)}I2t(t,s=0){return EG.ue(t),EG.he(s),sI.get(this).u2t(t,s)}_2t(t){return EG.ue(t),sI.get(this).c2t(t)}C2t(t){const s=sI.get(this),i=s.$$().mB(t);s.v1t(i)}E2t(){return sI.get(this).p2t()}}}{const rI=self._s;rI.R$.Text.P$={P2t(t,s){return s?this.$c===t:rI.Ke(this.$c,t)},A2t(){return-1!==this.m1t},Y1t:()=>!0,R2t(t,s,i){return this.l2t(t,s,i)}}}{const hI=self._s,oI=hI.Hn(hI.To);hI.R$.Text.Nrt={jc(t){this.T1t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.N1t(t.toString())},O2t(t){this.T1t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),(t=t.toString())&&this.N1t(this.$c+t)},F2t(t,s){this.T1t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.z1t(t.toString(),s)},D2t(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.n1t&&i===this.lE&&e===this.uE||(this.$1t(t),this.j1t(i),this.V1t(e))},sP(t){this.B1t(t)},L2t(t){oI.Qo(t),oI.Zn(),this.X1t(oI)},k2t(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},N2t(t){this.c$().FM(t),this.Nc.w$()},$2t(){this.J1t()},nP(t){this.W1t(t)},B2t(t){this.U1t(t)},W2t(t){this.H1t(t)},j2t(t){this.K1t(t)},vP(t){this.Q1t(t)},V2t(t){this.v1t(t)},U2t(){return this.p2t()},H2t(t){this.s2t(t)},q2t(t,s){this.i2t(["auto","fixed"][t]),this.n2t(s)}}}{const aI=self._s;aI.R$.Text.$rt={Text(){return this.$c},z2t(){return this.e1t?aI.pn.Fg(this.$c):this.$c},J2t(){return this.n1t},Y2t(){return this.r1t},X2t(){return this.h2t()},Z2t(){return this.o2t()},K2t(){return this.h1t},Q2t(t,s){return this.a2t(t,s)},t3t(t){return this.c2t(t)},s3t(t,s){const i=this.u2t(t,s);return i?i.x:0},i3t(t,s){const i=this.u2t(t,s);return i?i.y:0},e3t(t,s){const i=this.u2t(t,s);return i?i.width:0},n3t(t,s){const i=this.u2t(t,s);return i?i.height:0},r3t(){return this.u1t}}}{const lI=self._s;lI.R$.rrt=class extends lI.y_t{constructor(t){super(t)}qn(){super.qn()}}}{const uI=self._s,cI=self.Ns,fI=[];uI.R$.rrt.OAt=class extends uI.sCt{constructor(t){super(t),this.IAt=t.cRt()}qn(){uI.bh(this.IAt),super.qn()}B_t(){for(const t of this.IAt)t._Pt(this.Nc)}O5(t){const s={Zx:this.Nc.Ek()};return Promise.all(this.IAt.map((i=>i.CPt(t,s))))}B5(){for(const t of this.IAt)t.EPt()}L5(){this.h3t()}h3t(){for(const t of this.Ddt.OW())t.Aq().o3t()}Fxt(t){uI.R$.rrt.YIt(this,t)}STt(t){fI.push({rCt:null,a3t:!1,TW:[]})}l3t(t,s,i){const e=fI.at(-1);e.rCt=t,e.a3t=i,e.TW.push(s)}bTt(t){const s=fI.pop(),i=s.rCt,e=s.a3t;if(!i)return;const n=new Map;for(const t of s.TW)t.xOt(n,i,e);for(const[t,s]of n)t.DW().rpt(s)}u3t(t){const s=this.WV().gRt(t),i=this.$$();return s.PPt(0).gz().SX(i.pM(),{Zx:i.Ek()}).then((()=>this.h3t())),s}c3t(t){for(const s of this.Ddt.OW())s.Aq().f3t(t);this.WV().yRt(t)}d3t(t,s){const i=this.Ddt.pRt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.FPt(s);e<0&&(e+=i.az()+1);const n=uI.TPt.IPt(this.$$());i.APt(n,e);const r=this.$$();n.gz().SX(r.pM(),{Zx:r.Ek()}).then((()=>this.h3t()));for(const t of this.Ddt.OW())t.Aq().p3t();return n}m3t(t,s){const i=this.Ddt.pRt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.az())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.FPt(s);e<0&&(e+=i.az()),i.RPt(e);for(const t of this.Ddt.OW())t.Aq().p3t()}W_t(){return self.g3t}};const dI=new WeakMap;self.g3t=class extends self.LW{constructor(t){super(t),dI.set(this,t.wTt())}y3t(t){cI.ue(t);const s=dI.get(this).WV().pRt(t);return s?s.DPt():null}w3t(){return dI.get(this).WV().dRt().map((t=>t.DPt()))}S3t(t){return cI.ue(t),dI.get(this).u3t(t).DPt()}b3t(t){cI.ue(t),dI.get(this).c3t(t)}v3t(t,s){if(cI.ue(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return dI.get(this).d3t(t,s).cz()}M3t(t,s){if(cI.ue(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");dI.get(this).m3t(t,s)}}}{const pI=self._s,mI=self.Ns,gI=0,yI=1,wI=2,SI=3,bI=pI.Hn(pI.Rect),vI=pI.Hn(pI.Cl),MI=pI.Hn(pI.Ca),xI=1,TI=2,GI=4;pI.R$.rrt.Instance=class extends pI.FCt{constructor(t,s){super(t);let i=!0,e="",n=0,r=!0;s&&(i=!!s[gI],e=s[yI],n=s[wI],r=s[SI]),this.x3t=this.Ddt.pRt(e)||this.Ddt.cRt()[0],this.T3t=pI.Zn(n,0,this.x3t.az()-1),this.G3t=this.x3t.PPt(this.T3t);const h=this.G3t.gz();this.I3t=h.cG(),this._3t=h.sA(),this.C3t=h.qCt(),this.NCt(),t.vOt(TI,!0),t.vOt(xI,this.x3t.Qq()>=0),this.E3t=Math.abs(this.x3t.Qq()),this.P3t=this.x3t.rz(),this.A3t=pI.Hn(pI.Qf),this.R3t=0,this.O3t=0,this.F3t="",this.D3t=-1,this.L3t="",this.k3t=0;const o=this.c$();this.N3t=o.gH(),o.zj(i),o.RH(r),o.nH(this.G3t.eH()),o.oH(this.G3t.hH()),o.TLt(this.G3t.Iz()),o.KU(),1===this.Ddt.fRt()&&1===this.Ddt.cRt()[0].az()||0===this.E3t||this.GCt()}qn(){this.x3t=null,this.G3t=null,this.I3t=null,this.A3t=null,super.qn()}jCt(){return this.G3t.gz()}Lit(){return!0}GK(){this.I3t=null}WCt(){this.o3t()}Bx(t){const s=this.I3t;if(null===s)return;t.rO(s);const i=this.c$();i.vq()?this.I1t(i,t):this._1t(i,t)}_1t(t,s){let i=this.N3t;this.Nc.Ak()&&(i=t.yLt(i)),s.mO(i,this.C3t)}I1t(t,s){const i=t.DLt();if(t.kLt()){t.dH(bI,vI,!1);let s=vI;this.Nc.Ak()&&(s=t.yLt(s)),i.$x(t.Mq(),s,this.C3t),t.LLt(!1)}i.Bx(s)}$3t(){return this.A3t.qs()}B3t(){return this.di.MOt(TI)}W3t(t){this.di.vOt(TI,t)}j3t(){return this.di.MOt(xI)}V3t(t){this.di.vOt(xI,t)}U3t(){return this.di.MOt(GI)}H3t(t){this.di.vOt(GI,t)}E8(){this.L3t&&this.q3t(),this.D3t>=0&&this.z3t();const t=this.E3t;if(!this.B3t()||0===t)return void this.lCt();const s=this.Nc.lN(this.di);this.A3t.$u(s);const i=this.$3t(),e=this.G3t,n=e.yz()/t;if(i<this.R3t+n)return;const r=this.x3t,h=this.P3t,o=r.az(),a=r.ez(),l=r.sz(),u=r.oz();this.j3t()?this.T3t++:this.T3t--,this.R3t+=n,this.T3t>=o&&(u?(this.V3t(!1),this.T3t=o-2):l?this.T3t=h:(this.O3t++,this.O3t>=a?this.J3t(!1):this.T3t=h)),this.T3t<0&&(u?(this.T3t=1,this.V3t(!0),l||(this.O3t++,this.O3t>=a&&this.J3t(!0))):l?this.T3t=h:(this.O3t++,this.O3t>=a?this.J3t(!0):this.T3t=h)),this.T3t=pI.Zn(this.T3t,0,o-1);const c=r.PPt(this.T3t);i>this.R3t+c.yz()/t&&(this.R3t=i),this.Y3t(e,c)}J3t(t){this.T3t=t?0:this.x3t.az()-1,this.W3t(!1),this.F3t=this.x3t.Ec(),this.H3t(!0),this.nCt("animationend",!1,{animationName:this.F3t}),this.xU(pI.R$.rrt.P$.X3t),this.xU(pI.R$.rrt.P$.Z3t),this.H3t(!1),this.O3t=0}Y3t(t,s,i){if(t===s)return;const e=this.c$(),n=t.gz(),r=s.gz(),h=n.jg(),o=n.Kg(),a=r.jg(),l=r.Kg();i&&i.hrt?i.hrt(e,h,o,a,l):(h!==a&&e.Yg(e.jg()*(a/h)),o!==l&&e.Vg(e.Kg()*(l/o))),e.nH(s.eH()),e.oH(s.hH()),e.TLt(s.Iz()),e.KU(),this.G3t=s,this.I3t=r.cG(),this._3t=r.sA(),this.C3t=r.qCt();const u=this.nJ().Qnt();for(let i=0,e=u.length;i<e;++i)u[i].AEt(t,s);this.nCt("framechange",!1,{animationName:this.x3t.Ec(),K3t:this.T3t}),this.xU(pI.R$.rrt.P$.Q3t),this.Nc.w$()}t5t(t){this.W3t(!0),this.R3t=this.$3t(),1===t&&0!==this.T3t&&(this.D3t=0,this.U3t()||this.z3t()),this.GCt()}s5t(t,s,i){this.L3t=t,this.k3t=s,this.GCt(),!i&&this.U3t()||this.q3t()}i5t(){return this.x3t}e5t(){return this.L3t?this.L3t:this.x3t.Ec()}f3t(t){pI.Ke(t,this.e5t())&&this.s5t(this.Ddt.wRt().Ec(),1,!0)}n5t(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.Ddt.pRt(this.e5t());if(!s)return;if(-1===(t=s.OPt(t)))return}isFinite(t)&&(this.D3t=t,this.U3t()||this.z3t())}p3t(){if(this.L3t||-1!==this.D3t)return;const t=this.G3t,s=this.x3t.PPt(pI.Zn(this.T3t,0,this.x3t.az()-1));t!==s&&this.Y3t(t,s),this.x3t.az()>1&&this.E3t>0&&this.GCt()}r5t(){return this.T3t}h5t(){return this.G3t.Pz()}o5t(t){this.E3t=Math.abs(t),this.V3t(t>=0),this.E3t>0&&this.GCt()}a5t(){return this.j3t()?this.E3t:-this.E3t}l5t(t){"string"==typeof t&&-1===(t=this.x3t.OPt(t))||(t=pI.Zn(Math.floor(t),0,this.x3t.az()-1),this.P3t=t)}u5t(){return this.P3t}q3t(t){const s=this.G3t,i=this.Ddt.pRt(this.L3t);if(this.L3t="",!i)return;if(i===this.x3t&&this.B3t())return;this.x3t=i,this.V3t(i.Qq()>=0),this.E3t=Math.abs(i.Qq()),this.P3t=i.rz(),this.T3t=pI.Zn(this.T3t,0,this.x3t.az()-1),1===this.k3t&&(this.T3t=0),this.W3t(!0),this.R3t=this.$3t();const e=this.x3t.PPt(this.T3t);this.Y3t(s,e,t)}z3t(t){const s=this.G3t,i=this.T3t;if(this.T3t=pI.Zn(Math.floor(this.D3t),0,this.x3t.az()-1),this.D3t=-1,!t&&i===this.T3t)return;const e=this.x3t.PPt(this.T3t);this.Y3t(s,e),this.R3t=this.$3t()}o3t(){const t=this.G3t.gz();this.I3t=t.cG(),this._3t=t.sA(),this.C3t=t.qCt(),this.c$().LLt(!0)}cG(){return this.I3t}sA(){return this._3t}qCt(){return this.C3t}Sz(){return this.G3t.Sz()}FTt(t){const s=this.G3t,i=this.c$();let e=null;if("string"==typeof t)e=s.Tz(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.xz(t-1)}let n=i.cH();if(!e)return[i.HM(),i.JM(),n];if(MI.S(e.qPt()),i.vq()){const[t,s,e]=i.Mq().qx(MI.Oa(),MI.Da());MI.set(t,s),n+=e}return MI.offset(-s.eH(),-s.hH()),MI.scale(i.jg(),i.Kg()),MI.rotate(i.cj()),MI.offset(i.HM(),i.JM()),[MI.Oa(),MI.Da(),n]}c5t(){return this.c$().ELt().pu()}f5t(t){t=Math.floor(t);const s=this.c$(),i=s.ELt(),e=i.pu();if(t===e&&(t=0),t<0||t>=e)return[0,0];const n=i.du();return[n[2*t+0]+s.HM(),n[2*t+1]+s.JM()]}ECt(){const t=pI.R$.rrt.Nrt,s="plugins.sprite.debugger.animation-properties";return[{title:s+".title",properties:[{name:s+".current-animation",value:this.x3t.Ec(),m2t:s=>this.ACt(t.d5t,s,0)},{name:s+".current-frame",value:this.T3t,m2t:s=>this.ACt(t.p5t,s)},{name:s+".is-playing",value:this.B3t(),m2t:s=>s?this.ACt(t.m5t,0):this.ACt(t.g5t)},{name:s+".speed",value:this.E3t,m2t:s=>this.ACt(t.y5t,s)},{name:s+".repeats",value:this.O3t,m2t:t=>this.O3t=t}]}]}hx(){const t={a:this.x3t.U0()};0!==this.R3t&&(t.fs=this.R3t);const s=this.$3t();0!==s&&(t.at=s),0!==this.T3t&&(t.f=this.T3t),0!==this.E3t&&(t.cas=this.E3t),1!==this.O3t&&(t.ar=this.O3t),0!==this.P3t&&(t.rt=this.P3t),this.B3t()||(t.ap=this.B3t()),this.j3t()||(t.af=this.j3t());const i=this.c$();return i.AH()&&(t.ce=i.AH()),t}ox(t){const s=this.WV().mRt(t.a);s&&(this.x3t=s),this.R3t=t.hasOwnProperty("fs")?t.fs:0,this.A3t.Set(t.hasOwnProperty("at")?t.at:0);const i=t.hasOwnProperty("f")?t.f:0;this.T3t=pI.Zn(i,0,this.x3t.az()-1),this.E3t=t.hasOwnProperty("cas")?t.cas:0,this.O3t=t.hasOwnProperty("ar")?t.ar:1;const e=t.hasOwnProperty("rt")?t.rt:0;this.P3t=pI.Zn(e,0,this.x3t.az()-1),this.W3t(!t.hasOwnProperty("ap")||!!t.ap),this.V3t(!t.hasOwnProperty("af")||!!t.af);const n=this.x3t.PPt(this.T3t);this.G3t=n,this.o3t();const r=this.c$();r.nH(n.eH()),r.oH(n.hH()),r.TLt(n.Iz()),r.RH(!!t.ce),this.B3t()&&this.GCt()}vht(t){const s=this.c$();switch(t){case SI:return s.AH();case wI:return pI.Zn(this.T3t,0,this.x3t.az()-1);case yI:return this.x3t.Ec()}}_ht(t,s,i){const e=this.c$();switch(t){case SI:e.RH(!!s);break;case wI:{this.W3t(!1);const t=this.x3t.az()-1,e=s=pI.Zn(s,0,t),n=this.x3t.PPt(this.T3t),r=this.x3t.PPt(e);this.Y3t(n,r,i),this.T3t=pI.Zn(e,0,t);break}case yI:this.L3t=s,this.q3t(i),this.x3t.az()>1&&this.x3t.Qq()>0?this.GCt():this.lCt()}}W_t(){return self.w5t}};const II=new WeakMap,_I=new Map([["current-frame",0],["beginning",1]]);self.w5t=class extends self.Iq{constructor(){super(),II.set(this,self.BV.UV().Aq())}wz(){return II.get(this).Sz()}bz(t){return this.vz(t)[0]}Mz(t){return this.vz(t)[1]}S5t(t){return this.vz(t)[2]}vz(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return II.get(this).FTt(t)}Gz(){return II.get(this).c5t()}_z(t){return mI.he(t),II.get(this).f5t(t)[0]}Ez(t){return mI.he(t),II.get(this).f5t(t)[1]}Cz(t){return mI.he(t),II.get(this).f5t(t)}b5t(){II.get(this).W3t(!1)}v5t(t="current-frame"){mI.ue(t);const s=_I.get(t);if(void 0===s)throw new Error("invalid mode");II.get(this).t5t(s)}M5t(t,s="beginning"){mI.ue(t),mI.ue(s);const i=_I.get(s);if(void 0===i)throw new Error("invalid mode");const e=II.get(this);if(!e.WV().pRt(t))throw new Error(`animation name "${t}" does not exist`);e.s5t(t,i)}y3t(t){mI.ue(t);const s=II.get(this).WV().pRt(t);return s?s.DPt():null}get animation(){return II.get(this).i5t().DPt()}get animationName(){return II.get(this).e5t()}set K3t(t){mI.he(t),II.get(this).n5t(t)}get K3t(){return II.get(this).r5t()}set x5t(t){mI.ue(t),II.get(this).n5t(t)}get x5t(){return II.get(this).h5t()}set T5t(t){mI.he(t),II.get(this).o5t(t)}get T5t(){return II.get(this).a5t()}set G5t(t){mI.he(t),II.get(this).l5t(t)}get G5t(){return II.get(this).u5t()}get imageWidth(){return II.get(this).jCt().jg()}get imageHeight(){return II.get(this).jCt().Kg()}I5t(){const t=II.get(this).jCt();return[t.jg(),t.Kg()]}async _5t(t){mI.$e(t,Blob);const s=II.get(this),i=s.$$(),e=s.jCt(),n=pI.Hn(pI.XEt);if(n.uPt(i,t),await n.SX(i.pM(),{Zx:i.Ek()}),s.zn())return void n.qn();e.cPt(n);const r=s.wTt();r.h3t(),r.WV().wf().dispatchEvent(new pI.Event("animationframeimagechange")),i.w$()}C5t(t,s){mI.ue(s),II.get(this).c$().dLt(!!t,s)}}}{const CI=self._s;CI.R$.rrt.P$={E5t(t){return CI.Ke(this.e5t(),t)},P5t(t,s){return CI.compare(this.T3t,t,s)},A5t(t,s){if("string"!=typeof s)return!1;const i=this.G3t.Pz();return CI.compare(i.toLowerCase(),t,s.toLowerCase())},R5t(t,s){return CI.compare(this.a5t(),t,s)},Z3t(t){return CI.Ke(this.F3t,t)},X3t:()=>!0,Q3t:()=>!0,O5t(){return this.c$().jg()<0},F5t(){return this.c$().Kg()<0},D5t:()=>!0,L5t:()=>!0,AH(){return this.c$().AH()}}}{const EI=self._s;EI.R$.rrt.Nrt={k5t(t,s,i,e,n){if(!t||!s)return;const[r,h]=this.FTt(i),o=this.Nc.BW(t,s,r,h,e,n);if(!o)return;if(e&&s.WW(o),t.MW().iW()){const t=o.c$();t.uj(this.c$().cj()),t.KU()}const a=this.Nc.Bk();a.jW(!0),o.VW(),a.jW(!1),t!==this.Nc.egt().WV()&&this.aCt.l3t(t,o,e)},g5t(){this.W3t(!1)},m5t(t){this.t5t(t)},d5t(t,s){this.s5t(t,s)},p5t(t){this.n5t(t)},y5t(t){this.o5t(t)},N5t(t){this.l5t(t)},$5t(t,s){try{0===t?this.wTt().u3t(s):this.wTt().c3t(s)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation: `,s)}},B5t(t,s,i){try{0===t?this.wTt().d3t(s,i):this.wTt().m3t(s,i)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation frame: `,s)}},W5t(t){const s=this.c$(),i=s.jg(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Yg(e),s.KU())},j5t(t){const s=this.c$(),i=s.Kg(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Vg(e),s.KU())},aj(t){const s=this.G3t.gz(),i=this.c$(),e=i.jg()<0?-1:1,n=i.Kg()<0?-1:1,r=s.jg()*t*e,h=s.Kg()*t*n;i.jg()===r&&i.Kg()===h||(i.TP(r,h),i.KU())},async V5t(t,s,i){const e=this.G3t.gz(),n=this.c$(),r=this.Nc,h=this.aCt;if(e.UZ()===t)return 0===s&&(n.TP(e.jg(),e.Kg()),n.KU()),void this.xU(EI.R$.rrt.P$.D5t);const o=EI.Hn(EI.XEt);try{if(await o.lPt(r,t),!o.wK())throw new Error("image failed to load");if(this.zn())return void o.qn();await o.SX(r.pM(),{Zx:r.Ek()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.zn()||this.xU(EI.R$.rrt.P$.L5t))}this.zn()?o.qn():(e.cPt(o),h.h3t(),h.WV().wf().dispatchEvent(new EI.Event("animationframeimagechange")),r.w$(),0===s&&(n.TP(e.jg(),e.Kg()),n.KU()),await this.C$(EI.R$.rrt.P$.D5t))},U5t(t){this.c$().RH(t)},dLt(t,s){this.c$().dLt(0===t,s)},N2t(t){this.c$().FM(t),this.Nc.w$()}}}self._s.R$.rrt.$rt={H5t(){return this.r5t()},q5t(){return this.h5t()},z5t(){return this.x3t.az()},J5t(){return this.x3t.Ec()},Y5t(){return this.a5t()},X5t(){return this.x3t.Qq()},Z5t(t){return this.FTt(t)[0]},K5t(t){return this.FTt(t)[1]},Q5t(t){return this.FTt(t)[2]},t4t(){return this.Sz()},s4t(){return this.jCt().jg()},i4t(){return this.jCt().Kg()},e4t(t){return this.f5t(t)[0]},n4t(t){return this.f5t(t)[1]},r4t(){return this.c5t()}};{const PI=self._s,AI="text-input";PI.R$.h4t=class extends PI.q_t{constructor(t){super(t,AI),this.X_t("click",((t,s)=>t.o4t(s))),this.X_t("dblclick",((t,s)=>t.a4t(s))),this.X_t("change",((t,s)=>t.l4t(s)))}qn(){super.qn()}}}{const RI=self._s;RI.R$.h4t.OAt=class extends RI.sCt{constructor(t){super(t)}qn(){super.qn()}B_t(){}}}{const OI=self._s,FI=self.Ns,DI=0,LI=1,kI=2,NI=3,$I=4,BI=5,WI=6,jI=7,VI=8,UI=9,HI=10,qI="text-input",zI=["text","password","email","number","tel","url","textarea","search"];OI.R$.h4t.Instance=class extends OI.XCt{constructor(t,s){super(t,qI),this.$c="",this.u4t="",this.c4t="",this.Qbt=!0,this.f4t=!1,this.d4t=!1,this.qc="text",this.tEt=!0,this.p4t=-1,this.Bc="",this.m4t="",s&&(this.$c=s[DI],this.u4t=s[LI],this.c4t=s[kI],this.c$().zj(s[NI]),this.Qbt=s[$I],this.f4t=s[BI],this.d4t=s[WI],this.qc=zI[s[jI]],this.tEt=s[VI],this.Bc=s[UI],this.m4t=s[HI]),this.cEt({type:this.qc,id:this.Bc,className:this.m4t})}qn(){super.qn()}fEt(){return{text:this.$c,placeholder:this.u4t,title:this.c4t,isEnabled:this.Qbt,isReadOnly:this.f4t,spellCheck:this.d4t,maxLength:this.p4t}}async o4t(t){this.nCt("click",!0),await this.C$(OI.R$.h4t.P$.g4t)}async a4t(t){this.nCt("dblclick",!0),await this.C$(OI.R$.h4t.P$.y4t)}async l4t(t){this.$c=t.text,this.nCt("change",!0),await this.C$(OI.R$.h4t.P$.w4t)}N1t(t){this.$c!==t&&(this.$c=t,this.mEt())}S4t(){return this.$c}b4t(t){this.u4t!==t&&(this.u4t=t,this.mEt())}v4t(){return this.u4t}M4t(t){this.c4t!==t&&(this.c4t=t,this.mEt())}x4t(){return this.c4t}XGt(t){t=!!t,this.Qbt!==t&&(this.Qbt=t,this.mEt())}KGt(){return this.Qbt}T4t(t){t=!!t,this.f4t!==t&&(this.f4t=t,this.mEt())}G4t(){return this.f4t}I4t(t){t=Math.max(+t,-1),this.p4t!==t&&(this.p4t=t,this.mEt())}_4t(){return this.p4t}C4t(){Promise.resolve().then((()=>this.aEt("scroll-to-bottom")))}Bx(t){}hx(){return{t:this.$c,p:this.u4t,ti:this.c4t,e:this.Qbt,r:this.f4t,sp:this.d4t,ml:this.p4t,type:this.qc,id:this.Bc}}ox(t){this.$c=t.t,this.u4t=t.p,this.c4t=t.ti,this.Qbt=t.e,this.f4t=t.r,this.d4t=t.sp,this.p4t=t.hasOwnProperty("ml")?t.ml:-1,this.qc=t.type,this.Bc=t.id,this.mEt()}vht(t){switch(t){case DI:return this.$c;case LI:return this.u4t;case kI:return this.c4t;case $I:return this.Qbt;case BI:return this.f4t;case WI:return this.d4t;case VI:return this.tEt}}_ht(t,s){switch(t){case DI:if(this.$c===s)return;this.$c=s,this.mEt();break;case LI:if(this.u4t===s)return;this.u4t=s,this.mEt();break;case kI:if(this.c4t===s)return;this.c4t=s,this.mEt();break;case $I:if(this.Qbt===!!s)return;this.Qbt=!!s,this.mEt();break;case BI:if(this.f4t===!!s)return;this.f4t=!!s,this.mEt();break;case WI:if(this.d4t===!!s)return;this.d4t=!!s,this.mEt();break;case VI:this.tEt=!!s}}ECt(){const t=OI.R$.h4t.Nrt,s="plugins.textbox";return[{title:s+".name",properties:[{name:s+".properties.text.name",value:this.$c,m2t:s=>this.ACt(t.jc,s)},{name:s+".properties.enabled.name",value:this.Qbt,m2t:s=>this.ACt(t.JIt,s)},{name:s+".properties.read-only.name",value:this.f4t,m2t:s=>this.ACt(t.E4t,s)}]}]}W_t(){return self.P4t}};const JI=new WeakMap;self.P4t=class extends self.Cq{constructor(){super(),JI.set(this,self.BV.UV().Aq())}set text(t){FI.ue(t),JI.get(this).N1t(t)}get text(){return JI.get(this).S4t()}set placeholder(t){FI.ue(t),JI.get(this).b4t(t)}get placeholder(){return JI.get(this).v4t()}set A4t(t){FI.ue(t),JI.get(this).M4t(t)}get A4t(){return JI.get(this).x4t()}set isEnabled(t){JI.get(this).XGt(t)}get isEnabled(){return JI.get(this).KGt()}set R4t(t){JI.get(this).T4t(t)}get R4t(){return JI.get(this).G4t()}set maxLength(t){FI.he(t),JI.get(this).I4t(t)}get maxLength(){return JI.get(this)._4t()}O4t(){JI.get(this).C4t()}}}{const YI=self._s;YI.R$.h4t.P$={P2t(t,s){return 0===s?YI.Ke(this.$c,t):this.$c===t},w4t:()=>!0,g4t:()=>!0,y4t:()=>!0}}self._s.R$.h4t.Nrt={jc(t){this.N1t(t.toString())},O2t(t){""!==t&&this.N1t(this.S4t()+t)},F4t(t){this.b4t(t)},D4t(t){this.M4t(t)},E4t(t){this.T4t(0===t)},L4t(){this.C4t()},k4t(t){this.I4t(t)}},self._s.R$.h4t.$rt={Text(){return this.S4t()},N4t(){return this._4t()}};{const XI=self._s,ZI=[];XI.R$.Audio=class extends XI.y_t{constructor(t){super(t)}$4t(t){ZI.push(t)}static async B4t(){await Promise.all(ZI),XI.bh(ZI)}qn(){super.qn()}}}{let KI=function(){return i_.SW().Aq()},QI=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};GetAudioSdkInstance=KI,GetAudioDOMInterface=QI;const t_=self._s,s_=self.Ns;t_.R$.Audio.OAt=class extends t_.sCt{constructor(t){super(t)}qn(){super.qn()}B_t(){}W_t(){return self.W4t}};let i_=null;self.W4t=class extends self.LW{constructor(t){super(t),i_=t}get j4t(){return QI().GetAudioContextExtern()}get V4t(){return QI().GetDestinationNodeExtern()}get U4t(){return KI().H4t()}set U4t(t){KI().q4t(t)}get z4t(){return KI().J4t()}set z4t(t){s_.he(t),KI().Y4t(t)}X4t(){KI().Z4t()}}}{const e_=self._s,n_="audio",r_=["interactive","balanced","playback"];e_.R$.Audio.Instance=class extends e_.hCt{constructor(t,s){super(t,n_),this.K4t=0,this.Q4t=0,this.t6t=[],this.s6t=!0,this.i6t=0,this.e6t=0,this.n6t=!1,this.r6t=1,this.h6t=1,this.o6t=[this.Nc.m1()/2,this.Nc.g1()/2,600],this.a6t=[0,0,-1],this.l6t=[0,1,0],this.u6t=600,this.c6t=1e4,this.f6t=1,this.d6t=null,this.p6t=-1,this.m6t=1,this.g6t=!1,this.y6t=0,this.w6t="suspended",this.S6t=0,this.b6t=new Map,this.v6t=0,this.M6t=0,this.x6t=new Map,this.T6t=new Map;let i="interactive";s&&(this.i6t=s[0],this.e6t=s[1],this.n6t=s[2],i=r_[s[3]],this.s6t=s[4],this.r6t=s[5],this.h6t=s[6],this.o6t[2]=s[7],this.u6t=s[8],this.c6t=s[9],this.f6t=s[10]),this.G6t=[],this.I6t=[],this._6t=[],this.yCt([["state",t=>this.C6t(t)],["audiocontext-state",t=>this.E6t(t)],["fxstate",t=>this.P6t(t)],["trigger",t=>this.A6t(t)],["buffer-metadata",t=>this.R6t(t)]]);const e=this.$$().wf();this.Xf=new e_.zf(e_.Wf.qf(e,"instancedestroy",(t=>this.O6t(t.jq))),e_.Wf.qf(e,"afterload",(()=>this.R6())),e_.Wf.qf(e,"suspend",(()=>this.MQt())),e_.Wf.qf(e,"resume",(()=>this.xQt())));const n=this.Nc.MB(),r="Safari"===e_.Ks.si,h=this.Nc.sqt()||"macos-wkwebview"===n,o=this.Nc.rk()._Z(),a="playable-ad-single-file"===this.Nc.MB(),l=r||h||o||a;this.Nc.T$(this.SCt("create-audio-context",{preloadList:this.Nc.rk().aK().map((t=>({originalUrl:t.lK,url:t.url,type:t.type,fileSize:t.fileSize}))),timeScaleMode:this.i6t,latencyHint:i,panningModel:this.r6t,distanceModel:this.h6t,refDistance:this.u6t,maxDistance:this.c6t,rolloffFactor:this.f6t,listenerPos:this.o6t,usePlayMusicAsSoundWorkaround:l}).then((t=>{this.y6t=t.sampleRate,this.w6t=t.audioContextState,this.S6t=t.outputLatency}))),this.GCt()}qn(){this.d6t=null,super.qn()}F6t(t){return this.s6t?t.split(" ").filter((t=>!!t)):t?[t]:[]}D6t(t,s){for(const i of s){let s=!1;for(const e of t)if(e_.Ke(e,i)){s=!0;break}if(!s)return!1}return!0}L6t(t,s){return this.D6t(t,this.F6t(s))}$4t(t){this.MW().$4t(t)}O6t(t){this.d6t===t&&(this.d6t=null)}k6t(t){return Math.pow(10,t/20)}N6t(t){const s=this.k6t(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}$6t(t){return Math.log(t)/Math.log(10)*20}B6t(t){return this.$6t(Math.max(Math.min(t,1),0))}W6t(){let t=0;const s=!!self.C3_GetAudioContextCurrentTime;return t=s?this.K4t:this.Q4t,this.K4t=0,this.Q4t=0,{j6t:t,V6t:s}}MQt(){this.n6t||this.wCt("set-suspended",{isSuspended:!0})}xQt(){this.n6t||this.wCt("set-suspended",{isSuspended:!1})}C6t(t){const s=t.tickCount;this.S6t=t.outputLatency;const i=this.G6t.filter((t=>t.hasOwnProperty("placeholder")&&(t.placeholder>s||-1===t.placeholder)));this.G6t=t.audioInstances,this._6t=t.analysers,i.length>0&&e_.On(this.G6t,i)}R6t(t){this.x6t.set(t.originalUrl,{duration:t.duration})}E6t(t){this.w6t=t.audioContextState}Jrt(){return this.Nc._Bt()?"running":this.w6t}P6t(t){this.I6t=t.fxstate}U6t(t){const s=this.F6t(t);for(const t of this.G6t)if(this.D6t(t.tags,s))return t;return null}H6t(t){const s=this.F6t(t);return this.G6t.some((t=>this.D6t(t.tags,s)&&t.isPlaying))}q6t(t,s,i,e,n){if(this.H6t(s))return null;const r=this.x6t.get(t),h={tags:this.F6t(s),duration:r?r.duration:0,volume:n,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:i,isLooping:e,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.G6t.push(h),h}z6t(t){const s=this.F6t(t);for(const t of this.G6t)this.D6t(t.tags,s)&&(t.isPlaying=!1)}async A6t(t){const s=t.type;this.t6t=t.tags;const i=t.aiid;if("ended"===s){for(const t of this.G6t)if(t.aiid===i){t.isPlaying=!1;break}await this.C$(e_.R$.Audio.P$.J6t)}else"fade-ended"===s&&await this.C$(e_.R$.Audio.P$.Y6t)}X6t(t){return this.L6t(this.t6t,t)}E8(){const t={timeScale:this.Nc.SN(),gameTime:this.Nc.XHt(),instPans:this.Z6t(),tickCount:this.Nc.ZHt()};if(this.d6t){const s=this.d6t.c$();this.o6t[0]=s.HM(),this.o6t[1]=s.JM(),t.listenerPos=this.o6t,t.listenerOrientation=[...this.a6t,...this.l6t]}this.wCt("tick",t)}K6t(t,s,i,e,n){if(0===i)return[t,s];const r=Math.sin(i),h=Math.cos(i),o=(t-=e)*r;return t=t*h-(s-=n)*r,s=s*h+o,[t+=e,s+=n]}Z6t(){return this.G6t.filter((t=>-1!==t.uid)).map((t=>this.Nc.h$(t.uid))).filter((t=>t)).map((t=>{const s=t.c$(),i=s.f$().cj(),[e,n]=this.K6t(s.HM(),s.JM(),-i,this.o6t[0],this.o6t[1]);return{uid:t.tU(),x:e,y:n,z:s.cH(),angle:s.cj()-i}}))}Q6t(t,s){for(const i of this._6t)if(i.index===s&&e_.Ke(i.tag,t))return i;return null}t8t(t){for(const s of this.F6t(t)){const t=s.toLowerCase();this.b6t.set(t,(this.b6t.get(t)||0)+1)}}H4t(){return this.g6t}q4t(t){t=!!t,this.g6t!==t&&(this.g6t=t,this.wCt("set-silent",{isSilent:t}))}J4t(){return this.m6t}Y4t(t){this.m6t!==t&&(this.m6t=t,this.wCt("set-master-volume",{vol:t}))}Z4t(){this.wCt("stop-all");for(const t of this.G6t)t.isPlaying=!1}s8t(t){return!(t.hasOwnProperty("placeholder")||3===this.e6t||t.isMusic&&1===this.e6t||!t.isMusic&&2===this.e6t)}hx(){return{isSilent:this.g6t,masterVolume:this.m6t,listenerZ:this.o6t[2],listenerForwardVec:this.a6t,listenerUpVec:this.l6t,listenerUid:this.d6t?this.d6t.tU():-1,remoteUrls:[...this.T6t.entries()],playing:this.G6t.filter((t=>this.s8t(t))),effects:this.I6t,analysers:this._6t}}ox(t){if(this.g6t=t.isSilent,this.m6t=t.masterVolume,this.o6t[2]=t.listenerZ,this.d6t=null,this.p6t=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.a6t=t.listenerForwardVec:this.a6t=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.l6t=t.listenerUpVec:this.l6t=[0,1,0],this.T6t.clear(),t.remoteUrls)for(const[s,i]of t.remoteUrls)this.T6t.set(s,i);this.G6t=t.playing;for(const t of this.G6t)t.hasOwnProperty("tag")&&!t.hasOwnProperty("tags")&&(t.tags=[t.tag].filter((t=>!!t)));this.I6t=t.effects,this._6t=t.analysers}R6(){if(-1!==this.p6t&&(this.d6t=this.Nc.h$(this.p6t),this.p6t=-1,this.d6t)){const t=this.d6t.c$();this.o6t[0]=t.HM(),this.o6t[1]=t.JM()}for(const t of this.G6t){const s=this.Nc.rk().oK(t.bufferOriginalUrl);s?(t.bufferUrl=s.url,t.bufferType=s.type):t.bufferUrl=null}for(const t of Object.values(this.I6t))for(const s of t)if(s.hasOwnProperty("bufferOriginalUrl")){const t=this.Nc.rk().oK(s.bufferOriginalUrl);t&&(s.bufferUrl=t.url,s.bufferType=t.type)}this.wCt("load-state",{saveLoadMode:this.e6t,timeScale:this.Nc.SN(),gameTime:this.Nc.XHt(),listenerPos:this.o6t,listenerOrientation:[...this.a6t,...this.l6t],isSilent:this.g6t,masterVolume:this.m6t,playing:this.G6t.filter((t=>null!==t.bufferUrl)),effects:this.I6t})}ECt(){const t=[];for(const[s,i]of Object.entries(this.I6t))t.push({name:"$"+s,value:i.map((t=>t.type)).join(", ")});const s="plugins.audio.debugger";return[{title:s+".tag-effects",properties:t},{title:s+".currently-playing",properties:[{name:s+".currently-playing-count",value:this.G6t.length},...this.G6t.map(((t,s)=>({name:"$#"+s,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / ${Math.round(10*t.duration)/10}`})))]}]}}}self._s.R$.Audio.P$={J6t(t){return this.X6t(t)},Y6t(t){return this.X6t(t)},i8t(){return this.M6t===this.v6t},e8t:()=>!0,n8t(){return this.H4t()},r8t(){for(const t of this.G6t)if(t.isPlaying)return!0;return!1},h8t(t){return this.H6t(t)}};{const h_=self._s,o_=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];h_.R$.Audio.Nrt={Play(t,s,i,e,n){const r=h_.R$.Audio.Nrt.o8t.call(this,t,s,i,e,n);return this.$4t(r),r},Yrt(t,s,i,e){h_.R$.Audio.Nrt.o8t.call(this,t,0,s,0,i,e)},async o8t(t,s,i,e,n,r){if(this.g6t)return;const h=t[1],o=this.Nc.rk().oK(t[0]);if(!o)return;const{j6t:a,V6t:l}=this.W6t(),u=this.q6t(t[0],n,h,0!==s,this.N6t(i));try{await this.SCt("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:h,tags:this.F6t(n),isLooping:0!==s,vol:this.N6t(i),stereoPan:h_.Zn(e/100,-1,1),pos:r||0,off:a,trueClock:l})}finally{u&&(u.placeholder=this.Nc.ZHt())}},async a8t(t,s,i,e,n,r,h,o,a,l,u){if(this.g6t)return;const c=t[1],f=this.Nc.rk().oK(t[0]);if(!f)return;const{j6t:d,V6t:p}=this.W6t(),m=this.q6t(t[0],u,c,0!==s,this.N6t(i));try{await this.SCt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:c,tags:this.F6t(u),isLooping:0!==s,vol:this.N6t(i),pos:0,off:d,trueClock:p,panning:{x:e,y:n,z:r,angle:h_.Qn(h),innerAngle:h_.Qn(o),outerAngle:h_.Qn(a),outerGain:this.N6t(l)}})}finally{m&&(m.placeholder=this.Nc.ZHt())}},async l8t(t,s,i,e,n,r,h,o){if(this.g6t)return;if(!e)return;const a=e.cGt();if(!a||!a.c$())return;const l=a.c$(),u=l.f$().cj(),[c,f]=this.K6t(l.HM(),l.JM(),-u,this.o6t[0],this.o6t[1]),d=t[1],p=this.Nc.rk().oK(t[0]);if(!p)return;const{j6t:m,V6t:g}=this.W6t(),y=this.q6t(t[0],o,d,0!==s,this.N6t(i));try{await this.SCt("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.F6t(o),isLooping:0!==s,vol:this.N6t(i),pos:0,off:m,trueClock:g,panning:{x:c,y:f,z:l.cH(),angle:l.cj()-u,innerAngle:h_.Qn(n),outerAngle:h_.Qn(r),outerGain:this.N6t(h),uid:a.tU()}})}finally{y&&(y.placeholder=this.Nc.ZHt())}},async u8t(t,s,i,e,n,r){if(this.g6t)return;const h=1===t,o=this.Nc.rk().oK(s)||this.T6t.get(s.toLowerCase());if(!o)return;const{j6t:a,V6t:l}=this.W6t(),u=this.q6t(s,r,h,0!==i,this.N6t(e));try{await this.SCt("play",{originalUrl:s,url:o.url,type:o.type,isMusic:h,tags:this.F6t(r),isLooping:0!==i,vol:this.N6t(e),stereoPan:h_.Zn(n/100,-1,1),pos:0,off:a,trueClock:l})}finally{u&&(u.placeholder=this.Nc.ZHt())}},async c8t(t,s,i,e,n,r,h,o,a,l,u,c){if(this.g6t)return;const f=1===t,d=this.Nc.rk().oK(s)||this.T6t.get(s.toLowerCase());if(!d)return;const{j6t:p,V6t:m}=this.W6t(),g=this.q6t(s,c,f,0!==i,this.N6t(e));try{await this.SCt("play",{originalUrl:s,url:d.url,type:d.type,isMusic:f,tags:this.F6t(c),isLooping:0!==i,vol:this.N6t(e),pos:0,off:p,trueClock:m,panning:{x:n,y:r,z:h,angle:h_.Qn(o),innerAngle:h_.Qn(a),outerAngle:h_.Qn(l),outerGain:this.N6t(u)}})}finally{g&&(g.placeholder=this.Nc.ZHt())}},async f8t(t,s,i,e,n,r,h,o,a){if(this.g6t)return;if(this.g6t)return;if(!n)return;const l=n.cGt();if(!l||!l.c$())return;const u=l.c$(),c=u.f$().cj(),[f,d]=this.K6t(u.HM(),u.JM(),-c,this.o6t[0],this.o6t[1]),p=1===t,m=this.Nc.rk().oK(s)||this.T6t.get(s.toLowerCase());if(!m)return;const{j6t:g,V6t:y}=this.W6t(),w=this.q6t(s,a,p,0!==i,this.N6t(e));try{await this.SCt("play",{originalUrl:s,url:m.url,type:m.type,isMusic:p,tags:this.F6t(a),isLooping:0!==i,vol:this.N6t(e),pos:0,off:g,trueClock:y,panning:{x:f,y:d,z:u.cH(),angle:u.cj()-c,innerAngle:h_.Qn(r),outerAngle:h_.Qn(h),outerGain:this.N6t(o),uid:l.tU()}})}finally{w&&(w.placeholder=this.Nc.ZHt())}},d8t(t,s){this.wCt("set-looping",{tags:this.F6t(t),isLooping:0===s})},p8t(t,s){this.wCt("set-muted",{tags:this.F6t(t),isMuted:0===s})},qrt(t,s){this.wCt("set-volume",{tags:this.F6t(t),vol:this.N6t(s)})},m8t(t,s,i,e){this.wCt("fade-volume",{tags:this.F6t(t),vol:this.N6t(s),duration:i,stopOnEnd:0===e})},g8t(t,s){this.wCt("set-stereo-pan",{tags:this.F6t(t),p:h_.Zn(s/100,-1,1)})},async y8t(t){const s=t[1],i=this.Nc.rk().oK(t[0]);i&&(this.v6t++,await this.SCt("preload",{originalUrl:t[0],url:i.url,type:i.type,isMusic:s}),this.M6t++)},async w8t(t,s){const i=1===t,e=this.Nc.rk().oK(s)||this.T6t.get(s.toLowerCase());e&&(this.v6t++,await this.SCt("preload",{originalUrl:s,url:e.url,type:e.type,isMusic:i}),this.M6t++)},Vz(t,s){this.wCt("set-playback-rate",{tags:this.F6t(t),rate:Math.max(s,0)})},Oz(t){this.z6t(t),this.wCt("stop",{tags:this.F6t(t)})},S8t(){this.Z4t()},b8t(t,s){this.wCt("set-paused",{tags:this.F6t(t),paused:0===s})},v8t(t,s){this.wCt("seek",{tags:this.F6t(t),pos:s})},M8t(t){2===t&&(t=this.H4t()?1:0),this.q4t(0===t)},x8t(t){const s=this.N6t(t);this.Y4t(s)},T8t(t,s,i,e,n,r,h){const o=o_[s];this.t8t(t),this.wCt("add-effect",{type:"filter",tags:this.F6t(t),params:[o,i,e,n,r,h_.Zn(h/100,0,1)]})},G8t(t,s,i,e){this.t8t(t),this.wCt("add-effect",{type:"delay",tags:this.F6t(t),params:[s,this.N6t(i),h_.Zn(e/100,0,1)]})},I8t(t,s,i,e,n,r){this.t8t(t),this.wCt("add-effect",{type:"flanger",tags:this.F6t(t),params:[s/1e3,i/1e3,e,n/100,h_.Zn(r/100,0,1)]})},_8t(t,s,i,e,n,r,h){this.t8t(t),this.wCt("add-effect",{type:"phaser",tags:this.F6t(t),params:[s,i,e,n,r,h_.Zn(h/100,0,1)]})},C8t(t,s,i,e){const n=this.Nc.rk().oK(s[0]);n&&(this.t8t(t),this.wCt("add-effect",{type:"convolution",tags:this.F6t(t),bufferOriginalUrl:s[0],bufferUrl:n.url,bufferType:n.type,params:[0===i,h_.Zn(e/100,0,1)]}))},E8t(t,s){this.t8t(t),this.wCt("add-effect",{type:"gain",tags:this.F6t(t),params:[this.N6t(s)]})},P8t(t,s){this.t8t(t),this.wCt("add-effect",{type:"stereopan",tags:this.F6t(t),params:[h_.Zn(s/100,-1,1)]})},A8t(t){this.t8t(t),this.wCt("add-effect",{type:"gain",tags:this.F6t(t),params:[0]})},R8t(t,s,i){this.t8t(t),this.wCt("add-effect",{type:"tremolo",tags:this.F6t(t),params:[s,h_.Zn(i/100,0,1)]})},O8t(t,s,i){this.t8t(t),this.wCt("add-effect",{type:"ringmod",tags:this.F6t(t),params:[s,h_.Zn(i/100,0,1)]})},F8t(t,s,i,e,n,r){this.t8t(t),this.wCt("add-effect",{type:"distortion",tags:this.F6t(t),params:[this.k6t(s),this.k6t(i),e,this.k6t(n),h_.Zn(r/100,0,1)]})},D8t(t,s,i,e,n,r){this.t8t(t),this.wCt("add-effect",{type:"compressor",tags:this.F6t(t),params:[s,i,e,n/1e3,r/1e3]})},L8t(t,s,i){this.t8t(t),this.wCt("add-effect",{type:"analyser",tags:this.F6t(t),params:[s,i]})},k8t(t){const s=this.F6t(t);for(const t of s)this.b6t.set(t.toLowerCase(),0);this.wCt("remove-effects",{tags:s}),this.I6t={}},Zq(t,s,i,e,n,r){this.wCt("set-effect-param",{tags:this.F6t(t),index:Math.floor(s),param:i,value:e,ramp:n,time:r})},N8t(t){if(!t)return;const s=t.cGt();s&&s.c$()&&(this.d6t=s)},$8t(t){this.o6t[2]=t},B8t(t,s,i,e,n,r){this.a6t[0]=t,this.a6t[1]=s,this.a6t[2]=-i,this.l6t[0]=e,this.l6t[1]=n,this.l6t[2]=-r},W8t(t){this.K4t=Math.max(t,0),this.Q4t=Math.max(t-performance.now()/1e3,0)},j8t(t){const s=t[1],i=this.Nc.rk().oK(t[0]);i&&this.wCt("unload",{url:i.url,type:i.type,isMusic:s})},V8t(t,s){const i=1===t,e=this.Nc.rk().oK(s)||this.T6t.get(s.toLowerCase());e&&this.wCt("unload",{url:e.url,type:e.type,isMusic:i})},U8t(){this.wCt("unload-all")},H8t(t,s,i){this.T6t.set(i.toLowerCase(),{url:t,type:s})}}}{const a_=self._s;a_.R$.Audio.$rt={q8t(t){const s=this.U6t(t);return s?s.duration:0},jrt(t){const s=this.U6t(t);return s?s.playbackTime:0},zrt(t){const s=this.U6t(t);return s?s.playbackRate:0},Vrt(t){const s=this.U6t(t);return s?this.B6t(s.volume):0},z8t(){return this.B6t(this.J4t())},J8t(t){return this.b6t.get(t.toLowerCase())||0},Y8t(t,s){const i=this.Q6t(t,Math.floor(s));return i?i.binCount:0},X8t(t,s,i){const e=this.Q6t(t,Math.floor(s));return e?(i=Math.floor(i))<0||i>=e.binCount?0:e.freqBins[i]:0},Z8t(t,s){const i=this.Q6t(t,Math.floor(s));return i?i.peak:0},K8t(t,s){const i=this.Q6t(t,Math.floor(s));return i?i.rms:0},Q8t(){return this.y6t},t7t:()=>self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3,s7t(){return this.S6t},i7t(t,s){return 0==(t=a_.Zn(+t,0,100)/100)?-1/0:t<.1?this.B6t(a_._t(0,this.N6t(s),10*t)):a_._t(s,0,(t-.1)/.9)}}}{const l_=self._s;l_.R$.PlatformInfo=class extends l_.y_t{constructor(t){super(t)}qn(){super.qn()}}}{const u_=self._s;u_.R$.PlatformInfo.OAt=class extends u_.sCt{constructor(t){super(t)}qn(){super.qn()}B_t(){}}}{const c_=self._s,f_="platform-info";c_.R$.PlatformInfo.Instance=class extends c_.hCt{constructor(t,s){super(t,f_),this.rQt=0,this.hQt=0,this.oQt=0,this.aQt=0,this.e7t=[0,0,0,0],this.n7t=!1,this.r7t=!1,this.yCt([["window-resize",t=>this.sBt(t)],["wake-lock-acquired",t=>this.h7t(t)],["wake-lock-error",t=>this.o7t(t)],["wake-lock-released",t=>this.a7t(t)]]),navigator.connection&&navigator.connection.addEventListener("change",(()=>this.l7t())),this.Nc.T$(this.SCt("get-initial-state").then((t=>{this.rQt=t.screenWidth,this.hQt=t.screenHeight,this.oQt=t.windowOuterWidth,this.aQt=t.windowOuterHeight,this.e7t=t.safeAreaInset,this.n7t=t.supportsWakeLock})))}qn(){super.qn()}sBt(t){this.oQt=t.windowOuterWidth,this.aQt=t.windowOuterHeight,this.e7t=t.safeAreaInset}async l7t(){await this.C$(c_.R$.PlatformInfo.P$.u7t)}async h7t(){this.r7t=!0,await this.C$(c_.R$.PlatformInfo.P$.c7t)}async o7t(){this.r7t=!1,await this.C$(c_.R$.PlatformInfo.P$.f7t)}async a7t(){this.r7t=!1,await this.C$(c_.R$.PlatformInfo.P$.d7t)}}}{const d_=self._s;d_.R$.PlatformInfo.P$={p7t:()=>d_.Ks.oi,m7t:()=>"Windows"===d_.Ks.Qs,g7t:()=>"macOS"===d_.Ks.Qs,y7t:()=>"Linux"===d_.Ks.Qs,w7t:()=>"Chrome OS"===d_.Ks.Qs,S7t:()=>"Android"===d_.Ks.Qs,b7t:()=>"iOS"===d_.Ks.Qs,v7t(){const t=this.Nc.MB();return"html5"===t||"scirra-arcade"===t||"preview"===t||"instant-games"===t},M7t(){return this.Nc.BWt()},x7t(){return this.Nc.xB()},T7t(){return"windows-uwp"===this.Nc.MB()},G7t(){return this.Nc.TB()},I7t(){return"macos-wkwebview"===this.Nc.MB()},_7t(){return"linux-cef"===this.Nc.MB()},u7t:()=>!0,c7t:()=>!0,f7t:()=>!0,d7t:()=>!0,C7t(){return this.r7t},E7t(){return this.n7t}}}self._s.R$.PlatformInfo.Nrt={P7t(){this.n7t&&this.bCt("request-wake-lock")},A7t(){this.n7t&&(this.r7t=!1,this.wCt("release-wake-lock"))}},self._s.R$.PlatformInfo.$rt={R7t(){return this.Nc.I$().GB()},O7t(){return this.Nc.I$()._B()},J0t(){return this.Nc.WB()},Y0t(){return this.rQt},X0t(){return this.hQt},Z0t(){return this.Nc.I$().OJ()},K0t(){return this.Nc.I$().FJ()},Q0t(){return this.oQt},t1t(){return this.aQt},F7t(){return this.Nc.I$().OB()},D7t(){return this.Nc.I$().LB()},L7t(){return this.Nc.I$().NB()},k7t(){return this.Nc.I$().BB()},N7t:()=>navigator.connection&&navigator.connection.downlink||0,$7t:()=>navigator.connection&&navigator.connection.downlinkMax||0,ConnectionType:()=>navigator.connection&&navigator.connection.type||"unknown",B7t:()=>navigator.connection&&navigator.connection.effectiveType||"unknown",W7t:()=>navigator.connection&&navigator.connection.rtt||0,j7t:()=>navigator.hardwareConcurrency||0,V7t:()=>navigator.deviceMemory||0,U7t(){return this.e7t[0]},H7t(){return this.e7t[1]},q7t(){return this.e7t[2]},z7t(){return this.e7t[3]},J7t(){return this.Nc.MN()},Y7t(){return this.Nc.TN()}};{let p_=function(t){return"number"==typeof t?-t:t},m_=function(t,s){return"number"==typeof t&&"number"==typeof s},g_=function(t,s){return m_(t,s)?t+s:t},y_=function(t,s){return m_(t,s)?t-s:t},w_=function(t,s){return m_(t,s)?t*s:t},S_=function(t,s){return m_(t,s)?t/s:t},b_=function(t,s){return m_(t,s)?t%s:t},v_=function(t,s){return m_(t,s)?Math.pow(t,s):t},M_=function(t,s){if("string"==typeof t||"string"==typeof s){let i,e;return i="number"==typeof t?(Math.round(1e10*t)/1e10).toString():t,e="number"==typeof s?(Math.round(1e10*s)/1e10).toString():s,i+e}return t&&s?1:0},x_=function(t,s){return m_(t,s)?t||s?1:0:t};unaryminus=p_,bothNumbers=m_,add=g_,subtract=y_,multiply=w_,divide=S_,mod=b_,pow=v_,and=M_,or=x_;const T_=self._s;self.dMt=[t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).Vvt();return()=>s()+" - "+i()+" - (C) Wild Haired Science Teacher - Find More at whscience.org"},()=>0,t=>{const s=t.xMt(0),i=t.xMt(1);return()=>s.Yvt()+i.Yvt()/2+2},t=>{const s=t.xMt(0).fMt();return()=>24-64*s.Jet()},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).Vvt(),e=t.xMt(2).fMt(),n=t.xMt(3).fMt();return()=>s(i(e.Jet(),n.Jet()," "))},t=>{const s=t.xMt(0).fMt();return()=>s.Jet()},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).fMt();return()=>s(i.Jet()," ")-1},()=>.6,t=>{const s=t.xMt(0).fMt();return()=>s.Jet()+1},()=>24,()=>"",t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).Vvt(),e=t.xMt(2).Vvt(),n=t.xMt(3);return()=>s(i(e(n.Yvt(),"\n"," "),"  "," "))},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).Vvt(),e=t.xMt(2);return()=>s(i(e.Yvt(),"\n"," "))},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).Vvt(),e=t.xMt(2);return()=>"hi"+s(i(e.Yvt(),"\n"," "))},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).fMt();return()=>s(i.Jet())},()=>2,t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).fMt();return()=>s(i.Jet())-1},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).fMt(),e=t.xMt(2).Vvt(),n=t.xMt(3).fMt(),r=t.xMt(4).Vvt();return()=>s(i.Jet(),e(n.Jet(),r(),1))},()=>-1,t=>{const s=t.xMt(0).fMt(),i=t.xMt(1).Vvt(),e=t.xMt(2).fMt(),n=t.xMt(3).Vvt();return()=>s.Jet()+i(e.Jet(),n(),1)},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).Vvt(),e=t.xMt(2).Vvt(),n=t.xMt(3).fMt(),r=t.xMt(4).Vvt();return()=>s(i(e(n.Jet(),r()," "),1))},()=>"r",t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).fMt();return()=>s("RRR",i.Jet()," ")},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).Vvt(),e=t.xMt(2).Vvt(),n=t.xMt(3).fMt(),r=t.xMt(4).Vvt(),h=t.xMt(5).fMt();return()=>s(T_.Zn(Math.round(100*i(e(n.Jet(),r()," ")))/100,110,1760).toString(),h.Jet()," ")},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).Vvt(),e=t.xMt(2).Vvt(),n=t.xMt(3).Vvt(),r=t.xMt(4).Vvt(),h=t.xMt(5).fMt(),o=t.xMt(6).Vvt(),a=t.xMt(7).fMt(),l=t.xMt(8).Vvt(),u=t.xMt(9).fMt();return()=>s()+"//"+i(e()+""+n()+"#"+r(h.Jet()," ",",")+":"+o(a.Jet()," ",",")+":"+l(u.Jet()," ",","),"//","/")},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).fMt(),e=t.xMt(2).Vvt();return()=>s(i.Jet(),e()," ")},()=>"RRR",t=>{const s=t.xMt(0);return()=>s.Yvt()+"RRR "},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).Vvt(),e=t.xMt(2).fMt(),n=t.xMt(3).Vvt();return()=>s(i(e.Jet(),n()," "))},()=>3,t=>{const s=t.xMt(0),i=t.xMt(1).Vvt(),e=t.xMt(2).fMt(),n=t.xMt(3).Vvt();return()=>s.Yvt()+i(e.Jet(),n()," ")+" "},()=>4,t=>{const s=t.xMt(0),i=t.xMt(1).Vvt(),e=t.xMt(2).fMt(),n=t.xMt(3).Vvt();return()=>s.Yvt()+"[size=15pt]"+i(e.Jet(),n()," ")+"[/size] "},()=>5,t=>{const s=t.xMt(0),i=t.xMt(1).Vvt(),e=t.xMt(2).fMt(),n=t.xMt(3).Vvt();return()=>s.Yvt()+"[size=12pt]"+i(e.Jet(),n()," ")+"[/size] "},()=>6,t=>{const s=t.xMt(0),i=t.xMt(1).Vvt(),e=t.xMt(2).Vvt(),n=t.xMt(3).fMt(),r=t.xMt(4).Vvt();return()=>s.Yvt()+"[size=10pt]"+i(e(n.Jet(),r()," "),6)+"[/size] "},t=>{const s=t.xMt(0),i=t.xMt(1).Vvt(),e=t.xMt(2).Vvt(),n=t.xMt(3).Vvt(),r=t.xMt(4).fMt(),h=t.xMt(5).Vvt();return()=>s.Yvt()+i(e(n(r.Jet(),h()," ")),3)+" "},()=>"font-size",t=>{const s=t.xMt(0).Vvt();return()=>M_(Math.round(s()/36),"pt")},()=>"font-family",()=>"Courier New",()=>.1,t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).Vvt();return()=>s(i(),":")},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).Vvt(),e=t.xMt(2).Vvt(),n=t.xMt(3).Vvt();return()=>s(i(e(n(),0,":"),"#",""),",","\n")},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).Vvt(),e=t.xMt(2).Vvt(),n=t.xMt(3).Vvt();return()=>s(i(e(n(),1,":"),"#",""),",","\n")},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).Vvt(),e=t.xMt(2).Vvt(),n=t.xMt(3).Vvt();return()=>s(i(e(n(),2,":"),"#",""),",","\n")},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).fMt();return()=>s(i.Jet().toString())},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).fMt(),e=t.xMt(2).fMt();return()=>s(i.Jet().toString(),e.Jet())},t=>{const s=t.xMt(0).fMt(),i=t.xMt(1).Vvt(),e=t.xMt(2).fMt();return()=>s.Jet()-i(e.Jet().toString())},t=>{const s=t.xMt(0).fMt();return()=>s.Jet()+" "},t=>{const s=t.xMt(0).fMt(),i=t.xMt(1).fMt();return()=>M_(s.Jet(),i.Jet())},()=>"ToggleButton",t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1);return()=>s(i.sMt(),";")-1},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1),e=t.xMt(2).Vvt();return()=>s(i.sMt(),e(),";")},t=>{const s=t.xMt(0);return()=>s.Yvt()},t=>{const s=t.xMt(0).Vvt();return()=>s()},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1),e=t.xMt(2).fMt(),n=t.xMt(3).Vvt(),r=t.xMt(4);return()=>s(i.sMt(),(e.Jet()+1)%n(r.sMt(),";"),";")},()=>"Button",t=>{const s=t.xMt(0);return()=>Math.floor(.875*s.sMt())},t=>{const s=t.xMt(0);return()=>s.sMt()},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).fMt(),e=t.xMt(2).fMt();return()=>s(i.Jet(),e.Jet())-1},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).Vvt(),e=t.xMt(2).fMt(),n=t.xMt(3).Vvt(),r=t.xMt(4).fMt();return()=>s(i(e.Jet(),n(),r.Jet()))},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).fMt(),e=t.xMt(2).fMt();return()=>s(i.Jet(),e.Jet())},t=>{const s=t.xMt(0).fMt(),i=t.xMt(1).fMt(),e=t.xMt(2).fMt();return()=>s.Jet()+i.Jet()+e.Jet()},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).Vvt(),e=t.xMt(2).fMt(),n=t.xMt(3).fMt();return()=>Math.floor(s(i(e.Jet(),n.Jet())))},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).fMt(),e=t.xMt(2).fMt(),n=t.xMt(3).fMt();return()=>s(i.Jet(),e.Jet(),n.Jet())},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).Vvt(),e=t.xMt(2).fMt(),n=t.xMt(3).Vvt(),r=t.xMt(4).fMt(),h=t.xMt(5).Vvt(),o=t.xMt(6).fMt();return()=>s(i(e.Jet()),n(r.Jet()),h(o.Jet()))},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).Vvt(),e=t.xMt(2).fMt(),n=t.xMt(3).Vvt(),r=t.xMt(4).fMt(),h=t.xMt(5).fMt(),o=t.xMt(6).fMt();return()=>s(i(e.Jet(),n(),r.Jet()),h.Jet(),o.Jet())},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).fMt(),e=t.xMt(2).fMt(),n=t.xMt(3).Vvt(),r=t.xMt(4).fMt(),h=t.xMt(5).fMt(),o=t.xMt(6).fMt(),a=t.xMt(7).fMt();return()=>s(i.Jet(),e.Jet(),n(r.Jet(),h.Jet(),o.Jet()),a.Jet())},t=>{const s=t.xMt(0).Vvt(),i=t.xMt(1).Vvt(),e=t.xMt(2).fMt(),n=t.xMt(3).fMt(),r=t.xMt(4).Vvt(),h=t.xMt(5).fMt(),o=t.xMt(6).fMt(),a=t.xMt(7).fMt();return()=>s(i(e.Jet(),n.Jet()-r(),h.Jet()),o.Jet(),a.Jet())}]}}}),import_c3runtime=__toESM(require_c3runtime()),C32=self._s;self._Ut=function(){return[C32.R$.Touch,C32.R$.si,C32.R$.Text,C32.R$.rrt,C32.R$.h4t,C32.R$.Audio,C32.R$.PlatformInfo,C32.R$.A$.P$.u4,C32.R$.Text.Nrt.jc,C32.R$.A$.$rt.iZt,C32.R$.A$.$rt.eZt,C32.R$.A$.Nrt.ph,C32.R$.rrt.Nrt.qM,C32.R$.Text.$rt.EIt,C32.R$.Text.$rt.X2t,C32.R$.Text.Nrt.qM,C32.R$.A$.Nrt.cJt,C32.R$.A$.$rt.float,C32.R$.A$.$rt.$Yt,C32.R$.A$.P$.kzt,C32.Z7t.X7t,C32.Z7t.K7t,C32.Z7t.Q7t,C32.Z7t.t9t,C32.Z7t.s9t,C32.Z7t.i9t,C32.Z7t.e9t,C32.R$.A$.$rt.BYt,C32.R$.A$.P$.xSt,C32.R$.Touch.P$.zZt,C32.R$.A$.$rt.trim,C32.R$.A$.$rt.replace,C32.R$.h4t.$rt.Text,C32.R$.A$.$rt.kt,C32.R$.A$.P$.sJt,C32.R$.A$.$rt.find,C32.R$.A$.$rt.mid,C32.R$.A$.$rt.UXt,C32.R$.A$.$rt.NYt,C32.R$.A$.$rt.left,C32.R$.h4t.Nrt.jc,C32.R$.si.$rt.A0t,C32.R$.si.$rt.R0t,C32.R$.si.$rt.O0t,C32.R$.Text.$rt.Text,C32.R$.h4t.P$.w4t,C32.R$.h4t.Nrt.jIt,C32.R$.PlatformInfo.$rt.F7t,C32.R$.si.P$.IQt,C32.R$.si.$rt.F0t,C32.R$.A$.P$.Qzt,C32.R$.A$.Nrt.sN,C32.R$.A$.P$.$yt,C32.R$.Touch.P$.YZt,C32.R$.Text.P$.uIt,C32.R$.A$.P$.Vd,C32.R$.Text.Nrt.fIt,C32.R$.Text.$rt.Y2t,C32.R$.Touch.P$.rKt,C32.R$.Text.P$.QGt,C32.R$.Text.P$.tIt,C32.R$.A$.P$.Azt,C32.R$.Text.Nrt.sP,C32.R$.A$.Nrt.bJt,C32.R$.A$.$rt.random,C32.R$.A$.$rt.kYt]},self.YUt=[{Touch:0},{si:0},{n9t:0},{r9t:0},{h9t:0},{o9t:0},{a9t:0},{l9t:0},{u9t:0},{c9t:0},{Audio:0},{f9t:0},{d9t:0},{p9t:0},{m9t:0},{Highlight:0},{PlatformInfo:0},{g9t:0},{y9t:0},{w9t:0},{S9t:0},{b9t:0},{v9t:0},{M9t:0},{x9t:0},{T9t:0},{G9t:0},{I9t:0},{_9t:0},{C9t:0},{E9t:0},{P9t:0},{A9t:0},{R9t:0},{O9t:0},{F9t:0},{D9t:0},{L9t:0},{k9t:0},{N9t:0},{$9t:0},{B9t:0},{Number:0},{W9t:0},{j9t:0},{index:0},{V9t:0},{U9t:0},{H9t:0},{q9t:0},{z9t:0},{J9t:0},{Y9t:0},{X9t:0}],self.Z9t={Touch:class extends self.BV{},si:class extends self.BV{},h9t:class extends self.g2t{},a9t:class extends self.g2t{},l9t:class extends self.w5t{},u9t:class extends self.g2t{},c9t:class extends self.P4t{},Audio:class extends self.BV{},f9t:class extends self.P4t{},d9t:class extends self.g2t{},p9t:class extends self.g2t{},m9t:class extends self.g2t{},Highlight:class extends self.w5t{},PlatformInfo:class extends self.BV{},g9t:class extends self.P4t{},y9t:class extends self.P4t{},w9t:class extends self.g2t{},S9t:class extends self.g2t{},b9t:class extends self.g2t{},v9t:class extends self.P4t{}};var audioContext=null,destinationNode=null;function OnBeforeProjectStart(t){const s=t.uk.Audio;audioContext=s.j4t,destinationNode=s.V4t}function CreateAudioBuffer(t){return audioContext.createBuffer(1,Math.round(t*audioContext.sampleRate),audioContext.sampleRate)}function PlayAudioBuffer(t){const s=audioContext.createBufferSource();s.buffer=t,s.connect(destinationNode),s.start()}function CreateToneBuffer(t){const s=CreateAudioBuffer(.6),i=t*Math.PI*2/audioContext.sampleRate,e=s.getChannelData(0);for(let t=0,s=e.length;t<s;++t)e[t]=.25*Math.sin(t*i);return s}function CreateTwoToneBuffer(t,s){const i=CreateAudioBuffer(.6),e=t*Math.PI*2/audioContext.sampleRate,n=s*Math.PI*2/audioContext.sampleRate,r=i.getChannelData(0);for(let t=0,s=r.length;t<s;++t)r[t]=(.25*Math.sin(t*e)+.25*Math.sin(t*n))*Math.pow((r.length-t)/r.length,.25);return i}function CreateThreeToneBuffer(t,s,i){const e=CreateAudioBuffer(.6),n=t*Math.PI*2/audioContext.sampleRate,r=s*Math.PI*2/audioContext.sampleRate,h=i*Math.PI*2/audioContext.sampleRate,o=e.getChannelData(0);for(let t=0,s=o.length;t<s;++t)o[t]=(.25*Math.sin(t*n)+.25*Math.sin(t*r)+.25*Math.sin(t*h))*Math.pow((o.length-t)/o.length,.25);return e}function PlayTwo(t,s){PlayAudioBuffer(CreateTwoToneBuffer(t,s))}function PlayThree(t,s,i){PlayAudioBuffer(CreateThreeToneBuffer(t,s,i))}function PlayTone(t,s){PlayAudioBuffer(CreateToneBuffer(t))}runOnStartup((async t=>{t.addEventListener("beforeprojectstart",(()=>OnBeforeProjectStart(t)))}));var scriptsInEvents={async X7t(t,s){PlayTone(s._9t)},async K7t(t,s){PlayTone(s.I9t)},async Q7t(t,s){PlayTone(s.C9t)},async t9t(t,s){PlayTwo(s.I9t,s._9t)},async s9t(t,s){PlayTwo(s.I9t,s.C9t)},async i9t(t,s){PlayTwo(s._9t,s.C9t)},async e9t(t,s){PlayThree(s.I9t,s._9t,s.C9t)}};globalThis._s.Z7t=scriptsInEvents;
/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.4.1

Copyright (c) 2015-2021, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/