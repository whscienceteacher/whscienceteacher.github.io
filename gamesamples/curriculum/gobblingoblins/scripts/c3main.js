// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let P=function(t){bh=t},k=function(t){return t*Ph},F=function(t,s){return Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},j=function(){var t=new bh(4);return bh!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},z=function(t){var s=new bh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},B=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},U=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},W=function(t,s,i,e){var h=new bh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},Q=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},J=function(t,s){var i;return t===s?(i=s[1],t[1]=s[2],t[2]=i):(t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3]),t},Y=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*(s=s[3])-h*e;return r?(t[0]=s*(r=1/r),t[1]=-e*r,t[2]=-h*r,t[3]=i*r,t):null},V=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},H=function(t){return t[0]*t[3]-t[2]*t[1]},t=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*n+r*o,t[1]=h*n+s*o,t[2]=e*a+r*i,t[3]=h*a+s*i,t},q=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*n,t[1]=h*i+s*n,t[2]=e*-n+r*i,t[3]=h*-n+s*i,t},Z=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],i=i[1];return t[0]=e*n,t[1]=h*n,t[2]=r*i,t[3]=s*i,t},X=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t},K=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},$=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},tt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},st=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},it=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},s=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},et=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},ht=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],r=s[0],n=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=Th*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-n)<=Th*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-o)<=Th*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},rt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},nt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ot=function(){var t=new bh(6);return bh!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},at=function(t){var s=new bh(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},ut=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},lt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ct=function(t,s,i,e,h,r){var n=new bh(6);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n[4]=h,n[5]=r,n},ft=function(t,s,i,e,h,r,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t},dt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],s=s[5],o=i*r-e*h;return o?(t[0]=r*(o=1/o),t[1]=-e*o,t[2]=-h*o,t[3]=i*o,t[4]=(h*s-r*n)*o,t[5]=(e*n-i*s)*o,t):null},pt=function(t){return t[0]*t[3]-t[1]*t[2]},i=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],u=i[1],l=i[2],c=i[3],f=i[4],i=i[5];return t[0]=e*a+r*u,t[1]=h*a+n*u,t[2]=e*l+r*c,t[3]=h*l+n*c,t[4]=e*f+r*i+o,t[5]=h*f+n*i+s,t},mt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*a,t[1]=h*i+n*a,t[2]=e*-a+r*i,t[3]=h*-a+n*i,t[4]=o,t[5]=s,t},gt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e*a,t[1]=h*a,t[2]=r*i,t[3]=n*i,t[4]=o,t[5]=s,t},yt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=e*a+r*i+o,t[5]=h*a+n*i+s,t},Mt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t},wt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},St=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},Tt=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},bt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},xt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},e=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},vt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},Ct=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},Gt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},It=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],t=t[5],o=s[0],a=s[1],u=s[2],l=s[3],c=s[4],s=s[5];return Math.abs(i-o)<=Th*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(e-a)<=Th*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(h-u)<=Th*Math.max(1,Math.abs(h),Math.abs(u))&&Math.abs(r-l)<=Th*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-c)<=Th*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},h=function(){var t=new bh(9);return bh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Nt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Et=function(t){var s=new bh(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},_t=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Dt=function(t,s,i,e,h,r,n,o,a){var u=new bh(9);return u[0]=t,u[1]=s,u[2]=i,u[3]=e,u[4]=h,u[5]=r,u[6]=n,u[7]=o,u[8]=a,u},At=function(t,s,i,e,h,r,n,o,a,u){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t[8]=u,t},Lt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ot=function(t,s){var i,e,h;return t===s?(i=s[1],e=s[2],h=s[5],t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=h):(t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8]),t},Rt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],l=(s=s[8])*n-o*u,c=-s*r+o*a,f=u*r-n*a,d=i*l+e*c+h*f;return d?(t[0]=l*(d=1/d),t[1]=(-s*e+h*u)*d,t[2]=(o*e-h*n)*d,t[3]=c*d,t[4]=(s*i-h*a)*d,t[5]=(-o*i+h*r)*d,t[6]=f*d,t[7]=(-u*i+e*a)*d,t[8]=(n*i-e*r)*d,t):null},Pt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],s=s[8];return t[0]=n*s-o*u,t[1]=h*u-e*s,t[2]=e*o-h*n,t[3]=o*a-r*s,t[4]=i*s-h*a,t[5]=h*r-i*o,t[6]=r*u-n*a,t[7]=e*a-i*u,t[8]=i*n-e*r,t},kt=function(t){var s=t[0],i=t[3],e=t[4],h=t[5],r=t[6],n=t[7],o=t[8];return s*(o*e-h*n)+t[1]*(-o*i+h*r)+t[2]*(n*i-e*r)},r=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],s=s[8],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],M=i[7],i=i[8];return t[0]=c*e+f*n+d*u,t[1]=c*h+f*o+d*l,t[2]=c*r+f*a+d*s,t[3]=p*e+m*n+g*u,t[4]=p*h+m*o+g*l,t[5]=p*r+m*a+g*s,t[6]=y*e+M*n+i*u,t[7]=y*h+M*o+i*l,t[8]=y*r+M*a+i*s,t},Ft=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],s=s[8],c=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=c*e+i*n+u,t[7]=c*h+i*o+l,t[8]=c*r+i*a+s,t},jt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],s=s[8],c=Math.sin(i),i=Math.cos(i);return t[0]=i*e+c*n,t[1]=i*h+c*o,t[2]=i*r+c*a,t[3]=i*n-c*e,t[4]=i*o-c*h,t[5]=i*a-c*r,t[6]=u,t[7]=l,t[8]=s,t},zt=function(t,s,i){var e=i[0],i=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=i*s[3],t[4]=i*s[4],t[5]=i*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Ut=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Wt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Qt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Jt=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(u=i+i),r=(n=s[1])*u,n=n*(l=n+n),o=e*u,a=e*l,u=(s=s[3])*u,l=s*l,s=s*h;return t[0]=1-n-(e=e*h),t[3]=r-s,t[6]=o+l,t[1]=r+s,t[4]=1-i-e,t[7]=a-u,t[2]=o-l,t[5]=a+u,t[8]=1-i-n,t},Yt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,M=i*a-h*n,w=i*u-r*n,S=e*a-h*o,T=e*u-r*o,b=h*u-r*a,x=l*m-c*p,v=l*g-f*p,C=c*g-f*m;return(d=y*(f=f*(s=s[15])-d*g)-M*(c=c*s-d*m)+w*C+S*(l=l*s-d*p)-T*v+b*x)?(t[0]=(o*f-a*c+u*C)*(d=1/d),t[1]=(a*l-n*f-u*v)*d,t[2]=(n*c-o*l+u*x)*d,t[3]=(h*c-e*f-r*C)*d,t[4]=(i*f-h*l+r*v)*d,t[5]=(e*l-i*c-r*x)*d,t[6]=(m*b-g*T+s*S)*d,t[7]=(g*w-p*b-s*M)*d,t[8]=(p*T-m*w+s*y)*d,t):null},Vt=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Ht=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},qt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Zt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},n=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Xt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Kt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},$t=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},ts=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],u=t[7],t=t[8],l=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7],s=s[8];return Math.abs(i-l)<=Th*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(e-c)<=Th*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(h-f)<=Th*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(r-d)<=Th*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-p)<=Th*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(o-m)<=Th*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=Th*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(u-y)<=Th*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},ss=function(){var t=new bh(16);return bh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},is=function(t){var s=new bh(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},hs=function(t,s,i,e,h,r,n,o,a,u,l,c,f,d,p,m){var g=new bh(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=h,g[5]=r,g[6]=n,g[7]=o,g[8]=a,g[9]=u,g[10]=l,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},rs=function(t,s,i,e,h,r,n,o,a,u,l,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t[8]=u,t[9]=l,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},p=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ns=function(t,s){var i,e,h,r,n,o;return t===s?(i=s[1],e=s[2],h=s[3],r=s[6],n=s[7],o=s[11],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=h,t[13]=n,t[14]=o):(t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15]),t},os=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,M=i*a-h*n,w=i*u-r*n,S=e*a-h*o,T=e*u-r*o,b=h*u-r*a,x=l*m-c*p,v=l*g-f*p,C=l*(s=s[15])-d*p,G=c*g-f*m,I=c*s-d*m,N=f*s-d*g,E=y*N-M*I+w*G+S*C-T*v+b*x;return E?(t[0]=(o*N-a*I+u*G)*(E=1/E),t[1]=(h*I-e*N-r*G)*E,t[2]=(m*b-g*T+s*S)*E,t[3]=(f*T-c*b-d*S)*E,t[4]=(a*C-n*N-u*v)*E,t[5]=(i*N-h*C+r*v)*E,t[6]=(g*w-p*b-s*M)*E,t[7]=(l*b-f*w+d*M)*E,t[8]=(n*I-o*C+u*x)*E,t[9]=(e*C-i*I-r*x)*E,t[10]=(p*T-m*w+s*y)*E,t[11]=(c*w-l*T-d*y)*E,t[12]=(o*v-n*G-a*x)*E,t[13]=(i*G-e*v+h*x)*E,t[14]=(m*M-p*S-g*y)*E,t[15]=(l*S-c*M+f*y)*E,t):null},as=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,M=i*a-h*n,w=i*u-r*n,S=e*a-h*o,T=e*u-r*o,b=h*u-r*a,x=l*m-c*p,v=l*g-f*p,C=l*(s=s[15])-d*p,G=c*g-f*m,I=c*s-d*m,N=f*s-d*g;return t[0]=o*N-a*I+u*G,t[1]=h*I-e*N-r*G,t[2]=m*b-g*T+s*S,t[3]=f*T-c*b-d*S,t[4]=a*C-n*N-u*v,t[5]=i*N-h*C+r*v,t[6]=g*w-p*b-s*M,t[7]=l*b-f*w+d*M,t[8]=n*I-o*C+u*x,t[9]=e*C-i*I-r*x,t[10]=p*T-m*w+s*y,t[11]=c*w-l*T-d*y,t[12]=o*v-n*G-a*x,t[13]=i*G-e*v+h*x,t[14]=m*M-p*S-g*y,t[15]=l*S-c*M+f*y,t},us=function(t){var s=t[0],i=t[1],e=t[2],h=t[4],r=t[5],n=t[6],o=t[8],a=t[9],u=t[10],l=t[12],c=t[13],f=t[14],d=s*r-i*h,p=s*n-e*h,m=i*n-e*r,g=o*c-a*l,y=o*f-u*l,M=a*f-u*c;return t[7]*(s*M-i*y+e*g)-t[3]*(h*M-r*y+n*g)+t[15]*(o*m-a*p+u*d)-t[11]*(l*m-c*p+f*d)},o=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],s=s[15],M=i[0],w=i[1],S=i[2],T=i[3];return t[0]=M*e+w*o+S*c+T*m,t[1]=M*h+w*a+S*f+T*g,t[2]=M*r+w*u+S*d+T*y,t[3]=M*n+w*l+S*p+T*s,t[4]=(M=i[4])*e+(w=i[5])*o+(S=i[6])*c+(T=i[7])*m,t[5]=M*h+w*a+S*f+T*g,t[6]=M*r+w*u+S*d+T*y,t[7]=M*n+w*l+S*p+T*s,t[8]=(M=i[8])*e+(w=i[9])*o+(S=i[10])*c+(T=i[11])*m,t[9]=M*h+w*a+S*f+T*g,t[10]=M*r+w*u+S*d+T*y,t[11]=M*n+w*l+S*p+T*s,t[12]=(M=i[12])*e+(w=i[13])*o+(S=i[14])*c+(T=i[15])*m,t[13]=M*h+w*a+S*f+T*g,t[14]=M*r+w*u+S*d+T*y,t[15]=M*n+w*l+S*p+T*s,t},ls=function(t,s,i){var e,h,r,n,o,a,u,l,c,f,d,p,m=i[0],g=i[1],i=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*i+s[12],t[13]=s[1]*m+s[5]*g+s[9]*i+s[13],t[14]=s[2]*m+s[6]*g+s[10]*i+s[14],t[15]=s[3]*m+s[7]*g+s[11]*i+s[15]):(e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=u,t[7]=l,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*i+s[12],t[13]=h*m+a*g+f*i+s[13],t[14]=r*m+u*g+d*i+s[14],t[15]=n*m+l*g+p*i+s[15]),t},cs=function(t,s,i){var e=i[0],h=i[1],i=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*h,t[5]=s[5]*h,t[6]=s[6]*h,t[7]=s[7]*h,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fs=function(t,s,i,e){var h,r,n,o,a,u,l,c,f,d,p,m,g,y,M,w,S,T,b,x,v=e[0],C=e[1],e=e[2],G=Math.hypot(v,C,e);return G<Th?null:(v*=G=1/G,C*=G,e*=G,G=Math.sin(i),i=Math.cos(i),r=s[0],n=s[1],o=s[2],a=s[3],l=s[5],c=s[6],f=s[7],p=s[9],m=s[10],g=s[11],M=v*C*(h=1-i)-e*G,w=C*C*h+i,S=e*C*h+v*G,T=v*e*h+C*G,b=C*e*h-v*G,x=e*e*h+i,t[0]=r*(i=v*v*h+i)+(u=s[4])*(y=C*v*h+e*G)+(d=s[8])*(e=e*v*h-C*G),t[1]=n*i+l*y+p*e,t[2]=o*i+c*y+m*e,t[3]=a*i+f*y+g*e,t[4]=r*M+u*w+d*S,t[5]=n*M+l*w+p*S,t[6]=o*M+c*w+m*S,t[7]=a*M+f*w+g*S,t[8]=r*T+u*b+d*x,t[9]=n*T+l*b+p*x,t[10]=o*T+c*b+m*x,t[11]=a*T+f*b+g*x,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},ds=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[4],r=s[5],n=s[6],o=s[7],a=s[8],u=s[9],l=s[10],c=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=h*i+a*e,t[5]=r*i+u*e,t[6]=n*i+l*e,t[7]=o*i+c*e,t[8]=a*i-h*e,t[9]=u*i-r*e,t[10]=l*i-n*e,t[11]=c*i-o*e,t},ps=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],r=s[1],n=s[2],o=s[3],a=s[8],u=s[9],l=s[10],c=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i-a*e,t[1]=r*i-u*e,t[2]=n*i-l*e,t[3]=o*i-c*e,t[8]=h*e+a*i,t[9]=r*e+u*i,t[10]=n*e+l*i,t[11]=o*e+c*i,t},ms=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],r=s[1],n=s[2],o=s[3],a=s[4],u=s[5],l=s[6],c=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i+a*e,t[1]=r*i+u*e,t[2]=n*i+l*e,t[3]=o*i+c*e,t[4]=a*i-h*e,t[5]=u*i-r*e,t[6]=l*i-n*e,t[7]=c*i-o*e,t},gs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ys=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ms=function(t,s,i){var e,h=i[0],r=i[1],i=i[2],n=Math.hypot(h,r,i);return n<Th?null:(h*=n=1/n,r*=n,i*=n,n=Math.sin(s),s=Math.cos(s),t[0]=h*h*(e=1-s)+s,t[1]=r*h*e+i*n,t[2]=i*h*e-r*n,t[3]=0,t[4]=h*r*e-i*n,t[5]=r*r*e+s,t[6]=i*r*e+h*n,t[7]=0,t[8]=h*i*e+r*n,t[9]=r*i*e-h*n,t[10]=i*i*e+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},ws=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ss=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ts=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f=function(t,s,i){var e=s[0],h=s[2],r=h+h,n=e*(l=e+e),o=e*(c=(u=s[1])+u),e=e*r,a=u*c,u=u*r,l=(s=s[3])*l,c=s*c,s=s*r;return t[0]=1-(a+(h=h*r)),t[1]=o+s,t[2]=e-c,t[3]=0,t[4]=o-s,t[5]=1-(n+h),t[6]=u+l,t[7]=0,t[8]=e+c,t[9]=u-l,t[10]=1-(n+a),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},bs=function(t,s){var i=new bh(3),e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=e*e+h*h+r*r+n*n;return 0<c?(i[0]=2*(o*n+l*e+a*r-u*h)/c,i[1]=2*(a*n+l*h+u*e-o*r)/c,i[2]=2*(u*n+l*r+o*h-a*e)/c):(i[0]=2*(o*n+l*e+a*r-u*h),i[1]=2*(a*n+l*h+u*e-o*r),i[2]=2*(u*n+l*r+o*h-a*e)),f(t,s,i),t},a=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},d=function(t,s){var i=s[0],e=s[4],h=s[5],r=s[6],n=s[8],o=s[9],a=s[10];return t[0]=Math.hypot(i,s[1],s[2]),t[1]=Math.hypot(e,h,r),t[2]=Math.hypot(n,o,a),t},u=function(t,s){var i=new bh(3),e=(d(i,s),1/i[0]),h=s[0]*e,r=s[1]*(l=1/i[1]),n=s[2]*(i=1/i[2]),o=s[4]*e,a=s[5]*l,u=s[6]*i,e=s[8]*e,l=s[9]*l,c=0;return 0<(i=h+a+(s=s[10]*i))?(c=2*Math.sqrt(1+i),t[3]=.25*c,t[0]=(u-l)/c,t[1]=(e-n)/c,t[2]=(r-o)/c):a<h&&s<h?(c=2*Math.sqrt(1+h-a-s),t[3]=(u-l)/c,t[0]=.25*c,t[1]=(r+o)/c,t[2]=(e+n)/c):s<a?(c=2*Math.sqrt(1+a-h-s),t[3]=(e-n)/c,t[0]=(r+o)/c,t[1]=.25*c,t[2]=(u+l)/c):(c=2*Math.sqrt(1+s-h-a),t[3]=(r-o)/c,t[0]=(e+n)/c,t[1]=(u+l)/c,t[2]=.25*c),t},xs=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var s=e[0],h=e[1],r=e[2],n=e[4],o=e[5],a=e[6],u=e[8],l=e[9],e=e[10],c=(i[0]=Math.hypot(s,h,r),i[1]=Math.hypot(n,o,a),i[2]=Math.hypot(u,l,e),1/i[0]),f=1/i[1],s=s*c,h=h*f,r=r*(i=1/i[2]),n=n*c,a=a*i,u=u*c,c=l*f,l=e*i,e=0;return 0<(f=s+(o=o*f)+l)?(e=2*Math.sqrt(1+f),t[3]=.25*e,t[0]=(a-c)/e,t[1]=(u-r)/e,t[2]=(h-n)/e):o<s&&l<s?(e=2*Math.sqrt(1+s-o-l),t[3]=(a-c)/e,t[0]=.25*e,t[1]=(h+n)/e,t[2]=(u+r)/e):l<o?(e=2*Math.sqrt(1+o-s-l),t[3]=(u-r)/e,t[0]=(h+n)/e,t[1]=.25*e,t[2]=(a+c)/e):(e=2*Math.sqrt(1+l-s-o),t[3]=(h-n)/e,t[0]=(u+r)/e,t[1]=(a+c)/e,t[2]=.25*e),t},vs=function(t,s,i,e){var h=(n=s[0])*(l=n+n),r=n*(c=(a=s[1])+a),n=n*(f=(u=s[2])+u),o=a*c,a=a*f,u=u*f,l=(s=s[3])*l,c=s*c,s=s*f,f=e[0],d=e[1],e=e[2];return t[0]=(1-(o+u))*f,t[1]=(r+s)*f,t[2]=(n-c)*f,t[3]=0,t[4]=(r-s)*d,t[5]=(1-(h+u))*d,t[6]=(a+l)*d,t[7]=0,t[8]=(n+c)*e,t[9]=(a-l)*e,t[10]=(1-(h+o))*e,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Cs=function(t,s,i,e,h){var r=(o=s[0])*(c=o+o),n=o*(f=(u=s[1])+u),o=o*(d=(l=s[2])+l),a=u*f,u=u*d,l=l*d,c=(s=s[3])*c,f=s*f,s=s*d,d=e[0],p=e[1],e=e[2],m=h[0],g=h[1],h=h[2],y=(1-(a+l))*d,M=(n+s)*d,d=(o-f)*d,n=(n-s)*p,s=(1-(r+l))*p,l=(u+c)*p,p=(o+f)*e,o=(u-c)*e,f=(1-(r+a))*e;return t[0]=y,t[1]=M,t[2]=d,t[3]=0,t[4]=n,t[5]=s,t[6]=l,t[7]=0,t[8]=p,t[9]=o,t[10]=f,t[11]=0,t[12]=i[0]+m-(y*m+n*g+p*h),t[13]=i[1]+g-(M*m+s*g+o*h),t[14]=i[2]+h-(d*m+l*g+f*h),t[15]=1,t},Gs=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(u=i+i),r=(n=s[1])*u,n=n*(l=n+n),o=e*u,a=e*l,u=(s=s[3])*u,l=s*l,s=s*h;return t[0]=1-n-(e=e*h),t[1]=r+s,t[2]=o-l,t[3]=0,t[4]=r-s,t[5]=1-i-e,t[6]=a+u,t[7]=0,t[8]=o+l,t[9]=a-u,t[10]=1-i-n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Is=function(t,s,i,e,h,r,n){var o=1/(i-s),a=1/(h-e),u=1/(r-n);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(h+e)*a,t[10]=(n+r)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r*2*u,t[15]=0,t},l=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=(h+e)*(i=1/(e-h)),t[14]=2*h*e*i):(t[10]=-1,t[14]=-2*e),t},Ns=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=h*(i=1/(e-h)),t[14]=h*e*i):(t[10]=-1,t[14]=-e),t},Es=function(t,s,i,e){var h=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),n=Math.tan(s.leftDegrees*Math.PI/180),o=2/(n+(s=Math.tan(s.rightDegrees*Math.PI/180))),a=2/(h+r);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(n-s)*o*.5,t[9]=(h-r)*a*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},c=function(t,s,i,e,h,r,n){var o=1/(s-i),a=1/(e-h),u=1/(r-n);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=(n+r)*u,t[15]=1,t},_s=function(t,s,i,e,h,r,n){var o=1/(s-i),a=1/(e-h),n=1/(r-n);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=r*n,t[15]=1,t},Ds=function(t,s,i,e){var h,r,n,o,a=s[0],u=s[1],s=s[2],l=e[0],c=e[1],e=e[2],f=i[0],d=i[1],i=i[2];return Math.abs(a-f)<Th&&Math.abs(u-d)<Th&&Math.abs(s-i)<Th?p(t):(f=a-f,d=u-d,i=s-i,h=c*(i*=o=1/Math.hypot(f,d,i))-e*(d*=o),e=e*(f*=o)-l*i,l=l*d-c*f,(o=Math.hypot(h,e,l))?(h*=o=1/o,e*=o,l*=o):l=e=h=0,c=d*l-i*e,r=i*h-f*l,n=f*e-d*h,(o=Math.hypot(c,r,n))?(c*=o=1/o,r*=o,n*=o):n=r=c=0,t[0]=h,t[1]=c,t[2]=f,t[3]=0,t[4]=e,t[5]=r,t[6]=d,t[7]=0,t[8]=l,t[9]=n,t[10]=i,t[11]=0,t[12]=-(h*a+e*u+l*s),t[13]=-(c*a+r*u+n*s),t[14]=-(f*a+d*u+i*s),t[15]=1,t)},As=function(t,s,i,e){var h=s[0],r=s[1],s=s[2],n=e[0],o=e[1],e=e[2],a=h-i[0],u=r-i[1],l=a*a+u*u+(i=s-i[2])*i,c=(0<l&&(a*=l=1/Math.sqrt(l),u*=l,i*=l),o*i-e*u);return 0<(l=c*c+(e=e*a-n*i)*e+(n=n*u-o*a)*n)&&(c*=l=1/Math.sqrt(l),e*=l,n*=l),t[0]=c,t[1]=e,t[2]=n,t[3]=0,t[4]=u*n-i*e,t[5]=i*c-a*n,t[6]=a*e-u*c,t[7]=0,t[8]=a,t[9]=u,t[10]=i,t[11]=0,t[12]=h,t[13]=r,t[14]=s,t[15]=1,t},Ls=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Os=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Rs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Ps=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},ks=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Fs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},js=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},zs=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],u=t[7],l=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],t=t[15],y=s[0],M=s[1],w=s[2],S=s[3],T=s[4],b=s[5],x=s[6],v=s[7],C=s[8],G=s[9],I=s[10],N=s[11],E=s[12],_=s[13],D=s[14],s=s[15];return Math.abs(i-y)<=Th*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(e-M)<=Th*Math.max(1,Math.abs(e),Math.abs(M))&&Math.abs(h-w)<=Th*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(r-S)<=Th*Math.max(1,Math.abs(r),Math.abs(S))&&Math.abs(n-T)<=Th*Math.max(1,Math.abs(n),Math.abs(T))&&Math.abs(o-b)<=Th*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(a-x)<=Th*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(u-v)<=Th*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(l-C)<=Th*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(c-G)<=Th*Math.max(1,Math.abs(c),Math.abs(G))&&Math.abs(f-I)<=Th*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-N)<=Th*Math.max(1,Math.abs(d),Math.abs(N))&&Math.abs(p-E)<=Th*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(m-_)<=Th*Math.max(1,Math.abs(m),Math.abs(_))&&Math.abs(g-D)<=Th*Math.max(1,Math.abs(g),Math.abs(D))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},m=function(){var t=new bh(3);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},Bs=function(t){var s=new bh(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Us=function(t){var s=t[0];return Math.hypot(s,t[1],t[2])},g=function(t,s,i){var e=new bh(3);return e[0]=t,e[1]=s,e[2]=i,e},Ws=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Qs=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},Js=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Ys=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},Vs=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},Hs=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},qs=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Zs=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Xs=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Ks=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},$s=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ti=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},si=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ii=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2])},ei=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e+(s=s[2]-t[2])*s},hi=function(t){var s=t[0],i=t[1];return s*s+i*i+(t=t[2])*t},ri=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},ni=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},y=function(t,s){var i=s[0],e=s[1],h=s[2];return 0<(i=i*i+e*e+h*h)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},M=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},w=function(t,s,i){var e=s[0],h=s[1],s=s[2],r=i[0],n=i[1],i=i[2];return t[0]=h*i-s*n,t[1]=s*r-e*i,t[2]=e*n-h*r,t},oi=function(t,s,i,e){var h=s[0],r=s[1],s=s[2];return t[0]=h+e*(i[0]-h),t[1]=r+e*(i[1]-r),t[2]=s+e*(i[2]-s),t},ai=function(t,s,i,e){var h=Math.acos(Math.min(Math.max(M(s,i),-1),1)),r=Math.sin(h),n=Math.sin((1-e)*h)/r,e=Math.sin(e*h)/r;return t[0]=n*s[0]+e*i[0],t[1]=n*s[1]+e*i[1],t[2]=n*s[2]+e*i[2],t},ui=function(t,s,i,e,h,r){var n=r*r,o=n*(2*r-3)+1,a=n*(r-2)+r,u=n*(r-1);return t[0]=s[0]*o+i[0]*a+e[0]*u+h[0]*(n=n*(3-2*r)),t[1]=s[1]*o+i[1]*a+e[1]*u+h[1]*n,t[2]=s[2]*o+i[2]*a+e[2]*u+h[2]*n,t},li=function(t,s,i,e,h,r){var n=1-r,o=n*n,a=r*r,u=o*n;return t[0]=s[0]*u+i[0]*(o=3*r*o)+e[0]*(n=3*a*n)+h[0]*(a=a*r),t[1]=s[1]*u+i[1]*o+e[1]*n+h[1]*a,t[2]=s[2]*u+i[2]*o+e[2]*n+h[2]*a,t},ci=function(t,s){s=s||1;var i=2*Oh()*Math.PI,e=2*Oh()-1,h=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*h,t[1]=Math.sin(i)*h,t[2]=e*s,t},fi=function(t,s,i){var e=s[0],h=s[1],s=s[2],r=i[3]*e+i[7]*h+i[11]*s+i[15];return t[0]=(i[0]*e+i[4]*h+i[8]*s+i[12])/(r=r||1),t[1]=(i[1]*e+i[5]*h+i[9]*s+i[13])/r,t[2]=(i[2]*e+i[6]*h+i[10]*s+i[14])/r,t},di=function(t,s,i){var e=s[0],h=s[1],s=s[2];return t[0]=e*i[0]+h*i[3]+s*i[6],t[1]=e*i[1]+h*i[4]+s*i[7],t[2]=e*i[2]+h*i[5]+s*i[8],t},pi=function(t,s,i){var e=i[0],h=i[1],r=s[0],n=s[1],o=h*(s=s[2])-(c=i[2])*n,a=c*r-e*s,u=e*n-h*r,l=h*u-c*a,c=c*o-e*u,e=e*a-h*o;return a*=h=2*i[3],u*=h,c*=2,e*=2,t[0]=r+(o*=h)+(l*=2),t[1]=n+a+c,t[2]=s+u+e,t},mi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[0],r[1]=h[1]*Math.cos(e)-h[2]*Math.sin(e),r[2]=h[1]*Math.sin(e)+h[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},gi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[2]*Math.sin(e)+h[0]*Math.cos(e),r[1]=h[1],r[2]=h[2]*Math.cos(e)-h[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},yi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[0]*Math.cos(e)-h[1]*Math.sin(e),r[1]=h[0]*Math.sin(e)+h[1]*Math.cos(e),r[2]=h[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},Mi=function(t,s){var i=t[0],e=t[1],h=t[2],r=s[0],n=s[1],o=s[2],e=(i=Math.sqrt((i*i+e*e+h*h)*(r*r+n*n+o*o)))&&M(t,s)/i;return Math.acos(Math.min(Math.max(e,-1),1))},wi=function(t){return t[0]=0,t[1]=0,t[2]=0,t},Si=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},Ti=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},bi=function(t,s){var i=t[0],e=t[1],t=t[2],h=s[0],r=s[1],s=s[2];return Math.abs(i-h)<=Th*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-r)<=Th*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},S=function(){var t=new bh(4);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},xi=function(t){var s=new bh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},vi=function(t,s,i,e){var h=new bh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},Ci=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Gi=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},Ii=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Ni=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Ei=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},_i=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Di=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ai=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Li=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Oi=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Ri=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Pi=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},ki=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Fi=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2],s[3]-t[3])},ji=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],h=s[2]-t[2];return i*i+e*e+h*h+(s=s[3]-t[3])*s},T=function(t){var s=t[0];return Math.hypot(s,t[1],t[2],t[3])},b=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e+(t=t[3])*t},zi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},Bi=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Ui=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*i+e*e+h*h+(s=s[3])*s;return 0<r&&(r=1/Math.sqrt(r)),t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=s*r,t},x=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Wi=function(t,s,i,e){var h=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],n=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],i=i[2]*e[3]-i[3]*e[2],e=s[0],u=s[1],l=s[2],s=s[3];return t[0]=u*i-l*a+s*o,t[1]=-e*i+l*n-s*r,t[2]=e*a-u*n+s*h,t[3]=-e*o+u*r-l*h,t},Qi=function(t,s,i,e){var h=s[0],r=s[1],n=s[2],s=s[3];return t[0]=h+e*(i[0]-h),t[1]=r+e*(i[1]-r),t[2]=n+e*(i[2]-n),t[3]=s+e*(i[3]-s),t},Ji=function(t,s){var i,e,h,r,n,o;for(s=s||1;1<=(n=(i=2*Oh()-1)*i+(e=2*Oh()-1)*e););for(;1<=(o=(h=2*Oh()-1)*h+(r=2*Oh()-1)*r););var a=Math.sqrt((1-n)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*h*a,t[3]=s*r*a,t},Yi=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3];return t[0]=i[0]*e+i[4]*h+i[8]*r+i[12]*s,t[1]=i[1]*e+i[5]*h+i[9]*r+i[13]*s,t[2]=i[2]*e+i[6]*h+i[10]*r+i[14]*s,t[3]=i[3]*e+i[7]*h+i[11]*r+i[15]*s,t},Vi=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=i[0],o=i[1],a=i[2],u=(i=i[3])*e+o*r-a*h,l=i*h+a*e-n*r,c=i*r+n*h-o*e;return t[0]=u*i+(e=-n*e-o*h-a*r)*-n+l*-a-c*-o,t[1]=l*i+e*-o+c*-n-u*-a,t[2]=c*i+e*-a+u*-o-l*-n,t[3]=s[3],t},Hi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},qi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Zi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Xi=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],r=s[0],n=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=Th*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-n)<=Th*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-o)<=Th*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},v=function(){var t=new bh(4);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Ki=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},C=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},$i=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return Th<e?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){return t=Jh(t,s),Math.acos(2*t*t-1)},se=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*i+s*n+h*a-r*o,t[1]=h*i+s*o+r*n-e*a,t[2]=r*i+s*a+e*o-h*n,t[3]=s*i-e*n-h*o-r*a,t},G=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+s*n,t[1]=h*i+r*n,t[2]=r*i-h*n,t[3]=s*i-e*n,t},I=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i-r*n,t[1]=h*i+s*n,t[2]=r*i+e*n,t[3]=s*i-h*n,t},N=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+h*n,t[1]=h*i-e*n,t[2]=r*i+s*n,t[3]=s*i-r*n,t},ie=function(t,s){var i=s[0],e=s[1],s=s[2];return t[0]=i,t[1]=e,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-s*s)),t},E=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],r=Math.sqrt(i*i+e*e+h*h),s=Math.exp(s),n=0<r?s*Math.sin(r)/r:0;return t[0]=i*n,t[1]=e*n,t[2]=h*n,t[3]=s*Math.cos(r),t},_=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],r=0<(r=Math.sqrt(i*i+e*e+h*h))?Math.atan2(r,s)/r:0;return t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=.5*Math.log(i*i+e*e+h*h+s*s),t},ee=function(t,s,i){return _(t,s),Qh(t,t,i),E(t,t),t},D=function(t,s,i,e){var h,r,n=s[0],o=s[1],a=s[2],s=s[3],u=i[0],l=i[1],c=i[2],f=n*u+o*l+a*c+s*(i=i[3]);return f<0&&(f=-f,u=-u,l=-l,c=-c,i=-i),f=Th<1-f?(f=Math.acos(f),h=Math.sin(f),r=Math.sin((1-e)*f)/h,Math.sin(e*f)/h):(r=1-e,e),t[0]=r*n+f*u,t[1]=r*o+f*l,t[2]=r*a+f*c,t[3]=r*s+f*i,t},he=function(t){var s=Oh(),i=Oh(),e=Oh(),h=Math.sqrt(1-s),s=Math.sqrt(s);return t[0]=h*Math.sin(2*Math.PI*i),t[1]=h*Math.cos(2*Math.PI*i),t[2]=s*Math.sin(2*Math.PI*e),t[3]=s*Math.cos(2*Math.PI*e),t},re=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*i+e*e+h*h+(s=s[3])*s;return t[0]=-i*(r=r?1/r:0),t[1]=-e*r,t[2]=-h*r,t[3]=s*r,t},ne=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},A=function(t,s){var i,e,h,r=s[0]+s[4]+s[8];return 0<r?(h=Math.sqrt(r+1),t[3]=.5*h,t[0]=(s[5]-s[7])*(h=.5/h),t[1]=(s[6]-s[2])*h,t[2]=(s[1]-s[3])*h):(i=(1+(r=s[3*(r=s[4]>s[0]?1:0)+r]<s[8]?2:r))%3,e=(2+r)%3,h=Math.sqrt(s[3*r+r]-s[3*i+i]-s[3*e+e]+1),t[r]=.5*h,t[3]=(s[3*i+e]-s[3*e+i])*(h=.5/h),t[i]=(s[3*i+r]+s[3*r+i])*h,t[e]=(s[3*e+r]+s[3*r+e])*h),t},oe=function(t,s,i,e){var h=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Rh,r=Math.PI/360,n=(e*=r,i*=r,Math.sin(s*=r)),o=Math.cos(s),a=Math.sin(i),u=Math.cos(i),l=Math.sin(e),c=Math.cos(e);switch(h){case"xyz":t[0]=n*u*c+o*a*l,t[1]=o*a*c-n*u*l,t[2]=o*u*l+n*a*c,t[3]=o*u*c-n*a*l;break;case"xzy":t[0]=n*u*c-o*a*l,t[1]=o*a*c-n*u*l,t[2]=o*u*l+n*a*c,t[3]=o*u*c+n*a*l;break;case"yxz":t[0]=n*u*c+o*a*l,t[1]=o*a*c-n*u*l,t[2]=o*u*l-n*a*c,t[3]=o*u*c+n*a*l;break;case"yzx":t[0]=n*u*c+o*a*l,t[1]=o*a*c+n*u*l,t[2]=o*u*l-n*a*c,t[3]=o*u*c-n*a*l;break;case"zxy":t[0]=n*u*c-o*a*l,t[1]=o*a*c+n*u*l,t[2]=o*u*l+n*a*c,t[3]=o*u*c-n*a*l;break;case"zyx":t[0]=n*u*c-o*a*l,t[1]=o*a*c+n*u*l,t[2]=o*u*l-n*a*c,t[3]=o*u*c+n*a*l;break;default:throw new Error("Unknown angle order "+h)}return t},ae=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},ue=function(t,s){return Math.abs(x(t,s))>=1-Th},le=function(){var t=new bh(8);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},ce=function(t){var s=new bh(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},fe=function(t,s,i,e,h,r,n,o){var a=new bh(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=h,a[5]=r,a[6]=n,a[7]=o,a},de=function(t,s,i,e,h,r,n){var o=new bh(8),h=(o[0]=t,o[1]=s,o[2]=i,o[3]=e,.5*h),r=.5*r,n=.5*n;return o[4]=h*e+r*i-n*s,o[5]=r*e+n*t-h*i,o[6]=n*e+h*s-r*t,o[7]=-h*t-r*s-n*i,o},L=function(t,s,i){var e=.5*i[0],h=.5*i[1],i=.5*i[2],r=s[0],n=s[1],o=s[2],s=s[3];return t[0]=r,t[1]=n,t[2]=o,t[3]=s,t[4]=e*s+h*o-i*n,t[5]=h*s+i*r-e*o,t[6]=i*s+e*n-h*r,t[7]=-e*r-h*n-i*o,t},pe=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},me=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},ge=function(t,s){var i=v(),e=(u(i,s),new bh(3));return a(e,s),L(t,i,e),t},O=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},ye=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Me=function(t,s,i,e,h,r,n,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t},we=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},Se=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Te=function(t,s){var i=s[4],e=s[5],h=s[6],r=s[7],n=-s[0],o=-s[1],a=-s[2],s=s[3];return t[0]=2*(i*s+r*n+e*a-h*o),t[1]=2*(e*s+r*o+h*n-i*a),t[2]=2*(h*s+r*a+i*o-e*n),t},be=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=.5*i[0],a=.5*i[1],i=.5*i[2],u=s[4],l=s[5],c=s[6],s=s[7];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=n*o+h*i-r*a+u,t[5]=n*a+r*o-e*i+l,t[6]=n*i+e*a-h*o+c,t[7]=-e*o-h*a-r*i+s,t},xe=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=o*n+(d=s[7])*e+a*r-u*h,c=a*n+d*h+u*e-o*r,f=u*n+d*r+o*h-a*e,d=d*n-o*e-a*h-u*r;return G(t,s,i),e=t[0],t[4]=l*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-l*r,t[6]=f*n+d*r+l*h-c*e,t[7]=d*n-l*e-c*h-f*r,t},ve=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=o*n+(d=s[7])*e+a*r-u*h,c=a*n+d*h+u*e-o*r,f=u*n+d*r+o*h-a*e,d=d*n-o*e-a*h-u*r;return I(t,s,i),e=t[0],t[4]=l*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-l*r,t[6]=f*n+d*r+l*h-c*e,t[7]=d*n-l*e-c*h-f*r,t},Ce=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=o*n+(d=s[7])*e+a*r-u*h,c=a*n+d*h+u*e-o*r,f=u*n+d*r+o*h-a*e,d=d*n-o*e-a*h-u*r;return N(t,s,i),e=t[0],t[4]=l*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-l*r,t[6]=f*n+d*r+l*h-c*e,t[7]=d*n-l*e-c*h-f*r,t},Ge=function(t,s,i){var e=i[0],h=i[1],r=i[2],i=i[3],n=s[0],o=s[1],a=s[2],u=s[3];return t[0]=n*i+u*e+o*r-a*h,t[1]=o*i+u*h+a*e-n*r,t[2]=a*i+u*r+n*h-o*e,t[3]=u*i-n*e-o*h-a*r,t[4]=(n=s[4])*i+(u=s[7])*e+(o=s[5])*r-(a=s[6])*h,t[5]=o*i+u*h+a*e-n*r,t[6]=a*i+u*r+n*h-o*e,t[7]=u*i-n*e-o*h-a*r,t},Ie=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],u=i[3];return t[0]=e*u+s*n+h*a-r*o,t[1]=h*u+s*o+r*n-e*a,t[2]=r*u+s*a+e*o-h*n,t[3]=s*u-e*n-h*o-r*a,t[4]=e*(u=i[7])+s*(n=i[4])+h*(a=i[6])-r*(o=i[5]),t[5]=h*u+s*o+r*n-e*a,t[6]=r*u+s*a+e*o-h*n,t[7]=s*u-e*n-h*o-r*a,t},Ne=function(t,s,i,e){var h,r,n,o,a,u;return Math.abs(e)<Th?O(t,s):(u=Math.hypot(i[0],i[1],i[2]),e*=.5,h=(n=Math.sin(e))*i[0]/u,r=n*i[1]/u,n=n*i[2]/u,i=Math.cos(e),u=s[0],t[0]=u*i+(e=s[3])*h+(o=s[1])*n-(a=s[2])*r,t[1]=o*i+e*r+a*h-u*n,t[2]=a*i+e*n+u*r-o*h,t[3]=e*i-u*h-o*r-a*n,t[4]=(e=s[4])*i+(u=s[7])*h+(o=s[5])*n-(a=s[6])*r,t[5]=o*i+u*r+a*h-e*n,t[6]=a*i+u*n+e*r-o*h,t[7]=u*i-e*h-o*r-a*n,t)},Ee=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},_e=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=i[4],a=i[5],u=i[6],l=i[7],c=s[4],f=s[5],d=s[6],s=s[7],p=i[0],m=i[1],g=i[2],i=i[3];return t[0]=e*i+n*p+h*g-r*m,t[1]=h*i+n*m+r*p-e*g,t[2]=r*i+n*g+e*m-h*p,t[3]=n*i-e*p-h*m-r*g,t[4]=e*l+n*o+h*u-r*a+c*i+s*p+f*g-d*m,t[5]=h*l+n*a+r*o-e*u+f*i+s*m+d*p-c*g,t[6]=r*l+n*u+e*a-h*o+d*i+s*g+c*m-f*p,t[7]=n*l-e*o-h*a-r*u+s*i-c*p-f*m-d*g,t},De=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},Ae=function(t,s,i,e){var h=1-e;return Zh(s,i)<0&&(e=-e),t[0]=s[0]*h+i[0]*e,t[1]=s[1]*h+i[1]*e,t[2]=s[2]*h+i[2]*e,t[3]=s[3]*h+i[3]*e,t[4]=s[4]*h+i[4]*e,t[5]=s[5]*h+i[5]*e,t[6]=s[6]*h+i[6]*e,t[7]=s[7]*h+i[7]*e,t},Le=function(t,s){var i=Xh(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},Oe=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},Re=function(t,s){var i,e,h,r,n,o,a,u,l=Xh(s);return 0<l&&(l=Math.sqrt(l),u=(i=s[0]/l)*(n=s[4])+(e=s[1]/l)*(o=s[5])+(h=s[2]/l)*(a=s[6])+(r=s[3]/l)*(s=s[7]),t[0]=i,t[1]=e,t[2]=h,t[3]=r,t[4]=(n-i*u)/l,t[5]=(o-e*u)/l,t[6]=(a-h*u)/l,t[7]=(s-r*u)/l),t},Pe=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},ke=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Fe=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],t=t[7],u=s[0],l=s[1],c=s[2],f=s[3],d=s[4],p=s[5],m=s[6],s=s[7];return Math.abs(i-u)<=Th*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-l)<=Th*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(h-c)<=Th*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(r-f)<=Th*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-d)<=Th*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-p)<=Th*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=Th*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},R=function(){var t=new bh(2);return bh!=Float32Array&&(t[0]=0,t[1]=0),t},je=function(t){var s=new bh(2);return s[0]=t[0],s[1]=t[1],s},ze=function(t,s){var i=new bh(2);return i[0]=t,i[1]=s,i},Be=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ue=function(t,s,i){return t[0]=s,t[1]=i,t},We=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},Qe=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},Je=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},Ye=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},Ve=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},He=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},qe=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},Ze=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Xe=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Ke=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},$e=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},th=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1])},sh=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},ih=function(t){var s=t[0];return Math.hypot(s,t[1])},eh=function(t){var s=t[0];return s*s+(t=t[1])*t},hh=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},rh=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},nh=function(t,s){var i=s[0],e=s[1];return 0<(i=i*i+e*e)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t},oh=function(t,s){return t[0]*s[0]+t[1]*s[1]},ah=function(t,s,i){return s=s[0]*i[1]-s[1]*i[0],t[0]=t[1]=0,t[2]=s,t},uh=function(t,s,i,e){var h=s[0],s=s[1];return t[0]=h+e*(i[0]-h),t[1]=s+e*(i[1]-s),t},lh=function(t,s){s=s||1;var i=2*Oh()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},ch=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s,t[1]=i[1]*e+i[3]*s,t},fh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s+i[4],t[1]=i[1]*e+i[3]*s+i[5],t},dh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[3]*s+i[6],t[1]=i[1]*e+i[4]*s+i[7],t},ph=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[4]*s+i[12],t[1]=i[1]*e+i[5]*s+i[13],t},mh=function(t,s,i,e){var h=s[0]-i[0],s=s[1]-i[1],r=Math.sin(e),e=Math.cos(e);return t[0]=h*e-s*r+i[0],t[1]=h*r+s*e+i[1],t},gh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1],h=Math.sqrt((i*i+t*t)*(e*e+s*s));return Math.acos(Math.min(Math.max(h&&(i*e+t*s)/h,-1),1))},yh=function(t){return t[0]=0,t[1]=0,t},Mh=function(t){return"vec2("+t[0]+", "+t[1]+")"},wh=function(t,s){return t[0]===s[0]&&t[1]===s[1]},Sh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1];return Math.abs(i-e)<=Th*Math.max(1,Math.abs(i),Math.abs(e))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))};h,p,f,a,d,u,m,g,y,M,w,S,x,v,C,G,I,N,E,_,D,A,L,O,R,Th=1e-6,bh="undefined"!=typeof Float32Array?Float32Array:Array,Oh=Math.random,Rh="zyx",Ph=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),kh={__proto__:null,EPSILON:Th,get m(){return bh},g:Oh,M:Rh,S:P,T:k,equals:F},Fh=Object.freeze({__proto__:null,create:j,clone:z,C:B,identity:U,G:W,set:Q,I:J,N:Y,_:V,D:H,multiply:t,rotate:q,scale:Z,A:X,L:K,O:$,R:tt,P:st,add:it,F:s,j:et,equals:ht,B:rt,U:nt,mul:t,sub:s}),jh=Object.freeze({__proto__:null,create:ot,clone:at,C:ut,identity:lt,G:ct,set:ft,N:dt,D:pt,multiply:i,rotate:mt,scale:gt,translate:yt,A:Mt,L:wt,W:St,O:Tt,R:bt,add:xt,F:e,B:vt,U:Ct,j:Gt,equals:It,mul:i,sub:e}),zh=Object.freeze({__proto__:null,create:h,J:Nt,clone:Et,C:_t,G:Dt,set:At,identity:Lt,I:Ot,N:Rt,_:Pt,D:kt,multiply:r,translate:Ft,rotate:jt,scale:zt,W:Bt,A:Ut,L:Wt,Y:Qt,V:Jt,H:Yt,Z:Vt,O:Ht,R:qt,add:Zt,F:n,B:Xt,U:Kt,j:$t,equals:ts,mul:r,sub:n}),xh=Object.freeze({__proto__:null,create:ss,clone:is,C:es,G:hs,set:rs,identity:p,I:ns,N:os,_:as,D:us,multiply:o,translate:ls,scale:cs,rotate:fs,X:ds,K:ps,$:ms,W:gs,L:ys,A:Ms,tt:ws,it:Ss,et:Ts,ht:f,nt:bs,ot:a,ut:d,lt:u,ct:xs,ft:vs,dt:Cs,V:Gs,gt:Is,yt:l,perspective:l,Mt:Ns,St:Es,Tt:c,ortho:c,bt:_s,xt:Ds,vt:As,O:Ls,R:Os,add:Rs,F:Ps,B:ks,U:Fs,j:js,equals:zs,mul:o,sub:Ps}),qh=Ys,Kh=Vs,Wh=Hs,$h=ii,tr=ei,Bh=Us,sr=hi,Lh=m(),vh=Object.freeze({__proto__:null,create:m,clone:Bs,length:Us,G:g,C:Ws,set:Qs,add:Js,F:Ys,multiply:Vs,Ct:Hs,ceil:qs,floor:Zs,min:Xs,max:Ks,round:$s,scale:ti,Gt:si,It:ii,Nt:ei,Et:hi,_t:ri,inverse:ni,normalize:y,Dt:M,At:w,Lt:oi,Ot:ai,Rt:ui,Pt:li,random:ci,kt:fi,Ft:di,jt:pi,X:mi,K:gi,$:yi,angle:Mi,zt:wi,O:Si,j:Ti,equals:bi,sub:qh,mul:Kh,div:Wh,Bt:$h,Ut:tr,Wt:Bh,Qt:sr,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||3,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Lh[0]=t[n],Lh[1]=t[n+1],Lh[2]=t[n+2],h(Lh,Lh,r),t[n]=Lh[0],t[n+1]=Lh[1],t[n+2]=Lh[2];return t}}),qh=Ni,Kh=Ei,Wh=_i,$h=Fi,tr=ji,sr=T,ir=b,Ah=S(),Uh=Object.freeze({__proto__:null,create:S,clone:xi,G:vi,C:Ci,set:Gi,add:Ii,F:Ni,multiply:Ei,Ct:_i,ceil:Di,floor:Ai,min:Li,max:Oi,round:Ri,scale:Pi,Gt:ki,It:Fi,Nt:ji,length:T,Et:b,_t:zi,inverse:Bi,normalize:Ui,Dt:x,At:Wi,Lt:Qi,random:Ji,kt:Yi,jt:Vi,zt:Hi,O:qi,j:Zi,equals:Xi,sub:qh,mul:Kh,div:Wh,Bt:$h,Ut:tr,Wt:sr,Qt:ir,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||4,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Ah[0]=t[n],Ah[1]=t[n+1],Ah[2]=t[n+2],Ah[3]=t[n+3],h(Ah,Ah,r),t[n]=Ah[0],t[n+1]=Ah[1],t[n+2]=Ah[2],t[n+3]=Ah[3];return t}}),qh=xi,Kh=vi,Wh=Ci,$h=Gi,tr=Ii,sr=se,Qh=Pi,Jh=x,ir=Qi,er=Yh=T,hr=Vh=b,Hh=Ui,rr=Zi,Eh=m(),_h=g(1,0,0),Dh=g(0,1,0),nr=function(t,s,i){var e=M(s,i);return e<-.999999?(w(Eh,_h,s),Bh(Eh)<1e-6&&w(Eh,Dh,s),y(Eh,Eh),C(t,Eh,Math.PI),t):.999999<e?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(w(Eh,s,i),t[0]=Eh[0],t[1]=Eh[1],t[2]=Eh[2],t[3]=1+e,Hh(t,t))},Ih=v(),Nh=v(),or=function(t,s,i,e,h,r){return D(Ih,s,h,r),D(Nh,i,e,r),D(t,Ih,Nh,2*r*(1-r)),t},Gh=h(),qh=Object.freeze({__proto__:null,create:v,identity:Ki,Jt:C,Yt:$i,Vt:te,multiply:se,X:G,K:I,$:N,Ht:ie,exp:E,qt:_,pow:ee,Ot:D,random:he,N:re,Zt:ne,Xt:A,Kt:oe,O:ae,clone:qh,G:Kh,C:Wh,set:$h,add:tr,mul:sr,scale:Qh,Dt:Jh,Lt:ir,length:Yh,Wt:er,Et:Vh,Qt:hr,normalize:Hh,j:rr,equals:ue,$t:nr,ts:or,ss:function(t,s,i,e){return Gh[0]=i[0],Gh[3]=i[1],Gh[6]=i[2],Gh[1]=e[0],Gh[4]=e[1],Gh[7]=e[2],Gh[2]=-s[0],Gh[5]=-s[1],Gh[8]=-s[2],Hh(t,A(t,Gh))}}),Zh=Jh,Kh=Xh=Vh,$h=Object.freeze({__proto__:null,create:le,clone:ce,G:fe,es:de,ht:L,W:pe,A:me,J:ge,C:O,identity:ye,set:Me,hs:Wh,rs:we,ns:Wh,os:Se,ot:Te,translate:be,X:xe,K:ve,$:Ce,us:Ge,ls:Ie,ds:Ne,add:Ee,multiply:_e,mul:_e,scale:De,Dt:Zh,Lt:Ae,N:Le,Zt:Oe,length:Yh,Wt:Yh,Et:Xh,Qt:Kh,normalize:Re,O:Pe,j:ke,equals:Fe}),tr=ih,sr=Qe,ir=Je,er=Ye,hr=th,rr=sh,nr=eh,Ch=R(),or=Object.freeze({__proto__:null,create:R,clone:je,G:ze,C:Be,set:Ue,add:We,F:Qe,multiply:Je,Ct:Ye,ceil:Ve,floor:He,min:qe,max:Ze,round:Xe,scale:Ke,Gt:$e,It:th,Nt:sh,length:ih,Et:eh,_t:hh,inverse:rh,normalize:nh,Dt:oh,At:ah,Lt:uh,random:lh,ps:ch,gs:fh,Ft:dh,kt:ph,rotate:mh,angle:gh,zt:yh,O:Mh,j:wh,equals:Sh,Wt:tr,sub:sr,mul:ir,div:er,Bt:hr,Ut:rr,Qt:nr,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||2,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Ch[0]=t[n],Ch[1]=t[n+1],h(Ch,Ch,r),t[n]=Ch[0],t[n+1]=Ch[1];return t}}),globalThis.ys=kh,globalThis.ys.Ms=Fh,globalThis.ys.ws=jh,globalThis.ys.Ss=zh,globalThis.ys.Ts=xh,globalThis.ys.bs=qh,globalThis.ys.xs=$h,globalThis.ys.vs=or,globalThis.ys.Cs=vh,globalThis.ys.Gs=Uh}var Ch,Gh,Ih,Nh,Eh,_h,Dh,Ah,Lh,Th,bh,Oh,Rh,Ph,kh,Fh,jh,zh,xh,Bh,vh,Uh,Wh,Qh,Jh,Yh,Vh,Hh,qh,Zh,Xh,Kh,$h,tr,sr,ir,er,hr,rr,nr,or,O,R,P,k;{let a=function(t,s,i){var e=[0,0],h=t[1][1]-t[0][1],r=t[0][0]-t[1][0],t=h*t[0][0]+r*t[0][1],n=s[1][1]-s[0][1],o=s[0][0]-s[1][0],s=n*s[0][0]+o*s[0][1],a=h*o-n*r;return m(a,0,i=i||0)||(e[0]=(o*t-r*s)/a,e[1]=(h*s-n*t)/a),e},h=function(t,s,i,e){var h,r=s[0]-t[0],s=s[1]-t[1],n=e[0]-i[0];return n*s-(e=e[1]-i[1])*r!=0&&(h=(n*(t[1]-i[1])+e*(i[0]-t[0]))/(e*r-n*s),0<=(t=(r*(i[1]-t[1])+s*(t[0]-i[0]))/(n*s-e*r)))&&t<=1&&0<=h&&h<=1},o=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},x=function(t,s,i){return 0<o(t,s,i)},v=function(t,s,i){return 0<=o(t,s,i)},C=function(t,s,i){return o(t,s,i)<0},G=function(t,s,i){return o(t,s,i)<=0},r=function(t,s,i,e){var h,r,n;return e?(n=R,(r=O)[0]=s[0]-t[0],r[1]=s[1]-t[1],n[0]=i[0]-s[0],n[1]=i[1]-s[1],h=r[0]*n[0]+r[1]*n[1],r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),Math.acos(h/(r*n))<e):0===o(t,s,i)},I=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},N=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},n=function(t){t.length=0},E=function(t,s,i,e){for(var h=i;h<e;h++)t.push(s[h])},t=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!x(N(t,s-1),N(t,s),N(t,s+1))&&(u(t),!0)},u=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},_=function(t,s){return C(N(t,s-1),N(t,s),N(t,s+1))},l=function(t,s,i){var e,h=P,r=k;if(v(N(t,s+1),N(t,s),N(t,i))&&G(N(t,s-1),N(t,s),N(t,i)))return!1;for(var n=I(N(t,s),N(t,i)),o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&v(N(t,s),N(t,i),N(t,o+1))&&G(N(t,s),N(t,i),N(t,o))&&(h[0]=N(t,s),h[1]=N(t,i),r[0]=N(t,o),r[1]=N(t,o+1),e=a(h,r),I(N(t,s),e)<n))return!1;return!0},D=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&h(N(t,s),N(t,i),N(t,e),N(t,e+1)))return!1;return!0},c=function(t,s,i,e){var h=e||[];if(n(h),s<i)for(var r=s;r<=i;r++)h.push(t[r]);else{for(r=0;r<=i;r++)h.push(t[r]);for(r=s;r<t.length;r++)h.push(t[r])}return h},f=function(t){for(var s=[],i=[],e=[],h=Number.MAX_VALUE,r=0;r<t.length;++r)if(_(t,r))for(var n=0;n<t.length;++n)if(l(t,r,n)){for(var i=f(c(t,r,n,e)),o=f(c(t,n,r,e)),a=0;a<o.length;a++)i.push(o[a]);i.length<h&&(h=(s=i).length,s.push([N(t,r),N(t,n)]))}return s},s=function(t){var s=f(t);return 0<s.length?d(t,s):[t]},d=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var h=s[e],r=0;r<i.length;r++){var n=d(i[r],h);if(n){i.splice(r,1),i.push(n[0],n[1]);break}}return i}return e=t.indexOf((h=s)[0]),r=t.indexOf(h[1]),-1!==e&&-1!==r&&[c(t,e,r),c(t,r,e)]},i=function(t){for(var s=t,i=0;i<s.length-1;i++)for(var e=0;e<i-1;e++)if(h(s[i],s[i+1],s[e],s[e+1]))return!1;for(i=1;i<s.length-2;i++)if(h(s[0],s[s.length-1],s[i],s[i+1]))return!1;return!0},A=function(t,s,i,e,h){var r=s[1]-t[1],s=t[0]-s[0],t=r*t[0]+s*t[1],n=e[1]-i[1],e=i[0]-e[0],i=n*i[0]+e*i[1],o=r*e-n*s;return m(o,0,h=h||0)?[0,0]:[(e*t-s*i)/o,(r*i-n*t)/o]},L=function(t,s,i,e,h,r,n){r=r||100,n=n||0,h=h||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],u=[0,0],l=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],M=[],w=t,S=t;if(!(S.length<3))if(r<++n)console.warn("quickDecomp: max level ("+r+") reached.");else{for(var T=0;T<t.length;++T)if(_(w,T)){i.push(w[T]);for(var l=c=Number.MAX_VALUE,b=0;b<t.length;++b)x(N(w,T-1),N(w,T),N(w,b))&&G(N(w,T-1),N(w,T),N(w,b-1))&&(u=A(N(w,T-1),N(w,T),N(w,b),N(w,b-1)),C(N(w,T+1),N(w,T),u))&&(f=I(w[T],u))<c&&(c=f,a=u,m=b),x(N(w,T+1),N(w,T),N(w,b+1))&&G(N(w,T+1),N(w,T),N(w,b))&&(u=A(N(w,T+1),N(w,T),N(w,b),N(w,b+1)),x(N(w,T-1),N(w,T),u))&&(f=I(w[T],u))<l&&(l=f,o=u,p=b);if(m===(p+1)%t.length)u[0]=(a[0]+o[0])/2,u[1]=(a[1]+o[1])/2,e.push(u),T<p?(E(y,w,T,p+1),y.push(u),M.push(u),0!==m&&E(M,w,m,w.length),E(M,w,0,T+1)):(0!==T&&E(y,w,T,w.length),E(y,w,0,p+1),y.push(u),M.push(u),E(M,w,m,T+1));else{if(p<m&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(b=m;b<=p;++b)v(N(w,T-1),N(w,T),N(w,b))&&G(N(w,T+1),N(w,T),N(w,b))&&(f=I(N(w,T),N(w,b)))<d&&D(w,T,b)&&(d=f,g=b%t.length);T<g?(E(y,w,T,g+1),0!==g&&E(M,w,g,S.length),E(M,w,0,T+1)):(0!==T&&E(y,w,T,S.length),E(y,w,0,g+1),E(M,w,g,T+1))}return y.length<M.length?(L(y,s,i,e,h,r,n),L(M,s,i,e,h,r,n)):(L(M,s,i,e,h,r,n),L(y,s,i,e,h,r,n)),s}s.push(t)}return s},e=function(t,s){for(var i=0,e=t.length-1;3<t.length&&0<=e;--e)r(N(t,e-1),N(t,e),N(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},p=function(t,s){for(var i=t.length-1;1<=i;--i)for(var e=t[i],h=i-1;0<=h;--h)g(e,t[h],s)&&t.splice(i,1)},m=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},g=function(t,s,i){return m(t[0],s[0],i)&&m(t[1],s[1],i)};a,h,o,x,v,C,G,r,I,N,n,E,u,_,l,D,c,f,d,A,L,m,g,O=[],R=[],P=[],k=[],self.Is={Ns:s,Es:L,_s:i,Ds:e,As:p,Ls:t}}{let t=!1,s=!1,i="dev",e=Symbol("Construct internal API token"),h=14,r=self.Os=class{constructor(){throw TypeError("static class can't be instantiated")}static Rs(){if(h<=0)throw new Error("cannot obtain internal API token");return--h,e}static Ps(){t=!0}static ks(){return t}static Fs(){s=!0}static js(){return s}static zs(t){i=t}static Bs(){return i}static Us(){return"final"===i}};r.isDebug=!1,r.Ws=!1,r.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Qs={}}{const s=self.Os;s.Js=class{constructor(t){this.Ys=t,this.Vs=new Map,this.Hs()}Hs(){let t=this.Ys,s=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const i of s)this.qs(i)}qs(t){if(t)if(t.includes("=")){const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Vs.set(i,e)}else this.Vs.set(t,null)}Zs(){for(const t of this.Vs)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}Xs(t){return this.Vs.has(t)}Ks(t){const s=this.Vs.get(t);return void 0===s?null:s}$s(){history.replaceState("",document.title,location.pathname+location.search)}ti(t){this.Ys=t,this.Vs.clear(),this.Hs()}},s.si=new s.Js(location.search),s.ii=new s.Js(location.hash),s.si.Xs("perf")&&(s.ei=!0),"dev"!==s.si.Ks("mode")&&s.zs("final")}{let e=function(t){const s=parseFloat(t),i=B.get(s);return i||(13<=s?"11":"NT "+t)};e;const a=self.Os,z="(unknown)",B=(a.hi={ri:z,ni:z,oi:z,ai:z,li:NaN,ci:z,fi:"browser",di:!0,mi:!1,gi:!1,yi:!1,Mi:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),U=navigator.userAgent,W=navigator.userAgentData;if(W&&0<W.brands.length){let s=function(t){let s="",i="",e="",h="";for(const r of t){const n=Q.get(r.brand),o=(!s&&n&&(s=n,i=r.version),J.get(r.brand));!e&&o&&(e=o,h=r.version)}s||"Chromium"!==e||(a.hi.oi="Chromium",a.hi.ai=h),a.hi.oi=s||z,a.hi.ai=i||z,a.hi.ci=e||z};s,a.hi.ri=W.platform,a.hi.mi=W.mobile,a.hi.di=!a.hi.mi;const Q=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),J=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);s(W.brands);let i=!1;a.hi.Mi=async()=>{if(!i)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);s(t.fullVersionList),"Windows"===a.hi.ri?a.hi.ni=e(t.platformVersion):a.hi.ni=t.platformVersion,i=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let t=function(t,s){const i=Array.isArray(t)?t:[t];for(const e of i){const h=e.exec(U);if(h){s(h);break}}};t(/windows\s+nt\s+([\d\.]+)/i,t=>{a.hi.ri="Windows";const s=t[1];a.hi.ni=e(s)}),t(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{a.hi.ri="macOS",a.hi.ni=t[1].replace(/_/g,".")}),t(/CrOS/,()=>{a.hi.ri="Chrome OS"}),t(/linux|openbsd|freebsd|netbsd/i,()=>{a.hi.ri="Linux"}),t(/android/i,()=>{a.hi.ri="Android"}),t(/android\s+([\d\.]+)/i,t=>{a.hi.ri="Android",a.hi.ni=t[1]}),a.hi.ri===z&&(t(/(iphone|ipod|ipad)/i,t=>{a.hi.ri="iOS"}),t([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{a.hi.ri="iOS",a.hi.ni=t[1].replace(/_/g,".")}));const Y=/chrome\//i.test(U),V=/chromium\//i.test(U),H=/edg\//i.test(U),q=/OPR\//.test(U),Z=/nwjs/i.test(U),X=/safari\//i.test(U),K=/webkit/i.test(U),$=(H||q||t(/chrome\/([\d\.]+)/i,t=>{a.hi.oi="Chrome",a.hi.ai=t[1],a.hi.ci="Chromium"}),t(/edg\/([\d\.]+)/i,t=>{a.hi.oi="Edge",a.hi.ai=t[1],a.hi.ci="Chromium"}),t(/OPR\/([\d\.]+)/,t=>{a.hi.oi="Opera",a.hi.ai=t[1],a.hi.ci="Chromium"}),t(/chromium\/([\d\.]+)/i,t=>{a.hi.oi="Chromium",a.hi.ai=t[1],a.hi.ci="Chromium"}),t(/nwjs\/[0-9.]+/i,t=>{a.hi.oi="NW.js",a.hi.ai=t[1],a.hi.ci="Chromium",a.hi.fi="nwjs"}),t(/firefox\/([\d\.]+)/i,t=>{a.hi.oi="Firefox",a.hi.ai=t[1],a.hi.ci="Gecko"}),!X||Y||V||H||q||Z||(a.hi.oi="Safari",a.hi.ci="WebKit",t(/version\/([\d\.]+)/i,t=>{a.hi.ai=t[1]}),t(/crios\/([\d\.]+)/i,t=>{a.hi.oi="Chrome for iOS",a.hi.ai=t[1]}),t(/fxios\/([\d\.]+)/i,t=>{a.hi.oi="Firefox for iOS",a.hi.ai=t[1]}),t(/edgios\/([\d\.]+)/i,t=>{a.hi.oi="Edge for iOS",a.hi.ai=t[1]})),a.hi.ci===z&&K&&(a.hi.ci="WebKit"),"Android"===a.hi.ri&&"Safari"===a.hi.oi&&(a.hi.oi="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),tt=$.has(a.hi.ri)||"nwjs"===a.hi.fi;a.hi.di=tt,a.hi.mi=!tt}"Chrome"===a.hi.oi&&"browser"===a.hi.fi&&/wv\)/.test(U)&&(a.hi.fi="webview"),"nwjs"!==a.hi.fi&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(a.hi.fi="webapp"),a.hi.li=parseFloat(a.hi.ai);const i="macOS"===a.hi.ri&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;i&&(a.hi.ri="iOS",a.hi.ni=a.hi.ai,a.hi.di=!1,a.hi.mi=!0,a.hi.yi=!0),a.hi.gi="macOS"===a.hi.ri||"iOS"===a.hi.ri}{let n=function(i){return new Promise((t,s)=>{i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})},o=function(i){return new Promise((t,s)=>{i.oncomplete=()=>t(),i.onerror=()=>s(i.error),i.onabort=()=>s(i.error)})},t=function(t,s){return F(t,s)},s=function(t,s){return F(t,s,!0)},a=function(s){e(s);let t=et.get(s);return t instanceof Promise||(t=(async i=>{e(i);const t=indexedDB.open(i,st);return t.addEventListener("upgradeneeded",t=>{try{const s=t.target.result;s.createObjectStore(it)}catch(t){console.error("Failed to create objectstore for database "+i,t)}}),n(t)})(s),et.set(s,t),t.catch(t=>et.delete(s))),t},e=function(t){if("string"!=typeof t)throw new TypeError("expected string")},r=function(t,h){const s=t.objectStore(it).openCursor();return new Promise(i=>{const e=[];s.onsuccess=t=>{const s=t.target.result;if(s){switch(h){case"entries":e.push([s.key,s.value]);break;case"keys":e.push(s.key);break;case"values":e.push(s.value)}s.continue()}else i(e)}})};n,o,t,s,a,e,r;const st=2,it="keyvaluepairs",et=new Map,ht="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,rt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function F(s,i,e=!1,h=!0){const t=await a(s);try{const r=t.transaction([it],e?"readwrite":"readonly");return i(r)}catch(t){if(h&&"InvalidStateError"===t.name)return et.delete(s),F(s,i,e,!1);throw t}}class nt{constructor(t){e(t),this.name=t}async ready(){await a(this.name)}set(h,r){return e(h),s(this.name,async t=>{const s=t.objectStore(it).put(r,h),i=n(s),e=o(t);await Promise.all([e,i])})}get(r){return e(r),t(this.name,async t=>{const s=t.objectStore(it).get(r),i=n(s),e=o(t),[,h]=await Promise.all([e,i]);return h})}delete(h){return e(h),s(this.name,async t=>{const s=t.objectStore(it).delete(h),i=n(s),e=o(t);await Promise.all([e,i])})}clear(){return s(this.name,async t=>{const s=t.objectStore(it).clear(),i=n(s),e=o(t);await Promise.all([e,i])})}keys(){return t(this.name,async t=>{let s;if(rt){const h=t.objectStore(it).getAllKeys();s=n(h)}else s=r(t,"keys");const i=o(t),[,e]=await Promise.all([i,s]);return e})}values(){return t(this.name,async t=>{let s;if(ht){const h=t.objectStore(it).getAll();s=n(h)}else s=r(t,"values");const i=o(t),[,e]=await Promise.all([i,s]);return e})}entries(){return t(this.name,async t=>{const s=r(t,"entries"),i=o(t),[,e]=await Promise.all([i,s]);return e})}}self.wi=nt}{let i=function(t){throw new Error(`"${t}" is not implemented`)},e=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},h=function(e){return"object"==typeof e?new Promise(s=>{const{port1:t,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),t.postMessage(e)}):Promise.resolve(e)};i,e,h;const ot=self.wi,at=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];new WeakMap;class ut{constructor(t){this.Si=t,this.Ti=!this.Si,this.Ti||"undefined"!=typeof indexedDB||(this.Ti=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.bi=new Map}xi(t){if(!this.Ti)for(const s of at)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.Ti=!0;break}}async vi(t){const s=this.bi.get(t),i=await h(s);return void 0===i?null:i}async Ci(t,s){s=await h(s),this.bi.set(t,s)}Gi(t){this.bi.delete(t)}Ii(){this.bi.clear()}Ni(){return Array.from(this.bi.keys())}Ei(){return this.Ti}_i(){return this.bi}Di(t){this.bi=t}async getItem(s,t){if(e(t),this.Ti)return this.vi(s);let i;try{i=await this.Si.get(s)}catch(t){return this.xi(t),this.Ti?this.vi(s):(console.error(`Error reading '${s}' from storage, returning null: `,t),null)}return void 0===i?null:i}async setItem(s,i,t){if(e(t),void 0===i&&(i=null),this.Ti)await this.Ci(s,i);else try{await this.Si.set(s,i)}catch(t){if(this.xi(t),!this.Ti)throw t;await this.Ci(s,i)}}async removeItem(s,t){if(e(t),this.Ti)this.Gi(s);else try{await this.Si.delete(s)}catch(t){this.xi(t),this.Ti?this.Gi(s):console.error(`Error removing '${s}' from storage: `,t)}}async clear(t){if(e(t),this.Ti)this.Ii();else try{await this.Si.clear()}catch(t){this.xi(t),this.Ti?this.Ii():console.error("Error clearing storage: ",t)}}async keys(t){if(e(t),this.Ti)return this.Ni();let s=[];try{s=await this.Si.keys()}catch(t){if(this.xi(t),this.Ti)return this.Ni();console.error("Error getting storage keys: ",t)}return s}ready(t){return e(t),this.Ti?Promise.resolve(!0):this.Si.ready()}Ai(t){if(t.forceInMemoryFallback)return new ut(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new ot(s);return new ut(i)}}length(t){i("localforage.length()")}key(t,s){i("localforage.key()")}iterate(t,s){i("localforage.iterate()")}Li(t){i("localforage.setDriver()")}config(t){i("localforage.config()")}Oi(t){i("localforage.defineDriver()")}Ri(){i("localforage.driver()")}supports(t){i("localforage.supports()")}dropInstance(){i("localforage.dropInstance()")}}self.localforage=new ut(new ot("localforage"))}{const e=self.Os;if(e.Pi={},e.Pi.ki=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const s=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==s.reverse}catch(t){return!1}})(),e.Pi.Fi="undefined"!=typeof HTMLDialogElement,e.Pi.ji=!!self.requestIdleCallback,e.Pi.ImageBitmap=!!self.createImageBitmap,e.Pi.ImageBitmapOptions=!1,e.Pi.Bi=!1,e.Pi.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{e.Pi.ImageBitmapOptions=!0}).catch(()=>{e.Pi.ImageBitmapOptions=!1})}catch(t){e.Pi.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{e.Pi.Bi=10===t.width&&10===t.height}).catch(()=>{e.Pi.Bi=!1})}catch(t){e.Pi.Bi=!1}}if(e.Pi.Ui=!(!navigator.clipboard||!navigator.clipboard.readText),e.Pi.Wi=!(!navigator.permissions||!navigator.permissions.query),e.Pi.Qi=!1,e.Pi.Wi){const lt={name:"clipboard-read"};navigator.permissions.query(lt).then(()=>{e.Pi.Qi=!0}).catch(()=>{e.Pi.Qi=!1})}e.Pi.Ji=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),e.Pi.Yi="undefined"!=typeof Proxy,e.Pi.Vi=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),e.Pi.Hi="function"==typeof fetch,e.Pi.Zi=!!(self.isSecureContext&&"Opera"!==e.hi.oi&&navigator.storage&&navigator.storage.persist),e.Pi.Xi=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),e.Pi.Ki=(()=>{if("undefined"==typeof document)return!1;if("iOS"===e.hi.ri)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),e.Pi.ImageDecoder=void 0!==self.ImageDecoder,e.Pi.$i=!!self.VideoEncoder,e.Pi.te=!!self.showOpenFilePicker,e.Pi.ie=!!self.queryLocalFonts,e.Pi.UserActivation=!!navigator.userActivation,e.Pi.he=!1,(async()=>{let s;"undefined"==typeof document?s=new OffscreenCanvas(32,32):((s=document.createElement("canvas")).width=32,s.height=32);const t=s.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let i=null;try{s.convertToBlob?i=await s.convertToBlob({type:"image/webp",quality:1}):s.toBlob&&(i=await new Promise(t=>s.toBlob(t,"image/webp",1))),e.Pi.he=i&&"image/webp"===i.type}catch(t){e.Pi.he=!1}})()}{let e=function(t,i){return t.reduce((t,s)=>(0<i&&Array.isArray(s)?Array.prototype.push.apply(t,e(s,i-1)):t.push(s),t),[])};e;const ct=self.Os;if(!String.prototype.trimStart){const ft=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(ft,"")}}if(!String.prototype.trimEnd){const dt=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(dt,"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(ct.re(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),Array.prototype.flat||(Array.prototype.flat=function(t=1){return e(this,t)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.ne||(Set.prototype.ne=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((i,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,s)=>i({usage:t,quota:s}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let i=function(t){let s=pt.oe(),i="Assertion failure: "+t+"\n\nStack trace:\n"+s;console.error(i)};i;const pt=self.Os;self.assert=function(t,s){t||i(s)}}{const h=self.Os,mt=self.Qs,gt=(h.ae=function(t){return"number"==typeof t},h.ue=function(t){return h.ae(t)&&isFinite(t)},h.le=function(t){if(!h.ae(t))throw new TypeError("expected number")},h.fe=function(t){h.de(t)},h.pe=function(t,s,i){if(!h.ae(t)||isNaN(t)||t<s||i<t)throw new RangeError("number outside of range")},h.me=function(...s){for(let t of s);},h.ge=function(t){if(!h.ue(t))throw new TypeError("expected finite number")},h.ye=function(t){h.de(t)},h.Me=function(...s){for(let t of s);},h.we=function(t){return"string"==typeof t},h.Se=function(t){if(!h.we(t))throw new TypeError("expected string")},h.Te=function(t){h.de(t)},h.xe=function(...s){for(let t of s);},h.ve=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},h.Ce=function(t){if(!h.ve(t))throw new TypeError("expected simple object")},h.Ge=function(t){if(!h.de(t)&&!h.ve(t))throw new TypeError("expected simple object")},h.Ie=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},h.Ne=function(t){if(!h.Ie(t))throw new TypeError("expected object")},h.Ee=function(t){h.de(t)},h._e=function(...s){for(let t of s);},h.De=function(t){return h.Ae(t,Blob)&&"string"==typeof t.name},h.Le=function(t){if(!h.De(t))throw new TypeError("expected file")},h.Oe=function(t){h.de(t)},h.Re=function(t){return Array.isArray(t)},h.Pe=function(t){if(!h.Re(t))throw new TypeError("expected array")},h.ke=function(t){h.de(t)},h.Fe=function(...s){for(let t of s);},h.je=function(t){return!(!h.Re(t)||t.length&&!h.Re(t[0]))},h.Be=function(s){if(!h.je(s))throw new TypeError("expected 2d array");for(let t of s)if(!h.Re(t))throw new TypeError("expected 2d array")},h.Ue=function(t){h.de(t)},h.We=function(t){return"function"==typeof t},h.Qe=function(t,s){if(!h.We(t))throw new TypeError("expected function");if(!h.de(s)&&t!==s)throw new TypeError("expected same function reference")},h.Je=function(t){h.de(t)},h.Ye=function(...s){for(let t of s);},h.Ve=function(s,...i){if(!h.We(s))throw new TypeError("expected function");if(!i.length)throw new Error("missing comparison functions");for(let t of i)if(!h.de(t)&&s===t)return;throw new TypeError("expected same function reference")},h.He=function(...s){if(!h.de(s))for(let t of s);},h.qe=function(t,s){return t instanceof s},h.Ze=function(s,...i){for(let t of i)if(h.qe(s,t))return!0;return!1},h.Xe=function(t,s){if(!h.qe(t,s))throw new TypeError("unexpected type")},h.Ke=function(t,s){h.de(t)},h.$e=function(t,...s){for(let t of s);},h.th=function(t,...s){if(!h.Ze(t,...s))throw new TypeError("unexpected type")},h.ih=function(t,...s){if(!h.de(t)&&!h.Ze(t,...s))throw new TypeError("unexpected type")},h.eh=function(s,i){for(let t of s)if(!h.qe(t,i))return!1;return!0},h.hh=function(s){for(let t of s)if(!h.ue(t))return!1;return!0},h.rh=function(s,t){for(let t of s);},h.nh=function(s,t){if(!h.de(s))for(let t of s);},h.oh=function(s,t){if(!h.de(s))for(let t of s);},h.ah=function(s){for(let t of s);},h.uh=function(s){if(!h.de(s))for(let t of s);},h.fh=function(t,s){return!(h.de(t)||!h.we(t.nodeName))&&(!s||h.dh(t.nodeName,s))},h.ph=function(t,s){if(h.de(t)||!h.we(t.nodeName))throw new TypeError("expected DOM node");if(s&&!h.dh(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},h.mh=function(t,s){h.de(t)},h.gh=function(t,s){return!(h.de(t)||!h.we(t.tagName))&&(!s||h.dh(t.tagName,s))},h.yh=function(t,s){if(h.de(t)||!h.we(t.tagName))throw new TypeError("expected HTML element");if(s&&!h.dh(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},h.Mh=function(t,s){h.de(t)},h.wh=function(t){return h.gh(t,"img")||h.gh(t,"canvas")||h.gh(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},h.Sh=function(t){if(!h.wh(t))throw new TypeError("expected drawable")},h.Th=function(t){h.de(t)},h.bh=function(t){return t instanceof ImageData||h.wh(t)},h.xh=function(t){if(!h.bh(t))throw new TypeError("expected drawable or image data")},h.Ch=function(t){if(!h.de(t)&&!h.bh(t))throw new TypeError("expected drawable or image data")},h.Gh=function(t){return"string"==typeof t||h.HtmlString&&t instanceof h.HtmlString||t instanceof h.Ih},h.Nh=function(t){if(!h.Gh(t))throw new TypeError("expected string-like")},h.Eh=function(t){h.de(t)},h._h=function(...s){for(let t of s);},h.Dh=function(){throw new Error("must be overridden")},h.Ah=function(){throw new Error("not yet implemented")},h.Lh=function(t,...s){let i=t;if(void 0===i)return!1;for(let t of s){if(void 0===i[t])return!1;i=i[t]}return!0},h.de=function(t){return null==t},h.Oh=function(s){let i=s[0].constructor;for(let t of s)if(t.constructor!==i)return!1;return i},h.Rh=function(s,i){for(let t of s)if(!(t instanceof i))return!1;return!0},Object.getPrototypeOf(Uint8Array));h.Ph=function(t){return h.qe(t,gt)},h.kh=function(t){},h.Fh=function(t){h.jh(t,gt)},h.zh=function(t,...s){if(!h.Bh(t,...s))throw new TypeError("unexpected type")},h.Bh=function(t,...s){for(const i of s)if(h.Ae(t,i))return!0;return!1},h.jh=function(t,s){if(!h.Ae(t,s))throw new TypeError("unexpected type")},h.Ae=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},mt.le=h.le,mt.fe=h.fe,mt.ge=h.ge,mt.ye=h.ye,mt.Se=h.Se,mt.Te=h.Te,mt.Ne=h.Ne,mt.Ee=h.Ee,mt.Pe=h.Pe,mt.ke=h.ke,mt.Qe=h.Qe,mt.Je=h.Je,mt.Xe=h.Xe,mt.Ke=h.Ke,mt.de=h.de}{let e=function(t,s){let i=p.getType(t),e=p.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},h=function(t){console.warn("[Defence] "+t+" @",p.oe())},i=function(){if(f=-1,0<a.size||0<u.size){let t=new Set([...a.keys()].map(t=>p.Uh(t))),s=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+s),a.clear(),u.clear()}},r=function(s){let i=new Set;for(let t in s)i.add(t);return i},n=function(t,s){let i=r(s),e=d.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);p.Wh(s,[...i]),s.length&&console.warn(`[Defence] '${p.Uh(t)}' constructor creates inconsistent properties: `+s.join(", "))}else d.set(t,i)};e,h,i,r,n;const p=self.Os,yt=new Map;p.Qh=function(t,s){console.log("%c"+t,"font-weight: bold; color:"+s)},p.Jh=function(t,...s){yt.has(t)||yt.set(t,-1),-1===yt.get(t)&&yt.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...s),yt.set(t,-1)}))};let o,a=(p.Yh=function(t){performance.mark(t),(o=o||new Map).has(t)||o.set(t,{current:0,total:0,Vh:0,Hh:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.Vh.toPrecision(3)} :: calls => `+this.Hh}})},p.qh=function(t){performance.measure("measure-"+t,t);const s=performance.getEntriesByName("measure-"+t)[0],i=o.get(t);i.current=s.duration,i.total+=i.current,i.Vh=i.total/i.Hh,console.log(i.toString()),i.Hh++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},p.oe=function(){return(new Error).stack},p.Zh=function(){},p.cast=function(t,s){return t&&t instanceof s?t:null},p.Uh=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":p.ae(t)?"<number>":p.we(t)?"<string>":p.Re(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":p.We(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},p.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},p.range=function*(s,i){if(!isFinite(Math.abs(s-i)))throw new Error("Invalid parameters");if(i<s)for(let t=s-1;t>=i;t--)yield t;else for(let t=s;t<i;t++)yield t},new Map),u=new Map,l=new WeakMap,c=new WeakMap;p.Xh={};const Mt=new Set(["then","splice"]);p.Xh.get=function(t,s){return s in t||"symbol"==typeof s||Mt.has(s)||h(`Accessed missing property '${s}' from defended object '${p.Uh(t)}', returning undefined`),c.has(t)&&"symbol"!=typeof s&&!Mt.has(s)&&h(`Accessed property '${s}' on a released object '${p.Uh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]},p.Xh.set=function(t,s,i){return s in t||a.has(t)||h(`Set non-existent property '${s}' to '${i}' on defended object '${p.Uh(t)}'`),e(t[s],i)||a.has(t)||h(`Set '${p.getType(t[s])}' property '${s}' to type '${p.getType(i)}' on defended object '${p.Uh(t)}'`),c.has(t)&&h(`Set property '${s}' on a released object '${p.Uh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]=i,!0},p.Xh.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${p.Uh(t)}'`)},p.Xh.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${p.Uh(t)}'`)},p.Xh.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${p.Uh(t)}'`)};let f=-1,d=(p.Kh=class{constructor(){if(p.Ws&&p.Pi.Yi){let t=Object.create(new.target.prototype),s=new Proxy(t,p.Xh);return a.set(t,s),u.set(s,t),l.set(s,t),-1===f&&(f=requestAnimationFrame(i)),s}}},p.$h=function(s){if(p.Ws&&p.Pi.Yi&&s instanceof p.Kh){if(u.has(s)){let t=u.get(s);u.delete(s),a.delete(t)}return s}return p.isDebug?Object.seal(s):s},p.ir=function(t,...s){let i;try{i=new t(...s)}catch(t){throw u.clear(),a.clear(),t}return p.Ws&&n(t,i),p.$h(i)},p.er=function(t){let s=l.get(t);s&&c.set(s,p.oe())},p.hr=function(t){let s=l.get(t);return!!s&&!!c.get(s)},new Map);p.rr=class{constructor(t){this.nr="",t&&this.start(t)}start(t){p.ei&&(this.nr=t,performance.mark(this.nr+"-Start"))}end(){p.ei&&(performance.mark(this.nr+"-End"),performance.measure(this.nr,this.nr+"-Start",this.nr+"-End"))}next(t){p.ei&&(this.end(),this.nr=t,performance.mark(this.nr+"-Start"))}}}{let i=function(t){return 0===t&&1/t<0};i;const y=self.Os,wt=2*Math.PI,St=Math.PI/180,Tt=180/Math.PI,bt=(y.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0==e)return i;if(t<s){const h=i-(s-t)%e;return h===i?0:h}return s+(t-s)%e},y.ur=function(t,s,i,e,h){const r=i-s;if(0==r&&0===e)return t;const n=h-e;return(t-s)*n/r+e},y.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},y.lr=function(t,s,i){return t<s?s:i<t?i:t},y.cr=function(t){return(t%=wt)<0&&(t+=wt),t},y.dr=function(t){return t*St},y.pr=function(t){return t*Tt},y.mr=function(t,s,i,e){return Math.hypot(i-t,e-s)},y.gr=function(t,s,i,e){const h=i-t,r=e-s;return h*h+r*r},y.yr=function(t,s,i,e){return Math.atan2(e-s,i-t)},y.Mr=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),r=Math.cos(s),n=i*h+e*r;return 1<=n?0:n<=-1?Math.PI:Math.acos(n)},y.wr=function(t,s,i){let e=Math.sin(t),h=Math.cos(t),r=Math.sin(s),n=Math.cos(s);return Math.acos(e*r+h*n)>i?0<h*r-e*n?y.cr(t+i):y.cr(t-i):y.cr(s)},y.Sr=function(t,s){let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),r=Math.cos(s);return e*h-i*r<=0},y.Tr=function(t,s,i,e=0){let h=y.Mr(t,s),r=wt*e;return y.Sr(s,t)?y.cr(t+(h+r)*i):y.cr(t-(h+r)*i)},y.br=function(t,s,i,e=0){const h=y.Mr(t,s),r=wt*e;return y.Sr(s,t)?y.cr(t+(h+r)*i):y.cr(t+(wt-h+r)*i)},y.vr=function(t,s,i,e=0){const h=y.Mr(t,s),r=wt*e;return y.Sr(s,t)?y.cr(t-(-wt+h-r)*i):y.cr(t-(h+r)*i)},y.Cr=function(t,s){const i=y.Mr(t,s);return y.Sr(t,s)?y.cr(s-i):y.cr(s+i)},y.Lt=function(t,s,i){return t+i*(s-t)},y.Gr=function(t,s,i){return t===s?0:(i-t)/(s-t)},y.Ir=function(t,s,i,e,h){return y.Lt(e,h,y.Gr(t,s,i))},y.Nr=function(t,s,i,e){return y.Lt(y.Lt(t,s,e),y.Lt(s,i,e),e)},y.Er=function(t,s,i,e,h){return y.Lt(y.Nr(t,s,i,h),y.Nr(s,i,e,h),h)},y._r=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},y.Dr=function(t){return 0<t&&0==(t-1&t)},y.Ar=function(s){--s;for(let t=1;t<32;t<<=1)s|=s>>t;return s+1},y.Lr=function(t,s){return Math.round(t*s)/s},y.Or=function(t,s){return Math.floor(t*s)/s},y.Rr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},y.Pr=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},y.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;0<=e&&"0"===i.charAt(e);--e);return 0<=e&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},y.kr=function(t,s,i){return y.lr(t,0,255)|y.lr(s,0,255)<<8|y.lr(i,0,255)<<16},1024),xt=16384,vt=8191,Ct=(y.Fr=function(t,s,i,e){return t=y.lr(Math.floor(1024*t),-8192,vt),s=y.lr(Math.floor(1024*s),-8192,vt),i=y.lr(Math.floor(1024*i),-8192,vt),e=y.lr(Math.floor(1023*e),0,1023),t<0&&(t+=xt),s<0&&(s+=xt),i<0&&(i+=xt),-(t*xt*xt*bt+s*xt*bt+i*bt+e)},y.jr=function(t,s,i){return y.Fr(t,s,i,1)},y.zr=function(s){if(0<=s)return(255&s)/255;{let t=Math.floor(-s/(xt*xt*bt));return t>vt&&(t-=xt),t/1024}},y.Br=function(s){if(0<=s)return((65280&s)>>8)/255;{let t=Math.floor(-s%(xt*xt*bt)/(xt*bt));return t>vt&&(t-=xt),t/1024}},y.Ur=function(s){if(0<=s)return((16711680&s)>>16)/255;{let t=Math.floor(-s%(xt*bt)/bt);return t>vt&&(t-=xt),t/1024}},y.Wr=function(t){if(i(t))return 0;if(0<=t)return 1;{const s=Math.floor(-t%bt);return s/1023}},y.Qr=function(s,i){for(s=Math.floor(s),i=Math.floor(i);0!==i;){let t=i;i=s%i,s=t}return s},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]);y.Jr=function(i,e){if((i=Math.floor(i))===(e=Math.floor(e)))return[1,1];for(let s of Ct){let t=i/s[0]*s[1];if(Math.abs(e-t)<1)return s.slice(0);if(t=i/s[1]*s[0],Math.abs(e-t)<1)return[s[1],s[0]]}let t=y.Qr(i,e);return[i/t,e/t]},y.Yr=function(t,s,i,e,h,r,n,o){const a=Math.min(t,i),u=Math.max(t,i),l=Math.min(h,n),c=Math.max(h,n);if(u<l||c<a)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||m<f)return!1;const g=h-t+n-i,y=r-s+o-e,M=i-t,w=e-s,S=n-h,T=o-r,b=Math.abs(w*S-T*M),x=S*y-T*g;if(Math.abs(x)>b)return!1;const v=M*y-w*g;return Math.abs(v)<=b},y.Vr=function(t,s,i,e,h,r,n,o,a,u,l,c){const f=Math.min(a,l),d=Math.max(a,l);if(r<f||d<h)return!1;const p=Math.min(u,c),m=Math.max(u,c);if(o<p||m<n)return!1;const g=a-t+l-i,y=u-s+c-e,M=i-t,w=e-s,S=l-a,T=c-u,b=Math.abs(w*S-T*M),x=S*y-T*g;if(Math.abs(x)>b)return!1;const v=M*y-w*g;return Math.abs(v)<=b},y.Hr=function(t,s,i,e,h){const r=Math.min(t,i),n=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),u=h.qr(),l=h.Zr(),c=h.Xr(),f=h.Kr(),d=h.$r(),p=h.tn(),m=h.sn(),g=h.hn();return y.Vr(t,s,i,e,r,n,o,a,u,l,c,f)||y.Vr(t,s,i,e,r,n,o,a,c,f,d,p)||y.Vr(t,s,i,e,r,n,o,a,d,p,m,g)||y.Vr(t,s,i,e,r,n,o,a,m,g,u,l)},y.rn=function(s,i,e,h,r){let n=Math.min(s,e),o=Math.max(s,e),a=Math.min(i,h),u=Math.max(i,h),l=0;for(let t=r.length-4;l<=t;l+=2)if(y.Vr(s,i,e,h,n,o,a,u,r[l],r[l+1],r[l+2],r[l+3]))return!0;return y.Vr(s,i,e,h,n,o,a,u,r[l],r[l+1],r[0],r[1])};y.nn=function(t,s,i,e,h,r,n,o){const a=i-t,u=e-s,l=n-h,c=o-r,f=a*c-u*l;if(0==f)return 2;const d=((s-e)*(n-t)+a*(o-s))/f;return 0<d&&d<1+1e-6?(c*(n-t)+(h-n)*(o-s))/f:2},y.an=function(t,s,i,e,h,r,n,o,a){const u=(n-h)*a,l=(o-r)*a;return y.nn(t,s,i,e,h-u,r-l,n+u,o+l)},y.un=function(t,s,i,e,h,r,n,o){const a=h-i,u=r-e,l=n-i,c=o-e,f=t-i,d=s-e,p=a*a+u*u,m=a*l+u*c,g=a*f+u*d,y=l*l+c*c,M=l*f+c*d,w=1/(p*y-m*m),S=(y*g-m*M)*w,T=(p*M-m*g)*w;return 0<=S&&0<=T&&S+T<=1},y.ln=function(t,s,i,e,h,r,n,o){const a=h-i,u=r-e,l=n-i,c=o-e,f=t-i,d=s-e,p=a*a+u*u,m=a*l+u*c,g=l*l+c*c,y=f*a+d*u,M=f*l+d*c,w=p*g-m*m,S=(g*y-m*M)/w,T=(p*M-m*y)/w,b=1-S-T;return[b,S,T]},y.cn=function(t,s,i,e,h,r,n,o,a,u,l,c){return[t*e+s*n+i*u,t*h+s*o+i*l,t*r+s*a+i*c]}}{let u=self.Os,s=null,i="";if("undefined"!=typeof document){const Gt=(s=document).querySelector("base");(i=Gt&&Gt.hasAttribute("href")?Gt.getAttribute("href"):"")&&!(i=i.startsWith("/")?i.substr(1):i).endsWith("/")&&(i+="/")}u.fn=function(){return i},u.dn=function(){if(!s)return"";const t=s.location;return u.pn(t.origin+t.pathname)+i},u.pn=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},u.mn=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},u.gn=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},u.yn=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},u.Mn=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},u.wn=function(t){return t.replace(/\\/g,"/")},u.Sn=function(t,s){const i=t?u.gn(t).slice(1):"";return s===i},u.Tn=function(t,s){let i,e;return u.De(t)&&(i=u.Mn(t.name)),u.we(t)&&(i=u.Mn(t)),u.De(s)&&(e=u.Mn(s.name)),u.we(s)&&(e=u.Mn(s)),i===e},u.bn=function(t){t=u.wn(t);let s=/^\w\:\//.exec(t),i=(s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),e="",h=t,r,n="";0<i&&(e=t.slice(0,i),h=t.slice(i));const o=(r=h).lastIndexOf("."),a=(0<o&&(n=h.slice(o),r=h.slice(0,-n.length)),s+e+h);return{dir:e,xn:h,name:r,root:s,ext:n,vn:a}},u.Cn=function(i,e){return new Promise((t,s)=>{self.setTimeout(t,i,e)})},u.Gn=function(t){try{t()}catch(t){u.isDebug&&console.warn("Swallowed exception: ",t)}},u.In=function(){},u.dh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},u.Nn=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},u.En=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},u._n=function(t,s){t.length=s},u.Dn=function(t){t&&0!==t.length&&u._n(t,0)},u.An=function(i){if(i){for(let s=0;s<i.length;s++){let t=i[s];u._n(t,0)}u._n(i,0)}},u.Ln=function(s,i,e){const h=s.length;if(!((i|=0)<=h))for(let t=h;t<i;++t)s.push(e)},u.On=function(t,s,i){const e=t.length;(s|=0)<e?u._n(t,s):e<s&&u.Ln(t,s,i)},u.Rn=function(t,s){u.Dn(t),u.Wh(t,s)},u.Wh=function(i,e){if(e.length<1e4)i.push(...e);else for(let t=0,s=e.length;t<s;++t)i.push(e[t])},u.Pn=function(i,e){if(!((e=Math.floor(e))<0||e>=i.length)){let s=i.length-1;for(let t=e;t<s;++t)i[t]=i[t+1];u._n(i,s)}},u.kn=function(t,s){let i=t.indexOf(s);0<=i&&t.splice(i,1)},u.Fn=function(s,i){let e=s.length;if(i.length!==e)return!1;for(let t=0;t<e;++t)if(s[t]!==i[t])return!1;return!0},u.jn=function(i,e){let h=[],r=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e(t)?h.push(t):(i[r]=t,++r)}return u._n(i,r),h},u.zn=function(i,e){let t=i.length,h=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e.has(t)||(i[h++]=t)}return u._n(i,h),t-h},u.Bn=function(t,s){return t===Math.floor(t)&&0<=t&&t<s.length},u.Un=function(t,s){if(!u.Bn(t,s))throw new RangeError("array index out of bounds")},u.Wn=function(t){return t.slice()},u.Qn=function(t,i){let e=[];for(let s of t)if(u.Ie(s)){let t=i(s);if(!t)throw new Error("missing clone");if(t.constructor!==s.constructor)throw new Error("object is not a clone");e.push(t)}else u.Re(s)?e.push(u.Qn(s,i)):e.push(s);return e},u.Jn=function(s){let i=[];for(let t of s)i.push(t.slice());return i},u.Yn=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},u.Vn=function(t,s,i){const e=new Set;for(const h of t.values())s(h)&&(i?e.add(i(h)):e.add(h));return e},u.Hn=function(t,s){return t.union?t.union(s):new Set([...t,...s])},u.qn=function(t,s){for(const i of s)t.add(i);return t},u.first=function(s){for(let t of s)return t;return null},u.xor=function(t,s){return!t!=!s},u.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}},u.Zn=function(s){for(let t in s)if(s.hasOwnProperty(t))return!0;return!1},u.Xn=function(o,a){return o.length?new Promise((i,e)=>{let h=[],r=0,n=!1;for(let s=0,t=o.length;s<t;++s)h.push(void 0),o[s].then(t=>{n||(h[s]=t,++r===o.length?i(h):a(r,o.length))}).catch(t=>{n=!0,e(t)})}):Promise.resolve([])};let e=[],h=(u.Kn=function(t){e.push(t)},u.$n=function(){let i=0;for(let s of e){let t=s();i+=t}return Math.floor(i)},1),r=new Map,n=new MessageChannel,o=(n.port2.onmessage=function(t){const s=t.data,i=r.get(s);r.delete(s),i&&i(performance.now())},u.io=function(t){const s=h++;return r.set(s,t),n.port1.postMessage(s),s},u.eo=function(t){r.delete(t)},u.ho=u.io,u.ro=function(){return new Promise(t=>u.ho(t))},new Set);u.no=function(s){const i=self.requestAnimationFrame(async t=>{await u.ro(),o.has(i)&&(o.delete(i),s(t))});return o.add(i),i},u.ao=function(t){o.has(t)&&(self.cancelAnimationFrame(t),o.delete(t))}}{const r=self.Os;r.uo=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},r.lo=function(t){return!r.uo(t)},r.co=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},r.fo=function(t,s){return fetch(t,s).then(t=>(r.co(t),t))},r.do=function(t){return r.fo(t).then(t=>t.text())},r.po=function(t){return r.fo(t).then(t=>t.json())},r.mo=function(t){return r.fo(t).then(t=>t.blob())},r.yo=function(t){return r.fo(t).then(t=>t.arrayBuffer())},r.Mo=function(e){return new Promise((t,s)=>{const i=new Image;i.onload=()=>t(i),i.onerror=t=>s(t),i.src=e})},r.wo=function(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsArrayBuffer(e)})},r.So=function(e){return"function"==typeof e.text?e.text():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsText(e)})},r.To=function(t){return r.So(t).then(t=>JSON.parse(t))},r.bo=async function(t,s){let i=URL.createObjectURL(t);try{const e=await r.Mo(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof e.decode&&await e.decode(),e}finally{i&&URL.revokeObjectURL(i)}},r.xo=function(t,s){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,s);{const i=document.createElement("canvas");return i.width=t,i.height=s,i}},r.vo=function(s,i,e){if("number"!=typeof e&&(e=1),i=i||"image/png",e=r.lr(e,0,1),s.convertToBlob)return s.convertToBlob({type:i,quality:e});if(s.toBlob)return new Promise(t=>s.toBlob(t,i,e));throw new Error("could not convert canvas to blob")},r.Co=function(t,s,i){const e=r.xo(t.width,t.height),h=e.getContext("2d");return h.drawImage(t,0,0),r.vo(e,s,i)},r.Go=function(t,s,i){if(r.Pi.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>r.Co(t,s,i));if(r.Pi.ImageBitmap)return createImageBitmap(t).then(t=>r.Co(t,s,i));{const e=r.xo(t.width,t.height),h=e.getContext("2d");return h.putImageData(t,0,0),r.vo(e,s,i)}},r.Io=function(t,s){t.clear();for(const i of s)t.add(i)},r.No=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},r.Eo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},r._o=function s(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>s(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],s(t[1])])};{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}},r.Do=function s(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>s(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],s(t[1])]));{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}}return t},r.Ao=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const h of t)"-"===h?0<e&&(i=!0):i?(s+=h.toUpperCase(),i=!1):s+=h,++e;return s},r.Lo=function(t){return"object"==typeof t&&"function"==typeof t.next},r.Oo=function(s,i){const e=[];if("function"==typeof i)for(let t=0;t<s;++t)e.push(i());else for(let t=0;t<s;++t)e.push(i);return e}}{let e=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},u=function(t,s,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};e,u;const l=self.Os,It=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,Nt=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;l.Ro=class{constructor(t,s,i,e){this.Po=NaN,this.ko=NaN,this.Fo=NaN,this.jo=NaN,this.Po=0,this.ko=0,this.Fo=0,this.jo=0,t instanceof l.Ro?this.set(t):this.zo(t||0,s||0,i||0,e||0)}Bo(t,s,i){return this.Po=+t,this.ko=+s,this.Fo=+i,this.lr(),this}zo(t,s,i,e){return this.Po=+t,this.ko=+s,this.Fo=+i,this.jo=+e,this.lr(),this}set(t){return this.Po=t.Po,this.ko=t.ko,this.Fo=t.Fo,this.jo=t.jo,this}C(t){return this.set(t)}add(t){this.Po+=t.Po,this.ko+=t.ko,this.Fo+=t.Fo,this.jo+=t.jo,this.lr()}Uo(t,s,i,e=0){this.Po+=+t,this.ko+=+s,this.Fo+=+i,this.jo+=+e,this.lr()}Wo(t){this.Qo(Math.max(this.Po,t.Po)-Math.min(this.Po,t.Po)),this.Jo(Math.max(this.ko,t.ko)-Math.min(this.ko,t.ko)),this.Yo(Math.max(this.Fo,t.Fo)-Math.min(this.Fo,t.Fo)),this.Vo(Math.max(this.jo,t.jo)-Math.min(this.jo,t.jo)),this.lr()}Ho(t){this.Po=t.Po,this.ko=t.ko,this.Fo=t.Fo}Qo(t){this.Po=l.lr(+t,0,1)}qo(){return this.Po}Jo(t){this.ko=l.lr(+t,0,1)}Zo(){return this.ko}Yo(t){this.Fo=l.lr(+t,0,1)}Xo(){return this.Fo}Vo(t){this.jo=l.lr(+t,0,1)}Ko(){return this.jo}clone(){return l.ir(l.Ro,this.Po,this.ko,this.Fo,this.jo)}toArray(){return[this.Po,this.ko,this.Fo,this.jo]}$o(){return new Float64Array(this.toArray())}ta(t,s){t[s++]=this.Po,t[s++]=this.ko,t[s++]=this.Fo,t[s]=this.jo}ea(t,s){t[s++]=this.Po,t[s++]=this.ko,t[s]=this.Fo}equals(t){return this.Po===t.Po&&this.ko===t.ko&&this.Fo===t.Fo&&this.jo===t.jo}ra(t){return this.Po===t.Po&&this.ko===t.ko&&this.Fo===t.Fo}na(t,s,i){return this.Po===t&&this.ko===s&&this.Fo===i}oa(t,s,i,e){return this.Po===t&&this.ko===s&&this.Fo===i&&this.jo===e}aa(t,s){return t[s]===Math.fround(this.Po)&&t[s+1]===Math.fround(this.ko)&&t[s+2]===Math.fround(this.Fo)&&t[s+3]===Math.fround(this.jo)}ua(t,s){return t[s]===Math.fround(this.Po)&&t[s+1]===Math.fround(this.ko)&&t[s+2]===Math.fround(this.Fo)}multiply(t){this.Po*=t.Po,this.ko*=t.ko,this.Fo*=t.Fo,this.jo*=t.jo}la(t){this.Po*=t,this.ko*=t,this.Fo*=t,this.jo*=t}ca(){return this.Po*=this.jo,this.ko*=this.jo,this.Fo*=this.jo,this}fa(){return this.Po/=this.jo,this.ko/=this.jo,this.Fo/=this.jo,this}lr(){return this.Po=l.lr(this.Po,0,1),this.ko=l.lr(this.ko,0,1),this.Fo=l.lr(this.Fo,0,1),this.jo=l.lr(this.jo,0,1),this}da(t){this.Po=l.zr(t),this.ko=l.Br(t),this.Fo=l.Ur(t),this.jo=l.Wr(t)}pa(t,s,i){const e=l.ue(t)?t:this.qo(),h=l.ue(s)?s:this.Zo(),r=l.ue(i)?i:this.Xo();return`rgb(${100*e}%, ${100*h}%, ${100*r}%)`}ma(t,s,i,e){const h=l.ue(t)?t:this.qo(),r=l.ue(s)?s:this.Zo(),n=l.ue(i)?i:this.Xo(),o=l.ue(e)?e:this.Ko();return`rgba(${100*h}%, ${100*r}%, ${100*n}%, ${o})`}ga(){const t=Math.round(255*this.qo()),s=Math.round(255*this.Zo()),i=Math.round(255*this.Xo());return"#"+e(t.toString(16))+e(s.toString(16))+e(i.toString(16))}ya(t){if("string"!=typeof t)return!1;let s,i,e;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Qo(s),isFinite(i)&&this.Jo(i),isFinite(e)&&this.Yo(e),this.Vo(1),!0}Ma(){const t=Math.round(255*this.qo()),s=Math.round(255*this.Zo()),i=Math.round(255*this.Xo());return t+`, ${s}, `+i}wa(){const t=Math.round(255*this.qo()),s=Math.round(255*this.Zo()),i=Math.round(255*this.Xo());return[t,s,i]}Sa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Qo(i),isFinite(e)&&this.Jo(e),isFinite(h)&&this.Yo(h),this.Vo(1),!0}Ta(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Qo(i),isFinite(e)&&this.Jo(e),isFinite(h)&&this.Yo(h),this.Vo(1),!0}ba(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.Qo(i),isFinite(e)&&this.Jo(e),isFinite(h)&&this.Yo(h),isFinite(r)&&this.Vo(r),!0}xa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.Qo(i),isFinite(e)&&this.Jo(e),isFinite(h)&&this.Yo(h),isFinite(r)&&this.Vo(r),!0}Ca(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.Ta(t):this.Sa(t);if(t.startsWith("rgba("))return t.includes("%")?this.xa(t):this.ba(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.Ga(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.Ta(t):4===s.length&&this.xa(t):3===s.length?this.Sa(t):4===s.length&&this.ba(t)}}return this.ya(t)}toJSON(){return[this.Po,this.ko,this.Fo,this.jo]}Ia(t,s,i,e){let h,r,n;if(t%=360,s=l.lr(s,0,100),i=l.lr(i,0,100),e=l.lr(e,0,1),t/=360,i/=100,0==(s/=100))h=r=n=i;else{const o=i<.5?i*(1+s):i+s-i*s,a=2*i-o;h=u(a,o,t+1/3),r=u(a,o,t),n=u(a,o,t-1/3)}return this.Qo(h),this.Jo(r),this.Yo(n),this.Vo(e),this}Ga(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=It.exec(s),e=Nt.exec(s);return i&&4===i.length?(this.Ia(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.Ia(+i[1],+i[2],+i[3],+i[4]),0))}Na(){const t=this.Po,s=this.ko,i=this.Fo,e=this.jo,h=l.Ro.Ea(t,s,i),r=l.Ro._a(t,s,i),n=l.Ro.Da(t,s,i);return`hsla(${h}, ${r}%, ${n}%, ${e})`}Aa(){const t=this.Po,s=this.ko,i=this.Fo;return[l.Ro.Ea(t,s,i),l.Ro._a(t,s,i),l.Ro.Da(t,s,i),this.jo]}La(t){!Array.isArray(t)||t.length<3||(this.Po=t[0],this.ko=t[1],this.Fo=t[2],this.jo=4<=t.length?t[3]:1)}set r(t){this.Qo(t)}get r(){return this.qo()}set Oa(t){this.Jo(t)}get Oa(){return this.Zo()}set b(t){this.Yo(t)}get b(){return this.Xo()}set a(t){this.Vo(t)}get a(){return this.Ko()}Ra(t,s){switch(t){case 0:this.Qo(s);break;case 1:this.Jo(s);break;case 2:this.Yo(s);break;case 3:this.Vo(s);break;default:throw new RangeError("invalid color index")}}Pa(t){switch(t){case 0:return this.qo();case 1:return this.Zo();case 2:return this.Xo();case 3:return this.Ko();default:throw new RangeError("invalid color index")}}static ka(t,s){let i,e;if(Array.isArray(t))(i=new l.Ro).La(t);else{if(!(t instanceof l.Ro))throw new Error("unexpected type");i=t}if(Array.isArray(s))(e=new l.Ro).La(s);else{if(!(s instanceof l.Ro))throw new Error("unexpected type");e=s}return i.equals(e)}static Fa(t,s){return l.lr(Math.max(t,s)-Math.min(t,s),0,1)}static ja(t,s){const i=new l.Ro;return i.Qo(Math.max(t.Po,s.Po)-Math.min(t.Po,s.Po)),i.Jo(Math.max(t.ko,s.ko)-Math.min(t.ko,s.ko)),i.Yo(Math.max(t.Fo,s.Fo)-Math.min(t.Fo,s.Fo)),i.Vo(Math.max(t.jo,s.jo)-Math.min(t.jo,s.jo)),i}static za(t,s){const i=new l.Ro(0,0,0,1);return i.Qo(Math.max(t.Po,s.Po)-Math.min(t.Po,s.Po)),i.Jo(Math.max(t.ko,s.ko)-Math.min(t.ko,s.ko)),i.Yo(Math.max(t.Fo,s.Fo)-Math.min(t.Fo,s.Fo)),i}static Ea(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;let r=0;switch(e){case t:r=(s-i)/(e-h)+(s<i?6:0);break;case s:r=(i-t)/(e-h)+2;break;case i:r=(t-s)/(e-h)+4}return Math.round(r/6*360)}static _a(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;const r=(e+h)/2,n=e-h,o=.5<r?n/(2-e-h):n/(e+h);return Math.round(100*o)}static Da(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i),r=(e+h)/2;return e?Math.round(100*r):0}},l.Ro.Ba=Object.freeze(l.ir(l.Ro,1,1,1,1)),l.Ro.Ua=Object.freeze(l.ir(l.Ro,0,0,0,1)),l.Ro.Wa=Object.freeze(l.ir(l.Ro,0,0,0,0))}{const Et=self.Os;Et.Qa=class{constructor(t,s){this.Ja=0,this.Ya=0,t instanceof Et.Qa?this.C(t):this.set(t||0,s||0)}set(t,s){this.Ja=+t,this.Ya=+s}C(t){this.Ja=t.Ja,this.Ya=t.Ya}equals(t){return this.Ja===t.Ja&&this.Ya===t.Ya}Va(t,s){return this.Ja===t&&this.Ya===s}aa(t,s){return t[s]===Math.fround(this.Ja)&&t[s+1]===Math.fround(this.Ya)}Ha(t){this.Ja=+t}qa(){return this.Ja}Za(t){this.Ya=+t}Xa(){return this.Ya}toArray(){return[this.Ja,this.Ya]}$o(){return new Float64Array(this.toArray())}ta(t,s){t[s++]=this.Ja,t[s]=this.Ya}offset(t,s){this.Ja+=+t,this.Ya+=+s}scale(t,s){this.Ja*=t,this.Ya*=s}Ct(t,s){this.Ja/=t,this.Ya/=s}round(){this.Ja=Math.round(this.Ja),this.Ya=Math.round(this.Ya)}floor(){this.Ja=Math.floor(this.Ja),this.Ya=Math.floor(this.Ya)}ceil(){this.Ja=Math.ceil(this.Ja),this.Ya=Math.ceil(this.Ya)}angle(){return Et.yr(0,0,this.Ja,this.Ya)}Ka(){return this.Ja*this.Ja+this.Ya*this.Ya}length(){return Math.hypot(this.Ja,this.Ya)}$a(t,s){const i=this.Ja*s-this.Ya*t;this.Ya=this.Ya*s+this.Ja*t,this.Ja=i}rotate(t){0!==t&&this.$a(Math.sin(t),Math.cos(t))}tu(t,s,i){0===t||s===this.Ja&&i===this.Ya||(this.Ja-=s,this.Ya-=i,this.$a(Math.sin(t),Math.cos(t)),this.Ja+=+s,this.Ya+=+i)}move(t,s){0!==s&&(this.Ja+=Math.cos(t)*s,this.Ya+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Ja/=t,this.Ya/=t)}lr(t,s){this.Ja=Et.lr(this.Ja,t,s),this.Ya=Et.lr(this.Ya,t,s)}Dt(t){return this.Ja*t.Ja+this.Ya*t.Ya}reverse(){this.Ja=-this.Ja,this.Ya=-this.Ya}su(){let t=this.Ja;return this.Ja=this.Ya,this.Ya=-t,this}}}{const _t=self.Os;_t.Rect=class{constructor(t,s,i,e){this.iu=NaN,this.eu=NaN,this.hu=NaN,this.ru=NaN,this.iu=0,this.eu=0,this.hu=0,this.ru=0,t instanceof _t.Rect?this.C(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.iu=+t,this.eu=+s,this.hu=+i,this.ru=+e}nu(t,s,i,e){s=+s,this.iu=t=+t,this.eu=s,this.hu=t+ +i,this.ru=s+ +e}C(t){this.iu=+t.iu,this.eu=+t.eu,this.hu=+t.hu,this.ru=+t.ru}clone(){return new _t.Rect(this.iu,this.eu,this.hu,this.ru)}static ou(t,s){const i=new _t.Rect;return i.au(Math.min(t.iu,s.iu)),i.uu(Math.min(t.eu,s.eu)),i.lu(Math.max(t.hu,s.hu)),i.cu(Math.max(t.ru,s.ru)),i}static fu(t){return new _t.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.iu===t.iu&&this.eu===t.eu&&this.hu===t.hu&&this.ru===t.ru}du(t,s,i,e){return this.iu===t&&this.eu===s&&this.width()===i&&this.height()===e}aa(t,s){return t[s]===Math.fround(this.iu)&&t[s+1]===Math.fround(this.eu)&&t[s+2]===Math.fround(this.hu)&&t[s+3]===Math.fround(this.ru)}au(t){this.iu=+t}pu(){return this.iu}uu(t){this.eu=+t}mu(){return this.eu}lu(t){this.hu=+t}gu(){return this.hu}cu(t){this.ru=+t}yu(){return this.ru}toArray(){return[this.iu,this.eu,this.hu,this.ru]}$o(){return new Float64Array(this.toArray())}Mu(){return new DOMRect(this.iu,this.eu,this.width(),this.height())}static wu(t){return _t.ir(_t.Rect,t.left,t.top,t.right,t.bottom)}ta(t,s){t[s++]=this.iu,t[s++]=this.eu,t[s++]=this.hu,t[s]=this.ru}Su(t,s){t[s++]=this.iu,t[s++]=this.eu,t[s++]=this.hu,t[s++]=this.eu,t[s++]=this.hu,t[s++]=this.ru,t[s++]=this.iu,t[s]=this.ru}Tu(t,s,i){t[s++]=this.iu,t[s++]=this.eu,t[s++]=i,t[s++]=this.hu,t[s++]=this.eu,t[s++]=i,t[s++]=this.hu,t[s++]=this.ru,t[s++]=i,t[s++]=this.iu,t[s++]=this.ru,t[s]=i}width(){return this.hu-this.iu}height(){return this.ru-this.eu}bu(){return(this.iu+this.hu)/2}xu(){return(this.eu+this.ru)/2}offset(t,s){s=+s,this.iu+=t=+t,this.eu+=s,this.hu+=t,this.ru+=s}offsetLeft(t){this.iu+=+t}offsetTop(t){this.eu+=+t}vu(t){this.hu+=+t}Cu(t){this.ru+=+t}Gu(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.eu<this.ru?this.iu<this.hu?this.ru=this.eu+this.width():this.ru=this.eu-this.width():this.iu<this.hu?this.ru=this.eu-this.width():this.ru=this.eu+this.width()}Iu(t,s){s=+s,this.iu-=t=+t,this.eu-=s,this.hu+=t,this.ru+=s}Nu(t,s){s=+s,this.iu+=t=+t,this.eu+=s,this.hu-=t,this.ru-=s}multiply(t,s){this.iu*=t,this.eu*=s,this.hu*=t,this.ru*=s}Ct(t,s){this.iu/=t,this.eu/=s,this.hu/=t,this.ru/=s}Eu(t){this.iu=+t-this.iu,this.hu=+t-this.hu}_u(t){this.eu=+t-this.eu,this.ru=+t-this.ru}Du(t,s){const i=this.width(),e=this.height(),h=this.pu()+i*t,r=this.mu()+e*s;this.nu(h-e*s,r-i*t,e,i)}Au(){const t=this.iu;this.iu=this.hu,this.hu=t}Lu(){const t=this.eu;this.eu=this.ru,this.ru=t}Ou(t){const s=this.eu;this.eu=+t-this.ru,this.ru=+t-s}round(){this.iu=Math.round(this.iu),this.eu=Math.round(this.eu),this.hu=Math.round(this.hu),this.ru=Math.round(this.ru)}Ru(){this.iu=Math.ceil(this.iu),this.eu=Math.ceil(this.eu),this.hu=Math.floor(this.hu),this.ru=Math.floor(this.ru)}Pu(){this.iu=Math.floor(this.iu),this.eu=Math.floor(this.eu),this.hu=Math.ceil(this.hu),this.ru=Math.ceil(this.ru)}floor(){this.iu=Math.floor(this.iu),this.eu=Math.floor(this.eu),this.hu=Math.floor(this.hu),this.ru=Math.floor(this.ru)}ceil(){this.iu=Math.ceil(this.iu),this.eu=Math.ceil(this.eu),this.hu=Math.ceil(this.hu),this.ru=Math.ceil(this.ru)}lr(t,s,i,e){this.iu=Math.max(this.iu,+t),this.eu=Math.max(this.eu,+s),this.hu=Math.min(this.hu,+i),this.ru=Math.min(this.ru,+e)}ku(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.iu=_t.lr(this.iu,t,i),this.eu=_t.lr(this.eu,s,e),this.hu=_t.lr(this.hu,t,i),this.ru=_t.lr(this.ru,s,e)}normalize(){this.iu>this.hu&&this.Au(),this.eu>this.ru&&this.Lu()}Fu(t){return!(t.hu<this.iu||t.ru<this.eu||t.iu>this.hu||t.eu>this.ru)}ju(t,s,i){return!(t.hu+s<this.iu||t.ru+i<this.eu||t.iu+s>this.hu||t.eu+i>this.ru)}zu(t,s){return t>=this.iu&&t<=this.hu&&s>=this.eu&&s<=this.ru}Bu(t){return t.iu>=this.iu&&t.eu>=this.eu&&t.hu<=this.hu&&t.ru<=this.ru}Uu(t){t.iu<this.iu&&(this.iu=+t.iu),t.eu<this.eu&&(this.eu=+t.eu),t.hu>this.hu&&(this.hu=+t.hu),t.ru>this.ru&&(this.ru=+t.ru)}Wu(t){this.iu=_t.Lt(t.iu,t.hu,this.iu),this.eu=_t.Lt(t.eu,t.ru,this.eu),this.hu=_t.Lt(t.iu,t.hu,this.hu),this.ru=_t.Lt(t.eu,t.ru,this.ru)}}}{const Dt=self.Os;Dt.Qu=class{constructor(t,s,i,e,h,r,n,o){this.Ju=NaN,this.Yu=NaN,this.Vu=NaN,this.Hu=NaN,this.qu=NaN,this.Zu=NaN,this.Xu=NaN,this.Ku=NaN,this.Ju=0,this.Yu=0,this.Vu=0,this.Hu=0,this.qu=0,this.Zu=0,this.Xu=0,this.Ku=0,t instanceof Dt.Qu?this.C(t):this.set(t||0,s||0,i||0,e||0,h||0,r||0,n||0,o||0)}set(t,s,i,e,h,r,n,o){this.Ju=+t,this.Yu=+s,this.Vu=+i,this.Hu=+e,this.qu=+h,this.Zu=+r,this.Xu=+n,this.Ku=+o}$u(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}C(t){this.Ju=t.Ju,this.Yu=t.Yu,this.Vu=t.Vu,this.Hu=t.Hu,this.qu=t.qu,this.Zu=t.Zu,this.Xu=t.Xu,this.Ku=t.Ku}equals(t){return this.Ju===t.Ju&&this.Yu===t.Yu&&this.Vu===t.Vu&&this.Hu===t.Hu&&this.qu===t.qu&&this.Zu===t.Zu&&this.Xu===t.Xu&&this.Ku===t.Ku}tl(t){this.Ju=+t}qr(){return this.Ju}sl(t){this.Yu=+t}Zr(){return this.Yu}il(t){this.Vu=+t}Xr(){return this.Vu}el(t){this.Hu=+t}Kr(){return this.Hu}hl(t){this.qu=+t}$r(){return this.qu}rl(t){this.Zu=+t}tn(){return this.Zu}nl(t){this.Xu=+t}sn(){return this.Xu}ol(t){this.Ku=+t}hn(){return this.Ku}al(){return new DOMQuad(new DOMPoint(this.Ju,this.Yu),new DOMPoint(this.Vu,this.Hu),new DOMPoint(this.qu,this.Zu),new DOMPoint(this.Xu,this.Ku))}static ul(t){return Dt.ir(Dt.Qu,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Ju,this.Yu,this.Vu,this.Hu,this.qu,this.Zu,this.Xu,this.Ku]}$o(){return new Float64Array(this.toArray())}ta(t,s){t[s++]=this.Ju,t[s++]=this.Yu,t[s++]=this.Vu,t[s++]=this.Hu,t[s++]=this.qu,t[s++]=this.Zu,t[s++]=this.Xu,t[s]=this.Ku}ll(t,s,i){t[s++]=this.Ju,t[s++]=this.Yu,t[s++]=i,t[s++]=this.Vu,t[s++]=this.Hu,t[s++]=i,t[s++]=this.qu,t[s++]=this.Zu,t[s++]=i,t[s++]=this.Xu,t[s++]=this.Ku,t[s]=i}offset(t,s){s=+s,this.Ju+=t=+t,this.Yu+=s,this.Vu+=t,this.Hu+=s,this.qu+=t,this.Zu+=s,this.Xu+=t,this.Ku+=s}round(){this.Ju=Math.round(this.Ju),this.Yu=Math.round(this.Yu),this.Vu=Math.round(this.Vu),this.Hu=Math.round(this.Hu),this.qu=Math.round(this.qu),this.Zu=Math.round(this.Zu),this.Xu=Math.round(this.Xu),this.Ku=Math.round(this.Ku)}floor(){this.Ju=Math.floor(this.Ju),this.Yu=Math.floor(this.Yu),this.Vu=Math.floor(this.Vu),this.Hu=Math.floor(this.Hu),this.qu=Math.floor(this.qu),this.Zu=Math.floor(this.Zu),this.Xu=Math.floor(this.Xu),this.Ku=Math.floor(this.Ku)}ceil(){this.Ju=Math.ceil(this.Ju),this.Yu=Math.ceil(this.Yu),this.Vu=Math.ceil(this.Vu),this.Hu=Math.ceil(this.Hu),this.qu=Math.ceil(this.qu),this.Zu=Math.ceil(this.Zu),this.Xu=Math.ceil(this.Xu),this.Ku=Math.ceil(this.Ku)}cl(t){this.Ju=t.iu,this.Yu=t.eu,this.Vu=t.hu,this.Hu=t.eu,this.qu=t.hu,this.Zu=t.ru,this.Xu=t.iu,this.Ku=t.ru}fl(t,s){0===s?this.cl(t):this.dl(t,Math.sin(s),Math.cos(s))}dl(t,s,i){const e=t.iu*s,h=t.eu*s,r=t.hu*s,n=t.ru*s,o=t.iu*i,a=t.eu*i,u=t.hu*i,l=t.ru*i;this.Ju=o-h,this.Yu=a+e,this.Vu=u-h,this.Hu=a+r,this.qu=u-n,this.Zu=l+r,this.Xu=o-n,this.Ku=l+e}pl(t){t.set(Math.min(this.Ju,this.Vu,this.qu,this.Xu),Math.min(this.Yu,this.Hu,this.Zu,this.Ku),Math.max(this.Ju,this.Vu,this.qu,this.Xu),Math.max(this.Yu,this.Hu,this.Zu,this.Ku))}zu(t,s){let i=this.Vu-this.Ju,e=this.Hu-this.Yu,h=this.qu-this.Ju,r=this.Zu-this.Yu,n=t-this.Ju,o=s-this.Yu,a=i*i+e*e,u=i*h+e*r,l=i*n+e*o,c=h*h+r*r,f=h*n+r*o,d=1/(a*c-u*u),p=(c*l-u*f)*d,m=(a*f-u*l)*d;return 0<=p&&0<m&&p+m<1||(m=((a=(i=this.Xu-this.Ju)*i+(e=this.Ku-this.Yu)*e)*f-(u=i*h+e*r)*(l=i*n+e*o))*(d=1/(a*c-u*u)),0<=(p=(c*l-u*f)*d)&&0<m&&p+m<1)}bu(){return(this.Ju+this.Vu+this.qu+this.Xu)/4}xu(){return(this.Yu+this.Hu+this.Zu+this.Ku)/4}ml(t,s,i,e){return!(!this.zu(t,s)&&!this.zu(i,e))||Dt.Hr(t,s,i,e,this)}gl(t){let s=t.bu(),i=t.xu();if(this.zu(s,i))return!0;if(s=this.bu(),i=this.xu(),t.zu(s,i))return!0;const e=this.Ju,h=this.Yu,r=this.Vu,n=this.Hu,o=this.qu,a=this.Zu,u=this.Xu,l=this.Ku;return Dt.Hr(e,h,r,n,t)||Dt.Hr(r,n,o,a,t)||Dt.Hr(o,a,u,l,t)||Dt.Hr(u,l,e,h,t)}yl(){const t=this.Ju,s=this.Yu;this.Ju=this.Vu,this.Yu=this.Hu,this.Vu=this.qu,this.Hu=this.Zu,this.qu=this.Xu,this.Zu=this.Ku,this.Xu=t,this.Ku=s}Ml(){this.wl(0,2),this.wl(1,3),this.wl(6,4),this.wl(7,5)}Sl(){this.wl(0,6),this.wl(1,7),this.wl(2,4),this.wl(3,5)}Tl(){this.wl(2,6),this.wl(3,7)}wl(t,s){const i=this.bl(t);this.xl(t,this.bl(s)),this.xl(s,i)}bl(t){switch(t){case 0:return this.Ju;case 1:return this.Yu;case 2:return this.Vu;case 3:return this.Hu;case 4:return this.qu;case 5:return this.Zu;case 6:return this.Xu;case 7:return this.Ku;default:throw new RangeError("invalid quad point index")}}xl(t,s){switch(s=+s,t){case 0:this.Ju=s;break;case 1:this.Yu=s;break;case 2:this.Vu=s;break;case 3:this.Hu=s;break;case 4:this.qu=s;break;case 5:this.Zu=s;break;case 6:this.Xu=s;break;case 7:this.Ku=s;break;default:throw new RangeError("invalid quad point index")}}}}{const At=self.Os,Lt=[0,0,1,0,1,1,0,1],Ot=At.ir(At.Qu);At.vl=class extends At.Kh{constructor(t,s=!0){super(),t=t||Lt,this.Cl=Float64Array.from(t),this.Gl=new At.Rect,this.Il=!0,this.Nl=s}er(){}El(){return this.Cl}_l(){return this.Cl.length/2}Dl(t){this.Cl.length===t.length?this.Cl.set(t):this.Cl=Float64Array.from(t),this.Il=!0}Al(){this.Dl(Lt)}C(t){this.Dl(t.Cl)}Ll(){this.Il=!0}Ol(){if(this.Il){let i=this.Cl,e=i[0],h=i[1],r=e,n=h;for(let t=0,s=i.length;t<s;t+=2){const o=i[t],a=i[t+1];o<e&&(e=o),o>r&&(r=o),a<h&&(h=a),a>n&&(n=a)}this.Gl.set(e,h,r,n),this.Il=!1}}cl(t,s,i){let e=this.Cl;8!==e.length&&(e=new Float64Array(8),this.Cl=e),e[0]=t.pu()-s,e[1]=t.mu()-i,e[2]=t.gu()-s,e[3]=t.mu()-i,e[4]=t.gu()-s,e[5]=t.yu()-i,e[6]=t.pu()-s,e[7]=t.yu()-i,this.Gl.C(t),0===s&&0===i||this.Gl.offset(-s,-i),this.Il=!1}Rl(t,s,i){Ot.C(t),Ot.offset(s,i),this.Dl(Ot.toArray()),this.Il=!0}transform(t,s,i){let e=0,h=1;0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.Pl(t,s,e,h)}Pl(i,e,h,r){const n=this.Cl;for(let t=0,s=n.length;t<s;t+=2){const o=t+1,a=n[t]*i,u=n[o]*e;n[t]=a*r-u*h,n[o]=u*r+a*h}this.Il=!0}offset(i,e){const h=this.Cl;for(let t=0,s=h.length;t<s;t+=2)h[t]+=i,h[t+1]+=e}zu(i,e){const h=this.Cl;if(i===h[0]&&e===h[1])return!0;this.Ol();let t=this.Gl,r=t.pu()-110,n=t.mu()-101,o=t.gu()+131,a=t.yu()+120,u=0,l=0,c,f,d=0,p=0,m,g,y=(c=r<i?(u=r,i):(u=i,r),f=n<e?(l=n,e):(l=e,n),m=o<i?(d=o,i):(d=i,o),g=a<e?(p=a,e):(p=e,a),0),M=0;for(let t=0,s=h.length;t<s;t+=2){const w=(t+2)%s,S=h[t],T=h[t+1],b=h[w],x=h[1+w];At.Vr(r,n,i,e,u,c,l,f,S,T,b,x)&&++y,At.Vr(o,a,i,e,d,m,p,g,S,T,b,x)&&++M}return y%2==1||M%2==1}kl(t,c,f){const d=t.Cl,p=this.Cl;if(this.zu(d[0]+c,d[1]+f))return!0;if(t.zu(p[0]-c,p[1]-f))return!0;for(let s=0,l=p.length;s<l;s+=2){let t=(s+2)%l,i=p[s],e=p[s+1],h=p[t],r=p[1+t],n=0,o=0,a,u;a=i<h?(n=i,h):(n=h,i),u=e<r?(o=e,r):(o=r,e);for(let t=0,s=d.length;t<s;t+=2){const m=(t+2)%s,g=d[t]+c,y=d[t+1]+f,M=d[m]+c,w=d[1+m]+f;if(At.Vr(i,e,h,r,n,a,o,u,g,y,M,w))return!0}}return!1}ml(i,e,h,r,n,o){if(this.zu(h-i,r-e))return!0;if(this.zu(n-i,o-e))return!0;let a=0,u=0,l,c;l=h<n?(a=h,n):(a=n,h),c=r<o?(u=r,o):(u=o,r);const f=this.Cl;for(let t=0,s=f.length;t<s;t+=2){const d=(t+2)%s,p=f[t]+i,m=f[t+1]+e,g=f[d]+i,y=f[1+d]+e;if(At.Vr(h,r,n,o,a,l,u,c,p,m,g,y))return!0}return!1}Ml(i){const e=this.Cl;for(let t=0,s=e.length;t<s;t+=2)e[t]=2*i-e[t];this.Il=!0}Sl(i){const e=this.Cl;for(let t=0,s=e.length;t<s;t+=2){const h=t+1;e[h]=2*i-e[h]}this.Il=!0}Tl(){const i=this.Cl;for(let t=0,s=i.length;t<s;t+=2){const e=t+1,h=i[t];i[t]=i[e],i[e]=h}this.Il=!0}Fl(){let i=this.Cl,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t];return e/this._l()}jl(){let i=this.Cl,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t+1];return e/this._l()}zl(){return this.Cl}Bl(){return this._l()}Ul(){return this.Nl}}}{const Rt=self.Os;Rt.Wl=class extends Rt.Kh{constructor(t){if(super(),this.Ql=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}er(){this.Jl(),this.Ql=null}Yl(){return 0===this.Ql.size}Jl(){const t=this.Ql;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){let e=this.Ql,h=e.get(t);h||(h=new Map,e.set(t,h)),h.set(s,i)}Ks(t,s){const i=this.Ql.get(t);return i&&i.get(s)}Xs(t,s){const i=this.Ql.get(t);return!!i&&i.has(s)}Vl(t,s){const i=this.Ql,e=i.get(t);if(!e)return!1;const h=e.delete(s);return h&&0===e.size&&i.delete(t),h}Hl(t){const s=this.Ql,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[e,h]of s.entries())h.delete(t)&&0===h.size&&s.delete(e)}ql(){let t=0;for(const s of this.Ql.values())t+=s.size;return t}*values(){for(const t of this.Ql.values())yield*t.values()}*Zl(){for(const[t,s]of this.Ql.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.Ql.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const Pt=self.Os;Pt.Xl=class extends Pt.Kh{constructor(){super(),this.Kl=new Set,this.$l=[],this.tc=!1}er(){this.Jl()}Jl(){this.Kl.clear(),Pt.Dn(this.$l),this.tc=!1}sc(t){this.Kl.has(t)||(this.Kl.add(t),this.tc)||this.$l.push(t)}Xs(t){return this.Kl.has(t)}Vl(t){this.Kl.delete(t)&&(this.tc=!0)}ql(){return this.Kl.size}Yl(){return 0===this.Kl.size}ic(){return this.tc&&(this.ec(),this.tc=!1),this.$l}ec(){const t=this.$l;Pt.Dn(t);for(const s of this.Kl)t.push(s)}}}{const kt=self.Os,Ft=new Map,jt=new Map,zt=new Map,Bt=new Map,Ut=new Map,Wt=new Map,Qt=new Map,Jt=new Map,Yt=new Map,Vt=(Yt.set("linear","noease"),Yt.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),Ht=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],qt=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),Zt=(self.hc=class hs{constructor(){}static rc(){return"default"}static nc(){return"noease"}static oc(t){return qt.get(t)}static ac(s,...i){this.uc();let t,e=(s?(zt.has(s)||zt.set(s,new Map),[...(t=zt.get(s)).keys()].filter(t=>!hs.lc(t,s)||hs.lc(t,s).transition.IsForAnyPurpose())):[...(t=Ut).keys()]).sort();return[...jt.keys()].concat(e).filter(t=>!i.includes(t))}static cc(){this.uc();const t=[...Ut.keys()];return t.sort(),[...jt.keys()].concat(t)}static fc(){this.uc();const t=[...Ut.keys()];return t.sort(),t}static dc(t){for(const s of Vt){const i=self.lang("ui.bars.timeline.eases."+s);if(i===t)return!0}for(const e of Ht){const h=self.lang("ui.bars.timeline.short-eases."+e);if(h===t)return!0}}static mc(t){return this.uc(),[...jt.keys()].includes(t)}static yc(t){const s=Yt.get(t);return s?Ft.get(s):hs.mc(t)?Ft.get(t):Qt.has(t)?Qt.get(t):void 0}static Mc(t){return this.uc(),Jt.get(t)}static wc(t,s){this.uc();const i=hs.yc(t);if(i)return i;if(s)return zt.get(s).get(t);throw new Error("missing ease function")}static lc(t,s){this.uc();const i=Bt.get(s);if(i)return i.get(t)}static Sc(t,s){this.uc();const i=hs.yc(t);return!!i||!!zt.get(s).get(t)}static Tc(t){this.uc();const s=hs.yc(t);return s||Ut.get(t)}static xc(t){return this.uc(),Wt.get(t)}static vc(t){this.uc();const s=this.cc();return s[t]}static Cc(t,s){this.uc();const i=this.ac(s);return i.indexOf(t)}static Gc(t){return this.Cc(t)}static uc(){0===Ft.size&&(this.Ic("default",()=>{}),this.Ic("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.Ic("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.Ic("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.Ic("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.Ic("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.Ic("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.Ic("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.Ic("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.Ic("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.Ic("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.Ic("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.Ic("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.Ic("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.Ic("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.Ic("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.Ic("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.Ic("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.Ic("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.Ic("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Ic("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.Ic("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.Ic("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.Ic("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.Ic("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.Ic("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Ic("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.Ic("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Ic("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.Ic("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.Ic("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.Ic("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Nc("cubicbezier",this.Ec),this.Nc("spline",this._c))}static Ic(t,s,i=!1){if("function"==typeof s)hs.Dc(t,s,"predefined");else{if(!kt.Re(s))throw new Error("unexpected arguments");if(self.BuiltInTransition){const h=kt.ir(self.BuiltInTransition,t,i);h.SetFromJson(s),hs.Dc(t,(t,s,i,e)=>h.Ac(t,s,i,e),"predefined"),Jt.set(t,h)}else{const r=kt.ir(kt.Lc,[t,s.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);r.Oc(i),hs.Dc(t,(t,s,i,e)=>r.Ac(t,s,i,e),"predefined")}}}static Nc(t,s){hs.Dc(t,s,"private")}static Rc(t,s,i,e){this.uc(),hs.Dc(t,s,"custom",i,e)}static Pc(t,s){if(!this.mc(t)&&![...Qt.keys()].includes(t)){const i=zt.get(s),e=(i&&i.delete(t),Bt.get(s));e&&e.delete(t)}}static Dc(t,s,i,e,h){switch(i){case"predefined":Ft.set(t,s),jt.set(t,s);break;case"custom":if(e){zt.has(e)||zt.set(e,new Map),Bt.has(e)||Bt.set(e,new Map);const r=zt.get(e),n=(r.set(t,s),Bt.get(e));n.set(t,h)}else Ut.set(t,s),Wt.set(t,h);break;case"private":Ft.set(t,s),Qt.set(t,s);break;default:throw new Error("unexpected ease mode")}}static kc(t,s,i,e){return 0===e?s:i*t/e+s}static Ec(t,s,i,e,h){const r=s,n=3*t*(i-s),o=3*t**2*(s+e-2*i),a=t**3*(h-s+3*i-3*e);return r+n+o+a}static _c(t,s,i,e,h,r,n,o,a,u){if(e===h&&r===n)return t;const l=es(t,s,e,r,o,u),c=Kt(i,h,n,a),f=$t(i,h,n,a),d=ts(i,h,n,a);return ss(l,c,f,d)}static Fc(t,s,i,e){const h=[],r=Kt(t,s,i,e),n=$t(t,s,i,e),o=ts(t,s,i,e);for(let t=0;t<Zt;++t){const a=ss(t*Xt,r,n,o);h.push(a)}return h}},11),Xt=1/(Zt-1),Kt=(t,s,i,e)=>e-3*i+3*s-t,$t=(t,s,i,e)=>3*i-6*s+3*t,ts=(t,s,i,e)=>3*(s-t),ss=(t,s,i,e)=>((s*t+i)*t+e)*t,is=(t,s,i,e)=>3*s*t*t+2*i*t+e,es=(n,t,s,i,e,h)=>{if(1==n)return 1;let o=0,r=1,a=h[r],u=Zt-1;for(Zt;r!=u&&a<=n;)r++,a=h[r],o+=Xt;r--;let l=(n-(a=h[r]))/(h[r+1]-a),c=o+l*Xt,f=Kt(t,s,i,e),d=$t(t,s,i,e),p=ts(t,s,i,e),m=is(c,f,d,p);if(0===m)return c;if(.01<=m){for(let t=0;t<4;++t){const g=ss(c,f,d,p)-n,y=is(c,f,d,p);c-=g/y}return c}{let s=o,i=o+Xt,e=0,h,r;do{c=s+(i-s)/2;let t=ss(c,f,d,p)-n;0<t?i=c:s=c,h=1e-7<Math.abs(t),r=++e<10}while(h&&r);return c}}}{let o=function(t){rs.we(t)};o;const rs=self.Os;rs.jc=class{constructor(t){this.zc=[],this.nr=t||"",this.Bc=0}er(){this.Jl(),this.zc=null}Uc(){return this.nr}Jl(){rs.An(this.zc),this.Bc=0}Wc(){return this.Bc}Qc(t=Math.random()*this.Wc()){let s=0;for(const[i,e]of this.zc)if(t<(s+=i))return e;return 0}Jc(t,s){o(s),this.Bc+=t,this.zc.push([t,s])}Yc(s,i){o(i);const e=0===s;for(let t=0;t<this.zc.length;t++){const h=this.zc[t],r=e||h[0]===s,n=h[1]===i;if(r&&n){this.zc.splice(t,1),this.Bc-=h[0];break}}}Vc(){return JSON.stringify(this.zc)}static Hc(t,s){const i=new rs.jc(s),e=JSON.parse(t);for(const h of e){const r=h[0],n=h[1];i.Jc(r,n)}return i}}}{let t=self.Os,i=0;t.qc=class{constructor(t,s){this.Zc=t,this.Xc=s,this.Kc=i++,this.Zc.$c("runtime","screen-reader-text",{type:"create",id:this.Kc,text:this.Xc})}er(){this.Zc.$c("runtime","screen-reader-text",{type:"release",id:this.Kc}),this.Zc=null,this.Xc="",this.Kc=-1}tf(t){this.Xc!==t&&(this.Xc=t,this.Zc.$c("runtime","screen-reader-text",{type:"update",id:this.Kc,text:this.Xc}))}}}{const ns=self.Os;ns.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.if=!1,this.ef=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.ef)throw new Error(`cannot stop async event '${this.type}' propagation`);this.if=!0}}}{const os=self.Os;os.Event.hf=class extends os.Kh{constructor(t){super(),this.rf=t,this.nf=[],this.uf=new Set,this.lf=[],this.cf=new Set,this.ff=0,this.df=[]}er(){0<this.ff||(os.Dn(this.nf),this.uf.clear(),os.Dn(this.lf),this.cf.clear(),os.Dn(this.df),os.er(this))}pf(t,s){this.mf()?this.df.push({gf:"add",yf:t,capture:s}):s?this.uf.has(t)||(this.nf.push(t),this.uf.add(t)):this.cf.has(t)||(this.lf.push(t),this.cf.add(t))}Mf(t,s){this.mf()?this.df.push({gf:"remove",yf:t,capture:s}):s?this.uf.has(t)&&(this.uf.delete(t),os.kn(this.nf,t)):this.cf.has(t)&&(this.cf.delete(t),os.kn(this.lf,t))}wf(){return!this.nf.length&&!this.lf.length}mf(){return 0<this.ff}Sf(){const t=new Set,s=new Set;for(const i of this.df)if("add"===i.gf)this.pf(i.yf,i.capture),(i.capture?s:t).delete(i.yf);else{if("remove"!==i.gf)throw new Error("invalid op");(i.capture?(this.uf.delete(i.yf),s):(this.cf.delete(i.yf),t)).add(i.yf)}os.zn(this.lf,t),os.zn(this.nf,s),os.Dn(this.df)}Tf(i){this.bf();let e=!1;for(let t=0,s=this.nf.length;t<s;++t)if(this.nf[t](i),i.if){e=!0;break}if(!e)for(let t=0,s=this.lf.length;t<s&&(this.lf[t](i),!i.if);++t);return this.xf(),!i.defaultPrevented}vf(i){this.bf();for(let t=0,s=this.nf.length;t<s;++t)this.nf[t](i);for(let t=0,s=this.lf.length;t<s;++t)this.lf[t](i);return this.xf(),!0}bf(){this.ff++}xf(){this.ff--,0===this.ff&&0<this.df.length&&this.Sf()}Cf(t){t?this.bf():this.xf()}Gf(i){let e=[];for(let s=0,t=this.nf.length;s<t;++s){let t=this.nf[s];e.push(os.If(()=>t(i)))}for(let s=0,t=this.lf.length;s<t;++s){let t=this.lf[s];e.push(os.If(()=>t(i)))}return Promise.all(e).then(()=>!i.defaultPrevented)}Nf(i){const e=[];this.bf();for(let t=0,s=this.nf.length;t<s;++t){const h=this.nf[t](i);h instanceof Promise&&e.push(h)}for(let t=0,s=this.lf.length;t<s;++t){const r=this.lf[t](i);r instanceof Promise&&e.push(r)}return this.xf(),e.length?Promise.all(e).then(()=>!i.defaultPrevented):!i.defaultPrevented}async Ef(t){return this.Nf(t)}async _f(i){this.bf();for(let t=0,s=this.nf.length;t<s;++t){const e=this.nf[t](i);e instanceof Promise&&await e}for(let t=0,s=this.lf.length;t<s;++t){const h=this.lf[t](i);h instanceof Promise&&await h}return this.xf(),!i.defaultPrevented}*Df(i){this.bf();for(let t=0,s=this.nf.length;t<s;++t){const e=this.nf[t](i);os.Lo(e)&&(yield*e)}for(let t=0,s=this.lf.length;t<s;++t){const h=this.lf[t](i);os.Lo(h)&&(yield*h)}this.xf()}}}{const as=self.Os;as.Event.Af=class extends as.Kh{constructor(){super(),this.Lf=new Map,this.Of=!1}er(){if(this.Of)throw new Error("already released");this.Rf(),this.Of=!0,as.er(this)}hr(){return this.Of}Rf(){if(this.Lf){for(let t of this.Lf.values())t.er();this.Lf.clear()}}Pf(t,s){let i=this.Lf.get(t);return i||(s?(i=as.ir(as.Event.hf,t),this.Lf.set(t,i),i):null)}kf(t){return this.Lf.has(t)}addEventListener(t,s,i){let e=this.Pf(t,!0);e.pf(s,!!i)}removeEventListener(t,s,i){let e=this.Pf(t,!1);e&&(e.Mf(s,!!i),e.wf())&&this.Lf.delete(t)}dispatchEvent(t){const s=this.Pf(t.type,!1);return!s||(t.cancelable?s.Tf(t):s.vf(t))}Ff(t){const s=this.Pf(t.type,!1);return s?(t.ef=!0,s.Gf(t)):Promise.resolve(!0)}async jf(t){const s=this.Pf(t.type,!1);if(!s)return!0;this.Lf.delete(t.type),t.ef=!0;const i=await s.Gf(t);return s.er(),i}async zf(t){const s=this.Pf(t.type,!1);return!s||s.Ef(t)}Bf(t){const s=this.Pf(t.type,!1);return!s||s.Nf(t)}async Uf(t){const s=this.Pf(t.type,!1);return!s||s._f(t)}Wf(t){const s=this.Pf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.Df(t)}Cf(t){for(const s of this.Lf.values())s.Cf(t)}}}{let r=function(t){c=u&&0===f?requestIdleCallback(s,{timeout:i}):setTimeout(s,0<f?1:t)},s=function(h){if(c=-1,l.length){let i=performance.now(),e=i,t=0,s;for(;n(l.shift()),e=performance.now(),++t,s=(e-i)/t*1.1,l.length&&(u&&0===f&&void 0!==h?s<h.timeRemaining():e-i+s<o););if(-1===c&&l.length){let t=e-i,s=Math.max(a-t,4);r(s)}}},n=function(s){let t;try{t=s.yf()}catch(t){return void s.reject(t)}s.resolve(t)},t=(r,s,n,self.Os),o=12,a=16,i=35,u="undefined"!=typeof requestIdleCallback,l=[],c=-1,f=0,h=t.si.Xs("disable-asyncify");h&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),t.If=function(i){let e=null;return t.isDebug&&(e=t.oe()),new Promise((t,s)=>{l.push({yf:i,resolve:t,reject:s,stack:e}),h?n(l.pop()):-1===c&&r(a)})},t.If.Qf=function(t){if(t)++f;else if(--f<0)throw new Error("already turned off high throughput mode")}}{let t=function(){r=-1},s=function(){n=-1,o=-1;let i=Date.now();for(let s of a)if(s.Jf(i)){let t=s.Yf();(-1===o||t<o)&&(o=t)}else a.delete(s);if(-1!==o){let t=Math.max(o-i+h,e);n=self.setTimeout(s,t)}},i=(t,s,self.Os),e=1e3,h=100,r=-1,n=(i.Vf=function(){return-1===r&&(r=Date.now(),self.setTimeout(t,16)),r},-1),o=-1,a=new Set;i.Hf=class{constructor(t,s){this.qf=t,this.Zf=1e3*s,this.Xf=0,this.Kf=!1}$f(){let t=i.Vf();this.Xf=t+this.Zf,this.Kf||(a.add(this),this.Kf=!0),-1===n?(o=this.Xf,n=self.setTimeout(s,this.Zf+h)):this.Xf<o&&o>t+e&&(self.clearTimeout(n),o=this.Xf,n=self.setTimeout(s,this.Zf+h))}Jf(t){return!(t>=this.Xf)||(this.qf()?(this.Xf=t+this.Zf,!0):this.Kf=!1)}Yf(){return this.Xf}t0(){this.Kf&&(a.delete(this),this.Kf=!1,0===a.size)&&-1!==n&&(self.clearTimeout(n),n=-1,o=-1)}er(){this.t0(),this.qf=null}}}{const us=self.Os;us.s0=class ls{constructor(t){this.i0=!1,this.e0=t}h0(){this.i0||(this.i0=!0,this.e0&&(this.e0(),this.e0=null))}r0(){return this.i0}er(){this.h0()}static er(t){return new ls(()=>t.er())}static n0(s,i,e,h,t){if(null==h)h=!1;else if("boolean"!=typeof h&&"object"!=typeof h)throw new TypeError("invalid event listener options");if(t&&(e=e.bind(t)),i.includes(" ")){i=i.split(" ");const r=new us.o0;for(let t of i)s.addEventListener(t,e,h),r.sc(us.ir(us.s0,()=>s.removeEventListener(t,e,h)));return r}return s.addEventListener(i,e,h),us.ir(us.s0,()=>s.removeEventListener(i,e,h))}},us.a0=class extends us.s0{u0(t){this.e0=t}},us.o0=class extends us.s0{constructor(...s){super(),this.l0=new Set;for(let t of s)this.sc(t)}sc(...s){if(this.i0)throw new Error("already disposed");for(let t of s)this.l0.add(t)}c0(t){if(this.i0)throw new Error("already disposed");this.l0.delete(t)}f0(){if(this.i0)throw new Error("already disposed");if(this.l0){for(let t of this.l0)t.h0();this.l0.clear()}}r0(){return this.i0}h0(){if(this.i0)throw new Error("already disposed");this.i0=!0;for(let t of this.l0)t.h0();this.l0.clear(),this.l0=null}er(){this.h0()}}}{const cs=self.Os;cs.d0=class extends cs.Kh{constructor(){super(),this.p0=0,this.Ya=0,this.m0=0,this.g0=0}sc(t){this.Ya=(t=+t)-this.p0,this.m0=this.g0+this.Ya,this.p0=this.m0-this.g0-this.Ya,this.g0=this.m0}y0(t){this.g0-=+t}Ks(){return this.g0}$f(){this.p0=0,this.Ya=0,this.m0=0,this.g0=0}Set(t){this.p0=0,this.Ya=0,this.m0=0,this.g0=+t}M0(t){this.p0=t.p0,this.Ya=t.Ya,this.m0=t.m0,this.g0=t.g0}er(){}}}{const fs=self.Os,n={};n.w0=function(t){this.S0=t,this.right=this.S0.T0,this.left=this.S0.T0,this.parent=null,this.color=!1,this.key=null},n.b0=function(t){this.size=0,this.T0=new n.w0(this),this.T0.color=!1,this.root=this.T0,this.root.parent=this.T0,this.compare=t||this.x0},n.b0.prototype.x0=function(t,s){return t<s?-1:s<t?1:0},n.b0.prototype.clone=function(){var t=new n.b0(this.compare);return t.v0(this),t},n.b0.prototype.clear=function(){this.size=0,this.T0=new n.w0(this),this.T0.color=!1,this.root=this.T0,this.root.parent=this.T0},n.b0.prototype.C0=function(t){var s=t.right;t.right=s.left,s.left!=this.T0&&(s.left.parent=t),s.parent=t.parent,t.parent==this.T0?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,(s.left=t).parent=s},n.b0.prototype.G0=function(t){var s=t.left;t.left=s.right,s.right!=this.T0&&(s.right.parent=t),s.parent=t.parent,t.parent==this.T0?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,(s.right=t).parent=s},n.b0.prototype.I0=function(t){if(this.contains(t))this.N0(t).key=t;else{for(var s=new n.w0(this),i=(s.key=t,this.T0),e=this.root;e!=this.T0;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;(s.parent=i)==this.T0?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.T0,s.right=this.T0,s.color=!0,this.E0(s),this.size++}},n.b0.prototype.E0=function(t){for(;t!=this.T0&&t!=this.root&&1==t.parent.color;){var s;t.parent==t.parent.parent.left?1==(s=t.parent.parent.right).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.C0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.T0&&this.G0(t.parent.parent)):1==(s=t.parent.parent.left).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.G0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.T0&&this.C0(t.parent.parent))}this.root.color=!1},n.b0.prototype._0=function(t){var s=t.left==this.T0||t.right==this.T0?t:this.D0(t),i=s.left!=this.T0?s.left:s.right;i.parent=s.parent,s.parent==this.T0?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.A0(i),this.size--},n.b0.prototype.A0=function(t){for(;t!=this.root&&0==t.color;){var s;t=t==t.parent.left?(1==(s=t.parent.right).color&&(s.color=!1,t.parent.color=!0,this.C0(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=!0,t.parent):(0==s.right.color&&(s.left.color=!1,s.color=!0,this.G0(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.C0(t.parent),this.root)):(1==(s=t.parent.left).color&&(s.color=!1,t.parent.color=!0,this.G0(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=!0,t.parent):(0==s.left.color&&(s.right.color=!1,s.color=!0,this.C0(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.G0(t.parent),this.root))}t.color=!1},n.b0.prototype.remove=function(t){var s;return(t=this.N0(t))!=this.T0?(s=t.key,this._0(t),s):null},n.b0.prototype.L0=function(t,s){this.remove(s)},n.b0.prototype.min=function(t){for(;t.left!=this.T0;)t=t.left;return t},n.b0.prototype.max=function(t){for(;t.right!=this.T0;)t=t.right;return t},n.b0.prototype.D0=function(t){if(t.right!=this.T0)return this.min(t.right);for(var s=t.parent;s!=this.T0&&t==s.right;)s=(t=s).parent;return s},n.b0.prototype.O0=function(t){if(t.left!=this.T0)return this.max(t.left);for(var s=t.parent;s!=this.T0&&t==s.left;)s=(t=s).parent;return s},n.b0.prototype.R0=function(t){if(0<this.size){var s=this.N0(t);if(s==this.T0)return null;if(s.right!=this.T0)return this.min(s.right).key;for(var i=s.parent;i!=this.T0&&s==i.right;)i=(s=i).parent;return i!=this.T0?i.key:null}return null},n.b0.prototype.P0=function(t){if(0<this.size){var s=this.N0(t);if(s==this.T0)return null;if(s.left!=this.T0)return this.max(s.left).key;for(var i=s.parent;i!=this.T0&&s==i.left;)i=(s=i).parent;return i!=this.T0?i.key:null}return null},n.b0.prototype.k0=function(){return this.min(this.root).key},n.b0.prototype.F0=function(){return this.max(this.root).key},n.b0.prototype.N0=function(t){for(var s=this.root;s!=this.T0&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},n.b0.prototype.contains=function(t){return null!=this.N0(t).key},n.b0.prototype.getValues=function(){var s=[];return this.forEach(function(t){s.push(t)}),s},n.b0.prototype.v0=function(t){if("array"==n.typeOf(t))for(var s=0;s<t.length;s++)this.I0(t[s]);else if("function"==n.typeOf(t.forEach))t.forEach(this.I0,this);else if("function"==n.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.I0(i[s]);else if("object"==n.typeOf(t))for(var e in t)this.I0(t[e])},n.b0.prototype.j0=function(t){if("array"==n.typeOf(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==n.typeOf(t.forEach))t.forEach(this.L0,this);else if("function"==n.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.remove(i[s]);else if("object"==n.typeOf(t))for(var e in t)this.remove(t[e])},n.b0.prototype.z0=function(t){if("array"==n.typeOf(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==n.typeOf(t.forEach))return t.every(this.contains,this);if("function"==n.typeOf(t.getValues)){for(var i=t.getValues(),s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==n.typeOf(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},n.b0.prototype.range=function(t,s){var i=[];return this.B0(function(t){i.push(t)},t,s),i},n.b0.prototype.U0=function(t,s){if(!this.W0())for(var i=this.min(this.root);i!=this.T0;){if(t.call(s,i.key,this))return;i=this.D0(i)}},n.b0.prototype.Q0=function(t,s,i){if(!this.W0())for(var e=this.N0(s);e!=this.T0;){if(t.call(i,e.key,this))return;e=this.D0(e)}},n.b0.prototype.J0=function(t,s,i){if(!this.W0())for(var e=this.min(this.root),h=this.N0(s);e!=h;){if(t.call(i,e.key,this))return;e=this.D0(e)}},n.b0.prototype.B0=function(t,s,i,e){if(!this.W0())for(var h=this.N0(s),r=this.N0(i);h!=r;){if(t.call(e,h.key,this))return;h=this.D0(h)}},n.b0.prototype.Y0=function(t,s){if(!this.W0())for(var i=this.max(this.root);i!=this.T0;){if(t.call(s,i.key,this))return;i=this.O0(i)}},n.b0.prototype.forEach=function(t,s){if(!this.W0())for(var i=this.min(this.root);i!=this.T0;i=this.D0(i))t.call(s,i.key,i.key,this)},n.b0.prototype.some=function(t,s){if(!this.W0())for(var i=this.min(this.root);i!=this.T0;i=this.D0(i))if(t.call(s,i.key,i.key,this))return!0;return!1},n.b0.prototype.every=function(t,s){if(this.W0())return!1;for(var i=this.min(this.root);i!=this.T0;i=this.D0(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},n.b0.prototype.map=function(t,s){var i=[];if(!this.W0())for(var e=this.min(this.root);e!=this.T0;e=this.D0(e))i.push(t.call(s,e.key,e.key,this));return i},n.b0.prototype.filter=function(t,s){var i=[];if(!this.W0())for(var e=this.min(this.root);e!=this.T0;e=this.D0(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},n.b0.prototype.getCount=function(){return this.size},n.b0.prototype.W0=function(){return 0==this.size},n.b0.prototype.ne=function(t){var s=n.getCount(t);if(this.getCount()>s)return!1;var i=0;if(this.W0())return!0;for(var e=this.min(this.root);e!=this.T0;e=this.D0(e))n.contains.call(t,t,e.key)&&i++;return i==this.getCount()},n.b0.prototype.V0=function(t){var s=new n.b0(this.compare);if(!this.W0())for(var i=this.min(this.root);i!=this.T0;i=this.D0(i))t.contains.call(t,i.key,i.key,this)&&s.I0(i.key);return s},fs.b0=class extends fs.Kh{constructor(t){super(),this.H0=new n.b0(t),this.q0=!1,this.Z0=new Set,this.X0=new Set}sc(t){this.q0?this.H0.contains(t)?this.X0.delete(t):this.Z0.add(t):this.H0.I0(t)}c0(t){this.q0?this.H0.contains(t)?this.X0.add(t):this.Z0.delete(t):this.H0.remove(t)}Xs(t){return this.q0?!!this.Z0.has(t)||!this.X0.has(t)&&this.H0.contains(t):this.H0.contains(t)}Jl(){this.H0.clear(),this.Z0.clear(),this.X0.clear()}toArray(){if(this.q0)throw new Error("cannot be used in queueing mode");return this.H0.getValues()}ql(){return this.H0.getCount()+this.Z0.size-this.X0.size}Yl(){return 0===this.ql()}K0(){if(this.Yl())throw new Error("empty set");if(this.q0)throw new Error("cannot be used in queueing mode");const t=this.H0,s=t.min(t.root);return s.key}$0(){if(this.Yl())throw new Error("empty set");if(this.q0)throw new Error("cannot be used in queueing mode");const t=this.K0();return this.c0(t),t}t1(t){if(this.q0!==(t=!!t)&&!(this.q0=t)){for(const s of this.X0)this.H0.remove(s);this.X0.clear();for(const i of this.Z0)this.H0.I0(i);this.Z0.clear()}}s1(t){this.H0.forEach(t)}*values(){if(!this.Yl()){const s=this.H0;for(let t=s.min(s.root);t!=s.T0;t=s.D0(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const ds=self.Os;ds.i1=class{constructor(t=ds.hardwareConcurrency){this.e1=t,this.h1=[],this.n1=0}sc(i){return new Promise((t,s)=>{this.h1.push({yf:i,resolve:t,reject:s}),this.o1()})}a1(i){for(let t=0,s=this.h1.length;t<s;++t)if(this.h1[t].yf===i)return t;return-1}u1(t,s){const i=this.a1(t);if(-1===i)throw new Error("cannot find promise to resolve");this.h1[i].resolve(s),this.h1.splice(i,1)}l1(t,s){const i=this.a1(t);if(-1===i)throw new Error("cannot find promise to reject");this.h1[i].reject(s),this.h1.splice(i,1)}async o1(){if(this.h1.length&&!(this.n1>=this.e1)){this.n1++;const s=this.h1.shift();try{const t=await s.yf();s.resolve(t)}catch(t){s.reject(t)}this.n1--,this.o1()}}static async c1(t,s){let i=[],e=!1,h=[];for(;t--;)h.push((async()=>{let t;for(;t=s.pop();){if(e)return;try{i.push(await t())}catch(t){throw e=!0,t}}})());return await Promise.all(h),i}}}{const ps=self.Os;ps.f1=class{constructor(t,s,i){this.qf=t,this.d1=s,this.m1=i||2*s,this.g1=-1,this.M1=-1/0,this.w1=()=>this.S1(),this.T1=!1,this.b1=!1,this.v1=null}C1(t){this.b1=!!t}G1(){return void 0!==ps.Battery&&ps.Battery.IsOnBatteryPower()?this.m1:this.d1}I1(...e){if(-1===this.g1){this.v1=e;let t=ps.Vf(),s=t-this.M1,i=this.G1();i<=s&&this.b1?(this.M1=t,this.N1()):this.g1=self.setTimeout(this.w1,Math.max(i-s,4))}}N1(){this.T1=!0;const t=this.v1;this.v1=null,t?this.qf(...t):this.qf(),this.T1=!1}$f(){this.T1||(this.E1(),this.v1=null,this.M1=ps.Vf())}S1(){this.g1=-1,this.M1=ps.Vf(),this.N1()}E1(){-1!==this.g1&&(self.clearTimeout(this.g1),this.g1=-1)}er(){this.E1(),this.qf=null,this.v1=null,this.w1=null}}}{const ms=self.Os;ms._1=class{constructor(){this.D1=new Map,this.A1=!1,this.L1=null,this.O1=null,this.R1=null,this.P1=null}F1(t){this.A1=!!t}j1(){return this.A1}z1(t){this.L1=t}B1(t){if(this.L1)return this.L1(t);throw new Error("no get base size callback set")}U1(t){this.O1=t}W1(t,s,i,e,h,r){if(this.O1)return this.O1(t,s,i,e,h,r);throw new Error("no raster at size callback set")}Q1(t){this.R1=t}J1(t){if(!this.R1)throw new Error("no release result callback set");this.R1(t)}Y1(t){this.P1=t}V1(){if(!this.P1)throw new Error("no redraw callback set");this.P1()}H1(t){let s=this.D1.get(t);return s||(s=ms.ir(ms.q1,this,t),this.D1.set(t,s)),s.Z1(),s}X1(t){this.D1.delete(t.K1())}td(){for(const t of this.D1.values())t.ed(),t.hd()}}}{const gs=self.Os;gs.q1=class{constructor(t,s){this.rd=t,this.nd=s,this.od=0,this.ad=0,this.ud=0,this.ld=this.rd.B1(s).then(t=>{this.rd&&(this.ad=t[0],this.ud=t[1],this.rd.V1())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.fd=!0,this.rd&&this.rd.V1()}),this.dd=0,this.pd=0,this.md=0,this.gd=0,this.yd=!1,this.Md=null,this.wd=!1,this.fd=!1}er(){if(this.od<=0)throw new Error("already released");this.od--,0===this.od&&this.Sd()}ed(){this.Md&&(this.rd.J1(this.Md),this.Md=null)}Sd(){this.ed(),this.rd.X1(this),this.rd=null}K1(){return this.nd}Z1(){this.od++}Td(){return 0<this.od}bd(){return this.Md}hd(){this.wd=!0}async xd(e,h,r){if(0!==h&&0!==r&&!this.fd&&!this.yd){let t=gs.Ar(Math.ceil(h)),s=gs.Ar(Math.ceil(r)),i=Math.max(t,s);if(4096<i){const n=4096/i;h*=n,r*=n,t=Math.min(Math.ceil(t*n),4096),s=Math.min(Math.ceil(s*n),4096)}if(h<t&&r<s){const o=h/r,a=t/s;r=o<a?(h=s*o,s):(h=t)/o}if(this.rd.j1()&&(t=Math.ceil(h),s=Math.ceil(r)),!(t<=this.dd&&s<=this.pd)||this.wd){this.yd=!0,this.dd=t,this.pd=s;const u=await this.rd.W1(this.nd,e,this.dd,this.pd,h,r);this.rd&&(this.ed(),this.Md=u,this.md=h,this.gd=r,this.yd=!1,this.wd=!1,this.rd.V1())}}}vd(){return this.ld}Cd(){return this.ad}Gd(){return this.ud}Id(){return this.md}Nd(){return this.gd}Ed(){return this.fd}}}{let s=function(t){return Ss.get(t)};s;const c=self.Os,ys=(c._d="\ufeff",new Set("0123456789")),Ms=(c.Dd=function(t){return ys.has(t)},new Set(" \t\n\r            ​\u2028\u2029  　"));c.Ad=function(t){return Ms.has(t)},c.Ld=function(t){return[...t].filter(t=>!c.Ad(t)).join("")},c.Od=function(t){for(const s of t)if(!c.Ad(s))return!1;return!0},c.Rd=function(t){for(const s of t)if(!c.Ad(s))return!1;return!0},c.Pd=function(t){return 1===t.length&&t.charCodeAt(0)<32},c.kd=function(t){return[...t].filter(t=>!c.Pd(t)).join("")};let i=null;try{i=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}c.Fd=function(t){return!c.Ad(t)&&i&&i.test(t)};const ws=new Set("0123456789.+-e"),Ss=(c.jd=function(s){if(!(s=s.trim()).length)return!1;let t=s.charAt(0);if("-"!==t&&!ys.has(t))return!1;for(let t of s)if(!ws.has(t))return!1;return!0},c.zd=function(s){let i=s.length;for(;0<i;){let t=s.charAt(i-1);if(!c.Dd(t))break;--i}return s.substr(0,i)},c.Bd=function(t){let s=c.zd(t),i=t.substr(s.length);return s+(i?(parseInt(i,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),Ts=/[&<>"']/g,bs=(c.Ud=function(t){return t.replace(Ts,s)},c.Wd=function(t){let s=c.Qd(t,"\\","\\\\");return s=c.Qd(s,'"','\\"'),s=c.Qd(s,"\t","\\t"),s=c.Qd(s,"\r",""),c.Qd(s,"\n","\\n")},c.Jd=function(t){let s=c.Qd(t,"&","&amp;");return s=c.Qd(s,"<","&lt;"),s=c.Qd(s,">","&gt;"),c.Qd(s,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),xs=(c.re=function(t){return t.replace(bs,"\\$&")},c.Yd=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},c.Vd=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());let e=s.length,h=0,r,n=[];for(;-1<(r=t.indexOf(s,h));)n.push(r),h=r+e;return n},c.Qd=function(t,s,i){return t.replaceAll(s,()=>i)},c.Hd=function(t,s,i){return t.replace(new RegExp(c.re(s),"gi"),()=>i)},c.qd=function(t,s){"string"==typeof s?t.textContent=s:s.Zd()?t.textContent=s.toString():(t.innerHTML=s.Xd(),s instanceof c.Ih&&s.Kd(t))},c.$d=function(t,s){return t instanceof c.HtmlString||t instanceof c.Ih?t.equals(s):s instanceof c.HtmlString||s instanceof c.Ih?s.equals(t):t===s},c.tp=function(i,...e){let h=i;for(let t=0,s=e.length;t<s;++t){const r=`{${t}}`;if(!i.includes(r))throw new Error(`missing placeholder '${r}' in string substitution`);h=h.replace(r,e[t].toString())}return h},c.sp=function(i,...e){let h=i,r=-1,n=-1;for(let t=0,s=e.length;t<s;++t){const o=`{${t}}`;i.includes(o)?(n=t,h=h.replace(o,e[t].toString())):-1===r&&(r=t)}if(0<=r&&0<=n&&r<n)throw new Error(`missing placeholder '${r}' in string substitution`);return h},c.ip=function(t,i){let e=t;for(let[t,s]of Object.entries(i))e=e.replaceAll(t,s.toString());return e},c.ep=function(t,s){return s<t?1:t<s?-1:0},c.hp=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return e<i?1:i<e?-1:0},new self.Intl.Segmenter),vs=(c.rp=function(t){const s=[];for(const i of xs.segment(t))s.push(i.segment);return s},c.np=function*(t){for(const s of xs.segment(t))yield s.segment},c.op=function(t){let s=0;for(const i of xs.segment(t))++s;return s},1073741824),Cs=1024*vs,Gs={up:!(c.lp=function(s,t){let i="common."+(t?"dataRates":"dataSizes")+".",e=self.langSub;if(s<1024)return e(i+"bytes",s);if(s<1048576){let t=s/1024;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"kilobytes",t)}if(s<vs){let t=s/1048576;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"megabytes",t)}if(s<Cs){let t=s/vs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"gigabytes",t)}{let t=s/Cs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"terabytes",t)}}),cp:!0,fp:!0,pp:!0,mp:!0};c.gp=function(t,s){s=Object.assign({},Gs,s),c.Lang.PushContext("common.time");const i=[],e=self.lang,h=self.langPluralSub;if(s.cp){const n=Math.floor(t/86400);0<n&&(t-=24*n*3600,i.push(h(".days",null,n)))}if(s.fp){const o=Math.floor(t/3600);(0<o||i.length)&&(t-=3600*o,i.push(h(".hours",null,o)))}if(s.pp){const a=Math.floor(t/60);(0<a||i.length||!s.mp)&&(t-=60*a,i.push(h(".minutes",null,a)))}if(s.mp){const u=Math.floor(t%60);i.push(h(".seconds",null,u))}const r=(s.up?e(".approx-prefix"):"")+i.join(e(".separator"));return c.Lang.PopContext(),r},c.yp=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),h=s-e.length;for(let t=0;t<h;++t)i+="0";return i+e},c.Mp=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},c.wp=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());c.On(i,4,"0"),c.On(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const h=i[t]-e[t];if(0!=h)return h<0?-1:1}return 0},c.Sp=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random()),i="x"===t?s:3&s|8;return i.toString(16)})},c.Tp=function(i,e){if(i.length!==e.length)throw new Error("strings must be same length");let h=0;for(let t=0,s=i.length;t<s;++t)i.charAt(t)!==e.charAt(t)&&++h;return h},c.bp=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,h,r,n,o;for(s.length<t.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,h=1;h<=t.length;h++)n=s[e-1]===t[h-1]?o[h-1]:Math.min(o[h-1]+1,Math.min(r+1,o[h]+1)),o[h-1]=r,r=n;o[t.length]=r}return o[t.length]}}{let s=function(t,i,e){const h=o.get(e);if(!h)return"class"===e?i?"</span>":`<span class="bbclass${l++}">`:t;if("string"==typeof h){if("a"===h&&0===a.length||"abbr"===h&&0===u.length)return t;if("a"!==h||i){if("abbr"!==h||i)return"<"+i+h+">";{const r=parseInt(e.substring(3),10)-1;if(r<0||r>=u.length)throw new Error("invalid bbcode tip substitution");let t=u[r],s="";if("string"==typeof t?s=t:"function"==typeof t&&(s=t()),"string"!=typeof s)throw new TypeError("invalid bbcode tip");return`<abbr title="${f.Qd(s,'"',"&quot;")}">`}}{const s=parseInt(e.substring(1),10)-1;if(s<0||s>=a.length)throw new Error("invalid bbcode link substitution");const n=a[s];if("string"==typeof n)return`<a href="${a[s]}">`;if("function"==typeof n)return`<a class="bblink${s}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(h)){let t=h[0],s=h[1];return i?"</"+t+">":`<${t} class="${s}">`}},f=(s,self.Os),o=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),d=new Set(["icon"]),i=/\[(\/?)([a-zA-Z0-9]+)\]/g,p=/\[(\/?)([^\[\n]*?)\]/g,a=null,u=null,l=0,e=/\n/g;f.Ih=class{constructor(t,s){if(this.xp=s&&s.vp?t:f.Ud(t),this.Cp="",this.Gp=!1,this.Ip=[],this.Np=[],s){if(this.Gp=!!s.convertLineBreaks,s.links){if(9<s.links.length)throw new Error("too many links");this.Ip=s.links}if(s.tips){if(9<s.tips.length)throw new Error("too many tips");this.Np=s.tips}}this.Ep=this.xp.includes("["),this._p=this.Gp&&this.xp.includes("\n"),this.Dp=!this.Ep&&!this._p&&!this.xp.includes("&"),this.Ap=!1,this.Lp=[]}toString(){return this.xp}valueOf(){return this.xp}Zd(){return this.Dp}Op(){return this.Ep?this.xp.replace(i,""):this.xp}Xd(){if(this.Dp)return this.xp;if(!this.Cp&&this.xp){let t=this.xp;this.Ep&&(l=0,a=this.Ip,u=this.Np,t=t.replace(i,s),a=null,u=null),this._p&&(t=t.replace(e,"<br>")),this.Cp=t}return this.Cp}Kd(i){if(this.Ip.length)for(let t=0,s=this.Ip.length;t<s;++t){const e=this.Ip[t];if("function"==typeof e){const h=i.querySelector(".bblink"+t);if(!h)throw new Error("unable to attach BBString link handler");h.onclick=e}}}equals(t){return t instanceof f.HtmlString?this.Xd()===t.Xd():t instanceof f.Ih?this.xp===t.xp:this.xp===t}Rp(){if(!this.Ap){let e=[],t=this.xp,h=[],s=p.lastIndex=0,i;for(;null!==(i=p.exec(t));){const r=i.index;if(!(0<r&&"\\"===t.charAt(r-1))){const n=i[0],o=i[1],a=i[2],u=t.substring(s,r);if(s=r+n.length,u&&e.push({text:u,Pp:h.slice(0)}),a)if(o){const l=a.toLowerCase();for(let t=h.length-1;0<=t;--t)if(h[t].tag===l){h.splice(t,1);break}}else{let t=a,s=null,i=a.indexOf("=");if(-1!==i?(t=a.substring(0,i).toLowerCase(),s=a.substring(i+1)):t=t.toLowerCase(),d.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);e.push({icon:s,Pp:h.slice(0)})}else h.push({tag:t,kp:s})}}}s<t.length&&e.push({text:t.substring(s),Pp:h.slice(0)});for(const c of e)c.text&&(c.text=this.Fp(c.text));this.Lp=e.map(t=>t.icon?f.ir(f.jp,{icon:t.icon,Pp:t.Pp}):f.ir(f.zp,{Bp:f.rp(t.text),Pp:t.Pp})),this.Ap=!0}return this.Lp}Fp(t){return t=f.Qd(t,"\\[","["),f.Qd(t,"\\\\","\\")}static Up(t){return f.ir(f.Ih,t,{vp:!0}).Op()}static Wp(t){return t.replace(p,"")}}}{let u=function(t){return" "!==t&&" "!==t&&M.Ad(t)},a=function(t){return Is.has(t)},l=function(t){return M.Fd(t)&&!a(t)},c=function(t){for(;0<t.length&&u(t.at(-1));)t.pop()},y=function(t){return"\n"===t||"\r\n"===t};u,a,l,c,y;const M=self.Os,Is=new Set("〈《「『【〔〖〘〚〝");M.Qp=class{constructor(){this.Jp=[],this.Yp=null}Vp(){return this.Jp}Hp(){return this.Jp.length}qp(t){this.Yp=t}Zp(t,s){let i=0,e=0,h=0,r=0,n=0;for(const o of t){if(-1===o.Xp()){const a=s(o);o.Kp(a.height),o.$p(a.fontBoundingBoxAscent||0),o.tm(a.fontBoundingBoxDescent||0),o.im(a.hm||0),o.rm()?o.nm(a.width):o.om()&&o.am(this.Yp)}i+=o.Xp(),e=Math.max(e,o.um()),h=Math.max(h,o.lm()),r=Math.max(r,o.fm()),n=Math.max(n,o.dm())}return{width:i,height:e,fontBoundingBoxAscent:h,fontBoundingBoxDescent:r,hm:n}}pm(t,s,i,e,h,r){this.Jp.push(M.ir(M.Qp.gm,{ym:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:h,hm:r}))}Qp(s,r,n,i,o){if("string"==typeof s&&(s=[M.ir(M.zp,{Bp:M.rp(s)})]),M.Dn(this.Jp),!(!s.length||1===s.length&&s[0].rm()&&s[0].Yl()||n<2)){if(1===s.length){const a=s[0];if(a.rm()&&a.Mm()<=100&&!a.wm()){let{width:t,height:s,fontBoundingBoxAscent:i,fontBoundingBoxDescent:e,hm:h}=r(a);if(t+=o,a.nm(t),a.Kp(s),a.$p(i||0),a.tm(e||0),a.im(h||0),t<=n)return void this.pm([a],t,s,i,e,h)}}let t;t="word"===i?this.Sm(s):"cjk"===i?this.Tm(s):this.xm(s),this.vm(t,r,n,o)}}Sm(t){let s=[],i=[],e=!1;for(const h of t){const r=h.Cm();if(h.om())0<i.length&&s.push(i),s.push([h]),i=[];else for(const n of h.Gm())if(y(n))0<i.length&&s.push(i),s.push([M.ir(M.zp,{Bp:["\n"],Pp:r})]),i=[];else if(0===i.length)i.push(M.ir(M.zp,{Bp:[n],Pp:r})),e=u(n);else{const o=u(n);if(o===e){const a=i.at(-1);a.Cm()===r?a.Im(n):i.push(M.ir(M.zp,{Bp:[n],Pp:r}))}else s.push(i),i=[M.ir(M.zp,{Bp:[n],Pp:r})],e=o}}return 0<i.length&&s.push(i),s}Tm(t){let s=[],i=[],e=!1;for(const h of t){const r=h.Cm();if(h.om())0<i.length&&s.push(i),s.push([h]),i=[];else for(const n of h.Gm())if(y(n))0<i.length&&s.push(i),s.push([M.ir(M.zp,{Bp:["\n"],Pp:r})]),i=[];else{if(0===i.length)i.push(M.ir(M.zp,{Bp:[n],Pp:r}));else if(e||l(n)){const o=i.at(-1);o.Cm()===r?o.Im(n):i.push(M.ir(M.zp,{Bp:[n],Pp:r}))}else s.push(i),i=[M.ir(M.zp,{Bp:[n],Pp:r})];e=a(n)}}return 0<i.length&&s.push(i),s}xm(t){const s=[];for(const i of t)if(i.rm()){const e=i.Gm();M.Wh(s,e.map(t=>[M.ir(M.zp,{Bp:[t],Pp:i.Cm()})]))}else s.push([i]);return s}Nm(t){return t.map(t=>t.Em())}_m(s,i){let t=s.length?s.at(-1):null,e=0;t&&t.rm()&&i[0].rm()&&i[0].Cm()===t.Cm()&&(t.Dm(i[0].Gm()),e=1);for(let t=i.length;e<t;++e){const h=i[e];s.push(h.Em())}}vm(t,s,i,e){let h=[],r=0,n=0,o=0,a=0,u=0;for(const l of t)if(1===l.length&&l[0].rm()&&1===l[0].Mm()&&y(l[0].Gm()[0])){if(0===n){const c=M.ir(M.zp,{Bp:[" "],Pp:l[0].Cm()}),f=s(c);n=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,u=f.hm||0}this.pm(h,r,n,o,a,u),h=[],r=0,n=0,o=0,a=0,u=0}else{const d=this.Nm(h),p=(this._m(d,l),this.Zp(d,s)),m=p.width;if(i<=m)if(0<h.length&&this.pm(h,r,n,o,a,u),h=[],l[0].rm()&&M.Rd(l[0].Gm()))r=0,n=0,o=0,a=0,u=0;else{this._m(h,l);const g=this.Zp(h,s);r=g.width,n=g.height,o=g.fontBoundingBoxAscent,a=g.fontBoundingBoxDescent,u=g.hm}else h=d,r=m,n=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,u=p.hm}0<h.length&&this.pm(h,r,n,o,a,u),this.Am(s,e)}Am(s,i){for(const e of this.Jp){const h=e.Lm();if(h.length){let t=h.at(-1);if(t.rm()){const r=t.Gm(),n=r.slice(0);if(c(n),0===n.length)e.Om(-t.Xp()),h.pop();else if(n.length<r.length){t.Rm(n);const o=s(t).width,a=t.Xp()-o;t.nm(o),e.Om(-a)}0!==i&&0<h.length&&((t=h.at(-1)).Om(i),e.Om(i))}}}}Jl(){M.Dn(this.Jp)}Pm(){return this.Jp.reduce((t,s)=>Math.max(t,s.Xp()),0)}km(){return this.Jp.reduce((t,s)=>t+s.um(),0)}}}{const Ns=self.Os;Ns.Qp.gm=class{constructor(t){this.Lp=t.ym||[],this.Fm=t.width||-1,this.jm=t.height||-1,this.zm=t.fontBoundingBoxAscent||-1,this.Bm=t.fontBoundingBoxDescent||-1,this.Um=t.hm||-1,this.Wm=0,this.Qm=0}ym(){return this.Lp.values()}*Jm(){const s=this.Lp;for(let t=s.length-1;0<=t;--t)yield s[t]}Lm(){return this.Lp}Om(t){this.Fm+=t}Xp(){return this.Fm}um(){return this.jm}Ym(){return this.zm}fm(){return this.Bm}dm(){return this.Um}Vm(t){this.Wm=t}Hm(){return this.Wm}qm(t){this.Qm=t}Zm(){return this.Qm}}}{const Es=self.Os;Es.Xm=class{constructor(t){this.Km=t.Pp||[],this.Fm=t.width||-1,this.jm=t.height||-1,this.zm=t.fontBoundingBoxAscent||-1,this.Bm=t.fontBoundingBoxDescent||-1,this.Um=t.hm||-1,this.Wm=0,this.Qm=0}rm(){return!1}om(){return!1}Cm(){return this.Km}$m(s){const i=this.Km;for(let t=i.length-1;0<=t;--t){const e=i[t];if(e.tag===s)return e}return null}tg(t){return!!this.$m(t)}sg(){const t=new Map;for(const s of this.Km)t.set(s.tag,s.kp);return t}Om(t){this.Fm+=t}nm(t){this.Fm=t}Xp(){return this.Fm}Kp(t){this.jm=t}um(){return this.jm}$p(t){this.zm=t}lm(){return this.zm}tm(t){this.Bm=t}fm(){return this.Bm}im(t){this.Um=t}dm(){return this.Um}Vm(t){this.Wm=t}Hm(){return this.Wm}qm(t){this.Qm=t}Zm(){return this.Qm}}}{const _s=self.Os;_s.zp=class extends _s.Xm{constructor(t){super(t),this.ig=t.Bp}rm(){return!0}Dm(t){_s.Wh(this.ig,t),this.Fm=-1,this.jm=-1,this.zm=-1,this.Bm=-1,this.Um=-1}Im(t){this.ig.push(t)}Em(){return _s.ir(_s.zp,{Bp:this.ig.slice(0),Pp:this.Km,width:this.Fm,height:this.jm,fontBoundingBoxAscent:this.zm,fontBoundingBoxDescent:this.Bm,hm:this.Um})}Gm(){return this.ig}Rm(t){this.ig=t}Mm(){return this.ig.length}Yl(){return 0===this.ig.length}wm(){return this.ig.includes("\n")}}}{const Ds=self.Os;Ds.jp=class extends Ds.Xm{constructor(t){super(t),this.eg=t.icon}om(){return!0}hg(){return this.eg}Em(){return Ds.ir(Ds.jp,{icon:this.eg,Pp:this.Km,width:this.Fm,height:this.jm,fontBoundingBoxAscent:this.zm,fontBoundingBoxDescent:this.Bm,hm:this.Um})}rg(t){if(!t)return null;let s=Number(this.eg);return String(s)===this.eg?(s=Math.floor(s),t.ng(s)):t.og(this.eg)}am(t){const s=this.rg(t);this.Fm=s?this.jm*s.Xp()/s.um():0}ag(t){const s=this.rg(t);return s?s.ag():null}Mm(){return 1}}}{const As=self.Os;As.ug=class{constructor(t){this.lg=new Map,this.fg=t.dg,this.pg=t.mg}er(){for(const t of this.lg.values())t.er();this.lg.clear()}gg(t){let s=this.lg.get(t);if(!s){const i=this.fg(t);s=As.ir(As.yg,this,{source:t,Mg:i}),this.lg.set(t,s)}return s}wg(t){return this.lg.has(t)}Sg(t){const s=this.lg.get(t);s&&s.er(),this.lg.delete(t)}async Tg(t){return this.pg(t)}}}{const Ls=self.Os;Ls.yg=class{constructor(t,s){this.bg=t,this.xg=s.source,this.vg=[],this.Cg=new Map,this.Gg=!1,this.Ig=!1,this.Ng=null;const i=s.Mg.Eg;for(let t=0,s=i.length;t<s;++t){const e=i[t],h=Ls.ir(Ls._g,this,{index:t,tag:e.tag,source:e.source,width:e.width,height:e.height});this.vg.push(h),e.tag&&this.Cg.set(e.tag.toLowerCase(),h)}}er(){for(const t of this.vg)t.er();Ls.Dn(this.vg),this.Cg.clear(),this.bg=null,this.xg=null}Dg(){return this.Gg}Ag(){return this.Ig}Lg(){return this.Ng||(this.Ng=this.Og()),this.Ng}async Og(){if(!this.Gg){this.Gg=!0,this.Ig=!0;const t=await this.bg.Tg(this.xg);if(this.bg){const i=t.Eg;for(let t=0,s=Math.min(i.length,this.vg.length);t<s;++t){const e=i[t].Rg;this.vg[t].Pg(e)}this.Ig=!1}}}ng(t){return(t=Math.floor(t))<0||t>=this.vg.length?null:this.vg[t]}og(t){return this.Cg.get(t.toLowerCase())||null}}}{const Os=self.Os;Os._g=class{constructor(t,s){this.kg=t,this.xg=s.source||null,this.Fg=s.index,this.jg=s.tag,this.Fm=s.width,this.jm=s.height,this.zg=null}er(){this.Fm=0,this.jm=0,this.kg=null}Bg(){return this.xg}Xp(){return this.Fm}um(){return this.jm}Pg(t){this.zg=t}ag(){return this.zg}}}{let e=function(t,s,i,e){const h=js;vh.F(ks,i,s),vh.F(Fs,t,s),vh.At(h,ks,Fs),vh.normalize(h,h),e.set(h[0],h[1],h[2],vh.Dt(t,h))},n=function(t,s,i,e,h,r,n){const o=n.x,a=n.y,u=n.z,l=n.w,c=n.Ug,f=n.Wg,d=n.Qg,p=1-c,m=1-f,g=1-d,y=o*t*c+o*e*p+a*s*f+a*h*m+u*i*d+u*r*g;if(l<=y)return!0;const M=o*e*c+o*t*p+a*h*f+a*s*m+u*r*d+u*i*g;return l<M},h=function(t,s,i,e){const h=e.x,r=e.y,n=e.z,o=e.w,a=h*t+r*s+n*i;return o<=a};e,n,h;const Rs=self.Os,Ps=self.ys,vh=Ps.Cs,Uh=Ps.Gs,xh=Ps.Ts,ks=vh.create(),Fs=vh.create(),js=vh.create(),zs=Uh.create(),Bs=xh.create(),Us=vh.create(),Ws=vh.create(),Qs=vh.create(),Js=vh.create(),Ys=vh.create(),Vs=vh.create(),Hs=vh.create(),qs=vh.create(),Zs=Uh.G(0,0,1,1);Rs.Jg={Yg(t,s,i,e,h,r,n){let o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],u=e[2]*t+e[6]*s+e[10]*i+e[14],l=e[3]*t+e[7]*s+e[11]*i+e[15],c=h[0]*o+h[4]*a+h[8]*u+h[12]*l,f=h[1]*o+h[5]*a+h[9]*u+h[13]*l,d=h[2]*o+h[6]*a+h[10]*u+h[14]*l,p=h[3]*o+h[7]*a+h[11]*u+h[15]*l;return 0!=p&&(f*=p=1/p,d*=p,n[0]=(.5*(c*=p)+.5)*r[2]+r[0],n[1]=(.5*f+.5)*r[3]+r[1],n[2]=.5*(1+d),!0)},Vg(t,s,i,e,h,r,n){const o=Bs,a=zs;return xh.multiply(o,h,e),null!==xh.N(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,Uh.kt(a,a,o),0!==a[3])&&(a[3]=1/a[3],n[0]=a[0]*a[3],n[1]=a[1]*a[3],n[2]=a[2]*a[3],!0)},Hg(t,s,i,e,h,r,n){const o=ks,a=Fs;if(!Rs.Jg.Vg(t,s,0,e,h,r,o))return!1;if(!Rs.Jg.Vg(t,s,1,e,h,r,a))return!1;let u=Fs,l=(vh.F(u,a,o),js),c=(vh.set(l,0,0,1),-i),f=vh.Dt(l,u),d=0;if(0===f){const p=vh.Dt(l,o)+c;if(0!==p)return!1}else if((d=-(vh.Dt(o,l)+c)/f)<0)return!1;return vh.Gt(n,o,u,d),!0}};class Xs{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Ug=NaN,this.Wg=NaN,this.Qg=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.Ug=0<t?1:0,this.Wg=0<s?1:0,this.Qg=0<i?1:0}}Rs.Jg.qg=class{constructor(){this.Zg=new Xs,this.Xg=new Xs,this.Kg=new Xs,this.$g=new Xs,this.ty=new Xs,this.iy=new Xs}ey(t,s){const i=Zs;Rs.Jg.Vg(0,1,0,t,s,i,Us),Rs.Jg.Vg(1,1,0,t,s,i,Ws),Rs.Jg.Vg(0,0,0,t,s,i,Qs),Rs.Jg.Vg(1,0,0,t,s,i,Js),Rs.Jg.Vg(0,1,1,t,s,i,Ys),Rs.Jg.Vg(1,1,1,t,s,i,Vs),Rs.Jg.Vg(0,0,1,t,s,i,Hs),Rs.Jg.Vg(1,0,1,t,s,i,qs),e(Qs,Us,Ys,this.Zg),e(Us,Ws,Vs,this.Xg),e(Ws,Js,qs,this.Kg),e(Js,Qs,Hs,this.$g),e(Hs,Ys,Vs,this.iy),e(Js,Ws,Us,this.ty)}hy(t,s,i,e,h,r){return n(t,s,i,e,h,r,this.Zg)&&n(t,s,i,e,h,r,this.Xg)&&n(t,s,i,e,h,r,this.Kg)&&n(t,s,i,e,h,r,this.$g)&&n(t,s,i,e,h,r,this.ty)&&n(t,s,i,e,h,r,this.iy)}ny(t,s,i){return!h(t,s,i,this.ty)}}}{const Ks=self.Os,$s=self.ys,vh=$s.Cs,Uh=$s.Gs,xh=$s.Ts,ti=xh.create(),si=vh.G(0,0,0),ii=vh.G(0,0,0),ei=vh.G(0,0,0),hi=vh.G(0,1,0),ri=(Uh.G(0,0,0,0),new Ks.Qu),ni=new Ks.Rect,oi=new Ks.Qu(0,0,1,0,1,1,0,1),ai={oy:1,uy:1e4},ui=xh.G(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Ks.Jg.ly=class{constructor(t){t=Object.assign({},ai,t),this.Fm=0,this.jm=0,this.my=Ks.dr(45),this.gy=Math.tan(this.my/2),this.yy=xh.create(),this.My=xh.create(),this.wy=!1,this.Sy=t.oy,this.Ty=t.uy,this.by=[],this.xy=new Map,this.vy=null,this.Cy=null,this.Gy=null,this.Iy=null,this.Ny=null,this.Ey=null,this._y=null,this.Dy=null,this.Ay=null,this.Ly=null,this.Oy=null,this.Ry=null,this.Py=new Map,this.ky=null,this.Fy=[],this.jy=new Map,this.zy=0,this.By=0,this.Uy=1,this.Wy=[this.Uy],this.Qy=1,this.Jy=[this.Qy],this.Yy=.5,this.Vy=[this.Yy],this.Hy=0,this.qy=!0,this.Zy=!1}Xy(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}Ky(){this.zy=0,this.By=0,this.vy=null,this.Cy=null,this.Gy=null,this.Iy=null,this.Ny=null,this.Ey=null,this._y=null,this.Dy=null,this.Ay=null,this.Ly=null,this.Oy=null,this.Ry=null,this.$y()}tM(){this.Ky(),this.ky=null}sM(){for(const t of this.by)t.er();this.Ky()}Xp(){return this.Fm}um(){return this.jm}iM(t){return this.eM()?100:t/(2*this.hM())}rM(t){if(this.eM()){const s=t/(2*this.hM());return s/this.iM(t)}return 1}nM(t){this.Sy=t}oM(){return this.Sy}aM(t){this.Ty=t}uM(){return this.Ty}lM(t){this.my=t,this.gy=Math.tan(this.my/2)}cM(){return this.my}hM(){return this.gy}fM(){this.wy=!1}dM(){this.wy=!0}eM(){return!this.wy}pM(){return this.wy}mM(t,s,i=.5,e=.5){const h=this.oM(),r=this.uM(),n=this.cM();if(.5===i&&.5===e)this.gM()?xh.Mt(t,n,s,h,r):xh.perspective(t,n,s,h,r);else{const o=2*(i=1-i)-2,a=2*i,u=2*e-2,l=2*e,c=this.hM()*h,f=c*s;xh.gt(t,o*f,a*f,u*c,l*c,h,r),this.gM()&&xh.mul(t,ui,t)}}yM(t,s,i,e=1){const h=self.devicePixelRatio,r=2*this.iM(i)*h*this.hM()/i,n=s*r/(2*h*e),o=i*r/(2*h*e),a=-n,u=n,l=-o,c=o;this.gM()?xh.bt(t,a,u,l,c,this.oM(),this.uM()):xh.ortho(t,a,u,l,c,this.oM(),this.uM())}MM(t,s,i,e,h,r=1){let n=1;this.eM()&&(n=200*this.hM()/h);const o=ei,a=(vh.set(o,n,-n,1),si),u=ii;vh.multiply(a,s,o),vh.multiply(u,i,o),xh.xt(t,a,u,e||hi),o[2]=r,xh.scale(t,t,o)}wM(t,s,i,e,h,r,n,o){return vh.set(si,t,s,i),vh.set(ii,e,h,r),this.MM(ti,si,ii,hi,n,o),ti}SM(t){this.by.push(t),this.xy.set(t.Uc(),t)}TM(t){const s=this.by.indexOf(t);-1!==s&&this.by.splice(s,1),this.xy.delete(t.Uc())}$y(){Ks.Dn(this.by),this.xy.clear()}bM(t){return this.xy.get(t)||null}xM(){return this.vy}vM(){this.CM(this.vy)}GM(){return this.Cy}IM(){this.CM(this.Cy)}NM(){this.CM(this.Gy)}EM(){this.CM(this.Iy)}_M(){this.CM(this.Ny)}DM(){this.CM(this.Ey)}AM(){this.CM(this._y)}LM(){this.CM(this.Dy)}OM(){this.CM(this.Ay)}RM(){this.CM(this.Ly)}PM(){this.CM(this.Oy)}kM(){this.CM(this.Ry)}FM(t){this.ky=t}jM(){return this.ky}zM(t,s,i,e){let h=Ks.Jg.UM.BM(t,s,i,e),r=this.Py.get(h);return r||(r=Ks.ir(Ks.Jg.UM,this,t,s,i,e),this.Py.set(h,r)),r.WM(),r}QM(t){t.JM(),0===t.YM()&&(this.ky===t&&(this.ky=null),this.Py.delete(t.VM()),t.er())}HM(t){Ks.Dn(this.Fy),this.jy.clear();let s=0;for(const i of t){const e=i[0],h=i[1],r=i[2];this.Fy.push([h,r]),this.jy.set(e,{number:s,qM:h,ZM:r}),s++}}XM(t){return this.Fy[t]}KM(t){return this.XM(t)[0]}$M(t){return this.XM(t)[1]}iw(t){const s=this.jy.get(t);if(void 0===s)throw new Error("invalid blend name");return s}ew(t){const s=this.jy.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}hw(t){this.zy=t}rw(){return this.zy}ow(t){this.By=t,this.ky=null}aw(){return this.By}gm(t,s,i,e){const h=Ks.yr(t,s,i,e),r=Math.sin(h),n=Math.cos(h),o=.5*this.Uy,a=r*o,u=n*o,l=this.Qy;2===l?this.uw(t,s,0,i,e,0,a,u):1===l?this.lw(t,s,0,i,e,0,a,u):this.fw(t,s,0,i,e,0,a,u)}dw(t,s,i,e,h,r){const n=Ks.yr(t,s,e,h),o=Math.sin(n),a=Math.cos(n),u=.5*this.Uy,l=o*u,c=a*u,f=this.Qy;2===f?this.uw(t,s,i,e,h,r,l,c):1===f?this.lw(t,s,i,e,h,r,l,c):this.fw(t,s,i,e,h,r,l,c)}uw(t,s,i,e,h,r,n,o){const a=this.Yy,u=t+a-o,l=s+a-n,c=e+a+o,f=h+a+n,d=2*o,p=2*n,m=u+n,g=l-o,y=u-n+d,M=l+o+p,w=c+n,S=f-o,T=c-n-d,b=f+o-p;this.pw(m,g,i,w,S,r,T,b,r,y,M,i,oi)}lw(t,s,i,e,h,r,n,o){const a=this.Yy,u=t+a-o,l=s+a-n,c=e+a+o,f=h+a+n,d=u+n,p=l-o,m=u-n,g=l+o,y=c+n,M=f-o,w=c-n,S=f+o;this.pw(d,p,i,y,M,r,w,S,r,m,g,i,oi)}fw(t,s,i,e,h,r,n,o){const a=this.Yy,u=t+a,l=s+a,c=e+a,f=h+a,d=u+n,p=l-o,m=u-n,g=l+o,y=c+n,M=f-o,w=c-n,S=f+o;this.pw(d,p,i,y,M,r,w,S,r,m,g,i,oi)}mw(t,s,i,e,h,r){const n=Ks.yr(t,s,i,e),o=Math.sin(n),a=Math.cos(n),u=.5*this.Uy,l=o*u,c=a*u,f=this.Qy;2===f?this.gw(t,s,i,e,l,c,h,r):1===f?this.yw(t,s,i,e,l,c,h,r):this.Mw(t,s,i,e,l,c,h,r)}gw(t,s,i,e,h,r,n,o){const a=this.Yy,u=t+a-r,l=s+a-h,c=i+a+r,f=e+a+h,d=2*r,p=2*h,m=u+h,g=l-r,y=u-h+d,M=l+r+p,w=c+h,S=f-r,T=c-h-d,b=f+r-p;ri.set(m,g,w,S,T,b,y,M),ni.set(n,0,o,0),this.ww(ri,ni)}yw(t,s,i,e,h,r,n,o){const a=this.Yy,u=t+a-r,l=s+a-h,c=i+a+r,f=e+a+h,d=u+h,p=l-r,m=u-h,g=l+r,y=c+h,M=f-r,w=c-h,S=f+r;ri.set(d,p,y,M,w,S,m,g),ni.set(n,0,o,0),this.ww(ri,ni)}Mw(t,s,i,e,h,r,n,o){const a=this.Yy,u=t+a,l=s+a,c=i+a,f=e+a,d=u+h,p=l-r,m=u-h,g=l+r,y=c+h,M=f-r,w=c-h,S=f+r;ri.set(d,p,y,M,w,S,m,g),ni.set(n,0,o,0),this.ww(ri,ni)}Sw(t,s,i,e){const h=.5*this.Uy,r=this.Qy;2===r?this.Tw(t,s,i,e,h):1===r?this.bw(t,s,i,e,h):this.xw(t,s,i,e,h)}Tw(t,s,i,e,h){this.uw(t,s,0,i,s,0,0,h),this.uw(i,s,0,i,e,0,h,0),this.uw(i,e,0,t,e,0,0,-h),this.uw(t,e,0,t,s,0,-h,0)}bw(t,s,i,e,h){this.lw(t,s,0,i,s,0,0,h),this.lw(i,s,0,i,e,0,h,0),this.lw(i,e,0,t,e,0,0,-h),this.lw(t,e,0,t,s,0,-h,0)}xw(t,s,i,e,h){this.fw(t,s,0,i,s,0,0,h),this.fw(i,s,0,i,e,0,h,0),this.fw(i,e,0,t,e,0,0,-h),this.fw(t,e,0,t,s,0,-h,0)}Cw(t){this.Sw(t.pu(),t.mu(),t.gu(),t.yu())}Gw(t){const s=Ks.yr(t.qr(),t.Zr(),t.Xr(),t.Kr()),i=Math.sin(s),e=Math.cos(s),h=.5*this.Uy,r=i*h,n=e*h,o=this.Qy;2===o?this.Iw(t,r,n):1===o?this.Nw(t,r,n):this.Ew(t,r,n)}Iw(t,s,i){this.uw(t.qr(),t.Zr(),0,t.Xr(),t.Kr(),0,s,i),this.uw(t.Xr(),t.Kr(),0,t.$r(),t.tn(),0,i,-s),this.uw(t.$r(),t.tn(),0,t.sn(),t.hn(),0,-s,-i),this.uw(t.sn(),t.hn(),0,t.qr(),t.Zr(),0,-i,s)}Nw(t,s,i){this.lw(t.qr(),t.Zr(),0,t.Xr(),t.Kr(),0,s,i),this.lw(t.Xr(),t.Kr(),0,t.$r(),t.tn(),0,i,-s),this.lw(t.$r(),t.tn(),0,t.sn(),t.hn(),0,-s,-i),this.lw(t.sn(),t.hn(),0,t.qr(),t.Zr(),0,-i,s)}Ew(t,s,i){this.fw(t.qr(),t.Zr(),0,t.Xr(),t.Kr(),0,s,i),this.fw(t.Xr(),t.Kr(),0,t.$r(),t.tn(),0,i,-s),this.fw(t.$r(),t.tn(),0,t.sn(),t.hn(),0,-s,-i),this.fw(t.sn(),t.hn(),0,t.qr(),t.Zr(),0,-i,s)}_w(t){this.Uy=t,this.Wy[this.Wy.length-1]=t}Dw(){return this.Uy}Aw(t){if(100<=this.Wy.length)throw new Error("pushed too many line widths - check push/pop pairs");this.Wy.push(t),this.Uy=t}Lw(){if(this.Wy.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.Wy.pop(),this.Uy=this.Wy.at(-1)}Ow(){this.Qy=0,this.Jy[this.Jy.length-1]=0}Rw(){this.Qy=1,this.Jy[this.Jy.length-1]=0}Pw(){this.Qy=2,this.Jy[this.Jy.length-1]=0}kw(t){if("butt"===t)this.Fw();else if("square"===t)this.jw();else{if("zag"!==t)throw new Error("invalid line cap");this.zw()}}Fw(){if(100<=this.Jy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.Jy.push(0),this.Qy=0}jw(){if(100<=this.Jy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.Jy.push(1),this.Qy=1}zw(){if(100<=this.Jy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.Jy.push(2),this.Qy=2}Bw(){if(this.Jy.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.Jy.pop(),this.Qy=this.Jy.at(-1)}Uw(t){this.Yy=t,this.Vy[this.Vy.length-1]=t}Ww(){return this.Yy}Qw(t){if(100<=this.Vy.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.Vy.push(t),this.Yy=t}Jw(){if(this.Vy.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.Vy.pop(),this.Yy=this.Vy.at(-1)}Yw(s){const t=s.length/2;if(t<3)throw new Error("need at least 3 points");const i=t-2,e=i-1,h=s[0],r=s[1];for(let t=0;t<i;t+=2){const n=2*t,o=s[2+n],a=s[3+n],u=s[4+n],l=s[5+n];if(t===e)this.Vw(h,r,o,a,u,l,u,l);else{const c=s[6+n],f=s[7+n];this.Vw(h,r,o,a,u,l,c,f)}}}Hw(){return 3}qw(){this.Zw(!0),this.Hy++}Xw(){return this.Hy}Kw(){this.Hy++}$w(t){this.qy=!!t}tS(){return this.qy}sS(t){this.Zy=!!t}iS(){return this.Zy}eS(){return!1}gM(){return!1}hS(){}rS(){}nS(){}oS(){return this.hS()+this.rS()+this.nS()}aS(){return Ks.ir(Ks.Jg.uS,this)}}}{const li=self.Os;li.Jg.lS=class{constructor(t,s){this.nr=s.name,this.cS=t,this.fS=s.extendBoxHorizontal||0,this.dS=s.extendBoxVertical||0,this.pS=!!s.crossSampling,this.mS=!!s.mustPreDraw,this.gS=!!s.preservesOpaqueness,this.yS=!!s.supports3dDirectRendering,this.MS=!!s.animated,this.wS=!!s.blendsBackground,this.SS=!!s.usesDepth,this.TS=!1,this.bS=this.pS||this.wS||0!==this.fS||0!==this.dS}er(){this.cS=null}xS(){return this.cS}Uc(){return this.nr}vS(){return 0!==this.fS||0!==this.dS}CS(){return this.fS}GS(){return this.dS}IS(){return this.pS}NS(){return this.mS}ES(){return this.gS}_S(){return this.yS}DS(){return this.MS}AS(){return this.wS}LS(){return this.SS}OS(){return this.TS}RS(){return this.bS}PS(){return!1}}}{const ci=self.Os;ci.Jg.UM=class{constructor(t,s,i,e,h){this.cS=t,this.od=0,this.kS=null,this.FS="",this.jS=i,this.zS=ci.ir(ci.Ro),this.zS.set(e),this.BS=h,"string"==typeof s?this.FS=s:(this.kS=s,this.FS=this.kS.Uc())}er(){if(0<this.od)throw new Error("releasing state group still in use");this.cS=null,this.kS=null,this.FS=""}US(){const t=this.cS;t.CM(this.kS),t.WS(this.jS),t.QS(this.zS),t.ow(this.BS),t.FM(this)}VM(){return ci.Jg.UM.BM(this.FS,this.jS,this.zS,this.BS)}WM(){++this.od}JM(){--this.od}YM(){return this.od}JS(){this.kS=null}YS(t){if(this.kS=t.bM(this.FS),!this.kS)throw new Error("failed to restore shader program")}static BM(t,s,i,e){const h="string"==typeof t?t:t.Uc();return h+","+s+","+i.qo()+","+i.Zo()+","+i.Xo()+","+i.Ko()+","+e}}}{let e=function(t,s,i){const e=i.qr(),h=i.Zr(),r=i.Xr()-e,n=i.Kr()-h,o=i.sn()-e,a=i.hn()-h,u=r*t,l=n*t,c=o*s,f=a*s;return[e+u+c,h+l+f]};e;const G=self.Os,fi=G.ir(G.Qu);G.Jg.VS=class{constructor(t,s,i){this.HS=t,this.qS=s,this.ZS=i,this.Ja=NaN,this.Ya=NaN,this.BS=NaN,this.XS=NaN,this.KS=NaN,this.Ja=0,this.Ya=0,this.BS=0,this.XS=0,this.KS=0}$S(t,s,i,e){this.Ja=t,this.Ya=s,this.XS=i,this.KS=e}tT(){return this.Ja}sT(t){this.Ja!==t&&(this.Ja=t,this.HS.iT())}eT(){return this.Ya}hT(t){this.Ya!==t&&(this.Ya=t,this.HS.iT())}rT(){return this.BS}nT(t){this.BS!==t&&(this.BS=Math.max(t,0),this.HS.iT())}oT(){return this.XS}aT(t){this.XS=t}uT(){return this.KS}lT(t){this.KS=t}cT(t,s,i){[this.Ja,this.Ya]=e(t.Ja,t.Ya,s),this.BS=t.BS,this.XS=G.Lt(i.pu(),i.gu(),t.XS),this.KS=G.Lt(i.mu(),i.yu(),t.KS)}fT(t,s,i){[this.Ja,this.Ya]=e(t.Ja,t.Ya,s),this.BS=t.BS,[this.XS,this.KS]=e(t.XS,t.KS,i)}dT(){return{x:this.tT(),y:this.eT(),z:this.rT(),u:this.oT(),v:this.uT()}}pT(t){this.sT(t.x),this.hT(t.y),t.hasOwnProperty("z")&&this.nT(t.z),this.aT(t.u),this.lT(t.v)}mT(){return this.HS}gT(){return this.qS}yT(){return this.ZS}},G.Jg.MT=class{constructor(i,t,s){if(i<2||t<2)throw new Error("invalid mesh size");this.wT=i,this.ST=t,this.TT=s||null,this.bT=[],this.xT=0,this.vT=0,this.CT=1,this.GT=1,this.IT=0,this.NT=!1;const e=i-1,h=t-1;for(let s=0;s<t;++s){const r=[];for(let t=0;t<i;++t){const n=G.ir(G.Jg.VS,this,t,s),o=t/e,a=s/h;n.$S(o,a,o,a),r.push(n)}this.bT.push(r)}}er(){G.Dn(this.bT)}ET(){return this.wT}_T(){return this.ST}DT(){return this.TT}AT(){return this.bT}iT(){this.NT=!0}LT(){if(this.NT){let t=1/0,s=1/0,i=-1/0,e=-1/0,h=0;for(const r of this.bT)for(const n of r){const o=n.tT(),a=n.eT();t=Math.min(t,o),s=Math.min(s,a),i=Math.max(i,o),e=Math.max(e,a),h=Math.max(h,n.rT())}this.xT=t,this.vT=s,this.CT=i,this.GT=e,this.IT=h,this.NT=!1}}OT(){return this.LT(),this.xT}RT(){return this.LT(),this.vT}PT(){return this.LT(),this.CT}kT(){return this.LT(),this.GT}FT(){return this.LT(),this.IT}jT(){return 0<this.FT()}zT(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.wT||s<0||s>=this.ST?null:this.bT[s][t]}BT(t,i,e){const h=e instanceof G.Rect;if(t.ET()!==this.ET()||t._T()!==this._T())throw new Error("source mesh wrong size");const r=t.bT,n=this.bT;for(let t=0,s=n.length;t<s;++t){const o=r[t],a=n[t];for(let t=0,s=a.length;t<s;++t){const u=o[t],l=a[t];h?l.cT(u,i,e):l.fT(u,i,e)}}}UT(r){let n=this.bT,o=n[0];for(let t=1,s=n.length;t<s;++t){let i=n[t],e=o[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const a=o[t],u=i[t];fi.set(e.oT(),e.uT(),a.oT(),a.uT(),u.oT(),u.uT(),h.oT(),h.uT()),r.pw(e.tT(),e.eT(),e.rT(),a.tT(),a.eT(),a.rT(),u.tT(),u.eT(),u.rT(),h.tT(),h.eT(),h.rT(),fi),e=a,h=u}o=i}}WT(o,a){a=a||((t,s,i)=>[t,s,i]);let t=this.bT,u=t[0];for(let r=1,n=t.length;r<n;++r){let i=t[r],e=u[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const l=u[t],c=i[t],[f,d,p]=a(e.tT(),e.eT(),e.rT()),[m,g,y]=a(l.tT(),l.eT(),l.rT()),[M,w,S]=a(c.tT(),c.eT(),c.rT()),[T,b,x]=a(h.tT(),h.eT(),h.rT());o.dw(f,d,p,m,g,y),o.dw(f,d,p,M,w,S),o.dw(f,d,p,T,b,x),t===s-1&&o.dw(m,g,y,M,w,S),r===n-1&&o.dw(T,b,x,M,w,S),e=l,h=c}u=i}}QT(t){let i=.99999999,e=t.El(),h=[],r=this.ET()-1,n=this._T()-1,o=1/r,a=1/n,u=r-1,l=n-1,c=e[0],f=e[1],d=G.lr(Math.floor(c*r),0,u),p=G.lr(Math.floor(f*n),0,l),m=!0,g=0,y=0,M=0,w=-1,S=()=>{c=G.lr(G.Lt(c,g,M),0,1),f=G.lr(G.Lt(f,y,M),0,1),h.push(c,f)};for(let t=0,s=e.length;t<s;t+=2){c=e[t],f=e[t+1],h.push(c,f),d=G.lr(Math.floor(c*r),0,u),p=G.lr(Math.floor(f*n),0,l);const T=(t+2)%s;for(g=e[T],y=e[1+T],w=-1;;){if(1e6<h.length)throw new Error("Too many mesh poly points");const b=d*o,x=p*a,v=(d+1)*o,C=(p+1)*a;if(m=G.un(c,f,b,x,v,x,v,C),0!==w&&0<=(M=G.an(c,f,g,y,b,x,v,C,-.001))&&M<=i)S(),m=!m,w=0;else if(0<p&&2!==w&&0<=(M=G.an(c,f,g,y,b,x,v,x,.001))&&M<=i)S(),p--,m=!1,w=4;else if(d<u&&3!==w&&0<=(M=G.an(c,f,g,y,v,x,v,C,.001))&&M<=i)S(),d++,m=!1,w=1;else if(0<d&&1!==w&&0<=(M=G.an(c,f,g,y,b,x,b,C,.001))&&M<=i)S(),d--,m=!0,w=3;else{if(!(p<l&&4!==w&&0<=(M=G.an(c,f,g,y,b,C,v,C,.001))&&M<=i))break;S(),p++,m=!0,w=2}}}return G.ir(G.vl,h)}JT(t,s){const i=this.YT(t);this.VT(i),s.Dl(i)}YT(t){const i=[],e=t.El();for(let t=0,s=e.length;t<s;t+=2){const h=e[t],r=e[t+1],[n,o]=this.HT(h,r);i.push(n,o)}return i}HT(t,s){const i=this.ET()-1,e=this._T()-1,h=1/i,r=1/e,n=G.lr(Math.floor(t*i),0,i-1),o=G.lr(Math.floor(s*e),0,e-1),a=n*h,u=o*r,l=(n+1)*h,c=(o+1)*r,f=this.zT(n,o),d=this.zT(n+1,o+1),p=G.un(t,s,a,u,l,u,l,c),m=p?a+h:a,g=p?u:u+r,y=this.zT(n+(p?1:0),o+(p?0:1)),[M,w,S]=G.ln(t,s,a,u,m,g,l,c);return G.cn(M,w,S,f.tT(),f.eT(),f.rT(),y.tT(),y.eT(),y.rT(),d.tT(),d.eT(),d.rT())}VT(i){let e=[],h=i[0],r=i[1],n=h-i.at(-2),o=r-i.at(-1);for(let t=0,s=i.length;t<s;t+=2){const a=(t+2)%s,u=i[a],l=i[1+a],c=u-h,f=l-r,d=Math.abs(c)<1e-7&&Math.abs(n)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(c)===Math.sign(n);(!d&&!p&&.001<Math.abs(c/n-f/o)||0==c&&0==f)&&e.push(h,r),h=u,r=l,n=c,o=f}6<=e.length&&e.length<i.length&&G.Rn(i,e)}dT(){return{cols:this.ET(),rows:this._T(),points:this.bT.map(t=>t.map(t=>t.dT()))}}pT(t){const i=this.ET(),e=this._T();if(t.cols!==i||t.rows!==e)throw new Error("mesh data wrong size");const h=t.points;for(let s=0;s<e;++s){const r=h[s];for(let t=0;t<i;++t){const n=this.zT(t,s);n.pT(r[t])}}}}}{let d=function(t,s){let i,e,h,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,h=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,h=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{qT:i,ZT:e,format:h,type:r}};d;const di=self.Os,pi=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),mi=new Set(["nearest","bilinear","trilinear"]),gi=new Set(["default","low","high"]),yi=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Mi={XT:"clamp-to-edge",KT:"clamp-to-edge",$T:"trilinear",t2:0,s2:"rgba8",i2:!0,e2:"default",premultiplyAlpha:!0,h2:!1,width:-1,height:-1},wi={premultiplyAlpha:!0,flipY:!1},Si=new Set;di.Jg.n2=class{constructor(t){this.cS=t,this.o2=null,this.Fm=0,this.jm=0,this.a2=!0,this.u2="clamp-to-edge",this.l2="clamp-to-edge",this.c2="trilinear",this.f2=0,this.d2="rgba8",this.m2=!1,this.g2="default",this.od=0}M2(s,t){if(!("undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&s instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&s instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas||s instanceof ImageData||s instanceof ArrayBuffer||null===s))throw new Error("invalid texture source");if(t=Object.assign({},Mi,t),this.o2)throw new Error("already created texture");if(this.u2=t.XT,this.l2=t.KT,this.c2=t.$T,this.f2=t.t2,this.d2=t.s2,this.m2=!!t.i2&&this.cS.tS(),this.g2=t.e2,!yi.has(this.u2)||!yi.has(this.l2))throw new Error("invalid wrap mode");if(!mi.has(this.c2))throw new Error("invalid sampling");if(!pi.has(this.d2))throw new Error("invalid pixel format");if(!gi.has(this.g2))throw new Error("invalid mipmap quality");if(this.a2=!0,s instanceof ArrayBuffer||null===s||t.h2){if(this.Fm=t.width,this.jm=t.height,s instanceof ArrayBuffer&&s.byteLength!==this.Fm*this.jm*4)throw new Error("ArrayBuffer wrong size")}else this.Fm=s.width,this.jm=s.height;if(this.Fm<=0||this.jm<=0)throw new Error("invalid texture data size");if(t.h2){const o=di.xo(this.Fm,this.jm),a=o.getContext("2d");a.drawImage(s,0,0,this.Fm,this.jm),s=o}const i=di.Dr(this.Fm)&&di.Dr(this.jm),e=this.cS.w2();if(this.Fm>e||this.jm>e)throw new Error("texture data exceeds maximum texture size");const h=this.cS.S2(),r=this.cS.T2(),n=(this.o2=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.o2),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1),d(this.d2,h));if(this.cS.b2()||i||!this.v2())if(2<=r){let t;t=this.m2?Math.floor(Math.log2(Math.max(this.Fm,this.jm))+1):1,h.texStorage2D(h.TEXTURE_2D,t,n.qT,this.Fm,this.jm),s instanceof ArrayBuffer?h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.Fm,this.jm,n.format,n.type,new Uint8Array(s)):null!==s&&h.texSubImage2D(h.TEXTURE_2D,0,0,0,n.format,n.type,s)}else s instanceof ArrayBuffer?h.texImage2D(h.TEXTURE_2D,0,n.ZT,this.Fm,this.jm,0,n.format,n.type,new Uint8Array(s)):null===s?h.texImage2D(h.TEXTURE_2D,0,n.ZT,this.Fm,this.jm,0,n.format,n.type,null):h.texImage2D(h.TEXTURE_2D,0,n.ZT,n.format,n.type,s);else{if(null===s)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((s=s instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(s),this.Fm,this.jm):s)instanceof ImageData){const c=di.xo(this.Fm,this.jm),f=c.getContext("2d");f.putImageData(s,0,0),s=c}const u=di.xo(di.Ar(this.Fm),di.Ar(this.jm)),l=u.getContext("2d");l.imageSmoothingEnabled="nearest"!==this.c2,l.drawImage(s,0,0,this.Fm,this.jm,0,0,u.width,u.height),h.texImage2D(h.TEXTURE_2D,0,n.ZT,n.format,n.type,u)}null!==s&&this.C2(h),h.bindTexture(h.TEXTURE_2D,null),this.cS.G2(),this.od=1,Si.add(this)}I2(t,s,i){if(i=Object.assign({},Mi,i),this.o2)throw new Error("already created texture");if(this.u2=i.XT,this.l2=i.KT,this.c2=i.$T,this.d2=i.s2,this.m2=!!i.i2&&this.cS.tS(),this.g2=i.e2,!yi.has(this.u2)||!yi.has(this.l2))throw new Error("invalid wrap mode");if(!mi.has(this.c2))throw new Error("invalid sampling");if(!pi.has(this.d2))throw new Error("invalid pixel format");if(!gi.has(this.g2))throw new Error("invalid mipmap quality");this.a2=!1,this.Fm=Math.floor(t),this.jm=Math.floor(s);const e=di.Dr(this.Fm)&&di.Dr(this.jm),h=this.cS.w2();if(this.Fm<=0||this.jm<=0)throw new Error("invalid texture size");if(this.Fm>h||this.jm>h)throw new Error("texture exceeds maximum texture size");if(!this.cS.b2()&&this.v2()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.cS.S2(),n=this.cS.T2(),o=(this.o2=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.o2),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),d(this.d2,r)),a=2<=n?o.qT:o.ZT;r.texImage2D(r.TEXTURE_2D,0,a,this.Fm,this.jm,0,o.format,o.type,null),this.C2(r),r.bindTexture(r.TEXTURE_2D,null),this.cS.G2(),this.od=1,Si.add(this)}N2(t){if("default"===this.g2)return this.a2?t.NICEST:t.FASTEST;if("low"===this.g2)return t.FASTEST;if("high"===this.g2)return t.NICEST;throw new Error("invalid mipmap quality")}v2(){return"clamp-to-edge"!==this.u2||"clamp-to-edge"!==this.l2}E2(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}C2(t){const s=di.Dr(this.Fm)&&di.Dr(this.jm);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.E2(t,this.u2)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.E2(t,this.l2)),"nearest"===this.c2)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.m2=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.cS.b2())&&this.m2){t.hint(t.GENERATE_MIPMAP_HINT,this.N2(t)),t.generateMipmap(t.TEXTURE_2D);const e="trilinear"===this.c2&&!this.cS.iS();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.m2=!1;const i=this.cS._2();i&&0<this.f2&&"nearest"!==this.c2&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.f2,this.cS.D2()))}A2(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.o2||this.od<=0)throw new Error("texture not created");if(this.a2)throw new Error("cannot update static texture");s=Object.assign({},wi,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,h=this.cS.T2(),r=this.cS.S2(),n=(r.bindTexture(r.TEXTURE_2D,this.o2),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY),d(this.d2,r)),o=2<=h?n.qT:n.ZT;try{if(this.Fm===i&&this.jm===e){const a=di.Dr(this.Fm)&&di.Dr(this.jm);r.texSubImage2D(r.TEXTURE_2D,0,0,0,n.format,n.type,t),(a||this.cS.b2())&&this.m2&&(r.hint(r.GENERATE_MIPMAP_HINT,this.N2(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.Fm=i,this.jm=e;const u=di.Dr(this.Fm)&&di.Dr(this.jm);if(!this.cS.b2()&&this.v2()&&!u)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,n.format,n.type,t),(u||this.cS.b2())&&this.m2&&(r.hint(r.GENERATE_MIPMAP_HINT,this.N2(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.cS.G2()}L2(){if(0<this.od)throw new Error("texture still has references");if(!this.o2)throw new Error("already deleted texture");Si.delete(this);const t=this.cS.S2();t.deleteTexture(this.o2),this.o2=null}O2(){return!!this.o2}R2(){return this.o2}xS(){return this.cS}P2(){this.od++}F2(){if(this.od<=0)throw new Error("no more references");this.od--}j2(){return this.od}Xp(){return this.Fm}um(){return this.jm}z2(){return this.a2}B2(){let t=this.Fm*this.jm;switch(this.d2){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.m2&&(t+=Math.floor(t/3)),t}static JS(){Si.clear()}static U2(){return Si.values()}}}{const Ti=self.Os,bi=self.ys,vh=bi.Cs,xh=bi.Ts,xi=new Set(["nearest","bilinear","trilinear"]),vi={$T:"trilinear",alpha:!0,depth:!1,W2:!0,Q2:!0,J2:0},Ci=new Set;Ti.Jg.Y2=class{constructor(t){this.cS=t,this.V2=null,this.H2=null,this.o2=null,this.q2=null,this.Fm=0,this.jm=0,this.Z2=!0,this.c2="trilinear",this.X2=!0,this.K2=!1,this.tb=!0,this.sb=0,this.ib=xh.create(),this.eb=0,this.hb=0,this.rb=0}nb(t,s,i){i=Object.assign({},vi,i);const e=this.cS.T2();if(this.o2||this.q2)throw new Error("already created render target");if(this.c2=i.$T,this.X2=!!i.alpha,this.K2=!!i.depth,this.tb=!!i.W2,this.Z2=!!i.Q2,this.sb=i.J2,!xi.has(this.c2))throw new Error("invalid sampling");if(0<this.sb&&(e<2||this.tb))throw new Error("invalid use of multisampling");if(e<2&&(this.tb=!0),this.Fm=t,this.jm=s,this.Fm<=0||this.jm<=0)throw new Error("invalid render target size");this.ob();const h=this.cS.S2();if(this.V2=h.createFramebuffer(),this.K2&&(this.H2=h.createFramebuffer()),this.tb){this.o2=this.cS.ab(this.Fm,this.jm,{$T:this.c2,s2:this.X2?"rgba8":"rgb8",i2:!1});const n=this.o2.R2();h.bindFramebuffer(h.FRAMEBUFFER,this.V2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0),this.K2&&(h.bindFramebuffer(h.FRAMEBUFFER,this.H2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0))}else{this.q2=h.createRenderbuffer(),h.bindRenderbuffer(h.RENDERBUFFER,this.q2);const o=this.X2?h.RGBA8:h.RGB8;if(0<this.sb){const a=h.getInternalformatParameter(h.RENDERBUFFER,o,h.SAMPLES);if(a&&a[0]){const u=a[0];this.sb>u&&(this.sb=u)}else this.sb=0}0===this.sb?h.renderbufferStorage(h.RENDERBUFFER,o,this.Fm,this.jm):h.renderbufferStorageMultisample(h.RENDERBUFFER,this.sb,o,this.Fm,this.jm),h.bindFramebuffer(h.FRAMEBUFFER,this.V2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.q2),this.K2&&(h.bindFramebuffer(h.FRAMEBUFFER,this.H2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.q2)),h.bindRenderbuffer(h.RENDERBUFFER,null)}const r=this.cS.ub();this.K2&&r&&(h.bindFramebuffer(h.FRAMEBUFFER,this.V2),this.cS.lb()?h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.TEXTURE_2D,r,0):h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,r)),h.bindFramebuffer(h.FRAMEBUFFER,null),Ci.add(this)}cb(t,s){if(this.Fm!==t||this.jm!==s){this.Fm=t,this.jm=s,this.ob();const i=this.cS.S2(),e=(i.bindFramebuffer(i.FRAMEBUFFER,this.V2),this.o2?this.o2.A2(new ImageData(this.Fm,this.jm)):(i.bindRenderbuffer(i.RENDERBUFFER,this.q2),i.renderbufferStorage(i.RENDERBUFFER,this.X2?i.RGBA8:i.RGB8,this.Fm,this.jm),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.cS.ub());this.K2&&e&&(this.cS.lb()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}}L2(){if(!this.o2&&!this.q2)throw new Error("already deleted render target");Ci.delete(this);const t=this.cS.S2(),s=(this.o2?(t.bindFramebuffer(t.FRAMEBUFFER,this.V2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.K2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.H2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.cS.fb(this.o2),this.o2=null):this.q2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.V2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.K2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.H2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.q2),this.q2=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.cS.T2()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.V2),this.K2&&t.deleteFramebuffer(this.H2),this.cS.pb());s.mb=null,this.V2=s.gb=null}ob(){this.cS.mM(this.ib,this.Fm/this.jm),this.eb=this.cS.cM(),this.hb=this.cS.oM(),this.rb=this.cS.uM()}yb(){return this.V2}Mb(){return this.H2}xS(){return this.cS}wb(){return this.o2}Sb(){return this.cS.cM()===this.eb&&this.cS.oM()===this.hb&&this.cS.uM()===this.rb||this.ob(),this.ib}Tb(){return"nearest"!==this.c2}bb(){return this.X2}xb(){return this.tb}vb(){return this.K2}Xp(){return this.Fm}um(){return this.jm}Cb(){return this.Z2}Gb(){return this.sb}Ib(){const t={$T:this.c2,alpha:this.X2,W2:this.tb};return this.Z2||(t.width=this.Fm,t.height=this.jm),t}Nb(t){return"nearest"!==(t=Object.assign({},vi,t)).$T===this.Tb()&&!!t.alpha===this.bb()&&!!t.depth===this.vb()&&!(2<=this.cS.T2()&&!!t.W2!==this.xb())&&("number"==typeof t.width||"number"==typeof t.height?!this.Cb()&&this.Xp()===Math.floor(t.width)&&this.um()===Math.floor(t.height):this.Cb())}Eb(){return this.o2?this.o2.R2():null}B2(){return this.o2?this.o2.B2():this.Fm*this.jm*(this.X2?4:3)}static async _b(t,s){const i=await t.Db(s,!0);return Ti.Go(i)}static JS(){Ci.clear()}static Ab(){return Ci.values()}static Lb(t,s){for(const i of Ci)i.Cb()&&i.cb(t,s)}}}{const m=self.Os,Gi=self.ys,vh=Gi.Cs,xh=Gi.Ts,Ii=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);m.Jg.Ob=class extends m.Jg.lS{static async Rb(t,s){const i=t.S2(),e=s.src,h=s.Pb,r=s.name,n=i.createShader(i.FRAGMENT_SHADER),o=(i.shaderSource(n,e),i.compileShader(n),i.createShader(i.VERTEX_SHADER)),a=(i.shaderSource(o,h),i.compileShader(o),i.createProgram()),u=(i.attachShader(a,n),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a),t.kb());if(u?await t.Fb(()=>i.getProgramParameter(a,u.COMPLETION_STATUS_KHR)):await m.Cn(5),!i.getShaderParameter(n,i.COMPILE_STATUS)){const c=i.getShaderInfoLog(n);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+c)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const f=i.getShaderInfoLog(o);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const d=i.getProgramInfoLog(a);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+d)}const l=m.kd(i.getProgramInfoLog(a)||"").trim();return l&&!m.Od(l)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,l),i.deleteShader(n),i.deleteShader(o),a}static async jb(t,s){const i=await m.Jg.Ob.Rb(t,s);return new m.Jg.Ob(t,i,s)}constructor(t,s,i){super(t,i);const e=t.S2(),h=t.pb(),r=(t.Zw(),e.useProgram(s),this.zb=e,this.kS=s,this.Bb="<default-device-transform>"===i.name,e.getAttribLocation(s,"aPos")),n=e.getAttribLocation(s,"aTex"),o=(this.Ub=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.Wb),e.vertexAttribPointer(r,t.Hw(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==n&&(e.bindBuffer(e.ARRAY_BUFFER,t.Qb),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(n)),-1!==this.Ub&&(e.bindBuffer(e.ARRAY_BUFFER,t.Jb),e.vertexAttribPointer(this.Ub,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.Ub)),e.bindBuffer(e.ARRAY_BUFFER,null),this.Yb=new m.Jg.Vb(this,"matP","mat4"),this.Hb=new m.Jg.Vb(this,"matMV","mat4"),this.qb=new m.Jg.Vb(this,"color","vec4"),this.Zb=new m.Jg.Vb(this,"samplerFront","sampler"),this.Xb=new m.Jg.Vb(this,"pointTexStart","vec2"),this.Kb=new m.Jg.Vb(this,"pointTexEnd","vec2"),this.$b=new m.Jg.Vb(this,"zElevation","float"),this.tx=new m.Jg.Vb(this,"tileSize","vec2"),this.ix=new m.Jg.Vb(this,"tileSpacing","vec2"),this.hx=new m.Jg.Vb(this,"color2_","vec4"),this.nx=new m.Jg.Vb(this,"outlineThickness","float"),this.ox=new m.Jg.Vb(this,"samplerBack","sampler"),this.ux=new m.Jg.Vb(this,"samplerDepth","sampler"),this.lx=new m.Jg.Vb(this,"destStart","vec2"),this.mx=new m.Jg.Vb(this,"destEnd","vec2"),this.gx=new m.Jg.Vb(this,"srcStart","vec2"),this.yx=new m.Jg.Vb(this,"srcEnd","vec2"),this.Mx=new m.Jg.Vb(this,"srcOriginStart","vec2"),this.wx=new m.Jg.Vb(this,"srcOriginEnd","vec2"),this.Sx=new m.Jg.Vb(this,"pixelSize","vec2"),this.Tx=new m.Jg.Vb(this,"seconds","float"),this.bx=new m.Jg.Vb(this,"devicePixelRatio","float"),this.xx=new m.Jg.Vb(this,"layerScale","float"),this.vx=new m.Jg.Vb(this,"layerAngle","float"),this.Cx=new m.Jg.Vb(this,"layoutStart","vec2"),this.Gx=new m.Jg.Vb(this,"layoutEnd","vec2"),this.Ix=new m.Jg.Vb(this,"zNear","float"),this.Nx=new m.Jg.Vb(this,"zFar","float"),this.Ex=!!(this.Sx._x()||this.Tx._x()||this.ox._x()||this.lx._x()||this.mx._x()||this.gx._x()||this.yx._x()||this.Mx._x()||this.wx._x()||this.bx._x()||this.xx._x()||this.vx._x()||this.Cx._x()||this.Gx._x()),i.parameters||[]);this.Dx=[],this.TS=this.Sx._x()||this.gx._x()||this.yx._x()||this.Mx._x()||this.wx._x(),this.Ax=!1,this.Lx=!1,this.qb.Ox(1,1,1,1),this.hx.Ox(1,1,1,1),this.Zb.Rx(0),this.ox.Rx(1),this.ux.Rx(2),this.Xb.Px(0,0),this.Kb.Px(1,1),this.$b.kx(0),this.tx.Px(0,0),this.ix.Px(0,0),this.lx.Px(0,0),this.mx.Px(1,1),this.gx.Px(0,0),this.yx.Px(0,0),this.Mx.Px(0,0),this.wx.Px(0,0),this.Sx.Px(0,0),this.bx.kx(1),this.Ix.kx(t.oM()),this.Nx.kx(t.uM()),this.xx.kx(1),this.vx.kx(0),this.Tx.kx(0),this.Cx.Px(0,0),this.Gx.Px(0,0),this.nx.kx(1);for(const u of o){const l=u[0],c=u[2],f=new m.Jg.Vb(this,l,c);"color"===c?f.Fx(0,0,0):f.kx(0),this.Dx.push(f)}this.Bb?this.jx(h.zx):(this.Bx(h.zx,!0),this.Ux(h.Wx,!0));const a=h.Qx;e.useProgram(a?a.kS:null)}er(){this.zb.deleteProgram(this.kS),this.kS=null,this.cS.TM(this),this.zb=null,super.er()}Jx(){return this.zb}Yx(){return this.kS}Vx(){return this.Dx.length}Hx(t){return t<0||t>=this.Dx.length?null:this.Dx[t].qx()}Zx(i){for(let t=0,s=i.length;t<s;++t)if(!this.Dx[t].Xx(i[t]))return!1;return!0}Kx(i){for(let t=0,s=i.length;t<s;++t)this.Dx[t].$x(i[t])}tv(t,s,i,e,h,r,n,o,a,u){return!this.ox._x()&&!(this.Sx._x()&&!this.Sx.sv(h,r)||this.lx._x()&&!this.lx.sv(t.pu(),t.mu())||this.mx._x()&&!this.mx.sv(t.gu(),t.yu())||this.bx._x()&&!this.bx.hv(n)||this.xx._x()&&!this.xx.hv(o)||this.vx._x()&&!this.vx.hv(a)||this.gx._x()&&!this.gx.sv(s.pu(),s.mu())||this.yx._x()&&!this.yx.sv(s.gu(),s.yu())||this.Mx._x()&&!this.Mx.sv(i.pu(),i.mu())||this.wx._x()&&!this.wx.sv(i.gu(),i.yu())||this.Cx._x()&&!this.Cx.sv(e.pu(),e.mu())||this.Gx._x()&&!this.Gx.sv(e.mu(),e.yu())||this.Tx._x()&&!this.Tx.hv(u))}rv(t,s,i,e,h,r,n,o,a,u){this.ox._x()||(this.Sx._x()&&this.Sx.nv(h,r),this.lx._x()&&this.lx.nv(t.pu(),t.mu()),this.mx._x()&&this.mx.nv(t.gu(),t.yu()),this.bx._x()&&this.bx.ov(n),this.xx._x()&&this.xx.ov(o),this.vx._x()&&this.vx.ov(a),this.gx._x()&&this.gx.nv(s.pu(),s.mu()),this.yx._x()&&this.yx.nv(s.gu(),s.yu()),this.Mx._x()&&this.Mx.nv(i.pu(),i.mu()),this.wx._x()&&this.wx.nv(i.gu(),i.yu()),this.Cx._x()&&this.Cx.nv(e.pu(),e.mu()),this.Gx._x()&&this.Gx.nv(e.mu(),e.yu()),this.Tx._x()&&this.Tx.ov(u))}Bx(t,s){this.Ax&&!s||this.Bb||(this.Yb._x()&&this.Yb.av(t),this.Ax=!0)}uv(){this.Ax=!1}Ux(t,s){this.Lx&&!s||this.Bb||(this.Hb._x()&&this.Hb.av(t),this.Lx=!0)}lv(){this.Lx=!1}jx(t){if(!this.Bb)throw new Error("not device transform shader");this.Yb.av(t);const s=this.cS,i=s.Xp()/2,e=s.um()/2,h=s.wM(i,e,s.iM(s.um()),i,e,0,s.um());this.Hb.av(h)}cv(t){this.qb._x()&&this.qb.dv(t[0],t[1],t[2],t[3])}static pv(){return Ii}static mv(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static gv(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static yv(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static Mv(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static wv(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Sv(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static Tv(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static bv(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static xv(t,s,i){let e="";return 2<=t?e="#version 300 es\n":(s&&(e="#extension GL_EXT_frag_depth : enable\n"),i&&(e+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),e+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!i?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static vv(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static Cv(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static Gv(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static Iv(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Nv(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Ev(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static _v(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static Dv(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static Av(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static Lv(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static Ov(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static Rv(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static Pv(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const Ni=self.Os,Ei=self.ys,xh=Ei.Ts,_i=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);Ni.Jg.Vb=class{constructor(t,s,i){if(!_i.has(i))throw new Error("invalid uniform type");this.TT=t,this.zb=this.TT.Jx(),this.nr=s,this.rf=i,this.kv="color"===this.rf,this.Fv=this.zb.getUniformLocation(this.TT.Yx(),s),this.jv=!!this.Fv;const e=_i.get(i);this.zv=new Float32Array(e),this.Bv=new Float32Array(e)}er(){this.TT=null,this.zb=null,this.Fv=null}_x(){return this.jv}qx(){return this.rf}Uv(){return this.kv}kx(t){this._x()&&(this.zv[0]=t,this.Bv.set(this.zv),this.zb.uniform1f(this.Fv,t))}Rx(t){this._x()&&(this.zv[0]=t,this.Bv.set(this.zv),this.zb.uniform1i(this.Fv,t))}Px(t,s){this._x()&&(this.zv[0]=t,this.zv[1]=s,this.Bv.set(this.zv),this.zb.uniform2f(this.Fv,t,s))}Fx(t,s,i){this._x()&&(this.zv[0]=t,this.zv[1]=s,this.zv[2]=i,this.Bv.set(this.zv),this.zb.uniform3f(this.Fv,t,s,i))}Ox(t,s,i,e){this._x()&&(this.zv[0]=t,this.zv[1]=s,this.zv[2]=i,this.zv[3]=e,this.Bv.set(this.zv),this.zb.uniform4f(this.Fv,t,s,i,e))}Wv(t){t=Math.fround(t);const s=this.zv;s[0]!==t&&(s[0]=t,this.zb.uniform1f(this.Fv,t))}Qv(t){const s=this.zv;s[0]!==t&&this.zb.uniform1i(this.Fv,s[0]=t)}Jv(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.zv;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.zb.uniform2f(this.Fv,t,s))}Yv(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.zv;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.zb.uniform3f(this.Fv,t,s,i))}dv(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const h=this.zv;h[0]===t&&h[1]===s&&h[2]===i&&h[3]===e||(h[0]=t,h[1]=s,h[2]=i,h[3]=e,this.zb.uniform4f(this.Fv,t,s,i,e))}av(t){const s=this.zv;xh.j(s,t)||(Ni.En(s,t,0),this.zb.uniformMatrix4fv(this.Fv,!1,t))}Xx(t){const s=this.Bv;return this.Uv()?s[0]===Math.fround(t.qo())&&s[1]===Math.fround(t.Zo())&&s[2]===Math.fround(t.Xo()):s[0]===Math.fround(t)}$x(t){const s=this.Bv;this.Uv()?(s[0]=t.qo(),s[1]=t.Zo(),s[2]=t.Xo()):s[0]=t}hv(t){return this.Bv[0]===Math.fround(t)}sv(t,s){const i=this.Bv;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}ov(t){this.Bv[0]=t}nv(t,s){const i=this.Bv;i[0]=t,i[1]=s}}}{const Di=self.Os,Ai=self.ys,Uh=Ai.Gs,xh=Ai.Ts;Di.Jg.Vv=class{constructor(t){this.renderer=t,this.Wx=xh.create(),this.zx=xh.create(),this.mb=null,this.gb=null,this.Hv=!1,this.qv=Uh.G(1,1,1,1),this.Qx=null,this.Zv=new Di.Rect,this.clearColor=Di.ir(Di.Ro,0,0,0,0)}},Di.Jg.Xv=class{constructor(t){const s=new ArrayBuffer(96);this.rf=0,this.Kv=t,this.zb=t.renderer.S2(),this.$v=0,this.tC=0,this.sC=null,this.iC=new Float32Array(s,0,16),this.eC=new Float32Array(s,64,4),this.hC=new Float32Array(s,80,4),this.rC=[]}nC(t,s){this.rf=1,this.$v=t,this.tC=s}oC(){const t=this.zb;t.drawElements(t.TRIANGLES,this.tC,t.UNSIGNED_SHORT,this.$v)}aC(t){this.rf=2,this.sC=t}uC(){const t=this.zb,s=this.sC;t.bindTexture(t.TEXTURE_2D,s?s.R2():null)}lC(t){this.rf=3,t.ta(this.eC,0)}cC(){const t=this.eC,s=this.Kv;Uh.C(s.qv,t),s.Qx.cv(t)}fC(t){this.rf=21,t.ta(this.eC,0)}dC(){const t=this.eC,s=this.Kv.Qx;s.hx._x()&&s.hx.dv(t[0],t[1],t[2],t[3])}pC(t,s){this.rf=4,this.$v=t,this.tC=s}mC(){this.zb.blendFunc(this.$v,this.tC)}gC(t,s,i,e){this.rf=5;const h=this.eC;h[0]=t,h[1]=s,h[2]=i,h[3]=e}yC(){const t=this.eC;this.zb.viewport(t[0],t[1],t[2],t[3])}MC(t){this.rf=6,xh.C(this.iC,t)}wC(){const t=this.Kv,i=t.renderer.by,e=t.Qx,h=this.iC;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.Bx(h,!0):r.uv()}xh.C(t.zx,h)}SC(t){this.rf=7,xh.C(this.iC,t)}TC(){const t=this.Kv,i=t.renderer.by,e=t.Qx,h=this.iC;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.Ux(h,!0):r.lv()}xh.C(t.Wx,h)}bC(t){this.rf=8,this.sC=t}xC(){const t=this.zb,s=this.sC,i=this.Kv;s?(i.mb=s.yb(),i.gb=s.Mb(),i.Hv&&i.gb?t.bindFramebuffer(t.FRAMEBUFFER,i.gb):t.bindFramebuffer(t.FRAMEBUFFER,i.mb)):(i.mb=null,i.gb=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}vC(t){this.rf=9,t.ta(this.iC,0)}CC(t,s,i,e){this.rf=9;const h=this.iC;h[0]=t,h[1]=s,h[2]=i,h[3]=e}GC(){const t=this.zb,s=this.iC,i=this.Kv,e=i.clearColor,h=s[0],r=s[1],n=s[2],o=s[3];e.oa(h,r,n,o)||(t.clearColor(h,r,n,o),e.zo(h,r,n,o)),t.clear(t.COLOR_BUFFER_BIT)}IC(t){this.rf=15,t.ta(this.iC,0)}NC(){const t=this.iC;this.Kv.Zv.set(t[0],t[1],t[2],t[3])}EC(t,s){this.rf=10,this.$v=t,this.tC=1,this.iC[0]=s}_C(){const t=this.zb,s=this.Kv,i=s.renderer,e=i.Cy,h=(t.useProgram(e.kS),e.Bx(s.zx,!1),e.Ux(s.Wx,!1),s.Zv),r=(e.Xb._x()&&e.Xb.Jv(h.pu(),h.mu()),e.Kb._x()&&e.Kb.Jv(h.gu(),h.yu()),this.iC[0]);if(e.$b._x()&&e.$b.Wv(r),e.qb._x()){const n=s.qv;e.qb.dv(n[0],n[1],n[2],n[3])}t.drawArrays(t.POINTS,this.$v/4,this.tC),t.useProgram(s.Qx.kS)}DC(t){this.rf=11,this.sC=t}AC(){const t=this.zb,s=this.Kv,i=this.sC;if(s.Qx=i,t.useProgram(i.kS),i.Bx(s.zx,!1),i.Ux(s.Wx,!1),i.qb._x()){const e=s.qv;i.qb.dv(e[0],e[1],e[2],e[3])}}LC(){this.rf=12}OC(){const t=this.Kv.Qx,s=this.zb,i=this.iC,e=this.eC,h=this.hC;if(t.ox._x()){const r=this.Kv.renderer,n=this.sC;r.RC!==n&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,n?n.R2():null),r.RC=n,s.activeTexture(s.TEXTURE0))}t.Sx._x()&&t.Sx.Jv(i[0],i[1]),t.lx._x()&&t.lx.Jv(i[2],i[3]),t.mx._x()&&t.mx.Jv(i[4],i[5]),t.bx._x()&&t.bx.Wv(this.tC),t.xx._x()&&t.xx.Wv(i[6]),t.vx._x()&&t.vx.Wv(i[7]),t.gx._x()&&t.gx.Jv(i[12],i[13]),t.yx._x()&&t.yx.Jv(i[14],i[15]),t.Mx._x()&&t.Mx.Jv(h[0],h[1]),t.wx._x()&&t.wx.Jv(h[2],h[3]),t.Cx._x()&&t.Cx.Jv(e[0],e[1]),t.Gx._x()&&t.Gx.Jv(e[2],e[3]),t.Tx._x()&&t.Tx.Wv(this.$v)}PC(){this.rf=13}kC(){const t=this.Kv.Qx,i=t.Dx,e=this.rC;for(let t=0,s=i.length;t<s;++t){const h=i[t],r=e[t];h.Uv()?h.Yv(r.qo(),r.Zo(),r.Xo()):h.Wv(r)}}FC(t){this.rf=14,this.sC=t}jC(){const t=this.zb,s=this.sC,i=this.Kv.mb;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}zC(t,s,i){this.rf=17;const e=this.iC,h=this.Kv.renderer,r=(e[0]=t.Xp(),e[1]=t.um(),e[2]=(s||h).Xp(),e[3]=(s||h).um(),e[4]=t.Tb()?1:0,e[5]="stretch"===i,this.rC);Di.Dn(r),r.push(t.yb()),r.push(s?s.yb():null)}BC(){const t=this.iC,s=this.rC,i=this.zb,e=t[0],h=t[1],r=t[2],n=t[3],o=0!==t[4],a=0!==t[5],u=s[0],l=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,u),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,l),a)i.blitFramebuffer(0,0,e,h,0,0,r,n,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const c=Math.min(e,r),f=Math.min(h,n),d=Math.max(h-n,0),p=Math.max(n-h,0);i.blitFramebuffer(0,d,c,f+d,0,p,c,f+p,i.COLOR_BUFFER_BIT,i.NEAREST)}}UC(t){this.rf=18,this.sC=t}WC(){this.sC.QC(),this.sC=null}JC(t){this.rf=19,this.sC=t}YC(){this.sC.VC(),this.sC=null}HC(t,s,i){this.rf=20;const e=this.iC;e[0]=t,e[1]=s,e[2]=i}qC(){const t=this.Kv.Qx,s=this.iC;t.Sx._x()&&t.Sx.Jv(s[0],s[1]),t.nx._x()&&t.nx.Wv(s[2])}ZC(t,s,i,e,h,r,n){this.rf=16;const o=this.iC;t.ta(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=h/i,o[8]=r/s,o[9]=n/i}XC(){const t=this.Kv.Qx,s=this.iC;t.gx._x()&&t.gx.Jv(s[0],s[1]),t.Sx._x()&&t.Sx.Jv(s[4],s[5]),t.tx._x()&&t.tx.Jv(s[6],s[7]),t.ix._x()&&t.ix.Jv(s[8],s[9])}KC(t,s,i,e,h,r,n){this.rf=29;const o=this.iC;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=h,o[5]=r,o[6]=n}$C(){const t=this.Kv.Qx,s=this.iC;t.Sx._x()&&t.Sx.Jv(s[0],s[1]),t.tx._x()&&t.tx.Jv(s[2],s[3]),t.nx._x()&&t.nx.Wv(s[4]),t.ix._x()&&t.ix.Jv(s[5],s[6])}tG(t){this.rf=22,this.$v=t?1:0}sG(){const t=this.zb,s=0!==this.$v;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}iG(t){this.rf=23,this.$v=t?1:0}eG(){const t=this.zb;0===this.$v?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}hG(t){this.rf=24,this.$v=t?1:0}rG(){const t=this.zb,s=this.Kv,i=s.renderer,e=0!==this.$v;s.Hv=e,t.activeTexture(t.TEXTURE2),e?(s.gb&&t.bindFramebuffer(t.FRAMEBUFFER,s.gb),t.bindTexture(t.TEXTURE_2D,i.ub())):(t.bindTexture(t.TEXTURE_2D,null),s.gb&&t.bindFramebuffer(t.FRAMEBUFFER,s.mb)),t.activeTexture(t.TEXTURE0)}nG(){this.rf=25}oG(){const t=this.zb;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}aG(){this.rf=26}uG(){const t=this.zb;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}lG(){this.rf=27}cG(){const t=this.zb;t.disable(t.STENCIL_TEST)}fG(t,s,i,e,h){this.rf=28,this.$v=t?1:0;const r=this.iC;r[0]=s,r[1]=i,r[2]=e,r[3]=h}dG(){const t=this.zb,s=this.iC;1===this.$v?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}pG(){switch(this.rf){case 1:return void this.oC();case 2:return void this.uC();case 3:return void this.cC();case 4:return void this.mC();case 5:return void this.yC();case 6:return void this.wC();case 7:return void this.TC();case 8:return void this.xC();case 9:return void this.GC();case 10:return void this._C();case 11:return void this.AC();case 12:return void this.OC();case 13:return void this.kC();case 14:return void this.jC();case 15:return void this.NC();case 16:return void this.XC();case 17:return void this.BC();case 18:return void this.WC();case 19:return void this.YC();case 20:return void this.qC();case 21:return void this.dC();case 22:return void this.sG();case 23:return void this.eG();case 24:return void this.rG();case 25:return void this.oG();case 26:return void this.uG();case 27:return void this.cG();case 28:return void this.dG();case 29:return void this.$C()}}}}{let I=function(t,s,i,e,h,r){s?t.strokeRect(i,e,h,r):t.fillRect(i,e,h,r)},t=function(t){return t*(4/3)},o=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};I,t,o;const Li=self.Os,Oi=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Ri={timeout:60},Pi=new Li.Ro(0,0,0,1),ki=new Set(["left","center","right"]),Fi=new Set(["top","center","bottom"]),ji=new Set(["word","cjk","character"]),zi=new Set(["ltr","rtl"]),Bi=new Set;Li.FontManager&&Li.FontManager.addEventListener("fontload",t=>{const s=t.font.Uc();for(const i of Bi)(i.mG()||Li.dh(i.gG(),s))&&i.yG()});let s=!1,i=!1;Li.Jg.uS=class{constructor(t,s){s=Object.assign({},Ri,s),this.cS=t,this.MG="Arial",this.wG=16,this.SG=1,this.TG=0,this.bG=!1,this.xG=!1,this.vG="black",this.CG=!1,this.Yp=null,this.GG=!0,this.IG=null,this.NG=new Set,this.EG="left",this._G="top",this.Xc="",this.DG=null,this.AG=Li.ir(Li.Qp),this.LG="word",this.OG="ltr",this.PG=!1,this.kG=!1,this.FG=!1,this.jG=-1,this.zG=0,this.BG=0,this.UG=0,this.Fm=0,this.jm=0,this.WG=1,this.QG=null,this.JG=null,this.YG=null,this.VG=null,this.HG=-1,this.qG=-1,this.ZG="",this.XG="",this.KG="",this.$G=1,this.tI=1,this.sI=t=>this.iI(t),this.o2=null,this.eI=new Li.Rect,this.hI=1,this.rI=new Li.Hf(()=>{this.nI(),this.oI(8,8)},s.timeout),this.aI=null,this.uI=!1,Bi.add(this)}er(){this.IG=null,this.NG.clear(),this.Yp=null,this.DG=null,this.QG=null,this.JG=null,this.YG=null,this.VG=null,this.sI=null,this.rI.er(),this.aI=null,this.nI(),this.AG.Jl(),this.AG=null,this.cS=null,this.uI=!0,Bi.delete(this)}lI(){this.FG=!0}cI(){this.lI(),this.kG=!0}yG(){this.cI(),this.PG=!0}fI(t){if(this.CG!==(t=!!t)){this.CG=t;const s=this.CG?"alphabetic":"top";this.JG&&(this.JG.textBaseline=s),this.YG&&(this.YG.textBaseline=s),this.yG()}}mG(){return this.CG}qp(t){this.Yp!==t&&(this.Yp=t,this.AG.qp(t),this.Yp&&this.Yp.Ag()&&this.Yp.Lg().then(()=>this.lI()),this.yG())}dI(t){this.GG!==(t=!!t)&&(this.GG=t,this.lI())}pI(t){this.MG!==(t=t||"serif")&&(this.MG=t,this.yG())}gG(){return this.MG}mI(t){this.wG!==(t=t<.1?.1:t)&&(this.wG=t,this.yG())}gI(){return this.wG}yI(t){this.SG!==t&&(this.SG=t,this.yG())}MI(t){this.TG!==t&&(this.TG=t,this.cI())}wI(){return this.TG}SI(t){this.bG!==(t=!!t)&&(this.bG=t,this.yG())}TI(){return this.bG}bI(t){this.xG!==(t=!!t)&&(this.xG=t,this.yG())}xI(){return this.xG}vI(t){t=Math.floor(t),this.jG!==t&&(this.jG=t,this.lI())}CI(){return this.jG}GI(t,s){let i=[];(this.bG||s.tg("b"))&&i.push("bold"),(this.xG||s.tg("i"))&&i.push("italic");const e=s.$m("size"),h=(e?parseFloat(e.kp):this.wG)*this.SG;i.push(t?h+"pt":h*this.II()+"pt");let r=this.MG,n=s.$m("font");return n&&n.kp&&(r=n.kp,this.IG)&&!this.NG.has(r)&&(this.IG(r),this.NG.add(r)),r&&(Oi.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}QS(t){t instanceof Li.Ro&&(t=t.pa()),this.vG!==t&&(this.vG=t,this.lI())}NI(t,s,i){Pi.Bo(t,s,i),this.QS(Pi)}EI(t){if(!ki.has(t))throw new Error("invalid horizontal alignment");this.EG!==t&&(this.EG=t,this.cI())}_I(){return this.EG}DI(t){if(!Fi.has(t))throw new Error("invalid vertical alignment");this._G!==t&&(this._G=t,this.cI())}AI(){return this._G}LI(t){if(!ji.has(t))throw new Error("invalid word wrap mode");this.LG!==t&&(this.LG=t,this.yG())}OI(){return this.LG}RI(t){if(!zi.has(t))throw new Error("invalid text direction");this.OG!==t&&(this.OG=t,this.JG&&(this.JG.direction=this.OG),this.YG&&(this.YG.direction=this.OG),this.yG())}kI(){return this.OG}tf(t){this.Xc!==t&&(this.Xc=t,this.yG())}FI(){return this.Xc}II(){return this.hI*this.WG*self.devicePixelRatio}jI(r,n,o){if(void 0===o&&(o=1),!(r<=0||this.BG===r&&this.UG===n&&this.WG===o)){let t=this.BG,s=(this.BG=r,this.UG=n,this.WG=o,self.devicePixelRatio),i=(this.Fm=this.BG*this.WG*s,this.jm=this.UG*this.WG*s,Math.max(this.Fm,this.jm)),e=Math.min(this.cS.w2(),4096),h=1;e<i&&(h=e/i,this.Fm=Math.min(this.Fm*h,e),this.jm=Math.min(this.jm*h,e)),this.hI=h,this.BG!==t?this.yG():this.cI()}}Xp(){return this.Fm}um(){return this.jm}zI(){return this.WG}BI(){return this.UI(),this.AG.Pm()}WI(){return this.UI(),this.AG.km()+this.AG.Hp()*(this.TG+4)-this.TG}QI(){this.UI();let t=0;for(const s of this.AG.Vp())for(const i of s.ym())t+=i.Mm();return t}wb(){return this.rI.$f(),this.JI(),this.o2}YI(t,s){this.UI();const i=this.II(),e=this.AG.Vp();for(const h of e){const r=h.fm()*i;if(s>=h.Zm()-h.um()*i+r&&s<h.Zm()+r)for(const n of h.ym())if(t>=n.Hm()&&t<n.Hm()+n.Xp()*i)return n}return null}*VI(t){this.UI();const s=this.AG.Vp();for(const i of s)for(const e of i.ym()){const h=e.$m("tag");h&&Li.dh(h.kp,t)&&(yield e)}}HI(t,s){for(const i of this.VI(t)){if(0===s)return i;--s}return null}qI(t){let s=0;for(const i of this.VI(t))++s;return s}JI(){this.o2&&!this.FG&&!this.kG&&!this.PG||this.uI||this.Fm<=0||this.jm<=0||(this.FG=!1,this.ZI())}ZI(){this.uI||(this.UI(),this.oI(Math.max(Li.Ar(Math.ceil(this.Fm)),128),Math.max(Li.Ar(Math.ceil(this.jm)),64)),this.XI(),this.KI(),this.rI.$f())}oI(t,s){this.QG||(this.QG=Li.xo(16,16));let i=!1;this.HG===t&&this.qG===s||(this.HG=t,this.qG=s,this.QG.width=t,this.QG.height=s,i=!0),this.JG||(this.JG=this.QG.getContext("2d"),i=!0),i?(this.JG.textBaseline=this.CG?"alphabetic":"top",this.JG.direction=this.OG,this.JG.font=this.ZG,this.JG.fillStyle=this.KG,this.JG.strokeStyle=this.KG,this.JG.globalAlpha=this.$G,this.JG.lineWidth=this.tI):this.JG.clearRect(0,0,t,s)}$I(){this.YG||(this.YG=Li.xo(16,16).getContext("2d"),this.VG=Li.xo(16,16).getContext("2d"),this.YG.textBaseline=this.CG?"alphabetic":"top",this.VG.textBaseline="top",this.YG.direction=this.OG,this.VG.direction=this.OG)}tN(t){this.XG!==t&&(this.XG=t,this.YG.font=t,this.VG.font=t)}sN(){if(!s){s=!0,this.$I();const t=this.YG.measureText("test");i="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return i}UI(){this.iN(),this.eN()}iN(){this.PG&&(this.$I(),!this.CG||this.DG&&this.DG.toString()===this.Xc||(this.DG=new Li.Ih(this.Xc,{vp:!0})),this.AG.Qp(this.CG?this.DG.Rp():this.Xc,this.sI,this.BG,this.LG,0),this.PG=!1)}eN(){this.kG&&(this.hN(),this.kG=!1)}iI(t){let s=t.rm()?t.Gm().join(""):" ",i=(this.tN(this.GI(!0,t)),t.$m("size")),e=(i?parseFloat(i.kp):this.wG)*this.SG,h=this.YG.measureText(s),r=0;if(this.CG&&this.sN()){const n=this.VG.measureText(s);r=h.fontBoundingBoxAscent-n.fontBoundingBoxAscent}return{width:h.width,height:4/3*e,fontBoundingBoxAscent:h.fontBoundingBoxAscent||0,fontBoundingBoxDescent:h.fontBoundingBoxDescent||0,hm:r}}rN(t){this.ZG!==t&&(this.ZG=t,this.JG.font=t)}nN(t){this.KG!==t&&(this.KG=t,this.JG.fillStyle=t,this.JG.strokeStyle=t)}oN(t){this.$G!==t&&(this.$G=t,this.JG.globalAlpha=t)}aN(t){this.tI!==t&&(this.tI=t,this.JG.lineWidth=t)}hN(){let e=this.II(),h=(4+this.TG)*e,r=0,n=this.AG.Vp();if(0!==n.length){for(const s of n){s.Vm(NaN),s.qm(NaN);for(const o of s.ym())o.Vm(NaN),o.qm(NaN)}let t=this.CG&&this.sN(),i=n[0].um()*e;if("center"===this._G){const a=n.reduce((t,s)=>t+s.um()*e+h,0)-h;r=Math.max(this.jm/2-a/2,0),t&&(i=n[0].dm()*e)}else if("bottom"===this._G){const u=n.reduce((t,s)=>t+s.um()*e+h,0)-this.TG*e,l=t?n.at(-1).fm()*e:0;r=this.jm-u-l-2}for(let t=0,s=n.length;t<s;++t){const c=n[t],f=c.um()*e,d=r;if(this.CG){if(r+=0===t?i:f,0<t&&r>this.jm-4*e)break}else if(0<t&&r>=this.jm-f)break;0<=d&&this.uN(c,r,e),this.CG||(r+=f),r+=h}}}uN(t,s,i){let e=0;"center"===this.EG?e=Math.floor((this.Fm-t.Xp()*i)/2):"right"===this.EG&&(e=this.Fm-t.Xp()*i),t.Vm(e),t.qm(s);for(const h of"ltr"===this.OG?t.ym():t.Jm())this.lN(h,e,s,i),e+=h.Xp()*i}lN(t,s,i,e){const h=t.$m("offsetx"),r=(s+=h?o(h.kp,t.um())*e:0,t.$m("offsety"));if(i+=r?o(r.kp,t.um())*e:0,t.om()){const n=t.$m("iconoffsety");i+=n?o(n.kp,t.um())*e:.2*t.um()*e}t.Vm(s),t.qm(i)}XI(){this.JG.imageSmoothingEnabled=this.GG,this.JG.imageSmoothingQuality="high",this.zG=0;const t=this.II(),s=this.AG.Vp();for(const i of s)this.cN(i,t)}cN(t,s){const i=t.Hm(),e=t.Zm();if(Number.isFinite(i)&&Number.isFinite(e))for(const h of"ltr"===this.OG?t.ym():t.Jm())this.fN(h,s,t.um())}fN(n,o,a){const u=this.JG,l=n.Hm(),c=n.Zm();if(Number.isFinite(l)&&Number.isFinite(c)){let t=a/16,s=n.Xp()*o,i=n.um()*o,e=n.um()/16,h=(4+this.TG)*o,r=n.rm()?n.Gm():null;if(-1!==this.jG){if(this.zG>=this.jG)return;n.rm()&&this.zG+r.length>this.jG&&(r=r.slice(0,this.jG-this.zG),s=this.iI(n).width*o),this.zG+=n.Mm()}const f=n.$m("background"),d=n.tg("u"),p=n.tg("s");if((!n.rm()||!Li.Rd(r)||f||d||p)&&!n.tg("hide")){const m=n.$m("color"),g=n.$m("opacity"),y=(this.oN(g?parseFloat(g.kp)/100:1),f&&(this.nN(f.kp),u.fillRect(l,c-i,s,i+h)),n.$m("linethickness")),M=y?parseFloat(y.kp):1,w=n.tg("stroke");if(w&&this.aN(.5*e*M*this.II()),n.rm()){const S=r.join("");if(this.rN(this.GI(!1,n)),!w){this.aN(.5*e*M*this.II());const T=n.$m("outlineback");T&&(this.nN(T.kp),this.dN(!0,S,l,c,s))}if(this.nN(m?m.kp:this.vG),this.dN(w,S,l,c,s),!w){this.aN(.5*e*M*this.II());const b=n.$m("outline");b&&(this.nN(b.kp),this.dN(!0,S,l,c,s))}}else if(n.om()&&0<n.Xp()){const x=n.ag(this.Yp);x&&u.drawImage(x,l,c-i,s,i)}if(this.nN(m?m.kp:this.vG),d&&I(u,w,l,c+o*t,s,o*t*M),p){const v=c-i/4,C=o*e,G=v+C/2;u.fillRect(l,G-C*M/2,s,C*M)}}}}dN(t,s,i,e,h){"rtl"===this.OG&&(i+=h),t?"Gecko"===Li.hi.ci?this.JG.strokeText(s,i,e,h):this.JG.strokeText(s,i,e):"Gecko"===Li.hi.ci?this.JG.fillText(s,i,e,h):this.JG.fillText(s,i,e)}KI(){this.cS.pN()||(this.o2||(this.o2=this.cS.ab(this.QG.width,this.QG.height,{i2:!0,e2:"high"})),this.cS.mN(this.QG,this.o2),this.eI.set(0,0,this.Fm/this.o2.Xp(),this.jm/this.o2.um()),this.aI&&this.aI())}gN(){return this.eI}nI(){this.o2&&(this.cS.pN()||this.cS.fb(this.o2),this.o2=null)}static JS(){for(const t of Bi)t.nI()}static yN(){return Bi.values()}}}{const Ui=self.Os;class Wi{constructor(t){this.zb=t.S2(),this.MN=t.T2(),this.wN=t.SN(),this.TN=null,this.Kf=!1,this.bN=!1,this.xN=0,1===this.MN?this.TN=this.wN.createQueryEXT():this.TN=this.zb.createQuery()}er(){this.vN(),this.zb=null,this.wN=null,this.bN=!1}vN(){this.TN&&(1===this.MN?this.wN.deleteQueryEXT(this.TN):this.zb.deleteQuery(this.TN),this.TN=null)}QC(){if(this.Kf)throw new Error("query already active");1===this.MN?this.wN.beginQueryEXT(this.wN.TIME_ELAPSED_EXT,this.TN):this.zb.beginQuery(this.wN.TIME_ELAPSED_EXT,this.TN),this.Kf=!0}VC(){if(!this.Kf)throw new Error("query not active");1===this.MN?this.wN.endQueryEXT(this.wN.TIME_ELAPSED_EXT):this.zb.endQuery(this.wN.TIME_ELAPSED_EXT),this.Kf=!1}CN(){if(this.TN&&!this.bN&&!this.Kf){let t;t=1===this.MN?this.wN.getQueryObjectEXT(this.TN,this.wN.QUERY_RESULT_AVAILABLE_EXT):this.zb.getQueryParameter(this.TN,this.zb.QUERY_RESULT_AVAILABLE);const s=this.zb.getParameter(this.wN.GPU_DISJOINT_EXT);t&&!s&&(1===this.MN?this.xN=this.wN.getQueryObjectEXT(this.TN,this.wN.QUERY_RESULT_EXT):this.xN=this.zb.getQueryParameter(this.TN,this.zb.QUERY_RESULT),this.xN/=1e9,this.bN=!0),(t||s)&&this.vN()}}GN(){return this.bN}IN(){if(this.bN)return this.xN;throw new Error("no result available")}}Ui.Jg.NN=class{constructor(t){this.cS=t,this.Hy=t.Xw(),this.Kf=!1,this.EN=null,this._N=!1,this.DN=null,this.AN=[]}er(){for(const t of this.AN)t instanceof Wi&&t.er();Ui.Dn(this.AN),this.EN=null,this.DN=null,this.cS=null}QC(){if(this.Kf)throw new Error("query already active");const t=this.cS.LN();0<t.length?(this._N=!0,this.EN=t.at(-1),this.EN.ON(),this.EN.AN.push(this)):(this._N=!1,this.EN=null),this.Kf=!0,t.push(this),this.RN()}VC(){if(!this.Kf)throw new Error("query not active");const t=this.cS.LN().pop();if(t!==this)throw new Error("can only end most nested query");this.Kf=!1,this.ON(),this.EN&&(this.EN.RN(),this.EN=null)}RN(){this.DN=Ui.ir(Wi,this.cS),this.AN.push(this.DN),this.DN.QC()}ON(){this.DN.VC(),this.DN=null}CN(){for(const t of this.AN)t.CN()}PN(){return this._N}GN(){return this.AN.every(t=>t.GN())}IN(){return this.AN.reduce((t,s)=>t+s.IN(),0)}Xw(){return this.Hy}}}{const Qi=self.Os;Qi.Jg.kN=class{constructor(t,s=1e3){this.cS=t,this.FN=s,this.jN=[],this.cS.zN(this)}er(){this.Jl(),this.cS.BN(this),this.cS=null}Jl(){for(const t of this.jN)t.er();Qi.Dn(this.jN)}UN(){const t=new Qi.Jg.NN(this.cS);if(this.jN.push(t),this.jN.length>this.FN){const s=this.jN.shift();s.er()}return t}WN(t){for(const s of this.jN){if(s.Xw()>=t)return;if(s.PN())return;s.CN()}}QN(t,s){if(s<=t)return NaN;let i=0;for(const e of this.jN){if(e.Xw()>=s)break;if(!(e.Xw()<t)){if(!e.GN())return NaN;i+=e.IN()}}return i}JN(i){for(let t=0,s=this.jN.length;t<s;++t){const e=this.jN[t];if(!(e.Xw()<i))return void(0<t&&this.jN.splice(0,t));e.er()}}}}{let i=function(){h=-1;for(const t of e)t.YN()&&(t.resolve(),e.delete(t));0<e.size&&(h=self.requestAnimationFrame(i))},S=(i,self.Os),t=self.ys,T=(t.Cs,t.Gs),y=t.Ts,r={powerPreference:"default",VN:!0,alpha:!1,depth:!1,HN:!1,qN:2,failIfMajorPerformanceCaveat:!1},n=new Set(["default","low-power","high-performance"]),c=new S.Qu(0,0,1,0,1,1,0,1),M=y.create(),w=y.create(),b=new S.Qu,x=new S.Rect,v=null,e=(S.isDebug&&(self.ZN=function(){v?v.loseContext():console.warn("WEBGL_lose_context not supported")},self.XN=function(){v?v.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),h=-1;S.Jg.KN=class extends S.Jg.ly{constructor(t,s){if(super(s),s=Object.assign({},r,s),!n.has(s.powerPreference))throw new Error("invalid power preference");let i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat},e=null,h=0;if(2<=s.qN&&(e=t.getContext("webgl2",i),h=2),e||(e=t.getContext("webgl",i),h=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.zb=e,this.$N=e.getContextAttributes(),this.tE=e.getParameter(e.VERSION),this.MN=h,this.sE=T.create(),this.iE=!1,this.eE=y.create(),this.hE=!!s.depth,this.rE=!(!s.depth||!s.HN),this.nE=this.hE,this.oE=!1,this.aE=null,this.uE=!0,this.lE=0,this.cE=0,this.Wb=null,this.Qb=null,this.fE=null,this.Jb=null,this.dE=new Float32Array(8e3*this.Hw()),this.pE=new Uint16Array(12e3),this.mE=new Float32Array(16e3),this.gE=new Float32Array(32e3),this.yE=0,this.ME=0,this.wE=0,this.SE=0,this.TE=null,this.bE=null,this.xE=[],this.vE=0,this.CE=0,this.GE=null,this.IE=0,this.Kv=S.ir(S.Jg.Vv,this),this.NE=S.ir(S.Ro,1,1,1,1),this.EE=null,this.RC=null,this._E=0,this.DE=0,this.AE=new S.Rect,this.LE=S.ir(S.Rect,0,0,-1,-1),this.OE=0,this.RE=-1,this.PE=0,this.kE=0,this.FE=0,this.jE="(unavailable)",this.zE="(unavailable)",this.BE=[],this.UE=!1,this.WE=null,this.QE=null,this.JE=null,this.YE=null,this.VE=null,this.HE=null,this.qE=0,this.ZE=!!s.VN,this.wN=null,this.XE=new Set,this.KE=[],this.Xy(this.pE)}eS(){return!0}async tM(){super.tM();const t=this.zb,s=this.Hw(),i=(this.NE.zo(1,1,1,1),this.EE=null,this.RC=null,this.yE=0,this.wE=0,this.SE=8e3*s-4*s,S.Dn(this.xE),this.vE=0,this.CE=0,this.TE=null,this.GE=null,this.AE.set(0,0,1,1),this.IE=0,this.Kv),e=(i.Qx=null,i.mb=null,i.gb=null,T.set(i.qv,1,1,1,1),i.clearColor.zo(0,0,0,0),i.Zv.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this._E=t.ONE,this.DE=t.ONE_MINUS_SRC_ALPHA,this.$E(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.hE?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.nE=this.hE,this.oE=!1,this.Jb=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Jb),t.bufferData(t.ARRAY_BUFFER,this.gE.byteLength,t.DYNAMIC_DRAW),this.Wb=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Wb),t.bufferData(t.ARRAY_BUFFER,this.dE.byteLength,t.DYNAMIC_DRAW),this.Qb=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Qb),t.bufferData(t.ARRAY_BUFFER,this.mE.byteLength,t.DYNAMIC_DRAW),this.fE=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.fE),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.pE,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.RE=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),h=(this.PE=e[0],this.kE=e[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),n=(this.FE=h&&r?Math.min(h.precision,r.precision):0,2048<this.kE&&(this.kE=2048),this.BE=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(n&&(this.jE=t.getParameter(n.UNMASKED_VENDOR_WEBGL),this.zE=t.getParameter(n.UNMASKED_RENDERER_WEBGL)),this.WE=t.getExtension("KHR_parallel_shader_compile"),S.isDebug&&(v=t.getExtension("WEBGL_lose_context")),this.ZE&&(1===this.T2()?this.wN=t.getExtension("EXT_disjoint_timer_query"):this.wN=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.QE=t.getExtension("EXT_texture_filter_anisotropic"),this.QE?this.qE=t.getParameter(this.QE.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.qE=0,this.T2()<2&&this.hE&&this.rE&&(this.JE=t.getExtension("WEBGL_depth_texture"),!this.JE))throw new Error("no depth texture support");this.T2()<2&&(this.YE=t.getExtension("EXT_frag_depth"),this.VE=t.getExtension("OES_standard_derivatives"),this.HE=t.getExtension("EXT_shader_texture_lod"));let o=S.Jg.Ob,a=o.mv(!1),u=o.yv(),l=a,c=o.Gv(),f=o.vv(),d=o.Sv(),p=o.mv(!0),m=!1;this.hE&&(this.T2()<2?this.YE&&(u=o.Mv(),c=o.Iv(),d=o.Tv(),m=!0):(l=o.gv(),u=o.wv(),c=o.Nv(),f=o.Cv(),d=o.bv(),p=o.gv(!0)));const g=o.xv(this.T2(),m,this.VE&&this.HE),y=2<=this.T2()?o.gv():a,M=[[u,l,"<default>"],[u,l,"<default-device-transform>"],[c,f,"<point>"],[o.Ev(),a,"<fill>"],[o._v(),a,"<lineargradient>"],[o.Dv(),a,"<penumbra>"],[o.Lv(),a,"<hardellipse>"],[o.Ov(),a,"<hardellipseoutline>"],[o.Rv(),a,"<smoothellipse>"],[o.Pv(),a,"<smoothellipseoutline>"],[o.Av(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],w=await Promise.all(M.map(t=>this.t_({src:t[0],Pb:t[1],name:t[2]})));this.vy=w[0],this.bE=w[1],this.Cy=w[2],this.Ny=w[3],this.Ey=w[4],this._y=w[5],this.Dy=w[6],this.Ay=w[7],this.Ly=w[8],this.Oy=w[9],this.Ry=w[10],this.Gy=w[11],this.Iy=w[12],this.vM()}async t_(t){const s=await S.Jg.Ob.jb(this,t);return this.SM(s),s}s_(){this.TE=null}jI(t,s,i){if(this.Fm!==t||this.jm!==s||i){this.Zw();const e=this.zb,h=this.Kv;this.Fm=t,this.jm=s,this.i_(0,0,t,s),this.mM(this.eE,t/s),this.e_(this.eE),this.bE&&(e.useProgram(this.bE.Yx()),this.bE.jx(this.yy),this.TE=this.bE,this.Kv.Qx=this.bE),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.EE=null,this.RC=null,this.hE&&this.uE&&this.h_(this.Fm,this.jm),this.GE&&this.GE.cb(this.Fm,this.jm),e.bindFramebuffer(e.FRAMEBUFFER,null),this.GE=null,h.mb=null,h.gb=null}}h_(t,s){const i=this.zb;this.aE&&this.lE===t&&this.cE===s||(this.rE?(this.aE&&i.deleteTexture(this.aE),this.aE=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.aE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),2<=this.T2()?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.JE&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.JE.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.aE&&i.deleteRenderbuffer(this.aE),this.aE=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.aE),i.renderbufferStorage(i.RENDERBUFFER,2<=this.MN?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.lE=t,this.cE=s)}r_(t,s){this.hE&&(this.uE=!1,this.h_(t,s))}n_(){this.hE&&(this.uE=!0,this.h_(this.Fm,this.jm))}i_(t,s,i,e){const h=this.sE;if(h[0]!==t||h[1]!==s||h[2]!==i||h[3]!==e){const r=this.o_();r.gC(t,s,i,e),T.set(h,t,s,i,e),this.CE=0}}lM(t){super.lM(t),this.mM(this.eE,this.Fm/this.jm)}nM(t){super.nM(t),this.mM(this.eE,this.Fm/this.jm)}aM(t){super.aM(t),this.mM(this.eE,this.Fm/this.jm)}e_(t){if(!y.j(this.yy,t)){const s=this.o_();s.MC(t),y.C(this.yy,t),this.CE=0,this.iE=!0}}a_(){let t,s,i,e=this.GE;i=(null===e?(t=this.eE,s=this.Xp(),this):(t=e.Sb(),s=e.Xp(),e)).um(),this.e_(t),this.i_(0,0,s,i)}u_(t){if(!y.j(this.My,t)){const s=this.o_();s.SC(t),y.C(this.My,t),this.CE=0,this.iE=!0}}l_(){this.iE=!1}c_(){return this.iE}pb(){return this.Kv}o_(){const t=this.xE;return this.vE===t.length&&t.push(new S.Jg.Xv(this.Kv)),t[this.vE++]}Zw(){0===this.vE||this.pN()||(this.f_(),this.d_(),this.vE=0,this.yE=0,this.ME=0,this.wE=0,this.CE=0)}f_(){const t=this.zb;0<this.wE&&(t.bindBuffer(t.ARRAY_BUFFER,this.Jb),t.bufferSubData(t.ARRAY_BUFFER,0,this.gE.subarray(0,this.wE))),0<this.yE&&(t.bindBuffer(t.ARRAY_BUFFER,this.Wb),t.bufferSubData(t.ARRAY_BUFFER,0,this.dE.subarray(0,this.yE)),t.bindBuffer(t.ARRAY_BUFFER,this.Qb),t.bufferSubData(t.ARRAY_BUFFER,0,this.mE.subarray(0,this.ME)))}d_(){const i=this.xE;for(let t=0,s=this.vE;t<s;++t)i[t].pG()}p_(){return this.NE.Ko()}m_(t,s,i,e){const h=this.NE;if(!h.oa(t,s,i,e)){h.zo(t,s,i,e);const r=this.o_();r.lC(h),this.CE=0,this.ky=null}}g_(t){const s=this.NE;if(s.Ko()!==t){s.Vo(t);const i=this.o_();i.lC(s),this.CE=0,this.ky=null}}QS(t){const s=this.NE;if(!s.equals(t)){s.set(t);const i=this.o_();i.lC(s),this.CE=0,this.ky=null}}y_(){this.m_(1,1,1,1)}M_(){return this.NE}w_(t){if(t!==this.EE){const s=this.o_();s.aC(t),this.EE=t,this.CE=0}}G2(){this.EE=null}WS(t){const s=this.XM(t);this.S_(s[0],s[1])}T_(t){const s=this.iw(t);this.S_(s.qM,s.ZM)}S_(t,s){if(t!==this._E||s!==this.DE){const i=this.o_();i.pC(t,s),this._E=t,this.DE=s,this.CE=0,this.ky=null}}b_(){return this._E===this.zb.ONE&&this.DE===this.zb.ONE_MINUS_SRC_ALPHA}x_(){this.S_(this.zb.ONE,this.zb.ONE_MINUS_SRC_ALPHA)}v_(){this.S_(this.zb.SRC_ALPHA,this.zb.ONE_MINUS_SRC_ALPHA)}C_(){this.S_(this.zb.ONE,this.zb.ZERO)}Rect(t){this.G_(t.pu(),t.mu(),t.gu(),t.yu())}G_(t,s,i,e){this.Vw(t,s,i,s,i,e,t,e)}I_(){let t=this.yE;if(t>=this.SE&&(this.Zw(),t=0),1===this.CE)this.xE[this.vE-1].tC+=6;else{const s=this.o_();s.nC(t,6),this.CE=1}}N_(t){t.ll(this.dE,this.yE,this.zy+this.By),this.yE+=12}Qu(t){this.I_(),this.N_(t),c.ta(this.mE,this.ME),this.ME+=8}Vw(t,s,i,e,h,r,n,o){this.I_();let a=this.dE,u=this.yE,l=this.zy+this.By;a[u++]=t,a[u++]=s,a[u++]=l,a[u++]=i,a[u++]=e,a[u++]=l,a[u++]=h,a[u++]=r,a[u++]=l,a[u++]=n,a[u++]=o,a[u++]=l,this.yE=u,c.ta(this.mE,this.ME),this.ME+=8}ww(t,s){this.I_(),this.N_(t),s.Su(this.mE,this.ME),this.ME+=8}E_(t,s){this.I_(),this.N_(t),s.ta(this.mE,this.ME),this.ME+=8}__(t,s,i,e,h,r,n,o,a,u,l,c,f){this.I_();let d=this.dE,p=this.yE,m=this.zy+this.By;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+r,d[p++]=n,d[p++]=o,d[p++]=m+a,d[p++]=u,d[p++]=l,d[p++]=m+c,this.yE=p,f.Su(this.mE,this.ME),this.ME+=8}pw(t,s,i,e,h,r,n,o,a,u,l,c,f){this.I_();let d=this.dE,p=this.yE,m=this.zy+this.By;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+r,d[p++]=n,d[p++]=o,d[p++]=m+a,d[p++]=u,d[p++]=l,d[p++]=m+c,this.yE=p,f.ta(this.mE,this.ME),this.ME+=8}D_(e,h,r){const n=this.dE,o=this.mE;if(r.length%3!=0)throw new Error("invalid index buffer length");for(let i=0,t=r.length;i<t;){const a=r[i++],u=r[i++],l=r[i++],c=3*a,f=3*u,d=3*l,p=2*a,m=2*u,g=2*l;this.I_();let t=this.yE,s=this.ME;n[t++]=e[0+c],n[t++]=e[1+c],n[t++]=e[2+c],n[t++]=e[0+f],n[t++]=e[1+f],n[t++]=e[2+f],n[t++]=e[0+d],n[t++]=e[1+d],n[t++]=e[2+d],n[t++]=e[0+d],n[t++]=e[1+d],n[t++]=e[2+d],o[s++]=h[0+p],o[s++]=h[1+p],o[s++]=h[0+m],o[s++]=h[1+m],o[s++]=h[0+g],o[s++]=h[1+g],o[s++]=h[0+g],o[s++]=h[1+g],this.yE=t,this.ME=s}}A_(t,s){this.ow(0),y.C(M,this.yy),y.C(w,this.My),this.a_();const[i,e]=this.L_(this.GE),h=this.wM(0,0,this.iM(e),0,0,0,e);if(this.u_(h),"crop"===t&&this.GE&&s){const r=this.Fm/2,n=this.jm/2,o=s.Xp(),a=s.um(),u=this.GE.Xp(),l=this.GE.um(),c=Math.min(u,o),f=Math.min(l,a),d=Math.max(a-l,0),p=Math.max(l-a,0);x.set(-r,n-p,-r+c,n-f-p),b.cl(x),x.set(0,d,c,f+d),x.Ct(o,a),this.ww(b,x)}else{const m=i/2,g=e/2;this.G_(-m,g,m,-g)}this.e_(M),this.u_(w)}O_(t){if(!this.AE.equals(t)){this.AE.C(t);const s=this.o_();s.IC(t),this.CE=0}}R_(){}P_(t,s,i,e){7996<=this.wE&&this.Zw();let h=this.wE,r=this.zy+this.By;if(2===this.CE&&this.IE===r)this.xE[this.vE-1].tC++;else{const o=this.o_();o.EC(h,r),this.CE=2,this.IE=r}const n=this.gE;n[h++]=t,n[h++]=s,n[h++]=i,n[h++]=e,this.wE=h}CM(t){if(this.TE!==t){const s=this.o_();s.DC(t),this.TE=t,this.CE=0,this.ky=null}}k_(){return this.TE}F_(){this.CM(this.bE)}j_(t){const s=this.o_();s.fC(t),this.CE=0}z_(t,s,i=1){const e=this.o_();e.HC(t,s,i),this.CE=0}B_(t,s,i,e,h,r,n){if(this.TE!==this.Gy)throw new Error("must set tilemap fill mode first");const o=this.o_();o.ZC(t,s,i,e,h,r,n),this.CE=0}U_(t,s,i,e,h,r,n){if(this.TE!==this.Iy)throw new Error("must set tile randomization mode first");const o=this.o_();o.KC(t,s,i,e,h,r,n),this.CE=0}W_(t,s,i,e,h,r,n,o,a,u,l){const c=this.TE;if(l%=10800,c.Ex&&!c.tv(s,i,e,h,r,n,o,a,u,l)){const f=this.o_(),d=(f.LC(),c.rv(s,i,e,h,r,n,o,a,u,l),f.iC),p=(d[0]=r,d[1]=n,s.ta(d,2),d[6]=a,d[7]=u,i.ta(d,12),f.eC),m=(h.ta(p,0),p[1]);p[1]=p[3],p[3]=m,e.ta(f.hC,0),f.$v=l,f.tC=o,c.ox._x()?f.sC=t?t.wb():null:f.sC=null,this.CE=0}}Q_(t){const s=this.TE;if(0!==t.length&&!s.Zx(t)){const i=this.o_();i.PC(),s.Kx(t),S.Rn(i.rC,t),this.CE=0}}J_(t,s,i,e){const h=this.o_();h.CC(t,s,i,e),this.CE=0}Jl(t){const s=this.o_();s.vC(t),this.CE=0}Y_(){}qw(){super.qw(),this.zb.flush()}V_(){if(this.hE&&this.GE&&this.GE.vb()){const t=this.o_();t.tG(this.nE),this.CE=0}}H_(t){if(this.nE!==(t=!!t)&&this.hE){this.nE=t;const s=this.o_();s.iG(t),this.CE=0}}q_(){return this.nE}ub(){return this.aE}lb(){return this.rE}Z_(t){if(t=!!t,this.rE&&this.oE!==t){if(t&&this.q_())throw new Error("depth still enabled");this.oE=t;const s=this.o_();s.hG(t),this.CE=0}}X_(t,s,i,e,h=0){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),!this.LE.du(t,s,i,e)){this.LE.nu(t,s,i,e);const r=h||this.L_(this.K_())[1],n=(s=r-s-e,this.o_());n.fG(!0,t,s,i,e),this.CE=0}}tD(){if(-1!==this.LE.gu()){this.LE.set(0,0,-1,-1);const t=this.o_();t.fG(!1,0,0,0,0),this.CE=0}}sD(){for(const t of this.XE)t.WN(this.Hy)}pN(){return!this.zb||this.zb.isContextLost()||this.UE}JS(){super.sM(),S.Jg.n2.JS(),S.Jg.Y2.JS(),S.Jg.uS.JS();for(const t of this.XE)t.Jl();this.BE=[],this.wN=null,this.WE=null,this.QE=null,this.JE=null,this.YE=null,this.VE=null,this.HE=null,this.qE=0,this.jE="(unavailable)",this.zE="(unavailable)",this.TE=null,this.bE=null,this.aE=null;for(const s of this.Py.values())s.JS()}async YS(){this.UE=!0,await this.tM(),this.UE=!1;for(const t of this.Py.values())t.YS(this);this.jI(this.Fm,this.jm,!0)}iD(t,s){if(this.pN())throw new Error("context lost");this.Zw();const i=S.ir(S.Jg.n2,this);return i.M2(t,s),i}async eD(e,h){if(this.pN())throw new Error("context lost");if(h=Object.assign({},h),S.Pi.ImageBitmapOptions){let t=await createImageBitmap(e,{premultiplyAlpha:"premultiply"}),s=h.XT&&"clamp-to-edge"!==h.XT||h.KT&&"clamp-to-edge"!==h.KT,i=S.Dr(t.width)&&S.Dr(t.height);return this.b2()||i||!s?h.premultiplyAlpha=!1:S.Pi.Bi?(t=await createImageBitmap(e,{premultiplyAlpha:"premultiply",resizeWidth:S.Ar(t.width),resizeHeight:S.Ar(t.height)}),h.premultiplyAlpha=!1):t=await createImageBitmap(e,{premultiplyAlpha:"none"}),S.If(()=>this.iD(t,h))}if(e instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await S.bo(e);e=t}return S.If(()=>this.iD(e,h))}ab(t,s,i){this.Zw();const e=S.ir(S.Jg.n2,this);return e.I2(t,s,i),e}mN(t,s,i){this.Zw(),s.A2(t,i)}fb(t){t&&(t.F2(),0<t.j2()||(this.Zw(),t===this.EE&&(this.zb.bindTexture(this.zb.TEXTURE_2D,null),this.EE=null),t===this.RC&&(this.zb.activeTexture(this.zb.TEXTURE1),this.zb.bindTexture(this.zb.TEXTURE_2D,null),this.zb.activeTexture(this.zb.TEXTURE0),this.RC=null),t.L2()))}hD(t){let s=this.Fm,i=this.jm,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height)&&(i=Math.floor(t.height),e=!1),s<=0||i<=0)throw new Error("invalid size");this.Zw();const h=S.ir(S.Jg.Y2,this);return h.nb(s,i,Object.assign({Q2:e},t)),this.GE=null,this.Kv.mb=null,this.Kv.gb=null,h}rD(t,s=!0){if(t!==this.GE){t&&t.Cb()&&t.cb(this.Fm,this.jm);const i=this.o_();i.bC(t),this.GE=t,this.CE=0,s&&this.a_()}}K_(){return this.GE}L_(t){return t?[t.Xp(),t.um()]:[this.Fm,this.jm]}nD(t,s="stretch"){if(this.MN<2||this.GE&&0<this.GE.Gb())this.C_(),this.y_(),this.oD(t,s);else{const i=this.o_();i.zC(t,this.GE,s),this.CE=0}}oD(t,s="stretch"){const i=t.wb();if(!i)throw new Error("not a texture-backed render target");this.w_(i),this.A_(s,i)}aD(t){if(!(this.MN<2)){const s=this.o_();s.FC(t.yb()),this.CE=0}}uD(t){this.rD(null),this.Zw();const s=t.wb();s===this.EE&&(this.zb.bindTexture(this.zb.TEXTURE_2D,null),this.EE=null),s===this.RC&&(this.zb.activeTexture(this.zb.TEXTURE1),this.zb.bindTexture(this.zb.TEXTURE_2D,null),this.zb.activeTexture(this.zb.TEXTURE0),this.RC=null),t.L2()}async Db(t,s,i){this.Zw();let e=this.GE,h,r,n,o=(n=t?(h=t.Xp(),r=t.um(),t.yb()):(h=this.Xp(),r=this.um(),null),0),a=0,u=h,l=r;if(i){o=S.lr(Math.floor(i.pu()),0,h-1),a=S.lr(Math.floor(i.mu()),0,r-1);let t=i.width(),s=(t=0===t?h-o:S.lr(Math.floor(t),0,h-o),i.height());s=0===s?r-a:S.lr(Math.floor(s),0,r-a),u=t,l=s,a=r-(a+l)}let c=this.zb,f=(c.bindFramebuffer(c.FRAMEBUFFER,n),()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.GE=null,this.Kv.mb=null,this.Kv.gb=null,this.rD(e)}),d;if(!s&&2<=this.T2()){c.bindFramebuffer(c.READ_FRAMEBUFFER,n);const p=c.createBuffer(),m=u*l*4,g=c.PIXEL_PACK_BUFFER,y=(c.bindBuffer(g,p),c.bufferData(g,m,c.STREAM_READ),c.readPixels(o,a,u,l,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(g,null),f(),c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0));await this.Fb(()=>c.getSyncParameter(y,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(y),d=new ImageData(u,l),c.bindBuffer(g,p),c.getBufferSubData(g,0,new Uint8Array(d.data.buffer),0,m),c.bindBuffer(g,null),c.deleteBuffer(p)}else d=new ImageData(u,l),c.readPixels(o,a,u,l,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}lD(){this.H_(!0);const t=this.o_();t.nG(),this.CE=0,this.OE=1}cD(){this.H_(!1);const t=this.o_();t.aG(),this.CE=0,this.OE=2}fD(){return 2===this.OE}dD(){this.H_(!0);const t=this.o_();t.lG(),this.CE=0,this.OE=0}pD(t){if(this.mD()){const s=this.o_();s.UC(t),this.CE=0}}gD(t){if(this.mD()){const s=this.o_();s.JC(t),this.CE=0}}Fb(s){const t=new Promise(t=>e.add({resolve:t,YN:s}));return-1===h&&(h=self.requestAnimationFrame(i)),t}hS(){return this.Fm*this.jm*(this.$N.alpha?4:3)}rS(){let t=0;for(const s of S.Jg.Y2.Ab())s.wb()||(t+=s.B2());return t}nS(){let t=0;for(const s of S.Jg.n2.U2())t+=s.B2();return t}yD(){return this.tE}T2(){return this.MN}MD(){return"webgl"+this.T2()}b2(){return 2<=this.T2()}w2(){return this.RE}wD(){return this.PE}SD(){return this.kE}TD(){return 0!==this.FE}bD(){return this.FE}xD(){return this.jE}vD(){return this.zE}CD(){if(2<=this.T2())return"webgl2";{const t=[];return this.YE&&t.push("EXT_frag_depth"),this.VE&&t.push("OES_standard_derivatives"),this.HE&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}GD(){return this.BE}mD(){return!!this.wN}SN(){return this.wN}kb(){return this.WE}_2(){return this.QE}D2(){return this.qE}zN(t){this.XE.add(t)}BN(t){this.XE.delete(t)}LN(){return this.KE}S2(){return this.zb}$E(t){this.HM([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}ID(){return this.aS()}}}{const Ji=self.Os,Yi={ND:null,ED:null,_D:null,getTime:null,DD:null};Ji.Jg.AD=class{constructor(t){t=Object.assign({},Yi,t),this.LD=t.ND,this.OD=t.ED,this.RD=t._D,this.PD=t.getTime,this.kD=t.DD,this.FD=null,this.jD=new Set}zD(t){this.jD.add(t)}BD(t){this.jD.delete(t)}JS(){this.FD=null;for(const t of this.jD)t.JS()}UD(t){return this.LD?this.LD(t):[t.Xp(),t.um()]}K_(t){return this.OD(t)}WD(t,s){this.RD(t,s)}QD(){return this.PD()}V1(t){this.kD(t)}JD(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.FD||this.FD.Xp()===s&&this.FD.um()===i||(t.fb(this.FD),this.FD=null),null===this.FD&&(this.FD=t.iD(null,{width:s,height:i,$T:"nearest",i2:!1})),this.FD}}}{const o=self.Os,Vi=self.ys,xh=Vi.Ts,Hi=o.ir(o.Rect),qi=o.ir(o.Rect),Zi=o.ir(o.Rect),Xi=o.ir(o.Rect),Ki=xh.create(),$i=xh.create(),te={YD:null,VD:null,HD:null,qD:!1},se={ZD:null,XD:!1,KD:!1,$D:!1,tA:!1,sA:!1,iA:!1};o.Jg.eA=class{constructor(t,s){s=Object.assign({},te,s),this.rd=t,this.hA=s.YD,this.rA=s.VD,this.nA=s.HD,this.oA=null,this.aA=[],this.uA=[],this.lA=[],this.cA=!1,this.jS=0,this.fA=!1,this.dA=!1,this.pA=!1,this.mA=!1,this.gA=!1,this.yA=!1,this.iE=!1,this.MA=!1,this.wA=!1,this.SA=!1,this.TA=!1,this.bA=!1,this.xA=0,this.vA=[null,null,null],this.CA=!!s.qD,this.GA=0,this.IA=0,this.NA=0,this.EA=0,this._A=null,this.DA=null,this.AA=o.ir(o.Rect),this.LA=o.ir(o.Rect),this.OA=o.ir(o.Rect),this.RA=o.ir(o.Rect),this.PA=o.ir(o.Rect),this.kA=1,this.FA=1,this.jA=0,this.zA=0,this.BA=null,this.UA=null,this.WA=0,this.QA=0,this.JA=!1,this.ib=xh.create(),this.YA=xh.create(),this.rd.zD(this)}er(){this.rd.BD(this),o.Dn(this.lA),o.Dn(this.aA),o.Dn(this.uA),this._A=null,this.DA=null,this.hA=null,this.rA=null,this.nA=null}JS(){this.cA=!0,o.Dn(this.lA),o.Dn(this.aA),o.Dn(this.uA)}VA(){return this.cA}HA(h,t){if(t=Object.assign({},se,t),o.Dn(this.lA),this.GA=0,this.IA=0,this.fA=!1,this.dA=!1,this.pA=!1,this.mA=!1,this.gA=!1,this.yA=!1,this.xA=0,this.bA=!!t.tA,this.TA=!!t.iA,this.cA=!1,o.Rn(this.aA,h),0!==h.length){if(t.ZD){if(t.ZD.length!==h.length)throw new Error("incorrect indexMap length");o.Rn(this.uA,t.ZD)}else{o.Dn(this.uA);for(let t=0,s=h.length;t<s;++t)this.uA.push(t)}for(const s of h)this.GA+=s.CS(),this.IA+=s.GS(),s.DS()&&(this.fA=!0),s.LS()&&(this.dA=!0),s.AS()&&(this.pA=!0),s.IS()&&(this.mA=!0),s.PS()&&(this.gA=!0);this.yA=this.qA(h[0].xS());const r=this.ZA(h[0],t),n=this.XA(h.at(-1),t);if(1!==h.length||r||n){this.SA=!1;let e=0;r&&(this.xA=1,this.lA.push(o.ir(o.Jg.eA.$A.KA,this,-1,1)),e=1);for(let s=0,i=h.length;s<i;++s)if(0!==s||r){let t=1===e?2:1;s!==i-1||n||(t=0),this.xA=Math.max(this.xA,t),this.lA.push(o.ir(o.Jg.eA.$A.tL,this,e,t,s)),e=t}else this.xA=1,this.lA.push(o.ir(o.Jg.eA.$A.sL,this,-1,1,s)),e=1;n&&this.lA.push(o.ir(o.Jg.eA.$A.iL,this,e,0))}else this.SA=!0}}ZA(t,s){return!!(s.XD||t.NS()||s.$D&&!t._S()||t.LS()&&!this.TA||0!==this.GA||0!==this.IA)||(t.xS().eS()?t.AS()&&(s.sA||s.tA)||t.OS()&&s.tA:t.AS()&&!this.yA&&s.sA)}XA(t,s){return!!s.KD||(t.xS().eS()?t.AS()||t.IS():(t.AS()||t.IS())&&this.eL())}qA(t){return t.gM()&&this.pA&&!this.mA}hL(t,s,i){t.gM()&&null===s&&(s=t.GetBackbufferRenderTarget()),this.BA=s,this._A=i.rL||null,this.DA=i.contextObject||null,this.jS=i.nL||0,this.kA=i.devicePixelRatio||1,this.FA=i.oL||1,this.jA=i.aL||0,this.zA="number"==typeof i.time?i.time:this.rd.QD(),this.iE=!1,t.l_(),this.fA&&this.uL();let e=!1;if(this.lL()&&(this.cL(t,i),e=!0,this.UA=this.rd.JD(t,this.NA,this.EA),Hi.C(this.LA),Hi.Pu(),t.gM()&&t._MaybeDoPendingClearRenderPass(this.BA),t.CopyTextureToTexture(this.BA.wb(),this.UA,Hi.pu(),Hi.mu(),Hi.width(),Hi.height())),this.SA)this.fL(t,i);else if(e||this.cL(t,i),0!==this.OA.width()||0!==this.OA.height()){t.x_(),t.y_(),t.hw(0),t.ow(0),this.oA=i.dL||null,this.WA=i.pL||0,this.QA=i.mL||0,this.JA=!!i.gL,this.yL(t),this.vA[0]=s,this.vA[1]=1<=this.xA?this.ML():null,this.vA[2]=2===this.xA?this.ML():null;for(const h of this.lA){const r=this.wL(h.SL()),n=this.wL(h.TL());t.gM()?h.bL(t,r,n):h.xL(t,r,n)}t.w_(null),this.vA[1]&&this.vL(this.vA[1]),this.vA[2]&&this.vL(this.vA[2]),this.vA.fill(null),this.CL(t),this.BA=null,this.UA=null,this._A=null,this.DA=null,this.oA=null}}cL(t,s){const[i,e]=this.rd.UD(t);this.GL(t,i,e),this.IL(s)}GL(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.NA===s&&this.EA===i||this.NL(t,s,i,0,0,this.ib,this.YA),this.NA=s,this.EA=i}NL(t,s,i,e,h,r,n){const o=s/2+e,a=i/2+h,u=(t.mM(r,s/i),t.wM(o,a,t.iM(i),o,a,0,i));xh.C(n,u)}IL(t){this.AA.C(t.EL),t._L?this.LA.C(t._L):this.LA.set(0,0,this.NA,this.EA),this.OA.C(this.LA),this.OA.Ct(this.NA,this.EA);const s=this.FA*this.kA;this.LA.Iu(this.GA*s,this.IA*s),this.PA.C(this.LA),this.PA.Ct(this.NA,this.EA),this.LA.ku(0,0,this.NA,this.EA),this.RA.C(this.LA),this.RA.Ct(this.NA,this.EA)}yL(t){if(this.MA=t.q_(),this.wA=t.fD(),this.TA)t.H_(!1),this.dA&&t.Z_(!0);else{if(Hi.C(this.LA),t.eS()){const s=this.FA*this.kA;Hi.Iu(Math.max(this.GA,1)*s,Math.max(this.IA,1)*s),Hi.Pu(),Hi.lr(0,0,this.NA,this.EA)}else Hi.Pu();t.X_(Hi.pu(),Hi.mu(),Hi.width(),Hi.height(),this.EA)}}DL(t){t.y_(),this.TA||(this.wA&&t.dD(),t.H_(!1),this.dA&&t.Z_(!0)),t.gM()&&t.SetNormalizedCoordsProgramVariant(!0)}CL(t){t.Z_(!1),this.wA&&t.cD(),t.H_(this.MA),this.TA||t.tD(),t.gM()&&t.SetNormalizedCoordsProgramVariant(!1),this.iE=t.c_()}AL(){this.PA.lr(0,0,1,1)}wL(t){return t<0?null:this.vA[t]}ML(){return this.rd.K_(this)}LL(){return this.BA}vL(t){this.rd.WD(t,this)}OL(t){return this.aA[t]}RL(t){this.oA?this.oA(this,t,()=>this.hA(t,this)):this.hA(t,this),this.SA||this.DL(t)}PL(t){if(this.TA)return!0;if(0!==this.WA||0!==this.QA)return!1;const[s,i]=t.L_(t.K_());return s===this.NA&&i===this.EA}kL(t,s){let i=this.ib,e=this.YA;if(s&&!this.PL(t)){i=Ki,e=$i;const[h,r]=t.L_(t.K_());this.NL(t,h,r,this.WA,this.QA,i,e),this.TA||t.tD()}t.e_(i),t.u_(e)}uL(){this.rd.V1(this)}FL(t,s){return this.nA(this.uA[t],s)}jL(t,s){let i=this.PA,e=this.RA,h=this.OA;t.eS()&&(qi.C(i),qi._u(1),i=qi,Zi.C(e),Zi._u(1),e=Zi,Xi.C(h),Xi._u(1),h=Xi),this.zL(t,s,e,h,i,1/this.NA,1/this.EA)}BL(t,s){let e=this.RA,h=this.OA,r=1/this.NA,n=1/this.EA;if(this.rA){let{UL:t,WL:s,QL:i}=this.rA(this._A);t||(Hi.set(0,0,0,0),t=Hi),s=s||this.NA,i=i||this.EA,e=t,h=t,r=1/s,n=1/i}else t.eS()&&(Zi.C(e),Zi._u(1),e=Zi,Xi.C(h),Xi._u(1),h=Xi);let i=this.PA;t.eS()&&((i=qi).C(this.PA),i._u(1)),this.zL(t,s,e,h,i,r,n),t.gM()&&this.gA&&t.SetProgramParameter_IsSrcTexRotated(this.bA)}JL(t){return this.pA?t.gM()?this.lL()?this.UA:this.BA.wb():this.BA:null}zL(t,s,i,e,h,r,n){t.W_(this.JL(t),h,i,e,this.AA,r,n,this.kA,this.FA,this.jA,this.zA),t.Q_(this.FL(s,t))}fL(t,s){const i=this.aA[0],e=t.q_(),h=i.LS();h&&(t.H_(!1),t.Z_(!0),this.PA.set(0,0,1,1),this.OA.set(0,0,1,1)),t.CM(i),t.WS(this.jS),t.rD(this.BA);let r=0,n=1;if(this.OA.set(0,0,1,1),i.OS()&&this.rA){const{UL:o,WL:a,QL:u}=this.rA(this._A);o&&this.OA.C(o),r=Number.isFinite(a)?1/a:0,n=Number.isFinite(u)?1/u:0}else{const[l,c]=this.rd.UD(t);r=1/l,n=1/c}s.EL?this.AA.C(s.EL):this.AA.set(0,0,0,0),t.W_(this.JL(t),this.PA,this.OA,this.OA,this.AA,r,n,this.kA,this.FA,this.jA,this.zA),t.Q_(this.FL(0,t)),t.gM()&&this.gA&&t.SetProgramParameter_IsSrcTexRotated(this.bA),t.hw(0),this.RL(t),h&&(t.Z_(!1),t.H_(e))}lL(){return this.yA}eL(){return!this.yA}YL(){return this.pA}VL(){return!!this.SA&&!this.lL()}HL(){return this.TA}qL(){return this._A}ZL(){return this.DA}XL(){return this.jS}KL(){return this.JA}c_(){return this.iE}$L(){return this.LA}tO(){return this.RA}sO(){return this.CA}async iO(t,s,i){}}}{const ie=self.Os;ie.Jg.eA.$A=class{constructor(t,s,i,e=-1){this.eO=t,this.hO=s,this.rO=i,this.Fg=e}nO(){return this.eO}SL(){return this.hO}TL(){return this.rO}oO(){return this.Fg}Yx(){return this.nO().OL(this.oO())}xL(t,s,i){}bL(t,s,i){}}}{const ee=self.Os;ee.Jg.eA.$A.KA=class extends ee.Jg.eA.$A{constructor(t,s,i,e){super(t,s,i,e)}xL(t,s,i){const e=this.nO();t.x_(),t.vM(),t.rD(i,e.KL()),t.J_(0,0,0,0),e.RL(t),e.AL()}bL(t,s,i){const e=this.nO();t.x_(),t.vM(),t.rD(i,!1),t.J_(0,0,0,0),e.RL(t),e.AL()}}}{const he=self.Os,re=he.ir(he.Rect),ne=he.ir(he.Qu);he.Jg.eA.$A.iL=class extends he.Jg.eA.$A{constructor(t,s,i,e){super(t,s,i,e)}xL(t,s,i){const e=this.nO();t.vM(),t.rD(i),e.kL(t,!0),t.WS(e.XL()),t.w_(s.wb()),ne.cl(e.$L()),re.C(e.tO()),re._u(1),t.ww(ne,re),e.sO()&&t.aD(s)}bL(t,s,i){const e=this.nO();t.vM(),t.rD(i,!1),e.PL(t)?ne.cl(e.tO()):(t.SetNormalizedCoordsProgramVariant(!1),e.kL(t,!0),ne.cl(e.$L())),t.SetBackTexture(null),t.WS(e.XL()),t.w_(s.wb()),e.HL()?t.A_():t.ww(ne,e.tO())}}}{const oe=self.Os;oe.Jg.eA.$A.sL=class extends oe.Jg.eA.$A{constructor(t,s,i,e){super(t,s,i,e)}xL(t,s,i){const e=this.nO();t.rD(i,e.KL()),t.J_(0,0,0,0),t.C_(),t.CM(this.Yx()),e.BL(t,this.oO()),e.RL(t),e.AL()}bL(t,s,i){const e=this.nO();t.rD(i,!1),t.J_(0,0,0,0),t.C_(),t.CM(this.Yx()),e.BL(t,this.oO()),e.RL(t),e.AL()}}}{const ae=self.Os,ue=ae.ir(ae.Rect),le=ae.ir(ae.Qu);ae.Jg.eA.$A.tL=class extends ae.Jg.eA.$A{constructor(t,s,i,e){super(t,s,i,e)}xL(t,s,i){const e=this.nO(),h=(t.rD(i),0===this.TL());h?t.WS(e.XL()):(t.J_(0,0,0,0),t.C_()),t.CM(this.Yx()),e.jL(t,this.oO()),t.w_(s.wb()),e.kL(t,h),le.cl(e.$L()),ue.C(e.tO()),ue._u(1),t.ww(le,ue),e.sO()&&t.aD(s)}bL(t,s,i){const e=this.nO(),h=(t.rD(i,!1),0===this.TL());h?(t.WS(e.XL()),t.SetBackTexture(null),e.PL(t)?le.cl(e.tO()):(t.SetNormalizedCoordsProgramVariant(!1),e.kL(t,!0),le.cl(e.$L()))):(t.J_(0,0,0,0),t.C_(),le.cl(e.tO())),t.CM(this.Yx()),e.jL(t,this.oO()),t.w_(s.wb()),e.HL()?t.A_():t.ww(le,e.tO())}}}{let l=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const r=t[1],n=s[1];return r-n},c=(l,self.Os),f=self.Qs,d=null,s=new Set,p=[],m=[],i=!1,t=!1,e=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.aO=class{constructor(t){d=t,Object.defineProperties(this,{uO:{value:d.cO().lO(),writable:!1},fO:{value:d.pO().dO(),writable:!1},mO:{value:{},writable:!1},gO:{value:{},writable:!1},yO:{value:d.MO(),writable:!1},wO:{value:d.SO(),writable:!1},storage:{value:new self.TO(d),writable:!1},isInWorker:{value:d.bO(),writable:!1},xO:{value:d.vO(),writable:!1},CO:{value:d.GO(),writable:!1},$T:{value:d.IO(),writable:!1},NO:{value:d.EO(),writable:!1},_O:{value:new self.DO(t),writable:!1},AO:{value:new self.LO(t),writable:!1}}),d.OO().addEventListener("keydown",t=>{s.has(t.key)?t.stopPropagation():s.add(t.key)}),d.OO().addEventListener("keyup",t=>s.delete(t.key)),d.Af().addEventListener("window-blur",()=>s.clear()),d.bO()&&(self.alert=t=>(i||(i=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}RO(t){Object.defineProperties(this.mO,t)}PO(t){Object.defineProperties(this.gO,t)}addEventListener(t,s){d.OO().addEventListener(t,s)}removeEventListener(t,s){d.OO().removeEventListener(t,s)}kO(t,...s){f.Se(t);const i=d.FO(),e=i.jO(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.Ul())return e.zO();if(s.length<e.BO())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.BO()} expected)`);let h=e.UO(),r=h.WO(),n=i.QO();if(n){r=r.slice(0);const a=new Set(r);for(const u of n.WO())a.has(u)||(r.push(u),a.add(u));for(const l of i.JO())a.has(l)||(r.push(l),a.add(l))}const o=h.YO(r,e.VO(),e.HO(),e.zO(),...s);return o}qO(t){const s=d.XO().ZO();if(!s)throw new Error("not in a function which returns a value");switch(s.KO()){case 1:"number"==typeof t&&s.$O(t);break;case 2:"string"==typeof t&&s.$O(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.$O(t)}}signal(t){f.Se(t),d.FO().t3(t)}s3(t){return f.Se(t),d.FO().i3(t)}e3(){return[d.vO(),d.GO()]}get isSuspended(){return d.h3()}get r3(){return d.n3()}get o3(){return d.a3()}get u3(){return d.l3()}get f3(){return d.d3()}get m3(){return d.g3()}set m3(t){f.ge(t),d.y3(t)}get fps(){return t||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),t=!0),d.M3()}get framesPerSecond(){return d.M3()}get w3(){return d.S3()}get T3(){return d.b3()}get x3(){return d.v3()}get C3(){return d.G3()}set C3(t){if(!e.has(t))throw new Error("invalid framerate mode");d.I3(t)}get N3(){return d.E3()}set N3(t){f.ge(t),d._3(t)}get D3(){return d.A3()}set D3(t){d.L3(t)}random(){return d.O3()}get layout(){const t=d.R3();if(t)return t.P3();throw new Error("no layout is running - make sure a layout is loaded before accessing")}F3(t){let s=d.j3(),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.z3(t))return i.P3();throw new Error("invalid layout")}B3(){return d.j3().U3().map(t=>t.P3())}W3(t){let s=d.j3(),i;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(i=s.z3(t)))throw new Error("invalid layout");s.Q3()||s.J3(i)}get keyboard(){const t=d.Y3().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get V3(){const t=d.Y3().V3;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get H3(){const t=d.Y3().H3;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get q3(){const t=d.Y3().q3;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}Z3(t,s){f.Se(t),f.Se(s),d.X3(t,s)}K3(t){f.ge(t);const s=d.t4(t);return s?s.s4():null}i4(t,e){f.Qe(e);const h=d.e4();for(const s of t){const i=d.h4(s),r=i.r4();p.push([r.n4().oO(),r.o4()]),m.push(i)}if(0!==p.length){p.sort(l),m.sort((t,s)=>e(t.s4(),s.s4()));let i=!1;for(let t=0,s=p.length;t<s;++t){const n=m[t],o=h.a4(p[t][0]),a=p[t][1],u=o.u4();u[a]!==n&&((u[a]=n).r4().l4(o,!0),o.c4(n),i=!0)}i&&d.f4(),c.Dn(p),c.Dn(m)}}async d4(t,s){const i=new MessageChannel,e=i.port1,h=i.port2;return await d.m4("runtime","script-create-worker",{url:t,opts:s,port2:h},[h]),e}alert(t){return d.m4("runtime","alert",{message:t+(d.bO()?" [via Web Worker]":"")})}g4(t){return f.ge(t),d.y4(t)}M4(t){d.w4(t)}}}{let s=self.Os,n=null;self.S4=class{constructor(t){n=t,Object.defineProperties(this,{T4:{value:n.b4("audio/webm; codecs=opus"),writable:!1}})}x4(t){const s=self.C4.v4(t);if(!s)throw new Error("invalid IImageInfo");s.G4(n.I4())}N4(t){return n.do(t)}E4(t){return n.po(t)}_4(t){return n.mo(t)}D4(t){return n.yo(t)}A4(t){return n.L4(t)}O4(t){return"flat"===n.R4()&&s.lo(t)&&(t=t.toLowerCase()),n.P4(t)}get F4(){return n.j4()}async z4(t,s){if(this.T4)throw new Error("decodeWebMOpus(): not supported because WebM Opus is supported by the platform");const i=await n.I4().B4(s),e=new Float32Array(i),h=t.createBuffer(1,e.length,48e3),r=h.getChannelData(0);return r.set(e),h}U4(...t){return n.W4(...t)}Q4(t){return n.J4(t)}Y4(t){return n.V4(t)}}}{let n=self.Os,i=self.Qs,o=null;self.H4=class{constructor(t){o=t,Object.defineProperties(this,{runtime:{value:o.I4(),writable:!1}})}q4(t,s){const i=o.I4(),e=i.h4(t),h=i.h4(s);return o.Z4(e,h)}X4(t,s){const i=o.I4(),e=i.h4(t);for(const h of s){const r=i.h4(h);if(o.Z4(e,r))return h}return null}K4(t){const s=o.I4().h4(t),i=o.tR(s);return i?i.s4():null}sR(t,s){if(i.ge(t),i.ge(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");o.iR(t,s)}eR(){return o.hR()}rR(t,s){let i=o.I4(),e;e=Array.isArray(t)?t.map(t=>i.nR(t)):[i.nR(t)];const h=n.Rect.fu(s),r=[];return o.oR(null,e,h,r),r.map(t=>t.s4())}}}{let s=self.Os,i=null,e=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),h=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),r=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.DO=class{constructor(t){i=t,Object.defineProperties(this,{aR:{value:s.hi.mi,writable:!1},uR:{value:e.get(s.hi.ri)||"unknown",writable:!1},lR:{value:s.hi.ni,writable:!1},cR:{value:h.get(s.hi.oi)||"unknown",writable:!1},fR:{value:s.hi.ai,writable:!1},dR:{value:r.get(s.hi.ci)||"unknown",writable:!1}})}get exportType(){let t=i.pR();return i.mR()?t="nwjs":i.gR()?t="windows-webview2":"cordova"===t?t="Android"===s.hi.ri?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get renderer(){return i.MR().yR()}get wR(){return i.MR().SR()}get TR(){return i.MR().bR()}get xR(){return i.MR().vR()}get CR(){return i.MR().GR()}get IR(){return i.MR().NR()}get devicePixelRatio(){return i.ER()}}}{const ce=self.Qs;self.TO=class{constructor(t){this._R=t.DR()}getItem(t){return ce.Se(t),this._R.getItem(t)}setItem(t,s){return ce.Se(t),this._R.setItem(t,s)}removeItem(t){return ce.Se(t),this._R.removeItem(t)}clear(){return this._R.clear()}keys(){return this._R.keys()}}}{const fe=self.Os,de=fe.Rs();self.AR=class{#LR;constructor(){const t=fe.RR.OR(de);this.#LR=t,Object.defineProperties(this,{runtime:{value:t.I4().PR(),writable:!1},kR:{value:t.FR(),writable:!1},jR:{value:t.zR(),writable:!1},BR:{value:t.UR(),writable:!1},WR:{value:t.QR(),writable:!1},JR:{value:t.YR(),writable:!1},VR:{value:t.HR(),writable:!1},qR:{value:t.ZR(),writable:!1},KR:{value:t.$R(),writable:!1}})}static tP(t){if(!t)return null;const s=fe.RR.sP(t);return s?s.iP():null}eP(){return this.#LR.rP().hP()}nP(){return this.#LR.oP().s4()}}}{const pe=self.Os,me=self.Qs,ge=pe.Rs();self.aP=class{#LR;constructor(){const t=pe.RR.OR(ge);this.#LR=t,Object.defineProperties(this,{name:{value:t.Uc(),writable:!1},runtime:{value:t.I4().PR(),writable:!1},uP:{value:t.lP().iP(),writable:!1}}),t.I4().cP(this,t)}addEventListener(t,s){me.Se(t),me.Qe(s),this.#LR.OO().addEventListener(t,s)}removeEventListener(t,s){me.Se(t),me.Qe(s),this.#LR.OO().removeEventListener(t,s)}fP(){return[...this.instances()]}dP(){return pe.first(this.instances())}pP(){return[...this.mP()]}gP(){return pe.first(this.mP())}yP(t){const s=this.#LR,i=s.I4().MP(t),e=s.wP(i);return e?e.s4():null}*instances(){for(const t of this.#LR.SP())yield t.s4()}*mP(){for(const t of this.#LR.bP().TP())yield t.s4()}xP(t){me.Qe(t);const s=this.#LR;if(0<s.vP())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.CP(t)}Ai(t,s,i,e,h){if(me.le(s),me.le(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#LR,n=r.I4(),o=n.R3().n4(t);if(!o)throw new Error("invalid layer");const a=n.GP(r,o,s,i,e,h),u=(e&&o.IP(a),n.FO());return u.NP(!0),a.EP(),u.NP(!1),u._P()||n.j3().DP()||n.AP(),a.s4()}}}{const ye=self.Qs,u=new WeakMap,Me=["above","below","top-sublayer","bottom-sublayer"];self.LP=class{constructor(t){u.set(this,t);const s=[],i=t.OP(),e=i.RP().length;for(let t=0;t<e;++t)s.push(new self.PP(i,t));Object.defineProperties(this,{name:{value:t.Uc(),writable:!1},index:{value:t.oO(),writable:!1},kP:{value:s,writable:!1}})}addEventListener(t,s){ye.Se(t),ye.Qe(s),u.get(this).OO().addEventListener(t,s)}removeEventListener(t,s){ye.Se(t),ye.Qe(s),u.get(this).OO().removeEventListener(t,s)}get width(){return u.get(this).Xp()}set width(t){ye.ge(t),u.get(this).nm(t)}get height(){return u.get(this).um()}set height(t){ye.ge(t),u.get(this).Kp(t)}FP(t,s){ye.ge(t),ye.ge(s);const i=u.get(this);i.nm(t),i.Kp(s)}getSize(){const t=u.get(this);return[t.Xp(),t.um()]}set scale(t){ye.ge(t),u.get(this).jP(t)}get scale(){return u.get(this).zP()}set angle(t){ye.ge(t),u.get(this).BP(t)}get angle(){return u.get(this).UP()}set scrollX(t){ye.le(t),u.get(this).WP(t)}get scrollX(){return u.get(this).QP()}set scrollY(t){ye.le(t),u.get(this).JP(t)}get scrollY(){return u.get(this).YP()}scrollTo(t,s){ye.le(t),ye.le(s);const i=u.get(this);i.WP(t),i.JP(s)}VP(){const t=u.get(this);return[t.QP(),t.YP()]}HP(t){let s=u.get(this),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(i=s.n4(t))?i.qP():null}ZP(){return u.get(this).XP().map(t=>t.qP())}*KP(){for(const t of u.get(this).KP())yield t.qP()}$P(t,s,i){const e=u.get(this),h=self.sk,r=(ye.Se(t),ye.Ke(s,h),s?e.I4().ik(s):null),n=Me.indexOf(i);if(n<0)throw new Error("invalid location");e.ek(t,r,n)}hk(t,s,i){const e=u.get(this),h=e.I4(),r=self.sk,n=(ye.Xe(t,r),h.ik(t));if(!n)throw new Error("invalid layer");ye.Ke(s,r);const o=s?h.ik(s):null,a=Me.indexOf(i);if(a<0)throw new Error("invalid location");e.rk(n,o,a)}nk(t){const s=u.get(this),i=self.sk,e=(ye.Xe(t,i),s.I4().ik(t));if(!e)throw new Error("invalid layer");const h=e.I4();s.ak(e),h.FO()._P()||h.AP()}uk(){const t=u.get(this),s=t.I4();t.lk(),s.FO()._P()||s.AP()}ck(t,s){ye.ge(t),ye.ge(s),u.get(this).fk(t,s)}dk(){return u.get(this).pk()}set Z(t){ye.Se(t);const s=u.get(this);if("perspective"===t)s.mk();else{if("orthographic"!==t)throw new Error("invalid projection");s.gk()}}get Z(){return u.get(this).yk()?"orthographic":"perspective"}}}{const we=self.Os,f=self.Qs,d=new WeakMap,Se=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Te=new Map([...Se.entries()].map(t=>[t[1],t[0]])),be=we.ir(we.Ro);self.sk=class{constructor(t){d.set(this,t);const s=[],i=t.OP(),e=i.RP().length;for(let t=0;t<e;++t)s.push(new self.PP(i,t));Object.defineProperties(this,{name:{value:t.Uc(),writable:!1},layout:{value:t.z3().P3(),writable:!1},kP:{value:s,writable:!1}}),t.I4().cP(this,t)}get Mk(){const t=d.get(this).wk();return t?t.qP():null}*Sk(){for(const t of d.get(this).Sk())yield t.qP()}*Tk(){for(const t of d.get(this).bk())yield t.qP()}*xk(){for(const t of d.get(this).bk())for(const s of t.vk())yield s.qP()}get index(){return d.get(this).oO()}get isVisible(){return d.get(this).Ck()}set isVisible(t){d.get(this).Gk(t)}get Ik(){return d.get(this).Nk()}get isInteractive(){return d.get(this).Ek()}set isInteractive(t){d.get(this)._k(t)}get Dk(){return d.get(this).Ak()}set Dk(t){d.get(this).Lk(!!t)}get Ok(){return d.get(this).Rk()}get opacity(){return d.get(this).p_()}set opacity(t){t=we.lr(+t,0,1),isNaN(t)||d.get(this).g_(t)}set scale(t){f.ge(t),d.get(this).Pk(t)}get scale(){return d.get(this).kk()}set scaleRate(t){f.ge(t),d.get(this).Fk(t)}get scaleRate(){return d.get(this).jk()}set angle(t){f.ge(t),d.get(this).BP(t)}get angle(){return d.get(this).zk()}set parallaxX(t){f.ge(t),d.get(this).Bk(t)}get parallaxX(){return d.get(this).Uk()}set parallaxY(t){f.ge(t),d.get(this).Wk(t)}get parallaxY(){return d.get(this).Qk()}set Jk(t){f.ge(t),d.get(this).nT(t)}get Jk(){return d.get(this).rT()}set Yk(t){d.get(this).Vk(t)}get Yk(){return d.get(this).Hk()}set qk(t){d.get(this).Zk(t)}get qk(){return d.get(this).Xk()}set nL(t){f.Se(t);const s=Se.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");d.get(this).WS(s)}get nL(){return Te.get(d.get(this).Kk())}set backgroundColor(t){if(f.Pe(t),t.length<3)throw new Error("expected 3 elements");be.Bo(t[0],t[1],t[2]);const s=d.get(this),i=s.$k();i.ra(be)||(i.Ho(be),s.I4().f4())}get backgroundColor(){const t=d.get(this).$k();return[t.qo(),t.Zo(),t.Xo()]}set scrollX(t){f.le(t);const s=d.get(this);s.tF(!0),s.WP(t)}get scrollX(){return d.get(this).QP()}set scrollY(t){f.le(t);const s=d.get(this);s.tF(!0),s.JP(t)}get scrollY(){return d.get(this).YP()}scrollTo(t,s){f.le(t),f.le(s);const i=d.get(this);i.tF(!0),i.WP(t),i.JP(s)}VP(){const t=d.get(this);return[t.QP(),t.YP()]}sF(){d.get(this).tF(!1)}getViewport(){return d.get(this).iF().Mu()}eF(t,s,i=0){f.le(t),f.le(s),f.le(i);const e=d.get(this),h=e.I4();return e.hF(t-h.rF(),s-h.nF(),i)}oF(t,s,i=0){f.le(t),f.le(s),f.le(i);const e=d.get(this),h=e.I4(),[r,n]=e.aF(t,s,i);return[r+h.rF(),n+h.nF()]}uF(t,s,i=0){return f.le(t),f.le(s),f.le(i),d.get(this).lF(t,s,i)}cF(t,s,i=0){return f.le(t),f.le(s),f.le(i),d.get(this).fF(t,s,i)}get dF(){return d.get(this).pF()}}}{let e=function(t){let s=Ce.get(t);return s||(s=xe.ir(xe.Event.Af),Ce.set(t,s)),s};e;const xe=self.Os,ve=self.Qs,Ce=new WeakMap,Ge=xe.Rs();self.mF=class{#LR;constructor(){const t=xe.RR.OR(Ge),s={runtime:{value:(this.#LR=t).I4().PR(),writable:!1},gF:{value:t.yF().hP(),writable:!1},uP:{value:t.lP().iP(),writable:!1}};t.MF(s),t.wF(s),Object.defineProperties(this,s),t.I4().cP(this,t)}static SF(){return xe.RR.TF()}bF(){const t=Ce.get(this);t&&(t.er(),Ce.delete(this))}addEventListener(t,s,i){ve.Se(t),ve.Qe(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){ve.Se(t),ve.Qe(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}xF(){const t=this.#LR,s=t.I4();s.vF(t),s.FO()._P()||s.j3().DP()||s.FO().CF()||s.AP()}GF(){const t=this.#LR.IF();return t?t.map(t=>t.s4()):[]}*NF(){const t=this.#LR;if(t.EF())for(const s of t._F())yield s.s4()}get uid(){return this.#LR.DF()}get AF(){return this.#LR.LF()}set m3(t){ve.ge(t),this.#LR.y3(t)}get m3(){return this.#LR.OF()}RF(){this.#LR.PF()}get r3(){const t=this.#LR;return t.I4().n3(t)}kF(...t){ve.Pe(t);const s=new Set(t),i=this.#LR.FF();return s.ne(i)}jF(t){ve.Xe(t,Set),this.#LR.zF(t)}BF(){return new Set(this.#LR.FF())}signal(t){ve.Se(t);const s=this.#LR;s.I4().FO().UF(s,t)}s3(t){ve.Se(t);const s=this.#LR;return s.I4().FO().WF(s,t)}}}{const Ie=self.Os,Ne=self.Qs,Ee=Ie.Rs();self.QF=class extends self.mF{#LR;#JF=!1;#YF=null;#VF=!1;#HF=null;#qF;#ZF;constructor(t){super(),this.#LR=Ie.RR.OR(Ee),this.#JF=!1,this.#YF=null,this.#VF=!1,this.#HF=null,this.#qF=t?.domComponentId,this.#ZF=t?.wrapperComponentId}bF(){this.XF(!1),this.KF(!1),super.bF()}$F(){return Ie.RR.tj()}sj(t){const s=this.#LR;s.I4().ij(t,s)}ej(t){const s=this.#LR;return s.I4().hj(t,s)}rj(t,s){if(Ne.Se(t),Ne.Qe(s),!this.#qF)throw new Error("no DOM component id set");const i=this.#LR.I4();i.nj(this.#qF,t,s)}oj(t){Ne.Pe(t);for(const[s,i]of t)this.rj(s,i)}aj(t,s){if(Ne.Se(t),!this.#qF)throw new Error("no DOM component id set");const i=this.#LR.I4();i.$c(this.#qF,t,s)}uj(t,s){if(Ne.Se(t),!this.#qF)throw new Error("no DOM component id set");const i=this.#LR.I4();return i.m4(this.#qF,t,s)}lj(t,s){const i=this.#LR.I4();if(!i.bO())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#qF,handler:t,data:s,responseId:null});this.aj(t,s)}XF(t){if(this.#JF!==(t=!!t)){this.#JF=t;const s=this.#LR.I4();t?(this.#YF||(this.#YF=()=>this.cj()),s.Af().addEventListener("tick",this.#YF)):s.Af().removeEventListener("tick",this.#YF)}}fj(){return this.#JF}cj(){}KF(t){if(this.#VF!==(t=!!t)){this.#VF=t;const s=this.#LR.I4();t?(this.#HF||(this.#HF=()=>this.dj()),s.Af().addEventListener("tick2",this.#HF)):s.Af().removeEventListener("tick2",this.#HF)}}pj(){return this.#VF}dj(){}mj(){return[]}gj(){return null}yj(t){}Mj(){if(!this.#ZF)throw new Error("no wrapper component id set");const t=this.#LR.I4();return t.wj(this.#ZF)}Sj(t,s){if(Ne.Se(t),Ne.Qe(s),!this.#ZF)throw new Error("no wrapper component id set");const i=this.#LR.I4();i.Tj(this.#ZF,t,s)}bj(t){Ne.Pe(t);for(const[s,i]of t)this.Sj(s,i)}xj(t,s){if(!this.#ZF)throw new Error("no wrapper component id set");this.runtime.AO.vj(this.#ZF,t,s)}Cj(t,s){if(this.#ZF)return this.runtime.AO.Gj(this.#ZF,t,s);throw new Error("no wrapper component id set")}}}{let t=function(t){return class h extends t{#Ij;#Nj;constructor(t){super(t);const s=_e.RR.OR(Oe),i=s.r4(),e=(this.#Ij=s,this.#Nj=i,Le.set(this,s),[]),h=i.Ej();if(h){const n=i.yF().OP().RP().length;for(let t=0;t<n;++t)e.push(new self.PP(h,t))}const r={kP:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#Nj.z3().P3()}get _j(){return this.#Nj.n4().qP()}get x(){return this.#Nj.tT()}set x(t){t=+t;const s=this.#Nj;isNaN(t)||s.tT()===t||(s.sT(t),s.Dj())}get y(){return this.#Nj.eT()}set y(t){t=+t;const s=this.#Nj;isNaN(t)||s.eT()===t||(s.hT(t),s.Dj())}setPosition(t,s){t=+t,s=+s;const i=this.#Nj;isNaN(t)||isNaN(s)||i.tT()===t&&i.eT()===s||(i.Aj(t,s),i.Dj())}Lj(){const t=this.#Nj;return[t.tT(),t.eT()]}Oj(t,s){if(t=+t,s=+s,!(isNaN(t)||isNaN(s)||0===t&&0===s)){const i=this.#Nj;i.Rj(t,s),i.Dj()}}get Jk(){return this.#Nj.rT()}set Jk(t){t=+t;const s=this.#Ij,i=this.#Nj;isNaN(t)||i.rT()===t||(i.nT(t),s.I4().f4())}get Pj(){return this.#Nj.kj()}get width(){return this.#Nj.Xp()}set width(t){t=+t;const s=this.#Nj;isNaN(t)||s.Xp()===t||(s.nm(t),s.Dj())}get height(){return this.#Nj.um()}set height(t){t=+t;const s=this.#Nj;isNaN(t)||s.um()===t||(s.Kp(t),s.Dj())}FP(t,s){t=+t,s=+s;const i=this.#Nj;isNaN(t)||isNaN(s)||i.Xp()===t&&i.um()===s||(i.jI(t,s),i.Dj())}getSize(){const t=this.#Nj;return[t.Xp(),t.um()]}get angle(){return this.#Nj.UP()}set angle(t){t=_e.cr(+t);const s=this.#Nj;isNaN(t)||s.UP()===t||(s.BP(t),s.Dj())}get Fj(){return _e.pr(this.angle)}set Fj(t){this.angle=_e.dr(t)}pl(){return this.#Nj.jj().Mu()}zj(){return this.#Nj.Bj().al()}Uj(){return this.#Nj.Wj()}get isVisible(){return this.#Nj.Nk()}set isVisible(t){t=!!t;const s=this.#Ij,i=this.#Nj;i.Nk()!==t&&(i.Gk(t),s.I4().f4())}get opacity(){return this.#Nj.p_()}set opacity(t){t=_e.lr(+t,0,1);const s=this.#Ij,i=this.#Nj;isNaN(t)||i.p_()===t||(i.g_(t),s.I4().f4())}set Qj(t){if(De.Pe(t),t.length<3)throw new Error("expected 3 elements");ke.Bo(t[0],t[1],t[2]);const s=this.#Ij,i=this.#Nj;i.Jj().ra(ke)||(i.Yj(ke),s.I4().f4())}get Qj(){const t=this.#Nj.Jj();return[t.qo(),t.Zo(),t.Xo()]}set nL(t){De.Se(t);const s=Re.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#Ij,e=this.#Nj;e.WS(s),i.I4().f4()}get nL(){return Pe.get(this.#Nj.Kk())}Vj(){this.#Nj.Hj()}qj(){this.#Nj.Zj()}Xj(t){De.Xe(t,Ae);const s=this.#Ij,i=s.I4().ik(t);if(!i)throw new Error("invalid layer");s.r4().Kj(i)}$j(t,s){De.Xe(t,h),this.#Nj.t5(Le.get(t),s)}get zIndex(){return this.#Nj.o4()}get s5(){return this.#Nj.i5()}set s5(t){this.#Nj.e5(!!t)}zu(t,s){return De.le(t),De.le(s),this.#Nj.h5(+t,+s)}q4(t){De.Xe(t,h);const s=this.#Ij,i=Le.get(t);return s.I4().pO().Z4(s,i)}K4(){const t=this.#Ij,s=t.I4().pO().tR(t);return s?s.s4():null}getParent(){const t=this.#Ij.r5();return t?t.s4():null}n5(){const t=this.#Ij.o5();return t?t.s4():null}*a5(){for(const t of this.#Ij.a5())yield t.s4()}u5(){return this.#Ij.l5()}c5(t){const s=this.#Ij.f5(t);return s?s.s4():null}*children(){for(const t of this.#Ij.children())yield t.s4()}*d5(){for(const t of this.#Ij.d5())yield t.s4()}p5(t,s){De.Xe(t,h),De.Ee(s),s=s||{};const i=this.#Ij,e=Le.get(t);i.m5(e,s)}removeChild(t){De.Xe(t,h);const s=this.#Ij,i=Le.get(t);s.g5(i)}y5(){const t=this.#Ij;if(t.M5()){const s=t.r5();s.g5(t)}}w5(){const t=this.#Nj;return{S5:t.T5(),b5:t.x5(),v5:t.C5(),G5:t.I5(),N5:t.E5(),_5:t.D5(),A5:t.L5(),O5:t.R5(),P5:t.k5()}}F5(t,s){De.ge(t),De.ge(s),this.#Nj.j5(t,s)}z5(){const t=this.#Nj;t.B5(),t.Dj()}U5(t,s,i){De.ge(t),De.ge(s),De.Ne(i);const e=this.#Nj;e.W5(t,s,i)&&e.Dj()}Q5(t,s){let i=NaN,e=NaN,h=NaN,r=NaN,n=NaN,o=this.#Nj;if(o.J5()){const a=o.Y5(),u=a.zT(t,s);null!==u&&(i=u.tT(),e=u.eT(),h=u.rT(),r=u.oT(),n=u.uT())}return{x:i,y:e,Jk:h,u:r,v:n}}V5(){const t=this.#Nj;if(!t.J5())return[0,0];const s=t.Y5();return[s.ET(),s._T()]}}};0;const _e=self.Os,De=self.Qs,Ae=self.sk,Le=new WeakMap,Oe=_e.Rs(),Re=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Pe=new Map([...Re.entries()].map(t=>[t[1],t[0]])),ke=_e.ir(_e.Ro);self.H5=t(self.mF),self.q5=t(self.QF)}{const Fe=self.Qs;self.Z5=class extends self.H5{#LR;constructor(){super(),this.#LR=self.mF.SF()}X5(){return this.#LR.sz().K5()}focus(){this.#LR.sz().iz()}blur(){this.#LR.sz().ez()}hz(t,s){Fe.Se(t),this.#LR.sz().rz(t,s)}}}{let e=function(t){let s=Be.get(t);return s||(s=je.ir(je.Event.Af),Be.set(t,s)),s};e;const je=self.Os,ze=self.Qs,Be=new WeakMap,Ue=je.Rs();self.nz=class{#LR;constructor(){const t=je.RR.OR(Ue),s={runtime:{value:(this.#LR=t).I4().PR(),writable:!1},behavior:{value:t.az().oz(),writable:!1},uz:{value:t.cz().lz(),writable:!1}};Object.defineProperties(this,s),t.I4().cP(this,t)}static SF(){return je.RR.TF()}get fz(){return this.#LR.dz().s4()}bF(){const t=Be.get(this);t&&(t.er(),Be.delete(this))}addEventListener(t,s,i){ze.Se(t),ze.Qe(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){ze.Se(t),ze.Qe(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}}}{const We=self.Os,Qe=We.Rs();self.pz=class{constructor(){const t=We.RR.OR(Qe),s={runtime:{value:t.I4().PR(),writable:!1},behavior:{value:t.az().oz(),writable:!1},name:{value:t.Uc(),writable:!1}};Object.defineProperties(this,s)}}}{const Je=self.Os,Ye=Je.Rs();self.mz=class{#LR;constructor(){const t=Je.RR.OR(Ye),s={runtime:{value:(this.#LR=t).I4().PR(),writable:!1}};Object.defineProperties(this,s)}fP(){return this.#LR.TP().map(t=>t.s4())}static tP(t){if(!t)return null;const s=Je.RR.gz(t);return s?s.oz():null}}}{const Ve=self.Os,He=self.Qs,qe=Ve.ir(Ve.Ro);self.PP=class{#LR;constructor(t,s){this.#LR=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){const t=this.#LR.RP();return t[this.index].Uc()}get isActive(){return this.#LR.yz(this.index)}set isActive(t){t=!!t;const s=this.#LR;s.yz(this.index)!==t&&(s.Mz(this.index,t),s.wz(),s.I4().f4())}setParameter(t,s){He.ge(t),t=Math.floor(+t);const i=this.#LR,e=i.Sz(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof Ve.Ro){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");qe.Bo(s[0],s[1],s[2]),s=qe}else if("number"!=typeof s)throw new TypeError("expected number");const h=i.Tz(this.index,t,s);h&&i.yz(this.index)&&i.I4().f4()}getParameter(t){He.ge(t),t=Math.floor(+t);const s=this.#LR,i=s.Sz(this.index,t);if(null===i)throw new RangeError("invalid index");return i instanceof Ve.Ro?[i.qo(),i.Zo(),i.Xo()]:i}}}self.bz=class{#LR;constructor(t){this.#LR=t,Object.defineProperties(this,{name:{value:t.Uc(),writable:!1}})}get speed(){return this.#LR.xz()}get vz(){return this.#LR.Cz()}get repeatCount(){return this.#LR.Gz()}get Iz(){return this.#LR.Nz()}get Ez(){return this.#LR._z()}get frameCount(){return this.#LR.Dz()}Az(){return this.#LR.Lz().map(t=>t.Oz())}*frames(){for(const t of this.#LR.Lz())yield t.Oz()}};self.C4=class{#LR;constructor(t){this.#LR=t}static v4(t){return t.#LR}get width(){return this.#LR.Xp()}get height(){return this.#LR.um()}getSize(){const t=this.#LR;return[t.Xp(),t.um()]}Rz(t){return t.Pz(this)}kz(){return this.#LR.gN().Mu()}};{const Ze=self.Qs;self.Fz=class extends self.C4{#LR;constructor(t){super(t.jz()),this.#LR=t,Object.defineProperties(this,{duration:{value:t.zz(),writable:!1},Bz:{value:t.Uz(),writable:!1},Wz:{value:t.Qz(),writable:!1}})}Jz(){const t=this.#LR;return[t.Uz(),t.Qz()]}Yz(){return this.#LR.Vz()}qz(t){return this.Zz(t)[0]}Xz(t){return this.Zz(t)[1]}Zz(t){let s=this.#LR,i=null;if("number"==typeof t)i=s.Kz(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.$z(t)}return i?[i.tT(),i.eT()]:this.Jz()}tB(){const t=this.#LR.sB();return t?t._l():0}iB(t){return this.eB(t)[0]}hB(t){return this.eB(t)[1]}eB(t){Ze.ge(t),t=Math.floor(t);const s=this.#LR.sB();if(!s||t<0||t>=s._l())return[0,0];const i=s.El(),e=i[2*t],h=i[2*t+1];return[e,h]}get tag(){return this.#LR.rB()}}}{let s=function(t){const s=Ke.get(t);if(s.nB())throw new Error("timeline/tween was released and is no longer valid");return s};s;const Xe=self.Qs,Ke=new WeakMap;self.oB=class{constructor(t){Ke.set(this,t),t.I4().cP(this,t)}pause(){s(this).aB()}resume(){s(this).uB()}stop(){s(this).$f()}kF(t){return s(this).lB(t)}set time(t){Xe.ge(t),s(this).cB(t)}get time(){return s(this).QD()}set totalTime(t){Xe.ge(t),s(this).fB(t)}get totalTime(){return s(this).dB()}set vz(t){s(this).pB(!!t)}get vz(){return s(this).mB()}set Ez(t){s(this).gB(!!t)}get Ez(){return s(this).yB()}set playbackRate(t){Xe.ge(t),s(this).MB(t)}get playbackRate(){return s(this).wB()}get progress(){const t=s(this);return t.QD()/t.dB()}get tags(){return s(this).SB()}get finished(){return s(this).TB()}get isPlaying(){return s(this).IsPlaying()}get bB(){return s(this).xB()}get vB(){return Ke.get(this).nB()}}}{let i=new WeakMap;self.CB=class extends self.oB{constructor(t){super(t),i.set(this,t);const s={name:{value:t.Uc(),writable:!1}};Object.defineProperties(this,s)}}}{let i=function(t){const s=h.get(t);if(s.nB())throw new Error("tween was released and is no longer valid");return s},e=(i,self.Qs),h=new WeakMap,r=new WeakMap,n=null;self.GB=class extends self.oB{constructor(t,s,i){super(t),n=n||i.easeToIndexFunc,h.set(this,t),s&&r.set(this,s)}stop(){const t=i(this),s=r.get(this);s.ReleaseTween(t)}IB(t){e.Se(t);const s=self.hc.vc(n(t));i(this).NB(s)}get fz(){const t=i(this).EB();return t?t.s4():null}get _B(){return i(this).DB()}set _B(t){i(this).AB(!!t)}get value(){const t=i(this);if("value"!==t.LB())throw new Error("not a value tween");return t.RB("value").OB()}}}self.PB=class extends self.AR{constructor(){super()}};{const $e=self.Os,th=self.Qs,sh=$e.Rs();self.kB=class extends self.PB{#LR;#qF;#jB=0;#zB=new Map;constructor(t){if(super(),this.#LR=$e.RR.OR(sh),!t?.domComponentId)throw new Error("no DOM component ID specified");this.#qF=t.domComponentId,this.BB("elem-focused",t=>t.UB()),this.BB("elem-blurred",t=>{t&&t.WB()})}QB(t){const s=this.#jB++;return this.#zB.set(s,t),s}JB(t){this.#zB.delete(t)}BB(t,i){const s=this.#LR.I4();s.nj(this.#qF,t,t=>{const s=this.#zB.get(t.elementId);i(s,t)})}YB(t){th.Pe(t);for(const[s,i]of t)this.YB(s,i)}}}{const ih=self.Os,eh=(new WeakMap,ih.Rs());self.VB=class extends self.aP{#LR;constructor(){super(),this.#LR=ih.RR.OR(eh)}HB(){}qB(){return this.#LR.jz().ZB()}XB(t){}KB(t){}$B(){}tU(t){}}}{const hh=self.Os,rh=(new WeakMap,hh.Rs());self.sU=class extends self.q5{#LR;#iU=null;#eU=null;constructor(t){super(t),this.#LR=hh.RR.OR(rh)}bF(){if(super.bF(),this.#iU){const t=this.#LR.I4().Af();t.removeEventListener("renderercontextlost",this.#iU),t.removeEventListener("renderercontextrestored",this.#eU),this.#iU=null,this.#eU=null}}hU(){if(!this.#iU){this.#iU=()=>this.rU(),this.#eU=()=>this.nU();const t=this.#LR.I4().Af();t.addEventListener("renderercontextlost",this.#iU),t.addEventListener("renderercontextrestored",this.#eU)}}rU(){}nU(){}oU(t){}}}{const nh=self.Os,oh=nh.ir(nh.Rect),ah=new WeakMap,uh=nh.Rs();self.aU=class extends self.sU{#uU=-1;#lU=!0;#cU=!1;#fU=!1;#dU=-.2;#pU=nh.ir(nh.Rect,0,0,-1,-1);#mU=0;#gU=0;#yU=-1;#MU=-1;#wU=!1;constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const s=nh.RR.OR(uh),i=(ah.set(this,s),this.#uU=this.uP.QB(this),s.I4().MR());this.#mU=i.SU(),this.#gU=i.TU(),this.XF(!0)}bF(){super.bF(),this.uP.JB(this.#uU),this.bU("destroy"),this.#uU=-1,ah.delete(this)}xU(){const t=ah.get(this).I4();if(t.bO())throw new Error("not valid in worker mode");return this.vU("get-element")}bU(t,s){(s=s||{}).elementId=this.#uU,this.aj(t,s)}vU(t,s){return(s=s||{}).elementId=this.#uU,this.lj(t,s)}CU(t,s){return(s=s||{}).elementId=this.#uU,this.uj(t,s)}GU(t){t=t||{};const s=ah.get(this).r4();t.elementId=this.#uU,t.isVisible=s.Nk(),t.htmlIndex=s.n4().IU(),t.htmlZIndex=s.NU(),Object.assign(t,this.EU()),this.#lU=!!t.isVisible,this.lj("create",t),this._U(!0)}DU(t){this.#lU!==(t=!!t)&&(this.#lU=t,this.bU("set-visible",{isVisible:t}))}cj(){this._U(!1)}AU(){const t=ah.get(this).I4(),s=t.MR().LU();return"Android"===nh.hi.ri&&("scale-inner"===s||"scale-outer"===s||"crop"===s)}_U(l){const c=ah.get(this);if(!c.OU()){let t=c.r4(),s=t.n4(),i=t.jj(),[e,h]=s.aF(i.pu(),i.mu()),[r,n]=s.aF(i.gu(),i.yu()),o=c.I4().MR(),a=o.bR(),u=o.vR();if(t.Nk()&&s.Nk())if(!this.AU()&&(r<=0||n<=0||a<=e||u<=h))this.DU(!1);else{oh.set(e,h,r,n);const f=o.SU(),d=o.TU(),p=s.IU(),m=t.NU();if(!l&&oh.equals(this.#pU)&&this.#mU===f&&this.#gU===d&&this.#yU===p&&this.#MU===m)this.DU(!0);else{this.#pU.C(oh),this.#mU=f,this.#gU=d,this.#yU=p,this.#MU=m,this.DU(!0);let t=null;this.#fU&&(t=s.RU()+this.#dU),this.bU("update-position",{left:Math.round(this.#pU.pu()),top:Math.round(this.#pU.mu()),width:Math.round(this.#pU.width()),height:Math.round(this.#pU.height()),htmlIndex:p,htmlZIndex:m,fontSize:t})}}else this.DU(!1)}}PU(){this.vU("focus",{focus:!0})}kU(){this.vU("focus",{focus:!1})}UB(){this.#cU=!0}WB(){this.#cU=!1}FU(){return this.#cU}jU(t,s){this.postToDOMElement("set-css-style",{prop:nh.Ao(t),val:s})}zU(t,s){this.postToDOMElement("set-attribute",{name:t,val:s})}BU(t){this.postToDOMElement("remove-attribute",{name:t})}UU(){this.#wU||(this.#wU=!0,Promise.resolve().then(()=>{this.#wU=!1,this.bU("update-state",this.EU())}))}EU(){}WU(){return this.#uU}}}self.QU=class extends self.mz{constructor(){super()}};self.JU=class extends globalThis.pz{constructor(){super()}HB(){}};{const lh=self.Os,ch=new WeakMap,fh=lh.Rs();self.YU=class extends self.nz{#JF=!1;#VF=!1;#VU=!1;constructor(){super(),ch.set(this,lh.RR.OR(fh))}bF(){super.bF(),this.XF(!1),this.KF(!1),this.HU(!1),ch.delete(this)}$F(){return lh.RR.tj()}qU(){}sj(t){const s=ch.get(this);s.I4().ij(t,s.dz(),s.cz())}ej(t){const s=ch.get(this);return s.I4().hj(t,s.dz(),s.cz())}XF(t){if(this.#JF!==(t=!!t)){this.#JF=t;const s=ch.get(this).I4();t?s.ZU(this):s.XU(this)}}fj(){return this.#JF}cj(){}KF(t){if(this.#VF!==(t=!!t)){this.#VF=t;const s=ch.get(this).I4();t?s.KU(this):s.$U(this)}}pj(){return this.#VF}dj(){}HU(t){if(this.#VU!==(t=!!t)){this.#VU=t;const s=ch.get(this).I4();t?s.t6(this):s.s6(this)}}i6(){return this.#VU}e6(){}mj(){return[]}gj(){return null}yj(t){}}}{let e=self.Qs,h=null;self.LO=class{constructor(t){h=t}M4(t){h.w4(t)}vj(t,s,i){e.Se(t),e.Se(s),e.ke(i),h.h6(t,s,i)}Gj(t,s,i){return e.Se(t),e.Se(s),e.ke(i),h.r6(t,s,i)}n6(t){return e.Te(t),new self.o6(h,t)}set a6(t){h.u6(!!t)}get a6(){return h.l6()}c6(t){h.f6(!!t)}d6(t){e.le(t);const s=h.p6(t);return s?s.hP():null}}}self.o6=class{#m6;#g6;#y6;#M6;#w6;#S6;constructor(t,s){const i=(this.#m6=t).FO(),e=t.QO(),h=(this.#g6=e,this.#y6=e.T6(),t.XO()),r=(this.#M6=h.b6(),this.#w6=h.x6(e),i.v6()),n=r.x6();this.#S6=n,s&&n.C6(s),t.G6(!1)}I6(){const t=this.#m6.FO(),s=this.#y6,i=this.#S6;t.N6(s),this.#g6.E6(this.#M6,this.#w6),t._6(s),i.D6(i.oO()+1)}get A6(){return this.#S6.L6()}release(){const t=this.#m6,s=t.XO(),i=t.FO().v6();t.G6(!0),i.O6(),s.O6()}};{let d=self.Os,h=self.Qs,p=null,r=null;self.R6=class{constructor(t,s){r=t,p=s}P6(){p.x_()}k6(t){p.T_(t)}F6(){p._M()}j6(){p.vM()}z6(){p.kM()}setColor(t){p.m_(t[0],t[1],t[2],t[3])}B6(t,s,i,e){p.m_(t,s,i,e)}U6(){p.y_()}W6(t){p.g_(t)}Q6(t){p.ow(t)}J6(){p.aw()}rect(t){p.G_(t.left,t.top,t.right,t.bottom)}Y6(t,s,i,e){p.G_(t,s,i,e)}V6(t){p.Qu(d.Qu.ul(t))}H6(t,s,i,e,h,r,n,o){p.Vw(t,s,i,e,h,r,n,o)}q6(t,s){p.ww(d.Qu.ul(t),d.Rect.wu(s))}Z6(t,s){p.E_(d.Qu.ul(t),d.Qu.ul(s))}X6(t,s,i,e,h,r,n,o,a,u,l,c,f){p.__(t,s,i,e,h,r,n,o,a,u,l,c,d.Rect.wu(f))}K6(t,s,i,e,h,r,n,o,a,u,l,c,f){p.pw(t,s,i,e,h,r,n,o,a,u,l,c,d.Qu.ul(f))}tW(t,s,i){p.D_(t,s,i)}sW(t){p.Yw(t)}line(t,s,i,e){p.gm(t,s,i,e)}iW(t,s,i,e,h,r){p.mw(t,s,i,e,h,r)}eW(t,s,i,e){p.Sw(t,s,i,e)}hW(t){p.Cw(d.Rect.wu(t))}rW(t){p.Gw(d.Qu.ul(t))}nW(t){p.Aw(t)}oW(){p.Lw()}aW(t){p.kw(t)}uW(){p.Bw()}lW(t){h.Ke(t,self.cW);const s=t?r.ik(t):null;p.w_(s)}fW(t,s){const i=self.C4.v4(t);if(i)return i.dW(p,{XT:s?.XT??"clamp-to-edge",KT:s?.KT??"clamp-to-edge",$T:s?.$T??"trilinear",i2:s?.i2??!0});throw new Error("invalid IImageInfo")}pW(t){const s=self.C4.v4(t);if(!s)throw new Error("invalid IImageInfo");s.nI()}Pz(t){const s=self.C4.v4(t);if(!s)throw new Error("invalid IImageInfo");const i=s.wb();return self.cW.mW(r,i)}gW(t,s,i){h.ge(t),h.ge(s);const e=p.ab(t,s,{XT:i?.XT??"clamp-to-edge",KT:i?.KT??"clamp-to-edge",$T:i?.$T??"trilinear",i2:i?.i2??!0});return self.cW.mW(r,e)}yW(t,s,i){h.Xe(s,self.cW);const e=r.ik(s);p.mN(t,e,{premultiplyAlpha:i?.premultiplyAlpha??!0})}deleteTexture(t){h.Xe(t,self.cW);const s=r.ik(t);p.fb(s)}MW(){const t=p.aS();return new self.wW(r,t)}SW(){r.MR().TW(p)}bW(t){h.Xe(t,globalThis.sk);const s=r.ik(t);s.xW(p)}}}{const dh=new WeakMap,ph=new WeakMap;self.cW=class{constructor(t,s){dh.set(this,{runtime:t,vW:s}),ph.set(s,this),t.cP(this,s),Object.defineProperties(this,{width:{value:s.Xp(),writable:!1},height:{value:s.um(),writable:!1}})}static mW(t,s){if(!s)return null;const i=ph.get(s);return i||new self.cW(t,s)}}}{let e=function(t){return gh.get(t).GW};e;const mh=self.Qs,gh=new WeakMap;self.wW=class{constructor(t,s){gh.set(this,{runtime:t,GW:s}),t.cP(this,s)}release(){e(this).er()}set IW(t){mh.Se(t),e(this).pI(t)}get IW(){return e(this).gG()}set NW(t){mh.ge(t),e(this).mI(t)}get NW(){return e(this).gI()}set lineHeight(t){mh.ge(t),e(this).MI(t)}get lineHeight(){return e(this).wI()}set EW(t){e(this).SI(t)}get EW(){return e(this).TI()}set _W(t){e(this).bI(t)}get _W(){return e(this).xI()}setColor(t){mh.Pe(t),this.DW(t[0],t[1],t[2])}DW(t,s,i){e(this).NI(t,s,i)}AW(t){mh.Se(t),e(this).QS(t)}set LW(t){e(this).EI(t)}get LW(){return e(this)._I()}set verticalAlign(t){e(this).DI(t)}get verticalAlign(){return e(this).AI()}set OW(t){e(this).LI(t)}get OW(){return e(this).OI()}set RW(t){e(this).RI(t)}get RW(){return e(this).kI()}set text(t){mh.Se(t),e(this).tf(t)}get text(){return e(this).FI()}FP(t,s,i){mh.ge(t),mh.ge(s),mh.ge(i),e(this).jI(t,s,i)}Rz(){const{runtime:t,GW:s}=gh.get(this),i=s.wb();return self.cW.mW(t,i)}kz(){return e(this).gN().Mu()}PW(t){mh.Qe(t),e(this).aI=t}kW(){e(this).nI()}get FW(){return e(this).BI()}get jW(){return e(this).WI()}}}{let e=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return Mh.get(i)||""},r=function(e){return new Promise((t,s)=>{const i=document.createElement("script");i.onload=t,i.onerror=s,i.async=!1,i.type="module",i.src=e,document.head.appendChild(i)})};e,r;const g=self.Os,yh=new Set(["local","remote"]),Mh=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);g.zW=class extends g.Kh{constructor(t,s){super();const i=s.exportType,e=(this.Zc=t,this.BW="folders",this.UW=new Map,this.WW="cordova"===i,this.QW=!!s.isiOSCordova,this.JW=!!s.isFileProtocol,this.YW=s.swClientId,this.VW=s.supportedAudioFormats||{},this.HW=new Map,this.qW=!1,this.ZW=s.scriptFolder,this.XW="",this.KW="",this.$W="",this.tQ=s.fileMap||new Map,this.sQ=new Map,"html5"===i||"scirra-arcade"===i||"instant-games"===i);this.iQ=e?"remote":"local",this.eQ=new Map,this.hQ=[],this.rQ=[],this.nQ=!1,this.oQ=0,this.aQ=0,this.uQ=0,this.lQ=!1,this.cQ=g.ir(g.f1,()=>this.fQ(),50),this.dQ=g.ir(g.i1,Math.max(g.hardwareConcurrency,8)),this.pQ=g.ir(g.i1,20),this.mQ=new self.S4(this)}er(){for(const t of this.eQ.values())t.er();this.eQ.clear(),g.Dn(this.rQ),this.Zc=null}I4(){return this.Zc}gQ(t){this.BW=t}R4(){return this.BW}yQ(){return this.ZW}MQ(t){this.XW=t}j4(){return this.XW}wQ(t){this.KW=t}SQ(){return this.KW}TQ(t){this.$W=t}bQ(){return this.$W}xQ(){return this.JW}mo(t,s){return s=s||this.iQ,g.lo(t)?("flat"===this.BW&&(t=t.toLowerCase()),this.WW&&this.JW?this.vQ(t):"playable-ad-single-file"===this.Zc.pR()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===s?this.dQ:this.pQ).sc(()=>g.mo(t))):g.mo(t)}yo(t){return g.lo(t)?("flat"===this.BW&&(t=t.toLowerCase()),this.WW&&this.JW?this.CQ(t):"playable-ad-single-file"===this.Zc.pR()?g.wo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.iQ?this.dQ:this.pQ).sc(()=>g.yo(t))):g.yo(t)}do(t){return g.lo(t)?("flat"===this.BW&&(t=t.toLowerCase()),this.WW&&this.JW?this.GQ(t):"playable-ad-single-file"===this.Zc.pR()?g.So(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.iQ?this.dQ:this.pQ).sc(()=>g.do(t))):g.do(t)}async po(t){const s=await this.do(t);return JSON.parse(s)}IQ(t,s){return"flat"===this.BW&&(t=t.toLowerCase()),this.Zc.m4("runtime","cordova-fetch-local-file",{filename:t,as:s})}GQ(t){return this.IQ(t,"text")}async vQ(t){const s=await this.IQ(t,"buffer"),i=e(t);return new Blob([s],{type:i})}async NQ(t){"flat"===this.BW&&(t=t.toLowerCase());let s=this.UW.get(t);if(!s){const i=await this.vQ(t);s=URL.createObjectURL(i),this.UW.set(t,s)}return s}CQ(t){return this.IQ(t,"buffer")}P4(t){"flat"===this.BW&&(t=t.toLowerCase());let s=this.XW+t;return"Gecko"===g.hi.ci&&"preview"===this.Zc.pR()?this.EQ(s):s}L4(t){return g.uo(t)?Promise.resolve(t):this.WW&&this.JW?this.NQ(t):"playable-ad-single-file"===this.Zc.pR()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.BW&&(t=t.toLowerCase()),Promise.resolve(t))}_Q(s){if(g.uo(s)||"preview"!==this.Zc.pR()||!this.YW||!s)return s;try{const t=new URL(s,location.href);return t.searchParams.set("__c3_client_id",this.YW),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+s),s}}DQ(t){return this.L4(t)}AQ(t){if(t.LQ&&!yh.has(t.LQ))throw new Error("invalid load policy");let s=this.eQ.get(t.url);return s||(s=g.ir(g.OQ,this,{url:t.url,size:t.size||0,LQ:t.LQ||this.iQ}),this.eQ.set(s.RQ(),s),this.nQ)||(this.oQ+=s.ql(),this.rQ.push(s.PQ().then(()=>this.kQ(s.ql())))),s}FQ(t){this.eQ.delete(t.RQ())}async jQ(){try{await Promise.all(this.rQ),this.uQ=1}catch(t){console.error("Error loading: ",t),this.lQ=!0,this.fQ()}}zQ(){this.nQ=!0}BQ(){return this.lQ}kQ(t){this.aQ+=t,this.cQ.I1()}fQ(){const t=g.ir(g.Event,"loadingprogress");this.uQ=g.lr(this.aQ/this.oQ,0,1),t.progress=this.uQ,this.Zc.Af().dispatchEvent(t)}UQ(){return this.uQ}WQ(t){g.Rn(this.hQ,t),this.hQ.length&&this.rQ.push(this.QQ())}async QQ(){const t=[],s=[];for(const[i,e,h]of this.hQ)this.oQ+=h,t.push(this.JQ(i,e,s).then(()=>this.kQ(h)));await Promise.all(t),this.Zc.bO()&&0<s.length&&await this.Zc.m4("runtime","load-webfonts",{webfonts:s})}async JQ(s,i,e){try{let t=await this.L4(i);"Gecko"===g.hi.ci&&(s=`'${s}'`),("Gecko"===g.hi.ci&&"preview"===this.Zc.pR()||"playable-ad-single-file"===this.Zc.pR())&&(t=this.EQ(t));const h=new FontFace(s,`url('${t}')`);(this.Zc.bO()?self:document).fonts.add(h),await h.load(),this.Zc.bO()&&e.push({name:s,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${s}': `,t)}}b4(t){return!!this.VW[t]}YQ(t,s){this.qW=!!s;for(const[i,e,h]of t)this.HW.set(i,{fileName:i,VQ:e.map(t=>({type:t[0],HQ:t[1],qQ:i+t[1],fileSize:t[2]})),ZQ:h})}XQ(t){"flat"===this.BW&&(t=t.toLowerCase());const s=this.HW.get(t);if(!s)return null;let i=null;for(const e of s.VQ)if(i||"audio/webm; codecs=opus"!==e.type||(i=e),this.b4(e.type))return e;return i}KQ(t){const s=this.XQ(t);return s?{url:this.P4(s.qQ),type:s.type}:null}$Q(){if(this.qW){const t=[];for(const s of this.HW.values())if(!s.ZQ){const i=this.XQ(s.fileName);i&&t.push({t8:s.fileName,url:this.P4(i.qQ),type:i.type,fileSize:i.fileSize})}return t}return[]}s8(t){return"preview"===this.Zc.pR()&&(t=new URL(t,location.href).toString()),this.tQ.get(t)||null}EQ(t){let s=this.sQ.get(t);if(!s){const i=this.s8(t);if(!i)return t;s=URL.createObjectURL(i),this.sQ.set(t,s)}return s}lO(){return this.mQ}async W4(...t){const s=await Promise.all(t.map(t=>this.L4(t)));if(this.Zc.bO())if(1===t.length){const i=t[0];await import((g.lo(i)?"./":"")+i)}else{const e=t.map(t=>`import "${g.lo(t)?"./":""}${t}";`).join("\n"),h=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));await import(h)}else await Promise.all(s.map(t=>r(t)))}async J4(t){if(WebAssembly.compileStreaming){const s=await this.L4(t);return WebAssembly.compileStreaming(fetch(s))}{const i=await g.yo(t);return WebAssembly.compile(i)}}async V4(t){const s=await this.L4(t);return this.Zc.m4("runtime","add-stylesheet",{url:s})}}}{const wh=self.Os;wh.i8=class extends wh.Kh{constructor(t,s){super(),this.e8=t,this.Zc=t.I4(),this.h8=s.url||"",this.r8=s.size,this.n8=s.LQ,this.o8=s.blob||null,this.a8=!!this.o8,this.Ng=null}er(){this.Ng=null,this.e8=null,this.Zc=null,this.o8=null}RQ(){return this.h8}ql(){return this.r8}PQ(){return"local"===this.n8||this.o8?(this.a8=!0,Promise.resolve()):(this.Ng||(this.Ng=this.e8.mo(this.h8,this.n8).then(t=>(this.a8=!0,this.Ng=null,this.o8=t)).catch(t=>{console.error("Error loading resource: ",t),this.Ng=null})),this.Ng)}u8(){return this.a8}l8(){return this.o8?Promise.resolve(this.o8):this.Ng||this.e8.mo(this.h8,this.n8)}}}{const Sh=self.Os,ar=new Sh.i1,ur=new Set;Sh.OQ=class extends Sh.i8{constructor(t,s){super(t,s),this.c8=null,this.f8=null,this.od=0,this.d8=-1,this.p8=-1,ur.add(this)}er(){if(0!==this.od)throw new Error("released image asset which still has texture references");this.e8.FQ(this),this.c8=null,ur.delete(this),super.er()}static m8(){for(const t of ur)t.c8=null,t.f8=null,t.od=0}dW(t,s){return s=s||{},this.od++,this.f8?Promise.resolve(this.f8):(this.c8||(s.t2=this.Zc.MR().g8(),this.c8=this.y8(t,s)),this.c8)}async y8(s,i){try{const e=await this.l8();return 0===this.od?this.c8=null:await ar.sc(async()=>{const t=await s.eD(e,i);return this.c8=null,0===this.od?(s.fb(t),null):(this.f8=t,this.d8=t.Xp(),this.p8=t.um(),this.f8)})}catch(t){throw console.error("Failed to load texture: ",t),t}}nI(){if(this.od<=0)throw new Error("texture released too many times");if(this.od--,0===this.od&&this.f8){const t=this.f8.xS();t.fb(this.f8),this.f8=null}}M8(){return this.od}wb(){return this.f8}Xp(){return this.d8}um(){return this.p8}async w8(){const t=await this.l8();return Sh.Pi.ImageBitmap?createImageBitmap(t):Sh.bo(t)}}}{let t=function(t,s){return t.r4().S8()-s.r4().S8()};t;const lr=self.Os;lr.T8=class extends lr.Kh{constructor(t,s,i){super(),this.b8=t,this.Ja=s,this.Ya=i,this.x8=[],this.v8=!0,this.C8=new Set,this.G8=!1}er(){lr.Dn(this.x8),this.C8.clear(),this.b8=null}$f(){lr.Dn(this.x8),this.v8=!0,this.C8.clear(),this.G8=!1}I8(){this.v8=!1}Yl(){if(this.x8.length){if(this.x8.length>this.C8.size)return!1;this.N8()}return!0}E8(t){this.C8.has(t)?(this.C8.delete(t),0===this.C8.size&&(this.G8=!1)):(this.x8.push(t),this.v8=1===this.x8.length)}c0(t){this.C8.add(t),this.G8=!0,50<=this.C8.size&&this.N8()}N8(){this.G8&&(this.x8.length===this.C8.size?this.$f():(lr.zn(this.x8,this.C8),this.C8.clear(),this.G8=!1))}_8(){this.v8||(this.x8.sort(t),this.v8=!0)}D8(t){this.N8(),this._8(),this.x8.length&&t.push(this.x8)}}}{const cr=self.Os;cr.A8=class extends cr.Kh{constructor(t,s){super(),this.L8=t,this.O8=s,this.P8=cr.ir(cr.Wl)}er(){this.P8.er(),this.P8=null}k8(t,s,i){let e=this.P8.Ks(t,s);return e||(i?(e=cr.ir(cr.T8,this,t,s),this.P8.Set(t,s,e),e):null)}F8(t){return Math.floor(t/this.L8)}j8(t){return Math.floor(t/this.O8)}z8(e,h,r){if(h)for(let i=h.pu(),t=h.gu();i<=t;++i)for(let t=h.mu(),s=h.yu();t<=s;++t)if(!r||!r.zu(i,t)){const n=this.k8(i,t,!1);n&&(n.c0(e),n.Yl())&&this.P8.Vl(i,t)}if(r)for(let i=r.pu(),t=r.gu();i<=t;++i)for(let t=r.mu(),s=r.yu();t<=s;++t)h&&h.zu(i,t)||this.k8(i,t,!0).E8(e)}B8(t,s){let i=this.F8(t.pu()),e=this.j8(t.mu()),h=this.F8(t.gu()),r=this.j8(t.yu());for(;i<=h;++i)for(let t=e;t<=r;++t){const n=this.k8(i,t,!1);n&&n.D8(s)}}U8(t){let s=t.pu(),i=t.mu(),e=t.gu(),h=t.yu();for(;s<=e;++s)for(let t=i;t<=h;++t){const r=this.k8(s,t,!1);r&&r.I8()}}}}{let n=function(t,s){return t.r4().S8()-s.r4().S8()},t=function(t,s){return t.r4().rT()-s.r4().rT()};n,t;const w=self.Os,fr=new w.Rect,dr=new w.Qu,pr=[],mr=(new w.Rect,new w.Rect,self.ys),vh=mr.Cs,Uh=mr.Gs,xh=mr.Ts,gr=xh.create(),yr=vh.create(),Mr=Uh.create(),wr=vh.create(),Sr=vh.create(),Tr=vh.create(),br=w.ir(w.Qa),xr=(w.ir(w.Rect),[]),vr=[],Cr=[],Gr={name:"",sid:-1,W8:!1,isVisible:!0,isInteractive:!0,Dk:!1,backgroundColor:[1,1,1,1],Yk:!0,Q8:[1,1],opacity:1,qk:!1,J8:!1,Y8:!1,V8:!1,scaleRate:1,nL:0,Jk:0,H8:[],q8:[],Z8:[]};w.X8=class extends w.Kh{constructor(t,s,i){super(),i=Object.assign({},Gr,i),this.K8=t,this.Zc=t.I4(),this.tJ=s,this.nr=i.name,this.Fg=-1,this.sJ=!!i.Dk,this.iJ=-1,this.eJ=i.sid,this.hJ=!!i.W8,this.rJ=!!i.isVisible,this.nJ=!!i.isInteractive,this.oJ=w.ir(w.Ro),this.oJ.La(i.backgroundColor),this.aJ=!!i.Yk,this.uJ=i.Q8[0],this.lJ=i.Q8[1],this.zS=w.ir(w.Ro,1,1,1,i.opacity),this.cJ=w.ir(w.Ro),this.fJ=!!i.qk,this.dJ=!!i.J8,this.pJ=!!i.Y8,this.mJ=!!i.V8,this.gJ=i.scaleRate,this.jS=i.nL,this.yJ=null,this.MJ=1,this.BS=i.Jk,this.wJ=0,this.SJ=0,this.TJ=0,this.bJ=!1,this.sE=w.ir(w.Rect),this.xJ=w.ir(w.Rect),this.vJ=w.ir(w.Rect),this.CJ=!0,this.ib=xh.create(),this.GJ=!0,this.YA=xh.create(),this.IJ=!0,this.NJ=w.ir(w.Jg.qg),this.EJ=!0,this._J=[],this.DJ=i.H8,this.AJ=[],this.LJ=[],this.OJ=new Map,this.x8=[],this.RJ=!1,this.PJ=!1,this.kJ=!1;const h=this.Zc.MR();this.FJ=w.ir(w.jJ,this,i.q8),this.eO=w.ir(w.Jg.eA,h.zJ(),{YD:(t,s)=>{const i=s.qL(),e=i.K_();t.QS(i.BJ()),t.oD(e),t.aD(e),h.UJ(e)},HD:t=>this.OP().WJ(t)}),this.QJ=!0,this.JJ=!0,this.YJ=null,this.VJ=[],this.HJ=!1,this.qJ=w.ir(w.Rect,0,0,-1,-1),this.ZJ=w.ir(w.Rect,0,0,-1,-1),this.XJ=new self.sk(this),this.KJ(),this.$J()&&(this.YJ=w.ir(w.A8,this.Zc.vO(),this.Zc.GO())),this.tY=i.Z8.map(t=>w.X8.sY(this.K8,this,t))}iY(){for(const t of this.DJ){const s=this.Zc.eY(t[1]);this.K8.hY(s),s.rY()||(s.nY(t),s.aY(this.Fg)),this.AJ.push(t),this.OJ.set(t[2],t)}w.Rn(this._J,this.AJ),this.DJ=null}static sY(t,s,i){return w.ir(w.X8,t,s,{name:i[0],sid:i[2],isVisible:i[3],isInteractive:i[13],Dk:i[19],backgroundColor:i[4].map(t=>t/255),Yk:i[5],Q8:[i[6],i[7]],opacity:i[8],qk:i[9],J8:i[17],Y8:i[18],V8:i[10],scaleRate:i[11],nL:i[12],Jk:i[16],H8:i[14],q8:i[15],Z8:i[20]})}er(){for(const t of this.tY)t.er();w.Dn(this.tY);for(const s of this.x8)this.Zc.vF(s);w.Dn(this.x8),this.FJ.er(),this.FJ=null,this.eO.er(),this.eO=null,this.XJ=null,this.tJ=null,this.K8=null,this.Zc=null}uY(t){return this.OJ.get(t)}lY(h){let r=this.K8.cY(),n=0,o=this.AJ;for(let e=0,t=o.length;e<t;++e){let t=o[e],s=this.Zc.eY(t[1]),i=!0;if(!s.fY()||r){const a=this.Zc.dY(t,this,!0);h.push(a),s.pY()&&(i=!1,this.LJ.push(a.DF()))}i&&(o[n]=o[e],++n)}w._n(o,n),this.Zc.AP(),this.c4()}mY(t,s){if(!t.lP().zR())throw new Error("instance is not of world type");const i=t.r4();if(i.n4()!==this)throw new Error("instance added to wrong layer");this.x8.push(t),0!==i.rT()&&(this.kJ=!0),s&&this.$J()&&t.r4().Dj(),this.c4(t)}gY(t){this.x8.includes(t)||(this.x8.push(t),0!==t.r4().rT()&&(this.kJ=!0),this.c4(t))}yY(t,s){const i=t.r4();if(i.n4()!==this)throw new Error("instance added to wrong layer");this.x8.unshift(t),0!==i.rT()&&(this.kJ=!0),this.c4(t),s&&this.$J()&&t.r4().Dj()}MY(t,s){const i=this.x8.indexOf(t);i<0||(s&&this.$J()&&t.r4().wY(),this.x8.splice(i,1),this.c4(t),this.SY())}TY(){this.kJ=!0}SY(){0===this.x8.length&&(this.kJ=!1)}bY(t){if(t){const s=new Set;for(const i of this.x8){const e=i.r4().S8();0<=e&&s.add(e)}let t=-1;for(const h of this.x8){const r=h.r4();if(!(0<=r.S8())){for(++t;s.has(t);)++t;r.xY(t)}}}this.x8.sort(n)}vY(){}CY(){for(const t of this.x8)t.yF().pY()||this.Zc.vF(t);this.Zc.AP(),w.Dn(this.x8),this.kJ=!1,this.c4()}GY(s,t,i,e,h,r){const n=this.Zc.FO(),o=this.Zc.IY(),a=s.NY(),u=[];for(const l of this.AJ){const c=l[0],f=c[0],d=c[1];if(t.zu(f,d)){const p=o[l[1]];if(p!==s){if(!a)continue;if(!s.EY(p))continue}let t=h;if(!t){const y=this.Zc.e4();t=this.z3()===y?this:(t=y._Y(this.Uc()))||y.a4(this.oO())}const m=this.Zc.dY(l,t,!1,void 0,void 0,!1,r),g=(t.IP(m),m.r4());g.Rj(i,e),g.Dj(),n.NP(!0),m.EP(),n.NP(!1),u.push(m)}}return u}vP(){return this.x8.length}z3(){return this.K8}Uc(){return this.nr}DY(t){this.Fg=t}oO(){return this.Fg}AY(t){this.iJ=t}IU(){return this.iJ}Ak(){return this.sJ}Lk(t){this.sJ!==(t=!!t)&&(this.sJ=t,this.K8.LY(),this.Zc.f4())}OY(){let t=this.wk();return(t?t.bk():this.z3().RY()).indexOf(this)}PY(){return this.eJ}I4(){return this.Zc}kY(){return this.hJ}FY(){for(const t of this.Sk())if(t.kY())return!0;return!1}ER(){return this.Zc.ER()}OP(){return this.FJ}nO(){return this.jY(),this.eO}jY(){const t=this.zY();if(this.QJ||t!==this.JJ||this.eO.VA()){const s=this.OP().BY();this.eO.HA(s.map(t=>t.Yx()),{ZD:s.map(t=>t.oO()),XD:!t,iA:!0}),this.QJ=!1,this.JJ=t}}wz(){this.OP().wz(),this.QJ=!0}$J(){return this.mJ&&!this.pJ}UY(){return this.YJ}WY(){this.HJ=!1}Nk(){for(const t of this.QY())if(!t.Ck())return!1;return!0}Ck(){return this.rJ}Gk(t){this.rJ!==(t=!!t)&&(this.rJ=t,this.Zc.f4())}_k(t){this.nJ=!!t}Ek(){return this.nJ}Rk(){for(const t of this.QY())if(!t.Ek())return!1;return!0}tF(t){if(this.bJ!==(t=!!t)){if(this.bJ=t){const s=this.z3();this.SJ=s.QP(),this.TJ=s.YP()}this.JY(),this.Zc.f4()}}YY(){return this.bJ}WP(t){const s=this.z3(),i=s.VY(),e=s.HY();this.SJ!==(t=(t=e<t?e:t)<i?i:t)&&(this.SJ=t,this.YY())&&(this.JY(),this.Zc.f4())}JP(t){const s=this.z3(),i=s.qY(),e=s.ZY();this.TJ!==(t=(t=e<t?e:t)<i?i:t)&&(this.TJ=t,this.YY())&&(this.JY(),this.Zc.f4())}QP(){return this.YY()?this.SJ:this.z3().QP()}YP(){return this.YY()?this.TJ:this.z3().YP()}iF(){return this.XY(),this.sE}KY(){return this.XY(),this.xJ}$Y(){return this.XY(),this.vJ}pk(){const t=this.z3();return[t.tV(),t.sV()]}iM(t){return this.Zc.iM(t)}iV(c,e){const h=this.KY();if(0===c)e.C(h);else{let o=h.bu(),a=h.xu(),t=this.eV(c),s=h.width()/t,i=h.height()/t,[u,l]=this.pk();if(.5!==u||.5!==l){let t=this.hV(),s=this.Zc,i=this.iM()/t,e=(u-.5)*s.rV()/i,h=(l-.5)*s.nV()/i,r=this.UP(),n=(0!==r&&(br.set(e,h),br.rotate(r),e=br.qa(),h=br.Xa()),w.Gr(t,0,c));o+=w.Lt(e,0,n),a+=w.Lt(h,0,n)}e.set(o-s/2,a-i/2,o+s/2,a+i/2)}}p_(){return this.zS.Ko()}g_(t){t=w.lr(t,0,1),this.zS.Ko()!==t&&(this.zS.Vo(t),this.KJ(),this.Zc.f4())}KJ(){this.cJ.C(this.zS),this.cJ.ca()}BJ(){return this.cJ}zY(){return this.zS.oa(1,1,1,1)}jk(){return this.gJ}Fk(t){this.gJ!==t&&(this.gJ=t,this.JY(),this.Zc.f4())}Uk(){return this.uJ}Qk(){return this.lJ}oV(t,s){this.uJ===t&&this.lJ===s||(this.uJ=t,this.lJ=s,this.JY(),this.Zc.f4())}Bk(t){this.oV(t,this.Qk())}Wk(t){this.oV(this.Uk(),t)}nT(t){this.BS!==t&&(this.BS=t,this.Zc.f4())}rT(){return this.BS}BP(t){t=w.cr(t),this.wJ!==t&&(this.wJ=t,this.JY(),this.Zc.f4())}UP(){return w.cr(this.K8.UP()+this.wJ)}zk(){return this.wJ}aV(){return 0<this.x8.length}u4(){return this.x8}uV(){return this.lV()&&this.pJ?(w.Rn(Cr,this.u4()),Cr.sort((t,s)=>this.cV(t,s)),Cr):this.u4()}fV(t){w.Wh(t,this.uV());for(const s of this.tY)s.Nk()&&0<s.p_()&&s.fV(t)}cV(t,s){const i=this.z3().dV(),e=i[0],h=i[1],r=i[2],n=t.r4(),o=s.r4(),a=n.tT()-e,u=n.eT()-h,l=n.rT()-r,c=o.tT()-e,f=o.eT()-h,d=o.rT()-r;return c*c+f*f+d*d-(a*a+u*u+l*l)}$k(){return this.oJ}Hk(){return this.aJ}Vk(t){this.aJ!==(t=!!t)&&(this.aJ=t,this.Zc.f4())}Xk(){return this.fJ}Zk(t){this.fJ!==(t=!!t)&&(this.fJ=t,this.Zc.f4())}pV(){return!this.I4().mV()||!this.dJ}lV(){return!this.pV()}gV(){return this.lV()&&this.z3().yV()}MV(){if(!this.gV())return!1;for(const t of this.tY)if(!t.MV())return!1;return!0}WS(t){this.jS!==t&&(this.jS=t,this.Zc.f4())}Kk(){return this.jS}wV(){return!this.tJ}wk(){return this.tJ}SV(t){this.tJ=t}bk(){return this.tY}TV(){return 0<this.tY.length}bV(t,s=!0){s?this.tY.push(t):this.tY.unshift(t)}xV(t,s,i){let e=this.tY.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.tY.splice(e,0,t)}vV(t){const s=this.tY.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.tY.splice(s,1)}CV(){for(const t of this.tY)if(t.GV())return!0;return!1}*vk(){for(const t of this.tY)yield*t.vk();yield this}*Sk(){let t=this.wk();for(;t;)yield t,t=t.wk()}*QY(){yield this,yield*this.Sk()}IV(t){for(const s of this.Sk())if(s===t)return!0;return!1}NV(t){return this===t||this.uJ===t.uJ&&this.lJ===t.lJ&&this.MJ===t.MJ&&this.gJ===t.gJ&&this.wJ===t.wJ&&this.QP()===t.QP()&&this.YP()===t.YP()}EV(){return{parallaxX:this.Uk(),parallaxY:this.Qk(),scale:this.kk(),scaleRate:this.jk(),angle:this.zk(),hasOwnScroll:this.YY(),scrollX:this.QP(),scrollY:this.YP()}}_V(t){this.oV(t.parallaxX,t.parallaxY),this.Pk(t.scale),this.Fk(t.scaleRate),this.BP(t.angle),this.tF(t.hasOwnScroll),this.WP(t.scrollX),this.JP(t.scrollY),this.XY()}DV(t){if(0!==t.size){const s=w.zn(this.x8,t);0<s&&(this.SY(),this.c4())}}c4(t){this.RJ=!1,this.HJ=!1,t&&!t.yF().lP().UR()||(this.PJ=!1)}AV(){if(!this.RJ){if(this.x8.sort(t),this.$J())for(let t=0,s=this.x8.length;t<s;++t){const i=this.x8[t].r4();i.xY(t),this.YJ.U8(i.LV())}else for(let t=0,s=this.x8.length;t<s;++t)this.x8[t].r4().xY(t);this.RJ=!0}}OV(){if(!this.PJ){let t=this.K8.RV(this.IU()),s=t.map(t=>[...t.vk()]).flat(),i=0;for(const e of s){for(const h of e.u4())h.yF().lP().UR()&&h.r4().PV(i++);e.kV()}}}kV(){this.PJ=!0}FV(){return{isVisible:this.Nk(),opacity:this.p_(),isInteractive:this.Ek()}}jV(t,s,i){const e=t.r4(),h=s.r4();if(e.n4()!==this||h.n4()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let r=e.o4(),n=h.o4();return r!==n+(i?1:-1)&&(w.Pn(this.x8,r),r<n&&n--,i&&n++,n===this.x8.length?this.x8.push(t):this.x8.splice(n,0,t),this.c4(t),!0)}zV(t,s){let i=[],e=0,h=0,r=t.length,n=s.length;for(;e<r&&h<n;){const o=t[e],a=s[h];o.r4().S8()<a.r4().S8()?(i.push(o),++e):(i.push(a),++h)}for(;e<r;++e)i.push(t[e]);for(;h<n;++h)i.push(s[h]);return i}BV(s){const i=[],e=s.length;for(let t=0;t<e-1;t+=2){const h=s[t],r=s[t+1];i.push(this.zV(h,r))}return e%2==1&&i.push(s[e-1]),i}UV(t){for(;1<t.length;)t=this.BV(t);return t[0]}WV(){return this.AV(),w.Dn(pr),this.YJ.B8(this.iF(),pr),pr.length?1===pr.length?pr[0]:this.UV(pr):[]}GV(){return this.Nk()&&0<this.p_()&&this.QV()}QV(){if(this.aV()||!this.Hk())return!0;for(const t of this.tY)if(t.QV())return!0;return!1}JV(){return this.Xk()||!this.zY()||0!==this.Kk()||this.FJ.YV()}VV(){if(this.JV())return!0;for(const t of this.tY)if(t.VV())return!0;return!1}K_(){return this.yJ}eV(t){if(this.K8.yk())return 1;{const s=this.HV();return s/(s-t)}}qV(t){const s=this.Zc.pF();if(this.K8.yk())return s;{const i=this.HV(),e=this.iM();return e/Math.abs(i-t)*s}}JY(){this.IJ=!0,this.EJ=!0,this.CJ=!0}ZV(t){return this.IJ&&(this.XV(t,this.YA,0,0,null),this.IJ=!1),this.YA}hV(t){return this.iM(t)/this.KV()}HV(){return this.gV()?this.z3().dV()[2]:this.hV()}$V(){if(this.gV()){const t=this.z3().dV();return[t[0],t[1],t[2]]}return this.tH()}tH(t=0,s=0,h=0){let r=this.Zc,i=this.z3(),e=r.sH(),n=r.iH(),o=(this.QP()-e)*this.uJ+e,a=(this.YP()-n)*this.lJ+n,u=(r.EO()&&(o=Math.round(o),a=Math.round(a)),o+t),l=a+s,c=i.yk()?this.iM(h):this.hV(h),[f,d]=this.pk();if(.5!==f||.5!==d){let t=this.iM(h)/c,s=(f-.5)*r.rV()/t,i=(d-.5)*r.nV()/t,e=this.UP();0!==e&&(br.set(s,i),br.rotate(e),s=br.qa(),i=br.Xa()),u+=s,l+=i}return[u,l,c]}XV(t,s,i,e,h){const r=this.Zc,n=this.z3();if(this.gV()){vh.C(wr,n.dV()),vh.C(Sr,n.eH()),vh.C(Tr,n.hH());const o=r.sH(),a=r.iH(),u=Sr[0]-wr[0],l=Sr[1]-wr[1],c=Sr[2]-wr[2];wr[0]=(wr[0]-o)*this.uJ+o,wr[1]=(wr[1]-a)*this.lJ+a,wr[2]*=Math.max(this.uJ,this.lJ),Sr[0]=wr[0]+u,Sr[1]=wr[1]+l,Sr[2]=wr[2]+c}else{const[f,d,p]=this.tH(i,e,h),m=(vh.set(wr,f,d,p),vh.set(Sr,f,d,p-100),this.UP());0===m?vh.set(Tr,0,1,0):vh.set(Tr,Math.sin(m),Math.cos(m),0)}t.MM(s,wr,Sr,Tr,h||r.nV())}rH(){this.GJ=!0,this.EJ=!0,this.CJ=!0}nH(t){return this.GJ&&(this.oH(t),this.GJ=!1),this.ib}oH(t){const s=this.Zc.MR(),[i,e]=this.pk();if(this.K8.yk())t.yM(this.ib,s.aH(),s.uH());else if(.5===i&&.5===e)xh.C(this.ib,s.lH());else{const h=s.aH(),r=s.uH();t.mM(this.ib,h/r,i,e)}}xW(t,s=!0,i=0,e=0,h=0){s&&t.e_(this.nH(t));let r;r=0===i&&0===e&&0===h?this.ZV(t):(this.XV(t,gr,i,e,h),gr),t.u_(r)}cH(t){this.xW(t),t.hw(this.rT())}fH(t){let s=null;if(t.eS()&&this.Zc.dH()){const i=this.Zc.MR().pH(this);i&&(s=i.UN(),t.pD(s))}return s}mH(t){if(t.gM()&&this.Zc.dH()){const s=2*(this.oO()+1);t.StartMeasuringRenderPassTime(s,1+s)}}UT(t,s,i){let e=this.Zc.MR(),h=this.JV(),r=null,n=this.fH(t);if(this.mH(t),h){const o={$T:this.Zc.IO(),W2:!0,gH:!!t.gM()&&this.Zc.yH()};"low"===e.MH()&&(o.width=e.aH(),o.height=e.uH()),r=this.Zc.wH(o),this.yJ=r,t.rD(r),this.Hk()&&t.J_(0,0,0,0)}else this.yJ=s,t.rD(s);if(this.Hk()||t.Jl(this.oJ),this.K8.SH(t,this.yJ,this.tY,h&&this.Hk()),this.mH(t),this.xW(t),t.hw(this.rT()),t.H_(this.lV()),this.KV()>Number.EPSILON){this.AV();const a=this.$J()&&0===this.rT()&&!this.kJ;this.gV()?this.TH(t):a?this.bH(t):this.xH(t,this.uV())}t.hw(0),t.ow(0),h&&(t.H_(!1),this.vH(t,r,s,i)),n&&t.gD(n),this.yJ=null}xH(i,e){let h=this.iF(),r=this.yJ,n=this.z3().yk(),o=this.z3().CH(),a=null;for(let t=0,s=e.length;t<s;++t){const u=e[t];if(u!==a){const l=(a=u).r4();l.Nk()&&l.GH(h,o,n)&&this.IH(u,l,i,r)}}}TH(e){const h=this.yJ,r=this.NH(),n=xr,o=vr,a=this.uV();for(let s=0,i=a.length;s<i;){const u=a[s],l=u.r4();if(l.Nk()&&l.EH(r)){(!u._H()||0<l.DH())&&o.push(u);const c=u.r4().kj();n.push(u);let t=s+1;for(;t<i;++t){const f=a[t],d=f.r4();if(d.Nk()&&d.EH(r)){if(d.kj()!==c)break;(f._H()?(0<d.DH()&&o.push(f),n):o).push(f)}}if(1!==n.length||n[0].AH()){this.LH(e,n);for(let t=0,s=o.length;t<s;++t){const p=o[t],m=p.r4();m.OH(!0),this.IH(p,m,e,h),m.OH(!1)}}else{this.IH(u,l,e,h);for(let t=0,s=o.length;t<s;++t){const g=o[t];if(g!==u){const y=g.r4(),M=y.n4();M.IH(g,y,e,h)}}}s=t,w.Dn(n),w.Dn(o)}else++s}}LH(i,e){const h=this.yJ;i.lD();for(let t=0,s=e.length;t<s;++t){const r=e[t],n=r.r4();n.RH(!0),this.PH(r,n,i)}i.cD();for(let t=0,s=e.length;t<s;++t){const o=e[t],a=o.r4();this.IH(o,a,i,h),a.RH(!1)}i.dD()}bH(t){let s=this.YJ,i=this.ZJ,e=this.qJ,h=this.iF(),r;i.set(s.F8(h.pu()),s.j8(h.mu()),s.F8(h.gu()),s.j8(h.yu())),this.HJ&&i.equals(e)?r=this.VJ:(r=this.WV(),this.HJ=!0,e.C(i)),this.xH(t,r),r!==this.VJ&&w.Rn(this.VJ,r)}IH(t,s,i,e){s.YV()?this.kH(t,s,i,e):this.PH(t,s,i)}PH(t,s,i){const e=s.FH();i.jM()!==e&&e.US(),t.UT(i)}kH(t,s,i,e){this.jH(t,s,i,e,null)&&this.xW(i)}jH(t,s,i,e,h){const r=s.Ej().nO();return r.hL(i,e,{rL:t,nL:s.Kk(),devicePixelRatio:this.Zc.zH(),time:t.BH(),oL:this.Zc.UH()*this.KV(),aL:this.UP(),EL:s.jj(),_L:r.VL()?null:this.WH(s),dL:h&&h.dL,pL:h&&h.pL,mL:h&&h.mL,gL:h&&h.gL}),i.hw(this.rT()),r.c_()}vH(t,s,i,e){const h=this.FJ.BY(),r=this.Zc;0===h.length?(t.rD(i),t.vM(),e&&0===this.jS&&this.zY()?t.nD(s):(t.WS(this.jS),t.QS(this.cJ),t.oD(s)),t.aD(s),r.UJ(s)):this.nO().hL(t,i,{rL:this,nL:this.Kk(),devicePixelRatio:r.zH(),oL:r.UH()*this.KV(),aL:this.UP(),EL:this.iF(),_L:null,qD:!0})}kk(){return this.MJ}Pk(t){this.MJ!==t&&(this.MJ=t,this.K8.QH(),this.JY(),this.Zc.f4())}pF(){return this.KV()*this.Zc.pF()}RU(){return this.KV()*this.Zc.RU()}KV(){return(this.MJ*this.K8.zP()-1)*this.gJ+1}XY(){if(this.CJ){this.CJ=!1;let t=this.Zc.sH(),s=this.Zc.iH(),i=(this.QP()-t)*this.uJ+t,e=(this.YP()-s)*this.lJ+s,h=this.KV(),r=this.Zc.rV()/h,n=this.Zc.nV()/h,o=i-r/2,a=e-n/2;this.Zc.EO()&&(o=Math.round(o),a=Math.round(a));const u=this.xJ,l=(u.set(o,a,o+r,a+n),this.UP()),c=(0!==l&&(fr.C(u),fr.offset(-u.bu(),-u.xu()),dr.fl(fr,l),dr.pl(fr),fr.offset(u.bu(),u.xu()),u.C(fr)),this.BS);this.iV(c,this.sE),this.gV()?this.JH(c,this.vJ):this.vJ.C(this.sE)}}JH(t,s){let i=this.Zc.MR(),e=i.bR(),h=i.vR(),[r,n]=this.hF(0,0,t),[o,a]=this.hF(e,0,t),[u,l]=this.hF(e,h,t),[c,f]=this.hF(0,h,t),d=Math.min(r,o,u,c),p=Math.min(n,a,l,f),m=Math.max(r,o,u,c),g=Math.max(n,a,l,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}hF(t,s,i=0){return this.YH(t,s,i,this.RU())}lF(t,s,i=0){return this.YH(t,s,i,this.pF()*this.ER())}YH(t,s,i,e){const h=this.Zc,r=h.xS(),n=this.KV(),o=h.rV()/n,a=h.nV()/n,u=Mr,l=(Uh.set(u,0,0,o,a),t/=e,s=u[3]-s/e,this.nH(r)),c=this.ZV(r),f=yr,d=w.Jg.Hg(t,s,i,c,l,u,f);return d?[f[0],f[1]]:[NaN,NaN]}VH(t,s){const i=this.MJ,e=this.gJ,h=this.uJ,r=this.lJ,n=this.wJ,o=(this.MJ=1,this.gJ=1,this.uJ=1,this.lJ=1,this.wJ=0,this.JY(),this.hF(t,s));return this.MJ=i,this.gJ=e,this.uJ=h,this.lJ=r,this.wJ=n,this.JY(),o}aF(t,s,i=0){return this.HH(t,s,i,this.RU())}fF(t,s,i=0){return this.HH(t,s,i,this.pF()*this.ER())}HH(t,s,i,e){const h=this.Zc,r=h.xS(),n=this.KV(),o=h.rV()/n,a=h.nV()/n,u=Mr,l=(Uh.set(u,0,0,o,a),this.nH(r)),c=this.ZV(r),f=yr,d=w.Jg.Yg(t,s,i,c,l,u,f);return d?[f[0]*e,(u[3]-f[1])*e]:[NaN,NaN]}qH(t,s){return t*=this.pF()*this.ER(),0!==s&&(t*=this.eV(s)),t}WH(t){const s=t.jj(),i=t.kj(),e=t.DH(),u=i+e,l=s.pu(),c=s.mu(),f=s.gu(),d=s.yu();if(this.gV()){if(this.ZH(l,c,i)||this.ZH(f,c,i)||this.ZH(f,d,i)||this.ZH(l,d,i))return null;if(0<e&&(this.ZH(l,c,u)||this.ZH(f,c,u)||this.ZH(f,d,u)||this.ZH(l,d,u)))return null}else if(u>=this.hV())return null;let[p,m]=this.fF(l,c,i),[g,y]=this.fF(f,d,i);if(0!==this.UP()||0<e||this.gV()){const[M,w]=this.fF(f,c,i),[S,T]=this.fF(l,d,i);if(0<e){let[t,s]=this.fF(l,c,u),[i,e]=this.fF(f,c,u),[h,r]=this.fF(f,d,u),[n,o]=this.fF(l,d,u),a=Math.min(p,g,M,S,t,i,h,n);g=Math.max(p,g,M,S,t,i,h,n),p=a,a=Math.min(m,y,w,T,s,e,r,o),y=Math.max(m,y,w,T,s,e,r,o),m=a}else{let t=Math.min(p,g,M,S);g=Math.max(p,g,M,S),p=t,t=Math.min(m,y,w,T),y=Math.max(m,y,w,T),m=t}}return fr.set(p,m,g,y),fr}NH(){return this.EJ&&(this.XH(),this.EJ=!1),this.NJ}XH(){const t=this.Zc.xS(),s=this.nH(t),i=this.ZV(t);this.NJ.ey(i,s)}ZH(t,s,i){return this.NH().ny(t,s,i)}KH(){const t={d:this.kY(),s:this.kk(),a:this.zk(),v:this.Ck(),i:this.Ek(),html:this.Ak(),bc:this.oJ.toJSON(),t:this.Hk(),sx:this.SJ,sy:this.TJ,hosp:this.bJ,px:this.Uk(),py:this.Qk(),c:this.zS.toJSON(),sr:this.jk(),fx:this.FJ.dT(),cg:this.LJ};return t}$H(t){this.hJ=!!t.d,this.MJ=t.s,this.wJ=t.a,this.rJ=!!t.v,this.nJ=!t.hasOwnProperty("i")||t.i,this.sJ=!!t.html,this.oJ.La(t.bc),this.aJ=!!t.t,t.hasOwnProperty("sx")&&(this.SJ=t.sx),t.hasOwnProperty("sy")&&(this.TJ=t.sy),t.hasOwnProperty("hosp")&&(this.bJ=!!t.hosp),this.uJ=t.px,this.lJ=t.py,this.zS.La(t.c),this.KJ(),this.gJ=t.sr,w.Rn(this.LJ,t.cg),w.Rn(this.AJ,this._J);let i=new Set(this.LJ),e=0;for(let t=0,s=this.AJ.length;t<s;++t)i.has(this.AJ[t][2])||(this.AJ[e]=this.AJ[t],++e);w._n(this.AJ,e),this.FJ.pT(t.fx),this.QJ=!0}t7(){this.bY(!1),this.c4(),this.JY(),this.rH()}qP(){return this.XJ}IP(t,s=!1){if(this.x8.includes(t))s&&this.x8.sort((t,s)=>{const i=t.r4().s7(),e=s.r4().s7();return i-e});else if(t.i7()){const i=[...t.d5()];i.push(t),i.sort((t,s)=>{const i=t.r4().s7(),e=s.r4().s7();return i-e});for(const e of i)if(e.EF())for(const h of e._F())if(!i.includes(h)){const r=[...h.d5()];r.push(h),r.sort((t,s)=>{const i=t.r4().s7(),e=s.r4().s7();return i-e}),r&&r.length&&i.splice(i.length,0,...r)}for(const n of i)n.lP().zR()&&this.mY(n,!0)}else if(t.lP().zR()&&this.mY(t,!0),t.EF())for(const o of t._F()){const a=[...o.d5()];if(a.push(o),a.sort((t,s)=>{const i=t.r4().s7(),e=s.r4().s7();return i-e}),a&&a.length)for(const u of a)u.lP().zR()&&this.mY(u,!0)}}}}{let u=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},T=function(t,s){I!==t&&(t.cH(s),I=t)},b=(u,T,self.Os),e=self.C3Debugger,h=(b.ir(b.Rect),b.ir(b.Rect),b.ir(b.Rect)),x=b.ir(b.Ro),t=self.ys,l=t.Cs,a=[],v=[],C=[],G=[],I=null;b.e7=class extends b.Kh{constructor(t,s,i){super(),this.h7=t,this.Zc=t.I4(),this.nr=i[0],this.r7=i[1],this.n7=i[2],this.Fm=i[1],this.jm=i[2],this.o7=!!i[3],this.a7=!!i[4],this.u7=i[5],this.l7=i[6],this.c7=i[7],this.f7=null,this.eJ=i[8],this.Fg=s,this.SJ=0,this.TJ=0,this.MJ=1,this.wJ=0,this.d7=new Set,this.p7=new Set,this.m7=new Set,this.g7=[],this.y7=[],this.M7=new Map,this.w7=new Map,this.S7=[],this.T7=!1,this.b7=l.create(),this.x7=l.create(),this.v7=l.create(),this.C7=[],this.G7=[],this.I7=new Map,this.N7=new Map,this.E7=-1;const h=this.Zc.MR();this.FJ=b.ir(b.jJ,this,i[11]),this.eO=b.ir(b.Jg.eA,h.zJ(),{YD:(t,s)=>{const i=s.qL(),e=i.K_();t.y_(),t.oD(e),t.aD(e),h.UJ(e)},HD:t=>this.OP().WJ(t)}),this.QJ=!0,this._7=!1,this.yJ=null,this.D7={},this.A7=new Map,this.L7=!0,this.O7=new self.LP(this),this.R7=b.ir(b.Event.Af);for(const e of i[9])this.C7.push(b.X8.sY(this,null,e));this.P7();for(const r of this.KP())r.iY();for(const n of i[10]){const o=this.Zc.eY(n[1]);if(!o)throw new Error("missing nonworld object class");o.rY()||o.nY(n),this.S7.push(n),this.hY(o)}}er(){for(const t of this.G7)t.er();b.Dn(this.G7),this.m7.clear(),this.f7=null,this.h7=null,this.Zc=null}I4(){return this.Zc}Uc(){return this.nr}PY(){return this.eJ}oO(){return this.Fg}OP(){return this.FJ}nO(){return this.jY(),this.eO}jY(){const t="low"===this.Zc.MR().MH();if(this.QJ||this._7!==t||this.eO.VA()){const s=this.OP().BY();this.eO.HA(s.map(t=>t.Yx()),{ZD:s.map(t=>t.oO()),KD:t,iA:!0}),this.QJ=!1,this._7=t}}wz(){this.OP().wz(),this.QJ=!0}k7(){let i=this.G7[0].KV();for(let t=1,s=this.G7.length;t<s;++t){const e=this.G7[t];0===e.Uk()&&0===e.Qk()||(i=Math.min(i,e.KV()))}return i}F7(){return.5*this.Zc.rV()/this.k7()}j7(){return.5*this.Zc.nV()/this.k7()}VY(){return this.z7()?-1/0:this.F7()}HY(){return this.z7()?1/0:this.Xp()-this.F7()}qY(){return this.z7()?-1/0:this.j7()}ZY(){return this.z7()?1/0:this.um()-this.j7()}WP(t){const s=this.VY(),i=this.HY();this.SJ!==(t=(t=i<t?i:t)<s?s:t)&&(this.SJ=t,this.B7(),this.Zc.f4())}QP(){return this.SJ}JP(t){const s=this.qY(),i=this.ZY();this.TJ!==(t=(t=i<t?i:t)<s?s:t)&&(this.TJ=t,this.B7(),this.Zc.f4())}YP(){return this.TJ}z7(){return this.o7}QH(){this.WP(this.QP()),this.JP(this.YP());for(const t of this.G7)t.YY()&&(t.WP(t.QP()),t.JP(t.YP()))}fk(t,s){this.u7===t&&this.l7===s||(this.u7=t,this.l7=s,this.U7()&&(this.W7(),this.B7(),this.Zc.f4()))}tV(){return this.yk()?.5:this.u7}sV(){return this.yk()?.5:this.l7}CH(){const t=this.tV(),s=this.sV();return t<0||1<t||s<0||1<s}mk(){this.a7&&(this.a7=!1,this.W7(),this.B7(),this.Zc.f4())}gk(){this.a7||(this.a7=!0,this.W7(),this.B7(),this.Zc.f4())}yk(){return this.a7}U7(){return!this.yk()}Q7(t){this.T7!==(t=!!t)&&(this.T7=t,this.B7(),this.Zc.f4())}yV(){return this.T7}J7(t,s,i,e,h,r,n,o,a){u(this.b7,t,s,i)&&u(this.x7,e,h,r)&&u(this.v7,n,o,a)||(l.set(this.b7,t,s,i),l.set(this.x7,e,h,r),l.set(this.v7,n,o,a),this.Y7())}Y7(){this.B7(),this.Zc.f4()}dV(){return this.b7}eH(){return this.x7}hH(){return this.v7}zP(){return this.MJ}jP(t){this.MJ!==t&&(this.MJ=t,this.B7(),this.QH(),this.Zc.f4())}BP(t){t=b.cr(t),this.wJ!==t&&(this.wJ=t,this.B7(),this.Zc.f4())}UP(){return this.wJ}Xp(){return this.Fm}nm(t){!isFinite(t)||t<1||(this.Fm=t)}um(){return this.jm}Kp(t){!isFinite(t)||t<1||(this.jm=t)}V7(){return this.f7}RY(){return this.C7}*KP(){for(const t of this.C7)yield*t.vk()}XP(){return this.G7}H7(){return this.G7.length}n4(t){return"number"==typeof t?this.a4(t):this._Y(t.toString())}a4(t){return t=b.lr(Math.floor(t),0,this.G7.length-1),this.G7[t]}_Y(t){return this.I7.get(t.toLowerCase())||null}q7(t){return!!this._Y(t)}Z7(t){return this.N7.get(t)||null}W7(){for(const t of this.G7)t.rH()}B7(){for(const t of this.G7)t.JY()}ek(t,s,i){if(this.q7(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=2<=i?s:s.wk(),h=b.ir(b.X8,this,e,{name:t,sid:Math.floor(1e15*Math.random()),W8:!0});this.X7(h,s,i),this.I4().f4(),this.LY()}rk(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.K7(t),this.X7(t,s,i),this.I4().f4(),this.LY())}ak(t){if(this.K7(t)){const s=this.Zc.FO();s.NP(!0),t.er(),s.NP(!1),this.I4().f4(),this.LY()}}lk(){const t=new Set;for(const s of this.KP())s.kY()&&!s.FY()&&t.add(s);if(0!==t.size){const i=this.Zc.FO();i.NP(!0);for(const e of t)this.K7(e),e.er();i.NP(!1),this.I4().f4(),this.LY()}}X7(s,i,e){if(2<=e)if(i){if(i===s||i.IV(s))throw new Error(`cannot move layer '${s.Uc()}' to sub-layer of itself`);i.bV(s,2===e),s.SV(i)}else 2===e?this.C7.push(s):this.C7.unshift(s),s.SV(null);else{const t=i.wk();if(t){if(i.IV(s))throw new Error(`cannot move layer '${s.Uc()}' to sub-layer of itself`);t.xV(s,i,0===e),s.SV(t)}else{let t=this.C7.indexOf(i);if(-1===t)throw new Error("cannot find layer to insert by");0===e&&++t,this.C7.splice(t,0,s),s.SV(null)}}}K7(t){const s=t.wk();if(s)return s.vV(t),!0;if(1<this.C7.length){const i=this.C7.indexOf(t);if(-1===i)throw new Error("cannot find layer to remove");return this.C7.splice(i,1),!0}return!1}P7(){this.G7=[...this.KP()],this.I7.clear(),this.N7.clear();for(let t=0,s=this.G7.length;t<s;++t){const i=this.G7[t];i.DY(t),this.I7.set(i.Uc().toLowerCase(),i),this.N7.set(i.PY(),i)}}t9(){let t=0;for(const s of this.C7){for(const i of s.vk())i.AY(t);s.Ak()&&t++}}s9(){return this.C7.at(-1).IU()+1}async LY(){this.P7(),this.t9(),this.E7=this.s9()}i9(){return this.E7}e9(){this.E7=-1}RV(t){const s=[];for(const i of this.C7){const e=i.IU();if(e===t)s.push(i);else if(t<e)break}return s}EV(){return{scrollX:this.QP(),scrollY:this.YP(),scale:this.zP(),angle:this.UP(),vpX:this.tV(),vpY:this.sV()}}_V(t){this.WP(t.scrollX),this.JP(t.scrollY),this.jP(t.scale),this.BP(t.angle),this.fk(t.vpX,t.vpY)}h9(){let t=this.C7.filter(t=>t.GV())[0];for(;t;){if(!t.Hk())return x.Ho(t.$k()),x.Vo(1),x;if(t.JV())return x.zo(0,0,0,0),x;t=t.bk().filter(t=>t.GV())[0]}return x.zo(0,0,0,0),x}cY(){return this.L7}r9(){return[...this.d7]}hY(t){if(t.EF())for(const s of t.o9().n9())this.d7.add(s);else this.d7.add(t)}a9(){return[...this.p7]}u9(t,s){if(t===this||!s)return Promise.resolve();t&&(b.Io(this.p7,t.p7),t.p7.clear());const i=[];for(const e of this.d7)this.p7.has(e)||(i.push(e.l9(s)),this.p7.add(e));return Promise.all(i)}async c9(t){if(t.NY())throw new Error("cannot load textures for family");const s=this.Zc.xS();if(s&&!s.pN()&&!this.p7.has(t)){this.p7.add(t);const i=t.l9(s);this.f9(i),await i,t.d9(),this.Zc.f4()}}f9(t){this.m7.add(t),t.then(()=>this.m7.delete(t)).catch(()=>this.m7.delete(t))}p9(){return Promise.all([...this.m7])}m9(t){if(t.NY()||0<t.vP())throw new Error("cannot unload textures");const s=this.Zc.xS();s&&this.p7.has(t)&&(this.p7.delete(t),t.g9(s))}y9(t,s){if(t!==this&&s)for(const i of this.p7)i.pY()||t.d7.has(i)||(i.g9(),this.p7.delete(i))}M9(){this.p7.clear()}async w9(t){const s=this.Zc,i=this.h7,e=s.FO(),h=(this.c7&&(this.f7=e.S9(this.c7),this.f7.T9()),i.b9(this),this.Fm=this.r7,this.jm=this.n7,this.SJ=s.vO()/2,this.TJ=s.GO()/2,this.QH(),this.W7(),this.B7(),this.t9(),await this.Zc.MR().x9(this.s9(),!0),this.v9(t),this.Zc.C9(!0),this.G9(),this.L7||this.I9(),this.N9(this.g7),this.N9(this.y7),this.E9(),i._9(),s.AP(),this.Zc.C9(!1),this.Zc.D9());if(await Promise.all(h),b.Dn(h),!s.A9()){for(const r of this.g7)r.L9();for(const n of this.y7)n.O9(this.M7,this.w7);for(const[o,a]of Object.entries(this.D7)){const u=this.Zc.p6(parseInt(o,10));u&&!u.NY()&&u.fY()&&b.Dn(a)}for(const l of this.g7)l.R9();for(const c of this.y7)c.R9()}b.Dn(this.g7),b.Dn(this.y7),this.M7.clear(),this.w7.clear(),await Promise.all([...this.d7].map(t=>t.P9(this.Zc.xS()))),t&&(s.Af().dispatchEvent(new b.Event("beforefirstlayoutstart")),await s.k9(new b.Event("beforeprojectstart"))),await this.F9(new b.Event("beforeanylayoutstart")),s.Af().dispatchEvent(new b.Event("beforelayoutstart")),await this.k9(new b.Event("beforelayoutstart")),s.A9()||await s.hj(b.U9.B9.z9.j9,null,null),s.Af().dispatchEvent(new b.Event("afterlayoutstart")),await this.k9(new b.Event("afterlayoutstart")),await this.F9(new b.Event("afteranylayoutstart")),t&&(s.Af().dispatchEvent(new b.Event("afterfirstlayoutstart")),await s.k9(new b.Event("afterprojectstart"))),e.W9(i),await this.p9(),this.L7=!1}v9(t){for(const s of this.Zc.IY())if(!s.NY()&&s.zR())for(const i of s.TP()){const e=i.r4(),h=e.n4(),r=b.lr(h.oO(),0,this.G7.length-1),n=this.G7[r];e.l4(n,!0),n.gY(i)}if(!t)for(const o of this.G7)o.bY(!1)}G9(){for(const t of this.G7)t.lY(this.g7),t.vY()}I9(){let s=!1;for(const[t,i]of Object.entries(this.D7)){const e=this.Zc.p6(parseInt(t,10));if(e&&!e.NY()&&e.fY())for(const h of i){let t=null;if(!e.zR()||(t=h.hasOwnProperty("instJson")?this.Z7(h.instJson.w.l):this.Z7(h.w.l))){const r=this.Zc.dY(e,t,!1,0,0,!0);h.hasOwnProperty("instJson")?r.pT(h.instJson):r.pT(h),s=!0,this.y7.push(r),h.hasOwnProperty("instJson")&&(this.M7.set(r,h),this.w7.set(h.index,r))}}}for(const n of this.G7)n.bY(!0),n.c4();s&&(this.Zc.AP(),this.Zc.Q9())}N9(s){for(const i of s)if(i.EF()){const e=i.r4(),t=i.J9();for(const h of i.yF().o9().Y9())if(h!==i.yF()){const r=h.TP();if(r.length>t)i.V9(r[t]);else{let t;t=e?this.Zc.dY(h,e.n4(),!0,e.tT(),e.eT(),!0):this.Zc.dY(h,null,!0,0,0,!0),this.Zc.AP(),h.H9(),i.V9(t),s.push(t)}}}}E9(){for(const t of this.S7){const s=this.Zc.eY(t[1]);s.EF()||this.Zc.dY(t,null,!0)}}q9(){let i=[],e=this.S7,h=0;for(let t=0,s=e.length;t<s;++t){const r=e[t],n=this.Zc.eY(r[1]);n.pY()?n.EF()&&n.o9().Z9()||i.push(this.Zc.dY(r,null,!0)):(e[h]=r,++h)}b._n(e,h),this.Zc.AP(),this.N9(i)}GY(t,s,i,e,h,r,n){if(i)return i.GY(t,s,h,r,e,n);{const o=[];for(const a of this.G7)o.push(a.GY(t,s,h,r,e,n));return o.flat()}}async X9(){const t=this.h7;this.Zc.A9()||(await this.F9(new b.Event("beforeanylayoutend")),await this.k9(new b.Event("beforelayoutend")),await this.Zc.hj(b.U9.B9.z9.K9,null,null),await this.k9(new b.Event("afterlayoutend")),await this.F9(new b.Event("afteranylayoutend"))),t.tq(!0),this.Zc.FO().sq(),this.L7||this.iq();for(const s of this.G7)s.CY();for(const i of this.Zc.IY())if(!(i.pY()||i.zR()||i.lP().FR()||i.NY())){for(const e of i.TP())this.Zc.vF(e);this.Zc.AP()}t.tq(!1),t.R3()===this&&t.b9(null)}eq(t,s){const i=t.yF().PY().toString(),e=(this.D7.hasOwnProperty(i)||(this.D7[i]=[]),this.D7[i]),h={index:s,instJson:t.dT(),sceneGraphJson:{children:[]}};e.push(h),this.A7.set(t,h)}hq(t){const s=this.A7.get(t);for(const i of t.rq()){const e=this.A7.get(i);e&&s.sceneGraphJson.children.push({index:e.index,flags:b.oq.nq(i.r4())})}}iq(){this.A7.clear();let t=0;for(const s of this.G7){s.AV();for(const i of s.u4()){const e=i.yF();!e.pY()&&e.fY()&&(this.eq(i,t),t++)}}for(const h of this.G7)for(const r of h.u4()){const n=r.yF();!n.pY()&&n.fY()&&this.hq(r)}this.A7.clear()}aq(){this.D7={},this.L7=!0}K_(){return this.yJ}JV(){const t=this.Zc,s=t.xS().eS();return"low"===t.MR().MH()||s&&t.yH()||this.FJ.YV()||s&&t.mV()}uq(t){const s=this.Zc.MR();if(this.JV()){t.rD(null),t.J_(0,0,0,0);const i={$T:this.Zc.IO(),W2:t.gM()||this.Zc.yH()||this.FJ.YV(),gH:!!t.gM()&&this.Zc.yH()};"low"===s.MH()&&(i.width=s.aH(),i.height=s.uH()),this.yJ=this.Zc.wH(i)}else this.yJ=null}lq(t){this.Zc.cq(t)&&(t.H_(!1),t.rD(null),t.vM(),t.nD(this.yJ))}fq(t){this.JV()&&(t.H_(!1),this.pq(t,this.yJ))}mq(t){t.rD(this.yJ),t.Jl(this.h9()),this.Zc.mV()&&t.V_();const s=this.RV(0);this.SH(t,this.yJ,s,!0),t.gM()&&t.StartMeasuringRenderPassTime(0,1),this.fq(t),this.yJ=null}gq(t,s){let i=null;this.Zc.cq(t)&&(i=this.yJ),t.rD(i),t.J_(0,0,0,0),this.Zc.mV()&&t.V_();const e=this.RV(s);this.SH(t,i,e,!0),this.lq(t),t.Zw(),this.Zc.MR().yq(s)}SH(t,e,s,h){const r=s.filter(t=>t.GV());for(let s=0,i=r.length;s<i;){const n=r[s];if(n.MV()&&!n.VV()){a.push(n);for(let t=s+1;t<i;++t){const o=r[t];if(!o.MV()||o.VV())break;a.push(r[t])}if(2<=a.length||1===a.length&&a[0].CV()){this.Mq(t,e,a),s+=a.length,b.Dn(a);continue}b.Dn(a)}n.UT(t,e,h&&0===s),++s}}pq(t,s){const i=this.FJ.BY(),e=this.Zc;0===i.length?(t.rD(null),t.vM(),t.nD(s),t.aD(s),e.UJ(s)):(h.set(0,0,e.rV(),e.nV()),this.nO().hL(t,null,{rL:this,nL:3,devicePixelRatio:this.Zc.zH(),oL:this.Zc.UH()*this.zP(),aL:this.UP(),EL:h,_L:null,qD:!0}))}Mq(e,h,t){t[0].Hk()||(x.Ho(t[0].$k()),x.Vo(1),e.Jl(x)),this.Zc.MR(),e.H_(!0);const r=v,n=C,o=G;for(const a of t)a.AV(),a.fV(r);const s=t[0],i=s.fH(e);s.mH(e);for(let s=0,i=r.length;s<i;){const u=r[s],l=u.r4(),c=l.n4();if(l.Nk()&&l.EH(c.NH())){(!u._H()||0<l.DH())&&o.push(u);const f=u.r4().kj();n.push(u);let t=s+1;for(;t<i;++t){const d=r[t],p=d.r4();if(p.Nk()&&p.EH(p.n4().NH())){if(p.kj()!==f)break;(d._H()?(0<p.DH()&&o.push(d),n):o).push(d)}}if(1!==n.length||n[0].AH()){this.wq(e,h,n);for(let t=0,s=o.length;t<s;++t){const m=o[t],g=m.r4(),y=g.n4();g.OH(!0),T(y,e),y.IH(m,g,e,h),g.OH(!1)}}else{T(c,e),c.IH(u,l,e,h);for(let t=0,s=o.length;t<s;++t){const M=o[t];if(M!==u){const w=M.r4(),S=w.n4();T(S,e),S.IH(M,w,e,h)}}}s=t,b.Dn(n),b.Dn(o)}else++s}i&&e.gD(i),b.Dn(r),I=null}wq(i,e,h){i.lD();for(let t=0,s=h.length;t<s;++t){const r=h[t],n=r.r4(),o=n.n4();n.RH(!0),T(o,i),o.PH(r,n,i)}i.cD();for(let t=0,s=h.length;t<s;++t){const a=h[t],u=a.r4(),l=u.n4();T(l,i),l.IH(a,u,i,e),u.RH(!1)}i.dD()}KH(){const t={sx:this.QP(),sy:this.YP(),s:this.zP(),a:this.UP(),w:this.Xp(),h:this.um(),ortho:this.yk(),vpX:this.tV(),vpY:this.sV(),fv:this.L7,persist:this.D7,fx:this.FJ.dT(),layers:{},dynamicLayers:[]};for(const s of this.G7)if(s.kY()){const i=s.wk();t.dynamicLayers.push({sid:s.PY(),name:s.Uc(),parentSid:i?i.PY():null,siblingIndex:s.OY(),data:s.KH()})}else t.layers[s.PY().toString()]=s.KH();return t}$H(t){this.SJ=t.sx,this.TJ=t.sy,this.MJ=t.s,this.wJ=t.a,this.Fm=t.w,this.jm=t.h,this.a7=!!t.ortho,t.hasOwnProperty("vpX")&&(this.u7=t.vpX),t.hasOwnProperty("vpY")&&(this.l7=t.vpY),this.L7=!!t.fv,this.D7=t.persist,this.FJ.pT(t.fx),this.QJ=!0;for(const[s,i]of Object.entries(t.layers)){const e=parseInt(s,10),h=this.Z7(e);h&&h.$H(i)}if(t.hasOwnProperty("dynamicLayers")){this.lk(),this.Zc.AP();const r=new Map,n=t.dynamicLayers;for(let t=n.length-1;0<=t;--t){const o=n[t],a=o.sid,u=o.name,l=o.parentSid,c=o.siblingIndex,f=o.data;if(this.P7(),!this.q7(u)&&!this.Z7(a)){let t,s;if(null===l)t=null,s=this.C7;else{if(!(t=this.Z7(l)))continue;s=t.bk()}const d=b.ir(b.X8,this,t,{name:u,sid:a,W8:!0});s.push(d);let i=r.get(s);i||(i=[],r.set(s,i)),i.push({_j:d,siblingIndex:c}),d.$H(f)}}for(const[p,m]of r){m.sort((t,s)=>t.siblingIndex-s.siblingIndex);for(const g of m){let t=g._j,s=g.siblingIndex,i=p.indexOf(t);p.splice(i,1),p.splice(s,0,t)}}}this.LY(),this.W7(),this.B7()}P3(){return this.O7}OO(){return this.R7}Sq(t){t.layout=this.P3();const s=this.Zc,i=s.Tq()&&!s.FO()._P();i&&e.StartMeasuringScriptTime(),this.R7.dispatchEvent(t),i&&e.AddScriptTime()}k9(t){return t.layout=this.P3(),this.R7.zf(t)}F9(t){return t.layout=this.P3(),this.Zc.k9(t)}bq(){this.xq(this.C7)}xq(t,s=0){const i=t.slice(0);i.reverse();for(const e of i)console.log("\t".repeat(s)+"- "+e.Uc()),this.xq(e.bk(),s+1)}}}{const Ir=self.Os;Ir.vq=class extends Ir.Kh{#m6;#Cq=[];#Gq=new Map;#Iq=new Map;#Nq=null;#Eq=[];#_q=null;#Dq=0;#Aq=null;constructor(t){super(),this.#m6=t}er(){this.#m6=null,this.#Nq=null,this.#_q=null,this.#Aq=null,Ir.Dn(this.#Cq),this.#Gq.clear(),this.#Iq.clear(),Ir.Dn(this.#Eq)}jb(t){const s=Ir.ir(Ir.e7,this,this.#Cq.length,t);this.#Cq.push(s),this.#Gq.set(s.Uc().toLowerCase(),s),this.#Iq.set(s.PY(),s)}I4(){return this.#m6}Lq(t){this.#_q=t}Oq(){if(this.#_q)return this.#_q;if(this.#Cq.length)return this.#Cq[0];throw new Error("no first layout")}Rq(t){return this.#Gq.get(t.toLowerCase())||null}Pq(t){return this.#Iq.get(t)||null}kq(t){return t=Ir.lr(Math.floor(t),0,this.#Cq.length-1),this.#Cq[t]}z3(t){return"number"==typeof t?this.kq(t):this.Rq(t.toString())}U3(){return this.#Cq}b9(t){this.#Nq=t}R3(){return this.#Nq}Fq(t){if(this.#Eq.includes(t))throw new Error("layout already running");this.#Eq.push(t)}jq(t){const s=this.#Eq.indexOf(t);if(-1===s)throw new Error("layout not running");this.#Eq.splice(s,1)}*zq(){this.#Nq&&(yield this.#Nq),this.#Eq.length&&(yield*this.#Eq)}Bq(t){return this.#Nq===t||this.#Eq.includes(t)}tq(t){if(t)this.#Dq++;else{if(this.#Dq<=0)throw new Error("already unset");this.#Dq--}}DP(){return 0<this.#Dq}J3(t){this.#Aq=t}_9(){this.#Aq=null}Q3(){return!!this.#Aq}Uq(){return this.#Aq}Wq(){const t=this.R3();t&&t.W7()}Qq(){const t=this.R3();t&&t.B7()}}}{const S=self.Os,Nr=new RegExp("<(.+?)>","g");S.Jq=class extends S.Kh{constructor(t){super(),this.Zc=t,this.Yq=S.ir(S.Vq),this.Hq=null,this.qq=[],this.Zq=new Map,this.Xq=new Map,this.Kq=new Map,this.$q=[],this.tZ=[],this.sZ=[],this.iZ=!1,this.eZ=!1,this.hZ=!1,this.rZ=()=>this.nZ(),this.oZ=()=>this.aZ(),this.uZ=()=>this.lZ(),this.cZ=()=>this.fZ(),this.dZ=t=>this.pZ(t.fz),this.mZ=t=>this.gZ(),this.yZ=t=>this.MZ(),this.wZ=t=>this.SZ(),this.TZ=[],this.bZ=0}er(){this.xZ(),this.rZ=null,this.oZ=null,this.uZ=null,this.cZ=null,this.dZ=null,this.yZ=null;for(const t of this.qq)t.aB(),t.er();S.Dn(this.qq),this.qq=null,this.Yq.er(),this.Yq=null,S.Dn(this.$q),this.$q=null,S.Dn(this.tZ),this.tZ=null,S.Dn(this.sZ),this.sZ=null,this.Zq.clear(),this.Zq=null,this.Xq.clear(),this.Xq=null,this.Kq.clear(),this.Kq=null,S.Dn(this.TZ),this.TZ=null,this.Zc=null}vZ(){const t=this.Zc.Af();t.addEventListener("pretick",this.rZ),t.addEventListener("tick2",this.oZ),t.addEventListener("beforelayoutchange",this.uZ),t.addEventListener("layoutchange",this.cZ),t.addEventListener("instancedestroy",this.dZ),t.addEventListener("beforeload",this.mZ),t.addEventListener("afterload",this.yZ),t.addEventListener("afterlayoutstart",this.wZ)}xZ(){const t=this.Zc.Af();t.removeEventListener("pretick",this.rZ),t.removeEventListener("tick2",this.oZ),t.removeEventListener("beforelayoutchange",this.uZ),t.removeEventListener("layoutchange",this.cZ),t.removeEventListener("instancedestroy",this.dZ),t.removeEventListener("beforeload",this.mZ),t.removeEventListener("afterload",this.yZ),t.removeEventListener("afterlayoutstart",this.wZ)}jb(t){this.Yq.sc(t);const s=S.GZ.CZ(t,this);this.sc(s),this.IZ(s),this.Kq.set(s.Uc(),0)}NZ(t){const s=this.EZ(),i=t.LF(),e=s.Ks(i),h=S.GZ.NZ(i+":"+this.Kq.get(i),e,this);return this._Z(i),this.sc(h),h}_Z(t){this.Kq.set(t,this.Kq.get(t)+1)}DZ(){for(const t of this.qq)if(!t.AZ()){const s=t.LF();this._Z(s)}}LZ(){for(const t of this.Kq.keys())this.Kq.set(t,0)}sc(t){this.qq.push(t),this.Zq.set(t.Uc().toLowerCase(),t)}c0(t){t.OZ(),t.AZ()||(S.kn(this.qq,t),S.kn(this.$q,t),S.kn(this.tZ,t),S.kn(this.sZ,t),this.Zq.delete(t.Uc().toLowerCase()),this.RZ(t),t.nB())||t.er()}ij(t){this.Zc.ij(t,this.Hq,null)}I4(){return this.Zc}EZ(){return this.Yq}PZ(t){this.Hq=t}kZ(){return this.Hq}*FZ(){for(const t of this.qq)yield t}*jZ(){for(const t of this.tZ)yield t}zZ(t,s){this.Xq.has(t)||this.Xq.set(t,new Set),this.Xq.get(t).add(s)}IZ(t){for(const s of t.BZ())this.zZ(s,t)}RZ(t){for(const[s,i]of this.Xq.entries())i.has(t)&&(i.delete(t),0===i.size)&&this.Xq.delete(s)}UZ(t){if(this.Xq.has(t))return this.Xq.get(t)}WZ(t,s){if(s)for(const i of this.qq){const e=s.every(t=>i.QZ(t.fz,t.trackId));if(e&&i.Uc().includes(t.Uc()))return i}}JZ(t){return this.Zq.get(t.toLowerCase())||null}YZ(t){for(const s of this.$q)if(s.Uc()===t)return s;for(const i of this.tZ)if(i.Uc()===t)return i;return null}*VZ(i){if(Nr.test(i)){Nr.lastIndex=0;let t,s=new Set;do{if(t=Nr.exec(i)){const e=t[1].split(",");for(const h of e)s.add(h)}}while(t);for(const r of s.values()){const n=this.JZ(r);n&&(yield n)}s.clear()}else{const t=this.JZ(i);t&&(yield t)}}*HZ(t){for(const s of this.qq)s.lB(t)&&(yield s)}qZ(t){this.$q.includes(t)||this.$q.push(t),this.ZZ()}XZ(t){S.kn(this.tZ,t),this.KZ()}$Z(t){this.tZ.includes(t)?(t.tX(!0),t.sX(!1),t.iX(!1)):(t.tX(!1),t.sX(!0),t.iX(!1),this.$q.includes(t)||this.$q.push(t)),this.ZZ()}eX(t){t.tX(!1),t.sX(!1),t.hX(),S.kn(this.$q,t),this.KZ()}rX(t){t.tX(!1),t.sX(!1),this.tZ.includes(t)&&(t.iX(!0),this.sZ.push(t),S.kn(this.tZ,t)),this.$q.includes(t)&&t.iX(!0)}nX(t){t.tX(!1),t.sX(!1),t.iX(!1),t.MB(1),S.kn(this.tZ,t)}aX(t){this.rX(t),t.hX()}nZ(){if(!this.I4().A9()&&this.iZ&&!this.eZ){for(this.hZ=!0;this.$q.length;){const t=this.$q.pop();(t.uX()?(t.lX(),this.sZ):(t.cX(),this.tZ)).push(t),0!==t.fX()&&(this.bZ=1)}const s=this.Zc.dX(),i=this.Zc.pX(),e=this.Zc.g3();for(let t=this.tZ.length-1;0<=t;t--){const h=this.tZ[t];h&&h.mX(s,e,i)}this.hZ=!1,0!==this.bZ&&this.I4().f4()}}aZ(){if(!this.I4().A9()&&this.iZ&&!this.eZ){let i;for(let t=0,s=this.sZ.length;t<s;t++){const e=this.sZ[t];i=i||new Set,e.OZ(),this.gX(e),i.add(e)}if(i){S.zn(this.sZ,i);for(let t=this.bZ=0,s=this.tZ.length;t<s;t++)if(0!==this.tZ[t].fX()){this.bZ=1;break}}this.KZ()}}gX(t){t.nB()||t.yX()&&t.MX()&&t.wX()&&t.SX()}ZZ(){this.iZ||(this.iZ=!0)}KZ(){this.sZ.length||this.tZ.length||this.$q.length||this.hZ||(this.iZ=!1)}lZ(){for(this.eZ=!0;this.$q.length;)this.eX(this.$q.pop());const t=new Set;for(const s of this.tZ){const i=s.lZ();i&&(s.OZ(),t.add(s))}S.zn(this.tZ,t),t.clear();for(const e of this.sZ){const h=e.lZ();h&&(e.OZ(),t.add(e))}S.zn(this.sZ,t),this.KZ();for(const r of this.qq)r.TX()}fZ(){this.eZ=!1}pZ(t){const s=t.yF(),i=this.UZ(s);if(i)if(this.Zc.A9())this.TZ.push(t);else for(const e of i)e.AZ()||(e.nB()?this.c0(e):e.yX()||(this.gX(e),this.c0(e)))}gZ(){for(const t of this.$q.map(t=>t))this.gX(t),this.c0(t);for(const s of this.tZ.map(t=>t))this.gX(s),this.c0(s)}MZ(){for(const t of this.TZ)this.pZ(t);S.Dn(this.TZ);for(const s of this.qq)s.MZ()}SZ(){const t=this.Zc.j3(),s=t.R3();if(s)for(const i of this.qq){const e=i.bX();e&&s.Uc()===e&&this.$Z(i)}}KH(){return{timelinesJson:this.xX(),scheduledTimelinesJson:this.vX(),playingTimelinesJson:this.CX(),markedForRemovalTimelinesJson:this.GX(),hasRuntimeListeners:this.iZ,changingLayout:this.eZ,isTickingTimelines:this.hZ}}$H(t){t&&(this.LZ(),this.IX(t.timelinesJson),this.NX(t.scheduledTimelinesJson),this.EX(t.playingTimelinesJson),this._X(t.markedForRemovalTimelinesJson),this.iZ=!t.hasRuntimeListeners,this.eZ=!!t.changingLayout,this.hZ=!!t.isTickingTimelines,this.DZ(),this.ZZ(),this.KZ())}xX(){return this.qq.map(t=>t.KH())}IX(t){for(const s of t){let t=this.JZ(s.name);if(t)t.$H(s);else{const i=this.DX(s);if(!i)continue;const e=this.JZ(i);(t=this.NZ(e)).$H(s)}t.AX()||this.c0(t)}}DX(t){const s=t.name,i=s.split(":");return i&&2===i.length?i[0]:null}vX(){return this.LX(this.$q)}NX(t){this.OX(t,this.$q)}CX(){return this.LX(this.tZ)}EX(t){this.OX(t,this.tZ)}GX(){return this.LX(this.sZ)}_X(t){this.OX(t,this.sZ)}RX(t,s){if(s)for(const i of s)if(i===t.Uc())return!0;return!1}LX(t){return t.map(t=>t.Uc())}OX(t,s){const i=new Set;for(const e of s)this.RX(e,t)||i.add(e);if(S.zn(s,i),t)for(const h of t){const r=this.JZ(h);if(r){const n=s.find((s=>t=>t.Uc()===s)(h));n||s.push(r)}}}}}{const Er=self.Os,_r=[0,0],Dr=[0,0],Ar=[0,0],Lr=[0,0,0,0,0],Or=new Array(4),Rr=[{x:0,y:0,t:0,It:0},{x:0,y:0,t:0,It:0},{x:0,y:0,t:0,It:0}],Pr={x:0,y:0,t:0,It:0};Er.PX=class{constructor(t,s){this.kX=!1,this.FX=t,this.jX=[];let i=null;if(i=s?this.FX.zX(s):Er.first(this.FX.BX())){const e=i.RB("offsetX"),h=i.RB("offsetY");if(e&&h){this.UX=e,this.WX=h;const r=e.QX(),n=h.QX();for(let t=1,s=Math.min(r.length,n.length);t<s;++t){const o=r[t],a=(o.JX(),o.YX()),u=n[t],l=(u.JX(),u.YX());a&&"cubic-bezier"===a.VX()&&l&&"cubic-bezier"===l.VX()?this.jX.push(Er.ir(Er.HX,a,l,o,u,this.jX.length)):(a&&"line"===a.VX()&&l&&l.VX(),this.jX.push(Er.ir(Er.qX,o,u,this.jX.length)))}this.kX=!0}}}er(){for(const t of this.jX)t.er();Er.Dn(this.jX),this.jX=null,this.FX=null,this.UX=null,this.WX=null}ZX(){return this.kX}XX(){return this.jX}KX(t){const s="relative"===this.UX.$X()?t.tT():0,i="relative"===this.WX.$X()?t.eT():0;for(const e of this.jX)e.KX(s,i)}Yg(s,i,t){let e=NaN,h=this.jX.length;for(let t=0;t<h;t++){const r=this.jX[t];if("cubic-bezier"===r.qx()){const n=r.Yg(s,i);(isNaN(e)||n[3]<e)&&(e=n[3],Ar[0]=n[2],Ar[1]=r.oO())}}return Ar}tK(s,i,t){const e=t.tRange;Er.ue(e[0])||(e[0]=0),Er.ue(e[1])||(e[1]=1);let h=NaN,r=this.jX.length;for(let t=0;t<r;t++){const n=this.jX[t];if("cubic-bezier"===n.qx()){const o=n.sK(s,i,e);(isNaN(h)||o[3]<h)&&(h=o[3],Ar[0]=o[2],Ar[1]=n.oO())}}return Ar}iK(t,s){return this.jX[s].iK(t)}eK(t,s){return this.jX[s].eK(t)}},Er.HX=class{constructor(t,s,i,e,h){this.Fg=h;const r=t.hK("cubic-bezier"),n=i.hK("cubic-bezier"),o=s.hK("cubic-bezier"),a=e.hK("cubic-bezier");this.rK=t.nK(),this.oK=s.nK(),this.aK=t.nK()+r.uK(),this.lK=s.nK()+o.uK(),this.cK=i.nK()+n.fK(),this.dK=e.nK()+a.fK(),this.pK=i.nK(),this.mK=e.nK(),this.gK=0,this.yK=0,this.MK=0,this.wK=0,this.SK=0,this.TK=0,this.bK=0,this.xK=0,this.vK=0,this.CK=0,this.GK=0,this.IK=0,this.NK=0,this.EK=0,this._K=0,this.DK=0,this.AK=0,this.LK=0,this.RK=0,this.PK=0,this.kK=NaN,this.kX=!1,this.FK=100,this.jK=new Array(this.FK+1),this.jK[0]=0,this.zK=0,this.BK=[],this.UK=[];for(let t=0;t<100;t++)this.UK.push({x:0,y:0,t:0,It:0});this.WK()}er(){Er.Dn(this.jK),this.jK=null,Er.Dn(this.BK),this.BK=null,Er.Dn(this.UK),this.UK=null}qx(){return"cubic-bezier"}oO(){return this.Fg}QK(){return Math.floor(this.zK/25)}JK(){return 1/this.QK()}KX(t,s){this.YK=t,this.VK=s,this.jK=new Array(this.FK+1),this.jK[0]=0,this.WK(),this.gK=this.rK+this.YK,this.yK=this.oK+this.VK,this.MK=this.aK+this.YK,this.wK=this.lK+this.VK,this.SK=this.cK+this.YK,this.TK=this.dK+this.VK,this.bK=this.pK+this.YK,this.xK=this.mK+this.VK,this.vK=3*(this.MK-this.gK),this.CK=3*(this.wK-this.yK),this.GK=3*(this.SK-this.MK),this.IK=3*(this.TK-this.wK),this.NK=3*(this.bK-this.SK),this.EK=3*(this.xK-this.TK),this._K=3*(this.MK-this.gK),this.DK=3*(this.gK+this.SK-2*this.MK),this.AK=this.bK-this.gK+3*(this.MK-this.SK),this.LK=3*(this.wK-this.yK),this.RK=3*(this.yK+this.TK-2*this.wK),this.PK=this.xK-this.yK+3*(this.wK-this.TK)}Map(t){if(!this.kX)return NaN;const s=this.HK(t);return Dr[0]=this.qK(s),Dr[1]=this.ZK(s),Dr}Yg(t,s){const i=this.XK(100),e=this.KK(t,s,i),h=this.$K(t,s,i,e);return Lr[0]=h.x,Lr[1]=h.y,Lr[2]=h.t,Lr[3]=h.It,Lr}sK(t,s,i){const e=this.XK(100),h=this.t$(t,s,e,i),r=this.$K(t,s,e,h);return Lr[0]=r.x,Lr[1]=r.y,Lr[2]=r.t,Lr[3]=r.It,Lr}iK(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,r=i*this.vK+e*this.GK+h*this.NK,n=i*this.CK+e*this.IK+h*this.EK,o=Math.hypot(r,n);return _r[0]=r/o,_r[1]=n/o,_r}eK(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,r=i*this.vK+e*this.GK+h*this.NK,n=i*this.CK+e*this.IK+h*this.EK;return Math.atan2(n,r)}HK(h){if(this.kX){let t=h*this.jK[this.FK],s=0,i=this.FK,e=0;for(;s<i;)e=s+((i-s)/2|0),this.jK[e]<t?s=e+1:i=e;this.jK[e]>t&&e--;const r=this.jK[e];return r===t?e/this.FK:(e+(t-r)/(this.jK[e+1]-r))/this.FK}}qK(t){return this.kX?self.hc.Tc("cubicbezier")(t,this.rK+this.YK,this.aK+this.YK,this.cK+this.YK,this.pK+this.YK):NaN}ZK(t){return this.kX?self.hc.Tc("cubicbezier")(t,this.oK+this.VK,this.lK+this.VK,this.dK+this.VK,this.mK+this.VK):NaN}XK(s){if(!(this.BK.length>=(s=s||100))){this.BK=new Array(s),s++;for(let t=0;t<s-1;t++){const i=t/(s-1),e=i**2,h=i**3,r=this._K*i,n=this.DK*e,o=this.AK*h,a=this.LK*i,u=this.RK*e,l=this.PK*h,c=this.gK+r+n+o,f=this.yK+a+u+l;this.UK[t].x=c,this.UK[t].y=f,this.UK[t].t=i,this.UK[t].It=0,this.BK[t]=this.UK[t]}}return this.BK}KK(s,i,e,t=0,h=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.kK))for(let t=0;t<100;t++){const n=e[t],o=n.x-s,a=n.y-i;n.It=o*o+a*a,n.It<h&&(h=n.It,r=t)}else{for(let t=this.kK;t<this.kK+5&&!(t>=e.length);t++){const u=e[t],l=u.x-s,c=u.y-i;u.It=l*l+c*c,u.It<h&&(h=u.It,r=t)}for(let t=this.kK;t>this.kK-5&&!(t<0);t--){const f=e[t],d=f.x-s,p=f.y-i;f.It=d*d+p*p,f.It<h&&(h=f.It,r=t)}}return this.kK=r}t$(s,i,e,h,r=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.kK))for(let t=0;t<100;t++){const o=e[t],a=o.x-s,u=o.y-i;o.It=a*a+u*u,o.t>=h[0]&&o.t<=h[1]&&o.It<r&&(r=o.It,n=t)}else{for(let t=this.kK;t<this.kK+5&&!(t>=e.length);t++){const l=e[t],c=l.x-s,f=l.y-i;l.It=c*c+f*f,l.t>=h[0]&&l.t<=h[1]&&l.It<r&&(r=l.It,n=t)}for(let t=this.kK;t>this.kK-5&&!(t<0);t--){const d=e[t],p=d.x-s,m=d.y-i;d.It=p*p+m*m,d.t>=h[0]&&d.t<=h[1]&&d.It<r&&(r=d.It,n=t)}}return this.kK=n}$K(n,o,a,u){let l=a[u],t=1,c=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,s=0===u?0:u-1,i=u===t-1?t-1:u+1,e=a[s].t,h=a[i].t,r=(h-e)/4;if(r<.001)break;Or[0]=a[s];for(let t=1;t<=2;t++){const f=e+t*r,d=f**2,p=f**3,m=this._K*f,g=this.DK*d,y=this.AK*p,M=this.LK*f,w=this.RK*d,S=this.PK*p,T=this.gK+m+g+y,b=this.yK+M+w+S,x=T-n,v=b-o,C=x*x+v*v;if(C<c){c=C,u=t,Pr.x=T,Pr.y=b,Pr.t=f,Pr.It=C,l=Pr;break t}const G=Rr[t-1];G.x=T,G.y=b,G.t=f,G.It=C,Or[t]=G}Or[3]=a[i],a=Or}while(t++<20);return l}WK(){this.kX=!0;let s=this.qK(0),i=this.ZK(0),e=0;for(let t=1;t<=this.FK;t++){const h=this.qK(.01*t),r=this.ZK(.01*t),n=s-h,o=i-r;e+=Math.hypot(n,o),this.jK[t]=e,s=h,i=r}this.zK=e}},Er.qX=class{constructor(t,s,i){this.Fg=i,this.s$=t.nK(),this.i$=s.nK(),this.YK=0,this.VK=0}er(){}qx(){return"line"}oO(){return this.Fg}KX(t,s){this.YK=t,this.VK=s}tT(){return this.s$+this.YK}eT(){return this.i$+this.VK}}}{const T=self.Os;T.GZ=class extends T.Kh{constructor(t,s,i){super(),this.Zc=i.I4(),this.e$=i,this.h$=s,this.nr=t,this.r$=[],this.n$=0,this.o$=null,this.a$=0,this.u$(),this.l$=null,this.c$=null,this.f$=0,this.d$=0,this.p$=1,this.m$=0,this.g$=1,this.y$=!1,this.M$=!1,this.w$=!1,this.S$=!0,this.T$=!1,this.b$=!1,this.x$=-1,this.v$=!1,this.C$=!1,this.G$=!1,this.I$=!1,this.N$=NaN,this.E$=[""],this._$="",this.D$=!1,this.bZ=0,this.A$=0,this.L$=null}static CZ(t,s){const i=s.EZ(),e=i.O$(),h=i.Ks(t[e]),r=T.ir(T.GZ,t[e],h,s);return r.R$(!0),r}static NZ(t,s,i){return T.ir(T.GZ,t,s,i)}er(){if(!this.nB()){const t=this.Zc.Af();this.e$.eX(this),this.e$.aX(this);for(const s of this.r$)s.er();T.Dn(this.r$),this.r$=null,this.Zc=null,this.e$=null,this.h$=null,this.T$=!0,this.l$=null,this.c$=null,this.P$(t)}}P$(t){const s=T.ir(T.Event,"timelinestatereleased");s.k$=this,t.dispatchEvent(s)}qx(){return 0}u$(){for(const t of this.h$.j$().F$())this.n$=this.r$.push(T.z$.jb(this,t))}B$(){return this.e$}I4(){return this.Zc}BX(){return this.r$}U$(e,h,r,n){if(this.A$){let i;for(let s=0;s<this.r$.length;s++){let t=this.r$[s];if(e===t.EB()){const o=t.RB(r);o&&h.constructor===o.W$().constructor&&o.$X()===n.$X()&&(i=i||[]).push(o)}}return i}}AX(){return!!this.r$.length}zX(t){for(const s of this.r$)if(T.dh(s.LB(),t))return s;return null}Q$(t){for(const s of this.r$)if(!s.J$()&&T.dh(s.Uc(),t))return s;return null}C6(t){this.nr=t}Uc(){return this.nr}Y$(){return this.h$}LF(){return this.h$.Uc()}dB(){return this.h$.dB()}fB(t){this.h$.fB(t)}V$(){return this.h$.V$()}H$(t){this.h$.H$(t)}q$(){return this.h$.q$()}Z$(t){this.h$.Z$(t)}$X(){return this.h$.$X()}X$(t){this.h$.$X(t)}NB(t){for(const s of this.BX())s.NB(t)}mB(){return this.h$.mB()}pB(t){return this.h$.pB(t)}yB(){return this.h$.yB()}gB(t){return this.h$.gB(t)}Gz(){return this.h$.Gz()}K$(t){return this.h$.K$(t)}MB(t){return this.p$=t}wB(){return this.p$}bX(){return this.h$.bX()}$$(){return this.h$.$$()}ttt(){return this.h$.ttt()}stt(){return this.m$}itt(){return!this.IsPlaying()||0<this.p$}TB(){return this.l$||(this.l$=new Promise(t=>{this.c$=t})),this.l$}hX(){this.l$&&(this.c$(),this.l$=null,this.c$=null)}ett(t){this.E$=T.GZ.htt(t),this.D$=!0}SB(){return this.E$}ntt(){return this.D$&&(this._$=this.E$.join(" ")),this.D$=!1,this._$}lB(t){if(!this.E$)return!1;if(!this.E$.length)return!1;const s=T.GZ.htt(t);return!!s&&!!s.length&&s.every(T.GZ.ott,this)}att(){T.U9.Timeline&&this.constructor===T.GZ&&(T.U9.Timeline.z9.PushTriggerTimeline(this),this.e$.ij(T.U9.Timeline.z9.OnTimelineStarted),this.e$.ij(T.U9.Timeline.z9.OnTimelineStartedByName),this.e$.ij(T.U9.Timeline.z9.OnTimelineStartedByTags),this.e$.ij(T.U9.Timeline.z9.OnAnyTimelineStarted),T.U9.Timeline.z9.PopTriggerTimeline())}utt(){this.x$=this.Zc.ltt()}SX(){this.G$||(this.G$=!0,T.U9.Timeline&&this.constructor===T.GZ&&(T.U9.Timeline.z9.PushTriggerTimeline(this),this.e$.ij(T.U9.Timeline.z9.OnTimelineFinished),this.e$.ij(T.U9.Timeline.z9.OnTimelineFinishedByName),this.e$.ij(T.U9.Timeline.z9.OnTimelineFinishedByTags),this.e$.ij(T.U9.Timeline.z9.OnAnyTimelineFinished),T.U9.Timeline.z9.PopTriggerTimeline()))}tX(t){this.y$=t}ctt(){return this.x$===this.Zc.ltt()}IsPlaying(t=!1){return!!this.ctt()||!(!this.ftt()||t)||this.y$}dtt(){return this.IsPlaying(!0)}xB(){return this.ptt()}ptt(){return!(this.nB()||this.ftt()||this.dtt()||this.MX())}sX(t){this.M$=t}ftt(){return this.M$}mtt(t){this.S$=t;const s=this.QD();(s<=0||s>=this.dB())&&(this.S$=!0)}MX(){return this.S$}nB(){return this.T$}iX(t){this.b$=t}uX(){return this.b$}gtt(t){this.v$=t}ytt(){return this.v$}R$(t){this.C$=!!t}AZ(){return this.C$}wX(){return this.w$}QD(){return this.f$}cB(t){const s=this.QD();this.Mtt(t),this.mtt(!1),this.MX()||this.gtt(!0),!this.dtt()&&!this.ftt()&&this.w$||(this.dtt()||this.ftt()||this.w$?this.dtt()?this.aB():this.ftt()&&(this.e$.eX(this),this.wtt()):this.wtt()),this.Stt(),this.Ttt(this.QD(),!1,!0,!0,s),this.btt(),this.bZ&&this.I4().f4(),this.xtt()}Mtt(t){(t=T.ue(t)?t:this.dB())<0?this.f$=0:t>=this.dB()?this.f$=this.dB():this.f$=t}vtt(t){(t=T.ue(t)?t:this.dB())<0?this.f$=0:t>=this.dB()?this.f$=this.dB():this.f$=t;for(const s of this.r$)s.Ctt()}xtt(){T.U9.Timeline&&this.constructor===T.GZ&&(T.U9.Timeline.z9.PushTriggerTimeline(this),this.e$.ij(T.U9.Timeline.z9.OnTimeSet),this.e$.ij(T.U9.Timeline.z9.OnTimeSetByName),this.e$.ij(T.U9.Timeline.z9.OnTimeSetByTags),T.U9.Timeline.z9.PopTriggerTimeline())}Gtt(){if(!this.mB())if(this.yB()&&1===this.m$){if(this.itt()){if(this.QD()>=this.dB())return!1}else if(this.QD()<=0)return!1}else if(!this.mB()&&!this.yB())if(this.itt()){if(this.QD()>=this.dB())return!1}else if(this.QD()<=0)return!1;return!0}uB(){this.nB()||this.Gtt()&&this.Play(!0)}Play(t=!1){return!this.nB()&&!this.ftt()&&(this.dtt()&&this.ctt()?this.Itt():!this.dtt()&&!!(this.MX()||t||this.ytt())&&this.Ntt())}Itt(){return this.gtt(!1),this.e$.XZ(this),this.e$.$Z(this),this.TB(),!0}Ntt(){return this.gtt(!1),this.e$.$Z(this),this.TB(),!0}aB(t=!1){this.nB()||(this.mtt(t),this.e$.rX(this),this.MX()&&this.hX())}$f(t=!0,s=!1){if(!this.nB()){if(!this.dtt()&&this.ftt())return this.e$.eX(this);if(!this.MX()){this.aB(!0),this.itt()?this.Mtt(0):this.Mtt(this.dB());const i=this.QD();this.Stt(),s?this.Ett(i):this.Ttt(i,!1,!1,!0),t&&this.xtt(),this.btt(),this.bZ&&t&&this.I4().f4()}}}_tt(){this.$f(!1,!0)}Ett(t){this.Ttt(t,!1,!1,!0,NaN,!1,!0)}lZ(){if(!this.nB()){if(!this.I4().A9()&&this.Dtt())return!1;this.e$.nX(this),this.I4().A9()||this._tt()}return!0}wtt(){this.cX(!0)}lX(){this.cX(!1,!0),this.tX(!1),this.sX(!1)}cX(t=!1,s=!1){if(!this.uX()||s){if(t){this.G$=!1,this.w$=!0,this.I$=!0,this.Stt();for(const i of this.r$)i.cX()}else if(this.tX(!0),this.sX(!1),this.att(),this.MX()){this.x$=-1,0!==this.m$&&(this.p$=Math.abs(this.p$)),this.m$=0,this.g$=1,this.S$=!1,this.G$=!1,this.w$=!0,this.I$=!0,this.itt()?this.Mtt(0):this.Mtt(this.dB()),this.Stt();for(const e of this.r$)e.cX()}else{this.I$=!0,this.G$=!1,this.Stt();for(const h of this.r$)h.Att()}this.btt()}}fX(){return this.bZ}Stt(){this.A$=0;for(const t of this.r$)t.PN()&&(this.A$=1)}btt(){this.bZ=0;for(const t of this.r$)t.Ltt(),0===this.bZ&&1===t.fX()&&(this.bZ=1),this.o$||1!==t.Ott()||(this.o$||(this.o$=[]),this.a$=this.o$.push(t))}mX(t,s,i){if(this.ttt()){if(0===t&&0===this.N$)return;this.N$=t,t=i}else{if(0===i&&0===this.N$)return;t=this.N$=i,s=1}const e=this.f$+this.d$,h=t*s*this.p$,r=e+h,n=this.h$.Rtt;r<0?(this.f$=0,this.d$=-r):n<=r?(this.f$=n,this.d$=this.f$-r):(this.f$=r,this.d$=0);let o=!1,a=!1,u=this.mB(),l=this.yB();u||l?u&&!l?0<this.p$?this.f$>=n&&(this.vtt(0),a=!0):this.f$<=0&&(this.vtt(n),a=!0):!u&&l?0<this.p$?this.f$>=n&&(this.Mtt(n),this.MB(-1*this.wB()),a=!0,1===this.m$?this.g$<this.Gz()?(this.g$++,this.m$=0):o=!0:0===this.m$&&(this.m$=1)):this.f$<=0&&(this.Mtt(0),this.MB(-1*this.wB()),a=!0,1===this.m$?this.g$<this.Gz()?(this.g$++,this.m$=0):o=!0:0===this.m$&&(this.m$=1)):u&&l&&(0<this.p$?this.f$>=n&&(this.Mtt(n),this.MB(-1*this.wB()),a=!0,this.m$++,T.wrap(this.m$,0,2)):this.f$<=0&&(this.Mtt(0),this.MB(-1*this.wB()),a=!0,this.m$++,T.wrap(this.m$,0,2))):0<this.p$?this.f$>=n&&(this.g$<this.Gz()?(this.g$++,this.vtt(0),a=!0):(this.Mtt(n),o=!0)):this.f$<=0&&(this.g$<this.Gz()?(this.g$++,this.vtt(n),a=!0):(this.Mtt(0),o=!0));let c,f=this.n$;if(o){for(c=0;c<f;c++)this.r$[c].Ptt();this.aB(!0),this.utt()}else{const d=this.a$;for(c=0;c<d;c++)this.o$[c].ktt();if(1===this.A$)for(c=0;c<f;c++){const p=this.r$[c],m=p.Ftt(),g=this.f$-m,y=e-m;g<0&&0<y?(this.f$=m<0?0:n<=m?n:m,p.Ac(m,!0,!1,a,this.I$,!1)):p.Ac(this.f$,!0,!1,a,this.I$,!1)}else for(c=0;c<f;c++)this.r$[c].Ac(this.f$,!0,!1,a,this.I$,!1);for(c=0;c<d;c++)this.o$[c].jtt();this.I$&&(this.I$=!1)}}Ttt(s,i=!1,e=!1,h=!1,r=NaN,t=!1,n=!1){for(const o of this.r$)o.ktt();for(const a of this.r$){let t=s;if("number"==typeof r&&!isNaN(r)){const u=this.QD(),l=u-a.Ftt(),c=r-a.Ftt();l<0&&0<c&&(t=a.Ftt(),this.Mtt(t))}a.Ac(t,i,e,h,this.I$,n)}for(const f of this.r$)f.jtt();this.I$&&t&&(this.I$=!1)}ztt(){const t=this.h$.j$().Btt(),s=T.z$.jb(this,t);return this.n$=this.r$.push(s),s}OZ(){if(!this.nB())for(const t of this.r$)t.Utt()}TX(){for(const t of this.r$)t.TX()}Wtt(){for(const t of this.r$)t.Qtt()}Jtt(t,s,i){if(s){if("number"==typeof i&&0<=i){const e=this.r$[i];return e?(e.Ytt(s),void this.e$.zZ(s.yF(),this)):void 0}for(const h of this.r$)if(h.J$())if(t){if(h.LB()===t){h.Ytt(s),this.e$.zZ(s.yF(),this);break}}else if(!h.Vtt()){h.Ytt(s),this.e$.zZ(s.yF(),this);break}}}QZ(t,s){for(const i of this.r$)if(i.J$())if(s){if(s===i.LB()&&t===i.EB())return!0}else if(t===i.EB())return!0;return!1}yX(){return this.r$.some(t=>!t.J$()||t.Htt())}Dtt(){return this.r$.some(t=>{if(t.J$()){if(!t.Htt())return!1;const s=t.yF();return!!s&&s.pY()}return!1})}RB(t){for(const s of this.BX())for(const i of s.qtt())if(i.Ztt()===t)return i}Xtt(t){for(const s of this.r$)if(t===s.EB())return s;return null}Ktt(t){let s=t?t.split(" "):[],i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const e of this.BX())for(const h of e.$tt()){const r=s.every(t=>h.tst(t));if(r)return h}}BZ(){const t=[];for(const s of this.BX())t.push(s.yF());return t.filter(t=>t)}MZ(){for(const t of this.BX())t.MZ()}KH(){return{tracksJson:this.sst(),name:this.nr,playheadTime:this.QD(),playbackRate:this.p$,pingPongState:this.m$,currentRepeatCount:this.g$,isPlaying:this.y$,isScheduled:this.M$,initialStateSet:this.w$,finishedTriggers:this.G$,complete:this.S$,released:this.T$,markedForRemoval:this.b$,completedTick:this.x$,implicitPause:this.v$,isTemplate:this.C$,tags:this.E$.join(" "),stringTags:this._$,tagsChanged:this.D$,firstTick:this.I$}}$H(t){t&&(this.ist(t.tracksJson),this.nr=t.name,this.f$=t.playheadTime,this.p$=t.playbackRate,this.m$=t.pingPongState,this.g$=t.currentRepeatCount,this.y$=!!t.isPlaying,this.M$=!!t.isScheduled,this.w$=!!t.initialStateSet,this.G$=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.S$=!!t.complete,this.T$=!!t.released,this.b$=!!t.markedForRemoval,this.x$=t.completedTick,this.v$=!!t.implicitPause,this.C$=!!t.isTemplate,this.E$=t.tags.split(" "),this._$=t.stringTags,this.D$=!!t.tagsChanged,this.I$=!!t.firstTick)}sst(){return this.r$.map(t=>t.KH())}ist(t){this.Wtt(),t.forEach((t,s)=>{const i=this.r$[s];i.$H(t)}),this.r$.filter(t=>t.Htt())}static ott(t){const s=this.SB();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static htt(t){if(T.Re(t))return t.slice(0);if(T.we(t))return t.split(" ");throw new Error("invalid tags")}est(){return this.L$||(this.L$=T.ir(self.CB,this)),this.L$}}}{const kr=self.Os;kr.z$=class extends kr.Kh{constructor(t,s){super(),this.FX=t,this.hst=s,this.rst=s.j$(),this.nst=NaN,this.ost=NaN,this.ast=null,this.ust=null,this.lst=!1,this._N=0<s.Ftt(),this.cst=!1,this.fst=!1,this.dst=NaN,this.pst=null,this.mst=this.hst.yst().gst(),this.Mst=[],this.wst(),this.Sst=0,this.bZ=0,this.Tst=0}static jb(t,s){return kr.ir(kr.z$,t,s)}er(){this.mst=null;for(const t of this.Mst)t.er();kr.Dn(this.Mst),this.Mst=null,this.FX=null,this.ast=null,this.ust=null,this.hst=null,this.pst=null}wst(){for(const t of this.hst.xst().bst())this.Mst.push(kr.vst.jb(this,t))}Utt(){for(const t of this.Mst)t.Utt()}TX(){for(const t of this.Mst)t.TX();this.ast=null,this.ust=null}Cst(){return this.FX}I4(){return this.FX.I4()}$tt(){return this.mst||(this.mst=this.hst.yst().gst()),this.mst}qtt(){return this.Mst}RB(s){for(let t=0;t<this.Mst.length;t++){const i=this.Mst[t];if(i.Ztt()===s)return i}}Gst(){this.ast||this.EB()}Ist(){return!!this.ast&&!this.ast.OU()}Htt(){if(!this.J$())return!1;const t=this.Nst(),s=this.I4().t4(t);return!!s&&!s.OU()}yF(){if(this.J$()){const t=this.Est();if(-1!==t)return this.I4().eY(t)}}_st(){return this.FX.BX().indexOf(this)}Qtt(){this.ast=null,this.nst=NaN,this.ust=null,this.ost=NaN,this.lst=!0}Vtt(){return!!this.ast}EB(){if(!this.lst){if(!this.ast||!this.Ist()){const t=this.Nst();this.ast=this.I4().t4(t)}return this.ast}}Ytt(t){if(this.lst=!1,this.ast!==t){this.TX(),this.ast=t,this.ost=t.yF().oO(),this.nst=t.DF(),this.ust=t.r4();for(const s of this.Dst()){const i=s.Ast,e=s.Lst,h=i.Ost();switch(h){case"instance-variable":{e.Rst();const r=t.yF(),n=r.Pst(s.name),o=r.kst(n),a=r.Fst(n);o===s.name&&a===s.type&&e.jst(n);break}case"behavior":{const u=s.uz,l=this.yF(),c=t.yF(),f=e.cz(c);if(u&&f){const d=u.Uc();l.zst(d),c.zst(d),e.Rst(),e.Bst(f.PY())}break}}}}}*Dst(){for(const t of this.Mst){const s=t.W$(),i=this.yF(),e={Ast:t,Lst:s};switch(t.Ost()){case"world-instance":e.property=t.Ztt();break;case"instance-variable":{const h=s.Rst();e.name=i.kst(h),e.type=i.Fst(h);break}case"effect":{const r=i.OP(),n=s.Ust(r);e.Wst=n;break}case"behavior":{const o=s.cz(i);e.uz=o;break}case"plugin":e.uP=i.lP()}yield e}}r4(){if(!this.ust||!this.Ist()){const t=this.EB();t&&(this.ust=t.r4())}return this.ust}Qst(){return this.hst}Nst(){return isNaN(this.nst)?this.hst.Nst():this.nst}Jst(t){this.hst.Jst(t)}q$(){return this.hst.q$()}Z$(t){this.hst.Z$(t)}$X(){return this.hst.$X()}LB(){return this.hst.LB()}Ftt(){return this.hst.Ftt()}Yst(){return this.hst.Yst()}Vst(t){this.hst.Vst(t)}X$(t){this.hst.X$(t)}NB(t){for(const s of this.$tt())s.NB(t);for(const i of this.qtt())i.NB(t)}Hst(){return this.hst.Hst()}qst(t){this.hst.qst(t)}Est(){return isNaN(this.ost)?this.hst.Est():this.ost}Zst(t){this.hst.Zst(t)}Xst(t){this.hst.Xst(t)}Kst(){const t=this.EB();if(t){const s=t.sz();if(s.$st())return t.sz().Kst()}return this.hst.Kst()}tit(t){this.hst.tit(t)}sit(){const t=this.EB();if(t){const s=t.sz();if(s.$st())return t.sz().sit()}return this.hst.sit()}qx(){return this.hst.qx()}Uc(){return this.hst.Uc()}J$(){return 0===this.qx()}iit(){return 1===this.qx()}eit(){return 2===this.qx()}hit(){return this.Sst}fX(){return this.bZ}Ott(){return this.Tst}PN(){return this._N}Ctt(){for(const t of this.Mst)t.Ctt()}cX(){if(this.Gst(),this.Ist()||!this.J$()){const t=this.Cst(),s=t.itt(),i=s?0:this.Yst();for(const h of this.Mst)h.cX(i),0===this.Sst&&1===h.hit()&&(this.Sst=1),0===this.bZ&&1===h.fX()&&(this.bZ=1);this.Tst=0;const e=this.Mst.some(t=>t.Ott());e&&(this.Tst=1),this.pst=this.rit(i),this.cst=!1,this.fst=!1,this.Ac(i),this.nit(this.rit(i))}}Att(){if(this.Gst(),this.Ist()||!this.J$()){this.FX.itt();const t=this.FX.QD()-this.Ftt();this.pst=this.rit(t);for(const s of this.Mst)s.Att(t)}}Ptt(){if(!this.Cst().MX()&&(this.Gst(),this.Ist()||!this.J$())&&!this._N){const t=this.FX.QD(),s=this.Ftt()+this.Yst();s<=t?this.Ac(this.Yst(),!0,!1,!0,!1,!1,!0):t<=0&&this.Ac(0,!0,!1,!0,!1,!1,!0)}}Ltt(){for(let t=0,s=this.Mst.length;t<s;t++){const i=this.Mst[t];i.Ltt(),0===this.Sst&&1===i.hit()&&(this.Sst=1),0===this.bZ&&1===i.fX()&&(this.bZ=1)}}ktt(){const s=this.Mst.length;for(let t=0;t<s;t++)this.Mst[t].ktt()}Ac(i,t=!1,e=!1,h=!1,s=!1,r=!1,n=!1){this.ast||this.EB();const o=this.ast&&!this.ast.OU(),a=0===this.hst.rf;if((o||!a)&&!(r&&a&&this.yF().pY()||(i-=this.Ftt())<0)){this.oit(i,t),this.ait(i,t,s);for(let t=0,s=this.Mst.length;t<s;t++)this.Mst[t].Ac(i,e,h,n);this.uit(i,t),0!==this.Sst&&(this.ust||(this.ust=this.ast.r4()),this.ust)&&this.ust.Dj()}}jtt(){const s=this.Mst.length;for(let t=0;t<s;t++)this.Mst[t].jtt()}oit(t,s){if(s&&this._N&&!this.cst){const i=this.Cst();if(i.itt()){if(t<0)return}else if(t>this.Yst())return;for(const e of this.Mst)e.cX();this.cst=!0}}uit(t,s){if(s&&this._N&&!this.fst){const i=this.Cst();if(i.itt()){if(t>=this.Yst()){for(const e of this.Mst)e.Ac(this.Yst(),!1,!0);this.fst=!0}}else if(t<=0){for(const h of this.Mst)h.Ac(0,!1,!0);this.fst=!0}}}ait(t,s,i){if(!i&&s&&kr.U9.Timeline){const e=this.Cst(),h=this.pst.JX(),r=this.pst.QD(),n=h?h.QD():e.dB();if(t<=r||n<=t)if(this.pst=this.rst.lit(t,this.hst),e.itt())h&&this.nit(this.pst);else{const o=this.pst.JX();o&&this.nit(o)}}}rit(t){const s=this.rst.cit(t,this.hst);return s||this.rst.lit(t,this.hst)}nit(t){if(kr.U9.Timeline){const s=this.Cst(),i=s.B$();kr.U9.Timeline.z9.PushTriggerTimeline(s),kr.U9.Timeline.z9.PushTriggerKeyframe(t),i.ij(kr.U9.Timeline.z9.OnAnyKeyframeReached),i.ij(kr.U9.Timeline.z9.nit),kr.U9.Timeline.z9.PopTriggerTimeline(s),kr.U9.Timeline.z9.PopTriggerKeyframe(t)}}fit(){const t=this.hst.yst(),s=t.dit();return s}pit(){const t=this.hst.xst(),s=t.mit(),i=kr.vst.jb(this,s);return this.Mst.push(i),i}git(t){const s=this.hst.yst();s.yit(t)}Mit(t){for(const s of this.Mst)s.Mit(t)}wit(){for(const t of this.Mst)t.wit()}Sit(){if(this.Gst(),this.Ist()||!this.J$())for(const t of this.Mst)t.Sit()}Tit(){if(this.Gst(),this.Ist()||!this.J$()){let t=!1;for(const s of this.Mst){const i=s.Tit();!t&&i&&(t=!0)}if(t){const e=this.fit();e.cB(this.Cst().QD()),e.NB("noease"),e.qst(!0),e.ett("")}}}MZ(){isNaN(this.dst)||this.bit(this.dst),this.dst=NaN}KH(){const t=this.EB(),s=t?t.DF():this.Nst();return{propertyTracksJson:this.xit(),lastKeyframeDataItemJson:this.vit(),initialStateOfNestedSet:this.cst,endStateOfNestedSet:this.fst,instanceUid:s,cleared:this.lst}}$H(t){if(t){this.Cit(t.propertyTracksJson),this.Git(t.lastKeyframeDataItemJson),this.dst=t.instanceUid,this.cst=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.cst=t.initialStateOfNestedSet),this.fst=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.fst=t.endStateOfNestedSet),this.lst=!!t.hasOwnProperty("cleared")&&t.cleared;for(const s of this.Mst)0===this.Sst&&1===s.hit()&&(this.Sst=1),0===this.bZ&&1===s.fX()&&(this.bZ=1);this.Tst=0,this.Mst.some(t=>t.Ott())&&(this.Tst=1)}}vit(){const t=this.hst.yst();return t.Iit(this.pst)}xit(){return this.Mst.map(t=>t.KH())}Cit(t){t.forEach((t,s)=>{const i=this.Mst[s];i.$H(t)})}bit(t){if(kr.ue(t)){const s=this.I4().t4(t);if(s){const i=this.Cst();i.Jtt(this.hst.LB(),s,this._st())}}}Git(t){const s=this.hst.yst();this.pst=s.Nit(t)}}}{const Fr=self.Os;Fr.vst=class extends Fr.Kh{constructor(t,s){super(),this.Eit=t,this._it=s,this.Dit=s.xst(),this.Sst=0,this.bZ=0,this.Tst=0,this.Ait=this.W$(),this.Lit=this._it.Rit().Oit(),this.Pit=null,this.kit=null}static jb(t,s){return Fr.ir(Fr.vst,t,s)}er(){this.Eit=null,this.Ait&&(this.Ait.er(),this.Ait=null),this.Lit=null,this._it=null,this.Dit=null}hit(){return this.Sst}fX(){return this.bZ}Ott(){return this.Tst}Fit(){return!!this.kit}jit(t){this.kit=t}zit(){return this.kit}Bit(){return this.Eit}Uit(){return this._it}xst(){return this.Dit}Cst(){return this.Eit.Cst()}I4(){return this.Eit.I4()}EB(){return this.Eit.EB()}W$(){if(!this.Ait){let t=this._it.Ost(),s;switch(t){case"behavior":s=new Fr.vst.Wit(this);break;case"effect":s=new Fr.vst.Qit(this),this.bZ=1;break;case"instance-variable":s=new Fr.vst.Jit(this);break;case"plugin":s=new Fr.vst.Yit(this),this.bZ=1;break;case"world-instance":s=new Fr.vst.Vit(this),this.bZ=1,this.Sst=1;break;case"value":s=new Fr.vst.Hit(this);break;case"audio":s=new Fr.vst.qit(this)}this.Ait=s}return this.Ait}Ost(){return this._it.Ost()}Zit(t){this._it.Zit(t)}Xit(){return this._it.Kit()}$it(t){this._it.tet(t)}OB(){return this.W$().iet()}Ztt(){return this._it.eet()}het(t){this._it.ret(t)}net(){return this._it.qx()}oet(t){this._it.aet(t)}uet(){return this.xst().let(this._it).qx()}cet(){return this._it.cet()}fet(t){this._it.fet(t)}det(){return this._it.det()}pet(t){this._it.pet(t)}Hst(){return this._it.Hst()}qst(t){this._it.qst(t)}q$(){return this._it.q$()}Z$(t){this._it.Z$(t)}$X(){return this._it.$X()}X$(t){this._it.X$(t)}NB(t){for(const s of this.met())s.NB(t)}yet(){return this._it.yet()}met(){return this.Lit||(this.Lit=this._it.Rit().Oit()),this.Lit}QX(){return this._it.Rit().QX()}Met(t){return this.Dit.Met(t,this._it)}wet(t){return this.Dit.wet(t,this._it)}Tet(t){let s=this.Dit.Met(t,this._it),i;return i=s?this.Dit.bet(t,this._it):(s=this.Dit.wet(t,this._it),this.Dit.xet(t,this._it)),{start:s,end:i}}*vet(){for(const t of this.met())yield t.nK()}*Cet(){for(const t of this.met())yield t.QD()}Utt(){this.W$().Utt()}TX(){this.W$().TX()}Get(){return this.W$().Get()}Ctt(){this.W$().Ctt()}cX(t){this.W$().cX(),this.Pit=this.Iet(t),this.Ltt()}Att(t){this.W$().Att(),this.Pit=this.Iet(t)}Ltt(){const t=this.Bit();if(this.Tst=0,t.J$()){const s=this.Cst(),i=t.EB(),e=this.W$(),h=this.Ztt(),r=e.Net();if(r){const n=s.U$(i,e,h,this);n&&n.length&&(this.Tst=1)}else this.Tst=0}}Iet(t){const s=this.Cst(),i=this.Dit.Met(t,this._it);return i||(s.itt()?this.Dit.wet(t,this._it):this.Dit.xet(t,this._it))}ktt(){this.Ait.ktt()}Ac(t,s=!1,i=!1,e=!1){let h,r,n=!1;if(s)h=this.Dit.wet(t,this._it);else{if(this.Pit){const o=this.Cst(),a=this.Pit.JX(),u=this.Pit.QD(),l=a?a.QD():o.dB();(t<=u||l<=t)&&(this.Pit=this.Dit.wet(t,this._it),n=!0)}else this.Pit=this.Dit.wet(t,this._it),n=!0;h=this.Pit}h&&(r=h.JX()),this.Ait.Ac(t,h,r,s,i,e,n)}Eet(t){if(this.Pit){const e=this.Cst(),h=this.Pit.JX(),r=this.Pit.QD(),n=h?h.QD():e.dB();(t<=r||n<=t)&&(this.Pit=this.Dit.wet(t,this._it))}else this.Pit=this.Dit.wet(t,this._it);const s=this.Pit,i=s.JX();return this.Ait.Eet(t,s,i)}_et(t,s,i){return this.Ait.Eet(t,s,i)}jtt(){this.Ait.jtt()}static Det(t,s){const i=s.Uit(),e=s.Dit;return e.wet(t,i)}static Aet(t,s){const i=s.Uit(),e=s.Dit;return e.xet(t,i)}Let(){const t=this._it.Rit(),s=t.Oet();return this.Pit=null,s}Mit(t){this.Pit=null;const s=this._it.Rit();s.Ret(t)}wit(){this.W$().wit()}Sit(){const t=this.W$().Sit();if(t){const s=this.Dit.let(this._it),i=this.W$().Get();s.Pet(i)}}Tit(){const t=this.W$().Tit();return t&&this.ket(),this.W$().Fet(),t}ket(){const t=this.Cst().QD(),s=this.W$(),i=Fr.vst.Det(t,this),e=this.Let();e.aet(i.qx()),e.cB(t),e.NB(i.jet()),e.qst(!0),e.zet(s.Bet()),e.Pet(s.Get())}KH(){return{sourceAdapterJson:this.W$().KH()}}$H(t){t&&this.W$().$H(t.sourceAdapterJson)}}}{const jr=self.Os,zr=jr.vst;zr.Vit=class{constructor(t){this.Uet=t,this.Wet=null,this.Qet()}er(){this.Wet&&(this.Wet.er(),this.Wet=null),this.Uet=null}Net(){return this.Wet.Net()}RB(){return this.Uet}Utt(){this.Wet&&this.Wet.Utt()}TX(){this.Wet&&this.Wet.TX()}Qet(){return this.Wet||(this.Wet=this.Jet()),this.Wet}Rst(){}oO(){return this.Rst()}Yet(){}Ctt(){this.Qet().Ctt()}cX(){this.Qet().cX()}Att(){this.Qet().Att()}ktt(){this.Wet.Vet()}Ac(t,s,i,e,h,r,n){let o=this.Uet.uet(),a;switch(o){case"numeric":a=zr.Het.Ac(t,s,i,this.Uet);break;case"angle":a=zr.qet.Ac(t,s,i,this.Uet);break;case"boolean":a=zr.Zet.Ac(t,s,i,this.Uet);break;case"color":a=zr.Xet.Ac(t,s,i,this.Uet);break;case"text":a=zr.Ket.Ac(t,s,i,this.Uet)}this.Wet.$et(t,a,s,i,e,h,r,n)}Eet(t,s,i){switch(this.Uet.uet()){case"numeric":return zr.Het.Ac(t,s,i,this.Uet);case"angle":return zr.qet.Ac(t,s,i,this.Uet);case"boolean":return zr.Zet.Ac(t,s,i,this.Uet);case"color":return zr.Xet.Ac(t,s,i,this.Uet);case"text":return zr.Ket.Ac(t,s,i,this.Uet)}}jtt(){this.Wet.tht()}wit(){this.Qet().sht()}Fet(){this.Qet().Fet()}Get(){return this.Qet().Get()}Sit(){return this.Qet().Sit()}Tit(){return this.Qet().Tit()}Bet(){const t=this.Uet,s=t.Bit(),i=s.Cst().QD(),e=zr.Det(i,t),h=e.JX(),r=t.uet();switch(r){case"numeric":return zr.Het.Ac(i,e,h,t);case"angle":return zr.qet.Ac(i,e,h,t);case"boolean":return zr.Zet.Ac(i,e,h,t);case"color":return zr.Xet.Ac(i,e,h,t);case"text":return zr.Ket.Ac(i,e,h,t)}}Jet(){const t=this.Uet,s=t.yet()?t.uet():"";switch(s){case"combo":case"boolean":case"text":case"string":return new zr.eht.iht(this);case"numeric":case"number":case"angle":return new("combo"===this.Uet.net()?zr.eht.iht:zr.eht.hht)(this);case"color":case"offsetColor":return new zr.eht.rht(this);default:return new zr.eht.hht(this)}}KH(){return{propertyAdapterJson:this.Qet().KH()}}$H(t){t&&this.Qet().$H(t.propertyAdapterJson)}}}{const Br=self.Os;class Ur extends Br.vst.Vit{constructor(t){super(t),this.nht=NaN}Rst(){return this.Uet.Uit().Kit()[0]}oO(){return this.nht||super.oO()}Yet(){return this.Uet.Bit().EB()}jst(t){const s=this.Uet.Uit().Kit()[0];s!==t&&(this.nht=t)}Ac(t,s,i,e,h,r,n){this.Qet().oht(s.iet())&&super.Ac(t,s,i,e,h,r,n)}Eet(t,s,i){if(this.Qet().oht(s.iet()))return super.Eet(t,s,i)}KH(){return Object.assign(super.KH(),{index:this.nht})}$H(t){t&&(super.$H(t),this.nht=t.index)}}Br.vst.Jit=Ur}{const Wr=self.Os;class Qr extends Wr.vst.Vit{constructor(t){super(t),this.eJ=NaN}Rst(){const t=this.Uet.Uit();return t.Kit()[1]}Yet(){const t=this.Uet.Uit(),s=this.Uet.Bit(),i=this.eJ||t.Kit()[0],e=s.EB(),h=e.aht(i),r=e.uht()[h];return r.sz()}cz(t){const s=this.Uet.Uit(),i=s.Kit()[2];return t.lht(i)}Bst(t){const s=this.Uet.Uit();s.Kit()[0]!==t&&(this.eJ=t)}Ac(t,s,i,e,h,r,n){const o=this.Uet.Bit(),a=o.EB();this.cz(a.yF())&&super.Ac(t,s,i,e,h,r,n)}Eet(t,s,i){const e=this.Uet.Bit(),h=e.EB();if(this.cz(h.yF()))return super.Eet(t,s,i)}KH(){return Object.assign(super.KH(),{sid:this.eJ})}$H(t){t&&(super.$H(t),this.eJ=t.sid)}}Wr.vst.Wit=Qr}{const Jr=self.Os;class Yr extends Jr.vst.Vit{constructor(t){super(t)}Rst(){return this.Uet.Uit().Kit()[1]}Yet(){const t=this.Uet,s=t.Bit(),i=s.r4(),e=i.Ej(),h=e.OP(),r=this.Ust(h),n=r.oO();return e.yz(n)?e.cht(n):null}Ust(t){const s=this.Uet,i=s.Uit().Kit()[0];return t.fht(i)}Ac(t,s,i,e,h,r,n){this.dht()&&super.Ac(t,s,i,e,h,r,n)}Eet(t,s,i){if(this.dht())return super.Eet(t,s,i)}dht(){const t=this.Uet,s=t.Bit(),i=s.r4(),e=i.Ej(),h=e.OP(),r=this.Ust(h);if(r){const n=r.oO();return e.yz(n)}}}Jr.vst.Qit=Yr}{const Vr=self.Os;class Hr extends Vr.vst.Vit{constructor(t){super(t)}Rst(){return this.Uet.Uit().Kit()[0]}Yet(){return this.Uet.Bit().EB().sz()}Ac(t,s,i,e,h,r,n){const o=this.Uet.Bit(),a=o.yF().lP(),u=o.EB().yF().lP();a===u&&super.Ac(t,s,i,e,h,r,n)}Eet(t,s,i){const e=this.Uet.Bit(),h=e.yF().lP(),r=e.EB().yF().lP();if(h===r)return super.Eet(t,s,i)}pht(){const t=this.Uet.Bit(),s=t.yF().lP();if(Vr.U9.mht&&s instanceof Vr.U9.mht&&("initial-frame"===this.Uet.Ztt()||"initial-animation"===this.Uet.Ztt()))switch(this.Uet.$X()){case"relative":case"absolute":return null}}}Vr.vst.Yit=Hr}{const qr=self.Os;class Zr extends qr.vst.Vit{constructor(t){super(t),this.ght=0,this.yht=!1}Net(){return!1}cX(){let t=this.Uet.xst(),s=this.Uet.Uit();s=t.let(s),this.ght=s.nK()}Att(){}iet(){return this.yht||this.Uet.Ac(0),this.ght}Ac(t,s,i,e,h,r,n){this.ght=qr.vst.Het.Ac(t,s,i,this.Uet),this.yht=!0}wit(){}Fet(){}Get(){return this.ght}Sit(){return!1}Tit(){return!1}KH(){return{value:this.ght,init:this.yht}}$H(t){t&&(this.ght=t.value,this.yht=!t.hasOwnProperty("init")||t.init)}}qr.vst.Hit=Zr}{const Xr=self.Os;class Kr extends Xr.vst.Vit{constructor(t){super(t),this.Mht=!1,this.wht=null,this.Sht=null,this.Tht=null,this.FX=this.Uet.Cst(),this.Eit=this.Uet.Bit(),this.bht=this.Uet.Xit(),this.xht=this.bht[0],this.vht=this.bht[1],this.bht[3]?this.Cht=this.bht[3]:this.Cht=Math.random().toString(36).slice(2),this.Ght=NaN,this.Iht=NaN,this.Nht=NaN,this.Eht=null,this._ht()}er(){super.er(),this.wht=null,this.Sht=null,this.Tht=null,this.FX=null,this.Eit=null,this.bht=null,this.xht=null,this.Eht=null}_ht(){if(self.Os.U9.Audio){const t=this.Uet.I4(),s=t.Dht(self.Os.U9.Audio);s&&(this.wht=s.oP().sz()),this.Sht=self.Os.U9.Audio.Aht,this.Tht=self.Os.U9.Audio.Lht}}Oht(){if(!this.Eht){const t=this.Uet.Bit(),s=t.RB("audioSource");s&&(this.Eht=s.W$())}}Rht(){const t=this.Uet.Bit(),s=t.RB("volume");return(s?s.W$():this).Iht}Utt(){super.Utt(),this.Mht=!1,this.wht&&(this.Tht&&(this.Ght=this.Tht.PlaybackTime.call(this.wht,this.Cht),this.Iht=this.Tht.Volume.call(this.wht,this.Cht)),this.Sht)&&this.Sht.aB.call(this.wht,this.Cht)}Pht(){return this.Cht}kht(){return this.Nht}Fht(t){this.Nht=t}cX(){super.cX(),this.Ght=NaN,this.Mht=!1}Att(){super.Att();const t=this.Uet.Cst(),s=t.QD();switch(this.Ght=s-this.vht,this.Uet.Ztt()){case"audioSource":break;case"volume":this.Iht=this.Uet.Eet(s)}this.Mht=!1}Ac(t,s,i,e,h,r,n){if(this.wht)switch(this.Uet.Ztt()){case"audioSource":{if(!this.FX.itt())return;if(e)return void(this.Sht&&this.Sht.aB.call(this.wht,this.Cht));if(t<this.vht)return void(this.Mht=!1);const o=this.Tht.PlaybackRate.call(this.wht,this.Cht),a=this.FX.wB();if(a!==o&&this.Sht.MB.call(this.wht,this.Cht,a),this.Mht)return;if(!this.Uet.Cst().IsPlaying())return;if(this.Mht=!0,isNaN(this.Ght)){const u=self.performance.now(),l=t-this.vht,c=this.wht.GetAudioContextState();if("suspended"===c)return void(this.Mht=!1);const f=self.performance.now(),d=(f-u)/1e3,p=l+d;if(this.Sht){let t=this.kht();isNaN(t)?(this.Fht(0),t=0):this.Fht(t),this.Sht.PlayFromTimeline.call(this.wht,this.xht,t,this.Cht,p)}}else{const m=this.Ght,g=(this.Ght=NaN,this.Rht()),y=(this.Iht=NaN,this.wht.GetAudioContextState());if("suspended"===y)return void(this.Mht=!1);this.Sht&&(this.Fht(g),this.Sht.PlayFromTimeline.call(this.wht,this.xht,g,this.Cht,m))}break}case"volume":this.Oht(),super.Ac(t,s,i,e,h,r,n)}}Eet(t,s,i){if(this.wht)switch(this.Uet.Ztt()){case"audioSource":return;case"volume":return this.Oht(),super.Eet(t,s,i)}}jht(t,s){return this.Eht?this.Eht.kht():0}zht(t,s,i,e){this.Eht&&this.Eht.Fht(this.jht()+s),this.Sht&&this.Eht&&this.Sht.Fht.call(this.wht,this.Eht.Pht(),this.Eht.kht())}Bht(t,s,i){this.Eht&&this.Eht.Fht(s),this.Sht&&this.Eht&&this.Sht.Fht.call(this.wht,this.Eht.Pht(),this.Eht.kht())}Uht(){return!0}KH(){return{audioPlaybackStarted:this.Mht,audioTag:this.Cht,pauseTime:this.Ght,pauseVolume:this.Iht,volume:this.Nht}}$H(t){t&&(this.Mht=t.audioPlaybackStarted,this.Cht=t.audioTag,this.Ght=t.pauseTime,this.Iht=t.pauseVolume,this.Nht=t.volume,this._ht())}}Xr.vst.qit=Kr}{const $r=self.Os;$r.vst.eht=class{constructor(t){this.Ait=t,this.Uet=t.RB(),this.ust=this.Uet.Bit().r4(),this.Wht=this.Uet.Ztt(),this.Qht=!1,this.Jht=null,this.Yht=null}er(){this.Ait=null,this.Uet=null,this.ust=null,this.Jht=null,this.Yht=null}Net(){return!1}Utt(){}TX(){this.ust=null,this.Jht=null,this.Yht=null}W$(){return this.Ait}RB(){return this.Uet}r4(){return this.ust||(this.ust=this.Uet.Bit().r4()),this.ust}Vht(t){this.Qht=!!t}Hht(){return this.Qht}Ctt(){}cX(){}Att(){}sht(){this.Jht=this.Get()}Fet(){this.Jht=null}Get(){}Sit(){}Tit(){}oht(t){const s=typeof this.qht(),i=typeof t;return s==i}Vet(){}$et(t,s,i,e,h,r,n,o){}tht(){}Zht(){const t=this.Xht(()=>{const t=this.Uet.Uit(),s=this.Uet.xst();return s.let(t)},()=>{const t=this.Uet.Uit(),s=this.Uet.xst();return s.Kht(t)});return t.$ht()}trt(){const t=this.Uet.Cst(),e=t.QD()-this.Uet.Bit().Ftt(),s=this.Xht(()=>{const t=this.Uet.Uit(),s=this.Uet.xst();return s.wet(e,t)},()=>{const t=this.Uet.Uit(),s=this.Uet.xst(),i=s.xet(e,t);return i||s.Kht(t)});return s.$ht()}Xht(t,s){const i=this.Uet.Cst();return(i.itt()?t:s)()}srt(t,s){const i=this.Uet.$X();return("relative"===i?t:s)()}irt(t,s){return(this.Hht()?(this.Vht(!1),t):s)()}ert(t){}hrt(){return this.Ait.oO()}rrt(){return this.Yht||(this.Yht=this.Ait.Yet()),this.Yht}nrt(t,s,i,e,h,r){const n=this.Uet.Ost();switch(n){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return h();case"audio":return r()}}KH(){return{firstAbsoluteUpdate:this.Qht,saveState:this.Jht}}$H(t){t&&(this.Qht=t.firstAbsoluteUpdate,this.Jht=t.saveState)}ort(t,s=!1){const i=[];for(const e of t){const h=e.Bit().Ftt();for(const r of e.met())(s&&0===r.QD()||!s)&&i.push({time:h+r.QD(),value:r.$ht()})}return i.sort((t,s)=>t.time-s.time)}art(t,s,i){return this.urt(s,i)}urt(s,i){for(let t=i.length-1;0<=t;t--){const e=i[t].time;if(e<=s)return i[t]}return null}}}{const tn=self.Os,sn=new Map,en=[0,0,0];class hn extends tn.vst.eht{constructor(t){super(t)}Ctt(){}cX(){}Att(){}Get(){const t=this.Uet.Ost(),s=this.rrt(),i=this.hrt();switch(t){case"behavior":return this.lrt(s.crt(i));case"effect":return this.lrt(s[i]);case"plugin":return this.lrt(s.crt(i));case"world-instance":return this.lrt(this.qht())}}Sit(){const t=this.Zht();return!this.frt(t,this.qht())}Tit(){return!tn.de(this.Jht)&&!this.frt(this.Jht,this.qht())}frt(t,s){return t=this.drt(t),s=this.drt(s),t.ra(s)}Zht(){const t=super.Zht();return this.drt(t)}trt(){const t=super.trt();return this.drt(t)}ert(t){}lrt(t){return(tn.qe(t,tn.Ro)?t.toArray():t).slice(0,3)}drt(t){return tn.qe(t,tn.Ro)?t:new tn.Ro(t[0],t[1],t[2],1)}oht(t){return!0}Net(){return!0}Vet(){const t=this.Uet.Cst(),s=this.Uet.EB(),i=this.Uet.W$(),e=t.U$(s,i,this.Wht,this.Uet);if(e&&1<e.length){sn.has(s)||sn.set(s,new Map);const h=sn.get(s),r=this.Uet.Ost(),n=(h.has(r)||h.set(r,new Map),h.get(r));n.has(this.Wht)||n.set(this.Wht,{prt:!1,color:new tn.Ro(0,0,0,1)})}}mrt(t,s,i){const e=sn.get(t).get(s).get(i);return e.prt=!0,e.color}$et(t,s,i,e,h,r,n,o){const a=this.Uet.Cst(),u=this.Uet.Bit(),l=this.Uet.EB(),c=this.Uet.W$(),f=this.Uet.Ost(),d=this.Wht,p=a.U$(l,c,d,this.Uet);if(p&&1<p.length){const m=this.ort(p,!0),g=this.art(a,a.QD(),m);if(g){const y=u.Ftt(),M=g.time-y;if(0==M)this.mrt(l,f,this.Wht).Uo(s[0],s[1],s[2]);else if(!(M<0)){const w=s[0],S=s[1],T=s[2],b=this.Uet.Ac(M,!1,!0),x=tn.Ro.Fa(w,b[0]),v=tn.Ro.Fa(S,b[1]),C=tn.Ro.Fa(T,b[2]);this.mrt(l,f,this.Wht).Uo(x,v,C)}}}else this.grt(s[0],s[1],s[2])}tht(){const t=this.Uet.EB();if(sn.has(t)){const s=sn.get(t),i=this.Uet.Ost();if(s.has(i)){const e=s.get(i);if(e.has(this.Wht)){const h=e.get(this.Wht),r=h.prt,n=h.color;r&&this.grt(n.qo(),n.Zo(),n.Xo()),0===e.size&&s.delete(i),0===s.size&&sn.delete(t)}}}}qht(){const t=this.Uet.Ost(),s=this.rrt(),i=this.hrt();switch(t){case"behavior":return this.drt(s.crt(i));case"effect":return s[i].clone();case"plugin":return this.drt(s.crt(i));case"world-instance":return this.r4().Jj().clone()}}grt(t,s,i){const e=this.Uet.Ost(),h=this.rrt(),r=this.hrt();switch(e){case"behavior":en[0]=t,en[1]=s,en[2]=i,h.yrt(r,en);break;case"effect":h[r].Bo(t,s,i);break;case"plugin":en[0]=t,en[1]=s,en[2]=i,h.yrt(r,en);break;case"world-instance":this.r4().Mrt(t,s,i)}}KH(){}$H(t){}}tn.vst.eht.rht=hn}{const rn=self.Os,nn=rn.vst;class on extends rn.vst.eht{constructor(t){super(t)}Ctt(){}cX(){}Att(){}Get(){return this.qht()}Sit(){const t=this.Zht();return t!==this.Get()}Tit(){return!rn.de(this.Jht)&&this.Jht!==this.Get()}Net(){return!1}$et(t,s,i,e,h,r,n,o){const a=this.Uet,u=a.Bit(),l=a.Ost(),c=a.Cst(),f=u.EB(),d=a.W$(),p=this.Wht,m=c.U$(f,d,p,a);if(m&&1<m.length){const y=this.ort(m),M=t+u.Ftt(),w=this.art(c,M,y);w&&(s=w.value)}const g=a.uet();switch(g){case"numeric":if(nn.Het.wrt(this.hrt(),this.rrt(),s,l))break;return;case"angle":if(nn.qet.wrt(this.hrt(),this.rrt(),s,l))break;return;case"boolean":if(nn.Zet.wrt(this.hrt(),this.rrt(),s,l))break;return;case"color":if(nn.Xet.wrt(this.hrt(),this.rrt(),s,l))break;return;case"text":if(!nn.Ket.wrt(this.hrt(),this.rrt(),s,l))return}this.grt(s)}qht(){const t=this.Uet.Ost(),s=this.rrt(),i=this.hrt();switch(t){case"behavior":return s.crt(i);case"effect":return s[i];case"instance-variable":return s.Srt(i);case"plugin":return s.crt(i)}}grt(t){const s=this.Uet.Ost(),i=this.rrt(),e=this.hrt();switch(s){case"behavior":i.yrt(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.Trt(e,t);break;case"plugin":i.yrt(e,t)}}}rn.vst.eht.iht=on}{const an=self.Os,un=(an.vst.eht,new Map),ln=(t,s,i,e,h,r=!1,n=null,o=null)=>{un.set(t,{brt:s,xrt:i,vrt:e,round:h,Crt:r,init:n,reset:o})};ln("offsetX",(t,s,i,e)=>{"relative"===e.Uet.$X()?t.Grt(s,i.Cst().$$()):t.Grt(s)},(t,s)=>t.sT(s),t=>t.tT(),!0),ln("offsetY",(t,s,i,e)=>{"relative"===e.Uet.$X()?t.Irt(s,i.Cst().$$()):t.Irt(s)},(t,s)=>t.hT(s),t=>t.eT(),!0),ln("offsetWidth",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.Uet.$X(),u=1===i.Nrt.qx();if((h||u)&&s.M5()&&s.C5()){if(isNaN(i.Ert)){let e=[],t=s.r5();for(;t;)e.push(t),t=t.r5();e.reverse();let a=(t,s)=>s.Cst().Xtt(t.EB()),h=(t,s)=>{const i=a(t,s);if(i)return i.Kst();const e=t.EB().sz();return e.$st()?e.Kst():t.Drt()._rt()},r=(t,s,i,e=0)=>{const h=a(t,s);if(!h)return e;const r=h.RB(i);if(!r)return e;const n=r.Uit().Rit();if(!n)return e;const o=n.Kht();return o?o.iet():e},n;if(u){let t=e[e.length-1];n=t.Xp()}else{let s=e[0],t=s.Drt()._rt(),i=s.Drt().Art();n=t*i,n=(n+=r(s,o,"offsetWidth"))+h(s,o)*r(s,o,"offsetScaleX");for(let t=1;t<e.length;t++){const l=(s=e[t]).Drt().Art();n=(n=(n*=l)+r(s,o,"offsetWidth"))+h(s,o)*r(s,o,"offsetScaleX")}}i.Ert=0===n?Number.EPSILON:n}e||s.Om(t/i.Ert,!0)}else s.Om(t)}},(t,s)=>t.nm(s),t=>t.Xp(),!0),ln("offsetHeight",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.Uet.$X(),a=1===i.Nrt.qx();if((h||a)&&s.M5()&&s.I5()){if(isNaN(i.Ert)){let e=[],t=s.r5();for(;t;)e.push(t),t=t.r5();e.reverse();let h=(t,s)=>{e=t;const i=s.Cst().Xtt(e.EB());var e;if(i)return i.sit();const h=t.EB().sz();return h.$st()?h.sit():t.Drt().Lrt()},r=(t,s,i,e=0)=>{const h=s.Cst().Xtt(t.EB());if(!h)return e;const r=h.RB(i);if(!r)return e;const n=r.Uit().Rit();if(!n)return e;const o=n.Kht();return o?o.iet():e},n;if(a){let t=e[e.length-1];n=t.um()}else{let s=e[0],t=s.Drt().Lrt(),i=s.Drt().Ort();n=t*i,n=(n+=r(s,o,"offsetHeight"))+h(s,o)*r(s,o,"offsetScaleY");for(let t=1;t<e.length;t++){const u=(s=e[t]).Drt().Ort();n=(n=(n*=u)+r(s,o))+h(s,o)*r(s,o,"offsetScaleY")}}i.Ert=0===n?Number.EPSILON:n}e||s.Rrt(t/i.Ert,!0)}else s.Rrt(t)}},(t,s)=>t.Kp(s),t=>t.um(),!0),ln("offsetAngle",(t,s,i,e,h)=>{t.Prt(s)},(t,s)=>t.BP(s),t=>t.UP(),!1,!0),ln("offsetOpacity",(t,s,i,e,h)=>{const r=e.krt||1,n=(s/=r,t.p_()),o=n+s;if(0===e.Frt)1<o?e.Frt+=o-1:o<0&&(e.Frt+=o),t.jrt(s);else{const a=t.p_()+s;0<s&&0<e.Frt?1<a&&(e.Frt+=a-1):0<s&&e.Frt<0?(e.Frt+=s,0<e.Frt&&(t.jrt(e.Frt),e.Frt=0)):s<0&&0<e.Frt?(e.Frt+=s,e.Frt<0&&(t.jrt(e.Frt),e.Frt=0)):s<0&&e.Frt<0&&a<0&&(e.Frt+=a)}},(t,s)=>{t.g_(s)},t=>t.p_(),!1,!0,(r,h,n)=>{switch(r.Frt=0,r.Uet.$X()){case"relative":{r.Uet.xst();let t=r.Uet.Uit(),s=t.Rit(),i=s.Oit(),e=r.r4().p_(),h=e;for(const o of i){const a=o.QD(),u=r.Uet.Eet(a);h=e+u,h=an.lr(h,0,1)}r.zrt=e-h,r.zrt=Math.round(100*(r.zrt+Number.EPSILON))/100,h=e;for(let t=i.length-1;0<=t;t--){const l=i[t].QD(),c=r.Uet.Eet(l);h-=c,h=an.lr(h,0,1)}r.Brt=h,r.Brt=Math.round(100*(r.Brt+Number.EPSILON))/100;break}}const t="relative"===r.Uet.$X(),s=1===r.Nrt.qx();if((t||s)&&h.M5()&&h.L5()){let s=[],t=h.r5();for(;t;)s.push(t),t=t.r5();s.reverse();let i=(t,s,i)=>{const e=s.Cst().Xtt(t.EB());if(!e)return 0;const h=e.RB(i);if(!h)return 0;const r=h.Uit().Rit();if(!r)return 0;const n=r.Kht();return n?n.iet():0},e=s[0].Drt().Urt();e+=i(s[0],n,"offsetOpacity");for(let t=1;t<s.length;t++)e+=i(s[t],n,"offsetOpacity");r.krt=0===e?1:e}},i=>{switch(i.Uet.$X()){case"relative":{i.Frt=0;let t=i.r4(),s=t.p_();s=Math.round(100*(s+Number.EPSILON))/100,i.Uet.Cst().itt()?(t.g_(s+i.zrt),i.zv=0):(t.g_(s-i.Brt),i.zv=i.W$().Bet());break}}}),ln("offsetOriginX",(t,s)=>t.Wrt(s),(t,s)=>t.Qrt(s),t=>t.Uz(),!1),ln("offsetOriginY",(t,s)=>t.Jrt(s),(t,s)=>t.Yrt(s),t=>t.Qz(),!1),ln("offsetZElevation",(t,s)=>t.Vrt(s),(t,s)=>t.nT(s),t=>t.rT(),!0),ln("offsetScaleX",(t,s,i,e)=>{if(0!==s){const h=t.Xp()<0?-1:1;if("relative"===e.Uet.$X()&&t.M5()&&t.C5()){const r=i.Kst()*h*s;isNaN(e.Ert)&&un.get("offsetWidth").brt(t,1,i,e,!0),t.Om(r/e.Ert,!0)}else t.Om(i.Kst()*h*s)}},(t,s,i)=>{t.nm(i.Kst()*s)},(e,h)=>{const r=e.Xp()<0?-1:1;if(e.C5()){let t=e.r5(),s=h.Cst().Xtt(t.EB()),i=NaN;if(s)i=t.Xp()/s.Kst();else{const n=t.EB().sz();i=n.$st()?t.Xp()/n.Kst():1}return e.Xp()*r/(h.Kst()*i)}return e.Xp()*r/h.Kst()},!1),ln("offsetScaleY",(t,s,i,e)=>{if(0!==s){const h=t.um()<0?-1:1;if("relative"===e.Uet.$X()&&t.M5()&&t.I5()){const r=i.sit()*h*s;isNaN(e.Ert)&&un.get("offsetHeight").brt(t,1,i,e,!0),t.Rrt(r/e.Ert,!0)}else t.Rrt(i.sit()*h*s)}},(t,s,i)=>{t.Kp(i.sit()*s)},(e,h)=>{const r=e.um()<0?-1:1;if(e.I5()){let t=e.r5(),s=h.Cst().Xtt(t.EB()),i=NaN;if(s)i=t.um()/s.sit();else{const n=t.EB().sz();i=n.$st()?t.um()/n.sit():1}return e.um()*r/(h.sit()*i)}return e.um()*r/h.sit()},!1);class cn extends an.vst.eht{constructor(t){super(t),this.zv=0,this.Frt=0,this.zrt=0,this.Brt=0,this.krt=NaN,this.Ert=NaN,this.Hrt=void 0,this.qrt=void 0,this.Zrt=null,this.Xrt=null,this.Krt=null,this.$rt=null,this.tnt=null,this.snt=null,this.int=null,this.ent=null,this.hnt=!1,this.rnt=!1,an.qe(this.Uet.Cst(),an.nnt)?this.Nrt=new an.vst.eht.ont(this):this.Nrt=new an.vst.eht.ant(this);const s=this.Uet.Ztt();switch(this.Uet.Ost()){case"world-instance":{const i=un.get(s);this.Zrt=i.vrt,this.Xrt=i.brt,this.Krt=i.xrt,this.hnt=i.round,this.rnt=i.Crt,this.tnt=i.init,this.$rt=i.reset;break}case"audio":this.snt=t.jht,this.int=t.zht,this.ent=t.Bht,this.hnt=!!t.Uht(),this.rnt=!1}}er(){this.Nrt=null,this.Zrt=null,this.Xrt=null,this.Krt=null,this.$rt=null,this.tnt=null,this.snt=null,this.int=null,this.ent=null,super.er()}Net(){return this.Nrt.Net()}unt(){return this.zv}lnt(t){this.zv=t}Ctt(){this.$rt&&this.$rt(this)}cX(){const t=this.Nrt.cX();if("number"==typeof t&&(this.zv=t),this.tnt){const s=this.r4(),i=this.Uet.Bit();this.tnt(this,s,i)}}Att(){const t=this.Nrt.Att();"number"==typeof t&&(this.zv=t)}Get(){return this.qht()}Sit(){const t=this.Zht();return t!==this.Get()}Tit(){return!an.de(this.Jht)&&this.Jht!==this.Get()}Vet(){this.Nrt.Vet()}$et(t,s,i,e,h,r,n,o){return this.Nrt.$et(t,s,i,e,h,r,n,o)}tht(){this.Nrt.tht()}qht(){const t=this.rrt(),s=this.hrt(),i=this.r4(),e=this.Uet.Bit(),h=this.Uet.Ost();switch(h){case"behavior":return t.crt(s);case"effect":return t[s];case"instance-variable":return t.Srt(s);case"plugin":return t.crt(s);case"world-instance":return this.Zrt(i,e);case"audio":return this.snt.call(this.W$(),i,e)}}grt(t,s,i){const e=this.rrt(),h=this.hrt(),r=this.r4(),n=this.Uet.Bit(),o=this.Uet.Ost();switch(o){case"behavior":e.cnt(h,t);break;case"effect":e[h]+=t;break;case"instance-variable":e.fnt(h,t);break;case"plugin":e.cnt(h,t,this.W$().pht());break;case"world-instance":this.Xrt(r,t,n,this);break;case"audio":this.int.call(this.W$(),r,t,n,this)}}dnt(t,s,i){let e=this.Uet.q$();if("discrete"!==(e="default"===e?"continuous":e)||s){if("discrete"===e&&i){const u=this.Uet.Cst(),l=u.QD(),c=this.Uet.Met(l);if(!c)return}const h=this.rrt(),r=this.hrt(),n=this.r4(),o=this.Uet.Bit(),a=this.Uet.Ost();switch(a){case"behavior":h.yrt(r,t);break;case"effect":h[r]=t;break;case"instance-variable":h.Trt(r,t);break;case"plugin":h.yrt(r,t,this.W$().pht());break;case"world-instance":this.Krt(n,t,o);break;case"audio":this.ent.call(this.W$(),n,t,o)}}}pnt(t,s,i,e,h,r,n,o){this.Nrt.pnt(t,s,i,e,h,r,n,o)}mnt(t,s,i,e,h){let r=(t="angle"===this.Uet.net()?an.pr(t):t).toString(),n=r.split(".")[1]||"",o=n.length,a=this.qht(),u;switch(u=0===o?this.hnt?Math.round(a):this.rnt?"angle"===this.Uet.net()?an.dr(Math.round(an.pr(a))):Number(an.toFixed(a,2)):a:this.hnt?Number(an.toFixed(a,o)):(this.rnt,a),this.grt(u-a,s,i),this.Uet.Ztt()){case"offsetWidth":case"offsetScaleX":{const l=this.r4(),c=l.Xp(),f=Number(an.toFixed(c,2));l.Om(f-c);break}case"offsetHeight":case"offsetScaleY":{const d=this.r4(),p=d.um(),m=Number(an.toFixed(p,2));d.Rrt(m-p);break}}}KH(){return Object.assign(super.KH(),{v:this.zv,a:this.Frt,fod:this.zrt,bod:this.Brt,of:this.krt,sf:this.Ert,armorf:this.Hrt,armandf:this.qrt})}$H(t){t&&(super.$H(t),this.zv=t.v,this.Frt=t.a,this.zrt=an.ue(t.fod)?t.fod:0,this.Brt=an.ue(t.bod)?t.bod:0,this.krt=an.ue(t.of)?t.of:NaN,this.Ert=an.ue(t.sf)?t.sf:NaN,this.Hrt=an.ue(t.armorf)?t.armorf:void 0,this.qrt=an.ue(t.armandf)?t.armandf:void 0)}}an.vst.eht.hht=cn}{const fn=self.Os;class dn{constructor(t){this.gnt=!1,this.ght=0,this.ynt=!1,this.Mnt=!1,this.Mst=t;for(let t=0,s=this.Mst.length;t<s;t++)this.Mst[t].jit(this)}qtt(){return this.Mst}wnt(){this.gnt=!0}Snt(){return this.gnt}zet(t){this.ght=t}iet(){return this.ght}Tnt(t){this.ynt=t}bnt(){return this.ynt}Ptt(t){this.Mnt=t}xnt(){return this.Mnt}$f(){this.gnt=!1,this.ght=0,this.ynt=!1,this.Mnt=!1}}class pn{constructor(t){this.vnt=t}er(){this.vnt=null}qx(){return 0}cX(){const t=this.vnt;return this.vnt.RB(),t.srt(()=>t.Xht(()=>0,()=>t.W$().Bet()),()=>{})}Att(){}Net(){this.vnt;const t=this.vnt.RB();switch(t.$X()){case"relative":return!1;case"absolute":return!0}}Vet(){this.vnt;const t=this.vnt.RB(),s=t.Ztt();switch(t.$X()){case"relative":break;case"absolute":if(t.Fit()){const i=t.zit();i.$f()}else{const e=t.Cst(),h=t.EB(),r=t.W$(),n=e.U$(h,r,s,t);n&&1<n.length&&new dn(n)}}}$et(t,s,i,e,h,r,n,o){const a=this.vnt,u=this.vnt.RB();switch(u.$X()){case"relative":{const l=a.unt();a.grt(s-l,i,e),r&&this.pnt(t,i,e,h,l,s),a.lnt(s);break}case"absolute":{const c=u.Cst(),f=u.Bit();if(u.EB(),u.W$(),u.Fit()){const d=u.zit(),p=d.qtt(),m=a.ort(p,!0),g=a.art(c,c.QD(),m);if(g){const y=f.Ftt(),M=g.time-y;if(0==M)d.Ptt(n),d.Tnt(o),d.wnt(),d.zet(d.iet()+s);else{if(M<0)return;const w=u.Eet(M);d.Ptt(n),d.Tnt(o),d.wnt(),d.zet(d.iet()+(s-w))}}}else a.dnt(s,o,n);break}}}tht(){const t=this.vnt,s=this.vnt.RB();switch(s.$X()){case"relative":break;case"absolute":if(s.Fit()){const i=s.zit();i.Snt()&&t.dnt(i.iet(),i.bnt(),i.xnt())}}}pnt(t,s,i,e,h,r){const n=this.vnt;e||(s&&t===s.QD()?n.mnt(s.nK(),s,i):i&&t===i.QD()?n.mnt(i.nK(),s,i):r-h==0&&n.mnt(s.nK(),s,i))}}fn.vst.eht.ant=pn}{const mn=self.Os;class gn{constructor(t){this.vnt=t}er(){this.vnt=null}qx(){return 1}cX(){const t=this.vnt;return t.Vht(!0),this.ert(t.Zht())}Att(){const t=this.vnt;if(t.Zht()!==t.trt())return t.Vht(!0),this.ert(t.trt())}Net(){return!1}Vet(){}$et(t,s,i,e,h,r,n,o){const a=this.vnt,u=a.unt();switch(a.RB().$X()){case"relative":a.grt(s-u,i,e),r&&this.pnt(t,i,e,h,u,s,!1,n);break;case"absolute":a.Hht()?(a.Vht(!1),a.grt(u,i,e)):0===t&&0===a.RB().Cst().dB()?a.dnt(s,!0,!1):(a.grt(s-u,i,e),r&&this.pnt(t,i,e,h,u,s,this.Cnt(),n))}a.lnt(s)}tht(){}ert(t){const s=this.vnt;return t-s.Get()}Cnt(){let t=this.vnt,s=t.r4().EB(),i=t.RB().I4(),e=i.B$(),h=0;for(const r of e.jZ())0===r.qx()?r.QZ(s)&&h++:1===r.qx()&&r.EB()===s&&h++;return h<=1}pnt(t,s,i,e,h,r,n,o){const a=this.vnt;e?s&&t===s.QD()?a.mnt(s.nK(),s,i,n,o):i&&t===i.QD()?a.mnt(i.nK(),s,i,n,o):i||a.mnt(s.nK(),s,i,n,o):s&&t===s.QD()?a.mnt(s.nK(),s,i,n,o):i&&t===i.QD()?a.mnt(i.nK(),s,i,n,o):r-h==0&&a.mnt(s.nK(),s,i,n,o)}}mn.vst.eht.ont=gn}{const yn=self.Os,Mn=self.hc;yn.vst.Het=class{constructor(){}static wrt(t,s,i,e){let h;switch(e){case"behavior":h=s.crt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Srt(t);break;case"plugin":h=s.crt(t)}return h!==i}static Ac(r,n,o,a){if(!o){let t=a.Uit(),s=a.xst();return(t=s.Kht(t)).nK()}let u=a.q$();if("default"===u&&(u="continuous"),"discrete"===(u="combo"===a.net()?"discrete":u))return n.nK();if("continuous"===u||"step"===u){const l=a.Cst().V$();if("step"===u&&0!==l){const g=1/l;r=Math.floor(r*g)/g}const c=n.nK(),f=o.nK(),d=n.hK("cubic-bezier"),p=o.hK("cubic-bezier"),m=d&&d.Gnt()&&p&&p.Int();if(!m&&c===f)return c;let t=n.QD(),s=o.QD(),i=("step"===u&&0!==l&&(r=yn.lr(r,t,s)),yn.normalize(r,t,s)),e=n.jet(),h;if(m){const y=s-t;h=Mn.Tc(e)(y*i,0,1,y),h=Mn.Tc("cubicbezier")(h,c,c+d.uK(),f+p.fK(),f)}else h=Mn.Tc(e)((s-t)*i,c,f-c,s-t);return"integer"===a.net()?Math.floor(h):h}}}}{const wn=self.Os;wn.vst.qet=class{constructor(){}static wrt(t,s,i,e){let h;switch(e){case"behavior":h=s.crt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Srt(t);break;case"plugin":h=s.crt(t)}return h!==i}static Ac(t,s,i,e){if(!i){let t=e.Uit(),s=e.xst();return(t=s.Kht(t)).nK()}let h=e.q$();if("default"===h&&(h="continuous"),"discrete"===(h="combo"===e.net()?"discrete":h))return s.nK();if("continuous"===h||"step"===h){const r=e.Cst().V$();if("step"===h&&0!==r){const c=1/r;t=Math.floor(t*c)/c}const n=s.QD(),o=i.QD(),a=s.nK(),u=i.nK(),l=("step"===h&&0!==r&&(t=wn.lr(t,n,o)),s.hK("angle"));if(!l){if(a===u)return a;const f=wn.normalize(t,n,o),d=self.hc.Tc(s.jet());return wn.Tr(a,u,d(f,0,1,1))}{const p=l.Nnt();if(a===u&&0===p)return a;const m=wn.normalize(t,n,o),g=self.hc.Tc(s.jet()),y=g(m,0,1,1);switch(l.Ent()){case"closest":return wn.Tr(a,u,y,p);case"clockwise":return wn.br(a,u,y,p);case"anti-clockwise":return wn.vr(a,u,y,p)}}}}}}{const Sn=self.Os;Sn.vst.Zet=class{constructor(){}static wrt(t,s,i,e){let h;switch(e){case"behavior":h=s.crt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Srt(t);break;case"plugin":h=s.crt(t)}return!!h!=!!i}static Ac(t,s,i,e){if(i)return s.nK()?1:0;{let t=e.Uit(),s=e.xst();return(t=s.Kht(t)).nK()?1:0}}}}{const Tn=self.Os,bn=[0,0,0],xn=[0,0,0],vn=[0,0,0];Tn.vst.Xet=class{constructor(){}static wrt(t,s,i,e){let h;switch(e){case"behavior":h=s.crt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Srt(t);break;case"plugin":h=s.crt(t)}return Array.isArray(i)?(bn[0]=i[0],bn[1]=i[1],bn[2]=i[2]):(vn.Sa(i),bn[0]=Math.floor(255*vn.qo()),bn[1]=Math.floor(255*vn.Zo()),bn[2]=Math.floor(255*vn.Xo())),Array.isArray(h)?(xn[0]=h[0],xn[1]=h[1],xn[2]=h[2]):(vn.Sa(h),xn[0]=Math.floor(255*vn.qo()),xn[1]=Math.floor(255*vn.Zo()),xn[2]=Math.floor(255*vn.Xo())),bn[0]!==xn[0]||bn[1]!==xn[1]||bn[2]!==xn[2]}static Ac(t,s,i,e){if(!i){let t=e.Uit(),s=e.xst(),i=(t=s.Kht(t)).nK();return bn[0]=i[0],bn[1]=i[1],bn[2]=i[2],bn}let h=e.q$();if("discrete"===(h="default"===h?"continuous":h)){const r=s.nK();return bn[0]=r[0],bn[1]=r[1],bn[2]=r[2],bn}if("continuous"===h||"step"===h){const n=e.Cst().V$();if("step"===h&&0!==n){const b=1/n;t=Math.floor(t*b)/b}const o=s.QD(),a=i.QD(),u=s.nK(),l=i.nK(),c=("step"===h&&0!==n&&(t=Tn.lr(t,o,a)),Tn.normalize(t,o,a)),f=s.jet(),d=u[0],p=u[1],m=u[2],g=l[0],y=l[1],M=l[2],w=self.hc.Tc(f),S=a-o,T=S*c;return bn[0]=d===g?d:w(T,d,g-d,S),bn[1]=p===y?p:w(T,p,y-p,S),bn[2]=m===M?m:w(T,m,M-m,S),bn}}}}{const Cn=self.Os;Cn.vst.Ket=class{constructor(){}static wrt(t,s,i,e){let h;switch(e){case"behavior":h=s.crt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Srt(t);break;case"plugin":h=s.crt(t)}return h!==i}static Ac(t,s,i,e){if(i)return s.nK();{let t=e.Uit(),s=e.xst();return(t=s.Kht(t)).nK()}}}}{const Gn=self.Os;Gn.Vq=class{constructor(){this._nt=new Map}er(){for(const t of this._nt.values())t.er();this._nt.clear(),this._nt=null}sc(t){const s=new Gn.Dnt(t),i=s.Uc();this._nt.set(i,s)}Ks(t){return this._nt.get(t)}O$(){return 0}static Ant(t,s,i,e){if(s)for(const h of s)Gn.Vq.Lnt("create",h,t,i,e)}static Ont(t,s,i,e){if(s)for(const h of s)Gn.Vq.Lnt("create-including-disabled",h,t,i,e)}static Rnt(i,t,s,e){i.length?t.forEach((t,s)=>{i[s].$H(t)}):t.forEach(t=>{Gn.Vq.Lnt("load",t,i,s,e)})}static Lnt(t,s,i,e,h){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,h);break;case"create":case"create-including-disabled":r=new e(s,h)}else if("object"==typeof e){const n=e.prop,o=s[n],a=e.map.get(o);switch(t){case"load":r=new a(null,h);break;case"create":case"create-including-disabled":r=new a(s,h)}}switch(t){case"load":r.$H(s),i.push(r);break;case"create":if("function"==typeof r.Hst&&!r.Hst())return r.er();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const In=self.Os;In.Dnt=class{constructor(t){this.nr="",this.Rtt=NaN,this.Pnt=0,this.knt="default",this.Fnt="default",this.jnt=!1,this.znt=!1,this.Bnt=1,this.rst=null,this.Unt="",this.Wnt=!1,this.Qnt=!0,t&&(this.nr=t[0],this.Rtt=t[1],this.Pnt=t[2],this.knt=t[3],this.Fnt=t[4],this.jnt=!!t[6],this.znt=!!t[7],this.Bnt=t[8],this.Unt=t[9],this.Wnt=!!t[10],this.Qnt=!!t[11],this.rst=new In.Jnt(t[5],this))}er(){this.rst.er(),this.rst=null}j$(){return this.rst||(this.rst=new In.Jnt(null,this)),this.rst}Uc(){return this.nr}C6(t){this.nr=t}dB(){return this.Rtt}fB(t){this.Rtt=t}V$(){return this.Pnt}H$(t){this.Pnt=t}q$(){return this.knt}Z$(t){this.knt=t}$X(){return this.Fnt}X$(t){this.Fnt=t}mB(){return this.jnt}pB(t){this.jnt=t}yB(){return this.znt}gB(t){this.znt=t}Gz(){return this.Bnt}K$(t){this.Bnt=t}bX(){return this.Unt}$$(){return this.Wnt}ttt(){return this.Qnt}KH(){return{trackDataJson:this.rst.KH(),name:this.nr,totalTime:this.Rtt,step:this.Pnt,interpolationMode:this.knt,resultMode:this.Fnt,loop:this.jnt,pingPong:this.znt,repeatCount:this.Bnt,startOnLayout:this.Unt,transformWithSceneGraph:!!this.Wnt,useSystemTimescale:this.Qnt}}$H(t){t&&(this.j$().$H(t.trackDataJson),this.nr=t.name,this.Rtt=t.totalTime,this.Pnt=t.step,this.knt=t.interpolationMode,this.Fnt=t.resultMode,this.jnt=t.loop,this.znt=t.pingPong,this.Bnt=t.repeatCount,this.Unt=t.startOnLayout,this.Wnt=!!t.transformWithSceneGraph,this.Qnt=!!t.useSystemTimescale)}}}{const Nn=self.Os;class En{constructor(t,s){this.rst=s,this.Ynt=null,this.Vnt=null,this.nst=NaN,this.ost=NaN,this.knt="default",this.Fnt="default",this.Nl=!1,this.Hnt=null,this.Dit=null,this.Kc="",this.qnt=null,this.Znt=0,this.Xnt=this.rst.Y$().dB(),this.rf=0,this.nr="",t&&(t[0]&&(this.Ynt=t[0],this.nst=t[0][2],this.ost=t[0][1]),this.knt=t[1],this.Fnt=t[2],this.Nl=!!t[3],t[6]&&(this.Kc=t[6]),t[7]&&(this.qnt=t[7],this.Znt=t[7][0],this.Xnt=t[7][1]),t[8]&&(this.Vnt=t[8]),t[8]&&(this.Vnt=t[8]),t[9]&&(this.rf=t[9]),t[10]&&(this.nr=t[10]),this.Hnt=new Nn.Knt(t[4],this),this.Dit=new Nn.$nt(t[5],this))}er(){this.Ynt=null,this.rst=null,this.Hnt&&(this.Hnt.er(),this.Hnt=null),this.Dit&&(this.Dit.er(),this.Dit=null),this.qnt=null}j$(){return this.rst}yst(){return this.Hnt||(this.Hnt=new Nn.Knt(null,this)),this.Hnt}xst(){return this.Dit||(this.Dit=new Nn.$nt(null,this)),this.Dit}tot(){return this.Ynt}Est(){return this.ost}Zst(t){this.ost=t}Nst(){return this.nst}Jst(t){this.nst=t}q$(){return this.knt}Z$(t){this.knt=t}$X(){return this.Fnt}X$(t){this.Fnt=t}Hst(){return this.Nl}qst(t){this.Nl=!!t}LB(){return this.Kc}Ftt(){return this.Znt}Yst(){return this.Xnt}Vst(t){this.Xnt=t}Kst(){return this.Vnt[0]}Xst(t){this.Vnt||(this.Vnt=[]),this.Vnt[0]=t}sit(){return this.Vnt||(this.Vnt=[]),this.Vnt[1]}tit(t){this.Vnt||(this.Vnt=[]),this.Vnt[1]=t}qx(){return this.rf}Uc(){return this.nr}KH(){return{keyframeDataJson:this.Hnt.KH(),propertyTrackDataJson:this.Dit.KH(),instanceData:this.Ynt,additionalInstanceData:this.Vnt,instanceUid:this.nst,objectClassIndex:this.ost,interpolationMode:this.knt,resultMode:this.Fnt,enabled:this.Nl,id:this.Kc,nestedData:this.qnt,type:this.rf,name:this.nr}}$H(t){t&&(this.Ynt=t.instanceData,this.nst=t.instanceUid,this.ost=t.objectClassIndex,this.knt=t.interpolationMode,this.Fnt=t.resultMode,this.Nl=t.enabled,this.Kc=t.id,this.rf=t.type||0,this.nr=t.name||"",this.Xnt=this.rst.Y$().dB(),t.nestedData&&(this.qnt=t.nestedData,this.Znt=this.qnt[0],this.Xnt=this.qnt[1]),t.additionalInstanceData&&(this.Vnt=t.additionalInstanceData),this.yst().$H(t.keyframeDataJson),this.xst().$H(t.propertyTrackDataJson))}}Nn.Jnt=class{constructor(t,s){this.h$=s,this.sot=[],Nn.Vq.Ant(this.sot,t,En,this)}er(){this.h$=null;for(const t of this.sot)t.er();Nn.Dn(this.sot),this.sot=null}Y$(){return this.h$}Btt(){const t=new En(null,this);return this.sot.push(t),t}iot(t){return t.yst().gst()[0]}eot(t){const s=t.yst().gst();return s.at(-1)}cit(s,t){const i=t.yst().gst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.QD()===s)return h}}hot(s,t){const i=t.yst().gst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.QD()>s)return h}}rot(s,t){const i=t.yst().gst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.QD()>=s)return h}}lit(s,t){const i=t.yst().gst();for(let t=i.length-1;0<=t;t--){const e=i[t];if(e.QD()<=s)return e}}*F$(){for(const t of this.sot)yield t}KH(){return{trackDataItemsJson:this.sot.map(t=>t.KH())}}$H(t){t&&Nn.Vq.Rnt(this.sot,t.trackDataItemsJson,En,this)}}}{const _n=self.Os;class Dn{constructor(t,s){this.Dit=s,this.not="",this.oot=null,this.Wht=null,this.rf=null,this.aot=NaN,this.uot=NaN,this.knt="default",this.Fnt="default",this.Nl=!1,this.lot=null,this.cot=!0,t&&(this.not=t[0][0],this.oot=t[0].slice(1),this.Wht=t[1],this.rf=t[2],this.aot=t[3],this.uot=t[4],this.knt=t[5],this.Fnt=t[6],this.Nl=!!t[7],this.lot=new _n.fot(t[8],this),this.cot=t[9])}er(){this.lot.er(),this.lot=null,this.Dit=null,this.oot=null}xst(){return this.Dit}Rit(){return this.lot||(this.lot=new _n.fot(null,this)),this.lot}Ost(){return this.not}Zit(t){this.not=t}Kit(){return this.oot}tet(t){this.oot=t}eet(){return this.Wht}ret(t){this.Wht=t}qx(){return this.rf}aet(t){this.rf=t}cet(){return this.aot}fet(t){this.aot=t}det(){return this.uot}pet(t){this.uot=t}q$(){return this.knt}Z$(t){this.knt=t}$X(){return this.Fnt}X$(t){this.Fnt=t}Hst(){return this.Nl}qst(t){this.Nl=!!t}yet(){return!!this.cot}KH(){return{propertyKeyframeDataJson:this.lot.KH(),sourceAdapterId:this.not,sourceAdapterArguments:this.oot,property:this.Wht,type:this.rf,min:this.aot,max:this.uot,interpolationMode:this.knt,resultMode:this.Fnt,enabled:this.Nl,canHavePropertyKeyframes:this.cot}}$H(t){t&&(this.not=t.sourceAdapterId,this.oot=t.sourceAdapterArguments,this.Wht=t.property,this.rf=t.type,this.aot=t.min,this.uot=t.max,this.knt=t.interpolationMode,this.Fnt=t.resultMode,this.Nl=t.enabled,this.cot=t.canHavePropertyKeyframes,this.Rit().$H(t.propertyKeyframeDataJson))}}_n.$nt=class{constructor(t,s){this.hst=s,this.dot=[],_n.Vq.Ant(this.dot,t,Dn,this)}er(){this.hst=null;for(const t of this.dot)t.er();_n.Dn(this.dot),this.dot=null}Qst(){return this.hst}mit(){const t=new Dn(null,this);return this.dot.push(t),t}let(t){const s=t.Rit();return s.Oit()[0]}Kht(t){const s=t.Rit(),i=s.Oit();return i.at(-1)}Met(s,t){const i=t.Rit(),e=i.Oit(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.QD()===s)return r}}bet(s,t){const i=t.Rit(),e=i.Oit(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.QD()>s)return r}}xet(s,t){const i=t.Rit(),e=i.Oit(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.QD()>=s)return r}}wet(s,t){const i=t.Rit(),e=i.Oit();for(let t=e.length-1;0<=t;t--){const h=e[t];if(h.QD()<=s)return h}}*bst(){for(const t of this.dot)yield t}KH(){return{propertyTrackDataItemsJson:this.dot.map(t=>t.KH())}}$H(t){t&&_n.Vq.Rnt(this.dot,t.propertyTrackDataItemsJson,Dn,this)}}}{const An=self.Os;class Ln{constructor(t,s){if(this.Hnt=s,this.zA=-1,this.pot="noease",this.mot=!1,this.E$=null,this.got=null,t){this.zA=t[0],this.pot=t[1],this.mot=!!t[2];const i=t[3];this.E$=i?i.split(" "):[],this.got=new Set(this.E$.map(t=>t.toLowerCase())),this.yot=null}}er(){this.Hnt=null,An.Dn(this.E$),this.E$=null,this.got.clear(),this.got=null,this.yot=null}yst(){return this.Hnt}JX(){return this.yot}Mot(t){this.yot=t}QD(){return this.zA}cB(t){this.zA=t,this.Hnt.wot()}jet(){return this.pot}NB(t){this.pot=t}Hst(){return this.mot}qst(t){this.mot=!!t}SB(){return this.E$}ett(t){this.E$=t?t.split(" "):[],this.got=new Set(this.E$.map(t=>t.toLowerCase()))}Sot(){return this.got}tst(t){return this.got.has(t.toLowerCase())}KH(){return{time:this.zA,ease:this.pot,enable:this.mot,tags:this.E$}}$H(t){t&&(this.zA=t.time,this.pot=t.ease,this.mot=t.enable,this.E$=t.tags,this.got=new Set(this.E$.map(t=>t.toLowerCase())))}}An.Knt=class{constructor(t,s){this.hst=s,this.mst=[],An.Vq.Ant(this.mst,t,Ln,this),this.wot()}er(){this.hst=null;for(const t of this.mst)t.er();An.Dn(this.mst),this.mst=null}wot(){this.mst.sort((t,s)=>t.QD()-s.QD());for(let t=0;t<this.mst.length;t++){const s=this.mst[t];s.Mot(this.mst[t+1])}}Qst(){return this.hst}Tot(){return this.mst.length}gst(){return this.mst}dit(){const t=new Ln(null,this);return this.mst.push(t),this.wot(),t}yit(t){for(const s of this.mst)if(t(s)){const i=this.mst.indexOf(s);-1!==i&&(s.er(),this.mst.splice(i,1))}this.bot(),this.wot()}bot(){this.mst.sort((t,s)=>t.QD()-s.QD())}Iit(t){return this.mst.indexOf(t)}Nit(t){return this.mst[t]}*xot(){for(const t of this.mst)yield t}*vot(){for(let t=this.mst.length-1;0<=t;t--)yield this.mst[t]}KH(){return{keyframeDataItemsJson:this.mst.map(t=>t.KH())}}$H(t){t&&(An.Vq.Rnt(this.mst,t.keyframeDataItemsJson,Ln,this),this.wot())}}}{const On=self.Os;class Rn{constructor(t,s){this.lot=s,this.ght=null,this.Cot=null,this.rf="",this.zA=NaN,this.pot="noease",this.mot=!1,this.Got=null,this.Iot=void 0,this.Not="line",t&&(this.ght=t[0][0],this.Cot=t[0][1],this.rf=t[0][2],this.zA=t[1],this.pot=t[2],this.mot=!!t[3],this.Not=t[5],this.Got=null,t[4]&&(this.Got=new On.Eot(t[4],this)),this.yot=null,this._ot=null)}er(){this.lot=null,this.Got&&(this.Got.er(),this.Got=null),this.yot=null,this._ot=null}Dot(){return this.Got}Mot(t){this.yot=t}JX(){return this.yot}Aot(t){this._ot=t}YX(){return this._ot}iet(){return this.ght}zet(t){"color"===this.rf&&On.ue(t)?(this.ght[0]=On.zr(t),this.ght[1]=On.Br(t),this.ght[2]=On.Ur(t)):this.ght=t}$ht(){return this.Cot}Pet(t){"color"===this.rf&&On.ue(t)?(this.Cot[0]=On.zr(t),this.Cot[1]=On.Br(t),this.Cot[2]=On.Ur(t)):this.Cot=t}nK(){const t=this.lot.Uit().$X();return"relative"===t?this.iet():"absolute"===t?this.$ht():void 0}qx(){return this.rf}aet(t){this.rf=t}QD(){return this.zA}cB(t){this.zA=t,this.lot.Lot()}jet(){return this.pot}NB(t){this.pot=t}Hst(){return this.mot}qst(t){this.mot=!!t}VX(){return this.Not}hK(s){if(this.Got){if(!this.Iot&&null!==this.Iot){const i=this.Got.Oot();if(i){const e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.LB()===s)return this.Iot=h,this.Iot}}this.Iot=null}return this.Iot}}KH(){const t=this.Got;return{addonDataJson:t&&t.KH(),value:this.ght,aValue:this.Cot,type:this.rf,time:this.zA,ease:this.pot,enable:this.mot}}$H(t){t&&(t.addonDataJson&&this.Got._SetFromJson(t.addonDataJson),this.ght=t.value,this.Cot=t.aValue,this.rf=t.type,this.zA=t.time,this.pot=t.ease,this.mot=t.enable)}}On.fot=class{constructor(t,s){this._it=s,this.Lit=[],this.Rot=[],On.Vq.Ant(this.Lit,t,Rn,this),On.Vq.Ont(this.Rot,t,Rn,this),this.Lot()}er(){this._it=null;for(const t of this.Lit)t.er();On.Dn(this.Lit),this.Lit=null;for(const s of this.Rot)s.er();On.Dn(this.Rot),this.Rot=null}Lot(){let s=this.Lit;s.sort((t,s)=>t.QD()-s.QD());for(let t=0;t<s.length;t++){const i=s[t];t+1<s.length&&i.Mot(s[t+1]),0<=t-1&&i.Aot(s[t-1])}(s=this.Rot).sort((t,s)=>t.QD()-s.QD());for(let t=0;t<s.length;t++){const e=s[t];t+1<s.length&&e.Mot(s[t+1]),0<=t-1&&e.Aot(s[t-1])}}Oet(){const t=new Rn(null,this);return this.Lit.push(t),this.Lot(),t}Ret(t){for(const s of this.Lit)if(t(s)){const i=this.Lit.indexOf(s);-1!==i&&(s.er(),this.Lit.splice(i,1))}this.Pot(),this.Lot()}Pot(){this.Lit.sort((t,s)=>t.QD()-s.QD())}Uit(){return this._it}kot(){return this.Lit.length}Kht(){return this.Lit[this.Lit.length-1]}Oit(){return this.Lit}QX(){return this.Rot}*Fot(){for(const t of this.Lit)yield t}*jot(){for(let t=this.Lit.length-1;0<=t;t--)yield this.Lit[t]}KH(){const t=this.Lit,s=this.Rot;return{propertyKeyframeDataItemsJson:t.map(t=>t.KH()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.KH())}}$H(t){t&&(On.Vq.Rnt(this.Lit,t.propertyKeyframeDataItemsJson,Rn,this),On.Vq.Rnt(this.Rot,t.propertyKeyframeDataItemsIncludingDisabledJson,Rn,this),this.Lot())}}}{const Pn=self.Os;class kn{constructor(t,s){this.Got=s,this.Kc=t[0],this.zot=t[1]}er(){this.Got=null,this.zot=null}Dot(){return this.Got}LB(){return this.Kc}KH(){return{id:this.Kc,data:this.zot}}$H(t){t&&(this.Kc=t.id,this.zot=t.data)}}class Fn extends kn{constructor(t,s){super(t,s),this.Bot=this.zot[0],this.Uot=!!this.zot[1],this.Wot=this.zot[2],this.Qot=!!this.zot[3]}er(){super.er()}uK(){return this.Bot}Gnt(){return this.Uot}fK(){return this.Wot}Int(){return this.Qot}KH(){return Object.assign(super.KH(),{startAnchor:this.Bot,startEnable:!!this.Uot,endAnchor:this.Wot,endEnable:!!this.Qot})}$H(t){t&&(super.$H(t),this.Bot=t.startAnchor,this.Uot=!!t.startEnable,this.Wot=t.endAnchor,this.Qot=!!t.endEnable)}}class jn extends kn{constructor(t,s){super(t,s),this.Jot=this.zot[0],this.Yot=this.zot[1]}er(){super.er()}Ent(){return this.Jot}Nnt(){return this.Yot}KH(){return Object.assign(super.KH(),{direction:this.Jot,revolutions:this.Yot})}$H(t){t&&(super.$H(t),this.Jot=t.direction,this.Yot=t.revolutions)}}Pn.Eot=class{constructor(t,s){this.Vot=s,this.Hot=[],Pn.Vq.Ant(this.Hot,t,{prop:0,map:new Map([["cubic-bezier",Fn],["angle",jn]])},this)}er(){this.Vot=null;for(const t of this.Hot)t.er();Pn.Dn(this.Hot),this.Hot=null}qot(){return this.Vot}Oot(){return this.Hot}*Zot(){for(const t of this.Hot)yield t}KH(){return{addonDataItemsJson:this.Hot.map(t=>t.KH())}}$H(t){t&&Pn.Vq.Rnt(this.Hot,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",Fn],["angle",jn]])},this)}}}{let m=self.Os,i=0;m.nnt=class extends m.GZ{constructor(t,s){super("tween-"+i++,t,s),this.Kc="",this.Xot=!1,this.Kot="start-value",this.ast=null,this.$ot=null,this.tat=null,this.Eit=null,this.sat=null}P$(t){const s=m.ir(m.Event,"tweenstatereleased");s.iat=this,t.dispatchEvent(s)}qx(){return 1}u$(){for(const t of this.h$.j$().F$())this.r$.push(m.eat.jb(this,t));this.Eit=this.r$[0]}ztt(){const t=this.h$.j$().Btt(),s=m.eat.jb(this,t);return this.r$.push(s),this.hat(),s}hat(){this.Eit=this.r$[0]}RB(t){return this.Eit.qtt()[0]}oet(t){this.rat=t}EB(){const t=this.BX();if(t&&t.length){const s=t[0];if(this.Eit=s){const i=s.EB();return s.Ist()?i:void 0}}}nat(t){this.tat||(this.tat=[]),this.tat.push(t)}oat(t){this.$ot||(this.$ot=[]),this.$ot.push(t)}aat(t){if(this.tat){const s=this.tat.indexOf(t);-1!==s&&this.tat.splice(s,1)}}uat(t){if(this.$ot){const s=this.$ot.indexOf(t);-1!==s&&this.$ot.splice(s,1)}}lat(t,s){for(const i of this.r$)for(const e of i.Mst)if(e.Ztt()===s){const h=e.xst(),r=e.Uit(),n=h.let(r);n.zet(t),n.Pet(t)}}cat(t){for(const s of this.r$)for(const i of s.Mst)if(i.Ztt()===t)return i}fat(t){for(const s of t){const i=this.cat(s);this.lat(i.Get(),s)}if(this.itt()){const e=this.dB()-this.QD();this.fB(e);for(const h of this.r$)h.Vst(e);this.Mtt(0)}else{const r=this.QD();this.fB(r);for(const n of this.r$)n.Vst(r);this.Mtt(r)}this.wtt()}dat(t,s){const i=this.cat(s),e=i.xst(),h=i.Uit(),r=e.Kht(h);r.cB(this.dB()),r.zet(t),r.Pet(t)}pat(t){this.Kc=t}LB(){return this.Kc}mat(t){this.Kot=t}gat(){return this.Kot}AB(t){this.Xot=t}DB(){return this.Xot}att(){if(this.tat)for(const t of this.tat)t(this);if(!this.MX())for(const s of this.r$)s.Tit()}utt(){this.x$=this.Zc.ltt()}SX(){if(!this.G$&&(this.G$=!0,this.$ot))for(const t of this.$ot)t(this)}cB(t){this.yat(),super.cB(t)}vtt(t){(t=m.ue(t)?t:this.dB())<0?this.f$=0:t>=this.dB()?this.f$=this.dB():this.f$=t,this.Eit.Ctt()}cX(t){if(!this.wX()&&"current-state"===this.gat())for(const s of this.r$)s.Sit();super.cX(t)}aB(t=!1){if(super.aB(t),!this.MX())for(const s of this.r$)s.wit()}$f(t=!0,s=!1){this.yat(),super.$f(t,s)}yat(){for(const t of this.r$){const s=t=>{const s=t.QD(),i=this.dB();return 0!==s&&s!==i};t.git(s),t.Mit(s)}}lZ(){if(!this.nB()){const t=this.EB();if(t&&t.yF().pY())return!1;this.e$.nX(this),this._tt()}return!0}mX(h,t,s){if(this.ast||(this.ast=this.EB()),!this.ast||this.ast.OU())this.aB(!0),this.utt();else{const i=this.ast.g3();if(0!==(h=-1!==i?s*i:h)||0!==this.N$){this.N$=h;const r=this.f$+this.d$,n=h*this.p$,o=r+n,a=this.h$.Rtt;o<0?(this.f$=0,this.d$=-o):a<=o?(this.f$=a,this.d$=this.f$-o):(this.f$=o,this.d$=0);let t=!1,s=!1,i=this.mB(),e=this.yB();i||e?i&&!e?0<this.p$?this.f$>=a&&(this.vtt(0),this.Mat(m.wat.Tween.z9.OnAnyTweenLoop),this.Mat(m.wat.Tween.z9.OnTweensLoop),s=!0):this.f$<=0&&(this.vtt(a),this.Mat(m.wat.Tween.z9.OnAnyTweenLoop),this.Mat(m.wat.Tween.z9.OnTweensLoop),s=!0):!i&&e?0<this.p$?this.f$>=a&&(this.Mtt(a),this.MB(-1*this.wB()),s=!0,1===this.m$?this.g$<this.Gz()?(this.g$++,this.Mat(m.wat.Tween.z9.OnAnyTweenLoop),this.Mat(m.wat.Tween.z9.OnTweensLoop),this.Mat(m.wat.Tween.z9.OnAnyTweenPingPong),this.Mat(m.wat.Tween.z9.OnTweensPingPong),this.m$=0):(this.Mat(m.wat.Tween.z9.OnAnyTweenPingPong),this.Mat(m.wat.Tween.z9.OnTweensPingPong),t=!0):0===this.m$&&(this.Mat(m.wat.Tween.z9.OnAnyTweenPingPong),this.Mat(m.wat.Tween.z9.OnTweensPingPong),this.m$=1)):this.f$<=0&&(this.Mtt(0),this.MB(-1*this.wB()),s=!0,1===this.m$?this.g$<this.Gz()?(this.g$++,this.Mat(m.wat.Tween.z9.OnAnyTweenLoop),this.Mat(m.wat.Tween.z9.OnTweensLoop),this.Mat(m.wat.Tween.z9.OnAnyTweenPingPong),this.Mat(m.wat.Tween.z9.OnTweensPingPong),this.m$=0):(t=!0,this.Mat(m.wat.Tween.z9.OnAnyTweenPingPong),this.Mat(m.wat.Tween.z9.OnTweensPingPong)):0===this.m$&&(this.Mat(m.wat.Tween.z9.OnAnyTweenPingPong),this.Mat(m.wat.Tween.z9.OnTweensPingPong),this.m$=1)):i&&e&&(0<this.p$?this.f$>=a&&(this.Mtt(a),this.MB(-1*this.wB()),s=!0,0===this.m$&&(this.Mat(m.wat.Tween.z9.OnAnyTweenPingPong),this.Mat(m.wat.Tween.z9.OnTweensPingPong)),1===this.m$&&(this.Mat(m.wat.Tween.z9.OnAnyTweenLoop),this.Mat(m.wat.Tween.z9.OnTweensLoop),this.Mat(m.wat.Tween.z9.OnAnyTweenPingPong),this.Mat(m.wat.Tween.z9.OnTweensPingPong)),this.m$++,this.m$=m.wrap(this.m$,0,2)):this.f$<=0&&(this.Mtt(0),this.MB(-1*this.wB()),s=!0,0===this.m$&&(this.Mat(m.wat.Tween.z9.OnAnyTweenPingPong),this.Mat(m.wat.Tween.z9.OnTweensPingPong)),1===this.m$&&(this.Mat(m.wat.Tween.z9.OnAnyTweenLoop),this.Mat(m.wat.Tween.z9.OnTweensLoop),this.Mat(m.wat.Tween.z9.OnAnyTweenPingPong),this.Mat(m.wat.Tween.z9.OnTweensPingPong)),this.m$++,this.m$=m.wrap(this.m$,0,2))):0<this.p$?this.f$>=a&&(this.g$<this.Gz()?(this.g$++,this.vtt(0),this.Mat(m.wat.Tween.z9.OnAnyTweenLoop),this.Mat(m.wat.Tween.z9.OnTweensLoop),s=!0):(this.Mtt(a),t=!0)):this.f$<=0&&(this.g$<this.Gz()?(this.g$++,this.vtt(a),this.Mat(m.wat.Tween.z9.OnAnyTweenLoop),this.Mat(m.wat.Tween.z9.OnTweensLoop),s=!0):(this.Mtt(0),t=!0)),t?(this.Eit.Ptt(),this.aB(!0),this.utt()):(this.Eit.Ac(this.f$,!0,!1,s,this.I$,!1),this.I$&&(this.I$=!1))}}}Mat(t){const s=this.EB(),i=s.Sat(m.wat.Tween);i.PushTriggerTween(this),this.Zc.ij(t,s,i.cz()),i.PopTriggerTween()}KH(){const t=super.KH(),s=this.Y$();return Object.assign(t,{tweenDataItemJson:s.KH(),id:this.Kc,destroyInstanceOnComplete:this.Xot,initialValueMode:this.Kot})}$H(t){if(t){const s=this.Y$();s.$H(t.tweenDataItemJson),super.$H(t),this.Kc=t.id,this.Xot=t.destroyInstanceOnComplete,this.Kot=t.initialValueMode,this.hat()}}static IsPlaying(t){return t.IsPlaying()}static xB(t){return t.xB()}static Tat(t){return!!t.yB()&&0===t.stt()}static bat(t){return!!t.yB()&&1===t.stt()}static xat(t){const s=t.runtime.B$(),i=new m.Dnt;if(t.json){i.$H(t.json.tweenDataItemJson);const e=new m.nnt(i,s);return e.$H(t.json),e}{const h=new m.nnt(i,s),r=(m.Re(t.vat)||(t.vat=[t.vat]),h.pat(t.id),h.ett(t.tags),h.mat(t.initialValueMode),h.AB(t.releaseOnComplete),h.pB(t.loop),h.gB(t.pingPong),h.fB(t.time),h.H$(0),h.Z$("default"),h.X$(t.vat[0].resultMode),h.K$(t.repeatCount),h.ztt()),n=(r.Jst(t.fz.DF()),r.Z$("default"),r.X$(t.vat[0].resultMode),r.qst(!0),r.Zst(t.fz.yF().oO()),t.fz.sz()),o=n.$st()?n.Kst():t.fz.r4().Xp(),a=n.$st()?n.sit():t.fz.r4().um(),u=(r.Xst(o),r.tit(a),r.fit()),l=(u.cB(0),u.NB("noease"),u.qst(!0),u.ett(""),r.fit());l.cB(t.time),l.NB("noease"),l.qst(!0),l.ett("");for(const c of t.vat){const f=r.pit(),d=(f.Zit(c.sourceId),f.$it(c.sourceArgs),f.het(c.property),f.oet(c.type),f.fet(NaN),f.pet(NaN),f.Z$("default"),f.X$(c.resultMode),f.qst(!0),f.Let()),p=(d.aet(c.valueType),d.cB(0),d.NB(c.ease),d.qst(!0),d.zet(c.startValue),d.Pet(c.startValue),f.Let());p.aet(c.valueType),p.cB(t.time),p.NB(c.ease),p.qst(!0),p.zet(c.endValue),p.Pet(c.endValue),f.W$()}return h}}static Jst(t,s){if(!isNaN(s))for(const i of t.BX())i.Jst(s)}Cat(t,s){return this.sat||(this.sat=m.ir(self.GB,this,t,s)),this.sat}}}{const zn=self.Os;zn.eat=class extends zn.z${constructor(t,s){super(t,s),this.Gat=null,this.Iat=null}static jb(t,s){return zn.ir(zn.eat,t,s)}Nat(){1===this.Mst.length?this.Gat=this.Mst[0]:(this.Gat=this.Mst[0],this.Iat=this.Mst[1])}wst(){for(const t of this.hst.xst().bst())this.Mst.push(zn.Eat.jb(this,t));this.Nat()}pit(){const t=this.hst.xst(),s=t.mit(),i=zn.Eat.jb(this,s);return this.Mst.push(i),this.Nat(),i}cX(){if(this.Gst(),this.Ist()||!this.J$()){const t=this.Cst(),s=t.itt(),i=s?0:this.Yst();for(const h of this.Mst)h.cX(i),0===this.Sst&&1===h.hit()&&(this.Sst=1),0===this.bZ&&1===h.fX()&&(this.bZ=1);this.Tst=0;const e=this.Mst.some(t=>t.Ott());e&&(this.Tst=1),this.pst=this.rit(i),this.cst=!1,this.fst=!1,this.Ac(i)}}ktt(){}Ac(t,s=0,i=!1,e=!1,h,r=!1,n=!1){if(this.ast||this.EB(),this.ast){const o=!this.ast.OU();return o&&(!r||!this.yF().pY())&&((this.Iat?(this.Gat.Ac(t,i,e,n),this.Iat):this.Gat).Ac(t,i,e,n),void(0!==this.Gat.hit()&&(this.ust||(this.ust=this.ast.r4()),this.ust)&&this.ust.Dj()))}}jtt(){}$H(t){super.$H(t),this.Nat()}}}{const Bn=self.Os;Bn.Eat=class extends Bn.vst{constructor(t,s){super(t,s),this._at=!1}static jb(t,s){return Bn.ir(Bn.Eat,t,s)}Ac(t,s=!1,i=!1,e=!1){let h,r;if(this._at)h=this.Lit[0],r=this.Lit[1];else{if(s)h=this.Dit.wet(t,this._it);else{if(this.Pit){const n=this.Cst(),o=this.Pit.JX(),a=this.Pit.QD(),u=o?o.QD():n.dB();(t<=a||u<=t)&&(this.Pit=this.Dit.wet(t,this._it))}else this.Pit=this.Dit.wet(t,this._it);h=this.Pit}r=h.JX()}this.Ait.Ac(t,h,r,s,i,e)}Let(){const t=this._it.Rit(),s=t.Oet();return this.Pit=null,this._at=this.met().length<=2,s}Mit(t){this.Pit=null;const s=this._it.Rit();s.Ret(t),this._at=this.met().length<=2}KH(){return{sourceAdapterJson:this.W$().KH(),basic:this._at}}$H(t){t&&(this.W$().$H(t.sourceAdapterJson),this._at=t.basic)}}}{const Un=self.Os,Wn=self.hc;Un.Lc=class extends Un.Kh{constructor(t,s=!0){super(),this.nr=t[0],this.Dat=t[2],this.Aat=[];for(const i of t[1]){const e=Un.Lat.jb(this,i);this.Aat.push(e)}for(let t=0;t<this.Aat.length;t++){const h=this.Aat[t],r=this.Aat[t+1],n=this.Aat[t-1];h.Mot(r),h.Aot(n)}this.Oat=new Map,this.Rat=new Map,this.Pat(),s&&Wn.Rc(this.nr,(t,s,i,e)=>this.Ac(t,s,i,e),null,{transition:this})}static jb(t){return Un.ir(Un.Lc,t)}er(){for(const t of this.Aat)t.er();Un.Dn(this.Aat),this.Aat=null,this.Oat.clear(),this.Oat=null,this.Rat.clear(),this.Rat=null}Oc(t){this.Dat=!!t}kat(t){const s=this.Rat.get(t);if(s)return s;for(const i of this.Aat)if(i.Fat()===t)return this.Rat.set(t,i),i}jat(s){for(let t=this.Aat.length-1;0<=t;t--){const i=this.Aat[t],e=i.Fat();if(e<=s){let t=i;if(e<s)return t;if(e===s){for(;t;){const h=t.YX();if(!h)break;if(h.Fat()!==t.Fat())break;t=h}return t}}}}Ac(t,s,i,e){let h=t/e;if(this.Dat){const M=this.kat(0),w=this.kat(1),S=s+(s+i)*M.zat(),T=(s+i)*w.zat(),b=T-S;return 0===e?S+b:Wn.kc(t,S,b,e)}0===e&&(h=1);let r=this.jat(h),n=r.JX();if(!n){const x=r.YX(),v=r;r=x,n=v}const o=n.Fat()-r.Fat(),a=Un.ur(h,r.Fat(),n.Fat(),0,o);if(r.Bat()||0==o){const C=s+(s+i)*r.zat(),G=(s+i)*n.zat(),I=G-C;return 0==o?1===a?C+I:C:Wn.kc(a,C,I,o)}let u=r.Fat(),l=r.zat(),c=r.Fat()+r.Uat(),f=r.zat()+r.Wat(),d=n.Fat()+n.Qat(),p=n.zat()+n.Jat(),m=n.Fat(),g=n.zat(),y=Wn.Tc("spline")(a,u,l,c,f,d,p,m,g,this.Oat.get(r));return(1-(y+=r.zat()))*s+y*(s+i)}Pat(){this.Oat.clear();for(let t=0;t<this.Aat.length-1;t++){const s=this.Aat[t];if(s.Gnt()){const i=s,e=this.Aat[t+1];if(e.Int()){const h=i.Fat(),r=i.Fat()+i.Uat(),n=e.Fat()+e.Qat(),o=e.Fat();this.Oat.set(i,Wn.Fc(h,r,n,o))}}}}}}{const Qn=self.Os;Qn.Lat=class extends Qn.Kh{constructor(t,s){super(),this.Yat=t,this.Vat=s[0],this.Hat=s[1],this.qat=s[2],this.Zat=s[3],this.Xat=s[4],this.Kat=s[5],this.Uot=s[6],this.Qot=s[7],this.$at=s[8],this.yot=null,this._ot=null}er(){this.Yat=null}static jb(t,s){return Qn.ir(Qn.Lat,t,s)}Mot(t){this.yot=t}JX(){return this.yot}Aot(t){this._ot=t}YX(){return this._ot}Fat(){return this.Vat}zat(){return this.Hat}Uat(){return this.qat}Wat(){return this.Zat}Qat(){return this.Xat}Jat(){return this.Kat}Gnt(){return this.Uot}Int(){return this.Qot}Bat(){return"linear"===this.$at}tut(){return"cubic"===this.$at}}}{const Jn=self.Os;Jn.sut=class extends Jn.Kh{constructor(t){super(),this.Zc=t,this.iut=[]}er(){for(const t of this.iut)t.er();Jn.Dn(this.iut),this.iut=null}jb(t){this.iut.push(Jn.Lc.jb(t))}}}{const Yn=self.Os;Yn.eut=class extends Yn.Kh{constructor(t){super(),this.Zc=t,this.hut=null,this.rut=null,this.dZ=t=>this.pZ(t.fz)}er(){if(this.xZ(),this.hut){for(const t of this.hut.values())t.clear();this.hut.clear()}this.hut=null,this.Zc=null}jb(t){if(this.hut||(this.hut=new Map),t){const s=t[0][16],i=s[0],e=t[1],h=(this.hut.has(e)||this.hut.set(e,new Map),this.hut.get(e));h.set(i,t)}}vZ(){const t=this.Zc.Af();t&&t.addEventListener("instancedestroy",this.dZ)}xZ(){const t=this.Zc.Af();t&&t.removeEventListener("instancedestroy",this.dZ)}nut(){return!!this.hut&&0!==this.hut.size}out(t,s){let i;if(i=t instanceof Yn.aut?t.oO():t,this.hut.has(i)){const e=this.hut.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}}uut(t,s){this.rut||(this.rut=new WeakMap),this.rut.has(t)||this.rut.set(t,s)}lut(t){if(!this.rut)return"";const s=this.rut.get(t);return s||""}pZ(t){this.rut&&this.rut.has(t)&&this.rut.delete(t)}}}{const Vn=self.Os;Vn.cut=class{constructor(t){this.Zc=t,this.fut=new Vn.dut}er(){this.fut.er(),this.fut=null,this.Zc=null}I4(){return this.Zc}jb(t){this.fut.sc(t)}mut(t){return this.fut.Ks(t)}gut(){return this.fut.gut()}}}{const b=self.Os;b.yut=class{constructor(t,s,i,e,h,r,n){this.Zc=h.I4(),this.Mut=h,this.wut=t,this.Sut=i,this.Tut=e,this.jg=s,this.Hq=r,this.but=n??r.EB().DF(),this.xut(),this.vut=this.Gut?.Cut()??-1,this.Iut=[],this.Nut=null,this.Eut=NaN,this._ut=null,this.Dut=null,this.Aut=null,this.Lut="",this.Out=null,this.Rut="",this.Put="",this.kut=0,this.Fut=!1,this.T$=!1}er(){this.T$||(b.Dn(this.Iut),this.Iut=null,this.Zc=null,this.Mut=null,this.Tut=null,this.Hq=null,this.Nut=null,this.Eut=NaN,this._ut&&this._ut.clear(),this._ut=null,this.Dut=null,this.Aut=null,this.Lut="",this.Out=null,this.Rut="",this.Put="",this.T$=!0)}hr(){return this.T$}jut(){return this.Mut}I4(){return this.Zc}Uc(){return this.wut}zut(){return this.Tut}rB(){return this.jg}kZ(){return this.Hq||(this.Hq=this.Zc.t4(this.but).sz()),this.Hq}But(){return this.Uut(this.vut)}Wut(){const t=this.But();return t?t.rB():""}Qut(){const t=this.But();return t?t.SB():[]}Jut(t){const s=this.Qut();if(!s)return!1;if(!s.length)return!1;const i=b.yut.htt(t);return!(!i||!i.length)&&i.every(b.yut.ott,s)}Yut(t,s){const i=this.Qut();if(!i)return!1;if(!i.length)return!1;const e=b.yut.htt(t);return!(!e||!e.length)&&e.every(t=>b.yut.Vut.call(i,t,s))}static ott(t){return""===t?1===this.length&&""===this[0]:this.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static htt(t){return t.trim().split(" ")}static Vut(s,i){return""===s?1===this.length&&""===this[0]:this.some(t=>b.compare(t.trim(),i,s.trim()))}Hut(t){const s=this.But();if(s){if(b.ue(t)){const i=s.qut(),e=i?i[t]:void 0;if(b.ue(e))return this.Uut(e)}if("string"==typeof t)for(const h of s.qut()){const r=this.Uut(h);if(r.lB(t))return this.Uut(r.Cut())}}}Zut(t){const s=this.Hut(t);return s?s.rB():""}Xut(t){const s=this.Hut(t);return s?s.SB():""}Kut(t){const s=this.But();if(!s)return-1;const i=s.qut();if(!i)return-1;const e=this.Hut(t);return e?i.indexOf(e.Cut()):-1}$ut(){const t=this.But();if(!t)return 0;const s=t.qut();return s?s.length:0}Uut(t){return this.Tut.Uut(t)}$f(){const t=this.tlt();t.slt(!0)}slt(t){if(this.ilt()){for(const[s,i]of this.ilt().entries())i.slt(!1);this.ilt().clear()}if(this._ut=null,this.Nut=null,this.elt=null,this.Dut=null,this.Lut="",this.Out=null,this.Rut="",this.Put="",this.Iut=[],t){this.Mut.hlt(this);const e=this.Gut.Cut();e!==this.vut&&this.rlt(e)}else this.vut=this.Gut.Cut()}nlt(){const t=this.Tut.Uut(this.vut);return t?t.ult().olt():0}llt(t){const s=this.clt(t);return s?s.Uc():""}flt(t){let s;return b.ue(t)&&(s=this.clt(t)),"string"==typeof t&&(s=this.dlt(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.iet():""}plt(t){let s;if(b.ue(t)&&(s=this.clt(t)),s="string"==typeof t?this.dlt(t):s){const i=s.mlt();b.ue(i)&&(this.Iut.push(this.vut),this.rlt(i))}}glt(t){const s=this.Tut.ylt(t);if(s){const i=this.Tut.Uut(s.Cut());i&&(this.Iut.push(this.vut),this.rlt(i.Cut()))}}Mlt(){const t=this.Iut.pop();b.ue(t)?this.rlt(t):this.wlt()&&(this.Mut.hlt(this.wlt(),!0,!1,!1),this.wlt().rlt(this.Slt()),this.tlt().Tlt(this.wlt()))}blt(t){const s=this.But();if(s){s.Cut();const i=this.Hut(t);i&&(this.Iut.push(this.vut),this.rlt(i.Cut()))}}xlt(s){if(b.ue(s)){const t=this.Tut.Uut(this.vut),i=t.ult().vlt();return!!i[s]}if("string"==typeof s){const e=this.Tut.Uut(this.vut),h=e.ult().vlt();for(let t=0;t<h.length;t++)if(h[t].Uc()===s)return!0}return!1}Clt(){this.Fut=!0}Glt(){return 0<this.kut}Ilt(){this.kut++}Nlt(){this.kut--,0===this.kut&&this.Fut&&this.Mut.Elt(this)}rlt(t){const i=this.vut,s=this.kZ().EB();if(this.Ilt(),this.Mut._lt(this),this.Zc.ij(b.U9.Flowchart.z9.OnBeforeAnyNodeChange,s),this.Zc.ij(b.U9.Flowchart.z9.OnBeforeTaggedNodeChange,s),this.Zc.ij(b.U9.Flowchart.z9.OnBeforeAnyNodeChangeInFlowchart,s),this.Zc.ij(b.U9.Flowchart.z9.OnBeforeTaggedNodeChangeInFlowchart,s),this.vut=t,this.Zc.ij(b.U9.Flowchart.z9.OnAnyNodeChange,s),this.Zc.ij(b.U9.Flowchart.z9.OnTaggedNodeChange,s),this.Zc.ij(b.U9.Flowchart.z9.OnAnyNodeChangeInFlowchart,s),this.Zc.ij(b.U9.Flowchart.z9.OnTaggedNodeChangeInFlowchart,s),this.Mut.Dlt(),this.Nlt(),!this.hr()){const e=this.Uut(this.vut);if("reference"===e.qx()){const h=e.Alt();if(this.Llt(e)){this.Iut.pop();const r=this.Olt(e),n=(this.Mut.hlt(r,!0,!0,!1),r.Rlt(this,i),this.tlt());n.Tlt(r)}else{const o=e.Plt();if(h){this.Iut.pop();let s=e.klt();if(s){let t=this.Mut.Flt(s);for(;t;)s=b.Bd(s),t=this.Mut.Flt(s)}else{s=h+"-ref";let t=this.Mut.Flt(s);for(;t;)s=b.Bd(s),t=this.Mut.Flt(s)}const a=this.Mut.jlt(h,o,s,this.Hq,!0),u=(a.Rlt(this,i),this.zlt(e,a),this.tlt());a.Blt(u),u.Tlt(a)}}}}}clt(t){const s=this.Tut.Uut(this.vut);if(!s)return null;const i=s.ult().vlt();if(!i)return null;const e=i[t];return e||null}dlt(t){const s=this.Tut.Uut(this.vut);if(!s)return null;const i=s.ult().Ult(t);return i||null}xut(s){if("number"==typeof s){let t=this.Uut(s);t=t||this.Tut.Wlt(),this.Gut=t}else{let t=this.Tut.ylt(this.Sut);t=t||this.Tut.Wlt(),this.Gut=t}}KH(){return this.Fut?null:{flowchartName:this.wut,flowchartTag:this.jg,startNodeTag:this.Sut,currentNodeId:this.vut,previousNodeIds:this.Iut,pluginUID:this.Hq.EB().DF(),reference:{previousFlowchartTag:this.wlt()?this.wlt().rB():"",previousStartNodeId:b.ue(this.Slt())?this.Slt():NaN,referencesJson:this.Qlt(),currentReferenceFlowchartTag:this.Jlt()?this.Jlt().rB():"",rootFlowchartTag:this.tlt()?this.tlt().rB():""}}}Qlt(){if(!this.Ylt())return null;const t=[];for(const[s,i]of this.ilt().entries())t.push({flowchartElementId:s.Cut(),flowchartStateTag:i.rB()});return t.length?t:null}$H(t){if(t){if(this.wut=t.flowchartName,this.jg=t.flowchartTag,this.Sut=t.startNodeTag,this.vut=t.currentNodeId,this.Iut=t.previousNodeIds,this.but=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.Lut=s.previousFlowchartTag,this.Eut=s.previousStartNodeId,this.Out=s.referencesJson,this.Rut=s.currentReferenceFlowchartTag,this.Put=s.rootFlowchartTag}this.xut()}}wlt(){return"string"==typeof this.Lut&&this.Lut&&(this.Nut=this.Mut.Flt(this.Lut),this.Lut=""),this.Nut}Slt(){return this.Eut}Rlt(t,s){this.Nut=t,this.Eut=s}Jlt(){return"string"==typeof this.Rut&&this.Rut&&(this.Dut=this.Mut.Flt(this.Rut),this.Rut=""),this.Dut}Tlt(t){this.Dut=t,this.Dut===this&&(this.Dut=null)}tlt(){return"string"==typeof this.Put&&this.Put&&(this.Aut=this.Mut.Flt(this.Put),this.Put=""),this.Aut||this}Blt(t){this.Aut=t}Ylt(){return this.Vlt(),!!this._ut}Llt(t){return this.Vlt(),this._ut&&this._ut.has(t)}Vlt(){if(this.Out){this._ut&&this._ut.clear(),this._ut||(this._ut=new Map);for(const t of this.Out){const s=this.Mut.Flt(t.flowchartStateTag),i=s.Uut(t.flowchartElementId);this._ut.set(i,s)}this.Out=null}}ilt(){return this.Vlt(),this._ut}Olt(t){return this.Vlt(),this._ut.get(t)}zlt(t,s){this._ut||(this._ut=new Map),this._ut.set(t,s)}}}{const Hn=self.Os;Hn.Hlt=class{constructor(t){this.Zc=t,this.qlt=new Map,this.Zlt=null,this.Xlt=[],this.Klt=()=>this.MZ(),this.$lt=null}er(){Hn.Dn(this.Xlt),this.Xlt=null,this.qlt.clear(),this.qlt=null,this.Zlt=null,this.Zc=null,this.$lt=null}I4(){return this.Zc}jlt(t,s,i,e,h,r){const n=this.Zc.jut().mut(t);if(n){if(!this.qlt.has(i)){const o=new Hn.yut(t,i,s,n,this,e,r);return this.qlt.set(i,o),h&&this.hlt(o,!0),o}{const a=this.qlt.get(i);a&&this.Elt(a)}}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}Elt(t){if(t.Clt(),!t.Glt()){const s=t.rB();this.qlt.delete(s),t.er(),this.Zlt===t&&(this.Zlt=null)}}tct(t){t.$f()}Flt(t){return this.qlt.get(t)}_lt(t){this.Xlt.push(t)}Dlt(){this.Xlt.pop()}hlt(t,s=!1,i=!1,e=!0){if(e){const h=t.Jlt();t=h||t}t!==this.Zlt&&(this.sct(),this.ict(t,s,i))}ect(t){return"string"==typeof t?this.Flt(t):this.Xlt.length?this.Xlt[this.Xlt.length-1]:this.Zlt}sct(){if(this.Zlt&&!this.Zlt.hr()){const t=this.Zlt.kZ().EB();this.Zlt.Ilt(),this._lt(this.Zlt),this.Zc.ij(Hn.U9.Flowchart.z9.OnBeforeFlowchartChange,t),this.Dlt(),this.Zlt.Nlt()}}ict(t,s=!1,i=!1){if(this.Zlt=t,this.Zlt&&!this.Zlt.hr()){const e=this.Zlt.kZ().EB();this.Zlt.Ilt(),this._lt(this.Zlt),this.Zc.ij(Hn.U9.Flowchart.z9.OnFlowchartChange,e),!0!==i&&"number"!=typeof i||this.Zlt.xut(i),s&&(this.Zc.ij(Hn.U9.Flowchart.z9.OnAnyNodeChange,e),this.Zc.ij(Hn.U9.Flowchart.z9.OnTaggedNodeChange,e)),this.Dlt(),this.Zlt.Nlt()}}KH(){return{flowchartJsonObjects:[...this.qlt.values()].map(t=>t.KH()),currentFlowchartTag:this.Zlt?this.Zlt.rB():null}}$H(t){if(t){this.$lt=t;const s=new Map;for(const i of this.$lt.flowchartJsonObjects){const e=i.flowchartTag;if(this.qlt.has(e)){const h=this.qlt.get(e);h.$H(i),s.set(e,h)}else{const r=this.jlt(i.flowchartName,i.startNodeTag,i.flowchartTag,null,!1,i.pluginUID);r.$H(i),s.set(i.flowchartTag,r)}}for(const[n,o]of this.qlt.entries())s.has(n)||o.er();this.qlt.clear(),this.qlt=s,this.Zc.A9()?this.Zc.Af().addEventListener("afterload",this.Klt):this.MZ()}}MZ(){this.Zc.Af().removeEventListener("afterload",this.Klt);const t=this.qlt.get(this.$lt.currentFlowchartTag);t&&this.hlt(t,!0),this.$lt=null}}}{const qn=self.Os;qn.dut=class{constructor(){this.hct=new Map}er(){for(const t of this.hct.values())t.er();this.hct.clear(),this.hct=null}sc(t){const s=new qn.rct(t),i=s.Uc();this.hct.set(i,s)}Ks(t){return this.hct.get(t)}gut(){return!!this.hct.size}static nct(t,s,i,e){if(s)for(const h of s){const r=new i(h,e);t.push(r)}}}}{const Zn=self.Os;Zn.rct=class{constructor(t){this.nr=t[0],this.oct=new Zn.uct(t[1],this)}er(){this.oct.er(),this.oct=null}lct(){return this.oct}Uut(t){return this.oct.Uut(t)}ylt(t){return this.oct.ylt(t)}Wlt(){return this.oct.Wlt()}Uc(){return this.nr}}}{const Xn=self.Os;class Kn{constructor(t,s){this.oct=s,this.rf=t[7],this.cct=t[0],this.jg=t[1],this.jg?this.E$=this.jg.trim().split(" ").map(t=>t.trim()):this.E$=[],this.fct=t[2],this.dct=null,this.pct=null,"dictionary"===this.rf&&(this.dct=t[3],this.pct=t[4]),this.mct=t[6],this.gct=null,this.yct=null,this.Mct=null,"reference"===this.rf&&(this.gct=t[8],this.yct=t[9],this.Mct=t[10]),this.wct=new Xn.Sct(t[5],this)}er(){this.oct=null}lct(){return this.oct}ult(){return this.wct}Cut(){return this.cct}rB(){return this.jg}SB(){return this.E$}lB(t){if(!this.E$)return!1;if(!this.E$.length)return!1;const s=Xn.yut.htt(t);return!(!s||!s.length)&&s.every(Xn.yut.ott,this.E$)}Tct(){return this.mct}qut(){return this.fct}bct(){return this.dct}xct(){return this.pct}qx(){return this.rf}Alt(){return this.gct}Plt(){return this.yct}klt(){return this.Mct}}Xn.uct=class{constructor(t,s){this.Tut=s,this.vct=[],this.Cct=new Map,this.Gct=new Map,this.Ict=null,Xn.dut.nct(this.vct,t,Kn,this);for(const i of this.vct){const e=i.Cut(),h=i.rB(),r=i.SB(),n=i.Tct();if(this.Cct.set(e,i),h)for(const a of r)this.Gct.has(a)||this.Gct.set(a,new Set),this.Gct.get(a).add(i);n&&(this.Ict=i);const o=i.ult();for(const u of o.Nct()){const l=u.Cut();this.Cct.set(l,u)}}}er(){this.Tut=null;for(const t of this.vct)t.er();Xn.Dn(this.vct),this.vct=null}zut(){return this.Tut}Uut(t){return this.Cct.get(t)}ylt(t){if(!t||!t.length)return null;const i=[];for(const e of t.trim().split(" ")){let t=this.Gct.get(e.trim())??new Set;if(0===t.size)return null;i.push(t)}const s=i.reduce((t,s)=>s.size<t.size?s:t);return[...s].filter(s=>i.every(t=>t.has(s)))[0]}Wlt(){return this.Ict}*Ect(){for(const t of this.vct)yield t}}}{const $n=self.Os;class to{constructor(t,s){this.wct=s,this.cct=t[0],this.nr=t[1],this.ght=t[2],this._ct=t[3]}er(){this.wct=null}ult(){return this.wct}Cut(){return this.cct}Uc(){return this.nr}iet(){return this.ght}mlt(){return this._ct}}$n.Sct=class{constructor(t,s){this.Dct=s,this.Act=[],this.Lct=new Map,$n.dut.nct(this.Act,t,to,this);for(const i of this.Act)this.Lct.set(i.Uc(),i)}er(){this.Dct=null;for(const t of this.Act)t.er();$n.Dn(this.Act),this.Act=null}Oct(){return this.Dct}olt(){return this.Act.length}vlt(){return this.Act}Ult(t){return this.Lct.get(t)}*Nct(){for(const t of this.Act)yield t}}}{const so=self.Os;so.Rct=class extends so.Kh{constructor(t){super(),this.Pct=t,this.kct=[],this.kct.push(so.ir(so.Fct,this)),this.Fg=0,this.jct=this.kct[0]}er(){for(const t of this.kct)t.er();so.Dn(this.kct),this.jct=null,this.Pct=null}yF(){return this.Pct}bP(){return this.jct}zct(){return this.kct[this.Fg-1]}Jl(){this.bP().Jl()}Bct(){const t=this.kct,s=++this.Fg;if(s===t.length){const i=so.ir(so.Fct,this);t.push(i),this.jct=i}else{const e=t[s];e.$f(),this.jct=e}}Uct(){const t=this.kct,s=++this.Fg,i=(s===t.length&&t.push(so.ir(so.Fct,this)),t[s]);i.M0(t[s-1]),this.jct=i}O6(){this.jct=this.kct[--this.Fg]}Wct(i){const e=this.kct;for(let t=0,s=e.length;t<s;++t)e[t].Wct(i)}}}{const io=self.Os;io.Fct=class extends io.Kh{constructor(t){super(),this.kct=t,this.Pct=this.kct.yF(),this.Qct=this.Pct.I4().XO(),this.Jct=!0,this.x8=[],this.Yct=[]}er(){this.Vct(),this.kct=null,this.Pct=null,this.Qct=null}Vct(){io.Dn(this.x8),io.Dn(this.Yct)}yF(){return this.Pct}Hct(){return this.Jct}qct(){return this.Jct?!!this.Pct.vP():!!this.x8.length}TP(){return this.Jct?this.Pct.TP():this.x8}Zct(){return!!this.Yct.length}Xct(){return this.Yct}Kct(){const t=this.TP();return t.length?t:this.Yct}$f(){this.Jct=!0,io.Dn(this.Yct)}Jl(){this.Jct=!0}M0(t){t.Hct()?this.$f():(this.Jct=!1,io.Rn(this.x8,t.x8),io.Dn(this.Yct))}$ct(t){this.x8.push(t)}tft(t){this.Yct.push(t)}ift(t){this.Jct=!!t}eft(){return this.x8}hft(){return this.Yct}rft(t){this.Jct=!1,io.Dn(this.x8),this.x8.push(t)}nft(t){this.Jct=!1,io.Rn(this.x8,t)}oft(t){this.Jct=!1,io.Dn(this.x8);for(const s of t)this.x8.push(s)}aft(t,s){for(const i of s)t.has(i)||this.Yct.push(i)}uft(t){for(const s of t)this.x8.push(s);io.zn(this.Yct,t)}lft(){io.Dn(this.Yct)}cft(t){if(t)if(this.Qct.b6().QO().fft()){this.Hct()&&(io.Dn(this.x8),io.Rn(this.Yct,t.yF().TP()),this.Jct=!1);const s=this.Yct.indexOf(t);-1!==s&&(this.x8.push(this.Yct[s]),this.Yct.splice(s,1))}else this.rft(t)}Wct(t){io.zn(this.x8,t),io.zn(this.Yct,t)}}}{const eo=self.Os;eo.dft=class extends eo.Kh{constructor(t){super(),this.pft=t,this.Zc=this.pft.I4(),this.kct=[],this.kct.push(eo.ir(eo.mft,this,null)),this.Fg=0,this.gft=[]}er(){for(const t of this.kct)t.er();eo.Dn(this.kct),eo.Dn(this.gft),this.pft=null,this.Zc=null}FO(){return this.pft}I4(){return this.Zc}b6(){return this.kct[this.Fg]}yft(){return this.kct}Mft(){return this.Fg}x6(t){const s=this.kct,i=++this.Fg;if(i===s.length){const e=eo.ir(eo.mft,this,t);return s.push(e),e}{const h=s[i];return h.$f(t),h}}O6(){--this.Fg}wft(t){this.gft.push(t)}Sft(){this.gft.pop()}ZO(){const t=this.gft;return 0===t.length?null:t.at(-1)}}}{const ho=self.Os;ho.mft=class extends ho.Kh{constructor(t,s){super(),this.kct=t,this.Zc=this.kct.I4(),this.Tft=s,this.bft=0,this.xft=0,this.vft=!1,this.Cft=!1,this.Gft=null,this.Ift=0,this.Nft=0,this.Eft=null}er(){this.$f(null),this.kct=null,this.Zc=null}$f(t){this.Tft=t,this.bft=0,this.xft=0,this.vft=!1,this.Cft=!1,this.Eft=null}_ft(t,s){this.Tft=t,this.bft=0,this.xft=s}Dft(){this.bft=0,this.xft=0}QO(){return this.Tft}Aft(t){this.Tft=t}Lft(){return this.bft}Oft(t){this.bft=t}Rft(){return this.xft}Pft(t){this.xft=t}kft(t){this.vft=!!t}Fft(){return this.vft}jft(t){this.Cft=!!t}zft(){return this.Cft}Bft(t){this.Gft=t}Uft(){return this.Gft}Wft(t,s){this.Ift=t,this.Nft=s}KO(){return this.Ift}$O(t){this.Nft=t}Qft(){return this.Nft}Jft(){const t=this.Tft;return!!t.Yft()||this.bft<t.Vft()-1&&!!t.T6().length}Hft(t){this.Eft=t}qft(){return this.Eft}}}{const ro=self.Os;ro.Zft=class extends ro.Kh{constructor(t){super(),this.pft=t,this.Zc=this.pft.I4(),this.kct=[],this.Fg=-1,this.jct=null,this.Xft=[]}er(){ro.Dn(this.kct),this.pft=null,this.Zc=null}Kft(t){this.Xft=t;const s=this.Xft.slice(0);this.kct.push(s),this.Fg=0,this.jct=s}FO(){return this.pft}I4(){return this.Zc}$ft(){return this.jct}x6(){const t=++this.Fg,s=this.kct;t===s.length?s.push(this.Xft.slice(0)):ro.Rn(s[t],this.Xft),this.jct=s[t]}O6(){this.jct=this.kct[--this.Fg]}}}{const no=self.Os;no.t0t=class extends no.Kh{constructor(t){super(),this.pft=t,this.Zc=this.pft.I4(),this.kct=[],this.Fg=-1}er(){no.Dn(this.kct),this.pft=null,this.Zc=null}FO(){return this.pft}I4(){return this.Zc}s0t(){return 0<=this.Fg}$ft(){return this.kct[this.Fg]}x6(){if(++this.Fg,this.Fg===this.kct.length){const t=no.ir(no.i0t,this);return this.kct.push(t),t}{const s=this.kct[this.Fg];return s.$f(),s}}O6(){--this.Fg}e0t(s){const i=this.kct;for(let t=this.Fg;0<=t;--t){const e=i[t];if(e.Uc()===s)return e}return null}h0t(){return this.kct.slice(0,this.Fg+1)}}}{const oo=self.Os;oo.i0t=class extends oo.Kh{constructor(t){super(),this.r0t=t,this.nr="",this.Fg=0,this.n0t=!1,this.o0t=NaN}$f(){this.nr="",this.Fg=0,this.n0t=!1,this.o0t=NaN}C6(t){this.nr=t}Uc(){return this.nr}D6(t){this.Fg=t}oO(){return this.Fg}aB(){this.n0t=!0}L6(){return this.n0t}a0t(t){this.o0t=t}u0t(){return this.o0t}}}{const ao=self.Os;ao.l0t=class extends ao.Kh{constructor(){super(),this.kct=[],this.Fg=-1}er(){ao.Dn(this.kct)}$ft(){return this.kct[this.Fg]}x6(){if(++this.Fg,this.Fg!==this.kct.length)return this.kct[this.Fg];{const t=[];return this.kct.push(t),t}}O6(){--this.Fg}}}{let t=function(t,s){return t.oO()-s.oO()},r=function(i,e){for(let t=0,s=i.length;t<s;++t)if(i[t]!==e[t])return!1;return!0};t,r;const x=self.Os;x.c0t=class extends x.Kh{constructor(t){super(),this.Zc=t,this.f0t=[],this.d0t=new Map,this.p0t=[],this.m0t=new Map,this.g0t=new Map,this.y0t=new Map,this.M0t=new Map,this.w0t=new Map,this.S0t=new Map,this.T0t=0,this.b0t=[],this.x0t=[],this.v0t=[],this.C0t=new Map,this.G0t=new Map,this.Qct=x.ir(x.dft,this),this.I0t=x.ir(x.Zft,this),this.r0t=x.ir(x.t0t,this),this.N0t=[],this.E0t=[],this._0t=[],this.D0t=0,this.A0t=0,this.L0t=0,this.O0t=[],this.R0t=[],this.P0t=[],this.k0t=new Map,this.F0t=new Map,self.c3_callFunction=(t,s)=>this.j0t(t,s)}er(){this.sq(),this.Qct.er(),this.Qct=null,this.I0t.er(),this.I0t=null,x.Dn(this.E0t),x.Dn(this._0t),this.Zc=null,x.Dn(this.f0t),this.d0t.clear()}jb(t){const s=x.ir(x.z0t,this,t);this.f0t.push(s),this.d0t.set(s.Uc().toLowerCase(),s)}B0t(t){this.N0t.push(t)}U0t(){for(const t of this.G0t.values())t.W0t();for(const s of this.C0t.values())s.U0t();for(const i of this.G0t.values())i.U0t();for(const e of this.f0t)e.U0t();for(const h of this.f0t)h.T9();for(const r of this.N0t)r.U0t(!1);x.Dn(this.N0t),this.I0t.Kft(this.v0t)}I4(){return this.Zc}S9(t){return this.d0t.get(t.toLowerCase())||null}Q0t(t){this.p0t.push(t),this.m0t.set(t.J0t(),t)}Y0t(t){this.g0t.set(t.PY(),t)}V0t(t){this.y0t.set(t.PY(),t)}H0t(t){this.M0t.set(t.PY(),t)}q0t(t){switch(t.Z0t()){case 0:this.C0t.set(t.X0t().toLowerCase(),t);break;case 1:this.G0t.set(t.X0t().toLowerCase(),t)}}K0t(t){this.S0t.set(t.PY(),t),(t.pY()?this.b0t:this.x0t).push(t)}$0t(i){2<=i.length&&i.sort(t);let e=this.w0t.get(i.length);e||(e=[],this.w0t.set(i.length,e));for(let t=0,s=e.length;t<s;++t){const h=e[t];if(r(i,h))return h}return e.push(i),i}t1t(t){return this.v0t.push(t.s1t()),this.T0t++}XO(){return this.Qct}i1t(){return this.XO().b6()}QO(){return this.i1t().QO()}e1t(){const t=this.i1t(),s=t.QO();return s.h1t(t.Lft())}r1t(){const t=this.i1t(),s=t.QO();return s.n1t(t.Rft())}o1t(){return this.I0t}v6(){return this.r0t}a1t(t){const s=[];for(t=t.u1t();t;)x.Wh(s,t.l1t()),t=t.u1t();return s}c1t(t){const s={};for(const i of this.a1t(t))s[i.f1t()]=i.d1t();return Object.create(Object.prototype,s)}p1t(t){return this.S0t.get(t)||null}m1t(t){return this.g0t.get(t)||null}g1t(t){return this.y0t.get(t)||null}y1t(t){return this.M0t.get(t)||null}jO(t){return this.C0t.get(t.toLowerCase())||null}M1t(t,s){let i=this.G0t.get((t.Uc()+"."+s).toLowerCase());if(i)return i;if(!t.NY())for(const e of t.w1t())if(i=this.G0t.get((e.Uc()+"."+s).toLowerCase()))return i;return null}S1t(){return this.b0t}T1t(){return this.x0t}b1t(t){for(const s of this.b0t)s.x1t();if(t)for(const i of this.x0t)i.z2()&&i.x1t()}v1t(t){return this.m0t.get(t.toLowerCase())||null}C1t(t){const s=this.g0t.get(t);return s&&s.G1t()?s:null}I1t(){return this.p0t}N1t(){for(const t of this.p0t)t.E1t()}_1t(){for(const t of this.f0t)t.D1t()}A1t(t){this._1t(),this.D0t++;for(const s of t.zq()){const i=s.V7();i&&(this.Zc.L1t(s),i.pG(),this.Zc.O1t())}this.D0t--}async R1t(t){this._1t(),this.D0t++;for(const s of this.P1t(t))await this.Zc.k1t(s);this.D0t--}*P1t(t){for(const s of t.zq()){const i=s.V7();i&&(this.Zc.L1t(s),yield*i.F1t(),this.Zc.O1t())}}j1t(t,s,i,e){let h=!1;if(!t.R3())return this.z1t(s,i,e);this.A0t++;for(const r of t.zq()){const n=r.V7();if(n){this.Zc.L1t(r);for(const a of n.B1t()){const u=a.j1t(s,i,e);h=h||u}const o=n.j1t(s,i,e);h=h||o,this.Zc.O1t()}}return this.A0t--,h}*U1t(t,s,i,e){let h=!1;if(!t.R3())return this.z1t(s,i,e);this.A0t++;for(const r of t.zq()){const n=r.V7();if(n){this.Zc.L1t(r);for(const a of n.B1t()){const u=yield*a.U1t(s,i,e);h=h||u}const o=yield*n.U1t(s,i,e);h=h||o,this.Zc.O1t()}}return this.A0t--,h}z1t(t,s,i){return this.E0t.push([t,s,i]),!1}W1t(t,s,i){let e=null,h=new Promise(t=>e=t);return this._0t.push([t,s,i,e]),h}*Q1t(){if(this.Zc.J1t())throw new Error("should not be in breakpoint");const t=this.Zc.j3();for(;this._0t.length;){const[s,i,e,h]=this._0t.shift(),r=yield*this.U1t(t,s,i,e);h(r)}}async Y1t(){for(const t of this.Q1t())await this.Zc.k1t(t)}V1t(t,i,e,h){let r=!1,s=t.R3(),n=s.V7();if(n){this.A0t++,this.Zc.L1t(s);const o=n.B1t();for(let t=0,s=o.length;t<s;++t){const u=o[t].V1t(i,e,h);r=r||u}const a=n.V1t(i,e,h);return r=r||a,this.Zc.O1t(),this.A0t--,r}}*H1t(t,i,e,h){let r=!1,s=t.R3(),n=s.V7();if(n){this.A0t++,this.Zc.L1t(s);const o=n.B1t();for(let t=0,s=o.length;t<s;++t){const u=yield*o[t].H1t(i,e,h);r=r||u}const a=yield*n.H1t(i,e,h);return r=r||a,this.Zc.O1t(),this.A0t--,r}}q1t(){return this.A0t}Z1t(){return 0<this.q1t()}X1t(){return++this.A0t}K1t(){--this.A0t}$1t(){return 0<this.D0t}_P(){return this.$1t()||this.Z1t()}W9(t){for(const[s,i,e]of this.E0t)this.j1t(t,s,i,e);x.Dn(this.E0t)}NP(t){t?this.L0t++:this.L0t--}CF(){return 0<this.L0t}tdt(i){for(let t=0,s=i.length;t<s;++t)i[t].sdt().Jl()}idt(i){for(let t=0,s=i.length;t<s;++t)i[t].sdt().Bct()}N6(i){for(let t=0,s=i.length;t<s;++t)i[t].sdt().Uct()}_6(i){for(let t=0,s=i.length;t<s;++t)i[t].sdt().O6()}JO(s){const i=new Set,e=this.Qct.yft(),h=this.Qct.Mft();for(let t=0;t<=h;++t){const r=e[t].qft();if(r)for(const n of r)s&&s.has(n)||i.add(n)}return i}edt(t){const s=new Set([...t]),i=this.JO(s);if(0<i.size){for(const e of i)e.sdt().Bct();return[...i]}return null}hdt(){const t=x.ir(x.rdt,this);return this.O0t.push(t),t}ndt(){return this.O0t}odt(){if(this.O0t.length){let i=this.i1t(),e=!1;this.D0t++;for(let t=0,s=this.O0t.length;t<s;++t){const h=this.O0t[t];h.adt()&&h.udt(i),h.ldt()&&(e=!0)}e&&(this.cdt(),i.$f(null)),this.D0t--}}async fdt(){if(this.O0t.length){let i=this.i1t(),e=!1;this.D0t++;for(let t=0,s=this.O0t.length;t<s;++t){const h=this.O0t[t];h.adt()&&await h.ddt(i),h.ldt()&&(e=!0)}e&&(this.cdt(),i.$f(null)),this.D0t--}}cdt(){const t=x.jn(this.O0t,t=>t.ldt());for(const s of t)s.er()}sq(){for(const t of this.O0t)t.er();x.Dn(this.O0t)}pdt(t){for(const s of this.O0t)s.Wct(t);for(const i of t){const e=this.F0t.get(i);if(this.F0t.delete(i),e)for(const{resolve:h}of e.mdt.values())h(!0)}}gdt(t){this.R0t.push({promise:t,ydt:this.q1t()})}Mdt(){x.Dn(this.R0t)}wdt(){const s=this.q1t();this.R0t=this.R0t.filter(t=>t.ydt<=s)}Sdt(){const t=Promise.all(this.R0t.map(t=>t.promise));return this.R0t=[],t}t3(t){const s=t.toLowerCase();this.P0t.push(s),this.Zc.ij(x.U9.B9.z9.Tdt,null),this.P0t.pop();for(const e of this.Zc.FO().ndt())e.bdt()&&e.xdt()===s&&e.vdt();const i=this.k0t.get(s);i&&(i.resolve(),this.k0t.delete(s))}i3(t){const i=t.toLowerCase(),s=this.k0t.get(i);if(s)return s.promise;{let s=null,t=new Promise(t=>s=t);return this.k0t.set(i,{promise:t,resolve:s}),t}}Cdt(){if(0===this.P0t.length)throw new Error("not in a signal");return this.P0t.at(-1)}Gdt(t){let s=this.F0t.get(t);return s||(s={Idt:[],mdt:new Map},this.F0t.set(t,s)),s}UF(t,s){const i=this.Gdt(t),e=s.toLowerCase();i.Idt.push(e),this.Zc.ij(t.lP().Edt().z9.Ndt,t),i.Idt.pop();for(const r of this.Zc.FO().ndt())r._dt()&&r.xdt()===e&&r.Ddt(t);const h=i.mdt.get(e);h&&(h.resolve(!1),i.mdt.delete(e)),0===i.Idt.length&&0===i.mdt.size&&this.F0t.delete(t)}WF(t,s){const i=this.Gdt(t),e=s.toLowerCase(),h=i.mdt.get(e);if(h)return h.promise;{let s=null,t=new Promise(t=>s=t);return i.mdt.set(e,{promise:t,resolve:s}),t}}Adt(t){const s=this.Gdt(t);if(s&&0!==s.Idt.length)return s.Idt.at(-1);throw new Error("not in a signal")}KH(){return{groups:this.Ldt(),cnds:this.Odt(),acts:this.Rdt(),vars:this.Pdt(),waits:this.kdt()}}$H(t){this.Fdt(t.groups),this.jdt(t.cnds),this.zdt(t.acts),this.Bdt(t.vars),this.Udt(t.waits)}Ldt(){const t={};for(const s of this.I1t())t[s.PY().toString()]=s.Wdt();return t}Fdt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.C1t(e);h&&h.Qdt(i)}}Odt(){const t={};for(const[s,i]of this.y0t){const e=i.KH();e&&(t[s.toString()]=e)}return t}jdt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,r]of this.y0t)r.$H(s.get(h)||null)}Rdt(){const t={};for(const[s,i]of this.M0t){const e=i.KH();e&&(t[s.toString()]=e)}return t}zdt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,r]of this.M0t)r.$H(s.get(h)||null)}Pdt(){const t={};for(const[s,i]of this.S0t)i.Jdt()||!i.pY()&&!i.z2()||(t[s.toString()]=i.iet());return t}Bdt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.p1t(e);h&&h.zet(i)}}kdt(){return this.O0t.filter(t=>!t.Ydt()).map(t=>t.KH())}Udt(t){this.sq();for(const s of t){const i=x.rdt.Vdt(this,s);i&&this.O0t.push(i)}}Hdt(){return[...this.Zc.j3().zq()].map(t=>t.V7()).filter(t=>t).map(t=>t.qdt())}Zdt(t){for(;t;){const s=t.u1t();if(s instanceof x.Xdt)return s;t=s}return null}j0t(t,s){Array.isArray(s)||(s=[]);const i=this.jO(t.toLowerCase());if(!i)return null;if(!i.Ul())return i.zO();const e=i.Kdt();if(s.length<e.length)for(s=s.slice(0);s.push(e[s.length].s1t()),s.length<e.length;);const h=i.UO();return h.YO(h.WO(),!1,i.HO(),i.zO(),...s)}}}{const uo=self.Os;uo.z0t=class extends uo.Kh{constructor(t,s){super(),this.pft=t,this.Zc=t.I4(),this.nr=s[0],this.$dt=[],this.tpt=new Map,this.spt=new Map,this.ipt=new Map,this.ept=!1,this.hpt=[],this.rpt=[],this.npt=new Set;for(const i of s[1])this.opt(i,null,this.$dt);this.apt=this.Zc.Tq()?{type:"sheet",name:this.nr,upt:0,children:[]}:null}er(){this.pft=null,this.Zc=null}opt(t,s,i){switch(t[0]){case 0:case 3:this.lpt(t,s,i);break;case 1:this.cpt(t,s,i);break;case 2:this.fpt(t,s,i);break;case 4:this.dpt(t,s);break;case 5:this.ppt(t,s,i);break;case 6:this.mpt(t,s);break;default:throw new Error("invalid event type")}}lpt(t,s,i){const e=uo.gpt.jb(this,s,t);if(e.fft()){i.push(e);const h=e.ypt();for(let t=0,s=h.length;t<s;++t)h[t].Mpt()&&this.wpt(e,t)}else e.Mpt()?this.wpt(e,0):i.push(e)}dpt(t,s){const i=uo.Xdt.Spt(this,s,t);this.pft.q0t(i)}mpt(t,s){const i=uo.Xdt.Tpt(this,s,t);this.pft.q0t(i)}cpt(t,s,i){const e=uo.bpt.jb(this,s,t);i.push(e)}fpt(t,s,i){const e=uo.xpt.jb(this,s,t);i.push(e)}ppt(t,s,i){const e=uo.vpt.jb(this,s,t);i.push(e)}wpt(h,r){h.fft()||this.pft.B0t(h);const n=h.h1t(r),o=n.Cpt(),a=n.yF();if(n.Gpt()){let t=this.spt.get(a),s=(t||(t=new Map,this.spt.set(a,t)),n.Ipt().toLowerCase()),i=t.get(o),e=(i||(i=new Map,t.set(o,i)),i.get(s));e||(e=[],i.set(s,e)),e.push([h,r])}else{let t=this.tpt.get(a),s=(t||(t={Npt:new Map,Ept:new Map},this.tpt.set(a,t)),n.cz()),i,e=(s?(i=t.Ept.get(s))||(i=new Map,t.Ept.set(s,i)):i=t.Npt,i.get(o));e||(e=[],i.set(o,e)),e.push([h,r])}}U0t(){const i=this.$dt;for(let t=0,s=i.length;t<s;++t){const e=t<s-1&&i[t+1]instanceof uo.gpt&&i[t+1]._pt();i[t].U0t(e)}}Dpt(t){this.hpt.push(t)}T9(){uo.Dn(this.rpt),this.Apt(this),this.npt.clear()}Apt(t){const s=t.rpt,i=t.npt;for(const e of this.hpt){const h=e.Lpt();e.Opt()&&t!==h&&!i.has(h)&&(i.add(h),h.Apt(t),s.push(h))}}B1t(){return this.rpt}FO(){return this.pft}I4(){return this.Zc}Uc(){return this.nr}Rpt(t,s){this.ipt.set(s,t)}Ppt(t){return this.ipt.get(t)||null}D1t(){this.ept=!1}pG(){if(!this.ept){const t=this.Zc,s=t.kpt(),i=s?performance.now():0,e=(this.ept=!0,this.FO()),h=e.i1t();for(const r of this.$dt)r.pG(h),e.tdt(r.T6()),e.Mdt(),t.AP();h.$f(null),s&&(this.apt.upt+=performance.now()-i)}}*F1t(){if(!this.ept){this.ept=!0;const t=this.Zc,s=this.FO(),i=s.i1t();for(const e of this.$dt)yield*e.F1t(i),s.tdt(e.T6()),s.Mdt(),t.AP();i.$f(null)}}j1t(e,h,r){if(!h)return this.Fpt(e,h,null,null);{let t=h.yF(),s=!1,i=this.Fpt(e,h,t,r);s=s||i;for(const n of t.w1t())i=this.Fpt(e,h,n,r),s=s||i}}Fpt(t,s,i,e){const h=this.tpt.get(i);if(!h)return!1;const r=e?h.Ept.get(e):h.Npt;if(!r)return!1;const n=r.get(t);if(!n)return!1;let o=!1;for(const[a,u]of n){const l=this.jpt(s,a,u);o=o||l}return o}*U1t(e,h,r){if(!h)return yield*this.zpt(e,h,null,null);{let t=h.yF(),s=!1,i=yield*this.zpt(e,h,t,r);s=s||i;for(const n of t.w1t())i=yield*this.zpt(e,h,n,r),s=s||i}}*zpt(t,s,i,e){const h=this.tpt.get(i);if(!h)return!1;const r=e?h.Ept.get(e):h.Npt;if(!r)return!1;const n=r.get(t);if(!n)return!1;let o=!1;for(const[a,u]of n){let t;t=a.Bpt()?this.jpt(s,a,u):yield*this.Upt(s,a,u),o=o||t}return o}V1t(t,s,i){const e=s.yF(),h=this.spt.get(e);if(!h)return!1;const r=h.get(t);if(!r)return!1;const n=r.get(i);if(!n)return!1;let o=!1;for(let t=0,s=n.length;t<s;++t){const a=n[t],u=this.jpt(null,a[0],a[1]);o=o||u}return o}*H1t(t,s,i){const e=s.yF(),h=this.spt.get(e);if(!h)return!1;const r=h.get(t);if(!r)return!1;const n=r.get(i);if(!n)return!1;let o=!1;for(let h=0,t=n.length;h<t;++h){let t=n[h],s=t[0],i=t[1],e;e=s.Bpt()?this.jpt(null,s,i):yield*this.Upt(null,s,i),o=o||e}return o}jpt(t,s,i){let e=this.Zc,h=this.pft,r=h.QO(),n=h.XO(),o=h.q1t(),a=!1;r&&h.idt(r.WO()),h.idt(s.WO());const u=1<o,l=(u&&h.o1t().x6(),n.x6(s));if(t){const f=s.ypt()[i].yF(),d=f.bP();d.rft(t),t.EF()&&t.Wpt()}let c=!0;if(s.r5()){const p=s.Qpt();for(let t=0,s=p.length;t<s;++t)if(!p[t].Jpt(l)){c=!1;break}}return c&&(s.fft()?s.Ypt(l,i):s.pG(l),a=l.Fft()),n.O6(),u&&h.o1t().O6(),h._6(s.WO()),r&&h._6(r.WO()),r||1!==o||(h.Mdt(),h.CF())||e.AP(),a}*Upt(t,s,i){let e=this.Zc,h=this.pft,r=h.QO(),n=h.XO(),o=h.q1t(),a=!1;r&&h.idt(r.WO()),h.idt(s.WO());const u=1<o,l=(u&&h.o1t().x6(),n.x6(s));if(t){const f=s.ypt()[i].yF(),d=f.bP();d.rft(t),t.EF()&&t.Wpt()}let c=!0;if(s.r5()){const p=s.Qpt();for(let t=0,s=p.length;t<s;++t)if(!(yield*p[t].Vpt(l))){c=!1;break}}return c&&(s.fft()?yield*s.Hpt(l,i):yield*s.F1t(l),a=l.Fft()),n.O6(),u&&h.o1t().O6(),h._6(s.WO()),r&&h._6(r.WO()),r||1!==o||(h.Mdt(),h.CF())||e.AP(),a}qdt(){return this.apt}}}{let l=function(t,s){return!0};l;const lo=self.Os,co=[];function*j(t,s){return!0}lo.gpt=class extends lo.Kh{constructor(t,s,i){super(),this.f7=t,this.Zc=t.I4(),this.qpt=s,this.Zpt=null,this.Qct=this.Zc.FO().XO(),this.Xpt=[],this.Kpt=[],this.$pt=!1,this.tmt=!1,this.smt=!1,this.imt=!1,this.emt=!!i[2],this.hmt=!1,this.rmt=null,this.nmt=[],this.Sht=[],this.omt=[],this.amt=l,this.umt=j,this.lmt=!1,this.cmt=!1,this.fmt="",this.dmt=!1,this.pmt=null,this.apt=null,this.eJ=i[4],this.mmt=i[5],this.f7.Rpt(this,this.mmt),this.gmt=this.Zc.Tq()?{ymt:i[3][0],Mmt:i[3][1],wmt:!1,Smt:!1,Tmt:!1,bmt:!1}:null,this.FO().Y0t(this),3===i[0]&&this.xmt(i[1]);let e=0;for(const h of i[6]){const r=lo.vmt.jb(this,h,e++);this.nmt.push(r),this.Cmt(r.yF())}e=0;for(const n of i[7]){const o=lo.Gmt.jb(this,n,e++);this.Sht.push(o)}if(9===i.length){const a=i[8];for(const u of a)this.f7.opt(u,this,this.omt)}this.nmt.length&&(this.hmt=null===this.nmt[0].yF()&&this.nmt[0].Cpt()===lo.U9.B9.z9.Imt),0===this.nmt.length&&(this.nmt=co),0===this.Sht.length&&(this.Sht=co),0===this.omt.length&&(this.omt=co)}static jb(t,s,i){return lo.ir(lo.gpt,t,s,i)}xmt(t){this.lmt=!0,this.cmt=!!t[0],this.dmt=this.cmt,this.fmt=t[1].toLowerCase(),this.pmt=[],this.FO().Q0t(this),this.Zc.Tq()&&(this.apt={type:"group",name:t[1],upt:0,children:[]})}Nmt(t){this.pmt.push(t)}Emt(t,s){for(const i of t.o9().Y9())s.includes(i)||s.push(i)}_mt(t,s){if(t)if(s.includes(t)||s.push(t),t.NY())for(const i of t.Dmt())i.EF()&&this.Emt(i,s);else t.EF()&&this.Emt(t,s)}Cmt(t){this._mt(t,this.Xpt)}Amt(t){this._mt(t,this.Kpt)}Lmt(){this.Xpt=this.Zc.IY()}U0t(t){this.imt=!!t,this.Omt(),this.Rmt();for(const s of this.nmt)s.U0t();if(0<this.Sht.length){let t=!1;for(const e of this.Sht)e.U0t(),e.Pmt()&&(t=!0);t?(this.amt=this.kmt,this.umt=this.Fmt):(this.amt=this.jmt,this.umt=this.zmt)}const i=this.omt;for(let t=0,s=i.length;t<s;++t){const h=t<s-1&&i[t+1]instanceof lo.gpt&&i[t+1]._pt();i[t].U0t(h)}this.gmt&&this.Bmt(),this.apt&&this.Umt().qdt().children.push(this.apt)}qdt(){return this.apt}Umt(){let t=this.r5();for(;t;){if(t.G1t())return t;t=t.r5()}return this.f7}Bmt(){const t=this.gmt;t.wmt=this.nmt.every(t=>t.Bpt()),t.Smt=this.Sht.every(t=>t.Bpt()),t.Tmt=this.omt.every(t=>t.Bpt()),t.bmt=t.wmt&&t.Smt&&t.Tmt}Wmt(){let t=this;for(;t.Bmt(),t=t.r5(););}Omt(){if(this.G1t()){let t=this.r5();for(this.smt=!0;t;){if(!t.G1t()){this.smt=!1;break}t=t.r5()}}}Qmt(){const t=this.Zc.IY();if(this.Xpt===t)this.Kpt=t;else{this.Kpt=lo.Wn(this.Xpt);let t=this.r5();for(;t;){for(const i of t.Xpt)this.Amt(i);t=t.r5()}const s=this.FO();this.Xpt=s.$0t(this.Xpt),this.Kpt=s.$0t(this.Kpt)}}Rmt(){if(this.Jmt()){this.rmt=[];let t=this.r5();for(;t;)this.rmt.push(t),t=t.r5();this.rmt.reverse()}}Ymt(){this.tmt=!0,this.qpt&&this.qpt.Ymt()}Yft(){return this.tmt}T6(){return this.Xpt}WO(){return this.$pt||(this.$pt=!0,this.Qmt()),this.Kpt}Vmt(t){return this.Xpt.includes(t)}Qpt(){return this.rmt}V7(){return this.f7}FO(){return this.f7.FO()}I4(){return this.Zc}r5(){return this.qpt}Hmt(t){this.Zpt=t}u1t(){return this.Zpt||this.qpt}qmt(){return this.mmt}Zmt(){return this.gmt&&this.gmt.Mmt}Xmt(){return this.Zmt()&&this.gmt.ymt}Kmt(t){this.gmt.ymt=!!t,this.Wmt()}G1t(){return this.lmt}$mt(){return this.smt}_pt(){return this.hmt}tgt(){return this.imt}J0t(){return this.fmt}Wdt(){return this.dmt}E1t(){this.Qdt(this.cmt)}Qdt(t){if(t=!!t,!this.lmt)throw new Error("not a group");if(this.dmt!==t){this.dmt=t;for(const s of this.pmt)s.sgt();if(this.pmt.length){const i=this.Zc.e4(),e=i.V7();e&&e.T9()}}}PY(){return this.eJ}fft(){return this.emt}Mpt(){return this.nmt.length&&this.nmt[0].Mpt()}igt(){return this.Zpt&&this.Zpt instanceof lo.Xdt}Jmt(){return this.igt()||this.nmt.some(t=>t.Mpt())}ypt(){return this.nmt}Vft(){return this.nmt.length}h1t(t){if((t=Math.floor(t))<0||t>=this.nmt.length)throw new RangeError("invalid condition index");return this.nmt[t]}egt(t){return this.h1t(t)}hgt(t){let s=t.oO();if(0!==s){--s;const i=t.rgt()?t.ngt():t.yF();for(;0<=s;--s){const e=this.nmt[s];if(i===e.yF()||e.rgt()&&e.ngt()===i)return!1}}return!0}ogt(){return this.Sht}agt(){return this.Sht.length}n1t(t){if((t=Math.floor(t))<0||t>=this.Sht.length)throw new RangeError("invalid action index");return this.Sht[t]}ugt(s){s=Math.floor(s);const t=this.Sht.find(t=>t.lgt()===s);if(t)return t;throw new RangeError("invalid action debug index")}cgt(t){return 0<=(t=Math.floor(t))&&t<this.Sht.length}fgt(){return this.omt}l1t(){return this.omt.filter(t=>t instanceof lo.bpt)}Jpt(i){i.Aft(this);let e=this.nmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.Oft(t),r.Cz())throw new Error("trigger cannot be used as sub-event to a loop");if(r.pG())h=!0;else if(!this.emt)return!1}return!this.emt||h}Ypt(t,s){t.Aft(this),t.Oft(s),this.nmt[s].pG()&&(this.amt(t,0)&&this.dgt(t),t.kft(!0))}*Vpt(i){i.Aft(this);let e=this.nmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.Oft(t),r.Cz())throw new Error("trigger cannot be used as sub-event to a loop");if(r.Bpt()?r.pG():yield*r.F1t())h=!0;else if(!this.emt)return!1}return!this.emt||h}*Hpt(t,s){t.Aft(this),t.Oft(s);let i=this.nmt[s];if(i.Bpt()?i.pG():yield*i.F1t())(this.pgt()?this.amt(t,0):yield*this.umt(t,0))&&(this.mgt()?this.dgt():yield*this.ggt()),t.kft(!0)}pG(t){t.Aft(this),this.hmt||t.jft(!1),this.emt?this.ygt(t):this.Mgt(t)}*F1t(t){(this.Xmt()||this.Zc.wgt())&&(yield this),t.Aft(this),this.hmt||t.jft(!1),this.emt?yield*this.Sgt(t):yield*this.Tgt(t)}ygt(i){let e=this.nmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(!r.Mpt()){i.Oft(t);const n=r.pG();h=h||n}}i.kft(h),h&&(this.amt(i,0)&&this.dgt(i),this.imt)&&i.jft(!0)}*Sgt(i){let e=this.nmt,h=0===e.length;for(let s=0,t=e.length;s<t;++s){const r=e[s];if(!r.Mpt()){i.Oft(s);let t;t=r.Bpt()?r.pG():yield*r.F1t(),h=h||t}}if(i.kft(h),h)(this.pgt()?this.amt(i,0):yield*this.umt(i,0))&&(this.mgt()?this.dgt():yield*this.ggt()),this.imt&&i.jft(!0)}Mgt(i){const e=this.nmt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=(i.Oft(t),h.pG());if(!r)return void i.kft(!1)}i.kft(!0),this.amt(i,0)&&this.dgt(i),i.Fft()&&this.imt&&i.jft(!0)}*Tgt(i){const e=this.nmt;for(let t=0,s=e.length;t<s;++t){const h=e[t];i.Oft(t);if(!(h.Bpt()?h.pG():yield*h.F1t()))return void i.kft(!1)}i.kft(!0);(this.pgt()?this.amt(i,0):yield*this.umt(i,0))&&(this.mgt()?this.dgt():yield*this.ggt()),i.Fft()&&this.imt&&i.jft(!0)}jmt(i,e){const h=this.Sht;for(let t=e,s=h.length;t<s;++t){const r=h[t];i.Pft(t),r.pG()}return!0}*zmt(i,e){const h=this.Sht;for(let t=e,s=h.length;t<s;++t){const r=h[t];i.Pft(t),r.Bpt()?r.pG():yield*r.F1t()}return!0}kmt(i,e){const h=this.FO(),r=this.Sht;for(let t=e,s=r.length;t<s;++t){const n=r[t],o=(i.Pft(t),n.pG());if(n.bgt()&&!0===o)return!1;n.xgt()&&o instanceof Promise&&h.gdt(o)}return!0}*Fmt(i,e){const h=this.FO(),r=this.Sht;for(let s=e,t=r.length;s<t;++s){const n=r[s];i.Pft(s);let t;if(t=n.Bpt()?n.pG():yield*n.F1t(),n.bgt()&&!0===t)return!1;n.xgt()&&t instanceof Promise&&h.gdt(t)}return!0}vgt(t){this.amt(t,t.Rft())&&this.dgt()}*Cgt(t){(yield*this.umt(t,t.Rft()))&&(yield*this.ggt())}dgt(){if(this.omt.length){const t=this.G1t()&&this.Zc.kpt(),s=t?performance.now():0,i=this.Qct,e=i.x6(this);this.tmt?this.Ggt(e):this.Igt(e),i.O6(),t&&(this.apt.upt+=performance.now()-s)}}Ggt(e){const h=this.lmt,r=this.smt,n=this.FO(),o=this.omt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],u=a.T6(),l=!r||!h&&t<i;l&&n.N6(u),a.pG(e),l?n._6(u):n.tdt(u)}}Igt(i){const e=this.omt;for(let t=0,s=e.length;t<s;++t)e[t].pG(i)}*ggt(){if(this.omt.length){const t=this.Qct,s=t.x6(this);this.tmt?yield*this.Ngt(s):yield*this.Egt(s),t.O6()}}*Ngt(e){const h=this.lmt,r=this.smt,n=this.FO(),o=this.omt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],u=a.T6(),l=!r||!h&&t<i;l&&n.N6(u),yield*a.F1t(e),l?n._6(u):n.tdt(u)}}*Egt(i){const e=this.omt;for(let t=0,s=e.length;t<s;++t)yield*e[t].F1t(i)}E6(i,e){e.Dft();const h=this.nmt;if(!this.fft())for(let t=i.Lft()+1,s=h.length;t<s;++t){const r=h[t],n=(e.Oft(t),r.pG());if(!n)return!1}return this.amt(e,0)&&this.dgt(e),!0}*_gt(i,e){e.Dft();const h=this.nmt;if(!this.fft())for(let t=i.Lft()+1,s=h.length;t<s;++t){const r=h[t];e.Oft(t);if(!(r.Bpt()?r.pG():yield*r.F1t()))return!1}return(this.pgt()?this.amt(e,0):yield*this.umt(e,0))&&(this.mgt()?this.dgt():yield*this.ggt()),!0}Bpt(){return!this.Xmt()&&!this.Zc.wgt()&&this.gmt.bmt}pgt(){return!this.Zc.wgt()&&this.gmt.Smt}mgt(){return!this.Zc.wgt()&&this.gmt.Tmt}Dgt(i){if(this.r5()){const e=this.Qpt();for(let t=0,s=e.length;t<s;++t)if(!e[t].Jpt(i))return!1}return!0}*Agt(i){if(this.r5()){const e=this.Qpt();for(let t=0,s=e.length;t<s;++t)if(!(yield*e[t].Vpt(i)))return!1}return!0}Lgt(t,s,i){if(0<s.length)if(i){const e=s.map(t=>t.Ks(0));t.o1t().x6(),this.Zpt.Ogt(e)}else this.Zpt.Rgt(s);else i&&t.o1t().x6()}Pgt(t,s,i,e){let h,r,n=0<t.length,o=null,a=this.Zc,u=this.Qct,l=a.FO(),c=this.Zpt,f=c.xgt(),d=l.X1t(),p=1<d;if(this.Lgt(l,s,p),n&&(i?l.N6(t):l.idt(t)),null!==e){if(e.kgt){const g=i?e.kgt.bP():e.kgt.sdt().zct(),y=e.Fgt.bP();y.nft(g.TP()),y.lft(),i||e.Fgt.jgt()}else if(e.zgt){const M=e.zgt.bP();M.nft(e.Bgt),M.lft()}e.Ugt&&(o=l.edt(t))}const m=u.x6(this);return i&&m.Hft(t),this.Dgt(m)&&(m.Aft(this),f&&([r,h]=c.Wgt()),this.Mgt(m),f)&&c.Qgt(r),u.O6(),p&&l.o1t().O6(),null!==o&&l._6(o),n&&l._6(t),l.K1t(),f||l.wdt(),h}*Jgt(t,s,i,e){let h,r,n=((this.Xmt()||this.Zc.wgt())&&(yield this),0<t.length),o=null,a=this.Zc,u=this.Qct,l=a.FO(),c=this.Zpt,f=c.xgt(),d=l.X1t(),p=1<d;if(this.Lgt(l,s,p),n&&(i?l.N6(t):l.idt(t)),null!==e){if(e.kgt){const g=i?e.kgt.bP():e.kgt.sdt().zct(),y=e.Fgt.bP();y.nft(g.TP()),y.lft(),i||e.Fgt.jgt()}else if(e.zgt){const M=e.zgt.bP();M.nft(e.Bgt),M.lft()}e.Ugt&&(o=l.edt(t))}const m=u.x6(this);return i&&m.Hft(t),(yield*this.Agt(m))&&(m.Aft(this),f&&([r,h]=c.Wgt()),yield*this.Tgt(m),f)&&c.Qgt(r),u.O6(),p&&l.o1t().O6(),null!==o&&l._6(o),n&&l._6(t),l.K1t(),f||l.wdt(),h}Ygt(t,s){const i=this.WO(),e=0<i.length,h=this.Zc,r=this.Qct,n=h.FO(),o=n.X1t(),a=1<o,u=(a&&n.o1t().x6(),this.Zpt.Ogt(t),e&&(s?n.N6(i):n.idt(i)),r.x6(this));this.Dgt(u)&&(u.Aft(this),this.Mgt(u)),r.O6(),a&&n.o1t().O6(),e&&n._6(i),n.K1t(),n.wdt()}*Vgt(t,s){(this.Xmt()||this.Zc.wgt())&&(yield this);const i=this.WO(),e=0<i.length,h=this.Zc,r=this.Qct,n=h.FO(),o=n.X1t(),a=1<o,u=(a&&n.o1t().x6(),this.Zpt.Ogt(t),e&&(s?n.N6(i):n.idt(i)),r.x6(this));(yield*this.Agt(u))&&(u.Aft(this),yield*this.Tgt(u)),r.O6(),a&&n.o1t().O6(),e&&n._6(i),n.K1t(),n.wdt()}YO(t,s,i,e,...h){let r,n,o=0<t.length,a=this.Zc,u=this.Qct,l=a.FO(),c=this.Zpt,f=c.xgt(),d=l.X1t(),p=1<d,m=(p&&l.o1t().x6(),0<h.length&&this.Zpt.Ogt(h),o&&(s?l.N6(t):l.idt(t)),u.x6(this));return m.Wft(i,e),u.wft(m),a.G6(!1),this.Dgt(m)&&(m.Aft(this),f&&([n,r]=c.Wgt()),this.Mgt(m),f)&&c.Qgt(n),a.G6(!0),u.O6(),u.Sft(),p&&l.o1t().O6(),o&&l._6(t),l.K1t(),f||l.wdt(),r||m.Qft()}}}{let e=self.Os,t=[],s=!1;e.vpt=class extends e.Kh{constructor(t,s,i){super();const e=t.I4(),h=t.FO(),r=(this.f7=t,this.pft=h,this.Zc=t.I4(),this.qpt=s,e.Hgt(i[1]));this.qgt=r,this.mmt=i[2],this.f7.Rpt(this,this.mmt),this.gmt=e.Tq()?{ymt:i[3][0],Mmt:i[3][1]}:null}static jb(t,s,i){return e.ir(e.vpt,t,s,i)}U0t(){const t=this.qgt,s=this.Zc.FO().c1t(this);this.qgt=t.bind(null,this.Zc.PR(),s)}r5(){return this.qpt}u1t(){return this.qpt}V7(){return this.f7}qmt(){return this.mmt}Zmt(){return this.gmt&&this.gmt.Mmt}Xmt(){return this.Zmt()&&this.gmt.ymt}Kmt(t){this.gmt.ymt=!!t}_pt(){return!1}T6(){return t}WO(){return this.qpt?this.qpt.WO():t}pG(t){t.Aft(this),this.pft.gdt(this.Zgt())}async Zgt(){try{await this.qgt()}catch(t){console.error(`Unhandled exception running script %c${this.V7().Uc()}, event ${this.qmt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),s||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),s=!0)}}*F1t(t){t.Aft(this),(this.Xmt()||this.Zc.wgt())&&(yield this),this.pG(t)}Bpt(){return!this.Xmt()&&!this.Zc.wgt()}static Xgt(){return s}static Kgt(){s=!0}}}{const fo=self.Os;fo.Xdt=class extends fo.Kh{constructor(t,s,i){super(),this.f7=t,this.Zc=t.I4(),this.qpt=s,this.$gt=0,this.tyt="",this.syt=0,this.iyt=[],this.eyt=!0,this.hyt="",this.Pct=null,this.ryt=!1,this.nyt=[],this.oyt=!1,this.ayt=!1,this.uyt=0,this.lyt=-1,this.cyt=new Map,this.fyt=fo.gpt.jb(t,s,i),this.fyt.Hmt(this)}dyt(t){this.$gt=0,this.tyt=t[0],this.syt=t[1],this.iyt=t[2].map(t=>fo.bpt.jb(this.f7,this,t)),this.eyt=t[3],this.ayt=t[4],this.oyt=t[5]}pyt(t){this.$gt=1,this.hyt=t[1],this.Pct=this.Zc.eY(t[2]),this.fyt.Cmt(this.Pct),this.tyt=this.Pct.Uc()+"."+this.hyt,this.syt=t[3],this.iyt=t[4].map(t=>fo.bpt.jb(this.f7,this,t)),this.eyt=t[5],this.ayt=t[6],this.oyt=t[7],this.Pct.myt(this)}static Spt(t,s,i){const e=fo.ir(fo.Xdt,t,s,i),h=i[1];return e.dyt(h),e}static Tpt(t,s,i){const e=fo.ir(fo.Xdt,t,s,i),h=i[1];return e.pyt(h),e}W0t(){if(this.Pct&&this.Pct.NY())for(const t of this.Pct.Dmt())if(t.gyt(this.hyt)){this.ryt=!0;break}}U0t(){for(const t of this.iyt)t.U0t();this.fyt.U0t(!1)}Z0t(){return this.$gt}l1t(){return this.iyt}Kdt(){return this.iyt}BO(){return this.iyt.length}yyt(t){this.nyt.push(t)}Myt(){return this.nyt}Rgt(i){const e=this.iyt;for(let t=0,s=e.length;t<s;++t)e[t].zet(i[t].Ks(0))}Ogt(i){const e=this.iyt;for(let t=0,s=e.length;t<s;++t)e[t].zet(i[t])}wyt(){return this.iyt.map(t=>t.iet())}r5(){return this.qpt}u1t(){return this.qpt}X0t(){return this.tyt}Syt(){return this.hyt}Tyt(){return this.ryt}HO(){return this.syt}yF(){return this.Pct}Ul(){return this.eyt}zO(){switch(this.syt){case 0:return null;case 2:return"";default:return 0}}UO(){return this.fyt}VO(){return this.oyt}xgt(){return this.ayt}Wgt(){const t=this.uyt++;this.lyt=t;let s,i=new Promise(t=>s=t);return this.cyt.set(t,{resolve:s,byt:0}),[t,i]}Qgt(t){const s=this.cyt.get(t);0===s.byt&&(s.resolve(),this.cyt.delete(t)),this.lyt=-1}xyt(){const t=this.cyt.get(this.lyt);return t.byt++,this.lyt}vyt(t){this.lyt=t;const s=this.cyt.get(t);s.byt--}Cyt(t,s){const i=new Map,e=[];for(const h of this.Pct.bP().TP()){const r=h.yF();if(r.gyt(this.hyt)){const n=i.get(r);Array.isArray(n)?n.push(h):i.set(r,[h])}else e.push(h)}if(0<e.length&&this.fyt.Pgt(t,s,this.oyt,{zgt:this.Pct,Bgt:e}),0<i.size)for(const[o,a]of i){const u=o.Gyt(this.hyt).UO(),l=[...new Set([...t,...u.T6()])];u.Pgt(l,s,this.oyt,{zgt:o,Bgt:a})}}*Iyt(t,s){const i=new Map,e=[];for(const h of this.Pct.bP().TP()){const r=h.yF();if(r.gyt(this.hyt)){const n=i.get(r);Array.isArray(n)?n.push(h):i.set(r,[h])}else e.push(h)}if(0<e.length&&(yield*this.fyt.Jgt(t,s,this.oyt,{zgt:this.Pct,Bgt:e})),0<i.size)for(const[o,a]of i){const u=o.Gyt(this.hyt).UO(),l=[...new Set([...t,...u.T6()])];yield*u.Jgt(l,s,this.oyt,{zgt:o,Bgt:a})}}}}{const po=self.Os,mo=[];po.bpt=class extends po.Kh{constructor(t,s,i){super();const e=t.FO();this.f7=t,this.pft=e,this.Zc=t.I4(),this.qpt=s,this.I0t=e.o1t(),this.nr=i[1],this.rf=i[2],this.Nyt=i[3],this.a2=!!i[4],this.Eyt=!!i[5],this._yt=s instanceof po.Xdt,this.eJ=i[6],this.Dyt=this.Zc.f1t(i[8]),this.Ayt=t=>this.zet(t),this.Lyt=()=>this.iet(),this.Oyt=!this.qpt||this.a2||this.Eyt,this.ght=this.Nyt,this.Ryt=-1,this.Pyt()&&(this.ght=this.ght?1:0),!this.kyt()||this.z2()||this.Jdt()||(this.Ryt=e.t1t(this)),e.K0t(this)}static jb(t,s,i){return po.ir(po.bpt,t,s,i)}U0t(){if(this.kyt()&&!this.z2()&&!this.Jdt()&&!this.Fyt()){const t=this.pft.Zdt(this);t&&t.yyt(this)}}Uc(){return this.nr}f1t(){return this.Dyt}r5(){return this.qpt}u1t(){return this.r5()}pY(){return!this.r5()}kyt(){return!this.pY()}Fyt(){return this._yt}z2(){return this.a2}Jdt(){return this.Eyt}ae(){return 0===this.rf}we(){return 1===this.rf}Pyt(){return 2===this.rf}_pt(){return!1}PY(){return this.eJ}s1t(){return this.Nyt}T6(){return mo}pG(t){!this.kyt()||this.z2()||this.Jdt()||this.zet(this.s1t())}Bpt(){return!0}*F1t(t){this.pG(t)}zet(t){this.ae()?"number"!=typeof t&&(t=parseFloat(t)):this.we()?"string"!=typeof t&&(t=t.toString()):this.Pyt()&&(t=t?1:0),this.Oyt?this.ght=t:this.I0t.$ft()[this.Ryt]=t}iet(){return this.Oyt?this.ght:this.I0t.$ft()[this.Ryt]}jyt(){let t=this.iet();return this.Pyt()?!!t:t}x1t(){this.ght=this.Nyt}d1t(){return{configurable:!1,enumerable:!0,get:this.Lyt,set:this.Ayt}}}}{const go=self.Os,yo=[];go.xpt=class extends go.Kh{constructor(t,s,i){super();const e=t.FO();this.f7=t,this.pft=e,this.Zc=t.I4(),this.qpt=s,this.zyt=null,this.Byt=i[1],this.Kf=!0}static jb(t,s,i){return go.ir(go.xpt,t,s,i)}U0t(){this.zyt=this.pft.S9(this.Byt),this.f7.Dpt(this);let t=this.r5();for(;t;)t instanceof go.gpt&&t.G1t()&&t.Nmt(this),t=t.r5();this.sgt(),this.Zc.Tq()&&this.f7.qdt().children.push(this.zyt.qdt())}r5(){return this.qpt}T6(){return yo}Lpt(){return this.zyt}pG(t){const s=!!this.r5(),i=this.Zc.IY();s&&this.pft.idt(i),this.zyt.pG(),s&&this.pft._6(i)}*F1t(t){const s=!!this.r5(),i=this.Zc.IY();s&&this.pft.idt(i),yield*this.zyt.F1t(),s&&this.pft._6(i)}Bpt(){return!1}Opt(){return this.Kf}sgt(){let t=this.r5();for(;t;){if(t instanceof go.gpt&&t.G1t()&&!t.Wdt())return void(this.Kf=!1);t=t.r5()}this.Kf=!0}}}{let a=function(t,s){return s<=t?t%s:(t<0&&(t<=-s&&(t%=s),t<0)&&(t+=s),t)};a;const Mo=self.Os;Mo.Uyt=class extends Mo.Kh{constructor(t){super(),this.TT=t,this.Zc=t.I4()}U0t(){}static Wyt(t,s){const i=s[0],e=[xo,To,bo,vo,wo,So];return Mo.ir(e[i],t,s)}};class wo extends Mo.Uyt{constructor(t,s){super(t),this.Qyt=this.Zc.Jyt(),this.qgt=this.Zc.Hgt(s[1]),this.qgt!==Mo.U9.B9.Lht.random&&this.qgt!==Mo.U9.B9.Lht.Yyt||this.TT.Vyt()}Hyt(){return this.Qyt.qyt(this.qgt,this.Qyt)}}class So extends Mo.Uyt{constructor(t,s){super(t),this.Zyt=null,this.tyt=s[1],this.TT.Vyt()}U0t(){const t=this.Zc.FO(),s=(this.Zyt=t.jO(this.tyt),this.tyt=null,this.TT.UO()),i=this.Zyt.UO();this.Xyt=[...new Set([...s.WO(),...i.WO()])],this.Xyt=t.$0t(this.Xyt)}Hyt(){const t=this.Zyt;if(t.Ul()){const s=t.UO();return Mo.gpt.prototype.YO.bind(s,this.Xyt,t.VO(),t.HO(),t.zO())}{const i=t.zO();return()=>i}}}class To extends Mo.Uyt{constructor(t,s){super(t),this.Pct=this.Zc.eY(s[1]),this.qgt=this.Zc.Hgt(s[2]),this.Kyt=!!s[3],this.Qct=this.Zc.FO().XO(),this.TT.$yt(this.Pct)}Hyt(){return this.Pct.lP().qyt(this.qgt,this.Pct.oP().sz())}tMt(...t){const s=this.Pct,i=s.bP().Kct(),e=i.length;if(0===e)return this.Kyt?"":0;const h=a(this.TT.sMt(),e);return this.Qct.b6().Bft(s),this.qgt.apply(i[h].sz(),t)}iMt(t,...s){const i=this.Pct,e=i.TP(),h=e.length;if(0===h)return this.Kyt?"":0;const r=a(t,h);return this.Qct.b6().Bft(i),this.qgt.apply(e[r].sz(),s)}}class bo extends Mo.Uyt{constructor(t,s){super(t),this.Pct=this.Zc.eY(s[1]),this.eMt=s[3],this.Kyt=!!s[2],this.TT.$yt(this.Pct)}hMt(){const t=this.Pct.bP().Kct(),s=t.length;if(0===s)return this.Kyt?"":0;const i=a(this.TT.sMt(),s);return t[i].rMt(this.eMt)}nMt(){const t=this.Pct,s=t.bP().Kct(),i=s.length;if(0===i)return this.Kyt?"":0;const e=a(this.TT.sMt(),i),h=s[e],r=h.yF().oMt(t.aMt());return h.rMt(this.eMt+r)}uMt(t){const s=this.Pct,i=s.TP(),e=i.length;if(0===e)return this.Kyt?"":0;let h=a(t,e),r=i[h],n=0;return s.NY()&&(n=r.yF().oMt(s.aMt())),r.rMt(this.eMt+n)}}class xo extends Mo.Uyt{constructor(t,s){super(t),this.Pct=this.Zc.eY(s[1]),this.lMt=this.Pct.lht(s[2]),this.cMt=this.Pct.zst(s[2]),this.qgt=this.Zc.Hgt(s[3]),this.Kyt=!!s[4],this.Qct=this.Zc.FO().XO(),this.TT.$yt(this.Pct)}fMt(...t){const s=this.Pct,i=s.bP().Kct(),e=i.length;if(0===e)return this.Kyt?"":0;let h=a(this.TT.sMt(),e),r=(this.Qct.b6().Bft(s),i[h]),n=0;return s.NY()&&(n=r.yF().dMt(s.aMt())),this.qgt.apply(r.uht()[this.cMt+n].sz(),t)}pMt(t,...s){const i=this.Pct,e=i.TP(),h=e.length;if(0===h)return this.Kyt?"":0;let r=a(t,h),n=(this.Qct.b6().Bft(i),e[r]),o=0;return i.NY()&&(o=n.yF().dMt(i.aMt())),this.qgt.apply(n.uht()[this.cMt+o].sz(),s)}}class vo extends Mo.Uyt{constructor(t,s){super(t),this.mMt=null,this.gMt=s[1]}U0t(){this.mMt=this.Zc.FO().p1t(this.gMt)}yMt(){return this.mMt}}}{let r=function(t){const s=self.MMt[t];if(s)return s;throw new Error("invalid expression number")};r;const Co=self.Os;Co.wMt=class extends Co.Kh{constructor(t,s,i){super(),this.TT=t,this.Fg=i,this.rf=s,this.Ks=null,this.SMt=!1,this.Eyt=!1}static jb(t,s,i){const e=s[0],h=[Go,Io,Oo,Eo,Do,No,Ao,Go,Eo,Eo,Ro,Po,Oo,Fo,Io,Lo,_o,ko,jo,zo,Bo,Uo];return Co.ir(h[e],t,e,i,s)}U0t(){}Vyt(){this.SMt=!0}$yt(t){this.SMt||!t||t.lP().FR()||(this.SMt=!0)}TMt(){return this.SMt}oO(){return this.Fg}I4(){return this.TT.I4()}UO(){return this.TT.UO()}Jdt(){return this.Eyt}bMt(){return 4===this.rf}};class Go extends Co.wMt{constructor(t,s,i,e){super(t,s,i),this.xMt=0;const h=e[1];this.vMt=h[0],this.CMt=[],this.GMt=null;for(let t=1,s=h.length;t<s;++t)this.CMt.push(Co.Uyt.Wyt(this,h[t]));this.CMt.length?this.Ks=this.IMt:(this.Ks=r(this.vMt),this.Eyt=!0)}NMt(t){if(t<0||t>=this.CMt.length)throw new RangeError("invalid numbered node");return this.CMt[t]}U0t(){for(const s of this.CMt)s.U0t();const t=r(this.vMt);this.CMt.length?this.GMt=t(this):this.GMt=t}sMt(){return this.xMt}IMt(t){return this.xMt=t,this.GMt()}}class Io extends Go{constructor(t,s,i,e){super(t,s,i,e),this.Ks=this.EMt,14===s&&(this.UO().Lmt(),this.TT instanceof Co.Gmt)&&this.UO().Ymt()}EMt(t){this.xMt=t;const s=this.GMt();return"string"==typeof s?s:""}_Mt(){return r(this.vMt)()}}class No extends Go{constructor(t,s,i,e){super(t,s,i,e),2<=t.DMt()?this.Ks=this.qP:this.Ks=this.n4,this.Eyt=!1}n4(t){this.xMt=t;const s=this.GMt(),i=this.I4().e4();return i.n4(s)}qP(t){const s=this.n4(t);return s?s.qP():null}}class Eo extends Co.wMt{constructor(t,s,i,e){super(t,s,i),this.AMt=e[1],this.Ks=this.LMt,this.Eyt=!0}LMt(){return this.AMt}}class _o extends Co.wMt{constructor(t,s,i,e){super(t,s,i),this.OMt=e[1],this.Ks=this.RMt,this.Eyt=!0}RMt(){return this.OMt}}class Do extends Co.wMt{constructor(t,s,i,e){super(t,s,i),this.Pct=this.I4().eY(e[1]),2<=t.DMt()?this.Ks=this.hP:this.Ks=this.yF;const h=this.UO();h.Cmt(this.Pct),this.TT instanceof Co.Gmt?h.Ymt():h.r5()&&h.r5().Ymt(),this.Eyt=!0}yF(){return this.Pct}hP(){return this.Pct?this.Pct.hP():null}}class Ao extends Co.wMt{constructor(t,s,i,e){super(t,s,i),this.K8=this.I4().j3().Rq(e[1]),2<=t.DMt()?this.Ks=this.P3:this.Ks=this.z3,this.Eyt=!0}z3(){return this.K8}P3(){return this.K8?this.K8.P3():null}}class Lo extends Co.wMt{constructor(t,s,i,e){super(t,s,i),this.FX=this.I4().B$().JZ(e[1]),2<=t.DMt()?this.Ks=this.est:this.Ks=this.Cst,this.Eyt=!0}Cst(){return this.FX}est(){return this.FX?this.FX.est():null}}class Oo extends Co.wMt{constructor(t,s,i,e){super(t,s,i),this.PMt=e[1],this.Ks=this.kMt,this.Eyt=!0}kMt(){return this.PMt}}class Ro extends Co.wMt{constructor(t,s,i,e){super(t,s,i),this.FMt=e[1];const h=this.TT.yF();this.TT instanceof Co.vmt&&this.TT.z2()||!h||!h.NY()?(this.Ks=this.jMt,this.Eyt=!0):(this.Ks=this.zMt,this.Vyt())}jMt(){return this.FMt}zMt(t){t=t||0;let s=this.TT.yF(),i=s.bP(),e=i.TP(),h=null;if(e.length)h=e[t%e.length].yF();else if(i.Zct()){const r=i.Xct();h=r[t%r.length].yF()}else{if(!(0<s.vP()))return 0;{const n=s.TP();h=n[t%n.length].yF()}}return this.FMt+h.oMt(s.aMt())}}class Po extends Co.wMt{constructor(t,s,i,e){super(t,s,i),this.gMt=e[1],this.mMt=null,2<=t.DMt()?this.Ks=this.BMt:this.Ks=this.UMt,this.Eyt=!0}U0t(){this.mMt=this.I4().FO().p1t(this.gMt)}UMt(){return this.mMt}BMt(){return null}}class ko extends Co.wMt{constructor(t,s,i,e){super(t,s,i),this.WMt=e[1],this.Zyt=null,2<=t.DMt()?this.Ks=this.QMt:this.Ks=this.JMt,this.Eyt=!0}U0t(){this.Zyt=this.I4().FO().jO(this.WMt),this.WMt=null}JMt(){return this.Zyt}QMt(){return null}}class Fo extends Co.wMt{constructor(t,s,i,e){super(t,s,i),this.YMt=[],this.VMt=[],this.Eyt=!0;for(let t=1,s=e.length;t<s;++t){const h=Co.wMt.jb(this.TT,e[t],0);this.YMt.push(h),this.VMt.push(0),h.Jdt()||(this.Eyt=!1)}this.Ks=this.HMt}U0t(){for(const t of this.YMt)t.U0t()}HMt(){const i=this.YMt,e=this.VMt;for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Ks(0);return e}}class jo extends Co.wMt{constructor(t,s,i,e){super(t,s,i),this.qMt=e[1],this.Ks=this.jet,this.Eyt=!0}jet(){return this.qMt}}class zo extends Co.wMt{constructor(t,s,i,e){super(t,s,i),this.ZMt=e[1],this.Ks=this.XMt,this.Eyt=!0}XMt(){return this.ZMt}}class Bo extends Go{constructor(t,s,i,e){super(t,s,i,e),this.Ks=this.LF,this.Eyt=!1}LF(){return this.GMt()}}class Uo extends Co.wMt{constructor(t,s,i,e){super(t,s,i),this.Tut=this.I4().jut().mut(e[1]),this.Ks=this.KMt,this.Eyt=!0}KMt(){return this.Tut.Uc()}}}{let e=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Ks(0)};e;const Wo=self.Os,Qo=[],Jo=function(){};Wo.vmt=class extends Wo.Kh{constructor(t,i,s){if(super(),this.fyt=t,this.Zc=t.I4(),this.Fg=s,this.qgt=this.Zc.Hgt(i[1]),this.$Mt=0<i[3],this.twt=2===i[3],this.swt=!!i[4],this.iwt=!!i[5],this.a2=!!i[6],this.eJ=i[7],this.ewt=this.fyt.fft(),this.Pct=null,this.lMt=null,this.cMt=-1,this.Qyt=null,this.pG=Jo,this.F1t=Jo,this.Vs=[],this.hwt=[],this.rwt=!1,this.nwt=null,this.owt=null,this.gmt=this.Zc.Tq()?{ymt:i[8][0],awt:i[8][1]}:null,-1===i[0]?this.Qyt=this.Zc.Jyt():(this.Pct=this.Zc.eY(i[0]),i[2]&&(this.lMt=this.Pct.lht(i[2]),this.cMt=this.Pct.zst(i[2])),this.fyt.r5()&&this.fyt.r5().Ymt()),10===i.length){let s=i[9];for(let t of s)this.Vs.push(Wo.wMt.jb(this,t,this.Vs.length)),this.hwt.push(0)}0===this.Vs.length&&(this.Vs=Qo,this.hwt=Qo),this.fyt.FO().V0t(this)}static jb(t,s,i){return Wo.ir(Wo.vmt,t,s,i)}U0t(){for(const t of this.Vs)t.U0t(),t.TMt()&&(this.rwt=!0);this.twt?(this.pG=this.uwt,this.F1t=this.lwt):this.Qyt?(this.cwt(),this.F1t=this.fwt):this.Pct.lP().FR()?(this.dwt(),this.F1t=this.pwt):this.a2?(this.pG=this.mwt,this.F1t=this.gwt):(this.pG=this.ywt,this.F1t=this.Mwt)}cwt(){const t=this.Qyt,s=this.Qyt;this.wwt(t,s,this.Swt)}dwt(){const t=this.Pct.lP(),s=this.Pct.oP().sz();this.wwt(t,s,this.Twt)}wwt(t,s,i){const e=this.qgt,h=this.iwt,r=this.Vs;if(0===r.length){const n=t.qyt(e,s);h?this.pG=function(){return Wo.xor(n(),h)}:this.pG=n}else if(1===r.length){const o=r[0];if(!h&&o.Jdt())this.pG=t.bwt(e,s,o.Ks(0));else{const a=t.qyt(e,s);this.pG=function(){return Wo.xor(a(o.Ks(0)),h)}}}else if(2===r.length){const u=r[0],l=r[1];if(!h&&u.Jdt()&&l.Jdt())this.pG=t.xwt(e,s,u.Ks(0),l.Ks(0));else{const c=t.qyt(e,s);this.pG=function(){return Wo.xor(c(u.Ks(0),l.Ks(0)),h)}}}else if(3===r.length){const f=r[0],d=r[1],p=r[2];if(!h&&f.Jdt()&&d.Jdt()&&p.Jdt())this.pG=t.vwt(e,s,f.Ks(0),d.Ks(0),p.Ks(0));else{const m=t.qyt(e,s);this.pG=function(){return Wo.xor(m(f.Ks(0),d.Ks(0),p.Ks(0)),h)}}}else this.pG=i}PY(){return this.eJ}Cpt(){return this.qgt}yF(){return this.Pct}cz(){return this.lMt}Cwt(){return this.lMt?this.lMt.az():this.Pct?this.Pct.lP():null}DMt(){const t=this.Cwt();return t?t.Gwt():1}UO(){return this.fyt}I4(){return this.Zc}oO(){return this.Fg}lgt(){return this.oO()}Mpt(){return this.$Mt}Gpt(){return this.twt}Iwt(){return this.iwt}Cz(){return this.swt}z2(){return this.a2}Nwt(){return this.gmt.ymt}Ewt(){return!!this.Qyt}rgt(){return this.Ewt()||this.Pct.lP().FR()}ngt(){for(const t of this.Vs)if(t.bMt())return t.yF();return null}_wt(t){this.gmt.ymt=!!t,this.fyt.Wmt()}Dwt(){return this.gmt.awt}Bpt(){return!this.Nwt()&&!this.Zc.wgt()&&!this.Dwt()}Awt(){return this.nwt||(this.nwt=new Map),this.nwt}Lwt(){return this.owt||(this.owt=new Map),this.owt}Swt(){const t=this.hwt;return e(this.Vs,t),Wo.xor(this.qgt.apply(this.Qyt,t),this.iwt)}*fwt(){if((this.Nwt()||this.Zc.wgt())&&(yield this),this.Dwt()){const s=this.hwt;e(this.Vs,s);let t=this.qgt.apply(this.Qyt,s);return Wo.Lo(t)&&(t=yield*t),Wo.xor(t,this.iwt)}return this.pG()}Twt(){const t=this.hwt,s=(e(this.Vs,t),this.Pct.oP().sz());return Wo.xor(this.qgt.apply(s,t),this.iwt)}*pwt(){if((this.Nwt()||this.Zc.wgt())&&(yield this),this.Dwt()){let t=this.hwt,s=(e(this.Vs,t),this.Pct.oP().sz()),i=this.qgt.apply(s,t);return Wo.Lo(i)&&(i=yield*i),Wo.xor(i,this.iwt)}return this.pG()}uwt(){return!0}*lwt(){return(this.Nwt()||this.Zc.wgt())&&(yield this),!0}Owt(){if(this.lMt){if(2<=this.lMt.az().Gwt())throw new Error("not yet implemented");return this.lMt}return 2<=this.Pct.lP().Gwt()?this.Pct.hP():this.Pct}mwt(){const t=this.hwt,s=(e(this.Vs,t),this.qgt.apply(this.Owt(),t));return this.Pct.jgt(),s}*gwt(){if((this.Nwt()||this.Zc.wgt())&&(yield this),this.Dwt()){const s=this.hwt;e(this.Vs,s);let t=this.qgt.apply(this.Owt(),s);return Wo.Lo(t)&&(t=yield*t),this.Pct.jgt(),t}return this.pG()}ywt(){const i=this.Vs,e=this.hwt,t=this.Pct.bP();for(let t=0,s=i.length;t<s;++t){const h=i[t];h.TMt()||(e[t]=h.Ks(0))}return t.Hct()?this.Rwt(t):this.Pwt(t)}*Mwt(){return(this.Nwt()||this.Zc.wgt())&&(yield this),this.ywt()}kwt(i){const e=this.Vs,h=this.hwt;for(let t=0,s=e.length;t<s;++t){const r=e[t];r.TMt()&&(h[t]=r.Ks(i))}}Rwt(i){const t=this.Pct,e=t.NY(),h=t.aMt(),r=this.cMt,n=0<=r,o=t.TP(),a=this.rwt,u=this.hwt,l=this.qgt,c=this.iwt,f=this.ewt&&!this.$Mt;i.Vct();for(let s=0,t=o.length;s<t;++s){const d=o[s];a&&this.kwt(s);let t;if(n){const p=e?d.yF().dMt(h):0;t=l.apply(d.uht()[r+p].sz(),u)}else t=l.apply(d.sz(),u);Wo.xor(t,c)?i.$ct(d):f&&i.tft(d)}return t.Fwt(!0),i.ift(!1),t.jgt(),i.qct()}Pwt(t){let s=this.Pct,i=s.NY(),e=s.aMt(),h=s.EF(),r=this.cMt,n=0<=r,o=this.rwt,a=this.hwt,u=this.qgt,l=this.iwt,c=this.ewt&&!this.$Mt,f=t.eft(),d=t.hft(),p=c&&!this.fyt.hgt(this),m=p?d:f,g=0,y=!1;for(let s=0,t=m.length;s<t;++s){const w=m[s];o&&this.kwt(s);let t;if(n){const S=i?w.yF().dMt(e):0;t=u.apply(w.uht()[r+S].sz(),a)}else t=u.apply(w.sz(),a);Wo.xor(t,l)?(y=!0,p?(f.push(w),h&&w.jwt()):(m[g]=w,h&&w.zwt(g),++g)):p?(m[g]=w,h&&w.Bwt(g),++g):c&&(d.push(w),h)&&w.Uwt()}Wo._n(m,g),h&&s.Wwt(p,g);const M=y;return p&&!y&&(y=this.Qwt(f)),s.Fwt(M||c),c?y:t.qct()}Qwt(i){const t=this.Pct,e=t.NY(),h=t.aMt(),r=this.rwt,n=this.cMt,o=0<=n,a=this.hwt,u=this.qgt,l=this.iwt;for(let s=0,t=i.length;s<t;++s){const c=i[s];r&&this.kwt(s);let t;if(o){const f=e?c.yF().dMt(h):0;t=u.apply(c.uht()[n+f].sz(),a)}else t=u.apply(c.sz(),a);if(Wo.xor(t,l))return!0}return!1}Jwt(t,s){return this.Vs[t].Ks(s)}Ipt(){const t=this.Vs;if(t.length)return t[0]._Mt();throw new Error("no parameters")}KH(){if(!this.nwt||!this.nwt.size)return null;const s={};for(const[i,e]of this.nwt.entries()){let t=e;"collmemory"===i&&(t=[...e.entries()].map(t=>[t[0].DF(),t[1].DF(),t[2]])),s[i]=t}return{ex:s}}$H(t){if(this.nwt&&(this.nwt.clear(),this.nwt=null),t){const s=this.Zc,i=t.ex;if(i){const e=this.Awt();e.clear();for(const[h,r]of Object.entries(i)){let t=r;"collmemory"===h&&(t=Wo.ir(Wo.Wl,r.map(t=>[s.t4(t[0]),s.t4(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),e.set(h,t)}}}}}}{let h=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Ks(0)};h;const Yo=self.Os,Vo=[],Ho=function(){},qo=function*(){};Yo.Gmt=class extends Yo.Kh{constructor(t,s,i){super();const e=(this.fyt=t).I4(),h=(this.Zc=e,this.Fg=i,this.eJ=4<=s.length?s[3]:-1,this.Ywt=5<=s.length?255&s[4]:0,this.Vwt=5<=s.length?s[4]>>8:0,this.qgt=null,this.Pct=null,this.lMt=null,this.cMt=-1,this.Qyt=null,this.Hwt="",this.qwt=null,this.Zwt=null,this.pG=Ho,this.F1t=Ho,this.Vs=[],this.hwt=[],this.rwt=!1,this.nwt=null,this.owt=null,-3===s[0]),r=h?s[2]:s[5];if(this.gmt=e.Tq()||h?{ymt:r[0],awt:r[1],index:r[2]}:null,-1===s[0])this.Qyt=e.Jyt(),this.qgt=e.Hgt(s[1]);else if(-2===s[0])this.Hwt=s[1];else if(h){const n=e.Hgt(s[1]);this.qgt=n,this.pG=this.Xwt,this.F1t=this.Kwt,this.Vwt|=8}else this.Pct=e.eY(s[0]),4&this.Vwt?(this.Hwt=s[1],this.qwt=e.eY(s[2])):(s[2]&&(this.lMt=this.Pct.lht(s[2]),this.cMt=this.Pct.zst(s[2])),this.qgt=e.Hgt(s[1]));if(7===s.length){const o=s[6];for(const a of o)this.Vs.push(Yo.wMt.jb(this,a,this.Vs.length)),this.hwt.push(0)}0===this.Vs.length&&(this.Vs=Vo,this.hwt=Vo),this.$wt()&&(this.fyt.Lmt(),this.fyt.Ymt()),this.fyt.FO().H0t(this)}static jb(t,s,i){return Yo.ir(Yo.Gmt,t,s,i)}U0t(){for(const t of this.Vs)t.U0t(),t.TMt()&&(this.rwt=!0);if(this.Qyt)this.cwt(),this.F1t=this.fwt;else if(this.Hwt)4&this.Vwt?this.tSt():this.sSt(),this.Hwt="",this.qwt=null;else if(this.pG===this.Xwt){const s=this.qgt,i=this.Zc.FO().c1t(this.fyt);this.qgt=s.bind(null,this.Zc.PR(),i)}else this.lMt?this.xgt()?(this.pG=this.iSt,this.F1t=this.eSt):(this.pG=this.hSt,this.F1t=this.rSt):this.Pct.lP().FR()?(this.dwt(),this.F1t=this.pwt):this.z2()?(this.pG=this.nSt,this.F1t=this.oSt):this.xgt()?(this.pG=this.aSt,this.F1t=this.uSt):this.lSt()?(this.pG=this.cSt,this.F1t=this.fSt):this.Vs.length?this.Vs.every(t=>t.TMt())?(this.pG=this.dSt,this.F1t=this.pSt):this.rwt?(this.pG=this.mSt,this.F1t=this.gSt):this.Vs.every(t=>t.Jdt())?(h(this.Vs,this.hwt),this.pG=this.ySt,this.F1t=this.MSt):(this.pG=this.wSt,this.F1t=this.SSt):(this.pG=this.ySt,this.F1t=this.MSt)}cwt(){const t=this.Qyt,s=this.Qyt;this.wwt(t,s,this.Swt)}dwt(){const t=this.Pct.lP(),s=this.Pct.oP().sz();this.wwt(t,s,this.Twt)}sSt(){const t=this.fyt.FO(),i=t.jO(this.Hwt);if(i.Ul()){const e=0!=(2&this.Vwt);this.Zwt=i.UO();let s=[...new Set([...this.fyt.WO(),...this.Zwt.WO()])];s=t.$0t(s);const h=!i.VO()&&this.TSt()?{Ugt:!0}:null;if(this.pG=Yo.gpt.prototype.Pgt.bind(this.Zwt,s,this.Vs,e,h),this.Zc.Tq()){const r=this;this.F1t=function*(){(r.Nwt()||r.Zc.wgt())&&(yield r);const t=yield*r.Zwt.Jgt(s,r.Vs,e,h);return t}}else this.F1t=qo}else this.pG=Ho,this.F1t=qo}tSt(){const r=this.fyt.FO(),n=r.M1t(this.qwt,this.Hwt);if(n.Ul()){const o=0!=(2&this.Vwt);this.Zwt=n.UO();let s=[...new Set([...this.fyt.WO(),...this.Zwt.WO(),this.Pct,n.yF()])],t=(s=r.$0t(s),!this.Pct.NY()&&!n.yF().NY()),i=!this.Pct.NY()&&n.yF().NY(),e=this.Pct.NY(),h=null;if(!n.VO()&&this.TSt()&&((h=h||{}).Ugt=!0),!i&&o||((h=h||{}).kgt=this.Pct,h.Fgt=n.yF()),t||i||e&&!n.Tyt()?this.pG=Yo.gpt.prototype.Pgt.bind(this.Zwt,s,this.Vs,o,h):e&&(this.pG=Yo.Xdt.prototype.Cyt.bind(n,s,this.Vs)),this.Zc.Tq()){const a=this;t||i||e&&!n.Tyt()?this.F1t=function*(){(a.Nwt()||a.Zc.wgt())&&(yield a);const t=yield*a.Zwt.Jgt(s,a.Vs,o,h);return t}:e&&(this.F1t=function*(){(a.Nwt()||a.Zc.wgt())&&(yield a);const t=yield*n.Iyt(s,a.Vs);return t})}else this.F1t=qo}else this.pG=Ho,this.F1t=qo}wwt(t,s,i){const e=this.qgt,h=this.Vs;if(0===h.length)this.pG=t.qyt(e,s);else if(1===h.length){const r=h[0];if(r.Jdt())this.pG=t.bwt(e,s,r.Ks(0));else{const n=t.qyt(e,s);this.pG=function(){return n(r.Ks(0))}}}else if(2===h.length){const o=h[0],a=h[1];if(o.Jdt()&&a.Jdt())this.pG=t.xwt(e,s,o.Ks(0),a.Ks(0));else{const u=t.qyt(e,s);this.pG=function(){return u(o.Ks(0),a.Ks(0))}}}else if(3===h.length){const l=h[0],c=h[1],f=h[2];if(l.Jdt()&&c.Jdt()&&f.Jdt())this.pG=t.vwt(e,s,l.Ks(0),c.Ks(0),f.Ks(0));else{const d=t.qyt(e,s);this.pG=function(){return d(l.Ks(0),c.Ks(0),f.Ks(0))}}}else this.pG=i}PY(){return this.eJ}xgt(){return 0!=(8&this.Vwt)}bgt(){return 0!=(16&this.Vwt)}lSt(){return 1===this.Ywt}z2(){return 2===this.Ywt}$wt(){return 0!=(1&this.Vwt)}Pmt(){return this.xgt()||this.bgt()}yF(){return this.Pct}Cwt(){return this.lMt?this.lMt.az():this.Pct?this.Pct.lP():null}DMt(){const t=this.Cwt();return t?t.Gwt():1}UO(){return this.fyt}TSt(){let t=this.fyt;do{if(t instanceof Yo.Xdt&&t.VO())return!0}while(t=t.u1t());return!1}I4(){return this.Zc}oO(){return this.Fg}lgt(){return this.gmt.index}Nwt(){return this.gmt.ymt}_wt(t){this.gmt.ymt=!!t,this.fyt.Wmt()}Dwt(){return this.gmt.awt}Bpt(){return!this.Nwt()&&!this.Zc.wgt()&&!this.Dwt()}Awt(){return this.nwt||(this.nwt=new Map),this.nwt}Lwt(){return this.owt||(this.owt=new Map),this.owt}Swt(){const t=this.hwt;return h(this.Vs,t),this.qgt.apply(this.Qyt,t)}*fwt(){if((this.Nwt()||this.Zc.wgt())&&(yield this),this.Dwt()){const t=this.hwt,s=(h(this.Vs,t),yield*this.qgt.apply(this.Qyt,t));return s}return this.pG()}Twt(){const t=this.hwt;return h(this.Vs,t),this.qgt.apply(this.Pct.oP().sz(),t)}*pwt(){if((this.Nwt()||this.Zc.wgt())&&(yield this),this.Dwt()){const t=this.hwt,s=(h(this.Vs,t),yield*this.qgt.apply(this.Pct.oP().sz(),t));return s}return this.pG()}ySt(){const i=this.hwt,e=this.Pct.bP().TP();for(let t=0,s=e.length;t<s;++t)this.qgt.apply(e[t].sz(),i)}*MSt(){if((this.Nwt()||this.Zc.wgt())&&(yield this),this.Dwt()){const i=this.hwt,e=this.Pct.bP().TP();for(let t=0,s=e.length;t<s;++t)yield*this.qgt.apply(e[t].sz(),i)}else this.ySt()}wSt(){const i=this.hwt,e=(h(this.Vs,i),this.Pct.bP().TP());for(let t=0,s=e.length;t<s;++t)this.qgt.apply(e[t].sz(),i)}*SSt(){if((this.Nwt()||this.Zc.wgt())&&(yield this),this.Dwt()){const i=this.hwt,e=(h(this.Vs,i),this.Pct.bP().TP());for(let t=0,s=e.length;t<s;++t)yield*this.qgt.apply(e[t].sz(),i)}else this.wSt()}dSt(){const e=this.Vs,h=this.hwt,s=this.qgt,r=this.Pct.bP().TP();for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);s.apply(n.sz(),h)}}*pSt(){if((this.Nwt()||this.Zc.wgt())&&(yield this),this.Dwt()){const e=this.Vs,h=this.hwt,s=this.qgt,r=this.Pct.bP().TP();for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);yield*s.apply(n.sz(),h)}}else this.dSt()}mSt(){const e=this.Vs,h=this.hwt,s=this.qgt,r=this.Pct.bP().TP();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.TMt()||(h[t]=i.Ks(0))}for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.TMt()&&(h[t]=o.Ks(i))}s.apply(n.sz(),h)}}*gSt(){if((this.Nwt()||this.Zc.wgt())&&(yield this),this.Dwt()){const e=this.Vs,h=this.hwt,s=this.qgt,r=this.Pct.bP().TP();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.TMt()||(h[t]=i.Ks(0))}for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.TMt()&&(h[t]=o.Ks(i))}yield*s.apply(n.sz(),h)}}else this.mSt()}cSt(){const e=this.Vs,h=this.hwt,s=this.qgt,t=this.Pct,i=t.bSt(),r=t.bP().TP();i.xSt(s);for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);s.apply(n.sz(),h)}i.vSt(s)}*fSt(){if((this.Nwt()||this.Zc.wgt())&&(yield this),this.Dwt()){const e=this.Vs,h=this.hwt,s=this.qgt,t=this.Pct,i=t.bSt(),r=t.bP().TP();i.xSt(s);for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);yield*s.apply(n.sz(),h)}i.vSt(s)}else this.cSt()}nSt(){const t=this.hwt;return h(this.Vs,t),this.qgt.apply(this.lMt||this.Pct,t)}*oSt(){if((this.Nwt()||this.Zc.wgt())&&(yield this),this.Dwt()){const s=this.hwt;h(this.Vs,s);let t=this.qgt.apply(this.lMt||this.Pct,s);return Yo.Lo(t)?yield*t:t}return this.nSt()}hSt(){const t=this.Pct,s=t.NY(),e=t.aMt(),h=this.Vs,r=this.rwt,n=this.hwt,o=this.qgt,a=this.cMt,u=t.bP().TP();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.TMt()||(n[t]=i.Ks(0))}for(let i=0,t=u.length;i<t;++i){const l=u[i];if(r)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.TMt()&&(n[t]=f.Ks(i))}const c=s?l.yF().dMt(e):0;o.apply(l.uht()[a+c].sz(),n)}}*rSt(){if((this.Nwt()||this.Zc.wgt())&&(yield this),this.Dwt()){const t=this.Pct,s=t.NY(),e=t.aMt(),h=this.Vs,r=this.rwt,n=this.hwt,o=this.qgt,a=this.cMt,u=t.bP().TP();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.TMt()||(n[t]=i.Ks(0))}for(let i=0,t=u.length;i<t;++i){const l=u[i];if(r)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.TMt()&&(n[t]=f.Ks(i))}const c=s?l.yF().dMt(e):0;yield*o.apply(l.uht()[a+c].sz(),n)}}else this.hSt()}aSt(){const e=this.Vs,h=this.hwt,s=this.qgt,r=this.Pct.bP().TP(),n=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);n.push(s.apply(o.sz(),h))}return Promise.all(n)}*uSt(){if((this.Nwt()||this.Zc.wgt())&&(yield this),this.Dwt()){const e=this.Vs,h=this.hwt,s=this.qgt,r=this.Pct.bP().TP(),n=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);n.push(yield*s.apply(o.sz(),h))}return Promise.all(n)}return this.aSt()}iSt(){const t=this.Pct,s=t.NY(),e=t.aMt(),h=this.Vs,r=this.hwt,n=this.qgt,o=this.cMt,a=t.bP().TP(),u=[];for(let i=0,t=a.length;i<t;++i){const l=a[i];for(let t=0,s=h.length;t<s;++t)r[t]=h[t].Ks(i);const c=s?l.yF().dMt(e):0;u.push(n.apply(l.uht()[o+c].sz(),r))}return Promise.all(u)}*eSt(){if((this.Nwt()||this.Zc.wgt())&&(yield this),this.Dwt()){const t=this.Pct,s=t.NY(),e=t.aMt(),h=this.Vs,r=this.hwt,n=this.qgt,o=this.cMt,a=t.bP().TP(),u=[];for(let i=0,t=a.length;i<t;++i){const l=a[i];for(let t=0,s=h.length;t<s;++t)r[t]=h[t].Ks(i);const c=s?l.yF().dMt(e):0;u.push(yield*n.apply(l.uht()[o+c].sz(),r))}return Promise.all(u)}return this.iSt()}async Xwt(){try{await this.qgt()}catch(t){console.error(`Unhandled exception running script %c${this.fyt.V7().Uc()}, event ${this.fyt.qmt()}, action ${this.lgt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),Yo.vpt.Xgt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Yo.vpt.Kgt())}}*Kwt(){return(this.Nwt()||this.Zc.wgt())&&(yield this),this.Xwt()}KH(){return this.nwt&&this.nwt.size?{ex:Yo._o(this.nwt)}:null}$H(t){if(this.nwt&&(this.nwt.clear(),this.nwt=null),t){const s=t.ex;s&&(this.nwt=Yo.Do(s))}}}}{let d=function(t){return t instanceof n?M.ik(t):t.EB()},l=function(t){return d(t).r4()},h=function(t){return M.ik(t)},N=function(t,s,i,e){const h=s.DF(),r=i.DF();h<r?t.Set(s,i,e):t.Set(i,s,e)},E=function(t,s,i){const e=s.DF(),h=i.DF();e<h?t.Vl(s,i):t.Vl(i,s)},_=function(t,s){t.Hl(s)},D=function(t,s,i){const e=s.DF(),h=i.DF();return e<h?t.Ks(s,i):t.Ks(i,s)},e=function(t,s,i,e){if(!s)return!1;const h=0!==i||0!==e,r=t.r4(),n=M.pO(),o=M.e1t(),a=o.UO().fft(),u=o.yF(),l=o.Iwt(),c=s.bP(),f=u!==s;G=s,C=f&&!l;let d,p=0,m=0,g=I=!1;c.Hct()?(w.C(r.jj()),w.offset(i,e),n.CSt(r.n4(),s,w,S),d=S):!a||M.GSt()&&!c.hft().length&&c.eft().length?d=c.eft():(d=c.hft(),I=!0),h&&(p=r.tT(),m=r.eT(),r.Rj(i,e),r.Dj());for(const y of d)if(n.Z4(t,y)){if(g=!0,l)break;f&&O.add(y)}return h&&(r.Aj(p,m),r.Dj()),A.Dn(S),g},i=function(t){const s=M.QO().fft(),i=G.bP(),e=i.eft(),h=i.hft();i.Hct()?(i.oft(O),s&&(A.Dn(h),i.aft(O,G.TP()))):s?I?i.uft(O):(i.aft(O,e),i.oft(O)):i.oft(O),G.jgt()},T=function(t,s){C&&(s&&i(),O.clear(),G=null,C=!1)},s=function(t,s){const i=M.t4(s);if(i){const e=t.bP();if(e.Hct()||e.eft().includes(i))if(t.NY()){if(i.yF().ISt(t))return e.cft(i),t.jgt(),!0}else if(i.yF()===t)return e.cft(i),t.jgt(),!0}return!1},r=function(t,h){const r=t.bP();if(r.Hct()){r.ift(!1),r.Vct();const i=t.TP();for(let t=0,s=i.length;t<s;++t){const e=i[t];e.DF()===h?r.tft(e):r.$ct(e)}return t.jgt(),!!r.eft().length}{let i=r.eft(),e=0;for(let t=0,s=i.length;t<s;++t){const n=i[t];(i[e]=n).DF()===h?r.tft(n):++e}return A._n(i,e),t.jgt(),!!i.length}},A=(d,l,h,N,E,_,D,e,i,T,s,r,self.Os),u=new A.Ro,b={},x={},v={},M=null,n=(A.NSt=function(t){M=t},self.mF),w=(x.ESt=function(t,s){return A.compare(this.r4().tT(),t,s)},v.ESt=function(t,s){return A.compare(this.x,t,s)},x._St=function(t,s){return A.compare(this.r4().eT(),t,s)},v._St=function(t,s){return A.compare(this.y,t,s)},x.DSt=function(){return this.r4().Wj()},v.DSt=function(){return this.Uj()},b.ASt=function(){const t=l(this),s=t.z3(),i=t.jj();return i.gu()<0||i.yu()<0||i.pu()>s.Xp()||i.mu()>s.um()},b.LSt=function(i,e,h){const t=this.bP(),r=t.TP();if(!r.length)return!1;let n=r[0],o=n.r4(),a=n,u=A.gr(o.tT(),o.eT(),e,h);for(let t=1,s=r.length;t<s;++t){n=r[t],o=n.r4();const l=A.gr(o.tT(),o.eT(),e,h);(0===i&&l<u||1===i&&l>u)&&(u=l,a=n)}return t.cft(a),!0},x.sT=function(t){const s=this.r4();s.tT()!==t&&(s.sT(t),s.Dj())},v.sT=function(t){this.x=+t},x.hT=function(t){const s=this.r4();s.eT()!==t&&(s.hT(t),s.Dj())},v.hT=function(t){this.y=+t},x.OSt=function(t,s){const i=this.r4();i.RSt(t,s)||(i.Aj(t,s),i.Dj())},v.OSt=function(t,s){this.setPosition(t,s)},b.PSt=function(t,s){if(t){const i=d(this),e=t.wP(i);if(e){const[h,r]=e.kSt(s),n=i.r4();n.tT()===h&&n.eT()===r||(n.Aj(h,r),n.Dj())}}},b.FSt=function(t){if(0!==t){const s=l(this);s.Rj(s.jSt()*t,s.zSt()*t),s.Dj()}},x.BSt=function(t,s){if(0!==s){const i=this.r4();t=A.dr(t),i.Rj(Math.cos(t)*s,Math.sin(t)*s),i.Dj()}},v.BSt=function(t,s){0!==s&&(t=A.dr(t),this.Oj(Math.cos(t)*s,Math.sin(t)*s))},x.tT=function(){return this.r4().tT()},v.tT=function(){return this.x},x.eT=function(){return this.r4().eT()},v.eT=function(){return this.y},b.n3=function(){return M.n3(d(this))},x.USt=function(t,s){return A.compare(this.r4().Xp(),t,s)},v.USt=function(t,s){return A.compare(this.width,t,s)},x.WSt=function(t,s){return A.compare(this.r4().um(),t,s)},v.WSt=function(t,s){return A.compare(this.height,t,s)},x.nm=function(t){const s=this.r4();s.Xp()!==t&&(s.nm(t),s.Dj())},v.nm=function(t){this.width=t},x.Kp=function(t){const s=this.r4();s.um()!==t&&(s.Kp(t),s.Dj())},v.Kp=function(t){this.height=t},x.jI=function(t,s){const i=l(this);i.Xp()===t&&i.um()===s||(i.jI(t,s),i.Dj())},v.jI=function(t,s){this.FP(t,s)},x.Xp=function(){return this.r4().Xp()},v.Xp=function(){return this.width},x.um=function(){return this.r4().um()},v.um=function(){return this.height},b.QSt=function(){return l(this).jj().pu()},b.JSt=function(){return l(this).jj().mu()},b.YSt=function(){return l(this).jj().gu()},b.VSt=function(){return l(this).jj().yu()},b.HSt=function(){const t=l(this).jj();return(t.pu()+t.gu())/2},b.qSt=function(){const t=l(this).jj();return(t.mu()+t.yu())/2},b.ZSt=function(t,s){return A.Mr(l(this).UP(),A.dr(s))<=A.dr(t)},b.XSt=function(t){return A.Sr(l(this).UP(),A.dr(t))},b.KSt=function(t,s){const i=A.dr(t),e=A.dr(s),h=l(this).UP(),r=!A.Sr(e,i);return r?!(!A.Sr(h,i)&&A.Sr(h,e)):A.Sr(h,i)&&!A.Sr(h,e)},x.BP=function(t){const s=this.r4(),i=A.cr(A.dr(t));isNaN(i)||s.UP()===i||(s.BP(i),s.Dj())},v.BP=function(t){this.Fj=t},b.$St=function(t){if(!isNaN(t)&&0!==t){const s=l(this);s.BP(s.UP()+A.dr(t)),s.Dj()}},b.tTt=function(t){if(!isNaN(t)&&0!==t){const s=l(this);s.BP(s.UP()-A.dr(t)),s.Dj()}},b.sTt=function(t,s){const i=l(this),e=i.UP(),h=A.wr(e,A.dr(s),A.dr(t));isNaN(h)||e===h||(i.BP(h),i.Dj())},b.iTt=function(t,s,i){const e=l(this),h=e.UP(),r=s-e.tT(),n=i-e.eT(),o=Math.atan2(n,r),a=A.wr(h,o,A.dr(t));isNaN(a)||h===a||(e.BP(a),e.Dj())},b.eTt=function(t,s){const i=l(this),e=i.UP(),h=t-i.tT(),r=s-i.eT(),n=Math.atan2(r,h);isNaN(n)||e===n||(i.BP(n),i.Dj())},x.UP=function(){return A.pr(this.r4().UP())},v.UP=function(){return this.Fj},b.hTt=function(t,s){return A.compare(A.Rr(100*l(this).p_(),6),t,s)},x.Nk=function(){return this.r4().Nk()},v.Nk=function(){return this.isVisible},b.Gk=function(t){const s=l(this);t=2===t?!s.Nk():0!==t,s.Nk()!==t&&(s.Gk(t),M.f4())},b.g_=function(t){const s=A.lr(t/100,0,1),i=l(this);if(i.L5()){if(i.Drt().rTt()===s)return}else if(i.p_()===s)return;i.g_(s),M.f4()},b.nTt=function(t){u.da(t);const s=l(this);s.Jj().ra(u)||(s.Yj(u),M.f4())},b.M_=function(){const t=l(this).Jj();return A.Fr(t.qo(),t.Zo(),t.Xo(),t.Ko())},b.p_=function(){return A.Rr(100*l(this).p_(),6)},b.oTt=function(t){return!!t&&l(this).n4()===t},b.aTt=function(i){const t=this.bP(),e=t.TP();if(!e.length)return!1;let s=e[0],h=s;for(let t=1,s=e.length;t<s;++t){const r=e[t],n=r.r4(),o=h.r4(),a=n.n4().oO(),u=o.n4().oO();0===i?(u<a||a===u&&n.o4()>o.o4())&&(h=r):(a<u||a===u&&n.o4()<o.o4())&&(h=r)}return t.cft(h),!0},x.uTt=function(t,s,i){const e=this.r4(),h=0===t?e.rT():e.kj();return A.compare(h,s,i)},v.uTt=function(t,s,i){const e=0===t?this.Jk:this.Pj;return A.compare(e,s,i)},x.lTt=function(){this.r4().Hj()},v.lTt=function(){this.Vj()},x.cTt=function(){this.r4().Zj()},v.cTt=function(){this.qj()},b.fTt=function(t){t&&l(this).Kj(t)},b.dTt=function(t,s){const i=0===t;if(s){const e=d(this),h=s.pTt(e);h&&e.r4().t5(h,i)}},x.nT=function(t){const s=this.r4();s.rT()!==t&&(s.nT(t),M.f4())},v.nT=function(t){this.Jk=t},b.mTt=function(){return l(this).n4().oO()},b.gTt=function(){return l(this).n4().Uc()},x.yTt=function(){return this.r4().o4()},v.yTt=function(){return this.zIndex},x.MTt=function(){return this.r4().rT()},v.MTt=function(){return this.Jk},x.wTt=function(){return this.r4().kj()},v.wTt=function(){return this.Pj},b.STt=function(t){const s=d(this),i=s.yF().OP().fht(t);if(i){const e=i.oO(),h=s.r4().Ej();return h.yz(e)}},b.TTt=function(t,s){const i=d(this),e=i.yF().OP().fht(s);if(e){const h=e.oO(),r=1===t,n=i.r4().Ej();n.yz(h)!==r&&(n.Mz(h,r),n.wz(),M.f4())}},b.bTt=function(t,s,i){const e=d(this),h=e.yF().OP().fht(t);if(h){s=Math.floor(s);const r=h.Yx().Hx(s);if(r){"color"===r?(u.da(i),i=u):"percent"===r&&(i/=100);const n=h.oO(),o=e.r4().Ej(),a=o.Tz(n,s,i);a&&o.yz(n)&&M.f4()}}},A.ir(A.Rect)),L=[],S=[],C=!1,G=null,I=!1,O=new Set;b.xTt=function(M){if(this.Zc.vTt())return function*(M){if(M){let t=this.Zc,s=t.pO(),e=t.FO(),i=e.XO(),h=e.e1t(),r=h.yF(),n=h.Awt(),o=h.Lwt(),a=i.b6(),u=t.ltt(),l=u-1,c=a.QO(),f=i.x6(c),d=n.get("collmemory"),p=(d||(d=A.ir(A.Wl),n.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Af().addEventListener("instancedestroy",t=>_(d,t.fz))),r.bP()),m=M.bP(),g=p.TP(),y=null;for(let t=0;t<g.length;++t){const w=g[t];m.Hct()?(s.CSt(w.r4().n4(),M,w.r4().jj(),L),y=L,s.CTt(w,M,y)):y=m.TP();for(let t=0;t<y.length;++t){const S=y[t];if(s.Z4(w,S)||s.GTt(w,S)){let t=D(d,w,S),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const T=!s||i<l;if(N(d,w,S,u),T){const b=c.T6(),x=(e.N6(b),r.bP()),v=M.bP();if(x.ift(!1),v.ift(!1),r===M){const C=x.eft();A.Dn(C),C.push(w),C.push(S),r.jgt()}else{const G=x.eft(),I=v.eft();A.Dn(G),A.Dn(I),G.push(w),I.push(S),r.jgt(),M.jgt()}yield*c._gt(a,f),e._6(b)}}else E(d,w,S)}A.Dn(L)}i.O6()}return!1}.call(this,M);if(M){let t=this.Zc,s=t.pO(),e=t.FO(),i=e.XO(),h=e.e1t(),r=h.yF(),n=h.Awt(),o=h.Lwt(),a=i.b6(),u=t.ltt(),l=u-1,c=a.QO(),f=i.x6(c),d=n.get("collmemory"),p=(d||(d=A.ir(A.Wl),n.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Af().addEventListener("instancedestroy",t=>_(d,t.fz))),r.bP()),m=M.bP(),g=p.TP(),y=null;for(let t=0;t<g.length;++t){const w=g[t];m.Hct()?(s.CSt(w.r4().n4(),M,w.r4().jj(),L),y=L,s.CTt(w,M,y)):y=m.TP();for(let t=0;t<y.length;++t){const S=y[t];if(s.Z4(w,S)||s.GTt(w,S)){let t=D(d,w,S),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const T=!s||i<l;if(N(d,w,S,u),T){const b=c.T6(),x=(e.N6(b),r.bP()),v=M.bP();if(x.ift(!1),v.ift(!1),r===M){const C=x.eft();A.Dn(C),C.push(w),C.push(S),r.jgt()}else{const G=x.eft(),I=v.eft();A.Dn(G),A.Dn(I),G.push(w),I.push(S),r.jgt(),M.jgt()}c.E6(a,f),e._6(b)}}else E(d,w,S)}A.Dn(L)}i.O6()}return!1},b.ITt=function(t){return e(d(this),t,0,0)},b.NTt=function(t,s,i){return e(d(this),t,s,i)},b.M5=function(){return l(this).M5()},b.i7=function(){return l(this).i7()},b.ETt=function(i,e){const t=this.bP(),h=t.TP();if(0===h.length)return!1;let s=i.bP(),r=s.TP();if(s.Hct()){const a=[...this.Zc._Tt(i)];0<a.length&&(r=r.concat(a))}if(0===r.length)return!1;const n=s.Hct()?null:new Set(r),o=new Set;for(let t=0,s=h.length;t<s;++t){const u=h[t];if(1===e)for(const l of u.a5())l.DTt(i)&&(null===n||n.has(l))&&o.add(l);else{let t;if(0===e){if(null===(t=u.r5()))continue}else t=u.o5();t.DTt(i)&&(null===n||n.has(t))&&o.add(t)}}return 0!==o.size&&(s.oft(o),i.jgt(),!0)},b.ATt=function(i,e){const t=this.bP(),h=t.TP();if(0===h.length)return!1;let s=i.bP(),r=s.TP();if(s.Hct()){const a=[...this.Zc._Tt(i)];0<a.length&&(r=r.concat(a))}if(0===r.length)return!1;const n=s.Hct()?null:new Set(r),o=new Set;for(let t=0,s=h.length;t<s;++t){const u=h[t];2!==e||u.i7()||!u.DTt(i)||null!==n&&!n.has(u)||o.add(u);for(const l of 0===e?u.children():u.d5())2===e&&l.i7()||l.DTt(i)&&(null===n||n.has(l))&&o.add(l)}return 0!==o.size&&(s.oft(o),i.jgt(),!0)},b.LTt=function(i,e,h){const t=this.bP(),r=t.TP();if(0===r.length)return!1;let s=i.bP(),n=s.TP();if(s.Hct()){const u=[...this.Zc._Tt(i)];0<u.length&&(n=n.concat(u))}if(0===n.length)return!1;const o=s.Hct()?null:new Set(n),a=[];for(let t=0,s=r.length;t<s;++t){const l=r[t];if(0===e){const c=l.f5(h);null!==c&&c.DTt(i)&&(null===o||o.has(c))&&a.push(c)}else if(1===e)for(const f of l.children())if(f.DTt(i)){if(0===h){null!==o&&!o.has(f)||a.push(f);break}--h}}return 0!==a.length&&(s.nft(a),i.jgt(),!0)},b.OTt=function(t,s,i){const e=d(this);switch(t){case 0:default:return A.compare(e.l5(),s,i);case 1:return A.compare(e.RTt(),s,i)}},b.m5=function(t,s,i,e,h,r,n,o,a,u){const l=d(this),c=M.r1t().yF();for(const f of t.PTt(l,c)){if(!f.lP().ZR())return;l.m5(f,{S5:s,b5:i,v5:e,G5:h,N5:r,A5:n,_5:o,O5:a,P5:u})}},b.g5=function(t){const s=d(this),i=M.r1t().yF();for(const e of t.PTt(s,i))s.g5(e)},b.kTt=function(){const t=d(this);if(t.M5()){const s=t.r5();s.g5(t)}},b.FTt=function(){return d(this).l5()},b.jTt=function(){return d(this).RTt()},b.zTt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=l(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.B5(),i.Dj()):i.j5(t,s)},b.W5=function(t,s,i,e,h,r,n,o){const a=l(this),u=a.W5(t,s,{mode:0===i?"absolute":"relative",x:e,y:h,Jk:r,u:n,v:o});u&&a.Dj()},b.BTt=function(){const t=l(this);return t.J5()?t.Y5().ET():0},b.UTt=function(){const t=l(this);return t.J5()?t.Y5()._T():0},b.WTt=function(t){const s=l(this);t=2===t?!s.Nk():0!==t,s.Nk()!==t&&s.Gk(t)},b.rz=function(t,s){this instanceof self.mF?this.jU(t,s):this.rz(t,s)},b.QTt=function(t,s){this instanceof self.mF?this.zU(t,""+s):this.QTt(t,""+s)},b.JTt=function(t){this instanceof self.mF?this.BU(t):this.JTt(t)},b.YTt=function(){this instanceof self.mF?this.PU():this.iz()},b.VTt=function(){this instanceof self.mF?this.kU():this.ez()},b.HTt=function(){return this instanceof self.mF?this.FU():this.HTt()},b.qTt=function(t){this instanceof self.mF?this._setEnabled(0!==t):this._SetEnabled(0!==t)},b.ZTt=function(){return this instanceof self.mF?this.eyt():this._IsEnabled()},x.XTt=function(t,s,i){return A.compare(this.EB().Srt(t),s,i)},v.XTt=function(t,s,i){return A.compare(h(this).Srt(t),s,i)},x.KTt=function(t){return!!this.EB().Srt(t)},v.KTt=function(t){return!!h(this).Srt(t)},b.$Tt=function(i,e){const t=this.bP(),h=t.TP();if(!h.length)return!1;let r=this.NY(),n=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t],u=r?a.yF().oMt(this.aMt()):0,l=a.Srt(u+e);(null===n||0===i&&l<o||1===i&&l>o)&&(o=l,n=a)}return t.cft(n),!0},b.t2t=function(t){return(this.Zc.e1t().Iwt()?r:s)(this,t)},b.lB=function(t){const s=new Set(A.Yn(t)),i=d(this).FF();return s.ne(i)},b.s2t=function(){return d(this).i2t()},b.e2t=function(){return d(this).FF().size},b.h2t=function(t){return d(this).r2t(t)},b.n2t=function(t,s){const i=A.Yn(s);if(0!==i.length){const e=d(this),h=new Set(e.FF());if(0===t)for(const r of i)h.add(r);else if(1===t)for(const n of i)h.delete(n);e.zF(h)}},b.o2t=function(){M.vF(d(this))},b.a2t=function(){return!0},b.u2t=function(){return!0},x.l2t=function(t,s){this.EB().Trt(t,s)},v.l2t=function(t,s){h(this).Trt(t,s)},x.c2t=function(t,s){const i=this.EB(),e=i.Srt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Trt(t,e+s)},v.c2t=function(t,s){const i=h(this),e=i.Srt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Trt(t,e+s)},x.f2t=function(t,s){const i=this.EB(),e=i.Srt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Trt(t,e-s))},v.f2t=function(t,s){const i=h(this),e=i.Srt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Trt(t,e-s))},x.d2t=function(t,s){this.EB().Trt(t,s?1:0)},v.d2t=function(t,s){h(this).Trt(t,s?1:0)},x.p2t=function(t){const s=this.EB();s.Trt(t,0===s.Srt(t)?1:0)},v.p2t=function(t){const s=h(this);s.Trt(t,0===s.Srt(t)?1:0)},b.m2t=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=d(this);M.g2t(),i.gZ("state"),i.pT(s,"state"),M.y2t("state",{M2t:!0})},b.w2t=function(){return JSON.stringify(d(this).dT("state"))},b.S2t=function(){return d(this).yF().Uc()},b.T2t=function(){let t=M.i1t().Uft(),s=t.vP();for(const i of M._Tt(t))++s;return s},b.b2t=function(){return M.i1t().Uft().bP().TP().length},x.J9=function(){return this.EB().J9()},v.J9=function(){return h(this).J9()},x.DF=function(){return this.EB().DF()},v.DF=function(){return h(this).DF()},b.Ndt=function(t){const s=d(this);return t.toLowerCase()===M.FO().Adt(s)},b.UF=function(t){const s=d(this);M.FO().UF(s,t)},b.x2t=function(t){return M.FO().hdt().v2t(this.bP().TP(),t),!0},b.C2t=function(){return d(this).LF()},A.G2t=function(t,s,i){const e=t[1],h=t[3],r=t[4],n=t[5],o=t[6],a=t[7],u=t[8],l=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.z9,M=s.Aht,w=s.Lht,S=Object.assign({},b,2<=i?v:x);h&&(y.ESt=S.ESt,y._St=S._St,y.DSt=S.DSt,y.ASt=S.ASt,y.LSt=S.LSt,M.sT=S.sT,M.hT=S.hT,M.OSt=S.OSt,M.PSt=S.PSt,M.FSt=S.FSt,M.BSt=S.BSt,w.I2t=S.tT,w.N2t=S.eT,w.r3=S.n3),r&&(y.USt=S.USt,y.WSt=S.WSt,M.nm=S.nm,M.Kp=S.Kp,M.jI=S.jI,w.E2t=S.Xp,w._2t=S.um,w.D2t=S.QSt,w.A2t=S.JSt,w.L2t=S.YSt,w.O2t=S.VSt,w.R2t=S.HSt,w.P2t=S.qSt),n&&(y.k2t=S.ZSt,y.F2t=S.XSt,y.KSt=S.KSt,M.BP=S.BP,M.$St=S.$St,M.tTt=S.tTt,M.sTt=S.sTt,M.iTt=S.iTt,M.eTt=S.eTt,w.j2t=S.UP),o&&(y.Nk=S.Nk,y.hTt=S.hTt,M.Gk=S.Gk,M.g_=S.g_,M.nTt=S.nTt,w.Opacity=S.p_,w.z2t=S.M_),a&&(y.oTt=S.oTt,y.aTt=S.aTt,y.uTt=S.uTt,M.lTt=S.lTt,M.cTt=S.cTt,M.fTt=S.fTt,M.dTt=S.dTt,M.nT=S.nT,w.mTt=S.mTt,w.gTt=S.gTt,w.yTt=S.yTt,w.MTt=S.MTt,w.wTt=S.wTt),u&&(y.STt=S.STt,M.TTt=S.TTt,M.bTt=S.bTt),d&&(y.M5=S.M5,y.i7=S.i7,y.ETt=S.ETt,y.ATt=S.ATt,y.LTt=S.LTt,y.OTt=S.OTt,M.m5=S.m5,M.g5=S.g5,M.kTt=S.kTt,w.FTt=S.FTt,w.jTt=S.jTt),p&&(M.zTt=S.zTt,M.W5=S.W5,w.BTt=S.BTt,w.UTt=S.UTt),l&&(y.Nk=S.Nk,M.Gk=S.WTt,M.B2t=S.rz,M.U2t=S.QTt,M.W2t=S.JTt),c&&(y.Q2t=S.HTt,M.J2t=S.YTt,M.Y2t=S.VTt),f&&(y.Ul=S.ZTt,M.V2t=S.qTt),m&&(y.xTt=S.xTt,y.ITt=S.ITt,y.NTt=S.NTt,s.H2t=T),e||(y.XTt=S.XTt,y.KTt=S.KTt,y.$Tt=S.$Tt,y.t2t=S.t2t,y.lB=S.lB,M.l2t=S.l2t,M.c2t=S.c2t,M.f2t=S.f2t,M.d2t=S.d2t,M.p2t=S.p2t,M.n2t=S.n2t,y.a2t=S.a2t,y.u2t=S.u2t,M.o2t=S.o2t,M.m2t||(M.m2t=S.m2t),w.w2t||(w.w2t=S.w2t),w.T2t=S.T2t,w.b2t=S.b2t,w.q2t=S.J9,w.Z2t=S.DF,w.S2t=S.S2t,w.s2t=S.s2t,w.e2t=S.e2t,w.h2t=S.h2t,y.Ndt=S.Ndt,M.UF=S.UF,M.x2t=S.x2t),g&&(w.C2t=S.C2t)}}{const Zo=self.Os;Zo.rdt=class extends Zo.Kh{constructor(t){super(),this.pft=t,this.rf="",this.zA=-1,this.X2t="",this.K2t=!1,this.$2t=null,this.xft=0,this.Xpt=[],this.Eft=null,this.tbt=new Map,this.sbt=null,this.ibt=null,this.ebt=-1,this.iyt=null,this.hbt=null,this.rbt=!1}er(){this.rf="",this.zA=-1,this.X2t="",this.$2t=null,this.ibt=null,this.iyt=null,this.hbt=null,this.ebt=-1,Zo.Dn(this.Xpt),this.Eft&&(this.Eft.clear(),this.Eft=null);for(const t of this.tbt.values())t.er();this.tbt.clear(),this.sbt=null}$S(){const t=this.pft,s=t.I4().IY(),i=t.i1t(),e=(this.$2t=i.QO(),this.xft=i.Rft()+1,t.Zdt(this.$2t));e&&(this.ibt=e,this.iyt=e.wyt(),this.hbt=e.Myt().map(t=>t.iet()),e.xgt())&&(this.ebt=e.xyt());for(const r of s){const n=r.bP();n.Hct()&&!this.$2t.Vmt(r)||(this.Xpt.push(r),this.tbt.set(r,Zo.ir(Zo.nbt,n)))}const h=t.JO();this.Eft=0<h.size?h:null}obt(t){this.rf="timer",this.$S(),this.zA=this.pft.I4().l3()+t}abt(t){this.rf="signal",this.$S(),this.X2t=t.toLowerCase()}v2t(t,s){this.rf="instance-signals",this.$S(),this.X2t=s.toLowerCase(),this.sbt=new Set(t)}ubt(t){this.rf="promise",this.$S(),t.then(()=>this.vdt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.vdt()})}lbt(){return"timer"===this.rf}bdt(){return"signal"===this.rf}_dt(){return"instance-signals"===this.rf}Ydt(){return"promise"===this.rf}xdt(){return this.X2t}cbt(){return this.K2t}vdt(){this.K2t=!0}Ddt(t){this.sbt.delete(t),0===this.sbt.size&&this.vdt()}adt(){return this.lbt()?this.zA<=this.pft.I4().l3():this.cbt()}fbt(t){t._ft(this.$2t,this.xft);for(const[i,e]of this.tbt.entries()){const h=i.bP();e._ft(h)}this.Eft&&t.Hft([...this.Eft]);const s=this.ibt;s&&(s.Ogt(this.iyt),s.Myt().map((t,s)=>t.zet(this.hbt[s])),s.xgt())&&s.vyt(this.ebt)}udt(t){this.fbt(t),this.$2t.vgt(t),this.ibt&&this.ibt.xgt()&&this.ibt.Qgt(this.ebt),this.pft.tdt(this.Xpt),this.rbt=!0}async ddt(t){this.fbt(t);for(const s of this.$2t.Cgt(t))await this.pft.I4().k1t(s);this.ibt&&this.ibt.xgt()&&this.ibt.Qgt(this.ebt),this.pft.tdt(this.Xpt),this.rbt=!0}ldt(){return this.rbt}Wct(t){for(const s of this.tbt.values())s.Wct(t);if("instance-signals"===this.rf){for(const i of t)this.sbt.delete(i);0===this.sbt.size&&this.vdt()}}KH(){const t={},s={wt:this.rf,t:this.zA,st:this.X2t,s:this.K2t,ev:this.$2t.PY(),sm:this.Xpt.map(t=>t.PY()),dsm:this.Eft?[...this.Eft].map(t=>t.PY()):null,sols:t};this.$2t.cgt(this.xft)&&(s.act=this.$2t.n1t(this.xft).PY());for(const[i,e]of this.tbt)t[i.PY().toString()]=e.KH();return"instance-signals"===this.rf&&(s.pi=[...this.sbt].map(t=>t.DF())),s}static Vdt(t,s){const i=t.I4(),e=t.m1t(s.ev);if(!e)return null;let h=0;if(s.hasOwnProperty("act")){const n=t.y1t(s.act);if(!n)return null;h=n.oO()}const r=Zo.ir(Zo.rdt,t);r.zA=s.t,s.hasOwnProperty("wt")?r.rf=s.wt:r.rf=-1===r.zA?"signal":"timer",r.X2t=s.st,r.K2t=s.s,r.$2t=e,r.xft=h;for(const o of s.sm){const a=i.p6(o);a&&r.Xpt.push(a)}if(Array.isArray(s.dsm))for(const u of s.dsm){const l=i.p6(u);l&&(r.Eft||(r.Eft=new Set),r.Eft.add(l))}for(const[c,f]of Object.entries(s.sols)){const d=parseInt(c,10),p=i.p6(d);if(p){const m=Zo.ir(Zo.nbt,null);m.$H(t,f),r.tbt.set(p,m)}}if("instance-signals"===r.rf){r.sbt=new Set;for(const g of s.pi){const y=i.t4(g);y&&r.sbt.add(y)}}return r}}}{const Xo=self.Os;Xo.nbt=class extends Xo.Kh{constructor(t){super(),this.Pct=null,this.dbt=!0,this.x8=[],t&&(this.Pct=t.yF(),this.dbt=t.Hct(),Xo.Rn(this.x8,t.eft()))}er(){this.Pct=null,Xo.Dn(this.x8)}_ft(t){t.ift(this.dbt),Xo.Rn(t.eft(),this.x8)}Wct(t){Xo.zn(this.x8,t)}KH(){return{sa:this.dbt,insts:this.x8.map(t=>t.DF())}}$H(t,s){const i=t.I4();this.dbt=!!s.sa,Xo.Dn(this.x8);for(const e of s.insts){const h=i.t4(e);h&&this.x8.push(h)}}}}{let u=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};u;const Ko=self.Os;Ko.pbt=class extends Ko.Kh{constructor(t){super(),this.Zc=t.runtime,this.mbt=!!t.kR,this.gbt=!!t.ybt,this.Mbt=!!t.WR,this.wbt=!!t.Sbt,this.Tbt=!!t.JR,this.bbt=!!t.xbt,this.vbt=!!t.KR,this.Cbt=!!t.BR,this.Gbt=!!t.VR,this.Ibt=t.Nbt,this.Ebt=null,this._bt=new Map,this.Dbt=new Map,this.Abt=new Map,this.Lbt=new Map,this.Obt=t.Rbt,this.Pbt=null}er(){this.Zc=null}I4(){return this.Zc}kbt(){}Edt(){return(2<=this.Gwt()?this.Pbt:this).constructor}Gwt(){return this.Ibt}Fbt(t=!1){let s=this.Obt;return t&&"function"!=typeof s&&2<=this.Gwt()?globalThis.PB:s}FR(){return this.mbt}zR(){return this.gbt}UR(){return this.Cbt}HR(){return this.Gbt}QR(){return this.Mbt}NS(){return this.wbt}YR(){return this.Tbt}ZR(){return this.bbt}$R(){return this.vbt}qyt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this._bt.get(t);return i||(i=t.bind(s),this._bt.set(t,i)),i}bwt(t,s,i){if(!s)throw new Error("missing 'this' binding");let e=u(this.Dbt,t),h=e.get(i);return h||(h=t.bind(s,i),e.set(i,h)),h}xwt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");let h=u(this.Abt,t),r=u(h,i),n=r.get(e);return n||(n=t.bind(s,i,e),r.set(e,n)),n}vwt(t,s,i,e,h){if(!s)throw new Error("missing 'this' binding");let r=u(this.Lbt,t),n=u(r,i),o=u(n,e),a=o.get(h);return a||(a=t.bind(s,i,e,h),o.set(h,a)),a}jbt(t){if(!this.FR())throw new Error("must be single-global plugin");this.Ebt=t}rP(){if(this.FR())return this.Ebt;throw new Error("must be single-global plugin")}oP(){if(this.FR())return this.Ebt.oP();throw new Error("must be single-global plugin")}zbt(){const t=this.Gwt(),s=(Ko.RR.Bbt(this,t),this.Fbt(!0));if(s){if(this.Pbt=new s,!(this.Pbt instanceof self.AR))throw new TypeError("plugin class must derive from IPlugin")}else this.Pbt=new self.AR;Ko.RR.Ubt(t)}iP(){return this.Pbt}}}{const $o=self.Os;$o.Wbt=class extends $o.pbt{constructor(t,s){super(t),this.Qbt=s,this.Jbt=0,this.Ybt=new Map,this.Vbt("elem-focused",t=>t.Hbt()),this.Vbt("elem-blurred",t=>{t&&t.qbt()})}er(){super.er()}Zbt(t){const s=this.Jbt++;return this.Ybt.set(s,t),s}Xbt(t){this.Ybt.delete(t)}Vbt(t,i){this.Zc.nj(this.Qbt,t,t=>{const s=this.Ybt.get(t.elementId);i(s,t)})}}}{const ta=self.Os;ta.Kbt=class extends ta.Kh{constructor(t){super(),this.Pct=t,this.Zc=t.I4(),this.$bt=t.lP()}er(){this.Pct=null,this.Zc=null,this.$bt=null}yF(){return this.Pct}I4(){return this.Zc}lP(){return this.$bt}jz(){return this.Pct.jz()}kbt(){}Fwt(t){}xSt(t){}vSt(t){}l9(t){}g9(){}d9(){}P9(t){}txt(){}Fbt(){return null}sxt(t,s,i){const e=ta.ir(ta.Event,t,s);e.ixt=this,i&&Object.assign(e,i),this.yF().Sq(e)}}}{const sa=self.Os;sa.hxt=class extends sa.Kh{constructor(t,s){super(),this.Si=t,this.Qbt=s,this.rxt=null,this.Zc=t.I4(),this.Pct=this.Si.yF(),this.nxt=this.Pct.bSt(),this.rZ=null,this.oZ=null,this.fj=!1,this.pj=!1,this.l0=null,this.uI=!1}er(){this.uI=!0,this.oxt(),this.axt(),this.rZ=null,this.oZ=null,this.l0&&(this.l0.er(),this.l0=null),this.Si=null,this.Zc=null,this.Pct=null,this.nxt=null}hr(){return this.uI}EB(){return this.Si}I4(){return this.Zc}yF(){return this.Pct}lP(){return this.nxt.lP()}bSt(){return this.nxt}uxt(){return this.Si.s4()}ij(t){return this.Zc.ij(t,this.Si,null)}lxt(t){return this.Zc.lxt(t,this.Si,null)}hj(t){return this.Zc.hj(t,this.Si,null)}cxt(t,s){return this.Zc.cxt(t,this.Si,s)}fxt(t,s){return this.Zc.fxt(t,this.Si,s)}dxt(t){return this.Zc.dxt(t)}pxt(t,s){this.Zc.nj(this.Qbt,t,s)}mxt(t){for(const[s,i]of t)this.pxt(s,i)}gxt(t,s){this.Zc.$c(this.Qbt,t,s)}yxt(t,s){return this.Zc.m4(this.Qbt,t,s)}Mxt(t,s){if(!this.Zc.bO())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.Qbt,handler:t,data:s,responseId:null});this.gxt(t,s)}wxt(t){if(!t)throw new Error("cannot set empty component id");this.rxt=t}Sxt(){if(this.rxt)return this.Zc.wj(this.rxt);throw new Error("wrapper extension component id not set")}Tj(t,s){if(!this.rxt)throw new Error("wrapper extension component id not set");this.Zc.Tj(this.rxt,t,s)}Txt(t){for(const[s,i]of t)this.Tj(s,i)}h6(t,s){if(!this.rxt)throw new Error("wrapper extension component id not set");this.Zc.h6(this.rxt,t,s)}r6(t,s){if(this.rxt)return this.Zc.r6(this.rxt,t,s);throw new Error("wrapper extension component id not set")}mX(){}bxt(){}xxt(){this.fj||(this.rZ||(this.rZ=()=>this.mX()),this.Zc.Af().addEventListener("tick",this.rZ),this.fj=!0)}oxt(){this.fj&&(this.Zc.Af().removeEventListener("tick",this.rZ),this.fj=!1)}vxt(){return this.fj}Cxt(){this.pj||(this.oZ||(this.oZ=()=>this.bxt()),this.Zc.Af().addEventListener("tick2",this.oZ),this.pj=!0)}axt(){this.pj&&(this.Zc.Af().removeEventListener("tick2",this.oZ),this.pj=!1)}Gxt(){return this.pj}Ixt(){return[]}dT(){return null}pT(t){}crt(t){}yrt(t,s){}cnt(t,s,i){if(0!==s){const e=this.crt(t);if("number"!=typeof e)throw new Error("expected number");this.yrt(t,e+s,i)}}Nxt(t,s,i,e){}Ext(t,...s){t.call(this,...s)}_xt(t,...s){return t.call(this,...s)}Fbt(){return null}sxt(t,s,i){if(this.Si.Dxt()){const e=this.uxt(),h=sa.ir(sa.Event,t,s);h.fz=e,i&&Object.assign(h,i),e.dispatchEvent(h)}}NS(){return!1}}}{const ia=self.Os;ia.Axt=class extends ia.hxt{constructor(t,s){super(t,s),this.ust=t.r4(),this.Lxt=null,this.Oxt=null}er(){if(this.Lxt){const t=this.Zc.Af();t.removeEventListener("renderercontextlost",this.Lxt),t.removeEventListener("renderercontextrestored",this.Oxt),this.Lxt=null,this.Oxt=null}this.ust=null,super.er()}Rxt(){this.Pxt()}kxt(){}Fxt(){}Pxt(){if(!this.Lxt){this.Lxt=()=>this.m8(),this.Oxt=()=>this.jxt();const t=this.Zc.Af();t.addEventListener("renderercontextlost",this.Lxt),t.addEventListener("renderercontextrestored",this.Oxt)}}m8(){this.kxt()}jxt(){this.Fxt()}r4(){return this.ust}$st(){return!1}Kst(){if(!this.$st())throw new Error("original size not known");const t=this.zxt();if(t)return t.Xp()}sit(){if(!this.$st())throw new Error("original size not known");const t=this.zxt();if(t)return t.um()}zxt(){return null}Bxt(){const t=this.zxt();if(t){const s=t.wb();if(s)return[s.Xp(),s.um()]}return[100,100]}Uxt(){const t=this.zxt();return t?t.gN():null}Wxt(){const t=this.zxt();return t?t.Qxt():null}Jxt(){const t=this.zxt();return!!t&&t.Yxt()}kSt(t){const s=this.Si.r4();return[s.tT(),s.eT(),s.kj()]}txt(t,s,i){}Vxt(t,s){}_H(){return!0}}}{const ea=self.Os,ha=ea.ir(ea.Rect);ea.Hxt=class extends ea.Axt{constructor(t,s){super(t,s),this.qxt=this.lP().Zbt(this),this.Zxt=!0,this.Xxt=!1,this.Kxt=!1,this.$xt=-.2,this.tvt=ea.ir(ea.Rect,0,0,-1,-1);const i=this.Zc.MR();this.svt=i.SU(),this.ivt=i.TU(),this.evt=-1,this.hvt=-1,this.rvt=!1,this.xxt()}er(){this.lP().Xbt(this.qxt),this.nvt("destroy"),this.qxt=-1,super.er()}K5(){if(this.Zc.bO())throw new Error("not valid in worker mode");return this.ovt("get-element")}nvt(t,s){(s=s||{}).elementId=this.qxt,this.gxt(t,s)}ovt(t,s){return(s=s||{}).elementId=this.qxt,this.Mxt(t,s)}avt(t,s){return(s=s||{}).elementId=this.qxt,this.yxt(t,s)}uvt(t){t=t||{};const s=this.r4();t.elementId=this.qxt,t.isVisible=s.Nk(),t.htmlIndex=s.n4().IU(),t.htmlZIndex=s.NU(),Object.assign(t,this.lvt()),this.Zxt=!!t.isVisible,this.Mxt("create",t),this.cvt(!0)}WTt(t){this.Zxt!==(t=!!t)&&(this.Zxt=t,this.nvt("set-visible",{isVisible:t}))}mX(){this.cvt(!1)}fvt(){const t=this.Zc.MR().LU();return"Android"===ea.hi.ri&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}cvt(l){if(!this.EB().OU()){let t=this.r4(),s=t.n4(),i=t.jj(),[e,h]=s.aF(i.pu(),i.mu()),[r,n]=s.aF(i.gu(),i.yu()),o=this.Zc.MR(),a=o.bR(),u=o.vR();if(t.Nk()&&s.Nk())if(!this.fvt()&&(r<=0||n<=0||a<=e||u<=h))this.WTt(!1);else{ha.set(e,h,r,n);const c=o.SU(),f=o.TU(),d=s.IU(),p=t.NU();if(!l&&ha.equals(this.tvt)&&this.svt===c&&this.ivt===f&&this.evt===d&&this.hvt===p)this.WTt(!0);else{this.tvt.C(ha),this.svt=c,this.ivt=f,this.evt=d,this.hvt=p,this.WTt(!0);let t=null;this.Kxt&&(t=s.RU()+this.$xt),this.nvt("update-position",{left:Math.round(this.tvt.pu()),top:Math.round(this.tvt.mu()),width:Math.round(this.tvt.width()),height:Math.round(this.tvt.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this.WTt(!1)}}iz(){this.ovt("focus",{focus:!0})}ez(){this.ovt("focus",{focus:!1})}Hbt(){this.Xxt=!0}qbt(){this.Xxt=!1}HTt(){return this.Xxt}rz(t,s){this.nvt("set-css-style",{prop:ea.Ao(t),val:s})}QTt(t,s){this.nvt("set-attribute",{name:t,val:s})}JTt(t){this.nvt("remove-attribute",{name:t})}dvt(){this.rvt||(this.rvt=!0,Promise.resolve().then(()=>{this.rvt=!1,this.nvt("update-state",this.lvt())}))}lvt(){}pvt(){return this.qxt}}}{const ra=self.Os,na=self.mz;ra.mvt=class extends ra.Kh{constructor(t){super(),this.Zc=t.runtime,this.gvt=ra.ir(ra.Xl),this.yvt=ra.ir(ra.Xl),this.Ibt=t.Nbt,this.Obt=t.Rbt,this.Mvt=null}er(){this.yvt.er(),this.gvt.er(),this.Zc=null}I4(){return this.Zc}kbt(){}Gwt(){return this.Ibt}Fbt(t=!1){let s=this.Obt;return t&&"function"!=typeof s&&2<=this.Gwt()?globalThis.QU:s}wvt(t){this.gvt.sc(t)}BZ(){return this.gvt.ic()}mY(t){this.yvt.sc(t)}MY(t){this.yvt.Vl(t)}TP(){return this.yvt.ic()}zbt(){const t=this.Gwt(),s=(ra.RR.Bbt(this,t),this.Fbt(!0));if(s){if(this.Mvt=new s,!(this.Mvt instanceof na))throw new TypeError("behavior class must derive from IBehavior")}else this.Mvt=new na;ra.RR.Ubt(t)}oz(){return this.Mvt}}}{const oa=self.Os;oa.Svt=class extends oa.Kh{constructor(t){super(),this.Zc=t.I4(),this.lMt=t,this.Pct=t.yF(),this.Tvt=t.az(),this.Tvt.wvt(this.Pct)}er(){this.Zc=null,this.lMt=null,this.Pct=null,this.Tvt=null}kbt(){}cz(){return this.lMt}yF(){return this.Pct}I4(){return this.Zc}az(){return this.Tvt}}}{const aa=self.Os;aa.bvt=class extends aa.Kh{constructor(t,s){super(),this.xvt=t,this.Qbt=s,this.Si=t.dz(),this.Zc=t.I4(),this.lMt=t.cz(),this.nxt=this.lMt.bSt(),this.fj=!1,this.pj=!1,this.i6=!1,this.l0=null}er(){this.oxt(),this.axt(),this.vvt(),this.l0&&(this.l0.er(),this.l0=null),this.xvt=null,this.Si=null,this.Zc=null,this.lMt=null,this.nxt=null}az(){return this.lMt.az()}Cvt(){return this.xvt}dz(){return this.Si}yF(){return this.Si.yF()}r4(){return this.Si.r4()}I4(){return this.Zc}cz(){return this.lMt}bSt(){return this.nxt}uxt(){return this.xvt.uxt()}ij(t){return this.Zc.ij(t,this.Si,this.lMt)}lxt(t){return this.Zc.lxt(t,this.Si,this.lMt)}hj(t){return this.Zc.hj(t,this.Si,this.lMt)}Gvt(){}mX(){}bxt(){}Ivt(){}xxt(){this.fj||(this.Zc.ZU(this),this.fj=!0)}oxt(){this.fj&&(this.Zc.XU(this),this.fj=!1)}vxt(){return this.fj}Cxt(){this.pj||(this.Zc.KU(this),this.pj=!0)}axt(){this.pj&&(this.Zc.$U(this),this.pj=!1)}Gxt(){return this.pj}Nvt(){this.i6||(this.Zc.t6(this),this.i6=!0)}vvt(){this.i6&&(this.Zc.s6(this),this.i6=!1)}Evt(){return this.i6}Ixt(){return[]}pxt(t,s){this.Zc.nj(this.Qbt,t,s)}_vt(t,s){}dT(){return null}pT(t){}crt(t){}yrt(t,s){}cnt(t,s){if(0!==s){const i=this.crt(t);if("number"!=typeof i)throw new Error("expected number");this.yrt(t,i+s)}}Nxt(t,s,i,e){}Ext(t,...s){t.call(this,...s)}_xt(t,...s){return t.call(this,...s)}Fbt(){return null}sxt(t,s,i){if(this.xvt.Dxt()){const e=this.uxt(),h=aa.ir(aa.Event,t,s);h.Dvt=e,h.fz=e.fz,i&&Object.assign(h,i),e.dispatchEvent(h)}}}}{let s=function(t){if(t!==i)throw new Error("invalid internal API token")},r=(s,self.Os),i=(r.U9={},r.wat={},r.Rs()),e=[],h=[],n=[],o=null,a=null,t=null,u=null,l=new Map,c=new Map;r.RR=class extends r.Kh{constructor(t,s){super(),this.Zc=t,this.Avt=[],this.Qyt=null,this.Lvt=[],this.Ovt=new Map,this.Rvt=null,this.Pvt=null,this.kvt=new Set(s)}Fvt(t){const s=t[19],i=this.Zc.Hgt(t[0]);if(!i)throw new Error("missing plugin");r.G2t(t,i,s);const e=2<=s?r.pbt:i,h=r.ir(e,{runtime:this.Zc,kR:t[1],ybt:t[2],WR:t[5],JR:t[8],Sbt:t[9],xbt:t[13],KR:t[14],BR:t[17],VR:t[18],Nbt:s,Rbt:2<=s?i:null});h.kbt(),this.Avt.push(h),l.set(i,h)}jvt(){this.Qyt=r.ir(r.U9.B9,{runtime:this.Zc,kR:!0}),this.Qyt.kbt()}zvt(t){const i=t[1],e=this.Zc.Hgt(t[0]);if(!e)throw new Error("missing behavior");this.Ovt.set(e,()=>{const t=2<=i?r.mvt:e,s=r.ir(t,{runtime:this.Zc,Nbt:i,Rbt:2<=i?e:null});s.kbt(),this.Lvt.push(s),c.set(e,s),!this.Rvt&&r.wat.solid&&s instanceof r.wat.solid?this.Rvt=s:!this.Pvt&&r.wat.jumpthru&&s instanceof r.wat.jumpthru&&(this.Pvt=s),s.zbt()})}Bvt(t){const s=this.Ovt.get(t);s&&(s(),this.Ovt.delete(t))}static Bbt(t,s=1){if(r.RR.Bbt!==o)throw new Error("invalid method");1===s&&e.push(t),h.push(t)}static Ubt(t=1){if(r.RR.Ubt!==a)throw new Error("invalid method");1===t&&e.pop(),h.pop()}static TF(){if(r.RR.TF!==t)throw new Error("invalid method");if(0===e.length)throw new Error("no init object set");return e.at(-1)}static OR(t){if(r.RR.OR!==u)throw new Error("invalid method");if(s(t),0===h.length)throw new Error("no init object set");return h.at(-1)}static Uvt(t){n.push(t)}static Wvt(){n.pop()}static tj(){if(0===n.length)throw new Error("no init properties set");return n.at(-1)}Qvt(){for(const t of this.Avt)t.zbt()}static sP(t){return l.get(t)||null}static gz(t){return c.get(t)||null}Jyt(){return this.Qyt}Jvt(){return this.Rvt}Yvt(){return this.Pvt}wj(t){return this.kvt.has(t)}},o=r.RR.Bbt,a=r.RR.Ubt,t=r.RR.TF,u=r.RR.OR}{const ua=self.Os,la=new Set;ua.Vvt=class extends ua.Kh{constructor(){super(),this.Hvt=0,this.h8="",this.r8=0,this.qvt=0,this.Zvt=0,this.Fm=0,this.jm=0,this.Xvt=!1,this.Kvt=!1,this.$vt=null,this.tCt="",this.eI=ua.ir(ua.Rect),this.sCt=ua.ir(ua.Qu),this.iCt="",this.eCt=new self.C4(this),la.add(this)}er(){this.nI(),this.$vt&&0===this.$vt.M8()&&this.$vt.er(),this.$vt=null,la.delete(this),this.hCt()}static m8(){for(const t of la)t.tCt="",t.eI.set(0,0,0,0),t.sCt.cl(t.eI)}rCt(t){this.h8=t[0],this.r8=t[1],this.qvt=t[2],this.Zvt=t[3],this.Fm=t[4],this.jm=t[5],this.Xvt=t[6],this.Kvt=!0}nCt(t,s){if(this.$vt)throw new Error("already loaded asset");this.h8=s;const i={};return ua.uo(s)&&(i.LQ="remote"),this.G4(t,i),this.$vt.PQ()}oCt(t,s){if(this.$vt)throw new Error("already loaded asset");this.h8="",this.r8=s.size,this.$vt=ua.ir(ua.OQ,t.cO(),{blob:s,size:this.r8,LQ:"local"})}aCt(t){if(t===this)throw new Error("cannot replace with self");this.Hvt++,this.nI(),this.h8=t.h8,this.r8=t.r8,this.qvt=t.qvt,this.Zvt=t.Zvt,this.Fm=t.Fm,this.jm=t.jm,this.Xvt=t.Xvt,this.Kvt=t.Kvt,this.$vt=t.$vt,this.tCt=t.tCt,this.eI=t.eI,this.sCt=t.sCt,this.hCt()}RQ(){return this.h8}ql(){return this.r8}uCt(){return this.qvt}lCt(){return this.Zvt}Yxt(){return this.Xvt}Xp(){return this.Fm}um(){return this.jm}cCt(){return this.$vt.Xp()}fCt(){return this.$vt.um()}G4(t,s){if(this.$vt)throw new Error("already got asset");s=Object.assign({},s,{url:this.RQ(),size:this.ql()}),this.$vt=t.AQ(s)}u8(){return this.$vt&&this.$vt.u8()}async dW(t,s){if(!this.$vt)throw new Error("no asset");if(this.tCt)throw new Error("already loaded texture");const i=this.Hvt,e=(this.tCt="loading",await this.$vt.dW(t,s));if(this.Hvt!==i)return null;if(!e)return this.tCt="",null;this.tCt="loaded",this.Kvt||(this.Fm=e.Xp(),this.jm=e.um(),this.Kvt=!0);const h=this.Xvt?this.jm:this.Fm,r=this.Xvt?this.Fm:this.jm;return this.eI.set(this.qvt,this.Zvt,this.qvt+h,this.Zvt+r),this.eI.Ct(e.Xp(),e.um()),this.sCt.cl(this.eI),this.Xvt&&this.sCt.yl(),e}nI(){this.tCt&&(this.$vt&&this.$vt.nI(),this.tCt="",this.eI.set(0,0,0,0),this.sCt.cl(this.eI))}wb(){return this.$vt&&"loaded"===this.tCt?this.$vt.wb():null}gN(){return this.eI}Qxt(){return this.sCt}ZB(){return this.eCt}dCt(){return this.$vt}async pCt(t){t=t||await this.$vt.w8();const s=ua.xo(this.Fm,this.jm),i=s.getContext("2d");return this.Xvt?(i.rotate(Math.PI/-2),i.translate(-this.jm,0),i.drawImage(t,this.qvt,this.Zvt,this.jm,this.Fm,0,0,this.jm,this.Fm)):i.drawImage(t,this.qvt,this.Zvt,this.Fm,this.jm,0,0,this.Fm,this.jm),s}async mCt(t){if(!this.iCt){const s=await this.pCt(t),i=await ua.vo(s);this.iCt=URL.createObjectURL(i)}return this.iCt}hCt(){this.iCt&&(URL.revokeObjectURL(this.iCt),this.iCt="")}}}{const ca=self.Os;ca.gCt=class extends ca.Kh{constructor(t){super(),this.nr=t[0],this.yCt=t[1],this.swt=!!t[2],this.Bnt=t[3],this.MCt=t[4],this.wCt=!!t[5],this.eJ=t[6],this.SCt=t[7].map(t=>ca.ir(ca.TCt,t)),this.bCt=new self.bz(this)}static xCt(t,s){const i=ca.ir(ca.gCt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.SCt.push(ca.TCt.xCt(t)),i}er(){for(const t of this.SCt)t.er();ca.Dn(this.SCt)}vCt(t){for(const s of this.SCt)s.jz().G4(t)}CCt(s,i){return Promise.all(this.SCt.map(t=>t.jz().dW(s,i)))}GCt(){for(const t of this.SCt)t.jz().nI()}Uc(){return this.nr}PY(){return this.eJ}Dz(){return this.SCt.length}Lz(){return this.SCt}ICt(t){if((t=Math.floor(t))<0||t>=this.SCt.length)throw new RangeError("invalid frame");return this.SCt[t]}NCt(t,s){(s=Math.floor(s))<0?this.SCt.unshift(t):s>=this.SCt.length?this.SCt.push(t):this.SCt.splice(s,0,t)}ECt(t){if((t=Math.floor(t))<0||t>=this.SCt.length)throw new RangeError("invalid frame");this.SCt[t].er(),this.SCt.splice(t,1)}_Ct(i){for(let t=0,s=this.SCt.length;t<s;++t)if(ca.dh(this.SCt[t].rB(),i))return t;return-1}DCt(t){if("string"!=typeof t)return t;{const s=this._Ct(t);if(-1===s)throw new Error("cannot find animation frame with tag "+t);return s}}xz(){return this.yCt}Cz(){return this.swt}Gz(){return this.Bnt}Nz(){return this.MCt}_z(){return this.wCt}ACt(){return this.bCt}}}{const fa=self.Os,da=(()=>{const i=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),e=new Uint8Array(i.length);for(let t=0,s=i.length;t<s;++t)e[t]=i.charCodeAt(t);return new Blob([e],{type:"image/png"})})();fa.TCt=class extends fa.Kh{constructor(t){super(),this.LCt=fa.ir(fa.Vvt),this.LCt.rCt(t),this.OCt=t[7],this.RCt=fa.ir(fa.Qa,t[8],t[9]),this.PCt=t[10].map(t=>fa.ir(fa.kCt,this,t)),this.FCt=new Map;for(const i of this.PCt)this.FCt.set(i.Uc().toLowerCase(),i);this.jCt=null;const s=t[11];6<=s.length&&(this.jCt=fa.ir(fa.vl,s)),this.jg=t[12]||"",this.zCt=new self.Fz(this)}static xCt(t){const s=fa.ir(fa.TCt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.LCt.oCt(t,da),s}er(){this.jCt&&(this.jCt.er(),this.jCt=null),this.LCt.er(),this.LCt=null}jz(){return this.LCt}zz(){return this.OCt}Uz(){return this.RCt.qa()}Qz(){return this.RCt.Xa()}sB(){return this.jCt}$z(t){return this.FCt.get(t.toLowerCase())||null}Kz(t){return(t=Math.floor(t))<0||t>=this.PCt.length?null:this.PCt[t]}Vz(){return this.PCt.length}rB(){return this.jg}Oz(){return this.zCt}}}{const pa=self.Os;pa.kCt=class extends pa.Kh{constructor(t,s){super(),this.BCt=t,this.nr=s[0],this.UCt=pa.ir(pa.Qa,s[1],s[2])}er(){}Uc(){return this.nr}tT(){return this.UCt.qa()}eT(){return this.UCt.Xa()}WCt(){return this.UCt}}}{const v=self.Os,ma=self.C3Debugger,ga=self.aP;v.aut=class extends v.Kh{constructor(s,t,i){super();const e=s.Hgt(i[1]),[h,r]=(this.Zc=s,this.$bt=v.RR.sP(e),this.nxt=null,this.QCt=e.Instance,this.Fg=t,this.eJ=i[11],this.nr=i[0],this.Dyt=this.Zc.f1t(i[14]),this.JCt=!!i[9],this.YCt=!!i[2],this.VCt=!!i[10],this.HCt=i[3].map(t=>({sid:t[0],type:t[1],name:t[2],qCt:s.f1t(t[3])})),this.ZCt=i[4],this.XCt=i[5],this.gbt=this.$bt.zR(),this.KCt=v.ir(v.Event.Af),this.FJ=null,s.pO().hR());if(this.$Ct=v.ir(v.tGt,h,r),this.sGt=!0,this.iGt=null,this.eGt=null,this.hGt=-1,this.rGt=null,this.nGt=null,this.oGt=null,this.aGt=null,this.uGt=null,this.lGt=!1,this.cGt=null,this.fGt=i[8].map(t=>v.dGt.jb(this,t)),this.pGt=[],this.mGt=new Map,this.gGt=new Map,this.yGt=new Set,this.MGt=new Map,this.wGt=v.ir(v.Rct,this),this.SGt=null,this.TGt=0,this.bGt=!1,this.cGt=null,this.LCt=null,this.xGt=null,this.vGt=null,this.CGt=null,this.GGt=0,this.nwt=new Map,this.owt=new Map,this.x8=[],this.IGt=new Map,this.NGt=!0,this.$bt.YR()&&(this.FJ=v.ir(v.jJ,this,i[12])),i[6]&&(this.LCt=v.ir(v.Vvt),this.LCt.rCt(i[6])),i[7]){this.xGt=i[7].map(t=>v.ir(v.gCt,t)),this.vGt=new Map,this.CGt=new Map;for(const a of this.xGt)this.vGt.set(a.Uc().toLowerCase(),a),this.CGt.set(a.PY(),a)}this.YCt?(this.iGt=[],this.eGt=new Set,this.hGt=this.Zc.EGt()):(this.rGt=[],this.nGt=new Set,this.oGt=[],this.aGt=[],this.uGt=[]);const n=this.$bt.Gwt();if(n<2&&(this.nxt=v.ir(e._Gt,this,i[15]),!(this.nxt instanceof v.Kbt)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.DGt=null,this.AGt=null,this.R7=v.ir(v.Event.Af),v.RR.Bbt(this,n);let o;if(o=2<=n?(o=e._Gt)||globalThis.VB:this.nxt.Fbt()){if(this.DGt=new o(n<2?this:null),n<2&&!(this.DGt instanceof ga))throw new TypeError("script interface class must derive from IObjectClass");if(2<=n&&!(this.DGt instanceof globalThis.VB))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.DGt=new ga;if(v.RR.Ubt(n),i[13]){const u=i[13];if(u){const l=u[0],c=u[1],f=u[2];this.nxt.txt(l,c,f)}}this.Zc.LGt()&&!this.YCt&&!this.VCt&&this.gbt||this.kbt(),this.$bt.FR()&&(this.$bt.jbt(this),this.OGt(i)),this.RGt=null}static jb(t,s,i){return v.ir(v.aut,t,s,i)}er(){if(this.KCt.er(),this.KCt=null,this.LCt&&(this.LCt.er(),this.LCt=null),this.xGt){for(const t of this.xGt)t.er();v.Dn(this.xGt),this.vGt.clear(),this.CGt.clear()}this.RGt=null,this.wGt.er(),this.wGt=null,this.nwt.clear(),this.owt.clear(),this.cGt=null,this.Zc=null}PGt(i){for(let t=1,s=i.length;t<s;++t){const e=this.Zc.eY(i[t]);this.iGt.push(e),this.eGt.add(e),e.rGt.push(this),e.nGt.add(this)}}kGt(t){this.lGt=!0,this.cGt=t}EF(){return this.lGt}o9(){return this.cGt}FGt(){let t=0;if(!this.YCt)for(const s of this.rGt)for(const i of s.jGt()){const e=i.Uc().toLowerCase();this.mGt.set(e,i),this.gGt.set(e,t),this.pGt.push(i),++t}for(const h of this.jGt()){const r=h.Uc().toLowerCase();this.mGt.set(r,h),this.gGt.set(r,t),this.pGt.push(h),++t}for(const n of this.pGt)this.yGt.add(n.az().constructor);if(!this.YCt&&this.rGt.length){let t=this.Zc.zGt(),s=(v.Ln(this.oGt,t,0),v.Ln(this.aGt,t,0),v.Ln(this.uGt,t,0),[]),i=0,e=0,h=0;for(const o of this.rGt){const a=o.aMt(),u=(this.oGt[a]=i,i+=o.BGt(),this.aGt[a]=e,e+=o.UGt(),this.uGt[a]=h,h+=o.WGt(),o.OP());if(u&&this.FJ)for(const l of u.RP())s.push(l.QGt(this.FJ))}this.FJ&&this.FJ.JGt(s)}}OGt(t){const s=this.Zc.YGt(),i=v.ir(v.Instance,{runtime:this.Zc,gF:this,uid:s});i.VGt(t[16],[]),this.Zc.HGt(s,i),this.x8.push(i)}bSt(){return this.nxt}qGt(){return this.VCt}Af(){return this.KCt}kbt(){this.YCt||(this.nxt?this.nxt.kbt():this.DGt.HB())}ZGt(){return 0<this.GGt}async l9(t){this.YCt||(this.GGt++,1===this.GGt&&(this.nxt?await this.nxt.l9(t):await this.DGt.XB(this.Zc.MR().XGt())))}g9(){if(!this.YCt){if(this.GGt--,this.GGt<0)throw new Error("released textures too many times");0===this.GGt&&(this.nxt?this.nxt.g9():this.DGt.KB(this.Zc.MR().XGt()))}}d9(){if(this.YCt)throw new Error("not applicable to family");this.nxt?this.nxt.d9():this.DGt.$B()}async P9(t){this.YCt||(this.nxt?await this.nxt.P9(t):await this.DGt.tU(this.Zc.MR().XGt()))}I4(){return this.Zc}lP(){return this.$bt}KGt(){return this.QCt}Uc(){return this.nr}f1t(){return this.Dyt}oO(){return this.Fg}PY(){return this.eJ}NY(){return this.YCt}pY(){return this.JCt}zR(){return this.gbt}aMt(){return this.hGt}jGt(){return this.fGt}UGt(){return this.ZCt}$Gt(t){return t&&this.yGt.has(t)}BGt(){return this.HCt.length}tIt(){return this.HCt.map(t=>t.sid)}sIt(s){return this.HCt.findIndex(t=>t.sid===s)}Pst(s){return this.HCt.findIndex(t=>t.name===s)}iIt(){return this.HCt.map(t=>t.name)}eIt(){return this.HCt.map(t=>t.qCt)}Fst(t){if((t=Math.floor(t))<0||t>=this.HCt.length)throw new RangeError("invalid instance variable index");return this.HCt[t].type}kst(t){if((t=Math.floor(t))<0||t>=this.HCt.length)throw new RangeError("invalid instance variable index");return this.HCt[t].name}WGt(){return this.XCt}hIt(){return this.pGt}lht(t){return this.mGt.get(t.toLowerCase())||null}zst(t){const s=this.gGt.get(t.toLowerCase());return void 0===s?-1:s}OP(){return this.FJ}YR(){return this.$bt.YR()}rIt(){return this.FJ&&this.FJ.nIt()}sdt(){return this.wGt}bP(){return this.wGt.bP()}jz(){return this.LCt}nY(t){this.SGt=t}rY(){return this.SGt}aY(t){this.TGt=t}oIt(){return this.TGt}aIt(){return this.xGt}uIt(){return this.xGt.length}w1t(){return this.rGt}ISt(t){return this.nGt.has(t)}Dmt(){return this.iGt}EY(t){return this.eGt.has(t)}dMt(t){return this.aGt[t]}oMt(t){return this.oGt[t]}myt(t){this.MGt.set(t.Syt().toLowerCase(),t)}gyt(t){return!!this.Gyt(t)}Gyt(t){const s=this.MGt.get(t.toLowerCase());return s&&s.Ul()?s:null}lIt(){return this.xGt}cIt(t){if(this.xGt)return this.vGt.get(t.toLowerCase())||null;throw new Error("no animations")}fIt(t){if(this.xGt)return this.CGt.get(t)||null;throw new Error("no animations")}dIt(t){if(this.cIt(t))throw new Error(`animation name '${t}' already exists`);const s=v.gCt.xCt(this.I4(),t);return this.xGt.push(s),this.vGt.set(s.Uc().toLowerCase(),s),this.CGt.set(s.PY(),s),s}pIt(t){const s=this.cIt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.xGt.length)throw new Error("cannot remove last animation");const i=this.xGt.indexOf(s);this.xGt.splice(i,1),this.vGt.delete(s.Uc().toLowerCase()),this.CGt.delete(s.PY()),s.er()}mIt(){if(this.xGt)return this.xGt[0];throw new Error("no animations")}gIt(){return this.mIt().ICt(0)}yIt(){if(this.xGt){const t=this.gIt().jz();return[t.Xp(),t.um()]}return this.LCt?[this.LCt.Xp(),this.LCt.um()]:[100,100]}oP(){if(this.$bt.FR())return this.x8[0];throw new Error("not a single-global plugin")}TP(){return this.x8}*instances(){yield*this.x8}*SP(){yield*this.x8,yield*this.Zc._Tt(this)}vP(){return this.x8.length}mY(t){this.x8.push(t)}MIt(){this.NGt=!0}H9(){if(this.NGt&&!this.YCt){let s=this.x8,i=0;for(let t=s.length;i<t;++i)s[i].wIt(i);const t=this.Zc.SIt();for(const e of t)e.yF()===this&&e.wIt(i++);this.NGt=!1}}TIt(t){const s=this.x8;if(t<s.length)return s[t];t-=s.length;const i=this.Zc.SIt();for(const e of i)if(e.yF()===this){if(0===t)return e;--t}return null}pTt(t){if(t&&t.EF()&&t.yF()!==this)for(const i of t._F())if(i.yF()===this)return i;const s=this.bP().TP();return s.length?s[0]:null}wP(t){const s=this.bP().TP();return 0<s.length?s[t.J9()%s.length]:null}*PTt(t,s){let i=this.bP().TP(),e=i.length,h=s.bP(),r=s.bP().TP(),n=r.length,o=t.J9(),a=(!s.NY()&&h.Hct()||(o=r.indexOf(t)),Math.ceil(e/n)),u=e%n,l=0,c;c=0==u||o<u?(l=o*a,a):(l=u*a+(o-u)*(a-1),a-1);for(let t=l,s=l+c;t<s;++t)yield i[t]}Fwt(t){this.nxt?.Fwt(t)}jgt(){if(this.lGt&&!this.YCt){this.H9();const t=this.bP(),s=t.eft(),i=t.Hct(),e=this.Zc.i1t(),h=e&&e.QO()&&e.QO().fft();for(const r of this.cGt.Y9())if(r!==this){r.H9();const n=r.bP();if(n.ift(i),!i){const o=n.eft();v.Dn(o);for(const a of s)o.push(r.TIt(a.J9()));if(h){const u=t.hft(),l=n.hft();v.Dn(l);for(const c of u)l.push(r.TIt(c.J9()))}}}}}Wwt(t,s){for(const i of this.o9().Y9()){const e=i.bP();t?v._n(e.hft(),s):v._n(e.eft(),s)}}bIt(){return this.$Ct}xIt(t){this.sGt=!!t}vIt(){if(this.sGt&&this.gbt){for(const t of this.x8)t.r4().CIt();for(const s of this.Zc.SIt())s.yF()===this&&s.r4().CIt();this.sGt=!1}}GIt(s,t,i){if(t){const e=this.IGt.get(t);e&&(e.delete(s),0===e.size)&&this.IGt.delete(t)}if(i){let t=this.IGt.get(i);t||(t=new Set,this.IGt.set(i,t)),t.add(s)}}IIt(){if(this.NY()){const t=new Set;for(const s of this.iGt)for(const i of s.IIt())t.add(i);return t.values()}return this.IGt.keys()}Awt(){return this.nwt||(this.nwt=new Map),this.nwt}Lwt(){return this.owt||(this.owt=new Map),this.owt}NIt(){return this.$Gt(v.wat.solid)}EIt(){return this.$Gt(v.wat.jumpthru)}_It(){return this.$Gt(v.wat.NoSave)}fY(){return this.$Gt(v.wat.Persist)}KH(){const t={instances:this.x8.map(t=>t.dT())};return this.nwt&&this.nwt.size&&(t.ex=v._o(this.nwt)),t}$H(t,e){this.nwt&&(this.nwt.clear(),this.nwt=null);const s=t.ex,h=(s&&(this.nwt=v.Do(s)),this.x8),r=t.instances;for(let t=0,s=Math.min(h.length,r.length);t<s;++t)h[t].pT(r[t]);for(let t=r.length,s=h.length;t<s;++t)this.Zc.vF(h[t]);for(let i=h.length,t=r.length;i<t;++i){let t=r[i],s=null;if(!this.zR()||(s=this.Zc.R3().Z7(t.w.l))){const n=this.Zc.dY(this.SGt||this,s,!1,0,0,!0);n.pT(t),e&&e.add(n)}}this.RGt=r,this.MIt()}DIt(){return this.RGt}AIt(){this.RGt=null}LIt(){for(let t=0,s=this.x8;t<s;++t)this.x8[t].LIt()}hP(){return this.DGt}OO(){return this.R7}OIt(){return this.AGt}CP(t){this.AGt=t}Sq(t){const s=this.Zc,i=s.Tq()&&!s.FO()._P();i&&ma.StartMeasuringScriptTime(),this.R7.dispatchEvent(t),i&&ma.AddScriptTime()}}}{const ya=self.Os;ya.RIt=class extends ya.Kh{constructor(t,s){super(),this.Zc=t,this.PIt=s;for(const i of this.PIt)i.kGt(this)}er(){this.Zc=null}I4(){return this.Zc}n9(){return this.PIt}Y9(){return this.PIt}Z9(){return this.PIt.some(t=>t.zR())}}}{let w=self.Os,h=self.C3Debugger,n=w.RR,o=[],a=0,S=new WeakMap,e=new WeakMap;w.Instance=class extends w.Kh{constructor(t){if(w.RR!==n)throw new Error("invalid addon manager");super(),this.Zc=t.runtime,this.kIt=t.gF,this.ust=null,this.FIt=null,this.jIt=null,this.zIt=0,this.BIt=t.uid,this.UIt=a++,this.Vwt=0,this.WIt=null;const s=w.Yn(t.tags),i=(0<s.length&&(this.WIt=new Set(s)),this.QIt=o,this.JIt=o,this.kIt.hIt()),e=(0<i.length&&(this.JIt=i.map((t,s)=>w.ir(w.YIt,{runtime:this.Zc,uz:t,fz:this,index:s}))),this.VIt=this.kIt.EF()?[]:null,this.HIt=-1,this.KCt=null,this.lP());if(e.NS()&&(this.Vwt|=4),e.zR())if(this.ust=w.ir(w.qIt,this,t._j),t.ZIt)this.ust.XIt(t.ZIt);else{this.ust.KIt();const[h,r]=this.kIt.yIt();this.ust.jI(h,r),this.yF().rIt()&&this.ust.Ej().$It()}t.tNt?this.sNt(t.tNt):this.iNt()}er(){if(this.jIt&&(this.jIt.bF(),this.jIt=null),0<this.JIt.length){for(const i of this.JIt)i.er();w.Dn(this.JIt)}this.FIt&&(this.FIt.er(),this.FIt=null);const t=S.get(this),s=(t&&(t.clear(),S.delete(this)),e.get(this));s&&(s.clear(),e.delete(this)),this.VIt&&w.Dn(this.VIt),this.KCt&&(this.KCt.er(),this.KCt=null),this.WIt&&this.WIt.clear(),this.WIt=null,this.Zc=null,this.kIt=null,0<this.QIt.length&&w.Dn(this.QIt),this.ust&&(this.ust.er(),this.ust=null)}sNt(t){0<t.length&&(this.QIt=[],w.Rn(this.QIt,t))}iNt(){const s=this.kIt.BGt();if(0!==s){this.QIt=[];const i=[0,0,""];for(let t=0;t<s;++t)this.QIt.push(i[this.kIt.Fst(t)])}}VGt(t,i){if(this.FIt)throw new Error("already got sdk instance");for(let t=0,s=this.JIt.length;t<s;++t){const e=this.JIt[t];e.VGt(i?i[t]:null)}const s=this.lP().Gwt();if(s<2){if(this.FIt=w.ir(this.kIt.KGt(),this,t),!(this.FIt instanceof w.hxt))throw new Error("sdk type must derive from SDKInstanceBase");!this.lP().zR()&&this.kIt.OIt()&&this.s4()}else{const h=this.lP().Fbt();this.eNt(h.Instance,t)}}sz(){return this.FIt??this.jIt}r4(){return this.ust}I4(){return this.Zc}g3(){return this.HIt}OF(){const t=this.HIt;return-1===t?this.I4().g3():t}y3(t){((t=+t)<0||!isFinite(t))&&(t=0),this.HIt=t,this.yF().rIt()&&this.Zc.hNt(this,!0)}PF(){this.HIt=-1,this.yF().rIt()&&this.Zc.hNt(this,!1)}BH(){return this.Zc.rNt(this)}Af(){return this.KCt||(this.KCt=w.ir(w.Event.Af)),this.KCt}UT(t){this.FIt?this.FIt.UT(t):this.jIt.oU(this.Zc.MR().XGt())}kbt(t){this.FIt.kbt(t)}nNt(){this.Vwt|=2}oNt(){return 0!=(2&this.Vwt)}aNt(){this.Vwt|=1}OU(){return 0!=(1&this.Vwt)}NS(){return 0!=(4&this.Vwt)||this.FIt.NS()}uNt(){this.Vwt|=32}AH(){return 0!=(32&this.Vwt)}lNt(){return 0!=(8&this.Vwt)}cNt(t){t?this.Vwt|=8:this.Vwt&=-9}fNt(){return 0!=(16&this.Vwt)}dNt(t){t?this.Vwt|=16:this.Vwt&=-17}pNt(){return 0!=(64&this.Vwt)}mNt(t){t?this.Vwt|=64:this.Vwt&=-65}gNt(t,s){t<<=16,s?this.Vwt|=t:this.Vwt&=~t}yNt(t){return 0!=(this.Vwt&t<<16)}zxt(){return this.FIt.zxt()}Bxt(){return this.FIt.Bxt()}Uxt(){return this.FIt.Uxt()}Wxt(){return this.FIt.Wxt()}Jxt(){return this.FIt.Jxt()}kSt(t){return this.FIt.kSt(t)}yF(){return this.kIt}_H(){return this.FIt._H()}DTt(t){return t.NY()?t.EY(this.yF()):this.yF()===t}MNt(h,t,s){const i=(t,s)=>{const i=s||t.yF(),e=h.get(i);e?e.add(t):h.set(i,new Set([t]))};if(i(this,t),this.EF())for(const e of this._F())i(e);if(s)for(const r of this.d5())i(r)}wNt(){if(!this.lP().ZR())throw new Error("object does not support scene graph")}M5(){return null!==this.r5()}r5(){const t=this.r4();if(!t)return null;const s=t.r5();return s?s.EB():null}o5(){const t=this.r4();if(!t)return null;const s=t.o5();return s?s.EB():null}*a5(){const t=this.r4();if(t)for(const s of t.a5())yield s.EB()}SNt(t){if(t)for(const s of this.children())if(s===t)return!0;return!1}i7(){const t=this.r4();return!!t&&t.i7()}TNt(t){const s=this.r4();if(!s)return[];const i=t.Uc();return s.rq().map(t=>t.EB()).filter(t=>t.yF().Uc()===i)}rq(){const t=this.r4();return t?t.rq().map(t=>t.EB()):[]}*children(){const t=this.r4();if(t)for(const s of t.children())yield s.EB()}*d5(){const t=this.r4();if(t)for(const s of t.d5())yield s.EB()}l5(){const t=this.r4();return t?t.l5():0}bNt(){return[...this.a5()].length}RTt(){const t=this.r4();return t?t.RTt():0}f5(t){const s=this.r4();if(!s)return null;const i=s.f5(t);return i?i.EB():null}xNt(){const t=this.r4();if(!t)return NaN;const s=t.r5();return s?s.vNt(t):NaN}CNt(t){for(const s of this.r4().rq())if(s.EB().DF()===t)return!0;return!1}m5(t,s){this.wNt(),t.wNt(),this.r4().m5(t.r4(),s||{})}g5(t){const s=this.r4();s&&s.g5(t.r4())}k5(){const t=this.r4();return!!t&&t.k5()}L9(){const t=this.r4();if(t){const s=t.GNt();if(s)for(const i of s){const e=this.Zc.t4(i[2]);if(e){const h=i[3];this.m5(e,{S5:!!(h>>0&1),b5:!!(h>>1&1),v5:!!(h>>2&1),G5:!!(h>>3&1),N5:!!(h>>4&1),P5:!!(h>>5&1),_5:!!(h>>6&1),A5:!!(h>>7&1),O5:!!(h>>8&1)})}}}}O9(t,s){const i=t.get(this);if(i)for(const e of i.sceneGraphJson.children){const h=s.get(e.index);if(h){const r=e.flags;this.m5(h,{S5:!!(r>>0&1),b5:!!(r>>1&1),v5:!!(r>>2&1),G5:!!(r>>3&1),N5:!!(r>>4&1),P5:!!(r>>5&1),_5:!!(r>>6&1),A5:!!(r>>7&1),O5:!!(r>>8&1)})}}}LF(){const t=this.Zc.INt();return t?t.lut(this):""}EF(){return null!==this.VIt}V9(t){this.VIt.push(t)}IF(){return this.VIt}NNt(t){return!!this.ENt(t)}ENt(t){const s=this._F();if(null===s||0===s.length)return!1;for(const i of s)if(i.yF()===t)return i;return null}_F(){return this.VIt}Wpt(){for(const t of this._F())t.yF().bP().rft(t)}jwt(){for(const t of this._F())t.yF().bP().$ct(t)}zwt(t){for(const s of this._F())s.yF().bP().eft()[t]=s}Uwt(){for(const t of this._F())t.yF().bP().tft(t)}Bwt(t){for(const s of this._F())s.yF().bP().hft()[t]=s}lP(){return this.kIt.lP()}wIt(t){this.zIt=t}J9(){return this.kIt.H9(),this.zIt}DF(){return this.BIt}_Nt(){return this.UIt}DNt(t){t?this.zF(new Set(t)):this.WIt=null}zF(t){if(0===t.size)this.WIt=null;else{this.WIt?this.WIt.clear():this.WIt=new Set;for(const s of t)this.WIt.add(s)}}FF(){return this.WIt??new Set}i2t(){return Array.from(this.FF()).join(" ")}r2t(t){t=Math.floor(t);for(const s of this.FF()){if(0===t)return s;--t}return""}uht(){return this.JIt}ANt(t){if(t)for(const s of this.JIt)if(s.az()instanceof t)return s;return null}Sat(t){if(!t)return null;const s=this.ANt(t);return s?s.sz():null}aht(i){const e=this.JIt;for(let t=0,s=e.length;t<s;++t)if(e[t].cz().PY()===i)return t;return-1}LNt(){return this.QIt}iIt(){return this.kIt.iIt()}ONt(){return this.QIt.length}Srt(t){const s=this.QIt;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}rMt(t){return this.QIt[t]}RNt(t){const s=this.QIt[t];return 0===this.kIt.Fst(t)?!!s:s}Trt(t,s){const i=this.QIt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=this.kIt.Fst(t);switch(e){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}fnt(t,s){if(0!==s){const i=this.QIt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}}Awt(){let t=S.get(this);return t||(t=new Map,S.set(this,t)),t}Lwt(){let t=e.get(this);return t||(t=new Map,e.set(this,t)),t}PNt(t){const s=this.yF();if(s.OO().kf(t))return!0;for(const i of s.w1t())if(i.OO().kf(t))return!0;return!!this.Zc.OO().kf(t)}EP(){const t=new Set,s=(t.add(this),this.r4());if(s&&s.i7())for(const i of this.d5())if(t.add(i),i.EF())for(const e of i._F())t.add(e);if(this.EF())for(const h of this._F())t.add(h);for(const r of t.values())r.R9()}kNt(){this.kIt.OIt()&&this.s4();for(const t of this.JIt)t.Gvt()}FNt(){this.kNt()}R9(){if(this.kNt(),this.PNt("instancecreate")){const t=this.yF(),s=new w.Event("instancecreate");s.fz=this.s4(),t.Sq(s);for(const i of t.w1t())i.Sq(s);this.Zc.Sq(s)}this.Zc.ij(this.lP().Edt().z9.a2t,this,null)}jNt(){this.Zc.ij(this.lP().Edt().z9.u2t,this,null)}zNt(t){if(this.jIt){const s=new w.Event("destroy");s.BNt=t,this.Sq(s)}if(this.PNt("instancedestroy")){const i=this.yF(),e=new w.Event("instancedestroy");e.fz=this.s4(),e.BNt=t,i.Sq(e);for(const h of i.w1t())h.Sq(e);this.Zc.Sq(e)}}UNt(){return this.FIt?this.FIt.Ixt():this.jIt.mj()}dT(t="full",s=null){const i={},e=("full"===t?i.uid=this.DF():i.c3=!0,this.FF());if(0<e.size&&(i.tags=Array.from(e)),"visual-state"!==t){const r=S.get(this);if(r&&r.size&&(i.ex=w._o(r)),-1!==this.g3()&&(i.mts=this.g3()),0<this.kIt.BGt()){const n={},o=this.kIt.tIt();for(let t=0,s=this.QIt.length;t<s;++t)n[o[t].toString()]=this.QIt[t];i.ivs=n}if(this.JIt.length){const a={};for(const u of this.JIt){const l=u.dT(t);l&&(a[u.cz().PY().toString()]=l)}i.behs=a}}this.ust&&(i.w=this.ust.KH(t,s));const h=this.FIt?this.FIt.dT():this.jIt.gj();return h&&(i.data=h),i}gZ(t="full",s){this.ust&&this.ust.gZ(t)}MZ(t,s="full",i=null){this.ust&&this.ust.MZ(t,s,i)}WNt(t,s="full",i=null){this.ust&&this.ust.WNt(t,s,i)}LIt(){this.lP().zR()&&this.ust.LIt()}pT(s,t="full",i){if("full"===t)this.BIt=s.uid;else if(!s.c3)return;if(this.DNt(s.tags),"visual-state"!==t){let t=S.get(this);t&&(t.clear(),S.delete(this));const h=s.ex,r=(h&&(t=w.Do(h),S.set(this,t)),this.HIt=s.hasOwnProperty("mts")?s.mts:-1,s.ivs);if(r)for(const[n,o]of Object.entries(r)){const a=parseInt(n,10),u=this.kIt.sIt(a);if(!(u<0||u>=this.QIt.length)){let t=o;null===t&&(t=NaN),this.QIt[u]=t}}}if(this.lP().zR()){const l=s.w;if(l){const c=l.l;if(this.ust.n4().PY()!==c){const f=this.ust.n4(),d=f.z3().Z7(c);d?(this.ust.l4(d),f.MY(this,!0),d.mY(this,!0),d.c4(this),this.ust.Dj()):"full"===t&&this.Zc.vF(this)}this.ust.$H(l,t)}}if("visual-state"!==t){const p=s.behs;if(p)for(const[m,g]of Object.entries(p)){const y=parseInt(m,10),M=this.aht(y);M<0||M>=this.JIt.length||this.JIt[M].pT(g,t)}}const e=s.data;e&&(this.FIt?this.FIt.pT(e,t):this.jIt.yj(e))}s4(){return this.jIt||this.eNt()}Dxt(){return!!this.jIt}eNt(t,s){const i=this.ust?t?self.sU:self.H5:t?self.QF:self.mF,e=t||this.FIt.Fbt(),h=this.kIt.OIt(),r=h||e||i,n=this.lP().Gwt();if(w.RR.Bbt(this,n),w.RR.Uvt(s),this.jIt=new r,w.RR.Wvt(),w.RR.Ubt(n),e&&!(this.jIt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(h){const o=e||i;if(!(this.jIt instanceof o))throw new TypeError(`setInstanceClass(): class '${h.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.jIt}MF(t){if(0!==this.QIt.length){const i={},e=this.kIt.eIt();for(let t=0,s=e.length;t<s;++t)i[e[t]]={configurable:!1,enumerable:!0,get:w.Instance.prototype.RNt.bind(this,t),set:w.Instance.prototype.Trt.bind(this,t)};const s=Object.create(Object.prototype,i);t.QNt={value:s,writable:!1}}}wF(t){const s=this.JIt;if(0!==s.length){const i={};for(const h of s)i[h.cz().f1t()]={value:h.uxt(),writable:!1};const e=Object.create(Object.prototype,i);t.Ept={value:e,writable:!1}}}Sq(t){if(this.Dxt()){const s=this.s4(),i=(t.fz=s,this.Zc),e=i.Tq()&&!i.FO()._P();e&&h.StartMeasuringScriptTime(),s.dispatchEvent(t),e&&h.AddScriptTime()}}}}{const Ma=self.Os;Ma.oq=class extends Ma.Kh{constructor(e){super(),this.TT=e,this.qpt=null,this.JNt=[],this.YNt=e.Xp(),this.VNt=e.um(),this.HNt=1,this.qNt=1,this.ZNt=0,this.XNt=1,this.KNt=e.p_(),this.$Nt=null,this.tEt=null,this.sEt=NaN,this.iEt=!1,this.r7=NaN,this.n7=NaN,this.eEt=t=>{if(t.fz===this.qpt.EB()){const s=e.I4(),i=(s.Af().removeEventListener("instancecreate",this.eEt),this.qpt.EB().sz());this.iEt=!!i.$st(),this.r7=this.iEt?i.Kst():NaN,this.n7=this.iEt?i.sit():NaN}}}er(){this.qpt=null,this.$Nt=null,this.tEt=null,this.sEt=NaN,this.iEt=!1,this.r7=NaN,this.n7=NaN,Ma.Dn(this.JNt)}hEt(t){if(this.XNt=this.TT.p_(),this.KNt=this.XNt,this.qpt=t,this.ZNt=t?t.UP():0,this.qpt){const s=this.TT,i=s.I4(),e=this.qpt.EB().lP().Gwt();if(e<2){const h=this.qpt.EB().sz();h?(this.iEt=!!h.$st(),this.r7=this.iEt?h.Kst():NaN,this.n7=this.iEt?h.sit():NaN):this.qpt.EB().OU()||i.Af().addEventListener("instancecreate",this.eEt)}else this.iEt=!1,this.r7=NaN,this.n7=NaN}else this.iEt=!1,this.r7=NaN,this.n7=NaN}r5(){return this.qpt}i7(){return 0<this.JNt.length}rq(){return this.JNt}rEt(){this.i7()&&1!==this.JNt.length&&(this.tEt?this.JNt.sort((t,s)=>{const i=this.tEt.get(t.EB()),e=this.tEt.get(s.EB());return Ma.ue(i)&&Ma.ue(e)?i-e:0}):this.JNt.sort((t,s)=>{const i=t.Drt().nEt(),e=s.Drt().nEt();return Ma.ue(i)&&Ma.ue(e)?i-e:0}))}nEt(){return this.sEt}Art(){return this.HNt}oEt(t){this.HNt=t}Ort(){return this.qNt}aEt(t){this.qNt=t}Urt(){return this.KNt}rTt(){return this.XNt}uEt(t){this.XNt=t}_rt(){return 0===this.YNt?Number.EPSILON:this.YNt}Lrt(){return 0===this.VNt?Number.EPSILON:this.VNt}lEt(){if(this.TT.C5()){let t=this.qpt,s=t.Xp(),i=t.Drt()._rt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.iEt?1+s/this.r7:s/i}return 1}cEt(){if(this.TT.I5()){let t=this.qpt,s=t.um(),i=t.Drt().Lrt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.iEt?1+s/this.n7:s/i}return 1}fEt(){return 0}dEt(){return{sw:this.YNt,sh:this.VNt,sx:this.HNt,sy:this.qNt,psa:this.ZNt,oo:this.XNt,so:this.KNt,pi:this.TT.EB().xNt()}}KH(t,s=null){const i=this.dEt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.pEt(t),c:this.mEt(t)})}gEt(t){let s="";return t.T5()&&(s+="x"),t.x5()&&(s+="y"),t.C5()&&(s+="w"),t.I5()&&(s+="h"),t.E5()&&(s+="a"),t.D5()&&(s+="z"),t.k5()&&(s+="d"),t.L5()&&(s+="o"),t.R5()&&(s+="v"),s}pEt(t){return this.qpt&&this.qpt.EB()&&!this.qpt.EB().OU()?this.yEt(this.qpt,this.TT,t):null}mEt(s){return this.JNt.map(t=>this.yEt(t,t,s)).filter(t=>t)}yEt(t,s,i){const e=t.EB();if(e&&e.OU())return null;const h={};return h.uid=e.DF(),h.f=this.gEt(s),h.offsets=s.MEt(),h.data=Ma.oq.wEt(e),h.oci=e.yF().oO(),"state"===i?(h.inst=e.dT("full",{selfOnly:!0}),h.instIndex=NaN):(h.instIndex=e.yF().TP().indexOf(e),h.inst=null),h}$H(t){this.YNt=t.sw,this.VNt=t.sh,this.HNt=t.sx,this.qNt=t.sy,this.ZNt=t.psa,this.XNt=t.oo,this.KNt=t.so,this.sEt=Ma.ue(t.pi)?t.pi:NaN}SEt(t,s){if(!t&&!s&&this.$Nt)for(const i of this.$Nt)i.OU()||i.M5()||i.I4().vF(i);this.$Nt=t,this.tEt=s}MZ(t,s){const i=this.TT,e=i.I4(),h=new Set;if(t.p&&!this.qpt){const o=t.p.uid,a=e.t4(o);if(s?.M2t,a){const u=a.r4();if(a.SNt(i.EB()))this.qpt=u;else{a.CNt(i.EB().DF())?e.vF(i.EB()):a.m5(i.EB(),this.TEt(t.p.f)),h.has(i)||(i.bEt(t.p.offsets),this.xEt(a,t.p,s)),h.add(i);const l=a.r4();l.Drt().rEt()}}else if(Ma.ue(t.p.oci)){const c=e.eY(t.p.oci),f=(e.Jyt(),e.GP(c,i.n4(),0,0,!0));if(s?.M2t,f){const d=this.vEt(t.p,e),p=(d&&f.pT(d),f.r4()),m=(p.n4().IP(f),f.m5(i.EB(),this.TEt(t.p.f)),f.r4());m.Drt().rEt()}}}const r=[];for(const g of t.c){const y=g.uid,M=e.t4(y);M&&r.push(M)}let n=0;for(const w of t.c){const S=w.uid,T=e.t4(S);if(s?.M2t,T){if(this.$Nt){if(this.$Nt.includes(T)){const C=T;if(C.yF()!==T.yF()){n++;continue}if(C.OU()){n++;continue}const G=t.c[n];if(!s?.M2t&&this.CEt(C,r,i)){this.GEt(n,G,i,h,s),n++;continue}if(C.M5()&&C.r5()!==i.EB()){const I=this.IEt(G,s);this.NEt(I,G,h,s),n++;continue}this.NEt(C.r4(),G,h,s,!0),n++;continue}if(this.$Nt[n]){const N=this.$Nt[n];if(N.yF()!==T.yF()){n++;continue}if(N.OU()){n++;continue}const E=t.c[n];if(!s?.M2t&&this.CEt(N,r,i)){this.GEt(n,E,i,h,s),n++;continue}if(N.M5()&&N.r5()!==i.EB()){const _=this.IEt(E,s);this.NEt(_,E,h,s),n++;continue}this.NEt(N.r4(),E,h,s,!0),n++;continue}}const b=T.yF(),x=this.EEt(r,b),v=i.EB().TNt(b).length;if(x===v){const D=i.EB().f5(n);if(D){const A=D.r4();A&&(h.has(A)||(A.bEt(w.offsets),this.xEt(D,w,s)),h.add(A))}n++;continue}if(T.M5()&&T.r5()!==i.EB()){const L=this.IEt(w,s);this.NEt(L,w,h,s),n++;continue}this.NEt(T.r4(),w,h,s)}else if(this.$Nt&&this.$Nt[n]){const O=this.$Nt[n],P=e.eY(this._Et(w));if(O.yF()!==P){n++;continue}if(O.OU()){n++;continue}const R=t.c[n];if(!s?.M2t&&this.CEt(O,r,i)){this.GEt(n,R,i,h,s),n++;continue}if(O.M5()&&O.r5()!==i.EB()){const k=this.IEt(R,s);this.NEt(k,R,h,s),n++;continue}this.NEt(O.r4(),R,h,s)}else{const F=this.IEt(w,s);this.NEt(F,w,h,s)}n++}}CEt(t,s,i){const e=t.yF(),h=this.EEt(s,e),r=i.EB().TNt(e).length;return h===r}GEt(t,s,i,e,h){const r=i.EB().f5(t,s);if(r){const n=r.r4();n&&(e.has(n)||(n.bEt(s.offsets),this.xEt(r,s,h)),e.add(n))}}TEt(t){const s={};return s.S5=t.includes("x"),s.b5=t.includes("y"),s.v5=t.includes("w"),s.G5=t.includes("h"),s.N5=t.includes("a"),s._5=t.includes("z"),s.P5=t.includes("d"),s.A5=t.includes("o"),s.O5=t.includes("v"),s}_Et(t){return Ma.ue(t.oci)?t.oci:t[1]}IEt(e,h){if(Ma.ue(e.oci)){let t=this.TT,s=t.I4(),i;if(e.data)i=s.dY(e.data,t.n4(),!1,0,0,!1,!0);else{const r=s.eY(e.oci);i=s.GP(r,t.n4(),0,0,!0)}if(h?.M2t,i){const n=this.vEt(e,s),o=(n&&i.pT(n),i.r4());return o.n4().IP(i,!0),o}}}NEt(t,s,i,e,h=!0){const r=this.TT,n=r.m5(t,this.TEt(s.f));n&&h&&(i.has(t)||(t.bEt(s.offsets),this.xEt(t.EB(),s,e)),i.add(t)),this.rEt()}xEt(t,s,i){let e=this.vEt(s,this.TT.I4());e&&((e=JSON.parse(JSON.stringify(e))).w=null,t.pT(e))}EEt(t,s){return t.filter(t=>t.yF().Uc()===s.Uc()).length}vEt(t,s){if(Ma.ue(t.instIndex)){const i=s.eY(t.oci),e=i.DIt();return e?e[t.instIndex]:null}return Ma.we(t.inst)?JSON.parse(t.inst):t.inst||void 0}static wEt(t){let s=t.r4().n4().uY(t.DF());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const e of[...t.rq()]){const h=e.r4();i.push([h.z3().PY(),h.n4().oO(),e.DF(),Ma.oq.nq(h),e.yF().EF()?1:0,h.o4(),Ma.oq.wEt(e)])}return Ma.Re(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=Ma.oq.DEt(),s[0][14][1]=i,s[0][14][2]=t.r4().o4()),s}static nq(t){let s=0;return(s|=Number(t.R5())<<8)|Number(t.L5())<<7|Number(t.D5())<<6|Number(t.k5())<<5|Number(t.E5())<<4|Number(t.I5())<<3|Number(t.C5())<<2|Number(t.x5())<<1|Number(t.T5())<<0}static DEt(t){let s=0;return s,511}}}{let d=self.Os,t=self.ys,r=(t.Cs,d.ir(d.Rect)),n=d.ir(d.Qu),s=d.ir(d.Event,"bboxchange",!1),f=d.ir(d.Ro,0,0,0,0),l=d.ir(d.vl),i=d.ir(d.Ro,1,1,1,1),o=d.ir(d.Rect,0,0,-1,-1),h=d.ir(d.Rect,0,0,-1,-1),p=new Set(["absolute","relative"]),e=[],m=!0,g=new WeakMap,a=new WeakMap;d.qIt=class extends d.Kh{constructor(t,s){super(),this.Si=t,this.Pct=t.yF(),this.Zc=t.I4(),this.AEt=s,this.Pct.GIt(this,null,s),this.LEt=-1,this.OEt=-1,this.Vwt=196635,this.Pct.lP().QR()&&(this.Vwt|=128),this.Ja=NaN,this.Ya=NaN,this.BS=NaN,this.REt=NaN,this.PEt=NaN,this.K2=NaN,this.jo=NaN,this.kEt=NaN,this.FEt=NaN,this.jEt=NaN,this.zEt=NaN,this.BEt=d.ir(d.Rect),this.UEt=d.ir(d.Qu),this.WEt=h,this.QEt=o,this.JEt=null,this.YEt=null,this.VEt=null,this.zS=i,this.HEt=i,this.qEt=null,this.ZEt=null,this.Si.yF().rIt()&&(this.ZEt=d.ir(d.XEt,this.Si,this)),this.KEt=null,this.$Nt=null,this.tEt=null,this.$Et=-1,this.t_t=null}aNt(){this.Vwt|=256}er(){if(this.Pct.GIt(this,this.AEt,null),this.qEt&&(this.Zc.xS().QM(this.qEt),this.qEt=null),this.JEt=null,this.YEt&&(this.YEt.s_t.er(),this.YEt=null),this.VEt&&(this.VEt.clear(),this.VEt=null),this.B5(),this.ZEt&&this.ZEt.er(),this.M5()&&this.r5().g5(this),this.i7()){const t=[...this.rq()];for(const s of t)this.g5(s)}this.i_t(),this.e_t(),g.delete(this),a.delete(this),this.Si=null,this.Pct=null,this.Zc=null,this.AEt=null}XIt(t){if(m=!1,this.Aj(t[0],t[1]),this.nT(t[2]),this.jI(t[3],t[4]),this.K2=0,this.QR()?this.BP(t[6]):this.jo=0,f.La(t[7]),this.h_t(f),this.Qrt(t[8]),this.Yrt(t[9]),this.WS(t[10]),this.ZEt&&this.ZEt.r_t(t[12]),t[14]&&g.set(this,{n_t:t[14][1],o_t:t[14][2]}),t[15]){const s=t[15],e=(this.j5(s[0],s[1]),this.Y5()),h=s[2];for(let i=0,t=h.length;i<t;++i){const r=h[i];for(let t=0,s=r.length;t<s;++t){const n=r[t],o=e.zT(t,i);o.sT(n[0]),o.hT(n[1]),o.nT(n[2]),o.aT(n[3]),o.lT(n[4])}}}if(t[16]){const i=t[16][0],a=t[16][1],u=!!a,l=!u,c=this.Zc.INt();u&&c&&c.uut(this.EB(),a),l&&c&&c.uut(this.EB(),i)}m=!0,this.a_t()}KIt(){this.Ja=0,this.Ya=0,this.BS=0,this.REt=0,this.PEt=0,this.K2=0,this.jo=0,this.kEt=0,this.FEt=1,this.jEt=0,this.zEt=0,this.a_t()}I4(){return this.Zc}yF(){return this.Pct}EB(){return this.Si}u_t(){return this.E5()?this.l_t(this.r5().c_t()-this.KEt.fEt()):0}sT(t){if(t=+t,this.T5()){const s=this.KEt,i=t-this.tT(),e=-this.u_t();0==e?this.Ja+=i/s.lEt():(this.Ja+=Math.cos(e)*i/s.lEt(),this.x5()&&(this.Ya+=Math.sin(e)*i/s.cEt()))}else this.Ja=t}Grt(t,s=!1){t=+t,!s&&this.T5()?this.sT(this.tT()+t):this.Ja+=t}tT(){if(this.T5()){let t=this.Ja,s=this.KEt,i=this.r5(),e=this.u_t();return 0===e?t*=s.lEt():(t=t*s.lEt()*Math.cos(e),this.x5()&&(t-=this.Ya*s.cEt()*Math.sin(e))),i.tT()+t}return this.Ja}hT(t){if(t=+t,this.x5()){const s=this.KEt,i=t-this.eT(),e=-this.u_t();0==e?this.Ya+=i/s.cEt():(this.T5()&&(this.Ja-=Math.sin(e)*i/s.lEt()),this.Ya+=Math.cos(e)*i/s.cEt())}else this.Ya=t}Irt(t,s=!1){t=+t,!s&&this.x5()?this.hT(this.eT()+t):this.Ya+=t}eT(){if(this.x5()){let t=this.Ya,s=this.KEt,i=this.r5(),e=this.u_t();return 0===e?t*=s.cEt():(t=t*s.cEt()*Math.cos(e),this.T5()&&(t+=this.Ja*s.lEt()*Math.sin(e))),i.eT()+t}return this.Ya}Aj(t,s){if(t=+t,s=+s,this.f_t()){const i=this.T5(),e=this.x5(),h=this.KEt,r=t-this.tT(),n=s-this.eT(),o=-this.u_t();if(0==o)i?this.Ja+=r/h.lEt():this.Ja=t,e?this.Ya+=n/h.cEt():this.Ya=s;else{const a=Math.sin(o),u=Math.cos(o);i?this.Ja+=e?(u*r-a*n)/h.lEt():u*r/h.lEt():this.Ja=t,e?this.Ya+=i?(a*r+u*n)/h.cEt():u*n/h.cEt():this.Ya=s}}else this.Ja=t,this.Ya=s}d_t(){return[this.tT(),this.eT()]}Rj(t,s){t=+t,s=+s,this.f_t()?this.Aj(this.tT()+t,this.eT()+s):(this.Ja+=t,this.Ya+=s)}RSt(t,s){return this.tT()===t&&this.eT()===s}nT(t){if(t=+t,this.D5()&&(t-=this.r5().rT()),this.BS!==t){this.BS=t,this.p_t();const s=this.n4();0!==this.BS&&s.TY(),s.c4(this)}}p_t(){if(this.a_t(),this.i7()){const i=this.rq();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.D5()&&e.p_t()}}}Vrt(t){this.nT(this.rT()+t)}rT(){return this.D5()?this.r5().rT()+this.BS:this.BS}kj(){return this.n4().rT()+this.rT()}$st(){const t=this.EB().lP().Gwt();return t<2&&this.EB().sz().$st()}nm(t){if(t=+t,this.C5()){const s=this.Xp();0===s?this.REt=Number.EPSILON:this.REt*=t/s}else this.REt=t;this.m_t()}Om(t,s){t=+t,!s&&this.C5()?this.nm(this.Xp()+t):this.REt+=t,this.m_t()}Xp(){if(this.C5()){const t=this.r5(),s=t.Xp(),i=t.Drt()._rt();return i===Number.EPSILON?(this.Drt()._rt()+s)*this.REt:s*this.REt}return this.REt}Kp(t){if(t=+t,this.I5()){const s=this.um();0===s?this.PEt=Number.EPSILON:this.PEt*=t/s}else this.PEt=t;this.m_t()}Rrt(t,s){t=+t,!s&&this.I5()?this.Kp(this.um()+t):this.PEt+=t,this.m_t()}um(){if(this.I5()){const t=this.r5(),s=t.um(),i=t.Drt().Lrt();return i===Number.EPSILON?(this.Drt().Lrt()+s)*this.PEt:s*this.PEt}return this.PEt}jI(t,s){if(t=+t,s=+s,this.C5()){const i=this.Xp();0===i?this.REt=Number.EPSILON:this.REt*=t/i}else this.REt=t;if(this.I5()){const e=this.um();0===e?this.PEt=Number.EPSILON:this.PEt*=s/e}else this.PEt=s;this.m_t()}ql(){return[this.Xp(),this.um()]}DH(){return this.K2}g_t(t){if(t<0)throw new RangeError("invalid depth");this.K2=t}y_t(){if(this.M5()){const t=this.KEt;return Math.min(t.lEt(),t.cEt())}return 1}QR(){return 0!=(128&this.Vwt)}BP(t){t=+t,this.QR()&&(this.E5()&&(t-=this.r5().UP()),t=d.cr(t),this.jo!==t)&&(this.jo=t,this.m_t())}Prt(t){0!=(t=+t)&&this.QR()&&(this.jo=d.cr(this.jo+t),this.m_t())}m_t(){if(this.Vwt|=1<<18,this.i7()){const i=this.rq();for(let t=0,s=i.length;t<s;t++)i[t].m_t()}}UP(){return this.E5()&&this.QR()?this.l_t(d.cr(this.r5().c_t()+this.jo)):this.jo}c_t(){return this.E5()&&this.QR()?d.cr(this.r5().c_t()+this.jo):this.jo}l_t(t){return this.C5()&&this.o5().Xp()<0&&(t=d.cr(d.Cr(t,this.o5().UP()+Math.PI))),this.I5()&&this.o5().um()<0?d.Cr(t,this.o5().UP()):t}M_t(){const t=this.r5();return!!(this.C5()&&t.Xp()<0)||!!(this.I5()&&t.um()<0)}w_t(){const t=this.r5();return!!(this.C5()&&t.Xp()<0&&this.I5()&&t.um()<0)}S_t(){const t=this.Vwt;if(0!=(t&1<<18)){const s=this.UP();this.kEt=Math.sin(s),this.FEt=Math.cos(s),this.Vwt=-262145&t}}zSt(){return this.S_t(),this.kEt}jSt(){return this.S_t(),this.FEt}Qrt(t){this.jEt=+t}Wrt(t){this.jEt+=+t}Uz(){return this.jEt}Yrt(t){this.zEt=+t}Jrt(t){this.zEt+=+t}Qz(){return this.zEt}h_t(t){this.zS.equals(t)||(this.zS===i?(this.zS=d.ir(d.Ro,t),this.HEt=d.ir(d.Ro,t),this.HEt.ca()):t.oa(1,1,1,1)?(this.zS=i,this.HEt=i):(this.zS.set(t),this.HEt.set(t),this.HEt.ca()),this.a_t())}g_(t){if(t=d.lr(+t,0,1),this.L5()){if(this.Drt().rTt()===t)return;this.Drt().uEt(t),t=this.p_()}else if(this.zS.a===t)return;this.T_t(t)}b_t(){if(this.i7()){const i=this.rq();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.T_t(e.p_())}}}T_t(t){f.Ho(this.zS),f.a=t,this.h_t(f),this.b_t()}jrt(t){this.L5()?this.g_(this.Drt().rTt()+t):this.g_(this.p_()+t)}p_(){return this.L5()?this.r5().p_()*this.Drt().rTt():this.zS.a}Yj(t){this.zS.ra(t)||(f.Ho(t),f.a=this.p_(),this.h_t(f))}Mrt(t,s,i){f.Bo(t,s,i),this.Yj(f)}x_t(t,s,i){0===t&&0===s&&0===i||(f.Ho(this.zS),f.r+=t,f.Oa+=s,f.b+=i,this.Yj(f))}Jj(){return this.zS}BJ(){return this.HEt}k5(){return 0!=(512&this.Vwt)}v_t(t){this.C_t(512,t)}T5(){return 0!=(1024&this.Vwt)}G_t(t){this.C_t(1024,t)}x5(){return 0!=(2048&this.Vwt)}f_t(){return 0!=(3072&this.Vwt)}I_t(t){this.C_t(2048,t)}C5(){return 0!=(4096&this.Vwt)}N_t(t){this.C_t(4096,t)}I5(){return 0!=(8192&this.Vwt)}E_t(t){this.C_t(8192,t)}E5(){return 0!=(16384&this.Vwt)}__t(t){this.C_t(16384,t)}D5(){return 0!=(32768&this.Vwt)}D_t(t){this.C_t(32768,t)}L5(){return 0!=(this.Vwt&1<<22)}A_t(t){this.C_t(1<<22,t)}R5(){return 0!=(this.Vwt&1<<23)}L_t(t){this.C_t(1<<23,t)}O_t(){this.Vwt&=-12647937}m5(t,s){if(t===this)return!1;if(t.M5())return!1;if(this.R_t(t))return!1;if(this.P_t(t))return!1;const i=t.tT(),e=t.eT(),h=t.Xp(),r=t.um(),n=t.UP(),o=t.rT(),a=t.p_(),u=(t.k_t(this),t.G_t(s.S5),t.I_t(s.b5),t.N_t(s.v5),t.E_t(s.G5),t.__t(s.N5),t.D_t(s._5),t.A_t(s.A5),t.L_t(s.O5),t.v_t(s.P5),i-this.tT()),l=e-this.eT(),c=-this.UP(),f=Math.cos(c),d=Math.sin(c);if(s.S5&&(s.N5?t.Ja=u*f-l*d:t.Ja=u,s.v5)){const p=this.Xp()/this.KEt._rt();0!=p&&(t.Ja/=p)}if(s.b5&&(s.N5?t.Ya=u*d+l*f:t.Ya=l,s.G5)){const m=this.um()/this.KEt.Lrt();0!=m&&(t.Ya/=m)}if(s.v5){const g=this.Xp();0===g||g===Number.EPSILON?(t.REt=1,t.KEt.oEt(1)):(t.REt=h/this.Xp(),t.KEt.oEt(t.REt))}if(s.G5){const y=this.um();0===y||y===Number.EPSILON?(t.PEt=1,t.KEt.aEt(1)):(t.PEt=r/this.um(),t.KEt.aEt(t.PEt))}return s.N5&&(t.jo=n-this.UP()),s._5&&(t.BS=o-this.rT()),s.A5&&t.KEt.uEt(a),s.O5&&t.Gk(this.Nk()),this.F_t(t),this.Dj(),this.b_t(),!0}g5(t){if(t.r5()===this){const s=t.tT(),i=t.eT(),e=t.Xp(),h=t.um(),r=t.UP(),n=t.rT(),o=t.p_();t.k_t(null),t.O_t(),t.Aj(s,i),t.jI(e,h),t.BP(r),t.nT(n),t.g_(o),this.j_t(t),this.Dj()}}z_t(){return this.$Et}B_t(){this.U_t();const t=[...this.children()];for(const i of t)this.g5(i);const s=this.r5();s&&s.g5(this),this.O_t()}U_t(){if(this.W_t(),!this.$Nt){const s=[...this.children()];s.length&&(this.$Nt=[],this.tEt=new WeakMap);let t=0;for(const i of s){const e=i.EB();this.$Nt.push(e),this.tEt.set(e,t),t++}}const t=this.r5();t&&t.U_t()}W_t(){if(-1===this.$Et){const t=[...this.a5()];this.$Et=t.length;for(const i of t)i.W_t();const s=[...this.children()];for(const e of s)e.W_t()}}e_t(){this.$Nt&&(this.$Nt.length=0),this.$Nt=null,this.tEt=null;const t=this.r5();t&&t.e_t(),this.$Et=-1}M5(){return null!==this.r5()}r5(){const t=this.KEt;return null!==t?t.r5():null}o5(){let t=this;for(;t.M5();)t=t.r5();return t}*a5(){let t=this.r5();for(;t;)yield t,t=t.r5()}SNt(t){return this.rq().includes(t)}i7(){const t=this.KEt;return null!==t&&t.i7()}rq(){const t=this.KEt;return null!==t?t.rq():e}children(){return this.rq()}*d5(){for(const t of this.children())yield t,yield*t.d5()}l5(){return this.rq().length}RTt(){return[...this.d5()].length}f5(t){const s=this.rq();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}vNt(s){if(s){const i=this.rq();if(i)for(let t=0;t<i.length;t++)if(s===i[t])return t}return NaN}Q_t(t){this.KEt||(this.KEt=d.ir(d.oq,this)),t&&this.KEt.hEt(t)}Drt(){return this.KEt}i_t(){this.KEt&&(this.KEt.er(),this.KEt=null)}k_t(t){t?(t.Q_t(null),this.Q_t(t)):(this.KEt&&this.KEt.hEt(null),this.i7()||this.i_t())}P_t(t){if(!this.M5())return!1;const s=this.r5();return s===t||s.P_t(t)}R_t(t){if(this.SNt(t))return!0;for(const s of this.rq())if(s.R_t(t))return!0;return!1}F_t(t){this.KEt.rq().push(t)}j_t(t){const s=this.KEt.rq(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.M5()||this.i_t(),t.i7()||t.i_t()}GNt(){const t=g.get(this);return t?t.n_t:null}J_t(){const t=g.get(this);return t?t.o_t:NaN}s7(){const t=a.get(this);return d.ue(t)?t:NaN}Y_t(t){a.set(this,t)}V_t(){this.C_t(1<<19,!0),this.a_t()}a_t(){if(m){const s=this.Zc.xS();this.qEt&&s.QM(this.qEt);let t;t=0!=(this.Vwt&1<<19)?s.GM()||"<point>":s.xM()||"<default>",this.qEt=s.zM(t,this.Kk(),this.HEt,this.rT())}}FH(){return this.qEt}zY(){return this.zS===i}WS(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.Kk()!==t&&(this.Vwt=this.Vwt&~(31<<26)|t<<26,this.a_t())}Kk(){return(this.Vwt&31<<26)>>26}l4(t,s){const i=s&&this.AEt!==t;i&&this.wY(),this.Pct.GIt(this,this.AEt,t),this.AEt=t,i&&this.H_t(),0!==this.rT()&&this.AEt.TY()}n4(){return this.AEt}z3(){return this.n4().z3()}xY(t){this.LEt=0|t}o4(){return this.AEt.AV(),this.LEt}PV(t){this.OEt=0|t}NU(){return this.AEt.OV(),this.OEt}S8(){return this.LEt}C_t(t,s){s?this.Vwt|=t:this.Vwt&=~t}Nk(){return 0!=(1&this.Vwt)}Gk(t){if(this.C_t(1,t),this.i7())for(const s of this.rq())s.R5()&&s.Gk(t)}i5(){return 0!=(8&this.Vwt)}e5(t){t=!!t,this.i5()!==t&&(this.C_t(8,t),t?this.Dj():this.q_t())}Z_t(t,s){if(this.C_t(32,t),this.VEt&&this.VEt.clear(),s.trim()){this.VEt||(this.VEt=new Set);for(const i of s.split(" "))i&&this.VEt.add(i.toLowerCase())}else this.VEt=null}X_t(t){const s=0!=(32&this.Vwt),i=this.VEt;if(t&&i)for(const e of i)if(t.has(e))return s;return!s}Dj(){if(this.Vwt|=65554,this.Pct.xIt(!0),this.Zc.f4(),this.AEt.$J()&&(this.K_t(this.BEt,this.UEt,!0),this.Vwt&=-3,this.H_t()),0!=(4&this.Vwt)&&this.Si.Af().dispatchEvent(s),null!==this.KEt){const i=this.KEt.rq();for(let t=0,s=i.length;t<s;++t)i[t].Dj()}}K_t(t,s,i){const e=this.tT(),h=this.eT(),r=this.Xp(),n=this.um(),o=this.UP();t.nu(e-this.jEt*r,h-this.zEt*n,r,n),i&&this.J5()&&this.$_t(t),0===o?s.cl(t):(t.offset(-e,-h),s.dl(t,this.zSt(),this.jSt()),s.offset(e,h),s.pl(t)),t.normalize()}tDt(){const t=this.Vwt;0!=(2&t)&&(this.K_t(this.BEt,this.UEt,!0),this.Vwt=-3&t)}jj(){return this.tDt(),this.BEt}Bj(){return this.tDt(),this.UEt}sDt(t){const s=this.tT(),i=this.eT(),e=Math.round(s)-s,h=Math.round(i)-i;return 0==e&&0==h?t:(n.C(t),n.offset(e,h),n)}iDt(t){this.BEt.C(t),this.UEt.cl(this.BEt),this.Vwt&=-3,this.CIt(),this.H_t()}eDt(t){this.C_t(4,t)}hDt(){return 0!=(4&this.Vwt)}GH(t,s,i){return s&&0!==this.DH()?this.EH(this.n4().NH()):0===this.rT()||i?t.Fu(this.jj()):this.rDt()}rDt(){const t=this.n4(),s=this.kj();return!(s>=t.hV())&&(t.iV(s,r),r.Fu(this.jj()))}EH(t){const s=this.jj(),i=s.pu(),e=s.gu(),h=s.mu(),r=s.yu(),n=this.kj(),o=n+this.DH();return t.hy(i,h,n,e,r,o)}Wj(){const t=this.n4();if(t.gV())return this.EH(t.NH());{const s=t.z3();return this.GH(t.iF(),s.CH(),s.yk())}}RH(t){this.C_t(1<<20,t)}OH(t){this.C_t(1<<21,t)}nDt(){return 0!=(this.Vwt&1<<20)}oDt(){return 0!=(this.Vwt&1<<21)}aDt(t){this.JEt=t,this.uDt(),this.J5()&&(this.t_t.lDt=null)}cDt(){return this.JEt}fDt(){return null!==this.JEt||this.J5()}dDt(){return this.pDt(this.Xp(),this.um(),this.UP(),this.zSt(),this.jSt())}mDt(t,s,i){let e=0,h=1;return 0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.pDt(t,s,i,e,h)}pDt(h,r,t,n,o){let s=this.YEt;null===s&&(s={s_t:d.ir(d.vl),width:NaN,height:NaN,angle:NaN},this.YEt=s);const a=s.s_t;if(s.width!==h||s.height!==r||s.angle!==t){const u=this.JEt;if(this.J5()){let t=this.Uz(),s=this.Qz(),i=this.Y5(),e=this.t_t.lDt;e||(u?(l.C(u),l.offset(t,s)):l.Al(),e=i.QT(l),this.t_t.lDt=e),i.JT(e,a),a.offset(-t,-s),a.Pl(h,r,n,o)}else u?(a.C(u),a.Pl(h,r,n,o)):a.Rl(this.Bj(),-this.tT(),-this.eT());s.width=h,s.height=r,s.angle=t}return a}uDt(){this.gDt(!0);const t=this.YEt;null!==t&&(t.width=NaN)}j5(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.EB().lP().$R())throw new Error("object does not support mesh");this.B5(),this.t_t={yDt:d.ir(d.Jg.MT,t,s),MDt:d.ir(d.Jg.MT,t,s),lDt:null}}J5(){return null!==this.t_t}Y5(){if(this.J5())return this.t_t.yDt;throw new Error("no mesh")}wDt(){if(this.J5())return this.t_t.MDt;throw new Error("no mesh")}SDt(t){this.C_t(65536,t)}TDt(){return 0!=(65536&this.Vwt)}gDt(t){this.C_t(1<<17,t)}bDt(){return 0!=(this.Vwt&1<<17)}$_t(t){const s=this.t_t.yDt,i=Math.min(s.OT(),0),e=Math.min(s.RT(),0),h=Math.max(s.PT(),1),r=Math.max(s.kT(),1),n=t.width(),o=t.height();t.offsetLeft(i*n),t.offsetTop(e*o),t.vu((h-1)*n),t.Cu((r-1)*o),this.K2=s.FT()}B5(){this.t_t&&(this.t_t.yDt.er(),this.t_t.MDt.er(),this.t_t=null,this.uDt())}W5(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!p.has(e))throw new Error("invalid mode");let h="relative"===e,r=i.x,n=i.y,o=i.Jk,a="number"==typeof i.u?i.u:h?0:-1,u="number"==typeof i.v?i.v:h?0:-1;if(!this.J5())return!1;const l=this.Y5(),c=l.zT(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.rT()!==o&&(c.nT(o),f=!0),h&&(r+=t/(l.ET()-1),n+=s/(l._T()-1)),a=-1!==a||h?(h&&(a+=t/(l.ET()-1)),d.lr(a,0,1)):c.oT(),u=-1!==u||h?(h&&(u+=s/(l._T()-1)),d.lr(u,0,1)):c.uT(),c.tT()===r&&c.eT()===n&&c.oT()===a&&c.uT()===u?f:(c.sT(r),c.hT(n),c.aT(a),c.lT(u),this.uDt(),!0)}oNt(){return this.Si.oNt()}h5(t,s){return!!this.jj().zu(t,s)&&!!this.Bj().zu(t,s)&&(this.oNt()?this.Si.sz().Vxt(t,s):!this.fDt()||this.dDt().zu(t-this.tT(),s-this.eT()))}xDt(){return 0!=(16&this.Vwt)}CIt(){if(this.xDt()&&this.i5()&&0==(256&this.Vwt)){const t=this.jj(),s=this.Pct.bIt(),i=this.WEt;if(r.set(s.F8(t.pu()),s.j8(t.mu()),s.F8(t.gu()),s.j8(t.yu())),!i.equals(r)){const e=this.Si;i===h?(s.z8(e,null,r),this.WEt=d.ir(d.Rect,r)):(s.z8(e,i,r),i.C(r)),this.Vwt&=-17}}}vDt(){this.Vwt|=16}q_t(){const t=this.WEt;t!==h&&(this.Pct.bIt().z8(this.Si,t,null),this.WEt=h)}H_t(){const t=this.n4();if(t.$J()&&0==(256&this.Vwt)){const s=t.UY(),i=this.jj(),e=this.QEt;if(r.set(s.F8(i.pu()),s.j8(i.mu()),s.F8(i.gu()),s.j8(i.yu())),!e.equals(r)){const h=this.Si;e===o?(s.z8(h,null,r),this.QEt=d.ir(d.Rect,r)):(s.z8(h,e,r),e.C(r)),t.WY()}}}wY(){const t=this.QEt;t!==o&&(this.n4().UY().z8(this.Si,t,null),this.QEt=o)}LV(){return this.QEt}Hj(){const t=this.Si,s=this.AEt,i=s.u4();i.length&&i.at(-1)===t||(s.MY(t,!1),s.mY(t,!1),this.Zc.f4())}Zj(){const t=this.Si,s=this.AEt,i=s.u4();i.length&&i[0]===t||(s.MY(t,!1),s.yY(t,!1),this.Zc.f4())}Kj(t){const s=this.Si,i=this.AEt;if(i.z3()!==t.z3())throw new Error("layer from different layout");t!==i&&(i.MY(s,!0),this.l4(t),t.mY(s,!0),this.Zc.f4())}t5(t,s){let i=this.Si,e=!1,h=this.AEt;if(t.DF()!==i.DF()){const r=t.r4();if(!r)throw new Error("expected world instance");const n=r.n4(),o=(h.oO()!==n.oO()&&(h.MY(i,!0),this.l4(n),n.mY(i,!0),e=!0),n.jV(i,t,!!s));(e||o)&&this.Zc.f4()}}Ej(){return this.ZEt}CDt(t){this.C_t(64,t)}YV(){return 0!=(64&this.Vwt)}KH(t,s=null){const i={x:this.tT(),y:this.eT(),w:this.Xp(),h:this.um(),l:this.n4().PY(),zi:this.o4()},e=(0!==this.rT()&&(i.ze=this.rT()),0!==this.UP()&&(i.a=this.c_t()),this.zY()||(i.c=this.zS.toJSON()),.5!==this.Uz()&&(i.oX=this.Uz()),.5!==this.Qz()&&(i.oY=this.Qz()),0!==this.Kk()&&(i.bm=this.Kk()),this.Nk()||(i.v=this.Nk()),this.i5()||(i.ce=this.i5()),this.hDt()&&(i.be=this.hDt()),this.ZEt&&(i.fx=this.ZEt.KH()),0!=(32&this.Vwt));return e&&(i.sfi=e),this.VEt&&(i.sft=[...this.VEt].join(" ")),this.KEt&&"visual-state"!==t&&(i.sgi=this.KEt.KH(t,s),g.has(this))&&(i.sgcd=g.get(this).n_t,i.sgzid=g.get(this).o_t),this.J5()&&(i.mesh=this.Y5().dT()),i}MEt(){return{x:this.Ja,y:this.Ya,z:this.BS,w:this.REt,h:this.PEt,a:this.jo,sgi:this.Drt()?this.Drt().dEt():null}}bEt(t){t&&(this.Ja=t.x,this.Ya=t.y,this.BS=t.z,this.REt=t.w,this.PEt=t.h,this.jo=t.a,t.sgi&&this.Drt()&&this.Drt().$H(t.sgi),this.m_t(),this.Dj())}LIt(){this.e_t(),this.B_t(),this.Q_t(null),this.KEt&&this.KEt.SEt(this.$Nt,this.tEt)}gZ(t){"visual-state"!==t&&this.B_t()}MZ(t,s="full",i=null){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.Vwt)&&this.KEt.MZ(t.sgi,i)}WNt(t,s="full",i){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.Vwt)&&(this.KEt.SEt(null,null),this.e_t(),this.Dj())}$H(t,s){if(m=!1,this.sT(t.x),this.hT(t.y),this.nm(t.w),this.Kp(t.h),this.xY(t.zi),this.nT(t.hasOwnProperty("ze")?t.ze:0),this.BP(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?f.La(t.c):t.hasOwnProperty("o")?(f.Ho(this.zS),f.a=t.o):f.zo(1,1,1,1),this.h_t(f),this.Qrt(t.hasOwnProperty("oX")?t.oX:.5),this.Yrt(t.hasOwnProperty("oY")?t.oY:.5),this.WS(t.hasOwnProperty("bm")?t.bm:0),this.Gk(!t.hasOwnProperty("v")||t.v),this.e5(!t.hasOwnProperty("ce")||t.ce),this.eDt(!!t.hasOwnProperty("be")&&t.be),this.Z_t(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.ZEt&&t.hasOwnProperty("fx")&&this.ZEt.$H(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==s&&this.$Nt)for(const i of this.$Nt)i.OU()||this.Zc.vF(i);if(t.hasOwnProperty("sgi")&&"visual-state"!==s){this.Q_t(null);const e=this.KEt,h=t.sgi;e.$H(h),e.SEt(this.$Nt,this.tEt),t.sgcd&&d.ue(t.sgzid)&&g.set(this,{n_t:t.sgcd,o_t:t.sgzid})}if(t.hasOwnProperty("mesh")){const r=t.mesh;this.j5(r.cols,r.rows),this.Y5().pT(r)}else this.B5();this.Dj(),m=!0,this.a_t(),"visual-state"!==s&&this.Zc.GDt(this.EB(),t)}}}{const wa=self.Os;wa.dGt=class extends wa.Kh{constructor(t,s){super();const i=t.I4(),e=i.Hgt(s[1]),h=(i.IDt().Bvt(e),this.Zc=i,this.Pct=t,this.Tvt=wa.RR.gz(e),this.nxt=null,this.NDt=null,this.QCt=e.Instance,this.eJ=s[2],this.nr=s[0],this.Dyt=this.Zc.f1t(s[3]),this.Tvt.Gwt());if(h<2&&(this.nxt=wa.ir(e._Gt,this),!(this.nxt instanceof wa.Svt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(wa.RR.Bbt(this,h),2<=h){const r=e._Gt??globalThis.JU;if(this.NDt=new r,!(this.NDt instanceof globalThis.JU))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.NDt=new globalThis.pz;wa.RR.Ubt(h),this.kbt()}static jb(t,s){return wa.ir(wa.dGt,t,s)}er(){this.Zc=null,this.Tvt=null,this.nxt&&(this.nxt.er(),this.nxt=null),this.QCt=null}bSt(){return this.nxt}kbt(){this.nxt?this.nxt.kbt():this.NDt&&this.NDt.HB()}I4(){return this.Zc}yF(){return this.Pct}az(){return this.Tvt}KGt(){return this.QCt}Uc(){return this.nr}PY(){return this.eJ}lz(){return this.NDt}f1t(){return this.Dyt}}}{const Sa=self.Os,Ta=self.nz;Sa.YIt=class extends Sa.Kh{constructor(t){super(),this.Zc=t.runtime,this.lMt=t.uz,this.Tvt=this.lMt.az(),this.Si=t.fz,this.Fg=t.index,this.FIt=null,this.jIt=null,this.Tvt.mY(this.Si)}er(){this.jIt&&(this.jIt.bF(),this.jIt=null),this.Tvt.MY(this.Si),this.FIt&&(this.FIt.er(),this.FIt=null),this.Zc=null,this.lMt=null,this.Tvt=null,this.Si=null}VGt(t){if(this.FIt)throw new Error("already got sdk instance");const s=this.az().Gwt();if(s<2){if(this.FIt=Sa.ir(this.lMt.KGt(),this,t),!(this.FIt instanceof Sa.bvt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const i=this.az().Fbt();this.zbt(i.Instance,t)}}sz(){return this.FIt??this.jIt}dz(){return this.Si}I4(){return this.Zc}cz(){return this.lMt}az(){return this.Tvt}hrt(){return this.Fg}Gvt(){this.FIt?this.FIt.Gvt():this.jIt.qU()}_vt(t,s){this.FIt&&this.FIt._vt(t,s)}UNt(){return this.FIt?this.FIt.Ixt():this.jIt.mj()}dT(t="full"){return this.FIt?this.FIt.dT(t):this.jIt.gj(t)}pT(t,s="full"){if(this.FIt)return this.FIt.pT(t,s);this.jIt.yj(t,s)}static EDt(t,s,i){let e=globalThis.YU,h,r;h=s instanceof e?t.ik(s):s.Cvt(),r=i instanceof e?t.ik(i):i.Cvt();const n=h.dz(),o=r.dz(),a=n.yF().oO(),u=o.yF().oO();if(a!==u)return a-u;const l=n._Nt(),c=o._Nt();return l!==c?l-c:h.hrt()-r.hrt()}zbt(t,s){const i=Ta,e=t??this.FIt.Fbt(),h=e||i,r=this.az().Gwt();if(Sa.RR.Bbt(this,r),Sa.RR.Uvt(s),this.jIt=new h,Sa.RR.Wvt(),Sa.RR.Ubt(r),!e||this.jIt instanceof i)return this.jIt;throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`)}uxt(){return this.jIt||this.zbt()}Dxt(){return!!this.jIt}}}{const ba=self.Os;ba.jJ=class extends ba.Kh{constructor(t,s){super(),this.TT=t,this._Dt=[],this.DDt=[],this.ADt=new Map,this.LDt=[],this.ODt=[],this.RDt=new Set,this.gS=!0;for(const i of s){const e=ba.ir(ba.PDt,this,i,this._Dt.length);this._Dt.push(e),this.ADt.set(e.Uc().toLowerCase(),e),3<=i.length&&this.LDt.push(this.kDt(e,i[2]))}this.I4().FDt(this)}er(){this.I4().jDt(this);for(const t of this.ODt)t.er();ba.Dn(this.ODt),ba.Dn(this._Dt),ba.Dn(this.DDt),this.ADt.clear(),ba.Dn(this.LDt),this.TT=null}zDt(t){this.RDt.add(t)}BDt(t){this.RDt.delete(t)}UDt(t){t.gM()&&(this.ODt=this._Dt.map(t=>{const s=t.Yx();return 0<s.GetCustomParametersByteSize()?ba.ir(ba.Jg.WebGPUEffectCustomParamsBuffer,s):null}),this.WDt());for(const s of this.RDt)s.UDt(t)}JGt(t){if(t.length){this._Dt=t.concat(this._Dt);for(const s of t)this.ADt.set(s.Uc().toLowerCase(),s);for(let t=0,s=this._Dt.length;t<s;++t)this._Dt[t].DY(t)}}kDt(t,s){t.QDt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=ba.ir(ba.Ro);h.La(e),i[t]=h}}return i}DT(){return this.TT}I4(){return this.TT.I4()}wz(){ba.Dn(this.DDt);let t=!0;for(const s of this._Dt)s.Opt()&&(this.DDt.push(s),s.Yx().ES()||(t=!1));this.gS=t}RP(){return this._Dt}nIt(){return 0<this._Dt.length}fht(t){return this.ADt.get(t.toLowerCase())||null}JDt(t){if((t=Math.floor(+t))<0||t>=this._Dt.length)throw new RangeError("invalid effect type index");return this._Dt[t]}yz(t){return this.JDt(t).Opt()}Mz(t,s){this.JDt(t).QDt(s)}BY(){return this.DDt}YV(){return 0<this.DDt.length}ES(){return this.gS}cht(t){return this.LDt[t]}WJ(t){return(t<this.ODt.length?this.ODt:this.LDt)[t]}Sz(t,s){if(t<0||t>=this.LDt.length)return null;const i=this.LDt[t];return s<0||s>=i.length?null:i[s]}Tz(t,s,i){if(t<0||t>=this.LDt.length)return!1;const e=this.LDt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof ba.Ro){if(h.ra(i))return!1;h.Ho(i)}else{if(h===i)return!1;e[s]=i}return t<this.ODt.length&&this.ODt[t].SetParameterValue(s,i),!0}WDt(){const i=this.LDt,e=this.ODt;for(let t=0,s=Math.min(i.length,e.length);t<s;++t){const h=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)h.SetParameterValue(t,r[t])}}static YDt(t){return t&&t instanceof ba.Ro?{t:"color",v:t.toJSON()}:t}static VDt(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const s=t.t;if("color"!==s)throw new Error("invalid effect parameter type");{const i=ba.ir(ba.Ro);return i.La(t.v),i}}}static HDt(t){return t.map(ba.jJ.YDt)}static qDt(t){return t.map(ba.jJ.VDt)}dT(){return this._Dt.map(t=>({name:t.Uc(),active:t.Opt(),params:ba.jJ.HDt(this.LDt[t.oO()])}))}pT(t){for(const s of t){const i=this.fht(s.name);i&&(i.QDt(s.active),this.LDt[i.oO()]=ba.jJ.qDt(s.params))}this.wz(),this.WDt()}}}{const xa=self.Os;xa.PDt=class extends xa.Kh{constructor(t,s,i){super(),this.FJ=t,this.Kc=s[0],this.nr=s[1],this.Fg=i,this.kS=null,this.Kf=!0}er(){this.FJ=null,this.kS=null}QGt(t){const s=xa.ir(xa.PDt,t,[this.Kc,this.nr],-1);return s.kS=this.kS,s.Kf=this.Kf,s}UDt(t){const s=t.bM(this.Kc);if(!s)throw new Error("failed to find shader program '"+this.Kc+"'");this.kS=s}OP(){return this.FJ}Uc(){return this.nr}DY(t){this.Fg=t}oO(){return this.Fg}DT(){return this.FJ.DT()}I4(){return this.FJ.I4()}QDt(t){this.Kf=!!t}Opt(){return this.Kf}Yx(){return this.kS}ZDt(){const i=[];for(let t=0,s=this.kS.Vx();t<s;++t){const e=this.kS.Hx(t);if("float"===e||"percent"===e)i.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");i.push(xa.ir(xa.Ro,1,1,1,1))}}return i}}}{const va=self.Os;va.XEt=class extends va.Kh{constructor(t,s){super(),this.Si=t,this.XDt=s,this.FJ=t.yF().OP(),this.KDt=!0,this.JJ=!0,this.$Dt=!1,this.tAt=!1,this.sAt=!1,this.iAt=!1,this.eO=va.ir(va.Jg.eA,t.I4().MR().zJ(),{YD:(t,s)=>{const i=s.qL(),e=i.r4();t.QS(e.BJ()),t.ow(e.kj()),i.UT(t),t.ow(0)},VD:t=>{const s=t.Uxt(),[i,e]=t.Bxt();return{UL:s,WL:i,QL:e}},HD:t=>this.WJ(t)}),this.eAt=[],this.DDt=[],this.gS=!0,this.LDt=[],this.ODt=[],this.UDt(t.I4().xS());for(let t=0,s=this.FJ.RP().length;t<s;++t)this.eAt.push(!0);this.wz(),this.FJ.zDt(this)}er(){this.FJ.BDt(this);for(const t of this.ODt)t&&t.er();va.Dn(this.ODt),this.eO.er(),this.eO=null,va.Dn(this.eAt),va.Dn(this.DDt),va.Dn(this.LDt),this.Si=null,this.FJ=null}UDt(t){t.gM()&&(this.ODt=this.FJ.RP().map(t=>{const s=t.Yx();return 0<s.GetCustomParametersByteSize()?va.ir(va.Jg.WebGPUEffectCustomParamsBuffer,s):null}))}r_t(t){let s=0;for(const i of t)this.LDt.push(this.kDt(s,i)),++s;this.WDt(),this.wz()}kDt(t,s){this.eAt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=va.ir(va.Ro);h.La(e),i[t]=h}}return i}$It(){for(const t of this.FJ.RP())this.LDt.push(t.ZDt());this.WDt()}DT(){return this.TT}OP(){return this.FJ}nO(){return this.jY(),this.eO}I4(){return this.Si.I4()}wz(){va.Dn(this.DDt);let t=this.XDt,i=this.FJ.RP(),e=this.DDt,h=this.eAt,r=!0;for(let t=0,s=i.length;t<s;++t)if(h[t]){const n=i[t];e.push(n),n.Yx().ES()||(r=!1)}this.gS=r,t.CDt(!!e.length),this.KDt=!0}jY(){const t=this.Si,s=this.XDt,i=s.zY(),e=t.lP().HR(),h=0!==s.UP()||0!==s.n4().UP()||s.Xp()<0||s.um()<0,r=t.Jxt(),n=t.NS();(this.KDt||i!==this.JJ||e!==this.$Dt||h!==this.tAt||r!==this.sAt||n!==this.iAt||this.eO.VA())&&(this.eO.HA(this.DDt.map(t=>t.Yx()),{ZD:this.DDt.map(t=>t.oO()),XD:!i||n,$D:e,tA:r,sA:h}),this.KDt=!1,this.JJ=i,this.$Dt=e,this.tAt=h,this.sAt=r,this.iAt=n)}BY(){return this.DDt}cht(t){return this.LDt[t]}WJ(t){return(t<this.ODt.length?this.ODt:this.LDt)[t]}Sz(t,s){if(t<0||t>=this.LDt.length)return null;const i=this.LDt[t];return s<0||s>=i.length?null:i[s]}Tz(t,s,i){if(t<0||t>=this.LDt.length)return!1;const e=this.LDt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof va.Ro){if(h.ra(i))return!1;h.Ho(i)}else{if(h===i)return!1;e[s]=i}return t<this.ODt.length&&this.ODt[t].SetParameterValue(s,i),!0}WDt(){const i=this.LDt,e=this.ODt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)h.SetParameterValue(t,r[t])}}ES(){return this.gS}hAt(){return this.DDt.some(t=>t.Yx().AS())}yz(t){return this.eAt[t]}Mz(t,s){this.eAt[t]=!!s}RP(){return this.FJ.RP()}KH(){return this.FJ.RP().map(t=>({name:t.Uc(),active:this.eAt[t.oO()],params:va.jJ.HDt(this.LDt[t.oO()])}))}$H(t){for(const s of t){const i=this.FJ.fht(s.name);i&&(this.eAt[i.oO()]=s.active,this.LDt[i.oO()]=va.jJ.qDt(s.params))}this.wz(),this.WDt()}}}{let G=self.Os,r=[],S=[],n=[],T=G.ir(G.vl),M=G.ir(G.vl),b=G.ir(G.Qu),d=G.ir(G.Rect),p=G.ir(G.Rect),m=null,g=null,y=null;G.rAt=class extends G.Kh{constructor(t){super(),this.Zc=t,this.nAt=0,this.oAt=0,this.aAt=[],this.uAt=0,this.lAt=0,this.cAt=0,this.fAt=0,this.dAt=new self.H4(this)}er(){this.Zc=null}I4(){return this.Zc}dO(){return this.dAt}pAt(){this.lAt=this.uAt,this.uAt=0,this.fAt=this.cAt,this.cAt=0}mAt(){return this.lAt}gAt(){return this.fAt}yAt(t,s){const i=t.r4(),e=s.r4();i&&e&&i.i5()&&e.i5()&&this.aAt.push([t,s])}CTt(s,i,e){for(const[h,r]of this.aAt){let t=null;if(s===h)t=r;else{if(s!==r)continue;t=h}t.DTt(i)&&!e.includes(t)&&e.push(t)}}GTt(t,s){if(this.aAt.length)for(const[i,e]of this.aAt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}MAt(){G.Dn(this.aAt)}Z4(t,s){if(!t||!s||t===s)return!1;const i=t.r4(),e=s.r4();if(!i.i5()||!e.i5())return!1;this.uAt++;const h=i.n4(),r=e.n4(),n=h.NV(r);return n?this.wAt(i,e):this.SAt(i,e)}wAt(t,s){if(!t.jj().Fu(s.jj()))return!1;if(this.cAt++,!t.Bj().gl(s.Bj()))return!1;if(t.oNt()&&s.oNt())return!1;if(t.oNt())return this.TAt(t,s);if(s.oNt())return this.TAt(s,t);if(!t.fDt()&&!s.fDt())return!0;const i=t.dDt(),e=s.dDt();return i.kl(e,s.tT()-t.tT(),s.eT()-t.eT())}SAt(i,e){const t=i.oNt(),s=e.oNt();if(t&&!s)return this.bAt(i,e);if(s&&!t)return this.bAt(e,i);if(s||t)return!1;{const h=i.n4(),r=e.n4(),n=(T.C(i.dDt()),M.C(e.dDt()),T.El());for(let t=0,s=n.length;t<s;t+=2){const a=t+1,u=n[t],l=n[a],[c,f]=h.aF(u+i.tT(),l+i.eT());n[t]=c,n[a]=f}const o=M.El();for(let t=0,s=o.length;t<s;t+=2){const d=t+1,p=o[t],m=o[d],[g,y]=r.aF(p+e.tT(),m+e.eT());o[t]=g,o[d]=y}return T.Ll(),M.Ll(),this.cAt++,T.kl(M,0,0)}}bAt(t,s){const i=t.n4(),e=s.n4(),h=(m=m||G.ir(G.vl),g=g||G.ir(G.Rect),y=y||G.ir(G.Qu),s.tT()),r=s.eT(),[n,o]=e.aF(h,r),[a,u]=i.hF(n,o),l=a-h,c=u-r;if(g.C(s.jj()),g.offset(l,c),!t.jj().Fu(g))return!1;if(y.C(s.Bj()),y.offset(l,c),this.cAt++,!t.Bj().gl(y))return!1;m.C(s.dDt());const f=m.El();for(let t=0,s=f.length;t<s;t+=2){const d=t+1;f[t]+=l,f[d]+=c}return m.Ll(),this.TAt(t,s,a,u,m,g,y)}TAt(t,e,s,i,h,r,n){const o=void 0!==r?r:e.jj(),a=t.tT(),u=t.eT(),l=t.EB().sz(),c=void 0!==s?s:e.tT(),f=void 0!==i?i:e.eT(),d=e.fDt(),p=void 0!==n?n:e.Bj(),m=S;l.GetCollisionRectCandidates(o,m);for(let t=0,s=m.length;t<s;++t){const g=m[t],y=g.GetRect();if(this.uAt++,o.ju(y,a,u)&&(b.cl(y),b.offset(a,u),b.gl(p)))if(d){let t=void 0!==h?h:e.dDt(),s=c,i=f;void 0!==h&&(s=e.tT(),i=e.eT());const M=g.GetPoly();if(M){if(this.cAt++,M.kl(t,s-(a+y.pu()),i-(u+y.mu())))return G.Dn(m),!0}else if(T.Rl(b,0,0),T.kl(t,s,i))return G.Dn(m),!0}else{const w=g.GetPoly();if(!w)return G.Dn(m),!0;if(T.Rl(p,0,0),w.kl(T,-(a+y.pu()),-(u+y.mu())))return G.Dn(m),!0}}return G.Dn(m),!1}xAt(t,o,a){const u=t.bP(),s=this.Zc.QO();if(!s)throw new Error("cannot call outside event");const l=s.fft(),i=new Map,c=t=>{let s=i.get(t);return void 0===s&&(s=t.Rk(),i.set(t,s)),s};if(u.Hct()){a||(u.ift(!1),G.Dn(u.eft())),l&&G.Dn(u.hft());for(const e of t.TP()){let h=e.r4(),r=h.n4();if(!(!c(r)||!h.Wj())&&o.some(([t,s])=>{const[i,e]=r.hF(t,s,h.kj());return h.h5(i,e)})){if(a)return!1;u.$ct(e)}else l&&u.tft(e)}}else{let i,e=!1,n=(!l||s.hgt(this.Zc.e1t())||this.Zc.GSt()&&!u.hft().length&&u.eft().length?i=u.eft():(i=u.hft(),e=!0),0);for(let s=0,t=i.length;s<t;++s){let t=i[s],h=t.r4(),r=h.n4();if(!(!c(r)||!h.Wj())&&o.some(([t,s])=>{const[i,e]=r.hF(t,s,h.kj());return h.h5(i,e)})){if(a)return!1;e?u.$ct(t):i[n++]=t}else e?i[n++]=t:l&&u.tft(t)}a||(i.length=n)}return t.jgt(),i.clear(),!!a||u.qct()}vAt(t,s){if(t)for(const i of s.IIt())if(!t.NV(i))return!1;return!0}CSt(t,s,i,e){if(s.NY())for(const h of s.Dmt())this.vAt(t,h)?(h.vIt(),h.bIt().B8(i,e)):G.Wh(e,h.TP());else this.vAt(t,s)?(s.vIt(),s.bIt().B8(i,e)):G.Wh(e,s.TP())}oR(t,s,i,e){for(const h of s)this.CSt(t,h,i,e)}CAt(t,s,i){const e=this.Zc.Jvt();e&&this.oR(t,e.BZ(),s,i)}GAt(t,s,i){const e=this.Zc.Yvt();e&&this.oR(t,e.BZ(),s,i)}X_t(t,s){return t.lNt()&&(!s||s.r4().X_t(t.Awt().get("solidTags")))}tR(t){const s=t.r4();this.CAt(s.n4(),s.jj(),r);for(const i of r)if(this.X_t(i,t)&&this.Z4(t,i))return G.Dn(r),i;return G.Dn(r),null}IAt(t,s){this.CAt(null,t,r);for(const i of r)if(this.X_t(i,s)&&this.NAt(t,i))return G.Dn(r),i;return G.Dn(r),null}EAt(t,s){let i=null;s&&(i=n,G.Dn(i));const e=t.r4();this.GAt(e.n4(),e.jj(),r);for(const h of r)if(h.fNt()&&this.Z4(t,h)){if(!s)return G.Dn(r),h;i.push(h)}return G.Dn(r),i}_At(s,i,e,h,r){h=h||50;const n=s.r4(),o=n.tT(),a=n.eT();for(let t=0;t<h;++t)if(n.Aj(o+i*t,a+e*t),n.Dj(),!this.Z4(s,r))return!0;return n.Aj(o,a),n.Dj(),!1}DAt(s,i,e,h,r,n){h=h||50;let o=s.r4(),a=o.tT(),u=o.eT(),l=null,c=null;for(let t=0;t<h;++t)if(o.Aj(a+i*t,u+e*t),o.Dj(),!this.Z4(s,l))if(l=this.tR(s))c=l;else if(r&&(l=n?this.Z4(s,n)?n:null:this.EAt(s))&&(c=l),!l)return c&&this.AAt(s,i,e,c,16,!0),!0;return o.Aj(a,u),o.Dj(),!1}LAt(i,e,h,t){t=t||50;let r=i.r4(),n=r.tT(),o=r.eT(),a=null,u=null;for(let s=0;s<t;++s)for(let t=0;t<2;++t){const l=2*t-1;if(r.Aj(n+e*s*l,o+h*s*l),r.Dj(),!this.Z4(i,a)){if(!(a=this.tR(i)))return u&&this.AAt(i,e*l,h*l,u,16,!0),!0;u=a}}return r.Aj(n,o),r.Dj(),!1}AAt(t,s,i,e,h,r){let n=2,o=!1,a=!1,u=t.r4(),l=u.tT(),c=u.eT();for(;n<=h;){const f=1/n;n*=2,u.Rj(s*f*(o?1:-1),i*f*(o?1:-1)),u.Dj(),this.Z4(t,e)||r&&this.tR(t)?(o=!0,a=!0):(o=!1,a=!1,l=u.tT(),c=u.eT())}a&&(u.Aj(l,c),u.Dj())}OAt(i,t=100){let e=0,h=i.r4(),r=h.tT(),n=h.eT(),o=0,a=this.tR(i);if(!a)return!0;for(;e<=t;){let t=0,s=0;switch(o){case 0:t=0,s=-1,e++;break;case 1:t=1,s=-1;break;case 2:t=1,s=0;break;case 3:t=1,s=1;break;case 4:t=0,s=1;break;case 5:t=-1,s=1;break;case 6:t=-1,s=0;break;case 7:t=-1,s=-1}if(o=(o+1)%8,h.Aj(Math.floor(r+t*e),Math.floor(n+s*e)),h.Dj(),!this.Z4(i,a)&&!(a=this.tR(i)))return!0}return h.Aj(r,n),h.Dj(),!1}RAt(t,s,i,e){const h=t.r4(),r=h.tT(),n=h.eT(),o=Math.max(10,G.mr(s,i,r,n)),a=G.yr(s,i,r,n),u=e||this.tR(t);if(!u)return G.cr(a+Math.PI);let l=u,c=0,f=0,d=G.dr(5),p;for(p=1;p<36;++p){const v=a-p*d;if(h.Aj(s+Math.cos(v)*o,i+Math.sin(v)*o),h.Dj(),!this.Z4(t,l)&&!(l=e?null:this.tR(t))){c=v;break}}for(36===p&&(c=G.cr(a+Math.PI)),l=u,p=1;p<36;++p){const C=a+p*d;if(h.Aj(s+Math.cos(C)*o,i+Math.sin(C)*o),h.Dj(),!this.Z4(t,l)&&!(l=e?null:this.tR(t))){f=C;break}}if(36===p&&(f=G.cr(a+Math.PI)),h.Aj(r,n),h.Dj(),f===c)return f;let m=G.Mr(f,c)/2,g;g=G.Sr(f,c)?G.cr(c+m+Math.PI):G.cr(f+m);const y=Math.cos(a),M=Math.sin(a),w=Math.cos(g),S=Math.sin(g),T=y*w+M*S,b=y-2*T*w,x=M-2*T*S;return G.yr(0,0,b,x)}PAt(t,s,i,e,h){if(!h)return!1;const r=h.r4();if(!r.i5())return!1;if(this.uAt++,d.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!r.jj().Fu(d))return!1;if(h.oNt())return this.kAt(t,s,i,e,h,r);if(this.cAt++,!r.Bj().ml(t,s,i,e))return!1;if(!r.fDt())return!0;const n=r.dDt();return n.ml(r.tT(),r.eT(),t,s,i,e)}kAt(i,e,h,r,t,s){const n=s.tT(),o=s.eT(),a=t.sz(),u=S;p.set(i,e,h,r),p.normalize(),a.GetCollisionRectCandidates(p,u);for(let t=0,s=u.length;t<s;++t){const l=u[t],c=l.GetRect();if(this.uAt++,d.ju(c,n,o)&&(b.cl(c),b.offset(n,o),b.ml(i,e,h,r))){const f=l.GetPoly();if(!f)return G.Dn(u),!0;if(this.cAt++,f.ml(n+c.pu(),o+c.mu(),i,e,h,r))return G.Dn(u),!0}}return G.Dn(u),!1}NAt(t,s){if(!s)return!1;const i=s.r4();if(!i.i5())return!1;if(this.uAt++,!i.jj().Fu(t))return!1;if(s.oNt())return this.FAt(t,s,i);if(this.cAt++,b.cl(t),!i.Bj().gl(b))return!1;if(!i.fDt())return!0;const e=T,h=(e.cl(t,i.tT(),i.eT()),i.dDt());return e.kl(h,0,0)}FAt(i,t,s){const e=s.tT(),h=s.eT(),r=t.sz(),n=S;r.GetCollisionRectCandidates(i,n);for(let t=0,s=n.length;t<s;++t){const o=n[t],a=o.GetRect();if(this.uAt++,i.ju(a,e,h)){const u=o.GetPoly();if(!u)return G.Dn(n),!0;if(this.cAt++,T.cl(i,0,0),u.kl(T,-(e+a.pu()),-(h+a.mu())))return G.Dn(n),!0}}return G.Dn(n),!1}jAt(t,s){if(t){const i=t.r4();i.i5()&&(this.uAt++,i.jj().Fu(s.rect))&&(t.oNt()?this.zAt(t,i,s):(this.cAt++,i.fDt()?s.BAt(t,i.tT(),i.eT(),i.dDt()):s.UAt(t,i.Bj())))}}zAt(i,e,h){const r=e.tT(),n=e.eT(),o=S;i.sz().GetCollisionRectCandidates(h.rect,o);for(let t=0,s=o.length;t<s;t++){const a=o[t],u=a.GetRect();if(this.uAt++,h.rect.ju(u,r,n)){const l=a.GetPoly();this.cAt++,l?h.BAt(i,r+u.pu(),n+u.mu(),l):h.WAt(i,e.tT(),e.eT(),u)}}G.Dn(o)}iR(t,s){if(t!==this.nAt||s!==this.oAt){this.nAt=t,this.oAt=s;const i=this.Zc.IY();for(const e of i)if(e.zR()){for(const h of e.SP())h.r4().q_t();e.bIt().QAt(t,s),e.xIt();for(const r of e.SP()){const n=r.r4();n.vDt(),n.CIt()}}}}hR(){return[this.nAt,this.oAt]}JAt(t,s){this.nAt=t,this.oAt=s}}}{const Ca=self.Os;Ca.tGt=class extends Ca.Kh{constructor(t,s){super(),this.L8=t,this.O8=s,this.P8=Ca.ir(Ca.Wl)}er(){this.P8.er(),this.P8=null}QAt(t,s){if(!this.P8.Yl())throw new Error("grid not empty");this.L8=t,this.O8=s}k8(t,s,i){let e=this.P8.Ks(t,s);return e||(i?(e=Ca.ir(Ca.YAt,this,t,s),this.P8.Set(t,s,e),e):null)}F8(t){const s=Math.floor(t/this.L8);return isFinite(s)?s:0}j8(t){const s=Math.floor(t/this.O8);return isFinite(s)?s:0}z8(e,h,r){if(h)for(let i=h.pu(),t=h.gu();i<=t;++i)for(let t=h.mu(),s=h.yu();t<=s;++t)if(!r||!r.zu(i,t)){const n=this.k8(i,t,!1);n&&(n.c0(e),n.Yl())&&this.P8.Vl(i,t)}if(r)for(let i=r.pu(),t=r.gu();i<=t;++i)for(let t=r.mu(),s=r.yu();t<=s;++t)h&&h.zu(i,t)||this.k8(i,t,!0).E8(e)}B8(t,s){let i=this.F8(t.pu()),e=this.j8(t.mu()),h=this.F8(t.gu()),r=this.j8(t.yu());if(isFinite(h)&&isFinite(r))for(;i<=h;++i)for(let t=e;t<=r;++t){const n=this.k8(i,t,!1);n&&n.D8(s)}}}}{const Ga=self.Os;Ga.YAt=class extends Ga.Kh{constructor(t,s,i){super(),this.b8=t,this.Ja=s,this.Ya=i,this.x8=Ga.ir(Ga.Xl)}er(){this.x8.er(),this.x8=null,this.b8=null}Yl(){return this.x8.Yl()}E8(t){this.x8.sc(t)}c0(t){this.x8.Vl(t)}D8(t){Ga.Wh(t,this.x8.ic())}}}{const Ia=self.Os;Ia.VAt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Ia.Rect,this.HAt=2,this.qAt=null,this.ZAt=0,this.XAt=0,this.KAt=0,this.$At=0,this.tLt=0,this.It=0,this.sLt=1,this.iLt=0,this.eLt=1,this.hLt=0}rLt(){return this.HAt<1+1e-6}$f(){this.HAt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.HAt=2,this.qAt=null,this.ZAt=0,this.XAt=0,this.KAt=0,this.$At=0,this.tLt=0,this.It=0,this.sLt=1,this.iLt=0,this.eLt=1,this.hLt=0,this}nLt(){if(!1!==this.rLt()){const t=this.dx*this.HAt,s=this.dy*this.HAt,i=Math.hypot(t,s),e=t/i,h=s/i,r=(this.It=i-1e-6,this.$At=this.x1+e*this.It,this.tLt=this.y1+h*this.It,this.ZAt=Math.atan2(this.KAt,this.XAt)+Math.PI/2,this.sLt=Math.cos(this.ZAt),this.iLt=Math.sin(this.ZAt),e*this.sLt+h*this.iLt);if(this.eLt=e-2*this.sLt*r,this.hLt=h-2*this.iLt*r,0<r){const n=Math.PI;this.ZAt=Ia.cr(this.ZAt+n),this.sLt=-this.sLt,this.iLt=-this.iLt}}}oLt(t,s,i,e,h){const r=Ia.nn(this.x1,this.y1,this.x2,this.y2,s,i,e,h);0<=r&&r<this.HAt&&(this.HAt=r,this.qAt=t.DF(),this.XAt=s-e,this.KAt=i-h)}WAt(t,s,i,e){const h=s+e.pu(),r=s+e.gu(),n=i+e.mu(),o=i+e.yu();this.oLt(t,h,n,r,n),this.oLt(t,r,n,r,o),this.oLt(t,r,o,h,o),this.oLt(t,h,o,h,n)}UAt(t,s){const i=s.qr(),e=s.Zr(),h=s.Xr(),r=s.Kr(),n=s.$r(),o=s.tn(),a=s.sn(),u=s.hn();this.oLt(t,i,e,h,r),this.oLt(t,h,r,n,o),this.oLt(t,n,o,a,u),this.oLt(t,a,u,i,e)}BAt(i,e,h,t){const r=t.El();for(let t=0,s=r.length;t<s;t+=2){const n=(t+2)%s,o=r[t]+e,a=r[t+1]+h,u=r[n]+e,l=r[1+n]+h;this.oLt(i,o,a,u,l)}}}}{const C=self.Os,Na=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Ea=new Set(["high","low"]),_a=self.ys,xh=_a.Ts,vh=_a.Cs,Da=xh.create(),Aa=C.ir(C.Qu),I=C.ir(C.Rect);C.aLt=class extends C.Kh{constructor(t){super(),this.Zc=t,this.uLt=[],this.lLt=!1,this.cLt=null,this.fLt=null,this.dLt=null,this.pLt="high-performance",this.mLt=!1,this.gLt=0,this.yLt=0,this.MLt="",this.wLt=0,this.SLt=0,this.TLt=0,this.bLt=0,this.xLt=0,this.vLt=0,this.wy="normalized",this.CLt=0,this.GLt=1,this.ILt=1e4,this.qy=!0,this.NLt=0,this.NA=0,this.EA=0,this.ELt="letterbox-scale",this._Lt="letterbox-scale",this.DLt=0,this.ALt=0,this.LLt=xh.create(),this.OLt="high",this.RLt=this.OLt,this.PLt=!1,this.kLt=[],this.FLt=new Set,this.jLt=self.C3_Shaders,this.zLt=C.ir(C.Jg.AD,{ND:()=>[this.aH(),this.uH()],ED:()=>this.BLt(),_D:t=>this.ULt(t),getTime:()=>this.I4().l3(),DD:()=>this.I4().f4()}),this.WLt=0,this.QLt=0,this.JLt=NaN,this.YLt=null,this.VLt=new Map,this.HLt=NaN,this.qLt=new Map,this.ZLt="",this.XLt=1,this.KLt=C.ir(C.Rect),this.$Lt="",this.tOt=null,this.sOt=null,this.iOt=0,this.eOt=0,this.hOt=-1,this.rOt=0,this.nOt=t=>this.rOt=t.progress,this.oOt=null,this.aOt={uOt:null,lOt:null,cOt:null},this.fOt=0,this.dOt=0,this.pOt=0,this.mOt="fade-in",this.gOt=null,this.yOt=new Promise(t=>this.gOt=t)}MOt(t){this.pLt=t}wOt(t){this.lLt=!!t}SOt(t){this.wy=t}TOt(){return this.wy}bOt(t){this.CLt=t}xOt(t,s){this.GLt=t,this.ILt=s}vOt(t){this.mLt=!!t}async xo(t){let s=t.canvas,i=(this.uLt.push({canvas:s,COt:null}),this.Zc.nj("runtime","window-resize",t=>this.GOt(t)),this.Zc.nj("runtime","fullscreenchange",t=>this.IOt(t)),this.Zc.nj("runtime","fullscreenerror",t=>this.NOt(t)),s.addEventListener("webglcontextlost",t=>this.EOt(t)),s.addEventListener("webglcontextrestored",t=>this._Ot(t)),this.PLt=!!t.isFullscreen,this.MLt=t.cssDisplayMode,navigator.gpu&&this.lLt),e=!1;if(i)try{await this.DOt(!0)}catch(t){this.AOt("WebGPU",t),this.fLt=null}if(!this.xS())try{await this.LOt(!0)}catch(t){this.AOt("WebGL",t),this.cLt=null}if(this.xS()||(e=!0),!this.xS()&&i)try{await this.DOt(!1)}catch(t){this.AOt("WebGPU",t),this.fLt=null}if(!this.xS())try{await this.LOt(!1)}catch(t){this.AOt("WebGL",t),this.cLt=null}const h=this.xS();if(!h)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");h.sS(e),this.fLt&&(this.fLt.OOt=()=>this.ROt(),this.fLt.POt=()=>this.kOt()),"normalized"===this.wy?h.fM():(h.dM(),h.lM(this.CLt)),this.jI(t.windowInnerWidth,t.windowInnerHeight,!0),await this.UDt()}AOt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async DOt(t){const s={oy:this.GLt,uy:this.ILt},i={powerPreference:this.pLt,depth:this.Zc.mV(),failIfMajorPerformanceCaveat:t,FOt:this.Zc.yH(),jOt:this.Zc.zOt(),HN:this.Zc.BOt()};this.fLt=C.ir(C.Jg.WebGPURenderer,s),await this.fLt.jb(this.uLt[0].canvas,i)}async LOt(t){const s={alpha:!0,powerPreference:this.pLt,VN:"xbox-uwp-webview2"!==this.Zc.pR(),depth:this.Zc.mV(),HN:this.Zc.BOt(),failIfMajorPerformanceCaveat:t,oy:this.GLt,uy:this.ILt};this.mLt&&(s.qN=1),this.cLt=C.ir(C.Jg.KN,this.uLt[0].canvas,s),await this.cLt.tM()}async UOt(){if(this.jLt){const t=[];for(const[s,i]of Object.entries(this.jLt)){i.src=i.wgsl;const e=C.Jg.WebGPUShaderProgram.mv();t.push(this.fLt.t_(Object.assign({Pb:e,name:s},i)))}await Promise.all(t)}}async WOt(){if(this.jLt){const s=[];for(const[i,e]of Object.entries(this.jLt)){let t;if(e.glslWebGL2&&2<=this.cLt.T2())e.src=e.glslWebGL2,t=C.Jg.Ob.gv();else{if(!e.glsl)throw new Error(`shader '${i}' does not support WebGL 1`);e.src=e.glsl,t=C.Jg.Ob.mv()}s.push(this.cLt.t_(Object.assign({Pb:t,name:i},e)))}await Promise.all(s),this.cLt.s_(),this.cLt.vM()}this.cLt.mD()&&(this.YLt=C.ir(C.Jg.kN,this.cLt))}async UDt(){this.fLt?await this.UOt():this.cLt&&await this.WOt();const t=this.xS();t.$w(this.qy),t.mD()&&(this.JLt=0);for(const s of this.Zc.QOt()){for(const i of s.RP())i.UDt(t);s.UDt(t),s.wz()}this.dLt=new self.R6(this.Zc,t)}er(){this.Zc=null,this.cLt=null,this.uLt.length=0}bO(){return this.Zc.bO()}GOt(t){const s=this.Zc;if(!s.JOt()){const i=t.devicePixelRatio,e=(this.bO()&&(self.devicePixelRatio=i),s.YOt(i),this.PLt=!!t.isFullscreen,this.MLt=t.cssDisplayMode,this.jI(t.innerWidth,t.innerHeight),s.f4(),new C.Event("window-resize")),h=(e.data=t,s.Af().Uf(e),new C.Event("resize"));h.VOt=this.bR(),h.HOt=this.vR(),h.qOt=this.GR(),h.ZOt=this.NR(),s.Sq(h),s.Tq()&&(s.J1t()||self.C3Debugger.IsDebuggerPaused())&&s.hL()}}IOt(t){this.PLt=!!t.isFullscreen,this.jI(t.innerWidth,t.innerHeight,!0),this.Zc.f4()}NOt(t){this.PLt=!!t.isFullscreen,this.jI(t.innerWidth,t.innerHeight,!0),this.Zc.f4()}jI(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.gLt!==t||this.yLt!==s||i){this.gLt=t,this.yLt=s;const e=this.XOt();"letterbox-scale"===e?this.KOt(t,s):"letterbox-integer-scale"===e?this.$Ot(t,s):"off"===e?this.t3t(t,s):this.s3t(t,s),this.i3t(e);for(const{canvas:n}of this.uLt)n.width=this.TLt,n.height=this.bLt;this.Zc.$c("canvas","update-size",{marginLeft:this.xLt,marginTop:this.vLt,styleWidth:this.wLt,styleHeight:this.SLt,displayScale:this.RU()});const h=this.xS();h.jI(this.TLt,this.bLt,!0);for(const o of this.kLt)h.uD(o);C.Dn(this.kLt),this.e3t();const r=this.Zc.j3();r.Wq(),r.Qq()}}e3t(){this.xS().mM(this.LLt,this.aH()/this.uH())}lH(){return this.LLt}KOt(t,s){const i=this.Zc.ER(),e=this.Zc.vO(),h=this.Zc.GO(),r=e/h,n=t/s;if(r<n){const o=s*r;this.wLt=Math.round(o),this.SLt=s,this.xLt=Math.floor((t-this.wLt)/2),this.vLt=0}else{const a=t/r;this.wLt=t,this.SLt=Math.round(a),this.xLt=0,this.vLt=Math.floor((s-this.SLt)/2)}this.TLt=Math.round(this.wLt*i),this.bLt=Math.round(this.SLt*i),this.Zc.h3t(e,h)}$Ot(t,s){let i=this.Zc.ER(),e=(1!==i&&(t+=1,s+=1),this.Zc.vO()),h=this.Zc.GO(),r=e/h,n=t/s,o;if(r<n){const a=s*r;o=a*i/e}else{const u=t/r;o=u*i/h}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.TLt=Math.round(e*o),this.bLt=Math.round(h*o),this.wLt=this.TLt/i,this.SLt=this.bLt/i,this.xLt=Math.max(Math.floor((t-this.wLt)/2),0),this.vLt=Math.max(Math.floor((s-this.SLt)/2),0),this.Zc.h3t(e,h)}s3t(t,s){const i=this.Zc.ER(),e=(this.wLt=t,this.SLt=s,this.TLt=Math.round(this.wLt*i),this.bLt=Math.round(this.SLt*i),this.xLt=0,this.vLt=0,this.RU());this.Zc.h3t(this.wLt/e,this.SLt/e)}t3t(t,s){const i=this.Zc.ER();this.wLt=this.Zc.rV(),this.SLt=this.Zc.nV(),this.TLt=Math.round(this.wLt*i),this.bLt=Math.round(this.SLt*i),this.r3t()?(this.xLt=Math.floor((t-this.wLt)/2),this.vLt=Math.floor((s-this.SLt)/2)):(this.xLt=0,this.vLt=0),this.Zc.h3t(this.Zc.rV(),this.Zc.nV())}i3t(i){if("high"===this.OLt)this.NA=this.TLt,this.EA=this.bLt,this.RLt="high";else{let t,s;if(s="off"===this.XOt()?(t=this.Zc.rV(),this.Zc.nV()):(t=this.Zc.vO(),this.Zc.GO()),this.TLt<t||this.bLt<s)this.NA=this.TLt,this.EA=this.bLt,this.RLt="high";else if(this.NA=t,this.EA=s,this.RLt="low","scale-inner"===i){const e=t/s,h=this.gLt/this.yLt;h<e?this.NA=this.EA*h:e<h&&(this.EA=this.NA/h)}else if("scale-outer"===i){const r=t/s,n=this.gLt/this.yLt;r<n?this.NA=this.EA*n:n<r&&(this.EA=this.NA/n)}}}I4(){return this.Zc}n3t(){return this.uLt[0].canvas}zJ(){return this.zLt}r3t(){return this.PLt}o3t(){return this.MLt}a3t(t){if(!Na.has(t))throw new Error("invalid fullscreen mode");this.ELt=t;const s=this.Zc.j3();s.Wq(),s.Qq()}LU(){return this.ELt}u3t(t){if(!Na.has(t))throw new Error("invalid fullscreen mode");this._Lt=t;const s=this.Zc.j3();s.Wq(),s.Qq()}l3t(){return this._Lt}XOt(){return this.r3t()?this.l3t():this.LU()}c3t(t){if(!Ea.has(t))throw new Error("invalid fullscreen scaling quality");this.OLt=t,this.Zc.j3().Wq()}f3t(){return this.OLt}MH(){return this.RLt}static d3t(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}SU(){return this.gLt}TU(){return this.yLt}aH(){return this.NA}uH(){return this.EA}$w(t){this.qy=!!t}p3t(t){this.NLt=t}g8(){return this.NLt}m3t(){return this.xS().pN()}EOt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.kLt=[],this.FLt.clear(),this.zLt.JS(),this.cLt.JS(),this.Zc.M9()}ROt(){console.log("[Construct] WebGPU device lost"),this.kLt=[],this.FLt.clear(),this.zLt.JS(),this.Zc.M9()}async _Ot(t){await this.cLt.YS(),await this.UDt(),await this.Zc.g3t(),console.log("[Construct] WebGL context restored")}async kOt(){await this.UDt(),await this.Zc.g3t(),console.log("[Construct] WebGPU device restored")}y3t(){return this.cLt}M3t(){return this.fLt}xS(){return this.fLt||this.cLt}XGt(){return this.dLt}yR(){let t="";return t=this.Zc.M3t()?"webgpu":"webgl"+this.Zc.y3t().T2(),this.Zc.xS().iS()&&(t+="-software"),t}SR(){return this.Zc.M3t()?this.Zc.M3t().GetAdapterInfoString():this.Zc.y3t().vD()}pF(){return"low"===this.RLt?1/this.Zc.ER():this.RU()}RU(){const t=this.XOt();if("off"===t||"crop"===t)return 1;const s=this.Zc.vO(),i=this.Zc.GO(),e=s/i,h=this.TLt/this.bLt;return"scale-inner"!==t&&e<h||"scale-inner"===t&&h<e?this.SLt/i:this.wLt/s}UH(){return"low"===this.MH()?1:this.RU()}zH(){return"low"===this.MH()?1:this.Zc.ER()}w3t(t,s){this.DLt=t,this.ALt=s}TW(s,i,e,t=!0){i=i||this.NA,e=e||this.EA;const h=i/2+this.DLt,r=e/2+this.ALt;if(t){let t=this.lH();i===this.NA&&e===this.EA||(s.mM(Da,i/e),t=Da),s.e_(t)}const n=s.wM(h,r,s.iM(e),h,r,0,e);s.u_(n)}S3t(t,s=!0){const i=this.bR(),e=this.vR(),h=i/2,r=e/2,n=(s&&t.e_(this.lH()),t.wM(h,r,t.iM(e),h,r,0,e));t.u_(n)}GR(){return this.TLt}NR(){return this.bLt}bR(){return this.wLt}vR(){return this.SLt}rF(){return this.xLt}nF(){return this.vLt}s9(){return this.uLt.length}T3t(){return"undefined"!=typeof OffscreenCanvas&&this.n3t()instanceof OffscreenCanvas&&("Chromium"!==C.hi.ci||124<=C.hi.li)}async x9(e,h=!1){if(e<1)throw new Error("invalid HTML layer count");if(this.uLt.length!==e){let t=this.Zc.j3().R3(),s={count:e,layersDomState:t.RY().filter(t=>t.Ak()).map(t=>t.FV()),immediate:h,marginLeft:this.xLt,marginTop:this.vLt,styleWidth:this.wLt,styleHeight:this.SLt},i;if(i=this.bO()?await this.Zc.m4("canvas","set-html-layer-count",s):self.c3_runtimeInterface._OnSetHTMLLayerCount(s),e<this.uLt.length)this.uLt.length=e;else for(const r of i.addedCanvases){r.width=this.TLt,r.height=this.bLt;const n=this.T3t()?"bitmaprenderer":"2d",o=r.getContext(n);if(!o)throw new Error(`failed to acquire '${n}' canvas context`);this.uLt.push({canvas:r,COt:o})}this.Zc.f4()}}yq(t){if(!(t>=this.uLt.length)){const s=this.n3t(),i=this.uLt[t].COt;this.T3t()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}}wH(s){s.depth=this.Zc.mV();let t=this.kLt,i=t.findIndex(t=>t.Nb(s)),e;return-1!==i?(e=t[i],t.splice(i,1)):e=this.xS().hD(s),this.FLt.add(e),e}UJ(t){if(!this.FLt.has(t))throw new Error("render target not in use");this.FLt.delete(t),this.kLt.push(t)}BLt(){const t={$T:this.Zc.IO()};return"low"===this.MH()&&(t.width=this.aH(),t.height=this.uH()),this.wH(t)}ULt(t){this.UJ(t)}*b3t(){for(const t of this.Zc.j3().zq())for(const s of t.XP()){const i=this.VLt.get(s);i&&(yield i)}}pH(t){if(!this.xS().mD())return null;let s=this.VLt.get(t);return s||(s={_j:t,name:t.Uc(),x3t:C.ir(C.Jg.kN,this.cLt),v3t:0,C3t:0,G3t:0},this.VLt.set(t,s)),s.x3t}I3t(){const t=this.xS();if(t.mD()&&0===this.QLt){this.QLt=t.Xw(),this.HLt=NaN;for(const s of this.b3t())s.v3t=NaN}}N3t(){this.cLt&&this.cLt.mD()&&this.E3t(),this.fLt&&this.fLt.mD()&&this._3t()}E3t(){if(isNaN(this.HLt)&&(this.HLt=this.YLt.QN(this.WLt,this.QLt),!isNaN(this.HLt))){if(this.Zc.Tq())for(const t of this.b3t())if(t.v3t=t.x3t.QN(this.WLt,this.QLt),isNaN(t.v3t))return;if(this.YLt.JN(this.QLt),this.JLt=Math.min(this.HLt,1),this.Zc.Tq()){const i=new Map;for(const h of this.b3t())h.x3t.JN(this.QLt),h.C3t=Math.min(h.v3t,1),i.set(h._j,h.C3t);for(const r of this.b3t()){const n=r._j,o=i.get(n)||0,a=o-n.bk().reduce((t,s)=>t+(i.get(s)||0),0);r.G3t=C.lr(a,0,1)}const s=this.Zc.R3(),e=this.JLt-s.RY().reduce((t,s)=>t+(i.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(C.lr(e,0,1),this.JLt,[...this.b3t()])}this.WLt=this.QLt,this.QLt=0}}D3t(){return this.YLt}_3t(){if(0!==this.QLt){for(let t=this.WLt;t<this.QLt;++t){const i=this.qLt.get(t);if(i&&!i.GN())return}let t=this.Zc.R3(),n=C.Oo(t.H7()+1,0),s=0;for(let t=this.WLt;t<this.QLt;++t){const o=this.qLt.get(t);if(o){let i=o.IN(),e=BigInt(0),h=BigInt(0),r=BigInt(0);for(let t=0,s=Math.min(n.length,i.length/2);t<s;++t){const l=i[2*t],c=i[2*t+1],f=(l!==r&&(e===r||l<e)&&(e=l),c>h&&(h=c),c-l),d=Number(f)/1e9;n[t]+=d}const a=h-e,u=Number(a)/1e9;s+=u}}if(this.JLt=C.lr(s,0,1),this.Zc.Tq()){const e=t.XP(),h=new Map;for(let t=0,s=Math.min(e.length,n.length-1);t<s;++t){const g=n[t+1];h.set(e[t],g)}const r=[],p=new Map;for(const[y,M]of h){const w=[...y.vk()].reduce((t,s)=>t+(h.get(s)||0),0);p.set(y,w),r.push({name:y.Uc(),G3t:C.lr(M,0,1),C3t:C.lr(w,0,1)})}const m=this.JLt-t.RY().reduce((t,s)=>t+(p.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(C.lr(m,0,1),this.JLt,r)}for(let t=this.WLt;t<this.QLt;++t)this.qLt.delete(t);this.WLt=this.QLt,this.QLt=0}}A3t(t){this.qLt.set(this.fLt.Xw(),t)}v3(){return this.JLt}L3t(t,s,i,e,h,r){return this.ZLt=t,this.XLt=s,this.KLt.nu(i,e,h,r),this.tOt||(this.tOt=new Promise(t=>{this.sOt=t})),this.tOt}O3t(){if(this.ZLt){let t=this.n3t(),s=this.KLt,i=C.lr(Math.floor(s.pu()),0,t.width),e=C.lr(Math.floor(s.mu()),0,t.height),h=s.width(),r=(h=0===h?t.width-i:C.lr(Math.floor(h),0,t.width-i),s.height());if(r=0===r?t.height-e:C.lr(Math.floor(r),0,t.height-e),(0!==i||0!==e||h!==t.width||r!==t.height)&&0<h&&0<r){const n=C.xo(h,r),o=n.getContext("2d");o.drawImage(t,i,e,h,r,0,0,h,r),t=n}C.vo(t,this.ZLt,this.XLt).then(t=>{this.$Lt&&URL.revokeObjectURL(this.$Lt),this.$Lt=URL.createObjectURL(t),this.tOt=null,this.sOt(this.$Lt)}),this.ZLt="",this.XLt=1}}R3t(){return this.$Lt}P3t(t){t?this.iOt++:this.iOt--}k3t(){return 0<this.iOt}F3t(t){const s=this.xS();if(2===t)this.oOt=C.ir(C.Jg.uS,this.xS()),this.oOt.pI("Arial"),this.oOt.mI(16),this.oOt.EI("center"),this.oOt.DI("center"),this.oOt.jI(300,200);else if(0===t){const i=this.Zc.j3t();i&&i.dW(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.z3t("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSIxNzAwLjc5MDA0cHgiIGhlaWdodD0iMTcwMC43OTAwNHB4IiB2aWV3Qm94PSIyODcgMzE3IDExMjUgMTEyNSINCgkgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTcwMC43OTAwNCAxNzAwLjc5MDA0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJsb2dvIj4NCgk8Zz4NCgkJPGc+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0ZGRkZGRiIgZD0iTTM1NC45Nzc1NCwxMTk1LjYyMzA1DQoJCQkJYzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NjI5LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOGwtNC45MzI2Miw4LjU0MTk5DQoJCQkJYy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNjU2LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMzMiwwLDUuOTYxOTEtMC40NDMzNiw4LjcyNjU2LTEuMjY4NTVjNi4yOTQ5Mi0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTczOCw2LjUwMDk4bDQuOTMxNjQsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM4NDgsNS43MzQzOGMtOS4wMDM5MSw1LjYwMTU2LTE5LjYzMTg0LDguODM3ODktMzEuMDE2Niw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzI5Ni4xNTgyLDEyMjEuOTU3MDMsMzIyLjQ5MjE5LDExOTUuNjIzMDUsMzU0Ljk3NzU0LDExOTUuNjIzMDUNCgkJCQlMMzU0Ljk3NzU0LDExOTUuNjIzMDV6IE03MDMuMjE0ODQsMTI1OS4xNzU3OGMtMTQuNTU5NTctOS44MTczOC0yMC4yMDMxMy0yMC4wMzIyMy0yMC4yMDMxMy0zMy4wODAwOA0KCQkJCWMwLTE4LjQ4OTI2LDE1LjcxNDg0LTI5Ljc2MzY3LDM4LjI2NjYtMjkuNzYzNjdjOS42NTcyMywwLDE4LjcyMTY4LDIuNTQyOTcsMjYuNTU5NTcsNi45OTQxNA0KCQkJCWMyLjA0OTgsMS4xNjQwNiwyLjc2MTcyLDMuNzgzMiwxLjU4MzAxLDUuODI0MjJsLTMuNDE3OTcsNS45MTk5MmMtMy4yNDcwNyw1LjYyNDAyLTkuOTA4Miw4LjMzMTA1LTE2LjE1MzMyLDYuNTQ4ODMNCgkJCQljLTIuNzIzNjMtMC43NzYzNy01LjU5ODYzLTEuMTkyMzgtOC41NzEyOS0xLjE5MjM4Yy0xMC40OTAyMywwLTExLjU5ODYzLDkuNTc2MTctNC44NTc0MiwxNC4xMjMwNWwyMy42ODY1MiwxNS45NzY1Ng0KCQkJCWM5Ljk5MDIzLDYuNzM4MjgsMTUuODk1NTEsMTcuMDY2NDEsMTUuODk1NTEsMjguNzE4NzVjMCwxOC43ODYxMy0xNS4wMDY4NCwzMy4zMDc2Mi0zOC4yNjc1OCwzMy4zMDc2Mg0KCQkJCWMtOS41MjI0NiwwLTE4LjU4Nzg5LTEuOTU3MDMtMjYuODE1NDMtNS40OTAyM2MtNy43ODEyNS0zLjMzOTg0LTEwLjkzMzU5LTEyLjc4MjIzLTYuNjk3MjctMjAuMTE4MTZsMy40ODczLTYuMDQxOTkNCgkJCQljMS4yMTM4Ny0yLjA5OTYxLDMuOTMxNjQtMi43NTk3Nyw1Ljk3NDYxLTEuNDU2MDVjNi44NTkzOCw0LjM4MjgxLDE2LjQ5MDIzLDcuNTk0NzMsMjQuNzU4NzksNy41OTQ3Mw0KCQkJCWMxMC41NDU5LDAsMTEuMzI4MTMtOS45NTg5OCwzLjc2NzU4LTE1LjA1NzYyTDcwMy4yMTQ4NCwxMjU5LjE3NTc4TDcwMy4yMTQ4NCwxMjU5LjE3NTc4eiBNOTg0LjYzMDg2LDEyMDIuMDAwOTgNCgkJCQljMC0yLjM0NzY2LDEuOTAzMzItNC4yNTE5NSw0LjI1MTk1LTQuMjUxOTVoOS45MjE4OGM3LjgyNzE1LDAsMTQuMTcyODUsNi4zNDU3LDE0LjE3Mjg1LDE0LjE3MzgzdjU3LjQwMTM3DQoJCQkJYzAsOC42MTAzNSw2Ljk4MDQ3LDE1LjU5MDgyLDE1LjU5MDgyLDE1LjU5MDgyczE1LjU5MDgyLTYuOTgwNDcsMTUuNTkwODItMTUuNTkwODJ2LTU3LjQwMTM3DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoOS45MjA5YzIuMzQ4NjMsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2NjcuMzIzMjQNCgkJCQljMCwyNC4yNjU2My0xOS42NzA5LDQzLjkzNzUtNDMuOTM2NTIsNDMuOTM3NXMtNDMuOTM3NS0xOS42NzE4OC00My45Mzc1LTQzLjkzNzVWMTIwMi4wMDA5OEw5ODQuNjMwODYsMTIwMi4wMDA5OHoNCgkJCQkgTTQ2Ni44NjkxNCwxMTk1LjYyMzA1YzMyLjQ4NDM4LDAsNTguODE4MzYsMjYuMzMzOTgsNTguODE4MzYsNTguODE5MzRjMCwzMi40ODQzOC0yNi4zMzM5OCw1OC44MTkzNC01OC44MTgzNiw1OC44MTkzNA0KCQkJCWMtMzIuNDg2MzMsMC01OC44MTkzNC0yNi4zMzQ5Ni01OC44MTkzNC01OC44MTkzNEM0MDguMDQ5OCwxMjIxLjk1NzAzLDQzNC4zODI4MSwxMTk1LjYyMzA1LDQ2Ni44NjkxNCwxMTk1LjYyMzA1DQoJCQkJTDQ2Ni44NjkxNCwxMTk1LjYyMzA1eiBNNDY2Ljg2OTE0LDEyMjUuMDMzMmMtMTYuMjQzMTYsMC0yOS40MTAxNiwxMy4xNjY5OS0yOS40MTAxNiwyOS40MDkxOA0KCQkJCXMxMy4xNjY5OSwyOS40MDgyLDI5LjQxMDE2LDI5LjQwODJjMTYuMjQxMjEsMCwyOS40MDgyLTEzLjE2NjAyLDI5LjQwODItMjkuNDA4MlM0ODMuMTEwMzUsMTIyNS4wMzMyLDQ2Ni44NjkxNCwxMjI1LjAzMzINCgkJCQlMNDY2Ljg2OTE0LDEyMjUuMDMzMnogTTU1Ni43MzI0MiwxMzExLjEzNDc3Yy0yLjM0NzY2LDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtOTQuOTYxOTENCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzM4My0xNC4xNzM4M2gzLjk1ODk4YzQuNjI1LDAsOC45NTg5OCwyLjI1Njg0LDExLjYxMTMzLDYuMDQ1OWw0MS4xMjIwNyw1OC43NDcwN3YtNTAuNjE5MTQNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2g5LjkyMTg4YzIuMzQ3NjYsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2OTQuOTYwOTQNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3MzgzLDE0LjE3Mjg1aC0zLjk1ODk4Yy00LjYyNSwwLTguOTU4OTgtMi4yNTU4Ni0xMS42MTEzMy02LjA0NDkybC00MS4xMjIwNy01OC43NDYwOXY1MC42MTgxNg0KCQkJCWMwLDcuODI5MS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVINTU2LjczMjQyTDU1Ni43MzI0MiwxMzExLjEzNDc3eiBNMTIxNS4wMjA1MSwxMjExLjkyMjg1DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoNTAuMzE1NDNjMi4zNDg2MywwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyDQoJCQkJYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVoLTYuMDI0NDF2NzUuMTE4MTZjMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMTg4DQoJCQkJYy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtODUuMDQxMDJoLTE1Ljk0NDM0Yy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMzMyLTQuMjUxOTUtNC4yNTE5NVYxMjExLjkyMjg1DQoJCQkJTDEyMTUuMDIwNTEsMTIxMS45MjI4NXogTTc3Ni40NDkyMiwxMjExLjkyMjg1YzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTczODMtMTQuMTczODNoNTAuMzE0NDUNCgkJCQljMi4zNDk2MSwwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcxODgsMTQuMTcyODVoLTYuMDI1Mzl2NzUuMTE4MTYNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMDljLTIuMzQ5NjEsMC00LjI1MTk1LTEuOTAyMzQtNC4yNTE5NS00LjI1di04NS4wNDEwMmgtMTUuOTQ1MzENCgkJCQljLTIuMzQ3NjYsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMTEuOTIyODVMNzc2LjQ0OTIyLDEyMTEuOTIyODV6IE05MjkuNjA0NDksMTI3Mi4wMjI0NmwyNi45NTgwMSwzMi4xMjc5Mw0KCQkJCWMyLjMxNDQ1LDIuNzU3ODEsMC4zNDM3NSw2Ljk4NDM4LTMuMjU2ODQsNi45ODQzOGgtMTkuNzA1MDhjLTQuMTg5NDUsMC04LjE2NTA0LTEuODUxNTYtMTAuODU3NDItNS4wNjA1NWwtMjIuNjgxNjQtMjcuMDMxMjUNCgkJCQl2MjcuODQxOGMwLDIuMzQ3NjYtMS45MDMzMiw0LjI1LTQuMjUxOTUsNC4yNWgtOS45MjA5Yy03LjgyNzE1LDAtMTQuMTcyODUtNi4zNDM3NS0xNC4xNzI4NS0xNC4xNzI4NXYtODUuMDM5MDYNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2gyOS43NjM2N2MyMi43MDAyLDAsNDEuMTAyNTQsMTcuMTMzNzksNDEuMTAyNTQsMzguMjY4NTUNCgkJCQlDOTU2Ljc1NDg4LDEyNTIuNTkwODIsOTQ1LjQzNjUyLDEyNjYuNzAyMTUsOTI5LjYwNDQ5LDEyNzIuMDIyNDZMOTI5LjYwNDQ5LDEyNzIuMDIyNDZ6IE05MDAuMDYxNTIsMTIyMS44NDM3NXYzMi41OTg2M2g4LjUwMzkxDQoJCQkJYzEwLjk1ODk4LDAsMTkuODQyNzctNy4yOTc4NSwxOS44NDI3Ny0xNi4yOTg4M2MwLTkuMDAxOTUtOC44ODM3OS0xNi4yOTk4LTE5Ljg0Mjc3LTE2LjI5OThIOTAwLjA2MTUyTDkwMC4wNjE1MiwxMjIxLjg0Mzc1eg0KCQkJCSBNMTE1OC4zNTkzOCwxMTk1LjYyMzA1YzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NzI3LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOA0KCQkJCWwtNC45MzI2Miw4LjU0MTk5Yy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNTU5LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMyMjMsMCw1Ljk2MDk0LTAuNDQzMzYsOC43MjU1OS0xLjI2ODU1YzYuMjk1OS0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTgzNiw2LjUwMDk4bDQuOTMwNjYsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM3NSw1LjczNDM4Yy05LjAwNDg4LDUuNjAxNTYtMTkuNjMyODEsOC44Mzc4OS0zMS4wMTc1OCw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzEwOTkuNTQwMDQsMTIyMS45NTcwMywxMTI1Ljg3NDAyLDExOTUuNjIzMDUsMTE1OC4zNTkzOCwxMTk1LjYyMzA1eiIvPg0KCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMwMEZGREEiIGQ9Ik0xMzE4LjE5NzI3LDEyMDYuMDMyMjMNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2MyMC42NTYyNSwwLDQxLjMxMjUsMCw2MS45Njg3NSwwYzMuNDI5NjksMCw1LjQ1MDIsMy44ODA4NiwzLjQ4MzQsNi42OTA0Mw0KCQkJCWwtMTkuMjk2ODgsMjcuNTY3MzhjMTUuNTQyOTcsOC4zNzU5OCwyNi4xMDY0NSwyNC44MDA3OCwyNi4xMDY0NSw0My42OTUzMWMwLDI3LjM5NzQ2LTIyLjIwODk4LDQ5LjYwNjQ1LTQ5LjYwNjQ1LDQ5LjYwNjQ1DQoJCQkJYy0xNi42ODg0OCwwLTMxLjQ1MTE3LTguMjQwMjMtNDAuNDQzMzYtMjAuODc1OThjLTEuNDUwMi0yLjAzOTA2LTAuODMxMDUtNC44OTk0MSwxLjMzNTk0LTYuMTUyMzRsMTAuOTc3NTQtNi4zMzc4OQ0KCQkJCWM0Ljg4MTg0LTIuODE4MzYsMTAuOTc5NDktMi40NzU1OSwxNS41MTQ2NSwwLjg3MzA1YzMuNTI4MzIsMi42MDU0Nyw3Ljg5MTYsNC4xNDY0OCwxMi42MTUyMyw0LjE0NjQ4DQoJCQkJYzExLjc0MjE5LDAsMjEuMjU5NzctOS41MTg1NSwyMS4yNTk3Ny0yMS4yNTk3N3MtOS41MTc1OC0yMS4yNTk3Ny0yMS4yNTk3Ny0yMS4yNTk3N2gtMTUuMjE3NzcNCgkJCQljLTMuNDI5NjksMC01LjQ1MDItMy44ODA4Ni0zLjQ4NDM4LTYuNjkwNDNsMTguMTM1NzQtMjUuOTA4MmgtMzIuMDA5NzdjLTIuMzQ4NjMsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMDYuMDMyMjN6DQoJCQkJIi8+DQoJCTwvZz4NCgkJPGc+DQoJCQk8Zz4NCgkJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0RBRThGNyIgZD0iTTg1MC4zOTU1MSw4NTcuNTkxOA0KCQkJCQljLTUwLjM1NjQ1LDAtOTQuMzI1Mi0yNy4zNTY0NS0xMTcuODUyNTQtNjguMDIwNTFsLTgwLjAzMDI3LDQ2LjIwNDFjLTQuNjU1MjcsMi42ODk0NS02LjEzMTg0LDguNzE4NzUtMy4yNDkwMiwxMy4yNTU4Ng0KCQkJCQljNDIuMjM3Myw2Ni40ODYzMywxMTYuNTMzMiwxMTAuNjA3NDIsMjAxLjEzMTg0LDExMC42MDc0MmM4OC4xMjU5OCwwLDE2NS4wNzEyOS00Ny44NzUsMjA2LjI0MzE2LTExOS4wMzYxM2wtODAuNDg3My00Ni40Njk3Mw0KCQkJCQljLTQuMzEzNDgtMi40OTAyMy05LjgwMTc2LTEuMjA1MDgtMTIuNTcwMzEsMi45MzU1NUM5MzkuMTc1NzgsODMzLjU2MjUsODk3LjU5MTgsODU3LjU5MTgsODUwLjM5NTUxLDg1Ny41OTE4DQoJCQkJCUw4NTAuMzk1NTEsODU3LjU5MTh6IE0xMTM2LjcyMTY4LDU1Ni4yMTc3N2M0LjYxNDI2LTIuNjYzMDksNi4xMTAzNS04LjYxOTE0LDMuMzEyNS0xMy4xNTEzNw0KCQkJCQljLTU5LjkxNTA0LTk3LjAzMDI3LTE2Ny4yMjQ2MS0xNjEuNjk0MzQtMjg5LjYzODY3LTE2MS42OTQzNGMtMTI1Ljg5MzU1LDAtMjM1LjgxMzQ4LDY4LjM5MjU4LTI5NC42MzM3OSwxNzAuMDQ5OA0KCQkJCQlsODAuMzc2OTUsNDYuNDA2MjVjNC4zOTc0NiwyLjUzOTA2LDEwLjAwMTk1LDEuMTQ5NDEsMTIuNzEwOTQtMy4xNDU1MQ0KCQkJCQljNDIuMTY0MDYtNjYuODUxNTYsMTE2LjY2ODk1LTExMS4yNjM2NywyMDEuNTQ1OS0xMTEuMjYzNjdjODguMTI1OTgsMCwxNjUuMDcxMjksNDcuODc1OTgsMjA2LjI0MzE2LDExOS4wMzYxMw0KCQkJCQlMMTEzNi43MjE2OCw1NTYuMjE3Nzd6Ii8+DQoJCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNBNUJBQzgiIGQ9Ik04NTAuMzk1NTEsOTU5LjYzODY3DQoJCQkJCWMtODQuNTk4NjMsMC0xNTguODk0NTMtNDQuMTIxMDktMjAxLjEzMTg0LTExMC42MDc0MmMtMi44NzY5NS00LjUzMDI3LTEuMzk5NDEtMTAuNTcwMzEsMy4yNDkwMi0xMy4yNTU4Nmw4MC4wMzAyNy00Ni4yMDQxDQoJCQkJCWMtMTEuNTgxMDUtMjAuMDE2Ni0xOC4yMDk5Ni00My4yNTQ4OC0xOC4yMDk5Ni02OC4wNDE5OWMwLTc0Ljc4NTE2LDYwLjU1NzYyLTEzNi4wNjI1LDEzNi4wNjI1LTEzNi4wNjI1DQoJCQkJCWM0Ny4xOTYyOSwwLDg4Ljc4MDI3LDI0LjAyOTMsMTEzLjE4NTU1LDYwLjUyMjQ2YzIuNzY0NjUsNC4xMzM3OSw4LjI2MzY3LDUuNDIxODgsMTIuNTcwMzEsMi45MzU1NWw4MC40ODczLTQ2LjQ2OTczDQoJCQkJCWMtNDEuMTcxODgtNzEuMTYwMTYtMTE4LjExNzE5LTExOS4wMzYxMy0yMDYuMjQzMTYtMTE5LjAzNjEzYy04NC44NzY5NSwwLTE1OS4zODE4NCw0NC40MTIxMS0yMDEuNTQ1OSwxMTEuMjYzNjcNCgkJCQkJYy0yLjcwNjA1LDQuMjkxMDItOC4zMTgzNiw1LjY4MTY0LTEyLjcxMDk0LDMuMTQ1NTFsLTgwLjM3Njk1LTQ2LjQwNjI1DQoJCQkJCWMtMjguOTUyMTUsNTAuMDQwMDQtNDUuNTIzNDQsMTA4LjEzOTY1LTQ1LjUyMzQ0LDE3MC4xMDc0MmMwLDE4Ni45NjM4NywxNTEuMzk0NTMsMzQwLjE1NzIzLDM0MC4xNTcyMywzNDAuMTU3MjMNCgkJCQkJYzEyMi40MTQwNiwwLDIyOS43MjM2My02NC42NjQwNiwyODkuNjM4NjctMTYxLjY5NTMxYzIuNzk0OTItNC41MjYzNywxLjI5NDkyLTEwLjQ5MDIzLTMuMzEyNS0xMy4xNTEzN2wtODAuMDgzMDEtNDYuMjM3Mw0KCQkJCQlDMTAxNS40NjY4LDkxMS43NjM2Nyw5MzguNTIxNDgsOTU5LjYzODY3LDg1MC4zOTU1MSw5NTkuNjM4Njd6Ii8+DQoJCQk8L2c+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzAwRkZEQSIgZD0iTTExMzcuMTg1NTUsNzU4LjExMzI4di03My4xNjc5N2wtNjMuMzY1MjMsMzYuNTgzOTgNCgkJCQlMMTEzNy4xODU1NSw3NTguMTEzMjhMMTEzNy4xODU1NSw3NTguMTEzMjh6IE0xMDI2LjU3NjE3LDcwNS4xNjQwNmwxMjAuMDU4NTktNjkuMzE2NDENCgkJCQljMTIuNTY4MzYtNy4yNTU4NiwyOC4zNDQ3MywxLjg1MjU0LDI4LjM0NTcsMTYuMzY2MjF2MTM4LjYzMDg2Yy0wLjAwMDk4LDE0LjUxMjctMTUuNzc3MzQsMjMuNjIyMDctMjguMzQ1NywxNi4zNjYyMQ0KCQkJCWwtMTIwLjA1ODU5LTY5LjMxNjQxQzEwMTQuMDI4MzIsNzMwLjY0OTQxLDEwMTQuMDI4MzIsNzEyLjQwOTE4LDEwMjYuNTc2MTcsNzA1LjE2NDA2eiIvPg0KCQk8L2c+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=").then(t=>{"done"===this.mOt?s.fb(t):this.aOt.uOt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.B3t("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAmd137hFVqjO7zCKIRGZ881JRAAAFY0lEQVR42u2aPW/bVhSGn1iiPizZ8D+QgSJBNglFmiboQA0NUKAD1XotYA0BOspAkZnqx24vnTrIQNCpg4QkQMcYKDoW9j9w5y6qLNqWFDlvh3tJUa6ddHBhAuS7SKBIQffhuee851CQKVOmTJkyZcqUKXmqa8O+uyNlABKsFRmdP0o5AOle2gHoWdoBzFrpBHACwPeetJNmAFSlt6kGwGH0LqUAVqRuqgHkpEaqAVRkfvOWr+Dh9Rc4j6VvwnrhPNAbgK2ezj+yx7Z6GjUuASi4Ch4lHQAGwBeRK1rROQAdUx5K0hE4NUkaAdS02ZEuoms2wkCSgvYSgFJfkn6CobkSPG0mEcAOrHnGFOxAToHNjk/MygLgO/PxL0BN9yRdQKlufMQAoCdJGi8BOJYknXTJ269cu9HtdqNb4Ni6oimUbFb0dAZQ1DmULJ+TFtT0qQHwg73mLlCMfFUMQPR5VWrbmttNHICC1KDiSZ+w3pMOwFPDhP4IYFtv4ZX0nIorbUBNmjWAiqdZg5fmNFd6jvPhJQDjAV9LI0r28IpmycsBZalNWfoRWJcuoKY9c7cCkwpOwdcIqNT1BmrSgQkNbQAvpAGOF+aHOIBpCxhKR/TVBNjVOHkAOgrg2N6aoU7sklmVidtD7bNm/fIrjaBmk+Sxea142iBnTyguAfjZZscNXLOdXFM8EgVgXRpDz/6yonTEts6AXdV1APTVoKigFSXEmj3XN0kSV01WFQwAHC8O4Mhagye8NgHS137SALzsS3dxwhtXkQ4oaw64eqomOFKXbc2xJbFLTX8DOHYnsKsJu2Gdu8IIuTqjrMB8eyM5ACIFXQo2S5t7lNMM6AdFTaCgADqahHW8EQIohBk9rzEdE+JXAtjVmHWpDTmplUAA96Ea/bJDnVKSWjgaFTSHqubgmjVDXQchgFy4wBXNcXV6LYC8RjbEypomcCAyBopRShxqAn21yenM8WawqjOoKVbmLYBFndeImsnyVwJY1RR8NW1FTRiA6UNTCsP6fKwLONQBZTXx1WVbT0KbtwygvAxg81oAZU0xe2QYxkmyrDDx2DzWBXTUZFs7dNQwHUEMwN4VAKb47wOQ1wj8Gx0+/Y8A8powVJtt7XOoxn8A8N4IqCrA8cJUmzgAl3JAUWN8tSjqDX0NwI/XbwugGLe178oBK7bBaBesm0gggOUqwLrOHe8c1jV2NAMOw/XFAFRth2dr/burANS1cSc0C8kDsB7zAZvgKCjoLTiaFqwpmvwLQC7e2b3PB4CrZj48KXkAKktOEPr6VqeAr680udzEWACluK0LreJ1ThBe6+w4HkfJAhD1AtbAu3qgPcDVX2oCK9bqxwFQ1+fRsVW7va/uBZpAWaND652TCGBoM1rHHN6VmQlsq6cdE+4mC75oLAC49prKB1zTDd6NukHIKahbIkkEsGrmAQWZbZqXNLClrg04dTP4KnjnCwBfmgkZT7WD45k94C8BmA3MPGBgeqcbfQBxwwDsRMi3N7Iqc3dzsuVhV5ofkevpJOoGKUn6Ax5L92F49USoayZCls08uQDiM0ETCWPb8k7DMmH02SICGC7ayVhnsABwEpsZQkfxUpI4ALGpsFn4xCbHcVjnwgnvAkBh0U6CbzqrXgzA1E6FB9YOJGcacgUAfl36t0Ro/SIDUDEL/D1WBcJr5q0oRoJ2LQZgZJ4LPIu2RCPJAJafDLm2Yr2OHmQ4H0vzBksA2PKl38L3fY0aLAFYejK0ZpJhelVKzkj8dlRNzkj8dpRP0DTkVjTUXroB9PVnqtefS9I05BZU8NOdAyUl5q8RtwUg6KYcwP1Up8CanpMpU6ZMmTLdgP4BRYsi23xEdOAAAAAASUVORK5CYII=").then(t=>{"done"===this.mOt?s.fb(t):this.aOt.lOt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.B3t("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAdxHdu4hmVZnuRMwzqiLYE4y2AAAFw0lEQVR42u2Yy+9LQRTHp6Xq0VIkXkFvwkYslAWJiGJj2a6sJJe/oF3YWGElEQmxkYi4ErFWNpatWFmIx9Lm1sJCLKgqraqv82h726l6hOuRzDf53TtnOr+ZOZ+ZOffca5ycnJycnJycnJycnJycnJz+pi7g2G9osxjvzX8qB8ABcAAcgH8XwDa85dspNOiaRDuAR4U0PnHtDuyy7IJRJS6gvVmL6TywVkp4ZxIhulUxFvlaXQTrgEHbnMDH5XRjlXCdb+uAnc2ojWgFFTYBZ8e9tzcaswAk6v/3K4sPfPNRFj87IXj+KXQUS9m2jXoH1lMuLq2DtEcAtNMBT9PjanFq7ySAhbABVEAaeDaAwkk2D7GRqctAMQJIq2sBauLnB/VxCfqKpWrbRhSC1W5SMQ9RTgBUwKpF1ccmAIQ2gCxE+20Au9nSESvDgeIDkJSBMpA9vgyXdsj0H0GORL3n2fbwPOKoSQS4Q2cBOGzSJbQYAHDbZEI+rEuBcyZRlF71fIP/x0wBuIBOw6xH3xu2GQFAP2cegmvSwHkeqBZjECzB46UXD3bg8UKJCT6QYzgDY9uiU7hC11doERq6MAZ2CPJ7ipEulOrteDcB4KOZBpBG7zrV1JGzATzmIdnrl/go3bRiBJBHlZc+6ItjuQQ+yFLz8Gka2LZFRVTFGdoQJQ0LPodHnXkS8AjlRWkBLwKQswAs0PDzGpcsAAMNuG+5WgdqxwjgEcp8qcBjN5oZdPhEvOfhU/hsbJuVloWV6WWgp2IBLxXQNEwLDfKqoMXrEQBjATiFA3qePlgAZJRl+EStdaAQjfgALOC1zfeX8ALV+7S69JdALWjxHGqztmxyMnTD6OOBWvAdGDkn60c6vrI5H4CPnOJsWQDe8G0hIU0MB8ojFx+AFAeqeitLy5FkL3w0yNNcSOx3oDxjjxaH9XxldZluY5NBfwrAQvQbRjQXAO8UqVq5dh6A7HCgWzgdFwBdgOX4lMZbTndkWWkDN07Bk+zItllLdHm1+FkLwBSADNDf8B0AnGOp5gFYgJEexwcgGQx4iyeD9ybFkWsbDZbv0+2Y8XvGtqMpWsUimpMAzA1AUrj5ALjm2wCoONKB+ACYsEeDlU04MMs4imeJQqljslSuD4xl/zgAsx6ku/8DgDwaO9AwFU56qhzOPiXpKCzCpSSdb8v+CQDmXshb99cARAPFCOA1chWaFXlP55yn2FqEgiFvOSzYtmiJzisKB7MxQPS8iO63YsD3AHDv8QPgjR92eKuf9vts1wdZjvZhN4XajD35FNDiR7ln0LYBaILY+OZT4DsA+BkTP4AUrgXkxSJcDFps+72X7EGlx6mBbU/lAbdQjvKA7hSAlSuHxdw0gORsHrAUnXkAUuj+AQAZdHGRp9bShX2ECz1JRSk4zNhRJqj5SZQJfpgCUNS2eRsAP/usTDAxPxFKA834AZgAOM1z6qGgxxpdmUDQNjP25LtAsojxu0AehSkAF6RLXWR/EkAdVYEevQtswVtpMwuAB1JGh2jbxQcgBKrig/qSxTD6o2Nm7fttSY6uUnErV+jb4CJyaArAI5luJkCDOy5HAPISSB5A3wYbhJERahvtPALAAw2EI9Vzsh2TTuk23qEceN9d4vVVv227hNroe0CRi/o9IKTZTQFIAc/M8jwGEiouG2/042u8u25uAuPvAavRH7XhzqcBpICdRpssRa+aNLFoh2JeyBzU08fih/ht20WZXghW34s+/ZQnAKhzojsSH4CC/sjARPKamLXacOfTAIwfNSkCbROLluG9Tm2gdl3PY178tu2SBIpFQ6fHH//2GAvAogCkjtGDEAFQYPsu6DdBqw11bgFIF8dNHsQGIEFRSDOe0RS9YYJk23JMrw+/Cr9bFX0VXmNsACbhA088qXhBrMYAlq8Gjhh//FX4YNSGO7cASO9n9B99AuHk5OTk5OTk5OTk5OTk5OTk5OT0VX0B7+fX+9cwWYYAAAAASUVORK5CYII=").then(t=>{"done"===this.mOt?s.fb(t):this.aOt.cOt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async z3t(t){t=new URL(t,this.Zc.U3t()).toString();const s=await C.mo(t),i=await this.Zc.W3t(s,2048,2048);return this.xS().eD(i,{e2:"high"})}async B3t(t){t=new URL(t,this.Zc.U3t()).toString();const s=await C.mo(t);return this.xS().eD(s,{e2:"high"})}Q3t(){this.Zc.$c("runtime","hide-cordova-splash")}J3t(){this.eOt=Date.now(),this.Zc.Af().addEventListener("loadingprogress",this.nOt),this.hOt=requestAnimationFrame(()=>this.Y3t());const t=this.Zc.V3t();3!==t&&this.Q3t()}async H3t(){const t=this.xS(),s=(this.rOt=1,this.Zc.V3t());4===s&&await this.yOt,this.gOt=null,this.yOt=null,-1!==this.hOt&&(cancelAnimationFrame(this.hOt),this.hOt=-1),this.Zc.Af().removeEventListener("loadingprogress",this.nOt),this.nOt=null,this.oOt&&(this.oOt.er(),this.oOt=null),this.Zc.q3t(),t.Y_(),this.aOt.uOt&&(t.fb(this.aOt.uOt),this.aOt.uOt=null),this.aOt.lOt&&(t.fb(this.aOt.lOt),this.aOt.lOt=null),this.aOt.cOt&&(t.fb(this.aOt.cOt),this.aOt.cOt=null),t.J_(0,0,0,0),t.qw(),this.mOt="done",this.WLt=t.Xw(),3===s&&this.Q3t()}Y3t(){if(-1!==this.hOt){const t=this.xS(),s=(t.Y_(),this.hOt=-1,this.Zc.cO().BQ()),i=this.Zc.V3t();if(3!==i&&(this.S3t(t),t.J_(0,0,0,0),t.y_(),t.vM(),t.w_(null)),0===i)this.Z3t(s);else if(1===i)this.X3t(s,120,0);else if(2===i)this.K3t(s);else if(3===i)C.In();else{if(4!==i)throw new Error("invalid loader style");this.$3t(s)}t.qw(),this.hOt=requestAnimationFrame(()=>this.Y3t())}}K3t(t){t?this.oOt.NI(1,0,0):this.oOt.NI(.6,.6,.6),this.oOt.tf(Math.round(100*this.rOt)+"%");const s=this.wLt/2,i=this.SLt/2,e=(Aa.$u(s-150,i-100,150+s,100+i),this.xS());e.w_(this.oOt.wb()),e.ww(Aa,this.oOt.gN())}X3t(t,s,i){const e=this.xS(),h=(e._M(),t?e.m_(1,0,0,1):e.m_(.118,.565,1,1),this.wLt/2),r=this.SLt/2,n=s/2;I.nu(h-n,r-4+i,Math.floor(s*this.rOt),8),e.Rect(I),I.nu(h-n,r-4+i,s,8),I.offset(-.5,-.5),I.Iu(.5,.5),e.m_(0,0,0,1),e.Cw(I),I.Iu(1,1),e.m_(1,1,1,1),e.Cw(I)}Z3t(t){const s=this.xS(),i=this.Zc.j3t();if(i){const e=i.wb();if(e){const h=e.Xp(),r=e.um(),n=this.wLt/2,o=this.SLt/2,a=h/2,u=r/2;Aa.$u(n-a,o-u,n+a,o+u),s.w_(e),s.Qu(Aa),this.X3t(t,h,16+u)}else this.X3t(t,120,0)}else this.X3t(t,120,0)}$3t(t){let s=this.xS(),i=this.aOt.uOt,e=this.aOt.lOt,h=this.aOt.cOt,r=Date.now(),n=(0===this.fOt&&(this.eOt=r),this.Zc.t4t()||this.Zc.s4t()&&!this.Zc.i4t()),o=n?0:200,a=n?0:3e3,u=1,l=("fade-in"===this.mOt?u=Math.min((r-this.eOt)/300,1):"fade-out"===this.mOt&&(u=Math.max(1-(r-this.pOt)/300,0)),s._M(),s.m_(.231*u,.251*u,.271*u,u),I.set(0,0,this.wLt,this.SLt),s.Rect(I),Math.ceil(this.wLt)),c=Math.ceil(this.SLt),f,d;256<this.SLt?(s.m_(.302*u,.334*u,.365*u,u),f=l,d=Math.max(.005*c,2),I.nu(0,.8*c-d/2,f,d),s.Rect(I),t?s.m_(u,0,0,u):s.m_(.161*u,.953*u,.816*u,u),f=l*this.rOt,I.nu(.5*l-f/2,.8*c-d/2,f,d),s.Rect(I),s.m_(u,u,u,u),s.vM(),e&&(f=1.5*C.lr(.22*c,105,.6*l),d=f/8,I.nu(.5*l-f/2,.2*c-d/2,f,d),s.w_(e),s.Rect(I)),i&&(f=Math.min(.395*c,.95*l),d=f,I.nu(.5*l-f/2,.485*c-d/2,f,d),s.w_(i),s.Rect(I)),h&&(f=1.5*C.lr(.22*c,105,.6*l),d=f/8,I.nu(.5*l-f/2,.868*c-d/2,f,d),s.w_(h),s.Rect(I))):(s.m_(.302*u,.334*u,.365*u,u),f=l,d=Math.max(.005*c,2),I.nu(0,.85*c-d/2,f,d),s.Rect(I),t?s.m_(u,0,0,u):s.m_(.161*u,.953*u,.816*u,u),f=l*this.rOt,I.nu(.5*l-f/2,.85*c-d/2,f,d),s.Rect(I),s.m_(u,u,u,u),s.vM(),i&&(f=.55*c,d=f,I.nu(.5*l-f/2,.45*c-d/2,f,d),s.w_(i),s.Rect(I))),this.fOt++,"fade-in"===this.mOt&&300<=r-this.eOt&&2<=this.fOt&&(this.mOt="wait",this.dOt=r),"wait"===this.mOt&&r-this.dOt>=a&&1<=this.rOt&&(this.mOt="fade-out",this.pOt=r),("fade-out"===this.mOt&&r-this.pOt>=300+o||n&&1<=this.rOt&&r-this.eOt<500)&&this.gOt()}}}{let U=self.Os,W=self.C3Debugger,i={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},n=!0;U.e4t=class extends U.Kh{constructor(t){t=Object.assign({},i,t),super(),this.h4t=t.messagePort,this.r4t=t.runtimeBaseUrl,this.n4t=t.previewUrl,this.o4t=!!t.headless,this.a4t=!!t.hasDom,this.u4t=!!t.isInWorker,n=t.ife,this.l4t=!!t.useAudio,this.c4t=t.exportType,this.f4t=t.isNWjs,this.QW=!!t.isiOSCordova,this.d4t=!!t.isiOSWebView,this.p4t=!!t.isWindowsWebView2,this.m4t=!!t.isAnyWebView2Wrapper,this.g4t=!!t.isFBInstantAvailable,this.y4t=!("preview"!==this.c4t||!t.isDebug),this.M4t=this.y4t,this.w4t=this.y4t,this.S4t=0,this.T4t=[],this.b4t=[],this.x4t=!1,this.v4t="",this.C4t="",this.G4t="",this.I4t="",this.N4t=0,this.E4t=0,this.kA=self.devicePixelRatio,this._4t=0,this.D4t=0,this.A4t=0,this.L4t=0,this.O4t=0,this.R4t=!1,this.Ig=!0,this.P4t=!1,this.k4t=!1,this.F4t=!1,this.j4t=null,this.e8=U.ir(U.zW,this,t),this.h7=U.ir(U.vq,this),this.pft=U.ir(U.c0t,this),this.z4t=U.ir(U.RR,this,t.wrapperComponentIds),this.B4t=U.ir(U.rAt,this),this.e$=U.ir(U.Jq,this),this.U4t=U.ir(U.sut,this),this.W4t=U.ir(U.eut,this),this.Mut=U.ir(U.cut,this),this.bg=U.ir(U.ug,{dg:t=>this.Q4t(t),mg:t=>this.J4t(t)}),this.Y4t=new Map,this.V4t=[],this.H4t=new Map,this.q4t=new Map,this.Z4t=0,this.X4t=[],this.K4t=new Set,this.$4t=[],this.tRt=[],this.sRt=new Map,this.iRt=!1,this.eRt=!1,this.hRt=0,this.rRt=0,this.nRt=new Map,this.oRt=new Set,this.aRt=new Set,this.uRt=[],this.lRt=[],this.cRt=null,this.fRt=!1,this.dRt="vsync",this.c2="trilinear",this.pRt=!1,this.mRt=!0,this.gRt=!1,this.yRt=!1,this.MRt=null,this.wRt={SRt:t=>{this.hOt=-1,this.TRt=-1,this.mX(t)},bRt:t=>{this.TRt=-1,this.mX(t,!1,"skip-render")},xRt:()=>{this.hOt=-1,this.hL()}},this.hOt=-1,this.TRt=-1,this.vRt=0,this.CRt=0,this.GRt=!1,this.IRt=!1,this.NRt=!1,this.ERt=!0,this._Rt=!0,this.DRt=!1,this.ARt=0,this.LRt=new U.i1(1),this.ORt=()=>Math.random(),this.RRt=0,this.PRt=0,this.kRt=0,this.FRt=0,this.jRt=0,this.HIt=1,this.zRt=1/30,this.BRt=0,this.URt=U.ir(U.d0),this.WRt=U.ir(U.d0),this.QRt=U.ir(U.d0),this.JRt=new Map,this.YRt=-1,this.VRt=0,this.HRt=0,this.qRt=-1,this.ZRt=0,this.XRt=0,this.KRt=0,this.$Rt=!1,this.tPt="",this.sPt=!1,this.iPt="",this.yj=null,this.ePt="",this.hPt=null,this.rPt=null,this.KCt=U.ir(U.Event.Af),this.nPt=new Map,this.oPt=new Map,this.aPt=0,this.uPt=!1,this.lPt=!1,this.cPt=!1,this.fPt=[],this.dPt={pretick:U.ir(U.Event,"pretick",!1),tick:U.ir(U.Event,"tick",!1),tick2:U.ir(U.Event,"tick2",!1),instancecreate:U.ir(U.Event,"instancecreate",!1),instancedestroy:U.ir(U.Event,"instancedestroy",!1),beforelayoutchange:U.ir(U.Event,"beforelayoutchange",!1),layoutchange:U.ir(U.Event,"layoutchange",!1)},this.dPt.instancecreate.fz=null,this.dPt.instancedestroy.fz=null,this.R7=U.ir(U.Event.Af),this.pPt=null;const s=(t,s)=>U.YIt.EDt(this,t,s);this.mPt=U.ir(U.b0,s),this.gPt=U.ir(U.b0,s),this.yPt=U.ir(U.b0,s),this.MPt=U.ir(U.wPt,this,t.jobScheduler),t.canvas&&(this.cRt=U.ir(U.aLt,this)),this.h4t.onmessage=t=>this._OnMessageFromDOM(t.data),this.nj("runtime","visibilitychange",t=>this.SPt(t)),this.nj("runtime","wrapper-extension-message",t=>this.TPt(t)),this.nj("runtime","opus-decode",t=>this.B4(t.arrayBuffer)),this.nj("runtime","get-remote-preview-status-info",()=>this.bPt()),this.nj("runtime","js-invoke-function",t=>this.j0t(t)),this.nj("runtime","go-to-last-error-script",self.goToLastErrorScript),this.nj("runtime","offline-audio-render-completed",t=>this.xPt(t)),this.KCt.addEventListener("window-blur",t=>this.vPt(t)),this.KCt.addEventListener("window-focus",()=>this.CPt()),this.e$.vZ(),this.W4t.vZ(),this.GPt=null,this.IPt=new WeakMap,this.NPt={keyboard:null,V3:null,H3:null,q3:null},this.EPt=new WeakMap,this._Pt=[]}static jb(t){return U.ir(U.e4t,t)}er(){U.Dn(this.V4t),this.H4t.clear(),this.q4t.clear(),this.h7.er(),this.h7=null,this.pft.er(),this.pft=null,this.z4t.er(),this.z4t=null,this.e8.er(),this.e8=null,this.B4t.er(),this.B4t=null,this.e$.er(),this.e$=null,this.U4t.er(),this.U4t=null,this.W4t.er(),this.W4t=null,this.Mut.er(),this.Mut=null,this.bg.er(),this.bg=null,this.cRt&&(this.cRt.er(),this.cRt=null),this.KCt.er(),this.KCt=null,this.DPt=null}["_OnMessageFromDOM"](t){const s=t.type;if("event"===s)this.APt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.LPt(t)}}APt(t){if(this.cPt){const s=t.component,i=t.handler,e=t.data,h=t.dispatchOpts,r=!(!h||!h.dispatchRuntimeEvent),n=!(!h||!h.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const u=new U.Event(i);u.data=e,this.KCt.Uf(u)}if(n){const l=new U.Event(i,!0);for(const[c,f]of Object.entries(e))l[c]=f;this.Sq(l)}}const a=this.nPt.get(s);if(a){const d=a.get(i);if(d){let t=null;try{t=d(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.OPt(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this.OPt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.OPt(o,!1,""+t)}):this.OPt(o,!0,t))}else r||n||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`)}else r||n||console.warn(`[Runtime] No DOM event handlers for component '${s}'`)}else this.fPt.push(t)}OPt(t,s,i){this.h4t.postMessage({type:"result",responseId:t,isOk:s,result:i})}LPt(t){const s=t.responseId,i=t.isOk,e=t.result,h=this.oPt.get(s);i?h.resolve(e):h.reject(e),this.oPt.delete(s)}nj(t,s,i){let e=this.nPt.get(t);if(e||(e=new Map,this.nPt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}$c(t,s,i,e){this.h4t.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}m4(t,s,i,e){const h=this.aPt++,r=new Promise((t,s)=>{this.oPt.set(h,{resolve:t,reject:s})});return this.h4t.postMessage({type:"event",component:t,handler:s,data:i,responseId:h},e),r}h6(t,s,i,e=-1){this.$c("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}r6(t,s,i){const e=this.aPt++,h=new Promise((t,s)=>{this.oPt.set(e,{resolve:t,reject:s})});return this.h6(t,s,i,e),h}TPt(t){if(-1!==t.asyncId){const s=t.asyncId,i=this.oPt.get(s);i.resolve(t.params),this.oPt.delete(s)}else this.APt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}Tj(t,s,i){this.nj("wrapper-extension:"+t,s,i)}wj(t){return this.z4t.wj(t)}RPt(t){if(!this.Tq())throw new Error("not in debug mode");this.$c("runtime","post-to-debugger",t)}async XIt(t){U.NSt(this),this.Tq()?await W.XIt(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const[s]=await Promise.all([this.e8.po("data.json"),this.PPt(),this.MPt.XIt()]);if(await this.kPt(s),await this.FPt(t),this.t4t()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.y3t()){const i=this.y3t();console.info(`[C3 runtime] Hosted in ${this.bO()?"worker":"DOM"}, rendering with WebGL ${i.T2()} [${i.vD()}]`)}else this.M3t()&&console.info(`[C3 runtime] Hosted in ${this.bO()?"worker":"DOM"}, rendering with WebGPU [${this.M3t().GetAdapterInfoString()}]`);this.xS().iS()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.cPt=!0;for(const e of this.fPt)this.APt(e);U.Dn(this.fPt),this.cRt&&this.cRt.J3t();for(const h of t.runOnStartupFunctions)this.T4t.push(this.jPt(h));if(await Promise.all([this.e8.jQ(),...this.T4t]),U.Dn(this.T4t),!this.e8.BQ())return this.cRt&&await this.cRt.H3t(),await this.KCt.zf(new U.Event("beforeruntimestart")),await this.Y_(),this.h4t.postMessage({type:"runtime-ready"}),this;this.cRt&&this.cRt.Q3t()}async jPt(t){try{await t(this.GPt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async kPt(t){const s=t.project,i=(this.v4t=s[0],this.C4t=s[16],this.G4t=s[31],this.I4t=s[38],s[39]||"loading-logo.png"),e=(this.pRt=!!s[9],this.N4t=this.A4t=s[10],this.E4t=this.L4t=s[11],this.B4t.JAt(this.N4t,this.E4t),this._4t=this.N4t/2,this.D4t=this.E4t/2,this.dRt=s[37],this.fRt=!!s[40],this.c2=s[14],this.P4t=s[15],this.k4t=s[42],this.F4t=s[17],this.R4t=!!s[18],this.O4t=s[19],this.rRt=s[21],this.gRt=s[22],this.e8);if(e.gQ(s[45]),e.YQ(s[7],s[25]),e.MQ(s[8]),e.wQ(s[32]),e.TQ(s[28]),e.WQ(s[29]),0===this.O4t){let t;(t="flat"===e.R4()?e.bQ()+i:i)&&(this.j4t=e.AQ({url:t}))}this.cRt&&(this.cRt.a3t(U.aLt.d3t(s[12])),this.cRt.c3t(s[23]?"high":"low"),this.cRt.$w(0!==s[24]),this.cRt.MOt(s[34]),this.cRt.p3t(s[41]),this.cRt.wOt(s[13]),this.cRt.SOt(s[30]),this.cRt.xOt(s[46],s[47]),this.cRt.bOt(s[26]),this.cRt.vOt(s[48]));const h=s[43],r=(h&&await this.zPt(h),this.BPt(),this.z4t.jvt(),this.uRt=self.UPt(),s[2]);for(const u of r[1])this.z4t.zvt(u);for(const l of r[0])this.z4t.Fvt(l);this.uRt=self.UPt(),this.WPt(),this.z4t.Qvt();for(const c of s[3]){const f=U.aut.jb(this,this.V4t.length,c);this.V4t.push(f),this.H4t.set(f.Uc().toLowerCase(),f),this.q4t.set(f.PY(),f)}for(const d of s[4]){const p=this.V4t[d[0]];p.PGt(d)}for(const m of s[27]){const g=m.map(t=>this.V4t[t]);this.X4t.push(U.ir(U.RIt,this,g))}this.QPt();for(const y of this.V4t)y.FGt();for(const M of s[5])this.h7.jb(M);const n=s[1];if(n){const w=this.h7.Rq(n);w&&this.h7.Lq(w)}for(const S of s[35])this.U4t.jb(S);for(const T of s[33])this.e$.jb(T);for(const b of s[44])this.W4t.jb(b);this.W4t.nut()||(this.W4t.er(),this.W4t=null);for(const x of s[49])this.Mut.jb(x);this.Mut.gut()||(this.Mut.er(),this.Mut=null);for(const v of s[6])this.pft.jb(v);this.pft.U0t(),this.JPt(),U.Dn(this.uRt),this.AP();let o="any",a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.$c("runtime","set-target-orientation",{targetOrientation:o})}async zPt(t){const s=t.format;"image-sequence"===s?this.MRt=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===s?this.MRt=new self.C3ExportToGIF(this,t):"webm"===s?this.MRt=new self.C3ExportToWebMVideo(this,t):"mp4"===s&&(this.MRt=new self.C3ExportToMP4Video(this,t)),this.dRt="unlimited-frame",this.cRt.a3t("off"),this.kA=1,self.devicePixelRatio=1,await this.m4("runtime","set-exporting-to-video",{message:this.MRt.GetExportingMessageForPercent(0),duration:this.MRt.zz()})}V3t(){return this.O4t}JOt(){return null!==this.MRt}YPt(){return this.MRt.zz()}VPt(){return this.MRt.GetFramerate()}HPt(){return this.MRt.XIt({width:this.cRt.GR(),height:this.cRt.NR()})}qPt(){const t=this.vRt/this.VPt();return this.MRt.AddFrame(this.cRt.n3t(),t)}ZPt(){this.MRt&&this.MRt.fit()}xPt(t){this.MRt.OnOfflineAudioRenderCompleted(t)}XPt(){return this.MRt.qw()}s4t(){return this.g4t}Ag(){return this.Ig}w4(t){this.T4t.push(t)}C9(t){this.x4t=!!t}KPt(t){this.x4t&&this.b4t.push(t)}D9(){return this.b4t}EGt(){return this.Z4t++}zGt(){return this.Z4t}FDt(t){this.K4t.add(t)}jDt(t){this.K4t.delete(t)}QOt(){return this.K4t}async FPt(t){this.cRt&&(await this.cRt.xo(t),this.cRt.F3t(this.O4t))}async PPt(){const h=this.e8;if(!h.b4("audio/webm; codecs=opus")){let t=null,s=h.yQ(),i=s+"opus.wasm.js",e=s+"opus.wasm.wasm";try{t=this.$Pt()&&h.xQ()?await h.CQ(e):await h.yo(e)}catch(t){return void console.info("Failed to fetch Opus decoder WASM; assuming project has no Opus audio.",t)}this.tkt(t,"opus-decoder-wasm"),await this.skt([i])}}async B4(t){const s=await this.ikt("OpusDecode",{arrayBuffer:t},[t]);return s}async Y_(){this.GRt=!0,this.RRt=Date.now();let s=null,t=new Promise(t=>s=t);if(this.R4t){for(const h of this.V4t)h.NY()||h.qGt()||!h.zR()||h.kbt();(async()=>{await this.e8.jQ(),await t,this.Ig=!1,this.ekt()})()}else this.Ig=!1;this.e8.zQ(),this.Tq()&&W.RuntimeInit(n);for(const r of this.h7.U3())r.q9();this.JOt()&&await this.HPt();const i=this.h7.Oq(),e=(await i.u9(null,this.xS()),await i.w9(!0),this.VRt=performance.now(),s(),this.R4t||this.ekt(),await this.m4("runtime","before-start-ticking"));e.isSuspended&&!this.JOt()?(this.ARt++,this.DRt=!0):this.mX()}ekt(){this.ij(U.U9.B9.z9.hkt,null,null),this.$c("runtime","register-sw")}Hgt(t){t=Math.floor(t);const s=this.uRt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}WPt(){for(const t of self.rkt){const s=U.first(Object.keys(t));this.lRt.push(s)}}f1t(t){t=Math.floor(t);const s=this.lRt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}nkt(){return this.a4t}okt(){return this.o4t}bO(){return this.u4t}U3t(){return this.r4t}akt(){return this.n4t}FO(){return this.pft}XO(){return this.pft.XO()}i1t(){return this.pft.i1t()}QO(){return this.pft.QO()}e1t(){return this.pft.e1t()}GSt(){return 0===this.i1t().Lft()}r1t(){return this.pft.r1t()}IDt(){return this.z4t}Jyt(){return this.z4t.Jyt()}eY(t){if((t=Math.floor(t))<0||t>=this.V4t.length)throw new RangeError("invalid index");return this.V4t[t]}ukt(t){return this.H4t.get(t.toLowerCase())||null}p6(t){return this.q4t.get(t)||null}Dht(t){const s=U.RR.sP(t);return s?s.rP():null}IY(){return this.V4t}*lkt(){for(const t of this.V4t)t.NY()||(yield*t.instances())}Af(){return this.KCt}OO(){return this.R7}Sq(t){t.runtime=this.PR();const s=this.Tq()&&!this.pft._P();s&&W.StartMeasuringScriptTime(),this.R7.dispatchEvent(t),s&&W.AddScriptTime()}k9(t){return t.runtime=this.PR(),this.R7.zf(t)}vO(){return this.N4t}GO(){return this.E4t}ckt(t,s){if(this.N4t!==t||this.E4t!==s){this.N4t=t,this.E4t=s;const i=this.j3();i.Wq(),i.Qq()}}rV(){return this.A4t}nV(){return this.L4t}h3t(t,s){if(this.A4t!==t||this.L4t!==s){this.A4t=t,this.L4t=s;const i=this.j3();i.Wq(),i.Qq()}}YOt(t){this.JOt()||(this.kA=t)}ER(){return this.kA}sH(){return this._4t}iH(){return this.D4t}MR(){return this.cRt}aH(){return this.cRt?this.cRt.aH():this.A4t}uH(){return this.cRt?this.cRt.uH():this.L4t}pF(){return this.cRt?this.cRt.pF():1}RU(){return this.cRt?this.cRt.RU():1}UH(){return this.cRt?this.cRt.UH():1}zH(){return this.cRt?this.cRt.zH():1}rF(){return this.cRt?this.cRt.rF():0}nF(){return this.cRt?this.cRt.nF():0}fkt(){return this.cRt?this.cRt.bR():0}dkt(){return this.cRt?this.cRt.vR():0}LU(){return this.cRt?this.cRt.LU():"off"}wH(t){return this.cRt?this.cRt.wH(t):null}UJ(t){this.cRt&&this.cRt.UJ(t)}yH(){return this.P4t}zOt(){return this.k4t}BOt(){return this.F4t}v3(){return this.cRt?this.cRt.v3():NaN}Tb(){return"nearest"!==this.IO()}G3(){return this.dRt}I3(t){this.dRt!==t&&(this.dRt=t,-1!==this.hOt||-1!==this.TRt)&&(this.pkt(),this.mkt())}IO(){return this.c2}LGt(){return this.R4t}j3t(){return this.j4t}q3t(){this.j4t&&(this.j4t.nI(),this.j4t.er(),this.j4t=null)}j3(){return this.h7}R3(){return this.h7.R3()}B$(){return this.e$}gkt(){return this.U4t}INt(){return this.W4t}jut(){return this.Mut}cO(){return this.e8}AQ(t){return this.e8.AQ(t)}GP(t,s,i,e,h,r){if(r&&this.W4t){if(t instanceof U.aut&&t.NY()){const o=t.Dmt(),a=Math.floor(this.O3()*o.length);return this.GP(o[a],s,i,e,h,r)}const n=this.W4t.out(t,r);if(n){const u=this.dY(n,s,!1,i,e,!1,h,void 0,h);return this.W4t.uut(u,r),u}}return this.dY(t,s,!1,i,e,!1,h,void 0,h)}dY(t,s,i,e,h,r,n,o,a){let u=null,l=null;if(t instanceof U.aut){if((l=t).NY()){const S=l.Dmt(),T=Math.floor(this.O3()*S.length);l=S[T]}u=l.rY()}else u=t,l=this.eY(u[1]);const c=l.lP().zR();if(this.Ig&&c&&!l.qGt())return null;const f=s;c||(s=null);let d;d=i&&!r&&u&&!this.nRt.has(u[2])?u[2]:this.rRt++;const p=u?u[0]:null,m=U.ir(U.Instance,{runtime:this,gF:l,_j:s,ZIt:p,tNt:u?u[3]:null,uid:d,tags:u?u[6]:null});this.nRt.set(d,m);let g=null,y=(c&&(g=m.r4(),void 0!==e&&void 0!==h&&(g.sT(e),g.hT(h)),l.xIt(!0)),s&&(a||s.mY(m,!0),s.z3().c9(l)),this.hRt++,!0);if(o){const b=o.yF();if(b.EF()&&l.EF()){const x=l.o9(),v=b.o9();x===v&&(y=!1)}}if(l.EF()&&!i&&!r&&y){const C=new Set;for(const G of l.o9().Y9())if(G!==l){const I=this.ykt(G,g,C);if(I){const N=this.dY(I,f,!1,g?g.tT():e,g?g.eT():h,!0,!1,void 0,a);m.V9(N)}else{const F=this.dY(G,f,!1,g?g.tT():e,g?g.eT():h,!0,!1,void 0,a);m.V9(F)}}for(const E of m._F()){E.V9(m);for(const _ of m._F())E!==_&&E.V9(_)}}if(c&&!i&&n&&this.Mkt(m,p,g,s,e,h,a),l.EF()&&!i&&!r&&n)for(const D of m._F()){const A=D.r4();if(A){const j=D.lP(),L=D.yF().rY()[0];j.zR()?this.Mkt(D,L,A,s,A.tT(),A.eT(),a):this.Mkt(D,L,A,s,void 0,void 0,a)}}if(!r&&n){void 0===e&&(e=p[0]),void 0===h&&(h=p[1]);const O=g.o5(),z=e-g.tT()+O.tT(),B=h-g.eT()+O.eT();O.Aj(z,B)}l.MIt();const P=u?U.Wn(u[5]):null,k=u?u[4].map(t=>U.Wn(t)):null,M=c&&p&&p[13];if(M&&m.nNt(),m.VGt(P,k),M){const R=p[13];m.sz().txt(R[2],R[0],R[1])}this.tRt.push(m),this.iRt=!0,this.Tq()&&W.InstanceCreated(m);const w=this.dPt.instancecreate;return w.fz=m,this.KCt.dispatchEvent(w),m}vEt(t){const s=t[0],i=t[1],e=t[2],h=t[6];if(h)return h;const r=this.h7.Pq(s),n=r.n4(i);return n.uY(e)}ykt(t,s,i){const e=s?.GNt()??[];for(const h of e){const r=this.vEt(h),n=!!h[4],o=this.eY(r[1]);if(!i.has(r)&&t===o&&n)return i.add(r),r}}Mkt(a,t,s,u,l,c,f){const i=s.J_t(),e=s.GNt();if(a.r4().Y_t(i),e){void 0===l&&(l=t[0]),void 0===c&&(c=t[1]);const d=new Set,p=t[0],m=t[1];for(const g of e){let t=g[0],s=g[1],i=g[2],e=g[3],h=!!g[4],r=g[5],n=g[6],o;if(n)o=n;else{const S=this.h7.Pq(t),T=S.n4(s);o=T.uY(i)}const y=this.eY(o[1]),M=a.NNt(y),w=d.has(y);if(M&&!w&&h){const b=a.ENt(y),x=(b.r4().XIt(o[0]),l+o[0][0]-p),v=c+o[0][1]-m;b.r4().Aj(x,v),b.r4().Y_t(r),a.m5(b,{S5:!!(e>>0&1),b5:!!(e>>1&1),v5:!!(e>>2&1),G5:!!(e>>3&1),N5:!!(e>>4&1),P5:!!(e>>5&1),_5:!!(e>>6&1),A5:!!(e>>7&1),O5:!!(e>>8&1)}),d.add(y)}else{const C=l+o[0][0]-p,G=c+o[0][1]-m,I=this.dY(o,u,!1,C,G,!1,!0,a,f);I.r4().Y_t(r),a.m5(I,{S5:!!(e>>0&1),b5:!!(e>>1&1),v5:!!(e>>2&1),G5:!!(e>>3&1),N5:!!(e>>4&1),P5:!!(e>>5&1),_5:!!(e>>6&1),A5:!!(e>>7&1),O5:!!(e>>8&1)})}}}}vF(i){if(!this.oRt.has(i)){let t=i.yF(),s=this.sRt.get(t);if(s){if(s.has(i))return;s.add(i)}else(s=new Set).add(i),this.sRt.set(t,s);if(this.Tq()&&W.InstanceDestroyed(i),i.aNt(),this.iRt=!0,i.EF())for(const e of i._F())this.vF(e);for(const h of i.children())h.k5()&&this.vF(h);if(!this.h7.DP()&&!this.$Rt){const r=this.FO();r.NP(!0),i.jNt(),r.NP(!1)}i.zNt(this.h7.DP())}}AP(){this.iRt&&(this.eRt=!0,this.wkt(),this.Skt(),this.eRt=!1,this.iRt=!1,this.f4())}wkt(){for(const t of this.tRt){const s=t.yF();s.mY(t);for(const i of s.w1t())i.mY(t),i.MIt()}U.Dn(this.tRt)}Skt(){this.KCt.Cf(!0);for(const[t,s]of this.sRt.entries())this.Tkt(t,s),s.clear();this.sRt.clear(),this.KCt.Cf(!1)}Tkt(t,s){for(const i of s){const e=this.dPt.instancedestroy,h=(e.fz=i,this.KCt.dispatchEvent(e),this.nRt.delete(i.DF()),this.JRt.delete(i),i.r4());h&&(h.q_t(),h.wY(),h.aNt()),this.oRt.add(i),this.hRt--}U.zn(t.TP(),s),t.MIt(),this.aRt.add(t);for(const r of t.w1t())U.zn(r.TP(),s),r.MIt(),this.aRt.add(r);if(t.lP().zR()){const n=new Set([...s].map(t=>t.r4().n4()));for(const o of n)o.DV(s)}}SIt(){return this.tRt}*_Tt(t){for(const s of this.SIt())t.NY()?s.yF().ISt(t)&&(yield s):s.yF()===t&&(yield s)}YGt(){return this.rRt++}HGt(t,s){this.nRt.set(t,s)}u6(t){this._Rt!==(t=!!t)&&(this._Rt=!!t,this._Rt)&&this.DRt&&(this.f6(!1),this.DRt=!1)}l6(){return this._Rt}M9(){this.KCt.dispatchEvent(U.ir(U.Event,"renderercontextlost")),this.f6(!0);for(const s of this.V4t)!s.NY()&&s.ZGt()&&s.g9();const t=this.R3();t&&t.M9(),U.Vvt.m8(),U.OQ.m8()}async g3t(){await this.R3().u9(null,this.xS()),this.KCt.dispatchEvent(U.ir(U.Event,"renderercontextrestored")),this.f6(!1),this.f4()}SPt(t){if(this._Rt){const s=t.hidden;this.f6(s),(this.DRt=s)||this.f4()}}vPt(t){this.t4t()&&this.gRt&&!U.hi.mi&&!t.data.parentHasFocus&&(this.f6(!0),this.yRt=!0)}CPt(){this.yRt&&(this.f6(!1),this.yRt=!1)}mkt(){const t=this.wRt;"vsync"===this.dRt?-1===this.hOt&&(this.hOt=self.requestAnimationFrame(t.SRt)):"unlimited-tick"===this.dRt?(-1===this.TRt&&(this.TRt=U.io(t.bRt)),-1===this.hOt&&(this.hOt=self.requestAnimationFrame(t.xRt))):-1===this.TRt&&(this.TRt=U.io(t.SRt))}pkt(){-1!==this.hOt&&(self.cancelAnimationFrame(this.hOt),this.hOt=-1),-1!==this.TRt&&(U.eo(this.TRt),this.TRt=-1)}h3(){return 0<this.ARt}f6(t){if(!this.JOt()){const s=this.h3(),i=(this.ARt+=t?1:-1,this.ARt<0&&(this.ARt=0),this.h3());if(!s&&i)console.log("[Construct] Suspending"),this.pkt(),this.KCt.dispatchEvent(U.ir(U.Event,"suspend")),this.ij(U.U9.B9.z9.bkt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const e=performance.now();this.PRt=e,this.VRt=e,this.YRt=0,this.HRt=0,this.qRt=0,this.ZRt=0,this.KRt=0,this.XRt=0,this.KCt.dispatchEvent(U.ir(U.Event,"resume")),this.ij(U.U9.B9.z9.xkt,null,null),this.J1t()||this.mX(e)}}}ZU(t){this.mPt.sc(t)}t6(t){this.gPt.sc(t)}KU(t){this.yPt.sc(t)}XU(t){this.mPt.c0(t)}s6(t){this.gPt.c0(t)}$U(t){this.yPt.c0(t)}vkt(){const t=globalThis.YU;this.mPt.t1(!0);for(const s of this.mPt)s instanceof t?s.cj():s.mX();this.mPt.t1(!1)}Ckt(){const t=globalThis.YU;this.gPt.t1(!0);for(const s of this.gPt)s instanceof t?s.e6():s.Ivt();this.gPt.t1(!1)}Gkt(){const t=globalThis.YU;this.yPt.t1(!0);for(const s of this.yPt)s instanceof t?s.dj():s.bxt();this.yPt.t1(!1)}*Ikt(){const s=globalThis.YU;this.mPt.t1(!0);for(const i of this.mPt){let t;t=i instanceof s?i.cj():i.mX(),U.Lo(t)&&(yield*t)}this.mPt.t1(!1)}*Nkt(){const s=globalThis.YU;this.gPt.t1(!0);for(const i of this.gPt){let t;t=i instanceof s?i.e6():i.Ivt(),U.Lo(t)&&(yield*t)}this.gPt.t1(!1)}*Ekt(){const s=globalThis.YU;this.yPt.t1(!0);for(const i of this.yPt){let t;t=i instanceof s?i.dj():i.bxt(),U.Lo(t)&&(yield*t)}this.yPt.t1(!1)}async mX(a,t,s){this.NRt=!0;const u="background-wake"===s,l="background-wake"!==s&&"skip-render"!==s,c=this.j3(),f=this.MR();if(this.GRt&&(!this.h3()||t||u)){let t=performance.now(),s=(this.IRt=!0,this._kt(a||0),this.qRt++,this.Dkt(),this.Akt()),i=(this.vTt()&&await s,this.KCt.Bf(this.dPt.pretick)),e=(i instanceof Promise&&await i,this.Lkt()),h=(this.vTt()&&await e,this.Okt()&&await this.Rkt(),c.Q3()&&await this.Pkt(),this.kkt()),r=(this.vTt()&&await h,c.R3()),n=r.i9(),o=!1;if(-1!==n&&(r.e9(),f.s9()!==n)){const d=this.MR().x9(n);this.bO()&&(o=!0,await d)}this.$c("canvas","update-html-layer-dom-state",{layersDomState:r.RY().filter(t=>t.Ak()).map(t=>t.FV())}),l&&this.hL(),o&&this.$c("canvas","cleanup-html-layers"),this.JOt()&&(await this.qPt(),this.l3()>=this.YPt())?this.XPt():(this.h3()||u||this.mkt(),this.vRt++,this.CRt++,this.IRt=!1,this.XRt+=performance.now()-t)}}async Akt(){const t=this.pft,s=this.Tq();this.AP(),t.NP(!0),this.L1t(this.R3()),s&&W.StartMeasuringTime(),this.vTt()?await t.fdt():t.odt(),s&&W.AddEventsTime(),this.O1t(),t.NP(!1),this.AP(),t.NP(!0)}async Lkt(){const t=this.Tq(),s=this.vTt(),i=this.KCt,e=this.dPt,h=this.pPt;t&&W.StartMeasuringTime(),s?await this.Fkt(this.Ikt()):this.vkt(),s?await this.Fkt(this.Nkt()):this.Ckt(),t&&W.AddBehaviorTickTime(),t&&W.StartMeasuringTime(),s?await this.jkt(e.tick):i.dispatchEvent(e.tick),t&&W.AddPluginTickTime(),this.pft.NP(!1),this.Sq(h.tick)}async kkt(){const t=this.pft,s=this.KCt,i=this.dPt,e=this.Tq(),h=this.vTt();e&&W.StartMeasuringTime(),h?await t.R1t(this.h7):t.A1t(this.h7),e&&W.AddEventsTime(),this.B4t.MAt(),this.Dkt(),this.ERt=!1,t.NP(!0),e&&W.StartMeasuringTime(),h?await this.Fkt(this.Ekt()):this.Gkt(),e&&W.AddBehaviorTickTime(),e&&W.StartMeasuringTime(),h?await this.jkt(i.tick2):s.dispatchEvent(i.tick2),e&&W.AddPluginTickTime(),t.NP(!1),h&&await t.Y1t()}Dkt(){if(0!==this.oRt.size){const t=this.KCt;t.Cf(!0);for(const s of this.aRt)s.sdt().Wct(this.oRt);this.aRt.clear(),this.pft.pdt(this.oRt);for(const i of this.oRt)i.er();this.oRt.clear(),t.Cf(!1)}}async Pkt(){let t=this.j3(),s=0;for(;t.Q3()&&s++<10;)await this.zkt(t.Uq())}_kt(t){let s=0;if(this.JOt())s=1/this.VPt(),this.kRt=s,this.FRt=s;else if(0!==this.PRt){const i=Math.max(t-this.PRt,0);.5<(s=i/1e3)&&(s=0),this.kRt=s,this.FRt=U.lr(s,this.BRt,this.zRt)}this.PRt=t,this.jRt=this.FRt*this.HIt,this.URt.sc(this.jRt),this.WRt.sc(s*this.HIt),this.QRt.sc(this.FRt);for(const[e,h]of this.JRt)h.sc(this.FRt*e.g3());this.cRt&&this.cRt.N3t(),1e3<=t-this.VRt&&(this.VRt+=1e3,1e3<=t-this.VRt&&(this.VRt=t),this.HRt=this.YRt,this.YRt=0,this.ZRt=this.qRt,this.qRt=0,this.KRt=Math.min(this.XRt/1e3,1),this.XRt=0,this.cRt&&this.cRt.I3t(),this.B4t.pAt(),this.Tq())&&W.Update1sPerfStats()}hNt(t,s){if(s){if(!this.JRt.has(t)){const i=U.ir(U.d0);i.M0(this.URt),this.JRt.set(t,i)}}else this.JRt.delete(t)}rNt(t){const s=this.JRt.get(t);return s?s.Ks():this.l3()}async zkt(t){const s=this.KCt,i=this.j3(),e=i.R3();await e.X9(),e.y9(t,this.xS()),e===t&&this.pft.sq(),this.B4t.MAt(),this.Dkt(),s.dispatchEvent(this.dPt.beforelayoutchange),U.If.Qf(!0),await t.u9(e,this.xS()),U.If.Qf(!1),await t.w9(!1),s.dispatchEvent(this.dPt.layoutchange),this.f4(),this.ERt=!0,this.AP(),this.ZPt()}f4(){this.mRt=!0}y3t(){return this.cRt?this.cRt.y3t():null}M3t(){return this.cRt?this.cRt.M3t():null}xS(){return this.cRt?this.cRt.xS():null}hL(){const i=this.cRt;if(i&&!i.m3t()){const e=this.xS(),t=e.mD(),h=t&&e.eS(),r=t&&e.gM();if(h&&e.sD(),this.mRt||this.JOt()){const n=this.h7.R3(),o=(this.YRt++,e.Y_(),this.Tq());o&&W.StartMeasuringTime(),this.mRt=!1;let t=null,s=(h&&(t=i.D3t().UN(),e.pD(t)),null);r&&(s=e.StartFrameTiming(2*(1+n.H7())),e.StartMeasuringRenderPassTime(0,1)),this.mV()&&"low"===i.MH()?e.r_(i.aH(),i.uH()):e.n_(),this.Bkt(this.xS(),n),t&&e.gD(t),r&&(e.StopMeasuringRenderPassTime(),this.cRt.A3t(s)),e.qw(),o&&(W.AddDrawCallsTime(),W.UpdateInspectHighlight()),i&&i.O3t()}else e.Kw()}}cq(t){return"low"===this.MR().MH()||t.eS()&&(this.yH()||this.mV())}Bkt(s,i){s.vM(),s.x_(),s.m_(1,1,1,1),s.rD(null),s.w_(null),s.H_(this.mV()),this.cq(s)&&i.uq(s);const e=i.s9();for(let t=1;t<e;++t)i.gq(s,t),s.gM()&&s.Restart();this.cq(s)||i.uq(s),i.mq(s)}ij(t,s,i){if(!this.GRt)return!1;let e=!this.IRt&&!this.pft.Z1t(),h=0;e&&(h=performance.now());const r=this.Tq(),n=(r&&this.G6(!1),this.pft.j1t(this.h7,t,s,i));if(e){const o=performance.now()-h;this.XRt+=o,r&&W.AddTriggersTime(o)}return r&&this.G6(!0),n}lxt(t,s,i){if(!this.vTt())return this.ij(t,s,i);if(this.J1t())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.IRt||this.pft.Z1t())return this.pft.U1t(this.h7,t,s,i);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async hj(t,s,i){if(!this.vTt())return this.ij(t,s,i);if(!this.GRt)return!1;if(this.J1t())return this.pft.W1t(t,s,i);if(!this.R3())return this.pft.z1t(t,s,i);let e=performance.now(),h=this.pft.U1t(this.h7,t,s,i),r=h.next();for(;!r.done;)await this.k1t(r.value),r=h.next();return this.h3()||this.pft.Z1t()||(await this.pft.Y1t(),this.NRt&&!this.IRt&&this.mkt()),this.XRt+=performance.now()-e,r.value}cxt(t,s,i){const e=this.Tq(),h=(e&&this.G6(!1),this.pft.V1t(this.h7,t,s,i));return e&&this.G6(!0),h}fxt(t,s,i){return this.pft.H1t(this.h7,t,s,i)}dxt(t){return this.LRt.sc(t)}L1t(t){this.$4t.push(t)}O1t(){if(!this.$4t.length)throw new Error("layout stack empty");this.$4t.pop()}e4(){return this.$4t.length?this.$4t.at(-1):this.R3()}n3(t){return t&&-1!==t.g3()?this.FRt*t.g3():this.jRt}dX(){return this.jRt}pX(){return this.FRt}a3(){return this.kRt}g3(){return this.HIt}y3(t){(isNaN(t)||t<0)&&(t=0),this.HIt=t}_3(t){this.BRt=Math.max(t,0)}E3(){return this.BRt}L3(t){this.zRt=Math.max(t,0)}A3(){return this.zRt}M3(){return this.HRt}S3(){return this.ZRt}b3(){return this.KRt}Ukt(){return this.RRt}l3(){return this.URt.Ks()}Wkt(){return this.WRt.Ks()}d3(){return this.QRt.Ks()}ltt(){return this.vRt}Qkt(){return this.CRt}Jkt(){return this.hRt}MO(){return this.v4t}SO(){return this.C4t}Ykt(){return this.G4t}Vkt(){return this.I4t}t4(t){if(this.$Rt)throw new Error("cannot call while loading state - wait until afterload event");return this.nRt.get(t)||null}Q9(){this.nRt.clear();for(const t of this.V4t)if(!t.NY())for(const s of t.TP())this.nRt.set(s.DF(),s)}t4t(){return"preview"===this.c4t}Tq(){return this.y4t}pR(){return this.c4t}mR(){return"nwjs"===this.pR()||this.f4t}i4t(){return"cordova"===this.c4t}Hkt(){return"Android"===U.hi.ri&&("cordova"===this.c4t||"playable-ad-single-file"===this.c4t||"playable-ad-zip"===this.c4t||"instant-games"===this.c4t)}$Pt(){return this.QW}qkt(){return this.d4t}gR(){return this.p4t}Zkt(){return this.m4t}pO(){return this.B4t}Jvt(){return this.z4t.Jvt()}Yvt(){return this.z4t.Yvt()}mV(){return this.fRt}Xkt(){return this.xS().rM(this.nV())}iM(t){return this.xS().iM(t||this.nV())}Kkt(){return this.ERt}$kt(t){this.pRt!==(t=!!t)&&(this.pRt=t,this.j3().Qq(),this.f4())}EO(){return this.pRt}tFt(t){if(!this.Y4t.has(t)){const i=()=>this.sFt(t);this.Y4t.set(t,i),t.Af().addEventListener("animationframeimagechange",i)}const s=this.bg.gg(t);return s.Dg()||s.Lg().then(()=>this.f4()),s}sFt(t){this.bg.Sg(t)}Q4t(t){const s=[];for(const i of t.aIt())for(const e of i.Lz()){const h=e.jz();s.push({source:e,width:h.Xp(),height:h.um(),tag:e.rB()})}return{Eg:s}}async J4t(t){const s=U.ir(U.i1),i=[],h=new Map;for(const n of t.aIt())for(const o of n.Lz()){const a=o.jz().dCt();h.has(a)||(h.set(a,null),i.push(s.sc(async()=>{const t=await a.w8();h.set(a,t)})))}await Promise.all(i);const e=[];for(const u of t.aIt())for(const l of u.Lz())e.push(s.sc(async()=>{const t=l.jz(),s=h.get(t.dCt()),i=await t.pCt(s),e=await createImageBitmap(i);return{Rg:e}}));const r=await Promise.all(e);for(const c of h.values())c instanceof ImageBitmap&&c.close&&c.close();return{Eg:r}}iFt(t){this.tPt=t,this.sPt=!1}eFt(){this.tPt="",this.sPt=!0}hFt(t){this.iPt=t}m2t(t){this.yj=t}rFt(){return this.ePt}Okt(){return!!(this.tPt||this.sPt||this.iPt||null!==this.yj)}async Rkt(){if(this.tPt&&(this.AP(),await this.nFt(this.tPt),this.oFt()),this.iPt&&(await this.aFt(this.iPt),this.oFt(),this.Tq())&&W.StepIfPausedInDebugger(),this.sPt){const t=await this.uFt();this.ePt=t,await this.hj(U.U9.B9.z9.lFt,null),this.ePt="",this.oFt()}if(null!==this.yj){this.AP();try{await this.cFt(this.yj),this.ePt=this.yj,await this.hj(U.U9.B9.z9.fFt,null),this.ePt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.hj(U.U9.B9.z9.dFt,null)}this.oFt()}}oFt(){this.tPt="",this.sPt=!1,this.iPt="",this.yj=null}DR(){return this.hPt||(this.hPt=localforage.Ai({name:"c3-localstorage-"+this.Ykt(),description:this.MO()})),this.hPt}pFt(){return this.rPt||(this.rPt=localforage.Ai({name:"c3-savegames-"+this.Ykt(),description:this.MO()})),this.rPt}async nFt(t){const s=await this.uFt();try{await this.pFt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.ePt=s,await this.hj(U.U9.B9.z9.lFt,null),this.ePt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.hj(U.U9.B9.z9.mFt,null)}}async aFt(t){try{const s=await this.pFt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.cFt(s),this.ePt=s,await this.hj(U.U9.B9.z9.fFt,null),this.ePt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.hj(U.U9.B9.z9.dFt,null)}}async uFt(){const t={c3save:!0,version:1,rt:{time:this.l3(),timeRaw:this.Wkt(),walltime:this.d3(),timescale:this.g3(),tickcount:this.ltt(),next_uid:this.rRt,running_layout:this.R3().PY(),start_time_offset:Date.now()-this.RRt},types:{},layouts:{},events:this.pft.KH(),timelines:this.e$.KH(),user_script_data:null};for(const i of this.V4t)i.NY()||i._It()||(t.types[i.PY().toString()]=i.KH());for(const e of this.h7.U3())t.layouts[e.PY().toString()]=e.KH();const s=this.gFt("save");return s.saveData=null,await this.k9(s),t.user_script_data=s.saveData,JSON.stringify(t)}A9(){return this.$Rt}async cFt(t){const s=this.j3(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(1<i.version)throw new Error("C3 save data from future version");this.g2t(),this.KCt.dispatchEvent(U.ir(U.Event,"beforeload"));for(const a of this.lkt()){const u=a.yF();u._It()||a.gZ()}let e=i.rt,h=(this.URt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.WRt.Set(e.timeRaw),this.QRt.Set(e.walltime),this.HIt=e.timescale,this.vRt=e.tickcount,this.RRt=Date.now()-e.start_time_offset,e.running_layout),r=!(this.$Rt=!0);if(h!==this.R3().PY()){const l=s.Pq(h);if(!l)return;await this.zkt(l),r=!0}for(const[c,f]of Object.entries(i.layouts)){const d=parseInt(c,10),p=s.Pq(d);p&&p.$H(f)}const n=new Set;for(const[m,g]of Object.entries(i.types)){const y=parseInt(m,10),M=this.p6(y);!M||M.NY()||M._It()||M.$H(g,n)}for(const w of this.h7.U3())for(const S of w.KP())S.t7();if(this.AP(),this.Q9(),this.$Rt=!1,r){for(const T of this.lkt())T.L9();for(const[b,x]of Object.entries(i.types)){const v=parseInt(b,10),C=this.p6(v);!C||C.NY()||C._It()||C.LIt(x)}}this.rRt=e.next_uid,this.pft.$H(i.events);for(const G of this.V4t)if(!G.NY()&&G.EF())for(const I of G.TP()){const N=I.J9();for(const E of G.o9().Y9())if(E!==G){const _=E.TP();if(N<0||N>=_.length)throw new Error("missing sibling instance");I.V9(_[N])}}this.e$.$H(i.timelines),s.Wq(),s.Qq();for(const D of n)D.FNt();this.y2t(),this.KCt.dispatchEvent(U.ir(U.Event,"afterload")),this.Sq(this.gFt("afterload"));for(const[A,L]of Object.entries(i.types)){const O=parseInt(A,10),R=this.p6(O);R&&R.AIt()}const o=this.gFt("load");o.saveData=i.user_script_data,await this.k9(o),this.f4()}yFt(t,s){return t.r4().z_t()-s.r4().z_t()}GDt(t,s){t.r4()&&!this.EPt.has(t)&&(this.EPt.set(t,s),this._Pt.push(t))}g2t(){this.EPt=new WeakMap,U.Dn(this._Pt)}y2t(t="full",s=null){this._Pt.sort(this.yFt);for(const i of this._Pt)i.MZ(this.EPt.get(i),t,s);for(const e of this._Pt)e.WNt(this.EPt.get(e),t,s);this.g2t()}async skt(t){const s=await Promise.all(t.map(async t=>{const s=this.i4t()&&this.e8.xQ();if(s||"playable-ad-single-file"===this.pR()){const i=await this.e8.mo(t);return URL.createObjectURL(i)}return new URL(t,location.href).toString()}));this.MPt.MFt(s)}wFt(t,s){this.MPt.SFt(t,s)}tkt(t,s){this.MPt.TFt(t,s)}ikt(t,s,i,e){return this.MPt.ikt(t,s,i,null,null,e)}bFt(t,s,i,e){return this.MPt.bFt(t,s,i,e)}xFt(){return this.MPt.vFt()}X3(t,s){this.$c("runtime","invoke-download",{url:t,filename:s})}async W3t(t,s,i,e,h,r){if(e=e||s,h=h||i,this.bO()){const n=await this.m4("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:h,imageBitmapOpts:r});return n.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,s,i,e,h);return r?self.createImageBitmap(o,r):o}}async CFt(t){return this.bO()?this.m4("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}GFt(){this.uPt||(this.uPt=!0,this.$c("runtime","enable-device-orientation"))}IFt(){this.lPt||(this.lPt=!0,this.$c("runtime","enable-device-motion"))}O3(){return this.ORt()}NFt(t){this.ORt=t}bPt(){const t=this.xS();return{fps:this.M3(),tps:this.S3(),cpu:this.b3(),gpu:this.v3(),layout:this.R3()?this.R3().Uc():"",renderer:t.eS()?t.vD():t.GetAdapterInfoString()}}J1t(){return!!this.Tq()&&W.J1t()}k1t(t){return this.vTt()?W.k1t(t):Promise.resolve()}wgt(){return!!this.vTt()&&W.BreakNext()}EFt(t){this.M4t=!!t,this._Ft()}DFt(){return this.M4t}vTt(){return this.w4t}G6(t){t?this.S4t--:this.S4t++,this._Ft()}_Ft(){this.w4t=this.Tq()&&this.M4t&&0===this.S4t}kpt(){return this.Tq()&&W.kpt()}dH(){return this.Tq()&&this.xS().mD()&&W.dH()}async Fkt(t){if(t)for(const s of t)await this.k1t(s)}jkt(t){return this.Fkt(this.KCt.Wf(t))}j0t(t){return this.pft.j0t(t.name,t.params)}y4(t){if(this.bO())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}PR(){return this.GPt}gFt(t){const s=U.ir(U.Event,t,!1);return s.runtime=this.GPt,s}BPt(){this.GPt=new self.aO(this),this.pPt={tick:this.gFt("tick")}}QPt(){const t={};for(const s of this.V4t)t[s.f1t()]={value:s.hP(),enumerable:!0,writable:!1};this.GPt.RO(t)}JPt(){const t={};for(const s of this.FO().S1t())t[s.f1t()]=s.d1t();this.GPt.PO(t)}Y3(){return this.NPt}cP(t,s){this.IPt.set(t,s)}ik(t){return this.IPt.get(t)}nR(t){if(!(t instanceof self.aP))throw new TypeError("expected IObjectClass");const s=this.ik(t);if(s&&s instanceof U.aut)return s;throw new Error("invalid IObjectClass")}MP(t){if(!(t instanceof self.mF))throw new TypeError("expected IInstance");const s=this.ik(t);if(s&&s instanceof U.Instance)return s;throw new Error("invalid IInstance")}h4(t){if(!(t instanceof self.H5))throw new TypeError("expected IWorldInstance");const s=this.ik(t);if(s&&s instanceof U.Instance)return s;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=U.e4t.jb,self.C3_InitRuntime=(t,s)=>t.XIt(s)}{const La=self.Os;La.wPt=class extends La.Kh{constructor(t,s){super(),this.Zc=t,this.AFt=new Map,this.LFt=0,this.OFt=s.inputPort,s.outputPort.onmessage=t=>this.RFt(t),this.PFt=s.maxNumWorkers,this.kFt=1,this.FFt=!1,this.jFt=!1}async XIt(){}vFt(){return this.PFt}MFt(t){this.OFt.postMessage({type:"_import_scripts",scripts:t})}SFt(t,s){this.OFt.postMessage({type:"_send_blob",blob:t,id:s})}TFt(t,s){this.OFt.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}ikt(t,s,i,e,h,r){if(i=i||[],"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const n=this.LFt++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:n,params:s,transferables:i},a=new Promise((t,s)=>{this.AFt.set(n,{resolve:t,progress:e,reject:s,zFt:!1,maxWorkerNum:r})});return h&&h.u0(()=>this.BFt(n)),this.OFt.postMessage(o,i),this.UFt(),a}bFt(t,s,i,e){if(i=i||[],"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const h=this.LFt++,r={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:h,params:s,transferables:i};this.OFt.postMessage(r,i)}BFt(t){const s=this.AFt.get(t);s&&(s.zFt=!0,s.resolve=null,s.progress=null,s.reject=null,this.OFt.postMessage({type:"_cancel",jobId:t}))}RFt(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.WFt(e,s.result);break;case"progress":this.QFt(e,s.progress);break;case"error":this.JFt(e,s.error);break;case"ready":this.YFt();break;default:throw new Error(`unknown message from worker '${i}'`)}}WFt(t,s){const i=this.AFt.get(t);if(!i)throw new Error("invalid job ID");i.zFt||i.resolve(s),this.AFt.delete(t)}QFt(t,s){const i=this.AFt.get(t);if(!i)throw new Error("invalid job ID");!i.zFt&&i.progress&&i.progress(s)}JFt(t,s){const i=this.AFt.get(t);if(!i)throw new Error("invalid job ID");i.zFt||i.reject(s),this.AFt.delete(t)}YFt(){this.FFt&&(this.FFt=!1,this.kFt++,this.kFt<this.PFt?this.UFt():this.OFt.postMessage({type:"_no_more_workers"}))}VFt(){let t=0,s=[...this.AFt.values()].sort((t,s)=>{const i=t.maxWorkerNum||1/0,e=s.maxWorkerNum||1/0;return i-e});for(const i of s){const e=i.maxWorkerNum||1/0;t<e&&t++}return t}async UFt(){if(!(this.kFt>=this.PFt||this.FFt||this.jFt||this.VFt()<=this.kFt))try{this.FFt=!0;const t=await this.Zc.m4("runtime","create-job-worker");t.outputPort.onmessage=t=>this.RFt(t)}catch(t){this.jFt=!0,this.FFt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.kFt} so far)`,t)}}}}self.C3_Shaders={};{let w=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const h=""+i,r=""+e;return h<r?-1:r<h?1:0}},S=(w,self.Os),i=null,e="",h="",r=[],n="",o="",a="",T=S.ir(S.l0t);S.U9.B9=class extends S.pbt{constructor(t){super(t),this.r0t=this.Zc.FO().v6(),this.Qct=this.Zc.FO().XO(),this.HFt=0,this.qFt=0,this.ZFt=new Map}er(){super.er()}f4(){this.Zc.f4()}ij(t){this.Zc.ij(t,null,null)}XFt(t,s){return i&&t===e&&s===h||(i=new RegExp(t,s),e=t,h=s),i.lastIndex=0,i}KFt(t,s,i){if(t!==n||s!==o||i!==a){const e=this.XFt(s,i);r=t.match(e),n=t,o=s,a=i}return r}async $Ft(t,s){if(s.length){this.HFt+=s.length;const i=[];for(const e of s)i.push(t.c9(e));await S.Xn(i,()=>{this.qFt++}),this.qFt++,this.qFt===this.HFt&&(this.qFt=0,this.HFt=0,this.Zc.ij(S.U9.B9.z9.tjt,null,null))}}sjt(t,s){for(const i of s)0===i.vP()&&t.m9(i)}ijt(){return T}ejt(s){const i=this.Zc.FO(),t=i.XO(),e=t.b6(),h=e.QO(),r=h.T6(),n=e.Jft(),o=t.x6(h),a=i.v6(),u=a.x6();if(u.a0t(s),n)for(let t=0;t<s&&!u.L6();++t)i.N6(r),u.D6(t),h.E6(e,o),i._6(r);else for(let t=0;t<s&&!u.L6();++t)u.D6(t),h.E6(e,o);return t.O6(),a.O6(),!1}*hjt(s){const i=this.Zc.FO(),t=i.XO(),e=t.b6(),h=e.QO(),r=h.T6(),n=e.Jft(),o=t.x6(h),a=i.v6(),u=a.x6();if(u.a0t(s),n)for(let t=0;t<s&&!u.L6();++t)i.N6(r),u.D6(t),yield*h._gt(e,o),i._6(r);else for(let t=0;t<s&&!u.L6();++t)u.D6(t),yield*h._gt(e,o);return t.O6(),a.O6(),!1}rjt(){const s=this.Zc.FO(),t=s.XO(),i=t.b6(),e=i.QO(),h=e.T6(),r=i.Jft(),n=t.x6(e),o=s.v6(),a=o.x6();if(r)for(let t=0;!a.L6();++t)s.N6(h),a.D6(t),e.E6(i,n)||a.aB(),s._6(h);else for(let t=0;!a.L6();++t)a.D6(t),e.E6(i,n)||a.aB();return t.O6(),o.O6(),!1}*njt(){const s=this.Zc.FO(),t=s.XO(),i=t.b6(),e=i.QO(),h=e.T6(),r=i.Jft(),n=t.x6(e),o=s.v6(),a=o.x6();if(r)for(let t=0;!a.L6();++t){s.N6(h),a.D6(t);const u=yield*e._gt(i,n);u||a.aB(),s._6(h)}else for(let t=0;!a.L6();++t){a.D6(t);const l=yield*e._gt(i,n);l||a.aB()}return t.O6(),o.O6(),!1}ojt(t,s,i){const e=this.Zc.FO(),h=e.XO(),r=h.b6(),n=r.QO(),o=n.T6(),a=r.Jft(),u=h.x6(n),l=e.v6(),c=l.x6();if(c.C6(t),c.a0t(i),i<s)if(a)for(let t=s;t>=i&&!c.L6();--t)e.N6(o),c.D6(t),n.E6(r,u),e._6(o);else for(let t=s;t>=i&&!c.L6();--t)c.D6(t),n.E6(r,u);else if(a)for(let t=s;t<=i&&!c.L6();++t)e.N6(o),c.D6(t),n.E6(r,u),e._6(o);else for(let t=s;t<=i&&!c.L6();++t)c.D6(t),n.E6(r,u);return h.O6(),l.O6(),!1}*ajt(t,s,i){const e=this.Zc.FO(),h=e.XO(),r=h.b6(),n=r.QO(),o=n.T6(),a=r.Jft(),u=h.x6(n),l=e.v6(),c=l.x6();if(c.C6(t),c.a0t(i),i<s)if(a)for(let t=s;t>=i&&!c.L6();--t)e.N6(o),c.D6(t),yield*n._gt(r,u),e._6(o);else for(let t=s;t>=i&&!c.L6();--t)c.D6(t),yield*n._gt(r,u);else if(a)for(let t=s;t<=i&&!c.L6();++t)e.N6(o),c.D6(t),yield*n._gt(r,u),e._6(o);else for(let t=s;t<=i&&!c.L6();++t)c.D6(t),yield*n._gt(r,u);return h.O6(),l.O6(),!1}ujt(i){const t=i.bP(),s=t.TP();if(0!==s.length){const e=this.Zc.FO(),h=e.XO(),r=h.b6(),n=r.QO(),o=n.T6(),a=r.Jft(),u=h.x6(n),l=e.v6(),c=l.x6(),f=i.EF(),d=T.x6();if(S.Rn(d,s),c.a0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.L6();++t){e.N6(o);const p=d[t];i.bP().rft(p),f&&p.Wpt(),c.D6(t),n.E6(r,u),e._6(o)}else{t.ift(!1);const m=t.eft();S.Dn(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.L6();++t){const g=d[t];m[0]=g,f&&g.Wpt(),c.D6(t),n.E6(r,u)}}h.O6(),l.O6(),S.Dn(d),T.O6()}return!1}*ljt(i){const t=i.bP(),s=t.TP();if(0!==s.length){const e=this.Zc.FO(),h=e.XO(),r=h.b6(),n=r.QO(),o=n.T6(),a=r.Jft(),u=h.x6(n),l=e.v6(),c=l.x6(),f=i.EF(),d=T.x6();if(S.Rn(d,s),c.a0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.L6();++t){e.N6(o);const p=d[t];i.bP().rft(p),f&&p.Wpt(),c.D6(t),yield*n._gt(r,u),e._6(o)}else{t.ift(!1);const m=t.eft();S.Dn(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.L6();++t){const g=d[t];m[0]=g,f&&g.Wpt(),c.D6(t),yield*n._gt(r,u)}}h.O6(),l.O6(),S.Dn(d),T.O6()}return!1}cjt(i,t){const s=i.bP(),e=s.TP();if(0!==e.length){const h=this.Zc.FO(),r=h.XO(),n=h.e1t(),o=r.b6(),a=o.QO(),u=a.T6(),l=o.Jft(),c=r.x6(a),f=h.v6(),d=f.x6(),p=i.EF(),m=T.x6();S.Dn(m),d.a0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],n.Jwt(1,t)]);if(m.sort(w),1===t&&m.reverse(),l)for(let t=0,s=m.length;t<s&&!d.L6();++t){h.N6(u);const g=m[t][0];i.bP().rft(g),p&&g.Wpt(),d.D6(t),a.E6(o,c),h._6(u)}else{s.ift(!1);const y=s.eft();S.Dn(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.L6();++t){const M=m[t][0];y[0]=M,p&&M.Wpt(),d.D6(t),a.E6(o,c)}}r.O6(),f.O6(),S.Dn(m),T.O6()}return!1}*fjt(i,t){const s=i.bP(),e=s.TP();if(0!==e.length){const h=this.Zc.FO(),r=h.XO(),n=h.e1t(),o=r.b6(),a=o.QO(),u=a.T6(),l=o.Jft(),c=r.x6(a),f=h.v6(),d=f.x6(),p=i.EF(),m=T.x6();S.Dn(m),d.a0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],n.Jwt(1,t)]);if(m.sort(w),1===t&&m.reverse(),l)for(let t=0,s=m.length;t<s&&!d.L6();++t){h.N6(u);const g=m[t][0];i.bP().rft(g),p&&g.Wpt(),d.D6(t),yield*a._gt(o,c),h._6(u)}else{s.ift(!1);const y=s.eft();S.Dn(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.L6();++t){const M=m[t][0];y[0]=M,p&&M.Wpt(),d.D6(t),yield*a._gt(o,c)}}r.O6(),f.O6(),S.Dn(m),T.O6()}return!1}djt(t,s){let i=this.ZFt.get(t);if(!i){if(!s)return null;i={pjt:null,mjt:new Map},this.ZFt.set(t,i)}return i}gjt(t,s,i,e,h){s.UO().Ygt(i,s.VO()),e&&t._6(h)}*yjt(t,s,i,e,h){yield*s.UO().Vgt(i,s.VO()),e&&t._6(h)}}}{const Oa=self.Os;Oa.U9.B9._Gt=class extends Oa.Kh{constructor(t){super(),this.Pct=t,this.Zc=t.I4(),this.$bt=t.lP()}kbt(){}er(){this.Pct=null,this.Zc=null,this.$bt=null}}}{const Ra=self.Os;Ra.U9.B9.Instance=class extends Ra.Kh{constructor(t,s){super(),this.Si=t,this.Pct=this.Si.yF(),this.nxt=this.Pct.bSt(),this.Zc=this.Si.I4()}er(){this.Si=null,this.Pct=null,this.nxt=null,this.Zc=null}}}{const N=self.Os,Pa=[];N.U9.B9.z9={Mjt(){return!0},j9(){return!0},K9(){return!0},bkt(){return!0},xkt(){return!0},h3(){return this.Zc.h3()},Imt(){const t=this.Zc.i1t();return!t.zft()&&!t.Fft()},wjt(){let t=this.Zc.e1t(),s=t.Awt(),i=s.get("TriggerOnce_lastTick");void 0===i&&(i=-1,s.set("TriggerOnce_lastTick",-1));const e=this.Zc.ltt();return s.set("TriggerOnce_lastTick",e),this.Zc.Kkt()||i!==e-1},Sjt(t){const s=this.Zc.e1t(),i=s.Awt(),e=i.get("Every_lastTime")||0,h=this.Zc.l3(),r=(i.has("Every_seconds")||i.set("Every_seconds",t),i.get("Every_seconds"));return e+r<=h?(i.set("Every_lastTime",e+r),h>=i.get("Every_lastTime")+.04&&i.set("Every_lastTime",h),i.set("Every_seconds",t),!0):(h<e-.1&&i.set("Every_lastTime",h),!1)},Wdt(t){const s=this.Zc.FO().v1t(t);return s&&s.Wdt()},t4t(){return this.Zc.t4t()},mi(){return N.hi.mi},hkt(){return!0},Tjt(){return!0},bjt(){return!0},lFt(){return!0},mFt(){return!0},fFt(){return!0},dFt(){return!0},xjt(t){return!!this.Zc.t4(t)},vjt(t){switch(t){case 0:return"browser"===N.hi.fi;case 1:return"iOS"===N.hi.ri;case 2:return"Android"===N.hi.ri;case 8:return"cordova"===N.hi.fi;case 9:return"scirra-arcade"===this.Zc.pR();case 10:return"nwjs"===N.hi.fi;case 13:return"windows-uwp"===this.Zc.pR();default:return!1}},Cjt(t,s,i){const e=this.XFt(s,i);return e.test(t)},Gjt(t,s,i){return N.compare(t,s,i)},Ijt(t,s,i){return s<=t&&t<=i},Njt(t,s,i){return N.compare(t.iet(),s,i)},Ejt(t){return!!t.iet()},_jt(t,s){const i=this.Zc.l3();if(0!==t)return N.compare(i,t,s);{const e=this.Zc.e1t(),h=e.Awt();return!h.get("CompareTime_executed")&&s<=i&&(h.set("CompareTime_executed",!0),!0)}},Djt(t){return isNaN(t)},k2t(t,s,i){return N.Mr(N.dr(t),N.dr(i))<=N.dr(s)},F2t(t,s){return N.Sr(N.dr(t),N.dr(s))},KSt(t,s,i){let e=N.dr(t),h=N.dr(s),r=N.dr(i),n=!N.Sr(r,h);return n?!(!N.Sr(e,h)&&N.Sr(e,r)):N.Sr(e,h)&&!N.Sr(e,r)},Ajt(t,s){return"number"==typeof t?0===s:1===s},Ljt(t){return!!t},Tdt(t){return t.toLowerCase()===this.Zc.FO().Cdt()},Ojt(t,i,e,h){if(!t)return!1;let s=this.ijt(),r=s.x6(),n=t.bP(),o=(N.Rn(r,n.TP()),n.Hct()&&N.Dn(n.hft()),this.Zc.e1t()),a=0;for(let t=0,s=r.length;t<s;++t){const l=r[t];r[a]=l,i=o.Jwt(1,t),h=o.Jwt(3,t),N.compare(i,e,h)?++a:n.tft(l)}N._n(r,a),n.nft(r);const u=!!r.length;return N.Dn(r),s.O6(),t.jgt(),u},Rjt(t,s){if(!t)return!1;let i=this.ijt(),e=i.x6(),h=t.bP(),r=(N.Rn(e,h.TP()),h.Hct()&&N.Dn(h.hft()),this.Zc.e1t()),n=0;for(let t=0,s=e.length;t<s;++t){const a=e[t];e[n]=a,r.Jwt(1,t)?++n:h.tft(a)}N._n(e,n),h.nft(e);const o=!!e.length;return N.Dn(e),i.O6(),t.jgt(),o},Pjt(t,i,e){if(!t)return!1;const s=t.bP(),h=s.TP();if(0===h.length)return!1;let r=this.Zc.e1t(),n=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t];e=r.Jwt(2,t),(null===n||0===i&&e<o||1===i&&e>o)&&(o=e,n=a)}return s.cft(n),t.jgt(),!0},kjt(t,s){if(!t)return!1;const i=t.bP(),e=i.TP();if((s=Math.floor(s))>=e.length)return!1;const h=e[s];return i.cft(h),t.jgt(),!0},Fjt(t){if(!t)return!1;const s=t.bP(),i=s.TP(),e=Math.floor(this.Zc.O3()*i.length);if(e>=i.length)return!1;const h=i[e];return s.cft(h),t.jgt(),!0},jjt(t){if(!t)return!1;if(!t.vP())return!1;const s=t.bP();return s.ift(!0),t.jgt(),!0},zjt(t,i,e){if(!t)return!1;const h=t.bP(),s=h.TP(),r=this.Zc.QO(),n=r.fft(),o=this.Zc.e1t().Iwt();h.Hct()?(N.Rn(Pa,s),h.Vct(),h.ift(!1)):n?(N.Rn(Pa,h.hft()),N.Dn(h.hft())):(N.Rn(Pa,h.eft()),N.Dn(h.eft()));for(let t=0,s=Pa.length;t<s;++t){const a=Pa[t];N.xor(a.r4().h5(i,e),o)?h.$ct(a):h.tft(a)}return t.jgt(),N.xor(!!h.eft().length,o)},Bjt(s){if(!s)return!1;let i=s.NY(),e=null,h=this.Zc.SIt();for(let t=h.length-1;0<=t;--t){const r=h[t];if(i){if(r.yF().ISt(s)){e=r;break}}else if(r.yF()===s){e=r;break}}if(!e){const n=s.TP();n.length&&(e=n.at(-1))}if(!e)return!1;const t=s.bP();return t.cft(e),s.jgt(),!0},Ujt(t){return this.Zc.vTt()?this.hjt(t):this.ejt(t)},Wjt(){return this.Zc.vTt()?this.njt():this.rjt()},Qjt(t,s,i){return this.Zc.vTt()?this.ajt(t,s,i):this.ojt(t,s,i)},s1(t){return this.Zc.vTt()?this.ljt(t):this.ujt(t)},Jjt(t,s,i){return this.Zc.vTt()?this.fjt(t,i):this.cjt(t,i)},Yjt(t){return!!t&&t.Nk()},Vjt(t){return!!t&&t.Rk()},Hjt(t){return!!t&&t.Ak()},qjt(t){return!!t&&!t.vP()},Zjt(t,s,i){return!!t&&N.compare(100*t.p_(),s,i)},Xjt(t){const s=this.Zc.R3();return!!s&&s.q7(t)},tjt(){return!0},Kjt(){return 0<this.HFt},$jt(t,s){const i=this.Zc.INt();return!!i&&!!s&&!!i.out(t,s)}}}{let m=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const r=t[1],n=s[1];return r-n},g=function(t,s){return t[1]-s[1]};m,g;const ka=self.Os,Fa=[],ja=[],za=ka.ir(ka.Rect),Ba=ka.ir(ka.Ro),Ua=[];ka.U9.B9.Aht={t5t(t,s){t.zet(s)},s5t(t,s){t.ae()&&"number"!=typeof s&&(s=parseFloat(s)),t.zet(t.iet()+s)},i5t(t,s){t.ae()&&t.zet(t.iet()-s)},e5t(t,s){t.zet(!!s)},h5t(t){t.zet(!t.iet())},r5t(t){t.zet(t.s1t())},n5t(t){this.Zc.FO().b1t(t)},o5t(t,s,i,e,h,r){if(t&&s){const n=this.Zc.GP(t,s,i,e,h,r);if(n){h&&s.IP(n);const o=this.Zc.FO(),a=(o.NP(!0),n.EP(),o.NP(!1),new Map);n.MNt(a,t,h);for(const[u,l]of a)u.bP().oft(l)}}},a5t(t,s,i,e,h,r){if(t&&s){const n=this.Zc.ukt(t);n&&ka.U9.B9.Aht.o5t.call(this,n,s,i,e,h,r)}},GY(h,r,n,o,a,t,u,l,c,f,d){if(h){let s=this.Zc.e4(),i=s;if(t){const p=this.Zc.j3().Rq(t);if(!p)return;i=p}let e=null;if(!("number"!=typeof u||0<=u)||(e=i.n4(u))){let t=null;if(!("number"!=typeof l||0<=l)||(t=s.n4(l))){za.set(r,n,o,a);const m=i.GY(h,za,e,t,c,f,d);h.bP().nft(m),h.jgt()}}}},u5t(){const t=this.r0t;t.s0t()&&t.$ft().aB()},Qdt(t,s){const i=this.Zc.FO().v1t(t);i&&(0===s?i.Qdt(!1):1===s?i.Qdt(!0):i.Qdt(!i.Wdt()))},l5t(t){this.Zc.y3(t)},c5t(t,s){if(s<0&&(s=0),t){const i=t.bP(),e=i.TP();for(const h of e)h.y3(s)}},f5t(t){if(t){const s=t.bP(),i=s.TP();for(const e of i)e.PF()}},Cn(t){if(!(t<0))return this.Zc.FO().hdt().obt(t),!0},i3(t){return this.Zc.FO().hdt().abt(t),!0},d5t(){const t=this.Zc.FO();return t.hdt().ubt(t.Sdt()),!0},t3(t){this.Zc.FO().t3(t)},async L3t(t,s,i,e,h,r){const n=this.Zc.MR();n&&(this.f4(),await n.L3t(0===t?"image/png":"image/jpeg",s/100,i,e,h,r),await this.Zc.hj(ka.U9.B9.z9.Tjt,null))},p5t(t,s){if(!(t<=0||s<=0)){this.Zc.h3t(t,s),this.Zc.e4().QH();const i=this.Zc.MR();i&&("off"!==i.XOt()&&this.Zc.ckt(t,s),i.jI(i.SU(),i.TU(),!0),this.Zc.f4())}},m5t(t){const s=this.Zc.MR();s&&"off"!==s.XOt()&&(s.c3t(0!==t?"high":"low"),s.jI(s.SU(),s.TU(),!0))},wit(t){this.Zc.iFt(t)},g5t(){this.Zc.eFt()},y5t(t){this.Zc.hFt(t)},M5t(t){this.Zc.m2t(t)},w5t(t){},S5t(){for(const t of this.Zc.j3().U3())t.aq()},T5t(t){this.Zc.$kt(0!==t)},b5t(t,s){this.Zc.L3(1/t),this.Zc._3(1/s)},x5t(t,s){this.Zc._3(t),this.Zc.L3(s)},v5t(t){this.Zc.I3(["vsync","unlimited-tick","unlimited-frame"][t])},C5t(t,i){if(t){const s=t.bP(),e=s.TP(),h=Fa,r=ja,n=this.Zc.e4(),o=t.NY(),a=t.aMt();for(let t=0,s=e.length;t<s;++t){const u=e[t],l=u.r4();if(l){let t;t=o?u.Srt(i+u.yF().oMt(a)):u.Srt(i),h.push([l.n4().oO(),l.o4()]),r.push([u,t])}}if(h.length){h.sort(m),r.sort(g);let i=!1;for(let t=0,s=h.length;t<s;++t){const c=r[t][0],f=n.a4(h[t][0]),d=h[t][1],p=f.u4();p[d]!==c&&((p[d]=c).r4().l4(f,!0),f.c4(c),i=!0)}i&&this.Zc.f4(),ka.Dn(Fa),ka.Dn(ja)}}},iR(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.Zc.pO().iR(t,s)},G5t(t){if(!this.Zc.Ag()){const s=this.Zc.j3();s.Q3()||s.J3(t)}},I5t(t){if(!this.Zc.Ag()){const s=this.Zc.j3();if(!s.Q3()){const i=s.Rq(t);i&&s.J3(i)}}},N5t(t){if(!this.Zc.Ag()){const s=this.Zc.j3();if(!s.Q3()){const i=s.U3(),e=i.indexOf(s.R3());if((!t||0!==e)&&(t||e!==i.length-1)){const h=i[e+(t?-1:1)];s.J3(h)}}}},E5t(){if(!this.Zc.Ag()){const t=this.Zc.j3();t.Q3()||(t.J3(t.R3()),this.Zc.FO().N1t())}},_5t(t,s){t&&t.Gk(s)},D5t(t,s){t&&t._k(s)},A5t(t,s){t&&t.Lk(s)},L5t(t,s){t&&t.g_(s/100)},O5t(t,s){t&&t.Pk(s)},R5t(t,s){t&&t.Fk(s)},P5t(t,s){t&&t.BP(ka.dr(+s))},k5t(t,s,i){t&&(t.tF(!0),t.WP(s),t.JP(i))},F5t(t){t&&t.tF(!1)},j5t(t,s,i){t&&t.oV(s/100,i/100)},z5t(t,s){t&&t.nT(+s)},B5t(t,s){if(t){Ba.da(s),Ba.lr();const i=t.$k();i.ra(Ba)||(i.Ho(Ba),this.f4())}},U5t(t,s){t&&t.Vk(s)},W5t(t,s){t&&t.WS(s)},Q5t(t,s,i){if(t){const e=t.OP(),h=e.fht(i);if(h){const r=1===s;h.Opt()!==r&&(h.QDt(r),t.wz(),this.Zc.f4())}}},J5t(t,s,i,e){if(t){const h=t.OP(),r=h.fht(s);if(r){i=Math.floor(i);const n=r.Yx().Hx(i);if(n){"color"===n?(Ba.da(e),e=Ba):"percent"===n&&(e/=100);const o=h.Tz(r.oO(),i,e);o&&r.Opt()&&this.Zc.f4()}}}},Y5t(t,s){t&&t.Zk(s)},V5t(t){this.Zc.e4().jP(+t)},H5t(t){this.Zc.e4().BP(ka.dr(+t))},q5t(t,s){const i=this.Zc.e4(),e=i.OP(),h=e.fht(s);if(h){const r=1===t;h.Opt()!==r&&(h.QDt(r),i.wz(),this.Zc.f4())}},Z5t(t,s,i){const e=this.Zc.e4(),h=e.OP(),r=h.fht(t);if(r){s=Math.floor(s);const n=r.Yx().Hx(s);if(n){"color"===n?(Ba.da(i),i=Ba):"percent"===n&&(i/=100);const o=h.Tz(r.oO(),s,i);o&&r.Opt()&&this.Zc.f4()}}},X5t(t,s){const i=this.Zc.e4();i.fk(t/100,s/100)},K5t(t){const s=this.Zc.e4();0===t?s.mk():s.gk()},$5t(t){const s=this.Zc.e4();s.WP(t)},tzt(t){const s=this.Zc.e4();s.JP(t)},szt(t,s){const i=this.Zc.e4();i.WP(t),i.JP(s)},izt(t){if(t){const s=t.pTt();if(s){const i=s.r4();if(i){const e=this.Zc.e4();e.WP(i.tT()),e.JP(i.eT())}}}},ek(t,s,i){const e=this.Zc.e4();try{e.ek(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},rk(t,s,i){if(t){const e=this.Zc.e4();try{e.rk(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},ak(t){if(t){const s=this.Zc.e4();s.ak(t)}},lk(){this.Zc.e4().lk()},async ezt(t){const s=this.Zc.R3();if(s&&t&&!this.Zc.Ag()){const i=t.NY()?t.Dmt():[t];await this.$Ft(s,i)}},async hzt(t){await ka.U9.B9.Aht.ezt.call(this,this.Zc.ukt(t))},rzt(t){const s=this.Zc.R3();if(s&&t){const i=t.NY()?t.Dmt():[t];this.sjt(s,i)}},nzt(t){ka.U9.B9.Aht.rzt.call(this,this.Zc.ukt(t))},ozt(){const t=this.Zc.R3();if(t){const s=t.a9();this.sjt(t,s)}},async azt(t){const s=this.Zc.R3();t&&s&&!this.Zc.Ag()&&await this.$Ft(s,t.r9())},async uzt(t){const s=this.Zc.R3(),i=this.Zc.j3().Rq(t);i&&s&&!this.Zc.Ag()&&await this.$Ft(s,i.r9())},$O(t){const s=this.Qct.ZO();if(s)switch(s.KO()){case 1:"number"==typeof t&&s.$O(t);break;case 2:"string"==typeof t&&s.$O(t);break;case 3:s.$O(t)}},lzt(t,s,i){const e=this.djt(t.toLowerCase(),!0),h=e.mjt,r=s.toLowerCase(),n=(h.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`),ka.first(h.values())||e.pjt);if(n){const o=0!==n.HO(),a=0!==i.HO();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`)}h.set(r,i)},czt(t,s){const i=this.djt(t.toLowerCase(),!0),e=(i.pjt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),ka.first(i.mjt.values())||i.pjt);if(e){const h=0!==e.HO(),r=0!==s.HO();if(h!=r)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}i.pjt=s},fzt(t,s,i){const e=this.Zc,h=e.vTt()?Ua:null,r=(i=Math.floor(i),this.djt(t.toLowerCase(),!1));if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),h;let n=r.mjt.get(s.toLowerCase());if(!n){if(!r.pjt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),h;n=r.pjt,i=0}if(!n.Ul())return h;if(0!==n.HO())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),h;const o=e.FO(),a=o.QO(),u=a.WO(),l=0<u.length,c=(l&&(n.VO()?o.N6(u):o.idt(u)),[]),f=o.Zdt(a);if(f){const p=f.Kdt();for(let t=i,s=p.length;t<s;++t)c.push(p[t].iet())}const d=n.Kdt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].s1t());return e.vTt()?this.yjt(o,n,c,l,u):this.gjt(o,n,c,l,u)}}}{const E=self.Os;E.U9.B9.Lht={dzt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},O(t){return t.toString()},Wt(t){return"string"==typeof t?t.length:0},random(t,s){return void 0===s?this.Zc.O3()*t:this.Zc.O3()*(s-t)+t},Yyt(...t){const s=Math.floor(this.Zc.O3()*t.length);return t[s]},pzt(t,...s){return"number"!=typeof t&&(t=0),s[t=E.lr(Math.floor(t),0,s.length-1)]},pi(){return Math.PI},mzt(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},gzt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(E.dr(t))},cos(t){return Math.cos(E.dr(t))},tan(t){return Math.tan(E.dr(t))},asin(t){return E.pr(Math.asin(t))},acos(t){return E.pr(Math.acos(t))},atan(t){return E.pr(Math.atan(t))},exp(t){return Math.exp(t)},qt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e<t&&(e=t)}return e},min(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e>t&&(e=t)}return e},lr(t,s,i){return E.lr(t,s,i)},It(t,s,i,e){return E.mr(t,s,i,e)},angle(t,s,i,e){return E.pr(E.yr(t,s,i,e))},Lt(t,s,i){return E.Lt(t,s,i)},Gr(t,s,i){return E.Gr(t,s,i)},Nr(t,s,i,e){return E.Nr(t,s,i,e)},Er(t,s,i,e,h){return E.Er(t,s,i,e,h)},_r(t,s,i){return E._r(t,s,i)},yzt(t,s){return E.pr(E.Mr(E.dr(t),E.dr(s)))},Mzt(t,s,i){return E.pr(E.Tr(E.dr(t),E.dr(s),i))},wzt(t,s,i){return E.pr(E.wr(E.dr(t),E.dr(s),E.dr(i)))},Szt(t,s,i){return(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s},Tzt(t,s){return(t|=0)^1<<(0|s)},bzt(t,s){return(t|=0)&1<<(0|s)?1:0},xzt(){return"\n"},vzt(t){return"string"==typeof t?t.toUpperCase():""},Czt(t){return"string"==typeof t?t.toLowerCase():""},left(t,s){return"string"==typeof t?t.substr(0,s):""},mid(t,s,i){return"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i)},right(t,s){return"string"==typeof t?t.substr(Math.max(t.length-s,0)):""},trim(t){return"string"==typeof t?t.trim():""},Gzt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},Izt(t,s){return"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0},find(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(E.re(s),"i")):-1},Nzt(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(E.re(s),"")):-1},replace(t,s,i){return"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(E.re(s),"gi"),i):"string"==typeof t?t:""},Ezt(t,...i){let e=t;for(let t=0,s=i.length;t<s;++t)e=e.replaceAll(`{${t}}`,i[t].toString());return e},_zt(t,s,i){const e=this.XFt(s,i);return t?t.search(e):-1},Dzt(t,s,i,e){const h=this.XFt(s,i);return t?t.replace(h,e):""},Azt(t,s,i){const e=this.KFt(t.toString(),s,i);return e?e.length:0},Lzt(t,s,i,e){e=Math.floor(e);const h=this.KFt(t.toString(),s,i);return!h||e<0||e>=h.length?"":h[e]},Ozt(t,s){let i=t<0?"-":"",e=s-(t=t<0?-t:t).toString().length;return(i+="0".repeat(Math.max(e,0)))+t.toString()},Rzt(t){return encodeURIComponent(t)},Pzt(t){return decodeURIComponent(t)},r3(){return this.Zc.dX()},timescale(){return this.Zc.g3()},kzt(){return(Date.now()-this.Zc.Ukt())/1e3},Fzt(){return Date.now()},time(){return this.Zc.l3()},tickcount(){return this.Zc.ltt()},jzt(){return this.Zc.Jkt()},fps(){return this.Zc.M3()},zzt(){return this.Zc.b3()},Bzt(){return this.Zc.v3()},Uzt(){return this.Zc.MR().GR()},Wzt(){return this.Zc.MR().NR()},Qzt(){return this.Zc.vO()},Jzt(){return this.Zc.GO()},Yzt(){return this.Zc.vO()},Vzt(){return this.Zc.GO()},Hzt(){return this.Zc.e4().QP()},qzt(){return this.Zc.e4().YP()},Zzt(){return this.Zc.e4().Uc()},Xzt(){return this.Zc.e4().zP()},Kzt(){return E.pr(this.Zc.e4().UP())},$zt(){return this.Zc.e4().Xp()},tBt(){return this.Zc.e4().um()},sBt(){return 100*this.Zc.e4().tV()},iBt(){return 100*this.Zc.e4().sV()},eBt(t){const s=this.Zc.e4().n4(t);return s?s.$Y().pu():0},hBt(t){const s=this.Zc.e4().n4(t);return s?s.$Y().mu():0},rBt(t){const s=this.Zc.e4().n4(t);return s?s.$Y().gu():0},nBt(t){const s=this.Zc.e4().n4(t);return s?s.$Y().yu():0},oBt(t){const s=this.Zc.e4().n4(t);return s?s.$Y().width():0},aBt(t){const s=this.Zc.e4().n4(t);return s?s.$Y().height():0},uBt(t){const s=this.Zc.e4().n4(t);if(s){const i=s.$Y();return(i.pu()+i.gu())/2}return 0},lBt(t){const s=this.Zc.e4().n4(t);if(s){const i=s.$Y();return(i.mu()+i.yu())/2}return 0},cBt(t,s,i){const e=this.Zc.e4().n4(t);return e?e.hF(s,i)[0]:0},fBt(t,s,i){const e=this.Zc.e4().n4(t);return e?e.hF(s,i)[1]:0},dBt(t,s,i){const e=this.Zc.e4().n4(t);return e?e.aF(s,i)[0]:0},pBt(t,s,i){const e=this.Zc.e4().n4(t);return e?e.aF(s,i)[1]:0},mBt(t,s,i,e){const h=this.Zc.e4(),r=h.n4(t),n=h.n4(s);if(!r||!n||r===n)return i;const[o,a]=r.aF(i,e);return n.hF(o,a)[0]},gBt(t,s,i,e){const h=this.Zc.e4(),r=h.n4(t),n=h.n4(s);if(!r||!n||r===n)return e;const[o,a]=r.aF(i,e);return n.hF(o,a)[1]},yBt(t){const s=this.Zc.e4().n4(t);return s?s.kk():0},MBt(t){const s=this.Zc.e4().n4(t);return s?E.pr(s.zk()):0},wBt(t){const s=this.Zc.e4().n4(t);return s?100*s.p_():0},SBt(t){const s=this.Zc.e4().n4(t);return s?s.jk():0},TBt(t){const s=this.Zc.e4().n4(t);return s?s.QP():0},bBt(t){const s=this.Zc.e4().n4(t);return s?s.YP():0},xBt(t){const s=this.Zc.e4().n4(t);return s?100*s.Uk():0},vBt(t){const s=this.Zc.e4().n4(t);return s?100*s.Qk():0},CBt(t){const s=this.Zc.e4().n4(t);return s?s.rT():0},GBt(t){const s=this.Zc.e4().n4(t);return s?s.oO():-1},IBt(){const t=this.Zc.MR();return t?t.R3t():""},NBt(t){const s=this.r0t;if(!s.s0t())return 0;if(t){const i=s.e0t(t);return i?i.oO():0}return s.$ft().oO()},EBt(){return this.Zc.rFt()},_Bt(t,s,...i){const e=this.djt(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let h=e.mjt.get(s.toLowerCase());if(!h){if(!e.pjt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;h=e.pjt}const r=h.HO(),n=h.zO();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!h.Ul())return n;const o=this.Zc,a=o.FO(),u=a.QO(),l=u.WO(),c=0<l.length,f=(c&&(h.VO()?a.N6(l):a.idt(l)),h.Kdt());for(let t=i.length,s=f.length;t<s;++t)i.push(f[t].s1t());const d=h.UO(),p=d.YO(d.WO(),h.VO(),r,n,...i);return c&&a._6(l),p},DBt(){return this.Zc.cO().UQ()},ABt(){return 0===this.HFt?1:this.qFt/this.HFt},renderer(){return this.Zc.M3t()?"webgpu":"webgl"},LBt(){return this.Zc.M3t()?this.Zc.M3t().GetAdapterInfoString():this.Zc.y3t().vD()},OBt(){let t=this.Zc.xS().nS();return Math.round(100*t/1048576)/100},RBt(t,s,i){return E.kr(t,s,i)},PBt(t,s,i){return E.jr(t/100,s/100,i/100)},kBt(t,s,i,e){return E.Fr(t/100,s/100,i/100,e/100)},FBt(t,s,i){return E.jr(t/255,s/255,i/255)},jBt(t,s,i,e){return E.Fr(t/255,s/255,i/255,e/255)},zBt(){return this.Zc.MO()},BBt(){return this.Zc.SO()},UBt(){return this.Zc.QO().V7().Uc()},WBt(){return this.Zc.QO().qmt()}}}{const Wa=self.Os;Wa.U9.mht=class extends Wa.pbt{constructor(t){super(t)}er(){super.er()}}}{const Qa=self.Os,Ja=self.Qs,Ya=[],Va=(Qa.U9.mht._Gt=class extends Qa.Kbt{constructor(t){super(t),this.xGt=t.aIt()}er(){Qa.Dn(this.xGt),super.er()}kbt(){for(const t of this.xGt)t.vCt(this.Zc)}l9(s){const i={$T:this.Zc.IO()};return Promise.all(this.xGt.map(t=>t.CCt(s,i)))}g9(){for(const t of this.xGt)t.GCt()}d9(){this.QBt()}QBt(){for(const t of this.Pct.SP())t.sz().JBt()}Fwt(t){Qa.U9.mht.H2t(this,t)}xSt(t){Ya.push({ixt:null,YBt:!1,instances:[]})}VBt(t,s,i){const e=Ya.at(-1);e.ixt=t,e.YBt=i,e.instances.push(s)}vSt(t){const s=Ya.pop(),i=s.ixt,e=s.YBt;if(i){const h=new Map;for(const r of s.instances)r.MNt(h,i,e);for(const[n,o]of h)n.bP().oft(o)}}HBt(t){const s=this.yF().dIt(t),i=this.I4(),e=s.ICt(0);return e.jz().dW(i.xS(),{$T:i.IO()}).then(()=>this.QBt()),s}qBt(t){for(const s of this.Pct.SP())s.sz().ZBt(t);this.yF().pIt(t)}XBt(t,s){const i=this.Pct.cIt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.DCt(s);e<0&&(e+=i.Dz()+1);const h=Qa.TCt.xCt(this.I4()),r=(i.NCt(h,e),this.I4());h.jz().dW(r.xS(),{$T:r.IO()}).then(()=>this.QBt());for(const n of this.Pct.SP())n.sz().KBt();return h}$Bt(t,s){const i=this.Pct.cIt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.Dz())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.DCt(s);e<0&&(e+=i.Dz()),i.ECt(e);for(const h of this.Pct.SP())h.sz().KBt()}Fbt(){return self.tUt}},new WeakMap);self.tUt=class extends self.aP{constructor(t){super(t),Va.set(this,t.bSt())}sUt(t){Ja.Se(t);const s=Va.get(this).yF().cIt(t);return s?s.ACt():null}iUt(){return Va.get(this).yF().lIt().map(t=>t.ACt())}eUt(t){return Ja.Se(t),Va.get(this).HBt(t).ACt()}hUt(t){Ja.Se(t),Va.get(this).qBt(t)}rUt(t,s){if(Ja.Se(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return Va.get(this).XBt(t,s).Oz()}nUt(t,s){if(Ja.Se(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");Va.get(this).$Bt(t,s)}}}{const _=self.Os,Ha=self.Qs,qa=_.ir(_.Rect),Za=_.ir(_.Qu),Xa=_.ir(_.Qa),D=(_.U9.mht.Instance=class extends _.Axt{constructor(t,s){super(t);let i=!0,e="",h=0,r=!0;s&&(i=!!s[0],e=s[1],h=s[2],r=s[3]),this.oUt=this.Pct.cIt(e)||this.Pct.aIt()[0],this.aUt=_.lr(h,0,this.oUt.Dz()-1),this.uUt=this.oUt.ICt(this.aUt);const n=this.uUt.jz(),o=(this.lUt=n.wb(),this.cUt=n.gN(),this.fUt=n.Qxt(),this.Pxt(),t.gNt(2,!0),t.gNt(1,0<=this.oUt.xz()),this.dUt=Math.abs(this.oUt.xz()),this.pUt=this.oUt.Nz(),this.mUt=_.ir(_.d0),this.gUt=0,this.yUt=0,this.MUt="",this.wUt=-1,this.SUt="",this.TUt=0,this.r4());this.bUt=o.Bj(),o.Gk(i),o.e5(r),o.Qrt(this.uUt.Uz()),o.Yrt(this.uUt.Qz()),o.aDt(this.uUt.sB()),o.Dj(),1===this.Pct.uIt()&&1===this.Pct.aIt()[0].Dz()||0===this.dUt||this.xxt()}er(){this.oUt=null,this.uUt=null,this.lUt=null,this.mUt=null,super.er()}zxt(){return this.uUt.jz()}$st(){return!0}m8(){this.lUt=null}jxt(){this.JBt()}UT(t){const s=this.lUt;if(null!==s){t.w_(s);const i=this.r4();i.J5()?this.xUt(i,t):this.vUt(i,t)}}vUt(t,s){let i=this.bUt;this.Zc.EO()&&(i=t.sDt(i)),s.E_(i,this.fUt)}xUt(s,t){const i=s.wDt();if(s.TDt()){s.K_t(qa,Za,!1);let t=Za;this.Zc.EO()&&(t=s.sDt(t)),i.BT(s.Y5(),t,this.fUt),s.SDt(!1)}i.UT(t)}CUt(){return this.mUt.Ks()}GUt(){return this.Si.yNt(2)}IUt(t){this.Si.gNt(2,t)}NUt(){return this.Si.yNt(1)}EUt(t){this.Si.gNt(1,t)}_Ut(){return this.Si.yNt(4)}DUt(t){this.Si.gNt(4,t)}mX(){this.SUt&&this.AUt(),0<=this.wUt&&this.LUt();const t=this.dUt;if(this.GUt()&&0!==t){const s=this.Zc.n3(this.Si),i=(this.mUt.sc(s),this.CUt()),e=this.uUt,h=e.zz()/t;if(!(i<this.gUt+h)){const r=this.oUt,n=this.pUt,o=r.Dz(),a=r.Gz(),u=r.Cz(),l=r._z(),c=(this.NUt()?this.aUt++:this.aUt--,this.gUt+=h,this.aUt>=o&&(l?(this.EUt(!1),this.aUt=o-2):!u&&(this.yUt++,this.yUt>=a)?this.OUt(!1):this.aUt=n),this.aUt<0&&(l?(this.aUt=1,this.EUt(!0),u||(this.yUt++,this.yUt>=a&&this.OUt(!0))):!u&&(this.yUt++,this.yUt>=a)?this.OUt(!0):this.aUt=n),this.aUt=_.lr(this.aUt,0,o-1),r.ICt(this.aUt));i>this.gUt+c.zz()/t&&(this.gUt=i),this.RUt(e,c)}}else this.oxt()}OUt(t){this.aUt=t?0:this.oUt.Dz()-1,this.IUt(!1),this.MUt=this.oUt.Uc(),this.DUt(!0),this.sxt("animationend",!1,{animationName:this.MUt}),this.ij(_.U9.mht.z9.PUt),this.ij(_.U9.mht.z9.kUt),this.DUt(!1),this.yUt=0}RUt(i,e,t){if(i!==e){const s=this.r4(),h=i.jz(),r=e.jz(),n=h.Xp(),o=h.um(),a=r.Xp(),u=r.um(),l=(t&&t.onFrameChange?t.onFrameChange(s,n,o,a,u):(n!==a&&s.nm(s.Xp()*(a/n)),o!==u&&s.Kp(s.um()*(u/o))),s.Qrt(e.Uz()),s.Yrt(e.Qz()),s.aDt(e.sB()),s.Dj(),this.uUt=e,this.lUt=r.wb(),this.cUt=r.gN(),this.fUt=r.Qxt(),this.EB().uht());for(let t=0,s=l.length;t<s;++t)l[t]._vt(i,e);this.sxt("framechange",!1,{animationName:this.oUt.Uc(),FUt:this.aUt}),this.ij(_.U9.mht.z9.jUt),this.Zc.f4()}}zUt(t){this.IUt(!0),this.gUt=this.CUt(),1===t&&0!==this.aUt&&(this.wUt=0,this._Ut()||this.LUt()),this.xxt()}BUt(t,s,i){this.SUt=t,this.TUt=s,this.xxt(),!i&&this._Ut()||this.AUt()}UUt(){return this.oUt}WUt(){return this.SUt||this.oUt.Uc()}ZBt(t){_.dh(t,this.WUt())&&this.BUt(this.Pct.mIt().Uc(),1,!0)}QUt(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.Pct.cIt(this.WUt());if(!s)return;if(-1===(t=s._Ct(t)))return}isFinite(t)&&(this.wUt=t,this._Ut()||this.LUt())}KBt(){if(!this.SUt&&-1===this.wUt){const t=this.uUt,s=this.oUt.ICt(_.lr(this.aUt,0,this.oUt.Dz()-1));t!==s&&this.RUt(t,s),1<this.oUt.Dz()&&0<this.dUt&&this.xxt()}}JUt(){return this.aUt}YUt(){return this.uUt.rB()}VUt(t){this.dUt=Math.abs(t),this.EUt(0<=t),0<this.dUt&&this.xxt()}HUt(){return this.NUt()?this.dUt:-this.dUt}qUt(t){"string"==typeof t&&-1===(t=this.oUt._Ct(t))||(t=_.lr(Math.floor(t),0,this.oUt.Dz()-1),this.pUt=t)}ZUt(){return this.pUt}AUt(t){const s=this.uUt,i=this.Pct.cIt(this.SUt);if(this.SUt="",i&&(i!==this.oUt||!this.GUt())){this.oUt=i,this.EUt(0<=i.xz()),this.dUt=Math.abs(i.xz()),this.pUt=i.Nz(),this.aUt=_.lr(this.aUt,0,this.oUt.Dz()-1),1===this.TUt&&(this.aUt=0),this.IUt(!0),this.gUt=this.CUt();const e=this.oUt.ICt(this.aUt);this.RUt(s,e,t)}}LUt(t){const s=this.uUt,i=this.aUt;if(this.aUt=_.lr(Math.floor(this.wUt),0,this.oUt.Dz()-1),this.wUt=-1,t||i!==this.aUt){const e=this.oUt.ICt(this.aUt);this.RUt(s,e),this.gUt=this.CUt()}}JBt(){const t=this.uUt.jz();this.lUt=t.wb(),this.cUt=t.gN(),this.fUt=t.Qxt(),this.r4().SDt(!0)}wb(){return this.lUt}gN(){return this.cUt}Qxt(){return this.fUt}Vz(){return this.uUt.Vz()}kSt(t){let s=this.uUt,i=this.r4(),e=null;if("string"==typeof t)e=s.$z(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.Kz(t-1)}let h=i.kj();if(!e)return[i.tT(),i.eT(),h];if(Xa.C(e.WCt()),i.J5()){const[r,n,o]=i.Y5().HT(Xa.qa(),Xa.Xa());Xa.set(r,n),h+=o}return Xa.offset(-s.Uz(),-s.Qz()),Xa.scale(i.Xp(),i.um()),Xa.rotate(i.UP()),Xa.offset(i.tT(),i.eT()),[Xa.qa(),Xa.Xa(),h]}XUt(){return this.r4().dDt()._l()}KUt(t){t=Math.floor(t);const s=this.r4(),i=s.dDt(),e=i._l();if((t=t===e?0:t)<0||e<=t)return[0,0];const h=i.El();return[h[2*t+0]+s.tT(),h[2*t+1]+s.eT()]}Ixt(){const s=_.U9.mht.Aht,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.oUt.Uc(),$Ut:t=>this.Ext(s.t6t,t,0)},{name:t+".current-frame",value:this.aUt,$Ut:t=>this.Ext(s.s6t,t)},{name:t+".is-playing",value:this.GUt(),$Ut:t=>t?this.Ext(s.i6t,0):this.Ext(s.e6t)},{name:t+".speed",value:this.dUt,$Ut:t=>this.Ext(s.h6t,t)},{name:t+".repeats",value:this.yUt,$Ut:t=>this.yUt=t}]}]}dT(){const t={a:this.oUt.PY()},s=(0!==this.gUt&&(t.fs=this.gUt),this.CUt()),i=(0!==s&&(t.at=s),0!==this.aUt&&(t.f=this.aUt),0!==this.dUt&&(t.cas=this.dUt),1!==this.yUt&&(t.ar=this.yUt),0!==this.pUt&&(t.rt=this.pUt),this.GUt()||(t.ap=this.GUt()),this.NUt()||(t.af=this.NUt()),this.r4());return i.i5()&&(t.ce=i.i5()),t}pT(t){const s=this.yF().fIt(t.a),i=(s&&(this.oUt=s),this.gUt=t.hasOwnProperty("fs")?t.fs:0,this.mUt.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),e=(this.aUt=_.lr(i,0,this.oUt.Dz()-1),this.dUt=t.hasOwnProperty("cas")?t.cas:0,this.yUt=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),h=(this.pUt=_.lr(e,0,this.oUt.Dz()-1),this.IUt(!t.hasOwnProperty("ap")||!!t.ap),this.EUt(!t.hasOwnProperty("af")||!!t.af),this.oUt.ICt(this.aUt)),r=(this.uUt=h,this.JBt(),this.r4());r.Qrt(h.Uz()),r.Yrt(h.Qz()),r.aDt(h.sB()),r.e5(!!t.ce),this.GUt()&&this.xxt()}crt(t){const s=this.r4();switch(t){case 3:return s.i5();case 2:return _.lr(this.aUt,0,this.oUt.Dz()-1);case 1:return this.oUt.Uc()}}yrt(t,s,i){const e=this.r4();switch(t){case 3:e.e5(!!s);break;case 2:{this.IUt(!1);const h=this.oUt.Dz()-1,r=s=_.lr(s,0,h),n=this.oUt.ICt(this.aUt),o=this.oUt.ICt(r);this.RUt(n,o,i),this.aUt=_.lr(r,0,h);break}case 1:{this.SUt=s,this.AUt(i);const a=this.oUt.Dz();1<a&&0<this.oUt.xz()?this.xxt():this.oxt();break}}}Fbt(){return self.r6t}},new WeakMap),Ka=new Map([["current-frame",0],["beginning",1]]);self.r6t=class extends self.H5{constructor(){super(),D.set(this,self.mF.SF().sz())}Yz(){return D.get(this).Vz()}qz(t){return this.Zz(t)[0]}Xz(t){return this.Zz(t)[1]}n6t(t){return this.Zz(t)[2]}Zz(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return D.get(this).kSt(t)}tB(){return D.get(this).XUt()}iB(t){return Ha.ge(t),D.get(this).KUt(t)[0]}hB(t){return Ha.ge(t),D.get(this).KUt(t)[1]}eB(t){return Ha.ge(t),D.get(this).KUt(t)}o6t(){D.get(this).IUt(!1)}a6t(t="current-frame"){Ha.Se(t);const s=Ka.get(t);if(void 0===s)throw new Error("invalid mode");D.get(this).zUt(s)}u6t(t,s="beginning"){Ha.Se(t),Ha.Se(s);const i=Ka.get(s);if(void 0===i)throw new Error("invalid mode");const e=D.get(this);if(!e.yF().cIt(t))throw new Error(`animation name "${t}" does not exist`);e.BUt(t,i)}sUt(t){Ha.Se(t);const s=D.get(this).yF().cIt(t);return s?s.ACt():null}get animation(){return D.get(this).UUt().ACt()}get animationName(){return D.get(this).WUt()}set FUt(t){Ha.ge(t),D.get(this).QUt(t)}get FUt(){return D.get(this).JUt()}set l6t(t){Ha.Se(t),D.get(this).QUt(t)}get l6t(){return D.get(this).YUt()}set c6t(t){Ha.ge(t),D.get(this).VUt(t)}get c6t(){return D.get(this).HUt()}set f6t(t){Ha.ge(t),D.get(this).qUt(t)}get f6t(){return D.get(this).ZUt()}get imageWidth(){return D.get(this).zxt().Xp()}get imageHeight(){return D.get(this).zxt().um()}d6t(){const t=D.get(this).zxt();return[t.Xp(),t.um()]}async p6t(t){Ha.Xe(t,Blob);const s=D.get(this),i=s.I4(),e=s.zxt(),h=_.ir(_.Vvt);if(h.oCt(i,t),await h.dW(i.xS(),{$T:i.IO()}),s.hr())h.er();else{e.aCt(h);const r=s.bSt();r.QBt(),r.yF().Af().dispatchEvent(new _.Event("animationframeimagechange")),i.f4()}}m6t(t,s){Ha.Se(s),D.get(this).r4().Z_t(!!t,s)}}}{const $a=self.Os;$a.U9.mht.z9={g6t(t){return $a.dh(this.WUt(),t)},y6t(t,s){return $a.compare(this.aUt,t,s)},M6t(t,s){if("string"!=typeof s)return!1;const i=this.uUt.rB();return $a.compare(i.toLowerCase(),t,s.toLowerCase())},w6t(t,s){return $a.compare(this.HUt(),t,s)},kUt(t){return $a.dh(this.MUt,t)},PUt(){return!0},jUt(){return!0},S6t(){return this.r4().Xp()<0},T6t(){return this.r4().um()<0},b6t(){return!0},x6t(){return!0},i5(){return this.r4().i5()}}}{const tu=self.Os;tu.U9.mht.Aht={v6t(t,s,i,e,h){if(t&&s){const[r,n]=this.kSt(i),o=this.Zc.GP(t,s,r,n,e,h);if(o){if(e&&s.IP(o),t.lP().QR()){const u=o.r4();u.BP(this.r4().UP()),u.Dj()}const a=this.Zc.FO();a.NP(!0),o.EP(),a.NP(!1),t!==this.Zc.r1t().yF()&&this.nxt.VBt(t,o,e)}}},e6t(){this.IUt(!1)},i6t(t){this.zUt(t)},t6t(t,s){this.BUt(t,s)},s6t(t){this.QUt(t)},h6t(t){this.VUt(t)},C6t(t){this.qUt(t)},G6t(s,t){try{0===s?this.bSt().HBt(t):this.bSt().qBt(t)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation: `,t)}},I6t(s,t,i){try{0===s?this.bSt().XBt(t,i):this.bSt().$Bt(t,i)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation frame: `,t)}},N6t(t){const s=this.r4(),i=s.Xp(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.nm(e),s.Dj())},E6t(t){const s=this.r4(),i=s.um(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Kp(e),s.Dj())},jP(t){const s=this.uUt,i=s.jz(),e=this.r4(),h=e.Xp()<0?-1:1,r=e.um()<0?-1:1,n=i.Xp()*t*h,o=i.um()*t*r;e.Xp()===n&&e.um()===o||(e.jI(n,o),e.Dj())},async _6t(t,s,i){const e=this.uUt,h=e.jz(),r=this.r4(),n=this.Zc,o=this.nxt;if(h.RQ()===t)0===s&&(r.jI(h.Xp(),h.um()),r.Dj()),this.ij(tu.U9.mht.z9.b6t);else{const a=tu.ir(tu.Vvt);try{if(await a.nCt(n,t),!a.u8())throw new Error("image failed to load");if(this.hr())return void a.er();await a.dW(n.xS(),{$T:n.IO()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.hr()||this.ij(tu.U9.mht.z9.x6t))}this.hr()?a.er():(h.aCt(a),o.QBt(),o.yF().Af().dispatchEvent(new tu.Event("animationframeimagechange")),n.f4(),0===s&&(r.jI(h.Xp(),h.um()),r.Dj()),await this.hj(tu.U9.mht.z9.b6t))}},D6t(t){this.r4().e5(t)},Z_t(t,s){this.r4().Z_t(0===t,s)},A6t(t){this.r4().WS(t),this.Zc.f4()}}}{const su=self.Os;su.U9.mht.Lht={L6t(){return this.JUt()},O6t(){return this.YUt()},R6t(){return this.oUt.Dz()},P6t(){return this.oUt.Uc()},k6t(){return this.HUt()},F6t(){return this.oUt.xz()},j6t(t){return this.kSt(t)[0]},z6t(t){return this.kSt(t)[1]},B6t(t){return this.kSt(t)[2]},U6t(){return this.Vz()},W6t(){return this.zxt().Xp()},Q6t(){return this.zxt().um()},J6t(t){return this.KUt(t)[0]},Y6t(t){return this.KUt(t)[1]},V6t(){return this.XUt()}}}{const iu=self.Os;iu.U9.H6t=class extends iu.pbt{constructor(t){super(t)}er(){super.er()}}}{let i=function(t){switch(t){case 0:return"clamp-to-edge";case 1:return"repeat";case 2:return"mirror-repeat"}return"repeat"};i;const eu=self.Os;eu.U9.H6t._Gt=class extends eu.Kbt{constructor(t,s){super(t),this.u2="repeat",this.l2="repeat",s&&(this.u2=i(s[0]),this.l2=i(s[1]))}er(){super.er()}kbt(){this.jz().G4(this.Zc)}l9(t){return this.jz().dW(t,{$T:this.Zc.IO(),XT:this.u2,KT:this.l2})}g9(){this.jz().nI()}q6t(){return this.u2}Z6t(){return this.l2}}}{const hu=self.Os,ru=self.Qs,nu=hu.ir(hu.Rect),ou=hu.ir(hu.Qu),au=hu.ir(hu.Rect),uu=hu.ir(hu.Qu),A=(hu.U9.H6t.Instance=class extends hu.Axt{constructor(t,s){super(t),this.X6t=0,this.K6t=0,this.$6t=1,this.tWt=1,this.sWt=0,this.iWt=!1,this.eWt=0,this.hWt=0,this.rWt=0,this.nWt=0,this.oWt=0,this.aWt=null,s&&(this.r4().Gk(!!s[0]),this.X6t=s[4],this.K6t=s[5],this.$6t=s[6],this.tWt=s[7],this.sWt=hu.dr(s[8]),this.iWt=!!s[9],this.eWt=s[10],this.hWt=s[11],this.rWt=s[12],this.nWt=s[13],this.oWt=s[14])}er(){this.uWt(),super.er()}uWt(){this.aWt&&(this.aWt.er(),this.aWt=null)}lWt(t,s,i){const e=this.zxt(),h=e.Xp(),r=e.um(),n=this.X6t/h,o=this.K6t/r,a=this.sWt;au.set(0,0,t/(h*this.$6t),s/(r*this.tWt)),au.offset(-n,-o),0===a?i.cl(au):i.fl(au,-a)}cWt(t,s=!0){if(this.iWt){const i=this.zxt();t.EM(),t.U_(i.Xp()*this.$6t,i.um()*this.tWt,this.eWt,this.hWt,this.rWt,this.nWt,this.oWt)}else s&&t.vM()}UT(t){const s=this.zxt(),i=s.wb();if(null!==i){this.cWt(t),t.w_(i);const e=s.Xp(),h=s.um(),r=this.X6t/e,n=this.K6t/h,o=this.r4();au.set(0,0,o.Xp()/(e*this.$6t),o.um()/(h*this.tWt)),au.offset(-r,-n),o.J5()?this.xUt(o,t):this.vUt(o,t)}}vUt(t,s){let i=t.Bj();this.Zc.EO()&&(i=t.sDt(i)),0===this.sWt?s.ww(i,au):(uu.fl(au,-this.sWt),s.E_(i,uu))}xUt(i,t){const e=i.wDt();if(i.TDt()){i.K_t(nu,ou,!1);let t=ou,s=(this.Zc.EO()&&(t=i.sDt(t)),au);0!==this.sWt&&(uu.fl(au,-this.sWt),s=uu),e.BT(i.Y5(),t,s),i.SDt(!1)}e.UT(t)}zxt(){return this.aWt||this.Pct.jz()}$st(){return!0}wb(){return this.zxt().wb()}fWt(){this.r4().SDt(!0)}dWt(t){this.X6t!==t&&(this.X6t=t,this.Zc.f4(),this.fWt())}pWt(){return this.X6t}mWt(t){this.K6t!==t&&(this.K6t=t,this.Zc.f4(),this.fWt())}gWt(){return this.K6t}yWt(t){this.$6t!==t&&(this.$6t=t,this.Zc.f4(),this.fWt())}MWt(){return this.$6t}wWt(t){this.tWt!==t&&(this.tWt=t,this.Zc.f4(),this.fWt())}SWt(){return this.tWt}TWt(t){this.sWt!==t&&(this.sWt=t,this.Zc.f4(),this.fWt())}bWt(){return this.sWt}xWt(t){this.iWt!==(t=!!t)&&(this.iWt=t,this.Zc.f4())}vWt(){return this.iWt}CWt(t){this.eWt!==t&&(this.eWt=t,this.vWt())&&this.Zc.f4()}GWt(){return this.eWt}IWt(t){this.hWt!==t&&(this.hWt=t,this.vWt())&&this.Zc.f4()}NWt(){return this.hWt}EWt(t){this.rWt!==t&&(this.rWt=t,this.vWt())&&this.Zc.f4()}_Wt(){return this.rWt}DWt(t){this.nWt!==t&&(this.nWt=t,this.vWt())&&this.Zc.f4()}AWt(){return this.nWt}LWt(t){this.oWt!==t&&(this.oWt=t,this.vWt())&&this.Zc.f4()}OWt(){return this.oWt}dT(){const t={};return 0!==this.X6t&&(t.iox=this.X6t),0!==this.K6t&&(t.ioy=this.K6t),1!==this.$6t&&(t.isx=this.$6t),1!==this.tWt&&(t.isy=this.tWt),0!==this.sWt&&(t.ia=this.sWt),this.iWt&&(t.tr=!0),1!==this.eWt&&(t.trx=this.eWt),1!==this.hWt&&(t.try=this.hWt),1!==this.rWt&&(t.tra=this.rWt),.1!==this.nWt&&(t.trbmx=this.nWt),.1!==this.oWt&&(t.trbmy=this.oWt),t}pT(t){this.X6t=t.iox||0,this.K6t=t.ioy||0,this.$6t=t.hasOwnProperty("isx")?t.isx:1,this.tWt=t.hasOwnProperty("isy")?t.isy:1,this.sWt=t.ia||0,this.iWt=!!t.tr,this.eWt=t.hasOwnProperty("trx")?t.trx:1,this.hWt=t.hasOwnProperty("try")?t.try:1,this.rWt=t.hasOwnProperty("tra")?t.tra:1,this.nWt=t.hasOwnProperty("trbmx")?t.trbmx:.1,this.oWt=t.hasOwnProperty("trbmy")?t.trbmy:.1}Ixt(){const t="plugins.tiledbg.properties";return[{title:t+".image-transform.name",properties:[{name:t+".image-offset-x.name",value:this.pWt(),$Ut:t=>this.dWt(t)},{name:t+".image-offset-y.name",value:this.gWt(),$Ut:t=>this.mWt(t)},{name:t+".image-scale-x.name",value:100*this.MWt(),$Ut:t=>this.yWt(t/100)},{name:t+".image-scale-y.name",value:100*this.SWt(),$Ut:t=>this.wWt(t/100)},{name:t+".image-angle.name",value:hu.pr(this.bWt()),$Ut:t=>this.TWt(hu.dr(t))}]},{title:t+".tile-randomization.name",properties:[{name:t+".enable-tile-randomization.name",value:this.vWt(),$Ut:t=>this.xWt(t)},{name:t+".x-random.name",value:100*this.GWt(),$Ut:t=>this.CWt(t/100)},{name:t+".y-random.name",value:100*this.NWt(),$Ut:t=>this.IWt(t/100)},{name:t+".angle-random.name",value:100*this._Wt(),$Ut:t=>this.EWt(t/100)},{name:t+".blend-margin-x.name",value:100*this.AWt(),$Ut:t=>this.DWt(t/100)},{name:t+".blend-margin-y.name",value:100*this.OWt(),$Ut:t=>this.LWt(t/100)}]}]}crt(t){switch(t){case 4:return this.pWt();case 5:return this.gWt();case 6:return this.MWt();case 7:return this.SWt();case 8:return this.bWt();case 9:return this.vWt();case 10:return this.GWt();case 11:return this.NWt();case 12:return this._Wt();case 13:return this.AWt();case 14:return this.OWt()}}yrt(t,s){switch(t){case 4:this.dWt(s);break;case 5:this.mWt(s);break;case 6:this.yWt(s);break;case 7:this.wWt(s);break;case 8:this.TWt(s);break;case 9:this.xWt(!!s);break;case 10:this.CWt(s);break;case 11:this.IWt(s);break;case 12:this.EWt(s);break;case 13:this.DWt(s);break;case 14:this.LWt(s)}}Fbt(){return self.RWt}},new WeakMap);self.RWt=class extends self.H5{constructor(){super(),A.set(this,self.mF.SF().sz())}set PWt(t){ru.ge(t),A.get(this).dWt(t)}get PWt(){return A.get(this).pWt()}set kWt(t){ru.ge(t),A.get(this).mWt(t)}get kWt(){return A.get(this).gWt()}FWt(t,s){ru.ge(t),ru.ge(s);const i=A.get(this);i.dWt(t),i.mWt(s)}jWt(){const t=A.get(this);return[t.pWt(),t.gWt()]}set zWt(t){ru.ge(t),A.get(this).yWt(t)}get zWt(){return A.get(this).MWt()}set BWt(t){ru.ge(t),A.get(this).wWt(t)}get BWt(){return A.get(this).SWt()}UWt(t,s){ru.ge(t),ru.ge(s);const i=A.get(this);i.yWt(t),i.wWt(s)}WWt(){const t=A.get(this);return[t.MWt(),t.SWt()]}set QWt(t){ru.ge(t),A.get(this).TWt(t)}get QWt(){return A.get(this).bWt()}set JWt(t){ru.ge(t),A.get(this).TWt(hu.dr(t))}get JWt(){return hu.pr(A.get(this).bWt())}get imageWidth(){return A.get(this).zxt().Xp()}get imageHeight(){return A.get(this).zxt().um()}d6t(){const t=A.get(this).zxt();return[t.Xp(),t.um()]}set YWt(t){A.get(this).xWt(!!t)}get YWt(){return A.get(this).vWt()}set VWt(t){ru.ge(t),A.get(this).CWt(t)}get VWt(){return A.get(this).GWt()}set HWt(t){ru.ge(t),A.get(this).IWt(t)}get HWt(){return A.get(this).NWt()}qWt(t,s){ru.ge(t),ru.ge(s);const i=A.get(this);i.CWt(t),i.IWt(s)}ZWt(){const t=A.get(this);return[t.GWt(),t.NWt()]}set XWt(t){ru.ge(t),A.get(this).EWt(t)}get XWt(){return A.get(this)._Wt()}set KWt(t){ru.ge(t),A.get(this).DWt(t)}get KWt(){return A.get(this).AWt()}set $Wt(t){ru.ge(t),A.get(this).LWt(t)}get $Wt(){return A.get(this).OWt()}tQt(t,s){ru.ge(t),ru.ge(s);const i=A.get(this);i.DWt(t),i.LWt(s)}sQt(){const t=A.get(this);return[t.AWt(),t.OWt()]}async iQt(t){ru.Xe(t,Blob);const s=A.get(this),i=s.I4(),e=hu.ir(hu.Vvt);e.oCt(i,t),await e.dW(i.xS(),{$T:i.IO(),XT:s.bSt().q6t(),KT:s.bSt().Z6t()}),s.hr()?e.er():(s.uWt(),s.aWt=e,i.f4())}}}{const lu=self.Os;lu.U9.H6t.z9={b6t(){return!0},x6t(){return!0},eQt(){return this.vWt()}}}{const cu=self.Os;cu.U9.H6t.Aht={hQt(t){this.dWt(t)},rQt(t){this.mWt(t)},nQt(t){this.yWt(t/100)},oQt(t){this.wWt(t/100)},aQt(t){this.TWt(cu.dr(t))},uQt(t){this.xWt(t)},lQt(t,s){this.CWt(t/100),this.IWt(s/100)},cQt(t){this.EWt(t/100)},fQt(t,s){this.DWt(t/100),this.LWt(s/100)},A6t(t){this.r4().WS(t),this.Zc.f4()},async _6t(t,s){if(!this.aWt||this.aWt.RQ()!==t){const i=this.Zc,e=cu.ir(cu.Vvt);try{if(await e.nCt(i,t),!e.u8())throw new Error("image failed to load");if(this.hr())return e.er(),null;const h=await e.dW(i.xS(),{$T:i.IO(),XT:this.bSt().q6t(),KT:this.bSt().Z6t()});if(!h)return}catch(t){return console.error("Load image from URL failed: ",t),void(this.hr()||this.ij(cu.U9.H6t.z9.x6t))}this.hr()?e.er():(this.uWt(),this.aWt=e,i.f4(),await this.hj(cu.U9.H6t.z9.b6t))}}}}{const fu=self.Os;fu.U9.H6t.Lht={W6t(){return this.zxt().Xp()},Q6t(){return this.zxt().um()},dQt(){return this.X6t},pQt(){return this.K6t},mQt(){return 100*this.$6t},gQt(){return 100*this.tWt},yQt(){return fu.pr(this.sWt)},MQt(){return 100*this.GWt()},wQt(){return 100*this.NWt()},SQt(){return 100*this._Wt()},TQt(){return 100*this.AWt()},bQt(){return 100*this.OWt()}}}{const du=self.Os;du.U9.Keyboard=class extends du.pbt{constructor(t){super(t)}er(){super.er()}}}{let i=function(){return s.oP().sz()};i;const pu=self.Os;pu.U9.Keyboard._Gt=class extends pu.Kbt{constructor(t){super(t)}er(){super.er()}kbt(){}Fbt(){return self.xQt}};let s=null;self.xQt=class extends self.aP{constructor(t){super(t),(s=t).I4().Y3().keyboard=this}vQt(t){const s=i();if("string"==typeof t)return s.CQt(t);if("number"==typeof t)return s.GQt(t);throw new TypeError("expected string or number")}}}{const mu=self.Os;mu.U9.Keyboard.Instance=class extends mu.hxt{constructor(t,s){super(t),this.IQt=new Set,this.NQt=new Set,this.EQt=0,this._Qt="",this.DQt="";const i=this.I4().Af();this.l0=new mu.o0(mu.s0.n0(i,"keydown",t=>this.AQt(t.data)),mu.s0.n0(i,"keyup",t=>this.LQt(t.data)),mu.s0.n0(i,"window-blur",()=>this.OQt()),mu.s0.n0(i,"keyboard-blur",()=>this.OQt()))}er(){super.er()}AQt(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.IQt.has(i)||(this.IQt.add(i),this.NQt.add(s),this._Qt=i,this.EQt=s,this.DQt=e,this.ij(mu.U9.Keyboard.z9.RQt),this.ij(mu.U9.Keyboard.z9.PQt),this.ij(mu.U9.Keyboard.z9.kQt),this.ij(mu.U9.Keyboard.z9.FQt))}LQt(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.IQt.delete(i),this.NQt.delete(s),this._Qt=i,this.EQt=s,this.DQt=e,this.ij(mu.U9.Keyboard.z9.jQt),this.ij(mu.U9.Keyboard.z9.zQt),this.ij(mu.U9.Keyboard.z9.BQt),this.ij(mu.U9.Keyboard.z9.UQt)}OQt(){for(const t of this.NQt)this.NQt.delete(t),this.EQt=t,this.ij(mu.U9.Keyboard.z9.jQt),this.ij(mu.U9.Keyboard.z9.zQt),this.ij(mu.U9.Keyboard.z9.UQt);this.IQt.clear()}CQt(t){return this.IQt.has(t)}GQt(t){return this.NQt.has(t)}dT(){return{tk:this.EQt,tkk:this.DQt}}pT(t){this.EQt=t.tk,t.hasOwnProperty("tkk")&&(this.DQt=t.tkk)}Ixt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.EQt},{name:t+".debugger.last-key-string",value:mu.U9.Keyboard.Lht.WQt(this.EQt)},{name:t+".debugger.last-typed-key",value:this.DQt}]}]}}}{const gu=self.Os,yu=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];gu.U9.Keyboard.z9={CQt(t){return this.NQt.has(t)},PQt(t){return this.EQt===t},RQt(){return!0},jQt(){return!0},zQt(t){return this.EQt===t},GQt(t){return t=Math.floor(t),this.NQt.has(t)},FQt(t){return this.EQt===t},UQt(t){return this.EQt===t},kQt(t){const s=yu[t];return this._Qt===s},BQt(t){const s=yu[t];return this._Qt===s},QQt(t){const s=yu[t];return this.IQt.has(s)}}}{const Mu=self.Os;Mu.U9.Keyboard.Aht={}}{let s=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"←";case 38:return"↑";case 39:return"→";case 40:return"↓";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};s;const wu=self.Os;wu.U9.Keyboard.Lht={JQt(){return this.EQt},WQt(t){return s(t)},YQt(){return this.DQt}}}{const Su=self.Os;Su.U9.VQt=class extends Su.pbt{constructor(t){super(t)}er(){super.er()}}}{const Tu=self.Os;Tu.U9.VQt._Gt=class extends Tu.Kbt{constructor(t){super(t),this.HQt=Tu.ir(self.qQt)}er(){super.er()}kbt(){this.jz().G4(this.Zc)}l9(t){return this.jz().dW(t,{$T:this.Zc.IO()})}g9(){this.jz().nI()}ZQt(){return this.HQt}XQt(t,s,i,e){const h=this.jz(),r=this.HQt;r.nm(h.Xp()),r.Kp(h.um()),r.KQt(t),r.$Qt(s),r.t8t(i),r.s8t(e),r.i8t()}}}{const bu=self.Os,xu=self.Qs,vu=bu.ir(bu.Qa),Cu=["left","center","right"],Gu=["top","center","bottom"],Iu=["word","cjk","character"],L=(bu.U9.VQt.Instance=class extends bu.Axt{constructor(t,s){super(t),this.Xc="",this.e8t=!0,this.h8t=16,this.r8t=16,this.n8t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.,;:?!-_~#\"'&()[]|`\\/@°+=*$£€<>";let i="";if(this.o8t=1,this.a8t=0,this.TG=0,this.EG=0,this._G=0,this.LG="word",this.u8t=!0,this.l8t=!1,this.c8t=null,this.f8t=null,this.d8t=-1,this.p8t=-1,this.m8t=0,s){this.Xc=s[0],this.e8t=s[1],this.h8t=s[2],this.r8t=s[3],this.n8t=s[4],i=s[5],this.o8t=s[6],this.a8t=s[7],this.TG=s[8],this.EG=s[9],this._G=s[10],this.LG=Iu[s[11]];const h=this.r4();h.Gk(s[12]),this.l8t=!!s[14]}this.nxt.XQt(this.h8t,this.r8t,this.n8t,i),this.f8t=bu.ir(self.g8t,this.nxt.ZQt());const e=this.r4();this.f8t.jI(e.Xp(),e.um()),this.y8t(),this.M8t(),this.Si.uNt()}er(){this.w8t(),this.c8t&&(this.c8t.er(),this.c8t=null),this.f8t.er(),this.f8t=null,super.er()}y8t(){const t=this.f8t;t&&(t.fI(this.e8t),t.tf(this.Xc),t.LI(this.LG),t.S8t(Cu[this.EG]),t.T8t(Gu[this._G]),t.b8t(this.a8t),t.MI(this.TG))}x8t(){const t=this.r4();this.f8t.jI(t.Xp(),t.um()),this.f8t.jP(this.o8t)}M8t(){if(this.l8t){let t=this.Xc;this.e8t&&(t=bu.Ih.Wp(t)),this.c8t?this.c8t.tf(t):this.c8t=bu.ir(bu.qc,this.Zc,t)}else this.c8t&&(this.c8t.er(),this.c8t=null)}UT(e){const h=this.Pct.jz(),r=h.wb();if(r){e.w_(r);let t=this.r4(),s=t.Bj(),i=this.f8t;i.jP(this.o8t),i.v8t(t.y_t()),this.Zc.EO()&&(s=t.sDt(s)),i.jI(t.Xp(),t.um()),i.ZQt().C8t(h.gN()),i.QS(t.Jj()),i.UT(e,s.qr(),s.Zr(),t.UP()),this.u8t=!1}}dT(){const t={t:this.Xc,ebbc:this.e8t,csc:this.o8t,csp:this.a8t,lh:this.TG,ha:this.EG,va:this._G,w:this.LG,cw:this.nxt.ZQt().G8t(),ch:this.nxt.ZQt().I8t(),cs:this.nxt.ZQt().N8t(),sd:this.nxt.ZQt().E8t()};return-1!==this.p8t&&(t.tw={st:this.d8t,en:this.p8t,l:this.m8t}),t}pT(t){if(this.w8t(),this.Xc=t.t,this.e8t=t.ebbc,this.o8t=t.csc,this.a8t=t.csp,this.TG=t.lh,this.EG=t.ha,this._G=t.va,t.hasOwnProperty("w")){const i=t.w;this.LG="boolean"==typeof i?i?"word":"character":i}else this.LG="word";if(t.hasOwnProperty("tw")){const e=t.tw;this.d8t=e.st,this.p8t=e.en,this.m8t=t.l}const s=this.nxt.ZQt();s.KQt(t.cw),s.$Qt(t.ch),s.t8t(t.cs),s.s8t(t.sd),this.y8t(),this.M8t(),-1!==this.p8t&&this.xxt()}crt(t){switch(t){case 0:return this.FI();case 1:return this.e8t;case 2:return this.nxt.ZQt().G8t();case 3:return this.nxt.ZQt().I8t();case 4:return this.nxt.ZQt().N8t();case 5:return this.nxt.ZQt().E8t();case 6:return this._8t();case 7:return this.D8t();case 8:return this.A8t();case 9:return this.L8t();case 10:return this.O8t();case 11:return this.R8t()}}yrt(t,s){switch(t){case 0:this.P8t(s);break;case 1:this.e8t!==!!s&&(this.e8t=!!s,this.y8t());break;case 2:this.nxt.ZQt().KQt(s);break;case 3:this.nxt.ZQt().$Qt(s);break;case 4:this.nxt.ZQt().t8t(s);break;case 5:this.nxt.ZQt().s8t(s);break;case 6:this.k8t(s);break;case 7:this.F8t(s);break;case 8:this.j8t(s);break;case 9:this.z8t(s);break;case 10:this.B8t(s);break;case 11:this.U8t(s)}}P8t(t){this.Xc!==t&&(this.Xc=t,this.f8t.tf(t),this.M8t(),this.Zc.f4())}FI(){return this.Xc}W8t(t,s){this.P8t(t),this.d8t=this.Zc.d3(),this.p8t=this.d8t+s/this.EB().OF(),this.m8t=bu.op(bu.Ih.Wp(t)),this.f8t.vI(0),this.xxt()}w8t(){this.d8t=-1,this.p8t=-1,this.m8t=0,this.f8t.vI(-1),this.oxt()}Q8t(){-1!==this.p8t&&(this.w8t(),this.ij(bu.U9.VQt.z9.J8t),this.Zc.f4())}k8t(t){this.o8t!==t&&(this.o8t=t,this.f8t.jP(this.o8t),this.Zc.f4())}_8t(){return this.o8t}F8t(t){this.a8t!==t&&(this.a8t=t,this.f8t.b8t(this.a8t),this.Zc.f4())}D8t(){return this.a8t}j8t(t){this.TG!==t&&(this.TG=t,this.f8t.MI(this.TG),this.Zc.f4())}A8t(){return this.TG}z8t(t){this.EG!==t&&(this.EG=t,this.y8t(),this.Zc.f4())}L8t(){return this.EG}B8t(t){this._G!==t&&(this._G=t,this.y8t(),this.Zc.f4())}O8t(){return this._G}Y8t(t){this.U8t(Iu[t])}U8t(t){this.LG!==t&&(this.LG=t,this.y8t(),this.Zc.f4())}R8t(){return this.LG}V8t(t){this.l8t=!!t,this.M8t()}H8t(){return this.l8t}q8t(){return this.x8t(),this.f8t.BI()}Z8t(){return this.x8t(),this.f8t.WI()}X8t(t,s){this.x8t();const i=this.r4(),e=(vu.set(t-i.tT(),s-i.eT()),vu.rotate(-i.UP()),vu.offset(i.Xp()*i.Uz(),i.um()*i.Qz()),this.f8t.YI(vu.qa(),vu.Xa()));if(e){const h=e.$m("tag");if(h)return h.kp}return""}K8t(t,s,i){const e=this.X8t(s,i);return e&&bu.dh(t,e)}$8t(t,s){this.x8t(),s=Math.floor(s);const i=this.f8t.HI(t,s);if(!i)return null;const e=this.r4();return vu.set(i.Hm(),i.Zm()),vu.offset(-e.Xp()*e.Uz(),-e.um()*e.Qz()),vu.rotate(e.UP()),vu.offset(e.tT(),e.eT()),{x:vu.qa(),y:vu.Xa(),width:i.Xp(),height:i.um()}}tJt(t){return this.x8t(),this.f8t.qI(t)}mX(){const s=this.Zc.d3();if(s>=this.p8t)this.w8t(),this.ij(bu.U9.VQt.z9.J8t),this.Zc.f4();else{let t=bu.Ir(this.d8t,this.p8t,s,0,this.m8t);(t=Math.floor(t))!==this.f8t.CI()&&(this.f8t.vI(t),this.Zc.f4())}}Ixt(){const t="plugins.spritefont2";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.FI(),$Ut:t=>this.P8t(t)},{name:t+".properties.scale.name",value:this._8t(),$Ut:t=>this.k8t(t)},{name:t+".properties.character-spacing.name",value:this.D8t(),$Ut:t=>this.F8t(t)},{name:t+".properties.line-height.name",value:this.A8t(),$Ut:t=>this.j8t(t)}]}]}Fbt(){return self.sJt}},new WeakMap),Nu=new Map([["left",0],["center",1],["right",2]]),Eu=new Map([["top",0],["center",1],["bottom",2]]);self.sJt=class extends self.H5{constructor(){super(),L.set(this,self.mF.SF().sz())}get text(){return L.get(this).FI()}set text(t){xu.Se(t);const s=L.get(this);s.w8t(),s.P8t(t)}iJt(t,s){xu.Se(t),xu.ge(s);const i=L.get(this);i.w8t(),i.W8t(t,s)}eJt(){L.get(this).Q8t()}set hJt(t){xu.ge(t),L.get(this).k8t(t)}get hJt(){return L.get(this)._8t()}set rJt(t){xu.ge(t),L.get(this).F8t(t)}get rJt(){return L.get(this).D8t()}set lineHeight(t){xu.ge(t),L.get(this).j8t(t)}get lineHeight(){return L.get(this).A8t()}set LW(t){xu.Se(t);const s=Nu.get(t);if(void 0===s)throw new Error("invalid mode");L.get(this).z8t(s)}get LW(){return Cu[L.get(this).L8t()]}set verticalAlign(t){xu.Se(t);const s=Eu.get(t);if(void 0===s)throw new Error("invalid mode");L.get(this).B8t(s)}get verticalAlign(){return Gu[L.get(this).O8t()]}set OW(t){if(!Iu.includes(t))throw new Error("invalid mode");L.get(this).U8t(t)}get OW(){return L.get(this).R8t()}set nJt(t){L.get(this).V8t(!!t)}get nJt(){return L.get(this).H8t()}get FW(){return L.get(this).q8t()}get jW(){return L.get(this).Z8t()}oJt(){const t=L.get(this);return[t.q8t(),t.Z8t()]}aJt(t,s,i){return xu.Se(t),xu.ge(s),xu.ge(i),L.get(this).K8t(t,s,i)}uJt(t,s){return xu.ge(t),xu.ge(s),L.get(this).X8t(t,s)}lJt(t,s=0){return xu.Se(t),xu.ge(s),L.get(this).$8t(t,s)}cJt(t){return xu.Se(t),L.get(this).tJt(t)}}}{const _u=self.Os;_u.U9.VQt.z9={fJt(t,s){return s?this.Xc===t:_u.dh(this.Xc,t)},dJt(){return-1!==this.p8t},J8t(){return!0},pJt(t,s,i){return this.K8t(t,s,i)}}}{const Du=self.Os;Du.U9.VQt.Aht={tf(t){this.w8t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.P8t(t.toString())},mJt(t){this.w8t(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.P8t(this.Xc+t)},gJt(t,s){this.w8t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.W8t(t.toString(),s)},yJt(){this.Q8t()},jP(t){this.k8t(t)},MJt(t){this.F8t(t)},MI(t){this.j8t(t)},KQt(t,s){let i=!1,e=this.nxt.ZQt();for(const h of t)if(" "===h)e.wJt(s),i=!0;else{const r=e.SJt(h);r&&(r.TJt(s),i=!0)}i&&e.bJt(),this.Zc.f4()},A6t(t){this.r4().WS(t),this.Zc.f4()},xJt(t){this.z8t(t)},vJt(t){this.B8t(t)},CJt(t){this.Y8t(t)},GJt(t){this.V8t(t)}}}{const Au=self.Os;Au.U9.VQt.Lht={IJt(t){const s=this.nxt.ZQt().SJt(t);return s?s.NJt():this.nxt.ZQt().G8t()},EJt(){return this.r8t},_Jt(){return this.o8t},DJt(){return this.a8t},AJt(){return this.TG},Text(){return this.Xc},LJt(){return this.e8t?Au.Ih.Wp(this.Xc):this.Xc},OJt(){return this.q8t()},RJt(){return this.Z8t()},PJt(t,s){return this.X8t(t,s)},kJt(t){return this.tJt(t)},FJt(t,s){const i=this.$8t(t,s);return i?i.x:0},jJt(t,s){const i=this.$8t(t,s);return i?i.y:0},zJt(t,s){const i=this.$8t(t,s);return i?i.width:0},BJt(t,s){const i=this.$8t(t,s);return i?i.height:0}}}{const Lu=self.Os;self.UJt=class{constructor(t,s,i,e){let h=t.G8t(),r=t.I8t();this.HQt=t,this.WJt=s,this.QJt=new Lu.Rect(i,e,i+h,e+r),this.JJt=new Lu.Rect,this.YJt=-1,this.VJt()}er(){this.HQt=null,this.QJt=null,this.JJt=null}VJt(){let t=this.HQt.Xp(),s=this.HQt.um();this.JJt.C(this.QJt),this.JJt.Ct(t,s),this.JJt.Wu(this.HQt.gN())}ZQt(){return this.HQt}HJt(){return this.WJt}gN(){return this.JJt}TJt(t){this.YJt=t}NJt(){return this.YJt<0?this.HQt.G8t():this.YJt}}}{let r=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0},N=function(t){return(h=h||E.xo(32,32).getContext("2d")).fillStyle="#FFFFFF",h.fillStyle=t,h.fillStyle},E=(r,N,self.Os),_=new E.Rect,D=new E.Qu,A=new E.Ro,s=new Set(["left","center","right"]),i=new Set(["top","center","bottom"]),e=new Set(["word","cjk","character"]),h=null;self.g8t=class{constructor(t){this.HQt=t,this.BG=0,this.UG=0,this.Xc="",this.CG=!1,this.DG=null,this.AG=E.ir(E.Qp),this.LG="word",this.PG=!1,this.kG=!1,this.EG="left",this._G="top",this.MJ=1,this.qJt=1,this.ZJt=0,this.TG=0,this.zS=E.ir(E.Ro),this.jG=-1,this.zG=0,this.sI=t=>this.iI(t),this.HQt.XJt(this)}er(){this.HQt.KJt(this),this.zS=null,this.sI=null,this.AG.Jl(),this.AG=null,this.HQt=null,this.DG=null}iI(t){if(t.om())return{width:0,height:0};const s=t.Gm(),i=t.$m("scale"),e=(i?parseFloat(i.kp):this.MJ)*this.qJt,h=t.$m("scalex"),r=(h?parseFloat(h.kp):1)*e,n=t.$m("scaley"),o=(n?parseFloat(n.kp):1)*e,a=this.HQt.I8t()*o+this.TG,u=this.ZQt(),l=u.G8t()*r,c=this.$Jt();if(u.tYt()){let i=0,e=0;for(const f of s){let t=l,s=u.SJt(f);s?t=s.NJt()*r:" "===f&&(t=u.sYt()*r),e+=t,++i}return{width:e+i*c,height:a}}{const d=s.length,p=Math.max(d,0);return{width:l*d+p*c,height:a}}}cI(){this.kG=!0}yG(){this.cI(),this.PG=!0,this.AG.Jl()}jI(t,s){t<=0||s<=0||this.BG===t&&this.UG===s||(this.BG!==t?this.yG():this.cI(),this.BG=t,this.UG=s)}vI(t){this.jG=Math.floor(t)}CI(){return this.jG}YI(t,s){this.UI();const i=this.AG.Vp();for(const e of i)if(s>e.Zm()&&s<e.Zm()+e.um())for(const h of e.ym())if(t>=h.Hm()&&t<h.Hm()+h.Xp())return h;return null}*VI(t){this.UI();const s=this.AG.Vp();for(const i of s)for(const e of i.ym()){const h=e.$m("tag");h&&E.dh(h.kp,t)&&(yield e)}}HI(t,s){for(const i of this.VI(t)){if(0===s)return i;--s}return null}qI(t){let s=0;for(const i of this.VI(t))++s;return s}UI(){this.iN(),this.eN()}iN(){if(this.PG){!this.CG||this.DG&&this.DG.toString()===this.Xc||(this.DG=new E.Ih(this.Xc,{vp:!0}));const t=-this.$Jt();this.AG.Qp(this.CG?this.DG.Rp():this.Xc,this.sI,this.BG,this.LG,t),this.PG=!1}}eN(){this.kG&&(this.hN(),this.kG=!1)}hN(){let i=0,e=this.TG,h=E.Wn(this.AG.Vp());for(const s of h){s.Vm(NaN),s.qm(NaN);for(const r of s.ym())r.Vm(NaN),r.qm(NaN)}const t=h.reduce((t,s)=>t+s.um(),0)-e;"center"===this._G?i=Math.max(Math.floor(this.UG/2-t/2),0):"bottom"===this._G&&(i=Math.floor(this.UG-t));for(let t=0,s=h.length;t<s;++t){const n=h[t],o=n.um();if(0<t&&i>this.UG-(o-e))break;0<=i&&this.uN(n,i),i+=o}}uN(t,s){let i=0;"center"===this.EG?i=Math.max(Math.floor((this.BG-t.Xp())/2),0):"right"===this.EG&&(i=Math.max(Math.floor(this.BG-t.Xp()),0)),t.Vm(i),t.qm(s);for(const e of t.ym())e.om()||(this.iYt(e,i,s),i+=e.Xp())}iYt(t,s,i){const e=t.$m("offsetx"),h=(s+=e?r(e.kp,t.um()):0,t.$m("offsety"));i+=h?r(h.kp,t.um()):0,t.Vm(s),t.qm(i)}UT(t,s,i,e){this.UI(),this.zG=0;const h=E.Wn(this.AG.Vp()),r=Math.sin(e),n=Math.cos(e);for(const o of h)this.eYt(t,o,s,i,r,n)}eYt(t,s,i,e,h,r){const n=s.Hm(),o=s.Zm();if(Number.isFinite(n)&&Number.isFinite(o)){const a=s.um();for(const u of s.ym())this.fN(t,u,i,e,h,r,a)}}fN(o,a,u,l,c,f,d){let p=a.Hm(),m=a.Zm();if(Number.isFinite(p)&&Number.isFinite(m)){let r=a.Gm(),n=a.Xp();if(-1!==this.jG){if(this.zG>=this.jG)return;this.zG+r.length>this.jG&&(r=r.slice(0,this.jG-this.zG),n=this.iI(a).width),this.zG+=r.length}const g=a.$m("background");if(!(E.Rd(r)&&!g||a.tg("hide"))){const y=a.$m("scale"),M=(y?parseFloat(y.kp):this.MJ)*this.qJt,w=a.$m("scalex"),S=(w?parseFloat(w.kp):1)*M,T=a.$m("scaley"),b=(T?parseFloat(T.kp):1)*M,x=this.HQt.I8t()*b,v=this.TG;m+=d-v-x;let t=1,s=a.$m("opacity"),i=(s&&(t=parseFloat(s.kp)/100),g&&(o._M(),A.Ca(N(g.kp)),A.Vo(A.Ko()*t*this.zS.Ko()),A.ca(),o.QS(A),_.set(p,m,p+n,m+x),_.gu()>this.BG&&_.lu(this.BG),D.dl(_,c,f),D.offset(u,l),o.Qu(D),o.vM()),a.$m("color")),e=(i?(A.Ca(N(i.kp)),A.Vo(this.zS.Ko())):A.C(this.zS),A.Vo(A.Ko()*t),A.ca(),o.QS(A),this.HQt.G8t()*S),h=Math.abs(this.$Jt());for(const C of r){const G=this.HQt.SJt(C);if(G){const I=G.NJt()*S;if(p+I>this.BG+h+1e-5)return;_.set(p,m,p+e,m+x),D.dl(_,c,f),D.offset(u,l),o.ww(D,G.gN()),p+=I+this.ZJt}else p+=this.HQt.sYt()*S+this.ZJt}}}}ZQt(){return this.HQt}fI(t){this.CG!==(t=!!t)&&(this.CG=t,this.yG())}mG(){return this.CG}tf(t){this.Xc!==t&&(this.Xc=t,this.yG())}LI(t){if(!e.has(t))throw new Error("invalid word wrap mode");this.LG!==t&&(this.LG=t,this.yG())}S8t(t){if(!s.has(t))throw new Error("invalid alignment");this.EG!==t&&(this.EG=t,this.cI())}T8t(t){if(!i.has(t))throw new Error("invalid alignment");this._G!==t&&(this._G=t,this.cI())}jP(t){this.MJ!==t&&(this.MJ=t,this.yG())}zP(){return this.MJ}v8t(t){this.qJt!==t&&(this.qJt=t,this.yG())}y_t(){return this.qJt}b8t(t){this.ZJt!==t&&(this.ZJt=t,this.yG())}$Jt(){return this.ZJt}MI(t){this.TG=t,this.yG()}wI(){return this.TG}g_(t){t=E.lr(t,0,1),this.zS.a=t}QS(t){this.zS.equals(t)||this.zS.C(t)}M_(){return this.zS}BI(){return this.UI(),this.AG.Pm()}WI(){this.UI();const t=this.HQt.I8t()*this.MJ,s=this.TG,i=t+s;return this.AG.Hp()*i-s}}}{const Ou=self.Os,Ru={width:256,height:256,hYt:16,rYt:16,characterSet:""};self.qQt=class{constructor(t){if((t=Object.assign({},Ru,t)).width<=0||t.height<=0||t.hYt<=0||t.rYt<=0)throw new Error("invalid size");this.Fm=t.width,this.jm=t.height,this.h8t=t.hYt,this.r8t=t.rYt,this.n8t=t.characterSet,this.nYt="",this.oYt=null,this.aYt=!1,this.uYt=-1,this.JJt=new Ou.Rect(0,0,1,1),this.lYt=new Map,this.cYt=!0,this.fYt=new Set}er(){this.JJt=null,this.dYt(),this.lYt=null,this.fYt&&this.fYt.clear(),this.fYt=null}dYt(){for(let t of this.lYt.values())t.er();this.lYt.clear()}XJt(t){this.fYt.add(t)}KJt(t){this.fYt.delete(t)}i8t(){if(this.cYt){this.dYt();let s=Ou.rp(this.n8t),h=Math.floor(this.Fm/this.h8t),t=Math.floor(this.jm/this.r8t),i=h*t;for(let e=0,t=s.length;e<t&&!(e>=i);++e){let i=s[e];if(!this.lYt.has(i)){let t=e%h,s=Math.floor(e/h);this.lYt.set(i,Ou.ir(self.UJt,this,i,t*this.h8t,s*this.r8t))}}if(this.aYt=!1,this.uYt=-1,Array.isArray(this.oYt))for(let s of this.oYt)if(Array.isArray(s)&&2===s.length){let i=s[0],t=s[1];if("number"==typeof i&&isFinite(i)&&"string"==typeof t&&i!==this.h8t)for(let s of t){let t=this.lYt.get(s);t?(t.TJt(i),this.aYt=!0):" "===s&&(this.uYt=i,this.aYt=!0)}}this.cYt=!1;for(let t of this.fYt)t.yG()}}bJt(){this.aYt=!0;for(const t of this.fYt)t.yG()}SJt(t){return this.i8t(),this.lYt.get(t)||null}tYt(){return this.aYt}nm(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.Fm!==t&&(this.Fm=t,this.cYt=!0)}Xp(){return this.Fm}Kp(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.jm!==t&&(this.jm=t,this.cYt=!0)}um(){return this.jm}C8t(t){if(!this.JJt.equals(t)){this.JJt.C(t);for(const s of this.lYt.values())s.VJt()}}gN(){return this.JJt}KQt(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.h8t!==t&&(this.h8t=t,this.cYt=!0)}G8t(){return this.h8t}$Qt(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.r8t!==t&&(this.r8t=t,this.cYt=!0)}I8t(){return this.r8t}t8t(t){this.n8t!==t&&(this.n8t=t,this.cYt=!0)}N8t(){return this.n8t}s8t(t){if(this.nYt!==t&&(this.nYt=t,this.cYt=!0,this.oYt=null,this.nYt.length))try{this.oYt=JSON.parse(this.nYt)}catch(t){this.oYt=null}}E8t(){return this.nYt}wJt(t){this.uYt!==(t=t<0?-1:t)&&(this.uYt=t,0<=this.uYt)&&(this.aYt=!0)}sYt(){return this.uYt<0?this.h8t:this.uYt}}}{let t=function(t,s){return"number"==typeof t&&"number"==typeof s},i=function(i,e){if("string"!=typeof i&&"string"!=typeof e)return i&&e?1:0;{let t,s;return t="number"==typeof i?(Math.round(1e10*i)/1e10).toString():i,s="number"==typeof e?(Math.round(1e10*e)/1e10).toString():e,t+s}};t,i,0;self.MMt=[()=>75,()=>-75,()=>0,t=>{const s=t.NMt(0),i=t.NMt(1).Hyt();return()=>s.hMt()+200*i()},()=>1,t=>{const s=t.NMt(0);return()=>s.tMt()},()=>2,()=>-100,()=>3,t=>{const s=t.NMt(0);return()=>s.tMt()-16},()=>"",()=>-180,()=>-70,()=>70,t=>{const s=t.NMt(0).Hyt(),i=t.NMt(1).yMt();return()=>10/(1+(s()-i.iet())/100)},t=>{const s=t.NMt(0).Hyt();return()=>Math.ceil(s(5))},t=>{const s=t.NMt(0).Hyt(),i=t.NMt(1).Hyt();return()=>s()+20*i()},()=>184,()=>-20,t=>{const s=t.NMt(0),i=t.NMt(1),e=t.NMt(2).Hyt();return()=>s.tMt()+i.hMt()*e()},()=>50,()=>100,t=>{const s=t.NMt(0).yMt();return()=>i("Score: ",s.iet())},t=>{const s=t.NMt(0).yMt();return()=>i("Score: ",s.iet())+"    The goblins reached the castle\nPress Enter to play again"},t=>{const s=t.NMt(0).Hyt();return()=>s()},t=>{const s=t.NMt(0).Hyt();return()=>Math.floor(s(2))},t=>{const s=t.NMt(0).Hyt();return()=>s(1)},()=>.5]}var t=self.Os;self.UPt=function(){return[t.U9.mht,t.U9.H6t,t.U9.Keyboard,t.U9.VQt,t.U9.Keyboard.z9.CQt,t.U9.mht.Aht.l2t,t.U9.mht.Aht.N6t,t.U9.mht.z9.XTt,t.U9.B9.Lht.r3,t.U9.mht.z9.NTt,t.U9.mht.Aht.hT,t.U9.H6t.Lht.N2t,t.U9.Keyboard.z9.PQt,t.U9.B9.z9.Gjt,t.U9.mht.Lht.T2t,t.U9.B9.z9.Ejt,t.U9.B9.Aht.o5t,t.U9.mht.Lht.I2t,t.U9.mht.Lht.N2t,t.U9.mht.z9.S6t,t.U9.mht.z9.ITt,t.U9.mht.Aht.o2t,t.U9.B9.z9.Sjt,t.U9.B9.Lht.time,t.U9.B9.z9.Qjt,t.U9.B9.Lht.random,t.U9.B9.Lht.$zt,t.U9.B9.Lht.NBt,t.U9.B9.z9.Mjt,t.U9.mht.Aht.OSt,t.U9.B9.Aht.$5t,t.U9.mht.z9.LSt,t.U9.mht.Aht.f2t,t.U9.mht.Aht.g_,t.U9.B9.Aht.Cn,t.U9.B9.Aht.s5t,t.U9.VQt.Aht.tf,t.U9.B9.Aht.E5t,t.U9.B9.Aht.e5t,t.U9.B9.Aht.n5t,t.U9.B9.z9.j9,t.U9.B9.Aht.t5t,t.U9.B9.z9.s1,t.U9.mht.Aht.s6t,t.U9.mht.Aht.e6t]},self.rkt=[{pYt:0},{mYt:0},{gYt:0},{yYt:0},{MYt:0},{wYt:0},{SYt:0},{Keyboard:0},{TYt:0},{bYt:0},{xYt:0},{vYt:0},{CYt:0},{GYt:0},{IYt:0},{NYt:0}],self.EYt={pYt:class extends self.r6t{},mYt:class extends self.r6t{},gYt:class extends self.RWt{},wYt:class extends self.r6t{},SYt:class extends self.r6t{},Keyboard:class extends self.mF{},TYt:class extends self.r6t{},xYt:class extends self.r6t{},vYt:class extends self.r6t{},CYt:class extends self.sJt{}};