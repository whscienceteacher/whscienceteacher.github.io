// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let L=function(t){Mh=t},k=function(t){return t*Lh},N=function(t,s){return Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},B=function(){var t=new Mh(4);return Mh!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},W=function(t){var s=new Mh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},j=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},V=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},H=function(t,s,i,e){var h=new Mh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},U=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},z=function(t,s){var i;return t===s?(i=s[1],t[1]=s[2],t[2]=i):(t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3]),t},J=function(t,s){var i=s[0],e=s[1],h=s[2],n=i*(s=s[3])-h*e;return n?(t[0]=s*(n=1/n),t[1]=-e*n,t[2]=-h*n,t[3]=i*n,t):null},q=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},$=function(t){return t[0]*t[3]-t[2]*t[1]},t=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*r+n*o,t[1]=h*r+s*o,t[2]=e*a+n*i,t[3]=h*a+s*i,t},X=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=Math.sin(i),i=Math.cos(i);return t[0]=e*i+n*r,t[1]=h*i+s*r,t[2]=e*-r+n*i,t[3]=h*-r+s*i,t},Y=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=i[0],i=i[1];return t[0]=e*r,t[1]=h*r,t[2]=n*i,t[3]=s*i,t},Z=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t},K=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},Q=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},tt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},st=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},it=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},s=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},et=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},ht=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],n=s[0],r=s[1],o=s[2],s=s[3];return Math.abs(i-n)<=vh*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(e-r)<=vh*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(h-o)<=vh*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},nt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},rt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ot=function(){var t=new Mh(6);return Mh!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},at=function(t){var s=new Mh(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},ut=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ct=function(t,s,i,e,h,n){var r=new Mh(6);return r[0]=t,r[1]=s,r[2]=i,r[3]=e,r[4]=h,r[5]=n,r},ft=function(t,s,i,e,h,n,r){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t},dt=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],s=s[5],o=i*n-e*h;return o?(t[0]=n*(o=1/o),t[1]=-e*o,t[2]=-h*o,t[3]=i*o,t[4]=(h*s-n*r)*o,t[5]=(e*r-i*s)*o,t):null},pt=function(t){return t[0]*t[3]-t[1]*t[2]},i=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],s=s[5],a=i[0],l=i[1],u=i[2],c=i[3],f=i[4],i=i[5];return t[0]=e*a+n*l,t[1]=h*a+r*l,t[2]=e*u+n*c,t[3]=h*u+r*c,t[4]=e*f+n*i+o,t[5]=h*f+r*i+s,t},mt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],s=s[5],a=Math.sin(i),i=Math.cos(i);return t[0]=e*i+n*a,t[1]=h*i+r*a,t[2]=e*-a+n*i,t[3]=h*-a+r*i,t[4]=o,t[5]=s,t},gt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e*a,t[1]=h*a,t[2]=n*i,t[3]=r*i,t[4]=o,t[5]=s,t},yt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=e*a+n*i+o,t[5]=h*a+r*i+s,t},wt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t},St=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},vt=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},Mt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},xt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},e=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},Gt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},Tt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},_t=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},It=function(t,s){var i=t[0],e=t[1],h=t[2],n=t[3],r=t[4],t=t[5],o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],s=s[5];return Math.abs(i-o)<=vh*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(e-a)<=vh*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(h-l)<=vh*Math.max(1,Math.abs(h),Math.abs(l))&&Math.abs(n-u)<=vh*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=vh*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},h=function(){var t=new Mh(9);return Mh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Ct=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Et=function(t){var s=new Mh(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},Rt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Pt=function(t,s,i,e,h,n,r,o,a){var l=new Mh(9);return l[0]=t,l[1]=s,l[2]=i,l[3]=e,l[4]=h,l[5]=n,l[6]=r,l[7]=o,l[8]=a,l},At=function(t,s,i,e,h,n,r,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t[6]=o,t[7]=a,t[8]=l,t},Ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Dt=function(t,s){var i,e,h;return t===s?(i=s[1],e=s[2],h=s[5],t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=h):(t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8]),t},Ot=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],u=(s=s[8])*r-o*l,c=-s*n+o*a,f=l*n-r*a,d=i*u+e*c+h*f;return d?(t[0]=u*(d=1/d),t[1]=(-s*e+h*l)*d,t[2]=(o*e-h*r)*d,t[3]=c*d,t[4]=(s*i-h*a)*d,t[5]=(-o*i+h*n)*d,t[6]=f*d,t[7]=(-l*i+e*a)*d,t[8]=(r*i-e*n)*d,t):null},Lt=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],s=s[8];return t[0]=r*s-o*l,t[1]=h*l-e*s,t[2]=e*o-h*r,t[3]=o*a-n*s,t[4]=i*s-h*a,t[5]=h*n-i*o,t[6]=n*l-r*a,t[7]=e*a-i*l,t[8]=i*r-e*n,t},kt=function(t){var s=t[0],i=t[3],e=t[4],h=t[5],n=t[6],r=t[7],o=t[8];return s*(o*e-h*r)+t[1]*(-o*i+h*n)+t[2]*(r*i-e*n)},n=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],w=i[7],i=i[8];return t[0]=c*e+f*r+d*l,t[1]=c*h+f*o+d*u,t[2]=c*n+f*a+d*s,t[3]=p*e+m*r+g*l,t[4]=p*h+m*o+g*u,t[5]=p*n+m*a+g*s,t[6]=y*e+w*r+i*l,t[7]=y*h+w*o+i*u,t[8]=y*n+w*a+i*s,t},Nt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=o,t[5]=a,t[6]=c*e+i*r+l,t[7]=c*h+i*o+u,t[8]=c*n+i*a+s,t},Bt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=Math.sin(i),i=Math.cos(i);return t[0]=i*e+c*r,t[1]=i*h+c*o,t[2]=i*n+c*a,t[3]=i*r-c*e,t[4]=i*o-c*h,t[5]=i*a-c*n,t[6]=l,t[7]=u,t[8]=s,t},Wt=function(t,s,i){var e=i[0],i=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=i*s[3],t[4]=i*s[4],t[5]=i*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},jt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Vt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ht=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ut=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},zt=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(l=i+i),n=(r=s[1])*l,r=r*(u=r+r),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*h;return t[0]=1-r-(e=e*h),t[3]=n-s,t[6]=o+u,t[1]=n+s,t[4]=1-i-e,t[7]=a-l,t[2]=o-u,t[5]=a+l,t[8]=1-i-r,t},Jt=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*r,w=i*a-h*r,S=i*l-n*r,b=e*a-h*o,v=e*l-n*o,M=h*l-n*a,x=u*m-c*p,G=u*g-f*p,T=c*g-f*m;return(d=y*(f=f*(s=s[15])-d*g)-w*(c=c*s-d*m)+S*T+b*(u=u*s-d*p)-v*G+M*x)?(t[0]=(o*f-a*c+l*T)*(d=1/d),t[1]=(a*u-r*f-l*G)*d,t[2]=(r*c-o*u+l*x)*d,t[3]=(h*c-e*f-n*T)*d,t[4]=(i*f-h*u+n*G)*d,t[5]=(e*u-i*c-n*x)*d,t[6]=(m*M-g*v+s*b)*d,t[7]=(g*S-p*M-s*w)*d,t[8]=(p*v-m*S+s*y)*d,t):null},qt=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},$t=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Xt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Yt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},r=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Zt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Kt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Qt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},ts=function(t,s){var i=t[0],e=t[1],h=t[2],n=t[3],r=t[4],o=t[5],a=t[6],l=t[7],t=t[8],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7],s=s[8];return Math.abs(i-u)<=vh*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-c)<=vh*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(h-f)<=vh*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(n-d)<=vh*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-p)<=vh*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(o-m)<=vh*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=vh*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=vh*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},ss=function(){var t=new Mh(16);return Mh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},is=function(t){var s=new Mh(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},hs=function(t,s,i,e,h,n,r,o,a,l,u,c,f,d,p,m){var g=new Mh(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=h,g[5]=n,g[6]=r,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},ns=function(t,s,i,e,h,n,r,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},p=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rs=function(t,s){var i,e,h,n,r,o;return t===s?(i=s[1],e=s[2],h=s[3],n=s[6],r=s[7],o=s[11],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=n,t[11]=s[14],t[12]=h,t[13]=r,t[14]=o):(t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15]),t},os=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*r,w=i*a-h*r,S=i*l-n*r,b=e*a-h*o,v=e*l-n*o,M=h*l-n*a,x=u*m-c*p,G=u*g-f*p,T=u*(s=s[15])-d*p,_=c*g-f*m,I=c*s-d*m,C=f*s-d*g,E=y*C-w*I+S*_+b*T-v*G+M*x;return E?(t[0]=(o*C-a*I+l*_)*(E=1/E),t[1]=(h*I-e*C-n*_)*E,t[2]=(m*M-g*v+s*b)*E,t[3]=(f*v-c*M-d*b)*E,t[4]=(a*T-r*C-l*G)*E,t[5]=(i*C-h*T+n*G)*E,t[6]=(g*S-p*M-s*w)*E,t[7]=(u*M-f*S+d*w)*E,t[8]=(r*I-o*T+l*x)*E,t[9]=(e*T-i*I-n*x)*E,t[10]=(p*v-m*S+s*y)*E,t[11]=(c*S-u*v-d*y)*E,t[12]=(o*G-r*_-a*x)*E,t[13]=(i*_-e*G+h*x)*E,t[14]=(m*w-p*b-g*y)*E,t[15]=(u*b-c*w+f*y)*E,t):null},as=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*r,w=i*a-h*r,S=i*l-n*r,b=e*a-h*o,v=e*l-n*o,M=h*l-n*a,x=u*m-c*p,G=u*g-f*p,T=u*(s=s[15])-d*p,_=c*g-f*m,I=c*s-d*m,C=f*s-d*g;return t[0]=o*C-a*I+l*_,t[1]=h*I-e*C-n*_,t[2]=m*M-g*v+s*b,t[3]=f*v-c*M-d*b,t[4]=a*T-r*C-l*G,t[5]=i*C-h*T+n*G,t[6]=g*S-p*M-s*w,t[7]=u*M-f*S+d*w,t[8]=r*I-o*T+l*x,t[9]=e*T-i*I-n*x,t[10]=p*v-m*S+s*y,t[11]=c*S-u*v-d*y,t[12]=o*G-r*_-a*x,t[13]=i*_-e*G+h*x,t[14]=m*w-p*b-g*y,t[15]=u*b-c*w+f*y,t},ls=function(t){var s=t[0],i=t[1],e=t[2],h=t[4],n=t[5],r=t[6],o=t[8],a=t[9],l=t[10],u=t[12],c=t[13],f=t[14],d=s*n-i*h,p=s*r-e*h,m=i*r-e*n,g=o*c-a*u,y=o*f-l*u,w=a*f-l*c;return t[7]*(s*w-i*y+e*g)-t[3]*(h*w-n*y+r*g)+t[15]*(o*m-a*p+l*d)-t[11]*(u*m-c*p+f*d)},o=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],s=s[15],w=i[0],S=i[1],b=i[2],v=i[3];return t[0]=w*e+S*o+b*c+v*m,t[1]=w*h+S*a+b*f+v*g,t[2]=w*n+S*l+b*d+v*y,t[3]=w*r+S*u+b*p+v*s,t[4]=(w=i[4])*e+(S=i[5])*o+(b=i[6])*c+(v=i[7])*m,t[5]=w*h+S*a+b*f+v*g,t[6]=w*n+S*l+b*d+v*y,t[7]=w*r+S*u+b*p+v*s,t[8]=(w=i[8])*e+(S=i[9])*o+(b=i[10])*c+(v=i[11])*m,t[9]=w*h+S*a+b*f+v*g,t[10]=w*n+S*l+b*d+v*y,t[11]=w*r+S*u+b*p+v*s,t[12]=(w=i[12])*e+(S=i[13])*o+(b=i[14])*c+(v=i[15])*m,t[13]=w*h+S*a+b*f+v*g,t[14]=w*n+S*l+b*d+v*y,t[15]=w*r+S*u+b*p+v*s,t},us=function(t,s,i){var e,h,n,r,o,a,l,u,c,f,d,p,m=i[0],g=i[1],i=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*i+s[12],t[13]=s[1]*m+s[5]*g+s[9]*i+s[13],t[14]=s[2]*m+s[6]*g+s[10]*i+s[14],t[15]=s[3]*m+s[7]*g+s[11]*i+s[15]):(e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*i+s[12],t[13]=h*m+a*g+f*i+s[13],t[14]=n*m+l*g+d*i+s[14],t[15]=r*m+u*g+p*i+s[15]),t},cs=function(t,s,i){var e=i[0],h=i[1],i=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*h,t[5]=s[5]*h,t[6]=s[6]*h,t[7]=s[7]*h,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fs=function(t,s,i,e){var h,n,r,o,a,l,u,c,f,d,p,m,g,y,w,S,b,v,M,x,G=e[0],T=e[1],e=e[2],_=Math.hypot(G,T,e);return _<vh?null:(G*=_=1/_,T*=_,e*=_,_=Math.sin(i),i=Math.cos(i),n=s[0],r=s[1],o=s[2],a=s[3],u=s[5],c=s[6],f=s[7],p=s[9],m=s[10],g=s[11],w=G*T*(h=1-i)-e*_,S=T*T*h+i,b=e*T*h+G*_,v=G*e*h+T*_,M=T*e*h-G*_,x=e*e*h+i,t[0]=n*(i=G*G*h+i)+(l=s[4])*(y=T*G*h+e*_)+(d=s[8])*(e=e*G*h-T*_),t[1]=r*i+u*y+p*e,t[2]=o*i+c*y+m*e,t[3]=a*i+f*y+g*e,t[4]=n*w+l*S+d*b,t[5]=r*w+u*S+p*b,t[6]=o*w+c*S+m*b,t[7]=a*w+f*S+g*b,t[8]=n*v+l*M+d*x,t[9]=r*v+u*M+p*x,t[10]=o*v+c*M+m*x,t[11]=a*v+f*M+g*x,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},ds=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[4],n=s[5],r=s[6],o=s[7],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=h*i+a*e,t[5]=n*i+l*e,t[6]=r*i+u*e,t[7]=o*i+c*e,t[8]=a*i-h*e,t[9]=l*i-n*e,t[10]=u*i-r*e,t[11]=c*i-o*e,t},ps=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],n=s[1],r=s[2],o=s[3],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i-a*e,t[1]=n*i-l*e,t[2]=r*i-u*e,t[3]=o*i-c*e,t[8]=h*e+a*i,t[9]=n*e+l*i,t[10]=r*e+u*i,t[11]=o*e+c*i,t},ms=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],n=s[1],r=s[2],o=s[3],a=s[4],l=s[5],u=s[6],c=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i+a*e,t[1]=n*i+l*e,t[2]=r*i+u*e,t[3]=o*i+c*e,t[4]=a*i-h*e,t[5]=l*i-n*e,t[6]=u*i-r*e,t[7]=c*i-o*e,t},gs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ys=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ws=function(t,s,i){var e,h=i[0],n=i[1],i=i[2],r=Math.hypot(h,n,i);return r<vh?null:(h*=r=1/r,n*=r,i*=r,r=Math.sin(s),s=Math.cos(s),t[0]=h*h*(e=1-s)+s,t[1]=n*h*e+i*r,t[2]=i*h*e-n*r,t[3]=0,t[4]=h*n*e-i*r,t[5]=n*n*e+s,t[6]=i*n*e+h*r,t[7]=0,t[8]=h*i*e+n*r,t[9]=n*i*e-h*r,t[10]=i*i*e+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},Ss=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},bs=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},vs=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f=function(t,s,i){var e=s[0],h=s[2],n=h+h,r=e*(u=e+e),o=e*(c=(l=s[1])+l),e=e*n,a=l*c,l=l*n,u=(s=s[3])*u,c=s*c,s=s*n;return t[0]=1-(a+(h=h*n)),t[1]=o+s,t[2]=e-c,t[3]=0,t[4]=o-s,t[5]=1-(r+h),t[6]=l+u,t[7]=0,t[8]=e+c,t[9]=l-u,t[10]=1-(r+a),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ms=function(t,s){var i=new Mh(3),e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=e*e+h*h+n*n+r*r;return 0<c?(i[0]=2*(o*r+u*e+a*n-l*h)/c,i[1]=2*(a*r+u*h+l*e-o*n)/c,i[2]=2*(l*r+u*n+o*h-a*e)/c):(i[0]=2*(o*r+u*e+a*n-l*h),i[1]=2*(a*r+u*h+l*e-o*n),i[2]=2*(l*r+u*n+o*h-a*e)),f(t,s,i),t},a=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},d=function(t,s){var i=s[0],e=s[4],h=s[5],n=s[6],r=s[8],o=s[9],a=s[10];return t[0]=Math.hypot(i,s[1],s[2]),t[1]=Math.hypot(e,h,n),t[2]=Math.hypot(r,o,a),t},l=function(t,s){var i=new Mh(3),e=(d(i,s),1/i[0]),h=s[0]*e,n=s[1]*(u=1/i[1]),r=s[2]*(i=1/i[2]),o=s[4]*e,a=s[5]*u,l=s[6]*i,e=s[8]*e,u=s[9]*u,c=0;return 0<(i=h+a+(s=s[10]*i))?(c=2*Math.sqrt(1+i),t[3]=.25*c,t[0]=(l-u)/c,t[1]=(e-r)/c,t[2]=(n-o)/c):a<h&&s<h?(c=2*Math.sqrt(1+h-a-s),t[3]=(l-u)/c,t[0]=.25*c,t[1]=(n+o)/c,t[2]=(e+r)/c):s<a?(c=2*Math.sqrt(1+a-h-s),t[3]=(e-r)/c,t[0]=(n+o)/c,t[1]=.25*c,t[2]=(l+u)/c):(c=2*Math.sqrt(1+s-h-a),t[3]=(n-o)/c,t[0]=(e+r)/c,t[1]=(l+u)/c,t[2]=.25*c),t},xs=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var s=e[0],h=e[1],n=e[2],r=e[4],o=e[5],a=e[6],l=e[8],u=e[9],e=e[10],c=(i[0]=Math.hypot(s,h,n),i[1]=Math.hypot(r,o,a),i[2]=Math.hypot(l,u,e),1/i[0]),f=1/i[1],s=s*c,h=h*f,n=n*(i=1/i[2]),r=r*c,a=a*i,l=l*c,c=u*f,u=e*i,e=0;return 0<(f=s+(o=o*f)+u)?(e=2*Math.sqrt(1+f),t[3]=.25*e,t[0]=(a-c)/e,t[1]=(l-n)/e,t[2]=(h-r)/e):o<s&&u<s?(e=2*Math.sqrt(1+s-o-u),t[3]=(a-c)/e,t[0]=.25*e,t[1]=(h+r)/e,t[2]=(l+n)/e):u<o?(e=2*Math.sqrt(1+o-s-u),t[3]=(l-n)/e,t[0]=(h+r)/e,t[1]=.25*e,t[2]=(a+c)/e):(e=2*Math.sqrt(1+u-s-o),t[3]=(h-r)/e,t[0]=(l+n)/e,t[1]=(a+c)/e,t[2]=.25*e),t},Gs=function(t,s,i,e){var h=(r=s[0])*(u=r+r),n=r*(c=(a=s[1])+a),r=r*(f=(l=s[2])+l),o=a*c,a=a*f,l=l*f,u=(s=s[3])*u,c=s*c,s=s*f,f=e[0],d=e[1],e=e[2];return t[0]=(1-(o+l))*f,t[1]=(n+s)*f,t[2]=(r-c)*f,t[3]=0,t[4]=(n-s)*d,t[5]=(1-(h+l))*d,t[6]=(a+u)*d,t[7]=0,t[8]=(r+c)*e,t[9]=(a-u)*e,t[10]=(1-(h+o))*e,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ts=function(t,s,i,e,h){var n=(o=s[0])*(c=o+o),r=o*(f=(l=s[1])+l),o=o*(d=(u=s[2])+u),a=l*f,l=l*d,u=u*d,c=(s=s[3])*c,f=s*f,s=s*d,d=e[0],p=e[1],e=e[2],m=h[0],g=h[1],h=h[2],y=(1-(a+u))*d,w=(r+s)*d,d=(o-f)*d,r=(r-s)*p,s=(1-(n+u))*p,u=(l+c)*p,p=(o+f)*e,o=(l-c)*e,f=(1-(n+a))*e;return t[0]=y,t[1]=w,t[2]=d,t[3]=0,t[4]=r,t[5]=s,t[6]=u,t[7]=0,t[8]=p,t[9]=o,t[10]=f,t[11]=0,t[12]=i[0]+m-(y*m+r*g+p*h),t[13]=i[1]+g-(w*m+s*g+o*h),t[14]=i[2]+h-(d*m+u*g+f*h),t[15]=1,t},_s=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(l=i+i),n=(r=s[1])*l,r=r*(u=r+r),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*h;return t[0]=1-r-(e=e*h),t[1]=n+s,t[2]=o-u,t[3]=0,t[4]=n-s,t[5]=1-i-e,t[6]=a+l,t[7]=0,t[8]=o+u,t[9]=a-l,t[10]=1-i-r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Is=function(t,s,i,e,h,n,r){var o=1/(i-s),a=1/(h-e),l=1/(n-r);return t[0]=2*n*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(h+e)*a,t[10]=(r+n)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n*2*l,t[15]=0,t},u=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=(h+e)*(i=1/(e-h)),t[14]=2*h*e*i):(t[10]=-1,t[14]=-2*e),t},Cs=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=h*(i=1/(e-h)),t[14]=h*e*i):(t[10]=-1,t[14]=-e),t},Es=function(t,s,i,e){var h=Math.tan(s.upDegrees*Math.PI/180),n=Math.tan(s.downDegrees*Math.PI/180),r=Math.tan(s.leftDegrees*Math.PI/180),o=2/(r+(s=Math.tan(s.rightDegrees*Math.PI/180))),a=2/(h+n);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(r-s)*o*.5,t[9]=(h-n)*a*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},c=function(t,s,i,e,h,n,r){var o=1/(s-i),a=1/(e-h),l=1/(n-r);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=(r+n)*l,t[15]=1,t},Rs=function(t,s,i,e,h,n,r){var o=1/(s-i),a=1/(e-h),r=1/(n-r);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=r,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=n*r,t[15]=1,t},Ps=function(t,s,i,e){var h,n,r,o,a=s[0],l=s[1],s=s[2],u=e[0],c=e[1],e=e[2],f=i[0],d=i[1],i=i[2];return Math.abs(a-f)<vh&&Math.abs(l-d)<vh&&Math.abs(s-i)<vh?p(t):(f=a-f,d=l-d,i=s-i,h=c*(i*=o=1/Math.hypot(f,d,i))-e*(d*=o),e=e*(f*=o)-u*i,u=u*d-c*f,(o=Math.hypot(h,e,u))?(h*=o=1/o,e*=o,u*=o):u=e=h=0,c=d*u-i*e,n=i*h-f*u,r=f*e-d*h,(o=Math.hypot(c,n,r))?(c*=o=1/o,n*=o,r*=o):r=n=c=0,t[0]=h,t[1]=c,t[2]=f,t[3]=0,t[4]=e,t[5]=n,t[6]=d,t[7]=0,t[8]=u,t[9]=r,t[10]=i,t[11]=0,t[12]=-(h*a+e*l+u*s),t[13]=-(c*a+n*l+r*s),t[14]=-(f*a+d*l+i*s),t[15]=1,t)},As=function(t,s,i,e){var h=s[0],n=s[1],s=s[2],r=e[0],o=e[1],e=e[2],a=h-i[0],l=n-i[1],u=a*a+l*l+(i=s-i[2])*i,c=(0<u&&(a*=u=1/Math.sqrt(u),l*=u,i*=u),o*i-e*l);return 0<(u=c*c+(e=e*a-r*i)*e+(r=r*l-o*a)*r)&&(c*=u=1/Math.sqrt(u),e*=u,r*=u),t[0]=c,t[1]=e,t[2]=r,t[3]=0,t[4]=l*r-i*e,t[5]=i*c-a*r,t[6]=a*e-l*c,t[7]=0,t[8]=a,t[9]=l,t[10]=i,t[11]=0,t[12]=h,t[13]=n,t[14]=s,t[15]=1,t},Fs=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Ds=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Os=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Ls=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},ks=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Ns=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},Bs=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Ws=function(t,s){var i=t[0],e=t[1],h=t[2],n=t[3],r=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],t=t[15],y=s[0],w=s[1],S=s[2],b=s[3],v=s[4],M=s[5],x=s[6],G=s[7],T=s[8],_=s[9],I=s[10],C=s[11],E=s[12],R=s[13],P=s[14],s=s[15];return Math.abs(i-y)<=vh*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(e-w)<=vh*Math.max(1,Math.abs(e),Math.abs(w))&&Math.abs(h-S)<=vh*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(n-b)<=vh*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-v)<=vh*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(o-M)<=vh*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(a-x)<=vh*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(l-G)<=vh*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(u-T)<=vh*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(c-_)<=vh*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(f-I)<=vh*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-C)<=vh*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-E)<=vh*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(m-R)<=vh*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(g-P)<=vh*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},m=function(){var t=new Mh(3);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},js=function(t){var s=new Mh(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Vs=function(t){var s=t[0];return Math.hypot(s,t[1],t[2])},g=function(t,s,i){var e=new Mh(3);return e[0]=t,e[1]=s,e[2]=i,e},Hs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Us=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},zs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Js=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},qs=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},$s=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},Xs=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Ys=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Zs=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Ks=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},Qs=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ti=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},si=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ii=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2])},ei=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e+(s=s[2]-t[2])*s},hi=function(t){var s=t[0],i=t[1];return s*s+i*i+(t=t[2])*t},ni=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},ri=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},y=function(t,s){var i=s[0],e=s[1],h=s[2];return 0<(i=i*i+e*e+h*h)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},w=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},S=function(t,s,i){var e=s[0],h=s[1],s=s[2],n=i[0],r=i[1],i=i[2];return t[0]=h*i-s*r,t[1]=s*n-e*i,t[2]=e*r-h*n,t},oi=function(t,s,i,e){var h=s[0],n=s[1],s=s[2];return t[0]=h+e*(i[0]-h),t[1]=n+e*(i[1]-n),t[2]=s+e*(i[2]-s),t},ai=function(t,s,i,e){var h=Math.acos(Math.min(Math.max(w(s,i),-1),1)),n=Math.sin(h),r=Math.sin((1-e)*h)/n,e=Math.sin(e*h)/n;return t[0]=r*s[0]+e*i[0],t[1]=r*s[1]+e*i[1],t[2]=r*s[2]+e*i[2],t},li=function(t,s,i,e,h,n){var r=n*n,o=r*(2*n-3)+1,a=r*(n-2)+n,l=r*(n-1);return t[0]=s[0]*o+i[0]*a+e[0]*l+h[0]*(r=r*(3-2*n)),t[1]=s[1]*o+i[1]*a+e[1]*l+h[1]*r,t[2]=s[2]*o+i[2]*a+e[2]*l+h[2]*r,t},ui=function(t,s,i,e,h,n){var r=1-n,o=r*r,a=n*n,l=o*r;return t[0]=s[0]*l+i[0]*(o=3*n*o)+e[0]*(r=3*a*r)+h[0]*(a=a*n),t[1]=s[1]*l+i[1]*o+e[1]*r+h[1]*a,t[2]=s[2]*l+i[2]*o+e[2]*r+h[2]*a,t},ci=function(t,s){s=s||1;var i=2*Dh()*Math.PI,e=2*Dh()-1,h=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*h,t[1]=Math.sin(i)*h,t[2]=e*s,t},fi=function(t,s,i){var e=s[0],h=s[1],s=s[2],n=i[3]*e+i[7]*h+i[11]*s+i[15];return t[0]=(i[0]*e+i[4]*h+i[8]*s+i[12])/(n=n||1),t[1]=(i[1]*e+i[5]*h+i[9]*s+i[13])/n,t[2]=(i[2]*e+i[6]*h+i[10]*s+i[14])/n,t},di=function(t,s,i){var e=s[0],h=s[1],s=s[2];return t[0]=e*i[0]+h*i[3]+s*i[6],t[1]=e*i[1]+h*i[4]+s*i[7],t[2]=e*i[2]+h*i[5]+s*i[8],t},pi=function(t,s,i){var e=i[0],h=i[1],n=s[0],r=s[1],o=h*(s=s[2])-(c=i[2])*r,a=c*n-e*s,l=e*r-h*n,u=h*l-c*a,c=c*o-e*l,e=e*a-h*o;return a*=h=2*i[3],l*=h,c*=2,e*=2,t[0]=n+(o*=h)+(u*=2),t[1]=r+a+c,t[2]=s+l+e,t},mi=function(t,s,i,e){var h=[],n=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],n[0]=h[0],n[1]=h[1]*Math.cos(e)-h[2]*Math.sin(e),n[2]=h[1]*Math.sin(e)+h[2]*Math.cos(e),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},gi=function(t,s,i,e){var h=[],n=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],n[0]=h[2]*Math.sin(e)+h[0]*Math.cos(e),n[1]=h[1],n[2]=h[2]*Math.cos(e)-h[0]*Math.sin(e),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},yi=function(t,s,i,e){var h=[],n=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],n[0]=h[0]*Math.cos(e)-h[1]*Math.sin(e),n[1]=h[0]*Math.sin(e)+h[1]*Math.cos(e),n[2]=h[2],t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},wi=function(t,s){var i=t[0],e=t[1],h=t[2],n=s[0],r=s[1],o=s[2],e=(i=Math.sqrt((i*i+e*e+h*h)*(n*n+r*r+o*o)))&&w(t,s)/i;return Math.acos(Math.min(Math.max(e,-1),1))},Si=function(t){return t[0]=0,t[1]=0,t[2]=0,t},bi=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},vi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},Mi=function(t,s){var i=t[0],e=t[1],t=t[2],h=s[0],n=s[1],s=s[2];return Math.abs(i-h)<=vh*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-n)<=vh*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},b=function(){var t=new Mh(4);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},xi=function(t){var s=new Mh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Gi=function(t,s,i,e){var h=new Mh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},Ti=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},_i=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},Ii=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Ci=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Ei=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Ri=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Pi=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ai=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Fi=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Di=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Oi=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Li=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},ki=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Ni=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2],s[3]-t[3])},Bi=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],h=s[2]-t[2];return i*i+e*e+h*h+(s=s[3]-t[3])*s},v=function(t){var s=t[0];return Math.hypot(s,t[1],t[2],t[3])},M=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e+(t=t[3])*t},Wi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},ji=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Vi=function(t,s){var i=s[0],e=s[1],h=s[2],n=i*i+e*e+h*h+(s=s[3])*s;return 0<n&&(n=1/Math.sqrt(n)),t[0]=i*n,t[1]=e*n,t[2]=h*n,t[3]=s*n,t},x=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Hi=function(t,s,i,e){var h=i[0]*e[1]-i[1]*e[0],n=i[0]*e[2]-i[2]*e[0],r=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],i=i[2]*e[3]-i[3]*e[2],e=s[0],l=s[1],u=s[2],s=s[3];return t[0]=l*i-u*a+s*o,t[1]=-e*i+u*r-s*n,t[2]=e*a-l*r+s*h,t[3]=-e*o+l*n-u*h,t},Ui=function(t,s,i,e){var h=s[0],n=s[1],r=s[2],s=s[3];return t[0]=h+e*(i[0]-h),t[1]=n+e*(i[1]-n),t[2]=r+e*(i[2]-r),t[3]=s+e*(i[3]-s),t},zi=function(t,s){var i,e,h,n,r,o;for(s=s||1;1<=(r=(i=2*Dh()-1)*i+(e=2*Dh()-1)*e););for(;1<=(o=(h=2*Dh()-1)*h+(n=2*Dh()-1)*n););var a=Math.sqrt((1-r)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*h*a,t[3]=s*n*a,t},Ji=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3];return t[0]=i[0]*e+i[4]*h+i[8]*n+i[12]*s,t[1]=i[1]*e+i[5]*h+i[9]*n+i[13]*s,t[2]=i[2]*e+i[6]*h+i[10]*n+i[14]*s,t[3]=i[3]*e+i[7]*h+i[11]*n+i[15]*s,t},qi=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=i[0],o=i[1],a=i[2],l=(i=i[3])*e+o*n-a*h,u=i*h+a*e-r*n,c=i*n+r*h-o*e;return t[0]=l*i+(e=-r*e-o*h-a*n)*-r+u*-a-c*-o,t[1]=u*i+e*-o+c*-r-l*-a,t[2]=c*i+e*-a+l*-o-u*-r,t[3]=s[3],t},$i=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},Xi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Yi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Zi=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],n=s[0],r=s[1],o=s[2],s=s[3];return Math.abs(i-n)<=vh*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(e-r)<=vh*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(h-o)<=vh*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},G=function(){var t=new Mh(4);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Ki=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},T=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},Qi=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return vh<e?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){return t=zh(t,s),Math.acos(2*t*t-1)},se=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*i+s*r+h*a-n*o,t[1]=h*i+s*o+n*r-e*a,t[2]=n*i+s*a+e*o-h*r,t[3]=s*i-e*r-h*o-n*a,t},_=function(t,s,i){i*=.5;var e=s[0],h=s[1],n=s[2],s=s[3],r=Math.sin(i),i=Math.cos(i);return t[0]=e*i+s*r,t[1]=h*i+n*r,t[2]=n*i-h*r,t[3]=s*i-e*r,t},I=function(t,s,i){i*=.5;var e=s[0],h=s[1],n=s[2],s=s[3],r=Math.sin(i),i=Math.cos(i);return t[0]=e*i-n*r,t[1]=h*i+s*r,t[2]=n*i+e*r,t[3]=s*i-h*r,t},C=function(t,s,i){i*=.5;var e=s[0],h=s[1],n=s[2],s=s[3],r=Math.sin(i),i=Math.cos(i);return t[0]=e*i+h*r,t[1]=h*i-e*r,t[2]=n*i+s*r,t[3]=s*i-n*r,t},ie=function(t,s){var i=s[0],e=s[1],s=s[2];return t[0]=i,t[1]=e,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-s*s)),t},E=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],n=Math.sqrt(i*i+e*e+h*h),s=Math.exp(s),r=0<n?s*Math.sin(n)/n:0;return t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=s*Math.cos(n),t},R=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],n=0<(n=Math.sqrt(i*i+e*e+h*h))?Math.atan2(n,s)/n:0;return t[0]=i*n,t[1]=e*n,t[2]=h*n,t[3]=.5*Math.log(i*i+e*e+h*h+s*s),t},ee=function(t,s,i){return R(t,s),Uh(t,t,i),E(t,t),t},P=function(t,s,i,e){var h,n,r=s[0],o=s[1],a=s[2],s=s[3],l=i[0],u=i[1],c=i[2],f=r*l+o*u+a*c+s*(i=i[3]);return f<0&&(f=-f,l=-l,u=-u,c=-c,i=-i),f=vh<1-f?(f=Math.acos(f),h=Math.sin(f),n=Math.sin((1-e)*f)/h,Math.sin(e*f)/h):(n=1-e,e),t[0]=n*r+f*l,t[1]=n*o+f*u,t[2]=n*a+f*c,t[3]=n*s+f*i,t},he=function(t){var s=Dh(),i=Dh(),e=Dh(),h=Math.sqrt(1-s),s=Math.sqrt(s);return t[0]=h*Math.sin(2*Math.PI*i),t[1]=h*Math.cos(2*Math.PI*i),t[2]=s*Math.sin(2*Math.PI*e),t[3]=s*Math.cos(2*Math.PI*e),t},ne=function(t,s){var i=s[0],e=s[1],h=s[2],n=i*i+e*e+h*h+(s=s[3])*s;return t[0]=-i*(n=n?1/n:0),t[1]=-e*n,t[2]=-h*n,t[3]=s*n,t},re=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},A=function(t,s){var i,e,h,n=s[0]+s[4]+s[8];return 0<n?(h=Math.sqrt(n+1),t[3]=.5*h,t[0]=(s[5]-s[7])*(h=.5/h),t[1]=(s[6]-s[2])*h,t[2]=(s[1]-s[3])*h):(i=(1+(n=s[3*(n=s[4]>s[0]?1:0)+n]<s[8]?2:n))%3,e=(2+n)%3,h=Math.sqrt(s[3*n+n]-s[3*i+i]-s[3*e+e]+1),t[n]=.5*h,t[3]=(s[3*i+e]-s[3*e+i])*(h=.5/h),t[i]=(s[3*i+n]+s[3*n+i])*h,t[e]=(s[3*e+n]+s[3*n+e])*h),t},oe=function(t,s,i,e){var h=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Oh,n=Math.PI/360,r=(e*=n,i*=n,Math.sin(s*=n)),o=Math.cos(s),a=Math.sin(i),l=Math.cos(i),u=Math.sin(e),c=Math.cos(e);switch(h){case"xyz":t[0]=r*l*c+o*a*u,t[1]=o*a*c-r*l*u,t[2]=o*l*u+r*a*c,t[3]=o*l*c-r*a*u;break;case"xzy":t[0]=r*l*c-o*a*u,t[1]=o*a*c-r*l*u,t[2]=o*l*u+r*a*c,t[3]=o*l*c+r*a*u;break;case"yxz":t[0]=r*l*c+o*a*u,t[1]=o*a*c-r*l*u,t[2]=o*l*u-r*a*c,t[3]=o*l*c+r*a*u;break;case"yzx":t[0]=r*l*c+o*a*u,t[1]=o*a*c+r*l*u,t[2]=o*l*u-r*a*c,t[3]=o*l*c-r*a*u;break;case"zxy":t[0]=r*l*c-o*a*u,t[1]=o*a*c+r*l*u,t[2]=o*l*u+r*a*c,t[3]=o*l*c-r*a*u;break;case"zyx":t[0]=r*l*c-o*a*u,t[1]=o*a*c+r*l*u,t[2]=o*l*u-r*a*c,t[3]=o*l*c+r*a*u;break;default:throw new Error("Unknown angle order "+h)}return t},ae=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},le=function(t,s){return Math.abs(x(t,s))>=1-vh},ue=function(){var t=new Mh(8);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},ce=function(t){var s=new Mh(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},fe=function(t,s,i,e,h,n,r,o){var a=new Mh(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=h,a[5]=n,a[6]=r,a[7]=o,a},de=function(t,s,i,e,h,n,r){var o=new Mh(8),h=(o[0]=t,o[1]=s,o[2]=i,o[3]=e,.5*h),n=.5*n,r=.5*r;return o[4]=h*e+n*i-r*s,o[5]=n*e+r*t-h*i,o[6]=r*e+h*s-n*t,o[7]=-h*t-n*s-r*i,o},F=function(t,s,i){var e=.5*i[0],h=.5*i[1],i=.5*i[2],n=s[0],r=s[1],o=s[2],s=s[3];return t[0]=n,t[1]=r,t[2]=o,t[3]=s,t[4]=e*s+h*o-i*r,t[5]=h*s+i*n-e*o,t[6]=i*s+e*r-h*n,t[7]=-e*n-h*r-i*o,t},pe=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},me=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},ge=function(t,s){var i=G(),e=(l(i,s),new Mh(3));return a(e,s),F(t,i,e),t},D=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},ye=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},we=function(t,s,i,e,h,n,r,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t[6]=o,t[7]=a,t},Se=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},be=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},ve=function(t,s){var i=s[4],e=s[5],h=s[6],n=s[7],r=-s[0],o=-s[1],a=-s[2],s=s[3];return t[0]=2*(i*s+n*r+e*a-h*o),t[1]=2*(e*s+n*o+h*r-i*a),t[2]=2*(h*s+n*a+i*o-e*r),t},Me=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=.5*i[0],a=.5*i[1],i=.5*i[2],l=s[4],u=s[5],c=s[6],s=s[7];return t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=r*o+h*i-n*a+l,t[5]=r*a+n*o-e*i+u,t[6]=r*i+e*a-h*o+c,t[7]=-e*o-h*a-n*i+s,t},xe=function(t,s,i){var e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=o*r+(d=s[7])*e+a*n-l*h,c=a*r+d*h+l*e-o*n,f=l*r+d*n+o*h-a*e,d=d*r-o*e-a*h-l*n;return _(t,s,i),e=t[0],t[4]=u*(r=t[3])+d*e+c*(n=t[2])-f*(h=t[1]),t[5]=c*r+d*h+f*e-u*n,t[6]=f*r+d*n+u*h-c*e,t[7]=d*r-u*e-c*h-f*n,t},Ge=function(t,s,i){var e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=o*r+(d=s[7])*e+a*n-l*h,c=a*r+d*h+l*e-o*n,f=l*r+d*n+o*h-a*e,d=d*r-o*e-a*h-l*n;return I(t,s,i),e=t[0],t[4]=u*(r=t[3])+d*e+c*(n=t[2])-f*(h=t[1]),t[5]=c*r+d*h+f*e-u*n,t[6]=f*r+d*n+u*h-c*e,t[7]=d*r-u*e-c*h-f*n,t},Te=function(t,s,i){var e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=o*r+(d=s[7])*e+a*n-l*h,c=a*r+d*h+l*e-o*n,f=l*r+d*n+o*h-a*e,d=d*r-o*e-a*h-l*n;return C(t,s,i),e=t[0],t[4]=u*(r=t[3])+d*e+c*(n=t[2])-f*(h=t[1]),t[5]=c*r+d*h+f*e-u*n,t[6]=f*r+d*n+u*h-c*e,t[7]=d*r-u*e-c*h-f*n,t},_e=function(t,s,i){var e=i[0],h=i[1],n=i[2],i=i[3],r=s[0],o=s[1],a=s[2],l=s[3];return t[0]=r*i+l*e+o*n-a*h,t[1]=o*i+l*h+a*e-r*n,t[2]=a*i+l*n+r*h-o*e,t[3]=l*i-r*e-o*h-a*n,t[4]=(r=s[4])*i+(l=s[7])*e+(o=s[5])*n-(a=s[6])*h,t[5]=o*i+l*h+a*e-r*n,t[6]=a*i+l*n+r*h-o*e,t[7]=l*i-r*e-o*h-a*n,t},Ie=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=i[0],o=i[1],a=i[2],l=i[3];return t[0]=e*l+s*r+h*a-n*o,t[1]=h*l+s*o+n*r-e*a,t[2]=n*l+s*a+e*o-h*r,t[3]=s*l-e*r-h*o-n*a,t[4]=e*(l=i[7])+s*(r=i[4])+h*(a=i[6])-n*(o=i[5]),t[5]=h*l+s*o+n*r-e*a,t[6]=n*l+s*a+e*o-h*r,t[7]=s*l-e*r-h*o-n*a,t},Ce=function(t,s,i,e){var h,n,r,o,a,l;return Math.abs(e)<vh?D(t,s):(l=Math.hypot(i[0],i[1],i[2]),e*=.5,h=(r=Math.sin(e))*i[0]/l,n=r*i[1]/l,r=r*i[2]/l,i=Math.cos(e),l=s[0],t[0]=l*i+(e=s[3])*h+(o=s[1])*r-(a=s[2])*n,t[1]=o*i+e*n+a*h-l*r,t[2]=a*i+e*r+l*n-o*h,t[3]=e*i-l*h-o*n-a*r,t[4]=(e=s[4])*i+(l=s[7])*h+(o=s[5])*r-(a=s[6])*n,t[5]=o*i+l*n+a*h-e*r,t[6]=a*i+l*r+e*n-o*h,t[7]=l*i-e*h-o*n-a*r,t)},Ee=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},Re=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],s=s[7],p=i[0],m=i[1],g=i[2],i=i[3];return t[0]=e*i+r*p+h*g-n*m,t[1]=h*i+r*m+n*p-e*g,t[2]=n*i+r*g+e*m-h*p,t[3]=r*i-e*p-h*m-n*g,t[4]=e*u+r*o+h*l-n*a+c*i+s*p+f*g-d*m,t[5]=h*u+r*a+n*o-e*l+f*i+s*m+d*p-c*g,t[6]=n*u+r*l+e*a-h*o+d*i+s*g+c*m-f*p,t[7]=r*u-e*o-h*a-n*l+s*i-c*p-f*m-d*g,t},Pe=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},Ae=function(t,s,i,e){var h=1-e;return Yh(s,i)<0&&(e=-e),t[0]=s[0]*h+i[0]*e,t[1]=s[1]*h+i[1]*e,t[2]=s[2]*h+i[2]*e,t[3]=s[3]*h+i[3]*e,t[4]=s[4]*h+i[4]*e,t[5]=s[5]*h+i[5]*e,t[6]=s[6]*h+i[6]*e,t[7]=s[7]*h+i[7]*e,t},Fe=function(t,s){var i=Zh(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},De=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},Oe=function(t,s){var i,e,h,n,r,o,a,l,u=Zh(s);return 0<u&&(u=Math.sqrt(u),l=(i=s[0]/u)*(r=s[4])+(e=s[1]/u)*(o=s[5])+(h=s[2]/u)*(a=s[6])+(n=s[3]/u)*(s=s[7]),t[0]=i,t[1]=e,t[2]=h,t[3]=n,t[4]=(r-i*l)/u,t[5]=(o-e*l)/u,t[6]=(a-h*l)/u,t[7]=(s-n*l)/u),t},Le=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},ke=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Ne=function(t,s){var i=t[0],e=t[1],h=t[2],n=t[3],r=t[4],o=t[5],a=t[6],t=t[7],l=s[0],u=s[1],c=s[2],f=s[3],d=s[4],p=s[5],m=s[6],s=s[7];return Math.abs(i-l)<=vh*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(e-u)<=vh*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(h-c)<=vh*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(n-f)<=vh*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=vh*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(o-p)<=vh*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=vh*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},O=function(){var t=new Mh(2);return Mh!=Float32Array&&(t[0]=0,t[1]=0),t},Be=function(t){var s=new Mh(2);return s[0]=t[0],s[1]=t[1],s},We=function(t,s){var i=new Mh(2);return i[0]=t,i[1]=s,i},je=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ve=function(t,s,i){return t[0]=s,t[1]=i,t},He=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},Ue=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},ze=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},Je=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},qe=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},$e=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},Xe=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},Ye=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Ze=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Ke=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},Qe=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},th=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1])},sh=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},ih=function(t){var s=t[0];return Math.hypot(s,t[1])},eh=function(t){var s=t[0];return s*s+(t=t[1])*t},hh=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},nh=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},rh=function(t,s){var i=s[0],e=s[1];return 0<(i=i*i+e*e)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t},oh=function(t,s){return t[0]*s[0]+t[1]*s[1]},ah=function(t,s,i){return s=s[0]*i[1]-s[1]*i[0],t[0]=t[1]=0,t[2]=s,t},lh=function(t,s,i,e){var h=s[0],s=s[1];return t[0]=h+e*(i[0]-h),t[1]=s+e*(i[1]-s),t},uh=function(t,s){s=s||1;var i=2*Dh()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},ch=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s,t[1]=i[1]*e+i[3]*s,t},fh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s+i[4],t[1]=i[1]*e+i[3]*s+i[5],t},dh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[3]*s+i[6],t[1]=i[1]*e+i[4]*s+i[7],t},ph=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[4]*s+i[12],t[1]=i[1]*e+i[5]*s+i[13],t},mh=function(t,s,i,e){var h=s[0]-i[0],s=s[1]-i[1],n=Math.sin(e),e=Math.cos(e);return t[0]=h*e-s*n+i[0],t[1]=h*n+s*e+i[1],t},gh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1],h=Math.sqrt((i*i+t*t)*(e*e+s*s));return Math.acos(Math.min(Math.max(h&&(i*e+t*s)/h,-1),1))},yh=function(t){return t[0]=0,t[1]=0,t},wh=function(t){return"vec2("+t[0]+", "+t[1]+")"},Sh=function(t,s){return t[0]===s[0]&&t[1]===s[1]},bh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1];return Math.abs(i-e)<=vh*Math.max(1,Math.abs(i),Math.abs(e))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))};h,p,f,a,d,l,m,g,y,w,S,b,x,G,T,_,I,C,E,R,P,A,F,D,O,vh=1e-6,Mh="undefined"!=typeof Float32Array?Float32Array:Array,Dh=Math.random,Oh="zyx",Lh=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),kh={__proto__:null,EPSILON:vh,get m(){return Mh},g:Dh,S:Oh,M:L,G:k,equals:N},Nh=Object.freeze({__proto__:null,create:B,clone:W,T:j,identity:V,_:H,set:U,I:z,C:J,R:q,P:$,multiply:t,rotate:X,scale:Y,A:Z,F:K,D:Q,O:tt,L:st,add:it,N:s,B:et,equals:ht,W:nt,j:rt,mul:t,sub:s}),Bh=Object.freeze({__proto__:null,create:ot,clone:at,T:lt,identity:ut,_:ct,set:ft,C:dt,P:pt,multiply:i,rotate:mt,scale:gt,translate:yt,A:wt,F:St,V:bt,D:vt,O:Mt,add:xt,N:e,W:Gt,j:Tt,B:_t,equals:It,mul:i,sub:e}),Wh=Object.freeze({__proto__:null,create:h,H:Ct,clone:Et,T:Rt,_:Pt,set:At,identity:Ft,I:Dt,C:Ot,R:Lt,P:kt,multiply:n,translate:Nt,rotate:Bt,scale:Wt,V:jt,A:Vt,F:Ht,U:Ut,J:zt,$:Jt,X:qt,D:$t,O:Xt,add:Yt,N:r,W:Zt,j:Kt,B:Qt,equals:ts,mul:n,sub:r}),xh=Object.freeze({__proto__:null,create:ss,clone:is,T:es,_:hs,set:ns,identity:p,I:rs,C:os,R:as,P:ls,multiply:o,translate:us,scale:cs,rotate:fs,Y:ds,Z:ps,K:ms,V:gs,F:ys,A:ws,tt:Ss,it:bs,et:vs,ht:f,nt:Ms,ot:a,lt:d,ut:l,ct:xs,ft:Gs,dt:Ts,J:_s,gt:Is,yt:u,perspective:u,St:Cs,bt:Es,vt:c,ortho:c,Mt:Rs,xt:Ps,Gt:As,D:Fs,O:Ds,add:Os,N:Ls,W:ks,j:Ns,B:Bs,equals:Ws,mul:o,sub:Ls}),Xh=Js,Kh=qs,Hh=$s,Qh=ii,tn=ei,jh=Vs,sn=hi,Fh=m(),Gh=Object.freeze({__proto__:null,create:m,clone:js,length:Vs,_:g,T:Hs,set:Us,add:zs,N:Js,multiply:qs,Tt:$s,ceil:Xs,floor:Ys,min:Zs,max:Ks,round:Qs,scale:ti,_t:si,It:ii,Ct:ei,Et:hi,Rt:ni,inverse:ri,normalize:y,Pt:w,At:S,Ft:oi,Dt:ai,Ot:li,Lt:ui,random:ci,kt:fi,Nt:di,Bt:pi,Y:mi,Z:gi,K:yi,angle:wi,Wt:Si,D:bi,B:vi,equals:Mi,sub:Xh,mul:Kh,div:Hh,jt:Qh,Vt:tn,Ht:jh,Ut:sn,forEach:function(t,s,i,e,h,n){var r,o;for(s=s||3,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,r=i;r<o;r+=s)Fh[0]=t[r],Fh[1]=t[r+1],Fh[2]=t[r+2],h(Fh,Fh,n),t[r]=Fh[0],t[r+1]=Fh[1],t[r+2]=Fh[2];return t}}),Xh=Ci,Kh=Ei,Hh=Ri,Qh=Ni,tn=Bi,sn=v,en=M,Ah=b(),Vh=Object.freeze({__proto__:null,create:b,clone:xi,_:Gi,T:Ti,set:_i,add:Ii,N:Ci,multiply:Ei,Tt:Ri,ceil:Pi,floor:Ai,min:Fi,max:Di,round:Oi,scale:Li,_t:ki,It:Ni,Ct:Bi,length:v,Et:M,Rt:Wi,inverse:ji,normalize:Vi,Pt:x,At:Hi,Ft:Ui,random:zi,kt:Ji,Bt:qi,Wt:$i,D:Xi,B:Yi,equals:Zi,sub:Xh,mul:Kh,div:Hh,jt:Qh,Vt:tn,Ht:sn,Ut:en,forEach:function(t,s,i,e,h,n){var r,o;for(s=s||4,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,r=i;r<o;r+=s)Ah[0]=t[r],Ah[1]=t[r+1],Ah[2]=t[r+2],Ah[3]=t[r+3],h(Ah,Ah,n),t[r]=Ah[0],t[r+1]=Ah[1],t[r+2]=Ah[2],t[r+3]=Ah[3];return t}}),Xh=xi,Kh=Gi,Hh=Ti,Qh=_i,tn=Ii,sn=se,Uh=Li,zh=x,en=Ui,hn=Jh=v,nn=qh=M,$h=Vi,rn=Yi,Eh=m(),Rh=g(1,0,0),Ph=g(0,1,0),on=function(t,s,i){var e=w(s,i);return e<-.999999?(S(Eh,Rh,s),jh(Eh)<1e-6&&S(Eh,Ph,s),y(Eh,Eh),T(t,Eh,Math.PI),t):.999999<e?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(S(Eh,s,i),t[0]=Eh[0],t[1]=Eh[1],t[2]=Eh[2],t[3]=1+e,$h(t,t))},Ih=G(),Ch=G(),an=function(t,s,i,e,h,n){return P(Ih,s,h,n),P(Ch,i,e,n),P(t,Ih,Ch,2*n*(1-n)),t},_h=h(),Xh=Object.freeze({__proto__:null,create:G,identity:Ki,zt:T,Jt:Qi,qt:te,multiply:se,Y:_,Z:I,K:C,$t:ie,exp:E,Xt:R,pow:ee,Dt:P,random:he,C:ne,Yt:re,Zt:A,Kt:oe,D:ae,clone:Xh,_:Kh,T:Hh,set:Qh,add:tn,mul:sn,scale:Uh,Pt:zh,Ft:en,length:Jh,Ht:hn,Et:qh,Ut:nn,normalize:$h,B:rn,equals:le,Qt:on,ts:an,ss:function(t,s,i,e){return _h[0]=i[0],_h[3]=i[1],_h[6]=i[2],_h[1]=e[0],_h[4]=e[1],_h[7]=e[2],_h[2]=-s[0],_h[5]=-s[1],_h[8]=-s[2],$h(t,A(t,_h))}}),Yh=zh,Kh=Zh=qh,Qh=Object.freeze({__proto__:null,create:ue,clone:ce,_:fe,es:de,ht:F,V:pe,A:me,H:ge,T:D,identity:ye,set:we,hs:Hh,ns:Se,rs:Hh,os:be,ot:ve,translate:Me,Y:xe,Z:Ge,K:Te,ls:_e,us:Ie,cs:Ce,add:Ee,multiply:Re,mul:Re,scale:Pe,Pt:Yh,Ft:Ae,C:Fe,Yt:De,length:Jh,Ht:Jh,Et:Zh,Ut:Kh,normalize:Oe,D:Le,B:ke,equals:Ne}),tn=ih,sn=Ue,en=ze,hn=Je,nn=th,rn=sh,on=eh,Th=O(),an=Object.freeze({__proto__:null,create:O,clone:Be,_:We,T:je,set:Ve,add:He,N:Ue,multiply:ze,Tt:Je,ceil:qe,floor:$e,min:Xe,max:Ye,round:Ze,scale:Ke,_t:Qe,It:th,Ct:sh,length:ih,Et:eh,Rt:hh,inverse:nh,normalize:rh,Pt:oh,At:ah,Ft:lh,random:uh,ds:ch,gs:fh,Nt:dh,kt:ph,rotate:mh,angle:gh,Wt:yh,D:wh,B:Sh,equals:bh,Ht:tn,sub:sn,mul:en,div:hn,jt:nn,Vt:rn,Ut:on,forEach:function(t,s,i,e,h,n){var r,o;for(s=s||2,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,r=i;r<o;r+=s)Th[0]=t[r],Th[1]=t[r+1],h(Th,Th,n),t[r]=Th[0],t[r+1]=Th[1];return t}}),globalThis.ys=kh,globalThis.ys.ws=Nh,globalThis.ys.Ss=Bh,globalThis.ys.bs=Wh,globalThis.ys.vs=xh,globalThis.ys.Ms=Xh,globalThis.ys.xs=Qh,globalThis.ys.Gs=an,globalThis.ys.Ts=Gh,globalThis.ys._s=Vh}var Th,_h,Ih,Ch,Eh,Rh,Ph,Ah,Fh,vh,Mh,Dh,Oh,Lh,kh,Nh,Bh,Wh,xh,jh,Gh,Vh,Hh,Uh,zh,Jh,qh,$h,Xh,Yh,Zh,Kh,Qh,tn,sn,en,hn,nn,rn,on,an,O,L,k,N;{let a=function(t,s,i){var e=[0,0],h=t[1][1]-t[0][1],n=t[0][0]-t[1][0],t=h*t[0][0]+n*t[0][1],r=s[1][1]-s[0][1],o=s[0][0]-s[1][0],s=r*s[0][0]+o*s[0][1],a=h*o-r*n;return m(a,0,i=i||0)||(e[0]=(o*t-n*s)/a,e[1]=(h*s-r*t)/a),e},h=function(t,s,i,e){var h,n=s[0]-t[0],s=s[1]-t[1],r=e[0]-i[0];return r*s-(e=e[1]-i[1])*n!=0&&(h=(r*(t[1]-i[1])+e*(i[0]-t[0]))/(e*n-r*s),0<=(t=(n*(i[1]-t[1])+s*(t[0]-i[0]))/(r*s-e*n)))&&t<=1&&0<=h&&h<=1},o=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},x=function(t,s,i){return 0<o(t,s,i)},G=function(t,s,i){return 0<=o(t,s,i)},T=function(t,s,i){return o(t,s,i)<0},_=function(t,s,i){return o(t,s,i)<=0},n=function(t,s,i,e){var h,n,r;return e?(r=L,(n=O)[0]=s[0]-t[0],n[1]=s[1]-t[1],r[0]=i[0]-s[0],r[1]=i[1]-s[1],h=n[0]*r[0]+n[1]*r[1],n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),Math.acos(h/(n*r))<e):0===o(t,s,i)},I=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},C=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},r=function(t){t.length=0},E=function(t,s,i,e){for(var h=i;h<e;h++)t.push(s[h])},t=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!x(C(t,s-1),C(t,s),C(t,s+1))&&(l(t),!0)},l=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},R=function(t,s){return T(C(t,s-1),C(t,s),C(t,s+1))},u=function(t,s,i){var e,h=k,n=N;if(G(C(t,s+1),C(t,s),C(t,i))&&_(C(t,s-1),C(t,s),C(t,i)))return!1;for(var r=I(C(t,s),C(t,i)),o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&G(C(t,s),C(t,i),C(t,o+1))&&_(C(t,s),C(t,i),C(t,o))&&(h[0]=C(t,s),h[1]=C(t,i),n[0]=C(t,o),n[1]=C(t,o+1),e=a(h,n),I(C(t,s),e)<r))return!1;return!0},P=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&h(C(t,s),C(t,i),C(t,e),C(t,e+1)))return!1;return!0},c=function(t,s,i,e){var h=e||[];if(r(h),s<i)for(var n=s;n<=i;n++)h.push(t[n]);else{for(n=0;n<=i;n++)h.push(t[n]);for(n=s;n<t.length;n++)h.push(t[n])}return h},f=function(t){for(var s=[],i=[],e=[],h=Number.MAX_VALUE,n=0;n<t.length;++n)if(R(t,n))for(var r=0;r<t.length;++r)if(u(t,n,r)){for(var i=f(c(t,n,r,e)),o=f(c(t,r,n,e)),a=0;a<o.length;a++)i.push(o[a]);i.length<h&&(h=(s=i).length,s.push([C(t,n),C(t,r)]))}return s},s=function(t){var s=f(t);return 0<s.length?d(t,s):[t]},d=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var h=s[e],n=0;n<i.length;n++){var r=d(i[n],h);if(r){i.splice(n,1),i.push(r[0],r[1]);break}}return i}return e=t.indexOf((h=s)[0]),n=t.indexOf(h[1]),-1!==e&&-1!==n&&[c(t,e,n),c(t,n,e)]},i=function(t){for(var s=t,i=0;i<s.length-1;i++)for(var e=0;e<i-1;e++)if(h(s[i],s[i+1],s[e],s[e+1]))return!1;for(i=1;i<s.length-2;i++)if(h(s[0],s[s.length-1],s[i],s[i+1]))return!1;return!0},A=function(t,s,i,e,h){var n=s[1]-t[1],s=t[0]-s[0],t=n*t[0]+s*t[1],r=e[1]-i[1],e=i[0]-e[0],i=r*i[0]+e*i[1],o=n*e-r*s;return m(o,0,h=h||0)?[0,0]:[(e*t-s*i)/o,(n*i-r*t)/o]},F=function(t,s,i,e,h,n,r){n=n||100,r=r||0,h=h||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],w=[],S=t,b=t;if(!(b.length<3))if(n<++r)console.warn("quickDecomp: max level ("+n+") reached.");else{for(var v=0;v<t.length;++v)if(R(S,v)){i.push(S[v]);for(var u=c=Number.MAX_VALUE,M=0;M<t.length;++M)x(C(S,v-1),C(S,v),C(S,M))&&_(C(S,v-1),C(S,v),C(S,M-1))&&(l=A(C(S,v-1),C(S,v),C(S,M),C(S,M-1)),T(C(S,v+1),C(S,v),l))&&(f=I(S[v],l))<c&&(c=f,a=l,m=M),x(C(S,v+1),C(S,v),C(S,M+1))&&_(C(S,v+1),C(S,v),C(S,M))&&(l=A(C(S,v+1),C(S,v),C(S,M),C(S,M+1)),x(C(S,v-1),C(S,v),l))&&(f=I(S[v],l))<u&&(u=f,o=l,p=M);if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),v<p?(E(y,S,v,p+1),y.push(l),w.push(l),0!==m&&E(w,S,m,S.length),E(w,S,0,v+1)):(0!==v&&E(y,S,v,S.length),E(y,S,0,p+1),y.push(l),w.push(l),E(w,S,m,v+1));else{if(p<m&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(M=m;M<=p;++M)G(C(S,v-1),C(S,v),C(S,M))&&_(C(S,v+1),C(S,v),C(S,M))&&(f=I(C(S,v),C(S,M)))<d&&P(S,v,M)&&(d=f,g=M%t.length);v<g?(E(y,S,v,g+1),0!==g&&E(w,S,g,b.length),E(w,S,0,v+1)):(0!==v&&E(y,S,v,b.length),E(y,S,0,g+1),E(w,S,g,v+1))}return y.length<w.length?(F(y,s,i,e,h,n,r),F(w,s,i,e,h,n,r)):(F(w,s,i,e,h,n,r),F(y,s,i,e,h,n,r)),s}s.push(t)}return s},e=function(t,s){for(var i=0,e=t.length-1;3<t.length&&0<=e;--e)n(C(t,e-1),C(t,e),C(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},p=function(t,s){for(var i=t.length-1;1<=i;--i)for(var e=t[i],h=i-1;0<=h;--h)g(e,t[h],s)&&t.splice(i,1)},m=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},g=function(t,s,i){return m(t[0],s[0],i)&&m(t[1],s[1],i)};a,h,o,x,G,T,_,n,I,C,r,E,l,R,u,P,c,f,d,A,F,m,g,O=[],L=[],k=[],N=[],self.Is={Cs:s,Es:F,Rs:i,Ps:e,As:p,Fs:t}}{let t=!1,s=!1,i="dev",e=Symbol("Construct internal API token"),h=14,n=self.Ds=class{constructor(){throw TypeError("static class can't be instantiated")}static Os(){if(h<=0)throw new Error("cannot obtain internal API token");return--h,e}static Ls(){t=!0}static ks(){return t}static Ns(){s=!0}static Bs(){return s}static Ws(t){i=t}static js(){return i}static Vs(){return"final"===i}};n.isDebug=!1,n.Hs=!1,n.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Us={}}{const s=self.Ds;s.zs=class{constructor(t){this.Js=t,this.qs=new Map,this.$s()}$s(){let t=this.Js,s=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const i of s)this.Xs(i)}Xs(t){if(t)if(t.includes("=")){const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.qs.set(i,e)}else this.qs.set(t,null)}Ys(){for(const t of this.qs)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}Zs(t){return this.qs.has(t)}Ks(t){const s=this.qs.get(t);return void 0===s?null:s}Qs(){history.replaceState("",document.title,location.pathname+location.search)}ti(t){this.Js=t,this.qs.clear(),this.$s()}},s.si=new s.zs(location.search),s.ii=new s.zs(location.hash),s.si.Zs("perf")&&(s.ei=!0),"dev"!==s.si.Ks("mode")&&s.Ws("final")}{let e=function(t){const s=parseFloat(t),i=V.get(s);return i||(13<=s?"11":"NT "+t)};e;const a=self.Ds,j="(unknown)",V=(a.hi={ni:j,ri:j,oi:j,ai:j,li:NaN,ci:j,fi:"browser",di:!0,mi:!1,gi:!1,yi:!1,wi:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),H=navigator.userAgent,U=navigator.userAgentData;if(U&&0<U.brands.length){let s=function(t){let s="",i="",e="",h="";for(const n of t){const r=z.get(n.brand),o=(!s&&r&&(s=r,i=n.version),J.get(n.brand));!e&&o&&(e=o,h=n.version)}s||"Chromium"!==e||(a.hi.oi="Chromium",a.hi.ai=h),a.hi.oi=s||j,a.hi.ai=i||j,a.hi.ci=e||j};s,a.hi.ni=U.platform,a.hi.mi=U.mobile,a.hi.di=!a.hi.mi;const z=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),J=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);s(U.brands);let i=!1;a.hi.wi=async()=>{if(!i)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);s(t.fullVersionList),"Windows"===a.hi.ni?a.hi.ri=e(t.platformVersion):a.hi.ri=t.platformVersion,i=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let t=function(t,s){const i=Array.isArray(t)?t:[t];for(const e of i){const h=e.exec(H);if(h){s(h);break}}};t(/windows\s+nt\s+([\d\.]+)/i,t=>{a.hi.ni="Windows";const s=t[1];a.hi.ri=e(s)}),t(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{a.hi.ni="macOS",a.hi.ri=t[1].replace(/_/g,".")}),t(/CrOS/,()=>{a.hi.ni="Chrome OS"}),t(/linux|openbsd|freebsd|netbsd/i,()=>{a.hi.ni="Linux"}),t(/android/i,()=>{a.hi.ni="Android"}),t(/android\s+([\d\.]+)/i,t=>{a.hi.ni="Android",a.hi.ri=t[1]}),a.hi.ni===j&&(t(/(iphone|ipod|ipad)/i,t=>{a.hi.ni="iOS"}),t([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{a.hi.ni="iOS",a.hi.ri=t[1].replace(/_/g,".")}));const q=/chrome\//i.test(H),$=/chromium\//i.test(H),X=/edg\//i.test(H),Y=/OPR\//.test(H),Z=/nwjs/i.test(H),K=/safari\//i.test(H),Q=/webkit/i.test(H),tt=(X||Y||t(/chrome\/([\d\.]+)/i,t=>{a.hi.oi="Chrome",a.hi.ai=t[1],a.hi.ci="Chromium"}),t(/edg\/([\d\.]+)/i,t=>{a.hi.oi="Edge",a.hi.ai=t[1],a.hi.ci="Chromium"}),t(/OPR\/([\d\.]+)/,t=>{a.hi.oi="Opera",a.hi.ai=t[1],a.hi.ci="Chromium"}),t(/chromium\/([\d\.]+)/i,t=>{a.hi.oi="Chromium",a.hi.ai=t[1],a.hi.ci="Chromium"}),t(/nwjs\/[0-9.]+/i,t=>{a.hi.oi="NW.js",a.hi.ai=t[1],a.hi.ci="Chromium",a.hi.fi="nwjs"}),t(/firefox\/([\d\.]+)/i,t=>{a.hi.oi="Firefox",a.hi.ai=t[1],a.hi.ci="Gecko"}),!K||q||$||X||Y||Z||(a.hi.oi="Safari",a.hi.ci="WebKit",t(/version\/([\d\.]+)/i,t=>{a.hi.ai=t[1]}),t(/crios\/([\d\.]+)/i,t=>{a.hi.oi="Chrome for iOS",a.hi.ai=t[1]}),t(/fxios\/([\d\.]+)/i,t=>{a.hi.oi="Firefox for iOS",a.hi.ai=t[1]}),t(/edgios\/([\d\.]+)/i,t=>{a.hi.oi="Edge for iOS",a.hi.ai=t[1]})),a.hi.ci===j&&Q&&(a.hi.ci="WebKit"),"Android"===a.hi.ni&&"Safari"===a.hi.oi&&(a.hi.oi="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),st=tt.has(a.hi.ni)||"nwjs"===a.hi.fi;a.hi.di=st,a.hi.mi=!st}"Chrome"===a.hi.oi&&"browser"===a.hi.fi&&/wv\)/.test(H)&&(a.hi.fi="webview"),"nwjs"!==a.hi.fi&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(a.hi.fi="webapp"),a.hi.li=parseFloat(a.hi.ai);const i="macOS"===a.hi.ni&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;i&&(a.hi.ni="iOS",a.hi.ri=a.hi.ai,a.hi.di=!1,a.hi.mi=!0,a.hi.yi=!0),a.hi.gi="macOS"===a.hi.ni||"iOS"===a.hi.ni}{let r=function(i){return new Promise((t,s)=>{i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})},o=function(i){return new Promise((t,s)=>{i.oncomplete=()=>t(),i.onerror=()=>s(i.error),i.onabort=()=>s(i.error)})},t=function(t,s){return B(t,s)},s=function(t,s){return B(t,s,!0)},a=function(s){e(s);let t=ht.get(s);return t instanceof Promise||(t=(async i=>{e(i);const t=indexedDB.open(i,it);return t.addEventListener("upgradeneeded",t=>{try{const s=t.target.result;s.createObjectStore(et)}catch(t){console.error("Failed to create objectstore for database "+i,t)}}),r(t)})(s),ht.set(s,t),t.catch(t=>ht.delete(s))),t},e=function(t){if("string"!=typeof t)throw new TypeError("expected string")},n=function(t,h){const s=t.objectStore(et).openCursor();return new Promise(i=>{const e=[];s.onsuccess=t=>{const s=t.target.result;if(s){switch(h){case"entries":e.push([s.key,s.value]);break;case"keys":e.push(s.key);break;case"values":e.push(s.value)}s.continue()}else i(e)}})};r,o,t,s,a,e,n;const it=2,et="keyvaluepairs",ht=new Map,nt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,rt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function B(s,i,e=!1,h=!0){const t=await a(s);try{const n=t.transaction([et],e?"readwrite":"readonly");return i(n)}catch(t){if(h&&"InvalidStateError"===t.name)return ht.delete(s),B(s,i,e,!1);throw t}}class ot{constructor(t){e(t),this.name=t}async ready(){await a(this.name)}set(h,n){return e(h),s(this.name,async t=>{const s=t.objectStore(et).put(n,h),i=r(s),e=o(t);await Promise.all([e,i])})}get(n){return e(n),t(this.name,async t=>{const s=t.objectStore(et).get(n),i=r(s),e=o(t),[,h]=await Promise.all([e,i]);return h})}delete(h){return e(h),s(this.name,async t=>{const s=t.objectStore(et).delete(h),i=r(s),e=o(t);await Promise.all([e,i])})}clear(){return s(this.name,async t=>{const s=t.objectStore(et).clear(),i=r(s),e=o(t);await Promise.all([e,i])})}keys(){return t(this.name,async t=>{let s;if(rt){const h=t.objectStore(et).getAllKeys();s=r(h)}else s=n(t,"keys");const i=o(t),[,e]=await Promise.all([i,s]);return e})}values(){return t(this.name,async t=>{let s;if(nt){const h=t.objectStore(et).getAll();s=r(h)}else s=n(t,"values");const i=o(t),[,e]=await Promise.all([i,s]);return e})}entries(){return t(this.name,async t=>{const s=n(t,"entries"),i=o(t),[,e]=await Promise.all([i,s]);return e})}}self.Si=ot}{let i=function(t){throw new Error(`"${t}" is not implemented`)},e=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},h=function(e){return"object"==typeof e?new Promise(s=>{const{port1:t,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),t.postMessage(e)}):Promise.resolve(e)};i,e,h;const at=self.Si,lt=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];new WeakMap;class ut{constructor(t){this.bi=t,this.vi=!this.bi,this.vi||"undefined"!=typeof indexedDB||(this.vi=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.Mi=new Map}xi(t){if(!this.vi)for(const s of lt)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.vi=!0;break}}async Gi(t){const s=this.Mi.get(t),i=await h(s);return void 0===i?null:i}async Ti(t,s){s=await h(s),this.Mi.set(t,s)}_i(t){this.Mi.delete(t)}Ii(){this.Mi.clear()}Ci(){return Array.from(this.Mi.keys())}Ei(){return this.vi}Ri(){return this.Mi}Pi(t){this.Mi=t}async getItem(s,t){if(e(t),this.vi)return this.Gi(s);let i;try{i=await this.bi.get(s)}catch(t){return this.xi(t),this.vi?this.Gi(s):(console.error(`Error reading '${s}' from storage, returning null: `,t),null)}return void 0===i?null:i}async setItem(s,i,t){if(e(t),void 0===i&&(i=null),this.vi)await this.Ti(s,i);else try{await this.bi.set(s,i)}catch(t){if(this.xi(t),!this.vi)throw t;await this.Ti(s,i)}}async removeItem(s,t){if(e(t),this.vi)this._i(s);else try{await this.bi.delete(s)}catch(t){this.xi(t),this.vi?this._i(s):console.error(`Error removing '${s}' from storage: `,t)}}async clear(t){if(e(t),this.vi)this.Ii();else try{await this.bi.clear()}catch(t){this.xi(t),this.vi?this.Ii():console.error("Error clearing storage: ",t)}}async keys(t){if(e(t),this.vi)return this.Ci();let s=[];try{s=await this.bi.keys()}catch(t){if(this.xi(t),this.vi)return this.Ci();console.error("Error getting storage keys: ",t)}return s}ready(t){return e(t),this.vi?Promise.resolve(!0):this.bi.ready()}Ai(t){if(t.forceInMemoryFallback)return new ut(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new at(s);return new ut(i)}}length(t){i("localforage.length()")}key(t,s){i("localforage.key()")}iterate(t,s){i("localforage.iterate()")}Fi(t){i("localforage.setDriver()")}config(t){i("localforage.config()")}Di(t){i("localforage.defineDriver()")}Oi(){i("localforage.driver()")}supports(t){i("localforage.supports()")}dropInstance(){i("localforage.dropInstance()")}}self.localforage=new ut(new at("localforage"))}{const e=self.Ds;if(e.Li={},e.Li.ki=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const s=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==s.reverse}catch(t){return!1}})(),e.Li.Ni="undefined"!=typeof HTMLDialogElement,e.Li.Bi=!!self.requestIdleCallback,e.Li.ImageBitmap=!!self.createImageBitmap,e.Li.ImageBitmapOptions=!1,e.Li.Wi=!1,e.Li.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{e.Li.ImageBitmapOptions=!0}).catch(()=>{e.Li.ImageBitmapOptions=!1})}catch(t){e.Li.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{e.Li.Wi=10===t.width&&10===t.height}).catch(()=>{e.Li.Wi=!1})}catch(t){e.Li.Wi=!1}}if(e.Li.ji=!(!navigator.clipboard||!navigator.clipboard.readText),e.Li.Vi=!(!navigator.permissions||!navigator.permissions.query),e.Li.Hi=!1,e.Li.Vi){const ct={name:"clipboard-read"};navigator.permissions.query(ct).then(()=>{e.Li.Hi=!0}).catch(()=>{e.Li.Hi=!1})}e.Li.Ui=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),e.Li.Ji="undefined"!=typeof Proxy,e.Li.$i=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),e.Li.Xi="function"==typeof fetch,e.Li.Yi=!!(self.isSecureContext&&"Opera"!==e.hi.oi&&navigator.storage&&navigator.storage.persist),e.Li.Zi=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),e.Li.Ki=(()=>{if("undefined"==typeof document)return!1;if("iOS"===e.hi.ni)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),e.Li.ImageDecoder=void 0!==self.ImageDecoder,e.Li.Qi=!!self.VideoEncoder,e.Li.te=!!self.showOpenFilePicker,e.Li.ie=!!self.queryLocalFonts,e.Li.UserActivation=!!navigator.userActivation,e.Li.he=!1,(async()=>{let s;"undefined"==typeof document?s=new OffscreenCanvas(32,32):((s=document.createElement("canvas")).width=32,s.height=32);const t=s.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let i=null;try{s.convertToBlob?i=await s.convertToBlob({type:"image/webp",quality:1}):s.toBlob&&(i=await new Promise(t=>s.toBlob(t,"image/webp",1))),e.Li.he=i&&"image/webp"===i.type}catch(t){e.Li.he=!1}})()}{let e=function(t,i){return t.reduce((t,s)=>(0<i&&Array.isArray(s)?Array.prototype.push.apply(t,e(s,i-1)):t.push(s),t),[])};e;const ft=self.Ds;if(!String.prototype.trimStart){const dt=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(dt,"")}}if(!String.prototype.trimEnd){const pt=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(pt,"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(ft.ne(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),Array.prototype.flat||(Array.prototype.flat=function(t=1){return e(this,t)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.re||(Set.prototype.re=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((i,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,s)=>i({usage:t,quota:s}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let i=function(t){let s=mt.oe(),i="Assertion failure: "+t+"\n\nStack trace:\n"+s;console.error(i)};i;const mt=self.Ds;self.assert=function(t,s){t||i(s)}}{const h=self.Ds,gt=self.Us,yt=(h.ae=function(t){return"number"==typeof t},h.le=function(t){return h.ae(t)&&isFinite(t)},h.ue=function(t){if(!h.ae(t))throw new TypeError("expected number")},h.fe=function(t){h.de(t)},h.pe=function(t,s,i){if(!h.ae(t)||isNaN(t)||t<s||i<t)throw new RangeError("number outside of range")},h.me=function(...s){for(let t of s);},h.ge=function(t){if(!h.le(t))throw new TypeError("expected finite number")},h.ye=function(t){h.de(t)},h.we=function(...s){for(let t of s);},h.Se=function(t){return"string"==typeof t},h.ve=function(t){if(!h.Se(t))throw new TypeError("expected string")},h.Me=function(t){h.de(t)},h.xe=function(...s){for(let t of s);},h.Ge=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},h.Te=function(t){if(!h.Ge(t))throw new TypeError("expected simple object")},h._e=function(t){if(!h.de(t)&&!h.Ge(t))throw new TypeError("expected simple object")},h.Ie=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},h.Ce=function(t){if(!h.Ie(t))throw new TypeError("expected object")},h.Ee=function(t){h.de(t)},h.Re=function(...s){for(let t of s);},h.Pe=function(t){return h.Ae(t,Blob)&&"string"==typeof t.name},h.Fe=function(t){if(!h.Pe(t))throw new TypeError("expected file")},h.De=function(t){h.de(t)},h.Oe=function(t){return Array.isArray(t)},h.Le=function(t){if(!h.Oe(t))throw new TypeError("expected array")},h.ke=function(t){h.de(t)},h.Ne=function(...s){for(let t of s);},h.Be=function(t){return!(!h.Oe(t)||t.length&&!h.Oe(t[0]))},h.We=function(s){if(!h.Be(s))throw new TypeError("expected 2d array");for(let t of s)if(!h.Oe(t))throw new TypeError("expected 2d array")},h.je=function(t){h.de(t)},h.Ve=function(t){return"function"==typeof t},h.He=function(t,s){if(!h.Ve(t))throw new TypeError("expected function");if(!h.de(s)&&t!==s)throw new TypeError("expected same function reference")},h.Ue=function(t){h.de(t)},h.Je=function(...s){for(let t of s);},h.qe=function(s,...i){if(!h.Ve(s))throw new TypeError("expected function");if(!i.length)throw new Error("missing comparison functions");for(let t of i)if(!h.de(t)&&s===t)return;throw new TypeError("expected same function reference")},h.$e=function(...s){if(!h.de(s))for(let t of s);},h.Xe=function(t,s){return t instanceof s},h.Ye=function(s,...i){for(let t of i)if(h.Xe(s,t))return!0;return!1},h.Ze=function(t,s){if(!h.Xe(t,s))throw new TypeError("unexpected type")},h.Ke=function(t,s){h.de(t)},h.Qe=function(t,...s){for(let t of s);},h.th=function(t,...s){if(!h.Ye(t,...s))throw new TypeError("unexpected type")},h.ih=function(t,...s){if(!h.de(t)&&!h.Ye(t,...s))throw new TypeError("unexpected type")},h.eh=function(s,i){for(let t of s)if(!h.Xe(t,i))return!1;return!0},h.hh=function(s){for(let t of s)if(!h.le(t))return!1;return!0},h.nh=function(s,t){for(let t of s);},h.rh=function(s,t){if(!h.de(s))for(let t of s);},h.oh=function(s,t){if(!h.de(s))for(let t of s);},h.ah=function(s){for(let t of s);},h.lh=function(s){if(!h.de(s))for(let t of s);},h.uh=function(t,s){return!(h.de(t)||!h.Se(t.nodeName))&&(!s||h.fh(t.nodeName,s))},h.dh=function(t,s){if(h.de(t)||!h.Se(t.nodeName))throw new TypeError("expected DOM node");if(s&&!h.fh(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},h.ph=function(t,s){h.de(t)},h.mh=function(t,s){return!(h.de(t)||!h.Se(t.tagName))&&(!s||h.fh(t.tagName,s))},h.gh=function(t,s){if(h.de(t)||!h.Se(t.tagName))throw new TypeError("expected HTML element");if(s&&!h.fh(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},h.yh=function(t,s){h.de(t)},h.wh=function(t){return h.mh(t,"img")||h.mh(t,"canvas")||h.mh(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},h.Sh=function(t){if(!h.wh(t))throw new TypeError("expected drawable")},h.bh=function(t){h.de(t)},h.Mh=function(t){return t instanceof ImageData||h.wh(t)},h.xh=function(t){if(!h.Mh(t))throw new TypeError("expected drawable or image data")},h.Gh=function(t){if(!h.de(t)&&!h.Mh(t))throw new TypeError("expected drawable or image data")},h.Th=function(t){return"string"==typeof t||h.HtmlString&&t instanceof h.HtmlString||t instanceof h._h},h.Ih=function(t){if(!h.Th(t))throw new TypeError("expected string-like")},h.Ch=function(t){h.de(t)},h.Eh=function(...s){for(let t of s);},h.Rh=function(){throw new Error("must be overridden")},h.Ph=function(){throw new Error("not yet implemented")},h.Ah=function(t,...s){let i=t;if(void 0===i)return!1;for(let t of s){if(void 0===i[t])return!1;i=i[t]}return!0},h.de=function(t){return null==t},h.Fh=function(s){let i=s[0].constructor;for(let t of s)if(t.constructor!==i)return!1;return i},h.Dh=function(s,i){for(let t of s)if(!(t instanceof i))return!1;return!0},Object.getPrototypeOf(Uint8Array));h.Oh=function(t){return h.Xe(t,yt)},h.Lh=function(t){},h.kh=function(t){h.Nh(t,yt)},h.Bh=function(t,...s){if(!h.Wh(t,...s))throw new TypeError("unexpected type")},h.Wh=function(t,...s){for(const i of s)if(h.Ae(t,i))return!0;return!1},h.Nh=function(t,s){if(!h.Ae(t,s))throw new TypeError("unexpected type")},h.Ae=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},gt.ue=h.ue,gt.fe=h.fe,gt.ge=h.ge,gt.ye=h.ye,gt.ve=h.ve,gt.Me=h.Me,gt.Ce=h.Ce,gt.Ee=h.Ee,gt.Le=h.Le,gt.ke=h.ke,gt.He=h.He,gt.Ue=h.Ue,gt.Ze=h.Ze,gt.Ke=h.Ke,gt.de=h.de}{let e=function(t,s){let i=p.getType(t),e=p.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},h=function(t){console.warn("[Defence] "+t+" @",p.oe())},i=function(){if(f=-1,0<a.size||0<l.size){let t=new Set([...a.keys()].map(t=>p.jh(t))),s=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+s),a.clear(),l.clear()}},n=function(s){let i=new Set;for(let t in s)i.add(t);return i},r=function(t,s){let i=n(s),e=d.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);p.Vh(s,[...i]),s.length&&console.warn(`[Defence] '${p.jh(t)}' constructor creates inconsistent properties: `+s.join(", "))}else d.set(t,i)};e,h,i,n,r;const p=self.Ds,wt=new Map;p.Hh=function(t,s){console.log("%c"+t,"font-weight: bold; color:"+s)},p.Uh=function(t,...s){wt.has(t)||wt.set(t,-1),-1===wt.get(t)&&wt.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...s),wt.set(t,-1)}))};let o,a=(p.zh=function(t){performance.mark(t),(o=o||new Map).has(t)||o.set(t,{current:0,total:0,Jh:0,qh:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.Jh.toPrecision(3)} :: calls => `+this.qh}})},p.$h=function(t){performance.measure("measure-"+t,t);const s=performance.getEntriesByName("measure-"+t)[0],i=o.get(t);i.current=s.duration,i.total+=i.current,i.Jh=i.total/i.qh,console.log(i.toString()),i.qh++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},p.oe=function(){return(new Error).stack},p.Xh=function(){},p.cast=function(t,s){return t&&t instanceof s?t:null},p.jh=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":p.ae(t)?"<number>":p.Se(t)?"<string>":p.Oe(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":p.Ve(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},p.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},p.range=function*(s,i){if(!isFinite(Math.abs(s-i)))throw new Error("Invalid parameters");if(i<s)for(let t=s-1;t>=i;t--)yield t;else for(let t=s;t<i;t++)yield t},new Map),l=new Map,u=new WeakMap,c=new WeakMap;p.Yh={};const St=new Set(["then","splice"]);p.Yh.get=function(t,s){return s in t||"symbol"==typeof s||St.has(s)||h(`Accessed missing property '${s}' from defended object '${p.jh(t)}', returning undefined`),c.has(t)&&"symbol"!=typeof s&&!St.has(s)&&h(`Accessed property '${s}' on a released object '${p.jh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]},p.Yh.set=function(t,s,i){return s in t||a.has(t)||h(`Set non-existent property '${s}' to '${i}' on defended object '${p.jh(t)}'`),e(t[s],i)||a.has(t)||h(`Set '${p.getType(t[s])}' property '${s}' to type '${p.getType(i)}' on defended object '${p.jh(t)}'`),c.has(t)&&h(`Set property '${s}' on a released object '${p.jh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]=i,!0},p.Yh.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${p.jh(t)}'`)},p.Yh.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${p.jh(t)}'`)},p.Yh.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${p.jh(t)}'`)};let f=-1,d=(p.Zh=class{constructor(){if(p.Hs&&p.Li.Ji){let t=Object.create(new.target.prototype),s=new Proxy(t,p.Yh);return a.set(t,s),l.set(s,t),u.set(s,t),-1===f&&(f=requestAnimationFrame(i)),s}}},p.Kh=function(s){if(p.Hs&&p.Li.Ji&&s instanceof p.Zh){if(l.has(s)){let t=l.get(s);l.delete(s),a.delete(t)}return s}return p.isDebug?Object.seal(s):s},p.Qh=function(t,...s){let i;try{i=new t(...s)}catch(t){throw l.clear(),a.clear(),t}return p.Hs&&r(t,i),p.Kh(i)},p.tn=function(t){let s=u.get(t);s&&c.set(s,p.oe())},p.sn=function(t){let s=u.get(t);return!!s&&!!c.get(s)},new Map);p.hn=class{constructor(t){this.nn="",t&&this.start(t)}start(t){p.ei&&(this.nn=t,performance.mark(this.nn+"-Start"))}end(){p.ei&&(performance.mark(this.nn+"-End"),performance.measure(this.nn,this.nn+"-Start",this.nn+"-End"))}next(t){p.ei&&(this.end(),this.nn=t,performance.mark(this.nn+"-Start"))}}}{let i=function(t){return 0===t&&1/t<0};i;const y=self.Ds,bt=2*Math.PI,vt=Math.PI/180,Mt=180/Math.PI,xt=(y.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0==e)return i;if(t<s){const h=i-(s-t)%e;return h===i?0:h}return s+(t-s)%e},y.rn=function(t,s,i,e,h){const n=i-s;if(0==n&&0===e)return t;const r=h-e;return(t-s)*r/n+e},y.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},y.an=function(t,s,i){return t<s?s:i<t?i:t},y.ln=function(t){return(t%=bt)<0&&(t+=bt),t},y.un=function(t){return t*vt},y.cn=function(t){return t*Mt},y.dn=function(t,s,i,e){return Math.hypot(i-t,e-s)},y.pn=function(t,s,i,e){const h=i-t,n=e-s;return h*h+n*n},y.mn=function(t,s,i,e){return Math.atan2(e-s,i-t)},y.gn=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),n=Math.cos(s),r=i*h+e*n;return 1<=r?0:r<=-1?Math.PI:Math.acos(r)},y.yn=function(t,s,i){let e=Math.sin(t),h=Math.cos(t),n=Math.sin(s),r=Math.cos(s);return Math.acos(e*n+h*r)>i?0<h*n-e*r?y.ln(t+i):y.ln(t-i):y.ln(s)},y.wn=function(t,s){let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),n=Math.cos(s);return e*h-i*n<=0},y.Sn=function(t,s,i,e=0){let h=y.gn(t,s),n=bt*e;return y.wn(s,t)?y.ln(t+(h+n)*i):y.ln(t-(h+n)*i)},y.bn=function(t,s,i,e=0){const h=y.gn(t,s),n=bt*e;return y.wn(s,t)?y.ln(t+(h+n)*i):y.ln(t+(bt-h+n)*i)},y.vn=function(t,s,i,e=0){const h=y.gn(t,s),n=bt*e;return y.wn(s,t)?y.ln(t-(-bt+h-n)*i):y.ln(t-(h+n)*i)},y.Mn=function(t,s){const i=y.gn(t,s);return y.wn(t,s)?y.ln(s-i):y.ln(s+i)},y.Ft=function(t,s,i){return t+i*(s-t)},y.xn=function(t,s,i){return t===s?0:(i-t)/(s-t)},y.Gn=function(t,s,i,e,h){return y.Ft(e,h,y.xn(t,s,i))},y.Tn=function(t,s,i,e){return y.Ft(y.Ft(t,s,e),y.Ft(s,i,e),e)},y._n=function(t,s,i,e,h){return y.Ft(y.Tn(t,s,i,h),y.Tn(s,i,e,h),h)},y.In=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},y.Cn=function(t){return 0<t&&0==(t-1&t)},y.En=function(s){--s;for(let t=1;t<32;t<<=1)s|=s>>t;return s+1},y.Rn=function(t,s){return Math.round(t*s)/s},y.Pn=function(t,s){return Math.floor(t*s)/s},y.An=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},y.Fn=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},y.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;0<=e&&"0"===i.charAt(e);--e);return 0<=e&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},y.Dn=function(t,s,i){return y.an(t,0,255)|y.an(s,0,255)<<8|y.an(i,0,255)<<16},1024),Gt=16384,Tt=8191,_t=(y.On=function(t,s,i,e){return t=y.an(Math.floor(1024*t),-8192,Tt),s=y.an(Math.floor(1024*s),-8192,Tt),i=y.an(Math.floor(1024*i),-8192,Tt),e=y.an(Math.floor(1023*e),0,1023),t<0&&(t+=Gt),s<0&&(s+=Gt),i<0&&(i+=Gt),-(t*Gt*Gt*xt+s*Gt*xt+i*xt+e)},y.Ln=function(t,s,i){return y.On(t,s,i,1)},y.kn=function(s){if(0<=s)return(255&s)/255;{let t=Math.floor(-s/(Gt*Gt*xt));return t>Tt&&(t-=Gt),t/1024}},y.Nn=function(s){if(0<=s)return((65280&s)>>8)/255;{let t=Math.floor(-s%(Gt*Gt*xt)/(Gt*xt));return t>Tt&&(t-=Gt),t/1024}},y.Bn=function(s){if(0<=s)return((16711680&s)>>16)/255;{let t=Math.floor(-s%(Gt*xt)/xt);return t>Tt&&(t-=Gt),t/1024}},y.Wn=function(t){if(i(t))return 0;if(0<=t)return 1;{const s=Math.floor(-t%xt);return s/1023}},y.jn=function(s,i){for(s=Math.floor(s),i=Math.floor(i);0!==i;){let t=i;i=s%i,s=t}return s},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]);y.Vn=function(i,e){if((i=Math.floor(i))===(e=Math.floor(e)))return[1,1];for(let s of _t){let t=i/s[0]*s[1];if(Math.abs(e-t)<1)return s.slice(0);if(t=i/s[1]*s[0],Math.abs(e-t)<1)return[s[1],s[0]]}let t=y.jn(i,e);return[i/t,e/t]},y.Hn=function(t,s,i,e,h,n,r,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(h,r),c=Math.max(h,r);if(l<u||c<a)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(n,o),m=Math.max(n,o);if(d<p||m<f)return!1;const g=h-t+r-i,y=n-s+o-e,w=i-t,S=e-s,b=r-h,v=o-n,M=Math.abs(S*b-v*w),x=b*y-v*g;if(Math.abs(x)>M)return!1;const G=w*y-S*g;return Math.abs(G)<=M},y.Un=function(t,s,i,e,h,n,r,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(n<f||d<h)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||m<r)return!1;const g=a-t+u-i,y=l-s+c-e,w=i-t,S=e-s,b=u-a,v=c-l,M=Math.abs(S*b-v*w),x=b*y-v*g;if(Math.abs(x)>M)return!1;const G=w*y-S*g;return Math.abs(G)<=M},y.zn=function(t,s,i,e,h){const n=Math.min(t,i),r=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=h.Jn(),u=h.qn(),c=h.$n(),f=h.Xn(),d=h.Yn(),p=h.Zn(),m=h.Kn(),g=h.Qn();return y.Un(t,s,i,e,n,r,o,a,l,u,c,f)||y.Un(t,s,i,e,n,r,o,a,c,f,d,p)||y.Un(t,s,i,e,n,r,o,a,d,p,m,g)||y.Un(t,s,i,e,n,r,o,a,m,g,l,u)},y.tr=function(s,i,e,h,n){let r=Math.min(s,e),o=Math.max(s,e),a=Math.min(i,h),l=Math.max(i,h),u=0;for(let t=n.length-4;u<=t;u+=2)if(y.Un(s,i,e,h,r,o,a,l,n[u],n[u+1],n[u+2],n[u+3]))return!0;return y.Un(s,i,e,h,r,o,a,l,n[u],n[u+1],n[0],n[1])};y.ir=function(t,s,i,e,h,n,r,o){const a=i-t,l=e-s,u=r-h,c=o-n,f=a*c-l*u;if(0==f)return 2;const d=((s-e)*(r-t)+a*(o-s))/f;return 0<d&&d<1+1e-6?(c*(r-t)+(h-r)*(o-s))/f:2},y.er=function(t,s,i,e,h,n,r,o,a){const l=(r-h)*a,u=(o-n)*a;return y.ir(t,s,i,e,h-l,n-u,r+l,o+u)},y.hr=function(t,s,i,e,h,n,r,o){const a=h-i,l=n-e,u=r-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,w=u*f+c*d,S=1/(p*y-m*m),b=(y*g-m*w)*S,v=(p*w-m*g)*S;return 0<=b&&0<=v&&b+v<=1},y.nr=function(t,s,i,e,h,n,r,o){const a=h-i,l=n-e,u=r-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,w=f*u+d*c,S=p*g-m*m,b=(g*y-m*w)/S,v=(p*w-m*y)/S,M=1-b-v;return[M,b,v]},y.rr=function(t,s,i,e,h,n,r,o,a,l,u,c){return[t*e+s*r+i*l,t*h+s*o+i*u,t*n+s*a+i*c]}}{let l=self.Ds,s=null,i="";if("undefined"!=typeof document){const It=(s=document).querySelector("base");(i=It&&It.hasAttribute("href")?It.getAttribute("href"):"")&&!(i=i.startsWith("/")?i.substr(1):i).endsWith("/")&&(i+="/")}l.lr=function(){return i},l.ur=function(){if(!s)return"";const t=s.location;return l.cr(t.origin+t.pathname)+i},l.cr=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},l.dr=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},l.pr=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},l.mr=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},l.gr=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},l.yr=function(t){return t.replace(/\\/g,"/")},l.Sr=function(t,s){const i=t?l.pr(t).slice(1):"";return s===i},l.br=function(t,s){let i,e;return l.Pe(t)&&(i=l.gr(t.name)),l.Se(t)&&(i=l.gr(t)),l.Pe(s)&&(e=l.gr(s.name)),l.Se(s)&&(e=l.gr(s)),i===e},l.vr=function(t){t=l.yr(t);let s=/^\w\:\//.exec(t),i=(s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),e="",h=t,n,r="";0<i&&(e=t.slice(0,i),h=t.slice(i));const o=(n=h).lastIndexOf("."),a=(0<o&&(r=h.slice(o),n=h.slice(0,-r.length)),s+e+h);return{dir:e,Mr:h,name:n,root:s,ext:r,Gr:a}},l.Tr=function(i,e){return new Promise((t,s)=>{self.setTimeout(t,i,e)})},l._r=function(t){try{t()}catch(t){l.isDebug&&console.warn("Swallowed exception: ",t)}},l.Ir=function(){},l.fh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},l.Cr=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},l.Er=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},l.Rr=function(t,s){t.length=s},l.Pr=function(t){t&&0!==t.length&&l.Rr(t,0)},l.Ar=function(i){if(i){for(let s=0;s<i.length;s++){let t=i[s];l.Rr(t,0)}l.Rr(i,0)}},l.Fr=function(s,i,e){const h=s.length;if(!((i|=0)<=h))for(let t=h;t<i;++t)s.push(e)},l.Dr=function(t,s,i){const e=t.length;(s|=0)<e?l.Rr(t,s):e<s&&l.Fr(t,s,i)},l.Or=function(t,s){l.Pr(t),l.Vh(t,s)},l.Vh=function(i,e){if(e.length<1e4)i.push(...e);else for(let t=0,s=e.length;t<s;++t)i.push(e[t])},l.Lr=function(i,e){if(!((e=Math.floor(e))<0||e>=i.length)){let s=i.length-1;for(let t=e;t<s;++t)i[t]=i[t+1];l.Rr(i,s)}},l.kr=function(t,s){let i=t.indexOf(s);0<=i&&t.splice(i,1)},l.Nr=function(s,i){let e=s.length;if(i.length!==e)return!1;for(let t=0;t<e;++t)if(s[t]!==i[t])return!1;return!0},l.Br=function(i,e){let h=[],n=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e(t)?h.push(t):(i[n]=t,++n)}return l.Rr(i,n),h},l.Wr=function(i,e){let t=i.length,h=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e.has(t)||(i[h++]=t)}return l.Rr(i,h),t-h},l.jr=function(t,s){return t===Math.floor(t)&&0<=t&&t<s.length},l.Vr=function(t,s){if(!l.jr(t,s))throw new RangeError("array index out of bounds")},l.Hr=function(t){return t.slice()},l.Ur=function(t,i){let e=[];for(let s of t)if(l.Ie(s)){let t=i(s);if(!t)throw new Error("missing clone");if(t.constructor!==s.constructor)throw new Error("object is not a clone");e.push(t)}else l.Oe(s)?e.push(l.Ur(s,i)):e.push(s);return e},l.zr=function(s){let i=[];for(let t of s)i.push(t.slice());return i},l.Jr=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},l.qr=function(t,s,i){const e=new Set;for(const h of t.values())s(h)&&(i?e.add(i(h)):e.add(h));return e},l.$r=function(t,s){return t.union?t.union(s):new Set([...t,...s])},l.Xr=function(t,s){for(const i of s)t.add(i);return t},l.first=function(s){for(let t of s)return t;return null},l.xor=function(t,s){return!t!=!s},l.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}},l.Yr=function(s){for(let t in s)if(s.hasOwnProperty(t))return!0;return!1},l.Zr=function(o,a){return o.length?new Promise((i,e)=>{let h=[],n=0,r=!1;for(let s=0,t=o.length;s<t;++s)h.push(void 0),o[s].then(t=>{r||(h[s]=t,++n===o.length?i(h):a(n,o.length))}).catch(t=>{r=!0,e(t)})}):Promise.resolve([])};let e=[],h=(l.Kr=function(t){e.push(t)},l.Qr=function(){let i=0;for(let s of e){let t=s();i+=t}return Math.floor(i)},1),n=new Map,r=new MessageChannel,o=(r.port2.onmessage=function(t){const s=t.data,i=n.get(s);n.delete(s),i&&i(performance.now())},l.io=function(t){const s=h++;return n.set(s,t),r.port1.postMessage(s),s},l.eo=function(t){n.delete(t)},l.ho=l.io,l.no=function(){return new Promise(t=>l.ho(t))},new Set);l.ro=function(s){const i=self.requestAnimationFrame(async t=>{await l.no(),o.has(i)&&(o.delete(i),s(t))});return o.add(i),i},l.ao=function(t){o.has(t)&&(self.cancelAnimationFrame(t),o.delete(t))}}{const n=self.Ds;n.lo=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},n.uo=function(t){return!n.lo(t)},n.co=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},n.fo=function(t,s){return fetch(t,s).then(t=>(n.co(t),t))},n.do=function(t){return n.fo(t).then(t=>t.text())},n.po=function(t){return n.fo(t).then(t=>t.json())},n.mo=function(t){return n.fo(t).then(t=>t.blob())},n.yo=function(t){return n.fo(t).then(t=>t.arrayBuffer())},n.wo=function(e){return new Promise((t,s)=>{const i=new Image;i.onload=()=>t(i),i.onerror=t=>s(t),i.src=e})},n.So=function(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsArrayBuffer(e)})},n.bo=function(e){return"function"==typeof e.text?e.text():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsText(e)})},n.vo=function(t){return n.bo(t).then(t=>JSON.parse(t))},n.Mo=async function(t,s){let i=URL.createObjectURL(t);try{const e=await n.wo(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof e.decode&&await e.decode(),e}finally{i&&URL.revokeObjectURL(i)}},n.xo=function(t,s){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,s);{const i=document.createElement("canvas");return i.width=t,i.height=s,i}},n.Go=function(s,i,e){if("number"!=typeof e&&(e=1),i=i||"image/png",e=n.an(e,0,1),s.convertToBlob)return s.convertToBlob({type:i,quality:e});if(s.toBlob)return new Promise(t=>s.toBlob(t,i,e));throw new Error("could not convert canvas to blob")},n.To=function(t,s,i){const e=n.xo(t.width,t.height),h=e.getContext("2d");return h.drawImage(t,0,0),n.Go(e,s,i)},n._o=function(t,s,i){if(n.Li.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>n.To(t,s,i));if(n.Li.ImageBitmap)return createImageBitmap(t).then(t=>n.To(t,s,i));{const e=n.xo(t.width,t.height),h=e.getContext("2d");return h.putImageData(t,0,0),n.Go(e,s,i)}},n.Io=function(t,s){t.clear();for(const i of s)t.add(i)},n.Co=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},n.Eo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},n.Ro=function s(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>s(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],s(t[1])])};{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}},n.Po=function s(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>s(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],s(t[1])]));{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}}return t},n.Ao=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const h of t)"-"===h?0<e&&(i=!0):i?(s+=h.toUpperCase(),i=!1):s+=h,++e;return s},n.Fo=function(t){return"object"==typeof t&&"function"==typeof t.next},n.Do=function(s,i){const e=[];if("function"==typeof i)for(let t=0;t<s;++t)e.push(i());else for(let t=0;t<s;++t)e.push(i);return e}}{let e=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},l=function(t,s,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};e,l;const u=self.Ds,Ct=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,Et=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;u.Oo=class{constructor(t,s,i,e){this.Lo=NaN,this.ko=NaN,this.No=NaN,this.Bo=NaN,this.Lo=0,this.ko=0,this.No=0,this.Bo=0,t instanceof u.Oo?this.set(t):this.Wo(t||0,s||0,i||0,e||0)}jo(t,s,i){return this.Lo=+t,this.ko=+s,this.No=+i,this.an(),this}Wo(t,s,i,e){return this.Lo=+t,this.ko=+s,this.No=+i,this.Bo=+e,this.an(),this}set(t){return this.Lo=t.Lo,this.ko=t.ko,this.No=t.No,this.Bo=t.Bo,this}T(t){return this.set(t)}add(t){this.Lo+=t.Lo,this.ko+=t.ko,this.No+=t.No,this.Bo+=t.Bo,this.an()}Vo(t,s,i,e=0){this.Lo+=+t,this.ko+=+s,this.No+=+i,this.Bo+=+e,this.an()}Ho(t){this.Uo(Math.max(this.Lo,t.Lo)-Math.min(this.Lo,t.Lo)),this.zo(Math.max(this.ko,t.ko)-Math.min(this.ko,t.ko)),this.Jo(Math.max(this.No,t.No)-Math.min(this.No,t.No)),this.qo(Math.max(this.Bo,t.Bo)-Math.min(this.Bo,t.Bo)),this.an()}$o(t){this.Lo=t.Lo,this.ko=t.ko,this.No=t.No}Uo(t){this.Lo=u.an(+t,0,1)}Xo(){return this.Lo}zo(t){this.ko=u.an(+t,0,1)}Yo(){return this.ko}Jo(t){this.No=u.an(+t,0,1)}Zo(){return this.No}qo(t){this.Bo=u.an(+t,0,1)}Ko(){return this.Bo}clone(){return u.Qh(u.Oo,this.Lo,this.ko,this.No,this.Bo)}toArray(){return[this.Lo,this.ko,this.No,this.Bo]}Qo(){return new Float64Array(this.toArray())}ta(t,s){t[s++]=this.Lo,t[s++]=this.ko,t[s++]=this.No,t[s]=this.Bo}ia(t,s){t[s++]=this.Lo,t[s++]=this.ko,t[s]=this.No}equals(t){return this.Lo===t.Lo&&this.ko===t.ko&&this.No===t.No&&this.Bo===t.Bo}ea(t){return this.Lo===t.Lo&&this.ko===t.ko&&this.No===t.No}na(t,s,i){return this.Lo===t&&this.ko===s&&this.No===i}ra(t,s,i,e){return this.Lo===t&&this.ko===s&&this.No===i&&this.Bo===e}oa(t,s){return t[s]===Math.fround(this.Lo)&&t[s+1]===Math.fround(this.ko)&&t[s+2]===Math.fround(this.No)&&t[s+3]===Math.fround(this.Bo)}aa(t,s){return t[s]===Math.fround(this.Lo)&&t[s+1]===Math.fround(this.ko)&&t[s+2]===Math.fround(this.No)}multiply(t){this.Lo*=t.Lo,this.ko*=t.ko,this.No*=t.No,this.Bo*=t.Bo}la(t){this.Lo*=t,this.ko*=t,this.No*=t,this.Bo*=t}ua(){return this.Lo*=this.Bo,this.ko*=this.Bo,this.No*=this.Bo,this}ca(){return this.Lo/=this.Bo,this.ko/=this.Bo,this.No/=this.Bo,this}an(){return this.Lo=u.an(this.Lo,0,1),this.ko=u.an(this.ko,0,1),this.No=u.an(this.No,0,1),this.Bo=u.an(this.Bo,0,1),this}fa(t){this.Lo=u.kn(t),this.ko=u.Nn(t),this.No=u.Bn(t),this.Bo=u.Wn(t)}da(t,s,i){const e=u.le(t)?t:this.Xo(),h=u.le(s)?s:this.Yo(),n=u.le(i)?i:this.Zo();return`rgb(${100*e}%, ${100*h}%, ${100*n}%)`}pa(t,s,i,e){const h=u.le(t)?t:this.Xo(),n=u.le(s)?s:this.Yo(),r=u.le(i)?i:this.Zo(),o=u.le(e)?e:this.Ko();return`rgba(${100*h}%, ${100*n}%, ${100*r}%, ${o})`}ma(){const t=Math.round(255*this.Xo()),s=Math.round(255*this.Yo()),i=Math.round(255*this.Zo());return"#"+e(t.toString(16))+e(s.toString(16))+e(i.toString(16))}ga(t){if("string"!=typeof t)return!1;let s,i,e;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Uo(s),isFinite(i)&&this.zo(i),isFinite(e)&&this.Jo(e),this.qo(1),!0}ya(){const t=Math.round(255*this.Xo()),s=Math.round(255*this.Yo()),i=Math.round(255*this.Zo());return t+`, ${s}, `+i}wa(){const t=Math.round(255*this.Xo()),s=Math.round(255*this.Yo()),i=Math.round(255*this.Zo());return[t,s,i]}Sa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Uo(i),isFinite(e)&&this.zo(e),isFinite(h)&&this.Jo(h),this.qo(1),!0}ba(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Uo(i),isFinite(e)&&this.zo(e),isFinite(h)&&this.Jo(h),this.qo(1),!0}Ma(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255,n=parseFloat(s[3].trim());return isFinite(i)&&this.Uo(i),isFinite(e)&&this.zo(e),isFinite(h)&&this.Jo(h),isFinite(n)&&this.qo(n),!0}xa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100,n=parseFloat(s[3].trim());return isFinite(i)&&this.Uo(i),isFinite(e)&&this.zo(e),isFinite(h)&&this.Jo(h),isFinite(n)&&this.qo(n),!0}Ga(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.ba(t):this.Sa(t);if(t.startsWith("rgba("))return t.includes("%")?this.xa(t):this.Ma(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.Ta(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.ba(t):4===s.length&&this.xa(t):3===s.length?this.Sa(t):4===s.length&&this.Ma(t)}}return this.ga(t)}toJSON(){return[this.Lo,this.ko,this.No,this.Bo]}_a(t,s,i,e){let h,n,r;if(t%=360,s=u.an(s,0,100),i=u.an(i,0,100),e=u.an(e,0,1),t/=360,i/=100,0==(s/=100))h=n=r=i;else{const o=i<.5?i*(1+s):i+s-i*s,a=2*i-o;h=l(a,o,t+1/3),n=l(a,o,t),r=l(a,o,t-1/3)}return this.Uo(h),this.zo(n),this.Jo(r),this.qo(e),this}Ta(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=Ct.exec(s),e=Et.exec(s);return i&&4===i.length?(this._a(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this._a(+i[1],+i[2],+i[3],+i[4]),0))}Ia(){const t=this.Lo,s=this.ko,i=this.No,e=this.Bo,h=u.Oo.Ca(t,s,i),n=u.Oo.Ea(t,s,i),r=u.Oo.Ra(t,s,i);return`hsla(${h}, ${n}%, ${r}%, ${e})`}Pa(){const t=this.Lo,s=this.ko,i=this.No;return[u.Oo.Ca(t,s,i),u.Oo.Ea(t,s,i),u.Oo.Ra(t,s,i),this.Bo]}Aa(t){!Array.isArray(t)||t.length<3||(this.Lo=t[0],this.ko=t[1],this.No=t[2],this.Bo=4<=t.length?t[3]:1)}set r(t){this.Uo(t)}get r(){return this.Xo()}set Fa(t){this.zo(t)}get Fa(){return this.Yo()}set b(t){this.Jo(t)}get b(){return this.Zo()}set a(t){this.qo(t)}get a(){return this.Ko()}Da(t,s){switch(t){case 0:this.Uo(s);break;case 1:this.zo(s);break;case 2:this.Jo(s);break;case 3:this.qo(s);break;default:throw new RangeError("invalid color index")}}Oa(t){switch(t){case 0:return this.Xo();case 1:return this.Yo();case 2:return this.Zo();case 3:return this.Ko();default:throw new RangeError("invalid color index")}}static La(t,s){let i,e;if(Array.isArray(t))(i=new u.Oo).Aa(t);else{if(!(t instanceof u.Oo))throw new Error("unexpected type");i=t}if(Array.isArray(s))(e=new u.Oo).Aa(s);else{if(!(s instanceof u.Oo))throw new Error("unexpected type");e=s}return i.equals(e)}static ka(t,s){return u.an(Math.max(t,s)-Math.min(t,s),0,1)}static Na(t,s){const i=new u.Oo;return i.Uo(Math.max(t.Lo,s.Lo)-Math.min(t.Lo,s.Lo)),i.zo(Math.max(t.ko,s.ko)-Math.min(t.ko,s.ko)),i.Jo(Math.max(t.No,s.No)-Math.min(t.No,s.No)),i.qo(Math.max(t.Bo,s.Bo)-Math.min(t.Bo,s.Bo)),i}static Ba(t,s){const i=new u.Oo(0,0,0,1);return i.Uo(Math.max(t.Lo,s.Lo)-Math.min(t.Lo,s.Lo)),i.zo(Math.max(t.ko,s.ko)-Math.min(t.ko,s.ko)),i.Jo(Math.max(t.No,s.No)-Math.min(t.No,s.No)),i}static Ca(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;let n=0;switch(e){case t:n=(s-i)/(e-h)+(s<i?6:0);break;case s:n=(i-t)/(e-h)+2;break;case i:n=(t-s)/(e-h)+4}return Math.round(n/6*360)}static Ea(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;const n=(e+h)/2,r=e-h,o=.5<n?r/(2-e-h):r/(e+h);return Math.round(100*o)}static Ra(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i),n=(e+h)/2;return e?Math.round(100*n):0}},u.Oo.Wa=Object.freeze(u.Qh(u.Oo,1,1,1,1)),u.Oo.ja=Object.freeze(u.Qh(u.Oo,0,0,0,1)),u.Oo.Va=Object.freeze(u.Qh(u.Oo,0,0,0,0))}{const Rt=self.Ds;Rt.Ha=class{constructor(t,s){this.Ua=0,this.za=0,t instanceof Rt.Ha?this.T(t):this.set(t||0,s||0)}set(t,s){this.Ua=+t,this.za=+s}T(t){this.Ua=t.Ua,this.za=t.za}equals(t){return this.Ua===t.Ua&&this.za===t.za}Ja(t,s){return this.Ua===t&&this.za===s}oa(t,s){return t[s]===Math.fround(this.Ua)&&t[s+1]===Math.fround(this.za)}qa(t){this.Ua=+t}$a(){return this.Ua}Xa(t){this.za=+t}Ya(){return this.za}toArray(){return[this.Ua,this.za]}Qo(){return new Float64Array(this.toArray())}ta(t,s){t[s++]=this.Ua,t[s]=this.za}offset(t,s){this.Ua+=+t,this.za+=+s}scale(t,s){this.Ua*=t,this.za*=s}Tt(t,s){this.Ua/=t,this.za/=s}round(){this.Ua=Math.round(this.Ua),this.za=Math.round(this.za)}floor(){this.Ua=Math.floor(this.Ua),this.za=Math.floor(this.za)}ceil(){this.Ua=Math.ceil(this.Ua),this.za=Math.ceil(this.za)}angle(){return Rt.mn(0,0,this.Ua,this.za)}Za(){return this.Ua*this.Ua+this.za*this.za}length(){return Math.hypot(this.Ua,this.za)}Ka(t,s){const i=this.Ua*s-this.za*t;this.za=this.za*s+this.Ua*t,this.Ua=i}rotate(t){0!==t&&this.Ka(Math.sin(t),Math.cos(t))}Qa(t,s,i){0===t||s===this.Ua&&i===this.za||(this.Ua-=s,this.za-=i,this.Ka(Math.sin(t),Math.cos(t)),this.Ua+=+s,this.za+=+i)}move(t,s){0!==s&&(this.Ua+=Math.cos(t)*s,this.za+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Ua/=t,this.za/=t)}an(t,s){this.Ua=Rt.an(this.Ua,t,s),this.za=Rt.an(this.za,t,s)}Pt(t){return this.Ua*t.Ua+this.za*t.za}reverse(){this.Ua=-this.Ua,this.za=-this.za}tl(){let t=this.Ua;return this.Ua=this.za,this.za=-t,this}}}{const Pt=self.Ds;Pt.Rect=class{constructor(t,s,i,e){this.sl=NaN,this.il=NaN,this.el=NaN,this.hl=NaN,this.sl=0,this.il=0,this.el=0,this.hl=0,t instanceof Pt.Rect?this.T(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.sl=+t,this.il=+s,this.el=+i,this.hl=+e}nl(t,s,i,e){s=+s,this.sl=t=+t,this.il=s,this.el=t+ +i,this.hl=s+ +e}T(t){this.sl=+t.sl,this.il=+t.il,this.el=+t.el,this.hl=+t.hl}clone(){return new Pt.Rect(this.sl,this.il,this.el,this.hl)}static rl(t,s){const i=new Pt.Rect;return i.ol(Math.min(t.sl,s.sl)),i.al(Math.min(t.il,s.il)),i.ll(Math.max(t.el,s.el)),i.ul(Math.max(t.hl,s.hl)),i}static cl(t){return new Pt.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.sl===t.sl&&this.il===t.il&&this.el===t.el&&this.hl===t.hl}fl(t,s,i,e){return this.sl===t&&this.il===s&&this.width()===i&&this.height()===e}oa(t,s){return t[s]===Math.fround(this.sl)&&t[s+1]===Math.fround(this.il)&&t[s+2]===Math.fround(this.el)&&t[s+3]===Math.fround(this.hl)}ol(t){this.sl=+t}dl(){return this.sl}al(t){this.il=+t}pl(){return this.il}ll(t){this.el=+t}ml(){return this.el}ul(t){this.hl=+t}gl(){return this.hl}toArray(){return[this.sl,this.il,this.el,this.hl]}Qo(){return new Float64Array(this.toArray())}yl(){return new DOMRect(this.sl,this.il,this.width(),this.height())}static wl(t){return Pt.Qh(Pt.Rect,t.left,t.top,t.right,t.bottom)}ta(t,s){t[s++]=this.sl,t[s++]=this.il,t[s++]=this.el,t[s]=this.hl}Sl(t,s){t[s++]=this.sl,t[s++]=this.il,t[s++]=this.el,t[s++]=this.il,t[s++]=this.el,t[s++]=this.hl,t[s++]=this.sl,t[s]=this.hl}bl(t,s,i){t[s++]=this.sl,t[s++]=this.il,t[s++]=i,t[s++]=this.el,t[s++]=this.il,t[s++]=i,t[s++]=this.el,t[s++]=this.hl,t[s++]=i,t[s++]=this.sl,t[s++]=this.hl,t[s]=i}width(){return this.el-this.sl}height(){return this.hl-this.il}vl(){return(this.sl+this.el)/2}Ml(){return(this.il+this.hl)/2}offset(t,s){s=+s,this.sl+=t=+t,this.il+=s,this.el+=t,this.hl+=s}offsetLeft(t){this.sl+=+t}offsetTop(t){this.il+=+t}xl(t){this.el+=+t}Gl(t){this.hl+=+t}Tl(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.il<this.hl?this.sl<this.el?this.hl=this.il+this.width():this.hl=this.il-this.width():this.sl<this.el?this.hl=this.il-this.width():this.hl=this.il+this.width()}_l(t,s){s=+s,this.sl-=t=+t,this.il-=s,this.el+=t,this.hl+=s}Il(t,s){s=+s,this.sl+=t=+t,this.il+=s,this.el-=t,this.hl-=s}multiply(t,s){this.sl*=t,this.il*=s,this.el*=t,this.hl*=s}Tt(t,s){this.sl/=t,this.il/=s,this.el/=t,this.hl/=s}Cl(t){this.sl=+t-this.sl,this.el=+t-this.el}El(t){this.il=+t-this.il,this.hl=+t-this.hl}Rl(t,s){const i=this.width(),e=this.height(),h=this.dl()+i*t,n=this.pl()+e*s;this.nl(h-e*s,n-i*t,e,i)}Pl(){const t=this.sl;this.sl=this.el,this.el=t}Al(){const t=this.il;this.il=this.hl,this.hl=t}Fl(t){const s=this.il;this.il=+t-this.hl,this.hl=+t-s}round(){this.sl=Math.round(this.sl),this.il=Math.round(this.il),this.el=Math.round(this.el),this.hl=Math.round(this.hl)}Dl(){this.sl=Math.ceil(this.sl),this.il=Math.ceil(this.il),this.el=Math.floor(this.el),this.hl=Math.floor(this.hl)}Ol(){this.sl=Math.floor(this.sl),this.il=Math.floor(this.il),this.el=Math.ceil(this.el),this.hl=Math.ceil(this.hl)}floor(){this.sl=Math.floor(this.sl),this.il=Math.floor(this.il),this.el=Math.floor(this.el),this.hl=Math.floor(this.hl)}ceil(){this.sl=Math.ceil(this.sl),this.il=Math.ceil(this.il),this.el=Math.ceil(this.el),this.hl=Math.ceil(this.hl)}an(t,s,i,e){this.sl=Math.max(this.sl,+t),this.il=Math.max(this.il,+s),this.el=Math.min(this.el,+i),this.hl=Math.min(this.hl,+e)}Ll(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.sl=Pt.an(this.sl,t,i),this.il=Pt.an(this.il,s,e),this.el=Pt.an(this.el,t,i),this.hl=Pt.an(this.hl,s,e)}normalize(){this.sl>this.el&&this.Pl(),this.il>this.hl&&this.Al()}kl(t){return!(t.el<this.sl||t.hl<this.il||t.sl>this.el||t.il>this.hl)}Nl(t,s,i){return!(t.el+s<this.sl||t.hl+i<this.il||t.sl+s>this.el||t.il+i>this.hl)}Bl(t,s){return t>=this.sl&&t<=this.el&&s>=this.il&&s<=this.hl}Wl(t){return t.sl>=this.sl&&t.il>=this.il&&t.el<=this.el&&t.hl<=this.hl}jl(t){t.sl<this.sl&&(this.sl=+t.sl),t.il<this.il&&(this.il=+t.il),t.el>this.el&&(this.el=+t.el),t.hl>this.hl&&(this.hl=+t.hl)}Vl(t){this.sl=Pt.Ft(t.sl,t.el,this.sl),this.il=Pt.Ft(t.il,t.hl,this.il),this.el=Pt.Ft(t.sl,t.el,this.el),this.hl=Pt.Ft(t.il,t.hl,this.hl)}}}{const At=self.Ds;At.Hl=class{constructor(t,s,i,e,h,n,r,o){this.Ul=NaN,this.zl=NaN,this.Jl=NaN,this.ql=NaN,this.$l=NaN,this.Xl=NaN,this.Yl=NaN,this.Zl=NaN,this.Ul=0,this.zl=0,this.Jl=0,this.ql=0,this.$l=0,this.Xl=0,this.Yl=0,this.Zl=0,t instanceof At.Hl?this.T(t):this.set(t||0,s||0,i||0,e||0,h||0,n||0,r||0,o||0)}set(t,s,i,e,h,n,r,o){this.Ul=+t,this.zl=+s,this.Jl=+i,this.ql=+e,this.$l=+h,this.Xl=+n,this.Yl=+r,this.Zl=+o}Kl(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}T(t){this.Ul=t.Ul,this.zl=t.zl,this.Jl=t.Jl,this.ql=t.ql,this.$l=t.$l,this.Xl=t.Xl,this.Yl=t.Yl,this.Zl=t.Zl}equals(t){return this.Ul===t.Ul&&this.zl===t.zl&&this.Jl===t.Jl&&this.ql===t.ql&&this.$l===t.$l&&this.Xl===t.Xl&&this.Yl===t.Yl&&this.Zl===t.Zl}Ql(t){this.Ul=+t}Jn(){return this.Ul}tu(t){this.zl=+t}qn(){return this.zl}su(t){this.Jl=+t}$n(){return this.Jl}iu(t){this.ql=+t}Xn(){return this.ql}eu(t){this.$l=+t}Yn(){return this.$l}hu(t){this.Xl=+t}Zn(){return this.Xl}nu(t){this.Yl=+t}Kn(){return this.Yl}ru(t){this.Zl=+t}Qn(){return this.Zl}ou(){return new DOMQuad(new DOMPoint(this.Ul,this.zl),new DOMPoint(this.Jl,this.ql),new DOMPoint(this.$l,this.Xl),new DOMPoint(this.Yl,this.Zl))}static au(t){return At.Qh(At.Hl,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Ul,this.zl,this.Jl,this.ql,this.$l,this.Xl,this.Yl,this.Zl]}Qo(){return new Float64Array(this.toArray())}ta(t,s){t[s++]=this.Ul,t[s++]=this.zl,t[s++]=this.Jl,t[s++]=this.ql,t[s++]=this.$l,t[s++]=this.Xl,t[s++]=this.Yl,t[s]=this.Zl}lu(t,s,i){t[s++]=this.Ul,t[s++]=this.zl,t[s++]=i,t[s++]=this.Jl,t[s++]=this.ql,t[s++]=i,t[s++]=this.$l,t[s++]=this.Xl,t[s++]=i,t[s++]=this.Yl,t[s++]=this.Zl,t[s]=i}offset(t,s){s=+s,this.Ul+=t=+t,this.zl+=s,this.Jl+=t,this.ql+=s,this.$l+=t,this.Xl+=s,this.Yl+=t,this.Zl+=s}round(){this.Ul=Math.round(this.Ul),this.zl=Math.round(this.zl),this.Jl=Math.round(this.Jl),this.ql=Math.round(this.ql),this.$l=Math.round(this.$l),this.Xl=Math.round(this.Xl),this.Yl=Math.round(this.Yl),this.Zl=Math.round(this.Zl)}floor(){this.Ul=Math.floor(this.Ul),this.zl=Math.floor(this.zl),this.Jl=Math.floor(this.Jl),this.ql=Math.floor(this.ql),this.$l=Math.floor(this.$l),this.Xl=Math.floor(this.Xl),this.Yl=Math.floor(this.Yl),this.Zl=Math.floor(this.Zl)}ceil(){this.Ul=Math.ceil(this.Ul),this.zl=Math.ceil(this.zl),this.Jl=Math.ceil(this.Jl),this.ql=Math.ceil(this.ql),this.$l=Math.ceil(this.$l),this.Xl=Math.ceil(this.Xl),this.Yl=Math.ceil(this.Yl),this.Zl=Math.ceil(this.Zl)}uu(t){this.Ul=t.sl,this.zl=t.il,this.Jl=t.el,this.ql=t.il,this.$l=t.el,this.Xl=t.hl,this.Yl=t.sl,this.Zl=t.hl}cu(t,s){0===s?this.uu(t):this.fu(t,Math.sin(s),Math.cos(s))}fu(t,s,i){const e=t.sl*s,h=t.il*s,n=t.el*s,r=t.hl*s,o=t.sl*i,a=t.il*i,l=t.el*i,u=t.hl*i;this.Ul=o-h,this.zl=a+e,this.Jl=l-h,this.ql=a+n,this.$l=l-r,this.Xl=u+n,this.Yl=o-r,this.Zl=u+e}du(t){t.set(Math.min(this.Ul,this.Jl,this.$l,this.Yl),Math.min(this.zl,this.ql,this.Xl,this.Zl),Math.max(this.Ul,this.Jl,this.$l,this.Yl),Math.max(this.zl,this.ql,this.Xl,this.Zl))}Bl(t,s){let i=this.Jl-this.Ul,e=this.ql-this.zl,h=this.$l-this.Ul,n=this.Xl-this.zl,r=t-this.Ul,o=s-this.zl,a=i*i+e*e,l=i*h+e*n,u=i*r+e*o,c=h*h+n*n,f=h*r+n*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return 0<=p&&0<m&&p+m<1||(m=((a=(i=this.Yl-this.Ul)*i+(e=this.Zl-this.zl)*e)*f-(l=i*h+e*n)*(u=i*r+e*o))*(d=1/(a*c-l*l)),0<=(p=(c*u-l*f)*d)&&0<m&&p+m<1)}vl(){return(this.Ul+this.Jl+this.$l+this.Yl)/4}Ml(){return(this.zl+this.ql+this.Xl+this.Zl)/4}pu(t,s,i,e){return!(!this.Bl(t,s)&&!this.Bl(i,e))||At.zn(t,s,i,e,this)}mu(t){let s=t.vl(),i=t.Ml();if(this.Bl(s,i))return!0;if(s=this.vl(),i=this.Ml(),t.Bl(s,i))return!0;const e=this.Ul,h=this.zl,n=this.Jl,r=this.ql,o=this.$l,a=this.Xl,l=this.Yl,u=this.Zl;return At.zn(e,h,n,r,t)||At.zn(n,r,o,a,t)||At.zn(o,a,l,u,t)||At.zn(l,u,e,h,t)}gu(){const t=this.Ul,s=this.zl;this.Ul=this.Jl,this.zl=this.ql,this.Jl=this.$l,this.ql=this.Xl,this.$l=this.Yl,this.Xl=this.Zl,this.Yl=t,this.Zl=s}yu(){this.wu(0,2),this.wu(1,3),this.wu(6,4),this.wu(7,5)}Su(){this.wu(0,6),this.wu(1,7),this.wu(2,4),this.wu(3,5)}bu(){this.wu(2,6),this.wu(3,7)}wu(t,s){const i=this.vu(t);this.Mu(t,this.vu(s)),this.Mu(s,i)}vu(t){switch(t){case 0:return this.Ul;case 1:return this.zl;case 2:return this.Jl;case 3:return this.ql;case 4:return this.$l;case 5:return this.Xl;case 6:return this.Yl;case 7:return this.Zl;default:throw new RangeError("invalid quad point index")}}Mu(t,s){switch(s=+s,t){case 0:this.Ul=s;break;case 1:this.zl=s;break;case 2:this.Jl=s;break;case 3:this.ql=s;break;case 4:this.$l=s;break;case 5:this.Xl=s;break;case 6:this.Yl=s;break;case 7:this.Zl=s;break;default:throw new RangeError("invalid quad point index")}}}}{const Ft=self.Ds,Dt=[0,0,1,0,1,1,0,1],Ot=Ft.Qh(Ft.Hl);Ft.xu=class extends Ft.Zh{constructor(t,s=!0){super(),t=t||Dt,this.Gu=Float64Array.from(t),this.Tu=new Ft.Rect,this._u=!0,this.Iu=s}tn(){}Cu(){return this.Gu}Eu(){return this.Gu.length/2}Ru(t){this.Gu.length===t.length?this.Gu.set(t):this.Gu=Float64Array.from(t),this._u=!0}Pu(){this.Ru(Dt)}T(t){this.Ru(t.Gu)}Au(){this._u=!0}Fu(){if(this._u){let i=this.Gu,e=i[0],h=i[1],n=e,r=h;for(let t=0,s=i.length;t<s;t+=2){const o=i[t],a=i[t+1];o<e&&(e=o),o>n&&(n=o),a<h&&(h=a),a>r&&(r=a)}this.Tu.set(e,h,n,r),this._u=!1}}uu(t,s,i){let e=this.Gu;8!==e.length&&(e=new Float64Array(8),this.Gu=e),e[0]=t.dl()-s,e[1]=t.pl()-i,e[2]=t.ml()-s,e[3]=t.pl()-i,e[4]=t.ml()-s,e[5]=t.gl()-i,e[6]=t.dl()-s,e[7]=t.gl()-i,this.Tu.T(t),0===s&&0===i||this.Tu.offset(-s,-i),this._u=!1}Du(t,s,i){Ot.T(t),Ot.offset(s,i),this.Ru(Ot.toArray()),this._u=!0}transform(t,s,i){let e=0,h=1;0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.Ou(t,s,e,h)}Ou(i,e,h,n){const r=this.Gu;for(let t=0,s=r.length;t<s;t+=2){const o=t+1,a=r[t]*i,l=r[o]*e;r[t]=a*n-l*h,r[o]=l*n+a*h}this._u=!0}offset(i,e){const h=this.Gu;for(let t=0,s=h.length;t<s;t+=2)h[t]+=i,h[t+1]+=e}Bl(i,e){const h=this.Gu;if(i===h[0]&&e===h[1])return!0;this.Fu();let t=this.Tu,n=t.dl()-110,r=t.pl()-101,o=t.ml()+131,a=t.gl()+120,l=0,u=0,c,f,d=0,p=0,m,g,y=(c=n<i?(l=n,i):(l=i,n),f=r<e?(u=r,e):(u=e,r),m=o<i?(d=o,i):(d=i,o),g=a<e?(p=a,e):(p=e,a),0),w=0;for(let t=0,s=h.length;t<s;t+=2){const S=(t+2)%s,b=h[t],v=h[t+1],M=h[S],x=h[1+S];Ft.Un(n,r,i,e,l,c,u,f,b,v,M,x)&&++y,Ft.Un(o,a,i,e,d,m,p,g,b,v,M,x)&&++w}return y%2==1||w%2==1}Lu(t,c,f){const d=t.Gu,p=this.Gu;if(this.Bl(d[0]+c,d[1]+f))return!0;if(t.Bl(p[0]-c,p[1]-f))return!0;for(let s=0,u=p.length;s<u;s+=2){let t=(s+2)%u,i=p[s],e=p[s+1],h=p[t],n=p[1+t],r=0,o=0,a,l;a=i<h?(r=i,h):(r=h,i),l=e<n?(o=e,n):(o=n,e);for(let t=0,s=d.length;t<s;t+=2){const m=(t+2)%s,g=d[t]+c,y=d[t+1]+f,w=d[m]+c,S=d[1+m]+f;if(Ft.Un(i,e,h,n,r,a,o,l,g,y,w,S))return!0}}return!1}pu(i,e,h,n,r,o){if(this.Bl(h-i,n-e))return!0;if(this.Bl(r-i,o-e))return!0;let a=0,l=0,u,c;u=h<r?(a=h,r):(a=r,h),c=n<o?(l=n,o):(l=o,n);const f=this.Gu;for(let t=0,s=f.length;t<s;t+=2){const d=(t+2)%s,p=f[t]+i,m=f[t+1]+e,g=f[d]+i,y=f[1+d]+e;if(Ft.Un(h,n,r,o,a,u,l,c,p,m,g,y))return!0}return!1}yu(i){const e=this.Gu;for(let t=0,s=e.length;t<s;t+=2)e[t]=2*i-e[t];this._u=!0}Su(i){const e=this.Gu;for(let t=0,s=e.length;t<s;t+=2){const h=t+1;e[h]=2*i-e[h]}this._u=!0}bu(){const i=this.Gu;for(let t=0,s=i.length;t<s;t+=2){const e=t+1,h=i[t];i[t]=i[e],i[e]=h}this._u=!0}ku(){let i=this.Gu,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t];return e/this.Eu()}Nu(){let i=this.Gu,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t+1];return e/this.Eu()}Bu(){return this.Gu}Wu(){return this.Eu()}ju(){return this.Iu}}}{const Lt=self.Ds;Lt.Vu=class extends Lt.Zh{constructor(t){if(super(),this.Hu=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}tn(){this.Uu(),this.Hu=null}zu(){return 0===this.Hu.size}Uu(){const t=this.Hu;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){let e=this.Hu,h=e.get(t);h||(h=new Map,e.set(t,h)),h.set(s,i)}Ks(t,s){const i=this.Hu.get(t);return i&&i.get(s)}Zs(t,s){const i=this.Hu.get(t);return!!i&&i.has(s)}Ju(t,s){const i=this.Hu,e=i.get(t);if(!e)return!1;const h=e.delete(s);return h&&0===e.size&&i.delete(t),h}qu(t){const s=this.Hu,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[e,h]of s.entries())h.delete(t)&&0===h.size&&s.delete(e)}$u(){let t=0;for(const s of this.Hu.values())t+=s.size;return t}*values(){for(const t of this.Hu.values())yield*t.values()}*Xu(){for(const[t,s]of this.Hu.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.Hu.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const kt=self.Ds;kt.Yu=class extends kt.Zh{constructor(){super(),this.Zu=new Set,this.Ku=[],this.Qu=!1}tn(){this.Uu()}Uu(){this.Zu.clear(),kt.Pr(this.Ku),this.Qu=!1}tc(t){this.Zu.has(t)||(this.Zu.add(t),this.Qu)||this.Ku.push(t)}Zs(t){return this.Zu.has(t)}Ju(t){this.Zu.delete(t)&&(this.Qu=!0)}$u(){return this.Zu.size}zu(){return 0===this.Zu.size}sc(){return this.Qu&&(this.ic(),this.Qu=!1),this.Ku}ic(){const t=this.Ku;kt.Pr(t);for(const s of this.Zu)t.push(s)}}}{const Nt=self.Ds,Bt=new Map,Wt=new Map,jt=new Map,Vt=new Map,Ht=new Map,Ut=new Map,zt=new Map,Jt=new Map,qt=new Map,$t=(qt.set("linear","noease"),qt.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),Xt=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Yt=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),Zt=(self.ec=class ns{constructor(){}static hc(){return"default"}static nc(){return"noease"}static rc(t){return Yt.get(t)}static oc(s,...i){this.ac();let t,e=(s?(jt.has(s)||jt.set(s,new Map),[...(t=jt.get(s)).keys()].filter(t=>!ns.lc(t,s)||ns.lc(t,s).transition.IsForAnyPurpose())):[...(t=Ht).keys()]).sort();return[...Wt.keys()].concat(e).filter(t=>!i.includes(t))}static uc(){this.ac();const t=[...Ht.keys()];return t.sort(),[...Wt.keys()].concat(t)}static cc(){this.ac();const t=[...Ht.keys()];return t.sort(),t}static fc(t){for(const s of $t){const i=self.lang("ui.bars.timeline.eases."+s);if(i===t)return!0}for(const e of Xt){const h=self.lang("ui.bars.timeline.short-eases."+e);if(h===t)return!0}}static dc(t){return this.ac(),[...Wt.keys()].includes(t)}static mc(t){const s=qt.get(t);return s?Bt.get(s):ns.dc(t)?Bt.get(t):zt.has(t)?zt.get(t):void 0}static yc(t){return this.ac(),Jt.get(t)}static wc(t,s){this.ac();const i=ns.mc(t);if(i)return i;if(s)return jt.get(s).get(t);throw new Error("missing ease function")}static lc(t,s){this.ac();const i=Vt.get(s);if(i)return i.get(t)}static Sc(t,s){this.ac();const i=ns.mc(t);return!!i||!!jt.get(s).get(t)}static vc(t){this.ac();const s=ns.mc(t);return s||Ht.get(t)}static Mc(t){return this.ac(),Ut.get(t)}static xc(t){this.ac();const s=this.uc();return s[t]}static Gc(t,s){this.ac();const i=this.oc(s);return i.indexOf(t)}static Tc(t){return this.Gc(t)}static ac(){0===Bt.size&&(this._c("default",()=>{}),this._c("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this._c("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this._c("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this._c("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this._c("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this._c("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this._c("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this._c("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this._c("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this._c("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this._c("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this._c("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this._c("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this._c("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this._c("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this._c("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this._c("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this._c("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this._c("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this._c("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this._c("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this._c("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this._c("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this._c("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this._c("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this._c("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this._c("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this._c("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this._c("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this._c("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this._c("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Ic("cubicbezier",this.Cc),this.Ic("spline",this.Ec))}static _c(t,s,i=!1){if("function"==typeof s)ns.Rc(t,s,"predefined");else{if(!Nt.Oe(s))throw new Error("unexpected arguments");if(self.BuiltInTransition){const h=Nt.Qh(self.BuiltInTransition,t,i);h.SetFromJson(s),ns.Rc(t,(t,s,i,e)=>h.Pc(t,s,i,e),"predefined"),Jt.set(t,h)}else{const n=Nt.Qh(Nt.Ac,[t,s.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);n.Fc(i),ns.Rc(t,(t,s,i,e)=>n.Pc(t,s,i,e),"predefined")}}}static Ic(t,s){ns.Rc(t,s,"private")}static Dc(t,s,i,e){this.ac(),ns.Rc(t,s,"custom",i,e)}static Oc(t,s){if(!this.dc(t)&&![...zt.keys()].includes(t)){const i=jt.get(s),e=(i&&i.delete(t),Vt.get(s));e&&e.delete(t)}}static Rc(t,s,i,e,h){switch(i){case"predefined":Bt.set(t,s),Wt.set(t,s);break;case"custom":if(e){jt.has(e)||jt.set(e,new Map),Vt.has(e)||Vt.set(e,new Map);const n=jt.get(e),r=(n.set(t,s),Vt.get(e));r.set(t,h)}else Ht.set(t,s),Ut.set(t,h);break;case"private":Bt.set(t,s),zt.set(t,s);break;default:throw new Error("unexpected ease mode")}}static Lc(t,s,i,e){return 0===e?s:i*t/e+s}static Cc(t,s,i,e,h){const n=s,r=3*t*(i-s),o=3*t**2*(s+e-2*i),a=t**3*(h-s+3*i-3*e);return n+r+o+a}static Ec(t,s,i,e,h,n,r,o,a,l){if(e===h&&n===r)return t;const u=hs(t,s,e,n,o,l),c=Qt(i,h,r,a),f=ts(i,h,r,a),d=ss(i,h,r,a);return is(u,c,f,d)}static kc(t,s,i,e){const h=[],n=Qt(t,s,i,e),r=ts(t,s,i,e),o=ss(t,s,i,e);for(let t=0;t<Zt;++t){const a=is(t*Kt,n,r,o);h.push(a)}return h}},11),Kt=1/(Zt-1),Qt=(t,s,i,e)=>e-3*i+3*s-t,ts=(t,s,i,e)=>3*i-6*s+3*t,ss=(t,s,i,e)=>3*(s-t),is=(t,s,i,e)=>((s*t+i)*t+e)*t,es=(t,s,i,e)=>3*s*t*t+2*i*t+e,hs=(r,t,s,i,e,h)=>{if(1==r)return 1;let o=0,n=1,a=h[n],l=Zt-1;for(Zt;n!=l&&a<=r;)n++,a=h[n],o+=Kt;n--;let u=(r-(a=h[n]))/(h[n+1]-a),c=o+u*Kt,f=Qt(t,s,i,e),d=ts(t,s,i,e),p=ss(t,s,i,e),m=es(c,f,d,p);if(0===m)return c;if(.01<=m){for(let t=0;t<4;++t){const g=is(c,f,d,p)-r,y=es(c,f,d,p);c-=g/y}return c}{let s=o,i=o+Kt,e=0,h,n;do{c=s+(i-s)/2;let t=is(c,f,d,p)-r;0<t?i=c:s=c,h=1e-7<Math.abs(t),n=++e<10}while(h&&n);return c}}}{let o=function(t){rs.Se(t)};o;const rs=self.Ds;rs.Nc=class{constructor(t){this.Bc=[],this.nn=t||"",this.Wc=0}tn(){this.Uu(),this.Bc=null}jc(){return this.nn}Uu(){rs.Ar(this.Bc),this.Wc=0}Vc(){return this.Wc}Hc(t=Math.random()*this.Vc()){let s=0;for(const[i,e]of this.Bc)if(t<(s+=i))return e;return 0}Uc(t,s){o(s),this.Wc+=t,this.Bc.push([t,s])}zc(s,i){o(i);const e=0===s;for(let t=0;t<this.Bc.length;t++){const h=this.Bc[t],n=e||h[0]===s,r=h[1]===i;if(n&&r){this.Bc.splice(t,1),this.Wc-=h[0];break}}}Jc(){return JSON.stringify(this.Bc)}static qc(t,s){const i=new rs.Nc(s),e=JSON.parse(t);for(const h of e){const n=h[0],r=h[1];i.Uc(n,r)}return i}}}{let t=self.Ds,i=0;t.$c=class{constructor(t,s){this.Xc=t,this.Yc=s,this.Zc=i++,this.Xc.Kc("runtime","screen-reader-text",{type:"create",id:this.Zc,text:this.Yc})}tn(){this.Xc.Kc("runtime","screen-reader-text",{type:"release",id:this.Zc}),this.Xc=null,this.Yc="",this.Zc=-1}Qc(t){this.Yc!==t&&(this.Yc=t,this.Xc.Kc("runtime","screen-reader-text",{type:"update",id:this.Zc,text:this.Yc}))}}}{const os=self.Ds;os.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.tf=!1,this.if=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.if)throw new Error(`cannot stop async event '${this.type}' propagation`);this.tf=!0}}}{const as=self.Ds;as.Event.ef=class extends as.Zh{constructor(t){super(),this.hf=t,this.nf=[],this.rf=new Set,this.lf=[],this.uf=new Set,this.cf=0,this.ff=[]}tn(){0<this.cf||(as.Pr(this.nf),this.rf.clear(),as.Pr(this.lf),this.uf.clear(),as.Pr(this.ff),as.tn(this))}df(t,s){this.pf()?this.ff.push({mf:"add",gf:t,capture:s}):s?this.rf.has(t)||(this.nf.push(t),this.rf.add(t)):this.uf.has(t)||(this.lf.push(t),this.uf.add(t))}yf(t,s){this.pf()?this.ff.push({mf:"remove",gf:t,capture:s}):s?this.rf.has(t)&&(this.rf.delete(t),as.kr(this.nf,t)):this.uf.has(t)&&(this.uf.delete(t),as.kr(this.lf,t))}wf(){return!this.nf.length&&!this.lf.length}pf(){return 0<this.cf}Sf(){const t=new Set,s=new Set;for(const i of this.ff)if("add"===i.mf)this.df(i.gf,i.capture),(i.capture?s:t).delete(i.gf);else{if("remove"!==i.mf)throw new Error("invalid op");(i.capture?(this.rf.delete(i.gf),s):(this.uf.delete(i.gf),t)).add(i.gf)}as.Wr(this.lf,t),as.Wr(this.nf,s),as.Pr(this.ff)}bf(i){this.vf();let e=!1;for(let t=0,s=this.nf.length;t<s;++t)if(this.nf[t](i),i.tf){e=!0;break}if(!e)for(let t=0,s=this.lf.length;t<s&&(this.lf[t](i),!i.tf);++t);return this.Mf(),!i.defaultPrevented}xf(i){this.vf();for(let t=0,s=this.nf.length;t<s;++t)this.nf[t](i);for(let t=0,s=this.lf.length;t<s;++t)this.lf[t](i);return this.Mf(),!0}vf(){this.cf++}Mf(){this.cf--,0===this.cf&&0<this.ff.length&&this.Sf()}Gf(t){t?this.vf():this.Mf()}Tf(i){let e=[];for(let s=0,t=this.nf.length;s<t;++s){let t=this.nf[s];e.push(as._f(()=>t(i)))}for(let s=0,t=this.lf.length;s<t;++s){let t=this.lf[s];e.push(as._f(()=>t(i)))}return Promise.all(e).then(()=>!i.defaultPrevented)}If(i){const e=[];this.vf();for(let t=0,s=this.nf.length;t<s;++t){const h=this.nf[t](i);h instanceof Promise&&e.push(h)}for(let t=0,s=this.lf.length;t<s;++t){const n=this.lf[t](i);n instanceof Promise&&e.push(n)}return this.Mf(),e.length?Promise.all(e).then(()=>!i.defaultPrevented):!i.defaultPrevented}async Cf(t){return this.If(t)}async Ef(i){this.vf();for(let t=0,s=this.nf.length;t<s;++t){const e=this.nf[t](i);e instanceof Promise&&await e}for(let t=0,s=this.lf.length;t<s;++t){const h=this.lf[t](i);h instanceof Promise&&await h}return this.Mf(),!i.defaultPrevented}*Rf(i){this.vf();for(let t=0,s=this.nf.length;t<s;++t){const e=this.nf[t](i);as.Fo(e)&&(yield*e)}for(let t=0,s=this.lf.length;t<s;++t){const h=this.lf[t](i);as.Fo(h)&&(yield*h)}this.Mf()}}}{const ls=self.Ds;ls.Event.Pf=class extends ls.Zh{constructor(){super(),this.Af=new Map,this.Ff=!1}tn(){if(this.Ff)throw new Error("already released");this.Df(),this.Ff=!0,ls.tn(this)}sn(){return this.Ff}Df(){if(this.Af){for(let t of this.Af.values())t.tn();this.Af.clear()}}Of(t,s){let i=this.Af.get(t);return i||(s?(i=ls.Qh(ls.Event.ef,t),this.Af.set(t,i),i):null)}Lf(t){return this.Af.has(t)}addEventListener(t,s,i){let e=this.Of(t,!0);e.df(s,!!i)}removeEventListener(t,s,i){let e=this.Of(t,!1);e&&(e.yf(s,!!i),e.wf())&&this.Af.delete(t)}dispatchEvent(t){const s=this.Of(t.type,!1);return!s||(t.cancelable?s.bf(t):s.xf(t))}kf(t){const s=this.Of(t.type,!1);return s?(t.if=!0,s.Tf(t)):Promise.resolve(!0)}async Nf(t){const s=this.Of(t.type,!1);if(!s)return!0;this.Af.delete(t.type),t.if=!0;const i=await s.Tf(t);return s.tn(),i}async Bf(t){const s=this.Of(t.type,!1);return!s||s.Cf(t)}Wf(t){const s=this.Of(t.type,!1);return!s||s.If(t)}async jf(t){const s=this.Of(t.type,!1);return!s||s.Ef(t)}Vf(t){const s=this.Of(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.Rf(t)}Gf(t){for(const s of this.Af.values())s.Gf(t)}}}{let n=function(t){c=l&&0===f?requestIdleCallback(s,{timeout:i}):setTimeout(s,0<f?1:t)},s=function(h){if(c=-1,u.length){let i=performance.now(),e=i,t=0,s;for(;r(u.shift()),e=performance.now(),++t,s=(e-i)/t*1.1,u.length&&(l&&0===f&&void 0!==h?s<h.timeRemaining():e-i+s<o););if(-1===c&&u.length){let t=e-i,s=Math.max(a-t,4);n(s)}}},r=function(s){let t;try{t=s.gf()}catch(t){return void s.reject(t)}s.resolve(t)},t=(n,s,r,self.Ds),o=12,a=16,i=35,l="undefined"!=typeof requestIdleCallback,u=[],c=-1,f=0,h=t.si.Zs("disable-asyncify");h&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),t._f=function(i){let e=null;return t.isDebug&&(e=t.oe()),new Promise((t,s)=>{u.push({gf:i,resolve:t,reject:s,stack:e}),h?r(u.pop()):-1===c&&n(a)})},t._f.Hf=function(t){if(t)++f;else if(--f<0)throw new Error("already turned off high throughput mode")}}{let t=function(){n=-1},s=function(){r=-1,o=-1;let i=Date.now();for(let s of a)if(s.Uf(i)){let t=s.zf();(-1===o||t<o)&&(o=t)}else a.delete(s);if(-1!==o){let t=Math.max(o-i+h,e);r=self.setTimeout(s,t)}},i=(t,s,self.Ds),e=1e3,h=100,n=-1,r=(i.Jf=function(){return-1===n&&(n=Date.now(),self.setTimeout(t,16)),n},-1),o=-1,a=new Set;i.qf=class{constructor(t,s){this.$f=t,this.Xf=1e3*s,this.Yf=0,this.Zf=!1}Kf(){let t=i.Jf();this.Yf=t+this.Xf,this.Zf||(a.add(this),this.Zf=!0),-1===r?(o=this.Yf,r=self.setTimeout(s,this.Xf+h)):this.Yf<o&&o>t+e&&(self.clearTimeout(r),o=this.Yf,r=self.setTimeout(s,this.Xf+h))}Uf(t){return!(t>=this.Yf)||(this.$f()?(this.Yf=t+this.Xf,!0):this.Zf=!1)}zf(){return this.Yf}Qf(){this.Zf&&(a.delete(this),this.Zf=!1,0===a.size)&&-1!==r&&(self.clearTimeout(r),r=-1,o=-1)}tn(){this.Qf(),this.$f=null}}}{const us=self.Ds;us.t0=class cs{constructor(t){this.s0=!1,this.i0=t}e0(){this.s0||(this.s0=!0,this.i0&&(this.i0(),this.i0=null))}h0(){return this.s0}tn(){this.e0()}static tn(t){return new cs(()=>t.tn())}static n0(s,i,e,h,t){if(null==h)h=!1;else if("boolean"!=typeof h&&"object"!=typeof h)throw new TypeError("invalid event listener options");if(t&&(e=e.bind(t)),i.includes(" ")){i=i.split(" ");const n=new us.r0;for(let t of i)s.addEventListener(t,e,h),n.tc(us.Qh(us.t0,()=>s.removeEventListener(t,e,h)));return n}return s.addEventListener(i,e,h),us.Qh(us.t0,()=>s.removeEventListener(i,e,h))}},us.o0=class extends us.t0{a0(t){this.i0=t}},us.r0=class extends us.t0{constructor(...s){super(),this.l0=new Set;for(let t of s)this.tc(t)}tc(...s){if(this.s0)throw new Error("already disposed");for(let t of s)this.l0.add(t)}u0(t){if(this.s0)throw new Error("already disposed");this.l0.delete(t)}c0(){if(this.s0)throw new Error("already disposed");if(this.l0){for(let t of this.l0)t.e0();this.l0.clear()}}h0(){return this.s0}e0(){if(this.s0)throw new Error("already disposed");this.s0=!0;for(let t of this.l0)t.e0();this.l0.clear(),this.l0=null}tn(){this.e0()}}}{const fs=self.Ds;fs.f0=class extends fs.Zh{constructor(){super(),this.d0=0,this.za=0,this.p0=0,this.m0=0}tc(t){this.za=(t=+t)-this.d0,this.p0=this.m0+this.za,this.d0=this.p0-this.m0-this.za,this.m0=this.p0}g0(t){this.m0-=+t}Ks(){return this.m0}Kf(){this.d0=0,this.za=0,this.p0=0,this.m0=0}Set(t){this.d0=0,this.za=0,this.p0=0,this.m0=+t}y0(t){this.d0=t.d0,this.za=t.za,this.p0=t.p0,this.m0=t.m0}tn(){}}}{const ds=self.Ds,r={};r.w0=function(t){this.S0=t,this.right=this.S0.b0,this.left=this.S0.b0,this.parent=null,this.color=!1,this.key=null},r.v0=function(t){this.size=0,this.b0=new r.w0(this),this.b0.color=!1,this.root=this.b0,this.root.parent=this.b0,this.compare=t||this.M0},r.v0.prototype.M0=function(t,s){return t<s?-1:s<t?1:0},r.v0.prototype.clone=function(){var t=new r.v0(this.compare);return t.x0(this),t},r.v0.prototype.clear=function(){this.size=0,this.b0=new r.w0(this),this.b0.color=!1,this.root=this.b0,this.root.parent=this.b0},r.v0.prototype.G0=function(t){var s=t.right;t.right=s.left,s.left!=this.b0&&(s.left.parent=t),s.parent=t.parent,t.parent==this.b0?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,(s.left=t).parent=s},r.v0.prototype.T0=function(t){var s=t.left;t.left=s.right,s.right!=this.b0&&(s.right.parent=t),s.parent=t.parent,t.parent==this.b0?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,(s.right=t).parent=s},r.v0.prototype._0=function(t){if(this.contains(t))this.I0(t).key=t;else{for(var s=new r.w0(this),i=(s.key=t,this.b0),e=this.root;e!=this.b0;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;(s.parent=i)==this.b0?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.b0,s.right=this.b0,s.color=!0,this.C0(s),this.size++}},r.v0.prototype.C0=function(t){for(;t!=this.b0&&t!=this.root&&1==t.parent.color;){var s;t.parent==t.parent.parent.left?1==(s=t.parent.parent.right).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.G0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.b0&&this.T0(t.parent.parent)):1==(s=t.parent.parent.left).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.T0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.b0&&this.G0(t.parent.parent))}this.root.color=!1},r.v0.prototype.E0=function(t){var s=t.left==this.b0||t.right==this.b0?t:this.R0(t),i=s.left!=this.b0?s.left:s.right;i.parent=s.parent,s.parent==this.b0?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.P0(i),this.size--},r.v0.prototype.P0=function(t){for(;t!=this.root&&0==t.color;){var s;t=t==t.parent.left?(1==(s=t.parent.right).color&&(s.color=!1,t.parent.color=!0,this.G0(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=!0,t.parent):(0==s.right.color&&(s.left.color=!1,s.color=!0,this.T0(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.G0(t.parent),this.root)):(1==(s=t.parent.left).color&&(s.color=!1,t.parent.color=!0,this.T0(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=!0,t.parent):(0==s.left.color&&(s.right.color=!1,s.color=!0,this.G0(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.T0(t.parent),this.root))}t.color=!1},r.v0.prototype.remove=function(t){var s;return(t=this.I0(t))!=this.b0?(s=t.key,this.E0(t),s):null},r.v0.prototype.A0=function(t,s){this.remove(s)},r.v0.prototype.min=function(t){for(;t.left!=this.b0;)t=t.left;return t},r.v0.prototype.max=function(t){for(;t.right!=this.b0;)t=t.right;return t},r.v0.prototype.R0=function(t){if(t.right!=this.b0)return this.min(t.right);for(var s=t.parent;s!=this.b0&&t==s.right;)s=(t=s).parent;return s},r.v0.prototype.F0=function(t){if(t.left!=this.b0)return this.max(t.left);for(var s=t.parent;s!=this.b0&&t==s.left;)s=(t=s).parent;return s},r.v0.prototype.D0=function(t){if(0<this.size){var s=this.I0(t);if(s==this.b0)return null;if(s.right!=this.b0)return this.min(s.right).key;for(var i=s.parent;i!=this.b0&&s==i.right;)i=(s=i).parent;return i!=this.b0?i.key:null}return null},r.v0.prototype.O0=function(t){if(0<this.size){var s=this.I0(t);if(s==this.b0)return null;if(s.left!=this.b0)return this.max(s.left).key;for(var i=s.parent;i!=this.b0&&s==i.left;)i=(s=i).parent;return i!=this.b0?i.key:null}return null},r.v0.prototype.L0=function(){return this.min(this.root).key},r.v0.prototype.k0=function(){return this.max(this.root).key},r.v0.prototype.I0=function(t){for(var s=this.root;s!=this.b0&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},r.v0.prototype.contains=function(t){return null!=this.I0(t).key},r.v0.prototype.getValues=function(){var s=[];return this.forEach(function(t){s.push(t)}),s},r.v0.prototype.x0=function(t){if("array"==r.typeOf(t))for(var s=0;s<t.length;s++)this._0(t[s]);else if("function"==r.typeOf(t.forEach))t.forEach(this._0,this);else if("function"==r.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this._0(i[s]);else if("object"==r.typeOf(t))for(var e in t)this._0(t[e])},r.v0.prototype.N0=function(t){if("array"==r.typeOf(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==r.typeOf(t.forEach))t.forEach(this.A0,this);else if("function"==r.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.remove(i[s]);else if("object"==r.typeOf(t))for(var e in t)this.remove(t[e])},r.v0.prototype.B0=function(t){if("array"==r.typeOf(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==r.typeOf(t.forEach))return t.every(this.contains,this);if("function"==r.typeOf(t.getValues)){for(var i=t.getValues(),s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==r.typeOf(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},r.v0.prototype.range=function(t,s){var i=[];return this.W0(function(t){i.push(t)},t,s),i},r.v0.prototype.j0=function(t,s){if(!this.V0())for(var i=this.min(this.root);i!=this.b0;){if(t.call(s,i.key,this))return;i=this.R0(i)}},r.v0.prototype.H0=function(t,s,i){if(!this.V0())for(var e=this.I0(s);e!=this.b0;){if(t.call(i,e.key,this))return;e=this.R0(e)}},r.v0.prototype.U0=function(t,s,i){if(!this.V0())for(var e=this.min(this.root),h=this.I0(s);e!=h;){if(t.call(i,e.key,this))return;e=this.R0(e)}},r.v0.prototype.W0=function(t,s,i,e){if(!this.V0())for(var h=this.I0(s),n=this.I0(i);h!=n;){if(t.call(e,h.key,this))return;h=this.R0(h)}},r.v0.prototype.z0=function(t,s){if(!this.V0())for(var i=this.max(this.root);i!=this.b0;){if(t.call(s,i.key,this))return;i=this.F0(i)}},r.v0.prototype.forEach=function(t,s){if(!this.V0())for(var i=this.min(this.root);i!=this.b0;i=this.R0(i))t.call(s,i.key,i.key,this)},r.v0.prototype.some=function(t,s){if(!this.V0())for(var i=this.min(this.root);i!=this.b0;i=this.R0(i))if(t.call(s,i.key,i.key,this))return!0;return!1},r.v0.prototype.every=function(t,s){if(this.V0())return!1;for(var i=this.min(this.root);i!=this.b0;i=this.R0(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},r.v0.prototype.map=function(t,s){var i=[];if(!this.V0())for(var e=this.min(this.root);e!=this.b0;e=this.R0(e))i.push(t.call(s,e.key,e.key,this));return i},r.v0.prototype.filter=function(t,s){var i=[];if(!this.V0())for(var e=this.min(this.root);e!=this.b0;e=this.R0(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},r.v0.prototype.getCount=function(){return this.size},r.v0.prototype.V0=function(){return 0==this.size},r.v0.prototype.re=function(t){var s=r.getCount(t);if(this.getCount()>s)return!1;var i=0;if(this.V0())return!0;for(var e=this.min(this.root);e!=this.b0;e=this.R0(e))r.contains.call(t,t,e.key)&&i++;return i==this.getCount()},r.v0.prototype.J0=function(t){var s=new r.v0(this.compare);if(!this.V0())for(var i=this.min(this.root);i!=this.b0;i=this.R0(i))t.contains.call(t,i.key,i.key,this)&&s._0(i.key);return s},ds.v0=class extends ds.Zh{constructor(t){super(),this.q0=new r.v0(t),this.$0=!1,this.X0=new Set,this.Y0=new Set}tc(t){this.$0?this.q0.contains(t)?this.Y0.delete(t):this.X0.add(t):this.q0._0(t)}u0(t){this.$0?this.q0.contains(t)?this.Y0.add(t):this.X0.delete(t):this.q0.remove(t)}Zs(t){return this.$0?!!this.X0.has(t)||!this.Y0.has(t)&&this.q0.contains(t):this.q0.contains(t)}Uu(){this.q0.clear(),this.X0.clear(),this.Y0.clear()}toArray(){if(this.$0)throw new Error("cannot be used in queueing mode");return this.q0.getValues()}$u(){return this.q0.getCount()+this.X0.size-this.Y0.size}zu(){return 0===this.$u()}Z0(){if(this.zu())throw new Error("empty set");if(this.$0)throw new Error("cannot be used in queueing mode");const t=this.q0,s=t.min(t.root);return s.key}K0(){if(this.zu())throw new Error("empty set");if(this.$0)throw new Error("cannot be used in queueing mode");const t=this.Z0();return this.u0(t),t}Q0(t){if(this.$0!==(t=!!t)&&!(this.$0=t)){for(const s of this.Y0)this.q0.remove(s);this.Y0.clear();for(const i of this.X0)this.q0._0(i);this.X0.clear()}}t1(t){this.q0.forEach(t)}*values(){if(!this.zu()){const s=this.q0;for(let t=s.min(s.root);t!=s.b0;t=s.R0(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const ps=self.Ds;ps.s1=class{constructor(t=ps.hardwareConcurrency){this.i1=t,this.e1=[],this.h1=0}tc(i){return new Promise((t,s)=>{this.e1.push({gf:i,resolve:t,reject:s}),this.n1()})}o1(i){for(let t=0,s=this.e1.length;t<s;++t)if(this.e1[t].gf===i)return t;return-1}a1(t,s){const i=this.o1(t);if(-1===i)throw new Error("cannot find promise to resolve");this.e1[i].resolve(s),this.e1.splice(i,1)}l1(t,s){const i=this.o1(t);if(-1===i)throw new Error("cannot find promise to reject");this.e1[i].reject(s),this.e1.splice(i,1)}async n1(){if(this.e1.length&&!(this.h1>=this.i1)){this.h1++;const s=this.e1.shift();try{const t=await s.gf();s.resolve(t)}catch(t){s.reject(t)}this.h1--,this.n1()}}static async u1(t,s){let i=[],e=!1,h=[];for(;t--;)h.push((async()=>{let t;for(;t=s.pop();){if(e)return;try{i.push(await t())}catch(t){throw e=!0,t}}})());return await Promise.all(h),i}}}{const ms=self.Ds;ms.c1=class{constructor(t,s,i){this.$f=t,this.f1=s,this.d1=i||2*s,this.m1=-1,this.g1=-1/0,this.w1=()=>this.S1(),this.b1=!1,this.v1=!1,this.M1=null}G1(t){this.v1=!!t}T1(){return void 0!==ms.Battery&&ms.Battery.IsOnBatteryPower()?this.d1:this.f1}_1(...e){if(-1===this.m1){this.M1=e;let t=ms.Jf(),s=t-this.g1,i=this.T1();i<=s&&this.v1?(this.g1=t,this.I1()):this.m1=self.setTimeout(this.w1,Math.max(i-s,4))}}I1(){this.b1=!0;const t=this.M1;this.M1=null,t?this.$f(...t):this.$f(),this.b1=!1}Kf(){this.b1||(this.C1(),this.M1=null,this.g1=ms.Jf())}S1(){this.m1=-1,this.g1=ms.Jf(),this.I1()}C1(){-1!==this.m1&&(self.clearTimeout(this.m1),this.m1=-1)}tn(){this.C1(),this.$f=null,this.M1=null,this.w1=null}}}{const gs=self.Ds;gs.E1=class{constructor(){this.R1=new Map,this.P1=!1,this.A1=null,this.F1=null,this.D1=null,this.O1=null}L1(t){this.P1=!!t}N1(){return this.P1}B1(t){this.A1=t}W1(t){if(this.A1)return this.A1(t);throw new Error("no get base size callback set")}j1(t){this.F1=t}V1(t,s,i,e,h,n){if(this.F1)return this.F1(t,s,i,e,h,n);throw new Error("no raster at size callback set")}H1(t){this.D1=t}U1(t){if(!this.D1)throw new Error("no release result callback set");this.D1(t)}z1(t){this.O1=t}J1(){if(!this.O1)throw new Error("no redraw callback set");this.O1()}q1(t){let s=this.R1.get(t);return s||(s=gs.Qh(gs.X1,this,t),this.R1.set(t,s)),s.Y1(),s}Z1(t){this.R1.delete(t.K1())}Q1(){for(const t of this.R1.values())t.td(),t.sd()}}}{const ys=self.Ds;ys.X1=class{constructor(t,s){this.ed=t,this.hd=s,this.nd=0,this.rd=0,this.od=0,this.ad=this.ed.W1(s).then(t=>{this.ed&&(this.rd=t[0],this.od=t[1],this.ed.J1())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.ld=!0,this.ed&&this.ed.J1()}),this.ud=0,this.fd=0,this.dd=0,this.pd=0,this.md=!1,this.gd=null,this.yd=!1,this.ld=!1}tn(){if(this.nd<=0)throw new Error("already released");this.nd--,0===this.nd&&this.wd()}td(){this.gd&&(this.ed.U1(this.gd),this.gd=null)}wd(){this.td(),this.ed.Z1(this),this.ed=null}K1(){return this.hd}Y1(){this.nd++}Sd(){return 0<this.nd}bd(){return this.gd}sd(){this.yd=!0}async vd(e,h,n){if(0!==h&&0!==n&&!this.ld&&!this.md){let t=ys.En(Math.ceil(h)),s=ys.En(Math.ceil(n)),i=Math.max(t,s);if(4096<i){const r=4096/i;h*=r,n*=r,t=Math.min(Math.ceil(t*r),4096),s=Math.min(Math.ceil(s*r),4096)}if(h<t&&n<s){const o=h/n,a=t/s;n=o<a?(h=s*o,s):(h=t)/o}if(this.ed.N1()&&(t=Math.ceil(h),s=Math.ceil(n)),!(t<=this.ud&&s<=this.fd)||this.yd){this.md=!0,this.ud=t,this.fd=s;const l=await this.ed.V1(this.hd,e,this.ud,this.fd,h,n);this.ed&&(this.td(),this.gd=l,this.dd=h,this.pd=n,this.md=!1,this.yd=!1,this.ed.J1())}}}Md(){return this.ad}xd(){return this.rd}Gd(){return this.od}Td(){return this.dd}_d(){return this.pd}Id(){return this.ld}}}{let s=function(t){return vs.get(t)};s;const c=self.Ds,ws=(c.Cd="\ufeff",new Set("0123456789")),Ss=(c.Ed=function(t){return ws.has(t)},new Set(" \t\n\r            ​\u2028\u2029  　"));c.Rd=function(t){return Ss.has(t)},c.Pd=function(t){return[...t].filter(t=>!c.Rd(t)).join("")},c.Ad=function(t){for(const s of t)if(!c.Rd(s))return!1;return!0},c.Fd=function(t){for(const s of t)if(!c.Rd(s))return!1;return!0},c.Dd=function(t){return 1===t.length&&t.charCodeAt(0)<32},c.Od=function(t){return[...t].filter(t=>!c.Dd(t)).join("")};let i=null;try{i=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}c.Ld=function(t){return!c.Rd(t)&&i&&i.test(t)};const bs=new Set("0123456789.+-e"),vs=(c.kd=function(s){if(!(s=s.trim()).length)return!1;let t=s.charAt(0);if("-"!==t&&!ws.has(t))return!1;for(let t of s)if(!bs.has(t))return!1;return!0},c.Nd=function(s){let i=s.length;for(;0<i;){let t=s.charAt(i-1);if(!c.Ed(t))break;--i}return s.substr(0,i)},c.Bd=function(t){let s=c.Nd(t),i=t.substr(s.length);return s+(i?(parseInt(i,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),Ms=/[&<>"']/g,xs=(c.Wd=function(t){return t.replace(Ms,s)},c.jd=function(t){let s=c.Vd(t,"\\","\\\\");return s=c.Vd(s,'"','\\"'),s=c.Vd(s,"\t","\\t"),s=c.Vd(s,"\r",""),c.Vd(s,"\n","\\n")},c.Hd=function(t){let s=c.Vd(t,"&","&amp;");return s=c.Vd(s,"<","&lt;"),s=c.Vd(s,">","&gt;"),c.Vd(s,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),Gs=(c.ne=function(t){return t.replace(xs,"\\$&")},c.Ud=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},c.zd=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());let e=s.length,h=0,n,r=[];for(;-1<(n=t.indexOf(s,h));)r.push(n),h=n+e;return r},c.Vd=function(t,s,i){return t.replaceAll(s,()=>i)},c.Jd=function(t,s,i){return t.replace(new RegExp(c.ne(s),"gi"),()=>i)},c.qd=function(t,s){"string"==typeof s?t.textContent=s:s.$d()?t.textContent=s.toString():(t.innerHTML=s.Xd(),s instanceof c._h&&s.Yd(t))},c.Zd=function(t,s){return t instanceof c.HtmlString||t instanceof c._h?t.equals(s):s instanceof c.HtmlString||s instanceof c._h?s.equals(t):t===s},c.Kd=function(i,...e){let h=i;for(let t=0,s=e.length;t<s;++t){const n=`{${t}}`;if(!i.includes(n))throw new Error(`missing placeholder '${n}' in string substitution`);h=h.replace(n,e[t].toString())}return h},c.Qd=function(i,...e){let h=i,n=-1,r=-1;for(let t=0,s=e.length;t<s;++t){const o=`{${t}}`;i.includes(o)?(r=t,h=h.replace(o,e[t].toString())):-1===n&&(n=t)}if(0<=n&&0<=r&&n<r)throw new Error(`missing placeholder '${n}' in string substitution`);return h},c.tp=function(t,i){let e=t;for(let[t,s]of Object.entries(i))e=e.replaceAll(t,s.toString());return e},c.sp=function(t,s){return s<t?1:t<s?-1:0},c.ip=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return e<i?1:i<e?-1:0},new self.Intl.Segmenter),Ts=(c.ep=function(t){const s=[];for(const i of Gs.segment(t))s.push(i.segment);return s},c.hp=function*(t){for(const s of Gs.segment(t))yield s.segment},c.np=function(t){let s=0;for(const i of Gs.segment(t))++s;return s},1073741824),_s=1024*Ts,Is={rp:!(c.op=function(s,t){let i="common."+(t?"dataRates":"dataSizes")+".",e=self.langSub;if(s<1024)return e(i+"bytes",s);if(s<1048576){let t=s/1024;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"kilobytes",t)}if(s<Ts){let t=s/1048576;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"megabytes",t)}if(s<_s){let t=s/Ts;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"gigabytes",t)}{let t=s/_s;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"terabytes",t)}}),lp:!0,up:!0,cp:!0,fp:!0};c.pp=function(t,s){s=Object.assign({},Is,s),c.Lang.PushContext("common.time");const i=[],e=self.lang,h=self.langPluralSub;if(s.lp){const r=Math.floor(t/86400);0<r&&(t-=24*r*3600,i.push(h(".days",null,r)))}if(s.up){const o=Math.floor(t/3600);(0<o||i.length)&&(t-=3600*o,i.push(h(".hours",null,o)))}if(s.cp){const a=Math.floor(t/60);(0<a||i.length||!s.fp)&&(t-=60*a,i.push(h(".minutes",null,a)))}if(s.fp){const l=Math.floor(t%60);i.push(h(".seconds",null,l))}const n=(s.rp?e(".approx-prefix"):"")+i.join(e(".separator"));return c.Lang.PopContext(),n},c.mp=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),h=s-e.length;for(let t=0;t<h;++t)i+="0";return i+e},c.gp=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},c.yp=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());c.Dr(i,4,"0"),c.Dr(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const h=i[t]-e[t];if(0!=h)return h<0?-1:1}return 0},c.wp=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random()),i="x"===t?s:3&s|8;return i.toString(16)})},c.Sp=function(i,e){if(i.length!==e.length)throw new Error("strings must be same length");let h=0;for(let t=0,s=i.length;t<s;++t)i.charAt(t)!==e.charAt(t)&&++h;return h},c.bp=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,h,n,r,o;for(s.length<t.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(n=e,h=1;h<=t.length;h++)r=s[e-1]===t[h-1]?o[h-1]:Math.min(o[h-1]+1,Math.min(n+1,o[h]+1)),o[h-1]=n,n=r;o[t.length]=n}return o[t.length]}}{let s=function(t,i,e){const h=o.get(e);if(!h)return"class"===e?i?"</span>":`<span class="bbclass${u++}">`:t;if("string"==typeof h){if("a"===h&&0===a.length||"abbr"===h&&0===l.length)return t;if("a"!==h||i){if("abbr"!==h||i)return"<"+i+h+">";{const n=parseInt(e.substring(3),10)-1;if(n<0||n>=l.length)throw new Error("invalid bbcode tip substitution");let t=l[n],s="";if("string"==typeof t?s=t:"function"==typeof t&&(s=t()),"string"!=typeof s)throw new TypeError("invalid bbcode tip");return`<abbr title="${f.Vd(s,'"',"&quot;")}">`}}{const s=parseInt(e.substring(1),10)-1;if(s<0||s>=a.length)throw new Error("invalid bbcode link substitution");const r=a[s];if("string"==typeof r)return`<a href="${a[s]}">`;if("function"==typeof r)return`<a class="bblink${s}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(h)){let t=h[0],s=h[1];return i?"</"+t+">":`<${t} class="${s}">`}},f=(s,self.Ds),o=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),d=new Set(["icon"]),i=/\[(\/?)([a-zA-Z0-9]+)\]/g,p=/\[(\/?)([^\[\n]*?)\]/g,a=null,l=null,u=0,e=/\n/g;f._h=class{constructor(t,s){if(this.vp=s&&s.Mp?t:f.Wd(t),this.xp="",this.Gp=!1,this.Tp=[],this._p=[],s){if(this.Gp=!!s.convertLineBreaks,s.links){if(9<s.links.length)throw new Error("too many links");this.Tp=s.links}if(s.tips){if(9<s.tips.length)throw new Error("too many tips");this._p=s.tips}}this.Ip=this.vp.includes("["),this.Cp=this.Gp&&this.vp.includes("\n"),this.Ep=!this.Ip&&!this.Cp&&!this.vp.includes("&"),this.Rp=!1,this.Pp=[]}toString(){return this.vp}valueOf(){return this.vp}$d(){return this.Ep}Ap(){return this.Ip?this.vp.replace(i,""):this.vp}Xd(){if(this.Ep)return this.vp;if(!this.xp&&this.vp){let t=this.vp;this.Ip&&(u=0,a=this.Tp,l=this._p,t=t.replace(i,s),a=null,l=null),this.Cp&&(t=t.replace(e,"<br>")),this.xp=t}return this.xp}Yd(i){if(this.Tp.length)for(let t=0,s=this.Tp.length;t<s;++t){const e=this.Tp[t];if("function"==typeof e){const h=i.querySelector(".bblink"+t);if(!h)throw new Error("unable to attach BBString link handler");h.onclick=e}}}equals(t){return t instanceof f.HtmlString?this.Xd()===t.Xd():t instanceof f._h?this.vp===t.vp:this.vp===t}Fp(){if(!this.Rp){let e=[],t=this.vp,h=[],s=p.lastIndex=0,i;for(;null!==(i=p.exec(t));){const n=i.index;if(!(0<n&&"\\"===t.charAt(n-1))){const r=i[0],o=i[1],a=i[2],l=t.substring(s,n);if(s=n+r.length,l&&e.push({text:l,Dp:h.slice(0)}),a)if(o){const u=a.toLowerCase();for(let t=h.length-1;0<=t;--t)if(h[t].tag===u){h.splice(t,1);break}}else{let t=a,s=null,i=a.indexOf("=");if(-1!==i?(t=a.substring(0,i).toLowerCase(),s=a.substring(i+1)):t=t.toLowerCase(),d.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);e.push({icon:s,Dp:h.slice(0)})}else h.push({tag:t,Op:s})}}}s<t.length&&e.push({text:t.substring(s),Dp:h.slice(0)});for(const c of e)c.text&&(c.text=this.Lp(c.text));this.Pp=e.map(t=>t.icon?f.Qh(f.kp,{icon:t.icon,Dp:t.Dp}):f.Qh(f.Np,{Bp:f.ep(t.text),Dp:t.Dp})),this.Rp=!0}return this.Pp}Lp(t){return t=f.Vd(t,"\\[","["),f.Vd(t,"\\\\","\\")}static Wp(t){return f.Qh(f._h,t,{Mp:!0}).Ap()}static jp(t){return t.replace(p,"")}}}{let l=function(t){return" "!==t&&" "!==t&&w.Rd(t)},a=function(t){return Cs.has(t)},u=function(t){return w.Ld(t)&&!a(t)},c=function(t){for(;0<t.length&&l(t.at(-1));)t.pop()},y=function(t){return"\n"===t||"\r\n"===t};l,a,u,c,y;const w=self.Ds,Cs=new Set("〈《「『【〔〖〘〚〝");w.Vp=class{constructor(){this.Hp=[],this.Up=null}zp(){return this.Hp}Jp(){return this.Hp.length}qp(t){this.Up=t}$p(t,s){let i=0,e=0,h=0,n=0,r=0;for(const o of t){if(-1===o.Xp()){const a=s(o);o.Yp(a.height),o.Zp(a.fontBoundingBoxAscent||0),o.Kp(a.fontBoundingBoxDescent||0),o.Qp(a.tm||0),o.im()?o.hm(a.width):o.nm()&&o.rm(this.Up)}i+=o.Xp(),e=Math.max(e,o.om()),h=Math.max(h,o.am()),n=Math.max(n,o.lm()),r=Math.max(r,o.um())}return{width:i,height:e,fontBoundingBoxAscent:h,fontBoundingBoxDescent:n,tm:r}}fm(t,s,i,e,h,n){this.Hp.push(w.Qh(w.Vp.dm,{pm:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:h,tm:n}))}Vp(s,n,r,i,o){if("string"==typeof s&&(s=[w.Qh(w.Np,{Bp:w.ep(s)})]),w.Pr(this.Hp),!(!s.length||1===s.length&&s[0].im()&&s[0].zu()||r<2)){if(1===s.length){const a=s[0];if(a.im()&&a.gm()<=100&&!a.ym()){let{width:t,height:s,fontBoundingBoxAscent:i,fontBoundingBoxDescent:e,tm:h}=n(a);if(t+=o,a.hm(t),a.Yp(s),a.Zp(i||0),a.Kp(e||0),a.Qp(h||0),t<=r)return void this.fm([a],t,s,i,e,h)}}let t;t="word"===i?this.wm(s):"cjk"===i?this.Sm(s):this.vm(s),this.Mm(t,n,r,o)}}wm(t){let s=[],i=[],e=!1;for(const h of t){const n=h.xm();if(h.nm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const r of h.Gm())if(y(r))0<i.length&&s.push(i),s.push([w.Qh(w.Np,{Bp:["\n"],Dp:n})]),i=[];else if(0===i.length)i.push(w.Qh(w.Np,{Bp:[r],Dp:n})),e=l(r);else{const o=l(r);if(o===e){const a=i.at(-1);a.xm()===n?a.Tm(r):i.push(w.Qh(w.Np,{Bp:[r],Dp:n}))}else s.push(i),i=[w.Qh(w.Np,{Bp:[r],Dp:n})],e=o}}return 0<i.length&&s.push(i),s}Sm(t){let s=[],i=[],e=!1;for(const h of t){const n=h.xm();if(h.nm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const r of h.Gm())if(y(r))0<i.length&&s.push(i),s.push([w.Qh(w.Np,{Bp:["\n"],Dp:n})]),i=[];else{if(0===i.length)i.push(w.Qh(w.Np,{Bp:[r],Dp:n}));else if(e||u(r)){const o=i.at(-1);o.xm()===n?o.Tm(r):i.push(w.Qh(w.Np,{Bp:[r],Dp:n}))}else s.push(i),i=[w.Qh(w.Np,{Bp:[r],Dp:n})];e=a(r)}}return 0<i.length&&s.push(i),s}vm(t){const s=[];for(const i of t)if(i.im()){const e=i.Gm();w.Vh(s,e.map(t=>[w.Qh(w.Np,{Bp:[t],Dp:i.xm()})]))}else s.push([i]);return s}_m(t){return t.map(t=>t.Im())}Cm(s,i){let t=s.length?s.at(-1):null,e=0;t&&t.im()&&i[0].im()&&i[0].xm()===t.xm()&&(t.Em(i[0].Gm()),e=1);for(let t=i.length;e<t;++e){const h=i[e];s.push(h.Im())}}Mm(t,s,i,e){let h=[],n=0,r=0,o=0,a=0,l=0;for(const u of t)if(1===u.length&&u[0].im()&&1===u[0].gm()&&y(u[0].Gm()[0])){if(0===r){const c=w.Qh(w.Np,{Bp:[" "],Dp:u[0].xm()}),f=s(c);r=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,l=f.tm||0}this.fm(h,n,r,o,a,l),h=[],n=0,r=0,o=0,a=0,l=0}else{const d=this._m(h),p=(this.Cm(d,u),this.$p(d,s)),m=p.width;if(i<=m)if(0<h.length&&this.fm(h,n,r,o,a,l),h=[],u[0].im()&&w.Fd(u[0].Gm()))n=0,r=0,o=0,a=0,l=0;else{this.Cm(h,u);const g=this.$p(h,s);n=g.width,r=g.height,o=g.fontBoundingBoxAscent,a=g.fontBoundingBoxDescent,l=g.tm}else h=d,n=m,r=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,l=p.tm}0<h.length&&this.fm(h,n,r,o,a,l),this.Rm(s,e)}Rm(s,i){for(const e of this.Hp){const h=e.Pm();if(h.length){let t=h.at(-1);if(t.im()){const n=t.Gm(),r=n.slice(0);if(c(r),0===r.length)e.Am(-t.Xp()),h.pop();else if(r.length<n.length){t.Fm(r);const o=s(t).width,a=t.Xp()-o;t.hm(o),e.Am(-a)}0!==i&&0<h.length&&((t=h.at(-1)).Am(i),e.Am(i))}}}}Uu(){w.Pr(this.Hp)}Dm(){return this.Hp.reduce((t,s)=>Math.max(t,s.Xp()),0)}Om(){return this.Hp.reduce((t,s)=>t+s.om(),0)}}}{const Es=self.Ds;Es.Vp.dm=class{constructor(t){this.Pp=t.pm||[],this.Lm=t.width||-1,this.km=t.height||-1,this.Nm=t.fontBoundingBoxAscent||-1,this.Bm=t.fontBoundingBoxDescent||-1,this.Wm=t.tm||-1,this.jm=0,this.Vm=0}pm(){return this.Pp.values()}*Hm(){const s=this.Pp;for(let t=s.length-1;0<=t;--t)yield s[t]}Pm(){return this.Pp}Am(t){this.Lm+=t}Xp(){return this.Lm}om(){return this.km}Um(){return this.Nm}lm(){return this.Bm}um(){return this.Wm}zm(t){this.jm=t}Jm(){return this.jm}qm(t){this.Vm=t}$m(){return this.Vm}}}{const Rs=self.Ds;Rs.Xm=class{constructor(t){this.Ym=t.Dp||[],this.Lm=t.width||-1,this.km=t.height||-1,this.Nm=t.fontBoundingBoxAscent||-1,this.Bm=t.fontBoundingBoxDescent||-1,this.Wm=t.tm||-1,this.jm=0,this.Vm=0}im(){return!1}nm(){return!1}xm(){return this.Ym}Zm(s){const i=this.Ym;for(let t=i.length-1;0<=t;--t){const e=i[t];if(e.tag===s)return e}return null}Km(t){return!!this.Zm(t)}Qm(){const t=new Map;for(const s of this.Ym)t.set(s.tag,s.Op);return t}Am(t){this.Lm+=t}hm(t){this.Lm=t}Xp(){return this.Lm}Yp(t){this.km=t}om(){return this.km}Zp(t){this.Nm=t}am(){return this.Nm}Kp(t){this.Bm=t}lm(){return this.Bm}Qp(t){this.Wm=t}um(){return this.Wm}zm(t){this.jm=t}Jm(){return this.jm}qm(t){this.Vm=t}$m(){return this.Vm}}}{const Ps=self.Ds;Ps.Np=class extends Ps.Xm{constructor(t){super(t),this.tg=t.Bp}im(){return!0}Em(t){Ps.Vh(this.tg,t),this.Lm=-1,this.km=-1,this.Nm=-1,this.Bm=-1,this.Wm=-1}Tm(t){this.tg.push(t)}Im(){return Ps.Qh(Ps.Np,{Bp:this.tg.slice(0),Dp:this.Ym,width:this.Lm,height:this.km,fontBoundingBoxAscent:this.Nm,fontBoundingBoxDescent:this.Bm,tm:this.Wm})}Gm(){return this.tg}Fm(t){this.tg=t}gm(){return this.tg.length}zu(){return 0===this.tg.length}ym(){return this.tg.includes("\n")}}}{const As=self.Ds;As.kp=class extends As.Xm{constructor(t){super(t),this.sg=t.icon}nm(){return!0}ig(){return this.sg}Im(){return As.Qh(As.kp,{icon:this.sg,Dp:this.Ym,width:this.Lm,height:this.km,fontBoundingBoxAscent:this.Nm,fontBoundingBoxDescent:this.Bm,tm:this.Wm})}eg(t){if(!t)return null;let s=Number(this.sg);return String(s)===this.sg?(s=Math.floor(s),t.hg(s)):t.ng(this.sg)}rm(t){const s=this.eg(t);this.Lm=s?this.km*s.Xp()/s.om():0}rg(t){const s=this.eg(t);return s?s.rg():null}gm(){return 1}}}{const Fs=self.Ds;Fs.og=class{constructor(t){this.ag=new Map,this.lg=t.ug,this.fg=t.dg}tn(){for(const t of this.ag.values())t.tn();this.ag.clear()}pg(t){let s=this.ag.get(t);if(!s){const i=this.lg(t);s=Fs.Qh(Fs.mg,this,{source:t,gg:i}),this.ag.set(t,s)}return s}yg(t){return this.ag.has(t)}wg(t){const s=this.ag.get(t);s&&s.tn(),this.ag.delete(t)}async Sg(t){return this.fg(t)}}}{const Ds=self.Ds;Ds.mg=class{constructor(t,s){this.bg=t,this.vg=s.source,this.Mg=[],this.xg=new Map,this.Gg=!1,this.Tg=!1,this._g=null;const i=s.gg.Ig;for(let t=0,s=i.length;t<s;++t){const e=i[t],h=Ds.Qh(Ds.Cg,this,{index:t,tag:e.tag,source:e.source,width:e.width,height:e.height});this.Mg.push(h),e.tag&&this.xg.set(e.tag.toLowerCase(),h)}}tn(){for(const t of this.Mg)t.tn();Ds.Pr(this.Mg),this.xg.clear(),this.bg=null,this.vg=null}Eg(){return this.Gg}Rg(){return this.Tg}Pg(){return this._g||(this._g=this.Ag()),this._g}async Ag(){if(!this.Gg){this.Gg=!0,this.Tg=!0;const t=await this.bg.Sg(this.vg);if(this.bg){const i=t.Ig;for(let t=0,s=Math.min(i.length,this.Mg.length);t<s;++t){const e=i[t].Fg;this.Mg[t].Dg(e)}this.Tg=!1}}}hg(t){return(t=Math.floor(t))<0||t>=this.Mg.length?null:this.Mg[t]}ng(t){return this.xg.get(t.toLowerCase())||null}}}{const Os=self.Ds;Os.Cg=class{constructor(t,s){this.Og=t,this.vg=s.source||null,this.Lg=s.index,this.kg=s.tag,this.Lm=s.width,this.km=s.height,this.Ng=null}tn(){this.Lm=0,this.km=0,this.Og=null}Bg(){return this.vg}Xp(){return this.Lm}om(){return this.km}Dg(t){this.Ng=t}rg(){return this.Ng}}}{let e=function(t,s,i,e){const h=Ws;Gh.N(Ns,i,s),Gh.N(Bs,t,s),Gh.At(h,Ns,Bs),Gh.normalize(h,h),e.set(h[0],h[1],h[2],Gh.Pt(t,h))},r=function(t,s,i,e,h,n,r){const o=r.x,a=r.y,l=r.z,u=r.w,c=r.Wg,f=r.jg,d=r.Vg,p=1-c,m=1-f,g=1-d,y=o*t*c+o*e*p+a*s*f+a*h*m+l*i*d+l*n*g;if(u<=y)return!0;const w=o*e*c+o*t*p+a*h*f+a*s*m+l*n*d+l*i*g;return u<w},h=function(t,s,i,e){const h=e.x,n=e.y,r=e.z,o=e.w,a=h*t+n*s+r*i;return o<=a};e,r,h;const Ls=self.Ds,ks=self.ys,Gh=ks.Ts,Vh=ks._s,xh=ks.vs,Ns=Gh.create(),Bs=Gh.create(),Ws=Gh.create(),js=Vh.create(),Vs=xh.create(),Hs=Gh.create(),Us=Gh.create(),zs=Gh.create(),Js=Gh.create(),qs=Gh.create(),$s=Gh.create(),Xs=Gh.create(),Ys=Gh.create(),Zs=Vh._(0,0,1,1);Ls.Hg={Ug(t,s,i,e,h,n,r){let o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15],c=h[0]*o+h[4]*a+h[8]*l+h[12]*u,f=h[1]*o+h[5]*a+h[9]*l+h[13]*u,d=h[2]*o+h[6]*a+h[10]*l+h[14]*u,p=h[3]*o+h[7]*a+h[11]*l+h[15]*u;return 0!=p&&(f*=p=1/p,d*=p,r[0]=(.5*(c*=p)+.5)*n[2]+n[0],r[1]=(.5*f+.5)*n[3]+n[1],r[2]=.5*(1+d),!0)},zg(t,s,i,e,h,n,r){const o=Vs,a=js;return xh.multiply(o,h,e),null!==xh.C(o,o)&&(a[0]=(t-n[0])/n[2]*2-1,a[1]=(s-n[1])/n[3]*2-1,a[2]=2*i-1,a[3]=1,Vh.kt(a,a,o),0!==a[3])&&(a[3]=1/a[3],r[0]=a[0]*a[3],r[1]=a[1]*a[3],r[2]=a[2]*a[3],!0)},Jg(t,s,i,e,h,n,r){const o=Ns,a=Bs;if(!Ls.Hg.zg(t,s,0,e,h,n,o))return!1;if(!Ls.Hg.zg(t,s,1,e,h,n,a))return!1;let l=Bs,u=(Gh.N(l,a,o),Ws),c=(Gh.set(u,0,0,1),-i),f=Gh.Pt(u,l),d=0;if(0===f){const p=Gh.Pt(u,o)+c;if(0!==p)return!1}else if((d=-(Gh.Pt(o,u)+c)/f)<0)return!1;return Gh._t(r,o,l,d),!0}};class Ks{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Wg=NaN,this.jg=NaN,this.Vg=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.Wg=0<t?1:0,this.jg=0<s?1:0,this.Vg=0<i?1:0}}Ls.Hg.qg=class{constructor(){this.$g=new Ks,this.Xg=new Ks,this.Yg=new Ks,this.Zg=new Ks,this.Kg=new Ks,this.Qg=new Ks}ty(t,s){const i=Zs;Ls.Hg.zg(0,1,0,t,s,i,Hs),Ls.Hg.zg(1,1,0,t,s,i,Us),Ls.Hg.zg(0,0,0,t,s,i,zs),Ls.Hg.zg(1,0,0,t,s,i,Js),Ls.Hg.zg(0,1,1,t,s,i,qs),Ls.Hg.zg(1,1,1,t,s,i,$s),Ls.Hg.zg(0,0,1,t,s,i,Xs),Ls.Hg.zg(1,0,1,t,s,i,Ys),e(zs,Hs,qs,this.$g),e(Hs,Us,$s,this.Xg),e(Us,Js,Ys,this.Yg),e(Js,zs,Xs,this.Zg),e(Xs,qs,$s,this.Qg),e(Js,Us,Hs,this.Kg)}iy(t,s,i,e,h,n){return r(t,s,i,e,h,n,this.$g)&&r(t,s,i,e,h,n,this.Xg)&&r(t,s,i,e,h,n,this.Yg)&&r(t,s,i,e,h,n,this.Zg)&&r(t,s,i,e,h,n,this.Kg)&&r(t,s,i,e,h,n,this.Qg)}ey(t,s,i){return!h(t,s,i,this.Kg)}}}{const Qs=self.Ds,ti=self.ys,Gh=ti.Ts,Vh=ti._s,xh=ti.vs,si=xh.create(),ii=Gh._(0,0,0),ei=Gh._(0,0,0),hi=Gh._(0,0,0),ni=Gh._(0,1,0),ri=(Vh._(0,0,0,0),new Qs.Hl),oi=new Qs.Rect,ai=new Qs.Hl(0,0,1,0,1,1,0,1),li={hy:1,ny:1e4},ui=xh._(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Qs.Hg.oy=class{constructor(t){t=Object.assign({},li,t),this.Lm=0,this.km=0,this.ly=Qs.un(45),this.uy=Math.tan(this.ly/2),this.my=xh.create(),this.gy=xh.create(),this.yy=!1,this.wy=t.hy,this.Sy=t.ny,this.by=[],this.vy=new Map,this.My=null,this.xy=null,this.Gy=null,this.Ty=null,this._y=null,this.Iy=null,this.Cy=null,this.Ey=null,this.Ry=null,this.Py=null,this.Ay=null,this.Fy=null,this.Dy=new Map,this.Oy=null,this.Ly=[],this.ky=new Map,this.Ny=0,this.By=0,this.Wy=1,this.jy=[this.Wy],this.Vy=1,this.Hy=[this.Vy],this.Uy=.5,this.zy=[this.Uy],this.Jy=0,this.qy=!0,this.$y=!1}Xy(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}Yy(){this.Ny=0,this.By=0,this.My=null,this.xy=null,this.Gy=null,this.Ty=null,this._y=null,this.Iy=null,this.Cy=null,this.Ey=null,this.Ry=null,this.Py=null,this.Ay=null,this.Fy=null,this.Zy()}Ky(){this.Yy(),this.Oy=null}Qy(){for(const t of this.by)t.tn();this.Yy()}Xp(){return this.Lm}om(){return this.km}iw(t){return this.ew()?100:t/(2*this.hw())}rw(t){if(this.ew()){const s=t/(2*this.hw());return s/this.iw(t)}return 1}ow(t){this.wy=t}aw(){return this.wy}lw(t){this.Sy=t}uw(){return this.Sy}cw(t){this.ly=t,this.uy=Math.tan(this.ly/2)}fw(){return this.ly}hw(){return this.uy}dw(){this.yy=!1}pw(){this.yy=!0}ew(){return!this.yy}mw(){return this.yy}gw(t,s,i=.5,e=.5){const h=this.aw(),n=this.uw(),r=this.fw();if(.5===i&&.5===e)this.yw()?xh.St(t,r,s,h,n):xh.perspective(t,r,s,h,n);else{const o=2*(i=1-i)-2,a=2*i,l=2*e-2,u=2*e,c=this.hw()*h,f=c*s;xh.gt(t,o*f,a*f,l*c,u*c,h,n),this.yw()&&xh.mul(t,ui,t)}}ww(t,s,i,e=1){const h=self.devicePixelRatio,n=2*this.iw(i)*h*this.hw()/i,r=s*n/(2*h*e),o=i*n/(2*h*e),a=-r,l=r,u=-o,c=o;this.yw()?xh.Mt(t,a,l,u,c,this.aw(),this.uw()):xh.ortho(t,a,l,u,c,this.aw(),this.uw())}Sw(t,s,i,e,h,n=1){let r=1;this.ew()&&(r=200*this.hw()/h);const o=hi,a=(Gh.set(o,r,-r,1),ii),l=ei;Gh.multiply(a,s,o),Gh.multiply(l,i,o),xh.xt(t,a,l,e||ni),o[2]=n,xh.scale(t,t,o)}bw(t,s,i,e,h,n,r,o){return Gh.set(ii,t,s,i),Gh.set(ei,e,h,n),this.Sw(si,ii,ei,ni,r,o),si}Mw(t){this.by.push(t),this.vy.set(t.jc(),t)}xw(t){const s=this.by.indexOf(t);-1!==s&&this.by.splice(s,1),this.vy.delete(t.jc())}Zy(){Qs.Pr(this.by),this.vy.clear()}Gw(t){return this.vy.get(t)||null}Tw(){return this.My}_w(){this.Iw(this.My)}Cw(){return this.xy}Ew(){this.Iw(this.xy)}Rw(){this.Iw(this.Gy)}Pw(){this.Iw(this.Ty)}Aw(){this.Iw(this._y)}Fw(){this.Iw(this.Iy)}Dw(){this.Iw(this.Cy)}Ow(){this.Iw(this.Ey)}Lw(){this.Iw(this.Ry)}kw(){this.Iw(this.Py)}Nw(){this.Iw(this.Ay)}Bw(){this.Iw(this.Fy)}Ww(t){this.Oy=t}jw(){return this.Oy}Vw(t,s,i,e){let h=Qs.Hg.Uw.Hw(t,s,i,e),n=this.Dy.get(h);return n||(n=Qs.Qh(Qs.Hg.Uw,this,t,s,i,e),this.Dy.set(h,n)),n.zw(),n}Jw(t){t.qw(),0===t.$w()&&(this.Oy===t&&(this.Oy=null),this.Dy.delete(t.Xw()),t.tn())}Yw(t){Qs.Pr(this.Ly),this.ky.clear();let s=0;for(const i of t){const e=i[0],h=i[1],n=i[2];this.Ly.push([h,n]),this.ky.set(e,{number:s,Zw:h,Kw:n}),s++}}Qw(t){return this.Ly[t]}tS(t){return this.Qw(t)[0]}sS(t){return this.Qw(t)[1]}iS(t){const s=this.ky.get(t);if(void 0===s)throw new Error("invalid blend name");return s}eS(t){const s=this.ky.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}hS(t){this.Ny=t}nS(){return this.Ny}rS(t){this.By=t,this.Oy=null}oS(){return this.By}dm(t,s,i,e){const h=Qs.mn(t,s,i,e),n=Math.sin(h),r=Math.cos(h),o=.5*this.Wy,a=n*o,l=r*o,u=this.Vy;2===u?this.aS(t,s,0,i,e,0,a,l):1===u?this.lS(t,s,0,i,e,0,a,l):this.uS(t,s,0,i,e,0,a,l)}cS(t,s,i,e,h,n){const r=Qs.mn(t,s,e,h),o=Math.sin(r),a=Math.cos(r),l=.5*this.Wy,u=o*l,c=a*l,f=this.Vy;2===f?this.aS(t,s,i,e,h,n,u,c):1===f?this.lS(t,s,i,e,h,n,u,c):this.uS(t,s,i,e,h,n,u,c)}aS(t,s,i,e,h,n,r,o){const a=this.Uy,l=t+a-o,u=s+a-r,c=e+a+o,f=h+a+r,d=2*o,p=2*r,m=l+r,g=u-o,y=l-r+d,w=u+o+p,S=c+r,b=f-o,v=c-r-d,M=f+o-p;this.fS(m,g,i,S,b,n,v,M,n,y,w,i,ai)}lS(t,s,i,e,h,n,r,o){const a=this.Uy,l=t+a-o,u=s+a-r,c=e+a+o,f=h+a+r,d=l+r,p=u-o,m=l-r,g=u+o,y=c+r,w=f-o,S=c-r,b=f+o;this.fS(d,p,i,y,w,n,S,b,n,m,g,i,ai)}uS(t,s,i,e,h,n,r,o){const a=this.Uy,l=t+a,u=s+a,c=e+a,f=h+a,d=l+r,p=u-o,m=l-r,g=u+o,y=c+r,w=f-o,S=c-r,b=f+o;this.fS(d,p,i,y,w,n,S,b,n,m,g,i,ai)}dS(t,s,i,e,h,n){const r=Qs.mn(t,s,i,e),o=Math.sin(r),a=Math.cos(r),l=.5*this.Wy,u=o*l,c=a*l,f=this.Vy;2===f?this.pS(t,s,i,e,u,c,h,n):1===f?this.mS(t,s,i,e,u,c,h,n):this.gS(t,s,i,e,u,c,h,n)}pS(t,s,i,e,h,n,r,o){const a=this.Uy,l=t+a-n,u=s+a-h,c=i+a+n,f=e+a+h,d=2*n,p=2*h,m=l+h,g=u-n,y=l-h+d,w=u+n+p,S=c+h,b=f-n,v=c-h-d,M=f+n-p;ri.set(m,g,S,b,v,M,y,w),oi.set(r,0,o,0),this.yS(ri,oi)}mS(t,s,i,e,h,n,r,o){const a=this.Uy,l=t+a-n,u=s+a-h,c=i+a+n,f=e+a+h,d=l+h,p=u-n,m=l-h,g=u+n,y=c+h,w=f-n,S=c-h,b=f+n;ri.set(d,p,y,w,S,b,m,g),oi.set(r,0,o,0),this.yS(ri,oi)}gS(t,s,i,e,h,n,r,o){const a=this.Uy,l=t+a,u=s+a,c=i+a,f=e+a,d=l+h,p=u-n,m=l-h,g=u+n,y=c+h,w=f-n,S=c-h,b=f+n;ri.set(d,p,y,w,S,b,m,g),oi.set(r,0,o,0),this.yS(ri,oi)}wS(t,s,i,e){const h=.5*this.Wy,n=this.Vy;2===n?this.SS(t,s,i,e,h):1===n?this.bS(t,s,i,e,h):this.vS(t,s,i,e,h)}SS(t,s,i,e,h){this.aS(t,s,0,i,s,0,0,h),this.aS(i,s,0,i,e,0,h,0),this.aS(i,e,0,t,e,0,0,-h),this.aS(t,e,0,t,s,0,-h,0)}bS(t,s,i,e,h){this.lS(t,s,0,i,s,0,0,h),this.lS(i,s,0,i,e,0,h,0),this.lS(i,e,0,t,e,0,0,-h),this.lS(t,e,0,t,s,0,-h,0)}vS(t,s,i,e,h){this.uS(t,s,0,i,s,0,0,h),this.uS(i,s,0,i,e,0,h,0),this.uS(i,e,0,t,e,0,0,-h),this.uS(t,e,0,t,s,0,-h,0)}MS(t){this.wS(t.dl(),t.pl(),t.ml(),t.gl())}xS(t){const s=Qs.mn(t.Jn(),t.qn(),t.$n(),t.Xn()),i=Math.sin(s),e=Math.cos(s),h=.5*this.Wy,n=i*h,r=e*h,o=this.Vy;2===o?this.GS(t,n,r):1===o?this.TS(t,n,r):this._S(t,n,r)}GS(t,s,i){this.aS(t.Jn(),t.qn(),0,t.$n(),t.Xn(),0,s,i),this.aS(t.$n(),t.Xn(),0,t.Yn(),t.Zn(),0,i,-s),this.aS(t.Yn(),t.Zn(),0,t.Kn(),t.Qn(),0,-s,-i),this.aS(t.Kn(),t.Qn(),0,t.Jn(),t.qn(),0,-i,s)}TS(t,s,i){this.lS(t.Jn(),t.qn(),0,t.$n(),t.Xn(),0,s,i),this.lS(t.$n(),t.Xn(),0,t.Yn(),t.Zn(),0,i,-s),this.lS(t.Yn(),t.Zn(),0,t.Kn(),t.Qn(),0,-s,-i),this.lS(t.Kn(),t.Qn(),0,t.Jn(),t.qn(),0,-i,s)}_S(t,s,i){this.uS(t.Jn(),t.qn(),0,t.$n(),t.Xn(),0,s,i),this.uS(t.$n(),t.Xn(),0,t.Yn(),t.Zn(),0,i,-s),this.uS(t.Yn(),t.Zn(),0,t.Kn(),t.Qn(),0,-s,-i),this.uS(t.Kn(),t.Qn(),0,t.Jn(),t.qn(),0,-i,s)}IS(t){this.Wy=t,this.jy[this.jy.length-1]=t}CS(){return this.Wy}ES(t){if(100<=this.jy.length)throw new Error("pushed too many line widths - check push/pop pairs");this.jy.push(t),this.Wy=t}RS(){if(this.jy.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.jy.pop(),this.Wy=this.jy.at(-1)}PS(){this.Vy=0,this.Hy[this.Hy.length-1]=0}AS(){this.Vy=1,this.Hy[this.Hy.length-1]=0}FS(){this.Vy=2,this.Hy[this.Hy.length-1]=0}DS(t){if("butt"===t)this.OS();else if("square"===t)this.LS();else{if("zag"!==t)throw new Error("invalid line cap");this.kS()}}OS(){if(100<=this.Hy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.Hy.push(0),this.Vy=0}LS(){if(100<=this.Hy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.Hy.push(1),this.Vy=1}kS(){if(100<=this.Hy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.Hy.push(2),this.Vy=2}NS(){if(this.Hy.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.Hy.pop(),this.Vy=this.Hy.at(-1)}BS(t){this.Uy=t,this.zy[this.zy.length-1]=t}WS(){return this.Uy}jS(t){if(100<=this.zy.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.zy.push(t),this.Uy=t}VS(){if(this.zy.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.zy.pop(),this.Uy=this.zy.at(-1)}HS(s){const t=s.length/2;if(t<3)throw new Error("need at least 3 points");const i=t-2,e=i-1,h=s[0],n=s[1];for(let t=0;t<i;t+=2){const r=2*t,o=s[2+r],a=s[3+r],l=s[4+r],u=s[5+r];if(t===e)this.US(h,n,o,a,l,u,l,u);else{const c=s[6+r],f=s[7+r];this.US(h,n,o,a,l,u,c,f)}}}zS(){return 3}JS(){this.qS(!0),this.Jy++}$S(){return this.Jy}XS(){this.Jy++}YS(t){this.qy=!!t}ZS(){return this.qy}KS(t){this.$y=!!t}QS(){return this.$y}tb(){return!1}yw(){return!1}sb(){}ib(){}eb(){}hb(){return this.sb()+this.ib()+this.eb()}nb(){return Qs.Qh(Qs.Hg.rb,this)}}}{const ci=self.Ds;ci.Hg.ob=class{constructor(t,s){this.nn=s.name,this.ab=t,this.lb=s.extendBoxHorizontal||0,this.ub=s.extendBoxVertical||0,this.cb=!!s.crossSampling,this.fb=!!s.mustPreDraw,this.pb=!!s.preservesOpaqueness,this.mb=!!s.supports3dDirectRendering,this.gb=!!s.animated,this.yb=!!s.blendsBackground,this.wb=!!s.usesDepth,this.Sb=!1,this.bb=this.cb||this.yb||0!==this.lb||0!==this.ub}tn(){this.ab=null}vb(){return this.ab}jc(){return this.nn}Mb(){return 0!==this.lb||0!==this.ub}xb(){return this.lb}Gb(){return this.ub}Tb(){return this.cb}_b(){return this.fb}Ib(){return this.pb}Cb(){return this.mb}Eb(){return this.gb}Rb(){return this.yb}Pb(){return this.wb}Ab(){return this.Sb}Fb(){return this.bb}Db(){return!1}}}{const fi=self.Ds;fi.Hg.Uw=class{constructor(t,s,i,e,h){this.ab=t,this.nd=0,this.Ob=null,this.Lb="",this.kb=i,this.Nb=fi.Qh(fi.Oo),this.Nb.set(e),this.Bb=h,"string"==typeof s?this.Lb=s:(this.Ob=s,this.Lb=this.Ob.jc())}tn(){if(0<this.nd)throw new Error("releasing state group still in use");this.ab=null,this.Ob=null,this.Lb=""}Wb(){const t=this.ab;t.Iw(this.Ob),t.jb(this.kb),t.Vb(this.Nb),t.rS(this.Bb),t.Ww(this)}Xw(){return fi.Hg.Uw.Hw(this.Lb,this.kb,this.Nb,this.Bb)}zw(){++this.nd}qw(){--this.nd}$w(){return this.nd}Hb(){this.Ob=null}Ub(t){if(this.Ob=t.Gw(this.Lb),!this.Ob)throw new Error("failed to restore shader program")}static Hw(t,s,i,e){const h="string"==typeof t?t:t.jc();return h+","+s+","+i.Xo()+","+i.Yo()+","+i.Zo()+","+i.Ko()+","+e}}}{let e=function(t,s,i){const e=i.Jn(),h=i.qn(),n=i.$n()-e,r=i.Xn()-h,o=i.Kn()-e,a=i.Qn()-h,l=n*t,u=r*t,c=o*s,f=a*s;return[e+l+c,h+u+f]};e;const _=self.Ds,di=_.Qh(_.Hl);_.Hg.zb=class{constructor(t,s,i){this.Jb=t,this.qb=s,this.$b=i,this.Ua=NaN,this.za=NaN,this.Bb=NaN,this.Xb=NaN,this.Yb=NaN,this.Ua=0,this.za=0,this.Bb=0,this.Xb=0,this.Yb=0}Zb(t,s,i,e){this.Ua=t,this.za=s,this.Xb=i,this.Yb=e}Kb(){return this.Ua}Qb(t){this.Ua!==t&&(this.Ua=t,this.Jb.tv())}sv(){return this.za}hv(t){this.za!==t&&(this.za=t,this.Jb.tv())}nv(){return this.Bb}rv(t){this.Bb!==t&&(this.Bb=Math.max(t,0),this.Jb.tv())}ov(){return this.Xb}av(t){this.Xb=t}lv(){return this.Yb}uv(t){this.Yb=t}cv(t,s,i){[this.Ua,this.za]=e(t.Ua,t.za,s),this.Bb=t.Bb,this.Xb=_.Ft(i.dl(),i.ml(),t.Xb),this.Yb=_.Ft(i.pl(),i.gl(),t.Yb)}dv(t,s,i){[this.Ua,this.za]=e(t.Ua,t.za,s),this.Bb=t.Bb,[this.Xb,this.Yb]=e(t.Xb,t.Yb,i)}pv(){return{x:this.Kb(),y:this.sv(),z:this.nv(),u:this.ov(),v:this.lv()}}mv(t){this.Qb(t.x),this.hv(t.y),t.hasOwnProperty("z")&&this.rv(t.z),this.av(t.u),this.uv(t.v)}gv(){return this.Jb}yv(){return this.qb}wv(){return this.$b}},_.Hg.Sv=class{constructor(i,t,s){if(i<2||t<2)throw new Error("invalid mesh size");this.bv=i,this.vv=t,this.Mv=s||null,this.xv=[],this.Gv=0,this.Tv=0,this._v=1,this.Iv=1,this.Cv=0,this.Ev=!1;const e=i-1,h=t-1;for(let s=0;s<t;++s){const n=[];for(let t=0;t<i;++t){const r=_.Qh(_.Hg.zb,this,t,s),o=t/e,a=s/h;r.Zb(o,a,o,a),n.push(r)}this.xv.push(n)}}tn(){_.Pr(this.xv)}Rv(){return this.bv}Pv(){return this.vv}Av(){return this.Mv}Fv(){return this.xv}tv(){this.Ev=!0}Dv(){if(this.Ev){let t=1/0,s=1/0,i=-1/0,e=-1/0,h=0;for(const n of this.xv)for(const r of n){const o=r.Kb(),a=r.sv();t=Math.min(t,o),s=Math.min(s,a),i=Math.max(i,o),e=Math.max(e,a),h=Math.max(h,r.nv())}this.Gv=t,this.Tv=s,this._v=i,this.Iv=e,this.Cv=h,this.Ev=!1}}Ov(){return this.Dv(),this.Gv}Lv(){return this.Dv(),this.Tv}kv(){return this.Dv(),this._v}Nv(){return this.Dv(),this.Iv}Bv(){return this.Dv(),this.Cv}Wv(){return 0<this.Bv()}jv(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.bv||s<0||s>=this.vv?null:this.xv[s][t]}Vv(t,i,e){const h=e instanceof _.Rect;if(t.Rv()!==this.Rv()||t.Pv()!==this.Pv())throw new Error("source mesh wrong size");const n=t.xv,r=this.xv;for(let t=0,s=r.length;t<s;++t){const o=n[t],a=r[t];for(let t=0,s=a.length;t<s;++t){const l=o[t],u=a[t];h?u.cv(l,i,e):u.dv(l,i,e)}}}Hv(n){let r=this.xv,o=r[0];for(let t=1,s=r.length;t<s;++t){let i=r[t],e=o[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const a=o[t],l=i[t];di.set(e.ov(),e.lv(),a.ov(),a.lv(),l.ov(),l.lv(),h.ov(),h.lv()),n.fS(e.Kb(),e.sv(),e.nv(),a.Kb(),a.sv(),a.nv(),l.Kb(),l.sv(),l.nv(),h.Kb(),h.sv(),h.nv(),di),e=a,h=l}o=i}}Uv(o,a){a=a||((t,s,i)=>[t,s,i]);let t=this.xv,l=t[0];for(let n=1,r=t.length;n<r;++n){let i=t[n],e=l[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const u=l[t],c=i[t],[f,d,p]=a(e.Kb(),e.sv(),e.nv()),[m,g,y]=a(u.Kb(),u.sv(),u.nv()),[w,S,b]=a(c.Kb(),c.sv(),c.nv()),[v,M,x]=a(h.Kb(),h.sv(),h.nv());o.cS(f,d,p,m,g,y),o.cS(f,d,p,w,S,b),o.cS(f,d,p,v,M,x),t===s-1&&o.cS(m,g,y,w,S,b),n===r-1&&o.cS(v,M,x,w,S,b),e=u,h=c}l=i}}zv(t){let i=.99999999,e=t.Cu(),h=[],n=this.Rv()-1,r=this.Pv()-1,o=1/n,a=1/r,l=n-1,u=r-1,c=e[0],f=e[1],d=_.an(Math.floor(c*n),0,l),p=_.an(Math.floor(f*r),0,u),m=!0,g=0,y=0,w=0,S=-1,b=()=>{c=_.an(_.Ft(c,g,w),0,1),f=_.an(_.Ft(f,y,w),0,1),h.push(c,f)};for(let t=0,s=e.length;t<s;t+=2){c=e[t],f=e[t+1],h.push(c,f),d=_.an(Math.floor(c*n),0,l),p=_.an(Math.floor(f*r),0,u);const v=(t+2)%s;for(g=e[v],y=e[1+v],S=-1;;){if(1e6<h.length)throw new Error("Too many mesh poly points");const M=d*o,x=p*a,G=(d+1)*o,T=(p+1)*a;if(m=_.hr(c,f,M,x,G,x,G,T),0!==S&&0<=(w=_.er(c,f,g,y,M,x,G,T,-.001))&&w<=i)b(),m=!m,S=0;else if(0<p&&2!==S&&0<=(w=_.er(c,f,g,y,M,x,G,x,.001))&&w<=i)b(),p--,m=!1,S=4;else if(d<l&&3!==S&&0<=(w=_.er(c,f,g,y,G,x,G,T,.001))&&w<=i)b(),d++,m=!1,S=1;else if(0<d&&1!==S&&0<=(w=_.er(c,f,g,y,M,x,M,T,.001))&&w<=i)b(),d--,m=!0,S=3;else{if(!(p<u&&4!==S&&0<=(w=_.er(c,f,g,y,M,T,G,T,.001))&&w<=i))break;b(),p++,m=!0,S=2}}}return _.Qh(_.xu,h)}Jv(t,s){const i=this.qv(t);this.$v(i),s.Ru(i)}qv(t){const i=[],e=t.Cu();for(let t=0,s=e.length;t<s;t+=2){const h=e[t],n=e[t+1],[r,o]=this.Xv(h,n);i.push(r,o)}return i}Xv(t,s){const i=this.Rv()-1,e=this.Pv()-1,h=1/i,n=1/e,r=_.an(Math.floor(t*i),0,i-1),o=_.an(Math.floor(s*e),0,e-1),a=r*h,l=o*n,u=(r+1)*h,c=(o+1)*n,f=this.jv(r,o),d=this.jv(r+1,o+1),p=_.hr(t,s,a,l,u,l,u,c),m=p?a+h:a,g=p?l:l+n,y=this.jv(r+(p?1:0),o+(p?0:1)),[w,S,b]=_.nr(t,s,a,l,m,g,u,c);return _.rr(w,S,b,f.Kb(),f.sv(),f.nv(),y.Kb(),y.sv(),y.nv(),d.Kb(),d.sv(),d.nv())}$v(i){let e=[],h=i[0],n=i[1],r=h-i.at(-2),o=n-i.at(-1);for(let t=0,s=i.length;t<s;t+=2){const a=(t+2)%s,l=i[a],u=i[1+a],c=l-h,f=u-n,d=Math.abs(c)<1e-7&&Math.abs(r)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(c)===Math.sign(r);(!d&&!p&&.001<Math.abs(c/r-f/o)||0==c&&0==f)&&e.push(h,n),h=l,n=u,r=c,o=f}6<=e.length&&e.length<i.length&&_.Or(i,e)}pv(){return{cols:this.Rv(),rows:this.Pv(),points:this.xv.map(t=>t.map(t=>t.pv()))}}mv(t){const i=this.Rv(),e=this.Pv();if(t.cols!==i||t.rows!==e)throw new Error("mesh data wrong size");const h=t.points;for(let s=0;s<e;++s){const n=h[s];for(let t=0;t<i;++t){const r=this.jv(t,s);r.mv(n[t])}}}}}{let d=function(t,s){let i,e,h,n;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,h=s.RGBA,n=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,h=s.RGB,n=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,h=s.RGBA,n=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,h=s.RGBA,n=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,h=s.RGB,n=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{Yv:i,Zv:e,format:h,type:n}};d;const pi=self.Ds,mi=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),gi=new Set(["nearest","bilinear","trilinear"]),yi=new Set(["default","low","high"]),wi=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Si={Kv:"clamp-to-edge",Qv:"clamp-to-edge",t2:"trilinear",s2:0,i2:"rgba8",e2:!0,h2:"default",premultiplyAlpha:!0,n2:!1,width:-1,height:-1},bi={premultiplyAlpha:!0,flipY:!1},vi=new Set;pi.Hg.o2=class{constructor(t){this.ab=t,this.a2=null,this.Lm=0,this.km=0,this.l2=!0,this.u2="clamp-to-edge",this.c2="clamp-to-edge",this.f2="trilinear",this.d2=0,this.m2="rgba8",this.g2=!1,this.w2="default",this.nd=0}S2(s,t){if(!("undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&s instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&s instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas||s instanceof ImageData||s instanceof ArrayBuffer||null===s))throw new Error("invalid texture source");if(t=Object.assign({},Si,t),this.a2)throw new Error("already created texture");if(this.u2=t.Kv,this.c2=t.Qv,this.f2=t.t2,this.d2=t.s2,this.m2=t.i2,this.g2=!!t.e2&&this.ab.ZS(),this.w2=t.h2,!wi.has(this.u2)||!wi.has(this.c2))throw new Error("invalid wrap mode");if(!gi.has(this.f2))throw new Error("invalid sampling");if(!mi.has(this.m2))throw new Error("invalid pixel format");if(!yi.has(this.w2))throw new Error("invalid mipmap quality");if(this.l2=!0,s instanceof ArrayBuffer||null===s||t.n2){if(this.Lm=t.width,this.km=t.height,s instanceof ArrayBuffer&&s.byteLength!==this.Lm*this.km*4)throw new Error("ArrayBuffer wrong size")}else this.Lm=s.width,this.km=s.height;if(this.Lm<=0||this.km<=0)throw new Error("invalid texture data size");if(t.n2){const o=pi.xo(this.Lm,this.km),a=o.getContext("2d");a.drawImage(s,0,0,this.Lm,this.km),s=o}const i=pi.Cn(this.Lm)&&pi.Cn(this.km),e=this.ab.b2();if(this.Lm>e||this.km>e)throw new Error("texture data exceeds maximum texture size");const h=this.ab.v2(),n=this.ab.M2(),r=(this.a2=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.a2),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1),d(this.m2,h));if(this.ab.G2()||i||!this.T2())if(2<=n){let t;t=this.g2?Math.floor(Math.log2(Math.max(this.Lm,this.km))+1):1,h.texStorage2D(h.TEXTURE_2D,t,r.Yv,this.Lm,this.km),s instanceof ArrayBuffer?h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.Lm,this.km,r.format,r.type,new Uint8Array(s)):null!==s&&h.texSubImage2D(h.TEXTURE_2D,0,0,0,r.format,r.type,s)}else s instanceof ArrayBuffer?h.texImage2D(h.TEXTURE_2D,0,r.Zv,this.Lm,this.km,0,r.format,r.type,new Uint8Array(s)):null===s?h.texImage2D(h.TEXTURE_2D,0,r.Zv,this.Lm,this.km,0,r.format,r.type,null):h.texImage2D(h.TEXTURE_2D,0,r.Zv,r.format,r.type,s);else{if(null===s)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((s=s instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(s),this.Lm,this.km):s)instanceof ImageData){const c=pi.xo(this.Lm,this.km),f=c.getContext("2d");f.putImageData(s,0,0),s=c}const l=pi.xo(pi.En(this.Lm),pi.En(this.km)),u=l.getContext("2d");u.imageSmoothingEnabled="nearest"!==this.f2,u.drawImage(s,0,0,this.Lm,this.km,0,0,l.width,l.height),h.texImage2D(h.TEXTURE_2D,0,r.Zv,r.format,r.type,l)}null!==s&&this._2(h),h.bindTexture(h.TEXTURE_2D,null),this.ab.I2(),this.nd=1,vi.add(this)}C2(t,s,i){if(i=Object.assign({},Si,i),this.a2)throw new Error("already created texture");if(this.u2=i.Kv,this.c2=i.Qv,this.f2=i.t2,this.m2=i.i2,this.g2=!!i.e2&&this.ab.ZS(),this.w2=i.h2,!wi.has(this.u2)||!wi.has(this.c2))throw new Error("invalid wrap mode");if(!gi.has(this.f2))throw new Error("invalid sampling");if(!mi.has(this.m2))throw new Error("invalid pixel format");if(!yi.has(this.w2))throw new Error("invalid mipmap quality");this.l2=!1,this.Lm=Math.floor(t),this.km=Math.floor(s);const e=pi.Cn(this.Lm)&&pi.Cn(this.km),h=this.ab.b2();if(this.Lm<=0||this.km<=0)throw new Error("invalid texture size");if(this.Lm>h||this.km>h)throw new Error("texture exceeds maximum texture size");if(!this.ab.G2()&&this.T2()&&!e)throw new Error("non-power-of-two tiled textures not supported");const n=this.ab.v2(),r=this.ab.M2(),o=(this.a2=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.a2),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),d(this.m2,n)),a=2<=r?o.Yv:o.Zv;n.texImage2D(n.TEXTURE_2D,0,a,this.Lm,this.km,0,o.format,o.type,null),this._2(n),n.bindTexture(n.TEXTURE_2D,null),this.ab.I2(),this.nd=1,vi.add(this)}E2(t){if("default"===this.w2)return this.l2?t.NICEST:t.FASTEST;if("low"===this.w2)return t.FASTEST;if("high"===this.w2)return t.NICEST;throw new Error("invalid mipmap quality")}T2(){return"clamp-to-edge"!==this.u2||"clamp-to-edge"!==this.c2}R2(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}_2(t){const s=pi.Cn(this.Lm)&&pi.Cn(this.km);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.R2(t,this.u2)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.R2(t,this.c2)),"nearest"===this.f2)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.g2=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.ab.G2())&&this.g2){t.hint(t.GENERATE_MIPMAP_HINT,this.E2(t)),t.generateMipmap(t.TEXTURE_2D);const e="trilinear"===this.f2&&!this.ab.QS();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.g2=!1;const i=this.ab.P2();i&&0<this.d2&&"nearest"!==this.f2&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.d2,this.ab.A2()))}F2(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.a2||this.nd<=0)throw new Error("texture not created");if(this.l2)throw new Error("cannot update static texture");s=Object.assign({},bi,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,h=this.ab.M2(),n=this.ab.v2(),r=(n.bindTexture(n.TEXTURE_2D,this.a2),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!!s.flipY),d(this.m2,n)),o=2<=h?r.Yv:r.Zv;try{if(this.Lm===i&&this.km===e){const a=pi.Cn(this.Lm)&&pi.Cn(this.km);n.texSubImage2D(n.TEXTURE_2D,0,0,0,r.format,r.type,t),(a||this.ab.G2())&&this.g2&&(n.hint(n.GENERATE_MIPMAP_HINT,this.E2(n)),n.generateMipmap(n.TEXTURE_2D))}else{this.Lm=i,this.km=e;const l=pi.Cn(this.Lm)&&pi.Cn(this.km);if(!this.ab.G2()&&this.T2()&&!l)throw new Error("non-power-of-two tiled textures not supported");n.texImage2D(n.TEXTURE_2D,0,o,r.format,r.type,t),(l||this.ab.G2())&&this.g2&&(n.hint(n.GENERATE_MIPMAP_HINT,this.E2(n)),n.generateMipmap(n.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}n.bindTexture(n.TEXTURE_2D,null),this.ab.I2()}D2(){if(0<this.nd)throw new Error("texture still has references");if(!this.a2)throw new Error("already deleted texture");vi.delete(this);const t=this.ab.v2();t.deleteTexture(this.a2),this.a2=null}O2(){return!!this.a2}L2(){return this.a2}vb(){return this.ab}N2(){this.nd++}B2(){if(this.nd<=0)throw new Error("no more references");this.nd--}W2(){return this.nd}Xp(){return this.Lm}om(){return this.km}j2(){return this.l2}V2(){let t=this.Lm*this.km;switch(this.m2){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.g2&&(t+=Math.floor(t/3)),t}static Hb(){vi.clear()}static H2(){return vi.values()}}}{const Mi=self.Ds,xi=self.ys,Gh=xi.Ts,xh=xi.vs,Gi=new Set(["nearest","bilinear","trilinear"]),Ti={t2:"trilinear",alpha:!0,depth:!1,U2:!0,z2:!0,J2:0},_i=new Set;Mi.Hg.q2=class{constructor(t){this.ab=t,this.X2=null,this.Y2=null,this.a2=null,this.Z2=null,this.Lm=0,this.km=0,this.K2=!0,this.f2="trilinear",this.Q2=!0,this.tM=!1,this.sM=!0,this.iM=0,this.eM=xh.create(),this.hM=0,this.nM=0,this.rM=0}oM(t,s,i){i=Object.assign({},Ti,i);const e=this.ab.M2();if(this.a2||this.Z2)throw new Error("already created render target");if(this.f2=i.t2,this.Q2=!!i.alpha,this.tM=!!i.depth,this.sM=!!i.U2,this.K2=!!i.z2,this.iM=i.J2,!Gi.has(this.f2))throw new Error("invalid sampling");if(0<this.iM&&(e<2||this.sM))throw new Error("invalid use of multisampling");if(e<2&&(this.sM=!0),this.Lm=t,this.km=s,this.Lm<=0||this.km<=0)throw new Error("invalid render target size");this.aM();const h=this.ab.v2();if(this.X2=h.createFramebuffer(),this.tM&&(this.Y2=h.createFramebuffer()),this.sM){this.a2=this.ab.lM(this.Lm,this.km,{t2:this.f2,i2:this.Q2?"rgba8":"rgb8",e2:!1});const r=this.a2.L2();h.bindFramebuffer(h.FRAMEBUFFER,this.X2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,r,0),this.tM&&(h.bindFramebuffer(h.FRAMEBUFFER,this.Y2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,r,0))}else{this.Z2=h.createRenderbuffer(),h.bindRenderbuffer(h.RENDERBUFFER,this.Z2);const o=this.Q2?h.RGBA8:h.RGB8;if(0<this.iM){const a=h.getInternalformatParameter(h.RENDERBUFFER,o,h.SAMPLES);if(a&&a[0]){const l=a[0];this.iM>l&&(this.iM=l)}else this.iM=0}0===this.iM?h.renderbufferStorage(h.RENDERBUFFER,o,this.Lm,this.km):h.renderbufferStorageMultisample(h.RENDERBUFFER,this.iM,o,this.Lm,this.km),h.bindFramebuffer(h.FRAMEBUFFER,this.X2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.Z2),this.tM&&(h.bindFramebuffer(h.FRAMEBUFFER,this.Y2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.Z2)),h.bindRenderbuffer(h.RENDERBUFFER,null)}const n=this.ab.uM();this.tM&&n&&(h.bindFramebuffer(h.FRAMEBUFFER,this.X2),this.ab.cM()?h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.TEXTURE_2D,n,0):h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,n)),h.bindFramebuffer(h.FRAMEBUFFER,null),_i.add(this)}fM(t,s){if(this.Lm!==t||this.km!==s){this.Lm=t,this.km=s,this.aM();const i=this.ab.v2(),e=(i.bindFramebuffer(i.FRAMEBUFFER,this.X2),this.a2?this.a2.F2(new ImageData(this.Lm,this.km)):(i.bindRenderbuffer(i.RENDERBUFFER,this.Z2),i.renderbufferStorage(i.RENDERBUFFER,this.Q2?i.RGBA8:i.RGB8,this.Lm,this.km),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.ab.uM());this.tM&&e&&(this.ab.cM()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}}D2(){if(!this.a2&&!this.Z2)throw new Error("already deleted render target");_i.delete(this);const t=this.ab.v2(),s=(this.a2?(t.bindFramebuffer(t.FRAMEBUFFER,this.X2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.tM&&(t.bindFramebuffer(t.FRAMEBUFFER,this.Y2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.ab.dM(this.a2),this.a2=null):this.Z2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.X2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.tM&&(t.bindFramebuffer(t.FRAMEBUFFER,this.Y2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.Z2),this.Z2=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.ab.M2()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.X2),this.tM&&t.deleteFramebuffer(this.Y2),this.ab.pM());s.mM=null,this.X2=s.gM=null}aM(){this.ab.gw(this.eM,this.Lm/this.km),this.hM=this.ab.fw(),this.nM=this.ab.aw(),this.rM=this.ab.uw()}yM(){return this.X2}wM(){return this.Y2}vb(){return this.ab}SM(){return this.a2}bM(){return this.ab.fw()===this.hM&&this.ab.aw()===this.nM&&this.ab.uw()===this.rM||this.aM(),this.eM}vM(){return"nearest"!==this.f2}MM(){return this.Q2}xM(){return this.sM}GM(){return this.tM}Xp(){return this.Lm}om(){return this.km}TM(){return this.K2}_M(){return this.iM}IM(){const t={t2:this.f2,alpha:this.Q2,U2:this.sM};return this.K2||(t.width=this.Lm,t.height=this.km),t}CM(t){return"nearest"!==(t=Object.assign({},Ti,t)).t2===this.vM()&&!!t.alpha===this.MM()&&!!t.depth===this.GM()&&!(2<=this.ab.M2()&&!!t.U2!==this.xM())&&("number"==typeof t.width||"number"==typeof t.height?!this.TM()&&this.Xp()===Math.floor(t.width)&&this.om()===Math.floor(t.height):this.TM())}EM(){return this.a2?this.a2.L2():null}V2(){return this.a2?this.a2.V2():this.Lm*this.km*(this.Q2?4:3)}static async RM(t,s){const i=await t.PM(s,!0);return Mi._o(i)}static Hb(){_i.clear()}static AM(){return _i.values()}static FM(t,s){for(const i of _i)i.TM()&&i.fM(t,s)}}}{const m=self.Ds,Ii=self.ys,Gh=Ii.Ts,xh=Ii.vs,Ci=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);m.Hg.DM=class extends m.Hg.ob{static async OM(t,s){const i=t.v2(),e=s.src,h=s.LM,n=s.name,r=i.createShader(i.FRAGMENT_SHADER),o=(i.shaderSource(r,e),i.compileShader(r),i.createShader(i.VERTEX_SHADER)),a=(i.shaderSource(o,h),i.compileShader(o),i.createProgram()),l=(i.attachShader(a,r),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a),t.kM());if(l?await t.NM(()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await m.Tr(5),!i.getShaderParameter(r,i.COMPILE_STATUS)){const c=i.getShaderInfoLog(r);throw i.deleteShader(r),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+c)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const f=i.getShaderInfoLog(o);throw i.deleteShader(r),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const d=i.getProgramInfoLog(a);throw i.deleteShader(r),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+d)}const u=m.Od(i.getProgramInfoLog(a)||"").trim();return u&&!m.Ad(u)&&console.info(`[WebGL] Shader program '${n}' compilation log: `,u),i.deleteShader(r),i.deleteShader(o),a}static async BM(t,s){const i=await m.Hg.DM.OM(t,s);return new m.Hg.DM(t,i,s)}constructor(t,s,i){super(t,i);const e=t.v2(),h=t.pM(),n=(t.qS(),e.useProgram(s),this.WM=e,this.Ob=s,this.jM="<default-device-transform>"===i.name,e.getAttribLocation(s,"aPos")),r=e.getAttribLocation(s,"aTex"),o=(this.VM=e.getAttribLocation(s,"aPoints"),-1!==n&&(e.bindBuffer(e.ARRAY_BUFFER,t.HM),e.vertexAttribPointer(n,t.zS(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(n)),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.UM),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==this.VM&&(e.bindBuffer(e.ARRAY_BUFFER,t.zM),e.vertexAttribPointer(this.VM,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.VM)),e.bindBuffer(e.ARRAY_BUFFER,null),this.JM=new m.Hg.qM(this,"matP","mat4"),this.$M=new m.Hg.qM(this,"matMV","mat4"),this.XM=new m.Hg.qM(this,"color","vec4"),this.YM=new m.Hg.qM(this,"samplerFront","sampler"),this.ZM=new m.Hg.qM(this,"pointTexStart","vec2"),this.KM=new m.Hg.qM(this,"pointTexEnd","vec2"),this.QM=new m.Hg.qM(this,"zElevation","float"),this.tx=new m.Hg.qM(this,"tileSize","vec2"),this.ix=new m.Hg.qM(this,"tileSpacing","vec2"),this.hx=new m.Hg.qM(this,"color2_","vec4"),this.nx=new m.Hg.qM(this,"outlineThickness","float"),this.ox=new m.Hg.qM(this,"samplerBack","sampler"),this.lx=new m.Hg.qM(this,"samplerDepth","sampler"),this.ux=new m.Hg.qM(this,"destStart","vec2"),this.mx=new m.Hg.qM(this,"destEnd","vec2"),this.gx=new m.Hg.qM(this,"srcStart","vec2"),this.yx=new m.Hg.qM(this,"srcEnd","vec2"),this.wx=new m.Hg.qM(this,"srcOriginStart","vec2"),this.Sx=new m.Hg.qM(this,"srcOriginEnd","vec2"),this.bx=new m.Hg.qM(this,"pixelSize","vec2"),this.vx=new m.Hg.qM(this,"seconds","float"),this.Mx=new m.Hg.qM(this,"devicePixelRatio","float"),this.xx=new m.Hg.qM(this,"layerScale","float"),this.Gx=new m.Hg.qM(this,"layerAngle","float"),this.Tx=new m.Hg.qM(this,"layoutStart","vec2"),this._x=new m.Hg.qM(this,"layoutEnd","vec2"),this.Ix=new m.Hg.qM(this,"zNear","float"),this.Cx=new m.Hg.qM(this,"zFar","float"),this.Ex=!!(this.bx.Rx()||this.vx.Rx()||this.ox.Rx()||this.ux.Rx()||this.mx.Rx()||this.gx.Rx()||this.yx.Rx()||this.wx.Rx()||this.Sx.Rx()||this.Mx.Rx()||this.xx.Rx()||this.Gx.Rx()||this.Tx.Rx()||this._x.Rx()),i.parameters||[]);this.Px=[],this.Sb=this.bx.Rx()||this.gx.Rx()||this.yx.Rx()||this.wx.Rx()||this.Sx.Rx(),this.Ax=!1,this.Fx=!1,this.XM.Dx(1,1,1,1),this.hx.Dx(1,1,1,1),this.YM.Ox(0),this.ox.Ox(1),this.lx.Ox(2),this.ZM.Lx(0,0),this.KM.Lx(1,1),this.QM.kx(0),this.tx.Lx(0,0),this.ix.Lx(0,0),this.ux.Lx(0,0),this.mx.Lx(1,1),this.gx.Lx(0,0),this.yx.Lx(0,0),this.wx.Lx(0,0),this.Sx.Lx(0,0),this.bx.Lx(0,0),this.Mx.kx(1),this.Ix.kx(t.aw()),this.Cx.kx(t.uw()),this.xx.kx(1),this.Gx.kx(0),this.vx.kx(0),this.Tx.Lx(0,0),this._x.Lx(0,0),this.nx.kx(1);for(const l of o){const u=l[0],c=l[2],f=new m.Hg.qM(this,u,c);"color"===c?f.Nx(0,0,0):f.kx(0),this.Px.push(f)}this.jM?this.Bx(h.Wx):(this.jx(h.Wx,!0),this.Vx(h.Hx,!0));const a=h.Ux;e.useProgram(a?a.Ob:null)}tn(){this.WM.deleteProgram(this.Ob),this.Ob=null,this.ab.xw(this),this.WM=null,super.tn()}zx(){return this.WM}Jx(){return this.Ob}qx(){return this.Px.length}$x(t){return t<0||t>=this.Px.length?null:this.Px[t].Xx()}Yx(i){for(let t=0,s=i.length;t<s;++t)if(!this.Px[t].Zx(i[t]))return!1;return!0}Kx(i){for(let t=0,s=i.length;t<s;++t)this.Px[t].Qx(i[t])}tG(t,s,i,e,h,n,r,o,a,l){return!this.ox.Rx()&&!(this.bx.Rx()&&!this.bx.sG(h,n)||this.ux.Rx()&&!this.ux.sG(t.dl(),t.pl())||this.mx.Rx()&&!this.mx.sG(t.ml(),t.gl())||this.Mx.Rx()&&!this.Mx.iG(r)||this.xx.Rx()&&!this.xx.iG(o)||this.Gx.Rx()&&!this.Gx.iG(a)||this.gx.Rx()&&!this.gx.sG(s.dl(),s.pl())||this.yx.Rx()&&!this.yx.sG(s.ml(),s.gl())||this.wx.Rx()&&!this.wx.sG(i.dl(),i.pl())||this.Sx.Rx()&&!this.Sx.sG(i.ml(),i.gl())||this.Tx.Rx()&&!this.Tx.sG(e.dl(),e.pl())||this._x.Rx()&&!this._x.sG(e.pl(),e.gl())||this.vx.Rx()&&!this.vx.iG(l))}eG(t,s,i,e,h,n,r,o,a,l){this.ox.Rx()||(this.bx.Rx()&&this.bx.hG(h,n),this.ux.Rx()&&this.ux.hG(t.dl(),t.pl()),this.mx.Rx()&&this.mx.hG(t.ml(),t.gl()),this.Mx.Rx()&&this.Mx.nG(r),this.xx.Rx()&&this.xx.nG(o),this.Gx.Rx()&&this.Gx.nG(a),this.gx.Rx()&&this.gx.hG(s.dl(),s.pl()),this.yx.Rx()&&this.yx.hG(s.ml(),s.gl()),this.wx.Rx()&&this.wx.hG(i.dl(),i.pl()),this.Sx.Rx()&&this.Sx.hG(i.ml(),i.gl()),this.Tx.Rx()&&this.Tx.hG(e.dl(),e.pl()),this._x.Rx()&&this._x.hG(e.pl(),e.gl()),this.vx.Rx()&&this.vx.nG(l))}jx(t,s){this.Ax&&!s||this.jM||(this.JM.Rx()&&this.JM.rG(t),this.Ax=!0)}oG(){this.Ax=!1}Vx(t,s){this.Fx&&!s||this.jM||(this.$M.Rx()&&this.$M.rG(t),this.Fx=!0)}aG(){this.Fx=!1}Bx(t){if(!this.jM)throw new Error("not device transform shader");this.JM.rG(t);const s=this.ab,i=s.Xp()/2,e=s.om()/2,h=s.bw(i,e,s.iw(s.om()),i,e,0,s.om());this.$M.rG(h)}lG(t){this.XM.Rx()&&this.XM.uG(t[0],t[1],t[2],t[3])}static cG(){return Ci}static fG(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static dG(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static pG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static mG(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static gG(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static yG(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static wG(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static SG(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static bG(t,s,i){let e="";return 2<=t?e="#version 300 es\n":(s&&(e="#extension GL_EXT_frag_depth : enable\n"),i&&(e+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),e+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!i?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static vG(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static MG(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static xG(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static GG(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static TG(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static _G(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static IG(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static CG(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static EG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static PG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static AG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static FG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static DG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const Ei=self.Ds,Ri=self.ys,xh=Ri.vs,Pi=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);Ei.Hg.qM=class{constructor(t,s,i){if(!Pi.has(i))throw new Error("invalid uniform type");this.Mv=t,this.WM=this.Mv.zx(),this.nn=s,this.hf=i,this.OG="color"===this.hf,this.LG=this.WM.getUniformLocation(this.Mv.Jx(),s),this.kG=!!this.LG;const e=Pi.get(i);this.NG=new Float32Array(e),this.BG=new Float32Array(e)}tn(){this.Mv=null,this.WM=null,this.LG=null}Rx(){return this.kG}Xx(){return this.hf}WG(){return this.OG}kx(t){this.Rx()&&(this.NG[0]=t,this.BG.set(this.NG),this.WM.uniform1f(this.LG,t))}Ox(t){this.Rx()&&(this.NG[0]=t,this.BG.set(this.NG),this.WM.uniform1i(this.LG,t))}Lx(t,s){this.Rx()&&(this.NG[0]=t,this.NG[1]=s,this.BG.set(this.NG),this.WM.uniform2f(this.LG,t,s))}Nx(t,s,i){this.Rx()&&(this.NG[0]=t,this.NG[1]=s,this.NG[2]=i,this.BG.set(this.NG),this.WM.uniform3f(this.LG,t,s,i))}Dx(t,s,i,e){this.Rx()&&(this.NG[0]=t,this.NG[1]=s,this.NG[2]=i,this.NG[3]=e,this.BG.set(this.NG),this.WM.uniform4f(this.LG,t,s,i,e))}jG(t){t=Math.fround(t);const s=this.NG;s[0]!==t&&(s[0]=t,this.WM.uniform1f(this.LG,t))}VG(t){const s=this.NG;s[0]!==t&&this.WM.uniform1i(this.LG,s[0]=t)}HG(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.NG;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.WM.uniform2f(this.LG,t,s))}UG(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.NG;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.WM.uniform3f(this.LG,t,s,i))}uG(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const h=this.NG;h[0]===t&&h[1]===s&&h[2]===i&&h[3]===e||(h[0]=t,h[1]=s,h[2]=i,h[3]=e,this.WM.uniform4f(this.LG,t,s,i,e))}rG(t){const s=this.NG;xh.B(s,t)||(Ei.Er(s,t,0),this.WM.uniformMatrix4fv(this.LG,!1,t))}Zx(t){const s=this.BG;return this.WG()?s[0]===Math.fround(t.Xo())&&s[1]===Math.fround(t.Yo())&&s[2]===Math.fround(t.Zo()):s[0]===Math.fround(t)}Qx(t){const s=this.BG;this.WG()?(s[0]=t.Xo(),s[1]=t.Yo(),s[2]=t.Zo()):s[0]=t}iG(t){return this.BG[0]===Math.fround(t)}sG(t,s){const i=this.BG;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}nG(t){this.BG[0]=t}hG(t,s){const i=this.BG;i[0]=t,i[1]=s}}}{const Ai=self.Ds,Fi=self.ys,Vh=Fi._s,xh=Fi.vs;Ai.Hg.zG=class{constructor(t){this.renderer=t,this.Hx=xh.create(),this.Wx=xh.create(),this.mM=null,this.gM=null,this.JG=!1,this.qG=Vh._(1,1,1,1),this.Ux=null,this.$G=new Ai.Rect,this.clearColor=Ai.Qh(Ai.Oo,0,0,0,0)}},Ai.Hg.XG=class{constructor(t){const s=new ArrayBuffer(96);this.hf=0,this.YG=t,this.WM=t.renderer.v2(),this.ZG=0,this.KG=0,this.QG=null,this.tT=new Float32Array(s,0,16),this.sT=new Float32Array(s,64,4),this.iT=new Float32Array(s,80,4),this.eT=[]}hT(t,s){this.hf=1,this.ZG=t,this.KG=s}nT(){const t=this.WM;t.drawElements(t.TRIANGLES,this.KG,t.UNSIGNED_SHORT,this.ZG)}rT(t){this.hf=2,this.QG=t}oT(){const t=this.WM,s=this.QG;t.bindTexture(t.TEXTURE_2D,s?s.L2():null)}aT(t){this.hf=3,t.ta(this.sT,0)}lT(){const t=this.sT,s=this.YG;Vh.T(s.qG,t),s.Ux.lG(t)}uT(t){this.hf=21,t.ta(this.sT,0)}cT(){const t=this.sT,s=this.YG.Ux;s.hx.Rx()&&s.hx.uG(t[0],t[1],t[2],t[3])}fT(t,s){this.hf=4,this.ZG=t,this.KG=s}dT(){this.WM.blendFunc(this.ZG,this.KG)}pT(t,s,i,e){this.hf=5;const h=this.sT;h[0]=t,h[1]=s,h[2]=i,h[3]=e}mT(){const t=this.sT;this.WM.viewport(t[0],t[1],t[2],t[3])}gT(t){this.hf=6,xh.T(this.tT,t)}yT(){const t=this.YG,i=t.renderer.by,e=t.Ux,h=this.tT;for(let t=0,s=i.length;t<s;++t){const n=i[t];n===e?n.jx(h,!0):n.oG()}xh.T(t.Wx,h)}wT(t){this.hf=7,xh.T(this.tT,t)}ST(){const t=this.YG,i=t.renderer.by,e=t.Ux,h=this.tT;for(let t=0,s=i.length;t<s;++t){const n=i[t];n===e?n.Vx(h,!0):n.aG()}xh.T(t.Hx,h)}bT(t){this.hf=8,this.QG=t}vT(){const t=this.WM,s=this.QG,i=this.YG;s?(i.mM=s.yM(),i.gM=s.wM(),i.JG&&i.gM?t.bindFramebuffer(t.FRAMEBUFFER,i.gM):t.bindFramebuffer(t.FRAMEBUFFER,i.mM)):(i.mM=null,i.gM=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}MT(t){this.hf=9,t.ta(this.tT,0)}xT(t,s,i,e){this.hf=9;const h=this.tT;h[0]=t,h[1]=s,h[2]=i,h[3]=e}GT(){const t=this.WM,s=this.tT,i=this.YG,e=i.clearColor,h=s[0],n=s[1],r=s[2],o=s[3];e.ra(h,n,r,o)||(t.clearColor(h,n,r,o),e.Wo(h,n,r,o)),t.clear(t.COLOR_BUFFER_BIT)}TT(t){this.hf=15,t.ta(this.tT,0)}_T(){const t=this.tT;this.YG.$G.set(t[0],t[1],t[2],t[3])}IT(t,s){this.hf=10,this.ZG=t,this.KG=1,this.tT[0]=s}CT(){const t=this.WM,s=this.YG,i=s.renderer,e=i.xy,h=(t.useProgram(e.Ob),e.jx(s.Wx,!1),e.Vx(s.Hx,!1),s.$G),n=(e.ZM.Rx()&&e.ZM.HG(h.dl(),h.pl()),e.KM.Rx()&&e.KM.HG(h.ml(),h.gl()),this.tT[0]);if(e.QM.Rx()&&e.QM.jG(n),e.XM.Rx()){const r=s.qG;e.XM.uG(r[0],r[1],r[2],r[3])}t.drawArrays(t.POINTS,this.ZG/4,this.KG),t.useProgram(s.Ux.Ob)}ET(t){this.hf=11,this.QG=t}RT(){const t=this.WM,s=this.YG,i=this.QG;if(s.Ux=i,t.useProgram(i.Ob),i.jx(s.Wx,!1),i.Vx(s.Hx,!1),i.XM.Rx()){const e=s.qG;i.XM.uG(e[0],e[1],e[2],e[3])}}PT(){this.hf=12}AT(){const t=this.YG.Ux,s=this.WM,i=this.tT,e=this.sT,h=this.iT;if(t.ox.Rx()){const n=this.YG.renderer,r=this.QG;n.FT!==r&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,r?r.L2():null),n.FT=r,s.activeTexture(s.TEXTURE0))}t.bx.Rx()&&t.bx.HG(i[0],i[1]),t.ux.Rx()&&t.ux.HG(i[2],i[3]),t.mx.Rx()&&t.mx.HG(i[4],i[5]),t.Mx.Rx()&&t.Mx.jG(this.KG),t.xx.Rx()&&t.xx.jG(i[6]),t.Gx.Rx()&&t.Gx.jG(i[7]),t.gx.Rx()&&t.gx.HG(i[12],i[13]),t.yx.Rx()&&t.yx.HG(i[14],i[15]),t.wx.Rx()&&t.wx.HG(h[0],h[1]),t.Sx.Rx()&&t.Sx.HG(h[2],h[3]),t.Tx.Rx()&&t.Tx.HG(e[0],e[1]),t._x.Rx()&&t._x.HG(e[2],e[3]),t.vx.Rx()&&t.vx.jG(this.ZG)}DT(){this.hf=13}OT(){const t=this.YG.Ux,i=t.Px,e=this.eT;for(let t=0,s=i.length;t<s;++t){const h=i[t],n=e[t];h.WG()?h.UG(n.Xo(),n.Yo(),n.Zo()):h.jG(n)}}LT(t){this.hf=14,this.QG=t}kT(){const t=this.WM,s=this.QG,i=this.YG.mM;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}NT(t,s,i){this.hf=17;const e=this.tT,h=this.YG.renderer,n=(e[0]=t.Xp(),e[1]=t.om(),e[2]=(s||h).Xp(),e[3]=(s||h).om(),e[4]=t.vM()?1:0,e[5]="stretch"===i,this.eT);Ai.Pr(n),n.push(t.yM()),n.push(s?s.yM():null)}BT(){const t=this.tT,s=this.eT,i=this.WM,e=t[0],h=t[1],n=t[2],r=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,h,0,0,n,r,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const c=Math.min(e,n),f=Math.min(h,r),d=Math.max(h-r,0),p=Math.max(r-h,0);i.blitFramebuffer(0,d,c,f+d,0,p,c,f+p,i.COLOR_BUFFER_BIT,i.NEAREST)}}WT(t){this.hf=18,this.QG=t}jT(){this.QG.VT(),this.QG=null}HT(t){this.hf=19,this.QG=t}UT(){this.QG.zT(),this.QG=null}JT(t,s,i){this.hf=20;const e=this.tT;e[0]=t,e[1]=s,e[2]=i}qT(){const t=this.YG.Ux,s=this.tT;t.bx.Rx()&&t.bx.HG(s[0],s[1]),t.nx.Rx()&&t.nx.jG(s[2])}$T(t,s,i,e,h,n,r){this.hf=16;const o=this.tT;t.ta(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=h/i,o[8]=n/s,o[9]=r/i}XT(){const t=this.YG.Ux,s=this.tT;t.gx.Rx()&&t.gx.HG(s[0],s[1]),t.bx.Rx()&&t.bx.HG(s[4],s[5]),t.tx.Rx()&&t.tx.HG(s[6],s[7]),t.ix.Rx()&&t.ix.HG(s[8],s[9])}YT(t,s,i,e,h,n,r){this.hf=29;const o=this.tT;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=h,o[5]=n,o[6]=r}ZT(){const t=this.YG.Ux,s=this.tT;t.bx.Rx()&&t.bx.HG(s[0],s[1]),t.tx.Rx()&&t.tx.HG(s[2],s[3]),t.nx.Rx()&&t.nx.jG(s[4]),t.ix.Rx()&&t.ix.HG(s[5],s[6])}KT(t){this.hf=22,this.ZG=t?1:0}QT(){const t=this.WM,s=0!==this.ZG;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}t_(t){this.hf=23,this.ZG=t?1:0}s_(){const t=this.WM;0===this.ZG?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}i_(t){this.hf=24,this.ZG=t?1:0}e_(){const t=this.WM,s=this.YG,i=s.renderer,e=0!==this.ZG;s.JG=e,t.activeTexture(t.TEXTURE2),e?(s.gM&&t.bindFramebuffer(t.FRAMEBUFFER,s.gM),t.bindTexture(t.TEXTURE_2D,i.uM())):(t.bindTexture(t.TEXTURE_2D,null),s.gM&&t.bindFramebuffer(t.FRAMEBUFFER,s.mM)),t.activeTexture(t.TEXTURE0)}h_(){this.hf=25}n_(){const t=this.WM;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}r_(){this.hf=26}o_(){const t=this.WM;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}a_(){this.hf=27}l_(){const t=this.WM;t.disable(t.STENCIL_TEST)}u_(t,s,i,e,h){this.hf=28,this.ZG=t?1:0;const n=this.tT;n[0]=s,n[1]=i,n[2]=e,n[3]=h}c_(){const t=this.WM,s=this.tT;1===this.ZG?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}f_(){switch(this.hf){case 1:return void this.nT();case 2:return void this.oT();case 3:return void this.lT();case 4:return void this.dT();case 5:return void this.mT();case 6:return void this.yT();case 7:return void this.ST();case 8:return void this.vT();case 9:return void this.GT();case 10:return void this.CT();case 11:return void this.RT();case 12:return void this.AT();case 13:return void this.OT();case 14:return void this.kT();case 15:return void this._T();case 16:return void this.XT();case 17:return void this.BT();case 18:return void this.jT();case 19:return void this.UT();case 20:return void this.qT();case 21:return void this.cT();case 22:return void this.QT();case 23:return void this.s_();case 24:return void this.e_();case 25:return void this.n_();case 26:return void this.o_();case 27:return void this.l_();case 28:return void this.c_();case 29:return void this.ZT()}}}}{let I=function(t,s,i,e,h,n){s?t.strokeRect(i,e,h,n):t.fillRect(i,e,h,n)},t=function(t){return t*(4/3)},o=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};I,t,o;const Di=self.Ds,Oi=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Li={timeout:60},ki=new Di.Oo(0,0,0,1),Ni=new Set(["left","center","right"]),Bi=new Set(["top","center","bottom"]),Wi=new Set(["word","cjk","character"]),ji=new Set(["ltr","rtl"]),Vi=new Set;Di.FontManager&&Di.FontManager.addEventListener("fontload",t=>{const s=t.font.jc();for(const i of Vi)(i.d_()||Di.fh(i.p_(),s))&&i.m_()});let s=!1,i=!1;Di.Hg.rb=class{constructor(t,s){s=Object.assign({},Li,s),this.ab=t,this.g_="Arial",this.y_=16,this.w_=1,this.S_=0,this.b_=!1,this.v_=!1,this.M_="black",this.x_=!1,this.Up=null,this.G_=!0,this.T_=null,this.__=new Set,this.I_="left",this.C_="top",this.Yc="",this.E_=null,this.R_=Di.Qh(Di.Vp),this.P_="word",this.A_="ltr",this.F_=!1,this.D_=!1,this.O_=!1,this.L_=-1,this.k_=0,this.N_=0,this.B_=0,this.Lm=0,this.km=0,this.W_=1,this.j_=null,this.V_=null,this.H_=null,this.U_=null,this.z_=-1,this.J_=-1,this.q_="",this.X_="",this.Y_="",this.Z_=1,this.K_=1,this.Q_=t=>this.tI(t),this.a2=null,this.sI=new Di.Rect,this.iI=1,this.eI=new Di.qf(()=>{this.hI(),this.nI(8,8)},s.timeout),this.rI=null,this.oI=!1,Vi.add(this)}tn(){this.T_=null,this.__.clear(),this.Up=null,this.E_=null,this.j_=null,this.V_=null,this.H_=null,this.U_=null,this.Q_=null,this.eI.tn(),this.rI=null,this.hI(),this.R_.Uu(),this.R_=null,this.ab=null,this.oI=!0,Vi.delete(this)}aI(){this.O_=!0}lI(){this.aI(),this.D_=!0}m_(){this.lI(),this.F_=!0}uI(t){if(this.x_!==(t=!!t)){this.x_=t;const s=this.x_?"alphabetic":"top";this.V_&&(this.V_.textBaseline=s),this.H_&&(this.H_.textBaseline=s),this.m_()}}d_(){return this.x_}qp(t){this.Up!==t&&(this.Up=t,this.R_.qp(t),this.Up&&this.Up.Rg()&&this.Up.Pg().then(()=>this.aI()),this.m_())}cI(t){this.G_!==(t=!!t)&&(this.G_=t,this.aI())}fI(t){this.g_!==(t=t||"serif")&&(this.g_=t,this.m_())}p_(){return this.g_}dI(t){this.y_!==(t=t<.1?.1:t)&&(this.y_=t,this.m_())}pI(){return this.y_}mI(t){this.w_!==t&&(this.w_=t,this.m_())}gI(t){this.S_!==t&&(this.S_=t,this.lI())}yI(){return this.S_}wI(t){this.b_!==(t=!!t)&&(this.b_=t,this.m_())}SI(){return this.b_}bI(t){this.v_!==(t=!!t)&&(this.v_=t,this.m_())}vI(){return this.v_}MI(t){t=Math.floor(t),this.L_!==t&&(this.L_=t,this.aI())}xI(){return this.L_}GI(t,s){let i=[];(this.b_||s.Km("b"))&&i.push("bold"),(this.v_||s.Km("i"))&&i.push("italic");const e=s.Zm("size"),h=(e?parseFloat(e.Op):this.y_)*this.w_;i.push(t?h+"pt":h*this.TI()+"pt");let n=this.g_,r=s.Zm("font");return r&&r.Op&&(n=r.Op,this.T_)&&!this.__.has(n)&&(this.T_(n),this.__.add(n)),n&&(Oi.has(n)?i.push(n):i.push('"'+n+'"')),i.join(" ")}Vb(t){t instanceof Di.Oo&&(t=t.da()),this.M_!==t&&(this.M_=t,this.aI())}_I(t,s,i){ki.jo(t,s,i),this.Vb(ki)}II(t){if(!Ni.has(t))throw new Error("invalid horizontal alignment");this.I_!==t&&(this.I_=t,this.lI())}CI(){return this.I_}EI(t){if(!Bi.has(t))throw new Error("invalid vertical alignment");this.C_!==t&&(this.C_=t,this.lI())}RI(){return this.C_}AI(t){if(!Wi.has(t))throw new Error("invalid word wrap mode");this.P_!==t&&(this.P_=t,this.m_())}FI(){return this.P_}DI(t){if(!ji.has(t))throw new Error("invalid text direction");this.A_!==t&&(this.A_=t,this.V_&&(this.V_.direction=this.A_),this.H_&&(this.H_.direction=this.A_),this.m_())}OI(){return this.A_}Qc(t){this.Yc!==t&&(this.Yc=t,this.m_())}LI(){return this.Yc}TI(){return this.iI*this.W_*self.devicePixelRatio}kI(n,r,o){if(void 0===o&&(o=1),!(n<=0||this.N_===n&&this.B_===r&&this.W_===o)){let t=this.N_,s=(this.N_=n,this.B_=r,this.W_=o,self.devicePixelRatio),i=(this.Lm=this.N_*this.W_*s,this.km=this.B_*this.W_*s,Math.max(this.Lm,this.km)),e=Math.min(this.ab.b2(),4096),h=1;e<i&&(h=e/i,this.Lm=Math.min(this.Lm*h,e),this.km=Math.min(this.km*h,e)),this.iI=h,this.N_!==t?this.m_():this.lI()}}Xp(){return this.Lm}om(){return this.km}NI(){return this.W_}BI(){return this.WI(),this.R_.Dm()}jI(){return this.WI(),this.R_.Om()+this.R_.Jp()*(this.S_+4)-this.S_}VI(){this.WI();let t=0;for(const s of this.R_.zp())for(const i of s.pm())t+=i.gm();return t}SM(){return this.eI.Kf(),this.HI(),this.a2}UI(t,s){this.WI();const i=this.TI(),e=this.R_.zp();for(const h of e){const n=h.lm()*i;if(s>=h.$m()-h.om()*i+n&&s<h.$m()+n)for(const r of h.pm())if(t>=r.Jm()&&t<r.Jm()+r.Xp()*i)return r}return null}*zI(t){this.WI();const s=this.R_.zp();for(const i of s)for(const e of i.pm()){const h=e.Zm("tag");h&&Di.fh(h.Op,t)&&(yield e)}}JI(t,s){for(const i of this.zI(t)){if(0===s)return i;--s}return null}qI(t){let s=0;for(const i of this.zI(t))++s;return s}HI(){this.a2&&!this.O_&&!this.D_&&!this.F_||this.oI||this.Lm<=0||this.km<=0||(this.O_=!1,this.$I())}$I(){this.oI||(this.WI(),this.nI(Math.max(Di.En(Math.ceil(this.Lm)),128),Math.max(Di.En(Math.ceil(this.km)),64)),this.XI(),this.YI(),this.eI.Kf())}nI(t,s){this.j_||(this.j_=Di.xo(16,16));let i=!1;this.z_===t&&this.J_===s||(this.z_=t,this.J_=s,this.j_.width=t,this.j_.height=s,i=!0),this.V_||(this.V_=this.j_.getContext("2d"),i=!0),i?(this.V_.textBaseline=this.x_?"alphabetic":"top",this.V_.direction=this.A_,this.V_.font=this.q_,this.V_.fillStyle=this.Y_,this.V_.strokeStyle=this.Y_,this.V_.globalAlpha=this.Z_,this.V_.lineWidth=this.K_):this.V_.clearRect(0,0,t,s)}ZI(){this.H_||(this.H_=Di.xo(16,16).getContext("2d"),this.U_=Di.xo(16,16).getContext("2d"),this.H_.textBaseline=this.x_?"alphabetic":"top",this.U_.textBaseline="top",this.H_.direction=this.A_,this.U_.direction=this.A_)}KI(t){this.X_!==t&&(this.X_=t,this.H_.font=t,this.U_.font=t)}QI(){if(!s){s=!0,this.ZI();const t=this.H_.measureText("test");i="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return i}WI(){this.tC(),this.sC()}tC(){this.F_&&(this.ZI(),!this.x_||this.E_&&this.E_.toString()===this.Yc||(this.E_=new Di._h(this.Yc,{Mp:!0})),this.R_.Vp(this.x_?this.E_.Fp():this.Yc,this.Q_,this.N_,this.P_,0),this.F_=!1)}sC(){this.D_&&(this.iC(),this.D_=!1)}tI(t){let s=t.im()?t.Gm().join(""):" ",i=(this.KI(this.GI(!0,t)),t.Zm("size")),e=(i?parseFloat(i.Op):this.y_)*this.w_,h=this.H_.measureText(s),n=0;if(this.x_&&this.QI()){const r=this.U_.measureText(s);n=h.fontBoundingBoxAscent-r.fontBoundingBoxAscent}return{width:h.width,height:4/3*e,fontBoundingBoxAscent:h.fontBoundingBoxAscent||0,fontBoundingBoxDescent:h.fontBoundingBoxDescent||0,tm:n}}eC(t){this.q_!==t&&(this.q_=t,this.V_.font=t)}hC(t){this.Y_!==t&&(this.Y_=t,this.V_.fillStyle=t,this.V_.strokeStyle=t)}nC(t){this.Z_!==t&&(this.Z_=t,this.V_.globalAlpha=t)}rC(t){this.K_!==t&&(this.K_=t,this.V_.lineWidth=t)}iC(){let e=this.TI(),h=(4+this.S_)*e,n=0,r=this.R_.zp();if(0!==r.length){for(const s of r){s.zm(NaN),s.qm(NaN);for(const o of s.pm())o.zm(NaN),o.qm(NaN)}let t=this.x_&&this.QI(),i=r[0].om()*e;if("center"===this.C_){const a=r.reduce((t,s)=>t+s.om()*e+h,0)-h;n=Math.max(this.km/2-a/2,0),t&&(i=r[0].um()*e)}else if("bottom"===this.C_){const l=r.reduce((t,s)=>t+s.om()*e+h,0)-this.S_*e,u=t?r.at(-1).lm()*e:0;n=this.km-l-u-2}for(let t=0,s=r.length;t<s;++t){const c=r[t],f=c.om()*e,d=n;if(this.x_){if(n+=0===t?i:f,0<t&&n>this.km-4*e)break}else if(0<t&&n>=this.km-f)break;0<=d&&this.oC(c,n,e),this.x_||(n+=f),n+=h}}}oC(t,s,i){let e=0;"center"===this.I_?e=Math.floor((this.Lm-t.Xp()*i)/2):"right"===this.I_&&(e=this.Lm-t.Xp()*i),t.zm(e),t.qm(s);for(const h of"ltr"===this.A_?t.pm():t.Hm())this.aC(h,e,s,i),e+=h.Xp()*i}aC(t,s,i,e){const h=t.Zm("offsetx"),n=(s+=h?o(h.Op,t.om())*e:0,t.Zm("offsety"));if(i+=n?o(n.Op,t.om())*e:0,t.nm()){const r=t.Zm("iconoffsety");i+=r?o(r.Op,t.om())*e:.2*t.om()*e}t.zm(s),t.qm(i)}XI(){this.V_.imageSmoothingEnabled=this.G_,this.V_.imageSmoothingQuality="high",this.k_=0;const t=this.TI(),s=this.R_.zp();for(const i of s)this.lC(i,t)}lC(t,s){const i=t.Jm(),e=t.$m();if(Number.isFinite(i)&&Number.isFinite(e))for(const h of"ltr"===this.A_?t.pm():t.Hm())this.uC(h,s,t.om())}uC(r,o,a){const l=this.V_,u=r.Jm(),c=r.$m();if(Number.isFinite(u)&&Number.isFinite(c)){let t=a/16,s=r.Xp()*o,i=r.om()*o,e=r.om()/16,h=(4+this.S_)*o,n=r.im()?r.Gm():null;if(-1!==this.L_){if(this.k_>=this.L_)return;r.im()&&this.k_+n.length>this.L_&&(n=n.slice(0,this.L_-this.k_),s=this.tI(r).width*o),this.k_+=r.gm()}const f=r.Zm("background"),d=r.Km("u"),p=r.Km("s");if((!r.im()||!Di.Fd(n)||f||d||p)&&!r.Km("hide")){const m=r.Zm("color"),g=r.Zm("opacity"),y=(this.nC(g?parseFloat(g.Op)/100:1),f&&(this.hC(f.Op),l.fillRect(u,c-i,s,i+h)),r.Zm("linethickness")),w=y?parseFloat(y.Op):1,S=r.Km("stroke");if(S&&this.rC(.5*e*w*this.TI()),r.im()){const b=n.join("");if(this.eC(this.GI(!1,r)),!S){this.rC(.5*e*w*this.TI());const v=r.Zm("outlineback");v&&(this.hC(v.Op),this.cC(!0,b,u,c,s))}if(this.hC(m?m.Op:this.M_),this.cC(S,b,u,c,s),!S){this.rC(.5*e*w*this.TI());const M=r.Zm("outline");M&&(this.hC(M.Op),this.cC(!0,b,u,c,s))}}else if(r.nm()&&0<r.Xp()){const x=r.rg(this.Up);x&&l.drawImage(x,u,c-i,s,i)}if(this.hC(m?m.Op:this.M_),d&&I(l,S,u,c+o*t,s,o*t*w),p){const G=c-i/4,T=o*e,_=G+T/2;l.fillRect(u,_-T*w/2,s,T*w)}}}}cC(t,s,i,e,h){"rtl"===this.A_&&(i+=h),t?"Gecko"===Di.hi.ci?this.V_.strokeText(s,i,e,h):this.V_.strokeText(s,i,e):"Gecko"===Di.hi.ci?this.V_.fillText(s,i,e,h):this.V_.fillText(s,i,e)}YI(){this.ab.fC()||(this.a2||(this.a2=this.ab.lM(this.j_.width,this.j_.height,{e2:!0,h2:"high"})),this.ab.dC(this.j_,this.a2),this.sI.set(0,0,this.Lm/this.a2.Xp(),this.km/this.a2.om()),this.rI&&this.rI())}pC(){return this.sI}hI(){this.a2&&(this.ab.fC()||this.ab.dM(this.a2),this.a2=null)}static Hb(){for(const t of Vi)t.hI()}static mC(){return Vi.values()}}}{const Hi=self.Ds;class Ui{constructor(t){this.WM=t.v2(),this.gC=t.M2(),this.yC=t.wC(),this.SC=null,this.Zf=!1,this.bC=!1,this.vC=0,1===this.gC?this.SC=this.yC.createQueryEXT():this.SC=this.WM.createQuery()}tn(){this.MC(),this.WM=null,this.yC=null,this.bC=!1}MC(){this.SC&&(1===this.gC?this.yC.deleteQueryEXT(this.SC):this.WM.deleteQuery(this.SC),this.SC=null)}VT(){if(this.Zf)throw new Error("query already active");1===this.gC?this.yC.beginQueryEXT(this.yC.TIME_ELAPSED_EXT,this.SC):this.WM.beginQuery(this.yC.TIME_ELAPSED_EXT,this.SC),this.Zf=!0}zT(){if(!this.Zf)throw new Error("query not active");1===this.gC?this.yC.endQueryEXT(this.yC.TIME_ELAPSED_EXT):this.WM.endQuery(this.yC.TIME_ELAPSED_EXT),this.Zf=!1}xC(){if(this.SC&&!this.bC&&!this.Zf){let t;t=1===this.gC?this.yC.getQueryObjectEXT(this.SC,this.yC.QUERY_RESULT_AVAILABLE_EXT):this.WM.getQueryParameter(this.SC,this.WM.QUERY_RESULT_AVAILABLE);const s=this.WM.getParameter(this.yC.GPU_DISJOINT_EXT);t&&!s&&(1===this.gC?this.vC=this.yC.getQueryObjectEXT(this.SC,this.yC.QUERY_RESULT_EXT):this.vC=this.WM.getQueryParameter(this.SC,this.WM.QUERY_RESULT),this.vC/=1e9,this.bC=!0),(t||s)&&this.MC()}}GC(){return this.bC}TC(){if(this.bC)return this.vC;throw new Error("no result available")}}Hi.Hg._C=class{constructor(t){this.ab=t,this.Jy=t.$S(),this.Zf=!1,this.IC=null,this.CC=!1,this.EC=null,this.RC=[]}tn(){for(const t of this.RC)t instanceof Ui&&t.tn();Hi.Pr(this.RC),this.IC=null,this.EC=null,this.ab=null}VT(){if(this.Zf)throw new Error("query already active");const t=this.ab.PC();0<t.length?(this.CC=!0,this.IC=t.at(-1),this.IC.AC(),this.IC.RC.push(this)):(this.CC=!1,this.IC=null),this.Zf=!0,t.push(this),this.FC()}zT(){if(!this.Zf)throw new Error("query not active");const t=this.ab.PC().pop();if(t!==this)throw new Error("can only end most nested query");this.Zf=!1,this.AC(),this.IC&&(this.IC.FC(),this.IC=null)}FC(){this.EC=Hi.Qh(Ui,this.ab),this.RC.push(this.EC),this.EC.VT()}AC(){this.EC.zT(),this.EC=null}xC(){for(const t of this.RC)t.xC()}DC(){return this.CC}GC(){return this.RC.every(t=>t.GC())}TC(){return this.RC.reduce((t,s)=>t+s.TC(),0)}$S(){return this.Jy}}}{const zi=self.Ds;zi.Hg.OC=class{constructor(t,s=1e3){this.ab=t,this.LC=s,this.kC=[],this.ab.NC(this)}tn(){this.Uu(),this.ab.BC(this),this.ab=null}Uu(){for(const t of this.kC)t.tn();zi.Pr(this.kC)}WC(){const t=new zi.Hg._C(this.ab);if(this.kC.push(t),this.kC.length>this.LC){const s=this.kC.shift();s.tn()}return t}jC(t){for(const s of this.kC){if(s.$S()>=t)return;if(s.DC())return;s.xC()}}VC(t,s){if(s<=t)return NaN;let i=0;for(const e of this.kC){if(e.$S()>=s)break;if(!(e.$S()<t)){if(!e.GC())return NaN;i+=e.TC()}}return i}HC(i){for(let t=0,s=this.kC.length;t<s;++t){const e=this.kC[t];if(!(e.$S()<i))return void(0<t&&this.kC.splice(0,t));e.tn()}}}}{let i=function(){h=-1;for(const t of e)t.UC()&&(t.resolve(),e.delete(t));0<e.size&&(h=self.requestAnimationFrame(i))},b=(i,self.Ds),t=self.ys,v=(t.Ts,t._s),y=t.vs,n={powerPreference:"default",zC:!0,alpha:!1,depth:!1,JC:!1,qC:2,failIfMajorPerformanceCaveat:!1},r=new Set(["default","low-power","high-performance"]),c=new b.Hl(0,0,1,0,1,1,0,1),w=y.create(),S=y.create(),M=new b.Hl,x=new b.Rect,G=null,e=(b.isDebug&&(self.$C=function(){G?G.loseContext():console.warn("WEBGL_lose_context not supported")},self.XC=function(){G?G.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),h=-1;b.Hg.YC=class extends b.Hg.oy{constructor(t,s){if(super(s),s=Object.assign({},n,s),!r.has(s.powerPreference))throw new Error("invalid power preference");let i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat},e=null,h=0;if(2<=s.qC&&(e=t.getContext("webgl2",i),h=2),e||(e=t.getContext("webgl",i),h=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.WM=e,this.ZC=e.getContextAttributes(),this.KC=e.getParameter(e.VERSION),this.gC=h,this.QC=v.create(),this.tE=!1,this.sE=y.create(),this.iE=!!s.depth,this.eE=!(!s.depth||!s.JC),this.hE=this.iE,this.nE=!1,this.rE=null,this.oE=!0,this.aE=0,this.lE=0,this.HM=null,this.UM=null,this.uE=null,this.zM=null,this.cE=new Float32Array(8e3*this.zS()),this.fE=new Uint16Array(12e3),this.dE=new Float32Array(16e3),this.pE=new Float32Array(32e3),this.mE=0,this.gE=0,this.yE=0,this.wE=0,this.SE=null,this.bE=null,this.vE=[],this.ME=0,this.xE=0,this.GE=null,this.TE=0,this.YG=b.Qh(b.Hg.zG,this),this._E=b.Qh(b.Oo,1,1,1,1),this.IE=null,this.FT=null,this.CE=0,this.EE=0,this.RE=new b.Rect,this.PE=b.Qh(b.Rect,0,0,-1,-1),this.AE=0,this.FE=-1,this.DE=0,this.OE=0,this.LE=0,this.kE="(unavailable)",this.NE="(unavailable)",this.BE=[],this.WE=!1,this.jE=null,this.VE=null,this.HE=null,this.UE=null,this.zE=null,this.JE=null,this.qE=0,this.$E=!!s.zC,this.yC=null,this.XE=new Set,this.YE=[],this.Xy(this.fE)}tb(){return!0}async Ky(){super.Ky();const t=this.WM,s=this.zS(),i=(this._E.Wo(1,1,1,1),this.IE=null,this.FT=null,this.mE=0,this.yE=0,this.wE=8e3*s-4*s,b.Pr(this.vE),this.ME=0,this.xE=0,this.SE=null,this.GE=null,this.RE.set(0,0,1,1),this.TE=0,this.YG),e=(i.Ux=null,i.mM=null,i.gM=null,v.set(i.qG,1,1,1,1),i.clearColor.Wo(0,0,0,0),i.$G.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.CE=t.ONE,this.EE=t.ONE_MINUS_SRC_ALPHA,this.ZE(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.iE?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.hE=this.iE,this.nE=!1,this.zM=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.zM),t.bufferData(t.ARRAY_BUFFER,this.pE.byteLength,t.DYNAMIC_DRAW),this.HM=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.HM),t.bufferData(t.ARRAY_BUFFER,this.cE.byteLength,t.DYNAMIC_DRAW),this.UM=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.UM),t.bufferData(t.ARRAY_BUFFER,this.dE.byteLength,t.DYNAMIC_DRAW),this.uE=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.uE),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.fE,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.FE=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),h=(this.DE=e[0],this.OE=e[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),n=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),r=(this.LE=h&&n?Math.min(h.precision,n.precision):0,2048<this.OE&&(this.OE=2048),this.BE=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(r&&(this.kE=t.getParameter(r.UNMASKED_VENDOR_WEBGL),this.NE=t.getParameter(r.UNMASKED_RENDERER_WEBGL)),this.jE=t.getExtension("KHR_parallel_shader_compile"),b.isDebug&&(G=t.getExtension("WEBGL_lose_context")),this.$E&&(1===this.M2()?this.yC=t.getExtension("EXT_disjoint_timer_query"):this.yC=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.VE=t.getExtension("EXT_texture_filter_anisotropic"),this.VE?this.qE=t.getParameter(this.VE.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.qE=0,this.M2()<2&&this.iE&&this.eE&&(this.HE=t.getExtension("WEBGL_depth_texture"),!this.HE))throw new Error("no depth texture support");this.M2()<2&&(this.UE=t.getExtension("EXT_frag_depth"),this.zE=t.getExtension("OES_standard_derivatives"),this.JE=t.getExtension("EXT_shader_texture_lod"));let o=b.Hg.DM,a=o.fG(!1),l=o.pG(),u=a,c=o.xG(),f=o.vG(),d=o.yG(),p=o.fG(!0),m=!1;this.iE&&(this.M2()<2?this.UE&&(l=o.mG(),c=o.GG(),d=o.wG(),m=!0):(u=o.dG(),l=o.gG(),c=o.TG(),f=o.MG(),d=o.SG(),p=o.dG(!0)));const g=o.bG(this.M2(),m,this.zE&&this.JE),y=2<=this.M2()?o.dG():a,w=[[l,u,"<default>"],[l,u,"<default-device-transform>"],[c,f,"<point>"],[o._G(),a,"<fill>"],[o.IG(),a,"<lineargradient>"],[o.CG(),a,"<penumbra>"],[o.PG(),a,"<hardellipse>"],[o.AG(),a,"<hardellipseoutline>"],[o.FG(),a,"<smoothellipse>"],[o.DG(),a,"<smoothellipseoutline>"],[o.EG(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],S=await Promise.all(w.map(t=>this.KE({src:t[0],LM:t[1],name:t[2]})));this.My=S[0],this.bE=S[1],this.xy=S[2],this._y=S[3],this.Iy=S[4],this.Cy=S[5],this.Ey=S[6],this.Ry=S[7],this.Py=S[8],this.Ay=S[9],this.Fy=S[10],this.Gy=S[11],this.Ty=S[12],this._w()}async KE(t){const s=await b.Hg.DM.BM(this,t);return this.Mw(s),s}QE(){this.SE=null}kI(t,s,i){if(this.Lm!==t||this.km!==s||i){this.qS();const e=this.WM,h=this.YG;this.Lm=t,this.km=s,this.tR(0,0,t,s),this.gw(this.sE,t/s),this.sR(this.sE),this.bE&&(e.useProgram(this.bE.Jx()),this.bE.Bx(this.my),this.SE=this.bE,this.YG.Ux=this.bE),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.IE=null,this.FT=null,this.iE&&this.oE&&this.iR(this.Lm,this.km),this.GE&&this.GE.fM(this.Lm,this.km),e.bindFramebuffer(e.FRAMEBUFFER,null),this.GE=null,h.mM=null,h.gM=null}}iR(t,s){const i=this.WM;this.rE&&this.aE===t&&this.lE===s||(this.eE?(this.rE&&i.deleteTexture(this.rE),this.rE=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.rE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),2<=this.M2()?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.HE&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.HE.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.rE&&i.deleteRenderbuffer(this.rE),this.rE=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.rE),i.renderbufferStorage(i.RENDERBUFFER,2<=this.gC?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.aE=t,this.lE=s)}eR(t,s){this.iE&&(this.oE=!1,this.iR(t,s))}hR(){this.iE&&(this.oE=!0,this.iR(this.Lm,this.km))}tR(t,s,i,e){const h=this.QC;if(h[0]!==t||h[1]!==s||h[2]!==i||h[3]!==e){const n=this.nR();n.pT(t,s,i,e),v.set(h,t,s,i,e),this.xE=0}}cw(t){super.cw(t),this.gw(this.sE,this.Lm/this.km)}ow(t){super.ow(t),this.gw(this.sE,this.Lm/this.km)}lw(t){super.lw(t),this.gw(this.sE,this.Lm/this.km)}sR(t){if(!y.B(this.my,t)){const s=this.nR();s.gT(t),y.T(this.my,t),this.xE=0,this.tE=!0}}rR(){let t,s,i,e=this.GE;i=(null===e?(t=this.sE,s=this.Xp(),this):(t=e.bM(),s=e.Xp(),e)).om(),this.sR(t),this.tR(0,0,s,i)}oR(t){if(!y.B(this.gy,t)){const s=this.nR();s.wT(t),y.T(this.gy,t),this.xE=0,this.tE=!0}}aR(){this.tE=!1}lR(){return this.tE}pM(){return this.YG}nR(){const t=this.vE;return this.ME===t.length&&t.push(new b.Hg.XG(this.YG)),t[this.ME++]}qS(){0===this.ME||this.fC()||(this.uR(),this.cR(),this.ME=0,this.mE=0,this.gE=0,this.yE=0,this.xE=0)}uR(){const t=this.WM;0<this.yE&&(t.bindBuffer(t.ARRAY_BUFFER,this.zM),t.bufferSubData(t.ARRAY_BUFFER,0,this.pE.subarray(0,this.yE))),0<this.mE&&(t.bindBuffer(t.ARRAY_BUFFER,this.HM),t.bufferSubData(t.ARRAY_BUFFER,0,this.cE.subarray(0,this.mE)),t.bindBuffer(t.ARRAY_BUFFER,this.UM),t.bufferSubData(t.ARRAY_BUFFER,0,this.dE.subarray(0,this.gE)))}cR(){const i=this.vE;for(let t=0,s=this.ME;t<s;++t)i[t].f_()}fR(){return this._E.Ko()}dR(t,s,i,e){const h=this._E;if(!h.ra(t,s,i,e)){h.Wo(t,s,i,e);const n=this.nR();n.aT(h),this.xE=0,this.Oy=null}}pR(t){const s=this._E;if(s.Ko()!==t){s.qo(t);const i=this.nR();i.aT(s),this.xE=0,this.Oy=null}}Vb(t){const s=this._E;if(!s.equals(t)){s.set(t);const i=this.nR();i.aT(s),this.xE=0,this.Oy=null}}mR(){this.dR(1,1,1,1)}gR(){return this._E}yR(t){if(t!==this.IE){const s=this.nR();s.rT(t),this.IE=t,this.xE=0}}I2(){this.IE=null}jb(t){const s=this.Qw(t);this.wR(s[0],s[1])}SR(t){const s=this.iS(t);this.wR(s.Zw,s.Kw)}wR(t,s){if(t!==this.CE||s!==this.EE){const i=this.nR();i.fT(t,s),this.CE=t,this.EE=s,this.xE=0,this.Oy=null}}bR(){return this.CE===this.WM.ONE&&this.EE===this.WM.ONE_MINUS_SRC_ALPHA}vR(){this.wR(this.WM.ONE,this.WM.ONE_MINUS_SRC_ALPHA)}MR(){this.wR(this.WM.SRC_ALPHA,this.WM.ONE_MINUS_SRC_ALPHA)}xR(){this.wR(this.WM.ONE,this.WM.ZERO)}Rect(t){this.GR(t.dl(),t.pl(),t.ml(),t.gl())}GR(t,s,i,e){this.US(t,s,i,s,i,e,t,e)}TR(){let t=this.mE;if(t>=this.wE&&(this.qS(),t=0),1===this.xE)this.vE[this.ME-1].KG+=6;else{const s=this.nR();s.hT(t,6),this.xE=1}}_R(t){t.lu(this.cE,this.mE,this.Ny+this.By),this.mE+=12}Hl(t){this.TR(),this._R(t),c.ta(this.dE,this.gE),this.gE+=8}US(t,s,i,e,h,n,r,o){this.TR();let a=this.cE,l=this.mE,u=this.Ny+this.By;a[l++]=t,a[l++]=s,a[l++]=u,a[l++]=i,a[l++]=e,a[l++]=u,a[l++]=h,a[l++]=n,a[l++]=u,a[l++]=r,a[l++]=o,a[l++]=u,this.mE=l,c.ta(this.dE,this.gE),this.gE+=8}yS(t,s){this.TR(),this._R(t),s.Sl(this.dE,this.gE),this.gE+=8}IR(t,s){this.TR(),this._R(t),s.ta(this.dE,this.gE),this.gE+=8}CR(t,s,i,e,h,n,r,o,a,l,u,c,f){this.TR();let d=this.cE,p=this.mE,m=this.Ny+this.By;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+n,d[p++]=r,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.mE=p,f.Sl(this.dE,this.gE),this.gE+=8}fS(t,s,i,e,h,n,r,o,a,l,u,c,f){this.TR();let d=this.cE,p=this.mE,m=this.Ny+this.By;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+n,d[p++]=r,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.mE=p,f.ta(this.dE,this.gE),this.gE+=8}ER(e,h,n){const r=this.cE,o=this.dE;if(n.length%3!=0)throw new Error("invalid index buffer length");for(let i=0,t=n.length;i<t;){const a=n[i++],l=n[i++],u=n[i++],c=3*a,f=3*l,d=3*u,p=2*a,m=2*l,g=2*u;this.TR();let t=this.mE,s=this.gE;r[t++]=e[0+c],r[t++]=e[1+c],r[t++]=e[2+c],r[t++]=e[0+f],r[t++]=e[1+f],r[t++]=e[2+f],r[t++]=e[0+d],r[t++]=e[1+d],r[t++]=e[2+d],r[t++]=e[0+d],r[t++]=e[1+d],r[t++]=e[2+d],o[s++]=h[0+p],o[s++]=h[1+p],o[s++]=h[0+m],o[s++]=h[1+m],o[s++]=h[0+g],o[s++]=h[1+g],o[s++]=h[0+g],o[s++]=h[1+g],this.mE=t,this.gE=s}}RR(t,s){this.rS(0),y.T(w,this.my),y.T(S,this.gy),this.rR();const[i,e]=this.PR(this.GE),h=this.bw(0,0,this.iw(e),0,0,0,e);if(this.oR(h),"crop"===t&&this.GE&&s){const n=this.Lm/2,r=this.km/2,o=s.Xp(),a=s.om(),l=this.GE.Xp(),u=this.GE.om(),c=Math.min(l,o),f=Math.min(u,a),d=Math.max(a-u,0),p=Math.max(u-a,0);x.set(-n,r-p,-n+c,r-f-p),M.uu(x),x.set(0,d,c,f+d),x.Tt(o,a),this.yS(M,x)}else{const m=i/2,g=e/2;this.GR(-m,g,m,-g)}this.sR(w),this.oR(S)}AR(t){if(!this.RE.equals(t)){this.RE.T(t);const s=this.nR();s.TT(t),this.xE=0}}FR(){}DR(t,s,i,e){7996<=this.yE&&this.qS();let h=this.yE,n=this.Ny+this.By;if(2===this.xE&&this.TE===n)this.vE[this.ME-1].KG++;else{const o=this.nR();o.IT(h,n),this.xE=2,this.TE=n}const r=this.pE;r[h++]=t,r[h++]=s,r[h++]=i,r[h++]=e,this.yE=h}Iw(t){if(this.SE!==t){const s=this.nR();s.ET(t),this.SE=t,this.xE=0,this.Oy=null}}OR(){return this.SE}LR(){this.Iw(this.bE)}kR(t){const s=this.nR();s.uT(t),this.xE=0}NR(t,s,i=1){const e=this.nR();e.JT(t,s,i),this.xE=0}BR(t,s,i,e,h,n,r){if(this.SE!==this.Gy)throw new Error("must set tilemap fill mode first");const o=this.nR();o.$T(t,s,i,e,h,n,r),this.xE=0}WR(t,s,i,e,h,n,r){if(this.SE!==this.Ty)throw new Error("must set tile randomization mode first");const o=this.nR();o.YT(t,s,i,e,h,n,r),this.xE=0}jR(t,s,i,e,h,n,r,o,a,l,u){const c=this.SE;if(u%=10800,c.Ex&&!c.tG(s,i,e,h,n,r,o,a,l,u)){const f=this.nR(),d=(f.PT(),c.eG(s,i,e,h,n,r,o,a,l,u),f.tT),p=(d[0]=n,d[1]=r,s.ta(d,2),d[6]=a,d[7]=l,i.ta(d,12),f.sT),m=(h.ta(p,0),p[1]);p[1]=p[3],p[3]=m,e.ta(f.iT,0),f.ZG=u,f.KG=o,c.ox.Rx()?f.QG=t?t.SM():null:f.QG=null,this.xE=0}}VR(t){const s=this.SE;if(0!==t.length&&!s.Yx(t)){const i=this.nR();i.DT(),s.Kx(t),b.Or(i.eT,t),this.xE=0}}HR(t,s,i,e){const h=this.nR();h.xT(t,s,i,e),this.xE=0}Uu(t){const s=this.nR();s.MT(t),this.xE=0}UR(){}JS(){super.JS(),this.WM.flush()}zR(){if(this.iE&&this.GE&&this.GE.GM()){const t=this.nR();t.KT(this.hE),this.xE=0}}JR(t){if(this.hE!==(t=!!t)&&this.iE){this.hE=t;const s=this.nR();s.t_(t),this.xE=0}}qR(){return this.hE}uM(){return this.rE}cM(){return this.eE}$R(t){if(t=!!t,this.eE&&this.nE!==t){if(t&&this.qR())throw new Error("depth still enabled");this.nE=t;const s=this.nR();s.i_(t),this.xE=0}}YR(t,s,i,e,h=0){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),!this.PE.fl(t,s,i,e)){this.PE.nl(t,s,i,e);const n=h||this.PR(this.ZR())[1],r=(s=n-s-e,this.nR());r.u_(!0,t,s,i,e),this.xE=0}}KR(){if(-1!==this.PE.ml()){this.PE.set(0,0,-1,-1);const t=this.nR();t.u_(!1,0,0,0,0),this.xE=0}}QR(){for(const t of this.XE)t.jC(this.Jy)}fC(){return!this.WM||this.WM.isContextLost()||this.WE}Hb(){super.Qy(),b.Hg.o2.Hb(),b.Hg.q2.Hb(),b.Hg.rb.Hb();for(const t of this.XE)t.Uu();this.BE=[],this.yC=null,this.jE=null,this.VE=null,this.HE=null,this.UE=null,this.zE=null,this.JE=null,this.qE=0,this.kE="(unavailable)",this.NE="(unavailable)",this.SE=null,this.bE=null,this.rE=null;for(const s of this.Dy.values())s.Hb()}async Ub(){this.WE=!0,await this.Ky(),this.WE=!1;for(const t of this.Dy.values())t.Ub(this);this.kI(this.Lm,this.km,!0)}tP(t,s){if(this.fC())throw new Error("context lost");this.qS();const i=b.Qh(b.Hg.o2,this);return i.S2(t,s),i}async sP(e,h){if(this.fC())throw new Error("context lost");if(h=Object.assign({},h),b.Li.ImageBitmapOptions){let t=await createImageBitmap(e,{premultiplyAlpha:"premultiply"}),s=h.Kv&&"clamp-to-edge"!==h.Kv||h.Qv&&"clamp-to-edge"!==h.Qv,i=b.Cn(t.width)&&b.Cn(t.height);return this.G2()||i||!s?h.premultiplyAlpha=!1:b.Li.Wi?(t=await createImageBitmap(e,{premultiplyAlpha:"premultiply",resizeWidth:b.En(t.width),resizeHeight:b.En(t.height)}),h.premultiplyAlpha=!1):t=await createImageBitmap(e,{premultiplyAlpha:"none"}),b._f(()=>this.tP(t,h))}if(e instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await b.Mo(e);e=t}return b._f(()=>this.tP(e,h))}lM(t,s,i){this.qS();const e=b.Qh(b.Hg.o2,this);return e.C2(t,s,i),e}dC(t,s,i){this.qS(),s.F2(t,i)}dM(t){t&&(t.B2(),0<t.W2()||(this.qS(),t===this.IE&&(this.WM.bindTexture(this.WM.TEXTURE_2D,null),this.IE=null),t===this.FT&&(this.WM.activeTexture(this.WM.TEXTURE1),this.WM.bindTexture(this.WM.TEXTURE_2D,null),this.WM.activeTexture(this.WM.TEXTURE0),this.FT=null),t.D2()))}iP(t){let s=this.Lm,i=this.km,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height)&&(i=Math.floor(t.height),e=!1),s<=0||i<=0)throw new Error("invalid size");this.qS();const h=b.Qh(b.Hg.q2,this);return h.oM(s,i,Object.assign({z2:e},t)),this.GE=null,this.YG.mM=null,this.YG.gM=null,h}eP(t,s=!0){if(t!==this.GE){t&&t.TM()&&t.fM(this.Lm,this.km);const i=this.nR();i.bT(t),this.GE=t,this.xE=0,s&&this.rR()}}ZR(){return this.GE}PR(t){return t?[t.Xp(),t.om()]:[this.Lm,this.km]}hP(t,s="stretch"){if(this.gC<2||this.GE&&0<this.GE._M())this.xR(),this.mR(),this.nP(t,s);else{const i=this.nR();i.NT(t,this.GE,s),this.xE=0}}nP(t,s="stretch"){const i=t.SM();if(!i)throw new Error("not a texture-backed render target");this.yR(i),this.RR(s,i)}rP(t){if(!(this.gC<2)){const s=this.nR();s.LT(t.yM()),this.xE=0}}oP(t){this.eP(null),this.qS();const s=t.SM();s===this.IE&&(this.WM.bindTexture(this.WM.TEXTURE_2D,null),this.IE=null),s===this.FT&&(this.WM.activeTexture(this.WM.TEXTURE1),this.WM.bindTexture(this.WM.TEXTURE_2D,null),this.WM.activeTexture(this.WM.TEXTURE0),this.FT=null),t.D2()}async PM(t,s,i){this.qS();let e=this.GE,h,n,r,o=(r=t?(h=t.Xp(),n=t.om(),t.yM()):(h=this.Xp(),n=this.om(),null),0),a=0,l=h,u=n;if(i){o=b.an(Math.floor(i.dl()),0,h-1),a=b.an(Math.floor(i.pl()),0,n-1);let t=i.width(),s=(t=0===t?h-o:b.an(Math.floor(t),0,h-o),i.height());s=0===s?n-a:b.an(Math.floor(s),0,n-a),l=t,u=s,a=n-(a+u)}let c=this.WM,f=(c.bindFramebuffer(c.FRAMEBUFFER,r),()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.GE=null,this.YG.mM=null,this.YG.gM=null,this.eP(e)}),d;if(!s&&2<=this.M2()){c.bindFramebuffer(c.READ_FRAMEBUFFER,r);const p=c.createBuffer(),m=l*u*4,g=c.PIXEL_PACK_BUFFER,y=(c.bindBuffer(g,p),c.bufferData(g,m,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(g,null),f(),c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0));await this.NM(()=>c.getSyncParameter(y,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(y),d=new ImageData(l,u),c.bindBuffer(g,p),c.getBufferSubData(g,0,new Uint8Array(d.data.buffer),0,m),c.bindBuffer(g,null),c.deleteBuffer(p)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}aP(){this.JR(!0);const t=this.nR();t.h_(),this.xE=0,this.AE=1}lP(){this.JR(!1);const t=this.nR();t.r_(),this.xE=0,this.AE=2}uP(){return 2===this.AE}cP(){this.JR(!0);const t=this.nR();t.a_(),this.xE=0,this.AE=0}fP(t){if(this.dP()){const s=this.nR();s.WT(t),this.xE=0}}pP(t){if(this.dP()){const s=this.nR();s.HT(t),this.xE=0}}NM(s){const t=new Promise(t=>e.add({resolve:t,UC:s}));return-1===h&&(h=self.requestAnimationFrame(i)),t}sb(){return this.Lm*this.km*(this.ZC.alpha?4:3)}ib(){let t=0;for(const s of b.Hg.q2.AM())s.SM()||(t+=s.V2());return t}eb(){let t=0;for(const s of b.Hg.o2.H2())t+=s.V2();return t}mP(){return this.KC}M2(){return this.gC}gP(){return"webgl"+this.M2()}G2(){return 2<=this.M2()}b2(){return this.FE}yP(){return this.DE}wP(){return this.OE}SP(){return 0!==this.LE}bP(){return this.LE}vP(){return this.kE}MP(){return this.NE}xP(){if(2<=this.M2())return"webgl2";{const t=[];return this.UE&&t.push("EXT_frag_depth"),this.zE&&t.push("OES_standard_derivatives"),this.JE&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}GP(){return this.BE}dP(){return!!this.yC}wC(){return this.yC}kM(){return this.jE}P2(){return this.VE}A2(){return this.qE}NC(t){this.XE.add(t)}BC(t){this.XE.delete(t)}PC(){return this.YE}v2(){return this.WM}ZE(t){this.Yw([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}TP(){return this.nb()}}}{const Ji=self.Ds,qi={_P:null,IP:null,CP:null,getTime:null,EP:null};Ji.Hg.RP=class{constructor(t){t=Object.assign({},qi,t),this.PP=t._P,this.AP=t.IP,this.FP=t.CP,this.DP=t.getTime,this.OP=t.EP,this.LP=null,this.kP=new Set}NP(t){this.kP.add(t)}BP(t){this.kP.delete(t)}Hb(){this.LP=null;for(const t of this.kP)t.Hb()}WP(t){return this.PP?this.PP(t):[t.Xp(),t.om()]}ZR(t){return this.AP(t)}jP(t,s){this.FP(t,s)}VP(){return this.DP()}J1(t){this.OP(t)}HP(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.LP||this.LP.Xp()===s&&this.LP.om()===i||(t.dM(this.LP),this.LP=null),null===this.LP&&(this.LP=t.tP(null,{width:s,height:i,t2:"nearest",e2:!1})),this.LP}}}{const o=self.Ds,$i=self.ys,xh=$i.vs,Xi=o.Qh(o.Rect),Yi=o.Qh(o.Rect),Zi=o.Qh(o.Rect),Ki=o.Qh(o.Rect),Qi=xh.create(),te=xh.create(),se={UP:null,zP:null,JP:null,qP:!1},ie={$P:null,XP:!1,YP:!1,ZP:!1,KP:!1,QP:!1,tA:!1};o.Hg.sA=class{constructor(t,s){s=Object.assign({},se,s),this.ed=t,this.iA=s.UP,this.eA=s.zP,this.hA=s.JP,this.nA=null,this.rA=[],this.oA=[],this.aA=[],this.lA=!1,this.kb=0,this.uA=!1,this.cA=!1,this.fA=!1,this.dA=!1,this.pA=!1,this.mA=!1,this.tE=!1,this.gA=!1,this.yA=!1,this.wA=!1,this.SA=!1,this.bA=!1,this.vA=0,this.MA=[null,null,null],this.xA=!!s.qP,this.GA=0,this.TA=0,this._A=0,this.IA=0,this.CA=null,this.EA=null,this.RA=o.Qh(o.Rect),this.PA=o.Qh(o.Rect),this.AA=o.Qh(o.Rect),this.FA=o.Qh(o.Rect),this.DA=o.Qh(o.Rect),this.OA=1,this.LA=1,this.kA=0,this.NA=0,this.BA=null,this.WA=null,this.jA=0,this.VA=0,this.HA=!1,this.eM=xh.create(),this.UA=xh.create(),this.ed.NP(this)}tn(){this.ed.BP(this),o.Pr(this.aA),o.Pr(this.rA),o.Pr(this.oA),this.CA=null,this.EA=null,this.iA=null,this.eA=null,this.hA=null}Hb(){this.lA=!0,o.Pr(this.aA),o.Pr(this.rA),o.Pr(this.oA)}zA(){return this.lA}JA(h,t){if(t=Object.assign({},ie,t),o.Pr(this.aA),this.GA=0,this.TA=0,this.uA=!1,this.cA=!1,this.fA=!1,this.dA=!1,this.pA=!1,this.mA=!1,this.vA=0,this.bA=!!t.KP,this.SA=!!t.tA,this.lA=!1,o.Or(this.rA,h),0!==h.length){if(t.$P){if(t.$P.length!==h.length)throw new Error("incorrect indexMap length");o.Or(this.oA,t.$P)}else{o.Pr(this.oA);for(let t=0,s=h.length;t<s;++t)this.oA.push(t)}for(const s of h)this.GA+=s.xb(),this.TA+=s.Gb(),s.Eb()&&(this.uA=!0),s.Pb()&&(this.cA=!0),s.Rb()&&(this.fA=!0),s.Tb()&&(this.dA=!0),s.Db()&&(this.pA=!0);this.mA=this.qA(h[0].vb());const n=this.$A(h[0],t),r=this.XA(h.at(-1),t);if(1!==h.length||n||r){this.wA=!1;let e=0;n&&(this.vA=1,this.aA.push(o.Qh(o.Hg.sA.ZA.YA,this,-1,1)),e=1);for(let s=0,i=h.length;s<i;++s)if(0!==s||n){let t=1===e?2:1;s!==i-1||r||(t=0),this.vA=Math.max(this.vA,t),this.aA.push(o.Qh(o.Hg.sA.ZA.KA,this,e,t,s)),e=t}else this.vA=1,this.aA.push(o.Qh(o.Hg.sA.ZA.QA,this,-1,1,s)),e=1;r&&this.aA.push(o.Qh(o.Hg.sA.ZA.t3,this,e,0))}else this.wA=!0}}$A(t,s){return!!(s.XP||t._b()||s.ZP&&!t.Cb()||t.Pb()&&!this.SA||0!==this.GA||0!==this.TA)||(t.vb().tb()?t.Rb()&&(s.QP||s.KP)||t.Ab()&&s.KP:t.Rb()&&!this.mA&&s.QP)}XA(t,s){return!!s.YP||(t.vb().tb()?t.Rb()||t.Tb():(t.Rb()||t.Tb())&&this.s3())}qA(t){return t.yw()&&this.fA&&!this.dA}i3(t,s,i){t.yw()&&null===s&&(s=t.GetBackbufferRenderTarget()),this.BA=s,this.CA=i.e3||null,this.EA=i.contextObject||null,this.kb=i.h3||0,this.OA=i.devicePixelRatio||1,this.LA=i.n3||1,this.kA=i.r3||0,this.NA="number"==typeof i.time?i.time:this.ed.VP(),this.tE=!1,t.aR(),this.uA&&this.o3();let e=!1;if(this.a3()&&(this.l3(t,i),e=!0,this.WA=this.ed.HP(t,this._A,this.IA),Xi.T(this.PA),Xi.Ol(),t.yw()&&t._MaybeDoPendingClearRenderPass(this.BA),t.CopyTextureToTexture(this.BA.SM(),this.WA,Xi.dl(),Xi.pl(),Xi.width(),Xi.height())),this.wA)this.u3(t,i);else if(e||this.l3(t,i),0!==this.AA.width()||0!==this.AA.height()){t.vR(),t.mR(),t.hS(0),t.rS(0),this.nA=i.f3||null,this.jA=i.d3||0,this.VA=i.m3||0,this.HA=!!i.g3,this.y3(t),this.MA[0]=s,this.MA[1]=1<=this.vA?this.w3():null,this.MA[2]=2===this.vA?this.w3():null;for(const h of this.aA){const n=this.S3(h.b3()),r=this.S3(h.v3());t.yw()?h.M3(t,n,r):h.x3(t,n,r)}t.yR(null),this.MA[1]&&this.G3(this.MA[1]),this.MA[2]&&this.G3(this.MA[2]),this.MA.fill(null),this.T3(t),this.BA=null,this.WA=null,this.CA=null,this.EA=null,this.nA=null}}l3(t,s){const[i,e]=this.ed.WP(t);this._3(t,i,e),this.I3(s)}_3(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this._A===s&&this.IA===i||this.C3(t,s,i,0,0,this.eM,this.UA),this._A=s,this.IA=i}C3(t,s,i,e,h,n,r){const o=s/2+e,a=i/2+h,l=(t.gw(n,s/i),t.bw(o,a,t.iw(i),o,a,0,i));xh.T(r,l)}I3(t){this.RA.T(t.E3),t.R3?this.PA.T(t.R3):this.PA.set(0,0,this._A,this.IA),this.AA.T(this.PA),this.AA.Tt(this._A,this.IA);const s=this.LA*this.OA;this.PA._l(this.GA*s,this.TA*s),this.DA.T(this.PA),this.DA.Tt(this._A,this.IA),this.PA.Ll(0,0,this._A,this.IA),this.FA.T(this.PA),this.FA.Tt(this._A,this.IA)}y3(t){if(this.gA=t.qR(),this.yA=t.uP(),this.SA)t.JR(!1),this.cA&&t.$R(!0);else{if(Xi.T(this.PA),t.tb()){const s=this.LA*this.OA;Xi._l(Math.max(this.GA,1)*s,Math.max(this.TA,1)*s),Xi.Ol(),Xi.an(0,0,this._A,this.IA)}else Xi.Ol();t.YR(Xi.dl(),Xi.pl(),Xi.width(),Xi.height(),this.IA)}}P3(t){t.mR(),this.SA||(this.yA&&t.cP(),t.JR(!1),this.cA&&t.$R(!0)),t.yw()&&t.SetNormalizedCoordsProgramVariant(!0)}T3(t){t.$R(!1),this.yA&&t.lP(),t.JR(this.gA),this.SA||t.KR(),t.yw()&&t.SetNormalizedCoordsProgramVariant(!1),this.tE=t.lR()}A3(){this.DA.an(0,0,1,1)}S3(t){return t<0?null:this.MA[t]}w3(){return this.ed.ZR(this)}F3(){return this.BA}G3(t){this.ed.jP(t,this)}D3(t){return this.rA[t]}O3(t){this.nA?this.nA(this,t,()=>this.iA(t,this)):this.iA(t,this),this.wA||this.P3(t)}L3(t){if(this.SA)return!0;if(0!==this.jA||0!==this.VA)return!1;const[s,i]=t.PR(t.ZR());return s===this._A&&i===this.IA}N3(t,s){let i=this.eM,e=this.UA;if(s&&!this.L3(t)){i=Qi,e=te;const[h,n]=t.PR(t.ZR());this.C3(t,h,n,this.jA,this.VA,i,e),this.SA||t.KR()}t.sR(i),t.oR(e)}o3(){this.ed.J1(this)}B3(t,s){return this.hA(this.oA[t],s)}W3(t,s){let i=this.DA,e=this.FA,h=this.AA;t.tb()&&(Yi.T(i),Yi.El(1),i=Yi,Zi.T(e),Zi.El(1),e=Zi,Ki.T(h),Ki.El(1),h=Ki),this.j3(t,s,e,h,i,1/this._A,1/this.IA)}V3(t,s){let e=this.FA,h=this.AA,n=1/this._A,r=1/this.IA;if(this.eA){let{H3:t,U3:s,z3:i}=this.eA(this.CA);t||(Xi.set(0,0,0,0),t=Xi),s=s||this._A,i=i||this.IA,e=t,h=t,n=1/s,r=1/i}else t.tb()&&(Zi.T(e),Zi.El(1),e=Zi,Ki.T(h),Ki.El(1),h=Ki);let i=this.DA;t.tb()&&((i=Yi).T(this.DA),i.El(1)),this.j3(t,s,e,h,i,n,r),t.yw()&&this.pA&&t.SetProgramParameter_IsSrcTexRotated(this.bA)}J3(t){return this.fA?t.yw()?this.a3()?this.WA:this.BA.SM():this.BA:null}j3(t,s,i,e,h,n,r){t.jR(this.J3(t),h,i,e,this.RA,n,r,this.OA,this.LA,this.kA,this.NA),t.VR(this.B3(s,t))}u3(t,s){const i=this.rA[0],e=t.qR(),h=i.Pb();h&&(t.JR(!1),t.$R(!0),this.DA.set(0,0,1,1),this.AA.set(0,0,1,1)),t.Iw(i),t.jb(this.kb),t.eP(this.BA);let n=0,r=1;if(this.AA.set(0,0,1,1),i.Ab()&&this.eA){const{H3:o,U3:a,z3:l}=this.eA(this.CA);o&&this.AA.T(o),n=Number.isFinite(a)?1/a:0,r=Number.isFinite(l)?1/l:0}else{const[u,c]=this.ed.WP(t);n=1/u,r=1/c}s.E3?this.RA.T(s.E3):this.RA.set(0,0,0,0),t.jR(this.J3(t),this.DA,this.AA,this.AA,this.RA,n,r,this.OA,this.LA,this.kA,this.NA),t.VR(this.B3(0,t)),t.yw()&&this.pA&&t.SetProgramParameter_IsSrcTexRotated(this.bA),t.hS(0),this.O3(t),h&&(t.$R(!1),t.JR(e))}a3(){return this.mA}s3(){return!this.mA}q3(){return this.fA}X3(){return!!this.wA&&!this.a3()}Y3(){return this.SA}Z3(){return this.CA}K3(){return this.EA}Q3(){return this.kb}tF(){return this.HA}lR(){return this.tE}sF(){return this.PA}iF(){return this.FA}eF(){return this.xA}async hF(t,s,i){}}}{const ee=self.Ds;ee.Hg.sA.ZA=class{constructor(t,s,i,e=-1){this.nF=t,this.rF=s,this.oF=i,this.Lg=e}aF(){return this.nF}b3(){return this.rF}v3(){return this.oF}lF(){return this.Lg}Jx(){return this.aF().D3(this.lF())}x3(t,s,i){}M3(t,s,i){}}}{const he=self.Ds;he.Hg.sA.ZA.YA=class extends he.Hg.sA.ZA{constructor(t,s,i,e){super(t,s,i,e)}x3(t,s,i){const e=this.aF();t.vR(),t._w(),t.eP(i,e.tF()),t.HR(0,0,0,0),e.O3(t),e.A3()}M3(t,s,i){const e=this.aF();t.vR(),t._w(),t.eP(i,!1),t.HR(0,0,0,0),e.O3(t),e.A3()}}}{const ne=self.Ds,re=ne.Qh(ne.Rect),oe=ne.Qh(ne.Hl);ne.Hg.sA.ZA.t3=class extends ne.Hg.sA.ZA{constructor(t,s,i,e){super(t,s,i,e)}x3(t,s,i){const e=this.aF();t._w(),t.eP(i),e.N3(t,!0),t.jb(e.Q3()),t.yR(s.SM()),oe.uu(e.sF()),re.T(e.iF()),re.El(1),t.yS(oe,re),e.eF()&&t.rP(s)}M3(t,s,i){const e=this.aF();t._w(),t.eP(i,!1),e.L3(t)?oe.uu(e.iF()):(t.SetNormalizedCoordsProgramVariant(!1),e.N3(t,!0),oe.uu(e.sF())),t.SetBackTexture(null),t.jb(e.Q3()),t.yR(s.SM()),e.Y3()?t.RR():t.yS(oe,e.iF())}}}{const ae=self.Ds;ae.Hg.sA.ZA.QA=class extends ae.Hg.sA.ZA{constructor(t,s,i,e){super(t,s,i,e)}x3(t,s,i){const e=this.aF();t.eP(i,e.tF()),t.HR(0,0,0,0),t.xR(),t.Iw(this.Jx()),e.V3(t,this.lF()),e.O3(t),e.A3()}M3(t,s,i){const e=this.aF();t.eP(i,!1),t.HR(0,0,0,0),t.xR(),t.Iw(this.Jx()),e.V3(t,this.lF()),e.O3(t),e.A3()}}}{const le=self.Ds,ue=le.Qh(le.Rect),ce=le.Qh(le.Hl);le.Hg.sA.ZA.KA=class extends le.Hg.sA.ZA{constructor(t,s,i,e){super(t,s,i,e)}x3(t,s,i){const e=this.aF(),h=(t.eP(i),0===this.v3());h?t.jb(e.Q3()):(t.HR(0,0,0,0),t.xR()),t.Iw(this.Jx()),e.W3(t,this.lF()),t.yR(s.SM()),e.N3(t,h),ce.uu(e.sF()),ue.T(e.iF()),ue.El(1),t.yS(ce,ue),e.eF()&&t.rP(s)}M3(t,s,i){const e=this.aF(),h=(t.eP(i,!1),0===this.v3());h?(t.jb(e.Q3()),t.SetBackTexture(null),e.L3(t)?ce.uu(e.iF()):(t.SetNormalizedCoordsProgramVariant(!1),e.N3(t,!0),ce.uu(e.sF()))):(t.HR(0,0,0,0),t.xR(),ce.uu(e.iF())),t.Iw(this.Jx()),e.W3(t,this.lF()),t.yR(s.SM()),e.Y3()?t.RR():t.yS(ce,e.iF())}}}{let u=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const n=t[1],r=s[1];return n-r},c=(u,self.Ds),f=self.Us,d=null,s=new Set,p=[],m=[],i=!1,t=!1,e=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.uF=class{constructor(t){d=t,Object.defineProperties(this,{cF:{value:d.dF().fF(),writable:!1},pF:{value:d.gF().mF(),writable:!1},yF:{value:{},writable:!1},wF:{value:{},writable:!1},SF:{value:d.bF(),writable:!1},vF:{value:d.MF(),writable:!1},storage:{value:new self.xF(d),writable:!1},isInWorker:{value:d.GF(),writable:!1},TF:{value:d._F(),writable:!1},IF:{value:d.CF(),writable:!1},t2:{value:d.EF(),writable:!1},RF:{value:d.PF(),writable:!1},AF:{value:new self.FF(t),writable:!1},DF:{value:new self.OF(t),writable:!1}}),d.LF().addEventListener("keydown",t=>{s.has(t.key)?t.stopPropagation():s.add(t.key)}),d.LF().addEventListener("keyup",t=>s.delete(t.key)),d.Pf().addEventListener("window-blur",()=>s.clear()),d.GF()&&(self.alert=t=>(i||(i=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}kF(t){Object.defineProperties(this.yF,t)}NF(t){Object.defineProperties(this.wF,t)}addEventListener(t,s){d.LF().addEventListener(t,s)}removeEventListener(t,s){d.LF().removeEventListener(t,s)}BF(t,...s){f.ve(t);const i=d.WF(),e=i.jF(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.ju())return e.VF();if(s.length<e.HF())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.HF()} expected)`);let h=e.UF(),n=h.zF(),r=i.JF();if(r){n=n.slice(0);const a=new Set(n);for(const l of r.zF())a.has(l)||(n.push(l),a.add(l));for(const u of i.qF())a.has(u)||(n.push(u),a.add(u))}const o=h.$F(n,e.XF(),e.YF(),e.VF(),...s);return o}ZF(t){const s=d.QF().KF();if(!s)throw new Error("not in a function which returns a value");switch(s.tD()){case 1:"number"==typeof t&&s.sD(t);break;case 2:"string"==typeof t&&s.sD(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.sD(t)}}signal(t){f.ve(t),d.WF().iD(t)}eD(t){return f.ve(t),d.WF().hD(t)}nD(){return[d._F(),d.CF()]}get isSuspended(){return d.rD()}get oD(){return d.aD()}get lD(){return d.uD()}get cD(){return d.fD()}get dD(){return d.pD()}get mD(){return d.gD()}set mD(t){f.ge(t),d.yD(t)}get fps(){return t||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),t=!0),d.wD()}get framesPerSecond(){return d.wD()}get SD(){return d.bD()}get vD(){return d.MD()}get xD(){return d.GD()}get TD(){return d._D()}set TD(t){if(!e.has(t))throw new Error("invalid framerate mode");d.ID(t)}get CD(){return d.ED()}set CD(t){f.ge(t),d.RD(t)}get PD(){return d.AD()}set PD(t){d.FD(t)}random(){return d.DD()}get layout(){const t=d.OD();if(t)return t.LD();throw new Error("no layout is running - make sure a layout is loaded before accessing")}kD(t){let s=d.ND(),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.BD(t))return i.LD();throw new Error("invalid layout")}WD(){return d.ND().jD().map(t=>t.LD())}VD(t){let s=d.ND(),i;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(i=s.BD(t)))throw new Error("invalid layout");s.HD()||s.UD(i)}get keyboard(){const t=d.zD().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get JD(){const t=d.zD().JD;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get qD(){const t=d.zD().qD;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get $D(){const t=d.zD().$D;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}XD(t,s){f.ve(t),f.ve(s),d.YD(t,s)}ZD(t){f.ge(t);const s=d.KD(t);return s?s.QD():null}tO(t,e){f.He(e);const h=d.sO();for(const s of t){const i=d.iO(s),n=i.eO();p.push([n.hO().lF(),n.nO()]),m.push(i)}if(0!==p.length){p.sort(u),m.sort((t,s)=>e(t.QD(),s.QD()));let i=!1;for(let t=0,s=p.length;t<s;++t){const r=m[t],o=h.rO(p[t][0]),a=p[t][1],l=o.oO();l[a]!==r&&((l[a]=r).eO().aO(o,!0),o.lO(r),i=!0)}i&&d.uO(),c.Pr(p),c.Pr(m)}}async cO(t,s){const i=new MessageChannel,e=i.port1,h=i.port2;return await d.fO("runtime","script-create-worker",{url:t,opts:s,port2:h},[h]),e}alert(t){return d.fO("runtime","alert",{message:t+(d.GF()?" [via Web Worker]":"")})}dO(t){return f.ge(t),d.pO(t)}mO(t){d.gO(t)}}}{let s=self.Ds,r=null;self.yO=class{constructor(t){r=t,Object.defineProperties(this,{wO:{value:r.SO("audio/webm; codecs=opus"),writable:!1}})}bO(t){const s=self.MO.vO(t);if(!s)throw new Error("invalid IImageInfo");s.xO(r.GO())}TO(t){return r.do(t)}_O(t){return r.po(t)}IO(t){return r.mo(t)}CO(t){return r.yo(t)}EO(t){return r.RO(t)}PO(t){return"flat"===r.AO()&&s.uo(t)&&(t=t.toLowerCase()),r.FO(t)}get DO(){return r.OO()}async LO(t,s){if(this.wO)throw new Error("decodeWebMOpus(): not supported because WebM Opus is supported by the platform");const i=await r.GO().kO(s),e=new Float32Array(i),h=t.createBuffer(1,e.length,48e3),n=h.getChannelData(0);return n.set(e),h}NO(...t){return r.BO(...t)}WO(t){return r.jO(t)}VO(t){return r.HO(t)}}}{let r=self.Ds,i=self.Us,o=null;self.UO=class{constructor(t){o=t,Object.defineProperties(this,{runtime:{value:o.GO(),writable:!1}})}zO(t,s){const i=o.GO(),e=i.iO(t),h=i.iO(s);return o.JO(e,h)}qO(t,s){const i=o.GO(),e=i.iO(t);for(const h of s){const n=i.iO(h);if(o.JO(e,n))return h}return null}$O(t){const s=o.GO().iO(t),i=o.XO(s);return i?i.QD():null}YO(t,s){if(i.ge(t),i.ge(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");o.ZO(t,s)}KO(){return o.QO()}tL(t,s){let i=o.GO(),e;e=Array.isArray(t)?t.map(t=>i.sL(t)):[i.sL(t)];const h=r.Rect.cl(s),n=[];return o.iL(null,e,h,n),n.map(t=>t.QD())}}}{let s=self.Ds,i=null,e=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),h=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),n=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.FF=class{constructor(t){i=t,Object.defineProperties(this,{eL:{value:s.hi.mi,writable:!1},hL:{value:e.get(s.hi.ni)||"unknown",writable:!1},nL:{value:s.hi.ri,writable:!1},rL:{value:h.get(s.hi.oi)||"unknown",writable:!1},oL:{value:s.hi.ai,writable:!1},aL:{value:n.get(s.hi.ci)||"unknown",writable:!1}})}get exportType(){let t=i.lL();return i.uL()?t="nwjs":i.cL()?t="windows-webview2":"cordova"===t?t="Android"===s.hi.ni?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get renderer(){return i.dL().fL()}get pL(){return i.dL().mL()}get gL(){return i.dL().yL()}get wL(){return i.dL().SL()}get bL(){return i.dL().vL()}get ML(){return i.dL().xL()}get devicePixelRatio(){return i.GL()}}}{const fe=self.Us;self.xF=class{constructor(t){this.TL=t._L()}getItem(t){return fe.ve(t),this.TL.getItem(t)}setItem(t,s){return fe.ve(t),this.TL.setItem(t,s)}removeItem(t){return fe.ve(t),this.TL.removeItem(t)}clear(){return this.TL.clear()}keys(){return this.TL.keys()}}}{const de=self.Ds,pe=de.Os();self.IL=class{#CL;constructor(){const t=de.RL.EL(pe);this.#CL=t,Object.defineProperties(this,{runtime:{value:t.GO().PL(),writable:!1},AL:{value:t.FL(),writable:!1},DL:{value:t.OL(),writable:!1},LL:{value:t.kL(),writable:!1},NL:{value:t.BL(),writable:!1},WL:{value:t.jL(),writable:!1},VL:{value:t.HL(),writable:!1},UL:{value:t.zL(),writable:!1},JL:{value:t.qL(),writable:!1}})}static $L(t){if(!t)return null;const s=de.RL.XL(t);return s?s.YL():null}ZL(){return this.#CL.QL().KL()}tk(){return this.#CL.sk().QD()}}}{const me=self.Ds,ge=self.Us,ye=me.Os();self.ik=class{#CL;constructor(){const t=me.RL.EL(ye);this.#CL=t,Object.defineProperties(this,{name:{value:t.jc(),writable:!1},runtime:{value:t.GO().PL(),writable:!1},ek:{value:t.hk().YL(),writable:!1}}),t.GO().nk(this,t)}addEventListener(t,s){ge.ve(t),ge.He(s),this.#CL.LF().addEventListener(t,s)}removeEventListener(t,s){ge.ve(t),ge.He(s),this.#CL.LF().removeEventListener(t,s)}rk(){return[...this.instances()]}ak(){return me.first(this.instances())}lk(){return[...this.uk()]}ck(){return me.first(this.uk())}fk(t){const s=this.#CL,i=s.GO().dk(t),e=s.pk(i);return e?e.QD():null}*instances(){for(const t of this.#CL.mk())yield t.QD()}*uk(){for(const t of this.#CL.yk().gk())yield t.QD()}wk(t){ge.He(t);const s=this.#CL;if(0<s.Sk())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.bk(t)}Ai(t,s,i,e,h){if(ge.ue(s),ge.ue(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const n=this.#CL,r=n.GO(),o=r.OD().hO(t);if(!o)throw new Error("invalid layer");const a=r.vk(n,o,s,i,e,h),l=(e&&o.Mk(a),r.WF());return l.xk(!0),a.Gk(),l.xk(!1),l.Tk()||r.ND()._k()||r.Ik(),a.QD()}}}{const we=self.Us,l=new WeakMap,Se=["above","below","top-sublayer","bottom-sublayer"];self.Ck=class{constructor(t){l.set(this,t);const s=[],i=t.Ek(),e=i.Rk().length;for(let t=0;t<e;++t)s.push(new self.Pk(i,t));Object.defineProperties(this,{name:{value:t.jc(),writable:!1},index:{value:t.lF(),writable:!1},Ak:{value:s,writable:!1}})}addEventListener(t,s){we.ve(t),we.He(s),l.get(this).LF().addEventListener(t,s)}removeEventListener(t,s){we.ve(t),we.He(s),l.get(this).LF().removeEventListener(t,s)}get width(){return l.get(this).Xp()}set width(t){we.ge(t),l.get(this).hm(t)}get height(){return l.get(this).om()}set height(t){we.ge(t),l.get(this).Yp(t)}Fk(t,s){we.ge(t),we.ge(s);const i=l.get(this);i.hm(t),i.Yp(s)}getSize(){const t=l.get(this);return[t.Xp(),t.om()]}set scale(t){we.ge(t),l.get(this).Dk(t)}get scale(){return l.get(this).Ok()}set angle(t){we.ge(t),l.get(this).Lk(t)}get angle(){return l.get(this).kk()}set scrollX(t){we.ue(t),l.get(this).Nk(t)}get scrollX(){return l.get(this).Bk()}set scrollY(t){we.ue(t),l.get(this).Wk(t)}get scrollY(){return l.get(this).jk()}scrollTo(t,s){we.ue(t),we.ue(s);const i=l.get(this);i.Nk(t),i.Wk(s)}Vk(){const t=l.get(this);return[t.Bk(),t.jk()]}Hk(t){let s=l.get(this),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(i=s.hO(t))?i.Uk():null}zk(){return l.get(this).Jk().map(t=>t.Uk())}*qk(){for(const t of l.get(this).qk())yield t.Uk()}$k(t,s,i){const e=l.get(this),h=self.Xk,n=(we.ve(t),we.Ke(s,h),s?e.GO().Yk(s):null),r=Se.indexOf(i);if(r<0)throw new Error("invalid location");e.Zk(t,n,r)}Kk(t,s,i){const e=l.get(this),h=e.GO(),n=self.Xk,r=(we.Ze(t,n),h.Yk(t));if(!r)throw new Error("invalid layer");we.Ke(s,n);const o=s?h.Yk(s):null,a=Se.indexOf(i);if(a<0)throw new Error("invalid location");e.Qk(r,o,a)}t5(t){const s=l.get(this),i=self.Xk,e=(we.Ze(t,i),s.GO().Yk(t));if(!e)throw new Error("invalid layer");const h=e.GO();s.s5(e),h.WF().Tk()||h.Ik()}i5(){const t=l.get(this),s=t.GO();t.e5(),s.WF().Tk()||s.Ik()}h5(t,s){we.ge(t),we.ge(s),l.get(this).n5(t,s)}r5(){return l.get(this).o5()}set X(t){we.ve(t);const s=l.get(this);if("perspective"===t)s.a5();else{if("orthographic"!==t)throw new Error("invalid projection");s.l5()}}get X(){return l.get(this).u5()?"orthographic":"perspective"}}}{const be=self.Ds,f=self.Us,d=new WeakMap,ve=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Me=new Map([...ve.entries()].map(t=>[t[1],t[0]])),xe=be.Qh(be.Oo);self.Xk=class{constructor(t){d.set(this,t);const s=[],i=t.Ek(),e=i.Rk().length;for(let t=0;t<e;++t)s.push(new self.Pk(i,t));Object.defineProperties(this,{name:{value:t.jc(),writable:!1},layout:{value:t.BD().LD(),writable:!1},Ak:{value:s,writable:!1}}),t.GO().nk(this,t)}get c5(){const t=d.get(this).f5();return t?t.Uk():null}*d5(){for(const t of d.get(this).d5())yield t.Uk()}*p5(){for(const t of d.get(this).m5())yield t.Uk()}*g5(){for(const t of d.get(this).m5())for(const s of t.y5())yield s.Uk()}get index(){return d.get(this).lF()}get isVisible(){return d.get(this).w5()}set isVisible(t){d.get(this).S5(t)}get b5(){return d.get(this).v5()}get isInteractive(){return d.get(this).M5()}set isInteractive(t){d.get(this).x5(t)}get G5(){return d.get(this).T5()}set G5(t){d.get(this)._5(!!t)}get I5(){return d.get(this).C5()}get opacity(){return d.get(this).fR()}set opacity(t){t=be.an(+t,0,1),isNaN(t)||d.get(this).pR(t)}set scale(t){f.ge(t),d.get(this).E5(t)}get scale(){return d.get(this).R5()}set scaleRate(t){f.ge(t),d.get(this).P5(t)}get scaleRate(){return d.get(this).A5()}set angle(t){f.ge(t),d.get(this).Lk(t)}get angle(){return d.get(this).F5()}set parallaxX(t){f.ge(t),d.get(this).D5(t)}get parallaxX(){return d.get(this).O5()}set parallaxY(t){f.ge(t),d.get(this).L5(t)}get parallaxY(){return d.get(this).k5()}set N5(t){f.ge(t),d.get(this).rv(t)}get N5(){return d.get(this).nv()}set B5(t){d.get(this).W5(t)}get B5(){return d.get(this).j5()}set V5(t){d.get(this).H5(t)}get V5(){return d.get(this).U5()}set h3(t){f.ve(t);const s=ve.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");d.get(this).jb(s)}get h3(){return Me.get(d.get(this).z5())}set backgroundColor(t){if(f.Le(t),t.length<3)throw new Error("expected 3 elements");xe.jo(t[0],t[1],t[2]);const s=d.get(this),i=s.J5();i.ea(xe)||(i.$o(xe),s.GO().uO())}get backgroundColor(){const t=d.get(this).J5();return[t.Xo(),t.Yo(),t.Zo()]}set scrollX(t){f.ue(t);const s=d.get(this);s.q5(!0),s.Nk(t)}get scrollX(){return d.get(this).Bk()}set scrollY(t){f.ue(t);const s=d.get(this);s.q5(!0),s.Wk(t)}get scrollY(){return d.get(this).jk()}scrollTo(t,s){f.ue(t),f.ue(s);const i=d.get(this);i.q5(!0),i.Nk(t),i.Wk(s)}Vk(){const t=d.get(this);return[t.Bk(),t.jk()]}X5(){d.get(this).q5(!1)}getViewport(){return d.get(this).Y5().yl()}Z5(t,s,i=0){f.ue(t),f.ue(s),f.ue(i);const e=d.get(this),h=e.GO();return e.K5(t-h.Q5(),s-h.tN(),i)}sN(t,s,i=0){f.ue(t),f.ue(s),f.ue(i);const e=d.get(this),h=e.GO(),[n,r]=e.iN(t,s,i);return[n+h.Q5(),r+h.tN()]}eN(t,s,i=0){return f.ue(t),f.ue(s),f.ue(i),d.get(this).hN(t,s,i)}nN(t,s,i=0){return f.ue(t),f.ue(s),f.ue(i),d.get(this).rN(t,s,i)}get oN(){return d.get(this).aN()}}}{let e=function(t){let s=_e.get(t);return s||(s=Ge.Qh(Ge.Event.Pf),_e.set(t,s)),s};e;const Ge=self.Ds,Te=self.Us,_e=new WeakMap,Ie=Ge.Os();self.lN=class{#CL;constructor(){const t=Ge.RL.EL(Ie),s={runtime:{value:(this.#CL=t).GO().PL(),writable:!1},uN:{value:t.cN().KL(),writable:!1},ek:{value:t.hk().YL(),writable:!1}};t.fN(s),t.dN(s),Object.defineProperties(this,s),t.GO().nk(this,t)}static pN(){return Ge.RL.mN()}gN(){const t=_e.get(this);t&&(t.tn(),_e.delete(this))}addEventListener(t,s,i){Te.ve(t),Te.He(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Te.ve(t),Te.He(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}yN(){const t=this.#CL,s=t.GO();s.wN(t),s.WF().Tk()||s.ND()._k()||s.WF().SN()||s.Ik()}bN(){const t=this.#CL.vN();return t?t.map(t=>t.QD()):[]}*MN(){const t=this.#CL;if(t.xN())for(const s of t.GN())yield s.QD()}get uid(){return this.#CL.TN()}get _N(){return this.#CL.IN()}set mD(t){Te.ge(t),this.#CL.yD(t)}get mD(){return this.#CL.CN()}EN(){this.#CL.RN()}get oD(){const t=this.#CL;return t.GO().aD(t)}PN(...t){Te.Le(t);const s=new Set(t),i=this.#CL.AN();return s.re(i)}FN(t){Te.Ze(t,Set),this.#CL.DN(t)}ON(){return new Set(this.#CL.AN())}signal(t){Te.ve(t);const s=this.#CL;s.GO().WF().LN(s,t)}eD(t){Te.ve(t);const s=this.#CL;return s.GO().WF().kN(s,t)}}}{const Ce=self.Ds,Ee=self.Us,Re=Ce.Os();self.NN=class extends self.lN{#CL;#BN=!1;#WN=null;#jN=!1;#VN=null;#HN;#UN;constructor(t){super(),this.#CL=Ce.RL.EL(Re),this.#BN=!1,this.#WN=null,this.#jN=!1,this.#VN=null,this.#HN=t?.domComponentId,this.#UN=t?.wrapperComponentId}gN(){this.zN(!1),this.JN(!1),super.gN()}qN(){return Ce.RL.$N()}XN(t){const s=this.#CL;s.GO().YN(t,s)}ZN(t){const s=this.#CL;return s.GO().KN(t,s)}QN(t,s){if(Ee.ve(t),Ee.He(s),!this.#HN)throw new Error("no DOM component id set");const i=this.#CL.GO();i.t4(this.#HN,t,s)}s4(t){Ee.Le(t);for(const[s,i]of t)this.QN(s,i)}i4(t,s){if(Ee.ve(t),!this.#HN)throw new Error("no DOM component id set");const i=this.#CL.GO();i.Kc(this.#HN,t,s)}e4(t,s){if(Ee.ve(t),!this.#HN)throw new Error("no DOM component id set");const i=this.#CL.GO();return i.fO(this.#HN,t,s)}h4(t,s){const i=this.#CL.GO();if(!i.GF())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#HN,handler:t,data:s,responseId:null});this.i4(t,s)}zN(t){if(this.#BN!==(t=!!t)){this.#BN=t;const s=this.#CL.GO();t?(this.#WN||(this.#WN=()=>this.n4()),s.Pf().addEventListener("tick",this.#WN)):s.Pf().removeEventListener("tick",this.#WN)}}r4(){return this.#BN}n4(){}JN(t){if(this.#jN!==(t=!!t)){this.#jN=t;const s=this.#CL.GO();t?(this.#VN||(this.#VN=()=>this.o4()),s.Pf().addEventListener("tick2",this.#VN)):s.Pf().removeEventListener("tick2",this.#VN)}}a4(){return this.#jN}o4(){}l4(){return[]}u4(){return null}c4(t){}f4(){if(!this.#UN)throw new Error("no wrapper component id set");const t=this.#CL.GO();return t.d4(this.#UN)}m4(t,s){if(Ee.ve(t),Ee.He(s),!this.#UN)throw new Error("no wrapper component id set");const i=this.#CL.GO();i.g4(this.#UN,t,s)}y4(t){Ee.Le(t);for(const[s,i]of t)this.m4(s,i)}w4(t,s){if(!this.#UN)throw new Error("no wrapper component id set");this.runtime.DF.S4(this.#UN,t,s)}b4(t,s){if(this.#UN)return this.runtime.DF.v4(this.#UN,t,s);throw new Error("no wrapper component id set")}}}{let t=function(t){return class h extends t{#M4;#x4;constructor(t){super(t);const s=Pe.RL.EL(Oe),i=s.eO(),e=(this.#M4=s,this.#x4=i,De.set(this,s),[]),h=i.G4();if(h){const r=i.cN().Ek().Rk().length;for(let t=0;t<r;++t)e.push(new self.Pk(h,t))}const n={Ak:{value:e,writable:!1}};Object.defineProperties(this,n)}get layout(){return this.#x4.BD().LD()}get T4(){return this.#x4.hO().Uk()}get x(){return this.#x4.Kb()}set x(t){t=+t;const s=this.#x4;isNaN(t)||s.Kb()===t||(s.Qb(t),s._4())}get y(){return this.#x4.sv()}set y(t){t=+t;const s=this.#x4;isNaN(t)||s.sv()===t||(s.hv(t),s._4())}setPosition(t,s){t=+t,s=+s;const i=this.#x4;isNaN(t)||isNaN(s)||i.Kb()===t&&i.sv()===s||(i.I4(t,s),i._4())}C4(){const t=this.#x4;return[t.Kb(),t.sv()]}E4(t,s){if(t=+t,s=+s,!(isNaN(t)||isNaN(s)||0===t&&0===s)){const i=this.#x4;i.R4(t,s),i._4()}}get N5(){return this.#x4.nv()}set N5(t){t=+t;const s=this.#M4,i=this.#x4;isNaN(t)||i.nv()===t||(i.rv(t),s.GO().uO())}get P4(){return this.#x4.A4()}get width(){return this.#x4.Xp()}set width(t){t=+t;const s=this.#x4;isNaN(t)||s.Xp()===t||(s.hm(t),s._4())}get height(){return this.#x4.om()}set height(t){t=+t;const s=this.#x4;isNaN(t)||s.om()===t||(s.Yp(t),s._4())}Fk(t,s){t=+t,s=+s;const i=this.#x4;isNaN(t)||isNaN(s)||i.Xp()===t&&i.om()===s||(i.kI(t,s),i._4())}getSize(){const t=this.#x4;return[t.Xp(),t.om()]}get angle(){return this.#x4.kk()}set angle(t){t=Pe.ln(+t);const s=this.#x4;isNaN(t)||s.kk()===t||(s.Lk(t),s._4())}get F4(){return Pe.cn(this.angle)}set F4(t){this.angle=Pe.un(t)}du(){return this.#x4.D4().yl()}O4(){return this.#x4.L4().ou()}N4(){return this.#x4.B4()}get isVisible(){return this.#x4.v5()}set isVisible(t){t=!!t;const s=this.#M4,i=this.#x4;i.v5()!==t&&(i.S5(t),s.GO().uO())}get opacity(){return this.#x4.fR()}set opacity(t){t=Pe.an(+t,0,1);const s=this.#M4,i=this.#x4;isNaN(t)||i.fR()===t||(i.pR(t),s.GO().uO())}set W4(t){if(Ae.Le(t),t.length<3)throw new Error("expected 3 elements");Ne.jo(t[0],t[1],t[2]);const s=this.#M4,i=this.#x4;i.j4().ea(Ne)||(i.V4(Ne),s.GO().uO())}get W4(){const t=this.#x4.j4();return[t.Xo(),t.Yo(),t.Zo()]}set h3(t){Ae.ve(t);const s=Le.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#M4,e=this.#x4;e.jb(s),i.GO().uO()}get h3(){return ke.get(this.#x4.z5())}H4(){this.#x4.U4()}z4(){this.#x4.J4()}q4(t){Ae.Ze(t,Fe);const s=this.#M4,i=s.GO().Yk(t);if(!i)throw new Error("invalid layer");s.eO().X4(i)}Y4(t,s){Ae.Ze(t,h),this.#x4.Z4(De.get(t),s)}get zIndex(){return this.#x4.nO()}get K4(){return this.#x4.Q4()}set K4(t){this.#x4.tB(!!t)}Bl(t,s){return Ae.ue(t),Ae.ue(s),this.#x4.sB(+t,+s)}zO(t){Ae.Ze(t,h);const s=this.#M4,i=De.get(t);return s.GO().gF().JO(s,i)}$O(){const t=this.#M4,s=t.GO().gF().XO(t);return s?s.QD():null}getParent(){const t=this.#M4.iB();return t?t.QD():null}eB(){const t=this.#M4.hB();return t?t.QD():null}*nB(){for(const t of this.#M4.nB())yield t.QD()}rB(){return this.#M4.oB()}aB(t){const s=this.#M4.lB(t);return s?s.QD():null}*children(){for(const t of this.#M4.children())yield t.QD()}*uB(){for(const t of this.#M4.uB())yield t.QD()}cB(t,s){Ae.Ze(t,h),Ae.Ee(s),s=s||{};const i=this.#M4,e=De.get(t);i.fB(e,s)}removeChild(t){Ae.Ze(t,h);const s=this.#M4,i=De.get(t);s.dB(i)}pB(){const t=this.#M4;if(t.mB()){const s=t.iB();s.dB(t)}}gB(){const t=this.#x4;return{yB:t.wB(),SB:t.bB(),vB:t.MB(),xB:t.GB(),TB:t._B(),IB:t.CB(),EB:t.RB(),PB:t.AB(),DB:t.OB()}}LB(t,s){Ae.ge(t),Ae.ge(s),this.#x4.kB(t,s)}NB(){const t=this.#x4;t.BB(),t._4()}WB(t,s,i){Ae.ge(t),Ae.ge(s),Ae.Ce(i);const e=this.#x4;e.jB(t,s,i)&&e._4()}VB(t,s){let i=NaN,e=NaN,h=NaN,n=NaN,r=NaN,o=this.#x4;if(o.HB()){const a=o.UB(),l=a.jv(t,s);null!==l&&(i=l.Kb(),e=l.sv(),h=l.nv(),n=l.ov(),r=l.lv())}return{x:i,y:e,N5:h,u:n,v:r}}zB(){const t=this.#x4;if(!t.HB())return[0,0];const s=t.UB();return[s.Rv(),s.Pv()]}}};0;const Pe=self.Ds,Ae=self.Us,Fe=self.Xk,De=new WeakMap,Oe=Pe.Os(),Le=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),ke=new Map([...Le.entries()].map(t=>[t[1],t[0]])),Ne=Pe.Qh(Pe.Oo);self.JB=t(self.lN),self.qB=t(self.NN)}{const Be=self.Us;self.$B=class extends self.JB{#CL;constructor(){super(),this.#CL=self.lN.pN()}XB(){return this.#CL.ZB().YB()}focus(){this.#CL.ZB().KB()}blur(){this.#CL.ZB().QB()}t6(t,s){Be.ve(t),this.#CL.ZB().s6(t,s)}}}{let e=function(t){let s=Ve.get(t);return s||(s=We.Qh(We.Event.Pf),Ve.set(t,s)),s};e;const We=self.Ds,je=self.Us,Ve=new WeakMap,He=We.Os();self.i6=class{#CL;constructor(){const t=We.RL.EL(He),s={runtime:{value:(this.#CL=t).GO().PL(),writable:!1},behavior:{value:t.h6().e6(),writable:!1},n6:{value:t.o6().r6(),writable:!1}};Object.defineProperties(this,s),t.GO().nk(this,t)}static pN(){return We.RL.mN()}get a6(){return this.#CL.l6().QD()}gN(){const t=Ve.get(this);t&&(t.tn(),Ve.delete(this))}addEventListener(t,s,i){je.ve(t),je.He(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){je.ve(t),je.He(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}}}{const Ue=self.Ds,ze=Ue.Os();self.u6=class{constructor(){const t=Ue.RL.EL(ze),s={runtime:{value:t.GO().PL(),writable:!1},behavior:{value:t.h6().e6(),writable:!1},name:{value:t.jc(),writable:!1}};Object.defineProperties(this,s)}}}{const Je=self.Ds,qe=Je.Os();self.c6=class{#CL;constructor(){const t=Je.RL.EL(qe),s={runtime:{value:(this.#CL=t).GO().PL(),writable:!1}};Object.defineProperties(this,s)}rk(){return this.#CL.gk().map(t=>t.QD())}static $L(t){if(!t)return null;const s=Je.RL.f6(t);return s?s.e6():null}}}{const $e=self.Ds,Xe=self.Us,Ye=$e.Qh($e.Oo);self.Pk=class{#CL;constructor(t,s){this.#CL=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){const t=this.#CL.Rk();return t[this.index].jc()}get isActive(){return this.#CL.d6(this.index)}set isActive(t){t=!!t;const s=this.#CL;s.d6(this.index)!==t&&(s.p6(this.index,t),s.m6(),s.GO().uO())}setParameter(t,s){Xe.ge(t),t=Math.floor(+t);const i=this.#CL,e=i.g6(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof $e.Oo){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");Ye.jo(s[0],s[1],s[2]),s=Ye}else if("number"!=typeof s)throw new TypeError("expected number");const h=i.y6(this.index,t,s);h&&i.d6(this.index)&&i.GO().uO()}getParameter(t){Xe.ge(t),t=Math.floor(+t);const s=this.#CL,i=s.g6(this.index,t);if(null===i)throw new RangeError("invalid index");return i instanceof $e.Oo?[i.Xo(),i.Yo(),i.Zo()]:i}}}self.w6=class{#CL;constructor(t){this.#CL=t,Object.defineProperties(this,{name:{value:t.jc(),writable:!1}})}get speed(){return this.#CL.S6()}get b6(){return this.#CL.v6()}get repeatCount(){return this.#CL.M6()}get x6(){return this.#CL.G6()}get T6(){return this.#CL._6()}get frameCount(){return this.#CL.I6()}C6(){return this.#CL.E6().map(t=>t.R6())}*frames(){for(const t of this.#CL.E6())yield t.R6()}};self.MO=class{#CL;constructor(t){this.#CL=t}static vO(t){return t.#CL}get width(){return this.#CL.Xp()}get height(){return this.#CL.om()}getSize(){const t=this.#CL;return[t.Xp(),t.om()]}P6(t){return t.A6(this)}F6(){return this.#CL.pC().yl()}};{const Ze=self.Us;self.D6=class extends self.MO{#CL;constructor(t){super(t.O6()),this.#CL=t,Object.defineProperties(this,{duration:{value:t.L6(),writable:!1},k6:{value:t.N6(),writable:!1},B6:{value:t.W6(),writable:!1}})}j6(){const t=this.#CL;return[t.N6(),t.W6()]}V6(){return this.#CL.H6()}U6(t){return this.z6(t)[0]}J6(t){return this.z6(t)[1]}z6(t){let s=this.#CL,i=null;if("number"==typeof t)i=s.q6(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.X6(t)}return i?[i.Kb(),i.sv()]:this.j6()}Y6(){const t=this.#CL.Z6();return t?t.Eu():0}K6(t){return this.Q6(t)[0]}tW(t){return this.Q6(t)[1]}Q6(t){Ze.ge(t),t=Math.floor(t);const s=this.#CL.Z6();if(!s||t<0||t>=s.Eu())return[0,0];const i=s.Cu(),e=i[2*t],h=i[2*t+1];return[e,h]}get tag(){return this.#CL.sW()}}}{let s=function(t){const s=Qe.get(t);if(s.iW())throw new Error("timeline/tween was released and is no longer valid");return s};s;const Ke=self.Us,Qe=new WeakMap;self.eW=class{constructor(t){Qe.set(this,t),t.GO().nk(this,t)}pause(){s(this).hW()}resume(){s(this).nW()}stop(){s(this).Kf()}PN(t){return s(this).rW(t)}set time(t){Ke.ge(t),s(this).oW(t)}get time(){return s(this).VP()}set totalTime(t){Ke.ge(t),s(this).aW(t)}get totalTime(){return s(this).lW()}set b6(t){s(this).uW(!!t)}get b6(){return s(this).cW()}set T6(t){s(this).fW(!!t)}get T6(){return s(this).dW()}set playbackRate(t){Ke.ge(t),s(this).pW(t)}get playbackRate(){return s(this).mW()}get progress(){const t=s(this);return t.VP()/t.lW()}get tags(){return s(this).gW()}get finished(){return s(this).yW()}get isPlaying(){return s(this).IsPlaying()}get wW(){return s(this).SW()}get bW(){return Qe.get(this).iW()}}}{let i=new WeakMap;self.vW=class extends self.eW{constructor(t){super(t),i.set(this,t);const s={name:{value:t.jc(),writable:!1}};Object.defineProperties(this,s)}}}{let i=function(t){const s=h.get(t);if(s.iW())throw new Error("tween was released and is no longer valid");return s},e=(i,self.Us),h=new WeakMap,n=new WeakMap,r=null;self.MW=class extends self.eW{constructor(t,s,i){super(t),r=r||i.easeToIndexFunc,h.set(this,t),s&&n.set(this,s)}stop(){const t=i(this),s=n.get(this);s.ReleaseTween(t)}xW(t){e.ve(t);const s=self.ec.xc(r(t));i(this).GW(s)}get a6(){const t=i(this).TW();return t?t.QD():null}get _W(){return i(this).IW()}set _W(t){i(this).EW(!!t)}get value(){const t=i(this);if("value"!==t.RW())throw new Error("not a value tween");return t.AW("value").PW()}}}self.FW=class extends self.IL{constructor(){super()}};{const th=self.Ds,sh=self.Us,ih=th.Os();self.DW=class extends self.FW{#CL;#HN;#OW=0;#LW=new Map;constructor(t){if(super(),this.#CL=th.RL.EL(ih),!t?.domComponentId)throw new Error("no DOM component ID specified");this.#HN=t.domComponentId,this.kW("elem-focused",t=>t.NW()),this.kW("elem-blurred",t=>{t&&t.BW()})}WW(t){const s=this.#OW++;return this.#LW.set(s,t),s}jW(t){this.#LW.delete(t)}kW(t,i){const s=this.#CL.GO();s.t4(this.#HN,t,t=>{const s=this.#LW.get(t.elementId);i(s,t)})}VW(t){sh.Le(t);for(const[s,i]of t)this.VW(s,i)}}}{const eh=self.Ds,hh=(new WeakMap,eh.Os());self.HW=class extends self.ik{#CL;constructor(){super(),this.#CL=eh.RL.EL(hh)}UW(){}zW(){return this.#CL.O6().JW()}qW(t){}$W(t){}XW(){}YW(t){}}}{const nh=self.Ds,rh=(new WeakMap,nh.Os());self.ZW=class extends self.qB{#CL;#KW=null;#QW=null;constructor(t){super(t),this.#CL=nh.RL.EL(rh)}gN(){if(super.gN(),this.#KW){const t=this.#CL.GO().Pf();t.removeEventListener("renderercontextlost",this.#KW),t.removeEventListener("renderercontextrestored",this.#QW),this.#KW=null,this.#QW=null}}tj(){if(!this.#KW){this.#KW=()=>this.sj(),this.#QW=()=>this.ij();const t=this.#CL.GO().Pf();t.addEventListener("renderercontextlost",this.#KW),t.addEventListener("renderercontextrestored",this.#QW)}}sj(){}ij(){}ej(t){}}}{const oh=self.Ds,ah=oh.Qh(oh.Rect),lh=new WeakMap,uh=oh.Os();self.hj=class extends self.ZW{#nj=-1;#rj=!0;#oj=!1;#aj=!1;#lj=-.2;#uj=oh.Qh(oh.Rect,0,0,-1,-1);#cj=0;#fj=0;#dj=-1;#pj=-1;#mj=!1;constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const s=oh.RL.EL(uh),i=(lh.set(this,s),this.#nj=this.ek.WW(this),s.GO().dL());this.#cj=i.gj(),this.#fj=i.yj(),this.zN(!0)}gN(){super.gN(),this.ek.jW(this.#nj),this.wj("destroy"),this.#nj=-1,lh.delete(this)}Sj(){const t=lh.get(this).GO();if(t.GF())throw new Error("not valid in worker mode");return this.bj("get-element")}wj(t,s){(s=s||{}).elementId=this.#nj,this.i4(t,s)}bj(t,s){return(s=s||{}).elementId=this.#nj,this.h4(t,s)}vj(t,s){return(s=s||{}).elementId=this.#nj,this.e4(t,s)}Mj(t){t=t||{};const s=lh.get(this).eO();t.elementId=this.#nj,t.isVisible=s.v5(),t.htmlIndex=s.hO().xj(),t.htmlZIndex=s.Gj(),Object.assign(t,this.Tj()),this.#rj=!!t.isVisible,this.h4("create",t),this._j(!0)}Ij(t){this.#rj!==(t=!!t)&&(this.#rj=t,this.wj("set-visible",{isVisible:t}))}n4(){this._j(!1)}Cj(){const t=lh.get(this).GO(),s=t.dL().Ej();return"Android"===oh.hi.ni&&("scale-inner"===s||"scale-outer"===s||"crop"===s)}_j(u){const c=lh.get(this);if(!c.Rj()){let t=c.eO(),s=t.hO(),i=t.D4(),[e,h]=s.iN(i.dl(),i.pl()),[n,r]=s.iN(i.ml(),i.gl()),o=c.GO().dL(),a=o.yL(),l=o.SL();if(t.v5()&&s.v5())if(!this.Cj()&&(n<=0||r<=0||a<=e||l<=h))this.Ij(!1);else{ah.set(e,h,n,r);const f=o.gj(),d=o.yj(),p=s.xj(),m=t.Gj();if(!u&&ah.equals(this.#uj)&&this.#cj===f&&this.#fj===d&&this.#dj===p&&this.#pj===m)this.Ij(!0);else{this.#uj.T(ah),this.#cj=f,this.#fj=d,this.#dj=p,this.#pj=m,this.Ij(!0);let t=null;this.#aj&&(t=s.Pj()+this.#lj),this.wj("update-position",{left:Math.round(this.#uj.dl()),top:Math.round(this.#uj.pl()),width:Math.round(this.#uj.width()),height:Math.round(this.#uj.height()),htmlIndex:p,htmlZIndex:m,fontSize:t})}}else this.Ij(!1)}}Aj(){this.bj("focus",{focus:!0})}Fj(){this.bj("focus",{focus:!1})}NW(){this.#oj=!0}BW(){this.#oj=!1}Dj(){return this.#oj}Oj(t,s){this.postToDOMElement("set-css-style",{prop:oh.Ao(t),val:s})}Lj(t,s){this.postToDOMElement("set-attribute",{name:t,val:s})}kj(t){this.postToDOMElement("remove-attribute",{name:t})}Nj(){this.#mj||(this.#mj=!0,Promise.resolve().then(()=>{this.#mj=!1,this.wj("update-state",this.Tj())}))}Tj(){}Bj(){return this.#nj}}}self.Wj=class extends self.c6{constructor(){super()}};self.jj=class extends globalThis.u6{constructor(){super()}UW(){}};{const ch=self.Ds,fh=new WeakMap,dh=ch.Os();self.Vj=class extends self.i6{#BN=!1;#jN=!1;#Hj=!1;constructor(){super(),fh.set(this,ch.RL.EL(dh))}gN(){super.gN(),this.zN(!1),this.JN(!1),this.Uj(!1),fh.delete(this)}qN(){return ch.RL.$N()}zj(){}XN(t){const s=fh.get(this);s.GO().YN(t,s.l6(),s.o6())}ZN(t){const s=fh.get(this);return s.GO().KN(t,s.l6(),s.o6())}zN(t){if(this.#BN!==(t=!!t)){this.#BN=t;const s=fh.get(this).GO();t?s.Jj(this):s.qj(this)}}r4(){return this.#BN}n4(){}JN(t){if(this.#jN!==(t=!!t)){this.#jN=t;const s=fh.get(this).GO();t?s.$j(this):s.Xj(this)}}a4(){return this.#jN}o4(){}Uj(t){if(this.#Hj!==(t=!!t)){this.#Hj=t;const s=fh.get(this).GO();t?s.Yj(this):s.Zj(this)}}Kj(){return this.#Hj}Qj(){}l4(){return[]}u4(){return null}c4(t){}}}{let e=self.Us,h=null;self.OF=class{constructor(t){h=t}mO(t){h.gO(t)}S4(t,s,i){e.ve(t),e.ve(s),e.ke(i),h.t8(t,s,i)}v4(t,s,i){return e.ve(t),e.ve(s),e.ke(i),h.s8(t,s,i)}i8(t){return e.Me(t),new self.e8(h,t)}set h8(t){h.n8(!!t)}get h8(){return h.r8()}o8(t){h.a8(!!t)}l8(t){e.ue(t);const s=h.u8(t);return s?s.KL():null}}}self.e8=class{#c8;#f8;#d8;#p8;#m8;#g8;constructor(t,s){const i=(this.#c8=t).WF(),e=t.JF(),h=(this.#f8=e,this.#d8=e.y8(),t.QF()),n=(this.#p8=h.w8(),this.#m8=h.S8(e),i.b8()),r=n.S8();this.#g8=r,s&&r.v8(s),t.M8(!1)}x8(){const t=this.#c8.WF(),s=this.#d8,i=this.#g8;t.G8(s),this.#f8.T8(this.#p8,this.#m8),t._8(s),i.I8(i.lF()+1)}get C8(){return this.#g8.E8()}release(){const t=this.#c8,s=t.QF(),i=t.WF().b8();t.M8(!0),i.P8(),s.P8()}};{let d=self.Ds,h=self.Us,p=null,n=null;self.A8=class{constructor(t,s){n=t,p=s}F8(){p.vR()}D8(t){p.SR(t)}O8(){p.Aw()}L8(){p._w()}k8(){p.Bw()}setColor(t){p.dR(t[0],t[1],t[2],t[3])}N8(t,s,i,e){p.dR(t,s,i,e)}B8(){p.mR()}W8(t){p.pR(t)}j8(t){p.rS(t)}V8(){p.oS()}rect(t){p.GR(t.left,t.top,t.right,t.bottom)}H8(t,s,i,e){p.GR(t,s,i,e)}U8(t){p.Hl(d.Hl.au(t))}z8(t,s,i,e,h,n,r,o){p.US(t,s,i,e,h,n,r,o)}J8(t,s){p.yS(d.Hl.au(t),d.Rect.wl(s))}q8(t,s){p.IR(d.Hl.au(t),d.Hl.au(s))}X8(t,s,i,e,h,n,r,o,a,l,u,c,f){p.CR(t,s,i,e,h,n,r,o,a,l,u,c,d.Rect.wl(f))}Y8(t,s,i,e,h,n,r,o,a,l,u,c,f){p.fS(t,s,i,e,h,n,r,o,a,l,u,c,d.Hl.au(f))}Z8(t,s,i){p.ER(t,s,i)}K8(t){p.HS(t)}line(t,s,i,e){p.dm(t,s,i,e)}Q8(t,s,i,e,h,n){p.dS(t,s,i,e,h,n)}tV(t,s,i,e){p.wS(t,s,i,e)}sV(t){p.MS(d.Rect.wl(t))}iV(t){p.xS(d.Hl.au(t))}eV(t){p.ES(t)}hV(){p.RS()}nV(t){p.DS(t)}rV(){p.NS()}oV(t){h.Ke(t,self.aV);const s=t?n.Yk(t):null;p.yR(s)}lV(t,s){const i=self.MO.vO(t);if(i)return i.uV(p,{Kv:s?.Kv??"clamp-to-edge",Qv:s?.Qv??"clamp-to-edge",t2:s?.t2??"trilinear",e2:s?.e2??!0});throw new Error("invalid IImageInfo")}cV(t){const s=self.MO.vO(t);if(!s)throw new Error("invalid IImageInfo");s.hI()}A6(t){const s=self.MO.vO(t);if(!s)throw new Error("invalid IImageInfo");const i=s.SM();return self.aV.fV(n,i)}dV(t,s,i){h.ge(t),h.ge(s);const e=p.lM(t,s,{Kv:i?.Kv??"clamp-to-edge",Qv:i?.Qv??"clamp-to-edge",t2:i?.t2??"trilinear",e2:i?.e2??!0});return self.aV.fV(n,e)}pV(t,s,i){h.Ze(s,self.aV);const e=n.Yk(s);p.dC(t,e,{premultiplyAlpha:i?.premultiplyAlpha??!0})}deleteTexture(t){h.Ze(t,self.aV);const s=n.Yk(t);p.dM(s)}mV(){const t=p.nb();return new self.gV(n,t)}yV(){n.dL().wV(p)}SV(t){h.Ze(t,globalThis.Xk);const s=n.Yk(t);s.bV(p)}}}{const ph=new WeakMap,mh=new WeakMap;self.aV=class{constructor(t,s){ph.set(this,{runtime:t,vV:s}),mh.set(s,this),t.nk(this,s),Object.defineProperties(this,{width:{value:s.Xp(),writable:!1},height:{value:s.om(),writable:!1}})}static fV(t,s){if(!s)return null;const i=mh.get(s);return i||new self.aV(t,s)}}}{let e=function(t){return yh.get(t).MV};e;const gh=self.Us,yh=new WeakMap;self.gV=class{constructor(t,s){yh.set(this,{runtime:t,MV:s}),t.nk(this,s)}release(){e(this).tn()}set xV(t){gh.ve(t),e(this).fI(t)}get xV(){return e(this).p_()}set GV(t){gh.ge(t),e(this).dI(t)}get GV(){return e(this).pI()}set lineHeight(t){gh.ge(t),e(this).gI(t)}get lineHeight(){return e(this).yI()}set TV(t){e(this).wI(t)}get TV(){return e(this).SI()}set _V(t){e(this).bI(t)}get _V(){return e(this).vI()}setColor(t){gh.Le(t),this.IV(t[0],t[1],t[2])}IV(t,s,i){e(this)._I(t,s,i)}CV(t){gh.ve(t),e(this).Vb(t)}set EV(t){e(this).II(t)}get EV(){return e(this).CI()}set verticalAlign(t){e(this).EI(t)}get verticalAlign(){return e(this).RI()}set RV(t){e(this).AI(t)}get RV(){return e(this).FI()}set PV(t){e(this).DI(t)}get PV(){return e(this).OI()}set text(t){gh.ve(t),e(this).Qc(t)}get text(){return e(this).LI()}Fk(t,s,i){gh.ge(t),gh.ge(s),gh.ge(i),e(this).kI(t,s,i)}P6(){const{runtime:t,MV:s}=yh.get(this),i=s.SM();return self.aV.fV(t,i)}F6(){return e(this).pC().yl()}AV(t){gh.He(t),e(this).rI=t}FV(){e(this).hI()}get DV(){return e(this).BI()}get OV(){return e(this).jI()}}}{let e=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return Sh.get(i)||""},n=function(e){return new Promise((t,s)=>{const i=document.createElement("script");i.onload=t,i.onerror=s,i.async=!1,i.type="module",i.src=e,document.head.appendChild(i)})};e,n;const g=self.Ds,wh=new Set(["local","remote"]),Sh=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);g.LV=class extends g.Zh{constructor(t,s){super();const i=s.exportType,e=(this.Xc=t,this.kV="folders",this.NV=new Map,this.BV="cordova"===i,this.WV=!!s.isiOSCordova,this.jV=!!s.isFileProtocol,this.VV=s.swClientId,this.HV=s.supportedAudioFormats||{},this.UV=new Map,this.zV=!1,this.JV=s.scriptFolder,this.qV="",this.$V="",this.XV="",this.YV=s.fileMap||new Map,this.ZV=new Map,"html5"===i||"scirra-arcade"===i||"instant-games"===i);this.KV=e?"remote":"local",this.QV=new Map,this.tH=[],this.sH=[],this.iH=!1,this.eH=0,this.hH=0,this.nH=0,this.rH=!1,this.oH=g.Qh(g.c1,()=>this.aH(),50),this.lH=g.Qh(g.s1,Math.max(g.hardwareConcurrency,8)),this.uH=g.Qh(g.s1,20),this.cH=new self.yO(this)}tn(){for(const t of this.QV.values())t.tn();this.QV.clear(),g.Pr(this.sH),this.Xc=null}GO(){return this.Xc}fH(t){this.kV=t}AO(){return this.kV}dH(){return this.JV}pH(t){this.qV=t}OO(){return this.qV}mH(t){this.$V=t}gH(){return this.$V}yH(t){this.XV=t}wH(){return this.XV}SH(){return this.jV}mo(t,s){return s=s||this.KV,g.uo(t)?("flat"===this.kV&&(t=t.toLowerCase()),this.BV&&this.jV?this.bH(t):"playable-ad-single-file"===this.Xc.lL()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===s?this.lH:this.uH).tc(()=>g.mo(t))):g.mo(t)}yo(t){return g.uo(t)?("flat"===this.kV&&(t=t.toLowerCase()),this.BV&&this.jV?this.vH(t):"playable-ad-single-file"===this.Xc.lL()?g.So(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.KV?this.lH:this.uH).tc(()=>g.yo(t))):g.yo(t)}do(t){return g.uo(t)?("flat"===this.kV&&(t=t.toLowerCase()),this.BV&&this.jV?this.MH(t):"playable-ad-single-file"===this.Xc.lL()?g.bo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.KV?this.lH:this.uH).tc(()=>g.do(t))):g.do(t)}async po(t){const s=await this.do(t);return JSON.parse(s)}xH(t,s){return"flat"===this.kV&&(t=t.toLowerCase()),this.Xc.fO("runtime","cordova-fetch-local-file",{filename:t,as:s})}MH(t){return this.xH(t,"text")}async bH(t){const s=await this.xH(t,"buffer"),i=e(t);return new Blob([s],{type:i})}async GH(t){"flat"===this.kV&&(t=t.toLowerCase());let s=this.NV.get(t);if(!s){const i=await this.bH(t);s=URL.createObjectURL(i),this.NV.set(t,s)}return s}vH(t){return this.xH(t,"buffer")}FO(t){"flat"===this.kV&&(t=t.toLowerCase());let s=this.qV+t;return"Gecko"===g.hi.ci&&"preview"===this.Xc.lL()?this.TH(s):s}RO(t){return g.lo(t)?Promise.resolve(t):this.BV&&this.jV?this.GH(t):"playable-ad-single-file"===this.Xc.lL()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.kV&&(t=t.toLowerCase()),Promise.resolve(t))}_H(s){if(g.lo(s)||"preview"!==this.Xc.lL()||!this.VV||!s)return s;try{const t=new URL(s,location.href);return t.searchParams.set("__c3_client_id",this.VV),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+s),s}}IH(t){return this.RO(t)}CH(t){if(t.EH&&!wh.has(t.EH))throw new Error("invalid load policy");let s=this.QV.get(t.url);return s||(s=g.Qh(g.RH,this,{url:t.url,size:t.size||0,EH:t.EH||this.KV}),this.QV.set(s.PH(),s),this.iH)||(this.eH+=s.$u(),this.sH.push(s.AH().then(()=>this.FH(s.$u())))),s}DH(t){this.QV.delete(t.PH())}async OH(){try{await Promise.all(this.sH),this.nH=1}catch(t){console.error("Error loading: ",t),this.rH=!0,this.aH()}}LH(){this.iH=!0}kH(){return this.rH}FH(t){this.hH+=t,this.oH._1()}aH(){const t=g.Qh(g.Event,"loadingprogress");this.nH=g.an(this.hH/this.eH,0,1),t.progress=this.nH,this.Xc.Pf().dispatchEvent(t)}NH(){return this.nH}BH(t){g.Or(this.tH,t),this.tH.length&&this.sH.push(this.WH())}async WH(){const t=[],s=[];for(const[i,e,h]of this.tH)this.eH+=h,t.push(this.jH(i,e,s).then(()=>this.FH(h)));await Promise.all(t),this.Xc.GF()&&0<s.length&&await this.Xc.fO("runtime","load-webfonts",{webfonts:s})}async jH(s,i,e){try{let t=await this.RO(i);"Gecko"===g.hi.ci&&(s=`'${s}'`),("Gecko"===g.hi.ci&&"preview"===this.Xc.lL()||"playable-ad-single-file"===this.Xc.lL())&&(t=this.TH(t));const h=new FontFace(s,`url('${t}')`);(this.Xc.GF()?self:document).fonts.add(h),await h.load(),this.Xc.GF()&&e.push({name:s,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${s}': `,t)}}SO(t){return!!this.HV[t]}VH(t,s){this.zV=!!s;for(const[i,e,h]of t)this.UV.set(i,{fileName:i,HH:e.map(t=>({type:t[0],UH:t[1],zH:i+t[1],fileSize:t[2]})),JH:h})}qH(t){"flat"===this.kV&&(t=t.toLowerCase());const s=this.UV.get(t);if(!s)return null;let i=null;for(const e of s.HH)if(i||"audio/webm; codecs=opus"!==e.type||(i=e),this.SO(e.type))return e;return i}$H(t){const s=this.qH(t);return s?{url:this.FO(s.zH),type:s.type}:null}XH(){if(this.zV){const t=[];for(const s of this.UV.values())if(!s.JH){const i=this.qH(s.fileName);i&&t.push({YH:s.fileName,url:this.FO(i.zH),type:i.type,fileSize:i.fileSize})}return t}return[]}ZH(t){return"preview"===this.Xc.lL()&&(t=new URL(t,location.href).toString()),this.YV.get(t)||null}TH(t){let s=this.ZV.get(t);if(!s){const i=this.ZH(t);if(!i)return t;s=URL.createObjectURL(i),this.ZV.set(t,s)}return s}fF(){return this.cH}async BO(...t){const s=await Promise.all(t.map(t=>this.RO(t)));if(this.Xc.GF())if(1===t.length){const i=t[0];await import((g.uo(i)?"./":"")+i)}else{const e=t.map(t=>`import "${g.uo(t)?"./":""}${t}";`).join("\n"),h=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));await import(h)}else await Promise.all(s.map(t=>n(t)))}async jO(t){if(WebAssembly.compileStreaming){const s=await this.RO(t);return WebAssembly.compileStreaming(fetch(s))}{const i=await g.yo(t);return WebAssembly.compile(i)}}async HO(t){const s=await this.RO(t);return this.Xc.fO("runtime","add-stylesheet",{url:s})}}}{const bh=self.Ds;bh.KH=class extends bh.Zh{constructor(t,s){super(),this.QH=t,this.Xc=t.GO(),this.t7=s.url||"",this.s7=s.size,this.i7=s.EH,this.e7=s.blob||null,this.h7=!!this.e7,this._g=null}tn(){this._g=null,this.QH=null,this.Xc=null,this.e7=null}PH(){return this.t7}$u(){return this.s7}AH(){return"local"===this.i7||this.e7?(this.h7=!0,Promise.resolve()):(this._g||(this._g=this.QH.mo(this.t7,this.i7).then(t=>(this.h7=!0,this._g=null,this.e7=t)).catch(t=>{console.error("Error loading resource: ",t),this._g=null})),this._g)}n7(){return this.h7}r7(){return this.e7?Promise.resolve(this.e7):this._g||this.QH.mo(this.t7,this.i7)}}}{const ln=self.Ds,un=new ln.s1,cn=new Set;ln.RH=class extends ln.KH{constructor(t,s){super(t,s),this.o7=null,this.a7=null,this.nd=0,this.l7=-1,this.u7=-1,cn.add(this)}tn(){if(0!==this.nd)throw new Error("released image asset which still has texture references");this.QH.DH(this),this.o7=null,cn.delete(this),super.tn()}static c7(){for(const t of cn)t.o7=null,t.a7=null,t.nd=0}uV(t,s){return s=s||{},this.nd++,this.a7?Promise.resolve(this.a7):(this.o7||(s.s2=this.Xc.dL().f7(),this.o7=this.d7(t,s)),this.o7)}async d7(s,i){try{const e=await this.r7();return 0===this.nd?this.o7=null:await un.tc(async()=>{const t=await s.sP(e,i);return this.o7=null,0===this.nd?(s.dM(t),null):(this.a7=t,this.l7=t.Xp(),this.u7=t.om(),this.a7)})}catch(t){throw console.error("Failed to load texture: ",t),t}}hI(){if(this.nd<=0)throw new Error("texture released too many times");if(this.nd--,0===this.nd&&this.a7){const t=this.a7.vb();t.dM(this.a7),this.a7=null}}p7(){return this.nd}SM(){return this.a7}Xp(){return this.l7}om(){return this.u7}async m7(){const t=await this.r7();return ln.Li.ImageBitmap?createImageBitmap(t):ln.Mo(t)}}}{let t=function(t,s){return t.eO().g7()-s.eO().g7()};t;const fn=self.Ds;fn.y7=class extends fn.Zh{constructor(t,s,i){super(),this.w7=t,this.Ua=s,this.za=i,this.S7=[],this.b7=!0,this.v7=new Set,this.M7=!1}tn(){fn.Pr(this.S7),this.v7.clear(),this.w7=null}Kf(){fn.Pr(this.S7),this.b7=!0,this.v7.clear(),this.M7=!1}x7(){this.b7=!1}zu(){if(this.S7.length){if(this.S7.length>this.v7.size)return!1;this.G7()}return!0}T7(t){this.v7.has(t)?(this.v7.delete(t),0===this.v7.size&&(this.M7=!1)):(this.S7.push(t),this.b7=1===this.S7.length)}u0(t){this.v7.add(t),this.M7=!0,50<=this.v7.size&&this.G7()}G7(){this.M7&&(this.S7.length===this.v7.size?this.Kf():(fn.Wr(this.S7,this.v7),this.v7.clear(),this.M7=!1))}_7(){this.b7||(this.S7.sort(t),this.b7=!0)}I7(t){this.G7(),this._7(),this.S7.length&&t.push(this.S7)}}}{const dn=self.Ds;dn.C7=class extends dn.Zh{constructor(t,s){super(),this.E7=t,this.R7=s,this.P7=dn.Qh(dn.Vu)}tn(){this.P7.tn(),this.P7=null}A7(t,s,i){let e=this.P7.Ks(t,s);return e||(i?(e=dn.Qh(dn.y7,this,t,s),this.P7.Set(t,s,e),e):null)}F7(t){return Math.floor(t/this.E7)}D7(t){return Math.floor(t/this.R7)}O7(e,h,n){if(h)for(let i=h.dl(),t=h.ml();i<=t;++i)for(let t=h.pl(),s=h.gl();t<=s;++t)if(!n||!n.Bl(i,t)){const r=this.A7(i,t,!1);r&&(r.u0(e),r.zu())&&this.P7.Ju(i,t)}if(n)for(let i=n.dl(),t=n.ml();i<=t;++i)for(let t=n.pl(),s=n.gl();t<=s;++t)h&&h.Bl(i,t)||this.A7(i,t,!0).T7(e)}L7(t,s){let i=this.F7(t.dl()),e=this.D7(t.pl()),h=this.F7(t.ml()),n=this.D7(t.gl());for(;i<=h;++i)for(let t=e;t<=n;++t){const r=this.A7(i,t,!1);r&&r.I7(s)}}k7(t){let s=t.dl(),i=t.pl(),e=t.ml(),h=t.gl();for(;s<=e;++s)for(let t=i;t<=h;++t){const n=this.A7(s,t,!1);n&&n.x7()}}}}{let r=function(t,s){return t.eO().g7()-s.eO().g7()},t=function(t,s){return t.eO().nv()-s.eO().nv()};r,t;const S=self.Ds,pn=new S.Rect,mn=new S.Hl,gn=[],yn=(new S.Rect,new S.Rect,self.ys),Gh=yn.Ts,Vh=yn._s,xh=yn.vs,wn=xh.create(),Sn=Gh.create(),bn=Vh.create(),vn=Gh.create(),Mn=Gh.create(),xn=Gh.create(),Gn=S.Qh(S.Ha),Tn=(S.Qh(S.Rect),[]),_n=[],In=[],Cn={name:"",sid:-1,N7:!1,isVisible:!0,isInteractive:!0,G5:!1,backgroundColor:[1,1,1,1],B5:!0,B7:[1,1],opacity:1,V5:!1,W7:!1,j7:!1,V7:!1,scaleRate:1,h3:0,N5:0,H7:[],U7:[],z7:[]};S.J7=class extends S.Zh{constructor(t,s,i){super(),i=Object.assign({},Cn,i),this.q7=t,this.Xc=t.GO(),this.X7=s,this.nn=i.name,this.Lg=-1,this.Y7=!!i.G5,this.Z7=-1,this.K7=i.sid,this.Q7=!!i.N7,this.tU=!!i.isVisible,this.sU=!!i.isInteractive,this.iU=S.Qh(S.Oo),this.iU.Aa(i.backgroundColor),this.eU=!!i.B5,this.hU=i.B7[0],this.nU=i.B7[1],this.Nb=S.Qh(S.Oo,1,1,1,i.opacity),this.rU=S.Qh(S.Oo),this.oU=!!i.V5,this.aU=!!i.W7,this.lU=!!i.j7,this.uU=!!i.V7,this.cU=i.scaleRate,this.kb=i.h3,this.fU=null,this.dU=1,this.Bb=i.N5,this.pU=0,this.mU=0,this.gU=0,this.yU=!1,this.QC=S.Qh(S.Rect),this.wU=S.Qh(S.Rect),this.SU=S.Qh(S.Rect),this.bU=!0,this.eM=xh.create(),this.vU=!0,this.UA=xh.create(),this.MU=!0,this.xU=S.Qh(S.Hg.qg),this.GU=!0,this.TU=[],this._U=i.H7,this.IU=[],this.CU=[],this.EU=new Map,this.S7=[],this.RU=!1,this.PU=!1,this.AU=!1;const h=this.Xc.dL();this.FU=S.Qh(S.DU,this,i.U7),this.nF=S.Qh(S.Hg.sA,h.OU(),{UP:(t,s)=>{const i=s.Z3(),e=i.ZR();t.Vb(i.LU()),t.nP(e),t.rP(e),h.kU(e)},JP:t=>this.Ek().NU(t)}),this.BU=!0,this.WU=!0,this.jU=null,this.VU=[],this.HU=!1,this.UU=S.Qh(S.Rect,0,0,-1,-1),this.zU=S.Qh(S.Rect,0,0,-1,-1),this.JU=new self.Xk(this),this.qU(),this.$U()&&(this.jU=S.Qh(S.C7,this.Xc._F(),this.Xc.CF())),this.XU=i.z7.map(t=>S.J7.YU(this.q7,this,t))}ZU(){for(const t of this._U){const s=this.Xc.KU(t[1]);this.q7.QU(s),s.sz()||(s.iz(t),s.ez(this.Lg)),this.IU.push(t),this.EU.set(t[2],t)}S.Or(this.TU,this.IU),this._U=null}static YU(t,s,i){return S.Qh(S.J7,t,s,{name:i[0],sid:i[2],isVisible:i[3],isInteractive:i[13],G5:i[19],backgroundColor:i[4].map(t=>t/255),B5:i[5],B7:[i[6],i[7]],opacity:i[8],V5:i[9],W7:i[17],j7:i[18],V7:i[10],scaleRate:i[11],h3:i[12],N5:i[16],H7:i[14],U7:i[15],z7:i[20]})}tn(){for(const t of this.XU)t.tn();S.Pr(this.XU);for(const s of this.S7)this.Xc.wN(s);S.Pr(this.S7),this.FU.tn(),this.FU=null,this.nF.tn(),this.nF=null,this.JU=null,this.X7=null,this.q7=null,this.Xc=null}hz(t){return this.EU.get(t)}nz(h){let n=this.q7.rz(),r=0,o=this.IU;for(let e=0,t=o.length;e<t;++e){let t=o[e],s=this.Xc.KU(t[1]),i=!0;if(!s.oz()||n){const a=this.Xc.az(t,this,!0);h.push(a),s.lz()&&(i=!1,this.CU.push(a.TN()))}i&&(o[r]=o[e],++r)}S.Rr(o,r),this.Xc.Ik(),this.lO()}uz(t,s){if(!t.hk().OL())throw new Error("instance is not of world type");const i=t.eO();if(i.hO()!==this)throw new Error("instance added to wrong layer");this.S7.push(t),0!==i.nv()&&(this.AU=!0),s&&this.$U()&&t.eO()._4(),this.lO(t)}cz(t){this.S7.includes(t)||(this.S7.push(t),0!==t.eO().nv()&&(this.AU=!0),this.lO(t))}fz(t,s){const i=t.eO();if(i.hO()!==this)throw new Error("instance added to wrong layer");this.S7.unshift(t),0!==i.nv()&&(this.AU=!0),this.lO(t),s&&this.$U()&&t.eO()._4()}dz(t,s){const i=this.S7.indexOf(t);i<0||(s&&this.$U()&&t.eO().pz(),this.S7.splice(i,1),this.lO(t),this.mz())}gz(){this.AU=!0}mz(){0===this.S7.length&&(this.AU=!1)}yz(t){if(t){const s=new Set;for(const i of this.S7){const e=i.eO().g7();0<=e&&s.add(e)}let t=-1;for(const h of this.S7){const n=h.eO();if(!(0<=n.g7())){for(++t;s.has(t);)++t;n.wz(t)}}}this.S7.sort(r)}Sz(){}bz(){for(const t of this.S7)t.cN().lz()||this.Xc.wN(t);this.Xc.Ik(),S.Pr(this.S7),this.AU=!1,this.lO()}vz(s,t,i,e,h,n){const r=this.Xc.WF(),o=this.Xc.Mz(),a=s.xz(),l=[];for(const u of this.IU){const c=u[0],f=c[0],d=c[1];if(t.Bl(f,d)){const p=o[u[1]];if(p!==s){if(!a)continue;if(!s.Gz(p))continue}let t=h;if(!t){const y=this.Xc.sO();t=this.BD()===y?this:(t=y.Tz(this.jc()))||y.rO(this.lF())}const m=this.Xc.az(u,t,!1,void 0,void 0,!1,n),g=(t.Mk(m),m.eO());g.R4(i,e),g._4(),r.xk(!0),m.Gk(),r.xk(!1),l.push(m)}}return l}Sk(){return this.S7.length}BD(){return this.q7}jc(){return this.nn}_z(t){this.Lg=t}lF(){return this.Lg}Iz(t){this.Z7=t}xj(){return this.Z7}T5(){return this.Y7}_5(t){this.Y7!==(t=!!t)&&(this.Y7=t,this.q7.Cz(),this.Xc.uO())}Ez(){let t=this.f5();return(t?t.m5():this.BD().Rz()).indexOf(this)}Pz(){return this.K7}GO(){return this.Xc}Az(){return this.Q7}Fz(){for(const t of this.d5())if(t.Az())return!0;return!1}GL(){return this.Xc.GL()}Ek(){return this.FU}aF(){return this.Dz(),this.nF}Dz(){const t=this.Oz();if(this.BU||t!==this.WU||this.nF.zA()){const s=this.Ek().Lz();this.nF.JA(s.map(t=>t.Jx()),{$P:s.map(t=>t.lF()),XP:!t,tA:!0}),this.BU=!1,this.WU=t}}m6(){this.Ek().m6(),this.BU=!0}$U(){return this.uU&&!this.lU}kz(){return this.jU}Nz(){this.HU=!1}v5(){for(const t of this.Bz())if(!t.w5())return!1;return!0}w5(){return this.tU}S5(t){this.tU!==(t=!!t)&&(this.tU=t,this.Xc.uO())}x5(t){this.sU=!!t}M5(){return this.sU}C5(){for(const t of this.Bz())if(!t.M5())return!1;return!0}q5(t){if(this.yU!==(t=!!t)){if(this.yU=t){const s=this.BD();this.mU=s.Bk(),this.gU=s.jk()}this.Wz(),this.Xc.uO()}}jz(){return this.yU}Nk(t){const s=this.BD(),i=s.Vz(),e=s.Uz();this.mU!==(t=(t=e<t?e:t)<i?i:t)&&(this.mU=t,this.jz())&&(this.Wz(),this.Xc.uO())}Wk(t){const s=this.BD(),i=s.zz(),e=s.Jz();this.gU!==(t=(t=e<t?e:t)<i?i:t)&&(this.gU=t,this.jz())&&(this.Wz(),this.Xc.uO())}Bk(){return this.jz()?this.mU:this.BD().Bk()}jk(){return this.jz()?this.gU:this.BD().jk()}Y5(){return this.qz(),this.QC}$z(){return this.qz(),this.wU}Xz(){return this.qz(),this.SU}o5(){const t=this.BD();return[t.Yz(),t.Zz()]}iw(t){return this.Xc.iw(t)}Kz(c,e){const h=this.$z();if(0===c)e.T(h);else{let o=h.vl(),a=h.Ml(),t=this.Qz(c),s=h.width()/t,i=h.height()/t,[l,u]=this.o5();if(.5!==l||.5!==u){let t=this.tJ(),s=this.Xc,i=this.iw()/t,e=(l-.5)*s.sJ()/i,h=(u-.5)*s.iJ()/i,n=this.kk(),r=(0!==n&&(Gn.set(e,h),Gn.rotate(n),e=Gn.$a(),h=Gn.Ya()),S.xn(t,0,c));o+=S.Ft(e,0,r),a+=S.Ft(h,0,r)}e.set(o-s/2,a-i/2,o+s/2,a+i/2)}}fR(){return this.Nb.Ko()}pR(t){t=S.an(t,0,1),this.Nb.Ko()!==t&&(this.Nb.qo(t),this.qU(),this.Xc.uO())}qU(){this.rU.T(this.Nb),this.rU.ua()}LU(){return this.rU}Oz(){return this.Nb.ra(1,1,1,1)}A5(){return this.cU}P5(t){this.cU!==t&&(this.cU=t,this.Wz(),this.Xc.uO())}O5(){return this.hU}k5(){return this.nU}eJ(t,s){this.hU===t&&this.nU===s||(this.hU=t,this.nU=s,this.Wz(),this.Xc.uO())}D5(t){this.eJ(t,this.k5())}L5(t){this.eJ(this.O5(),t)}rv(t){this.Bb!==t&&(this.Bb=t,this.Xc.uO())}nv(){return this.Bb}Lk(t){t=S.ln(t),this.pU!==t&&(this.pU=t,this.Wz(),this.Xc.uO())}kk(){return S.ln(this.q7.kk()+this.pU)}F5(){return this.pU}hJ(){return 0<this.S7.length}oO(){return this.S7}nJ(){return this.rJ()&&this.lU?(S.Or(In,this.oO()),In.sort((t,s)=>this.oJ(t,s)),In):this.oO()}aJ(t){S.Vh(t,this.nJ());for(const s of this.XU)s.v5()&&0<s.fR()&&s.aJ(t)}oJ(t,s){const i=this.BD().lJ(),e=i[0],h=i[1],n=i[2],r=t.eO(),o=s.eO(),a=r.Kb()-e,l=r.sv()-h,u=r.nv()-n,c=o.Kb()-e,f=o.sv()-h,d=o.nv()-n;return c*c+f*f+d*d-(a*a+l*l+u*u)}J5(){return this.iU}j5(){return this.eU}W5(t){this.eU!==(t=!!t)&&(this.eU=t,this.Xc.uO())}U5(){return this.oU}H5(t){this.oU!==(t=!!t)&&(this.oU=t,this.Xc.uO())}uJ(){return!this.GO().cJ()||!this.aU}rJ(){return!this.uJ()}fJ(){return this.rJ()&&this.BD().dJ()}pJ(){if(!this.fJ())return!1;for(const t of this.XU)if(!t.pJ())return!1;return!0}jb(t){this.kb!==t&&(this.kb=t,this.Xc.uO())}z5(){return this.kb}mJ(){return!this.X7}f5(){return this.X7}gJ(t){this.X7=t}m5(){return this.XU}yJ(){return 0<this.XU.length}wJ(t,s=!0){s?this.XU.push(t):this.XU.unshift(t)}SJ(t,s,i){let e=this.XU.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.XU.splice(e,0,t)}bJ(t){const s=this.XU.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.XU.splice(s,1)}vJ(){for(const t of this.XU)if(t.MJ())return!0;return!1}*y5(){for(const t of this.XU)yield*t.y5();yield this}*d5(){let t=this.f5();for(;t;)yield t,t=t.f5()}*Bz(){yield this,yield*this.d5()}xJ(t){for(const s of this.d5())if(s===t)return!0;return!1}GJ(t){return this===t||this.hU===t.hU&&this.nU===t.nU&&this.dU===t.dU&&this.cU===t.cU&&this.pU===t.pU&&this.Bk()===t.Bk()&&this.jk()===t.jk()}TJ(){return{parallaxX:this.O5(),parallaxY:this.k5(),scale:this.R5(),scaleRate:this.A5(),angle:this.F5(),hasOwnScroll:this.jz(),scrollX:this.Bk(),scrollY:this.jk()}}_J(t){this.eJ(t.parallaxX,t.parallaxY),this.E5(t.scale),this.P5(t.scaleRate),this.Lk(t.angle),this.q5(t.hasOwnScroll),this.Nk(t.scrollX),this.Wk(t.scrollY),this.qz()}IJ(t){if(0!==t.size){const s=S.Wr(this.S7,t);0<s&&(this.mz(),this.lO())}}lO(t){this.RU=!1,this.HU=!1,t&&!t.cN().hk().kL()||(this.PU=!1)}CJ(){if(!this.RU){if(this.S7.sort(t),this.$U())for(let t=0,s=this.S7.length;t<s;++t){const i=this.S7[t].eO();i.wz(t),this.jU.k7(i.EJ())}else for(let t=0,s=this.S7.length;t<s;++t)this.S7[t].eO().wz(t);this.RU=!0}}RJ(){if(!this.PU){let t=this.q7.PJ(this.xj()),s=t.map(t=>[...t.y5()]).flat(),i=0;for(const e of s){for(const h of e.oO())h.cN().hk().kL()&&h.eO().AJ(i++);e.FJ()}}}FJ(){this.PU=!0}DJ(){return{isVisible:this.v5(),opacity:this.fR(),isInteractive:this.M5()}}OJ(t,s,i){const e=t.eO(),h=s.eO();if(e.hO()!==this||h.hO()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let n=e.nO(),r=h.nO();return n!==r+(i?1:-1)&&(S.Lr(this.S7,n),n<r&&r--,i&&r++,r===this.S7.length?this.S7.push(t):this.S7.splice(r,0,t),this.lO(t),!0)}LJ(t,s){let i=[],e=0,h=0,n=t.length,r=s.length;for(;e<n&&h<r;){const o=t[e],a=s[h];o.eO().g7()<a.eO().g7()?(i.push(o),++e):(i.push(a),++h)}for(;e<n;++e)i.push(t[e]);for(;h<r;++h)i.push(s[h]);return i}kJ(s){const i=[],e=s.length;for(let t=0;t<e-1;t+=2){const h=s[t],n=s[t+1];i.push(this.LJ(h,n))}return e%2==1&&i.push(s[e-1]),i}NJ(t){for(;1<t.length;)t=this.kJ(t);return t[0]}BJ(){return this.CJ(),S.Pr(gn),this.jU.L7(this.Y5(),gn),gn.length?1===gn.length?gn[0]:this.NJ(gn):[]}MJ(){return this.v5()&&0<this.fR()&&this.WJ()}WJ(){if(this.hJ()||!this.j5())return!0;for(const t of this.XU)if(t.WJ())return!0;return!1}jJ(){return this.U5()||!this.Oz()||0!==this.z5()||this.FU.VJ()}HJ(){if(this.jJ())return!0;for(const t of this.XU)if(t.HJ())return!0;return!1}ZR(){return this.fU}Qz(t){if(this.q7.u5())return 1;{const s=this.UJ();return s/(s-t)}}zJ(t){const s=this.Xc.aN();if(this.q7.u5())return s;{const i=this.UJ(),e=this.iw();return e/Math.abs(i-t)*s}}Wz(){this.MU=!0,this.GU=!0,this.bU=!0}JJ(t){return this.MU&&(this.qJ(t,this.UA,0,0,null),this.MU=!1),this.UA}tJ(t){return this.iw(t)/this.$J()}UJ(){return this.fJ()?this.BD().lJ()[2]:this.tJ()}XJ(){if(this.fJ()){const t=this.BD().lJ();return[t[0],t[1],t[2]]}return this.YJ()}YJ(t=0,s=0,h=0){let n=this.Xc,i=this.BD(),e=n.ZJ(),r=n.KJ(),o=(this.Bk()-e)*this.hU+e,a=(this.jk()-r)*this.nU+r,l=(n.PF()&&(o=Math.round(o),a=Math.round(a)),o+t),u=a+s,c=i.u5()?this.iw(h):this.tJ(h),[f,d]=this.o5();if(.5!==f||.5!==d){let t=this.iw(h)/c,s=(f-.5)*n.sJ()/t,i=(d-.5)*n.iJ()/t,e=this.kk();0!==e&&(Gn.set(s,i),Gn.rotate(e),s=Gn.$a(),i=Gn.Ya()),l+=s,u+=i}return[l,u,c]}qJ(t,s,i,e,h){const n=this.Xc,r=this.BD();if(this.fJ()){Gh.T(vn,r.lJ()),Gh.T(Mn,r.QJ()),Gh.T(xn,r.t9());const o=n.ZJ(),a=n.KJ(),l=Mn[0]-vn[0],u=Mn[1]-vn[1],c=Mn[2]-vn[2];vn[0]=(vn[0]-o)*this.hU+o,vn[1]=(vn[1]-a)*this.nU+a,vn[2]*=Math.max(this.hU,this.nU),Mn[0]=vn[0]+l,Mn[1]=vn[1]+u,Mn[2]=vn[2]+c}else{const[f,d,p]=this.YJ(i,e,h),m=(Gh.set(vn,f,d,p),Gh.set(Mn,f,d,p-100),this.kk());0===m?Gh.set(xn,0,1,0):Gh.set(xn,Math.sin(m),Math.cos(m),0)}t.Sw(s,vn,Mn,xn,h||n.iJ())}s9(){this.vU=!0,this.GU=!0,this.bU=!0}i9(t){return this.vU&&(this.e9(t),this.vU=!1),this.eM}e9(t){const s=this.Xc.dL(),[i,e]=this.o5();if(this.q7.u5())t.ww(this.eM,s.h9(),s.n9());else if(.5===i&&.5===e)xh.T(this.eM,s.r9());else{const h=s.h9(),n=s.n9();t.gw(this.eM,h/n,i,e)}}bV(t,s=!0,i=0,e=0,h=0){s&&t.sR(this.i9(t));let n;n=0===i&&0===e&&0===h?this.JJ(t):(this.qJ(t,wn,i,e,h),wn),t.oR(n)}o9(t){this.bV(t),t.hS(this.nv())}a9(t){let s=null;if(t.tb()&&this.Xc.l9()){const i=this.Xc.dL().u9(this);i&&(s=i.WC(),t.fP(s))}return s}c9(t){if(t.yw()&&this.Xc.l9()){const s=2*(this.lF()+1);t.StartMeasuringRenderPassTime(s,1+s)}}Hv(t,s,i){let e=this.Xc.dL(),h=this.jJ(),n=null,r=this.a9(t);if(this.c9(t),h){const o={t2:this.Xc.EF(),U2:!0,f9:!!t.yw()&&this.Xc.d9()};"low"===e.p9()&&(o.width=e.h9(),o.height=e.n9()),n=this.Xc.m9(o),this.fU=n,t.eP(n),this.j5()&&t.HR(0,0,0,0)}else this.fU=s,t.eP(s);if(this.j5()||t.Uu(this.iU),this.q7.g9(t,this.fU,this.XU,h&&this.j5()),this.c9(t),this.bV(t),t.hS(this.nv()),t.JR(this.rJ()),this.$J()>Number.EPSILON){this.CJ();const a=this.$U()&&0===this.nv()&&!this.AU;this.fJ()?this.y9(t):a?this.w9(t):this.S9(t,this.nJ())}t.hS(0),t.rS(0),h&&(t.JR(!1),this.b9(t,n,s,i)),r&&t.pP(r),this.fU=null}S9(i,e){let h=this.Y5(),n=this.fU,r=this.BD().u5(),o=this.BD().v9(),a=null;for(let t=0,s=e.length;t<s;++t){const l=e[t];if(l!==a){const u=(a=l).eO();u.v5()&&u.M9(h,o,r)&&this.x9(l,u,i,n)}}}y9(e){const h=this.fU,n=this.G9(),r=Tn,o=_n,a=this.nJ();for(let s=0,i=a.length;s<i;){const l=a[s],u=l.eO();if(u.v5()&&u.T9(n)){(!l._9()||0<u.I9())&&o.push(l);const c=l.eO().A4();r.push(l);let t=s+1;for(;t<i;++t){const f=a[t],d=f.eO();if(d.v5()&&d.T9(n)){if(d.A4()!==c)break;(f._9()?(0<d.I9()&&o.push(f),r):o).push(f)}}if(1!==r.length||r[0].C9()){this.E9(e,r);for(let t=0,s=o.length;t<s;++t){const p=o[t],m=p.eO();m.R9(!0),this.x9(p,m,e,h),m.R9(!1)}}else{this.x9(l,u,e,h);for(let t=0,s=o.length;t<s;++t){const g=o[t];if(g!==l){const y=g.eO(),w=y.hO();w.x9(g,y,e,h)}}}s=t,S.Pr(r),S.Pr(o)}else++s}}E9(i,e){const h=this.fU;i.aP();for(let t=0,s=e.length;t<s;++t){const n=e[t],r=n.eO();r.P9(!0),this.A9(n,r,i)}i.lP();for(let t=0,s=e.length;t<s;++t){const o=e[t],a=o.eO();this.x9(o,a,i,h),a.P9(!1)}i.cP()}w9(t){let s=this.jU,i=this.zU,e=this.UU,h=this.Y5(),n;i.set(s.F7(h.dl()),s.D7(h.pl()),s.F7(h.ml()),s.D7(h.gl())),this.HU&&i.equals(e)?n=this.VU:(n=this.BJ(),this.HU=!0,e.T(i)),this.S9(t,n),n!==this.VU&&S.Or(this.VU,n)}x9(t,s,i,e){s.VJ()?this.F9(t,s,i,e):this.A9(t,s,i)}A9(t,s,i){const e=s.D9();i.jw()!==e&&e.Wb(),t.Hv(i)}F9(t,s,i,e){this.O9(t,s,i,e,null)&&this.bV(i)}O9(t,s,i,e,h){const n=s.G4().aF();return n.i3(i,e,{e3:t,h3:s.z5(),devicePixelRatio:this.Xc.L9(),time:t.k9(),n3:this.Xc.N9()*this.$J(),r3:this.kk(),E3:s.D4(),R3:n.X3()?null:this.B9(s),f3:h&&h.f3,d3:h&&h.d3,m3:h&&h.m3,g3:h&&h.g3}),i.hS(this.nv()),n.lR()}b9(t,s,i,e){const h=this.FU.Lz(),n=this.Xc;0===h.length?(t.eP(i),t._w(),e&&0===this.kb&&this.Oz()?t.hP(s):(t.jb(this.kb),t.Vb(this.rU),t.nP(s)),t.rP(s),n.kU(s)):this.aF().i3(t,i,{e3:this,h3:this.z5(),devicePixelRatio:n.L9(),n3:n.N9()*this.$J(),r3:this.kk(),E3:this.Y5(),R3:null,qP:!0})}R5(){return this.dU}E5(t){this.dU!==t&&(this.dU=t,this.q7.W9(),this.Wz(),this.Xc.uO())}aN(){return this.$J()*this.Xc.aN()}Pj(){return this.$J()*this.Xc.Pj()}$J(){return(this.dU*this.q7.Ok()-1)*this.cU+1}qz(){if(this.bU){this.bU=!1;let t=this.Xc.ZJ(),s=this.Xc.KJ(),i=(this.Bk()-t)*this.hU+t,e=(this.jk()-s)*this.nU+s,h=this.$J(),n=this.Xc.sJ()/h,r=this.Xc.iJ()/h,o=i-n/2,a=e-r/2;this.Xc.PF()&&(o=Math.round(o),a=Math.round(a));const l=this.wU,u=(l.set(o,a,o+n,a+r),this.kk()),c=(0!==u&&(pn.T(l),pn.offset(-l.vl(),-l.Ml()),mn.cu(pn,u),mn.du(pn),pn.offset(l.vl(),l.Ml()),l.T(pn)),this.Bb);this.Kz(c,this.QC),this.fJ()?this.j9(c,this.SU):this.SU.T(this.QC)}}j9(t,s){let i=this.Xc.dL(),e=i.yL(),h=i.SL(),[n,r]=this.K5(0,0,t),[o,a]=this.K5(e,0,t),[l,u]=this.K5(e,h,t),[c,f]=this.K5(0,h,t),d=Math.min(n,o,l,c),p=Math.min(r,a,u,f),m=Math.max(n,o,l,c),g=Math.max(r,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}K5(t,s,i=0){return this.V9(t,s,i,this.Pj())}hN(t,s,i=0){return this.V9(t,s,i,this.aN()*this.GL())}V9(t,s,i,e){const h=this.Xc,n=h.vb(),r=this.$J(),o=h.sJ()/r,a=h.iJ()/r,l=bn,u=(Vh.set(l,0,0,o,a),t/=e,s=l[3]-s/e,this.i9(n)),c=this.JJ(n),f=Sn,d=S.Hg.Jg(t,s,i,c,u,l,f);return d?[f[0],f[1]]:[NaN,NaN]}H9(t,s){const i=this.dU,e=this.cU,h=this.hU,n=this.nU,r=this.pU,o=(this.dU=1,this.cU=1,this.hU=1,this.nU=1,this.pU=0,this.Wz(),this.K5(t,s));return this.dU=i,this.cU=e,this.hU=h,this.nU=n,this.pU=r,this.Wz(),o}iN(t,s,i=0){return this.U9(t,s,i,this.Pj())}rN(t,s,i=0){return this.U9(t,s,i,this.aN()*this.GL())}U9(t,s,i,e){const h=this.Xc,n=h.vb(),r=this.$J(),o=h.sJ()/r,a=h.iJ()/r,l=bn,u=(Vh.set(l,0,0,o,a),this.i9(n)),c=this.JJ(n),f=Sn,d=S.Hg.Ug(t,s,i,c,u,l,f);return d?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}z9(t,s){return t*=this.aN()*this.GL(),0!==s&&(t*=this.Qz(s)),t}B9(t){const s=t.D4(),i=t.A4(),e=t.I9(),l=i+e,u=s.dl(),c=s.pl(),f=s.ml(),d=s.gl();if(this.fJ()){if(this.J9(u,c,i)||this.J9(f,c,i)||this.J9(f,d,i)||this.J9(u,d,i))return null;if(0<e&&(this.J9(u,c,l)||this.J9(f,c,l)||this.J9(f,d,l)||this.J9(u,d,l)))return null}else if(l>=this.tJ())return null;let[p,m]=this.rN(u,c,i),[g,y]=this.rN(f,d,i);if(0!==this.kk()||0<e||this.fJ()){const[w,S]=this.rN(f,c,i),[b,v]=this.rN(u,d,i);if(0<e){let[t,s]=this.rN(u,c,l),[i,e]=this.rN(f,c,l),[h,n]=this.rN(f,d,l),[r,o]=this.rN(u,d,l),a=Math.min(p,g,w,b,t,i,h,r);g=Math.max(p,g,w,b,t,i,h,r),p=a,a=Math.min(m,y,S,v,s,e,n,o),y=Math.max(m,y,S,v,s,e,n,o),m=a}else{let t=Math.min(p,g,w,b);g=Math.max(p,g,w,b),p=t,t=Math.min(m,y,S,v),y=Math.max(m,y,S,v),m=t}}return pn.set(p,m,g,y),pn}G9(){return this.GU&&(this.q9(),this.GU=!1),this.xU}q9(){const t=this.Xc.vb(),s=this.i9(t),i=this.JJ(t);this.xU.ty(i,s)}J9(t,s,i){return this.G9().ey(t,s,i)}X9(){const t={d:this.Az(),s:this.R5(),a:this.F5(),v:this.w5(),i:this.M5(),html:this.T5(),bc:this.iU.toJSON(),t:this.j5(),sx:this.mU,sy:this.gU,hosp:this.yU,px:this.O5(),py:this.k5(),c:this.Nb.toJSON(),sr:this.A5(),fx:this.FU.pv(),cg:this.CU};return t}Y9(t){this.Q7=!!t.d,this.dU=t.s,this.pU=t.a,this.tU=!!t.v,this.sU=!t.hasOwnProperty("i")||t.i,this.Y7=!!t.html,this.iU.Aa(t.bc),this.eU=!!t.t,t.hasOwnProperty("sx")&&(this.mU=t.sx),t.hasOwnProperty("sy")&&(this.gU=t.sy),t.hasOwnProperty("hosp")&&(this.yU=!!t.hosp),this.hU=t.px,this.nU=t.py,this.Nb.Aa(t.c),this.qU(),this.cU=t.sr,S.Or(this.CU,t.cg),S.Or(this.IU,this.TU);let i=new Set(this.CU),e=0;for(let t=0,s=this.IU.length;t<s;++t)i.has(this.IU[t][2])||(this.IU[e]=this.IU[t],++e);S.Rr(this.IU,e),this.FU.mv(t.fx),this.BU=!0}Z9(){this.yz(!1),this.lO(),this.Wz(),this.s9()}Uk(){return this.JU}Mk(t,s=!1){if(this.S7.includes(t))s&&this.S7.sort((t,s)=>{const i=t.eO().K9(),e=s.eO().K9();return i-e});else if(t.Q9()){const i=[...t.uB()];i.push(t),i.sort((t,s)=>{const i=t.eO().K9(),e=s.eO().K9();return i-e});for(const e of i)if(e.xN())for(const h of e.GN())if(!i.includes(h)){const n=[...h.uB()];n.push(h),n.sort((t,s)=>{const i=t.eO().K9(),e=s.eO().K9();return i-e}),n&&n.length&&i.splice(i.length,0,...n)}for(const r of i)r.hk().OL()&&this.uz(r,!0)}else if(t.hk().OL()&&this.uz(t,!0),t.xN())for(const o of t.GN()){const a=[...o.uB()];if(a.push(o),a.sort((t,s)=>{const i=t.eO().K9(),e=s.eO().K9();return i-e}),a&&a.length)for(const l of a)l.hk().OL()&&this.uz(l,!0)}}}}{let l=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},v=function(t,s){I!==t&&(t.o9(s),I=t)},M=(l,v,self.Ds),e=self.C3Debugger,h=(M.Qh(M.Rect),M.Qh(M.Rect),M.Qh(M.Rect)),x=M.Qh(M.Oo),t=self.ys,u=t.Ts,a=[],G=[],T=[],_=[],I=null;M.tq=class extends M.Zh{constructor(t,s,i){super(),this.sq=t,this.Xc=t.GO(),this.nn=i[0],this.iq=i[1],this.eq=i[2],this.Lm=i[1],this.km=i[2],this.hq=!!i[3],this.nq=!!i[4],this.rq=i[5],this.oq=i[6],this.aq=i[7],this.lq=null,this.K7=i[8],this.Lg=s,this.mU=0,this.gU=0,this.dU=1,this.pU=0,this.uq=new Set,this.cq=new Set,this.fq=new Set,this.pq=[],this.mq=[],this.gq=new Map,this.yq=new Map,this.wq=[],this.Sq=!1,this.bq=u.create(),this.vq=u.create(),this.Mq=u.create(),this.xq=[],this.Gq=[],this.Tq=new Map,this._q=new Map,this.Iq=-1;const h=this.Xc.dL();this.FU=M.Qh(M.DU,this,i[11]),this.nF=M.Qh(M.Hg.sA,h.OU(),{UP:(t,s)=>{const i=s.Z3(),e=i.ZR();t.mR(),t.nP(e),t.rP(e),h.kU(e)},JP:t=>this.Ek().NU(t)}),this.BU=!0,this.Cq=!1,this.fU=null,this.Eq={},this.Rq=new Map,this.Pq=!0,this.Aq=new self.Ck(this),this.Fq=M.Qh(M.Event.Pf);for(const e of i[9])this.xq.push(M.J7.YU(this,null,e));this.Dq();for(const n of this.qk())n.ZU();for(const r of i[10]){const o=this.Xc.KU(r[1]);if(!o)throw new Error("missing nonworld object class");o.sz()||o.iz(r),this.wq.push(r),this.QU(o)}}tn(){for(const t of this.Gq)t.tn();M.Pr(this.Gq),this.fq.clear(),this.lq=null,this.sq=null,this.Xc=null}GO(){return this.Xc}jc(){return this.nn}Pz(){return this.K7}lF(){return this.Lg}Ek(){return this.FU}aF(){return this.Dz(),this.nF}Dz(){const t="low"===this.Xc.dL().p9();if(this.BU||this.Cq!==t||this.nF.zA()){const s=this.Ek().Lz();this.nF.JA(s.map(t=>t.Jx()),{$P:s.map(t=>t.lF()),YP:t,tA:!0}),this.BU=!1,this.Cq=t}}m6(){this.Ek().m6(),this.BU=!0}Oq(){let i=this.Gq[0].$J();for(let t=1,s=this.Gq.length;t<s;++t){const e=this.Gq[t];0===e.O5()&&0===e.k5()||(i=Math.min(i,e.$J()))}return i}Lq(){return.5*this.Xc.sJ()/this.Oq()}kq(){return.5*this.Xc.iJ()/this.Oq()}Vz(){return this.Nq()?-1/0:this.Lq()}Uz(){return this.Nq()?1/0:this.Xp()-this.Lq()}zz(){return this.Nq()?-1/0:this.kq()}Jz(){return this.Nq()?1/0:this.om()-this.kq()}Nk(t){const s=this.Vz(),i=this.Uz();this.mU!==(t=(t=i<t?i:t)<s?s:t)&&(this.mU=t,this.Bq(),this.Xc.uO())}Bk(){return this.mU}Wk(t){const s=this.zz(),i=this.Jz();this.gU!==(t=(t=i<t?i:t)<s?s:t)&&(this.gU=t,this.Bq(),this.Xc.uO())}jk(){return this.gU}Nq(){return this.hq}W9(){this.Nk(this.Bk()),this.Wk(this.jk());for(const t of this.Gq)t.jz()&&(t.Nk(t.Bk()),t.Wk(t.jk()))}n5(t,s){this.rq===t&&this.oq===s||(this.rq=t,this.oq=s,this.Wq()&&(this.jq(),this.Bq(),this.Xc.uO()))}Yz(){return this.u5()?.5:this.rq}Zz(){return this.u5()?.5:this.oq}v9(){const t=this.Yz(),s=this.Zz();return t<0||1<t||s<0||1<s}a5(){this.nq&&(this.nq=!1,this.jq(),this.Bq(),this.Xc.uO())}l5(){this.nq||(this.nq=!0,this.jq(),this.Bq(),this.Xc.uO())}u5(){return this.nq}Wq(){return!this.u5()}Vq(t){this.Sq!==(t=!!t)&&(this.Sq=t,this.Bq(),this.Xc.uO())}dJ(){return this.Sq}Hq(t,s,i,e,h,n,r,o,a){l(this.bq,t,s,i)&&l(this.vq,e,h,n)&&l(this.Mq,r,o,a)||(u.set(this.bq,t,s,i),u.set(this.vq,e,h,n),u.set(this.Mq,r,o,a),this.Uq())}Uq(){this.Bq(),this.Xc.uO()}lJ(){return this.bq}QJ(){return this.vq}t9(){return this.Mq}Ok(){return this.dU}Dk(t){this.dU!==t&&(this.dU=t,this.Bq(),this.W9(),this.Xc.uO())}Lk(t){t=M.ln(t),this.pU!==t&&(this.pU=t,this.Bq(),this.Xc.uO())}kk(){return this.pU}Xp(){return this.Lm}hm(t){!isFinite(t)||t<1||(this.Lm=t)}om(){return this.km}Yp(t){!isFinite(t)||t<1||(this.km=t)}zq(){return this.lq}Rz(){return this.xq}*qk(){for(const t of this.xq)yield*t.y5()}Jk(){return this.Gq}Jq(){return this.Gq.length}hO(t){return"number"==typeof t?this.rO(t):this.Tz(t.toString())}rO(t){return t=M.an(Math.floor(t),0,this.Gq.length-1),this.Gq[t]}Tz(t){return this.Tq.get(t.toLowerCase())||null}qq(t){return!!this.Tz(t)}$q(t){return this._q.get(t)||null}jq(){for(const t of this.Gq)t.s9()}Bq(){for(const t of this.Gq)t.Wz()}Zk(t,s,i){if(this.qq(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=2<=i?s:s.f5(),h=M.Qh(M.J7,this,e,{name:t,sid:Math.floor(1e15*Math.random()),N7:!0});this.Xq(h,s,i),this.GO().uO(),this.Cz()}Qk(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.Yq(t),this.Xq(t,s,i),this.GO().uO(),this.Cz())}s5(t){if(this.Yq(t)){const s=this.Xc.WF();s.xk(!0),t.tn(),s.xk(!1),this.GO().uO(),this.Cz()}}e5(){const t=new Set;for(const s of this.qk())s.Az()&&!s.Fz()&&t.add(s);if(0!==t.size){const i=this.Xc.WF();i.xk(!0);for(const e of t)this.Yq(e),e.tn();i.xk(!1),this.GO().uO(),this.Cz()}}Xq(s,i,e){if(2<=e)if(i){if(i===s||i.xJ(s))throw new Error(`cannot move layer '${s.jc()}' to sub-layer of itself`);i.wJ(s,2===e),s.gJ(i)}else 2===e?this.xq.push(s):this.xq.unshift(s),s.gJ(null);else{const t=i.f5();if(t){if(i.xJ(s))throw new Error(`cannot move layer '${s.jc()}' to sub-layer of itself`);t.SJ(s,i,0===e),s.gJ(t)}else{let t=this.xq.indexOf(i);if(-1===t)throw new Error("cannot find layer to insert by");0===e&&++t,this.xq.splice(t,0,s),s.gJ(null)}}}Yq(t){const s=t.f5();if(s)return s.bJ(t),!0;if(1<this.xq.length){const i=this.xq.indexOf(t);if(-1===i)throw new Error("cannot find layer to remove");return this.xq.splice(i,1),!0}return!1}Dq(){this.Gq=[...this.qk()],this.Tq.clear(),this._q.clear();for(let t=0,s=this.Gq.length;t<s;++t){const i=this.Gq[t];i._z(t),this.Tq.set(i.jc().toLowerCase(),i),this._q.set(i.Pz(),i)}}Zq(){let t=0;for(const s of this.xq){for(const i of s.y5())i.Iz(t);s.T5()&&t++}}Kq(){return this.xq.at(-1).xj()+1}async Cz(){this.Dq(),this.Zq(),this.Iq=this.Kq()}Qq(){return this.Iq}t$(){this.Iq=-1}PJ(t){const s=[];for(const i of this.xq){const e=i.xj();if(e===t)s.push(i);else if(t<e)break}return s}TJ(){return{scrollX:this.Bk(),scrollY:this.jk(),scale:this.Ok(),angle:this.kk(),vpX:this.Yz(),vpY:this.Zz()}}_J(t){this.Nk(t.scrollX),this.Wk(t.scrollY),this.Dk(t.scale),this.Lk(t.angle),this.n5(t.vpX,t.vpY)}s$(){let t=this.xq.filter(t=>t.MJ())[0];for(;t;){if(!t.j5())return x.$o(t.J5()),x.qo(1),x;if(t.jJ())return x.Wo(0,0,0,0),x;t=t.m5().filter(t=>t.MJ())[0]}return x.Wo(0,0,0,0),x}rz(){return this.Pq}i$(){return[...this.uq]}QU(t){if(t.xN())for(const s of t.h$().e$())this.uq.add(s);else this.uq.add(t)}n$(){return[...this.cq]}r$(t,s){if(t===this||!s)return Promise.resolve();t&&(M.Io(this.cq,t.cq),t.cq.clear());const i=[];for(const e of this.uq)this.cq.has(e)||(i.push(e.o$(s)),this.cq.add(e));return Promise.all(i)}async a$(t){if(t.xz())throw new Error("cannot load textures for family");const s=this.Xc.vb();if(s&&!s.fC()&&!this.cq.has(t)){this.cq.add(t);const i=t.o$(s);this.l$(i),await i,t.u$(),this.Xc.uO()}}l$(t){this.fq.add(t),t.then(()=>this.fq.delete(t)).catch(()=>this.fq.delete(t))}c$(){return Promise.all([...this.fq])}f$(t){if(t.xz()||0<t.Sk())throw new Error("cannot unload textures");const s=this.Xc.vb();s&&this.cq.has(t)&&(this.cq.delete(t),t.d$(s))}p$(t,s){if(t!==this&&s)for(const i of this.cq)i.lz()||t.uq.has(i)||(i.d$(),this.cq.delete(i))}m$(){this.cq.clear()}async g$(t){const s=this.Xc,i=this.sq,e=s.WF(),h=(this.aq&&(this.lq=e.y$(this.aq),this.lq.w$()),i.S$(this),this.Lm=this.iq,this.km=this.eq,this.mU=s._F()/2,this.gU=s.CF()/2,this.W9(),this.jq(),this.Bq(),this.Zq(),await this.Xc.dL().b$(this.Kq(),!0),this.v$(t),this.Xc.M$(!0),this.x$(),this.Pq||this.G$(),this.T$(this.pq),this.T$(this.mq),this._$(),i.I$(),s.Ik(),this.Xc.M$(!1),this.Xc.C$());if(await Promise.all(h),M.Pr(h),!s.E$()){for(const n of this.pq)n.R$();for(const r of this.mq)r.P$(this.gq,this.yq);for(const[o,a]of Object.entries(this.Eq)){const l=this.Xc.u8(parseInt(o,10));l&&!l.xz()&&l.oz()&&M.Pr(a)}for(const u of this.pq)u.A$();for(const c of this.mq)c.A$()}M.Pr(this.pq),M.Pr(this.mq),this.gq.clear(),this.yq.clear(),await Promise.all([...this.uq].map(t=>t.F$(this.Xc.vb()))),t&&(s.Pf().dispatchEvent(new M.Event("beforefirstlayoutstart")),await s.D$(new M.Event("beforeprojectstart"))),await this.O$(new M.Event("beforeanylayoutstart")),s.Pf().dispatchEvent(new M.Event("beforelayoutstart")),await this.D$(new M.Event("beforelayoutstart")),s.E$()||await s.KN(M.B$.N$.k$.L$,null,null),s.Pf().dispatchEvent(new M.Event("afterlayoutstart")),await this.D$(new M.Event("afterlayoutstart")),await this.O$(new M.Event("afteranylayoutstart")),t&&(s.Pf().dispatchEvent(new M.Event("afterfirstlayoutstart")),await s.D$(new M.Event("afterprojectstart"))),e.W$(i),await this.c$(),this.Pq=!1}v$(t){for(const s of this.Xc.Mz())if(!s.xz()&&s.OL())for(const i of s.gk()){const e=i.eO(),h=e.hO(),n=M.an(h.lF(),0,this.Gq.length-1),r=this.Gq[n];e.aO(r,!0),r.cz(i)}if(!t)for(const o of this.Gq)o.yz(!1)}x$(){for(const t of this.Gq)t.nz(this.pq),t.Sz()}G$(){let s=!1;for(const[t,i]of Object.entries(this.Eq)){const e=this.Xc.u8(parseInt(t,10));if(e&&!e.xz()&&e.oz())for(const h of i){let t=null;if(!e.OL()||(t=h.hasOwnProperty("instJson")?this.$q(h.instJson.w.l):this.$q(h.w.l))){const n=this.Xc.az(e,t,!1,0,0,!0);h.hasOwnProperty("instJson")?n.mv(h.instJson):n.mv(h),s=!0,this.mq.push(n),h.hasOwnProperty("instJson")&&(this.gq.set(n,h),this.yq.set(h.index,n))}}}for(const r of this.Gq)r.yz(!0),r.lO();s&&(this.Xc.Ik(),this.Xc.j$())}T$(s){for(const i of s)if(i.xN()){const e=i.eO(),t=i.V$();for(const h of i.cN().h$().H$())if(h!==i.cN()){const n=h.gk();if(n.length>t)i.U$(n[t]);else{let t;t=e?this.Xc.az(h,e.hO(),!0,e.Kb(),e.sv(),!0):this.Xc.az(h,null,!0,0,0,!0),this.Xc.Ik(),h.z$(),i.U$(t),s.push(t)}}}}_$(){for(const t of this.wq){const s=this.Xc.KU(t[1]);s.xN()||this.Xc.az(t,null,!0)}}J$(){let i=[],e=this.wq,h=0;for(let t=0,s=e.length;t<s;++t){const n=e[t],r=this.Xc.KU(n[1]);r.lz()?r.xN()&&r.h$().q$()||i.push(this.Xc.az(n,null,!0)):(e[h]=n,++h)}M.Rr(e,h),this.Xc.Ik(),this.T$(i)}vz(t,s,i,e,h,n,r){if(i)return i.vz(t,s,h,n,e,r);{const o=[];for(const a of this.Gq)o.push(a.vz(t,s,h,n,e,r));return o.flat()}}async $$(){const t=this.sq;this.Xc.E$()||(await this.O$(new M.Event("beforeanylayoutend")),await this.D$(new M.Event("beforelayoutend")),await this.Xc.KN(M.B$.N$.k$.X$,null,null),await this.D$(new M.Event("afterlayoutend")),await this.O$(new M.Event("afteranylayoutend"))),t.Y$(!0),this.Xc.WF().Z$(),this.Pq||this.K$();for(const s of this.Gq)s.bz();for(const i of this.Xc.Mz())if(!(i.lz()||i.OL()||i.hk().FL()||i.xz())){for(const e of i.gk())this.Xc.wN(e);this.Xc.Ik()}t.Y$(!1),t.OD()===this&&t.S$(null)}Q$(t,s){const i=t.cN().Pz().toString(),e=(this.Eq.hasOwnProperty(i)||(this.Eq[i]=[]),this.Eq[i]),h={index:s,instJson:t.pv(),sceneGraphJson:{children:[]}};e.push(h),this.Rq.set(t,h)}tX(t){const s=this.Rq.get(t);for(const i of t.sX()){const e=this.Rq.get(i);e&&s.sceneGraphJson.children.push({index:e.index,flags:M.eX.iX(i.eO())})}}K$(){this.Rq.clear();let t=0;for(const s of this.Gq){s.CJ();for(const i of s.oO()){const e=i.cN();!e.lz()&&e.oz()&&(this.Q$(i,t),t++)}}for(const h of this.Gq)for(const n of h.oO()){const r=n.cN();!r.lz()&&r.oz()&&this.tX(n)}this.Rq.clear()}hX(){this.Eq={},this.Pq=!0}ZR(){return this.fU}jJ(){const t=this.Xc,s=t.vb().tb();return"low"===t.dL().p9()||s&&t.d9()||this.FU.VJ()||s&&t.cJ()}nX(t){const s=this.Xc.dL();if(this.jJ()){t.eP(null),t.HR(0,0,0,0);const i={t2:this.Xc.EF(),U2:t.yw()||this.Xc.d9()||this.FU.VJ(),f9:!!t.yw()&&this.Xc.d9()};"low"===s.p9()&&(i.width=s.h9(),i.height=s.n9()),this.fU=this.Xc.m9(i)}else this.fU=null}rX(t){this.Xc.aX(t)&&(t.JR(!1),t.eP(null),t._w(),t.hP(this.fU))}lX(t){this.jJ()&&(t.JR(!1),this.uX(t,this.fU))}cX(t){t.eP(this.fU),t.Uu(this.s$()),this.Xc.cJ()&&t.zR();const s=this.PJ(0);this.g9(t,this.fU,s,!0),t.yw()&&t.StartMeasuringRenderPassTime(0,1),this.lX(t),this.fU=null}fX(t,s){let i=null;this.Xc.aX(t)&&(i=this.fU),t.eP(i),t.HR(0,0,0,0),this.Xc.cJ()&&t.zR();const e=this.PJ(s);this.g9(t,i,e,!0),this.rX(t),t.qS(),this.Xc.dL().dX(s)}g9(t,e,s,h){const n=s.filter(t=>t.MJ());for(let s=0,i=n.length;s<i;){const r=n[s];if(r.pJ()&&!r.HJ()){a.push(r);for(let t=s+1;t<i;++t){const o=n[t];if(!o.pJ()||o.HJ())break;a.push(n[t])}if(2<=a.length||1===a.length&&a[0].vJ()){this.pX(t,e,a),s+=a.length,M.Pr(a);continue}M.Pr(a)}r.Hv(t,e,h&&0===s),++s}}uX(t,s){const i=this.FU.Lz(),e=this.Xc;0===i.length?(t.eP(null),t._w(),t.hP(s),t.rP(s),e.kU(s)):(h.set(0,0,e.sJ(),e.iJ()),this.aF().i3(t,null,{e3:this,h3:3,devicePixelRatio:this.Xc.L9(),n3:this.Xc.N9()*this.Ok(),r3:this.kk(),E3:h,R3:null,qP:!0}))}pX(e,h,t){t[0].j5()||(x.$o(t[0].J5()),x.qo(1),e.Uu(x)),this.Xc.dL(),e.JR(!0);const n=G,r=T,o=_;for(const a of t)a.CJ(),a.aJ(n);const s=t[0],i=s.a9(e);s.c9(e);for(let s=0,i=n.length;s<i;){const l=n[s],u=l.eO(),c=u.hO();if(u.v5()&&u.T9(c.G9())){(!l._9()||0<u.I9())&&o.push(l);const f=l.eO().A4();r.push(l);let t=s+1;for(;t<i;++t){const d=n[t],p=d.eO();if(p.v5()&&p.T9(p.hO().G9())){if(p.A4()!==f)break;(d._9()?(0<p.I9()&&o.push(d),r):o).push(d)}}if(1!==r.length||r[0].C9()){this.mX(e,h,r);for(let t=0,s=o.length;t<s;++t){const m=o[t],g=m.eO(),y=g.hO();g.R9(!0),v(y,e),y.x9(m,g,e,h),g.R9(!1)}}else{v(c,e),c.x9(l,u,e,h);for(let t=0,s=o.length;t<s;++t){const w=o[t];if(w!==l){const S=w.eO(),b=S.hO();v(b,e),b.x9(w,S,e,h)}}}s=t,M.Pr(r),M.Pr(o)}else++s}i&&e.pP(i),M.Pr(n),I=null}mX(i,e,h){i.aP();for(let t=0,s=h.length;t<s;++t){const n=h[t],r=n.eO(),o=r.hO();r.P9(!0),v(o,i),o.A9(n,r,i)}i.lP();for(let t=0,s=h.length;t<s;++t){const a=h[t],l=a.eO(),u=l.hO();v(u,i),u.x9(a,l,i,e),l.P9(!1)}i.cP()}X9(){const t={sx:this.Bk(),sy:this.jk(),s:this.Ok(),a:this.kk(),w:this.Xp(),h:this.om(),ortho:this.u5(),vpX:this.Yz(),vpY:this.Zz(),fv:this.Pq,persist:this.Eq,fx:this.FU.pv(),layers:{},dynamicLayers:[]};for(const s of this.Gq)if(s.Az()){const i=s.f5();t.dynamicLayers.push({sid:s.Pz(),name:s.jc(),parentSid:i?i.Pz():null,siblingIndex:s.Ez(),data:s.X9()})}else t.layers[s.Pz().toString()]=s.X9();return t}Y9(t){this.mU=t.sx,this.gU=t.sy,this.dU=t.s,this.pU=t.a,this.Lm=t.w,this.km=t.h,this.nq=!!t.ortho,t.hasOwnProperty("vpX")&&(this.rq=t.vpX),t.hasOwnProperty("vpY")&&(this.oq=t.vpY),this.Pq=!!t.fv,this.Eq=t.persist,this.FU.mv(t.fx),this.BU=!0;for(const[s,i]of Object.entries(t.layers)){const e=parseInt(s,10),h=this.$q(e);h&&h.Y9(i)}if(t.hasOwnProperty("dynamicLayers")){this.e5(),this.Xc.Ik();const n=new Map,r=t.dynamicLayers;for(let t=r.length-1;0<=t;--t){const o=r[t],a=o.sid,l=o.name,u=o.parentSid,c=o.siblingIndex,f=o.data;if(this.Dq(),!this.qq(l)&&!this.$q(a)){let t,s;if(null===u)t=null,s=this.xq;else{if(!(t=this.$q(u)))continue;s=t.m5()}const d=M.Qh(M.J7,this,t,{name:l,sid:a,N7:!0});s.push(d);let i=n.get(s);i||(i=[],n.set(s,i)),i.push({T4:d,siblingIndex:c}),d.Y9(f)}}for(const[p,m]of n){m.sort((t,s)=>t.siblingIndex-s.siblingIndex);for(const g of m){let t=g.T4,s=g.siblingIndex,i=p.indexOf(t);p.splice(i,1),p.splice(s,0,t)}}}this.Cz(),this.jq(),this.Bq()}LD(){return this.Aq}LF(){return this.Fq}gX(t){t.layout=this.LD();const s=this.Xc,i=s.yX()&&!s.WF().Tk();i&&e.StartMeasuringScriptTime(),this.Fq.dispatchEvent(t),i&&e.AddScriptTime()}D$(t){return t.layout=this.LD(),this.Fq.Bf(t)}O$(t){return t.layout=this.LD(),this.Xc.D$(t)}wX(){this.SX(this.xq)}SX(t,s=0){const i=t.slice(0);i.reverse();for(const e of i)console.log("\t".repeat(s)+"- "+e.jc()),this.SX(e.m5(),s+1)}}}{const En=self.Ds;En.bX=class extends En.Zh{#c8;#vX=[];#MX=new Map;#xX=new Map;#GX=null;#TX=[];#_X=null;#IX=0;#CX=null;constructor(t){super(),this.#c8=t}tn(){this.#c8=null,this.#GX=null,this.#_X=null,this.#CX=null,En.Pr(this.#vX),this.#MX.clear(),this.#xX.clear(),En.Pr(this.#TX)}BM(t){const s=En.Qh(En.tq,this,this.#vX.length,t);this.#vX.push(s),this.#MX.set(s.jc().toLowerCase(),s),this.#xX.set(s.Pz(),s)}GO(){return this.#c8}EX(t){this.#_X=t}RX(){if(this.#_X)return this.#_X;if(this.#vX.length)return this.#vX[0];throw new Error("no first layout")}PX(t){return this.#MX.get(t.toLowerCase())||null}AX(t){return this.#xX.get(t)||null}FX(t){return t=En.an(Math.floor(t),0,this.#vX.length-1),this.#vX[t]}BD(t){return"number"==typeof t?this.FX(t):this.PX(t.toString())}jD(){return this.#vX}S$(t){this.#GX=t}OD(){return this.#GX}DX(t){if(this.#TX.includes(t))throw new Error("layout already running");this.#TX.push(t)}OX(t){const s=this.#TX.indexOf(t);if(-1===s)throw new Error("layout not running");this.#TX.splice(s,1)}*LX(){this.#GX&&(yield this.#GX),this.#TX.length&&(yield*this.#TX)}kX(t){return this.#GX===t||this.#TX.includes(t)}Y$(t){if(t)this.#IX++;else{if(this.#IX<=0)throw new Error("already unset");this.#IX--}}_k(){return 0<this.#IX}UD(t){this.#CX=t}I$(){this.#CX=null}HD(){return!!this.#CX}NX(){return this.#CX}BX(){const t=this.OD();t&&t.jq()}WX(){const t=this.OD();t&&t.Bq()}}}{const b=self.Ds,Rn=new RegExp("<(.+?)>","g");b.jX=class extends b.Zh{constructor(t){super(),this.Xc=t,this.VX=b.Qh(b.HX),this.UX=null,this.zX=[],this.JX=new Map,this.qX=new Map,this.$X=new Map,this.XX=[],this.YX=[],this.ZX=[],this.KX=!1,this.QX=!1,this.tY=!1,this.sY=()=>this.iY(),this.eY=()=>this.hY(),this.nY=()=>this.rY(),this.aY=()=>this.lY(),this.uY=t=>this.cY(t.a6),this.fY=t=>this.dY(),this.pY=t=>this.mY(),this.gY=t=>this.yY(),this.wY=[],this.SY=0}tn(){this.bY(),this.sY=null,this.eY=null,this.nY=null,this.aY=null,this.uY=null,this.pY=null;for(const t of this.zX)t.hW(),t.tn();b.Pr(this.zX),this.zX=null,this.VX.tn(),this.VX=null,b.Pr(this.XX),this.XX=null,b.Pr(this.YX),this.YX=null,b.Pr(this.ZX),this.ZX=null,this.JX.clear(),this.JX=null,this.qX.clear(),this.qX=null,this.$X.clear(),this.$X=null,b.Pr(this.wY),this.wY=null,this.Xc=null}vY(){const t=this.Xc.Pf();t.addEventListener("pretick",this.sY),t.addEventListener("tick2",this.eY),t.addEventListener("beforelayoutchange",this.nY),t.addEventListener("layoutchange",this.aY),t.addEventListener("instancedestroy",this.uY),t.addEventListener("beforeload",this.fY),t.addEventListener("afterload",this.pY),t.addEventListener("afterlayoutstart",this.gY)}bY(){const t=this.Xc.Pf();t.removeEventListener("pretick",this.sY),t.removeEventListener("tick2",this.eY),t.removeEventListener("beforelayoutchange",this.nY),t.removeEventListener("layoutchange",this.aY),t.removeEventListener("instancedestroy",this.uY),t.removeEventListener("beforeload",this.fY),t.removeEventListener("afterload",this.pY),t.removeEventListener("afterlayoutstart",this.gY)}BM(t){this.VX.tc(t);const s=b.xY.MY(t,this);this.tc(s),this.GY(s),this.$X.set(s.jc(),0)}TY(t){const s=this._Y(),i=t.IN(),e=s.Ks(i),h=b.xY.TY(i+":"+this.$X.get(i),e,this);return this.IY(i),this.tc(h),h}IY(t){this.$X.set(t,this.$X.get(t)+1)}CY(){for(const t of this.zX)if(!t.EY()){const s=t.IN();this.IY(s)}}RY(){for(const t of this.$X.keys())this.$X.set(t,0)}tc(t){this.zX.push(t),this.JX.set(t.jc().toLowerCase(),t)}u0(t){t.PY(),t.EY()||(b.kr(this.zX,t),b.kr(this.XX,t),b.kr(this.YX,t),b.kr(this.ZX,t),this.JX.delete(t.jc().toLowerCase()),this.AY(t),t.iW())||t.tn()}YN(t){this.Xc.YN(t,this.UX,null)}GO(){return this.Xc}_Y(){return this.VX}FY(t){this.UX=t}DY(){return this.UX}*OY(){for(const t of this.zX)yield t}*LY(){for(const t of this.YX)yield t}kY(t,s){this.qX.has(t)||this.qX.set(t,new Set),this.qX.get(t).add(s)}GY(t){for(const s of t.NY())this.kY(s,t)}AY(t){for(const[s,i]of this.qX.entries())i.has(t)&&(i.delete(t),0===i.size)&&this.qX.delete(s)}BY(t){if(this.qX.has(t))return this.qX.get(t)}WY(t,s){if(s)for(const i of this.zX){const e=s.every(t=>i.jY(t.a6,t.trackId));if(e&&i.jc().includes(t.jc()))return i}}VY(t){return this.JX.get(t.toLowerCase())||null}HY(t){for(const s of this.XX)if(s.jc()===t)return s;for(const i of this.YX)if(i.jc()===t)return i;return null}*UY(i){if(Rn.test(i)){Rn.lastIndex=0;let t,s=new Set;do{if(t=Rn.exec(i)){const e=t[1].split(",");for(const h of e)s.add(h)}}while(t);for(const n of s.values()){const r=this.VY(n);r&&(yield r)}s.clear()}else{const t=this.VY(i);t&&(yield t)}}*zY(t){for(const s of this.zX)s.rW(t)&&(yield s)}JY(t){this.XX.includes(t)||this.XX.push(t),this.qY()}$Y(t){b.kr(this.YX,t),this.XY()}YY(t){this.YX.includes(t)?(t.ZY(!0),t.KY(!1),t.QY(!1)):(t.ZY(!1),t.KY(!0),t.QY(!1),this.XX.includes(t)||this.XX.push(t)),this.qY()}tZ(t){t.ZY(!1),t.KY(!1),t.sZ(),b.kr(this.XX,t),this.XY()}iZ(t){t.ZY(!1),t.KY(!1),this.YX.includes(t)&&(t.QY(!0),this.ZX.push(t),b.kr(this.YX,t)),this.XX.includes(t)&&t.QY(!0)}eZ(t){t.ZY(!1),t.KY(!1),t.QY(!1),t.pW(1),b.kr(this.YX,t)}hZ(t){this.iZ(t),t.sZ()}iY(){if(!this.GO().E$()&&this.KX&&!this.QX){for(this.tY=!0;this.XX.length;){const t=this.XX.pop();(t.nZ()?(t.rZ(),this.ZX):(t.oZ(),this.YX)).push(t),0!==t.aZ()&&(this.SY=1)}const s=this.Xc.lZ(),i=this.Xc.uZ(),e=this.Xc.gD();for(let t=this.YX.length-1;0<=t;t--){const h=this.YX[t];h&&h.cZ(s,e,i)}this.tY=!1,0!==this.SY&&this.GO().uO()}}hY(){if(!this.GO().E$()&&this.KX&&!this.QX){let i;for(let t=0,s=this.ZX.length;t<s;t++){const e=this.ZX[t];i=i||new Set,e.PY(),this.fZ(e),i.add(e)}if(i){b.Wr(this.ZX,i);for(let t=this.SY=0,s=this.YX.length;t<s;t++)if(0!==this.YX[t].aZ()){this.SY=1;break}}this.XY()}}fZ(t){t.iW()||t.dZ()&&t.pZ()&&t.mZ()&&t.gZ()}qY(){this.KX||(this.KX=!0)}XY(){this.ZX.length||this.YX.length||this.XX.length||this.tY||(this.KX=!1)}rY(){for(this.QX=!0;this.XX.length;)this.tZ(this.XX.pop());const t=new Set;for(const s of this.YX){const i=s.rY();i&&(s.PY(),t.add(s))}b.Wr(this.YX,t),t.clear();for(const e of this.ZX){const h=e.rY();h&&(e.PY(),t.add(e))}b.Wr(this.ZX,t),this.XY();for(const n of this.zX)n.yZ()}lY(){this.QX=!1}cY(t){const s=t.cN(),i=this.BY(s);if(i)if(this.Xc.E$())this.wY.push(t);else for(const e of i)e.EY()||(e.iW()?this.u0(e):e.dZ()||(this.fZ(e),this.u0(e)))}dY(){for(const t of this.XX.map(t=>t))this.fZ(t),this.u0(t);for(const s of this.YX.map(t=>t))this.fZ(s),this.u0(s)}mY(){for(const t of this.wY)this.cY(t);b.Pr(this.wY);for(const s of this.zX)s.mY()}yY(){const t=this.Xc.ND(),s=t.OD();if(s)for(const i of this.zX){const e=i.wZ();e&&s.jc()===e&&this.YY(i)}}X9(){return{timelinesJson:this.SZ(),scheduledTimelinesJson:this.bZ(),playingTimelinesJson:this.vZ(),markedForRemovalTimelinesJson:this.MZ(),hasRuntimeListeners:this.KX,changingLayout:this.QX,isTickingTimelines:this.tY}}Y9(t){t&&(this.RY(),this.xZ(t.timelinesJson),this.GZ(t.scheduledTimelinesJson),this.TZ(t.playingTimelinesJson),this._Z(t.markedForRemovalTimelinesJson),this.KX=!t.hasRuntimeListeners,this.QX=!!t.changingLayout,this.tY=!!t.isTickingTimelines,this.CY(),this.qY(),this.XY())}SZ(){return this.zX.map(t=>t.X9())}xZ(t){for(const s of t){let t=this.VY(s.name);if(t)t.Y9(s);else{const i=this.IZ(s);if(!i)continue;const e=this.VY(i);(t=this.TY(e)).Y9(s)}t.CZ()||this.u0(t)}}IZ(t){const s=t.name,i=s.split(":");return i&&2===i.length?i[0]:null}bZ(){return this.EZ(this.XX)}GZ(t){this.RZ(t,this.XX)}vZ(){return this.EZ(this.YX)}TZ(t){this.RZ(t,this.YX)}MZ(){return this.EZ(this.ZX)}_Z(t){this.RZ(t,this.ZX)}PZ(t,s){if(s)for(const i of s)if(i===t.jc())return!0;return!1}EZ(t){return t.map(t=>t.jc())}RZ(t,s){const i=new Set;for(const e of s)this.PZ(e,t)||i.add(e);if(b.Wr(s,i),t)for(const h of t){const n=this.VY(h);if(n){const r=s.find((s=>t=>t.jc()===s)(h));r||s.push(n)}}}}}{const Pn=self.Ds,An=[0,0],Fn=[0,0],Dn=[0,0],On=[0,0,0,0,0],Ln=new Array(4),kn=[{x:0,y:0,t:0,It:0},{x:0,y:0,t:0,It:0},{x:0,y:0,t:0,It:0}],Nn={x:0,y:0,t:0,It:0};Pn.AZ=class{constructor(t,s){this.FZ=!1,this.DZ=t,this.OZ=[];let i=null;if(i=s?this.DZ.LZ(s):Pn.first(this.DZ.kZ())){const e=i.AW("offsetX"),h=i.AW("offsetY");if(e&&h){this.NZ=e,this.BZ=h;const n=e.WZ(),r=h.WZ();for(let t=1,s=Math.min(n.length,r.length);t<s;++t){const o=n[t],a=(o.jZ(),o.VZ()),l=r[t],u=(l.jZ(),l.VZ());a&&"cubic-bezier"===a.HZ()&&u&&"cubic-bezier"===u.HZ()?this.OZ.push(Pn.Qh(Pn.UZ,a,u,o,l,this.OZ.length)):(a&&"line"===a.HZ()&&u&&u.HZ(),this.OZ.push(Pn.Qh(Pn.zZ,o,l,this.OZ.length)))}this.FZ=!0}}}tn(){for(const t of this.OZ)t.tn();Pn.Pr(this.OZ),this.OZ=null,this.DZ=null,this.NZ=null,this.BZ=null}JZ(){return this.FZ}qZ(){return this.OZ}$Z(t){const s="relative"===this.NZ.XZ()?t.Kb():0,i="relative"===this.BZ.XZ()?t.sv():0;for(const e of this.OZ)e.$Z(s,i)}Ug(s,i,t){let e=NaN,h=this.OZ.length;for(let t=0;t<h;t++){const n=this.OZ[t];if("cubic-bezier"===n.Xx()){const r=n.Ug(s,i);(isNaN(e)||r[3]<e)&&(e=r[3],Dn[0]=r[2],Dn[1]=n.lF())}}return Dn}YZ(s,i,t){const e=t.tRange;Pn.le(e[0])||(e[0]=0),Pn.le(e[1])||(e[1]=1);let h=NaN,n=this.OZ.length;for(let t=0;t<n;t++){const r=this.OZ[t];if("cubic-bezier"===r.Xx()){const o=r.ZZ(s,i,e);(isNaN(h)||o[3]<h)&&(h=o[3],Dn[0]=o[2],Dn[1]=r.lF())}}return Dn}KZ(t,s){return this.OZ[s].KZ(t)}QZ(t,s){return this.OZ[s].QZ(t)}},Pn.UZ=class{constructor(t,s,i,e,h){this.Lg=h;const n=t.tK("cubic-bezier"),r=i.tK("cubic-bezier"),o=s.tK("cubic-bezier"),a=e.tK("cubic-bezier");this.sK=t.iK(),this.eK=s.iK(),this.hK=t.iK()+n.nK(),this.rK=s.iK()+o.nK(),this.oK=i.iK()+r.aK(),this.lK=e.iK()+a.aK(),this.uK=i.iK(),this.cK=e.iK(),this.fK=0,this.dK=0,this.pK=0,this.mK=0,this.gK=0,this.yK=0,this.wK=0,this.SK=0,this.bK=0,this.vK=0,this.MK=0,this.xK=0,this.GK=0,this.TK=0,this._K=0,this.IK=0,this.CK=0,this.EK=0,this.RK=0,this.PK=0,this.AK=NaN,this.FZ=!1,this.FK=100,this.DK=new Array(this.FK+1),this.DK[0]=0,this.LK=0,this.kK=[],this.NK=[];for(let t=0;t<100;t++)this.NK.push({x:0,y:0,t:0,It:0});this.BK()}tn(){Pn.Pr(this.DK),this.DK=null,Pn.Pr(this.kK),this.kK=null,Pn.Pr(this.NK),this.NK=null}Xx(){return"cubic-bezier"}lF(){return this.Lg}WK(){return Math.floor(this.LK/25)}jK(){return 1/this.WK()}$Z(t,s){this.VK=t,this.HK=s,this.DK=new Array(this.FK+1),this.DK[0]=0,this.BK(),this.fK=this.sK+this.VK,this.dK=this.eK+this.HK,this.pK=this.hK+this.VK,this.mK=this.rK+this.HK,this.gK=this.oK+this.VK,this.yK=this.lK+this.HK,this.wK=this.uK+this.VK,this.SK=this.cK+this.HK,this.bK=3*(this.pK-this.fK),this.vK=3*(this.mK-this.dK),this.MK=3*(this.gK-this.pK),this.xK=3*(this.yK-this.mK),this.GK=3*(this.wK-this.gK),this.TK=3*(this.SK-this.yK),this._K=3*(this.pK-this.fK),this.IK=3*(this.fK+this.gK-2*this.pK),this.CK=this.wK-this.fK+3*(this.pK-this.gK),this.EK=3*(this.mK-this.dK),this.RK=3*(this.dK+this.yK-2*this.mK),this.PK=this.SK-this.dK+3*(this.mK-this.yK)}Map(t){if(!this.FZ)return NaN;const s=this.UK(t);return Fn[0]=this.zK(s),Fn[1]=this.JK(s),Fn}Ug(t,s){const i=this.qK(100),e=this.$K(t,s,i),h=this.XK(t,s,i,e);return On[0]=h.x,On[1]=h.y,On[2]=h.t,On[3]=h.It,On}ZZ(t,s,i){const e=this.qK(100),h=this.YK(t,s,e,i),n=this.XK(t,s,e,h);return On[0]=n.x,On[1]=n.y,On[2]=n.t,On[3]=n.It,On}KZ(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,n=i*this.bK+e*this.MK+h*this.GK,r=i*this.vK+e*this.xK+h*this.TK,o=Math.hypot(n,r);return An[0]=n/o,An[1]=r/o,An}QZ(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,n=i*this.bK+e*this.MK+h*this.GK,r=i*this.vK+e*this.xK+h*this.TK;return Math.atan2(r,n)}UK(h){if(this.FZ){let t=h*this.DK[this.FK],s=0,i=this.FK,e=0;for(;s<i;)e=s+((i-s)/2|0),this.DK[e]<t?s=e+1:i=e;this.DK[e]>t&&e--;const n=this.DK[e];return n===t?e/this.FK:(e+(t-n)/(this.DK[e+1]-n))/this.FK}}zK(t){return this.FZ?self.ec.vc("cubicbezier")(t,this.sK+this.VK,this.hK+this.VK,this.oK+this.VK,this.uK+this.VK):NaN}JK(t){return this.FZ?self.ec.vc("cubicbezier")(t,this.eK+this.HK,this.rK+this.HK,this.lK+this.HK,this.cK+this.HK):NaN}qK(s){if(!(this.kK.length>=(s=s||100))){this.kK=new Array(s),s++;for(let t=0;t<s-1;t++){const i=t/(s-1),e=i**2,h=i**3,n=this._K*i,r=this.IK*e,o=this.CK*h,a=this.EK*i,l=this.RK*e,u=this.PK*h,c=this.fK+n+r+o,f=this.dK+a+l+u;this.NK[t].x=c,this.NK[t].y=f,this.NK[t].t=i,this.NK[t].It=0,this.kK[t]=this.NK[t]}}return this.kK}$K(s,i,e,t=0,h=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.AK))for(let t=0;t<100;t++){const r=e[t],o=r.x-s,a=r.y-i;r.It=o*o+a*a,r.It<h&&(h=r.It,n=t)}else{for(let t=this.AK;t<this.AK+5&&!(t>=e.length);t++){const l=e[t],u=l.x-s,c=l.y-i;l.It=u*u+c*c,l.It<h&&(h=l.It,n=t)}for(let t=this.AK;t>this.AK-5&&!(t<0);t--){const f=e[t],d=f.x-s,p=f.y-i;f.It=d*d+p*p,f.It<h&&(h=f.It,n=t)}}return this.AK=n}YK(s,i,e,h,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.AK))for(let t=0;t<100;t++){const o=e[t],a=o.x-s,l=o.y-i;o.It=a*a+l*l,o.t>=h[0]&&o.t<=h[1]&&o.It<n&&(n=o.It,r=t)}else{for(let t=this.AK;t<this.AK+5&&!(t>=e.length);t++){const u=e[t],c=u.x-s,f=u.y-i;u.It=c*c+f*f,u.t>=h[0]&&u.t<=h[1]&&u.It<n&&(n=u.It,r=t)}for(let t=this.AK;t>this.AK-5&&!(t<0);t--){const d=e[t],p=d.x-s,m=d.y-i;d.It=p*p+m*m,d.t>=h[0]&&d.t<=h[1]&&d.It<n&&(n=d.It,r=t)}}return this.AK=r}XK(r,o,a,l){let u=a[l],t=1,c=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,s=0===l?0:l-1,i=l===t-1?t-1:l+1,e=a[s].t,h=a[i].t,n=(h-e)/4;if(n<.001)break;Ln[0]=a[s];for(let t=1;t<=2;t++){const f=e+t*n,d=f**2,p=f**3,m=this._K*f,g=this.IK*d,y=this.CK*p,w=this.EK*f,S=this.RK*d,b=this.PK*p,v=this.fK+m+g+y,M=this.dK+w+S+b,x=v-r,G=M-o,T=x*x+G*G;if(T<c){c=T,l=t,Nn.x=v,Nn.y=M,Nn.t=f,Nn.It=T,u=Nn;break t}const _=kn[t-1];_.x=v,_.y=M,_.t=f,_.It=T,Ln[t]=_}Ln[3]=a[i],a=Ln}while(t++<20);return u}BK(){this.FZ=!0;let s=this.zK(0),i=this.JK(0),e=0;for(let t=1;t<=this.FK;t++){const h=this.zK(.01*t),n=this.JK(.01*t),r=s-h,o=i-n;e+=Math.hypot(r,o),this.DK[t]=e,s=h,i=n}this.LK=e}},Pn.zZ=class{constructor(t,s,i){this.Lg=i,this.ZK=t.iK(),this.KK=s.iK(),this.VK=0,this.HK=0}tn(){}Xx(){return"line"}lF(){return this.Lg}$Z(t,s){this.VK=t,this.HK=s}Kb(){return this.ZK+this.VK}sv(){return this.KK+this.HK}}}{const v=self.Ds;v.xY=class extends v.Zh{constructor(t,s,i){super(),this.Xc=i.GO(),this.QK=i,this.tQ=s,this.nn=t,this.sQ=[],this.iQ=0,this.eQ=null,this.hQ=0,this.nQ(),this.rQ=null,this.oQ=null,this.aQ=0,this.lQ=0,this.uQ=1,this.cQ=0,this.fQ=1,this.dQ=!1,this.pQ=!1,this.mQ=!1,this.gQ=!0,this.yQ=!1,this.wQ=!1,this.SQ=-1,this.bQ=!1,this.vQ=!1,this.MQ=!1,this.xQ=!1,this.GQ=NaN,this.TQ=[""],this._Q="",this.IQ=!1,this.SY=0,this.CQ=0,this.EQ=null}static MY(t,s){const i=s._Y(),e=i.RQ(),h=i.Ks(t[e]),n=v.Qh(v.xY,t[e],h,s);return n.PQ(!0),n}static TY(t,s,i){return v.Qh(v.xY,t,s,i)}tn(){if(!this.iW()){const t=this.Xc.Pf();this.QK.tZ(this),this.QK.hZ(this);for(const s of this.sQ)s.tn();v.Pr(this.sQ),this.sQ=null,this.Xc=null,this.QK=null,this.tQ=null,this.yQ=!0,this.rQ=null,this.oQ=null,this.AQ(t)}}AQ(t){const s=v.Qh(v.Event,"timelinestatereleased");s.FQ=this,t.dispatchEvent(s)}Xx(){return 0}nQ(){for(const t of this.tQ.OQ().DQ())this.iQ=this.sQ.push(v.LQ.BM(this,t))}kQ(){return this.QK}GO(){return this.Xc}kZ(){return this.sQ}NQ(e,h,n,r){if(this.CQ){let i;for(let s=0;s<this.sQ.length;s++){let t=this.sQ[s];if(e===t.TW()){const o=t.AW(n);o&&h.constructor===o.BQ().constructor&&o.XZ()===r.XZ()&&(i=i||[]).push(o)}}return i}}CZ(){return!!this.sQ.length}LZ(t){for(const s of this.sQ)if(v.fh(s.RW(),t))return s;return null}WQ(t){for(const s of this.sQ)if(!s.jQ()&&v.fh(s.jc(),t))return s;return null}v8(t){this.nn=t}jc(){return this.nn}VQ(){return this.tQ}IN(){return this.tQ.jc()}lW(){return this.tQ.lW()}aW(t){this.tQ.aW(t)}HQ(){return this.tQ.HQ()}UQ(t){this.tQ.UQ(t)}zQ(){return this.tQ.zQ()}JQ(t){this.tQ.JQ(t)}XZ(){return this.tQ.XZ()}qQ(t){this.tQ.XZ(t)}GW(t){for(const s of this.kZ())s.GW(t)}cW(){return this.tQ.cW()}uW(t){return this.tQ.uW(t)}dW(){return this.tQ.dW()}fW(t){return this.tQ.fW(t)}M6(){return this.tQ.M6()}$Q(t){return this.tQ.$Q(t)}pW(t){return this.uQ=t}mW(){return this.uQ}wZ(){return this.tQ.wZ()}XQ(){return this.tQ.XQ()}YQ(){return this.tQ.YQ()}ZQ(){return this.cQ}KQ(){return!this.IsPlaying()||0<this.uQ}yW(){return this.rQ||(this.rQ=new Promise(t=>{this.oQ=t})),this.rQ}sZ(){this.rQ&&(this.oQ(),this.rQ=null,this.oQ=null)}QQ(t){this.TQ=v.xY.ttt(t),this.IQ=!0}gW(){return this.TQ}stt(){return this.IQ&&(this._Q=this.TQ.join(" ")),this.IQ=!1,this._Q}rW(t){if(!this.TQ)return!1;if(!this.TQ.length)return!1;const s=v.xY.ttt(t);return!!s&&!!s.length&&s.every(v.xY.itt,this)}ett(){v.B$.Timeline&&this.constructor===v.xY&&(v.B$.Timeline.k$.PushTriggerTimeline(this),this.QK.YN(v.B$.Timeline.k$.OnTimelineStarted),this.QK.YN(v.B$.Timeline.k$.OnTimelineStartedByName),this.QK.YN(v.B$.Timeline.k$.OnTimelineStartedByTags),this.QK.YN(v.B$.Timeline.k$.OnAnyTimelineStarted),v.B$.Timeline.k$.PopTriggerTimeline())}htt(){this.SQ=this.Xc.ntt()}gZ(){this.MQ||(this.MQ=!0,v.B$.Timeline&&this.constructor===v.xY&&(v.B$.Timeline.k$.PushTriggerTimeline(this),this.QK.YN(v.B$.Timeline.k$.OnTimelineFinished),this.QK.YN(v.B$.Timeline.k$.OnTimelineFinishedByName),this.QK.YN(v.B$.Timeline.k$.OnTimelineFinishedByTags),this.QK.YN(v.B$.Timeline.k$.OnAnyTimelineFinished),v.B$.Timeline.k$.PopTriggerTimeline()))}ZY(t){this.dQ=t}ott(){return this.SQ===this.Xc.ntt()}IsPlaying(t=!1){return!!this.ott()||!(!this.att()||t)||this.dQ}ltt(){return this.IsPlaying(!0)}SW(){return this.utt()}utt(){return!(this.iW()||this.att()||this.ltt()||this.pZ())}KY(t){this.pQ=t}att(){return this.pQ}ctt(t){this.gQ=t;const s=this.VP();(s<=0||s>=this.lW())&&(this.gQ=!0)}pZ(){return this.gQ}iW(){return this.yQ}QY(t){this.wQ=t}nZ(){return this.wQ}ftt(t){this.bQ=t}dtt(){return this.bQ}PQ(t){this.vQ=!!t}EY(){return this.vQ}mZ(){return this.mQ}VP(){return this.aQ}oW(t){const s=this.VP();this.ptt(t),this.ctt(!1),this.pZ()||this.ftt(!0),!this.ltt()&&!this.att()&&this.mQ||(this.ltt()||this.att()||this.mQ?this.ltt()?this.hW():this.att()&&(this.QK.tZ(this),this.mtt()):this.mtt()),this.gtt(),this.ytt(this.VP(),!1,!0,!0,s),this.wtt(),this.SY&&this.GO().uO(),this.Stt()}ptt(t){(t=v.le(t)?t:this.lW())<0?this.aQ=0:t>=this.lW()?this.aQ=this.lW():this.aQ=t}btt(t){(t=v.le(t)?t:this.lW())<0?this.aQ=0:t>=this.lW()?this.aQ=this.lW():this.aQ=t;for(const s of this.sQ)s.vtt()}Stt(){v.B$.Timeline&&this.constructor===v.xY&&(v.B$.Timeline.k$.PushTriggerTimeline(this),this.QK.YN(v.B$.Timeline.k$.OnTimeSet),this.QK.YN(v.B$.Timeline.k$.OnTimeSetByName),this.QK.YN(v.B$.Timeline.k$.OnTimeSetByTags),v.B$.Timeline.k$.PopTriggerTimeline())}Mtt(){if(!this.cW())if(this.dW()&&1===this.cQ){if(this.KQ()){if(this.VP()>=this.lW())return!1}else if(this.VP()<=0)return!1}else if(!this.cW()&&!this.dW())if(this.KQ()){if(this.VP()>=this.lW())return!1}else if(this.VP()<=0)return!1;return!0}nW(){this.iW()||this.Mtt()&&this.Play(!0)}Play(t=!1){return!this.iW()&&!this.att()&&(this.ltt()&&this.ott()?this.xtt():!this.ltt()&&!!(this.pZ()||t||this.dtt())&&this.Gtt())}xtt(){return this.ftt(!1),this.QK.$Y(this),this.QK.YY(this),this.yW(),!0}Gtt(){return this.ftt(!1),this.QK.YY(this),this.yW(),!0}hW(t=!1){this.iW()||(this.ctt(t),this.QK.iZ(this),this.pZ()&&this.sZ())}Kf(t=!0,s=!1){if(!this.iW()){if(!this.ltt()&&this.att())return this.QK.tZ(this);if(!this.pZ()){this.hW(!0),this.KQ()?this.ptt(0):this.ptt(this.lW());const i=this.VP();this.gtt(),s?this.Ttt(i):this.ytt(i,!1,!1,!0),t&&this.Stt(),this.wtt(),this.SY&&t&&this.GO().uO()}}}_tt(){this.Kf(!1,!0)}Ttt(t){this.ytt(t,!1,!1,!0,NaN,!1,!0)}rY(){if(!this.iW()){if(!this.GO().E$()&&this.Itt())return!1;this.QK.eZ(this),this.GO().E$()||this._tt()}return!0}mtt(){this.oZ(!0)}rZ(){this.oZ(!1,!0),this.ZY(!1),this.KY(!1)}oZ(t=!1,s=!1){if(!this.nZ()||s){if(t){this.MQ=!1,this.mQ=!0,this.xQ=!0,this.gtt();for(const i of this.sQ)i.oZ()}else if(this.ZY(!0),this.KY(!1),this.ett(),this.pZ()){this.SQ=-1,0!==this.cQ&&(this.uQ=Math.abs(this.uQ)),this.cQ=0,this.fQ=1,this.gQ=!1,this.MQ=!1,this.mQ=!0,this.xQ=!0,this.KQ()?this.ptt(0):this.ptt(this.lW()),this.gtt();for(const e of this.sQ)e.oZ()}else{this.xQ=!0,this.MQ=!1,this.gtt();for(const h of this.sQ)h.Ctt()}this.wtt()}}aZ(){return this.SY}gtt(){this.CQ=0;for(const t of this.sQ)t.DC()&&(this.CQ=1)}wtt(){this.SY=0;for(const t of this.sQ)t.Ett(),0===this.SY&&1===t.aZ()&&(this.SY=1),this.eQ||1!==t.Rtt()||(this.eQ||(this.eQ=[]),this.hQ=this.eQ.push(t))}cZ(t,s,i){if(this.YQ()){if(0===t&&0===this.GQ)return;this.GQ=t,t=i}else{if(0===i&&0===this.GQ)return;t=this.GQ=i,s=1}const e=this.aQ+this.lQ,h=t*s*this.uQ,n=e+h,r=this.tQ.Ptt;n<0?(this.aQ=0,this.lQ=-n):r<=n?(this.aQ=r,this.lQ=this.aQ-n):(this.aQ=n,this.lQ=0);let o=!1,a=!1,l=this.cW(),u=this.dW();l||u?l&&!u?0<this.uQ?this.aQ>=r&&(this.btt(0),a=!0):this.aQ<=0&&(this.btt(r),a=!0):!l&&u?0<this.uQ?this.aQ>=r&&(this.ptt(r),this.pW(-1*this.mW()),a=!0,1===this.cQ?this.fQ<this.M6()?(this.fQ++,this.cQ=0):o=!0:0===this.cQ&&(this.cQ=1)):this.aQ<=0&&(this.ptt(0),this.pW(-1*this.mW()),a=!0,1===this.cQ?this.fQ<this.M6()?(this.fQ++,this.cQ=0):o=!0:0===this.cQ&&(this.cQ=1)):l&&u&&(0<this.uQ?this.aQ>=r&&(this.ptt(r),this.pW(-1*this.mW()),a=!0,this.cQ++,v.wrap(this.cQ,0,2)):this.aQ<=0&&(this.ptt(0),this.pW(-1*this.mW()),a=!0,this.cQ++,v.wrap(this.cQ,0,2))):0<this.uQ?this.aQ>=r&&(this.fQ<this.M6()?(this.fQ++,this.btt(0),a=!0):(this.ptt(r),o=!0)):this.aQ<=0&&(this.fQ<this.M6()?(this.fQ++,this.btt(r),a=!0):(this.ptt(0),o=!0));let c,f=this.iQ;if(o){for(c=0;c<f;c++)this.sQ[c].Att();this.hW(!0),this.htt()}else{const d=this.hQ;for(c=0;c<d;c++)this.eQ[c].Ftt();if(1===this.CQ)for(c=0;c<f;c++){const p=this.sQ[c],m=p.Dtt(),g=this.aQ-m,y=e-m;g<0&&0<y?(this.aQ=m<0?0:r<=m?r:m,p.Pc(m,!0,!1,a,this.xQ,!1)):p.Pc(this.aQ,!0,!1,a,this.xQ,!1)}else for(c=0;c<f;c++)this.sQ[c].Pc(this.aQ,!0,!1,a,this.xQ,!1);for(c=0;c<d;c++)this.eQ[c].Ott();this.xQ&&(this.xQ=!1)}}ytt(s,i=!1,e=!1,h=!1,n=NaN,t=!1,r=!1){for(const o of this.sQ)o.Ftt();for(const a of this.sQ){let t=s;if("number"==typeof n&&!isNaN(n)){const l=this.VP(),u=l-a.Dtt(),c=n-a.Dtt();u<0&&0<c&&(t=a.Dtt(),this.ptt(t))}a.Pc(t,i,e,h,this.xQ,r)}for(const f of this.sQ)f.Ott();this.xQ&&t&&(this.xQ=!1)}Ltt(){const t=this.tQ.OQ().ktt(),s=v.LQ.BM(this,t);return this.iQ=this.sQ.push(s),s}PY(){if(!this.iW())for(const t of this.sQ)t.Ntt()}yZ(){for(const t of this.sQ)t.yZ()}Btt(){for(const t of this.sQ)t.Wtt()}jtt(t,s,i){if(s){if("number"==typeof i&&0<=i){const e=this.sQ[i];return e?(e.Vtt(s),void this.QK.kY(s.cN(),this)):void 0}for(const h of this.sQ)if(h.jQ())if(t){if(h.RW()===t){h.Vtt(s),this.QK.kY(s.cN(),this);break}}else if(!h.Htt()){h.Vtt(s),this.QK.kY(s.cN(),this);break}}}jY(t,s){for(const i of this.sQ)if(i.jQ())if(s){if(s===i.RW()&&t===i.TW())return!0}else if(t===i.TW())return!0;return!1}dZ(){return this.sQ.some(t=>!t.jQ()||t.Utt())}Itt(){return this.sQ.some(t=>{if(t.jQ()){if(!t.Utt())return!1;const s=t.cN();return!!s&&s.lz()}return!1})}AW(t){for(const s of this.kZ())for(const i of s.ztt())if(i.Jtt()===t)return i}qtt(t){for(const s of this.sQ)if(t===s.TW())return s;return null}$tt(t){let s=t?t.split(" "):[],i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const e of this.kZ())for(const h of e.Xtt()){const n=s.every(t=>h.Ytt(t));if(n)return h}}NY(){const t=[];for(const s of this.kZ())t.push(s.cN());return t.filter(t=>t)}mY(){for(const t of this.kZ())t.mY()}X9(){return{tracksJson:this.Ztt(),name:this.nn,playheadTime:this.VP(),playbackRate:this.uQ,pingPongState:this.cQ,currentRepeatCount:this.fQ,isPlaying:this.dQ,isScheduled:this.pQ,initialStateSet:this.mQ,finishedTriggers:this.MQ,complete:this.gQ,released:this.yQ,markedForRemoval:this.wQ,completedTick:this.SQ,implicitPause:this.bQ,isTemplate:this.vQ,tags:this.TQ.join(" "),stringTags:this._Q,tagsChanged:this.IQ,firstTick:this.xQ}}Y9(t){t&&(this.Ktt(t.tracksJson),this.nn=t.name,this.aQ=t.playheadTime,this.uQ=t.playbackRate,this.cQ=t.pingPongState,this.fQ=t.currentRepeatCount,this.dQ=!!t.isPlaying,this.pQ=!!t.isScheduled,this.mQ=!!t.initialStateSet,this.MQ=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.gQ=!!t.complete,this.yQ=!!t.released,this.wQ=!!t.markedForRemoval,this.SQ=t.completedTick,this.bQ=!!t.implicitPause,this.vQ=!!t.isTemplate,this.TQ=t.tags.split(" "),this._Q=t.stringTags,this.IQ=!!t.tagsChanged,this.xQ=!!t.firstTick)}Ztt(){return this.sQ.map(t=>t.X9())}Ktt(t){this.Btt(),t.forEach((t,s)=>{const i=this.sQ[s];i.Y9(t)}),this.sQ.filter(t=>t.Utt())}static itt(t){const s=this.gW();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static ttt(t){if(v.Oe(t))return t.slice(0);if(v.Se(t))return t.split(" ");throw new Error("invalid tags")}Qtt(){return this.EQ||(this.EQ=v.Qh(self.vW,this)),this.EQ}}}{const Bn=self.Ds;Bn.LQ=class extends Bn.Zh{constructor(t,s){super(),this.DZ=t,this.tst=s,this.sst=s.OQ(),this.ist=NaN,this.est=NaN,this.hst=null,this.nst=null,this.rst=!1,this.CC=0<s.Dtt(),this.ost=!1,this.ast=!1,this.lst=NaN,this.ust=null,this.cst=this.tst.dst().fst(),this.pst=[],this.mst(),this.gst=0,this.SY=0,this.yst=0}static BM(t,s){return Bn.Qh(Bn.LQ,t,s)}tn(){this.cst=null;for(const t of this.pst)t.tn();Bn.Pr(this.pst),this.pst=null,this.DZ=null,this.hst=null,this.nst=null,this.tst=null,this.ust=null}mst(){for(const t of this.tst.Sst().wst())this.pst.push(Bn.bst.BM(this,t))}Ntt(){for(const t of this.pst)t.Ntt()}yZ(){for(const t of this.pst)t.yZ();this.hst=null,this.nst=null}vst(){return this.DZ}GO(){return this.DZ.GO()}Xtt(){return this.cst||(this.cst=this.tst.dst().fst()),this.cst}ztt(){return this.pst}AW(s){for(let t=0;t<this.pst.length;t++){const i=this.pst[t];if(i.Jtt()===s)return i}}Mst(){this.hst||this.TW()}xst(){return!!this.hst&&!this.hst.Rj()}Utt(){if(!this.jQ())return!1;const t=this.Gst(),s=this.GO().KD(t);return!!s&&!s.Rj()}cN(){if(this.jQ()){const t=this.Tst();if(-1!==t)return this.GO().KU(t)}}_st(){return this.DZ.kZ().indexOf(this)}Wtt(){this.hst=null,this.ist=NaN,this.nst=null,this.est=NaN,this.rst=!0}Htt(){return!!this.hst}TW(){if(!this.rst){if(!this.hst||!this.xst()){const t=this.Gst();this.hst=this.GO().KD(t)}return this.hst}}Vtt(t){if(this.rst=!1,this.hst!==t){this.yZ(),this.hst=t,this.est=t.cN().lF(),this.ist=t.TN(),this.nst=t.eO();for(const s of this.Ist()){const i=s.Cst,e=s.Est,h=i.Rst();switch(h){case"instance-variable":{e.Pst();const n=t.cN(),r=n.Ast(s.name),o=n.Fst(r),a=n.Dst(r);o===s.name&&a===s.type&&e.Ost(r);break}case"behavior":{const l=s.n6,u=this.cN(),c=t.cN(),f=e.o6(c);if(l&&f){const d=l.jc();u.Lst(d),c.Lst(d),e.Pst(),e.kst(f.Pz())}break}}}}}*Ist(){for(const t of this.pst){const s=t.BQ(),i=this.cN(),e={Cst:t,Est:s};switch(t.Rst()){case"world-instance":e.property=t.Jtt();break;case"instance-variable":{const h=s.Pst();e.name=i.Fst(h),e.type=i.Dst(h);break}case"effect":{const n=i.Ek(),r=s.Nst(n);e.Bst=r;break}case"behavior":{const o=s.o6(i);e.n6=o;break}case"plugin":e.ek=i.hk()}yield e}}eO(){if(!this.nst||!this.xst()){const t=this.TW();t&&(this.nst=t.eO())}return this.nst}Wst(){return this.tst}Gst(){return isNaN(this.ist)?this.tst.Gst():this.ist}jst(t){this.tst.jst(t)}zQ(){return this.tst.zQ()}JQ(t){this.tst.JQ(t)}XZ(){return this.tst.XZ()}RW(){return this.tst.RW()}Dtt(){return this.tst.Dtt()}Vst(){return this.tst.Vst()}Hst(t){this.tst.Hst(t)}qQ(t){this.tst.qQ(t)}GW(t){for(const s of this.Xtt())s.GW(t);for(const i of this.ztt())i.GW(t)}Ust(){return this.tst.Ust()}zst(t){this.tst.zst(t)}Tst(){return isNaN(this.est)?this.tst.Tst():this.est}Jst(t){this.tst.Jst(t)}qst(t){this.tst.qst(t)}$st(){const t=this.TW();if(t){const s=t.ZB();if(s.Xst())return t.ZB().$st()}return this.tst.$st()}Yst(t){this.tst.Yst(t)}Zst(){const t=this.TW();if(t){const s=t.ZB();if(s.Xst())return t.ZB().Zst()}return this.tst.Zst()}Xx(){return this.tst.Xx()}jc(){return this.tst.jc()}jQ(){return 0===this.Xx()}Kst(){return 1===this.Xx()}Qst(){return 2===this.Xx()}tit(){return this.gst}aZ(){return this.SY}Rtt(){return this.yst}DC(){return this.CC}vtt(){for(const t of this.pst)t.vtt()}oZ(){if(this.Mst(),this.xst()||!this.jQ()){const t=this.vst(),s=t.KQ(),i=s?0:this.Vst();for(const h of this.pst)h.oZ(i),0===this.gst&&1===h.tit()&&(this.gst=1),0===this.SY&&1===h.aZ()&&(this.SY=1);this.yst=0;const e=this.pst.some(t=>t.Rtt());e&&(this.yst=1),this.ust=this.sit(i),this.ost=!1,this.ast=!1,this.Pc(i),this.iit(this.sit(i))}}Ctt(){if(this.Mst(),this.xst()||!this.jQ()){this.DZ.KQ();const t=this.DZ.VP()-this.Dtt();this.ust=this.sit(t);for(const s of this.pst)s.Ctt(t)}}Att(){if(!this.vst().pZ()&&(this.Mst(),this.xst()||!this.jQ())&&!this.CC){const t=this.DZ.VP(),s=this.Dtt()+this.Vst();s<=t?this.Pc(this.Vst(),!0,!1,!0,!1,!1,!0):t<=0&&this.Pc(0,!0,!1,!0,!1,!1,!0)}}Ett(){for(let t=0,s=this.pst.length;t<s;t++){const i=this.pst[t];i.Ett(),0===this.gst&&1===i.tit()&&(this.gst=1),0===this.SY&&1===i.aZ()&&(this.SY=1)}}Ftt(){const s=this.pst.length;for(let t=0;t<s;t++)this.pst[t].Ftt()}Pc(i,t=!1,e=!1,h=!1,s=!1,n=!1,r=!1){this.hst||this.TW();const o=this.hst&&!this.hst.Rj(),a=0===this.tst.hf;if((o||!a)&&!(n&&a&&this.cN().lz()||(i-=this.Dtt())<0)){this.eit(i,t),this.hit(i,t,s);for(let t=0,s=this.pst.length;t<s;t++)this.pst[t].Pc(i,e,h,r);this.nit(i,t),0!==this.gst&&(this.nst||(this.nst=this.hst.eO()),this.nst)&&this.nst._4()}}Ott(){const s=this.pst.length;for(let t=0;t<s;t++)this.pst[t].Ott()}eit(t,s){if(s&&this.CC&&!this.ost){const i=this.vst();if(i.KQ()){if(t<0)return}else if(t>this.Vst())return;for(const e of this.pst)e.oZ();this.ost=!0}}nit(t,s){if(s&&this.CC&&!this.ast){const i=this.vst();if(i.KQ()){if(t>=this.Vst()){for(const e of this.pst)e.Pc(this.Vst(),!1,!0);this.ast=!0}}else if(t<=0){for(const h of this.pst)h.Pc(0,!1,!0);this.ast=!0}}}hit(t,s,i){if(!i&&s&&Bn.B$.Timeline){const e=this.vst(),h=this.ust.jZ(),n=this.ust.VP(),r=h?h.VP():e.lW();if(t<=n||r<=t)if(this.ust=this.sst.rit(t,this.tst),e.KQ())h&&this.iit(this.ust);else{const o=this.ust.jZ();o&&this.iit(o)}}}sit(t){const s=this.sst.oit(t,this.tst);return s||this.sst.rit(t,this.tst)}iit(t){if(Bn.B$.Timeline){const s=this.vst(),i=s.kQ();Bn.B$.Timeline.k$.PushTriggerTimeline(s),Bn.B$.Timeline.k$.PushTriggerKeyframe(t),i.YN(Bn.B$.Timeline.k$.OnAnyKeyframeReached),i.YN(Bn.B$.Timeline.k$.iit),Bn.B$.Timeline.k$.PopTriggerTimeline(s),Bn.B$.Timeline.k$.PopTriggerKeyframe(t)}}ait(){const t=this.tst.dst(),s=t.lit();return s}uit(){const t=this.tst.Sst(),s=t.cit(),i=Bn.bst.BM(this,s);return this.pst.push(i),i}fit(t){const s=this.tst.dst();s.dit(t)}pit(t){for(const s of this.pst)s.pit(t)}mit(){for(const t of this.pst)t.mit()}git(){if(this.Mst(),this.xst()||!this.jQ())for(const t of this.pst)t.git()}yit(){if(this.Mst(),this.xst()||!this.jQ()){let t=!1;for(const s of this.pst){const i=s.yit();!t&&i&&(t=!0)}if(t){const e=this.ait();e.oW(this.vst().VP()),e.GW("noease"),e.zst(!0),e.QQ("")}}}mY(){isNaN(this.lst)||this.wit(this.lst),this.lst=NaN}X9(){const t=this.TW(),s=t?t.TN():this.Gst();return{propertyTracksJson:this.Sit(),lastKeyframeDataItemJson:this.bit(),initialStateOfNestedSet:this.ost,endStateOfNestedSet:this.ast,instanceUid:s,cleared:this.rst}}Y9(t){if(t){this.vit(t.propertyTracksJson),this.Mit(t.lastKeyframeDataItemJson),this.lst=t.instanceUid,this.ost=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.ost=t.initialStateOfNestedSet),this.ast=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.ast=t.endStateOfNestedSet),this.rst=!!t.hasOwnProperty("cleared")&&t.cleared;for(const s of this.pst)0===this.gst&&1===s.tit()&&(this.gst=1),0===this.SY&&1===s.aZ()&&(this.SY=1);this.yst=0,this.pst.some(t=>t.Rtt())&&(this.yst=1)}}bit(){const t=this.tst.dst();return t.xit(this.ust)}Sit(){return this.pst.map(t=>t.X9())}vit(t){t.forEach((t,s)=>{const i=this.pst[s];i.Y9(t)})}wit(t){if(Bn.le(t)){const s=this.GO().KD(t);if(s){const i=this.vst();i.jtt(this.tst.RW(),s,this._st())}}}Mit(t){const s=this.tst.dst();this.ust=s.Git(t)}}}{const Wn=self.Ds;Wn.bst=class extends Wn.Zh{constructor(t,s){super(),this.Tit=t,this._it=s,this.Iit=s.Sst(),this.gst=0,this.SY=0,this.yst=0,this.Cit=this.BQ(),this.Eit=this._it.Pit().Rit(),this.Ait=null,this.Fit=null}static BM(t,s){return Wn.Qh(Wn.bst,t,s)}tn(){this.Tit=null,this.Cit&&(this.Cit.tn(),this.Cit=null),this.Eit=null,this._it=null,this.Iit=null}tit(){return this.gst}aZ(){return this.SY}Rtt(){return this.yst}Dit(){return!!this.Fit}Oit(t){this.Fit=t}Lit(){return this.Fit}kit(){return this.Tit}Nit(){return this._it}Sst(){return this.Iit}vst(){return this.Tit.vst()}GO(){return this.Tit.GO()}TW(){return this.Tit.TW()}BQ(){if(!this.Cit){let t=this._it.Rst(),s;switch(t){case"behavior":s=new Wn.bst.Bit(this);break;case"effect":s=new Wn.bst.Wit(this),this.SY=1;break;case"instance-variable":s=new Wn.bst.jit(this);break;case"plugin":s=new Wn.bst.Vit(this),this.SY=1;break;case"world-instance":s=new Wn.bst.Hit(this),this.SY=1,this.gst=1;break;case"value":s=new Wn.bst.Uit(this);break;case"audio":s=new Wn.bst.zit(this)}this.Cit=s}return this.Cit}Rst(){return this._it.Rst()}Jit(t){this._it.Jit(t)}qit(){return this._it.$it()}Xit(t){this._it.Yit(t)}PW(){return this.BQ().Zit()}Jtt(){return this._it.Kit()}Qit(t){this._it.tet(t)}iet(){return this._it.Xx()}eet(t){this._it.het(t)}net(){return this.Sst().ret(this._it).Xx()}oet(){return this._it.oet()}aet(t){this._it.aet(t)}let(){return this._it.let()}uet(t){this._it.uet(t)}Ust(){return this._it.Ust()}zst(t){this._it.zst(t)}zQ(){return this._it.zQ()}JQ(t){this._it.JQ(t)}XZ(){return this._it.XZ()}qQ(t){this._it.qQ(t)}GW(t){for(const s of this.cet())s.GW(t)}fet(){return this._it.fet()}cet(){return this.Eit||(this.Eit=this._it.Pit().Rit()),this.Eit}WZ(){return this._it.Pit().WZ()}det(t){return this.Iit.det(t,this._it)}pet(t){return this.Iit.pet(t,this._it)}met(t){let s=this.Iit.det(t,this._it),i;return i=s?this.Iit.yet(t,this._it):(s=this.Iit.pet(t,this._it),this.Iit.wet(t,this._it)),{start:s,end:i}}*bet(){for(const t of this.cet())yield t.iK()}*vet(){for(const t of this.cet())yield t.VP()}Ntt(){this.BQ().Ntt()}yZ(){this.BQ().yZ()}Met(){return this.BQ().Met()}vtt(){this.BQ().vtt()}oZ(t){this.BQ().oZ(),this.Ait=this.xet(t),this.Ett()}Ctt(t){this.BQ().Ctt(),this.Ait=this.xet(t)}Ett(){const t=this.kit();if(this.yst=0,t.jQ()){const s=this.vst(),i=t.TW(),e=this.BQ(),h=this.Jtt(),n=e.Get();if(n){const r=s.NQ(i,e,h,this);r&&r.length&&(this.yst=1)}else this.yst=0}}xet(t){const s=this.vst(),i=this.Iit.det(t,this._it);return i||(s.KQ()?this.Iit.pet(t,this._it):this.Iit.wet(t,this._it))}Ftt(){this.Cit.Ftt()}Pc(t,s=!1,i=!1,e=!1){let h,n,r=!1;if(s)h=this.Iit.pet(t,this._it);else{if(this.Ait){const o=this.vst(),a=this.Ait.jZ(),l=this.Ait.VP(),u=a?a.VP():o.lW();(t<=l||u<=t)&&(this.Ait=this.Iit.pet(t,this._it),r=!0)}else this.Ait=this.Iit.pet(t,this._it),r=!0;h=this.Ait}h&&(n=h.jZ()),this.Cit.Pc(t,h,n,s,i,e,r)}Tet(t){if(this.Ait){const e=this.vst(),h=this.Ait.jZ(),n=this.Ait.VP(),r=h?h.VP():e.lW();(t<=n||r<=t)&&(this.Ait=this.Iit.pet(t,this._it))}else this.Ait=this.Iit.pet(t,this._it);const s=this.Ait,i=s.jZ();return this.Cit.Tet(t,s,i)}_et(t,s,i){return this.Cit.Tet(t,s,i)}Ott(){this.Cit.Ott()}static Iet(t,s){const i=s.Nit(),e=s.Iit;return e.pet(t,i)}static Cet(t,s){const i=s.Nit(),e=s.Iit;return e.wet(t,i)}Eet(){const t=this._it.Pit(),s=t.Ret();return this.Ait=null,s}pit(t){this.Ait=null;const s=this._it.Pit();s.Pet(t)}mit(){this.BQ().mit()}git(){const t=this.BQ().git();if(t){const s=this.Iit.ret(this._it),i=this.BQ().Met();s.Aet(i)}}yit(){const t=this.BQ().yit();return t&&this.Fet(),this.BQ().Det(),t}Fet(){const t=this.vst().VP(),s=this.BQ(),i=Wn.bst.Iet(t,this),e=this.Eet();e.het(i.Xx()),e.oW(t),e.GW(i.Oet()),e.zst(!0),e.Let(s.ket()),e.Aet(s.Met())}X9(){return{sourceAdapterJson:this.BQ().X9()}}Y9(t){t&&this.BQ().Y9(t.sourceAdapterJson)}}}{const jn=self.Ds,Vn=jn.bst;Vn.Hit=class{constructor(t){this.Net=t,this.Bet=null,this.Wet()}tn(){this.Bet&&(this.Bet.tn(),this.Bet=null),this.Net=null}Get(){return this.Bet.Get()}AW(){return this.Net}Ntt(){this.Bet&&this.Bet.Ntt()}yZ(){this.Bet&&this.Bet.yZ()}Wet(){return this.Bet||(this.Bet=this.jet()),this.Bet}Pst(){}lF(){return this.Pst()}Vet(){}vtt(){this.Wet().vtt()}oZ(){this.Wet().oZ()}Ctt(){this.Wet().Ctt()}Ftt(){this.Bet.Het()}Pc(t,s,i,e,h,n,r){let o=this.Net.net(),a;switch(o){case"numeric":a=Vn.Uet.Pc(t,s,i,this.Net);break;case"angle":a=Vn.zet.Pc(t,s,i,this.Net);break;case"boolean":a=Vn.Jet.Pc(t,s,i,this.Net);break;case"color":a=Vn.qet.Pc(t,s,i,this.Net);break;case"text":a=Vn.$et.Pc(t,s,i,this.Net)}this.Bet.Xet(t,a,s,i,e,h,n,r)}Tet(t,s,i){switch(this.Net.net()){case"numeric":return Vn.Uet.Pc(t,s,i,this.Net);case"angle":return Vn.zet.Pc(t,s,i,this.Net);case"boolean":return Vn.Jet.Pc(t,s,i,this.Net);case"color":return Vn.qet.Pc(t,s,i,this.Net);case"text":return Vn.$et.Pc(t,s,i,this.Net)}}Ott(){this.Bet.Yet()}mit(){this.Wet().Zet()}Det(){this.Wet().Det()}Met(){return this.Wet().Met()}git(){return this.Wet().git()}yit(){return this.Wet().yit()}ket(){const t=this.Net,s=t.kit(),i=s.vst().VP(),e=Vn.Iet(i,t),h=e.jZ(),n=t.net();switch(n){case"numeric":return Vn.Uet.Pc(i,e,h,t);case"angle":return Vn.zet.Pc(i,e,h,t);case"boolean":return Vn.Jet.Pc(i,e,h,t);case"color":return Vn.qet.Pc(i,e,h,t);case"text":return Vn.$et.Pc(i,e,h,t)}}jet(){const t=this.Net,s=t.fet()?t.net():"";switch(s){case"combo":case"boolean":case"text":case"string":return new Vn.Qet.Ket(this);case"numeric":case"number":case"angle":return new("combo"===this.Net.iet()?Vn.Qet.Ket:Vn.Qet.tht)(this);case"color":case"offsetColor":return new Vn.Qet.sht(this);default:return new Vn.Qet.tht(this)}}X9(){return{propertyAdapterJson:this.Wet().X9()}}Y9(t){t&&this.Wet().Y9(t.propertyAdapterJson)}}}{const Hn=self.Ds;class Un extends Hn.bst.Hit{constructor(t){super(t),this.iht=NaN}Pst(){return this.Net.Nit().$it()[0]}lF(){return this.iht||super.lF()}Vet(){return this.Net.kit().TW()}Ost(t){const s=this.Net.Nit().$it()[0];s!==t&&(this.iht=t)}Pc(t,s,i,e,h,n,r){this.Wet().eht(s.Zit())&&super.Pc(t,s,i,e,h,n,r)}Tet(t,s,i){if(this.Wet().eht(s.Zit()))return super.Tet(t,s,i)}X9(){return Object.assign(super.X9(),{index:this.iht})}Y9(t){t&&(super.Y9(t),this.iht=t.index)}}Hn.bst.jit=Un}{const zn=self.Ds;class Jn extends zn.bst.Hit{constructor(t){super(t),this.K7=NaN}Pst(){const t=this.Net.Nit();return t.$it()[1]}Vet(){const t=this.Net.Nit(),s=this.Net.kit(),i=this.K7||t.$it()[0],e=s.TW(),h=e.hht(i),n=e.nht()[h];return n.ZB()}o6(t){const s=this.Net.Nit(),i=s.$it()[2];return t.rht(i)}kst(t){const s=this.Net.Nit();s.$it()[0]!==t&&(this.K7=t)}Pc(t,s,i,e,h,n,r){const o=this.Net.kit(),a=o.TW();this.o6(a.cN())&&super.Pc(t,s,i,e,h,n,r)}Tet(t,s,i){const e=this.Net.kit(),h=e.TW();if(this.o6(h.cN()))return super.Tet(t,s,i)}X9(){return Object.assign(super.X9(),{sid:this.K7})}Y9(t){t&&(super.Y9(t),this.K7=t.sid)}}zn.bst.Bit=Jn}{const qn=self.Ds;class $n extends qn.bst.Hit{constructor(t){super(t)}Pst(){return this.Net.Nit().$it()[1]}Vet(){const t=this.Net,s=t.kit(),i=s.eO(),e=i.G4(),h=e.Ek(),n=this.Nst(h),r=n.lF();return e.d6(r)?e.oht(r):null}Nst(t){const s=this.Net,i=s.Nit().$it()[0];return t.aht(i)}Pc(t,s,i,e,h,n,r){this.lht()&&super.Pc(t,s,i,e,h,n,r)}Tet(t,s,i){if(this.lht())return super.Tet(t,s,i)}lht(){const t=this.Net,s=t.kit(),i=s.eO(),e=i.G4(),h=e.Ek(),n=this.Nst(h);if(n){const r=n.lF();return e.d6(r)}}}qn.bst.Wit=$n}{const Xn=self.Ds;class Yn extends Xn.bst.Hit{constructor(t){super(t)}Pst(){return this.Net.Nit().$it()[0]}Vet(){return this.Net.kit().TW().ZB()}Pc(t,s,i,e,h,n,r){const o=this.Net.kit(),a=o.cN().hk(),l=o.TW().cN().hk();a===l&&super.Pc(t,s,i,e,h,n,r)}Tet(t,s,i){const e=this.Net.kit(),h=e.cN().hk(),n=e.TW().cN().hk();if(h===n)return super.Tet(t,s,i)}uht(){const t=this.Net.kit(),s=t.cN().hk();if(Xn.B$.cht&&s instanceof Xn.B$.cht&&("initial-frame"===this.Net.Jtt()||"initial-animation"===this.Net.Jtt()))switch(this.Net.XZ()){case"relative":case"absolute":return null}}}Xn.bst.Vit=Yn}{const Zn=self.Ds;class Kn extends Zn.bst.Hit{constructor(t){super(t),this.fht=0,this.dht=!1}Get(){return!1}oZ(){let t=this.Net.Sst(),s=this.Net.Nit();s=t.ret(s),this.fht=s.iK()}Ctt(){}Zit(){return this.dht||this.Net.Pc(0),this.fht}Pc(t,s,i,e,h,n,r){this.fht=Zn.bst.Uet.Pc(t,s,i,this.Net),this.dht=!0}mit(){}Det(){}Met(){return this.fht}git(){return!1}yit(){return!1}X9(){return{value:this.fht,init:this.dht}}Y9(t){t&&(this.fht=t.value,this.dht=!t.hasOwnProperty("init")||t.init)}}Zn.bst.Uit=Kn}{const Qn=self.Ds;class tr extends Qn.bst.Hit{constructor(t){super(t),this.pht=!1,this.mht=null,this.ght=null,this.yht=null,this.DZ=this.Net.vst(),this.Tit=this.Net.kit(),this.wht=this.Net.qit(),this.Sht=this.wht[0],this.bht=this.wht[1],this.wht[3]?this.vht=this.wht[3]:this.vht=Math.random().toString(36).slice(2),this.Mht=NaN,this.xht=NaN,this.Ght=NaN,this.Tht=null,this._ht()}tn(){super.tn(),this.mht=null,this.ght=null,this.yht=null,this.DZ=null,this.Tit=null,this.wht=null,this.Sht=null,this.Tht=null}_ht(){if(self.Ds.B$.Audio){const t=this.Net.GO(),s=t.Iht(self.Ds.B$.Audio);s&&(this.mht=s.sk().ZB()),this.ght=self.Ds.B$.Audio.Cht,this.yht=self.Ds.B$.Audio.Eht}}Rht(){if(!this.Tht){const t=this.Net.kit(),s=t.AW("audioSource");s&&(this.Tht=s.BQ())}}Pht(){const t=this.Net.kit(),s=t.AW("volume");return(s?s.BQ():this).xht}Ntt(){super.Ntt(),this.pht=!1,this.mht&&(this.yht&&(this.Mht=this.yht.PlaybackTime.call(this.mht,this.vht),this.xht=this.yht.Volume.call(this.mht,this.vht)),this.ght)&&this.ght.hW.call(this.mht,this.vht)}Aht(){return this.vht}Fht(){return this.Ght}Dht(t){this.Ght=t}oZ(){super.oZ(),this.Mht=NaN,this.pht=!1}Ctt(){super.Ctt();const t=this.Net.vst(),s=t.VP();switch(this.Mht=s-this.bht,this.Net.Jtt()){case"audioSource":break;case"volume":this.xht=this.Net.Tet(s)}this.pht=!1}Pc(t,s,i,e,h,n,r){if(this.mht)switch(this.Net.Jtt()){case"audioSource":{if(!this.DZ.KQ())return;if(e)return void(this.ght&&this.ght.hW.call(this.mht,this.vht));if(t<this.bht)return void(this.pht=!1);const o=this.yht.PlaybackRate.call(this.mht,this.vht),a=this.DZ.mW();if(a!==o&&this.ght.pW.call(this.mht,this.vht,a),this.pht)return;if(!this.Net.vst().IsPlaying())return;if(this.pht=!0,isNaN(this.Mht)){const l=self.performance.now(),u=t-this.bht,c=this.mht.GetAudioContextState();if("suspended"===c)return void(this.pht=!1);const f=self.performance.now(),d=(f-l)/1e3,p=u+d;if(this.ght){let t=this.Fht();isNaN(t)?(this.Dht(0),t=0):this.Dht(t),this.ght.PlayFromTimeline.call(this.mht,this.Sht,t,this.vht,p)}}else{const m=this.Mht,g=(this.Mht=NaN,this.Pht()),y=(this.xht=NaN,this.mht.GetAudioContextState());if("suspended"===y)return void(this.pht=!1);this.ght&&(this.Dht(g),this.ght.PlayFromTimeline.call(this.mht,this.Sht,g,this.vht,m))}break}case"volume":this.Rht(),super.Pc(t,s,i,e,h,n,r)}}Tet(t,s,i){if(this.mht)switch(this.Net.Jtt()){case"audioSource":return;case"volume":return this.Rht(),super.Tet(t,s,i)}}Oht(t,s){return this.Tht?this.Tht.Fht():0}Lht(t,s,i,e){this.Tht&&this.Tht.Dht(this.Oht()+s),this.ght&&this.Tht&&this.ght.Dht.call(this.mht,this.Tht.Aht(),this.Tht.Fht())}kht(t,s,i){this.Tht&&this.Tht.Dht(s),this.ght&&this.Tht&&this.ght.Dht.call(this.mht,this.Tht.Aht(),this.Tht.Fht())}Nht(){return!0}X9(){return{audioPlaybackStarted:this.pht,audioTag:this.vht,pauseTime:this.Mht,pauseVolume:this.xht,volume:this.Ght}}Y9(t){t&&(this.pht=t.audioPlaybackStarted,this.vht=t.audioTag,this.Mht=t.pauseTime,this.xht=t.pauseVolume,this.Ght=t.volume,this._ht())}}Qn.bst.zit=tr}{const sr=self.Ds;sr.bst.Qet=class{constructor(t){this.Cit=t,this.Net=t.AW(),this.nst=this.Net.kit().eO(),this.Bht=this.Net.Jtt(),this.Wht=!1,this.jht=null,this.Vht=null}tn(){this.Cit=null,this.Net=null,this.nst=null,this.jht=null,this.Vht=null}Get(){return!1}Ntt(){}yZ(){this.nst=null,this.jht=null,this.Vht=null}BQ(){return this.Cit}AW(){return this.Net}eO(){return this.nst||(this.nst=this.Net.kit().eO()),this.nst}Hht(t){this.Wht=!!t}Uht(){return this.Wht}vtt(){}oZ(){}Ctt(){}Zet(){this.jht=this.Met()}Det(){this.jht=null}Met(){}git(){}yit(){}eht(t){const s=typeof this.zht(),i=typeof t;return s==i}Het(){}Xet(t,s,i,e,h,n,r,o){}Yet(){}Jht(){const t=this.qht(()=>{const t=this.Net.Nit(),s=this.Net.Sst();return s.ret(t)},()=>{const t=this.Net.Nit(),s=this.Net.Sst();return s.$ht(t)});return t.Xht()}Yht(){const t=this.Net.vst(),e=t.VP()-this.Net.kit().Dtt(),s=this.qht(()=>{const t=this.Net.Nit(),s=this.Net.Sst();return s.pet(e,t)},()=>{const t=this.Net.Nit(),s=this.Net.Sst(),i=s.wet(e,t);return i||s.$ht(t)});return s.Xht()}qht(t,s){const i=this.Net.vst();return(i.KQ()?t:s)()}Zht(t,s){const i=this.Net.XZ();return("relative"===i?t:s)()}Kht(t,s){return(this.Uht()?(this.Hht(!1),t):s)()}Qht(t){}tnt(){return this.Cit.lF()}snt(){return this.Vht||(this.Vht=this.Cit.Vet()),this.Vht}int(t,s,i,e,h,n){const r=this.Net.Rst();switch(r){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return h();case"audio":return n()}}X9(){return{firstAbsoluteUpdate:this.Wht,saveState:this.jht}}Y9(t){t&&(this.Wht=t.firstAbsoluteUpdate,this.jht=t.saveState)}ent(t,s=!1){const i=[];for(const e of t){const h=e.kit().Dtt();for(const n of e.cet())(s&&0===n.VP()||!s)&&i.push({time:h+n.VP(),value:n.Xht()})}return i.sort((t,s)=>t.time-s.time)}hnt(t,s,i){return this.nnt(s,i)}nnt(s,i){for(let t=i.length-1;0<=t;t--){const e=i[t].time;if(e<=s)return i[t]}return null}}}{const ir=self.Ds,er=new Map,hr=[0,0,0];class nr extends ir.bst.Qet{constructor(t){super(t)}vtt(){}oZ(){}Ctt(){}Met(){const t=this.Net.Rst(),s=this.snt(),i=this.tnt();switch(t){case"behavior":return this.rnt(s.ont(i));case"effect":return this.rnt(s[i]);case"plugin":return this.rnt(s.ont(i));case"world-instance":return this.rnt(this.zht())}}git(){const t=this.Jht();return!this.ant(t,this.zht())}yit(){return!ir.de(this.jht)&&!this.ant(this.jht,this.zht())}ant(t,s){return t=this.lnt(t),s=this.lnt(s),t.ea(s)}Jht(){const t=super.Jht();return this.lnt(t)}Yht(){const t=super.Yht();return this.lnt(t)}Qht(t){}rnt(t){return(ir.Xe(t,ir.Oo)?t.toArray():t).slice(0,3)}lnt(t){return ir.Xe(t,ir.Oo)?t:new ir.Oo(t[0],t[1],t[2],1)}eht(t){return!0}Get(){return!0}Het(){const t=this.Net.vst(),s=this.Net.TW(),i=this.Net.BQ(),e=t.NQ(s,i,this.Bht,this.Net);if(e&&1<e.length){er.has(s)||er.set(s,new Map);const h=er.get(s),n=this.Net.Rst(),r=(h.has(n)||h.set(n,new Map),h.get(n));r.has(this.Bht)||r.set(this.Bht,{unt:!1,color:new ir.Oo(0,0,0,1)})}}cnt(t,s,i){const e=er.get(t).get(s).get(i);return e.unt=!0,e.color}Xet(t,s,i,e,h,n,r,o){const a=this.Net.vst(),l=this.Net.kit(),u=this.Net.TW(),c=this.Net.BQ(),f=this.Net.Rst(),d=this.Bht,p=a.NQ(u,c,d,this.Net);if(p&&1<p.length){const m=this.ent(p,!0),g=this.hnt(a,a.VP(),m);if(g){const y=l.Dtt(),w=g.time-y;if(0==w)this.cnt(u,f,this.Bht).Vo(s[0],s[1],s[2]);else if(!(w<0)){const S=s[0],b=s[1],v=s[2],M=this.Net.Pc(w,!1,!0),x=ir.Oo.ka(S,M[0]),G=ir.Oo.ka(b,M[1]),T=ir.Oo.ka(v,M[2]);this.cnt(u,f,this.Bht).Vo(x,G,T)}}}else this.fnt(s[0],s[1],s[2])}Yet(){const t=this.Net.TW();if(er.has(t)){const s=er.get(t),i=this.Net.Rst();if(s.has(i)){const e=s.get(i);if(e.has(this.Bht)){const h=e.get(this.Bht),n=h.unt,r=h.color;n&&this.fnt(r.Xo(),r.Yo(),r.Zo()),0===e.size&&s.delete(i),0===s.size&&er.delete(t)}}}}zht(){const t=this.Net.Rst(),s=this.snt(),i=this.tnt();switch(t){case"behavior":return this.lnt(s.ont(i));case"effect":return s[i].clone();case"plugin":return this.lnt(s.ont(i));case"world-instance":return this.eO().j4().clone()}}fnt(t,s,i){const e=this.Net.Rst(),h=this.snt(),n=this.tnt();switch(e){case"behavior":hr[0]=t,hr[1]=s,hr[2]=i,h.dnt(n,hr);break;case"effect":h[n].jo(t,s,i);break;case"plugin":hr[0]=t,hr[1]=s,hr[2]=i,h.dnt(n,hr);break;case"world-instance":this.eO().pnt(t,s,i)}}X9(){}Y9(t){}}ir.bst.Qet.sht=nr}{const rr=self.Ds,or=rr.bst;class ar extends rr.bst.Qet{constructor(t){super(t)}vtt(){}oZ(){}Ctt(){}Met(){return this.zht()}git(){const t=this.Jht();return t!==this.Met()}yit(){return!rr.de(this.jht)&&this.jht!==this.Met()}Get(){return!1}Xet(t,s,i,e,h,n,r,o){const a=this.Net,l=a.kit(),u=a.Rst(),c=a.vst(),f=l.TW(),d=a.BQ(),p=this.Bht,m=c.NQ(f,d,p,a);if(m&&1<m.length){const y=this.ent(m),w=t+l.Dtt(),S=this.hnt(c,w,y);S&&(s=S.value)}const g=a.net();switch(g){case"numeric":if(or.Uet.mnt(this.tnt(),this.snt(),s,u))break;return;case"angle":if(or.zet.mnt(this.tnt(),this.snt(),s,u))break;return;case"boolean":if(or.Jet.mnt(this.tnt(),this.snt(),s,u))break;return;case"color":if(or.qet.mnt(this.tnt(),this.snt(),s,u))break;return;case"text":if(!or.$et.mnt(this.tnt(),this.snt(),s,u))return}this.fnt(s)}zht(){const t=this.Net.Rst(),s=this.snt(),i=this.tnt();switch(t){case"behavior":return s.ont(i);case"effect":return s[i];case"instance-variable":return s.gnt(i);case"plugin":return s.ont(i)}}fnt(t){const s=this.Net.Rst(),i=this.snt(),e=this.tnt();switch(s){case"behavior":i.dnt(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.ynt(e,t);break;case"plugin":i.dnt(e,t)}}}rr.bst.Qet.Ket=ar}{const lr=self.Ds,ur=(lr.bst.Qet,new Map),cr=(t,s,i,e,h,n=!1,r=null,o=null)=>{ur.set(t,{wnt:s,Snt:i,bnt:e,round:h,vnt:n,init:r,reset:o})};cr("offsetX",(t,s,i,e)=>{"relative"===e.Net.XZ()?t.Mnt(s,i.vst().XQ()):t.Mnt(s)},(t,s)=>t.Qb(s),t=>t.Kb(),!0),cr("offsetY",(t,s,i,e)=>{"relative"===e.Net.XZ()?t.xnt(s,i.vst().XQ()):t.xnt(s)},(t,s)=>t.hv(s),t=>t.sv(),!0),cr("offsetWidth",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.Net.XZ(),l=1===i.Gnt.Xx();if((h||l)&&s.mB()&&s.MB()){if(isNaN(i.Tnt)){let e=[],t=s.iB();for(;t;)e.push(t),t=t.iB();e.reverse();let a=(t,s)=>s.vst().qtt(t.TW()),h=(t,s)=>{const i=a(t,s);if(i)return i.$st();const e=t.TW().ZB();return e.Xst()?e.$st():t.Int()._nt()},n=(t,s,i,e=0)=>{const h=a(t,s);if(!h)return e;const n=h.AW(i);if(!n)return e;const r=n.Nit().Pit();if(!r)return e;const o=r.$ht();return o?o.Zit():e},r;if(l){let t=e[e.length-1];r=t.Xp()}else{let s=e[0],t=s.Int()._nt(),i=s.Int().Cnt();r=t*i,r=(r+=n(s,o,"offsetWidth"))+h(s,o)*n(s,o,"offsetScaleX");for(let t=1;t<e.length;t++){const u=(s=e[t]).Int().Cnt();r=(r=(r*=u)+n(s,o,"offsetWidth"))+h(s,o)*n(s,o,"offsetScaleX")}}i.Tnt=0===r?Number.EPSILON:r}e||s.Am(t/i.Tnt,!0)}else s.Am(t)}},(t,s)=>t.hm(s),t=>t.Xp(),!0),cr("offsetHeight",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.Net.XZ(),a=1===i.Gnt.Xx();if((h||a)&&s.mB()&&s.GB()){if(isNaN(i.Tnt)){let e=[],t=s.iB();for(;t;)e.push(t),t=t.iB();e.reverse();let h=(t,s)=>{e=t;const i=s.vst().qtt(e.TW());var e;if(i)return i.Zst();const h=t.TW().ZB();return h.Xst()?h.Zst():t.Int().Ent()},n=(t,s,i,e=0)=>{const h=s.vst().qtt(t.TW());if(!h)return e;const n=h.AW(i);if(!n)return e;const r=n.Nit().Pit();if(!r)return e;const o=r.$ht();return o?o.Zit():e},r;if(a){let t=e[e.length-1];r=t.om()}else{let s=e[0],t=s.Int().Ent(),i=s.Int().Rnt();r=t*i,r=(r+=n(s,o,"offsetHeight"))+h(s,o)*n(s,o,"offsetScaleY");for(let t=1;t<e.length;t++){const l=(s=e[t]).Int().Rnt();r=(r=(r*=l)+n(s,o))+h(s,o)*n(s,o,"offsetScaleY")}}i.Tnt=0===r?Number.EPSILON:r}e||s.Pnt(t/i.Tnt,!0)}else s.Pnt(t)}},(t,s)=>t.Yp(s),t=>t.om(),!0),cr("offsetAngle",(t,s,i,e,h)=>{t.Ant(s)},(t,s)=>t.Lk(s),t=>t.kk(),!1,!0),cr("offsetOpacity",(t,s,i,e,h)=>{const n=e.Fnt||1,r=(s/=n,t.fR()),o=r+s;if(0===e.Dnt)1<o?e.Dnt+=o-1:o<0&&(e.Dnt+=o),t.Ont(s);else{const a=t.fR()+s;0<s&&0<e.Dnt?1<a&&(e.Dnt+=a-1):0<s&&e.Dnt<0?(e.Dnt+=s,0<e.Dnt&&(t.Ont(e.Dnt),e.Dnt=0)):s<0&&0<e.Dnt?(e.Dnt+=s,e.Dnt<0&&(t.Ont(e.Dnt),e.Dnt=0)):s<0&&e.Dnt<0&&a<0&&(e.Dnt+=a)}},(t,s)=>{t.pR(s)},t=>t.fR(),!1,!0,(n,h,r)=>{switch(n.Dnt=0,n.Net.XZ()){case"relative":{n.Net.Sst();let t=n.Net.Nit(),s=t.Pit(),i=s.Rit(),e=n.eO().fR(),h=e;for(const o of i){const a=o.VP(),l=n.Net.Tet(a);h=e+l,h=lr.an(h,0,1)}n.Lnt=e-h,n.Lnt=Math.round(100*(n.Lnt+Number.EPSILON))/100,h=e;for(let t=i.length-1;0<=t;t--){const u=i[t].VP(),c=n.Net.Tet(u);h-=c,h=lr.an(h,0,1)}n.knt=h,n.knt=Math.round(100*(n.knt+Number.EPSILON))/100;break}}const t="relative"===n.Net.XZ(),s=1===n.Gnt.Xx();if((t||s)&&h.mB()&&h.RB()){let s=[],t=h.iB();for(;t;)s.push(t),t=t.iB();s.reverse();let i=(t,s,i)=>{const e=s.vst().qtt(t.TW());if(!e)return 0;const h=e.AW(i);if(!h)return 0;const n=h.Nit().Pit();if(!n)return 0;const r=n.$ht();return r?r.Zit():0},e=s[0].Int().Nnt();e+=i(s[0],r,"offsetOpacity");for(let t=1;t<s.length;t++)e+=i(s[t],r,"offsetOpacity");n.Fnt=0===e?1:e}},i=>{switch(i.Net.XZ()){case"relative":{i.Dnt=0;let t=i.eO(),s=t.fR();s=Math.round(100*(s+Number.EPSILON))/100,i.Net.vst().KQ()?(t.pR(s+i.Lnt),i.NG=0):(t.pR(s-i.knt),i.NG=i.BQ().ket());break}}}),cr("offsetOriginX",(t,s)=>t.Bnt(s),(t,s)=>t.Wnt(s),t=>t.N6(),!1),cr("offsetOriginY",(t,s)=>t.jnt(s),(t,s)=>t.Vnt(s),t=>t.W6(),!1),cr("offsetZElevation",(t,s)=>t.Hnt(s),(t,s)=>t.rv(s),t=>t.nv(),!0),cr("offsetScaleX",(t,s,i,e)=>{if(0!==s){const h=t.Xp()<0?-1:1;if("relative"===e.Net.XZ()&&t.mB()&&t.MB()){const n=i.$st()*h*s;isNaN(e.Tnt)&&ur.get("offsetWidth").wnt(t,1,i,e,!0),t.Am(n/e.Tnt,!0)}else t.Am(i.$st()*h*s)}},(t,s,i)=>{t.hm(i.$st()*s)},(e,h)=>{const n=e.Xp()<0?-1:1;if(e.MB()){let t=e.iB(),s=h.vst().qtt(t.TW()),i=NaN;if(s)i=t.Xp()/s.$st();else{const r=t.TW().ZB();i=r.Xst()?t.Xp()/r.$st():1}return e.Xp()*n/(h.$st()*i)}return e.Xp()*n/h.$st()},!1),cr("offsetScaleY",(t,s,i,e)=>{if(0!==s){const h=t.om()<0?-1:1;if("relative"===e.Net.XZ()&&t.mB()&&t.GB()){const n=i.Zst()*h*s;isNaN(e.Tnt)&&ur.get("offsetHeight").wnt(t,1,i,e,!0),t.Pnt(n/e.Tnt,!0)}else t.Pnt(i.Zst()*h*s)}},(t,s,i)=>{t.Yp(i.Zst()*s)},(e,h)=>{const n=e.om()<0?-1:1;if(e.GB()){let t=e.iB(),s=h.vst().qtt(t.TW()),i=NaN;if(s)i=t.om()/s.Zst();else{const r=t.TW().ZB();i=r.Xst()?t.om()/r.Zst():1}return e.om()*n/(h.Zst()*i)}return e.om()*n/h.Zst()},!1);class fr extends lr.bst.Qet{constructor(t){super(t),this.NG=0,this.Dnt=0,this.Lnt=0,this.knt=0,this.Fnt=NaN,this.Tnt=NaN,this.Unt=void 0,this.znt=void 0,this.Jnt=null,this.qnt=null,this.$nt=null,this.Xnt=null,this.Ynt=null,this.Znt=null,this.Knt=null,this.Qnt=null,this.trt=!1,this.srt=!1,lr.Xe(this.Net.vst(),lr.irt)?this.Gnt=new lr.bst.Qet.ert(this):this.Gnt=new lr.bst.Qet.hrt(this);const s=this.Net.Jtt();switch(this.Net.Rst()){case"world-instance":{const i=ur.get(s);this.Jnt=i.bnt,this.qnt=i.wnt,this.$nt=i.Snt,this.trt=i.round,this.srt=i.vnt,this.Ynt=i.init,this.Xnt=i.reset;break}case"audio":this.Znt=t.Oht,this.Knt=t.Lht,this.Qnt=t.kht,this.trt=!!t.Nht(),this.srt=!1}}tn(){this.Gnt=null,this.Jnt=null,this.qnt=null,this.$nt=null,this.Xnt=null,this.Ynt=null,this.Znt=null,this.Knt=null,this.Qnt=null,super.tn()}Get(){return this.Gnt.Get()}nrt(){return this.NG}rrt(t){this.NG=t}vtt(){this.Xnt&&this.Xnt(this)}oZ(){const t=this.Gnt.oZ();if("number"==typeof t&&(this.NG=t),this.Ynt){const s=this.eO(),i=this.Net.kit();this.Ynt(this,s,i)}}Ctt(){const t=this.Gnt.Ctt();"number"==typeof t&&(this.NG=t)}Met(){return this.zht()}git(){const t=this.Jht();return t!==this.Met()}yit(){return!lr.de(this.jht)&&this.jht!==this.Met()}Het(){this.Gnt.Het()}Xet(t,s,i,e,h,n,r,o){return this.Gnt.Xet(t,s,i,e,h,n,r,o)}Yet(){this.Gnt.Yet()}zht(){const t=this.snt(),s=this.tnt(),i=this.eO(),e=this.Net.kit(),h=this.Net.Rst();switch(h){case"behavior":return t.ont(s);case"effect":return t[s];case"instance-variable":return t.gnt(s);case"plugin":return t.ont(s);case"world-instance":return this.Jnt(i,e);case"audio":return this.Znt.call(this.BQ(),i,e)}}fnt(t,s,i){const e=this.snt(),h=this.tnt(),n=this.eO(),r=this.Net.kit(),o=this.Net.Rst();switch(o){case"behavior":e.ort(h,t);break;case"effect":e[h]+=t;break;case"instance-variable":e.art(h,t);break;case"plugin":e.ort(h,t,this.BQ().uht());break;case"world-instance":this.qnt(n,t,r,this);break;case"audio":this.Knt.call(this.BQ(),n,t,r,this)}}lrt(t,s,i){let e=this.Net.zQ();if("discrete"!==(e="default"===e?"continuous":e)||s){if("discrete"===e&&i){const l=this.Net.vst(),u=l.VP(),c=this.Net.det(u);if(!c)return}const h=this.snt(),n=this.tnt(),r=this.eO(),o=this.Net.kit(),a=this.Net.Rst();switch(a){case"behavior":h.dnt(n,t);break;case"effect":h[n]=t;break;case"instance-variable":h.ynt(n,t);break;case"plugin":h.dnt(n,t,this.BQ().uht());break;case"world-instance":this.$nt(r,t,o);break;case"audio":this.Qnt.call(this.BQ(),r,t,o)}}}urt(t,s,i,e,h,n,r,o){this.Gnt.urt(t,s,i,e,h,n,r,o)}crt(t,s,i,e,h){let n=(t="angle"===this.Net.iet()?lr.cn(t):t).toString(),r=n.split(".")[1]||"",o=r.length,a=this.zht(),l;switch(l=0===o?this.trt?Math.round(a):this.srt?"angle"===this.Net.iet()?lr.un(Math.round(lr.cn(a))):Number(lr.toFixed(a,2)):a:this.trt?Number(lr.toFixed(a,o)):(this.srt,a),this.fnt(l-a,s,i),this.Net.Jtt()){case"offsetWidth":case"offsetScaleX":{const u=this.eO(),c=u.Xp(),f=Number(lr.toFixed(c,2));u.Am(f-c);break}case"offsetHeight":case"offsetScaleY":{const d=this.eO(),p=d.om(),m=Number(lr.toFixed(p,2));d.Pnt(m-p);break}}}X9(){return Object.assign(super.X9(),{v:this.NG,a:this.Dnt,fod:this.Lnt,bod:this.knt,of:this.Fnt,sf:this.Tnt,armorf:this.Unt,armandf:this.znt})}Y9(t){t&&(super.Y9(t),this.NG=t.v,this.Dnt=t.a,this.Lnt=lr.le(t.fod)?t.fod:0,this.knt=lr.le(t.bod)?t.bod:0,this.Fnt=lr.le(t.of)?t.of:NaN,this.Tnt=lr.le(t.sf)?t.sf:NaN,this.Unt=lr.le(t.armorf)?t.armorf:void 0,this.znt=lr.le(t.armandf)?t.armandf:void 0)}}lr.bst.Qet.tht=fr}{const dr=self.Ds;class pr{constructor(t){this.frt=!1,this.fht=0,this.drt=!1,this.prt=!1,this.pst=t;for(let t=0,s=this.pst.length;t<s;t++)this.pst[t].Oit(this)}ztt(){return this.pst}mrt(){this.frt=!0}grt(){return this.frt}Let(t){this.fht=t}Zit(){return this.fht}yrt(t){this.drt=t}wrt(){return this.drt}Att(t){this.prt=t}Srt(){return this.prt}Kf(){this.frt=!1,this.fht=0,this.drt=!1,this.prt=!1}}class mr{constructor(t){this.brt=t}tn(){this.brt=null}Xx(){return 0}oZ(){const t=this.brt;return this.brt.AW(),t.Zht(()=>t.qht(()=>0,()=>t.BQ().ket()),()=>{})}Ctt(){}Get(){this.brt;const t=this.brt.AW();switch(t.XZ()){case"relative":return!1;case"absolute":return!0}}Het(){this.brt;const t=this.brt.AW(),s=t.Jtt();switch(t.XZ()){case"relative":break;case"absolute":if(t.Dit()){const i=t.Lit();i.Kf()}else{const e=t.vst(),h=t.TW(),n=t.BQ(),r=e.NQ(h,n,s,t);r&&1<r.length&&new pr(r)}}}Xet(t,s,i,e,h,n,r,o){const a=this.brt,l=this.brt.AW();switch(l.XZ()){case"relative":{const u=a.nrt();a.fnt(s-u,i,e),n&&this.urt(t,i,e,h,u,s),a.rrt(s);break}case"absolute":{const c=l.vst(),f=l.kit();if(l.TW(),l.BQ(),l.Dit()){const d=l.Lit(),p=d.ztt(),m=a.ent(p,!0),g=a.hnt(c,c.VP(),m);if(g){const y=f.Dtt(),w=g.time-y;if(0==w)d.Att(r),d.yrt(o),d.mrt(),d.Let(d.Zit()+s);else{if(w<0)return;const S=l.Tet(w);d.Att(r),d.yrt(o),d.mrt(),d.Let(d.Zit()+(s-S))}}}else a.lrt(s,o,r);break}}}Yet(){const t=this.brt,s=this.brt.AW();switch(s.XZ()){case"relative":break;case"absolute":if(s.Dit()){const i=s.Lit();i.grt()&&t.lrt(i.Zit(),i.wrt(),i.Srt())}}}urt(t,s,i,e,h,n){const r=this.brt;e||(s&&t===s.VP()?r.crt(s.iK(),s,i):i&&t===i.VP()?r.crt(i.iK(),s,i):n-h==0&&r.crt(s.iK(),s,i))}}dr.bst.Qet.hrt=mr}{const gr=self.Ds;class yr{constructor(t){this.brt=t}tn(){this.brt=null}Xx(){return 1}oZ(){const t=this.brt;return t.Hht(!0),this.Qht(t.Jht())}Ctt(){const t=this.brt;if(t.Jht()!==t.Yht())return t.Hht(!0),this.Qht(t.Yht())}Get(){return!1}Het(){}Xet(t,s,i,e,h,n,r,o){const a=this.brt,l=a.nrt();switch(a.AW().XZ()){case"relative":a.fnt(s-l,i,e),n&&this.urt(t,i,e,h,l,s,!1,r);break;case"absolute":a.Uht()?(a.Hht(!1),a.fnt(l,i,e)):0===t&&0===a.AW().vst().lW()?a.lrt(s,!0,!1):(a.fnt(s-l,i,e),n&&this.urt(t,i,e,h,l,s,this.vrt(),r))}a.rrt(s)}Yet(){}Qht(t){const s=this.brt;return t-s.Met()}vrt(){let t=this.brt,s=t.eO().TW(),i=t.AW().GO(),e=i.kQ(),h=0;for(const n of e.LY())0===n.Xx()?n.jY(s)&&h++:1===n.Xx()&&n.TW()===s&&h++;return h<=1}urt(t,s,i,e,h,n,r,o){const a=this.brt;e?s&&t===s.VP()?a.crt(s.iK(),s,i,r,o):i&&t===i.VP()?a.crt(i.iK(),s,i,r,o):i||a.crt(s.iK(),s,i,r,o):s&&t===s.VP()?a.crt(s.iK(),s,i,r,o):i&&t===i.VP()?a.crt(i.iK(),s,i,r,o):n-h==0&&a.crt(s.iK(),s,i,r,o)}}gr.bst.Qet.ert=yr}{const wr=self.Ds,Sr=self.ec;wr.bst.Uet=class{constructor(){}static mnt(t,s,i,e){let h;switch(e){case"behavior":h=s.ont(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.gnt(t);break;case"plugin":h=s.ont(t)}return h!==i}static Pc(n,r,o,a){if(!o){let t=a.Nit(),s=a.Sst();return(t=s.$ht(t)).iK()}let l=a.zQ();if("default"===l&&(l="continuous"),"discrete"===(l="combo"===a.iet()?"discrete":l))return r.iK();if("continuous"===l||"step"===l){const u=a.vst().HQ();if("step"===l&&0!==u){const g=1/u;n=Math.floor(n*g)/g}const c=r.iK(),f=o.iK(),d=r.tK("cubic-bezier"),p=o.tK("cubic-bezier"),m=d&&d.Mrt()&&p&&p.xrt();if(!m&&c===f)return c;let t=r.VP(),s=o.VP(),i=("step"===l&&0!==u&&(n=wr.an(n,t,s)),wr.normalize(n,t,s)),e=r.Oet(),h;if(m){const y=s-t;h=Sr.vc(e)(y*i,0,1,y),h=Sr.vc("cubicbezier")(h,c,c+d.nK(),f+p.aK(),f)}else h=Sr.vc(e)((s-t)*i,c,f-c,s-t);return"integer"===a.iet()?Math.floor(h):h}}}}{const br=self.Ds;br.bst.zet=class{constructor(){}static mnt(t,s,i,e){let h;switch(e){case"behavior":h=s.ont(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.gnt(t);break;case"plugin":h=s.ont(t)}return h!==i}static Pc(t,s,i,e){if(!i){let t=e.Nit(),s=e.Sst();return(t=s.$ht(t)).iK()}let h=e.zQ();if("default"===h&&(h="continuous"),"discrete"===(h="combo"===e.iet()?"discrete":h))return s.iK();if("continuous"===h||"step"===h){const n=e.vst().HQ();if("step"===h&&0!==n){const c=1/n;t=Math.floor(t*c)/c}const r=s.VP(),o=i.VP(),a=s.iK(),l=i.iK(),u=("step"===h&&0!==n&&(t=br.an(t,r,o)),s.tK("angle"));if(!u){if(a===l)return a;const f=br.normalize(t,r,o),d=self.ec.vc(s.Oet());return br.Sn(a,l,d(f,0,1,1))}{const p=u.Grt();if(a===l&&0===p)return a;const m=br.normalize(t,r,o),g=self.ec.vc(s.Oet()),y=g(m,0,1,1);switch(u.Trt()){case"closest":return br.Sn(a,l,y,p);case"clockwise":return br.bn(a,l,y,p);case"anti-clockwise":return br.vn(a,l,y,p)}}}}}}{const vr=self.Ds;vr.bst.Jet=class{constructor(){}static mnt(t,s,i,e){let h;switch(e){case"behavior":h=s.ont(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.gnt(t);break;case"plugin":h=s.ont(t)}return!!h!=!!i}static Pc(t,s,i,e){if(i)return s.iK()?1:0;{let t=e.Nit(),s=e.Sst();return(t=s.$ht(t)).iK()?1:0}}}}{const Mr=self.Ds,xr=[0,0,0],Gr=[0,0,0],Tr=[0,0,0];Mr.bst.qet=class{constructor(){}static mnt(t,s,i,e){let h;switch(e){case"behavior":h=s.ont(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.gnt(t);break;case"plugin":h=s.ont(t)}return Array.isArray(i)?(xr[0]=i[0],xr[1]=i[1],xr[2]=i[2]):(Tr.Sa(i),xr[0]=Math.floor(255*Tr.Xo()),xr[1]=Math.floor(255*Tr.Yo()),xr[2]=Math.floor(255*Tr.Zo())),Array.isArray(h)?(Gr[0]=h[0],Gr[1]=h[1],Gr[2]=h[2]):(Tr.Sa(h),Gr[0]=Math.floor(255*Tr.Xo()),Gr[1]=Math.floor(255*Tr.Yo()),Gr[2]=Math.floor(255*Tr.Zo())),xr[0]!==Gr[0]||xr[1]!==Gr[1]||xr[2]!==Gr[2]}static Pc(t,s,i,e){if(!i){let t=e.Nit(),s=e.Sst(),i=(t=s.$ht(t)).iK();return xr[0]=i[0],xr[1]=i[1],xr[2]=i[2],xr}let h=e.zQ();if("discrete"===(h="default"===h?"continuous":h)){const n=s.iK();return xr[0]=n[0],xr[1]=n[1],xr[2]=n[2],xr}if("continuous"===h||"step"===h){const r=e.vst().HQ();if("step"===h&&0!==r){const M=1/r;t=Math.floor(t*M)/M}const o=s.VP(),a=i.VP(),l=s.iK(),u=i.iK(),c=("step"===h&&0!==r&&(t=Mr.an(t,o,a)),Mr.normalize(t,o,a)),f=s.Oet(),d=l[0],p=l[1],m=l[2],g=u[0],y=u[1],w=u[2],S=self.ec.vc(f),b=a-o,v=b*c;return xr[0]=d===g?d:S(v,d,g-d,b),xr[1]=p===y?p:S(v,p,y-p,b),xr[2]=m===w?m:S(v,m,w-m,b),xr}}}}{const _r=self.Ds;_r.bst.$et=class{constructor(){}static mnt(t,s,i,e){let h;switch(e){case"behavior":h=s.ont(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.gnt(t);break;case"plugin":h=s.ont(t)}return h!==i}static Pc(t,s,i,e){if(i)return s.iK();{let t=e.Nit(),s=e.Sst();return(t=s.$ht(t)).iK()}}}}{const Ir=self.Ds;Ir.HX=class{constructor(){this._rt=new Map}tn(){for(const t of this._rt.values())t.tn();this._rt.clear(),this._rt=null}tc(t){const s=new Ir.Irt(t),i=s.jc();this._rt.set(i,s)}Ks(t){return this._rt.get(t)}RQ(){return 0}static Crt(t,s,i,e){if(s)for(const h of s)Ir.HX.Ert("create",h,t,i,e)}static Rrt(t,s,i,e){if(s)for(const h of s)Ir.HX.Ert("create-including-disabled",h,t,i,e)}static Prt(i,t,s,e){i.length?t.forEach((t,s)=>{i[s].Y9(t)}):t.forEach(t=>{Ir.HX.Ert("load",t,i,s,e)})}static Ert(t,s,i,e,h){let n;if("function"==typeof e)switch(t){case"load":n=new e(null,h);break;case"create":case"create-including-disabled":n=new e(s,h)}else if("object"==typeof e){const r=e.prop,o=s[r],a=e.map.get(o);switch(t){case"load":n=new a(null,h);break;case"create":case"create-including-disabled":n=new a(s,h)}}switch(t){case"load":n.Y9(s),i.push(n);break;case"create":if("function"==typeof n.Ust&&!n.Ust())return n.tn();i.push(n);break;case"create-including-disabled":i.push(n)}}}}{const Cr=self.Ds;Cr.Irt=class{constructor(t){this.nn="",this.Ptt=NaN,this.Art=0,this.Frt="default",this.Drt="default",this.Ort=!1,this.Lrt=!1,this.krt=1,this.sst=null,this.Nrt="",this.Brt=!1,this.Wrt=!0,t&&(this.nn=t[0],this.Ptt=t[1],this.Art=t[2],this.Frt=t[3],this.Drt=t[4],this.Ort=!!t[6],this.Lrt=!!t[7],this.krt=t[8],this.Nrt=t[9],this.Brt=!!t[10],this.Wrt=!!t[11],this.sst=new Cr.jrt(t[5],this))}tn(){this.sst.tn(),this.sst=null}OQ(){return this.sst||(this.sst=new Cr.jrt(null,this)),this.sst}jc(){return this.nn}v8(t){this.nn=t}lW(){return this.Ptt}aW(t){this.Ptt=t}HQ(){return this.Art}UQ(t){this.Art=t}zQ(){return this.Frt}JQ(t){this.Frt=t}XZ(){return this.Drt}qQ(t){this.Drt=t}cW(){return this.Ort}uW(t){this.Ort=t}dW(){return this.Lrt}fW(t){this.Lrt=t}M6(){return this.krt}$Q(t){this.krt=t}wZ(){return this.Nrt}XQ(){return this.Brt}YQ(){return this.Wrt}X9(){return{trackDataJson:this.sst.X9(),name:this.nn,totalTime:this.Ptt,step:this.Art,interpolationMode:this.Frt,resultMode:this.Drt,loop:this.Ort,pingPong:this.Lrt,repeatCount:this.krt,startOnLayout:this.Nrt,transformWithSceneGraph:!!this.Brt,useSystemTimescale:this.Wrt}}Y9(t){t&&(this.OQ().Y9(t.trackDataJson),this.nn=t.name,this.Ptt=t.totalTime,this.Art=t.step,this.Frt=t.interpolationMode,this.Drt=t.resultMode,this.Ort=t.loop,this.Lrt=t.pingPong,this.krt=t.repeatCount,this.Nrt=t.startOnLayout,this.Brt=!!t.transformWithSceneGraph,this.Wrt=!!t.useSystemTimescale)}}}{const Er=self.Ds;class Rr{constructor(t,s){this.sst=s,this.Vrt=null,this.Hrt=null,this.ist=NaN,this.est=NaN,this.Frt="default",this.Drt="default",this.Iu=!1,this.Urt=null,this.Iit=null,this.Zc="",this.zrt=null,this.Jrt=0,this.qrt=this.sst.VQ().lW(),this.hf=0,this.nn="",t&&(t[0]&&(this.Vrt=t[0],this.ist=t[0][2],this.est=t[0][1]),this.Frt=t[1],this.Drt=t[2],this.Iu=!!t[3],t[6]&&(this.Zc=t[6]),t[7]&&(this.zrt=t[7],this.Jrt=t[7][0],this.qrt=t[7][1]),t[8]&&(this.Hrt=t[8]),t[8]&&(this.Hrt=t[8]),t[9]&&(this.hf=t[9]),t[10]&&(this.nn=t[10]),this.Urt=new Er.$rt(t[4],this),this.Iit=new Er.Xrt(t[5],this))}tn(){this.Vrt=null,this.sst=null,this.Urt&&(this.Urt.tn(),this.Urt=null),this.Iit&&(this.Iit.tn(),this.Iit=null),this.zrt=null}OQ(){return this.sst}dst(){return this.Urt||(this.Urt=new Er.$rt(null,this)),this.Urt}Sst(){return this.Iit||(this.Iit=new Er.Xrt(null,this)),this.Iit}Yrt(){return this.Vrt}Tst(){return this.est}Jst(t){this.est=t}Gst(){return this.ist}jst(t){this.ist=t}zQ(){return this.Frt}JQ(t){this.Frt=t}XZ(){return this.Drt}qQ(t){this.Drt=t}Ust(){return this.Iu}zst(t){this.Iu=!!t}RW(){return this.Zc}Dtt(){return this.Jrt}Vst(){return this.qrt}Hst(t){this.qrt=t}$st(){return this.Hrt[0]}qst(t){this.Hrt||(this.Hrt=[]),this.Hrt[0]=t}Zst(){return this.Hrt||(this.Hrt=[]),this.Hrt[1]}Yst(t){this.Hrt||(this.Hrt=[]),this.Hrt[1]=t}Xx(){return this.hf}jc(){return this.nn}X9(){return{keyframeDataJson:this.Urt.X9(),propertyTrackDataJson:this.Iit.X9(),instanceData:this.Vrt,additionalInstanceData:this.Hrt,instanceUid:this.ist,objectClassIndex:this.est,interpolationMode:this.Frt,resultMode:this.Drt,enabled:this.Iu,id:this.Zc,nestedData:this.zrt,type:this.hf,name:this.nn}}Y9(t){t&&(this.Vrt=t.instanceData,this.ist=t.instanceUid,this.est=t.objectClassIndex,this.Frt=t.interpolationMode,this.Drt=t.resultMode,this.Iu=t.enabled,this.Zc=t.id,this.hf=t.type||0,this.nn=t.name||"",this.qrt=this.sst.VQ().lW(),t.nestedData&&(this.zrt=t.nestedData,this.Jrt=this.zrt[0],this.qrt=this.zrt[1]),t.additionalInstanceData&&(this.Hrt=t.additionalInstanceData),this.dst().Y9(t.keyframeDataJson),this.Sst().Y9(t.propertyTrackDataJson))}}Er.jrt=class{constructor(t,s){this.tQ=s,this.Zrt=[],Er.HX.Crt(this.Zrt,t,Rr,this)}tn(){this.tQ=null;for(const t of this.Zrt)t.tn();Er.Pr(this.Zrt),this.Zrt=null}VQ(){return this.tQ}ktt(){const t=new Rr(null,this);return this.Zrt.push(t),t}Krt(t){return t.dst().fst()[0]}Qrt(t){const s=t.dst().fst();return s.at(-1)}oit(s,t){const i=t.dst().fst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.VP()===s)return h}}tot(s,t){const i=t.dst().fst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.VP()>s)return h}}sot(s,t){const i=t.dst().fst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.VP()>=s)return h}}rit(s,t){const i=t.dst().fst();for(let t=i.length-1;0<=t;t--){const e=i[t];if(e.VP()<=s)return e}}*DQ(){for(const t of this.Zrt)yield t}X9(){return{trackDataItemsJson:this.Zrt.map(t=>t.X9())}}Y9(t){t&&Er.HX.Prt(this.Zrt,t.trackDataItemsJson,Rr,this)}}}{const Pr=self.Ds;class Ar{constructor(t,s){this.Iit=s,this.iot="",this.eot=null,this.Bht=null,this.hf=null,this.hot=NaN,this.not=NaN,this.Frt="default",this.Drt="default",this.Iu=!1,this.rot=null,this.oot=!0,t&&(this.iot=t[0][0],this.eot=t[0].slice(1),this.Bht=t[1],this.hf=t[2],this.hot=t[3],this.not=t[4],this.Frt=t[5],this.Drt=t[6],this.Iu=!!t[7],this.rot=new Pr.aot(t[8],this),this.oot=t[9])}tn(){this.rot.tn(),this.rot=null,this.Iit=null,this.eot=null}Sst(){return this.Iit}Pit(){return this.rot||(this.rot=new Pr.aot(null,this)),this.rot}Rst(){return this.iot}Jit(t){this.iot=t}$it(){return this.eot}Yit(t){this.eot=t}Kit(){return this.Bht}tet(t){this.Bht=t}Xx(){return this.hf}het(t){this.hf=t}oet(){return this.hot}aet(t){this.hot=t}let(){return this.not}uet(t){this.not=t}zQ(){return this.Frt}JQ(t){this.Frt=t}XZ(){return this.Drt}qQ(t){this.Drt=t}Ust(){return this.Iu}zst(t){this.Iu=!!t}fet(){return!!this.oot}X9(){return{propertyKeyframeDataJson:this.rot.X9(),sourceAdapterId:this.iot,sourceAdapterArguments:this.eot,property:this.Bht,type:this.hf,min:this.hot,max:this.not,interpolationMode:this.Frt,resultMode:this.Drt,enabled:this.Iu,canHavePropertyKeyframes:this.oot}}Y9(t){t&&(this.iot=t.sourceAdapterId,this.eot=t.sourceAdapterArguments,this.Bht=t.property,this.hf=t.type,this.hot=t.min,this.not=t.max,this.Frt=t.interpolationMode,this.Drt=t.resultMode,this.Iu=t.enabled,this.oot=t.canHavePropertyKeyframes,this.Pit().Y9(t.propertyKeyframeDataJson))}}Pr.Xrt=class{constructor(t,s){this.tst=s,this.lot=[],Pr.HX.Crt(this.lot,t,Ar,this)}tn(){this.tst=null;for(const t of this.lot)t.tn();Pr.Pr(this.lot),this.lot=null}Wst(){return this.tst}cit(){const t=new Ar(null,this);return this.lot.push(t),t}ret(t){const s=t.Pit();return s.Rit()[0]}$ht(t){const s=t.Pit(),i=s.Rit();return i.at(-1)}det(s,t){const i=t.Pit(),e=i.Rit(),h=e.length;for(let t=0;t<h;t++){const n=e[t];if(n.VP()===s)return n}}yet(s,t){const i=t.Pit(),e=i.Rit(),h=e.length;for(let t=0;t<h;t++){const n=e[t];if(n.VP()>s)return n}}wet(s,t){const i=t.Pit(),e=i.Rit(),h=e.length;for(let t=0;t<h;t++){const n=e[t];if(n.VP()>=s)return n}}pet(s,t){const i=t.Pit(),e=i.Rit();for(let t=e.length-1;0<=t;t--){const h=e[t];if(h.VP()<=s)return h}}*wst(){for(const t of this.lot)yield t}X9(){return{propertyTrackDataItemsJson:this.lot.map(t=>t.X9())}}Y9(t){t&&Pr.HX.Prt(this.lot,t.propertyTrackDataItemsJson,Ar,this)}}}{const Fr=self.Ds;class Dr{constructor(t,s){if(this.Urt=s,this.NA=-1,this.uot="noease",this.cot=!1,this.TQ=null,this.fot=null,t){this.NA=t[0],this.uot=t[1],this.cot=!!t[2];const i=t[3];this.TQ=i?i.split(" "):[],this.fot=new Set(this.TQ.map(t=>t.toLowerCase())),this.dot=null}}tn(){this.Urt=null,Fr.Pr(this.TQ),this.TQ=null,this.fot.clear(),this.fot=null,this.dot=null}dst(){return this.Urt}jZ(){return this.dot}pot(t){this.dot=t}VP(){return this.NA}oW(t){this.NA=t,this.Urt.mot()}Oet(){return this.uot}GW(t){this.uot=t}Ust(){return this.cot}zst(t){this.cot=!!t}gW(){return this.TQ}QQ(t){this.TQ=t?t.split(" "):[],this.fot=new Set(this.TQ.map(t=>t.toLowerCase()))}got(){return this.fot}Ytt(t){return this.fot.has(t.toLowerCase())}X9(){return{time:this.NA,ease:this.uot,enable:this.cot,tags:this.TQ}}Y9(t){t&&(this.NA=t.time,this.uot=t.ease,this.cot=t.enable,this.TQ=t.tags,this.fot=new Set(this.TQ.map(t=>t.toLowerCase())))}}Fr.$rt=class{constructor(t,s){this.tst=s,this.cst=[],Fr.HX.Crt(this.cst,t,Dr,this),this.mot()}tn(){this.tst=null;for(const t of this.cst)t.tn();Fr.Pr(this.cst),this.cst=null}mot(){this.cst.sort((t,s)=>t.VP()-s.VP());for(let t=0;t<this.cst.length;t++){const s=this.cst[t];s.pot(this.cst[t+1])}}Wst(){return this.tst}yot(){return this.cst.length}fst(){return this.cst}lit(){const t=new Dr(null,this);return this.cst.push(t),this.mot(),t}dit(t){for(const s of this.cst)if(t(s)){const i=this.cst.indexOf(s);-1!==i&&(s.tn(),this.cst.splice(i,1))}this.wot(),this.mot()}wot(){this.cst.sort((t,s)=>t.VP()-s.VP())}xit(t){return this.cst.indexOf(t)}Git(t){return this.cst[t]}*Sot(){for(const t of this.cst)yield t}*bot(){for(let t=this.cst.length-1;0<=t;t--)yield this.cst[t]}X9(){return{keyframeDataItemsJson:this.cst.map(t=>t.X9())}}Y9(t){t&&(Fr.HX.Prt(this.cst,t.keyframeDataItemsJson,Dr,this),this.mot())}}}{const Or=self.Ds;class Lr{constructor(t,s){this.rot=s,this.fht=null,this.vot=null,this.hf="",this.NA=NaN,this.uot="noease",this.cot=!1,this.Mot=null,this.xot=void 0,this.Got="line",t&&(this.fht=t[0][0],this.vot=t[0][1],this.hf=t[0][2],this.NA=t[1],this.uot=t[2],this.cot=!!t[3],this.Got=t[5],this.Mot=null,t[4]&&(this.Mot=new Or.Tot(t[4],this)),this.dot=null,this._ot=null)}tn(){this.rot=null,this.Mot&&(this.Mot.tn(),this.Mot=null),this.dot=null,this._ot=null}Iot(){return this.Mot}pot(t){this.dot=t}jZ(){return this.dot}Cot(t){this._ot=t}VZ(){return this._ot}Zit(){return this.fht}Let(t){"color"===this.hf&&Or.le(t)?(this.fht[0]=Or.kn(t),this.fht[1]=Or.Nn(t),this.fht[2]=Or.Bn(t)):this.fht=t}Xht(){return this.vot}Aet(t){"color"===this.hf&&Or.le(t)?(this.vot[0]=Or.kn(t),this.vot[1]=Or.Nn(t),this.vot[2]=Or.Bn(t)):this.vot=t}iK(){const t=this.rot.Nit().XZ();return"relative"===t?this.Zit():"absolute"===t?this.Xht():void 0}Xx(){return this.hf}het(t){this.hf=t}VP(){return this.NA}oW(t){this.NA=t,this.rot.Eot()}Oet(){return this.uot}GW(t){this.uot=t}Ust(){return this.cot}zst(t){this.cot=!!t}HZ(){return this.Got}tK(s){if(this.Mot){if(!this.xot&&null!==this.xot){const i=this.Mot.Rot();if(i){const e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.RW()===s)return this.xot=h,this.xot}}this.xot=null}return this.xot}}X9(){const t=this.Mot;return{addonDataJson:t&&t.X9(),value:this.fht,aValue:this.vot,type:this.hf,time:this.NA,ease:this.uot,enable:this.cot}}Y9(t){t&&(t.addonDataJson&&this.Mot._SetFromJson(t.addonDataJson),this.fht=t.value,this.vot=t.aValue,this.hf=t.type,this.NA=t.time,this.uot=t.ease,this.cot=t.enable)}}Or.aot=class{constructor(t,s){this._it=s,this.Eit=[],this.Pot=[],Or.HX.Crt(this.Eit,t,Lr,this),Or.HX.Rrt(this.Pot,t,Lr,this),this.Eot()}tn(){this._it=null;for(const t of this.Eit)t.tn();Or.Pr(this.Eit),this.Eit=null;for(const s of this.Pot)s.tn();Or.Pr(this.Pot),this.Pot=null}Eot(){let s=this.Eit;s.sort((t,s)=>t.VP()-s.VP());for(let t=0;t<s.length;t++){const i=s[t];t+1<s.length&&i.pot(s[t+1]),0<=t-1&&i.Cot(s[t-1])}(s=this.Pot).sort((t,s)=>t.VP()-s.VP());for(let t=0;t<s.length;t++){const e=s[t];t+1<s.length&&e.pot(s[t+1]),0<=t-1&&e.Cot(s[t-1])}}Ret(){const t=new Lr(null,this);return this.Eit.push(t),this.Eot(),t}Pet(t){for(const s of this.Eit)if(t(s)){const i=this.Eit.indexOf(s);-1!==i&&(s.tn(),this.Eit.splice(i,1))}this.Aot(),this.Eot()}Aot(){this.Eit.sort((t,s)=>t.VP()-s.VP())}Nit(){return this._it}Fot(){return this.Eit.length}$ht(){return this.Eit[this.Eit.length-1]}Rit(){return this.Eit}WZ(){return this.Pot}*Dot(){for(const t of this.Eit)yield t}*Oot(){for(let t=this.Eit.length-1;0<=t;t--)yield this.Eit[t]}X9(){const t=this.Eit,s=this.Pot;return{propertyKeyframeDataItemsJson:t.map(t=>t.X9()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.X9())}}Y9(t){t&&(Or.HX.Prt(this.Eit,t.propertyKeyframeDataItemsJson,Lr,this),Or.HX.Prt(this.Pot,t.propertyKeyframeDataItemsIncludingDisabledJson,Lr,this),this.Eot())}}}{const kr=self.Ds;class Nr{constructor(t,s){this.Mot=s,this.Zc=t[0],this.Lot=t[1]}tn(){this.Mot=null,this.Lot=null}Iot(){return this.Mot}RW(){return this.Zc}X9(){return{id:this.Zc,data:this.Lot}}Y9(t){t&&(this.Zc=t.id,this.Lot=t.data)}}class Br extends Nr{constructor(t,s){super(t,s),this.kot=this.Lot[0],this.Not=!!this.Lot[1],this.Bot=this.Lot[2],this.Wot=!!this.Lot[3]}tn(){super.tn()}nK(){return this.kot}Mrt(){return this.Not}aK(){return this.Bot}xrt(){return this.Wot}X9(){return Object.assign(super.X9(),{startAnchor:this.kot,startEnable:!!this.Not,endAnchor:this.Bot,endEnable:!!this.Wot})}Y9(t){t&&(super.Y9(t),this.kot=t.startAnchor,this.Not=!!t.startEnable,this.Bot=t.endAnchor,this.Wot=!!t.endEnable)}}class Wr extends Nr{constructor(t,s){super(t,s),this.jot=this.Lot[0],this.Vot=this.Lot[1]}tn(){super.tn()}Trt(){return this.jot}Grt(){return this.Vot}X9(){return Object.assign(super.X9(),{direction:this.jot,revolutions:this.Vot})}Y9(t){t&&(super.Y9(t),this.jot=t.direction,this.Vot=t.revolutions)}}kr.Tot=class{constructor(t,s){this.Hot=s,this.Uot=[],kr.HX.Crt(this.Uot,t,{prop:0,map:new Map([["cubic-bezier",Br],["angle",Wr]])},this)}tn(){this.Hot=null;for(const t of this.Uot)t.tn();kr.Pr(this.Uot),this.Uot=null}zot(){return this.Hot}Rot(){return this.Uot}*Jot(){for(const t of this.Uot)yield t}X9(){return{addonDataItemsJson:this.Uot.map(t=>t.X9())}}Y9(t){t&&kr.HX.Prt(this.Uot,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",Br],["angle",Wr]])},this)}}}{let m=self.Ds,i=0;m.irt=class extends m.xY{constructor(t,s){super("tween-"+i++,t,s),this.Zc="",this.qot=!1,this.$ot="start-value",this.hst=null,this.Xot=null,this.Yot=null,this.Tit=null,this.Zot=null}AQ(t){const s=m.Qh(m.Event,"tweenstatereleased");s.Kot=this,t.dispatchEvent(s)}Xx(){return 1}nQ(){for(const t of this.tQ.OQ().DQ())this.sQ.push(m.Qot.BM(this,t));this.Tit=this.sQ[0]}Ltt(){const t=this.tQ.OQ().ktt(),s=m.Qot.BM(this,t);return this.sQ.push(s),this.tat(),s}tat(){this.Tit=this.sQ[0]}AW(t){return this.Tit.ztt()[0]}eet(t){this.sat=t}TW(){const t=this.kZ();if(t&&t.length){const s=t[0];if(this.Tit=s){const i=s.TW();return s.xst()?i:void 0}}}iat(t){this.Yot||(this.Yot=[]),this.Yot.push(t)}eat(t){this.Xot||(this.Xot=[]),this.Xot.push(t)}hat(t){if(this.Yot){const s=this.Yot.indexOf(t);-1!==s&&this.Yot.splice(s,1)}}nat(t){if(this.Xot){const s=this.Xot.indexOf(t);-1!==s&&this.Xot.splice(s,1)}}rat(t,s){for(const i of this.sQ)for(const e of i.pst)if(e.Jtt()===s){const h=e.Sst(),n=e.Nit(),r=h.ret(n);r.Let(t),r.Aet(t)}}oat(t){for(const s of this.sQ)for(const i of s.pst)if(i.Jtt()===t)return i}aat(t){for(const s of t){const i=this.oat(s);this.rat(i.Met(),s)}if(this.KQ()){const e=this.lW()-this.VP();this.aW(e);for(const h of this.sQ)h.Hst(e);this.ptt(0)}else{const n=this.VP();this.aW(n);for(const r of this.sQ)r.Hst(n);this.ptt(n)}this.mtt()}lat(t,s){const i=this.oat(s),e=i.Sst(),h=i.Nit(),n=e.$ht(h);n.oW(this.lW()),n.Let(t),n.Aet(t)}uat(t){this.Zc=t}RW(){return this.Zc}cat(t){this.$ot=t}fat(){return this.$ot}EW(t){this.qot=t}IW(){return this.qot}ett(){if(this.Yot)for(const t of this.Yot)t(this);if(!this.pZ())for(const s of this.sQ)s.yit()}htt(){this.SQ=this.Xc.ntt()}gZ(){if(!this.MQ&&(this.MQ=!0,this.Xot))for(const t of this.Xot)t(this)}oW(t){this.dat(),super.oW(t)}btt(t){(t=m.le(t)?t:this.lW())<0?this.aQ=0:t>=this.lW()?this.aQ=this.lW():this.aQ=t,this.Tit.vtt()}oZ(t){if(!this.mZ()&&"current-state"===this.fat())for(const s of this.sQ)s.git();super.oZ(t)}hW(t=!1){if(super.hW(t),!this.pZ())for(const s of this.sQ)s.mit()}Kf(t=!0,s=!1){this.dat(),super.Kf(t,s)}dat(){for(const t of this.sQ){const s=t=>{const s=t.VP(),i=this.lW();return 0!==s&&s!==i};t.fit(s),t.pit(s)}}rY(){if(!this.iW()){const t=this.TW();if(t&&t.cN().lz())return!1;this.QK.eZ(this),this._tt()}return!0}cZ(h,t,s){if(this.hst||(this.hst=this.TW()),!this.hst||this.hst.Rj())this.hW(!0),this.htt();else{const i=this.hst.gD();if(0!==(h=-1!==i?s*i:h)||0!==this.GQ){this.GQ=h;const n=this.aQ+this.lQ,r=h*this.uQ,o=n+r,a=this.tQ.Ptt;o<0?(this.aQ=0,this.lQ=-o):a<=o?(this.aQ=a,this.lQ=this.aQ-o):(this.aQ=o,this.lQ=0);let t=!1,s=!1,i=this.cW(),e=this.dW();i||e?i&&!e?0<this.uQ?this.aQ>=a&&(this.btt(0),this.pat(m.mat.Tween.k$.OnAnyTweenLoop),this.pat(m.mat.Tween.k$.OnTweensLoop),s=!0):this.aQ<=0&&(this.btt(a),this.pat(m.mat.Tween.k$.OnAnyTweenLoop),this.pat(m.mat.Tween.k$.OnTweensLoop),s=!0):!i&&e?0<this.uQ?this.aQ>=a&&(this.ptt(a),this.pW(-1*this.mW()),s=!0,1===this.cQ?this.fQ<this.M6()?(this.fQ++,this.pat(m.mat.Tween.k$.OnAnyTweenLoop),this.pat(m.mat.Tween.k$.OnTweensLoop),this.pat(m.mat.Tween.k$.OnAnyTweenPingPong),this.pat(m.mat.Tween.k$.OnTweensPingPong),this.cQ=0):(this.pat(m.mat.Tween.k$.OnAnyTweenPingPong),this.pat(m.mat.Tween.k$.OnTweensPingPong),t=!0):0===this.cQ&&(this.pat(m.mat.Tween.k$.OnAnyTweenPingPong),this.pat(m.mat.Tween.k$.OnTweensPingPong),this.cQ=1)):this.aQ<=0&&(this.ptt(0),this.pW(-1*this.mW()),s=!0,1===this.cQ?this.fQ<this.M6()?(this.fQ++,this.pat(m.mat.Tween.k$.OnAnyTweenLoop),this.pat(m.mat.Tween.k$.OnTweensLoop),this.pat(m.mat.Tween.k$.OnAnyTweenPingPong),this.pat(m.mat.Tween.k$.OnTweensPingPong),this.cQ=0):(t=!0,this.pat(m.mat.Tween.k$.OnAnyTweenPingPong),this.pat(m.mat.Tween.k$.OnTweensPingPong)):0===this.cQ&&(this.pat(m.mat.Tween.k$.OnAnyTweenPingPong),this.pat(m.mat.Tween.k$.OnTweensPingPong),this.cQ=1)):i&&e&&(0<this.uQ?this.aQ>=a&&(this.ptt(a),this.pW(-1*this.mW()),s=!0,0===this.cQ&&(this.pat(m.mat.Tween.k$.OnAnyTweenPingPong),this.pat(m.mat.Tween.k$.OnTweensPingPong)),1===this.cQ&&(this.pat(m.mat.Tween.k$.OnAnyTweenLoop),this.pat(m.mat.Tween.k$.OnTweensLoop),this.pat(m.mat.Tween.k$.OnAnyTweenPingPong),this.pat(m.mat.Tween.k$.OnTweensPingPong)),this.cQ++,this.cQ=m.wrap(this.cQ,0,2)):this.aQ<=0&&(this.ptt(0),this.pW(-1*this.mW()),s=!0,0===this.cQ&&(this.pat(m.mat.Tween.k$.OnAnyTweenPingPong),this.pat(m.mat.Tween.k$.OnTweensPingPong)),1===this.cQ&&(this.pat(m.mat.Tween.k$.OnAnyTweenLoop),this.pat(m.mat.Tween.k$.OnTweensLoop),this.pat(m.mat.Tween.k$.OnAnyTweenPingPong),this.pat(m.mat.Tween.k$.OnTweensPingPong)),this.cQ++,this.cQ=m.wrap(this.cQ,0,2))):0<this.uQ?this.aQ>=a&&(this.fQ<this.M6()?(this.fQ++,this.btt(0),this.pat(m.mat.Tween.k$.OnAnyTweenLoop),this.pat(m.mat.Tween.k$.OnTweensLoop),s=!0):(this.ptt(a),t=!0)):this.aQ<=0&&(this.fQ<this.M6()?(this.fQ++,this.btt(a),this.pat(m.mat.Tween.k$.OnAnyTweenLoop),this.pat(m.mat.Tween.k$.OnTweensLoop),s=!0):(this.ptt(0),t=!0)),t?(this.Tit.Att(),this.hW(!0),this.htt()):(this.Tit.Pc(this.aQ,!0,!1,s,this.xQ,!1),this.xQ&&(this.xQ=!1))}}}pat(t){const s=this.TW(),i=s.gat(m.mat.Tween);i.PushTriggerTween(this),this.Xc.YN(t,s,i.o6()),i.PopTriggerTween()}X9(){const t=super.X9(),s=this.VQ();return Object.assign(t,{tweenDataItemJson:s.X9(),id:this.Zc,destroyInstanceOnComplete:this.qot,initialValueMode:this.$ot})}Y9(t){if(t){const s=this.VQ();s.Y9(t.tweenDataItemJson),super.Y9(t),this.Zc=t.id,this.qot=t.destroyInstanceOnComplete,this.$ot=t.initialValueMode,this.tat()}}static IsPlaying(t){return t.IsPlaying()}static SW(t){return t.SW()}static yat(t){return!!t.dW()&&0===t.ZQ()}static wat(t){return!!t.dW()&&1===t.ZQ()}static Sat(t){const s=t.runtime.kQ(),i=new m.Irt;if(t.json){i.Y9(t.json.tweenDataItemJson);const e=new m.irt(i,s);return e.Y9(t.json),e}{const h=new m.irt(i,s),n=(m.Oe(t.bat)||(t.bat=[t.bat]),h.uat(t.id),h.QQ(t.tags),h.cat(t.initialValueMode),h.EW(t.releaseOnComplete),h.uW(t.loop),h.fW(t.pingPong),h.aW(t.time),h.UQ(0),h.JQ("default"),h.qQ(t.bat[0].resultMode),h.$Q(t.repeatCount),h.Ltt()),r=(n.jst(t.a6.TN()),n.JQ("default"),n.qQ(t.bat[0].resultMode),n.zst(!0),n.Jst(t.a6.cN().lF()),t.a6.ZB()),o=r.Xst()?r.$st():t.a6.eO().Xp(),a=r.Xst()?r.Zst():t.a6.eO().om(),l=(n.qst(o),n.Yst(a),n.ait()),u=(l.oW(0),l.GW("noease"),l.zst(!0),l.QQ(""),n.ait());u.oW(t.time),u.GW("noease"),u.zst(!0),u.QQ("");for(const c of t.bat){const f=n.uit(),d=(f.Jit(c.sourceId),f.Xit(c.sourceArgs),f.Qit(c.property),f.eet(c.type),f.aet(NaN),f.uet(NaN),f.JQ("default"),f.qQ(c.resultMode),f.zst(!0),f.Eet()),p=(d.het(c.valueType),d.oW(0),d.GW(c.ease),d.zst(!0),d.Let(c.startValue),d.Aet(c.startValue),f.Eet());p.het(c.valueType),p.oW(t.time),p.GW(c.ease),p.zst(!0),p.Let(c.endValue),p.Aet(c.endValue),f.BQ()}return h}}static jst(t,s){if(!isNaN(s))for(const i of t.kZ())i.jst(s)}vat(t,s){return this.Zot||(this.Zot=m.Qh(self.MW,this,t,s)),this.Zot}}}{const jr=self.Ds;jr.Qot=class extends jr.LQ{constructor(t,s){super(t,s),this.Mat=null,this.xat=null}static BM(t,s){return jr.Qh(jr.Qot,t,s)}Gat(){1===this.pst.length?this.Mat=this.pst[0]:(this.Mat=this.pst[0],this.xat=this.pst[1])}mst(){for(const t of this.tst.Sst().wst())this.pst.push(jr.Tat.BM(this,t));this.Gat()}uit(){const t=this.tst.Sst(),s=t.cit(),i=jr.Tat.BM(this,s);return this.pst.push(i),this.Gat(),i}oZ(){if(this.Mst(),this.xst()||!this.jQ()){const t=this.vst(),s=t.KQ(),i=s?0:this.Vst();for(const h of this.pst)h.oZ(i),0===this.gst&&1===h.tit()&&(this.gst=1),0===this.SY&&1===h.aZ()&&(this.SY=1);this.yst=0;const e=this.pst.some(t=>t.Rtt());e&&(this.yst=1),this.ust=this.sit(i),this.ost=!1,this.ast=!1,this.Pc(i)}}Ftt(){}Pc(t,s=0,i=!1,e=!1,h,n=!1,r=!1){if(this.hst||this.TW(),this.hst){const o=!this.hst.Rj();return o&&(!n||!this.cN().lz())&&((this.xat?(this.Mat.Pc(t,i,e,r),this.xat):this.Mat).Pc(t,i,e,r),void(0!==this.Mat.tit()&&(this.nst||(this.nst=this.hst.eO()),this.nst)&&this.nst._4()))}}Ott(){}Y9(t){super.Y9(t),this.Gat()}}}{const Vr=self.Ds;Vr.Tat=class extends Vr.bst{constructor(t,s){super(t,s),this._at=!1}static BM(t,s){return Vr.Qh(Vr.Tat,t,s)}Pc(t,s=!1,i=!1,e=!1){let h,n;if(this._at)h=this.Eit[0],n=this.Eit[1];else{if(s)h=this.Iit.pet(t,this._it);else{if(this.Ait){const r=this.vst(),o=this.Ait.jZ(),a=this.Ait.VP(),l=o?o.VP():r.lW();(t<=a||l<=t)&&(this.Ait=this.Iit.pet(t,this._it))}else this.Ait=this.Iit.pet(t,this._it);h=this.Ait}n=h.jZ()}this.Cit.Pc(t,h,n,s,i,e)}Eet(){const t=this._it.Pit(),s=t.Ret();return this.Ait=null,this._at=this.cet().length<=2,s}pit(t){this.Ait=null;const s=this._it.Pit();s.Pet(t),this._at=this.cet().length<=2}X9(){return{sourceAdapterJson:this.BQ().X9(),basic:this._at}}Y9(t){t&&(this.BQ().Y9(t.sourceAdapterJson),this._at=t.basic)}}}{const Hr=self.Ds,Ur=self.ec;Hr.Ac=class extends Hr.Zh{constructor(t,s=!0){super(),this.nn=t[0],this.Iat=t[2],this.Cat=[];for(const i of t[1]){const e=Hr.Eat.BM(this,i);this.Cat.push(e)}for(let t=0;t<this.Cat.length;t++){const h=this.Cat[t],n=this.Cat[t+1],r=this.Cat[t-1];h.pot(n),h.Cot(r)}this.Rat=new Map,this.Pat=new Map,this.Aat(),s&&Ur.Dc(this.nn,(t,s,i,e)=>this.Pc(t,s,i,e),null,{transition:this})}static BM(t){return Hr.Qh(Hr.Ac,t)}tn(){for(const t of this.Cat)t.tn();Hr.Pr(this.Cat),this.Cat=null,this.Rat.clear(),this.Rat=null,this.Pat.clear(),this.Pat=null}Fc(t){this.Iat=!!t}Fat(t){const s=this.Pat.get(t);if(s)return s;for(const i of this.Cat)if(i.Dat()===t)return this.Pat.set(t,i),i}Oat(s){for(let t=this.Cat.length-1;0<=t;t--){const i=this.Cat[t],e=i.Dat();if(e<=s){let t=i;if(e<s)return t;if(e===s){for(;t;){const h=t.VZ();if(!h)break;if(h.Dat()!==t.Dat())break;t=h}return t}}}}Pc(t,s,i,e){let h=t/e;if(this.Iat){const w=this.Fat(0),S=this.Fat(1),b=s+(s+i)*w.Lat(),v=(s+i)*S.Lat(),M=v-b;return 0===e?b+M:Ur.Lc(t,b,M,e)}0===e&&(h=1);let n=this.Oat(h),r=n.jZ();if(!r){const x=n.VZ(),G=n;n=x,r=G}const o=r.Dat()-n.Dat(),a=Hr.rn(h,n.Dat(),r.Dat(),0,o);if(n.kat()||0==o){const T=s+(s+i)*n.Lat(),_=(s+i)*r.Lat(),I=_-T;return 0==o?1===a?T+I:T:Ur.Lc(a,T,I,o)}let l=n.Dat(),u=n.Lat(),c=n.Dat()+n.Nat(),f=n.Lat()+n.Bat(),d=r.Dat()+r.Wat(),p=r.Lat()+r.jat(),m=r.Dat(),g=r.Lat(),y=Ur.vc("spline")(a,l,u,c,f,d,p,m,g,this.Rat.get(n));return(1-(y+=n.Lat()))*s+y*(s+i)}Aat(){this.Rat.clear();for(let t=0;t<this.Cat.length-1;t++){const s=this.Cat[t];if(s.Mrt()){const i=s,e=this.Cat[t+1];if(e.xrt()){const h=i.Dat(),n=i.Dat()+i.Nat(),r=e.Dat()+e.Wat(),o=e.Dat();this.Rat.set(i,Ur.kc(h,n,r,o))}}}}}}{const zr=self.Ds;zr.Eat=class extends zr.Zh{constructor(t,s){super(),this.Vat=t,this.Hat=s[0],this.Uat=s[1],this.zat=s[2],this.Jat=s[3],this.qat=s[4],this.$at=s[5],this.Not=s[6],this.Wot=s[7],this.Xat=s[8],this.dot=null,this._ot=null}tn(){this.Vat=null}static BM(t,s){return zr.Qh(zr.Eat,t,s)}pot(t){this.dot=t}jZ(){return this.dot}Cot(t){this._ot=t}VZ(){return this._ot}Dat(){return this.Hat}Lat(){return this.Uat}Nat(){return this.zat}Bat(){return this.Jat}Wat(){return this.qat}jat(){return this.$at}Mrt(){return this.Not}xrt(){return this.Wot}kat(){return"linear"===this.Xat}Yat(){return"cubic"===this.Xat}}}{const Jr=self.Ds;Jr.Zat=class extends Jr.Zh{constructor(t){super(),this.Xc=t,this.Kat=[]}tn(){for(const t of this.Kat)t.tn();Jr.Pr(this.Kat),this.Kat=null}BM(t){this.Kat.push(Jr.Ac.BM(t))}}}{const qr=self.Ds;qr.Qat=class extends qr.Zh{constructor(t){super(),this.Xc=t,this.tlt=null,this.slt=null,this.uY=t=>this.cY(t.a6)}tn(){if(this.bY(),this.tlt){for(const t of this.tlt.values())t.clear();this.tlt.clear()}this.tlt=null,this.Xc=null}BM(t){if(this.tlt||(this.tlt=new Map),t){const s=t[0][16],i=s[0],e=t[1],h=(this.tlt.has(e)||this.tlt.set(e,new Map),this.tlt.get(e));h.set(i,t)}}vY(){const t=this.Xc.Pf();t&&t.addEventListener("instancedestroy",this.uY)}bY(){const t=this.Xc.Pf();t&&t.removeEventListener("instancedestroy",this.uY)}ilt(){return!!this.tlt&&0!==this.tlt.size}elt(t,s){let i;if(i=t instanceof qr.hlt?t.lF():t,this.tlt.has(i)){const e=this.tlt.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}}nlt(t,s){this.slt||(this.slt=new WeakMap),this.slt.has(t)||this.slt.set(t,s)}rlt(t){if(!this.slt)return"";const s=this.slt.get(t);return s||""}cY(t){this.slt&&this.slt.has(t)&&this.slt.delete(t)}}}{const $r=self.Ds;$r.olt=class{constructor(t){this.Xc=t,this.llt=new $r.ult}tn(){this.llt.tn(),this.llt=null,this.Xc=null}GO(){return this.Xc}BM(t){this.llt.tc(t)}clt(t){return this.llt.Ks(t)}flt(){return this.llt.flt()}}}{const M=self.Ds;M.dlt=class{constructor(t,s,i,e,h,n,r){this.Xc=h.GO(),this.plt=h,this.mlt=t,this.glt=i,this.ylt=e,this.kg=s,this.UX=n,this.wlt=r??n.TW().TN(),this.Slt(),this.blt=this.Mlt?.vlt()??-1,this.xlt=[],this.Glt=null,this.Tlt=NaN,this._lt=null,this.Ilt=null,this.Clt=null,this.Elt="",this.Rlt=null,this.Plt="",this.Alt="",this.Flt=0,this.Dlt=!1,this.yQ=!1}tn(){this.yQ||(M.Pr(this.xlt),this.xlt=null,this.Xc=null,this.plt=null,this.ylt=null,this.UX=null,this.Glt=null,this.Tlt=NaN,this._lt&&this._lt.clear(),this._lt=null,this.Ilt=null,this.Clt=null,this.Elt="",this.Rlt=null,this.Plt="",this.Alt="",this.yQ=!0)}sn(){return this.yQ}Olt(){return this.plt}GO(){return this.Xc}jc(){return this.mlt}Llt(){return this.ylt}sW(){return this.kg}DY(){return this.UX||(this.UX=this.Xc.KD(this.wlt).ZB()),this.UX}klt(){return this.Nlt(this.blt)}Blt(){const t=this.klt();return t?t.sW():""}Wlt(){const t=this.klt();return t?t.gW():[]}jlt(t){const s=this.Wlt();if(!s)return!1;if(!s.length)return!1;const i=M.dlt.ttt(t);return!(!i||!i.length)&&i.every(M.dlt.itt,s)}Vlt(t,s){const i=this.Wlt();if(!i)return!1;if(!i.length)return!1;const e=M.dlt.ttt(t);return!(!e||!e.length)&&e.every(t=>M.dlt.Hlt.call(i,t,s))}static itt(t){return""===t?1===this.length&&""===this[0]:this.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static ttt(t){return t.trim().split(" ")}static Hlt(s,i){return""===s?1===this.length&&""===this[0]:this.some(t=>M.compare(t.trim(),i,s.trim()))}Ult(t){const s=this.klt();if(s){if(M.le(t)){const i=s.zlt(),e=i?i[t]:void 0;if(M.le(e))return this.Nlt(e)}if("string"==typeof t)for(const h of s.zlt()){const n=this.Nlt(h);if(n.rW(t))return this.Nlt(n.vlt())}}}Jlt(t){const s=this.Ult(t);return s?s.sW():""}qlt(t){const s=this.Ult(t);return s?s.gW():""}$lt(t){const s=this.klt();if(!s)return-1;const i=s.zlt();if(!i)return-1;const e=this.Ult(t);return e?i.indexOf(e.vlt()):-1}Xlt(){const t=this.klt();if(!t)return 0;const s=t.zlt();return s?s.length:0}Nlt(t){return this.ylt.Nlt(t)}Kf(){const t=this.Ylt();t.Zlt(!0)}Zlt(t){if(this.Klt()){for(const[s,i]of this.Klt().entries())i.Zlt(!1);this.Klt().clear()}if(this._lt=null,this.Glt=null,this.Qlt=null,this.Ilt=null,this.Elt="",this.Rlt=null,this.Plt="",this.Alt="",this.xlt=[],t){this.plt.tut(this);const e=this.Mlt.vlt();e!==this.blt&&this.sut(e)}else this.blt=this.Mlt.vlt()}iut(){const t=this.ylt.Nlt(this.blt);return t?t.hut().eut():0}nut(t){const s=this.rut(t);return s?s.jc():""}out(t){let s;return M.le(t)&&(s=this.rut(t)),"string"==typeof t&&(s=this.aut(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Zit():""}lut(t){let s;if(M.le(t)&&(s=this.rut(t)),s="string"==typeof t?this.aut(t):s){const i=s.uut();M.le(i)&&(this.xlt.push(this.blt),this.sut(i))}}cut(t){const s=this.ylt.fut(t);if(s){const i=this.ylt.Nlt(s.vlt());i&&(this.xlt.push(this.blt),this.sut(i.vlt()))}}dut(){const t=this.xlt.pop();M.le(t)?this.sut(t):this.mut()&&(this.plt.tut(this.mut(),!0,!1,!1),this.mut().sut(this.gut()),this.Ylt().yut(this.mut()))}wut(t){const s=this.klt();if(s){s.vlt();const i=this.Ult(t);i&&(this.xlt.push(this.blt),this.sut(i.vlt()))}}Sut(s){if(M.le(s)){const t=this.ylt.Nlt(this.blt),i=t.hut().but();return!!i[s]}if("string"==typeof s){const e=this.ylt.Nlt(this.blt),h=e.hut().but();for(let t=0;t<h.length;t++)if(h[t].jc()===s)return!0}return!1}vut(){this.Dlt=!0}Mut(){return 0<this.Flt}xut(){this.Flt++}Gut(){this.Flt--,0===this.Flt&&this.Dlt&&this.plt.Tut(this)}sut(t){const i=this.blt,s=this.DY().TW();if(this.xut(),this.plt._ut(this),this.Xc.YN(M.B$.Flowchart.k$.OnBeforeAnyNodeChange,s),this.Xc.YN(M.B$.Flowchart.k$.OnBeforeTaggedNodeChange,s),this.Xc.YN(M.B$.Flowchart.k$.OnBeforeAnyNodeChangeInFlowchart,s),this.Xc.YN(M.B$.Flowchart.k$.OnBeforeTaggedNodeChangeInFlowchart,s),this.blt=t,this.Xc.YN(M.B$.Flowchart.k$.OnAnyNodeChange,s),this.Xc.YN(M.B$.Flowchart.k$.OnTaggedNodeChange,s),this.Xc.YN(M.B$.Flowchart.k$.OnAnyNodeChangeInFlowchart,s),this.Xc.YN(M.B$.Flowchart.k$.OnTaggedNodeChangeInFlowchart,s),this.plt.Iut(),this.Gut(),!this.sn()){const e=this.Nlt(this.blt);if("reference"===e.Xx()){const h=e.Cut();if(this.Eut(e)){this.xlt.pop();const n=this.Rut(e),r=(this.plt.tut(n,!0,!0,!1),n.Put(this,i),this.Ylt());r.yut(n)}else{const o=e.Aut();if(h){this.xlt.pop();let s=e.Fut();if(s){let t=this.plt.Dut(s);for(;t;)s=M.Bd(s),t=this.plt.Dut(s)}else{s=h+"-ref";let t=this.plt.Dut(s);for(;t;)s=M.Bd(s),t=this.plt.Dut(s)}const a=this.plt.Out(h,o,s,this.UX,!0),l=(a.Put(this,i),this.Lut(e,a),this.Ylt());a.kut(l),l.yut(a)}}}}}rut(t){const s=this.ylt.Nlt(this.blt);if(!s)return null;const i=s.hut().but();if(!i)return null;const e=i[t];return e||null}aut(t){const s=this.ylt.Nlt(this.blt);if(!s)return null;const i=s.hut().Nut(t);return i||null}Slt(s){if("number"==typeof s){let t=this.Nlt(s);t=t||this.ylt.But(),this.Mlt=t}else{let t=this.ylt.fut(this.glt);t=t||this.ylt.But(),this.Mlt=t}}X9(){return this.Dlt?null:{flowchartName:this.mlt,flowchartTag:this.kg,startNodeTag:this.glt,currentNodeId:this.blt,previousNodeIds:this.xlt,pluginUID:this.UX.TW().TN(),reference:{previousFlowchartTag:this.mut()?this.mut().sW():"",previousStartNodeId:M.le(this.gut())?this.gut():NaN,referencesJson:this.Wut(),currentReferenceFlowchartTag:this.jut()?this.jut().sW():"",rootFlowchartTag:this.Ylt()?this.Ylt().sW():""}}}Wut(){if(!this.Vut())return null;const t=[];for(const[s,i]of this.Klt().entries())t.push({flowchartElementId:s.vlt(),flowchartStateTag:i.sW()});return t.length?t:null}Y9(t){if(t){if(this.mlt=t.flowchartName,this.kg=t.flowchartTag,this.glt=t.startNodeTag,this.blt=t.currentNodeId,this.xlt=t.previousNodeIds,this.wlt=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.Elt=s.previousFlowchartTag,this.Tlt=s.previousStartNodeId,this.Rlt=s.referencesJson,this.Plt=s.currentReferenceFlowchartTag,this.Alt=s.rootFlowchartTag}this.Slt()}}mut(){return"string"==typeof this.Elt&&this.Elt&&(this.Glt=this.plt.Dut(this.Elt),this.Elt=""),this.Glt}gut(){return this.Tlt}Put(t,s){this.Glt=t,this.Tlt=s}jut(){return"string"==typeof this.Plt&&this.Plt&&(this.Ilt=this.plt.Dut(this.Plt),this.Plt=""),this.Ilt}yut(t){this.Ilt=t,this.Ilt===this&&(this.Ilt=null)}Ylt(){return"string"==typeof this.Alt&&this.Alt&&(this.Clt=this.plt.Dut(this.Alt),this.Alt=""),this.Clt||this}kut(t){this.Clt=t}Vut(){return this.Hut(),!!this._lt}Eut(t){return this.Hut(),this._lt&&this._lt.has(t)}Hut(){if(this.Rlt){this._lt&&this._lt.clear(),this._lt||(this._lt=new Map);for(const t of this.Rlt){const s=this.plt.Dut(t.flowchartStateTag),i=s.Nlt(t.flowchartElementId);this._lt.set(i,s)}this.Rlt=null}}Klt(){return this.Hut(),this._lt}Rut(t){return this.Hut(),this._lt.get(t)}Lut(t,s){this._lt||(this._lt=new Map),this._lt.set(t,s)}}}{const Xr=self.Ds;Xr.Uut=class{constructor(t){this.Xc=t,this.zut=new Map,this.Jut=null,this.qut=[],this.$ut=()=>this.mY(),this.Xut=null}tn(){Xr.Pr(this.qut),this.qut=null,this.zut.clear(),this.zut=null,this.Jut=null,this.Xc=null,this.Xut=null}GO(){return this.Xc}Out(t,s,i,e,h,n){const r=this.Xc.Olt().clt(t);if(r){if(!this.zut.has(i)){const o=new Xr.dlt(t,i,s,r,this,e,n);return this.zut.set(i,o),h&&this.tut(o,!0),o}{const a=this.zut.get(i);a&&this.Tut(a)}}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}Tut(t){if(t.vut(),!t.Mut()){const s=t.sW();this.zut.delete(s),t.tn(),this.Jut===t&&(this.Jut=null)}}Yut(t){t.Kf()}Dut(t){return this.zut.get(t)}_ut(t){this.qut.push(t)}Iut(){this.qut.pop()}tut(t,s=!1,i=!1,e=!0){if(e){const h=t.jut();t=h||t}t!==this.Jut&&(this.Zut(),this.Kut(t,s,i))}Qut(t){return"string"==typeof t?this.Dut(t):this.qut.length?this.qut[this.qut.length-1]:this.Jut}Zut(){if(this.Jut&&!this.Jut.sn()){const t=this.Jut.DY().TW();this.Jut.xut(),this._ut(this.Jut),this.Xc.YN(Xr.B$.Flowchart.k$.OnBeforeFlowchartChange,t),this.Iut(),this.Jut.Gut()}}Kut(t,s=!1,i=!1){if(this.Jut=t,this.Jut&&!this.Jut.sn()){const e=this.Jut.DY().TW();this.Jut.xut(),this._ut(this.Jut),this.Xc.YN(Xr.B$.Flowchart.k$.OnFlowchartChange,e),!0!==i&&"number"!=typeof i||this.Jut.Slt(i),s&&(this.Xc.YN(Xr.B$.Flowchart.k$.OnAnyNodeChange,e),this.Xc.YN(Xr.B$.Flowchart.k$.OnTaggedNodeChange,e)),this.Iut(),this.Jut.Gut()}}X9(){return{flowchartJsonObjects:[...this.zut.values()].map(t=>t.X9()),currentFlowchartTag:this.Jut?this.Jut.sW():null}}Y9(t){if(t){this.Xut=t;const s=new Map;for(const i of this.Xut.flowchartJsonObjects){const e=i.flowchartTag;if(this.zut.has(e)){const h=this.zut.get(e);h.Y9(i),s.set(e,h)}else{const n=this.Out(i.flowchartName,i.startNodeTag,i.flowchartTag,null,!1,i.pluginUID);n.Y9(i),s.set(i.flowchartTag,n)}}for(const[r,o]of this.zut.entries())s.has(r)||o.tn();this.zut.clear(),this.zut=s,this.Xc.E$()?this.Xc.Pf().addEventListener("afterload",this.$ut):this.mY()}}mY(){this.Xc.Pf().removeEventListener("afterload",this.$ut);const t=this.zut.get(this.Xut.currentFlowchartTag);t&&this.tut(t,!0),this.Xut=null}}}{const Yr=self.Ds;Yr.ult=class{constructor(){this.tct=new Map}tn(){for(const t of this.tct.values())t.tn();this.tct.clear(),this.tct=null}tc(t){const s=new Yr.sct(t),i=s.jc();this.tct.set(i,s)}Ks(t){return this.tct.get(t)}flt(){return!!this.tct.size}static ict(t,s,i,e){if(s)for(const h of s){const n=new i(h,e);t.push(n)}}}}{const Zr=self.Ds;Zr.sct=class{constructor(t){this.nn=t[0],this.ect=new Zr.hct(t[1],this)}tn(){this.ect.tn(),this.ect=null}nct(){return this.ect}Nlt(t){return this.ect.Nlt(t)}fut(t){return this.ect.fut(t)}But(){return this.ect.But()}jc(){return this.nn}}}{const Kr=self.Ds;class Qr{constructor(t,s){this.ect=s,this.hf=t[7],this.rct=t[0],this.kg=t[1],this.kg?this.TQ=this.kg.trim().split(" ").map(t=>t.trim()):this.TQ=[],this.oct=t[2],this.lct=null,this.uct=null,"dictionary"===this.hf&&(this.lct=t[3],this.uct=t[4]),this.cct=t[6],this.fct=null,this.dct=null,this.pct=null,"reference"===this.hf&&(this.fct=t[8],this.dct=t[9],this.pct=t[10]),this.mct=new Kr.gct(t[5],this)}tn(){this.ect=null}nct(){return this.ect}hut(){return this.mct}vlt(){return this.rct}sW(){return this.kg}gW(){return this.TQ}rW(t){if(!this.TQ)return!1;if(!this.TQ.length)return!1;const s=Kr.dlt.ttt(t);return!(!s||!s.length)&&s.every(Kr.dlt.itt,this.TQ)}yct(){return this.cct}zlt(){return this.oct}wct(){return this.lct}Sct(){return this.uct}Xx(){return this.hf}Cut(){return this.fct}Aut(){return this.dct}Fut(){return this.pct}}Kr.hct=class{constructor(t,s){this.ylt=s,this.bct=[],this.vct=new Map,this.Mct=new Map,this.xct=null,Kr.ult.ict(this.bct,t,Qr,this);for(const i of this.bct){const e=i.vlt(),h=i.sW(),n=i.gW(),r=i.yct();if(this.vct.set(e,i),h)for(const a of n)this.Mct.has(a)||this.Mct.set(a,new Set),this.Mct.get(a).add(i);r&&(this.xct=i);const o=i.hut();for(const l of o.Gct()){const u=l.vlt();this.vct.set(u,l)}}}tn(){this.ylt=null;for(const t of this.bct)t.tn();Kr.Pr(this.bct),this.bct=null}Llt(){return this.ylt}Nlt(t){return this.vct.get(t)}fut(t){if(!t||!t.length)return null;const i=[];for(const e of t.trim().split(" ")){let t=this.Mct.get(e.trim())??new Set;if(0===t.size)return null;i.push(t)}const s=i.reduce((t,s)=>s.size<t.size?s:t);return[...s].filter(s=>i.every(t=>t.has(s)))[0]}But(){return this.xct}*Tct(){for(const t of this.bct)yield t}}}{const to=self.Ds;class so{constructor(t,s){this.mct=s,this.rct=t[0],this.nn=t[1],this.fht=t[2],this._ct=t[3]}tn(){this.mct=null}hut(){return this.mct}vlt(){return this.rct}jc(){return this.nn}Zit(){return this.fht}uut(){return this._ct}}to.gct=class{constructor(t,s){this.Ict=s,this.Cct=[],this.Ect=new Map,to.ult.ict(this.Cct,t,so,this);for(const i of this.Cct)this.Ect.set(i.jc(),i)}tn(){this.Ict=null;for(const t of this.Cct)t.tn();to.Pr(this.Cct),this.Cct=null}Rct(){return this.Ict}eut(){return this.Cct.length}but(){return this.Cct}Nut(t){return this.Ect.get(t)}*Gct(){for(const t of this.Cct)yield t}}}{const io=self.Ds;io.Pct=class extends io.Zh{constructor(t){super(),this.Act=t,this.Fct=[],this.Fct.push(io.Qh(io.Dct,this)),this.Lg=0,this.Oct=this.Fct[0]}tn(){for(const t of this.Fct)t.tn();io.Pr(this.Fct),this.Oct=null,this.Act=null}cN(){return this.Act}yk(){return this.Oct}Lct(){return this.Fct[this.Lg-1]}Uu(){this.yk().Uu()}kct(){const t=this.Fct,s=++this.Lg;if(s===t.length){const i=io.Qh(io.Dct,this);t.push(i),this.Oct=i}else{const e=t[s];e.Kf(),this.Oct=e}}Nct(){const t=this.Fct,s=++this.Lg,i=(s===t.length&&t.push(io.Qh(io.Dct,this)),t[s]);i.y0(t[s-1]),this.Oct=i}P8(){this.Oct=this.Fct[--this.Lg]}Bct(i){const e=this.Fct;for(let t=0,s=e.length;t<s;++t)e[t].Bct(i)}}}{const eo=self.Ds;eo.Dct=class extends eo.Zh{constructor(t){super(),this.Fct=t,this.Act=this.Fct.cN(),this.Wct=this.Act.GO().QF(),this.jct=!0,this.S7=[],this.Vct=[]}tn(){this.Hct(),this.Fct=null,this.Act=null,this.Wct=null}Hct(){eo.Pr(this.S7),eo.Pr(this.Vct)}cN(){return this.Act}Uct(){return this.jct}zct(){return this.jct?!!this.Act.Sk():!!this.S7.length}gk(){return this.jct?this.Act.gk():this.S7}Jct(){return!!this.Vct.length}qct(){return this.Vct}$ct(){const t=this.gk();return t.length?t:this.Vct}Kf(){this.jct=!0,eo.Pr(this.Vct)}Uu(){this.jct=!0}y0(t){t.Uct()?this.Kf():(this.jct=!1,eo.Or(this.S7,t.S7),eo.Pr(this.Vct))}Xct(t){this.S7.push(t)}Yct(t){this.Vct.push(t)}Zct(t){this.jct=!!t}Kct(){return this.S7}Qct(){return this.Vct}tft(t){this.jct=!1,eo.Pr(this.S7),this.S7.push(t)}ift(t){this.jct=!1,eo.Or(this.S7,t)}eft(t){this.jct=!1,eo.Pr(this.S7);for(const s of t)this.S7.push(s)}hft(t,s){for(const i of s)t.has(i)||this.Vct.push(i)}nft(t){for(const s of t)this.S7.push(s);eo.Wr(this.Vct,t)}rft(){eo.Pr(this.Vct)}oft(t){if(t)if(this.Wct.w8().JF().aft()){this.Uct()&&(eo.Pr(this.S7),eo.Or(this.Vct,t.cN().gk()),this.jct=!1);const s=this.Vct.indexOf(t);-1!==s&&(this.S7.push(this.Vct[s]),this.Vct.splice(s,1))}else this.tft(t)}Bct(t){eo.Wr(this.S7,t),eo.Wr(this.Vct,t)}}}{const ho=self.Ds;ho.lft=class extends ho.Zh{constructor(t){super(),this.uft=t,this.Xc=this.uft.GO(),this.Fct=[],this.Fct.push(ho.Qh(ho.cft,this,null)),this.Lg=0,this.fft=[]}tn(){for(const t of this.Fct)t.tn();ho.Pr(this.Fct),ho.Pr(this.fft),this.uft=null,this.Xc=null}WF(){return this.uft}GO(){return this.Xc}w8(){return this.Fct[this.Lg]}dft(){return this.Fct}pft(){return this.Lg}S8(t){const s=this.Fct,i=++this.Lg;if(i===s.length){const e=ho.Qh(ho.cft,this,t);return s.push(e),e}{const h=s[i];return h.Kf(t),h}}P8(){--this.Lg}mft(t){this.fft.push(t)}gft(){this.fft.pop()}KF(){const t=this.fft;return 0===t.length?null:t.at(-1)}}}{const no=self.Ds;no.cft=class extends no.Zh{constructor(t,s){super(),this.Fct=t,this.Xc=this.Fct.GO(),this.yft=s,this.wft=0,this.Sft=0,this.bft=!1,this.vft=!1,this.Mft=null,this.xft=0,this.Gft=0,this.Tft=null}tn(){this.Kf(null),this.Fct=null,this.Xc=null}Kf(t){this.yft=t,this.wft=0,this.Sft=0,this.bft=!1,this.vft=!1,this.Tft=null}_ft(t,s){this.yft=t,this.wft=0,this.Sft=s}Ift(){this.wft=0,this.Sft=0}JF(){return this.yft}Cft(t){this.yft=t}Eft(){return this.wft}Rft(t){this.wft=t}Pft(){return this.Sft}Aft(t){this.Sft=t}Fft(t){this.bft=!!t}Dft(){return this.bft}Oft(t){this.vft=!!t}Lft(){return this.vft}kft(t){this.Mft=t}Nft(){return this.Mft}Bft(t,s){this.xft=t,this.Gft=s}tD(){return this.xft}sD(t){this.Gft=t}Wft(){return this.Gft}jft(){const t=this.yft;return!!t.Vft()||this.wft<t.Hft()-1&&!!t.y8().length}Uft(t){this.Tft=t}zft(){return this.Tft}}}{const ro=self.Ds;ro.Jft=class extends ro.Zh{constructor(t){super(),this.uft=t,this.Xc=this.uft.GO(),this.Fct=[],this.Lg=-1,this.Oct=null,this.qft=[]}tn(){ro.Pr(this.Fct),this.uft=null,this.Xc=null}$ft(t){this.qft=t;const s=this.qft.slice(0);this.Fct.push(s),this.Lg=0,this.Oct=s}WF(){return this.uft}GO(){return this.Xc}Xft(){return this.Oct}S8(){const t=++this.Lg,s=this.Fct;t===s.length?s.push(this.qft.slice(0)):ro.Or(s[t],this.qft),this.Oct=s[t]}P8(){this.Oct=this.Fct[--this.Lg]}}}{const oo=self.Ds;oo.Yft=class extends oo.Zh{constructor(t){super(),this.uft=t,this.Xc=this.uft.GO(),this.Fct=[],this.Lg=-1}tn(){oo.Pr(this.Fct),this.uft=null,this.Xc=null}WF(){return this.uft}GO(){return this.Xc}Zft(){return 0<=this.Lg}Xft(){return this.Fct[this.Lg]}S8(){if(++this.Lg,this.Lg===this.Fct.length){const t=oo.Qh(oo.Kft,this);return this.Fct.push(t),t}{const s=this.Fct[this.Lg];return s.Kf(),s}}P8(){--this.Lg}Qft(s){const i=this.Fct;for(let t=this.Lg;0<=t;--t){const e=i[t];if(e.jc()===s)return e}return null}t0t(){return this.Fct.slice(0,this.Lg+1)}}}{const ao=self.Ds;ao.Kft=class extends ao.Zh{constructor(t){super(),this.s0t=t,this.nn="",this.Lg=0,this.i0t=!1,this.e0t=NaN}Kf(){this.nn="",this.Lg=0,this.i0t=!1,this.e0t=NaN}v8(t){this.nn=t}jc(){return this.nn}I8(t){this.Lg=t}lF(){return this.Lg}hW(){this.i0t=!0}E8(){return this.i0t}h0t(t){this.e0t=t}n0t(){return this.e0t}}}{const lo=self.Ds;lo.r0t=class extends lo.Zh{constructor(){super(),this.Fct=[],this.Lg=-1}tn(){lo.Pr(this.Fct)}Xft(){return this.Fct[this.Lg]}S8(){if(++this.Lg,this.Lg!==this.Fct.length)return this.Fct[this.Lg];{const t=[];return this.Fct.push(t),t}}P8(){--this.Lg}}}{let t=function(t,s){return t.lF()-s.lF()},n=function(i,e){for(let t=0,s=i.length;t<s;++t)if(i[t]!==e[t])return!1;return!0};t,n;const x=self.Ds;x.o0t=class extends x.Zh{constructor(t){super(),this.Xc=t,this.a0t=[],this.l0t=new Map,this.u0t=[],this.c0t=new Map,this.f0t=new Map,this.d0t=new Map,this.p0t=new Map,this.m0t=new Map,this.g0t=new Map,this.y0t=0,this.w0t=[],this.S0t=[],this.b0t=[],this.v0t=new Map,this.M0t=new Map,this.Wct=x.Qh(x.lft,this),this.x0t=x.Qh(x.Jft,this),this.s0t=x.Qh(x.Yft,this),this.G0t=[],this.T0t=[],this._0t=[],this.I0t=0,this.C0t=0,this.E0t=0,this.R0t=[],this.P0t=[],this.A0t=[],this.F0t=new Map,this.D0t=new Map,self.c3_callFunction=(t,s)=>this.O0t(t,s)}tn(){this.Z$(),this.Wct.tn(),this.Wct=null,this.x0t.tn(),this.x0t=null,x.Pr(this.T0t),x.Pr(this._0t),this.Xc=null,x.Pr(this.a0t),this.l0t.clear()}BM(t){const s=x.Qh(x.L0t,this,t);this.a0t.push(s),this.l0t.set(s.jc().toLowerCase(),s)}k0t(t){this.G0t.push(t)}N0t(){for(const t of this.M0t.values())t.B0t();for(const s of this.v0t.values())s.N0t();for(const i of this.M0t.values())i.N0t();for(const e of this.a0t)e.N0t();for(const h of this.a0t)h.w$();for(const n of this.G0t)n.N0t(!1);x.Pr(this.G0t),this.x0t.$ft(this.b0t)}GO(){return this.Xc}y$(t){return this.l0t.get(t.toLowerCase())||null}W0t(t){this.u0t.push(t),this.c0t.set(t.j0t(),t)}V0t(t){this.f0t.set(t.Pz(),t)}H0t(t){this.d0t.set(t.Pz(),t)}U0t(t){this.p0t.set(t.Pz(),t)}z0t(t){switch(t.J0t()){case 0:this.v0t.set(t.q0t().toLowerCase(),t);break;case 1:this.M0t.set(t.q0t().toLowerCase(),t)}}$0t(t){this.g0t.set(t.Pz(),t),(t.lz()?this.w0t:this.S0t).push(t)}X0t(i){2<=i.length&&i.sort(t);let e=this.m0t.get(i.length);e||(e=[],this.m0t.set(i.length,e));for(let t=0,s=e.length;t<s;++t){const h=e[t];if(n(i,h))return h}return e.push(i),i}Y0t(t){return this.b0t.push(t.Z0t()),this.y0t++}QF(){return this.Wct}K0t(){return this.QF().w8()}JF(){return this.K0t().JF()}Q0t(){const t=this.K0t(),s=t.JF();return s.t1t(t.Eft())}s1t(){const t=this.K0t(),s=t.JF();return s.i1t(t.Pft())}e1t(){return this.x0t}b8(){return this.s0t}h1t(t){const s=[];for(t=t.n1t();t;)x.Vh(s,t.r1t()),t=t.n1t();return s}o1t(t){const s={};for(const i of this.h1t(t))s[i.a1t()]=i.l1t();return Object.create(Object.prototype,s)}u1t(t){return this.g0t.get(t)||null}c1t(t){return this.f0t.get(t)||null}f1t(t){return this.d0t.get(t)||null}d1t(t){return this.p0t.get(t)||null}jF(t){return this.v0t.get(t.toLowerCase())||null}p1t(t,s){let i=this.M0t.get((t.jc()+"."+s).toLowerCase());if(i)return i;if(!t.xz())for(const e of t.m1t())if(i=this.M0t.get((e.jc()+"."+s).toLowerCase()))return i;return null}g1t(){return this.w0t}y1t(){return this.S0t}w1t(t){for(const s of this.w0t)s.S1t();if(t)for(const i of this.S0t)i.j2()&&i.S1t()}b1t(t){return this.c0t.get(t.toLowerCase())||null}v1t(t){const s=this.f0t.get(t);return s&&s.M1t()?s:null}x1t(){return this.u0t}G1t(){for(const t of this.u0t)t.T1t()}_1t(){for(const t of this.a0t)t.I1t()}C1t(t){this._1t(),this.I0t++;for(const s of t.LX()){const i=s.zq();i&&(this.Xc.E1t(s),i.f_(),this.Xc.R1t())}this.I0t--}async P1t(t){this._1t(),this.I0t++;for(const s of this.A1t(t))await this.Xc.F1t(s);this.I0t--}*A1t(t){for(const s of t.LX()){const i=s.zq();i&&(this.Xc.E1t(s),yield*i.D1t(),this.Xc.R1t())}}O1t(t,s,i,e){let h=!1;if(!t.OD())return this.L1t(s,i,e);this.C0t++;for(const n of t.LX()){const r=n.zq();if(r){this.Xc.E1t(n);for(const a of r.k1t()){const l=a.O1t(s,i,e);h=h||l}const o=r.O1t(s,i,e);h=h||o,this.Xc.R1t()}}return this.C0t--,h}*N1t(t,s,i,e){let h=!1;if(!t.OD())return this.L1t(s,i,e);this.C0t++;for(const n of t.LX()){const r=n.zq();if(r){this.Xc.E1t(n);for(const a of r.k1t()){const l=yield*a.N1t(s,i,e);h=h||l}const o=yield*r.N1t(s,i,e);h=h||o,this.Xc.R1t()}}return this.C0t--,h}L1t(t,s,i){return this.T0t.push([t,s,i]),!1}B1t(t,s,i){let e=null,h=new Promise(t=>e=t);return this._0t.push([t,s,i,e]),h}*W1t(){if(this.Xc.j1t())throw new Error("should not be in breakpoint");const t=this.Xc.ND();for(;this._0t.length;){const[s,i,e,h]=this._0t.shift(),n=yield*this.N1t(t,s,i,e);h(n)}}async V1t(){for(const t of this.W1t())await this.Xc.F1t(t)}H1t(t,i,e,h){let n=!1,s=t.OD(),r=s.zq();if(r){this.C0t++,this.Xc.E1t(s);const o=r.k1t();for(let t=0,s=o.length;t<s;++t){const l=o[t].H1t(i,e,h);n=n||l}const a=r.H1t(i,e,h);return n=n||a,this.Xc.R1t(),this.C0t--,n}}*U1t(t,i,e,h){let n=!1,s=t.OD(),r=s.zq();if(r){this.C0t++,this.Xc.E1t(s);const o=r.k1t();for(let t=0,s=o.length;t<s;++t){const l=yield*o[t].U1t(i,e,h);n=n||l}const a=yield*r.U1t(i,e,h);return n=n||a,this.Xc.R1t(),this.C0t--,n}}z1t(){return this.C0t}J1t(){return 0<this.z1t()}q1t(){return++this.C0t}$1t(){--this.C0t}X1t(){return 0<this.I0t}Tk(){return this.X1t()||this.J1t()}W$(t){for(const[s,i,e]of this.T0t)this.O1t(t,s,i,e);x.Pr(this.T0t)}xk(t){t?this.E0t++:this.E0t--}SN(){return 0<this.E0t}Y1t(i){for(let t=0,s=i.length;t<s;++t)i[t].Z1t().Uu()}K1t(i){for(let t=0,s=i.length;t<s;++t)i[t].Z1t().kct()}G8(i){for(let t=0,s=i.length;t<s;++t)i[t].Z1t().Nct()}_8(i){for(let t=0,s=i.length;t<s;++t)i[t].Z1t().P8()}qF(s){const i=new Set,e=this.Wct.dft(),h=this.Wct.pft();for(let t=0;t<=h;++t){const n=e[t].zft();if(n)for(const r of n)s&&s.has(r)||i.add(r)}return i}Q1t(t){const s=new Set([...t]),i=this.qF(s);if(0<i.size){for(const e of i)e.Z1t().kct();return[...i]}return null}tdt(){const t=x.Qh(x.sdt,this);return this.R0t.push(t),t}idt(){return this.R0t}edt(){if(this.R0t.length){let i=this.K0t(),e=!1;this.I0t++;for(let t=0,s=this.R0t.length;t<s;++t){const h=this.R0t[t];h.hdt()&&h.ndt(i),h.rdt()&&(e=!0)}e&&(this.odt(),i.Kf(null)),this.I0t--}}async adt(){if(this.R0t.length){let i=this.K0t(),e=!1;this.I0t++;for(let t=0,s=this.R0t.length;t<s;++t){const h=this.R0t[t];h.hdt()&&await h.ldt(i),h.rdt()&&(e=!0)}e&&(this.odt(),i.Kf(null)),this.I0t--}}odt(){const t=x.Br(this.R0t,t=>t.rdt());for(const s of t)s.tn()}Z$(){for(const t of this.R0t)t.tn();x.Pr(this.R0t)}udt(t){for(const s of this.R0t)s.Bct(t);for(const i of t){const e=this.D0t.get(i);if(this.D0t.delete(i),e)for(const{resolve:h}of e.cdt.values())h(!0)}}fdt(t){this.P0t.push({promise:t,ddt:this.z1t()})}pdt(){x.Pr(this.P0t)}mdt(){const s=this.z1t();this.P0t=this.P0t.filter(t=>t.ddt<=s)}gdt(){const t=Promise.all(this.P0t.map(t=>t.promise));return this.P0t=[],t}iD(t){const s=t.toLowerCase();this.A0t.push(s),this.Xc.YN(x.B$.N$.k$.ydt,null),this.A0t.pop();for(const e of this.Xc.WF().idt())e.wdt()&&e.Sdt()===s&&e.bdt();const i=this.F0t.get(s);i&&(i.resolve(),this.F0t.delete(s))}hD(t){const i=t.toLowerCase(),s=this.F0t.get(i);if(s)return s.promise;{let s=null,t=new Promise(t=>s=t);return this.F0t.set(i,{promise:t,resolve:s}),t}}vdt(){if(0===this.A0t.length)throw new Error("not in a signal");return this.A0t.at(-1)}Mdt(t){let s=this.D0t.get(t);return s||(s={xdt:[],cdt:new Map},this.D0t.set(t,s)),s}LN(t,s){const i=this.Mdt(t),e=s.toLowerCase();i.xdt.push(e),this.Xc.YN(t.hk().Tdt().k$.Gdt,t),i.xdt.pop();for(const n of this.Xc.WF().idt())n._dt()&&n.Sdt()===e&&n.Idt(t);const h=i.cdt.get(e);h&&(h.resolve(!1),i.cdt.delete(e)),0===i.xdt.length&&0===i.cdt.size&&this.D0t.delete(t)}kN(t,s){const i=this.Mdt(t),e=s.toLowerCase(),h=i.cdt.get(e);if(h)return h.promise;{let s=null,t=new Promise(t=>s=t);return i.cdt.set(e,{promise:t,resolve:s}),t}}Cdt(t){const s=this.Mdt(t);if(s&&0!==s.xdt.length)return s.xdt.at(-1);throw new Error("not in a signal")}X9(){return{groups:this.Edt(),cnds:this.Rdt(),acts:this.Pdt(),vars:this.Adt(),waits:this.Fdt()}}Y9(t){this.Ddt(t.groups),this.Odt(t.cnds),this.Ldt(t.acts),this.kdt(t.vars),this.Ndt(t.waits)}Edt(){const t={};for(const s of this.x1t())t[s.Pz().toString()]=s.Bdt();return t}Ddt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.v1t(e);h&&h.Wdt(i)}}Rdt(){const t={};for(const[s,i]of this.d0t){const e=i.X9();e&&(t[s.toString()]=e)}return t}Odt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,n]of this.d0t)n.Y9(s.get(h)||null)}Pdt(){const t={};for(const[s,i]of this.p0t){const e=i.X9();e&&(t[s.toString()]=e)}return t}Ldt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,n]of this.p0t)n.Y9(s.get(h)||null)}Adt(){const t={};for(const[s,i]of this.g0t)i.jdt()||!i.lz()&&!i.j2()||(t[s.toString()]=i.Zit());return t}kdt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.u1t(e);h&&h.Let(i)}}Fdt(){return this.R0t.filter(t=>!t.Vdt()).map(t=>t.X9())}Ndt(t){this.Z$();for(const s of t){const i=x.sdt.Hdt(this,s);i&&this.R0t.push(i)}}Udt(){return[...this.Xc.ND().LX()].map(t=>t.zq()).filter(t=>t).map(t=>t.zdt())}Jdt(t){for(;t;){const s=t.n1t();if(s instanceof x.qdt)return s;t=s}return null}O0t(t,s){Array.isArray(s)||(s=[]);const i=this.jF(t.toLowerCase());if(!i)return null;if(!i.ju())return i.VF();const e=i.$dt();if(s.length<e.length)for(s=s.slice(0);s.push(e[s.length].Z0t()),s.length<e.length;);const h=i.UF();return h.$F(h.zF(),!1,i.YF(),i.VF(),...s)}}}{const uo=self.Ds;uo.L0t=class extends uo.Zh{constructor(t,s){super(),this.uft=t,this.Xc=t.GO(),this.nn=s[0],this.Xdt=[],this.Ydt=new Map,this.Zdt=new Map,this.Kdt=new Map,this.Qdt=!1,this.tpt=[],this.spt=[],this.ipt=new Set;for(const i of s[1])this.ept(i,null,this.Xdt);this.hpt=this.Xc.yX()?{type:"sheet",name:this.nn,npt:0,children:[]}:null}tn(){this.uft=null,this.Xc=null}ept(t,s,i){switch(t[0]){case 0:case 3:this.rpt(t,s,i);break;case 1:this.opt(t,s,i);break;case 2:this.apt(t,s,i);break;case 4:this.lpt(t,s);break;case 5:this.upt(t,s,i);break;case 6:this.cpt(t,s);break;default:throw new Error("invalid event type")}}rpt(t,s,i){const e=uo.fpt.BM(this,s,t);if(e.aft()){i.push(e);const h=e.dpt();for(let t=0,s=h.length;t<s;++t)h[t].ppt()&&this.mpt(e,t)}else e.ppt()?this.mpt(e,0):i.push(e)}lpt(t,s){const i=uo.qdt.gpt(this,s,t);this.uft.z0t(i)}cpt(t,s){const i=uo.qdt.ypt(this,s,t);this.uft.z0t(i)}opt(t,s,i){const e=uo.wpt.BM(this,s,t);i.push(e)}apt(t,s,i){const e=uo.Spt.BM(this,s,t);i.push(e)}upt(t,s,i){const e=uo.bpt.BM(this,s,t);i.push(e)}mpt(h,n){h.aft()||this.uft.k0t(h);const r=h.t1t(n),o=r.vpt(),a=r.cN();if(r.Mpt()){let t=this.Zdt.get(a),s=(t||(t=new Map,this.Zdt.set(a,t)),r.xpt().toLowerCase()),i=t.get(o),e=(i||(i=new Map,t.set(o,i)),i.get(s));e||(e=[],i.set(s,e)),e.push([h,n])}else{let t=this.Ydt.get(a),s=(t||(t={Gpt:new Map,Tpt:new Map},this.Ydt.set(a,t)),r.o6()),i,e=(s?(i=t.Tpt.get(s))||(i=new Map,t.Tpt.set(s,i)):i=t.Gpt,i.get(o));e||(e=[],i.set(o,e)),e.push([h,n])}}N0t(){const i=this.Xdt;for(let t=0,s=i.length;t<s;++t){const e=t<s-1&&i[t+1]instanceof uo.fpt&&i[t+1]._pt();i[t].N0t(e)}}Ipt(t){this.tpt.push(t)}w$(){uo.Pr(this.spt),this.Cpt(this),this.ipt.clear()}Cpt(t){const s=t.spt,i=t.ipt;for(const e of this.tpt){const h=e.Ept();e.Rpt()&&t!==h&&!i.has(h)&&(i.add(h),h.Cpt(t),s.push(h))}}k1t(){return this.spt}WF(){return this.uft}GO(){return this.Xc}jc(){return this.nn}Ppt(t,s){this.Kdt.set(s,t)}Apt(t){return this.Kdt.get(t)||null}I1t(){this.Qdt=!1}f_(){if(!this.Qdt){const t=this.Xc,s=t.Fpt(),i=s?performance.now():0,e=(this.Qdt=!0,this.WF()),h=e.K0t();for(const n of this.Xdt)n.f_(h),e.Y1t(n.y8()),e.pdt(),t.Ik();h.Kf(null),s&&(this.hpt.npt+=performance.now()-i)}}*D1t(){if(!this.Qdt){this.Qdt=!0;const t=this.Xc,s=this.WF(),i=s.K0t();for(const e of this.Xdt)yield*e.D1t(i),s.Y1t(e.y8()),s.pdt(),t.Ik();i.Kf(null)}}O1t(e,h,n){if(!h)return this.Dpt(e,h,null,null);{let t=h.cN(),s=!1,i=this.Dpt(e,h,t,n);s=s||i;for(const r of t.m1t())i=this.Dpt(e,h,r,n),s=s||i}}Dpt(t,s,i,e){const h=this.Ydt.get(i);if(!h)return!1;const n=e?h.Tpt.get(e):h.Gpt;if(!n)return!1;const r=n.get(t);if(!r)return!1;let o=!1;for(const[a,l]of r){const u=this.Opt(s,a,l);o=o||u}return o}*N1t(e,h,n){if(!h)return yield*this.Lpt(e,h,null,null);{let t=h.cN(),s=!1,i=yield*this.Lpt(e,h,t,n);s=s||i;for(const r of t.m1t())i=yield*this.Lpt(e,h,r,n),s=s||i}}*Lpt(t,s,i,e){const h=this.Ydt.get(i);if(!h)return!1;const n=e?h.Tpt.get(e):h.Gpt;if(!n)return!1;const r=n.get(t);if(!r)return!1;let o=!1;for(const[a,l]of r){let t;t=a.kpt()?this.Opt(s,a,l):yield*this.Npt(s,a,l),o=o||t}return o}H1t(t,s,i){const e=s.cN(),h=this.Zdt.get(e);if(!h)return!1;const n=h.get(t);if(!n)return!1;const r=n.get(i);if(!r)return!1;let o=!1;for(let t=0,s=r.length;t<s;++t){const a=r[t],l=this.Opt(null,a[0],a[1]);o=o||l}return o}*U1t(t,s,i){const e=s.cN(),h=this.Zdt.get(e);if(!h)return!1;const n=h.get(t);if(!n)return!1;const r=n.get(i);if(!r)return!1;let o=!1;for(let h=0,t=r.length;h<t;++h){let t=r[h],s=t[0],i=t[1],e;e=s.kpt()?this.Opt(null,s,i):yield*this.Npt(null,s,i),o=o||e}return o}Opt(t,s,i){let e=this.Xc,h=this.uft,n=h.JF(),r=h.QF(),o=h.z1t(),a=!1;n&&h.K1t(n.zF()),h.K1t(s.zF());const l=1<o,u=(l&&h.e1t().S8(),r.S8(s));if(t){const f=s.dpt()[i].cN(),d=f.yk();d.tft(t),t.xN()&&t.Bpt()}let c=!0;if(s.iB()){const p=s.Wpt();for(let t=0,s=p.length;t<s;++t)if(!p[t].jpt(u)){c=!1;break}}return c&&(s.aft()?s.Vpt(u,i):s.f_(u),a=u.Dft()),r.P8(),l&&h.e1t().P8(),h._8(s.zF()),n&&h._8(n.zF()),n||1!==o||(h.pdt(),h.SN())||e.Ik(),a}*Npt(t,s,i){let e=this.Xc,h=this.uft,n=h.JF(),r=h.QF(),o=h.z1t(),a=!1;n&&h.K1t(n.zF()),h.K1t(s.zF());const l=1<o,u=(l&&h.e1t().S8(),r.S8(s));if(t){const f=s.dpt()[i].cN(),d=f.yk();d.tft(t),t.xN()&&t.Bpt()}let c=!0;if(s.iB()){const p=s.Wpt();for(let t=0,s=p.length;t<s;++t)if(!(yield*p[t].Hpt(u))){c=!1;break}}return c&&(s.aft()?yield*s.Upt(u,i):yield*s.D1t(u),a=u.Dft()),r.P8(),l&&h.e1t().P8(),h._8(s.zF()),n&&h._8(n.zF()),n||1!==o||(h.pdt(),h.SN())||e.Ik(),a}zdt(){return this.hpt}}}{let u=function(t,s){return!0};u;const co=self.Ds,fo=[];function*W(t,s){return!0}co.fpt=class extends co.Zh{constructor(t,s,i){super(),this.lq=t,this.Xc=t.GO(),this.zpt=s,this.Jpt=null,this.Wct=this.Xc.WF().QF(),this.qpt=[],this.$pt=[],this.Xpt=!1,this.Ypt=!1,this.Zpt=!1,this.Kpt=!1,this.Qpt=!!i[2],this.tmt=!1,this.smt=null,this.imt=[],this.ght=[],this.emt=[],this.hmt=u,this.nmt=W,this.rmt=!1,this.omt=!1,this.amt="",this.lmt=!1,this.umt=null,this.hpt=null,this.K7=i[4],this.cmt=i[5],this.lq.Ppt(this,this.cmt),this.fmt=this.Xc.yX()?{dmt:i[3][0],pmt:i[3][1],mmt:!1,gmt:!1,ymt:!1,wmt:!1}:null,this.WF().V0t(this),3===i[0]&&this.Smt(i[1]);let e=0;for(const h of i[6]){const n=co.bmt.BM(this,h,e++);this.imt.push(n),this.vmt(n.cN())}e=0;for(const r of i[7]){const o=co.Mmt.BM(this,r,e++);this.ght.push(o)}if(9===i.length){const a=i[8];for(const l of a)this.lq.ept(l,this,this.emt)}this.imt.length&&(this.tmt=null===this.imt[0].cN()&&this.imt[0].vpt()===co.B$.N$.k$.xmt),0===this.imt.length&&(this.imt=fo),0===this.ght.length&&(this.ght=fo),0===this.emt.length&&(this.emt=fo)}static BM(t,s,i){return co.Qh(co.fpt,t,s,i)}Smt(t){this.rmt=!0,this.omt=!!t[0],this.lmt=this.omt,this.amt=t[1].toLowerCase(),this.umt=[],this.WF().W0t(this),this.Xc.yX()&&(this.hpt={type:"group",name:t[1],npt:0,children:[]})}Gmt(t){this.umt.push(t)}Tmt(t,s){for(const i of t.h$().H$())s.includes(i)||s.push(i)}_mt(t,s){if(t)if(s.includes(t)||s.push(t),t.xz())for(const i of t.Imt())i.xN()&&this.Tmt(i,s);else t.xN()&&this.Tmt(t,s)}vmt(t){this._mt(t,this.qpt)}Cmt(t){this._mt(t,this.$pt)}Emt(){this.qpt=this.Xc.Mz()}N0t(t){this.Kpt=!!t,this.Rmt(),this.Pmt();for(const s of this.imt)s.N0t();if(0<this.ght.length){let t=!1;for(const e of this.ght)e.N0t(),e.Amt()&&(t=!0);t?(this.hmt=this.Fmt,this.nmt=this.Dmt):(this.hmt=this.Omt,this.nmt=this.Lmt)}const i=this.emt;for(let t=0,s=i.length;t<s;++t){const h=t<s-1&&i[t+1]instanceof co.fpt&&i[t+1]._pt();i[t].N0t(h)}this.fmt&&this.kmt(),this.hpt&&this.Nmt().zdt().children.push(this.hpt)}zdt(){return this.hpt}Nmt(){let t=this.iB();for(;t;){if(t.M1t())return t;t=t.iB()}return this.lq}kmt(){const t=this.fmt;t.mmt=this.imt.every(t=>t.kpt()),t.gmt=this.ght.every(t=>t.kpt()),t.ymt=this.emt.every(t=>t.kpt()),t.wmt=t.mmt&&t.gmt&&t.ymt}Bmt(){let t=this;for(;t.kmt(),t=t.iB(););}Rmt(){if(this.M1t()){let t=this.iB();for(this.Zpt=!0;t;){if(!t.M1t()){this.Zpt=!1;break}t=t.iB()}}}Wmt(){const t=this.Xc.Mz();if(this.qpt===t)this.$pt=t;else{this.$pt=co.Hr(this.qpt);let t=this.iB();for(;t;){for(const i of t.qpt)this.Cmt(i);t=t.iB()}const s=this.WF();this.qpt=s.X0t(this.qpt),this.$pt=s.X0t(this.$pt)}}Pmt(){if(this.jmt()){this.smt=[];let t=this.iB();for(;t;)this.smt.push(t),t=t.iB();this.smt.reverse()}}Vmt(){this.Ypt=!0,this.zpt&&this.zpt.Vmt()}Vft(){return this.Ypt}y8(){return this.qpt}zF(){return this.Xpt||(this.Xpt=!0,this.Wmt()),this.$pt}Hmt(t){return this.qpt.includes(t)}Wpt(){return this.smt}zq(){return this.lq}WF(){return this.lq.WF()}GO(){return this.Xc}iB(){return this.zpt}Umt(t){this.Jpt=t}n1t(){return this.Jpt||this.zpt}zmt(){return this.cmt}Jmt(){return this.fmt&&this.fmt.pmt}qmt(){return this.Jmt()&&this.fmt.dmt}$mt(t){this.fmt.dmt=!!t,this.Bmt()}M1t(){return this.rmt}Xmt(){return this.Zpt}_pt(){return this.tmt}Ymt(){return this.Kpt}j0t(){return this.amt}Bdt(){return this.lmt}T1t(){this.Wdt(this.omt)}Wdt(t){if(t=!!t,!this.rmt)throw new Error("not a group");if(this.lmt!==t){this.lmt=t;for(const s of this.umt)s.Zmt();if(this.umt.length){const i=this.Xc.sO(),e=i.zq();e&&e.w$()}}}Pz(){return this.K7}aft(){return this.Qpt}ppt(){return this.imt.length&&this.imt[0].ppt()}Kmt(){return this.Jpt&&this.Jpt instanceof co.qdt}jmt(){return this.Kmt()||this.imt.some(t=>t.ppt())}dpt(){return this.imt}Hft(){return this.imt.length}t1t(t){if((t=Math.floor(t))<0||t>=this.imt.length)throw new RangeError("invalid condition index");return this.imt[t]}Qmt(t){return this.t1t(t)}tgt(t){let s=t.lF();if(0!==s){--s;const i=t.sgt()?t.igt():t.cN();for(;0<=s;--s){const e=this.imt[s];if(i===e.cN()||e.sgt()&&e.igt()===i)return!1}}return!0}egt(){return this.ght}hgt(){return this.ght.length}i1t(t){if((t=Math.floor(t))<0||t>=this.ght.length)throw new RangeError("invalid action index");return this.ght[t]}ngt(s){s=Math.floor(s);const t=this.ght.find(t=>t.rgt()===s);if(t)return t;throw new RangeError("invalid action debug index")}ogt(t){return 0<=(t=Math.floor(t))&&t<this.ght.length}agt(){return this.emt}r1t(){return this.emt.filter(t=>t instanceof co.wpt)}jpt(i){i.Cft(this);let e=this.imt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const n=e[t];if(i.Rft(t),n.v6())throw new Error("trigger cannot be used as sub-event to a loop");if(n.f_())h=!0;else if(!this.Qpt)return!1}return!this.Qpt||h}Vpt(t,s){t.Cft(this),t.Rft(s),this.imt[s].f_()&&(this.hmt(t,0)&&this.lgt(t),t.Fft(!0))}*Hpt(i){i.Cft(this);let e=this.imt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const n=e[t];if(i.Rft(t),n.v6())throw new Error("trigger cannot be used as sub-event to a loop");if(n.kpt()?n.f_():yield*n.D1t())h=!0;else if(!this.Qpt)return!1}return!this.Qpt||h}*Upt(t,s){t.Cft(this),t.Rft(s);let i=this.imt[s];if(i.kpt()?i.f_():yield*i.D1t())(this.ugt()?this.hmt(t,0):yield*this.nmt(t,0))&&(this.cgt()?this.lgt():yield*this.fgt()),t.Fft(!0)}f_(t){t.Cft(this),this.tmt||t.Oft(!1),this.Qpt?this.dgt(t):this.pgt(t)}*D1t(t){(this.qmt()||this.Xc.mgt())&&(yield this),t.Cft(this),this.tmt||t.Oft(!1),this.Qpt?yield*this.ggt(t):yield*this.ygt(t)}dgt(i){let e=this.imt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const n=e[t];if(!n.ppt()){i.Rft(t);const r=n.f_();h=h||r}}i.Fft(h),h&&(this.hmt(i,0)&&this.lgt(i),this.Kpt)&&i.Oft(!0)}*ggt(i){let e=this.imt,h=0===e.length;for(let s=0,t=e.length;s<t;++s){const n=e[s];if(!n.ppt()){i.Rft(s);let t;t=n.kpt()?n.f_():yield*n.D1t(),h=h||t}}if(i.Fft(h),h)(this.ugt()?this.hmt(i,0):yield*this.nmt(i,0))&&(this.cgt()?this.lgt():yield*this.fgt()),this.Kpt&&i.Oft(!0)}pgt(i){const e=this.imt;for(let t=0,s=e.length;t<s;++t){const h=e[t],n=(i.Rft(t),h.f_());if(!n)return void i.Fft(!1)}i.Fft(!0),this.hmt(i,0)&&this.lgt(i),i.Dft()&&this.Kpt&&i.Oft(!0)}*ygt(i){const e=this.imt;for(let t=0,s=e.length;t<s;++t){const h=e[t];i.Rft(t);if(!(h.kpt()?h.f_():yield*h.D1t()))return void i.Fft(!1)}i.Fft(!0);(this.ugt()?this.hmt(i,0):yield*this.nmt(i,0))&&(this.cgt()?this.lgt():yield*this.fgt()),i.Dft()&&this.Kpt&&i.Oft(!0)}Omt(i,e){const h=this.ght;for(let t=e,s=h.length;t<s;++t){const n=h[t];i.Aft(t),n.f_()}return!0}*Lmt(i,e){const h=this.ght;for(let t=e,s=h.length;t<s;++t){const n=h[t];i.Aft(t),n.kpt()?n.f_():yield*n.D1t()}return!0}Fmt(i,e){const h=this.WF(),n=this.ght;for(let t=e,s=n.length;t<s;++t){const r=n[t],o=(i.Aft(t),r.f_());if(r.wgt()&&!0===o)return!1;r.Sgt()&&o instanceof Promise&&h.fdt(o)}return!0}*Dmt(i,e){const h=this.WF(),n=this.ght;for(let s=e,t=n.length;s<t;++s){const r=n[s];i.Aft(s);let t;if(t=r.kpt()?r.f_():yield*r.D1t(),r.wgt()&&!0===t)return!1;r.Sgt()&&t instanceof Promise&&h.fdt(t)}return!0}bgt(t){this.hmt(t,t.Pft())&&this.lgt()}*vgt(t){(yield*this.nmt(t,t.Pft()))&&(yield*this.fgt())}lgt(){if(this.emt.length){const t=this.M1t()&&this.Xc.Fpt(),s=t?performance.now():0,i=this.Wct,e=i.S8(this);this.Ypt?this.Mgt(e):this.xgt(e),i.P8(),t&&(this.hpt.npt+=performance.now()-s)}}Mgt(e){const h=this.rmt,n=this.Zpt,r=this.WF(),o=this.emt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.y8(),u=!n||!h&&t<i;u&&r.G8(l),a.f_(e),u?r._8(l):r.Y1t(l)}}xgt(i){const e=this.emt;for(let t=0,s=e.length;t<s;++t)e[t].f_(i)}*fgt(){if(this.emt.length){const t=this.Wct,s=t.S8(this);this.Ypt?yield*this.Ggt(s):yield*this.Tgt(s),t.P8()}}*Ggt(e){const h=this.rmt,n=this.Zpt,r=this.WF(),o=this.emt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.y8(),u=!n||!h&&t<i;u&&r.G8(l),yield*a.D1t(e),u?r._8(l):r.Y1t(l)}}*Tgt(i){const e=this.emt;for(let t=0,s=e.length;t<s;++t)yield*e[t].D1t(i)}T8(i,e){e.Ift();const h=this.imt;if(!this.aft())for(let t=i.Eft()+1,s=h.length;t<s;++t){const n=h[t],r=(e.Rft(t),n.f_());if(!r)return!1}return this.hmt(e,0)&&this.lgt(e),!0}*_gt(i,e){e.Ift();const h=this.imt;if(!this.aft())for(let t=i.Eft()+1,s=h.length;t<s;++t){const n=h[t];e.Rft(t);if(!(n.kpt()?n.f_():yield*n.D1t()))return!1}return(this.ugt()?this.hmt(e,0):yield*this.nmt(e,0))&&(this.cgt()?this.lgt():yield*this.fgt()),!0}kpt(){return!this.qmt()&&!this.Xc.mgt()&&this.fmt.wmt}ugt(){return!this.Xc.mgt()&&this.fmt.gmt}cgt(){return!this.Xc.mgt()&&this.fmt.ymt}Igt(i){if(this.iB()){const e=this.Wpt();for(let t=0,s=e.length;t<s;++t)if(!e[t].jpt(i))return!1}return!0}*Cgt(i){if(this.iB()){const e=this.Wpt();for(let t=0,s=e.length;t<s;++t)if(!(yield*e[t].Hpt(i)))return!1}return!0}Egt(t,s,i){if(0<s.length)if(i){const e=s.map(t=>t.Ks(0));t.e1t().S8(),this.Jpt.Rgt(e)}else this.Jpt.Pgt(s);else i&&t.e1t().S8()}Agt(t,s,i,e){let h,n,r=0<t.length,o=null,a=this.Xc,l=this.Wct,u=a.WF(),c=this.Jpt,f=c.Sgt(),d=u.q1t(),p=1<d;if(this.Egt(u,s,p),r&&(i?u.G8(t):u.K1t(t)),null!==e){if(e.Fgt){const g=i?e.Fgt.yk():e.Fgt.Z1t().Lct(),y=e.Dgt.yk();y.ift(g.gk()),y.rft(),i||e.Dgt.Ogt()}else if(e.Lgt){const w=e.Lgt.yk();w.ift(e.kgt),w.rft()}e.Ngt&&(o=u.Q1t(t))}const m=l.S8(this);return i&&m.Uft(t),this.Igt(m)&&(m.Cft(this),f&&([n,h]=c.Bgt()),this.pgt(m),f)&&c.Wgt(n),l.P8(),p&&u.e1t().P8(),null!==o&&u._8(o),r&&u._8(t),u.$1t(),f||u.mdt(),h}*jgt(t,s,i,e){let h,n,r=((this.qmt()||this.Xc.mgt())&&(yield this),0<t.length),o=null,a=this.Xc,l=this.Wct,u=a.WF(),c=this.Jpt,f=c.Sgt(),d=u.q1t(),p=1<d;if(this.Egt(u,s,p),r&&(i?u.G8(t):u.K1t(t)),null!==e){if(e.Fgt){const g=i?e.Fgt.yk():e.Fgt.Z1t().Lct(),y=e.Dgt.yk();y.ift(g.gk()),y.rft(),i||e.Dgt.Ogt()}else if(e.Lgt){const w=e.Lgt.yk();w.ift(e.kgt),w.rft()}e.Ngt&&(o=u.Q1t(t))}const m=l.S8(this);return i&&m.Uft(t),(yield*this.Cgt(m))&&(m.Cft(this),f&&([n,h]=c.Bgt()),yield*this.ygt(m),f)&&c.Wgt(n),l.P8(),p&&u.e1t().P8(),null!==o&&u._8(o),r&&u._8(t),u.$1t(),f||u.mdt(),h}Vgt(t,s){const i=this.zF(),e=0<i.length,h=this.Xc,n=this.Wct,r=h.WF(),o=r.q1t(),a=1<o,l=(a&&r.e1t().S8(),this.Jpt.Rgt(t),e&&(s?r.G8(i):r.K1t(i)),n.S8(this));this.Igt(l)&&(l.Cft(this),this.pgt(l)),n.P8(),a&&r.e1t().P8(),e&&r._8(i),r.$1t(),r.mdt()}*Hgt(t,s){(this.qmt()||this.Xc.mgt())&&(yield this);const i=this.zF(),e=0<i.length,h=this.Xc,n=this.Wct,r=h.WF(),o=r.q1t(),a=1<o,l=(a&&r.e1t().S8(),this.Jpt.Rgt(t),e&&(s?r.G8(i):r.K1t(i)),n.S8(this));(yield*this.Cgt(l))&&(l.Cft(this),yield*this.ygt(l)),n.P8(),a&&r.e1t().P8(),e&&r._8(i),r.$1t(),r.mdt()}$F(t,s,i,e,...h){let n,r,o=0<t.length,a=this.Xc,l=this.Wct,u=a.WF(),c=this.Jpt,f=c.Sgt(),d=u.q1t(),p=1<d,m=(p&&u.e1t().S8(),0<h.length&&this.Jpt.Rgt(h),o&&(s?u.G8(t):u.K1t(t)),l.S8(this));return m.Bft(i,e),l.mft(m),a.M8(!1),this.Igt(m)&&(m.Cft(this),f&&([r,n]=c.Bgt()),this.pgt(m),f)&&c.Wgt(r),a.M8(!0),l.P8(),l.gft(),p&&u.e1t().P8(),o&&u._8(t),u.$1t(),f||u.mdt(),n||m.Wft()}}}{let e=self.Ds,t=[],s=!1;e.bpt=class extends e.Zh{constructor(t,s,i){super();const e=t.GO(),h=t.WF(),n=(this.lq=t,this.uft=h,this.Xc=t.GO(),this.zpt=s,e.Ugt(i[1]));this.zgt=n,this.cmt=i[2],this.lq.Ppt(this,this.cmt),this.fmt=e.yX()?{dmt:i[3][0],pmt:i[3][1]}:null}static BM(t,s,i){return e.Qh(e.bpt,t,s,i)}N0t(){const t=this.zgt,s=this.Xc.WF().o1t(this);this.zgt=t.bind(null,this.Xc.PL(),s)}iB(){return this.zpt}n1t(){return this.zpt}zq(){return this.lq}zmt(){return this.cmt}Jmt(){return this.fmt&&this.fmt.pmt}qmt(){return this.Jmt()&&this.fmt.dmt}$mt(t){this.fmt.dmt=!!t}_pt(){return!1}y8(){return t}zF(){return this.zpt?this.zpt.zF():t}f_(t){t.Cft(this),this.uft.fdt(this.Jgt())}async Jgt(){try{await this.zgt()}catch(t){console.error(`Unhandled exception running script %c${this.zq().jc()}, event ${this.zmt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),s||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),s=!0)}}*D1t(t){t.Cft(this),(this.qmt()||this.Xc.mgt())&&(yield this),this.f_(t)}kpt(){return!this.qmt()&&!this.Xc.mgt()}static qgt(){return s}static $gt(){s=!0}}}{const po=self.Ds;po.qdt=class extends po.Zh{constructor(t,s,i){super(),this.lq=t,this.Xc=t.GO(),this.zpt=s,this.Xgt=0,this.Ygt="",this.Zgt=0,this.Kgt=[],this.Qgt=!0,this.tyt="",this.Act=null,this.syt=!1,this.iyt=[],this.eyt=!1,this.hyt=!1,this.nyt=0,this.ryt=-1,this.oyt=new Map,this.ayt=po.fpt.BM(t,s,i),this.ayt.Umt(this)}lyt(t){this.Xgt=0,this.Ygt=t[0],this.Zgt=t[1],this.Kgt=t[2].map(t=>po.wpt.BM(this.lq,this,t)),this.Qgt=t[3],this.hyt=t[4],this.eyt=t[5]}uyt(t){this.Xgt=1,this.tyt=t[1],this.Act=this.Xc.KU(t[2]),this.ayt.vmt(this.Act),this.Ygt=this.Act.jc()+"."+this.tyt,this.Zgt=t[3],this.Kgt=t[4].map(t=>po.wpt.BM(this.lq,this,t)),this.Qgt=t[5],this.hyt=t[6],this.eyt=t[7],this.Act.cyt(this)}static gpt(t,s,i){const e=po.Qh(po.qdt,t,s,i),h=i[1];return e.lyt(h),e}static ypt(t,s,i){const e=po.Qh(po.qdt,t,s,i),h=i[1];return e.uyt(h),e}B0t(){if(this.Act&&this.Act.xz())for(const t of this.Act.Imt())if(t.fyt(this.tyt)){this.syt=!0;break}}N0t(){for(const t of this.Kgt)t.N0t();this.ayt.N0t(!1)}J0t(){return this.Xgt}r1t(){return this.Kgt}$dt(){return this.Kgt}HF(){return this.Kgt.length}dyt(t){this.iyt.push(t)}pyt(){return this.iyt}Pgt(i){const e=this.Kgt;for(let t=0,s=e.length;t<s;++t)e[t].Let(i[t].Ks(0))}Rgt(i){const e=this.Kgt;for(let t=0,s=e.length;t<s;++t)e[t].Let(i[t])}myt(){return this.Kgt.map(t=>t.Zit())}iB(){return this.zpt}n1t(){return this.zpt}q0t(){return this.Ygt}gyt(){return this.tyt}yyt(){return this.syt}YF(){return this.Zgt}cN(){return this.Act}ju(){return this.Qgt}VF(){switch(this.Zgt){case 0:return null;case 2:return"";default:return 0}}UF(){return this.ayt}XF(){return this.eyt}Sgt(){return this.hyt}Bgt(){const t=this.nyt++;this.ryt=t;let s,i=new Promise(t=>s=t);return this.oyt.set(t,{resolve:s,wyt:0}),[t,i]}Wgt(t){const s=this.oyt.get(t);0===s.wyt&&(s.resolve(),this.oyt.delete(t)),this.ryt=-1}Syt(){const t=this.oyt.get(this.ryt);return t.wyt++,this.ryt}byt(t){this.ryt=t;const s=this.oyt.get(t);s.wyt--}vyt(t,s){const i=new Map,e=[];for(const h of this.Act.yk().gk()){const n=h.cN();if(n.fyt(this.tyt)){const r=i.get(n);Array.isArray(r)?r.push(h):i.set(n,[h])}else e.push(h)}if(0<e.length&&this.ayt.Agt(t,s,this.eyt,{Lgt:this.Act,kgt:e}),0<i.size)for(const[o,a]of i){const l=o.Myt(this.tyt).UF(),u=[...new Set([...t,...l.y8()])];l.Agt(u,s,this.eyt,{Lgt:o,kgt:a})}}*xyt(t,s){const i=new Map,e=[];for(const h of this.Act.yk().gk()){const n=h.cN();if(n.fyt(this.tyt)){const r=i.get(n);Array.isArray(r)?r.push(h):i.set(n,[h])}else e.push(h)}if(0<e.length&&(yield*this.ayt.jgt(t,s,this.eyt,{Lgt:this.Act,kgt:e})),0<i.size)for(const[o,a]of i){const l=o.Myt(this.tyt).UF(),u=[...new Set([...t,...l.y8()])];yield*l.jgt(u,s,this.eyt,{Lgt:o,kgt:a})}}}}{const mo=self.Ds,go=[];mo.wpt=class extends mo.Zh{constructor(t,s,i){super();const e=t.WF();this.lq=t,this.uft=e,this.Xc=t.GO(),this.zpt=s,this.x0t=e.e1t(),this.nn=i[1],this.hf=i[2],this.Gyt=i[3],this.l2=!!i[4],this.Tyt=!!i[5],this._yt=s instanceof mo.qdt,this.K7=i[6],this.Iyt=this.Xc.a1t(i[8]),this.Cyt=t=>this.Let(t),this.Eyt=()=>this.Zit(),this.Ryt=!this.zpt||this.l2||this.Tyt,this.fht=this.Gyt,this.Pyt=-1,this.Ayt()&&(this.fht=this.fht?1:0),!this.Fyt()||this.j2()||this.jdt()||(this.Pyt=e.Y0t(this)),e.$0t(this)}static BM(t,s,i){return mo.Qh(mo.wpt,t,s,i)}N0t(){if(this.Fyt()&&!this.j2()&&!this.jdt()&&!this.Dyt()){const t=this.uft.Jdt(this);t&&t.dyt(this)}}jc(){return this.nn}a1t(){return this.Iyt}iB(){return this.zpt}n1t(){return this.iB()}lz(){return!this.iB()}Fyt(){return!this.lz()}Dyt(){return this._yt}j2(){return this.l2}jdt(){return this.Tyt}ae(){return 0===this.hf}Se(){return 1===this.hf}Ayt(){return 2===this.hf}_pt(){return!1}Pz(){return this.K7}Z0t(){return this.Gyt}y8(){return go}f_(t){!this.Fyt()||this.j2()||this.jdt()||this.Let(this.Z0t())}kpt(){return!0}*D1t(t){this.f_(t)}Let(t){this.ae()?"number"!=typeof t&&(t=parseFloat(t)):this.Se()?"string"!=typeof t&&(t=t.toString()):this.Ayt()&&(t=t?1:0),this.Ryt?this.fht=t:this.x0t.Xft()[this.Pyt]=t}Zit(){return this.Ryt?this.fht:this.x0t.Xft()[this.Pyt]}Oyt(){let t=this.Zit();return this.Ayt()?!!t:t}S1t(){this.fht=this.Gyt}l1t(){return{configurable:!1,enumerable:!0,get:this.Eyt,set:this.Cyt}}}}{const yo=self.Ds,wo=[];yo.Spt=class extends yo.Zh{constructor(t,s,i){super();const e=t.WF();this.lq=t,this.uft=e,this.Xc=t.GO(),this.zpt=s,this.Lyt=null,this.kyt=i[1],this.Zf=!0}static BM(t,s,i){return yo.Qh(yo.Spt,t,s,i)}N0t(){this.Lyt=this.uft.y$(this.kyt),this.lq.Ipt(this);let t=this.iB();for(;t;)t instanceof yo.fpt&&t.M1t()&&t.Gmt(this),t=t.iB();this.Zmt(),this.Xc.yX()&&this.lq.zdt().children.push(this.Lyt.zdt())}iB(){return this.zpt}y8(){return wo}Ept(){return this.Lyt}f_(t){const s=!!this.iB(),i=this.Xc.Mz();s&&this.uft.K1t(i),this.Lyt.f_(),s&&this.uft._8(i)}*D1t(t){const s=!!this.iB(),i=this.Xc.Mz();s&&this.uft.K1t(i),yield*this.Lyt.D1t(),s&&this.uft._8(i)}kpt(){return!1}Rpt(){return this.Zf}Zmt(){let t=this.iB();for(;t;){if(t instanceof yo.fpt&&t.M1t()&&!t.Bdt())return void(this.Zf=!1);t=t.iB()}this.Zf=!0}}}{let a=function(t,s){return s<=t?t%s:(t<0&&(t<=-s&&(t%=s),t<0)&&(t+=s),t)};a;const So=self.Ds;So.Nyt=class extends So.Zh{constructor(t){super(),this.Mv=t,this.Xc=t.GO()}N0t(){}static Byt(t,s){const i=s[0],e=[Go,Mo,xo,To,bo,vo];return So.Qh(e[i],t,s)}};class bo extends So.Nyt{constructor(t,s){super(t),this.Wyt=this.Xc.jyt(),this.zgt=this.Xc.Ugt(s[1]),this.zgt!==So.B$.N$.Eht.random&&this.zgt!==So.B$.N$.Eht.Vyt||this.Mv.Hyt()}Uyt(){return this.Wyt.zyt(this.zgt,this.Wyt)}}class vo extends So.Nyt{constructor(t,s){super(t),this.Jyt=null,this.Ygt=s[1],this.Mv.Hyt()}N0t(){const t=this.Xc.WF(),s=(this.Jyt=t.jF(this.Ygt),this.Ygt=null,this.Mv.UF()),i=this.Jyt.UF();this.qyt=[...new Set([...s.zF(),...i.zF()])],this.qyt=t.X0t(this.qyt)}Uyt(){const t=this.Jyt;if(t.ju()){const s=t.UF();return So.fpt.prototype.$F.bind(s,this.qyt,t.XF(),t.YF(),t.VF())}{const i=t.VF();return()=>i}}}class Mo extends So.Nyt{constructor(t,s){super(t),this.Act=this.Xc.KU(s[1]),this.zgt=this.Xc.Ugt(s[2]),this.$yt=!!s[3],this.Wct=this.Xc.WF().QF(),this.Mv.Xyt(this.Act)}Uyt(){return this.Act.hk().zyt(this.zgt,this.Act.sk().ZB())}Yyt(...t){const s=this.Act,i=s.yk().$ct(),e=i.length;if(0===e)return this.$yt?"":0;const h=a(this.Mv.Zyt(),e);return this.Wct.w8().kft(s),this.zgt.apply(i[h].ZB(),t)}Kyt(t,...s){const i=this.Act,e=i.gk(),h=e.length;if(0===h)return this.$yt?"":0;const n=a(t,h);return this.Wct.w8().kft(i),this.zgt.apply(e[n].ZB(),s)}}class xo extends So.Nyt{constructor(t,s){super(t),this.Act=this.Xc.KU(s[1]),this.Qyt=s[3],this.$yt=!!s[2],this.Mv.Xyt(this.Act)}twt(){const t=this.Act.yk().$ct(),s=t.length;if(0===s)return this.$yt?"":0;const i=a(this.Mv.Zyt(),s);return t[i].swt(this.Qyt)}iwt(){const t=this.Act,s=t.yk().$ct(),i=s.length;if(0===i)return this.$yt?"":0;const e=a(this.Mv.Zyt(),i),h=s[e],n=h.cN().ewt(t.hwt());return h.swt(this.Qyt+n)}nwt(t){const s=this.Act,i=s.gk(),e=i.length;if(0===e)return this.$yt?"":0;let h=a(t,e),n=i[h],r=0;return s.xz()&&(r=n.cN().ewt(s.hwt())),n.swt(this.Qyt+r)}}class Go extends So.Nyt{constructor(t,s){super(t),this.Act=this.Xc.KU(s[1]),this.rwt=this.Act.rht(s[2]),this.owt=this.Act.Lst(s[2]),this.zgt=this.Xc.Ugt(s[3]),this.$yt=!!s[4],this.Wct=this.Xc.WF().QF(),this.Mv.Xyt(this.Act)}awt(...t){const s=this.Act,i=s.yk().$ct(),e=i.length;if(0===e)return this.$yt?"":0;let h=a(this.Mv.Zyt(),e),n=(this.Wct.w8().kft(s),i[h]),r=0;return s.xz()&&(r=n.cN().lwt(s.hwt())),this.zgt.apply(n.nht()[this.owt+r].ZB(),t)}uwt(t,...s){const i=this.Act,e=i.gk(),h=e.length;if(0===h)return this.$yt?"":0;let n=a(t,h),r=(this.Wct.w8().kft(i),e[n]),o=0;return i.xz()&&(o=r.cN().lwt(i.hwt())),this.zgt.apply(r.nht()[this.owt+o].ZB(),s)}}class To extends So.Nyt{constructor(t,s){super(t),this.cwt=null,this.fwt=s[1]}N0t(){this.cwt=this.Xc.WF().u1t(this.fwt)}dwt(){return this.cwt}}}{let n=function(t){const s=self.pwt[t];if(s)return s;throw new Error("invalid expression number")};n;const _o=self.Ds;_o.mwt=class extends _o.Zh{constructor(t,s,i){super(),this.Mv=t,this.Lg=i,this.hf=s,this.Ks=null,this.gwt=!1,this.Tyt=!1}static BM(t,s,i){const e=s[0],h=[Io,Co,Oo,Ro,Ao,Eo,Fo,Io,Ro,Ro,Lo,ko,Oo,Bo,Co,Do,Po,No,Wo,jo,Vo,Ho];return _o.Qh(h[e],t,e,i,s)}N0t(){}Hyt(){this.gwt=!0}Xyt(t){this.gwt||!t||t.hk().FL()||(this.gwt=!0)}ywt(){return this.gwt}lF(){return this.Lg}GO(){return this.Mv.GO()}UF(){return this.Mv.UF()}jdt(){return this.Tyt}wwt(){return 4===this.hf}};class Io extends _o.mwt{constructor(t,s,i,e){super(t,s,i),this.Swt=0;const h=e[1];this.bwt=h[0],this.vwt=[],this.Mwt=null;for(let t=1,s=h.length;t<s;++t)this.vwt.push(_o.Nyt.Byt(this,h[t]));this.vwt.length?this.Ks=this.xwt:(this.Ks=n(this.bwt),this.Tyt=!0)}Gwt(t){if(t<0||t>=this.vwt.length)throw new RangeError("invalid numbered node");return this.vwt[t]}N0t(){for(const s of this.vwt)s.N0t();const t=n(this.bwt);this.vwt.length?this.Mwt=t(this):this.Mwt=t}Zyt(){return this.Swt}xwt(t){return this.Swt=t,this.Mwt()}}class Co extends Io{constructor(t,s,i,e){super(t,s,i,e),this.Ks=this.Twt,14===s&&(this.UF().Emt(),this.Mv instanceof _o.Mmt)&&this.UF().Vmt()}Twt(t){this.Swt=t;const s=this.Mwt();return"string"==typeof s?s:""}_wt(){return n(this.bwt)()}}class Eo extends Io{constructor(t,s,i,e){super(t,s,i,e),2<=t.Iwt()?this.Ks=this.Uk:this.Ks=this.hO,this.Tyt=!1}hO(t){this.Swt=t;const s=this.Mwt(),i=this.GO().sO();return i.hO(s)}Uk(t){const s=this.hO(t);return s?s.Uk():null}}class Ro extends _o.mwt{constructor(t,s,i,e){super(t,s,i),this.Cwt=e[1],this.Ks=this.Ewt,this.Tyt=!0}Ewt(){return this.Cwt}}class Po extends _o.mwt{constructor(t,s,i,e){super(t,s,i),this.Rwt=e[1],this.Ks=this.Pwt,this.Tyt=!0}Pwt(){return this.Rwt}}class Ao extends _o.mwt{constructor(t,s,i,e){super(t,s,i),this.Act=this.GO().KU(e[1]),2<=t.Iwt()?this.Ks=this.KL:this.Ks=this.cN;const h=this.UF();h.vmt(this.Act),this.Mv instanceof _o.Mmt?h.Vmt():h.iB()&&h.iB().Vmt(),this.Tyt=!0}cN(){return this.Act}KL(){return this.Act?this.Act.KL():null}}class Fo extends _o.mwt{constructor(t,s,i,e){super(t,s,i),this.q7=this.GO().ND().PX(e[1]),2<=t.Iwt()?this.Ks=this.LD:this.Ks=this.BD,this.Tyt=!0}BD(){return this.q7}LD(){return this.q7?this.q7.LD():null}}class Do extends _o.mwt{constructor(t,s,i,e){super(t,s,i),this.DZ=this.GO().kQ().VY(e[1]),2<=t.Iwt()?this.Ks=this.Qtt:this.Ks=this.vst,this.Tyt=!0}vst(){return this.DZ}Qtt(){return this.DZ?this.DZ.Qtt():null}}class Oo extends _o.mwt{constructor(t,s,i,e){super(t,s,i),this.Awt=e[1],this.Ks=this.Fwt,this.Tyt=!0}Fwt(){return this.Awt}}class Lo extends _o.mwt{constructor(t,s,i,e){super(t,s,i),this.Dwt=e[1];const h=this.Mv.cN();this.Mv instanceof _o.bmt&&this.Mv.j2()||!h||!h.xz()?(this.Ks=this.Owt,this.Tyt=!0):(this.Ks=this.Lwt,this.Hyt())}Owt(){return this.Dwt}Lwt(t){t=t||0;let s=this.Mv.cN(),i=s.yk(),e=i.gk(),h=null;if(e.length)h=e[t%e.length].cN();else if(i.Jct()){const n=i.qct();h=n[t%n.length].cN()}else{if(!(0<s.Sk()))return 0;{const r=s.gk();h=r[t%r.length].cN()}}return this.Dwt+h.ewt(s.hwt())}}class ko extends _o.mwt{constructor(t,s,i,e){super(t,s,i),this.fwt=e[1],this.cwt=null,2<=t.Iwt()?this.Ks=this.kwt:this.Ks=this.Nwt,this.Tyt=!0}N0t(){this.cwt=this.GO().WF().u1t(this.fwt)}Nwt(){return this.cwt}kwt(){return null}}class No extends _o.mwt{constructor(t,s,i,e){super(t,s,i),this.Bwt=e[1],this.Jyt=null,2<=t.Iwt()?this.Ks=this.Wwt:this.Ks=this.jwt,this.Tyt=!0}N0t(){this.Jyt=this.GO().WF().jF(this.Bwt),this.Bwt=null}jwt(){return this.Jyt}Wwt(){return null}}class Bo extends _o.mwt{constructor(t,s,i,e){super(t,s,i),this.Vwt=[],this.Hwt=[],this.Tyt=!0;for(let t=1,s=e.length;t<s;++t){const h=_o.mwt.BM(this.Mv,e[t],0);this.Vwt.push(h),this.Hwt.push(0),h.jdt()||(this.Tyt=!1)}this.Ks=this.Uwt}N0t(){for(const t of this.Vwt)t.N0t()}Uwt(){const i=this.Vwt,e=this.Hwt;for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Ks(0);return e}}class Wo extends _o.mwt{constructor(t,s,i,e){super(t,s,i),this.zwt=e[1],this.Ks=this.Oet,this.Tyt=!0}Oet(){return this.zwt}}class jo extends _o.mwt{constructor(t,s,i,e){super(t,s,i),this.Jwt=e[1],this.Ks=this.qwt,this.Tyt=!0}qwt(){return this.Jwt}}class Vo extends Io{constructor(t,s,i,e){super(t,s,i,e),this.Ks=this.IN,this.Tyt=!1}IN(){return this.Mwt()}}class Ho extends _o.mwt{constructor(t,s,i,e){super(t,s,i),this.ylt=this.GO().Olt().clt(e[1]),this.Ks=this.$wt,this.Tyt=!0}$wt(){return this.ylt.jc()}}}{let e=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Ks(0)};e;const Uo=self.Ds,zo=[],Jo=function(){};Uo.bmt=class extends Uo.Zh{constructor(t,i,s){if(super(),this.ayt=t,this.Xc=t.GO(),this.Lg=s,this.zgt=this.Xc.Ugt(i[1]),this.Xwt=0<i[3],this.Ywt=2===i[3],this.Zwt=!!i[4],this.Kwt=!!i[5],this.l2=!!i[6],this.K7=i[7],this.Qwt=this.ayt.aft(),this.Act=null,this.rwt=null,this.owt=-1,this.Wyt=null,this.f_=Jo,this.D1t=Jo,this.qs=[],this.tSt=[],this.sSt=!1,this.iSt=null,this.eSt=null,this.fmt=this.Xc.yX()?{dmt:i[8][0],hSt:i[8][1]}:null,-1===i[0]?this.Wyt=this.Xc.jyt():(this.Act=this.Xc.KU(i[0]),i[2]&&(this.rwt=this.Act.rht(i[2]),this.owt=this.Act.Lst(i[2])),this.ayt.iB()&&this.ayt.iB().Vmt()),10===i.length){let s=i[9];for(let t of s)this.qs.push(Uo.mwt.BM(this,t,this.qs.length)),this.tSt.push(0)}0===this.qs.length&&(this.qs=zo,this.tSt=zo),this.ayt.WF().H0t(this)}static BM(t,s,i){return Uo.Qh(Uo.bmt,t,s,i)}N0t(){for(const t of this.qs)t.N0t(),t.ywt()&&(this.sSt=!0);this.Ywt?(this.f_=this.nSt,this.D1t=this.rSt):this.Wyt?(this.oSt(),this.D1t=this.aSt):this.Act.hk().FL()?(this.lSt(),this.D1t=this.uSt):this.l2?(this.f_=this.cSt,this.D1t=this.fSt):(this.f_=this.dSt,this.D1t=this.pSt)}oSt(){const t=this.Wyt,s=this.Wyt;this.mSt(t,s,this.gSt)}lSt(){const t=this.Act.hk(),s=this.Act.sk().ZB();this.mSt(t,s,this.ySt)}mSt(t,s,i){const e=this.zgt,h=this.Kwt,n=this.qs;if(0===n.length){const r=t.zyt(e,s);h?this.f_=function(){return Uo.xor(r(),h)}:this.f_=r}else if(1===n.length){const o=n[0];if(!h&&o.jdt())this.f_=t.wSt(e,s,o.Ks(0));else{const a=t.zyt(e,s);this.f_=function(){return Uo.xor(a(o.Ks(0)),h)}}}else if(2===n.length){const l=n[0],u=n[1];if(!h&&l.jdt()&&u.jdt())this.f_=t.SSt(e,s,l.Ks(0),u.Ks(0));else{const c=t.zyt(e,s);this.f_=function(){return Uo.xor(c(l.Ks(0),u.Ks(0)),h)}}}else if(3===n.length){const f=n[0],d=n[1],p=n[2];if(!h&&f.jdt()&&d.jdt()&&p.jdt())this.f_=t.bSt(e,s,f.Ks(0),d.Ks(0),p.Ks(0));else{const m=t.zyt(e,s);this.f_=function(){return Uo.xor(m(f.Ks(0),d.Ks(0),p.Ks(0)),h)}}}else this.f_=i}Pz(){return this.K7}vpt(){return this.zgt}cN(){return this.Act}o6(){return this.rwt}vSt(){return this.rwt?this.rwt.h6():this.Act?this.Act.hk():null}Iwt(){const t=this.vSt();return t?t.MSt():1}UF(){return this.ayt}GO(){return this.Xc}lF(){return this.Lg}rgt(){return this.lF()}ppt(){return this.Xwt}Mpt(){return this.Ywt}xSt(){return this.Kwt}v6(){return this.Zwt}j2(){return this.l2}GSt(){return this.fmt.dmt}TSt(){return!!this.Wyt}sgt(){return this.TSt()||this.Act.hk().FL()}igt(){for(const t of this.qs)if(t.wwt())return t.cN();return null}_St(t){this.fmt.dmt=!!t,this.ayt.Bmt()}ISt(){return this.fmt.hSt}kpt(){return!this.GSt()&&!this.Xc.mgt()&&!this.ISt()}CSt(){return this.iSt||(this.iSt=new Map),this.iSt}ESt(){return this.eSt||(this.eSt=new Map),this.eSt}gSt(){const t=this.tSt;return e(this.qs,t),Uo.xor(this.zgt.apply(this.Wyt,t),this.Kwt)}*aSt(){if((this.GSt()||this.Xc.mgt())&&(yield this),this.ISt()){const s=this.tSt;e(this.qs,s);let t=this.zgt.apply(this.Wyt,s);return Uo.Fo(t)&&(t=yield*t),Uo.xor(t,this.Kwt)}return this.f_()}ySt(){const t=this.tSt,s=(e(this.qs,t),this.Act.sk().ZB());return Uo.xor(this.zgt.apply(s,t),this.Kwt)}*uSt(){if((this.GSt()||this.Xc.mgt())&&(yield this),this.ISt()){let t=this.tSt,s=(e(this.qs,t),this.Act.sk().ZB()),i=this.zgt.apply(s,t);return Uo.Fo(i)&&(i=yield*i),Uo.xor(i,this.Kwt)}return this.f_()}nSt(){return!0}*rSt(){return(this.GSt()||this.Xc.mgt())&&(yield this),!0}RSt(){if(this.rwt){if(2<=this.rwt.h6().MSt())throw new Error("not yet implemented");return this.rwt}return 2<=this.Act.hk().MSt()?this.Act.KL():this.Act}cSt(){const t=this.tSt,s=(e(this.qs,t),this.zgt.apply(this.RSt(),t));return this.Act.Ogt(),s}*fSt(){if((this.GSt()||this.Xc.mgt())&&(yield this),this.ISt()){const s=this.tSt;e(this.qs,s);let t=this.zgt.apply(this.RSt(),s);return Uo.Fo(t)&&(t=yield*t),this.Act.Ogt(),t}return this.f_()}dSt(){const i=this.qs,e=this.tSt,t=this.Act.yk();for(let t=0,s=i.length;t<s;++t){const h=i[t];h.ywt()||(e[t]=h.Ks(0))}return t.Uct()?this.PSt(t):this.ASt(t)}*pSt(){return(this.GSt()||this.Xc.mgt())&&(yield this),this.dSt()}FSt(i){const e=this.qs,h=this.tSt;for(let t=0,s=e.length;t<s;++t){const n=e[t];n.ywt()&&(h[t]=n.Ks(i))}}PSt(i){const t=this.Act,e=t.xz(),h=t.hwt(),n=this.owt,r=0<=n,o=t.gk(),a=this.sSt,l=this.tSt,u=this.zgt,c=this.Kwt,f=this.Qwt&&!this.Xwt;i.Hct();for(let s=0,t=o.length;s<t;++s){const d=o[s];a&&this.FSt(s);let t;if(r){const p=e?d.cN().lwt(h):0;t=u.apply(d.nht()[n+p].ZB(),l)}else t=u.apply(d.ZB(),l);Uo.xor(t,c)?i.Xct(d):f&&i.Yct(d)}return t.DSt(!0),i.Zct(!1),t.Ogt(),i.zct()}ASt(t){let s=this.Act,i=s.xz(),e=s.hwt(),h=s.xN(),n=this.owt,r=0<=n,o=this.sSt,a=this.tSt,l=this.zgt,u=this.Kwt,c=this.Qwt&&!this.Xwt,f=t.Kct(),d=t.Qct(),p=c&&!this.ayt.tgt(this),m=p?d:f,g=0,y=!1;for(let s=0,t=m.length;s<t;++s){const S=m[s];o&&this.FSt(s);let t;if(r){const b=i?S.cN().lwt(e):0;t=l.apply(S.nht()[n+b].ZB(),a)}else t=l.apply(S.ZB(),a);Uo.xor(t,u)?(y=!0,p?(f.push(S),h&&S.OSt()):(m[g]=S,h&&S.LSt(g),++g)):p?(m[g]=S,h&&S.kSt(g),++g):c&&(d.push(S),h)&&S.NSt()}Uo.Rr(m,g),h&&s.BSt(p,g);const w=y;return p&&!y&&(y=this.WSt(f)),s.DSt(w||c),c?y:t.zct()}WSt(i){const t=this.Act,e=t.xz(),h=t.hwt(),n=this.sSt,r=this.owt,o=0<=r,a=this.tSt,l=this.zgt,u=this.Kwt;for(let s=0,t=i.length;s<t;++s){const c=i[s];n&&this.FSt(s);let t;if(o){const f=e?c.cN().lwt(h):0;t=l.apply(c.nht()[r+f].ZB(),a)}else t=l.apply(c.ZB(),a);if(Uo.xor(t,u))return!0}return!1}jSt(t,s){return this.qs[t].Ks(s)}xpt(){const t=this.qs;if(t.length)return t[0]._wt();throw new Error("no parameters")}X9(){if(!this.iSt||!this.iSt.size)return null;const s={};for(const[i,e]of this.iSt.entries()){let t=e;"collmemory"===i&&(t=[...e.entries()].map(t=>[t[0].TN(),t[1].TN(),t[2]])),s[i]=t}return{ex:s}}Y9(t){if(this.iSt&&(this.iSt.clear(),this.iSt=null),t){const s=this.Xc,i=t.ex;if(i){const e=this.CSt();e.clear();for(const[h,n]of Object.entries(i)){let t=n;"collmemory"===h&&(t=Uo.Qh(Uo.Vu,n.map(t=>[s.KD(t[0]),s.KD(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),e.set(h,t)}}}}}}{let h=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Ks(0)};h;const qo=self.Ds,$o=[],Xo=function(){},Yo=function*(){};qo.Mmt=class extends qo.Zh{constructor(t,s,i){super();const e=(this.ayt=t).GO(),h=(this.Xc=e,this.Lg=i,this.K7=4<=s.length?s[3]:-1,this.VSt=5<=s.length?255&s[4]:0,this.HSt=5<=s.length?s[4]>>8:0,this.zgt=null,this.Act=null,this.rwt=null,this.owt=-1,this.Wyt=null,this.USt="",this.zSt=null,this.JSt=null,this.f_=Xo,this.D1t=Xo,this.qs=[],this.tSt=[],this.sSt=!1,this.iSt=null,this.eSt=null,-3===s[0]),n=h?s[2]:s[5];if(this.fmt=e.yX()||h?{dmt:n[0],hSt:n[1],index:n[2]}:null,-1===s[0])this.Wyt=e.jyt(),this.zgt=e.Ugt(s[1]);else if(-2===s[0])this.USt=s[1];else if(h){const r=e.Ugt(s[1]);this.zgt=r,this.f_=this.qSt,this.D1t=this.$St,this.HSt|=8}else this.Act=e.KU(s[0]),4&this.HSt?(this.USt=s[1],this.zSt=e.KU(s[2])):(s[2]&&(this.rwt=this.Act.rht(s[2]),this.owt=this.Act.Lst(s[2])),this.zgt=e.Ugt(s[1]));if(7===s.length){const o=s[6];for(const a of o)this.qs.push(qo.mwt.BM(this,a,this.qs.length)),this.tSt.push(0)}0===this.qs.length&&(this.qs=$o,this.tSt=$o),this.XSt()&&(this.ayt.Emt(),this.ayt.Vmt()),this.ayt.WF().U0t(this)}static BM(t,s,i){return qo.Qh(qo.Mmt,t,s,i)}N0t(){for(const t of this.qs)t.N0t(),t.ywt()&&(this.sSt=!0);if(this.Wyt)this.oSt(),this.D1t=this.aSt;else if(this.USt)4&this.HSt?this.YSt():this.ZSt(),this.USt="",this.zSt=null;else if(this.f_===this.qSt){const s=this.zgt,i=this.Xc.WF().o1t(this.ayt);this.zgt=s.bind(null,this.Xc.PL(),i)}else this.rwt?this.Sgt()?(this.f_=this.KSt,this.D1t=this.QSt):(this.f_=this.tbt,this.D1t=this.sbt):this.Act.hk().FL()?(this.lSt(),this.D1t=this.uSt):this.j2()?(this.f_=this.ibt,this.D1t=this.ebt):this.Sgt()?(this.f_=this.hbt,this.D1t=this.nbt):this.rbt()?(this.f_=this.obt,this.D1t=this.abt):this.qs.length?this.qs.every(t=>t.ywt())?(this.f_=this.lbt,this.D1t=this.ubt):this.sSt?(this.f_=this.cbt,this.D1t=this.fbt):this.qs.every(t=>t.jdt())?(h(this.qs,this.tSt),this.f_=this.dbt,this.D1t=this.pbt):(this.f_=this.mbt,this.D1t=this.gbt):(this.f_=this.dbt,this.D1t=this.pbt)}oSt(){const t=this.Wyt,s=this.Wyt;this.mSt(t,s,this.gSt)}lSt(){const t=this.Act.hk(),s=this.Act.sk().ZB();this.mSt(t,s,this.ySt)}ZSt(){const t=this.ayt.WF(),i=t.jF(this.USt);if(i.ju()){const e=0!=(2&this.HSt);this.JSt=i.UF();let s=[...new Set([...this.ayt.zF(),...this.JSt.zF()])];s=t.X0t(s);const h=!i.XF()&&this.ybt()?{Ngt:!0}:null;if(this.f_=qo.fpt.prototype.Agt.bind(this.JSt,s,this.qs,e,h),this.Xc.yX()){const n=this;this.D1t=function*(){(n.GSt()||n.Xc.mgt())&&(yield n);const t=yield*n.JSt.jgt(s,n.qs,e,h);return t}}else this.D1t=Yo}else this.f_=Xo,this.D1t=Yo}YSt(){const n=this.ayt.WF(),r=n.p1t(this.zSt,this.USt);if(r.ju()){const o=0!=(2&this.HSt);this.JSt=r.UF();let s=[...new Set([...this.ayt.zF(),...this.JSt.zF(),this.Act,r.cN()])],t=(s=n.X0t(s),!this.Act.xz()&&!r.cN().xz()),i=!this.Act.xz()&&r.cN().xz(),e=this.Act.xz(),h=null;if(!r.XF()&&this.ybt()&&((h=h||{}).Ngt=!0),!i&&o||((h=h||{}).Fgt=this.Act,h.Dgt=r.cN()),t||i||e&&!r.yyt()?this.f_=qo.fpt.prototype.Agt.bind(this.JSt,s,this.qs,o,h):e&&(this.f_=qo.qdt.prototype.vyt.bind(r,s,this.qs)),this.Xc.yX()){const a=this;t||i||e&&!r.yyt()?this.D1t=function*(){(a.GSt()||a.Xc.mgt())&&(yield a);const t=yield*a.JSt.jgt(s,a.qs,o,h);return t}:e&&(this.D1t=function*(){(a.GSt()||a.Xc.mgt())&&(yield a);const t=yield*r.xyt(s,a.qs);return t})}else this.D1t=Yo}else this.f_=Xo,this.D1t=Yo}mSt(t,s,i){const e=this.zgt,h=this.qs;if(0===h.length)this.f_=t.zyt(e,s);else if(1===h.length){const n=h[0];if(n.jdt())this.f_=t.wSt(e,s,n.Ks(0));else{const r=t.zyt(e,s);this.f_=function(){return r(n.Ks(0))}}}else if(2===h.length){const o=h[0],a=h[1];if(o.jdt()&&a.jdt())this.f_=t.SSt(e,s,o.Ks(0),a.Ks(0));else{const l=t.zyt(e,s);this.f_=function(){return l(o.Ks(0),a.Ks(0))}}}else if(3===h.length){const u=h[0],c=h[1],f=h[2];if(u.jdt()&&c.jdt()&&f.jdt())this.f_=t.bSt(e,s,u.Ks(0),c.Ks(0),f.Ks(0));else{const d=t.zyt(e,s);this.f_=function(){return d(u.Ks(0),c.Ks(0),f.Ks(0))}}}else this.f_=i}Pz(){return this.K7}Sgt(){return 0!=(8&this.HSt)}wgt(){return 0!=(16&this.HSt)}rbt(){return 1===this.VSt}j2(){return 2===this.VSt}XSt(){return 0!=(1&this.HSt)}Amt(){return this.Sgt()||this.wgt()}cN(){return this.Act}vSt(){return this.rwt?this.rwt.h6():this.Act?this.Act.hk():null}Iwt(){const t=this.vSt();return t?t.MSt():1}UF(){return this.ayt}ybt(){let t=this.ayt;do{if(t instanceof qo.qdt&&t.XF())return!0}while(t=t.n1t());return!1}GO(){return this.Xc}lF(){return this.Lg}rgt(){return this.fmt.index}GSt(){return this.fmt.dmt}_St(t){this.fmt.dmt=!!t,this.ayt.Bmt()}ISt(){return this.fmt.hSt}kpt(){return!this.GSt()&&!this.Xc.mgt()&&!this.ISt()}CSt(){return this.iSt||(this.iSt=new Map),this.iSt}ESt(){return this.eSt||(this.eSt=new Map),this.eSt}gSt(){const t=this.tSt;return h(this.qs,t),this.zgt.apply(this.Wyt,t)}*aSt(){if((this.GSt()||this.Xc.mgt())&&(yield this),this.ISt()){const t=this.tSt,s=(h(this.qs,t),yield*this.zgt.apply(this.Wyt,t));return s}return this.f_()}ySt(){const t=this.tSt;return h(this.qs,t),this.zgt.apply(this.Act.sk().ZB(),t)}*uSt(){if((this.GSt()||this.Xc.mgt())&&(yield this),this.ISt()){const t=this.tSt,s=(h(this.qs,t),yield*this.zgt.apply(this.Act.sk().ZB(),t));return s}return this.f_()}dbt(){const i=this.tSt,e=this.Act.yk().gk();for(let t=0,s=e.length;t<s;++t)this.zgt.apply(e[t].ZB(),i)}*pbt(){if((this.GSt()||this.Xc.mgt())&&(yield this),this.ISt()){const i=this.tSt,e=this.Act.yk().gk();for(let t=0,s=e.length;t<s;++t)yield*this.zgt.apply(e[t].ZB(),i)}else this.dbt()}mbt(){const i=this.tSt,e=(h(this.qs,i),this.Act.yk().gk());for(let t=0,s=e.length;t<s;++t)this.zgt.apply(e[t].ZB(),i)}*gbt(){if((this.GSt()||this.Xc.mgt())&&(yield this),this.ISt()){const i=this.tSt,e=(h(this.qs,i),this.Act.yk().gk());for(let t=0,s=e.length;t<s;++t)yield*this.zgt.apply(e[t].ZB(),i)}else this.mbt()}lbt(){const e=this.qs,h=this.tSt,s=this.zgt,n=this.Act.yk().gk();for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);s.apply(r.ZB(),h)}}*ubt(){if((this.GSt()||this.Xc.mgt())&&(yield this),this.ISt()){const e=this.qs,h=this.tSt,s=this.zgt,n=this.Act.yk().gk();for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);yield*s.apply(r.ZB(),h)}}else this.lbt()}cbt(){const e=this.qs,h=this.tSt,s=this.zgt,n=this.Act.yk().gk();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.ywt()||(h[t]=i.Ks(0))}for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.ywt()&&(h[t]=o.Ks(i))}s.apply(r.ZB(),h)}}*fbt(){if((this.GSt()||this.Xc.mgt())&&(yield this),this.ISt()){const e=this.qs,h=this.tSt,s=this.zgt,n=this.Act.yk().gk();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.ywt()||(h[t]=i.Ks(0))}for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.ywt()&&(h[t]=o.Ks(i))}yield*s.apply(r.ZB(),h)}}else this.cbt()}obt(){const e=this.qs,h=this.tSt,s=this.zgt,t=this.Act,i=t.wbt(),n=t.yk().gk();i.Sbt(s);for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);s.apply(r.ZB(),h)}i.bbt(s)}*abt(){if((this.GSt()||this.Xc.mgt())&&(yield this),this.ISt()){const e=this.qs,h=this.tSt,s=this.zgt,t=this.Act,i=t.wbt(),n=t.yk().gk();i.Sbt(s);for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);yield*s.apply(r.ZB(),h)}i.bbt(s)}else this.obt()}ibt(){const t=this.tSt;return h(this.qs,t),this.zgt.apply(this.rwt||this.Act,t)}*ebt(){if((this.GSt()||this.Xc.mgt())&&(yield this),this.ISt()){const s=this.tSt;h(this.qs,s);let t=this.zgt.apply(this.rwt||this.Act,s);return qo.Fo(t)?yield*t:t}return this.ibt()}tbt(){const t=this.Act,s=t.xz(),e=t.hwt(),h=this.qs,n=this.sSt,r=this.tSt,o=this.zgt,a=this.owt,l=t.yk().gk();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.ywt()||(r[t]=i.Ks(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(n)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.ywt()&&(r[t]=f.Ks(i))}const c=s?u.cN().lwt(e):0;o.apply(u.nht()[a+c].ZB(),r)}}*sbt(){if((this.GSt()||this.Xc.mgt())&&(yield this),this.ISt()){const t=this.Act,s=t.xz(),e=t.hwt(),h=this.qs,n=this.sSt,r=this.tSt,o=this.zgt,a=this.owt,l=t.yk().gk();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.ywt()||(r[t]=i.Ks(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(n)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.ywt()&&(r[t]=f.Ks(i))}const c=s?u.cN().lwt(e):0;yield*o.apply(u.nht()[a+c].ZB(),r)}}else this.tbt()}hbt(){const e=this.qs,h=this.tSt,s=this.zgt,n=this.Act.yk().gk(),r=[];for(let i=0,t=n.length;i<t;++i){const o=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);r.push(s.apply(o.ZB(),h))}return Promise.all(r)}*nbt(){if((this.GSt()||this.Xc.mgt())&&(yield this),this.ISt()){const e=this.qs,h=this.tSt,s=this.zgt,n=this.Act.yk().gk(),r=[];for(let i=0,t=n.length;i<t;++i){const o=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);r.push(yield*s.apply(o.ZB(),h))}return Promise.all(r)}return this.hbt()}KSt(){const t=this.Act,s=t.xz(),e=t.hwt(),h=this.qs,n=this.tSt,r=this.zgt,o=this.owt,a=t.yk().gk(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=h.length;t<s;++t)n[t]=h[t].Ks(i);const c=s?u.cN().lwt(e):0;l.push(r.apply(u.nht()[o+c].ZB(),n))}return Promise.all(l)}*QSt(){if((this.GSt()||this.Xc.mgt())&&(yield this),this.ISt()){const t=this.Act,s=t.xz(),e=t.hwt(),h=this.qs,n=this.tSt,r=this.zgt,o=this.owt,a=t.yk().gk(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=h.length;t<s;++t)n[t]=h[t].Ks(i);const c=s?u.cN().lwt(e):0;l.push(yield*r.apply(u.nht()[o+c].ZB(),n))}return Promise.all(l)}return this.KSt()}async qSt(){try{await this.zgt()}catch(t){console.error(`Unhandled exception running script %c${this.ayt.zq().jc()}, event ${this.ayt.zmt()}, action ${this.rgt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),qo.bpt.qgt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),qo.bpt.$gt())}}*$St(){return(this.GSt()||this.Xc.mgt())&&(yield this),this.qSt()}X9(){return this.iSt&&this.iSt.size?{ex:qo.Ro(this.iSt)}:null}Y9(t){if(this.iSt&&(this.iSt.clear(),this.iSt=null),t){const s=t.ex;s&&(this.iSt=qo.Po(s))}}}}{let d=function(t){return t instanceof r?w.Yk(t):t.TW()},u=function(t){return d(t).eO()},h=function(t){return w.Yk(t)},C=function(t,s,i,e){const h=s.TN(),n=i.TN();h<n?t.Set(s,i,e):t.Set(i,s,e)},E=function(t,s,i){const e=s.TN(),h=i.TN();e<h?t.Ju(s,i):t.Ju(i,s)},R=function(t,s){t.qu(s)},P=function(t,s,i){const e=s.TN(),h=i.TN();return e<h?t.Ks(s,i):t.Ks(i,s)},e=function(t,s,i,e){if(!s)return!1;const h=0!==i||0!==e,n=t.eO(),r=w.gF(),o=w.Q0t(),a=o.UF().aft(),l=o.cN(),u=o.xSt(),c=s.yk(),f=l!==s;_=s,T=f&&!u;let d,p=0,m=0,g=I=!1;c.Uct()?(S.T(n.D4()),S.offset(i,e),r.vbt(n.hO(),s,S,b),d=b):!a||w.Mbt()&&!c.Qct().length&&c.Kct().length?d=c.Kct():(d=c.Qct(),I=!0),h&&(p=n.Kb(),m=n.sv(),n.R4(i,e),n._4());for(const y of d)if(r.JO(t,y)){if(g=!0,u)break;f&&D.add(y)}return h&&(n.I4(p,m),n._4()),A.Pr(b),g},i=function(t){const s=w.JF().aft(),i=_.yk(),e=i.Kct(),h=i.Qct();i.Uct()?(i.eft(D),s&&(A.Pr(h),i.hft(D,_.gk()))):s?I?i.nft(D):(i.hft(D,e),i.eft(D)):i.eft(D),_.Ogt()},v=function(t,s){T&&(s&&i(),D.clear(),_=null,T=!1)},s=function(t,s){const i=w.KD(s);if(i){const e=t.yk();if(e.Uct()||e.Kct().includes(i))if(t.xz()){if(i.cN().xbt(t))return e.oft(i),t.Ogt(),!0}else if(i.cN()===t)return e.oft(i),t.Ogt(),!0}return!1},n=function(t,h){const n=t.yk();if(n.Uct()){n.Zct(!1),n.Hct();const i=t.gk();for(let t=0,s=i.length;t<s;++t){const e=i[t];e.TN()===h?n.Yct(e):n.Xct(e)}return t.Ogt(),!!n.Kct().length}{let i=n.Kct(),e=0;for(let t=0,s=i.length;t<s;++t){const r=i[t];(i[e]=r).TN()===h?n.Yct(r):++e}return A.Rr(i,e),t.Ogt(),!!i.length}},A=(d,u,h,C,E,R,P,e,i,v,s,n,self.Ds),l=new A.Oo,M={},x={},G={},w=null,r=(A.Gbt=function(t){w=t},self.lN),S=(x.Tbt=function(t,s){return A.compare(this.eO().Kb(),t,s)},G.Tbt=function(t,s){return A.compare(this.x,t,s)},x._bt=function(t,s){return A.compare(this.eO().sv(),t,s)},G._bt=function(t,s){return A.compare(this.y,t,s)},x.Ibt=function(){return this.eO().B4()},G.Ibt=function(){return this.N4()},M.Cbt=function(){const t=u(this),s=t.BD(),i=t.D4();return i.ml()<0||i.gl()<0||i.dl()>s.Xp()||i.pl()>s.om()},M.Ebt=function(i,e,h){const t=this.yk(),n=t.gk();if(!n.length)return!1;let r=n[0],o=r.eO(),a=r,l=A.pn(o.Kb(),o.sv(),e,h);for(let t=1,s=n.length;t<s;++t){r=n[t],o=r.eO();const u=A.pn(o.Kb(),o.sv(),e,h);(0===i&&u<l||1===i&&u>l)&&(l=u,a=r)}return t.oft(a),!0},x.Qb=function(t){const s=this.eO();s.Kb()!==t&&(s.Qb(t),s._4())},G.Qb=function(t){this.x=+t},x.hv=function(t){const s=this.eO();s.sv()!==t&&(s.hv(t),s._4())},G.hv=function(t){this.y=+t},x.Rbt=function(t,s){const i=this.eO();i.Pbt(t,s)||(i.I4(t,s),i._4())},G.Rbt=function(t,s){this.setPosition(t,s)},M.Abt=function(t,s){if(t){const i=d(this),e=t.pk(i);if(e){const[h,n]=e.Fbt(s),r=i.eO();r.Kb()===h&&r.sv()===n||(r.I4(h,n),r._4())}}},M.Dbt=function(t){if(0!==t){const s=u(this);s.R4(s.Obt()*t,s.Lbt()*t),s._4()}},x.kbt=function(t,s){if(0!==s){const i=this.eO();t=A.un(t),i.R4(Math.cos(t)*s,Math.sin(t)*s),i._4()}},G.kbt=function(t,s){0!==s&&(t=A.un(t),this.E4(Math.cos(t)*s,Math.sin(t)*s))},x.Kb=function(){return this.eO().Kb()},G.Kb=function(){return this.x},x.sv=function(){return this.eO().sv()},G.sv=function(){return this.y},M.aD=function(){return w.aD(d(this))},x.Nbt=function(t,s){return A.compare(this.eO().Xp(),t,s)},G.Nbt=function(t,s){return A.compare(this.width,t,s)},x.Bbt=function(t,s){return A.compare(this.eO().om(),t,s)},G.Bbt=function(t,s){return A.compare(this.height,t,s)},x.hm=function(t){const s=this.eO();s.Xp()!==t&&(s.hm(t),s._4())},G.hm=function(t){this.width=t},x.Yp=function(t){const s=this.eO();s.om()!==t&&(s.Yp(t),s._4())},G.Yp=function(t){this.height=t},x.kI=function(t,s){const i=u(this);i.Xp()===t&&i.om()===s||(i.kI(t,s),i._4())},G.kI=function(t,s){this.Fk(t,s)},x.Xp=function(){return this.eO().Xp()},G.Xp=function(){return this.width},x.om=function(){return this.eO().om()},G.om=function(){return this.height},M.Wbt=function(){return u(this).D4().dl()},M.jbt=function(){return u(this).D4().pl()},M.Vbt=function(){return u(this).D4().ml()},M.Hbt=function(){return u(this).D4().gl()},M.Ubt=function(){const t=u(this).D4();return(t.dl()+t.ml())/2},M.zbt=function(){const t=u(this).D4();return(t.pl()+t.gl())/2},M.Jbt=function(t,s){return A.gn(u(this).kk(),A.un(s))<=A.un(t)},M.qbt=function(t){return A.wn(u(this).kk(),A.un(t))},M.$bt=function(t,s){const i=A.un(t),e=A.un(s),h=u(this).kk(),n=!A.wn(e,i);return n?!(!A.wn(h,i)&&A.wn(h,e)):A.wn(h,i)&&!A.wn(h,e)},x.Lk=function(t){const s=this.eO(),i=A.ln(A.un(t));isNaN(i)||s.kk()===i||(s.Lk(i),s._4())},G.Lk=function(t){this.F4=t},M.Xbt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.Lk(s.kk()+A.un(t)),s._4()}},M.Ybt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.Lk(s.kk()-A.un(t)),s._4()}},M.Zbt=function(t,s){const i=u(this),e=i.kk(),h=A.yn(e,A.un(s),A.un(t));isNaN(h)||e===h||(i.Lk(h),i._4())},M.Kbt=function(t,s,i){const e=u(this),h=e.kk(),n=s-e.Kb(),r=i-e.sv(),o=Math.atan2(r,n),a=A.yn(h,o,A.un(t));isNaN(a)||h===a||(e.Lk(a),e._4())},M.Qbt=function(t,s){const i=u(this),e=i.kk(),h=t-i.Kb(),n=s-i.sv(),r=Math.atan2(n,h);isNaN(r)||e===r||(i.Lk(r),i._4())},x.kk=function(){return A.cn(this.eO().kk())},G.kk=function(){return this.F4},M.tvt=function(t,s){return A.compare(A.An(100*u(this).fR(),6),t,s)},x.v5=function(){return this.eO().v5()},G.v5=function(){return this.isVisible},M.S5=function(t){const s=u(this);t=2===t?!s.v5():0!==t,s.v5()!==t&&(s.S5(t),w.uO())},M.pR=function(t){const s=A.an(t/100,0,1),i=u(this);if(i.RB()){if(i.Int().svt()===s)return}else if(i.fR()===s)return;i.pR(s),w.uO()},M.ivt=function(t){l.fa(t);const s=u(this);s.j4().ea(l)||(s.V4(l),w.uO())},M.gR=function(){const t=u(this).j4();return A.On(t.Xo(),t.Yo(),t.Zo(),t.Ko())},M.fR=function(){return A.An(100*u(this).fR(),6)},M.evt=function(t){return!!t&&u(this).hO()===t},M.hvt=function(i){const t=this.yk(),e=t.gk();if(!e.length)return!1;let s=e[0],h=s;for(let t=1,s=e.length;t<s;++t){const n=e[t],r=n.eO(),o=h.eO(),a=r.hO().lF(),l=o.hO().lF();0===i?(l<a||a===l&&r.nO()>o.nO())&&(h=n):(a<l||a===l&&r.nO()<o.nO())&&(h=n)}return t.oft(h),!0},x.nvt=function(t,s,i){const e=this.eO(),h=0===t?e.nv():e.A4();return A.compare(h,s,i)},G.nvt=function(t,s,i){const e=0===t?this.N5:this.P4;return A.compare(e,s,i)},x.rvt=function(){this.eO().U4()},G.rvt=function(){this.H4()},x.ovt=function(){this.eO().J4()},G.ovt=function(){this.z4()},M.avt=function(t){t&&u(this).X4(t)},M.lvt=function(t,s){const i=0===t;if(s){const e=d(this),h=s.uvt(e);h&&e.eO().Z4(h,i)}},x.rv=function(t){const s=this.eO();s.nv()!==t&&(s.rv(t),w.uO())},G.rv=function(t){this.N5=t},M.cvt=function(){return u(this).hO().lF()},M.fvt=function(){return u(this).hO().jc()},x.dvt=function(){return this.eO().nO()},G.dvt=function(){return this.zIndex},x.pvt=function(){return this.eO().nv()},G.pvt=function(){return this.N5},x.mvt=function(){return this.eO().A4()},G.mvt=function(){return this.P4},M.gvt=function(t){const s=d(this),i=s.cN().Ek().aht(t);if(i){const e=i.lF(),h=s.eO().G4();return h.d6(e)}},M.yvt=function(t,s){const i=d(this),e=i.cN().Ek().aht(s);if(e){const h=e.lF(),n=1===t,r=i.eO().G4();r.d6(h)!==n&&(r.p6(h,n),r.m6(),w.uO())}},M.wvt=function(t,s,i){const e=d(this),h=e.cN().Ek().aht(t);if(h){s=Math.floor(s);const n=h.Jx().$x(s);if(n){"color"===n?(l.fa(i),i=l):"percent"===n&&(i/=100);const r=h.lF(),o=e.eO().G4(),a=o.y6(r,s,i);a&&o.d6(r)&&w.uO()}}},A.Qh(A.Rect)),F=[],b=[],T=!1,_=null,I=!1,D=new Set;M.Svt=function(w){if(this.Xc.bvt())return function*(w){if(w){let t=this.Xc,s=t.gF(),e=t.WF(),i=e.QF(),h=e.Q0t(),n=h.cN(),r=h.CSt(),o=h.ESt(),a=i.w8(),l=t.ntt(),u=l-1,c=a.JF(),f=i.S8(c),d=r.get("collmemory"),p=(d||(d=A.Qh(A.Vu),r.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Pf().addEventListener("instancedestroy",t=>R(d,t.a6))),n.yk()),m=w.yk(),g=p.gk(),y=null;for(let t=0;t<g.length;++t){const S=g[t];m.Uct()?(s.vbt(S.eO().hO(),w,S.eO().D4(),F),y=F,s.vvt(S,w,y)):y=m.gk();for(let t=0;t<y.length;++t){const b=y[t];if(s.JO(S,b)||s.Mvt(S,b)){let t=P(d,S,b),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const v=!s||i<u;if(C(d,S,b,l),v){const M=c.y8(),x=(e.G8(M),n.yk()),G=w.yk();if(x.Zct(!1),G.Zct(!1),n===w){const T=x.Kct();A.Pr(T),T.push(S),T.push(b),n.Ogt()}else{const _=x.Kct(),I=G.Kct();A.Pr(_),A.Pr(I),_.push(S),I.push(b),n.Ogt(),w.Ogt()}yield*c._gt(a,f),e._8(M)}}else E(d,S,b)}A.Pr(F)}i.P8()}return!1}.call(this,w);if(w){let t=this.Xc,s=t.gF(),e=t.WF(),i=e.QF(),h=e.Q0t(),n=h.cN(),r=h.CSt(),o=h.ESt(),a=i.w8(),l=t.ntt(),u=l-1,c=a.JF(),f=i.S8(c),d=r.get("collmemory"),p=(d||(d=A.Qh(A.Vu),r.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Pf().addEventListener("instancedestroy",t=>R(d,t.a6))),n.yk()),m=w.yk(),g=p.gk(),y=null;for(let t=0;t<g.length;++t){const S=g[t];m.Uct()?(s.vbt(S.eO().hO(),w,S.eO().D4(),F),y=F,s.vvt(S,w,y)):y=m.gk();for(let t=0;t<y.length;++t){const b=y[t];if(s.JO(S,b)||s.Mvt(S,b)){let t=P(d,S,b),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const v=!s||i<u;if(C(d,S,b,l),v){const M=c.y8(),x=(e.G8(M),n.yk()),G=w.yk();if(x.Zct(!1),G.Zct(!1),n===w){const T=x.Kct();A.Pr(T),T.push(S),T.push(b),n.Ogt()}else{const _=x.Kct(),I=G.Kct();A.Pr(_),A.Pr(I),_.push(S),I.push(b),n.Ogt(),w.Ogt()}c.T8(a,f),e._8(M)}}else E(d,S,b)}A.Pr(F)}i.P8()}return!1},M.xvt=function(t){return e(d(this),t,0,0)},M.Gvt=function(t,s,i){return e(d(this),t,s,i)},M.mB=function(){return u(this).mB()},M.Q9=function(){return u(this).Q9()},M.Tvt=function(i,e){const t=this.yk(),h=t.gk();if(0===h.length)return!1;let s=i.yk(),n=s.gk();if(s.Uct()){const a=[...this.Xc._vt(i)];0<a.length&&(n=n.concat(a))}if(0===n.length)return!1;const r=s.Uct()?null:new Set(n),o=new Set;for(let t=0,s=h.length;t<s;++t){const l=h[t];if(1===e)for(const u of l.nB())u.Ivt(i)&&(null===r||r.has(u))&&o.add(u);else{let t;if(0===e){if(null===(t=l.iB()))continue}else t=l.hB();t.Ivt(i)&&(null===r||r.has(t))&&o.add(t)}}return 0!==o.size&&(s.eft(o),i.Ogt(),!0)},M.Cvt=function(i,e){const t=this.yk(),h=t.gk();if(0===h.length)return!1;let s=i.yk(),n=s.gk();if(s.Uct()){const a=[...this.Xc._vt(i)];0<a.length&&(n=n.concat(a))}if(0===n.length)return!1;const r=s.Uct()?null:new Set(n),o=new Set;for(let t=0,s=h.length;t<s;++t){const l=h[t];2!==e||l.Q9()||!l.Ivt(i)||null!==r&&!r.has(l)||o.add(l);for(const u of 0===e?l.children():l.uB())2===e&&u.Q9()||u.Ivt(i)&&(null===r||r.has(u))&&o.add(u)}return 0!==o.size&&(s.eft(o),i.Ogt(),!0)},M.Evt=function(i,e,h){const t=this.yk(),n=t.gk();if(0===n.length)return!1;let s=i.yk(),r=s.gk();if(s.Uct()){const l=[...this.Xc._vt(i)];0<l.length&&(r=r.concat(l))}if(0===r.length)return!1;const o=s.Uct()?null:new Set(r),a=[];for(let t=0,s=n.length;t<s;++t){const u=n[t];if(0===e){const c=u.lB(h);null!==c&&c.Ivt(i)&&(null===o||o.has(c))&&a.push(c)}else if(1===e)for(const f of u.children())if(f.Ivt(i)){if(0===h){null!==o&&!o.has(f)||a.push(f);break}--h}}return 0!==a.length&&(s.ift(a),i.Ogt(),!0)},M.Rvt=function(t,s,i){const e=d(this);switch(t){case 0:default:return A.compare(e.oB(),s,i);case 1:return A.compare(e.Pvt(),s,i)}},M.fB=function(t,s,i,e,h,n,r,o,a,l){const u=d(this),c=w.s1t().cN();for(const f of t.Avt(u,c)){if(!f.hk().zL())return;u.fB(f,{yB:s,SB:i,vB:e,xB:h,TB:n,EB:r,IB:o,PB:a,DB:l})}},M.dB=function(t){const s=d(this),i=w.s1t().cN();for(const e of t.Avt(s,i))s.dB(e)},M.Fvt=function(){const t=d(this);if(t.mB()){const s=t.iB();s.dB(t)}},M.Dvt=function(){return d(this).oB()},M.Ovt=function(){return d(this).Pvt()},M.Lvt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=u(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.BB(),i._4()):i.kB(t,s)},M.jB=function(t,s,i,e,h,n,r,o){const a=u(this),l=a.jB(t,s,{mode:0===i?"absolute":"relative",x:e,y:h,N5:n,u:r,v:o});l&&a._4()},M.kvt=function(){const t=u(this);return t.HB()?t.UB().Rv():0},M.Nvt=function(){const t=u(this);return t.HB()?t.UB().Pv():0},M.Bvt=function(t){const s=u(this);t=2===t?!s.v5():0!==t,s.v5()!==t&&s.S5(t)},M.s6=function(t,s){this instanceof self.lN?this.Oj(t,s):this.s6(t,s)},M.Wvt=function(t,s){this instanceof self.lN?this.Lj(t,""+s):this.Wvt(t,""+s)},M.jvt=function(t){this instanceof self.lN?this.kj(t):this.jvt(t)},M.Vvt=function(){this instanceof self.lN?this.Aj():this.KB()},M.Hvt=function(){this instanceof self.lN?this.Fj():this.QB()},M.Uvt=function(){return this instanceof self.lN?this.Dj():this.Uvt()},M.zvt=function(t){this instanceof self.lN?this._setEnabled(0!==t):this._SetEnabled(0!==t)},M.Jvt=function(){return this instanceof self.lN?this.Qgt():this._IsEnabled()},x.qvt=function(t,s,i){return A.compare(this.TW().gnt(t),s,i)},G.qvt=function(t,s,i){return A.compare(h(this).gnt(t),s,i)},x.$vt=function(t){return!!this.TW().gnt(t)},G.$vt=function(t){return!!h(this).gnt(t)},M.Xvt=function(i,e){const t=this.yk(),h=t.gk();if(!h.length)return!1;let n=this.xz(),r=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t],l=n?a.cN().ewt(this.hwt()):0,u=a.gnt(l+e);(null===r||0===i&&u<o||1===i&&u>o)&&(o=u,r=a)}return t.oft(r),!0},M.Yvt=function(t){return(this.Xc.Q0t().xSt()?n:s)(this,t)},M.rW=function(t){const s=new Set(A.Jr(t)),i=d(this).AN();return s.re(i)},M.Zvt=function(){return d(this).Kvt()},M.Qvt=function(){return d(this).AN().size},M.t2t=function(t){return d(this).s2t(t)},M.i2t=function(t,s){const i=A.Jr(s);if(0!==i.length){const e=d(this),h=new Set(e.AN());if(0===t)for(const n of i)h.add(n);else if(1===t)for(const r of i)h.delete(r);e.DN(h)}},M.e2t=function(){w.wN(d(this))},M.h2t=function(){return!0},M.n2t=function(){return!0},x.r2t=function(t,s){this.TW().ynt(t,s)},G.r2t=function(t,s){h(this).ynt(t,s)},x.o2t=function(t,s){const i=this.TW(),e=i.gnt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.ynt(t,e+s)},G.o2t=function(t,s){const i=h(this),e=i.gnt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.ynt(t,e+s)},x.a2t=function(t,s){const i=this.TW(),e=i.gnt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.ynt(t,e-s))},G.a2t=function(t,s){const i=h(this),e=i.gnt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.ynt(t,e-s))},x.l2t=function(t,s){this.TW().ynt(t,s?1:0)},G.l2t=function(t,s){h(this).ynt(t,s?1:0)},x.u2t=function(t){const s=this.TW();s.ynt(t,0===s.gnt(t)?1:0)},G.u2t=function(t){const s=h(this);s.ynt(t,0===s.gnt(t)?1:0)},M.c2t=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=d(this);w.f2t(),i.dY("state"),i.mv(s,"state"),w.d2t("state",{p2t:!0})},M.m2t=function(){return JSON.stringify(d(this).pv("state"))},M.g2t=function(){return d(this).cN().jc()},M.y2t=function(){let t=w.K0t().Nft(),s=t.Sk();for(const i of w._vt(t))++s;return s},M.w2t=function(){return w.K0t().Nft().yk().gk().length},x.V$=function(){return this.TW().V$()},G.V$=function(){return h(this).V$()},x.TN=function(){return this.TW().TN()},G.TN=function(){return h(this).TN()},M.Gdt=function(t){const s=d(this);return t.toLowerCase()===w.WF().Cdt(s)},M.LN=function(t){const s=d(this);w.WF().LN(s,t)},M.S2t=function(t){return w.WF().tdt().b2t(this.yk().gk(),t),!0},M.v2t=function(){return d(this).IN()},A.M2t=function(t,s,i){const e=t[1],h=t[3],n=t[4],r=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.k$,w=s.Cht,S=s.Eht,b=Object.assign({},M,2<=i?G:x);h&&(y.Tbt=b.Tbt,y._bt=b._bt,y.Ibt=b.Ibt,y.Cbt=b.Cbt,y.Ebt=b.Ebt,w.Qb=b.Qb,w.hv=b.hv,w.Rbt=b.Rbt,w.Abt=b.Abt,w.Dbt=b.Dbt,w.kbt=b.kbt,S.x2t=b.Kb,S.G2t=b.sv,S.oD=b.aD),n&&(y.Nbt=b.Nbt,y.Bbt=b.Bbt,w.hm=b.hm,w.Yp=b.Yp,w.kI=b.kI,S.T2t=b.Xp,S._2t=b.om,S.I2t=b.Wbt,S.C2t=b.jbt,S.E2t=b.Vbt,S.R2t=b.Hbt,S.P2t=b.Ubt,S.A2t=b.zbt),r&&(y.F2t=b.Jbt,y.D2t=b.qbt,y.$bt=b.$bt,w.Lk=b.Lk,w.Xbt=b.Xbt,w.Ybt=b.Ybt,w.Zbt=b.Zbt,w.Kbt=b.Kbt,w.Qbt=b.Qbt,S.O2t=b.kk),o&&(y.v5=b.v5,y.tvt=b.tvt,w.S5=b.S5,w.pR=b.pR,w.ivt=b.ivt,S.Opacity=b.fR,S.L2t=b.gR),a&&(y.evt=b.evt,y.hvt=b.hvt,y.nvt=b.nvt,w.rvt=b.rvt,w.ovt=b.ovt,w.avt=b.avt,w.lvt=b.lvt,w.rv=b.rv,S.cvt=b.cvt,S.fvt=b.fvt,S.dvt=b.dvt,S.pvt=b.pvt,S.mvt=b.mvt),l&&(y.gvt=b.gvt,w.yvt=b.yvt,w.wvt=b.wvt),d&&(y.mB=b.mB,y.Q9=b.Q9,y.Tvt=b.Tvt,y.Cvt=b.Cvt,y.Evt=b.Evt,y.Rvt=b.Rvt,w.fB=b.fB,w.dB=b.dB,w.Fvt=b.Fvt,S.Dvt=b.Dvt,S.Ovt=b.Ovt),p&&(w.Lvt=b.Lvt,w.jB=b.jB,S.kvt=b.kvt,S.Nvt=b.Nvt),u&&(y.v5=b.v5,w.S5=b.Bvt,w.k2t=b.s6,w.N2t=b.Wvt,w.B2t=b.jvt),c&&(y.W2t=b.Uvt,w.j2t=b.Vvt,w.V2t=b.Hvt),f&&(y.ju=b.Jvt,w.H2t=b.zvt),m&&(y.Svt=b.Svt,y.xvt=b.xvt,y.Gvt=b.Gvt,s.U2t=v),e||(y.qvt=b.qvt,y.$vt=b.$vt,y.Xvt=b.Xvt,y.Yvt=b.Yvt,y.rW=b.rW,w.r2t=b.r2t,w.o2t=b.o2t,w.a2t=b.a2t,w.l2t=b.l2t,w.u2t=b.u2t,w.i2t=b.i2t,y.h2t=b.h2t,y.n2t=b.n2t,w.e2t=b.e2t,w.c2t||(w.c2t=b.c2t),S.m2t||(S.m2t=b.m2t),S.y2t=b.y2t,S.w2t=b.w2t,S.z2t=b.V$,S.J2t=b.TN,S.g2t=b.g2t,S.Zvt=b.Zvt,S.Qvt=b.Qvt,S.t2t=b.t2t,y.Gdt=b.Gdt,w.LN=b.LN,w.S2t=b.S2t),g&&(S.v2t=b.v2t)}}{const Zo=self.Ds;Zo.sdt=class extends Zo.Zh{constructor(t){super(),this.uft=t,this.hf="",this.NA=-1,this.q2t="",this.$2t=!1,this.X2t=null,this.Sft=0,this.qpt=[],this.Tft=null,this.Y2t=new Map,this.Z2t=null,this.K2t=null,this.Q2t=-1,this.Kgt=null,this.tMt=null,this.sMt=!1}tn(){this.hf="",this.NA=-1,this.q2t="",this.X2t=null,this.K2t=null,this.Kgt=null,this.tMt=null,this.Q2t=-1,Zo.Pr(this.qpt),this.Tft&&(this.Tft.clear(),this.Tft=null);for(const t of this.Y2t.values())t.tn();this.Y2t.clear(),this.Z2t=null}Zb(){const t=this.uft,s=t.GO().Mz(),i=t.K0t(),e=(this.X2t=i.JF(),this.Sft=i.Pft()+1,t.Jdt(this.X2t));e&&(this.K2t=e,this.Kgt=e.myt(),this.tMt=e.pyt().map(t=>t.Zit()),e.Sgt())&&(this.Q2t=e.Syt());for(const n of s){const r=n.yk();r.Uct()&&!this.X2t.Hmt(n)||(this.qpt.push(n),this.Y2t.set(n,Zo.Qh(Zo.iMt,r)))}const h=t.qF();this.Tft=0<h.size?h:null}eMt(t){this.hf="timer",this.Zb(),this.NA=this.uft.GO().fD()+t}hMt(t){this.hf="signal",this.Zb(),this.q2t=t.toLowerCase()}b2t(t,s){this.hf="instance-signals",this.Zb(),this.q2t=s.toLowerCase(),this.Z2t=new Set(t)}nMt(t){this.hf="promise",this.Zb(),t.then(()=>this.bdt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.bdt()})}rMt(){return"timer"===this.hf}wdt(){return"signal"===this.hf}_dt(){return"instance-signals"===this.hf}Vdt(){return"promise"===this.hf}Sdt(){return this.q2t}oMt(){return this.$2t}bdt(){this.$2t=!0}Idt(t){this.Z2t.delete(t),0===this.Z2t.size&&this.bdt()}hdt(){return this.rMt()?this.NA<=this.uft.GO().fD():this.oMt()}aMt(t){t._ft(this.X2t,this.Sft);for(const[i,e]of this.Y2t.entries()){const h=i.yk();e._ft(h)}this.Tft&&t.Uft([...this.Tft]);const s=this.K2t;s&&(s.Rgt(this.Kgt),s.pyt().map((t,s)=>t.Let(this.tMt[s])),s.Sgt())&&s.byt(this.Q2t)}ndt(t){this.aMt(t),this.X2t.bgt(t),this.K2t&&this.K2t.Sgt()&&this.K2t.Wgt(this.Q2t),this.uft.Y1t(this.qpt),this.sMt=!0}async ldt(t){this.aMt(t);for(const s of this.X2t.vgt(t))await this.uft.GO().F1t(s);this.K2t&&this.K2t.Sgt()&&this.K2t.Wgt(this.Q2t),this.uft.Y1t(this.qpt),this.sMt=!0}rdt(){return this.sMt}Bct(t){for(const s of this.Y2t.values())s.Bct(t);if("instance-signals"===this.hf){for(const i of t)this.Z2t.delete(i);0===this.Z2t.size&&this.bdt()}}X9(){const t={},s={wt:this.hf,t:this.NA,st:this.q2t,s:this.$2t,ev:this.X2t.Pz(),sm:this.qpt.map(t=>t.Pz()),dsm:this.Tft?[...this.Tft].map(t=>t.Pz()):null,sols:t};this.X2t.ogt(this.Sft)&&(s.act=this.X2t.i1t(this.Sft).Pz());for(const[i,e]of this.Y2t)t[i.Pz().toString()]=e.X9();return"instance-signals"===this.hf&&(s.pi=[...this.Z2t].map(t=>t.TN())),s}static Hdt(t,s){const i=t.GO(),e=t.c1t(s.ev);if(!e)return null;let h=0;if(s.hasOwnProperty("act")){const r=t.d1t(s.act);if(!r)return null;h=r.lF()}const n=Zo.Qh(Zo.sdt,t);n.NA=s.t,s.hasOwnProperty("wt")?n.hf=s.wt:n.hf=-1===n.NA?"signal":"timer",n.q2t=s.st,n.$2t=s.s,n.X2t=e,n.Sft=h;for(const o of s.sm){const a=i.u8(o);a&&n.qpt.push(a)}if(Array.isArray(s.dsm))for(const l of s.dsm){const u=i.u8(l);u&&(n.Tft||(n.Tft=new Set),n.Tft.add(u))}for(const[c,f]of Object.entries(s.sols)){const d=parseInt(c,10),p=i.u8(d);if(p){const m=Zo.Qh(Zo.iMt,null);m.Y9(t,f),n.Y2t.set(p,m)}}if("instance-signals"===n.hf){n.Z2t=new Set;for(const g of s.pi){const y=i.KD(g);y&&n.Z2t.add(y)}}return n}}}{const Ko=self.Ds;Ko.iMt=class extends Ko.Zh{constructor(t){super(),this.Act=null,this.lMt=!0,this.S7=[],t&&(this.Act=t.cN(),this.lMt=t.Uct(),Ko.Or(this.S7,t.Kct()))}tn(){this.Act=null,Ko.Pr(this.S7)}_ft(t){t.Zct(this.lMt),Ko.Or(t.Kct(),this.S7)}Bct(t){Ko.Wr(this.S7,t)}X9(){return{sa:this.lMt,insts:this.S7.map(t=>t.TN())}}Y9(t,s){const i=t.GO();this.lMt=!!s.sa,Ko.Pr(this.S7);for(const e of s.insts){const h=i.KD(e);h&&this.S7.push(h)}}}}{let l=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};l;const Qo=self.Ds;Qo.uMt=class extends Qo.Zh{constructor(t){super(),this.Xc=t.runtime,this.cMt=!!t.AL,this.fMt=!!t.dMt,this.pMt=!!t.NL,this.mMt=!!t.gMt,this.yMt=!!t.WL,this.wMt=!!t.SMt,this.bMt=!!t.JL,this.vMt=!!t.LL,this.MMt=!!t.VL,this.xMt=t.GMt,this.TMt=null,this._Mt=new Map,this.IMt=new Map,this.CMt=new Map,this.EMt=new Map,this.RMt=t.PMt,this.AMt=null}tn(){this.Xc=null}GO(){return this.Xc}FMt(){}Tdt(){return(2<=this.MSt()?this.AMt:this).constructor}MSt(){return this.xMt}DMt(t=!1){let s=this.RMt;return t&&"function"!=typeof s&&2<=this.MSt()?globalThis.FW:s}FL(){return this.cMt}OL(){return this.fMt}kL(){return this.vMt}HL(){return this.MMt}BL(){return this.pMt}_b(){return this.mMt}jL(){return this.yMt}zL(){return this.wMt}qL(){return this.bMt}zyt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this._Mt.get(t);return i||(i=t.bind(s),this._Mt.set(t,i)),i}wSt(t,s,i){if(!s)throw new Error("missing 'this' binding");let e=l(this.IMt,t),h=e.get(i);return h||(h=t.bind(s,i),e.set(i,h)),h}SSt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");let h=l(this.CMt,t),n=l(h,i),r=n.get(e);return r||(r=t.bind(s,i,e),n.set(e,r)),r}bSt(t,s,i,e,h){if(!s)throw new Error("missing 'this' binding");let n=l(this.EMt,t),r=l(n,i),o=l(r,e),a=o.get(h);return a||(a=t.bind(s,i,e,h),o.set(h,a)),a}OMt(t){if(!this.FL())throw new Error("must be single-global plugin");this.TMt=t}QL(){if(this.FL())return this.TMt;throw new Error("must be single-global plugin")}sk(){if(this.FL())return this.TMt.sk();throw new Error("must be single-global plugin")}LMt(){const t=this.MSt(),s=(Qo.RL.kMt(this,t),this.DMt(!0));if(s){if(this.AMt=new s,!(this.AMt instanceof self.IL))throw new TypeError("plugin class must derive from IPlugin")}else this.AMt=new self.IL;Qo.RL.NMt(t)}YL(){return this.AMt}}}{const ta=self.Ds;ta.BMt=class extends ta.uMt{constructor(t,s){super(t),this.WMt=s,this.jMt=0,this.VMt=new Map,this.HMt("elem-focused",t=>t.UMt()),this.HMt("elem-blurred",t=>{t&&t.zMt()})}tn(){super.tn()}JMt(t){const s=this.jMt++;return this.VMt.set(s,t),s}qMt(t){this.VMt.delete(t)}HMt(t,i){this.Xc.t4(this.WMt,t,t=>{const s=this.VMt.get(t.elementId);i(s,t)})}}}{const sa=self.Ds;sa.$Mt=class extends sa.Zh{constructor(t){super(),this.Act=t,this.Xc=t.GO(),this.XMt=t.hk()}tn(){this.Act=null,this.Xc=null,this.XMt=null}cN(){return this.Act}GO(){return this.Xc}hk(){return this.XMt}O6(){return this.Act.O6()}FMt(){}DSt(t){}Sbt(t){}bbt(t){}o$(t){}d$(){}u$(){}F$(t){}YMt(){}DMt(){return null}ZMt(t,s,i){const e=sa.Qh(sa.Event,t,s);e.KMt=this,i&&Object.assign(e,i),this.cN().gX(e)}}}{const ia=self.Ds;ia.QMt=class extends ia.Zh{constructor(t,s){super(),this.bi=t,this.WMt=s,this.txt=null,this.Xc=t.GO(),this.Act=this.bi.cN(),this.sxt=this.Act.wbt(),this.sY=null,this.eY=null,this.r4=!1,this.a4=!1,this.l0=null,this.oI=!1}tn(){this.oI=!0,this.ixt(),this.hxt(),this.sY=null,this.eY=null,this.l0&&(this.l0.tn(),this.l0=null),this.bi=null,this.Xc=null,this.Act=null,this.sxt=null}sn(){return this.oI}TW(){return this.bi}GO(){return this.Xc}cN(){return this.Act}hk(){return this.sxt.hk()}wbt(){return this.sxt}nxt(){return this.bi.QD()}YN(t){return this.Xc.YN(t,this.bi,null)}rxt(t){return this.Xc.rxt(t,this.bi,null)}KN(t){return this.Xc.KN(t,this.bi,null)}oxt(t,s){return this.Xc.oxt(t,this.bi,s)}axt(t,s){return this.Xc.axt(t,this.bi,s)}lxt(t){return this.Xc.lxt(t)}uxt(t,s){this.Xc.t4(this.WMt,t,s)}cxt(t){for(const[s,i]of t)this.uxt(s,i)}fxt(t,s){this.Xc.Kc(this.WMt,t,s)}dxt(t,s){return this.Xc.fO(this.WMt,t,s)}pxt(t,s){if(!this.Xc.GF())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.WMt,handler:t,data:s,responseId:null});this.fxt(t,s)}mxt(t){if(!t)throw new Error("cannot set empty component id");this.txt=t}gxt(){if(this.txt)return this.Xc.d4(this.txt);throw new Error("wrapper extension component id not set")}g4(t,s){if(!this.txt)throw new Error("wrapper extension component id not set");this.Xc.g4(this.txt,t,s)}yxt(t){for(const[s,i]of t)this.g4(s,i)}t8(t,s){if(!this.txt)throw new Error("wrapper extension component id not set");this.Xc.t8(this.txt,t,s)}s8(t,s){if(this.txt)return this.Xc.s8(this.txt,t,s);throw new Error("wrapper extension component id not set")}cZ(){}wxt(){}Sxt(){this.r4||(this.sY||(this.sY=()=>this.cZ()),this.Xc.Pf().addEventListener("tick",this.sY),this.r4=!0)}ixt(){this.r4&&(this.Xc.Pf().removeEventListener("tick",this.sY),this.r4=!1)}bxt(){return this.r4}vxt(){this.a4||(this.eY||(this.eY=()=>this.wxt()),this.Xc.Pf().addEventListener("tick2",this.eY),this.a4=!0)}hxt(){this.a4&&(this.Xc.Pf().removeEventListener("tick2",this.eY),this.a4=!1)}Mxt(){return this.a4}xxt(){return[]}pv(){return null}mv(t){}ont(t){}dnt(t,s){}ort(t,s,i){if(0!==s){const e=this.ont(t);if("number"!=typeof e)throw new Error("expected number");this.dnt(t,e+s,i)}}Gxt(t,s,i,e){}Txt(t,...s){t.call(this,...s)}_xt(t,...s){return t.call(this,...s)}DMt(){return null}ZMt(t,s,i){if(this.bi.Ixt()){const e=this.nxt(),h=ia.Qh(ia.Event,t,s);h.a6=e,i&&Object.assign(h,i),e.dispatchEvent(h)}}_b(){return!1}}}{const ea=self.Ds;ea.Cxt=class extends ea.QMt{constructor(t,s){super(t,s),this.nst=t.eO(),this.Ext=null,this.Rxt=null}tn(){if(this.Ext){const t=this.Xc.Pf();t.removeEventListener("renderercontextlost",this.Ext),t.removeEventListener("renderercontextrestored",this.Rxt),this.Ext=null,this.Rxt=null}this.nst=null,super.tn()}Pxt(){this.Axt()}Fxt(){}Dxt(){}Axt(){if(!this.Ext){this.Ext=()=>this.c7(),this.Rxt=()=>this.Oxt();const t=this.Xc.Pf();t.addEventListener("renderercontextlost",this.Ext),t.addEventListener("renderercontextrestored",this.Rxt)}}c7(){this.Fxt()}Oxt(){this.Dxt()}eO(){return this.nst}Xst(){return!1}$st(){if(!this.Xst())throw new Error("original size not known");const t=this.Lxt();if(t)return t.Xp()}Zst(){if(!this.Xst())throw new Error("original size not known");const t=this.Lxt();if(t)return t.om()}Lxt(){return null}kxt(){const t=this.Lxt();if(t){const s=t.SM();if(s)return[s.Xp(),s.om()]}return[100,100]}Nxt(){const t=this.Lxt();return t?t.pC():null}Bxt(){const t=this.Lxt();return t?t.Wxt():null}jxt(){const t=this.Lxt();return!!t&&t.Vxt()}Fbt(t){const s=this.bi.eO();return[s.Kb(),s.sv(),s.A4()]}YMt(t,s,i){}Hxt(t,s){}_9(){return!0}}}{const ha=self.Ds,na=ha.Qh(ha.Rect);ha.Uxt=class extends ha.Cxt{constructor(t,s){super(t,s),this.zxt=this.hk().JMt(this),this.Jxt=!0,this.qxt=!1,this.$xt=!1,this.Xxt=-.2,this.Yxt=ha.Qh(ha.Rect,0,0,-1,-1);const i=this.Xc.dL();this.Zxt=i.gj(),this.Kxt=i.yj(),this.Qxt=-1,this.tGt=-1,this.sGt=!1,this.Sxt()}tn(){this.hk().qMt(this.zxt),this.iGt("destroy"),this.zxt=-1,super.tn()}YB(){if(this.Xc.GF())throw new Error("not valid in worker mode");return this.eGt("get-element")}iGt(t,s){(s=s||{}).elementId=this.zxt,this.fxt(t,s)}eGt(t,s){return(s=s||{}).elementId=this.zxt,this.pxt(t,s)}hGt(t,s){return(s=s||{}).elementId=this.zxt,this.dxt(t,s)}nGt(t){t=t||{};const s=this.eO();t.elementId=this.zxt,t.isVisible=s.v5(),t.htmlIndex=s.hO().xj(),t.htmlZIndex=s.Gj(),Object.assign(t,this.rGt()),this.Jxt=!!t.isVisible,this.pxt("create",t),this.oGt(!0)}Bvt(t){this.Jxt!==(t=!!t)&&(this.Jxt=t,this.iGt("set-visible",{isVisible:t}))}cZ(){this.oGt(!1)}aGt(){const t=this.Xc.dL().Ej();return"Android"===ha.hi.ni&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}oGt(u){if(!this.TW().Rj()){let t=this.eO(),s=t.hO(),i=t.D4(),[e,h]=s.iN(i.dl(),i.pl()),[n,r]=s.iN(i.ml(),i.gl()),o=this.Xc.dL(),a=o.yL(),l=o.SL();if(t.v5()&&s.v5())if(!this.aGt()&&(n<=0||r<=0||a<=e||l<=h))this.Bvt(!1);else{na.set(e,h,n,r);const c=o.gj(),f=o.yj(),d=s.xj(),p=t.Gj();if(!u&&na.equals(this.Yxt)&&this.Zxt===c&&this.Kxt===f&&this.Qxt===d&&this.tGt===p)this.Bvt(!0);else{this.Yxt.T(na),this.Zxt=c,this.Kxt=f,this.Qxt=d,this.tGt=p,this.Bvt(!0);let t=null;this.$xt&&(t=s.Pj()+this.Xxt),this.iGt("update-position",{left:Math.round(this.Yxt.dl()),top:Math.round(this.Yxt.pl()),width:Math.round(this.Yxt.width()),height:Math.round(this.Yxt.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this.Bvt(!1)}}KB(){this.eGt("focus",{focus:!0})}QB(){this.eGt("focus",{focus:!1})}UMt(){this.qxt=!0}zMt(){this.qxt=!1}Uvt(){return this.qxt}s6(t,s){this.iGt("set-css-style",{prop:ha.Ao(t),val:s})}Wvt(t,s){this.iGt("set-attribute",{name:t,val:s})}jvt(t){this.iGt("remove-attribute",{name:t})}lGt(){this.sGt||(this.sGt=!0,Promise.resolve().then(()=>{this.sGt=!1,this.iGt("update-state",this.rGt())}))}rGt(){}uGt(){return this.zxt}}}{const ra=self.Ds,oa=self.c6;ra.cGt=class extends ra.Zh{constructor(t){super(),this.Xc=t.runtime,this.fGt=ra.Qh(ra.Yu),this.dGt=ra.Qh(ra.Yu),this.xMt=t.GMt,this.RMt=t.PMt,this.pGt=null}tn(){this.dGt.tn(),this.fGt.tn(),this.Xc=null}GO(){return this.Xc}FMt(){}MSt(){return this.xMt}DMt(t=!1){let s=this.RMt;return t&&"function"!=typeof s&&2<=this.MSt()?globalThis.Wj:s}mGt(t){this.fGt.tc(t)}NY(){return this.fGt.sc()}uz(t){this.dGt.tc(t)}dz(t){this.dGt.Ju(t)}gk(){return this.dGt.sc()}LMt(){const t=this.MSt(),s=(ra.RL.kMt(this,t),this.DMt(!0));if(s){if(this.pGt=new s,!(this.pGt instanceof oa))throw new TypeError("behavior class must derive from IBehavior")}else this.pGt=new oa;ra.RL.NMt(t)}e6(){return this.pGt}}}{const aa=self.Ds;aa.gGt=class extends aa.Zh{constructor(t){super(),this.Xc=t.GO(),this.rwt=t,this.Act=t.cN(),this.yGt=t.h6(),this.yGt.mGt(this.Act)}tn(){this.Xc=null,this.rwt=null,this.Act=null,this.yGt=null}FMt(){}o6(){return this.rwt}cN(){return this.Act}GO(){return this.Xc}h6(){return this.yGt}}}{const la=self.Ds;la.wGt=class extends la.Zh{constructor(t,s){super(),this.SGt=t,this.WMt=s,this.bi=t.l6(),this.Xc=t.GO(),this.rwt=t.o6(),this.sxt=this.rwt.wbt(),this.r4=!1,this.a4=!1,this.Kj=!1,this.l0=null}tn(){this.ixt(),this.hxt(),this.bGt(),this.l0&&(this.l0.tn(),this.l0=null),this.SGt=null,this.bi=null,this.Xc=null,this.rwt=null,this.sxt=null}h6(){return this.rwt.h6()}vGt(){return this.SGt}l6(){return this.bi}cN(){return this.bi.cN()}eO(){return this.bi.eO()}GO(){return this.Xc}o6(){return this.rwt}wbt(){return this.sxt}nxt(){return this.SGt.nxt()}YN(t){return this.Xc.YN(t,this.bi,this.rwt)}rxt(t){return this.Xc.rxt(t,this.bi,this.rwt)}KN(t){return this.Xc.KN(t,this.bi,this.rwt)}MGt(){}cZ(){}wxt(){}xGt(){}Sxt(){this.r4||(this.Xc.Jj(this),this.r4=!0)}ixt(){this.r4&&(this.Xc.qj(this),this.r4=!1)}bxt(){return this.r4}vxt(){this.a4||(this.Xc.$j(this),this.a4=!0)}hxt(){this.a4&&(this.Xc.Xj(this),this.a4=!1)}Mxt(){return this.a4}GGt(){this.Kj||(this.Xc.Yj(this),this.Kj=!0)}bGt(){this.Kj&&(this.Xc.Zj(this),this.Kj=!1)}TGt(){return this.Kj}xxt(){return[]}uxt(t,s){this.Xc.t4(this.WMt,t,s)}_Gt(t,s){}pv(){return null}mv(t){}ont(t){}dnt(t,s){}ort(t,s){if(0!==s){const i=this.ont(t);if("number"!=typeof i)throw new Error("expected number");this.dnt(t,i+s)}}Gxt(t,s,i,e){}Txt(t,...s){t.call(this,...s)}_xt(t,...s){return t.call(this,...s)}DMt(){return null}ZMt(t,s,i){if(this.SGt.Ixt()){const e=this.nxt(),h=la.Qh(la.Event,t,s);h.IGt=e,h.a6=e.a6,i&&Object.assign(h,i),e.dispatchEvent(h)}}}}{let s=function(t){if(t!==i)throw new Error("invalid internal API token")},n=(s,self.Ds),i=(n.B$={},n.mat={},n.Os()),e=[],h=[],r=[],o=null,a=null,t=null,l=null,u=new Map,c=new Map;n.RL=class extends n.Zh{constructor(t,s){super(),this.Xc=t,this.CGt=[],this.Wyt=null,this.EGt=[],this.RGt=new Map,this.PGt=null,this.AGt=null,this.FGt=new Set(s)}DGt(t){const s=t[19],i=this.Xc.Ugt(t[0]);if(!i)throw new Error("missing plugin");n.M2t(t,i,s);const e=2<=s?n.uMt:i,h=n.Qh(e,{runtime:this.Xc,AL:t[1],dMt:t[2],NL:t[5],WL:t[8],gMt:t[9],SMt:t[13],JL:t[14],LL:t[17],VL:t[18],GMt:s,PMt:2<=s?i:null});h.FMt(),this.CGt.push(h),u.set(i,h)}OGt(){this.Wyt=n.Qh(n.B$.N$,{runtime:this.Xc,AL:!0}),this.Wyt.FMt()}LGt(t){const i=t[1],e=this.Xc.Ugt(t[0]);if(!e)throw new Error("missing behavior");this.RGt.set(e,()=>{const t=2<=i?n.cGt:e,s=n.Qh(t,{runtime:this.Xc,GMt:i,PMt:2<=i?e:null});s.FMt(),this.EGt.push(s),c.set(e,s),!this.PGt&&n.mat.solid&&s instanceof n.mat.solid?this.PGt=s:!this.AGt&&n.mat.jumpthru&&s instanceof n.mat.jumpthru&&(this.AGt=s),s.LMt()})}kGt(t){const s=this.RGt.get(t);s&&(s(),this.RGt.delete(t))}static kMt(t,s=1){if(n.RL.kMt!==o)throw new Error("invalid method");1===s&&e.push(t),h.push(t)}static NMt(t=1){if(n.RL.NMt!==a)throw new Error("invalid method");1===t&&e.pop(),h.pop()}static mN(){if(n.RL.mN!==t)throw new Error("invalid method");if(0===e.length)throw new Error("no init object set");return e.at(-1)}static EL(t){if(n.RL.EL!==l)throw new Error("invalid method");if(s(t),0===h.length)throw new Error("no init object set");return h.at(-1)}static NGt(t){r.push(t)}static BGt(){r.pop()}static $N(){if(0===r.length)throw new Error("no init properties set");return r.at(-1)}WGt(){for(const t of this.CGt)t.LMt()}static XL(t){return u.get(t)||null}static f6(t){return c.get(t)||null}jyt(){return this.Wyt}jGt(){return this.PGt}VGt(){return this.AGt}d4(t){return this.FGt.has(t)}},o=n.RL.kMt,a=n.RL.NMt,t=n.RL.mN,l=n.RL.EL}{const ua=self.Ds,ca=new Set;ua.HGt=class extends ua.Zh{constructor(){super(),this.UGt=0,this.t7="",this.s7=0,this.zGt=0,this.JGt=0,this.Lm=0,this.km=0,this.qGt=!1,this.$Gt=!1,this.XGt=null,this.YGt="",this.sI=ua.Qh(ua.Rect),this.ZGt=ua.Qh(ua.Hl),this.KGt="",this.QGt=new self.MO(this),ca.add(this)}tn(){this.hI(),this.XGt&&0===this.XGt.p7()&&this.XGt.tn(),this.XGt=null,ca.delete(this),this.tTt()}static c7(){for(const t of ca)t.YGt="",t.sI.set(0,0,0,0),t.ZGt.uu(t.sI)}sTt(t){this.t7=t[0],this.s7=t[1],this.zGt=t[2],this.JGt=t[3],this.Lm=t[4],this.km=t[5],this.qGt=t[6],this.$Gt=!0}iTt(t,s){if(this.XGt)throw new Error("already loaded asset");this.t7=s;const i={};return ua.lo(s)&&(i.EH="remote"),this.xO(t,i),this.XGt.AH()}eTt(t,s){if(this.XGt)throw new Error("already loaded asset");this.t7="",this.s7=s.size,this.XGt=ua.Qh(ua.RH,t.dF(),{blob:s,size:this.s7,EH:"local"})}hTt(t){if(t===this)throw new Error("cannot replace with self");this.UGt++,this.hI(),this.t7=t.t7,this.s7=t.s7,this.zGt=t.zGt,this.JGt=t.JGt,this.Lm=t.Lm,this.km=t.km,this.qGt=t.qGt,this.$Gt=t.$Gt,this.XGt=t.XGt,this.YGt=t.YGt,this.sI=t.sI,this.ZGt=t.ZGt,this.tTt()}PH(){return this.t7}$u(){return this.s7}nTt(){return this.zGt}rTt(){return this.JGt}Vxt(){return this.qGt}Xp(){return this.Lm}om(){return this.km}oTt(){return this.XGt.Xp()}aTt(){return this.XGt.om()}xO(t,s){if(this.XGt)throw new Error("already got asset");s=Object.assign({},s,{url:this.PH(),size:this.$u()}),this.XGt=t.CH(s)}n7(){return this.XGt&&this.XGt.n7()}async uV(t,s){if(!this.XGt)throw new Error("no asset");if(this.YGt)throw new Error("already loaded texture");const i=this.UGt,e=(this.YGt="loading",await this.XGt.uV(t,s));if(this.UGt!==i)return null;if(!e)return this.YGt="",null;this.YGt="loaded",this.$Gt||(this.Lm=e.Xp(),this.km=e.om(),this.$Gt=!0);const h=this.qGt?this.km:this.Lm,n=this.qGt?this.Lm:this.km;return this.sI.set(this.zGt,this.JGt,this.zGt+h,this.JGt+n),this.sI.Tt(e.Xp(),e.om()),this.ZGt.uu(this.sI),this.qGt&&this.ZGt.gu(),e}hI(){this.YGt&&(this.XGt&&this.XGt.hI(),this.YGt="",this.sI.set(0,0,0,0),this.ZGt.uu(this.sI))}SM(){return this.XGt&&"loaded"===this.YGt?this.XGt.SM():null}pC(){return this.sI}Wxt(){return this.ZGt}JW(){return this.QGt}lTt(){return this.XGt}async uTt(t){t=t||await this.XGt.m7();const s=ua.xo(this.Lm,this.km),i=s.getContext("2d");return this.qGt?(i.rotate(Math.PI/-2),i.translate(-this.km,0),i.drawImage(t,this.zGt,this.JGt,this.km,this.Lm,0,0,this.km,this.Lm)):i.drawImage(t,this.zGt,this.JGt,this.Lm,this.km,0,0,this.Lm,this.km),s}async cTt(t){if(!this.KGt){const s=await this.uTt(t),i=await ua.Go(s);this.KGt=URL.createObjectURL(i)}return this.KGt}tTt(){this.KGt&&(URL.revokeObjectURL(this.KGt),this.KGt="")}}}{const fa=self.Ds;fa.fTt=class extends fa.Zh{constructor(t){super(),this.nn=t[0],this.dTt=t[1],this.Zwt=!!t[2],this.krt=t[3],this.pTt=t[4],this.mTt=!!t[5],this.K7=t[6],this.gTt=t[7].map(t=>fa.Qh(fa.yTt,t)),this.wTt=new self.w6(this)}static STt(t,s){const i=fa.Qh(fa.fTt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.gTt.push(fa.yTt.STt(t)),i}tn(){for(const t of this.gTt)t.tn();fa.Pr(this.gTt)}bTt(t){for(const s of this.gTt)s.O6().xO(t)}vTt(s,i){return Promise.all(this.gTt.map(t=>t.O6().uV(s,i)))}MTt(){for(const t of this.gTt)t.O6().hI()}jc(){return this.nn}Pz(){return this.K7}I6(){return this.gTt.length}E6(){return this.gTt}xTt(t){if((t=Math.floor(t))<0||t>=this.gTt.length)throw new RangeError("invalid frame");return this.gTt[t]}GTt(t,s){(s=Math.floor(s))<0?this.gTt.unshift(t):s>=this.gTt.length?this.gTt.push(t):this.gTt.splice(s,0,t)}TTt(t){if((t=Math.floor(t))<0||t>=this.gTt.length)throw new RangeError("invalid frame");this.gTt[t].tn(),this.gTt.splice(t,1)}_Tt(i){for(let t=0,s=this.gTt.length;t<s;++t)if(fa.fh(this.gTt[t].sW(),i))return t;return-1}ITt(t){if("string"!=typeof t)return t;{const s=this._Tt(t);if(-1===s)throw new Error("cannot find animation frame with tag "+t);return s}}S6(){return this.dTt}v6(){return this.Zwt}M6(){return this.krt}G6(){return this.pTt}_6(){return this.mTt}CTt(){return this.wTt}}}{const da=self.Ds,pa=(()=>{const i=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),e=new Uint8Array(i.length);for(let t=0,s=i.length;t<s;++t)e[t]=i.charCodeAt(t);return new Blob([e],{type:"image/png"})})();da.yTt=class extends da.Zh{constructor(t){super(),this.ETt=da.Qh(da.HGt),this.ETt.sTt(t),this.RTt=t[7],this.PTt=da.Qh(da.Ha,t[8],t[9]),this.ATt=t[10].map(t=>da.Qh(da.FTt,this,t)),this.DTt=new Map;for(const i of this.ATt)this.DTt.set(i.jc().toLowerCase(),i);this.OTt=null;const s=t[11];6<=s.length&&(this.OTt=da.Qh(da.xu,s)),this.kg=t[12]||"",this.LTt=new self.D6(this)}static STt(t){const s=da.Qh(da.yTt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.ETt.eTt(t,pa),s}tn(){this.OTt&&(this.OTt.tn(),this.OTt=null),this.ETt.tn(),this.ETt=null}O6(){return this.ETt}L6(){return this.RTt}N6(){return this.PTt.$a()}W6(){return this.PTt.Ya()}Z6(){return this.OTt}X6(t){return this.DTt.get(t.toLowerCase())||null}q6(t){return(t=Math.floor(t))<0||t>=this.ATt.length?null:this.ATt[t]}H6(){return this.ATt.length}sW(){return this.kg}R6(){return this.LTt}}}{const ma=self.Ds;ma.FTt=class extends ma.Zh{constructor(t,s){super(),this.kTt=t,this.nn=s[0],this.NTt=ma.Qh(ma.Ha,s[1],s[2])}tn(){}jc(){return this.nn}Kb(){return this.NTt.$a()}sv(){return this.NTt.Ya()}BTt(){return this.NTt}}}{const G=self.Ds,ga=self.C3Debugger,ya=self.ik;G.hlt=class extends G.Zh{constructor(s,t,i){super();const e=s.Ugt(i[1]),[h,n]=(this.Xc=s,this.XMt=G.RL.XL(e),this.sxt=null,this.WTt=e.Instance,this.Lg=t,this.K7=i[11],this.nn=i[0],this.Iyt=this.Xc.a1t(i[14]),this.jTt=!!i[9],this.VTt=!!i[2],this.HTt=!!i[10],this.UTt=i[3].map(t=>({sid:t[0],type:t[1],name:t[2],zTt:s.a1t(t[3])})),this.JTt=i[4],this.qTt=i[5],this.fMt=this.XMt.OL(),this.$Tt=G.Qh(G.Event.Pf),this.FU=null,s.gF().QO());if(this.XTt=G.Qh(G.YTt,h,n),this.ZTt=!0,this.KTt=null,this.QTt=null,this.t_t=-1,this.s_t=null,this.i_t=null,this.e_t=null,this.h_t=null,this.n_t=null,this.r_t=!1,this.o_t=null,this.a_t=i[8].map(t=>G.l_t.BM(this,t)),this.u_t=[],this.c_t=new Map,this.f_t=new Map,this.d_t=new Set,this.p_t=new Map,this.m_t=G.Qh(G.Pct,this),this.g_t=null,this.y_t=0,this.w_t=!1,this.o_t=null,this.ETt=null,this.S_t=null,this.b_t=null,this.v_t=null,this.M_t=0,this.iSt=new Map,this.eSt=new Map,this.S7=[],this.x_t=new Map,this.G_t=!0,this.XMt.jL()&&(this.FU=G.Qh(G.DU,this,i[12])),i[6]&&(this.ETt=G.Qh(G.HGt),this.ETt.sTt(i[6])),i[7]){this.S_t=i[7].map(t=>G.Qh(G.fTt,t)),this.b_t=new Map,this.v_t=new Map;for(const a of this.S_t)this.b_t.set(a.jc().toLowerCase(),a),this.v_t.set(a.Pz(),a)}this.VTt?(this.KTt=[],this.QTt=new Set,this.t_t=this.Xc.T_t()):(this.s_t=[],this.i_t=new Set,this.e_t=[],this.h_t=[],this.n_t=[]);const r=this.XMt.MSt();if(r<2&&(this.sxt=G.Qh(e.__t,this,i[15]),!(this.sxt instanceof G.$Mt)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.I_t=null,this.C_t=null,this.Fq=G.Qh(G.Event.Pf),G.RL.kMt(this,r);let o;if(o=2<=r?(o=e.__t)||globalThis.HW:this.sxt.DMt()){if(this.I_t=new o(r<2?this:null),r<2&&!(this.I_t instanceof ya))throw new TypeError("script interface class must derive from IObjectClass");if(2<=r&&!(this.I_t instanceof globalThis.HW))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.I_t=new ya;if(G.RL.NMt(r),i[13]){const l=i[13];if(l){const u=l[0],c=l[1],f=l[2];this.sxt.YMt(u,c,f)}}this.Xc.E_t()&&!this.VTt&&!this.HTt&&this.fMt||this.FMt(),this.XMt.FL()&&(this.XMt.OMt(this),this.R_t(i)),this.P_t=null}static BM(t,s,i){return G.Qh(G.hlt,t,s,i)}tn(){if(this.$Tt.tn(),this.$Tt=null,this.ETt&&(this.ETt.tn(),this.ETt=null),this.S_t){for(const t of this.S_t)t.tn();G.Pr(this.S_t),this.b_t.clear(),this.v_t.clear()}this.P_t=null,this.m_t.tn(),this.m_t=null,this.iSt.clear(),this.eSt.clear(),this.o_t=null,this.Xc=null}A_t(i){for(let t=1,s=i.length;t<s;++t){const e=this.Xc.KU(i[t]);this.KTt.push(e),this.QTt.add(e),e.s_t.push(this),e.i_t.add(this)}}F_t(t){this.r_t=!0,this.o_t=t}xN(){return this.r_t}h$(){return this.o_t}D_t(){let t=0;if(!this.VTt)for(const s of this.s_t)for(const i of s.O_t()){const e=i.jc().toLowerCase();this.c_t.set(e,i),this.f_t.set(e,t),this.u_t.push(i),++t}for(const h of this.O_t()){const n=h.jc().toLowerCase();this.c_t.set(n,h),this.f_t.set(n,t),this.u_t.push(h),++t}for(const r of this.u_t)this.d_t.add(r.h6().constructor);if(!this.VTt&&this.s_t.length){let t=this.Xc.L_t(),s=(G.Fr(this.e_t,t,0),G.Fr(this.h_t,t,0),G.Fr(this.n_t,t,0),[]),i=0,e=0,h=0;for(const o of this.s_t){const a=o.hwt(),l=(this.e_t[a]=i,i+=o.k_t(),this.h_t[a]=e,e+=o.N_t(),this.n_t[a]=h,h+=o.B_t(),o.Ek());if(l&&this.FU)for(const u of l.Rk())s.push(u.W_t(this.FU))}this.FU&&this.FU.j_t(s)}}R_t(t){const s=this.Xc.V_t(),i=G.Qh(G.Instance,{runtime:this.Xc,uN:this,uid:s});i.H_t(t[16],[]),this.Xc.U_t(s,i),this.S7.push(i)}wbt(){return this.sxt}z_t(){return this.HTt}Pf(){return this.$Tt}FMt(){this.VTt||(this.sxt?this.sxt.FMt():this.I_t.UW())}J_t(){return 0<this.M_t}async o$(t){this.VTt||(this.M_t++,1===this.M_t&&(this.sxt?await this.sxt.o$(t):await this.I_t.qW(this.Xc.dL().q_t())))}d$(){if(!this.VTt){if(this.M_t--,this.M_t<0)throw new Error("released textures too many times");0===this.M_t&&(this.sxt?this.sxt.d$():this.I_t.$W(this.Xc.dL().q_t()))}}u$(){if(this.VTt)throw new Error("not applicable to family");this.sxt?this.sxt.u$():this.I_t.XW()}async F$(t){this.VTt||(this.sxt?await this.sxt.F$(t):await this.I_t.YW(this.Xc.dL().q_t()))}GO(){return this.Xc}hk(){return this.XMt}$_t(){return this.WTt}jc(){return this.nn}a1t(){return this.Iyt}lF(){return this.Lg}Pz(){return this.K7}xz(){return this.VTt}lz(){return this.jTt}OL(){return this.fMt}hwt(){return this.t_t}O_t(){return this.a_t}N_t(){return this.JTt}X_t(t){return t&&this.d_t.has(t)}k_t(){return this.UTt.length}Y_t(){return this.UTt.map(t=>t.sid)}Z_t(s){return this.UTt.findIndex(t=>t.sid===s)}Ast(s){return this.UTt.findIndex(t=>t.name===s)}K_t(){return this.UTt.map(t=>t.name)}Q_t(){return this.UTt.map(t=>t.zTt)}Dst(t){if((t=Math.floor(t))<0||t>=this.UTt.length)throw new RangeError("invalid instance variable index");return this.UTt[t].type}Fst(t){if((t=Math.floor(t))<0||t>=this.UTt.length)throw new RangeError("invalid instance variable index");return this.UTt[t].name}B_t(){return this.qTt}tIt(){return this.u_t}rht(t){return this.c_t.get(t.toLowerCase())||null}Lst(t){const s=this.f_t.get(t.toLowerCase());return void 0===s?-1:s}Ek(){return this.FU}jL(){return this.XMt.jL()}sIt(){return this.FU&&this.FU.iIt()}Z1t(){return this.m_t}yk(){return this.m_t.yk()}O6(){return this.ETt}iz(t){this.g_t=t}sz(){return this.g_t}ez(t){this.y_t=t}eIt(){return this.y_t}hIt(){return this.S_t}nIt(){return this.S_t.length}m1t(){return this.s_t}xbt(t){return this.i_t.has(t)}Imt(){return this.KTt}Gz(t){return this.QTt.has(t)}lwt(t){return this.h_t[t]}ewt(t){return this.e_t[t]}cyt(t){this.p_t.set(t.gyt().toLowerCase(),t)}fyt(t){return!!this.Myt(t)}Myt(t){const s=this.p_t.get(t.toLowerCase());return s&&s.ju()?s:null}rIt(){return this.S_t}oIt(t){if(this.S_t)return this.b_t.get(t.toLowerCase())||null;throw new Error("no animations")}aIt(t){if(this.S_t)return this.v_t.get(t)||null;throw new Error("no animations")}lIt(t){if(this.oIt(t))throw new Error(`animation name '${t}' already exists`);const s=G.fTt.STt(this.GO(),t);return this.S_t.push(s),this.b_t.set(s.jc().toLowerCase(),s),this.v_t.set(s.Pz(),s),s}uIt(t){const s=this.oIt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.S_t.length)throw new Error("cannot remove last animation");const i=this.S_t.indexOf(s);this.S_t.splice(i,1),this.b_t.delete(s.jc().toLowerCase()),this.v_t.delete(s.Pz()),s.tn()}cIt(){if(this.S_t)return this.S_t[0];throw new Error("no animations")}fIt(){return this.cIt().xTt(0)}dIt(){if(this.S_t){const t=this.fIt().O6();return[t.Xp(),t.om()]}return this.ETt?[this.ETt.Xp(),this.ETt.om()]:[100,100]}sk(){if(this.XMt.FL())return this.S7[0];throw new Error("not a single-global plugin")}gk(){return this.S7}*instances(){yield*this.S7}*mk(){yield*this.S7,yield*this.Xc._vt(this)}Sk(){return this.S7.length}uz(t){this.S7.push(t)}pIt(){this.G_t=!0}z$(){if(this.G_t&&!this.VTt){let s=this.S7,i=0;for(let t=s.length;i<t;++i)s[i].mIt(i);const t=this.Xc.gIt();for(const e of t)e.cN()===this&&e.mIt(i++);this.G_t=!1}}yIt(t){const s=this.S7;if(t<s.length)return s[t];t-=s.length;const i=this.Xc.gIt();for(const e of i)if(e.cN()===this){if(0===t)return e;--t}return null}uvt(t){if(t&&t.xN()&&t.cN()!==this)for(const i of t.GN())if(i.cN()===this)return i;const s=this.yk().gk();return s.length?s[0]:null}pk(t){const s=this.yk().gk();return 0<s.length?s[t.V$()%s.length]:null}*Avt(t,s){let i=this.yk().gk(),e=i.length,h=s.yk(),n=s.yk().gk(),r=n.length,o=t.V$(),a=(!s.xz()&&h.Uct()||(o=n.indexOf(t)),Math.ceil(e/r)),l=e%r,u=0,c;c=0==l||o<l?(u=o*a,a):(u=l*a+(o-l)*(a-1),a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}DSt(t){this.sxt?.DSt(t)}Ogt(){if(this.r_t&&!this.VTt){this.z$();const t=this.yk(),s=t.Kct(),i=t.Uct(),e=this.Xc.K0t(),h=e&&e.JF()&&e.JF().aft();for(const n of this.o_t.H$())if(n!==this){n.z$();const r=n.yk();if(r.Zct(i),!i){const o=r.Kct();G.Pr(o);for(const a of s)o.push(n.yIt(a.V$()));if(h){const l=t.Qct(),u=r.Qct();G.Pr(u);for(const c of l)u.push(n.yIt(c.V$()))}}}}}BSt(t,s){for(const i of this.h$().H$()){const e=i.yk();t?G.Rr(e.Qct(),s):G.Rr(e.Kct(),s)}}wIt(){return this.XTt}SIt(t){this.ZTt=!!t}bIt(){if(this.ZTt&&this.fMt){for(const t of this.S7)t.eO().vIt();for(const s of this.Xc.gIt())s.cN()===this&&s.eO().vIt();this.ZTt=!1}}MIt(s,t,i){if(t){const e=this.x_t.get(t);e&&(e.delete(s),0===e.size)&&this.x_t.delete(t)}if(i){let t=this.x_t.get(i);t||(t=new Set,this.x_t.set(i,t)),t.add(s)}}xIt(){if(this.xz()){const t=new Set;for(const s of this.KTt)for(const i of s.xIt())t.add(i);return t.values()}return this.x_t.keys()}CSt(){return this.iSt||(this.iSt=new Map),this.iSt}ESt(){return this.eSt||(this.eSt=new Map),this.eSt}GIt(){return this.X_t(G.mat.solid)}TIt(){return this.X_t(G.mat.jumpthru)}_It(){return this.X_t(G.mat.NoSave)}oz(){return this.X_t(G.mat.Persist)}X9(){const t={instances:this.S7.map(t=>t.pv())};return this.iSt&&this.iSt.size&&(t.ex=G.Ro(this.iSt)),t}Y9(t,e){this.iSt&&(this.iSt.clear(),this.iSt=null);const s=t.ex,h=(s&&(this.iSt=G.Po(s)),this.S7),n=t.instances;for(let t=0,s=Math.min(h.length,n.length);t<s;++t)h[t].mv(n[t]);for(let t=n.length,s=h.length;t<s;++t)this.Xc.wN(h[t]);for(let i=h.length,t=n.length;i<t;++i){let t=n[i],s=null;if(!this.OL()||(s=this.Xc.OD().$q(t.w.l))){const r=this.Xc.az(this.g_t||this,s,!1,0,0,!0);r.mv(t),e&&e.add(r)}}this.P_t=n,this.pIt()}IIt(){return this.P_t}CIt(){this.P_t=null}EIt(){for(let t=0,s=this.S7;t<s;++t)this.S7[t].EIt()}KL(){return this.I_t}LF(){return this.Fq}RIt(){return this.C_t}bk(t){this.C_t=t}gX(t){const s=this.Xc,i=s.yX()&&!s.WF().Tk();i&&ga.StartMeasuringScriptTime(),this.Fq.dispatchEvent(t),i&&ga.AddScriptTime()}}}{const wa=self.Ds;wa.PIt=class extends wa.Zh{constructor(t,s){super(),this.Xc=t,this.AIt=s;for(const i of this.AIt)i.F_t(this)}tn(){this.Xc=null}GO(){return this.Xc}e$(){return this.AIt}H$(){return this.AIt}q$(){return this.AIt.some(t=>t.OL())}}}{let S=self.Ds,h=self.C3Debugger,r=S.RL,o=[],a=0,b=new WeakMap,e=new WeakMap;S.Instance=class extends S.Zh{constructor(t){if(S.RL!==r)throw new Error("invalid addon manager");super(),this.Xc=t.runtime,this.FIt=t.uN,this.nst=null,this.DIt=null,this.OIt=null,this.LIt=0,this.kIt=t.uid,this.NIt=a++,this.HSt=0,this.BIt=null;const s=S.Jr(t.tags),i=(0<s.length&&(this.BIt=new Set(s)),this.WIt=o,this.jIt=o,this.FIt.tIt()),e=(0<i.length&&(this.jIt=i.map((t,s)=>S.Qh(S.VIt,{runtime:this.Xc,n6:t,a6:this,index:s}))),this.HIt=this.FIt.xN()?[]:null,this.UIt=-1,this.$Tt=null,this.hk());if(e._b()&&(this.HSt|=4),e.OL())if(this.nst=S.Qh(S.zIt,this,t.T4),t.JIt)this.nst.qIt(t.JIt);else{this.nst.$It();const[h,n]=this.FIt.dIt();this.nst.kI(h,n),this.cN().sIt()&&this.nst.G4().XIt()}t.YIt?this.ZIt(t.YIt):this.KIt()}tn(){if(this.OIt&&(this.OIt.gN(),this.OIt=null),0<this.jIt.length){for(const i of this.jIt)i.tn();S.Pr(this.jIt)}this.DIt&&(this.DIt.tn(),this.DIt=null);const t=b.get(this),s=(t&&(t.clear(),b.delete(this)),e.get(this));s&&(s.clear(),e.delete(this)),this.HIt&&S.Pr(this.HIt),this.$Tt&&(this.$Tt.tn(),this.$Tt=null),this.BIt&&this.BIt.clear(),this.BIt=null,this.Xc=null,this.FIt=null,0<this.WIt.length&&S.Pr(this.WIt),this.nst&&(this.nst.tn(),this.nst=null)}ZIt(t){0<t.length&&(this.WIt=[],S.Or(this.WIt,t))}KIt(){const s=this.FIt.k_t();if(0!==s){this.WIt=[];const i=[0,0,""];for(let t=0;t<s;++t)this.WIt.push(i[this.FIt.Dst(t)])}}H_t(t,i){if(this.DIt)throw new Error("already got sdk instance");for(let t=0,s=this.jIt.length;t<s;++t){const e=this.jIt[t];e.H_t(i?i[t]:null)}const s=this.hk().MSt();if(s<2){if(this.DIt=S.Qh(this.FIt.$_t(),this,t),!(this.DIt instanceof S.QMt))throw new Error("sdk type must derive from SDKInstanceBase");!this.hk().OL()&&this.FIt.RIt()&&this.QD()}else{const h=this.hk().DMt();this.QIt(h.Instance,t)}}ZB(){return this.DIt??this.OIt}eO(){return this.nst}GO(){return this.Xc}gD(){return this.UIt}CN(){const t=this.UIt;return-1===t?this.GO().gD():t}yD(t){((t=+t)<0||!isFinite(t))&&(t=0),this.UIt=t,this.cN().sIt()&&this.Xc.tCt(this,!0)}RN(){this.UIt=-1,this.cN().sIt()&&this.Xc.tCt(this,!1)}k9(){return this.Xc.sCt(this)}Pf(){return this.$Tt||(this.$Tt=S.Qh(S.Event.Pf)),this.$Tt}Hv(t){this.DIt?this.DIt.Hv(t):this.OIt.ej(this.Xc.dL().q_t())}FMt(t){this.DIt.FMt(t)}iCt(){this.HSt|=2}eCt(){return 0!=(2&this.HSt)}hCt(){this.HSt|=1}Rj(){return 0!=(1&this.HSt)}_b(){return 0!=(4&this.HSt)||this.DIt._b()}nCt(){this.HSt|=32}C9(){return 0!=(32&this.HSt)}rCt(){return 0!=(8&this.HSt)}oCt(t){t?this.HSt|=8:this.HSt&=-9}aCt(){return 0!=(16&this.HSt)}lCt(t){t?this.HSt|=16:this.HSt&=-17}uCt(){return 0!=(64&this.HSt)}cCt(t){t?this.HSt|=64:this.HSt&=-65}fCt(t,s){t<<=16,s?this.HSt|=t:this.HSt&=~t}dCt(t){return 0!=(this.HSt&t<<16)}Lxt(){return this.DIt.Lxt()}kxt(){return this.DIt.kxt()}Nxt(){return this.DIt.Nxt()}Bxt(){return this.DIt.Bxt()}jxt(){return this.DIt.jxt()}Fbt(t){return this.DIt.Fbt(t)}cN(){return this.FIt}_9(){return this.DIt._9()}Ivt(t){return t.xz()?t.Gz(this.cN()):this.cN()===t}pCt(h,t,s){const i=(t,s)=>{const i=s||t.cN(),e=h.get(i);e?e.add(t):h.set(i,new Set([t]))};if(i(this,t),this.xN())for(const e of this.GN())i(e);if(s)for(const n of this.uB())i(n)}mCt(){if(!this.hk().zL())throw new Error("object does not support scene graph")}mB(){return null!==this.iB()}iB(){const t=this.eO();if(!t)return null;const s=t.iB();return s?s.TW():null}hB(){const t=this.eO();if(!t)return null;const s=t.hB();return s?s.TW():null}*nB(){const t=this.eO();if(t)for(const s of t.nB())yield s.TW()}gCt(t){if(t)for(const s of this.children())if(s===t)return!0;return!1}Q9(){const t=this.eO();return!!t&&t.Q9()}yCt(t){const s=this.eO();if(!s)return[];const i=t.jc();return s.sX().map(t=>t.TW()).filter(t=>t.cN().jc()===i)}sX(){const t=this.eO();return t?t.sX().map(t=>t.TW()):[]}*children(){const t=this.eO();if(t)for(const s of t.children())yield s.TW()}*uB(){const t=this.eO();if(t)for(const s of t.uB())yield s.TW()}oB(){const t=this.eO();return t?t.oB():0}wCt(){return[...this.nB()].length}Pvt(){const t=this.eO();return t?t.Pvt():0}lB(t){const s=this.eO();if(!s)return null;const i=s.lB(t);return i?i.TW():null}SCt(){const t=this.eO();if(!t)return NaN;const s=t.iB();return s?s.bCt(t):NaN}vCt(t){for(const s of this.eO().sX())if(s.TW().TN()===t)return!0;return!1}fB(t,s){this.mCt(),t.mCt(),this.eO().fB(t.eO(),s||{})}dB(t){const s=this.eO();s&&s.dB(t.eO())}OB(){const t=this.eO();return!!t&&t.OB()}R$(){const t=this.eO();if(t){const s=t.MCt();if(s)for(const i of s){const e=this.Xc.KD(i[2]);if(e){const h=i[3];this.fB(e,{yB:!!(h>>0&1),SB:!!(h>>1&1),vB:!!(h>>2&1),xB:!!(h>>3&1),TB:!!(h>>4&1),DB:!!(h>>5&1),IB:!!(h>>6&1),EB:!!(h>>7&1),PB:!!(h>>8&1)})}}}}P$(t,s){const i=t.get(this);if(i)for(const e of i.sceneGraphJson.children){const h=s.get(e.index);if(h){const n=e.flags;this.fB(h,{yB:!!(n>>0&1),SB:!!(n>>1&1),vB:!!(n>>2&1),xB:!!(n>>3&1),TB:!!(n>>4&1),DB:!!(n>>5&1),IB:!!(n>>6&1),EB:!!(n>>7&1),PB:!!(n>>8&1)})}}}IN(){const t=this.Xc.xCt();return t?t.rlt(this):""}xN(){return null!==this.HIt}U$(t){this.HIt.push(t)}vN(){return this.HIt}GCt(t){return!!this.TCt(t)}TCt(t){const s=this.GN();if(null===s||0===s.length)return!1;for(const i of s)if(i.cN()===t)return i;return null}GN(){return this.HIt}Bpt(){for(const t of this.GN())t.cN().yk().tft(t)}OSt(){for(const t of this.GN())t.cN().yk().Xct(t)}LSt(t){for(const s of this.GN())s.cN().yk().Kct()[t]=s}NSt(){for(const t of this.GN())t.cN().yk().Yct(t)}kSt(t){for(const s of this.GN())s.cN().yk().Qct()[t]=s}hk(){return this.FIt.hk()}mIt(t){this.LIt=t}V$(){return this.FIt.z$(),this.LIt}TN(){return this.kIt}_Ct(){return this.NIt}ICt(t){t?this.DN(new Set(t)):this.BIt=null}DN(t){if(0===t.size)this.BIt=null;else{this.BIt?this.BIt.clear():this.BIt=new Set;for(const s of t)this.BIt.add(s)}}AN(){return this.BIt??new Set}Kvt(){return Array.from(this.AN()).join(" ")}s2t(t){t=Math.floor(t);for(const s of this.AN()){if(0===t)return s;--t}return""}nht(){return this.jIt}CCt(t){if(t)for(const s of this.jIt)if(s.h6()instanceof t)return s;return null}gat(t){if(!t)return null;const s=this.CCt(t);return s?s.ZB():null}hht(i){const e=this.jIt;for(let t=0,s=e.length;t<s;++t)if(e[t].o6().Pz()===i)return t;return-1}ECt(){return this.WIt}K_t(){return this.FIt.K_t()}RCt(){return this.WIt.length}gnt(t){const s=this.WIt;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}swt(t){return this.WIt[t]}PCt(t){const s=this.WIt[t];return 0===this.FIt.Dst(t)?!!s:s}ynt(t,s){const i=this.WIt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=this.FIt.Dst(t);switch(e){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}art(t,s){if(0!==s){const i=this.WIt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}}CSt(){let t=b.get(this);return t||(t=new Map,b.set(this,t)),t}ESt(){let t=e.get(this);return t||(t=new Map,e.set(this,t)),t}ACt(t){const s=this.cN();if(s.LF().Lf(t))return!0;for(const i of s.m1t())if(i.LF().Lf(t))return!0;return!!this.Xc.LF().Lf(t)}Gk(){const t=new Set,s=(t.add(this),this.eO());if(s&&s.Q9())for(const i of this.uB())if(t.add(i),i.xN())for(const e of i.GN())t.add(e);if(this.xN())for(const h of this.GN())t.add(h);for(const n of t.values())n.A$()}FCt(){this.FIt.RIt()&&this.QD();for(const t of this.jIt)t.MGt()}DCt(){this.FCt()}A$(){if(this.FCt(),this.ACt("instancecreate")){const t=this.cN(),s=new S.Event("instancecreate");s.a6=this.QD(),t.gX(s);for(const i of t.m1t())i.gX(s);this.Xc.gX(s)}this.Xc.YN(this.hk().Tdt().k$.h2t,this,null)}OCt(){this.Xc.YN(this.hk().Tdt().k$.n2t,this,null)}LCt(t){if(this.OIt){const s=new S.Event("destroy");s.kCt=t,this.gX(s)}if(this.ACt("instancedestroy")){const i=this.cN(),e=new S.Event("instancedestroy");e.a6=this.QD(),e.kCt=t,i.gX(e);for(const h of i.m1t())h.gX(e);this.Xc.gX(e)}}NCt(){return this.DIt?this.DIt.xxt():this.OIt.l4()}pv(t="full",s=null){const i={},e=("full"===t?i.uid=this.TN():i.c3=!0,this.AN());if(0<e.size&&(i.tags=Array.from(e)),"visual-state"!==t){const n=b.get(this);if(n&&n.size&&(i.ex=S.Ro(n)),-1!==this.gD()&&(i.mts=this.gD()),0<this.FIt.k_t()){const r={},o=this.FIt.Y_t();for(let t=0,s=this.WIt.length;t<s;++t)r[o[t].toString()]=this.WIt[t];i.ivs=r}if(this.jIt.length){const a={};for(const l of this.jIt){const u=l.pv(t);u&&(a[l.o6().Pz().toString()]=u)}i.behs=a}}this.nst&&(i.w=this.nst.X9(t,s));const h=this.DIt?this.DIt.pv():this.OIt.u4();return h&&(i.data=h),i}dY(t="full",s){this.nst&&this.nst.dY(t)}mY(t,s="full",i=null){this.nst&&this.nst.mY(t,s,i)}BCt(t,s="full",i=null){this.nst&&this.nst.BCt(t,s,i)}EIt(){this.hk().OL()&&this.nst.EIt()}mv(s,t="full",i){if("full"===t)this.kIt=s.uid;else if(!s.c3)return;if(this.ICt(s.tags),"visual-state"!==t){let t=b.get(this);t&&(t.clear(),b.delete(this));const h=s.ex,n=(h&&(t=S.Po(h),b.set(this,t)),this.UIt=s.hasOwnProperty("mts")?s.mts:-1,s.ivs);if(n)for(const[r,o]of Object.entries(n)){const a=parseInt(r,10),l=this.FIt.Z_t(a);if(!(l<0||l>=this.WIt.length)){let t=o;null===t&&(t=NaN),this.WIt[l]=t}}}if(this.hk().OL()){const u=s.w;if(u){const c=u.l;if(this.nst.hO().Pz()!==c){const f=this.nst.hO(),d=f.BD().$q(c);d?(this.nst.aO(d),f.dz(this,!0),d.uz(this,!0),d.lO(this),this.nst._4()):"full"===t&&this.Xc.wN(this)}this.nst.Y9(u,t)}}if("visual-state"!==t){const p=s.behs;if(p)for(const[m,g]of Object.entries(p)){const y=parseInt(m,10),w=this.hht(y);w<0||w>=this.jIt.length||this.jIt[w].mv(g,t)}}const e=s.data;e&&(this.DIt?this.DIt.mv(e,t):this.OIt.c4(e))}QD(){return this.OIt||this.QIt()}Ixt(){return!!this.OIt}QIt(t,s){const i=this.nst?t?self.ZW:self.JB:t?self.NN:self.lN,e=t||this.DIt.DMt(),h=this.FIt.RIt(),n=h||e||i,r=this.hk().MSt();if(S.RL.kMt(this,r),S.RL.NGt(s),this.OIt=new n,S.RL.BGt(),S.RL.NMt(r),e&&!(this.OIt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(h){const o=e||i;if(!(this.OIt instanceof o))throw new TypeError(`setInstanceClass(): class '${h.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.OIt}fN(t){if(0!==this.WIt.length){const i={},e=this.FIt.Q_t();for(let t=0,s=e.length;t<s;++t)i[e[t]]={configurable:!1,enumerable:!0,get:S.Instance.prototype.PCt.bind(this,t),set:S.Instance.prototype.ynt.bind(this,t)};const s=Object.create(Object.prototype,i);t.WCt={value:s,writable:!1}}}dN(t){const s=this.jIt;if(0!==s.length){const i={};for(const h of s)i[h.o6().a1t()]={value:h.nxt(),writable:!1};const e=Object.create(Object.prototype,i);t.Tpt={value:e,writable:!1}}}gX(t){if(this.Ixt()){const s=this.QD(),i=(t.a6=s,this.Xc),e=i.yX()&&!i.WF().Tk();e&&h.StartMeasuringScriptTime(),s.dispatchEvent(t),e&&h.AddScriptTime()}}}}{const Sa=self.Ds;Sa.eX=class extends Sa.Zh{constructor(e){super(),this.Mv=e,this.zpt=null,this.jCt=[],this.VCt=e.Xp(),this.HCt=e.om(),this.UCt=1,this.zCt=1,this.JCt=0,this.qCt=1,this.$Ct=e.fR(),this.XCt=null,this.YCt=null,this.ZCt=NaN,this.KCt=!1,this.iq=NaN,this.eq=NaN,this.QCt=t=>{if(t.a6===this.zpt.TW()){const s=e.GO(),i=(s.Pf().removeEventListener("instancecreate",this.QCt),this.zpt.TW().ZB());this.KCt=!!i.Xst(),this.iq=this.KCt?i.$st():NaN,this.eq=this.KCt?i.Zst():NaN}}}tn(){this.zpt=null,this.XCt=null,this.YCt=null,this.ZCt=NaN,this.KCt=!1,this.iq=NaN,this.eq=NaN,Sa.Pr(this.jCt)}tEt(t){if(this.qCt=this.Mv.fR(),this.$Ct=this.qCt,this.zpt=t,this.JCt=t?t.kk():0,this.zpt){const s=this.Mv,i=s.GO(),e=this.zpt.TW().hk().MSt();if(e<2){const h=this.zpt.TW().ZB();h?(this.KCt=!!h.Xst(),this.iq=this.KCt?h.$st():NaN,this.eq=this.KCt?h.Zst():NaN):this.zpt.TW().Rj()||i.Pf().addEventListener("instancecreate",this.QCt)}else this.KCt=!1,this.iq=NaN,this.eq=NaN}else this.KCt=!1,this.iq=NaN,this.eq=NaN}iB(){return this.zpt}Q9(){return 0<this.jCt.length}sX(){return this.jCt}sEt(){this.Q9()&&1!==this.jCt.length&&(this.YCt?this.jCt.sort((t,s)=>{const i=this.YCt.get(t.TW()),e=this.YCt.get(s.TW());return Sa.le(i)&&Sa.le(e)?i-e:0}):this.jCt.sort((t,s)=>{const i=t.Int().iEt(),e=s.Int().iEt();return Sa.le(i)&&Sa.le(e)?i-e:0}))}iEt(){return this.ZCt}Cnt(){return this.UCt}eEt(t){this.UCt=t}Rnt(){return this.zCt}hEt(t){this.zCt=t}Nnt(){return this.$Ct}svt(){return this.qCt}nEt(t){this.qCt=t}_nt(){return 0===this.VCt?Number.EPSILON:this.VCt}Ent(){return 0===this.HCt?Number.EPSILON:this.HCt}rEt(){if(this.Mv.MB()){let t=this.zpt,s=t.Xp(),i=t.Int()._nt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.KCt?1+s/this.iq:s/i}return 1}oEt(){if(this.Mv.GB()){let t=this.zpt,s=t.om(),i=t.Int().Ent();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.KCt?1+s/this.eq:s/i}return 1}aEt(){return 0}lEt(){return{sw:this.VCt,sh:this.HCt,sx:this.UCt,sy:this.zCt,psa:this.JCt,oo:this.qCt,so:this.$Ct,pi:this.Mv.TW().SCt()}}X9(t,s=null){const i=this.lEt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.uEt(t),c:this.cEt(t)})}fEt(t){let s="";return t.wB()&&(s+="x"),t.bB()&&(s+="y"),t.MB()&&(s+="w"),t.GB()&&(s+="h"),t._B()&&(s+="a"),t.CB()&&(s+="z"),t.OB()&&(s+="d"),t.RB()&&(s+="o"),t.AB()&&(s+="v"),s}uEt(t){return this.zpt&&this.zpt.TW()&&!this.zpt.TW().Rj()?this.dEt(this.zpt,this.Mv,t):null}cEt(s){return this.jCt.map(t=>this.dEt(t,t,s)).filter(t=>t)}dEt(t,s,i){const e=t.TW();if(e&&e.Rj())return null;const h={};return h.uid=e.TN(),h.f=this.fEt(s),h.offsets=s.pEt(),h.data=Sa.eX.mEt(e),h.oci=e.cN().lF(),"state"===i?(h.inst=e.pv("full",{selfOnly:!0}),h.instIndex=NaN):(h.instIndex=e.cN().gk().indexOf(e),h.inst=null),h}Y9(t){this.VCt=t.sw,this.HCt=t.sh,this.UCt=t.sx,this.zCt=t.sy,this.JCt=t.psa,this.qCt=t.oo,this.$Ct=t.so,this.ZCt=Sa.le(t.pi)?t.pi:NaN}gEt(t,s){if(!t&&!s&&this.XCt)for(const i of this.XCt)i.Rj()||i.mB()||i.GO().wN(i);this.XCt=t,this.YCt=s}mY(t,s){const i=this.Mv,e=i.GO(),h=new Set;if(t.p&&!this.zpt){const o=t.p.uid,a=e.KD(o);if(s?.p2t,a){const l=a.eO();if(a.gCt(i.TW()))this.zpt=l;else{a.vCt(i.TW().TN())?e.wN(i.TW()):a.fB(i.TW(),this.yEt(t.p.f)),h.has(i)||(i.wEt(t.p.offsets),this.SEt(a,t.p,s)),h.add(i);const u=a.eO();u.Int().sEt()}}else if(Sa.le(t.p.oci)){const c=e.KU(t.p.oci),f=(e.jyt(),e.vk(c,i.hO(),0,0,!0));if(s?.p2t,f){const d=this.bEt(t.p,e),p=(d&&f.mv(d),f.eO()),m=(p.hO().Mk(f),f.fB(i.TW(),this.yEt(t.p.f)),f.eO());m.Int().sEt()}}}const n=[];for(const g of t.c){const y=g.uid,w=e.KD(y);w&&n.push(w)}let r=0;for(const S of t.c){const b=S.uid,v=e.KD(b);if(s?.p2t,v){if(this.XCt){if(this.XCt.includes(v)){const T=v;if(T.cN()!==v.cN()){r++;continue}if(T.Rj()){r++;continue}const _=t.c[r];if(!s?.p2t&&this.vEt(T,n,i)){this.MEt(r,_,i,h,s),r++;continue}if(T.mB()&&T.iB()!==i.TW()){const I=this.xEt(_,s);this.GEt(I,_,h,s),r++;continue}this.GEt(T.eO(),_,h,s,!0),r++;continue}if(this.XCt[r]){const C=this.XCt[r];if(C.cN()!==v.cN()){r++;continue}if(C.Rj()){r++;continue}const E=t.c[r];if(!s?.p2t&&this.vEt(C,n,i)){this.MEt(r,E,i,h,s),r++;continue}if(C.mB()&&C.iB()!==i.TW()){const R=this.xEt(E,s);this.GEt(R,E,h,s),r++;continue}this.GEt(C.eO(),E,h,s,!0),r++;continue}}const M=v.cN(),x=this.TEt(n,M),G=i.TW().yCt(M).length;if(x===G){const P=i.TW().lB(r);if(P){const A=P.eO();A&&(h.has(A)||(A.wEt(S.offsets),this.SEt(P,S,s)),h.add(A))}r++;continue}if(v.mB()&&v.iB()!==i.TW()){const F=this.xEt(S,s);this.GEt(F,S,h,s),r++;continue}this.GEt(v.eO(),S,h,s)}else if(this.XCt&&this.XCt[r]){const D=this.XCt[r],L=e.KU(this._Et(S));if(D.cN()!==L){r++;continue}if(D.Rj()){r++;continue}const O=t.c[r];if(!s?.p2t&&this.vEt(D,n,i)){this.MEt(r,O,i,h,s),r++;continue}if(D.mB()&&D.iB()!==i.TW()){const k=this.xEt(O,s);this.GEt(k,O,h,s),r++;continue}this.GEt(D.eO(),O,h,s)}else{const N=this.xEt(S,s);this.GEt(N,S,h,s)}r++}}vEt(t,s,i){const e=t.cN(),h=this.TEt(s,e),n=i.TW().yCt(e).length;return h===n}MEt(t,s,i,e,h){const n=i.TW().lB(t,s);if(n){const r=n.eO();r&&(e.has(r)||(r.wEt(s.offsets),this.SEt(n,s,h)),e.add(r))}}yEt(t){const s={};return s.yB=t.includes("x"),s.SB=t.includes("y"),s.vB=t.includes("w"),s.xB=t.includes("h"),s.TB=t.includes("a"),s.IB=t.includes("z"),s.DB=t.includes("d"),s.EB=t.includes("o"),s.PB=t.includes("v"),s}_Et(t){return Sa.le(t.oci)?t.oci:t[1]}xEt(e,h){if(Sa.le(e.oci)){let t=this.Mv,s=t.GO(),i;if(e.data)i=s.az(e.data,t.hO(),!1,0,0,!1,!0);else{const n=s.KU(e.oci);i=s.vk(n,t.hO(),0,0,!0)}if(h?.p2t,i){const r=this.bEt(e,s),o=(r&&i.mv(r),i.eO());return o.hO().Mk(i,!0),o}}}GEt(t,s,i,e,h=!0){const n=this.Mv,r=n.fB(t,this.yEt(s.f));r&&h&&(i.has(t)||(t.wEt(s.offsets),this.SEt(t.TW(),s,e)),i.add(t)),this.sEt()}SEt(t,s,i){let e=this.bEt(s,this.Mv.GO());e&&((e=JSON.parse(JSON.stringify(e))).w=null,t.mv(e))}TEt(t,s){return t.filter(t=>t.cN().jc()===s.jc()).length}bEt(t,s){if(Sa.le(t.instIndex)){const i=s.KU(t.oci),e=i.IIt();return e?e[t.instIndex]:null}return Sa.Se(t.inst)?JSON.parse(t.inst):t.inst||void 0}static mEt(t){let s=t.eO().hO().hz(t.TN());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const e of[...t.sX()]){const h=e.eO();i.push([h.BD().Pz(),h.hO().lF(),e.TN(),Sa.eX.iX(h),e.cN().xN()?1:0,h.nO(),Sa.eX.mEt(e)])}return Sa.Oe(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=Sa.eX.IEt(),s[0][14][1]=i,s[0][14][2]=t.eO().nO()),s}static iX(t){let s=0;return(s|=Number(t.AB())<<8)|Number(t.RB())<<7|Number(t.CB())<<6|Number(t.OB())<<5|Number(t._B())<<4|Number(t.GB())<<3|Number(t.MB())<<2|Number(t.bB())<<1|Number(t.wB())<<0}static IEt(t){let s=0;return s,511}}}{let d=self.Ds,t=self.ys,n=(t.Ts,d.Qh(d.Rect)),r=d.Qh(d.Hl),s=d.Qh(d.Event,"bboxchange",!1),f=d.Qh(d.Oo,0,0,0,0),u=d.Qh(d.xu),i=d.Qh(d.Oo,1,1,1,1),o=d.Qh(d.Rect,0,0,-1,-1),h=d.Qh(d.Rect,0,0,-1,-1),p=new Set(["absolute","relative"]),e=[],m=!0,g=new WeakMap,a=new WeakMap;d.zIt=class extends d.Zh{constructor(t,s){super(),this.bi=t,this.Act=t.cN(),this.Xc=t.GO(),this.CEt=s,this.Act.MIt(this,null,s),this.EEt=-1,this.REt=-1,this.HSt=196635,this.Act.hk().BL()&&(this.HSt|=128),this.Ua=NaN,this.za=NaN,this.Bb=NaN,this.PEt=NaN,this.AEt=NaN,this.tM=NaN,this.Bo=NaN,this.FEt=NaN,this.DEt=NaN,this.OEt=NaN,this.LEt=NaN,this.kEt=d.Qh(d.Rect),this.NEt=d.Qh(d.Hl),this.BEt=h,this.WEt=o,this.jEt=null,this.VEt=null,this.HEt=null,this.Nb=i,this.UEt=i,this.zEt=null,this.JEt=null,this.bi.cN().sIt()&&(this.JEt=d.Qh(d.qEt,this.bi,this)),this.$Et=null,this.XCt=null,this.YCt=null,this.XEt=-1,this.YEt=null}hCt(){this.HSt|=256}tn(){if(this.Act.MIt(this,this.CEt,null),this.zEt&&(this.Xc.vb().Jw(this.zEt),this.zEt=null),this.jEt=null,this.VEt&&(this.VEt.ZEt.tn(),this.VEt=null),this.HEt&&(this.HEt.clear(),this.HEt=null),this.BB(),this.JEt&&this.JEt.tn(),this.mB()&&this.iB().dB(this),this.Q9()){const t=[...this.sX()];for(const s of t)this.dB(s)}this.KEt(),this.QEt(),g.delete(this),a.delete(this),this.bi=null,this.Act=null,this.Xc=null,this.CEt=null}qIt(t){if(m=!1,this.I4(t[0],t[1]),this.rv(t[2]),this.kI(t[3],t[4]),this.tM=0,this.BL()?this.Lk(t[6]):this.Bo=0,f.Aa(t[7]),this.tRt(f),this.Wnt(t[8]),this.Vnt(t[9]),this.jb(t[10]),this.JEt&&this.JEt.sRt(t[12]),t[14]&&g.set(this,{iRt:t[14][1],eRt:t[14][2]}),t[15]){const s=t[15],e=(this.kB(s[0],s[1]),this.UB()),h=s[2];for(let i=0,t=h.length;i<t;++i){const n=h[i];for(let t=0,s=n.length;t<s;++t){const r=n[t],o=e.jv(t,i);o.Qb(r[0]),o.hv(r[1]),o.rv(r[2]),o.av(r[3]),o.uv(r[4])}}}if(t[16]){const i=t[16][0],a=t[16][1],l=!!a,u=!l,c=this.Xc.xCt();l&&c&&c.nlt(this.TW(),a),u&&c&&c.nlt(this.TW(),i)}m=!0,this.hRt()}$It(){this.Ua=0,this.za=0,this.Bb=0,this.PEt=0,this.AEt=0,this.tM=0,this.Bo=0,this.FEt=0,this.DEt=1,this.OEt=0,this.LEt=0,this.hRt()}GO(){return this.Xc}cN(){return this.Act}TW(){return this.bi}nRt(){return this._B()?this.rRt(this.iB().oRt()-this.$Et.aEt()):0}Qb(t){if(t=+t,this.wB()){const s=this.$Et,i=t-this.Kb(),e=-this.nRt();0==e?this.Ua+=i/s.rEt():(this.Ua+=Math.cos(e)*i/s.rEt(),this.bB()&&(this.za+=Math.sin(e)*i/s.oEt()))}else this.Ua=t}Mnt(t,s=!1){t=+t,!s&&this.wB()?this.Qb(this.Kb()+t):this.Ua+=t}Kb(){if(this.wB()){let t=this.Ua,s=this.$Et,i=this.iB(),e=this.nRt();return 0===e?t*=s.rEt():(t=t*s.rEt()*Math.cos(e),this.bB()&&(t-=this.za*s.oEt()*Math.sin(e))),i.Kb()+t}return this.Ua}hv(t){if(t=+t,this.bB()){const s=this.$Et,i=t-this.sv(),e=-this.nRt();0==e?this.za+=i/s.oEt():(this.wB()&&(this.Ua-=Math.sin(e)*i/s.rEt()),this.za+=Math.cos(e)*i/s.oEt())}else this.za=t}xnt(t,s=!1){t=+t,!s&&this.bB()?this.hv(this.sv()+t):this.za+=t}sv(){if(this.bB()){let t=this.za,s=this.$Et,i=this.iB(),e=this.nRt();return 0===e?t*=s.oEt():(t=t*s.oEt()*Math.cos(e),this.wB()&&(t+=this.Ua*s.rEt()*Math.sin(e))),i.sv()+t}return this.za}I4(t,s){if(t=+t,s=+s,this.aRt()){const i=this.wB(),e=this.bB(),h=this.$Et,n=t-this.Kb(),r=s-this.sv(),o=-this.nRt();if(0==o)i?this.Ua+=n/h.rEt():this.Ua=t,e?this.za+=r/h.oEt():this.za=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.Ua+=e?(l*n-a*r)/h.rEt():l*n/h.rEt():this.Ua=t,e?this.za+=i?(a*n+l*r)/h.oEt():l*r/h.oEt():this.za=s}}else this.Ua=t,this.za=s}lRt(){return[this.Kb(),this.sv()]}R4(t,s){t=+t,s=+s,this.aRt()?this.I4(this.Kb()+t,this.sv()+s):(this.Ua+=t,this.za+=s)}Pbt(t,s){return this.Kb()===t&&this.sv()===s}rv(t){if(t=+t,this.CB()&&(t-=this.iB().nv()),this.Bb!==t){this.Bb=t,this.uRt();const s=this.hO();0!==this.Bb&&s.gz(),s.lO(this)}}uRt(){if(this.hRt(),this.Q9()){const i=this.sX();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.CB()&&e.uRt()}}}Hnt(t){this.rv(this.nv()+t)}nv(){return this.CB()?this.iB().nv()+this.Bb:this.Bb}A4(){return this.hO().nv()+this.nv()}Xst(){const t=this.TW().hk().MSt();return t<2&&this.TW().ZB().Xst()}hm(t){if(t=+t,this.MB()){const s=this.Xp();0===s?this.PEt=Number.EPSILON:this.PEt*=t/s}else this.PEt=t;this.cRt()}Am(t,s){t=+t,!s&&this.MB()?this.hm(this.Xp()+t):this.PEt+=t,this.cRt()}Xp(){if(this.MB()){const t=this.iB(),s=t.Xp(),i=t.Int()._nt();return i===Number.EPSILON?(this.Int()._nt()+s)*this.PEt:s*this.PEt}return this.PEt}Yp(t){if(t=+t,this.GB()){const s=this.om();0===s?this.AEt=Number.EPSILON:this.AEt*=t/s}else this.AEt=t;this.cRt()}Pnt(t,s){t=+t,!s&&this.GB()?this.Yp(this.om()+t):this.AEt+=t,this.cRt()}om(){if(this.GB()){const t=this.iB(),s=t.om(),i=t.Int().Ent();return i===Number.EPSILON?(this.Int().Ent()+s)*this.AEt:s*this.AEt}return this.AEt}kI(t,s){if(t=+t,s=+s,this.MB()){const i=this.Xp();0===i?this.PEt=Number.EPSILON:this.PEt*=t/i}else this.PEt=t;if(this.GB()){const e=this.om();0===e?this.AEt=Number.EPSILON:this.AEt*=s/e}else this.AEt=s;this.cRt()}$u(){return[this.Xp(),this.om()]}I9(){return this.tM}fRt(t){if(t<0)throw new RangeError("invalid depth");this.tM=t}dRt(){if(this.mB()){const t=this.$Et;return Math.min(t.rEt(),t.oEt())}return 1}BL(){return 0!=(128&this.HSt)}Lk(t){t=+t,this.BL()&&(this._B()&&(t-=this.iB().kk()),t=d.ln(t),this.Bo!==t)&&(this.Bo=t,this.cRt())}Ant(t){0!=(t=+t)&&this.BL()&&(this.Bo=d.ln(this.Bo+t),this.cRt())}cRt(){if(this.HSt|=1<<18,this.Q9()){const i=this.sX();for(let t=0,s=i.length;t<s;t++)i[t].cRt()}}kk(){return this._B()&&this.BL()?this.rRt(d.ln(this.iB().oRt()+this.Bo)):this.Bo}oRt(){return this._B()&&this.BL()?d.ln(this.iB().oRt()+this.Bo):this.Bo}rRt(t){return this.MB()&&this.hB().Xp()<0&&(t=d.ln(d.Mn(t,this.hB().kk()+Math.PI))),this.GB()&&this.hB().om()<0?d.Mn(t,this.hB().kk()):t}pRt(){const t=this.iB();return!!(this.MB()&&t.Xp()<0)||!!(this.GB()&&t.om()<0)}mRt(){const t=this.iB();return!!(this.MB()&&t.Xp()<0&&this.GB()&&t.om()<0)}gRt(){const t=this.HSt;if(0!=(t&1<<18)){const s=this.kk();this.FEt=Math.sin(s),this.DEt=Math.cos(s),this.HSt=-262145&t}}Lbt(){return this.gRt(),this.FEt}Obt(){return this.gRt(),this.DEt}Wnt(t){this.OEt=+t}Bnt(t){this.OEt+=+t}N6(){return this.OEt}Vnt(t){this.LEt=+t}jnt(t){this.LEt+=+t}W6(){return this.LEt}tRt(t){this.Nb.equals(t)||(this.Nb===i?(this.Nb=d.Qh(d.Oo,t),this.UEt=d.Qh(d.Oo,t),this.UEt.ua()):t.ra(1,1,1,1)?(this.Nb=i,this.UEt=i):(this.Nb.set(t),this.UEt.set(t),this.UEt.ua()),this.hRt())}pR(t){if(t=d.an(+t,0,1),this.RB()){if(this.Int().svt()===t)return;this.Int().nEt(t),t=this.fR()}else if(this.Nb.a===t)return;this.yRt(t)}wRt(){if(this.Q9()){const i=this.sX();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.yRt(e.fR())}}}yRt(t){f.$o(this.Nb),f.a=t,this.tRt(f),this.wRt()}Ont(t){this.RB()?this.pR(this.Int().svt()+t):this.pR(this.fR()+t)}fR(){return this.RB()?this.iB().fR()*this.Int().svt():this.Nb.a}V4(t){this.Nb.ea(t)||(f.$o(t),f.a=this.fR(),this.tRt(f))}pnt(t,s,i){f.jo(t,s,i),this.V4(f)}SRt(t,s,i){0===t&&0===s&&0===i||(f.$o(this.Nb),f.r+=t,f.Fa+=s,f.b+=i,this.V4(f))}j4(){return this.Nb}LU(){return this.UEt}OB(){return 0!=(512&this.HSt)}bRt(t){this.vRt(512,t)}wB(){return 0!=(1024&this.HSt)}MRt(t){this.vRt(1024,t)}bB(){return 0!=(2048&this.HSt)}aRt(){return 0!=(3072&this.HSt)}xRt(t){this.vRt(2048,t)}MB(){return 0!=(4096&this.HSt)}GRt(t){this.vRt(4096,t)}GB(){return 0!=(8192&this.HSt)}TRt(t){this.vRt(8192,t)}_B(){return 0!=(16384&this.HSt)}_Rt(t){this.vRt(16384,t)}CB(){return 0!=(32768&this.HSt)}IRt(t){this.vRt(32768,t)}RB(){return 0!=(this.HSt&1<<22)}CRt(t){this.vRt(1<<22,t)}AB(){return 0!=(this.HSt&1<<23)}ERt(t){this.vRt(1<<23,t)}RRt(){this.HSt&=-12647937}fB(t,s){if(t===this)return!1;if(t.mB())return!1;if(this.PRt(t))return!1;if(this.ARt(t))return!1;const i=t.Kb(),e=t.sv(),h=t.Xp(),n=t.om(),r=t.kk(),o=t.nv(),a=t.fR(),l=(t.FRt(this),t.MRt(s.yB),t.xRt(s.SB),t.GRt(s.vB),t.TRt(s.xB),t._Rt(s.TB),t.IRt(s.IB),t.CRt(s.EB),t.ERt(s.PB),t.bRt(s.DB),i-this.Kb()),u=e-this.sv(),c=-this.kk(),f=Math.cos(c),d=Math.sin(c);if(s.yB&&(s.TB?t.Ua=l*f-u*d:t.Ua=l,s.vB)){const p=this.Xp()/this.$Et._nt();0!=p&&(t.Ua/=p)}if(s.SB&&(s.TB?t.za=l*d+u*f:t.za=u,s.xB)){const m=this.om()/this.$Et.Ent();0!=m&&(t.za/=m)}if(s.vB){const g=this.Xp();0===g||g===Number.EPSILON?(t.PEt=1,t.$Et.eEt(1)):(t.PEt=h/this.Xp(),t.$Et.eEt(t.PEt))}if(s.xB){const y=this.om();0===y||y===Number.EPSILON?(t.AEt=1,t.$Et.hEt(1)):(t.AEt=n/this.om(),t.$Et.hEt(t.AEt))}return s.TB&&(t.Bo=r-this.kk()),s.IB&&(t.Bb=o-this.nv()),s.EB&&t.$Et.nEt(a),s.PB&&t.S5(this.v5()),this.DRt(t),this._4(),this.wRt(),!0}dB(t){if(t.iB()===this){const s=t.Kb(),i=t.sv(),e=t.Xp(),h=t.om(),n=t.kk(),r=t.nv(),o=t.fR();t.FRt(null),t.RRt(),t.I4(s,i),t.kI(e,h),t.Lk(n),t.rv(r),t.pR(o),this.ORt(t),this._4()}}LRt(){return this.XEt}kRt(){this.NRt();const t=[...this.children()];for(const i of t)this.dB(i);const s=this.iB();s&&s.dB(this),this.RRt()}NRt(){if(this.BRt(),!this.XCt){const s=[...this.children()];s.length&&(this.XCt=[],this.YCt=new WeakMap);let t=0;for(const i of s){const e=i.TW();this.XCt.push(e),this.YCt.set(e,t),t++}}const t=this.iB();t&&t.NRt()}BRt(){if(-1===this.XEt){const t=[...this.nB()];this.XEt=t.length;for(const i of t)i.BRt();const s=[...this.children()];for(const e of s)e.BRt()}}QEt(){this.XCt&&(this.XCt.length=0),this.XCt=null,this.YCt=null;const t=this.iB();t&&t.QEt(),this.XEt=-1}mB(){return null!==this.iB()}iB(){const t=this.$Et;return null!==t?t.iB():null}hB(){let t=this;for(;t.mB();)t=t.iB();return t}*nB(){let t=this.iB();for(;t;)yield t,t=t.iB()}gCt(t){return this.sX().includes(t)}Q9(){const t=this.$Et;return null!==t&&t.Q9()}sX(){const t=this.$Et;return null!==t?t.sX():e}children(){return this.sX()}*uB(){for(const t of this.children())yield t,yield*t.uB()}oB(){return this.sX().length}Pvt(){return[...this.uB()].length}lB(t){const s=this.sX();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}bCt(s){if(s){const i=this.sX();if(i)for(let t=0;t<i.length;t++)if(s===i[t])return t}return NaN}WRt(t){this.$Et||(this.$Et=d.Qh(d.eX,this)),t&&this.$Et.tEt(t)}Int(){return this.$Et}KEt(){this.$Et&&(this.$Et.tn(),this.$Et=null)}FRt(t){t?(t.WRt(null),this.WRt(t)):(this.$Et&&this.$Et.tEt(null),this.Q9()||this.KEt())}ARt(t){if(!this.mB())return!1;const s=this.iB();return s===t||s.ARt(t)}PRt(t){if(this.gCt(t))return!0;for(const s of this.sX())if(s.PRt(t))return!0;return!1}DRt(t){this.$Et.sX().push(t)}ORt(t){const s=this.$Et.sX(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.mB()||this.KEt(),t.Q9()||t.KEt()}MCt(){const t=g.get(this);return t?t.iRt:null}jRt(){const t=g.get(this);return t?t.eRt:NaN}K9(){const t=a.get(this);return d.le(t)?t:NaN}VRt(t){a.set(this,t)}HRt(){this.vRt(1<<19,!0),this.hRt()}hRt(){if(m){const s=this.Xc.vb();this.zEt&&s.Jw(this.zEt);let t;t=0!=(this.HSt&1<<19)?s.Cw()||"<point>":s.Tw()||"<default>",this.zEt=s.Vw(t,this.z5(),this.UEt,this.nv())}}D9(){return this.zEt}Oz(){return this.Nb===i}jb(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.z5()!==t&&(this.HSt=this.HSt&~(31<<26)|t<<26,this.hRt())}z5(){return(this.HSt&31<<26)>>26}aO(t,s){const i=s&&this.CEt!==t;i&&this.pz(),this.Act.MIt(this,this.CEt,t),this.CEt=t,i&&this.URt(),0!==this.nv()&&this.CEt.gz()}hO(){return this.CEt}BD(){return this.hO().BD()}wz(t){this.EEt=0|t}nO(){return this.CEt.CJ(),this.EEt}AJ(t){this.REt=0|t}Gj(){return this.CEt.RJ(),this.REt}g7(){return this.EEt}vRt(t,s){s?this.HSt|=t:this.HSt&=~t}v5(){return 0!=(1&this.HSt)}S5(t){if(this.vRt(1,t),this.Q9())for(const s of this.sX())s.AB()&&s.S5(t)}Q4(){return 0!=(8&this.HSt)}tB(t){t=!!t,this.Q4()!==t&&(this.vRt(8,t),t?this._4():this.zRt())}JRt(t,s){if(this.vRt(32,t),this.HEt&&this.HEt.clear(),s.trim()){this.HEt||(this.HEt=new Set);for(const i of s.split(" "))i&&this.HEt.add(i.toLowerCase())}else this.HEt=null}qRt(t){const s=0!=(32&this.HSt),i=this.HEt;if(t&&i)for(const e of i)if(t.has(e))return s;return!s}_4(){if(this.HSt|=65554,this.Act.SIt(!0),this.Xc.uO(),this.CEt.$U()&&(this.$Rt(this.kEt,this.NEt,!0),this.HSt&=-3,this.URt()),0!=(4&this.HSt)&&this.bi.Pf().dispatchEvent(s),null!==this.$Et){const i=this.$Et.sX();for(let t=0,s=i.length;t<s;++t)i[t]._4()}}$Rt(t,s,i){const e=this.Kb(),h=this.sv(),n=this.Xp(),r=this.om(),o=this.kk();t.nl(e-this.OEt*n,h-this.LEt*r,n,r),i&&this.HB()&&this.XRt(t),0===o?s.uu(t):(t.offset(-e,-h),s.fu(t,this.Lbt(),this.Obt()),s.offset(e,h),s.du(t)),t.normalize()}YRt(){const t=this.HSt;0!=(2&t)&&(this.$Rt(this.kEt,this.NEt,!0),this.HSt=-3&t)}D4(){return this.YRt(),this.kEt}L4(){return this.YRt(),this.NEt}ZRt(t){const s=this.Kb(),i=this.sv(),e=Math.round(s)-s,h=Math.round(i)-i;return 0==e&&0==h?t:(r.T(t),r.offset(e,h),r)}KRt(t){this.kEt.T(t),this.NEt.uu(this.kEt),this.HSt&=-3,this.vIt(),this.URt()}QRt(t){this.vRt(4,t)}tPt(){return 0!=(4&this.HSt)}M9(t,s,i){return s&&0!==this.I9()?this.T9(this.hO().G9()):0===this.nv()||i?t.kl(this.D4()):this.sPt()}sPt(){const t=this.hO(),s=this.A4();return!(s>=t.tJ())&&(t.Kz(s,n),n.kl(this.D4()))}T9(t){const s=this.D4(),i=s.dl(),e=s.ml(),h=s.pl(),n=s.gl(),r=this.A4(),o=r+this.I9();return t.iy(i,h,r,e,n,o)}B4(){const t=this.hO();if(t.fJ())return this.T9(t.G9());{const s=t.BD();return this.M9(t.Y5(),s.v9(),s.u5())}}P9(t){this.vRt(1<<20,t)}R9(t){this.vRt(1<<21,t)}iPt(){return 0!=(this.HSt&1<<20)}ePt(){return 0!=(this.HSt&1<<21)}hPt(t){this.jEt=t,this.nPt(),this.HB()&&(this.YEt.rPt=null)}oPt(){return this.jEt}aPt(){return null!==this.jEt||this.HB()}lPt(){return this.uPt(this.Xp(),this.om(),this.kk(),this.Lbt(),this.Obt())}cPt(t,s,i){let e=0,h=1;return 0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.uPt(t,s,i,e,h)}uPt(h,n,t,r,o){let s=this.VEt;null===s&&(s={ZEt:d.Qh(d.xu),width:NaN,height:NaN,angle:NaN},this.VEt=s);const a=s.ZEt;if(s.width!==h||s.height!==n||s.angle!==t){const l=this.jEt;if(this.HB()){let t=this.N6(),s=this.W6(),i=this.UB(),e=this.YEt.rPt;e||(l?(u.T(l),u.offset(t,s)):u.Pu(),e=i.zv(u),this.YEt.rPt=e),i.Jv(e,a),a.offset(-t,-s),a.Ou(h,n,r,o)}else l?(a.T(l),a.Ou(h,n,r,o)):a.Du(this.L4(),-this.Kb(),-this.sv());s.width=h,s.height=n,s.angle=t}return a}nPt(){this.fPt(!0);const t=this.VEt;null!==t&&(t.width=NaN)}kB(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.TW().hk().qL())throw new Error("object does not support mesh");this.BB(),this.YEt={dPt:d.Qh(d.Hg.Sv,t,s),pPt:d.Qh(d.Hg.Sv,t,s),rPt:null}}HB(){return null!==this.YEt}UB(){if(this.HB())return this.YEt.dPt;throw new Error("no mesh")}mPt(){if(this.HB())return this.YEt.pPt;throw new Error("no mesh")}gPt(t){this.vRt(65536,t)}yPt(){return 0!=(65536&this.HSt)}fPt(t){this.vRt(1<<17,t)}wPt(){return 0!=(this.HSt&1<<17)}XRt(t){const s=this.YEt.dPt,i=Math.min(s.Ov(),0),e=Math.min(s.Lv(),0),h=Math.max(s.kv(),1),n=Math.max(s.Nv(),1),r=t.width(),o=t.height();t.offsetLeft(i*r),t.offsetTop(e*o),t.xl((h-1)*r),t.Gl((n-1)*o),this.tM=s.Bv()}BB(){this.YEt&&(this.YEt.dPt.tn(),this.YEt.pPt.tn(),this.YEt=null,this.nPt())}jB(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!p.has(e))throw new Error("invalid mode");let h="relative"===e,n=i.x,r=i.y,o=i.N5,a="number"==typeof i.u?i.u:h?0:-1,l="number"==typeof i.v?i.v:h?0:-1;if(!this.HB())return!1;const u=this.UB(),c=u.jv(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.nv()!==o&&(c.rv(o),f=!0),h&&(n+=t/(u.Rv()-1),r+=s/(u.Pv()-1)),a=-1!==a||h?(h&&(a+=t/(u.Rv()-1)),d.an(a,0,1)):c.ov(),l=-1!==l||h?(h&&(l+=s/(u.Pv()-1)),d.an(l,0,1)):c.lv(),c.Kb()===n&&c.sv()===r&&c.ov()===a&&c.lv()===l?f:(c.Qb(n),c.hv(r),c.av(a),c.uv(l),this.nPt(),!0)}eCt(){return this.bi.eCt()}sB(t,s){return!!this.D4().Bl(t,s)&&!!this.L4().Bl(t,s)&&(this.eCt()?this.bi.ZB().Hxt(t,s):!this.aPt()||this.lPt().Bl(t-this.Kb(),s-this.sv()))}SPt(){return 0!=(16&this.HSt)}vIt(){if(this.SPt()&&this.Q4()&&0==(256&this.HSt)){const t=this.D4(),s=this.Act.wIt(),i=this.BEt;if(n.set(s.F7(t.dl()),s.D7(t.pl()),s.F7(t.ml()),s.D7(t.gl())),!i.equals(n)){const e=this.bi;i===h?(s.O7(e,null,n),this.BEt=d.Qh(d.Rect,n)):(s.O7(e,i,n),i.T(n)),this.HSt&=-17}}}bPt(){this.HSt|=16}zRt(){const t=this.BEt;t!==h&&(this.Act.wIt().O7(this.bi,t,null),this.BEt=h)}URt(){const t=this.hO();if(t.$U()&&0==(256&this.HSt)){const s=t.kz(),i=this.D4(),e=this.WEt;if(n.set(s.F7(i.dl()),s.D7(i.pl()),s.F7(i.ml()),s.D7(i.gl())),!e.equals(n)){const h=this.bi;e===o?(s.O7(h,null,n),this.WEt=d.Qh(d.Rect,n)):(s.O7(h,e,n),e.T(n)),t.Nz()}}}pz(){const t=this.WEt;t!==o&&(this.hO().kz().O7(this.bi,t,null),this.WEt=o)}EJ(){return this.WEt}U4(){const t=this.bi,s=this.CEt,i=s.oO();i.length&&i.at(-1)===t||(s.dz(t,!1),s.uz(t,!1),this.Xc.uO())}J4(){const t=this.bi,s=this.CEt,i=s.oO();i.length&&i[0]===t||(s.dz(t,!1),s.fz(t,!1),this.Xc.uO())}X4(t){const s=this.bi,i=this.CEt;if(i.BD()!==t.BD())throw new Error("layer from different layout");t!==i&&(i.dz(s,!0),this.aO(t),t.uz(s,!0),this.Xc.uO())}Z4(t,s){let i=this.bi,e=!1,h=this.CEt;if(t.TN()!==i.TN()){const n=t.eO();if(!n)throw new Error("expected world instance");const r=n.hO(),o=(h.lF()!==r.lF()&&(h.dz(i,!0),this.aO(r),r.uz(i,!0),e=!0),r.OJ(i,t,!!s));(e||o)&&this.Xc.uO()}}G4(){return this.JEt}vPt(t){this.vRt(64,t)}VJ(){return 0!=(64&this.HSt)}X9(t,s=null){const i={x:this.Kb(),y:this.sv(),w:this.Xp(),h:this.om(),l:this.hO().Pz(),zi:this.nO()},e=(0!==this.nv()&&(i.ze=this.nv()),0!==this.kk()&&(i.a=this.oRt()),this.Oz()||(i.c=this.Nb.toJSON()),.5!==this.N6()&&(i.oX=this.N6()),.5!==this.W6()&&(i.oY=this.W6()),0!==this.z5()&&(i.bm=this.z5()),this.v5()||(i.v=this.v5()),this.Q4()||(i.ce=this.Q4()),this.tPt()&&(i.be=this.tPt()),this.JEt&&(i.fx=this.JEt.X9()),0!=(32&this.HSt));return e&&(i.sfi=e),this.HEt&&(i.sft=[...this.HEt].join(" ")),this.$Et&&"visual-state"!==t&&(i.sgi=this.$Et.X9(t,s),g.has(this))&&(i.sgcd=g.get(this).iRt,i.sgzid=g.get(this).eRt),this.HB()&&(i.mesh=this.UB().pv()),i}pEt(){return{x:this.Ua,y:this.za,z:this.Bb,w:this.PEt,h:this.AEt,a:this.Bo,sgi:this.Int()?this.Int().lEt():null}}wEt(t){t&&(this.Ua=t.x,this.za=t.y,this.Bb=t.z,this.PEt=t.w,this.AEt=t.h,this.Bo=t.a,t.sgi&&this.Int()&&this.Int().Y9(t.sgi),this.cRt(),this._4())}EIt(){this.QEt(),this.kRt(),this.WRt(null),this.$Et&&this.$Et.gEt(this.XCt,this.YCt)}dY(t){"visual-state"!==t&&this.kRt()}mY(t,s="full",i=null){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.HSt)&&this.$Et.mY(t.sgi,i)}BCt(t,s="full",i){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.HSt)&&(this.$Et.gEt(null,null),this.QEt(),this._4())}Y9(t,s){if(m=!1,this.Qb(t.x),this.hv(t.y),this.hm(t.w),this.Yp(t.h),this.wz(t.zi),this.rv(t.hasOwnProperty("ze")?t.ze:0),this.Lk(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?f.Aa(t.c):t.hasOwnProperty("o")?(f.$o(this.Nb),f.a=t.o):f.Wo(1,1,1,1),this.tRt(f),this.Wnt(t.hasOwnProperty("oX")?t.oX:.5),this.Vnt(t.hasOwnProperty("oY")?t.oY:.5),this.jb(t.hasOwnProperty("bm")?t.bm:0),this.S5(!t.hasOwnProperty("v")||t.v),this.tB(!t.hasOwnProperty("ce")||t.ce),this.QRt(!!t.hasOwnProperty("be")&&t.be),this.JRt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.JEt&&t.hasOwnProperty("fx")&&this.JEt.Y9(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==s&&this.XCt)for(const i of this.XCt)i.Rj()||this.Xc.wN(i);if(t.hasOwnProperty("sgi")&&"visual-state"!==s){this.WRt(null);const e=this.$Et,h=t.sgi;e.Y9(h),e.gEt(this.XCt,this.YCt),t.sgcd&&d.le(t.sgzid)&&g.set(this,{iRt:t.sgcd,eRt:t.sgzid})}if(t.hasOwnProperty("mesh")){const n=t.mesh;this.kB(n.cols,n.rows),this.UB().mv(n)}else this.BB();this._4(),m=!0,this.hRt(),"visual-state"!==s&&this.Xc.MPt(this.TW(),t)}}}{const ba=self.Ds;ba.l_t=class extends ba.Zh{constructor(t,s){super();const i=t.GO(),e=i.Ugt(s[1]),h=(i.xPt().kGt(e),this.Xc=i,this.Act=t,this.yGt=ba.RL.f6(e),this.sxt=null,this.GPt=null,this.WTt=e.Instance,this.K7=s[2],this.nn=s[0],this.Iyt=this.Xc.a1t(s[3]),this.yGt.MSt());if(h<2&&(this.sxt=ba.Qh(e.__t,this),!(this.sxt instanceof ba.gGt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(ba.RL.kMt(this,h),2<=h){const n=e.__t??globalThis.jj;if(this.GPt=new n,!(this.GPt instanceof globalThis.jj))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.GPt=new globalThis.u6;ba.RL.NMt(h),this.FMt()}static BM(t,s){return ba.Qh(ba.l_t,t,s)}tn(){this.Xc=null,this.yGt=null,this.sxt&&(this.sxt.tn(),this.sxt=null),this.WTt=null}wbt(){return this.sxt}FMt(){this.sxt?this.sxt.FMt():this.GPt&&this.GPt.UW()}GO(){return this.Xc}cN(){return this.Act}h6(){return this.yGt}$_t(){return this.WTt}jc(){return this.nn}Pz(){return this.K7}r6(){return this.GPt}a1t(){return this.Iyt}}}{const va=self.Ds,Ma=self.i6;va.VIt=class extends va.Zh{constructor(t){super(),this.Xc=t.runtime,this.rwt=t.n6,this.yGt=this.rwt.h6(),this.bi=t.a6,this.Lg=t.index,this.DIt=null,this.OIt=null,this.yGt.uz(this.bi)}tn(){this.OIt&&(this.OIt.gN(),this.OIt=null),this.yGt.dz(this.bi),this.DIt&&(this.DIt.tn(),this.DIt=null),this.Xc=null,this.rwt=null,this.yGt=null,this.bi=null}H_t(t){if(this.DIt)throw new Error("already got sdk instance");const s=this.h6().MSt();if(s<2){if(this.DIt=va.Qh(this.rwt.$_t(),this,t),!(this.DIt instanceof va.wGt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const i=this.h6().DMt();this.LMt(i.Instance,t)}}ZB(){return this.DIt??this.OIt}l6(){return this.bi}GO(){return this.Xc}o6(){return this.rwt}h6(){return this.yGt}tnt(){return this.Lg}MGt(){this.DIt?this.DIt.MGt():this.OIt.zj()}_Gt(t,s){this.DIt&&this.DIt._Gt(t,s)}NCt(){return this.DIt?this.DIt.xxt():this.OIt.l4()}pv(t="full"){return this.DIt?this.DIt.pv(t):this.OIt.u4(t)}mv(t,s="full"){if(this.DIt)return this.DIt.mv(t,s);this.OIt.c4(t,s)}static TPt(t,s,i){let e=globalThis.Vj,h,n;h=s instanceof e?t.Yk(s):s.vGt(),n=i instanceof e?t.Yk(i):i.vGt();const r=h.l6(),o=n.l6(),a=r.cN().lF(),l=o.cN().lF();if(a!==l)return a-l;const u=r._Ct(),c=o._Ct();return u!==c?u-c:h.tnt()-n.tnt()}LMt(t,s){const i=Ma,e=t??this.DIt.DMt(),h=e||i,n=this.h6().MSt();if(va.RL.kMt(this,n),va.RL.NGt(s),this.OIt=new h,va.RL.BGt(),va.RL.NMt(n),!e||this.OIt instanceof i)return this.OIt;throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`)}nxt(){return this.OIt||this.LMt()}Ixt(){return!!this.OIt}}}{const xa=self.Ds;xa.DU=class extends xa.Zh{constructor(t,s){super(),this.Mv=t,this._Pt=[],this.IPt=[],this.CPt=new Map,this.EPt=[],this.RPt=[],this.PPt=new Set,this.pb=!0;for(const i of s){const e=xa.Qh(xa.APt,this,i,this._Pt.length);this._Pt.push(e),this.CPt.set(e.jc().toLowerCase(),e),3<=i.length&&this.EPt.push(this.FPt(e,i[2]))}this.GO().DPt(this)}tn(){this.GO().OPt(this);for(const t of this.RPt)t.tn();xa.Pr(this.RPt),xa.Pr(this._Pt),xa.Pr(this.IPt),this.CPt.clear(),xa.Pr(this.EPt),this.Mv=null}LPt(t){this.PPt.add(t)}kPt(t){this.PPt.delete(t)}NPt(t){t.yw()&&(this.RPt=this._Pt.map(t=>{const s=t.Jx();return 0<s.GetCustomParametersByteSize()?xa.Qh(xa.Hg.WebGPUEffectCustomParamsBuffer,s):null}),this.BPt());for(const s of this.PPt)s.NPt(t)}j_t(t){if(t.length){this._Pt=t.concat(this._Pt);for(const s of t)this.CPt.set(s.jc().toLowerCase(),s);for(let t=0,s=this._Pt.length;t<s;++t)this._Pt[t]._z(t)}}FPt(t,s){t.WPt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=xa.Qh(xa.Oo);h.Aa(e),i[t]=h}}return i}Av(){return this.Mv}GO(){return this.Mv.GO()}m6(){xa.Pr(this.IPt);let t=!0;for(const s of this._Pt)s.Rpt()&&(this.IPt.push(s),s.Jx().Ib()||(t=!1));this.pb=t}Rk(){return this._Pt}iIt(){return 0<this._Pt.length}aht(t){return this.CPt.get(t.toLowerCase())||null}jPt(t){if((t=Math.floor(+t))<0||t>=this._Pt.length)throw new RangeError("invalid effect type index");return this._Pt[t]}d6(t){return this.jPt(t).Rpt()}p6(t,s){this.jPt(t).WPt(s)}Lz(){return this.IPt}VJ(){return 0<this.IPt.length}Ib(){return this.pb}oht(t){return this.EPt[t]}NU(t){return(t<this.RPt.length?this.RPt:this.EPt)[t]}g6(t,s){if(t<0||t>=this.EPt.length)return null;const i=this.EPt[t];return s<0||s>=i.length?null:i[s]}y6(t,s,i){if(t<0||t>=this.EPt.length)return!1;const e=this.EPt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof xa.Oo){if(h.ea(i))return!1;h.$o(i)}else{if(h===i)return!1;e[s]=i}return t<this.RPt.length&&this.RPt[t].SetParameterValue(s,i),!0}BPt(){const i=this.EPt,e=this.RPt;for(let t=0,s=Math.min(i.length,e.length);t<s;++t){const h=e[t],n=i[t];for(let t=0,s=n.length;t<s;++t)h.SetParameterValue(t,n[t])}}static VPt(t){return t&&t instanceof xa.Oo?{t:"color",v:t.toJSON()}:t}static HPt(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const s=t.t;if("color"!==s)throw new Error("invalid effect parameter type");{const i=xa.Qh(xa.Oo);return i.Aa(t.v),i}}}static UPt(t){return t.map(xa.DU.VPt)}static zPt(t){return t.map(xa.DU.HPt)}pv(){return this._Pt.map(t=>({name:t.jc(),active:t.Rpt(),params:xa.DU.UPt(this.EPt[t.lF()])}))}mv(t){for(const s of t){const i=this.aht(s.name);i&&(i.WPt(s.active),this.EPt[i.lF()]=xa.DU.zPt(s.params))}this.m6(),this.BPt()}}}{const Ga=self.Ds;Ga.APt=class extends Ga.Zh{constructor(t,s,i){super(),this.FU=t,this.Zc=s[0],this.nn=s[1],this.Lg=i,this.Ob=null,this.Zf=!0}tn(){this.FU=null,this.Ob=null}W_t(t){const s=Ga.Qh(Ga.APt,t,[this.Zc,this.nn],-1);return s.Ob=this.Ob,s.Zf=this.Zf,s}NPt(t){const s=t.Gw(this.Zc);if(!s)throw new Error("failed to find shader program '"+this.Zc+"'");this.Ob=s}Ek(){return this.FU}jc(){return this.nn}_z(t){this.Lg=t}lF(){return this.Lg}Av(){return this.FU.Av()}GO(){return this.FU.GO()}WPt(t){this.Zf=!!t}Rpt(){return this.Zf}Jx(){return this.Ob}JPt(){const i=[];for(let t=0,s=this.Ob.qx();t<s;++t){const e=this.Ob.$x(t);if("float"===e||"percent"===e)i.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");i.push(Ga.Qh(Ga.Oo,1,1,1,1))}}return i}}}{const Ta=self.Ds;Ta.qEt=class extends Ta.Zh{constructor(t,s){super(),this.bi=t,this.qPt=s,this.FU=t.cN().Ek(),this.$Pt=!0,this.WU=!0,this.XPt=!1,this.YPt=!1,this.ZPt=!1,this.KPt=!1,this.nF=Ta.Qh(Ta.Hg.sA,t.GO().dL().OU(),{UP:(t,s)=>{const i=s.Z3(),e=i.eO();t.Vb(e.LU()),t.rS(e.A4()),i.Hv(t),t.rS(0)},zP:t=>{const s=t.Nxt(),[i,e]=t.kxt();return{H3:s,U3:i,z3:e}},JP:t=>this.NU(t)}),this.QPt=[],this.IPt=[],this.pb=!0,this.EPt=[],this.RPt=[],this.NPt(t.GO().vb());for(let t=0,s=this.FU.Rk().length;t<s;++t)this.QPt.push(!0);this.m6(),this.FU.LPt(this)}tn(){this.FU.kPt(this);for(const t of this.RPt)t&&t.tn();Ta.Pr(this.RPt),this.nF.tn(),this.nF=null,Ta.Pr(this.QPt),Ta.Pr(this.IPt),Ta.Pr(this.EPt),this.bi=null,this.FU=null}NPt(t){t.yw()&&(this.RPt=this.FU.Rk().map(t=>{const s=t.Jx();return 0<s.GetCustomParametersByteSize()?Ta.Qh(Ta.Hg.WebGPUEffectCustomParamsBuffer,s):null}))}sRt(t){let s=0;for(const i of t)this.EPt.push(this.FPt(s,i)),++s;this.BPt(),this.m6()}FPt(t,s){this.QPt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=Ta.Qh(Ta.Oo);h.Aa(e),i[t]=h}}return i}XIt(){for(const t of this.FU.Rk())this.EPt.push(t.JPt());this.BPt()}Av(){return this.Mv}Ek(){return this.FU}aF(){return this.Dz(),this.nF}GO(){return this.bi.GO()}m6(){Ta.Pr(this.IPt);let t=this.qPt,i=this.FU.Rk(),e=this.IPt,h=this.QPt,n=!0;for(let t=0,s=i.length;t<s;++t)if(h[t]){const r=i[t];e.push(r),r.Jx().Ib()||(n=!1)}this.pb=n,t.vPt(!!e.length),this.$Pt=!0}Dz(){const t=this.bi,s=this.qPt,i=s.Oz(),e=t.hk().HL(),h=0!==s.kk()||0!==s.hO().kk()||s.Xp()<0||s.om()<0,n=t.jxt(),r=t._b();(this.$Pt||i!==this.WU||e!==this.XPt||h!==this.YPt||n!==this.ZPt||r!==this.KPt||this.nF.zA())&&(this.nF.JA(this.IPt.map(t=>t.Jx()),{$P:this.IPt.map(t=>t.lF()),XP:!i||r,ZP:e,KP:n,QP:h}),this.$Pt=!1,this.WU=i,this.XPt=e,this.YPt=h,this.ZPt=n,this.KPt=r)}Lz(){return this.IPt}oht(t){return this.EPt[t]}NU(t){return(t<this.RPt.length?this.RPt:this.EPt)[t]}g6(t,s){if(t<0||t>=this.EPt.length)return null;const i=this.EPt[t];return s<0||s>=i.length?null:i[s]}y6(t,s,i){if(t<0||t>=this.EPt.length)return!1;const e=this.EPt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof Ta.Oo){if(h.ea(i))return!1;h.$o(i)}else{if(h===i)return!1;e[s]=i}return t<this.RPt.length&&this.RPt[t].SetParameterValue(s,i),!0}BPt(){const i=this.EPt,e=this.RPt;for(let t=0,s=e.length;t<s;++t){const h=e[t],n=i[t];for(let t=0,s=n.length;t<s;++t)h.SetParameterValue(t,n[t])}}Ib(){return this.pb}tAt(){return this.IPt.some(t=>t.Jx().Rb())}d6(t){return this.QPt[t]}p6(t,s){this.QPt[t]=!!s}Rk(){return this.FU.Rk()}X9(){return this.FU.Rk().map(t=>({name:t.jc(),active:this.QPt[t.lF()],params:Ta.DU.UPt(this.EPt[t.lF()])}))}Y9(t){for(const s of t){const i=this.FU.aht(s.name);i&&(this.QPt[i.lF()]=s.active,this.EPt[i.lF()]=Ta.DU.zPt(s.params))}this.m6(),this.BPt()}}}{let _=self.Ds,n=[],b=[],r=[],v=_.Qh(_.xu),w=_.Qh(_.xu),M=_.Qh(_.Hl),d=_.Qh(_.Rect),p=_.Qh(_.Rect),m=null,g=null,y=null;_.sAt=class extends _.Zh{constructor(t){super(),this.Xc=t,this.iAt=0,this.eAt=0,this.hAt=[],this.nAt=0,this.rAt=0,this.oAt=0,this.aAt=0,this.lAt=new self.UO(this)}tn(){this.Xc=null}GO(){return this.Xc}mF(){return this.lAt}uAt(){this.rAt=this.nAt,this.nAt=0,this.aAt=this.oAt,this.oAt=0}cAt(){return this.rAt}fAt(){return this.aAt}dAt(t,s){const i=t.eO(),e=s.eO();i&&e&&i.Q4()&&e.Q4()&&this.hAt.push([t,s])}vvt(s,i,e){for(const[h,n]of this.hAt){let t=null;if(s===h)t=n;else{if(s!==n)continue;t=h}t.Ivt(i)&&!e.includes(t)&&e.push(t)}}Mvt(t,s){if(this.hAt.length)for(const[i,e]of this.hAt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}pAt(){_.Pr(this.hAt)}JO(t,s){if(!t||!s||t===s)return!1;const i=t.eO(),e=s.eO();if(!i.Q4()||!e.Q4())return!1;this.nAt++;const h=i.hO(),n=e.hO(),r=h.GJ(n);return r?this.mAt(i,e):this.gAt(i,e)}mAt(t,s){if(!t.D4().kl(s.D4()))return!1;if(this.oAt++,!t.L4().mu(s.L4()))return!1;if(t.eCt()&&s.eCt())return!1;if(t.eCt())return this.yAt(t,s);if(s.eCt())return this.yAt(s,t);if(!t.aPt()&&!s.aPt())return!0;const i=t.lPt(),e=s.lPt();return i.Lu(e,s.Kb()-t.Kb(),s.sv()-t.sv())}gAt(i,e){const t=i.eCt(),s=e.eCt();if(t&&!s)return this.wAt(i,e);if(s&&!t)return this.wAt(e,i);if(s||t)return!1;{const h=i.hO(),n=e.hO(),r=(v.T(i.lPt()),w.T(e.lPt()),v.Cu());for(let t=0,s=r.length;t<s;t+=2){const a=t+1,l=r[t],u=r[a],[c,f]=h.iN(l+i.Kb(),u+i.sv());r[t]=c,r[a]=f}const o=w.Cu();for(let t=0,s=o.length;t<s;t+=2){const d=t+1,p=o[t],m=o[d],[g,y]=n.iN(p+e.Kb(),m+e.sv());o[t]=g,o[d]=y}return v.Au(),w.Au(),this.oAt++,v.Lu(w,0,0)}}wAt(t,s){const i=t.hO(),e=s.hO(),h=(m=m||_.Qh(_.xu),g=g||_.Qh(_.Rect),y=y||_.Qh(_.Hl),s.Kb()),n=s.sv(),[r,o]=e.iN(h,n),[a,l]=i.K5(r,o),u=a-h,c=l-n;if(g.T(s.D4()),g.offset(u,c),!t.D4().kl(g))return!1;if(y.T(s.L4()),y.offset(u,c),this.oAt++,!t.L4().mu(y))return!1;m.T(s.lPt());const f=m.Cu();for(let t=0,s=f.length;t<s;t+=2){const d=t+1;f[t]+=u,f[d]+=c}return m.Au(),this.yAt(t,s,a,l,m,g,y)}yAt(t,e,s,i,h,n,r){const o=void 0!==n?n:e.D4(),a=t.Kb(),l=t.sv(),u=t.TW().ZB(),c=void 0!==s?s:e.Kb(),f=void 0!==i?i:e.sv(),d=e.aPt(),p=void 0!==r?r:e.L4(),m=b;u.GetCollisionRectCandidates(o,m);for(let t=0,s=m.length;t<s;++t){const g=m[t],y=g.GetRect();if(this.nAt++,o.Nl(y,a,l)&&(M.uu(y),M.offset(a,l),M.mu(p)))if(d){let t=void 0!==h?h:e.lPt(),s=c,i=f;void 0!==h&&(s=e.Kb(),i=e.sv());const w=g.GetPoly();if(w){if(this.oAt++,w.Lu(t,s-(a+y.dl()),i-(l+y.pl())))return _.Pr(m),!0}else if(v.Du(M,0,0),v.Lu(t,s,i))return _.Pr(m),!0}else{const S=g.GetPoly();if(!S)return _.Pr(m),!0;if(v.Du(p,0,0),S.Lu(v,-(a+y.dl()),-(l+y.pl())))return _.Pr(m),!0}}return _.Pr(m),!1}SAt(t,o,a){const l=t.yk(),s=this.Xc.JF();if(!s)throw new Error("cannot call outside event");const u=s.aft(),i=new Map,c=t=>{let s=i.get(t);return void 0===s&&(s=t.C5(),i.set(t,s)),s};if(l.Uct()){a||(l.Zct(!1),_.Pr(l.Kct())),u&&_.Pr(l.Qct());for(const e of t.gk()){let h=e.eO(),n=h.hO();if(!(!c(n)||!h.B4())&&o.some(([t,s])=>{const[i,e]=n.K5(t,s,h.A4());return h.sB(i,e)})){if(a)return!1;l.Xct(e)}else u&&l.Yct(e)}}else{let i,e=!1,r=(!u||s.tgt(this.Xc.Q0t())||this.Xc.Mbt()&&!l.Qct().length&&l.Kct().length?i=l.Kct():(i=l.Qct(),e=!0),0);for(let s=0,t=i.length;s<t;++s){let t=i[s],h=t.eO(),n=h.hO();if(!(!c(n)||!h.B4())&&o.some(([t,s])=>{const[i,e]=n.K5(t,s,h.A4());return h.sB(i,e)})){if(a)return!1;e?l.Xct(t):i[r++]=t}else e?i[r++]=t:u&&l.Yct(t)}a||(i.length=r)}return t.Ogt(),i.clear(),!!a||l.zct()}bAt(t,s){if(t)for(const i of s.xIt())if(!t.GJ(i))return!1;return!0}vbt(t,s,i,e){if(s.xz())for(const h of s.Imt())this.bAt(t,h)?(h.bIt(),h.wIt().L7(i,e)):_.Vh(e,h.gk());else this.bAt(t,s)?(s.bIt(),s.wIt().L7(i,e)):_.Vh(e,s.gk())}iL(t,s,i,e){for(const h of s)this.vbt(t,h,i,e)}vAt(t,s,i){const e=this.Xc.jGt();e&&this.iL(t,e.NY(),s,i)}MAt(t,s,i){const e=this.Xc.VGt();e&&this.iL(t,e.NY(),s,i)}qRt(t,s){return t.rCt()&&(!s||s.eO().qRt(t.CSt().get("solidTags")))}XO(t){const s=t.eO();this.vAt(s.hO(),s.D4(),n);for(const i of n)if(this.qRt(i,t)&&this.JO(t,i))return _.Pr(n),i;return _.Pr(n),null}xAt(t,s){this.vAt(null,t,n);for(const i of n)if(this.qRt(i,s)&&this.GAt(t,i))return _.Pr(n),i;return _.Pr(n),null}TAt(t,s){let i=null;s&&(i=r,_.Pr(i));const e=t.eO();this.MAt(e.hO(),e.D4(),n);for(const h of n)if(h.aCt()&&this.JO(t,h)){if(!s)return _.Pr(n),h;i.push(h)}return _.Pr(n),i}_At(s,i,e,h,n){h=h||50;const r=s.eO(),o=r.Kb(),a=r.sv();for(let t=0;t<h;++t)if(r.I4(o+i*t,a+e*t),r._4(),!this.JO(s,n))return!0;return r.I4(o,a),r._4(),!1}IAt(s,i,e,h,n,r){h=h||50;let o=s.eO(),a=o.Kb(),l=o.sv(),u=null,c=null;for(let t=0;t<h;++t)if(o.I4(a+i*t,l+e*t),o._4(),!this.JO(s,u))if(u=this.XO(s))c=u;else if(n&&(u=r?this.JO(s,r)?r:null:this.TAt(s))&&(c=u),!u)return c&&this.CAt(s,i,e,c,16,!0),!0;return o.I4(a,l),o._4(),!1}EAt(i,e,h,t){t=t||50;let n=i.eO(),r=n.Kb(),o=n.sv(),a=null,l=null;for(let s=0;s<t;++s)for(let t=0;t<2;++t){const u=2*t-1;if(n.I4(r+e*s*u,o+h*s*u),n._4(),!this.JO(i,a)){if(!(a=this.XO(i)))return l&&this.CAt(i,e*u,h*u,l,16,!0),!0;l=a}}return n.I4(r,o),n._4(),!1}CAt(t,s,i,e,h,n){let r=2,o=!1,a=!1,l=t.eO(),u=l.Kb(),c=l.sv();for(;r<=h;){const f=1/r;r*=2,l.R4(s*f*(o?1:-1),i*f*(o?1:-1)),l._4(),this.JO(t,e)||n&&this.XO(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.Kb(),c=l.sv())}a&&(l.I4(u,c),l._4())}RAt(i,t=100){let e=0,h=i.eO(),n=h.Kb(),r=h.sv(),o=0,a=this.XO(i);if(!a)return!0;for(;e<=t;){let t=0,s=0;switch(o){case 0:t=0,s=-1,e++;break;case 1:t=1,s=-1;break;case 2:t=1,s=0;break;case 3:t=1,s=1;break;case 4:t=0,s=1;break;case 5:t=-1,s=1;break;case 6:t=-1,s=0;break;case 7:t=-1,s=-1}if(o=(o+1)%8,h.I4(Math.floor(n+t*e),Math.floor(r+s*e)),h._4(),!this.JO(i,a)&&!(a=this.XO(i)))return!0}return h.I4(n,r),h._4(),!1}PAt(t,s,i,e){const h=t.eO(),n=h.Kb(),r=h.sv(),o=Math.max(10,_.dn(s,i,n,r)),a=_.mn(s,i,n,r),l=e||this.XO(t);if(!l)return _.ln(a+Math.PI);let u=l,c=0,f=0,d=_.un(5),p;for(p=1;p<36;++p){const G=a-p*d;if(h.I4(s+Math.cos(G)*o,i+Math.sin(G)*o),h._4(),!this.JO(t,u)&&!(u=e?null:this.XO(t))){c=G;break}}for(36===p&&(c=_.ln(a+Math.PI)),u=l,p=1;p<36;++p){const T=a+p*d;if(h.I4(s+Math.cos(T)*o,i+Math.sin(T)*o),h._4(),!this.JO(t,u)&&!(u=e?null:this.XO(t))){f=T;break}}if(36===p&&(f=_.ln(a+Math.PI)),h.I4(n,r),h._4(),f===c)return f;let m=_.gn(f,c)/2,g;g=_.wn(f,c)?_.ln(c+m+Math.PI):_.ln(f+m);const y=Math.cos(a),w=Math.sin(a),S=Math.cos(g),b=Math.sin(g),v=y*S+w*b,M=y-2*v*S,x=w-2*v*b;return _.mn(0,0,M,x)}AAt(t,s,i,e,h){if(!h)return!1;const n=h.eO();if(!n.Q4())return!1;if(this.nAt++,d.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!n.D4().kl(d))return!1;if(h.eCt())return this.FAt(t,s,i,e,h,n);if(this.oAt++,!n.L4().pu(t,s,i,e))return!1;if(!n.aPt())return!0;const r=n.lPt();return r.pu(n.Kb(),n.sv(),t,s,i,e)}FAt(i,e,h,n,t,s){const r=s.Kb(),o=s.sv(),a=t.ZB(),l=b;p.set(i,e,h,n),p.normalize(),a.GetCollisionRectCandidates(p,l);for(let t=0,s=l.length;t<s;++t){const u=l[t],c=u.GetRect();if(this.nAt++,d.Nl(c,r,o)&&(M.uu(c),M.offset(r,o),M.pu(i,e,h,n))){const f=u.GetPoly();if(!f)return _.Pr(l),!0;if(this.oAt++,f.pu(r+c.dl(),o+c.pl(),i,e,h,n))return _.Pr(l),!0}}return _.Pr(l),!1}GAt(t,s){if(!s)return!1;const i=s.eO();if(!i.Q4())return!1;if(this.nAt++,!i.D4().kl(t))return!1;if(s.eCt())return this.DAt(t,s,i);if(this.oAt++,M.uu(t),!i.L4().mu(M))return!1;if(!i.aPt())return!0;const e=v,h=(e.uu(t,i.Kb(),i.sv()),i.lPt());return e.Lu(h,0,0)}DAt(i,t,s){const e=s.Kb(),h=s.sv(),n=t.ZB(),r=b;n.GetCollisionRectCandidates(i,r);for(let t=0,s=r.length;t<s;++t){const o=r[t],a=o.GetRect();if(this.nAt++,i.Nl(a,e,h)){const l=o.GetPoly();if(!l)return _.Pr(r),!0;if(this.oAt++,v.uu(i,0,0),l.Lu(v,-(e+a.dl()),-(h+a.pl())))return _.Pr(r),!0}}return _.Pr(r),!1}OAt(t,s){if(t){const i=t.eO();i.Q4()&&(this.nAt++,i.D4().kl(s.rect))&&(t.eCt()?this.LAt(t,i,s):(this.oAt++,i.aPt()?s.kAt(t,i.Kb(),i.sv(),i.lPt()):s.NAt(t,i.L4())))}}LAt(i,e,h){const n=e.Kb(),r=e.sv(),o=b;i.ZB().GetCollisionRectCandidates(h.rect,o);for(let t=0,s=o.length;t<s;t++){const a=o[t],l=a.GetRect();if(this.nAt++,h.rect.Nl(l,n,r)){const u=a.GetPoly();this.oAt++,u?h.kAt(i,n+l.dl(),r+l.pl(),u):h.BAt(i,e.Kb(),e.sv(),l)}}_.Pr(o)}ZO(t,s){if(t!==this.iAt||s!==this.eAt){this.iAt=t,this.eAt=s;const i=this.Xc.Mz();for(const e of i)if(e.OL()){for(const h of e.mk())h.eO().zRt();e.wIt().WAt(t,s),e.SIt();for(const n of e.mk()){const r=n.eO();r.bPt(),r.vIt()}}}}QO(){return[this.iAt,this.eAt]}jAt(t,s){this.iAt=t,this.eAt=s}}}{const _a=self.Ds;_a.YTt=class extends _a.Zh{constructor(t,s){super(),this.E7=t,this.R7=s,this.P7=_a.Qh(_a.Vu)}tn(){this.P7.tn(),this.P7=null}WAt(t,s){if(!this.P7.zu())throw new Error("grid not empty");this.E7=t,this.R7=s}A7(t,s,i){let e=this.P7.Ks(t,s);return e||(i?(e=_a.Qh(_a.VAt,this,t,s),this.P7.Set(t,s,e),e):null)}F7(t){const s=Math.floor(t/this.E7);return isFinite(s)?s:0}D7(t){const s=Math.floor(t/this.R7);return isFinite(s)?s:0}O7(e,h,n){if(h)for(let i=h.dl(),t=h.ml();i<=t;++i)for(let t=h.pl(),s=h.gl();t<=s;++t)if(!n||!n.Bl(i,t)){const r=this.A7(i,t,!1);r&&(r.u0(e),r.zu())&&this.P7.Ju(i,t)}if(n)for(let i=n.dl(),t=n.ml();i<=t;++i)for(let t=n.pl(),s=n.gl();t<=s;++t)h&&h.Bl(i,t)||this.A7(i,t,!0).T7(e)}L7(t,s){let i=this.F7(t.dl()),e=this.D7(t.pl()),h=this.F7(t.ml()),n=this.D7(t.gl());if(isFinite(h)&&isFinite(n))for(;i<=h;++i)for(let t=e;t<=n;++t){const r=this.A7(i,t,!1);r&&r.I7(s)}}}}{const Ia=self.Ds;Ia.VAt=class extends Ia.Zh{constructor(t,s,i){super(),this.w7=t,this.Ua=s,this.za=i,this.S7=Ia.Qh(Ia.Yu)}tn(){this.S7.tn(),this.S7=null,this.w7=null}zu(){return this.S7.zu()}T7(t){this.S7.tc(t)}u0(t){this.S7.Ju(t)}I7(t){Ia.Vh(t,this.S7.sc())}}}{const Ca=self.Ds;Ca.HAt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Ca.Rect,this.UAt=2,this.zAt=null,this.JAt=0,this.qAt=0,this.$At=0,this.XAt=0,this.YAt=0,this.It=0,this.ZAt=1,this.KAt=0,this.QAt=1,this.t3t=0}s3t(){return this.UAt<1+1e-6}Kf(){this.UAt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.UAt=2,this.zAt=null,this.JAt=0,this.qAt=0,this.$At=0,this.XAt=0,this.YAt=0,this.It=0,this.ZAt=1,this.KAt=0,this.QAt=1,this.t3t=0,this}i3t(){if(!1!==this.s3t()){const t=this.dx*this.UAt,s=this.dy*this.UAt,i=Math.hypot(t,s),e=t/i,h=s/i,n=(this.It=i-1e-6,this.XAt=this.x1+e*this.It,this.YAt=this.y1+h*this.It,this.JAt=Math.atan2(this.$At,this.qAt)+Math.PI/2,this.ZAt=Math.cos(this.JAt),this.KAt=Math.sin(this.JAt),e*this.ZAt+h*this.KAt);if(this.QAt=e-2*this.ZAt*n,this.t3t=h-2*this.KAt*n,0<n){const r=Math.PI;this.JAt=Ca.ln(this.JAt+r),this.ZAt=-this.ZAt,this.KAt=-this.KAt}}}e3t(t,s,i,e,h){const n=Ca.ir(this.x1,this.y1,this.x2,this.y2,s,i,e,h);0<=n&&n<this.UAt&&(this.UAt=n,this.zAt=t.TN(),this.qAt=s-e,this.$At=i-h)}BAt(t,s,i,e){const h=s+e.dl(),n=s+e.ml(),r=i+e.pl(),o=i+e.gl();this.e3t(t,h,r,n,r),this.e3t(t,n,r,n,o),this.e3t(t,n,o,h,o),this.e3t(t,h,o,h,r)}NAt(t,s){const i=s.Jn(),e=s.qn(),h=s.$n(),n=s.Xn(),r=s.Yn(),o=s.Zn(),a=s.Kn(),l=s.Qn();this.e3t(t,i,e,h,n),this.e3t(t,h,n,r,o),this.e3t(t,r,o,a,l),this.e3t(t,a,l,i,e)}kAt(i,e,h,t){const n=t.Cu();for(let t=0,s=n.length;t<s;t+=2){const r=(t+2)%s,o=n[t]+e,a=n[t+1]+h,l=n[r]+e,u=n[1+r]+h;this.e3t(i,o,a,l,u)}}}}{const T=self.Ds,Ea=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Ra=new Set(["high","low"]),Pa=self.ys,xh=Pa.vs,Gh=Pa.Ts,Aa=xh.create(),Fa=T.Qh(T.Hl),I=T.Qh(T.Rect);T.h3t=class extends T.Zh{constructor(t){super(),this.Xc=t,this.n3t=[],this.r3t=!1,this.o3t=null,this.a3t=null,this.l3t=null,this.u3t="high-performance",this.c3t=!1,this.f3t=0,this.d3t=0,this.p3t="",this.m3t=0,this.g3t=0,this.y3t=0,this.w3t=0,this.S3t=0,this.b3t=0,this.yy="normalized",this.v3t=0,this.M3t=1,this.x3t=1e4,this.qy=!0,this.G3t=0,this._A=0,this.IA=0,this.T3t="letterbox-scale",this._3t="letterbox-scale",this.I3t=0,this.C3t=0,this.E3t=xh.create(),this.R3t="high",this.P3t=this.R3t,this.A3t=!1,this.F3t=[],this.D3t=new Set,this.O3t=self.C3_Shaders,this.L3t=T.Qh(T.Hg.RP,{_P:()=>[this.h9(),this.n9()],IP:()=>this.k3t(),CP:t=>this.N3t(t),getTime:()=>this.GO().fD(),EP:()=>this.GO().uO()}),this.B3t=0,this.W3t=0,this.j3t=NaN,this.V3t=null,this.H3t=new Map,this.U3t=NaN,this.z3t=new Map,this.J3t="",this.q3t=1,this.$3t=T.Qh(T.Rect),this.X3t="",this.Y3t=null,this.Z3t=null,this.K3t=0,this.Q3t=0,this.tFt=-1,this.sFt=0,this.iFt=t=>this.sFt=t.progress,this.eFt=null,this.hFt={nFt:null,rFt:null,oFt:null},this.aFt=0,this.lFt=0,this.uFt=0,this.cFt="fade-in",this.fFt=null,this.dFt=new Promise(t=>this.fFt=t)}pFt(t){this.u3t=t}mFt(t){this.r3t=!!t}gFt(t){this.yy=t}yFt(){return this.yy}wFt(t){this.v3t=t}SFt(t,s){this.M3t=t,this.x3t=s}bFt(t){this.c3t=!!t}async xo(t){let s=t.canvas,i=(this.n3t.push({canvas:s,vFt:null}),this.Xc.t4("runtime","window-resize",t=>this.MFt(t)),this.Xc.t4("runtime","fullscreenchange",t=>this.xFt(t)),this.Xc.t4("runtime","fullscreenerror",t=>this.GFt(t)),s.addEventListener("webglcontextlost",t=>this.TFt(t)),s.addEventListener("webglcontextrestored",t=>this._Ft(t)),this.A3t=!!t.isFullscreen,this.p3t=t.cssDisplayMode,navigator.gpu&&this.r3t),e=!1;if(i)try{await this.IFt(!0)}catch(t){this.CFt("WebGPU",t),this.a3t=null}if(!this.vb())try{await this.EFt(!0)}catch(t){this.CFt("WebGL",t),this.o3t=null}if(this.vb()||(e=!0),!this.vb()&&i)try{await this.IFt(!1)}catch(t){this.CFt("WebGPU",t),this.a3t=null}if(!this.vb())try{await this.EFt(!1)}catch(t){this.CFt("WebGL",t),this.o3t=null}const h=this.vb();if(!h)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");h.KS(e),this.a3t&&(this.a3t.RFt=()=>this.PFt(),this.a3t.AFt=()=>this.FFt()),"normalized"===this.yy?h.dw():(h.pw(),h.cw(this.v3t)),this.kI(t.windowInnerWidth,t.windowInnerHeight,!0),await this.NPt()}CFt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async IFt(t){const s={hy:this.M3t,ny:this.x3t},i={powerPreference:this.u3t,depth:this.Xc.cJ(),failIfMajorPerformanceCaveat:t,DFt:this.Xc.d9(),OFt:this.Xc.LFt(),JC:this.Xc.kFt()};this.a3t=T.Qh(T.Hg.WebGPURenderer,s),await this.a3t.BM(this.n3t[0].canvas,i)}async EFt(t){const s={alpha:!0,powerPreference:this.u3t,zC:"xbox-uwp-webview2"!==this.Xc.lL(),depth:this.Xc.cJ(),JC:this.Xc.kFt(),failIfMajorPerformanceCaveat:t,hy:this.M3t,ny:this.x3t};this.c3t&&(s.qC=1),this.o3t=T.Qh(T.Hg.YC,this.n3t[0].canvas,s),await this.o3t.Ky()}async NFt(){if(this.O3t){const t=[];for(const[s,i]of Object.entries(this.O3t)){i.src=i.wgsl;const e=T.Hg.WebGPUShaderProgram.fG();t.push(this.a3t.KE(Object.assign({LM:e,name:s},i)))}await Promise.all(t)}}async BFt(){if(this.O3t){const s=[];for(const[i,e]of Object.entries(this.O3t)){let t;if(e.glslWebGL2&&2<=this.o3t.M2())e.src=e.glslWebGL2,t=T.Hg.DM.dG();else{if(!e.glsl)throw new Error(`shader '${i}' does not support WebGL 1`);e.src=e.glsl,t=T.Hg.DM.fG()}s.push(this.o3t.KE(Object.assign({LM:t,name:i},e)))}await Promise.all(s),this.o3t.QE(),this.o3t._w()}this.o3t.dP()&&(this.V3t=T.Qh(T.Hg.OC,this.o3t))}async NPt(){this.a3t?await this.NFt():this.o3t&&await this.BFt();const t=this.vb();t.YS(this.qy),t.dP()&&(this.j3t=0);for(const s of this.Xc.WFt()){for(const i of s.Rk())i.NPt(t);s.NPt(t),s.m6()}this.l3t=new self.A8(this.Xc,t)}tn(){this.Xc=null,this.o3t=null,this.n3t.length=0}GF(){return this.Xc.GF()}MFt(t){const s=this.Xc;if(!s.jFt()){const i=t.devicePixelRatio,e=(this.GF()&&(self.devicePixelRatio=i),s.VFt(i),this.A3t=!!t.isFullscreen,this.p3t=t.cssDisplayMode,this.kI(t.innerWidth,t.innerHeight),s.uO(),new T.Event("window-resize")),h=(e.data=t,s.Pf().jf(e),new T.Event("resize"));h.HFt=this.yL(),h.UFt=this.SL(),h.zFt=this.vL(),h.JFt=this.xL(),s.gX(h),s.yX()&&(s.j1t()||self.C3Debugger.IsDebuggerPaused())&&s.i3()}}xFt(t){this.A3t=!!t.isFullscreen,this.kI(t.innerWidth,t.innerHeight,!0),this.Xc.uO()}GFt(t){this.A3t=!!t.isFullscreen,this.kI(t.innerWidth,t.innerHeight,!0),this.Xc.uO()}kI(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.f3t!==t||this.d3t!==s||i){this.f3t=t,this.d3t=s;const e=this.qFt();"letterbox-scale"===e?this.$Ft(t,s):"letterbox-integer-scale"===e?this.XFt(t,s):"off"===e?this.YFt(t,s):this.ZFt(t,s),this.KFt(e);for(const{canvas:r}of this.n3t)r.width=this.y3t,r.height=this.w3t;this.Xc.Kc("canvas","update-size",{marginLeft:this.S3t,marginTop:this.b3t,styleWidth:this.m3t,styleHeight:this.g3t,displayScale:this.Pj()});const h=this.vb();h.kI(this.y3t,this.w3t,!0);for(const o of this.F3t)h.oP(o);T.Pr(this.F3t),this.QFt();const n=this.Xc.ND();n.BX(),n.WX()}}QFt(){this.vb().gw(this.E3t,this.h9()/this.n9())}r9(){return this.E3t}$Ft(t,s){const i=this.Xc.GL(),e=this.Xc._F(),h=this.Xc.CF(),n=e/h,r=t/s;if(n<r){const o=s*n;this.m3t=Math.round(o),this.g3t=s,this.S3t=Math.floor((t-this.m3t)/2),this.b3t=0}else{const a=t/n;this.m3t=t,this.g3t=Math.round(a),this.S3t=0,this.b3t=Math.floor((s-this.g3t)/2)}this.y3t=Math.round(this.m3t*i),this.w3t=Math.round(this.g3t*i),this.Xc.tDt(e,h)}XFt(t,s){let i=this.Xc.GL(),e=(1!==i&&(t+=1,s+=1),this.Xc._F()),h=this.Xc.CF(),n=e/h,r=t/s,o;if(n<r){const a=s*n;o=a*i/e}else{const l=t/n;o=l*i/h}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.y3t=Math.round(e*o),this.w3t=Math.round(h*o),this.m3t=this.y3t/i,this.g3t=this.w3t/i,this.S3t=Math.max(Math.floor((t-this.m3t)/2),0),this.b3t=Math.max(Math.floor((s-this.g3t)/2),0),this.Xc.tDt(e,h)}ZFt(t,s){const i=this.Xc.GL(),e=(this.m3t=t,this.g3t=s,this.y3t=Math.round(this.m3t*i),this.w3t=Math.round(this.g3t*i),this.S3t=0,this.b3t=0,this.Pj());this.Xc.tDt(this.m3t/e,this.g3t/e)}YFt(t,s){const i=this.Xc.GL();this.m3t=this.Xc.sJ(),this.g3t=this.Xc.iJ(),this.y3t=Math.round(this.m3t*i),this.w3t=Math.round(this.g3t*i),this.sDt()?(this.S3t=Math.floor((t-this.m3t)/2),this.b3t=Math.floor((s-this.g3t)/2)):(this.S3t=0,this.b3t=0),this.Xc.tDt(this.Xc.sJ(),this.Xc.iJ())}KFt(i){if("high"===this.R3t)this._A=this.y3t,this.IA=this.w3t,this.P3t="high";else{let t,s;if(s="off"===this.qFt()?(t=this.Xc.sJ(),this.Xc.iJ()):(t=this.Xc._F(),this.Xc.CF()),this.y3t<t||this.w3t<s)this._A=this.y3t,this.IA=this.w3t,this.P3t="high";else if(this._A=t,this.IA=s,this.P3t="low","scale-inner"===i){const e=t/s,h=this.f3t/this.d3t;h<e?this._A=this.IA*h:e<h&&(this.IA=this._A/h)}else if("scale-outer"===i){const n=t/s,r=this.f3t/this.d3t;n<r?this._A=this.IA*r:r<n&&(this.IA=this._A/r)}}}GO(){return this.Xc}iDt(){return this.n3t[0].canvas}OU(){return this.L3t}sDt(){return this.A3t}eDt(){return this.p3t}hDt(t){if(!Ea.has(t))throw new Error("invalid fullscreen mode");this.T3t=t;const s=this.Xc.ND();s.BX(),s.WX()}Ej(){return this.T3t}nDt(t){if(!Ea.has(t))throw new Error("invalid fullscreen mode");this._3t=t;const s=this.Xc.ND();s.BX(),s.WX()}rDt(){return this._3t}qFt(){return this.sDt()?this.rDt():this.Ej()}oDt(t){if(!Ra.has(t))throw new Error("invalid fullscreen scaling quality");this.R3t=t,this.Xc.ND().BX()}aDt(){return this.R3t}p9(){return this.P3t}static lDt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}gj(){return this.f3t}yj(){return this.d3t}h9(){return this._A}n9(){return this.IA}YS(t){this.qy=!!t}uDt(t){this.G3t=t}f7(){return this.G3t}cDt(){return this.vb().fC()}TFt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.F3t=[],this.D3t.clear(),this.L3t.Hb(),this.o3t.Hb(),this.Xc.m$()}PFt(){console.log("[Construct] WebGPU device lost"),this.F3t=[],this.D3t.clear(),this.L3t.Hb(),this.Xc.m$()}async _Ft(t){await this.o3t.Ub(),await this.NPt(),await this.Xc.fDt(),console.log("[Construct] WebGL context restored")}async FFt(){await this.NPt(),await this.Xc.fDt(),console.log("[Construct] WebGPU device restored")}dDt(){return this.o3t}pDt(){return this.a3t}vb(){return this.a3t||this.o3t}q_t(){return this.l3t}fL(){let t="";return t=this.Xc.pDt()?"webgpu":"webgl"+this.Xc.dDt().M2(),this.Xc.vb().QS()&&(t+="-software"),t}mL(){return this.Xc.pDt()?this.Xc.pDt().GetAdapterInfoString():this.Xc.dDt().MP()}aN(){return"low"===this.P3t?1/this.Xc.GL():this.Pj()}Pj(){const t=this.qFt();if("off"===t||"crop"===t)return 1;const s=this.Xc._F(),i=this.Xc.CF(),e=s/i,h=this.y3t/this.w3t;return"scale-inner"!==t&&e<h||"scale-inner"===t&&h<e?this.g3t/i:this.m3t/s}N9(){return"low"===this.p9()?1:this.Pj()}L9(){return"low"===this.p9()?1:this.Xc.GL()}mDt(t,s){this.I3t=t,this.C3t=s}wV(s,i,e,t=!0){i=i||this._A,e=e||this.IA;const h=i/2+this.I3t,n=e/2+this.C3t;if(t){let t=this.r9();i===this._A&&e===this.IA||(s.gw(Aa,i/e),t=Aa),s.sR(t)}const r=s.bw(h,n,s.iw(e),h,n,0,e);s.oR(r)}gDt(t,s=!0){const i=this.yL(),e=this.SL(),h=i/2,n=e/2,r=(s&&t.sR(this.r9()),t.bw(h,n,t.iw(e),h,n,0,e));t.oR(r)}vL(){return this.y3t}xL(){return this.w3t}yL(){return this.m3t}SL(){return this.g3t}Q5(){return this.S3t}tN(){return this.b3t}Kq(){return this.n3t.length}yDt(){return"undefined"!=typeof OffscreenCanvas&&this.iDt()instanceof OffscreenCanvas&&("Chromium"!==T.hi.ci||124<=T.hi.li)}async b$(e,h=!1){if(e<1)throw new Error("invalid HTML layer count");if(this.n3t.length!==e){let t=this.Xc.ND().OD(),s={count:e,layersDomState:t.Rz().filter(t=>t.T5()).map(t=>t.DJ()),immediate:h,marginLeft:this.S3t,marginTop:this.b3t,styleWidth:this.m3t,styleHeight:this.g3t},i;if(i=this.GF()?await this.Xc.fO("canvas","set-html-layer-count",s):self.c3_runtimeInterface._OnSetHTMLLayerCount(s),e<this.n3t.length)this.n3t.length=e;else for(const n of i.addedCanvases){n.width=this.y3t,n.height=this.w3t;const r=this.yDt()?"bitmaprenderer":"2d",o=n.getContext(r);if(!o)throw new Error(`failed to acquire '${r}' canvas context`);this.n3t.push({canvas:n,vFt:o})}this.Xc.uO()}}dX(t){if(!(t>=this.n3t.length)){const s=this.iDt(),i=this.n3t[t].vFt;this.yDt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}}m9(s){s.depth=this.Xc.cJ();let t=this.F3t,i=t.findIndex(t=>t.CM(s)),e;return-1!==i?(e=t[i],t.splice(i,1)):e=this.vb().iP(s),this.D3t.add(e),e}kU(t){if(!this.D3t.has(t))throw new Error("render target not in use");this.D3t.delete(t),this.F3t.push(t)}k3t(){const t={t2:this.Xc.EF()};return"low"===this.p9()&&(t.width=this.h9(),t.height=this.n9()),this.m9(t)}N3t(t){this.kU(t)}*wDt(){for(const t of this.Xc.ND().LX())for(const s of t.Jk()){const i=this.H3t.get(s);i&&(yield i)}}u9(t){if(!this.vb().dP())return null;let s=this.H3t.get(t);return s||(s={T4:t,name:t.jc(),SDt:T.Qh(T.Hg.OC,this.o3t),bDt:0,vDt:0,MDt:0},this.H3t.set(t,s)),s.SDt}xDt(){const t=this.vb();if(t.dP()&&0===this.W3t){this.W3t=t.$S(),this.U3t=NaN;for(const s of this.wDt())s.bDt=NaN}}GDt(){this.o3t&&this.o3t.dP()&&this.TDt(),this.a3t&&this.a3t.dP()&&this._Dt()}TDt(){if(isNaN(this.U3t)&&(this.U3t=this.V3t.VC(this.B3t,this.W3t),!isNaN(this.U3t))){if(this.Xc.yX())for(const t of this.wDt())if(t.bDt=t.SDt.VC(this.B3t,this.W3t),isNaN(t.bDt))return;if(this.V3t.HC(this.W3t),this.j3t=Math.min(this.U3t,1),this.Xc.yX()){const i=new Map;for(const h of this.wDt())h.SDt.HC(this.W3t),h.vDt=Math.min(h.bDt,1),i.set(h.T4,h.vDt);for(const n of this.wDt()){const r=n.T4,o=i.get(r)||0,a=o-r.m5().reduce((t,s)=>t+(i.get(s)||0),0);n.MDt=T.an(a,0,1)}const s=this.Xc.OD(),e=this.j3t-s.Rz().reduce((t,s)=>t+(i.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(T.an(e,0,1),this.j3t,[...this.wDt()])}this.B3t=this.W3t,this.W3t=0}}IDt(){return this.V3t}_Dt(){if(0!==this.W3t){for(let t=this.B3t;t<this.W3t;++t){const i=this.z3t.get(t);if(i&&!i.GC())return}let t=this.Xc.OD(),r=T.Do(t.Jq()+1,0),s=0;for(let t=this.B3t;t<this.W3t;++t){const o=this.z3t.get(t);if(o){let i=o.TC(),e=BigInt(0),h=BigInt(0),n=BigInt(0);for(let t=0,s=Math.min(r.length,i.length/2);t<s;++t){const u=i[2*t],c=i[2*t+1],f=(u!==n&&(e===n||u<e)&&(e=u),c>h&&(h=c),c-u),d=Number(f)/1e9;r[t]+=d}const a=h-e,l=Number(a)/1e9;s+=l}}if(this.j3t=T.an(s,0,1),this.Xc.yX()){const e=t.Jk(),h=new Map;for(let t=0,s=Math.min(e.length,r.length-1);t<s;++t){const g=r[t+1];h.set(e[t],g)}const n=[],p=new Map;for(const[y,w]of h){const S=[...y.y5()].reduce((t,s)=>t+(h.get(s)||0),0);p.set(y,S),n.push({name:y.jc(),MDt:T.an(w,0,1),vDt:T.an(S,0,1)})}const m=this.j3t-t.Rz().reduce((t,s)=>t+(p.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(T.an(m,0,1),this.j3t,n)}for(let t=this.B3t;t<this.W3t;++t)this.z3t.delete(t);this.B3t=this.W3t,this.W3t=0}}CDt(t){this.z3t.set(this.a3t.$S(),t)}GD(){return this.j3t}EDt(t,s,i,e,h,n){return this.J3t=t,this.q3t=s,this.$3t.nl(i,e,h,n),this.Y3t||(this.Y3t=new Promise(t=>{this.Z3t=t})),this.Y3t}RDt(){if(this.J3t){let t=this.iDt(),s=this.$3t,i=T.an(Math.floor(s.dl()),0,t.width),e=T.an(Math.floor(s.pl()),0,t.height),h=s.width(),n=(h=0===h?t.width-i:T.an(Math.floor(h),0,t.width-i),s.height());if(n=0===n?t.height-e:T.an(Math.floor(n),0,t.height-e),(0!==i||0!==e||h!==t.width||n!==t.height)&&0<h&&0<n){const r=T.xo(h,n),o=r.getContext("2d");o.drawImage(t,i,e,h,n,0,0,h,n),t=r}T.Go(t,this.J3t,this.q3t).then(t=>{this.X3t&&URL.revokeObjectURL(this.X3t),this.X3t=URL.createObjectURL(t),this.Y3t=null,this.Z3t(this.X3t)}),this.J3t="",this.q3t=1}}PDt(){return this.X3t}ADt(t){t?this.K3t++:this.K3t--}FDt(){return 0<this.K3t}DDt(t){const s=this.vb();if(2===t)this.eFt=T.Qh(T.Hg.rb,this.vb()),this.eFt.fI("Arial"),this.eFt.dI(16),this.eFt.II("center"),this.eFt.EI("center"),this.eFt.kI(300,200);else if(0===t){const i=this.Xc.ODt();i&&i.uV(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.LDt("splash-images/splash-logo.svg").then(t=>{"done"===this.cFt?s.dM(t):this.hFt.nFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.kDt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.cFt?s.dM(t):this.hFt.rFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.kDt("splash-images/splash-website-512.png").then(t=>{"done"===this.cFt?s.dM(t):this.hFt.oFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async LDt(t){t=new URL(t,this.Xc.NDt()).toString();const s=await T.mo(t),i=await this.Xc.BDt(s,2048,2048);return this.vb().sP(i,{h2:"high"})}async kDt(t){t=new URL(t,this.Xc.NDt()).toString();const s=await T.mo(t);return this.vb().sP(s,{h2:"high"})}WDt(){this.Xc.Kc("runtime","hide-cordova-splash")}jDt(){this.Q3t=Date.now(),this.Xc.Pf().addEventListener("loadingprogress",this.iFt),this.tFt=requestAnimationFrame(()=>this.VDt());const t=this.Xc.HDt();3!==t&&this.WDt()}async UDt(){const t=this.vb(),s=(this.sFt=1,this.Xc.HDt());4===s&&await this.dFt,this.fFt=null,this.dFt=null,-1!==this.tFt&&(cancelAnimationFrame(this.tFt),this.tFt=-1),this.Xc.Pf().removeEventListener("loadingprogress",this.iFt),this.iFt=null,this.eFt&&(this.eFt.tn(),this.eFt=null),this.Xc.zDt(),t.UR(),this.hFt.nFt&&(t.dM(this.hFt.nFt),this.hFt.nFt=null),this.hFt.rFt&&(t.dM(this.hFt.rFt),this.hFt.rFt=null),this.hFt.oFt&&(t.dM(this.hFt.oFt),this.hFt.oFt=null),t.HR(0,0,0,0),t.JS(),this.cFt="done",this.B3t=t.$S(),3===s&&this.WDt()}VDt(){if(-1!==this.tFt){const t=this.vb(),s=(t.UR(),this.tFt=-1,this.Xc.dF().kH()),i=this.Xc.HDt();if(3!==i&&(this.gDt(t),t.HR(0,0,0,0),t.mR(),t._w(),t.yR(null)),0===i)this.JDt(s);else if(1===i)this.qDt(s,120,0);else if(2===i)this.$Dt(s);else if(3===i)T.Ir();else{if(4!==i)throw new Error("invalid loader style");this.XDt(s)}t.JS(),this.tFt=requestAnimationFrame(()=>this.VDt())}}$Dt(t){t?this.eFt._I(1,0,0):this.eFt._I(.6,.6,.6),this.eFt.Qc(Math.round(100*this.sFt)+"%");const s=this.m3t/2,i=this.g3t/2,e=(Fa.Kl(s-150,i-100,150+s,100+i),this.vb());e.yR(this.eFt.SM()),e.yS(Fa,this.eFt.pC())}qDt(t,s,i){const e=this.vb(),h=(e.Aw(),t?e.dR(1,0,0,1):e.dR(.118,.565,1,1),this.m3t/2),n=this.g3t/2,r=s/2;I.nl(h-r,n-4+i,Math.floor(s*this.sFt),8),e.Rect(I),I.nl(h-r,n-4+i,s,8),I.offset(-.5,-.5),I._l(.5,.5),e.dR(0,0,0,1),e.MS(I),I._l(1,1),e.dR(1,1,1,1),e.MS(I)}JDt(t){const s=this.vb(),i=this.Xc.ODt();if(i){const e=i.SM();if(e){const h=e.Xp(),n=e.om(),r=this.m3t/2,o=this.g3t/2,a=h/2,l=n/2;Fa.Kl(r-a,o-l,r+a,o+l),s.yR(e),s.Hl(Fa),this.qDt(t,h,16+l)}else this.qDt(t,120,0)}else this.qDt(t,120,0)}XDt(t){let s=this.vb(),i=this.hFt.nFt,e=this.hFt.rFt,h=this.hFt.oFt,n=Date.now(),r=(0===this.aFt&&(this.Q3t=n),this.Xc.YDt()||this.Xc.ZDt()&&!this.Xc.KDt()),o=r?0:200,a=r?0:3e3,l=1,u=("fade-in"===this.cFt?l=Math.min((n-this.Q3t)/300,1):"fade-out"===this.cFt&&(l=Math.max(1-(n-this.uFt)/300,0)),s.Aw(),s.dR(.231*l,.251*l,.271*l,l),I.set(0,0,this.m3t,this.g3t),s.Rect(I),Math.ceil(this.m3t)),c=Math.ceil(this.g3t),f,d;256<this.g3t?(s.dR(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),I.nl(0,.8*c-d/2,f,d),s.Rect(I),t?s.dR(l,0,0,l):s.dR(.161*l,.953*l,.816*l,l),f=u*this.sFt,I.nl(.5*u-f/2,.8*c-d/2,f,d),s.Rect(I),s.dR(l,l,l,l),s._w(),e&&(f=1.5*T.an(.22*c,105,.6*u),d=f/8,I.nl(.5*u-f/2,.2*c-d/2,f,d),s.yR(e),s.Rect(I)),i&&(f=Math.min(.395*c,.95*u),d=f,I.nl(.5*u-f/2,.485*c-d/2,f,d),s.yR(i),s.Rect(I)),h&&(f=1.5*T.an(.22*c,105,.6*u),d=f/8,I.nl(.5*u-f/2,.868*c-d/2,f,d),s.yR(h),s.Rect(I))):(s.dR(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),I.nl(0,.85*c-d/2,f,d),s.Rect(I),t?s.dR(l,0,0,l):s.dR(.161*l,.953*l,.816*l,l),f=u*this.sFt,I.nl(.5*u-f/2,.85*c-d/2,f,d),s.Rect(I),s.dR(l,l,l,l),s._w(),i&&(f=.55*c,d=f,I.nl(.5*u-f/2,.45*c-d/2,f,d),s.yR(i),s.Rect(I))),this.aFt++,"fade-in"===this.cFt&&300<=n-this.Q3t&&2<=this.aFt&&(this.cFt="wait",this.lFt=n),"wait"===this.cFt&&n-this.lFt>=a&&1<=this.sFt&&(this.cFt="fade-out",this.uFt=n),("fade-out"===this.cFt&&n-this.uFt>=300+o||r&&1<=this.sFt&&n-this.Q3t<500)&&this.fFt()}}}{let V=self.Ds,H=self.C3Debugger,i={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},r=!0;V.QDt=class extends V.Zh{constructor(t){t=Object.assign({},i,t),super(),this.tOt=t.messagePort,this.sOt=t.runtimeBaseUrl,this.iOt=t.previewUrl,this.eOt=!!t.headless,this.hOt=!!t.hasDom,this.nOt=!!t.isInWorker,r=t.ife,this.rOt=!!t.useAudio,this.oOt=t.exportType,this.aOt=t.isNWjs,this.WV=!!t.isiOSCordova,this.lOt=!!t.isiOSWebView,this.uOt=!!t.isWindowsWebView2,this.cOt=!!t.isAnyWebView2Wrapper,this.fOt=!!t.isFBInstantAvailable,this.dOt=!("preview"!==this.oOt||!t.isDebug),this.pOt=this.dOt,this.mOt=this.dOt,this.gOt=0,this.yOt=[],this.wOt=[],this.SOt=!1,this.bOt="",this.vOt="",this.MOt="",this.xOt="",this.GOt=0,this.TOt=0,this.OA=self.devicePixelRatio,this._Ot=0,this.IOt=0,this.COt=0,this.EOt=0,this.ROt=0,this.POt=!1,this.Tg=!0,this.AOt=!1,this.FOt=!1,this.DOt=!1,this.OOt=null,this.QH=V.Qh(V.LV,this,t),this.sq=V.Qh(V.bX,this),this.uft=V.Qh(V.o0t,this),this.LOt=V.Qh(V.RL,this,t.wrapperComponentIds),this.kOt=V.Qh(V.sAt,this),this.QK=V.Qh(V.jX,this),this.NOt=V.Qh(V.Zat,this),this.BOt=V.Qh(V.Qat,this),this.plt=V.Qh(V.olt,this),this.bg=V.Qh(V.og,{ug:t=>this.WOt(t),dg:t=>this.jOt(t)}),this.VOt=new Map,this.HOt=[],this.UOt=new Map,this.zOt=new Map,this.JOt=0,this.qOt=[],this.$Ot=new Set,this.XOt=[],this.YOt=[],this.ZOt=new Map,this.KOt=!1,this.QOt=!1,this.tLt=0,this.sLt=0,this.iLt=new Map,this.eLt=new Set,this.hLt=new Set,this.nLt=[],this.rLt=[],this.oLt=null,this.aLt=!1,this.lLt="vsync",this.f2="trilinear",this.uLt=!1,this.cLt=!0,this.fLt=!1,this.dLt=!1,this.pLt=null,this.mLt={gLt:t=>{this.tFt=-1,this.yLt=-1,this.cZ(t)},wLt:t=>{this.yLt=-1,this.cZ(t,!1,"skip-render")},SLt:()=>{this.tFt=-1,this.i3()}},this.tFt=-1,this.yLt=-1,this.bLt=0,this.vLt=0,this.MLt=!1,this.xLt=!1,this.GLt=!1,this.TLt=!0,this._Lt=!0,this.ILt=!1,this.CLt=0,this.ELt=new V.s1(1),this.RLt=()=>Math.random(),this.PLt=0,this.ALt=0,this.FLt=0,this.DLt=0,this.OLt=0,this.UIt=1,this.LLt=1/30,this.kLt=0,this.NLt=V.Qh(V.f0),this.BLt=V.Qh(V.f0),this.WLt=V.Qh(V.f0),this.jLt=new Map,this.VLt=-1,this.HLt=0,this.ULt=0,this.zLt=-1,this.JLt=0,this.qLt=0,this.$Lt=0,this.XLt=!1,this.YLt="",this.ZLt=!1,this.KLt="",this.c4=null,this.QLt="",this.tkt=null,this.skt=null,this.$Tt=V.Qh(V.Event.Pf),this.ikt=new Map,this.ekt=new Map,this.hkt=0,this.nkt=!1,this.rkt=!1,this.okt=!1,this.akt=[],this.lkt={pretick:V.Qh(V.Event,"pretick",!1),tick:V.Qh(V.Event,"tick",!1),tick2:V.Qh(V.Event,"tick2",!1),instancecreate:V.Qh(V.Event,"instancecreate",!1),instancedestroy:V.Qh(V.Event,"instancedestroy",!1),beforelayoutchange:V.Qh(V.Event,"beforelayoutchange",!1),layoutchange:V.Qh(V.Event,"layoutchange",!1)},this.lkt.instancecreate.a6=null,this.lkt.instancedestroy.a6=null,this.Fq=V.Qh(V.Event.Pf),this.ukt=null;const s=(t,s)=>V.VIt.TPt(this,t,s);this.ckt=V.Qh(V.v0,s),this.fkt=V.Qh(V.v0,s),this.dkt=V.Qh(V.v0,s),this.pkt=V.Qh(V.mkt,this,t.jobScheduler),t.canvas&&(this.oLt=V.Qh(V.h3t,this)),this.tOt.onmessage=t=>this._OnMessageFromDOM(t.data),this.t4("runtime","visibilitychange",t=>this.gkt(t)),this.t4("runtime","wrapper-extension-message",t=>this.ykt(t)),this.t4("runtime","opus-decode",t=>this.kO(t.arrayBuffer)),this.t4("runtime","get-remote-preview-status-info",()=>this.wkt()),this.t4("runtime","js-invoke-function",t=>this.O0t(t)),this.t4("runtime","go-to-last-error-script",self.goToLastErrorScript),this.t4("runtime","offline-audio-render-completed",t=>this.Skt(t)),this.$Tt.addEventListener("window-blur",t=>this.bkt(t)),this.$Tt.addEventListener("window-focus",()=>this.vkt()),this.QK.vY(),this.BOt.vY(),this.Mkt=null,this.xkt=new WeakMap,this.Gkt={keyboard:null,JD:null,qD:null,$D:null},this.Tkt=new WeakMap,this._kt=[]}static BM(t){return V.Qh(V.QDt,t)}tn(){V.Pr(this.HOt),this.UOt.clear(),this.zOt.clear(),this.sq.tn(),this.sq=null,this.uft.tn(),this.uft=null,this.LOt.tn(),this.LOt=null,this.QH.tn(),this.QH=null,this.kOt.tn(),this.kOt=null,this.QK.tn(),this.QK=null,this.NOt.tn(),this.NOt=null,this.BOt.tn(),this.BOt=null,this.plt.tn(),this.plt=null,this.bg.tn(),this.bg=null,this.oLt&&(this.oLt.tn(),this.oLt=null),this.$Tt.tn(),this.$Tt=null,this.Ikt=null}["_OnMessageFromDOM"](t){const s=t.type;if("event"===s)this.Ckt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.Ekt(t)}}Ckt(t){if(this.okt){const s=t.component,i=t.handler,e=t.data,h=t.dispatchOpts,n=!(!h||!h.dispatchRuntimeEvent),r=!(!h||!h.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(n){const l=new V.Event(i);l.data=e,this.$Tt.jf(l)}if(r){const u=new V.Event(i,!0);for(const[c,f]of Object.entries(e))u[c]=f;this.gX(u)}}const a=this.ikt.get(s);if(a){const d=a.get(i);if(d){let t=null;try{t=d(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.Rkt(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this.Rkt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.Rkt(o,!1,""+t)}):this.Rkt(o,!0,t))}else n||r||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`)}else n||r||console.warn(`[Runtime] No DOM event handlers for component '${s}'`)}else this.akt.push(t)}Rkt(t,s,i){this.tOt.postMessage({type:"result",responseId:t,isOk:s,result:i})}Ekt(t){const s=t.responseId,i=t.isOk,e=t.result,h=this.ekt.get(s);i?h.resolve(e):h.reject(e),this.ekt.delete(s)}t4(t,s,i){let e=this.ikt.get(t);if(e||(e=new Map,this.ikt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}Kc(t,s,i,e){this.tOt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}fO(t,s,i,e){const h=this.hkt++,n=new Promise((t,s)=>{this.ekt.set(h,{resolve:t,reject:s})});return this.tOt.postMessage({type:"event",component:t,handler:s,data:i,responseId:h},e),n}t8(t,s,i,e=-1){this.Kc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}s8(t,s,i){const e=this.hkt++,h=new Promise((t,s)=>{this.ekt.set(e,{resolve:t,reject:s})});return this.t8(t,s,i,e),h}ykt(t){if(-1!==t.asyncId){const s=t.asyncId,i=this.ekt.get(s);i.resolve(t.params),this.ekt.delete(s)}else this.Ckt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}g4(t,s,i){this.t4("wrapper-extension:"+t,s,i)}d4(t){return this.LOt.d4(t)}Pkt(t){if(!this.yX())throw new Error("not in debug mode");this.Kc("runtime","post-to-debugger",t)}async qIt(t){V.Gbt(this),this.yX()?await H.qIt(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const[s]=await Promise.all([this.QH.po("data.json"),this.Akt(),this.pkt.qIt()]);if(await this.Fkt(s),await this.Dkt(t),this.YDt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.dDt()){const i=this.dDt();console.info(`[C3 runtime] Hosted in ${this.GF()?"worker":"DOM"}, rendering with WebGL ${i.M2()} [${i.MP()}]`)}else this.pDt()&&console.info(`[C3 runtime] Hosted in ${this.GF()?"worker":"DOM"}, rendering with WebGPU [${this.pDt().GetAdapterInfoString()}]`);this.vb().QS()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.okt=!0;for(const e of this.akt)this.Ckt(e);V.Pr(this.akt),this.oLt&&this.oLt.jDt();for(const h of t.runOnStartupFunctions)this.yOt.push(this.Okt(h));if(await Promise.all([this.QH.OH(),...this.yOt]),V.Pr(this.yOt),!this.QH.kH())return this.oLt&&await this.oLt.UDt(),await this.$Tt.Bf(new V.Event("beforeruntimestart")),await this.UR(),this.tOt.postMessage({type:"runtime-ready"}),this;this.oLt&&this.oLt.WDt()}async Okt(t){try{await t(this.Mkt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async Fkt(t){const s=t.project,i=(this.bOt=s[0],this.vOt=s[16],this.MOt=s[31],this.xOt=s[38],s[39]||"loading-logo.png"),e=(this.uLt=!!s[9],this.GOt=this.COt=s[10],this.TOt=this.EOt=s[11],this.kOt.jAt(this.GOt,this.TOt),this._Ot=this.GOt/2,this.IOt=this.TOt/2,this.lLt=s[37],this.aLt=!!s[40],this.f2=s[14],this.AOt=s[15],this.FOt=s[42],this.DOt=s[17],this.POt=!!s[18],this.ROt=s[19],this.sLt=s[21],this.fLt=s[22],this.QH);if(e.fH(s[45]),e.VH(s[7],s[25]),e.pH(s[8]),e.mH(s[32]),e.yH(s[28]),e.BH(s[29]),0===this.ROt){let t;(t="flat"===e.AO()?e.wH()+i:i)&&(this.OOt=e.CH({url:t}))}this.oLt&&(this.oLt.hDt(V.h3t.lDt(s[12])),this.oLt.oDt(s[23]?"high":"low"),this.oLt.YS(0!==s[24]),this.oLt.pFt(s[34]),this.oLt.uDt(s[41]),this.oLt.mFt(s[13]),this.oLt.gFt(s[30]),this.oLt.SFt(s[46],s[47]),this.oLt.wFt(s[26]),this.oLt.bFt(s[48]));const h=s[43],n=(h&&await this.Lkt(h),this.kkt(),this.LOt.OGt(),this.nLt=self.Nkt(),s[2]);for(const l of n[1])this.LOt.LGt(l);for(const u of n[0])this.LOt.DGt(u);this.nLt=self.Nkt(),this.Bkt(),this.LOt.WGt();for(const c of s[3]){const f=V.hlt.BM(this,this.HOt.length,c);this.HOt.push(f),this.UOt.set(f.jc().toLowerCase(),f),this.zOt.set(f.Pz(),f)}for(const d of s[4]){const p=this.HOt[d[0]];p.A_t(d)}for(const m of s[27]){const g=m.map(t=>this.HOt[t]);this.qOt.push(V.Qh(V.PIt,this,g))}this.Wkt();for(const y of this.HOt)y.D_t();for(const w of s[5])this.sq.BM(w);const r=s[1];if(r){const S=this.sq.PX(r);S&&this.sq.EX(S)}for(const b of s[35])this.NOt.BM(b);for(const v of s[33])this.QK.BM(v);for(const M of s[44])this.BOt.BM(M);this.BOt.ilt()||(this.BOt.tn(),this.BOt=null);for(const x of s[49])this.plt.BM(x);this.plt.flt()||(this.plt.tn(),this.plt=null);for(const G of s[6])this.uft.BM(G);this.uft.N0t(),this.jkt(),V.Pr(this.nLt),this.Ik();let o="any",a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.Kc("runtime","set-target-orientation",{targetOrientation:o})}async Lkt(t){const s=t.format;"image-sequence"===s?this.pLt=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===s?this.pLt=new self.C3ExportToGIF(this,t):"webm"===s?this.pLt=new self.C3ExportToWebMVideo(this,t):"mp4"===s&&(this.pLt=new self.C3ExportToMP4Video(this,t)),this.lLt="unlimited-frame",this.oLt.hDt("off"),this.OA=1,self.devicePixelRatio=1,await this.fO("runtime","set-exporting-to-video",{message:this.pLt.GetExportingMessageForPercent(0),duration:this.pLt.L6()})}HDt(){return this.ROt}jFt(){return null!==this.pLt}Vkt(){return this.pLt.L6()}Hkt(){return this.pLt.GetFramerate()}Ukt(){return this.pLt.qIt({width:this.oLt.vL(),height:this.oLt.xL()})}zkt(){const t=this.bLt/this.Hkt();return this.pLt.AddFrame(this.oLt.iDt(),t)}Jkt(){this.pLt&&this.pLt.ait()}Skt(t){this.pLt.OnOfflineAudioRenderCompleted(t)}qkt(){return this.pLt.JS()}ZDt(){return this.fOt}Rg(){return this.Tg}gO(t){this.yOt.push(t)}M$(t){this.SOt=!!t}$kt(t){this.SOt&&this.wOt.push(t)}C$(){return this.wOt}T_t(){return this.JOt++}L_t(){return this.JOt}DPt(t){this.$Ot.add(t)}OPt(t){this.$Ot.delete(t)}WFt(){return this.$Ot}async Dkt(t){this.oLt&&(await this.oLt.xo(t),this.oLt.DDt(this.ROt))}async Akt(){const h=this.QH;if(!h.SO("audio/webm; codecs=opus")){let t=null,s=h.dH(),i=s+"opus.wasm.js",e=s+"opus.wasm.wasm";try{t=this.Xkt()&&h.SH()?await h.vH(e):await h.yo(e)}catch(t){return void console.info("Failed to fetch Opus decoder WASM; assuming project has no Opus audio.",t)}this.Ykt(t,"opus-decoder-wasm"),await this.Zkt([i])}}async kO(t){const s=await this.Kkt("OpusDecode",{arrayBuffer:t},[t]);return s}async UR(){this.MLt=!0,this.PLt=Date.now();let s=null,t=new Promise(t=>s=t);if(this.POt){for(const h of this.HOt)h.xz()||h.z_t()||!h.OL()||h.FMt();(async()=>{await this.QH.OH(),await t,this.Tg=!1,this.Qkt()})()}else this.Tg=!1;this.QH.LH(),this.yX()&&H.RuntimeInit(r);for(const n of this.sq.jD())n.J$();this.jFt()&&await this.Ukt();const i=this.sq.RX(),e=(await i.r$(null,this.vb()),await i.g$(!0),this.HLt=performance.now(),s(),this.POt||this.Qkt(),await this.fO("runtime","before-start-ticking"));e.isSuspended&&!this.jFt()?(this.CLt++,this.ILt=!0):this.cZ()}Qkt(){this.YN(V.B$.N$.k$.t5t,null,null),this.Kc("runtime","register-sw")}Ugt(t){t=Math.floor(t);const s=this.nLt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}Bkt(){for(const t of self.s5t){const s=V.first(Object.keys(t));this.rLt.push(s)}}a1t(t){t=Math.floor(t);const s=this.rLt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}i5t(){return this.hOt}e5t(){return this.eOt}GF(){return this.nOt}NDt(){return this.sOt}h5t(){return this.iOt}WF(){return this.uft}QF(){return this.uft.QF()}K0t(){return this.uft.K0t()}JF(){return this.uft.JF()}Q0t(){return this.uft.Q0t()}Mbt(){return 0===this.K0t().Eft()}s1t(){return this.uft.s1t()}xPt(){return this.LOt}jyt(){return this.LOt.jyt()}KU(t){if((t=Math.floor(t))<0||t>=this.HOt.length)throw new RangeError("invalid index");return this.HOt[t]}n5t(t){return this.UOt.get(t.toLowerCase())||null}u8(t){return this.zOt.get(t)||null}Iht(t){const s=V.RL.XL(t);return s?s.QL():null}Mz(){return this.HOt}*r5t(){for(const t of this.HOt)t.xz()||(yield*t.instances())}Pf(){return this.$Tt}LF(){return this.Fq}gX(t){t.runtime=this.PL();const s=this.yX()&&!this.uft.Tk();s&&H.StartMeasuringScriptTime(),this.Fq.dispatchEvent(t),s&&H.AddScriptTime()}D$(t){return t.runtime=this.PL(),this.Fq.Bf(t)}_F(){return this.GOt}CF(){return this.TOt}o5t(t,s){if(this.GOt!==t||this.TOt!==s){this.GOt=t,this.TOt=s;const i=this.ND();i.BX(),i.WX()}}sJ(){return this.COt}iJ(){return this.EOt}tDt(t,s){if(this.COt!==t||this.EOt!==s){this.COt=t,this.EOt=s;const i=this.ND();i.BX(),i.WX()}}VFt(t){this.jFt()||(this.OA=t)}GL(){return this.OA}ZJ(){return this._Ot}KJ(){return this.IOt}dL(){return this.oLt}h9(){return this.oLt?this.oLt.h9():this.COt}n9(){return this.oLt?this.oLt.n9():this.EOt}aN(){return this.oLt?this.oLt.aN():1}Pj(){return this.oLt?this.oLt.Pj():1}N9(){return this.oLt?this.oLt.N9():1}L9(){return this.oLt?this.oLt.L9():1}Q5(){return this.oLt?this.oLt.Q5():0}tN(){return this.oLt?this.oLt.tN():0}a5t(){return this.oLt?this.oLt.yL():0}l5t(){return this.oLt?this.oLt.SL():0}Ej(){return this.oLt?this.oLt.Ej():"off"}m9(t){return this.oLt?this.oLt.m9(t):null}kU(t){this.oLt&&this.oLt.kU(t)}d9(){return this.AOt}LFt(){return this.FOt}kFt(){return this.DOt}GD(){return this.oLt?this.oLt.GD():NaN}vM(){return"nearest"!==this.EF()}_D(){return this.lLt}ID(t){this.lLt!==t&&(this.lLt=t,-1!==this.tFt||-1!==this.yLt)&&(this.u5t(),this.c5t())}EF(){return this.f2}E_t(){return this.POt}ODt(){return this.OOt}zDt(){this.OOt&&(this.OOt.hI(),this.OOt.tn(),this.OOt=null)}ND(){return this.sq}OD(){return this.sq.OD()}kQ(){return this.QK}f5t(){return this.NOt}xCt(){return this.BOt}Olt(){return this.plt}dF(){return this.QH}CH(t){return this.QH.CH(t)}vk(t,s,i,e,h,n){if(n&&this.BOt){if(t instanceof V.hlt&&t.xz()){const o=t.Imt(),a=Math.floor(this.DD()*o.length);return this.vk(o[a],s,i,e,h,n)}const r=this.BOt.elt(t,n);if(r){const l=this.az(r,s,!1,i,e,!1,h,void 0,h);return this.BOt.nlt(l,n),l}}return this.az(t,s,!1,i,e,!1,h,void 0,h)}az(t,s,i,e,h,n,r,o,a){let l=null,u=null;if(t instanceof V.hlt){if((u=t).xz()){const b=u.Imt(),v=Math.floor(this.DD()*b.length);u=b[v]}l=u.sz()}else l=t,u=this.KU(l[1]);const c=u.hk().OL();if(this.Tg&&c&&!u.z_t())return null;const f=s;c||(s=null);let d;d=i&&!n&&l&&!this.iLt.has(l[2])?l[2]:this.sLt++;const p=l?l[0]:null,m=V.Qh(V.Instance,{runtime:this,uN:u,T4:s,JIt:p,YIt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.iLt.set(d,m);let g=null,y=(c&&(g=m.eO(),void 0!==e&&void 0!==h&&(g.Qb(e),g.hv(h)),u.SIt(!0)),s&&(a||s.uz(m,!0),s.BD().a$(u)),this.tLt++,!0);if(o){const M=o.cN();if(M.xN()&&u.xN()){const x=u.h$(),G=M.h$();x===G&&(y=!1)}}if(u.xN()&&!i&&!n&&y){const T=new Set;for(const _ of u.h$().H$())if(_!==u){const I=this.d5t(_,g,T);if(I){const C=this.az(I,f,!1,g?g.Kb():e,g?g.sv():h,!0,!1,void 0,a);m.U$(C)}else{const N=this.az(_,f,!1,g?g.Kb():e,g?g.sv():h,!0,!1,void 0,a);m.U$(N)}}for(const E of m.GN()){E.U$(m);for(const R of m.GN())E!==R&&E.U$(R)}}if(c&&!i&&r&&this.p5t(m,p,g,s,e,h,a),u.xN()&&!i&&!n&&r)for(const P of m.GN()){const A=P.eO();if(A){const B=P.hk(),F=P.cN().sz()[0];B.OL()?this.p5t(P,F,A,s,A.Kb(),A.sv(),a):this.p5t(P,F,A,s,void 0,void 0,a)}}if(!n&&r){void 0===e&&(e=p[0]),void 0===h&&(h=p[1]);const D=g.hB(),W=e-g.Kb()+D.Kb(),j=h-g.sv()+D.sv();D.I4(W,j)}u.pIt();const L=l?V.Hr(l[5]):null,k=l?l[4].map(t=>V.Hr(t)):null,w=c&&p&&p[13];if(w&&m.iCt(),m.H_t(L,k),w){const O=p[13];m.ZB().YMt(O[2],O[0],O[1])}this.YOt.push(m),this.KOt=!0,this.yX()&&H.InstanceCreated(m);const S=this.lkt.instancecreate;return S.a6=m,this.$Tt.dispatchEvent(S),m}bEt(t){const s=t[0],i=t[1],e=t[2],h=t[6];if(h)return h;const n=this.sq.AX(s),r=n.hO(i);return r.hz(e)}d5t(t,s,i){const e=s?.MCt()??[];for(const h of e){const n=this.bEt(h),r=!!h[4],o=this.KU(n[1]);if(!i.has(n)&&t===o&&r)return i.add(n),n}}p5t(a,t,s,l,u,c,f){const i=s.jRt(),e=s.MCt();if(a.eO().VRt(i),e){void 0===u&&(u=t[0]),void 0===c&&(c=t[1]);const d=new Set,p=t[0],m=t[1];for(const g of e){let t=g[0],s=g[1],i=g[2],e=g[3],h=!!g[4],n=g[5],r=g[6],o;if(r)o=r;else{const b=this.sq.AX(t),v=b.hO(s);o=v.hz(i)}const y=this.KU(o[1]),w=a.GCt(y),S=d.has(y);if(w&&!S&&h){const M=a.TCt(y),x=(M.eO().qIt(o[0]),u+o[0][0]-p),G=c+o[0][1]-m;M.eO().I4(x,G),M.eO().VRt(n),a.fB(M,{yB:!!(e>>0&1),SB:!!(e>>1&1),vB:!!(e>>2&1),xB:!!(e>>3&1),TB:!!(e>>4&1),DB:!!(e>>5&1),IB:!!(e>>6&1),EB:!!(e>>7&1),PB:!!(e>>8&1)}),d.add(y)}else{const T=u+o[0][0]-p,_=c+o[0][1]-m,I=this.az(o,l,!1,T,_,!1,!0,a,f);I.eO().VRt(n),a.fB(I,{yB:!!(e>>0&1),SB:!!(e>>1&1),vB:!!(e>>2&1),xB:!!(e>>3&1),TB:!!(e>>4&1),DB:!!(e>>5&1),IB:!!(e>>6&1),EB:!!(e>>7&1),PB:!!(e>>8&1)})}}}}wN(i){if(!this.eLt.has(i)){let t=i.cN(),s=this.ZOt.get(t);if(s){if(s.has(i))return;s.add(i)}else(s=new Set).add(i),this.ZOt.set(t,s);if(this.yX()&&H.InstanceDestroyed(i),i.hCt(),this.KOt=!0,i.xN())for(const e of i.GN())this.wN(e);for(const h of i.children())h.OB()&&this.wN(h);if(!this.sq._k()&&!this.XLt){const n=this.WF();n.xk(!0),i.OCt(),n.xk(!1)}i.LCt(this.sq._k())}}Ik(){this.KOt&&(this.QOt=!0,this.m5t(),this.g5t(),this.QOt=!1,this.KOt=!1,this.uO())}m5t(){for(const t of this.YOt){const s=t.cN();s.uz(t);for(const i of s.m1t())i.uz(t),i.pIt()}V.Pr(this.YOt)}g5t(){this.$Tt.Gf(!0);for(const[t,s]of this.ZOt.entries())this.y5t(t,s),s.clear();this.ZOt.clear(),this.$Tt.Gf(!1)}y5t(t,s){for(const i of s){const e=this.lkt.instancedestroy,h=(e.a6=i,this.$Tt.dispatchEvent(e),this.iLt.delete(i.TN()),this.jLt.delete(i),i.eO());h&&(h.zRt(),h.pz(),h.hCt()),this.eLt.add(i),this.tLt--}V.Wr(t.gk(),s),t.pIt(),this.hLt.add(t);for(const n of t.m1t())V.Wr(n.gk(),s),n.pIt(),this.hLt.add(n);if(t.hk().OL()){const r=new Set([...s].map(t=>t.eO().hO()));for(const o of r)o.IJ(s)}}gIt(){return this.YOt}*_vt(t){for(const s of this.gIt())t.xz()?s.cN().xbt(t)&&(yield s):s.cN()===t&&(yield s)}V_t(){return this.sLt++}U_t(t,s){this.iLt.set(t,s)}n8(t){this._Lt!==(t=!!t)&&(this._Lt=!!t,this._Lt)&&this.ILt&&(this.a8(!1),this.ILt=!1)}r8(){return this._Lt}m$(){this.$Tt.dispatchEvent(V.Qh(V.Event,"renderercontextlost")),this.a8(!0);for(const s of this.HOt)!s.xz()&&s.J_t()&&s.d$();const t=this.OD();t&&t.m$(),V.HGt.c7(),V.RH.c7()}async fDt(){await this.OD().r$(null,this.vb()),this.$Tt.dispatchEvent(V.Qh(V.Event,"renderercontextrestored")),this.a8(!1),this.uO()}gkt(t){if(this._Lt){const s=t.hidden;this.a8(s),(this.ILt=s)||this.uO()}}bkt(t){this.YDt()&&this.fLt&&!V.hi.mi&&!t.data.parentHasFocus&&(this.a8(!0),this.dLt=!0)}vkt(){this.dLt&&(this.a8(!1),this.dLt=!1)}c5t(){const t=this.mLt;"vsync"===this.lLt?-1===this.tFt&&(this.tFt=self.requestAnimationFrame(t.gLt)):"unlimited-tick"===this.lLt?(-1===this.yLt&&(this.yLt=V.io(t.wLt)),-1===this.tFt&&(this.tFt=self.requestAnimationFrame(t.SLt))):-1===this.yLt&&(this.yLt=V.io(t.gLt))}u5t(){-1!==this.tFt&&(self.cancelAnimationFrame(this.tFt),this.tFt=-1),-1!==this.yLt&&(V.eo(this.yLt),this.yLt=-1)}rD(){return 0<this.CLt}a8(t){if(!this.jFt()){const s=this.rD(),i=(this.CLt+=t?1:-1,this.CLt<0&&(this.CLt=0),this.rD());if(!s&&i)console.log("[Construct] Suspending"),this.u5t(),this.$Tt.dispatchEvent(V.Qh(V.Event,"suspend")),this.YN(V.B$.N$.k$.w5t,null,null);else if(s&&!i){console.log("[Construct] Resuming");const e=performance.now();this.ALt=e,this.HLt=e,this.VLt=0,this.ULt=0,this.zLt=0,this.JLt=0,this.$Lt=0,this.qLt=0,this.$Tt.dispatchEvent(V.Qh(V.Event,"resume")),this.YN(V.B$.N$.k$.S5t,null,null),this.j1t()||this.cZ(e)}}}Jj(t){this.ckt.tc(t)}Yj(t){this.fkt.tc(t)}$j(t){this.dkt.tc(t)}qj(t){this.ckt.u0(t)}Zj(t){this.fkt.u0(t)}Xj(t){this.dkt.u0(t)}b5t(){const t=globalThis.Vj;this.ckt.Q0(!0);for(const s of this.ckt)s instanceof t?s.n4():s.cZ();this.ckt.Q0(!1)}v5t(){const t=globalThis.Vj;this.fkt.Q0(!0);for(const s of this.fkt)s instanceof t?s.Qj():s.xGt();this.fkt.Q0(!1)}M5t(){const t=globalThis.Vj;this.dkt.Q0(!0);for(const s of this.dkt)s instanceof t?s.o4():s.wxt();this.dkt.Q0(!1)}*x5t(){const s=globalThis.Vj;this.ckt.Q0(!0);for(const i of this.ckt){let t;t=i instanceof s?i.n4():i.cZ(),V.Fo(t)&&(yield*t)}this.ckt.Q0(!1)}*G5t(){const s=globalThis.Vj;this.fkt.Q0(!0);for(const i of this.fkt){let t;t=i instanceof s?i.Qj():i.xGt(),V.Fo(t)&&(yield*t)}this.fkt.Q0(!1)}*T5t(){const s=globalThis.Vj;this.dkt.Q0(!0);for(const i of this.dkt){let t;t=i instanceof s?i.o4():i.wxt(),V.Fo(t)&&(yield*t)}this.dkt.Q0(!1)}async cZ(a,t,s){this.GLt=!0;const l="background-wake"===s,u="background-wake"!==s&&"skip-render"!==s,c=this.ND(),f=this.dL();if(this.MLt&&(!this.rD()||t||l)){let t=performance.now(),s=(this.xLt=!0,this._5t(a||0),this.zLt++,this.I5t(),this.C5t()),i=(this.bvt()&&await s,this.$Tt.Wf(this.lkt.pretick)),e=(i instanceof Promise&&await i,this.E5t()),h=(this.bvt()&&await e,this.R5t()&&await this.P5t(),c.HD()&&await this.A5t(),this.F5t()),n=(this.bvt()&&await h,c.OD()),r=n.Qq(),o=!1;if(-1!==r&&(n.t$(),f.Kq()!==r)){const d=this.dL().b$(r);this.GF()&&(o=!0,await d)}this.Kc("canvas","update-html-layer-dom-state",{layersDomState:n.Rz().filter(t=>t.T5()).map(t=>t.DJ())}),u&&this.i3(),o&&this.Kc("canvas","cleanup-html-layers"),this.jFt()&&(await this.zkt(),this.fD()>=this.Vkt())?this.qkt():(this.rD()||l||this.c5t(),this.bLt++,this.vLt++,this.xLt=!1,this.qLt+=performance.now()-t)}}async C5t(){const t=this.uft,s=this.yX();this.Ik(),t.xk(!0),this.E1t(this.OD()),s&&H.StartMeasuringTime(),this.bvt()?await t.adt():t.edt(),s&&H.AddEventsTime(),this.R1t(),t.xk(!1),this.Ik(),t.xk(!0)}async E5t(){const t=this.yX(),s=this.bvt(),i=this.$Tt,e=this.lkt,h=this.ukt;t&&H.StartMeasuringTime(),s?await this.D5t(this.x5t()):this.b5t(),s?await this.D5t(this.G5t()):this.v5t(),t&&H.AddBehaviorTickTime(),t&&H.StartMeasuringTime(),s?await this.O5t(e.tick):i.dispatchEvent(e.tick),t&&H.AddPluginTickTime(),this.uft.xk(!1),this.gX(h.tick)}async F5t(){const t=this.uft,s=this.$Tt,i=this.lkt,e=this.yX(),h=this.bvt();e&&H.StartMeasuringTime(),h?await t.P1t(this.sq):t.C1t(this.sq),e&&H.AddEventsTime(),this.kOt.pAt(),this.I5t(),this.TLt=!1,t.xk(!0),e&&H.StartMeasuringTime(),h?await this.D5t(this.T5t()):this.M5t(),e&&H.AddBehaviorTickTime(),e&&H.StartMeasuringTime(),h?await this.O5t(i.tick2):s.dispatchEvent(i.tick2),e&&H.AddPluginTickTime(),t.xk(!1),h&&await t.V1t()}I5t(){if(0!==this.eLt.size){const t=this.$Tt;t.Gf(!0);for(const s of this.hLt)s.Z1t().Bct(this.eLt);this.hLt.clear(),this.uft.udt(this.eLt);for(const i of this.eLt)i.tn();this.eLt.clear(),t.Gf(!1)}}async A5t(){let t=this.ND(),s=0;for(;t.HD()&&s++<10;)await this.L5t(t.NX())}_5t(t){let s=0;if(this.jFt())s=1/this.Hkt(),this.FLt=s,this.DLt=s;else if(0!==this.ALt){const i=Math.max(t-this.ALt,0);.5<(s=i/1e3)&&(s=0),this.FLt=s,this.DLt=V.an(s,this.kLt,this.LLt)}this.ALt=t,this.OLt=this.DLt*this.UIt,this.NLt.tc(this.OLt),this.BLt.tc(s*this.UIt),this.WLt.tc(this.DLt);for(const[e,h]of this.jLt)h.tc(this.DLt*e.gD());this.oLt&&this.oLt.GDt(),1e3<=t-this.HLt&&(this.HLt+=1e3,1e3<=t-this.HLt&&(this.HLt=t),this.ULt=this.VLt,this.VLt=0,this.JLt=this.zLt,this.zLt=0,this.$Lt=Math.min(this.qLt/1e3,1),this.qLt=0,this.oLt&&this.oLt.xDt(),this.kOt.uAt(),this.yX())&&H.Update1sPerfStats()}tCt(t,s){if(s){if(!this.jLt.has(t)){const i=V.Qh(V.f0);i.y0(this.NLt),this.jLt.set(t,i)}}else this.jLt.delete(t)}sCt(t){const s=this.jLt.get(t);return s?s.Ks():this.fD()}async L5t(t){const s=this.$Tt,i=this.ND(),e=i.OD();await e.$$(),e.p$(t,this.vb()),e===t&&this.uft.Z$(),this.kOt.pAt(),this.I5t(),s.dispatchEvent(this.lkt.beforelayoutchange),V._f.Hf(!0),await t.r$(e,this.vb()),V._f.Hf(!1),await t.g$(!1),s.dispatchEvent(this.lkt.layoutchange),this.uO(),this.TLt=!0,this.Ik(),this.Jkt()}uO(){this.cLt=!0}dDt(){return this.oLt?this.oLt.dDt():null}pDt(){return this.oLt?this.oLt.pDt():null}vb(){return this.oLt?this.oLt.vb():null}i3(){const i=this.oLt;if(i&&!i.cDt()){const e=this.vb(),t=e.dP(),h=t&&e.tb(),n=t&&e.yw();if(h&&e.QR(),this.cLt||this.jFt()){const r=this.sq.OD(),o=(this.VLt++,e.UR(),this.yX());o&&H.StartMeasuringTime(),this.cLt=!1;let t=null,s=(h&&(t=i.IDt().WC(),e.fP(t)),null);n&&(s=e.StartFrameTiming(2*(1+r.Jq())),e.StartMeasuringRenderPassTime(0,1)),this.cJ()&&"low"===i.p9()?e.eR(i.h9(),i.n9()):e.hR(),this.k5t(this.vb(),r),t&&e.pP(t),n&&(e.StopMeasuringRenderPassTime(),this.oLt.CDt(s)),e.JS(),o&&(H.AddDrawCallsTime(),H.UpdateInspectHighlight()),i&&i.RDt()}else e.XS()}}aX(t){return"low"===this.dL().p9()||t.tb()&&(this.d9()||this.cJ())}k5t(s,i){s._w(),s.vR(),s.dR(1,1,1,1),s.eP(null),s.yR(null),s.JR(this.cJ()),this.aX(s)&&i.nX(s);const e=i.Kq();for(let t=1;t<e;++t)i.fX(s,t),s.yw()&&s.Restart();this.aX(s)||i.nX(s),i.cX(s)}YN(t,s,i){if(!this.MLt)return!1;let e=!this.xLt&&!this.uft.J1t(),h=0;e&&(h=performance.now());const n=this.yX(),r=(n&&this.M8(!1),this.uft.O1t(this.sq,t,s,i));if(e){const o=performance.now()-h;this.qLt+=o,n&&H.AddTriggersTime(o)}return n&&this.M8(!0),r}rxt(t,s,i){if(!this.bvt())return this.YN(t,s,i);if(this.j1t())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.xLt||this.uft.J1t())return this.uft.N1t(this.sq,t,s,i);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async KN(t,s,i){if(!this.bvt())return this.YN(t,s,i);if(!this.MLt)return!1;if(this.j1t())return this.uft.B1t(t,s,i);if(!this.OD())return this.uft.L1t(t,s,i);let e=performance.now(),h=this.uft.N1t(this.sq,t,s,i),n=h.next();for(;!n.done;)await this.F1t(n.value),n=h.next();return this.rD()||this.uft.J1t()||(await this.uft.V1t(),this.GLt&&!this.xLt&&this.c5t()),this.qLt+=performance.now()-e,n.value}oxt(t,s,i){const e=this.yX(),h=(e&&this.M8(!1),this.uft.H1t(this.sq,t,s,i));return e&&this.M8(!0),h}axt(t,s,i){return this.uft.U1t(this.sq,t,s,i)}lxt(t){return this.ELt.tc(t)}E1t(t){this.XOt.push(t)}R1t(){if(!this.XOt.length)throw new Error("layout stack empty");this.XOt.pop()}sO(){return this.XOt.length?this.XOt.at(-1):this.OD()}aD(t){return t&&-1!==t.gD()?this.DLt*t.gD():this.OLt}lZ(){return this.OLt}uZ(){return this.DLt}uD(){return this.FLt}gD(){return this.UIt}yD(t){(isNaN(t)||t<0)&&(t=0),this.UIt=t}RD(t){this.kLt=Math.max(t,0)}ED(){return this.kLt}FD(t){this.LLt=Math.max(t,0)}AD(){return this.LLt}wD(){return this.ULt}bD(){return this.JLt}MD(){return this.$Lt}N5t(){return this.PLt}fD(){return this.NLt.Ks()}B5t(){return this.BLt.Ks()}pD(){return this.WLt.Ks()}ntt(){return this.bLt}W5t(){return this.vLt}j5t(){return this.tLt}bF(){return this.bOt}MF(){return this.vOt}V5t(){return this.MOt}H5t(){return this.xOt}KD(t){if(this.XLt)throw new Error("cannot call while loading state - wait until afterload event");return this.iLt.get(t)||null}j$(){this.iLt.clear();for(const t of this.HOt)if(!t.xz())for(const s of t.gk())this.iLt.set(s.TN(),s)}YDt(){return"preview"===this.oOt}yX(){return this.dOt}lL(){return this.oOt}uL(){return"nwjs"===this.lL()||this.aOt}KDt(){return"cordova"===this.oOt}U5t(){return"Android"===V.hi.ni&&("cordova"===this.oOt||"playable-ad-single-file"===this.oOt||"playable-ad-zip"===this.oOt||"instant-games"===this.oOt)}Xkt(){return this.WV}z5t(){return this.lOt}cL(){return this.uOt}J5t(){return this.cOt}gF(){return this.kOt}jGt(){return this.LOt.jGt()}VGt(){return this.LOt.VGt()}cJ(){return this.aLt}q5t(){return this.vb().rw(this.iJ())}iw(t){return this.vb().iw(t||this.iJ())}$5t(){return this.TLt}X5t(t){this.uLt!==(t=!!t)&&(this.uLt=t,this.ND().WX(),this.uO())}PF(){return this.uLt}Y5t(t){if(!this.VOt.has(t)){const i=()=>this.Z5t(t);this.VOt.set(t,i),t.Pf().addEventListener("animationframeimagechange",i)}const s=this.bg.pg(t);return s.Eg()||s.Pg().then(()=>this.uO()),s}Z5t(t){this.bg.wg(t)}WOt(t){const s=[];for(const i of t.hIt())for(const e of i.E6()){const h=e.O6();s.push({source:e,width:h.Xp(),height:h.om(),tag:e.sW()})}return{Ig:s}}async jOt(t){const s=V.Qh(V.s1),i=[],h=new Map;for(const r of t.hIt())for(const o of r.E6()){const a=o.O6().lTt();h.has(a)||(h.set(a,null),i.push(s.tc(async()=>{const t=await a.m7();h.set(a,t)})))}await Promise.all(i);const e=[];for(const l of t.hIt())for(const u of l.E6())e.push(s.tc(async()=>{const t=u.O6(),s=h.get(t.lTt()),i=await t.uTt(s),e=await createImageBitmap(i);return{Fg:e}}));const n=await Promise.all(e);for(const c of h.values())c instanceof ImageBitmap&&c.close&&c.close();return{Ig:n}}K5t(t){this.YLt=t,this.ZLt=!1}Q5t(){this.YLt="",this.ZLt=!0}tNt(t){this.KLt=t}c2t(t){this.c4=t}sNt(){return this.QLt}R5t(){return!!(this.YLt||this.ZLt||this.KLt||null!==this.c4)}async P5t(){if(this.YLt&&(this.Ik(),await this.iNt(this.YLt),this.eNt()),this.KLt&&(await this.hNt(this.KLt),this.eNt(),this.yX())&&H.StepIfPausedInDebugger(),this.ZLt){const t=await this.nNt();this.QLt=t,await this.KN(V.B$.N$.k$.rNt,null),this.QLt="",this.eNt()}if(null!==this.c4){this.Ik();try{await this.oNt(this.c4),this.QLt=this.c4,await this.KN(V.B$.N$.k$.aNt,null),this.QLt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.KN(V.B$.N$.k$.lNt,null)}this.eNt()}}eNt(){this.YLt="",this.ZLt=!1,this.KLt="",this.c4=null}_L(){return this.tkt||(this.tkt=localforage.Ai({name:"c3-localstorage-"+this.V5t(),description:this.bF()})),this.tkt}uNt(){return this.skt||(this.skt=localforage.Ai({name:"c3-savegames-"+this.V5t(),description:this.bF()})),this.skt}async iNt(t){const s=await this.nNt();try{await this.uNt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.QLt=s,await this.KN(V.B$.N$.k$.rNt,null),this.QLt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.KN(V.B$.N$.k$.cNt,null)}}async hNt(t){try{const s=await this.uNt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.oNt(s),this.QLt=s,await this.KN(V.B$.N$.k$.aNt,null),this.QLt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.KN(V.B$.N$.k$.lNt,null)}}async nNt(){const t={c3save:!0,version:1,rt:{time:this.fD(),timeRaw:this.B5t(),walltime:this.pD(),timescale:this.gD(),tickcount:this.ntt(),next_uid:this.sLt,running_layout:this.OD().Pz(),start_time_offset:Date.now()-this.PLt},types:{},layouts:{},events:this.uft.X9(),timelines:this.QK.X9(),user_script_data:null};for(const i of this.HOt)i.xz()||i._It()||(t.types[i.Pz().toString()]=i.X9());for(const e of this.sq.jD())t.layouts[e.Pz().toString()]=e.X9();const s=this.fNt("save");return s.saveData=null,await this.D$(s),t.user_script_data=s.saveData,JSON.stringify(t)}E$(){return this.XLt}async oNt(t){const s=this.ND(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(1<i.version)throw new Error("C3 save data from future version");this.f2t(),this.$Tt.dispatchEvent(V.Qh(V.Event,"beforeload"));for(const a of this.r5t()){const l=a.cN();l._It()||a.dY()}let e=i.rt,h=(this.NLt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.BLt.Set(e.timeRaw),this.WLt.Set(e.walltime),this.UIt=e.timescale,this.bLt=e.tickcount,this.PLt=Date.now()-e.start_time_offset,e.running_layout),n=!(this.XLt=!0);if(h!==this.OD().Pz()){const u=s.AX(h);if(!u)return;await this.L5t(u),n=!0}for(const[c,f]of Object.entries(i.layouts)){const d=parseInt(c,10),p=s.AX(d);p&&p.Y9(f)}const r=new Set;for(const[m,g]of Object.entries(i.types)){const y=parseInt(m,10),w=this.u8(y);!w||w.xz()||w._It()||w.Y9(g,r)}for(const S of this.sq.jD())for(const b of S.qk())b.Z9();if(this.Ik(),this.j$(),this.XLt=!1,n){for(const v of this.r5t())v.R$();for(const[M,x]of Object.entries(i.types)){const G=parseInt(M,10),T=this.u8(G);!T||T.xz()||T._It()||T.EIt(x)}}this.sLt=e.next_uid,this.uft.Y9(i.events);for(const _ of this.HOt)if(!_.xz()&&_.xN())for(const I of _.gk()){const C=I.V$();for(const E of _.h$().H$())if(E!==_){const R=E.gk();if(C<0||C>=R.length)throw new Error("missing sibling instance");I.U$(R[C])}}this.QK.Y9(i.timelines),s.BX(),s.WX();for(const P of r)P.DCt();this.d2t(),this.$Tt.dispatchEvent(V.Qh(V.Event,"afterload")),this.gX(this.fNt("afterload"));for(const[A,F]of Object.entries(i.types)){const D=parseInt(A,10),O=this.u8(D);O&&O.CIt()}const o=this.fNt("load");o.saveData=i.user_script_data,await this.D$(o),this.uO()}dNt(t,s){return t.eO().LRt()-s.eO().LRt()}MPt(t,s){t.eO()&&!this.Tkt.has(t)&&(this.Tkt.set(t,s),this._kt.push(t))}f2t(){this.Tkt=new WeakMap,V.Pr(this._kt)}d2t(t="full",s=null){this._kt.sort(this.dNt);for(const i of this._kt)i.mY(this.Tkt.get(i),t,s);for(const e of this._kt)e.BCt(this.Tkt.get(e),t,s);this.f2t()}async Zkt(t){const s=await Promise.all(t.map(async t=>{const s=this.KDt()&&this.QH.SH();if(s||"playable-ad-single-file"===this.lL()){const i=await this.QH.mo(t);return URL.createObjectURL(i)}return new URL(t,location.href).toString()}));this.pkt.pNt(s)}mNt(t,s){this.pkt.gNt(t,s)}Ykt(t,s){this.pkt.yNt(t,s)}Kkt(t,s,i,e){return this.pkt.Kkt(t,s,i,null,null,e)}wNt(t,s,i,e){return this.pkt.wNt(t,s,i,e)}SNt(){return this.pkt.bNt()}YD(t,s){this.Kc("runtime","invoke-download",{url:t,filename:s})}async BDt(t,s,i,e,h,n){if(e=e||s,h=h||i,this.GF()){const r=await this.fO("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:h,imageBitmapOpts:n});return r.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,s,i,e,h);return n?self.createImageBitmap(o,n):o}}async vNt(t){return this.GF()?this.fO("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}MNt(){this.nkt||(this.nkt=!0,this.Kc("runtime","enable-device-orientation"))}xNt(){this.rkt||(this.rkt=!0,this.Kc("runtime","enable-device-motion"))}DD(){return this.RLt()}GNt(t){this.RLt=t}wkt(){const t=this.vb();return{fps:this.wD(),tps:this.bD(),cpu:this.MD(),gpu:this.GD(),layout:this.OD()?this.OD().jc():"",renderer:t.tb()?t.MP():t.GetAdapterInfoString()}}j1t(){return!!this.yX()&&H.j1t()}F1t(t){return this.bvt()?H.F1t(t):Promise.resolve()}mgt(){return!!this.bvt()&&H.BreakNext()}TNt(t){this.pOt=!!t,this._Nt()}INt(){return this.pOt}bvt(){return this.mOt}M8(t){t?this.gOt--:this.gOt++,this._Nt()}_Nt(){this.mOt=this.yX()&&this.pOt&&0===this.gOt}Fpt(){return this.yX()&&H.Fpt()}l9(){return this.yX()&&this.vb().dP()&&H.l9()}async D5t(t){if(t)for(const s of t)await this.F1t(s)}O5t(t){return this.D5t(this.$Tt.Vf(t))}O0t(t){return this.uft.O0t(t.name,t.params)}pO(t){if(this.GF())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}PL(){return this.Mkt}fNt(t){const s=V.Qh(V.Event,t,!1);return s.runtime=this.Mkt,s}kkt(){this.Mkt=new self.uF(this),this.ukt={tick:this.fNt("tick")}}Wkt(){const t={};for(const s of this.HOt)t[s.a1t()]={value:s.KL(),enumerable:!0,writable:!1};this.Mkt.kF(t)}jkt(){const t={};for(const s of this.WF().g1t())t[s.a1t()]=s.l1t();this.Mkt.NF(t)}zD(){return this.Gkt}nk(t,s){this.xkt.set(t,s)}Yk(t){return this.xkt.get(t)}sL(t){if(!(t instanceof self.ik))throw new TypeError("expected IObjectClass");const s=this.Yk(t);if(s&&s instanceof V.hlt)return s;throw new Error("invalid IObjectClass")}dk(t){if(!(t instanceof self.lN))throw new TypeError("expected IInstance");const s=this.Yk(t);if(s&&s instanceof V.Instance)return s;throw new Error("invalid IInstance")}iO(t){if(!(t instanceof self.JB))throw new TypeError("expected IWorldInstance");const s=this.Yk(t);if(s&&s instanceof V.Instance)return s;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=V.QDt.BM,self.C3_InitRuntime=(t,s)=>t.qIt(s)}{const Da=self.Ds;Da.mkt=class extends Da.Zh{constructor(t,s){super(),this.Xc=t,this.CNt=new Map,this.ENt=0,this.RNt=s.inputPort,s.outputPort.onmessage=t=>this.PNt(t),this.ANt=s.maxNumWorkers,this.FNt=1,this.DNt=!1,this.ONt=!1}async qIt(){}bNt(){return this.ANt}pNt(t){this.RNt.postMessage({type:"_import_scripts",scripts:t})}gNt(t,s){this.RNt.postMessage({type:"_send_blob",blob:t,id:s})}yNt(t,s){this.RNt.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}Kkt(t,s,i,e,h,n){if(i=i||[],"number"==typeof n&&(n=Math.floor(n))<=0)throw new Error("invalid maxWorkerNum");const r=this.ENt++,o={type:t,isBroadcast:!1,maxWorkerNum:n,jobId:r,params:s,transferables:i},a=new Promise((t,s)=>{this.CNt.set(r,{resolve:t,progress:e,reject:s,LNt:!1,maxWorkerNum:n})});return h&&h.a0(()=>this.kNt(r)),this.RNt.postMessage(o,i),this.NNt(),a}wNt(t,s,i,e){if(i=i||[],"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const h=this.ENt++,n={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:h,params:s,transferables:i};this.RNt.postMessage(n,i)}kNt(t){const s=this.CNt.get(t);s&&(s.LNt=!0,s.resolve=null,s.progress=null,s.reject=null,this.RNt.postMessage({type:"_cancel",jobId:t}))}PNt(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.BNt(e,s.result);break;case"progress":this.WNt(e,s.progress);break;case"error":this.jNt(e,s.error);break;case"ready":this.VNt();break;default:throw new Error(`unknown message from worker '${i}'`)}}BNt(t,s){const i=this.CNt.get(t);if(!i)throw new Error("invalid job ID");i.LNt||i.resolve(s),this.CNt.delete(t)}WNt(t,s){const i=this.CNt.get(t);if(!i)throw new Error("invalid job ID");!i.LNt&&i.progress&&i.progress(s)}jNt(t,s){const i=this.CNt.get(t);if(!i)throw new Error("invalid job ID");i.LNt||i.reject(s),this.CNt.delete(t)}VNt(){this.DNt&&(this.DNt=!1,this.FNt++,this.FNt<this.ANt?this.NNt():this.RNt.postMessage({type:"_no_more_workers"}))}HNt(){let t=0,s=[...this.CNt.values()].sort((t,s)=>{const i=t.maxWorkerNum||1/0,e=s.maxWorkerNum||1/0;return i-e});for(const i of s){const e=i.maxWorkerNum||1/0;t<e&&t++}return t}async NNt(){if(!(this.FNt>=this.ANt||this.DNt||this.ONt||this.HNt()<=this.FNt))try{this.DNt=!0;const t=await this.Xc.fO("runtime","create-job-worker");t.outputPort.onmessage=t=>this.PNt(t)}catch(t){this.ONt=!0,this.DNt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.FNt} so far)`,t)}}}}self.C3_Shaders={};{let S=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const h=""+i,n=""+e;return h<n?-1:n<h?1:0}},b=(S,self.Ds),i=null,e="",h="",n=[],r="",o="",a="",v=b.Qh(b.r0t);b.B$.N$=class extends b.uMt{constructor(t){super(t),this.s0t=this.Xc.WF().b8(),this.Wct=this.Xc.WF().QF(),this.UNt=0,this.zNt=0,this.JNt=new Map}tn(){super.tn()}uO(){this.Xc.uO()}YN(t){this.Xc.YN(t,null,null)}qNt(t,s){return i&&t===e&&s===h||(i=new RegExp(t,s),e=t,h=s),i.lastIndex=0,i}$Nt(t,s,i){if(t!==r||s!==o||i!==a){const e=this.qNt(s,i);n=t.match(e),r=t,o=s,a=i}return n}async XNt(t,s){if(s.length){this.UNt+=s.length;const i=[];for(const e of s)i.push(t.a$(e));await b.Zr(i,()=>{this.zNt++}),this.zNt++,this.zNt===this.UNt&&(this.zNt=0,this.UNt=0,this.Xc.YN(b.B$.N$.k$.YNt,null,null))}}ZNt(t,s){for(const i of s)0===i.Sk()&&t.f$(i)}KNt(){return v}QNt(s){const i=this.Xc.WF(),t=i.QF(),e=t.w8(),h=e.JF(),n=h.y8(),r=e.jft(),o=t.S8(h),a=i.b8(),l=a.S8();if(l.h0t(s),r)for(let t=0;t<s&&!l.E8();++t)i.G8(n),l.I8(t),h.T8(e,o),i._8(n);else for(let t=0;t<s&&!l.E8();++t)l.I8(t),h.T8(e,o);return t.P8(),a.P8(),!1}*t4t(s){const i=this.Xc.WF(),t=i.QF(),e=t.w8(),h=e.JF(),n=h.y8(),r=e.jft(),o=t.S8(h),a=i.b8(),l=a.S8();if(l.h0t(s),r)for(let t=0;t<s&&!l.E8();++t)i.G8(n),l.I8(t),yield*h._gt(e,o),i._8(n);else for(let t=0;t<s&&!l.E8();++t)l.I8(t),yield*h._gt(e,o);return t.P8(),a.P8(),!1}s4t(){const s=this.Xc.WF(),t=s.QF(),i=t.w8(),e=i.JF(),h=e.y8(),n=i.jft(),r=t.S8(e),o=s.b8(),a=o.S8();if(n)for(let t=0;!a.E8();++t)s.G8(h),a.I8(t),e.T8(i,r)||a.hW(),s._8(h);else for(let t=0;!a.E8();++t)a.I8(t),e.T8(i,r)||a.hW();return t.P8(),o.P8(),!1}*i4t(){const s=this.Xc.WF(),t=s.QF(),i=t.w8(),e=i.JF(),h=e.y8(),n=i.jft(),r=t.S8(e),o=s.b8(),a=o.S8();if(n)for(let t=0;!a.E8();++t){s.G8(h),a.I8(t);const l=yield*e._gt(i,r);l||a.hW(),s._8(h)}else for(let t=0;!a.E8();++t){a.I8(t);const u=yield*e._gt(i,r);u||a.hW()}return t.P8(),o.P8(),!1}e4t(t,s,i){const e=this.Xc.WF(),h=e.QF(),n=h.w8(),r=n.JF(),o=r.y8(),a=n.jft(),l=h.S8(r),u=e.b8(),c=u.S8();if(c.v8(t),c.h0t(i),i<s)if(a)for(let t=s;t>=i&&!c.E8();--t)e.G8(o),c.I8(t),r.T8(n,l),e._8(o);else for(let t=s;t>=i&&!c.E8();--t)c.I8(t),r.T8(n,l);else if(a)for(let t=s;t<=i&&!c.E8();++t)e.G8(o),c.I8(t),r.T8(n,l),e._8(o);else for(let t=s;t<=i&&!c.E8();++t)c.I8(t),r.T8(n,l);return h.P8(),u.P8(),!1}*h4t(t,s,i){const e=this.Xc.WF(),h=e.QF(),n=h.w8(),r=n.JF(),o=r.y8(),a=n.jft(),l=h.S8(r),u=e.b8(),c=u.S8();if(c.v8(t),c.h0t(i),i<s)if(a)for(let t=s;t>=i&&!c.E8();--t)e.G8(o),c.I8(t),yield*r._gt(n,l),e._8(o);else for(let t=s;t>=i&&!c.E8();--t)c.I8(t),yield*r._gt(n,l);else if(a)for(let t=s;t<=i&&!c.E8();++t)e.G8(o),c.I8(t),yield*r._gt(n,l),e._8(o);else for(let t=s;t<=i&&!c.E8();++t)c.I8(t),yield*r._gt(n,l);return h.P8(),u.P8(),!1}n4t(i){const t=i.yk(),s=t.gk();if(0!==s.length){const e=this.Xc.WF(),h=e.QF(),n=h.w8(),r=n.JF(),o=r.y8(),a=n.jft(),l=h.S8(r),u=e.b8(),c=u.S8(),f=i.xN(),d=v.S8();if(b.Or(d,s),c.h0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.E8();++t){e.G8(o);const p=d[t];i.yk().tft(p),f&&p.Bpt(),c.I8(t),r.T8(n,l),e._8(o)}else{t.Zct(!1);const m=t.Kct();b.Pr(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.E8();++t){const g=d[t];m[0]=g,f&&g.Bpt(),c.I8(t),r.T8(n,l)}}h.P8(),u.P8(),b.Pr(d),v.P8()}return!1}*r4t(i){const t=i.yk(),s=t.gk();if(0!==s.length){const e=this.Xc.WF(),h=e.QF(),n=h.w8(),r=n.JF(),o=r.y8(),a=n.jft(),l=h.S8(r),u=e.b8(),c=u.S8(),f=i.xN(),d=v.S8();if(b.Or(d,s),c.h0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.E8();++t){e.G8(o);const p=d[t];i.yk().tft(p),f&&p.Bpt(),c.I8(t),yield*r._gt(n,l),e._8(o)}else{t.Zct(!1);const m=t.Kct();b.Pr(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.E8();++t){const g=d[t];m[0]=g,f&&g.Bpt(),c.I8(t),yield*r._gt(n,l)}}h.P8(),u.P8(),b.Pr(d),v.P8()}return!1}o4t(i,t){const s=i.yk(),e=s.gk();if(0!==e.length){const h=this.Xc.WF(),n=h.QF(),r=h.Q0t(),o=n.w8(),a=o.JF(),l=a.y8(),u=o.jft(),c=n.S8(a),f=h.b8(),d=f.S8(),p=i.xN(),m=v.S8();b.Pr(m),d.h0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],r.jSt(1,t)]);if(m.sort(S),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.E8();++t){h.G8(l);const g=m[t][0];i.yk().tft(g),p&&g.Bpt(),d.I8(t),a.T8(o,c),h._8(l)}else{s.Zct(!1);const y=s.Kct();b.Pr(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.E8();++t){const w=m[t][0];y[0]=w,p&&w.Bpt(),d.I8(t),a.T8(o,c)}}n.P8(),f.P8(),b.Pr(m),v.P8()}return!1}*a4t(i,t){const s=i.yk(),e=s.gk();if(0!==e.length){const h=this.Xc.WF(),n=h.QF(),r=h.Q0t(),o=n.w8(),a=o.JF(),l=a.y8(),u=o.jft(),c=n.S8(a),f=h.b8(),d=f.S8(),p=i.xN(),m=v.S8();b.Pr(m),d.h0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],r.jSt(1,t)]);if(m.sort(S),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.E8();++t){h.G8(l);const g=m[t][0];i.yk().tft(g),p&&g.Bpt(),d.I8(t),yield*a._gt(o,c),h._8(l)}else{s.Zct(!1);const y=s.Kct();b.Pr(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.E8();++t){const w=m[t][0];y[0]=w,p&&w.Bpt(),d.I8(t),yield*a._gt(o,c)}}n.P8(),f.P8(),b.Pr(m),v.P8()}return!1}l4t(t,s){let i=this.JNt.get(t);if(!i){if(!s)return null;i={u4t:null,c4t:new Map},this.JNt.set(t,i)}return i}f4t(t,s,i,e,h){s.UF().Vgt(i,s.XF()),e&&t._8(h)}*d4t(t,s,i,e,h){yield*s.UF().Hgt(i,s.XF()),e&&t._8(h)}}}{const Oa=self.Ds;Oa.B$.N$.__t=class extends Oa.Zh{constructor(t){super(),this.Act=t,this.Xc=t.GO(),this.XMt=t.hk()}FMt(){}tn(){this.Act=null,this.Xc=null,this.XMt=null}}}{const La=self.Ds;La.B$.N$.Instance=class extends La.Zh{constructor(t,s){super(),this.bi=t,this.Act=this.bi.cN(),this.sxt=this.Act.wbt(),this.Xc=this.bi.GO()}tn(){this.bi=null,this.Act=null,this.sxt=null,this.Xc=null}}}{const C=self.Ds,ka=[];C.B$.N$.k$={p4t(){return!0},L$(){return!0},X$(){return!0},w5t(){return!0},S5t(){return!0},rD(){return this.Xc.rD()},xmt(){const t=this.Xc.K0t();return!t.Lft()&&!t.Dft()},m4t(){let t=this.Xc.Q0t(),s=t.CSt(),i=s.get("TriggerOnce_lastTick");void 0===i&&(i=-1,s.set("TriggerOnce_lastTick",-1));const e=this.Xc.ntt();return s.set("TriggerOnce_lastTick",e),this.Xc.$5t()||i!==e-1},g4t(t){const s=this.Xc.Q0t(),i=s.CSt(),e=i.get("Every_lastTime")||0,h=this.Xc.fD(),n=(i.has("Every_seconds")||i.set("Every_seconds",t),i.get("Every_seconds"));return e+n<=h?(i.set("Every_lastTime",e+n),h>=i.get("Every_lastTime")+.04&&i.set("Every_lastTime",h),i.set("Every_seconds",t),!0):(h<e-.1&&i.set("Every_lastTime",h),!1)},Bdt(t){const s=this.Xc.WF().b1t(t);return s&&s.Bdt()},YDt(){return this.Xc.YDt()},mi(){return C.hi.mi},t5t(){return!0},y4t(){return!0},w4t(){return!0},rNt(){return!0},cNt(){return!0},aNt(){return!0},lNt(){return!0},S4t(t){return!!this.Xc.KD(t)},b4t(t){switch(t){case 0:return"browser"===C.hi.fi;case 1:return"iOS"===C.hi.ni;case 2:return"Android"===C.hi.ni;case 8:return"cordova"===C.hi.fi;case 9:return"scirra-arcade"===this.Xc.lL();case 10:return"nwjs"===C.hi.fi;case 13:return"windows-uwp"===this.Xc.lL();default:return!1}},v4t(t,s,i){const e=this.qNt(s,i);return e.test(t)},M4t(t,s,i){return C.compare(t,s,i)},x4t(t,s,i){return s<=t&&t<=i},G4t(t,s,i){return C.compare(t.Zit(),s,i)},T4t(t){return!!t.Zit()},_4t(t,s){const i=this.Xc.fD();if(0!==t)return C.compare(i,t,s);{const e=this.Xc.Q0t(),h=e.CSt();return!h.get("CompareTime_executed")&&s<=i&&(h.set("CompareTime_executed",!0),!0)}},I4t(t){return isNaN(t)},F2t(t,s,i){return C.gn(C.un(t),C.un(i))<=C.un(s)},D2t(t,s){return C.wn(C.un(t),C.un(s))},$bt(t,s,i){let e=C.un(t),h=C.un(s),n=C.un(i),r=!C.wn(n,h);return r?!(!C.wn(e,h)&&C.wn(e,n)):C.wn(e,h)&&!C.wn(e,n)},C4t(t,s){return"number"==typeof t?0===s:1===s},E4t(t){return!!t},ydt(t){return t.toLowerCase()===this.Xc.WF().vdt()},R4t(t,i,e,h){if(!t)return!1;let s=this.KNt(),n=s.S8(),r=t.yk(),o=(C.Or(n,r.gk()),r.Uct()&&C.Pr(r.Qct()),this.Xc.Q0t()),a=0;for(let t=0,s=n.length;t<s;++t){const u=n[t];n[a]=u,i=o.jSt(1,t),h=o.jSt(3,t),C.compare(i,e,h)?++a:r.Yct(u)}C.Rr(n,a),r.ift(n);const l=!!n.length;return C.Pr(n),s.P8(),t.Ogt(),l},P4t(t,s){if(!t)return!1;let i=this.KNt(),e=i.S8(),h=t.yk(),n=(C.Or(e,h.gk()),h.Uct()&&C.Pr(h.Qct()),this.Xc.Q0t()),r=0;for(let t=0,s=e.length;t<s;++t){const a=e[t];e[r]=a,n.jSt(1,t)?++r:h.Yct(a)}C.Rr(e,r),h.ift(e);const o=!!e.length;return C.Pr(e),i.P8(),t.Ogt(),o},A4t(t,i,e){if(!t)return!1;const s=t.yk(),h=s.gk();if(0===h.length)return!1;let n=this.Xc.Q0t(),r=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t];e=n.jSt(2,t),(null===r||0===i&&e<o||1===i&&e>o)&&(o=e,r=a)}return s.oft(r),t.Ogt(),!0},F4t(t,s){if(!t)return!1;const i=t.yk(),e=i.gk();if((s=Math.floor(s))>=e.length)return!1;const h=e[s];return i.oft(h),t.Ogt(),!0},D4t(t){if(!t)return!1;const s=t.yk(),i=s.gk(),e=Math.floor(this.Xc.DD()*i.length);if(e>=i.length)return!1;const h=i[e];return s.oft(h),t.Ogt(),!0},O4t(t){if(!t)return!1;if(!t.Sk())return!1;const s=t.yk();return s.Zct(!0),t.Ogt(),!0},L4t(t,i,e){if(!t)return!1;const h=t.yk(),s=h.gk(),n=this.Xc.JF(),r=n.aft(),o=this.Xc.Q0t().xSt();h.Uct()?(C.Or(ka,s),h.Hct(),h.Zct(!1)):r?(C.Or(ka,h.Qct()),C.Pr(h.Qct())):(C.Or(ka,h.Kct()),C.Pr(h.Kct()));for(let t=0,s=ka.length;t<s;++t){const a=ka[t];C.xor(a.eO().sB(i,e),o)?h.Xct(a):h.Yct(a)}return t.Ogt(),C.xor(!!h.Kct().length,o)},k4t(s){if(!s)return!1;let i=s.xz(),e=null,h=this.Xc.gIt();for(let t=h.length-1;0<=t;--t){const n=h[t];if(i){if(n.cN().xbt(s)){e=n;break}}else if(n.cN()===s){e=n;break}}if(!e){const r=s.gk();r.length&&(e=r.at(-1))}if(!e)return!1;const t=s.yk();return t.oft(e),s.Ogt(),!0},N4t(t){return this.Xc.bvt()?this.t4t(t):this.QNt(t)},B4t(){return this.Xc.bvt()?this.i4t():this.s4t()},W4t(t,s,i){return this.Xc.bvt()?this.h4t(t,s,i):this.e4t(t,s,i)},t1(t){return this.Xc.bvt()?this.r4t(t):this.n4t(t)},j4t(t,s,i){return this.Xc.bvt()?this.a4t(t,i):this.o4t(t,i)},V4t(t){return!!t&&t.v5()},H4t(t){return!!t&&t.C5()},U4t(t){return!!t&&t.T5()},z4t(t){return!!t&&!t.Sk()},J4t(t,s,i){return!!t&&C.compare(100*t.fR(),s,i)},q4t(t){const s=this.Xc.OD();return!!s&&s.qq(t)},YNt(){return!0},$4t(){return 0<this.UNt},X4t(t,s){const i=this.Xc.xCt();return!!i&&!!s&&!!i.elt(t,s)}}}{let m=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const n=t[1],r=s[1];return n-r},g=function(t,s){return t[1]-s[1]};m,g;const Na=self.Ds,Ba=[],Wa=[],ja=Na.Qh(Na.Rect),Va=Na.Qh(Na.Oo),Ha=[];Na.B$.N$.Cht={Y4t(t,s){t.Let(s)},Z4t(t,s){t.ae()&&"number"!=typeof s&&(s=parseFloat(s)),t.Let(t.Zit()+s)},K4t(t,s){t.ae()&&t.Let(t.Zit()-s)},Q4t(t,s){t.Let(!!s)},tBt(t){t.Let(!t.Zit())},sBt(t){t.Let(t.Z0t())},iBt(t){this.Xc.WF().w1t(t)},eBt(t,s,i,e,h,n){if(t&&s){const r=this.Xc.vk(t,s,i,e,h,n);if(r){h&&s.Mk(r);const o=this.Xc.WF(),a=(o.xk(!0),r.Gk(),o.xk(!1),new Map);r.pCt(a,t,h);for(const[l,u]of a)l.yk().eft(u)}}},hBt(t,s,i,e,h,n){if(t&&s){const r=this.Xc.n5t(t);r&&Na.B$.N$.Cht.eBt.call(this,r,s,i,e,h,n)}},vz(h,n,r,o,a,t,l,u,c,f,d){if(h){let s=this.Xc.sO(),i=s;if(t){const p=this.Xc.ND().PX(t);if(!p)return;i=p}let e=null;if(!("number"!=typeof l||0<=l)||(e=i.hO(l))){let t=null;if(!("number"!=typeof u||0<=u)||(t=s.hO(u))){ja.set(n,r,o,a);const m=i.vz(h,ja,e,t,c,f,d);h.yk().ift(m),h.Ogt()}}}},nBt(){const t=this.s0t;t.Zft()&&t.Xft().hW()},Wdt(t,s){const i=this.Xc.WF().b1t(t);i&&(0===s?i.Wdt(!1):1===s?i.Wdt(!0):i.Wdt(!i.Bdt()))},rBt(t){this.Xc.yD(t)},oBt(t,s){if(s<0&&(s=0),t){const i=t.yk(),e=i.gk();for(const h of e)h.yD(s)}},aBt(t){if(t){const s=t.yk(),i=s.gk();for(const e of i)e.RN()}},Tr(t){if(!(t<0))return this.Xc.WF().tdt().eMt(t),!0},hD(t){return this.Xc.WF().tdt().hMt(t),!0},lBt(){const t=this.Xc.WF();return t.tdt().nMt(t.gdt()),!0},iD(t){this.Xc.WF().iD(t)},async EDt(t,s,i,e,h,n){const r=this.Xc.dL();r&&(this.uO(),await r.EDt(0===t?"image/png":"image/jpeg",s/100,i,e,h,n),await this.Xc.KN(Na.B$.N$.k$.y4t,null))},uBt(t,s){if(!(t<=0||s<=0)){this.Xc.tDt(t,s),this.Xc.sO().W9();const i=this.Xc.dL();i&&("off"!==i.qFt()&&this.Xc.o5t(t,s),i.kI(i.gj(),i.yj(),!0),this.Xc.uO())}},cBt(t){const s=this.Xc.dL();s&&"off"!==s.qFt()&&(s.oDt(0!==t?"high":"low"),s.kI(s.gj(),s.yj(),!0))},mit(t){this.Xc.K5t(t)},fBt(){this.Xc.Q5t()},dBt(t){this.Xc.tNt(t)},pBt(t){this.Xc.c2t(t)},mBt(t){},gBt(){for(const t of this.Xc.ND().jD())t.hX()},yBt(t){this.Xc.X5t(0!==t)},wBt(t,s){this.Xc.FD(1/t),this.Xc.RD(1/s)},SBt(t,s){this.Xc.RD(t),this.Xc.FD(s)},bBt(t){this.Xc.ID(["vsync","unlimited-tick","unlimited-frame"][t])},vBt(t,i){if(t){const s=t.yk(),e=s.gk(),h=Ba,n=Wa,r=this.Xc.sO(),o=t.xz(),a=t.hwt();for(let t=0,s=e.length;t<s;++t){const l=e[t],u=l.eO();if(u){let t;t=o?l.gnt(i+l.cN().ewt(a)):l.gnt(i),h.push([u.hO().lF(),u.nO()]),n.push([l,t])}}if(h.length){h.sort(m),n.sort(g);let i=!1;for(let t=0,s=h.length;t<s;++t){const c=n[t][0],f=r.rO(h[t][0]),d=h[t][1],p=f.oO();p[d]!==c&&((p[d]=c).eO().aO(f,!0),f.lO(c),i=!0)}i&&this.Xc.uO(),Na.Pr(Ba),Na.Pr(Wa)}}},ZO(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.Xc.gF().ZO(t,s)},MBt(t){if(!this.Xc.Rg()){const s=this.Xc.ND();s.HD()||s.UD(t)}},xBt(t){if(!this.Xc.Rg()){const s=this.Xc.ND();if(!s.HD()){const i=s.PX(t);i&&s.UD(i)}}},GBt(t){if(!this.Xc.Rg()){const s=this.Xc.ND();if(!s.HD()){const i=s.jD(),e=i.indexOf(s.OD());if((!t||0!==e)&&(t||e!==i.length-1)){const h=i[e+(t?-1:1)];s.UD(h)}}}},TBt(){if(!this.Xc.Rg()){const t=this.Xc.ND();t.HD()||(t.UD(t.OD()),this.Xc.WF().G1t())}},_Bt(t,s){t&&t.S5(s)},IBt(t,s){t&&t.x5(s)},CBt(t,s){t&&t._5(s)},EBt(t,s){t&&t.pR(s/100)},RBt(t,s){t&&t.E5(s)},PBt(t,s){t&&t.P5(s)},ABt(t,s){t&&t.Lk(Na.un(+s))},FBt(t,s,i){t&&(t.q5(!0),t.Nk(s),t.Wk(i))},DBt(t){t&&t.q5(!1)},OBt(t,s,i){t&&t.eJ(s/100,i/100)},LBt(t,s){t&&t.rv(+s)},kBt(t,s){if(t){Va.fa(s),Va.an();const i=t.J5();i.ea(Va)||(i.$o(Va),this.uO())}},NBt(t,s){t&&t.W5(s)},BBt(t,s){t&&t.jb(s)},WBt(t,s,i){if(t){const e=t.Ek(),h=e.aht(i);if(h){const n=1===s;h.Rpt()!==n&&(h.WPt(n),t.m6(),this.Xc.uO())}}},jBt(t,s,i,e){if(t){const h=t.Ek(),n=h.aht(s);if(n){i=Math.floor(i);const r=n.Jx().$x(i);if(r){"color"===r?(Va.fa(e),e=Va):"percent"===r&&(e/=100);const o=h.y6(n.lF(),i,e);o&&n.Rpt()&&this.Xc.uO()}}}},VBt(t,s){t&&t.H5(s)},HBt(t){this.Xc.sO().Dk(+t)},UBt(t){this.Xc.sO().Lk(Na.un(+t))},zBt(t,s){const i=this.Xc.sO(),e=i.Ek(),h=e.aht(s);if(h){const n=1===t;h.Rpt()!==n&&(h.WPt(n),i.m6(),this.Xc.uO())}},JBt(t,s,i){const e=this.Xc.sO(),h=e.Ek(),n=h.aht(t);if(n){s=Math.floor(s);const r=n.Jx().$x(s);if(r){"color"===r?(Va.fa(i),i=Va):"percent"===r&&(i/=100);const o=h.y6(n.lF(),s,i);o&&n.Rpt()&&this.Xc.uO()}}},qBt(t,s){const i=this.Xc.sO();i.n5(t/100,s/100)},$Bt(t){const s=this.Xc.sO();0===t?s.a5():s.l5()},XBt(t){const s=this.Xc.sO();s.Nk(t)},YBt(t){const s=this.Xc.sO();s.Wk(t)},ZBt(t,s){const i=this.Xc.sO();i.Nk(t),i.Wk(s)},KBt(t){if(t){const s=t.uvt();if(s){const i=s.eO();if(i){const e=this.Xc.sO();e.Nk(i.Kb()),e.Wk(i.sv())}}}},Zk(t,s,i){const e=this.Xc.sO();try{e.Zk(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},Qk(t,s,i){if(t){const e=this.Xc.sO();try{e.Qk(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},s5(t){if(t){const s=this.Xc.sO();s.s5(t)}},e5(){this.Xc.sO().e5()},async QBt(t){const s=this.Xc.OD();if(s&&t&&!this.Xc.Rg()){const i=t.xz()?t.Imt():[t];await this.XNt(s,i)}},async t6t(t){await Na.B$.N$.Cht.QBt.call(this,this.Xc.n5t(t))},s6t(t){const s=this.Xc.OD();if(s&&t){const i=t.xz()?t.Imt():[t];this.ZNt(s,i)}},i6t(t){Na.B$.N$.Cht.s6t.call(this,this.Xc.n5t(t))},e6t(){const t=this.Xc.OD();if(t){const s=t.n$();this.ZNt(t,s)}},async h6t(t){const s=this.Xc.OD();t&&s&&!this.Xc.Rg()&&await this.XNt(s,t.i$())},async n6t(t){const s=this.Xc.OD(),i=this.Xc.ND().PX(t);i&&s&&!this.Xc.Rg()&&await this.XNt(s,i.i$())},sD(t){const s=this.Wct.KF();if(s)switch(s.tD()){case 1:"number"==typeof t&&s.sD(t);break;case 2:"string"==typeof t&&s.sD(t);break;case 3:s.sD(t)}},r6t(t,s,i){const e=this.l4t(t.toLowerCase(),!0),h=e.c4t,n=s.toLowerCase(),r=(h.has(n)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`),Na.first(h.values())||e.u4t);if(r){const o=0!==r.YF(),a=0!==i.YF();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`)}h.set(n,i)},o6t(t,s){const i=this.l4t(t.toLowerCase(),!0),e=(i.u4t&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),Na.first(i.c4t.values())||i.u4t);if(e){const h=0!==e.YF(),n=0!==s.YF();if(h!=n)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}i.u4t=s},a6t(t,s,i){const e=this.Xc,h=e.bvt()?Ha:null,n=(i=Math.floor(i),this.l4t(t.toLowerCase(),!1));if(!n)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),h;let r=n.c4t.get(s.toLowerCase());if(!r){if(!n.u4t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),h;r=n.u4t,i=0}if(!r.ju())return h;if(0!==r.YF())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),h;const o=e.WF(),a=o.JF(),l=a.zF(),u=0<l.length,c=(u&&(r.XF()?o.G8(l):o.K1t(l)),[]),f=o.Jdt(a);if(f){const p=f.$dt();for(let t=i,s=p.length;t<s;++t)c.push(p[t].Zit())}const d=r.$dt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].Z0t());return e.bvt()?this.d4t(o,r,c,u,l):this.f4t(o,r,c,u,l)}}}{const E=self.Ds;E.B$.N$.Eht={l6t:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},D(t){return t.toString()},Ht(t){return"string"==typeof t?t.length:0},random(t,s){return void 0===s?this.Xc.DD()*t:this.Xc.DD()*(s-t)+t},Vyt(...t){const s=Math.floor(this.Xc.DD()*t.length);return t[s]},u6t(t,...s){return"number"!=typeof t&&(t=0),s[t=E.an(Math.floor(t),0,s.length-1)]},pi(){return Math.PI},c6t(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},f6t(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(E.un(t))},cos(t){return Math.cos(E.un(t))},tan(t){return Math.tan(E.un(t))},asin(t){return E.cn(Math.asin(t))},acos(t){return E.cn(Math.acos(t))},atan(t){return E.cn(Math.atan(t))},exp(t){return Math.exp(t)},Xt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e<t&&(e=t)}return e},min(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e>t&&(e=t)}return e},an(t,s,i){return E.an(t,s,i)},It(t,s,i,e){return E.dn(t,s,i,e)},angle(t,s,i,e){return E.cn(E.mn(t,s,i,e))},Ft(t,s,i){return E.Ft(t,s,i)},xn(t,s,i){return E.xn(t,s,i)},Tn(t,s,i,e){return E.Tn(t,s,i,e)},_n(t,s,i,e,h){return E._n(t,s,i,e,h)},In(t,s,i){return E.In(t,s,i)},d6t(t,s){return E.cn(E.gn(E.un(t),E.un(s)))},p6t(t,s,i){return E.cn(E.Sn(E.un(t),E.un(s),i))},m6t(t,s,i){return E.cn(E.yn(E.un(t),E.un(s),E.un(i)))},g6t(t,s,i){return(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s},y6t(t,s){return(t|=0)^1<<(0|s)},w6t(t,s){return(t|=0)&1<<(0|s)?1:0},S6t(){return"\n"},b6t(t){return"string"==typeof t?t.toUpperCase():""},v6t(t){return"string"==typeof t?t.toLowerCase():""},left(t,s){return"string"==typeof t?t.substr(0,s):""},mid(t,s,i){return"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i)},right(t,s){return"string"==typeof t?t.substr(Math.max(t.length-s,0)):""},trim(t){return"string"==typeof t?t.trim():""},M6t(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},x6t(t,s){return"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0},find(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(E.ne(s),"i")):-1},G6t(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(E.ne(s),"")):-1},replace(t,s,i){return"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(E.ne(s),"gi"),i):"string"==typeof t?t:""},T6t(t,...i){let e=t;for(let t=0,s=i.length;t<s;++t)e=e.replaceAll(`{${t}}`,i[t].toString());return e},_6t(t,s,i){const e=this.qNt(s,i);return t?t.search(e):-1},I6t(t,s,i,e){const h=this.qNt(s,i);return t?t.replace(h,e):""},C6t(t,s,i){const e=this.$Nt(t.toString(),s,i);return e?e.length:0},E6t(t,s,i,e){e=Math.floor(e);const h=this.$Nt(t.toString(),s,i);return!h||e<0||e>=h.length?"":h[e]},R6t(t,s){let i=t<0?"-":"",e=s-(t=t<0?-t:t).toString().length;return(i+="0".repeat(Math.max(e,0)))+t.toString()},P6t(t){return encodeURIComponent(t)},A6t(t){return decodeURIComponent(t)},oD(){return this.Xc.lZ()},timescale(){return this.Xc.gD()},F6t(){return(Date.now()-this.Xc.N5t())/1e3},D6t(){return Date.now()},time(){return this.Xc.fD()},tickcount(){return this.Xc.ntt()},O6t(){return this.Xc.j5t()},fps(){return this.Xc.wD()},L6t(){return this.Xc.MD()},k6t(){return this.Xc.GD()},N6t(){return this.Xc.dL().vL()},B6t(){return this.Xc.dL().xL()},W6t(){return this.Xc._F()},j6t(){return this.Xc.CF()},V6t(){return this.Xc._F()},H6t(){return this.Xc.CF()},U6t(){return this.Xc.sO().Bk()},z6t(){return this.Xc.sO().jk()},J6t(){return this.Xc.sO().jc()},q6t(){return this.Xc.sO().Ok()},$6t(){return E.cn(this.Xc.sO().kk())},X6t(){return this.Xc.sO().Xp()},Y6t(){return this.Xc.sO().om()},Z6t(){return 100*this.Xc.sO().Yz()},K6t(){return 100*this.Xc.sO().Zz()},Q6t(t){const s=this.Xc.sO().hO(t);return s?s.Xz().dl():0},tWt(t){const s=this.Xc.sO().hO(t);return s?s.Xz().pl():0},sWt(t){const s=this.Xc.sO().hO(t);return s?s.Xz().ml():0},iWt(t){const s=this.Xc.sO().hO(t);return s?s.Xz().gl():0},eWt(t){const s=this.Xc.sO().hO(t);return s?s.Xz().width():0},hWt(t){const s=this.Xc.sO().hO(t);return s?s.Xz().height():0},nWt(t){const s=this.Xc.sO().hO(t);if(s){const i=s.Xz();return(i.dl()+i.ml())/2}return 0},rWt(t){const s=this.Xc.sO().hO(t);if(s){const i=s.Xz();return(i.pl()+i.gl())/2}return 0},oWt(t,s,i){const e=this.Xc.sO().hO(t);return e?e.K5(s,i)[0]:0},aWt(t,s,i){const e=this.Xc.sO().hO(t);return e?e.K5(s,i)[1]:0},lWt(t,s,i){const e=this.Xc.sO().hO(t);return e?e.iN(s,i)[0]:0},uWt(t,s,i){const e=this.Xc.sO().hO(t);return e?e.iN(s,i)[1]:0},cWt(t,s,i,e){const h=this.Xc.sO(),n=h.hO(t),r=h.hO(s);if(!n||!r||n===r)return i;const[o,a]=n.iN(i,e);return r.K5(o,a)[0]},fWt(t,s,i,e){const h=this.Xc.sO(),n=h.hO(t),r=h.hO(s);if(!n||!r||n===r)return e;const[o,a]=n.iN(i,e);return r.K5(o,a)[1]},dWt(t){const s=this.Xc.sO().hO(t);return s?s.R5():0},pWt(t){const s=this.Xc.sO().hO(t);return s?E.cn(s.F5()):0},mWt(t){const s=this.Xc.sO().hO(t);return s?100*s.fR():0},gWt(t){const s=this.Xc.sO().hO(t);return s?s.A5():0},yWt(t){const s=this.Xc.sO().hO(t);return s?s.Bk():0},wWt(t){const s=this.Xc.sO().hO(t);return s?s.jk():0},SWt(t){const s=this.Xc.sO().hO(t);return s?100*s.O5():0},bWt(t){const s=this.Xc.sO().hO(t);return s?100*s.k5():0},vWt(t){const s=this.Xc.sO().hO(t);return s?s.nv():0},MWt(t){const s=this.Xc.sO().hO(t);return s?s.lF():-1},xWt(){const t=this.Xc.dL();return t?t.PDt():""},GWt(t){const s=this.s0t;if(!s.Zft())return 0;if(t){const i=s.Qft(t);return i?i.lF():0}return s.Xft().lF()},TWt(){return this.Xc.sNt()},_Wt(t,s,...i){const e=this.l4t(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let h=e.c4t.get(s.toLowerCase());if(!h){if(!e.u4t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;h=e.u4t}const n=h.YF(),r=h.VF();if(0===n)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!h.ju())return r;const o=this.Xc,a=o.WF(),l=a.JF(),u=l.zF(),c=0<u.length,f=(c&&(h.XF()?a.G8(u):a.K1t(u)),h.$dt());for(let t=i.length,s=f.length;t<s;++t)i.push(f[t].Z0t());const d=h.UF(),p=d.$F(d.zF(),h.XF(),n,r,...i);return c&&a._8(u),p},IWt(){return this.Xc.dF().NH()},CWt(){return 0===this.UNt?1:this.zNt/this.UNt},renderer(){return this.Xc.pDt()?"webgpu":"webgl"},EWt(){return this.Xc.pDt()?this.Xc.pDt().GetAdapterInfoString():this.Xc.dDt().MP()},RWt(){let t=this.Xc.vb().eb();return Math.round(100*t/1048576)/100},PWt(t,s,i){return E.Dn(t,s,i)},AWt(t,s,i){return E.Ln(t/100,s/100,i/100)},FWt(t,s,i,e){return E.On(t/100,s/100,i/100,e/100)},DWt(t,s,i){return E.Ln(t/255,s/255,i/255)},OWt(t,s,i,e){return E.On(t/255,s/255,i/255,e/255)},LWt(){return this.Xc.bF()},kWt(){return this.Xc.MF()},NWt(){return this.Xc.JF().zq().jc()},BWt(){return this.Xc.JF().zmt()}}}{const Ua=self.Ds;Ua.B$.cht=class extends Ua.uMt{constructor(t){super(t)}tn(){super.tn()}}}{const za=self.Ds,Ja=self.Us,qa=[],$a=(za.B$.cht.__t=class extends za.$Mt{constructor(t){super(t),this.S_t=t.hIt()}tn(){za.Pr(this.S_t),super.tn()}FMt(){for(const t of this.S_t)t.bTt(this.Xc)}o$(s){const i={t2:this.Xc.EF()};return Promise.all(this.S_t.map(t=>t.vTt(s,i)))}d$(){for(const t of this.S_t)t.MTt()}u$(){this.WWt()}WWt(){for(const t of this.Act.mk())t.ZB().jWt()}DSt(t){za.B$.cht.U2t(this,t)}Sbt(t){qa.push({KMt:null,VWt:!1,instances:[]})}HWt(t,s,i){const e=qa.at(-1);e.KMt=t,e.VWt=i,e.instances.push(s)}bbt(t){const s=qa.pop(),i=s.KMt,e=s.VWt;if(i){const h=new Map;for(const n of s.instances)n.pCt(h,i,e);for(const[r,o]of h)r.yk().eft(o)}}UWt(t){const s=this.cN().lIt(t),i=this.GO(),e=s.xTt(0);return e.O6().uV(i.vb(),{t2:i.EF()}).then(()=>this.WWt()),s}zWt(t){for(const s of this.Act.mk())s.ZB().JWt(t);this.cN().uIt(t)}qWt(t,s){const i=this.Act.oIt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.ITt(s);e<0&&(e+=i.I6()+1);const h=za.yTt.STt(this.GO()),n=(i.GTt(h,e),this.GO());h.O6().uV(n.vb(),{t2:n.EF()}).then(()=>this.WWt());for(const r of this.Act.mk())r.ZB().$Wt();return h}XWt(t,s){const i=this.Act.oIt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.I6())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.ITt(s);e<0&&(e+=i.I6()),i.TTt(e);for(const h of this.Act.mk())h.ZB().$Wt()}DMt(){return self.YWt}},new WeakMap);self.YWt=class extends self.ik{constructor(t){super(t),$a.set(this,t.wbt())}ZWt(t){Ja.ve(t);const s=$a.get(this).cN().oIt(t);return s?s.CTt():null}KWt(){return $a.get(this).cN().rIt().map(t=>t.CTt())}QWt(t){return Ja.ve(t),$a.get(this).UWt(t).CTt()}tjt(t){Ja.ve(t),$a.get(this).zWt(t)}sjt(t,s){if(Ja.ve(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return $a.get(this).qWt(t,s).R6()}ijt(t,s){if(Ja.ve(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");$a.get(this).XWt(t,s)}}}{const R=self.Ds,Xa=self.Us,Ya=R.Qh(R.Rect),Za=R.Qh(R.Hl),Ka=R.Qh(R.Ha),P=(R.B$.cht.Instance=class extends R.Cxt{constructor(t,s){super(t);let i=!0,e="",h=0,n=!0;s&&(i=!!s[0],e=s[1],h=s[2],n=s[3]),this.ejt=this.Act.oIt(e)||this.Act.hIt()[0],this.hjt=R.an(h,0,this.ejt.I6()-1),this.njt=this.ejt.xTt(this.hjt);const r=this.njt.O6(),o=(this.rjt=r.SM(),this.ojt=r.pC(),this.ajt=r.Wxt(),this.Axt(),t.fCt(2,!0),t.fCt(1,0<=this.ejt.S6()),this.ljt=Math.abs(this.ejt.S6()),this.ujt=this.ejt.G6(),this.cjt=R.Qh(R.f0),this.fjt=0,this.djt=0,this.pjt="",this.mjt=-1,this.gjt="",this.yjt=0,this.eO());this.wjt=o.L4(),o.S5(i),o.tB(n),o.Wnt(this.njt.N6()),o.Vnt(this.njt.W6()),o.hPt(this.njt.Z6()),o._4(),1===this.Act.nIt()&&1===this.Act.hIt()[0].I6()||0===this.ljt||this.Sxt()}tn(){this.ejt=null,this.njt=null,this.rjt=null,this.cjt=null,super.tn()}Lxt(){return this.njt.O6()}Xst(){return!0}c7(){this.rjt=null}Oxt(){this.jWt()}Hv(t){const s=this.rjt;if(null!==s){t.yR(s);const i=this.eO();i.HB()?this.Sjt(i,t):this.bjt(i,t)}}bjt(t,s){let i=this.wjt;this.Xc.PF()&&(i=t.ZRt(i)),s.IR(i,this.ajt)}Sjt(s,t){const i=s.mPt();if(s.yPt()){s.$Rt(Ya,Za,!1);let t=Za;this.Xc.PF()&&(t=s.ZRt(t)),i.Vv(s.UB(),t,this.ajt),s.gPt(!1)}i.Hv(t)}vjt(){return this.cjt.Ks()}Mjt(){return this.bi.dCt(2)}xjt(t){this.bi.fCt(2,t)}Gjt(){return this.bi.dCt(1)}Tjt(t){this.bi.fCt(1,t)}_jt(){return this.bi.dCt(4)}Ijt(t){this.bi.fCt(4,t)}cZ(){this.gjt&&this.Cjt(),0<=this.mjt&&this.Ejt();const t=this.ljt;if(this.Mjt()&&0!==t){const s=this.Xc.aD(this.bi),i=(this.cjt.tc(s),this.vjt()),e=this.njt,h=e.L6()/t;if(!(i<this.fjt+h)){const n=this.ejt,r=this.ujt,o=n.I6(),a=n.M6(),l=n.v6(),u=n._6(),c=(this.Gjt()?this.hjt++:this.hjt--,this.fjt+=h,this.hjt>=o&&(u?(this.Tjt(!1),this.hjt=o-2):!l&&(this.djt++,this.djt>=a)?this.Rjt(!1):this.hjt=r),this.hjt<0&&(u?(this.hjt=1,this.Tjt(!0),l||(this.djt++,this.djt>=a&&this.Rjt(!0))):!l&&(this.djt++,this.djt>=a)?this.Rjt(!0):this.hjt=r),this.hjt=R.an(this.hjt,0,o-1),n.xTt(this.hjt));i>this.fjt+c.L6()/t&&(this.fjt=i),this.Pjt(e,c)}}else this.ixt()}Rjt(t){this.hjt=t?0:this.ejt.I6()-1,this.xjt(!1),this.pjt=this.ejt.jc(),this.Ijt(!0),this.ZMt("animationend",!1,{animationName:this.pjt}),this.YN(R.B$.cht.k$.Ajt),this.YN(R.B$.cht.k$.Fjt),this.Ijt(!1),this.djt=0}Pjt(i,e,t){if(i!==e){const s=this.eO(),h=i.O6(),n=e.O6(),r=h.Xp(),o=h.om(),a=n.Xp(),l=n.om(),u=(t&&t.onFrameChange?t.onFrameChange(s,r,o,a,l):(r!==a&&s.hm(s.Xp()*(a/r)),o!==l&&s.Yp(s.om()*(l/o))),s.Wnt(e.N6()),s.Vnt(e.W6()),s.hPt(e.Z6()),s._4(),this.njt=e,this.rjt=n.SM(),this.ojt=n.pC(),this.ajt=n.Wxt(),this.TW().nht());for(let t=0,s=u.length;t<s;++t)u[t]._Gt(i,e);this.ZMt("framechange",!1,{animationName:this.ejt.jc(),Djt:this.hjt}),this.YN(R.B$.cht.k$.Ojt),this.Xc.uO()}}Ljt(t){this.xjt(!0),this.fjt=this.vjt(),1===t&&0!==this.hjt&&(this.mjt=0,this._jt()||this.Ejt()),this.Sxt()}kjt(t,s,i){this.gjt=t,this.yjt=s,this.Sxt(),!i&&this._jt()||this.Cjt()}Njt(){return this.ejt}Bjt(){return this.gjt||this.ejt.jc()}JWt(t){R.fh(t,this.Bjt())&&this.kjt(this.Act.cIt().jc(),1,!0)}Wjt(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.Act.oIt(this.Bjt());if(!s)return;if(-1===(t=s._Tt(t)))return}isFinite(t)&&(this.mjt=t,this._jt()||this.Ejt())}$Wt(){if(!this.gjt&&-1===this.mjt){const t=this.njt,s=this.ejt.xTt(R.an(this.hjt,0,this.ejt.I6()-1));t!==s&&this.Pjt(t,s),1<this.ejt.I6()&&0<this.ljt&&this.Sxt()}}jjt(){return this.hjt}Vjt(){return this.njt.sW()}Hjt(t){this.ljt=Math.abs(t),this.Tjt(0<=t),0<this.ljt&&this.Sxt()}Ujt(){return this.Gjt()?this.ljt:-this.ljt}zjt(t){"string"==typeof t&&-1===(t=this.ejt._Tt(t))||(t=R.an(Math.floor(t),0,this.ejt.I6()-1),this.ujt=t)}Jjt(){return this.ujt}Cjt(t){const s=this.njt,i=this.Act.oIt(this.gjt);if(this.gjt="",i&&(i!==this.ejt||!this.Mjt())){this.ejt=i,this.Tjt(0<=i.S6()),this.ljt=Math.abs(i.S6()),this.ujt=i.G6(),this.hjt=R.an(this.hjt,0,this.ejt.I6()-1),1===this.yjt&&(this.hjt=0),this.xjt(!0),this.fjt=this.vjt();const e=this.ejt.xTt(this.hjt);this.Pjt(s,e,t)}}Ejt(t){const s=this.njt,i=this.hjt;if(this.hjt=R.an(Math.floor(this.mjt),0,this.ejt.I6()-1),this.mjt=-1,t||i!==this.hjt){const e=this.ejt.xTt(this.hjt);this.Pjt(s,e),this.fjt=this.vjt()}}jWt(){const t=this.njt.O6();this.rjt=t.SM(),this.ojt=t.pC(),this.ajt=t.Wxt(),this.eO().gPt(!0)}SM(){return this.rjt}pC(){return this.ojt}Wxt(){return this.ajt}H6(){return this.njt.H6()}Fbt(t){let s=this.njt,i=this.eO(),e=null;if("string"==typeof t)e=s.X6(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.q6(t-1)}let h=i.A4();if(!e)return[i.Kb(),i.sv(),h];if(Ka.T(e.BTt()),i.HB()){const[n,r,o]=i.UB().Xv(Ka.$a(),Ka.Ya());Ka.set(n,r),h+=o}return Ka.offset(-s.N6(),-s.W6()),Ka.scale(i.Xp(),i.om()),Ka.rotate(i.kk()),Ka.offset(i.Kb(),i.sv()),[Ka.$a(),Ka.Ya(),h]}qjt(){return this.eO().lPt().Eu()}$jt(t){t=Math.floor(t);const s=this.eO(),i=s.lPt(),e=i.Eu();if((t=t===e?0:t)<0||e<=t)return[0,0];const h=i.Cu();return[h[2*t+0]+s.Kb(),h[2*t+1]+s.sv()]}xxt(){const s=R.B$.cht.Cht,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.ejt.jc(),Xjt:t=>this.Txt(s.Yjt,t,0)},{name:t+".current-frame",value:this.hjt,Xjt:t=>this.Txt(s.Zjt,t)},{name:t+".is-playing",value:this.Mjt(),Xjt:t=>t?this.Txt(s.Kjt,0):this.Txt(s.Qjt)},{name:t+".speed",value:this.ljt,Xjt:t=>this.Txt(s.t8t,t)},{name:t+".repeats",value:this.djt,Xjt:t=>this.djt=t}]}]}pv(){const t={a:this.ejt.Pz()},s=(0!==this.fjt&&(t.fs=this.fjt),this.vjt()),i=(0!==s&&(t.at=s),0!==this.hjt&&(t.f=this.hjt),0!==this.ljt&&(t.cas=this.ljt),1!==this.djt&&(t.ar=this.djt),0!==this.ujt&&(t.rt=this.ujt),this.Mjt()||(t.ap=this.Mjt()),this.Gjt()||(t.af=this.Gjt()),this.eO());return i.Q4()&&(t.ce=i.Q4()),t}mv(t){const s=this.cN().aIt(t.a),i=(s&&(this.ejt=s),this.fjt=t.hasOwnProperty("fs")?t.fs:0,this.cjt.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),e=(this.hjt=R.an(i,0,this.ejt.I6()-1),this.ljt=t.hasOwnProperty("cas")?t.cas:0,this.djt=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),h=(this.ujt=R.an(e,0,this.ejt.I6()-1),this.xjt(!t.hasOwnProperty("ap")||!!t.ap),this.Tjt(!t.hasOwnProperty("af")||!!t.af),this.ejt.xTt(this.hjt)),n=(this.njt=h,this.jWt(),this.eO());n.Wnt(h.N6()),n.Vnt(h.W6()),n.hPt(h.Z6()),n.tB(!!t.ce),this.Mjt()&&this.Sxt()}ont(t){const s=this.eO();switch(t){case 3:return s.Q4();case 2:return R.an(this.hjt,0,this.ejt.I6()-1);case 1:return this.ejt.jc()}}dnt(t,s,i){const e=this.eO();switch(t){case 3:e.tB(!!s);break;case 2:{this.xjt(!1);const h=this.ejt.I6()-1,n=s=R.an(s,0,h),r=this.ejt.xTt(this.hjt),o=this.ejt.xTt(n);this.Pjt(r,o,i),this.hjt=R.an(n,0,h);break}case 1:{this.gjt=s,this.Cjt(i);const a=this.ejt.I6();1<a&&0<this.ejt.S6()?this.Sxt():this.ixt();break}}}DMt(){return self.s8t}},new WeakMap),Qa=new Map([["current-frame",0],["beginning",1]]);self.s8t=class extends self.JB{constructor(){super(),P.set(this,self.lN.pN().ZB())}V6(){return P.get(this).H6()}U6(t){return this.z6(t)[0]}J6(t){return this.z6(t)[1]}i8t(t){return this.z6(t)[2]}z6(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return P.get(this).Fbt(t)}Y6(){return P.get(this).qjt()}K6(t){return Xa.ge(t),P.get(this).$jt(t)[0]}tW(t){return Xa.ge(t),P.get(this).$jt(t)[1]}Q6(t){return Xa.ge(t),P.get(this).$jt(t)}e8t(){P.get(this).xjt(!1)}h8t(t="current-frame"){Xa.ve(t);const s=Qa.get(t);if(void 0===s)throw new Error("invalid mode");P.get(this).Ljt(s)}n8t(t,s="beginning"){Xa.ve(t),Xa.ve(s);const i=Qa.get(s);if(void 0===i)throw new Error("invalid mode");const e=P.get(this);if(!e.cN().oIt(t))throw new Error(`animation name "${t}" does not exist`);e.kjt(t,i)}ZWt(t){Xa.ve(t);const s=P.get(this).cN().oIt(t);return s?s.CTt():null}get animation(){return P.get(this).Njt().CTt()}get animationName(){return P.get(this).Bjt()}set Djt(t){Xa.ge(t),P.get(this).Wjt(t)}get Djt(){return P.get(this).jjt()}set r8t(t){Xa.ve(t),P.get(this).Wjt(t)}get r8t(){return P.get(this).Vjt()}set o8t(t){Xa.ge(t),P.get(this).Hjt(t)}get o8t(){return P.get(this).Ujt()}set a8t(t){Xa.ge(t),P.get(this).zjt(t)}get a8t(){return P.get(this).Jjt()}get imageWidth(){return P.get(this).Lxt().Xp()}get imageHeight(){return P.get(this).Lxt().om()}l8t(){const t=P.get(this).Lxt();return[t.Xp(),t.om()]}async u8t(t){Xa.Ze(t,Blob);const s=P.get(this),i=s.GO(),e=s.Lxt(),h=R.Qh(R.HGt);if(h.eTt(i,t),await h.uV(i.vb(),{t2:i.EF()}),s.sn())h.tn();else{e.hTt(h);const n=s.wbt();n.WWt(),n.cN().Pf().dispatchEvent(new R.Event("animationframeimagechange")),i.uO()}}c8t(t,s){Xa.ve(s),P.get(this).eO().JRt(!!t,s)}}}{const tl=self.Ds;tl.B$.cht.k$={f8t(t){return tl.fh(this.Bjt(),t)},d8t(t,s){return tl.compare(this.hjt,t,s)},p8t(t,s){if("string"!=typeof s)return!1;const i=this.njt.sW();return tl.compare(i.toLowerCase(),t,s.toLowerCase())},m8t(t,s){return tl.compare(this.Ujt(),t,s)},Fjt(t){return tl.fh(this.pjt,t)},Ajt(){return!0},Ojt(){return!0},g8t(){return this.eO().Xp()<0},y8t(){return this.eO().om()<0},w8t(){return!0},S8t(){return!0},Q4(){return this.eO().Q4()}}}{const sl=self.Ds;sl.B$.cht.Cht={b8t(t,s,i,e,h){if(t&&s){const[n,r]=this.Fbt(i),o=this.Xc.vk(t,s,n,r,e,h);if(o){if(e&&s.Mk(o),t.hk().BL()){const l=o.eO();l.Lk(this.eO().kk()),l._4()}const a=this.Xc.WF();a.xk(!0),o.Gk(),a.xk(!1),t!==this.Xc.s1t().cN()&&this.sxt.HWt(t,o,e)}}},Qjt(){this.xjt(!1)},Kjt(t){this.Ljt(t)},Yjt(t,s){this.kjt(t,s)},Zjt(t){this.Wjt(t)},t8t(t){this.Hjt(t)},v8t(t){this.zjt(t)},M8t(s,t){try{0===s?this.wbt().UWt(t):this.wbt().zWt(t)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation: `,t)}},x8t(s,t,i){try{0===s?this.wbt().qWt(t,i):this.wbt().XWt(t,i)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation frame: `,t)}},G8t(t){const s=this.eO(),i=s.Xp(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.hm(e),s._4())},T8t(t){const s=this.eO(),i=s.om(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Yp(e),s._4())},Dk(t){const s=this.njt,i=s.O6(),e=this.eO(),h=e.Xp()<0?-1:1,n=e.om()<0?-1:1,r=i.Xp()*t*h,o=i.om()*t*n;e.Xp()===r&&e.om()===o||(e.kI(r,o),e._4())},async _8t(t,s,i){const e=this.njt,h=e.O6(),n=this.eO(),r=this.Xc,o=this.sxt;if(h.PH()===t)0===s&&(n.kI(h.Xp(),h.om()),n._4()),this.YN(sl.B$.cht.k$.w8t);else{const a=sl.Qh(sl.HGt);try{if(await a.iTt(r,t),!a.n7())throw new Error("image failed to load");if(this.sn())return void a.tn();await a.uV(r.vb(),{t2:r.EF()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.sn()||this.YN(sl.B$.cht.k$.S8t))}this.sn()?a.tn():(h.hTt(a),o.WWt(),o.cN().Pf().dispatchEvent(new sl.Event("animationframeimagechange")),r.uO(),0===s&&(n.kI(h.Xp(),h.om()),n._4()),await this.KN(sl.B$.cht.k$.w8t))}},I8t(t){this.eO().tB(t)},JRt(t,s){this.eO().JRt(0===t,s)},C8t(t){this.eO().jb(t),this.Xc.uO()}}}{const il=self.Ds;il.B$.cht.Eht={E8t(){return this.jjt()},R8t(){return this.Vjt()},P8t(){return this.ejt.I6()},A8t(){return this.ejt.jc()},F8t(){return this.Ujt()},D8t(){return this.ejt.S6()},O8t(t){return this.Fbt(t)[0]},L8t(t){return this.Fbt(t)[1]},k8t(t){return this.Fbt(t)[2]},N8t(){return this.H6()},B8t(){return this.Lxt().Xp()},W8t(){return this.Lxt().om()},j8t(t){return this.$jt(t)[0]},V8t(t){return this.$jt(t)[1]},H8t(){return this.qjt()}}}{const el=self.Ds;el.B$.Touch=class extends el.uMt{constructor(t){super(t)}tn(){super.tn()}}}{let i=function(){return s.sk().ZB()};i;const hl=self.Ds,nl=self.Us;hl.B$.Touch.__t=class extends hl.$Mt{constructor(t){super(t)}tn(){super.tn()}FMt(){}DMt(){return self.U8t}};let s=null;self.U8t=class extends self.ik{constructor(t){super(t),(s=t).GO().zD().qD=this}requestPermission(t){nl.ve(t);const s=i();if("orientation"===t)return s.z8t(0);if("motion"===t)return s.z8t(1);throw new Error("invalid type")}}}{const A=self.Ds;A.B$.Touch.Instance=class extends A.QMt{constructor(t,s){super(t,"touch"),this.J8t=new Map,this.q8t=!1,this.$8t=!1,this.X8t=0,this.Y8t=0,this.Z8t=0,this.K8t=0,this.Q8t=0,this.tVt=0,this.sVt=0,this.iVt=0,this.eVt=0,this.hVt=0,this.nVt=0,this.rVt=0,this.oVt=0,this.aVt=0,this.lVt=0,this.uVt=0,this.cVt=0,this.fVt=[],s&&(this.q8t=s[0]),this.uxt("permission-result",t=>this.dVt(t));const i=this.GO().Pf();this.l0=new A.r0(A.t0.n0(i,"pointerdown",t=>this.pVt(t.data)),A.t0.n0(i,"pointermove",t=>this.mVt(t.data)),A.t0.n0(i,"pointerup",t=>this.gVt(t.data,!1)),A.t0.n0(i,"pointercancel",t=>this.gVt(t.data,!0)),A.t0.n0(i,"deviceorientation",t=>this.yVt(t.data)),A.t0.n0(i,"deviceorientationabsolute",t=>this.wVt(t.data)),A.t0.n0(i,"devicemotion",t=>this.SVt(t.data)),A.t0.n0(i,"tick2",t=>this.hY()))}tn(){this.J8t.clear(),super.tn()}pVt(t){if("mouse"===t.pointerType){if(!this.q8t)return;this.$8t=!0}const s=t.pointerId;if(!this.J8t.has(s)){const i=t.pageX-this.Xc.Q5(),e=t.pageY-this.Xc.tN(),h=performance.now(),n=this.J8t.size,r=(this.nVt=n,this.rVt=s,A.Qh(A.B$.Touch.bVt));r.qIt(h,i,e,s,n),this.J8t.set(s,r),this.YN(A.B$.Touch.k$.vVt),this.YN(A.B$.Touch.k$.MVt),this.aVt=i,this.lVt=e,this.cVt=0,this.YN(A.B$.Touch.k$.xVt)}}mVt(t){if("mouse"!==t.pointerType||this.$8t){const s=this.J8t.get(t.pointerId);if(s){const i=performance.now();if(!(i-s.VP()<2)){const e=t.pageX-this.Xc.Q5(),h=t.pageY-this.Xc.tN();s.O7(i,e,h,t.width,t.height,t.pressure)}}}}gVt(t,s){if("mouse"===t.pointerType){if(!this.$8t)return;this.$8t=!1}const i=performance.now(),e=t.pointerId,h=this.J8t.get(e);if(h){if(this.nVt=h.GVt(),this.rVt=h.RW(),!s){const n=t.pageX-this.Xc.Q5(),r=t.pageY-this.Xc.tN();this.aVt=n,this.lVt=r,this.cVt=1,this.YN(A.B$.Touch.k$.xVt)}if(this.YN(A.B$.Touch.k$.TVt),this.YN(A.B$.Touch.k$._Vt),!s){const o=h.IVt(i);"single-tap"===o?(this.YN(A.B$.Touch.k$.CVt),this.aVt=h.Kb(),this.lVt=h.sv(),this.YN(A.B$.Touch.k$.EVt)):"double-tap"===o&&(this.YN(A.B$.Touch.k$.RVt),this.aVt=h.Kb(),this.lVt=h.sv(),this.YN(A.B$.Touch.k$.PVt))}h.tn(),this.J8t.delete(e)}}z8t(i){return this.pxt("request-permission",{type:i}),new Promise((t,s)=>{this.fVt.push({type:i,resolve:t,reject:s})})}dVt(t){const s=t.result,i=t.type,e=(this.oVt=i,this.fVt.filter(t=>t.type===i));for(const h of e)h.resolve(s?"granted":"denied");this.fVt=this.fVt.filter(t=>t.type!==i),s?(this.YN(A.B$.Touch.k$.AVt),0===i?this.Xc.MNt():this.Xc.xNt()):this.YN(A.B$.Touch.k$.FVt)}yVt(t){"number"==typeof t.webkitCompassHeading?this.X8t=t.webkitCompassHeading:t.absolute&&(this.X8t=t.alpha),this.Y8t=t.alpha,this.Z8t=t.beta,this.K8t=t.gamma}wVt(t){this.X8t=t.alpha}SVt(t){const s=t.acceleration,i=(s&&(this.Q8t=s.x,this.tVt=s.y,this.sVt=s.z),t.accelerationIncludingGravity);i&&(this.iVt=i.x,this.eVt=i.y,this.hVt=i.z)}hY(){let t=performance.now(),s=0;for(const i of this.J8t.values())i.VP()<=t-50&&i.DVt(t),i.OVt(t)&&(this.nVt=i.GVt(),this.rVt=i.RW(),this.uVt=s,this.YN(A.B$.Touch.k$.LVt),this.aVt=i.Kb(),this.lVt=i.sv(),this.YN(A.B$.Touch.k$.kVt),this.uVt=0),++s}NVt(t){t=Math.floor(t);for(const s of this.J8t.values()){if(0===t)return s;--t}return null}BVt(t,s){return 0<=t&&0<=s&&t<this.Xc.a5t()&&s<this.Xc.l5t()}xxt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.J8t.values()].map(t=>({name:"$"+t.RW(),value:t.Kb()+", "+t.sv()}))}]}}}{const rl=self.Ds;rl.B$.Touch.k$={MVt(){return!0},_Vt(){return!0},WVt(){return 0<this.J8t.size},xVt(t,s){return!!t&&s===this.cVt&&!!this.BVt(this.aVt,this.lVt)&&this.Xc.gF().SAt(t,[[this.aVt,this.lVt]],!1)},jVt(t){if(!t)return!1;const s=this.Xc.Q0t(),i=s.xSt(),e=[...this.J8t.values()].filter(t=>this.BVt(t.Kb(),t.sv())).map(t=>[t.Kb(),t.sv()]);return rl.xor(this.Xc.gF().SAt(t,e,i),i)},VVt(t,s,i){const e=this.NVt(t);return!!e&&rl.compare(e.S6(),s,i)},HVt(){return!0},UVt(){return!0},zVt(t,s,i){this.Xc.MNt();let e;return e=0===t?this.Y8t:1===t?this.Z8t:this.K8t,rl.compare(e,s,i)},JVt(t,s,i){this.Xc.xNt();let e;return e=0===t?this.iVt:1===t?this.eVt:2===t?this.hVt:3===t?this.Q8t:4===t?this.tVt:this.sVt,rl.compare(e,s,i)},vVt(t){return(t=Math.floor(t))===this.nVt},TVt(t){return(t=Math.floor(t))===this.nVt},qVt(t){return t=Math.floor(t),this.J8t.size>=t+1},LVt(){return!0},CVt(){return!0},RVt(){return!0},kVt(t){return!!t&&!!this.BVt(this.aVt,this.lVt)&&this.Xc.gF().SAt(t,[[this.aVt,this.lVt]],!1)},EVt(t){return!!t&&!!this.BVt(this.aVt,this.lVt)&&this.Xc.gF().SAt(t,[[this.aVt,this.lVt]],!1)},PVt(t){return!!t&&!!this.BVt(this.aVt,this.lVt)&&this.Xc.gF().SAt(t,[[this.aVt,this.lVt]],!1)},AVt(t){return this.oVt===t},FVt(t){return this.oVt===t}}}{const ol=self.Ds;ol.B$.Touch.Cht={$Vt(t){this.z8t(t)}}}{const al=self.Ds;al.B$.Touch.Eht={XVt(){return this.J8t.size},x2t(t){const s=this.NVt(this.uVt);return s?s.YVt(this.Xc.sO(),t,!0):0},G2t(t){const s=this.NVt(this.uVt);return s?s.YVt(this.Xc.sO(),t,!1):0},ZVt(t,s){const i=this.NVt(t);return i?i.YVt(this.Xc.sO(),s,!0):0},KVt(t,s){const i=this.NVt(t);return i?i.YVt(this.Xc.sO(),s,!1):0},QVt(t,s){const i=this.J8t.get(t);return i?i.YVt(this.Xc.sO(),s,!0):0},tHt(t,s){const i=this.J8t.get(t);return i?i.YVt(this.Xc.sO(),s,!1):0},sHt(){const t=this.NVt(0);return t?t.Kb():0},iHt(){const t=this.NVt(0);return t?t.sv():0},eHt(t){const s=this.NVt(t);return s?s.Kb():0},hHt(t){const s=this.NVt(t);return s?s.sv():0},nHt(t){const s=this.J8t.get(t);return s?s.Kb():0},rHt(t){const s=this.J8t.get(t);return s?s.sv():0},oHt(t){const s=this.NVt(t);return s?s.S6():0},aHt(t){const s=this.J8t.get(t);return s?s.S6():0},lHt(t){const s=this.NVt(t);return s?al.cn(s.kk()):0},uHt(t){const s=this.J8t.get(t);return s?al.cn(s.kk()):0},cHt(){return this.Xc.MNt(),this.X8t},fHt(){return this.Xc.MNt(),this.Y8t},dHt(){return this.Xc.MNt(),this.Z8t},pHt(){return this.Xc.MNt(),this.K8t},mHt(){return this.Xc.xNt(),this.iVt},gHt(){return this.Xc.xNt(),this.eVt},yHt(){return this.Xc.xNt(),this.hVt},wHt(){return this.Xc.xNt(),this.Q8t},SHt(){return this.Xc.xNt(),this.tVt},bHt(){return this.Xc.xNt(),this.sVt},vHt(){return this.nVt},MHt(){return this.rVt},xHt(t){const s=this.J8t.get(t);return s?s.Xp():0},GHt(t){const s=this.J8t.get(t);return s?s.om():0},THt(t){const s=this.J8t.get(t);return s?s._Ht():0}}}{let r=self.Ds,s=-1e3,i=-1e3,e=-1e4;r.B$.Touch.bVt=class extends r.Zh{constructor(){super(),this.IHt=0,this.ZG=0,this.PLt=0,this.NA=0,this.CHt=0,this.EHt=0,this.RHt=0,this.Ua=0,this.za=0,this.PHt=0,this.AHt=0,this.Lm=0,this.km=0,this.FHt=0,this.DHt=!1,this.OHt=!1}tn(){}qIt(t,s,i,e,h){this.IHt=e,this.ZG=h,this.NA=t,this.CHt=t,this.PLt=t,this.EHt=s,this.RHt=i,this.Ua=s,this.za=i,this.PHt=s,this.AHt=i}O7(t,s,i,e,h,n){this.CHt=this.NA,this.NA=t,this.PHt=this.Ua,this.AHt=this.za,this.Ua=s,this.za=i,this.Lm=e,this.km=h,this.FHt=n,!this.OHt&&15<=r.dn(this.EHt,this.RHt,this.Ua,this.za)&&(this.OHt=!0)}RW(){return this.IHt}GVt(){return this.ZG}VP(){return this.NA}DVt(t){this.CHt=t}Kb(){return this.Ua}sv(){return this.za}S6(){const t=r.dn(this.Ua,this.za,this.PHt,this.AHt),s=(this.NA-this.CHt)/1e3;return 0<s?t/s:0}kk(){return r.mn(this.PHt,this.AHt,this.Ua,this.za)}Xp(){return this.Lm}om(){return this.km}_Ht(){return this.FHt}OVt(t){return!this.DHt&&500<=t-this.PLt&&!this.OHt&&r.dn(this.EHt,this.RHt,this.Ua,this.za)<15&&(this.DHt=!0)}IVt(t){return!this.DHt&&t-this.PLt<=333&&!this.OHt&&r.dn(this.EHt,this.RHt,this.Ua,this.za)<15?t-e<=666&&r.dn(s,i,this.Ua,this.za)<25?(s=-1e3,i=-1e3,e=-1e4,"double-tap"):(s=this.Ua,i=this.za,e=t,"single-tap"):""}YVt(t,s,i){if(void 0===s){const e=t.rO(0);return e.H9(this.Ua,this.za)[i?0:1]}{const h=t.hO(s);return h?h.K5(this.Ua,this.za)[i?0:1]:0}}}}{const ll=self.Ds;ll.B$.Text=class extends ll.uMt{constructor(t){super(t)}tn(){super.tn()}}}{const ul=self.Ds;ul.B$.Text.__t=class extends ul.$Mt{constructor(t){super(t)}tn(){super.tn()}FMt(){}o$(t){}d$(){}}}{const F=self.Ds,cl=self.Us,fl=[0,0,0],dl=["left","center","right"],pl=["top","center","bottom"],ml=["ltr","rtl"],gl=["word","cjk","character"],yl=new F.Rect,wl=new F.Hl,Sl=new F.Oo,bl=F.Qh(F.Ha),vl=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]),D=(F.B$.Text.Instance=class extends F.Cxt{constructor(t,s){if(super(t),this.Yc="",this.LHt=!0,this.kHt="Arial",this.NHt=12,this.BHt=0,this.b_=!1,this.v_=!1,this.Nb=F.Qh(F.Oo),this.I_=0,this.C_=0,this.P_="word",this.A_=0,this.WHt="auto",this.jHt=1,this.VHt=null,this.HHt="",this.UHt=!1,this.zHt=!1,this.JHt=null,this.qHt=-1,this.$Ht=-1,this.XHt=0,this.YHt=F.Qh(F.Hg.rb,this.Xc.vb(),{timeout:5}),this.YHt.rI=()=>this.Xc.uO(),this.ZHt=()=>this.KHt(),this.QHt=!1,s){this.Yc=s[0],this.LHt=!!s[1],this.kHt=s[2],this.NHt=s[3],this.BHt=s[4],this.b_=!!s[5],this.v_=!!s[6],this.I_=s[8],this.C_=s[9],this.P_=gl[s[10]],this.A_=s[11],this.t7t(this.Xc.u8(s[12]));const i=s[7];this.Nb.jo(i[0],i[1],i[2]),this.eO().S5(s[13]),this.zHt=!!s[15]}this.s7t(),this.i7t()}tn(){this.t7t(null),this.e7t(),this.JHt&&(this.JHt.tn(),this.JHt=null),this.YHt.tn(),this.YHt=null,super.tn()}s7t(){const t=this.YHt;t.Qc(this.Yc),t.uI(this.LHt),this.YHt.d_()&&this.VHt?this.YHt.qp(this.GO().Y5t(this.VHt)):this.YHt.qp(null),t.cI("nearest"!==this.Xc.EF()),t.fI(this.kHt),t.gI(this.BHt),t.wI(this.b_),t.bI(this.v_),t.Vb(this.Nb),t.II(dl[this.I_]),t.EI(pl[this.C_]),t.AI(this.P_),t.DI(ml[this.A_])}h7t(){let t=this.eO(),s=(this.YHt.dI(this.NHt),this.YHt.mI(t.dRt()),t.hO()),i;"auto"===this.WHt?i=s.zJ(t.A4()):"fixed"===this.WHt&&(i=this.jHt),t.HB()&&i!==this.YHt.NI()&&t.gPt(!0),this.YHt.kI(t.Xp(),t.om(),i)}t7t(t){t&&(t.xz()||t.hk().constructor!==F.B$.cht)||t!==this.VHt&&(this.VHt&&this.VHt.Pf().removeEventListener("animationframeimagechange",this.ZHt),this.VHt=t,this.VHt&&this.VHt.Pf().addEventListener("animationframeimagechange",this.ZHt),this.s7t(),this.UHt=!1,this.Xc.uO())}KHt(){this.Xc.Z5t(this.VHt),this.Xc.uO(),this.QHt=!0}i7t(){if(this.zHt){let t=this.Yc;this.LHt&&(t=F._h.jp(t)),this.JHt?this.JHt.Qc(t):this.JHt=F.Qh(F.$c,this.Xc,t)}else this.JHt&&(this.JHt.tn(),this.JHt=null)}Hv(t){const s=this.eO(),i=(this.h7t(),this.QHt&&(this.QHt=!1,this.YHt.d_())&&this.VHt&&this.YHt.qp(this.GO().Y5t(this.VHt)),this.YHt.SM());if(i){const e=s.hO();if(0===s.kk()&&0===e.kk()&&0===s.A4()&&!s.HB()&&e.uJ()){const h=s.L4(),[n,r]=e.rN(h.Jn(),h.qn()),[o,a]=e.rN(h.Yn(),h.Zn()),l=n-Math.round(n),u=r-Math.round(r),[c,f]=(yl.set(n,r,o,a),yl.offset(-l,-u),wl.uu(yl),t.PR(t.ZR()));this.Xc.dL().wV(t,c,f),t.yR(i),t.yS(wl,this.YHt.pC()),e.bV(t)}else t.yR(i),s.HB()?this.Sjt(s,t):this.bjt(s,t)}}bjt(t,s){let i=t.L4();this.Xc.PF()&&(i=this.n7t(i)),s.yS(i,this.YHt.pC())}Sjt(s,t){const i=s.mPt();if(s.yPt()){s.$Rt(yl,wl,!1);let t=wl;this.Xc.PF()&&(t=this.n7t(t)),i.Vv(s.UB(),t,this.YHt.pC()),s.gPt(!1)}i.Hv(t)}n7t(t){const s=t.Jn()-Math.round(t.Jn()),i=t.qn()-Math.round(t.qn());return 0==s&&0==i?t:(wl.T(t),wl.offset(-s,-i),wl)}kxt(){const t=this.YHt.SM();return t?[t.Xp(),t.om()]:[100,100]}Nxt(){return this.YHt.pC()}jxt(){return!1}pv(){const t={t:this.Yc,c:this.Nb.toJSON(),fn:this.kHt,ps:this.NHt};return this.LHt&&(t.bbc=this.LHt),0!==this.I_&&(t.ha=this.I_),0!==this.C_&&(t.va=this.C_),"word"!==this.P_&&(t.wr=this.P_),0!==this.BHt&&(t.lho=this.BHt),this.b_&&(t.b=this.b_),this.v_&&(t.i=this.v_),-1!==this.$Ht&&(t.tw={st:this.qHt,en:this.$Ht,l:this.XHt}),this.VHt&&(t.ioc=this.VHt.Pz()),"fixed"===this.WHt&&(t.fs=this.jHt),t}mv(t){if(this.e7t(),this.Yc=t.t,this.Nb.Aa(t.c),this.kHt=t.fn,this.NHt=t.ps,this.LHt=!!t.hasOwnProperty("bbc")&&t.bbc,this.I_=t.hasOwnProperty("ha")?t.ha:0,this.C_=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.P_="boolean"==typeof s?s?"word":"character":s}else this.P_="word";if(this.BHt=t.hasOwnProperty("lho")?t.lho:0,this.b_=!!t.hasOwnProperty("b")&&t.b,this.v_=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const i=t.tw;this.qHt=i.st,this.$Ht=i.en,this.XHt=i.l}if(t.hasOwnProperty("ioc")){const e=this.GO().u8(t.ioc);e&&this.t7t(e)}else this.t7t(null);t.hasOwnProperty("fs")?(this.WHt="fixed",this.jHt=t.fs):this.WHt="auto",this.s7t(),this.i7t(),this.UHt=!1,-1!==this.$Ht&&this.Sxt()}ont(t){switch(t){case 0:return this.LI();case 1:return this.LHt;case 2:return this.r7t();case 3:return this.o7t();case 4:return this.a7t();case 5:return this.l7t();case 6:return this.u7t();case 7:return fl[0]=this.Nb.Xo(),fl[1]=this.Nb.Yo(),fl[2]=this.Nb.Zo(),fl;case 8:return this.c7t();case 9:return this.f7t();case 10:return this.d7t();case 15:return this.p7t()}}dnt(t,s){switch(t){case 0:this.m7t(s);break;case 1:this.LHt!==!!s&&(this.LHt=!!s,this.s7t());break;case 2:this.g7t(s);break;case 3:this.y7t(s);break;case 4:this.w7t(s);break;case 5:this.S7t(s);break;case 6:this.b7t(s);break;case 7:const i=this.Nb,e=s;i.Xo()===e[0]&&i.Yo()===e[1]&&i.Zo()===e[2]||(this.Nb.jo(e[0],e[1],e[2]),this.s7t());break;case 8:this.v7t(s);break;case 9:this.M7t(s);break;case 10:this.x7t(s)}}Gxt(t,s,i,e){0===s&&0===i&&0===e||7===t&&(this.Nb.Vo(s,i,e),this.s7t())}m7t(t){this.Yc!==t&&(this.Yc=t,this.YHt.Qc(t),this.i7t(),this.UHt=!1,this.Xc.uO())}LI(){return this.Yc}G7t(t,s){this.h7t(),this.m7t(t),this.qHt=this.Xc.pD(),this.$Ht=this.qHt+s/this.TW().CN(),this.XHt=this.YHt.VI(),this.YHt.MI(0),this.Sxt()}e7t(){this.qHt=-1,this.$Ht=-1,this.XHt=0,this.YHt.MI(-1),this.ixt()}T7t(){-1!==this.$Ht&&(this.e7t(),this.YN(F.B$.Text.k$._7t),this.Xc.uO())}g7t(t){this.kHt!==t&&(this.kHt=t,this.YHt.fI(t),this.Xc.uO())}r7t(){return this.kHt}S7t(t){this.b_!==(t=!!t)&&(this.b_=t,this.YHt.wI(t),this.Xc.uO())}l7t(){return this.b_}b7t(t){this.v_!==(t=!!t)&&(this.v_=t,this.YHt.bI(t),this.Xc.uO())}u7t(){return this.v_}y7t(t){this.NHt!==t&&(this.NHt=t,this.Xc.uO())}o7t(){return this.NHt}I7t(t){this.Nb.ea(t)||(this.Nb.$o(t),this.YHt.Vb(this.Nb),this.Xc.uO())}C7t(){return this.Nb}w7t(t){this.BHt!==t&&(this.BHt=t,this.s7t(),this.Xc.uO())}a7t(){return this.BHt}v7t(t){this.I_!==t&&(this.I_=t,this.s7t(),this.Xc.uO())}c7t(){return this.I_}M7t(t){this.C_!==t&&(this.C_=t,this.s7t(),this.Xc.uO())}f7t(){return this.C_}E7t(t){this.x7t(gl[t])}x7t(t){this.P_!==t&&(this.P_=t,this.s7t(),this.Xc.uO())}d7t(){return this.P_}R7t(t){this.A_!==t&&(this.A_=t,this.s7t(),this.Xc.uO())}P7t(){return this.A_}A7t(t){this.zHt=!!t,this.i7t()}p7t(){return this.zHt}F7t(t){this.WHt!==t&&(this.WHt=t,this.Xc.uO())}D7t(){return this.WHt}O7t(t){this.jHt!==t&&(this.jHt=t,"fixed"===this.WHt)&&this.Xc.uO()}L7t(){return this.jHt}k7t(){return this.h7t(),this.YHt.BI()}N7t(){return this.h7t(),this.YHt.jI()}B7t(t,s){this.h7t();const i=this.eO(),e=(bl.set(t-i.Kb(),s-i.sv()),bl.rotate(-i.kk()),bl.offset(i.Xp()*i.N6(),i.om()*i.W6()),bl.Tt(i.Xp(),i.om()),bl.scale(this.YHt.Xp(),this.YHt.om()),this.YHt.UI(bl.$a(),bl.Ya()));if(e){const h=e.Zm("tag");if(h)return h.Op}return""}W7t(t,s,i){const e=this.B7t(s,i);return e&&F.fh(t,e)}j7t(t,s){this.h7t(),s=Math.floor(s);const i=this.YHt.JI(t,s);if(!i)return null;const e=this.eO(),h=this.YHt.TI(),n=i.Jm(),r=i.$m()-(i.om()-i.lm())*h,o=i.Xp()*h/this.YHt.Xp()*e.Xp(),a=i.om()*h/this.YHt.om()*e.om();return bl.set(n,r),bl.Tt(this.YHt.Xp(),this.YHt.om()),bl.scale(e.Xp(),e.om()),bl.offset(-e.Xp()*e.N6(),-e.om()*e.W6()),bl.rotate(e.kk()),bl.offset(e.Kb(),e.sv()),{x:bl.$a(),y:bl.Ya(),width:o,height:a}}V7t(t){return this.h7t(),this.YHt.qI(t)}H7t(t){let s=vl.get(t);return null===s?"":`</${s||"span"||"span"}>`}U7t(t,s){let i=vl.get(t);if(null===i)return"";switch(i=i||"span",t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async z7t(){if(!this.UHt){let t=new F._h(this.Yc,{Mp:!0}).Fp(),s=new Map,h='<span class="c3-text"',i=[],n=(i.push(`font-family: '${this.r7t()}';`),this.l7t()&&i.push("font-weight: bold;"),this.u7t()&&i.push("font-style: italic;"),"character"===this.d7t()&&i.push("word-break: break-all;"),h+=` style="${i.join(" ")}">`,this.VHt?this.GO().Y5t(this.VHt):null);if(this.VHt){const o=F.Qh(F.s1),a=[],l=new Map;for(const c of t)if(c.nm()){const f=c.eg(n);if(f){const d=f.Bg(),p=d.O6().lTt();l.has(p)||(l.set(p,null),a.push(o.tc(async()=>{const t=await p.m7();l.set(p,t)})))}}await Promise.all(a);const u=[];for(const m of t)if(m.nm()){const g=m.eg(n);if(g){const y=g.Bg(),w=y.O6().lTt();u.push(o.tc(async()=>{const t=await y.O6().cTt(l.get(w));s.set(g,t)}))}}await Promise.all(u);for(const S of l.values())S instanceof ImageBitmap&&S.close&&S.close()}const r=new Map;for(const b of t){let e=b.Qm(),t=[...r.keys()];t.reverse();for(const v of t)e.has(v)&&e.get(v)===r.get(v)||(r.delete(v),h+=this.H7t(v));for(const[M,x]of e)r.has(M)||(r.set(M,x),h+=this.U7t(M,x));if(b.im()&&(h+=F.Vd(F.Wd(b.Gm().join("")),"\n","<br>")),b.nm()&&n){const G=b.eg(n);if(G){const T=s.get(G);if(T){let t=[],s="0.2em",i=e.get("iconoffsety");if(i){let t=i.trim();s=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}t.push("top: "+s),"nearest"===this.Xc.EF()&&t.push("image-rendering: pixelated"),h+=`<img class="c3-text-icon" data-icon="${b.ig()}" width="${G.Xp()}" height="${G.om()}" style="${t.join(";")}" src="${T}">`}}}}const e=[...r.keys()];e.reverse();for(const _ of e)h+=this.H7t(_);h+="</span>",this.HHt=h,this.UHt=!0}return this.HHt}cZ(){const s=this.Xc.pD();if(s>=this.$Ht)this.e7t(),this.YN(F.B$.Text.k$._7t),this.Xc.uO();else{let t=F.Gn(this.qHt,this.$Ht,s,0,this.XHt);(t=Math.floor(t))!==this.YHt.xI()&&(this.YHt.MI(t),this.Xc.uO())}}xxt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.LI(),Xjt:t=>this.m7t(t)},{name:t+".properties.font.name",value:this.r7t(),Xjt:t=>this.g7t(t)},{name:t+".properties.size.name",value:this.o7t(),Xjt:t=>this.y7t(t)},{name:t+".properties.line-height.name",value:this.a7t(),Xjt:t=>this.w7t(t)},{name:t+".properties.bold.name",value:this.l7t(),Xjt:t=>this.S7t(t)},{name:t+".properties.italic.name",value:this.u7t(),Xjt:t=>this.b7t(t)}]}]}DMt(){return self.J7t}},new WeakMap),Ml=new Map([["left",0],["center",1],["right",2]]),xl=new Map([["top",0],["center",1],["bottom",2]]),Gl=["ltr","rtl"];new Set(["auto","fixed"]);self.J7t=class extends self.JB{constructor(){super(),D.set(this,self.lN.pN().ZB())}get text(){return D.get(this).LI()}set text(t){cl.ve(t);const s=D.get(this);s.e7t(),s.m7t(t)}q7t(t,s){cl.ve(t),cl.ge(s);const i=D.get(this);i.e7t(),i.G7t(t,s)}$7t(){D.get(this).T7t()}set xV(t){cl.ve(t),D.get(this).g7t(t)}get xV(){return D.get(this).r7t()}set TV(t){D.get(this).S7t(t)}get TV(){return D.get(this).l7t()}set _V(t){D.get(this).b7t(t)}get _V(){return D.get(this).u7t()}set GV(t){cl.ge(t),D.get(this).y7t(t)}get GV(){return D.get(this).o7t()}set X7t(t){if(cl.Le(t),t.length<3)throw new Error("expected 3 elements");Sl.jo(t[0],t[1],t[2]),D.get(this).I7t(Sl)}get X7t(){const t=D.get(this).C7t();return[t.Xo(),t.Yo(),t.Zo()]}set lineHeight(t){cl.ge(t),D.get(this).w7t(t)}get lineHeight(){return D.get(this).a7t()}set EV(t){cl.ve(t);const s=Ml.get(t);if(void 0===s)throw new Error("invalid mode");D.get(this).v7t(s)}get EV(){return dl[D.get(this).c7t()]}set verticalAlign(t){cl.ve(t);const s=xl.get(t);if(void 0===s)throw new Error("invalid mode");D.get(this).M7t(s)}get verticalAlign(){return pl[D.get(this).f7t()]}set RV(t){if(!gl.includes(t))throw new Error("invalid mode");D.get(this).x7t(t)}get RV(){return D.get(this).d7t()}set PV(t){cl.ve(t);const s=Gl.indexOf(t);if(-1===s)throw new Error("invalid text direction");D.get(this).R7t(s)}get PV(){return Gl[D.get(this).P7t()]}set Y7t(t){D.get(this).A7t(!!t)}get Y7t(){return D.get(this).p7t()}Z7t(t){cl.ge(t);const s=D.get(this);s.F7t("fixed"),s.O7t(t)}K7t(){D.get(this).F7t("auto")}get DV(){return D.get(this).k7t()}get OV(){return D.get(this).N7t()}Q7t(){const t=D.get(this);return[t.k7t(),t.N7t()]}tUt(t,s,i){return cl.ve(t),cl.ge(s),cl.ge(i),D.get(this).W7t(t,s,i)}sUt(t,s){return cl.ge(t),cl.ge(s),D.get(this).B7t(t,s)}iUt(t,s=0){return cl.ve(t),cl.ge(s),D.get(this).j7t(t,s)}eUt(t){return cl.ve(t),D.get(this).V7t(t)}hUt(t){const s=D.get(this),i=s.GO().sL(t);s.t7t(i)}nUt(){return D.get(this).z7t()}}}{const Tl=self.Ds;Tl.B$.Text.k$={rUt(t,s){return s?this.Yc===t:Tl.fh(this.Yc,t)},oUt(){return-1!==this.$Ht},_7t(){return!0},aUt(t,s,i){return this.W7t(t,s,i)}}}{const _l=self.Ds,Il=_l.Qh(_l.Oo);_l.B$.Text.Cht={Qc(t){this.e7t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.m7t(t.toString())},lUt(t){this.e7t(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.m7t(this.Yc+t)},uUt(t,s){this.e7t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.G7t(t.toString(),s)},cUt(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.kHt&&i===this.b_&&e===this.v_||(this.g7t(t),this.S7t(i),this.b7t(e))},dI(t){this.y7t(t)},fUt(t){Il.fa(t),Il.an(),this.I7t(Il)},dUt(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},C8t(t){this.eO().jb(t),this.Xc.uO()},pUt(){this.T7t()},gI(t){this.w7t(t)},mUt(t){this.v7t(t)},gUt(t){this.M7t(t)},yUt(t){this.E7t(t)},DI(t){this.R7t(t)},wUt(t){this.t7t(t)},SUt(){return this.z7t()},bUt(t){this.A7t(t)},vUt(t,s){this.F7t(["auto","fixed"][t]),this.O7t(s)}}}{const Cl=self.Ds;Cl.B$.Text.Eht={Text(){return this.Yc},MUt(){return this.LHt?Cl._h.jp(this.Yc):this.Yc},xUt(){return this.kHt},GUt(){return this.NHt},TUt(){return this.k7t()},_Ut(){return this.N7t()},IUt(){return this.BHt},CUt(t,s){return this.B7t(t,s)},EUt(t){return this.V7t(t)},RUt(t,s){const i=this.j7t(t,s);return i?i.x:0},PUt(t,s){const i=this.j7t(t,s);return i?i.y:0},AUt(t,s){const i=this.j7t(t,s);return i?i.width:0},FUt(t,s){const i=this.j7t(t,s);return i?i.height:0},DUt(){return this.HHt}}}{let t=function(t,s){return"number"==typeof t&&"number"==typeof s},i=function(i,e){if("string"!=typeof i&&"string"!=typeof e)return i&&e?1:0;{let t,s;return t="number"==typeof i?(Math.round(1e10*i)/1e10).toString():i,s="number"==typeof e?(Math.round(1e10*e)/1e10).toString():e,t+s}};t,i,0;self.pwt=[()=>0,()=>1,t=>{const s=t.Gwt(0).dwt();return()=>i("Score: ",s.Zit())},t=>{const s=t.Gwt(0).Uyt();return()=>s(540)+120},()=>"",t=>{const s=t.Gwt(0).dwt();return()=>120/Math.sqrt(s.Zit())},t=>{const s=t.Gwt(0).Uyt();return()=>s()},t=>{const s=t.Gwt(0).dwt();return()=>i("Time Remaining: ",Math.round(10*s.Zit())/10)},()=>10]}var t=self.Ds;self.Nkt=function(){return[t.B$.cht,t.B$.Touch,t.B$.Text,t.B$.Touch.k$.EVt,t.B$.N$.k$.G4t,t.B$.cht.Cht.e2t,t.B$.N$.Cht.Z4t,t.B$.Text.Cht.Qc,t.B$.N$.Cht.eBt,t.B$.N$.Eht.random,t.B$.cht.Cht.kI,t.B$.N$.Cht.K4t,t.B$.N$.Eht.oD,t.B$.N$.Cht.Y4t,t.B$.N$.Cht.TBt]},self.s5t=[{OUt:0},{Touch:0},{LUt:0},{kUt:0},{NUt:0},{BUt:0},{WUt:0}],self.jUt={OUt:class extends self.s8t{},Touch:class extends self.lN{},LUt:class extends self.J7t{},kUt:class extends self.J7t{},NUt:class extends self.J7t{}};