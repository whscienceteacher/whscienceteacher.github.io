// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let L=function(t){Mh=t},k=function(t){return t*Lh},N=function(t,s){return Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},B=function(){var t=new Mh(4);return Mh!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},W=function(t){var s=new Mh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},j=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},H=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},V=function(t,s,i,e){var h=new Mh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},U=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},z=function(t,s){var i;return t===s?(i=s[1],t[1]=s[2],t[2]=i):(t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3]),t},J=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*(s=s[3])-h*e;return r?(t[0]=s*(r=1/r),t[1]=-e*r,t[2]=-h*r,t[3]=i*r,t):null},q=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},$=function(t){return t[0]*t[3]-t[2]*t[1]},t=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*n+r*o,t[1]=h*n+s*o,t[2]=e*a+r*i,t[3]=h*a+s*i,t},X=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*n,t[1]=h*i+s*n,t[2]=e*-n+r*i,t[3]=h*-n+s*i,t},K=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],i=i[1];return t[0]=e*n,t[1]=h*n,t[2]=r*i,t[3]=s*i,t},Y=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t},Z=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},Q=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},tt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},st=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},it=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},s=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},et=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},ht=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],r=s[0],n=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=vh*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-n)<=vh*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-o)<=vh*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},rt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},nt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ot=function(){var t=new Mh(6);return Mh!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},at=function(t){var s=new Mh(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},ut=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},lt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ct=function(t,s,i,e,h,r){var n=new Mh(6);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n[4]=h,n[5]=r,n},ft=function(t,s,i,e,h,r,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t},dt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],s=s[5],o=i*r-e*h;return o?(t[0]=r*(o=1/o),t[1]=-e*o,t[2]=-h*o,t[3]=i*o,t[4]=(h*s-r*n)*o,t[5]=(e*n-i*s)*o,t):null},pt=function(t){return t[0]*t[3]-t[1]*t[2]},i=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],u=i[1],l=i[2],c=i[3],f=i[4],i=i[5];return t[0]=e*a+r*u,t[1]=h*a+n*u,t[2]=e*l+r*c,t[3]=h*l+n*c,t[4]=e*f+r*i+o,t[5]=h*f+n*i+s,t},mt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*a,t[1]=h*i+n*a,t[2]=e*-a+r*i,t[3]=h*-a+n*i,t[4]=o,t[5]=s,t},gt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e*a,t[1]=h*a,t[2]=r*i,t[3]=n*i,t[4]=o,t[5]=s,t},yt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=e*a+r*i+o,t[5]=h*a+n*i+s,t},wt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t},St=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},vt=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},Mt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},Gt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},e=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},xt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},Tt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},_t=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},It=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],t=t[5],o=s[0],a=s[1],u=s[2],l=s[3],c=s[4],s=s[5];return Math.abs(i-o)<=vh*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(e-a)<=vh*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(h-u)<=vh*Math.max(1,Math.abs(h),Math.abs(u))&&Math.abs(r-l)<=vh*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-c)<=vh*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},h=function(){var t=new Mh(9);return Mh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Ct=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Et=function(t){var s=new Mh(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},Rt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Pt=function(t,s,i,e,h,r,n,o,a){var u=new Mh(9);return u[0]=t,u[1]=s,u[2]=i,u[3]=e,u[4]=h,u[5]=r,u[6]=n,u[7]=o,u[8]=a,u},At=function(t,s,i,e,h,r,n,o,a,u){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t[8]=u,t},Ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Dt=function(t,s){var i,e,h;return t===s?(i=s[1],e=s[2],h=s[5],t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=h):(t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8]),t},Ot=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],l=(s=s[8])*n-o*u,c=-s*r+o*a,f=u*r-n*a,d=i*l+e*c+h*f;return d?(t[0]=l*(d=1/d),t[1]=(-s*e+h*u)*d,t[2]=(o*e-h*n)*d,t[3]=c*d,t[4]=(s*i-h*a)*d,t[5]=(-o*i+h*r)*d,t[6]=f*d,t[7]=(-u*i+e*a)*d,t[8]=(n*i-e*r)*d,t):null},Lt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],s=s[8];return t[0]=n*s-o*u,t[1]=h*u-e*s,t[2]=e*o-h*n,t[3]=o*a-r*s,t[4]=i*s-h*a,t[5]=h*r-i*o,t[6]=r*u-n*a,t[7]=e*a-i*u,t[8]=i*n-e*r,t},kt=function(t){var s=t[0],i=t[3],e=t[4],h=t[5],r=t[6],n=t[7],o=t[8];return s*(o*e-h*n)+t[1]*(-o*i+h*r)+t[2]*(n*i-e*r)},r=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],s=s[8],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],w=i[7],i=i[8];return t[0]=c*e+f*n+d*u,t[1]=c*h+f*o+d*l,t[2]=c*r+f*a+d*s,t[3]=p*e+m*n+g*u,t[4]=p*h+m*o+g*l,t[5]=p*r+m*a+g*s,t[6]=y*e+w*n+i*u,t[7]=y*h+w*o+i*l,t[8]=y*r+w*a+i*s,t},Nt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],s=s[8],c=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=c*e+i*n+u,t[7]=c*h+i*o+l,t[8]=c*r+i*a+s,t},Bt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],s=s[8],c=Math.sin(i),i=Math.cos(i);return t[0]=i*e+c*n,t[1]=i*h+c*o,t[2]=i*r+c*a,t[3]=i*n-c*e,t[4]=i*o-c*h,t[5]=i*a-c*r,t[6]=u,t[7]=l,t[8]=s,t},Wt=function(t,s,i){var e=i[0],i=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=i*s[3],t[4]=i*s[4],t[5]=i*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},jt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Ht=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Vt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ut=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},zt=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(u=i+i),r=(n=s[1])*u,n=n*(l=n+n),o=e*u,a=e*l,u=(s=s[3])*u,l=s*l,s=s*h;return t[0]=1-n-(e=e*h),t[3]=r-s,t[6]=o+l,t[1]=r+s,t[4]=1-i-e,t[7]=a-u,t[2]=o-l,t[5]=a+u,t[8]=1-i-n,t},Jt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,w=i*a-h*n,S=i*u-r*n,b=e*a-h*o,v=e*u-r*o,M=h*u-r*a,G=l*m-c*p,x=l*g-f*p,T=c*g-f*m;return(d=y*(f=f*(s=s[15])-d*g)-w*(c=c*s-d*m)+S*T+b*(l=l*s-d*p)-v*x+M*G)?(t[0]=(o*f-a*c+u*T)*(d=1/d),t[1]=(a*l-n*f-u*x)*d,t[2]=(n*c-o*l+u*G)*d,t[3]=(h*c-e*f-r*T)*d,t[4]=(i*f-h*l+r*x)*d,t[5]=(e*l-i*c-r*G)*d,t[6]=(m*M-g*v+s*b)*d,t[7]=(g*S-p*M-s*w)*d,t[8]=(p*v-m*S+s*y)*d,t):null},qt=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},$t=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Xt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Kt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},n=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Yt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Zt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Qt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},ts=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],u=t[7],t=t[8],l=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7],s=s[8];return Math.abs(i-l)<=vh*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(e-c)<=vh*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(h-f)<=vh*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(r-d)<=vh*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-p)<=vh*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(o-m)<=vh*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=vh*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(u-y)<=vh*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},ss=function(){var t=new Mh(16);return Mh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},is=function(t){var s=new Mh(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},hs=function(t,s,i,e,h,r,n,o,a,u,l,c,f,d,p,m){var g=new Mh(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=h,g[5]=r,g[6]=n,g[7]=o,g[8]=a,g[9]=u,g[10]=l,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},rs=function(t,s,i,e,h,r,n,o,a,u,l,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t[8]=u,t[9]=l,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},p=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ns=function(t,s){var i,e,h,r,n,o;return t===s?(i=s[1],e=s[2],h=s[3],r=s[6],n=s[7],o=s[11],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=h,t[13]=n,t[14]=o):(t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15]),t},os=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,w=i*a-h*n,S=i*u-r*n,b=e*a-h*o,v=e*u-r*o,M=h*u-r*a,G=l*m-c*p,x=l*g-f*p,T=l*(s=s[15])-d*p,_=c*g-f*m,I=c*s-d*m,C=f*s-d*g,E=y*C-w*I+S*_+b*T-v*x+M*G;return E?(t[0]=(o*C-a*I+u*_)*(E=1/E),t[1]=(h*I-e*C-r*_)*E,t[2]=(m*M-g*v+s*b)*E,t[3]=(f*v-c*M-d*b)*E,t[4]=(a*T-n*C-u*x)*E,t[5]=(i*C-h*T+r*x)*E,t[6]=(g*S-p*M-s*w)*E,t[7]=(l*M-f*S+d*w)*E,t[8]=(n*I-o*T+u*G)*E,t[9]=(e*T-i*I-r*G)*E,t[10]=(p*v-m*S+s*y)*E,t[11]=(c*S-l*v-d*y)*E,t[12]=(o*x-n*_-a*G)*E,t[13]=(i*_-e*x+h*G)*E,t[14]=(m*w-p*b-g*y)*E,t[15]=(l*b-c*w+f*y)*E,t):null},as=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,w=i*a-h*n,S=i*u-r*n,b=e*a-h*o,v=e*u-r*o,M=h*u-r*a,G=l*m-c*p,x=l*g-f*p,T=l*(s=s[15])-d*p,_=c*g-f*m,I=c*s-d*m,C=f*s-d*g;return t[0]=o*C-a*I+u*_,t[1]=h*I-e*C-r*_,t[2]=m*M-g*v+s*b,t[3]=f*v-c*M-d*b,t[4]=a*T-n*C-u*x,t[5]=i*C-h*T+r*x,t[6]=g*S-p*M-s*w,t[7]=l*M-f*S+d*w,t[8]=n*I-o*T+u*G,t[9]=e*T-i*I-r*G,t[10]=p*v-m*S+s*y,t[11]=c*S-l*v-d*y,t[12]=o*x-n*_-a*G,t[13]=i*_-e*x+h*G,t[14]=m*w-p*b-g*y,t[15]=l*b-c*w+f*y,t},us=function(t){var s=t[0],i=t[1],e=t[2],h=t[4],r=t[5],n=t[6],o=t[8],a=t[9],u=t[10],l=t[12],c=t[13],f=t[14],d=s*r-i*h,p=s*n-e*h,m=i*n-e*r,g=o*c-a*l,y=o*f-u*l,w=a*f-u*c;return t[7]*(s*w-i*y+e*g)-t[3]*(h*w-r*y+n*g)+t[15]*(o*m-a*p+u*d)-t[11]*(l*m-c*p+f*d)},o=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],s=s[15],w=i[0],S=i[1],b=i[2],v=i[3];return t[0]=w*e+S*o+b*c+v*m,t[1]=w*h+S*a+b*f+v*g,t[2]=w*r+S*u+b*d+v*y,t[3]=w*n+S*l+b*p+v*s,t[4]=(w=i[4])*e+(S=i[5])*o+(b=i[6])*c+(v=i[7])*m,t[5]=w*h+S*a+b*f+v*g,t[6]=w*r+S*u+b*d+v*y,t[7]=w*n+S*l+b*p+v*s,t[8]=(w=i[8])*e+(S=i[9])*o+(b=i[10])*c+(v=i[11])*m,t[9]=w*h+S*a+b*f+v*g,t[10]=w*r+S*u+b*d+v*y,t[11]=w*n+S*l+b*p+v*s,t[12]=(w=i[12])*e+(S=i[13])*o+(b=i[14])*c+(v=i[15])*m,t[13]=w*h+S*a+b*f+v*g,t[14]=w*r+S*u+b*d+v*y,t[15]=w*n+S*l+b*p+v*s,t},ls=function(t,s,i){var e,h,r,n,o,a,u,l,c,f,d,p,m=i[0],g=i[1],i=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*i+s[12],t[13]=s[1]*m+s[5]*g+s[9]*i+s[13],t[14]=s[2]*m+s[6]*g+s[10]*i+s[14],t[15]=s[3]*m+s[7]*g+s[11]*i+s[15]):(e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=u,t[7]=l,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*i+s[12],t[13]=h*m+a*g+f*i+s[13],t[14]=r*m+u*g+d*i+s[14],t[15]=n*m+l*g+p*i+s[15]),t},cs=function(t,s,i){var e=i[0],h=i[1],i=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*h,t[5]=s[5]*h,t[6]=s[6]*h,t[7]=s[7]*h,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fs=function(t,s,i,e){var h,r,n,o,a,u,l,c,f,d,p,m,g,y,w,S,b,v,M,G,x=e[0],T=e[1],e=e[2],_=Math.hypot(x,T,e);return _<vh?null:(x*=_=1/_,T*=_,e*=_,_=Math.sin(i),i=Math.cos(i),r=s[0],n=s[1],o=s[2],a=s[3],l=s[5],c=s[6],f=s[7],p=s[9],m=s[10],g=s[11],w=x*T*(h=1-i)-e*_,S=T*T*h+i,b=e*T*h+x*_,v=x*e*h+T*_,M=T*e*h-x*_,G=e*e*h+i,t[0]=r*(i=x*x*h+i)+(u=s[4])*(y=T*x*h+e*_)+(d=s[8])*(e=e*x*h-T*_),t[1]=n*i+l*y+p*e,t[2]=o*i+c*y+m*e,t[3]=a*i+f*y+g*e,t[4]=r*w+u*S+d*b,t[5]=n*w+l*S+p*b,t[6]=o*w+c*S+m*b,t[7]=a*w+f*S+g*b,t[8]=r*v+u*M+d*G,t[9]=n*v+l*M+p*G,t[10]=o*v+c*M+m*G,t[11]=a*v+f*M+g*G,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},ds=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[4],r=s[5],n=s[6],o=s[7],a=s[8],u=s[9],l=s[10],c=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=h*i+a*e,t[5]=r*i+u*e,t[6]=n*i+l*e,t[7]=o*i+c*e,t[8]=a*i-h*e,t[9]=u*i-r*e,t[10]=l*i-n*e,t[11]=c*i-o*e,t},ps=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],r=s[1],n=s[2],o=s[3],a=s[8],u=s[9],l=s[10],c=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i-a*e,t[1]=r*i-u*e,t[2]=n*i-l*e,t[3]=o*i-c*e,t[8]=h*e+a*i,t[9]=r*e+u*i,t[10]=n*e+l*i,t[11]=o*e+c*i,t},ms=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],r=s[1],n=s[2],o=s[3],a=s[4],u=s[5],l=s[6],c=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i+a*e,t[1]=r*i+u*e,t[2]=n*i+l*e,t[3]=o*i+c*e,t[4]=a*i-h*e,t[5]=u*i-r*e,t[6]=l*i-n*e,t[7]=c*i-o*e,t},gs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ys=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ws=function(t,s,i){var e,h=i[0],r=i[1],i=i[2],n=Math.hypot(h,r,i);return n<vh?null:(h*=n=1/n,r*=n,i*=n,n=Math.sin(s),s=Math.cos(s),t[0]=h*h*(e=1-s)+s,t[1]=r*h*e+i*n,t[2]=i*h*e-r*n,t[3]=0,t[4]=h*r*e-i*n,t[5]=r*r*e+s,t[6]=i*r*e+h*n,t[7]=0,t[8]=h*i*e+r*n,t[9]=r*i*e-h*n,t[10]=i*i*e+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},Ss=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},bs=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},vs=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f=function(t,s,i){var e=s[0],h=s[2],r=h+h,n=e*(l=e+e),o=e*(c=(u=s[1])+u),e=e*r,a=u*c,u=u*r,l=(s=s[3])*l,c=s*c,s=s*r;return t[0]=1-(a+(h=h*r)),t[1]=o+s,t[2]=e-c,t[3]=0,t[4]=o-s,t[5]=1-(n+h),t[6]=u+l,t[7]=0,t[8]=e+c,t[9]=u-l,t[10]=1-(n+a),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ms=function(t,s){var i=new Mh(3),e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=e*e+h*h+r*r+n*n;return 0<c?(i[0]=2*(o*n+l*e+a*r-u*h)/c,i[1]=2*(a*n+l*h+u*e-o*r)/c,i[2]=2*(u*n+l*r+o*h-a*e)/c):(i[0]=2*(o*n+l*e+a*r-u*h),i[1]=2*(a*n+l*h+u*e-o*r),i[2]=2*(u*n+l*r+o*h-a*e)),f(t,s,i),t},a=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},d=function(t,s){var i=s[0],e=s[4],h=s[5],r=s[6],n=s[8],o=s[9],a=s[10];return t[0]=Math.hypot(i,s[1],s[2]),t[1]=Math.hypot(e,h,r),t[2]=Math.hypot(n,o,a),t},u=function(t,s){var i=new Mh(3),e=(d(i,s),1/i[0]),h=s[0]*e,r=s[1]*(l=1/i[1]),n=s[2]*(i=1/i[2]),o=s[4]*e,a=s[5]*l,u=s[6]*i,e=s[8]*e,l=s[9]*l,c=0;return 0<(i=h+a+(s=s[10]*i))?(c=2*Math.sqrt(1+i),t[3]=.25*c,t[0]=(u-l)/c,t[1]=(e-n)/c,t[2]=(r-o)/c):a<h&&s<h?(c=2*Math.sqrt(1+h-a-s),t[3]=(u-l)/c,t[0]=.25*c,t[1]=(r+o)/c,t[2]=(e+n)/c):s<a?(c=2*Math.sqrt(1+a-h-s),t[3]=(e-n)/c,t[0]=(r+o)/c,t[1]=.25*c,t[2]=(u+l)/c):(c=2*Math.sqrt(1+s-h-a),t[3]=(r-o)/c,t[0]=(e+n)/c,t[1]=(u+l)/c,t[2]=.25*c),t},Gs=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var s=e[0],h=e[1],r=e[2],n=e[4],o=e[5],a=e[6],u=e[8],l=e[9],e=e[10],c=(i[0]=Math.hypot(s,h,r),i[1]=Math.hypot(n,o,a),i[2]=Math.hypot(u,l,e),1/i[0]),f=1/i[1],s=s*c,h=h*f,r=r*(i=1/i[2]),n=n*c,a=a*i,u=u*c,c=l*f,l=e*i,e=0;return 0<(f=s+(o=o*f)+l)?(e=2*Math.sqrt(1+f),t[3]=.25*e,t[0]=(a-c)/e,t[1]=(u-r)/e,t[2]=(h-n)/e):o<s&&l<s?(e=2*Math.sqrt(1+s-o-l),t[3]=(a-c)/e,t[0]=.25*e,t[1]=(h+n)/e,t[2]=(u+r)/e):l<o?(e=2*Math.sqrt(1+o-s-l),t[3]=(u-r)/e,t[0]=(h+n)/e,t[1]=.25*e,t[2]=(a+c)/e):(e=2*Math.sqrt(1+l-s-o),t[3]=(h-n)/e,t[0]=(u+r)/e,t[1]=(a+c)/e,t[2]=.25*e),t},xs=function(t,s,i,e){var h=(n=s[0])*(l=n+n),r=n*(c=(a=s[1])+a),n=n*(f=(u=s[2])+u),o=a*c,a=a*f,u=u*f,l=(s=s[3])*l,c=s*c,s=s*f,f=e[0],d=e[1],e=e[2];return t[0]=(1-(o+u))*f,t[1]=(r+s)*f,t[2]=(n-c)*f,t[3]=0,t[4]=(r-s)*d,t[5]=(1-(h+u))*d,t[6]=(a+l)*d,t[7]=0,t[8]=(n+c)*e,t[9]=(a-l)*e,t[10]=(1-(h+o))*e,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ts=function(t,s,i,e,h){var r=(o=s[0])*(c=o+o),n=o*(f=(u=s[1])+u),o=o*(d=(l=s[2])+l),a=u*f,u=u*d,l=l*d,c=(s=s[3])*c,f=s*f,s=s*d,d=e[0],p=e[1],e=e[2],m=h[0],g=h[1],h=h[2],y=(1-(a+l))*d,w=(n+s)*d,d=(o-f)*d,n=(n-s)*p,s=(1-(r+l))*p,l=(u+c)*p,p=(o+f)*e,o=(u-c)*e,f=(1-(r+a))*e;return t[0]=y,t[1]=w,t[2]=d,t[3]=0,t[4]=n,t[5]=s,t[6]=l,t[7]=0,t[8]=p,t[9]=o,t[10]=f,t[11]=0,t[12]=i[0]+m-(y*m+n*g+p*h),t[13]=i[1]+g-(w*m+s*g+o*h),t[14]=i[2]+h-(d*m+l*g+f*h),t[15]=1,t},_s=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(u=i+i),r=(n=s[1])*u,n=n*(l=n+n),o=e*u,a=e*l,u=(s=s[3])*u,l=s*l,s=s*h;return t[0]=1-n-(e=e*h),t[1]=r+s,t[2]=o-l,t[3]=0,t[4]=r-s,t[5]=1-i-e,t[6]=a+u,t[7]=0,t[8]=o+l,t[9]=a-u,t[10]=1-i-n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Is=function(t,s,i,e,h,r,n){var o=1/(i-s),a=1/(h-e),u=1/(r-n);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(h+e)*a,t[10]=(n+r)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r*2*u,t[15]=0,t},l=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=(h+e)*(i=1/(e-h)),t[14]=2*h*e*i):(t[10]=-1,t[14]=-2*e),t},Cs=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=h*(i=1/(e-h)),t[14]=h*e*i):(t[10]=-1,t[14]=-e),t},Es=function(t,s,i,e){var h=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),n=Math.tan(s.leftDegrees*Math.PI/180),o=2/(n+(s=Math.tan(s.rightDegrees*Math.PI/180))),a=2/(h+r);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(n-s)*o*.5,t[9]=(h-r)*a*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},c=function(t,s,i,e,h,r,n){var o=1/(s-i),a=1/(e-h),u=1/(r-n);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=(n+r)*u,t[15]=1,t},Rs=function(t,s,i,e,h,r,n){var o=1/(s-i),a=1/(e-h),n=1/(r-n);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=r*n,t[15]=1,t},Ps=function(t,s,i,e){var h,r,n,o,a=s[0],u=s[1],s=s[2],l=e[0],c=e[1],e=e[2],f=i[0],d=i[1],i=i[2];return Math.abs(a-f)<vh&&Math.abs(u-d)<vh&&Math.abs(s-i)<vh?p(t):(f=a-f,d=u-d,i=s-i,h=c*(i*=o=1/Math.hypot(f,d,i))-e*(d*=o),e=e*(f*=o)-l*i,l=l*d-c*f,(o=Math.hypot(h,e,l))?(h*=o=1/o,e*=o,l*=o):l=e=h=0,c=d*l-i*e,r=i*h-f*l,n=f*e-d*h,(o=Math.hypot(c,r,n))?(c*=o=1/o,r*=o,n*=o):n=r=c=0,t[0]=h,t[1]=c,t[2]=f,t[3]=0,t[4]=e,t[5]=r,t[6]=d,t[7]=0,t[8]=l,t[9]=n,t[10]=i,t[11]=0,t[12]=-(h*a+e*u+l*s),t[13]=-(c*a+r*u+n*s),t[14]=-(f*a+d*u+i*s),t[15]=1,t)},As=function(t,s,i,e){var h=s[0],r=s[1],s=s[2],n=e[0],o=e[1],e=e[2],a=h-i[0],u=r-i[1],l=a*a+u*u+(i=s-i[2])*i,c=(0<l&&(a*=l=1/Math.sqrt(l),u*=l,i*=l),o*i-e*u);return 0<(l=c*c+(e=e*a-n*i)*e+(n=n*u-o*a)*n)&&(c*=l=1/Math.sqrt(l),e*=l,n*=l),t[0]=c,t[1]=e,t[2]=n,t[3]=0,t[4]=u*n-i*e,t[5]=i*c-a*n,t[6]=a*e-u*c,t[7]=0,t[8]=a,t[9]=u,t[10]=i,t[11]=0,t[12]=h,t[13]=r,t[14]=s,t[15]=1,t},Fs=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Ds=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Os=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Ls=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},ks=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Ns=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},Bs=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Ws=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],u=t[7],l=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],t=t[15],y=s[0],w=s[1],S=s[2],b=s[3],v=s[4],M=s[5],G=s[6],x=s[7],T=s[8],_=s[9],I=s[10],C=s[11],E=s[12],R=s[13],P=s[14],s=s[15];return Math.abs(i-y)<=vh*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(e-w)<=vh*Math.max(1,Math.abs(e),Math.abs(w))&&Math.abs(h-S)<=vh*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(r-b)<=vh*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(n-v)<=vh*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(o-M)<=vh*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(a-G)<=vh*Math.max(1,Math.abs(a),Math.abs(G))&&Math.abs(u-x)<=vh*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(l-T)<=vh*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(c-_)<=vh*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(f-I)<=vh*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-C)<=vh*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-E)<=vh*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(m-R)<=vh*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(g-P)<=vh*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},m=function(){var t=new Mh(3);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},js=function(t){var s=new Mh(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Hs=function(t){var s=t[0];return Math.hypot(s,t[1],t[2])},g=function(t,s,i){var e=new Mh(3);return e[0]=t,e[1]=s,e[2]=i,e},Vs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Us=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},zs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Js=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},qs=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},$s=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},Xs=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Ks=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Ys=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Zs=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},Qs=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ti=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},si=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ii=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2])},ei=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e+(s=s[2]-t[2])*s},hi=function(t){var s=t[0],i=t[1];return s*s+i*i+(t=t[2])*t},ri=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},ni=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},y=function(t,s){var i=s[0],e=s[1],h=s[2];return 0<(i=i*i+e*e+h*h)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},w=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},S=function(t,s,i){var e=s[0],h=s[1],s=s[2],r=i[0],n=i[1],i=i[2];return t[0]=h*i-s*n,t[1]=s*r-e*i,t[2]=e*n-h*r,t},oi=function(t,s,i,e){var h=s[0],r=s[1],s=s[2];return t[0]=h+e*(i[0]-h),t[1]=r+e*(i[1]-r),t[2]=s+e*(i[2]-s),t},ai=function(t,s,i,e){var h=Math.acos(Math.min(Math.max(w(s,i),-1),1)),r=Math.sin(h),n=Math.sin((1-e)*h)/r,e=Math.sin(e*h)/r;return t[0]=n*s[0]+e*i[0],t[1]=n*s[1]+e*i[1],t[2]=n*s[2]+e*i[2],t},ui=function(t,s,i,e,h,r){var n=r*r,o=n*(2*r-3)+1,a=n*(r-2)+r,u=n*(r-1);return t[0]=s[0]*o+i[0]*a+e[0]*u+h[0]*(n=n*(3-2*r)),t[1]=s[1]*o+i[1]*a+e[1]*u+h[1]*n,t[2]=s[2]*o+i[2]*a+e[2]*u+h[2]*n,t},li=function(t,s,i,e,h,r){var n=1-r,o=n*n,a=r*r,u=o*n;return t[0]=s[0]*u+i[0]*(o=3*r*o)+e[0]*(n=3*a*n)+h[0]*(a=a*r),t[1]=s[1]*u+i[1]*o+e[1]*n+h[1]*a,t[2]=s[2]*u+i[2]*o+e[2]*n+h[2]*a,t},ci=function(t,s){s=s||1;var i=2*Dh()*Math.PI,e=2*Dh()-1,h=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*h,t[1]=Math.sin(i)*h,t[2]=e*s,t},fi=function(t,s,i){var e=s[0],h=s[1],s=s[2],r=i[3]*e+i[7]*h+i[11]*s+i[15];return t[0]=(i[0]*e+i[4]*h+i[8]*s+i[12])/(r=r||1),t[1]=(i[1]*e+i[5]*h+i[9]*s+i[13])/r,t[2]=(i[2]*e+i[6]*h+i[10]*s+i[14])/r,t},di=function(t,s,i){var e=s[0],h=s[1],s=s[2];return t[0]=e*i[0]+h*i[3]+s*i[6],t[1]=e*i[1]+h*i[4]+s*i[7],t[2]=e*i[2]+h*i[5]+s*i[8],t},pi=function(t,s,i){var e=i[0],h=i[1],r=s[0],n=s[1],o=h*(s=s[2])-(c=i[2])*n,a=c*r-e*s,u=e*n-h*r,l=h*u-c*a,c=c*o-e*u,e=e*a-h*o;return a*=h=2*i[3],u*=h,c*=2,e*=2,t[0]=r+(o*=h)+(l*=2),t[1]=n+a+c,t[2]=s+u+e,t},mi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[0],r[1]=h[1]*Math.cos(e)-h[2]*Math.sin(e),r[2]=h[1]*Math.sin(e)+h[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},gi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[2]*Math.sin(e)+h[0]*Math.cos(e),r[1]=h[1],r[2]=h[2]*Math.cos(e)-h[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},yi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[0]*Math.cos(e)-h[1]*Math.sin(e),r[1]=h[0]*Math.sin(e)+h[1]*Math.cos(e),r[2]=h[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},wi=function(t,s){var i=t[0],e=t[1],h=t[2],r=s[0],n=s[1],o=s[2],e=(i=Math.sqrt((i*i+e*e+h*h)*(r*r+n*n+o*o)))&&w(t,s)/i;return Math.acos(Math.min(Math.max(e,-1),1))},Si=function(t){return t[0]=0,t[1]=0,t[2]=0,t},bi=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},vi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},Mi=function(t,s){var i=t[0],e=t[1],t=t[2],h=s[0],r=s[1],s=s[2];return Math.abs(i-h)<=vh*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-r)<=vh*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},b=function(){var t=new Mh(4);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},Gi=function(t){var s=new Mh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},xi=function(t,s,i,e){var h=new Mh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},Ti=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},_i=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},Ii=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Ci=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Ei=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Ri=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Pi=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ai=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Fi=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Di=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Oi=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Li=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},ki=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Ni=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2],s[3]-t[3])},Bi=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],h=s[2]-t[2];return i*i+e*e+h*h+(s=s[3]-t[3])*s},v=function(t){var s=t[0];return Math.hypot(s,t[1],t[2],t[3])},M=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e+(t=t[3])*t},Wi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},ji=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Hi=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*i+e*e+h*h+(s=s[3])*s;return 0<r&&(r=1/Math.sqrt(r)),t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=s*r,t},G=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Vi=function(t,s,i,e){var h=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],n=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],i=i[2]*e[3]-i[3]*e[2],e=s[0],u=s[1],l=s[2],s=s[3];return t[0]=u*i-l*a+s*o,t[1]=-e*i+l*n-s*r,t[2]=e*a-u*n+s*h,t[3]=-e*o+u*r-l*h,t},Ui=function(t,s,i,e){var h=s[0],r=s[1],n=s[2],s=s[3];return t[0]=h+e*(i[0]-h),t[1]=r+e*(i[1]-r),t[2]=n+e*(i[2]-n),t[3]=s+e*(i[3]-s),t},zi=function(t,s){var i,e,h,r,n,o;for(s=s||1;1<=(n=(i=2*Dh()-1)*i+(e=2*Dh()-1)*e););for(;1<=(o=(h=2*Dh()-1)*h+(r=2*Dh()-1)*r););var a=Math.sqrt((1-n)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*h*a,t[3]=s*r*a,t},Ji=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3];return t[0]=i[0]*e+i[4]*h+i[8]*r+i[12]*s,t[1]=i[1]*e+i[5]*h+i[9]*r+i[13]*s,t[2]=i[2]*e+i[6]*h+i[10]*r+i[14]*s,t[3]=i[3]*e+i[7]*h+i[11]*r+i[15]*s,t},qi=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=i[0],o=i[1],a=i[2],u=(i=i[3])*e+o*r-a*h,l=i*h+a*e-n*r,c=i*r+n*h-o*e;return t[0]=u*i+(e=-n*e-o*h-a*r)*-n+l*-a-c*-o,t[1]=l*i+e*-o+c*-n-u*-a,t[2]=c*i+e*-a+u*-o-l*-n,t[3]=s[3],t},$i=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},Xi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Ki=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Yi=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],r=s[0],n=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=vh*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-n)<=vh*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-o)<=vh*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},x=function(){var t=new Mh(4);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Zi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},T=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},Qi=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return vh<e?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){return t=zh(t,s),Math.acos(2*t*t-1)},se=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*i+s*n+h*a-r*o,t[1]=h*i+s*o+r*n-e*a,t[2]=r*i+s*a+e*o-h*n,t[3]=s*i-e*n-h*o-r*a,t},_=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+s*n,t[1]=h*i+r*n,t[2]=r*i-h*n,t[3]=s*i-e*n,t},I=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i-r*n,t[1]=h*i+s*n,t[2]=r*i+e*n,t[3]=s*i-h*n,t},C=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+h*n,t[1]=h*i-e*n,t[2]=r*i+s*n,t[3]=s*i-r*n,t},ie=function(t,s){var i=s[0],e=s[1],s=s[2];return t[0]=i,t[1]=e,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-s*s)),t},E=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],r=Math.sqrt(i*i+e*e+h*h),s=Math.exp(s),n=0<r?s*Math.sin(r)/r:0;return t[0]=i*n,t[1]=e*n,t[2]=h*n,t[3]=s*Math.cos(r),t},R=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],r=0<(r=Math.sqrt(i*i+e*e+h*h))?Math.atan2(r,s)/r:0;return t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=.5*Math.log(i*i+e*e+h*h+s*s),t},ee=function(t,s,i){return R(t,s),Uh(t,t,i),E(t,t),t},P=function(t,s,i,e){var h,r,n=s[0],o=s[1],a=s[2],s=s[3],u=i[0],l=i[1],c=i[2],f=n*u+o*l+a*c+s*(i=i[3]);return f<0&&(f=-f,u=-u,l=-l,c=-c,i=-i),f=vh<1-f?(f=Math.acos(f),h=Math.sin(f),r=Math.sin((1-e)*f)/h,Math.sin(e*f)/h):(r=1-e,e),t[0]=r*n+f*u,t[1]=r*o+f*l,t[2]=r*a+f*c,t[3]=r*s+f*i,t},he=function(t){var s=Dh(),i=Dh(),e=Dh(),h=Math.sqrt(1-s),s=Math.sqrt(s);return t[0]=h*Math.sin(2*Math.PI*i),t[1]=h*Math.cos(2*Math.PI*i),t[2]=s*Math.sin(2*Math.PI*e),t[3]=s*Math.cos(2*Math.PI*e),t},re=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*i+e*e+h*h+(s=s[3])*s;return t[0]=-i*(r=r?1/r:0),t[1]=-e*r,t[2]=-h*r,t[3]=s*r,t},ne=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},A=function(t,s){var i,e,h,r=s[0]+s[4]+s[8];return 0<r?(h=Math.sqrt(r+1),t[3]=.5*h,t[0]=(s[5]-s[7])*(h=.5/h),t[1]=(s[6]-s[2])*h,t[2]=(s[1]-s[3])*h):(i=(1+(r=s[3*(r=s[4]>s[0]?1:0)+r]<s[8]?2:r))%3,e=(2+r)%3,h=Math.sqrt(s[3*r+r]-s[3*i+i]-s[3*e+e]+1),t[r]=.5*h,t[3]=(s[3*i+e]-s[3*e+i])*(h=.5/h),t[i]=(s[3*i+r]+s[3*r+i])*h,t[e]=(s[3*e+r]+s[3*r+e])*h),t},oe=function(t,s,i,e){var h=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Oh,r=Math.PI/360,n=(e*=r,i*=r,Math.sin(s*=r)),o=Math.cos(s),a=Math.sin(i),u=Math.cos(i),l=Math.sin(e),c=Math.cos(e);switch(h){case"xyz":t[0]=n*u*c+o*a*l,t[1]=o*a*c-n*u*l,t[2]=o*u*l+n*a*c,t[3]=o*u*c-n*a*l;break;case"xzy":t[0]=n*u*c-o*a*l,t[1]=o*a*c-n*u*l,t[2]=o*u*l+n*a*c,t[3]=o*u*c+n*a*l;break;case"yxz":t[0]=n*u*c+o*a*l,t[1]=o*a*c-n*u*l,t[2]=o*u*l-n*a*c,t[3]=o*u*c+n*a*l;break;case"yzx":t[0]=n*u*c+o*a*l,t[1]=o*a*c+n*u*l,t[2]=o*u*l-n*a*c,t[3]=o*u*c-n*a*l;break;case"zxy":t[0]=n*u*c-o*a*l,t[1]=o*a*c+n*u*l,t[2]=o*u*l+n*a*c,t[3]=o*u*c-n*a*l;break;case"zyx":t[0]=n*u*c-o*a*l,t[1]=o*a*c+n*u*l,t[2]=o*u*l-n*a*c,t[3]=o*u*c+n*a*l;break;default:throw new Error("Unknown angle order "+h)}return t},ae=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},ue=function(t,s){return Math.abs(G(t,s))>=1-vh},le=function(){var t=new Mh(8);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},ce=function(t){var s=new Mh(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},fe=function(t,s,i,e,h,r,n,o){var a=new Mh(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=h,a[5]=r,a[6]=n,a[7]=o,a},de=function(t,s,i,e,h,r,n){var o=new Mh(8),h=(o[0]=t,o[1]=s,o[2]=i,o[3]=e,.5*h),r=.5*r,n=.5*n;return o[4]=h*e+r*i-n*s,o[5]=r*e+n*t-h*i,o[6]=n*e+h*s-r*t,o[7]=-h*t-r*s-n*i,o},F=function(t,s,i){var e=.5*i[0],h=.5*i[1],i=.5*i[2],r=s[0],n=s[1],o=s[2],s=s[3];return t[0]=r,t[1]=n,t[2]=o,t[3]=s,t[4]=e*s+h*o-i*n,t[5]=h*s+i*r-e*o,t[6]=i*s+e*n-h*r,t[7]=-e*r-h*n-i*o,t},pe=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},me=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},ge=function(t,s){var i=x(),e=(u(i,s),new Mh(3));return a(e,s),F(t,i,e),t},D=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},ye=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},we=function(t,s,i,e,h,r,n,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t},Se=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},be=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},ve=function(t,s){var i=s[4],e=s[5],h=s[6],r=s[7],n=-s[0],o=-s[1],a=-s[2],s=s[3];return t[0]=2*(i*s+r*n+e*a-h*o),t[1]=2*(e*s+r*o+h*n-i*a),t[2]=2*(h*s+r*a+i*o-e*n),t},Me=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=.5*i[0],a=.5*i[1],i=.5*i[2],u=s[4],l=s[5],c=s[6],s=s[7];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=n*o+h*i-r*a+u,t[5]=n*a+r*o-e*i+l,t[6]=n*i+e*a-h*o+c,t[7]=-e*o-h*a-r*i+s,t},Ge=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=o*n+(d=s[7])*e+a*r-u*h,c=a*n+d*h+u*e-o*r,f=u*n+d*r+o*h-a*e,d=d*n-o*e-a*h-u*r;return _(t,s,i),e=t[0],t[4]=l*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-l*r,t[6]=f*n+d*r+l*h-c*e,t[7]=d*n-l*e-c*h-f*r,t},xe=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=o*n+(d=s[7])*e+a*r-u*h,c=a*n+d*h+u*e-o*r,f=u*n+d*r+o*h-a*e,d=d*n-o*e-a*h-u*r;return I(t,s,i),e=t[0],t[4]=l*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-l*r,t[6]=f*n+d*r+l*h-c*e,t[7]=d*n-l*e-c*h-f*r,t},Te=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=o*n+(d=s[7])*e+a*r-u*h,c=a*n+d*h+u*e-o*r,f=u*n+d*r+o*h-a*e,d=d*n-o*e-a*h-u*r;return C(t,s,i),e=t[0],t[4]=l*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-l*r,t[6]=f*n+d*r+l*h-c*e,t[7]=d*n-l*e-c*h-f*r,t},_e=function(t,s,i){var e=i[0],h=i[1],r=i[2],i=i[3],n=s[0],o=s[1],a=s[2],u=s[3];return t[0]=n*i+u*e+o*r-a*h,t[1]=o*i+u*h+a*e-n*r,t[2]=a*i+u*r+n*h-o*e,t[3]=u*i-n*e-o*h-a*r,t[4]=(n=s[4])*i+(u=s[7])*e+(o=s[5])*r-(a=s[6])*h,t[5]=o*i+u*h+a*e-n*r,t[6]=a*i+u*r+n*h-o*e,t[7]=u*i-n*e-o*h-a*r,t},Ie=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],u=i[3];return t[0]=e*u+s*n+h*a-r*o,t[1]=h*u+s*o+r*n-e*a,t[2]=r*u+s*a+e*o-h*n,t[3]=s*u-e*n-h*o-r*a,t[4]=e*(u=i[7])+s*(n=i[4])+h*(a=i[6])-r*(o=i[5]),t[5]=h*u+s*o+r*n-e*a,t[6]=r*u+s*a+e*o-h*n,t[7]=s*u-e*n-h*o-r*a,t},Ce=function(t,s,i,e){var h,r,n,o,a,u;return Math.abs(e)<vh?D(t,s):(u=Math.hypot(i[0],i[1],i[2]),e*=.5,h=(n=Math.sin(e))*i[0]/u,r=n*i[1]/u,n=n*i[2]/u,i=Math.cos(e),u=s[0],t[0]=u*i+(e=s[3])*h+(o=s[1])*n-(a=s[2])*r,t[1]=o*i+e*r+a*h-u*n,t[2]=a*i+e*n+u*r-o*h,t[3]=e*i-u*h-o*r-a*n,t[4]=(e=s[4])*i+(u=s[7])*h+(o=s[5])*n-(a=s[6])*r,t[5]=o*i+u*r+a*h-e*n,t[6]=a*i+u*n+e*r-o*h,t[7]=u*i-e*h-o*r-a*n,t)},Ee=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},Re=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=i[4],a=i[5],u=i[6],l=i[7],c=s[4],f=s[5],d=s[6],s=s[7],p=i[0],m=i[1],g=i[2],i=i[3];return t[0]=e*i+n*p+h*g-r*m,t[1]=h*i+n*m+r*p-e*g,t[2]=r*i+n*g+e*m-h*p,t[3]=n*i-e*p-h*m-r*g,t[4]=e*l+n*o+h*u-r*a+c*i+s*p+f*g-d*m,t[5]=h*l+n*a+r*o-e*u+f*i+s*m+d*p-c*g,t[6]=r*l+n*u+e*a-h*o+d*i+s*g+c*m-f*p,t[7]=n*l-e*o-h*a-r*u+s*i-c*p-f*m-d*g,t},Pe=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},Ae=function(t,s,i,e){var h=1-e;return Kh(s,i)<0&&(e=-e),t[0]=s[0]*h+i[0]*e,t[1]=s[1]*h+i[1]*e,t[2]=s[2]*h+i[2]*e,t[3]=s[3]*h+i[3]*e,t[4]=s[4]*h+i[4]*e,t[5]=s[5]*h+i[5]*e,t[6]=s[6]*h+i[6]*e,t[7]=s[7]*h+i[7]*e,t},Fe=function(t,s){var i=Yh(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},De=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},Oe=function(t,s){var i,e,h,r,n,o,a,u,l=Yh(s);return 0<l&&(l=Math.sqrt(l),u=(i=s[0]/l)*(n=s[4])+(e=s[1]/l)*(o=s[5])+(h=s[2]/l)*(a=s[6])+(r=s[3]/l)*(s=s[7]),t[0]=i,t[1]=e,t[2]=h,t[3]=r,t[4]=(n-i*u)/l,t[5]=(o-e*u)/l,t[6]=(a-h*u)/l,t[7]=(s-r*u)/l),t},Le=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},ke=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Ne=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],t=t[7],u=s[0],l=s[1],c=s[2],f=s[3],d=s[4],p=s[5],m=s[6],s=s[7];return Math.abs(i-u)<=vh*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-l)<=vh*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(h-c)<=vh*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(r-f)<=vh*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-d)<=vh*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-p)<=vh*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=vh*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},O=function(){var t=new Mh(2);return Mh!=Float32Array&&(t[0]=0,t[1]=0),t},Be=function(t){var s=new Mh(2);return s[0]=t[0],s[1]=t[1],s},We=function(t,s){var i=new Mh(2);return i[0]=t,i[1]=s,i},je=function(t,s){return t[0]=s[0],t[1]=s[1],t},He=function(t,s,i){return t[0]=s,t[1]=i,t},Ve=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},Ue=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},ze=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},Je=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},qe=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},$e=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},Xe=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},Ke=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Ye=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Ze=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},Qe=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},th=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1])},sh=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},ih=function(t){var s=t[0];return Math.hypot(s,t[1])},eh=function(t){var s=t[0];return s*s+(t=t[1])*t},hh=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},rh=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},nh=function(t,s){var i=s[0],e=s[1];return 0<(i=i*i+e*e)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t},oh=function(t,s){return t[0]*s[0]+t[1]*s[1]},ah=function(t,s,i){return s=s[0]*i[1]-s[1]*i[0],t[0]=t[1]=0,t[2]=s,t},uh=function(t,s,i,e){var h=s[0],s=s[1];return t[0]=h+e*(i[0]-h),t[1]=s+e*(i[1]-s),t},lh=function(t,s){s=s||1;var i=2*Dh()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},ch=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s,t[1]=i[1]*e+i[3]*s,t},fh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s+i[4],t[1]=i[1]*e+i[3]*s+i[5],t},dh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[3]*s+i[6],t[1]=i[1]*e+i[4]*s+i[7],t},ph=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[4]*s+i[12],t[1]=i[1]*e+i[5]*s+i[13],t},mh=function(t,s,i,e){var h=s[0]-i[0],s=s[1]-i[1],r=Math.sin(e),e=Math.cos(e);return t[0]=h*e-s*r+i[0],t[1]=h*r+s*e+i[1],t},gh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1],h=Math.sqrt((i*i+t*t)*(e*e+s*s));return Math.acos(Math.min(Math.max(h&&(i*e+t*s)/h,-1),1))},yh=function(t){return t[0]=0,t[1]=0,t},wh=function(t){return"vec2("+t[0]+", "+t[1]+")"},Sh=function(t,s){return t[0]===s[0]&&t[1]===s[1]},bh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1];return Math.abs(i-e)<=vh*Math.max(1,Math.abs(i),Math.abs(e))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))};h,p,f,a,d,u,m,g,y,w,S,b,G,x,T,_,I,C,E,R,P,A,F,D,O,vh=1e-6,Mh="undefined"!=typeof Float32Array?Float32Array:Array,Dh=Math.random,Oh="zyx",Lh=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),kh={__proto__:null,EPSILON:vh,get m(){return Mh},S:Dh,M:Oh,G:L,T:k,equals:N},Nh=Object.freeze({__proto__:null,create:B,clone:W,_:j,identity:H,I:V,set:U,C:z,R:J,P:q,A:$,multiply:t,rotate:X,scale:K,F:Y,D:Z,O:Q,L:tt,N:st,add:it,B:s,W:et,equals:ht,j:rt,H:nt,mul:t,sub:s}),Bh=Object.freeze({__proto__:null,create:ot,clone:at,_:ut,identity:lt,I:ct,set:ft,R:dt,A:pt,multiply:i,rotate:mt,scale:gt,translate:yt,F:wt,D:St,V:bt,O:vt,L:Mt,add:Gt,B:e,j:xt,H:Tt,W:_t,equals:It,mul:i,sub:e}),Wh=Object.freeze({__proto__:null,create:h,U:Ct,clone:Et,_:Rt,I:Pt,set:At,identity:Ft,C:Dt,R:Ot,P:Lt,A:kt,multiply:r,translate:Nt,rotate:Bt,scale:Wt,V:jt,F:Ht,D:Vt,J:Ut,$:zt,X:Jt,K:qt,O:$t,L:Xt,add:Kt,B:n,j:Yt,H:Zt,W:Qt,equals:ts,mul:r,sub:n}),Gh=Object.freeze({__proto__:null,create:ss,clone:is,_:es,I:hs,set:rs,identity:p,C:ns,R:os,P:as,A:us,multiply:o,translate:ls,scale:cs,rotate:fs,Y:ds,Z:ps,tt:ms,V:gs,D:ys,F:ws,it:Ss,et:bs,ht:vs,nt:f,ot:Ms,ut:a,lt:d,ct:u,ft:Gs,dt:xs,gt:Ts,$:_s,yt:Is,St:l,perspective:l,bt:Cs,vt:Es,Mt:c,ortho:c,Gt:Rs,xt:Ps,Tt:As,O:Fs,L:Ds,add:Os,B:Ls,j:ks,H:Ns,W:Bs,equals:Ws,mul:o,sub:Ls}),Xh=Js,Zh=qs,Vh=$s,Qh=ii,tr=ei,jh=Hs,sr=hi,Fh=m(),xh=Object.freeze({__proto__:null,create:m,clone:js,length:Hs,I:g,_:Vs,set:Us,add:zs,B:Js,multiply:qs,_t:$s,ceil:Xs,floor:Ks,min:Ys,max:Zs,round:Qs,scale:ti,It:si,Ct:ii,Et:ei,Rt:hi,Pt:ri,inverse:ni,normalize:y,At:w,Ft:S,Dt:oi,Ot:ai,Lt:ui,kt:li,random:ci,Nt:fi,Bt:di,Wt:pi,Y:mi,Z:gi,tt:yi,angle:wi,jt:Si,O:bi,W:vi,equals:Mi,sub:Xh,mul:Zh,div:Vh,Ht:Qh,Vt:tr,Ut:jh,zt:sr,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||3,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Fh[0]=t[n],Fh[1]=t[n+1],Fh[2]=t[n+2],h(Fh,Fh,r),t[n]=Fh[0],t[n+1]=Fh[1],t[n+2]=Fh[2];return t}}),Xh=Ci,Zh=Ei,Vh=Ri,Qh=Ni,tr=Bi,sr=v,ir=M,Ah=b(),Hh=Object.freeze({__proto__:null,create:b,clone:Gi,I:xi,_:Ti,set:_i,add:Ii,B:Ci,multiply:Ei,_t:Ri,ceil:Pi,floor:Ai,min:Fi,max:Di,round:Oi,scale:Li,It:ki,Ct:Ni,Et:Bi,length:v,Rt:M,Pt:Wi,inverse:ji,normalize:Hi,At:G,Ft:Vi,Dt:Ui,random:zi,Nt:Ji,Wt:qi,jt:$i,O:Xi,W:Ki,equals:Yi,sub:Xh,mul:Zh,div:Vh,Ht:Qh,Vt:tr,Ut:sr,zt:ir,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||4,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Ah[0]=t[n],Ah[1]=t[n+1],Ah[2]=t[n+2],Ah[3]=t[n+3],h(Ah,Ah,r),t[n]=Ah[0],t[n+1]=Ah[1],t[n+2]=Ah[2],t[n+3]=Ah[3];return t}}),Xh=Gi,Zh=xi,Vh=Ti,Qh=_i,tr=Ii,sr=se,Uh=Li,zh=G,ir=Ui,er=Jh=v,hr=qh=M,$h=Hi,rr=Ki,Eh=m(),Rh=g(1,0,0),Ph=g(0,1,0),nr=function(t,s,i){var e=w(s,i);return e<-.999999?(S(Eh,Rh,s),jh(Eh)<1e-6&&S(Eh,Ph,s),y(Eh,Eh),T(t,Eh,Math.PI),t):.999999<e?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(S(Eh,s,i),t[0]=Eh[0],t[1]=Eh[1],t[2]=Eh[2],t[3]=1+e,$h(t,t))},Ih=x(),Ch=x(),or=function(t,s,i,e,h,r){return P(Ih,s,h,r),P(Ch,i,e,r),P(t,Ih,Ch,2*r*(1-r)),t},_h=h(),Xh=Object.freeze({__proto__:null,create:x,identity:Zi,Jt:T,qt:Qi,$t:te,multiply:se,Y:_,Z:I,tt:C,Xt:ie,exp:E,Kt:R,pow:ee,Ot:P,random:he,R:re,Yt:ne,Zt:A,Qt:oe,O:ae,clone:Xh,I:Zh,_:Vh,set:Qh,add:tr,mul:sr,scale:Uh,At:zh,Dt:ir,length:Jh,Ut:er,Rt:qh,zt:hr,normalize:$h,W:rr,equals:ue,ts:nr,ss:or,es:function(t,s,i,e){return _h[0]=i[0],_h[3]=i[1],_h[6]=i[2],_h[1]=e[0],_h[4]=e[1],_h[7]=e[2],_h[2]=-s[0],_h[5]=-s[1],_h[8]=-s[2],$h(t,A(t,_h))}}),Kh=zh,Zh=Yh=qh,Qh=Object.freeze({__proto__:null,create:le,clone:ce,I:fe,hs:de,nt:F,V:pe,F:me,U:ge,_:D,identity:ye,set:we,rs:Vh,ns:Se,os:Vh,us:be,ut:ve,translate:Me,Y:Ge,Z:xe,tt:Te,ls:_e,ds:Ie,ps:Ce,add:Ee,multiply:Re,mul:Re,scale:Pe,At:Kh,Dt:Ae,R:Fe,Yt:De,length:Jh,Ut:Jh,Rt:Yh,zt:Zh,normalize:Oe,O:Le,W:ke,equals:Ne}),tr=ih,sr=Ue,ir=ze,er=Je,hr=th,rr=sh,nr=eh,Th=O(),or=Object.freeze({__proto__:null,create:O,clone:Be,I:We,_:je,set:He,add:Ve,B:Ue,multiply:ze,_t:Je,ceil:qe,floor:$e,min:Xe,max:Ke,round:Ye,scale:Ze,It:Qe,Ct:th,Et:sh,length:ih,Rt:eh,Pt:hh,inverse:rh,normalize:nh,At:oh,Ft:ah,Dt:uh,random:lh,gs:ch,ys:fh,Bt:dh,Nt:ph,rotate:mh,angle:gh,jt:yh,O:wh,W:Sh,equals:bh,Ut:tr,sub:sr,mul:ir,div:er,Ht:hr,Vt:rr,zt:nr,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||2,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Th[0]=t[n],Th[1]=t[n+1],h(Th,Th,r),t[n]=Th[0],t[n+1]=Th[1];return t}}),globalThis.ws=kh,globalThis.ws.Ss=Nh,globalThis.ws.bs=Bh,globalThis.ws.vs=Wh,globalThis.ws.Ms=Gh,globalThis.ws.Gs=Xh,globalThis.ws.xs=Qh,globalThis.ws.Ts=or,globalThis.ws._s=xh,globalThis.ws.Is=Hh}var Th,_h,Ih,Ch,Eh,Rh,Ph,Ah,Fh,vh,Mh,Dh,Oh,Lh,kh,Nh,Bh,Wh,Gh,jh,xh,Hh,Vh,Uh,zh,Jh,qh,$h,Xh,Kh,Yh,Zh,Qh,tr,sr,ir,er,hr,rr,nr,or,D,O,L,k;{let a=function(t,s,i){var e=[0,0],h=t[1][1]-t[0][1],r=t[0][0]-t[1][0],t=h*t[0][0]+r*t[0][1],n=s[1][1]-s[0][1],o=s[0][0]-s[1][0],s=n*s[0][0]+o*s[0][1],a=h*o-n*r;return m(a,0,i=i||0)||(e[0]=(o*t-r*s)/a,e[1]=(h*s-n*t)/a),e},h=function(t,s,i,e){var h,r=s[0]-t[0],s=s[1]-t[1],n=e[0]-i[0];return n*s-(e=e[1]-i[1])*r!=0&&(h=(n*(t[1]-i[1])+e*(i[0]-t[0]))/(e*r-n*s),0<=(t=(r*(i[1]-t[1])+s*(t[0]-i[0]))/(n*s-e*r)))&&t<=1&&0<=h&&h<=1},o=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},G=function(t,s,i){return 0<o(t,s,i)},x=function(t,s,i){return 0<=o(t,s,i)},T=function(t,s,i){return o(t,s,i)<0},_=function(t,s,i){return o(t,s,i)<=0},r=function(t,s,i,e){var h,r,n;return e?(n=O,(r=D)[0]=s[0]-t[0],r[1]=s[1]-t[1],n[0]=i[0]-s[0],n[1]=i[1]-s[1],h=r[0]*n[0]+r[1]*n[1],r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),Math.acos(h/(r*n))<e):0===o(t,s,i)},I=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},C=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},n=function(t){t.length=0},E=function(t,s,i,e){for(var h=i;h<e;h++)t.push(s[h])},t=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!G(C(t,s-1),C(t,s),C(t,s+1))&&(u(t),!0)},u=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},R=function(t,s){return T(C(t,s-1),C(t,s),C(t,s+1))},l=function(t,s,i){var e,h=L,r=k;if(x(C(t,s+1),C(t,s),C(t,i))&&_(C(t,s-1),C(t,s),C(t,i)))return!1;for(var n=I(C(t,s),C(t,i)),o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&x(C(t,s),C(t,i),C(t,o+1))&&_(C(t,s),C(t,i),C(t,o))&&(h[0]=C(t,s),h[1]=C(t,i),r[0]=C(t,o),r[1]=C(t,o+1),e=a(h,r),I(C(t,s),e)<n))return!1;return!0},P=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&h(C(t,s),C(t,i),C(t,e),C(t,e+1)))return!1;return!0},c=function(t,s,i,e){var h=e||[];if(n(h),s<i)for(var r=s;r<=i;r++)h.push(t[r]);else{for(r=0;r<=i;r++)h.push(t[r]);for(r=s;r<t.length;r++)h.push(t[r])}return h},f=function(t){for(var s=[],i=[],e=[],h=Number.MAX_VALUE,r=0;r<t.length;++r)if(R(t,r))for(var n=0;n<t.length;++n)if(l(t,r,n)){for(var i=f(c(t,r,n,e)),o=f(c(t,n,r,e)),a=0;a<o.length;a++)i.push(o[a]);i.length<h&&(h=(s=i).length,s.push([C(t,r),C(t,n)]))}return s},s=function(t){var s=f(t);return 0<s.length?d(t,s):[t]},d=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var h=s[e],r=0;r<i.length;r++){var n=d(i[r],h);if(n){i.splice(r,1),i.push(n[0],n[1]);break}}return i}return e=t.indexOf((h=s)[0]),r=t.indexOf(h[1]),-1!==e&&-1!==r&&[c(t,e,r),c(t,r,e)]},i=function(t){for(var s=t,i=0;i<s.length-1;i++)for(var e=0;e<i-1;e++)if(h(s[i],s[i+1],s[e],s[e+1]))return!1;for(i=1;i<s.length-2;i++)if(h(s[0],s[s.length-1],s[i],s[i+1]))return!1;return!0},A=function(t,s,i,e,h){var r=s[1]-t[1],s=t[0]-s[0],t=r*t[0]+s*t[1],n=e[1]-i[1],e=i[0]-e[0],i=n*i[0]+e*i[1],o=r*e-n*s;return m(o,0,h=h||0)?[0,0]:[(e*t-s*i)/o,(r*i-n*t)/o]},F=function(t,s,i,e,h,r,n){r=r||100,n=n||0,h=h||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],u=[0,0],l=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],w=[],S=t,b=t;if(!(b.length<3))if(r<++n)console.warn("quickDecomp: max level ("+r+") reached.");else{for(var v=0;v<t.length;++v)if(R(S,v)){i.push(S[v]);for(var l=c=Number.MAX_VALUE,M=0;M<t.length;++M)G(C(S,v-1),C(S,v),C(S,M))&&_(C(S,v-1),C(S,v),C(S,M-1))&&(u=A(C(S,v-1),C(S,v),C(S,M),C(S,M-1)),T(C(S,v+1),C(S,v),u))&&(f=I(S[v],u))<c&&(c=f,a=u,m=M),G(C(S,v+1),C(S,v),C(S,M+1))&&_(C(S,v+1),C(S,v),C(S,M))&&(u=A(C(S,v+1),C(S,v),C(S,M),C(S,M+1)),G(C(S,v-1),C(S,v),u))&&(f=I(S[v],u))<l&&(l=f,o=u,p=M);if(m===(p+1)%t.length)u[0]=(a[0]+o[0])/2,u[1]=(a[1]+o[1])/2,e.push(u),v<p?(E(y,S,v,p+1),y.push(u),w.push(u),0!==m&&E(w,S,m,S.length),E(w,S,0,v+1)):(0!==v&&E(y,S,v,S.length),E(y,S,0,p+1),y.push(u),w.push(u),E(w,S,m,v+1));else{if(p<m&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(M=m;M<=p;++M)x(C(S,v-1),C(S,v),C(S,M))&&_(C(S,v+1),C(S,v),C(S,M))&&(f=I(C(S,v),C(S,M)))<d&&P(S,v,M)&&(d=f,g=M%t.length);v<g?(E(y,S,v,g+1),0!==g&&E(w,S,g,b.length),E(w,S,0,v+1)):(0!==v&&E(y,S,v,b.length),E(y,S,0,g+1),E(w,S,g,v+1))}return y.length<w.length?(F(y,s,i,e,h,r,n),F(w,s,i,e,h,r,n)):(F(w,s,i,e,h,r,n),F(y,s,i,e,h,r,n)),s}s.push(t)}return s},e=function(t,s){for(var i=0,e=t.length-1;3<t.length&&0<=e;--e)r(C(t,e-1),C(t,e),C(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},p=function(t,s){for(var i=t.length-1;1<=i;--i)for(var e=t[i],h=i-1;0<=h;--h)g(e,t[h],s)&&t.splice(i,1)},m=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},g=function(t,s,i){return m(t[0],s[0],i)&&m(t[1],s[1],i)};a,h,o,G,x,T,_,r,I,C,n,E,u,R,l,P,c,f,d,A,F,m,g,D=[],O=[],L=[],k=[],self.Cs={Es:s,Rs:F,Ps:i,As:e,Fs:p,Ds:t}}{let t=!1,s=!1,i="dev",e=Symbol("Construct internal API token"),h=14,r=self.Os=class{constructor(){throw TypeError("static class can't be instantiated")}static Ls(){if(h<=0)throw new Error("cannot obtain internal API token");return--h,e}static ks(){t=!0}static Ns(){return t}static Bs(){s=!0}static Ws(){return s}static js(t){i=t}static Hs(){return i}static Vs(){return"final"===i}};r.isDebug=!1,r.Us=!1,r.hardwareConcurrency=navigator.hardwareConcurrency||2,self.zs={}}{const s=self.Os;s.Js=class{constructor(t){this.qs=t,this.$s=new Map,this.Xs()}Xs(){let t=this.qs,s=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const i of s)this.Ks(i)}Ks(t){if(t)if(t.includes("=")){const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.$s.set(i,e)}else this.$s.set(t,null)}Ys(){for(const t of this.$s)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}Zs(t){return this.$s.has(t)}Qs(t){const s=this.$s.get(t);return void 0===s?null:s}ti(){history.replaceState("",document.title,location.pathname+location.search)}si(t){this.qs=t,this.$s.clear(),this.Xs()}},s.ii=new s.Js(location.search),s.ei=new s.Js(location.hash),s.ii.Zs("perf")&&(s.hi=!0),"dev"!==s.ii.Qs("mode")&&s.js("final")}{let e=function(t){const s=parseFloat(t),i=j.get(s);return i||(13<=s?"11":"NT "+t)};e;const a=self.Os,W="(unknown)",j=(a.ri={ni:W,oi:W,ai:W,li:W,ci:NaN,fi:W,di:"browser",mi:!0,gi:!1,yi:!1,wi:!1,Si:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),H=navigator.userAgent,V=navigator.userAgentData;if(V&&0<V.brands.length){let s=function(t){let s="",i="",e="",h="";for(const r of t){const n=U.get(r.brand),o=(!s&&n&&(s=n,i=r.version),z.get(r.brand));!e&&o&&(e=o,h=r.version)}s||"Chromium"!==e||(a.ri.ai="Chromium",a.ri.li=h),a.ri.ai=s||W,a.ri.li=i||W,a.ri.fi=e||W};s,a.ri.ni=V.platform,a.ri.gi=V.mobile,a.ri.mi=!a.ri.gi;const U=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),z=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);s(V.brands);let i=!1;a.ri.Si=async()=>{if(!i)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);s(t.fullVersionList),"Windows"===a.ri.ni?a.ri.oi=e(t.platformVersion):a.ri.oi=t.platformVersion,i=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let t=function(t,s){const i=Array.isArray(t)?t:[t];for(const e of i){const h=e.exec(H);if(h){s(h);break}}};t(/windows\s+nt\s+([\d\.]+)/i,t=>{a.ri.ni="Windows";const s=t[1];a.ri.oi=e(s)}),t(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{a.ri.ni="macOS",a.ri.oi=t[1].replace(/_/g,".")}),t(/CrOS/,()=>{a.ri.ni="Chrome OS"}),t(/linux|openbsd|freebsd|netbsd/i,()=>{a.ri.ni="Linux"}),t(/android/i,()=>{a.ri.ni="Android"}),t(/android\s+([\d\.]+)/i,t=>{a.ri.ni="Android",a.ri.oi=t[1]}),a.ri.ni===W&&(t(/(iphone|ipod|ipad)/i,t=>{a.ri.ni="iOS"}),t([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{a.ri.ni="iOS",a.ri.oi=t[1].replace(/_/g,".")}));const J=/chrome\//i.test(H),q=/chromium\//i.test(H),$=/edg\//i.test(H),X=/OPR\//.test(H),K=/nwjs/i.test(H),Y=/safari\//i.test(H),Z=/webkit/i.test(H),Q=($||X||t(/chrome\/([\d\.]+)/i,t=>{a.ri.ai="Chrome",a.ri.li=t[1],a.ri.fi="Chromium"}),t(/edg\/([\d\.]+)/i,t=>{a.ri.ai="Edge",a.ri.li=t[1],a.ri.fi="Chromium"}),t(/OPR\/([\d\.]+)/,t=>{a.ri.ai="Opera",a.ri.li=t[1],a.ri.fi="Chromium"}),t(/chromium\/([\d\.]+)/i,t=>{a.ri.ai="Chromium",a.ri.li=t[1],a.ri.fi="Chromium"}),t(/nwjs\/[0-9.]+/i,t=>{a.ri.ai="NW.js",a.ri.li=t[1],a.ri.fi="Chromium",a.ri.di="nwjs"}),t(/firefox\/([\d\.]+)/i,t=>{a.ri.ai="Firefox",a.ri.li=t[1],a.ri.fi="Gecko"}),!Y||J||q||$||X||K||(a.ri.ai="Safari",a.ri.fi="WebKit",t(/version\/([\d\.]+)/i,t=>{a.ri.li=t[1]}),t(/crios\/([\d\.]+)/i,t=>{a.ri.ai="Chrome for iOS",a.ri.li=t[1]}),t(/fxios\/([\d\.]+)/i,t=>{a.ri.ai="Firefox for iOS",a.ri.li=t[1]}),t(/edgios\/([\d\.]+)/i,t=>{a.ri.ai="Edge for iOS",a.ri.li=t[1]})),a.ri.fi===W&&Z&&(a.ri.fi="WebKit"),"Android"===a.ri.ni&&"Safari"===a.ri.ai&&(a.ri.ai="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),tt=Q.has(a.ri.ni)||"nwjs"===a.ri.di;a.ri.mi=tt,a.ri.gi=!tt}"Chrome"===a.ri.ai&&"browser"===a.ri.di&&/wv\)/.test(H)&&(a.ri.di="webview"),"nwjs"!==a.ri.di&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(a.ri.di="webapp"),a.ri.ci=parseFloat(a.ri.li);const i="macOS"===a.ri.ni&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;i&&(a.ri.ni="iOS",a.ri.oi=a.ri.li,a.ri.mi=!1,a.ri.gi=!0,a.ri.wi=!0),a.ri.yi="macOS"===a.ri.ni||"iOS"===a.ri.ni}{let n=function(i){return new Promise((t,s)=>{i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})},o=function(i){return new Promise((t,s)=>{i.oncomplete=()=>t(),i.onerror=()=>s(i.error),i.onabort=()=>s(i.error)})},t=function(t,s){return N(t,s)},s=function(t,s){return N(t,s,!0)},a=function(s){e(s);let t=et.get(s);return t instanceof Promise||(t=(async i=>{e(i);const t=indexedDB.open(i,st);return t.addEventListener("upgradeneeded",t=>{try{const s=t.target.result;s.createObjectStore(it)}catch(t){console.error("Failed to create objectstore for database "+i,t)}}),n(t)})(s),et.set(s,t),t.catch(t=>et.delete(s))),t},e=function(t){if("string"!=typeof t)throw new TypeError("expected string")},r=function(t,h){const s=t.objectStore(it).openCursor();return new Promise(i=>{const e=[];s.onsuccess=t=>{const s=t.target.result;if(s){switch(h){case"entries":e.push([s.key,s.value]);break;case"keys":e.push(s.key);break;case"values":e.push(s.value)}s.continue()}else i(e)}})};n,o,t,s,a,e,r;const st=2,it="keyvaluepairs",et=new Map,ht="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,rt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function N(s,i,e=!1,h=!0){const t=await a(s);try{const r=t.transaction([it],e?"readwrite":"readonly");return i(r)}catch(t){if(h&&"InvalidStateError"===t.name)return et.delete(s),N(s,i,e,!1);throw t}}class nt{constructor(t){e(t),this.name=t}async ready(){await a(this.name)}set(h,r){return e(h),s(this.name,async t=>{const s=t.objectStore(it).put(r,h),i=n(s),e=o(t);await Promise.all([e,i])})}get(r){return e(r),t(this.name,async t=>{const s=t.objectStore(it).get(r),i=n(s),e=o(t),[,h]=await Promise.all([e,i]);return h})}delete(h){return e(h),s(this.name,async t=>{const s=t.objectStore(it).delete(h),i=n(s),e=o(t);await Promise.all([e,i])})}clear(){return s(this.name,async t=>{const s=t.objectStore(it).clear(),i=n(s),e=o(t);await Promise.all([e,i])})}keys(){return t(this.name,async t=>{let s;if(rt){const h=t.objectStore(it).getAllKeys();s=n(h)}else s=r(t,"keys");const i=o(t),[,e]=await Promise.all([i,s]);return e})}values(){return t(this.name,async t=>{let s;if(ht){const h=t.objectStore(it).getAll();s=n(h)}else s=r(t,"values");const i=o(t),[,e]=await Promise.all([i,s]);return e})}entries(){return t(this.name,async t=>{const s=r(t,"entries"),i=o(t),[,e]=await Promise.all([i,s]);return e})}}self.bi=nt}{let i=function(t){throw new Error(`"${t}" is not implemented`)},e=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},h=function(e){return"object"==typeof e?new Promise(s=>{const{port1:t,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),t.postMessage(e)}):Promise.resolve(e)};i,e,h;const ot=self.bi,at=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];new WeakMap;class ut{constructor(t){this.vi=t,this.Mi=!this.vi,this.Mi||"undefined"!=typeof indexedDB||(this.Mi=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.Gi=new Map}xi(t){if(!this.Mi)for(const s of at)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.Mi=!0;break}}async Ti(t){const s=this.Gi.get(t),i=await h(s);return void 0===i?null:i}async _i(t,s){s=await h(s),this.Gi.set(t,s)}Ii(t){this.Gi.delete(t)}Ci(){this.Gi.clear()}Ei(){return Array.from(this.Gi.keys())}Ri(){return this.Mi}Pi(){return this.Gi}Ai(t){this.Gi=t}async getItem(s,t){if(e(t),this.Mi)return this.Ti(s);let i;try{i=await this.vi.get(s)}catch(t){return this.xi(t),this.Mi?this.Ti(s):(console.error(`Error reading '${s}' from storage, returning null: `,t),null)}return void 0===i?null:i}async setItem(s,i,t){if(e(t),void 0===i&&(i=null),this.Mi)await this._i(s,i);else try{await this.vi.set(s,i)}catch(t){if(this.xi(t),!this.Mi)throw t;await this._i(s,i)}}async removeItem(s,t){if(e(t),this.Mi)this.Ii(s);else try{await this.vi.delete(s)}catch(t){this.xi(t),this.Mi?this.Ii(s):console.error(`Error removing '${s}' from storage: `,t)}}async clear(t){if(e(t),this.Mi)this.Ci();else try{await this.vi.clear()}catch(t){this.xi(t),this.Mi?this.Ci():console.error("Error clearing storage: ",t)}}async keys(t){if(e(t),this.Mi)return this.Ei();let s=[];try{s=await this.vi.keys()}catch(t){if(this.xi(t),this.Mi)return this.Ei();console.error("Error getting storage keys: ",t)}return s}ready(t){return e(t),this.Mi?Promise.resolve(!0):this.vi.ready()}Fi(t){if(t.forceInMemoryFallback)return new ut(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new ot(s);return new ut(i)}}length(t){i("localforage.length()")}key(t,s){i("localforage.key()")}iterate(t,s){i("localforage.iterate()")}Di(t){i("localforage.setDriver()")}config(t){i("localforage.config()")}Oi(t){i("localforage.defineDriver()")}Li(){i("localforage.driver()")}supports(t){i("localforage.supports()")}dropInstance(){i("localforage.dropInstance()")}}self.localforage=new ut(new ot("localforage"))}{const e=self.Os;if(e.ki={},e.ki.Ni=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const s=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==s.reverse}catch(t){return!1}})(),e.ki.Bi="undefined"!=typeof HTMLDialogElement,e.ki.Wi=!!self.requestIdleCallback,e.ki.ImageBitmap=!!self.createImageBitmap,e.ki.ImageBitmapOptions=!1,e.ki.ji=!1,e.ki.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{e.ki.ImageBitmapOptions=!0}).catch(()=>{e.ki.ImageBitmapOptions=!1})}catch(t){e.ki.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{e.ki.ji=10===t.width&&10===t.height}).catch(()=>{e.ki.ji=!1})}catch(t){e.ki.ji=!1}}if(e.ki.Hi=!(!navigator.clipboard||!navigator.clipboard.readText),e.ki.Vi=!(!navigator.permissions||!navigator.permissions.query),e.ki.Ui=!1,e.ki.Vi){const lt={name:"clipboard-read"};navigator.permissions.query(lt).then(()=>{e.ki.Ui=!0}).catch(()=>{e.ki.Ui=!1})}e.ki.Ji=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),e.ki.$i="undefined"!=typeof Proxy,e.ki.Xi=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),e.ki.Ki="function"==typeof fetch,e.ki.Yi=!!(self.isSecureContext&&"Opera"!==e.ri.ai&&navigator.storage&&navigator.storage.persist),e.ki.Zi=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),e.ki.Qi=(()=>{if("undefined"==typeof document)return!1;if("iOS"===e.ri.ni)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),e.ki.ImageDecoder=void 0!==self.ImageDecoder,e.ki.te=!!self.VideoEncoder,e.ki.ie=!!self.showOpenFilePicker,e.ki.he=!!self.queryLocalFonts,e.ki.UserActivation=!!navigator.userActivation,e.ki.re=!1,(async()=>{let s;"undefined"==typeof document?s=new OffscreenCanvas(32,32):((s=document.createElement("canvas")).width=32,s.height=32);const t=s.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let i=null;try{s.convertToBlob?i=await s.convertToBlob({type:"image/webp",quality:1}):s.toBlob&&(i=await new Promise(t=>s.toBlob(t,"image/webp",1))),e.ki.re=i&&"image/webp"===i.type}catch(t){e.ki.re=!1}})()}{let e=function(t,i){return t.reduce((t,s)=>(0<i&&Array.isArray(s)?Array.prototype.push.apply(t,e(s,i-1)):t.push(s),t),[])};e;const ct=self.Os;if(!String.prototype.trimStart){const ft=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(ft,"")}}if(!String.prototype.trimEnd){const dt=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(dt,"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(ct.ne(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),Array.prototype.flat||(Array.prototype.flat=function(t=1){return e(this,t)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.oe||(Set.prototype.oe=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((i,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,s)=>i({usage:t,quota:s}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let i=function(t){let s=pt.ae(),i="Assertion failure: "+t+"\n\nStack trace:\n"+s;console.error(i)};i;const pt=self.Os;self.assert=function(t,s){t||i(s)}}{const h=self.Os,mt=self.zs,gt=(h.ue=function(t){return"number"==typeof t},h.le=function(t){return h.ue(t)&&isFinite(t)},h.fe=function(t){if(!h.ue(t))throw new TypeError("expected number")},h.de=function(t){h.pe(t)},h.me=function(t,s,i){if(!h.ue(t)||isNaN(t)||t<s||i<t)throw new RangeError("number outside of range")},h.ge=function(...s){for(let t of s);},h.ye=function(t){if(!h.le(t))throw new TypeError("expected finite number")},h.we=function(t){h.pe(t)},h.Se=function(...s){for(let t of s);},h.ve=function(t){return"string"==typeof t},h.Me=function(t){if(!h.ve(t))throw new TypeError("expected string")},h.Ge=function(t){h.pe(t)},h.xe=function(...s){for(let t of s);},h.Te=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},h._e=function(t){if(!h.Te(t))throw new TypeError("expected simple object")},h.Ie=function(t){if(!h.pe(t)&&!h.Te(t))throw new TypeError("expected simple object")},h.Ce=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},h.Ee=function(t){if(!h.Ce(t))throw new TypeError("expected object")},h.Re=function(t){h.pe(t)},h.Pe=function(...s){for(let t of s);},h.Ae=function(t){return h.Fe(t,Blob)&&"string"==typeof t.name},h.De=function(t){if(!h.Ae(t))throw new TypeError("expected file")},h.Oe=function(t){h.pe(t)},h.Le=function(t){return Array.isArray(t)},h.ke=function(t){if(!h.Le(t))throw new TypeError("expected array")},h.Ne=function(t){h.pe(t)},h.Be=function(...s){for(let t of s);},h.We=function(t){return!(!h.Le(t)||t.length&&!h.Le(t[0]))},h.je=function(s){if(!h.We(s))throw new TypeError("expected 2d array");for(let t of s)if(!h.Le(t))throw new TypeError("expected 2d array")},h.He=function(t){h.pe(t)},h.Ve=function(t){return"function"==typeof t},h.Ue=function(t,s){if(!h.Ve(t))throw new TypeError("expected function");if(!h.pe(s)&&t!==s)throw new TypeError("expected same function reference")},h.Je=function(t){h.pe(t)},h.qe=function(...s){for(let t of s);},h.$e=function(s,...i){if(!h.Ve(s))throw new TypeError("expected function");if(!i.length)throw new Error("missing comparison functions");for(let t of i)if(!h.pe(t)&&s===t)return;throw new TypeError("expected same function reference")},h.Xe=function(...s){if(!h.pe(s))for(let t of s);},h.Ke=function(t,s){return t instanceof s},h.Ye=function(s,...i){for(let t of i)if(h.Ke(s,t))return!0;return!1},h.Ze=function(t,s){if(!h.Ke(t,s))throw new TypeError("unexpected type")},h.Qe=function(t,s){h.pe(t)},h.th=function(t,...s){for(let t of s);},h.ih=function(t,...s){if(!h.Ye(t,...s))throw new TypeError("unexpected type")},h.eh=function(t,...s){if(!h.pe(t)&&!h.Ye(t,...s))throw new TypeError("unexpected type")},h.hh=function(s,i){for(let t of s)if(!h.Ke(t,i))return!1;return!0},h.rh=function(s){for(let t of s)if(!h.le(t))return!1;return!0},h.nh=function(s,t){for(let t of s);},h.oh=function(s,t){if(!h.pe(s))for(let t of s);},h.ah=function(s,t){if(!h.pe(s))for(let t of s);},h.uh=function(s){for(let t of s);},h.fh=function(s){if(!h.pe(s))for(let t of s);},h.dh=function(t,s){return!(h.pe(t)||!h.ve(t.nodeName))&&(!s||h.ph(t.nodeName,s))},h.mh=function(t,s){if(h.pe(t)||!h.ve(t.nodeName))throw new TypeError("expected DOM node");if(s&&!h.ph(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},h.gh=function(t,s){h.pe(t)},h.yh=function(t,s){return!(h.pe(t)||!h.ve(t.tagName))&&(!s||h.ph(t.tagName,s))},h.wh=function(t,s){if(h.pe(t)||!h.ve(t.tagName))throw new TypeError("expected HTML element");if(s&&!h.ph(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},h.Sh=function(t,s){h.pe(t)},h.bh=function(t){return h.yh(t,"img")||h.yh(t,"canvas")||h.yh(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},h.Mh=function(t){if(!h.bh(t))throw new TypeError("expected drawable")},h.Gh=function(t){h.pe(t)},h.xh=function(t){return t instanceof ImageData||h.bh(t)},h.Th=function(t){if(!h.xh(t))throw new TypeError("expected drawable or image data")},h._h=function(t){if(!h.pe(t)&&!h.xh(t))throw new TypeError("expected drawable or image data")},h.Ih=function(t){return"string"==typeof t||h.HtmlString&&t instanceof h.HtmlString||t instanceof h.Ch},h.Eh=function(t){if(!h.Ih(t))throw new TypeError("expected string-like")},h.Rh=function(t){h.pe(t)},h.Ph=function(...s){for(let t of s);},h.Ah=function(){throw new Error("must be overridden")},h.Fh=function(){throw new Error("not yet implemented")},h.Dh=function(t,...s){let i=t;if(void 0===i)return!1;for(let t of s){if(void 0===i[t])return!1;i=i[t]}return!0},h.pe=function(t){return null==t},h.Oh=function(s){let i=s[0].constructor;for(let t of s)if(t.constructor!==i)return!1;return i},h.Lh=function(s,i){for(let t of s)if(!(t instanceof i))return!1;return!0},Object.getPrototypeOf(Uint8Array));h.kh=function(t){return h.Ke(t,gt)},h.Nh=function(t){},h.Bh=function(t){h.Wh(t,gt)},h.jh=function(t,...s){if(!h.Hh(t,...s))throw new TypeError("unexpected type")},h.Hh=function(t,...s){for(const i of s)if(h.Fe(t,i))return!0;return!1},h.Wh=function(t,s){if(!h.Fe(t,s))throw new TypeError("unexpected type")},h.Fe=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},mt.fe=h.fe,mt.de=h.de,mt.ye=h.ye,mt.we=h.we,mt.Me=h.Me,mt.Ge=h.Ge,mt.Ee=h.Ee,mt.Re=h.Re,mt.ke=h.ke,mt.Ne=h.Ne,mt.Ue=h.Ue,mt.Je=h.Je,mt.Ze=h.Ze,mt.Qe=h.Qe,mt.pe=h.pe}{let e=function(t,s){let i=p.getType(t),e=p.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},h=function(t){console.warn("[Defence] "+t+" @",p.ae())},i=function(){if(f=-1,0<a.size||0<u.size){let t=new Set([...a.keys()].map(t=>p.Vh(t))),s=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+s),a.clear(),u.clear()}},r=function(s){let i=new Set;for(let t in s)i.add(t);return i},n=function(t,s){let i=r(s),e=d.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);p.Uh(s,[...i]),s.length&&console.warn(`[Defence] '${p.Vh(t)}' constructor creates inconsistent properties: `+s.join(", "))}else d.set(t,i)};e,h,i,r,n;const p=self.Os,yt=new Map;p.zh=function(t,s){console.log("%c"+t,"font-weight: bold; color:"+s)},p.Jh=function(t,...s){yt.has(t)||yt.set(t,-1),-1===yt.get(t)&&yt.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...s),yt.set(t,-1)}))};let o,a=(p.qh=function(t){performance.mark(t),(o=o||new Map).has(t)||o.set(t,{current:0,total:0,$h:0,Xh:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.$h.toPrecision(3)} :: calls => `+this.Xh}})},p.Kh=function(t){performance.measure("measure-"+t,t);const s=performance.getEntriesByName("measure-"+t)[0],i=o.get(t);i.current=s.duration,i.total+=i.current,i.$h=i.total/i.Xh,console.log(i.toString()),i.Xh++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},p.ae=function(){return(new Error).stack},p.Yh=function(){},p.cast=function(t,s){return t&&t instanceof s?t:null},p.Vh=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":p.ue(t)?"<number>":p.ve(t)?"<string>":p.Le(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":p.Ve(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},p.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},p.range=function*(s,i){if(!isFinite(Math.abs(s-i)))throw new Error("Invalid parameters");if(i<s)for(let t=s-1;t>=i;t--)yield t;else for(let t=s;t<i;t++)yield t},new Map),u=new Map,l=new WeakMap,c=new WeakMap;p.Zh={};const wt=new Set(["then","splice"]);p.Zh.get=function(t,s){return s in t||"symbol"==typeof s||wt.has(s)||h(`Accessed missing property '${s}' from defended object '${p.Vh(t)}', returning undefined`),c.has(t)&&"symbol"!=typeof s&&!wt.has(s)&&h(`Accessed property '${s}' on a released object '${p.Vh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]},p.Zh.set=function(t,s,i){return s in t||a.has(t)||h(`Set non-existent property '${s}' to '${i}' on defended object '${p.Vh(t)}'`),e(t[s],i)||a.has(t)||h(`Set '${p.getType(t[s])}' property '${s}' to type '${p.getType(i)}' on defended object '${p.Vh(t)}'`),c.has(t)&&h(`Set property '${s}' on a released object '${p.Vh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]=i,!0},p.Zh.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${p.Vh(t)}'`)},p.Zh.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${p.Vh(t)}'`)},p.Zh.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${p.Vh(t)}'`)};let f=-1,d=(p.Qh=class{constructor(){if(p.Us&&p.ki.$i){let t=Object.create(new.target.prototype),s=new Proxy(t,p.Zh);return a.set(t,s),u.set(s,t),l.set(s,t),-1===f&&(f=requestAnimationFrame(i)),s}}},p.tr=function(s){if(p.Us&&p.ki.$i&&s instanceof p.Qh){if(u.has(s)){let t=u.get(s);u.delete(s),a.delete(t)}return s}return p.isDebug?Object.seal(s):s},p.ir=function(t,...s){let i;try{i=new t(...s)}catch(t){throw u.clear(),a.clear(),t}return p.Us&&n(t,i),p.tr(i)},p.er=function(t){let s=l.get(t);s&&c.set(s,p.ae())},p.hr=function(t){let s=l.get(t);return!!s&&!!c.get(s)},new Map);p.rr=class{constructor(t){this.nr="",t&&this.start(t)}start(t){p.hi&&(this.nr=t,performance.mark(this.nr+"-Start"))}end(){p.hi&&(performance.mark(this.nr+"-End"),performance.measure(this.nr,this.nr+"-Start",this.nr+"-End"))}next(t){p.hi&&(this.end(),this.nr=t,performance.mark(this.nr+"-Start"))}}}{let i=function(t){return 0===t&&1/t<0};i;const y=self.Os,St=2*Math.PI,bt=Math.PI/180,vt=180/Math.PI,Mt=(y.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0==e)return i;if(t<s){const h=i-(s-t)%e;return h===i?0:h}return s+(t-s)%e},y.ur=function(t,s,i,e,h){const r=i-s;if(0==r&&0===e)return t;const n=h-e;return(t-s)*n/r+e},y.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},y.lr=function(t,s,i){return t<s?s:i<t?i:t},y.cr=function(t){return(t%=St)<0&&(t+=St),t},y.dr=function(t){return t*bt},y.pr=function(t){return t*vt},y.mr=function(t,s,i,e){return Math.hypot(i-t,e-s)},y.gr=function(t,s,i,e){const h=i-t,r=e-s;return h*h+r*r},y.yr=function(t,s,i,e){return Math.atan2(e-s,i-t)},y.wr=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),r=Math.cos(s),n=i*h+e*r;return 1<=n?0:n<=-1?Math.PI:Math.acos(n)},y.Sr=function(t,s,i){let e=Math.sin(t),h=Math.cos(t),r=Math.sin(s),n=Math.cos(s);return Math.acos(e*r+h*n)>i?0<h*r-e*n?y.cr(t+i):y.cr(t-i):y.cr(s)},y.br=function(t,s){let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),r=Math.cos(s);return e*h-i*r<=0},y.vr=function(t,s,i,e=0){let h=y.wr(t,s),r=St*e;return y.br(s,t)?y.cr(t+(h+r)*i):y.cr(t-(h+r)*i)},y.Mr=function(t,s,i,e=0){const h=y.wr(t,s),r=St*e;return y.br(s,t)?y.cr(t+(h+r)*i):y.cr(t+(St-h+r)*i)},y.Gr=function(t,s,i,e=0){const h=y.wr(t,s),r=St*e;return y.br(s,t)?y.cr(t-(-St+h-r)*i):y.cr(t-(h+r)*i)},y.Tr=function(t,s){const i=y.wr(t,s);return y.br(t,s)?y.cr(s-i):y.cr(s+i)},y.Dt=function(t,s,i){return t+i*(s-t)},y._r=function(t,s,i){return t===s?0:(i-t)/(s-t)},y.Ir=function(t,s,i,e,h){return y.Dt(e,h,y._r(t,s,i))},y.Cr=function(t,s,i,e){return y.Dt(y.Dt(t,s,e),y.Dt(s,i,e),e)},y.Er=function(t,s,i,e,h){return y.Dt(y.Cr(t,s,i,h),y.Cr(s,i,e,h),h)},y.Rr=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},y.Pr=function(t){return 0<t&&0==(t-1&t)},y.Ar=function(s){--s;for(let t=1;t<32;t<<=1)s|=s>>t;return s+1},y.Fr=function(t,s){return Math.round(t*s)/s},y.Dr=function(t,s){return Math.floor(t*s)/s},y.Or=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},y.Lr=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},y.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;0<=e&&"0"===i.charAt(e);--e);return 0<=e&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},y.kr=function(t,s,i){return y.lr(t,0,255)|y.lr(s,0,255)<<8|y.lr(i,0,255)<<16},1024),Gt=16384,xt=8191,Tt=(y.Nr=function(t,s,i,e){return t=y.lr(Math.floor(1024*t),-8192,xt),s=y.lr(Math.floor(1024*s),-8192,xt),i=y.lr(Math.floor(1024*i),-8192,xt),e=y.lr(Math.floor(1023*e),0,1023),t<0&&(t+=Gt),s<0&&(s+=Gt),i<0&&(i+=Gt),-(t*Gt*Gt*Mt+s*Gt*Mt+i*Mt+e)},y.Br=function(t,s,i){return y.Nr(t,s,i,1)},y.Wr=function(s){if(0<=s)return(255&s)/255;{let t=Math.floor(-s/(Gt*Gt*Mt));return t>xt&&(t-=Gt),t/1024}},y.jr=function(s){if(0<=s)return((65280&s)>>8)/255;{let t=Math.floor(-s%(Gt*Gt*Mt)/(Gt*Mt));return t>xt&&(t-=Gt),t/1024}},y.Hr=function(s){if(0<=s)return((16711680&s)>>16)/255;{let t=Math.floor(-s%(Gt*Mt)/Mt);return t>xt&&(t-=Gt),t/1024}},y.Vr=function(t){if(i(t))return 0;if(0<=t)return 1;{const s=Math.floor(-t%Mt);return s/1023}},y.Ur=function(s,i){for(s=Math.floor(s),i=Math.floor(i);0!==i;){let t=i;i=s%i,s=t}return s},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]);y.zr=function(i,e){if((i=Math.floor(i))===(e=Math.floor(e)))return[1,1];for(let s of Tt){let t=i/s[0]*s[1];if(Math.abs(e-t)<1)return s.slice(0);if(t=i/s[1]*s[0],Math.abs(e-t)<1)return[s[1],s[0]]}let t=y.Ur(i,e);return[i/t,e/t]},y.Jr=function(t,s,i,e,h,r,n,o){const a=Math.min(t,i),u=Math.max(t,i),l=Math.min(h,n),c=Math.max(h,n);if(u<l||c<a)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||m<f)return!1;const g=h-t+n-i,y=r-s+o-e,w=i-t,S=e-s,b=n-h,v=o-r,M=Math.abs(S*b-v*w),G=b*y-v*g;if(Math.abs(G)>M)return!1;const x=w*y-S*g;return Math.abs(x)<=M},y.qr=function(t,s,i,e,h,r,n,o,a,u,l,c){const f=Math.min(a,l),d=Math.max(a,l);if(r<f||d<h)return!1;const p=Math.min(u,c),m=Math.max(u,c);if(o<p||m<n)return!1;const g=a-t+l-i,y=u-s+c-e,w=i-t,S=e-s,b=l-a,v=c-u,M=Math.abs(S*b-v*w),G=b*y-v*g;if(Math.abs(G)>M)return!1;const x=w*y-S*g;return Math.abs(x)<=M},y.$r=function(t,s,i,e,h){const r=Math.min(t,i),n=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),u=h.Xr(),l=h.Kr(),c=h.Yr(),f=h.Zr(),d=h.Qr(),p=h.tn(),m=h.sn(),g=h.hn();return y.qr(t,s,i,e,r,n,o,a,u,l,c,f)||y.qr(t,s,i,e,r,n,o,a,c,f,d,p)||y.qr(t,s,i,e,r,n,o,a,d,p,m,g)||y.qr(t,s,i,e,r,n,o,a,m,g,u,l)},y.rn=function(s,i,e,h,r){let n=Math.min(s,e),o=Math.max(s,e),a=Math.min(i,h),u=Math.max(i,h),l=0;for(let t=r.length-4;l<=t;l+=2)if(y.qr(s,i,e,h,n,o,a,u,r[l],r[l+1],r[l+2],r[l+3]))return!0;return y.qr(s,i,e,h,n,o,a,u,r[l],r[l+1],r[0],r[1])};y.nn=function(t,s,i,e,h,r,n,o){const a=i-t,u=e-s,l=n-h,c=o-r,f=a*c-u*l;if(0==f)return 2;const d=((s-e)*(n-t)+a*(o-s))/f;return 0<d&&d<1+1e-6?(c*(n-t)+(h-n)*(o-s))/f:2},y.an=function(t,s,i,e,h,r,n,o,a){const u=(n-h)*a,l=(o-r)*a;return y.nn(t,s,i,e,h-u,r-l,n+u,o+l)},y.un=function(t,s,i,e,h,r,n,o){const a=h-i,u=r-e,l=n-i,c=o-e,f=t-i,d=s-e,p=a*a+u*u,m=a*l+u*c,g=a*f+u*d,y=l*l+c*c,w=l*f+c*d,S=1/(p*y-m*m),b=(y*g-m*w)*S,v=(p*w-m*g)*S;return 0<=b&&0<=v&&b+v<=1},y.ln=function(t,s,i,e,h,r,n,o){const a=h-i,u=r-e,l=n-i,c=o-e,f=t-i,d=s-e,p=a*a+u*u,m=a*l+u*c,g=l*l+c*c,y=f*a+d*u,w=f*l+d*c,S=p*g-m*m,b=(g*y-m*w)/S,v=(p*w-m*y)/S,M=1-b-v;return[M,b,v]},y.cn=function(t,s,i,e,h,r,n,o,a,u,l,c){return[t*e+s*n+i*u,t*h+s*o+i*l,t*r+s*a+i*c]}}{let u=self.Os,s=null,i="";if("undefined"!=typeof document){const _t=(s=document).querySelector("base");(i=_t&&_t.hasAttribute("href")?_t.getAttribute("href"):"")&&!(i=i.startsWith("/")?i.substr(1):i).endsWith("/")&&(i+="/")}u.fn=function(){return i},u.dn=function(){if(!s)return"";const t=s.location;return u.pn(t.origin+t.pathname)+i},u.pn=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},u.mn=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},u.gn=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},u.yn=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},u.wn=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},u.Sn=function(t){return t.replace(/\\/g,"/")},u.bn=function(t,s){const i=t?u.gn(t).slice(1):"";return s===i},u.vn=function(t,s){let i,e;return u.Ae(t)&&(i=u.wn(t.name)),u.ve(t)&&(i=u.wn(t)),u.Ae(s)&&(e=u.wn(s.name)),u.ve(s)&&(e=u.wn(s)),i===e},u.Mn=function(t){t=u.Sn(t);let s=/^\w\:\//.exec(t),i=(s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),e="",h=t,r,n="";0<i&&(e=t.slice(0,i),h=t.slice(i));const o=(r=h).lastIndexOf("."),a=(0<o&&(n=h.slice(o),r=h.slice(0,-n.length)),s+e+h);return{dir:e,Gn:h,name:r,root:s,ext:n,xn:a}},u.Tn=function(i,e){return new Promise((t,s)=>{self.setTimeout(t,i,e)})},u._n=function(t){try{t()}catch(t){u.isDebug&&console.warn("Swallowed exception: ",t)}},u.In=function(){},u.ph=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},u.Cn=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},u.En=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},u.Rn=function(t,s){t.length=s},u.Pn=function(t){t&&0!==t.length&&u.Rn(t,0)},u.An=function(i){if(i){for(let s=0;s<i.length;s++){let t=i[s];u.Rn(t,0)}u.Rn(i,0)}},u.Fn=function(s,i,e){const h=s.length;if(!((i|=0)<=h))for(let t=h;t<i;++t)s.push(e)},u.Dn=function(t,s,i){const e=t.length;(s|=0)<e?u.Rn(t,s):e<s&&u.Fn(t,s,i)},u.On=function(t,s){u.Pn(t),u.Uh(t,s)},u.Uh=function(i,e){if(e.length<1e4)i.push(...e);else for(let t=0,s=e.length;t<s;++t)i.push(e[t])},u.Ln=function(i,e){if(!((e=Math.floor(e))<0||e>=i.length)){let s=i.length-1;for(let t=e;t<s;++t)i[t]=i[t+1];u.Rn(i,s)}},u.kn=function(t,s){let i=t.indexOf(s);0<=i&&t.splice(i,1)},u.Nn=function(s,i){let e=s.length;if(i.length!==e)return!1;for(let t=0;t<e;++t)if(s[t]!==i[t])return!1;return!0},u.Bn=function(i,e){let h=[],r=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e(t)?h.push(t):(i[r]=t,++r)}return u.Rn(i,r),h},u.Wn=function(i,e){let t=i.length,h=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e.has(t)||(i[h++]=t)}return u.Rn(i,h),t-h},u.jn=function(t,s){return t===Math.floor(t)&&0<=t&&t<s.length},u.Hn=function(t,s){if(!u.jn(t,s))throw new RangeError("array index out of bounds")},u.Vn=function(t){return t.slice()},u.Un=function(t,i){let e=[];for(let s of t)if(u.Ce(s)){let t=i(s);if(!t)throw new Error("missing clone");if(t.constructor!==s.constructor)throw new Error("object is not a clone");e.push(t)}else u.Le(s)?e.push(u.Un(s,i)):e.push(s);return e},u.zn=function(s){let i=[];for(let t of s)i.push(t.slice());return i},u.Jn=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},u.qn=function(t,s,i){const e=new Set;for(const h of t.values())s(h)&&(i?e.add(i(h)):e.add(h));return e},u.$n=function(t,s){return t.union?t.union(s):new Set([...t,...s])},u.Xn=function(t,s){for(const i of s)t.add(i);return t},u.first=function(s){for(let t of s)return t;return null},u.xor=function(t,s){return!t!=!s},u.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}},u.Kn=function(s){for(let t in s)if(s.hasOwnProperty(t))return!0;return!1},u.Yn=function(o,a){return o.length?new Promise((i,e)=>{let h=[],r=0,n=!1;for(let s=0,t=o.length;s<t;++s)h.push(void 0),o[s].then(t=>{n||(h[s]=t,++r===o.length?i(h):a(r,o.length))}).catch(t=>{n=!0,e(t)})}):Promise.resolve([])};let e=[],h=(u.Zn=function(t){e.push(t)},u.Qn=function(){let i=0;for(let s of e){let t=s();i+=t}return Math.floor(i)},1),r=new Map,n=new MessageChannel,o=(n.port2.onmessage=function(t){const s=t.data,i=r.get(s);r.delete(s),i&&i(performance.now())},u.io=function(t){const s=h++;return r.set(s,t),n.port1.postMessage(s),s},u.eo=function(t){r.delete(t)},u.ho=u.io,u.ro=function(){return new Promise(t=>u.ho(t))},new Set);u.no=function(s){const i=self.requestAnimationFrame(async t=>{await u.ro(),o.has(i)&&(o.delete(i),s(t))});return o.add(i),i},u.ao=function(t){o.has(t)&&(self.cancelAnimationFrame(t),o.delete(t))}}{const r=self.Os;r.uo=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},r.lo=function(t){return!r.uo(t)},r.co=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},r.fo=function(t,s){return fetch(t,s).then(t=>(r.co(t),t))},r.do=function(t){return r.fo(t).then(t=>t.text())},r.po=function(t){return r.fo(t).then(t=>t.json())},r.mo=function(t){return r.fo(t).then(t=>t.blob())},r.yo=function(t){return r.fo(t).then(t=>t.arrayBuffer())},r.wo=function(e){return new Promise((t,s)=>{const i=new Image;i.onload=()=>t(i),i.onerror=t=>s(t),i.src=e})},r.So=function(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsArrayBuffer(e)})},r.bo=function(e){return"function"==typeof e.text?e.text():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsText(e)})},r.vo=function(t){return r.bo(t).then(t=>JSON.parse(t))},r.Mo=async function(t,s){let i=URL.createObjectURL(t);try{const e=await r.wo(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof e.decode&&await e.decode(),e}finally{i&&URL.revokeObjectURL(i)}},r.Go=function(t,s){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,s);{const i=document.createElement("canvas");return i.width=t,i.height=s,i}},r.xo=function(s,i,e){if("number"!=typeof e&&(e=1),i=i||"image/png",e=r.lr(e,0,1),s.convertToBlob)return s.convertToBlob({type:i,quality:e});if(s.toBlob)return new Promise(t=>s.toBlob(t,i,e));throw new Error("could not convert canvas to blob")},r.To=function(t,s,i){const e=r.Go(t.width,t.height),h=e.getContext("2d");return h.drawImage(t,0,0),r.xo(e,s,i)},r._o=function(t,s,i){if(r.ki.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>r.To(t,s,i));if(r.ki.ImageBitmap)return createImageBitmap(t).then(t=>r.To(t,s,i));{const e=r.Go(t.width,t.height),h=e.getContext("2d");return h.putImageData(t,0,0),r.xo(e,s,i)}},r.Io=function(t,s){t.clear();for(const i of s)t.add(i)},r.Co=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},r.Eo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},r.Ro=function s(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>s(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],s(t[1])])};{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}},r.Po=function s(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>s(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],s(t[1])]));{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}}return t},r.Ao=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const h of t)"-"===h?0<e&&(i=!0):i?(s+=h.toUpperCase(),i=!1):s+=h,++e;return s},r.Fo=function(t){return"object"==typeof t&&"function"==typeof t.next},r.Do=function(s,i){const e=[];if("function"==typeof i)for(let t=0;t<s;++t)e.push(i());else for(let t=0;t<s;++t)e.push(i);return e}}{let e=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},u=function(t,s,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};e,u;const l=self.Os,It=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,Ct=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;l.Oo=class{constructor(t,s,i,e){this.Lo=NaN,this.ko=NaN,this.No=NaN,this.Bo=NaN,this.Lo=0,this.ko=0,this.No=0,this.Bo=0,t instanceof l.Oo?this.set(t):this.Wo(t||0,s||0,i||0,e||0)}jo(t,s,i){return this.Lo=+t,this.ko=+s,this.No=+i,this.lr(),this}Wo(t,s,i,e){return this.Lo=+t,this.ko=+s,this.No=+i,this.Bo=+e,this.lr(),this}set(t){return this.Lo=t.Lo,this.ko=t.ko,this.No=t.No,this.Bo=t.Bo,this}_(t){return this.set(t)}add(t){this.Lo+=t.Lo,this.ko+=t.ko,this.No+=t.No,this.Bo+=t.Bo,this.lr()}Ho(t,s,i,e=0){this.Lo+=+t,this.ko+=+s,this.No+=+i,this.Bo+=+e,this.lr()}Vo(t){this.Uo(Math.max(this.Lo,t.Lo)-Math.min(this.Lo,t.Lo)),this.zo(Math.max(this.ko,t.ko)-Math.min(this.ko,t.ko)),this.Jo(Math.max(this.No,t.No)-Math.min(this.No,t.No)),this.qo(Math.max(this.Bo,t.Bo)-Math.min(this.Bo,t.Bo)),this.lr()}$o(t){this.Lo=t.Lo,this.ko=t.ko,this.No=t.No}Uo(t){this.Lo=l.lr(+t,0,1)}Xo(){return this.Lo}zo(t){this.ko=l.lr(+t,0,1)}Ko(){return this.ko}Jo(t){this.No=l.lr(+t,0,1)}Yo(){return this.No}qo(t){this.Bo=l.lr(+t,0,1)}Zo(){return this.Bo}clone(){return l.ir(l.Oo,this.Lo,this.ko,this.No,this.Bo)}toArray(){return[this.Lo,this.ko,this.No,this.Bo]}Qo(){return new Float64Array(this.toArray())}ta(t,s){t[s++]=this.Lo,t[s++]=this.ko,t[s++]=this.No,t[s]=this.Bo}ia(t,s){t[s++]=this.Lo,t[s++]=this.ko,t[s]=this.No}equals(t){return this.Lo===t.Lo&&this.ko===t.ko&&this.No===t.No&&this.Bo===t.Bo}ea(t){return this.Lo===t.Lo&&this.ko===t.ko&&this.No===t.No}ra(t,s,i){return this.Lo===t&&this.ko===s&&this.No===i}na(t,s,i,e){return this.Lo===t&&this.ko===s&&this.No===i&&this.Bo===e}oa(t,s){return t[s]===Math.fround(this.Lo)&&t[s+1]===Math.fround(this.ko)&&t[s+2]===Math.fround(this.No)&&t[s+3]===Math.fround(this.Bo)}aa(t,s){return t[s]===Math.fround(this.Lo)&&t[s+1]===Math.fround(this.ko)&&t[s+2]===Math.fround(this.No)}multiply(t){this.Lo*=t.Lo,this.ko*=t.ko,this.No*=t.No,this.Bo*=t.Bo}ua(t){this.Lo*=t,this.ko*=t,this.No*=t,this.Bo*=t}la(){return this.Lo*=this.Bo,this.ko*=this.Bo,this.No*=this.Bo,this}ca(){return this.Lo/=this.Bo,this.ko/=this.Bo,this.No/=this.Bo,this}lr(){return this.Lo=l.lr(this.Lo,0,1),this.ko=l.lr(this.ko,0,1),this.No=l.lr(this.No,0,1),this.Bo=l.lr(this.Bo,0,1),this}fa(t){this.Lo=l.Wr(t),this.ko=l.jr(t),this.No=l.Hr(t),this.Bo=l.Vr(t)}da(t,s,i){const e=l.le(t)?t:this.Xo(),h=l.le(s)?s:this.Ko(),r=l.le(i)?i:this.Yo();return`rgb(${100*e}%, ${100*h}%, ${100*r}%)`}pa(t,s,i,e){const h=l.le(t)?t:this.Xo(),r=l.le(s)?s:this.Ko(),n=l.le(i)?i:this.Yo(),o=l.le(e)?e:this.Zo();return`rgba(${100*h}%, ${100*r}%, ${100*n}%, ${o})`}ma(){const t=Math.round(255*this.Xo()),s=Math.round(255*this.Ko()),i=Math.round(255*this.Yo());return"#"+e(t.toString(16))+e(s.toString(16))+e(i.toString(16))}ga(t){if("string"!=typeof t)return!1;let s,i,e;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Uo(s),isFinite(i)&&this.zo(i),isFinite(e)&&this.Jo(e),this.qo(1),!0}ya(){const t=Math.round(255*this.Xo()),s=Math.round(255*this.Ko()),i=Math.round(255*this.Yo());return t+`, ${s}, `+i}wa(){const t=Math.round(255*this.Xo()),s=Math.round(255*this.Ko()),i=Math.round(255*this.Yo());return[t,s,i]}Sa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Uo(i),isFinite(e)&&this.zo(e),isFinite(h)&&this.Jo(h),this.qo(1),!0}ba(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Uo(i),isFinite(e)&&this.zo(e),isFinite(h)&&this.Jo(h),this.qo(1),!0}Ma(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.Uo(i),isFinite(e)&&this.zo(e),isFinite(h)&&this.Jo(h),isFinite(r)&&this.qo(r),!0}Ga(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.Uo(i),isFinite(e)&&this.zo(e),isFinite(h)&&this.Jo(h),isFinite(r)&&this.qo(r),!0}xa(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.ba(t):this.Sa(t);if(t.startsWith("rgba("))return t.includes("%")?this.Ga(t):this.Ma(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.Ta(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.ba(t):4===s.length&&this.Ga(t):3===s.length?this.Sa(t):4===s.length&&this.Ma(t)}}return this.ga(t)}toJSON(){return[this.Lo,this.ko,this.No,this.Bo]}_a(t,s,i,e){let h,r,n;if(t%=360,s=l.lr(s,0,100),i=l.lr(i,0,100),e=l.lr(e,0,1),t/=360,i/=100,0==(s/=100))h=r=n=i;else{const o=i<.5?i*(1+s):i+s-i*s,a=2*i-o;h=u(a,o,t+1/3),r=u(a,o,t),n=u(a,o,t-1/3)}return this.Uo(h),this.zo(r),this.Jo(n),this.qo(e),this}Ta(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=It.exec(s),e=Ct.exec(s);return i&&4===i.length?(this._a(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this._a(+i[1],+i[2],+i[3],+i[4]),0))}Ia(){const t=this.Lo,s=this.ko,i=this.No,e=this.Bo,h=l.Oo.Ca(t,s,i),r=l.Oo.Ea(t,s,i),n=l.Oo.Ra(t,s,i);return`hsla(${h}, ${r}%, ${n}%, ${e})`}Pa(){const t=this.Lo,s=this.ko,i=this.No;return[l.Oo.Ca(t,s,i),l.Oo.Ea(t,s,i),l.Oo.Ra(t,s,i),this.Bo]}Aa(t){!Array.isArray(t)||t.length<3||(this.Lo=t[0],this.ko=t[1],this.No=t[2],this.Bo=4<=t.length?t[3]:1)}set r(t){this.Uo(t)}get r(){return this.Xo()}set g(t){this.zo(t)}get g(){return this.Ko()}set b(t){this.Jo(t)}get b(){return this.Yo()}set a(t){this.qo(t)}get a(){return this.Zo()}Fa(t,s){switch(t){case 0:this.Uo(s);break;case 1:this.zo(s);break;case 2:this.Jo(s);break;case 3:this.qo(s);break;default:throw new RangeError("invalid color index")}}Da(t){switch(t){case 0:return this.Xo();case 1:return this.Ko();case 2:return this.Yo();case 3:return this.Zo();default:throw new RangeError("invalid color index")}}static Oa(t,s){let i,e;if(Array.isArray(t))(i=new l.Oo).Aa(t);else{if(!(t instanceof l.Oo))throw new Error("unexpected type");i=t}if(Array.isArray(s))(e=new l.Oo).Aa(s);else{if(!(s instanceof l.Oo))throw new Error("unexpected type");e=s}return i.equals(e)}static La(t,s){return l.lr(Math.max(t,s)-Math.min(t,s),0,1)}static ka(t,s){const i=new l.Oo;return i.Uo(Math.max(t.Lo,s.Lo)-Math.min(t.Lo,s.Lo)),i.zo(Math.max(t.ko,s.ko)-Math.min(t.ko,s.ko)),i.Jo(Math.max(t.No,s.No)-Math.min(t.No,s.No)),i.qo(Math.max(t.Bo,s.Bo)-Math.min(t.Bo,s.Bo)),i}static Na(t,s){const i=new l.Oo(0,0,0,1);return i.Uo(Math.max(t.Lo,s.Lo)-Math.min(t.Lo,s.Lo)),i.zo(Math.max(t.ko,s.ko)-Math.min(t.ko,s.ko)),i.Jo(Math.max(t.No,s.No)-Math.min(t.No,s.No)),i}static Ca(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;let r=0;switch(e){case t:r=(s-i)/(e-h)+(s<i?6:0);break;case s:r=(i-t)/(e-h)+2;break;case i:r=(t-s)/(e-h)+4}return Math.round(r/6*360)}static Ea(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;const r=(e+h)/2,n=e-h,o=.5<r?n/(2-e-h):n/(e+h);return Math.round(100*o)}static Ra(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i),r=(e+h)/2;return e?Math.round(100*r):0}},l.Oo.Ba=Object.freeze(l.ir(l.Oo,1,1,1,1)),l.Oo.Wa=Object.freeze(l.ir(l.Oo,0,0,0,1)),l.Oo.ja=Object.freeze(l.ir(l.Oo,0,0,0,0))}{const Et=self.Os;Et.Ha=class{constructor(t,s){this.Va=0,this.Ua=0,t instanceof Et.Ha?this._(t):this.set(t||0,s||0)}set(t,s){this.Va=+t,this.Ua=+s}_(t){this.Va=t.Va,this.Ua=t.Ua}equals(t){return this.Va===t.Va&&this.Ua===t.Ua}za(t,s){return this.Va===t&&this.Ua===s}oa(t,s){return t[s]===Math.fround(this.Va)&&t[s+1]===Math.fround(this.Ua)}Ja(t){this.Va=+t}qa(){return this.Va}$a(t){this.Ua=+t}Xa(){return this.Ua}toArray(){return[this.Va,this.Ua]}Qo(){return new Float64Array(this.toArray())}ta(t,s){t[s++]=this.Va,t[s]=this.Ua}offset(t,s){this.Va+=+t,this.Ua+=+s}scale(t,s){this.Va*=t,this.Ua*=s}_t(t,s){this.Va/=t,this.Ua/=s}round(){this.Va=Math.round(this.Va),this.Ua=Math.round(this.Ua)}floor(){this.Va=Math.floor(this.Va),this.Ua=Math.floor(this.Ua)}ceil(){this.Va=Math.ceil(this.Va),this.Ua=Math.ceil(this.Ua)}angle(){return Et.yr(0,0,this.Va,this.Ua)}Ka(){return this.Va*this.Va+this.Ua*this.Ua}length(){return Math.hypot(this.Va,this.Ua)}Ya(t,s){const i=this.Va*s-this.Ua*t;this.Ua=this.Ua*s+this.Va*t,this.Va=i}rotate(t){0!==t&&this.Ya(Math.sin(t),Math.cos(t))}Za(t,s,i){0===t||s===this.Va&&i===this.Ua||(this.Va-=s,this.Ua-=i,this.Ya(Math.sin(t),Math.cos(t)),this.Va+=+s,this.Ua+=+i)}move(t,s){0!==s&&(this.Va+=Math.cos(t)*s,this.Ua+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Va/=t,this.Ua/=t)}lr(t,s){this.Va=Et.lr(this.Va,t,s),this.Ua=Et.lr(this.Ua,t,s)}At(t){return this.Va*t.Va+this.Ua*t.Ua}reverse(){this.Va=-this.Va,this.Ua=-this.Ua}Qa(){let t=this.Va;return this.Va=this.Ua,this.Ua=-t,this}}}{const Rt=self.Os;Rt.Rect=class{constructor(t,s,i,e){this.tu=NaN,this.su=NaN,this.iu=NaN,this.eu=NaN,this.tu=0,this.su=0,this.iu=0,this.eu=0,t instanceof Rt.Rect?this._(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.tu=+t,this.su=+s,this.iu=+i,this.eu=+e}hu(t,s,i,e){s=+s,this.tu=t=+t,this.su=s,this.iu=t+ +i,this.eu=s+ +e}_(t){this.tu=+t.tu,this.su=+t.su,this.iu=+t.iu,this.eu=+t.eu}clone(){return new Rt.Rect(this.tu,this.su,this.iu,this.eu)}static ru(t,s){const i=new Rt.Rect;return i.nu(Math.min(t.tu,s.tu)),i.ou(Math.min(t.su,s.su)),i.au(Math.max(t.iu,s.iu)),i.uu(Math.max(t.eu,s.eu)),i}static lu(t){return new Rt.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.tu===t.tu&&this.su===t.su&&this.iu===t.iu&&this.eu===t.eu}cu(t,s,i,e){return this.tu===t&&this.su===s&&this.width()===i&&this.height()===e}oa(t,s){return t[s]===Math.fround(this.tu)&&t[s+1]===Math.fround(this.su)&&t[s+2]===Math.fround(this.iu)&&t[s+3]===Math.fround(this.eu)}nu(t){this.tu=+t}fu(){return this.tu}ou(t){this.su=+t}du(){return this.su}au(t){this.iu=+t}pu(){return this.iu}uu(t){this.eu=+t}mu(){return this.eu}toArray(){return[this.tu,this.su,this.iu,this.eu]}Qo(){return new Float64Array(this.toArray())}gu(){return new DOMRect(this.tu,this.su,this.width(),this.height())}static yu(t){return Rt.ir(Rt.Rect,t.left,t.top,t.right,t.bottom)}ta(t,s){t[s++]=this.tu,t[s++]=this.su,t[s++]=this.iu,t[s]=this.eu}wu(t,s){t[s++]=this.tu,t[s++]=this.su,t[s++]=this.iu,t[s++]=this.su,t[s++]=this.iu,t[s++]=this.eu,t[s++]=this.tu,t[s]=this.eu}Su(t,s,i){t[s++]=this.tu,t[s++]=this.su,t[s++]=i,t[s++]=this.iu,t[s++]=this.su,t[s++]=i,t[s++]=this.iu,t[s++]=this.eu,t[s++]=i,t[s++]=this.tu,t[s++]=this.eu,t[s]=i}width(){return this.iu-this.tu}height(){return this.eu-this.su}bu(){return(this.tu+this.iu)/2}vu(){return(this.su+this.eu)/2}offset(t,s){s=+s,this.tu+=t=+t,this.su+=s,this.iu+=t,this.eu+=s}offsetLeft(t){this.tu+=+t}offsetTop(t){this.su+=+t}Mu(t){this.iu+=+t}Gu(t){this.eu+=+t}xu(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.su<this.eu?this.tu<this.iu?this.eu=this.su+this.width():this.eu=this.su-this.width():this.tu<this.iu?this.eu=this.su-this.width():this.eu=this.su+this.width()}Tu(t,s){s=+s,this.tu-=t=+t,this.su-=s,this.iu+=t,this.eu+=s}_u(t,s){s=+s,this.tu+=t=+t,this.su+=s,this.iu-=t,this.eu-=s}multiply(t,s){this.tu*=t,this.su*=s,this.iu*=t,this.eu*=s}_t(t,s){this.tu/=t,this.su/=s,this.iu/=t,this.eu/=s}Iu(t){this.tu=+t-this.tu,this.iu=+t-this.iu}Cu(t){this.su=+t-this.su,this.eu=+t-this.eu}Eu(t,s){const i=this.width(),e=this.height(),h=this.fu()+i*t,r=this.du()+e*s;this.hu(h-e*s,r-i*t,e,i)}Ru(){const t=this.tu;this.tu=this.iu,this.iu=t}Pu(){const t=this.su;this.su=this.eu,this.eu=t}Au(t){const s=this.su;this.su=+t-this.eu,this.eu=+t-s}round(){this.tu=Math.round(this.tu),this.su=Math.round(this.su),this.iu=Math.round(this.iu),this.eu=Math.round(this.eu)}Fu(){this.tu=Math.ceil(this.tu),this.su=Math.ceil(this.su),this.iu=Math.floor(this.iu),this.eu=Math.floor(this.eu)}Du(){this.tu=Math.floor(this.tu),this.su=Math.floor(this.su),this.iu=Math.ceil(this.iu),this.eu=Math.ceil(this.eu)}floor(){this.tu=Math.floor(this.tu),this.su=Math.floor(this.su),this.iu=Math.floor(this.iu),this.eu=Math.floor(this.eu)}ceil(){this.tu=Math.ceil(this.tu),this.su=Math.ceil(this.su),this.iu=Math.ceil(this.iu),this.eu=Math.ceil(this.eu)}lr(t,s,i,e){this.tu=Math.max(this.tu,+t),this.su=Math.max(this.su,+s),this.iu=Math.min(this.iu,+i),this.eu=Math.min(this.eu,+e)}Ou(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.tu=Rt.lr(this.tu,t,i),this.su=Rt.lr(this.su,s,e),this.iu=Rt.lr(this.iu,t,i),this.eu=Rt.lr(this.eu,s,e)}normalize(){this.tu>this.iu&&this.Ru(),this.su>this.eu&&this.Pu()}Lu(t){return!(t.iu<this.tu||t.eu<this.su||t.tu>this.iu||t.su>this.eu)}ku(t,s,i){return!(t.iu+s<this.tu||t.eu+i<this.su||t.tu+s>this.iu||t.su+i>this.eu)}Nu(t,s){return t>=this.tu&&t<=this.iu&&s>=this.su&&s<=this.eu}Bu(t){return t.tu>=this.tu&&t.su>=this.su&&t.iu<=this.iu&&t.eu<=this.eu}Wu(t){t.tu<this.tu&&(this.tu=+t.tu),t.su<this.su&&(this.su=+t.su),t.iu>this.iu&&(this.iu=+t.iu),t.eu>this.eu&&(this.eu=+t.eu)}ju(t){this.tu=Rt.Dt(t.tu,t.iu,this.tu),this.su=Rt.Dt(t.su,t.eu,this.su),this.iu=Rt.Dt(t.tu,t.iu,this.iu),this.eu=Rt.Dt(t.su,t.eu,this.eu)}}}{const Pt=self.Os;Pt.Hu=class{constructor(t,s,i,e,h,r,n,o){this.Vu=NaN,this.Uu=NaN,this.zu=NaN,this.Ju=NaN,this.qu=NaN,this.$u=NaN,this.Xu=NaN,this.Ku=NaN,this.Vu=0,this.Uu=0,this.zu=0,this.Ju=0,this.qu=0,this.$u=0,this.Xu=0,this.Ku=0,t instanceof Pt.Hu?this._(t):this.set(t||0,s||0,i||0,e||0,h||0,r||0,n||0,o||0)}set(t,s,i,e,h,r,n,o){this.Vu=+t,this.Uu=+s,this.zu=+i,this.Ju=+e,this.qu=+h,this.$u=+r,this.Xu=+n,this.Ku=+o}Yu(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}_(t){this.Vu=t.Vu,this.Uu=t.Uu,this.zu=t.zu,this.Ju=t.Ju,this.qu=t.qu,this.$u=t.$u,this.Xu=t.Xu,this.Ku=t.Ku}equals(t){return this.Vu===t.Vu&&this.Uu===t.Uu&&this.zu===t.zu&&this.Ju===t.Ju&&this.qu===t.qu&&this.$u===t.$u&&this.Xu===t.Xu&&this.Ku===t.Ku}Zu(t){this.Vu=+t}Xr(){return this.Vu}Qu(t){this.Uu=+t}Kr(){return this.Uu}tl(t){this.zu=+t}Yr(){return this.zu}sl(t){this.Ju=+t}Zr(){return this.Ju}il(t){this.qu=+t}Qr(){return this.qu}el(t){this.$u=+t}tn(){return this.$u}hl(t){this.Xu=+t}sn(){return this.Xu}rl(t){this.Ku=+t}hn(){return this.Ku}nl(){return new DOMQuad(new DOMPoint(this.Vu,this.Uu),new DOMPoint(this.zu,this.Ju),new DOMPoint(this.qu,this.$u),new DOMPoint(this.Xu,this.Ku))}static ol(t){return Pt.ir(Pt.Hu,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Vu,this.Uu,this.zu,this.Ju,this.qu,this.$u,this.Xu,this.Ku]}Qo(){return new Float64Array(this.toArray())}ta(t,s){t[s++]=this.Vu,t[s++]=this.Uu,t[s++]=this.zu,t[s++]=this.Ju,t[s++]=this.qu,t[s++]=this.$u,t[s++]=this.Xu,t[s]=this.Ku}al(t,s,i){t[s++]=this.Vu,t[s++]=this.Uu,t[s++]=i,t[s++]=this.zu,t[s++]=this.Ju,t[s++]=i,t[s++]=this.qu,t[s++]=this.$u,t[s++]=i,t[s++]=this.Xu,t[s++]=this.Ku,t[s]=i}offset(t,s){s=+s,this.Vu+=t=+t,this.Uu+=s,this.zu+=t,this.Ju+=s,this.qu+=t,this.$u+=s,this.Xu+=t,this.Ku+=s}round(){this.Vu=Math.round(this.Vu),this.Uu=Math.round(this.Uu),this.zu=Math.round(this.zu),this.Ju=Math.round(this.Ju),this.qu=Math.round(this.qu),this.$u=Math.round(this.$u),this.Xu=Math.round(this.Xu),this.Ku=Math.round(this.Ku)}floor(){this.Vu=Math.floor(this.Vu),this.Uu=Math.floor(this.Uu),this.zu=Math.floor(this.zu),this.Ju=Math.floor(this.Ju),this.qu=Math.floor(this.qu),this.$u=Math.floor(this.$u),this.Xu=Math.floor(this.Xu),this.Ku=Math.floor(this.Ku)}ceil(){this.Vu=Math.ceil(this.Vu),this.Uu=Math.ceil(this.Uu),this.zu=Math.ceil(this.zu),this.Ju=Math.ceil(this.Ju),this.qu=Math.ceil(this.qu),this.$u=Math.ceil(this.$u),this.Xu=Math.ceil(this.Xu),this.Ku=Math.ceil(this.Ku)}ul(t){this.Vu=t.tu,this.Uu=t.su,this.zu=t.iu,this.Ju=t.su,this.qu=t.iu,this.$u=t.eu,this.Xu=t.tu,this.Ku=t.eu}ll(t,s){0===s?this.ul(t):this.cl(t,Math.sin(s),Math.cos(s))}cl(t,s,i){const e=t.tu*s,h=t.su*s,r=t.iu*s,n=t.eu*s,o=t.tu*i,a=t.su*i,u=t.iu*i,l=t.eu*i;this.Vu=o-h,this.Uu=a+e,this.zu=u-h,this.Ju=a+r,this.qu=u-n,this.$u=l+r,this.Xu=o-n,this.Ku=l+e}fl(t){t.set(Math.min(this.Vu,this.zu,this.qu,this.Xu),Math.min(this.Uu,this.Ju,this.$u,this.Ku),Math.max(this.Vu,this.zu,this.qu,this.Xu),Math.max(this.Uu,this.Ju,this.$u,this.Ku))}Nu(t,s){let i=this.zu-this.Vu,e=this.Ju-this.Uu,h=this.qu-this.Vu,r=this.$u-this.Uu,n=t-this.Vu,o=s-this.Uu,a=i*i+e*e,u=i*h+e*r,l=i*n+e*o,c=h*h+r*r,f=h*n+r*o,d=1/(a*c-u*u),p=(c*l-u*f)*d,m=(a*f-u*l)*d;return 0<=p&&0<m&&p+m<1||(m=((a=(i=this.Xu-this.Vu)*i+(e=this.Ku-this.Uu)*e)*f-(u=i*h+e*r)*(l=i*n+e*o))*(d=1/(a*c-u*u)),0<=(p=(c*l-u*f)*d)&&0<m&&p+m<1)}bu(){return(this.Vu+this.zu+this.qu+this.Xu)/4}vu(){return(this.Uu+this.Ju+this.$u+this.Ku)/4}dl(t,s,i,e){return!(!this.Nu(t,s)&&!this.Nu(i,e))||Pt.$r(t,s,i,e,this)}pl(t){let s=t.bu(),i=t.vu();if(this.Nu(s,i))return!0;if(s=this.bu(),i=this.vu(),t.Nu(s,i))return!0;const e=this.Vu,h=this.Uu,r=this.zu,n=this.Ju,o=this.qu,a=this.$u,u=this.Xu,l=this.Ku;return Pt.$r(e,h,r,n,t)||Pt.$r(r,n,o,a,t)||Pt.$r(o,a,u,l,t)||Pt.$r(u,l,e,h,t)}ml(){const t=this.Vu,s=this.Uu;this.Vu=this.zu,this.Uu=this.Ju,this.zu=this.qu,this.Ju=this.$u,this.qu=this.Xu,this.$u=this.Ku,this.Xu=t,this.Ku=s}gl(){this.yl(0,2),this.yl(1,3),this.yl(6,4),this.yl(7,5)}wl(){this.yl(0,6),this.yl(1,7),this.yl(2,4),this.yl(3,5)}Sl(){this.yl(2,6),this.yl(3,7)}yl(t,s){const i=this.bl(t);this.vl(t,this.bl(s)),this.vl(s,i)}bl(t){switch(t){case 0:return this.Vu;case 1:return this.Uu;case 2:return this.zu;case 3:return this.Ju;case 4:return this.qu;case 5:return this.$u;case 6:return this.Xu;case 7:return this.Ku;default:throw new RangeError("invalid quad point index")}}vl(t,s){switch(s=+s,t){case 0:this.Vu=s;break;case 1:this.Uu=s;break;case 2:this.zu=s;break;case 3:this.Ju=s;break;case 4:this.qu=s;break;case 5:this.$u=s;break;case 6:this.Xu=s;break;case 7:this.Ku=s;break;default:throw new RangeError("invalid quad point index")}}}}{const At=self.Os,Ft=[0,0,1,0,1,1,0,1],Dt=At.ir(At.Hu);At.Ml=class extends At.Qh{constructor(t,s=!0){super(),t=t||Ft,this.Gl=Float64Array.from(t),this.xl=new At.Rect,this.Tl=!0,this._l=s}er(){}Il(){return this.Gl}Cl(){return this.Gl.length/2}El(t){this.Gl.length===t.length?this.Gl.set(t):this.Gl=Float64Array.from(t),this.Tl=!0}Rl(){this.El(Ft)}_(t){this.El(t.Gl)}Pl(){this.Tl=!0}Al(){if(this.Tl){let i=this.Gl,e=i[0],h=i[1],r=e,n=h;for(let t=0,s=i.length;t<s;t+=2){const o=i[t],a=i[t+1];o<e&&(e=o),o>r&&(r=o),a<h&&(h=a),a>n&&(n=a)}this.xl.set(e,h,r,n),this.Tl=!1}}ul(t,s,i){let e=this.Gl;8!==e.length&&(e=new Float64Array(8),this.Gl=e),e[0]=t.fu()-s,e[1]=t.du()-i,e[2]=t.pu()-s,e[3]=t.du()-i,e[4]=t.pu()-s,e[5]=t.mu()-i,e[6]=t.fu()-s,e[7]=t.mu()-i,this.xl._(t),0===s&&0===i||this.xl.offset(-s,-i),this.Tl=!1}Fl(t,s,i){Dt._(t),Dt.offset(s,i),this.El(Dt.toArray()),this.Tl=!0}transform(t,s,i){let e=0,h=1;0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.Dl(t,s,e,h)}Dl(i,e,h,r){const n=this.Gl;for(let t=0,s=n.length;t<s;t+=2){const o=t+1,a=n[t]*i,u=n[o]*e;n[t]=a*r-u*h,n[o]=u*r+a*h}this.Tl=!0}offset(i,e){const h=this.Gl;for(let t=0,s=h.length;t<s;t+=2)h[t]+=i,h[t+1]+=e}Nu(i,e){const h=this.Gl;if(i===h[0]&&e===h[1])return!0;this.Al();let t=this.xl,r=t.fu()-110,n=t.du()-101,o=t.pu()+131,a=t.mu()+120,u=0,l=0,c,f,d=0,p=0,m,g,y=(c=r<i?(u=r,i):(u=i,r),f=n<e?(l=n,e):(l=e,n),m=o<i?(d=o,i):(d=i,o),g=a<e?(p=a,e):(p=e,a),0),w=0;for(let t=0,s=h.length;t<s;t+=2){const S=(t+2)%s,b=h[t],v=h[t+1],M=h[S],G=h[1+S];At.qr(r,n,i,e,u,c,l,f,b,v,M,G)&&++y,At.qr(o,a,i,e,d,m,p,g,b,v,M,G)&&++w}return y%2==1||w%2==1}Ol(t,c,f){const d=t.Gl,p=this.Gl;if(this.Nu(d[0]+c,d[1]+f))return!0;if(t.Nu(p[0]-c,p[1]-f))return!0;for(let s=0,l=p.length;s<l;s+=2){let t=(s+2)%l,i=p[s],e=p[s+1],h=p[t],r=p[1+t],n=0,o=0,a,u;a=i<h?(n=i,h):(n=h,i),u=e<r?(o=e,r):(o=r,e);for(let t=0,s=d.length;t<s;t+=2){const m=(t+2)%s,g=d[t]+c,y=d[t+1]+f,w=d[m]+c,S=d[1+m]+f;if(At.qr(i,e,h,r,n,a,o,u,g,y,w,S))return!0}}return!1}dl(i,e,h,r,n,o){if(this.Nu(h-i,r-e))return!0;if(this.Nu(n-i,o-e))return!0;let a=0,u=0,l,c;l=h<n?(a=h,n):(a=n,h),c=r<o?(u=r,o):(u=o,r);const f=this.Gl;for(let t=0,s=f.length;t<s;t+=2){const d=(t+2)%s,p=f[t]+i,m=f[t+1]+e,g=f[d]+i,y=f[1+d]+e;if(At.qr(h,r,n,o,a,l,u,c,p,m,g,y))return!0}return!1}gl(i){const e=this.Gl;for(let t=0,s=e.length;t<s;t+=2)e[t]=2*i-e[t];this.Tl=!0}wl(i){const e=this.Gl;for(let t=0,s=e.length;t<s;t+=2){const h=t+1;e[h]=2*i-e[h]}this.Tl=!0}Sl(){const i=this.Gl;for(let t=0,s=i.length;t<s;t+=2){const e=t+1,h=i[t];i[t]=i[e],i[e]=h}this.Tl=!0}Ll(){let i=this.Gl,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t];return e/this.Cl()}kl(){let i=this.Gl,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t+1];return e/this.Cl()}Nl(){return this.Gl}Bl(){return this.Cl()}Wl(){return this._l}}}{const Ot=self.Os;Ot.jl=class extends Ot.Qh{constructor(t){if(super(),this.Hl=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}er(){this.Vl(),this.Hl=null}Ul(){return 0===this.Hl.size}Vl(){const t=this.Hl;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){let e=this.Hl,h=e.get(t);h||(h=new Map,e.set(t,h)),h.set(s,i)}Qs(t,s){const i=this.Hl.get(t);return i&&i.get(s)}Zs(t,s){const i=this.Hl.get(t);return!!i&&i.has(s)}zl(t,s){const i=this.Hl,e=i.get(t);if(!e)return!1;const h=e.delete(s);return h&&0===e.size&&i.delete(t),h}Jl(t){const s=this.Hl,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[e,h]of s.entries())h.delete(t)&&0===h.size&&s.delete(e)}ql(){let t=0;for(const s of this.Hl.values())t+=s.size;return t}*values(){for(const t of this.Hl.values())yield*t.values()}*$l(){for(const[t,s]of this.Hl.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.Hl.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const Lt=self.Os;Lt.Xl=class extends Lt.Qh{constructor(){super(),this.Kl=new Set,this.Yl=[],this.Zl=!1}er(){this.Vl()}Vl(){this.Kl.clear(),Lt.Pn(this.Yl),this.Zl=!1}Ql(t){this.Kl.has(t)||(this.Kl.add(t),this.Zl)||this.Yl.push(t)}Zs(t){return this.Kl.has(t)}zl(t){this.Kl.delete(t)&&(this.Zl=!0)}ql(){return this.Kl.size}Ul(){return 0===this.Kl.size}tc(){return this.Zl&&(this.sc(),this.Zl=!1),this.Yl}sc(){const t=this.Yl;Lt.Pn(t);for(const s of this.Kl)t.push(s)}}}{const kt=self.Os,Nt=new Map,Bt=new Map,Wt=new Map,jt=new Map,Ht=new Map,Vt=new Map,Ut=new Map,zt=new Map,Jt=new Map,qt=(Jt.set("linear","noease"),Jt.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),$t=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Xt=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),Kt=(self.ic=class hs{constructor(){}static ec(){return"default"}static hc(){return"noease"}static rc(t){return Xt.get(t)}static nc(s,...i){this.oc();let t,e=(s?(Wt.has(s)||Wt.set(s,new Map),[...(t=Wt.get(s)).keys()].filter(t=>!hs.ac(t,s)||hs.ac(t,s).transition.IsForAnyPurpose())):[...(t=Ht).keys()]).sort();return[...Bt.keys()].concat(e).filter(t=>!i.includes(t))}static uc(){this.oc();const t=[...Ht.keys()];return t.sort(),[...Bt.keys()].concat(t)}static lc(){this.oc();const t=[...Ht.keys()];return t.sort(),t}static cc(t){for(const s of qt){const i=self.lang("ui.bars.timeline.eases."+s);if(i===t)return!0}for(const e of $t){const h=self.lang("ui.bars.timeline.short-eases."+e);if(h===t)return!0}}static fc(t){return this.oc(),[...Bt.keys()].includes(t)}static dc(t){const s=Jt.get(t);return s?Nt.get(s):hs.fc(t)?Nt.get(t):Ut.has(t)?Ut.get(t):void 0}static mc(t){return this.oc(),zt.get(t)}static yc(t,s){this.oc();const i=hs.dc(t);if(i)return i;if(s)return Wt.get(s).get(t);throw new Error("missing ease function")}static ac(t,s){this.oc();const i=jt.get(s);if(i)return i.get(t)}static wc(t,s){this.oc();const i=hs.dc(t);return!!i||!!Wt.get(s).get(t)}static Sc(t){this.oc();const s=hs.dc(t);return s||Ht.get(t)}static vc(t){return this.oc(),Vt.get(t)}static Mc(t){this.oc();const s=this.uc();return s[t]}static Gc(t,s){this.oc();const i=this.nc(s);return i.indexOf(t)}static xc(t){return this.Gc(t)}static oc(){0===Nt.size&&(this.Tc("default",()=>{}),this.Tc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.Tc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.Tc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.Tc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.Tc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.Tc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.Tc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.Tc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.Tc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.Tc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.Tc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.Tc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.Tc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.Tc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.Tc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.Tc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.Tc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.Tc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.Tc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Tc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.Tc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.Tc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.Tc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.Tc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.Tc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Tc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.Tc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Tc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.Tc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.Tc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.Tc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this._c("cubicbezier",this.Ic),this._c("spline",this.Cc))}static Tc(t,s,i=!1){if("function"==typeof s)hs.Ec(t,s,"predefined");else{if(!kt.Le(s))throw new Error("unexpected arguments");if(self.BuiltInTransition){const h=kt.ir(self.BuiltInTransition,t,i);h.SetFromJson(s),hs.Ec(t,(t,s,i,e)=>h.Rc(t,s,i,e),"predefined"),zt.set(t,h)}else{const r=kt.ir(kt.Pc,[t,s.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);r.Ac(i),hs.Ec(t,(t,s,i,e)=>r.Rc(t,s,i,e),"predefined")}}}static _c(t,s){hs.Ec(t,s,"private")}static Fc(t,s,i,e){this.oc(),hs.Ec(t,s,"custom",i,e)}static Dc(t,s){if(!this.fc(t)&&![...Ut.keys()].includes(t)){const i=Wt.get(s),e=(i&&i.delete(t),jt.get(s));e&&e.delete(t)}}static Ec(t,s,i,e,h){switch(i){case"predefined":Nt.set(t,s),Bt.set(t,s);break;case"custom":if(e){Wt.has(e)||Wt.set(e,new Map),jt.has(e)||jt.set(e,new Map);const r=Wt.get(e),n=(r.set(t,s),jt.get(e));n.set(t,h)}else Ht.set(t,s),Vt.set(t,h);break;case"private":Nt.set(t,s),Ut.set(t,s);break;default:throw new Error("unexpected ease mode")}}static Oc(t,s,i,e){return 0===e?s:i*t/e+s}static Ic(t,s,i,e,h){const r=s,n=3*t*(i-s),o=3*t**2*(s+e-2*i),a=t**3*(h-s+3*i-3*e);return r+n+o+a}static Cc(t,s,i,e,h,r,n,o,a,u){if(e===h&&r===n)return t;const l=es(t,s,e,r,o,u),c=Zt(i,h,n,a),f=Qt(i,h,n,a),d=ts(i,h,n,a);return ss(l,c,f,d)}static Lc(t,s,i,e){const h=[],r=Zt(t,s,i,e),n=Qt(t,s,i,e),o=ts(t,s,i,e);for(let t=0;t<Kt;++t){const a=ss(t*Yt,r,n,o);h.push(a)}return h}},11),Yt=1/(Kt-1),Zt=(t,s,i,e)=>e-3*i+3*s-t,Qt=(t,s,i,e)=>3*i-6*s+3*t,ts=(t,s,i,e)=>3*(s-t),ss=(t,s,i,e)=>((s*t+i)*t+e)*t,is=(t,s,i,e)=>3*s*t*t+2*i*t+e,es=(n,t,s,i,e,h)=>{if(1==n)return 1;let o=0,r=1,a=h[r],u=Kt-1;for(Kt;r!=u&&a<=n;)r++,a=h[r],o+=Yt;r--;let l=(n-(a=h[r]))/(h[r+1]-a),c=o+l*Yt,f=Zt(t,s,i,e),d=Qt(t,s,i,e),p=ts(t,s,i,e),m=is(c,f,d,p);if(0===m)return c;if(.01<=m){for(let t=0;t<4;++t){const g=ss(c,f,d,p)-n,y=is(c,f,d,p);c-=g/y}return c}{let s=o,i=o+Yt,e=0,h,r;do{c=s+(i-s)/2;let t=ss(c,f,d,p)-n;0<t?i=c:s=c,h=1e-7<Math.abs(t),r=++e<10}while(h&&r);return c}}}{let o=function(t){rs.ve(t)};o;const rs=self.Os;rs.kc=class{constructor(t){this.Nc=[],this.nr=t||"",this.Bc=0}er(){this.Vl(),this.Nc=null}Wc(){return this.nr}Vl(){rs.An(this.Nc),this.Bc=0}jc(){return this.Bc}Hc(t=Math.random()*this.jc()){let s=0;for(const[i,e]of this.Nc)if(t<(s+=i))return e;return 0}Vc(t,s){o(s),this.Bc+=t,this.Nc.push([t,s])}Uc(s,i){o(i);const e=0===s;for(let t=0;t<this.Nc.length;t++){const h=this.Nc[t],r=e||h[0]===s,n=h[1]===i;if(r&&n){this.Nc.splice(t,1),this.Bc-=h[0];break}}}zc(){return JSON.stringify(this.Nc)}static Jc(t,s){const i=new rs.kc(s),e=JSON.parse(t);for(const h of e){const r=h[0],n=h[1];i.Vc(r,n)}return i}}}{let t=self.Os,i=0;t.qc=class{constructor(t,s){this.$c=t,this.Xc=s,this.Kc=i++,this.$c.Yc("runtime","screen-reader-text",{type:"create",id:this.Kc,text:this.Xc})}er(){this.$c.Yc("runtime","screen-reader-text",{type:"release",id:this.Kc}),this.$c=null,this.Xc="",this.Kc=-1}Zc(t){this.Xc!==t&&(this.Xc=t,this.$c.Yc("runtime","screen-reader-text",{type:"update",id:this.Kc,text:this.Xc}))}}}{const ns=self.Os;ns.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.Qc=!1,this.tf=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.tf)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Qc=!0}}}{const os=self.Os;os.Event.if=class extends os.Qh{constructor(t){super(),this.ef=t,this.hf=[],this.rf=new Set,this.nf=[],this.uf=new Set,this.lf=0,this.cf=[]}er(){0<this.lf||(os.Pn(this.hf),this.rf.clear(),os.Pn(this.nf),this.uf.clear(),os.Pn(this.cf),os.er(this))}ff(t,s){this.df()?this.cf.push({pf:"add",mf:t,capture:s}):s?this.rf.has(t)||(this.hf.push(t),this.rf.add(t)):this.uf.has(t)||(this.nf.push(t),this.uf.add(t))}gf(t,s){this.df()?this.cf.push({pf:"remove",mf:t,capture:s}):s?this.rf.has(t)&&(this.rf.delete(t),os.kn(this.hf,t)):this.uf.has(t)&&(this.uf.delete(t),os.kn(this.nf,t))}yf(){return!this.hf.length&&!this.nf.length}df(){return 0<this.lf}wf(){const t=new Set,s=new Set;for(const i of this.cf)if("add"===i.pf)this.ff(i.mf,i.capture),(i.capture?s:t).delete(i.mf);else{if("remove"!==i.pf)throw new Error("invalid op");(i.capture?(this.rf.delete(i.mf),s):(this.uf.delete(i.mf),t)).add(i.mf)}os.Wn(this.nf,t),os.Wn(this.hf,s),os.Pn(this.cf)}Sf(i){this.bf();let e=!1;for(let t=0,s=this.hf.length;t<s;++t)if(this.hf[t](i),i.Qc){e=!0;break}if(!e)for(let t=0,s=this.nf.length;t<s&&(this.nf[t](i),!i.Qc);++t);return this.vf(),!i.defaultPrevented}Mf(i){this.bf();for(let t=0,s=this.hf.length;t<s;++t)this.hf[t](i);for(let t=0,s=this.nf.length;t<s;++t)this.nf[t](i);return this.vf(),!0}bf(){this.lf++}vf(){this.lf--,0===this.lf&&0<this.cf.length&&this.wf()}Gf(t){t?this.bf():this.vf()}xf(i){let e=[];for(let s=0,t=this.hf.length;s<t;++s){let t=this.hf[s];e.push(os.Tf(()=>t(i)))}for(let s=0,t=this.nf.length;s<t;++s){let t=this.nf[s];e.push(os.Tf(()=>t(i)))}return Promise.all(e).then(()=>!i.defaultPrevented)}_f(i){const e=[];this.bf();for(let t=0,s=this.hf.length;t<s;++t){const h=this.hf[t](i);h instanceof Promise&&e.push(h)}for(let t=0,s=this.nf.length;t<s;++t){const r=this.nf[t](i);r instanceof Promise&&e.push(r)}return this.vf(),e.length?Promise.all(e).then(()=>!i.defaultPrevented):!i.defaultPrevented}async If(t){return this._f(t)}async Cf(i){this.bf();for(let t=0,s=this.hf.length;t<s;++t){const e=this.hf[t](i);e instanceof Promise&&await e}for(let t=0,s=this.nf.length;t<s;++t){const h=this.nf[t](i);h instanceof Promise&&await h}return this.vf(),!i.defaultPrevented}*Ef(i){this.bf();for(let t=0,s=this.hf.length;t<s;++t){const e=this.hf[t](i);os.Fo(e)&&(yield*e)}for(let t=0,s=this.nf.length;t<s;++t){const h=this.nf[t](i);os.Fo(h)&&(yield*h)}this.vf()}}}{const as=self.Os;as.Event.Rf=class extends as.Qh{constructor(){super(),this.Pf=new Map,this.Af=!1}er(){if(this.Af)throw new Error("already released");this.Ff(),this.Af=!0,as.er(this)}hr(){return this.Af}Ff(){if(this.Pf){for(let t of this.Pf.values())t.er();this.Pf.clear()}}Df(t,s){let i=this.Pf.get(t);return i||(s?(i=as.ir(as.Event.if,t),this.Pf.set(t,i),i):null)}Of(t){return this.Pf.has(t)}addEventListener(t,s,i){let e=this.Df(t,!0);e.ff(s,!!i)}removeEventListener(t,s,i){let e=this.Df(t,!1);e&&(e.gf(s,!!i),e.yf())&&this.Pf.delete(t)}dispatchEvent(t){const s=this.Df(t.type,!1);return!s||(t.cancelable?s.Sf(t):s.Mf(t))}Lf(t){const s=this.Df(t.type,!1);return s?(t.tf=!0,s.xf(t)):Promise.resolve(!0)}async kf(t){const s=this.Df(t.type,!1);if(!s)return!0;this.Pf.delete(t.type),t.tf=!0;const i=await s.xf(t);return s.er(),i}async Nf(t){const s=this.Df(t.type,!1);return!s||s.If(t)}Bf(t){const s=this.Df(t.type,!1);return!s||s._f(t)}async Wf(t){const s=this.Df(t.type,!1);return!s||s.Cf(t)}jf(t){const s=this.Df(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.Ef(t)}Gf(t){for(const s of this.Pf.values())s.Gf(t)}}}{let r=function(t){c=u&&0===f?requestIdleCallback(s,{timeout:i}):setTimeout(s,0<f?1:t)},s=function(h){if(c=-1,l.length){let i=performance.now(),e=i,t=0,s;for(;n(l.shift()),e=performance.now(),++t,s=(e-i)/t*1.1,l.length&&(u&&0===f&&void 0!==h?s<h.timeRemaining():e-i+s<o););if(-1===c&&l.length){let t=e-i,s=Math.max(a-t,4);r(s)}}},n=function(s){let t;try{t=s.mf()}catch(t){return void s.reject(t)}s.resolve(t)},t=(r,s,n,self.Os),o=12,a=16,i=35,u="undefined"!=typeof requestIdleCallback,l=[],c=-1,f=0,h=t.ii.Zs("disable-asyncify");h&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),t.Tf=function(i){let e=null;return t.isDebug&&(e=t.ae()),new Promise((t,s)=>{l.push({mf:i,resolve:t,reject:s,stack:e}),h?n(l.pop()):-1===c&&r(a)})},t.Tf.Hf=function(t){if(t)++f;else if(--f<0)throw new Error("already turned off high throughput mode")}}{let t=function(){r=-1},s=function(){n=-1,o=-1;let i=Date.now();for(let s of a)if(s.Vf(i)){let t=s.Uf();(-1===o||t<o)&&(o=t)}else a.delete(s);if(-1!==o){let t=Math.max(o-i+h,e);n=self.setTimeout(s,t)}},i=(t,s,self.Os),e=1e3,h=100,r=-1,n=(i.zf=function(){return-1===r&&(r=Date.now(),self.setTimeout(t,16)),r},-1),o=-1,a=new Set;i.Jf=class{constructor(t,s){this.qf=t,this.$f=1e3*s,this.Xf=0,this.Kf=!1}Yf(){let t=i.zf();this.Xf=t+this.$f,this.Kf||(a.add(this),this.Kf=!0),-1===n?(o=this.Xf,n=self.setTimeout(s,this.$f+h)):this.Xf<o&&o>t+e&&(self.clearTimeout(n),o=this.Xf,n=self.setTimeout(s,this.$f+h))}Vf(t){return!(t>=this.Xf)||(this.qf()?(this.Xf=t+this.$f,!0):this.Kf=!1)}Uf(){return this.Xf}Zf(){this.Kf&&(a.delete(this),this.Kf=!1,0===a.size)&&-1!==n&&(self.clearTimeout(n),n=-1,o=-1)}er(){this.Zf(),this.qf=null}}}{const us=self.Os;us.Qf=class ls{constructor(t){this.t0=!1,this.s0=t}i0(){this.t0||(this.t0=!0,this.s0&&(this.s0(),this.s0=null))}e0(){return this.t0}er(){this.i0()}static er(t){return new ls(()=>t.er())}static h0(s,i,e,h,t){if(null==h)h=!1;else if("boolean"!=typeof h&&"object"!=typeof h)throw new TypeError("invalid event listener options");if(t&&(e=e.bind(t)),i.includes(" ")){i=i.split(" ");const r=new us.r0;for(let t of i)s.addEventListener(t,e,h),r.Ql(us.ir(us.Qf,()=>s.removeEventListener(t,e,h)));return r}return s.addEventListener(i,e,h),us.ir(us.Qf,()=>s.removeEventListener(i,e,h))}},us.n0=class extends us.Qf{o0(t){this.s0=t}},us.r0=class extends us.Qf{constructor(...s){super(),this.a0=new Set;for(let t of s)this.Ql(t)}Ql(...s){if(this.t0)throw new Error("already disposed");for(let t of s)this.a0.add(t)}u0(t){if(this.t0)throw new Error("already disposed");this.a0.delete(t)}l0(){if(this.t0)throw new Error("already disposed");if(this.a0){for(let t of this.a0)t.i0();this.a0.clear()}}e0(){return this.t0}i0(){if(this.t0)throw new Error("already disposed");this.t0=!0;for(let t of this.a0)t.i0();this.a0.clear(),this.a0=null}er(){this.i0()}}}{const cs=self.Os;cs.c0=class extends cs.Qh{constructor(){super(),this.f0=0,this.Ua=0,this.d0=0,this.p0=0}Ql(t){this.Ua=(t=+t)-this.f0,this.d0=this.p0+this.Ua,this.f0=this.d0-this.p0-this.Ua,this.p0=this.d0}m0(t){this.p0-=+t}Qs(){return this.p0}Yf(){this.f0=0,this.Ua=0,this.d0=0,this.p0=0}Set(t){this.f0=0,this.Ua=0,this.d0=0,this.p0=+t}g0(t){this.f0=t.f0,this.Ua=t.Ua,this.d0=t.d0,this.p0=t.p0}er(){}}}{const fs=self.Os,n={};n.y0=function(t){this.w0=t,this.right=this.w0.S0,this.left=this.w0.S0,this.parent=null,this.color=!1,this.key=null},n.b0=function(t){this.size=0,this.S0=new n.y0(this),this.S0.color=!1,this.root=this.S0,this.root.parent=this.S0,this.compare=t||this.v0},n.b0.prototype.v0=function(t,s){return t<s?-1:s<t?1:0},n.b0.prototype.clone=function(){var t=new n.b0(this.compare);return t.M0(this),t},n.b0.prototype.clear=function(){this.size=0,this.S0=new n.y0(this),this.S0.color=!1,this.root=this.S0,this.root.parent=this.S0},n.b0.prototype.G0=function(t){var s=t.right;t.right=s.left,s.left!=this.S0&&(s.left.parent=t),s.parent=t.parent,t.parent==this.S0?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,(s.left=t).parent=s},n.b0.prototype.x0=function(t){var s=t.left;t.left=s.right,s.right!=this.S0&&(s.right.parent=t),s.parent=t.parent,t.parent==this.S0?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,(s.right=t).parent=s},n.b0.prototype.T0=function(t){if(this.contains(t))this._0(t).key=t;else{for(var s=new n.y0(this),i=(s.key=t,this.S0),e=this.root;e!=this.S0;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;(s.parent=i)==this.S0?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.S0,s.right=this.S0,s.color=!0,this.I0(s),this.size++}},n.b0.prototype.I0=function(t){for(;t!=this.S0&&t!=this.root&&1==t.parent.color;){var s;t.parent==t.parent.parent.left?1==(s=t.parent.parent.right).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.G0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.S0&&this.x0(t.parent.parent)):1==(s=t.parent.parent.left).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.x0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.S0&&this.G0(t.parent.parent))}this.root.color=!1},n.b0.prototype.C0=function(t){var s=t.left==this.S0||t.right==this.S0?t:this.E0(t),i=s.left!=this.S0?s.left:s.right;i.parent=s.parent,s.parent==this.S0?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.R0(i),this.size--},n.b0.prototype.R0=function(t){for(;t!=this.root&&0==t.color;){var s;t=t==t.parent.left?(1==(s=t.parent.right).color&&(s.color=!1,t.parent.color=!0,this.G0(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=!0,t.parent):(0==s.right.color&&(s.left.color=!1,s.color=!0,this.x0(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.G0(t.parent),this.root)):(1==(s=t.parent.left).color&&(s.color=!1,t.parent.color=!0,this.x0(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=!0,t.parent):(0==s.left.color&&(s.right.color=!1,s.color=!0,this.G0(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.x0(t.parent),this.root))}t.color=!1},n.b0.prototype.remove=function(t){var s;return(t=this._0(t))!=this.S0?(s=t.key,this.C0(t),s):null},n.b0.prototype.P0=function(t,s){this.remove(s)},n.b0.prototype.min=function(t){for(;t.left!=this.S0;)t=t.left;return t},n.b0.prototype.max=function(t){for(;t.right!=this.S0;)t=t.right;return t},n.b0.prototype.E0=function(t){if(t.right!=this.S0)return this.min(t.right);for(var s=t.parent;s!=this.S0&&t==s.right;)s=(t=s).parent;return s},n.b0.prototype.A0=function(t){if(t.left!=this.S0)return this.max(t.left);for(var s=t.parent;s!=this.S0&&t==s.left;)s=(t=s).parent;return s},n.b0.prototype.F0=function(t){if(0<this.size){var s=this._0(t);if(s==this.S0)return null;if(s.right!=this.S0)return this.min(s.right).key;for(var i=s.parent;i!=this.S0&&s==i.right;)i=(s=i).parent;return i!=this.S0?i.key:null}return null},n.b0.prototype.D0=function(t){if(0<this.size){var s=this._0(t);if(s==this.S0)return null;if(s.left!=this.S0)return this.max(s.left).key;for(var i=s.parent;i!=this.S0&&s==i.left;)i=(s=i).parent;return i!=this.S0?i.key:null}return null},n.b0.prototype.O0=function(){return this.min(this.root).key},n.b0.prototype.L0=function(){return this.max(this.root).key},n.b0.prototype._0=function(t){for(var s=this.root;s!=this.S0&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},n.b0.prototype.contains=function(t){return null!=this._0(t).key},n.b0.prototype.getValues=function(){var s=[];return this.forEach(function(t){s.push(t)}),s},n.b0.prototype.M0=function(t){if("array"==n.typeOf(t))for(var s=0;s<t.length;s++)this.T0(t[s]);else if("function"==n.typeOf(t.forEach))t.forEach(this.T0,this);else if("function"==n.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.T0(i[s]);else if("object"==n.typeOf(t))for(var e in t)this.T0(t[e])},n.b0.prototype.k0=function(t){if("array"==n.typeOf(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==n.typeOf(t.forEach))t.forEach(this.P0,this);else if("function"==n.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.remove(i[s]);else if("object"==n.typeOf(t))for(var e in t)this.remove(t[e])},n.b0.prototype.N0=function(t){if("array"==n.typeOf(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==n.typeOf(t.forEach))return t.every(this.contains,this);if("function"==n.typeOf(t.getValues)){for(var i=t.getValues(),s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==n.typeOf(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},n.b0.prototype.range=function(t,s){var i=[];return this.B0(function(t){i.push(t)},t,s),i},n.b0.prototype.W0=function(t,s){if(!this.j0())for(var i=this.min(this.root);i!=this.S0;){if(t.call(s,i.key,this))return;i=this.E0(i)}},n.b0.prototype.H0=function(t,s,i){if(!this.j0())for(var e=this._0(s);e!=this.S0;){if(t.call(i,e.key,this))return;e=this.E0(e)}},n.b0.prototype.V0=function(t,s,i){if(!this.j0())for(var e=this.min(this.root),h=this._0(s);e!=h;){if(t.call(i,e.key,this))return;e=this.E0(e)}},n.b0.prototype.B0=function(t,s,i,e){if(!this.j0())for(var h=this._0(s),r=this._0(i);h!=r;){if(t.call(e,h.key,this))return;h=this.E0(h)}},n.b0.prototype.U0=function(t,s){if(!this.j0())for(var i=this.max(this.root);i!=this.S0;){if(t.call(s,i.key,this))return;i=this.A0(i)}},n.b0.prototype.forEach=function(t,s){if(!this.j0())for(var i=this.min(this.root);i!=this.S0;i=this.E0(i))t.call(s,i.key,i.key,this)},n.b0.prototype.some=function(t,s){if(!this.j0())for(var i=this.min(this.root);i!=this.S0;i=this.E0(i))if(t.call(s,i.key,i.key,this))return!0;return!1},n.b0.prototype.every=function(t,s){if(this.j0())return!1;for(var i=this.min(this.root);i!=this.S0;i=this.E0(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},n.b0.prototype.map=function(t,s){var i=[];if(!this.j0())for(var e=this.min(this.root);e!=this.S0;e=this.E0(e))i.push(t.call(s,e.key,e.key,this));return i},n.b0.prototype.filter=function(t,s){var i=[];if(!this.j0())for(var e=this.min(this.root);e!=this.S0;e=this.E0(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},n.b0.prototype.getCount=function(){return this.size},n.b0.prototype.j0=function(){return 0==this.size},n.b0.prototype.oe=function(t){var s=n.getCount(t);if(this.getCount()>s)return!1;var i=0;if(this.j0())return!0;for(var e=this.min(this.root);e!=this.S0;e=this.E0(e))n.contains.call(t,t,e.key)&&i++;return i==this.getCount()},n.b0.prototype.z0=function(t){var s=new n.b0(this.compare);if(!this.j0())for(var i=this.min(this.root);i!=this.S0;i=this.E0(i))t.contains.call(t,i.key,i.key,this)&&s.T0(i.key);return s},fs.b0=class extends fs.Qh{constructor(t){super(),this.J0=new n.b0(t),this.q0=!1,this.$0=new Set,this.X0=new Set}Ql(t){this.q0?this.J0.contains(t)?this.X0.delete(t):this.$0.add(t):this.J0.T0(t)}u0(t){this.q0?this.J0.contains(t)?this.X0.add(t):this.$0.delete(t):this.J0.remove(t)}Zs(t){return this.q0?!!this.$0.has(t)||!this.X0.has(t)&&this.J0.contains(t):this.J0.contains(t)}Vl(){this.J0.clear(),this.$0.clear(),this.X0.clear()}toArray(){if(this.q0)throw new Error("cannot be used in queueing mode");return this.J0.getValues()}ql(){return this.J0.getCount()+this.$0.size-this.X0.size}Ul(){return 0===this.ql()}K0(){if(this.Ul())throw new Error("empty set");if(this.q0)throw new Error("cannot be used in queueing mode");const t=this.J0,s=t.min(t.root);return s.key}Y0(){if(this.Ul())throw new Error("empty set");if(this.q0)throw new Error("cannot be used in queueing mode");const t=this.K0();return this.u0(t),t}Z0(t){if(this.q0!==(t=!!t)&&!(this.q0=t)){for(const s of this.X0)this.J0.remove(s);this.X0.clear();for(const i of this.$0)this.J0.T0(i);this.$0.clear()}}Q0(t){this.J0.forEach(t)}*values(){if(!this.Ul()){const s=this.J0;for(let t=s.min(s.root);t!=s.S0;t=s.E0(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const ds=self.Os;ds.t1=class{constructor(t=ds.hardwareConcurrency){this.s1=t,this.i1=[],this.e1=0}Ql(i){return new Promise((t,s)=>{this.i1.push({mf:i,resolve:t,reject:s}),this.h1()})}n1(i){for(let t=0,s=this.i1.length;t<s;++t)if(this.i1[t].mf===i)return t;return-1}o1(t,s){const i=this.n1(t);if(-1===i)throw new Error("cannot find promise to resolve");this.i1[i].resolve(s),this.i1.splice(i,1)}a1(t,s){const i=this.n1(t);if(-1===i)throw new Error("cannot find promise to reject");this.i1[i].reject(s),this.i1.splice(i,1)}async h1(){if(this.i1.length&&!(this.e1>=this.s1)){this.e1++;const s=this.i1.shift();try{const t=await s.mf();s.resolve(t)}catch(t){s.reject(t)}this.e1--,this.h1()}}static async u1(t,s){let i=[],e=!1,h=[];for(;t--;)h.push((async()=>{let t;for(;t=s.pop();){if(e)return;try{i.push(await t())}catch(t){throw e=!0,t}}})());return await Promise.all(h),i}}}{const ps=self.Os;ps.l1=class{constructor(t,s,i){this.qf=t,this.c1=s,this.f1=i||2*s,this.d1=-1,this.m1=-1/0,this.g1=()=>this.w1(),this.S1=!1,this.b1=!1,this.v1=null}M1(t){this.b1=!!t}G1(){return void 0!==ps.Battery&&ps.Battery.IsOnBatteryPower()?this.f1:this.c1}T1(...e){if(-1===this.d1){this.v1=e;let t=ps.zf(),s=t-this.m1,i=this.G1();i<=s&&this.b1?(this.m1=t,this._1()):this.d1=self.setTimeout(this.g1,Math.max(i-s,4))}}_1(){this.S1=!0;const t=this.v1;this.v1=null,t?this.qf(...t):this.qf(),this.S1=!1}Yf(){this.S1||(this.I1(),this.v1=null,this.m1=ps.zf())}w1(){this.d1=-1,this.m1=ps.zf(),this._1()}I1(){-1!==this.d1&&(self.clearTimeout(this.d1),this.d1=-1)}er(){this.I1(),this.qf=null,this.v1=null,this.g1=null}}}{const ms=self.Os;ms.C1=class{constructor(){this.E1=new Map,this.R1=!1,this.P1=null,this.A1=null,this.F1=null,this.D1=null}O1(t){this.R1=!!t}L1(){return this.R1}N1(t){this.P1=t}B1(t){if(this.P1)return this.P1(t);throw new Error("no get base size callback set")}W1(t){this.A1=t}j1(t,s,i,e,h,r){if(this.A1)return this.A1(t,s,i,e,h,r);throw new Error("no raster at size callback set")}H1(t){this.F1=t}V1(t){if(!this.F1)throw new Error("no release result callback set");this.F1(t)}U1(t){this.D1=t}z1(){if(!this.D1)throw new Error("no redraw callback set");this.D1()}J1(t){let s=this.E1.get(t);return s||(s=ms.ir(ms.q1,this,t),this.E1.set(t,s)),s.X1(),s}K1(t){this.E1.delete(t.Y1())}Z1(){for(const t of this.E1.values())t.Q1(),t.td()}}}{const gs=self.Os;gs.q1=class{constructor(t,s){this.ed=t,this.hd=s,this.rd=0,this.nd=0,this.od=0,this.ad=this.ed.B1(s).then(t=>{this.ed&&(this.nd=t[0],this.od=t[1],this.ed.z1())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.ud=!0,this.ed&&this.ed.z1()}),this.ld=0,this.fd=0,this.dd=0,this.pd=0,this.md=!1,this.gd=null,this.yd=!1,this.ud=!1}er(){if(this.rd<=0)throw new Error("already released");this.rd--,0===this.rd&&this.wd()}Q1(){this.gd&&(this.ed.V1(this.gd),this.gd=null)}wd(){this.Q1(),this.ed.K1(this),this.ed=null}Y1(){return this.hd}X1(){this.rd++}Sd(){return 0<this.rd}bd(){return this.gd}td(){this.yd=!0}async vd(e,h,r){if(0!==h&&0!==r&&!this.ud&&!this.md){let t=gs.Ar(Math.ceil(h)),s=gs.Ar(Math.ceil(r)),i=Math.max(t,s);if(4096<i){const n=4096/i;h*=n,r*=n,t=Math.min(Math.ceil(t*n),4096),s=Math.min(Math.ceil(s*n),4096)}if(h<t&&r<s){const o=h/r,a=t/s;r=o<a?(h=s*o,s):(h=t)/o}if(this.ed.L1()&&(t=Math.ceil(h),s=Math.ceil(r)),!(t<=this.ld&&s<=this.fd)||this.yd){this.md=!0,this.ld=t,this.fd=s;const u=await this.ed.j1(this.hd,e,this.ld,this.fd,h,r);this.ed&&(this.Q1(),this.gd=u,this.dd=h,this.pd=r,this.md=!1,this.yd=!1,this.ed.z1())}}}Md(){return this.ad}Gd(){return this.nd}xd(){return this.od}Td(){return this.dd}_d(){return this.pd}Id(){return this.ud}}}{let s=function(t){return bs.get(t)};s;const c=self.Os,ys=(c.Cd="\ufeff",new Set("0123456789")),ws=(c.Ed=function(t){return ys.has(t)},new Set(" \t\n\r            ​\u2028\u2029  　"));c.Rd=function(t){return ws.has(t)},c.Pd=function(t){return[...t].filter(t=>!c.Rd(t)).join("")},c.Ad=function(t){for(const s of t)if(!c.Rd(s))return!1;return!0},c.Fd=function(t){for(const s of t)if(!c.Rd(s))return!1;return!0},c.Dd=function(t){return 1===t.length&&t.charCodeAt(0)<32},c.Od=function(t){return[...t].filter(t=>!c.Dd(t)).join("")};let i=null;try{i=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}c.Ld=function(t){return!c.Rd(t)&&i&&i.test(t)};const Ss=new Set("0123456789.+-e"),bs=(c.kd=function(s){if(!(s=s.trim()).length)return!1;let t=s.charAt(0);if("-"!==t&&!ys.has(t))return!1;for(let t of s)if(!Ss.has(t))return!1;return!0},c.Nd=function(s){let i=s.length;for(;0<i;){let t=s.charAt(i-1);if(!c.Ed(t))break;--i}return s.substr(0,i)},c.Bd=function(t){let s=c.Nd(t),i=t.substr(s.length);return s+(i?(parseInt(i,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),vs=/[&<>"']/g,Ms=(c.Wd=function(t){return t.replace(vs,s)},c.jd=function(t){let s=c.Hd(t,"\\","\\\\");return s=c.Hd(s,'"','\\"'),s=c.Hd(s,"\t","\\t"),s=c.Hd(s,"\r",""),c.Hd(s,"\n","\\n")},c.Vd=function(t){let s=c.Hd(t,"&","&amp;");return s=c.Hd(s,"<","&lt;"),s=c.Hd(s,">","&gt;"),c.Hd(s,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),Gs=(c.ne=function(t){return t.replace(Ms,"\\$&")},c.Ud=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},c.zd=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());let e=s.length,h=0,r,n=[];for(;-1<(r=t.indexOf(s,h));)n.push(r),h=r+e;return n},c.Hd=function(t,s,i){return t.replaceAll(s,()=>i)},c.Jd=function(t,s,i){return t.replace(new RegExp(c.ne(s),"gi"),()=>i)},c.qd=function(t,s){"string"==typeof s?t.textContent=s:s.$d()?t.textContent=s.toString():(t.innerHTML=s.Xd(),s instanceof c.Ch&&s.Kd(t))},c.Yd=function(t,s){return t instanceof c.HtmlString||t instanceof c.Ch?t.equals(s):s instanceof c.HtmlString||s instanceof c.Ch?s.equals(t):t===s},c.Zd=function(i,...e){let h=i;for(let t=0,s=e.length;t<s;++t){const r=`{${t}}`;if(!i.includes(r))throw new Error(`missing placeholder '${r}' in string substitution`);h=h.replace(r,e[t].toString())}return h},c.Qd=function(i,...e){let h=i,r=-1,n=-1;for(let t=0,s=e.length;t<s;++t){const o=`{${t}}`;i.includes(o)?(n=t,h=h.replace(o,e[t].toString())):-1===r&&(r=t)}if(0<=r&&0<=n&&r<n)throw new Error(`missing placeholder '${r}' in string substitution`);return h},c.tp=function(t,i){let e=t;for(let[t,s]of Object.entries(i))e=e.replaceAll(t,s.toString());return e},c.sp=function(t,s){return s<t?1:t<s?-1:0},c.ip=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return e<i?1:i<e?-1:0},new self.Intl.Segmenter),xs=(c.ep=function(t){const s=[];for(const i of Gs.segment(t))s.push(i.segment);return s},c.hp=function*(t){for(const s of Gs.segment(t))yield s.segment},c.rp=function(t){let s=0;for(const i of Gs.segment(t))++s;return s},1073741824),Ts=1024*xs,_s={np:!(c.op=function(s,t){let i="common."+(t?"dataRates":"dataSizes")+".",e=self.langSub;if(s<1024)return e(i+"bytes",s);if(s<1048576){let t=s/1024;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"kilobytes",t)}if(s<xs){let t=s/1048576;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"megabytes",t)}if(s<Ts){let t=s/xs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"gigabytes",t)}{let t=s/Ts;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"terabytes",t)}}),up:!0,lp:!0,cp:!0,fp:!0};c.pp=function(t,s){s=Object.assign({},_s,s),c.Lang.PushContext("common.time");const i=[],e=self.lang,h=self.langPluralSub;if(s.up){const n=Math.floor(t/86400);0<n&&(t-=24*n*3600,i.push(h(".days",null,n)))}if(s.lp){const o=Math.floor(t/3600);(0<o||i.length)&&(t-=3600*o,i.push(h(".hours",null,o)))}if(s.cp){const a=Math.floor(t/60);(0<a||i.length||!s.fp)&&(t-=60*a,i.push(h(".minutes",null,a)))}if(s.fp){const u=Math.floor(t%60);i.push(h(".seconds",null,u))}const r=(s.np?e(".approx-prefix"):"")+i.join(e(".separator"));return c.Lang.PopContext(),r},c.mp=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),h=s-e.length;for(let t=0;t<h;++t)i+="0";return i+e},c.gp=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},c.yp=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());c.Dn(i,4,"0"),c.Dn(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const h=i[t]-e[t];if(0!=h)return h<0?-1:1}return 0},c.wp=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random()),i="x"===t?s:3&s|8;return i.toString(16)})},c.Sp=function(i,e){if(i.length!==e.length)throw new Error("strings must be same length");let h=0;for(let t=0,s=i.length;t<s;++t)i.charAt(t)!==e.charAt(t)&&++h;return h},c.bp=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,h,r,n,o;for(s.length<t.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,h=1;h<=t.length;h++)n=s[e-1]===t[h-1]?o[h-1]:Math.min(o[h-1]+1,Math.min(r+1,o[h]+1)),o[h-1]=r,r=n;o[t.length]=r}return o[t.length]}}{let s=function(t,i,e){const h=o.get(e);if(!h)return"class"===e?i?"</span>":`<span class="bbclass${l++}">`:t;if("string"==typeof h){if("a"===h&&0===a.length||"abbr"===h&&0===u.length)return t;if("a"!==h||i){if("abbr"!==h||i)return"<"+i+h+">";{const r=parseInt(e.substring(3),10)-1;if(r<0||r>=u.length)throw new Error("invalid bbcode tip substitution");let t=u[r],s="";if("string"==typeof t?s=t:"function"==typeof t&&(s=t()),"string"!=typeof s)throw new TypeError("invalid bbcode tip");return`<abbr title="${f.Hd(s,'"',"&quot;")}">`}}{const s=parseInt(e.substring(1),10)-1;if(s<0||s>=a.length)throw new Error("invalid bbcode link substitution");const n=a[s];if("string"==typeof n)return`<a href="${a[s]}">`;if("function"==typeof n)return`<a class="bblink${s}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(h)){let t=h[0],s=h[1];return i?"</"+t+">":`<${t} class="${s}">`}},f=(s,self.Os),o=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),d=new Set(["icon"]),i=/\[(\/?)([a-zA-Z0-9]+)\]/g,p=/\[(\/?)([^\[\n]*?)\]/g,a=null,u=null,l=0,e=/\n/g;f.Ch=class{constructor(t,s){if(this.vp=s&&s.Mp?t:f.Wd(t),this.Gp="",this.xp=!1,this.Tp=[],this._p=[],s){if(this.xp=!!s.convertLineBreaks,s.links){if(9<s.links.length)throw new Error("too many links");this.Tp=s.links}if(s.tips){if(9<s.tips.length)throw new Error("too many tips");this._p=s.tips}}this.Ip=this.vp.includes("["),this.Cp=this.xp&&this.vp.includes("\n"),this.Ep=!this.Ip&&!this.Cp&&!this.vp.includes("&"),this.Rp=!1,this.Pp=[]}toString(){return this.vp}valueOf(){return this.vp}$d(){return this.Ep}Ap(){return this.Ip?this.vp.replace(i,""):this.vp}Xd(){if(this.Ep)return this.vp;if(!this.Gp&&this.vp){let t=this.vp;this.Ip&&(l=0,a=this.Tp,u=this._p,t=t.replace(i,s),a=null,u=null),this.Cp&&(t=t.replace(e,"<br>")),this.Gp=t}return this.Gp}Kd(i){if(this.Tp.length)for(let t=0,s=this.Tp.length;t<s;++t){const e=this.Tp[t];if("function"==typeof e){const h=i.querySelector(".bblink"+t);if(!h)throw new Error("unable to attach BBString link handler");h.onclick=e}}}equals(t){return t instanceof f.HtmlString?this.Xd()===t.Xd():t instanceof f.Ch?this.vp===t.vp:this.vp===t}Fp(){if(!this.Rp){let e=[],t=this.vp,h=[],s=p.lastIndex=0,i;for(;null!==(i=p.exec(t));){const r=i.index;if(!(0<r&&"\\"===t.charAt(r-1))){const n=i[0],o=i[1],a=i[2],u=t.substring(s,r);if(s=r+n.length,u&&e.push({text:u,Dp:h.slice(0)}),a)if(o){const l=a.toLowerCase();for(let t=h.length-1;0<=t;--t)if(h[t].tag===l){h.splice(t,1);break}}else{let t=a,s=null,i=a.indexOf("=");if(-1!==i?(t=a.substring(0,i).toLowerCase(),s=a.substring(i+1)):t=t.toLowerCase(),d.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);e.push({icon:s,Dp:h.slice(0)})}else h.push({tag:t,Op:s})}}}s<t.length&&e.push({text:t.substring(s),Dp:h.slice(0)});for(const c of e)c.text&&(c.text=this.Lp(c.text));this.Pp=e.map(t=>t.icon?f.ir(f.kp,{icon:t.icon,Dp:t.Dp}):f.ir(f.Np,{Bp:f.ep(t.text),Dp:t.Dp})),this.Rp=!0}return this.Pp}Lp(t){return t=f.Hd(t,"\\[","["),f.Hd(t,"\\\\","\\")}static Wp(t){return f.ir(f.Ch,t,{Mp:!0}).Ap()}static jp(t){return t.replace(p,"")}}}{let u=function(t){return" "!==t&&" "!==t&&w.Rd(t)},a=function(t){return Is.has(t)},l=function(t){return w.Ld(t)&&!a(t)},c=function(t){for(;0<t.length&&u(t.at(-1));)t.pop()},y=function(t){return"\n"===t||"\r\n"===t};u,a,l,c,y;const w=self.Os,Is=new Set("〈《「『【〔〖〘〚〝");w.Hp=class{constructor(){this.Vp=[],this.Up=null}zp(){return this.Vp}Jp(){return this.Vp.length}qp(t){this.Up=t}$p(t,s){let i=0,e=0,h=0,r=0,n=0;for(const o of t){if(-1===o.Xp()){const a=s(o);o.Kp(a.height),o.Yp(a.fontBoundingBoxAscent||0),o.Zp(a.fontBoundingBoxDescent||0),o.Qp(a.tm||0),o.im()?o.hm(a.width):o.rm()&&o.nm(this.Up)}i+=o.Xp(),e=Math.max(e,o.om()),h=Math.max(h,o.am()),r=Math.max(r,o.um()),n=Math.max(n,o.lm())}return{width:i,height:e,fontBoundingBoxAscent:h,fontBoundingBoxDescent:r,tm:n}}fm(t,s,i,e,h,r){this.Vp.push(w.ir(w.Hp.dm,{pm:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:h,tm:r}))}Hp(s,r,n,i,o){if("string"==typeof s&&(s=[w.ir(w.Np,{Bp:w.ep(s)})]),w.Pn(this.Vp),!(!s.length||1===s.length&&s[0].im()&&s[0].Ul()||n<2)){if(1===s.length){const a=s[0];if(a.im()&&a.gm()<=100&&!a.ym()){let{width:t,height:s,fontBoundingBoxAscent:i,fontBoundingBoxDescent:e,tm:h}=r(a);if(t+=o,a.hm(t),a.Kp(s),a.Yp(i||0),a.Zp(e||0),a.Qp(h||0),t<=n)return void this.fm([a],t,s,i,e,h)}}let t;t="word"===i?this.wm(s):"cjk"===i?this.Sm(s):this.vm(s),this.Mm(t,r,n,o)}}wm(t){let s=[],i=[],e=!1;for(const h of t){const r=h.Gm();if(h.rm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const n of h.xm())if(y(n))0<i.length&&s.push(i),s.push([w.ir(w.Np,{Bp:["\n"],Dp:r})]),i=[];else if(0===i.length)i.push(w.ir(w.Np,{Bp:[n],Dp:r})),e=u(n);else{const o=u(n);if(o===e){const a=i.at(-1);a.Gm()===r?a.Tm(n):i.push(w.ir(w.Np,{Bp:[n],Dp:r}))}else s.push(i),i=[w.ir(w.Np,{Bp:[n],Dp:r})],e=o}}return 0<i.length&&s.push(i),s}Sm(t){let s=[],i=[],e=!1;for(const h of t){const r=h.Gm();if(h.rm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const n of h.xm())if(y(n))0<i.length&&s.push(i),s.push([w.ir(w.Np,{Bp:["\n"],Dp:r})]),i=[];else{if(0===i.length)i.push(w.ir(w.Np,{Bp:[n],Dp:r}));else if(e||l(n)){const o=i.at(-1);o.Gm()===r?o.Tm(n):i.push(w.ir(w.Np,{Bp:[n],Dp:r}))}else s.push(i),i=[w.ir(w.Np,{Bp:[n],Dp:r})];e=a(n)}}return 0<i.length&&s.push(i),s}vm(t){const s=[];for(const i of t)if(i.im()){const e=i.xm();w.Uh(s,e.map(t=>[w.ir(w.Np,{Bp:[t],Dp:i.Gm()})]))}else s.push([i]);return s}_m(t){return t.map(t=>t.Im())}Cm(s,i){let t=s.length?s.at(-1):null,e=0;t&&t.im()&&i[0].im()&&i[0].Gm()===t.Gm()&&(t.Em(i[0].xm()),e=1);for(let t=i.length;e<t;++e){const h=i[e];s.push(h.Im())}}Mm(t,s,i,e){let h=[],r=0,n=0,o=0,a=0,u=0;for(const l of t)if(1===l.length&&l[0].im()&&1===l[0].gm()&&y(l[0].xm()[0])){if(0===n){const c=w.ir(w.Np,{Bp:[" "],Dp:l[0].Gm()}),f=s(c);n=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,u=f.tm||0}this.fm(h,r,n,o,a,u),h=[],r=0,n=0,o=0,a=0,u=0}else{const d=this._m(h),p=(this.Cm(d,l),this.$p(d,s)),m=p.width;if(i<=m)if(0<h.length&&this.fm(h,r,n,o,a,u),h=[],l[0].im()&&w.Fd(l[0].xm()))r=0,n=0,o=0,a=0,u=0;else{this.Cm(h,l);const g=this.$p(h,s);r=g.width,n=g.height,o=g.fontBoundingBoxAscent,a=g.fontBoundingBoxDescent,u=g.tm}else h=d,r=m,n=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,u=p.tm}0<h.length&&this.fm(h,r,n,o,a,u),this.Rm(s,e)}Rm(s,i){for(const e of this.Vp){const h=e.Pm();if(h.length){let t=h.at(-1);if(t.im()){const r=t.xm(),n=r.slice(0);if(c(n),0===n.length)e.Am(-t.Xp()),h.pop();else if(n.length<r.length){t.Fm(n);const o=s(t).width,a=t.Xp()-o;t.hm(o),e.Am(-a)}0!==i&&0<h.length&&((t=h.at(-1)).Am(i),e.Am(i))}}}}Vl(){w.Pn(this.Vp)}Dm(){return this.Vp.reduce((t,s)=>Math.max(t,s.Xp()),0)}Om(){return this.Vp.reduce((t,s)=>t+s.om(),0)}}}{const Cs=self.Os;Cs.Hp.dm=class{constructor(t){this.Pp=t.pm||[],this.Lm=t.width||-1,this.km=t.height||-1,this.Nm=t.fontBoundingBoxAscent||-1,this.Bm=t.fontBoundingBoxDescent||-1,this.Wm=t.tm||-1,this.jm=0,this.Hm=0}pm(){return this.Pp.values()}*Vm(){const s=this.Pp;for(let t=s.length-1;0<=t;--t)yield s[t]}Pm(){return this.Pp}Am(t){this.Lm+=t}Xp(){return this.Lm}om(){return this.km}Um(){return this.Nm}um(){return this.Bm}lm(){return this.Wm}zm(t){this.jm=t}Jm(){return this.jm}qm(t){this.Hm=t}$m(){return this.Hm}}}{const Es=self.Os;Es.Xm=class{constructor(t){this.Km=t.Dp||[],this.Lm=t.width||-1,this.km=t.height||-1,this.Nm=t.fontBoundingBoxAscent||-1,this.Bm=t.fontBoundingBoxDescent||-1,this.Wm=t.tm||-1,this.jm=0,this.Hm=0}im(){return!1}rm(){return!1}Gm(){return this.Km}Ym(s){const i=this.Km;for(let t=i.length-1;0<=t;--t){const e=i[t];if(e.tag===s)return e}return null}Zm(t){return!!this.Ym(t)}Qm(){const t=new Map;for(const s of this.Km)t.set(s.tag,s.Op);return t}Am(t){this.Lm+=t}hm(t){this.Lm=t}Xp(){return this.Lm}Kp(t){this.km=t}om(){return this.km}Yp(t){this.Nm=t}am(){return this.Nm}Zp(t){this.Bm=t}um(){return this.Bm}Qp(t){this.Wm=t}lm(){return this.Wm}zm(t){this.jm=t}Jm(){return this.jm}qm(t){this.Hm=t}$m(){return this.Hm}}}{const Rs=self.Os;Rs.Np=class extends Rs.Xm{constructor(t){super(t),this.tg=t.Bp}im(){return!0}Em(t){Rs.Uh(this.tg,t),this.Lm=-1,this.km=-1,this.Nm=-1,this.Bm=-1,this.Wm=-1}Tm(t){this.tg.push(t)}Im(){return Rs.ir(Rs.Np,{Bp:this.tg.slice(0),Dp:this.Km,width:this.Lm,height:this.km,fontBoundingBoxAscent:this.Nm,fontBoundingBoxDescent:this.Bm,tm:this.Wm})}xm(){return this.tg}Fm(t){this.tg=t}gm(){return this.tg.length}Ul(){return 0===this.tg.length}ym(){return this.tg.includes("\n")}}}{const Ps=self.Os;Ps.kp=class extends Ps.Xm{constructor(t){super(t),this.sg=t.icon}rm(){return!0}ig(){return this.sg}Im(){return Ps.ir(Ps.kp,{icon:this.sg,Dp:this.Km,width:this.Lm,height:this.km,fontBoundingBoxAscent:this.Nm,fontBoundingBoxDescent:this.Bm,tm:this.Wm})}eg(t){if(!t)return null;let s=Number(this.sg);return String(s)===this.sg?(s=Math.floor(s),t.hg(s)):t.rg(this.sg)}nm(t){const s=this.eg(t);this.Lm=s?this.km*s.Xp()/s.om():0}ng(t){const s=this.eg(t);return s?s.ng():null}gm(){return 1}}}{const As=self.Os;As.og=class{constructor(t){this.ag=new Map,this.ug=t.lg,this.fg=t.dg}er(){for(const t of this.ag.values())t.er();this.ag.clear()}pg(t){let s=this.ag.get(t);if(!s){const i=this.ug(t);s=As.ir(As.mg,this,{source:t,gg:i}),this.ag.set(t,s)}return s}yg(t){return this.ag.has(t)}wg(t){const s=this.ag.get(t);s&&s.er(),this.ag.delete(t)}async Sg(t){return this.fg(t)}}}{const Fs=self.Os;Fs.mg=class{constructor(t,s){this.bg=t,this.vg=s.source,this.Mg=[],this.Gg=new Map,this.xg=!1,this.Tg=!1,this._g=null;const i=s.gg.Ig;for(let t=0,s=i.length;t<s;++t){const e=i[t],h=Fs.ir(Fs.Cg,this,{index:t,tag:e.tag,source:e.source,width:e.width,height:e.height});this.Mg.push(h),e.tag&&this.Gg.set(e.tag.toLowerCase(),h)}}er(){for(const t of this.Mg)t.er();Fs.Pn(this.Mg),this.Gg.clear(),this.bg=null,this.vg=null}Eg(){return this.xg}Rg(){return this.Tg}Pg(){return this._g||(this._g=this.Ag()),this._g}async Ag(){if(!this.xg){this.xg=!0,this.Tg=!0;const t=await this.bg.Sg(this.vg);if(this.bg){const i=t.Ig;for(let t=0,s=Math.min(i.length,this.Mg.length);t<s;++t){const e=i[t].Fg;this.Mg[t].Dg(e)}this.Tg=!1}}}hg(t){return(t=Math.floor(t))<0||t>=this.Mg.length?null:this.Mg[t]}rg(t){return this.Gg.get(t.toLowerCase())||null}}}{const Ds=self.Os;Ds.Cg=class{constructor(t,s){this.Og=t,this.vg=s.source||null,this.Lg=s.index,this.kg=s.tag,this.Lm=s.width,this.km=s.height,this.Ng=null}er(){this.Lm=0,this.km=0,this.Og=null}Bg(){return this.vg}Xp(){return this.Lm}om(){return this.km}Dg(t){this.Ng=t}ng(){return this.Ng}}}{let e=function(t,s,i,e){const h=Bs;xh.B(ks,i,s),xh.B(Ns,t,s),xh.Ft(h,ks,Ns),xh.normalize(h,h),e.set(h[0],h[1],h[2],xh.At(t,h))},n=function(t,s,i,e,h,r,n){const o=n.x,a=n.y,u=n.z,l=n.w,c=n.Wg,f=n.jg,d=n.Hg,p=1-c,m=1-f,g=1-d,y=o*t*c+o*e*p+a*s*f+a*h*m+u*i*d+u*r*g;if(l<=y)return!0;const w=o*e*c+o*t*p+a*h*f+a*s*m+u*r*d+u*i*g;return l<w},h=function(t,s,i,e){const h=e.x,r=e.y,n=e.z,o=e.w,a=h*t+r*s+n*i;return o<=a};e,n,h;const Os=self.Os,Ls=self.ws,xh=Ls._s,Hh=Ls.Is,Gh=Ls.Ms,ks=xh.create(),Ns=xh.create(),Bs=xh.create(),Ws=Hh.create(),js=Gh.create(),Hs=xh.create(),Vs=xh.create(),Us=xh.create(),zs=xh.create(),Js=xh.create(),qs=xh.create(),$s=xh.create(),Xs=xh.create(),Ks=Hh.I(0,0,1,1);Os.Vg={Ug(t,s,i,e,h,r,n){let o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],u=e[2]*t+e[6]*s+e[10]*i+e[14],l=e[3]*t+e[7]*s+e[11]*i+e[15],c=h[0]*o+h[4]*a+h[8]*u+h[12]*l,f=h[1]*o+h[5]*a+h[9]*u+h[13]*l,d=h[2]*o+h[6]*a+h[10]*u+h[14]*l,p=h[3]*o+h[7]*a+h[11]*u+h[15]*l;return 0!=p&&(f*=p=1/p,d*=p,n[0]=(.5*(c*=p)+.5)*r[2]+r[0],n[1]=(.5*f+.5)*r[3]+r[1],n[2]=.5*(1+d),!0)},zg(t,s,i,e,h,r,n){const o=js,a=Ws;return Gh.multiply(o,h,e),null!==Gh.R(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,Hh.Nt(a,a,o),0!==a[3])&&(a[3]=1/a[3],n[0]=a[0]*a[3],n[1]=a[1]*a[3],n[2]=a[2]*a[3],!0)},Jg(t,s,i,e,h,r,n){const o=ks,a=Ns;if(!Os.Vg.zg(t,s,0,e,h,r,o))return!1;if(!Os.Vg.zg(t,s,1,e,h,r,a))return!1;let u=Ns,l=(xh.B(u,a,o),Bs),c=(xh.set(l,0,0,1),-i),f=xh.At(l,u),d=0;if(0===f){const p=xh.At(l,o)+c;if(0!==p)return!1}else if((d=-(xh.At(o,l)+c)/f)<0)return!1;return xh.It(n,o,u,d),!0}};class Ys{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Wg=NaN,this.jg=NaN,this.Hg=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.Wg=0<t?1:0,this.jg=0<s?1:0,this.Hg=0<i?1:0}}Os.Vg.qg=class{constructor(){this.$g=new Ys,this.Xg=new Ys,this.Kg=new Ys,this.Yg=new Ys,this.Zg=new Ys,this.Qg=new Ys}ty(t,s){const i=Ks;Os.Vg.zg(0,1,0,t,s,i,Hs),Os.Vg.zg(1,1,0,t,s,i,Vs),Os.Vg.zg(0,0,0,t,s,i,Us),Os.Vg.zg(1,0,0,t,s,i,zs),Os.Vg.zg(0,1,1,t,s,i,Js),Os.Vg.zg(1,1,1,t,s,i,qs),Os.Vg.zg(0,0,1,t,s,i,$s),Os.Vg.zg(1,0,1,t,s,i,Xs),e(Us,Hs,Js,this.$g),e(Hs,Vs,qs,this.Xg),e(Vs,zs,Xs,this.Kg),e(zs,Us,$s,this.Yg),e($s,Js,qs,this.Qg),e(zs,Vs,Hs,this.Zg)}iy(t,s,i,e,h,r){return n(t,s,i,e,h,r,this.$g)&&n(t,s,i,e,h,r,this.Xg)&&n(t,s,i,e,h,r,this.Kg)&&n(t,s,i,e,h,r,this.Yg)&&n(t,s,i,e,h,r,this.Zg)&&n(t,s,i,e,h,r,this.Qg)}ey(t,s,i){return!h(t,s,i,this.Zg)}}}{const Zs=self.Os,Qs=self.ws,xh=Qs._s,Hh=Qs.Is,Gh=Qs.Ms,ti=Gh.create(),si=xh.I(0,0,0),ii=xh.I(0,0,0),ei=xh.I(0,0,0),hi=xh.I(0,1,0),ri=(Hh.I(0,0,0,0),new Zs.Hu),ni=new Zs.Rect,oi=new Zs.Hu(0,0,1,0,1,1,0,1),ai={hy:1,ny:1e4},ui=Gh.I(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Zs.Vg.oy=class{constructor(t){t=Object.assign({},ai,t),this.Lm=0,this.km=0,this.uy=Zs.dr(45),this.my=Math.tan(this.uy/2),this.gy=Gh.create(),this.yy=Gh.create(),this.wy=!1,this.Sy=t.hy,this.by=t.ny,this.vy=[],this.My=new Map,this.Gy=null,this.xy=null,this.Ty=null,this._y=null,this.Iy=null,this.Cy=null,this.Ey=null,this.Ry=null,this.Py=null,this.Ay=null,this.Fy=null,this.Dy=null,this.Oy=new Map,this.Ly=null,this.ky=[],this.Ny=new Map,this.By=0,this.Wy=0,this.jy=1,this.Hy=[this.jy],this.Vy=1,this.Uy=[this.Vy],this.zy=.5,this.Jy=[this.zy],this.qy=0,this.$y=!0,this.Xy=!1}Ky(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}Yy(){this.By=0,this.Wy=0,this.Gy=null,this.xy=null,this.Ty=null,this._y=null,this.Iy=null,this.Cy=null,this.Ey=null,this.Ry=null,this.Py=null,this.Ay=null,this.Fy=null,this.Dy=null,this.Zy()}Qy(){this.Yy(),this.Ly=null}iw(){for(const t of this.vy)t.er();this.Yy()}Xp(){return this.Lm}om(){return this.km}ew(t){return this.hw()?100:t/(2*this.rw())}ow(t){if(this.hw()){const s=t/(2*this.rw());return s/this.ew(t)}return 1}aw(t){this.Sy=t}uw(){return this.Sy}lw(t){this.by=t}fw(){return this.by}dw(t){this.uy=t,this.my=Math.tan(this.uy/2)}pw(){return this.uy}rw(){return this.my}mw(){this.wy=!1}gw(){this.wy=!0}hw(){return!this.wy}yw(){return this.wy}ww(t,s,i=.5,e=.5){const h=this.uw(),r=this.fw(),n=this.pw();if(.5===i&&.5===e)this.Sw()?Gh.bt(t,n,s,h,r):Gh.perspective(t,n,s,h,r);else{const o=2*(i=1-i)-2,a=2*i,u=2*e-2,l=2*e,c=this.rw()*h,f=c*s;Gh.yt(t,o*f,a*f,u*c,l*c,h,r),this.Sw()&&Gh.mul(t,ui,t)}}bw(t,s,i,e=1){const h=self.devicePixelRatio,r=2*this.ew(i)*h*this.rw()/i,n=s*r/(2*h*e),o=i*r/(2*h*e),a=-n,u=n,l=-o,c=o;this.Sw()?Gh.Gt(t,a,u,l,c,this.uw(),this.fw()):Gh.ortho(t,a,u,l,c,this.uw(),this.fw())}Mw(t,s,i,e,h,r=1){let n=1;this.hw()&&(n=200*this.rw()/h);const o=ei,a=(xh.set(o,n,-n,1),si),u=ii;xh.multiply(a,s,o),xh.multiply(u,i,o),Gh.xt(t,a,u,e||hi),o[2]=r,Gh.scale(t,t,o)}Gw(t,s,i,e,h,r,n,o){return xh.set(si,t,s,i),xh.set(ii,e,h,r),this.Mw(ti,si,ii,hi,n,o),ti}xw(t){this.vy.push(t),this.My.set(t.Wc(),t)}Tw(t){const s=this.vy.indexOf(t);-1!==s&&this.vy.splice(s,1),this.My.delete(t.Wc())}Zy(){Zs.Pn(this.vy),this.My.clear()}_w(t){return this.My.get(t)||null}Iw(){return this.Gy}Cw(){this.Ew(this.Gy)}Rw(){return this.xy}Pw(){this.Ew(this.xy)}Aw(){this.Ew(this.Ty)}Fw(){this.Ew(this._y)}Dw(){this.Ew(this.Iy)}Ow(){this.Ew(this.Cy)}Lw(){this.Ew(this.Ey)}kw(){this.Ew(this.Ry)}Nw(){this.Ew(this.Py)}Bw(){this.Ew(this.Ay)}Ww(){this.Ew(this.Fy)}jw(){this.Ew(this.Dy)}Hw(t){this.Ly=t}Vw(){return this.Ly}Uw(t,s,i,e){let h=Zs.Vg.Jw.zw(t,s,i,e),r=this.Oy.get(h);return r||(r=Zs.ir(Zs.Vg.Jw,this,t,s,i,e),this.Oy.set(h,r)),r.qw(),r}$w(t){t.Xw(),0===t.Kw()&&(this.Ly===t&&(this.Ly=null),this.Oy.delete(t.Yw()),t.er())}Zw(t){Zs.Pn(this.ky),this.Ny.clear();let s=0;for(const i of t){const e=i[0],h=i[1],r=i[2];this.ky.push([h,r]),this.Ny.set(e,{number:s,Qw:h,tS:r}),s++}}sS(t){return this.ky[t]}iS(t){return this.sS(t)[0]}eS(t){return this.sS(t)[1]}hS(t){const s=this.Ny.get(t);if(void 0===s)throw new Error("invalid blend name");return s}rS(t){const s=this.Ny.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}nS(t){this.By=t}oS(){return this.By}aS(t){this.Wy=t,this.Ly=null}uS(){return this.Wy}dm(t,s,i,e){const h=Zs.yr(t,s,i,e),r=Math.sin(h),n=Math.cos(h),o=.5*this.jy,a=r*o,u=n*o,l=this.Vy;2===l?this.lS(t,s,0,i,e,0,a,u):1===l?this.cS(t,s,0,i,e,0,a,u):this.fS(t,s,0,i,e,0,a,u)}dS(t,s,i,e,h,r){const n=Zs.yr(t,s,e,h),o=Math.sin(n),a=Math.cos(n),u=.5*this.jy,l=o*u,c=a*u,f=this.Vy;2===f?this.lS(t,s,i,e,h,r,l,c):1===f?this.cS(t,s,i,e,h,r,l,c):this.fS(t,s,i,e,h,r,l,c)}lS(t,s,i,e,h,r,n,o){const a=this.zy,u=t+a-o,l=s+a-n,c=e+a+o,f=h+a+n,d=2*o,p=2*n,m=u+n,g=l-o,y=u-n+d,w=l+o+p,S=c+n,b=f-o,v=c-n-d,M=f+o-p;this.pS(m,g,i,S,b,r,v,M,r,y,w,i,oi)}cS(t,s,i,e,h,r,n,o){const a=this.zy,u=t+a-o,l=s+a-n,c=e+a+o,f=h+a+n,d=u+n,p=l-o,m=u-n,g=l+o,y=c+n,w=f-o,S=c-n,b=f+o;this.pS(d,p,i,y,w,r,S,b,r,m,g,i,oi)}fS(t,s,i,e,h,r,n,o){const a=this.zy,u=t+a,l=s+a,c=e+a,f=h+a,d=u+n,p=l-o,m=u-n,g=l+o,y=c+n,w=f-o,S=c-n,b=f+o;this.pS(d,p,i,y,w,r,S,b,r,m,g,i,oi)}mS(t,s,i,e,h,r){const n=Zs.yr(t,s,i,e),o=Math.sin(n),a=Math.cos(n),u=.5*this.jy,l=o*u,c=a*u,f=this.Vy;2===f?this.gS(t,s,i,e,l,c,h,r):1===f?this.yS(t,s,i,e,l,c,h,r):this.wS(t,s,i,e,l,c,h,r)}gS(t,s,i,e,h,r,n,o){const a=this.zy,u=t+a-r,l=s+a-h,c=i+a+r,f=e+a+h,d=2*r,p=2*h,m=u+h,g=l-r,y=u-h+d,w=l+r+p,S=c+h,b=f-r,v=c-h-d,M=f+r-p;ri.set(m,g,S,b,v,M,y,w),ni.set(n,0,o,0),this.SS(ri,ni)}yS(t,s,i,e,h,r,n,o){const a=this.zy,u=t+a-r,l=s+a-h,c=i+a+r,f=e+a+h,d=u+h,p=l-r,m=u-h,g=l+r,y=c+h,w=f-r,S=c-h,b=f+r;ri.set(d,p,y,w,S,b,m,g),ni.set(n,0,o,0),this.SS(ri,ni)}wS(t,s,i,e,h,r,n,o){const a=this.zy,u=t+a,l=s+a,c=i+a,f=e+a,d=u+h,p=l-r,m=u-h,g=l+r,y=c+h,w=f-r,S=c-h,b=f+r;ri.set(d,p,y,w,S,b,m,g),ni.set(n,0,o,0),this.SS(ri,ni)}bS(t,s,i,e){const h=.5*this.jy,r=this.Vy;2===r?this.vS(t,s,i,e,h):1===r?this.MS(t,s,i,e,h):this.GS(t,s,i,e,h)}vS(t,s,i,e,h){this.lS(t,s,0,i,s,0,0,h),this.lS(i,s,0,i,e,0,h,0),this.lS(i,e,0,t,e,0,0,-h),this.lS(t,e,0,t,s,0,-h,0)}MS(t,s,i,e,h){this.cS(t,s,0,i,s,0,0,h),this.cS(i,s,0,i,e,0,h,0),this.cS(i,e,0,t,e,0,0,-h),this.cS(t,e,0,t,s,0,-h,0)}GS(t,s,i,e,h){this.fS(t,s,0,i,s,0,0,h),this.fS(i,s,0,i,e,0,h,0),this.fS(i,e,0,t,e,0,0,-h),this.fS(t,e,0,t,s,0,-h,0)}xS(t){this.bS(t.fu(),t.du(),t.pu(),t.mu())}TS(t){const s=Zs.yr(t.Xr(),t.Kr(),t.Yr(),t.Zr()),i=Math.sin(s),e=Math.cos(s),h=.5*this.jy,r=i*h,n=e*h,o=this.Vy;2===o?this._S(t,r,n):1===o?this.IS(t,r,n):this.CS(t,r,n)}_S(t,s,i){this.lS(t.Xr(),t.Kr(),0,t.Yr(),t.Zr(),0,s,i),this.lS(t.Yr(),t.Zr(),0,t.Qr(),t.tn(),0,i,-s),this.lS(t.Qr(),t.tn(),0,t.sn(),t.hn(),0,-s,-i),this.lS(t.sn(),t.hn(),0,t.Xr(),t.Kr(),0,-i,s)}IS(t,s,i){this.cS(t.Xr(),t.Kr(),0,t.Yr(),t.Zr(),0,s,i),this.cS(t.Yr(),t.Zr(),0,t.Qr(),t.tn(),0,i,-s),this.cS(t.Qr(),t.tn(),0,t.sn(),t.hn(),0,-s,-i),this.cS(t.sn(),t.hn(),0,t.Xr(),t.Kr(),0,-i,s)}CS(t,s,i){this.fS(t.Xr(),t.Kr(),0,t.Yr(),t.Zr(),0,s,i),this.fS(t.Yr(),t.Zr(),0,t.Qr(),t.tn(),0,i,-s),this.fS(t.Qr(),t.tn(),0,t.sn(),t.hn(),0,-s,-i),this.fS(t.sn(),t.hn(),0,t.Xr(),t.Kr(),0,-i,s)}ES(t){this.jy=t,this.Hy[this.Hy.length-1]=t}RS(){return this.jy}PS(t){if(100<=this.Hy.length)throw new Error("pushed too many line widths - check push/pop pairs");this.Hy.push(t),this.jy=t}AS(){if(this.Hy.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.Hy.pop(),this.jy=this.Hy.at(-1)}FS(){this.Vy=0,this.Uy[this.Uy.length-1]=0}DS(){this.Vy=1,this.Uy[this.Uy.length-1]=0}OS(){this.Vy=2,this.Uy[this.Uy.length-1]=0}LS(t){if("butt"===t)this.kS();else if("square"===t)this.NS();else{if("zag"!==t)throw new Error("invalid line cap");this.BS()}}kS(){if(100<=this.Uy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.Uy.push(0),this.Vy=0}NS(){if(100<=this.Uy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.Uy.push(1),this.Vy=1}BS(){if(100<=this.Uy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.Uy.push(2),this.Vy=2}WS(){if(this.Uy.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.Uy.pop(),this.Vy=this.Uy.at(-1)}jS(t){this.zy=t,this.Jy[this.Jy.length-1]=t}HS(){return this.zy}VS(t){if(100<=this.Jy.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.Jy.push(t),this.zy=t}US(){if(this.Jy.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.Jy.pop(),this.zy=this.Jy.at(-1)}zS(s){const t=s.length/2;if(t<3)throw new Error("need at least 3 points");const i=t-2,e=i-1,h=s[0],r=s[1];for(let t=0;t<i;t+=2){const n=2*t,o=s[2+n],a=s[3+n],u=s[4+n],l=s[5+n];if(t===e)this.JS(h,r,o,a,u,l,u,l);else{const c=s[6+n],f=s[7+n];this.JS(h,r,o,a,u,l,c,f)}}}qS(){return 3}$S(){this.XS(!0),this.qy++}KS(){return this.qy}YS(){this.qy++}ZS(t){this.$y=!!t}QS(){return this.$y}tb(t){this.Xy=!!t}sb(){return this.Xy}ib(){return!1}Sw(){return!1}eb(){}hb(){}rb(){}nb(){return this.eb()+this.hb()+this.rb()}ob(){return Zs.ir(Zs.Vg.ab,this)}}}{const li=self.Os;li.Vg.ub=class{constructor(t,s){this.nr=s.name,this.lb=t,this.cb=s.extendBoxHorizontal||0,this.fb=s.extendBoxVertical||0,this.pb=!!s.crossSampling,this.mb=!!s.mustPreDraw,this.gb=!!s.preservesOpaqueness,this.yb=!!s.supports3dDirectRendering,this.wb=!!s.animated,this.Sb=!!s.blendsBackground,this.bb=!!s.usesDepth,this.vb=!1,this.Mb=this.pb||this.Sb||0!==this.cb||0!==this.fb}er(){this.lb=null}Gb(){return this.lb}Wc(){return this.nr}xb(){return 0!==this.cb||0!==this.fb}Tb(){return this.cb}_b(){return this.fb}Ib(){return this.pb}Cb(){return this.mb}Eb(){return this.gb}Rb(){return this.yb}Pb(){return this.wb}Ab(){return this.Sb}Fb(){return this.bb}Db(){return this.vb}Ob(){return this.Mb}Lb(){return!1}}}{const ci=self.Os;ci.Vg.Jw=class{constructor(t,s,i,e,h){this.lb=t,this.rd=0,this.kb=null,this.Nb="",this.Bb=i,this.Wb=ci.ir(ci.Oo),this.Wb.set(e),this.jb=h,"string"==typeof s?this.Nb=s:(this.kb=s,this.Nb=this.kb.Wc())}er(){if(0<this.rd)throw new Error("releasing state group still in use");this.lb=null,this.kb=null,this.Nb=""}Hb(){const t=this.lb;t.Ew(this.kb),t.Vb(this.Bb),t.Ub(this.Wb),t.aS(this.jb),t.Hw(this)}Yw(){return ci.Vg.Jw.zw(this.Nb,this.Bb,this.Wb,this.jb)}qw(){++this.rd}Xw(){--this.rd}Kw(){return this.rd}zb(){this.kb=null}Jb(t){if(this.kb=t._w(this.Nb),!this.kb)throw new Error("failed to restore shader program")}static zw(t,s,i,e){const h="string"==typeof t?t:t.Wc();return h+","+s+","+i.Xo()+","+i.Ko()+","+i.Yo()+","+i.Zo()+","+e}}}{let e=function(t,s,i){const e=i.Xr(),h=i.Kr(),r=i.Yr()-e,n=i.Zr()-h,o=i.sn()-e,a=i.hn()-h,u=r*t,l=n*t,c=o*s,f=a*s;return[e+u+c,h+l+f]};e;const _=self.Os,fi=_.ir(_.Hu);_.Vg.qb=class{constructor(t,s,i){this.$b=t,this.Xb=s,this.Kb=i,this.Va=NaN,this.Ua=NaN,this.jb=NaN,this.Yb=NaN,this.Zb=NaN,this.Va=0,this.Ua=0,this.jb=0,this.Yb=0,this.Zb=0}Qb(t,s,i,e){this.Va=t,this.Ua=s,this.Yb=i,this.Zb=e}tv(){return this.Va}sv(t){this.Va!==t&&(this.Va=t,this.$b.hv())}rv(){return this.Ua}nv(t){this.Ua!==t&&(this.Ua=t,this.$b.hv())}ov(){return this.jb}av(t){this.jb!==t&&(this.jb=Math.max(t,0),this.$b.hv())}uv(){return this.Yb}lv(t){this.Yb=t}cv(){return this.Zb}dv(t){this.Zb=t}pv(t,s,i){[this.Va,this.Ua]=e(t.Va,t.Ua,s),this.jb=t.jb,this.Yb=_.Dt(i.fu(),i.pu(),t.Yb),this.Zb=_.Dt(i.du(),i.mu(),t.Zb)}mv(t,s,i){[this.Va,this.Ua]=e(t.Va,t.Ua,s),this.jb=t.jb,[this.Yb,this.Zb]=e(t.Yb,t.Zb,i)}gv(){return{x:this.tv(),y:this.rv(),z:this.ov(),u:this.uv(),v:this.cv()}}yv(t){this.sv(t.x),this.nv(t.y),t.hasOwnProperty("z")&&this.av(t.z),this.lv(t.u),this.dv(t.v)}wv(){return this.$b}Sv(){return this.Xb}bv(){return this.Kb}},_.Vg.vv=class{constructor(i,t,s){if(i<2||t<2)throw new Error("invalid mesh size");this.Mv=i,this.Gv=t,this.xv=s||null,this.Tv=[],this._v=0,this.Iv=0,this.Cv=1,this.Ev=1,this.Rv=0,this.Pv=!1;const e=i-1,h=t-1;for(let s=0;s<t;++s){const r=[];for(let t=0;t<i;++t){const n=_.ir(_.Vg.qb,this,t,s),o=t/e,a=s/h;n.Qb(o,a,o,a),r.push(n)}this.Tv.push(r)}}er(){_.Pn(this.Tv)}Av(){return this.Mv}Fv(){return this.Gv}Dv(){return this.xv}Ov(){return this.Tv}hv(){this.Pv=!0}Lv(){if(this.Pv){let t=1/0,s=1/0,i=-1/0,e=-1/0,h=0;for(const r of this.Tv)for(const n of r){const o=n.tv(),a=n.rv();t=Math.min(t,o),s=Math.min(s,a),i=Math.max(i,o),e=Math.max(e,a),h=Math.max(h,n.ov())}this._v=t,this.Iv=s,this.Cv=i,this.Ev=e,this.Rv=h,this.Pv=!1}}kv(){return this.Lv(),this._v}Nv(){return this.Lv(),this.Iv}Bv(){return this.Lv(),this.Cv}Wv(){return this.Lv(),this.Ev}jv(){return this.Lv(),this.Rv}Hv(){return 0<this.jv()}Vv(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.Mv||s<0||s>=this.Gv?null:this.Tv[s][t]}Uv(t,i,e){const h=e instanceof _.Rect;if(t.Av()!==this.Av()||t.Fv()!==this.Fv())throw new Error("source mesh wrong size");const r=t.Tv,n=this.Tv;for(let t=0,s=n.length;t<s;++t){const o=r[t],a=n[t];for(let t=0,s=a.length;t<s;++t){const u=o[t],l=a[t];h?l.pv(u,i,e):l.mv(u,i,e)}}}zv(r){let n=this.Tv,o=n[0];for(let t=1,s=n.length;t<s;++t){let i=n[t],e=o[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const a=o[t],u=i[t];fi.set(e.uv(),e.cv(),a.uv(),a.cv(),u.uv(),u.cv(),h.uv(),h.cv()),r.pS(e.tv(),e.rv(),e.ov(),a.tv(),a.rv(),a.ov(),u.tv(),u.rv(),u.ov(),h.tv(),h.rv(),h.ov(),fi),e=a,h=u}o=i}}Jv(o,a){a=a||((t,s,i)=>[t,s,i]);let t=this.Tv,u=t[0];for(let r=1,n=t.length;r<n;++r){let i=t[r],e=u[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const l=u[t],c=i[t],[f,d,p]=a(e.tv(),e.rv(),e.ov()),[m,g,y]=a(l.tv(),l.rv(),l.ov()),[w,S,b]=a(c.tv(),c.rv(),c.ov()),[v,M,G]=a(h.tv(),h.rv(),h.ov());o.dS(f,d,p,m,g,y),o.dS(f,d,p,w,S,b),o.dS(f,d,p,v,M,G),t===s-1&&o.dS(m,g,y,w,S,b),r===n-1&&o.dS(v,M,G,w,S,b),e=l,h=c}u=i}}qv(t){let i=.99999999,e=t.Il(),h=[],r=this.Av()-1,n=this.Fv()-1,o=1/r,a=1/n,u=r-1,l=n-1,c=e[0],f=e[1],d=_.lr(Math.floor(c*r),0,u),p=_.lr(Math.floor(f*n),0,l),m=!0,g=0,y=0,w=0,S=-1,b=()=>{c=_.lr(_.Dt(c,g,w),0,1),f=_.lr(_.Dt(f,y,w),0,1),h.push(c,f)};for(let t=0,s=e.length;t<s;t+=2){c=e[t],f=e[t+1],h.push(c,f),d=_.lr(Math.floor(c*r),0,u),p=_.lr(Math.floor(f*n),0,l);const v=(t+2)%s;for(g=e[v],y=e[1+v],S=-1;;){if(1e6<h.length)throw new Error("Too many mesh poly points");const M=d*o,G=p*a,x=(d+1)*o,T=(p+1)*a;if(m=_.un(c,f,M,G,x,G,x,T),0!==S&&0<=(w=_.an(c,f,g,y,M,G,x,T,-.001))&&w<=i)b(),m=!m,S=0;else if(0<p&&2!==S&&0<=(w=_.an(c,f,g,y,M,G,x,G,.001))&&w<=i)b(),p--,m=!1,S=4;else if(d<u&&3!==S&&0<=(w=_.an(c,f,g,y,x,G,x,T,.001))&&w<=i)b(),d++,m=!1,S=1;else if(0<d&&1!==S&&0<=(w=_.an(c,f,g,y,M,G,M,T,.001))&&w<=i)b(),d--,m=!0,S=3;else{if(!(p<l&&4!==S&&0<=(w=_.an(c,f,g,y,M,T,x,T,.001))&&w<=i))break;b(),p++,m=!0,S=2}}}return _.ir(_.Ml,h)}$v(t,s){const i=this.Xv(t);this.Kv(i),s.El(i)}Xv(t){const i=[],e=t.Il();for(let t=0,s=e.length;t<s;t+=2){const h=e[t],r=e[t+1],[n,o]=this.Yv(h,r);i.push(n,o)}return i}Yv(t,s){const i=this.Av()-1,e=this.Fv()-1,h=1/i,r=1/e,n=_.lr(Math.floor(t*i),0,i-1),o=_.lr(Math.floor(s*e),0,e-1),a=n*h,u=o*r,l=(n+1)*h,c=(o+1)*r,f=this.Vv(n,o),d=this.Vv(n+1,o+1),p=_.un(t,s,a,u,l,u,l,c),m=p?a+h:a,g=p?u:u+r,y=this.Vv(n+(p?1:0),o+(p?0:1)),[w,S,b]=_.ln(t,s,a,u,m,g,l,c);return _.cn(w,S,b,f.tv(),f.rv(),f.ov(),y.tv(),y.rv(),y.ov(),d.tv(),d.rv(),d.ov())}Kv(i){let e=[],h=i[0],r=i[1],n=h-i.at(-2),o=r-i.at(-1);for(let t=0,s=i.length;t<s;t+=2){const a=(t+2)%s,u=i[a],l=i[1+a],c=u-h,f=l-r,d=Math.abs(c)<1e-7&&Math.abs(n)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(c)===Math.sign(n);(!d&&!p&&.001<Math.abs(c/n-f/o)||0==c&&0==f)&&e.push(h,r),h=u,r=l,n=c,o=f}6<=e.length&&e.length<i.length&&_.On(i,e)}gv(){return{cols:this.Av(),rows:this.Fv(),points:this.Tv.map(t=>t.map(t=>t.gv()))}}yv(t){const i=this.Av(),e=this.Fv();if(t.cols!==i||t.rows!==e)throw new Error("mesh data wrong size");const h=t.points;for(let s=0;s<e;++s){const r=h[s];for(let t=0;t<i;++t){const n=this.Vv(t,s);n.yv(r[t])}}}}}{let d=function(t,s){let i,e,h,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,h=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,h=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{Zv:i,Qv:e,format:h,type:r}};d;const di=self.Os,pi=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),mi=new Set(["nearest","bilinear","trilinear"]),gi=new Set(["default","low","high"]),yi=new Set(["clamp-to-edge","repeat","mirror-repeat"]),wi={t2:"clamp-to-edge",s2:"clamp-to-edge",i2:"trilinear",e2:0,h2:"rgba8",n2:!0,o2:"default",premultiplyAlpha:!0,a2:!1,width:-1,height:-1},Si={premultiplyAlpha:!0,flipY:!1},bi=new Set;di.Vg.u2=class{constructor(t){this.lb=t,this.l2=null,this.Lm=0,this.km=0,this.c2=!0,this.f2="clamp-to-edge",this.d2="clamp-to-edge",this.m2="trilinear",this.g2=0,this.w2="rgba8",this.S2=!1,this.b2="default",this.rd=0}v2(s,t){if(!("undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&s instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&s instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas||s instanceof ImageData||s instanceof ArrayBuffer||null===s))throw new Error("invalid texture source");if(t=Object.assign({},wi,t),this.l2)throw new Error("already created texture");if(this.f2=t.t2,this.d2=t.s2,this.m2=t.i2,this.g2=t.e2,this.w2=t.h2,this.S2=!!t.n2&&this.lb.QS(),this.b2=t.o2,!yi.has(this.f2)||!yi.has(this.d2))throw new Error("invalid wrap mode");if(!mi.has(this.m2))throw new Error("invalid sampling");if(!pi.has(this.w2))throw new Error("invalid pixel format");if(!gi.has(this.b2))throw new Error("invalid mipmap quality");if(this.c2=!0,s instanceof ArrayBuffer||null===s||t.a2){if(this.Lm=t.width,this.km=t.height,s instanceof ArrayBuffer&&s.byteLength!==this.Lm*this.km*4)throw new Error("ArrayBuffer wrong size")}else this.Lm=s.width,this.km=s.height;if(this.Lm<=0||this.km<=0)throw new Error("invalid texture data size");if(t.a2){const o=di.Go(this.Lm,this.km),a=o.getContext("2d");a.drawImage(s,0,0,this.Lm,this.km),s=o}const i=di.Pr(this.Lm)&&di.Pr(this.km),e=this.lb.M2();if(this.Lm>e||this.km>e)throw new Error("texture data exceeds maximum texture size");const h=this.lb.G2(),r=this.lb.T2(),n=(this.l2=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.l2),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1),d(this.w2,h));if(this.lb._2()||i||!this.I2())if(2<=r){let t;t=this.S2?Math.floor(Math.log2(Math.max(this.Lm,this.km))+1):1,h.texStorage2D(h.TEXTURE_2D,t,n.Zv,this.Lm,this.km),s instanceof ArrayBuffer?h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.Lm,this.km,n.format,n.type,new Uint8Array(s)):null!==s&&h.texSubImage2D(h.TEXTURE_2D,0,0,0,n.format,n.type,s)}else s instanceof ArrayBuffer?h.texImage2D(h.TEXTURE_2D,0,n.Qv,this.Lm,this.km,0,n.format,n.type,new Uint8Array(s)):null===s?h.texImage2D(h.TEXTURE_2D,0,n.Qv,this.Lm,this.km,0,n.format,n.type,null):h.texImage2D(h.TEXTURE_2D,0,n.Qv,n.format,n.type,s);else{if(null===s)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((s=s instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(s),this.Lm,this.km):s)instanceof ImageData){const c=di.Go(this.Lm,this.km),f=c.getContext("2d");f.putImageData(s,0,0),s=c}const u=di.Go(di.Ar(this.Lm),di.Ar(this.km)),l=u.getContext("2d");l.imageSmoothingEnabled="nearest"!==this.m2,l.drawImage(s,0,0,this.Lm,this.km,0,0,u.width,u.height),h.texImage2D(h.TEXTURE_2D,0,n.Qv,n.format,n.type,u)}null!==s&&this.C2(h),h.bindTexture(h.TEXTURE_2D,null),this.lb.E2(),this.rd=1,bi.add(this)}R2(t,s,i){if(i=Object.assign({},wi,i),this.l2)throw new Error("already created texture");if(this.f2=i.t2,this.d2=i.s2,this.m2=i.i2,this.w2=i.h2,this.S2=!!i.n2&&this.lb.QS(),this.b2=i.o2,!yi.has(this.f2)||!yi.has(this.d2))throw new Error("invalid wrap mode");if(!mi.has(this.m2))throw new Error("invalid sampling");if(!pi.has(this.w2))throw new Error("invalid pixel format");if(!gi.has(this.b2))throw new Error("invalid mipmap quality");this.c2=!1,this.Lm=Math.floor(t),this.km=Math.floor(s);const e=di.Pr(this.Lm)&&di.Pr(this.km),h=this.lb.M2();if(this.Lm<=0||this.km<=0)throw new Error("invalid texture size");if(this.Lm>h||this.km>h)throw new Error("texture exceeds maximum texture size");if(!this.lb._2()&&this.I2()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.lb.G2(),n=this.lb.T2(),o=(this.l2=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.l2),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),d(this.w2,r)),a=2<=n?o.Zv:o.Qv;r.texImage2D(r.TEXTURE_2D,0,a,this.Lm,this.km,0,o.format,o.type,null),this.C2(r),r.bindTexture(r.TEXTURE_2D,null),this.lb.E2(),this.rd=1,bi.add(this)}P2(t){if("default"===this.b2)return this.c2?t.NICEST:t.FASTEST;if("low"===this.b2)return t.FASTEST;if("high"===this.b2)return t.NICEST;throw new Error("invalid mipmap quality")}I2(){return"clamp-to-edge"!==this.f2||"clamp-to-edge"!==this.d2}A2(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}C2(t){const s=di.Pr(this.Lm)&&di.Pr(this.km);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.A2(t,this.f2)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.A2(t,this.d2)),"nearest"===this.m2)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.S2=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.lb._2())&&this.S2){t.hint(t.GENERATE_MIPMAP_HINT,this.P2(t)),t.generateMipmap(t.TEXTURE_2D);const e="trilinear"===this.m2&&!this.lb.sb();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.S2=!1;const i=this.lb.F2();i&&0<this.g2&&"nearest"!==this.m2&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.g2,this.lb.D2()))}O2(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.l2||this.rd<=0)throw new Error("texture not created");if(this.c2)throw new Error("cannot update static texture");s=Object.assign({},Si,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,h=this.lb.T2(),r=this.lb.G2(),n=(r.bindTexture(r.TEXTURE_2D,this.l2),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY),d(this.w2,r)),o=2<=h?n.Zv:n.Qv;try{if(this.Lm===i&&this.km===e){const a=di.Pr(this.Lm)&&di.Pr(this.km);r.texSubImage2D(r.TEXTURE_2D,0,0,0,n.format,n.type,t),(a||this.lb._2())&&this.S2&&(r.hint(r.GENERATE_MIPMAP_HINT,this.P2(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.Lm=i,this.km=e;const u=di.Pr(this.Lm)&&di.Pr(this.km);if(!this.lb._2()&&this.I2()&&!u)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,n.format,n.type,t),(u||this.lb._2())&&this.S2&&(r.hint(r.GENERATE_MIPMAP_HINT,this.P2(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.lb.E2()}L2(){if(0<this.rd)throw new Error("texture still has references");if(!this.l2)throw new Error("already deleted texture");bi.delete(this);const t=this.lb.G2();t.deleteTexture(this.l2),this.l2=null}N2(){return!!this.l2}B2(){return this.l2}Gb(){return this.lb}W2(){this.rd++}j2(){if(this.rd<=0)throw new Error("no more references");this.rd--}H2(){return this.rd}Xp(){return this.Lm}om(){return this.km}V2(){return this.c2}U2(){let t=this.Lm*this.km;switch(this.w2){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.S2&&(t+=Math.floor(t/3)),t}static zb(){bi.clear()}static z2(){return bi.values()}}}{const vi=self.Os,Mi=self.ws,xh=Mi._s,Gh=Mi.Ms,Gi=new Set(["nearest","bilinear","trilinear"]),xi={i2:"trilinear",alpha:!0,depth:!1,J2:!0,q2:!0,X2:0},Ti=new Set;vi.Vg.K2=class{constructor(t){this.lb=t,this.Y2=null,this.Z2=null,this.l2=null,this.Q2=null,this.Lm=0,this.km=0,this.tM=!0,this.m2="trilinear",this.sM=!0,this.iM=!1,this.eM=!0,this.hM=0,this.rM=Gh.create(),this.nM=0,this.oM=0,this.aM=0}uM(t,s,i){i=Object.assign({},xi,i);const e=this.lb.T2();if(this.l2||this.Q2)throw new Error("already created render target");if(this.m2=i.i2,this.sM=!!i.alpha,this.iM=!!i.depth,this.eM=!!i.J2,this.tM=!!i.q2,this.hM=i.X2,!Gi.has(this.m2))throw new Error("invalid sampling");if(0<this.hM&&(e<2||this.eM))throw new Error("invalid use of multisampling");if(e<2&&(this.eM=!0),this.Lm=t,this.km=s,this.Lm<=0||this.km<=0)throw new Error("invalid render target size");this.lM();const h=this.lb.G2();if(this.Y2=h.createFramebuffer(),this.iM&&(this.Z2=h.createFramebuffer()),this.eM){this.l2=this.lb.cM(this.Lm,this.km,{i2:this.m2,h2:this.sM?"rgba8":"rgb8",n2:!1});const n=this.l2.B2();h.bindFramebuffer(h.FRAMEBUFFER,this.Y2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0),this.iM&&(h.bindFramebuffer(h.FRAMEBUFFER,this.Z2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0))}else{this.Q2=h.createRenderbuffer(),h.bindRenderbuffer(h.RENDERBUFFER,this.Q2);const o=this.sM?h.RGBA8:h.RGB8;if(0<this.hM){const a=h.getInternalformatParameter(h.RENDERBUFFER,o,h.SAMPLES);if(a&&a[0]){const u=a[0];this.hM>u&&(this.hM=u)}else this.hM=0}0===this.hM?h.renderbufferStorage(h.RENDERBUFFER,o,this.Lm,this.km):h.renderbufferStorageMultisample(h.RENDERBUFFER,this.hM,o,this.Lm,this.km),h.bindFramebuffer(h.FRAMEBUFFER,this.Y2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.Q2),this.iM&&(h.bindFramebuffer(h.FRAMEBUFFER,this.Z2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.Q2)),h.bindRenderbuffer(h.RENDERBUFFER,null)}const r=this.lb.fM();this.iM&&r&&(h.bindFramebuffer(h.FRAMEBUFFER,this.Y2),this.lb.dM()?h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.TEXTURE_2D,r,0):h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,r)),h.bindFramebuffer(h.FRAMEBUFFER,null),Ti.add(this)}pM(t,s){if(this.Lm!==t||this.km!==s){this.Lm=t,this.km=s,this.lM();const i=this.lb.G2(),e=(i.bindFramebuffer(i.FRAMEBUFFER,this.Y2),this.l2?this.l2.O2(new ImageData(this.Lm,this.km)):(i.bindRenderbuffer(i.RENDERBUFFER,this.Q2),i.renderbufferStorage(i.RENDERBUFFER,this.sM?i.RGBA8:i.RGB8,this.Lm,this.km),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.lb.fM());this.iM&&e&&(this.lb.dM()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}}L2(){if(!this.l2&&!this.Q2)throw new Error("already deleted render target");Ti.delete(this);const t=this.lb.G2(),s=(this.l2?(t.bindFramebuffer(t.FRAMEBUFFER,this.Y2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.iM&&(t.bindFramebuffer(t.FRAMEBUFFER,this.Z2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.lb.mM(this.l2),this.l2=null):this.Q2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.Y2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.iM&&(t.bindFramebuffer(t.FRAMEBUFFER,this.Z2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.Q2),this.Q2=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.lb.T2()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.Y2),this.iM&&t.deleteFramebuffer(this.Z2),this.lb.gM());s.yM=null,this.Y2=s.wM=null}lM(){this.lb.ww(this.rM,this.Lm/this.km),this.nM=this.lb.pw(),this.oM=this.lb.uw(),this.aM=this.lb.fw()}SM(){return this.Y2}bM(){return this.Z2}Gb(){return this.lb}vM(){return this.l2}MM(){return this.lb.pw()===this.nM&&this.lb.uw()===this.oM&&this.lb.fw()===this.aM||this.lM(),this.rM}GM(){return"nearest"!==this.m2}xM(){return this.sM}TM(){return this.eM}_M(){return this.iM}Xp(){return this.Lm}om(){return this.km}IM(){return this.tM}CM(){return this.hM}EM(){const t={i2:this.m2,alpha:this.sM,J2:this.eM};return this.tM||(t.width=this.Lm,t.height=this.km),t}RM(t){return"nearest"!==(t=Object.assign({},xi,t)).i2===this.GM()&&!!t.alpha===this.xM()&&!!t.depth===this._M()&&!(2<=this.lb.T2()&&!!t.J2!==this.TM())&&("number"==typeof t.width||"number"==typeof t.height?!this.IM()&&this.Xp()===Math.floor(t.width)&&this.om()===Math.floor(t.height):this.IM())}PM(){return this.l2?this.l2.B2():null}U2(){return this.l2?this.l2.U2():this.Lm*this.km*(this.sM?4:3)}static async AM(t,s){const i=await t.FM(s,!0);return vi._o(i)}static zb(){Ti.clear()}static DM(){return Ti.values()}static OM(t,s){for(const i of Ti)i.IM()&&i.pM(t,s)}}}{const m=self.Os,_i=self.ws,xh=_i._s,Gh=_i.Ms,Ii=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);m.Vg.LM=class extends m.Vg.ub{static async kM(t,s){const i=t.G2(),e=s.src,h=s.NM,r=s.name,n=i.createShader(i.FRAGMENT_SHADER),o=(i.shaderSource(n,e),i.compileShader(n),i.createShader(i.VERTEX_SHADER)),a=(i.shaderSource(o,h),i.compileShader(o),i.createProgram()),u=(i.attachShader(a,n),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a),t.BM());if(u?await t.WM(()=>i.getProgramParameter(a,u.COMPLETION_STATUS_KHR)):await m.Tn(5),!i.getShaderParameter(n,i.COMPILE_STATUS)){const c=i.getShaderInfoLog(n);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+c)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const f=i.getShaderInfoLog(o);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const d=i.getProgramInfoLog(a);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+d)}const l=m.Od(i.getProgramInfoLog(a)||"").trim();return l&&!m.Ad(l)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,l),i.deleteShader(n),i.deleteShader(o),a}static async jM(t,s){const i=await m.Vg.LM.kM(t,s);return new m.Vg.LM(t,i,s)}constructor(t,s,i){super(t,i);const e=t.G2(),h=t.gM(),r=(t.XS(),e.useProgram(s),this.HM=e,this.kb=s,this.VM="<default-device-transform>"===i.name,e.getAttribLocation(s,"aPos")),n=e.getAttribLocation(s,"aTex"),o=(this.UM=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.zM),e.vertexAttribPointer(r,t.qS(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==n&&(e.bindBuffer(e.ARRAY_BUFFER,t.JM),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(n)),-1!==this.UM&&(e.bindBuffer(e.ARRAY_BUFFER,t.qM),e.vertexAttribPointer(this.UM,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.UM)),e.bindBuffer(e.ARRAY_BUFFER,null),this.$M=new m.Vg.XM(this,"matP","mat4"),this.KM=new m.Vg.XM(this,"matMV","mat4"),this.YM=new m.Vg.XM(this,"color","vec4"),this.ZM=new m.Vg.XM(this,"samplerFront","sampler"),this.QM=new m.Vg.XM(this,"pointTexStart","vec2"),this.tG=new m.Vg.XM(this,"pointTexEnd","vec2"),this.sG=new m.Vg.XM(this,"zElevation","float"),this.iG=new m.Vg.XM(this,"tileSize","vec2"),this.eG=new m.Vg.XM(this,"tileSpacing","vec2"),this.hG=new m.Vg.XM(this,"color2_","vec4"),this.rG=new m.Vg.XM(this,"outlineThickness","float"),this.nG=new m.Vg.XM(this,"samplerBack","sampler"),this.oG=new m.Vg.XM(this,"samplerDepth","sampler"),this.aG=new m.Vg.XM(this,"destStart","vec2"),this.uG=new m.Vg.XM(this,"destEnd","vec2"),this.lG=new m.Vg.XM(this,"srcStart","vec2"),this.cG=new m.Vg.XM(this,"srcEnd","vec2"),this.fG=new m.Vg.XM(this,"srcOriginStart","vec2"),this.dG=new m.Vg.XM(this,"srcOriginEnd","vec2"),this.pG=new m.Vg.XM(this,"pixelSize","vec2"),this.mG=new m.Vg.XM(this,"seconds","float"),this.gG=new m.Vg.XM(this,"devicePixelRatio","float"),this.yG=new m.Vg.XM(this,"layerScale","float"),this.wG=new m.Vg.XM(this,"layerAngle","float"),this.SG=new m.Vg.XM(this,"layoutStart","vec2"),this.bG=new m.Vg.XM(this,"layoutEnd","vec2"),this.vG=new m.Vg.XM(this,"zNear","float"),this.MG=new m.Vg.XM(this,"zFar","float"),this.GG=!!(this.pG.xG()||this.mG.xG()||this.nG.xG()||this.aG.xG()||this.uG.xG()||this.lG.xG()||this.cG.xG()||this.fG.xG()||this.dG.xG()||this.gG.xG()||this.yG.xG()||this.wG.xG()||this.SG.xG()||this.bG.xG()),i.parameters||[]);this.TG=[],this.vb=this.pG.xG()||this.lG.xG()||this.cG.xG()||this.fG.xG()||this.dG.xG(),this._G=!1,this.IG=!1,this.YM.CG(1,1,1,1),this.hG.CG(1,1,1,1),this.ZM.EG(0),this.nG.EG(1),this.oG.EG(2),this.QM.PG(0,0),this.tG.PG(1,1),this.sG.AG(0),this.iG.PG(0,0),this.eG.PG(0,0),this.aG.PG(0,0),this.uG.PG(1,1),this.lG.PG(0,0),this.cG.PG(0,0),this.fG.PG(0,0),this.dG.PG(0,0),this.pG.PG(0,0),this.gG.AG(1),this.vG.AG(t.uw()),this.MG.AG(t.fw()),this.yG.AG(1),this.wG.AG(0),this.mG.AG(0),this.SG.PG(0,0),this.bG.PG(0,0),this.rG.AG(1);for(const u of o){const l=u[0],c=u[2],f=new m.Vg.XM(this,l,c);"color"===c?f.FG(0,0,0):f.AG(0),this.TG.push(f)}this.VM?this.DG(h.OG):(this.LG(h.OG,!0),this.kG(h.NG,!0));const a=h.BG;e.useProgram(a?a.kb:null)}er(){this.HM.deleteProgram(this.kb),this.kb=null,this.lb.Tw(this),this.HM=null,super.er()}WG(){return this.HM}jG(){return this.kb}HG(){return this.TG.length}VG(t){return t<0||t>=this.TG.length?null:this.TG[t].UG()}zG(i){for(let t=0,s=i.length;t<s;++t)if(!this.TG[t].JG(i[t]))return!1;return!0}qG(i){for(let t=0,s=i.length;t<s;++t)this.TG[t].$G(i[t])}XG(t,s,i,e,h,r,n,o,a,u){return!this.nG.xG()&&!(this.pG.xG()&&!this.pG.KG(h,r)||this.aG.xG()&&!this.aG.KG(t.fu(),t.du())||this.uG.xG()&&!this.uG.KG(t.pu(),t.mu())||this.gG.xG()&&!this.gG.YG(n)||this.yG.xG()&&!this.yG.YG(o)||this.wG.xG()&&!this.wG.YG(a)||this.lG.xG()&&!this.lG.KG(s.fu(),s.du())||this.cG.xG()&&!this.cG.KG(s.pu(),s.mu())||this.fG.xG()&&!this.fG.KG(i.fu(),i.du())||this.dG.xG()&&!this.dG.KG(i.pu(),i.mu())||this.SG.xG()&&!this.SG.KG(e.fu(),e.du())||this.bG.xG()&&!this.bG.KG(e.du(),e.mu())||this.mG.xG()&&!this.mG.YG(u))}ZG(t,s,i,e,h,r,n,o,a,u){this.nG.xG()||(this.pG.xG()&&this.pG.QG(h,r),this.aG.xG()&&this.aG.QG(t.fu(),t.du()),this.uG.xG()&&this.uG.QG(t.pu(),t.mu()),this.gG.xG()&&this.gG.tx(n),this.yG.xG()&&this.yG.tx(o),this.wG.xG()&&this.wG.tx(a),this.lG.xG()&&this.lG.QG(s.fu(),s.du()),this.cG.xG()&&this.cG.QG(s.pu(),s.mu()),this.fG.xG()&&this.fG.QG(i.fu(),i.du()),this.dG.xG()&&this.dG.QG(i.pu(),i.mu()),this.SG.xG()&&this.SG.QG(e.fu(),e.du()),this.bG.xG()&&this.bG.QG(e.du(),e.mu()),this.mG.xG()&&this.mG.tx(u))}LG(t,s){this._G&&!s||this.VM||(this.$M.xG()&&this.$M.ix(t),this._G=!0)}hx(){this._G=!1}kG(t,s){this.IG&&!s||this.VM||(this.KM.xG()&&this.KM.ix(t),this.IG=!0)}nx(){this.IG=!1}DG(t){if(!this.VM)throw new Error("not device transform shader");this.$M.ix(t);const s=this.lb,i=s.Xp()/2,e=s.om()/2,h=s.Gw(i,e,s.ew(s.om()),i,e,0,s.om());this.KM.ix(h)}ox(t){this.YM.xG()&&this.YM.ux(t[0],t[1],t[2],t[3])}static mx(){return Ii}static gx(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static yx(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static wx(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static Sx(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static bx(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static vx(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static Mx(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Gx(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static xx(t,s,i){let e="";return 2<=t?e="#version 300 es\n":(s&&(e="#extension GL_EXT_frag_depth : enable\n"),i&&(e+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),e+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!i?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static Tx(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static _x(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static Ix(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static Cx(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Ex(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Rx(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static Px(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static Ax(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static Fx(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static Dx(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static Ox(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static Lx(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static kx(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const Ci=self.Os,Ei=self.ws,Gh=Ei.Ms,Ri=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);Ci.Vg.XM=class{constructor(t,s,i){if(!Ri.has(i))throw new Error("invalid uniform type");this.xv=t,this.HM=this.xv.WG(),this.nr=s,this.ef=i,this.Nx="color"===this.ef,this.Bx=this.HM.getUniformLocation(this.xv.jG(),s),this.Wx=!!this.Bx;const e=Ri.get(i);this.jx=new Float32Array(e),this.Hx=new Float32Array(e)}er(){this.xv=null,this.HM=null,this.Bx=null}xG(){return this.Wx}UG(){return this.ef}Vx(){return this.Nx}AG(t){this.xG()&&(this.jx[0]=t,this.Hx.set(this.jx),this.HM.uniform1f(this.Bx,t))}EG(t){this.xG()&&(this.jx[0]=t,this.Hx.set(this.jx),this.HM.uniform1i(this.Bx,t))}PG(t,s){this.xG()&&(this.jx[0]=t,this.jx[1]=s,this.Hx.set(this.jx),this.HM.uniform2f(this.Bx,t,s))}FG(t,s,i){this.xG()&&(this.jx[0]=t,this.jx[1]=s,this.jx[2]=i,this.Hx.set(this.jx),this.HM.uniform3f(this.Bx,t,s,i))}CG(t,s,i,e){this.xG()&&(this.jx[0]=t,this.jx[1]=s,this.jx[2]=i,this.jx[3]=e,this.Hx.set(this.jx),this.HM.uniform4f(this.Bx,t,s,i,e))}Ux(t){t=Math.fround(t);const s=this.jx;s[0]!==t&&(s[0]=t,this.HM.uniform1f(this.Bx,t))}zx(t){const s=this.jx;s[0]!==t&&this.HM.uniform1i(this.Bx,s[0]=t)}Jx(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.jx;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.HM.uniform2f(this.Bx,t,s))}qx(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.jx;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.HM.uniform3f(this.Bx,t,s,i))}ux(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const h=this.jx;h[0]===t&&h[1]===s&&h[2]===i&&h[3]===e||(h[0]=t,h[1]=s,h[2]=i,h[3]=e,this.HM.uniform4f(this.Bx,t,s,i,e))}ix(t){const s=this.jx;Gh.W(s,t)||(Ci.En(s,t,0),this.HM.uniformMatrix4fv(this.Bx,!1,t))}JG(t){const s=this.Hx;return this.Vx()?s[0]===Math.fround(t.Xo())&&s[1]===Math.fround(t.Ko())&&s[2]===Math.fround(t.Yo()):s[0]===Math.fround(t)}$G(t){const s=this.Hx;this.Vx()?(s[0]=t.Xo(),s[1]=t.Ko(),s[2]=t.Yo()):s[0]=t}YG(t){return this.Hx[0]===Math.fround(t)}KG(t,s){const i=this.Hx;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}tx(t){this.Hx[0]=t}QG(t,s){const i=this.Hx;i[0]=t,i[1]=s}}}{const Pi=self.Os,Ai=self.ws,Hh=Ai.Is,Gh=Ai.Ms;Pi.Vg.$x=class{constructor(t){this.renderer=t,this.NG=Gh.create(),this.OG=Gh.create(),this.yM=null,this.wM=null,this.Xx=!1,this.Kx=Hh.I(1,1,1,1),this.BG=null,this.Yx=new Pi.Rect,this.clearColor=Pi.ir(Pi.Oo,0,0,0,0)}},Pi.Vg.Zx=class{constructor(t){const s=new ArrayBuffer(96);this.ef=0,this.Qx=t,this.HM=t.renderer.G2(),this.tT=0,this.sT=0,this.iT=null,this.eT=new Float32Array(s,0,16),this.hT=new Float32Array(s,64,4),this.rT=new Float32Array(s,80,4),this.nT=[]}oT(t,s){this.ef=1,this.tT=t,this.sT=s}aT(){const t=this.HM;t.drawElements(t.TRIANGLES,this.sT,t.UNSIGNED_SHORT,this.tT)}uT(t){this.ef=2,this.iT=t}lT(){const t=this.HM,s=this.iT;t.bindTexture(t.TEXTURE_2D,s?s.B2():null)}cT(t){this.ef=3,t.ta(this.hT,0)}fT(){const t=this.hT,s=this.Qx;Hh._(s.Kx,t),s.BG.ox(t)}dT(t){this.ef=21,t.ta(this.hT,0)}pT(){const t=this.hT,s=this.Qx.BG;s.hG.xG()&&s.hG.ux(t[0],t[1],t[2],t[3])}mT(t,s){this.ef=4,this.tT=t,this.sT=s}gT(){this.HM.blendFunc(this.tT,this.sT)}yT(t,s,i,e){this.ef=5;const h=this.hT;h[0]=t,h[1]=s,h[2]=i,h[3]=e}wT(){const t=this.hT;this.HM.viewport(t[0],t[1],t[2],t[3])}ST(t){this.ef=6,Gh._(this.eT,t)}bT(){const t=this.Qx,i=t.renderer.vy,e=t.BG,h=this.eT;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.LG(h,!0):r.hx()}Gh._(t.OG,h)}vT(t){this.ef=7,Gh._(this.eT,t)}MT(){const t=this.Qx,i=t.renderer.vy,e=t.BG,h=this.eT;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.kG(h,!0):r.nx()}Gh._(t.NG,h)}GT(t){this.ef=8,this.iT=t}xT(){const t=this.HM,s=this.iT,i=this.Qx;s?(i.yM=s.SM(),i.wM=s.bM(),i.Xx&&i.wM?t.bindFramebuffer(t.FRAMEBUFFER,i.wM):t.bindFramebuffer(t.FRAMEBUFFER,i.yM)):(i.yM=null,i.wM=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}TT(t){this.ef=9,t.ta(this.eT,0)}_T(t,s,i,e){this.ef=9;const h=this.eT;h[0]=t,h[1]=s,h[2]=i,h[3]=e}IT(){const t=this.HM,s=this.eT,i=this.Qx,e=i.clearColor,h=s[0],r=s[1],n=s[2],o=s[3];e.na(h,r,n,o)||(t.clearColor(h,r,n,o),e.Wo(h,r,n,o)),t.clear(t.COLOR_BUFFER_BIT)}CT(t){this.ef=15,t.ta(this.eT,0)}ET(){const t=this.eT;this.Qx.Yx.set(t[0],t[1],t[2],t[3])}RT(t,s){this.ef=10,this.tT=t,this.sT=1,this.eT[0]=s}PT(){const t=this.HM,s=this.Qx,i=s.renderer,e=i.xy,h=(t.useProgram(e.kb),e.LG(s.OG,!1),e.kG(s.NG,!1),s.Yx),r=(e.QM.xG()&&e.QM.Jx(h.fu(),h.du()),e.tG.xG()&&e.tG.Jx(h.pu(),h.mu()),this.eT[0]);if(e.sG.xG()&&e.sG.Ux(r),e.YM.xG()){const n=s.Kx;e.YM.ux(n[0],n[1],n[2],n[3])}t.drawArrays(t.POINTS,this.tT/4,this.sT),t.useProgram(s.BG.kb)}AT(t){this.ef=11,this.iT=t}FT(){const t=this.HM,s=this.Qx,i=this.iT;if(s.BG=i,t.useProgram(i.kb),i.LG(s.OG,!1),i.kG(s.NG,!1),i.YM.xG()){const e=s.Kx;i.YM.ux(e[0],e[1],e[2],e[3])}}DT(){this.ef=12}OT(){const t=this.Qx.BG,s=this.HM,i=this.eT,e=this.hT,h=this.rT;if(t.nG.xG()){const r=this.Qx.renderer,n=this.iT;r.LT!==n&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,n?n.B2():null),r.LT=n,s.activeTexture(s.TEXTURE0))}t.pG.xG()&&t.pG.Jx(i[0],i[1]),t.aG.xG()&&t.aG.Jx(i[2],i[3]),t.uG.xG()&&t.uG.Jx(i[4],i[5]),t.gG.xG()&&t.gG.Ux(this.sT),t.yG.xG()&&t.yG.Ux(i[6]),t.wG.xG()&&t.wG.Ux(i[7]),t.lG.xG()&&t.lG.Jx(i[12],i[13]),t.cG.xG()&&t.cG.Jx(i[14],i[15]),t.fG.xG()&&t.fG.Jx(h[0],h[1]),t.dG.xG()&&t.dG.Jx(h[2],h[3]),t.SG.xG()&&t.SG.Jx(e[0],e[1]),t.bG.xG()&&t.bG.Jx(e[2],e[3]),t.mG.xG()&&t.mG.Ux(this.tT)}kT(){this.ef=13}NT(){const t=this.Qx.BG,i=t.TG,e=this.nT;for(let t=0,s=i.length;t<s;++t){const h=i[t],r=e[t];h.Vx()?h.qx(r.Xo(),r.Ko(),r.Yo()):h.Ux(r)}}BT(t){this.ef=14,this.iT=t}WT(){const t=this.HM,s=this.iT,i=this.Qx.yM;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}jT(t,s,i){this.ef=17;const e=this.eT,h=this.Qx.renderer,r=(e[0]=t.Xp(),e[1]=t.om(),e[2]=(s||h).Xp(),e[3]=(s||h).om(),e[4]=t.GM()?1:0,e[5]="stretch"===i,this.nT);Pi.Pn(r),r.push(t.SM()),r.push(s?s.SM():null)}HT(){const t=this.eT,s=this.nT,i=this.HM,e=t[0],h=t[1],r=t[2],n=t[3],o=0!==t[4],a=0!==t[5],u=s[0],l=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,u),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,l),a)i.blitFramebuffer(0,0,e,h,0,0,r,n,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const c=Math.min(e,r),f=Math.min(h,n),d=Math.max(h-n,0),p=Math.max(n-h,0);i.blitFramebuffer(0,d,c,f+d,0,p,c,f+p,i.COLOR_BUFFER_BIT,i.NEAREST)}}VT(t){this.ef=18,this.iT=t}UT(){this.iT.zT(),this.iT=null}JT(t){this.ef=19,this.iT=t}qT(){this.iT.$T(),this.iT=null}XT(t,s,i){this.ef=20;const e=this.eT;e[0]=t,e[1]=s,e[2]=i}KT(){const t=this.Qx.BG,s=this.eT;t.pG.xG()&&t.pG.Jx(s[0],s[1]),t.rG.xG()&&t.rG.Ux(s[2])}YT(t,s,i,e,h,r,n){this.ef=16;const o=this.eT;t.ta(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=h/i,o[8]=r/s,o[9]=n/i}ZT(){const t=this.Qx.BG,s=this.eT;t.lG.xG()&&t.lG.Jx(s[0],s[1]),t.pG.xG()&&t.pG.Jx(s[4],s[5]),t.iG.xG()&&t.iG.Jx(s[6],s[7]),t.eG.xG()&&t.eG.Jx(s[8],s[9])}QT(t,s,i,e,h,r,n){this.ef=29;const o=this.eT;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=h,o[5]=r,o[6]=n}t_(){const t=this.Qx.BG,s=this.eT;t.pG.xG()&&t.pG.Jx(s[0],s[1]),t.iG.xG()&&t.iG.Jx(s[2],s[3]),t.rG.xG()&&t.rG.Ux(s[4]),t.eG.xG()&&t.eG.Jx(s[5],s[6])}s_(t){this.ef=22,this.tT=t?1:0}i_(){const t=this.HM,s=0!==this.tT;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}e_(t){this.ef=23,this.tT=t?1:0}h_(){const t=this.HM;0===this.tT?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}r_(t){this.ef=24,this.tT=t?1:0}n_(){const t=this.HM,s=this.Qx,i=s.renderer,e=0!==this.tT;s.Xx=e,t.activeTexture(t.TEXTURE2),e?(s.wM&&t.bindFramebuffer(t.FRAMEBUFFER,s.wM),t.bindTexture(t.TEXTURE_2D,i.fM())):(t.bindTexture(t.TEXTURE_2D,null),s.wM&&t.bindFramebuffer(t.FRAMEBUFFER,s.yM)),t.activeTexture(t.TEXTURE0)}o_(){this.ef=25}a_(){const t=this.HM;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}u_(){this.ef=26}l_(){const t=this.HM;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}c_(){this.ef=27}f_(){const t=this.HM;t.disable(t.STENCIL_TEST)}d_(t,s,i,e,h){this.ef=28,this.tT=t?1:0;const r=this.eT;r[0]=s,r[1]=i,r[2]=e,r[3]=h}p_(){const t=this.HM,s=this.eT;1===this.tT?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}m_(){switch(this.ef){case 1:return void this.aT();case 2:return void this.lT();case 3:return void this.fT();case 4:return void this.gT();case 5:return void this.wT();case 6:return void this.bT();case 7:return void this.MT();case 8:return void this.xT();case 9:return void this.IT();case 10:return void this.PT();case 11:return void this.FT();case 12:return void this.OT();case 13:return void this.NT();case 14:return void this.WT();case 15:return void this.ET();case 16:return void this.ZT();case 17:return void this.HT();case 18:return void this.UT();case 19:return void this.qT();case 20:return void this.KT();case 21:return void this.pT();case 22:return void this.i_();case 23:return void this.h_();case 24:return void this.n_();case 25:return void this.a_();case 26:return void this.l_();case 27:return void this.f_();case 28:return void this.p_();case 29:return void this.t_()}}}}{let I=function(t,s,i,e,h,r){s?t.strokeRect(i,e,h,r):t.fillRect(i,e,h,r)},t=function(t){return t*(4/3)},o=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};I,t,o;const Fi=self.Os,Di=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Oi={timeout:60},Li=new Fi.Oo(0,0,0,1),ki=new Set(["left","center","right"]),Ni=new Set(["top","center","bottom"]),Bi=new Set(["word","cjk","character"]),Wi=new Set(["ltr","rtl"]),ji=new Set;Fi.FontManager&&Fi.FontManager.addEventListener("fontload",t=>{const s=t.font.Wc();for(const i of ji)(i.g_()||Fi.ph(i.y_(),s))&&i.w_()});let s=!1,i=!1;Fi.Vg.ab=class{constructor(t,s){s=Object.assign({},Oi,s),this.lb=t,this.S_="Arial",this.b_=16,this.v_=1,this.M_=0,this.G_=!1,this.x_=!1,this.T_="black",this.__=!1,this.Up=null,this.I_=!0,this.C_=null,this.E_=new Set,this.R_="left",this.P_="top",this.Xc="",this.A_=null,this.F_=Fi.ir(Fi.Hp),this.D_="word",this.O_="ltr",this.L_=!1,this.k_=!1,this.N_=!1,this.B_=-1,this.W_=0,this.j_=0,this.H_=0,this.Lm=0,this.km=0,this.V_=1,this.U_=null,this.z_=null,this.J_=null,this.q_=null,this.X_=-1,this.K_=-1,this.Y_="",this.Z_="",this.Q_="",this.tI=1,this.sI=1,this.iI=t=>this.eI(t),this.l2=null,this.hI=new Fi.Rect,this.rI=1,this.nI=new Fi.Jf(()=>{this.oI(),this.aI(8,8)},s.timeout),this.uI=null,this.lI=!1,ji.add(this)}er(){this.C_=null,this.E_.clear(),this.Up=null,this.A_=null,this.U_=null,this.z_=null,this.J_=null,this.q_=null,this.iI=null,this.nI.er(),this.uI=null,this.oI(),this.F_.Vl(),this.F_=null,this.lb=null,this.lI=!0,ji.delete(this)}cI(){this.N_=!0}fI(){this.cI(),this.k_=!0}w_(){this.fI(),this.L_=!0}dI(t){if(this.__!==(t=!!t)){this.__=t;const s=this.__?"alphabetic":"top";this.z_&&(this.z_.textBaseline=s),this.J_&&(this.J_.textBaseline=s),this.w_()}}g_(){return this.__}qp(t){this.Up!==t&&(this.Up=t,this.F_.qp(t),this.Up&&this.Up.Rg()&&this.Up.Pg().then(()=>this.cI()),this.w_())}pI(t){this.I_!==(t=!!t)&&(this.I_=t,this.cI())}mI(t){this.S_!==(t=t||"serif")&&(this.S_=t,this.w_())}y_(){return this.S_}gI(t){this.b_!==(t=t<.1?.1:t)&&(this.b_=t,this.w_())}yI(){return this.b_}wI(t){this.v_!==t&&(this.v_=t,this.w_())}SI(t){this.M_!==t&&(this.M_=t,this.fI())}bI(){return this.M_}vI(t){this.G_!==(t=!!t)&&(this.G_=t,this.w_())}MI(){return this.G_}GI(t){this.x_!==(t=!!t)&&(this.x_=t,this.w_())}xI(){return this.x_}TI(t){t=Math.floor(t),this.B_!==t&&(this.B_=t,this.cI())}_I(){return this.B_}II(t,s){let i=[];(this.G_||s.Zm("b"))&&i.push("bold"),(this.x_||s.Zm("i"))&&i.push("italic");const e=s.Ym("size"),h=(e?parseFloat(e.Op):this.b_)*this.v_;i.push(t?h+"pt":h*this.CI()+"pt");let r=this.S_,n=s.Ym("font");return n&&n.Op&&(r=n.Op,this.C_)&&!this.E_.has(r)&&(this.C_(r),this.E_.add(r)),r&&(Di.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}Ub(t){t instanceof Fi.Oo&&(t=t.da()),this.T_!==t&&(this.T_=t,this.cI())}EI(t,s,i){Li.jo(t,s,i),this.Ub(Li)}RI(t){if(!ki.has(t))throw new Error("invalid horizontal alignment");this.R_!==t&&(this.R_=t,this.fI())}AI(){return this.R_}FI(t){if(!Ni.has(t))throw new Error("invalid vertical alignment");this.P_!==t&&(this.P_=t,this.fI())}DI(){return this.P_}OI(t){if(!Bi.has(t))throw new Error("invalid word wrap mode");this.D_!==t&&(this.D_=t,this.w_())}LI(){return this.D_}kI(t){if(!Wi.has(t))throw new Error("invalid text direction");this.O_!==t&&(this.O_=t,this.z_&&(this.z_.direction=this.O_),this.J_&&(this.J_.direction=this.O_),this.w_())}NI(){return this.O_}Zc(t){this.Xc!==t&&(this.Xc=t,this.w_())}BI(){return this.Xc}CI(){return this.rI*this.V_*self.devicePixelRatio}WI(r,n,o){if(void 0===o&&(o=1),!(r<=0||this.j_===r&&this.H_===n&&this.V_===o)){let t=this.j_,s=(this.j_=r,this.H_=n,this.V_=o,self.devicePixelRatio),i=(this.Lm=this.j_*this.V_*s,this.km=this.H_*this.V_*s,Math.max(this.Lm,this.km)),e=Math.min(this.lb.M2(),4096),h=1;e<i&&(h=e/i,this.Lm=Math.min(this.Lm*h,e),this.km=Math.min(this.km*h,e)),this.rI=h,this.j_!==t?this.w_():this.fI()}}Xp(){return this.Lm}om(){return this.km}jI(){return this.V_}HI(){return this.VI(),this.F_.Dm()}UI(){return this.VI(),this.F_.Om()+this.F_.Jp()*(this.M_+4)-this.M_}zI(){this.VI();let t=0;for(const s of this.F_.zp())for(const i of s.pm())t+=i.gm();return t}vM(){return this.nI.Yf(),this.JI(),this.l2}qI(t,s){this.VI();const i=this.CI(),e=this.F_.zp();for(const h of e){const r=h.um()*i;if(s>=h.$m()-h.om()*i+r&&s<h.$m()+r)for(const n of h.pm())if(t>=n.Jm()&&t<n.Jm()+n.Xp()*i)return n}return null}*$I(t){this.VI();const s=this.F_.zp();for(const i of s)for(const e of i.pm()){const h=e.Ym("tag");h&&Fi.ph(h.Op,t)&&(yield e)}}XI(t,s){for(const i of this.$I(t)){if(0===s)return i;--s}return null}KI(t){let s=0;for(const i of this.$I(t))++s;return s}JI(){this.l2&&!this.N_&&!this.k_&&!this.L_||this.lI||this.Lm<=0||this.km<=0||(this.N_=!1,this.YI())}YI(){this.lI||(this.VI(),this.aI(Math.max(Fi.Ar(Math.ceil(this.Lm)),128),Math.max(Fi.Ar(Math.ceil(this.km)),64)),this.ZI(),this.QI(),this.nI.Yf())}aI(t,s){this.U_||(this.U_=Fi.Go(16,16));let i=!1;this.X_===t&&this.K_===s||(this.X_=t,this.K_=s,this.U_.width=t,this.U_.height=s,i=!0),this.z_||(this.z_=this.U_.getContext("2d"),i=!0),i?(this.z_.textBaseline=this.__?"alphabetic":"top",this.z_.direction=this.O_,this.z_.font=this.Y_,this.z_.fillStyle=this.Q_,this.z_.strokeStyle=this.Q_,this.z_.globalAlpha=this.tI,this.z_.lineWidth=this.sI):this.z_.clearRect(0,0,t,s)}tC(){this.J_||(this.J_=Fi.Go(16,16).getContext("2d"),this.q_=Fi.Go(16,16).getContext("2d"),this.J_.textBaseline=this.__?"alphabetic":"top",this.q_.textBaseline="top",this.J_.direction=this.O_,this.q_.direction=this.O_)}sC(t){this.Z_!==t&&(this.Z_=t,this.J_.font=t,this.q_.font=t)}iC(){if(!s){s=!0,this.tC();const t=this.J_.measureText("test");i="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return i}VI(){this.eC(),this.hC()}eC(){this.L_&&(this.tC(),!this.__||this.A_&&this.A_.toString()===this.Xc||(this.A_=new Fi.Ch(this.Xc,{Mp:!0})),this.F_.Hp(this.__?this.A_.Fp():this.Xc,this.iI,this.j_,this.D_,0),this.L_=!1)}hC(){this.k_&&(this.rC(),this.k_=!1)}eI(t){let s=t.im()?t.xm().join(""):" ",i=(this.sC(this.II(!0,t)),t.Ym("size")),e=(i?parseFloat(i.Op):this.b_)*this.v_,h=this.J_.measureText(s),r=0;if(this.__&&this.iC()){const n=this.q_.measureText(s);r=h.fontBoundingBoxAscent-n.fontBoundingBoxAscent}return{width:h.width,height:4/3*e,fontBoundingBoxAscent:h.fontBoundingBoxAscent||0,fontBoundingBoxDescent:h.fontBoundingBoxDescent||0,tm:r}}nC(t){this.Y_!==t&&(this.Y_=t,this.z_.font=t)}oC(t){this.Q_!==t&&(this.Q_=t,this.z_.fillStyle=t,this.z_.strokeStyle=t)}aC(t){this.tI!==t&&(this.tI=t,this.z_.globalAlpha=t)}uC(t){this.sI!==t&&(this.sI=t,this.z_.lineWidth=t)}rC(){let e=this.CI(),h=(4+this.M_)*e,r=0,n=this.F_.zp();if(0!==n.length){for(const s of n){s.zm(NaN),s.qm(NaN);for(const o of s.pm())o.zm(NaN),o.qm(NaN)}let t=this.__&&this.iC(),i=n[0].om()*e;if("center"===this.P_){const a=n.reduce((t,s)=>t+s.om()*e+h,0)-h;r=Math.max(this.km/2-a/2,0),t&&(i=n[0].lm()*e)}else if("bottom"===this.P_){const u=n.reduce((t,s)=>t+s.om()*e+h,0)-this.M_*e,l=t?n.at(-1).um()*e:0;r=this.km-u-l-2}for(let t=0,s=n.length;t<s;++t){const c=n[t],f=c.om()*e,d=r;if(this.__){if(r+=0===t?i:f,0<t&&r>this.km-4*e)break}else if(0<t&&r>=this.km-f)break;0<=d&&this.lC(c,r,e),this.__||(r+=f),r+=h}}}lC(t,s,i){let e=0;"center"===this.R_?e=Math.floor((this.Lm-t.Xp()*i)/2):"right"===this.R_&&(e=this.Lm-t.Xp()*i),t.zm(e),t.qm(s);for(const h of"ltr"===this.O_?t.pm():t.Vm())this.cC(h,e,s,i),e+=h.Xp()*i}cC(t,s,i,e){const h=t.Ym("offsetx"),r=(s+=h?o(h.Op,t.om())*e:0,t.Ym("offsety"));if(i+=r?o(r.Op,t.om())*e:0,t.rm()){const n=t.Ym("iconoffsety");i+=n?o(n.Op,t.om())*e:.2*t.om()*e}t.zm(s),t.qm(i)}ZI(){this.z_.imageSmoothingEnabled=this.I_,this.z_.imageSmoothingQuality="high",this.W_=0;const t=this.CI(),s=this.F_.zp();for(const i of s)this.fC(i,t)}fC(t,s){const i=t.Jm(),e=t.$m();if(Number.isFinite(i)&&Number.isFinite(e))for(const h of"ltr"===this.O_?t.pm():t.Vm())this.dC(h,s,t.om())}dC(n,o,a){const u=this.z_,l=n.Jm(),c=n.$m();if(Number.isFinite(l)&&Number.isFinite(c)){let t=a/16,s=n.Xp()*o,i=n.om()*o,e=n.om()/16,h=(4+this.M_)*o,r=n.im()?n.xm():null;if(-1!==this.B_){if(this.W_>=this.B_)return;n.im()&&this.W_+r.length>this.B_&&(r=r.slice(0,this.B_-this.W_),s=this.eI(n).width*o),this.W_+=n.gm()}const f=n.Ym("background"),d=n.Zm("u"),p=n.Zm("s");if((!n.im()||!Fi.Fd(r)||f||d||p)&&!n.Zm("hide")){const m=n.Ym("color"),g=n.Ym("opacity"),y=(this.aC(g?parseFloat(g.Op)/100:1),f&&(this.oC(f.Op),u.fillRect(l,c-i,s,i+h)),n.Ym("linethickness")),w=y?parseFloat(y.Op):1,S=n.Zm("stroke");if(S&&this.uC(.5*e*w*this.CI()),n.im()){const b=r.join("");if(this.nC(this.II(!1,n)),!S){this.uC(.5*e*w*this.CI());const v=n.Ym("outlineback");v&&(this.oC(v.Op),this.pC(!0,b,l,c,s))}if(this.oC(m?m.Op:this.T_),this.pC(S,b,l,c,s),!S){this.uC(.5*e*w*this.CI());const M=n.Ym("outline");M&&(this.oC(M.Op),this.pC(!0,b,l,c,s))}}else if(n.rm()&&0<n.Xp()){const G=n.ng(this.Up);G&&u.drawImage(G,l,c-i,s,i)}if(this.oC(m?m.Op:this.T_),d&&I(u,S,l,c+o*t,s,o*t*w),p){const x=c-i/4,T=o*e,_=x+T/2;u.fillRect(l,_-T*w/2,s,T*w)}}}}pC(t,s,i,e,h){"rtl"===this.O_&&(i+=h),t?"Gecko"===Fi.ri.fi?this.z_.strokeText(s,i,e,h):this.z_.strokeText(s,i,e):"Gecko"===Fi.ri.fi?this.z_.fillText(s,i,e,h):this.z_.fillText(s,i,e)}QI(){this.lb.mC()||(this.l2||(this.l2=this.lb.cM(this.U_.width,this.U_.height,{n2:!0,o2:"high"})),this.lb.gC(this.U_,this.l2),this.hI.set(0,0,this.Lm/this.l2.Xp(),this.km/this.l2.om()),this.uI&&this.uI())}yC(){return this.hI}oI(){this.l2&&(this.lb.mC()||this.lb.mM(this.l2),this.l2=null)}static zb(){for(const t of ji)t.oI()}static wC(){return ji.values()}}}{const Hi=self.Os;class Vi{constructor(t){this.HM=t.G2(),this.SC=t.T2(),this.bC=t.vC(),this.MC=null,this.Kf=!1,this.GC=!1,this.xC=0,1===this.SC?this.MC=this.bC.createQueryEXT():this.MC=this.HM.createQuery()}er(){this.TC(),this.HM=null,this.bC=null,this.GC=!1}TC(){this.MC&&(1===this.SC?this.bC.deleteQueryEXT(this.MC):this.HM.deleteQuery(this.MC),this.MC=null)}zT(){if(this.Kf)throw new Error("query already active");1===this.SC?this.bC.beginQueryEXT(this.bC.TIME_ELAPSED_EXT,this.MC):this.HM.beginQuery(this.bC.TIME_ELAPSED_EXT,this.MC),this.Kf=!0}$T(){if(!this.Kf)throw new Error("query not active");1===this.SC?this.bC.endQueryEXT(this.bC.TIME_ELAPSED_EXT):this.HM.endQuery(this.bC.TIME_ELAPSED_EXT),this.Kf=!1}_C(){if(this.MC&&!this.GC&&!this.Kf){let t;t=1===this.SC?this.bC.getQueryObjectEXT(this.MC,this.bC.QUERY_RESULT_AVAILABLE_EXT):this.HM.getQueryParameter(this.MC,this.HM.QUERY_RESULT_AVAILABLE);const s=this.HM.getParameter(this.bC.GPU_DISJOINT_EXT);t&&!s&&(1===this.SC?this.xC=this.bC.getQueryObjectEXT(this.MC,this.bC.QUERY_RESULT_EXT):this.xC=this.HM.getQueryParameter(this.MC,this.HM.QUERY_RESULT),this.xC/=1e9,this.GC=!0),(t||s)&&this.TC()}}IC(){return this.GC}CC(){if(this.GC)return this.xC;throw new Error("no result available")}}Hi.Vg.EC=class{constructor(t){this.lb=t,this.qy=t.KS(),this.Kf=!1,this.RC=null,this.PC=!1,this.AC=null,this.FC=[]}er(){for(const t of this.FC)t instanceof Vi&&t.er();Hi.Pn(this.FC),this.RC=null,this.AC=null,this.lb=null}zT(){if(this.Kf)throw new Error("query already active");const t=this.lb.DC();0<t.length?(this.PC=!0,this.RC=t.at(-1),this.RC.OC(),this.RC.FC.push(this)):(this.PC=!1,this.RC=null),this.Kf=!0,t.push(this),this.LC()}$T(){if(!this.Kf)throw new Error("query not active");const t=this.lb.DC().pop();if(t!==this)throw new Error("can only end most nested query");this.Kf=!1,this.OC(),this.RC&&(this.RC.LC(),this.RC=null)}LC(){this.AC=Hi.ir(Vi,this.lb),this.FC.push(this.AC),this.AC.zT()}OC(){this.AC.$T(),this.AC=null}_C(){for(const t of this.FC)t._C()}kC(){return this.PC}IC(){return this.FC.every(t=>t.IC())}CC(){return this.FC.reduce((t,s)=>t+s.CC(),0)}KS(){return this.qy}}}{const Ui=self.Os;Ui.Vg.NC=class{constructor(t,s=1e3){this.lb=t,this.BC=s,this.WC=[],this.lb.jC(this)}er(){this.Vl(),this.lb.HC(this),this.lb=null}Vl(){for(const t of this.WC)t.er();Ui.Pn(this.WC)}VC(){const t=new Ui.Vg.EC(this.lb);if(this.WC.push(t),this.WC.length>this.BC){const s=this.WC.shift();s.er()}return t}UC(t){for(const s of this.WC){if(s.KS()>=t)return;if(s.kC())return;s._C()}}zC(t,s){if(s<=t)return NaN;let i=0;for(const e of this.WC){if(e.KS()>=s)break;if(!(e.KS()<t)){if(!e.IC())return NaN;i+=e.CC()}}return i}JC(i){for(let t=0,s=this.WC.length;t<s;++t){const e=this.WC[t];if(!(e.KS()<i))return void(0<t&&this.WC.splice(0,t));e.er()}}}}{let i=function(){h=-1;for(const t of e)t.qC()&&(t.resolve(),e.delete(t));0<e.size&&(h=self.requestAnimationFrame(i))},b=(i,self.Os),t=self.ws,v=(t._s,t.Is),y=t.Ms,r={powerPreference:"default",$C:!0,alpha:!1,depth:!1,XC:!1,KC:2,failIfMajorPerformanceCaveat:!1},n=new Set(["default","low-power","high-performance"]),c=new b.Hu(0,0,1,0,1,1,0,1),w=y.create(),S=y.create(),M=new b.Hu,G=new b.Rect,x=null,e=(b.isDebug&&(self.YC=function(){x?x.loseContext():console.warn("WEBGL_lose_context not supported")},self.ZC=function(){x?x.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),h=-1;b.Vg.QC=class extends b.Vg.oy{constructor(t,s){if(super(s),s=Object.assign({},r,s),!n.has(s.powerPreference))throw new Error("invalid power preference");let i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat},e=null,h=0;if(2<=s.KC&&(e=t.getContext("webgl2",i),h=2),e||(e=t.getContext("webgl",i),h=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.HM=e,this.tE=e.getContextAttributes(),this.sE=e.getParameter(e.VERSION),this.SC=h,this.iE=v.create(),this.eE=!1,this.hE=y.create(),this.rE=!!s.depth,this.nE=!(!s.depth||!s.XC),this.oE=this.rE,this.aE=!1,this.uE=null,this.lE=!0,this.cE=0,this.fE=0,this.zM=null,this.JM=null,this.dE=null,this.qM=null,this.pE=new Float32Array(8e3*this.qS()),this.mE=new Uint16Array(12e3),this.gE=new Float32Array(16e3),this.yE=new Float32Array(32e3),this.wE=0,this.SE=0,this.bE=0,this.vE=0,this.ME=null,this.GE=null,this.xE=[],this.TE=0,this._E=0,this.IE=null,this.CE=0,this.Qx=b.ir(b.Vg.$x,this),this.EE=b.ir(b.Oo,1,1,1,1),this.RE=null,this.LT=null,this.PE=0,this.AE=0,this.FE=new b.Rect,this.DE=b.ir(b.Rect,0,0,-1,-1),this.OE=0,this.LE=-1,this.kE=0,this.NE=0,this.BE=0,this.WE="(unavailable)",this.jE="(unavailable)",this.HE=[],this.VE=!1,this.UE=null,this.zE=null,this.JE=null,this.qE=null,this.$E=null,this.XE=null,this.KE=0,this.YE=!!s.$C,this.bC=null,this.ZE=new Set,this.QE=[],this.Ky(this.mE)}ib(){return!0}async Qy(){super.Qy();const t=this.HM,s=this.qS(),i=(this.EE.Wo(1,1,1,1),this.RE=null,this.LT=null,this.wE=0,this.bE=0,this.vE=8e3*s-4*s,b.Pn(this.xE),this.TE=0,this._E=0,this.ME=null,this.IE=null,this.FE.set(0,0,1,1),this.CE=0,this.Qx),e=(i.BG=null,i.yM=null,i.wM=null,v.set(i.Kx,1,1,1,1),i.clearColor.Wo(0,0,0,0),i.Yx.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.PE=t.ONE,this.AE=t.ONE_MINUS_SRC_ALPHA,this.tR(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.rE?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.oE=this.rE,this.aE=!1,this.qM=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.qM),t.bufferData(t.ARRAY_BUFFER,this.yE.byteLength,t.DYNAMIC_DRAW),this.zM=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.zM),t.bufferData(t.ARRAY_BUFFER,this.pE.byteLength,t.DYNAMIC_DRAW),this.JM=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.JM),t.bufferData(t.ARRAY_BUFFER,this.gE.byteLength,t.DYNAMIC_DRAW),this.dE=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.dE),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.mE,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.LE=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),h=(this.kE=e[0],this.NE=e[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),n=(this.BE=h&&r?Math.min(h.precision,r.precision):0,2048<this.NE&&(this.NE=2048),this.HE=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(n&&(this.WE=t.getParameter(n.UNMASKED_VENDOR_WEBGL),this.jE=t.getParameter(n.UNMASKED_RENDERER_WEBGL)),this.UE=t.getExtension("KHR_parallel_shader_compile"),b.isDebug&&(x=t.getExtension("WEBGL_lose_context")),this.YE&&(1===this.T2()?this.bC=t.getExtension("EXT_disjoint_timer_query"):this.bC=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.zE=t.getExtension("EXT_texture_filter_anisotropic"),this.zE?this.KE=t.getParameter(this.zE.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.KE=0,this.T2()<2&&this.rE&&this.nE&&(this.JE=t.getExtension("WEBGL_depth_texture"),!this.JE))throw new Error("no depth texture support");this.T2()<2&&(this.qE=t.getExtension("EXT_frag_depth"),this.$E=t.getExtension("OES_standard_derivatives"),this.XE=t.getExtension("EXT_shader_texture_lod"));let o=b.Vg.LM,a=o.gx(!1),u=o.wx(),l=a,c=o.Ix(),f=o.Tx(),d=o.vx(),p=o.gx(!0),m=!1;this.rE&&(this.T2()<2?this.qE&&(u=o.Sx(),c=o.Cx(),d=o.Mx(),m=!0):(l=o.yx(),u=o.bx(),c=o.Ex(),f=o._x(),d=o.Gx(),p=o.yx(!0)));const g=o.xx(this.T2(),m,this.$E&&this.XE),y=2<=this.T2()?o.yx():a,w=[[u,l,"<default>"],[u,l,"<default-device-transform>"],[c,f,"<point>"],[o.Rx(),a,"<fill>"],[o.Px(),a,"<lineargradient>"],[o.Ax(),a,"<penumbra>"],[o.Dx(),a,"<hardellipse>"],[o.Ox(),a,"<hardellipseoutline>"],[o.Lx(),a,"<smoothellipse>"],[o.kx(),a,"<smoothellipseoutline>"],[o.Fx(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],S=await Promise.all(w.map(t=>this.sR({src:t[0],NM:t[1],name:t[2]})));this.Gy=S[0],this.GE=S[1],this.xy=S[2],this.Iy=S[3],this.Cy=S[4],this.Ey=S[5],this.Ry=S[6],this.Py=S[7],this.Ay=S[8],this.Fy=S[9],this.Dy=S[10],this.Ty=S[11],this._y=S[12],this.Cw()}async sR(t){const s=await b.Vg.LM.jM(this,t);return this.xw(s),s}iR(){this.ME=null}WI(t,s,i){if(this.Lm!==t||this.km!==s||i){this.XS();const e=this.HM,h=this.Qx;this.Lm=t,this.km=s,this.eR(0,0,t,s),this.ww(this.hE,t/s),this.hR(this.hE),this.GE&&(e.useProgram(this.GE.jG()),this.GE.DG(this.gy),this.ME=this.GE,this.Qx.BG=this.GE),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.RE=null,this.LT=null,this.rE&&this.lE&&this.rR(this.Lm,this.km),this.IE&&this.IE.pM(this.Lm,this.km),e.bindFramebuffer(e.FRAMEBUFFER,null),this.IE=null,h.yM=null,h.wM=null}}rR(t,s){const i=this.HM;this.uE&&this.cE===t&&this.fE===s||(this.nE?(this.uE&&i.deleteTexture(this.uE),this.uE=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.uE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),2<=this.T2()?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.JE&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.JE.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.uE&&i.deleteRenderbuffer(this.uE),this.uE=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.uE),i.renderbufferStorage(i.RENDERBUFFER,2<=this.SC?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.cE=t,this.fE=s)}nR(t,s){this.rE&&(this.lE=!1,this.rR(t,s))}oR(){this.rE&&(this.lE=!0,this.rR(this.Lm,this.km))}eR(t,s,i,e){const h=this.iE;if(h[0]!==t||h[1]!==s||h[2]!==i||h[3]!==e){const r=this.aR();r.yT(t,s,i,e),v.set(h,t,s,i,e),this._E=0}}dw(t){super.dw(t),this.ww(this.hE,this.Lm/this.km)}aw(t){super.aw(t),this.ww(this.hE,this.Lm/this.km)}lw(t){super.lw(t),this.ww(this.hE,this.Lm/this.km)}hR(t){if(!y.W(this.gy,t)){const s=this.aR();s.ST(t),y._(this.gy,t),this._E=0,this.eE=!0}}uR(){let t,s,i,e=this.IE;i=(null===e?(t=this.hE,s=this.Xp(),this):(t=e.MM(),s=e.Xp(),e)).om(),this.hR(t),this.eR(0,0,s,i)}lR(t){if(!y.W(this.yy,t)){const s=this.aR();s.vT(t),y._(this.yy,t),this._E=0,this.eE=!0}}cR(){this.eE=!1}fR(){return this.eE}gM(){return this.Qx}aR(){const t=this.xE;return this.TE===t.length&&t.push(new b.Vg.Zx(this.Qx)),t[this.TE++]}XS(){0===this.TE||this.mC()||(this.dR(),this.pR(),this.TE=0,this.wE=0,this.SE=0,this.bE=0,this._E=0)}dR(){const t=this.HM;0<this.bE&&(t.bindBuffer(t.ARRAY_BUFFER,this.qM),t.bufferSubData(t.ARRAY_BUFFER,0,this.yE.subarray(0,this.bE))),0<this.wE&&(t.bindBuffer(t.ARRAY_BUFFER,this.zM),t.bufferSubData(t.ARRAY_BUFFER,0,this.pE.subarray(0,this.wE)),t.bindBuffer(t.ARRAY_BUFFER,this.JM),t.bufferSubData(t.ARRAY_BUFFER,0,this.gE.subarray(0,this.SE)))}pR(){const i=this.xE;for(let t=0,s=this.TE;t<s;++t)i[t].m_()}mR(){return this.EE.Zo()}gR(t,s,i,e){const h=this.EE;if(!h.na(t,s,i,e)){h.Wo(t,s,i,e);const r=this.aR();r.cT(h),this._E=0,this.Ly=null}}yR(t){const s=this.EE;if(s.Zo()!==t){s.qo(t);const i=this.aR();i.cT(s),this._E=0,this.Ly=null}}Ub(t){const s=this.EE;if(!s.equals(t)){s.set(t);const i=this.aR();i.cT(s),this._E=0,this.Ly=null}}wR(){this.gR(1,1,1,1)}SR(){return this.EE}bR(t){if(t!==this.RE){const s=this.aR();s.uT(t),this.RE=t,this._E=0}}E2(){this.RE=null}Vb(t){const s=this.sS(t);this.vR(s[0],s[1])}MR(t){const s=this.hS(t);this.vR(s.Qw,s.tS)}vR(t,s){if(t!==this.PE||s!==this.AE){const i=this.aR();i.mT(t,s),this.PE=t,this.AE=s,this._E=0,this.Ly=null}}GR(){return this.PE===this.HM.ONE&&this.AE===this.HM.ONE_MINUS_SRC_ALPHA}xR(){this.vR(this.HM.ONE,this.HM.ONE_MINUS_SRC_ALPHA)}TR(){this.vR(this.HM.SRC_ALPHA,this.HM.ONE_MINUS_SRC_ALPHA)}_R(){this.vR(this.HM.ONE,this.HM.ZERO)}Rect(t){this.IR(t.fu(),t.du(),t.pu(),t.mu())}IR(t,s,i,e){this.JS(t,s,i,s,i,e,t,e)}CR(){let t=this.wE;if(t>=this.vE&&(this.XS(),t=0),1===this._E)this.xE[this.TE-1].sT+=6;else{const s=this.aR();s.oT(t,6),this._E=1}}ER(t){t.al(this.pE,this.wE,this.By+this.Wy),this.wE+=12}Hu(t){this.CR(),this.ER(t),c.ta(this.gE,this.SE),this.SE+=8}JS(t,s,i,e,h,r,n,o){this.CR();let a=this.pE,u=this.wE,l=this.By+this.Wy;a[u++]=t,a[u++]=s,a[u++]=l,a[u++]=i,a[u++]=e,a[u++]=l,a[u++]=h,a[u++]=r,a[u++]=l,a[u++]=n,a[u++]=o,a[u++]=l,this.wE=u,c.ta(this.gE,this.SE),this.SE+=8}SS(t,s){this.CR(),this.ER(t),s.wu(this.gE,this.SE),this.SE+=8}RR(t,s){this.CR(),this.ER(t),s.ta(this.gE,this.SE),this.SE+=8}PR(t,s,i,e,h,r,n,o,a,u,l,c,f){this.CR();let d=this.pE,p=this.wE,m=this.By+this.Wy;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+r,d[p++]=n,d[p++]=o,d[p++]=m+a,d[p++]=u,d[p++]=l,d[p++]=m+c,this.wE=p,f.wu(this.gE,this.SE),this.SE+=8}pS(t,s,i,e,h,r,n,o,a,u,l,c,f){this.CR();let d=this.pE,p=this.wE,m=this.By+this.Wy;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+r,d[p++]=n,d[p++]=o,d[p++]=m+a,d[p++]=u,d[p++]=l,d[p++]=m+c,this.wE=p,f.ta(this.gE,this.SE),this.SE+=8}AR(e,h,r){const n=this.pE,o=this.gE;if(r.length%3!=0)throw new Error("invalid index buffer length");for(let i=0,t=r.length;i<t;){const a=r[i++],u=r[i++],l=r[i++],c=3*a,f=3*u,d=3*l,p=2*a,m=2*u,g=2*l;this.CR();let t=this.wE,s=this.SE;n[t++]=e[0+c],n[t++]=e[1+c],n[t++]=e[2+c],n[t++]=e[0+f],n[t++]=e[1+f],n[t++]=e[2+f],n[t++]=e[0+d],n[t++]=e[1+d],n[t++]=e[2+d],n[t++]=e[0+d],n[t++]=e[1+d],n[t++]=e[2+d],o[s++]=h[0+p],o[s++]=h[1+p],o[s++]=h[0+m],o[s++]=h[1+m],o[s++]=h[0+g],o[s++]=h[1+g],o[s++]=h[0+g],o[s++]=h[1+g],this.wE=t,this.SE=s}}FR(t,s){this.aS(0),y._(w,this.gy),y._(S,this.yy),this.uR();const[i,e]=this.DR(this.IE),h=this.Gw(0,0,this.ew(e),0,0,0,e);if(this.lR(h),"crop"===t&&this.IE&&s){const r=this.Lm/2,n=this.km/2,o=s.Xp(),a=s.om(),u=this.IE.Xp(),l=this.IE.om(),c=Math.min(u,o),f=Math.min(l,a),d=Math.max(a-l,0),p=Math.max(l-a,0);G.set(-r,n-p,-r+c,n-f-p),M.ul(G),G.set(0,d,c,f+d),G._t(o,a),this.SS(M,G)}else{const m=i/2,g=e/2;this.IR(-m,g,m,-g)}this.hR(w),this.lR(S)}OR(t){if(!this.FE.equals(t)){this.FE._(t);const s=this.aR();s.CT(t),this._E=0}}LR(){}kR(t,s,i,e){7996<=this.bE&&this.XS();let h=this.bE,r=this.By+this.Wy;if(2===this._E&&this.CE===r)this.xE[this.TE-1].sT++;else{const o=this.aR();o.RT(h,r),this._E=2,this.CE=r}const n=this.yE;n[h++]=t,n[h++]=s,n[h++]=i,n[h++]=e,this.bE=h}Ew(t){if(this.ME!==t){const s=this.aR();s.AT(t),this.ME=t,this._E=0,this.Ly=null}}NR(){return this.ME}BR(){this.Ew(this.GE)}WR(t){const s=this.aR();s.dT(t),this._E=0}jR(t,s,i=1){const e=this.aR();e.XT(t,s,i),this._E=0}HR(t,s,i,e,h,r,n){if(this.ME!==this.Ty)throw new Error("must set tilemap fill mode first");const o=this.aR();o.YT(t,s,i,e,h,r,n),this._E=0}VR(t,s,i,e,h,r,n){if(this.ME!==this._y)throw new Error("must set tile randomization mode first");const o=this.aR();o.QT(t,s,i,e,h,r,n),this._E=0}UR(t,s,i,e,h,r,n,o,a,u,l){const c=this.ME;if(l%=10800,c.GG&&!c.XG(s,i,e,h,r,n,o,a,u,l)){const f=this.aR(),d=(f.DT(),c.ZG(s,i,e,h,r,n,o,a,u,l),f.eT),p=(d[0]=r,d[1]=n,s.ta(d,2),d[6]=a,d[7]=u,i.ta(d,12),f.hT),m=(h.ta(p,0),p[1]);p[1]=p[3],p[3]=m,e.ta(f.rT,0),f.tT=l,f.sT=o,c.nG.xG()?f.iT=t?t.vM():null:f.iT=null,this._E=0}}zR(t){const s=this.ME;if(0!==t.length&&!s.zG(t)){const i=this.aR();i.kT(),s.qG(t),b.On(i.nT,t),this._E=0}}JR(t,s,i,e){const h=this.aR();h._T(t,s,i,e),this._E=0}Vl(t){const s=this.aR();s.TT(t),this._E=0}qR(){}$S(){super.$S(),this.HM.flush()}$R(){if(this.rE&&this.IE&&this.IE._M()){const t=this.aR();t.s_(this.oE),this._E=0}}KR(t){if(this.oE!==(t=!!t)&&this.rE){this.oE=t;const s=this.aR();s.e_(t),this._E=0}}YR(){return this.oE}fM(){return this.uE}dM(){return this.nE}ZR(t){if(t=!!t,this.nE&&this.aE!==t){if(t&&this.YR())throw new Error("depth still enabled");this.aE=t;const s=this.aR();s.r_(t),this._E=0}}QR(t,s,i,e,h=0){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),!this.DE.cu(t,s,i,e)){this.DE.hu(t,s,i,e);const r=h||this.DR(this.tP())[1],n=(s=r-s-e,this.aR());n.d_(!0,t,s,i,e),this._E=0}}sP(){if(-1!==this.DE.pu()){this.DE.set(0,0,-1,-1);const t=this.aR();t.d_(!1,0,0,0,0),this._E=0}}iP(){for(const t of this.ZE)t.UC(this.qy)}mC(){return!this.HM||this.HM.isContextLost()||this.VE}zb(){super.iw(),b.Vg.u2.zb(),b.Vg.K2.zb(),b.Vg.ab.zb();for(const t of this.ZE)t.Vl();this.HE=[],this.bC=null,this.UE=null,this.zE=null,this.JE=null,this.qE=null,this.$E=null,this.XE=null,this.KE=0,this.WE="(unavailable)",this.jE="(unavailable)",this.ME=null,this.GE=null,this.uE=null;for(const s of this.Oy.values())s.zb()}async Jb(){this.VE=!0,await this.Qy(),this.VE=!1;for(const t of this.Oy.values())t.Jb(this);this.WI(this.Lm,this.km,!0)}eP(t,s){if(this.mC())throw new Error("context lost");this.XS();const i=b.ir(b.Vg.u2,this);return i.v2(t,s),i}async hP(e,h){if(this.mC())throw new Error("context lost");if(h=Object.assign({},h),b.ki.ImageBitmapOptions){let t=await createImageBitmap(e,{premultiplyAlpha:"premultiply"}),s=h.t2&&"clamp-to-edge"!==h.t2||h.s2&&"clamp-to-edge"!==h.s2,i=b.Pr(t.width)&&b.Pr(t.height);return this._2()||i||!s?h.premultiplyAlpha=!1:b.ki.ji?(t=await createImageBitmap(e,{premultiplyAlpha:"premultiply",resizeWidth:b.Ar(t.width),resizeHeight:b.Ar(t.height)}),h.premultiplyAlpha=!1):t=await createImageBitmap(e,{premultiplyAlpha:"none"}),b.Tf(()=>this.eP(t,h))}if(e instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await b.Mo(e);e=t}return b.Tf(()=>this.eP(e,h))}cM(t,s,i){this.XS();const e=b.ir(b.Vg.u2,this);return e.R2(t,s,i),e}gC(t,s,i){this.XS(),s.O2(t,i)}mM(t){t&&(t.j2(),0<t.H2()||(this.XS(),t===this.RE&&(this.HM.bindTexture(this.HM.TEXTURE_2D,null),this.RE=null),t===this.LT&&(this.HM.activeTexture(this.HM.TEXTURE1),this.HM.bindTexture(this.HM.TEXTURE_2D,null),this.HM.activeTexture(this.HM.TEXTURE0),this.LT=null),t.L2()))}rP(t){let s=this.Lm,i=this.km,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height)&&(i=Math.floor(t.height),e=!1),s<=0||i<=0)throw new Error("invalid size");this.XS();const h=b.ir(b.Vg.K2,this);return h.uM(s,i,Object.assign({q2:e},t)),this.IE=null,this.Qx.yM=null,this.Qx.wM=null,h}nP(t,s=!0){if(t!==this.IE){t&&t.IM()&&t.pM(this.Lm,this.km);const i=this.aR();i.GT(t),this.IE=t,this._E=0,s&&this.uR()}}tP(){return this.IE}DR(t){return t?[t.Xp(),t.om()]:[this.Lm,this.km]}oP(t,s="stretch"){if(this.SC<2||this.IE&&0<this.IE.CM())this._R(),this.wR(),this.aP(t,s);else{const i=this.aR();i.jT(t,this.IE,s),this._E=0}}aP(t,s="stretch"){const i=t.vM();if(!i)throw new Error("not a texture-backed render target");this.bR(i),this.FR(s,i)}uP(t){if(!(this.SC<2)){const s=this.aR();s.BT(t.SM()),this._E=0}}lP(t){this.nP(null),this.XS();const s=t.vM();s===this.RE&&(this.HM.bindTexture(this.HM.TEXTURE_2D,null),this.RE=null),s===this.LT&&(this.HM.activeTexture(this.HM.TEXTURE1),this.HM.bindTexture(this.HM.TEXTURE_2D,null),this.HM.activeTexture(this.HM.TEXTURE0),this.LT=null),t.L2()}async FM(t,s,i){this.XS();let e=this.IE,h,r,n,o=(n=t?(h=t.Xp(),r=t.om(),t.SM()):(h=this.Xp(),r=this.om(),null),0),a=0,u=h,l=r;if(i){o=b.lr(Math.floor(i.fu()),0,h-1),a=b.lr(Math.floor(i.du()),0,r-1);let t=i.width(),s=(t=0===t?h-o:b.lr(Math.floor(t),0,h-o),i.height());s=0===s?r-a:b.lr(Math.floor(s),0,r-a),u=t,l=s,a=r-(a+l)}let c=this.HM,f=(c.bindFramebuffer(c.FRAMEBUFFER,n),()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.IE=null,this.Qx.yM=null,this.Qx.wM=null,this.nP(e)}),d;if(!s&&2<=this.T2()){c.bindFramebuffer(c.READ_FRAMEBUFFER,n);const p=c.createBuffer(),m=u*l*4,g=c.PIXEL_PACK_BUFFER,y=(c.bindBuffer(g,p),c.bufferData(g,m,c.STREAM_READ),c.readPixels(o,a,u,l,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(g,null),f(),c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0));await this.WM(()=>c.getSyncParameter(y,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(y),d=new ImageData(u,l),c.bindBuffer(g,p),c.getBufferSubData(g,0,new Uint8Array(d.data.buffer),0,m),c.bindBuffer(g,null),c.deleteBuffer(p)}else d=new ImageData(u,l),c.readPixels(o,a,u,l,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}cP(){this.KR(!0);const t=this.aR();t.o_(),this._E=0,this.OE=1}fP(){this.KR(!1);const t=this.aR();t.u_(),this._E=0,this.OE=2}dP(){return 2===this.OE}pP(){this.KR(!0);const t=this.aR();t.c_(),this._E=0,this.OE=0}mP(t){if(this.gP()){const s=this.aR();s.VT(t),this._E=0}}yP(t){if(this.gP()){const s=this.aR();s.JT(t),this._E=0}}WM(s){const t=new Promise(t=>e.add({resolve:t,qC:s}));return-1===h&&(h=self.requestAnimationFrame(i)),t}eb(){return this.Lm*this.km*(this.tE.alpha?4:3)}hb(){let t=0;for(const s of b.Vg.K2.DM())s.vM()||(t+=s.U2());return t}rb(){let t=0;for(const s of b.Vg.u2.z2())t+=s.U2();return t}wP(){return this.sE}T2(){return this.SC}SP(){return"webgl"+this.T2()}_2(){return 2<=this.T2()}M2(){return this.LE}bP(){return this.kE}vP(){return this.NE}MP(){return 0!==this.BE}GP(){return this.BE}xP(){return this.WE}TP(){return this.jE}_P(){if(2<=this.T2())return"webgl2";{const t=[];return this.qE&&t.push("EXT_frag_depth"),this.$E&&t.push("OES_standard_derivatives"),this.XE&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}IP(){return this.HE}gP(){return!!this.bC}vC(){return this.bC}BM(){return this.UE}F2(){return this.zE}D2(){return this.KE}jC(t){this.ZE.add(t)}HC(t){this.ZE.delete(t)}DC(){return this.QE}G2(){return this.HM}tR(t){this.Zw([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}CP(){return this.ob()}}}{const zi=self.Os,Ji={EP:null,RP:null,PP:null,getTime:null,AP:null};zi.Vg.FP=class{constructor(t){t=Object.assign({},Ji,t),this.DP=t.EP,this.OP=t.RP,this.LP=t.PP,this.kP=t.getTime,this.NP=t.AP,this.BP=null,this.WP=new Set}jP(t){this.WP.add(t)}HP(t){this.WP.delete(t)}zb(){this.BP=null;for(const t of this.WP)t.zb()}VP(t){return this.DP?this.DP(t):[t.Xp(),t.om()]}tP(t){return this.OP(t)}UP(t,s){this.LP(t,s)}zP(){return this.kP()}z1(t){this.NP(t)}JP(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.BP||this.BP.Xp()===s&&this.BP.om()===i||(t.mM(this.BP),this.BP=null),null===this.BP&&(this.BP=t.eP(null,{width:s,height:i,i2:"nearest",n2:!1})),this.BP}}}{const o=self.Os,qi=self.ws,Gh=qi.Ms,$i=o.ir(o.Rect),Xi=o.ir(o.Rect),Ki=o.ir(o.Rect),Yi=o.ir(o.Rect),Zi=Gh.create(),Qi=Gh.create(),te={qP:null,$P:null,XP:null,KP:!1},se={YP:null,ZP:!1,QP:!1,tA:!1,sA:!1,iA:!1,eA:!1};o.Vg.hA=class{constructor(t,s){s=Object.assign({},te,s),this.ed=t,this.rA=s.qP,this.nA=s.$P,this.oA=s.XP,this.aA=null,this.uA=[],this.lA=[],this.cA=[],this.fA=!1,this.Bb=0,this.dA=!1,this.pA=!1,this.mA=!1,this.gA=!1,this.yA=!1,this.wA=!1,this.eE=!1,this.SA=!1,this.bA=!1,this.vA=!1,this.MA=!1,this.GA=!1,this.xA=0,this.TA=[null,null,null],this._A=!!s.KP,this.IA=0,this.CA=0,this.EA=0,this.RA=0,this.PA=null,this.AA=null,this.FA=o.ir(o.Rect),this.DA=o.ir(o.Rect),this.OA=o.ir(o.Rect),this.LA=o.ir(o.Rect),this.kA=o.ir(o.Rect),this.NA=1,this.BA=1,this.WA=0,this.jA=0,this.HA=null,this.VA=null,this.UA=0,this.zA=0,this.JA=!1,this.rM=Gh.create(),this.qA=Gh.create(),this.ed.jP(this)}er(){this.ed.HP(this),o.Pn(this.cA),o.Pn(this.uA),o.Pn(this.lA),this.PA=null,this.AA=null,this.rA=null,this.nA=null,this.oA=null}zb(){this.fA=!0,o.Pn(this.cA),o.Pn(this.uA),o.Pn(this.lA)}$A(){return this.fA}XA(h,t){if(t=Object.assign({},se,t),o.Pn(this.cA),this.IA=0,this.CA=0,this.dA=!1,this.pA=!1,this.mA=!1,this.gA=!1,this.yA=!1,this.wA=!1,this.xA=0,this.GA=!!t.sA,this.MA=!!t.eA,this.fA=!1,o.On(this.uA,h),0!==h.length){if(t.YP){if(t.YP.length!==h.length)throw new Error("incorrect indexMap length");o.On(this.lA,t.YP)}else{o.Pn(this.lA);for(let t=0,s=h.length;t<s;++t)this.lA.push(t)}for(const s of h)this.IA+=s.Tb(),this.CA+=s._b(),s.Pb()&&(this.dA=!0),s.Fb()&&(this.pA=!0),s.Ab()&&(this.mA=!0),s.Ib()&&(this.gA=!0),s.Lb()&&(this.yA=!0);this.wA=this.KA(h[0].Gb());const r=this.YA(h[0],t),n=this.ZA(h.at(-1),t);if(1!==h.length||r||n){this.vA=!1;let e=0;r&&(this.xA=1,this.cA.push(o.ir(o.Vg.hA.t3.QA,this,-1,1)),e=1);for(let s=0,i=h.length;s<i;++s)if(0!==s||r){let t=1===e?2:1;s!==i-1||n||(t=0),this.xA=Math.max(this.xA,t),this.cA.push(o.ir(o.Vg.hA.t3.s3,this,e,t,s)),e=t}else this.xA=1,this.cA.push(o.ir(o.Vg.hA.t3.i3,this,-1,1,s)),e=1;n&&this.cA.push(o.ir(o.Vg.hA.t3.e3,this,e,0))}else this.vA=!0}}YA(t,s){return!!(s.ZP||t.Cb()||s.tA&&!t.Rb()||t.Fb()&&!this.MA||0!==this.IA||0!==this.CA)||(t.Gb().ib()?t.Ab()&&(s.iA||s.sA)||t.Db()&&s.sA:t.Ab()&&!this.wA&&s.iA)}ZA(t,s){return!!s.QP||(t.Gb().ib()?t.Ab()||t.Ib():(t.Ab()||t.Ib())&&this.h3())}KA(t){return t.Sw()&&this.mA&&!this.gA}r3(t,s,i){t.Sw()&&null===s&&(s=t.GetBackbufferRenderTarget()),this.HA=s,this.PA=i.n3||null,this.AA=i.contextObject||null,this.Bb=i.o3||0,this.NA=i.devicePixelRatio||1,this.BA=i.a3||1,this.WA=i.u3||0,this.jA="number"==typeof i.time?i.time:this.ed.zP(),this.eE=!1,t.cR(),this.dA&&this.l3();let e=!1;if(this.f3()&&(this.d3(t,i),e=!0,this.VA=this.ed.JP(t,this.EA,this.RA),$i._(this.DA),$i.Du(),t.Sw()&&t._MaybeDoPendingClearRenderPass(this.HA),t.CopyTextureToTexture(this.HA.vM(),this.VA,$i.fu(),$i.du(),$i.width(),$i.height())),this.vA)this.m3(t,i);else if(e||this.d3(t,i),0!==this.OA.width()||0!==this.OA.height()){t.xR(),t.wR(),t.nS(0),t.aS(0),this.aA=i.g3||null,this.UA=i.y3||0,this.zA=i.w3||0,this.JA=!!i.S3,this.b3(t),this.TA[0]=s,this.TA[1]=1<=this.xA?this.v3():null,this.TA[2]=2===this.xA?this.v3():null;for(const h of this.cA){const r=this.M3(h.G3()),n=this.M3(h.x3());t.Sw()?h.T3(t,r,n):h._3(t,r,n)}t.bR(null),this.TA[1]&&this.I3(this.TA[1]),this.TA[2]&&this.I3(this.TA[2]),this.TA.fill(null),this.C3(t),this.HA=null,this.VA=null,this.PA=null,this.AA=null,this.aA=null}}d3(t,s){const[i,e]=this.ed.VP(t);this.E3(t,i,e),this.R3(s)}E3(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.EA===s&&this.RA===i||this.P3(t,s,i,0,0,this.rM,this.qA),this.EA=s,this.RA=i}P3(t,s,i,e,h,r,n){const o=s/2+e,a=i/2+h,u=(t.ww(r,s/i),t.Gw(o,a,t.ew(i),o,a,0,i));Gh._(n,u)}R3(t){this.FA._(t.A3),t.F3?this.DA._(t.F3):this.DA.set(0,0,this.EA,this.RA),this.OA._(this.DA),this.OA._t(this.EA,this.RA);const s=this.BA*this.NA;this.DA.Tu(this.IA*s,this.CA*s),this.kA._(this.DA),this.kA._t(this.EA,this.RA),this.DA.Ou(0,0,this.EA,this.RA),this.LA._(this.DA),this.LA._t(this.EA,this.RA)}b3(t){if(this.SA=t.YR(),this.bA=t.dP(),this.MA)t.KR(!1),this.pA&&t.ZR(!0);else{if($i._(this.DA),t.ib()){const s=this.BA*this.NA;$i.Tu(Math.max(this.IA,1)*s,Math.max(this.CA,1)*s),$i.Du(),$i.lr(0,0,this.EA,this.RA)}else $i.Du();t.QR($i.fu(),$i.du(),$i.width(),$i.height(),this.RA)}}D3(t){t.wR(),this.MA||(this.bA&&t.pP(),t.KR(!1),this.pA&&t.ZR(!0)),t.Sw()&&t.SetNormalizedCoordsProgramVariant(!0)}C3(t){t.ZR(!1),this.bA&&t.fP(),t.KR(this.SA),this.MA||t.sP(),t.Sw()&&t.SetNormalizedCoordsProgramVariant(!1),this.eE=t.fR()}O3(){this.kA.lr(0,0,1,1)}M3(t){return t<0?null:this.TA[t]}v3(){return this.ed.tP(this)}L3(){return this.HA}I3(t){this.ed.UP(t,this)}N3(t){return this.uA[t]}B3(t){this.aA?this.aA(this,t,()=>this.rA(t,this)):this.rA(t,this),this.vA||this.D3(t)}W3(t){if(this.MA)return!0;if(0!==this.UA||0!==this.zA)return!1;const[s,i]=t.DR(t.tP());return s===this.EA&&i===this.RA}j3(t,s){let i=this.rM,e=this.qA;if(s&&!this.W3(t)){i=Zi,e=Qi;const[h,r]=t.DR(t.tP());this.P3(t,h,r,this.UA,this.zA,i,e),this.MA||t.sP()}t.hR(i),t.lR(e)}l3(){this.ed.z1(this)}H3(t,s){return this.oA(this.lA[t],s)}V3(t,s){let i=this.kA,e=this.LA,h=this.OA;t.ib()&&(Xi._(i),Xi.Cu(1),i=Xi,Ki._(e),Ki.Cu(1),e=Ki,Yi._(h),Yi.Cu(1),h=Yi),this.U3(t,s,e,h,i,1/this.EA,1/this.RA)}z3(t,s){let e=this.LA,h=this.OA,r=1/this.EA,n=1/this.RA;if(this.nA){let{J3:t,q3:s,X3:i}=this.nA(this.PA);t||($i.set(0,0,0,0),t=$i),s=s||this.EA,i=i||this.RA,e=t,h=t,r=1/s,n=1/i}else t.ib()&&(Ki._(e),Ki.Cu(1),e=Ki,Yi._(h),Yi.Cu(1),h=Yi);let i=this.kA;t.ib()&&((i=Xi)._(this.kA),i.Cu(1)),this.U3(t,s,e,h,i,r,n),t.Sw()&&this.yA&&t.SetProgramParameter_IsSrcTexRotated(this.GA)}K3(t){return this.mA?t.Sw()?this.f3()?this.VA:this.HA.vM():this.HA:null}U3(t,s,i,e,h,r,n){t.UR(this.K3(t),h,i,e,this.FA,r,n,this.NA,this.BA,this.WA,this.jA),t.zR(this.H3(s,t))}m3(t,s){const i=this.uA[0],e=t.YR(),h=i.Fb();h&&(t.KR(!1),t.ZR(!0),this.kA.set(0,0,1,1),this.OA.set(0,0,1,1)),t.Ew(i),t.Vb(this.Bb),t.nP(this.HA);let r=0,n=1;if(this.OA.set(0,0,1,1),i.Db()&&this.nA){const{J3:o,q3:a,X3:u}=this.nA(this.PA);o&&this.OA._(o),r=Number.isFinite(a)?1/a:0,n=Number.isFinite(u)?1/u:0}else{const[l,c]=this.ed.VP(t);r=1/l,n=1/c}s.A3?this.FA._(s.A3):this.FA.set(0,0,0,0),t.UR(this.K3(t),this.kA,this.OA,this.OA,this.FA,r,n,this.NA,this.BA,this.WA,this.jA),t.zR(this.H3(0,t)),t.Sw()&&this.yA&&t.SetProgramParameter_IsSrcTexRotated(this.GA),t.nS(0),this.B3(t),h&&(t.ZR(!1),t.KR(e))}f3(){return this.wA}h3(){return!this.wA}Y3(){return this.mA}Z3(){return!!this.vA&&!this.f3()}Q3(){return this.MA}tF(){return this.PA}sF(){return this.AA}iF(){return this.Bb}eF(){return this.JA}fR(){return this.eE}hF(){return this.DA}rF(){return this.LA}nF(){return this._A}async oF(t,s,i){}}}{const ie=self.Os;ie.Vg.hA.t3=class{constructor(t,s,i,e=-1){this.aF=t,this.uF=s,this.lF=i,this.Lg=e}cF(){return this.aF}G3(){return this.uF}x3(){return this.lF}fF(){return this.Lg}jG(){return this.cF().N3(this.fF())}_3(t,s,i){}T3(t,s,i){}}}{const ee=self.Os;ee.Vg.hA.t3.QA=class extends ee.Vg.hA.t3{constructor(t,s,i,e){super(t,s,i,e)}_3(t,s,i){const e=this.cF();t.xR(),t.Cw(),t.nP(i,e.eF()),t.JR(0,0,0,0),e.B3(t),e.O3()}T3(t,s,i){const e=this.cF();t.xR(),t.Cw(),t.nP(i,!1),t.JR(0,0,0,0),e.B3(t),e.O3()}}}{const he=self.Os,re=he.ir(he.Rect),ne=he.ir(he.Hu);he.Vg.hA.t3.e3=class extends he.Vg.hA.t3{constructor(t,s,i,e){super(t,s,i,e)}_3(t,s,i){const e=this.cF();t.Cw(),t.nP(i),e.j3(t,!0),t.Vb(e.iF()),t.bR(s.vM()),ne.ul(e.hF()),re._(e.rF()),re.Cu(1),t.SS(ne,re),e.nF()&&t.uP(s)}T3(t,s,i){const e=this.cF();t.Cw(),t.nP(i,!1),e.W3(t)?ne.ul(e.rF()):(t.SetNormalizedCoordsProgramVariant(!1),e.j3(t,!0),ne.ul(e.hF())),t.SetBackTexture(null),t.Vb(e.iF()),t.bR(s.vM()),e.Q3()?t.FR():t.SS(ne,e.rF())}}}{const oe=self.Os;oe.Vg.hA.t3.i3=class extends oe.Vg.hA.t3{constructor(t,s,i,e){super(t,s,i,e)}_3(t,s,i){const e=this.cF();t.nP(i,e.eF()),t.JR(0,0,0,0),t._R(),t.Ew(this.jG()),e.z3(t,this.fF()),e.B3(t),e.O3()}T3(t,s,i){const e=this.cF();t.nP(i,!1),t.JR(0,0,0,0),t._R(),t.Ew(this.jG()),e.z3(t,this.fF()),e.B3(t),e.O3()}}}{const ae=self.Os,ue=ae.ir(ae.Rect),le=ae.ir(ae.Hu);ae.Vg.hA.t3.s3=class extends ae.Vg.hA.t3{constructor(t,s,i,e){super(t,s,i,e)}_3(t,s,i){const e=this.cF(),h=(t.nP(i),0===this.x3());h?t.Vb(e.iF()):(t.JR(0,0,0,0),t._R()),t.Ew(this.jG()),e.V3(t,this.fF()),t.bR(s.vM()),e.j3(t,h),le.ul(e.hF()),ue._(e.rF()),ue.Cu(1),t.SS(le,ue),e.nF()&&t.uP(s)}T3(t,s,i){const e=this.cF(),h=(t.nP(i,!1),0===this.x3());h?(t.Vb(e.iF()),t.SetBackTexture(null),e.W3(t)?le.ul(e.rF()):(t.SetNormalizedCoordsProgramVariant(!1),e.j3(t,!0),le.ul(e.hF()))):(t.JR(0,0,0,0),t._R(),le.ul(e.rF())),t.Ew(this.jG()),e.V3(t,this.fF()),t.bR(s.vM()),e.Q3()?t.FR():t.SS(le,e.rF())}}}{let l=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const r=t[1],n=s[1];return r-n},c=(l,self.Os),f=self.zs,d=null,s=new Set,p=[],m=[],i=!1,t=!1,e=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.dF=class{constructor(t){d=t,Object.defineProperties(this,{pF:{value:d.gF().mF(),writable:!1},yF:{value:d.SF().wF(),writable:!1},bF:{value:{},writable:!1},vF:{value:{},writable:!1},MF:{value:d.GF(),writable:!1},xF:{value:d.TF(),writable:!1},storage:{value:new self._F(d),writable:!1},isInWorker:{value:d.IF(),writable:!1},CF:{value:d.EF(),writable:!1},RF:{value:d.PF(),writable:!1},i2:{value:d.AF(),writable:!1},FF:{value:d.DF(),writable:!1},OF:{value:new self.LF(t),writable:!1},kF:{value:new self.NF(t),writable:!1}}),d.BF().addEventListener("keydown",t=>{s.has(t.key)?t.stopPropagation():s.add(t.key)}),d.BF().addEventListener("keyup",t=>s.delete(t.key)),d.Rf().addEventListener("window-blur",()=>s.clear()),d.IF()&&(self.alert=t=>(i||(i=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}WF(t){Object.defineProperties(this.bF,t)}jF(t){Object.defineProperties(this.vF,t)}addEventListener(t,s){d.BF().addEventListener(t,s)}removeEventListener(t,s){d.BF().removeEventListener(t,s)}HF(t,...s){f.Me(t);const i=d.VF(),e=i.UF(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.Wl())return e.zF();if(s.length<e.JF())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.JF()} expected)`);let h=e.qF(),r=h.$F(),n=i.XF();if(n){r=r.slice(0);const a=new Set(r);for(const u of n.$F())a.has(u)||(r.push(u),a.add(u));for(const l of i.KF())a.has(l)||(r.push(l),a.add(l))}const o=h.YF(r,e.ZF(),e.QF(),e.zF(),...s);return o}tD(t){const s=d.iD().sD();if(!s)throw new Error("not in a function which returns a value");switch(s.eD()){case 1:"number"==typeof t&&s.hD(t);break;case 2:"string"==typeof t&&s.hD(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.hD(t)}}signal(t){f.Me(t),d.VF().rD(t)}nD(t){return f.Me(t),d.VF().oD(t)}aD(){return[d.EF(),d.PF()]}get isSuspended(){return d.uD()}get lD(){return d.cD()}get fD(){return d.dD()}get pD(){return d.mD()}get gD(){return d.yD()}get wD(){return d.SD()}set wD(t){f.ye(t),d.bD(t)}get fps(){return t||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),t=!0),d.vD()}get framesPerSecond(){return d.vD()}get MD(){return d.GD()}get xD(){return d.TD()}get _D(){return d.ID()}get CD(){return d.ED()}set CD(t){if(!e.has(t))throw new Error("invalid framerate mode");d.RD(t)}get PD(){return d.AD()}set PD(t){f.ye(t),d.FD(t)}get DD(){return d.OD()}set DD(t){d.LD(t)}random(){return d.kD()}get layout(){const t=d.ND();if(t)return t.BD();throw new Error("no layout is running - make sure a layout is loaded before accessing")}WD(t){let s=d.jD(),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.HD(t))return i.BD();throw new Error("invalid layout")}VD(){return d.jD().UD().map(t=>t.BD())}zD(t){let s=d.jD(),i;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(i=s.HD(t)))throw new Error("invalid layout");s.JD()||s.qD(i)}get keyboard(){const t=d.$D().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get XD(){const t=d.$D().XD;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get KD(){const t=d.$D().KD;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get YD(){const t=d.$D().YD;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}ZD(t,s){f.Me(t),f.Me(s),d.QD(t,s)}tO(t){f.ye(t);const s=d.sO(t);return s?s.iO():null}eO(t,e){f.Ue(e);const h=d.hO();for(const s of t){const i=d.rO(s),r=i.nO();p.push([r.oO().fF(),r.aO()]),m.push(i)}if(0!==p.length){p.sort(l),m.sort((t,s)=>e(t.iO(),s.iO()));let i=!1;for(let t=0,s=p.length;t<s;++t){const n=m[t],o=h.uO(p[t][0]),a=p[t][1],u=o.lO();u[a]!==n&&((u[a]=n).nO().cO(o,!0),o.fO(n),i=!0)}i&&d.dO(),c.Pn(p),c.Pn(m)}}async pO(t,s){const i=new MessageChannel,e=i.port1,h=i.port2;return await d.mO("runtime","script-create-worker",{url:t,opts:s,port2:h},[h]),e}alert(t){return d.mO("runtime","alert",{message:t+(d.IF()?" [via Web Worker]":"")})}gO(t){return f.ye(t),d.yO(t)}wO(t){d.SO(t)}}}{let s=self.Os,n=null;self.bO=class{constructor(t){n=t,Object.defineProperties(this,{vO:{value:n.MO("audio/webm; codecs=opus"),writable:!1}})}GO(t){const s=self.TO.xO(t);if(!s)throw new Error("invalid IImageInfo");s._O(n.IO())}CO(t){return n.do(t)}EO(t){return n.po(t)}RO(t){return n.mo(t)}PO(t){return n.yo(t)}AO(t){return n.FO(t)}DO(t){return"flat"===n.OO()&&s.lo(t)&&(t=t.toLowerCase()),n.LO(t)}get kO(){return n.NO()}async BO(t,s){if(this.vO)throw new Error("decodeWebMOpus(): not supported because WebM Opus is supported by the platform");const i=await n.IO().WO(s),e=new Float32Array(i),h=t.createBuffer(1,e.length,48e3),r=h.getChannelData(0);return r.set(e),h}jO(...t){return n.HO(...t)}VO(t){return n.UO(t)}zO(t){return n.JO(t)}}}{let n=self.Os,i=self.zs,o=null;self.qO=class{constructor(t){o=t,Object.defineProperties(this,{runtime:{value:o.IO(),writable:!1}})}$O(t,s){const i=o.IO(),e=i.rO(t),h=i.rO(s);return o.XO(e,h)}KO(t,s){const i=o.IO(),e=i.rO(t);for(const h of s){const r=i.rO(h);if(o.XO(e,r))return h}return null}YO(t){const s=o.IO().rO(t),i=o.ZO(s);return i?i.iO():null}QO(t,s){if(i.ye(t),i.ye(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");o.tL(t,s)}sL(){return o.iL()}eL(t,s){let i=o.IO(),e;e=Array.isArray(t)?t.map(t=>i.hL(t)):[i.hL(t)];const h=n.Rect.lu(s),r=[];return o.rL(null,e,h,r),r.map(t=>t.iO())}}}{let s=self.Os,i=null,e=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),h=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),r=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.LF=class{constructor(t){i=t,Object.defineProperties(this,{nL:{value:s.ri.gi,writable:!1},oL:{value:e.get(s.ri.ni)||"unknown",writable:!1},aL:{value:s.ri.oi,writable:!1},uL:{value:h.get(s.ri.ai)||"unknown",writable:!1},lL:{value:s.ri.li,writable:!1},cL:{value:r.get(s.ri.fi)||"unknown",writable:!1}})}get exportType(){let t=i.fL();return i.dL()?t="nwjs":i.pL()?t="windows-webview2":"cordova"===t?t="Android"===s.ri.ni?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get renderer(){return i.gL().mL()}get yL(){return i.gL().wL()}get SL(){return i.gL().bL()}get vL(){return i.gL().ML()}get GL(){return i.gL().xL()}get TL(){return i.gL()._L()}get devicePixelRatio(){return i.IL()}}}{const ce=self.zs;self._F=class{constructor(t){this.CL=t.EL()}getItem(t){return ce.Me(t),this.CL.getItem(t)}setItem(t,s){return ce.Me(t),this.CL.setItem(t,s)}removeItem(t){return ce.Me(t),this.CL.removeItem(t)}clear(){return this.CL.clear()}keys(){return this.CL.keys()}}}{const fe=self.Os,de=fe.Ls();self.RL=class{#PL;constructor(){const t=fe.FL.AL(de);this.#PL=t,Object.defineProperties(this,{runtime:{value:t.IO().DL(),writable:!1},OL:{value:t.LL(),writable:!1},kL:{value:t.NL(),writable:!1},BL:{value:t.WL(),writable:!1},jL:{value:t.HL(),writable:!1},VL:{value:t.UL(),writable:!1},zL:{value:t.JL(),writable:!1},qL:{value:t.$L(),writable:!1},XL:{value:t.KL(),writable:!1}})}static YL(t){if(!t)return null;const s=fe.FL.ZL(t);return s?s.QL():null}sk(){return this.#PL.ek().ik()}hk(){return this.#PL.rk().iO()}}}{const pe=self.Os,me=self.zs,ge=pe.Ls();self.nk=class{#PL;constructor(){const t=pe.FL.AL(ge);this.#PL=t,Object.defineProperties(this,{name:{value:t.Wc(),writable:!1},runtime:{value:t.IO().DL(),writable:!1},ak:{value:t.uk().QL(),writable:!1}}),t.IO().lk(this,t)}addEventListener(t,s){me.Me(t),me.Ue(s),this.#PL.BF().addEventListener(t,s)}removeEventListener(t,s){me.Me(t),me.Ue(s),this.#PL.BF().removeEventListener(t,s)}ck(){return[...this.instances()]}fk(){return pe.first(this.instances())}dk(){return[...this.pk()]}mk(){return pe.first(this.pk())}gk(t){const s=this.#PL,i=s.IO().yk(t),e=s.wk(i);return e?e.iO():null}*instances(){for(const t of this.#PL.Sk())yield t.iO()}*pk(){for(const t of this.#PL.vk().bk())yield t.iO()}Mk(t){me.Ue(t);const s=this.#PL;if(0<s.Gk())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.xk(t)}Fi(t,s,i,e,h){if(me.fe(s),me.fe(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#PL,n=r.IO(),o=n.ND().oO(t);if(!o)throw new Error("invalid layer");const a=n.Tk(r,o,s,i,e,h),u=(e&&o._k(a),n.VF());return u.Ik(!0),a.Ck(),u.Ik(!1),u.Ek()||n.jD().Rk()||n.Pk(),a.iO()}}}{const ye=self.zs,u=new WeakMap,we=["above","below","top-sublayer","bottom-sublayer"];self.Ak=class{constructor(t){u.set(this,t);const s=[],i=t.Fk(),e=i.Dk().length;for(let t=0;t<e;++t)s.push(new self.Ok(i,t));Object.defineProperties(this,{name:{value:t.Wc(),writable:!1},index:{value:t.fF(),writable:!1},Lk:{value:s,writable:!1}})}addEventListener(t,s){ye.Me(t),ye.Ue(s),u.get(this).BF().addEventListener(t,s)}removeEventListener(t,s){ye.Me(t),ye.Ue(s),u.get(this).BF().removeEventListener(t,s)}get width(){return u.get(this).Xp()}set width(t){ye.ye(t),u.get(this).hm(t)}get height(){return u.get(this).om()}set height(t){ye.ye(t),u.get(this).Kp(t)}kk(t,s){ye.ye(t),ye.ye(s);const i=u.get(this);i.hm(t),i.Kp(s)}getSize(){const t=u.get(this);return[t.Xp(),t.om()]}set scale(t){ye.ye(t),u.get(this).Nk(t)}get scale(){return u.get(this).Bk()}set angle(t){ye.ye(t),u.get(this).Wk(t)}get angle(){return u.get(this).jk()}set scrollX(t){ye.fe(t),u.get(this).Hk(t)}get scrollX(){return u.get(this).Vk()}set scrollY(t){ye.fe(t),u.get(this).Uk(t)}get scrollY(){return u.get(this).zk()}scrollTo(t,s){ye.fe(t),ye.fe(s);const i=u.get(this);i.Hk(t),i.Uk(s)}Jk(){const t=u.get(this);return[t.Vk(),t.zk()]}qk(t){let s=u.get(this),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(i=s.oO(t))?i.$k():null}Xk(){return u.get(this).Kk().map(t=>t.$k())}*Yk(){for(const t of u.get(this).Yk())yield t.$k()}Zk(t,s,i){const e=u.get(this),h=self.Qk,r=(ye.Me(t),ye.Qe(s,h),s?e.IO().t5(s):null),n=we.indexOf(i);if(n<0)throw new Error("invalid location");e.s5(t,r,n)}i5(t,s,i){const e=u.get(this),h=e.IO(),r=self.Qk,n=(ye.Ze(t,r),h.t5(t));if(!n)throw new Error("invalid layer");ye.Qe(s,r);const o=s?h.t5(s):null,a=we.indexOf(i);if(a<0)throw new Error("invalid location");e.e5(n,o,a)}h5(t){const s=u.get(this),i=self.Qk,e=(ye.Ze(t,i),s.IO().t5(t));if(!e)throw new Error("invalid layer");const h=e.IO();s.r5(e),h.VF().Ek()||h.Pk()}n5(){const t=u.get(this),s=t.IO();t.o5(),s.VF().Ek()||s.Pk()}a5(t,s){ye.ye(t),ye.ye(s),u.get(this).u5(t,s)}l5(){return u.get(this).c5()}set K(t){ye.Me(t);const s=u.get(this);if("perspective"===t)s.f5();else{if("orthographic"!==t)throw new Error("invalid projection");s.d5()}}get K(){return u.get(this).p5()?"orthographic":"perspective"}}}{const Se=self.Os,f=self.zs,d=new WeakMap,be=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),ve=new Map([...be.entries()].map(t=>[t[1],t[0]])),Me=Se.ir(Se.Oo);self.Qk=class{constructor(t){d.set(this,t);const s=[],i=t.Fk(),e=i.Dk().length;for(let t=0;t<e;++t)s.push(new self.Ok(i,t));Object.defineProperties(this,{name:{value:t.Wc(),writable:!1},layout:{value:t.HD().BD(),writable:!1},Lk:{value:s,writable:!1}}),t.IO().lk(this,t)}get m5(){const t=d.get(this).g5();return t?t.$k():null}*y5(){for(const t of d.get(this).y5())yield t.$k()}*w5(){for(const t of d.get(this).S5())yield t.$k()}*b5(){for(const t of d.get(this).S5())for(const s of t.v5())yield s.$k()}get index(){return d.get(this).fF()}get isVisible(){return d.get(this).M5()}set isVisible(t){d.get(this).G5(t)}get x5(){return d.get(this).T5()}get isInteractive(){return d.get(this)._5()}set isInteractive(t){d.get(this).I5(t)}get C5(){return d.get(this).E5()}set C5(t){d.get(this).R5(!!t)}get P5(){return d.get(this).A5()}get opacity(){return d.get(this).mR()}set opacity(t){t=Se.lr(+t,0,1),isNaN(t)||d.get(this).yR(t)}set scale(t){f.ye(t),d.get(this).F5(t)}get scale(){return d.get(this).D5()}set scaleRate(t){f.ye(t),d.get(this).O5(t)}get scaleRate(){return d.get(this).L5()}set angle(t){f.ye(t),d.get(this).Wk(t)}get angle(){return d.get(this).k5()}set parallaxX(t){f.ye(t),d.get(this).N5(t)}get parallaxX(){return d.get(this).B5()}set parallaxY(t){f.ye(t),d.get(this).W5(t)}get parallaxY(){return d.get(this).j5()}set H5(t){f.ye(t),d.get(this).av(t)}get H5(){return d.get(this).ov()}set V5(t){d.get(this).U5(t)}get V5(){return d.get(this).z5()}set J5(t){d.get(this).q5(t)}get J5(){return d.get(this).X5()}set o3(t){f.Me(t);const s=be.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");d.get(this).Vb(s)}get o3(){return ve.get(d.get(this).K5())}set backgroundColor(t){if(f.ke(t),t.length<3)throw new Error("expected 3 elements");Me.jo(t[0],t[1],t[2]);const s=d.get(this),i=s.Y5();i.ea(Me)||(i.$o(Me),s.IO().dO())}get backgroundColor(){const t=d.get(this).Y5();return[t.Xo(),t.Ko(),t.Yo()]}set scrollX(t){f.fe(t);const s=d.get(this);s.Z5(!0),s.Hk(t)}get scrollX(){return d.get(this).Vk()}set scrollY(t){f.fe(t);const s=d.get(this);s.Z5(!0),s.Uk(t)}get scrollY(){return d.get(this).zk()}scrollTo(t,s){f.fe(t),f.fe(s);const i=d.get(this);i.Z5(!0),i.Hk(t),i.Uk(s)}Jk(){const t=d.get(this);return[t.Vk(),t.zk()]}Q5(){d.get(this).Z5(!1)}getViewport(){return d.get(this).tN().gu()}sN(t,s,i=0){f.fe(t),f.fe(s),f.fe(i);const e=d.get(this),h=e.IO();return e.iN(t-h.eN(),s-h.hN(),i)}rN(t,s,i=0){f.fe(t),f.fe(s),f.fe(i);const e=d.get(this),h=e.IO(),[r,n]=e.nN(t,s,i);return[r+h.eN(),n+h.hN()]}oN(t,s,i=0){return f.fe(t),f.fe(s),f.fe(i),d.get(this).aN(t,s,i)}uN(t,s,i=0){return f.fe(t),f.fe(s),f.fe(i),d.get(this).lN(t,s,i)}get cN(){return d.get(this).fN()}}}{let e=function(t){let s=Te.get(t);return s||(s=Ge.ir(Ge.Event.Rf),Te.set(t,s)),s};e;const Ge=self.Os,xe=self.zs,Te=new WeakMap,_e=Ge.Ls();self.dN=class{#PL;constructor(){const t=Ge.FL.AL(_e),s={runtime:{value:(this.#PL=t).IO().DL(),writable:!1},pN:{value:t.mN().ik(),writable:!1},ak:{value:t.uk().QL(),writable:!1}};t.gN(s),t.yN(s),Object.defineProperties(this,s),t.IO().lk(this,t)}static wN(){return Ge.FL.SN()}bN(){const t=Te.get(this);t&&(t.er(),Te.delete(this))}addEventListener(t,s,i){xe.Me(t),xe.Ue(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){xe.Me(t),xe.Ue(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}vN(){const t=this.#PL,s=t.IO();s.MN(t),s.VF().Ek()||s.jD().Rk()||s.VF().GN()||s.Pk()}xN(){const t=this.#PL.TN();return t?t.map(t=>t.iO()):[]}*_N(){const t=this.#PL;if(t.IN())for(const s of t.CN())yield s.iO()}get uid(){return this.#PL.EN()}get RN(){return this.#PL.PN()}set wD(t){xe.ye(t),this.#PL.bD(t)}get wD(){return this.#PL.AN()}FN(){this.#PL.DN()}get lD(){const t=this.#PL;return t.IO().cD(t)}ON(...t){xe.ke(t);const s=new Set(t),i=this.#PL.LN();return s.oe(i)}kN(t){xe.Ze(t,Set),this.#PL.NN(t)}BN(){return new Set(this.#PL.LN())}signal(t){xe.Me(t);const s=this.#PL;s.IO().VF().WN(s,t)}nD(t){xe.Me(t);const s=this.#PL;return s.IO().VF().jN(s,t)}}}{const Ie=self.Os,Ce=self.zs,Ee=Ie.Ls();self.HN=class extends self.dN{#PL;#VN=!1;#UN=null;#zN=!1;#JN=null;#qN;#$N;constructor(t){super(),this.#PL=Ie.FL.AL(Ee),this.#VN=!1,this.#UN=null,this.#zN=!1,this.#JN=null,this.#qN=t?.domComponentId,this.#$N=t?.wrapperComponentId}bN(){this.XN(!1),this.KN(!1),super.bN()}YN(){return Ie.FL.ZN()}QN(t){const s=this.#PL;s.IO().t4(t,s)}s4(t){const s=this.#PL;return s.IO().i4(t,s)}e4(t,s){if(Ce.Me(t),Ce.Ue(s),!this.#qN)throw new Error("no DOM component id set");const i=this.#PL.IO();i.h4(this.#qN,t,s)}r4(t){Ce.ke(t);for(const[s,i]of t)this.e4(s,i)}n4(t,s){if(Ce.Me(t),!this.#qN)throw new Error("no DOM component id set");const i=this.#PL.IO();i.Yc(this.#qN,t,s)}o4(t,s){if(Ce.Me(t),!this.#qN)throw new Error("no DOM component id set");const i=this.#PL.IO();return i.mO(this.#qN,t,s)}a4(t,s){const i=this.#PL.IO();if(!i.IF())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#qN,handler:t,data:s,responseId:null});this.n4(t,s)}XN(t){if(this.#VN!==(t=!!t)){this.#VN=t;const s=this.#PL.IO();t?(this.#UN||(this.#UN=()=>this.u4()),s.Rf().addEventListener("tick",this.#UN)):s.Rf().removeEventListener("tick",this.#UN)}}l4(){return this.#VN}u4(){}KN(t){if(this.#zN!==(t=!!t)){this.#zN=t;const s=this.#PL.IO();t?(this.#JN||(this.#JN=()=>this.c4()),s.Rf().addEventListener("tick2",this.#JN)):s.Rf().removeEventListener("tick2",this.#JN)}}f4(){return this.#zN}c4(){}d4(){return[]}m4(){return null}g4(t){}y4(){if(!this.#$N)throw new Error("no wrapper component id set");const t=this.#PL.IO();return t.w4(this.#$N)}S4(t,s){if(Ce.Me(t),Ce.Ue(s),!this.#$N)throw new Error("no wrapper component id set");const i=this.#PL.IO();i.b4(this.#$N,t,s)}v4(t){Ce.ke(t);for(const[s,i]of t)this.S4(s,i)}M4(t,s){if(!this.#$N)throw new Error("no wrapper component id set");this.runtime.kF.G4(this.#$N,t,s)}x4(t,s){if(this.#$N)return this.runtime.kF.T4(this.#$N,t,s);throw new Error("no wrapper component id set")}}}{let t=function(t){return class h extends t{#_4;#I4;constructor(t){super(t);const s=Re.FL.AL(De),i=s.nO(),e=(this.#_4=s,this.#I4=i,Fe.set(this,s),[]),h=i.C4();if(h){const n=i.mN().Fk().Dk().length;for(let t=0;t<n;++t)e.push(new self.Ok(h,t))}const r={Lk:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#I4.HD().BD()}get E4(){return this.#I4.oO().$k()}get x(){return this.#I4.tv()}set x(t){t=+t;const s=this.#I4;isNaN(t)||s.tv()===t||(s.sv(t),s.R4())}get y(){return this.#I4.rv()}set y(t){t=+t;const s=this.#I4;isNaN(t)||s.rv()===t||(s.nv(t),s.R4())}setPosition(t,s){t=+t,s=+s;const i=this.#I4;isNaN(t)||isNaN(s)||i.tv()===t&&i.rv()===s||(i.P4(t,s),i.R4())}A4(){const t=this.#I4;return[t.tv(),t.rv()]}F4(t,s){if(t=+t,s=+s,!(isNaN(t)||isNaN(s)||0===t&&0===s)){const i=this.#I4;i.D4(t,s),i.R4()}}get H5(){return this.#I4.ov()}set H5(t){t=+t;const s=this.#_4,i=this.#I4;isNaN(t)||i.ov()===t||(i.av(t),s.IO().dO())}get O4(){return this.#I4.L4()}get width(){return this.#I4.Xp()}set width(t){t=+t;const s=this.#I4;isNaN(t)||s.Xp()===t||(s.hm(t),s.R4())}get height(){return this.#I4.om()}set height(t){t=+t;const s=this.#I4;isNaN(t)||s.om()===t||(s.Kp(t),s.R4())}kk(t,s){t=+t,s=+s;const i=this.#I4;isNaN(t)||isNaN(s)||i.Xp()===t&&i.om()===s||(i.WI(t,s),i.R4())}getSize(){const t=this.#I4;return[t.Xp(),t.om()]}get angle(){return this.#I4.jk()}set angle(t){t=Re.cr(+t);const s=this.#I4;isNaN(t)||s.jk()===t||(s.Wk(t),s.R4())}get N4(){return Re.pr(this.angle)}set N4(t){this.angle=Re.dr(t)}fl(){return this.#I4.B4().gu()}W4(){return this.#I4.j4().nl()}H4(){return this.#I4.V4()}get isVisible(){return this.#I4.T5()}set isVisible(t){t=!!t;const s=this.#_4,i=this.#I4;i.T5()!==t&&(i.G5(t),s.IO().dO())}get opacity(){return this.#I4.mR()}set opacity(t){t=Re.lr(+t,0,1);const s=this.#_4,i=this.#I4;isNaN(t)||i.mR()===t||(i.yR(t),s.IO().dO())}set U4(t){if(Pe.ke(t),t.length<3)throw new Error("expected 3 elements");ke.jo(t[0],t[1],t[2]);const s=this.#_4,i=this.#I4;i.z4().ea(ke)||(i.J4(ke),s.IO().dO())}get U4(){const t=this.#I4.z4();return[t.Xo(),t.Ko(),t.Yo()]}set o3(t){Pe.Me(t);const s=Oe.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#_4,e=this.#I4;e.Vb(s),i.IO().dO()}get o3(){return Le.get(this.#I4.K5())}q4(){this.#I4.X4()}K4(){this.#I4.Y4()}Z4(t){Pe.Ze(t,Ae);const s=this.#_4,i=s.IO().t5(t);if(!i)throw new Error("invalid layer");s.nO().Q4(i)}tB(t,s){Pe.Ze(t,h),this.#I4.sB(Fe.get(t),s)}get zIndex(){return this.#I4.aO()}get iB(){return this.#I4.eB()}set iB(t){this.#I4.hB(!!t)}Nu(t,s){return Pe.fe(t),Pe.fe(s),this.#I4.rB(+t,+s)}$O(t){Pe.Ze(t,h);const s=this.#_4,i=Fe.get(t);return s.IO().SF().XO(s,i)}YO(){const t=this.#_4,s=t.IO().SF().ZO(t);return s?s.iO():null}getParent(){const t=this.#_4.nB();return t?t.iO():null}oB(){const t=this.#_4.aB();return t?t.iO():null}*uB(){for(const t of this.#_4.uB())yield t.iO()}lB(){return this.#_4.cB()}fB(t){const s=this.#_4.dB(t);return s?s.iO():null}*children(){for(const t of this.#_4.children())yield t.iO()}*pB(){for(const t of this.#_4.pB())yield t.iO()}mB(t,s){Pe.Ze(t,h),Pe.Re(s),s=s||{};const i=this.#_4,e=Fe.get(t);i.gB(e,s)}removeChild(t){Pe.Ze(t,h);const s=this.#_4,i=Fe.get(t);s.yB(i)}wB(){const t=this.#_4;if(t.SB()){const s=t.nB();s.yB(t)}}bB(){const t=this.#I4;return{vB:t.MB(),GB:t.xB(),TB:t._B(),IB:t.CB(),EB:t.RB(),PB:t.AB(),DB:t.OB(),LB:t.kB(),NB:t.BB()}}WB(t,s){Pe.ye(t),Pe.ye(s),this.#I4.jB(t,s)}HB(){const t=this.#I4;t.VB(),t.R4()}UB(t,s,i){Pe.ye(t),Pe.ye(s),Pe.Ee(i);const e=this.#I4;e.zB(t,s,i)&&e.R4()}JB(t,s){let i=NaN,e=NaN,h=NaN,r=NaN,n=NaN,o=this.#I4;if(o.qB()){const a=o.$B(),u=a.Vv(t,s);null!==u&&(i=u.tv(),e=u.rv(),h=u.ov(),r=u.uv(),n=u.cv())}return{x:i,y:e,H5:h,u:r,v:n}}XB(){const t=this.#I4;if(!t.qB())return[0,0];const s=t.$B();return[s.Av(),s.Fv()]}}};0;const Re=self.Os,Pe=self.zs,Ae=self.Qk,Fe=new WeakMap,De=Re.Ls(),Oe=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Le=new Map([...Oe.entries()].map(t=>[t[1],t[0]])),ke=Re.ir(Re.Oo);self.KB=t(self.dN),self.YB=t(self.HN)}{const Ne=self.zs;self.ZB=class extends self.KB{#PL;constructor(){super(),this.#PL=self.dN.wN()}QB(){return this.#PL.s6().t6()}focus(){this.#PL.s6().i6()}blur(){this.#PL.s6().e6()}h6(t,s){Ne.Me(t),this.#PL.s6().r6(t,s)}}}{let e=function(t){let s=je.get(t);return s||(s=Be.ir(Be.Event.Rf),je.set(t,s)),s};e;const Be=self.Os,We=self.zs,je=new WeakMap,He=Be.Ls();self.n6=class{#PL;constructor(){const t=Be.FL.AL(He),s={runtime:{value:(this.#PL=t).IO().DL(),writable:!1},behavior:{value:t.a6().o6(),writable:!1},u6:{value:t.c6().l6(),writable:!1}};Object.defineProperties(this,s),t.IO().lk(this,t)}static wN(){return Be.FL.SN()}get f6(){return this.#PL.d6().iO()}bN(){const t=je.get(this);t&&(t.er(),je.delete(this))}addEventListener(t,s,i){We.Me(t),We.Ue(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){We.Me(t),We.Ue(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}}}{const Ve=self.Os,Ue=Ve.Ls();self.p6=class{constructor(){const t=Ve.FL.AL(Ue),s={runtime:{value:t.IO().DL(),writable:!1},behavior:{value:t.a6().o6(),writable:!1},name:{value:t.Wc(),writable:!1}};Object.defineProperties(this,s)}}}{const ze=self.Os,Je=ze.Ls();self.m6=class{#PL;constructor(){const t=ze.FL.AL(Je),s={runtime:{value:(this.#PL=t).IO().DL(),writable:!1}};Object.defineProperties(this,s)}ck(){return this.#PL.bk().map(t=>t.iO())}static YL(t){if(!t)return null;const s=ze.FL.g6(t);return s?s.o6():null}}}{const qe=self.Os,$e=self.zs,Xe=qe.ir(qe.Oo);self.Ok=class{#PL;constructor(t,s){this.#PL=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){const t=this.#PL.Dk();return t[this.index].Wc()}get isActive(){return this.#PL.y6(this.index)}set isActive(t){t=!!t;const s=this.#PL;s.y6(this.index)!==t&&(s.w6(this.index,t),s.S6(),s.IO().dO())}setParameter(t,s){$e.ye(t),t=Math.floor(+t);const i=this.#PL,e=i.b6(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof qe.Oo){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");Xe.jo(s[0],s[1],s[2]),s=Xe}else if("number"!=typeof s)throw new TypeError("expected number");const h=i.v6(this.index,t,s);h&&i.y6(this.index)&&i.IO().dO()}getParameter(t){$e.ye(t),t=Math.floor(+t);const s=this.#PL,i=s.b6(this.index,t);if(null===i)throw new RangeError("invalid index");return i instanceof qe.Oo?[i.Xo(),i.Ko(),i.Yo()]:i}}}self.M6=class{#PL;constructor(t){this.#PL=t,Object.defineProperties(this,{name:{value:t.Wc(),writable:!1}})}get speed(){return this.#PL.G6()}get x6(){return this.#PL.T6()}get repeatCount(){return this.#PL._6()}get I6(){return this.#PL.C6()}get E6(){return this.#PL.R6()}get frameCount(){return this.#PL.P6()}A6(){return this.#PL.F6().map(t=>t.D6())}*frames(){for(const t of this.#PL.F6())yield t.D6()}};self.TO=class{#PL;constructor(t){this.#PL=t}static xO(t){return t.#PL}get width(){return this.#PL.Xp()}get height(){return this.#PL.om()}getSize(){const t=this.#PL;return[t.Xp(),t.om()]}O6(t){return t.L6(this)}k6(){return this.#PL.yC().gu()}};{const Ke=self.zs;self.N6=class extends self.TO{#PL;constructor(t){super(t.B6()),this.#PL=t,Object.defineProperties(this,{duration:{value:t.W6(),writable:!1},j6:{value:t.H6(),writable:!1},V6:{value:t.U6(),writable:!1}})}z6(){const t=this.#PL;return[t.H6(),t.U6()]}J6(){return this.#PL.q6()}X6(t){return this.K6(t)[0]}Y6(t){return this.K6(t)[1]}K6(t){let s=this.#PL,i=null;if("number"==typeof t)i=s.Z6(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.Q6(t)}return i?[i.tv(),i.rv()]:this.z6()}tW(){const t=this.#PL.sW();return t?t.Cl():0}iW(t){return this.eW(t)[0]}hW(t){return this.eW(t)[1]}eW(t){Ke.ye(t),t=Math.floor(t);const s=this.#PL.sW();if(!s||t<0||t>=s.Cl())return[0,0];const i=s.Il(),e=i[2*t],h=i[2*t+1];return[e,h]}get tag(){return this.#PL.rW()}}}{let s=function(t){const s=Ze.get(t);if(s.nW())throw new Error("timeline/tween was released and is no longer valid");return s};s;const Ye=self.zs,Ze=new WeakMap;self.oW=class{constructor(t){Ze.set(this,t),t.IO().lk(this,t)}pause(){s(this).aW()}resume(){s(this).uW()}stop(){s(this).Yf()}ON(t){return s(this).lW(t)}set time(t){Ye.ye(t),s(this).cW(t)}get time(){return s(this).zP()}set totalTime(t){Ye.ye(t),s(this).fW(t)}get totalTime(){return s(this).dW()}set x6(t){s(this).pW(!!t)}get x6(){return s(this).mW()}set E6(t){s(this).gW(!!t)}get E6(){return s(this).yW()}set playbackRate(t){Ye.ye(t),s(this).wW(t)}get playbackRate(){return s(this).SW()}get progress(){const t=s(this);return t.zP()/t.dW()}get tags(){return s(this).bW()}get finished(){return s(this).vW()}get isPlaying(){return s(this).IsPlaying()}get MW(){return s(this).GW()}get xW(){return Ze.get(this).nW()}}}{let i=new WeakMap;self.TW=class extends self.oW{constructor(t){super(t),i.set(this,t);const s={name:{value:t.Wc(),writable:!1}};Object.defineProperties(this,s)}}}{let i=function(t){const s=h.get(t);if(s.nW())throw new Error("tween was released and is no longer valid");return s},e=(i,self.zs),h=new WeakMap,r=new WeakMap,n=null;self._W=class extends self.oW{constructor(t,s,i){super(t),n=n||i.easeToIndexFunc,h.set(this,t),s&&r.set(this,s)}stop(){const t=i(this),s=r.get(this);s.ReleaseTween(t)}IW(t){e.Me(t);const s=self.ic.Mc(n(t));i(this).EW(s)}get f6(){const t=i(this).RW();return t?t.iO():null}get PW(){return i(this).AW()}set PW(t){i(this).FW(!!t)}get value(){const t=i(this);if("value"!==t.DW())throw new Error("not a value tween");return t.LW("value").OW()}}}self.kW=class extends self.RL{constructor(){super()}};{const Qe=self.Os,th=self.zs,sh=Qe.Ls();self.NW=class extends self.kW{#PL;#qN;#BW=0;#WW=new Map;constructor(t){if(super(),this.#PL=Qe.FL.AL(sh),!t?.domComponentId)throw new Error("no DOM component ID specified");this.#qN=t.domComponentId,this.jW("elem-focused",t=>t.HW()),this.jW("elem-blurred",t=>{t&&t.VW()})}UW(t){const s=this.#BW++;return this.#WW.set(s,t),s}zW(t){this.#WW.delete(t)}jW(t,i){const s=this.#PL.IO();s.h4(this.#qN,t,t=>{const s=this.#WW.get(t.elementId);i(s,t)})}JW(t){th.ke(t);for(const[s,i]of t)this.JW(s,i)}}}{const ih=self.Os,eh=(new WeakMap,ih.Ls());self.qW=class extends self.nk{#PL;constructor(){super(),this.#PL=ih.FL.AL(eh)}$W(){}XW(){return this.#PL.B6().KW()}YW(t){}ZW(t){}QW(){}tj(t){}}}{const hh=self.Os,rh=(new WeakMap,hh.Ls());self.sj=class extends self.YB{#PL;#ij=null;#ej=null;constructor(t){super(t),this.#PL=hh.FL.AL(rh)}bN(){if(super.bN(),this.#ij){const t=this.#PL.IO().Rf();t.removeEventListener("renderercontextlost",this.#ij),t.removeEventListener("renderercontextrestored",this.#ej),this.#ij=null,this.#ej=null}}hj(){if(!this.#ij){this.#ij=()=>this.rj(),this.#ej=()=>this.nj();const t=this.#PL.IO().Rf();t.addEventListener("renderercontextlost",this.#ij),t.addEventListener("renderercontextrestored",this.#ej)}}rj(){}nj(){}oj(t){}}}{const nh=self.Os,oh=nh.ir(nh.Rect),ah=new WeakMap,uh=nh.Ls();self.aj=class extends self.sj{#uj=-1;#lj=!0;#cj=!1;#fj=!1;#dj=-.2;#pj=nh.ir(nh.Rect,0,0,-1,-1);#mj=0;#gj=0;#yj=-1;#wj=-1;#Sj=!1;constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const s=nh.FL.AL(uh),i=(ah.set(this,s),this.#uj=this.ak.UW(this),s.IO().gL());this.#mj=i.bj(),this.#gj=i.vj(),this.XN(!0)}bN(){super.bN(),this.ak.zW(this.#uj),this.Mj("destroy"),this.#uj=-1,ah.delete(this)}Gj(){const t=ah.get(this).IO();if(t.IF())throw new Error("not valid in worker mode");return this.xj("get-element")}Mj(t,s){(s=s||{}).elementId=this.#uj,this.n4(t,s)}xj(t,s){return(s=s||{}).elementId=this.#uj,this.a4(t,s)}Tj(t,s){return(s=s||{}).elementId=this.#uj,this.o4(t,s)}_j(t){t=t||{};const s=ah.get(this).nO();t.elementId=this.#uj,t.isVisible=s.T5(),t.htmlIndex=s.oO().Ij(),t.htmlZIndex=s.Cj(),Object.assign(t,this.Ej()),this.#lj=!!t.isVisible,this.a4("create",t),this.Rj(!0)}Pj(t){this.#lj!==(t=!!t)&&(this.#lj=t,this.Mj("set-visible",{isVisible:t}))}u4(){this.Rj(!1)}Aj(){const t=ah.get(this).IO(),s=t.gL().Fj();return"Android"===nh.ri.ni&&("scale-inner"===s||"scale-outer"===s||"crop"===s)}Rj(l){const c=ah.get(this);if(!c.Dj()){let t=c.nO(),s=t.oO(),i=t.B4(),[e,h]=s.nN(i.fu(),i.du()),[r,n]=s.nN(i.pu(),i.mu()),o=c.IO().gL(),a=o.bL(),u=o.ML();if(t.T5()&&s.T5())if(!this.Aj()&&(r<=0||n<=0||a<=e||u<=h))this.Pj(!1);else{oh.set(e,h,r,n);const f=o.bj(),d=o.vj(),p=s.Ij(),m=t.Cj();if(!l&&oh.equals(this.#pj)&&this.#mj===f&&this.#gj===d&&this.#yj===p&&this.#wj===m)this.Pj(!0);else{this.#pj._(oh),this.#mj=f,this.#gj=d,this.#yj=p,this.#wj=m,this.Pj(!0);let t=null;this.#fj&&(t=s.Oj()+this.#dj),this.Mj("update-position",{left:Math.round(this.#pj.fu()),top:Math.round(this.#pj.du()),width:Math.round(this.#pj.width()),height:Math.round(this.#pj.height()),htmlIndex:p,htmlZIndex:m,fontSize:t})}}else this.Pj(!1)}}Lj(){this.xj("focus",{focus:!0})}kj(){this.xj("focus",{focus:!1})}HW(){this.#cj=!0}VW(){this.#cj=!1}Nj(){return this.#cj}Bj(t,s){this.postToDOMElement("set-css-style",{prop:nh.Ao(t),val:s})}Wj(t,s){this.postToDOMElement("set-attribute",{name:t,val:s})}jj(t){this.postToDOMElement("remove-attribute",{name:t})}Hj(){this.#Sj||(this.#Sj=!0,Promise.resolve().then(()=>{this.#Sj=!1,this.Mj("update-state",this.Ej())}))}Ej(){}Vj(){return this.#uj}}}self.Uj=class extends self.m6{constructor(){super()}};self.zj=class extends globalThis.p6{constructor(){super()}$W(){}};{const lh=self.Os,ch=new WeakMap,fh=lh.Ls();self.Jj=class extends self.n6{#VN=!1;#zN=!1;#qj=!1;constructor(){super(),ch.set(this,lh.FL.AL(fh))}bN(){super.bN(),this.XN(!1),this.KN(!1),this.$j(!1),ch.delete(this)}YN(){return lh.FL.ZN()}Xj(){}QN(t){const s=ch.get(this);s.IO().t4(t,s.d6(),s.c6())}s4(t){const s=ch.get(this);return s.IO().i4(t,s.d6(),s.c6())}XN(t){if(this.#VN!==(t=!!t)){this.#VN=t;const s=ch.get(this).IO();t?s.Kj(this):s.Yj(this)}}l4(){return this.#VN}u4(){}KN(t){if(this.#zN!==(t=!!t)){this.#zN=t;const s=ch.get(this).IO();t?s.Zj(this):s.Qj(this)}}f4(){return this.#zN}c4(){}$j(t){if(this.#qj!==(t=!!t)){this.#qj=t;const s=ch.get(this).IO();t?s.t8(this):s.s8(this)}}i8(){return this.#qj}e8(){}d4(){return[]}m4(){return null}g4(t){}}}{let e=self.zs,h=null;self.NF=class{constructor(t){h=t}wO(t){h.SO(t)}G4(t,s,i){e.Me(t),e.Me(s),e.Ne(i),h.h8(t,s,i)}T4(t,s,i){return e.Me(t),e.Me(s),e.Ne(i),h.r8(t,s,i)}n8(t){return e.Ge(t),new self.o8(h,t)}set a8(t){h.u8(!!t)}get a8(){return h.l8()}c8(t){h.f8(!!t)}d8(t){e.fe(t);const s=h.p8(t);return s?s.ik():null}}}self.o8=class{#m8;#g8;#y8;#w8;#S8;#b8;constructor(t,s){const i=(this.#m8=t).VF(),e=t.XF(),h=(this.#g8=e,this.#y8=e.v8(),t.iD()),r=(this.#w8=h.M8(),this.#S8=h.G8(e),i.x8()),n=r.G8();this.#b8=n,s&&n.T8(s),t._8(!1)}I8(){const t=this.#m8.VF(),s=this.#y8,i=this.#b8;t.C8(s),this.#g8.E8(this.#w8,this.#S8),t.P8(s),i.A8(i.fF()+1)}get F8(){return this.#b8.D8()}release(){const t=this.#m8,s=t.iD(),i=t.VF().x8();t._8(!0),i.O8(),s.O8()}};{let d=self.Os,h=self.zs,p=null,r=null;self.L8=class{constructor(t,s){r=t,p=s}k8(){p.xR()}N8(t){p.MR(t)}B8(){p.Dw()}W8(){p.Cw()}j8(){p.jw()}setColor(t){p.gR(t[0],t[1],t[2],t[3])}H8(t,s,i,e){p.gR(t,s,i,e)}V8(){p.wR()}U8(t){p.yR(t)}z8(t){p.aS(t)}J8(){p.uS()}rect(t){p.IR(t.left,t.top,t.right,t.bottom)}q8(t,s,i,e){p.IR(t,s,i,e)}X8(t){p.Hu(d.Hu.ol(t))}K8(t,s,i,e,h,r,n,o){p.JS(t,s,i,e,h,r,n,o)}Y8(t,s){p.SS(d.Hu.ol(t),d.Rect.yu(s))}Z8(t,s){p.RR(d.Hu.ol(t),d.Hu.ol(s))}Q8(t,s,i,e,h,r,n,o,a,u,l,c,f){p.PR(t,s,i,e,h,r,n,o,a,u,l,c,d.Rect.yu(f))}tH(t,s,i,e,h,r,n,o,a,u,l,c,f){p.pS(t,s,i,e,h,r,n,o,a,u,l,c,d.Hu.ol(f))}sH(t,s,i){p.AR(t,s,i)}iH(t){p.zS(t)}line(t,s,i,e){p.dm(t,s,i,e)}eH(t,s,i,e,h,r){p.mS(t,s,i,e,h,r)}hH(t,s,i,e){p.bS(t,s,i,e)}rH(t){p.xS(d.Rect.yu(t))}nH(t){p.TS(d.Hu.ol(t))}oH(t){p.PS(t)}aH(){p.AS()}uH(t){p.LS(t)}lH(){p.WS()}cH(t){h.Qe(t,self.fH);const s=t?r.t5(t):null;p.bR(s)}dH(t,s){const i=self.TO.xO(t);if(i)return i.pH(p,{t2:s?.t2??"clamp-to-edge",s2:s?.s2??"clamp-to-edge",i2:s?.i2??"trilinear",n2:s?.n2??!0});throw new Error("invalid IImageInfo")}mH(t){const s=self.TO.xO(t);if(!s)throw new Error("invalid IImageInfo");s.oI()}L6(t){const s=self.TO.xO(t);if(!s)throw new Error("invalid IImageInfo");const i=s.vM();return self.fH.gH(r,i)}yH(t,s,i){h.ye(t),h.ye(s);const e=p.cM(t,s,{t2:i?.t2??"clamp-to-edge",s2:i?.s2??"clamp-to-edge",i2:i?.i2??"trilinear",n2:i?.n2??!0});return self.fH.gH(r,e)}wH(t,s,i){h.Ze(s,self.fH);const e=r.t5(s);p.gC(t,e,{premultiplyAlpha:i?.premultiplyAlpha??!0})}deleteTexture(t){h.Ze(t,self.fH);const s=r.t5(t);p.mM(s)}SH(){const t=p.ob();return new self.bH(r,t)}vH(){r.gL().MH(p)}GH(t){h.Ze(t,globalThis.Qk);const s=r.t5(t);s.xH(p)}}}{const dh=new WeakMap,ph=new WeakMap;self.fH=class{constructor(t,s){dh.set(this,{runtime:t,TH:s}),ph.set(s,this),t.lk(this,s),Object.defineProperties(this,{width:{value:s.Xp(),writable:!1},height:{value:s.om(),writable:!1}})}static gH(t,s){if(!s)return null;const i=ph.get(s);return i||new self.fH(t,s)}}}{let e=function(t){return gh.get(t)._H};e;const mh=self.zs,gh=new WeakMap;self.bH=class{constructor(t,s){gh.set(this,{runtime:t,_H:s}),t.lk(this,s)}release(){e(this).er()}set IH(t){mh.Me(t),e(this).mI(t)}get IH(){return e(this).y_()}set CH(t){mh.ye(t),e(this).gI(t)}get CH(){return e(this).yI()}set lineHeight(t){mh.ye(t),e(this).SI(t)}get lineHeight(){return e(this).bI()}set EH(t){e(this).vI(t)}get EH(){return e(this).MI()}set RH(t){e(this).GI(t)}get RH(){return e(this).xI()}setColor(t){mh.ke(t),this.PH(t[0],t[1],t[2])}PH(t,s,i){e(this).EI(t,s,i)}AH(t){mh.Me(t),e(this).Ub(t)}set FH(t){e(this).RI(t)}get FH(){return e(this).AI()}set verticalAlign(t){e(this).FI(t)}get verticalAlign(){return e(this).DI()}set DH(t){e(this).OI(t)}get DH(){return e(this).LI()}set OH(t){e(this).kI(t)}get OH(){return e(this).NI()}set text(t){mh.Me(t),e(this).Zc(t)}get text(){return e(this).BI()}kk(t,s,i){mh.ye(t),mh.ye(s),mh.ye(i),e(this).WI(t,s,i)}O6(){const{runtime:t,_H:s}=gh.get(this),i=s.vM();return self.fH.gH(t,i)}k6(){return e(this).yC().gu()}LH(t){mh.Ue(t),e(this).uI=t}kH(){e(this).oI()}get NH(){return e(this).HI()}get BH(){return e(this).UI()}}}{let e=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return wh.get(i)||""},r=function(e){return new Promise((t,s)=>{const i=document.createElement("script");i.onload=t,i.onerror=s,i.async=!1,i.type="module",i.src=e,document.head.appendChild(i)})};e,r;const g=self.Os,yh=new Set(["local","remote"]),wh=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);g.WH=class extends g.Qh{constructor(t,s){super();const i=s.exportType,e=(this.$c=t,this.jH="folders",this.HH=new Map,this.VH="cordova"===i,this.UH=!!s.isiOSCordova,this.zH=!!s.isFileProtocol,this.JH=s.swClientId,this.qH=s.supportedAudioFormats||{},this.$H=new Map,this.XH=!1,this.KH=s.scriptFolder,this.YH="",this.ZH="",this.QH="",this.tV=s.fileMap||new Map,this.sV=new Map,"html5"===i||"scirra-arcade"===i||"instant-games"===i);this.iV=e?"remote":"local",this.eV=new Map,this.hV=[],this.rV=[],this.nV=!1,this.oV=0,this.aV=0,this.uV=0,this.lV=!1,this.cV=g.ir(g.l1,()=>this.fV(),50),this.dV=g.ir(g.t1,Math.max(g.hardwareConcurrency,8)),this.pV=g.ir(g.t1,20),this.mV=new self.bO(this)}er(){for(const t of this.eV.values())t.er();this.eV.clear(),g.Pn(this.rV),this.$c=null}IO(){return this.$c}gV(t){this.jH=t}OO(){return this.jH}yV(){return this.KH}wV(t){this.YH=t}NO(){return this.YH}SV(t){this.ZH=t}bV(){return this.ZH}vV(t){this.QH=t}MV(){return this.QH}GV(){return this.zH}mo(t,s){return s=s||this.iV,g.lo(t)?("flat"===this.jH&&(t=t.toLowerCase()),this.VH&&this.zH?this.xV(t):"playable-ad-single-file"===this.$c.fL()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===s?this.dV:this.pV).Ql(()=>g.mo(t))):g.mo(t)}yo(t){return g.lo(t)?("flat"===this.jH&&(t=t.toLowerCase()),this.VH&&this.zH?this.TV(t):"playable-ad-single-file"===this.$c.fL()?g.So(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.iV?this.dV:this.pV).Ql(()=>g.yo(t))):g.yo(t)}do(t){return g.lo(t)?("flat"===this.jH&&(t=t.toLowerCase()),this.VH&&this.zH?this._V(t):"playable-ad-single-file"===this.$c.fL()?g.bo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.iV?this.dV:this.pV).Ql(()=>g.do(t))):g.do(t)}async po(t){const s=await this.do(t);return JSON.parse(s)}IV(t,s){return"flat"===this.jH&&(t=t.toLowerCase()),this.$c.mO("runtime","cordova-fetch-local-file",{filename:t,as:s})}_V(t){return this.IV(t,"text")}async xV(t){const s=await this.IV(t,"buffer"),i=e(t);return new Blob([s],{type:i})}async CV(t){"flat"===this.jH&&(t=t.toLowerCase());let s=this.HH.get(t);if(!s){const i=await this.xV(t);s=URL.createObjectURL(i),this.HH.set(t,s)}return s}TV(t){return this.IV(t,"buffer")}LO(t){"flat"===this.jH&&(t=t.toLowerCase());let s=this.YH+t;return"Gecko"===g.ri.fi&&"preview"===this.$c.fL()?this.EV(s):s}FO(t){return g.uo(t)?Promise.resolve(t):this.VH&&this.zH?this.CV(t):"playable-ad-single-file"===this.$c.fL()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.jH&&(t=t.toLowerCase()),Promise.resolve(t))}RV(s){if(g.uo(s)||"preview"!==this.$c.fL()||!this.JH||!s)return s;try{const t=new URL(s,location.href);return t.searchParams.set("__c3_client_id",this.JH),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+s),s}}PV(t){return this.FO(t)}AV(t){if(t.FV&&!yh.has(t.FV))throw new Error("invalid load policy");let s=this.eV.get(t.url);return s||(s=g.ir(g.DV,this,{url:t.url,size:t.size||0,FV:t.FV||this.iV}),this.eV.set(s.OV(),s),this.nV)||(this.oV+=s.ql(),this.rV.push(s.LV().then(()=>this.kV(s.ql())))),s}NV(t){this.eV.delete(t.OV())}async BV(){try{await Promise.all(this.rV),this.uV=1}catch(t){console.error("Error loading: ",t),this.lV=!0,this.fV()}}WV(){this.nV=!0}jV(){return this.lV}kV(t){this.aV+=t,this.cV.T1()}fV(){const t=g.ir(g.Event,"loadingprogress");this.uV=g.lr(this.aV/this.oV,0,1),t.progress=this.uV,this.$c.Rf().dispatchEvent(t)}HV(){return this.uV}VV(t){g.On(this.hV,t),this.hV.length&&this.rV.push(this.UV())}async UV(){const t=[],s=[];for(const[i,e,h]of this.hV)this.oV+=h,t.push(this.zV(i,e,s).then(()=>this.kV(h)));await Promise.all(t),this.$c.IF()&&0<s.length&&await this.$c.mO("runtime","load-webfonts",{webfonts:s})}async zV(s,i,e){try{let t=await this.FO(i);"Gecko"===g.ri.fi&&(s=`'${s}'`),("Gecko"===g.ri.fi&&"preview"===this.$c.fL()||"playable-ad-single-file"===this.$c.fL())&&(t=this.EV(t));const h=new FontFace(s,`url('${t}')`);(this.$c.IF()?self:document).fonts.add(h),await h.load(),this.$c.IF()&&e.push({name:s,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${s}': `,t)}}MO(t){return!!this.qH[t]}JV(t,s){this.XH=!!s;for(const[i,e,h]of t)this.$H.set(i,{fileName:i,qV:e.map(t=>({type:t[0],$V:t[1],XV:i+t[1],fileSize:t[2]})),KV:h})}YV(t){"flat"===this.jH&&(t=t.toLowerCase());const s=this.$H.get(t);if(!s)return null;let i=null;for(const e of s.qV)if(i||"audio/webm; codecs=opus"!==e.type||(i=e),this.MO(e.type))return e;return i}ZV(t){const s=this.YV(t);return s?{url:this.LO(s.XV),type:s.type}:null}QV(){if(this.XH){const t=[];for(const s of this.$H.values())if(!s.KV){const i=this.YV(s.fileName);i&&t.push({t7:s.fileName,url:this.LO(i.XV),type:i.type,fileSize:i.fileSize})}return t}return[]}s7(t){return"preview"===this.$c.fL()&&(t=new URL(t,location.href).toString()),this.tV.get(t)||null}EV(t){let s=this.sV.get(t);if(!s){const i=this.s7(t);if(!i)return t;s=URL.createObjectURL(i),this.sV.set(t,s)}return s}mF(){return this.mV}async HO(...t){const s=await Promise.all(t.map(t=>this.FO(t)));if(this.$c.IF())if(1===t.length){const i=t[0];await import((g.lo(i)?"./":"")+i)}else{const e=t.map(t=>`import "${g.lo(t)?"./":""}${t}";`).join("\n"),h=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));await import(h)}else await Promise.all(s.map(t=>r(t)))}async UO(t){if(WebAssembly.compileStreaming){const s=await this.FO(t);return WebAssembly.compileStreaming(fetch(s))}{const i=await g.yo(t);return WebAssembly.compile(i)}}async JO(t){const s=await this.FO(t);return this.$c.mO("runtime","add-stylesheet",{url:s})}}}{const Sh=self.Os;Sh.i7=class extends Sh.Qh{constructor(t,s){super(),this.e7=t,this.$c=t.IO(),this.h7=s.url||"",this.r7=s.size,this.n7=s.FV,this.o7=s.blob||null,this.a7=!!this.o7,this._g=null}er(){this._g=null,this.e7=null,this.$c=null,this.o7=null}OV(){return this.h7}ql(){return this.r7}LV(){return"local"===this.n7||this.o7?(this.a7=!0,Promise.resolve()):(this._g||(this._g=this.e7.mo(this.h7,this.n7).then(t=>(this.a7=!0,this._g=null,this.o7=t)).catch(t=>{console.error("Error loading resource: ",t),this._g=null})),this._g)}u7(){return this.a7}l7(){return this.o7?Promise.resolve(this.o7):this._g||this.e7.mo(this.h7,this.n7)}}}{const bh=self.Os,ar=new bh.t1,ur=new Set;bh.DV=class extends bh.i7{constructor(t,s){super(t,s),this.c7=null,this.f7=null,this.rd=0,this.d7=-1,this.p7=-1,ur.add(this)}er(){if(0!==this.rd)throw new Error("released image asset which still has texture references");this.e7.NV(this),this.c7=null,ur.delete(this),super.er()}static m7(){for(const t of ur)t.c7=null,t.f7=null,t.rd=0}pH(t,s){return s=s||{},this.rd++,this.f7?Promise.resolve(this.f7):(this.c7||(s.e2=this.$c.gL().g7(),this.c7=this.y7(t,s)),this.c7)}async y7(s,i){try{const e=await this.l7();return 0===this.rd?this.c7=null:await ar.Ql(async()=>{const t=await s.hP(e,i);return this.c7=null,0===this.rd?(s.mM(t),null):(this.f7=t,this.d7=t.Xp(),this.p7=t.om(),this.f7)})}catch(t){throw console.error("Failed to load texture: ",t),t}}oI(){if(this.rd<=0)throw new Error("texture released too many times");if(this.rd--,0===this.rd&&this.f7){const t=this.f7.Gb();t.mM(this.f7),this.f7=null}}w7(){return this.rd}vM(){return this.f7}Xp(){return this.d7}om(){return this.p7}async S7(){const t=await this.l7();return bh.ki.ImageBitmap?createImageBitmap(t):bh.Mo(t)}}}{let t=function(t,s){return t.nO().b7()-s.nO().b7()};t;const lr=self.Os;lr.v7=class extends lr.Qh{constructor(t,s,i){super(),this.M7=t,this.Va=s,this.Ua=i,this.G7=[],this.x7=!0,this.T7=new Set,this._7=!1}er(){lr.Pn(this.G7),this.T7.clear(),this.M7=null}Yf(){lr.Pn(this.G7),this.x7=!0,this.T7.clear(),this._7=!1}I7(){this.x7=!1}Ul(){if(this.G7.length){if(this.G7.length>this.T7.size)return!1;this.C7()}return!0}E7(t){this.T7.has(t)?(this.T7.delete(t),0===this.T7.size&&(this._7=!1)):(this.G7.push(t),this.x7=1===this.G7.length)}u0(t){this.T7.add(t),this._7=!0,50<=this.T7.size&&this.C7()}C7(){this._7&&(this.G7.length===this.T7.size?this.Yf():(lr.Wn(this.G7,this.T7),this.T7.clear(),this._7=!1))}R7(){this.x7||(this.G7.sort(t),this.x7=!0)}P7(t){this.C7(),this.R7(),this.G7.length&&t.push(this.G7)}}}{const cr=self.Os;cr.A7=class extends cr.Qh{constructor(t,s){super(),this.F7=t,this.D7=s,this.O7=cr.ir(cr.jl)}er(){this.O7.er(),this.O7=null}L7(t,s,i){let e=this.O7.Qs(t,s);return e||(i?(e=cr.ir(cr.v7,this,t,s),this.O7.Set(t,s,e),e):null)}k7(t){return Math.floor(t/this.F7)}N7(t){return Math.floor(t/this.D7)}B7(e,h,r){if(h)for(let i=h.fu(),t=h.pu();i<=t;++i)for(let t=h.du(),s=h.mu();t<=s;++t)if(!r||!r.Nu(i,t)){const n=this.L7(i,t,!1);n&&(n.u0(e),n.Ul())&&this.O7.zl(i,t)}if(r)for(let i=r.fu(),t=r.pu();i<=t;++i)for(let t=r.du(),s=r.mu();t<=s;++t)h&&h.Nu(i,t)||this.L7(i,t,!0).E7(e)}W7(t,s){let i=this.k7(t.fu()),e=this.N7(t.du()),h=this.k7(t.pu()),r=this.N7(t.mu());for(;i<=h;++i)for(let t=e;t<=r;++t){const n=this.L7(i,t,!1);n&&n.P7(s)}}j7(t){let s=t.fu(),i=t.du(),e=t.pu(),h=t.mu();for(;s<=e;++s)for(let t=i;t<=h;++t){const r=this.L7(s,t,!1);r&&r.I7()}}}}{let n=function(t,s){return t.nO().b7()-s.nO().b7()},t=function(t,s){return t.nO().ov()-s.nO().ov()};n,t;const S=self.Os,fr=new S.Rect,dr=new S.Hu,pr=[],mr=(new S.Rect,new S.Rect,self.ws),xh=mr._s,Hh=mr.Is,Gh=mr.Ms,gr=Gh.create(),yr=xh.create(),wr=Hh.create(),Sr=xh.create(),br=xh.create(),vr=xh.create(),Mr=S.ir(S.Ha),Gr=(S.ir(S.Rect),[]),xr=[],Tr=[],_r={name:"",sid:-1,H7:!1,isVisible:!0,isInteractive:!0,C5:!1,backgroundColor:[1,1,1,1],V5:!0,V7:[1,1],opacity:1,J5:!1,U7:!1,z7:!1,J7:!1,scaleRate:1,o3:0,H5:0,q7:[],X7:[],K7:[]};S.Y7=class extends S.Qh{constructor(t,s,i){super(),i=Object.assign({},_r,i),this.Z7=t,this.$c=t.IO(),this.Q7=s,this.nr=i.name,this.Lg=-1,this.tU=!!i.C5,this.sU=-1,this.iU=i.sid,this.eU=!!i.H7,this.hU=!!i.isVisible,this.rU=!!i.isInteractive,this.nU=S.ir(S.Oo),this.nU.Aa(i.backgroundColor),this.oU=!!i.V5,this.aU=i.V7[0],this.uU=i.V7[1],this.Wb=S.ir(S.Oo,1,1,1,i.opacity),this.lU=S.ir(S.Oo),this.cU=!!i.J5,this.fU=!!i.U7,this.dU=!!i.z7,this.pU=!!i.J7,this.mU=i.scaleRate,this.Bb=i.o3,this.gU=null,this.yU=1,this.jb=i.H5,this.wU=0,this.SU=0,this.bU=0,this.vU=!1,this.iE=S.ir(S.Rect),this.MU=S.ir(S.Rect),this.GU=S.ir(S.Rect),this.xU=!0,this.rM=Gh.create(),this.TU=!0,this.qA=Gh.create(),this._U=!0,this.IU=S.ir(S.Vg.qg),this.CU=!0,this.EU=[],this.RU=i.q7,this.PU=[],this.AU=[],this.FU=new Map,this.G7=[],this.DU=!1,this.OU=!1,this.LU=!1;const h=this.$c.gL();this.kU=S.ir(S.NU,this,i.X7),this.aF=S.ir(S.Vg.hA,h.BU(),{qP:(t,s)=>{const i=s.tF(),e=i.tP();t.Ub(i.WU()),t.aP(e),t.uP(e),h.jU(e)},XP:t=>this.Fk().HU(t)}),this.VU=!0,this.UU=!0,this.zU=null,this.JU=[],this.qU=!1,this.$U=S.ir(S.Rect,0,0,-1,-1),this.XU=S.ir(S.Rect,0,0,-1,-1),this.KU=new self.Qk(this),this.YU(),this.ZU()&&(this.zU=S.ir(S.A7,this.$c.EF(),this.$c.PF())),this.QU=i.K7.map(t=>S.Y7.sz(this.Z7,this,t))}iz(){for(const t of this.RU){const s=this.$c.ez(t[1]);this.Z7.hz(s),s.rz()||(s.nz(t),s.oz(this.Lg)),this.PU.push(t),this.FU.set(t[2],t)}S.On(this.EU,this.PU),this.RU=null}static sz(t,s,i){return S.ir(S.Y7,t,s,{name:i[0],sid:i[2],isVisible:i[3],isInteractive:i[13],C5:i[19],backgroundColor:i[4].map(t=>t/255),V5:i[5],V7:[i[6],i[7]],opacity:i[8],J5:i[9],U7:i[17],z7:i[18],J7:i[10],scaleRate:i[11],o3:i[12],H5:i[16],q7:i[14],X7:i[15],K7:i[20]})}er(){for(const t of this.QU)t.er();S.Pn(this.QU);for(const s of this.G7)this.$c.MN(s);S.Pn(this.G7),this.kU.er(),this.kU=null,this.aF.er(),this.aF=null,this.KU=null,this.Q7=null,this.Z7=null,this.$c=null}az(t){return this.FU.get(t)}uz(h){let r=this.Z7.lz(),n=0,o=this.PU;for(let e=0,t=o.length;e<t;++e){let t=o[e],s=this.$c.ez(t[1]),i=!0;if(!s.cz()||r){const a=this.$c.fz(t,this,!0);h.push(a),s.dz()&&(i=!1,this.AU.push(a.EN()))}i&&(o[n]=o[e],++n)}S.Rn(o,n),this.$c.Pk(),this.fO()}pz(t,s){if(!t.uk().NL())throw new Error("instance is not of world type");const i=t.nO();if(i.oO()!==this)throw new Error("instance added to wrong layer");this.G7.push(t),0!==i.ov()&&(this.LU=!0),s&&this.ZU()&&t.nO().R4(),this.fO(t)}mz(t){this.G7.includes(t)||(this.G7.push(t),0!==t.nO().ov()&&(this.LU=!0),this.fO(t))}gz(t,s){const i=t.nO();if(i.oO()!==this)throw new Error("instance added to wrong layer");this.G7.unshift(t),0!==i.ov()&&(this.LU=!0),this.fO(t),s&&this.ZU()&&t.nO().R4()}yz(t,s){const i=this.G7.indexOf(t);i<0||(s&&this.ZU()&&t.nO().wz(),this.G7.splice(i,1),this.fO(t),this.Sz())}bz(){this.LU=!0}Sz(){0===this.G7.length&&(this.LU=!1)}vz(t){if(t){const s=new Set;for(const i of this.G7){const e=i.nO().b7();0<=e&&s.add(e)}let t=-1;for(const h of this.G7){const r=h.nO();if(!(0<=r.b7())){for(++t;s.has(t);)++t;r.Mz(t)}}}this.G7.sort(n)}Gz(){}xz(){for(const t of this.G7)t.mN().dz()||this.$c.MN(t);this.$c.Pk(),S.Pn(this.G7),this.LU=!1,this.fO()}Tz(s,t,i,e,h,r){const n=this.$c.VF(),o=this.$c._z(),a=s.Iz(),u=[];for(const l of this.PU){const c=l[0],f=c[0],d=c[1];if(t.Nu(f,d)){const p=o[l[1]];if(p!==s){if(!a)continue;if(!s.Cz(p))continue}let t=h;if(!t){const y=this.$c.hO();t=this.HD()===y?this:(t=y.Ez(this.Wc()))||y.uO(this.fF())}const m=this.$c.fz(l,t,!1,void 0,void 0,!1,r),g=(t._k(m),m.nO());g.D4(i,e),g.R4(),n.Ik(!0),m.Ck(),n.Ik(!1),u.push(m)}}return u}Gk(){return this.G7.length}HD(){return this.Z7}Wc(){return this.nr}Rz(t){this.Lg=t}fF(){return this.Lg}Pz(t){this.sU=t}Ij(){return this.sU}E5(){return this.tU}R5(t){this.tU!==(t=!!t)&&(this.tU=t,this.Z7.Az(),this.$c.dO())}Fz(){let t=this.g5();return(t?t.S5():this.HD().Dz()).indexOf(this)}Oz(){return this.iU}IO(){return this.$c}Lz(){return this.eU}kz(){for(const t of this.y5())if(t.Lz())return!0;return!1}IL(){return this.$c.IL()}Fk(){return this.kU}cF(){return this.Nz(),this.aF}Nz(){const t=this.Bz();if(this.VU||t!==this.UU||this.aF.$A()){const s=this.Fk().Wz();this.aF.XA(s.map(t=>t.jG()),{YP:s.map(t=>t.fF()),ZP:!t,eA:!0}),this.VU=!1,this.UU=t}}S6(){this.Fk().S6(),this.VU=!0}ZU(){return this.pU&&!this.dU}jz(){return this.zU}Vz(){this.qU=!1}T5(){for(const t of this.Uz())if(!t.M5())return!1;return!0}M5(){return this.hU}G5(t){this.hU!==(t=!!t)&&(this.hU=t,this.$c.dO())}I5(t){this.rU=!!t}_5(){return this.rU}A5(){for(const t of this.Uz())if(!t._5())return!1;return!0}Z5(t){if(this.vU!==(t=!!t)){if(this.vU=t){const s=this.HD();this.SU=s.Vk(),this.bU=s.zk()}this.zz(),this.$c.dO()}}Jz(){return this.vU}Hk(t){const s=this.HD(),i=s.qz(),e=s.$z();this.SU!==(t=(t=e<t?e:t)<i?i:t)&&(this.SU=t,this.Jz())&&(this.zz(),this.$c.dO())}Uk(t){const s=this.HD(),i=s.Xz(),e=s.Kz();this.bU!==(t=(t=e<t?e:t)<i?i:t)&&(this.bU=t,this.Jz())&&(this.zz(),this.$c.dO())}Vk(){return this.Jz()?this.SU:this.HD().Vk()}zk(){return this.Jz()?this.bU:this.HD().zk()}tN(){return this.Yz(),this.iE}Zz(){return this.Yz(),this.MU}Qz(){return this.Yz(),this.GU}c5(){const t=this.HD();return[t.t9(),t.s9()]}ew(t){return this.$c.ew(t)}i9(c,e){const h=this.Zz();if(0===c)e._(h);else{let o=h.bu(),a=h.vu(),t=this.e9(c),s=h.width()/t,i=h.height()/t,[u,l]=this.c5();if(.5!==u||.5!==l){let t=this.h9(),s=this.$c,i=this.ew()/t,e=(u-.5)*s.r9()/i,h=(l-.5)*s.n9()/i,r=this.jk(),n=(0!==r&&(Mr.set(e,h),Mr.rotate(r),e=Mr.qa(),h=Mr.Xa()),S._r(t,0,c));o+=S.Dt(e,0,n),a+=S.Dt(h,0,n)}e.set(o-s/2,a-i/2,o+s/2,a+i/2)}}mR(){return this.Wb.Zo()}yR(t){t=S.lr(t,0,1),this.Wb.Zo()!==t&&(this.Wb.qo(t),this.YU(),this.$c.dO())}YU(){this.lU._(this.Wb),this.lU.la()}WU(){return this.lU}Bz(){return this.Wb.na(1,1,1,1)}L5(){return this.mU}O5(t){this.mU!==t&&(this.mU=t,this.zz(),this.$c.dO())}B5(){return this.aU}j5(){return this.uU}o9(t,s){this.aU===t&&this.uU===s||(this.aU=t,this.uU=s,this.zz(),this.$c.dO())}N5(t){this.o9(t,this.j5())}W5(t){this.o9(this.B5(),t)}av(t){this.jb!==t&&(this.jb=t,this.$c.dO())}ov(){return this.jb}Wk(t){t=S.cr(t),this.wU!==t&&(this.wU=t,this.zz(),this.$c.dO())}jk(){return S.cr(this.Z7.jk()+this.wU)}k5(){return this.wU}a9(){return 0<this.G7.length}lO(){return this.G7}u9(){return this.l9()&&this.dU?(S.On(Tr,this.lO()),Tr.sort((t,s)=>this.c9(t,s)),Tr):this.lO()}f9(t){S.Uh(t,this.u9());for(const s of this.QU)s.T5()&&0<s.mR()&&s.f9(t)}c9(t,s){const i=this.HD().d9(),e=i[0],h=i[1],r=i[2],n=t.nO(),o=s.nO(),a=n.tv()-e,u=n.rv()-h,l=n.ov()-r,c=o.tv()-e,f=o.rv()-h,d=o.ov()-r;return c*c+f*f+d*d-(a*a+u*u+l*l)}Y5(){return this.nU}z5(){return this.oU}U5(t){this.oU!==(t=!!t)&&(this.oU=t,this.$c.dO())}X5(){return this.cU}q5(t){this.cU!==(t=!!t)&&(this.cU=t,this.$c.dO())}p9(){return!this.IO().m9()||!this.fU}l9(){return!this.p9()}g9(){return this.l9()&&this.HD().y9()}w9(){if(!this.g9())return!1;for(const t of this.QU)if(!t.w9())return!1;return!0}Vb(t){this.Bb!==t&&(this.Bb=t,this.$c.dO())}K5(){return this.Bb}S9(){return!this.Q7}g5(){return this.Q7}b9(t){this.Q7=t}S5(){return this.QU}v9(){return 0<this.QU.length}M9(t,s=!0){s?this.QU.push(t):this.QU.unshift(t)}G9(t,s,i){let e=this.QU.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.QU.splice(e,0,t)}x9(t){const s=this.QU.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.QU.splice(s,1)}T9(){for(const t of this.QU)if(t._9())return!0;return!1}*v5(){for(const t of this.QU)yield*t.v5();yield this}*y5(){let t=this.g5();for(;t;)yield t,t=t.g5()}*Uz(){yield this,yield*this.y5()}I9(t){for(const s of this.y5())if(s===t)return!0;return!1}C9(t){return this===t||this.aU===t.aU&&this.uU===t.uU&&this.yU===t.yU&&this.mU===t.mU&&this.wU===t.wU&&this.Vk()===t.Vk()&&this.zk()===t.zk()}E9(){return{parallaxX:this.B5(),parallaxY:this.j5(),scale:this.D5(),scaleRate:this.L5(),angle:this.k5(),hasOwnScroll:this.Jz(),scrollX:this.Vk(),scrollY:this.zk()}}R9(t){this.o9(t.parallaxX,t.parallaxY),this.F5(t.scale),this.O5(t.scaleRate),this.Wk(t.angle),this.Z5(t.hasOwnScroll),this.Hk(t.scrollX),this.Uk(t.scrollY),this.Yz()}P9(t){if(0!==t.size){const s=S.Wn(this.G7,t);0<s&&(this.Sz(),this.fO())}}fO(t){this.DU=!1,this.qU=!1,t&&!t.mN().uk().WL()||(this.OU=!1)}A9(){if(!this.DU){if(this.G7.sort(t),this.ZU())for(let t=0,s=this.G7.length;t<s;++t){const i=this.G7[t].nO();i.Mz(t),this.zU.j7(i.F9())}else for(let t=0,s=this.G7.length;t<s;++t)this.G7[t].nO().Mz(t);this.DU=!0}}D9(){if(!this.OU){let t=this.Z7.O9(this.Ij()),s=t.map(t=>[...t.v5()]).flat(),i=0;for(const e of s){for(const h of e.lO())h.mN().uk().WL()&&h.nO().L9(i++);e.k9()}}}k9(){this.OU=!0}N9(){return{isVisible:this.T5(),opacity:this.mR(),isInteractive:this._5()}}B9(t,s,i){const e=t.nO(),h=s.nO();if(e.oO()!==this||h.oO()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let r=e.aO(),n=h.aO();return r!==n+(i?1:-1)&&(S.Ln(this.G7,r),r<n&&n--,i&&n++,n===this.G7.length?this.G7.push(t):this.G7.splice(n,0,t),this.fO(t),!0)}W9(t,s){let i=[],e=0,h=0,r=t.length,n=s.length;for(;e<r&&h<n;){const o=t[e],a=s[h];o.nO().b7()<a.nO().b7()?(i.push(o),++e):(i.push(a),++h)}for(;e<r;++e)i.push(t[e]);for(;h<n;++h)i.push(s[h]);return i}j9(s){const i=[],e=s.length;for(let t=0;t<e-1;t+=2){const h=s[t],r=s[t+1];i.push(this.W9(h,r))}return e%2==1&&i.push(s[e-1]),i}H9(t){for(;1<t.length;)t=this.j9(t);return t[0]}V9(){return this.A9(),S.Pn(pr),this.zU.W7(this.tN(),pr),pr.length?1===pr.length?pr[0]:this.H9(pr):[]}_9(){return this.T5()&&0<this.mR()&&this.U9()}U9(){if(this.a9()||!this.z5())return!0;for(const t of this.QU)if(t.U9())return!0;return!1}z9(){return this.X5()||!this.Bz()||0!==this.K5()||this.kU.J9()}q9(){if(this.z9())return!0;for(const t of this.QU)if(t.q9())return!0;return!1}tP(){return this.gU}e9(t){if(this.Z7.p5())return 1;{const s=this.X9();return s/(s-t)}}K9(t){const s=this.$c.fN();if(this.Z7.p5())return s;{const i=this.X9(),e=this.ew();return e/Math.abs(i-t)*s}}zz(){this._U=!0,this.CU=!0,this.xU=!0}Y9(t){return this._U&&(this.Z9(t,this.qA,0,0,null),this._U=!1),this.qA}h9(t){return this.ew(t)/this.Q9()}X9(){return this.g9()?this.HD().d9()[2]:this.h9()}tJ(){if(this.g9()){const t=this.HD().d9();return[t[0],t[1],t[2]]}return this.sJ()}sJ(t=0,s=0,h=0){let r=this.$c,i=this.HD(),e=r.iJ(),n=r.eJ(),o=(this.Vk()-e)*this.aU+e,a=(this.zk()-n)*this.uU+n,u=(r.DF()&&(o=Math.round(o),a=Math.round(a)),o+t),l=a+s,c=i.p5()?this.ew(h):this.h9(h),[f,d]=this.c5();if(.5!==f||.5!==d){let t=this.ew(h)/c,s=(f-.5)*r.r9()/t,i=(d-.5)*r.n9()/t,e=this.jk();0!==e&&(Mr.set(s,i),Mr.rotate(e),s=Mr.qa(),i=Mr.Xa()),u+=s,l+=i}return[u,l,c]}Z9(t,s,i,e,h){const r=this.$c,n=this.HD();if(this.g9()){xh._(Sr,n.d9()),xh._(br,n.hJ()),xh._(vr,n.rJ());const o=r.iJ(),a=r.eJ(),u=br[0]-Sr[0],l=br[1]-Sr[1],c=br[2]-Sr[2];Sr[0]=(Sr[0]-o)*this.aU+o,Sr[1]=(Sr[1]-a)*this.uU+a,Sr[2]*=Math.max(this.aU,this.uU),br[0]=Sr[0]+u,br[1]=Sr[1]+l,br[2]=Sr[2]+c}else{const[f,d,p]=this.sJ(i,e,h),m=(xh.set(Sr,f,d,p),xh.set(br,f,d,p-100),this.jk());0===m?xh.set(vr,0,1,0):xh.set(vr,Math.sin(m),Math.cos(m),0)}t.Mw(s,Sr,br,vr,h||r.n9())}nJ(){this.TU=!0,this.CU=!0,this.xU=!0}oJ(t){return this.TU&&(this.aJ(t),this.TU=!1),this.rM}aJ(t){const s=this.$c.gL(),[i,e]=this.c5();if(this.Z7.p5())t.bw(this.rM,s.uJ(),s.lJ());else if(.5===i&&.5===e)Gh._(this.rM,s.cJ());else{const h=s.uJ(),r=s.lJ();t.ww(this.rM,h/r,i,e)}}xH(t,s=!0,i=0,e=0,h=0){s&&t.hR(this.oJ(t));let r;r=0===i&&0===e&&0===h?this.Y9(t):(this.Z9(t,gr,i,e,h),gr),t.lR(r)}fJ(t){this.xH(t),t.nS(this.ov())}dJ(t){let s=null;if(t.ib()&&this.$c.pJ()){const i=this.$c.gL().mJ(this);i&&(s=i.VC(),t.mP(s))}return s}gJ(t){if(t.Sw()&&this.$c.pJ()){const s=2*(this.fF()+1);t.StartMeasuringRenderPassTime(s,1+s)}}zv(t,s,i){let e=this.$c.gL(),h=this.z9(),r=null,n=this.dJ(t);if(this.gJ(t),h){const o={i2:this.$c.AF(),J2:!0,yJ:!!t.Sw()&&this.$c.wJ()};"low"===e.SJ()&&(o.width=e.uJ(),o.height=e.lJ()),r=this.$c.bJ(o),this.gU=r,t.nP(r),this.z5()&&t.JR(0,0,0,0)}else this.gU=s,t.nP(s);if(this.z5()||t.Vl(this.nU),this.Z7.vJ(t,this.gU,this.QU,h&&this.z5()),this.gJ(t),this.xH(t),t.nS(this.ov()),t.KR(this.l9()),this.Q9()>Number.EPSILON){this.A9();const a=this.ZU()&&0===this.ov()&&!this.LU;this.g9()?this.MJ(t):a?this.GJ(t):this.xJ(t,this.u9())}t.nS(0),t.aS(0),h&&(t.KR(!1),this.TJ(t,r,s,i)),n&&t.yP(n),this.gU=null}xJ(i,e){let h=this.tN(),r=this.gU,n=this.HD().p5(),o=this.HD()._J(),a=null;for(let t=0,s=e.length;t<s;++t){const u=e[t];if(u!==a){const l=(a=u).nO();l.T5()&&l.IJ(h,o,n)&&this.CJ(u,l,i,r)}}}MJ(e){const h=this.gU,r=this.EJ(),n=Gr,o=xr,a=this.u9();for(let s=0,i=a.length;s<i;){const u=a[s],l=u.nO();if(l.T5()&&l.RJ(r)){(!u.PJ()||0<l.AJ())&&o.push(u);const c=u.nO().L4();n.push(u);let t=s+1;for(;t<i;++t){const f=a[t],d=f.nO();if(d.T5()&&d.RJ(r)){if(d.L4()!==c)break;(f.PJ()?(0<d.AJ()&&o.push(f),n):o).push(f)}}if(1!==n.length||n[0].FJ()){this.DJ(e,n);for(let t=0,s=o.length;t<s;++t){const p=o[t],m=p.nO();m.OJ(!0),this.CJ(p,m,e,h),m.OJ(!1)}}else{this.CJ(u,l,e,h);for(let t=0,s=o.length;t<s;++t){const g=o[t];if(g!==u){const y=g.nO(),w=y.oO();w.CJ(g,y,e,h)}}}s=t,S.Pn(n),S.Pn(o)}else++s}}DJ(i,e){const h=this.gU;i.cP();for(let t=0,s=e.length;t<s;++t){const r=e[t],n=r.nO();n.LJ(!0),this.kJ(r,n,i)}i.fP();for(let t=0,s=e.length;t<s;++t){const o=e[t],a=o.nO();this.CJ(o,a,i,h),a.LJ(!1)}i.pP()}GJ(t){let s=this.zU,i=this.XU,e=this.$U,h=this.tN(),r;i.set(s.k7(h.fu()),s.N7(h.du()),s.k7(h.pu()),s.N7(h.mu())),this.qU&&i.equals(e)?r=this.JU:(r=this.V9(),this.qU=!0,e._(i)),this.xJ(t,r),r!==this.JU&&S.On(this.JU,r)}CJ(t,s,i,e){s.J9()?this.NJ(t,s,i,e):this.kJ(t,s,i)}kJ(t,s,i){const e=s.BJ();i.Vw()!==e&&e.Hb(),t.zv(i)}NJ(t,s,i,e){this.WJ(t,s,i,e,null)&&this.xH(i)}WJ(t,s,i,e,h){const r=s.C4().cF();return r.r3(i,e,{n3:t,o3:s.K5(),devicePixelRatio:this.$c.jJ(),time:t.HJ(),a3:this.$c.VJ()*this.Q9(),u3:this.jk(),A3:s.B4(),F3:r.Z3()?null:this.UJ(s),g3:h&&h.g3,y3:h&&h.y3,w3:h&&h.w3,S3:h&&h.S3}),i.nS(this.ov()),r.fR()}TJ(t,s,i,e){const h=this.kU.Wz(),r=this.$c;0===h.length?(t.nP(i),t.Cw(),e&&0===this.Bb&&this.Bz()?t.oP(s):(t.Vb(this.Bb),t.Ub(this.lU),t.aP(s)),t.uP(s),r.jU(s)):this.cF().r3(t,i,{n3:this,o3:this.K5(),devicePixelRatio:r.jJ(),a3:r.VJ()*this.Q9(),u3:this.jk(),A3:this.tN(),F3:null,KP:!0})}D5(){return this.yU}F5(t){this.yU!==t&&(this.yU=t,this.Z7.zJ(),this.zz(),this.$c.dO())}fN(){return this.Q9()*this.$c.fN()}Oj(){return this.Q9()*this.$c.Oj()}Q9(){return(this.yU*this.Z7.Bk()-1)*this.mU+1}Yz(){if(this.xU){this.xU=!1;let t=this.$c.iJ(),s=this.$c.eJ(),i=(this.Vk()-t)*this.aU+t,e=(this.zk()-s)*this.uU+s,h=this.Q9(),r=this.$c.r9()/h,n=this.$c.n9()/h,o=i-r/2,a=e-n/2;this.$c.DF()&&(o=Math.round(o),a=Math.round(a));const u=this.MU,l=(u.set(o,a,o+r,a+n),this.jk()),c=(0!==l&&(fr._(u),fr.offset(-u.bu(),-u.vu()),dr.ll(fr,l),dr.fl(fr),fr.offset(u.bu(),u.vu()),u._(fr)),this.jb);this.i9(c,this.iE),this.g9()?this.JJ(c,this.GU):this.GU._(this.iE)}}JJ(t,s){let i=this.$c.gL(),e=i.bL(),h=i.ML(),[r,n]=this.iN(0,0,t),[o,a]=this.iN(e,0,t),[u,l]=this.iN(e,h,t),[c,f]=this.iN(0,h,t),d=Math.min(r,o,u,c),p=Math.min(n,a,l,f),m=Math.max(r,o,u,c),g=Math.max(n,a,l,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}iN(t,s,i=0){return this.qJ(t,s,i,this.Oj())}aN(t,s,i=0){return this.qJ(t,s,i,this.fN()*this.IL())}qJ(t,s,i,e){const h=this.$c,r=h.Gb(),n=this.Q9(),o=h.r9()/n,a=h.n9()/n,u=wr,l=(Hh.set(u,0,0,o,a),t/=e,s=u[3]-s/e,this.oJ(r)),c=this.Y9(r),f=yr,d=S.Vg.Jg(t,s,i,c,l,u,f);return d?[f[0],f[1]]:[NaN,NaN]}$J(t,s){const i=this.yU,e=this.mU,h=this.aU,r=this.uU,n=this.wU,o=(this.yU=1,this.mU=1,this.aU=1,this.uU=1,this.wU=0,this.zz(),this.iN(t,s));return this.yU=i,this.mU=e,this.aU=h,this.uU=r,this.wU=n,this.zz(),o}nN(t,s,i=0){return this.XJ(t,s,i,this.Oj())}lN(t,s,i=0){return this.XJ(t,s,i,this.fN()*this.IL())}XJ(t,s,i,e){const h=this.$c,r=h.Gb(),n=this.Q9(),o=h.r9()/n,a=h.n9()/n,u=wr,l=(Hh.set(u,0,0,o,a),this.oJ(r)),c=this.Y9(r),f=yr,d=S.Vg.Ug(t,s,i,c,l,u,f);return d?[f[0]*e,(u[3]-f[1])*e]:[NaN,NaN]}KJ(t,s){return t*=this.fN()*this.IL(),0!==s&&(t*=this.e9(s)),t}UJ(t){const s=t.B4(),i=t.L4(),e=t.AJ(),u=i+e,l=s.fu(),c=s.du(),f=s.pu(),d=s.mu();if(this.g9()){if(this.YJ(l,c,i)||this.YJ(f,c,i)||this.YJ(f,d,i)||this.YJ(l,d,i))return null;if(0<e&&(this.YJ(l,c,u)||this.YJ(f,c,u)||this.YJ(f,d,u)||this.YJ(l,d,u)))return null}else if(u>=this.h9())return null;let[p,m]=this.lN(l,c,i),[g,y]=this.lN(f,d,i);if(0!==this.jk()||0<e||this.g9()){const[w,S]=this.lN(f,c,i),[b,v]=this.lN(l,d,i);if(0<e){let[t,s]=this.lN(l,c,u),[i,e]=this.lN(f,c,u),[h,r]=this.lN(f,d,u),[n,o]=this.lN(l,d,u),a=Math.min(p,g,w,b,t,i,h,n);g=Math.max(p,g,w,b,t,i,h,n),p=a,a=Math.min(m,y,S,v,s,e,r,o),y=Math.max(m,y,S,v,s,e,r,o),m=a}else{let t=Math.min(p,g,w,b);g=Math.max(p,g,w,b),p=t,t=Math.min(m,y,S,v),y=Math.max(m,y,S,v),m=t}}return fr.set(p,m,g,y),fr}EJ(){return this.CU&&(this.ZJ(),this.CU=!1),this.IU}ZJ(){const t=this.$c.Gb(),s=this.oJ(t),i=this.Y9(t);this.IU.ty(i,s)}YJ(t,s,i){return this.EJ().ey(t,s,i)}QJ(){const t={d:this.Lz(),s:this.D5(),a:this.k5(),v:this.M5(),i:this._5(),html:this.E5(),bc:this.nU.toJSON(),t:this.z5(),sx:this.SU,sy:this.bU,hosp:this.vU,px:this.B5(),py:this.j5(),c:this.Wb.toJSON(),sr:this.L5(),fx:this.kU.gv(),cg:this.AU};return t}tq(t){this.eU=!!t.d,this.yU=t.s,this.wU=t.a,this.hU=!!t.v,this.rU=!t.hasOwnProperty("i")||t.i,this.tU=!!t.html,this.nU.Aa(t.bc),this.oU=!!t.t,t.hasOwnProperty("sx")&&(this.SU=t.sx),t.hasOwnProperty("sy")&&(this.bU=t.sy),t.hasOwnProperty("hosp")&&(this.vU=!!t.hosp),this.aU=t.px,this.uU=t.py,this.Wb.Aa(t.c),this.YU(),this.mU=t.sr,S.On(this.AU,t.cg),S.On(this.PU,this.EU);let i=new Set(this.AU),e=0;for(let t=0,s=this.PU.length;t<s;++t)i.has(this.PU[t][2])||(this.PU[e]=this.PU[t],++e);S.Rn(this.PU,e),this.kU.yv(t.fx),this.VU=!0}sq(){this.vz(!1),this.fO(),this.zz(),this.nJ()}$k(){return this.KU}_k(t,s=!1){if(this.G7.includes(t))s&&this.G7.sort((t,s)=>{const i=t.nO().iq(),e=s.nO().iq();return i-e});else if(t.eq()){const i=[...t.pB()];i.push(t),i.sort((t,s)=>{const i=t.nO().iq(),e=s.nO().iq();return i-e});for(const e of i)if(e.IN())for(const h of e.CN())if(!i.includes(h)){const r=[...h.pB()];r.push(h),r.sort((t,s)=>{const i=t.nO().iq(),e=s.nO().iq();return i-e}),r&&r.length&&i.splice(i.length,0,...r)}for(const n of i)n.uk().NL()&&this.pz(n,!0)}else if(t.uk().NL()&&this.pz(t,!0),t.IN())for(const o of t.CN()){const a=[...o.pB()];if(a.push(o),a.sort((t,s)=>{const i=t.nO().iq(),e=s.nO().iq();return i-e}),a&&a.length)for(const u of a)u.uk().NL()&&this.pz(u,!0)}}}}{let u=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},v=function(t,s){I!==t&&(t.fJ(s),I=t)},M=(u,v,self.Os),e=self.C3Debugger,h=(M.ir(M.Rect),M.ir(M.Rect),M.ir(M.Rect)),G=M.ir(M.Oo),t=self.ws,l=t._s,a=[],x=[],T=[],_=[],I=null;M.hq=class extends M.Qh{constructor(t,s,i){super(),this.rq=t,this.$c=t.IO(),this.nr=i[0],this.nq=i[1],this.oq=i[2],this.Lm=i[1],this.km=i[2],this.aq=!!i[3],this.uq=!!i[4],this.lq=i[5],this.cq=i[6],this.fq=i[7],this.pq=null,this.iU=i[8],this.Lg=s,this.SU=0,this.bU=0,this.yU=1,this.wU=0,this.mq=new Set,this.gq=new Set,this.yq=new Set,this.wq=[],this.Sq=[],this.bq=new Map,this.vq=new Map,this.Mq=[],this.Gq=!1,this.xq=l.create(),this.Tq=l.create(),this._q=l.create(),this.Iq=[],this.Cq=[],this.Eq=new Map,this.Rq=new Map,this.Pq=-1;const h=this.$c.gL();this.kU=M.ir(M.NU,this,i[11]),this.aF=M.ir(M.Vg.hA,h.BU(),{qP:(t,s)=>{const i=s.tF(),e=i.tP();t.wR(),t.aP(e),t.uP(e),h.jU(e)},XP:t=>this.Fk().HU(t)}),this.VU=!0,this.Aq=!1,this.gU=null,this.Fq={},this.Dq=new Map,this.Oq=!0,this.Lq=new self.Ak(this),this.kq=M.ir(M.Event.Rf);for(const e of i[9])this.Iq.push(M.Y7.sz(this,null,e));this.Nq();for(const r of this.Yk())r.iz();for(const n of i[10]){const o=this.$c.ez(n[1]);if(!o)throw new Error("missing nonworld object class");o.rz()||o.nz(n),this.Mq.push(n),this.hz(o)}}er(){for(const t of this.Cq)t.er();M.Pn(this.Cq),this.yq.clear(),this.pq=null,this.rq=null,this.$c=null}IO(){return this.$c}Wc(){return this.nr}Oz(){return this.iU}fF(){return this.Lg}Fk(){return this.kU}cF(){return this.Nz(),this.aF}Nz(){const t="low"===this.$c.gL().SJ();if(this.VU||this.Aq!==t||this.aF.$A()){const s=this.Fk().Wz();this.aF.XA(s.map(t=>t.jG()),{YP:s.map(t=>t.fF()),QP:t,eA:!0}),this.VU=!1,this.Aq=t}}S6(){this.Fk().S6(),this.VU=!0}Bq(){let i=this.Cq[0].Q9();for(let t=1,s=this.Cq.length;t<s;++t){const e=this.Cq[t];0===e.B5()&&0===e.j5()||(i=Math.min(i,e.Q9()))}return i}Wq(){return.5*this.$c.r9()/this.Bq()}jq(){return.5*this.$c.n9()/this.Bq()}qz(){return this.Hq()?-1/0:this.Wq()}$z(){return this.Hq()?1/0:this.Xp()-this.Wq()}Xz(){return this.Hq()?-1/0:this.jq()}Kz(){return this.Hq()?1/0:this.om()-this.jq()}Hk(t){const s=this.qz(),i=this.$z();this.SU!==(t=(t=i<t?i:t)<s?s:t)&&(this.SU=t,this.Vq(),this.$c.dO())}Vk(){return this.SU}Uk(t){const s=this.Xz(),i=this.Kz();this.bU!==(t=(t=i<t?i:t)<s?s:t)&&(this.bU=t,this.Vq(),this.$c.dO())}zk(){return this.bU}Hq(){return this.aq}zJ(){this.Hk(this.Vk()),this.Uk(this.zk());for(const t of this.Cq)t.Jz()&&(t.Hk(t.Vk()),t.Uk(t.zk()))}u5(t,s){this.lq===t&&this.cq===s||(this.lq=t,this.cq=s,this.Uq()&&(this.zq(),this.Vq(),this.$c.dO()))}t9(){return this.p5()?.5:this.lq}s9(){return this.p5()?.5:this.cq}_J(){const t=this.t9(),s=this.s9();return t<0||1<t||s<0||1<s}f5(){this.uq&&(this.uq=!1,this.zq(),this.Vq(),this.$c.dO())}d5(){this.uq||(this.uq=!0,this.zq(),this.Vq(),this.$c.dO())}p5(){return this.uq}Uq(){return!this.p5()}Jq(t){this.Gq!==(t=!!t)&&(this.Gq=t,this.Vq(),this.$c.dO())}y9(){return this.Gq}qq(t,s,i,e,h,r,n,o,a){u(this.xq,t,s,i)&&u(this.Tq,e,h,r)&&u(this._q,n,o,a)||(l.set(this.xq,t,s,i),l.set(this.Tq,e,h,r),l.set(this._q,n,o,a),this.$q())}$q(){this.Vq(),this.$c.dO()}d9(){return this.xq}hJ(){return this.Tq}rJ(){return this._q}Bk(){return this.yU}Nk(t){this.yU!==t&&(this.yU=t,this.Vq(),this.zJ(),this.$c.dO())}Wk(t){t=M.cr(t),this.wU!==t&&(this.wU=t,this.Vq(),this.$c.dO())}jk(){return this.wU}Xp(){return this.Lm}hm(t){!isFinite(t)||t<1||(this.Lm=t)}om(){return this.km}Kp(t){!isFinite(t)||t<1||(this.km=t)}Xq(){return this.pq}Dz(){return this.Iq}*Yk(){for(const t of this.Iq)yield*t.v5()}Kk(){return this.Cq}Kq(){return this.Cq.length}oO(t){return"number"==typeof t?this.uO(t):this.Ez(t.toString())}uO(t){return t=M.lr(Math.floor(t),0,this.Cq.length-1),this.Cq[t]}Ez(t){return this.Eq.get(t.toLowerCase())||null}Yq(t){return!!this.Ez(t)}Zq(t){return this.Rq.get(t)||null}zq(){for(const t of this.Cq)t.nJ()}Vq(){for(const t of this.Cq)t.zz()}s5(t,s,i){if(this.Yq(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=2<=i?s:s.g5(),h=M.ir(M.Y7,this,e,{name:t,sid:Math.floor(1e15*Math.random()),H7:!0});this.Qq(h,s,i),this.IO().dO(),this.Az()}e5(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.t$(t),this.Qq(t,s,i),this.IO().dO(),this.Az())}r5(t){if(this.t$(t)){const s=this.$c.VF();s.Ik(!0),t.er(),s.Ik(!1),this.IO().dO(),this.Az()}}o5(){const t=new Set;for(const s of this.Yk())s.Lz()&&!s.kz()&&t.add(s);if(0!==t.size){const i=this.$c.VF();i.Ik(!0);for(const e of t)this.t$(e),e.er();i.Ik(!1),this.IO().dO(),this.Az()}}Qq(s,i,e){if(2<=e)if(i){if(i===s||i.I9(s))throw new Error(`cannot move layer '${s.Wc()}' to sub-layer of itself`);i.M9(s,2===e),s.b9(i)}else 2===e?this.Iq.push(s):this.Iq.unshift(s),s.b9(null);else{const t=i.g5();if(t){if(i.I9(s))throw new Error(`cannot move layer '${s.Wc()}' to sub-layer of itself`);t.G9(s,i,0===e),s.b9(t)}else{let t=this.Iq.indexOf(i);if(-1===t)throw new Error("cannot find layer to insert by");0===e&&++t,this.Iq.splice(t,0,s),s.b9(null)}}}t$(t){const s=t.g5();if(s)return s.x9(t),!0;if(1<this.Iq.length){const i=this.Iq.indexOf(t);if(-1===i)throw new Error("cannot find layer to remove");return this.Iq.splice(i,1),!0}return!1}Nq(){this.Cq=[...this.Yk()],this.Eq.clear(),this.Rq.clear();for(let t=0,s=this.Cq.length;t<s;++t){const i=this.Cq[t];i.Rz(t),this.Eq.set(i.Wc().toLowerCase(),i),this.Rq.set(i.Oz(),i)}}s$(){let t=0;for(const s of this.Iq){for(const i of s.v5())i.Pz(t);s.E5()&&t++}}i$(){return this.Iq.at(-1).Ij()+1}async Az(){this.Nq(),this.s$(),this.Pq=this.i$()}e$(){return this.Pq}h$(){this.Pq=-1}O9(t){const s=[];for(const i of this.Iq){const e=i.Ij();if(e===t)s.push(i);else if(t<e)break}return s}E9(){return{scrollX:this.Vk(),scrollY:this.zk(),scale:this.Bk(),angle:this.jk(),vpX:this.t9(),vpY:this.s9()}}R9(t){this.Hk(t.scrollX),this.Uk(t.scrollY),this.Nk(t.scale),this.Wk(t.angle),this.u5(t.vpX,t.vpY)}r$(){let t=this.Iq.filter(t=>t._9())[0];for(;t;){if(!t.z5())return G.$o(t.Y5()),G.qo(1),G;if(t.z9())return G.Wo(0,0,0,0),G;t=t.S5().filter(t=>t._9())[0]}return G.Wo(0,0,0,0),G}lz(){return this.Oq}n$(){return[...this.mq]}hz(t){if(t.IN())for(const s of t.a$().o$())this.mq.add(s);else this.mq.add(t)}u$(){return[...this.gq]}l$(t,s){if(t===this||!s)return Promise.resolve();t&&(M.Io(this.gq,t.gq),t.gq.clear());const i=[];for(const e of this.mq)this.gq.has(e)||(i.push(e.c$(s)),this.gq.add(e));return Promise.all(i)}async f$(t){if(t.Iz())throw new Error("cannot load textures for family");const s=this.$c.Gb();if(s&&!s.mC()&&!this.gq.has(t)){this.gq.add(t);const i=t.c$(s);this.d$(i),await i,t.p$(),this.$c.dO()}}d$(t){this.yq.add(t),t.then(()=>this.yq.delete(t)).catch(()=>this.yq.delete(t))}m$(){return Promise.all([...this.yq])}g$(t){if(t.Iz()||0<t.Gk())throw new Error("cannot unload textures");const s=this.$c.Gb();s&&this.gq.has(t)&&(this.gq.delete(t),t.y$(s))}w$(t,s){if(t!==this&&s)for(const i of this.gq)i.dz()||t.mq.has(i)||(i.y$(),this.gq.delete(i))}S$(){this.gq.clear()}async b$(t){const s=this.$c,i=this.rq,e=s.VF(),h=(this.fq&&(this.pq=e.v$(this.fq),this.pq.M$()),i.G$(this),this.Lm=this.nq,this.km=this.oq,this.SU=s.EF()/2,this.bU=s.PF()/2,this.zJ(),this.zq(),this.Vq(),this.s$(),await this.$c.gL().x$(this.i$(),!0),this.T$(t),this.$c._$(!0),this.I$(),this.Oq||this.C$(),this.E$(this.wq),this.E$(this.Sq),this.R$(),i.P$(),s.Pk(),this.$c._$(!1),this.$c.A$());if(await Promise.all(h),M.Pn(h),!s.F$()){for(const r of this.wq)r.D$();for(const n of this.Sq)n.O$(this.bq,this.vq);for(const[o,a]of Object.entries(this.Fq)){const u=this.$c.p8(parseInt(o,10));u&&!u.Iz()&&u.cz()&&M.Pn(a)}for(const l of this.wq)l.L$();for(const c of this.Sq)c.L$()}M.Pn(this.wq),M.Pn(this.Sq),this.bq.clear(),this.vq.clear(),await Promise.all([...this.mq].map(t=>t.k$(this.$c.Gb()))),t&&(s.Rf().dispatchEvent(new M.Event("beforefirstlayoutstart")),await s.N$(new M.Event("beforeprojectstart"))),await this.B$(new M.Event("beforeanylayoutstart")),s.Rf().dispatchEvent(new M.Event("beforelayoutstart")),await this.N$(new M.Event("beforelayoutstart")),s.F$()||await s.i4(M.V$.H$.j$.W$,null,null),s.Rf().dispatchEvent(new M.Event("afterlayoutstart")),await this.N$(new M.Event("afterlayoutstart")),await this.B$(new M.Event("afteranylayoutstart")),t&&(s.Rf().dispatchEvent(new M.Event("afterfirstlayoutstart")),await s.N$(new M.Event("afterprojectstart"))),e.U$(i),await this.m$(),this.Oq=!1}T$(t){for(const s of this.$c._z())if(!s.Iz()&&s.NL())for(const i of s.bk()){const e=i.nO(),h=e.oO(),r=M.lr(h.fF(),0,this.Cq.length-1),n=this.Cq[r];e.cO(n,!0),n.mz(i)}if(!t)for(const o of this.Cq)o.vz(!1)}I$(){for(const t of this.Cq)t.uz(this.wq),t.Gz()}C$(){let s=!1;for(const[t,i]of Object.entries(this.Fq)){const e=this.$c.p8(parseInt(t,10));if(e&&!e.Iz()&&e.cz())for(const h of i){let t=null;if(!e.NL()||(t=h.hasOwnProperty("instJson")?this.Zq(h.instJson.w.l):this.Zq(h.w.l))){const r=this.$c.fz(e,t,!1,0,0,!0);h.hasOwnProperty("instJson")?r.yv(h.instJson):r.yv(h),s=!0,this.Sq.push(r),h.hasOwnProperty("instJson")&&(this.bq.set(r,h),this.vq.set(h.index,r))}}}for(const n of this.Cq)n.vz(!0),n.fO();s&&(this.$c.Pk(),this.$c.z$())}E$(s){for(const i of s)if(i.IN()){const e=i.nO(),t=i.J$();for(const h of i.mN().a$().q$())if(h!==i.mN()){const r=h.bk();if(r.length>t)i.$$(r[t]);else{let t;t=e?this.$c.fz(h,e.oO(),!0,e.tv(),e.rv(),!0):this.$c.fz(h,null,!0,0,0,!0),this.$c.Pk(),h.X$(),i.$$(t),s.push(t)}}}}R$(){for(const t of this.Mq){const s=this.$c.ez(t[1]);s.IN()||this.$c.fz(t,null,!0)}}K$(){let i=[],e=this.Mq,h=0;for(let t=0,s=e.length;t<s;++t){const r=e[t],n=this.$c.ez(r[1]);n.dz()?n.IN()&&n.a$().Y$()||i.push(this.$c.fz(r,null,!0)):(e[h]=r,++h)}M.Rn(e,h),this.$c.Pk(),this.E$(i)}Tz(t,s,i,e,h,r,n){if(i)return i.Tz(t,s,h,r,e,n);{const o=[];for(const a of this.Cq)o.push(a.Tz(t,s,h,r,e,n));return o.flat()}}async Z$(){const t=this.rq;this.$c.F$()||(await this.B$(new M.Event("beforeanylayoutend")),await this.N$(new M.Event("beforelayoutend")),await this.$c.i4(M.V$.H$.j$.Q$,null,null),await this.N$(new M.Event("afterlayoutend")),await this.B$(new M.Event("afteranylayoutend"))),t.tX(!0),this.$c.VF().sX(),this.Oq||this.iX();for(const s of this.Cq)s.xz();for(const i of this.$c._z())if(!(i.dz()||i.NL()||i.uk().LL()||i.Iz())){for(const e of i.bk())this.$c.MN(e);this.$c.Pk()}t.tX(!1),t.ND()===this&&t.G$(null)}eX(t,s){const i=t.mN().Oz().toString(),e=(this.Fq.hasOwnProperty(i)||(this.Fq[i]=[]),this.Fq[i]),h={index:s,instJson:t.gv(),sceneGraphJson:{children:[]}};e.push(h),this.Dq.set(t,h)}hX(t){const s=this.Dq.get(t);for(const i of t.rX()){const e=this.Dq.get(i);e&&s.sceneGraphJson.children.push({index:e.index,flags:M.aX.nX(i.nO())})}}iX(){this.Dq.clear();let t=0;for(const s of this.Cq){s.A9();for(const i of s.lO()){const e=i.mN();!e.dz()&&e.cz()&&(this.eX(i,t),t++)}}for(const h of this.Cq)for(const r of h.lO()){const n=r.mN();!n.dz()&&n.cz()&&this.hX(r)}this.Dq.clear()}uX(){this.Fq={},this.Oq=!0}tP(){return this.gU}z9(){const t=this.$c,s=t.Gb().ib();return"low"===t.gL().SJ()||s&&t.wJ()||this.kU.J9()||s&&t.m9()}lX(t){const s=this.$c.gL();if(this.z9()){t.nP(null),t.JR(0,0,0,0);const i={i2:this.$c.AF(),J2:t.Sw()||this.$c.wJ()||this.kU.J9(),yJ:!!t.Sw()&&this.$c.wJ()};"low"===s.SJ()&&(i.width=s.uJ(),i.height=s.lJ()),this.gU=this.$c.bJ(i)}else this.gU=null}cX(t){this.$c.fX(t)&&(t.KR(!1),t.nP(null),t.Cw(),t.oP(this.gU))}dX(t){this.z9()&&(t.KR(!1),this.pX(t,this.gU))}mX(t){t.nP(this.gU),t.Vl(this.r$()),this.$c.m9()&&t.$R();const s=this.O9(0);this.vJ(t,this.gU,s,!0),t.Sw()&&t.StartMeasuringRenderPassTime(0,1),this.dX(t),this.gU=null}gX(t,s){let i=null;this.$c.fX(t)&&(i=this.gU),t.nP(i),t.JR(0,0,0,0),this.$c.m9()&&t.$R();const e=this.O9(s);this.vJ(t,i,e,!0),this.cX(t),t.XS(),this.$c.gL().yX(s)}vJ(t,e,s,h){const r=s.filter(t=>t._9());for(let s=0,i=r.length;s<i;){const n=r[s];if(n.w9()&&!n.q9()){a.push(n);for(let t=s+1;t<i;++t){const o=r[t];if(!o.w9()||o.q9())break;a.push(r[t])}if(2<=a.length||1===a.length&&a[0].T9()){this.wX(t,e,a),s+=a.length,M.Pn(a);continue}M.Pn(a)}n.zv(t,e,h&&0===s),++s}}pX(t,s){const i=this.kU.Wz(),e=this.$c;0===i.length?(t.nP(null),t.Cw(),t.oP(s),t.uP(s),e.jU(s)):(h.set(0,0,e.r9(),e.n9()),this.cF().r3(t,null,{n3:this,o3:3,devicePixelRatio:this.$c.jJ(),a3:this.$c.VJ()*this.Bk(),u3:this.jk(),A3:h,F3:null,KP:!0}))}wX(e,h,t){t[0].z5()||(G.$o(t[0].Y5()),G.qo(1),e.Vl(G)),this.$c.gL(),e.KR(!0);const r=x,n=T,o=_;for(const a of t)a.A9(),a.f9(r);const s=t[0],i=s.dJ(e);s.gJ(e);for(let s=0,i=r.length;s<i;){const u=r[s],l=u.nO(),c=l.oO();if(l.T5()&&l.RJ(c.EJ())){(!u.PJ()||0<l.AJ())&&o.push(u);const f=u.nO().L4();n.push(u);let t=s+1;for(;t<i;++t){const d=r[t],p=d.nO();if(p.T5()&&p.RJ(p.oO().EJ())){if(p.L4()!==f)break;(d.PJ()?(0<p.AJ()&&o.push(d),n):o).push(d)}}if(1!==n.length||n[0].FJ()){this.SX(e,h,n);for(let t=0,s=o.length;t<s;++t){const m=o[t],g=m.nO(),y=g.oO();g.OJ(!0),v(y,e),y.CJ(m,g,e,h),g.OJ(!1)}}else{v(c,e),c.CJ(u,l,e,h);for(let t=0,s=o.length;t<s;++t){const w=o[t];if(w!==u){const S=w.nO(),b=S.oO();v(b,e),b.CJ(w,S,e,h)}}}s=t,M.Pn(n),M.Pn(o)}else++s}i&&e.yP(i),M.Pn(r),I=null}SX(i,e,h){i.cP();for(let t=0,s=h.length;t<s;++t){const r=h[t],n=r.nO(),o=n.oO();n.LJ(!0),v(o,i),o.kJ(r,n,i)}i.fP();for(let t=0,s=h.length;t<s;++t){const a=h[t],u=a.nO(),l=u.oO();v(l,i),l.CJ(a,u,i,e),u.LJ(!1)}i.pP()}QJ(){const t={sx:this.Vk(),sy:this.zk(),s:this.Bk(),a:this.jk(),w:this.Xp(),h:this.om(),ortho:this.p5(),vpX:this.t9(),vpY:this.s9(),fv:this.Oq,persist:this.Fq,fx:this.kU.gv(),layers:{},dynamicLayers:[]};for(const s of this.Cq)if(s.Lz()){const i=s.g5();t.dynamicLayers.push({sid:s.Oz(),name:s.Wc(),parentSid:i?i.Oz():null,siblingIndex:s.Fz(),data:s.QJ()})}else t.layers[s.Oz().toString()]=s.QJ();return t}tq(t){this.SU=t.sx,this.bU=t.sy,this.yU=t.s,this.wU=t.a,this.Lm=t.w,this.km=t.h,this.uq=!!t.ortho,t.hasOwnProperty("vpX")&&(this.lq=t.vpX),t.hasOwnProperty("vpY")&&(this.cq=t.vpY),this.Oq=!!t.fv,this.Fq=t.persist,this.kU.yv(t.fx),this.VU=!0;for(const[s,i]of Object.entries(t.layers)){const e=parseInt(s,10),h=this.Zq(e);h&&h.tq(i)}if(t.hasOwnProperty("dynamicLayers")){this.o5(),this.$c.Pk();const r=new Map,n=t.dynamicLayers;for(let t=n.length-1;0<=t;--t){const o=n[t],a=o.sid,u=o.name,l=o.parentSid,c=o.siblingIndex,f=o.data;if(this.Nq(),!this.Yq(u)&&!this.Zq(a)){let t,s;if(null===l)t=null,s=this.Iq;else{if(!(t=this.Zq(l)))continue;s=t.S5()}const d=M.ir(M.Y7,this,t,{name:u,sid:a,H7:!0});s.push(d);let i=r.get(s);i||(i=[],r.set(s,i)),i.push({E4:d,siblingIndex:c}),d.tq(f)}}for(const[p,m]of r){m.sort((t,s)=>t.siblingIndex-s.siblingIndex);for(const g of m){let t=g.E4,s=g.siblingIndex,i=p.indexOf(t);p.splice(i,1),p.splice(s,0,t)}}}this.Az(),this.zq(),this.Vq()}BD(){return this.Lq}BF(){return this.kq}bX(t){t.layout=this.BD();const s=this.$c,i=s.vX()&&!s.VF().Ek();i&&e.StartMeasuringScriptTime(),this.kq.dispatchEvent(t),i&&e.AddScriptTime()}N$(t){return t.layout=this.BD(),this.kq.Nf(t)}B$(t){return t.layout=this.BD(),this.$c.N$(t)}MX(){this.GX(this.Iq)}GX(t,s=0){const i=t.slice(0);i.reverse();for(const e of i)console.log("\t".repeat(s)+"- "+e.Wc()),this.GX(e.S5(),s+1)}}}{const Ir=self.Os;Ir.xX=class extends Ir.Qh{#m8;#TX=[];#_X=new Map;#IX=new Map;#CX=null;#EX=[];#RX=null;#PX=0;#AX=null;constructor(t){super(),this.#m8=t}er(){this.#m8=null,this.#CX=null,this.#RX=null,this.#AX=null,Ir.Pn(this.#TX),this.#_X.clear(),this.#IX.clear(),Ir.Pn(this.#EX)}jM(t){const s=Ir.ir(Ir.hq,this,this.#TX.length,t);this.#TX.push(s),this.#_X.set(s.Wc().toLowerCase(),s),this.#IX.set(s.Oz(),s)}IO(){return this.#m8}FX(t){this.#RX=t}DX(){if(this.#RX)return this.#RX;if(this.#TX.length)return this.#TX[0];throw new Error("no first layout")}OX(t){return this.#_X.get(t.toLowerCase())||null}LX(t){return this.#IX.get(t)||null}kX(t){return t=Ir.lr(Math.floor(t),0,this.#TX.length-1),this.#TX[t]}HD(t){return"number"==typeof t?this.kX(t):this.OX(t.toString())}UD(){return this.#TX}G$(t){this.#CX=t}ND(){return this.#CX}NX(t){if(this.#EX.includes(t))throw new Error("layout already running");this.#EX.push(t)}BX(t){const s=this.#EX.indexOf(t);if(-1===s)throw new Error("layout not running");this.#EX.splice(s,1)}*WX(){this.#CX&&(yield this.#CX),this.#EX.length&&(yield*this.#EX)}jX(t){return this.#CX===t||this.#EX.includes(t)}tX(t){if(t)this.#PX++;else{if(this.#PX<=0)throw new Error("already unset");this.#PX--}}Rk(){return 0<this.#PX}qD(t){this.#AX=t}P$(){this.#AX=null}JD(){return!!this.#AX}HX(){return this.#AX}VX(){const t=this.ND();t&&t.zq()}UX(){const t=this.ND();t&&t.Vq()}}}{const b=self.Os,Cr=new RegExp("<(.+?)>","g");b.zX=class extends b.Qh{constructor(t){super(),this.$c=t,this.JX=b.ir(b.qX),this.$X=null,this.XX=[],this.KX=new Map,this.YX=new Map,this.ZX=new Map,this.QX=[],this.tK=[],this.sK=[],this.iK=!1,this.eK=!1,this.hK=!1,this.rK=()=>this.nK(),this.oK=()=>this.aK(),this.uK=()=>this.lK(),this.cK=()=>this.fK(),this.dK=t=>this.pK(t.f6),this.mK=t=>this.gK(),this.yK=t=>this.wK(),this.SK=t=>this.bK(),this.vK=[],this.MK=0}er(){this.GK(),this.rK=null,this.oK=null,this.uK=null,this.cK=null,this.dK=null,this.yK=null;for(const t of this.XX)t.aW(),t.er();b.Pn(this.XX),this.XX=null,this.JX.er(),this.JX=null,b.Pn(this.QX),this.QX=null,b.Pn(this.tK),this.tK=null,b.Pn(this.sK),this.sK=null,this.KX.clear(),this.KX=null,this.YX.clear(),this.YX=null,this.ZX.clear(),this.ZX=null,b.Pn(this.vK),this.vK=null,this.$c=null}xK(){const t=this.$c.Rf();t.addEventListener("pretick",this.rK),t.addEventListener("tick2",this.oK),t.addEventListener("beforelayoutchange",this.uK),t.addEventListener("layoutchange",this.cK),t.addEventListener("instancedestroy",this.dK),t.addEventListener("beforeload",this.mK),t.addEventListener("afterload",this.yK),t.addEventListener("afterlayoutstart",this.SK)}GK(){const t=this.$c.Rf();t.removeEventListener("pretick",this.rK),t.removeEventListener("tick2",this.oK),t.removeEventListener("beforelayoutchange",this.uK),t.removeEventListener("layoutchange",this.cK),t.removeEventListener("instancedestroy",this.dK),t.removeEventListener("beforeload",this.mK),t.removeEventListener("afterload",this.yK),t.removeEventListener("afterlayoutstart",this.SK)}jM(t){this.JX.Ql(t);const s=b._K.TK(t,this);this.Ql(s),this.IK(s),this.ZX.set(s.Wc(),0)}CK(t){const s=this.EK(),i=t.PN(),e=s.Qs(i),h=b._K.CK(i+":"+this.ZX.get(i),e,this);return this.RK(i),this.Ql(h),h}RK(t){this.ZX.set(t,this.ZX.get(t)+1)}PK(){for(const t of this.XX)if(!t.AK()){const s=t.PN();this.RK(s)}}FK(){for(const t of this.ZX.keys())this.ZX.set(t,0)}Ql(t){this.XX.push(t),this.KX.set(t.Wc().toLowerCase(),t)}u0(t){t.DK(),t.AK()||(b.kn(this.XX,t),b.kn(this.QX,t),b.kn(this.tK,t),b.kn(this.sK,t),this.KX.delete(t.Wc().toLowerCase()),this.LK(t),t.nW())||t.er()}t4(t){this.$c.t4(t,this.$X,null)}IO(){return this.$c}EK(){return this.JX}kK(t){this.$X=t}NK(){return this.$X}*BK(){for(const t of this.XX)yield t}*WK(){for(const t of this.tK)yield t}jK(t,s){this.YX.has(t)||this.YX.set(t,new Set),this.YX.get(t).add(s)}IK(t){for(const s of t.HK())this.jK(s,t)}LK(t){for(const[s,i]of this.YX.entries())i.has(t)&&(i.delete(t),0===i.size)&&this.YX.delete(s)}VK(t){if(this.YX.has(t))return this.YX.get(t)}UK(t,s){if(s)for(const i of this.XX){const e=s.every(t=>i.zK(t.f6,t.trackId));if(e&&i.Wc().includes(t.Wc()))return i}}JK(t){return this.KX.get(t.toLowerCase())||null}qK(t){for(const s of this.QX)if(s.Wc()===t)return s;for(const i of this.tK)if(i.Wc()===t)return i;return null}*$K(i){if(Cr.test(i)){Cr.lastIndex=0;let t,s=new Set;do{if(t=Cr.exec(i)){const e=t[1].split(",");for(const h of e)s.add(h)}}while(t);for(const r of s.values()){const n=this.JK(r);n&&(yield n)}s.clear()}else{const t=this.JK(i);t&&(yield t)}}*XK(t){for(const s of this.XX)s.lW(t)&&(yield s)}KK(t){this.QX.includes(t)||this.QX.push(t),this.YK()}ZK(t){b.kn(this.tK,t),this.QK()}tY(t){this.tK.includes(t)?(t.sY(!0),t.iY(!1),t.eY(!1)):(t.sY(!1),t.iY(!0),t.eY(!1),this.QX.includes(t)||this.QX.push(t)),this.YK()}hY(t){t.sY(!1),t.iY(!1),t.rY(),b.kn(this.QX,t),this.QK()}nY(t){t.sY(!1),t.iY(!1),this.tK.includes(t)&&(t.eY(!0),this.sK.push(t),b.kn(this.tK,t)),this.QX.includes(t)&&t.eY(!0)}aY(t){t.sY(!1),t.iY(!1),t.eY(!1),t.wW(1),b.kn(this.tK,t)}uY(t){this.nY(t),t.rY()}nK(){if(!this.IO().F$()&&this.iK&&!this.eK){for(this.hK=!0;this.QX.length;){const t=this.QX.pop();(t.lY()?(t.cY(),this.sK):(t.fY(),this.tK)).push(t),0!==t.dY()&&(this.MK=1)}const s=this.$c.pY(),i=this.$c.mY(),e=this.$c.SD();for(let t=this.tK.length-1;0<=t;t--){const h=this.tK[t];h&&h.gY(s,e,i)}this.hK=!1,0!==this.MK&&this.IO().dO()}}aK(){if(!this.IO().F$()&&this.iK&&!this.eK){let i;for(let t=0,s=this.sK.length;t<s;t++){const e=this.sK[t];i=i||new Set,e.DK(),this.yY(e),i.add(e)}if(i){b.Wn(this.sK,i);for(let t=this.MK=0,s=this.tK.length;t<s;t++)if(0!==this.tK[t].dY()){this.MK=1;break}}this.QK()}}yY(t){t.nW()||t.wY()&&t.SY()&&t.bY()&&t.vY()}YK(){this.iK||(this.iK=!0)}QK(){this.sK.length||this.tK.length||this.QX.length||this.hK||(this.iK=!1)}lK(){for(this.eK=!0;this.QX.length;)this.hY(this.QX.pop());const t=new Set;for(const s of this.tK){const i=s.lK();i&&(s.DK(),t.add(s))}b.Wn(this.tK,t),t.clear();for(const e of this.sK){const h=e.lK();h&&(e.DK(),t.add(e))}b.Wn(this.sK,t),this.QK();for(const r of this.XX)r.MY()}fK(){this.eK=!1}pK(t){const s=t.mN(),i=this.VK(s);if(i)if(this.$c.F$())this.vK.push(t);else for(const e of i)e.AK()||(e.nW()?this.u0(e):e.wY()||(this.yY(e),this.u0(e)))}gK(){for(const t of this.QX.map(t=>t))this.yY(t),this.u0(t);for(const s of this.tK.map(t=>t))this.yY(s),this.u0(s)}wK(){for(const t of this.vK)this.pK(t);b.Pn(this.vK);for(const s of this.XX)s.wK()}bK(){const t=this.$c.jD(),s=t.ND();if(s)for(const i of this.XX){const e=i.GY();e&&s.Wc()===e&&this.tY(i)}}QJ(){return{timelinesJson:this.xY(),scheduledTimelinesJson:this.TY(),playingTimelinesJson:this._Y(),markedForRemovalTimelinesJson:this.IY(),hasRuntimeListeners:this.iK,changingLayout:this.eK,isTickingTimelines:this.hK}}tq(t){t&&(this.FK(),this.CY(t.timelinesJson),this.EY(t.scheduledTimelinesJson),this.RY(t.playingTimelinesJson),this.PY(t.markedForRemovalTimelinesJson),this.iK=!t.hasRuntimeListeners,this.eK=!!t.changingLayout,this.hK=!!t.isTickingTimelines,this.PK(),this.YK(),this.QK())}xY(){return this.XX.map(t=>t.QJ())}CY(t){for(const s of t){let t=this.JK(s.name);if(t)t.tq(s);else{const i=this.AY(s);if(!i)continue;const e=this.JK(i);(t=this.CK(e)).tq(s)}t.FY()||this.u0(t)}}AY(t){const s=t.name,i=s.split(":");return i&&2===i.length?i[0]:null}TY(){return this.DY(this.QX)}EY(t){this.OY(t,this.QX)}_Y(){return this.DY(this.tK)}RY(t){this.OY(t,this.tK)}IY(){return this.DY(this.sK)}PY(t){this.OY(t,this.sK)}LY(t,s){if(s)for(const i of s)if(i===t.Wc())return!0;return!1}DY(t){return t.map(t=>t.Wc())}OY(t,s){const i=new Set;for(const e of s)this.LY(e,t)||i.add(e);if(b.Wn(s,i),t)for(const h of t){const r=this.JK(h);if(r){const n=s.find((s=>t=>t.Wc()===s)(h));n||s.push(r)}}}}}{const Er=self.Os,Rr=[0,0],Pr=[0,0],Ar=[0,0],Fr=[0,0,0,0,0],Dr=new Array(4),Or=[{x:0,y:0,t:0,Ct:0},{x:0,y:0,t:0,Ct:0},{x:0,y:0,t:0,Ct:0}],Lr={x:0,y:0,t:0,Ct:0};Er.kY=class{constructor(t,s){this.NY=!1,this.BY=t,this.WY=[];let i=null;if(i=s?this.BY.jY(s):Er.first(this.BY.HY())){const e=i.LW("offsetX"),h=i.LW("offsetY");if(e&&h){this.VY=e,this.UY=h;const r=e.zY(),n=h.zY();for(let t=1,s=Math.min(r.length,n.length);t<s;++t){const o=r[t],a=(o.JY(),o.qY()),u=n[t],l=(u.JY(),u.qY());a&&"cubic-bezier"===a.$Y()&&l&&"cubic-bezier"===l.$Y()?this.WY.push(Er.ir(Er.XY,a,l,o,u,this.WY.length)):(a&&"line"===a.$Y()&&l&&l.$Y(),this.WY.push(Er.ir(Er.KY,o,u,this.WY.length)))}this.NY=!0}}}er(){for(const t of this.WY)t.er();Er.Pn(this.WY),this.WY=null,this.BY=null,this.VY=null,this.UY=null}YY(){return this.NY}ZY(){return this.WY}QY(t){const s="relative"===this.VY.tZ()?t.tv():0,i="relative"===this.UY.tZ()?t.rv():0;for(const e of this.WY)e.QY(s,i)}Ug(s,i,t){let e=NaN,h=this.WY.length;for(let t=0;t<h;t++){const r=this.WY[t];if("cubic-bezier"===r.UG()){const n=r.Ug(s,i);(isNaN(e)||n[3]<e)&&(e=n[3],Ar[0]=n[2],Ar[1]=r.fF())}}return Ar}sZ(s,i,t){const e=t.tRange;Er.le(e[0])||(e[0]=0),Er.le(e[1])||(e[1]=1);let h=NaN,r=this.WY.length;for(let t=0;t<r;t++){const n=this.WY[t];if("cubic-bezier"===n.UG()){const o=n.iZ(s,i,e);(isNaN(h)||o[3]<h)&&(h=o[3],Ar[0]=o[2],Ar[1]=n.fF())}}return Ar}eZ(t,s){return this.WY[s].eZ(t)}hZ(t,s){return this.WY[s].hZ(t)}},Er.XY=class{constructor(t,s,i,e,h){this.Lg=h;const r=t.rZ("cubic-bezier"),n=i.rZ("cubic-bezier"),o=s.rZ("cubic-bezier"),a=e.rZ("cubic-bezier");this.nZ=t.oZ(),this.aZ=s.oZ(),this.uZ=t.oZ()+r.lZ(),this.cZ=s.oZ()+o.lZ(),this.fZ=i.oZ()+n.dZ(),this.pZ=e.oZ()+a.dZ(),this.mZ=i.oZ(),this.gZ=e.oZ(),this.yZ=0,this.wZ=0,this.SZ=0,this.bZ=0,this.vZ=0,this.MZ=0,this.GZ=0,this.xZ=0,this.TZ=0,this._Z=0,this.IZ=0,this.CZ=0,this.EZ=0,this.RZ=0,this.PZ=0,this.AZ=0,this.FZ=0,this.DZ=0,this.OZ=0,this.LZ=0,this.kZ=NaN,this.NY=!1,this.NZ=100,this.BZ=new Array(this.NZ+1),this.BZ[0]=0,this.WZ=0,this.jZ=[],this.HZ=[];for(let t=0;t<100;t++)this.HZ.push({x:0,y:0,t:0,Ct:0});this.VZ()}er(){Er.Pn(this.BZ),this.BZ=null,Er.Pn(this.jZ),this.jZ=null,Er.Pn(this.HZ),this.HZ=null}UG(){return"cubic-bezier"}fF(){return this.Lg}UZ(){return Math.floor(this.WZ/25)}zZ(){return 1/this.UZ()}QY(t,s){this.JZ=t,this.qZ=s,this.BZ=new Array(this.NZ+1),this.BZ[0]=0,this.VZ(),this.yZ=this.nZ+this.JZ,this.wZ=this.aZ+this.qZ,this.SZ=this.uZ+this.JZ,this.bZ=this.cZ+this.qZ,this.vZ=this.fZ+this.JZ,this.MZ=this.pZ+this.qZ,this.GZ=this.mZ+this.JZ,this.xZ=this.gZ+this.qZ,this.TZ=3*(this.SZ-this.yZ),this._Z=3*(this.bZ-this.wZ),this.IZ=3*(this.vZ-this.SZ),this.CZ=3*(this.MZ-this.bZ),this.EZ=3*(this.GZ-this.vZ),this.RZ=3*(this.xZ-this.MZ),this.PZ=3*(this.SZ-this.yZ),this.AZ=3*(this.yZ+this.vZ-2*this.SZ),this.FZ=this.GZ-this.yZ+3*(this.SZ-this.vZ),this.DZ=3*(this.bZ-this.wZ),this.OZ=3*(this.wZ+this.MZ-2*this.bZ),this.LZ=this.xZ-this.wZ+3*(this.bZ-this.MZ)}Map(t){if(!this.NY)return NaN;const s=this.$Z(t);return Pr[0]=this.XZ(s),Pr[1]=this.KZ(s),Pr}Ug(t,s){const i=this.YZ(100),e=this.ZZ(t,s,i),h=this.QZ(t,s,i,e);return Fr[0]=h.x,Fr[1]=h.y,Fr[2]=h.t,Fr[3]=h.Ct,Fr}iZ(t,s,i){const e=this.YZ(100),h=this.tQ(t,s,e,i),r=this.QZ(t,s,e,h);return Fr[0]=r.x,Fr[1]=r.y,Fr[2]=r.t,Fr[3]=r.Ct,Fr}eZ(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,r=i*this.TZ+e*this.IZ+h*this.EZ,n=i*this._Z+e*this.CZ+h*this.RZ,o=Math.hypot(r,n);return Rr[0]=r/o,Rr[1]=n/o,Rr}hZ(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,r=i*this.TZ+e*this.IZ+h*this.EZ,n=i*this._Z+e*this.CZ+h*this.RZ;return Math.atan2(n,r)}$Z(h){if(this.NY){let t=h*this.BZ[this.NZ],s=0,i=this.NZ,e=0;for(;s<i;)e=s+((i-s)/2|0),this.BZ[e]<t?s=e+1:i=e;this.BZ[e]>t&&e--;const r=this.BZ[e];return r===t?e/this.NZ:(e+(t-r)/(this.BZ[e+1]-r))/this.NZ}}XZ(t){return this.NY?self.ic.Sc("cubicbezier")(t,this.nZ+this.JZ,this.uZ+this.JZ,this.fZ+this.JZ,this.mZ+this.JZ):NaN}KZ(t){return this.NY?self.ic.Sc("cubicbezier")(t,this.aZ+this.qZ,this.cZ+this.qZ,this.pZ+this.qZ,this.gZ+this.qZ):NaN}YZ(s){if(!(this.jZ.length>=(s=s||100))){this.jZ=new Array(s),s++;for(let t=0;t<s-1;t++){const i=t/(s-1),e=i**2,h=i**3,r=this.PZ*i,n=this.AZ*e,o=this.FZ*h,a=this.DZ*i,u=this.OZ*e,l=this.LZ*h,c=this.yZ+r+n+o,f=this.wZ+a+u+l;this.HZ[t].x=c,this.HZ[t].y=f,this.HZ[t].t=i,this.HZ[t].Ct=0,this.jZ[t]=this.HZ[t]}}return this.jZ}ZZ(s,i,e,t=0,h=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.kZ))for(let t=0;t<100;t++){const n=e[t],o=n.x-s,a=n.y-i;n.Ct=o*o+a*a,n.Ct<h&&(h=n.Ct,r=t)}else{for(let t=this.kZ;t<this.kZ+5&&!(t>=e.length);t++){const u=e[t],l=u.x-s,c=u.y-i;u.Ct=l*l+c*c,u.Ct<h&&(h=u.Ct,r=t)}for(let t=this.kZ;t>this.kZ-5&&!(t<0);t--){const f=e[t],d=f.x-s,p=f.y-i;f.Ct=d*d+p*p,f.Ct<h&&(h=f.Ct,r=t)}}return this.kZ=r}tQ(s,i,e,h,r=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.kZ))for(let t=0;t<100;t++){const o=e[t],a=o.x-s,u=o.y-i;o.Ct=a*a+u*u,o.t>=h[0]&&o.t<=h[1]&&o.Ct<r&&(r=o.Ct,n=t)}else{for(let t=this.kZ;t<this.kZ+5&&!(t>=e.length);t++){const l=e[t],c=l.x-s,f=l.y-i;l.Ct=c*c+f*f,l.t>=h[0]&&l.t<=h[1]&&l.Ct<r&&(r=l.Ct,n=t)}for(let t=this.kZ;t>this.kZ-5&&!(t<0);t--){const d=e[t],p=d.x-s,m=d.y-i;d.Ct=p*p+m*m,d.t>=h[0]&&d.t<=h[1]&&d.Ct<r&&(r=d.Ct,n=t)}}return this.kZ=n}QZ(n,o,a,u){let l=a[u],t=1,c=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,s=0===u?0:u-1,i=u===t-1?t-1:u+1,e=a[s].t,h=a[i].t,r=(h-e)/4;if(r<.001)break;Dr[0]=a[s];for(let t=1;t<=2;t++){const f=e+t*r,d=f**2,p=f**3,m=this.PZ*f,g=this.AZ*d,y=this.FZ*p,w=this.DZ*f,S=this.OZ*d,b=this.LZ*p,v=this.yZ+m+g+y,M=this.wZ+w+S+b,G=v-n,x=M-o,T=G*G+x*x;if(T<c){c=T,u=t,Lr.x=v,Lr.y=M,Lr.t=f,Lr.Ct=T,l=Lr;break t}const _=Or[t-1];_.x=v,_.y=M,_.t=f,_.Ct=T,Dr[t]=_}Dr[3]=a[i],a=Dr}while(t++<20);return l}VZ(){this.NY=!0;let s=this.XZ(0),i=this.KZ(0),e=0;for(let t=1;t<=this.NZ;t++){const h=this.XZ(.01*t),r=this.KZ(.01*t),n=s-h,o=i-r;e+=Math.hypot(n,o),this.BZ[t]=e,s=h,i=r}this.WZ=e}},Er.KY=class{constructor(t,s,i){this.Lg=i,this.sQ=t.oZ(),this.iQ=s.oZ(),this.JZ=0,this.qZ=0}er(){}UG(){return"line"}fF(){return this.Lg}QY(t,s){this.JZ=t,this.qZ=s}tv(){return this.sQ+this.JZ}rv(){return this.iQ+this.qZ}}}{const v=self.Os;v._K=class extends v.Qh{constructor(t,s,i){super(),this.$c=i.IO(),this.eQ=i,this.hQ=s,this.nr=t,this.rQ=[],this.nQ=0,this.oQ=null,this.aQ=0,this.uQ(),this.lQ=null,this.cQ=null,this.fQ=0,this.dQ=0,this.pQ=1,this.mQ=0,this.gQ=1,this.yQ=!1,this.wQ=!1,this.SQ=!1,this.bQ=!0,this.vQ=!1,this.MQ=!1,this.GQ=-1,this.xQ=!1,this.TQ=!1,this._Q=!1,this.IQ=!1,this.CQ=NaN,this.EQ=[""],this.RQ="",this.PQ=!1,this.MK=0,this.AQ=0,this.FQ=null}static TK(t,s){const i=s.EK(),e=i.DQ(),h=i.Qs(t[e]),r=v.ir(v._K,t[e],h,s);return r.OQ(!0),r}static CK(t,s,i){return v.ir(v._K,t,s,i)}er(){if(!this.nW()){const t=this.$c.Rf();this.eQ.hY(this),this.eQ.uY(this);for(const s of this.rQ)s.er();v.Pn(this.rQ),this.rQ=null,this.$c=null,this.eQ=null,this.hQ=null,this.vQ=!0,this.lQ=null,this.cQ=null,this.LQ(t)}}LQ(t){const s=v.ir(v.Event,"timelinestatereleased");s.kQ=this,t.dispatchEvent(s)}UG(){return 0}uQ(){for(const t of this.hQ.BQ().NQ())this.nQ=this.rQ.push(v.WQ.jM(this,t))}jQ(){return this.eQ}IO(){return this.$c}HY(){return this.rQ}HQ(e,h,r,n){if(this.AQ){let i;for(let s=0;s<this.rQ.length;s++){let t=this.rQ[s];if(e===t.RW()){const o=t.LW(r);o&&h.constructor===o.VQ().constructor&&o.tZ()===n.tZ()&&(i=i||[]).push(o)}}return i}}FY(){return!!this.rQ.length}jY(t){for(const s of this.rQ)if(v.ph(s.DW(),t))return s;return null}UQ(t){for(const s of this.rQ)if(!s.zQ()&&v.ph(s.Wc(),t))return s;return null}T8(t){this.nr=t}Wc(){return this.nr}JQ(){return this.hQ}PN(){return this.hQ.Wc()}dW(){return this.hQ.dW()}fW(t){this.hQ.fW(t)}qQ(){return this.hQ.qQ()}$Q(t){this.hQ.$Q(t)}XQ(){return this.hQ.XQ()}KQ(t){this.hQ.KQ(t)}tZ(){return this.hQ.tZ()}YQ(t){this.hQ.tZ(t)}EW(t){for(const s of this.HY())s.EW(t)}mW(){return this.hQ.mW()}pW(t){return this.hQ.pW(t)}yW(){return this.hQ.yW()}gW(t){return this.hQ.gW(t)}_6(){return this.hQ._6()}ZQ(t){return this.hQ.ZQ(t)}wW(t){return this.pQ=t}SW(){return this.pQ}GY(){return this.hQ.GY()}QQ(){return this.hQ.QQ()}ttt(){return this.hQ.ttt()}stt(){return this.mQ}itt(){return!this.IsPlaying()||0<this.pQ}vW(){return this.lQ||(this.lQ=new Promise(t=>{this.cQ=t})),this.lQ}rY(){this.lQ&&(this.cQ(),this.lQ=null,this.cQ=null)}ett(t){this.EQ=v._K.htt(t),this.PQ=!0}bW(){return this.EQ}ntt(){return this.PQ&&(this.RQ=this.EQ.join(" ")),this.PQ=!1,this.RQ}lW(t){if(!this.EQ)return!1;if(!this.EQ.length)return!1;const s=v._K.htt(t);return!!s&&!!s.length&&s.every(v._K.ott,this)}att(){v.V$.Timeline&&this.constructor===v._K&&(v.V$.Timeline.j$.PushTriggerTimeline(this),this.eQ.t4(v.V$.Timeline.j$.OnTimelineStarted),this.eQ.t4(v.V$.Timeline.j$.OnTimelineStartedByName),this.eQ.t4(v.V$.Timeline.j$.OnTimelineStartedByTags),this.eQ.t4(v.V$.Timeline.j$.OnAnyTimelineStarted),v.V$.Timeline.j$.PopTriggerTimeline())}utt(){this.GQ=this.$c.ltt()}vY(){this._Q||(this._Q=!0,v.V$.Timeline&&this.constructor===v._K&&(v.V$.Timeline.j$.PushTriggerTimeline(this),this.eQ.t4(v.V$.Timeline.j$.OnTimelineFinished),this.eQ.t4(v.V$.Timeline.j$.OnTimelineFinishedByName),this.eQ.t4(v.V$.Timeline.j$.OnTimelineFinishedByTags),this.eQ.t4(v.V$.Timeline.j$.OnAnyTimelineFinished),v.V$.Timeline.j$.PopTriggerTimeline()))}sY(t){this.yQ=t}ctt(){return this.GQ===this.$c.ltt()}IsPlaying(t=!1){return!!this.ctt()||!(!this.ftt()||t)||this.yQ}dtt(){return this.IsPlaying(!0)}GW(){return this.ptt()}ptt(){return!(this.nW()||this.ftt()||this.dtt()||this.SY())}iY(t){this.wQ=t}ftt(){return this.wQ}mtt(t){this.bQ=t;const s=this.zP();(s<=0||s>=this.dW())&&(this.bQ=!0)}SY(){return this.bQ}nW(){return this.vQ}eY(t){this.MQ=t}lY(){return this.MQ}gtt(t){this.xQ=t}ytt(){return this.xQ}OQ(t){this.TQ=!!t}AK(){return this.TQ}bY(){return this.SQ}zP(){return this.fQ}cW(t){const s=this.zP();this.wtt(t),this.mtt(!1),this.SY()||this.gtt(!0),!this.dtt()&&!this.ftt()&&this.SQ||(this.dtt()||this.ftt()||this.SQ?this.dtt()?this.aW():this.ftt()&&(this.eQ.hY(this),this.Stt()):this.Stt()),this.btt(),this.vtt(this.zP(),!1,!0,!0,s),this.Mtt(),this.MK&&this.IO().dO(),this.Gtt()}wtt(t){(t=v.le(t)?t:this.dW())<0?this.fQ=0:t>=this.dW()?this.fQ=this.dW():this.fQ=t}xtt(t){(t=v.le(t)?t:this.dW())<0?this.fQ=0:t>=this.dW()?this.fQ=this.dW():this.fQ=t;for(const s of this.rQ)s.Ttt()}Gtt(){v.V$.Timeline&&this.constructor===v._K&&(v.V$.Timeline.j$.PushTriggerTimeline(this),this.eQ.t4(v.V$.Timeline.j$.OnTimeSet),this.eQ.t4(v.V$.Timeline.j$.OnTimeSetByName),this.eQ.t4(v.V$.Timeline.j$.OnTimeSetByTags),v.V$.Timeline.j$.PopTriggerTimeline())}_tt(){if(!this.mW())if(this.yW()&&1===this.mQ){if(this.itt()){if(this.zP()>=this.dW())return!1}else if(this.zP()<=0)return!1}else if(!this.mW()&&!this.yW())if(this.itt()){if(this.zP()>=this.dW())return!1}else if(this.zP()<=0)return!1;return!0}uW(){this.nW()||this._tt()&&this.Play(!0)}Play(t=!1){return!this.nW()&&!this.ftt()&&(this.dtt()&&this.ctt()?this.Itt():!this.dtt()&&!!(this.SY()||t||this.ytt())&&this.Ctt())}Itt(){return this.gtt(!1),this.eQ.ZK(this),this.eQ.tY(this),this.vW(),!0}Ctt(){return this.gtt(!1),this.eQ.tY(this),this.vW(),!0}aW(t=!1){this.nW()||(this.mtt(t),this.eQ.nY(this),this.SY()&&this.rY())}Yf(t=!0,s=!1){if(!this.nW()){if(!this.dtt()&&this.ftt())return this.eQ.hY(this);if(!this.SY()){this.aW(!0),this.itt()?this.wtt(0):this.wtt(this.dW());const i=this.zP();this.btt(),s?this.Ett(i):this.vtt(i,!1,!1,!0),t&&this.Gtt(),this.Mtt(),this.MK&&t&&this.IO().dO()}}}Rtt(){this.Yf(!1,!0)}Ett(t){this.vtt(t,!1,!1,!0,NaN,!1,!0)}lK(){if(!this.nW()){if(!this.IO().F$()&&this.Ptt())return!1;this.eQ.aY(this),this.IO().F$()||this.Rtt()}return!0}Stt(){this.fY(!0)}cY(){this.fY(!1,!0),this.sY(!1),this.iY(!1)}fY(t=!1,s=!1){if(!this.lY()||s){if(t){this._Q=!1,this.SQ=!0,this.IQ=!0,this.btt();for(const i of this.rQ)i.fY()}else if(this.sY(!0),this.iY(!1),this.att(),this.SY()){this.GQ=-1,0!==this.mQ&&(this.pQ=Math.abs(this.pQ)),this.mQ=0,this.gQ=1,this.bQ=!1,this._Q=!1,this.SQ=!0,this.IQ=!0,this.itt()?this.wtt(0):this.wtt(this.dW()),this.btt();for(const e of this.rQ)e.fY()}else{this.IQ=!0,this._Q=!1,this.btt();for(const h of this.rQ)h.Att()}this.Mtt()}}dY(){return this.MK}btt(){this.AQ=0;for(const t of this.rQ)t.kC()&&(this.AQ=1)}Mtt(){this.MK=0;for(const t of this.rQ)t.Ftt(),0===this.MK&&1===t.dY()&&(this.MK=1),this.oQ||1!==t.Dtt()||(this.oQ||(this.oQ=[]),this.aQ=this.oQ.push(t))}gY(t,s,i){if(this.ttt()){if(0===t&&0===this.CQ)return;this.CQ=t,t=i}else{if(0===i&&0===this.CQ)return;t=this.CQ=i,s=1}const e=this.fQ+this.dQ,h=t*s*this.pQ,r=e+h,n=this.hQ.Ott;r<0?(this.fQ=0,this.dQ=-r):n<=r?(this.fQ=n,this.dQ=this.fQ-r):(this.fQ=r,this.dQ=0);let o=!1,a=!1,u=this.mW(),l=this.yW();u||l?u&&!l?0<this.pQ?this.fQ>=n&&(this.xtt(0),a=!0):this.fQ<=0&&(this.xtt(n),a=!0):!u&&l?0<this.pQ?this.fQ>=n&&(this.wtt(n),this.wW(-1*this.SW()),a=!0,1===this.mQ?this.gQ<this._6()?(this.gQ++,this.mQ=0):o=!0:0===this.mQ&&(this.mQ=1)):this.fQ<=0&&(this.wtt(0),this.wW(-1*this.SW()),a=!0,1===this.mQ?this.gQ<this._6()?(this.gQ++,this.mQ=0):o=!0:0===this.mQ&&(this.mQ=1)):u&&l&&(0<this.pQ?this.fQ>=n&&(this.wtt(n),this.wW(-1*this.SW()),a=!0,this.mQ++,v.wrap(this.mQ,0,2)):this.fQ<=0&&(this.wtt(0),this.wW(-1*this.SW()),a=!0,this.mQ++,v.wrap(this.mQ,0,2))):0<this.pQ?this.fQ>=n&&(this.gQ<this._6()?(this.gQ++,this.xtt(0),a=!0):(this.wtt(n),o=!0)):this.fQ<=0&&(this.gQ<this._6()?(this.gQ++,this.xtt(n),a=!0):(this.wtt(0),o=!0));let c,f=this.nQ;if(o){for(c=0;c<f;c++)this.rQ[c].Ltt();this.aW(!0),this.utt()}else{const d=this.aQ;for(c=0;c<d;c++)this.oQ[c].ktt();if(1===this.AQ)for(c=0;c<f;c++){const p=this.rQ[c],m=p.Ntt(),g=this.fQ-m,y=e-m;g<0&&0<y?(this.fQ=m<0?0:n<=m?n:m,p.Rc(m,!0,!1,a,this.IQ,!1)):p.Rc(this.fQ,!0,!1,a,this.IQ,!1)}else for(c=0;c<f;c++)this.rQ[c].Rc(this.fQ,!0,!1,a,this.IQ,!1);for(c=0;c<d;c++)this.oQ[c].Btt();this.IQ&&(this.IQ=!1)}}vtt(s,i=!1,e=!1,h=!1,r=NaN,t=!1,n=!1){for(const o of this.rQ)o.ktt();for(const a of this.rQ){let t=s;if("number"==typeof r&&!isNaN(r)){const u=this.zP(),l=u-a.Ntt(),c=r-a.Ntt();l<0&&0<c&&(t=a.Ntt(),this.wtt(t))}a.Rc(t,i,e,h,this.IQ,n)}for(const f of this.rQ)f.Btt();this.IQ&&t&&(this.IQ=!1)}Wtt(){const t=this.hQ.BQ().jtt(),s=v.WQ.jM(this,t);return this.nQ=this.rQ.push(s),s}DK(){if(!this.nW())for(const t of this.rQ)t.Htt()}MY(){for(const t of this.rQ)t.MY()}Vtt(){for(const t of this.rQ)t.Utt()}ztt(t,s,i){if(s){if("number"==typeof i&&0<=i){const e=this.rQ[i];return e?(e.Jtt(s),void this.eQ.jK(s.mN(),this)):void 0}for(const h of this.rQ)if(h.zQ())if(t){if(h.DW()===t){h.Jtt(s),this.eQ.jK(s.mN(),this);break}}else if(!h.qtt()){h.Jtt(s),this.eQ.jK(s.mN(),this);break}}}zK(t,s){for(const i of this.rQ)if(i.zQ())if(s){if(s===i.DW()&&t===i.RW())return!0}else if(t===i.RW())return!0;return!1}wY(){return this.rQ.some(t=>!t.zQ()||t.$tt())}Ptt(){return this.rQ.some(t=>{if(t.zQ()){if(!t.$tt())return!1;const s=t.mN();return!!s&&s.dz()}return!1})}LW(t){for(const s of this.HY())for(const i of s.Xtt())if(i.Ktt()===t)return i}Ytt(t){for(const s of this.rQ)if(t===s.RW())return s;return null}Ztt(t){let s=t?t.split(" "):[],i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const e of this.HY())for(const h of e.Qtt()){const r=s.every(t=>h.tst(t));if(r)return h}}HK(){const t=[];for(const s of this.HY())t.push(s.mN());return t.filter(t=>t)}wK(){for(const t of this.HY())t.wK()}QJ(){return{tracksJson:this.sst(),name:this.nr,playheadTime:this.zP(),playbackRate:this.pQ,pingPongState:this.mQ,currentRepeatCount:this.gQ,isPlaying:this.yQ,isScheduled:this.wQ,initialStateSet:this.SQ,finishedTriggers:this._Q,complete:this.bQ,released:this.vQ,markedForRemoval:this.MQ,completedTick:this.GQ,implicitPause:this.xQ,isTemplate:this.TQ,tags:this.EQ.join(" "),stringTags:this.RQ,tagsChanged:this.PQ,firstTick:this.IQ}}tq(t){t&&(this.ist(t.tracksJson),this.nr=t.name,this.fQ=t.playheadTime,this.pQ=t.playbackRate,this.mQ=t.pingPongState,this.gQ=t.currentRepeatCount,this.yQ=!!t.isPlaying,this.wQ=!!t.isScheduled,this.SQ=!!t.initialStateSet,this._Q=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.bQ=!!t.complete,this.vQ=!!t.released,this.MQ=!!t.markedForRemoval,this.GQ=t.completedTick,this.xQ=!!t.implicitPause,this.TQ=!!t.isTemplate,this.EQ=t.tags.split(" "),this.RQ=t.stringTags,this.PQ=!!t.tagsChanged,this.IQ=!!t.firstTick)}sst(){return this.rQ.map(t=>t.QJ())}ist(t){this.Vtt(),t.forEach((t,s)=>{const i=this.rQ[s];i.tq(t)}),this.rQ.filter(t=>t.$tt())}static ott(t){const s=this.bW();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static htt(t){if(v.Le(t))return t.slice(0);if(v.ve(t))return t.split(" ");throw new Error("invalid tags")}est(){return this.FQ||(this.FQ=v.ir(self.TW,this)),this.FQ}}}{const kr=self.Os;kr.WQ=class extends kr.Qh{constructor(t,s){super(),this.BY=t,this.hst=s,this.rst=s.BQ(),this.nst=NaN,this.ost=NaN,this.ast=null,this.ust=null,this.lst=!1,this.PC=0<s.Ntt(),this.cst=!1,this.fst=!1,this.dst=NaN,this.pst=null,this.mst=this.hst.yst().gst(),this.wst=[],this.Sst(),this.bst=0,this.MK=0,this.vst=0}static jM(t,s){return kr.ir(kr.WQ,t,s)}er(){this.mst=null;for(const t of this.wst)t.er();kr.Pn(this.wst),this.wst=null,this.BY=null,this.ast=null,this.ust=null,this.hst=null,this.pst=null}Sst(){for(const t of this.hst.Gst().Mst())this.wst.push(kr.xst.jM(this,t))}Htt(){for(const t of this.wst)t.Htt()}MY(){for(const t of this.wst)t.MY();this.ast=null,this.ust=null}Tst(){return this.BY}IO(){return this.BY.IO()}Qtt(){return this.mst||(this.mst=this.hst.yst().gst()),this.mst}Xtt(){return this.wst}LW(s){for(let t=0;t<this.wst.length;t++){const i=this.wst[t];if(i.Ktt()===s)return i}}_st(){this.ast||this.RW()}Ist(){return!!this.ast&&!this.ast.Dj()}$tt(){if(!this.zQ())return!1;const t=this.Cst(),s=this.IO().sO(t);return!!s&&!s.Dj()}mN(){if(this.zQ()){const t=this.Est();if(-1!==t)return this.IO().ez(t)}}Rst(){return this.BY.HY().indexOf(this)}Utt(){this.ast=null,this.nst=NaN,this.ust=null,this.ost=NaN,this.lst=!0}qtt(){return!!this.ast}RW(){if(!this.lst){if(!this.ast||!this.Ist()){const t=this.Cst();this.ast=this.IO().sO(t)}return this.ast}}Jtt(t){if(this.lst=!1,this.ast!==t){this.MY(),this.ast=t,this.ost=t.mN().fF(),this.nst=t.EN(),this.ust=t.nO();for(const s of this.Pst()){const i=s.Ast,e=s.Fst,h=i.Dst();switch(h){case"instance-variable":{e.Ost();const r=t.mN(),n=r.Lst(s.name),o=r.kst(n),a=r.Nst(n);o===s.name&&a===s.type&&e.Bst(n);break}case"behavior":{const u=s.u6,l=this.mN(),c=t.mN(),f=e.c6(c);if(u&&f){const d=u.Wc();l.Wst(d),c.Wst(d),e.Ost(),e.jst(f.Oz())}break}}}}}*Pst(){for(const t of this.wst){const s=t.VQ(),i=this.mN(),e={Ast:t,Fst:s};switch(t.Dst()){case"world-instance":e.property=t.Ktt();break;case"instance-variable":{const h=s.Ost();e.name=i.kst(h),e.type=i.Nst(h);break}case"effect":{const r=i.Fk(),n=s.Hst(r);e.Vst=n;break}case"behavior":{const o=s.c6(i);e.u6=o;break}case"plugin":e.ak=i.uk()}yield e}}nO(){if(!this.ust||!this.Ist()){const t=this.RW();t&&(this.ust=t.nO())}return this.ust}Ust(){return this.hst}Cst(){return isNaN(this.nst)?this.hst.Cst():this.nst}zst(t){this.hst.zst(t)}XQ(){return this.hst.XQ()}KQ(t){this.hst.KQ(t)}tZ(){return this.hst.tZ()}DW(){return this.hst.DW()}Ntt(){return this.hst.Ntt()}Jst(){return this.hst.Jst()}qst(t){this.hst.qst(t)}YQ(t){this.hst.YQ(t)}EW(t){for(const s of this.Qtt())s.EW(t);for(const i of this.Xtt())i.EW(t)}$st(){return this.hst.$st()}Xst(t){this.hst.Xst(t)}Est(){return isNaN(this.ost)?this.hst.Est():this.ost}Kst(t){this.hst.Kst(t)}Yst(t){this.hst.Yst(t)}Zst(){const t=this.RW();if(t){const s=t.s6();if(s.Qst())return t.s6().Zst()}return this.hst.Zst()}tit(t){this.hst.tit(t)}sit(){const t=this.RW();if(t){const s=t.s6();if(s.Qst())return t.s6().sit()}return this.hst.sit()}UG(){return this.hst.UG()}Wc(){return this.hst.Wc()}zQ(){return 0===this.UG()}iit(){return 1===this.UG()}eit(){return 2===this.UG()}hit(){return this.bst}dY(){return this.MK}Dtt(){return this.vst}kC(){return this.PC}Ttt(){for(const t of this.wst)t.Ttt()}fY(){if(this._st(),this.Ist()||!this.zQ()){const t=this.Tst(),s=t.itt(),i=s?0:this.Jst();for(const h of this.wst)h.fY(i),0===this.bst&&1===h.hit()&&(this.bst=1),0===this.MK&&1===h.dY()&&(this.MK=1);this.vst=0;const e=this.wst.some(t=>t.Dtt());e&&(this.vst=1),this.pst=this.rit(i),this.cst=!1,this.fst=!1,this.Rc(i),this.nit(this.rit(i))}}Att(){if(this._st(),this.Ist()||!this.zQ()){this.BY.itt();const t=this.BY.zP()-this.Ntt();this.pst=this.rit(t);for(const s of this.wst)s.Att(t)}}Ltt(){if(!this.Tst().SY()&&(this._st(),this.Ist()||!this.zQ())&&!this.PC){const t=this.BY.zP(),s=this.Ntt()+this.Jst();s<=t?this.Rc(this.Jst(),!0,!1,!0,!1,!1,!0):t<=0&&this.Rc(0,!0,!1,!0,!1,!1,!0)}}Ftt(){for(let t=0,s=this.wst.length;t<s;t++){const i=this.wst[t];i.Ftt(),0===this.bst&&1===i.hit()&&(this.bst=1),0===this.MK&&1===i.dY()&&(this.MK=1)}}ktt(){const s=this.wst.length;for(let t=0;t<s;t++)this.wst[t].ktt()}Rc(i,t=!1,e=!1,h=!1,s=!1,r=!1,n=!1){this.ast||this.RW();const o=this.ast&&!this.ast.Dj(),a=0===this.hst.ef;if((o||!a)&&!(r&&a&&this.mN().dz()||(i-=this.Ntt())<0)){this.oit(i,t),this.ait(i,t,s);for(let t=0,s=this.wst.length;t<s;t++)this.wst[t].Rc(i,e,h,n);this.uit(i,t),0!==this.bst&&(this.ust||(this.ust=this.ast.nO()),this.ust)&&this.ust.R4()}}Btt(){const s=this.wst.length;for(let t=0;t<s;t++)this.wst[t].Btt()}oit(t,s){if(s&&this.PC&&!this.cst){const i=this.Tst();if(i.itt()){if(t<0)return}else if(t>this.Jst())return;for(const e of this.wst)e.fY();this.cst=!0}}uit(t,s){if(s&&this.PC&&!this.fst){const i=this.Tst();if(i.itt()){if(t>=this.Jst()){for(const e of this.wst)e.Rc(this.Jst(),!1,!0);this.fst=!0}}else if(t<=0){for(const h of this.wst)h.Rc(0,!1,!0);this.fst=!0}}}ait(t,s,i){if(!i&&s&&kr.V$.Timeline){const e=this.Tst(),h=this.pst.JY(),r=this.pst.zP(),n=h?h.zP():e.dW();if(t<=r||n<=t)if(this.pst=this.rst.lit(t,this.hst),e.itt())h&&this.nit(this.pst);else{const o=this.pst.JY();o&&this.nit(o)}}}rit(t){const s=this.rst.cit(t,this.hst);return s||this.rst.lit(t,this.hst)}nit(t){if(kr.V$.Timeline){const s=this.Tst(),i=s.jQ();kr.V$.Timeline.j$.PushTriggerTimeline(s),kr.V$.Timeline.j$.PushTriggerKeyframe(t),i.t4(kr.V$.Timeline.j$.OnAnyKeyframeReached),i.t4(kr.V$.Timeline.j$.nit),kr.V$.Timeline.j$.PopTriggerTimeline(s),kr.V$.Timeline.j$.PopTriggerKeyframe(t)}}fit(){const t=this.hst.yst(),s=t.dit();return s}pit(){const t=this.hst.Gst(),s=t.mit(),i=kr.xst.jM(this,s);return this.wst.push(i),i}git(t){const s=this.hst.yst();s.yit(t)}wit(t){for(const s of this.wst)s.wit(t)}Sit(){for(const t of this.wst)t.Sit()}bit(){if(this._st(),this.Ist()||!this.zQ())for(const t of this.wst)t.bit()}vit(){if(this._st(),this.Ist()||!this.zQ()){let t=!1;for(const s of this.wst){const i=s.vit();!t&&i&&(t=!0)}if(t){const e=this.fit();e.cW(this.Tst().zP()),e.EW("noease"),e.Xst(!0),e.ett("")}}}wK(){isNaN(this.dst)||this.Mit(this.dst),this.dst=NaN}QJ(){const t=this.RW(),s=t?t.EN():this.Cst();return{propertyTracksJson:this.Git(),lastKeyframeDataItemJson:this.xit(),initialStateOfNestedSet:this.cst,endStateOfNestedSet:this.fst,instanceUid:s,cleared:this.lst}}tq(t){if(t){this.Tit(t.propertyTracksJson),this._it(t.lastKeyframeDataItemJson),this.dst=t.instanceUid,this.cst=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.cst=t.initialStateOfNestedSet),this.fst=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.fst=t.endStateOfNestedSet),this.lst=!!t.hasOwnProperty("cleared")&&t.cleared;for(const s of this.wst)0===this.bst&&1===s.hit()&&(this.bst=1),0===this.MK&&1===s.dY()&&(this.MK=1);this.vst=0,this.wst.some(t=>t.Dtt())&&(this.vst=1)}}xit(){const t=this.hst.yst();return t.Iit(this.pst)}Git(){return this.wst.map(t=>t.QJ())}Tit(t){t.forEach((t,s)=>{const i=this.wst[s];i.tq(t)})}Mit(t){if(kr.le(t)){const s=this.IO().sO(t);if(s){const i=this.Tst();i.ztt(this.hst.DW(),s,this.Rst())}}}_it(t){const s=this.hst.yst();this.pst=s.Cit(t)}}}{const Nr=self.Os;Nr.xst=class extends Nr.Qh{constructor(t,s){super(),this.Eit=t,this.Rit=s,this.Pit=s.Gst(),this.bst=0,this.MK=0,this.vst=0,this.Ait=this.VQ(),this.Fit=this.Rit.Oit().Dit(),this.Lit=null,this.kit=null}static jM(t,s){return Nr.ir(Nr.xst,t,s)}er(){this.Eit=null,this.Ait&&(this.Ait.er(),this.Ait=null),this.Fit=null,this.Rit=null,this.Pit=null}hit(){return this.bst}dY(){return this.MK}Dtt(){return this.vst}Nit(){return!!this.kit}Bit(t){this.kit=t}Wit(){return this.kit}jit(){return this.Eit}Hit(){return this.Rit}Gst(){return this.Pit}Tst(){return this.Eit.Tst()}IO(){return this.Eit.IO()}RW(){return this.Eit.RW()}VQ(){if(!this.Ait){let t=this.Rit.Dst(),s;switch(t){case"behavior":s=new Nr.xst.Vit(this);break;case"effect":s=new Nr.xst.Uit(this),this.MK=1;break;case"instance-variable":s=new Nr.xst.zit(this);break;case"plugin":s=new Nr.xst.Jit(this),this.MK=1;break;case"world-instance":s=new Nr.xst.qit(this),this.MK=1,this.bst=1;break;case"value":s=new Nr.xst.$it(this);break;case"audio":s=new Nr.xst.Xit(this)}this.Ait=s}return this.Ait}Dst(){return this.Rit.Dst()}Kit(t){this.Rit.Kit(t)}Yit(){return this.Rit.Zit()}Qit(t){this.Rit.tet(t)}OW(){return this.VQ().iet()}Ktt(){return this.Rit.eet()}het(t){this.Rit.ret(t)}net(){return this.Rit.UG()}oet(t){this.Rit.aet(t)}uet(){return this.Gst().let(this.Rit).UG()}cet(){return this.Rit.cet()}fet(t){this.Rit.fet(t)}det(){return this.Rit.det()}pet(t){this.Rit.pet(t)}$st(){return this.Rit.$st()}Xst(t){this.Rit.Xst(t)}XQ(){return this.Rit.XQ()}KQ(t){this.Rit.KQ(t)}tZ(){return this.Rit.tZ()}YQ(t){this.Rit.YQ(t)}EW(t){for(const s of this.met())s.EW(t)}yet(){return this.Rit.yet()}met(){return this.Fit||(this.Fit=this.Rit.Oit().Dit()),this.Fit}zY(){return this.Rit.Oit().zY()}wet(t){return this.Pit.wet(t,this.Rit)}bet(t){return this.Pit.bet(t,this.Rit)}vet(t){let s=this.Pit.wet(t,this.Rit),i;return i=s?this.Pit.Met(t,this.Rit):(s=this.Pit.bet(t,this.Rit),this.Pit.Get(t,this.Rit)),{start:s,end:i}}*xet(){for(const t of this.met())yield t.oZ()}*Tet(){for(const t of this.met())yield t.zP()}Htt(){this.VQ().Htt()}MY(){this.VQ().MY()}_et(){return this.VQ()._et()}Ttt(){this.VQ().Ttt()}fY(t){this.VQ().fY(),this.Lit=this.Iet(t),this.Ftt()}Att(t){this.VQ().Att(),this.Lit=this.Iet(t)}Ftt(){const t=this.jit();if(this.vst=0,t.zQ()){const s=this.Tst(),i=t.RW(),e=this.VQ(),h=this.Ktt(),r=e.Cet();if(r){const n=s.HQ(i,e,h,this);n&&n.length&&(this.vst=1)}else this.vst=0}}Iet(t){const s=this.Tst(),i=this.Pit.wet(t,this.Rit);return i||(s.itt()?this.Pit.bet(t,this.Rit):this.Pit.Get(t,this.Rit))}ktt(){this.Ait.ktt()}Rc(t,s=!1,i=!1,e=!1){let h,r,n=!1;if(s)h=this.Pit.bet(t,this.Rit);else{if(this.Lit){const o=this.Tst(),a=this.Lit.JY(),u=this.Lit.zP(),l=a?a.zP():o.dW();(t<=u||l<=t)&&(this.Lit=this.Pit.bet(t,this.Rit),n=!0)}else this.Lit=this.Pit.bet(t,this.Rit),n=!0;h=this.Lit}h&&(r=h.JY()),this.Ait.Rc(t,h,r,s,i,e,n)}Eet(t){if(this.Lit){const e=this.Tst(),h=this.Lit.JY(),r=this.Lit.zP(),n=h?h.zP():e.dW();(t<=r||n<=t)&&(this.Lit=this.Pit.bet(t,this.Rit))}else this.Lit=this.Pit.bet(t,this.Rit);const s=this.Lit,i=s.JY();return this.Ait.Eet(t,s,i)}Ret(t,s,i){return this.Ait.Eet(t,s,i)}Btt(){this.Ait.Btt()}static Pet(t,s){const i=s.Hit(),e=s.Pit;return e.bet(t,i)}static Aet(t,s){const i=s.Hit(),e=s.Pit;return e.Get(t,i)}Fet(){const t=this.Rit.Oit(),s=t.Det();return this.Lit=null,s}wit(t){this.Lit=null;const s=this.Rit.Oit();s.Oet(t)}Sit(){this.VQ().Sit()}bit(){const t=this.VQ().bit();if(t){const s=this.Pit.let(this.Rit),i=this.VQ()._et();s.Let(i)}}vit(){const t=this.VQ().vit();return t&&this.ket(),this.VQ().Net(),t}ket(){const t=this.Tst().zP(),s=this.VQ(),i=Nr.xst.Pet(t,this),e=this.Fet();e.aet(i.UG()),e.cW(t),e.EW(i.Bet()),e.Xst(!0),e.Wet(s.jet()),e.Let(s._et())}QJ(){return{sourceAdapterJson:this.VQ().QJ()}}tq(t){t&&this.VQ().tq(t.sourceAdapterJson)}}}{const Br=self.Os,Wr=Br.xst;Wr.qit=class{constructor(t){this.Het=t,this.Vet=null,this.Uet()}er(){this.Vet&&(this.Vet.er(),this.Vet=null),this.Het=null}Cet(){return this.Vet.Cet()}LW(){return this.Het}Htt(){this.Vet&&this.Vet.Htt()}MY(){this.Vet&&this.Vet.MY()}Uet(){return this.Vet||(this.Vet=this.zet()),this.Vet}Ost(){}fF(){return this.Ost()}Jet(){}Ttt(){this.Uet().Ttt()}fY(){this.Uet().fY()}Att(){this.Uet().Att()}ktt(){this.Vet.qet()}Rc(t,s,i,e,h,r,n){let o=this.Het.uet(),a;switch(o){case"numeric":a=Wr.$et.Rc(t,s,i,this.Het);break;case"angle":a=Wr.Xet.Rc(t,s,i,this.Het);break;case"boolean":a=Wr.Ket.Rc(t,s,i,this.Het);break;case"color":a=Wr.Yet.Rc(t,s,i,this.Het);break;case"text":a=Wr.Zet.Rc(t,s,i,this.Het)}this.Vet.Qet(t,a,s,i,e,h,r,n)}Eet(t,s,i){switch(this.Het.uet()){case"numeric":return Wr.$et.Rc(t,s,i,this.Het);case"angle":return Wr.Xet.Rc(t,s,i,this.Het);case"boolean":return Wr.Ket.Rc(t,s,i,this.Het);case"color":return Wr.Yet.Rc(t,s,i,this.Het);case"text":return Wr.Zet.Rc(t,s,i,this.Het)}}Btt(){this.Vet.tht()}Sit(){this.Uet().sht()}Net(){this.Uet().Net()}_et(){return this.Uet()._et()}bit(){return this.Uet().bit()}vit(){return this.Uet().vit()}jet(){const t=this.Het,s=t.jit(),i=s.Tst().zP(),e=Wr.Pet(i,t),h=e.JY(),r=t.uet();switch(r){case"numeric":return Wr.$et.Rc(i,e,h,t);case"angle":return Wr.Xet.Rc(i,e,h,t);case"boolean":return Wr.Ket.Rc(i,e,h,t);case"color":return Wr.Yet.Rc(i,e,h,t);case"text":return Wr.Zet.Rc(i,e,h,t)}}zet(){const t=this.Het,s=t.yet()?t.uet():"";switch(s){case"combo":case"boolean":case"text":case"string":return new Wr.eht.iht(this);case"numeric":case"number":case"angle":return new("combo"===this.Het.net()?Wr.eht.iht:Wr.eht.hht)(this);case"color":case"offsetColor":return new Wr.eht.rht(this);default:return new Wr.eht.hht(this)}}QJ(){return{propertyAdapterJson:this.Uet().QJ()}}tq(t){t&&this.Uet().tq(t.propertyAdapterJson)}}}{const jr=self.Os;class Hr extends jr.xst.qit{constructor(t){super(t),this.nht=NaN}Ost(){return this.Het.Hit().Zit()[0]}fF(){return this.nht||super.fF()}Jet(){return this.Het.jit().RW()}Bst(t){const s=this.Het.Hit().Zit()[0];s!==t&&(this.nht=t)}Rc(t,s,i,e,h,r,n){this.Uet().oht(s.iet())&&super.Rc(t,s,i,e,h,r,n)}Eet(t,s,i){if(this.Uet().oht(s.iet()))return super.Eet(t,s,i)}QJ(){return Object.assign(super.QJ(),{index:this.nht})}tq(t){t&&(super.tq(t),this.nht=t.index)}}jr.xst.zit=Hr}{const Vr=self.Os;class Ur extends Vr.xst.qit{constructor(t){super(t),this.iU=NaN}Ost(){const t=this.Het.Hit();return t.Zit()[1]}Jet(){const t=this.Het.Hit(),s=this.Het.jit(),i=this.iU||t.Zit()[0],e=s.RW(),h=e.aht(i),r=e.uht()[h];return r.s6()}c6(t){const s=this.Het.Hit(),i=s.Zit()[2];return t.lht(i)}jst(t){const s=this.Het.Hit();s.Zit()[0]!==t&&(this.iU=t)}Rc(t,s,i,e,h,r,n){const o=this.Het.jit(),a=o.RW();this.c6(a.mN())&&super.Rc(t,s,i,e,h,r,n)}Eet(t,s,i){const e=this.Het.jit(),h=e.RW();if(this.c6(h.mN()))return super.Eet(t,s,i)}QJ(){return Object.assign(super.QJ(),{sid:this.iU})}tq(t){t&&(super.tq(t),this.iU=t.sid)}}Vr.xst.Vit=Ur}{const zr=self.Os;class Jr extends zr.xst.qit{constructor(t){super(t)}Ost(){return this.Het.Hit().Zit()[1]}Jet(){const t=this.Het,s=t.jit(),i=s.nO(),e=i.C4(),h=e.Fk(),r=this.Hst(h),n=r.fF();return e.y6(n)?e.cht(n):null}Hst(t){const s=this.Het,i=s.Hit().Zit()[0];return t.fht(i)}Rc(t,s,i,e,h,r,n){this.dht()&&super.Rc(t,s,i,e,h,r,n)}Eet(t,s,i){if(this.dht())return super.Eet(t,s,i)}dht(){const t=this.Het,s=t.jit(),i=s.nO(),e=i.C4(),h=e.Fk(),r=this.Hst(h);if(r){const n=r.fF();return e.y6(n)}}}zr.xst.Uit=Jr}{const qr=self.Os;class $r extends qr.xst.qit{constructor(t){super(t)}Ost(){return this.Het.Hit().Zit()[0]}Jet(){return this.Het.jit().RW().s6()}Rc(t,s,i,e,h,r,n){const o=this.Het.jit(),a=o.mN().uk(),u=o.RW().mN().uk();a===u&&super.Rc(t,s,i,e,h,r,n)}Eet(t,s,i){const e=this.Het.jit(),h=e.mN().uk(),r=e.RW().mN().uk();if(h===r)return super.Eet(t,s,i)}pht(){const t=this.Het.jit(),s=t.mN().uk();if(qr.V$.mht&&s instanceof qr.V$.mht&&("initial-frame"===this.Het.Ktt()||"initial-animation"===this.Het.Ktt()))switch(this.Het.tZ()){case"relative":case"absolute":return null}}}qr.xst.Jit=$r}{const Xr=self.Os;class Kr extends Xr.xst.qit{constructor(t){super(t),this.ght=0,this.yht=!1}Cet(){return!1}fY(){let t=this.Het.Gst(),s=this.Het.Hit();s=t.let(s),this.ght=s.oZ()}Att(){}iet(){return this.yht||this.Het.Rc(0),this.ght}Rc(t,s,i,e,h,r,n){this.ght=Xr.xst.$et.Rc(t,s,i,this.Het),this.yht=!0}Sit(){}Net(){}_et(){return this.ght}bit(){return!1}vit(){return!1}QJ(){return{value:this.ght,init:this.yht}}tq(t){t&&(this.ght=t.value,this.yht=!t.hasOwnProperty("init")||t.init)}}Xr.xst.$it=Kr}{const Yr=self.Os;class Zr extends Yr.xst.qit{constructor(t){super(t),this.wht=!1,this.Sht=null,this.bht=null,this.vht=null,this.BY=this.Het.Tst(),this.Eit=this.Het.jit(),this.Mht=this.Het.Yit(),this.Ght=this.Mht[0],this.xht=this.Mht[1],this.Mht[3]?this.Tht=this.Mht[3]:this.Tht=Math.random().toString(36).slice(2),this._ht=NaN,this.Iht=NaN,this.Cht=NaN,this.Eht=null,this.Rht()}er(){super.er(),this.Sht=null,this.bht=null,this.vht=null,this.BY=null,this.Eit=null,this.Mht=null,this.Ght=null,this.Eht=null}Rht(){if(self.Os.V$.Audio){const t=this.Het.IO(),s=t.Pht(self.Os.V$.Audio);s&&(this.Sht=s.rk().s6()),this.bht=self.Os.V$.Audio.Aht,this.vht=self.Os.V$.Audio.Fht}}Dht(){if(!this.Eht){const t=this.Het.jit(),s=t.LW("audioSource");s&&(this.Eht=s.VQ())}}Oht(){const t=this.Het.jit(),s=t.LW("volume");return(s?s.VQ():this).Iht}Htt(){super.Htt(),this.wht=!1,this.Sht&&(this.vht&&(this._ht=this.vht.PlaybackTime.call(this.Sht,this.Tht),this.Iht=this.vht.Volume.call(this.Sht,this.Tht)),this.bht)&&this.bht.aW.call(this.Sht,this.Tht)}Lht(){return this.Tht}kht(){return this.Cht}Nht(t){this.Cht=t}fY(){super.fY(),this._ht=NaN,this.wht=!1}Att(){super.Att();const t=this.Het.Tst(),s=t.zP();switch(this._ht=s-this.xht,this.Het.Ktt()){case"audioSource":break;case"volume":this.Iht=this.Het.Eet(s)}this.wht=!1}Rc(t,s,i,e,h,r,n){if(this.Sht)switch(this.Het.Ktt()){case"audioSource":{if(!this.BY.itt())return;if(e)return void(this.bht&&this.bht.aW.call(this.Sht,this.Tht));if(t<this.xht)return void(this.wht=!1);const o=this.vht.PlaybackRate.call(this.Sht,this.Tht),a=this.BY.SW();if(a!==o&&this.bht.wW.call(this.Sht,this.Tht,a),this.wht)return;if(!this.Het.Tst().IsPlaying())return;if(this.wht=!0,isNaN(this._ht)){const u=self.performance.now(),l=t-this.xht,c=this.Sht.GetAudioContextState();if("suspended"===c)return void(this.wht=!1);const f=self.performance.now(),d=(f-u)/1e3,p=l+d;if(this.bht){let t=this.kht();isNaN(t)?(this.Nht(0),t=0):this.Nht(t),this.bht.PlayFromTimeline.call(this.Sht,this.Ght,t,this.Tht,p)}}else{const m=this._ht,g=(this._ht=NaN,this.Oht()),y=(this.Iht=NaN,this.Sht.GetAudioContextState());if("suspended"===y)return void(this.wht=!1);this.bht&&(this.Nht(g),this.bht.PlayFromTimeline.call(this.Sht,this.Ght,g,this.Tht,m))}break}case"volume":this.Dht(),super.Rc(t,s,i,e,h,r,n)}}Eet(t,s,i){if(this.Sht)switch(this.Het.Ktt()){case"audioSource":return;case"volume":return this.Dht(),super.Eet(t,s,i)}}Bht(t,s){return this.Eht?this.Eht.kht():0}Wht(t,s,i,e){this.Eht&&this.Eht.Nht(this.Bht()+s),this.bht&&this.Eht&&this.bht.Nht.call(this.Sht,this.Eht.Lht(),this.Eht.kht())}jht(t,s,i){this.Eht&&this.Eht.Nht(s),this.bht&&this.Eht&&this.bht.Nht.call(this.Sht,this.Eht.Lht(),this.Eht.kht())}Hht(){return!0}QJ(){return{audioPlaybackStarted:this.wht,audioTag:this.Tht,pauseTime:this._ht,pauseVolume:this.Iht,volume:this.Cht}}tq(t){t&&(this.wht=t.audioPlaybackStarted,this.Tht=t.audioTag,this._ht=t.pauseTime,this.Iht=t.pauseVolume,this.Cht=t.volume,this.Rht())}}Yr.xst.Xit=Zr}{const Qr=self.Os;Qr.xst.eht=class{constructor(t){this.Ait=t,this.Het=t.LW(),this.ust=this.Het.jit().nO(),this.Vht=this.Het.Ktt(),this.Uht=!1,this.zht=null,this.Jht=null}er(){this.Ait=null,this.Het=null,this.ust=null,this.zht=null,this.Jht=null}Cet(){return!1}Htt(){}MY(){this.ust=null,this.zht=null,this.Jht=null}VQ(){return this.Ait}LW(){return this.Het}nO(){return this.ust||(this.ust=this.Het.jit().nO()),this.ust}qht(t){this.Uht=!!t}$ht(){return this.Uht}Ttt(){}fY(){}Att(){}sht(){this.zht=this._et()}Net(){this.zht=null}_et(){}bit(){}vit(){}oht(t){const s=typeof this.Xht(),i=typeof t;return s==i}qet(){}Qet(t,s,i,e,h,r,n,o){}tht(){}Kht(){const t=this.Yht(()=>{const t=this.Het.Hit(),s=this.Het.Gst();return s.let(t)},()=>{const t=this.Het.Hit(),s=this.Het.Gst();return s.Zht(t)});return t.Qht()}trt(){const t=this.Het.Tst(),e=t.zP()-this.Het.jit().Ntt(),s=this.Yht(()=>{const t=this.Het.Hit(),s=this.Het.Gst();return s.bet(e,t)},()=>{const t=this.Het.Hit(),s=this.Het.Gst(),i=s.Get(e,t);return i||s.Zht(t)});return s.Qht()}Yht(t,s){const i=this.Het.Tst();return(i.itt()?t:s)()}srt(t,s){const i=this.Het.tZ();return("relative"===i?t:s)()}irt(t,s){return(this.$ht()?(this.qht(!1),t):s)()}ert(t){}hrt(){return this.Ait.fF()}rrt(){return this.Jht||(this.Jht=this.Ait.Jet()),this.Jht}nrt(t,s,i,e,h,r){const n=this.Het.Dst();switch(n){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return h();case"audio":return r()}}QJ(){return{firstAbsoluteUpdate:this.Uht,saveState:this.zht}}tq(t){t&&(this.Uht=t.firstAbsoluteUpdate,this.zht=t.saveState)}ort(t,s=!1){const i=[];for(const e of t){const h=e.jit().Ntt();for(const r of e.met())(s&&0===r.zP()||!s)&&i.push({time:h+r.zP(),value:r.Qht()})}return i.sort((t,s)=>t.time-s.time)}art(t,s,i){return this.urt(s,i)}urt(s,i){for(let t=i.length-1;0<=t;t--){const e=i[t].time;if(e<=s)return i[t]}return null}}}{const tn=self.Os,sn=new Map,en=[0,0,0];class hn extends tn.xst.eht{constructor(t){super(t)}Ttt(){}fY(){}Att(){}_et(){const t=this.Het.Dst(),s=this.rrt(),i=this.hrt();switch(t){case"behavior":return this.lrt(s.crt(i));case"effect":return this.lrt(s[i]);case"plugin":return this.lrt(s.crt(i));case"world-instance":return this.lrt(this.Xht())}}bit(){const t=this.Kht();return!this.frt(t,this.Xht())}vit(){return!tn.pe(this.zht)&&!this.frt(this.zht,this.Xht())}frt(t,s){return t=this.drt(t),s=this.drt(s),t.ea(s)}Kht(){const t=super.Kht();return this.drt(t)}trt(){const t=super.trt();return this.drt(t)}ert(t){}lrt(t){return(tn.Ke(t,tn.Oo)?t.toArray():t).slice(0,3)}drt(t){return tn.Ke(t,tn.Oo)?t:new tn.Oo(t[0],t[1],t[2],1)}oht(t){return!0}Cet(){return!0}qet(){const t=this.Het.Tst(),s=this.Het.RW(),i=this.Het.VQ(),e=t.HQ(s,i,this.Vht,this.Het);if(e&&1<e.length){sn.has(s)||sn.set(s,new Map);const h=sn.get(s),r=this.Het.Dst(),n=(h.has(r)||h.set(r,new Map),h.get(r));n.has(this.Vht)||n.set(this.Vht,{prt:!1,color:new tn.Oo(0,0,0,1)})}}mrt(t,s,i){const e=sn.get(t).get(s).get(i);return e.prt=!0,e.color}Qet(t,s,i,e,h,r,n,o){const a=this.Het.Tst(),u=this.Het.jit(),l=this.Het.RW(),c=this.Het.VQ(),f=this.Het.Dst(),d=this.Vht,p=a.HQ(l,c,d,this.Het);if(p&&1<p.length){const m=this.ort(p,!0),g=this.art(a,a.zP(),m);if(g){const y=u.Ntt(),w=g.time-y;if(0==w)this.mrt(l,f,this.Vht).Ho(s[0],s[1],s[2]);else if(!(w<0)){const S=s[0],b=s[1],v=s[2],M=this.Het.Rc(w,!1,!0),G=tn.Oo.La(S,M[0]),x=tn.Oo.La(b,M[1]),T=tn.Oo.La(v,M[2]);this.mrt(l,f,this.Vht).Ho(G,x,T)}}}else this.grt(s[0],s[1],s[2])}tht(){const t=this.Het.RW();if(sn.has(t)){const s=sn.get(t),i=this.Het.Dst();if(s.has(i)){const e=s.get(i);if(e.has(this.Vht)){const h=e.get(this.Vht),r=h.prt,n=h.color;r&&this.grt(n.Xo(),n.Ko(),n.Yo()),0===e.size&&s.delete(i),0===s.size&&sn.delete(t)}}}}Xht(){const t=this.Het.Dst(),s=this.rrt(),i=this.hrt();switch(t){case"behavior":return this.drt(s.crt(i));case"effect":return s[i].clone();case"plugin":return this.drt(s.crt(i));case"world-instance":return this.nO().z4().clone()}}grt(t,s,i){const e=this.Het.Dst(),h=this.rrt(),r=this.hrt();switch(e){case"behavior":en[0]=t,en[1]=s,en[2]=i,h.yrt(r,en);break;case"effect":h[r].jo(t,s,i);break;case"plugin":en[0]=t,en[1]=s,en[2]=i,h.yrt(r,en);break;case"world-instance":this.nO().wrt(t,s,i)}}QJ(){}tq(t){}}tn.xst.eht.rht=hn}{const rn=self.Os,nn=rn.xst;class on extends rn.xst.eht{constructor(t){super(t)}Ttt(){}fY(){}Att(){}_et(){return this.Xht()}bit(){const t=this.Kht();return t!==this._et()}vit(){return!rn.pe(this.zht)&&this.zht!==this._et()}Cet(){return!1}Qet(t,s,i,e,h,r,n,o){const a=this.Het,u=a.jit(),l=a.Dst(),c=a.Tst(),f=u.RW(),d=a.VQ(),p=this.Vht,m=c.HQ(f,d,p,a);if(m&&1<m.length){const y=this.ort(m),w=t+u.Ntt(),S=this.art(c,w,y);S&&(s=S.value)}const g=a.uet();switch(g){case"numeric":if(nn.$et.Srt(this.hrt(),this.rrt(),s,l))break;return;case"angle":if(nn.Xet.Srt(this.hrt(),this.rrt(),s,l))break;return;case"boolean":if(nn.Ket.Srt(this.hrt(),this.rrt(),s,l))break;return;case"color":if(nn.Yet.Srt(this.hrt(),this.rrt(),s,l))break;return;case"text":if(!nn.Zet.Srt(this.hrt(),this.rrt(),s,l))return}this.grt(s)}Xht(){const t=this.Het.Dst(),s=this.rrt(),i=this.hrt();switch(t){case"behavior":return s.crt(i);case"effect":return s[i];case"instance-variable":return s.brt(i);case"plugin":return s.crt(i)}}grt(t){const s=this.Het.Dst(),i=this.rrt(),e=this.hrt();switch(s){case"behavior":i.yrt(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.vrt(e,t);break;case"plugin":i.yrt(e,t)}}}rn.xst.eht.iht=on}{const an=self.Os,un=(an.xst.eht,new Map),ln=(t,s,i,e,h,r=!1,n=null,o=null)=>{un.set(t,{Mrt:s,Grt:i,xrt:e,round:h,Trt:r,init:n,reset:o})};ln("offsetX",(t,s,i,e)=>{"relative"===e.Het.tZ()?t._rt(s,i.Tst().QQ()):t._rt(s)},(t,s)=>t.sv(s),t=>t.tv(),!0),ln("offsetY",(t,s,i,e)=>{"relative"===e.Het.tZ()?t.Irt(s,i.Tst().QQ()):t.Irt(s)},(t,s)=>t.nv(s),t=>t.rv(),!0),ln("offsetWidth",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.Het.tZ(),u=1===i.Crt.UG();if((h||u)&&s.SB()&&s._B()){if(isNaN(i.Ert)){let e=[],t=s.nB();for(;t;)e.push(t),t=t.nB();e.reverse();let a=(t,s)=>s.Tst().Ytt(t.RW()),h=(t,s)=>{const i=a(t,s);if(i)return i.Zst();const e=t.RW().s6();return e.Qst()?e.Zst():t.Prt().Rrt()},r=(t,s,i,e=0)=>{const h=a(t,s);if(!h)return e;const r=h.LW(i);if(!r)return e;const n=r.Hit().Oit();if(!n)return e;const o=n.Zht();return o?o.iet():e},n;if(u){let t=e[e.length-1];n=t.Xp()}else{let s=e[0],t=s.Prt().Rrt(),i=s.Prt().Art();n=t*i,n=(n+=r(s,o,"offsetWidth"))+h(s,o)*r(s,o,"offsetScaleX");for(let t=1;t<e.length;t++){const l=(s=e[t]).Prt().Art();n=(n=(n*=l)+r(s,o,"offsetWidth"))+h(s,o)*r(s,o,"offsetScaleX")}}i.Ert=0===n?Number.EPSILON:n}e||s.Am(t/i.Ert,!0)}else s.Am(t)}},(t,s)=>t.hm(s),t=>t.Xp(),!0),ln("offsetHeight",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.Het.tZ(),a=1===i.Crt.UG();if((h||a)&&s.SB()&&s.CB()){if(isNaN(i.Ert)){let e=[],t=s.nB();for(;t;)e.push(t),t=t.nB();e.reverse();let h=(t,s)=>{e=t;const i=s.Tst().Ytt(e.RW());var e;if(i)return i.sit();const h=t.RW().s6();return h.Qst()?h.sit():t.Prt().Frt()},r=(t,s,i,e=0)=>{const h=s.Tst().Ytt(t.RW());if(!h)return e;const r=h.LW(i);if(!r)return e;const n=r.Hit().Oit();if(!n)return e;const o=n.Zht();return o?o.iet():e},n;if(a){let t=e[e.length-1];n=t.om()}else{let s=e[0],t=s.Prt().Frt(),i=s.Prt().Drt();n=t*i,n=(n+=r(s,o,"offsetHeight"))+h(s,o)*r(s,o,"offsetScaleY");for(let t=1;t<e.length;t++){const u=(s=e[t]).Prt().Drt();n=(n=(n*=u)+r(s,o))+h(s,o)*r(s,o,"offsetScaleY")}}i.Ert=0===n?Number.EPSILON:n}e||s.Ort(t/i.Ert,!0)}else s.Ort(t)}},(t,s)=>t.Kp(s),t=>t.om(),!0),ln("offsetAngle",(t,s,i,e,h)=>{t.Lrt(s)},(t,s)=>t.Wk(s),t=>t.jk(),!1,!0),ln("offsetOpacity",(t,s,i,e,h)=>{const r=e.krt||1,n=(s/=r,t.mR()),o=n+s;if(0===e.Nrt)1<o?e.Nrt+=o-1:o<0&&(e.Nrt+=o),t.Brt(s);else{const a=t.mR()+s;0<s&&0<e.Nrt?1<a&&(e.Nrt+=a-1):0<s&&e.Nrt<0?(e.Nrt+=s,0<e.Nrt&&(t.Brt(e.Nrt),e.Nrt=0)):s<0&&0<e.Nrt?(e.Nrt+=s,e.Nrt<0&&(t.Brt(e.Nrt),e.Nrt=0)):s<0&&e.Nrt<0&&a<0&&(e.Nrt+=a)}},(t,s)=>{t.yR(s)},t=>t.mR(),!1,!0,(r,h,n)=>{switch(r.Nrt=0,r.Het.tZ()){case"relative":{r.Het.Gst();let t=r.Het.Hit(),s=t.Oit(),i=s.Dit(),e=r.nO().mR(),h=e;for(const o of i){const a=o.zP(),u=r.Het.Eet(a);h=e+u,h=an.lr(h,0,1)}r.Wrt=e-h,r.Wrt=Math.round(100*(r.Wrt+Number.EPSILON))/100,h=e;for(let t=i.length-1;0<=t;t--){const l=i[t].zP(),c=r.Het.Eet(l);h-=c,h=an.lr(h,0,1)}r.jrt=h,r.jrt=Math.round(100*(r.jrt+Number.EPSILON))/100;break}}const t="relative"===r.Het.tZ(),s=1===r.Crt.UG();if((t||s)&&h.SB()&&h.OB()){let s=[],t=h.nB();for(;t;)s.push(t),t=t.nB();s.reverse();let i=(t,s,i)=>{const e=s.Tst().Ytt(t.RW());if(!e)return 0;const h=e.LW(i);if(!h)return 0;const r=h.Hit().Oit();if(!r)return 0;const n=r.Zht();return n?n.iet():0},e=s[0].Prt().Hrt();e+=i(s[0],n,"offsetOpacity");for(let t=1;t<s.length;t++)e+=i(s[t],n,"offsetOpacity");r.krt=0===e?1:e}},i=>{switch(i.Het.tZ()){case"relative":{i.Nrt=0;let t=i.nO(),s=t.mR();s=Math.round(100*(s+Number.EPSILON))/100,i.Het.Tst().itt()?(t.yR(s+i.Wrt),i.jx=0):(t.yR(s-i.jrt),i.jx=i.VQ().jet());break}}}),ln("offsetOriginX",(t,s)=>t.Vrt(s),(t,s)=>t.Urt(s),t=>t.H6(),!1),ln("offsetOriginY",(t,s)=>t.zrt(s),(t,s)=>t.Jrt(s),t=>t.U6(),!1),ln("offsetZElevation",(t,s)=>t.qrt(s),(t,s)=>t.av(s),t=>t.ov(),!0),ln("offsetScaleX",(t,s,i,e)=>{if(0!==s){const h=t.Xp()<0?-1:1;if("relative"===e.Het.tZ()&&t.SB()&&t._B()){const r=i.Zst()*h*s;isNaN(e.Ert)&&un.get("offsetWidth").Mrt(t,1,i,e,!0),t.Am(r/e.Ert,!0)}else t.Am(i.Zst()*h*s)}},(t,s,i)=>{t.hm(i.Zst()*s)},(e,h)=>{const r=e.Xp()<0?-1:1;if(e._B()){let t=e.nB(),s=h.Tst().Ytt(t.RW()),i=NaN;if(s)i=t.Xp()/s.Zst();else{const n=t.RW().s6();i=n.Qst()?t.Xp()/n.Zst():1}return e.Xp()*r/(h.Zst()*i)}return e.Xp()*r/h.Zst()},!1),ln("offsetScaleY",(t,s,i,e)=>{if(0!==s){const h=t.om()<0?-1:1;if("relative"===e.Het.tZ()&&t.SB()&&t.CB()){const r=i.sit()*h*s;isNaN(e.Ert)&&un.get("offsetHeight").Mrt(t,1,i,e,!0),t.Ort(r/e.Ert,!0)}else t.Ort(i.sit()*h*s)}},(t,s,i)=>{t.Kp(i.sit()*s)},(e,h)=>{const r=e.om()<0?-1:1;if(e.CB()){let t=e.nB(),s=h.Tst().Ytt(t.RW()),i=NaN;if(s)i=t.om()/s.sit();else{const n=t.RW().s6();i=n.Qst()?t.om()/n.sit():1}return e.om()*r/(h.sit()*i)}return e.om()*r/h.sit()},!1);class cn extends an.xst.eht{constructor(t){super(t),this.jx=0,this.Nrt=0,this.Wrt=0,this.jrt=0,this.krt=NaN,this.Ert=NaN,this.$rt=void 0,this.Xrt=void 0,this.Krt=null,this.Yrt=null,this.Zrt=null,this.Qrt=null,this.tnt=null,this.snt=null,this.int=null,this.ent=null,this.hnt=!1,this.rnt=!1,an.Ke(this.Het.Tst(),an.nnt)?this.Crt=new an.xst.eht.ont(this):this.Crt=new an.xst.eht.ant(this);const s=this.Het.Ktt();switch(this.Het.Dst()){case"world-instance":{const i=un.get(s);this.Krt=i.xrt,this.Yrt=i.Mrt,this.Zrt=i.Grt,this.hnt=i.round,this.rnt=i.Trt,this.tnt=i.init,this.Qrt=i.reset;break}case"audio":this.snt=t.Bht,this.int=t.Wht,this.ent=t.jht,this.hnt=!!t.Hht(),this.rnt=!1}}er(){this.Crt=null,this.Krt=null,this.Yrt=null,this.Zrt=null,this.Qrt=null,this.tnt=null,this.snt=null,this.int=null,this.ent=null,super.er()}Cet(){return this.Crt.Cet()}unt(){return this.jx}lnt(t){this.jx=t}Ttt(){this.Qrt&&this.Qrt(this)}fY(){const t=this.Crt.fY();if("number"==typeof t&&(this.jx=t),this.tnt){const s=this.nO(),i=this.Het.jit();this.tnt(this,s,i)}}Att(){const t=this.Crt.Att();"number"==typeof t&&(this.jx=t)}_et(){return this.Xht()}bit(){const t=this.Kht();return t!==this._et()}vit(){return!an.pe(this.zht)&&this.zht!==this._et()}qet(){this.Crt.qet()}Qet(t,s,i,e,h,r,n,o){return this.Crt.Qet(t,s,i,e,h,r,n,o)}tht(){this.Crt.tht()}Xht(){const t=this.rrt(),s=this.hrt(),i=this.nO(),e=this.Het.jit(),h=this.Het.Dst();switch(h){case"behavior":return t.crt(s);case"effect":return t[s];case"instance-variable":return t.brt(s);case"plugin":return t.crt(s);case"world-instance":return this.Krt(i,e);case"audio":return this.snt.call(this.VQ(),i,e)}}grt(t,s,i){const e=this.rrt(),h=this.hrt(),r=this.nO(),n=this.Het.jit(),o=this.Het.Dst();switch(o){case"behavior":e.cnt(h,t);break;case"effect":e[h]+=t;break;case"instance-variable":e.fnt(h,t);break;case"plugin":e.cnt(h,t,this.VQ().pht());break;case"world-instance":this.Yrt(r,t,n,this);break;case"audio":this.int.call(this.VQ(),r,t,n,this)}}dnt(t,s,i){let e=this.Het.XQ();if("discrete"!==(e="default"===e?"continuous":e)||s){if("discrete"===e&&i){const u=this.Het.Tst(),l=u.zP(),c=this.Het.wet(l);if(!c)return}const h=this.rrt(),r=this.hrt(),n=this.nO(),o=this.Het.jit(),a=this.Het.Dst();switch(a){case"behavior":h.yrt(r,t);break;case"effect":h[r]=t;break;case"instance-variable":h.vrt(r,t);break;case"plugin":h.yrt(r,t,this.VQ().pht());break;case"world-instance":this.Zrt(n,t,o);break;case"audio":this.ent.call(this.VQ(),n,t,o)}}}pnt(t,s,i,e,h,r,n,o){this.Crt.pnt(t,s,i,e,h,r,n,o)}mnt(t,s,i,e,h){let r=(t="angle"===this.Het.net()?an.pr(t):t).toString(),n=r.split(".")[1]||"",o=n.length,a=this.Xht(),u;switch(u=0===o?this.hnt?Math.round(a):this.rnt?"angle"===this.Het.net()?an.dr(Math.round(an.pr(a))):Number(an.toFixed(a,2)):a:this.hnt?Number(an.toFixed(a,o)):(this.rnt,a),this.grt(u-a,s,i),this.Het.Ktt()){case"offsetWidth":case"offsetScaleX":{const l=this.nO(),c=l.Xp(),f=Number(an.toFixed(c,2));l.Am(f-c);break}case"offsetHeight":case"offsetScaleY":{const d=this.nO(),p=d.om(),m=Number(an.toFixed(p,2));d.Ort(m-p);break}}}QJ(){return Object.assign(super.QJ(),{v:this.jx,a:this.Nrt,fod:this.Wrt,bod:this.jrt,of:this.krt,sf:this.Ert,armorf:this.$rt,armandf:this.Xrt})}tq(t){t&&(super.tq(t),this.jx=t.v,this.Nrt=t.a,this.Wrt=an.le(t.fod)?t.fod:0,this.jrt=an.le(t.bod)?t.bod:0,this.krt=an.le(t.of)?t.of:NaN,this.Ert=an.le(t.sf)?t.sf:NaN,this.$rt=an.le(t.armorf)?t.armorf:void 0,this.Xrt=an.le(t.armandf)?t.armandf:void 0)}}an.xst.eht.hht=cn}{const fn=self.Os;class dn{constructor(t){this.gnt=!1,this.ght=0,this.ynt=!1,this.wnt=!1,this.wst=t;for(let t=0,s=this.wst.length;t<s;t++)this.wst[t].Bit(this)}Xtt(){return this.wst}Snt(){this.gnt=!0}bnt(){return this.gnt}Wet(t){this.ght=t}iet(){return this.ght}vnt(t){this.ynt=t}Mnt(){return this.ynt}Ltt(t){this.wnt=t}Gnt(){return this.wnt}Yf(){this.gnt=!1,this.ght=0,this.ynt=!1,this.wnt=!1}}class pn{constructor(t){this.xnt=t}er(){this.xnt=null}UG(){return 0}fY(){const t=this.xnt;return this.xnt.LW(),t.srt(()=>t.Yht(()=>0,()=>t.VQ().jet()),()=>{})}Att(){}Cet(){this.xnt;const t=this.xnt.LW();switch(t.tZ()){case"relative":return!1;case"absolute":return!0}}qet(){this.xnt;const t=this.xnt.LW(),s=t.Ktt();switch(t.tZ()){case"relative":break;case"absolute":if(t.Nit()){const i=t.Wit();i.Yf()}else{const e=t.Tst(),h=t.RW(),r=t.VQ(),n=e.HQ(h,r,s,t);n&&1<n.length&&new dn(n)}}}Qet(t,s,i,e,h,r,n,o){const a=this.xnt,u=this.xnt.LW();switch(u.tZ()){case"relative":{const l=a.unt();a.grt(s-l,i,e),r&&this.pnt(t,i,e,h,l,s),a.lnt(s);break}case"absolute":{const c=u.Tst(),f=u.jit();if(u.RW(),u.VQ(),u.Nit()){const d=u.Wit(),p=d.Xtt(),m=a.ort(p,!0),g=a.art(c,c.zP(),m);if(g){const y=f.Ntt(),w=g.time-y;if(0==w)d.Ltt(n),d.vnt(o),d.Snt(),d.Wet(d.iet()+s);else{if(w<0)return;const S=u.Eet(w);d.Ltt(n),d.vnt(o),d.Snt(),d.Wet(d.iet()+(s-S))}}}else a.dnt(s,o,n);break}}}tht(){const t=this.xnt,s=this.xnt.LW();switch(s.tZ()){case"relative":break;case"absolute":if(s.Nit()){const i=s.Wit();i.bnt()&&t.dnt(i.iet(),i.Mnt(),i.Gnt())}}}pnt(t,s,i,e,h,r){const n=this.xnt;e||(s&&t===s.zP()?n.mnt(s.oZ(),s,i):i&&t===i.zP()?n.mnt(i.oZ(),s,i):r-h==0&&n.mnt(s.oZ(),s,i))}}fn.xst.eht.ant=pn}{const mn=self.Os;class gn{constructor(t){this.xnt=t}er(){this.xnt=null}UG(){return 1}fY(){const t=this.xnt;return t.qht(!0),this.ert(t.Kht())}Att(){const t=this.xnt;if(t.Kht()!==t.trt())return t.qht(!0),this.ert(t.trt())}Cet(){return!1}qet(){}Qet(t,s,i,e,h,r,n,o){const a=this.xnt,u=a.unt();switch(a.LW().tZ()){case"relative":a.grt(s-u,i,e),r&&this.pnt(t,i,e,h,u,s,!1,n);break;case"absolute":a.$ht()?(a.qht(!1),a.grt(u,i,e)):0===t&&0===a.LW().Tst().dW()?a.dnt(s,!0,!1):(a.grt(s-u,i,e),r&&this.pnt(t,i,e,h,u,s,this.Tnt(),n))}a.lnt(s)}tht(){}ert(t){const s=this.xnt;return t-s._et()}Tnt(){let t=this.xnt,s=t.nO().RW(),i=t.LW().IO(),e=i.jQ(),h=0;for(const r of e.WK())0===r.UG()?r.zK(s)&&h++:1===r.UG()&&r.RW()===s&&h++;return h<=1}pnt(t,s,i,e,h,r,n,o){const a=this.xnt;e?s&&t===s.zP()?a.mnt(s.oZ(),s,i,n,o):i&&t===i.zP()?a.mnt(i.oZ(),s,i,n,o):i||a.mnt(s.oZ(),s,i,n,o):s&&t===s.zP()?a.mnt(s.oZ(),s,i,n,o):i&&t===i.zP()?a.mnt(i.oZ(),s,i,n,o):r-h==0&&a.mnt(s.oZ(),s,i,n,o)}}mn.xst.eht.ont=gn}{const yn=self.Os,wn=self.ic;yn.xst.$et=class{constructor(){}static Srt(t,s,i,e){let h;switch(e){case"behavior":h=s.crt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.brt(t);break;case"plugin":h=s.crt(t)}return h!==i}static Rc(r,n,o,a){if(!o){let t=a.Hit(),s=a.Gst();return(t=s.Zht(t)).oZ()}let u=a.XQ();if("default"===u&&(u="continuous"),"discrete"===(u="combo"===a.net()?"discrete":u))return n.oZ();if("continuous"===u||"step"===u){const l=a.Tst().qQ();if("step"===u&&0!==l){const g=1/l;r=Math.floor(r*g)/g}const c=n.oZ(),f=o.oZ(),d=n.rZ("cubic-bezier"),p=o.rZ("cubic-bezier"),m=d&&d._nt()&&p&&p.Int();if(!m&&c===f)return c;let t=n.zP(),s=o.zP(),i=("step"===u&&0!==l&&(r=yn.lr(r,t,s)),yn.normalize(r,t,s)),e=n.Bet(),h;if(m){const y=s-t;h=wn.Sc(e)(y*i,0,1,y),h=wn.Sc("cubicbezier")(h,c,c+d.lZ(),f+p.dZ(),f)}else h=wn.Sc(e)((s-t)*i,c,f-c,s-t);return"integer"===a.net()?Math.floor(h):h}}}}{const Sn=self.Os;Sn.xst.Xet=class{constructor(){}static Srt(t,s,i,e){let h;switch(e){case"behavior":h=s.crt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.brt(t);break;case"plugin":h=s.crt(t)}return h!==i}static Rc(t,s,i,e){if(!i){let t=e.Hit(),s=e.Gst();return(t=s.Zht(t)).oZ()}let h=e.XQ();if("default"===h&&(h="continuous"),"discrete"===(h="combo"===e.net()?"discrete":h))return s.oZ();if("continuous"===h||"step"===h){const r=e.Tst().qQ();if("step"===h&&0!==r){const c=1/r;t=Math.floor(t*c)/c}const n=s.zP(),o=i.zP(),a=s.oZ(),u=i.oZ(),l=("step"===h&&0!==r&&(t=Sn.lr(t,n,o)),s.rZ("angle"));if(!l){if(a===u)return a;const f=Sn.normalize(t,n,o),d=self.ic.Sc(s.Bet());return Sn.vr(a,u,d(f,0,1,1))}{const p=l.Cnt();if(a===u&&0===p)return a;const m=Sn.normalize(t,n,o),g=self.ic.Sc(s.Bet()),y=g(m,0,1,1);switch(l.Ent()){case"closest":return Sn.vr(a,u,y,p);case"clockwise":return Sn.Mr(a,u,y,p);case"anti-clockwise":return Sn.Gr(a,u,y,p)}}}}}}{const bn=self.Os;bn.xst.Ket=class{constructor(){}static Srt(t,s,i,e){let h;switch(e){case"behavior":h=s.crt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.brt(t);break;case"plugin":h=s.crt(t)}return!!h!=!!i}static Rc(t,s,i,e){if(i)return s.oZ()?1:0;{let t=e.Hit(),s=e.Gst();return(t=s.Zht(t)).oZ()?1:0}}}}{const vn=self.Os,Mn=[0,0,0],Gn=[0,0,0],xn=[0,0,0];vn.xst.Yet=class{constructor(){}static Srt(t,s,i,e){let h;switch(e){case"behavior":h=s.crt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.brt(t);break;case"plugin":h=s.crt(t)}return Array.isArray(i)?(Mn[0]=i[0],Mn[1]=i[1],Mn[2]=i[2]):(xn.Sa(i),Mn[0]=Math.floor(255*xn.Xo()),Mn[1]=Math.floor(255*xn.Ko()),Mn[2]=Math.floor(255*xn.Yo())),Array.isArray(h)?(Gn[0]=h[0],Gn[1]=h[1],Gn[2]=h[2]):(xn.Sa(h),Gn[0]=Math.floor(255*xn.Xo()),Gn[1]=Math.floor(255*xn.Ko()),Gn[2]=Math.floor(255*xn.Yo())),Mn[0]!==Gn[0]||Mn[1]!==Gn[1]||Mn[2]!==Gn[2]}static Rc(t,s,i,e){if(!i){let t=e.Hit(),s=e.Gst(),i=(t=s.Zht(t)).oZ();return Mn[0]=i[0],Mn[1]=i[1],Mn[2]=i[2],Mn}let h=e.XQ();if("discrete"===(h="default"===h?"continuous":h)){const r=s.oZ();return Mn[0]=r[0],Mn[1]=r[1],Mn[2]=r[2],Mn}if("continuous"===h||"step"===h){const n=e.Tst().qQ();if("step"===h&&0!==n){const M=1/n;t=Math.floor(t*M)/M}const o=s.zP(),a=i.zP(),u=s.oZ(),l=i.oZ(),c=("step"===h&&0!==n&&(t=vn.lr(t,o,a)),vn.normalize(t,o,a)),f=s.Bet(),d=u[0],p=u[1],m=u[2],g=l[0],y=l[1],w=l[2],S=self.ic.Sc(f),b=a-o,v=b*c;return Mn[0]=d===g?d:S(v,d,g-d,b),Mn[1]=p===y?p:S(v,p,y-p,b),Mn[2]=m===w?m:S(v,m,w-m,b),Mn}}}}{const Tn=self.Os;Tn.xst.Zet=class{constructor(){}static Srt(t,s,i,e){let h;switch(e){case"behavior":h=s.crt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.brt(t);break;case"plugin":h=s.crt(t)}return h!==i}static Rc(t,s,i,e){if(i)return s.oZ();{let t=e.Hit(),s=e.Gst();return(t=s.Zht(t)).oZ()}}}}{const _n=self.Os;_n.qX=class{constructor(){this.Rnt=new Map}er(){for(const t of this.Rnt.values())t.er();this.Rnt.clear(),this.Rnt=null}Ql(t){const s=new _n.Pnt(t),i=s.Wc();this.Rnt.set(i,s)}Qs(t){return this.Rnt.get(t)}DQ(){return 0}static Ant(t,s,i,e){if(s)for(const h of s)_n.qX.Fnt("create",h,t,i,e)}static Dnt(t,s,i,e){if(s)for(const h of s)_n.qX.Fnt("create-including-disabled",h,t,i,e)}static Ont(i,t,s,e){i.length?t.forEach((t,s)=>{i[s].tq(t)}):t.forEach(t=>{_n.qX.Fnt("load",t,i,s,e)})}static Fnt(t,s,i,e,h){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,h);break;case"create":case"create-including-disabled":r=new e(s,h)}else if("object"==typeof e){const n=e.prop,o=s[n],a=e.map.get(o);switch(t){case"load":r=new a(null,h);break;case"create":case"create-including-disabled":r=new a(s,h)}}switch(t){case"load":r.tq(s),i.push(r);break;case"create":if("function"==typeof r.$st&&!r.$st())return r.er();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const In=self.Os;In.Pnt=class{constructor(t){this.nr="",this.Ott=NaN,this.Lnt=0,this.knt="default",this.Nnt="default",this.Bnt=!1,this.Wnt=!1,this.jnt=1,this.rst=null,this.Hnt="",this.Vnt=!1,this.Unt=!0,t&&(this.nr=t[0],this.Ott=t[1],this.Lnt=t[2],this.knt=t[3],this.Nnt=t[4],this.Bnt=!!t[6],this.Wnt=!!t[7],this.jnt=t[8],this.Hnt=t[9],this.Vnt=!!t[10],this.Unt=!!t[11],this.rst=new In.znt(t[5],this))}er(){this.rst.er(),this.rst=null}BQ(){return this.rst||(this.rst=new In.znt(null,this)),this.rst}Wc(){return this.nr}T8(t){this.nr=t}dW(){return this.Ott}fW(t){this.Ott=t}qQ(){return this.Lnt}$Q(t){this.Lnt=t}XQ(){return this.knt}KQ(t){this.knt=t}tZ(){return this.Nnt}YQ(t){this.Nnt=t}mW(){return this.Bnt}pW(t){this.Bnt=t}yW(){return this.Wnt}gW(t){this.Wnt=t}_6(){return this.jnt}ZQ(t){this.jnt=t}GY(){return this.Hnt}QQ(){return this.Vnt}ttt(){return this.Unt}QJ(){return{trackDataJson:this.rst.QJ(),name:this.nr,totalTime:this.Ott,step:this.Lnt,interpolationMode:this.knt,resultMode:this.Nnt,loop:this.Bnt,pingPong:this.Wnt,repeatCount:this.jnt,startOnLayout:this.Hnt,transformWithSceneGraph:!!this.Vnt,useSystemTimescale:this.Unt}}tq(t){t&&(this.BQ().tq(t.trackDataJson),this.nr=t.name,this.Ott=t.totalTime,this.Lnt=t.step,this.knt=t.interpolationMode,this.Nnt=t.resultMode,this.Bnt=t.loop,this.Wnt=t.pingPong,this.jnt=t.repeatCount,this.Hnt=t.startOnLayout,this.Vnt=!!t.transformWithSceneGraph,this.Unt=!!t.useSystemTimescale)}}}{const Cn=self.Os;class En{constructor(t,s){this.rst=s,this.Jnt=null,this.qnt=null,this.nst=NaN,this.ost=NaN,this.knt="default",this.Nnt="default",this._l=!1,this.$nt=null,this.Pit=null,this.Kc="",this.Xnt=null,this.Knt=0,this.Ynt=this.rst.JQ().dW(),this.ef=0,this.nr="",t&&(t[0]&&(this.Jnt=t[0],this.nst=t[0][2],this.ost=t[0][1]),this.knt=t[1],this.Nnt=t[2],this._l=!!t[3],t[6]&&(this.Kc=t[6]),t[7]&&(this.Xnt=t[7],this.Knt=t[7][0],this.Ynt=t[7][1]),t[8]&&(this.qnt=t[8]),t[8]&&(this.qnt=t[8]),t[9]&&(this.ef=t[9]),t[10]&&(this.nr=t[10]),this.$nt=new Cn.Znt(t[4],this),this.Pit=new Cn.Qnt(t[5],this))}er(){this.Jnt=null,this.rst=null,this.$nt&&(this.$nt.er(),this.$nt=null),this.Pit&&(this.Pit.er(),this.Pit=null),this.Xnt=null}BQ(){return this.rst}yst(){return this.$nt||(this.$nt=new Cn.Znt(null,this)),this.$nt}Gst(){return this.Pit||(this.Pit=new Cn.Qnt(null,this)),this.Pit}tot(){return this.Jnt}Est(){return this.ost}Kst(t){this.ost=t}Cst(){return this.nst}zst(t){this.nst=t}XQ(){return this.knt}KQ(t){this.knt=t}tZ(){return this.Nnt}YQ(t){this.Nnt=t}$st(){return this._l}Xst(t){this._l=!!t}DW(){return this.Kc}Ntt(){return this.Knt}Jst(){return this.Ynt}qst(t){this.Ynt=t}Zst(){return this.qnt[0]}Yst(t){this.qnt||(this.qnt=[]),this.qnt[0]=t}sit(){return this.qnt||(this.qnt=[]),this.qnt[1]}tit(t){this.qnt||(this.qnt=[]),this.qnt[1]=t}UG(){return this.ef}Wc(){return this.nr}QJ(){return{keyframeDataJson:this.$nt.QJ(),propertyTrackDataJson:this.Pit.QJ(),instanceData:this.Jnt,additionalInstanceData:this.qnt,instanceUid:this.nst,objectClassIndex:this.ost,interpolationMode:this.knt,resultMode:this.Nnt,enabled:this._l,id:this.Kc,nestedData:this.Xnt,type:this.ef,name:this.nr}}tq(t){t&&(this.Jnt=t.instanceData,this.nst=t.instanceUid,this.ost=t.objectClassIndex,this.knt=t.interpolationMode,this.Nnt=t.resultMode,this._l=t.enabled,this.Kc=t.id,this.ef=t.type||0,this.nr=t.name||"",this.Ynt=this.rst.JQ().dW(),t.nestedData&&(this.Xnt=t.nestedData,this.Knt=this.Xnt[0],this.Ynt=this.Xnt[1]),t.additionalInstanceData&&(this.qnt=t.additionalInstanceData),this.yst().tq(t.keyframeDataJson),this.Gst().tq(t.propertyTrackDataJson))}}Cn.znt=class{constructor(t,s){this.hQ=s,this.sot=[],Cn.qX.Ant(this.sot,t,En,this)}er(){this.hQ=null;for(const t of this.sot)t.er();Cn.Pn(this.sot),this.sot=null}JQ(){return this.hQ}jtt(){const t=new En(null,this);return this.sot.push(t),t}iot(t){return t.yst().gst()[0]}eot(t){const s=t.yst().gst();return s.at(-1)}cit(s,t){const i=t.yst().gst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.zP()===s)return h}}hot(s,t){const i=t.yst().gst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.zP()>s)return h}}rot(s,t){const i=t.yst().gst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.zP()>=s)return h}}lit(s,t){const i=t.yst().gst();for(let t=i.length-1;0<=t;t--){const e=i[t];if(e.zP()<=s)return e}}*NQ(){for(const t of this.sot)yield t}QJ(){return{trackDataItemsJson:this.sot.map(t=>t.QJ())}}tq(t){t&&Cn.qX.Ont(this.sot,t.trackDataItemsJson,En,this)}}}{const Rn=self.Os;class Pn{constructor(t,s){this.Pit=s,this.not="",this.oot=null,this.Vht=null,this.ef=null,this.aot=NaN,this.uot=NaN,this.knt="default",this.Nnt="default",this._l=!1,this.lot=null,this.cot=!0,t&&(this.not=t[0][0],this.oot=t[0].slice(1),this.Vht=t[1],this.ef=t[2],this.aot=t[3],this.uot=t[4],this.knt=t[5],this.Nnt=t[6],this._l=!!t[7],this.lot=new Rn.fot(t[8],this),this.cot=t[9])}er(){this.lot.er(),this.lot=null,this.Pit=null,this.oot=null}Gst(){return this.Pit}Oit(){return this.lot||(this.lot=new Rn.fot(null,this)),this.lot}Dst(){return this.not}Kit(t){this.not=t}Zit(){return this.oot}tet(t){this.oot=t}eet(){return this.Vht}ret(t){this.Vht=t}UG(){return this.ef}aet(t){this.ef=t}cet(){return this.aot}fet(t){this.aot=t}det(){return this.uot}pet(t){this.uot=t}XQ(){return this.knt}KQ(t){this.knt=t}tZ(){return this.Nnt}YQ(t){this.Nnt=t}$st(){return this._l}Xst(t){this._l=!!t}yet(){return!!this.cot}QJ(){return{propertyKeyframeDataJson:this.lot.QJ(),sourceAdapterId:this.not,sourceAdapterArguments:this.oot,property:this.Vht,type:this.ef,min:this.aot,max:this.uot,interpolationMode:this.knt,resultMode:this.Nnt,enabled:this._l,canHavePropertyKeyframes:this.cot}}tq(t){t&&(this.not=t.sourceAdapterId,this.oot=t.sourceAdapterArguments,this.Vht=t.property,this.ef=t.type,this.aot=t.min,this.uot=t.max,this.knt=t.interpolationMode,this.Nnt=t.resultMode,this._l=t.enabled,this.cot=t.canHavePropertyKeyframes,this.Oit().tq(t.propertyKeyframeDataJson))}}Rn.Qnt=class{constructor(t,s){this.hst=s,this.dot=[],Rn.qX.Ant(this.dot,t,Pn,this)}er(){this.hst=null;for(const t of this.dot)t.er();Rn.Pn(this.dot),this.dot=null}Ust(){return this.hst}mit(){const t=new Pn(null,this);return this.dot.push(t),t}let(t){const s=t.Oit();return s.Dit()[0]}Zht(t){const s=t.Oit(),i=s.Dit();return i.at(-1)}wet(s,t){const i=t.Oit(),e=i.Dit(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.zP()===s)return r}}Met(s,t){const i=t.Oit(),e=i.Dit(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.zP()>s)return r}}Get(s,t){const i=t.Oit(),e=i.Dit(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.zP()>=s)return r}}bet(s,t){const i=t.Oit(),e=i.Dit();for(let t=e.length-1;0<=t;t--){const h=e[t];if(h.zP()<=s)return h}}*Mst(){for(const t of this.dot)yield t}QJ(){return{propertyTrackDataItemsJson:this.dot.map(t=>t.QJ())}}tq(t){t&&Rn.qX.Ont(this.dot,t.propertyTrackDataItemsJson,Pn,this)}}}{const An=self.Os;class Fn{constructor(t,s){if(this.$nt=s,this.jA=-1,this.pot="noease",this.mot=!1,this.EQ=null,this.got=null,t){this.jA=t[0],this.pot=t[1],this.mot=!!t[2];const i=t[3];this.EQ=i?i.split(" "):[],this.got=new Set(this.EQ.map(t=>t.toLowerCase())),this.yot=null}}er(){this.$nt=null,An.Pn(this.EQ),this.EQ=null,this.got.clear(),this.got=null,this.yot=null}yst(){return this.$nt}JY(){return this.yot}wot(t){this.yot=t}zP(){return this.jA}cW(t){this.jA=t,this.$nt.Sot()}Bet(){return this.pot}EW(t){this.pot=t}$st(){return this.mot}Xst(t){this.mot=!!t}bW(){return this.EQ}ett(t){this.EQ=t?t.split(" "):[],this.got=new Set(this.EQ.map(t=>t.toLowerCase()))}bot(){return this.got}tst(t){return this.got.has(t.toLowerCase())}QJ(){return{time:this.jA,ease:this.pot,enable:this.mot,tags:this.EQ}}tq(t){t&&(this.jA=t.time,this.pot=t.ease,this.mot=t.enable,this.EQ=t.tags,this.got=new Set(this.EQ.map(t=>t.toLowerCase())))}}An.Znt=class{constructor(t,s){this.hst=s,this.mst=[],An.qX.Ant(this.mst,t,Fn,this),this.Sot()}er(){this.hst=null;for(const t of this.mst)t.er();An.Pn(this.mst),this.mst=null}Sot(){this.mst.sort((t,s)=>t.zP()-s.zP());for(let t=0;t<this.mst.length;t++){const s=this.mst[t];s.wot(this.mst[t+1])}}Ust(){return this.hst}vot(){return this.mst.length}gst(){return this.mst}dit(){const t=new Fn(null,this);return this.mst.push(t),this.Sot(),t}yit(t){for(const s of this.mst)if(t(s)){const i=this.mst.indexOf(s);-1!==i&&(s.er(),this.mst.splice(i,1))}this.Mot(),this.Sot()}Mot(){this.mst.sort((t,s)=>t.zP()-s.zP())}Iit(t){return this.mst.indexOf(t)}Cit(t){return this.mst[t]}*Got(){for(const t of this.mst)yield t}*xot(){for(let t=this.mst.length-1;0<=t;t--)yield this.mst[t]}QJ(){return{keyframeDataItemsJson:this.mst.map(t=>t.QJ())}}tq(t){t&&(An.qX.Ont(this.mst,t.keyframeDataItemsJson,Fn,this),this.Sot())}}}{const Dn=self.Os;class On{constructor(t,s){this.lot=s,this.ght=null,this.Tot=null,this.ef="",this.jA=NaN,this.pot="noease",this.mot=!1,this._ot=null,this.Iot=void 0,this.Cot="line",t&&(this.ght=t[0][0],this.Tot=t[0][1],this.ef=t[0][2],this.jA=t[1],this.pot=t[2],this.mot=!!t[3],this.Cot=t[5],this._ot=null,t[4]&&(this._ot=new Dn.Eot(t[4],this)),this.yot=null,this.Rot=null)}er(){this.lot=null,this._ot&&(this._ot.er(),this._ot=null),this.yot=null,this.Rot=null}Pot(){return this._ot}wot(t){this.yot=t}JY(){return this.yot}Aot(t){this.Rot=t}qY(){return this.Rot}iet(){return this.ght}Wet(t){"color"===this.ef&&Dn.le(t)?(this.ght[0]=Dn.Wr(t),this.ght[1]=Dn.jr(t),this.ght[2]=Dn.Hr(t)):this.ght=t}Qht(){return this.Tot}Let(t){"color"===this.ef&&Dn.le(t)?(this.Tot[0]=Dn.Wr(t),this.Tot[1]=Dn.jr(t),this.Tot[2]=Dn.Hr(t)):this.Tot=t}oZ(){const t=this.lot.Hit().tZ();return"relative"===t?this.iet():"absolute"===t?this.Qht():void 0}UG(){return this.ef}aet(t){this.ef=t}zP(){return this.jA}cW(t){this.jA=t,this.lot.Fot()}Bet(){return this.pot}EW(t){this.pot=t}$st(){return this.mot}Xst(t){this.mot=!!t}$Y(){return this.Cot}rZ(s){if(this._ot){if(!this.Iot&&null!==this.Iot){const i=this._ot.Dot();if(i){const e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.DW()===s)return this.Iot=h,this.Iot}}this.Iot=null}return this.Iot}}QJ(){const t=this._ot;return{addonDataJson:t&&t.QJ(),value:this.ght,aValue:this.Tot,type:this.ef,time:this.jA,ease:this.pot,enable:this.mot}}tq(t){t&&(t.addonDataJson&&this._ot._SetFromJson(t.addonDataJson),this.ght=t.value,this.Tot=t.aValue,this.ef=t.type,this.jA=t.time,this.pot=t.ease,this.mot=t.enable)}}Dn.fot=class{constructor(t,s){this.Rit=s,this.Fit=[],this.Oot=[],Dn.qX.Ant(this.Fit,t,On,this),Dn.qX.Dnt(this.Oot,t,On,this),this.Fot()}er(){this.Rit=null;for(const t of this.Fit)t.er();Dn.Pn(this.Fit),this.Fit=null;for(const s of this.Oot)s.er();Dn.Pn(this.Oot),this.Oot=null}Fot(){let s=this.Fit;s.sort((t,s)=>t.zP()-s.zP());for(let t=0;t<s.length;t++){const i=s[t];t+1<s.length&&i.wot(s[t+1]),0<=t-1&&i.Aot(s[t-1])}(s=this.Oot).sort((t,s)=>t.zP()-s.zP());for(let t=0;t<s.length;t++){const e=s[t];t+1<s.length&&e.wot(s[t+1]),0<=t-1&&e.Aot(s[t-1])}}Det(){const t=new On(null,this);return this.Fit.push(t),this.Fot(),t}Oet(t){for(const s of this.Fit)if(t(s)){const i=this.Fit.indexOf(s);-1!==i&&(s.er(),this.Fit.splice(i,1))}this.Lot(),this.Fot()}Lot(){this.Fit.sort((t,s)=>t.zP()-s.zP())}Hit(){return this.Rit}kot(){return this.Fit.length}Zht(){return this.Fit[this.Fit.length-1]}Dit(){return this.Fit}zY(){return this.Oot}*Not(){for(const t of this.Fit)yield t}*Bot(){for(let t=this.Fit.length-1;0<=t;t--)yield this.Fit[t]}QJ(){const t=this.Fit,s=this.Oot;return{propertyKeyframeDataItemsJson:t.map(t=>t.QJ()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.QJ())}}tq(t){t&&(Dn.qX.Ont(this.Fit,t.propertyKeyframeDataItemsJson,On,this),Dn.qX.Ont(this.Oot,t.propertyKeyframeDataItemsIncludingDisabledJson,On,this),this.Fot())}}}{const Ln=self.Os;class kn{constructor(t,s){this._ot=s,this.Kc=t[0],this.Wot=t[1]}er(){this._ot=null,this.Wot=null}Pot(){return this._ot}DW(){return this.Kc}QJ(){return{id:this.Kc,data:this.Wot}}tq(t){t&&(this.Kc=t.id,this.Wot=t.data)}}class Nn extends kn{constructor(t,s){super(t,s),this.jot=this.Wot[0],this.Hot=!!this.Wot[1],this.Vot=this.Wot[2],this.Uot=!!this.Wot[3]}er(){super.er()}lZ(){return this.jot}_nt(){return this.Hot}dZ(){return this.Vot}Int(){return this.Uot}QJ(){return Object.assign(super.QJ(),{startAnchor:this.jot,startEnable:!!this.Hot,endAnchor:this.Vot,endEnable:!!this.Uot})}tq(t){t&&(super.tq(t),this.jot=t.startAnchor,this.Hot=!!t.startEnable,this.Vot=t.endAnchor,this.Uot=!!t.endEnable)}}class Bn extends kn{constructor(t,s){super(t,s),this.zot=this.Wot[0],this.Jot=this.Wot[1]}er(){super.er()}Ent(){return this.zot}Cnt(){return this.Jot}QJ(){return Object.assign(super.QJ(),{direction:this.zot,revolutions:this.Jot})}tq(t){t&&(super.tq(t),this.zot=t.direction,this.Jot=t.revolutions)}}Ln.Eot=class{constructor(t,s){this.qot=s,this.$ot=[],Ln.qX.Ant(this.$ot,t,{prop:0,map:new Map([["cubic-bezier",Nn],["angle",Bn]])},this)}er(){this.qot=null;for(const t of this.$ot)t.er();Ln.Pn(this.$ot),this.$ot=null}Xot(){return this.qot}Dot(){return this.$ot}*Kot(){for(const t of this.$ot)yield t}QJ(){return{addonDataItemsJson:this.$ot.map(t=>t.QJ())}}tq(t){t&&Ln.qX.Ont(this.$ot,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",Nn],["angle",Bn]])},this)}}}{let m=self.Os,i=0;m.nnt=class extends m._K{constructor(t,s){super("tween-"+i++,t,s),this.Kc="",this.Yot=!1,this.Zot="start-value",this.ast=null,this.Qot=null,this.tat=null,this.Eit=null,this.sat=null}LQ(t){const s=m.ir(m.Event,"tweenstatereleased");s.iat=this,t.dispatchEvent(s)}UG(){return 1}uQ(){for(const t of this.hQ.BQ().NQ())this.rQ.push(m.eat.jM(this,t));this.Eit=this.rQ[0]}Wtt(){const t=this.hQ.BQ().jtt(),s=m.eat.jM(this,t);return this.rQ.push(s),this.hat(),s}hat(){this.Eit=this.rQ[0]}LW(t){return this.Eit.Xtt()[0]}oet(t){this.rat=t}RW(){const t=this.HY();if(t&&t.length){const s=t[0];if(this.Eit=s){const i=s.RW();return s.Ist()?i:void 0}}}nat(t){this.tat||(this.tat=[]),this.tat.push(t)}oat(t){this.Qot||(this.Qot=[]),this.Qot.push(t)}aat(t){if(this.tat){const s=this.tat.indexOf(t);-1!==s&&this.tat.splice(s,1)}}uat(t){if(this.Qot){const s=this.Qot.indexOf(t);-1!==s&&this.Qot.splice(s,1)}}lat(t,s){for(const i of this.rQ)for(const e of i.wst)if(e.Ktt()===s){const h=e.Gst(),r=e.Hit(),n=h.let(r);n.Wet(t),n.Let(t)}}cat(t){for(const s of this.rQ)for(const i of s.wst)if(i.Ktt()===t)return i}fat(t){for(const s of t){const i=this.cat(s);this.lat(i._et(),s)}if(this.itt()){const e=this.dW()-this.zP();this.fW(e);for(const h of this.rQ)h.qst(e);this.wtt(0)}else{const r=this.zP();this.fW(r);for(const n of this.rQ)n.qst(r);this.wtt(r)}this.Stt()}dat(t,s){const i=this.cat(s),e=i.Gst(),h=i.Hit(),r=e.Zht(h);r.cW(this.dW()),r.Wet(t),r.Let(t)}pat(t){this.Kc=t}DW(){return this.Kc}mat(t){this.Zot=t}gat(){return this.Zot}FW(t){this.Yot=t}AW(){return this.Yot}att(){if(this.tat)for(const t of this.tat)t(this);if(!this.SY())for(const s of this.rQ)s.vit()}utt(){this.GQ=this.$c.ltt()}vY(){if(!this._Q&&(this._Q=!0,this.Qot))for(const t of this.Qot)t(this)}cW(t){this.yat(),super.cW(t)}xtt(t){(t=m.le(t)?t:this.dW())<0?this.fQ=0:t>=this.dW()?this.fQ=this.dW():this.fQ=t,this.Eit.Ttt()}fY(t){if(!this.bY()&&"current-state"===this.gat())for(const s of this.rQ)s.bit();super.fY(t)}aW(t=!1){if(super.aW(t),!this.SY())for(const s of this.rQ)s.Sit()}Yf(t=!0,s=!1){this.yat(),super.Yf(t,s)}yat(){for(const t of this.rQ){const s=t=>{const s=t.zP(),i=this.dW();return 0!==s&&s!==i};t.git(s),t.wit(s)}}lK(){if(!this.nW()){const t=this.RW();if(t&&t.mN().dz())return!1;this.eQ.aY(this),this.Rtt()}return!0}gY(h,t,s){if(this.ast||(this.ast=this.RW()),!this.ast||this.ast.Dj())this.aW(!0),this.utt();else{const i=this.ast.SD();if(0!==(h=-1!==i?s*i:h)||0!==this.CQ){this.CQ=h;const r=this.fQ+this.dQ,n=h*this.pQ,o=r+n,a=this.hQ.Ott;o<0?(this.fQ=0,this.dQ=-o):a<=o?(this.fQ=a,this.dQ=this.fQ-o):(this.fQ=o,this.dQ=0);let t=!1,s=!1,i=this.mW(),e=this.yW();i||e?i&&!e?0<this.pQ?this.fQ>=a&&(this.xtt(0),this.wat(m.Sat.Tween.j$.OnAnyTweenLoop),this.wat(m.Sat.Tween.j$.OnTweensLoop),s=!0):this.fQ<=0&&(this.xtt(a),this.wat(m.Sat.Tween.j$.OnAnyTweenLoop),this.wat(m.Sat.Tween.j$.OnTweensLoop),s=!0):!i&&e?0<this.pQ?this.fQ>=a&&(this.wtt(a),this.wW(-1*this.SW()),s=!0,1===this.mQ?this.gQ<this._6()?(this.gQ++,this.wat(m.Sat.Tween.j$.OnAnyTweenLoop),this.wat(m.Sat.Tween.j$.OnTweensLoop),this.wat(m.Sat.Tween.j$.OnAnyTweenPingPong),this.wat(m.Sat.Tween.j$.OnTweensPingPong),this.mQ=0):(this.wat(m.Sat.Tween.j$.OnAnyTweenPingPong),this.wat(m.Sat.Tween.j$.OnTweensPingPong),t=!0):0===this.mQ&&(this.wat(m.Sat.Tween.j$.OnAnyTweenPingPong),this.wat(m.Sat.Tween.j$.OnTweensPingPong),this.mQ=1)):this.fQ<=0&&(this.wtt(0),this.wW(-1*this.SW()),s=!0,1===this.mQ?this.gQ<this._6()?(this.gQ++,this.wat(m.Sat.Tween.j$.OnAnyTweenLoop),this.wat(m.Sat.Tween.j$.OnTweensLoop),this.wat(m.Sat.Tween.j$.OnAnyTweenPingPong),this.wat(m.Sat.Tween.j$.OnTweensPingPong),this.mQ=0):(t=!0,this.wat(m.Sat.Tween.j$.OnAnyTweenPingPong),this.wat(m.Sat.Tween.j$.OnTweensPingPong)):0===this.mQ&&(this.wat(m.Sat.Tween.j$.OnAnyTweenPingPong),this.wat(m.Sat.Tween.j$.OnTweensPingPong),this.mQ=1)):i&&e&&(0<this.pQ?this.fQ>=a&&(this.wtt(a),this.wW(-1*this.SW()),s=!0,0===this.mQ&&(this.wat(m.Sat.Tween.j$.OnAnyTweenPingPong),this.wat(m.Sat.Tween.j$.OnTweensPingPong)),1===this.mQ&&(this.wat(m.Sat.Tween.j$.OnAnyTweenLoop),this.wat(m.Sat.Tween.j$.OnTweensLoop),this.wat(m.Sat.Tween.j$.OnAnyTweenPingPong),this.wat(m.Sat.Tween.j$.OnTweensPingPong)),this.mQ++,this.mQ=m.wrap(this.mQ,0,2)):this.fQ<=0&&(this.wtt(0),this.wW(-1*this.SW()),s=!0,0===this.mQ&&(this.wat(m.Sat.Tween.j$.OnAnyTweenPingPong),this.wat(m.Sat.Tween.j$.OnTweensPingPong)),1===this.mQ&&(this.wat(m.Sat.Tween.j$.OnAnyTweenLoop),this.wat(m.Sat.Tween.j$.OnTweensLoop),this.wat(m.Sat.Tween.j$.OnAnyTweenPingPong),this.wat(m.Sat.Tween.j$.OnTweensPingPong)),this.mQ++,this.mQ=m.wrap(this.mQ,0,2))):0<this.pQ?this.fQ>=a&&(this.gQ<this._6()?(this.gQ++,this.xtt(0),this.wat(m.Sat.Tween.j$.OnAnyTweenLoop),this.wat(m.Sat.Tween.j$.OnTweensLoop),s=!0):(this.wtt(a),t=!0)):this.fQ<=0&&(this.gQ<this._6()?(this.gQ++,this.xtt(a),this.wat(m.Sat.Tween.j$.OnAnyTweenLoop),this.wat(m.Sat.Tween.j$.OnTweensLoop),s=!0):(this.wtt(0),t=!0)),t?(this.Eit.Ltt(),this.aW(!0),this.utt()):(this.Eit.Rc(this.fQ,!0,!1,s,this.IQ,!1),this.IQ&&(this.IQ=!1))}}}wat(t){const s=this.RW(),i=s.bat(m.Sat.Tween);i.PushTriggerTween(this),this.$c.t4(t,s,i.c6()),i.PopTriggerTween()}QJ(){const t=super.QJ(),s=this.JQ();return Object.assign(t,{tweenDataItemJson:s.QJ(),id:this.Kc,destroyInstanceOnComplete:this.Yot,initialValueMode:this.Zot})}tq(t){if(t){const s=this.JQ();s.tq(t.tweenDataItemJson),super.tq(t),this.Kc=t.id,this.Yot=t.destroyInstanceOnComplete,this.Zot=t.initialValueMode,this.hat()}}static IsPlaying(t){return t.IsPlaying()}static GW(t){return t.GW()}static vat(t){return!!t.yW()&&0===t.stt()}static Mat(t){return!!t.yW()&&1===t.stt()}static Gat(t){const s=t.runtime.jQ(),i=new m.Pnt;if(t.json){i.tq(t.json.tweenDataItemJson);const e=new m.nnt(i,s);return e.tq(t.json),e}{const h=new m.nnt(i,s),r=(m.Le(t.xat)||(t.xat=[t.xat]),h.pat(t.id),h.ett(t.tags),h.mat(t.initialValueMode),h.FW(t.releaseOnComplete),h.pW(t.loop),h.gW(t.pingPong),h.fW(t.time),h.$Q(0),h.KQ("default"),h.YQ(t.xat[0].resultMode),h.ZQ(t.repeatCount),h.Wtt()),n=(r.zst(t.f6.EN()),r.KQ("default"),r.YQ(t.xat[0].resultMode),r.Xst(!0),r.Kst(t.f6.mN().fF()),t.f6.s6()),o=n.Qst()?n.Zst():t.f6.nO().Xp(),a=n.Qst()?n.sit():t.f6.nO().om(),u=(r.Yst(o),r.tit(a),r.fit()),l=(u.cW(0),u.EW("noease"),u.Xst(!0),u.ett(""),r.fit());l.cW(t.time),l.EW("noease"),l.Xst(!0),l.ett("");for(const c of t.xat){const f=r.pit(),d=(f.Kit(c.sourceId),f.Qit(c.sourceArgs),f.het(c.property),f.oet(c.type),f.fet(NaN),f.pet(NaN),f.KQ("default"),f.YQ(c.resultMode),f.Xst(!0),f.Fet()),p=(d.aet(c.valueType),d.cW(0),d.EW(c.ease),d.Xst(!0),d.Wet(c.startValue),d.Let(c.startValue),f.Fet());p.aet(c.valueType),p.cW(t.time),p.EW(c.ease),p.Xst(!0),p.Wet(c.endValue),p.Let(c.endValue),f.VQ()}return h}}static zst(t,s){if(!isNaN(s))for(const i of t.HY())i.zst(s)}Tat(t,s){return this.sat||(this.sat=m.ir(self._W,this,t,s)),this.sat}}}{const Wn=self.Os;Wn.eat=class extends Wn.WQ{constructor(t,s){super(t,s),this._at=null,this.Iat=null}static jM(t,s){return Wn.ir(Wn.eat,t,s)}Cat(){1===this.wst.length?this._at=this.wst[0]:(this._at=this.wst[0],this.Iat=this.wst[1])}Sst(){for(const t of this.hst.Gst().Mst())this.wst.push(Wn.Eat.jM(this,t));this.Cat()}pit(){const t=this.hst.Gst(),s=t.mit(),i=Wn.Eat.jM(this,s);return this.wst.push(i),this.Cat(),i}fY(){if(this._st(),this.Ist()||!this.zQ()){const t=this.Tst(),s=t.itt(),i=s?0:this.Jst();for(const h of this.wst)h.fY(i),0===this.bst&&1===h.hit()&&(this.bst=1),0===this.MK&&1===h.dY()&&(this.MK=1);this.vst=0;const e=this.wst.some(t=>t.Dtt());e&&(this.vst=1),this.pst=this.rit(i),this.cst=!1,this.fst=!1,this.Rc(i)}}ktt(){}Rc(t,s=0,i=!1,e=!1,h,r=!1,n=!1){if(this.ast||this.RW(),this.ast){const o=!this.ast.Dj();return o&&(!r||!this.mN().dz())&&((this.Iat?(this._at.Rc(t,i,e,n),this.Iat):this._at).Rc(t,i,e,n),void(0!==this._at.hit()&&(this.ust||(this.ust=this.ast.nO()),this.ust)&&this.ust.R4()))}}Btt(){}tq(t){super.tq(t),this.Cat()}}}{const jn=self.Os;jn.Eat=class extends jn.xst{constructor(t,s){super(t,s),this.Rat=!1}static jM(t,s){return jn.ir(jn.Eat,t,s)}Rc(t,s=!1,i=!1,e=!1){let h,r;if(this.Rat)h=this.Fit[0],r=this.Fit[1];else{if(s)h=this.Pit.bet(t,this.Rit);else{if(this.Lit){const n=this.Tst(),o=this.Lit.JY(),a=this.Lit.zP(),u=o?o.zP():n.dW();(t<=a||u<=t)&&(this.Lit=this.Pit.bet(t,this.Rit))}else this.Lit=this.Pit.bet(t,this.Rit);h=this.Lit}r=h.JY()}this.Ait.Rc(t,h,r,s,i,e)}Fet(){const t=this.Rit.Oit(),s=t.Det();return this.Lit=null,this.Rat=this.met().length<=2,s}wit(t){this.Lit=null;const s=this.Rit.Oit();s.Oet(t),this.Rat=this.met().length<=2}QJ(){return{sourceAdapterJson:this.VQ().QJ(),basic:this.Rat}}tq(t){t&&(this.VQ().tq(t.sourceAdapterJson),this.Rat=t.basic)}}}{const Hn=self.Os,Vn=self.ic;Hn.Pc=class extends Hn.Qh{constructor(t,s=!0){super(),this.nr=t[0],this.Pat=t[2],this.Aat=[];for(const i of t[1]){const e=Hn.Fat.jM(this,i);this.Aat.push(e)}for(let t=0;t<this.Aat.length;t++){const h=this.Aat[t],r=this.Aat[t+1],n=this.Aat[t-1];h.wot(r),h.Aot(n)}this.Dat=new Map,this.Oat=new Map,this.Lat(),s&&Vn.Fc(this.nr,(t,s,i,e)=>this.Rc(t,s,i,e),null,{transition:this})}static jM(t){return Hn.ir(Hn.Pc,t)}er(){for(const t of this.Aat)t.er();Hn.Pn(this.Aat),this.Aat=null,this.Dat.clear(),this.Dat=null,this.Oat.clear(),this.Oat=null}Ac(t){this.Pat=!!t}kat(t){const s=this.Oat.get(t);if(s)return s;for(const i of this.Aat)if(i.Nat()===t)return this.Oat.set(t,i),i}Bat(s){for(let t=this.Aat.length-1;0<=t;t--){const i=this.Aat[t],e=i.Nat();if(e<=s){let t=i;if(e<s)return t;if(e===s){for(;t;){const h=t.qY();if(!h)break;if(h.Nat()!==t.Nat())break;t=h}return t}}}}Rc(t,s,i,e){let h=t/e;if(this.Pat){const w=this.kat(0),S=this.kat(1),b=s+(s+i)*w.Wat(),v=(s+i)*S.Wat(),M=v-b;return 0===e?b+M:Vn.Oc(t,b,M,e)}0===e&&(h=1);let r=this.Bat(h),n=r.JY();if(!n){const G=r.qY(),x=r;r=G,n=x}const o=n.Nat()-r.Nat(),a=Hn.ur(h,r.Nat(),n.Nat(),0,o);if(r.jat()||0==o){const T=s+(s+i)*r.Wat(),_=(s+i)*n.Wat(),I=_-T;return 0==o?1===a?T+I:T:Vn.Oc(a,T,I,o)}let u=r.Nat(),l=r.Wat(),c=r.Nat()+r.Hat(),f=r.Wat()+r.Vat(),d=n.Nat()+n.Uat(),p=n.Wat()+n.zat(),m=n.Nat(),g=n.Wat(),y=Vn.Sc("spline")(a,u,l,c,f,d,p,m,g,this.Dat.get(r));return(1-(y+=r.Wat()))*s+y*(s+i)}Lat(){this.Dat.clear();for(let t=0;t<this.Aat.length-1;t++){const s=this.Aat[t];if(s._nt()){const i=s,e=this.Aat[t+1];if(e.Int()){const h=i.Nat(),r=i.Nat()+i.Hat(),n=e.Nat()+e.Uat(),o=e.Nat();this.Dat.set(i,Vn.Lc(h,r,n,o))}}}}}}{const Un=self.Os;Un.Fat=class extends Un.Qh{constructor(t,s){super(),this.Jat=t,this.qat=s[0],this.$at=s[1],this.Xat=s[2],this.Kat=s[3],this.Yat=s[4],this.Zat=s[5],this.Hot=s[6],this.Uot=s[7],this.Qat=s[8],this.yot=null,this.Rot=null}er(){this.Jat=null}static jM(t,s){return Un.ir(Un.Fat,t,s)}wot(t){this.yot=t}JY(){return this.yot}Aot(t){this.Rot=t}qY(){return this.Rot}Nat(){return this.qat}Wat(){return this.$at}Hat(){return this.Xat}Vat(){return this.Kat}Uat(){return this.Yat}zat(){return this.Zat}_nt(){return this.Hot}Int(){return this.Uot}jat(){return"linear"===this.Qat}tut(){return"cubic"===this.Qat}}}{const zn=self.Os;zn.sut=class extends zn.Qh{constructor(t){super(),this.$c=t,this.iut=[]}er(){for(const t of this.iut)t.er();zn.Pn(this.iut),this.iut=null}jM(t){this.iut.push(zn.Pc.jM(t))}}}{const Jn=self.Os;Jn.eut=class extends Jn.Qh{constructor(t){super(),this.$c=t,this.hut=null,this.rut=null,this.dK=t=>this.pK(t.f6)}er(){if(this.GK(),this.hut){for(const t of this.hut.values())t.clear();this.hut.clear()}this.hut=null,this.$c=null}jM(t){if(this.hut||(this.hut=new Map),t){const s=t[0][16],i=s[0],e=t[1],h=(this.hut.has(e)||this.hut.set(e,new Map),this.hut.get(e));h.set(i,t)}}xK(){const t=this.$c.Rf();t&&t.addEventListener("instancedestroy",this.dK)}GK(){const t=this.$c.Rf();t&&t.removeEventListener("instancedestroy",this.dK)}nut(){return!!this.hut&&0!==this.hut.size}out(t,s){let i;if(i=t instanceof Jn.aut?t.fF():t,this.hut.has(i)){const e=this.hut.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}}uut(t,s){this.rut||(this.rut=new WeakMap),this.rut.has(t)||this.rut.set(t,s)}lut(t){if(!this.rut)return"";const s=this.rut.get(t);return s||""}pK(t){this.rut&&this.rut.has(t)&&this.rut.delete(t)}}}{const qn=self.Os;qn.cut=class{constructor(t){this.$c=t,this.fut=new qn.dut}er(){this.fut.er(),this.fut=null,this.$c=null}IO(){return this.$c}jM(t){this.fut.Ql(t)}mut(t){return this.fut.Qs(t)}gut(){return this.fut.gut()}}}{const M=self.Os;M.yut=class{constructor(t,s,i,e,h,r,n){this.$c=h.IO(),this.wut=h,this.Sut=t,this.but=i,this.vut=e,this.kg=s,this.$X=r,this.Mut=n??r.RW().EN(),this.Gut(),this.xut=this._ut?.Tut()??-1,this.Iut=[],this.Cut=null,this.Eut=NaN,this.Rut=null,this.Put=null,this.Aut=null,this.Fut="",this.Dut=null,this.Out="",this.Lut="",this.kut=0,this.Nut=!1,this.vQ=!1}er(){this.vQ||(M.Pn(this.Iut),this.Iut=null,this.$c=null,this.wut=null,this.vut=null,this.$X=null,this.Cut=null,this.Eut=NaN,this.Rut&&this.Rut.clear(),this.Rut=null,this.Put=null,this.Aut=null,this.Fut="",this.Dut=null,this.Out="",this.Lut="",this.vQ=!0)}hr(){return this.vQ}But(){return this.wut}IO(){return this.$c}Wc(){return this.Sut}Wut(){return this.vut}rW(){return this.kg}NK(){return this.$X||(this.$X=this.$c.sO(this.Mut).s6()),this.$X}jut(){return this.Hut(this.xut)}Vut(){const t=this.jut();return t?t.rW():""}Uut(){const t=this.jut();return t?t.bW():[]}zut(t){const s=this.Uut();if(!s)return!1;if(!s.length)return!1;const i=M.yut.htt(t);return!(!i||!i.length)&&i.every(M.yut.ott,s)}Jut(t,s){const i=this.Uut();if(!i)return!1;if(!i.length)return!1;const e=M.yut.htt(t);return!(!e||!e.length)&&e.every(t=>M.yut.qut.call(i,t,s))}static ott(t){return""===t?1===this.length&&""===this[0]:this.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static htt(t){return t.trim().split(" ")}static qut(s,i){return""===s?1===this.length&&""===this[0]:this.some(t=>M.compare(t.trim(),i,s.trim()))}$ut(t){const s=this.jut();if(s){if(M.le(t)){const i=s.Xut(),e=i?i[t]:void 0;if(M.le(e))return this.Hut(e)}if("string"==typeof t)for(const h of s.Xut()){const r=this.Hut(h);if(r.lW(t))return this.Hut(r.Tut())}}}Kut(t){const s=this.$ut(t);return s?s.rW():""}Yut(t){const s=this.$ut(t);return s?s.bW():""}Zut(t){const s=this.jut();if(!s)return-1;const i=s.Xut();if(!i)return-1;const e=this.$ut(t);return e?i.indexOf(e.Tut()):-1}Qut(){const t=this.jut();if(!t)return 0;const s=t.Xut();return s?s.length:0}Hut(t){return this.vut.Hut(t)}Yf(){const t=this.tlt();t.slt(!0)}slt(t){if(this.ilt()){for(const[s,i]of this.ilt().entries())i.slt(!1);this.ilt().clear()}if(this.Rut=null,this.Cut=null,this.elt=null,this.Put=null,this.Fut="",this.Dut=null,this.Out="",this.Lut="",this.Iut=[],t){this.wut.hlt(this);const e=this._ut.Tut();e!==this.xut&&this.rlt(e)}else this.xut=this._ut.Tut()}nlt(){const t=this.vut.Hut(this.xut);return t?t.ult().olt():0}llt(t){const s=this.clt(t);return s?s.Wc():""}flt(t){let s;return M.le(t)&&(s=this.clt(t)),"string"==typeof t&&(s=this.dlt(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.iet():""}plt(t){let s;if(M.le(t)&&(s=this.clt(t)),s="string"==typeof t?this.dlt(t):s){const i=s.mlt();M.le(i)&&(this.Iut.push(this.xut),this.rlt(i))}}glt(t){const s=this.vut.ylt(t);if(s){const i=this.vut.Hut(s.Tut());i&&(this.Iut.push(this.xut),this.rlt(i.Tut()))}}wlt(){const t=this.Iut.pop();M.le(t)?this.rlt(t):this.Slt()&&(this.wut.hlt(this.Slt(),!0,!1,!1),this.Slt().rlt(this.blt()),this.tlt().vlt(this.Slt()))}Mlt(t){const s=this.jut();if(s){s.Tut();const i=this.$ut(t);i&&(this.Iut.push(this.xut),this.rlt(i.Tut()))}}Glt(s){if(M.le(s)){const t=this.vut.Hut(this.xut),i=t.ult().xlt();return!!i[s]}if("string"==typeof s){const e=this.vut.Hut(this.xut),h=e.ult().xlt();for(let t=0;t<h.length;t++)if(h[t].Wc()===s)return!0}return!1}Tlt(){this.Nut=!0}_lt(){return 0<this.kut}Ilt(){this.kut++}Clt(){this.kut--,0===this.kut&&this.Nut&&this.wut.Elt(this)}rlt(t){const i=this.xut,s=this.NK().RW();if(this.Ilt(),this.wut.Rlt(this),this.$c.t4(M.V$.Flowchart.j$.OnBeforeAnyNodeChange,s),this.$c.t4(M.V$.Flowchart.j$.OnBeforeTaggedNodeChange,s),this.$c.t4(M.V$.Flowchart.j$.OnBeforeAnyNodeChangeInFlowchart,s),this.$c.t4(M.V$.Flowchart.j$.OnBeforeTaggedNodeChangeInFlowchart,s),this.xut=t,this.$c.t4(M.V$.Flowchart.j$.OnAnyNodeChange,s),this.$c.t4(M.V$.Flowchart.j$.OnTaggedNodeChange,s),this.$c.t4(M.V$.Flowchart.j$.OnAnyNodeChangeInFlowchart,s),this.$c.t4(M.V$.Flowchart.j$.OnTaggedNodeChangeInFlowchart,s),this.wut.Plt(),this.Clt(),!this.hr()){const e=this.Hut(this.xut);if("reference"===e.UG()){const h=e.Alt();if(this.Flt(e)){this.Iut.pop();const r=this.Dlt(e),n=(this.wut.hlt(r,!0,!0,!1),r.Olt(this,i),this.tlt());n.vlt(r)}else{const o=e.Llt();if(h){this.Iut.pop();let s=e.klt();if(s){let t=this.wut.Nlt(s);for(;t;)s=M.Bd(s),t=this.wut.Nlt(s)}else{s=h+"-ref";let t=this.wut.Nlt(s);for(;t;)s=M.Bd(s),t=this.wut.Nlt(s)}const a=this.wut.Blt(h,o,s,this.$X,!0),u=(a.Olt(this,i),this.Wlt(e,a),this.tlt());a.jlt(u),u.vlt(a)}}}}}clt(t){const s=this.vut.Hut(this.xut);if(!s)return null;const i=s.ult().xlt();if(!i)return null;const e=i[t];return e||null}dlt(t){const s=this.vut.Hut(this.xut);if(!s)return null;const i=s.ult().Hlt(t);return i||null}Gut(s){if("number"==typeof s){let t=this.Hut(s);t=t||this.vut.Vlt(),this._ut=t}else{let t=this.vut.ylt(this.but);t=t||this.vut.Vlt(),this._ut=t}}QJ(){return this.Nut?null:{flowchartName:this.Sut,flowchartTag:this.kg,startNodeTag:this.but,currentNodeId:this.xut,previousNodeIds:this.Iut,pluginUID:this.$X.RW().EN(),reference:{previousFlowchartTag:this.Slt()?this.Slt().rW():"",previousStartNodeId:M.le(this.blt())?this.blt():NaN,referencesJson:this.Ult(),currentReferenceFlowchartTag:this.zlt()?this.zlt().rW():"",rootFlowchartTag:this.tlt()?this.tlt().rW():""}}}Ult(){if(!this.Jlt())return null;const t=[];for(const[s,i]of this.ilt().entries())t.push({flowchartElementId:s.Tut(),flowchartStateTag:i.rW()});return t.length?t:null}tq(t){if(t){if(this.Sut=t.flowchartName,this.kg=t.flowchartTag,this.but=t.startNodeTag,this.xut=t.currentNodeId,this.Iut=t.previousNodeIds,this.Mut=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.Fut=s.previousFlowchartTag,this.Eut=s.previousStartNodeId,this.Dut=s.referencesJson,this.Out=s.currentReferenceFlowchartTag,this.Lut=s.rootFlowchartTag}this.Gut()}}Slt(){return"string"==typeof this.Fut&&this.Fut&&(this.Cut=this.wut.Nlt(this.Fut),this.Fut=""),this.Cut}blt(){return this.Eut}Olt(t,s){this.Cut=t,this.Eut=s}zlt(){return"string"==typeof this.Out&&this.Out&&(this.Put=this.wut.Nlt(this.Out),this.Out=""),this.Put}vlt(t){this.Put=t,this.Put===this&&(this.Put=null)}tlt(){return"string"==typeof this.Lut&&this.Lut&&(this.Aut=this.wut.Nlt(this.Lut),this.Lut=""),this.Aut||this}jlt(t){this.Aut=t}Jlt(){return this.qlt(),!!this.Rut}Flt(t){return this.qlt(),this.Rut&&this.Rut.has(t)}qlt(){if(this.Dut){this.Rut&&this.Rut.clear(),this.Rut||(this.Rut=new Map);for(const t of this.Dut){const s=this.wut.Nlt(t.flowchartStateTag),i=s.Hut(t.flowchartElementId);this.Rut.set(i,s)}this.Dut=null}}ilt(){return this.qlt(),this.Rut}Dlt(t){return this.qlt(),this.Rut.get(t)}Wlt(t,s){this.Rut||(this.Rut=new Map),this.Rut.set(t,s)}}}{const $n=self.Os;$n.$lt=class{constructor(t){this.$c=t,this.Xlt=new Map,this.Klt=null,this.Ylt=[],this.Zlt=()=>this.wK(),this.Qlt=null}er(){$n.Pn(this.Ylt),this.Ylt=null,this.Xlt.clear(),this.Xlt=null,this.Klt=null,this.$c=null,this.Qlt=null}IO(){return this.$c}Blt(t,s,i,e,h,r){const n=this.$c.But().mut(t);if(n){if(!this.Xlt.has(i)){const o=new $n.yut(t,i,s,n,this,e,r);return this.Xlt.set(i,o),h&&this.hlt(o,!0),o}{const a=this.Xlt.get(i);a&&this.Elt(a)}}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}Elt(t){if(t.Tlt(),!t._lt()){const s=t.rW();this.Xlt.delete(s),t.er(),this.Klt===t&&(this.Klt=null)}}tct(t){t.Yf()}Nlt(t){return this.Xlt.get(t)}Rlt(t){this.Ylt.push(t)}Plt(){this.Ylt.pop()}hlt(t,s=!1,i=!1,e=!0){if(e){const h=t.zlt();t=h||t}t!==this.Klt&&(this.sct(),this.ict(t,s,i))}ect(t){return"string"==typeof t?this.Nlt(t):this.Ylt.length?this.Ylt[this.Ylt.length-1]:this.Klt}sct(){if(this.Klt&&!this.Klt.hr()){const t=this.Klt.NK().RW();this.Klt.Ilt(),this.Rlt(this.Klt),this.$c.t4($n.V$.Flowchart.j$.OnBeforeFlowchartChange,t),this.Plt(),this.Klt.Clt()}}ict(t,s=!1,i=!1){if(this.Klt=t,this.Klt&&!this.Klt.hr()){const e=this.Klt.NK().RW();this.Klt.Ilt(),this.Rlt(this.Klt),this.$c.t4($n.V$.Flowchart.j$.OnFlowchartChange,e),!0!==i&&"number"!=typeof i||this.Klt.Gut(i),s&&(this.$c.t4($n.V$.Flowchart.j$.OnAnyNodeChange,e),this.$c.t4($n.V$.Flowchart.j$.OnTaggedNodeChange,e)),this.Plt(),this.Klt.Clt()}}QJ(){return{flowchartJsonObjects:[...this.Xlt.values()].map(t=>t.QJ()),currentFlowchartTag:this.Klt?this.Klt.rW():null}}tq(t){if(t){this.Qlt=t;const s=new Map;for(const i of this.Qlt.flowchartJsonObjects){const e=i.flowchartTag;if(this.Xlt.has(e)){const h=this.Xlt.get(e);h.tq(i),s.set(e,h)}else{const r=this.Blt(i.flowchartName,i.startNodeTag,i.flowchartTag,null,!1,i.pluginUID);r.tq(i),s.set(i.flowchartTag,r)}}for(const[n,o]of this.Xlt.entries())s.has(n)||o.er();this.Xlt.clear(),this.Xlt=s,this.$c.F$()?this.$c.Rf().addEventListener("afterload",this.Zlt):this.wK()}}wK(){this.$c.Rf().removeEventListener("afterload",this.Zlt);const t=this.Xlt.get(this.Qlt.currentFlowchartTag);t&&this.hlt(t,!0),this.Qlt=null}}}{const Xn=self.Os;Xn.dut=class{constructor(){this.hct=new Map}er(){for(const t of this.hct.values())t.er();this.hct.clear(),this.hct=null}Ql(t){const s=new Xn.rct(t),i=s.Wc();this.hct.set(i,s)}Qs(t){return this.hct.get(t)}gut(){return!!this.hct.size}static nct(t,s,i,e){if(s)for(const h of s){const r=new i(h,e);t.push(r)}}}}{const Kn=self.Os;Kn.rct=class{constructor(t){this.nr=t[0],this.oct=new Kn.uct(t[1],this)}er(){this.oct.er(),this.oct=null}lct(){return this.oct}Hut(t){return this.oct.Hut(t)}ylt(t){return this.oct.ylt(t)}Vlt(){return this.oct.Vlt()}Wc(){return this.nr}}}{const Yn=self.Os;class Zn{constructor(t,s){this.oct=s,this.ef=t[7],this.cct=t[0],this.kg=t[1],this.kg?this.EQ=this.kg.trim().split(" ").map(t=>t.trim()):this.EQ=[],this.fct=t[2],this.dct=null,this.pct=null,"dictionary"===this.ef&&(this.dct=t[3],this.pct=t[4]),this.mct=t[6],this.gct=null,this.yct=null,this.wct=null,"reference"===this.ef&&(this.gct=t[8],this.yct=t[9],this.wct=t[10]),this.Sct=new Yn.bct(t[5],this)}er(){this.oct=null}lct(){return this.oct}ult(){return this.Sct}Tut(){return this.cct}rW(){return this.kg}bW(){return this.EQ}lW(t){if(!this.EQ)return!1;if(!this.EQ.length)return!1;const s=Yn.yut.htt(t);return!(!s||!s.length)&&s.every(Yn.yut.ott,this.EQ)}vct(){return this.mct}Xut(){return this.fct}Mct(){return this.dct}Gct(){return this.pct}UG(){return this.ef}Alt(){return this.gct}Llt(){return this.yct}klt(){return this.wct}}Yn.uct=class{constructor(t,s){this.vut=s,this.xct=[],this.Tct=new Map,this._ct=new Map,this.Ict=null,Yn.dut.nct(this.xct,t,Zn,this);for(const i of this.xct){const e=i.Tut(),h=i.rW(),r=i.bW(),n=i.vct();if(this.Tct.set(e,i),h)for(const a of r)this._ct.has(a)||this._ct.set(a,new Set),this._ct.get(a).add(i);n&&(this.Ict=i);const o=i.ult();for(const u of o.Cct()){const l=u.Tut();this.Tct.set(l,u)}}}er(){this.vut=null;for(const t of this.xct)t.er();Yn.Pn(this.xct),this.xct=null}Wut(){return this.vut}Hut(t){return this.Tct.get(t)}ylt(t){if(!t||!t.length)return null;const i=[];for(const e of t.trim().split(" ")){let t=this._ct.get(e.trim())??new Set;if(0===t.size)return null;i.push(t)}const s=i.reduce((t,s)=>s.size<t.size?s:t);return[...s].filter(s=>i.every(t=>t.has(s)))[0]}Vlt(){return this.Ict}*Ect(){for(const t of this.xct)yield t}}}{const Qn=self.Os;class to{constructor(t,s){this.Sct=s,this.cct=t[0],this.nr=t[1],this.ght=t[2],this.Rct=t[3]}er(){this.Sct=null}ult(){return this.Sct}Tut(){return this.cct}Wc(){return this.nr}iet(){return this.ght}mlt(){return this.Rct}}Qn.bct=class{constructor(t,s){this.Pct=s,this.Act=[],this.Fct=new Map,Qn.dut.nct(this.Act,t,to,this);for(const i of this.Act)this.Fct.set(i.Wc(),i)}er(){this.Pct=null;for(const t of this.Act)t.er();Qn.Pn(this.Act),this.Act=null}Dct(){return this.Pct}olt(){return this.Act.length}xlt(){return this.Act}Hlt(t){return this.Fct.get(t)}*Cct(){for(const t of this.Act)yield t}}}{const so=self.Os;so.Oct=class extends so.Qh{constructor(t){super(),this.Lct=t,this.kct=[],this.kct.push(so.ir(so.Nct,this)),this.Lg=0,this.Bct=this.kct[0]}er(){for(const t of this.kct)t.er();so.Pn(this.kct),this.Bct=null,this.Lct=null}mN(){return this.Lct}vk(){return this.Bct}Wct(){return this.kct[this.Lg-1]}Vl(){this.vk().Vl()}jct(){const t=this.kct,s=++this.Lg;if(s===t.length){const i=so.ir(so.Nct,this);t.push(i),this.Bct=i}else{const e=t[s];e.Yf(),this.Bct=e}}Hct(){const t=this.kct,s=++this.Lg,i=(s===t.length&&t.push(so.ir(so.Nct,this)),t[s]);i.g0(t[s-1]),this.Bct=i}O8(){this.Bct=this.kct[--this.Lg]}Vct(i){const e=this.kct;for(let t=0,s=e.length;t<s;++t)e[t].Vct(i)}}}{const io=self.Os;io.Nct=class extends io.Qh{constructor(t){super(),this.kct=t,this.Lct=this.kct.mN(),this.Uct=this.Lct.IO().iD(),this.zct=!0,this.G7=[],this.Jct=[]}er(){this.qct(),this.kct=null,this.Lct=null,this.Uct=null}qct(){io.Pn(this.G7),io.Pn(this.Jct)}mN(){return this.Lct}$ct(){return this.zct}Xct(){return this.zct?!!this.Lct.Gk():!!this.G7.length}bk(){return this.zct?this.Lct.bk():this.G7}Kct(){return!!this.Jct.length}Yct(){return this.Jct}Zct(){const t=this.bk();return t.length?t:this.Jct}Yf(){this.zct=!0,io.Pn(this.Jct)}Vl(){this.zct=!0}g0(t){t.$ct()?this.Yf():(this.zct=!1,io.On(this.G7,t.G7),io.Pn(this.Jct))}Qct(t){this.G7.push(t)}tft(t){this.Jct.push(t)}ift(t){this.zct=!!t}eft(){return this.G7}hft(){return this.Jct}rft(t){this.zct=!1,io.Pn(this.G7),this.G7.push(t)}nft(t){this.zct=!1,io.On(this.G7,t)}oft(t){this.zct=!1,io.Pn(this.G7);for(const s of t)this.G7.push(s)}aft(t,s){for(const i of s)t.has(i)||this.Jct.push(i)}uft(t){for(const s of t)this.G7.push(s);io.Wn(this.Jct,t)}lft(){io.Pn(this.Jct)}cft(t){if(t)if(this.Uct.M8().XF().fft()){this.$ct()&&(io.Pn(this.G7),io.On(this.Jct,t.mN().bk()),this.zct=!1);const s=this.Jct.indexOf(t);-1!==s&&(this.G7.push(this.Jct[s]),this.Jct.splice(s,1))}else this.rft(t)}Vct(t){io.Wn(this.G7,t),io.Wn(this.Jct,t)}}}{const eo=self.Os;eo.dft=class extends eo.Qh{constructor(t){super(),this.pft=t,this.$c=this.pft.IO(),this.kct=[],this.kct.push(eo.ir(eo.mft,this,null)),this.Lg=0,this.gft=[]}er(){for(const t of this.kct)t.er();eo.Pn(this.kct),eo.Pn(this.gft),this.pft=null,this.$c=null}VF(){return this.pft}IO(){return this.$c}M8(){return this.kct[this.Lg]}yft(){return this.kct}wft(){return this.Lg}G8(t){const s=this.kct,i=++this.Lg;if(i===s.length){const e=eo.ir(eo.mft,this,t);return s.push(e),e}{const h=s[i];return h.Yf(t),h}}O8(){--this.Lg}Sft(t){this.gft.push(t)}bft(){this.gft.pop()}sD(){const t=this.gft;return 0===t.length?null:t.at(-1)}}}{const ho=self.Os;ho.mft=class extends ho.Qh{constructor(t,s){super(),this.kct=t,this.$c=this.kct.IO(),this.vft=s,this.Mft=0,this.Gft=0,this.xft=!1,this.Tft=!1,this._ft=null,this.Ift=0,this.Cft=0,this.Eft=null}er(){this.Yf(null),this.kct=null,this.$c=null}Yf(t){this.vft=t,this.Mft=0,this.Gft=0,this.xft=!1,this.Tft=!1,this.Eft=null}Rft(t,s){this.vft=t,this.Mft=0,this.Gft=s}Pft(){this.Mft=0,this.Gft=0}XF(){return this.vft}Aft(t){this.vft=t}Fft(){return this.Mft}Dft(t){this.Mft=t}Oft(){return this.Gft}Lft(t){this.Gft=t}kft(t){this.xft=!!t}Nft(){return this.xft}Bft(t){this.Tft=!!t}Wft(){return this.Tft}jft(t){this._ft=t}Hft(){return this._ft}Vft(t,s){this.Ift=t,this.Cft=s}eD(){return this.Ift}hD(t){this.Cft=t}Uft(){return this.Cft}zft(){const t=this.vft;return!!t.Jft()||this.Mft<t.qft()-1&&!!t.v8().length}$ft(t){this.Eft=t}Xft(){return this.Eft}}}{const ro=self.Os;ro.Kft=class extends ro.Qh{constructor(t){super(),this.pft=t,this.$c=this.pft.IO(),this.kct=[],this.Lg=-1,this.Bct=null,this.Yft=[]}er(){ro.Pn(this.kct),this.pft=null,this.$c=null}Zft(t){this.Yft=t;const s=this.Yft.slice(0);this.kct.push(s),this.Lg=0,this.Bct=s}VF(){return this.pft}IO(){return this.$c}Qft(){return this.Bct}G8(){const t=++this.Lg,s=this.kct;t===s.length?s.push(this.Yft.slice(0)):ro.On(s[t],this.Yft),this.Bct=s[t]}O8(){this.Bct=this.kct[--this.Lg]}}}{const no=self.Os;no.t0t=class extends no.Qh{constructor(t){super(),this.pft=t,this.$c=this.pft.IO(),this.kct=[],this.Lg=-1}er(){no.Pn(this.kct),this.pft=null,this.$c=null}VF(){return this.pft}IO(){return this.$c}s0t(){return 0<=this.Lg}Qft(){return this.kct[this.Lg]}G8(){if(++this.Lg,this.Lg===this.kct.length){const t=no.ir(no.i0t,this);return this.kct.push(t),t}{const s=this.kct[this.Lg];return s.Yf(),s}}O8(){--this.Lg}e0t(s){const i=this.kct;for(let t=this.Lg;0<=t;--t){const e=i[t];if(e.Wc()===s)return e}return null}h0t(){return this.kct.slice(0,this.Lg+1)}}}{const oo=self.Os;oo.i0t=class extends oo.Qh{constructor(t){super(),this.r0t=t,this.nr="",this.Lg=0,this.n0t=!1,this.o0t=NaN}Yf(){this.nr="",this.Lg=0,this.n0t=!1,this.o0t=NaN}T8(t){this.nr=t}Wc(){return this.nr}A8(t){this.Lg=t}fF(){return this.Lg}aW(){this.n0t=!0}D8(){return this.n0t}a0t(t){this.o0t=t}u0t(){return this.o0t}}}{const ao=self.Os;ao.l0t=class extends ao.Qh{constructor(){super(),this.kct=[],this.Lg=-1}er(){ao.Pn(this.kct)}Qft(){return this.kct[this.Lg]}G8(){if(++this.Lg,this.Lg!==this.kct.length)return this.kct[this.Lg];{const t=[];return this.kct.push(t),t}}O8(){--this.Lg}}}{let t=function(t,s){return t.fF()-s.fF()},r=function(i,e){for(let t=0,s=i.length;t<s;++t)if(i[t]!==e[t])return!1;return!0};t,r;const G=self.Os;G.c0t=class extends G.Qh{constructor(t){super(),this.$c=t,this.f0t=[],this.d0t=new Map,this.p0t=[],this.m0t=new Map,this.g0t=new Map,this.y0t=new Map,this.w0t=new Map,this.S0t=new Map,this.b0t=new Map,this.v0t=0,this.M0t=[],this.G0t=[],this.x0t=[],this.T0t=new Map,this._0t=new Map,this.Uct=G.ir(G.dft,this),this.I0t=G.ir(G.Kft,this),this.r0t=G.ir(G.t0t,this),this.C0t=[],this.E0t=[],this.R0t=[],this.P0t=0,this.A0t=0,this.F0t=0,this.D0t=[],this.O0t=[],this.L0t=[],this.k0t=new Map,this.N0t=new Map,self.c3_callFunction=(t,s)=>this.B0t(t,s)}er(){this.sX(),this.Uct.er(),this.Uct=null,this.I0t.er(),this.I0t=null,G.Pn(this.E0t),G.Pn(this.R0t),this.$c=null,G.Pn(this.f0t),this.d0t.clear()}jM(t){const s=G.ir(G.W0t,this,t);this.f0t.push(s),this.d0t.set(s.Wc().toLowerCase(),s)}j0t(t){this.C0t.push(t)}H0t(){for(const t of this._0t.values())t.V0t();for(const s of this.T0t.values())s.H0t();for(const i of this._0t.values())i.H0t();for(const e of this.f0t)e.H0t();for(const h of this.f0t)h.M$();for(const r of this.C0t)r.H0t(!1);G.Pn(this.C0t),this.I0t.Zft(this.x0t)}IO(){return this.$c}v$(t){return this.d0t.get(t.toLowerCase())||null}U0t(t){this.p0t.push(t),this.m0t.set(t.z0t(),t)}J0t(t){this.g0t.set(t.Oz(),t)}q0t(t){this.y0t.set(t.Oz(),t)}$0t(t){this.w0t.set(t.Oz(),t)}X0t(t){switch(t.K0t()){case 0:this.T0t.set(t.Y0t().toLowerCase(),t);break;case 1:this._0t.set(t.Y0t().toLowerCase(),t)}}Z0t(t){this.b0t.set(t.Oz(),t),(t.dz()?this.M0t:this.G0t).push(t)}Q0t(i){2<=i.length&&i.sort(t);let e=this.S0t.get(i.length);e||(e=[],this.S0t.set(i.length,e));for(let t=0,s=e.length;t<s;++t){const h=e[t];if(r(i,h))return h}return e.push(i),i}t1t(t){return this.x0t.push(t.s1t()),this.v0t++}iD(){return this.Uct}i1t(){return this.iD().M8()}XF(){return this.i1t().XF()}e1t(){const t=this.i1t(),s=t.XF();return s.h1t(t.Fft())}r1t(){const t=this.i1t(),s=t.XF();return s.n1t(t.Oft())}o1t(){return this.I0t}x8(){return this.r0t}a1t(t){const s=[];for(t=t.u1t();t;)G.Uh(s,t.l1t()),t=t.u1t();return s}c1t(t){const s={};for(const i of this.a1t(t))s[i.f1t()]=i.d1t();return Object.create(Object.prototype,s)}p1t(t){return this.b0t.get(t)||null}m1t(t){return this.g0t.get(t)||null}g1t(t){return this.y0t.get(t)||null}y1t(t){return this.w0t.get(t)||null}UF(t){return this.T0t.get(t.toLowerCase())||null}w1t(t,s){let i=this._0t.get((t.Wc()+"."+s).toLowerCase());if(i)return i;if(!t.Iz())for(const e of t.S1t())if(i=this._0t.get((e.Wc()+"."+s).toLowerCase()))return i;return null}b1t(){return this.M0t}v1t(){return this.G0t}M1t(t){for(const s of this.M0t)s.G1t();if(t)for(const i of this.G0t)i.V2()&&i.G1t()}x1t(t){return this.m0t.get(t.toLowerCase())||null}T1t(t){const s=this.g0t.get(t);return s&&s._1t()?s:null}I1t(){return this.p0t}C1t(){for(const t of this.p0t)t.E1t()}R1t(){for(const t of this.f0t)t.P1t()}A1t(t){this.R1t(),this.P0t++;for(const s of t.WX()){const i=s.Xq();i&&(this.$c.F1t(s),i.m_(),this.$c.D1t())}this.P0t--}async O1t(t){this.R1t(),this.P0t++;for(const s of this.L1t(t))await this.$c.k1t(s);this.P0t--}*L1t(t){for(const s of t.WX()){const i=s.Xq();i&&(this.$c.F1t(s),yield*i.N1t(),this.$c.D1t())}}B1t(t,s,i,e){let h=!1;if(!t.ND())return this.W1t(s,i,e);this.A0t++;for(const r of t.WX()){const n=r.Xq();if(n){this.$c.F1t(r);for(const a of n.j1t()){const u=a.B1t(s,i,e);h=h||u}const o=n.B1t(s,i,e);h=h||o,this.$c.D1t()}}return this.A0t--,h}*H1t(t,s,i,e){let h=!1;if(!t.ND())return this.W1t(s,i,e);this.A0t++;for(const r of t.WX()){const n=r.Xq();if(n){this.$c.F1t(r);for(const a of n.j1t()){const u=yield*a.H1t(s,i,e);h=h||u}const o=yield*n.H1t(s,i,e);h=h||o,this.$c.D1t()}}return this.A0t--,h}W1t(t,s,i){return this.E0t.push([t,s,i]),!1}V1t(t,s,i){let e=null,h=new Promise(t=>e=t);return this.R0t.push([t,s,i,e]),h}*U1t(){if(this.$c.z1t())throw new Error("should not be in breakpoint");const t=this.$c.jD();for(;this.R0t.length;){const[s,i,e,h]=this.R0t.shift(),r=yield*this.H1t(t,s,i,e);h(r)}}async J1t(){for(const t of this.U1t())await this.$c.k1t(t)}q1t(t,i,e,h){let r=!1,s=t.ND(),n=s.Xq();if(n){this.A0t++,this.$c.F1t(s);const o=n.j1t();for(let t=0,s=o.length;t<s;++t){const u=o[t].q1t(i,e,h);r=r||u}const a=n.q1t(i,e,h);return r=r||a,this.$c.D1t(),this.A0t--,r}}*$1t(t,i,e,h){let r=!1,s=t.ND(),n=s.Xq();if(n){this.A0t++,this.$c.F1t(s);const o=n.j1t();for(let t=0,s=o.length;t<s;++t){const u=yield*o[t].$1t(i,e,h);r=r||u}const a=yield*n.$1t(i,e,h);return r=r||a,this.$c.D1t(),this.A0t--,r}}X1t(){return this.A0t}K1t(){return 0<this.X1t()}Y1t(){return++this.A0t}Z1t(){--this.A0t}Q1t(){return 0<this.P0t}Ek(){return this.Q1t()||this.K1t()}U$(t){for(const[s,i,e]of this.E0t)this.B1t(t,s,i,e);G.Pn(this.E0t)}Ik(t){t?this.F0t++:this.F0t--}GN(){return 0<this.F0t}tdt(i){for(let t=0,s=i.length;t<s;++t)i[t].sdt().Vl()}idt(i){for(let t=0,s=i.length;t<s;++t)i[t].sdt().jct()}C8(i){for(let t=0,s=i.length;t<s;++t)i[t].sdt().Hct()}P8(i){for(let t=0,s=i.length;t<s;++t)i[t].sdt().O8()}KF(s){const i=new Set,e=this.Uct.yft(),h=this.Uct.wft();for(let t=0;t<=h;++t){const r=e[t].Xft();if(r)for(const n of r)s&&s.has(n)||i.add(n)}return i}edt(t){const s=new Set([...t]),i=this.KF(s);if(0<i.size){for(const e of i)e.sdt().jct();return[...i]}return null}hdt(){const t=G.ir(G.rdt,this);return this.D0t.push(t),t}ndt(){return this.D0t}odt(){if(this.D0t.length){let i=this.i1t(),e=!1;this.P0t++;for(let t=0,s=this.D0t.length;t<s;++t){const h=this.D0t[t];h.adt()&&h.udt(i),h.ldt()&&(e=!0)}e&&(this.cdt(),i.Yf(null)),this.P0t--}}async fdt(){if(this.D0t.length){let i=this.i1t(),e=!1;this.P0t++;for(let t=0,s=this.D0t.length;t<s;++t){const h=this.D0t[t];h.adt()&&await h.ddt(i),h.ldt()&&(e=!0)}e&&(this.cdt(),i.Yf(null)),this.P0t--}}cdt(){const t=G.Bn(this.D0t,t=>t.ldt());for(const s of t)s.er()}sX(){for(const t of this.D0t)t.er();G.Pn(this.D0t)}pdt(t){for(const s of this.D0t)s.Vct(t);for(const i of t){const e=this.N0t.get(i);if(this.N0t.delete(i),e)for(const{resolve:h}of e.mdt.values())h(!0)}}gdt(t){this.O0t.push({promise:t,ydt:this.X1t()})}wdt(){G.Pn(this.O0t)}Sdt(){const s=this.X1t();this.O0t=this.O0t.filter(t=>t.ydt<=s)}bdt(){const t=Promise.all(this.O0t.map(t=>t.promise));return this.O0t=[],t}rD(t){const s=t.toLowerCase();this.L0t.push(s),this.$c.t4(G.V$.H$.j$.vdt,null),this.L0t.pop();for(const e of this.$c.VF().ndt())e.Mdt()&&e.Gdt()===s&&e.xdt();const i=this.k0t.get(s);i&&(i.resolve(),this.k0t.delete(s))}oD(t){const i=t.toLowerCase(),s=this.k0t.get(i);if(s)return s.promise;{let s=null,t=new Promise(t=>s=t);return this.k0t.set(i,{promise:t,resolve:s}),t}}Tdt(){if(0===this.L0t.length)throw new Error("not in a signal");return this.L0t.at(-1)}_dt(t){let s=this.N0t.get(t);return s||(s={Idt:[],mdt:new Map},this.N0t.set(t,s)),s}WN(t,s){const i=this._dt(t),e=s.toLowerCase();i.Idt.push(e),this.$c.t4(t.uk().Edt().j$.Cdt,t),i.Idt.pop();for(const r of this.$c.VF().ndt())r.Rdt()&&r.Gdt()===e&&r.Pdt(t);const h=i.mdt.get(e);h&&(h.resolve(!1),i.mdt.delete(e)),0===i.Idt.length&&0===i.mdt.size&&this.N0t.delete(t)}jN(t,s){const i=this._dt(t),e=s.toLowerCase(),h=i.mdt.get(e);if(h)return h.promise;{let s=null,t=new Promise(t=>s=t);return i.mdt.set(e,{promise:t,resolve:s}),t}}Adt(t){const s=this._dt(t);if(s&&0!==s.Idt.length)return s.Idt.at(-1);throw new Error("not in a signal")}QJ(){return{groups:this.Fdt(),cnds:this.Ddt(),acts:this.Odt(),vars:this.Ldt(),waits:this.kdt()}}tq(t){this.Ndt(t.groups),this.Bdt(t.cnds),this.Wdt(t.acts),this.jdt(t.vars),this.Hdt(t.waits)}Fdt(){const t={};for(const s of this.I1t())t[s.Oz().toString()]=s.Vdt();return t}Ndt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.T1t(e);h&&h.Udt(i)}}Ddt(){const t={};for(const[s,i]of this.y0t){const e=i.QJ();e&&(t[s.toString()]=e)}return t}Bdt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,r]of this.y0t)r.tq(s.get(h)||null)}Odt(){const t={};for(const[s,i]of this.w0t){const e=i.QJ();e&&(t[s.toString()]=e)}return t}Wdt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,r]of this.w0t)r.tq(s.get(h)||null)}Ldt(){const t={};for(const[s,i]of this.b0t)i.zdt()||!i.dz()&&!i.V2()||(t[s.toString()]=i.iet());return t}jdt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.p1t(e);h&&h.Wet(i)}}kdt(){return this.D0t.filter(t=>!t.Jdt()).map(t=>t.QJ())}Hdt(t){this.sX();for(const s of t){const i=G.rdt.qdt(this,s);i&&this.D0t.push(i)}}$dt(){return[...this.$c.jD().WX()].map(t=>t.Xq()).filter(t=>t).map(t=>t.Xdt())}Kdt(t){for(;t;){const s=t.u1t();if(s instanceof G.Ydt)return s;t=s}return null}B0t(t,s){Array.isArray(s)||(s=[]);const i=this.UF(t.toLowerCase());if(!i)return null;if(!i.Wl())return i.zF();const e=i.Zdt();if(s.length<e.length)for(s=s.slice(0);s.push(e[s.length].s1t()),s.length<e.length;);const h=i.qF();return h.YF(h.$F(),!1,i.QF(),i.zF(),...s)}}}{const uo=self.Os;uo.W0t=class extends uo.Qh{constructor(t,s){super(),this.pft=t,this.$c=t.IO(),this.nr=s[0],this.Qdt=[],this.tpt=new Map,this.spt=new Map,this.ipt=new Map,this.ept=!1,this.hpt=[],this.rpt=[],this.npt=new Set;for(const i of s[1])this.opt(i,null,this.Qdt);this.apt=this.$c.vX()?{type:"sheet",name:this.nr,upt:0,children:[]}:null}er(){this.pft=null,this.$c=null}opt(t,s,i){switch(t[0]){case 0:case 3:this.lpt(t,s,i);break;case 1:this.cpt(t,s,i);break;case 2:this.fpt(t,s,i);break;case 4:this.dpt(t,s);break;case 5:this.ppt(t,s,i);break;case 6:this.mpt(t,s);break;default:throw new Error("invalid event type")}}lpt(t,s,i){const e=uo.gpt.jM(this,s,t);if(e.fft()){i.push(e);const h=e.ypt();for(let t=0,s=h.length;t<s;++t)h[t].wpt()&&this.Spt(e,t)}else e.wpt()?this.Spt(e,0):i.push(e)}dpt(t,s){const i=uo.Ydt.bpt(this,s,t);this.pft.X0t(i)}mpt(t,s){const i=uo.Ydt.vpt(this,s,t);this.pft.X0t(i)}cpt(t,s,i){const e=uo.Mpt.jM(this,s,t);i.push(e)}fpt(t,s,i){const e=uo.Gpt.jM(this,s,t);i.push(e)}ppt(t,s,i){const e=uo.xpt.jM(this,s,t);i.push(e)}Spt(h,r){h.fft()||this.pft.j0t(h);const n=h.h1t(r),o=n.Tpt(),a=n.mN();if(n._pt()){let t=this.spt.get(a),s=(t||(t=new Map,this.spt.set(a,t)),n.Ipt().toLowerCase()),i=t.get(o),e=(i||(i=new Map,t.set(o,i)),i.get(s));e||(e=[],i.set(s,e)),e.push([h,r])}else{let t=this.tpt.get(a),s=(t||(t={Cpt:new Map,Ept:new Map},this.tpt.set(a,t)),n.c6()),i,e=(s?(i=t.Ept.get(s))||(i=new Map,t.Ept.set(s,i)):i=t.Cpt,i.get(o));e||(e=[],i.set(o,e)),e.push([h,r])}}H0t(){const i=this.Qdt;for(let t=0,s=i.length;t<s;++t){const e=t<s-1&&i[t+1]instanceof uo.gpt&&i[t+1].Rpt();i[t].H0t(e)}}Ppt(t){this.hpt.push(t)}M$(){uo.Pn(this.rpt),this.Apt(this),this.npt.clear()}Apt(t){const s=t.rpt,i=t.npt;for(const e of this.hpt){const h=e.Fpt();e.Dpt()&&t!==h&&!i.has(h)&&(i.add(h),h.Apt(t),s.push(h))}}j1t(){return this.rpt}VF(){return this.pft}IO(){return this.$c}Wc(){return this.nr}Opt(t,s){this.ipt.set(s,t)}Lpt(t){return this.ipt.get(t)||null}P1t(){this.ept=!1}m_(){if(!this.ept){const t=this.$c,s=t.kpt(),i=s?performance.now():0,e=(this.ept=!0,this.VF()),h=e.i1t();for(const r of this.Qdt)r.m_(h),e.tdt(r.v8()),e.wdt(),t.Pk();h.Yf(null),s&&(this.apt.upt+=performance.now()-i)}}*N1t(){if(!this.ept){this.ept=!0;const t=this.$c,s=this.VF(),i=s.i1t();for(const e of this.Qdt)yield*e.N1t(i),s.tdt(e.v8()),s.wdt(),t.Pk();i.Yf(null)}}B1t(e,h,r){if(!h)return this.Npt(e,h,null,null);{let t=h.mN(),s=!1,i=this.Npt(e,h,t,r);s=s||i;for(const n of t.S1t())i=this.Npt(e,h,n,r),s=s||i}}Npt(t,s,i,e){const h=this.tpt.get(i);if(!h)return!1;const r=e?h.Ept.get(e):h.Cpt;if(!r)return!1;const n=r.get(t);if(!n)return!1;let o=!1;for(const[a,u]of n){const l=this.Bpt(s,a,u);o=o||l}return o}*H1t(e,h,r){if(!h)return yield*this.Wpt(e,h,null,null);{let t=h.mN(),s=!1,i=yield*this.Wpt(e,h,t,r);s=s||i;for(const n of t.S1t())i=yield*this.Wpt(e,h,n,r),s=s||i}}*Wpt(t,s,i,e){const h=this.tpt.get(i);if(!h)return!1;const r=e?h.Ept.get(e):h.Cpt;if(!r)return!1;const n=r.get(t);if(!n)return!1;let o=!1;for(const[a,u]of n){let t;t=a.jpt()?this.Bpt(s,a,u):yield*this.Hpt(s,a,u),o=o||t}return o}q1t(t,s,i){const e=s.mN(),h=this.spt.get(e);if(!h)return!1;const r=h.get(t);if(!r)return!1;const n=r.get(i);if(!n)return!1;let o=!1;for(let t=0,s=n.length;t<s;++t){const a=n[t],u=this.Bpt(null,a[0],a[1]);o=o||u}return o}*$1t(t,s,i){const e=s.mN(),h=this.spt.get(e);if(!h)return!1;const r=h.get(t);if(!r)return!1;const n=r.get(i);if(!n)return!1;let o=!1;for(let h=0,t=n.length;h<t;++h){let t=n[h],s=t[0],i=t[1],e;e=s.jpt()?this.Bpt(null,s,i):yield*this.Hpt(null,s,i),o=o||e}return o}Bpt(t,s,i){let e=this.$c,h=this.pft,r=h.XF(),n=h.iD(),o=h.X1t(),a=!1;r&&h.idt(r.$F()),h.idt(s.$F());const u=1<o,l=(u&&h.o1t().G8(),n.G8(s));if(t){const f=s.ypt()[i].mN(),d=f.vk();d.rft(t),t.IN()&&t.Vpt()}let c=!0;if(s.nB()){const p=s.Upt();for(let t=0,s=p.length;t<s;++t)if(!p[t].zpt(l)){c=!1;break}}return c&&(s.fft()?s.Jpt(l,i):s.m_(l),a=l.Nft()),n.O8(),u&&h.o1t().O8(),h.P8(s.$F()),r&&h.P8(r.$F()),r||1!==o||(h.wdt(),h.GN())||e.Pk(),a}*Hpt(t,s,i){let e=this.$c,h=this.pft,r=h.XF(),n=h.iD(),o=h.X1t(),a=!1;r&&h.idt(r.$F()),h.idt(s.$F());const u=1<o,l=(u&&h.o1t().G8(),n.G8(s));if(t){const f=s.ypt()[i].mN(),d=f.vk();d.rft(t),t.IN()&&t.Vpt()}let c=!0;if(s.nB()){const p=s.Upt();for(let t=0,s=p.length;t<s;++t)if(!(yield*p[t].qpt(l))){c=!1;break}}return c&&(s.fft()?yield*s.$pt(l,i):yield*s.N1t(l),a=l.Nft()),n.O8(),u&&h.o1t().O8(),h.P8(s.$F()),r&&h.P8(r.$F()),r||1!==o||(h.wdt(),h.GN())||e.Pk(),a}Xdt(){return this.apt}}}{let l=function(t,s){return!0};l;const lo=self.Os,co=[];function*B(t,s){return!0}lo.gpt=class extends lo.Qh{constructor(t,s,i){super(),this.pq=t,this.$c=t.IO(),this.Xpt=s,this.Kpt=null,this.Uct=this.$c.VF().iD(),this.Ypt=[],this.Zpt=[],this.Qpt=!1,this.tmt=!1,this.smt=!1,this.imt=!1,this.emt=!!i[2],this.hmt=!1,this.rmt=null,this.nmt=[],this.bht=[],this.omt=[],this.amt=l,this.umt=B,this.lmt=!1,this.cmt=!1,this.fmt="",this.dmt=!1,this.pmt=null,this.apt=null,this.iU=i[4],this.mmt=i[5],this.pq.Opt(this,this.mmt),this.gmt=this.$c.vX()?{ymt:i[3][0],wmt:i[3][1],Smt:!1,bmt:!1,vmt:!1,Mmt:!1}:null,this.VF().J0t(this),3===i[0]&&this.Gmt(i[1]);let e=0;for(const h of i[6]){const r=lo.xmt.jM(this,h,e++);this.nmt.push(r),this.Tmt(r.mN())}e=0;for(const n of i[7]){const o=lo._mt.jM(this,n,e++);this.bht.push(o)}if(9===i.length){const a=i[8];for(const u of a)this.pq.opt(u,this,this.omt)}this.nmt.length&&(this.hmt=null===this.nmt[0].mN()&&this.nmt[0].Tpt()===lo.V$.H$.j$.Imt),0===this.nmt.length&&(this.nmt=co),0===this.bht.length&&(this.bht=co),0===this.omt.length&&(this.omt=co)}static jM(t,s,i){return lo.ir(lo.gpt,t,s,i)}Gmt(t){this.lmt=!0,this.cmt=!!t[0],this.dmt=this.cmt,this.fmt=t[1].toLowerCase(),this.pmt=[],this.VF().U0t(this),this.$c.vX()&&(this.apt={type:"group",name:t[1],upt:0,children:[]})}Cmt(t){this.pmt.push(t)}Emt(t,s){for(const i of t.a$().q$())s.includes(i)||s.push(i)}Rmt(t,s){if(t)if(s.includes(t)||s.push(t),t.Iz())for(const i of t.Pmt())i.IN()&&this.Emt(i,s);else t.IN()&&this.Emt(t,s)}Tmt(t){this.Rmt(t,this.Ypt)}Amt(t){this.Rmt(t,this.Zpt)}Fmt(){this.Ypt=this.$c._z()}H0t(t){this.imt=!!t,this.Dmt(),this.Omt();for(const s of this.nmt)s.H0t();if(0<this.bht.length){let t=!1;for(const e of this.bht)e.H0t(),e.Lmt()&&(t=!0);t?(this.amt=this.kmt,this.umt=this.Nmt):(this.amt=this.Bmt,this.umt=this.Wmt)}const i=this.omt;for(let t=0,s=i.length;t<s;++t){const h=t<s-1&&i[t+1]instanceof lo.gpt&&i[t+1].Rpt();i[t].H0t(h)}this.gmt&&this.jmt(),this.apt&&this.Hmt().Xdt().children.push(this.apt)}Xdt(){return this.apt}Hmt(){let t=this.nB();for(;t;){if(t._1t())return t;t=t.nB()}return this.pq}jmt(){const t=this.gmt;t.Smt=this.nmt.every(t=>t.jpt()),t.bmt=this.bht.every(t=>t.jpt()),t.vmt=this.omt.every(t=>t.jpt()),t.Mmt=t.Smt&&t.bmt&&t.vmt}Vmt(){let t=this;for(;t.jmt(),t=t.nB(););}Dmt(){if(this._1t()){let t=this.nB();for(this.smt=!0;t;){if(!t._1t()){this.smt=!1;break}t=t.nB()}}}Umt(){const t=this.$c._z();if(this.Ypt===t)this.Zpt=t;else{this.Zpt=lo.Vn(this.Ypt);let t=this.nB();for(;t;){for(const i of t.Ypt)this.Amt(i);t=t.nB()}const s=this.VF();this.Ypt=s.Q0t(this.Ypt),this.Zpt=s.Q0t(this.Zpt)}}Omt(){if(this.zmt()){this.rmt=[];let t=this.nB();for(;t;)this.rmt.push(t),t=t.nB();this.rmt.reverse()}}Jmt(){this.tmt=!0,this.Xpt&&this.Xpt.Jmt()}Jft(){return this.tmt}v8(){return this.Ypt}$F(){return this.Qpt||(this.Qpt=!0,this.Umt()),this.Zpt}qmt(t){return this.Ypt.includes(t)}Upt(){return this.rmt}Xq(){return this.pq}VF(){return this.pq.VF()}IO(){return this.$c}nB(){return this.Xpt}$mt(t){this.Kpt=t}u1t(){return this.Kpt||this.Xpt}Xmt(){return this.mmt}Kmt(){return this.gmt&&this.gmt.wmt}Ymt(){return this.Kmt()&&this.gmt.ymt}Zmt(t){this.gmt.ymt=!!t,this.Vmt()}_1t(){return this.lmt}Qmt(){return this.smt}Rpt(){return this.hmt}tgt(){return this.imt}z0t(){return this.fmt}Vdt(){return this.dmt}E1t(){this.Udt(this.cmt)}Udt(t){if(t=!!t,!this.lmt)throw new Error("not a group");if(this.dmt!==t){this.dmt=t;for(const s of this.pmt)s.sgt();if(this.pmt.length){const i=this.$c.hO(),e=i.Xq();e&&e.M$()}}}Oz(){return this.iU}fft(){return this.emt}wpt(){return this.nmt.length&&this.nmt[0].wpt()}igt(){return this.Kpt&&this.Kpt instanceof lo.Ydt}zmt(){return this.igt()||this.nmt.some(t=>t.wpt())}ypt(){return this.nmt}qft(){return this.nmt.length}h1t(t){if((t=Math.floor(t))<0||t>=this.nmt.length)throw new RangeError("invalid condition index");return this.nmt[t]}egt(t){return this.h1t(t)}hgt(t){let s=t.fF();if(0!==s){--s;const i=t.rgt()?t.ngt():t.mN();for(;0<=s;--s){const e=this.nmt[s];if(i===e.mN()||e.rgt()&&e.ngt()===i)return!1}}return!0}ogt(){return this.bht}agt(){return this.bht.length}n1t(t){if((t=Math.floor(t))<0||t>=this.bht.length)throw new RangeError("invalid action index");return this.bht[t]}ugt(s){s=Math.floor(s);const t=this.bht.find(t=>t.lgt()===s);if(t)return t;throw new RangeError("invalid action debug index")}cgt(t){return 0<=(t=Math.floor(t))&&t<this.bht.length}fgt(){return this.omt}l1t(){return this.omt.filter(t=>t instanceof lo.Mpt)}zpt(i){i.Aft(this);let e=this.nmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.Dft(t),r.T6())throw new Error("trigger cannot be used as sub-event to a loop");if(r.m_())h=!0;else if(!this.emt)return!1}return!this.emt||h}Jpt(t,s){t.Aft(this),t.Dft(s),this.nmt[s].m_()&&(this.amt(t,0)&&this.dgt(t),t.kft(!0))}*qpt(i){i.Aft(this);let e=this.nmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.Dft(t),r.T6())throw new Error("trigger cannot be used as sub-event to a loop");if(r.jpt()?r.m_():yield*r.N1t())h=!0;else if(!this.emt)return!1}return!this.emt||h}*$pt(t,s){t.Aft(this),t.Dft(s);let i=this.nmt[s];if(i.jpt()?i.m_():yield*i.N1t())(this.pgt()?this.amt(t,0):yield*this.umt(t,0))&&(this.mgt()?this.dgt():yield*this.ggt()),t.kft(!0)}m_(t){t.Aft(this),this.hmt||t.Bft(!1),this.emt?this.ygt(t):this.wgt(t)}*N1t(t){(this.Ymt()||this.$c.Sgt())&&(yield this),t.Aft(this),this.hmt||t.Bft(!1),this.emt?yield*this.bgt(t):yield*this.vgt(t)}ygt(i){let e=this.nmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(!r.wpt()){i.Dft(t);const n=r.m_();h=h||n}}i.kft(h),h&&(this.amt(i,0)&&this.dgt(i),this.imt)&&i.Bft(!0)}*bgt(i){let e=this.nmt,h=0===e.length;for(let s=0,t=e.length;s<t;++s){const r=e[s];if(!r.wpt()){i.Dft(s);let t;t=r.jpt()?r.m_():yield*r.N1t(),h=h||t}}if(i.kft(h),h)(this.pgt()?this.amt(i,0):yield*this.umt(i,0))&&(this.mgt()?this.dgt():yield*this.ggt()),this.imt&&i.Bft(!0)}wgt(i){const e=this.nmt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=(i.Dft(t),h.m_());if(!r)return void i.kft(!1)}i.kft(!0),this.amt(i,0)&&this.dgt(i),i.Nft()&&this.imt&&i.Bft(!0)}*vgt(i){const e=this.nmt;for(let t=0,s=e.length;t<s;++t){const h=e[t];i.Dft(t);if(!(h.jpt()?h.m_():yield*h.N1t()))return void i.kft(!1)}i.kft(!0);(this.pgt()?this.amt(i,0):yield*this.umt(i,0))&&(this.mgt()?this.dgt():yield*this.ggt()),i.Nft()&&this.imt&&i.Bft(!0)}Bmt(i,e){const h=this.bht;for(let t=e,s=h.length;t<s;++t){const r=h[t];i.Lft(t),r.m_()}return!0}*Wmt(i,e){const h=this.bht;for(let t=e,s=h.length;t<s;++t){const r=h[t];i.Lft(t),r.jpt()?r.m_():yield*r.N1t()}return!0}kmt(i,e){const h=this.VF(),r=this.bht;for(let t=e,s=r.length;t<s;++t){const n=r[t],o=(i.Lft(t),n.m_());if(n.Mgt()&&!0===o)return!1;n.Ggt()&&o instanceof Promise&&h.gdt(o)}return!0}*Nmt(i,e){const h=this.VF(),r=this.bht;for(let s=e,t=r.length;s<t;++s){const n=r[s];i.Lft(s);let t;if(t=n.jpt()?n.m_():yield*n.N1t(),n.Mgt()&&!0===t)return!1;n.Ggt()&&t instanceof Promise&&h.gdt(t)}return!0}xgt(t){this.amt(t,t.Oft())&&this.dgt()}*Tgt(t){(yield*this.umt(t,t.Oft()))&&(yield*this.ggt())}dgt(){if(this.omt.length){const t=this._1t()&&this.$c.kpt(),s=t?performance.now():0,i=this.Uct,e=i.G8(this);this.tmt?this._gt(e):this.Igt(e),i.O8(),t&&(this.apt.upt+=performance.now()-s)}}_gt(e){const h=this.lmt,r=this.smt,n=this.VF(),o=this.omt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],u=a.v8(),l=!r||!h&&t<i;l&&n.C8(u),a.m_(e),l?n.P8(u):n.tdt(u)}}Igt(i){const e=this.omt;for(let t=0,s=e.length;t<s;++t)e[t].m_(i)}*ggt(){if(this.omt.length){const t=this.Uct,s=t.G8(this);this.tmt?yield*this.Cgt(s):yield*this.Egt(s),t.O8()}}*Cgt(e){const h=this.lmt,r=this.smt,n=this.VF(),o=this.omt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],u=a.v8(),l=!r||!h&&t<i;l&&n.C8(u),yield*a.N1t(e),l?n.P8(u):n.tdt(u)}}*Egt(i){const e=this.omt;for(let t=0,s=e.length;t<s;++t)yield*e[t].N1t(i)}E8(i,e){e.Pft();const h=this.nmt;if(!this.fft())for(let t=i.Fft()+1,s=h.length;t<s;++t){const r=h[t],n=(e.Dft(t),r.m_());if(!n)return!1}return this.amt(e,0)&&this.dgt(e),!0}*Rgt(i,e){e.Pft();const h=this.nmt;if(!this.fft())for(let t=i.Fft()+1,s=h.length;t<s;++t){const r=h[t];e.Dft(t);if(!(r.jpt()?r.m_():yield*r.N1t()))return!1}return(this.pgt()?this.amt(e,0):yield*this.umt(e,0))&&(this.mgt()?this.dgt():yield*this.ggt()),!0}jpt(){return!this.Ymt()&&!this.$c.Sgt()&&this.gmt.Mmt}pgt(){return!this.$c.Sgt()&&this.gmt.bmt}mgt(){return!this.$c.Sgt()&&this.gmt.vmt}Pgt(i){if(this.nB()){const e=this.Upt();for(let t=0,s=e.length;t<s;++t)if(!e[t].zpt(i))return!1}return!0}*Agt(i){if(this.nB()){const e=this.Upt();for(let t=0,s=e.length;t<s;++t)if(!(yield*e[t].qpt(i)))return!1}return!0}Fgt(t,s,i){if(0<s.length)if(i){const e=s.map(t=>t.Qs(0));t.o1t().G8(),this.Kpt.Dgt(e)}else this.Kpt.Ogt(s);else i&&t.o1t().G8()}Lgt(t,s,i,e){let h,r,n=0<t.length,o=null,a=this.$c,u=this.Uct,l=a.VF(),c=this.Kpt,f=c.Ggt(),d=l.Y1t(),p=1<d;if(this.Fgt(l,s,p),n&&(i?l.C8(t):l.idt(t)),null!==e){if(e.kgt){const g=i?e.kgt.vk():e.kgt.sdt().Wct(),y=e.Ngt.vk();y.nft(g.bk()),y.lft(),i||e.Ngt.Bgt()}else if(e.Wgt){const w=e.Wgt.vk();w.nft(e.jgt),w.lft()}e.Hgt&&(o=l.edt(t))}const m=u.G8(this);return i&&m.$ft(t),this.Pgt(m)&&(m.Aft(this),f&&([r,h]=c.Vgt()),this.wgt(m),f)&&c.Ugt(r),u.O8(),p&&l.o1t().O8(),null!==o&&l.P8(o),n&&l.P8(t),l.Z1t(),f||l.Sdt(),h}*zgt(t,s,i,e){let h,r,n=((this.Ymt()||this.$c.Sgt())&&(yield this),0<t.length),o=null,a=this.$c,u=this.Uct,l=a.VF(),c=this.Kpt,f=c.Ggt(),d=l.Y1t(),p=1<d;if(this.Fgt(l,s,p),n&&(i?l.C8(t):l.idt(t)),null!==e){if(e.kgt){const g=i?e.kgt.vk():e.kgt.sdt().Wct(),y=e.Ngt.vk();y.nft(g.bk()),y.lft(),i||e.Ngt.Bgt()}else if(e.Wgt){const w=e.Wgt.vk();w.nft(e.jgt),w.lft()}e.Hgt&&(o=l.edt(t))}const m=u.G8(this);return i&&m.$ft(t),(yield*this.Agt(m))&&(m.Aft(this),f&&([r,h]=c.Vgt()),yield*this.vgt(m),f)&&c.Ugt(r),u.O8(),p&&l.o1t().O8(),null!==o&&l.P8(o),n&&l.P8(t),l.Z1t(),f||l.Sdt(),h}Jgt(t,s){const i=this.$F(),e=0<i.length,h=this.$c,r=this.Uct,n=h.VF(),o=n.Y1t(),a=1<o,u=(a&&n.o1t().G8(),this.Kpt.Dgt(t),e&&(s?n.C8(i):n.idt(i)),r.G8(this));this.Pgt(u)&&(u.Aft(this),this.wgt(u)),r.O8(),a&&n.o1t().O8(),e&&n.P8(i),n.Z1t(),n.Sdt()}*qgt(t,s){(this.Ymt()||this.$c.Sgt())&&(yield this);const i=this.$F(),e=0<i.length,h=this.$c,r=this.Uct,n=h.VF(),o=n.Y1t(),a=1<o,u=(a&&n.o1t().G8(),this.Kpt.Dgt(t),e&&(s?n.C8(i):n.idt(i)),r.G8(this));(yield*this.Agt(u))&&(u.Aft(this),yield*this.vgt(u)),r.O8(),a&&n.o1t().O8(),e&&n.P8(i),n.Z1t(),n.Sdt()}YF(t,s,i,e,...h){let r,n,o=0<t.length,a=this.$c,u=this.Uct,l=a.VF(),c=this.Kpt,f=c.Ggt(),d=l.Y1t(),p=1<d,m=(p&&l.o1t().G8(),0<h.length&&this.Kpt.Dgt(h),o&&(s?l.C8(t):l.idt(t)),u.G8(this));return m.Vft(i,e),u.Sft(m),a._8(!1),this.Pgt(m)&&(m.Aft(this),f&&([n,r]=c.Vgt()),this.wgt(m),f)&&c.Ugt(n),a._8(!0),u.O8(),u.bft(),p&&l.o1t().O8(),o&&l.P8(t),l.Z1t(),f||l.Sdt(),r||m.Uft()}}}{let e=self.Os,t=[],s=!1;e.xpt=class extends e.Qh{constructor(t,s,i){super();const e=t.IO(),h=t.VF(),r=(this.pq=t,this.pft=h,this.$c=t.IO(),this.Xpt=s,e.$gt(i[1]));this.Xgt=r,this.mmt=i[2],this.pq.Opt(this,this.mmt),this.gmt=e.vX()?{ymt:i[3][0],wmt:i[3][1]}:null}static jM(t,s,i){return e.ir(e.xpt,t,s,i)}H0t(){const t=this.Xgt,s=this.$c.VF().c1t(this);this.Xgt=t.bind(null,this.$c.DL(),s)}nB(){return this.Xpt}u1t(){return this.Xpt}Xq(){return this.pq}Xmt(){return this.mmt}Kmt(){return this.gmt&&this.gmt.wmt}Ymt(){return this.Kmt()&&this.gmt.ymt}Zmt(t){this.gmt.ymt=!!t}Rpt(){return!1}v8(){return t}$F(){return this.Xpt?this.Xpt.$F():t}m_(t){t.Aft(this),this.pft.gdt(this.Kgt())}async Kgt(){try{await this.Xgt()}catch(t){console.error(`Unhandled exception running script %c${this.Xq().Wc()}, event ${this.Xmt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),s||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),s=!0)}}*N1t(t){t.Aft(this),(this.Ymt()||this.$c.Sgt())&&(yield this),this.m_(t)}jpt(){return!this.Ymt()&&!this.$c.Sgt()}static Ygt(){return s}static Zgt(){s=!0}}}{const fo=self.Os;fo.Ydt=class extends fo.Qh{constructor(t,s,i){super(),this.pq=t,this.$c=t.IO(),this.Xpt=s,this.Qgt=0,this.tyt="",this.syt=0,this.iyt=[],this.eyt=!0,this.hyt="",this.Lct=null,this.ryt=!1,this.nyt=[],this.oyt=!1,this.ayt=!1,this.uyt=0,this.lyt=-1,this.cyt=new Map,this.fyt=fo.gpt.jM(t,s,i),this.fyt.$mt(this)}dyt(t){this.Qgt=0,this.tyt=t[0],this.syt=t[1],this.iyt=t[2].map(t=>fo.Mpt.jM(this.pq,this,t)),this.eyt=t[3],this.ayt=t[4],this.oyt=t[5]}pyt(t){this.Qgt=1,this.hyt=t[1],this.Lct=this.$c.ez(t[2]),this.fyt.Tmt(this.Lct),this.tyt=this.Lct.Wc()+"."+this.hyt,this.syt=t[3],this.iyt=t[4].map(t=>fo.Mpt.jM(this.pq,this,t)),this.eyt=t[5],this.ayt=t[6],this.oyt=t[7],this.Lct.myt(this)}static bpt(t,s,i){const e=fo.ir(fo.Ydt,t,s,i),h=i[1];return e.dyt(h),e}static vpt(t,s,i){const e=fo.ir(fo.Ydt,t,s,i),h=i[1];return e.pyt(h),e}V0t(){if(this.Lct&&this.Lct.Iz())for(const t of this.Lct.Pmt())if(t.gyt(this.hyt)){this.ryt=!0;break}}H0t(){for(const t of this.iyt)t.H0t();this.fyt.H0t(!1)}K0t(){return this.Qgt}l1t(){return this.iyt}Zdt(){return this.iyt}JF(){return this.iyt.length}yyt(t){this.nyt.push(t)}wyt(){return this.nyt}Ogt(i){const e=this.iyt;for(let t=0,s=e.length;t<s;++t)e[t].Wet(i[t].Qs(0))}Dgt(i){const e=this.iyt;for(let t=0,s=e.length;t<s;++t)e[t].Wet(i[t])}Syt(){return this.iyt.map(t=>t.iet())}nB(){return this.Xpt}u1t(){return this.Xpt}Y0t(){return this.tyt}byt(){return this.hyt}vyt(){return this.ryt}QF(){return this.syt}mN(){return this.Lct}Wl(){return this.eyt}zF(){switch(this.syt){case 0:return null;case 2:return"";default:return 0}}qF(){return this.fyt}ZF(){return this.oyt}Ggt(){return this.ayt}Vgt(){const t=this.uyt++;this.lyt=t;let s,i=new Promise(t=>s=t);return this.cyt.set(t,{resolve:s,Myt:0}),[t,i]}Ugt(t){const s=this.cyt.get(t);0===s.Myt&&(s.resolve(),this.cyt.delete(t)),this.lyt=-1}Gyt(){const t=this.cyt.get(this.lyt);return t.Myt++,this.lyt}xyt(t){this.lyt=t;const s=this.cyt.get(t);s.Myt--}Tyt(t,s){const i=new Map,e=[];for(const h of this.Lct.vk().bk()){const r=h.mN();if(r.gyt(this.hyt)){const n=i.get(r);Array.isArray(n)?n.push(h):i.set(r,[h])}else e.push(h)}if(0<e.length&&this.fyt.Lgt(t,s,this.oyt,{Wgt:this.Lct,jgt:e}),0<i.size)for(const[o,a]of i){const u=o._yt(this.hyt).qF(),l=[...new Set([...t,...u.v8()])];u.Lgt(l,s,this.oyt,{Wgt:o,jgt:a})}}*Iyt(t,s){const i=new Map,e=[];for(const h of this.Lct.vk().bk()){const r=h.mN();if(r.gyt(this.hyt)){const n=i.get(r);Array.isArray(n)?n.push(h):i.set(r,[h])}else e.push(h)}if(0<e.length&&(yield*this.fyt.zgt(t,s,this.oyt,{Wgt:this.Lct,jgt:e})),0<i.size)for(const[o,a]of i){const u=o._yt(this.hyt).qF(),l=[...new Set([...t,...u.v8()])];yield*u.zgt(l,s,this.oyt,{Wgt:o,jgt:a})}}}}{const po=self.Os,mo=[];po.Mpt=class extends po.Qh{constructor(t,s,i){super();const e=t.VF();this.pq=t,this.pft=e,this.$c=t.IO(),this.Xpt=s,this.I0t=e.o1t(),this.nr=i[1],this.ef=i[2],this.Cyt=i[3],this.c2=!!i[4],this.Eyt=!!i[5],this.Ryt=s instanceof po.Ydt,this.iU=i[6],this.Pyt=this.$c.f1t(i[8]),this.Ayt=t=>this.Wet(t),this.Fyt=()=>this.iet(),this.Dyt=!this.Xpt||this.c2||this.Eyt,this.ght=this.Cyt,this.Oyt=-1,this.Lyt()&&(this.ght=this.ght?1:0),!this.kyt()||this.V2()||this.zdt()||(this.Oyt=e.t1t(this)),e.Z0t(this)}static jM(t,s,i){return po.ir(po.Mpt,t,s,i)}H0t(){if(this.kyt()&&!this.V2()&&!this.zdt()&&!this.Nyt()){const t=this.pft.Kdt(this);t&&t.yyt(this)}}Wc(){return this.nr}f1t(){return this.Pyt}nB(){return this.Xpt}u1t(){return this.nB()}dz(){return!this.nB()}kyt(){return!this.dz()}Nyt(){return this.Ryt}V2(){return this.c2}zdt(){return this.Eyt}ue(){return 0===this.ef}ve(){return 1===this.ef}Lyt(){return 2===this.ef}Rpt(){return!1}Oz(){return this.iU}s1t(){return this.Cyt}v8(){return mo}m_(t){!this.kyt()||this.V2()||this.zdt()||this.Wet(this.s1t())}jpt(){return!0}*N1t(t){this.m_(t)}Wet(t){this.ue()?"number"!=typeof t&&(t=parseFloat(t)):this.ve()?"string"!=typeof t&&(t=t.toString()):this.Lyt()&&(t=t?1:0),this.Dyt?this.ght=t:this.I0t.Qft()[this.Oyt]=t}iet(){return this.Dyt?this.ght:this.I0t.Qft()[this.Oyt]}Byt(){let t=this.iet();return this.Lyt()?!!t:t}G1t(){this.ght=this.Cyt}d1t(){return{configurable:!1,enumerable:!0,get:this.Fyt,set:this.Ayt}}}}{const go=self.Os,yo=[];go.Gpt=class extends go.Qh{constructor(t,s,i){super();const e=t.VF();this.pq=t,this.pft=e,this.$c=t.IO(),this.Xpt=s,this.Wyt=null,this.jyt=i[1],this.Kf=!0}static jM(t,s,i){return go.ir(go.Gpt,t,s,i)}H0t(){this.Wyt=this.pft.v$(this.jyt),this.pq.Ppt(this);let t=this.nB();for(;t;)t instanceof go.gpt&&t._1t()&&t.Cmt(this),t=t.nB();this.sgt(),this.$c.vX()&&this.pq.Xdt().children.push(this.Wyt.Xdt())}nB(){return this.Xpt}v8(){return yo}Fpt(){return this.Wyt}m_(t){const s=!!this.nB(),i=this.$c._z();s&&this.pft.idt(i),this.Wyt.m_(),s&&this.pft.P8(i)}*N1t(t){const s=!!this.nB(),i=this.$c._z();s&&this.pft.idt(i),yield*this.Wyt.N1t(),s&&this.pft.P8(i)}jpt(){return!1}Dpt(){return this.Kf}sgt(){let t=this.nB();for(;t;){if(t instanceof go.gpt&&t._1t()&&!t.Vdt())return void(this.Kf=!1);t=t.nB()}this.Kf=!0}}}{let a=function(t,s){return s<=t?t%s:(t<0&&(t<=-s&&(t%=s),t<0)&&(t+=s),t)};a;const wo=self.Os;wo.Hyt=class extends wo.Qh{constructor(t){super(),this.xv=t,this.$c=t.IO()}H0t(){}static Vyt(t,s){const i=s[0],e=[Go,vo,Mo,xo,So,bo];return wo.ir(e[i],t,s)}};class So extends wo.Hyt{constructor(t,s){super(t),this.Uyt=this.$c.zyt(),this.Xgt=this.$c.$gt(s[1]),this.Xgt!==wo.V$.H$.Fht.random&&this.Xgt!==wo.V$.H$.Fht.Jyt||this.xv.qyt()}$yt(){return this.Uyt.Xyt(this.Xgt,this.Uyt)}}class bo extends wo.Hyt{constructor(t,s){super(t),this.Kyt=null,this.tyt=s[1],this.xv.qyt()}H0t(){const t=this.$c.VF(),s=(this.Kyt=t.UF(this.tyt),this.tyt=null,this.xv.qF()),i=this.Kyt.qF();this.Yyt=[...new Set([...s.$F(),...i.$F()])],this.Yyt=t.Q0t(this.Yyt)}$yt(){const t=this.Kyt;if(t.Wl()){const s=t.qF();return wo.gpt.prototype.YF.bind(s,this.Yyt,t.ZF(),t.QF(),t.zF())}{const i=t.zF();return()=>i}}}class vo extends wo.Hyt{constructor(t,s){super(t),this.Lct=this.$c.ez(s[1]),this.Xgt=this.$c.$gt(s[2]),this.Zyt=!!s[3],this.Uct=this.$c.VF().iD(),this.xv.Qyt(this.Lct)}$yt(){return this.Lct.uk().Xyt(this.Xgt,this.Lct.rk().s6())}twt(...t){const s=this.Lct,i=s.vk().Zct(),e=i.length;if(0===e)return this.Zyt?"":0;const h=a(this.xv.swt(),e);return this.Uct.M8().jft(s),this.Xgt.apply(i[h].s6(),t)}iwt(t,...s){const i=this.Lct,e=i.bk(),h=e.length;if(0===h)return this.Zyt?"":0;const r=a(t,h);return this.Uct.M8().jft(i),this.Xgt.apply(e[r].s6(),s)}}class Mo extends wo.Hyt{constructor(t,s){super(t),this.Lct=this.$c.ez(s[1]),this.ewt=s[3],this.Zyt=!!s[2],this.xv.Qyt(this.Lct)}hwt(){const t=this.Lct.vk().Zct(),s=t.length;if(0===s)return this.Zyt?"":0;const i=a(this.xv.swt(),s);return t[i].rwt(this.ewt)}nwt(){const t=this.Lct,s=t.vk().Zct(),i=s.length;if(0===i)return this.Zyt?"":0;const e=a(this.xv.swt(),i),h=s[e],r=h.mN().owt(t.awt());return h.rwt(this.ewt+r)}uwt(t){const s=this.Lct,i=s.bk(),e=i.length;if(0===e)return this.Zyt?"":0;let h=a(t,e),r=i[h],n=0;return s.Iz()&&(n=r.mN().owt(s.awt())),r.rwt(this.ewt+n)}}class Go extends wo.Hyt{constructor(t,s){super(t),this.Lct=this.$c.ez(s[1]),this.lwt=this.Lct.lht(s[2]),this.cwt=this.Lct.Wst(s[2]),this.Xgt=this.$c.$gt(s[3]),this.Zyt=!!s[4],this.Uct=this.$c.VF().iD(),this.xv.Qyt(this.Lct)}fwt(...t){const s=this.Lct,i=s.vk().Zct(),e=i.length;if(0===e)return this.Zyt?"":0;let h=a(this.xv.swt(),e),r=(this.Uct.M8().jft(s),i[h]),n=0;return s.Iz()&&(n=r.mN().dwt(s.awt())),this.Xgt.apply(r.uht()[this.cwt+n].s6(),t)}pwt(t,...s){const i=this.Lct,e=i.bk(),h=e.length;if(0===h)return this.Zyt?"":0;let r=a(t,h),n=(this.Uct.M8().jft(i),e[r]),o=0;return i.Iz()&&(o=n.mN().dwt(i.awt())),this.Xgt.apply(n.uht()[this.cwt+o].s6(),s)}}class xo extends wo.Hyt{constructor(t,s){super(t),this.mwt=null,this.gwt=s[1]}H0t(){this.mwt=this.$c.VF().p1t(this.gwt)}ywt(){return this.mwt}}}{let r=function(t){const s=self.wwt[t];if(s)return s;throw new Error("invalid expression number")};r;const To=self.Os;To.Swt=class extends To.Qh{constructor(t,s,i){super(),this.xv=t,this.Lg=i,this.ef=s,this.Qs=null,this.bwt=!1,this.Eyt=!1}static jM(t,s,i){const e=s[0],h=[_o,Io,Do,Eo,Po,Co,Ao,_o,Eo,Eo,Oo,Lo,Do,No,Io,Fo,Ro,ko,Bo,Wo,jo,Ho];return To.ir(h[e],t,e,i,s)}H0t(){}qyt(){this.bwt=!0}Qyt(t){this.bwt||!t||t.uk().LL()||(this.bwt=!0)}vwt(){return this.bwt}fF(){return this.Lg}IO(){return this.xv.IO()}qF(){return this.xv.qF()}zdt(){return this.Eyt}Mwt(){return 4===this.ef}};class _o extends To.Swt{constructor(t,s,i,e){super(t,s,i),this.Gwt=0;const h=e[1];this.xwt=h[0],this.Twt=[],this._wt=null;for(let t=1,s=h.length;t<s;++t)this.Twt.push(To.Hyt.Vyt(this,h[t]));this.Twt.length?this.Qs=this.Iwt:(this.Qs=r(this.xwt),this.Eyt=!0)}Cwt(t){if(t<0||t>=this.Twt.length)throw new RangeError("invalid numbered node");return this.Twt[t]}H0t(){for(const s of this.Twt)s.H0t();const t=r(this.xwt);this.Twt.length?this._wt=t(this):this._wt=t}swt(){return this.Gwt}Iwt(t){return this.Gwt=t,this._wt()}}class Io extends _o{constructor(t,s,i,e){super(t,s,i,e),this.Qs=this.Ewt,14===s&&(this.qF().Fmt(),this.xv instanceof To._mt)&&this.qF().Jmt()}Ewt(t){this.Gwt=t;const s=this._wt();return"string"==typeof s?s:""}Rwt(){return r(this.xwt)()}}class Co extends _o{constructor(t,s,i,e){super(t,s,i,e),2<=t.Pwt()?this.Qs=this.$k:this.Qs=this.oO,this.Eyt=!1}oO(t){this.Gwt=t;const s=this._wt(),i=this.IO().hO();return i.oO(s)}$k(t){const s=this.oO(t);return s?s.$k():null}}class Eo extends To.Swt{constructor(t,s,i,e){super(t,s,i),this.Awt=e[1],this.Qs=this.Fwt,this.Eyt=!0}Fwt(){return this.Awt}}class Ro extends To.Swt{constructor(t,s,i,e){super(t,s,i),this.Dwt=e[1],this.Qs=this.Owt,this.Eyt=!0}Owt(){return this.Dwt}}class Po extends To.Swt{constructor(t,s,i,e){super(t,s,i),this.Lct=this.IO().ez(e[1]),2<=t.Pwt()?this.Qs=this.ik:this.Qs=this.mN;const h=this.qF();h.Tmt(this.Lct),this.xv instanceof To._mt?h.Jmt():h.nB()&&h.nB().Jmt(),this.Eyt=!0}mN(){return this.Lct}ik(){return this.Lct?this.Lct.ik():null}}class Ao extends To.Swt{constructor(t,s,i,e){super(t,s,i),this.Z7=this.IO().jD().OX(e[1]),2<=t.Pwt()?this.Qs=this.BD:this.Qs=this.HD,this.Eyt=!0}HD(){return this.Z7}BD(){return this.Z7?this.Z7.BD():null}}class Fo extends To.Swt{constructor(t,s,i,e){super(t,s,i),this.BY=this.IO().jQ().JK(e[1]),2<=t.Pwt()?this.Qs=this.est:this.Qs=this.Tst,this.Eyt=!0}Tst(){return this.BY}est(){return this.BY?this.BY.est():null}}class Do extends To.Swt{constructor(t,s,i,e){super(t,s,i),this.Lwt=e[1],this.Qs=this.kwt,this.Eyt=!0}kwt(){return this.Lwt}}class Oo extends To.Swt{constructor(t,s,i,e){super(t,s,i),this.Nwt=e[1];const h=this.xv.mN();this.xv instanceof To.xmt&&this.xv.V2()||!h||!h.Iz()?(this.Qs=this.Bwt,this.Eyt=!0):(this.Qs=this.Wwt,this.qyt())}Bwt(){return this.Nwt}Wwt(t){t=t||0;let s=this.xv.mN(),i=s.vk(),e=i.bk(),h=null;if(e.length)h=e[t%e.length].mN();else if(i.Kct()){const r=i.Yct();h=r[t%r.length].mN()}else{if(!(0<s.Gk()))return 0;{const n=s.bk();h=n[t%n.length].mN()}}return this.Nwt+h.owt(s.awt())}}class Lo extends To.Swt{constructor(t,s,i,e){super(t,s,i),this.gwt=e[1],this.mwt=null,2<=t.Pwt()?this.Qs=this.jwt:this.Qs=this.Hwt,this.Eyt=!0}H0t(){this.mwt=this.IO().VF().p1t(this.gwt)}Hwt(){return this.mwt}jwt(){return null}}class ko extends To.Swt{constructor(t,s,i,e){super(t,s,i),this.Vwt=e[1],this.Kyt=null,2<=t.Pwt()?this.Qs=this.Uwt:this.Qs=this.zwt,this.Eyt=!0}H0t(){this.Kyt=this.IO().VF().UF(this.Vwt),this.Vwt=null}zwt(){return this.Kyt}Uwt(){return null}}class No extends To.Swt{constructor(t,s,i,e){super(t,s,i),this.Jwt=[],this.qwt=[],this.Eyt=!0;for(let t=1,s=e.length;t<s;++t){const h=To.Swt.jM(this.xv,e[t],0);this.Jwt.push(h),this.qwt.push(0),h.zdt()||(this.Eyt=!1)}this.Qs=this.$wt}H0t(){for(const t of this.Jwt)t.H0t()}$wt(){const i=this.Jwt,e=this.qwt;for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Qs(0);return e}}class Bo extends To.Swt{constructor(t,s,i,e){super(t,s,i),this.Xwt=e[1],this.Qs=this.Bet,this.Eyt=!0}Bet(){return this.Xwt}}class Wo extends To.Swt{constructor(t,s,i,e){super(t,s,i),this.Kwt=e[1],this.Qs=this.Ywt,this.Eyt=!0}Ywt(){return this.Kwt}}class jo extends _o{constructor(t,s,i,e){super(t,s,i,e),this.Qs=this.PN,this.Eyt=!1}PN(){return this._wt()}}class Ho extends To.Swt{constructor(t,s,i,e){super(t,s,i),this.vut=this.IO().But().mut(e[1]),this.Qs=this.Zwt,this.Eyt=!0}Zwt(){return this.vut.Wc()}}}{let e=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Qs(0)};e;const Vo=self.Os,Uo=[],zo=function(){};Vo.xmt=class extends Vo.Qh{constructor(t,i,s){if(super(),this.fyt=t,this.$c=t.IO(),this.Lg=s,this.Xgt=this.$c.$gt(i[1]),this.Qwt=0<i[3],this.tSt=2===i[3],this.sSt=!!i[4],this.iSt=!!i[5],this.c2=!!i[6],this.iU=i[7],this.eSt=this.fyt.fft(),this.Lct=null,this.lwt=null,this.cwt=-1,this.Uyt=null,this.m_=zo,this.N1t=zo,this.$s=[],this.hSt=[],this.rSt=!1,this.nSt=null,this.oSt=null,this.gmt=this.$c.vX()?{ymt:i[8][0],aSt:i[8][1]}:null,-1===i[0]?this.Uyt=this.$c.zyt():(this.Lct=this.$c.ez(i[0]),i[2]&&(this.lwt=this.Lct.lht(i[2]),this.cwt=this.Lct.Wst(i[2])),this.fyt.nB()&&this.fyt.nB().Jmt()),10===i.length){let s=i[9];for(let t of s)this.$s.push(Vo.Swt.jM(this,t,this.$s.length)),this.hSt.push(0)}0===this.$s.length&&(this.$s=Uo,this.hSt=Uo),this.fyt.VF().q0t(this)}static jM(t,s,i){return Vo.ir(Vo.xmt,t,s,i)}H0t(){for(const t of this.$s)t.H0t(),t.vwt()&&(this.rSt=!0);this.tSt?(this.m_=this.uSt,this.N1t=this.lSt):this.Uyt?(this.cSt(),this.N1t=this.fSt):this.Lct.uk().LL()?(this.dSt(),this.N1t=this.pSt):this.c2?(this.m_=this.mSt,this.N1t=this.gSt):(this.m_=this.ySt,this.N1t=this.wSt)}cSt(){const t=this.Uyt,s=this.Uyt;this.SSt(t,s,this.bSt)}dSt(){const t=this.Lct.uk(),s=this.Lct.rk().s6();this.SSt(t,s,this.vSt)}SSt(t,s,i){const e=this.Xgt,h=this.iSt,r=this.$s;if(0===r.length){const n=t.Xyt(e,s);h?this.m_=function(){return Vo.xor(n(),h)}:this.m_=n}else if(1===r.length){const o=r[0];if(!h&&o.zdt())this.m_=t.MSt(e,s,o.Qs(0));else{const a=t.Xyt(e,s);this.m_=function(){return Vo.xor(a(o.Qs(0)),h)}}}else if(2===r.length){const u=r[0],l=r[1];if(!h&&u.zdt()&&l.zdt())this.m_=t.GSt(e,s,u.Qs(0),l.Qs(0));else{const c=t.Xyt(e,s);this.m_=function(){return Vo.xor(c(u.Qs(0),l.Qs(0)),h)}}}else if(3===r.length){const f=r[0],d=r[1],p=r[2];if(!h&&f.zdt()&&d.zdt()&&p.zdt())this.m_=t.xSt(e,s,f.Qs(0),d.Qs(0),p.Qs(0));else{const m=t.Xyt(e,s);this.m_=function(){return Vo.xor(m(f.Qs(0),d.Qs(0),p.Qs(0)),h)}}}else this.m_=i}Oz(){return this.iU}Tpt(){return this.Xgt}mN(){return this.Lct}c6(){return this.lwt}TSt(){return this.lwt?this.lwt.a6():this.Lct?this.Lct.uk():null}Pwt(){const t=this.TSt();return t?t._St():1}qF(){return this.fyt}IO(){return this.$c}fF(){return this.Lg}lgt(){return this.fF()}wpt(){return this.Qwt}_pt(){return this.tSt}ISt(){return this.iSt}T6(){return this.sSt}V2(){return this.c2}CSt(){return this.gmt.ymt}ESt(){return!!this.Uyt}rgt(){return this.ESt()||this.Lct.uk().LL()}ngt(){for(const t of this.$s)if(t.Mwt())return t.mN();return null}RSt(t){this.gmt.ymt=!!t,this.fyt.Vmt()}PSt(){return this.gmt.aSt}jpt(){return!this.CSt()&&!this.$c.Sgt()&&!this.PSt()}ASt(){return this.nSt||(this.nSt=new Map),this.nSt}FSt(){return this.oSt||(this.oSt=new Map),this.oSt}bSt(){const t=this.hSt;return e(this.$s,t),Vo.xor(this.Xgt.apply(this.Uyt,t),this.iSt)}*fSt(){if((this.CSt()||this.$c.Sgt())&&(yield this),this.PSt()){const s=this.hSt;e(this.$s,s);let t=this.Xgt.apply(this.Uyt,s);return Vo.Fo(t)&&(t=yield*t),Vo.xor(t,this.iSt)}return this.m_()}vSt(){const t=this.hSt,s=(e(this.$s,t),this.Lct.rk().s6());return Vo.xor(this.Xgt.apply(s,t),this.iSt)}*pSt(){if((this.CSt()||this.$c.Sgt())&&(yield this),this.PSt()){let t=this.hSt,s=(e(this.$s,t),this.Lct.rk().s6()),i=this.Xgt.apply(s,t);return Vo.Fo(i)&&(i=yield*i),Vo.xor(i,this.iSt)}return this.m_()}uSt(){return!0}*lSt(){return(this.CSt()||this.$c.Sgt())&&(yield this),!0}DSt(){if(this.lwt){if(2<=this.lwt.a6()._St())throw new Error("not yet implemented");return this.lwt}return 2<=this.Lct.uk()._St()?this.Lct.ik():this.Lct}mSt(){const t=this.hSt,s=(e(this.$s,t),this.Xgt.apply(this.DSt(),t));return this.Lct.Bgt(),s}*gSt(){if((this.CSt()||this.$c.Sgt())&&(yield this),this.PSt()){const s=this.hSt;e(this.$s,s);let t=this.Xgt.apply(this.DSt(),s);return Vo.Fo(t)&&(t=yield*t),this.Lct.Bgt(),t}return this.m_()}ySt(){const i=this.$s,e=this.hSt,t=this.Lct.vk();for(let t=0,s=i.length;t<s;++t){const h=i[t];h.vwt()||(e[t]=h.Qs(0))}return t.$ct()?this.OSt(t):this.LSt(t)}*wSt(){return(this.CSt()||this.$c.Sgt())&&(yield this),this.ySt()}kSt(i){const e=this.$s,h=this.hSt;for(let t=0,s=e.length;t<s;++t){const r=e[t];r.vwt()&&(h[t]=r.Qs(i))}}OSt(i){const t=this.Lct,e=t.Iz(),h=t.awt(),r=this.cwt,n=0<=r,o=t.bk(),a=this.rSt,u=this.hSt,l=this.Xgt,c=this.iSt,f=this.eSt&&!this.Qwt;i.qct();for(let s=0,t=o.length;s<t;++s){const d=o[s];a&&this.kSt(s);let t;if(n){const p=e?d.mN().dwt(h):0;t=l.apply(d.uht()[r+p].s6(),u)}else t=l.apply(d.s6(),u);Vo.xor(t,c)?i.Qct(d):f&&i.tft(d)}return t.NSt(!0),i.ift(!1),t.Bgt(),i.Xct()}LSt(t){let s=this.Lct,i=s.Iz(),e=s.awt(),h=s.IN(),r=this.cwt,n=0<=r,o=this.rSt,a=this.hSt,u=this.Xgt,l=this.iSt,c=this.eSt&&!this.Qwt,f=t.eft(),d=t.hft(),p=c&&!this.fyt.hgt(this),m=p?d:f,g=0,y=!1;for(let s=0,t=m.length;s<t;++s){const S=m[s];o&&this.kSt(s);let t;if(n){const b=i?S.mN().dwt(e):0;t=u.apply(S.uht()[r+b].s6(),a)}else t=u.apply(S.s6(),a);Vo.xor(t,l)?(y=!0,p?(f.push(S),h&&S.BSt()):(m[g]=S,h&&S.WSt(g),++g)):p?(m[g]=S,h&&S.jSt(g),++g):c&&(d.push(S),h)&&S.HSt()}Vo.Rn(m,g),h&&s.VSt(p,g);const w=y;return p&&!y&&(y=this.USt(f)),s.NSt(w||c),c?y:t.Xct()}USt(i){const t=this.Lct,e=t.Iz(),h=t.awt(),r=this.rSt,n=this.cwt,o=0<=n,a=this.hSt,u=this.Xgt,l=this.iSt;for(let s=0,t=i.length;s<t;++s){const c=i[s];r&&this.kSt(s);let t;if(o){const f=e?c.mN().dwt(h):0;t=u.apply(c.uht()[n+f].s6(),a)}else t=u.apply(c.s6(),a);if(Vo.xor(t,l))return!0}return!1}zSt(t,s){return this.$s[t].Qs(s)}Ipt(){const t=this.$s;if(t.length)return t[0].Rwt();throw new Error("no parameters")}QJ(){if(!this.nSt||!this.nSt.size)return null;const s={};for(const[i,e]of this.nSt.entries()){let t=e;"collmemory"===i&&(t=[...e.entries()].map(t=>[t[0].EN(),t[1].EN(),t[2]])),s[i]=t}return{ex:s}}tq(t){if(this.nSt&&(this.nSt.clear(),this.nSt=null),t){const s=this.$c,i=t.ex;if(i){const e=this.ASt();e.clear();for(const[h,r]of Object.entries(i)){let t=r;"collmemory"===h&&(t=Vo.ir(Vo.jl,r.map(t=>[s.sO(t[0]),s.sO(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),e.set(h,t)}}}}}}{let h=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Qs(0)};h;const Jo=self.Os,qo=[],$o=function(){},Xo=function*(){};Jo._mt=class extends Jo.Qh{constructor(t,s,i){super();const e=(this.fyt=t).IO(),h=(this.$c=e,this.Lg=i,this.iU=4<=s.length?s[3]:-1,this.JSt=5<=s.length?255&s[4]:0,this.qSt=5<=s.length?s[4]>>8:0,this.Xgt=null,this.Lct=null,this.lwt=null,this.cwt=-1,this.Uyt=null,this.$St="",this.XSt=null,this.KSt=null,this.m_=$o,this.N1t=$o,this.$s=[],this.hSt=[],this.rSt=!1,this.nSt=null,this.oSt=null,-3===s[0]),r=h?s[2]:s[5];if(this.gmt=e.vX()||h?{ymt:r[0],aSt:r[1],index:r[2]}:null,-1===s[0])this.Uyt=e.zyt(),this.Xgt=e.$gt(s[1]);else if(-2===s[0])this.$St=s[1];else if(h){const n=e.$gt(s[1]);this.Xgt=n,this.m_=this.YSt,this.N1t=this.ZSt,this.qSt|=8}else this.Lct=e.ez(s[0]),4&this.qSt?(this.$St=s[1],this.XSt=e.ez(s[2])):(s[2]&&(this.lwt=this.Lct.lht(s[2]),this.cwt=this.Lct.Wst(s[2])),this.Xgt=e.$gt(s[1]));if(7===s.length){const o=s[6];for(const a of o)this.$s.push(Jo.Swt.jM(this,a,this.$s.length)),this.hSt.push(0)}0===this.$s.length&&(this.$s=qo,this.hSt=qo),this.QSt()&&(this.fyt.Fmt(),this.fyt.Jmt()),this.fyt.VF().$0t(this)}static jM(t,s,i){return Jo.ir(Jo._mt,t,s,i)}H0t(){for(const t of this.$s)t.H0t(),t.vwt()&&(this.rSt=!0);if(this.Uyt)this.cSt(),this.N1t=this.fSt;else if(this.$St)4&this.qSt?this.tbt():this.sbt(),this.$St="",this.XSt=null;else if(this.m_===this.YSt){const s=this.Xgt,i=this.$c.VF().c1t(this.fyt);this.Xgt=s.bind(null,this.$c.DL(),i)}else this.lwt?this.Ggt()?(this.m_=this.ibt,this.N1t=this.ebt):(this.m_=this.hbt,this.N1t=this.rbt):this.Lct.uk().LL()?(this.dSt(),this.N1t=this.pSt):this.V2()?(this.m_=this.nbt,this.N1t=this.obt):this.Ggt()?(this.m_=this.abt,this.N1t=this.ubt):this.lbt()?(this.m_=this.cbt,this.N1t=this.fbt):this.$s.length?this.$s.every(t=>t.vwt())?(this.m_=this.dbt,this.N1t=this.pbt):this.rSt?(this.m_=this.mbt,this.N1t=this.gbt):this.$s.every(t=>t.zdt())?(h(this.$s,this.hSt),this.m_=this.ybt,this.N1t=this.wbt):(this.m_=this.Sbt,this.N1t=this.bbt):(this.m_=this.ybt,this.N1t=this.wbt)}cSt(){const t=this.Uyt,s=this.Uyt;this.SSt(t,s,this.bSt)}dSt(){const t=this.Lct.uk(),s=this.Lct.rk().s6();this.SSt(t,s,this.vSt)}sbt(){const t=this.fyt.VF(),i=t.UF(this.$St);if(i.Wl()){const e=0!=(2&this.qSt);this.KSt=i.qF();let s=[...new Set([...this.fyt.$F(),...this.KSt.$F()])];s=t.Q0t(s);const h=!i.ZF()&&this.vbt()?{Hgt:!0}:null;if(this.m_=Jo.gpt.prototype.Lgt.bind(this.KSt,s,this.$s,e,h),this.$c.vX()){const r=this;this.N1t=function*(){(r.CSt()||r.$c.Sgt())&&(yield r);const t=yield*r.KSt.zgt(s,r.$s,e,h);return t}}else this.N1t=Xo}else this.m_=$o,this.N1t=Xo}tbt(){const r=this.fyt.VF(),n=r.w1t(this.XSt,this.$St);if(n.Wl()){const o=0!=(2&this.qSt);this.KSt=n.qF();let s=[...new Set([...this.fyt.$F(),...this.KSt.$F(),this.Lct,n.mN()])],t=(s=r.Q0t(s),!this.Lct.Iz()&&!n.mN().Iz()),i=!this.Lct.Iz()&&n.mN().Iz(),e=this.Lct.Iz(),h=null;if(!n.ZF()&&this.vbt()&&((h=h||{}).Hgt=!0),!i&&o||((h=h||{}).kgt=this.Lct,h.Ngt=n.mN()),t||i||e&&!n.vyt()?this.m_=Jo.gpt.prototype.Lgt.bind(this.KSt,s,this.$s,o,h):e&&(this.m_=Jo.Ydt.prototype.Tyt.bind(n,s,this.$s)),this.$c.vX()){const a=this;t||i||e&&!n.vyt()?this.N1t=function*(){(a.CSt()||a.$c.Sgt())&&(yield a);const t=yield*a.KSt.zgt(s,a.$s,o,h);return t}:e&&(this.N1t=function*(){(a.CSt()||a.$c.Sgt())&&(yield a);const t=yield*n.Iyt(s,a.$s);return t})}else this.N1t=Xo}else this.m_=$o,this.N1t=Xo}SSt(t,s,i){const e=this.Xgt,h=this.$s;if(0===h.length)this.m_=t.Xyt(e,s);else if(1===h.length){const r=h[0];if(r.zdt())this.m_=t.MSt(e,s,r.Qs(0));else{const n=t.Xyt(e,s);this.m_=function(){return n(r.Qs(0))}}}else if(2===h.length){const o=h[0],a=h[1];if(o.zdt()&&a.zdt())this.m_=t.GSt(e,s,o.Qs(0),a.Qs(0));else{const u=t.Xyt(e,s);this.m_=function(){return u(o.Qs(0),a.Qs(0))}}}else if(3===h.length){const l=h[0],c=h[1],f=h[2];if(l.zdt()&&c.zdt()&&f.zdt())this.m_=t.xSt(e,s,l.Qs(0),c.Qs(0),f.Qs(0));else{const d=t.Xyt(e,s);this.m_=function(){return d(l.Qs(0),c.Qs(0),f.Qs(0))}}}else this.m_=i}Oz(){return this.iU}Ggt(){return 0!=(8&this.qSt)}Mgt(){return 0!=(16&this.qSt)}lbt(){return 1===this.JSt}V2(){return 2===this.JSt}QSt(){return 0!=(1&this.qSt)}Lmt(){return this.Ggt()||this.Mgt()}mN(){return this.Lct}TSt(){return this.lwt?this.lwt.a6():this.Lct?this.Lct.uk():null}Pwt(){const t=this.TSt();return t?t._St():1}qF(){return this.fyt}vbt(){let t=this.fyt;do{if(t instanceof Jo.Ydt&&t.ZF())return!0}while(t=t.u1t());return!1}IO(){return this.$c}fF(){return this.Lg}lgt(){return this.gmt.index}CSt(){return this.gmt.ymt}RSt(t){this.gmt.ymt=!!t,this.fyt.Vmt()}PSt(){return this.gmt.aSt}jpt(){return!this.CSt()&&!this.$c.Sgt()&&!this.PSt()}ASt(){return this.nSt||(this.nSt=new Map),this.nSt}FSt(){return this.oSt||(this.oSt=new Map),this.oSt}bSt(){const t=this.hSt;return h(this.$s,t),this.Xgt.apply(this.Uyt,t)}*fSt(){if((this.CSt()||this.$c.Sgt())&&(yield this),this.PSt()){const t=this.hSt,s=(h(this.$s,t),yield*this.Xgt.apply(this.Uyt,t));return s}return this.m_()}vSt(){const t=this.hSt;return h(this.$s,t),this.Xgt.apply(this.Lct.rk().s6(),t)}*pSt(){if((this.CSt()||this.$c.Sgt())&&(yield this),this.PSt()){const t=this.hSt,s=(h(this.$s,t),yield*this.Xgt.apply(this.Lct.rk().s6(),t));return s}return this.m_()}ybt(){const i=this.hSt,e=this.Lct.vk().bk();for(let t=0,s=e.length;t<s;++t)this.Xgt.apply(e[t].s6(),i)}*wbt(){if((this.CSt()||this.$c.Sgt())&&(yield this),this.PSt()){const i=this.hSt,e=this.Lct.vk().bk();for(let t=0,s=e.length;t<s;++t)yield*this.Xgt.apply(e[t].s6(),i)}else this.ybt()}Sbt(){const i=this.hSt,e=(h(this.$s,i),this.Lct.vk().bk());for(let t=0,s=e.length;t<s;++t)this.Xgt.apply(e[t].s6(),i)}*bbt(){if((this.CSt()||this.$c.Sgt())&&(yield this),this.PSt()){const i=this.hSt,e=(h(this.$s,i),this.Lct.vk().bk());for(let t=0,s=e.length;t<s;++t)yield*this.Xgt.apply(e[t].s6(),i)}else this.Sbt()}dbt(){const e=this.$s,h=this.hSt,s=this.Xgt,r=this.Lct.vk().bk();for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Qs(i);s.apply(n.s6(),h)}}*pbt(){if((this.CSt()||this.$c.Sgt())&&(yield this),this.PSt()){const e=this.$s,h=this.hSt,s=this.Xgt,r=this.Lct.vk().bk();for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Qs(i);yield*s.apply(n.s6(),h)}}else this.dbt()}mbt(){const e=this.$s,h=this.hSt,s=this.Xgt,r=this.Lct.vk().bk();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.vwt()||(h[t]=i.Qs(0))}for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.vwt()&&(h[t]=o.Qs(i))}s.apply(n.s6(),h)}}*gbt(){if((this.CSt()||this.$c.Sgt())&&(yield this),this.PSt()){const e=this.$s,h=this.hSt,s=this.Xgt,r=this.Lct.vk().bk();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.vwt()||(h[t]=i.Qs(0))}for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.vwt()&&(h[t]=o.Qs(i))}yield*s.apply(n.s6(),h)}}else this.mbt()}cbt(){const e=this.$s,h=this.hSt,s=this.Xgt,t=this.Lct,i=t.Mbt(),r=t.vk().bk();i.Gbt(s);for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Qs(i);s.apply(n.s6(),h)}i.xbt(s)}*fbt(){if((this.CSt()||this.$c.Sgt())&&(yield this),this.PSt()){const e=this.$s,h=this.hSt,s=this.Xgt,t=this.Lct,i=t.Mbt(),r=t.vk().bk();i.Gbt(s);for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Qs(i);yield*s.apply(n.s6(),h)}i.xbt(s)}else this.cbt()}nbt(){const t=this.hSt;return h(this.$s,t),this.Xgt.apply(this.lwt||this.Lct,t)}*obt(){if((this.CSt()||this.$c.Sgt())&&(yield this),this.PSt()){const s=this.hSt;h(this.$s,s);let t=this.Xgt.apply(this.lwt||this.Lct,s);return Jo.Fo(t)?yield*t:t}return this.nbt()}hbt(){const t=this.Lct,s=t.Iz(),e=t.awt(),h=this.$s,r=this.rSt,n=this.hSt,o=this.Xgt,a=this.cwt,u=t.vk().bk();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.vwt()||(n[t]=i.Qs(0))}for(let i=0,t=u.length;i<t;++i){const l=u[i];if(r)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.vwt()&&(n[t]=f.Qs(i))}const c=s?l.mN().dwt(e):0;o.apply(l.uht()[a+c].s6(),n)}}*rbt(){if((this.CSt()||this.$c.Sgt())&&(yield this),this.PSt()){const t=this.Lct,s=t.Iz(),e=t.awt(),h=this.$s,r=this.rSt,n=this.hSt,o=this.Xgt,a=this.cwt,u=t.vk().bk();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.vwt()||(n[t]=i.Qs(0))}for(let i=0,t=u.length;i<t;++i){const l=u[i];if(r)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.vwt()&&(n[t]=f.Qs(i))}const c=s?l.mN().dwt(e):0;yield*o.apply(l.uht()[a+c].s6(),n)}}else this.hbt()}abt(){const e=this.$s,h=this.hSt,s=this.Xgt,r=this.Lct.vk().bk(),n=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Qs(i);n.push(s.apply(o.s6(),h))}return Promise.all(n)}*ubt(){if((this.CSt()||this.$c.Sgt())&&(yield this),this.PSt()){const e=this.$s,h=this.hSt,s=this.Xgt,r=this.Lct.vk().bk(),n=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Qs(i);n.push(yield*s.apply(o.s6(),h))}return Promise.all(n)}return this.abt()}ibt(){const t=this.Lct,s=t.Iz(),e=t.awt(),h=this.$s,r=this.hSt,n=this.Xgt,o=this.cwt,a=t.vk().bk(),u=[];for(let i=0,t=a.length;i<t;++i){const l=a[i];for(let t=0,s=h.length;t<s;++t)r[t]=h[t].Qs(i);const c=s?l.mN().dwt(e):0;u.push(n.apply(l.uht()[o+c].s6(),r))}return Promise.all(u)}*ebt(){if((this.CSt()||this.$c.Sgt())&&(yield this),this.PSt()){const t=this.Lct,s=t.Iz(),e=t.awt(),h=this.$s,r=this.hSt,n=this.Xgt,o=this.cwt,a=t.vk().bk(),u=[];for(let i=0,t=a.length;i<t;++i){const l=a[i];for(let t=0,s=h.length;t<s;++t)r[t]=h[t].Qs(i);const c=s?l.mN().dwt(e):0;u.push(yield*n.apply(l.uht()[o+c].s6(),r))}return Promise.all(u)}return this.ibt()}async YSt(){try{await this.Xgt()}catch(t){console.error(`Unhandled exception running script %c${this.fyt.Xq().Wc()}, event ${this.fyt.Xmt()}, action ${this.lgt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),Jo.xpt.Ygt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Jo.xpt.Zgt())}}*ZSt(){return(this.CSt()||this.$c.Sgt())&&(yield this),this.YSt()}QJ(){return this.nSt&&this.nSt.size?{ex:Jo.Ro(this.nSt)}:null}tq(t){if(this.nSt&&(this.nSt.clear(),this.nSt=null),t){const s=t.ex;s&&(this.nSt=Jo.Po(s))}}}}{let d=function(t){return t instanceof n?w.t5(t):t.RW()},l=function(t){return d(t).nO()},h=function(t){return w.t5(t)},C=function(t,s,i,e){const h=s.EN(),r=i.EN();h<r?t.Set(s,i,e):t.Set(i,s,e)},E=function(t,s,i){const e=s.EN(),h=i.EN();e<h?t.zl(s,i):t.zl(i,s)},R=function(t,s){t.Jl(s)},P=function(t,s,i){const e=s.EN(),h=i.EN();return e<h?t.Qs(s,i):t.Qs(i,s)},e=function(t,s,i,e){if(!s)return!1;const h=0!==i||0!==e,r=t.nO(),n=w.SF(),o=w.e1t(),a=o.qF().fft(),u=o.mN(),l=o.ISt(),c=s.vk(),f=u!==s;_=s,T=f&&!l;let d,p=0,m=0,g=I=!1;c.$ct()?(S._(r.B4()),S.offset(i,e),n.Tbt(r.oO(),s,S,b),d=b):!a||w._bt()&&!c.hft().length&&c.eft().length?d=c.eft():(d=c.hft(),I=!0),h&&(p=r.tv(),m=r.rv(),r.D4(i,e),r.R4());for(const y of d)if(n.XO(t,y)){if(g=!0,l)break;f&&D.add(y)}return h&&(r.P4(p,m),r.R4()),A.Pn(b),g},i=function(t){const s=w.XF().fft(),i=_.vk(),e=i.eft(),h=i.hft();i.$ct()?(i.oft(D),s&&(A.Pn(h),i.aft(D,_.bk()))):s?I?i.uft(D):(i.aft(D,e),i.oft(D)):i.oft(D),_.Bgt()},v=function(t,s){T&&(s&&i(),D.clear(),_=null,T=!1)},s=function(t,s){const i=w.sO(s);if(i){const e=t.vk();if(e.$ct()||e.eft().includes(i))if(t.Iz()){if(i.mN().Ibt(t))return e.cft(i),t.Bgt(),!0}else if(i.mN()===t)return e.cft(i),t.Bgt(),!0}return!1},r=function(t,h){const r=t.vk();if(r.$ct()){r.ift(!1),r.qct();const i=t.bk();for(let t=0,s=i.length;t<s;++t){const e=i[t];e.EN()===h?r.tft(e):r.Qct(e)}return t.Bgt(),!!r.eft().length}{let i=r.eft(),e=0;for(let t=0,s=i.length;t<s;++t){const n=i[t];(i[e]=n).EN()===h?r.tft(n):++e}return A.Rn(i,e),t.Bgt(),!!i.length}},A=(d,l,h,C,E,R,P,e,i,v,s,r,self.Os),u=new A.Oo,M={},G={},x={},w=null,n=(A.Cbt=function(t){w=t},self.dN),S=(G.Ebt=function(t,s){return A.compare(this.nO().tv(),t,s)},x.Ebt=function(t,s){return A.compare(this.x,t,s)},G.Rbt=function(t,s){return A.compare(this.nO().rv(),t,s)},x.Rbt=function(t,s){return A.compare(this.y,t,s)},G.Pbt=function(){return this.nO().V4()},x.Pbt=function(){return this.H4()},M.Abt=function(){const t=l(this),s=t.HD(),i=t.B4();return i.pu()<0||i.mu()<0||i.fu()>s.Xp()||i.du()>s.om()},M.Fbt=function(i,e,h){const t=this.vk(),r=t.bk();if(!r.length)return!1;let n=r[0],o=n.nO(),a=n,u=A.gr(o.tv(),o.rv(),e,h);for(let t=1,s=r.length;t<s;++t){n=r[t],o=n.nO();const l=A.gr(o.tv(),o.rv(),e,h);(0===i&&l<u||1===i&&l>u)&&(u=l,a=n)}return t.cft(a),!0},G.sv=function(t){const s=this.nO();s.tv()!==t&&(s.sv(t),s.R4())},x.sv=function(t){this.x=+t},G.nv=function(t){const s=this.nO();s.rv()!==t&&(s.nv(t),s.R4())},x.nv=function(t){this.y=+t},G.Dbt=function(t,s){const i=this.nO();i.Obt(t,s)||(i.P4(t,s),i.R4())},x.Dbt=function(t,s){this.setPosition(t,s)},M.Lbt=function(t,s){if(t){const i=d(this),e=t.wk(i);if(e){const[h,r]=e.kbt(s),n=i.nO();n.tv()===h&&n.rv()===r||(n.P4(h,r),n.R4())}}},M.Nbt=function(t){if(0!==t){const s=l(this);s.D4(s.Bbt()*t,s.Wbt()*t),s.R4()}},G.jbt=function(t,s){if(0!==s){const i=this.nO();t=A.dr(t),i.D4(Math.cos(t)*s,Math.sin(t)*s),i.R4()}},x.jbt=function(t,s){0!==s&&(t=A.dr(t),this.F4(Math.cos(t)*s,Math.sin(t)*s))},G.tv=function(){return this.nO().tv()},x.tv=function(){return this.x},G.rv=function(){return this.nO().rv()},x.rv=function(){return this.y},M.cD=function(){return w.cD(d(this))},G.Hbt=function(t,s){return A.compare(this.nO().Xp(),t,s)},x.Hbt=function(t,s){return A.compare(this.width,t,s)},G.Vbt=function(t,s){return A.compare(this.nO().om(),t,s)},x.Vbt=function(t,s){return A.compare(this.height,t,s)},G.hm=function(t){const s=this.nO();s.Xp()!==t&&(s.hm(t),s.R4())},x.hm=function(t){this.width=t},G.Kp=function(t){const s=this.nO();s.om()!==t&&(s.Kp(t),s.R4())},x.Kp=function(t){this.height=t},G.WI=function(t,s){const i=l(this);i.Xp()===t&&i.om()===s||(i.WI(t,s),i.R4())},x.WI=function(t,s){this.kk(t,s)},G.Xp=function(){return this.nO().Xp()},x.Xp=function(){return this.width},G.om=function(){return this.nO().om()},x.om=function(){return this.height},M.Ubt=function(){return l(this).B4().fu()},M.zbt=function(){return l(this).B4().du()},M.Jbt=function(){return l(this).B4().pu()},M.qbt=function(){return l(this).B4().mu()},M.$bt=function(){const t=l(this).B4();return(t.fu()+t.pu())/2},M.Xbt=function(){const t=l(this).B4();return(t.du()+t.mu())/2},M.Kbt=function(t,s){return A.wr(l(this).jk(),A.dr(s))<=A.dr(t)},M.Ybt=function(t){return A.br(l(this).jk(),A.dr(t))},M.Zbt=function(t,s){const i=A.dr(t),e=A.dr(s),h=l(this).jk(),r=!A.br(e,i);return r?!(!A.br(h,i)&&A.br(h,e)):A.br(h,i)&&!A.br(h,e)},G.Wk=function(t){const s=this.nO(),i=A.cr(A.dr(t));isNaN(i)||s.jk()===i||(s.Wk(i),s.R4())},x.Wk=function(t){this.N4=t},M.Qbt=function(t){if(!isNaN(t)&&0!==t){const s=l(this);s.Wk(s.jk()+A.dr(t)),s.R4()}},M.tvt=function(t){if(!isNaN(t)&&0!==t){const s=l(this);s.Wk(s.jk()-A.dr(t)),s.R4()}},M.svt=function(t,s){const i=l(this),e=i.jk(),h=A.Sr(e,A.dr(s),A.dr(t));isNaN(h)||e===h||(i.Wk(h),i.R4())},M.ivt=function(t,s,i){const e=l(this),h=e.jk(),r=s-e.tv(),n=i-e.rv(),o=Math.atan2(n,r),a=A.Sr(h,o,A.dr(t));isNaN(a)||h===a||(e.Wk(a),e.R4())},M.evt=function(t,s){const i=l(this),e=i.jk(),h=t-i.tv(),r=s-i.rv(),n=Math.atan2(r,h);isNaN(n)||e===n||(i.Wk(n),i.R4())},G.jk=function(){return A.pr(this.nO().jk())},x.jk=function(){return this.N4},M.hvt=function(t,s){return A.compare(A.Or(100*l(this).mR(),6),t,s)},G.T5=function(){return this.nO().T5()},x.T5=function(){return this.isVisible},M.G5=function(t){const s=l(this);t=2===t?!s.T5():0!==t,s.T5()!==t&&(s.G5(t),w.dO())},M.yR=function(t){const s=A.lr(t/100,0,1),i=l(this);if(i.OB()){if(i.Prt().rvt()===s)return}else if(i.mR()===s)return;i.yR(s),w.dO()},M.nvt=function(t){u.fa(t);const s=l(this);s.z4().ea(u)||(s.J4(u),w.dO())},M.SR=function(){const t=l(this).z4();return A.Nr(t.Xo(),t.Ko(),t.Yo(),t.Zo())},M.mR=function(){return A.Or(100*l(this).mR(),6)},M.ovt=function(t){return!!t&&l(this).oO()===t},M.avt=function(i){const t=this.vk(),e=t.bk();if(!e.length)return!1;let s=e[0],h=s;for(let t=1,s=e.length;t<s;++t){const r=e[t],n=r.nO(),o=h.nO(),a=n.oO().fF(),u=o.oO().fF();0===i?(u<a||a===u&&n.aO()>o.aO())&&(h=r):(a<u||a===u&&n.aO()<o.aO())&&(h=r)}return t.cft(h),!0},G.uvt=function(t,s,i){const e=this.nO(),h=0===t?e.ov():e.L4();return A.compare(h,s,i)},x.uvt=function(t,s,i){const e=0===t?this.H5:this.O4;return A.compare(e,s,i)},G.lvt=function(){this.nO().X4()},x.lvt=function(){this.q4()},G.cvt=function(){this.nO().Y4()},x.cvt=function(){this.K4()},M.fvt=function(t){t&&l(this).Q4(t)},M.dvt=function(t,s){const i=0===t;if(s){const e=d(this),h=s.pvt(e);h&&e.nO().sB(h,i)}},G.av=function(t){const s=this.nO();s.ov()!==t&&(s.av(t),w.dO())},x.av=function(t){this.H5=t},M.mvt=function(){return l(this).oO().fF()},M.gvt=function(){return l(this).oO().Wc()},G.yvt=function(){return this.nO().aO()},x.yvt=function(){return this.zIndex},G.wvt=function(){return this.nO().ov()},x.wvt=function(){return this.H5},G.Svt=function(){return this.nO().L4()},x.Svt=function(){return this.O4},M.bvt=function(t){const s=d(this),i=s.mN().Fk().fht(t);if(i){const e=i.fF(),h=s.nO().C4();return h.y6(e)}},M.vvt=function(t,s){const i=d(this),e=i.mN().Fk().fht(s);if(e){const h=e.fF(),r=1===t,n=i.nO().C4();n.y6(h)!==r&&(n.w6(h,r),n.S6(),w.dO())}},M.Mvt=function(t,s,i){const e=d(this),h=e.mN().Fk().fht(t);if(h){s=Math.floor(s);const r=h.jG().VG(s);if(r){"color"===r?(u.fa(i),i=u):"percent"===r&&(i/=100);const n=h.fF(),o=e.nO().C4(),a=o.v6(n,s,i);a&&o.y6(n)&&w.dO()}}},A.ir(A.Rect)),F=[],b=[],T=!1,_=null,I=!1,D=new Set;M.Gvt=function(w){if(this.$c.xvt())return function*(w){if(w){let t=this.$c,s=t.SF(),e=t.VF(),i=e.iD(),h=e.e1t(),r=h.mN(),n=h.ASt(),o=h.FSt(),a=i.M8(),u=t.ltt(),l=u-1,c=a.XF(),f=i.G8(c),d=n.get("collmemory"),p=(d||(d=A.ir(A.jl),n.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Rf().addEventListener("instancedestroy",t=>R(d,t.f6))),r.vk()),m=w.vk(),g=p.bk(),y=null;for(let t=0;t<g.length;++t){const S=g[t];m.$ct()?(s.Tbt(S.nO().oO(),w,S.nO().B4(),F),y=F,s.Tvt(S,w,y)):y=m.bk();for(let t=0;t<y.length;++t){const b=y[t];if(s.XO(S,b)||s._vt(S,b)){let t=P(d,S,b),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const v=!s||i<l;if(C(d,S,b,u),v){const M=c.v8(),G=(e.C8(M),r.vk()),x=w.vk();if(G.ift(!1),x.ift(!1),r===w){const T=G.eft();A.Pn(T),T.push(S),T.push(b),r.Bgt()}else{const _=G.eft(),I=x.eft();A.Pn(_),A.Pn(I),_.push(S),I.push(b),r.Bgt(),w.Bgt()}yield*c.Rgt(a,f),e.P8(M)}}else E(d,S,b)}A.Pn(F)}i.O8()}return!1}.call(this,w);if(w){let t=this.$c,s=t.SF(),e=t.VF(),i=e.iD(),h=e.e1t(),r=h.mN(),n=h.ASt(),o=h.FSt(),a=i.M8(),u=t.ltt(),l=u-1,c=a.XF(),f=i.G8(c),d=n.get("collmemory"),p=(d||(d=A.ir(A.jl),n.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Rf().addEventListener("instancedestroy",t=>R(d,t.f6))),r.vk()),m=w.vk(),g=p.bk(),y=null;for(let t=0;t<g.length;++t){const S=g[t];m.$ct()?(s.Tbt(S.nO().oO(),w,S.nO().B4(),F),y=F,s.Tvt(S,w,y)):y=m.bk();for(let t=0;t<y.length;++t){const b=y[t];if(s.XO(S,b)||s._vt(S,b)){let t=P(d,S,b),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const v=!s||i<l;if(C(d,S,b,u),v){const M=c.v8(),G=(e.C8(M),r.vk()),x=w.vk();if(G.ift(!1),x.ift(!1),r===w){const T=G.eft();A.Pn(T),T.push(S),T.push(b),r.Bgt()}else{const _=G.eft(),I=x.eft();A.Pn(_),A.Pn(I),_.push(S),I.push(b),r.Bgt(),w.Bgt()}c.E8(a,f),e.P8(M)}}else E(d,S,b)}A.Pn(F)}i.O8()}return!1},M.Ivt=function(t){return e(d(this),t,0,0)},M.Cvt=function(t,s,i){return e(d(this),t,s,i)},M.SB=function(){return l(this).SB()},M.eq=function(){return l(this).eq()},M.Evt=function(i,e){const t=this.vk(),h=t.bk();if(0===h.length)return!1;let s=i.vk(),r=s.bk();if(s.$ct()){const a=[...this.$c.Rvt(i)];0<a.length&&(r=r.concat(a))}if(0===r.length)return!1;const n=s.$ct()?null:new Set(r),o=new Set;for(let t=0,s=h.length;t<s;++t){const u=h[t];if(1===e)for(const l of u.uB())l.Pvt(i)&&(null===n||n.has(l))&&o.add(l);else{let t;if(0===e){if(null===(t=u.nB()))continue}else t=u.aB();t.Pvt(i)&&(null===n||n.has(t))&&o.add(t)}}return 0!==o.size&&(s.oft(o),i.Bgt(),!0)},M.Avt=function(i,e){const t=this.vk(),h=t.bk();if(0===h.length)return!1;let s=i.vk(),r=s.bk();if(s.$ct()){const a=[...this.$c.Rvt(i)];0<a.length&&(r=r.concat(a))}if(0===r.length)return!1;const n=s.$ct()?null:new Set(r),o=new Set;for(let t=0,s=h.length;t<s;++t){const u=h[t];2!==e||u.eq()||!u.Pvt(i)||null!==n&&!n.has(u)||o.add(u);for(const l of 0===e?u.children():u.pB())2===e&&l.eq()||l.Pvt(i)&&(null===n||n.has(l))&&o.add(l)}return 0!==o.size&&(s.oft(o),i.Bgt(),!0)},M.Fvt=function(i,e,h){const t=this.vk(),r=t.bk();if(0===r.length)return!1;let s=i.vk(),n=s.bk();if(s.$ct()){const u=[...this.$c.Rvt(i)];0<u.length&&(n=n.concat(u))}if(0===n.length)return!1;const o=s.$ct()?null:new Set(n),a=[];for(let t=0,s=r.length;t<s;++t){const l=r[t];if(0===e){const c=l.dB(h);null!==c&&c.Pvt(i)&&(null===o||o.has(c))&&a.push(c)}else if(1===e)for(const f of l.children())if(f.Pvt(i)){if(0===h){null!==o&&!o.has(f)||a.push(f);break}--h}}return 0!==a.length&&(s.nft(a),i.Bgt(),!0)},M.Dvt=function(t,s,i){const e=d(this);switch(t){case 0:default:return A.compare(e.cB(),s,i);case 1:return A.compare(e.Ovt(),s,i)}},M.gB=function(t,s,i,e,h,r,n,o,a,u){const l=d(this),c=w.r1t().mN();for(const f of t.Lvt(l,c)){if(!f.uk().$L())return;l.gB(f,{vB:s,GB:i,TB:e,IB:h,EB:r,DB:n,PB:o,LB:a,NB:u})}},M.yB=function(t){const s=d(this),i=w.r1t().mN();for(const e of t.Lvt(s,i))s.yB(e)},M.kvt=function(){const t=d(this);if(t.SB()){const s=t.nB();s.yB(t)}},M.Nvt=function(){return d(this).cB()},M.Bvt=function(){return d(this).Ovt()},M.Wvt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=l(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.VB(),i.R4()):i.jB(t,s)},M.zB=function(t,s,i,e,h,r,n,o){const a=l(this),u=a.zB(t,s,{mode:0===i?"absolute":"relative",x:e,y:h,H5:r,u:n,v:o});u&&a.R4()},M.jvt=function(){const t=l(this);return t.qB()?t.$B().Av():0},M.Hvt=function(){const t=l(this);return t.qB()?t.$B().Fv():0},M.Vvt=function(t){const s=l(this);t=2===t?!s.T5():0!==t,s.T5()!==t&&s.G5(t)},M.r6=function(t,s){this instanceof self.dN?this.Bj(t,s):this.r6(t,s)},M.Uvt=function(t,s){this instanceof self.dN?this.Wj(t,""+s):this.Uvt(t,""+s)},M.zvt=function(t){this instanceof self.dN?this.jj(t):this.zvt(t)},M.Jvt=function(){this instanceof self.dN?this.Lj():this.i6()},M.qvt=function(){this instanceof self.dN?this.kj():this.e6()},M.$vt=function(){return this instanceof self.dN?this.Nj():this.$vt()},M.Xvt=function(t){this instanceof self.dN?this._setEnabled(0!==t):this.Kvt(0!==t)},M.Yvt=function(){return this instanceof self.dN?this.eyt():this.Zvt()},G.Qvt=function(t,s,i){return A.compare(this.RW().brt(t),s,i)},x.Qvt=function(t,s,i){return A.compare(h(this).brt(t),s,i)},G.t2t=function(t){return!!this.RW().brt(t)},x.t2t=function(t){return!!h(this).brt(t)},M.s2t=function(i,e){const t=this.vk(),h=t.bk();if(!h.length)return!1;let r=this.Iz(),n=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t],u=r?a.mN().owt(this.awt()):0,l=a.brt(u+e);(null===n||0===i&&l<o||1===i&&l>o)&&(o=l,n=a)}return t.cft(n),!0},M.i2t=function(t){return(this.$c.e1t().ISt()?r:s)(this,t)},M.lW=function(t){const s=new Set(A.Jn(t)),i=d(this).LN();return s.oe(i)},M.e2t=function(){return d(this).h2t()},M.r2t=function(){return d(this).LN().size},M.n2t=function(t){return d(this).o2t(t)},M.a2t=function(t,s){const i=A.Jn(s);if(0!==i.length){const e=d(this),h=new Set(e.LN());if(0===t)for(const r of i)h.add(r);else if(1===t)for(const n of i)h.delete(n);e.NN(h)}},M.u2t=function(){w.MN(d(this))},M.l2t=function(){return!0},M.c2t=function(){return!0},G.f2t=function(t,s){this.RW().vrt(t,s)},x.f2t=function(t,s){h(this).vrt(t,s)},G.d2t=function(t,s){const i=this.RW(),e=i.brt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.vrt(t,e+s)},x.d2t=function(t,s){const i=h(this),e=i.brt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.vrt(t,e+s)},G.p2t=function(t,s){const i=this.RW(),e=i.brt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.vrt(t,e-s))},x.p2t=function(t,s){const i=h(this),e=i.brt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.vrt(t,e-s))},G.m2t=function(t,s){this.RW().vrt(t,s?1:0)},x.m2t=function(t,s){h(this).vrt(t,s?1:0)},G.g2t=function(t){const s=this.RW();s.vrt(t,0===s.brt(t)?1:0)},x.g2t=function(t){const s=h(this);s.vrt(t,0===s.brt(t)?1:0)},M.y2t=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=d(this);w.w2t(),i.gK("state"),i.yv(s,"state"),w.S2t("state",{b2t:!0})},M.v2t=function(){return JSON.stringify(d(this).gv("state"))},M.M2t=function(){return d(this).mN().Wc()},M.G2t=function(){let t=w.i1t().Hft(),s=t.Gk();for(const i of w.Rvt(t))++s;return s},M.x2t=function(){return w.i1t().Hft().vk().bk().length},G.J$=function(){return this.RW().J$()},x.J$=function(){return h(this).J$()},G.EN=function(){return this.RW().EN()},x.EN=function(){return h(this).EN()},M.Cdt=function(t){const s=d(this);return t.toLowerCase()===w.VF().Adt(s)},M.WN=function(t){const s=d(this);w.VF().WN(s,t)},M.T2t=function(t){return w.VF().hdt()._2t(this.vk().bk(),t),!0},M.I2t=function(){return d(this).PN()},A.C2t=function(t,s,i){const e=t[1],h=t[3],r=t[4],n=t[5],o=t[6],a=t[7],u=t[8],l=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.j$,w=s.Aht,S=s.Fht,b=Object.assign({},M,2<=i?x:G);h&&(y.Ebt=b.Ebt,y.Rbt=b.Rbt,y.Pbt=b.Pbt,y.Abt=b.Abt,y.Fbt=b.Fbt,w.sv=b.sv,w.nv=b.nv,w.Dbt=b.Dbt,w.Lbt=b.Lbt,w.Nbt=b.Nbt,w.jbt=b.jbt,S.E2t=b.tv,S.R2t=b.rv,S.lD=b.cD),r&&(y.Hbt=b.Hbt,y.Vbt=b.Vbt,w.hm=b.hm,w.Kp=b.Kp,w.WI=b.WI,S.P2t=b.Xp,S.A2t=b.om,S.F2t=b.Ubt,S.D2t=b.zbt,S.O2t=b.Jbt,S.L2t=b.qbt,S.k2t=b.$bt,S.N2t=b.Xbt),n&&(y.B2t=b.Kbt,y.W2t=b.Ybt,y.Zbt=b.Zbt,w.Wk=b.Wk,w.Qbt=b.Qbt,w.tvt=b.tvt,w.svt=b.svt,w.ivt=b.ivt,w.evt=b.evt,S.j2t=b.jk),o&&(y.T5=b.T5,y.hvt=b.hvt,w.G5=b.G5,w.yR=b.yR,w.nvt=b.nvt,S.Opacity=b.mR,S.H2t=b.SR),a&&(y.ovt=b.ovt,y.avt=b.avt,y.uvt=b.uvt,w.lvt=b.lvt,w.cvt=b.cvt,w.fvt=b.fvt,w.dvt=b.dvt,w.av=b.av,S.mvt=b.mvt,S.gvt=b.gvt,S.yvt=b.yvt,S.wvt=b.wvt,S.Svt=b.Svt),u&&(y.bvt=b.bvt,w.vvt=b.vvt,w.Mvt=b.Mvt),d&&(y.SB=b.SB,y.eq=b.eq,y.Evt=b.Evt,y.Avt=b.Avt,y.Fvt=b.Fvt,y.Dvt=b.Dvt,w.gB=b.gB,w.yB=b.yB,w.kvt=b.kvt,S.Nvt=b.Nvt,S.Bvt=b.Bvt),p&&(w.Wvt=b.Wvt,w.zB=b.zB,S.jvt=b.jvt,S.Hvt=b.Hvt),l&&(y.T5=b.T5,w.G5=b.Vvt,w.V2t=b.r6,w.U2t=b.Uvt,w.z2t=b.zvt),c&&(y.J2t=b.$vt,w.q2t=b.Jvt,w.$2t=b.qvt),f&&(y.Wl=b.Yvt,w.X2t=b.Xvt),m&&(y.Gvt=b.Gvt,y.Ivt=b.Ivt,y.Cvt=b.Cvt,s.K2t=v),e||(y.Qvt=b.Qvt,y.t2t=b.t2t,y.s2t=b.s2t,y.i2t=b.i2t,y.lW=b.lW,w.f2t=b.f2t,w.d2t=b.d2t,w.p2t=b.p2t,w.m2t=b.m2t,w.g2t=b.g2t,w.a2t=b.a2t,y.l2t=b.l2t,y.c2t=b.c2t,w.u2t=b.u2t,w.y2t||(w.y2t=b.y2t),S.v2t||(S.v2t=b.v2t),S.G2t=b.G2t,S.x2t=b.x2t,S.Y2t=b.J$,S.Z2t=b.EN,S.M2t=b.M2t,S.e2t=b.e2t,S.r2t=b.r2t,S.n2t=b.n2t,y.Cdt=b.Cdt,w.WN=b.WN,w.T2t=b.T2t),g&&(S.I2t=b.I2t)}}{const Ko=self.Os;Ko.rdt=class extends Ko.Qh{constructor(t){super(),this.pft=t,this.ef="",this.jA=-1,this.Q2t="",this.tMt=!1,this.sMt=null,this.Gft=0,this.Ypt=[],this.Eft=null,this.iMt=new Map,this.eMt=null,this.hMt=null,this.rMt=-1,this.iyt=null,this.nMt=null,this.oMt=!1}er(){this.ef="",this.jA=-1,this.Q2t="",this.sMt=null,this.hMt=null,this.iyt=null,this.nMt=null,this.rMt=-1,Ko.Pn(this.Ypt),this.Eft&&(this.Eft.clear(),this.Eft=null);for(const t of this.iMt.values())t.er();this.iMt.clear(),this.eMt=null}Qb(){const t=this.pft,s=t.IO()._z(),i=t.i1t(),e=(this.sMt=i.XF(),this.Gft=i.Oft()+1,t.Kdt(this.sMt));e&&(this.hMt=e,this.iyt=e.Syt(),this.nMt=e.wyt().map(t=>t.iet()),e.Ggt())&&(this.rMt=e.Gyt());for(const r of s){const n=r.vk();n.$ct()&&!this.sMt.qmt(r)||(this.Ypt.push(r),this.iMt.set(r,Ko.ir(Ko.aMt,n)))}const h=t.KF();this.Eft=0<h.size?h:null}uMt(t){this.ef="timer",this.Qb(),this.jA=this.pft.IO().mD()+t}lMt(t){this.ef="signal",this.Qb(),this.Q2t=t.toLowerCase()}_2t(t,s){this.ef="instance-signals",this.Qb(),this.Q2t=s.toLowerCase(),this.eMt=new Set(t)}cMt(t){this.ef="promise",this.Qb(),t.then(()=>this.xdt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.xdt()})}fMt(){return"timer"===this.ef}Mdt(){return"signal"===this.ef}Rdt(){return"instance-signals"===this.ef}Jdt(){return"promise"===this.ef}Gdt(){return this.Q2t}dMt(){return this.tMt}xdt(){this.tMt=!0}Pdt(t){this.eMt.delete(t),0===this.eMt.size&&this.xdt()}adt(){return this.fMt()?this.jA<=this.pft.IO().mD():this.dMt()}pMt(t){t.Rft(this.sMt,this.Gft);for(const[i,e]of this.iMt.entries()){const h=i.vk();e.Rft(h)}this.Eft&&t.$ft([...this.Eft]);const s=this.hMt;s&&(s.Dgt(this.iyt),s.wyt().map((t,s)=>t.Wet(this.nMt[s])),s.Ggt())&&s.xyt(this.rMt)}udt(t){this.pMt(t),this.sMt.xgt(t),this.hMt&&this.hMt.Ggt()&&this.hMt.Ugt(this.rMt),this.pft.tdt(this.Ypt),this.oMt=!0}async ddt(t){this.pMt(t);for(const s of this.sMt.Tgt(t))await this.pft.IO().k1t(s);this.hMt&&this.hMt.Ggt()&&this.hMt.Ugt(this.rMt),this.pft.tdt(this.Ypt),this.oMt=!0}ldt(){return this.oMt}Vct(t){for(const s of this.iMt.values())s.Vct(t);if("instance-signals"===this.ef){for(const i of t)this.eMt.delete(i);0===this.eMt.size&&this.xdt()}}QJ(){const t={},s={wt:this.ef,t:this.jA,st:this.Q2t,s:this.tMt,ev:this.sMt.Oz(),sm:this.Ypt.map(t=>t.Oz()),dsm:this.Eft?[...this.Eft].map(t=>t.Oz()):null,sols:t};this.sMt.cgt(this.Gft)&&(s.act=this.sMt.n1t(this.Gft).Oz());for(const[i,e]of this.iMt)t[i.Oz().toString()]=e.QJ();return"instance-signals"===this.ef&&(s.pi=[...this.eMt].map(t=>t.EN())),s}static qdt(t,s){const i=t.IO(),e=t.m1t(s.ev);if(!e)return null;let h=0;if(s.hasOwnProperty("act")){const n=t.y1t(s.act);if(!n)return null;h=n.fF()}const r=Ko.ir(Ko.rdt,t);r.jA=s.t,s.hasOwnProperty("wt")?r.ef=s.wt:r.ef=-1===r.jA?"signal":"timer",r.Q2t=s.st,r.tMt=s.s,r.sMt=e,r.Gft=h;for(const o of s.sm){const a=i.p8(o);a&&r.Ypt.push(a)}if(Array.isArray(s.dsm))for(const u of s.dsm){const l=i.p8(u);l&&(r.Eft||(r.Eft=new Set),r.Eft.add(l))}for(const[c,f]of Object.entries(s.sols)){const d=parseInt(c,10),p=i.p8(d);if(p){const m=Ko.ir(Ko.aMt,null);m.tq(t,f),r.iMt.set(p,m)}}if("instance-signals"===r.ef){r.eMt=new Set;for(const g of s.pi){const y=i.sO(g);y&&r.eMt.add(y)}}return r}}}{const Yo=self.Os;Yo.aMt=class extends Yo.Qh{constructor(t){super(),this.Lct=null,this.mMt=!0,this.G7=[],t&&(this.Lct=t.mN(),this.mMt=t.$ct(),Yo.On(this.G7,t.eft()))}er(){this.Lct=null,Yo.Pn(this.G7)}Rft(t){t.ift(this.mMt),Yo.On(t.eft(),this.G7)}Vct(t){Yo.Wn(this.G7,t)}QJ(){return{sa:this.mMt,insts:this.G7.map(t=>t.EN())}}tq(t,s){const i=t.IO();this.mMt=!!s.sa,Yo.Pn(this.G7);for(const e of s.insts){const h=i.sO(e);h&&this.G7.push(h)}}}}{let u=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};u;const Zo=self.Os;Zo.gMt=class extends Zo.Qh{constructor(t){super(),this.$c=t.runtime,this.yMt=!!t.OL,this.wMt=!!t.SMt,this.bMt=!!t.jL,this.vMt=!!t.MMt,this.GMt=!!t.VL,this.xMt=!!t.TMt,this._Mt=!!t.XL,this.IMt=!!t.BL,this.CMt=!!t.zL,this.EMt=t.RMt,this.PMt=null,this.AMt=new Map,this.FMt=new Map,this.DMt=new Map,this.OMt=new Map,this.LMt=t.kMt,this.NMt=null}er(){this.$c=null}IO(){return this.$c}BMt(){}Edt(){return(2<=this._St()?this.NMt:this).constructor}_St(){return this.EMt}WMt(t=!1){let s=this.LMt;return t&&"function"!=typeof s&&2<=this._St()?globalThis.kW:s}LL(){return this.yMt}NL(){return this.wMt}WL(){return this.IMt}JL(){return this.CMt}HL(){return this.bMt}Cb(){return this.vMt}UL(){return this.GMt}$L(){return this.xMt}KL(){return this._Mt}Xyt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.AMt.get(t);return i||(i=t.bind(s),this.AMt.set(t,i)),i}MSt(t,s,i){if(!s)throw new Error("missing 'this' binding");let e=u(this.FMt,t),h=e.get(i);return h||(h=t.bind(s,i),e.set(i,h)),h}GSt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");let h=u(this.DMt,t),r=u(h,i),n=r.get(e);return n||(n=t.bind(s,i,e),r.set(e,n)),n}xSt(t,s,i,e,h){if(!s)throw new Error("missing 'this' binding");let r=u(this.OMt,t),n=u(r,i),o=u(n,e),a=o.get(h);return a||(a=t.bind(s,i,e,h),o.set(h,a)),a}jMt(t){if(!this.LL())throw new Error("must be single-global plugin");this.PMt=t}ek(){if(this.LL())return this.PMt;throw new Error("must be single-global plugin")}rk(){if(this.LL())return this.PMt.rk();throw new Error("must be single-global plugin")}HMt(){const t=this._St(),s=(Zo.FL.VMt(this,t),this.WMt(!0));if(s){if(this.NMt=new s,!(this.NMt instanceof self.RL))throw new TypeError("plugin class must derive from IPlugin")}else this.NMt=new self.RL;Zo.FL.UMt(t)}QL(){return this.NMt}}}{const Qo=self.Os;Qo.zMt=class extends Qo.gMt{constructor(t,s){super(t),this.JMt=s,this.qMt=0,this.$Mt=new Map,this.XMt("elem-focused",t=>t.KMt()),this.XMt("elem-blurred",t=>{t&&t.YMt()})}er(){super.er()}ZMt(t){const s=this.qMt++;return this.$Mt.set(s,t),s}QMt(t){this.$Mt.delete(t)}XMt(t,i){this.$c.h4(this.JMt,t,t=>{const s=this.$Mt.get(t.elementId);i(s,t)})}}}{const ta=self.Os;ta.tGt=class extends ta.Qh{constructor(t){super(),this.Lct=t,this.$c=t.IO(),this.sGt=t.uk()}er(){this.Lct=null,this.$c=null,this.sGt=null}mN(){return this.Lct}IO(){return this.$c}uk(){return this.sGt}B6(){return this.Lct.B6()}BMt(){}NSt(t){}Gbt(t){}xbt(t){}c$(t){}y$(){}p$(){}k$(t){}iGt(){}WMt(){return null}eGt(t,s,i){const e=ta.ir(ta.Event,t,s);e.hGt=this,i&&Object.assign(e,i),this.mN().bX(e)}}}{const sa=self.Os;sa.rGt=class extends sa.Qh{constructor(t,s){super(),this.vi=t,this.JMt=s,this.nGt=null,this.$c=t.IO(),this.Lct=this.vi.mN(),this.oGt=this.Lct.Mbt(),this.rK=null,this.oK=null,this.l4=!1,this.f4=!1,this.a0=null,this.lI=!1}er(){this.lI=!0,this.aGt(),this.uGt(),this.rK=null,this.oK=null,this.a0&&(this.a0.er(),this.a0=null),this.vi=null,this.$c=null,this.Lct=null,this.oGt=null}hr(){return this.lI}RW(){return this.vi}IO(){return this.$c}mN(){return this.Lct}uk(){return this.oGt.uk()}Mbt(){return this.oGt}lGt(){return this.vi.iO()}t4(t){return this.$c.t4(t,this.vi,null)}cGt(t){return this.$c.cGt(t,this.vi,null)}i4(t){return this.$c.i4(t,this.vi,null)}fGt(t,s){return this.$c.fGt(t,this.vi,s)}dGt(t,s){return this.$c.dGt(t,this.vi,s)}pGt(t){return this.$c.pGt(t)}mGt(t,s){this.$c.h4(this.JMt,t,s)}gGt(t){for(const[s,i]of t)this.mGt(s,i)}yGt(t,s){this.$c.Yc(this.JMt,t,s)}wGt(t,s){return this.$c.mO(this.JMt,t,s)}SGt(t,s){if(!this.$c.IF())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.JMt,handler:t,data:s,responseId:null});this.yGt(t,s)}bGt(t){if(!t)throw new Error("cannot set empty component id");this.nGt=t}vGt(){if(this.nGt)return this.$c.w4(this.nGt);throw new Error("wrapper extension component id not set")}b4(t,s){if(!this.nGt)throw new Error("wrapper extension component id not set");this.$c.b4(this.nGt,t,s)}MGt(t){for(const[s,i]of t)this.b4(s,i)}h8(t,s){if(!this.nGt)throw new Error("wrapper extension component id not set");this.$c.h8(this.nGt,t,s)}r8(t,s){if(this.nGt)return this.$c.r8(this.nGt,t,s);throw new Error("wrapper extension component id not set")}gY(){}GGt(){}xGt(){this.l4||(this.rK||(this.rK=()=>this.gY()),this.$c.Rf().addEventListener("tick",this.rK),this.l4=!0)}aGt(){this.l4&&(this.$c.Rf().removeEventListener("tick",this.rK),this.l4=!1)}TGt(){return this.l4}_Gt(){this.f4||(this.oK||(this.oK=()=>this.GGt()),this.$c.Rf().addEventListener("tick2",this.oK),this.f4=!0)}uGt(){this.f4&&(this.$c.Rf().removeEventListener("tick2",this.oK),this.f4=!1)}IGt(){return this.f4}CGt(){return[]}gv(){return null}yv(t){}crt(t){}yrt(t,s){}cnt(t,s,i){if(0!==s){const e=this.crt(t);if("number"!=typeof e)throw new Error("expected number");this.yrt(t,e+s,i)}}EGt(t,s,i,e){}RGt(t,...s){t.call(this,...s)}PGt(t,...s){return t.call(this,...s)}WMt(){return null}eGt(t,s,i){if(this.vi.AGt()){const e=this.lGt(),h=sa.ir(sa.Event,t,s);h.f6=e,i&&Object.assign(h,i),e.dispatchEvent(h)}}Cb(){return!1}}}{const ia=self.Os;ia.FGt=class extends ia.rGt{constructor(t,s){super(t,s),this.ust=t.nO(),this.DGt=null,this.OGt=null}er(){if(this.DGt){const t=this.$c.Rf();t.removeEventListener("renderercontextlost",this.DGt),t.removeEventListener("renderercontextrestored",this.OGt),this.DGt=null,this.OGt=null}this.ust=null,super.er()}LGt(){this.kGt()}NGt(){}BGt(){}kGt(){if(!this.DGt){this.DGt=()=>this.m7(),this.OGt=()=>this.WGt();const t=this.$c.Rf();t.addEventListener("renderercontextlost",this.DGt),t.addEventListener("renderercontextrestored",this.OGt)}}m7(){this.NGt()}WGt(){this.BGt()}nO(){return this.ust}Qst(){return!1}Zst(){if(!this.Qst())throw new Error("original size not known");const t=this.jGt();if(t)return t.Xp()}sit(){if(!this.Qst())throw new Error("original size not known");const t=this.jGt();if(t)return t.om()}jGt(){return null}HGt(){const t=this.jGt();if(t){const s=t.vM();if(s)return[s.Xp(),s.om()]}return[100,100]}VGt(){const t=this.jGt();return t?t.yC():null}UGt(){const t=this.jGt();return t?t.zGt():null}JGt(){const t=this.jGt();return!!t&&t.qGt()}kbt(t){const s=this.vi.nO();return[s.tv(),s.rv(),s.L4()]}iGt(t,s,i){}$Gt(t,s){}PJ(){return!0}}}{const ea=self.Os,ha=ea.ir(ea.Rect);ea.XGt=class extends ea.FGt{constructor(t,s){super(t,s),this.KGt=this.uk().ZMt(this),this.YGt=!0,this.ZGt=!1,this.QGt=!1,this.txt=-.2,this.sxt=ea.ir(ea.Rect,0,0,-1,-1);const i=this.$c.gL();this.ixt=i.bj(),this.hxt=i.vj(),this.rxt=-1,this.nxt=-1,this.oxt=!1,this.xGt()}er(){this.uk().QMt(this.KGt),this.axt("destroy"),this.KGt=-1,super.er()}t6(){if(this.$c.IF())throw new Error("not valid in worker mode");return this.uxt("get-element")}axt(t,s){(s=s||{}).elementId=this.KGt,this.yGt(t,s)}uxt(t,s){return(s=s||{}).elementId=this.KGt,this.SGt(t,s)}lxt(t,s){return(s=s||{}).elementId=this.KGt,this.wGt(t,s)}cxt(t){t=t||{};const s=this.nO();t.elementId=this.KGt,t.isVisible=s.T5(),t.htmlIndex=s.oO().Ij(),t.htmlZIndex=s.Cj(),Object.assign(t,this.fxt()),this.YGt=!!t.isVisible,this.SGt("create",t),this.dxt(!0)}Vvt(t){this.YGt!==(t=!!t)&&(this.YGt=t,this.axt("set-visible",{isVisible:t}))}gY(){this.dxt(!1)}pxt(){const t=this.$c.gL().Fj();return"Android"===ea.ri.ni&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}dxt(l){if(!this.RW().Dj()){let t=this.nO(),s=t.oO(),i=t.B4(),[e,h]=s.nN(i.fu(),i.du()),[r,n]=s.nN(i.pu(),i.mu()),o=this.$c.gL(),a=o.bL(),u=o.ML();if(t.T5()&&s.T5())if(!this.pxt()&&(r<=0||n<=0||a<=e||u<=h))this.Vvt(!1);else{ha.set(e,h,r,n);const c=o.bj(),f=o.vj(),d=s.Ij(),p=t.Cj();if(!l&&ha.equals(this.sxt)&&this.ixt===c&&this.hxt===f&&this.rxt===d&&this.nxt===p)this.Vvt(!0);else{this.sxt._(ha),this.ixt=c,this.hxt=f,this.rxt=d,this.nxt=p,this.Vvt(!0);let t=null;this.QGt&&(t=s.Oj()+this.txt),this.axt("update-position",{left:Math.round(this.sxt.fu()),top:Math.round(this.sxt.du()),width:Math.round(this.sxt.width()),height:Math.round(this.sxt.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this.Vvt(!1)}}i6(){this.uxt("focus",{focus:!0})}e6(){this.uxt("focus",{focus:!1})}KMt(){this.ZGt=!0}YMt(){this.ZGt=!1}$vt(){return this.ZGt}r6(t,s){this.axt("set-css-style",{prop:ea.Ao(t),val:s})}Uvt(t,s){this.axt("set-attribute",{name:t,val:s})}zvt(t){this.axt("remove-attribute",{name:t})}mxt(){this.oxt||(this.oxt=!0,Promise.resolve().then(()=>{this.oxt=!1,this.axt("update-state",this.fxt())}))}fxt(){}gxt(){return this.KGt}}}{const ra=self.Os,na=self.m6;ra.yxt=class extends ra.Qh{constructor(t){super(),this.$c=t.runtime,this.wxt=ra.ir(ra.Xl),this.Sxt=ra.ir(ra.Xl),this.EMt=t.RMt,this.LMt=t.kMt,this.bxt=null}er(){this.Sxt.er(),this.wxt.er(),this.$c=null}IO(){return this.$c}BMt(){}_St(){return this.EMt}WMt(t=!1){let s=this.LMt;return t&&"function"!=typeof s&&2<=this._St()?globalThis.Uj:s}vxt(t){this.wxt.Ql(t)}HK(){return this.wxt.tc()}pz(t){this.Sxt.Ql(t)}yz(t){this.Sxt.zl(t)}bk(){return this.Sxt.tc()}HMt(){const t=this._St(),s=(ra.FL.VMt(this,t),this.WMt(!0));if(s){if(this.bxt=new s,!(this.bxt instanceof na))throw new TypeError("behavior class must derive from IBehavior")}else this.bxt=new na;ra.FL.UMt(t)}o6(){return this.bxt}}}{const oa=self.Os;oa.Mxt=class extends oa.Qh{constructor(t){super(),this.$c=t.IO(),this.lwt=t,this.Lct=t.mN(),this.Gxt=t.a6(),this.Gxt.vxt(this.Lct)}er(){this.$c=null,this.lwt=null,this.Lct=null,this.Gxt=null}BMt(){}c6(){return this.lwt}mN(){return this.Lct}IO(){return this.$c}a6(){return this.Gxt}}}{const aa=self.Os;aa.xxt=class extends aa.Qh{constructor(t,s){super(),this.Txt=t,this.JMt=s,this.vi=t.d6(),this.$c=t.IO(),this.lwt=t.c6(),this.oGt=this.lwt.Mbt(),this.l4=!1,this.f4=!1,this.i8=!1,this.a0=null}er(){this.aGt(),this.uGt(),this._xt(),this.a0&&(this.a0.er(),this.a0=null),this.Txt=null,this.vi=null,this.$c=null,this.lwt=null,this.oGt=null}a6(){return this.lwt.a6()}Ixt(){return this.Txt}d6(){return this.vi}mN(){return this.vi.mN()}nO(){return this.vi.nO()}IO(){return this.$c}c6(){return this.lwt}Mbt(){return this.oGt}lGt(){return this.Txt.lGt()}t4(t){return this.$c.t4(t,this.vi,this.lwt)}cGt(t){return this.$c.cGt(t,this.vi,this.lwt)}i4(t){return this.$c.i4(t,this.vi,this.lwt)}Cxt(){}gY(){}GGt(){}Ext(){}xGt(){this.l4||(this.$c.Kj(this),this.l4=!0)}aGt(){this.l4&&(this.$c.Yj(this),this.l4=!1)}TGt(){return this.l4}_Gt(){this.f4||(this.$c.Zj(this),this.f4=!0)}uGt(){this.f4&&(this.$c.Qj(this),this.f4=!1)}IGt(){return this.f4}Rxt(){this.i8||(this.$c.t8(this),this.i8=!0)}_xt(){this.i8&&(this.$c.s8(this),this.i8=!1)}Pxt(){return this.i8}CGt(){return[]}mGt(t,s){this.$c.h4(this.JMt,t,s)}Axt(t,s){}gv(){return null}yv(t){}crt(t){}yrt(t,s){}cnt(t,s){if(0!==s){const i=this.crt(t);if("number"!=typeof i)throw new Error("expected number");this.yrt(t,i+s)}}EGt(t,s,i,e){}RGt(t,...s){t.call(this,...s)}PGt(t,...s){return t.call(this,...s)}WMt(){return null}eGt(t,s,i){if(this.Txt.AGt()){const e=this.lGt(),h=aa.ir(aa.Event,t,s);h.Fxt=e,h.f6=e.f6,i&&Object.assign(h,i),e.dispatchEvent(h)}}}}{let s=function(t){if(t!==i)throw new Error("invalid internal API token")},r=(s,self.Os),i=(r.V$={},r.Sat={},r.Ls()),e=[],h=[],n=[],o=null,a=null,t=null,u=null,l=new Map,c=new Map;r.FL=class extends r.Qh{constructor(t,s){super(),this.$c=t,this.Dxt=[],this.Uyt=null,this.Oxt=[],this.Lxt=new Map,this.kxt=null,this.Nxt=null,this.Bxt=new Set(s)}Wxt(t){const s=t[19],i=this.$c.$gt(t[0]);if(!i)throw new Error("missing plugin");r.C2t(t,i,s);const e=2<=s?r.gMt:i,h=r.ir(e,{runtime:this.$c,OL:t[1],SMt:t[2],jL:t[5],VL:t[8],MMt:t[9],TMt:t[13],XL:t[14],BL:t[17],zL:t[18],RMt:s,kMt:2<=s?i:null});h.BMt(),this.Dxt.push(h),l.set(i,h)}jxt(){this.Uyt=r.ir(r.V$.H$,{runtime:this.$c,OL:!0}),this.Uyt.BMt()}Hxt(t){const i=t[1],e=this.$c.$gt(t[0]);if(!e)throw new Error("missing behavior");this.Lxt.set(e,()=>{const t=2<=i?r.yxt:e,s=r.ir(t,{runtime:this.$c,RMt:i,kMt:2<=i?e:null});s.BMt(),this.Oxt.push(s),c.set(e,s),!this.kxt&&r.Sat.solid&&s instanceof r.Sat.solid?this.kxt=s:!this.Nxt&&r.Sat.jumpthru&&s instanceof r.Sat.jumpthru&&(this.Nxt=s),s.HMt()})}Vxt(t){const s=this.Lxt.get(t);s&&(s(),this.Lxt.delete(t))}static VMt(t,s=1){if(r.FL.VMt!==o)throw new Error("invalid method");1===s&&e.push(t),h.push(t)}static UMt(t=1){if(r.FL.UMt!==a)throw new Error("invalid method");1===t&&e.pop(),h.pop()}static SN(){if(r.FL.SN!==t)throw new Error("invalid method");if(0===e.length)throw new Error("no init object set");return e.at(-1)}static AL(t){if(r.FL.AL!==u)throw new Error("invalid method");if(s(t),0===h.length)throw new Error("no init object set");return h.at(-1)}static Uxt(t){n.push(t)}static zxt(){n.pop()}static ZN(){if(0===n.length)throw new Error("no init properties set");return n.at(-1)}Jxt(){for(const t of this.Dxt)t.HMt()}static ZL(t){return l.get(t)||null}static g6(t){return c.get(t)||null}zyt(){return this.Uyt}qxt(){return this.kxt}$xt(){return this.Nxt}w4(t){return this.Bxt.has(t)}},o=r.FL.VMt,a=r.FL.UMt,t=r.FL.SN,u=r.FL.AL}{const ua=self.Os,la=new Set;ua.Xxt=class extends ua.Qh{constructor(){super(),this.Kxt=0,this.h7="",this.r7=0,this.Yxt=0,this.Zxt=0,this.Lm=0,this.km=0,this.Qxt=!1,this.tTt=!1,this.sTt=null,this.iTt="",this.hI=ua.ir(ua.Rect),this.eTt=ua.ir(ua.Hu),this.hTt="",this.rTt=new self.TO(this),la.add(this)}er(){this.oI(),this.sTt&&0===this.sTt.w7()&&this.sTt.er(),this.sTt=null,la.delete(this),this.nTt()}static m7(){for(const t of la)t.iTt="",t.hI.set(0,0,0,0),t.eTt.ul(t.hI)}oTt(t){this.h7=t[0],this.r7=t[1],this.Yxt=t[2],this.Zxt=t[3],this.Lm=t[4],this.km=t[5],this.Qxt=t[6],this.tTt=!0}aTt(t,s){if(this.sTt)throw new Error("already loaded asset");this.h7=s;const i={};return ua.uo(s)&&(i.FV="remote"),this._O(t,i),this.sTt.LV()}uTt(t,s){if(this.sTt)throw new Error("already loaded asset");this.h7="",this.r7=s.size,this.sTt=ua.ir(ua.DV,t.gF(),{blob:s,size:this.r7,FV:"local"})}lTt(t){if(t===this)throw new Error("cannot replace with self");this.Kxt++,this.oI(),this.h7=t.h7,this.r7=t.r7,this.Yxt=t.Yxt,this.Zxt=t.Zxt,this.Lm=t.Lm,this.km=t.km,this.Qxt=t.Qxt,this.tTt=t.tTt,this.sTt=t.sTt,this.iTt=t.iTt,this.hI=t.hI,this.eTt=t.eTt,this.nTt()}OV(){return this.h7}ql(){return this.r7}cTt(){return this.Yxt}fTt(){return this.Zxt}qGt(){return this.Qxt}Xp(){return this.Lm}om(){return this.km}dTt(){return this.sTt.Xp()}pTt(){return this.sTt.om()}_O(t,s){if(this.sTt)throw new Error("already got asset");s=Object.assign({},s,{url:this.OV(),size:this.ql()}),this.sTt=t.AV(s)}u7(){return this.sTt&&this.sTt.u7()}async pH(t,s){if(!this.sTt)throw new Error("no asset");if(this.iTt)throw new Error("already loaded texture");const i=this.Kxt,e=(this.iTt="loading",await this.sTt.pH(t,s));if(this.Kxt!==i)return null;if(!e)return this.iTt="",null;this.iTt="loaded",this.tTt||(this.Lm=e.Xp(),this.km=e.om(),this.tTt=!0);const h=this.Qxt?this.km:this.Lm,r=this.Qxt?this.Lm:this.km;return this.hI.set(this.Yxt,this.Zxt,this.Yxt+h,this.Zxt+r),this.hI._t(e.Xp(),e.om()),this.eTt.ul(this.hI),this.Qxt&&this.eTt.ml(),e}oI(){this.iTt&&(this.sTt&&this.sTt.oI(),this.iTt="",this.hI.set(0,0,0,0),this.eTt.ul(this.hI))}vM(){return this.sTt&&"loaded"===this.iTt?this.sTt.vM():null}yC(){return this.hI}zGt(){return this.eTt}KW(){return this.rTt}mTt(){return this.sTt}async gTt(t){t=t||await this.sTt.S7();const s=ua.Go(this.Lm,this.km),i=s.getContext("2d");return this.Qxt?(i.rotate(Math.PI/-2),i.translate(-this.km,0),i.drawImage(t,this.Yxt,this.Zxt,this.km,this.Lm,0,0,this.km,this.Lm)):i.drawImage(t,this.Yxt,this.Zxt,this.Lm,this.km,0,0,this.Lm,this.km),s}async yTt(t){if(!this.hTt){const s=await this.gTt(t),i=await ua.xo(s);this.hTt=URL.createObjectURL(i)}return this.hTt}nTt(){this.hTt&&(URL.revokeObjectURL(this.hTt),this.hTt="")}}}{const ca=self.Os;ca.wTt=class extends ca.Qh{constructor(t){super(),this.nr=t[0],this.STt=t[1],this.sSt=!!t[2],this.jnt=t[3],this.bTt=t[4],this.vTt=!!t[5],this.iU=t[6],this.MTt=t[7].map(t=>ca.ir(ca.GTt,t)),this.xTt=new self.M6(this)}static TTt(t,s){const i=ca.ir(ca.wTt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.MTt.push(ca.GTt.TTt(t)),i}er(){for(const t of this.MTt)t.er();ca.Pn(this.MTt)}_Tt(t){for(const s of this.MTt)s.B6()._O(t)}ITt(s,i){return Promise.all(this.MTt.map(t=>t.B6().pH(s,i)))}CTt(){for(const t of this.MTt)t.B6().oI()}Wc(){return this.nr}Oz(){return this.iU}P6(){return this.MTt.length}F6(){return this.MTt}ETt(t){if((t=Math.floor(t))<0||t>=this.MTt.length)throw new RangeError("invalid frame");return this.MTt[t]}RTt(t,s){(s=Math.floor(s))<0?this.MTt.unshift(t):s>=this.MTt.length?this.MTt.push(t):this.MTt.splice(s,0,t)}PTt(t){if((t=Math.floor(t))<0||t>=this.MTt.length)throw new RangeError("invalid frame");this.MTt[t].er(),this.MTt.splice(t,1)}ATt(i){for(let t=0,s=this.MTt.length;t<s;++t)if(ca.ph(this.MTt[t].rW(),i))return t;return-1}FTt(t){if("string"!=typeof t)return t;{const s=this.ATt(t);if(-1===s)throw new Error("cannot find animation frame with tag "+t);return s}}G6(){return this.STt}T6(){return this.sSt}_6(){return this.jnt}C6(){return this.bTt}R6(){return this.vTt}DTt(){return this.xTt}}}{const fa=self.Os,da=(()=>{const i=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),e=new Uint8Array(i.length);for(let t=0,s=i.length;t<s;++t)e[t]=i.charCodeAt(t);return new Blob([e],{type:"image/png"})})();fa.GTt=class extends fa.Qh{constructor(t){super(),this.OTt=fa.ir(fa.Xxt),this.OTt.oTt(t),this.LTt=t[7],this.kTt=fa.ir(fa.Ha,t[8],t[9]),this.NTt=t[10].map(t=>fa.ir(fa.BTt,this,t)),this.WTt=new Map;for(const i of this.NTt)this.WTt.set(i.Wc().toLowerCase(),i);this.jTt=null;const s=t[11];6<=s.length&&(this.jTt=fa.ir(fa.Ml,s)),this.kg=t[12]||"",this.HTt=new self.N6(this)}static TTt(t){const s=fa.ir(fa.GTt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.OTt.uTt(t,da),s}er(){this.jTt&&(this.jTt.er(),this.jTt=null),this.OTt.er(),this.OTt=null}B6(){return this.OTt}W6(){return this.LTt}H6(){return this.kTt.qa()}U6(){return this.kTt.Xa()}sW(){return this.jTt}Q6(t){return this.WTt.get(t.toLowerCase())||null}Z6(t){return(t=Math.floor(t))<0||t>=this.NTt.length?null:this.NTt[t]}q6(){return this.NTt.length}rW(){return this.kg}D6(){return this.HTt}}}{const pa=self.Os;pa.BTt=class extends pa.Qh{constructor(t,s){super(),this.VTt=t,this.nr=s[0],this.UTt=pa.ir(pa.Ha,s[1],s[2])}er(){}Wc(){return this.nr}tv(){return this.UTt.qa()}rv(){return this.UTt.Xa()}zTt(){return this.UTt}}}{const x=self.Os,ma=self.C3Debugger,ga=self.nk;x.aut=class extends x.Qh{constructor(s,t,i){super();const e=s.$gt(i[1]),[h,r]=(this.$c=s,this.sGt=x.FL.ZL(e),this.oGt=null,this.JTt=e.Instance,this.Lg=t,this.iU=i[11],this.nr=i[0],this.Pyt=this.$c.f1t(i[14]),this.qTt=!!i[9],this.$Tt=!!i[2],this.XTt=!!i[10],this.KTt=i[3].map(t=>({sid:t[0],type:t[1],name:t[2],YTt:s.f1t(t[3])})),this.ZTt=i[4],this.QTt=i[5],this.wMt=this.sGt.NL(),this.t_t=x.ir(x.Event.Rf),this.kU=null,s.SF().iL());if(this.s_t=x.ir(x.i_t,h,r),this.e_t=!0,this.h_t=null,this.r_t=null,this.n_t=-1,this.o_t=null,this.a_t=null,this.u_t=null,this.l_t=null,this.c_t=null,this.f_t=!1,this.d_t=null,this.p_t=i[8].map(t=>x.m_t.jM(this,t)),this.g_t=[],this.y_t=new Map,this.w_t=new Map,this.S_t=new Set,this.b_t=new Map,this.v_t=x.ir(x.Oct,this),this.M_t=null,this.G_t=0,this.x_t=!1,this.d_t=null,this.OTt=null,this.T_t=null,this.__t=null,this.I_t=null,this.C_t=0,this.nSt=new Map,this.oSt=new Map,this.G7=[],this.E_t=new Map,this.R_t=!0,this.sGt.UL()&&(this.kU=x.ir(x.NU,this,i[12])),i[6]&&(this.OTt=x.ir(x.Xxt),this.OTt.oTt(i[6])),i[7]){this.T_t=i[7].map(t=>x.ir(x.wTt,t)),this.__t=new Map,this.I_t=new Map;for(const a of this.T_t)this.__t.set(a.Wc().toLowerCase(),a),this.I_t.set(a.Oz(),a)}this.$Tt?(this.h_t=[],this.r_t=new Set,this.n_t=this.$c.P_t()):(this.o_t=[],this.a_t=new Set,this.u_t=[],this.l_t=[],this.c_t=[]);const n=this.sGt._St();if(n<2&&(this.oGt=x.ir(e.A_t,this,i[15]),!(this.oGt instanceof x.tGt)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.F_t=null,this.D_t=null,this.kq=x.ir(x.Event.Rf),x.FL.VMt(this,n);let o;if(o=2<=n?(o=e.A_t)||globalThis.qW:this.oGt.WMt()){if(this.F_t=new o(n<2?this:null),n<2&&!(this.F_t instanceof ga))throw new TypeError("script interface class must derive from IObjectClass");if(2<=n&&!(this.F_t instanceof globalThis.qW))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.F_t=new ga;if(x.FL.UMt(n),i[13]){const u=i[13];if(u){const l=u[0],c=u[1],f=u[2];this.oGt.iGt(l,c,f)}}this.$c.O_t()&&!this.$Tt&&!this.XTt&&this.wMt||this.BMt(),this.sGt.LL()&&(this.sGt.jMt(this),this.L_t(i)),this.k_t=null}static jM(t,s,i){return x.ir(x.aut,t,s,i)}er(){if(this.t_t.er(),this.t_t=null,this.OTt&&(this.OTt.er(),this.OTt=null),this.T_t){for(const t of this.T_t)t.er();x.Pn(this.T_t),this.__t.clear(),this.I_t.clear()}this.k_t=null,this.v_t.er(),this.v_t=null,this.nSt.clear(),this.oSt.clear(),this.d_t=null,this.$c=null}N_t(i){for(let t=1,s=i.length;t<s;++t){const e=this.$c.ez(i[t]);this.h_t.push(e),this.r_t.add(e),e.o_t.push(this),e.a_t.add(this)}}B_t(t){this.f_t=!0,this.d_t=t}IN(){return this.f_t}a$(){return this.d_t}W_t(){let t=0;if(!this.$Tt)for(const s of this.o_t)for(const i of s.j_t()){const e=i.Wc().toLowerCase();this.y_t.set(e,i),this.w_t.set(e,t),this.g_t.push(i),++t}for(const h of this.j_t()){const r=h.Wc().toLowerCase();this.y_t.set(r,h),this.w_t.set(r,t),this.g_t.push(h),++t}for(const n of this.g_t)this.S_t.add(n.a6().constructor);if(!this.$Tt&&this.o_t.length){let t=this.$c.H_t(),s=(x.Fn(this.u_t,t,0),x.Fn(this.l_t,t,0),x.Fn(this.c_t,t,0),[]),i=0,e=0,h=0;for(const o of this.o_t){const a=o.awt(),u=(this.u_t[a]=i,i+=o.V_t(),this.l_t[a]=e,e+=o.U_t(),this.c_t[a]=h,h+=o.z_t(),o.Fk());if(u&&this.kU)for(const l of u.Dk())s.push(l.J_t(this.kU))}this.kU&&this.kU.q_t(s)}}L_t(t){const s=this.$c.$_t(),i=x.ir(x.Instance,{runtime:this.$c,pN:this,uid:s});i.X_t(t[16],[]),this.$c.K_t(s,i),this.G7.push(i)}Mbt(){return this.oGt}Y_t(){return this.XTt}Rf(){return this.t_t}BMt(){this.$Tt||(this.oGt?this.oGt.BMt():this.F_t.$W())}Z_t(){return 0<this.C_t}async c$(t){this.$Tt||(this.C_t++,1===this.C_t&&(this.oGt?await this.oGt.c$(t):await this.F_t.YW(this.$c.gL().Q_t())))}y$(){if(!this.$Tt){if(this.C_t--,this.C_t<0)throw new Error("released textures too many times");0===this.C_t&&(this.oGt?this.oGt.y$():this.F_t.ZW(this.$c.gL().Q_t()))}}p$(){if(this.$Tt)throw new Error("not applicable to family");this.oGt?this.oGt.p$():this.F_t.QW()}async k$(t){this.$Tt||(this.oGt?await this.oGt.k$(t):await this.F_t.tj(this.$c.gL().Q_t()))}IO(){return this.$c}uk(){return this.sGt}tIt(){return this.JTt}Wc(){return this.nr}f1t(){return this.Pyt}fF(){return this.Lg}Oz(){return this.iU}Iz(){return this.$Tt}dz(){return this.qTt}NL(){return this.wMt}awt(){return this.n_t}j_t(){return this.p_t}U_t(){return this.ZTt}sIt(t){return t&&this.S_t.has(t)}V_t(){return this.KTt.length}iIt(){return this.KTt.map(t=>t.sid)}eIt(s){return this.KTt.findIndex(t=>t.sid===s)}Lst(s){return this.KTt.findIndex(t=>t.name===s)}hIt(){return this.KTt.map(t=>t.name)}rIt(){return this.KTt.map(t=>t.YTt)}Nst(t){if((t=Math.floor(t))<0||t>=this.KTt.length)throw new RangeError("invalid instance variable index");return this.KTt[t].type}kst(t){if((t=Math.floor(t))<0||t>=this.KTt.length)throw new RangeError("invalid instance variable index");return this.KTt[t].name}z_t(){return this.QTt}nIt(){return this.g_t}lht(t){return this.y_t.get(t.toLowerCase())||null}Wst(t){const s=this.w_t.get(t.toLowerCase());return void 0===s?-1:s}Fk(){return this.kU}UL(){return this.sGt.UL()}oIt(){return this.kU&&this.kU.aIt()}sdt(){return this.v_t}vk(){return this.v_t.vk()}B6(){return this.OTt}nz(t){this.M_t=t}rz(){return this.M_t}oz(t){this.G_t=t}uIt(){return this.G_t}lIt(){return this.T_t}cIt(){return this.T_t.length}S1t(){return this.o_t}Ibt(t){return this.a_t.has(t)}Pmt(){return this.h_t}Cz(t){return this.r_t.has(t)}dwt(t){return this.l_t[t]}owt(t){return this.u_t[t]}myt(t){this.b_t.set(t.byt().toLowerCase(),t)}gyt(t){return!!this._yt(t)}_yt(t){const s=this.b_t.get(t.toLowerCase());return s&&s.Wl()?s:null}fIt(){return this.T_t}dIt(t){if(this.T_t)return this.__t.get(t.toLowerCase())||null;throw new Error("no animations")}pIt(t){if(this.T_t)return this.I_t.get(t)||null;throw new Error("no animations")}mIt(t){if(this.dIt(t))throw new Error(`animation name '${t}' already exists`);const s=x.wTt.TTt(this.IO(),t);return this.T_t.push(s),this.__t.set(s.Wc().toLowerCase(),s),this.I_t.set(s.Oz(),s),s}gIt(t){const s=this.dIt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.T_t.length)throw new Error("cannot remove last animation");const i=this.T_t.indexOf(s);this.T_t.splice(i,1),this.__t.delete(s.Wc().toLowerCase()),this.I_t.delete(s.Oz()),s.er()}yIt(){if(this.T_t)return this.T_t[0];throw new Error("no animations")}wIt(){return this.yIt().ETt(0)}SIt(){if(this.T_t){const t=this.wIt().B6();return[t.Xp(),t.om()]}return this.OTt?[this.OTt.Xp(),this.OTt.om()]:[100,100]}rk(){if(this.sGt.LL())return this.G7[0];throw new Error("not a single-global plugin")}bk(){return this.G7}*instances(){yield*this.G7}*Sk(){yield*this.G7,yield*this.$c.Rvt(this)}Gk(){return this.G7.length}pz(t){this.G7.push(t)}bIt(){this.R_t=!0}X$(){if(this.R_t&&!this.$Tt){let s=this.G7,i=0;for(let t=s.length;i<t;++i)s[i].vIt(i);const t=this.$c.MIt();for(const e of t)e.mN()===this&&e.vIt(i++);this.R_t=!1}}GIt(t){const s=this.G7;if(t<s.length)return s[t];t-=s.length;const i=this.$c.MIt();for(const e of i)if(e.mN()===this){if(0===t)return e;--t}return null}pvt(t){if(t&&t.IN()&&t.mN()!==this)for(const i of t.CN())if(i.mN()===this)return i;const s=this.vk().bk();return s.length?s[0]:null}wk(t){const s=this.vk().bk();return 0<s.length?s[t.J$()%s.length]:null}*Lvt(t,s){let i=this.vk().bk(),e=i.length,h=s.vk(),r=s.vk().bk(),n=r.length,o=t.J$(),a=(!s.Iz()&&h.$ct()||(o=r.indexOf(t)),Math.ceil(e/n)),u=e%n,l=0,c;c=0==u||o<u?(l=o*a,a):(l=u*a+(o-u)*(a-1),a-1);for(let t=l,s=l+c;t<s;++t)yield i[t]}NSt(t){this.oGt?.NSt(t)}Bgt(){if(this.f_t&&!this.$Tt){this.X$();const t=this.vk(),s=t.eft(),i=t.$ct(),e=this.$c.i1t(),h=e&&e.XF()&&e.XF().fft();for(const r of this.d_t.q$())if(r!==this){r.X$();const n=r.vk();if(n.ift(i),!i){const o=n.eft();x.Pn(o);for(const a of s)o.push(r.GIt(a.J$()));if(h){const u=t.hft(),l=n.hft();x.Pn(l);for(const c of u)l.push(r.GIt(c.J$()))}}}}}VSt(t,s){for(const i of this.a$().q$()){const e=i.vk();t?x.Rn(e.hft(),s):x.Rn(e.eft(),s)}}xIt(){return this.s_t}TIt(t){this.e_t=!!t}_It(){if(this.e_t&&this.wMt){for(const t of this.G7)t.nO().IIt();for(const s of this.$c.MIt())s.mN()===this&&s.nO().IIt();this.e_t=!1}}CIt(s,t,i){if(t){const e=this.E_t.get(t);e&&(e.delete(s),0===e.size)&&this.E_t.delete(t)}if(i){let t=this.E_t.get(i);t||(t=new Set,this.E_t.set(i,t)),t.add(s)}}EIt(){if(this.Iz()){const t=new Set;for(const s of this.h_t)for(const i of s.EIt())t.add(i);return t.values()}return this.E_t.keys()}ASt(){return this.nSt||(this.nSt=new Map),this.nSt}FSt(){return this.oSt||(this.oSt=new Map),this.oSt}RIt(){return this.sIt(x.Sat.solid)}PIt(){return this.sIt(x.Sat.jumpthru)}AIt(){return this.sIt(x.Sat.NoSave)}cz(){return this.sIt(x.Sat.Persist)}QJ(){const t={instances:this.G7.map(t=>t.gv())};return this.nSt&&this.nSt.size&&(t.ex=x.Ro(this.nSt)),t}tq(t,e){this.nSt&&(this.nSt.clear(),this.nSt=null);const s=t.ex,h=(s&&(this.nSt=x.Po(s)),this.G7),r=t.instances;for(let t=0,s=Math.min(h.length,r.length);t<s;++t)h[t].yv(r[t]);for(let t=r.length,s=h.length;t<s;++t)this.$c.MN(h[t]);for(let i=h.length,t=r.length;i<t;++i){let t=r[i],s=null;if(!this.NL()||(s=this.$c.ND().Zq(t.w.l))){const n=this.$c.fz(this.M_t||this,s,!1,0,0,!0);n.yv(t),e&&e.add(n)}}this.k_t=r,this.bIt()}FIt(){return this.k_t}DIt(){this.k_t=null}OIt(){for(let t=0,s=this.G7;t<s;++t)this.G7[t].OIt()}ik(){return this.F_t}BF(){return this.kq}LIt(){return this.D_t}xk(t){this.D_t=t}bX(t){const s=this.$c,i=s.vX()&&!s.VF().Ek();i&&ma.StartMeasuringScriptTime(),this.kq.dispatchEvent(t),i&&ma.AddScriptTime()}}}{const ya=self.Os;ya.kIt=class extends ya.Qh{constructor(t,s){super(),this.$c=t,this.NIt=s;for(const i of this.NIt)i.B_t(this)}er(){this.$c=null}IO(){return this.$c}o$(){return this.NIt}q$(){return this.NIt}Y$(){return this.NIt.some(t=>t.NL())}}}{let S=self.Os,h=self.C3Debugger,n=S.FL,o=[],a=0,b=new WeakMap,e=new WeakMap;S.Instance=class extends S.Qh{constructor(t){if(S.FL!==n)throw new Error("invalid addon manager");super(),this.$c=t.runtime,this.BIt=t.pN,this.ust=null,this.WIt=null,this.jIt=null,this.HIt=0,this.VIt=t.uid,this.UIt=a++,this.qSt=0,this.zIt=null;const s=S.Jn(t.tags),i=(0<s.length&&(this.zIt=new Set(s)),this.JIt=o,this.qIt=o,this.BIt.nIt()),e=(0<i.length&&(this.qIt=i.map((t,s)=>S.ir(S.$It,{runtime:this.$c,u6:t,f6:this,index:s}))),this.XIt=this.BIt.IN()?[]:null,this.KIt=-1,this.t_t=null,this.uk());if(e.Cb()&&(this.qSt|=4),e.NL())if(this.ust=S.ir(S.YIt,this,t.E4),t.ZIt)this.ust.QIt(t.ZIt);else{this.ust.tCt();const[h,r]=this.BIt.SIt();this.ust.WI(h,r),this.mN().oIt()&&this.ust.C4().sCt()}t.iCt?this.eCt(t.iCt):this.hCt()}er(){if(this.jIt&&(this.jIt.bN(),this.jIt=null),0<this.qIt.length){for(const i of this.qIt)i.er();S.Pn(this.qIt)}this.WIt&&(this.WIt.er(),this.WIt=null);const t=b.get(this),s=(t&&(t.clear(),b.delete(this)),e.get(this));s&&(s.clear(),e.delete(this)),this.XIt&&S.Pn(this.XIt),this.t_t&&(this.t_t.er(),this.t_t=null),this.zIt&&this.zIt.clear(),this.zIt=null,this.$c=null,this.BIt=null,0<this.JIt.length&&S.Pn(this.JIt),this.ust&&(this.ust.er(),this.ust=null)}eCt(t){0<t.length&&(this.JIt=[],S.On(this.JIt,t))}hCt(){const s=this.BIt.V_t();if(0!==s){this.JIt=[];const i=[0,0,""];for(let t=0;t<s;++t)this.JIt.push(i[this.BIt.Nst(t)])}}X_t(t,i){if(this.WIt)throw new Error("already got sdk instance");for(let t=0,s=this.qIt.length;t<s;++t){const e=this.qIt[t];e.X_t(i?i[t]:null)}const s=this.uk()._St();if(s<2){if(this.WIt=S.ir(this.BIt.tIt(),this,t),!(this.WIt instanceof S.rGt))throw new Error("sdk type must derive from SDKInstanceBase");!this.uk().NL()&&this.BIt.LIt()&&this.iO()}else{const h=this.uk().WMt();this.rCt(h.Instance,t)}}s6(){return this.WIt??this.jIt}nO(){return this.ust}IO(){return this.$c}SD(){return this.KIt}AN(){const t=this.KIt;return-1===t?this.IO().SD():t}bD(t){((t=+t)<0||!isFinite(t))&&(t=0),this.KIt=t,this.mN().oIt()&&this.$c.nCt(this,!0)}DN(){this.KIt=-1,this.mN().oIt()&&this.$c.nCt(this,!1)}HJ(){return this.$c.oCt(this)}Rf(){return this.t_t||(this.t_t=S.ir(S.Event.Rf)),this.t_t}zv(t){this.WIt?this.WIt.zv(t):this.jIt.oj(this.$c.gL().Q_t())}BMt(t){this.WIt.BMt(t)}aCt(){this.qSt|=2}uCt(){return 0!=(2&this.qSt)}lCt(){this.qSt|=1}Dj(){return 0!=(1&this.qSt)}Cb(){return 0!=(4&this.qSt)||this.WIt.Cb()}cCt(){this.qSt|=32}FJ(){return 0!=(32&this.qSt)}fCt(){return 0!=(8&this.qSt)}dCt(t){t?this.qSt|=8:this.qSt&=-9}pCt(){return 0!=(16&this.qSt)}mCt(t){t?this.qSt|=16:this.qSt&=-17}gCt(){return 0!=(64&this.qSt)}yCt(t){t?this.qSt|=64:this.qSt&=-65}wCt(t,s){t<<=16,s?this.qSt|=t:this.qSt&=~t}SCt(t){return 0!=(this.qSt&t<<16)}jGt(){return this.WIt.jGt()}HGt(){return this.WIt.HGt()}VGt(){return this.WIt.VGt()}UGt(){return this.WIt.UGt()}JGt(){return this.WIt.JGt()}kbt(t){return this.WIt.kbt(t)}mN(){return this.BIt}PJ(){return this.WIt.PJ()}Pvt(t){return t.Iz()?t.Cz(this.mN()):this.mN()===t}bCt(h,t,s){const i=(t,s)=>{const i=s||t.mN(),e=h.get(i);e?e.add(t):h.set(i,new Set([t]))};if(i(this,t),this.IN())for(const e of this.CN())i(e);if(s)for(const r of this.pB())i(r)}vCt(){if(!this.uk().$L())throw new Error("object does not support scene graph")}SB(){return null!==this.nB()}nB(){const t=this.nO();if(!t)return null;const s=t.nB();return s?s.RW():null}aB(){const t=this.nO();if(!t)return null;const s=t.aB();return s?s.RW():null}*uB(){const t=this.nO();if(t)for(const s of t.uB())yield s.RW()}MCt(t){if(t)for(const s of this.children())if(s===t)return!0;return!1}eq(){const t=this.nO();return!!t&&t.eq()}GCt(t){const s=this.nO();if(!s)return[];const i=t.Wc();return s.rX().map(t=>t.RW()).filter(t=>t.mN().Wc()===i)}rX(){const t=this.nO();return t?t.rX().map(t=>t.RW()):[]}*children(){const t=this.nO();if(t)for(const s of t.children())yield s.RW()}*pB(){const t=this.nO();if(t)for(const s of t.pB())yield s.RW()}cB(){const t=this.nO();return t?t.cB():0}xCt(){return[...this.uB()].length}Ovt(){const t=this.nO();return t?t.Ovt():0}dB(t){const s=this.nO();if(!s)return null;const i=s.dB(t);return i?i.RW():null}TCt(){const t=this.nO();if(!t)return NaN;const s=t.nB();return s?s._Ct(t):NaN}ICt(t){for(const s of this.nO().rX())if(s.RW().EN()===t)return!0;return!1}gB(t,s){this.vCt(),t.vCt(),this.nO().gB(t.nO(),s||{})}yB(t){const s=this.nO();s&&s.yB(t.nO())}BB(){const t=this.nO();return!!t&&t.BB()}D$(){const t=this.nO();if(t){const s=t.CCt();if(s)for(const i of s){const e=this.$c.sO(i[2]);if(e){const h=i[3];this.gB(e,{vB:!!(h>>0&1),GB:!!(h>>1&1),TB:!!(h>>2&1),IB:!!(h>>3&1),EB:!!(h>>4&1),NB:!!(h>>5&1),PB:!!(h>>6&1),DB:!!(h>>7&1),LB:!!(h>>8&1)})}}}}O$(t,s){const i=t.get(this);if(i)for(const e of i.sceneGraphJson.children){const h=s.get(e.index);if(h){const r=e.flags;this.gB(h,{vB:!!(r>>0&1),GB:!!(r>>1&1),TB:!!(r>>2&1),IB:!!(r>>3&1),EB:!!(r>>4&1),NB:!!(r>>5&1),PB:!!(r>>6&1),DB:!!(r>>7&1),LB:!!(r>>8&1)})}}}PN(){const t=this.$c.ECt();return t?t.lut(this):""}IN(){return null!==this.XIt}$$(t){this.XIt.push(t)}TN(){return this.XIt}RCt(t){return!!this.PCt(t)}PCt(t){const s=this.CN();if(null===s||0===s.length)return!1;for(const i of s)if(i.mN()===t)return i;return null}CN(){return this.XIt}Vpt(){for(const t of this.CN())t.mN().vk().rft(t)}BSt(){for(const t of this.CN())t.mN().vk().Qct(t)}WSt(t){for(const s of this.CN())s.mN().vk().eft()[t]=s}HSt(){for(const t of this.CN())t.mN().vk().tft(t)}jSt(t){for(const s of this.CN())s.mN().vk().hft()[t]=s}uk(){return this.BIt.uk()}vIt(t){this.HIt=t}J$(){return this.BIt.X$(),this.HIt}EN(){return this.VIt}ACt(){return this.UIt}FCt(t){t?this.NN(new Set(t)):this.zIt=null}NN(t){if(0===t.size)this.zIt=null;else{this.zIt?this.zIt.clear():this.zIt=new Set;for(const s of t)this.zIt.add(s)}}LN(){return this.zIt??new Set}h2t(){return Array.from(this.LN()).join(" ")}o2t(t){t=Math.floor(t);for(const s of this.LN()){if(0===t)return s;--t}return""}uht(){return this.qIt}DCt(t){if(t)for(const s of this.qIt)if(s.a6()instanceof t)return s;return null}bat(t){if(!t)return null;const s=this.DCt(t);return s?s.s6():null}aht(i){const e=this.qIt;for(let t=0,s=e.length;t<s;++t)if(e[t].c6().Oz()===i)return t;return-1}OCt(){return this.JIt}hIt(){return this.BIt.hIt()}LCt(){return this.JIt.length}brt(t){const s=this.JIt;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}rwt(t){return this.JIt[t]}kCt(t){const s=this.JIt[t];return 0===this.BIt.Nst(t)?!!s:s}vrt(t,s){const i=this.JIt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=this.BIt.Nst(t);switch(e){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}fnt(t,s){if(0!==s){const i=this.JIt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}}ASt(){let t=b.get(this);return t||(t=new Map,b.set(this,t)),t}FSt(){let t=e.get(this);return t||(t=new Map,e.set(this,t)),t}NCt(t){const s=this.mN();if(s.BF().Of(t))return!0;for(const i of s.S1t())if(i.BF().Of(t))return!0;return!!this.$c.BF().Of(t)}Ck(){const t=new Set,s=(t.add(this),this.nO());if(s&&s.eq())for(const i of this.pB())if(t.add(i),i.IN())for(const e of i.CN())t.add(e);if(this.IN())for(const h of this.CN())t.add(h);for(const r of t.values())r.L$()}BCt(){this.BIt.LIt()&&this.iO();for(const t of this.qIt)t.Cxt()}WCt(){this.BCt()}L$(){if(this.BCt(),this.NCt("instancecreate")){const t=this.mN(),s=new S.Event("instancecreate");s.f6=this.iO(),t.bX(s);for(const i of t.S1t())i.bX(s);this.$c.bX(s)}this.$c.t4(this.uk().Edt().j$.l2t,this,null)}jCt(){this.$c.t4(this.uk().Edt().j$.c2t,this,null)}HCt(t){if(this.jIt){const s=new S.Event("destroy");s.VCt=t,this.bX(s)}if(this.NCt("instancedestroy")){const i=this.mN(),e=new S.Event("instancedestroy");e.f6=this.iO(),e.VCt=t,i.bX(e);for(const h of i.S1t())h.bX(e);this.$c.bX(e)}}UCt(){return this.WIt?this.WIt.CGt():this.jIt.d4()}gv(t="full",s=null){const i={},e=("full"===t?i.uid=this.EN():i.c3=!0,this.LN());if(0<e.size&&(i.tags=Array.from(e)),"visual-state"!==t){const r=b.get(this);if(r&&r.size&&(i.ex=S.Ro(r)),-1!==this.SD()&&(i.mts=this.SD()),0<this.BIt.V_t()){const n={},o=this.BIt.iIt();for(let t=0,s=this.JIt.length;t<s;++t)n[o[t].toString()]=this.JIt[t];i.ivs=n}if(this.qIt.length){const a={};for(const u of this.qIt){const l=u.gv(t);l&&(a[u.c6().Oz().toString()]=l)}i.behs=a}}this.ust&&(i.w=this.ust.QJ(t,s));const h=this.WIt?this.WIt.gv():this.jIt.m4();return h&&(i.data=h),i}gK(t="full",s){this.ust&&this.ust.gK(t)}wK(t,s="full",i=null){this.ust&&this.ust.wK(t,s,i)}zCt(t,s="full",i=null){this.ust&&this.ust.zCt(t,s,i)}OIt(){this.uk().NL()&&this.ust.OIt()}yv(s,t="full",i){if("full"===t)this.VIt=s.uid;else if(!s.c3)return;if(this.FCt(s.tags),"visual-state"!==t){let t=b.get(this);t&&(t.clear(),b.delete(this));const h=s.ex,r=(h&&(t=S.Po(h),b.set(this,t)),this.KIt=s.hasOwnProperty("mts")?s.mts:-1,s.ivs);if(r)for(const[n,o]of Object.entries(r)){const a=parseInt(n,10),u=this.BIt.eIt(a);if(!(u<0||u>=this.JIt.length)){let t=o;null===t&&(t=NaN),this.JIt[u]=t}}}if(this.uk().NL()){const l=s.w;if(l){const c=l.l;if(this.ust.oO().Oz()!==c){const f=this.ust.oO(),d=f.HD().Zq(c);d?(this.ust.cO(d),f.yz(this,!0),d.pz(this,!0),d.fO(this),this.ust.R4()):"full"===t&&this.$c.MN(this)}this.ust.tq(l,t)}}if("visual-state"!==t){const p=s.behs;if(p)for(const[m,g]of Object.entries(p)){const y=parseInt(m,10),w=this.aht(y);w<0||w>=this.qIt.length||this.qIt[w].yv(g,t)}}const e=s.data;e&&(this.WIt?this.WIt.yv(e,t):this.jIt.g4(e))}iO(){return this.jIt||this.rCt()}AGt(){return!!this.jIt}rCt(t,s){const i=this.ust?t?self.sj:self.KB:t?self.HN:self.dN,e=t||this.WIt.WMt(),h=this.BIt.LIt(),r=h||e||i,n=this.uk()._St();if(S.FL.VMt(this,n),S.FL.Uxt(s),this.jIt=new r,S.FL.zxt(),S.FL.UMt(n),e&&!(this.jIt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(h){const o=e||i;if(!(this.jIt instanceof o))throw new TypeError(`setInstanceClass(): class '${h.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.jIt}gN(t){if(0!==this.JIt.length){const i={},e=this.BIt.rIt();for(let t=0,s=e.length;t<s;++t)i[e[t]]={configurable:!1,enumerable:!0,get:S.Instance.prototype.kCt.bind(this,t),set:S.Instance.prototype.vrt.bind(this,t)};const s=Object.create(Object.prototype,i);t.JCt={value:s,writable:!1}}}yN(t){const s=this.qIt;if(0!==s.length){const i={};for(const h of s)i[h.c6().f1t()]={value:h.lGt(),writable:!1};const e=Object.create(Object.prototype,i);t.Ept={value:e,writable:!1}}}bX(t){if(this.AGt()){const s=this.iO(),i=(t.f6=s,this.$c),e=i.vX()&&!i.VF().Ek();e&&h.StartMeasuringScriptTime(),s.dispatchEvent(t),e&&h.AddScriptTime()}}}}{const wa=self.Os;wa.aX=class extends wa.Qh{constructor(e){super(),this.xv=e,this.Xpt=null,this.qCt=[],this.$Ct=e.Xp(),this.XCt=e.om(),this.KCt=1,this.YCt=1,this.ZCt=0,this.QCt=1,this.tEt=e.mR(),this.sEt=null,this.iEt=null,this.eEt=NaN,this.hEt=!1,this.nq=NaN,this.oq=NaN,this.rEt=t=>{if(t.f6===this.Xpt.RW()){const s=e.IO(),i=(s.Rf().removeEventListener("instancecreate",this.rEt),this.Xpt.RW().s6());this.hEt=!!i.Qst(),this.nq=this.hEt?i.Zst():NaN,this.oq=this.hEt?i.sit():NaN}}}er(){this.Xpt=null,this.sEt=null,this.iEt=null,this.eEt=NaN,this.hEt=!1,this.nq=NaN,this.oq=NaN,wa.Pn(this.qCt)}nEt(t){if(this.QCt=this.xv.mR(),this.tEt=this.QCt,this.Xpt=t,this.ZCt=t?t.jk():0,this.Xpt){const s=this.xv,i=s.IO(),e=this.Xpt.RW().uk()._St();if(e<2){const h=this.Xpt.RW().s6();h?(this.hEt=!!h.Qst(),this.nq=this.hEt?h.Zst():NaN,this.oq=this.hEt?h.sit():NaN):this.Xpt.RW().Dj()||i.Rf().addEventListener("instancecreate",this.rEt)}else this.hEt=!1,this.nq=NaN,this.oq=NaN}else this.hEt=!1,this.nq=NaN,this.oq=NaN}nB(){return this.Xpt}eq(){return 0<this.qCt.length}rX(){return this.qCt}oEt(){this.eq()&&1!==this.qCt.length&&(this.iEt?this.qCt.sort((t,s)=>{const i=this.iEt.get(t.RW()),e=this.iEt.get(s.RW());return wa.le(i)&&wa.le(e)?i-e:0}):this.qCt.sort((t,s)=>{const i=t.Prt().aEt(),e=s.Prt().aEt();return wa.le(i)&&wa.le(e)?i-e:0}))}aEt(){return this.eEt}Art(){return this.KCt}uEt(t){this.KCt=t}Drt(){return this.YCt}lEt(t){this.YCt=t}Hrt(){return this.tEt}rvt(){return this.QCt}cEt(t){this.QCt=t}Rrt(){return 0===this.$Ct?Number.EPSILON:this.$Ct}Frt(){return 0===this.XCt?Number.EPSILON:this.XCt}fEt(){if(this.xv._B()){let t=this.Xpt,s=t.Xp(),i=t.Prt().Rrt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.hEt?1+s/this.nq:s/i}return 1}dEt(){if(this.xv.CB()){let t=this.Xpt,s=t.om(),i=t.Prt().Frt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.hEt?1+s/this.oq:s/i}return 1}pEt(){return 0}mEt(){return{sw:this.$Ct,sh:this.XCt,sx:this.KCt,sy:this.YCt,psa:this.ZCt,oo:this.QCt,so:this.tEt,pi:this.xv.RW().TCt()}}QJ(t,s=null){const i=this.mEt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.gEt(t),c:this.yEt(t)})}wEt(t){let s="";return t.MB()&&(s+="x"),t.xB()&&(s+="y"),t._B()&&(s+="w"),t.CB()&&(s+="h"),t.RB()&&(s+="a"),t.AB()&&(s+="z"),t.BB()&&(s+="d"),t.OB()&&(s+="o"),t.kB()&&(s+="v"),s}gEt(t){return this.Xpt&&this.Xpt.RW()&&!this.Xpt.RW().Dj()?this.SEt(this.Xpt,this.xv,t):null}yEt(s){return this.qCt.map(t=>this.SEt(t,t,s)).filter(t=>t)}SEt(t,s,i){const e=t.RW();if(e&&e.Dj())return null;const h={};return h.uid=e.EN(),h.f=this.wEt(s),h.offsets=s.bEt(),h.data=wa.aX.vEt(e),h.oci=e.mN().fF(),"state"===i?(h.inst=e.gv("full",{selfOnly:!0}),h.instIndex=NaN):(h.instIndex=e.mN().bk().indexOf(e),h.inst=null),h}tq(t){this.$Ct=t.sw,this.XCt=t.sh,this.KCt=t.sx,this.YCt=t.sy,this.ZCt=t.psa,this.QCt=t.oo,this.tEt=t.so,this.eEt=wa.le(t.pi)?t.pi:NaN}MEt(t,s){if(!t&&!s&&this.sEt)for(const i of this.sEt)i.Dj()||i.SB()||i.IO().MN(i);this.sEt=t,this.iEt=s}wK(t,s){const i=this.xv,e=i.IO(),h=new Set;if(t.p&&!this.Xpt){const o=t.p.uid,a=e.sO(o);if(s?.b2t,a){const u=a.nO();if(a.MCt(i.RW()))this.Xpt=u;else{a.ICt(i.RW().EN())?e.MN(i.RW()):a.gB(i.RW(),this.GEt(t.p.f)),h.has(i)||(i.xEt(t.p.offsets),this.TEt(a,t.p,s)),h.add(i);const l=a.nO();l.Prt().oEt()}}else if(wa.le(t.p.oci)){const c=e.ez(t.p.oci),f=(e.zyt(),e.Tk(c,i.oO(),0,0,!0));if(s?.b2t,f){const d=this._Et(t.p,e),p=(d&&f.yv(d),f.nO()),m=(p.oO()._k(f),f.gB(i.RW(),this.GEt(t.p.f)),f.nO());m.Prt().oEt()}}}const r=[];for(const g of t.c){const y=g.uid,w=e.sO(y);w&&r.push(w)}let n=0;for(const S of t.c){const b=S.uid,v=e.sO(b);if(s?.b2t,v){if(this.sEt){if(this.sEt.includes(v)){const T=v;if(T.mN()!==v.mN()){n++;continue}if(T.Dj()){n++;continue}const _=t.c[n];if(!s?.b2t&&this.IEt(T,r,i)){this.CEt(n,_,i,h,s),n++;continue}if(T.SB()&&T.nB()!==i.RW()){const I=this.EEt(_,s);this.REt(I,_,h,s),n++;continue}this.REt(T.nO(),_,h,s,!0),n++;continue}if(this.sEt[n]){const C=this.sEt[n];if(C.mN()!==v.mN()){n++;continue}if(C.Dj()){n++;continue}const E=t.c[n];if(!s?.b2t&&this.IEt(C,r,i)){this.CEt(n,E,i,h,s),n++;continue}if(C.SB()&&C.nB()!==i.RW()){const R=this.EEt(E,s);this.REt(R,E,h,s),n++;continue}this.REt(C.nO(),E,h,s,!0),n++;continue}}const M=v.mN(),G=this.PEt(r,M),x=i.RW().GCt(M).length;if(G===x){const P=i.RW().dB(n);if(P){const A=P.nO();A&&(h.has(A)||(A.xEt(S.offsets),this.TEt(P,S,s)),h.add(A))}n++;continue}if(v.SB()&&v.nB()!==i.RW()){const F=this.EEt(S,s);this.REt(F,S,h,s),n++;continue}this.REt(v.nO(),S,h,s)}else if(this.sEt&&this.sEt[n]){const D=this.sEt[n],L=e.ez(this.AEt(S));if(D.mN()!==L){n++;continue}if(D.Dj()){n++;continue}const O=t.c[n];if(!s?.b2t&&this.IEt(D,r,i)){this.CEt(n,O,i,h,s),n++;continue}if(D.SB()&&D.nB()!==i.RW()){const k=this.EEt(O,s);this.REt(k,O,h,s),n++;continue}this.REt(D.nO(),O,h,s)}else{const N=this.EEt(S,s);this.REt(N,S,h,s)}n++}}IEt(t,s,i){const e=t.mN(),h=this.PEt(s,e),r=i.RW().GCt(e).length;return h===r}CEt(t,s,i,e,h){const r=i.RW().dB(t,s);if(r){const n=r.nO();n&&(e.has(n)||(n.xEt(s.offsets),this.TEt(r,s,h)),e.add(n))}}GEt(t){const s={};return s.vB=t.includes("x"),s.GB=t.includes("y"),s.TB=t.includes("w"),s.IB=t.includes("h"),s.EB=t.includes("a"),s.PB=t.includes("z"),s.NB=t.includes("d"),s.DB=t.includes("o"),s.LB=t.includes("v"),s}AEt(t){return wa.le(t.oci)?t.oci:t[1]}EEt(e,h){if(wa.le(e.oci)){let t=this.xv,s=t.IO(),i;if(e.data)i=s.fz(e.data,t.oO(),!1,0,0,!1,!0);else{const r=s.ez(e.oci);i=s.Tk(r,t.oO(),0,0,!0)}if(h?.b2t,i){const n=this._Et(e,s),o=(n&&i.yv(n),i.nO());return o.oO()._k(i,!0),o}}}REt(t,s,i,e,h=!0){const r=this.xv,n=r.gB(t,this.GEt(s.f));n&&h&&(i.has(t)||(t.xEt(s.offsets),this.TEt(t.RW(),s,e)),i.add(t)),this.oEt()}TEt(t,s,i){let e=this._Et(s,this.xv.IO());e&&((e=JSON.parse(JSON.stringify(e))).w=null,t.yv(e))}PEt(t,s){return t.filter(t=>t.mN().Wc()===s.Wc()).length}_Et(t,s){if(wa.le(t.instIndex)){const i=s.ez(t.oci),e=i.FIt();return e?e[t.instIndex]:null}return wa.ve(t.inst)?JSON.parse(t.inst):t.inst||void 0}static vEt(t){let s=t.nO().oO().az(t.EN());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const e of[...t.rX()]){const h=e.nO();i.push([h.HD().Oz(),h.oO().fF(),e.EN(),wa.aX.nX(h),e.mN().IN()?1:0,h.aO(),wa.aX.vEt(e)])}return wa.Le(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=wa.aX.FEt(),s[0][14][1]=i,s[0][14][2]=t.nO().aO()),s}static nX(t){let s=0;return(s|=Number(t.kB())<<8)|Number(t.OB())<<7|Number(t.AB())<<6|Number(t.BB())<<5|Number(t.RB())<<4|Number(t.CB())<<3|Number(t._B())<<2|Number(t.xB())<<1|Number(t.MB())<<0}static FEt(t){let s=0;return s,511}}}{let d=self.Os,t=self.ws,r=(t._s,d.ir(d.Rect)),n=d.ir(d.Hu),s=d.ir(d.Event,"bboxchange",!1),f=d.ir(d.Oo,0,0,0,0),l=d.ir(d.Ml),i=d.ir(d.Oo,1,1,1,1),o=d.ir(d.Rect,0,0,-1,-1),h=d.ir(d.Rect,0,0,-1,-1),p=new Set(["absolute","relative"]),e=[],m=!0,g=new WeakMap,a=new WeakMap;d.YIt=class extends d.Qh{constructor(t,s){super(),this.vi=t,this.Lct=t.mN(),this.$c=t.IO(),this.DEt=s,this.Lct.CIt(this,null,s),this.OEt=-1,this.LEt=-1,this.qSt=196635,this.Lct.uk().HL()&&(this.qSt|=128),this.Va=NaN,this.Ua=NaN,this.jb=NaN,this.kEt=NaN,this.NEt=NaN,this.iM=NaN,this.Bo=NaN,this.BEt=NaN,this.WEt=NaN,this.jEt=NaN,this.HEt=NaN,this.VEt=d.ir(d.Rect),this.UEt=d.ir(d.Hu),this.zEt=h,this.JEt=o,this.qEt=null,this.$Et=null,this.XEt=null,this.Wb=i,this.KEt=i,this.YEt=null,this.ZEt=null,this.vi.mN().oIt()&&(this.ZEt=d.ir(d.QEt,this.vi,this)),this.tRt=null,this.sEt=null,this.iEt=null,this.sRt=-1,this.iRt=null}lCt(){this.qSt|=256}er(){if(this.Lct.CIt(this,this.DEt,null),this.YEt&&(this.$c.Gb().$w(this.YEt),this.YEt=null),this.qEt=null,this.$Et&&(this.$Et.eRt.er(),this.$Et=null),this.XEt&&(this.XEt.clear(),this.XEt=null),this.VB(),this.ZEt&&this.ZEt.er(),this.SB()&&this.nB().yB(this),this.eq()){const t=[...this.rX()];for(const s of t)this.yB(s)}this.hRt(),this.rRt(),g.delete(this),a.delete(this),this.vi=null,this.Lct=null,this.$c=null,this.DEt=null}QIt(t){if(m=!1,this.P4(t[0],t[1]),this.av(t[2]),this.WI(t[3],t[4]),this.iM=0,this.HL()?this.Wk(t[6]):this.Bo=0,f.Aa(t[7]),this.nRt(f),this.Urt(t[8]),this.Jrt(t[9]),this.Vb(t[10]),this.ZEt&&this.ZEt.oRt(t[12]),t[14]&&g.set(this,{aRt:t[14][1],uRt:t[14][2]}),t[15]){const s=t[15],e=(this.jB(s[0],s[1]),this.$B()),h=s[2];for(let i=0,t=h.length;i<t;++i){const r=h[i];for(let t=0,s=r.length;t<s;++t){const n=r[t],o=e.Vv(t,i);o.sv(n[0]),o.nv(n[1]),o.av(n[2]),o.lv(n[3]),o.dv(n[4])}}}if(t[16]){const i=t[16][0],a=t[16][1],u=!!a,l=!u,c=this.$c.ECt();u&&c&&c.uut(this.RW(),a),l&&c&&c.uut(this.RW(),i)}m=!0,this.lRt()}tCt(){this.Va=0,this.Ua=0,this.jb=0,this.kEt=0,this.NEt=0,this.iM=0,this.Bo=0,this.BEt=0,this.WEt=1,this.jEt=0,this.HEt=0,this.lRt()}IO(){return this.$c}mN(){return this.Lct}RW(){return this.vi}cRt(){return this.RB()?this.fRt(this.nB().dRt()-this.tRt.pEt()):0}sv(t){if(t=+t,this.MB()){const s=this.tRt,i=t-this.tv(),e=-this.cRt();0==e?this.Va+=i/s.fEt():(this.Va+=Math.cos(e)*i/s.fEt(),this.xB()&&(this.Ua+=Math.sin(e)*i/s.dEt()))}else this.Va=t}_rt(t,s=!1){t=+t,!s&&this.MB()?this.sv(this.tv()+t):this.Va+=t}tv(){if(this.MB()){let t=this.Va,s=this.tRt,i=this.nB(),e=this.cRt();return 0===e?t*=s.fEt():(t=t*s.fEt()*Math.cos(e),this.xB()&&(t-=this.Ua*s.dEt()*Math.sin(e))),i.tv()+t}return this.Va}nv(t){if(t=+t,this.xB()){const s=this.tRt,i=t-this.rv(),e=-this.cRt();0==e?this.Ua+=i/s.dEt():(this.MB()&&(this.Va-=Math.sin(e)*i/s.fEt()),this.Ua+=Math.cos(e)*i/s.dEt())}else this.Ua=t}Irt(t,s=!1){t=+t,!s&&this.xB()?this.nv(this.rv()+t):this.Ua+=t}rv(){if(this.xB()){let t=this.Ua,s=this.tRt,i=this.nB(),e=this.cRt();return 0===e?t*=s.dEt():(t=t*s.dEt()*Math.cos(e),this.MB()&&(t+=this.Va*s.fEt()*Math.sin(e))),i.rv()+t}return this.Ua}P4(t,s){if(t=+t,s=+s,this.pRt()){const i=this.MB(),e=this.xB(),h=this.tRt,r=t-this.tv(),n=s-this.rv(),o=-this.cRt();if(0==o)i?this.Va+=r/h.fEt():this.Va=t,e?this.Ua+=n/h.dEt():this.Ua=s;else{const a=Math.sin(o),u=Math.cos(o);i?this.Va+=e?(u*r-a*n)/h.fEt():u*r/h.fEt():this.Va=t,e?this.Ua+=i?(a*r+u*n)/h.dEt():u*n/h.dEt():this.Ua=s}}else this.Va=t,this.Ua=s}mRt(){return[this.tv(),this.rv()]}D4(t,s){t=+t,s=+s,this.pRt()?this.P4(this.tv()+t,this.rv()+s):(this.Va+=t,this.Ua+=s)}Obt(t,s){return this.tv()===t&&this.rv()===s}av(t){if(t=+t,this.AB()&&(t-=this.nB().ov()),this.jb!==t){this.jb=t,this.gRt();const s=this.oO();0!==this.jb&&s.bz(),s.fO(this)}}gRt(){if(this.lRt(),this.eq()){const i=this.rX();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.AB()&&e.gRt()}}}qrt(t){this.av(this.ov()+t)}ov(){return this.AB()?this.nB().ov()+this.jb:this.jb}L4(){return this.oO().ov()+this.ov()}Qst(){const t=this.RW().uk()._St();return t<2&&this.RW().s6().Qst()}hm(t){if(t=+t,this._B()){const s=this.Xp();0===s?this.kEt=Number.EPSILON:this.kEt*=t/s}else this.kEt=t;this.yRt()}Am(t,s){t=+t,!s&&this._B()?this.hm(this.Xp()+t):this.kEt+=t,this.yRt()}Xp(){if(this._B()){const t=this.nB(),s=t.Xp(),i=t.Prt().Rrt();return i===Number.EPSILON?(this.Prt().Rrt()+s)*this.kEt:s*this.kEt}return this.kEt}Kp(t){if(t=+t,this.CB()){const s=this.om();0===s?this.NEt=Number.EPSILON:this.NEt*=t/s}else this.NEt=t;this.yRt()}Ort(t,s){t=+t,!s&&this.CB()?this.Kp(this.om()+t):this.NEt+=t,this.yRt()}om(){if(this.CB()){const t=this.nB(),s=t.om(),i=t.Prt().Frt();return i===Number.EPSILON?(this.Prt().Frt()+s)*this.NEt:s*this.NEt}return this.NEt}WI(t,s){if(t=+t,s=+s,this._B()){const i=this.Xp();0===i?this.kEt=Number.EPSILON:this.kEt*=t/i}else this.kEt=t;if(this.CB()){const e=this.om();0===e?this.NEt=Number.EPSILON:this.NEt*=s/e}else this.NEt=s;this.yRt()}ql(){return[this.Xp(),this.om()]}AJ(){return this.iM}wRt(t){if(t<0)throw new RangeError("invalid depth");this.iM=t}SRt(){if(this.SB()){const t=this.tRt;return Math.min(t.fEt(),t.dEt())}return 1}HL(){return 0!=(128&this.qSt)}Wk(t){t=+t,this.HL()&&(this.RB()&&(t-=this.nB().jk()),t=d.cr(t),this.Bo!==t)&&(this.Bo=t,this.yRt())}Lrt(t){0!=(t=+t)&&this.HL()&&(this.Bo=d.cr(this.Bo+t),this.yRt())}yRt(){if(this.qSt|=1<<18,this.eq()){const i=this.rX();for(let t=0,s=i.length;t<s;t++)i[t].yRt()}}jk(){return this.RB()&&this.HL()?this.fRt(d.cr(this.nB().dRt()+this.Bo)):this.Bo}dRt(){return this.RB()&&this.HL()?d.cr(this.nB().dRt()+this.Bo):this.Bo}fRt(t){return this._B()&&this.aB().Xp()<0&&(t=d.cr(d.Tr(t,this.aB().jk()+Math.PI))),this.CB()&&this.aB().om()<0?d.Tr(t,this.aB().jk()):t}bRt(){const t=this.nB();return!!(this._B()&&t.Xp()<0)||!!(this.CB()&&t.om()<0)}vRt(){const t=this.nB();return!!(this._B()&&t.Xp()<0&&this.CB()&&t.om()<0)}MRt(){const t=this.qSt;if(0!=(t&1<<18)){const s=this.jk();this.BEt=Math.sin(s),this.WEt=Math.cos(s),this.qSt=-262145&t}}Wbt(){return this.MRt(),this.BEt}Bbt(){return this.MRt(),this.WEt}Urt(t){this.jEt=+t}Vrt(t){this.jEt+=+t}H6(){return this.jEt}Jrt(t){this.HEt=+t}zrt(t){this.HEt+=+t}U6(){return this.HEt}nRt(t){this.Wb.equals(t)||(this.Wb===i?(this.Wb=d.ir(d.Oo,t),this.KEt=d.ir(d.Oo,t),this.KEt.la()):t.na(1,1,1,1)?(this.Wb=i,this.KEt=i):(this.Wb.set(t),this.KEt.set(t),this.KEt.la()),this.lRt())}yR(t){if(t=d.lr(+t,0,1),this.OB()){if(this.Prt().rvt()===t)return;this.Prt().cEt(t),t=this.mR()}else if(this.Wb.a===t)return;this.GRt(t)}xRt(){if(this.eq()){const i=this.rX();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.GRt(e.mR())}}}GRt(t){f.$o(this.Wb),f.a=t,this.nRt(f),this.xRt()}Brt(t){this.OB()?this.yR(this.Prt().rvt()+t):this.yR(this.mR()+t)}mR(){return this.OB()?this.nB().mR()*this.Prt().rvt():this.Wb.a}J4(t){this.Wb.ea(t)||(f.$o(t),f.a=this.mR(),this.nRt(f))}wrt(t,s,i){f.jo(t,s,i),this.J4(f)}TRt(t,s,i){0===t&&0===s&&0===i||(f.$o(this.Wb),f.r+=t,f.g+=s,f.b+=i,this.J4(f))}z4(){return this.Wb}WU(){return this.KEt}BB(){return 0!=(512&this.qSt)}_Rt(t){this.IRt(512,t)}MB(){return 0!=(1024&this.qSt)}CRt(t){this.IRt(1024,t)}xB(){return 0!=(2048&this.qSt)}pRt(){return 0!=(3072&this.qSt)}ERt(t){this.IRt(2048,t)}_B(){return 0!=(4096&this.qSt)}RRt(t){this.IRt(4096,t)}CB(){return 0!=(8192&this.qSt)}PRt(t){this.IRt(8192,t)}RB(){return 0!=(16384&this.qSt)}ARt(t){this.IRt(16384,t)}AB(){return 0!=(32768&this.qSt)}FRt(t){this.IRt(32768,t)}OB(){return 0!=(this.qSt&1<<22)}DRt(t){this.IRt(1<<22,t)}kB(){return 0!=(this.qSt&1<<23)}ORt(t){this.IRt(1<<23,t)}LRt(){this.qSt&=-12647937}gB(t,s){if(t===this)return!1;if(t.SB())return!1;if(this.kRt(t))return!1;if(this.NRt(t))return!1;const i=t.tv(),e=t.rv(),h=t.Xp(),r=t.om(),n=t.jk(),o=t.ov(),a=t.mR(),u=(t.BRt(this),t.CRt(s.vB),t.ERt(s.GB),t.RRt(s.TB),t.PRt(s.IB),t.ARt(s.EB),t.FRt(s.PB),t.DRt(s.DB),t.ORt(s.LB),t._Rt(s.NB),i-this.tv()),l=e-this.rv(),c=-this.jk(),f=Math.cos(c),d=Math.sin(c);if(s.vB&&(s.EB?t.Va=u*f-l*d:t.Va=u,s.TB)){const p=this.Xp()/this.tRt.Rrt();0!=p&&(t.Va/=p)}if(s.GB&&(s.EB?t.Ua=u*d+l*f:t.Ua=l,s.IB)){const m=this.om()/this.tRt.Frt();0!=m&&(t.Ua/=m)}if(s.TB){const g=this.Xp();0===g||g===Number.EPSILON?(t.kEt=1,t.tRt.uEt(1)):(t.kEt=h/this.Xp(),t.tRt.uEt(t.kEt))}if(s.IB){const y=this.om();0===y||y===Number.EPSILON?(t.NEt=1,t.tRt.lEt(1)):(t.NEt=r/this.om(),t.tRt.lEt(t.NEt))}return s.EB&&(t.Bo=n-this.jk()),s.PB&&(t.jb=o-this.ov()),s.DB&&t.tRt.cEt(a),s.LB&&t.G5(this.T5()),this.WRt(t),this.R4(),this.xRt(),!0}yB(t){if(t.nB()===this){const s=t.tv(),i=t.rv(),e=t.Xp(),h=t.om(),r=t.jk(),n=t.ov(),o=t.mR();t.BRt(null),t.LRt(),t.P4(s,i),t.WI(e,h),t.Wk(r),t.av(n),t.yR(o),this.jRt(t),this.R4()}}HRt(){return this.sRt}VRt(){this.URt();const t=[...this.children()];for(const i of t)this.yB(i);const s=this.nB();s&&s.yB(this),this.LRt()}URt(){if(this.zRt(),!this.sEt){const s=[...this.children()];s.length&&(this.sEt=[],this.iEt=new WeakMap);let t=0;for(const i of s){const e=i.RW();this.sEt.push(e),this.iEt.set(e,t),t++}}const t=this.nB();t&&t.URt()}zRt(){if(-1===this.sRt){const t=[...this.uB()];this.sRt=t.length;for(const i of t)i.zRt();const s=[...this.children()];for(const e of s)e.zRt()}}rRt(){this.sEt&&(this.sEt.length=0),this.sEt=null,this.iEt=null;const t=this.nB();t&&t.rRt(),this.sRt=-1}SB(){return null!==this.nB()}nB(){const t=this.tRt;return null!==t?t.nB():null}aB(){let t=this;for(;t.SB();)t=t.nB();return t}*uB(){let t=this.nB();for(;t;)yield t,t=t.nB()}MCt(t){return this.rX().includes(t)}eq(){const t=this.tRt;return null!==t&&t.eq()}rX(){const t=this.tRt;return null!==t?t.rX():e}children(){return this.rX()}*pB(){for(const t of this.children())yield t,yield*t.pB()}cB(){return this.rX().length}Ovt(){return[...this.pB()].length}dB(t){const s=this.rX();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}_Ct(s){if(s){const i=this.rX();if(i)for(let t=0;t<i.length;t++)if(s===i[t])return t}return NaN}JRt(t){this.tRt||(this.tRt=d.ir(d.aX,this)),t&&this.tRt.nEt(t)}Prt(){return this.tRt}hRt(){this.tRt&&(this.tRt.er(),this.tRt=null)}BRt(t){t?(t.JRt(null),this.JRt(t)):(this.tRt&&this.tRt.nEt(null),this.eq()||this.hRt())}NRt(t){if(!this.SB())return!1;const s=this.nB();return s===t||s.NRt(t)}kRt(t){if(this.MCt(t))return!0;for(const s of this.rX())if(s.kRt(t))return!0;return!1}WRt(t){this.tRt.rX().push(t)}jRt(t){const s=this.tRt.rX(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.SB()||this.hRt(),t.eq()||t.hRt()}CCt(){const t=g.get(this);return t?t.aRt:null}qRt(){const t=g.get(this);return t?t.uRt:NaN}iq(){const t=a.get(this);return d.le(t)?t:NaN}$Rt(t){a.set(this,t)}XRt(){this.IRt(1<<19,!0),this.lRt()}lRt(){if(m){const s=this.$c.Gb();this.YEt&&s.$w(this.YEt);let t;t=0!=(this.qSt&1<<19)?s.Rw()||"<point>":s.Iw()||"<default>",this.YEt=s.Uw(t,this.K5(),this.KEt,this.ov())}}BJ(){return this.YEt}Bz(){return this.Wb===i}Vb(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.K5()!==t&&(this.qSt=this.qSt&~(31<<26)|t<<26,this.lRt())}K5(){return(this.qSt&31<<26)>>26}cO(t,s){const i=s&&this.DEt!==t;i&&this.wz(),this.Lct.CIt(this,this.DEt,t),this.DEt=t,i&&this.KRt(),0!==this.ov()&&this.DEt.bz()}oO(){return this.DEt}HD(){return this.oO().HD()}Mz(t){this.OEt=0|t}aO(){return this.DEt.A9(),this.OEt}L9(t){this.LEt=0|t}Cj(){return this.DEt.D9(),this.LEt}b7(){return this.OEt}IRt(t,s){s?this.qSt|=t:this.qSt&=~t}T5(){return 0!=(1&this.qSt)}G5(t){if(this.IRt(1,t),this.eq())for(const s of this.rX())s.kB()&&s.G5(t)}eB(){return 0!=(8&this.qSt)}hB(t){t=!!t,this.eB()!==t&&(this.IRt(8,t),t?this.R4():this.YRt())}ZRt(t,s){if(this.IRt(32,t),this.XEt&&this.XEt.clear(),s.trim()){this.XEt||(this.XEt=new Set);for(const i of s.split(" "))i&&this.XEt.add(i.toLowerCase())}else this.XEt=null}QRt(t){const s=0!=(32&this.qSt),i=this.XEt;if(t&&i)for(const e of i)if(t.has(e))return s;return!s}R4(){if(this.qSt|=65554,this.Lct.TIt(!0),this.$c.dO(),this.DEt.ZU()&&(this.tPt(this.VEt,this.UEt,!0),this.qSt&=-3,this.KRt()),0!=(4&this.qSt)&&this.vi.Rf().dispatchEvent(s),null!==this.tRt){const i=this.tRt.rX();for(let t=0,s=i.length;t<s;++t)i[t].R4()}}tPt(t,s,i){const e=this.tv(),h=this.rv(),r=this.Xp(),n=this.om(),o=this.jk();t.hu(e-this.jEt*r,h-this.HEt*n,r,n),i&&this.qB()&&this.sPt(t),0===o?s.ul(t):(t.offset(-e,-h),s.cl(t,this.Wbt(),this.Bbt()),s.offset(e,h),s.fl(t)),t.normalize()}iPt(){const t=this.qSt;0!=(2&t)&&(this.tPt(this.VEt,this.UEt,!0),this.qSt=-3&t)}B4(){return this.iPt(),this.VEt}j4(){return this.iPt(),this.UEt}ePt(t){const s=this.tv(),i=this.rv(),e=Math.round(s)-s,h=Math.round(i)-i;return 0==e&&0==h?t:(n._(t),n.offset(e,h),n)}hPt(t){this.VEt._(t),this.UEt.ul(this.VEt),this.qSt&=-3,this.IIt(),this.KRt()}rPt(t){this.IRt(4,t)}nPt(){return 0!=(4&this.qSt)}IJ(t,s,i){return s&&0!==this.AJ()?this.RJ(this.oO().EJ()):0===this.ov()||i?t.Lu(this.B4()):this.oPt()}oPt(){const t=this.oO(),s=this.L4();return!(s>=t.h9())&&(t.i9(s,r),r.Lu(this.B4()))}RJ(t){const s=this.B4(),i=s.fu(),e=s.pu(),h=s.du(),r=s.mu(),n=this.L4(),o=n+this.AJ();return t.iy(i,h,n,e,r,o)}V4(){const t=this.oO();if(t.g9())return this.RJ(t.EJ());{const s=t.HD();return this.IJ(t.tN(),s._J(),s.p5())}}LJ(t){this.IRt(1<<20,t)}OJ(t){this.IRt(1<<21,t)}aPt(){return 0!=(this.qSt&1<<20)}uPt(){return 0!=(this.qSt&1<<21)}lPt(t){this.qEt=t,this.cPt(),this.qB()&&(this.iRt.fPt=null)}dPt(){return this.qEt}pPt(){return null!==this.qEt||this.qB()}mPt(){return this.gPt(this.Xp(),this.om(),this.jk(),this.Wbt(),this.Bbt())}yPt(t,s,i){let e=0,h=1;return 0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.gPt(t,s,i,e,h)}gPt(h,r,t,n,o){let s=this.$Et;null===s&&(s={eRt:d.ir(d.Ml),width:NaN,height:NaN,angle:NaN},this.$Et=s);const a=s.eRt;if(s.width!==h||s.height!==r||s.angle!==t){const u=this.qEt;if(this.qB()){let t=this.H6(),s=this.U6(),i=this.$B(),e=this.iRt.fPt;e||(u?(l._(u),l.offset(t,s)):l.Rl(),e=i.qv(l),this.iRt.fPt=e),i.$v(e,a),a.offset(-t,-s),a.Dl(h,r,n,o)}else u?(a._(u),a.Dl(h,r,n,o)):a.Fl(this.j4(),-this.tv(),-this.rv());s.width=h,s.height=r,s.angle=t}return a}cPt(){this.wPt(!0);const t=this.$Et;null!==t&&(t.width=NaN)}jB(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.RW().uk().KL())throw new Error("object does not support mesh");this.VB(),this.iRt={SPt:d.ir(d.Vg.vv,t,s),bPt:d.ir(d.Vg.vv,t,s),fPt:null}}qB(){return null!==this.iRt}$B(){if(this.qB())return this.iRt.SPt;throw new Error("no mesh")}vPt(){if(this.qB())return this.iRt.bPt;throw new Error("no mesh")}MPt(t){this.IRt(65536,t)}GPt(){return 0!=(65536&this.qSt)}wPt(t){this.IRt(1<<17,t)}xPt(){return 0!=(this.qSt&1<<17)}sPt(t){const s=this.iRt.SPt,i=Math.min(s.kv(),0),e=Math.min(s.Nv(),0),h=Math.max(s.Bv(),1),r=Math.max(s.Wv(),1),n=t.width(),o=t.height();t.offsetLeft(i*n),t.offsetTop(e*o),t.Mu((h-1)*n),t.Gu((r-1)*o),this.iM=s.jv()}VB(){this.iRt&&(this.iRt.SPt.er(),this.iRt.bPt.er(),this.iRt=null,this.cPt())}zB(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!p.has(e))throw new Error("invalid mode");let h="relative"===e,r=i.x,n=i.y,o=i.H5,a="number"==typeof i.u?i.u:h?0:-1,u="number"==typeof i.v?i.v:h?0:-1;if(!this.qB())return!1;const l=this.$B(),c=l.Vv(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.ov()!==o&&(c.av(o),f=!0),h&&(r+=t/(l.Av()-1),n+=s/(l.Fv()-1)),a=-1!==a||h?(h&&(a+=t/(l.Av()-1)),d.lr(a,0,1)):c.uv(),u=-1!==u||h?(h&&(u+=s/(l.Fv()-1)),d.lr(u,0,1)):c.cv(),c.tv()===r&&c.rv()===n&&c.uv()===a&&c.cv()===u?f:(c.sv(r),c.nv(n),c.lv(a),c.dv(u),this.cPt(),!0)}uCt(){return this.vi.uCt()}rB(t,s){return!!this.B4().Nu(t,s)&&!!this.j4().Nu(t,s)&&(this.uCt()?this.vi.s6().$Gt(t,s):!this.pPt()||this.mPt().Nu(t-this.tv(),s-this.rv()))}TPt(){return 0!=(16&this.qSt)}IIt(){if(this.TPt()&&this.eB()&&0==(256&this.qSt)){const t=this.B4(),s=this.Lct.xIt(),i=this.zEt;if(r.set(s.k7(t.fu()),s.N7(t.du()),s.k7(t.pu()),s.N7(t.mu())),!i.equals(r)){const e=this.vi;i===h?(s.B7(e,null,r),this.zEt=d.ir(d.Rect,r)):(s.B7(e,i,r),i._(r)),this.qSt&=-17}}}_Pt(){this.qSt|=16}YRt(){const t=this.zEt;t!==h&&(this.Lct.xIt().B7(this.vi,t,null),this.zEt=h)}KRt(){const t=this.oO();if(t.ZU()&&0==(256&this.qSt)){const s=t.jz(),i=this.B4(),e=this.JEt;if(r.set(s.k7(i.fu()),s.N7(i.du()),s.k7(i.pu()),s.N7(i.mu())),!e.equals(r)){const h=this.vi;e===o?(s.B7(h,null,r),this.JEt=d.ir(d.Rect,r)):(s.B7(h,e,r),e._(r)),t.Vz()}}}wz(){const t=this.JEt;t!==o&&(this.oO().jz().B7(this.vi,t,null),this.JEt=o)}F9(){return this.JEt}X4(){const t=this.vi,s=this.DEt,i=s.lO();i.length&&i.at(-1)===t||(s.yz(t,!1),s.pz(t,!1),this.$c.dO())}Y4(){const t=this.vi,s=this.DEt,i=s.lO();i.length&&i[0]===t||(s.yz(t,!1),s.gz(t,!1),this.$c.dO())}Q4(t){const s=this.vi,i=this.DEt;if(i.HD()!==t.HD())throw new Error("layer from different layout");t!==i&&(i.yz(s,!0),this.cO(t),t.pz(s,!0),this.$c.dO())}sB(t,s){let i=this.vi,e=!1,h=this.DEt;if(t.EN()!==i.EN()){const r=t.nO();if(!r)throw new Error("expected world instance");const n=r.oO(),o=(h.fF()!==n.fF()&&(h.yz(i,!0),this.cO(n),n.pz(i,!0),e=!0),n.B9(i,t,!!s));(e||o)&&this.$c.dO()}}C4(){return this.ZEt}IPt(t){this.IRt(64,t)}J9(){return 0!=(64&this.qSt)}QJ(t,s=null){const i={x:this.tv(),y:this.rv(),w:this.Xp(),h:this.om(),l:this.oO().Oz(),zi:this.aO()},e=(0!==this.ov()&&(i.ze=this.ov()),0!==this.jk()&&(i.a=this.dRt()),this.Bz()||(i.c=this.Wb.toJSON()),.5!==this.H6()&&(i.oX=this.H6()),.5!==this.U6()&&(i.oY=this.U6()),0!==this.K5()&&(i.bm=this.K5()),this.T5()||(i.v=this.T5()),this.eB()||(i.ce=this.eB()),this.nPt()&&(i.be=this.nPt()),this.ZEt&&(i.fx=this.ZEt.QJ()),0!=(32&this.qSt));return e&&(i.sfi=e),this.XEt&&(i.sft=[...this.XEt].join(" ")),this.tRt&&"visual-state"!==t&&(i.sgi=this.tRt.QJ(t,s),g.has(this))&&(i.sgcd=g.get(this).aRt,i.sgzid=g.get(this).uRt),this.qB()&&(i.mesh=this.$B().gv()),i}bEt(){return{x:this.Va,y:this.Ua,z:this.jb,w:this.kEt,h:this.NEt,a:this.Bo,sgi:this.Prt()?this.Prt().mEt():null}}xEt(t){t&&(this.Va=t.x,this.Ua=t.y,this.jb=t.z,this.kEt=t.w,this.NEt=t.h,this.Bo=t.a,t.sgi&&this.Prt()&&this.Prt().tq(t.sgi),this.yRt(),this.R4())}OIt(){this.rRt(),this.VRt(),this.JRt(null),this.tRt&&this.tRt.MEt(this.sEt,this.iEt)}gK(t){"visual-state"!==t&&this.VRt()}wK(t,s="full",i=null){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.qSt)&&this.tRt.wK(t.sgi,i)}zCt(t,s="full",i){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.qSt)&&(this.tRt.MEt(null,null),this.rRt(),this.R4())}tq(t,s){if(m=!1,this.sv(t.x),this.nv(t.y),this.hm(t.w),this.Kp(t.h),this.Mz(t.zi),this.av(t.hasOwnProperty("ze")?t.ze:0),this.Wk(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?f.Aa(t.c):t.hasOwnProperty("o")?(f.$o(this.Wb),f.a=t.o):f.Wo(1,1,1,1),this.nRt(f),this.Urt(t.hasOwnProperty("oX")?t.oX:.5),this.Jrt(t.hasOwnProperty("oY")?t.oY:.5),this.Vb(t.hasOwnProperty("bm")?t.bm:0),this.G5(!t.hasOwnProperty("v")||t.v),this.hB(!t.hasOwnProperty("ce")||t.ce),this.rPt(!!t.hasOwnProperty("be")&&t.be),this.ZRt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.ZEt&&t.hasOwnProperty("fx")&&this.ZEt.tq(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==s&&this.sEt)for(const i of this.sEt)i.Dj()||this.$c.MN(i);if(t.hasOwnProperty("sgi")&&"visual-state"!==s){this.JRt(null);const e=this.tRt,h=t.sgi;e.tq(h),e.MEt(this.sEt,this.iEt),t.sgcd&&d.le(t.sgzid)&&g.set(this,{aRt:t.sgcd,uRt:t.sgzid})}if(t.hasOwnProperty("mesh")){const r=t.mesh;this.jB(r.cols,r.rows),this.$B().yv(r)}else this.VB();this.R4(),m=!0,this.lRt(),"visual-state"!==s&&this.$c.CPt(this.RW(),t)}}}{const Sa=self.Os;Sa.m_t=class extends Sa.Qh{constructor(t,s){super();const i=t.IO(),e=i.$gt(s[1]),h=(i.EPt().Vxt(e),this.$c=i,this.Lct=t,this.Gxt=Sa.FL.g6(e),this.oGt=null,this.RPt=null,this.JTt=e.Instance,this.iU=s[2],this.nr=s[0],this.Pyt=this.$c.f1t(s[3]),this.Gxt._St());if(h<2&&(this.oGt=Sa.ir(e.A_t,this),!(this.oGt instanceof Sa.Mxt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(Sa.FL.VMt(this,h),2<=h){const r=e.A_t??globalThis.zj;if(this.RPt=new r,!(this.RPt instanceof globalThis.zj))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.RPt=new globalThis.p6;Sa.FL.UMt(h),this.BMt()}static jM(t,s){return Sa.ir(Sa.m_t,t,s)}er(){this.$c=null,this.Gxt=null,this.oGt&&(this.oGt.er(),this.oGt=null),this.JTt=null}Mbt(){return this.oGt}BMt(){this.oGt?this.oGt.BMt():this.RPt&&this.RPt.$W()}IO(){return this.$c}mN(){return this.Lct}a6(){return this.Gxt}tIt(){return this.JTt}Wc(){return this.nr}Oz(){return this.iU}l6(){return this.RPt}f1t(){return this.Pyt}}}{const ba=self.Os,va=self.n6;ba.$It=class extends ba.Qh{constructor(t){super(),this.$c=t.runtime,this.lwt=t.u6,this.Gxt=this.lwt.a6(),this.vi=t.f6,this.Lg=t.index,this.WIt=null,this.jIt=null,this.Gxt.pz(this.vi)}er(){this.jIt&&(this.jIt.bN(),this.jIt=null),this.Gxt.yz(this.vi),this.WIt&&(this.WIt.er(),this.WIt=null),this.$c=null,this.lwt=null,this.Gxt=null,this.vi=null}X_t(t){if(this.WIt)throw new Error("already got sdk instance");const s=this.a6()._St();if(s<2){if(this.WIt=ba.ir(this.lwt.tIt(),this,t),!(this.WIt instanceof ba.xxt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const i=this.a6().WMt();this.HMt(i.Instance,t)}}s6(){return this.WIt??this.jIt}d6(){return this.vi}IO(){return this.$c}c6(){return this.lwt}a6(){return this.Gxt}hrt(){return this.Lg}Cxt(){this.WIt?this.WIt.Cxt():this.jIt.Xj()}Axt(t,s){this.WIt&&this.WIt.Axt(t,s)}UCt(){return this.WIt?this.WIt.CGt():this.jIt.d4()}gv(t="full"){return this.WIt?this.WIt.gv(t):this.jIt.m4(t)}yv(t,s="full"){if(this.WIt)return this.WIt.yv(t,s);this.jIt.g4(t,s)}static PPt(t,s,i){let e=globalThis.Jj,h,r;h=s instanceof e?t.t5(s):s.Ixt(),r=i instanceof e?t.t5(i):i.Ixt();const n=h.d6(),o=r.d6(),a=n.mN().fF(),u=o.mN().fF();if(a!==u)return a-u;const l=n.ACt(),c=o.ACt();return l!==c?l-c:h.hrt()-r.hrt()}HMt(t,s){const i=va,e=t??this.WIt.WMt(),h=e||i,r=this.a6()._St();if(ba.FL.VMt(this,r),ba.FL.Uxt(s),this.jIt=new h,ba.FL.zxt(),ba.FL.UMt(r),!e||this.jIt instanceof i)return this.jIt;throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`)}lGt(){return this.jIt||this.HMt()}AGt(){return!!this.jIt}}}{const Ma=self.Os;Ma.NU=class extends Ma.Qh{constructor(t,s){super(),this.xv=t,this.APt=[],this.FPt=[],this.DPt=new Map,this.OPt=[],this.LPt=[],this.kPt=new Set,this.gb=!0;for(const i of s){const e=Ma.ir(Ma.NPt,this,i,this.APt.length);this.APt.push(e),this.DPt.set(e.Wc().toLowerCase(),e),3<=i.length&&this.OPt.push(this.BPt(e,i[2]))}this.IO().WPt(this)}er(){this.IO().jPt(this);for(const t of this.LPt)t.er();Ma.Pn(this.LPt),Ma.Pn(this.APt),Ma.Pn(this.FPt),this.DPt.clear(),Ma.Pn(this.OPt),this.xv=null}HPt(t){this.kPt.add(t)}VPt(t){this.kPt.delete(t)}UPt(t){t.Sw()&&(this.LPt=this.APt.map(t=>{const s=t.jG();return 0<s.GetCustomParametersByteSize()?Ma.ir(Ma.Vg.WebGPUEffectCustomParamsBuffer,s):null}),this.zPt());for(const s of this.kPt)s.UPt(t)}q_t(t){if(t.length){this.APt=t.concat(this.APt);for(const s of t)this.DPt.set(s.Wc().toLowerCase(),s);for(let t=0,s=this.APt.length;t<s;++t)this.APt[t].Rz(t)}}BPt(t,s){t.JPt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=Ma.ir(Ma.Oo);h.Aa(e),i[t]=h}}return i}Dv(){return this.xv}IO(){return this.xv.IO()}S6(){Ma.Pn(this.FPt);let t=!0;for(const s of this.APt)s.Dpt()&&(this.FPt.push(s),s.jG().Eb()||(t=!1));this.gb=t}Dk(){return this.APt}aIt(){return 0<this.APt.length}fht(t){return this.DPt.get(t.toLowerCase())||null}qPt(t){if((t=Math.floor(+t))<0||t>=this.APt.length)throw new RangeError("invalid effect type index");return this.APt[t]}y6(t){return this.qPt(t).Dpt()}w6(t,s){this.qPt(t).JPt(s)}Wz(){return this.FPt}J9(){return 0<this.FPt.length}Eb(){return this.gb}cht(t){return this.OPt[t]}HU(t){return(t<this.LPt.length?this.LPt:this.OPt)[t]}b6(t,s){if(t<0||t>=this.OPt.length)return null;const i=this.OPt[t];return s<0||s>=i.length?null:i[s]}v6(t,s,i){if(t<0||t>=this.OPt.length)return!1;const e=this.OPt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof Ma.Oo){if(h.ea(i))return!1;h.$o(i)}else{if(h===i)return!1;e[s]=i}return t<this.LPt.length&&this.LPt[t].SetParameterValue(s,i),!0}zPt(){const i=this.OPt,e=this.LPt;for(let t=0,s=Math.min(i.length,e.length);t<s;++t){const h=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)h.SetParameterValue(t,r[t])}}static $Pt(t){return t&&t instanceof Ma.Oo?{t:"color",v:t.toJSON()}:t}static XPt(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const s=t.t;if("color"!==s)throw new Error("invalid effect parameter type");{const i=Ma.ir(Ma.Oo);return i.Aa(t.v),i}}}static KPt(t){return t.map(Ma.NU.$Pt)}static YPt(t){return t.map(Ma.NU.XPt)}gv(){return this.APt.map(t=>({name:t.Wc(),active:t.Dpt(),params:Ma.NU.KPt(this.OPt[t.fF()])}))}yv(t){for(const s of t){const i=this.fht(s.name);i&&(i.JPt(s.active),this.OPt[i.fF()]=Ma.NU.YPt(s.params))}this.S6(),this.zPt()}}}{const Ga=self.Os;Ga.NPt=class extends Ga.Qh{constructor(t,s,i){super(),this.kU=t,this.Kc=s[0],this.nr=s[1],this.Lg=i,this.kb=null,this.Kf=!0}er(){this.kU=null,this.kb=null}J_t(t){const s=Ga.ir(Ga.NPt,t,[this.Kc,this.nr],-1);return s.kb=this.kb,s.Kf=this.Kf,s}UPt(t){const s=t._w(this.Kc);if(!s)throw new Error("failed to find shader program '"+this.Kc+"'");this.kb=s}Fk(){return this.kU}Wc(){return this.nr}Rz(t){this.Lg=t}fF(){return this.Lg}Dv(){return this.kU.Dv()}IO(){return this.kU.IO()}JPt(t){this.Kf=!!t}Dpt(){return this.Kf}jG(){return this.kb}ZPt(){const i=[];for(let t=0,s=this.kb.HG();t<s;++t){const e=this.kb.VG(t);if("float"===e||"percent"===e)i.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");i.push(Ga.ir(Ga.Oo,1,1,1,1))}}return i}}}{const xa=self.Os;xa.QEt=class extends xa.Qh{constructor(t,s){super(),this.vi=t,this.QPt=s,this.kU=t.mN().Fk(),this.tAt=!0,this.UU=!0,this.sAt=!1,this.iAt=!1,this.eAt=!1,this.hAt=!1,this.aF=xa.ir(xa.Vg.hA,t.IO().gL().BU(),{qP:(t,s)=>{const i=s.tF(),e=i.nO();t.Ub(e.WU()),t.aS(e.L4()),i.zv(t),t.aS(0)},$P:t=>{const s=t.VGt(),[i,e]=t.HGt();return{J3:s,q3:i,X3:e}},XP:t=>this.HU(t)}),this.rAt=[],this.FPt=[],this.gb=!0,this.OPt=[],this.LPt=[],this.UPt(t.IO().Gb());for(let t=0,s=this.kU.Dk().length;t<s;++t)this.rAt.push(!0);this.S6(),this.kU.HPt(this)}er(){this.kU.VPt(this);for(const t of this.LPt)t&&t.er();xa.Pn(this.LPt),this.aF.er(),this.aF=null,xa.Pn(this.rAt),xa.Pn(this.FPt),xa.Pn(this.OPt),this.vi=null,this.kU=null}UPt(t){t.Sw()&&(this.LPt=this.kU.Dk().map(t=>{const s=t.jG();return 0<s.GetCustomParametersByteSize()?xa.ir(xa.Vg.WebGPUEffectCustomParamsBuffer,s):null}))}oRt(t){let s=0;for(const i of t)this.OPt.push(this.BPt(s,i)),++s;this.zPt(),this.S6()}BPt(t,s){this.rAt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=xa.ir(xa.Oo);h.Aa(e),i[t]=h}}return i}sCt(){for(const t of this.kU.Dk())this.OPt.push(t.ZPt());this.zPt()}Dv(){return this.xv}Fk(){return this.kU}cF(){return this.Nz(),this.aF}IO(){return this.vi.IO()}S6(){xa.Pn(this.FPt);let t=this.QPt,i=this.kU.Dk(),e=this.FPt,h=this.rAt,r=!0;for(let t=0,s=i.length;t<s;++t)if(h[t]){const n=i[t];e.push(n),n.jG().Eb()||(r=!1)}this.gb=r,t.IPt(!!e.length),this.tAt=!0}Nz(){const t=this.vi,s=this.QPt,i=s.Bz(),e=t.uk().JL(),h=0!==s.jk()||0!==s.oO().jk()||s.Xp()<0||s.om()<0,r=t.JGt(),n=t.Cb();(this.tAt||i!==this.UU||e!==this.sAt||h!==this.iAt||r!==this.eAt||n!==this.hAt||this.aF.$A())&&(this.aF.XA(this.FPt.map(t=>t.jG()),{YP:this.FPt.map(t=>t.fF()),ZP:!i||n,tA:e,sA:r,iA:h}),this.tAt=!1,this.UU=i,this.sAt=e,this.iAt=h,this.eAt=r,this.hAt=n)}Wz(){return this.FPt}cht(t){return this.OPt[t]}HU(t){return(t<this.LPt.length?this.LPt:this.OPt)[t]}b6(t,s){if(t<0||t>=this.OPt.length)return null;const i=this.OPt[t];return s<0||s>=i.length?null:i[s]}v6(t,s,i){if(t<0||t>=this.OPt.length)return!1;const e=this.OPt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof xa.Oo){if(h.ea(i))return!1;h.$o(i)}else{if(h===i)return!1;e[s]=i}return t<this.LPt.length&&this.LPt[t].SetParameterValue(s,i),!0}zPt(){const i=this.OPt,e=this.LPt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)h.SetParameterValue(t,r[t])}}Eb(){return this.gb}nAt(){return this.FPt.some(t=>t.jG().Ab())}y6(t){return this.rAt[t]}w6(t,s){this.rAt[t]=!!s}Dk(){return this.kU.Dk()}QJ(){return this.kU.Dk().map(t=>({name:t.Wc(),active:this.rAt[t.fF()],params:xa.NU.KPt(this.OPt[t.fF()])}))}tq(t){for(const s of t){const i=this.kU.fht(s.name);i&&(this.rAt[i.fF()]=s.active,this.OPt[i.fF()]=xa.NU.YPt(s.params))}this.S6(),this.zPt()}}}{let _=self.Os,r=[],b=[],n=[],v=_.ir(_.Ml),w=_.ir(_.Ml),M=_.ir(_.Hu),d=_.ir(_.Rect),p=_.ir(_.Rect),m=null,g=null,y=null;_.oAt=class extends _.Qh{constructor(t){super(),this.$c=t,this.aAt=0,this.uAt=0,this.lAt=[],this.cAt=0,this.fAt=0,this.dAt=0,this.pAt=0,this.mAt=new self.qO(this)}er(){this.$c=null}IO(){return this.$c}wF(){return this.mAt}gAt(){this.fAt=this.cAt,this.cAt=0,this.pAt=this.dAt,this.dAt=0}yAt(){return this.fAt}wAt(){return this.pAt}SAt(t,s){const i=t.nO(),e=s.nO();i&&e&&i.eB()&&e.eB()&&this.lAt.push([t,s])}Tvt(s,i,e){for(const[h,r]of this.lAt){let t=null;if(s===h)t=r;else{if(s!==r)continue;t=h}t.Pvt(i)&&!e.includes(t)&&e.push(t)}}_vt(t,s){if(this.lAt.length)for(const[i,e]of this.lAt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}bAt(){_.Pn(this.lAt)}XO(t,s){if(!t||!s||t===s)return!1;const i=t.nO(),e=s.nO();if(!i.eB()||!e.eB())return!1;this.cAt++;const h=i.oO(),r=e.oO(),n=h.C9(r);return n?this.vAt(i,e):this.MAt(i,e)}vAt(t,s){if(!t.B4().Lu(s.B4()))return!1;if(this.dAt++,!t.j4().pl(s.j4()))return!1;if(t.uCt()&&s.uCt())return!1;if(t.uCt())return this.GAt(t,s);if(s.uCt())return this.GAt(s,t);if(!t.pPt()&&!s.pPt())return!0;const i=t.mPt(),e=s.mPt();return i.Ol(e,s.tv()-t.tv(),s.rv()-t.rv())}MAt(i,e){const t=i.uCt(),s=e.uCt();if(t&&!s)return this.xAt(i,e);if(s&&!t)return this.xAt(e,i);if(s||t)return!1;{const h=i.oO(),r=e.oO(),n=(v._(i.mPt()),w._(e.mPt()),v.Il());for(let t=0,s=n.length;t<s;t+=2){const a=t+1,u=n[t],l=n[a],[c,f]=h.nN(u+i.tv(),l+i.rv());n[t]=c,n[a]=f}const o=w.Il();for(let t=0,s=o.length;t<s;t+=2){const d=t+1,p=o[t],m=o[d],[g,y]=r.nN(p+e.tv(),m+e.rv());o[t]=g,o[d]=y}return v.Pl(),w.Pl(),this.dAt++,v.Ol(w,0,0)}}xAt(t,s){const i=t.oO(),e=s.oO(),h=(m=m||_.ir(_.Ml),g=g||_.ir(_.Rect),y=y||_.ir(_.Hu),s.tv()),r=s.rv(),[n,o]=e.nN(h,r),[a,u]=i.iN(n,o),l=a-h,c=u-r;if(g._(s.B4()),g.offset(l,c),!t.B4().Lu(g))return!1;if(y._(s.j4()),y.offset(l,c),this.dAt++,!t.j4().pl(y))return!1;m._(s.mPt());const f=m.Il();for(let t=0,s=f.length;t<s;t+=2){const d=t+1;f[t]+=l,f[d]+=c}return m.Pl(),this.GAt(t,s,a,u,m,g,y)}GAt(t,e,s,i,h,r,n){const o=void 0!==r?r:e.B4(),a=t.tv(),u=t.rv(),l=t.RW().s6(),c=void 0!==s?s:e.tv(),f=void 0!==i?i:e.rv(),d=e.pPt(),p=void 0!==n?n:e.j4(),m=b;l.GetCollisionRectCandidates(o,m);for(let t=0,s=m.length;t<s;++t){const g=m[t],y=g.GetRect();if(this.cAt++,o.ku(y,a,u)&&(M.ul(y),M.offset(a,u),M.pl(p)))if(d){let t=void 0!==h?h:e.mPt(),s=c,i=f;void 0!==h&&(s=e.tv(),i=e.rv());const w=g.GetPoly();if(w){if(this.dAt++,w.Ol(t,s-(a+y.fu()),i-(u+y.du())))return _.Pn(m),!0}else if(v.Fl(M,0,0),v.Ol(t,s,i))return _.Pn(m),!0}else{const S=g.GetPoly();if(!S)return _.Pn(m),!0;if(v.Fl(p,0,0),S.Ol(v,-(a+y.fu()),-(u+y.du())))return _.Pn(m),!0}}return _.Pn(m),!1}TAt(t,o,a){const u=t.vk(),s=this.$c.XF();if(!s)throw new Error("cannot call outside event");const l=s.fft(),i=new Map,c=t=>{let s=i.get(t);return void 0===s&&(s=t.A5(),i.set(t,s)),s};if(u.$ct()){a||(u.ift(!1),_.Pn(u.eft())),l&&_.Pn(u.hft());for(const e of t.bk()){let h=e.nO(),r=h.oO();if(!(!c(r)||!h.V4())&&o.some(([t,s])=>{const[i,e]=r.iN(t,s,h.L4());return h.rB(i,e)})){if(a)return!1;u.Qct(e)}else l&&u.tft(e)}}else{let i,e=!1,n=(!l||s.hgt(this.$c.e1t())||this.$c._bt()&&!u.hft().length&&u.eft().length?i=u.eft():(i=u.hft(),e=!0),0);for(let s=0,t=i.length;s<t;++s){let t=i[s],h=t.nO(),r=h.oO();if(!(!c(r)||!h.V4())&&o.some(([t,s])=>{const[i,e]=r.iN(t,s,h.L4());return h.rB(i,e)})){if(a)return!1;e?u.Qct(t):i[n++]=t}else e?i[n++]=t:l&&u.tft(t)}a||(i.length=n)}return t.Bgt(),i.clear(),!!a||u.Xct()}_At(t,s){if(t)for(const i of s.EIt())if(!t.C9(i))return!1;return!0}Tbt(t,s,i,e){if(s.Iz())for(const h of s.Pmt())this._At(t,h)?(h._It(),h.xIt().W7(i,e)):_.Uh(e,h.bk());else this._At(t,s)?(s._It(),s.xIt().W7(i,e)):_.Uh(e,s.bk())}rL(t,s,i,e){for(const h of s)this.Tbt(t,h,i,e)}IAt(t,s,i){const e=this.$c.qxt();e&&this.rL(t,e.HK(),s,i)}CAt(t,s,i){const e=this.$c.$xt();e&&this.rL(t,e.HK(),s,i)}QRt(t,s){return t.fCt()&&(!s||s.nO().QRt(t.ASt().get("solidTags")))}ZO(t){const s=t.nO();this.IAt(s.oO(),s.B4(),r);for(const i of r)if(this.QRt(i,t)&&this.XO(t,i))return _.Pn(r),i;return _.Pn(r),null}EAt(t,s){this.IAt(null,t,r);for(const i of r)if(this.QRt(i,s)&&this.RAt(t,i))return _.Pn(r),i;return _.Pn(r),null}PAt(t,s){let i=null;s&&(i=n,_.Pn(i));const e=t.nO();this.CAt(e.oO(),e.B4(),r);for(const h of r)if(h.pCt()&&this.XO(t,h)){if(!s)return _.Pn(r),h;i.push(h)}return _.Pn(r),i}AAt(s,i,e,h,r){h=h||50;const n=s.nO(),o=n.tv(),a=n.rv();for(let t=0;t<h;++t)if(n.P4(o+i*t,a+e*t),n.R4(),!this.XO(s,r))return!0;return n.P4(o,a),n.R4(),!1}FAt(s,i,e,h,r,n){h=h||50;let o=s.nO(),a=o.tv(),u=o.rv(),l=null,c=null;for(let t=0;t<h;++t)if(o.P4(a+i*t,u+e*t),o.R4(),!this.XO(s,l))if(l=this.ZO(s))c=l;else if(r&&(l=n?this.XO(s,n)?n:null:this.PAt(s))&&(c=l),!l)return c&&this.DAt(s,i,e,c,16,!0),!0;return o.P4(a,u),o.R4(),!1}OAt(i,e,h,t){t=t||50;let r=i.nO(),n=r.tv(),o=r.rv(),a=null,u=null;for(let s=0;s<t;++s)for(let t=0;t<2;++t){const l=2*t-1;if(r.P4(n+e*s*l,o+h*s*l),r.R4(),!this.XO(i,a)){if(!(a=this.ZO(i)))return u&&this.DAt(i,e*l,h*l,u,16,!0),!0;u=a}}return r.P4(n,o),r.R4(),!1}DAt(t,s,i,e,h,r){let n=2,o=!1,a=!1,u=t.nO(),l=u.tv(),c=u.rv();for(;n<=h;){const f=1/n;n*=2,u.D4(s*f*(o?1:-1),i*f*(o?1:-1)),u.R4(),this.XO(t,e)||r&&this.ZO(t)?(o=!0,a=!0):(o=!1,a=!1,l=u.tv(),c=u.rv())}a&&(u.P4(l,c),u.R4())}LAt(i,t=100){let e=0,h=i.nO(),r=h.tv(),n=h.rv(),o=0,a=this.ZO(i);if(!a)return!0;for(;e<=t;){let t=0,s=0;switch(o){case 0:t=0,s=-1,e++;break;case 1:t=1,s=-1;break;case 2:t=1,s=0;break;case 3:t=1,s=1;break;case 4:t=0,s=1;break;case 5:t=-1,s=1;break;case 6:t=-1,s=0;break;case 7:t=-1,s=-1}if(o=(o+1)%8,h.P4(Math.floor(r+t*e),Math.floor(n+s*e)),h.R4(),!this.XO(i,a)&&!(a=this.ZO(i)))return!0}return h.P4(r,n),h.R4(),!1}kAt(t,s,i,e){const h=t.nO(),r=h.tv(),n=h.rv(),o=Math.max(10,_.mr(s,i,r,n)),a=_.yr(s,i,r,n),u=e||this.ZO(t);if(!u)return _.cr(a+Math.PI);let l=u,c=0,f=0,d=_.dr(5),p;for(p=1;p<36;++p){const x=a-p*d;if(h.P4(s+Math.cos(x)*o,i+Math.sin(x)*o),h.R4(),!this.XO(t,l)&&!(l=e?null:this.ZO(t))){c=x;break}}for(36===p&&(c=_.cr(a+Math.PI)),l=u,p=1;p<36;++p){const T=a+p*d;if(h.P4(s+Math.cos(T)*o,i+Math.sin(T)*o),h.R4(),!this.XO(t,l)&&!(l=e?null:this.ZO(t))){f=T;break}}if(36===p&&(f=_.cr(a+Math.PI)),h.P4(r,n),h.R4(),f===c)return f;let m=_.wr(f,c)/2,g;g=_.br(f,c)?_.cr(c+m+Math.PI):_.cr(f+m);const y=Math.cos(a),w=Math.sin(a),S=Math.cos(g),b=Math.sin(g),v=y*S+w*b,M=y-2*v*S,G=w-2*v*b;return _.yr(0,0,M,G)}NAt(t,s,i,e,h){if(!h)return!1;const r=h.nO();if(!r.eB())return!1;if(this.cAt++,d.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!r.B4().Lu(d))return!1;if(h.uCt())return this.BAt(t,s,i,e,h,r);if(this.dAt++,!r.j4().dl(t,s,i,e))return!1;if(!r.pPt())return!0;const n=r.mPt();return n.dl(r.tv(),r.rv(),t,s,i,e)}BAt(i,e,h,r,t,s){const n=s.tv(),o=s.rv(),a=t.s6(),u=b;p.set(i,e,h,r),p.normalize(),a.GetCollisionRectCandidates(p,u);for(let t=0,s=u.length;t<s;++t){const l=u[t],c=l.GetRect();if(this.cAt++,d.ku(c,n,o)&&(M.ul(c),M.offset(n,o),M.dl(i,e,h,r))){const f=l.GetPoly();if(!f)return _.Pn(u),!0;if(this.dAt++,f.dl(n+c.fu(),o+c.du(),i,e,h,r))return _.Pn(u),!0}}return _.Pn(u),!1}RAt(t,s){if(!s)return!1;const i=s.nO();if(!i.eB())return!1;if(this.cAt++,!i.B4().Lu(t))return!1;if(s.uCt())return this.WAt(t,s,i);if(this.dAt++,M.ul(t),!i.j4().pl(M))return!1;if(!i.pPt())return!0;const e=v,h=(e.ul(t,i.tv(),i.rv()),i.mPt());return e.Ol(h,0,0)}WAt(i,t,s){const e=s.tv(),h=s.rv(),r=t.s6(),n=b;r.GetCollisionRectCandidates(i,n);for(let t=0,s=n.length;t<s;++t){const o=n[t],a=o.GetRect();if(this.cAt++,i.ku(a,e,h)){const u=o.GetPoly();if(!u)return _.Pn(n),!0;if(this.dAt++,v.ul(i,0,0),u.Ol(v,-(e+a.fu()),-(h+a.du())))return _.Pn(n),!0}}return _.Pn(n),!1}jAt(t,s){if(t){const i=t.nO();i.eB()&&(this.cAt++,i.B4().Lu(s.rect))&&(t.uCt()?this.HAt(t,i,s):(this.dAt++,i.pPt()?s.VAt(t,i.tv(),i.rv(),i.mPt()):s.UAt(t,i.j4())))}}HAt(i,e,h){const r=e.tv(),n=e.rv(),o=b;i.s6().GetCollisionRectCandidates(h.rect,o);for(let t=0,s=o.length;t<s;t++){const a=o[t],u=a.GetRect();if(this.cAt++,h.rect.ku(u,r,n)){const l=a.GetPoly();this.dAt++,l?h.VAt(i,r+u.fu(),n+u.du(),l):h.zAt(i,e.tv(),e.rv(),u)}}_.Pn(o)}tL(t,s){if(t!==this.aAt||s!==this.uAt){this.aAt=t,this.uAt=s;const i=this.$c._z();for(const e of i)if(e.NL()){for(const h of e.Sk())h.nO().YRt();e.xIt().JAt(t,s),e.TIt();for(const r of e.Sk()){const n=r.nO();n._Pt(),n.IIt()}}}}iL(){return[this.aAt,this.uAt]}qAt(t,s){this.aAt=t,this.uAt=s}}}{const Ta=self.Os;Ta.i_t=class extends Ta.Qh{constructor(t,s){super(),this.F7=t,this.D7=s,this.O7=Ta.ir(Ta.jl)}er(){this.O7.er(),this.O7=null}JAt(t,s){if(!this.O7.Ul())throw new Error("grid not empty");this.F7=t,this.D7=s}L7(t,s,i){let e=this.O7.Qs(t,s);return e||(i?(e=Ta.ir(Ta.$At,this,t,s),this.O7.Set(t,s,e),e):null)}k7(t){const s=Math.floor(t/this.F7);return isFinite(s)?s:0}N7(t){const s=Math.floor(t/this.D7);return isFinite(s)?s:0}B7(e,h,r){if(h)for(let i=h.fu(),t=h.pu();i<=t;++i)for(let t=h.du(),s=h.mu();t<=s;++t)if(!r||!r.Nu(i,t)){const n=this.L7(i,t,!1);n&&(n.u0(e),n.Ul())&&this.O7.zl(i,t)}if(r)for(let i=r.fu(),t=r.pu();i<=t;++i)for(let t=r.du(),s=r.mu();t<=s;++t)h&&h.Nu(i,t)||this.L7(i,t,!0).E7(e)}W7(t,s){let i=this.k7(t.fu()),e=this.N7(t.du()),h=this.k7(t.pu()),r=this.N7(t.mu());if(isFinite(h)&&isFinite(r))for(;i<=h;++i)for(let t=e;t<=r;++t){const n=this.L7(i,t,!1);n&&n.P7(s)}}}}{const _a=self.Os;_a.$At=class extends _a.Qh{constructor(t,s,i){super(),this.M7=t,this.Va=s,this.Ua=i,this.G7=_a.ir(_a.Xl)}er(){this.G7.er(),this.G7=null,this.M7=null}Ul(){return this.G7.Ul()}E7(t){this.G7.Ql(t)}u0(t){this.G7.zl(t)}P7(t){_a.Uh(t,this.G7.tc())}}}{const Ia=self.Os;Ia.XAt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Ia.Rect,this.KAt=2,this.YAt=null,this.ZAt=0,this.QAt=0,this.t3t=0,this.s3t=0,this.i3t=0,this.Ct=0,this.e3t=1,this.h3t=0,this.r3t=1,this.n3t=0}o3t(){return this.KAt<1+1e-6}Yf(){this.KAt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.KAt=2,this.YAt=null,this.ZAt=0,this.QAt=0,this.t3t=0,this.s3t=0,this.i3t=0,this.Ct=0,this.e3t=1,this.h3t=0,this.r3t=1,this.n3t=0,this}a3t(){if(!1!==this.o3t()){const t=this.dx*this.KAt,s=this.dy*this.KAt,i=Math.hypot(t,s),e=t/i,h=s/i,r=(this.Ct=i-1e-6,this.s3t=this.x1+e*this.Ct,this.i3t=this.y1+h*this.Ct,this.ZAt=Math.atan2(this.t3t,this.QAt)+Math.PI/2,this.e3t=Math.cos(this.ZAt),this.h3t=Math.sin(this.ZAt),e*this.e3t+h*this.h3t);if(this.r3t=e-2*this.e3t*r,this.n3t=h-2*this.h3t*r,0<r){const n=Math.PI;this.ZAt=Ia.cr(this.ZAt+n),this.e3t=-this.e3t,this.h3t=-this.h3t}}}u3t(t,s,i,e,h){const r=Ia.nn(this.x1,this.y1,this.x2,this.y2,s,i,e,h);0<=r&&r<this.KAt&&(this.KAt=r,this.YAt=t.EN(),this.QAt=s-e,this.t3t=i-h)}zAt(t,s,i,e){const h=s+e.fu(),r=s+e.pu(),n=i+e.du(),o=i+e.mu();this.u3t(t,h,n,r,n),this.u3t(t,r,n,r,o),this.u3t(t,r,o,h,o),this.u3t(t,h,o,h,n)}UAt(t,s){const i=s.Xr(),e=s.Kr(),h=s.Yr(),r=s.Zr(),n=s.Qr(),o=s.tn(),a=s.sn(),u=s.hn();this.u3t(t,i,e,h,r),this.u3t(t,h,r,n,o),this.u3t(t,n,o,a,u),this.u3t(t,a,u,i,e)}VAt(i,e,h,t){const r=t.Il();for(let t=0,s=r.length;t<s;t+=2){const n=(t+2)%s,o=r[t]+e,a=r[t+1]+h,u=r[n]+e,l=r[1+n]+h;this.u3t(i,o,a,u,l)}}}}{const T=self.Os,Ca=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Ea=new Set(["high","low"]),Ra=self.ws,Gh=Ra.Ms,xh=Ra._s,Pa=Gh.create(),Aa=T.ir(T.Hu),I=T.ir(T.Rect);T.l3t=class extends T.Qh{constructor(t){super(),this.$c=t,this.c3t=[],this.f3t=!1,this.d3t=null,this.p3t=null,this.m3t=null,this.g3t="high-performance",this.y3t=!1,this.w3t=0,this.S3t=0,this.b3t="",this.v3t=0,this.M3t=0,this.G3t=0,this.x3t=0,this.T3t=0,this._3t=0,this.wy="normalized",this.I3t=0,this.C3t=1,this.E3t=1e4,this.$y=!0,this.R3t=0,this.EA=0,this.RA=0,this.P3t="letterbox-scale",this.A3t="letterbox-scale",this.F3t=0,this.D3t=0,this.O3t=Gh.create(),this.L3t="high",this.k3t=this.L3t,this.N3t=!1,this.B3t=[],this.W3t=new Set,this.j3t=self.C3_Shaders,this.H3t=T.ir(T.Vg.FP,{EP:()=>[this.uJ(),this.lJ()],RP:()=>this.V3t(),PP:t=>this.U3t(t),getTime:()=>this.IO().mD(),AP:()=>this.IO().dO()}),this.z3t=0,this.J3t=0,this.q3t=NaN,this.$3t=null,this.X3t=new Map,this.K3t=NaN,this.Y3t=new Map,this.Z3t="",this.Q3t=1,this.tFt=T.ir(T.Rect),this.sFt="",this.iFt=null,this.eFt=null,this.hFt=0,this.rFt=0,this.nFt=-1,this.oFt=0,this.aFt=t=>this.oFt=t.progress,this.uFt=null,this.lFt={cFt:null,fFt:null,dFt:null},this.pFt=0,this.mFt=0,this.gFt=0,this.yFt="fade-in",this.wFt=null,this.SFt=new Promise(t=>this.wFt=t)}bFt(t){this.g3t=t}vFt(t){this.f3t=!!t}MFt(t){this.wy=t}GFt(){return this.wy}xFt(t){this.I3t=t}TFt(t,s){this.C3t=t,this.E3t=s}_Ft(t){this.y3t=!!t}async Go(t){let s=t.canvas,i=(this.c3t.push({canvas:s,IFt:null}),this.$c.h4("runtime","window-resize",t=>this.CFt(t)),this.$c.h4("runtime","fullscreenchange",t=>this.EFt(t)),this.$c.h4("runtime","fullscreenerror",t=>this.RFt(t)),s.addEventListener("webglcontextlost",t=>this.PFt(t)),s.addEventListener("webglcontextrestored",t=>this.AFt(t)),this.N3t=!!t.isFullscreen,this.b3t=t.cssDisplayMode,navigator.gpu&&this.f3t),e=!1;if(i)try{await this.FFt(!0)}catch(t){this.DFt("WebGPU",t),this.p3t=null}if(!this.Gb())try{await this.OFt(!0)}catch(t){this.DFt("WebGL",t),this.d3t=null}if(this.Gb()||(e=!0),!this.Gb()&&i)try{await this.FFt(!1)}catch(t){this.DFt("WebGPU",t),this.p3t=null}if(!this.Gb())try{await this.OFt(!1)}catch(t){this.DFt("WebGL",t),this.d3t=null}const h=this.Gb();if(!h)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");h.tb(e),this.p3t&&(this.p3t.LFt=()=>this.kFt(),this.p3t.NFt=()=>this.BFt()),"normalized"===this.wy?h.mw():(h.gw(),h.dw(this.I3t)),this.WI(t.windowInnerWidth,t.windowInnerHeight,!0),await this.UPt()}DFt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async FFt(t){const s={hy:this.C3t,ny:this.E3t},i={powerPreference:this.g3t,depth:this.$c.m9(),failIfMajorPerformanceCaveat:t,WFt:this.$c.wJ(),jFt:this.$c.HFt(),XC:this.$c.VFt()};this.p3t=T.ir(T.Vg.WebGPURenderer,s),await this.p3t.jM(this.c3t[0].canvas,i)}async OFt(t){const s={alpha:!0,powerPreference:this.g3t,$C:"xbox-uwp-webview2"!==this.$c.fL(),depth:this.$c.m9(),XC:this.$c.VFt(),failIfMajorPerformanceCaveat:t,hy:this.C3t,ny:this.E3t};this.y3t&&(s.KC=1),this.d3t=T.ir(T.Vg.QC,this.c3t[0].canvas,s),await this.d3t.Qy()}async UFt(){if(this.j3t){const t=[];for(const[s,i]of Object.entries(this.j3t)){i.src=i.wgsl;const e=T.Vg.WebGPUShaderProgram.gx();t.push(this.p3t.sR(Object.assign({NM:e,name:s},i)))}await Promise.all(t)}}async zFt(){if(this.j3t){const s=[];for(const[i,e]of Object.entries(this.j3t)){let t;if(e.glslWebGL2&&2<=this.d3t.T2())e.src=e.glslWebGL2,t=T.Vg.LM.yx();else{if(!e.glsl)throw new Error(`shader '${i}' does not support WebGL 1`);e.src=e.glsl,t=T.Vg.LM.gx()}s.push(this.d3t.sR(Object.assign({NM:t,name:i},e)))}await Promise.all(s),this.d3t.iR(),this.d3t.Cw()}this.d3t.gP()&&(this.$3t=T.ir(T.Vg.NC,this.d3t))}async UPt(){this.p3t?await this.UFt():this.d3t&&await this.zFt();const t=this.Gb();t.ZS(this.$y),t.gP()&&(this.q3t=0);for(const s of this.$c.JFt()){for(const i of s.Dk())i.UPt(t);s.UPt(t),s.S6()}this.m3t=new self.L8(this.$c,t)}er(){this.$c=null,this.d3t=null,this.c3t.length=0}IF(){return this.$c.IF()}CFt(t){const s=this.$c;if(!s.qFt()){const i=t.devicePixelRatio,e=(this.IF()&&(self.devicePixelRatio=i),s.$Ft(i),this.N3t=!!t.isFullscreen,this.b3t=t.cssDisplayMode,this.WI(t.innerWidth,t.innerHeight),s.dO(),new T.Event("window-resize")),h=(e.data=t,s.Rf().Wf(e),new T.Event("resize"));h.XFt=this.bL(),h.KFt=this.ML(),h.YFt=this.xL(),h.ZFt=this._L(),s.bX(h),s.vX()&&(s.z1t()||self.C3Debugger.IsDebuggerPaused())&&s.r3()}}EFt(t){this.N3t=!!t.isFullscreen,this.WI(t.innerWidth,t.innerHeight,!0),this.$c.dO()}RFt(t){this.N3t=!!t.isFullscreen,this.WI(t.innerWidth,t.innerHeight,!0),this.$c.dO()}WI(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.w3t!==t||this.S3t!==s||i){this.w3t=t,this.S3t=s;const e=this.QFt();"letterbox-scale"===e?this.tDt(t,s):"letterbox-integer-scale"===e?this.sDt(t,s):"off"===e?this.iDt(t,s):this.eDt(t,s),this.hDt(e);for(const{canvas:n}of this.c3t)n.width=this.G3t,n.height=this.x3t;this.$c.Yc("canvas","update-size",{marginLeft:this.T3t,marginTop:this._3t,styleWidth:this.v3t,styleHeight:this.M3t,displayScale:this.Oj()});const h=this.Gb();h.WI(this.G3t,this.x3t,!0);for(const o of this.B3t)h.lP(o);T.Pn(this.B3t),this.rDt();const r=this.$c.jD();r.VX(),r.UX()}}rDt(){this.Gb().ww(this.O3t,this.uJ()/this.lJ())}cJ(){return this.O3t}tDt(t,s){const i=this.$c.IL(),e=this.$c.EF(),h=this.$c.PF(),r=e/h,n=t/s;if(r<n){const o=s*r;this.v3t=Math.round(o),this.M3t=s,this.T3t=Math.floor((t-this.v3t)/2),this._3t=0}else{const a=t/r;this.v3t=t,this.M3t=Math.round(a),this.T3t=0,this._3t=Math.floor((s-this.M3t)/2)}this.G3t=Math.round(this.v3t*i),this.x3t=Math.round(this.M3t*i),this.$c.nDt(e,h)}sDt(t,s){let i=this.$c.IL(),e=(1!==i&&(t+=1,s+=1),this.$c.EF()),h=this.$c.PF(),r=e/h,n=t/s,o;if(r<n){const a=s*r;o=a*i/e}else{const u=t/r;o=u*i/h}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.G3t=Math.round(e*o),this.x3t=Math.round(h*o),this.v3t=this.G3t/i,this.M3t=this.x3t/i,this.T3t=Math.max(Math.floor((t-this.v3t)/2),0),this._3t=Math.max(Math.floor((s-this.M3t)/2),0),this.$c.nDt(e,h)}eDt(t,s){const i=this.$c.IL(),e=(this.v3t=t,this.M3t=s,this.G3t=Math.round(this.v3t*i),this.x3t=Math.round(this.M3t*i),this.T3t=0,this._3t=0,this.Oj());this.$c.nDt(this.v3t/e,this.M3t/e)}iDt(t,s){const i=this.$c.IL();this.v3t=this.$c.r9(),this.M3t=this.$c.n9(),this.G3t=Math.round(this.v3t*i),this.x3t=Math.round(this.M3t*i),this.oDt()?(this.T3t=Math.floor((t-this.v3t)/2),this._3t=Math.floor((s-this.M3t)/2)):(this.T3t=0,this._3t=0),this.$c.nDt(this.$c.r9(),this.$c.n9())}hDt(i){if("high"===this.L3t)this.EA=this.G3t,this.RA=this.x3t,this.k3t="high";else{let t,s;if(s="off"===this.QFt()?(t=this.$c.r9(),this.$c.n9()):(t=this.$c.EF(),this.$c.PF()),this.G3t<t||this.x3t<s)this.EA=this.G3t,this.RA=this.x3t,this.k3t="high";else if(this.EA=t,this.RA=s,this.k3t="low","scale-inner"===i){const e=t/s,h=this.w3t/this.S3t;h<e?this.EA=this.RA*h:e<h&&(this.RA=this.EA/h)}else if("scale-outer"===i){const r=t/s,n=this.w3t/this.S3t;r<n?this.EA=this.RA*n:n<r&&(this.RA=this.EA/n)}}}IO(){return this.$c}aDt(){return this.c3t[0].canvas}BU(){return this.H3t}oDt(){return this.N3t}uDt(){return this.b3t}lDt(t){if(!Ca.has(t))throw new Error("invalid fullscreen mode");this.P3t=t;const s=this.$c.jD();s.VX(),s.UX()}Fj(){return this.P3t}cDt(t){if(!Ca.has(t))throw new Error("invalid fullscreen mode");this.A3t=t;const s=this.$c.jD();s.VX(),s.UX()}fDt(){return this.A3t}QFt(){return this.oDt()?this.fDt():this.Fj()}dDt(t){if(!Ea.has(t))throw new Error("invalid fullscreen scaling quality");this.L3t=t,this.$c.jD().VX()}pDt(){return this.L3t}SJ(){return this.k3t}static mDt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}bj(){return this.w3t}vj(){return this.S3t}uJ(){return this.EA}lJ(){return this.RA}ZS(t){this.$y=!!t}gDt(t){this.R3t=t}g7(){return this.R3t}yDt(){return this.Gb().mC()}PFt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.B3t=[],this.W3t.clear(),this.H3t.zb(),this.d3t.zb(),this.$c.S$()}kFt(){console.log("[Construct] WebGPU device lost"),this.B3t=[],this.W3t.clear(),this.H3t.zb(),this.$c.S$()}async AFt(t){await this.d3t.Jb(),await this.UPt(),await this.$c.wDt(),console.log("[Construct] WebGL context restored")}async BFt(){await this.UPt(),await this.$c.wDt(),console.log("[Construct] WebGPU device restored")}SDt(){return this.d3t}bDt(){return this.p3t}Gb(){return this.p3t||this.d3t}Q_t(){return this.m3t}mL(){let t="";return t=this.$c.bDt()?"webgpu":"webgl"+this.$c.SDt().T2(),this.$c.Gb().sb()&&(t+="-software"),t}wL(){return this.$c.bDt()?this.$c.bDt().GetAdapterInfoString():this.$c.SDt().TP()}fN(){return"low"===this.k3t?1/this.$c.IL():this.Oj()}Oj(){const t=this.QFt();if("off"===t||"crop"===t)return 1;const s=this.$c.EF(),i=this.$c.PF(),e=s/i,h=this.G3t/this.x3t;return"scale-inner"!==t&&e<h||"scale-inner"===t&&h<e?this.M3t/i:this.v3t/s}VJ(){return"low"===this.SJ()?1:this.Oj()}jJ(){return"low"===this.SJ()?1:this.$c.IL()}vDt(t,s){this.F3t=t,this.D3t=s}MH(s,i,e,t=!0){i=i||this.EA,e=e||this.RA;const h=i/2+this.F3t,r=e/2+this.D3t;if(t){let t=this.cJ();i===this.EA&&e===this.RA||(s.ww(Pa,i/e),t=Pa),s.hR(t)}const n=s.Gw(h,r,s.ew(e),h,r,0,e);s.lR(n)}MDt(t,s=!0){const i=this.bL(),e=this.ML(),h=i/2,r=e/2,n=(s&&t.hR(this.cJ()),t.Gw(h,r,t.ew(e),h,r,0,e));t.lR(n)}xL(){return this.G3t}_L(){return this.x3t}bL(){return this.v3t}ML(){return this.M3t}eN(){return this.T3t}hN(){return this._3t}i$(){return this.c3t.length}GDt(){return"undefined"!=typeof OffscreenCanvas&&this.aDt()instanceof OffscreenCanvas&&("Chromium"!==T.ri.fi||124<=T.ri.ci)}async x$(e,h=!1){if(e<1)throw new Error("invalid HTML layer count");if(this.c3t.length!==e){let t=this.$c.jD().ND(),s={count:e,layersDomState:t.Dz().filter(t=>t.E5()).map(t=>t.N9()),immediate:h,marginLeft:this.T3t,marginTop:this._3t,styleWidth:this.v3t,styleHeight:this.M3t},i;if(i=this.IF()?await this.$c.mO("canvas","set-html-layer-count",s):self.c3_runtimeInterface._OnSetHTMLLayerCount(s),e<this.c3t.length)this.c3t.length=e;else for(const r of i.addedCanvases){r.width=this.G3t,r.height=this.x3t;const n=this.GDt()?"bitmaprenderer":"2d",o=r.getContext(n);if(!o)throw new Error(`failed to acquire '${n}' canvas context`);this.c3t.push({canvas:r,IFt:o})}this.$c.dO()}}yX(t){if(!(t>=this.c3t.length)){const s=this.aDt(),i=this.c3t[t].IFt;this.GDt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}}bJ(s){s.depth=this.$c.m9();let t=this.B3t,i=t.findIndex(t=>t.RM(s)),e;return-1!==i?(e=t[i],t.splice(i,1)):e=this.Gb().rP(s),this.W3t.add(e),e}jU(t){if(!this.W3t.has(t))throw new Error("render target not in use");this.W3t.delete(t),this.B3t.push(t)}V3t(){const t={i2:this.$c.AF()};return"low"===this.SJ()&&(t.width=this.uJ(),t.height=this.lJ()),this.bJ(t)}U3t(t){this.jU(t)}*xDt(){for(const t of this.$c.jD().WX())for(const s of t.Kk()){const i=this.X3t.get(s);i&&(yield i)}}mJ(t){if(!this.Gb().gP())return null;let s=this.X3t.get(t);return s||(s={E4:t,name:t.Wc(),TDt:T.ir(T.Vg.NC,this.d3t),_Dt:0,IDt:0,CDt:0},this.X3t.set(t,s)),s.TDt}EDt(){const t=this.Gb();if(t.gP()&&0===this.J3t){this.J3t=t.KS(),this.K3t=NaN;for(const s of this.xDt())s._Dt=NaN}}RDt(){this.d3t&&this.d3t.gP()&&this.PDt(),this.p3t&&this.p3t.gP()&&this.ADt()}PDt(){if(isNaN(this.K3t)&&(this.K3t=this.$3t.zC(this.z3t,this.J3t),!isNaN(this.K3t))){if(this.$c.vX())for(const t of this.xDt())if(t._Dt=t.TDt.zC(this.z3t,this.J3t),isNaN(t._Dt))return;if(this.$3t.JC(this.J3t),this.q3t=Math.min(this.K3t,1),this.$c.vX()){const i=new Map;for(const h of this.xDt())h.TDt.JC(this.J3t),h.IDt=Math.min(h._Dt,1),i.set(h.E4,h.IDt);for(const r of this.xDt()){const n=r.E4,o=i.get(n)||0,a=o-n.S5().reduce((t,s)=>t+(i.get(s)||0),0);r.CDt=T.lr(a,0,1)}const s=this.$c.ND(),e=this.q3t-s.Dz().reduce((t,s)=>t+(i.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(T.lr(e,0,1),this.q3t,[...this.xDt()])}this.z3t=this.J3t,this.J3t=0}}FDt(){return this.$3t}ADt(){if(0!==this.J3t){for(let t=this.z3t;t<this.J3t;++t){const i=this.Y3t.get(t);if(i&&!i.IC())return}let t=this.$c.ND(),n=T.Do(t.Kq()+1,0),s=0;for(let t=this.z3t;t<this.J3t;++t){const o=this.Y3t.get(t);if(o){let i=o.CC(),e=BigInt(0),h=BigInt(0),r=BigInt(0);for(let t=0,s=Math.min(n.length,i.length/2);t<s;++t){const l=i[2*t],c=i[2*t+1],f=(l!==r&&(e===r||l<e)&&(e=l),c>h&&(h=c),c-l),d=Number(f)/1e9;n[t]+=d}const a=h-e,u=Number(a)/1e9;s+=u}}if(this.q3t=T.lr(s,0,1),this.$c.vX()){const e=t.Kk(),h=new Map;for(let t=0,s=Math.min(e.length,n.length-1);t<s;++t){const g=n[t+1];h.set(e[t],g)}const r=[],p=new Map;for(const[y,w]of h){const S=[...y.v5()].reduce((t,s)=>t+(h.get(s)||0),0);p.set(y,S),r.push({name:y.Wc(),CDt:T.lr(w,0,1),IDt:T.lr(S,0,1)})}const m=this.q3t-t.Dz().reduce((t,s)=>t+(p.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(T.lr(m,0,1),this.q3t,r)}for(let t=this.z3t;t<this.J3t;++t)this.Y3t.delete(t);this.z3t=this.J3t,this.J3t=0}}DDt(t){this.Y3t.set(this.p3t.KS(),t)}ID(){return this.q3t}ODt(t,s,i,e,h,r){return this.Z3t=t,this.Q3t=s,this.tFt.hu(i,e,h,r),this.iFt||(this.iFt=new Promise(t=>{this.eFt=t})),this.iFt}LDt(){if(this.Z3t){let t=this.aDt(),s=this.tFt,i=T.lr(Math.floor(s.fu()),0,t.width),e=T.lr(Math.floor(s.du()),0,t.height),h=s.width(),r=(h=0===h?t.width-i:T.lr(Math.floor(h),0,t.width-i),s.height());if(r=0===r?t.height-e:T.lr(Math.floor(r),0,t.height-e),(0!==i||0!==e||h!==t.width||r!==t.height)&&0<h&&0<r){const n=T.Go(h,r),o=n.getContext("2d");o.drawImage(t,i,e,h,r,0,0,h,r),t=n}T.xo(t,this.Z3t,this.Q3t).then(t=>{this.sFt&&URL.revokeObjectURL(this.sFt),this.sFt=URL.createObjectURL(t),this.iFt=null,this.eFt(this.sFt)}),this.Z3t="",this.Q3t=1}}kDt(){return this.sFt}NDt(t){t?this.hFt++:this.hFt--}BDt(){return 0<this.hFt}WDt(t){const s=this.Gb();if(2===t)this.uFt=T.ir(T.Vg.ab,this.Gb()),this.uFt.mI("Arial"),this.uFt.gI(16),this.uFt.RI("center"),this.uFt.FI("center"),this.uFt.WI(300,200);else if(0===t){const i=this.$c.jDt();i&&i.pH(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.HDt("splash-images/splash-logo.svg").then(t=>{"done"===this.yFt?s.mM(t):this.lFt.cFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.VDt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.yFt?s.mM(t):this.lFt.fFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.VDt("splash-images/splash-website-512.png").then(t=>{"done"===this.yFt?s.mM(t):this.lFt.dFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async HDt(t){t=new URL(t,this.$c.UDt()).toString();const s=await T.mo(t),i=await this.$c.zDt(s,2048,2048);return this.Gb().hP(i,{o2:"high"})}async VDt(t){t=new URL(t,this.$c.UDt()).toString();const s=await T.mo(t);return this.Gb().hP(s,{o2:"high"})}JDt(){this.$c.Yc("runtime","hide-cordova-splash")}qDt(){this.rFt=Date.now(),this.$c.Rf().addEventListener("loadingprogress",this.aFt),this.nFt=requestAnimationFrame(()=>this.$Dt());const t=this.$c.XDt();3!==t&&this.JDt()}async KDt(){const t=this.Gb(),s=(this.oFt=1,this.$c.XDt());4===s&&await this.SFt,this.wFt=null,this.SFt=null,-1!==this.nFt&&(cancelAnimationFrame(this.nFt),this.nFt=-1),this.$c.Rf().removeEventListener("loadingprogress",this.aFt),this.aFt=null,this.uFt&&(this.uFt.er(),this.uFt=null),this.$c.YDt(),t.qR(),this.lFt.cFt&&(t.mM(this.lFt.cFt),this.lFt.cFt=null),this.lFt.fFt&&(t.mM(this.lFt.fFt),this.lFt.fFt=null),this.lFt.dFt&&(t.mM(this.lFt.dFt),this.lFt.dFt=null),t.JR(0,0,0,0),t.$S(),this.yFt="done",this.z3t=t.KS(),3===s&&this.JDt()}$Dt(){if(-1!==this.nFt){const t=this.Gb(),s=(t.qR(),this.nFt=-1,this.$c.gF().jV()),i=this.$c.XDt();if(3!==i&&(this.MDt(t),t.JR(0,0,0,0),t.wR(),t.Cw(),t.bR(null)),0===i)this.ZDt(s);else if(1===i)this.QDt(s,120,0);else if(2===i)this.tOt(s);else if(3===i)T.In();else{if(4!==i)throw new Error("invalid loader style");this.sOt(s)}t.$S(),this.nFt=requestAnimationFrame(()=>this.$Dt())}}tOt(t){t?this.uFt.EI(1,0,0):this.uFt.EI(.6,.6,.6),this.uFt.Zc(Math.round(100*this.oFt)+"%");const s=this.v3t/2,i=this.M3t/2,e=(Aa.Yu(s-150,i-100,150+s,100+i),this.Gb());e.bR(this.uFt.vM()),e.SS(Aa,this.uFt.yC())}QDt(t,s,i){const e=this.Gb(),h=(e.Dw(),t?e.gR(1,0,0,1):e.gR(.118,.565,1,1),this.v3t/2),r=this.M3t/2,n=s/2;I.hu(h-n,r-4+i,Math.floor(s*this.oFt),8),e.Rect(I),I.hu(h-n,r-4+i,s,8),I.offset(-.5,-.5),I.Tu(.5,.5),e.gR(0,0,0,1),e.xS(I),I.Tu(1,1),e.gR(1,1,1,1),e.xS(I)}ZDt(t){const s=this.Gb(),i=this.$c.jDt();if(i){const e=i.vM();if(e){const h=e.Xp(),r=e.om(),n=this.v3t/2,o=this.M3t/2,a=h/2,u=r/2;Aa.Yu(n-a,o-u,n+a,o+u),s.bR(e),s.Hu(Aa),this.QDt(t,h,16+u)}else this.QDt(t,120,0)}else this.QDt(t,120,0)}sOt(t){let s=this.Gb(),i=this.lFt.cFt,e=this.lFt.fFt,h=this.lFt.dFt,r=Date.now(),n=(0===this.pFt&&(this.rFt=r),this.$c.iOt()||this.$c.eOt()&&!this.$c.hOt()),o=n?0:200,a=n?0:3e3,u=1,l=("fade-in"===this.yFt?u=Math.min((r-this.rFt)/300,1):"fade-out"===this.yFt&&(u=Math.max(1-(r-this.gFt)/300,0)),s.Dw(),s.gR(.231*u,.251*u,.271*u,u),I.set(0,0,this.v3t,this.M3t),s.Rect(I),Math.ceil(this.v3t)),c=Math.ceil(this.M3t),f,d;256<this.M3t?(s.gR(.302*u,.334*u,.365*u,u),f=l,d=Math.max(.005*c,2),I.hu(0,.8*c-d/2,f,d),s.Rect(I),t?s.gR(u,0,0,u):s.gR(.161*u,.953*u,.816*u,u),f=l*this.oFt,I.hu(.5*l-f/2,.8*c-d/2,f,d),s.Rect(I),s.gR(u,u,u,u),s.Cw(),e&&(f=1.5*T.lr(.22*c,105,.6*l),d=f/8,I.hu(.5*l-f/2,.2*c-d/2,f,d),s.bR(e),s.Rect(I)),i&&(f=Math.min(.395*c,.95*l),d=f,I.hu(.5*l-f/2,.485*c-d/2,f,d),s.bR(i),s.Rect(I)),h&&(f=1.5*T.lr(.22*c,105,.6*l),d=f/8,I.hu(.5*l-f/2,.868*c-d/2,f,d),s.bR(h),s.Rect(I))):(s.gR(.302*u,.334*u,.365*u,u),f=l,d=Math.max(.005*c,2),I.hu(0,.85*c-d/2,f,d),s.Rect(I),t?s.gR(u,0,0,u):s.gR(.161*u,.953*u,.816*u,u),f=l*this.oFt,I.hu(.5*l-f/2,.85*c-d/2,f,d),s.Rect(I),s.gR(u,u,u,u),s.Cw(),i&&(f=.55*c,d=f,I.hu(.5*l-f/2,.45*c-d/2,f,d),s.bR(i),s.Rect(I))),this.pFt++,"fade-in"===this.yFt&&300<=r-this.rFt&&2<=this.pFt&&(this.yFt="wait",this.mFt=r),"wait"===this.yFt&&r-this.mFt>=a&&1<=this.oFt&&(this.yFt="fade-out",this.gFt=r),("fade-out"===this.yFt&&r-this.gFt>=300+o||n&&1<=this.oFt&&r-this.rFt<500)&&this.wFt()}}}{let H=self.Os,V=self.C3Debugger,i={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},n=!0;H.rOt=class extends H.Qh{constructor(t){t=Object.assign({},i,t),super(),this.nOt=t.messagePort,this.oOt=t.runtimeBaseUrl,this.aOt=t.previewUrl,this.uOt=!!t.headless,this.lOt=!!t.hasDom,this.cOt=!!t.isInWorker,n=t.ife,this.fOt=!!t.useAudio,this.dOt=t.exportType,this.pOt=t.isNWjs,this.UH=!!t.isiOSCordova,this.mOt=!!t.isiOSWebView,this.gOt=!!t.isWindowsWebView2,this.yOt=!!t.isAnyWebView2Wrapper,this.wOt=!!t.isFBInstantAvailable,this.SOt=!("preview"!==this.dOt||!t.isDebug),this.bOt=this.SOt,this.vOt=this.SOt,this.MOt=0,this.GOt=[],this.xOt=[],this.TOt=!1,this._Ot="",this.IOt="",this.COt="",this.EOt="",this.ROt=0,this.POt=0,this.NA=self.devicePixelRatio,this.AOt=0,this.FOt=0,this.DOt=0,this.OOt=0,this.LOt=0,this.kOt=!1,this.Tg=!0,this.NOt=!1,this.BOt=!1,this.WOt=!1,this.jOt=null,this.e7=H.ir(H.WH,this,t),this.rq=H.ir(H.xX,this),this.pft=H.ir(H.c0t,this),this.HOt=H.ir(H.FL,this,t.wrapperComponentIds),this.VOt=H.ir(H.oAt,this),this.eQ=H.ir(H.zX,this),this.UOt=H.ir(H.sut,this),this.zOt=H.ir(H.eut,this),this.wut=H.ir(H.cut,this),this.bg=H.ir(H.og,{lg:t=>this.JOt(t),dg:t=>this.qOt(t)}),this.$Ot=new Map,this.XOt=[],this.KOt=new Map,this.YOt=new Map,this.ZOt=0,this.QOt=[],this.tLt=new Set,this.sLt=[],this.iLt=[],this.eLt=new Map,this.hLt=!1,this.rLt=!1,this.nLt=0,this.oLt=0,this.aLt=new Map,this.uLt=new Set,this.lLt=new Set,this.cLt=[],this.fLt=[],this.dLt=null,this.pLt=!1,this.mLt="vsync",this.m2="trilinear",this.gLt=!1,this.yLt=!0,this.wLt=!1,this.SLt=!1,this.bLt=null,this.vLt={MLt:t=>{this.nFt=-1,this.GLt=-1,this.gY(t)},xLt:t=>{this.GLt=-1,this.gY(t,!1,"skip-render")},TLt:()=>{this.nFt=-1,this.r3()}},this.nFt=-1,this.GLt=-1,this._Lt=0,this.ILt=0,this.CLt=!1,this.ELt=!1,this.RLt=!1,this.PLt=!0,this.ALt=!0,this.FLt=!1,this.DLt=0,this.OLt=new H.t1(1),this.LLt=()=>Math.random(),this.kLt=0,this.NLt=0,this.BLt=0,this.WLt=0,this.jLt=0,this.KIt=1,this.HLt=1/30,this.VLt=0,this.ULt=H.ir(H.c0),this.zLt=H.ir(H.c0),this.JLt=H.ir(H.c0),this.qLt=new Map,this.$Lt=-1,this.XLt=0,this.KLt=0,this.YLt=-1,this.ZLt=0,this.QLt=0,this.tkt=0,this.skt=!1,this.ikt="",this.ekt=!1,this.hkt="",this.g4=null,this.rkt="",this.nkt=null,this.okt=null,this.t_t=H.ir(H.Event.Rf),this.akt=new Map,this.ukt=new Map,this.lkt=0,this.ckt=!1,this.fkt=!1,this.dkt=!1,this.pkt=[],this.mkt={pretick:H.ir(H.Event,"pretick",!1),tick:H.ir(H.Event,"tick",!1),tick2:H.ir(H.Event,"tick2",!1),instancecreate:H.ir(H.Event,"instancecreate",!1),instancedestroy:H.ir(H.Event,"instancedestroy",!1),beforelayoutchange:H.ir(H.Event,"beforelayoutchange",!1),layoutchange:H.ir(H.Event,"layoutchange",!1)},this.mkt.instancecreate.f6=null,this.mkt.instancedestroy.f6=null,this.kq=H.ir(H.Event.Rf),this.gkt=null;const s=(t,s)=>H.$It.PPt(this,t,s);this.ykt=H.ir(H.b0,s),this.wkt=H.ir(H.b0,s),this.Skt=H.ir(H.b0,s),this.bkt=H.ir(H.vkt,this,t.jobScheduler),t.canvas&&(this.dLt=H.ir(H.l3t,this)),this.nOt.onmessage=t=>this._OnMessageFromDOM(t.data),this.h4("runtime","visibilitychange",t=>this.Mkt(t)),this.h4("runtime","wrapper-extension-message",t=>this.Gkt(t)),this.h4("runtime","opus-decode",t=>this.WO(t.arrayBuffer)),this.h4("runtime","get-remote-preview-status-info",()=>this.xkt()),this.h4("runtime","js-invoke-function",t=>this.B0t(t)),this.h4("runtime","go-to-last-error-script",self.goToLastErrorScript),this.h4("runtime","offline-audio-render-completed",t=>this.Tkt(t)),this.t_t.addEventListener("window-blur",t=>this._kt(t)),this.t_t.addEventListener("window-focus",()=>this.Ikt()),this.eQ.xK(),this.zOt.xK(),this.Ckt=null,this.Ekt=new WeakMap,this.Rkt={keyboard:null,XD:null,KD:null,YD:null},this.Pkt=new WeakMap,this.Akt=[]}static jM(t){return H.ir(H.rOt,t)}er(){H.Pn(this.XOt),this.KOt.clear(),this.YOt.clear(),this.rq.er(),this.rq=null,this.pft.er(),this.pft=null,this.HOt.er(),this.HOt=null,this.e7.er(),this.e7=null,this.VOt.er(),this.VOt=null,this.eQ.er(),this.eQ=null,this.UOt.er(),this.UOt=null,this.zOt.er(),this.zOt=null,this.wut.er(),this.wut=null,this.bg.er(),this.bg=null,this.dLt&&(this.dLt.er(),this.dLt=null),this.t_t.er(),this.t_t=null,this.Fkt=null}["_OnMessageFromDOM"](t){const s=t.type;if("event"===s)this.Dkt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.Okt(t)}}Dkt(t){if(this.dkt){const s=t.component,i=t.handler,e=t.data,h=t.dispatchOpts,r=!(!h||!h.dispatchRuntimeEvent),n=!(!h||!h.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const u=new H.Event(i);u.data=e,this.t_t.Wf(u)}if(n){const l=new H.Event(i,!0);for(const[c,f]of Object.entries(e))l[c]=f;this.bX(l)}}const a=this.akt.get(s);if(a){const d=a.get(i);if(d){let t=null;try{t=d(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.Lkt(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this.Lkt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.Lkt(o,!1,""+t)}):this.Lkt(o,!0,t))}else r||n||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`)}else r||n||console.warn(`[Runtime] No DOM event handlers for component '${s}'`)}else this.pkt.push(t)}Lkt(t,s,i){this.nOt.postMessage({type:"result",responseId:t,isOk:s,result:i})}Okt(t){const s=t.responseId,i=t.isOk,e=t.result,h=this.ukt.get(s);i?h.resolve(e):h.reject(e),this.ukt.delete(s)}h4(t,s,i){let e=this.akt.get(t);if(e||(e=new Map,this.akt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}Yc(t,s,i,e){this.nOt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}mO(t,s,i,e){const h=this.lkt++,r=new Promise((t,s)=>{this.ukt.set(h,{resolve:t,reject:s})});return this.nOt.postMessage({type:"event",component:t,handler:s,data:i,responseId:h},e),r}h8(t,s,i,e=-1){this.Yc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}r8(t,s,i){const e=this.lkt++,h=new Promise((t,s)=>{this.ukt.set(e,{resolve:t,reject:s})});return this.h8(t,s,i,e),h}Gkt(t){if(-1!==t.asyncId){const s=t.asyncId,i=this.ukt.get(s);i.resolve(t.params),this.ukt.delete(s)}else this.Dkt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}b4(t,s,i){this.h4("wrapper-extension:"+t,s,i)}w4(t){return this.HOt.w4(t)}kkt(t){if(!this.vX())throw new Error("not in debug mode");this.Yc("runtime","post-to-debugger",t)}async QIt(t){H.Cbt(this),this.vX()?await V.QIt(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const[s]=await Promise.all([this.e7.po("data.json"),this.Nkt(),this.bkt.QIt()]);if(await this.Bkt(s),await this.Wkt(t),this.iOt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.SDt()){const i=this.SDt();console.info(`[C3 runtime] Hosted in ${this.IF()?"worker":"DOM"}, rendering with WebGL ${i.T2()} [${i.TP()}]`)}else this.bDt()&&console.info(`[C3 runtime] Hosted in ${this.IF()?"worker":"DOM"}, rendering with WebGPU [${this.bDt().GetAdapterInfoString()}]`);this.Gb().sb()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.dkt=!0;for(const e of this.pkt)this.Dkt(e);H.Pn(this.pkt),this.dLt&&this.dLt.qDt();for(const h of t.runOnStartupFunctions)this.GOt.push(this.jkt(h));if(await Promise.all([this.e7.BV(),...this.GOt]),H.Pn(this.GOt),!this.e7.jV())return this.dLt&&await this.dLt.KDt(),await this.t_t.Nf(new H.Event("beforeruntimestart")),await this.qR(),this.nOt.postMessage({type:"runtime-ready"}),this;this.dLt&&this.dLt.JDt()}async jkt(t){try{await t(this.Ckt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async Bkt(t){const s=t.project,i=(this._Ot=s[0],this.IOt=s[16],this.COt=s[31],this.EOt=s[38],s[39]||"loading-logo.png"),e=(this.gLt=!!s[9],this.ROt=this.DOt=s[10],this.POt=this.OOt=s[11],this.VOt.qAt(this.ROt,this.POt),this.AOt=this.ROt/2,this.FOt=this.POt/2,this.mLt=s[37],this.pLt=!!s[40],this.m2=s[14],this.NOt=s[15],this.BOt=s[42],this.WOt=s[17],this.kOt=!!s[18],this.LOt=s[19],this.oLt=s[21],this.wLt=s[22],this.e7);if(e.gV(s[45]),e.JV(s[7],s[25]),e.wV(s[8]),e.SV(s[32]),e.vV(s[28]),e.VV(s[29]),0===this.LOt){let t;(t="flat"===e.OO()?e.MV()+i:i)&&(this.jOt=e.AV({url:t}))}this.dLt&&(this.dLt.lDt(H.l3t.mDt(s[12])),this.dLt.dDt(s[23]?"high":"low"),this.dLt.ZS(0!==s[24]),this.dLt.bFt(s[34]),this.dLt.gDt(s[41]),this.dLt.vFt(s[13]),this.dLt.MFt(s[30]),this.dLt.TFt(s[46],s[47]),this.dLt.xFt(s[26]),this.dLt._Ft(s[48]));const h=s[43],r=(h&&await this.Hkt(h),this.Vkt(),this.HOt.jxt(),this.cLt=self.Ukt(),s[2]);for(const u of r[1])this.HOt.Hxt(u);for(const l of r[0])this.HOt.Wxt(l);this.cLt=self.Ukt(),this.zkt(),this.HOt.Jxt();for(const c of s[3]){const f=H.aut.jM(this,this.XOt.length,c);this.XOt.push(f),this.KOt.set(f.Wc().toLowerCase(),f),this.YOt.set(f.Oz(),f)}for(const d of s[4]){const p=this.XOt[d[0]];p.N_t(d)}for(const m of s[27]){const g=m.map(t=>this.XOt[t]);this.QOt.push(H.ir(H.kIt,this,g))}this.Jkt();for(const y of this.XOt)y.W_t();for(const w of s[5])this.rq.jM(w);const n=s[1];if(n){const S=this.rq.OX(n);S&&this.rq.FX(S)}for(const b of s[35])this.UOt.jM(b);for(const v of s[33])this.eQ.jM(v);for(const M of s[44])this.zOt.jM(M);this.zOt.nut()||(this.zOt.er(),this.zOt=null);for(const G of s[49])this.wut.jM(G);this.wut.gut()||(this.wut.er(),this.wut=null);for(const x of s[6])this.pft.jM(x);this.pft.H0t(),this.qkt(),H.Pn(this.cLt),this.Pk();let o="any",a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.Yc("runtime","set-target-orientation",{targetOrientation:o})}async Hkt(t){const s=t.format;"image-sequence"===s?this.bLt=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===s?this.bLt=new self.C3ExportToGIF(this,t):"webm"===s?this.bLt=new self.C3ExportToWebMVideo(this,t):"mp4"===s&&(this.bLt=new self.C3ExportToMP4Video(this,t)),this.mLt="unlimited-frame",this.dLt.lDt("off"),this.NA=1,self.devicePixelRatio=1,await this.mO("runtime","set-exporting-to-video",{message:this.bLt.GetExportingMessageForPercent(0),duration:this.bLt.W6()})}XDt(){return this.LOt}qFt(){return null!==this.bLt}$kt(){return this.bLt.W6()}Xkt(){return this.bLt.GetFramerate()}Kkt(){return this.bLt.QIt({width:this.dLt.xL(),height:this.dLt._L()})}Ykt(){const t=this._Lt/this.Xkt();return this.bLt.AddFrame(this.dLt.aDt(),t)}Zkt(){this.bLt&&this.bLt.fit()}Tkt(t){this.bLt.OnOfflineAudioRenderCompleted(t)}Qkt(){return this.bLt.$S()}eOt(){return this.wOt}Rg(){return this.Tg}SO(t){this.GOt.push(t)}_$(t){this.TOt=!!t}t5t(t){this.TOt&&this.xOt.push(t)}A$(){return this.xOt}P_t(){return this.ZOt++}H_t(){return this.ZOt}WPt(t){this.tLt.add(t)}jPt(t){this.tLt.delete(t)}JFt(){return this.tLt}async Wkt(t){this.dLt&&(await this.dLt.Go(t),this.dLt.WDt(this.LOt))}async Nkt(){const h=this.e7;if(!h.MO("audio/webm; codecs=opus")){let t=null,s=h.yV(),i=s+"opus.wasm.js",e=s+"opus.wasm.wasm";try{t=this.s5t()&&h.GV()?await h.TV(e):await h.yo(e)}catch(t){return void console.info("Failed to fetch Opus decoder WASM; assuming project has no Opus audio.",t)}this.i5t(t,"opus-decoder-wasm"),await this.e5t([i])}}async WO(t){const s=await this.h5t("OpusDecode",{arrayBuffer:t},[t]);return s}async qR(){this.CLt=!0,this.kLt=Date.now();let s=null,t=new Promise(t=>s=t);if(this.kOt){for(const h of this.XOt)h.Iz()||h.Y_t()||!h.NL()||h.BMt();(async()=>{await this.e7.BV(),await t,this.Tg=!1,this.r5t()})()}else this.Tg=!1;this.e7.WV(),this.vX()&&V.RuntimeInit(n);for(const r of this.rq.UD())r.K$();this.qFt()&&await this.Kkt();const i=this.rq.DX(),e=(await i.l$(null,this.Gb()),await i.b$(!0),this.XLt=performance.now(),s(),this.kOt||this.r5t(),await this.mO("runtime","before-start-ticking"));e.isSuspended&&!this.qFt()?(this.DLt++,this.FLt=!0):this.gY()}r5t(){this.t4(H.V$.H$.j$.n5t,null,null),this.Yc("runtime","register-sw")}$gt(t){t=Math.floor(t);const s=this.cLt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}zkt(){for(const t of self.o5t){const s=H.first(Object.keys(t));this.fLt.push(s)}}f1t(t){t=Math.floor(t);const s=this.fLt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}a5t(){return this.lOt}u5t(){return this.uOt}IF(){return this.cOt}UDt(){return this.oOt}l5t(){return this.aOt}VF(){return this.pft}iD(){return this.pft.iD()}i1t(){return this.pft.i1t()}XF(){return this.pft.XF()}e1t(){return this.pft.e1t()}_bt(){return 0===this.i1t().Fft()}r1t(){return this.pft.r1t()}EPt(){return this.HOt}zyt(){return this.HOt.zyt()}ez(t){if((t=Math.floor(t))<0||t>=this.XOt.length)throw new RangeError("invalid index");return this.XOt[t]}c5t(t){return this.KOt.get(t.toLowerCase())||null}p8(t){return this.YOt.get(t)||null}Pht(t){const s=H.FL.ZL(t);return s?s.ek():null}_z(){return this.XOt}*f5t(){for(const t of this.XOt)t.Iz()||(yield*t.instances())}Rf(){return this.t_t}BF(){return this.kq}bX(t){t.runtime=this.DL();const s=this.vX()&&!this.pft.Ek();s&&V.StartMeasuringScriptTime(),this.kq.dispatchEvent(t),s&&V.AddScriptTime()}N$(t){return t.runtime=this.DL(),this.kq.Nf(t)}EF(){return this.ROt}PF(){return this.POt}d5t(t,s){if(this.ROt!==t||this.POt!==s){this.ROt=t,this.POt=s;const i=this.jD();i.VX(),i.UX()}}r9(){return this.DOt}n9(){return this.OOt}nDt(t,s){if(this.DOt!==t||this.OOt!==s){this.DOt=t,this.OOt=s;const i=this.jD();i.VX(),i.UX()}}$Ft(t){this.qFt()||(this.NA=t)}IL(){return this.NA}iJ(){return this.AOt}eJ(){return this.FOt}gL(){return this.dLt}uJ(){return this.dLt?this.dLt.uJ():this.DOt}lJ(){return this.dLt?this.dLt.lJ():this.OOt}fN(){return this.dLt?this.dLt.fN():1}Oj(){return this.dLt?this.dLt.Oj():1}VJ(){return this.dLt?this.dLt.VJ():1}jJ(){return this.dLt?this.dLt.jJ():1}eN(){return this.dLt?this.dLt.eN():0}hN(){return this.dLt?this.dLt.hN():0}p5t(){return this.dLt?this.dLt.bL():0}m5t(){return this.dLt?this.dLt.ML():0}Fj(){return this.dLt?this.dLt.Fj():"off"}bJ(t){return this.dLt?this.dLt.bJ(t):null}jU(t){this.dLt&&this.dLt.jU(t)}wJ(){return this.NOt}HFt(){return this.BOt}VFt(){return this.WOt}ID(){return this.dLt?this.dLt.ID():NaN}GM(){return"nearest"!==this.AF()}ED(){return this.mLt}RD(t){this.mLt!==t&&(this.mLt=t,-1!==this.nFt||-1!==this.GLt)&&(this.g5t(),this.y5t())}AF(){return this.m2}O_t(){return this.kOt}jDt(){return this.jOt}YDt(){this.jOt&&(this.jOt.oI(),this.jOt.er(),this.jOt=null)}jD(){return this.rq}ND(){return this.rq.ND()}jQ(){return this.eQ}w5t(){return this.UOt}ECt(){return this.zOt}But(){return this.wut}gF(){return this.e7}AV(t){return this.e7.AV(t)}Tk(t,s,i,e,h,r){if(r&&this.zOt){if(t instanceof H.aut&&t.Iz()){const o=t.Pmt(),a=Math.floor(this.kD()*o.length);return this.Tk(o[a],s,i,e,h,r)}const n=this.zOt.out(t,r);if(n){const u=this.fz(n,s,!1,i,e,!1,h,void 0,h);return this.zOt.uut(u,r),u}}return this.fz(t,s,!1,i,e,!1,h,void 0,h)}fz(t,s,i,e,h,r,n,o,a){let u=null,l=null;if(t instanceof H.aut){if((l=t).Iz()){const b=l.Pmt(),v=Math.floor(this.kD()*b.length);l=b[v]}u=l.rz()}else u=t,l=this.ez(u[1]);const c=l.uk().NL();if(this.Tg&&c&&!l.Y_t())return null;const f=s;c||(s=null);let d;d=i&&!r&&u&&!this.aLt.has(u[2])?u[2]:this.oLt++;const p=u?u[0]:null,m=H.ir(H.Instance,{runtime:this,pN:l,E4:s,ZIt:p,iCt:u?u[3]:null,uid:d,tags:u?u[6]:null});this.aLt.set(d,m);let g=null,y=(c&&(g=m.nO(),void 0!==e&&void 0!==h&&(g.sv(e),g.nv(h)),l.TIt(!0)),s&&(a||s.pz(m,!0),s.HD().f$(l)),this.nLt++,!0);if(o){const M=o.mN();if(M.IN()&&l.IN()){const G=l.a$(),x=M.a$();G===x&&(y=!1)}}if(l.IN()&&!i&&!r&&y){const T=new Set;for(const _ of l.a$().q$())if(_!==l){const I=this.S5t(_,g,T);if(I){const C=this.fz(I,f,!1,g?g.tv():e,g?g.rv():h,!0,!1,void 0,a);m.$$(C)}else{const N=this.fz(_,f,!1,g?g.tv():e,g?g.rv():h,!0,!1,void 0,a);m.$$(N)}}for(const E of m.CN()){E.$$(m);for(const R of m.CN())E!==R&&E.$$(R)}}if(c&&!i&&n&&this.b5t(m,p,g,s,e,h,a),l.IN()&&!i&&!r&&n)for(const P of m.CN()){const A=P.nO();if(A){const B=P.uk(),F=P.mN().rz()[0];B.NL()?this.b5t(P,F,A,s,A.tv(),A.rv(),a):this.b5t(P,F,A,s,void 0,void 0,a)}}if(!r&&n){void 0===e&&(e=p[0]),void 0===h&&(h=p[1]);const D=g.aB(),W=e-g.tv()+D.tv(),j=h-g.rv()+D.rv();D.P4(W,j)}l.bIt();const L=u?H.Vn(u[5]):null,k=u?u[4].map(t=>H.Vn(t)):null,w=c&&p&&p[13];if(w&&m.aCt(),m.X_t(L,k),w){const O=p[13];m.s6().iGt(O[2],O[0],O[1])}this.iLt.push(m),this.hLt=!0,this.vX()&&V.InstanceCreated(m);const S=this.mkt.instancecreate;return S.f6=m,this.t_t.dispatchEvent(S),m}_Et(t){const s=t[0],i=t[1],e=t[2],h=t[6];if(h)return h;const r=this.rq.LX(s),n=r.oO(i);return n.az(e)}S5t(t,s,i){const e=s?.CCt()??[];for(const h of e){const r=this._Et(h),n=!!h[4],o=this.ez(r[1]);if(!i.has(r)&&t===o&&n)return i.add(r),r}}b5t(a,t,s,u,l,c,f){const i=s.qRt(),e=s.CCt();if(a.nO().$Rt(i),e){void 0===l&&(l=t[0]),void 0===c&&(c=t[1]);const d=new Set,p=t[0],m=t[1];for(const g of e){let t=g[0],s=g[1],i=g[2],e=g[3],h=!!g[4],r=g[5],n=g[6],o;if(n)o=n;else{const b=this.rq.LX(t),v=b.oO(s);o=v.az(i)}const y=this.ez(o[1]),w=a.RCt(y),S=d.has(y);if(w&&!S&&h){const M=a.PCt(y),G=(M.nO().QIt(o[0]),l+o[0][0]-p),x=c+o[0][1]-m;M.nO().P4(G,x),M.nO().$Rt(r),a.gB(M,{vB:!!(e>>0&1),GB:!!(e>>1&1),TB:!!(e>>2&1),IB:!!(e>>3&1),EB:!!(e>>4&1),NB:!!(e>>5&1),PB:!!(e>>6&1),DB:!!(e>>7&1),LB:!!(e>>8&1)}),d.add(y)}else{const T=l+o[0][0]-p,_=c+o[0][1]-m,I=this.fz(o,u,!1,T,_,!1,!0,a,f);I.nO().$Rt(r),a.gB(I,{vB:!!(e>>0&1),GB:!!(e>>1&1),TB:!!(e>>2&1),IB:!!(e>>3&1),EB:!!(e>>4&1),NB:!!(e>>5&1),PB:!!(e>>6&1),DB:!!(e>>7&1),LB:!!(e>>8&1)})}}}}MN(i){if(!this.uLt.has(i)){let t=i.mN(),s=this.eLt.get(t);if(s){if(s.has(i))return;s.add(i)}else(s=new Set).add(i),this.eLt.set(t,s);if(this.vX()&&V.InstanceDestroyed(i),i.lCt(),this.hLt=!0,i.IN())for(const e of i.CN())this.MN(e);for(const h of i.children())h.BB()&&this.MN(h);if(!this.rq.Rk()&&!this.skt){const r=this.VF();r.Ik(!0),i.jCt(),r.Ik(!1)}i.HCt(this.rq.Rk())}}Pk(){this.hLt&&(this.rLt=!0,this.v5t(),this.M5t(),this.rLt=!1,this.hLt=!1,this.dO())}v5t(){for(const t of this.iLt){const s=t.mN();s.pz(t);for(const i of s.S1t())i.pz(t),i.bIt()}H.Pn(this.iLt)}M5t(){this.t_t.Gf(!0);for(const[t,s]of this.eLt.entries())this.G5t(t,s),s.clear();this.eLt.clear(),this.t_t.Gf(!1)}G5t(t,s){for(const i of s){const e=this.mkt.instancedestroy,h=(e.f6=i,this.t_t.dispatchEvent(e),this.aLt.delete(i.EN()),this.qLt.delete(i),i.nO());h&&(h.YRt(),h.wz(),h.lCt()),this.uLt.add(i),this.nLt--}H.Wn(t.bk(),s),t.bIt(),this.lLt.add(t);for(const r of t.S1t())H.Wn(r.bk(),s),r.bIt(),this.lLt.add(r);if(t.uk().NL()){const n=new Set([...s].map(t=>t.nO().oO()));for(const o of n)o.P9(s)}}MIt(){return this.iLt}*Rvt(t){for(const s of this.MIt())t.Iz()?s.mN().Ibt(t)&&(yield s):s.mN()===t&&(yield s)}$_t(){return this.oLt++}K_t(t,s){this.aLt.set(t,s)}u8(t){this.ALt!==(t=!!t)&&(this.ALt=!!t,this.ALt)&&this.FLt&&(this.f8(!1),this.FLt=!1)}l8(){return this.ALt}S$(){this.t_t.dispatchEvent(H.ir(H.Event,"renderercontextlost")),this.f8(!0);for(const s of this.XOt)!s.Iz()&&s.Z_t()&&s.y$();const t=this.ND();t&&t.S$(),H.Xxt.m7(),H.DV.m7()}async wDt(){await this.ND().l$(null,this.Gb()),this.t_t.dispatchEvent(H.ir(H.Event,"renderercontextrestored")),this.f8(!1),this.dO()}Mkt(t){if(this.ALt){const s=t.hidden;this.f8(s),(this.FLt=s)||this.dO()}}_kt(t){this.iOt()&&this.wLt&&!H.ri.gi&&!t.data.parentHasFocus&&(this.f8(!0),this.SLt=!0)}Ikt(){this.SLt&&(this.f8(!1),this.SLt=!1)}y5t(){const t=this.vLt;"vsync"===this.mLt?-1===this.nFt&&(this.nFt=self.requestAnimationFrame(t.MLt)):"unlimited-tick"===this.mLt?(-1===this.GLt&&(this.GLt=H.io(t.xLt)),-1===this.nFt&&(this.nFt=self.requestAnimationFrame(t.TLt))):-1===this.GLt&&(this.GLt=H.io(t.MLt))}g5t(){-1!==this.nFt&&(self.cancelAnimationFrame(this.nFt),this.nFt=-1),-1!==this.GLt&&(H.eo(this.GLt),this.GLt=-1)}uD(){return 0<this.DLt}f8(t){if(!this.qFt()){const s=this.uD(),i=(this.DLt+=t?1:-1,this.DLt<0&&(this.DLt=0),this.uD());if(!s&&i)console.log("[Construct] Suspending"),this.g5t(),this.t_t.dispatchEvent(H.ir(H.Event,"suspend")),this.t4(H.V$.H$.j$.x5t,null,null);else if(s&&!i){console.log("[Construct] Resuming");const e=performance.now();this.NLt=e,this.XLt=e,this.$Lt=0,this.KLt=0,this.YLt=0,this.ZLt=0,this.tkt=0,this.QLt=0,this.t_t.dispatchEvent(H.ir(H.Event,"resume")),this.t4(H.V$.H$.j$.T5t,null,null),this.z1t()||this.gY(e)}}}Kj(t){this.ykt.Ql(t)}t8(t){this.wkt.Ql(t)}Zj(t){this.Skt.Ql(t)}Yj(t){this.ykt.u0(t)}s8(t){this.wkt.u0(t)}Qj(t){this.Skt.u0(t)}_5t(){const t=globalThis.Jj;this.ykt.Z0(!0);for(const s of this.ykt)s instanceof t?s.u4():s.gY();this.ykt.Z0(!1)}I5t(){const t=globalThis.Jj;this.wkt.Z0(!0);for(const s of this.wkt)s instanceof t?s.e8():s.Ext();this.wkt.Z0(!1)}C5t(){const t=globalThis.Jj;this.Skt.Z0(!0);for(const s of this.Skt)s instanceof t?s.c4():s.GGt();this.Skt.Z0(!1)}*E5t(){const s=globalThis.Jj;this.ykt.Z0(!0);for(const i of this.ykt){let t;t=i instanceof s?i.u4():i.gY(),H.Fo(t)&&(yield*t)}this.ykt.Z0(!1)}*R5t(){const s=globalThis.Jj;this.wkt.Z0(!0);for(const i of this.wkt){let t;t=i instanceof s?i.e8():i.Ext(),H.Fo(t)&&(yield*t)}this.wkt.Z0(!1)}*P5t(){const s=globalThis.Jj;this.Skt.Z0(!0);for(const i of this.Skt){let t;t=i instanceof s?i.c4():i.GGt(),H.Fo(t)&&(yield*t)}this.Skt.Z0(!1)}async gY(a,t,s){this.RLt=!0;const u="background-wake"===s,l="background-wake"!==s&&"skip-render"!==s,c=this.jD(),f=this.gL();if(this.CLt&&(!this.uD()||t||u)){let t=performance.now(),s=(this.ELt=!0,this.A5t(a||0),this.YLt++,this.F5t(),this.D5t()),i=(this.xvt()&&await s,this.t_t.Bf(this.mkt.pretick)),e=(i instanceof Promise&&await i,this.O5t()),h=(this.xvt()&&await e,this.L5t()&&await this.k5t(),c.JD()&&await this.N5t(),this.B5t()),r=(this.xvt()&&await h,c.ND()),n=r.e$(),o=!1;if(-1!==n&&(r.h$(),f.i$()!==n)){const d=this.gL().x$(n);this.IF()&&(o=!0,await d)}this.Yc("canvas","update-html-layer-dom-state",{layersDomState:r.Dz().filter(t=>t.E5()).map(t=>t.N9())}),l&&this.r3(),o&&this.Yc("canvas","cleanup-html-layers"),this.qFt()&&(await this.Ykt(),this.mD()>=this.$kt())?this.Qkt():(this.uD()||u||this.y5t(),this._Lt++,this.ILt++,this.ELt=!1,this.QLt+=performance.now()-t)}}async D5t(){const t=this.pft,s=this.vX();this.Pk(),t.Ik(!0),this.F1t(this.ND()),s&&V.StartMeasuringTime(),this.xvt()?await t.fdt():t.odt(),s&&V.AddEventsTime(),this.D1t(),t.Ik(!1),this.Pk(),t.Ik(!0)}async O5t(){const t=this.vX(),s=this.xvt(),i=this.t_t,e=this.mkt,h=this.gkt;t&&V.StartMeasuringTime(),s?await this.W5t(this.E5t()):this._5t(),s?await this.W5t(this.R5t()):this.I5t(),t&&V.AddBehaviorTickTime(),t&&V.StartMeasuringTime(),s?await this.j5t(e.tick):i.dispatchEvent(e.tick),t&&V.AddPluginTickTime(),this.pft.Ik(!1),this.bX(h.tick)}async B5t(){const t=this.pft,s=this.t_t,i=this.mkt,e=this.vX(),h=this.xvt();e&&V.StartMeasuringTime(),h?await t.O1t(this.rq):t.A1t(this.rq),e&&V.AddEventsTime(),this.VOt.bAt(),this.F5t(),this.PLt=!1,t.Ik(!0),e&&V.StartMeasuringTime(),h?await this.W5t(this.P5t()):this.C5t(),e&&V.AddBehaviorTickTime(),e&&V.StartMeasuringTime(),h?await this.j5t(i.tick2):s.dispatchEvent(i.tick2),e&&V.AddPluginTickTime(),t.Ik(!1),h&&await t.J1t()}F5t(){if(0!==this.uLt.size){const t=this.t_t;t.Gf(!0);for(const s of this.lLt)s.sdt().Vct(this.uLt);this.lLt.clear(),this.pft.pdt(this.uLt);for(const i of this.uLt)i.er();this.uLt.clear(),t.Gf(!1)}}async N5t(){let t=this.jD(),s=0;for(;t.JD()&&s++<10;)await this.H5t(t.HX())}A5t(t){let s=0;if(this.qFt())s=1/this.Xkt(),this.BLt=s,this.WLt=s;else if(0!==this.NLt){const i=Math.max(t-this.NLt,0);.5<(s=i/1e3)&&(s=0),this.BLt=s,this.WLt=H.lr(s,this.VLt,this.HLt)}this.NLt=t,this.jLt=this.WLt*this.KIt,this.ULt.Ql(this.jLt),this.zLt.Ql(s*this.KIt),this.JLt.Ql(this.WLt);for(const[e,h]of this.qLt)h.Ql(this.WLt*e.SD());this.dLt&&this.dLt.RDt(),1e3<=t-this.XLt&&(this.XLt+=1e3,1e3<=t-this.XLt&&(this.XLt=t),this.KLt=this.$Lt,this.$Lt=0,this.ZLt=this.YLt,this.YLt=0,this.tkt=Math.min(this.QLt/1e3,1),this.QLt=0,this.dLt&&this.dLt.EDt(),this.VOt.gAt(),this.vX())&&V.Update1sPerfStats()}nCt(t,s){if(s){if(!this.qLt.has(t)){const i=H.ir(H.c0);i.g0(this.ULt),this.qLt.set(t,i)}}else this.qLt.delete(t)}oCt(t){const s=this.qLt.get(t);return s?s.Qs():this.mD()}async H5t(t){const s=this.t_t,i=this.jD(),e=i.ND();await e.Z$(),e.w$(t,this.Gb()),e===t&&this.pft.sX(),this.VOt.bAt(),this.F5t(),s.dispatchEvent(this.mkt.beforelayoutchange),H.Tf.Hf(!0),await t.l$(e,this.Gb()),H.Tf.Hf(!1),await t.b$(!1),s.dispatchEvent(this.mkt.layoutchange),this.dO(),this.PLt=!0,this.Pk(),this.Zkt()}dO(){this.yLt=!0}SDt(){return this.dLt?this.dLt.SDt():null}bDt(){return this.dLt?this.dLt.bDt():null}Gb(){return this.dLt?this.dLt.Gb():null}r3(){const i=this.dLt;if(i&&!i.yDt()){const e=this.Gb(),t=e.gP(),h=t&&e.ib(),r=t&&e.Sw();if(h&&e.iP(),this.yLt||this.qFt()){const n=this.rq.ND(),o=(this.$Lt++,e.qR(),this.vX());o&&V.StartMeasuringTime(),this.yLt=!1;let t=null,s=(h&&(t=i.FDt().VC(),e.mP(t)),null);r&&(s=e.StartFrameTiming(2*(1+n.Kq())),e.StartMeasuringRenderPassTime(0,1)),this.m9()&&"low"===i.SJ()?e.nR(i.uJ(),i.lJ()):e.oR(),this.V5t(this.Gb(),n),t&&e.yP(t),r&&(e.StopMeasuringRenderPassTime(),this.dLt.DDt(s)),e.$S(),o&&(V.AddDrawCallsTime(),V.UpdateInspectHighlight()),i&&i.LDt()}else e.YS()}}fX(t){return"low"===this.gL().SJ()||t.ib()&&(this.wJ()||this.m9())}V5t(s,i){s.Cw(),s.xR(),s.gR(1,1,1,1),s.nP(null),s.bR(null),s.KR(this.m9()),this.fX(s)&&i.lX(s);const e=i.i$();for(let t=1;t<e;++t)i.gX(s,t),s.Sw()&&s.Restart();this.fX(s)||i.lX(s),i.mX(s)}t4(t,s,i){if(!this.CLt)return!1;let e=!this.ELt&&!this.pft.K1t(),h=0;e&&(h=performance.now());const r=this.vX(),n=(r&&this._8(!1),this.pft.B1t(this.rq,t,s,i));if(e){const o=performance.now()-h;this.QLt+=o,r&&V.AddTriggersTime(o)}return r&&this._8(!0),n}cGt(t,s,i){if(!this.xvt())return this.t4(t,s,i);if(this.z1t())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.ELt||this.pft.K1t())return this.pft.H1t(this.rq,t,s,i);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async i4(t,s,i){if(!this.xvt())return this.t4(t,s,i);if(!this.CLt)return!1;if(this.z1t())return this.pft.V1t(t,s,i);if(!this.ND())return this.pft.W1t(t,s,i);let e=performance.now(),h=this.pft.H1t(this.rq,t,s,i),r=h.next();for(;!r.done;)await this.k1t(r.value),r=h.next();return this.uD()||this.pft.K1t()||(await this.pft.J1t(),this.RLt&&!this.ELt&&this.y5t()),this.QLt+=performance.now()-e,r.value}fGt(t,s,i){const e=this.vX(),h=(e&&this._8(!1),this.pft.q1t(this.rq,t,s,i));return e&&this._8(!0),h}dGt(t,s,i){return this.pft.$1t(this.rq,t,s,i)}pGt(t){return this.OLt.Ql(t)}F1t(t){this.sLt.push(t)}D1t(){if(!this.sLt.length)throw new Error("layout stack empty");this.sLt.pop()}hO(){return this.sLt.length?this.sLt.at(-1):this.ND()}cD(t){return t&&-1!==t.SD()?this.WLt*t.SD():this.jLt}pY(){return this.jLt}mY(){return this.WLt}dD(){return this.BLt}SD(){return this.KIt}bD(t){(isNaN(t)||t<0)&&(t=0),this.KIt=t}FD(t){this.VLt=Math.max(t,0)}AD(){return this.VLt}LD(t){this.HLt=Math.max(t,0)}OD(){return this.HLt}vD(){return this.KLt}GD(){return this.ZLt}TD(){return this.tkt}U5t(){return this.kLt}mD(){return this.ULt.Qs()}z5t(){return this.zLt.Qs()}yD(){return this.JLt.Qs()}ltt(){return this._Lt}J5t(){return this.ILt}q5t(){return this.nLt}GF(){return this._Ot}TF(){return this.IOt}$5t(){return this.COt}X5t(){return this.EOt}sO(t){if(this.skt)throw new Error("cannot call while loading state - wait until afterload event");return this.aLt.get(t)||null}z$(){this.aLt.clear();for(const t of this.XOt)if(!t.Iz())for(const s of t.bk())this.aLt.set(s.EN(),s)}iOt(){return"preview"===this.dOt}vX(){return this.SOt}fL(){return this.dOt}dL(){return"nwjs"===this.fL()||this.pOt}hOt(){return"cordova"===this.dOt}K5t(){return"Android"===H.ri.ni&&("cordova"===this.dOt||"playable-ad-single-file"===this.dOt||"playable-ad-zip"===this.dOt||"instant-games"===this.dOt)}s5t(){return this.UH}Y5t(){return this.mOt}pL(){return this.gOt}Z5t(){return this.yOt}SF(){return this.VOt}qxt(){return this.HOt.qxt()}$xt(){return this.HOt.$xt()}m9(){return this.pLt}Q5t(){return this.Gb().ow(this.n9())}ew(t){return this.Gb().ew(t||this.n9())}tNt(){return this.PLt}sNt(t){this.gLt!==(t=!!t)&&(this.gLt=t,this.jD().UX(),this.dO())}DF(){return this.gLt}iNt(t){if(!this.$Ot.has(t)){const i=()=>this.eNt(t);this.$Ot.set(t,i),t.Rf().addEventListener("animationframeimagechange",i)}const s=this.bg.pg(t);return s.Eg()||s.Pg().then(()=>this.dO()),s}eNt(t){this.bg.wg(t)}JOt(t){const s=[];for(const i of t.lIt())for(const e of i.F6()){const h=e.B6();s.push({source:e,width:h.Xp(),height:h.om(),tag:e.rW()})}return{Ig:s}}async qOt(t){const s=H.ir(H.t1),i=[],h=new Map;for(const n of t.lIt())for(const o of n.F6()){const a=o.B6().mTt();h.has(a)||(h.set(a,null),i.push(s.Ql(async()=>{const t=await a.S7();h.set(a,t)})))}await Promise.all(i);const e=[];for(const u of t.lIt())for(const l of u.F6())e.push(s.Ql(async()=>{const t=l.B6(),s=h.get(t.mTt()),i=await t.gTt(s),e=await createImageBitmap(i);return{Fg:e}}));const r=await Promise.all(e);for(const c of h.values())c instanceof ImageBitmap&&c.close&&c.close();return{Ig:r}}hNt(t){this.ikt=t,this.ekt=!1}rNt(){this.ikt="",this.ekt=!0}nNt(t){this.hkt=t}y2t(t){this.g4=t}oNt(){return this.rkt}L5t(){return!!(this.ikt||this.ekt||this.hkt||null!==this.g4)}async k5t(){if(this.ikt&&(this.Pk(),await this.aNt(this.ikt),this.uNt()),this.hkt&&(await this.lNt(this.hkt),this.uNt(),this.vX())&&V.StepIfPausedInDebugger(),this.ekt){const t=await this.cNt();this.rkt=t,await this.i4(H.V$.H$.j$.fNt,null),this.rkt="",this.uNt()}if(null!==this.g4){this.Pk();try{await this.dNt(this.g4),this.rkt=this.g4,await this.i4(H.V$.H$.j$.pNt,null),this.rkt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.i4(H.V$.H$.j$.mNt,null)}this.uNt()}}uNt(){this.ikt="",this.ekt=!1,this.hkt="",this.g4=null}EL(){return this.nkt||(this.nkt=localforage.Fi({name:"c3-localstorage-"+this.$5t(),description:this.GF()})),this.nkt}gNt(){return this.okt||(this.okt=localforage.Fi({name:"c3-savegames-"+this.$5t(),description:this.GF()})),this.okt}async aNt(t){const s=await this.cNt();try{await this.gNt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.rkt=s,await this.i4(H.V$.H$.j$.fNt,null),this.rkt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.i4(H.V$.H$.j$.yNt,null)}}async lNt(t){try{const s=await this.gNt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.dNt(s),this.rkt=s,await this.i4(H.V$.H$.j$.pNt,null),this.rkt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.i4(H.V$.H$.j$.mNt,null)}}async cNt(){const t={c3save:!0,version:1,rt:{time:this.mD(),timeRaw:this.z5t(),walltime:this.yD(),timescale:this.SD(),tickcount:this.ltt(),next_uid:this.oLt,running_layout:this.ND().Oz(),start_time_offset:Date.now()-this.kLt},types:{},layouts:{},events:this.pft.QJ(),timelines:this.eQ.QJ(),user_script_data:null};for(const i of this.XOt)i.Iz()||i.AIt()||(t.types[i.Oz().toString()]=i.QJ());for(const e of this.rq.UD())t.layouts[e.Oz().toString()]=e.QJ();const s=this.wNt("save");return s.saveData=null,await this.N$(s),t.user_script_data=s.saveData,JSON.stringify(t)}F$(){return this.skt}async dNt(t){const s=this.jD(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(1<i.version)throw new Error("C3 save data from future version");this.w2t(),this.t_t.dispatchEvent(H.ir(H.Event,"beforeload"));for(const a of this.f5t()){const u=a.mN();u.AIt()||a.gK()}let e=i.rt,h=(this.ULt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.zLt.Set(e.timeRaw),this.JLt.Set(e.walltime),this.KIt=e.timescale,this._Lt=e.tickcount,this.kLt=Date.now()-e.start_time_offset,e.running_layout),r=!(this.skt=!0);if(h!==this.ND().Oz()){const l=s.LX(h);if(!l)return;await this.H5t(l),r=!0}for(const[c,f]of Object.entries(i.layouts)){const d=parseInt(c,10),p=s.LX(d);p&&p.tq(f)}const n=new Set;for(const[m,g]of Object.entries(i.types)){const y=parseInt(m,10),w=this.p8(y);!w||w.Iz()||w.AIt()||w.tq(g,n)}for(const S of this.rq.UD())for(const b of S.Yk())b.sq();if(this.Pk(),this.z$(),this.skt=!1,r){for(const v of this.f5t())v.D$();for(const[M,G]of Object.entries(i.types)){const x=parseInt(M,10),T=this.p8(x);!T||T.Iz()||T.AIt()||T.OIt(G)}}this.oLt=e.next_uid,this.pft.tq(i.events);for(const _ of this.XOt)if(!_.Iz()&&_.IN())for(const I of _.bk()){const C=I.J$();for(const E of _.a$().q$())if(E!==_){const R=E.bk();if(C<0||C>=R.length)throw new Error("missing sibling instance");I.$$(R[C])}}this.eQ.tq(i.timelines),s.VX(),s.UX();for(const P of n)P.WCt();this.S2t(),this.t_t.dispatchEvent(H.ir(H.Event,"afterload")),this.bX(this.wNt("afterload"));for(const[A,F]of Object.entries(i.types)){const D=parseInt(A,10),O=this.p8(D);O&&O.DIt()}const o=this.wNt("load");o.saveData=i.user_script_data,await this.N$(o),this.dO()}SNt(t,s){return t.nO().HRt()-s.nO().HRt()}CPt(t,s){t.nO()&&!this.Pkt.has(t)&&(this.Pkt.set(t,s),this.Akt.push(t))}w2t(){this.Pkt=new WeakMap,H.Pn(this.Akt)}S2t(t="full",s=null){this.Akt.sort(this.SNt);for(const i of this.Akt)i.wK(this.Pkt.get(i),t,s);for(const e of this.Akt)e.zCt(this.Pkt.get(e),t,s);this.w2t()}async e5t(t){const s=await Promise.all(t.map(async t=>{const s=this.hOt()&&this.e7.GV();if(s||"playable-ad-single-file"===this.fL()){const i=await this.e7.mo(t);return URL.createObjectURL(i)}return new URL(t,location.href).toString()}));this.bkt.bNt(s)}vNt(t,s){this.bkt.MNt(t,s)}i5t(t,s){this.bkt.GNt(t,s)}h5t(t,s,i,e){return this.bkt.h5t(t,s,i,null,null,e)}xNt(t,s,i,e){return this.bkt.xNt(t,s,i,e)}TNt(){return this.bkt._Nt()}QD(t,s){this.Yc("runtime","invoke-download",{url:t,filename:s})}async zDt(t,s,i,e,h,r){if(e=e||s,h=h||i,this.IF()){const n=await this.mO("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:h,imageBitmapOpts:r});return n.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,s,i,e,h);return r?self.createImageBitmap(o,r):o}}async INt(t){return this.IF()?this.mO("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}CNt(){this.ckt||(this.ckt=!0,this.Yc("runtime","enable-device-orientation"))}ENt(){this.fkt||(this.fkt=!0,this.Yc("runtime","enable-device-motion"))}kD(){return this.LLt()}RNt(t){this.LLt=t}xkt(){const t=this.Gb();return{fps:this.vD(),tps:this.GD(),cpu:this.TD(),gpu:this.ID(),layout:this.ND()?this.ND().Wc():"",renderer:t.ib()?t.TP():t.GetAdapterInfoString()}}z1t(){return!!this.vX()&&V.z1t()}k1t(t){return this.xvt()?V.k1t(t):Promise.resolve()}Sgt(){return!!this.xvt()&&V.BreakNext()}PNt(t){this.bOt=!!t,this.ANt()}FNt(){return this.bOt}xvt(){return this.vOt}_8(t){t?this.MOt--:this.MOt++,this.ANt()}ANt(){this.vOt=this.vX()&&this.bOt&&0===this.MOt}kpt(){return this.vX()&&V.kpt()}pJ(){return this.vX()&&this.Gb().gP()&&V.pJ()}async W5t(t){if(t)for(const s of t)await this.k1t(s)}j5t(t){return this.W5t(this.t_t.jf(t))}B0t(t){return this.pft.B0t(t.name,t.params)}yO(t){if(this.IF())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}DL(){return this.Ckt}wNt(t){const s=H.ir(H.Event,t,!1);return s.runtime=this.Ckt,s}Vkt(){this.Ckt=new self.dF(this),this.gkt={tick:this.wNt("tick")}}Jkt(){const t={};for(const s of this.XOt)t[s.f1t()]={value:s.ik(),enumerable:!0,writable:!1};this.Ckt.WF(t)}qkt(){const t={};for(const s of this.VF().b1t())t[s.f1t()]=s.d1t();this.Ckt.jF(t)}$D(){return this.Rkt}lk(t,s){this.Ekt.set(t,s)}t5(t){return this.Ekt.get(t)}hL(t){if(!(t instanceof self.nk))throw new TypeError("expected IObjectClass");const s=this.t5(t);if(s&&s instanceof H.aut)return s;throw new Error("invalid IObjectClass")}yk(t){if(!(t instanceof self.dN))throw new TypeError("expected IInstance");const s=this.t5(t);if(s&&s instanceof H.Instance)return s;throw new Error("invalid IInstance")}rO(t){if(!(t instanceof self.KB))throw new TypeError("expected IWorldInstance");const s=this.t5(t);if(s&&s instanceof H.Instance)return s;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=H.rOt.jM,self.C3_InitRuntime=(t,s)=>t.QIt(s)}{const Fa=self.Os;Fa.vkt=class extends Fa.Qh{constructor(t,s){super(),this.$c=t,this.DNt=new Map,this.ONt=0,this.LNt=s.inputPort,s.outputPort.onmessage=t=>this.kNt(t),this.NNt=s.maxNumWorkers,this.BNt=1,this.WNt=!1,this.jNt=!1}async QIt(){}_Nt(){return this.NNt}bNt(t){this.LNt.postMessage({type:"_import_scripts",scripts:t})}MNt(t,s){this.LNt.postMessage({type:"_send_blob",blob:t,id:s})}GNt(t,s){this.LNt.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}h5t(t,s,i,e,h,r){if(i=i||[],"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const n=this.ONt++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:n,params:s,transferables:i},a=new Promise((t,s)=>{this.DNt.set(n,{resolve:t,progress:e,reject:s,HNt:!1,maxWorkerNum:r})});return h&&h.o0(()=>this.VNt(n)),this.LNt.postMessage(o,i),this.UNt(),a}xNt(t,s,i,e){if(i=i||[],"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const h=this.ONt++,r={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:h,params:s,transferables:i};this.LNt.postMessage(r,i)}VNt(t){const s=this.DNt.get(t);s&&(s.HNt=!0,s.resolve=null,s.progress=null,s.reject=null,this.LNt.postMessage({type:"_cancel",jobId:t}))}kNt(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.zNt(e,s.result);break;case"progress":this.JNt(e,s.progress);break;case"error":this.qNt(e,s.error);break;case"ready":this.$Nt();break;default:throw new Error(`unknown message from worker '${i}'`)}}zNt(t,s){const i=this.DNt.get(t);if(!i)throw new Error("invalid job ID");i.HNt||i.resolve(s),this.DNt.delete(t)}JNt(t,s){const i=this.DNt.get(t);if(!i)throw new Error("invalid job ID");!i.HNt&&i.progress&&i.progress(s)}qNt(t,s){const i=this.DNt.get(t);if(!i)throw new Error("invalid job ID");i.HNt||i.reject(s),this.DNt.delete(t)}$Nt(){this.WNt&&(this.WNt=!1,this.BNt++,this.BNt<this.NNt?this.UNt():this.LNt.postMessage({type:"_no_more_workers"}))}XNt(){let t=0,s=[...this.DNt.values()].sort((t,s)=>{const i=t.maxWorkerNum||1/0,e=s.maxWorkerNum||1/0;return i-e});for(const i of s){const e=i.maxWorkerNum||1/0;t<e&&t++}return t}async UNt(){if(!(this.BNt>=this.NNt||this.WNt||this.jNt||this.XNt()<=this.BNt))try{this.WNt=!0;const t=await this.$c.mO("runtime","create-job-worker");t.outputPort.onmessage=t=>this.kNt(t)}catch(t){this.jNt=!0,this.WNt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.BNt} so far)`,t)}}}}self.C3_Shaders={};{let S=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const h=""+i,r=""+e;return h<r?-1:r<h?1:0}},b=(S,self.Os),i=null,e="",h="",r=[],n="",o="",a="",v=b.ir(b.l0t);b.V$.H$=class extends b.gMt{constructor(t){super(t),this.r0t=this.$c.VF().x8(),this.Uct=this.$c.VF().iD(),this.KNt=0,this.YNt=0,this.ZNt=new Map}er(){super.er()}dO(){this.$c.dO()}t4(t){this.$c.t4(t,null,null)}QNt(t,s){return i&&t===e&&s===h||(i=new RegExp(t,s),e=t,h=s),i.lastIndex=0,i}t4t(t,s,i){if(t!==n||s!==o||i!==a){const e=this.QNt(s,i);r=t.match(e),n=t,o=s,a=i}return r}async s4t(t,s){if(s.length){this.KNt+=s.length;const i=[];for(const e of s)i.push(t.f$(e));await b.Yn(i,()=>{this.YNt++}),this.YNt++,this.YNt===this.KNt&&(this.YNt=0,this.KNt=0,this.$c.t4(b.V$.H$.j$.i4t,null,null))}}e4t(t,s){for(const i of s)0===i.Gk()&&t.g$(i)}h4t(){return v}r4t(s){const i=this.$c.VF(),t=i.iD(),e=t.M8(),h=e.XF(),r=h.v8(),n=e.zft(),o=t.G8(h),a=i.x8(),u=a.G8();if(u.a0t(s),n)for(let t=0;t<s&&!u.D8();++t)i.C8(r),u.A8(t),h.E8(e,o),i.P8(r);else for(let t=0;t<s&&!u.D8();++t)u.A8(t),h.E8(e,o);return t.O8(),a.O8(),!1}*n4t(s){const i=this.$c.VF(),t=i.iD(),e=t.M8(),h=e.XF(),r=h.v8(),n=e.zft(),o=t.G8(h),a=i.x8(),u=a.G8();if(u.a0t(s),n)for(let t=0;t<s&&!u.D8();++t)i.C8(r),u.A8(t),yield*h.Rgt(e,o),i.P8(r);else for(let t=0;t<s&&!u.D8();++t)u.A8(t),yield*h.Rgt(e,o);return t.O8(),a.O8(),!1}o4t(){const s=this.$c.VF(),t=s.iD(),i=t.M8(),e=i.XF(),h=e.v8(),r=i.zft(),n=t.G8(e),o=s.x8(),a=o.G8();if(r)for(let t=0;!a.D8();++t)s.C8(h),a.A8(t),e.E8(i,n)||a.aW(),s.P8(h);else for(let t=0;!a.D8();++t)a.A8(t),e.E8(i,n)||a.aW();return t.O8(),o.O8(),!1}*a4t(){const s=this.$c.VF(),t=s.iD(),i=t.M8(),e=i.XF(),h=e.v8(),r=i.zft(),n=t.G8(e),o=s.x8(),a=o.G8();if(r)for(let t=0;!a.D8();++t){s.C8(h),a.A8(t);const u=yield*e.Rgt(i,n);u||a.aW(),s.P8(h)}else for(let t=0;!a.D8();++t){a.A8(t);const l=yield*e.Rgt(i,n);l||a.aW()}return t.O8(),o.O8(),!1}u4t(t,s,i){const e=this.$c.VF(),h=e.iD(),r=h.M8(),n=r.XF(),o=n.v8(),a=r.zft(),u=h.G8(n),l=e.x8(),c=l.G8();if(c.T8(t),c.a0t(i),i<s)if(a)for(let t=s;t>=i&&!c.D8();--t)e.C8(o),c.A8(t),n.E8(r,u),e.P8(o);else for(let t=s;t>=i&&!c.D8();--t)c.A8(t),n.E8(r,u);else if(a)for(let t=s;t<=i&&!c.D8();++t)e.C8(o),c.A8(t),n.E8(r,u),e.P8(o);else for(let t=s;t<=i&&!c.D8();++t)c.A8(t),n.E8(r,u);return h.O8(),l.O8(),!1}*l4t(t,s,i){const e=this.$c.VF(),h=e.iD(),r=h.M8(),n=r.XF(),o=n.v8(),a=r.zft(),u=h.G8(n),l=e.x8(),c=l.G8();if(c.T8(t),c.a0t(i),i<s)if(a)for(let t=s;t>=i&&!c.D8();--t)e.C8(o),c.A8(t),yield*n.Rgt(r,u),e.P8(o);else for(let t=s;t>=i&&!c.D8();--t)c.A8(t),yield*n.Rgt(r,u);else if(a)for(let t=s;t<=i&&!c.D8();++t)e.C8(o),c.A8(t),yield*n.Rgt(r,u),e.P8(o);else for(let t=s;t<=i&&!c.D8();++t)c.A8(t),yield*n.Rgt(r,u);return h.O8(),l.O8(),!1}c4t(i){const t=i.vk(),s=t.bk();if(0!==s.length){const e=this.$c.VF(),h=e.iD(),r=h.M8(),n=r.XF(),o=n.v8(),a=r.zft(),u=h.G8(n),l=e.x8(),c=l.G8(),f=i.IN(),d=v.G8();if(b.On(d,s),c.a0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.D8();++t){e.C8(o);const p=d[t];i.vk().rft(p),f&&p.Vpt(),c.A8(t),n.E8(r,u),e.P8(o)}else{t.ift(!1);const m=t.eft();b.Pn(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.D8();++t){const g=d[t];m[0]=g,f&&g.Vpt(),c.A8(t),n.E8(r,u)}}h.O8(),l.O8(),b.Pn(d),v.O8()}return!1}*f4t(i){const t=i.vk(),s=t.bk();if(0!==s.length){const e=this.$c.VF(),h=e.iD(),r=h.M8(),n=r.XF(),o=n.v8(),a=r.zft(),u=h.G8(n),l=e.x8(),c=l.G8(),f=i.IN(),d=v.G8();if(b.On(d,s),c.a0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.D8();++t){e.C8(o);const p=d[t];i.vk().rft(p),f&&p.Vpt(),c.A8(t),yield*n.Rgt(r,u),e.P8(o)}else{t.ift(!1);const m=t.eft();b.Pn(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.D8();++t){const g=d[t];m[0]=g,f&&g.Vpt(),c.A8(t),yield*n.Rgt(r,u)}}h.O8(),l.O8(),b.Pn(d),v.O8()}return!1}d4t(i,t){const s=i.vk(),e=s.bk();if(0!==e.length){const h=this.$c.VF(),r=h.iD(),n=h.e1t(),o=r.M8(),a=o.XF(),u=a.v8(),l=o.zft(),c=r.G8(a),f=h.x8(),d=f.G8(),p=i.IN(),m=v.G8();b.Pn(m),d.a0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],n.zSt(1,t)]);if(m.sort(S),1===t&&m.reverse(),l)for(let t=0,s=m.length;t<s&&!d.D8();++t){h.C8(u);const g=m[t][0];i.vk().rft(g),p&&g.Vpt(),d.A8(t),a.E8(o,c),h.P8(u)}else{s.ift(!1);const y=s.eft();b.Pn(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.D8();++t){const w=m[t][0];y[0]=w,p&&w.Vpt(),d.A8(t),a.E8(o,c)}}r.O8(),f.O8(),b.Pn(m),v.O8()}return!1}*p4t(i,t){const s=i.vk(),e=s.bk();if(0!==e.length){const h=this.$c.VF(),r=h.iD(),n=h.e1t(),o=r.M8(),a=o.XF(),u=a.v8(),l=o.zft(),c=r.G8(a),f=h.x8(),d=f.G8(),p=i.IN(),m=v.G8();b.Pn(m),d.a0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],n.zSt(1,t)]);if(m.sort(S),1===t&&m.reverse(),l)for(let t=0,s=m.length;t<s&&!d.D8();++t){h.C8(u);const g=m[t][0];i.vk().rft(g),p&&g.Vpt(),d.A8(t),yield*a.Rgt(o,c),h.P8(u)}else{s.ift(!1);const y=s.eft();b.Pn(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.D8();++t){const w=m[t][0];y[0]=w,p&&w.Vpt(),d.A8(t),yield*a.Rgt(o,c)}}r.O8(),f.O8(),b.Pn(m),v.O8()}return!1}m4t(t,s){let i=this.ZNt.get(t);if(!i){if(!s)return null;i={g4t:null,y4t:new Map},this.ZNt.set(t,i)}return i}w4t(t,s,i,e,h){s.qF().Jgt(i,s.ZF()),e&&t.P8(h)}*S4t(t,s,i,e,h){yield*s.qF().qgt(i,s.ZF()),e&&t.P8(h)}}}{const Da=self.Os;Da.V$.H$.A_t=class extends Da.Qh{constructor(t){super(),this.Lct=t,this.$c=t.IO(),this.sGt=t.uk()}BMt(){}er(){this.Lct=null,this.$c=null,this.sGt=null}}}{const Oa=self.Os;Oa.V$.H$.Instance=class extends Oa.Qh{constructor(t,s){super(),this.vi=t,this.Lct=this.vi.mN(),this.oGt=this.Lct.Mbt(),this.$c=this.vi.IO()}er(){this.vi=null,this.Lct=null,this.oGt=null,this.$c=null}}}{const C=self.Os,La=[];C.V$.H$.j$={b4t(){return!0},W$(){return!0},Q$(){return!0},x5t(){return!0},T5t(){return!0},uD(){return this.$c.uD()},Imt(){const t=this.$c.i1t();return!t.Wft()&&!t.Nft()},v4t(){let t=this.$c.e1t(),s=t.ASt(),i=s.get("TriggerOnce_lastTick");void 0===i&&(i=-1,s.set("TriggerOnce_lastTick",-1));const e=this.$c.ltt();return s.set("TriggerOnce_lastTick",e),this.$c.tNt()||i!==e-1},M4t(t){const s=this.$c.e1t(),i=s.ASt(),e=i.get("Every_lastTime")||0,h=this.$c.mD(),r=(i.has("Every_seconds")||i.set("Every_seconds",t),i.get("Every_seconds"));return e+r<=h?(i.set("Every_lastTime",e+r),h>=i.get("Every_lastTime")+.04&&i.set("Every_lastTime",h),i.set("Every_seconds",t),!0):(h<e-.1&&i.set("Every_lastTime",h),!1)},Vdt(t){const s=this.$c.VF().x1t(t);return s&&s.Vdt()},iOt(){return this.$c.iOt()},gi(){return C.ri.gi},n5t(){return!0},G4t(){return!0},x4t(){return!0},fNt(){return!0},yNt(){return!0},pNt(){return!0},mNt(){return!0},T4t(t){return!!this.$c.sO(t)},_4t(t){switch(t){case 0:return"browser"===C.ri.di;case 1:return"iOS"===C.ri.ni;case 2:return"Android"===C.ri.ni;case 8:return"cordova"===C.ri.di;case 9:return"scirra-arcade"===this.$c.fL();case 10:return"nwjs"===C.ri.di;case 13:return"windows-uwp"===this.$c.fL();default:return!1}},I4t(t,s,i){const e=this.QNt(s,i);return e.test(t)},C4t(t,s,i){return C.compare(t,s,i)},E4t(t,s,i){return s<=t&&t<=i},R4t(t,s,i){return C.compare(t.iet(),s,i)},P4t(t){return!!t.iet()},A4t(t,s){const i=this.$c.mD();if(0!==t)return C.compare(i,t,s);{const e=this.$c.e1t(),h=e.ASt();return!h.get("CompareTime_executed")&&s<=i&&(h.set("CompareTime_executed",!0),!0)}},F4t(t){return isNaN(t)},B2t(t,s,i){return C.wr(C.dr(t),C.dr(i))<=C.dr(s)},W2t(t,s){return C.br(C.dr(t),C.dr(s))},Zbt(t,s,i){let e=C.dr(t),h=C.dr(s),r=C.dr(i),n=!C.br(r,h);return n?!(!C.br(e,h)&&C.br(e,r)):C.br(e,h)&&!C.br(e,r)},D4t(t,s){return"number"==typeof t?0===s:1===s},O4t(t){return!!t},vdt(t){return t.toLowerCase()===this.$c.VF().Tdt()},L4t(t,i,e,h){if(!t)return!1;let s=this.h4t(),r=s.G8(),n=t.vk(),o=(C.On(r,n.bk()),n.$ct()&&C.Pn(n.hft()),this.$c.e1t()),a=0;for(let t=0,s=r.length;t<s;++t){const l=r[t];r[a]=l,i=o.zSt(1,t),h=o.zSt(3,t),C.compare(i,e,h)?++a:n.tft(l)}C.Rn(r,a),n.nft(r);const u=!!r.length;return C.Pn(r),s.O8(),t.Bgt(),u},k4t(t,s){if(!t)return!1;let i=this.h4t(),e=i.G8(),h=t.vk(),r=(C.On(e,h.bk()),h.$ct()&&C.Pn(h.hft()),this.$c.e1t()),n=0;for(let t=0,s=e.length;t<s;++t){const a=e[t];e[n]=a,r.zSt(1,t)?++n:h.tft(a)}C.Rn(e,n),h.nft(e);const o=!!e.length;return C.Pn(e),i.O8(),t.Bgt(),o},N4t(t,i,e){if(!t)return!1;const s=t.vk(),h=s.bk();if(0===h.length)return!1;let r=this.$c.e1t(),n=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t];e=r.zSt(2,t),(null===n||0===i&&e<o||1===i&&e>o)&&(o=e,n=a)}return s.cft(n),t.Bgt(),!0},B4t(t,s){if(!t)return!1;const i=t.vk(),e=i.bk();if((s=Math.floor(s))>=e.length)return!1;const h=e[s];return i.cft(h),t.Bgt(),!0},W4t(t){if(!t)return!1;const s=t.vk(),i=s.bk(),e=Math.floor(this.$c.kD()*i.length);if(e>=i.length)return!1;const h=i[e];return s.cft(h),t.Bgt(),!0},j4t(t){if(!t)return!1;if(!t.Gk())return!1;const s=t.vk();return s.ift(!0),t.Bgt(),!0},H4t(t,i,e){if(!t)return!1;const h=t.vk(),s=h.bk(),r=this.$c.XF(),n=r.fft(),o=this.$c.e1t().ISt();h.$ct()?(C.On(La,s),h.qct(),h.ift(!1)):n?(C.On(La,h.hft()),C.Pn(h.hft())):(C.On(La,h.eft()),C.Pn(h.eft()));for(let t=0,s=La.length;t<s;++t){const a=La[t];C.xor(a.nO().rB(i,e),o)?h.Qct(a):h.tft(a)}return t.Bgt(),C.xor(!!h.eft().length,o)},V4t(s){if(!s)return!1;let i=s.Iz(),e=null,h=this.$c.MIt();for(let t=h.length-1;0<=t;--t){const r=h[t];if(i){if(r.mN().Ibt(s)){e=r;break}}else if(r.mN()===s){e=r;break}}if(!e){const n=s.bk();n.length&&(e=n.at(-1))}if(!e)return!1;const t=s.vk();return t.cft(e),s.Bgt(),!0},U4t(t){return this.$c.xvt()?this.n4t(t):this.r4t(t)},z4t(){return this.$c.xvt()?this.a4t():this.o4t()},J4t(t,s,i){return this.$c.xvt()?this.l4t(t,s,i):this.u4t(t,s,i)},Q0(t){return this.$c.xvt()?this.f4t(t):this.c4t(t)},q4t(t,s,i){return this.$c.xvt()?this.p4t(t,i):this.d4t(t,i)},$4t(t){return!!t&&t.T5()},X4t(t){return!!t&&t.A5()},K4t(t){return!!t&&t.E5()},Y4t(t){return!!t&&!t.Gk()},Z4t(t,s,i){return!!t&&C.compare(100*t.mR(),s,i)},Q4t(t){const s=this.$c.ND();return!!s&&s.Yq(t)},i4t(){return!0},tBt(){return 0<this.KNt},sBt(t,s){const i=this.$c.ECt();return!!i&&!!s&&!!i.out(t,s)}}}{let m=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const r=t[1],n=s[1];return r-n},g=function(t,s){return t[1]-s[1]};m,g;const ka=self.Os,Na=[],Ba=[],Wa=ka.ir(ka.Rect),ja=ka.ir(ka.Oo),Ha=[];ka.V$.H$.Aht={iBt(t,s){t.Wet(s)},eBt(t,s){t.ue()&&"number"!=typeof s&&(s=parseFloat(s)),t.Wet(t.iet()+s)},hBt(t,s){t.ue()&&t.Wet(t.iet()-s)},rBt(t,s){t.Wet(!!s)},nBt(t){t.Wet(!t.iet())},oBt(t){t.Wet(t.s1t())},aBt(t){this.$c.VF().M1t(t)},uBt(t,s,i,e,h,r){if(t&&s){const n=this.$c.Tk(t,s,i,e,h,r);if(n){h&&s._k(n);const o=this.$c.VF(),a=(o.Ik(!0),n.Ck(),o.Ik(!1),new Map);n.bCt(a,t,h);for(const[u,l]of a)u.vk().oft(l)}}},lBt(t,s,i,e,h,r){if(t&&s){const n=this.$c.c5t(t);n&&ka.V$.H$.Aht.uBt.call(this,n,s,i,e,h,r)}},Tz(h,r,n,o,a,t,u,l,c,f,d){if(h){let s=this.$c.hO(),i=s;if(t){const p=this.$c.jD().OX(t);if(!p)return;i=p}let e=null;if(!("number"!=typeof u||0<=u)||(e=i.oO(u))){let t=null;if(!("number"!=typeof l||0<=l)||(t=s.oO(l))){Wa.set(r,n,o,a);const m=i.Tz(h,Wa,e,t,c,f,d);h.vk().nft(m),h.Bgt()}}}},cBt(){const t=this.r0t;t.s0t()&&t.Qft().aW()},Udt(t,s){const i=this.$c.VF().x1t(t);i&&(0===s?i.Udt(!1):1===s?i.Udt(!0):i.Udt(!i.Vdt()))},fBt(t){this.$c.bD(t)},dBt(t,s){if(s<0&&(s=0),t){const i=t.vk(),e=i.bk();for(const h of e)h.bD(s)}},pBt(t){if(t){const s=t.vk(),i=s.bk();for(const e of i)e.DN()}},Tn(t){if(!(t<0))return this.$c.VF().hdt().uMt(t),!0},oD(t){return this.$c.VF().hdt().lMt(t),!0},mBt(){const t=this.$c.VF();return t.hdt().cMt(t.bdt()),!0},rD(t){this.$c.VF().rD(t)},async ODt(t,s,i,e,h,r){const n=this.$c.gL();n&&(this.dO(),await n.ODt(0===t?"image/png":"image/jpeg",s/100,i,e,h,r),await this.$c.i4(ka.V$.H$.j$.G4t,null))},gBt(t,s){if(!(t<=0||s<=0)){this.$c.nDt(t,s),this.$c.hO().zJ();const i=this.$c.gL();i&&("off"!==i.QFt()&&this.$c.d5t(t,s),i.WI(i.bj(),i.vj(),!0),this.$c.dO())}},yBt(t){const s=this.$c.gL();s&&"off"!==s.QFt()&&(s.dDt(0!==t?"high":"low"),s.WI(s.bj(),s.vj(),!0))},Sit(t){this.$c.hNt(t)},wBt(){this.$c.rNt()},SBt(t){this.$c.nNt(t)},bBt(t){this.$c.y2t(t)},vBt(t){},MBt(){for(const t of this.$c.jD().UD())t.uX()},GBt(t){this.$c.sNt(0!==t)},xBt(t,s){this.$c.LD(1/t),this.$c.FD(1/s)},TBt(t,s){this.$c.FD(t),this.$c.LD(s)},_Bt(t){this.$c.RD(["vsync","unlimited-tick","unlimited-frame"][t])},IBt(t,i){if(t){const s=t.vk(),e=s.bk(),h=Na,r=Ba,n=this.$c.hO(),o=t.Iz(),a=t.awt();for(let t=0,s=e.length;t<s;++t){const u=e[t],l=u.nO();if(l){let t;t=o?u.brt(i+u.mN().owt(a)):u.brt(i),h.push([l.oO().fF(),l.aO()]),r.push([u,t])}}if(h.length){h.sort(m),r.sort(g);let i=!1;for(let t=0,s=h.length;t<s;++t){const c=r[t][0],f=n.uO(h[t][0]),d=h[t][1],p=f.lO();p[d]!==c&&((p[d]=c).nO().cO(f,!0),f.fO(c),i=!0)}i&&this.$c.dO(),ka.Pn(Na),ka.Pn(Ba)}}},tL(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.$c.SF().tL(t,s)},CBt(t){if(!this.$c.Rg()){const s=this.$c.jD();s.JD()||s.qD(t)}},EBt(t){if(!this.$c.Rg()){const s=this.$c.jD();if(!s.JD()){const i=s.OX(t);i&&s.qD(i)}}},RBt(t){if(!this.$c.Rg()){const s=this.$c.jD();if(!s.JD()){const i=s.UD(),e=i.indexOf(s.ND());if((!t||0!==e)&&(t||e!==i.length-1)){const h=i[e+(t?-1:1)];s.qD(h)}}}},PBt(){if(!this.$c.Rg()){const t=this.$c.jD();t.JD()||(t.qD(t.ND()),this.$c.VF().C1t())}},ABt(t,s){t&&t.G5(s)},FBt(t,s){t&&t.I5(s)},DBt(t,s){t&&t.R5(s)},OBt(t,s){t&&t.yR(s/100)},LBt(t,s){t&&t.F5(s)},kBt(t,s){t&&t.O5(s)},NBt(t,s){t&&t.Wk(ka.dr(+s))},BBt(t,s,i){t&&(t.Z5(!0),t.Hk(s),t.Uk(i))},WBt(t){t&&t.Z5(!1)},jBt(t,s,i){t&&t.o9(s/100,i/100)},HBt(t,s){t&&t.av(+s)},VBt(t,s){if(t){ja.fa(s),ja.lr();const i=t.Y5();i.ea(ja)||(i.$o(ja),this.dO())}},UBt(t,s){t&&t.U5(s)},zBt(t,s){t&&t.Vb(s)},JBt(t,s,i){if(t){const e=t.Fk(),h=e.fht(i);if(h){const r=1===s;h.Dpt()!==r&&(h.JPt(r),t.S6(),this.$c.dO())}}},qBt(t,s,i,e){if(t){const h=t.Fk(),r=h.fht(s);if(r){i=Math.floor(i);const n=r.jG().VG(i);if(n){"color"===n?(ja.fa(e),e=ja):"percent"===n&&(e/=100);const o=h.v6(r.fF(),i,e);o&&r.Dpt()&&this.$c.dO()}}}},$Bt(t,s){t&&t.q5(s)},XBt(t){this.$c.hO().Nk(+t)},KBt(t){this.$c.hO().Wk(ka.dr(+t))},YBt(t,s){const i=this.$c.hO(),e=i.Fk(),h=e.fht(s);if(h){const r=1===t;h.Dpt()!==r&&(h.JPt(r),i.S6(),this.$c.dO())}},ZBt(t,s,i){const e=this.$c.hO(),h=e.Fk(),r=h.fht(t);if(r){s=Math.floor(s);const n=r.jG().VG(s);if(n){"color"===n?(ja.fa(i),i=ja):"percent"===n&&(i/=100);const o=h.v6(r.fF(),s,i);o&&r.Dpt()&&this.$c.dO()}}},QBt(t,s){const i=this.$c.hO();i.u5(t/100,s/100)},t6t(t){const s=this.$c.hO();0===t?s.f5():s.d5()},s6t(t){const s=this.$c.hO();s.Hk(t)},i6t(t){const s=this.$c.hO();s.Uk(t)},e6t(t,s){const i=this.$c.hO();i.Hk(t),i.Uk(s)},h6t(t){if(t){const s=t.pvt();if(s){const i=s.nO();if(i){const e=this.$c.hO();e.Hk(i.tv()),e.Uk(i.rv())}}}},s5(t,s,i){const e=this.$c.hO();try{e.s5(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},e5(t,s,i){if(t){const e=this.$c.hO();try{e.e5(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},r5(t){if(t){const s=this.$c.hO();s.r5(t)}},o5(){this.$c.hO().o5()},async r6t(t){const s=this.$c.ND();if(s&&t&&!this.$c.Rg()){const i=t.Iz()?t.Pmt():[t];await this.s4t(s,i)}},async n6t(t){await ka.V$.H$.Aht.r6t.call(this,this.$c.c5t(t))},o6t(t){const s=this.$c.ND();if(s&&t){const i=t.Iz()?t.Pmt():[t];this.e4t(s,i)}},a6t(t){ka.V$.H$.Aht.o6t.call(this,this.$c.c5t(t))},u6t(){const t=this.$c.ND();if(t){const s=t.u$();this.e4t(t,s)}},async l6t(t){const s=this.$c.ND();t&&s&&!this.$c.Rg()&&await this.s4t(s,t.n$())},async c6t(t){const s=this.$c.ND(),i=this.$c.jD().OX(t);i&&s&&!this.$c.Rg()&&await this.s4t(s,i.n$())},hD(t){const s=this.Uct.sD();if(s)switch(s.eD()){case 1:"number"==typeof t&&s.hD(t);break;case 2:"string"==typeof t&&s.hD(t);break;case 3:s.hD(t)}},f6t(t,s,i){const e=this.m4t(t.toLowerCase(),!0),h=e.y4t,r=s.toLowerCase(),n=(h.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`),ka.first(h.values())||e.g4t);if(n){const o=0!==n.QF(),a=0!==i.QF();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`)}h.set(r,i)},d6t(t,s){const i=this.m4t(t.toLowerCase(),!0),e=(i.g4t&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),ka.first(i.y4t.values())||i.g4t);if(e){const h=0!==e.QF(),r=0!==s.QF();if(h!=r)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}i.g4t=s},p6t(t,s,i){const e=this.$c,h=e.xvt()?Ha:null,r=(i=Math.floor(i),this.m4t(t.toLowerCase(),!1));if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),h;let n=r.y4t.get(s.toLowerCase());if(!n){if(!r.g4t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),h;n=r.g4t,i=0}if(!n.Wl())return h;if(0!==n.QF())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),h;const o=e.VF(),a=o.XF(),u=a.$F(),l=0<u.length,c=(l&&(n.ZF()?o.C8(u):o.idt(u)),[]),f=o.Kdt(a);if(f){const p=f.Zdt();for(let t=i,s=p.length;t<s;++t)c.push(p[t].iet())}const d=n.Zdt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].s1t());return e.xvt()?this.S4t(o,n,c,l,u):this.w4t(o,n,c,l,u)}}}{const E=self.Os;E.V$.H$.Fht={m6t:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},O(t){return t.toString()},Ut(t){return"string"==typeof t?t.length:0},random(t,s){return void 0===s?this.$c.kD()*t:this.$c.kD()*(s-t)+t},Jyt(...t){const s=Math.floor(this.$c.kD()*t.length);return t[s]},g6t(t,...s){return"number"!=typeof t&&(t=0),s[t=E.lr(Math.floor(t),0,s.length-1)]},pi(){return Math.PI},y6t(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},w6t(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(E.dr(t))},cos(t){return Math.cos(E.dr(t))},tan(t){return Math.tan(E.dr(t))},asin(t){return E.pr(Math.asin(t))},acos(t){return E.pr(Math.acos(t))},atan(t){return E.pr(Math.atan(t))},exp(t){return Math.exp(t)},Kt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e<t&&(e=t)}return e},min(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e>t&&(e=t)}return e},lr(t,s,i){return E.lr(t,s,i)},Ct(t,s,i,e){return E.mr(t,s,i,e)},angle(t,s,i,e){return E.pr(E.yr(t,s,i,e))},Dt(t,s,i){return E.Dt(t,s,i)},_r(t,s,i){return E._r(t,s,i)},Cr(t,s,i,e){return E.Cr(t,s,i,e)},Er(t,s,i,e,h){return E.Er(t,s,i,e,h)},Rr(t,s,i){return E.Rr(t,s,i)},S6t(t,s){return E.pr(E.wr(E.dr(t),E.dr(s)))},b6t(t,s,i){return E.pr(E.vr(E.dr(t),E.dr(s),i))},v6t(t,s,i){return E.pr(E.Sr(E.dr(t),E.dr(s),E.dr(i)))},M6t(t,s,i){return(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s},G6t(t,s){return(t|=0)^1<<(0|s)},x6t(t,s){return(t|=0)&1<<(0|s)?1:0},T6t(){return"\n"},_6t(t){return"string"==typeof t?t.toUpperCase():""},I6t(t){return"string"==typeof t?t.toLowerCase():""},left(t,s){return"string"==typeof t?t.substr(0,s):""},mid(t,s,i){return"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i)},right(t,s){return"string"==typeof t?t.substr(Math.max(t.length-s,0)):""},trim(t){return"string"==typeof t?t.trim():""},C6t(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},E6t(t,s){return"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0},find(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(E.ne(s),"i")):-1},R6t(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(E.ne(s),"")):-1},replace(t,s,i){return"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(E.ne(s),"gi"),i):"string"==typeof t?t:""},P6t(t,...i){let e=t;for(let t=0,s=i.length;t<s;++t)e=e.replaceAll(`{${t}}`,i[t].toString());return e},A6t(t,s,i){const e=this.QNt(s,i);return t?t.search(e):-1},F6t(t,s,i,e){const h=this.QNt(s,i);return t?t.replace(h,e):""},D6t(t,s,i){const e=this.t4t(t.toString(),s,i);return e?e.length:0},O6t(t,s,i,e){e=Math.floor(e);const h=this.t4t(t.toString(),s,i);return!h||e<0||e>=h.length?"":h[e]},L6t(t,s){let i=t<0?"-":"",e=s-(t=t<0?-t:t).toString().length;return(i+="0".repeat(Math.max(e,0)))+t.toString()},k6t(t){return encodeURIComponent(t)},N6t(t){return decodeURIComponent(t)},lD(){return this.$c.pY()},timescale(){return this.$c.SD()},B6t(){return(Date.now()-this.$c.U5t())/1e3},W6t(){return Date.now()},time(){return this.$c.mD()},tickcount(){return this.$c.ltt()},j6t(){return this.$c.q5t()},fps(){return this.$c.vD()},H6t(){return this.$c.TD()},V6t(){return this.$c.ID()},U6t(){return this.$c.gL().xL()},z6t(){return this.$c.gL()._L()},J6t(){return this.$c.EF()},q6t(){return this.$c.PF()},$6t(){return this.$c.EF()},X6t(){return this.$c.PF()},K6t(){return this.$c.hO().Vk()},Y6t(){return this.$c.hO().zk()},Z6t(){return this.$c.hO().Wc()},Q6t(){return this.$c.hO().Bk()},tWt(){return E.pr(this.$c.hO().jk())},sWt(){return this.$c.hO().Xp()},iWt(){return this.$c.hO().om()},eWt(){return 100*this.$c.hO().t9()},hWt(){return 100*this.$c.hO().s9()},rWt(t){const s=this.$c.hO().oO(t);return s?s.Qz().fu():0},nWt(t){const s=this.$c.hO().oO(t);return s?s.Qz().du():0},oWt(t){const s=this.$c.hO().oO(t);return s?s.Qz().pu():0},aWt(t){const s=this.$c.hO().oO(t);return s?s.Qz().mu():0},uWt(t){const s=this.$c.hO().oO(t);return s?s.Qz().width():0},lWt(t){const s=this.$c.hO().oO(t);return s?s.Qz().height():0},cWt(t){const s=this.$c.hO().oO(t);if(s){const i=s.Qz();return(i.fu()+i.pu())/2}return 0},fWt(t){const s=this.$c.hO().oO(t);if(s){const i=s.Qz();return(i.du()+i.mu())/2}return 0},dWt(t,s,i){const e=this.$c.hO().oO(t);return e?e.iN(s,i)[0]:0},pWt(t,s,i){const e=this.$c.hO().oO(t);return e?e.iN(s,i)[1]:0},mWt(t,s,i){const e=this.$c.hO().oO(t);return e?e.nN(s,i)[0]:0},gWt(t,s,i){const e=this.$c.hO().oO(t);return e?e.nN(s,i)[1]:0},yWt(t,s,i,e){const h=this.$c.hO(),r=h.oO(t),n=h.oO(s);if(!r||!n||r===n)return i;const[o,a]=r.nN(i,e);return n.iN(o,a)[0]},wWt(t,s,i,e){const h=this.$c.hO(),r=h.oO(t),n=h.oO(s);if(!r||!n||r===n)return e;const[o,a]=r.nN(i,e);return n.iN(o,a)[1]},SWt(t){const s=this.$c.hO().oO(t);return s?s.D5():0},bWt(t){const s=this.$c.hO().oO(t);return s?E.pr(s.k5()):0},vWt(t){const s=this.$c.hO().oO(t);return s?100*s.mR():0},MWt(t){const s=this.$c.hO().oO(t);return s?s.L5():0},GWt(t){const s=this.$c.hO().oO(t);return s?s.Vk():0},xWt(t){const s=this.$c.hO().oO(t);return s?s.zk():0},TWt(t){const s=this.$c.hO().oO(t);return s?100*s.B5():0},_Wt(t){const s=this.$c.hO().oO(t);return s?100*s.j5():0},IWt(t){const s=this.$c.hO().oO(t);return s?s.ov():0},CWt(t){const s=this.$c.hO().oO(t);return s?s.fF():-1},EWt(){const t=this.$c.gL();return t?t.kDt():""},RWt(t){const s=this.r0t;if(!s.s0t())return 0;if(t){const i=s.e0t(t);return i?i.fF():0}return s.Qft().fF()},PWt(){return this.$c.oNt()},AWt(t,s,...i){const e=this.m4t(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let h=e.y4t.get(s.toLowerCase());if(!h){if(!e.g4t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;h=e.g4t}const r=h.QF(),n=h.zF();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!h.Wl())return n;const o=this.$c,a=o.VF(),u=a.XF(),l=u.$F(),c=0<l.length,f=(c&&(h.ZF()?a.C8(l):a.idt(l)),h.Zdt());for(let t=i.length,s=f.length;t<s;++t)i.push(f[t].s1t());const d=h.qF(),p=d.YF(d.$F(),h.ZF(),r,n,...i);return c&&a.P8(l),p},FWt(){return this.$c.gF().HV()},DWt(){return 0===this.KNt?1:this.YNt/this.KNt},renderer(){return this.$c.bDt()?"webgpu":"webgl"},OWt(){return this.$c.bDt()?this.$c.bDt().GetAdapterInfoString():this.$c.SDt().TP()},LWt(){let t=this.$c.Gb().rb();return Math.round(100*t/1048576)/100},kWt(t,s,i){return E.kr(t,s,i)},NWt(t,s,i){return E.Br(t/100,s/100,i/100)},BWt(t,s,i,e){return E.Nr(t/100,s/100,i/100,e/100)},WWt(t,s,i){return E.Br(t/255,s/255,i/255)},jWt(t,s,i,e){return E.Nr(t/255,s/255,i/255,e/255)},HWt(){return this.$c.GF()},VWt(){return this.$c.TF()},UWt(){return this.$c.XF().Xq().Wc()},zWt(){return this.$c.XF().Xmt()}}}{const Va=self.Os;Va.V$.mht=class extends Va.gMt{constructor(t){super(t)}er(){super.er()}}}{const Ua=self.Os,za=self.zs,Ja=[],qa=(Ua.V$.mht.A_t=class extends Ua.tGt{constructor(t){super(t),this.T_t=t.lIt()}er(){Ua.Pn(this.T_t),super.er()}BMt(){for(const t of this.T_t)t._Tt(this.$c)}c$(s){const i={i2:this.$c.AF()};return Promise.all(this.T_t.map(t=>t.ITt(s,i)))}y$(){for(const t of this.T_t)t.CTt()}p$(){this.JWt()}JWt(){for(const t of this.Lct.Sk())t.s6().qWt()}NSt(t){Ua.V$.mht.K2t(this,t)}Gbt(t){Ja.push({hGt:null,$Wt:!1,instances:[]})}XWt(t,s,i){const e=Ja.at(-1);e.hGt=t,e.$Wt=i,e.instances.push(s)}xbt(t){const s=Ja.pop(),i=s.hGt,e=s.$Wt;if(i){const h=new Map;for(const r of s.instances)r.bCt(h,i,e);for(const[n,o]of h)n.vk().oft(o)}}KWt(t){const s=this.mN().mIt(t),i=this.IO(),e=s.ETt(0);return e.B6().pH(i.Gb(),{i2:i.AF()}).then(()=>this.JWt()),s}YWt(t){for(const s of this.Lct.Sk())s.s6().ZWt(t);this.mN().gIt(t)}QWt(t,s){const i=this.Lct.dIt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.FTt(s);e<0&&(e+=i.P6()+1);const h=Ua.GTt.TTt(this.IO()),r=(i.RTt(h,e),this.IO());h.B6().pH(r.Gb(),{i2:r.AF()}).then(()=>this.JWt());for(const n of this.Lct.Sk())n.s6().tjt();return h}sjt(t,s){const i=this.Lct.dIt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.P6())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.FTt(s);e<0&&(e+=i.P6()),i.PTt(e);for(const h of this.Lct.Sk())h.s6().tjt()}WMt(){return self.ijt}},new WeakMap);self.ijt=class extends self.nk{constructor(t){super(t),qa.set(this,t.Mbt())}ejt(t){za.Me(t);const s=qa.get(this).mN().dIt(t);return s?s.DTt():null}hjt(){return qa.get(this).mN().fIt().map(t=>t.DTt())}rjt(t){return za.Me(t),qa.get(this).KWt(t).DTt()}njt(t){za.Me(t),qa.get(this).YWt(t)}ojt(t,s){if(za.Me(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return qa.get(this).QWt(t,s).D6()}ajt(t,s){if(za.Me(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");qa.get(this).sjt(t,s)}}}{const R=self.Os,$a=self.zs,Xa=R.ir(R.Rect),Ka=R.ir(R.Hu),Ya=R.ir(R.Ha),P=(R.V$.mht.Instance=class extends R.FGt{constructor(t,s){super(t);let i=!0,e="",h=0,r=!0;s&&(i=!!s[0],e=s[1],h=s[2],r=s[3]),this.ujt=this.Lct.dIt(e)||this.Lct.lIt()[0],this.ljt=R.lr(h,0,this.ujt.P6()-1),this.cjt=this.ujt.ETt(this.ljt);const n=this.cjt.B6(),o=(this.fjt=n.vM(),this.djt=n.yC(),this.pjt=n.zGt(),this.kGt(),t.wCt(2,!0),t.wCt(1,0<=this.ujt.G6()),this.mjt=Math.abs(this.ujt.G6()),this.gjt=this.ujt.C6(),this.yjt=R.ir(R.c0),this.wjt=0,this.Sjt=0,this.bjt="",this.vjt=-1,this.Mjt="",this.Gjt=0,this.nO());this.xjt=o.j4(),o.G5(i),o.hB(r),o.Urt(this.cjt.H6()),o.Jrt(this.cjt.U6()),o.lPt(this.cjt.sW()),o.R4(),1===this.Lct.cIt()&&1===this.Lct.lIt()[0].P6()||0===this.mjt||this.xGt()}er(){this.ujt=null,this.cjt=null,this.fjt=null,this.yjt=null,super.er()}jGt(){return this.cjt.B6()}Qst(){return!0}m7(){this.fjt=null}WGt(){this.qWt()}zv(t){const s=this.fjt;if(null!==s){t.bR(s);const i=this.nO();i.qB()?this.Tjt(i,t):this._jt(i,t)}}_jt(t,s){let i=this.xjt;this.$c.DF()&&(i=t.ePt(i)),s.RR(i,this.pjt)}Tjt(s,t){const i=s.vPt();if(s.GPt()){s.tPt(Xa,Ka,!1);let t=Ka;this.$c.DF()&&(t=s.ePt(t)),i.Uv(s.$B(),t,this.pjt),s.MPt(!1)}i.zv(t)}Ijt(){return this.yjt.Qs()}Cjt(){return this.vi.SCt(2)}Ejt(t){this.vi.wCt(2,t)}Rjt(){return this.vi.SCt(1)}Pjt(t){this.vi.wCt(1,t)}Ajt(){return this.vi.SCt(4)}Fjt(t){this.vi.wCt(4,t)}gY(){this.Mjt&&this.Djt(),0<=this.vjt&&this.Ojt();const t=this.mjt;if(this.Cjt()&&0!==t){const s=this.$c.cD(this.vi),i=(this.yjt.Ql(s),this.Ijt()),e=this.cjt,h=e.W6()/t;if(!(i<this.wjt+h)){const r=this.ujt,n=this.gjt,o=r.P6(),a=r._6(),u=r.T6(),l=r.R6(),c=(this.Rjt()?this.ljt++:this.ljt--,this.wjt+=h,this.ljt>=o&&(l?(this.Pjt(!1),this.ljt=o-2):!u&&(this.Sjt++,this.Sjt>=a)?this.Ljt(!1):this.ljt=n),this.ljt<0&&(l?(this.ljt=1,this.Pjt(!0),u||(this.Sjt++,this.Sjt>=a&&this.Ljt(!0))):!u&&(this.Sjt++,this.Sjt>=a)?this.Ljt(!0):this.ljt=n),this.ljt=R.lr(this.ljt,0,o-1),r.ETt(this.ljt));i>this.wjt+c.W6()/t&&(this.wjt=i),this.kjt(e,c)}}else this.aGt()}Ljt(t){this.ljt=t?0:this.ujt.P6()-1,this.Ejt(!1),this.bjt=this.ujt.Wc(),this.Fjt(!0),this.eGt("animationend",!1,{animationName:this.bjt}),this.t4(R.V$.mht.j$.Njt),this.t4(R.V$.mht.j$.Bjt),this.Fjt(!1),this.Sjt=0}kjt(i,e,t){if(i!==e){const s=this.nO(),h=i.B6(),r=e.B6(),n=h.Xp(),o=h.om(),a=r.Xp(),u=r.om(),l=(t&&t.onFrameChange?t.onFrameChange(s,n,o,a,u):(n!==a&&s.hm(s.Xp()*(a/n)),o!==u&&s.Kp(s.om()*(u/o))),s.Urt(e.H6()),s.Jrt(e.U6()),s.lPt(e.sW()),s.R4(),this.cjt=e,this.fjt=r.vM(),this.djt=r.yC(),this.pjt=r.zGt(),this.RW().uht());for(let t=0,s=l.length;t<s;++t)l[t].Axt(i,e);this.eGt("framechange",!1,{animationName:this.ujt.Wc(),Wjt:this.ljt}),this.t4(R.V$.mht.j$.jjt),this.$c.dO()}}Hjt(t){this.Ejt(!0),this.wjt=this.Ijt(),1===t&&0!==this.ljt&&(this.vjt=0,this.Ajt()||this.Ojt()),this.xGt()}Vjt(t,s,i){this.Mjt=t,this.Gjt=s,this.xGt(),!i&&this.Ajt()||this.Djt()}Ujt(){return this.ujt}zjt(){return this.Mjt||this.ujt.Wc()}ZWt(t){R.ph(t,this.zjt())&&this.Vjt(this.Lct.yIt().Wc(),1,!0)}Jjt(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.Lct.dIt(this.zjt());if(!s)return;if(-1===(t=s.ATt(t)))return}isFinite(t)&&(this.vjt=t,this.Ajt()||this.Ojt())}tjt(){if(!this.Mjt&&-1===this.vjt){const t=this.cjt,s=this.ujt.ETt(R.lr(this.ljt,0,this.ujt.P6()-1));t!==s&&this.kjt(t,s),1<this.ujt.P6()&&0<this.mjt&&this.xGt()}}qjt(){return this.ljt}$jt(){return this.cjt.rW()}Xjt(t){this.mjt=Math.abs(t),this.Pjt(0<=t),0<this.mjt&&this.xGt()}Kjt(){return this.Rjt()?this.mjt:-this.mjt}Yjt(t){"string"==typeof t&&-1===(t=this.ujt.ATt(t))||(t=R.lr(Math.floor(t),0,this.ujt.P6()-1),this.gjt=t)}Zjt(){return this.gjt}Djt(t){const s=this.cjt,i=this.Lct.dIt(this.Mjt);if(this.Mjt="",i&&(i!==this.ujt||!this.Cjt())){this.ujt=i,this.Pjt(0<=i.G6()),this.mjt=Math.abs(i.G6()),this.gjt=i.C6(),this.ljt=R.lr(this.ljt,0,this.ujt.P6()-1),1===this.Gjt&&(this.ljt=0),this.Ejt(!0),this.wjt=this.Ijt();const e=this.ujt.ETt(this.ljt);this.kjt(s,e,t)}}Ojt(t){const s=this.cjt,i=this.ljt;if(this.ljt=R.lr(Math.floor(this.vjt),0,this.ujt.P6()-1),this.vjt=-1,t||i!==this.ljt){const e=this.ujt.ETt(this.ljt);this.kjt(s,e),this.wjt=this.Ijt()}}qWt(){const t=this.cjt.B6();this.fjt=t.vM(),this.djt=t.yC(),this.pjt=t.zGt(),this.nO().MPt(!0)}vM(){return this.fjt}yC(){return this.djt}zGt(){return this.pjt}q6(){return this.cjt.q6()}kbt(t){let s=this.cjt,i=this.nO(),e=null;if("string"==typeof t)e=s.Q6(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.Z6(t-1)}let h=i.L4();if(!e)return[i.tv(),i.rv(),h];if(Ya._(e.zTt()),i.qB()){const[r,n,o]=i.$B().Yv(Ya.qa(),Ya.Xa());Ya.set(r,n),h+=o}return Ya.offset(-s.H6(),-s.U6()),Ya.scale(i.Xp(),i.om()),Ya.rotate(i.jk()),Ya.offset(i.tv(),i.rv()),[Ya.qa(),Ya.Xa(),h]}Qjt(){return this.nO().mPt().Cl()}t8t(t){t=Math.floor(t);const s=this.nO(),i=s.mPt(),e=i.Cl();if((t=t===e?0:t)<0||e<=t)return[0,0];const h=i.Il();return[h[2*t+0]+s.tv(),h[2*t+1]+s.rv()]}CGt(){const s=R.V$.mht.Aht,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.ujt.Wc(),s8t:t=>this.RGt(s.i8t,t,0)},{name:t+".current-frame",value:this.ljt,s8t:t=>this.RGt(s.e8t,t)},{name:t+".is-playing",value:this.Cjt(),s8t:t=>t?this.RGt(s.h8t,0):this.RGt(s.r8t)},{name:t+".speed",value:this.mjt,s8t:t=>this.RGt(s.n8t,t)},{name:t+".repeats",value:this.Sjt,s8t:t=>this.Sjt=t}]}]}gv(){const t={a:this.ujt.Oz()},s=(0!==this.wjt&&(t.fs=this.wjt),this.Ijt()),i=(0!==s&&(t.at=s),0!==this.ljt&&(t.f=this.ljt),0!==this.mjt&&(t.cas=this.mjt),1!==this.Sjt&&(t.ar=this.Sjt),0!==this.gjt&&(t.rt=this.gjt),this.Cjt()||(t.ap=this.Cjt()),this.Rjt()||(t.af=this.Rjt()),this.nO());return i.eB()&&(t.ce=i.eB()),t}yv(t){const s=this.mN().pIt(t.a),i=(s&&(this.ujt=s),this.wjt=t.hasOwnProperty("fs")?t.fs:0,this.yjt.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),e=(this.ljt=R.lr(i,0,this.ujt.P6()-1),this.mjt=t.hasOwnProperty("cas")?t.cas:0,this.Sjt=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),h=(this.gjt=R.lr(e,0,this.ujt.P6()-1),this.Ejt(!t.hasOwnProperty("ap")||!!t.ap),this.Pjt(!t.hasOwnProperty("af")||!!t.af),this.ujt.ETt(this.ljt)),r=(this.cjt=h,this.qWt(),this.nO());r.Urt(h.H6()),r.Jrt(h.U6()),r.lPt(h.sW()),r.hB(!!t.ce),this.Cjt()&&this.xGt()}crt(t){const s=this.nO();switch(t){case 3:return s.eB();case 2:return R.lr(this.ljt,0,this.ujt.P6()-1);case 1:return this.ujt.Wc()}}yrt(t,s,i){const e=this.nO();switch(t){case 3:e.hB(!!s);break;case 2:{this.Ejt(!1);const h=this.ujt.P6()-1,r=s=R.lr(s,0,h),n=this.ujt.ETt(this.ljt),o=this.ujt.ETt(r);this.kjt(n,o,i),this.ljt=R.lr(r,0,h);break}case 1:{this.Mjt=s,this.Djt(i);const a=this.ujt.P6();1<a&&0<this.ujt.G6()?this.xGt():this.aGt();break}}}WMt(){return self.o8t}},new WeakMap),Za=new Map([["current-frame",0],["beginning",1]]);self.o8t=class extends self.KB{constructor(){super(),P.set(this,self.dN.wN().s6())}J6(){return P.get(this).q6()}X6(t){return this.K6(t)[0]}Y6(t){return this.K6(t)[1]}a8t(t){return this.K6(t)[2]}K6(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return P.get(this).kbt(t)}tW(){return P.get(this).Qjt()}iW(t){return $a.ye(t),P.get(this).t8t(t)[0]}hW(t){return $a.ye(t),P.get(this).t8t(t)[1]}eW(t){return $a.ye(t),P.get(this).t8t(t)}u8t(){P.get(this).Ejt(!1)}l8t(t="current-frame"){$a.Me(t);const s=Za.get(t);if(void 0===s)throw new Error("invalid mode");P.get(this).Hjt(s)}c8t(t,s="beginning"){$a.Me(t),$a.Me(s);const i=Za.get(s);if(void 0===i)throw new Error("invalid mode");const e=P.get(this);if(!e.mN().dIt(t))throw new Error(`animation name "${t}" does not exist`);e.Vjt(t,i)}ejt(t){$a.Me(t);const s=P.get(this).mN().dIt(t);return s?s.DTt():null}get animation(){return P.get(this).Ujt().DTt()}get animationName(){return P.get(this).zjt()}set Wjt(t){$a.ye(t),P.get(this).Jjt(t)}get Wjt(){return P.get(this).qjt()}set f8t(t){$a.Me(t),P.get(this).Jjt(t)}get f8t(){return P.get(this).$jt()}set d8t(t){$a.ye(t),P.get(this).Xjt(t)}get d8t(){return P.get(this).Kjt()}set p8t(t){$a.ye(t),P.get(this).Yjt(t)}get p8t(){return P.get(this).Zjt()}get imageWidth(){return P.get(this).jGt().Xp()}get imageHeight(){return P.get(this).jGt().om()}m8t(){const t=P.get(this).jGt();return[t.Xp(),t.om()]}async g8t(t){$a.Ze(t,Blob);const s=P.get(this),i=s.IO(),e=s.jGt(),h=R.ir(R.Xxt);if(h.uTt(i,t),await h.pH(i.Gb(),{i2:i.AF()}),s.hr())h.er();else{e.lTt(h);const r=s.Mbt();r.JWt(),r.mN().Rf().dispatchEvent(new R.Event("animationframeimagechange")),i.dO()}}y8t(t,s){$a.Me(s),P.get(this).nO().ZRt(!!t,s)}}}{const Qa=self.Os;Qa.V$.mht.j$={w8t(t){return Qa.ph(this.zjt(),t)},S8t(t,s){return Qa.compare(this.ljt,t,s)},b8t(t,s){if("string"!=typeof s)return!1;const i=this.cjt.rW();return Qa.compare(i.toLowerCase(),t,s.toLowerCase())},v8t(t,s){return Qa.compare(this.Kjt(),t,s)},Bjt(t){return Qa.ph(this.bjt,t)},Njt(){return!0},jjt(){return!0},M8t(){return this.nO().Xp()<0},G8t(){return this.nO().om()<0},x8t(){return!0},T8t(){return!0},eB(){return this.nO().eB()}}}{const tu=self.Os;tu.V$.mht.Aht={_8t(t,s,i,e,h){if(t&&s){const[r,n]=this.kbt(i),o=this.$c.Tk(t,s,r,n,e,h);if(o){if(e&&s._k(o),t.uk().HL()){const u=o.nO();u.Wk(this.nO().jk()),u.R4()}const a=this.$c.VF();a.Ik(!0),o.Ck(),a.Ik(!1),t!==this.$c.r1t().mN()&&this.oGt.XWt(t,o,e)}}},r8t(){this.Ejt(!1)},h8t(t){this.Hjt(t)},i8t(t,s){this.Vjt(t,s)},e8t(t){this.Jjt(t)},n8t(t){this.Xjt(t)},I8t(t){this.Yjt(t)},C8t(s,t){try{0===s?this.Mbt().KWt(t):this.Mbt().YWt(t)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation: `,t)}},E8t(s,t,i){try{0===s?this.Mbt().QWt(t,i):this.Mbt().sjt(t,i)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation frame: `,t)}},R8t(t){const s=this.nO(),i=s.Xp(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.hm(e),s.R4())},P8t(t){const s=this.nO(),i=s.om(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Kp(e),s.R4())},Nk(t){const s=this.cjt,i=s.B6(),e=this.nO(),h=e.Xp()<0?-1:1,r=e.om()<0?-1:1,n=i.Xp()*t*h,o=i.om()*t*r;e.Xp()===n&&e.om()===o||(e.WI(n,o),e.R4())},async A8t(t,s,i){const e=this.cjt,h=e.B6(),r=this.nO(),n=this.$c,o=this.oGt;if(h.OV()===t)0===s&&(r.WI(h.Xp(),h.om()),r.R4()),this.t4(tu.V$.mht.j$.x8t);else{const a=tu.ir(tu.Xxt);try{if(await a.aTt(n,t),!a.u7())throw new Error("image failed to load");if(this.hr())return void a.er();await a.pH(n.Gb(),{i2:n.AF()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.hr()||this.t4(tu.V$.mht.j$.T8t))}this.hr()?a.er():(h.lTt(a),o.JWt(),o.mN().Rf().dispatchEvent(new tu.Event("animationframeimagechange")),n.dO(),0===s&&(r.WI(h.Xp(),h.om()),r.R4()),await this.i4(tu.V$.mht.j$.x8t))}},F8t(t){this.nO().hB(t)},ZRt(t,s){this.nO().ZRt(0===t,s)},D8t(t){this.nO().Vb(t),this.$c.dO()}}}{const su=self.Os;su.V$.mht.Fht={O8t(){return this.qjt()},L8t(){return this.$jt()},k8t(){return this.ujt.P6()},N8t(){return this.ujt.Wc()},B8t(){return this.Kjt()},W8t(){return this.ujt.G6()},j8t(t){return this.kbt(t)[0]},H8t(t){return this.kbt(t)[1]},V8t(t){return this.kbt(t)[2]},U8t(){return this.q6()},z8t(){return this.jGt().Xp()},J8t(){return this.jGt().om()},q8t(t){return this.t8t(t)[0]},$8t(t){return this.t8t(t)[1]},X8t(){return this.Qjt()}}}{const iu=self.Os;iu.V$.Keyboard=class extends iu.gMt{constructor(t){super(t)}er(){super.er()}}}{let i=function(){return s.rk().s6()};i;const eu=self.Os;eu.V$.Keyboard.A_t=class extends eu.tGt{constructor(t){super(t)}er(){super.er()}BMt(){}WMt(){return self.K8t}};let s=null;self.K8t=class extends self.nk{constructor(t){super(t),(s=t).IO().$D().keyboard=this}Y8t(t){const s=i();if("string"==typeof t)return s.Z8t(t);if("number"==typeof t)return s.Q8t(t);throw new TypeError("expected string or number")}}}{const hu=self.Os;hu.V$.Keyboard.Instance=class extends hu.rGt{constructor(t,s){super(t),this.tHt=new Set,this.sHt=new Set,this.iHt=0,this.eHt="",this.hHt="";const i=this.IO().Rf();this.a0=new hu.r0(hu.Qf.h0(i,"keydown",t=>this.rHt(t.data)),hu.Qf.h0(i,"keyup",t=>this.nHt(t.data)),hu.Qf.h0(i,"window-blur",()=>this.oHt()),hu.Qf.h0(i,"keyboard-blur",()=>this.oHt()))}er(){super.er()}rHt(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.tHt.has(i)||(this.tHt.add(i),this.sHt.add(s),this.eHt=i,this.iHt=s,this.hHt=e,this.t4(hu.V$.Keyboard.j$.aHt),this.t4(hu.V$.Keyboard.j$.uHt),this.t4(hu.V$.Keyboard.j$.lHt),this.t4(hu.V$.Keyboard.j$.cHt))}nHt(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.tHt.delete(i),this.sHt.delete(s),this.eHt=i,this.iHt=s,this.hHt=e,this.t4(hu.V$.Keyboard.j$.fHt),this.t4(hu.V$.Keyboard.j$.dHt),this.t4(hu.V$.Keyboard.j$.pHt),this.t4(hu.V$.Keyboard.j$.mHt)}oHt(){for(const t of this.sHt)this.sHt.delete(t),this.iHt=t,this.t4(hu.V$.Keyboard.j$.fHt),this.t4(hu.V$.Keyboard.j$.dHt),this.t4(hu.V$.Keyboard.j$.mHt);this.tHt.clear()}Z8t(t){return this.tHt.has(t)}Q8t(t){return this.sHt.has(t)}gv(){return{tk:this.iHt,tkk:this.hHt}}yv(t){this.iHt=t.tk,t.hasOwnProperty("tkk")&&(this.hHt=t.tkk)}CGt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.iHt},{name:t+".debugger.last-key-string",value:hu.V$.Keyboard.Fht.gHt(this.iHt)},{name:t+".debugger.last-typed-key",value:this.hHt}]}]}}}{const ru=self.Os,nu=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];ru.V$.Keyboard.j$={Z8t(t){return this.sHt.has(t)},uHt(t){return this.iHt===t},aHt(){return!0},fHt(){return!0},dHt(t){return this.iHt===t},Q8t(t){return t=Math.floor(t),this.sHt.has(t)},cHt(t){return this.iHt===t},mHt(t){return this.iHt===t},lHt(t){const s=nu[t];return this.eHt===s},pHt(t){const s=nu[t];return this.eHt===s},yHt(t){const s=nu[t];return this.tHt.has(s)}}}{const ou=self.Os;ou.V$.Keyboard.Aht={}}{let s=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"←";case 38:return"↑";case 39:return"→";case 40:return"↓";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};s;const au=self.Os;au.V$.Keyboard.Fht={wHt(){return this.iHt},gHt(t){return s(t)},SHt(){return this.hHt}}}{const uu=self.Os;uu.V$.bHt=class extends uu.gMt{constructor(t){super(t)}er(){super.er()}}}{const lu=self.Os;lu.V$.bHt.A_t=class extends lu.tGt{constructor(t){super(t),this.vHt=lu.ir(self.MHt)}er(){super.er()}BMt(){this.B6()._O(this.$c)}c$(t){return this.B6().pH(t,{i2:this.$c.AF()})}y$(){this.B6().oI()}GHt(){return this.vHt}xHt(t,s,i,e){const h=this.B6(),r=this.vHt;r.hm(h.Xp()),r.Kp(h.om()),r.THt(t),r._Ht(s),r.IHt(i),r.CHt(e),r.EHt()}}}{const cu=self.Os,fu=self.zs,du=cu.ir(cu.Ha),pu=["left","center","right"],mu=["top","center","bottom"],gu=["word","cjk","character"],A=(cu.V$.bHt.Instance=class extends cu.FGt{constructor(t,s){super(t),this.Xc="",this.RHt=!0,this.PHt=16,this.AHt=16,this.FHt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.,;:?!-_~#\"'&()[]|`\\/@°+=*$£€<>";let i="";if(this.DHt=1,this.OHt=0,this.M_=0,this.R_=0,this.P_=0,this.D_="word",this.LHt=!0,this.kHt=!1,this.NHt=null,this.BHt=null,this.WHt=-1,this.jHt=-1,this.HHt=0,s){this.Xc=s[0],this.RHt=s[1],this.PHt=s[2],this.AHt=s[3],this.FHt=s[4],i=s[5],this.DHt=s[6],this.OHt=s[7],this.M_=s[8],this.R_=s[9],this.P_=s[10],this.D_=gu[s[11]];const h=this.nO();h.G5(s[12]),this.kHt=!!s[14]}this.oGt.xHt(this.PHt,this.AHt,this.FHt,i),this.BHt=cu.ir(self.VHt,this.oGt.GHt());const e=this.nO();this.BHt.WI(e.Xp(),e.om()),this.UHt(),this.zHt(),this.vi.cCt()}er(){this.JHt(),this.NHt&&(this.NHt.er(),this.NHt=null),this.BHt.er(),this.BHt=null,super.er()}UHt(){const t=this.BHt;t&&(t.dI(this.RHt),t.Zc(this.Xc),t.OI(this.D_),t.qHt(pu[this.R_]),t.$Ht(mu[this.P_]),t.XHt(this.OHt),t.SI(this.M_))}KHt(){const t=this.nO();this.BHt.WI(t.Xp(),t.om()),this.BHt.Nk(this.DHt)}zHt(){if(this.kHt){let t=this.Xc;this.RHt&&(t=cu.Ch.jp(t)),this.NHt?this.NHt.Zc(t):this.NHt=cu.ir(cu.qc,this.$c,t)}else this.NHt&&(this.NHt.er(),this.NHt=null)}zv(e){const h=this.Lct.B6(),r=h.vM();if(r){e.bR(r);let t=this.nO(),s=t.j4(),i=this.BHt;i.Nk(this.DHt),i.YHt(t.SRt()),this.$c.DF()&&(s=t.ePt(s)),i.WI(t.Xp(),t.om()),i.GHt().ZHt(h.yC()),i.Ub(t.z4()),i.zv(e,s.Xr(),s.Kr(),t.jk()),this.LHt=!1}}gv(){const t={t:this.Xc,ebbc:this.RHt,csc:this.DHt,csp:this.OHt,lh:this.M_,ha:this.R_,va:this.P_,w:this.D_,cw:this.oGt.GHt().QHt(),ch:this.oGt.GHt().tVt(),cs:this.oGt.GHt().sVt(),sd:this.oGt.GHt().iVt()};return-1!==this.jHt&&(t.tw={st:this.WHt,en:this.jHt,l:this.HHt}),t}yv(t){if(this.JHt(),this.Xc=t.t,this.RHt=t.ebbc,this.DHt=t.csc,this.OHt=t.csp,this.M_=t.lh,this.R_=t.ha,this.P_=t.va,t.hasOwnProperty("w")){const i=t.w;this.D_="boolean"==typeof i?i?"word":"character":i}else this.D_="word";if(t.hasOwnProperty("tw")){const e=t.tw;this.WHt=e.st,this.jHt=e.en,this.HHt=t.l}const s=this.oGt.GHt();s.THt(t.cw),s._Ht(t.ch),s.IHt(t.cs),s.CHt(t.sd),this.UHt(),this.zHt(),-1!==this.jHt&&this.xGt()}crt(t){switch(t){case 0:return this.BI();case 1:return this.RHt;case 2:return this.oGt.GHt().QHt();case 3:return this.oGt.GHt().tVt();case 4:return this.oGt.GHt().sVt();case 5:return this.oGt.GHt().iVt();case 6:return this.eVt();case 7:return this.hVt();case 8:return this.rVt();case 9:return this.nVt();case 10:return this.oVt();case 11:return this.aVt()}}yrt(t,s){switch(t){case 0:this.uVt(s);break;case 1:this.RHt!==!!s&&(this.RHt=!!s,this.UHt());break;case 2:this.oGt.GHt().THt(s);break;case 3:this.oGt.GHt()._Ht(s);break;case 4:this.oGt.GHt().IHt(s);break;case 5:this.oGt.GHt().CHt(s);break;case 6:this.lVt(s);break;case 7:this.cVt(s);break;case 8:this.fVt(s);break;case 9:this.dVt(s);break;case 10:this.pVt(s);break;case 11:this.mVt(s)}}uVt(t){this.Xc!==t&&(this.Xc=t,this.BHt.Zc(t),this.zHt(),this.$c.dO())}BI(){return this.Xc}gVt(t,s){this.uVt(t),this.WHt=this.$c.yD(),this.jHt=this.WHt+s/this.RW().AN(),this.HHt=cu.rp(cu.Ch.jp(t)),this.BHt.TI(0),this.xGt()}JHt(){this.WHt=-1,this.jHt=-1,this.HHt=0,this.BHt.TI(-1),this.aGt()}yVt(){-1!==this.jHt&&(this.JHt(),this.t4(cu.V$.bHt.j$.wVt),this.$c.dO())}lVt(t){this.DHt!==t&&(this.DHt=t,this.BHt.Nk(this.DHt),this.$c.dO())}eVt(){return this.DHt}cVt(t){this.OHt!==t&&(this.OHt=t,this.BHt.XHt(this.OHt),this.$c.dO())}hVt(){return this.OHt}fVt(t){this.M_!==t&&(this.M_=t,this.BHt.SI(this.M_),this.$c.dO())}rVt(){return this.M_}dVt(t){this.R_!==t&&(this.R_=t,this.UHt(),this.$c.dO())}nVt(){return this.R_}pVt(t){this.P_!==t&&(this.P_=t,this.UHt(),this.$c.dO())}oVt(){return this.P_}SVt(t){this.mVt(gu[t])}mVt(t){this.D_!==t&&(this.D_=t,this.UHt(),this.$c.dO())}aVt(){return this.D_}bVt(t){this.kHt=!!t,this.zHt()}vVt(){return this.kHt}MVt(){return this.KHt(),this.BHt.HI()}GVt(){return this.KHt(),this.BHt.UI()}xVt(t,s){this.KHt();const i=this.nO(),e=(du.set(t-i.tv(),s-i.rv()),du.rotate(-i.jk()),du.offset(i.Xp()*i.H6(),i.om()*i.U6()),this.BHt.qI(du.qa(),du.Xa()));if(e){const h=e.Ym("tag");if(h)return h.Op}return""}TVt(t,s,i){const e=this.xVt(s,i);return e&&cu.ph(t,e)}_Vt(t,s){this.KHt(),s=Math.floor(s);const i=this.BHt.XI(t,s);if(!i)return null;const e=this.nO();return du.set(i.Jm(),i.$m()),du.offset(-e.Xp()*e.H6(),-e.om()*e.U6()),du.rotate(e.jk()),du.offset(e.tv(),e.rv()),{x:du.qa(),y:du.Xa(),width:i.Xp(),height:i.om()}}IVt(t){return this.KHt(),this.BHt.KI(t)}gY(){const s=this.$c.yD();if(s>=this.jHt)this.JHt(),this.t4(cu.V$.bHt.j$.wVt),this.$c.dO();else{let t=cu.Ir(this.WHt,this.jHt,s,0,this.HHt);(t=Math.floor(t))!==this.BHt._I()&&(this.BHt.TI(t),this.$c.dO())}}CGt(){const t="plugins.spritefont2";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.BI(),s8t:t=>this.uVt(t)},{name:t+".properties.scale.name",value:this.eVt(),s8t:t=>this.lVt(t)},{name:t+".properties.character-spacing.name",value:this.hVt(),s8t:t=>this.cVt(t)},{name:t+".properties.line-height.name",value:this.rVt(),s8t:t=>this.fVt(t)}]}]}WMt(){return self.CVt}},new WeakMap),yu=new Map([["left",0],["center",1],["right",2]]),wu=new Map([["top",0],["center",1],["bottom",2]]);self.CVt=class extends self.KB{constructor(){super(),A.set(this,self.dN.wN().s6())}get text(){return A.get(this).BI()}set text(t){fu.Me(t);const s=A.get(this);s.JHt(),s.uVt(t)}EVt(t,s){fu.Me(t),fu.ye(s);const i=A.get(this);i.JHt(),i.gVt(t,s)}RVt(){A.get(this).yVt()}set PVt(t){fu.ye(t),A.get(this).lVt(t)}get PVt(){return A.get(this).eVt()}set AVt(t){fu.ye(t),A.get(this).cVt(t)}get AVt(){return A.get(this).hVt()}set lineHeight(t){fu.ye(t),A.get(this).fVt(t)}get lineHeight(){return A.get(this).rVt()}set FH(t){fu.Me(t);const s=yu.get(t);if(void 0===s)throw new Error("invalid mode");A.get(this).dVt(s)}get FH(){return pu[A.get(this).nVt()]}set verticalAlign(t){fu.Me(t);const s=wu.get(t);if(void 0===s)throw new Error("invalid mode");A.get(this).pVt(s)}get verticalAlign(){return mu[A.get(this).oVt()]}set DH(t){if(!gu.includes(t))throw new Error("invalid mode");A.get(this).mVt(t)}get DH(){return A.get(this).aVt()}set FVt(t){A.get(this).bVt(!!t)}get FVt(){return A.get(this).vVt()}get NH(){return A.get(this).MVt()}get BH(){return A.get(this).GVt()}DVt(){const t=A.get(this);return[t.MVt(),t.GVt()]}OVt(t,s,i){return fu.Me(t),fu.ye(s),fu.ye(i),A.get(this).TVt(t,s,i)}LVt(t,s){return fu.ye(t),fu.ye(s),A.get(this).xVt(t,s)}kVt(t,s=0){return fu.Me(t),fu.ye(s),A.get(this)._Vt(t,s)}NVt(t){return fu.Me(t),A.get(this).IVt(t)}}}{const Su=self.Os;Su.V$.bHt.j$={BVt(t,s){return s?this.Xc===t:Su.ph(this.Xc,t)},WVt(){return-1!==this.jHt},wVt(){return!0},jVt(t,s,i){return this.TVt(t,s,i)}}}{const bu=self.Os;bu.V$.bHt.Aht={Zc(t){this.JHt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.uVt(t.toString())},HVt(t){this.JHt(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.uVt(this.Xc+t)},VVt(t,s){this.JHt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.gVt(t.toString(),s)},UVt(){this.yVt()},Nk(t){this.lVt(t)},zVt(t){this.cVt(t)},SI(t){this.fVt(t)},THt(t,s){let i=!1,e=this.oGt.GHt();for(const h of t)if(" "===h)e.JVt(s),i=!0;else{const r=e.qVt(h);r&&(r.$Vt(s),i=!0)}i&&e.XVt(),this.$c.dO()},D8t(t){this.nO().Vb(t),this.$c.dO()},KVt(t){this.dVt(t)},YVt(t){this.pVt(t)},ZVt(t){this.SVt(t)},QVt(t){this.bVt(t)}}}{const vu=self.Os;vu.V$.bHt.Fht={t7t(t){const s=this.oGt.GHt().qVt(t);return s?s.s7t():this.oGt.GHt().QHt()},i7t(){return this.AHt},e7t(){return this.DHt},h7t(){return this.OHt},r7t(){return this.M_},Text(){return this.Xc},n7t(){return this.RHt?vu.Ch.jp(this.Xc):this.Xc},o7t(){return this.MVt()},a7t(){return this.GVt()},u7t(t,s){return this.xVt(t,s)},l7t(t){return this.IVt(t)},c7t(t,s){const i=this._Vt(t,s);return i?i.x:0},f7t(t,s){const i=this._Vt(t,s);return i?i.y:0},d7t(t,s){const i=this._Vt(t,s);return i?i.width:0},p7t(t,s){const i=this._Vt(t,s);return i?i.height:0}}}{const Mu=self.Os;self.m7t=class{constructor(t,s,i,e){let h=t.QHt(),r=t.tVt();this.vHt=t,this.g7t=s,this.y7t=new Mu.Rect(i,e,i+h,e+r),this.w7t=new Mu.Rect,this.S7t=-1,this.b7t()}er(){this.vHt=null,this.y7t=null,this.w7t=null}b7t(){let t=this.vHt.Xp(),s=this.vHt.om();this.w7t._(this.y7t),this.w7t._t(t,s),this.w7t.ju(this.vHt.yC())}GHt(){return this.vHt}v7t(){return this.g7t}yC(){return this.w7t}$Vt(t){this.S7t=t}s7t(){return this.S7t<0?this.vHt.QHt():this.S7t}}}{let r=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0},C=function(t){return(h=h||E.Go(32,32).getContext("2d")).fillStyle="#FFFFFF",h.fillStyle=t,h.fillStyle},E=(r,C,self.Os),R=new E.Rect,P=new E.Hu,A=new E.Oo,s=new Set(["left","center","right"]),i=new Set(["top","center","bottom"]),e=new Set(["word","cjk","character"]),h=null;self.VHt=class{constructor(t){this.vHt=t,this.j_=0,this.H_=0,this.Xc="",this.__=!1,this.A_=null,this.F_=E.ir(E.Hp),this.D_="word",this.L_=!1,this.k_=!1,this.R_="left",this.P_="top",this.yU=1,this.M7t=1,this.G7t=0,this.M_=0,this.Wb=E.ir(E.Oo),this.B_=-1,this.W_=0,this.iI=t=>this.eI(t),this.vHt.x7t(this)}er(){this.vHt.T7t(this),this.Wb=null,this.iI=null,this.F_.Vl(),this.F_=null,this.vHt=null,this.A_=null}eI(t){if(t.rm())return{width:0,height:0};const s=t.xm(),i=t.Ym("scale"),e=(i?parseFloat(i.Op):this.yU)*this.M7t,h=t.Ym("scalex"),r=(h?parseFloat(h.Op):1)*e,n=t.Ym("scaley"),o=(n?parseFloat(n.Op):1)*e,a=this.vHt.tVt()*o+this.M_,u=this.GHt(),l=u.QHt()*r,c=this._7t();if(u.I7t()){let i=0,e=0;for(const f of s){let t=l,s=u.qVt(f);s?t=s.s7t()*r:" "===f&&(t=u.C7t()*r),e+=t,++i}return{width:e+i*c,height:a}}{const d=s.length,p=Math.max(d,0);return{width:l*d+p*c,height:a}}}fI(){this.k_=!0}w_(){this.fI(),this.L_=!0,this.F_.Vl()}WI(t,s){t<=0||s<=0||this.j_===t&&this.H_===s||(this.j_!==t?this.w_():this.fI(),this.j_=t,this.H_=s)}TI(t){this.B_=Math.floor(t)}_I(){return this.B_}qI(t,s){this.VI();const i=this.F_.zp();for(const e of i)if(s>e.$m()&&s<e.$m()+e.om())for(const h of e.pm())if(t>=h.Jm()&&t<h.Jm()+h.Xp())return h;return null}*$I(t){this.VI();const s=this.F_.zp();for(const i of s)for(const e of i.pm()){const h=e.Ym("tag");h&&E.ph(h.Op,t)&&(yield e)}}XI(t,s){for(const i of this.$I(t)){if(0===s)return i;--s}return null}KI(t){let s=0;for(const i of this.$I(t))++s;return s}VI(){this.eC(),this.hC()}eC(){if(this.L_){!this.__||this.A_&&this.A_.toString()===this.Xc||(this.A_=new E.Ch(this.Xc,{Mp:!0}));const t=-this._7t();this.F_.Hp(this.__?this.A_.Fp():this.Xc,this.iI,this.j_,this.D_,t),this.L_=!1}}hC(){this.k_&&(this.rC(),this.k_=!1)}rC(){let i=0,e=this.M_,h=E.Vn(this.F_.zp());for(const s of h){s.zm(NaN),s.qm(NaN);for(const r of s.pm())r.zm(NaN),r.qm(NaN)}const t=h.reduce((t,s)=>t+s.om(),0)-e;"center"===this.P_?i=Math.max(Math.floor(this.H_/2-t/2),0):"bottom"===this.P_&&(i=Math.floor(this.H_-t));for(let t=0,s=h.length;t<s;++t){const n=h[t],o=n.om();if(0<t&&i>this.H_-(o-e))break;0<=i&&this.lC(n,i),i+=o}}lC(t,s){let i=0;"center"===this.R_?i=Math.max(Math.floor((this.j_-t.Xp())/2),0):"right"===this.R_&&(i=Math.max(Math.floor(this.j_-t.Xp()),0)),t.zm(i),t.qm(s);for(const e of t.pm())e.rm()||(this.E7t(e,i,s),i+=e.Xp())}E7t(t,s,i){const e=t.Ym("offsetx"),h=(s+=e?r(e.Op,t.om()):0,t.Ym("offsety"));i+=h?r(h.Op,t.om()):0,t.zm(s),t.qm(i)}zv(t,s,i,e){this.VI(),this.W_=0;const h=E.Vn(this.F_.zp()),r=Math.sin(e),n=Math.cos(e);for(const o of h)this.R7t(t,o,s,i,r,n)}R7t(t,s,i,e,h,r){const n=s.Jm(),o=s.$m();if(Number.isFinite(n)&&Number.isFinite(o)){const a=s.om();for(const u of s.pm())this.dC(t,u,i,e,h,r,a)}}dC(o,a,u,l,c,f,d){let p=a.Jm(),m=a.$m();if(Number.isFinite(p)&&Number.isFinite(m)){let r=a.xm(),n=a.Xp();if(-1!==this.B_){if(this.W_>=this.B_)return;this.W_+r.length>this.B_&&(r=r.slice(0,this.B_-this.W_),n=this.eI(a).width),this.W_+=r.length}const g=a.Ym("background");if(!(E.Fd(r)&&!g||a.Zm("hide"))){const y=a.Ym("scale"),w=(y?parseFloat(y.Op):this.yU)*this.M7t,S=a.Ym("scalex"),b=(S?parseFloat(S.Op):1)*w,v=a.Ym("scaley"),M=(v?parseFloat(v.Op):1)*w,G=this.vHt.tVt()*M,x=this.M_;m+=d-x-G;let t=1,s=a.Ym("opacity"),i=(s&&(t=parseFloat(s.Op)/100),g&&(o.Dw(),A.xa(C(g.Op)),A.qo(A.Zo()*t*this.Wb.Zo()),A.la(),o.Ub(A),R.set(p,m,p+n,m+G),R.pu()>this.j_&&R.au(this.j_),P.cl(R,c,f),P.offset(u,l),o.Hu(P),o.Cw()),a.Ym("color")),e=(i?(A.xa(C(i.Op)),A.qo(this.Wb.Zo())):A._(this.Wb),A.qo(A.Zo()*t),A.la(),o.Ub(A),this.vHt.QHt()*b),h=Math.abs(this._7t());for(const T of r){const _=this.vHt.qVt(T);if(_){const I=_.s7t()*b;if(p+I>this.j_+h+1e-5)return;R.set(p,m,p+e,m+G),P.cl(R,c,f),P.offset(u,l),o.SS(P,_.yC()),p+=I+this.G7t}else p+=this.vHt.C7t()*b+this.G7t}}}}GHt(){return this.vHt}dI(t){this.__!==(t=!!t)&&(this.__=t,this.w_())}g_(){return this.__}Zc(t){this.Xc!==t&&(this.Xc=t,this.w_())}OI(t){if(!e.has(t))throw new Error("invalid word wrap mode");this.D_!==t&&(this.D_=t,this.w_())}qHt(t){if(!s.has(t))throw new Error("invalid alignment");this.R_!==t&&(this.R_=t,this.fI())}$Ht(t){if(!i.has(t))throw new Error("invalid alignment");this.P_!==t&&(this.P_=t,this.fI())}Nk(t){this.yU!==t&&(this.yU=t,this.w_())}Bk(){return this.yU}YHt(t){this.M7t!==t&&(this.M7t=t,this.w_())}SRt(){return this.M7t}XHt(t){this.G7t!==t&&(this.G7t=t,this.w_())}_7t(){return this.G7t}SI(t){this.M_=t,this.w_()}bI(){return this.M_}yR(t){t=E.lr(t,0,1),this.Wb.a=t}Ub(t){this.Wb.equals(t)||this.Wb._(t)}SR(){return this.Wb}HI(){return this.VI(),this.F_.Dm()}UI(){this.VI();const t=this.vHt.tVt()*this.yU,s=this.M_,i=t+s;return this.F_.Jp()*i-s}}}{const Gu=self.Os,xu={width:256,height:256,P7t:16,A7t:16,characterSet:""};self.MHt=class{constructor(t){if((t=Object.assign({},xu,t)).width<=0||t.height<=0||t.P7t<=0||t.A7t<=0)throw new Error("invalid size");this.Lm=t.width,this.km=t.height,this.PHt=t.P7t,this.AHt=t.A7t,this.FHt=t.characterSet,this.F7t="",this.D7t=null,this.O7t=!1,this.L7t=-1,this.w7t=new Gu.Rect(0,0,1,1),this.k7t=new Map,this.N7t=!0,this.B7t=new Set}er(){this.w7t=null,this.W7t(),this.k7t=null,this.B7t&&this.B7t.clear(),this.B7t=null}W7t(){for(let t of this.k7t.values())t.er();this.k7t.clear()}x7t(t){this.B7t.add(t)}T7t(t){this.B7t.delete(t)}EHt(){if(this.N7t){this.W7t();let s=Gu.ep(this.FHt),h=Math.floor(this.Lm/this.PHt),t=Math.floor(this.km/this.AHt),i=h*t;for(let e=0,t=s.length;e<t&&!(e>=i);++e){let i=s[e];if(!this.k7t.has(i)){let t=e%h,s=Math.floor(e/h);this.k7t.set(i,Gu.ir(self.m7t,this,i,t*this.PHt,s*this.AHt))}}if(this.O7t=!1,this.L7t=-1,Array.isArray(this.D7t))for(let s of this.D7t)if(Array.isArray(s)&&2===s.length){let i=s[0],t=s[1];if("number"==typeof i&&isFinite(i)&&"string"==typeof t&&i!==this.PHt)for(let s of t){let t=this.k7t.get(s);t?(t.$Vt(i),this.O7t=!0):" "===s&&(this.L7t=i,this.O7t=!0)}}this.N7t=!1;for(let t of this.B7t)t.w_()}}XVt(){this.O7t=!0;for(const t of this.B7t)t.w_()}qVt(t){return this.EHt(),this.k7t.get(t)||null}I7t(){return this.O7t}hm(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.Lm!==t&&(this.Lm=t,this.N7t=!0)}Xp(){return this.Lm}Kp(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.km!==t&&(this.km=t,this.N7t=!0)}om(){return this.km}ZHt(t){if(!this.w7t.equals(t)){this.w7t._(t);for(const s of this.k7t.values())s.b7t()}}yC(){return this.w7t}THt(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.PHt!==t&&(this.PHt=t,this.N7t=!0)}QHt(){return this.PHt}_Ht(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.AHt!==t&&(this.AHt=t,this.N7t=!0)}tVt(){return this.AHt}IHt(t){this.FHt!==t&&(this.FHt=t,this.N7t=!0)}sVt(){return this.FHt}CHt(t){if(this.F7t!==t&&(this.F7t=t,this.N7t=!0,this.D7t=null,this.F7t.length))try{this.D7t=JSON.parse(this.F7t)}catch(t){this.D7t=null}}iVt(){return this.F7t}JVt(t){this.L7t!==(t=t<0?-1:t)&&(this.L7t=t,0<=this.L7t)&&(this.O7t=!0)}C7t(){return this.L7t<0?this.PHt:this.L7t}}}{const Tu=self.Os;Tu.V$.Touch=class extends Tu.gMt{constructor(t){super(t)}er(){super.er()}}}{let i=function(){return s.rk().s6()};i;const _u=self.Os,Iu=self.zs;_u.V$.Touch.A_t=class extends _u.tGt{constructor(t){super(t)}er(){super.er()}BMt(){}WMt(){return self.j7t}};let s=null;self.j7t=class extends self.nk{constructor(t){super(t),(s=t).IO().$D().KD=this}requestPermission(t){Iu.Me(t);const s=i();if("orientation"===t)return s.H7t(0);if("motion"===t)return s.H7t(1);throw new Error("invalid type")}}}{const F=self.Os;F.V$.Touch.Instance=class extends F.rGt{constructor(t,s){super(t,"touch"),this.V7t=new Map,this.U7t=!1,this.z7t=!1,this.J7t=0,this.q7t=0,this.$7t=0,this.X7t=0,this.K7t=0,this.Y7t=0,this.Z7t=0,this.Q7t=0,this.tUt=0,this.sUt=0,this.iUt=0,this.eUt=0,this.hUt=0,this.rUt=0,this.nUt=0,this.oUt=0,this.aUt=0,this.uUt=[],s&&(this.U7t=s[0]),this.mGt("permission-result",t=>this.lUt(t));const i=this.IO().Rf();this.a0=new F.r0(F.Qf.h0(i,"pointerdown",t=>this.cUt(t.data)),F.Qf.h0(i,"pointermove",t=>this.fUt(t.data)),F.Qf.h0(i,"pointerup",t=>this.dUt(t.data,!1)),F.Qf.h0(i,"pointercancel",t=>this.dUt(t.data,!0)),F.Qf.h0(i,"deviceorientation",t=>this.pUt(t.data)),F.Qf.h0(i,"deviceorientationabsolute",t=>this.mUt(t.data)),F.Qf.h0(i,"devicemotion",t=>this.gUt(t.data)),F.Qf.h0(i,"tick2",t=>this.aK()))}er(){this.V7t.clear(),super.er()}cUt(t){if("mouse"===t.pointerType){if(!this.U7t)return;this.z7t=!0}const s=t.pointerId;if(!this.V7t.has(s)){const i=t.pageX-this.$c.eN(),e=t.pageY-this.$c.hN(),h=performance.now(),r=this.V7t.size,n=(this.iUt=r,this.eUt=s,F.ir(F.V$.Touch.yUt));n.QIt(h,i,e,s,r),this.V7t.set(s,n),this.t4(F.V$.Touch.j$.wUt),this.t4(F.V$.Touch.j$.SUt),this.rUt=i,this.nUt=e,this.aUt=0,this.t4(F.V$.Touch.j$.bUt)}}fUt(t){if("mouse"!==t.pointerType||this.z7t){const s=this.V7t.get(t.pointerId);if(s){const i=performance.now();if(!(i-s.zP()<2)){const e=t.pageX-this.$c.eN(),h=t.pageY-this.$c.hN();s.B7(i,e,h,t.width,t.height,t.pressure)}}}}dUt(t,s){if("mouse"===t.pointerType){if(!this.z7t)return;this.z7t=!1}const i=performance.now(),e=t.pointerId,h=this.V7t.get(e);if(h){if(this.iUt=h.vUt(),this.eUt=h.DW(),!s){const r=t.pageX-this.$c.eN(),n=t.pageY-this.$c.hN();this.rUt=r,this.nUt=n,this.aUt=1,this.t4(F.V$.Touch.j$.bUt)}if(this.t4(F.V$.Touch.j$.MUt),this.t4(F.V$.Touch.j$.GUt),!s){const o=h.xUt(i);"single-tap"===o?(this.t4(F.V$.Touch.j$.TUt),this.rUt=h.tv(),this.nUt=h.rv(),this.t4(F.V$.Touch.j$._Ut)):"double-tap"===o&&(this.t4(F.V$.Touch.j$.IUt),this.rUt=h.tv(),this.nUt=h.rv(),this.t4(F.V$.Touch.j$.CUt))}h.er(),this.V7t.delete(e)}}H7t(i){return this.SGt("request-permission",{type:i}),new Promise((t,s)=>{this.uUt.push({type:i,resolve:t,reject:s})})}lUt(t){const s=t.result,i=t.type,e=(this.hUt=i,this.uUt.filter(t=>t.type===i));for(const h of e)h.resolve(s?"granted":"denied");this.uUt=this.uUt.filter(t=>t.type!==i),s?(this.t4(F.V$.Touch.j$.EUt),0===i?this.$c.CNt():this.$c.ENt()):this.t4(F.V$.Touch.j$.RUt)}pUt(t){"number"==typeof t.webkitCompassHeading?this.J7t=t.webkitCompassHeading:t.absolute&&(this.J7t=t.alpha),this.q7t=t.alpha,this.$7t=t.beta,this.X7t=t.gamma}mUt(t){this.J7t=t.alpha}gUt(t){const s=t.acceleration,i=(s&&(this.K7t=s.x,this.Y7t=s.y,this.Z7t=s.z),t.accelerationIncludingGravity);i&&(this.Q7t=i.x,this.tUt=i.y,this.sUt=i.z)}aK(){let t=performance.now(),s=0;for(const i of this.V7t.values())i.zP()<=t-50&&i.PUt(t),i.AUt(t)&&(this.iUt=i.vUt(),this.eUt=i.DW(),this.oUt=s,this.t4(F.V$.Touch.j$.FUt),this.rUt=i.tv(),this.nUt=i.rv(),this.t4(F.V$.Touch.j$.DUt),this.oUt=0),++s}OUt(t){t=Math.floor(t);for(const s of this.V7t.values()){if(0===t)return s;--t}return null}LUt(t,s){return 0<=t&&0<=s&&t<this.$c.p5t()&&s<this.$c.m5t()}CGt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.V7t.values()].map(t=>({name:"$"+t.DW(),value:t.tv()+", "+t.rv()}))}]}}}{const Cu=self.Os;Cu.V$.Touch.j$={SUt(){return!0},GUt(){return!0},kUt(){return 0<this.V7t.size},bUt(t,s){return!!t&&s===this.aUt&&!!this.LUt(this.rUt,this.nUt)&&this.$c.SF().TAt(t,[[this.rUt,this.nUt]],!1)},NUt(t){if(!t)return!1;const s=this.$c.e1t(),i=s.ISt(),e=[...this.V7t.values()].filter(t=>this.LUt(t.tv(),t.rv())).map(t=>[t.tv(),t.rv()]);return Cu.xor(this.$c.SF().TAt(t,e,i),i)},BUt(t,s,i){const e=this.OUt(t);return!!e&&Cu.compare(e.G6(),s,i)},WUt(){return!0},jUt(){return!0},HUt(t,s,i){this.$c.CNt();let e;return e=0===t?this.q7t:1===t?this.$7t:this.X7t,Cu.compare(e,s,i)},VUt(t,s,i){this.$c.ENt();let e;return e=0===t?this.Q7t:1===t?this.tUt:2===t?this.sUt:3===t?this.K7t:4===t?this.Y7t:this.Z7t,Cu.compare(e,s,i)},wUt(t){return(t=Math.floor(t))===this.iUt},MUt(t){return(t=Math.floor(t))===this.iUt},UUt(t){return t=Math.floor(t),this.V7t.size>=t+1},FUt(){return!0},TUt(){return!0},IUt(){return!0},DUt(t){return!!t&&!!this.LUt(this.rUt,this.nUt)&&this.$c.SF().TAt(t,[[this.rUt,this.nUt]],!1)},_Ut(t){return!!t&&!!this.LUt(this.rUt,this.nUt)&&this.$c.SF().TAt(t,[[this.rUt,this.nUt]],!1)},CUt(t){return!!t&&!!this.LUt(this.rUt,this.nUt)&&this.$c.SF().TAt(t,[[this.rUt,this.nUt]],!1)},EUt(t){return this.hUt===t},RUt(t){return this.hUt===t}}}{const Eu=self.Os;Eu.V$.Touch.Aht={zUt(t){this.H7t(t)}}}{const Ru=self.Os;Ru.V$.Touch.Fht={JUt(){return this.V7t.size},E2t(t){const s=this.OUt(this.oUt);return s?s.qUt(this.$c.hO(),t,!0):0},R2t(t){const s=this.OUt(this.oUt);return s?s.qUt(this.$c.hO(),t,!1):0},$Ut(t,s){const i=this.OUt(t);return i?i.qUt(this.$c.hO(),s,!0):0},XUt(t,s){const i=this.OUt(t);return i?i.qUt(this.$c.hO(),s,!1):0},KUt(t,s){const i=this.V7t.get(t);return i?i.qUt(this.$c.hO(),s,!0):0},YUt(t,s){const i=this.V7t.get(t);return i?i.qUt(this.$c.hO(),s,!1):0},ZUt(){const t=this.OUt(0);return t?t.tv():0},QUt(){const t=this.OUt(0);return t?t.rv():0},tzt(t){const s=this.OUt(t);return s?s.tv():0},szt(t){const s=this.OUt(t);return s?s.rv():0},izt(t){const s=this.V7t.get(t);return s?s.tv():0},ezt(t){const s=this.V7t.get(t);return s?s.rv():0},hzt(t){const s=this.OUt(t);return s?s.G6():0},rzt(t){const s=this.V7t.get(t);return s?s.G6():0},nzt(t){const s=this.OUt(t);return s?Ru.pr(s.jk()):0},ozt(t){const s=this.V7t.get(t);return s?Ru.pr(s.jk()):0},azt(){return this.$c.CNt(),this.J7t},uzt(){return this.$c.CNt(),this.q7t},lzt(){return this.$c.CNt(),this.$7t},czt(){return this.$c.CNt(),this.X7t},fzt(){return this.$c.ENt(),this.Q7t},dzt(){return this.$c.ENt(),this.tUt},pzt(){return this.$c.ENt(),this.sUt},mzt(){return this.$c.ENt(),this.K7t},gzt(){return this.$c.ENt(),this.Y7t},yzt(){return this.$c.ENt(),this.Z7t},wzt(){return this.iUt},Szt(){return this.eUt},bzt(t){const s=this.V7t.get(t);return s?s.Xp():0},vzt(t){const s=this.V7t.get(t);return s?s.om():0},Mzt(t){const s=this.V7t.get(t);return s?s.Gzt():0}}}{let n=self.Os,s=-1e3,i=-1e3,e=-1e4;n.V$.Touch.yUt=class extends n.Qh{constructor(){super(),this.xzt=0,this.tT=0,this.kLt=0,this.jA=0,this.Tzt=0,this._zt=0,this.Izt=0,this.Va=0,this.Ua=0,this.Czt=0,this.Ezt=0,this.Lm=0,this.km=0,this.Rzt=0,this.Pzt=!1,this.Azt=!1}er(){}QIt(t,s,i,e,h){this.xzt=e,this.tT=h,this.jA=t,this.Tzt=t,this.kLt=t,this._zt=s,this.Izt=i,this.Va=s,this.Ua=i,this.Czt=s,this.Ezt=i}B7(t,s,i,e,h,r){this.Tzt=this.jA,this.jA=t,this.Czt=this.Va,this.Ezt=this.Ua,this.Va=s,this.Ua=i,this.Lm=e,this.km=h,this.Rzt=r,!this.Azt&&15<=n.mr(this._zt,this.Izt,this.Va,this.Ua)&&(this.Azt=!0)}DW(){return this.xzt}vUt(){return this.tT}zP(){return this.jA}PUt(t){this.Tzt=t}tv(){return this.Va}rv(){return this.Ua}G6(){const t=n.mr(this.Va,this.Ua,this.Czt,this.Ezt),s=(this.jA-this.Tzt)/1e3;return 0<s?t/s:0}jk(){return n.yr(this.Czt,this.Ezt,this.Va,this.Ua)}Xp(){return this.Lm}om(){return this.km}Gzt(){return this.Rzt}AUt(t){return!this.Pzt&&500<=t-this.kLt&&!this.Azt&&n.mr(this._zt,this.Izt,this.Va,this.Ua)<15&&(this.Pzt=!0)}xUt(t){return!this.Pzt&&t-this.kLt<=333&&!this.Azt&&n.mr(this._zt,this.Izt,this.Va,this.Ua)<15?t-e<=666&&n.mr(s,i,this.Va,this.Ua)<25?(s=-1e3,i=-1e3,e=-1e4,"double-tap"):(s=this.Va,i=this.Ua,e=t,"single-tap"):""}qUt(t,s,i){if(void 0===s){const e=t.uO(0);return e.$J(this.Va,this.Ua)[i?0:1]}{const h=t.oO(s);return h?h.iN(this.Va,this.Ua)[i?0:1]:0}}}}{const Pu=self.Os;Pu.Sat.Fzt=class extends Pu.yxt{constructor(t){super(t)}er(){super.er()}}}{const Au=self.Os;Au.Sat.Fzt.A_t=class extends Au.Mxt{constructor(t){super(t)}er(){super.er()}BMt(){}}}{const Fu=self.Os,Du=self.zs,Ou=self.n6,Lu=(Fu.Sat.Fzt.Instance=class extends Fu.xxt{constructor(t,s){super(t);const i=this.nO(),e=(this.STt=0,this.Dzt=0,this.ko=0,this.Ozt=!1,this.Lzt=!1,this.kzt=!1,this.eyt=!0,this.Nzt=0,this.Bzt=0,this.Czt=i.tv(),this.Ezt=i.rv(),this.Wzt=i.jk(),this.jzt=0,this.Hzt=Math.min(Math.abs(i.Xp()),Math.abs(i.om())/2),this.Vzt=!1,s&&(this.STt=s[0],this.Dzt=s[1],this.ko=s[2],this.Ozt=!!s[3],this.Lzt=!!s[4],this.kzt=!!s[5],this.eyt=!!s[6]),i.jk());this.Nzt=Math.cos(e)*this.STt,this.Bzt=Math.sin(e)*this.STt,this.eyt&&(this.xGt(),this.Ozt)&&this.Rxt()}er(){super.er()}gv(){const t={dx:this.Nzt,dy:this.Bzt,lx:this.Czt,ly:this.Ezt,lka:this.Wzt,t:this.jzt};return 0!==this.Dzt&&(t.acc=this.Dzt),0!==this.ko&&(t.g=this.ko),this.kzt&&(t.st=this.kzt),this.eyt||(t.e=this.eyt),this.Ozt&&(t.bos=this.Ozt),this.Lzt&&(t.sa=this.Lzt),t}yv(t){this.Nzt=t.dx,this.Bzt=t.dy,this.Czt=t.lx,this.Ezt=t.ly,this.Wzt=t.lka,this.jzt=t.t,this.Dzt=t.hasOwnProperty("acc")?t.acc:0,this.ko=t.hasOwnProperty("g")?t.g:0,this.kzt=!!t.hasOwnProperty("st")&&t.st,this.Ozt=!!t.hasOwnProperty("bos")&&t.bos,this.Lzt=!!t.hasOwnProperty("sa")&&t.sa,this.Kvt(!t.hasOwnProperty("e")||t.e)}gY(){if(this.eyt){const h=this.$c.cD(this.vi),r=this.vi.nO();if(r.jk()!==this.Wzt){const t=r.jk();if(this.Lzt){const s=Fu.mr(0,0,this.Nzt,this.Bzt);this.Nzt=Math.cos(t)*s,this.Bzt=Math.sin(t)*s}this.Wzt=t}let i=0,e=0;if(0!==this.Dzt){let t=Fu.mr(0,0,this.Nzt,this.Bzt),s;s=0===this.Nzt&&0===this.Bzt?r.jk():Fu.yr(0,0,this.Nzt,this.Bzt),t+=this.Dzt*h,i=Math.cos(s)*this.Dzt,e=Math.sin(s)*this.Dzt,t<0&&(t=0,i=0,e=0),this.Nzt=Math.cos(s)*t,this.Bzt=Math.sin(s)*t}if(0!==this.ko&&(this.Bzt+=this.ko*h,e+=this.ko),this.Czt=r.tv(),this.Ezt=r.rv(),0!==this.Nzt||0!==this.Bzt){const n=this.Nzt*h+.5*i*h*h,o=this.Bzt*h+.5*e*h*h,a=Fu.mr(0,0,n,o);if(this.Uzt(n,o,a),this.jzt+=a,this.Lzt&&(0!=n||0!=o)){const u=Fu.yr(0,0,n,o);r.Wk(u),this.Wzt=r.jk()}r.R4()}}}Uzt(t,s,i){const e=this.nO();if(!this.kzt||i<=this.Hzt)e.D4(t,s),e.R4(),this.kzt&&this.t4(Fu.Sat.Fzt.j$.zzt);else{this.Vzt=!1;const h=e.tv(),r=e.rv(),n=h+t,o=r+s,a=Fu.yr(0,0,t,s),u=Math.cos(a)*this.Hzt,l=Math.sin(a)*this.Hzt,c=Math.floor(i/this.Hzt);for(let t=1;t<=c;++t)if(e.P4(h+u*t,r+l*t),e.R4(),this.t4(Fu.Sat.Fzt.j$.zzt),this.vi.Dj()||this.Vzt)return;e.P4(n,o),e.R4(),this.t4(Fu.Sat.Fzt.j$.zzt)}}Ext(){if(this.eyt&&this.Ozt&&(0!==this.Nzt||0!==this.Bzt)){const t=this.$c.cD(this.vi),s=this.vi.nO(),i=this.$c.SF(),e=i.ZO(this.vi);if(e){i.SAt(this.vi,e);const h=Fu.mr(0,0,this.Nzt,this.Bzt),r=i.kAt(this.vi,this.Czt,this.Ezt);this.Nzt=Math.cos(r)*h,this.Bzt=Math.sin(r)*h,s.D4(this.Nzt*t,this.Bzt*t),s.R4(),this.Lzt&&(s.Wk(r),this.Wzt=s.jk(),s.R4()),i.FAt(this.vi,this.Nzt/h,this.Bzt/h,Math.max(2.5*h*t,30))||i.LAt(this.vi,100)}}}crt(t){switch(t){case 0:return this.Jzt();case 1:return this.qzt();case 2:return this.$zt();case 4:return this.Lzt;case 5:return this.kzt;case 6:return this.Zvt()}}yrt(t,s){switch(t){case 0:this.Xzt(s);break;case 1:this.Dzt=s;break;case 2:this.ko=s;break;case 4:this.Lzt=!!s;break;case 5:this.kzt=!!s;break;case 6:this.Kvt(!!s)}}Xzt(t){const s=Fu.yr(0,0,this.Nzt,this.Bzt);this.Nzt=Math.cos(s)*t,this.Bzt=Math.sin(s)*t}Jzt(){return Fu.Or(Fu.mr(0,0,this.Nzt,this.Bzt),6)}Kzt(t){this.Dzt=t}qzt(){return this.Dzt}Yzt(t){this.ko=t}$zt(){return this.ko}Zzt(t){const s=Fu.mr(0,0,this.Nzt,this.Bzt);this.Nzt=Math.cos(t)*s,this.Bzt=Math.sin(t)*s}Qzt(){return Fu.yr(0,0,this.Nzt,this.Bzt)}t9t(t){this.Ozt!==(t=!!t)&&(this.Ozt=t,this.eyt)&&(this.Ozt?this.Rxt():this._xt())}s9t(){return this.Ozt}i9t(t){this.jzt=t}e9t(){return this.jzt}Kvt(t){this.eyt=!!t,this.eyt?(this.xGt(),this.Ozt&&this.Rxt()):(this.aGt(),this._xt())}Zvt(){return this.eyt}CGt(){const t="behaviors.bullet";return[{title:"$"+this.c6().Wc(),properties:[{name:t+".debugger.vector-x",value:this.Nzt,s8t:t=>this.Nzt=t},{name:t+".debugger.vector-y",value:this.Bzt,s8t:t=>this.Bzt=t},{name:t+".properties.speed.name",value:this.Jzt(),s8t:t=>this.Xzt(t)},{name:t+".debugger.angle-of-motion",value:Fu.pr(this.Qzt())},{name:t+".properties.gravity.name",value:this.$zt(),s8t:t=>this.Yzt(t)},{name:t+".properties.acceleration.name",value:this.qzt(),s8t:t=>this.Kzt(t)},{name:t+".debugger.distance-travelled",value:this.e9t()},{name:t+".properties.enabled.name",value:this.Zvt(),s8t:t=>this.Kvt(t)}]}]}WMt(){return self.h9t}},new WeakMap);self.h9t=class extends Ou{constructor(){super(),Lu.set(this,Ou.wN().s6())}get speed(){return Lu.get(this).Jzt()}set speed(t){Du.ye(t),Lu.get(this).Xzt(t)}get acceleration(){return Lu.get(this).qzt()}set acceleration(t){Du.ye(t),Lu.get(this).Kzt(t)}get r9t(){return Lu.get(this).$zt()}set r9t(t){Du.ye(t),Lu.get(this).Yzt(t)}get n9t(){return Lu.get(this).Qzt()}set n9t(t){Du.ye(t),Lu.get(this).Zzt(t)}get o9t(){return Lu.get(this).s9t()}set o9t(t){Lu.get(this).t9t(!!t)}get a9t(){return Lu.get(this).e9t()}set a9t(t){Du.ye(t),Lu.get(this).i9t(t)}get isEnabled(){return Lu.get(this).Zvt()}set isEnabled(t){Lu.get(this).Kvt(t)}}}{const ku=self.Os;ku.Sat.Fzt.j$={u9t(t,s){const i=Math.hypot(this.Nzt,this.Bzt);return ku.compare(i,t,s)},l9t(t,s){return ku.compare(this.e9t(),t,s)},zzt(){return!0},Wl(){return this.Zvt()}}}{const Nu=self.Os;Nu.Sat.Fzt.Aht={c9t(t){this.Xzt(t)},f9t(t){this.Kzt(t)},d9t(t){this.Yzt(t)},p9t(t){this.Zzt(Nu.dr(t))},s3(t){if(t){const s=t.pvt(this.vi);if(s){const i=this.vi.nO(),e=this.$c.SF(),h=this.$c.cD(this.vi),r=Nu.mr(0,0,this.Nzt,this.Bzt),n=e.kAt(this.vi,this.Czt,this.Ezt,s);this.Nzt=Math.cos(n)*r,this.Bzt=Math.sin(n)*r,i.D4(this.Nzt*h,this.Bzt*h),i.R4(),this.Lzt&&(i.Wk(n),this.Wzt=i.jk(),i.R4()),0!==r&&(this.Ozt?e.FAt(this.vi,this.Nzt/r,this.Bzt/r,Math.max(2.5*r*h,30))||e.LAt(this.vi,100):e.AAt(this.vi,this.Nzt/r,this.Bzt/r,Math.max(2.5*r*h,30),s))}}},m9t(t){this.t9t(t)},g9t(t){this.i9t(t)},X2t(t){this.Kvt(t)},y9t(){this.Vzt=!0}}}{const Bu=self.Os;Bu.Sat.Fzt.Fht={w9t(){return this.Jzt()},S9t(){return this.qzt()},b9t(){return Bu.pr(this.Qzt())},v9t(){return this.e9t()},M9t(){return this.$zt()}}}{let t=function(t,s){return"number"==typeof t&&"number"==typeof s},e=function(i,e){if("string"!=typeof i&&"string"!=typeof e)return i&&e?1:0;{let t,s;return t="number"==typeof i?(Math.round(1e10*i)/1e10).toString():i,s="number"==typeof e?(Math.round(1e10*e)/1e10).toString():e,t+s}};t,e,0;self.wwt=[()=>100,()=>"Ship2R",()=>-100,()=>"Ship2L",()=>0,t=>{const s=t.Cwt(0),i=t.Cwt(1),e=t.Cwt(2).$yt();return()=>s.twt()+i.hwt()*e()},()=>"",()=>1,t=>{const s=t.Cwt(0).ywt();return()=>s.iet()},t=>{const s=t.Cwt(0).$yt(),i=t.Cwt(1).$yt();return()=>Math.round(s(i()))},t=>{const s=t.Cwt(0).$yt(),i=t.Cwt(1).ywt(),e=t.Cwt(2).$yt();return()=>Math.round(s()/i.iet()*e())},t=>{const s=t.Cwt(0).$yt();return()=>s(1,1,2)},t=>{const s=t.Cwt(0).ywt();return()=>s.iet()/3*100},t=>{const s=t.Cwt(0).$yt();return()=>s()+4},()=>-4,()=>30,()=>.6,t=>{const s=t.Cwt(0).$yt();return()=>s()},t=>{const s=t.Cwt(0).$yt(),i=t.Cwt(1).ywt();return()=>.7-(s()-i.iet())/10*.1},t=>{const s=t.Cwt(0).$yt();return()=>s(1)},()=>.05,t=>{const s=t.Cwt(0).$yt(),i=t.Cwt(1).ywt();return()=>s()-i.iet()},t=>{const s=t.Cwt(0).$yt(),i=t.Cwt(1).$yt();return()=>Math.round(s(i()-24)+12)},()=>-48,()=>"A2",t=>{const s=t.Cwt(0).$yt(),i=t.Cwt(1);return()=>Math.floor(s(i.twt()))},t=>{const s=t.Cwt(0).$yt();return()=>s(0,90,180,270)},()=>300,t=>{const s=t.Cwt(0).$yt();return()=>s(1,1,1,1,1,1,1,2,3)},t=>{const s=t.Cwt(0).$yt(),i=t.Cwt(1).$yt();return()=>Math.round(s(i()-8)+4)},t=>{const s=t.Cwt(0).$yt();return()=>s(-12,-24,-36)},()=>240,()=>5,()=>.5,t=>{const s=t.Cwt(0);return()=>s.twt()},()=>"AR",()=>"AL",t=>{const s=t.Cwt(0).ywt(),i=t.Cwt(1).ywt();return()=>e(e("SCORE: ",s.iet())+"\nHIGH:  ",i.iet())},t=>{const s=t.Cwt(0).ywt();return()=>s.iet()-1},t=>{const s=t.Cwt(0).$yt(),i=t.Cwt(1),e=t.Cwt(2).$yt(),h=t.Cwt(3);return()=>s()-i.twt()/2-e()*h.twt()},t=>{const s=t.Cwt(0).$yt(),i=t.Cwt(1);return()=>s()-i.twt()/2},t=>{const s=t.Cwt(0).$yt();return()=>s()+12},t=>{const s=t.Cwt(0).$yt(),i=t.Cwt(1).ywt(),e=t.Cwt(2).ywt();return()=>s(i.iet(),e.iet())}]}var t=self.Os;self.Ukt=function(){return[t.V$.mht,t.Sat.Fzt,t.V$.Keyboard,t.V$.bHt,t.V$.Touch,t.V$.Keyboard.j$.Z8t,t.V$.H$.j$.v4t,t.V$.mht.Aht.f2t,t.V$.mht.Aht.i8t,t.V$.H$.j$.b4t,t.V$.mht.Aht.Dbt,t.V$.mht.Fht.E2t,t.V$.H$.Fht.lD,t.V$.mht.Fht.R2t,t.V$.H$.j$.J4t,t.V$.H$.Aht.uBt,t.V$.H$.Fht.random,t.V$.H$.Fht.sWt,t.V$.H$.Fht.RWt,t.V$.H$.Fht.iWt,t.V$.H$.Aht.iBt,t.V$.H$.Fht.Jyt,t.V$.mht.Aht.WI,t.V$.mht.Aht.yR,t.V$.mht.j$.Rbt,t.V$.mht.Aht.nv,t.V$.H$.j$.W$,t.V$.H$.Fht.time,t.V$.H$.j$.M4t,t.V$.H$.j$.C4t,t.V$.mht.Aht.r8t,t.V$.mht.Aht.e8t,t.V$.mht.Fht.k8t,t.V$.mht.Aht.Wk,t.V$.H$.j$.Imt,t.V$.H$.j$.U4t,t.V$.mht.j$.Ivt,t.V$.mht.Aht.u2t,t.V$.H$.Aht.eBt,t.V$.mht.j$.Abt,t.V$.mht.j$.Bjt,t.V$.H$.Aht.Tn,t.V$.H$.Aht.CBt,t.V$.bHt.Aht.Zc,t.V$.H$.j$.R4t,t.V$.mht.Fht.P2t,t.V$.mht.Fht.A2t,t.V$.H$.Fht.max,t.V$.Keyboard.j$.uHt,t.V$.mht.Fht.D2t,t.V$.Touch.j$.SUt,t.V$.Touch.j$.UUt,t.V$.Keyboard.j$.aHt,t.V$.Touch.j$.TUt,t.V$.Touch.j$.IUt]},self.o5t=[{G9t:0},{x9t:0},{Fzt:0},{T9t:0},{Keyboard:0},{_9t:0},{I9t:0},{C9t:0},{E9t:0},{R9t:0},{P9t:0},{A9t:0},{F9t:0},{D9t:0},{Touch:0},{O9t:0},{L9t:0},{startTime:0},{k9t:0},{interval:0},{N9t:0},{B9t:0}],self.W9t={T9t:class extends self.o8t{},Keyboard:class extends self.dN{},_9t:class extends self.o8t{},I9t:class extends self.o8t{},C9t:class extends self.o8t{},E9t:class extends self.CVt{},R9t:class extends self.o8t{},P9t:class extends self.o8t{},A9t:class extends self.o8t{},F9t:class extends self.o8t{},D9t:class extends self.CVt{},Touch:class extends self.dN{}};