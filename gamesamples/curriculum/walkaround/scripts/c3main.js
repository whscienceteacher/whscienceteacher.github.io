// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let P=function(t){vn=t},k=function(t){return t*kn},F=function(t,s){return Math.abs(t-s)<=bn*Math.max(1,Math.abs(t),Math.abs(s))},j=function(){var t=new vn(4);return vn!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},z=function(t){var s=new vn(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},B=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},U=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},W=function(t,s,i,e){var n=new vn(4);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n},Q=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},J=function(t,s){var i;return t===s?(i=s[1],t[1]=s[2],t[2]=i):(t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3]),t},Y=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*(s=s[3])-n*e;return r?(t[0]=s*(r=1/r),t[1]=-e*r,t[2]=-n*r,t[3]=i*r,t):null},V=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},H=function(t){return t[0]*t[3]-t[2]*t[1]},t=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3],h=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*h+r*o,t[1]=n*h+s*o,t[2]=e*a+r*i,t[3]=n*a+s*i,t},q=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3],h=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*h,t[1]=n*i+s*h,t[2]=e*-h+r*i,t[3]=n*-h+s*i,t},Z=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3],h=i[0],i=i[1];return t[0]=e*h,t[1]=n*h,t[2]=r*i,t[3]=s*i,t},X=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t},K=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},$=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},tt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},st=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},it=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},s=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},et=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},nt=function(t,s){var i=t[0],e=t[1],n=t[2],t=t[3],r=s[0],h=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=bn*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-h)<=bn*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-o)<=bn*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(t-s)<=bn*Math.max(1,Math.abs(t),Math.abs(s))},rt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},ht=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ot=function(){var t=new vn(6);return vn!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},at=function(t){var s=new vn(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},ut=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},lt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ct=function(t,s,i,e,n,r){var h=new vn(6);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h[4]=n,h[5]=r,h},ft=function(t,s,i,e,n,r,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t},dt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],s=s[5],o=i*r-e*n;return o?(t[0]=r*(o=1/o),t[1]=-e*o,t[2]=-n*o,t[3]=i*o,t[4]=(n*s-r*h)*o,t[5]=(e*h-i*s)*o,t):null},pt=function(t){return t[0]*t[3]-t[1]*t[2]},i=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],s=s[5],a=i[0],u=i[1],l=i[2],c=i[3],f=i[4],i=i[5];return t[0]=e*a+r*u,t[1]=n*a+h*u,t[2]=e*l+r*c,t[3]=n*l+h*c,t[4]=e*f+r*i+o,t[5]=n*f+h*i+s,t},mt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],s=s[5],a=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*a,t[1]=n*i+h*a,t[2]=e*-a+r*i,t[3]=n*-a+h*i,t[4]=o,t[5]=s,t},gt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e*a,t[1]=n*a,t[2]=r*i,t[3]=h*i,t[4]=o,t[5]=s,t},yt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=e*a+r*i+o,t[5]=n*a+h*i+s,t},Mt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t},wt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},St=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},Tt=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},bt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},vt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},e=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},xt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},It=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},Ct=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},Gt=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],t=t[5],o=s[0],a=s[1],u=s[2],l=s[3],c=s[4],s=s[5];return Math.abs(i-o)<=bn*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(e-a)<=bn*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(n-u)<=bn*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-l)<=bn*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(h-c)<=bn*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(t-s)<=bn*Math.max(1,Math.abs(t),Math.abs(s))},n=function(){var t=new vn(9);return vn!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Nt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Et=function(t){var s=new vn(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},Dt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},_t=function(t,s,i,e,n,r,h,o,a){var u=new vn(9);return u[0]=t,u[1]=s,u[2]=i,u[3]=e,u[4]=n,u[5]=r,u[6]=h,u[7]=o,u[8]=a,u},At=function(t,s,i,e,n,r,h,o,a,u){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=u,t},Lt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ot=function(t,s){var i,e,n;return t===s?(i=s[1],e=s[2],n=s[5],t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=n):(t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8]),t},Rt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],u=s[7],l=(s=s[8])*h-o*u,c=-s*r+o*a,f=u*r-h*a,d=i*l+e*c+n*f;return d?(t[0]=l*(d=1/d),t[1]=(-s*e+n*u)*d,t[2]=(o*e-n*h)*d,t[3]=c*d,t[4]=(s*i-n*a)*d,t[5]=(-o*i+n*r)*d,t[6]=f*d,t[7]=(-u*i+e*a)*d,t[8]=(h*i-e*r)*d,t):null},Pt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],u=s[7],s=s[8];return t[0]=h*s-o*u,t[1]=n*u-e*s,t[2]=e*o-n*h,t[3]=o*a-r*s,t[4]=i*s-n*a,t[5]=n*r-i*o,t[6]=r*u-h*a,t[7]=e*a-i*u,t[8]=i*h-e*r,t},kt=function(t){var s=t[0],i=t[3],e=t[4],n=t[5],r=t[6],h=t[7],o=t[8];return s*(o*e-n*h)+t[1]*(-o*i+n*r)+t[2]*(h*i-e*r)},r=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=s[7],s=s[8],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],M=i[7],i=i[8];return t[0]=c*e+f*h+d*u,t[1]=c*n+f*o+d*l,t[2]=c*r+f*a+d*s,t[3]=p*e+m*h+g*u,t[4]=p*n+m*o+g*l,t[5]=p*r+m*a+g*s,t[6]=y*e+M*h+i*u,t[7]=y*n+M*o+i*l,t[8]=y*r+M*a+i*s,t},Ft=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=s[7],s=s[8],c=i[0],i=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=c*e+i*h+u,t[7]=c*n+i*o+l,t[8]=c*r+i*a+s,t},jt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=s[7],s=s[8],c=Math.sin(i),i=Math.cos(i);return t[0]=i*e+c*h,t[1]=i*n+c*o,t[2]=i*r+c*a,t[3]=i*h-c*e,t[4]=i*o-c*n,t[5]=i*a-c*r,t[6]=u,t[7]=l,t[8]=s,t},zt=function(t,s,i){var e=i[0],i=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=i*s[3],t[4]=i*s[4],t[5]=i*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Ut=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Wt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Qt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Jt=function(t,s){var i=s[0],e=s[2],n=e+e,i=i*(u=i+i),r=(h=s[1])*u,h=h*(l=h+h),o=e*u,a=e*l,u=(s=s[3])*u,l=s*l,s=s*n;return t[0]=1-h-(e=e*n),t[3]=r-s,t[6]=o+l,t[1]=r+s,t[4]=1-i-e,t[7]=a-u,t[2]=o-l,t[5]=a+u,t[8]=1-i-h,t},Yt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*h,M=i*a-n*h,w=i*u-r*h,S=e*a-n*o,T=e*u-r*o,b=n*u-r*a,v=l*m-c*p,x=l*g-f*p,I=c*g-f*m;return(d=y*(f=f*(s=s[15])-d*g)-M*(c=c*s-d*m)+w*I+S*(l=l*s-d*p)-T*x+b*v)?(t[0]=(o*f-a*c+u*I)*(d=1/d),t[1]=(a*l-h*f-u*x)*d,t[2]=(h*c-o*l+u*v)*d,t[3]=(n*c-e*f-r*I)*d,t[4]=(i*f-n*l+r*x)*d,t[5]=(e*l-i*c-r*v)*d,t[6]=(m*b-g*T+s*S)*d,t[7]=(g*w-p*b-s*M)*d,t[8]=(p*T-m*w+s*y)*d,t):null},Vt=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Ht=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},qt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Zt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},h=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Xt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Kt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},$t=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},ts=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],u=t[7],t=t[8],l=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7],s=s[8];return Math.abs(i-l)<=bn*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(e-c)<=bn*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(n-f)<=bn*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=bn*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(h-p)<=bn*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=bn*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=bn*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(u-y)<=bn*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(t-s)<=bn*Math.max(1,Math.abs(t),Math.abs(s))},ss=function(){var t=new vn(16);return vn!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},is=function(t){var s=new vn(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},ns=function(t,s,i,e,n,r,h,o,a,u,l,c,f,d,p,m){var g=new vn(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=n,g[5]=r,g[6]=h,g[7]=o,g[8]=a,g[9]=u,g[10]=l,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},rs=function(t,s,i,e,n,r,h,o,a,u,l,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=u,t[9]=l,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},p=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},hs=function(t,s){var i,e,n,r,h,o;return t===s?(i=s[1],e=s[2],n=s[3],r=s[6],h=s[7],o=s[11],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=n,t[13]=h,t[14]=o):(t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15]),t},os=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*h,M=i*a-n*h,w=i*u-r*h,S=e*a-n*o,T=e*u-r*o,b=n*u-r*a,v=l*m-c*p,x=l*g-f*p,I=l*(s=s[15])-d*p,C=c*g-f*m,G=c*s-d*m,N=f*s-d*g,E=y*N-M*G+w*C+S*I-T*x+b*v;return E?(t[0]=(o*N-a*G+u*C)*(E=1/E),t[1]=(n*G-e*N-r*C)*E,t[2]=(m*b-g*T+s*S)*E,t[3]=(f*T-c*b-d*S)*E,t[4]=(a*I-h*N-u*x)*E,t[5]=(i*N-n*I+r*x)*E,t[6]=(g*w-p*b-s*M)*E,t[7]=(l*b-f*w+d*M)*E,t[8]=(h*G-o*I+u*v)*E,t[9]=(e*I-i*G-r*v)*E,t[10]=(p*T-m*w+s*y)*E,t[11]=(c*w-l*T-d*y)*E,t[12]=(o*x-h*C-a*v)*E,t[13]=(i*C-e*x+n*v)*E,t[14]=(m*M-p*S-g*y)*E,t[15]=(l*S-c*M+f*y)*E,t):null},as=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*h,M=i*a-n*h,w=i*u-r*h,S=e*a-n*o,T=e*u-r*o,b=n*u-r*a,v=l*m-c*p,x=l*g-f*p,I=l*(s=s[15])-d*p,C=c*g-f*m,G=c*s-d*m,N=f*s-d*g;return t[0]=o*N-a*G+u*C,t[1]=n*G-e*N-r*C,t[2]=m*b-g*T+s*S,t[3]=f*T-c*b-d*S,t[4]=a*I-h*N-u*x,t[5]=i*N-n*I+r*x,t[6]=g*w-p*b-s*M,t[7]=l*b-f*w+d*M,t[8]=h*G-o*I+u*v,t[9]=e*I-i*G-r*v,t[10]=p*T-m*w+s*y,t[11]=c*w-l*T-d*y,t[12]=o*x-h*C-a*v,t[13]=i*C-e*x+n*v,t[14]=m*M-p*S-g*y,t[15]=l*S-c*M+f*y,t},us=function(t){var s=t[0],i=t[1],e=t[2],n=t[4],r=t[5],h=t[6],o=t[8],a=t[9],u=t[10],l=t[12],c=t[13],f=t[14],d=s*r-i*n,p=s*h-e*n,m=i*h-e*r,g=o*c-a*l,y=o*f-u*l,M=a*f-u*c;return t[7]*(s*M-i*y+e*g)-t[3]*(n*M-r*y+h*g)+t[15]*(o*m-a*p+u*d)-t[11]*(l*m-c*p+f*d)},o=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],s=s[15],M=i[0],w=i[1],S=i[2],T=i[3];return t[0]=M*e+w*o+S*c+T*m,t[1]=M*n+w*a+S*f+T*g,t[2]=M*r+w*u+S*d+T*y,t[3]=M*h+w*l+S*p+T*s,t[4]=(M=i[4])*e+(w=i[5])*o+(S=i[6])*c+(T=i[7])*m,t[5]=M*n+w*a+S*f+T*g,t[6]=M*r+w*u+S*d+T*y,t[7]=M*h+w*l+S*p+T*s,t[8]=(M=i[8])*e+(w=i[9])*o+(S=i[10])*c+(T=i[11])*m,t[9]=M*n+w*a+S*f+T*g,t[10]=M*r+w*u+S*d+T*y,t[11]=M*h+w*l+S*p+T*s,t[12]=(M=i[12])*e+(w=i[13])*o+(S=i[14])*c+(T=i[15])*m,t[13]=M*n+w*a+S*f+T*g,t[14]=M*r+w*u+S*d+T*y,t[15]=M*h+w*l+S*p+T*s,t},ls=function(t,s,i){var e,n,r,h,o,a,u,l,c,f,d,p,m=i[0],g=i[1],i=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*i+s[12],t[13]=s[1]*m+s[5]*g+s[9]*i+s[13],t[14]=s[2]*m+s[6]*g+s[10]*i+s[14],t[15]=s[3]*m+s[7]*g+s[11]*i+s[15]):(e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=u,t[7]=l,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*i+s[12],t[13]=n*m+a*g+f*i+s[13],t[14]=r*m+u*g+d*i+s[14],t[15]=h*m+l*g+p*i+s[15]),t},cs=function(t,s,i){var e=i[0],n=i[1],i=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*n,t[5]=s[5]*n,t[6]=s[6]*n,t[7]=s[7]*n,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fs=function(t,s,i,e){var n,r,h,o,a,u,l,c,f,d,p,m,g,y,M,w,S,T,b,v,x=e[0],I=e[1],e=e[2],C=Math.hypot(x,I,e);return C<bn?null:(x*=C=1/C,I*=C,e*=C,C=Math.sin(i),i=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],l=s[5],c=s[6],f=s[7],p=s[9],m=s[10],g=s[11],M=x*I*(n=1-i)-e*C,w=I*I*n+i,S=e*I*n+x*C,T=x*e*n+I*C,b=I*e*n-x*C,v=e*e*n+i,t[0]=r*(i=x*x*n+i)+(u=s[4])*(y=I*x*n+e*C)+(d=s[8])*(e=e*x*n-I*C),t[1]=h*i+l*y+p*e,t[2]=o*i+c*y+m*e,t[3]=a*i+f*y+g*e,t[4]=r*M+u*w+d*S,t[5]=h*M+l*w+p*S,t[6]=o*M+c*w+m*S,t[7]=a*M+f*w+g*S,t[8]=r*T+u*b+d*v,t[9]=h*T+l*b+p*v,t[10]=o*T+c*b+m*v,t[11]=a*T+f*b+g*v,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},ds=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),n=s[4],r=s[5],h=s[6],o=s[7],a=s[8],u=s[9],l=s[10],c=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=n*i+a*e,t[5]=r*i+u*e,t[6]=h*i+l*e,t[7]=o*i+c*e,t[8]=a*i-n*e,t[9]=u*i-r*e,t[10]=l*i-h*e,t[11]=c*i-o*e,t},ps=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),n=s[0],r=s[1],h=s[2],o=s[3],a=s[8],u=s[9],l=s[10],c=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=n*i-a*e,t[1]=r*i-u*e,t[2]=h*i-l*e,t[3]=o*i-c*e,t[8]=n*e+a*i,t[9]=r*e+u*i,t[10]=h*e+l*i,t[11]=o*e+c*i,t},ms=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),n=s[0],r=s[1],h=s[2],o=s[3],a=s[4],u=s[5],l=s[6],c=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=n*i+a*e,t[1]=r*i+u*e,t[2]=h*i+l*e,t[3]=o*i+c*e,t[4]=a*i-n*e,t[5]=u*i-r*e,t[6]=l*i-h*e,t[7]=c*i-o*e,t},gs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ys=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ms=function(t,s,i){var e,n=i[0],r=i[1],i=i[2],h=Math.hypot(n,r,i);return h<bn?null:(n*=h=1/h,r*=h,i*=h,h=Math.sin(s),s=Math.cos(s),t[0]=n*n*(e=1-s)+s,t[1]=r*n*e+i*h,t[2]=i*n*e-r*h,t[3]=0,t[4]=n*r*e-i*h,t[5]=r*r*e+s,t[6]=i*r*e+n*h,t[7]=0,t[8]=n*i*e+r*h,t[9]=r*i*e-n*h,t[10]=i*i*e+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},ws=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ss=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ts=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f=function(t,s,i){var e=s[0],n=s[2],r=n+n,h=e*(l=e+e),o=e*(c=(u=s[1])+u),e=e*r,a=u*c,u=u*r,l=(s=s[3])*l,c=s*c,s=s*r;return t[0]=1-(a+(n=n*r)),t[1]=o+s,t[2]=e-c,t[3]=0,t[4]=o-s,t[5]=1-(h+n),t[6]=u+l,t[7]=0,t[8]=e+c,t[9]=u-l,t[10]=1-(h+a),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},bs=function(t,s){var i=new vn(3),e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=e*e+n*n+r*r+h*h;return 0<c?(i[0]=2*(o*h+l*e+a*r-u*n)/c,i[1]=2*(a*h+l*n+u*e-o*r)/c,i[2]=2*(u*h+l*r+o*n-a*e)/c):(i[0]=2*(o*h+l*e+a*r-u*n),i[1]=2*(a*h+l*n+u*e-o*r),i[2]=2*(u*h+l*r+o*n-a*e)),f(t,s,i),t},a=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},d=function(t,s){var i=s[0],e=s[4],n=s[5],r=s[6],h=s[8],o=s[9],a=s[10];return t[0]=Math.hypot(i,s[1],s[2]),t[1]=Math.hypot(e,n,r),t[2]=Math.hypot(h,o,a),t},u=function(t,s){var i=new vn(3),e=(d(i,s),1/i[0]),n=s[0]*e,r=s[1]*(l=1/i[1]),h=s[2]*(i=1/i[2]),o=s[4]*e,a=s[5]*l,u=s[6]*i,e=s[8]*e,l=s[9]*l,c=0;return 0<(i=n+a+(s=s[10]*i))?(c=2*Math.sqrt(1+i),t[3]=.25*c,t[0]=(u-l)/c,t[1]=(e-h)/c,t[2]=(r-o)/c):a<n&&s<n?(c=2*Math.sqrt(1+n-a-s),t[3]=(u-l)/c,t[0]=.25*c,t[1]=(r+o)/c,t[2]=(e+h)/c):s<a?(c=2*Math.sqrt(1+a-n-s),t[3]=(e-h)/c,t[0]=(r+o)/c,t[1]=.25*c,t[2]=(u+l)/c):(c=2*Math.sqrt(1+s-n-a),t[3]=(r-o)/c,t[0]=(e+h)/c,t[1]=(u+l)/c,t[2]=.25*c),t},vs=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var s=e[0],n=e[1],r=e[2],h=e[4],o=e[5],a=e[6],u=e[8],l=e[9],e=e[10],c=(i[0]=Math.hypot(s,n,r),i[1]=Math.hypot(h,o,a),i[2]=Math.hypot(u,l,e),1/i[0]),f=1/i[1],s=s*c,n=n*f,r=r*(i=1/i[2]),h=h*c,a=a*i,u=u*c,c=l*f,l=e*i,e=0;return 0<(f=s+(o=o*f)+l)?(e=2*Math.sqrt(1+f),t[3]=.25*e,t[0]=(a-c)/e,t[1]=(u-r)/e,t[2]=(n-h)/e):o<s&&l<s?(e=2*Math.sqrt(1+s-o-l),t[3]=(a-c)/e,t[0]=.25*e,t[1]=(n+h)/e,t[2]=(u+r)/e):l<o?(e=2*Math.sqrt(1+o-s-l),t[3]=(u-r)/e,t[0]=(n+h)/e,t[1]=.25*e,t[2]=(a+c)/e):(e=2*Math.sqrt(1+l-s-o),t[3]=(n-h)/e,t[0]=(u+r)/e,t[1]=(a+c)/e,t[2]=.25*e),t},xs=function(t,s,i,e){var n=(h=s[0])*(l=h+h),r=h*(c=(a=s[1])+a),h=h*(f=(u=s[2])+u),o=a*c,a=a*f,u=u*f,l=(s=s[3])*l,c=s*c,s=s*f,f=e[0],d=e[1],e=e[2];return t[0]=(1-(o+u))*f,t[1]=(r+s)*f,t[2]=(h-c)*f,t[3]=0,t[4]=(r-s)*d,t[5]=(1-(n+u))*d,t[6]=(a+l)*d,t[7]=0,t[8]=(h+c)*e,t[9]=(a-l)*e,t[10]=(1-(n+o))*e,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Is=function(t,s,i,e,n){var r=(o=s[0])*(c=o+o),h=o*(f=(u=s[1])+u),o=o*(d=(l=s[2])+l),a=u*f,u=u*d,l=l*d,c=(s=s[3])*c,f=s*f,s=s*d,d=e[0],p=e[1],e=e[2],m=n[0],g=n[1],n=n[2],y=(1-(a+l))*d,M=(h+s)*d,d=(o-f)*d,h=(h-s)*p,s=(1-(r+l))*p,l=(u+c)*p,p=(o+f)*e,o=(u-c)*e,f=(1-(r+a))*e;return t[0]=y,t[1]=M,t[2]=d,t[3]=0,t[4]=h,t[5]=s,t[6]=l,t[7]=0,t[8]=p,t[9]=o,t[10]=f,t[11]=0,t[12]=i[0]+m-(y*m+h*g+p*n),t[13]=i[1]+g-(M*m+s*g+o*n),t[14]=i[2]+n-(d*m+l*g+f*n),t[15]=1,t},Cs=function(t,s){var i=s[0],e=s[2],n=e+e,i=i*(u=i+i),r=(h=s[1])*u,h=h*(l=h+h),o=e*u,a=e*l,u=(s=s[3])*u,l=s*l,s=s*n;return t[0]=1-h-(e=e*n),t[1]=r+s,t[2]=o-l,t[3]=0,t[4]=r-s,t[5]=1-i-e,t[6]=a+u,t[7]=0,t[8]=o+l,t[9]=a-u,t[10]=1-i-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Gs=function(t,s,i,e,n,r,h){var o=1/(i-s),a=1/(n-e),u=1/(r-h);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(n+e)*a,t[10]=(h+r)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*r*2*u,t[15]=0,t},l=function(t,s,i,e,n){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(t[10]=(n+e)*(i=1/(e-n)),t[14]=2*n*e*i):(t[10]=-1,t[14]=-2*e),t},Ns=function(t,s,i,e,n){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(t[10]=n*(i=1/(e-n)),t[14]=n*e*i):(t[10]=-1,t[14]=-e),t},Es=function(t,s,i,e){var n=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),h=Math.tan(s.leftDegrees*Math.PI/180),o=2/(h+(s=Math.tan(s.rightDegrees*Math.PI/180))),a=2/(n+r);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(h-s)*o*.5,t[9]=(n-r)*a*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},c=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),u=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=(h+r)*u,t[15]=1,t},Ds=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),h=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=h,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=r*h,t[15]=1,t},_s=function(t,s,i,e){var n,r,h,o,a=s[0],u=s[1],s=s[2],l=e[0],c=e[1],e=e[2],f=i[0],d=i[1],i=i[2];return Math.abs(a-f)<bn&&Math.abs(u-d)<bn&&Math.abs(s-i)<bn?p(t):(f=a-f,d=u-d,i=s-i,n=c*(i*=o=1/Math.hypot(f,d,i))-e*(d*=o),e=e*(f*=o)-l*i,l=l*d-c*f,(o=Math.hypot(n,e,l))?(n*=o=1/o,e*=o,l*=o):l=e=n=0,c=d*l-i*e,r=i*n-f*l,h=f*e-d*n,(o=Math.hypot(c,r,h))?(c*=o=1/o,r*=o,h*=o):h=r=c=0,t[0]=n,t[1]=c,t[2]=f,t[3]=0,t[4]=e,t[5]=r,t[6]=d,t[7]=0,t[8]=l,t[9]=h,t[10]=i,t[11]=0,t[12]=-(n*a+e*u+l*s),t[13]=-(c*a+r*u+h*s),t[14]=-(f*a+d*u+i*s),t[15]=1,t)},As=function(t,s,i,e){var n=s[0],r=s[1],s=s[2],h=e[0],o=e[1],e=e[2],a=n-i[0],u=r-i[1],l=a*a+u*u+(i=s-i[2])*i,c=(0<l&&(a*=l=1/Math.sqrt(l),u*=l,i*=l),o*i-e*u);return 0<(l=c*c+(e=e*a-h*i)*e+(h=h*u-o*a)*h)&&(c*=l=1/Math.sqrt(l),e*=l,h*=l),t[0]=c,t[1]=e,t[2]=h,t[3]=0,t[4]=u*h-i*e,t[5]=i*c-a*h,t[6]=a*e-u*c,t[7]=0,t[8]=a,t[9]=u,t[10]=i,t[11]=0,t[12]=n,t[13]=r,t[14]=s,t[15]=1,t},Ls=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Os=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Rs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Ps=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},ks=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Fs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},js=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},zs=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],u=t[7],l=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],t=t[15],y=s[0],M=s[1],w=s[2],S=s[3],T=s[4],b=s[5],v=s[6],x=s[7],I=s[8],C=s[9],G=s[10],N=s[11],E=s[12],D=s[13],_=s[14],s=s[15];return Math.abs(i-y)<=bn*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(e-M)<=bn*Math.max(1,Math.abs(e),Math.abs(M))&&Math.abs(n-w)<=bn*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(r-S)<=bn*Math.max(1,Math.abs(r),Math.abs(S))&&Math.abs(h-T)<=bn*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(o-b)<=bn*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(a-v)<=bn*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(u-x)<=bn*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(l-I)<=bn*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(c-C)<=bn*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(f-G)<=bn*Math.max(1,Math.abs(f),Math.abs(G))&&Math.abs(d-N)<=bn*Math.max(1,Math.abs(d),Math.abs(N))&&Math.abs(p-E)<=bn*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(m-D)<=bn*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(g-_)<=bn*Math.max(1,Math.abs(g),Math.abs(_))&&Math.abs(t-s)<=bn*Math.max(1,Math.abs(t),Math.abs(s))},m=function(){var t=new vn(3);return vn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},Bs=function(t){var s=new vn(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Us=function(t){var s=t[0];return Math.hypot(s,t[1],t[2])},g=function(t,s,i){var e=new vn(3);return e[0]=t,e[1]=s,e[2]=i,e},Ws=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Qs=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},Js=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Ys=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},Vs=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},Hs=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},qs=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Zs=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Xs=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Ks=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},$s=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ti=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},si=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ii=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2])},ei=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e+(s=s[2]-t[2])*s},ni=function(t){var s=t[0],i=t[1];return s*s+i*i+(t=t[2])*t},ri=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},hi=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},y=function(t,s){var i=s[0],e=s[1],n=s[2];return 0<(i=i*i+e*e+n*n)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},M=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},w=function(t,s,i){var e=s[0],n=s[1],s=s[2],r=i[0],h=i[1],i=i[2];return t[0]=n*i-s*h,t[1]=s*r-e*i,t[2]=e*h-n*r,t},oi=function(t,s,i,e){var n=s[0],r=s[1],s=s[2];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=s+e*(i[2]-s),t},ai=function(t,s,i,e){var n=Math.acos(Math.min(Math.max(M(s,i),-1),1)),r=Math.sin(n),h=Math.sin((1-e)*n)/r,e=Math.sin(e*n)/r;return t[0]=h*s[0]+e*i[0],t[1]=h*s[1]+e*i[1],t[2]=h*s[2]+e*i[2],t},ui=function(t,s,i,e,n,r){var h=r*r,o=h*(2*r-3)+1,a=h*(r-2)+r,u=h*(r-1);return t[0]=s[0]*o+i[0]*a+e[0]*u+n[0]*(h=h*(3-2*r)),t[1]=s[1]*o+i[1]*a+e[1]*u+n[1]*h,t[2]=s[2]*o+i[2]*a+e[2]*u+n[2]*h,t},li=function(t,s,i,e,n,r){var h=1-r,o=h*h,a=r*r,u=o*h;return t[0]=s[0]*u+i[0]*(o=3*r*o)+e[0]*(h=3*a*h)+n[0]*(a=a*r),t[1]=s[1]*u+i[1]*o+e[1]*h+n[1]*a,t[2]=s[2]*u+i[2]*o+e[2]*h+n[2]*a,t},ci=function(t,s){s=s||1;var i=2*Rn()*Math.PI,e=2*Rn()-1,n=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*n,t[1]=Math.sin(i)*n,t[2]=e*s,t},fi=function(t,s,i){var e=s[0],n=s[1],s=s[2],r=i[3]*e+i[7]*n+i[11]*s+i[15];return t[0]=(i[0]*e+i[4]*n+i[8]*s+i[12])/(r=r||1),t[1]=(i[1]*e+i[5]*n+i[9]*s+i[13])/r,t[2]=(i[2]*e+i[6]*n+i[10]*s+i[14])/r,t},di=function(t,s,i){var e=s[0],n=s[1],s=s[2];return t[0]=e*i[0]+n*i[3]+s*i[6],t[1]=e*i[1]+n*i[4]+s*i[7],t[2]=e*i[2]+n*i[5]+s*i[8],t},pi=function(t,s,i){var e=i[0],n=i[1],r=s[0],h=s[1],o=n*(s=s[2])-(c=i[2])*h,a=c*r-e*s,u=e*h-n*r,l=n*u-c*a,c=c*o-e*u,e=e*a-n*o;return a*=n=2*i[3],u*=n,c*=2,e*=2,t[0]=r+(o*=n)+(l*=2),t[1]=h+a+c,t[2]=s+u+e,t},mi=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0],r[1]=n[1]*Math.cos(e)-n[2]*Math.sin(e),r[2]=n[1]*Math.sin(e)+n[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},gi=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[2]*Math.sin(e)+n[0]*Math.cos(e),r[1]=n[1],r[2]=n[2]*Math.cos(e)-n[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},yi=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0]*Math.cos(e)-n[1]*Math.sin(e),r[1]=n[0]*Math.sin(e)+n[1]*Math.cos(e),r[2]=n[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},Mi=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2],e=(i=Math.sqrt((i*i+e*e+n*n)*(r*r+h*h+o*o)))&&M(t,s)/i;return Math.acos(Math.min(Math.max(e,-1),1))},wi=function(t){return t[0]=0,t[1]=0,t[2]=0,t},Si=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},Ti=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},bi=function(t,s){var i=t[0],e=t[1],t=t[2],n=s[0],r=s[1],s=s[2];return Math.abs(i-n)<=bn*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(e-r)<=bn*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(t-s)<=bn*Math.max(1,Math.abs(t),Math.abs(s))},S=function(){var t=new vn(4);return vn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},vi=function(t){var s=new vn(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},xi=function(t,s,i,e){var n=new vn(4);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n},Ii=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Ci=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},Gi=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Ni=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Ei=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Di=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},_i=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ai=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Li=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Oi=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Ri=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Pi=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},ki=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Fi=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2],s[3]-t[3])},ji=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return i*i+e*e+n*n+(s=s[3]-t[3])*s},T=function(t){var s=t[0];return Math.hypot(s,t[1],t[2],t[3])},b=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e+(t=t[3])*t},zi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},Bi=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Ui=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*i+e*e+n*n+(s=s[3])*s;return 0<r&&(r=1/Math.sqrt(r)),t[0]=i*r,t[1]=e*r,t[2]=n*r,t[3]=s*r,t},v=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Wi=function(t,s,i,e){var n=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],h=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],i=i[2]*e[3]-i[3]*e[2],e=s[0],u=s[1],l=s[2],s=s[3];return t[0]=u*i-l*a+s*o,t[1]=-e*i+l*h-s*r,t[2]=e*a-u*h+s*n,t[3]=-e*o+u*r-l*n,t},Qi=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],s=s[3];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t[3]=s+e*(i[3]-s),t},Ji=function(t,s){var i,e,n,r,h,o;for(s=s||1;1<=(h=(i=2*Rn()-1)*i+(e=2*Rn()-1)*e););for(;1<=(o=(n=2*Rn()-1)*n+(r=2*Rn()-1)*r););var a=Math.sqrt((1-h)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*n*a,t[3]=s*r*a,t},Yi=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3];return t[0]=i[0]*e+i[4]*n+i[8]*r+i[12]*s,t[1]=i[1]*e+i[5]*n+i[9]*r+i[13]*s,t[2]=i[2]*e+i[6]*n+i[10]*r+i[14]*s,t[3]=i[3]*e+i[7]*n+i[11]*r+i[15]*s,t},Vi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2],u=(i=i[3])*e+o*r-a*n,l=i*n+a*e-h*r,c=i*r+h*n-o*e;return t[0]=u*i+(e=-h*e-o*n-a*r)*-h+l*-a-c*-o,t[1]=l*i+e*-o+c*-h-u*-a,t[2]=c*i+e*-a+u*-o-l*-h,t[3]=s[3],t},Hi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},qi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Zi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Xi=function(t,s){var i=t[0],e=t[1],n=t[2],t=t[3],r=s[0],h=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=bn*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-h)<=bn*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-o)<=bn*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(t-s)<=bn*Math.max(1,Math.abs(t),Math.abs(s))},x=function(){var t=new vn(4);return vn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Ki=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},I=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},$i=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return bn<e?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){return t=Yn(t,s),Math.acos(2*t*t-1)},se=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3],h=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*i+s*h+n*a-r*o,t[1]=n*i+s*o+r*h-e*a,t[2]=r*i+s*a+e*o-n*h,t[3]=s*i-e*h-n*o-r*a,t},C=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],s=s[3],h=Math.sin(i),i=Math.cos(i);return t[0]=e*i+s*h,t[1]=n*i+r*h,t[2]=r*i-n*h,t[3]=s*i-e*h,t},G=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],s=s[3],h=Math.sin(i),i=Math.cos(i);return t[0]=e*i-r*h,t[1]=n*i+s*h,t[2]=r*i+e*h,t[3]=s*i-n*h,t},N=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],s=s[3],h=Math.sin(i),i=Math.cos(i);return t[0]=e*i+n*h,t[1]=n*i-e*h,t[2]=r*i+s*h,t[3]=s*i-r*h,t},ie=function(t,s){var i=s[0],e=s[1],s=s[2];return t[0]=i,t[1]=e,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-s*s)),t},E=function(t,s){var i=s[0],e=s[1],n=s[2],s=s[3],r=Math.sqrt(i*i+e*e+n*n),s=Math.exp(s),h=0<r?s*Math.sin(r)/r:0;return t[0]=i*h,t[1]=e*h,t[2]=n*h,t[3]=s*Math.cos(r),t},D=function(t,s){var i=s[0],e=s[1],n=s[2],s=s[3],r=0<(r=Math.sqrt(i*i+e*e+n*n))?Math.atan2(r,s)/r:0;return t[0]=i*r,t[1]=e*r,t[2]=n*r,t[3]=.5*Math.log(i*i+e*e+n*n+s*s),t},ee=function(t,s,i){return D(t,s),Jn(t,t,i),E(t,t),t},_=function(t,s,i,e){var n,r,h=s[0],o=s[1],a=s[2],s=s[3],u=i[0],l=i[1],c=i[2],f=h*u+o*l+a*c+s*(i=i[3]);return f<0&&(f=-f,u=-u,l=-l,c=-c,i=-i),f=bn<1-f?(f=Math.acos(f),n=Math.sin(f),r=Math.sin((1-e)*f)/n,Math.sin(e*f)/n):(r=1-e,e),t[0]=r*h+f*u,t[1]=r*o+f*l,t[2]=r*a+f*c,t[3]=r*s+f*i,t},ne=function(t){var s=Rn(),i=Rn(),e=Rn(),n=Math.sqrt(1-s),s=Math.sqrt(s);return t[0]=n*Math.sin(2*Math.PI*i),t[1]=n*Math.cos(2*Math.PI*i),t[2]=s*Math.sin(2*Math.PI*e),t[3]=s*Math.cos(2*Math.PI*e),t},re=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*i+e*e+n*n+(s=s[3])*s;return t[0]=-i*(r=r?1/r:0),t[1]=-e*r,t[2]=-n*r,t[3]=s*r,t},he=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},A=function(t,s){var i,e,n,r=s[0]+s[4]+s[8];return 0<r?(n=Math.sqrt(r+1),t[3]=.5*n,t[0]=(s[5]-s[7])*(n=.5/n),t[1]=(s[6]-s[2])*n,t[2]=(s[1]-s[3])*n):(i=(1+(r=s[3*(r=s[4]>s[0]?1:0)+r]<s[8]?2:r))%3,e=(2+r)%3,n=Math.sqrt(s[3*r+r]-s[3*i+i]-s[3*e+e]+1),t[r]=.5*n,t[3]=(s[3*i+e]-s[3*e+i])*(n=.5/n),t[i]=(s[3*i+r]+s[3*r+i])*n,t[e]=(s[3*e+r]+s[3*r+e])*n),t},oe=function(t,s,i,e){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Pn,r=Math.PI/360,h=(e*=r,i*=r,Math.sin(s*=r)),o=Math.cos(s),a=Math.sin(i),u=Math.cos(i),l=Math.sin(e),c=Math.cos(e);switch(n){case"xyz":t[0]=h*u*c+o*a*l,t[1]=o*a*c-h*u*l,t[2]=o*u*l+h*a*c,t[3]=o*u*c-h*a*l;break;case"xzy":t[0]=h*u*c-o*a*l,t[1]=o*a*c-h*u*l,t[2]=o*u*l+h*a*c,t[3]=o*u*c+h*a*l;break;case"yxz":t[0]=h*u*c+o*a*l,t[1]=o*a*c-h*u*l,t[2]=o*u*l-h*a*c,t[3]=o*u*c+h*a*l;break;case"yzx":t[0]=h*u*c+o*a*l,t[1]=o*a*c+h*u*l,t[2]=o*u*l-h*a*c,t[3]=o*u*c-h*a*l;break;case"zxy":t[0]=h*u*c-o*a*l,t[1]=o*a*c+h*u*l,t[2]=o*u*l+h*a*c,t[3]=o*u*c-h*a*l;break;case"zyx":t[0]=h*u*c-o*a*l,t[1]=o*a*c+h*u*l,t[2]=o*u*l-h*a*c,t[3]=o*u*c+h*a*l;break;default:throw new Error("Unknown angle order "+n)}return t},ae=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},ue=function(t,s){return Math.abs(v(t,s))>=1-bn},le=function(){var t=new vn(8);return vn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},ce=function(t){var s=new vn(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},fe=function(t,s,i,e,n,r,h,o){var a=new vn(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=n,a[5]=r,a[6]=h,a[7]=o,a},de=function(t,s,i,e,n,r,h){var o=new vn(8),n=(o[0]=t,o[1]=s,o[2]=i,o[3]=e,.5*n),r=.5*r,h=.5*h;return o[4]=n*e+r*i-h*s,o[5]=r*e+h*t-n*i,o[6]=h*e+n*s-r*t,o[7]=-n*t-r*s-h*i,o},L=function(t,s,i){var e=.5*i[0],n=.5*i[1],i=.5*i[2],r=s[0],h=s[1],o=s[2],s=s[3];return t[0]=r,t[1]=h,t[2]=o,t[3]=s,t[4]=e*s+n*o-i*h,t[5]=n*s+i*r-e*o,t[6]=i*s+e*h-n*r,t[7]=-e*r-n*h-i*o,t},pe=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},me=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},ge=function(t,s){var i=x(),e=(u(i,s),new vn(3));return a(e,s),L(t,i,e),t},O=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},ye=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Me=function(t,s,i,e,n,r,h,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t},we=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},Se=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Te=function(t,s){var i=s[4],e=s[5],n=s[6],r=s[7],h=-s[0],o=-s[1],a=-s[2],s=s[3];return t[0]=2*(i*s+r*h+e*a-n*o),t[1]=2*(e*s+r*o+n*h-i*a),t[2]=2*(n*s+r*a+i*o-e*h),t},be=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=.5*i[0],a=.5*i[1],i=.5*i[2],u=s[4],l=s[5],c=s[6],s=s[7];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=h*o+n*i-r*a+u,t[5]=h*a+r*o-e*i+l,t[6]=h*i+e*a-n*o+c,t[7]=-e*o-n*a-r*i+s,t},ve=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=o*h+(d=s[7])*e+a*r-u*n,c=a*h+d*n+u*e-o*r,f=u*h+d*r+o*n-a*e,d=d*h-o*e-a*n-u*r;return C(t,s,i),e=t[0],t[4]=l*(h=t[3])+d*e+c*(r=t[2])-f*(n=t[1]),t[5]=c*h+d*n+f*e-l*r,t[6]=f*h+d*r+l*n-c*e,t[7]=d*h-l*e-c*n-f*r,t},xe=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=o*h+(d=s[7])*e+a*r-u*n,c=a*h+d*n+u*e-o*r,f=u*h+d*r+o*n-a*e,d=d*h-o*e-a*n-u*r;return G(t,s,i),e=t[0],t[4]=l*(h=t[3])+d*e+c*(r=t[2])-f*(n=t[1]),t[5]=c*h+d*n+f*e-l*r,t[6]=f*h+d*r+l*n-c*e,t[7]=d*h-l*e-c*n-f*r,t},Ie=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=o*h+(d=s[7])*e+a*r-u*n,c=a*h+d*n+u*e-o*r,f=u*h+d*r+o*n-a*e,d=d*h-o*e-a*n-u*r;return N(t,s,i),e=t[0],t[4]=l*(h=t[3])+d*e+c*(r=t[2])-f*(n=t[1]),t[5]=c*h+d*n+f*e-l*r,t[6]=f*h+d*r+l*n-c*e,t[7]=d*h-l*e-c*n-f*r,t},Ce=function(t,s,i){var e=i[0],n=i[1],r=i[2],i=i[3],h=s[0],o=s[1],a=s[2],u=s[3];return t[0]=h*i+u*e+o*r-a*n,t[1]=o*i+u*n+a*e-h*r,t[2]=a*i+u*r+h*n-o*e,t[3]=u*i-h*e-o*n-a*r,t[4]=(h=s[4])*i+(u=s[7])*e+(o=s[5])*r-(a=s[6])*n,t[5]=o*i+u*n+a*e-h*r,t[6]=a*i+u*r+h*n-o*e,t[7]=u*i-h*e-o*n-a*r,t},Ge=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3],h=i[0],o=i[1],a=i[2],u=i[3];return t[0]=e*u+s*h+n*a-r*o,t[1]=n*u+s*o+r*h-e*a,t[2]=r*u+s*a+e*o-n*h,t[3]=s*u-e*h-n*o-r*a,t[4]=e*(u=i[7])+s*(h=i[4])+n*(a=i[6])-r*(o=i[5]),t[5]=n*u+s*o+r*h-e*a,t[6]=r*u+s*a+e*o-n*h,t[7]=s*u-e*h-n*o-r*a,t},Ne=function(t,s,i,e){var n,r,h,o,a,u;return Math.abs(e)<bn?O(t,s):(u=Math.hypot(i[0],i[1],i[2]),e*=.5,n=(h=Math.sin(e))*i[0]/u,r=h*i[1]/u,h=h*i[2]/u,i=Math.cos(e),u=s[0],t[0]=u*i+(e=s[3])*n+(o=s[1])*h-(a=s[2])*r,t[1]=o*i+e*r+a*n-u*h,t[2]=a*i+e*h+u*r-o*n,t[3]=e*i-u*n-o*r-a*h,t[4]=(e=s[4])*i+(u=s[7])*n+(o=s[5])*h-(a=s[6])*r,t[5]=o*i+u*r+a*n-e*h,t[6]=a*i+u*h+e*r-o*n,t[7]=u*i-e*n-o*r-a*h,t)},Ee=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},De=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[4],a=i[5],u=i[6],l=i[7],c=s[4],f=s[5],d=s[6],s=s[7],p=i[0],m=i[1],g=i[2],i=i[3];return t[0]=e*i+h*p+n*g-r*m,t[1]=n*i+h*m+r*p-e*g,t[2]=r*i+h*g+e*m-n*p,t[3]=h*i-e*p-n*m-r*g,t[4]=e*l+h*o+n*u-r*a+c*i+s*p+f*g-d*m,t[5]=n*l+h*a+r*o-e*u+f*i+s*m+d*p-c*g,t[6]=r*l+h*u+e*a-n*o+d*i+s*g+c*m-f*p,t[7]=h*l-e*o-n*a-r*u+s*i-c*p-f*m-d*g,t},_e=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},Ae=function(t,s,i,e){var n=1-e;return Xn(s,i)<0&&(e=-e),t[0]=s[0]*n+i[0]*e,t[1]=s[1]*n+i[1]*e,t[2]=s[2]*n+i[2]*e,t[3]=s[3]*n+i[3]*e,t[4]=s[4]*n+i[4]*e,t[5]=s[5]*n+i[5]*e,t[6]=s[6]*n+i[6]*e,t[7]=s[7]*n+i[7]*e,t},Le=function(t,s){var i=Kn(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},Oe=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},Re=function(t,s){var i,e,n,r,h,o,a,u,l=Kn(s);return 0<l&&(l=Math.sqrt(l),u=(i=s[0]/l)*(h=s[4])+(e=s[1]/l)*(o=s[5])+(n=s[2]/l)*(a=s[6])+(r=s[3]/l)*(s=s[7]),t[0]=i,t[1]=e,t[2]=n,t[3]=r,t[4]=(h-i*u)/l,t[5]=(o-e*u)/l,t[6]=(a-n*u)/l,t[7]=(s-r*u)/l),t},Pe=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},ke=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Fe=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],t=t[7],u=s[0],l=s[1],c=s[2],f=s[3],d=s[4],p=s[5],m=s[6],s=s[7];return Math.abs(i-u)<=bn*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-l)<=bn*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(n-c)<=bn*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-f)<=bn*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(h-d)<=bn*Math.max(1,Math.abs(h),Math.abs(d))&&Math.abs(o-p)<=bn*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=bn*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(t-s)<=bn*Math.max(1,Math.abs(t),Math.abs(s))},R=function(){var t=new vn(2);return vn!=Float32Array&&(t[0]=0,t[1]=0),t},je=function(t){var s=new vn(2);return s[0]=t[0],s[1]=t[1],s},ze=function(t,s){var i=new vn(2);return i[0]=t,i[1]=s,i},Be=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ue=function(t,s,i){return t[0]=s,t[1]=i,t},We=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},Qe=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},Je=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},Ye=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},Ve=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},He=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},qe=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},Ze=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Xe=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Ke=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},$e=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},tn=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1])},sn=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},en=function(t){var s=t[0];return Math.hypot(s,t[1])},nn=function(t){var s=t[0];return s*s+(t=t[1])*t},rn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},hn=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},on=function(t,s){var i=s[0],e=s[1];return 0<(i=i*i+e*e)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t},an=function(t,s){return t[0]*s[0]+t[1]*s[1]},un=function(t,s,i){return s=s[0]*i[1]-s[1]*i[0],t[0]=t[1]=0,t[2]=s,t},ln=function(t,s,i,e){var n=s[0],s=s[1];return t[0]=n+e*(i[0]-n),t[1]=s+e*(i[1]-s),t},cn=function(t,s){s=s||1;var i=2*Rn()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},fn=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s,t[1]=i[1]*e+i[3]*s,t},dn=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s+i[4],t[1]=i[1]*e+i[3]*s+i[5],t},pn=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[3]*s+i[6],t[1]=i[1]*e+i[4]*s+i[7],t},mn=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[4]*s+i[12],t[1]=i[1]*e+i[5]*s+i[13],t},gn=function(t,s,i,e){var n=s[0]-i[0],s=s[1]-i[1],r=Math.sin(e),e=Math.cos(e);return t[0]=n*e-s*r+i[0],t[1]=n*r+s*e+i[1],t},yn=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1],n=Math.sqrt((i*i+t*t)*(e*e+s*s));return Math.acos(Math.min(Math.max(n&&(i*e+t*s)/n,-1),1))},Mn=function(t){return t[0]=0,t[1]=0,t},wn=function(t){return"vec2("+t[0]+", "+t[1]+")"},Sn=function(t,s){return t[0]===s[0]&&t[1]===s[1]},Tn=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1];return Math.abs(i-e)<=bn*Math.max(1,Math.abs(i),Math.abs(e))&&Math.abs(t-s)<=bn*Math.max(1,Math.abs(t),Math.abs(s))};n,p,f,a,d,u,m,g,y,M,w,S,v,x,I,C,G,N,E,D,_,A,L,O,R,bn=1e-6,vn="undefined"!=typeof Float32Array?Float32Array:Array,Rn=Math.random,Pn="zyx",kn=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),Fn={__proto__:null,EPSILON:bn,get m(){return vn},g:Rn,M:Pn,S:P,T:k,equals:F},jn=Object.freeze({__proto__:null,create:j,clone:z,I:B,identity:U,C:W,set:Q,G:J,N:Y,D:V,_:H,multiply:t,rotate:q,scale:Z,A:X,L:K,O:$,R:tt,P:st,add:it,F:s,j:et,equals:nt,B:rt,U:ht,mul:t,sub:s}),zn=Object.freeze({__proto__:null,create:ot,clone:at,I:ut,identity:lt,C:ct,set:ft,N:dt,_:pt,multiply:i,rotate:mt,scale:gt,translate:yt,A:Mt,L:wt,W:St,O:Tt,R:bt,add:vt,F:e,B:xt,U:It,j:Ct,equals:Gt,mul:i,sub:e}),Bn=Object.freeze({__proto__:null,create:n,J:Nt,clone:Et,I:Dt,C:_t,set:At,identity:Lt,G:Ot,N:Rt,D:Pt,_:kt,multiply:r,translate:Ft,rotate:jt,scale:zt,W:Bt,A:Ut,L:Wt,Y:Qt,V:Jt,H:Yt,Z:Vt,O:Ht,R:qt,add:Zt,F:h,B:Xt,U:Kt,j:$t,equals:ts,mul:r,sub:h}),xn=Object.freeze({__proto__:null,create:ss,clone:is,I:es,C:ns,set:rs,identity:p,G:hs,N:os,D:as,_:us,multiply:o,translate:ls,scale:cs,rotate:fs,X:ds,K:ps,$:ms,W:gs,L:ys,A:Ms,tt:ws,it:Ss,et:Ts,nt:f,ht:bs,ot:a,ut:d,lt:u,ct:vs,ft:xs,dt:Is,V:Cs,gt:Gs,yt:l,perspective:l,Mt:Ns,St:Es,Tt:c,ortho:c,bt:Ds,vt:_s,xt:As,O:Ls,R:Os,add:Rs,F:Ps,B:ks,U:Fs,j:js,equals:zs,mul:o,sub:Ps}),Zn=Ys,$n=Vs,Qn=Hs,tr=ii,sr=ei,Un=Us,ir=ni,On=m(),In=Object.freeze({__proto__:null,create:m,clone:Bs,length:Us,C:g,I:Ws,set:Qs,add:Js,F:Ys,multiply:Vs,It:Hs,ceil:qs,floor:Zs,min:Xs,max:Ks,round:$s,scale:ti,Ct:si,Gt:ii,Nt:ei,Et:ni,Dt:ri,inverse:hi,normalize:y,_t:M,At:w,Lt:oi,Ot:ai,Rt:ui,Pt:li,random:ci,kt:fi,Ft:di,jt:pi,X:mi,K:gi,$:yi,angle:Mi,zt:wi,O:Si,j:Ti,equals:bi,sub:Zn,mul:$n,div:Qn,Bt:tr,Ut:sr,Wt:Un,Qt:ir,forEach:function(t,s,i,e,n,r){var h,o;for(s=s||3,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,h=i;h<o;h+=s)On[0]=t[h],On[1]=t[h+1],On[2]=t[h+2],n(On,On,r),t[h]=On[0],t[h+1]=On[1],t[h+2]=On[2];return t}}),Zn=Ni,$n=Ei,Qn=Di,tr=Fi,sr=ji,ir=T,er=b,Ln=S(),Wn=Object.freeze({__proto__:null,create:S,clone:vi,C:xi,I:Ii,set:Ci,add:Gi,F:Ni,multiply:Ei,It:Di,ceil:_i,floor:Ai,min:Li,max:Oi,round:Ri,scale:Pi,Ct:ki,Gt:Fi,Nt:ji,length:T,Et:b,Dt:zi,inverse:Bi,normalize:Ui,_t:v,At:Wi,Lt:Qi,random:Ji,kt:Yi,jt:Vi,zt:Hi,O:qi,j:Zi,equals:Xi,sub:Zn,mul:$n,div:Qn,Bt:tr,Ut:sr,Wt:ir,Qt:er,forEach:function(t,s,i,e,n,r){var h,o;for(s=s||4,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,h=i;h<o;h+=s)Ln[0]=t[h],Ln[1]=t[h+1],Ln[2]=t[h+2],Ln[3]=t[h+3],n(Ln,Ln,r),t[h]=Ln[0],t[h+1]=Ln[1],t[h+2]=Ln[2],t[h+3]=Ln[3];return t}}),Zn=vi,$n=xi,Qn=Ii,tr=Ci,sr=Gi,ir=se,Jn=Pi,Yn=v,er=Qi,nr=Vn=T,rr=Hn=b,qn=Ui,hr=Zi,Dn=m(),_n=g(1,0,0),An=g(0,1,0),or=function(t,s,i){var e=M(s,i);return e<-.999999?(w(Dn,_n,s),Un(Dn)<1e-6&&w(Dn,An,s),y(Dn,Dn),I(t,Dn,Math.PI),t):.999999<e?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(w(Dn,s,i),t[0]=Dn[0],t[1]=Dn[1],t[2]=Dn[2],t[3]=1+e,qn(t,t))},Nn=x(),En=x(),ar=function(t,s,i,e,n,r){return _(Nn,s,n,r),_(En,i,e,r),_(t,Nn,En,2*r*(1-r)),t},Gn=n(),Zn=Object.freeze({__proto__:null,create:x,identity:Ki,Jt:I,Yt:$i,Vt:te,multiply:se,X:C,K:G,$:N,Ht:ie,exp:E,qt:D,pow:ee,Ot:_,random:ne,N:re,Zt:he,Xt:A,Kt:oe,O:ae,clone:Zn,C:$n,I:Qn,set:tr,add:sr,mul:ir,scale:Jn,_t:Yn,Lt:er,length:Vn,Wt:nr,Et:Hn,Qt:rr,normalize:qn,j:hr,equals:ue,$t:or,ts:ar,ss:function(t,s,i,e){return Gn[0]=i[0],Gn[3]=i[1],Gn[6]=i[2],Gn[1]=e[0],Gn[4]=e[1],Gn[7]=e[2],Gn[2]=-s[0],Gn[5]=-s[1],Gn[8]=-s[2],qn(t,A(t,Gn))}}),Xn=Yn,$n=Kn=Hn,tr=Object.freeze({__proto__:null,create:le,clone:ce,C:fe,es:de,nt:L,W:pe,A:me,J:ge,I:O,identity:ye,set:Me,ns:Qn,rs:we,hs:Qn,os:Se,ot:Te,translate:be,X:ve,K:xe,$:Ie,us:Ce,ls:Ge,cs:Ne,add:Ee,multiply:De,mul:De,scale:_e,_t:Xn,Lt:Ae,N:Le,Zt:Oe,length:Vn,Wt:Vn,Et:Kn,Qt:$n,normalize:Re,O:Pe,j:ke,equals:Fe}),sr=en,ir=Qe,er=Je,nr=Ye,rr=tn,hr=sn,or=nn,Cn=R(),ar=Object.freeze({__proto__:null,create:R,clone:je,C:ze,I:Be,set:Ue,add:We,F:Qe,multiply:Je,It:Ye,ceil:Ve,floor:He,min:qe,max:Ze,round:Xe,scale:Ke,Ct:$e,Gt:tn,Nt:sn,length:en,Et:nn,Dt:rn,inverse:hn,normalize:on,_t:an,At:un,Lt:ln,random:cn,ds:fn,ps:dn,Ft:pn,kt:mn,rotate:gn,angle:yn,zt:Mn,O:wn,j:Sn,equals:Tn,Wt:sr,sub:ir,mul:er,div:nr,Bt:rr,Ut:hr,Qt:or,forEach:function(t,s,i,e,n,r){var h,o;for(s=s||2,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,h=i;h<o;h+=s)Cn[0]=t[h],Cn[1]=t[h+1],n(Cn,Cn,r),t[h]=Cn[0],t[h+1]=Cn[1];return t}}),globalThis.gs=Fn,globalThis.gs.ys=jn,globalThis.gs.Ms=zn,globalThis.gs.ws=Bn,globalThis.gs.Ss=xn,globalThis.gs.Ts=Zn,globalThis.gs.bs=tr,globalThis.gs.vs=ar,globalThis.gs.xs=In,globalThis.gs.Is=Wn}var Cn,Gn,Nn,En,Dn,_n,An,Ln,On,bn,vn,Rn,Pn,kn,Fn,jn,zn,Bn,xn,Un,In,Wn,Qn,Jn,Yn,Vn,Hn,qn,Zn,Xn,Kn,$n,tr,sr,ir,er,nr,rr,hr,or,ar,R,P,k,F;{let a=function(t,s,i){var e=[0,0],n=t[1][1]-t[0][1],r=t[0][0]-t[1][0],t=n*t[0][0]+r*t[0][1],h=s[1][1]-s[0][1],o=s[0][0]-s[1][0],s=h*s[0][0]+o*s[0][1],a=n*o-h*r;return m(a,0,i=i||0)||(e[0]=(o*t-r*s)/a,e[1]=(n*s-h*t)/a),e},n=function(t,s,i,e){var n,r=s[0]-t[0],s=s[1]-t[1],h=e[0]-i[0];return h*s-(e=e[1]-i[1])*r!=0&&(n=(h*(t[1]-i[1])+e*(i[0]-t[0]))/(e*r-h*s),0<=(t=(r*(i[1]-t[1])+s*(t[0]-i[0]))/(h*s-e*r)))&&t<=1&&0<=n&&n<=1},o=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},v=function(t,s,i){return 0<o(t,s,i)},x=function(t,s,i){return 0<=o(t,s,i)},I=function(t,s,i){return o(t,s,i)<0},C=function(t,s,i){return o(t,s,i)<=0},r=function(t,s,i,e){var n,r,h;return e?(h=P,(r=R)[0]=s[0]-t[0],r[1]=s[1]-t[1],h[0]=i[0]-s[0],h[1]=i[1]-s[1],n=r[0]*h[0]+r[1]*h[1],r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),h=Math.sqrt(h[0]*h[0]+h[1]*h[1]),Math.acos(n/(r*h))<e):0===o(t,s,i)},G=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},N=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},h=function(t){t.length=0},E=function(t,s,i,e){for(var n=i;n<e;n++)t.push(s[n])},t=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!v(N(t,s-1),N(t,s),N(t,s+1))&&(u(t),!0)},u=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},D=function(t,s){return I(N(t,s-1),N(t,s),N(t,s+1))},l=function(t,s,i){var e,n=k,r=F;if(x(N(t,s+1),N(t,s),N(t,i))&&C(N(t,s-1),N(t,s),N(t,i)))return!1;for(var h=G(N(t,s),N(t,i)),o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&x(N(t,s),N(t,i),N(t,o+1))&&C(N(t,s),N(t,i),N(t,o))&&(n[0]=N(t,s),n[1]=N(t,i),r[0]=N(t,o),r[1]=N(t,o+1),e=a(n,r),G(N(t,s),e)<h))return!1;return!0},_=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&n(N(t,s),N(t,i),N(t,e),N(t,e+1)))return!1;return!0},c=function(t,s,i,e){var n=e||[];if(h(n),s<i)for(var r=s;r<=i;r++)n.push(t[r]);else{for(r=0;r<=i;r++)n.push(t[r]);for(r=s;r<t.length;r++)n.push(t[r])}return n},f=function(t){for(var s=[],i=[],e=[],n=Number.MAX_VALUE,r=0;r<t.length;++r)if(D(t,r))for(var h=0;h<t.length;++h)if(l(t,r,h)){for(var i=f(c(t,r,h,e)),o=f(c(t,h,r,e)),a=0;a<o.length;a++)i.push(o[a]);i.length<n&&(n=(s=i).length,s.push([N(t,r),N(t,h)]))}return s},s=function(t){var s=f(t);return 0<s.length?d(t,s):[t]},d=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var n=s[e],r=0;r<i.length;r++){var h=d(i[r],n);if(h){i.splice(r,1),i.push(h[0],h[1]);break}}return i}return e=t.indexOf((n=s)[0]),r=t.indexOf(n[1]),-1!==e&&-1!==r&&[c(t,e,r),c(t,r,e)]},i=function(t){for(var s=t,i=0;i<s.length-1;i++)for(var e=0;e<i-1;e++)if(n(s[i],s[i+1],s[e],s[e+1]))return!1;for(i=1;i<s.length-2;i++)if(n(s[0],s[s.length-1],s[i],s[i+1]))return!1;return!0},A=function(t,s,i,e,n){var r=s[1]-t[1],s=t[0]-s[0],t=r*t[0]+s*t[1],h=e[1]-i[1],e=i[0]-e[0],i=h*i[0]+e*i[1],o=r*e-h*s;return m(o,0,n=n||0)?[0,0]:[(e*t-s*i)/o,(r*i-h*t)/o]},L=function(t,s,i,e,n,r,h){r=r||100,h=h||0,n=n||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],u=[0,0],l=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],M=[],w=t,S=t;if(!(S.length<3))if(r<++h)console.warn("quickDecomp: max level ("+r+") reached.");else{for(var T=0;T<t.length;++T)if(D(w,T)){i.push(w[T]);for(var l=c=Number.MAX_VALUE,b=0;b<t.length;++b)v(N(w,T-1),N(w,T),N(w,b))&&C(N(w,T-1),N(w,T),N(w,b-1))&&(u=A(N(w,T-1),N(w,T),N(w,b),N(w,b-1)),I(N(w,T+1),N(w,T),u))&&(f=G(w[T],u))<c&&(c=f,a=u,m=b),v(N(w,T+1),N(w,T),N(w,b+1))&&C(N(w,T+1),N(w,T),N(w,b))&&(u=A(N(w,T+1),N(w,T),N(w,b),N(w,b+1)),v(N(w,T-1),N(w,T),u))&&(f=G(w[T],u))<l&&(l=f,o=u,p=b);if(m===(p+1)%t.length)u[0]=(a[0]+o[0])/2,u[1]=(a[1]+o[1])/2,e.push(u),T<p?(E(y,w,T,p+1),y.push(u),M.push(u),0!==m&&E(M,w,m,w.length),E(M,w,0,T+1)):(0!==T&&E(y,w,T,w.length),E(y,w,0,p+1),y.push(u),M.push(u),E(M,w,m,T+1));else{if(p<m&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(b=m;b<=p;++b)x(N(w,T-1),N(w,T),N(w,b))&&C(N(w,T+1),N(w,T),N(w,b))&&(f=G(N(w,T),N(w,b)))<d&&_(w,T,b)&&(d=f,g=b%t.length);T<g?(E(y,w,T,g+1),0!==g&&E(M,w,g,S.length),E(M,w,0,T+1)):(0!==T&&E(y,w,T,S.length),E(y,w,0,g+1),E(M,w,g,T+1))}return y.length<M.length?(L(y,s,i,e,n,r,h),L(M,s,i,e,n,r,h)):(L(M,s,i,e,n,r,h),L(y,s,i,e,n,r,h)),s}s.push(t)}return s},e=function(t,s){for(var i=0,e=t.length-1;3<t.length&&0<=e;--e)r(N(t,e-1),N(t,e),N(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},p=function(t,s){for(var i=t.length-1;1<=i;--i)for(var e=t[i],n=i-1;0<=n;--n)g(e,t[n],s)&&t.splice(i,1)},m=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},g=function(t,s,i){return m(t[0],s[0],i)&&m(t[1],s[1],i)};a,n,o,v,x,I,C,r,G,N,h,E,u,D,l,_,c,f,d,A,L,m,g,R=[],P=[],k=[],F=[],self.Cs={Gs:s,Ns:L,Es:i,Ds:e,_s:p,As:t}}{let t=!1,s=!1,i="dev",e=Symbol("Construct internal API token"),n=14,r=self.Ls=class{constructor(){throw TypeError("static class can't be instantiated")}static Os(){if(n<=0)throw new Error("cannot obtain internal API token");return--n,e}static Rs(){t=!0}static Ps(){return t}static ks(){s=!0}static Fs(){return s}static js(t){i=t}static zs(){return i}static Bs(){return"final"===i}};r.isDebug=!1,r.Us=!1,r.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Ws={}}{const s=self.Ls;s.Qs=class{constructor(t){this.Js=t,this.Ys=new Map,this.Vs()}Vs(){let t=this.Js,s=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const i of s)this.Hs(i)}Hs(t){if(t)if(t.includes("=")){const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Ys.set(i,e)}else this.Ys.set(t,null)}qs(){for(const t of this.Ys)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}Zs(t){return this.Ys.has(t)}Xs(t){const s=this.Ys.get(t);return void 0===s?null:s}Ks(){history.replaceState("",document.title,location.pathname+location.search)}$s(t){this.Js=t,this.Ys.clear(),this.Vs()}},s.ti=new s.Qs(location.search),s.si=new s.Qs(location.hash),s.ti.Zs("perf")&&(s.ii=!0),"dev"!==s.ti.Xs("mode")&&s.js("final")}{let e=function(t){const s=parseFloat(t),i=U.get(s);return i||(13<=s?"11":"NT "+t)};e;const a=self.Ls,B="(unknown)",U=(a.ei={ni:B,ri:B,hi:B,oi:B,ai:NaN,li:B,ci:"browser",fi:!0,di:!1,mi:!1,gi:!1,yi:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),W=navigator.userAgent,Q=navigator.userAgentData;if(Q&&0<Q.brands.length){let s=function(t){let s="",i="",e="",n="";for(const r of t){const h=J.get(r.brand),o=(!s&&h&&(s=h,i=r.version),Y.get(r.brand));!e&&o&&(e=o,n=r.version)}s||"Chromium"!==e||(a.ei.hi="Chromium",a.ei.oi=n),a.ei.hi=s||B,a.ei.oi=i||B,a.ei.li=e||B};s,a.ei.ni=Q.platform,a.ei.di=Q.mobile,a.ei.fi=!a.ei.di;const J=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),Y=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);s(Q.brands);let i=!1;a.ei.yi=async()=>{if(!i)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);s(t.fullVersionList),"Windows"===a.ei.ni?a.ei.ri=e(t.platformVersion):a.ei.ri=t.platformVersion,i=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let t=function(t,s){const i=Array.isArray(t)?t:[t];for(const e of i){const n=e.exec(W);if(n){s(n);break}}};t(/windows\s+nt\s+([\d\.]+)/i,t=>{a.ei.ni="Windows";const s=t[1];a.ei.ri=e(s)}),t(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{a.ei.ni="macOS",a.ei.ri=t[1].replace(/_/g,".")}),t(/CrOS/,()=>{a.ei.ni="Chrome OS"}),t(/linux|openbsd|freebsd|netbsd/i,()=>{a.ei.ni="Linux"}),t(/android/i,()=>{a.ei.ni="Android"}),t(/android\s+([\d\.]+)/i,t=>{a.ei.ni="Android",a.ei.ri=t[1]}),a.ei.ni===B&&(t(/(iphone|ipod|ipad)/i,t=>{a.ei.ni="iOS"}),t([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{a.ei.ni="iOS",a.ei.ri=t[1].replace(/_/g,".")}));const V=/chrome\//i.test(W),H=/chromium\//i.test(W),q=/edg\//i.test(W),Z=/OPR\//.test(W),X=/nwjs/i.test(W),K=/safari\//i.test(W),$=/webkit/i.test(W),tt=(q||Z||t(/chrome\/([\d\.]+)/i,t=>{a.ei.hi="Chrome",a.ei.oi=t[1],a.ei.li="Chromium"}),t(/edg\/([\d\.]+)/i,t=>{a.ei.hi="Edge",a.ei.oi=t[1],a.ei.li="Chromium"}),t(/OPR\/([\d\.]+)/,t=>{a.ei.hi="Opera",a.ei.oi=t[1],a.ei.li="Chromium"}),t(/chromium\/([\d\.]+)/i,t=>{a.ei.hi="Chromium",a.ei.oi=t[1],a.ei.li="Chromium"}),t(/nwjs\/[0-9.]+/i,t=>{a.ei.hi="NW.js",a.ei.oi=t[1],a.ei.li="Chromium",a.ei.ci="nwjs"}),t(/firefox\/([\d\.]+)/i,t=>{a.ei.hi="Firefox",a.ei.oi=t[1],a.ei.li="Gecko"}),!K||V||H||q||Z||X||(a.ei.hi="Safari",a.ei.li="WebKit",t(/version\/([\d\.]+)/i,t=>{a.ei.oi=t[1]}),t(/crios\/([\d\.]+)/i,t=>{a.ei.hi="Chrome for iOS",a.ei.oi=t[1]}),t(/fxios\/([\d\.]+)/i,t=>{a.ei.hi="Firefox for iOS",a.ei.oi=t[1]}),t(/edgios\/([\d\.]+)/i,t=>{a.ei.hi="Edge for iOS",a.ei.oi=t[1]})),a.ei.li===B&&$&&(a.ei.li="WebKit"),"Android"===a.ei.ni&&"Safari"===a.ei.hi&&(a.ei.hi="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),st=tt.has(a.ei.ni)||"nwjs"===a.ei.ci;a.ei.fi=st,a.ei.di=!st}"Chrome"===a.ei.hi&&"browser"===a.ei.ci&&/wv\)/.test(W)&&(a.ei.ci="webview"),"nwjs"!==a.ei.ci&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(a.ei.ci="webapp"),a.ei.ai=parseFloat(a.ei.oi);const i="macOS"===a.ei.ni&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;i&&(a.ei.ni="iOS",a.ei.ri=a.ei.oi,a.ei.fi=!1,a.ei.di=!0,a.ei.gi=!0),a.ei.mi="macOS"===a.ei.ni||"iOS"===a.ei.ni}{let h=function(i){return new Promise((t,s)=>{i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})},o=function(i){return new Promise((t,s)=>{i.oncomplete=()=>t(),i.onerror=()=>s(i.error),i.onabort=()=>s(i.error)})},t=function(t,s){return j(t,s)},s=function(t,s){return j(t,s,!0)},a=function(s){e(s);let t=nt.get(s);return t instanceof Promise||(t=(async i=>{e(i);const t=indexedDB.open(i,it);return t.addEventListener("upgradeneeded",t=>{try{const s=t.target.result;s.createObjectStore(et)}catch(t){console.error("Failed to create objectstore for database "+i,t)}}),h(t)})(s),nt.set(s,t),t.catch(t=>nt.delete(s))),t},e=function(t){if("string"!=typeof t)throw new TypeError("expected string")},r=function(t,n){const s=t.objectStore(et).openCursor();return new Promise(i=>{const e=[];s.onsuccess=t=>{const s=t.target.result;if(s){switch(n){case"entries":e.push([s.key,s.value]);break;case"keys":e.push(s.key);break;case"values":e.push(s.value)}s.continue()}else i(e)}})};h,o,t,s,a,e,r;const it=2,et="keyvaluepairs",nt=new Map,rt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,ht="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function j(s,i,e=!1,n=!0){const t=await a(s);try{const r=t.transaction([et],e?"readwrite":"readonly");return i(r)}catch(t){if(n&&"InvalidStateError"===t.name)return nt.delete(s),j(s,i,e,!1);throw t}}class ot{constructor(t){e(t),this.name=t}async ready(){await a(this.name)}set(n,r){return e(n),s(this.name,async t=>{const s=t.objectStore(et).put(r,n),i=h(s),e=o(t);await Promise.all([e,i])})}get(r){return e(r),t(this.name,async t=>{const s=t.objectStore(et).get(r),i=h(s),e=o(t),[,n]=await Promise.all([e,i]);return n})}delete(n){return e(n),s(this.name,async t=>{const s=t.objectStore(et).delete(n),i=h(s),e=o(t);await Promise.all([e,i])})}clear(){return s(this.name,async t=>{const s=t.objectStore(et).clear(),i=h(s),e=o(t);await Promise.all([e,i])})}keys(){return t(this.name,async t=>{let s;if(ht){const n=t.objectStore(et).getAllKeys();s=h(n)}else s=r(t,"keys");const i=o(t),[,e]=await Promise.all([i,s]);return e})}values(){return t(this.name,async t=>{let s;if(rt){const n=t.objectStore(et).getAll();s=h(n)}else s=r(t,"values");const i=o(t),[,e]=await Promise.all([i,s]);return e})}entries(){return t(this.name,async t=>{const s=r(t,"entries"),i=o(t),[,e]=await Promise.all([i,s]);return e})}}self.Mi=ot}{let i=function(t){throw new Error(`"${t}" is not implemented`)},e=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},n=function(e){return"object"==typeof e?new Promise(s=>{const{port1:t,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),t.postMessage(e)}):Promise.resolve(e)};i,e,n;const at=self.Mi,ut=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];new WeakMap;class lt{constructor(t){this.wi=t,this.Si=!this.wi,this.Si||"undefined"!=typeof indexedDB||(this.Si=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.Ti=new Map}bi(t){if(!this.Si)for(const s of ut)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.Si=!0;break}}async vi(t){const s=this.Ti.get(t),i=await n(s);return void 0===i?null:i}async xi(t,s){s=await n(s),this.Ti.set(t,s)}Ii(t){this.Ti.delete(t)}Ci(){this.Ti.clear()}Gi(){return Array.from(this.Ti.keys())}Ni(){return this.Si}Ei(){return this.Ti}Di(t){this.Ti=t}async getItem(s,t){if(e(t),this.Si)return this.vi(s);let i;try{i=await this.wi.get(s)}catch(t){return this.bi(t),this.Si?this.vi(s):(console.error(`Error reading '${s}' from storage, returning null: `,t),null)}return void 0===i?null:i}async setItem(s,i,t){if(e(t),void 0===i&&(i=null),this.Si)await this.xi(s,i);else try{await this.wi.set(s,i)}catch(t){if(this.bi(t),!this.Si)throw t;await this.xi(s,i)}}async removeItem(s,t){if(e(t),this.Si)this.Ii(s);else try{await this.wi.delete(s)}catch(t){this.bi(t),this.Si?this.Ii(s):console.error(`Error removing '${s}' from storage: `,t)}}async clear(t){if(e(t),this.Si)this.Ci();else try{await this.wi.clear()}catch(t){this.bi(t),this.Si?this.Ci():console.error("Error clearing storage: ",t)}}async keys(t){if(e(t),this.Si)return this.Gi();let s=[];try{s=await this.wi.keys()}catch(t){if(this.bi(t),this.Si)return this.Gi();console.error("Error getting storage keys: ",t)}return s}ready(t){return e(t),this.Si?Promise.resolve(!0):this.wi.ready()}_i(t){if(t.forceInMemoryFallback)return new lt(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new at(s);return new lt(i)}}length(t){i("localforage.length()")}key(t,s){i("localforage.key()")}iterate(t,s){i("localforage.iterate()")}Ai(t){i("localforage.setDriver()")}config(t){i("localforage.config()")}Li(t){i("localforage.defineDriver()")}Oi(){i("localforage.driver()")}supports(t){i("localforage.supports()")}dropInstance(){i("localforage.dropInstance()")}}self.localforage=new lt(new at("localforage"))}{const e=self.Ls;if(e.Ri={},e.Ri.Pi=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const s=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==s.reverse}catch(t){return!1}})(),e.Ri.ki="undefined"!=typeof HTMLDialogElement,e.Ri.Fi=!!self.requestIdleCallback,e.Ri.ImageBitmap=!!self.createImageBitmap,e.Ri.ImageBitmapOptions=!1,e.Ri.ji=!1,e.Ri.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{e.Ri.ImageBitmapOptions=!0}).catch(()=>{e.Ri.ImageBitmapOptions=!1})}catch(t){e.Ri.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{e.Ri.ji=10===t.width&&10===t.height}).catch(()=>{e.Ri.ji=!1})}catch(t){e.Ri.ji=!1}}if(e.Ri.Bi=!(!navigator.clipboard||!navigator.clipboard.readText),e.Ri.Ui=!(!navigator.permissions||!navigator.permissions.query),e.Ri.Wi=!1,e.Ri.Ui){const ct={name:"clipboard-read"};navigator.permissions.query(ct).then(()=>{e.Ri.Wi=!0}).catch(()=>{e.Ri.Wi=!1})}e.Ri.Qi=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),e.Ri.Ji="undefined"!=typeof Proxy,e.Ri.Yi=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),e.Ri.Vi="function"==typeof fetch,e.Ri.Hi=!!(self.isSecureContext&&"Opera"!==e.ei.hi&&navigator.storage&&navigator.storage.persist),e.Ri.Zi=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),e.Ri.Xi=(()=>{if("undefined"==typeof document)return!1;if("iOS"===e.ei.ni)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),e.Ri.ImageDecoder=void 0!==self.ImageDecoder,e.Ri.Ki=!!self.VideoEncoder,e.Ri.$i=!!self.showOpenFilePicker,e.Ri.te=!!self.queryLocalFonts,e.Ri.UserActivation=!!navigator.userActivation,e.Ri.ie=!1,(async()=>{let s;"undefined"==typeof document?s=new OffscreenCanvas(32,32):((s=document.createElement("canvas")).width=32,s.height=32);const t=s.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let i=null;try{s.convertToBlob?i=await s.convertToBlob({type:"image/webp",quality:1}):s.toBlob&&(i=await new Promise(t=>s.toBlob(t,"image/webp",1))),e.Ri.ie=i&&"image/webp"===i.type}catch(t){e.Ri.ie=!1}})()}{let e=function(t,i){return t.reduce((t,s)=>(0<i&&Array.isArray(s)?Array.prototype.push.apply(t,e(s,i-1)):t.push(s),t),[])};e;const ft=self.Ls;if(!String.prototype.trimStart){const dt=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(dt,"")}}if(!String.prototype.trimEnd){const pt=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(pt,"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(ft.ne(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),Array.prototype.flat||(Array.prototype.flat=function(t=1){return e(this,t)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.re||(Set.prototype.re=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((i,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,s)=>i({usage:t,quota:s}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let i=function(t){let s=mt.he(),i="Assertion failure: "+t+"\n\nStack trace:\n"+s;console.error(i)};i;const mt=self.Ls;self.assert=function(t,s){t||i(s)}}{const n=self.Ls,gt=self.Ws,yt=(n.oe=function(t){return"number"==typeof t},n.ae=function(t){return n.oe(t)&&isFinite(t)},n.ue=function(t){if(!n.oe(t))throw new TypeError("expected number")},n.le=function(t){n.fe(t)},n.de=function(t,s,i){if(!n.oe(t)||isNaN(t)||t<s||i<t)throw new RangeError("number outside of range")},n.pe=function(...s){for(let t of s);},n.me=function(t){if(!n.ae(t))throw new TypeError("expected finite number")},n.ge=function(t){n.fe(t)},n.ye=function(...s){for(let t of s);},n.Me=function(t){return"string"==typeof t},n.we=function(t){if(!n.Me(t))throw new TypeError("expected string")},n.Se=function(t){n.fe(t)},n.Te=function(...s){for(let t of s);},n.ve=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},n.xe=function(t){if(!n.ve(t))throw new TypeError("expected simple object")},n.Ie=function(t){if(!n.fe(t)&&!n.ve(t))throw new TypeError("expected simple object")},n.Ce=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},n.Ge=function(t){if(!n.Ce(t))throw new TypeError("expected object")},n.Ne=function(t){n.fe(t)},n.Ee=function(...s){for(let t of s);},n.De=function(t){return n._e(t,Blob)&&"string"==typeof t.name},n.Ae=function(t){if(!n.De(t))throw new TypeError("expected file")},n.Le=function(t){n.fe(t)},n.Oe=function(t){return Array.isArray(t)},n.Re=function(t){if(!n.Oe(t))throw new TypeError("expected array")},n.Pe=function(t){n.fe(t)},n.ke=function(...s){for(let t of s);},n.Fe=function(t){return!(!n.Oe(t)||t.length&&!n.Oe(t[0]))},n.je=function(s){if(!n.Fe(s))throw new TypeError("expected 2d array");for(let t of s)if(!n.Oe(t))throw new TypeError("expected 2d array")},n.Be=function(t){n.fe(t)},n.Ue=function(t){return"function"==typeof t},n.We=function(t,s){if(!n.Ue(t))throw new TypeError("expected function");if(!n.fe(s)&&t!==s)throw new TypeError("expected same function reference")},n.Qe=function(t){n.fe(t)},n.Je=function(...s){for(let t of s);},n.Ye=function(s,...i){if(!n.Ue(s))throw new TypeError("expected function");if(!i.length)throw new Error("missing comparison functions");for(let t of i)if(!n.fe(t)&&s===t)return;throw new TypeError("expected same function reference")},n.Ve=function(...s){if(!n.fe(s))for(let t of s);},n.He=function(t,s){return t instanceof s},n.qe=function(s,...i){for(let t of i)if(n.He(s,t))return!0;return!1},n.Ze=function(t,s){if(!n.He(t,s))throw new TypeError("unexpected type")},n.Xe=function(t,s){n.fe(t)},n.Ke=function(t,...s){for(let t of s);},n.$e=function(t,...s){if(!n.qe(t,...s))throw new TypeError("unexpected type")},n.tn=function(t,...s){if(!n.fe(t)&&!n.qe(t,...s))throw new TypeError("unexpected type")},n.sn=function(s,i){for(let t of s)if(!n.He(t,i))return!1;return!0},n.en=function(s){for(let t of s)if(!n.ae(t))return!1;return!0},n.nn=function(s,t){for(let t of s);},n.rn=function(s,t){if(!n.fe(s))for(let t of s);},n.hn=function(s,t){if(!n.fe(s))for(let t of s);},n.an=function(s){for(let t of s);},n.un=function(s){if(!n.fe(s))for(let t of s);},n.ln=function(t,s){return!(n.fe(t)||!n.Me(t.nodeName))&&(!s||n.cn(t.nodeName,s))},n.fn=function(t,s){if(n.fe(t)||!n.Me(t.nodeName))throw new TypeError("expected DOM node");if(s&&!n.cn(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},n.dn=function(t,s){n.fe(t)},n.pn=function(t,s){return!(n.fe(t)||!n.Me(t.tagName))&&(!s||n.cn(t.tagName,s))},n.mn=function(t,s){if(n.fe(t)||!n.Me(t.tagName))throw new TypeError("expected HTML element");if(s&&!n.cn(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},n.gn=function(t,s){n.fe(t)},n.yn=function(t){return n.pn(t,"img")||n.pn(t,"canvas")||n.pn(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},n.Mn=function(t){if(!n.yn(t))throw new TypeError("expected drawable")},n.wn=function(t){n.fe(t)},n.Sn=function(t){return t instanceof ImageData||n.yn(t)},n.Tn=function(t){if(!n.Sn(t))throw new TypeError("expected drawable or image data")},n.bn=function(t){if(!n.fe(t)&&!n.Sn(t))throw new TypeError("expected drawable or image data")},n.vn=function(t){return"string"==typeof t||n.HtmlString&&t instanceof n.HtmlString||t instanceof n.xn},n.In=function(t){if(!n.vn(t))throw new TypeError("expected string-like")},n.Cn=function(t){n.fe(t)},n.Gn=function(...s){for(let t of s);},n.Nn=function(){throw new Error("must be overridden")},n.En=function(){throw new Error("not yet implemented")},n.Dn=function(t,...s){let i=t;if(void 0===i)return!1;for(let t of s){if(void 0===i[t])return!1;i=i[t]}return!0},n.fe=function(t){return null==t},n._n=function(s){let i=s[0].constructor;for(let t of s)if(t.constructor!==i)return!1;return i},n.An=function(s,i){for(let t of s)if(!(t instanceof i))return!1;return!0},Object.getPrototypeOf(Uint8Array));n.Ln=function(t){return n.He(t,yt)},n.On=function(t){},n.Rn=function(t){n.Pn(t,yt)},n.kn=function(t,...s){if(!n.Fn(t,...s))throw new TypeError("unexpected type")},n.Fn=function(t,...s){for(const i of s)if(n._e(t,i))return!0;return!1},n.Pn=function(t,s){if(!n._e(t,s))throw new TypeError("unexpected type")},n._e=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},gt.ue=n.ue,gt.le=n.le,gt.me=n.me,gt.ge=n.ge,gt.we=n.we,gt.Se=n.Se,gt.Ge=n.Ge,gt.Ne=n.Ne,gt.Re=n.Re,gt.Pe=n.Pe,gt.We=n.We,gt.Qe=n.Qe,gt.Ze=n.Ze,gt.Xe=n.Xe,gt.fe=n.fe}{let e=function(t,s){let i=p.getType(t),e=p.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},n=function(t){console.warn("[Defence] "+t+" @",p.he())},i=function(){if(f=-1,0<a.size||0<u.size){let t=new Set([...a.keys()].map(t=>p.jn(t))),s=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+s),a.clear(),u.clear()}},r=function(s){let i=new Set;for(let t in s)i.add(t);return i},h=function(t,s){let i=r(s),e=d.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);p.zn(s,[...i]),s.length&&console.warn(`[Defence] '${p.jn(t)}' constructor creates inconsistent properties: `+s.join(", "))}else d.set(t,i)};e,n,i,r,h;const p=self.Ls,Mt=new Map;p.Bn=function(t,s){console.log("%c"+t,"font-weight: bold; color:"+s)},p.Un=function(t,...s){Mt.has(t)||Mt.set(t,-1),-1===Mt.get(t)&&Mt.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...s),Mt.set(t,-1)}))};let o,a=(p.Wn=function(t){performance.mark(t),(o=o||new Map).has(t)||o.set(t,{current:0,total:0,Qn:0,Jn:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.Qn.toPrecision(3)} :: calls => `+this.Jn}})},p.Yn=function(t){performance.measure("measure-"+t,t);const s=performance.getEntriesByName("measure-"+t)[0],i=o.get(t);i.current=s.duration,i.total+=i.current,i.Qn=i.total/i.Jn,console.log(i.toString()),i.Jn++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},p.he=function(){return(new Error).stack},p.Vn=function(){},p.cast=function(t,s){return t&&t instanceof s?t:null},p.jn=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":p.oe(t)?"<number>":p.Me(t)?"<string>":p.Oe(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":p.Ue(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},p.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},p.range=function*(s,i){if(!isFinite(Math.abs(s-i)))throw new Error("Invalid parameters");if(i<s)for(let t=s-1;t>=i;t--)yield t;else for(let t=s;t<i;t++)yield t},new Map),u=new Map,l=new WeakMap,c=new WeakMap;p.Hn={};const wt=new Set(["then","splice"]);p.Hn.get=function(t,s){return s in t||"symbol"==typeof s||wt.has(s)||n(`Accessed missing property '${s}' from defended object '${p.jn(t)}', returning undefined`),c.has(t)&&"symbol"!=typeof s&&!wt.has(s)&&n(`Accessed property '${s}' on a released object '${p.jn(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]},p.Hn.set=function(t,s,i){return s in t||a.has(t)||n(`Set non-existent property '${s}' to '${i}' on defended object '${p.jn(t)}'`),e(t[s],i)||a.has(t)||n(`Set '${p.getType(t[s])}' property '${s}' to type '${p.getType(i)}' on defended object '${p.jn(t)}'`),c.has(t)&&n(`Set property '${s}' on a released object '${p.jn(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]=i,!0},p.Hn.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${p.jn(t)}'`)},p.Hn.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${p.jn(t)}'`)},p.Hn.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${p.jn(t)}'`)};let f=-1,d=(p.qn=class{constructor(){if(p.Us&&p.Ri.Ji){let t=Object.create(new.target.prototype),s=new Proxy(t,p.Hn);return a.set(t,s),u.set(s,t),l.set(s,t),-1===f&&(f=requestAnimationFrame(i)),s}}},p.Zn=function(s){if(p.Us&&p.Ri.Ji&&s instanceof p.qn){if(u.has(s)){let t=u.get(s);u.delete(s),a.delete(t)}return s}return p.isDebug?Object.seal(s):s},p.Xn=function(t,...s){let i;try{i=new t(...s)}catch(t){throw u.clear(),a.clear(),t}return p.Us&&h(t,i),p.Zn(i)},p.Kn=function(t){let s=l.get(t);s&&c.set(s,p.he())},p.$n=function(t){let s=l.get(t);return!!s&&!!c.get(s)},new Map);p.ir=class{constructor(t){this.er="",t&&this.start(t)}start(t){p.ii&&(this.er=t,performance.mark(this.er+"-Start"))}end(){p.ii&&(performance.mark(this.er+"-End"),performance.measure(this.er,this.er+"-Start",this.er+"-End"))}next(t){p.ii&&(this.end(),this.er=t,performance.mark(this.er+"-Start"))}}}{let i=function(t){return 0===t&&1/t<0};i;const y=self.Ls,St=2*Math.PI,Tt=Math.PI/180,bt=180/Math.PI,vt=(y.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0==e)return i;if(t<s){const n=i-(s-t)%e;return n===i?0:n}return s+(t-s)%e},y.nr=function(t,s,i,e,n){const r=i-s;if(0==r&&0===e)return t;const h=n-e;return(t-s)*h/r+e},y.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},y.rr=function(t,s,i){return t<s?s:i<t?i:t},y.hr=function(t){return(t%=St)<0&&(t+=St),t},y.ur=function(t){return t*Tt},y.lr=function(t){return t*bt},y.cr=function(t,s,i,e){return Math.hypot(i-t,e-s)},y.dr=function(t,s,i,e){const n=i-t,r=e-s;return n*n+r*r},y.pr=function(t,s,i,e){return Math.atan2(e-s,i-t)},y.mr=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),n=Math.sin(s),r=Math.cos(s),h=i*n+e*r;return 1<=h?0:h<=-1?Math.PI:Math.acos(h)},y.gr=function(t,s,i){let e=Math.sin(t),n=Math.cos(t),r=Math.sin(s),h=Math.cos(s);return Math.acos(e*r+n*h)>i?0<n*r-e*h?y.hr(t+i):y.hr(t-i):y.hr(s)},y.yr=function(t,s){let i=Math.sin(t),e=Math.cos(t),n=Math.sin(s),r=Math.cos(s);return e*n-i*r<=0},y.Mr=function(t,s,i,e=0){let n=y.mr(t,s),r=St*e;return y.yr(s,t)?y.hr(t+(n+r)*i):y.hr(t-(n+r)*i)},y.wr=function(t,s,i,e=0){const n=y.mr(t,s),r=St*e;return y.yr(s,t)?y.hr(t+(n+r)*i):y.hr(t+(St-n+r)*i)},y.Sr=function(t,s,i,e=0){const n=y.mr(t,s),r=St*e;return y.yr(s,t)?y.hr(t-(-St+n-r)*i):y.hr(t-(n+r)*i)},y.Tr=function(t,s){const i=y.mr(t,s);return y.yr(t,s)?y.hr(s-i):y.hr(s+i)},y.Lt=function(t,s,i){return t+i*(s-t)},y.br=function(t,s,i){return t===s?0:(i-t)/(s-t)},y.vr=function(t,s,i,e,n){return y.Lt(e,n,y.br(t,s,i))},y.Ir=function(t,s,i,e){return y.Lt(y.Lt(t,s,e),y.Lt(s,i,e),e)},y.Cr=function(t,s,i,e,n){return y.Lt(y.Ir(t,s,i,n),y.Ir(s,i,e,n),n)},y.Gr=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},y.Nr=function(t){return 0<t&&0==(t-1&t)},y.Er=function(s){--s;for(let t=1;t<32;t<<=1)s|=s>>t;return s+1},y.Dr=function(t,s){return Math.round(t*s)/s},y._r=function(t,s){return Math.floor(t*s)/s},y.Ar=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},y.Lr=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},y.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;0<=e&&"0"===i.charAt(e);--e);return 0<=e&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},y.Or=function(t,s,i){return y.rr(t,0,255)|y.rr(s,0,255)<<8|y.rr(i,0,255)<<16},1024),xt=16384,It=8191,Ct=(y.Rr=function(t,s,i,e){return t=y.rr(Math.floor(1024*t),-8192,It),s=y.rr(Math.floor(1024*s),-8192,It),i=y.rr(Math.floor(1024*i),-8192,It),e=y.rr(Math.floor(1023*e),0,1023),t<0&&(t+=xt),s<0&&(s+=xt),i<0&&(i+=xt),-(t*xt*xt*vt+s*xt*vt+i*vt+e)},y.Pr=function(t,s,i){return y.Rr(t,s,i,1)},y.kr=function(s){if(0<=s)return(255&s)/255;{let t=Math.floor(-s/(xt*xt*vt));return t>It&&(t-=xt),t/1024}},y.Fr=function(s){if(0<=s)return((65280&s)>>8)/255;{let t=Math.floor(-s%(xt*xt*vt)/(xt*vt));return t>It&&(t-=xt),t/1024}},y.jr=function(s){if(0<=s)return((16711680&s)>>16)/255;{let t=Math.floor(-s%(xt*vt)/vt);return t>It&&(t-=xt),t/1024}},y.zr=function(t){if(i(t))return 0;if(0<=t)return 1;{const s=Math.floor(-t%vt);return s/1023}},y.Br=function(s,i){for(s=Math.floor(s),i=Math.floor(i);0!==i;){let t=i;i=s%i,s=t}return s},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]);y.Ur=function(i,e){if((i=Math.floor(i))===(e=Math.floor(e)))return[1,1];for(let s of Ct){let t=i/s[0]*s[1];if(Math.abs(e-t)<1)return s.slice(0);if(t=i/s[1]*s[0],Math.abs(e-t)<1)return[s[1],s[0]]}let t=y.Br(i,e);return[i/t,e/t]},y.Wr=function(t,s,i,e,n,r,h,o){const a=Math.min(t,i),u=Math.max(t,i),l=Math.min(n,h),c=Math.max(n,h);if(u<l||c<a)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||m<f)return!1;const g=n-t+h-i,y=r-s+o-e,M=i-t,w=e-s,S=h-n,T=o-r,b=Math.abs(w*S-T*M),v=S*y-T*g;if(Math.abs(v)>b)return!1;const x=M*y-w*g;return Math.abs(x)<=b},y.Qr=function(t,s,i,e,n,r,h,o,a,u,l,c){const f=Math.min(a,l),d=Math.max(a,l);if(r<f||d<n)return!1;const p=Math.min(u,c),m=Math.max(u,c);if(o<p||m<h)return!1;const g=a-t+l-i,y=u-s+c-e,M=i-t,w=e-s,S=l-a,T=c-u,b=Math.abs(w*S-T*M),v=S*y-T*g;if(Math.abs(v)>b)return!1;const x=M*y-w*g;return Math.abs(x)<=b},y.Jr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),u=n.Yr(),l=n.Vr(),c=n.Hr(),f=n.qr(),d=n.Zr(),p=n.Xr(),m=n.Kr(),g=n.$r();return y.Qr(t,s,i,e,r,h,o,a,u,l,c,f)||y.Qr(t,s,i,e,r,h,o,a,c,f,d,p)||y.Qr(t,s,i,e,r,h,o,a,d,p,m,g)||y.Qr(t,s,i,e,r,h,o,a,m,g,u,l)},y.th=function(s,i,e,n,r){let h=Math.min(s,e),o=Math.max(s,e),a=Math.min(i,n),u=Math.max(i,n),l=0;for(let t=r.length-4;l<=t;l+=2)if(y.Qr(s,i,e,n,h,o,a,u,r[l],r[l+1],r[l+2],r[l+3]))return!0;return y.Qr(s,i,e,n,h,o,a,u,r[l],r[l+1],r[0],r[1])};y.ih=function(t,s,i,e,n,r,h,o){const a=i-t,u=e-s,l=h-n,c=o-r,f=a*c-u*l;if(0==f)return 2;const d=((s-e)*(h-t)+a*(o-s))/f;return 0<d&&d<1+1e-6?(c*(h-t)+(n-h)*(o-s))/f:2},y.eh=function(t,s,i,e,n,r,h,o,a){const u=(h-n)*a,l=(o-r)*a;return y.ih(t,s,i,e,n-u,r-l,h+u,o+l)},y.nh=function(t,s,i,e,n,r,h,o){const a=n-i,u=r-e,l=h-i,c=o-e,f=t-i,d=s-e,p=a*a+u*u,m=a*l+u*c,g=a*f+u*d,y=l*l+c*c,M=l*f+c*d,w=1/(p*y-m*m),S=(y*g-m*M)*w,T=(p*M-m*g)*w;return 0<=S&&0<=T&&S+T<=1},y.rh=function(t,s,i,e,n,r,h,o){const a=n-i,u=r-e,l=h-i,c=o-e,f=t-i,d=s-e,p=a*a+u*u,m=a*l+u*c,g=l*l+c*c,y=f*a+d*u,M=f*l+d*c,w=p*g-m*m,S=(g*y-m*M)/w,T=(p*M-m*y)/w,b=1-S-T;return[b,S,T]},y.hh=function(t,s,i,e,n,r,h,o,a,u,l,c){return[t*e+s*h+i*u,t*n+s*o+i*l,t*r+s*a+i*c]}}{let u=self.Ls,s=null,i="";if("undefined"!=typeof document){const Gt=(s=document).querySelector("base");(i=Gt&&Gt.hasAttribute("href")?Gt.getAttribute("href"):"")&&!(i=i.startsWith("/")?i.substr(1):i).endsWith("/")&&(i+="/")}u.oh=function(){return i},u.ah=function(){if(!s)return"";const t=s.location;return u.uh(t.origin+t.pathname)+i},u.uh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},u.lh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},u.fh=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},u.dh=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},u.ph=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},u.mh=function(t){return t.replace(/\\/g,"/")},u.gh=function(t,s){const i=t?u.fh(t).slice(1):"";return s===i},u.yh=function(t,s){let i,e;return u.De(t)&&(i=u.ph(t.name)),u.Me(t)&&(i=u.ph(t)),u.De(s)&&(e=u.ph(s.name)),u.Me(s)&&(e=u.ph(s)),i===e},u.Mh=function(t){t=u.mh(t);let s=/^\w\:\//.exec(t),i=(s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),e="",n=t,r,h="";0<i&&(e=t.slice(0,i),n=t.slice(i));const o=(r=n).lastIndexOf("."),a=(0<o&&(h=n.slice(o),r=n.slice(0,-h.length)),s+e+n);return{dir:e,wh:n,name:r,root:s,ext:h,Sh:a}},u.Th=function(i,e){return new Promise((t,s)=>{self.setTimeout(t,i,e)})},u.bh=function(t){try{t()}catch(t){u.isDebug&&console.warn("Swallowed exception: ",t)}},u.xh=function(){},u.cn=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},u.Ih=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},u.Ch=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},u.Gh=function(t,s){t.length=s},u.Nh=function(t){t&&0!==t.length&&u.Gh(t,0)},u.Eh=function(i){if(i){for(let s=0;s<i.length;s++){let t=i[s];u.Gh(t,0)}u.Gh(i,0)}},u.Dh=function(s,i,e){const n=s.length;if(!((i|=0)<=n))for(let t=n;t<i;++t)s.push(e)},u._h=function(t,s,i){const e=t.length;(s|=0)<e?u.Gh(t,s):e<s&&u.Dh(t,s,i)},u.Ah=function(t,s){u.Nh(t),u.zn(t,s)},u.zn=function(i,e){if(e.length<1e4)i.push(...e);else for(let t=0,s=e.length;t<s;++t)i.push(e[t])},u.Lh=function(i,e){if(!((e=Math.floor(e))<0||e>=i.length)){let s=i.length-1;for(let t=e;t<s;++t)i[t]=i[t+1];u.Gh(i,s)}},u.Oh=function(t,s){let i=t.indexOf(s);0<=i&&t.splice(i,1)},u.Rh=function(s,i){let e=s.length;if(i.length!==e)return!1;for(let t=0;t<e;++t)if(s[t]!==i[t])return!1;return!0},u.Ph=function(i,e){let n=[],r=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e(t)?n.push(t):(i[r]=t,++r)}return u.Gh(i,r),n},u.kh=function(i,e){let t=i.length,n=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e.has(t)||(i[n++]=t)}return u.Gh(i,n),t-n},u.Fh=function(t,s){return t===Math.floor(t)&&0<=t&&t<s.length},u.jh=function(t,s){if(!u.Fh(t,s))throw new RangeError("array index out of bounds")},u.zh=function(t){return t.slice()},u.Bh=function(t,i){let e=[];for(let s of t)if(u.Ce(s)){let t=i(s);if(!t)throw new Error("missing clone");if(t.constructor!==s.constructor)throw new Error("object is not a clone");e.push(t)}else u.Oe(s)?e.push(u.Bh(s,i)):e.push(s);return e},u.Uh=function(s){let i=[];for(let t of s)i.push(t.slice());return i},u.Wh=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},u.Qh=function(t,s,i){const e=new Set;for(const n of t.values())s(n)&&(i?e.add(i(n)):e.add(n));return e},u.Jh=function(t,s){return t.union?t.union(s):new Set([...t,...s])},u.Yh=function(t,s){for(const i of s)t.add(i);return t},u.first=function(s){for(let t of s)return t;return null},u.xor=function(t,s){return!t!=!s},u.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}},u.Vh=function(s){for(let t in s)if(s.hasOwnProperty(t))return!0;return!1},u.Hh=function(o,a){return o.length?new Promise((i,e)=>{let n=[],r=0,h=!1;for(let s=0,t=o.length;s<t;++s)n.push(void 0),o[s].then(t=>{h||(n[s]=t,++r===o.length?i(n):a(r,o.length))}).catch(t=>{h=!0,e(t)})}):Promise.resolve([])};let e=[],n=(u.qh=function(t){e.push(t)},u.Zh=function(){let i=0;for(let s of e){let t=s();i+=t}return Math.floor(i)},1),r=new Map,h=new MessageChannel,o=(h.port2.onmessage=function(t){const s=t.data,i=r.get(s);r.delete(s),i&&i(performance.now())},u.Xh=function(t){const s=n++;return r.set(s,t),h.port1.postMessage(s),s},u.Kh=function(t){r.delete(t)},u.$h=u.Xh,u.io=function(){return new Promise(t=>u.$h(t))},new Set);u.eo=function(s){const i=self.requestAnimationFrame(async t=>{await u.io(),o.has(i)&&(o.delete(i),s(t))});return o.add(i),i},u.no=function(t){o.has(t)&&(self.cancelAnimationFrame(t),o.delete(t))}}{const r=self.Ls;r.ro=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},r.ho=function(t){return!r.ro(t)},r.ao=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},r.uo=function(t,s){return fetch(t,s).then(t=>(r.ao(t),t))},r.lo=function(t){return r.uo(t).then(t=>t.text())},r.co=function(t){return r.uo(t).then(t=>t.json())},r.fo=function(t){return r.uo(t).then(t=>t.blob())},r.do=function(t){return r.uo(t).then(t=>t.arrayBuffer())},r.po=function(e){return new Promise((t,s)=>{const i=new Image;i.onload=()=>t(i),i.onerror=t=>s(t),i.src=e})},r.mo=function(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsArrayBuffer(e)})},r.yo=function(e){return"function"==typeof e.text?e.text():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsText(e)})},r.Mo=function(t){return r.yo(t).then(t=>JSON.parse(t))},r.wo=async function(t,s){let i=URL.createObjectURL(t);try{const e=await r.po(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof e.decode&&await e.decode(),e}finally{i&&URL.revokeObjectURL(i)}},r.So=function(t,s){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,s);{const i=document.createElement("canvas");return i.width=t,i.height=s,i}},r.To=function(s,i,e){if("number"!=typeof e&&(e=1),i=i||"image/png",e=r.rr(e,0,1),s.convertToBlob)return s.convertToBlob({type:i,quality:e});if(s.toBlob)return new Promise(t=>s.toBlob(t,i,e));throw new Error("could not convert canvas to blob")},r.bo=function(t,s,i){const e=r.So(t.width,t.height),n=e.getContext("2d");return n.drawImage(t,0,0),r.To(e,s,i)},r.vo=function(t,s,i){if(r.Ri.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>r.bo(t,s,i));if(r.Ri.ImageBitmap)return createImageBitmap(t).then(t=>r.bo(t,s,i));{const e=r.So(t.width,t.height),n=e.getContext("2d");return n.putImageData(t,0,0),r.To(e,s,i)}},r.xo=function(t,s){t.clear();for(const i of s)t.add(i)},r.Io=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},r.Co=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},r.Go=function s(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>s(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],s(t[1])])};{const i=Object.create(null);for(const[e,n]of Object.entries(t))i[e]=s(n);return i}},r.No=function s(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>s(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],s(t[1])]));{const i=Object.create(null);for(const[e,n]of Object.entries(t))i[e]=s(n);return i}}return t},r.Eo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const n of t)"-"===n?0<e&&(i=!0):i?(s+=n.toUpperCase(),i=!1):s+=n,++e;return s},r.Do=function(t){return"object"==typeof t&&"function"==typeof t.next},r._o=function(s,i){const e=[];if("function"==typeof i)for(let t=0;t<s;++t)e.push(i());else for(let t=0;t<s;++t)e.push(i);return e}}{let e=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},u=function(t,s,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};e,u;const l=self.Ls,Nt=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,Et=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;l.Ao=class{constructor(t,s,i,e){this.Lo=NaN,this.Oo=NaN,this.Ro=NaN,this.Po=NaN,this.Lo=0,this.Oo=0,this.Ro=0,this.Po=0,t instanceof l.Ao?this.set(t):this.ko(t||0,s||0,i||0,e||0)}Fo(t,s,i){return this.Lo=+t,this.Oo=+s,this.Ro=+i,this.rr(),this}ko(t,s,i,e){return this.Lo=+t,this.Oo=+s,this.Ro=+i,this.Po=+e,this.rr(),this}set(t){return this.Lo=t.Lo,this.Oo=t.Oo,this.Ro=t.Ro,this.Po=t.Po,this}I(t){return this.set(t)}add(t){this.Lo+=t.Lo,this.Oo+=t.Oo,this.Ro+=t.Ro,this.Po+=t.Po,this.rr()}jo(t,s,i,e=0){this.Lo+=+t,this.Oo+=+s,this.Ro+=+i,this.Po+=+e,this.rr()}zo(t){this.Bo(Math.max(this.Lo,t.Lo)-Math.min(this.Lo,t.Lo)),this.Uo(Math.max(this.Oo,t.Oo)-Math.min(this.Oo,t.Oo)),this.Wo(Math.max(this.Ro,t.Ro)-Math.min(this.Ro,t.Ro)),this.Qo(Math.max(this.Po,t.Po)-Math.min(this.Po,t.Po)),this.rr()}Jo(t){this.Lo=t.Lo,this.Oo=t.Oo,this.Ro=t.Ro}Bo(t){this.Lo=l.rr(+t,0,1)}Yo(){return this.Lo}Uo(t){this.Oo=l.rr(+t,0,1)}Vo(){return this.Oo}Wo(t){this.Ro=l.rr(+t,0,1)}Ho(){return this.Ro}Qo(t){this.Po=l.rr(+t,0,1)}qo(){return this.Po}clone(){return l.Xn(l.Ao,this.Lo,this.Oo,this.Ro,this.Po)}toArray(){return[this.Lo,this.Oo,this.Ro,this.Po]}Zo(){return new Float64Array(this.toArray())}Xo(t,s){t[s++]=this.Lo,t[s++]=this.Oo,t[s++]=this.Ro,t[s]=this.Po}Ko(t,s){t[s++]=this.Lo,t[s++]=this.Oo,t[s]=this.Ro}equals(t){return this.Lo===t.Lo&&this.Oo===t.Oo&&this.Ro===t.Ro&&this.Po===t.Po}$o(t){return this.Lo===t.Lo&&this.Oo===t.Oo&&this.Ro===t.Ro}ta(t,s,i){return this.Lo===t&&this.Oo===s&&this.Ro===i}ea(t,s,i,e){return this.Lo===t&&this.Oo===s&&this.Ro===i&&this.Po===e}na(t,s){return t[s]===Math.fround(this.Lo)&&t[s+1]===Math.fround(this.Oo)&&t[s+2]===Math.fround(this.Ro)&&t[s+3]===Math.fround(this.Po)}ra(t,s){return t[s]===Math.fround(this.Lo)&&t[s+1]===Math.fround(this.Oo)&&t[s+2]===Math.fround(this.Ro)}multiply(t){this.Lo*=t.Lo,this.Oo*=t.Oo,this.Ro*=t.Ro,this.Po*=t.Po}ha(t){this.Lo*=t,this.Oo*=t,this.Ro*=t,this.Po*=t}oa(){return this.Lo*=this.Po,this.Oo*=this.Po,this.Ro*=this.Po,this}aa(){return this.Lo/=this.Po,this.Oo/=this.Po,this.Ro/=this.Po,this}rr(){return this.Lo=l.rr(this.Lo,0,1),this.Oo=l.rr(this.Oo,0,1),this.Ro=l.rr(this.Ro,0,1),this.Po=l.rr(this.Po,0,1),this}ua(t){this.Lo=l.kr(t),this.Oo=l.Fr(t),this.Ro=l.jr(t),this.Po=l.zr(t)}la(t,s,i){const e=l.ae(t)?t:this.Yo(),n=l.ae(s)?s:this.Vo(),r=l.ae(i)?i:this.Ho();return`rgb(${100*e}%, ${100*n}%, ${100*r}%)`}ca(t,s,i,e){const n=l.ae(t)?t:this.Yo(),r=l.ae(s)?s:this.Vo(),h=l.ae(i)?i:this.Ho(),o=l.ae(e)?e:this.qo();return`rgba(${100*n}%, ${100*r}%, ${100*h}%, ${o})`}fa(){const t=Math.round(255*this.Yo()),s=Math.round(255*this.Vo()),i=Math.round(255*this.Ho());return"#"+e(t.toString(16))+e(s.toString(16))+e(i.toString(16))}da(t){if("string"!=typeof t)return!1;let s,i,e;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Bo(s),isFinite(i)&&this.Uo(i),isFinite(e)&&this.Wo(e),this.Qo(1),!0}pa(){const t=Math.round(255*this.Yo()),s=Math.round(255*this.Vo()),i=Math.round(255*this.Ho());return t+`, ${s}, `+i}ma(){const t=Math.round(255*this.Yo()),s=Math.round(255*this.Vo()),i=Math.round(255*this.Ho());return[t,s,i]}ga(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Bo(i),isFinite(e)&&this.Uo(e),isFinite(n)&&this.Wo(n),this.Qo(1),!0}ya(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Bo(i),isFinite(e)&&this.Uo(e),isFinite(n)&&this.Wo(n),this.Qo(1),!0}Ma(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.Bo(i),isFinite(e)&&this.Uo(e),isFinite(n)&&this.Wo(n),isFinite(r)&&this.Qo(r),!0}wa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.Bo(i),isFinite(e)&&this.Uo(e),isFinite(n)&&this.Wo(n),isFinite(r)&&this.Qo(r),!0}Sa(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.ya(t):this.ga(t);if(t.startsWith("rgba("))return t.includes("%")?this.wa(t):this.Ma(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.Ta(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.ya(t):4===s.length&&this.wa(t):3===s.length?this.ga(t):4===s.length&&this.Ma(t)}}return this.da(t)}toJSON(){return[this.Lo,this.Oo,this.Ro,this.Po]}ba(t,s,i,e){let n,r,h;if(t%=360,s=l.rr(s,0,100),i=l.rr(i,0,100),e=l.rr(e,0,1),t/=360,i/=100,0==(s/=100))n=r=h=i;else{const o=i<.5?i*(1+s):i+s-i*s,a=2*i-o;n=u(a,o,t+1/3),r=u(a,o,t),h=u(a,o,t-1/3)}return this.Bo(n),this.Uo(r),this.Wo(h),this.Qo(e),this}Ta(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=Nt.exec(s),e=Et.exec(s);return i&&4===i.length?(this.ba(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.ba(+i[1],+i[2],+i[3],+i[4]),0))}va(){const t=this.Lo,s=this.Oo,i=this.Ro,e=this.Po,n=l.Ao.xa(t,s,i),r=l.Ao.Ia(t,s,i),h=l.Ao.Ca(t,s,i);return`hsla(${n}, ${r}%, ${h}%, ${e})`}Ga(){const t=this.Lo,s=this.Oo,i=this.Ro;return[l.Ao.xa(t,s,i),l.Ao.Ia(t,s,i),l.Ao.Ca(t,s,i),this.Po]}Na(t){!Array.isArray(t)||t.length<3||(this.Lo=t[0],this.Oo=t[1],this.Ro=t[2],this.Po=4<=t.length?t[3]:1)}set r(t){this.Bo(t)}get r(){return this.Yo()}set Ea(t){this.Uo(t)}get Ea(){return this.Vo()}set b(t){this.Wo(t)}get b(){return this.Ho()}set a(t){this.Qo(t)}get a(){return this.qo()}Da(t,s){switch(t){case 0:this.Bo(s);break;case 1:this.Uo(s);break;case 2:this.Wo(s);break;case 3:this.Qo(s);break;default:throw new RangeError("invalid color index")}}_a(t){switch(t){case 0:return this.Yo();case 1:return this.Vo();case 2:return this.Ho();case 3:return this.qo();default:throw new RangeError("invalid color index")}}static Aa(t,s){let i,e;if(Array.isArray(t))(i=new l.Ao).Na(t);else{if(!(t instanceof l.Ao))throw new Error("unexpected type");i=t}if(Array.isArray(s))(e=new l.Ao).Na(s);else{if(!(s instanceof l.Ao))throw new Error("unexpected type");e=s}return i.equals(e)}static La(t,s){return l.rr(Math.max(t,s)-Math.min(t,s),0,1)}static Oa(t,s){const i=new l.Ao;return i.Bo(Math.max(t.Lo,s.Lo)-Math.min(t.Lo,s.Lo)),i.Uo(Math.max(t.Oo,s.Oo)-Math.min(t.Oo,s.Oo)),i.Wo(Math.max(t.Ro,s.Ro)-Math.min(t.Ro,s.Ro)),i.Qo(Math.max(t.Po,s.Po)-Math.min(t.Po,s.Po)),i}static Ra(t,s){const i=new l.Ao(0,0,0,1);return i.Bo(Math.max(t.Lo,s.Lo)-Math.min(t.Lo,s.Lo)),i.Uo(Math.max(t.Oo,s.Oo)-Math.min(t.Oo,s.Oo)),i.Wo(Math.max(t.Ro,s.Ro)-Math.min(t.Ro,s.Ro)),i}static xa(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;let r=0;switch(e){case t:r=(s-i)/(e-n)+(s<i?6:0);break;case s:r=(i-t)/(e-n)+2;break;case i:r=(t-s)/(e-n)+4}return Math.round(r/6*360)}static Ia(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;const r=(e+n)/2,h=e-n,o=.5<r?h/(2-e-n):h/(e+n);return Math.round(100*o)}static Ca(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i),r=(e+n)/2;return e?Math.round(100*r):0}},l.Ao.Pa=Object.freeze(l.Xn(l.Ao,1,1,1,1)),l.Ao.ka=Object.freeze(l.Xn(l.Ao,0,0,0,1)),l.Ao.Fa=Object.freeze(l.Xn(l.Ao,0,0,0,0))}{const Dt=self.Ls;Dt.ja=class{constructor(t,s){this.za=0,this.Ba=0,t instanceof Dt.ja?this.I(t):this.set(t||0,s||0)}set(t,s){this.za=+t,this.Ba=+s}I(t){this.za=t.za,this.Ba=t.Ba}equals(t){return this.za===t.za&&this.Ba===t.Ba}Ua(t,s){return this.za===t&&this.Ba===s}na(t,s){return t[s]===Math.fround(this.za)&&t[s+1]===Math.fround(this.Ba)}Wa(t){this.za=+t}Qa(){return this.za}Ja(t){this.Ba=+t}Ya(){return this.Ba}toArray(){return[this.za,this.Ba]}Zo(){return new Float64Array(this.toArray())}Xo(t,s){t[s++]=this.za,t[s]=this.Ba}offset(t,s){this.za+=+t,this.Ba+=+s}scale(t,s){this.za*=t,this.Ba*=s}It(t,s){this.za/=t,this.Ba/=s}round(){this.za=Math.round(this.za),this.Ba=Math.round(this.Ba)}floor(){this.za=Math.floor(this.za),this.Ba=Math.floor(this.Ba)}ceil(){this.za=Math.ceil(this.za),this.Ba=Math.ceil(this.Ba)}angle(){return Dt.pr(0,0,this.za,this.Ba)}Va(){return this.za*this.za+this.Ba*this.Ba}length(){return Math.hypot(this.za,this.Ba)}Ha(t,s){const i=this.za*s-this.Ba*t;this.Ba=this.Ba*s+this.za*t,this.za=i}rotate(t){0!==t&&this.Ha(Math.sin(t),Math.cos(t))}qa(t,s,i){0===t||s===this.za&&i===this.Ba||(this.za-=s,this.Ba-=i,this.Ha(Math.sin(t),Math.cos(t)),this.za+=+s,this.Ba+=+i)}move(t,s){0!==s&&(this.za+=Math.cos(t)*s,this.Ba+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.za/=t,this.Ba/=t)}rr(t,s){this.za=Dt.rr(this.za,t,s),this.Ba=Dt.rr(this.Ba,t,s)}_t(t){return this.za*t.za+this.Ba*t.Ba}reverse(){this.za=-this.za,this.Ba=-this.Ba}Za(){let t=this.za;return this.za=this.Ba,this.Ba=-t,this}}}{const _t=self.Ls;_t.Rect=class{constructor(t,s,i,e){this.Xa=NaN,this.Ka=NaN,this.$a=NaN,this.tu=NaN,this.Xa=0,this.Ka=0,this.$a=0,this.tu=0,t instanceof _t.Rect?this.I(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.Xa=+t,this.Ka=+s,this.$a=+i,this.tu=+e}su(t,s,i,e){s=+s,this.Xa=t=+t,this.Ka=s,this.$a=t+ +i,this.tu=s+ +e}I(t){this.Xa=+t.Xa,this.Ka=+t.Ka,this.$a=+t.$a,this.tu=+t.tu}clone(){return new _t.Rect(this.Xa,this.Ka,this.$a,this.tu)}static iu(t,s){const i=new _t.Rect;return i.eu(Math.min(t.Xa,s.Xa)),i.nu(Math.min(t.Ka,s.Ka)),i.ru(Math.max(t.$a,s.$a)),i.hu(Math.max(t.tu,s.tu)),i}static ou(t){return new _t.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.Xa===t.Xa&&this.Ka===t.Ka&&this.$a===t.$a&&this.tu===t.tu}au(t,s,i,e){return this.Xa===t&&this.Ka===s&&this.width()===i&&this.height()===e}na(t,s){return t[s]===Math.fround(this.Xa)&&t[s+1]===Math.fround(this.Ka)&&t[s+2]===Math.fround(this.$a)&&t[s+3]===Math.fround(this.tu)}eu(t){this.Xa=+t}uu(){return this.Xa}nu(t){this.Ka=+t}lu(){return this.Ka}ru(t){this.$a=+t}cu(){return this.$a}hu(t){this.tu=+t}fu(){return this.tu}toArray(){return[this.Xa,this.Ka,this.$a,this.tu]}Zo(){return new Float64Array(this.toArray())}du(){return new DOMRect(this.Xa,this.Ka,this.width(),this.height())}static pu(t){return _t.Xn(_t.Rect,t.left,t.top,t.right,t.bottom)}Xo(t,s){t[s++]=this.Xa,t[s++]=this.Ka,t[s++]=this.$a,t[s]=this.tu}mu(t,s){t[s++]=this.Xa,t[s++]=this.Ka,t[s++]=this.$a,t[s++]=this.Ka,t[s++]=this.$a,t[s++]=this.tu,t[s++]=this.Xa,t[s]=this.tu}gu(t,s,i){t[s++]=this.Xa,t[s++]=this.Ka,t[s++]=i,t[s++]=this.$a,t[s++]=this.Ka,t[s++]=i,t[s++]=this.$a,t[s++]=this.tu,t[s++]=i,t[s++]=this.Xa,t[s++]=this.tu,t[s]=i}width(){return this.$a-this.Xa}height(){return this.tu-this.Ka}yu(){return(this.Xa+this.$a)/2}Mu(){return(this.Ka+this.tu)/2}offset(t,s){s=+s,this.Xa+=t=+t,this.Ka+=s,this.$a+=t,this.tu+=s}offsetLeft(t){this.Xa+=+t}offsetTop(t){this.Ka+=+t}wu(t){this.$a+=+t}Su(t){this.tu+=+t}Tu(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.Ka<this.tu?this.Xa<this.$a?this.tu=this.Ka+this.width():this.tu=this.Ka-this.width():this.Xa<this.$a?this.tu=this.Ka-this.width():this.tu=this.Ka+this.width()}bu(t,s){s=+s,this.Xa-=t=+t,this.Ka-=s,this.$a+=t,this.tu+=s}vu(t,s){s=+s,this.Xa+=t=+t,this.Ka+=s,this.$a-=t,this.tu-=s}multiply(t,s){this.Xa*=t,this.Ka*=s,this.$a*=t,this.tu*=s}It(t,s){this.Xa/=t,this.Ka/=s,this.$a/=t,this.tu/=s}xu(t){this.Xa=+t-this.Xa,this.$a=+t-this.$a}Iu(t){this.Ka=+t-this.Ka,this.tu=+t-this.tu}Cu(t,s){const i=this.width(),e=this.height(),n=this.uu()+i*t,r=this.lu()+e*s;this.su(n-e*s,r-i*t,e,i)}Gu(){const t=this.Xa;this.Xa=this.$a,this.$a=t}Nu(){const t=this.Ka;this.Ka=this.tu,this.tu=t}Eu(t){const s=this.Ka;this.Ka=+t-this.tu,this.tu=+t-s}round(){this.Xa=Math.round(this.Xa),this.Ka=Math.round(this.Ka),this.$a=Math.round(this.$a),this.tu=Math.round(this.tu)}Du(){this.Xa=Math.ceil(this.Xa),this.Ka=Math.ceil(this.Ka),this.$a=Math.floor(this.$a),this.tu=Math.floor(this.tu)}_u(){this.Xa=Math.floor(this.Xa),this.Ka=Math.floor(this.Ka),this.$a=Math.ceil(this.$a),this.tu=Math.ceil(this.tu)}floor(){this.Xa=Math.floor(this.Xa),this.Ka=Math.floor(this.Ka),this.$a=Math.floor(this.$a),this.tu=Math.floor(this.tu)}ceil(){this.Xa=Math.ceil(this.Xa),this.Ka=Math.ceil(this.Ka),this.$a=Math.ceil(this.$a),this.tu=Math.ceil(this.tu)}rr(t,s,i,e){this.Xa=Math.max(this.Xa,+t),this.Ka=Math.max(this.Ka,+s),this.$a=Math.min(this.$a,+i),this.tu=Math.min(this.tu,+e)}Au(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.Xa=_t.rr(this.Xa,t,i),this.Ka=_t.rr(this.Ka,s,e),this.$a=_t.rr(this.$a,t,i),this.tu=_t.rr(this.tu,s,e)}normalize(){this.Xa>this.$a&&this.Gu(),this.Ka>this.tu&&this.Nu()}Lu(t){return!(t.$a<this.Xa||t.tu<this.Ka||t.Xa>this.$a||t.Ka>this.tu)}Ou(t,s,i){return!(t.$a+s<this.Xa||t.tu+i<this.Ka||t.Xa+s>this.$a||t.Ka+i>this.tu)}Ru(t,s){return t>=this.Xa&&t<=this.$a&&s>=this.Ka&&s<=this.tu}Pu(t){return t.Xa>=this.Xa&&t.Ka>=this.Ka&&t.$a<=this.$a&&t.tu<=this.tu}ku(t){t.Xa<this.Xa&&(this.Xa=+t.Xa),t.Ka<this.Ka&&(this.Ka=+t.Ka),t.$a>this.$a&&(this.$a=+t.$a),t.tu>this.tu&&(this.tu=+t.tu)}Fu(t){this.Xa=_t.Lt(t.Xa,t.$a,this.Xa),this.Ka=_t.Lt(t.Ka,t.tu,this.Ka),this.$a=_t.Lt(t.Xa,t.$a,this.$a),this.tu=_t.Lt(t.Ka,t.tu,this.tu)}}}{const At=self.Ls;At.ju=class{constructor(t,s,i,e,n,r,h,o){this.zu=NaN,this.Bu=NaN,this.Uu=NaN,this.Wu=NaN,this.Qu=NaN,this.Ju=NaN,this.Yu=NaN,this.Vu=NaN,this.zu=0,this.Bu=0,this.Uu=0,this.Wu=0,this.Qu=0,this.Ju=0,this.Yu=0,this.Vu=0,t instanceof At.ju?this.I(t):this.set(t||0,s||0,i||0,e||0,n||0,r||0,h||0,o||0)}set(t,s,i,e,n,r,h,o){this.zu=+t,this.Bu=+s,this.Uu=+i,this.Wu=+e,this.Qu=+n,this.Ju=+r,this.Yu=+h,this.Vu=+o}Hu(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}I(t){this.zu=t.zu,this.Bu=t.Bu,this.Uu=t.Uu,this.Wu=t.Wu,this.Qu=t.Qu,this.Ju=t.Ju,this.Yu=t.Yu,this.Vu=t.Vu}equals(t){return this.zu===t.zu&&this.Bu===t.Bu&&this.Uu===t.Uu&&this.Wu===t.Wu&&this.Qu===t.Qu&&this.Ju===t.Ju&&this.Yu===t.Yu&&this.Vu===t.Vu}qu(t){this.zu=+t}Yr(){return this.zu}Zu(t){this.Bu=+t}Vr(){return this.Bu}Xu(t){this.Uu=+t}Hr(){return this.Uu}Ku(t){this.Wu=+t}qr(){return this.Wu}$u(t){this.Qu=+t}Zr(){return this.Qu}tl(t){this.Ju=+t}Xr(){return this.Ju}sl(t){this.Yu=+t}Kr(){return this.Yu}il(t){this.Vu=+t}$r(){return this.Vu}el(){return new DOMQuad(new DOMPoint(this.zu,this.Bu),new DOMPoint(this.Uu,this.Wu),new DOMPoint(this.Qu,this.Ju),new DOMPoint(this.Yu,this.Vu))}static nl(t){return At.Xn(At.ju,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.zu,this.Bu,this.Uu,this.Wu,this.Qu,this.Ju,this.Yu,this.Vu]}Zo(){return new Float64Array(this.toArray())}Xo(t,s){t[s++]=this.zu,t[s++]=this.Bu,t[s++]=this.Uu,t[s++]=this.Wu,t[s++]=this.Qu,t[s++]=this.Ju,t[s++]=this.Yu,t[s]=this.Vu}rl(t,s,i){t[s++]=this.zu,t[s++]=this.Bu,t[s++]=i,t[s++]=this.Uu,t[s++]=this.Wu,t[s++]=i,t[s++]=this.Qu,t[s++]=this.Ju,t[s++]=i,t[s++]=this.Yu,t[s++]=this.Vu,t[s]=i}offset(t,s){s=+s,this.zu+=t=+t,this.Bu+=s,this.Uu+=t,this.Wu+=s,this.Qu+=t,this.Ju+=s,this.Yu+=t,this.Vu+=s}round(){this.zu=Math.round(this.zu),this.Bu=Math.round(this.Bu),this.Uu=Math.round(this.Uu),this.Wu=Math.round(this.Wu),this.Qu=Math.round(this.Qu),this.Ju=Math.round(this.Ju),this.Yu=Math.round(this.Yu),this.Vu=Math.round(this.Vu)}floor(){this.zu=Math.floor(this.zu),this.Bu=Math.floor(this.Bu),this.Uu=Math.floor(this.Uu),this.Wu=Math.floor(this.Wu),this.Qu=Math.floor(this.Qu),this.Ju=Math.floor(this.Ju),this.Yu=Math.floor(this.Yu),this.Vu=Math.floor(this.Vu)}ceil(){this.zu=Math.ceil(this.zu),this.Bu=Math.ceil(this.Bu),this.Uu=Math.ceil(this.Uu),this.Wu=Math.ceil(this.Wu),this.Qu=Math.ceil(this.Qu),this.Ju=Math.ceil(this.Ju),this.Yu=Math.ceil(this.Yu),this.Vu=Math.ceil(this.Vu)}hl(t){this.zu=t.Xa,this.Bu=t.Ka,this.Uu=t.$a,this.Wu=t.Ka,this.Qu=t.$a,this.Ju=t.tu,this.Yu=t.Xa,this.Vu=t.tu}ol(t,s){0===s?this.hl(t):this.al(t,Math.sin(s),Math.cos(s))}al(t,s,i){const e=t.Xa*s,n=t.Ka*s,r=t.$a*s,h=t.tu*s,o=t.Xa*i,a=t.Ka*i,u=t.$a*i,l=t.tu*i;this.zu=o-n,this.Bu=a+e,this.Uu=u-n,this.Wu=a+r,this.Qu=u-h,this.Ju=l+r,this.Yu=o-h,this.Vu=l+e}ul(t){t.set(Math.min(this.zu,this.Uu,this.Qu,this.Yu),Math.min(this.Bu,this.Wu,this.Ju,this.Vu),Math.max(this.zu,this.Uu,this.Qu,this.Yu),Math.max(this.Bu,this.Wu,this.Ju,this.Vu))}Ru(t,s){let i=this.Uu-this.zu,e=this.Wu-this.Bu,n=this.Qu-this.zu,r=this.Ju-this.Bu,h=t-this.zu,o=s-this.Bu,a=i*i+e*e,u=i*n+e*r,l=i*h+e*o,c=n*n+r*r,f=n*h+r*o,d=1/(a*c-u*u),p=(c*l-u*f)*d,m=(a*f-u*l)*d;return 0<=p&&0<m&&p+m<1||(m=((a=(i=this.Yu-this.zu)*i+(e=this.Vu-this.Bu)*e)*f-(u=i*n+e*r)*(l=i*h+e*o))*(d=1/(a*c-u*u)),0<=(p=(c*l-u*f)*d)&&0<m&&p+m<1)}yu(){return(this.zu+this.Uu+this.Qu+this.Yu)/4}Mu(){return(this.Bu+this.Wu+this.Ju+this.Vu)/4}ll(t,s,i,e){return!(!this.Ru(t,s)&&!this.Ru(i,e))||At.Jr(t,s,i,e,this)}cl(t){let s=t.yu(),i=t.Mu();if(this.Ru(s,i))return!0;if(s=this.yu(),i=this.Mu(),t.Ru(s,i))return!0;const e=this.zu,n=this.Bu,r=this.Uu,h=this.Wu,o=this.Qu,a=this.Ju,u=this.Yu,l=this.Vu;return At.Jr(e,n,r,h,t)||At.Jr(r,h,o,a,t)||At.Jr(o,a,u,l,t)||At.Jr(u,l,e,n,t)}fl(){const t=this.zu,s=this.Bu;this.zu=this.Uu,this.Bu=this.Wu,this.Uu=this.Qu,this.Wu=this.Ju,this.Qu=this.Yu,this.Ju=this.Vu,this.Yu=t,this.Vu=s}dl(){this.pl(0,2),this.pl(1,3),this.pl(6,4),this.pl(7,5)}ml(){this.pl(0,6),this.pl(1,7),this.pl(2,4),this.pl(3,5)}gl(){this.pl(2,6),this.pl(3,7)}pl(t,s){const i=this.yl(t);this.Ml(t,this.yl(s)),this.Ml(s,i)}yl(t){switch(t){case 0:return this.zu;case 1:return this.Bu;case 2:return this.Uu;case 3:return this.Wu;case 4:return this.Qu;case 5:return this.Ju;case 6:return this.Yu;case 7:return this.Vu;default:throw new RangeError("invalid quad point index")}}Ml(t,s){switch(s=+s,t){case 0:this.zu=s;break;case 1:this.Bu=s;break;case 2:this.Uu=s;break;case 3:this.Wu=s;break;case 4:this.Qu=s;break;case 5:this.Ju=s;break;case 6:this.Yu=s;break;case 7:this.Vu=s;break;default:throw new RangeError("invalid quad point index")}}}}{const Lt=self.Ls,Ot=[0,0,1,0,1,1,0,1],Rt=Lt.Xn(Lt.ju);Lt.wl=class extends Lt.qn{constructor(t,s=!0){super(),t=t||Ot,this.Sl=Float64Array.from(t),this.Tl=new Lt.Rect,this.bl=!0,this.vl=s}Kn(){}xl(){return this.Sl}Il(){return this.Sl.length/2}Cl(t){this.Sl.length===t.length?this.Sl.set(t):this.Sl=Float64Array.from(t),this.bl=!0}Gl(){this.Cl(Ot)}I(t){this.Cl(t.Sl)}Nl(){this.bl=!0}El(){if(this.bl){let i=this.Sl,e=i[0],n=i[1],r=e,h=n;for(let t=0,s=i.length;t<s;t+=2){const o=i[t],a=i[t+1];o<e&&(e=o),o>r&&(r=o),a<n&&(n=a),a>h&&(h=a)}this.Tl.set(e,n,r,h),this.bl=!1}}hl(t,s,i){let e=this.Sl;8!==e.length&&(e=new Float64Array(8),this.Sl=e),e[0]=t.uu()-s,e[1]=t.lu()-i,e[2]=t.cu()-s,e[3]=t.lu()-i,e[4]=t.cu()-s,e[5]=t.fu()-i,e[6]=t.uu()-s,e[7]=t.fu()-i,this.Tl.I(t),0===s&&0===i||this.Tl.offset(-s,-i),this.bl=!1}Dl(t,s,i){Rt.I(t),Rt.offset(s,i),this.Cl(Rt.toArray()),this.bl=!0}transform(t,s,i){let e=0,n=1;0!==i&&(e=Math.sin(i),n=Math.cos(i)),this._l(t,s,e,n)}_l(i,e,n,r){const h=this.Sl;for(let t=0,s=h.length;t<s;t+=2){const o=t+1,a=h[t]*i,u=h[o]*e;h[t]=a*r-u*n,h[o]=u*r+a*n}this.bl=!0}offset(i,e){const n=this.Sl;for(let t=0,s=n.length;t<s;t+=2)n[t]+=i,n[t+1]+=e}Ru(i,e){const n=this.Sl;if(i===n[0]&&e===n[1])return!0;this.El();let t=this.Tl,r=t.uu()-110,h=t.lu()-101,o=t.cu()+131,a=t.fu()+120,u=0,l=0,c,f,d=0,p=0,m,g,y=(c=r<i?(u=r,i):(u=i,r),f=h<e?(l=h,e):(l=e,h),m=o<i?(d=o,i):(d=i,o),g=a<e?(p=a,e):(p=e,a),0),M=0;for(let t=0,s=n.length;t<s;t+=2){const w=(t+2)%s,S=n[t],T=n[t+1],b=n[w],v=n[1+w];Lt.Qr(r,h,i,e,u,c,l,f,S,T,b,v)&&++y,Lt.Qr(o,a,i,e,d,m,p,g,S,T,b,v)&&++M}return y%2==1||M%2==1}Al(t,c,f){const d=t.Sl,p=this.Sl;if(this.Ru(d[0]+c,d[1]+f))return!0;if(t.Ru(p[0]-c,p[1]-f))return!0;for(let s=0,l=p.length;s<l;s+=2){let t=(s+2)%l,i=p[s],e=p[s+1],n=p[t],r=p[1+t],h=0,o=0,a,u;a=i<n?(h=i,n):(h=n,i),u=e<r?(o=e,r):(o=r,e);for(let t=0,s=d.length;t<s;t+=2){const m=(t+2)%s,g=d[t]+c,y=d[t+1]+f,M=d[m]+c,w=d[1+m]+f;if(Lt.Qr(i,e,n,r,h,a,o,u,g,y,M,w))return!0}}return!1}ll(i,e,n,r,h,o){if(this.Ru(n-i,r-e))return!0;if(this.Ru(h-i,o-e))return!0;let a=0,u=0,l,c;l=n<h?(a=n,h):(a=h,n),c=r<o?(u=r,o):(u=o,r);const f=this.Sl;for(let t=0,s=f.length;t<s;t+=2){const d=(t+2)%s,p=f[t]+i,m=f[t+1]+e,g=f[d]+i,y=f[1+d]+e;if(Lt.Qr(n,r,h,o,a,l,u,c,p,m,g,y))return!0}return!1}dl(i){const e=this.Sl;for(let t=0,s=e.length;t<s;t+=2)e[t]=2*i-e[t];this.bl=!0}ml(i){const e=this.Sl;for(let t=0,s=e.length;t<s;t+=2){const n=t+1;e[n]=2*i-e[n]}this.bl=!0}gl(){const i=this.Sl;for(let t=0,s=i.length;t<s;t+=2){const e=t+1,n=i[t];i[t]=i[e],i[e]=n}this.bl=!0}Ll(){let i=this.Sl,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t];return e/this.Il()}Ol(){let i=this.Sl,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t+1];return e/this.Il()}Rl(){return this.Sl}Pl(){return this.Il()}kl(){return this.vl}}}{const Pt=self.Ls;Pt.Fl=class extends Pt.qn{constructor(t){if(super(),this.jl=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}Kn(){this.zl(),this.jl=null}Bl(){return 0===this.jl.size}zl(){const t=this.jl;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){let e=this.jl,n=e.get(t);n||(n=new Map,e.set(t,n)),n.set(s,i)}Xs(t,s){const i=this.jl.get(t);return i&&i.get(s)}Zs(t,s){const i=this.jl.get(t);return!!i&&i.has(s)}Ul(t,s){const i=this.jl,e=i.get(t);if(!e)return!1;const n=e.delete(s);return n&&0===e.size&&i.delete(t),n}Wl(t){const s=this.jl,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[e,n]of s.entries())n.delete(t)&&0===n.size&&s.delete(e)}Ql(){let t=0;for(const s of this.jl.values())t+=s.size;return t}*values(){for(const t of this.jl.values())yield*t.values()}*Jl(){for(const[t,s]of this.jl.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.jl.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const kt=self.Ls;kt.Yl=class extends kt.qn{constructor(){super(),this.Vl=new Set,this.Hl=[],this.ql=!1}Kn(){this.zl()}zl(){this.Vl.clear(),kt.Nh(this.Hl),this.ql=!1}Zl(t){this.Vl.has(t)||(this.Vl.add(t),this.ql)||this.Hl.push(t)}Zs(t){return this.Vl.has(t)}Ul(t){this.Vl.delete(t)&&(this.ql=!0)}Ql(){return this.Vl.size}Bl(){return 0===this.Vl.size}Xl(){return this.ql&&(this.Kl(),this.ql=!1),this.Hl}Kl(){const t=this.Hl;kt.Nh(t);for(const s of this.Vl)t.push(s)}}}{const Ft=self.Ls,jt=new Map,zt=new Map,Bt=new Map,Ut=new Map,Wt=new Map,Qt=new Map,Jt=new Map,Yt=new Map,Vt=new Map,Ht=(Vt.set("linear","noease"),Vt.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),qt=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Zt=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),Xt=(self.$l=class rs{constructor(){}static tc(){return"default"}static sc(){return"noease"}static ic(t){return Zt.get(t)}static ec(s,...i){this.nc();let t,e=(s?(Bt.has(s)||Bt.set(s,new Map),[...(t=Bt.get(s)).keys()].filter(t=>!rs.rc(t,s)||rs.rc(t,s).transition.IsForAnyPurpose())):[...(t=Wt).keys()]).sort();return[...zt.keys()].concat(e).filter(t=>!i.includes(t))}static hc(){this.nc();const t=[...Wt.keys()];return t.sort(),[...zt.keys()].concat(t)}static oc(){this.nc();const t=[...Wt.keys()];return t.sort(),t}static ac(t){for(const s of Ht){const i=self.lang("ui.bars.timeline.eases."+s);if(i===t)return!0}for(const e of qt){const n=self.lang("ui.bars.timeline.short-eases."+e);if(n===t)return!0}}static uc(t){return this.nc(),[...zt.keys()].includes(t)}static lc(t){const s=Vt.get(t);return s?jt.get(s):rs.uc(t)?jt.get(t):Jt.has(t)?Jt.get(t):void 0}static cc(t){return this.nc(),Yt.get(t)}static fc(t,s){this.nc();const i=rs.lc(t);if(i)return i;if(s)return Bt.get(s).get(t);throw new Error("missing ease function")}static rc(t,s){this.nc();const i=Ut.get(s);if(i)return i.get(t)}static dc(t,s){this.nc();const i=rs.lc(t);return!!i||!!Bt.get(s).get(t)}static mc(t){this.nc();const s=rs.lc(t);return s||Wt.get(t)}static yc(t){return this.nc(),Qt.get(t)}static Mc(t){this.nc();const s=this.hc();return s[t]}static wc(t,s){this.nc();const i=this.ec(s);return i.indexOf(t)}static Sc(t){return this.wc(t)}static nc(){0===jt.size&&(this.Tc("default",()=>{}),this.Tc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.Tc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.Tc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.Tc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.Tc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.Tc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.Tc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.Tc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.Tc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.Tc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.Tc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.Tc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.Tc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.Tc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.Tc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.Tc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.Tc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.Tc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.Tc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Tc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.Tc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.Tc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.Tc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.Tc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.Tc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Tc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.Tc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Tc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.Tc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.Tc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.Tc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.vc("cubicbezier",this.xc),this.vc("spline",this.Ic))}static Tc(t,s,i=!1){if("function"==typeof s)rs.Cc(t,s,"predefined");else{if(!Ft.Oe(s))throw new Error("unexpected arguments");if(self.BuiltInTransition){const n=Ft.Xn(self.BuiltInTransition,t,i);n.SetFromJson(s),rs.Cc(t,(t,s,i,e)=>n.Gc(t,s,i,e),"predefined"),Yt.set(t,n)}else{const r=Ft.Xn(Ft.Nc,[t,s.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);r.Ec(i),rs.Cc(t,(t,s,i,e)=>r.Gc(t,s,i,e),"predefined")}}}static vc(t,s){rs.Cc(t,s,"private")}static Dc(t,s,i,e){this.nc(),rs.Cc(t,s,"custom",i,e)}static _c(t,s){if(!this.uc(t)&&![...Jt.keys()].includes(t)){const i=Bt.get(s),e=(i&&i.delete(t),Ut.get(s));e&&e.delete(t)}}static Cc(t,s,i,e,n){switch(i){case"predefined":jt.set(t,s),zt.set(t,s);break;case"custom":if(e){Bt.has(e)||Bt.set(e,new Map),Ut.has(e)||Ut.set(e,new Map);const r=Bt.get(e),h=(r.set(t,s),Ut.get(e));h.set(t,n)}else Wt.set(t,s),Qt.set(t,n);break;case"private":jt.set(t,s),Jt.set(t,s);break;default:throw new Error("unexpected ease mode")}}static Ac(t,s,i,e){return 0===e?s:i*t/e+s}static xc(t,s,i,e,n){const r=s,h=3*t*(i-s),o=3*t**2*(s+e-2*i),a=t**3*(n-s+3*i-3*e);return r+h+o+a}static Ic(t,s,i,e,n,r,h,o,a,u){if(e===n&&r===h)return t;const l=ns(t,s,e,r,o,u),c=$t(i,n,h,a),f=ts(i,n,h,a),d=ss(i,n,h,a);return is(l,c,f,d)}static Lc(t,s,i,e){const n=[],r=$t(t,s,i,e),h=ts(t,s,i,e),o=ss(t,s,i,e);for(let t=0;t<Xt;++t){const a=is(t*Kt,r,h,o);n.push(a)}return n}},11),Kt=1/(Xt-1),$t=(t,s,i,e)=>e-3*i+3*s-t,ts=(t,s,i,e)=>3*i-6*s+3*t,ss=(t,s,i,e)=>3*(s-t),is=(t,s,i,e)=>((s*t+i)*t+e)*t,es=(t,s,i,e)=>3*s*t*t+2*i*t+e,ns=(h,t,s,i,e,n)=>{if(1==h)return 1;let o=0,r=1,a=n[r],u=Xt-1;for(Xt;r!=u&&a<=h;)r++,a=n[r],o+=Kt;r--;let l=(h-(a=n[r]))/(n[r+1]-a),c=o+l*Kt,f=$t(t,s,i,e),d=ts(t,s,i,e),p=ss(t,s,i,e),m=es(c,f,d,p);if(0===m)return c;if(.01<=m){for(let t=0;t<4;++t){const g=is(c,f,d,p)-h,y=es(c,f,d,p);c-=g/y}return c}{let s=o,i=o+Kt,e=0,n,r;do{c=s+(i-s)/2;let t=is(c,f,d,p)-h;0<t?i=c:s=c,n=1e-7<Math.abs(t),r=++e<10}while(n&&r);return c}}}{let o=function(t){hs.Me(t)};o;const hs=self.Ls;hs.Oc=class{constructor(t){this.Rc=[],this.er=t||"",this.Pc=0}Kn(){this.zl(),this.Rc=null}kc(){return this.er}zl(){hs.Eh(this.Rc),this.Pc=0}Fc(){return this.Pc}jc(t=Math.random()*this.Fc()){let s=0;for(const[i,e]of this.Rc)if(t<(s+=i))return e;return 0}zc(t,s){o(s),this.Pc+=t,this.Rc.push([t,s])}Bc(s,i){o(i);const e=0===s;for(let t=0;t<this.Rc.length;t++){const n=this.Rc[t],r=e||n[0]===s,h=n[1]===i;if(r&&h){this.Rc.splice(t,1),this.Pc-=n[0];break}}}Uc(){return JSON.stringify(this.Rc)}static Wc(t,s){const i=new hs.Oc(s),e=JSON.parse(t);for(const n of e){const r=n[0],h=n[1];i.zc(r,h)}return i}}}{let t=self.Ls,i=0;t.Qc=class{constructor(t,s){this.Jc=t,this.Yc=s,this.Vc=i++,this.Jc.Hc("runtime","screen-reader-text",{type:"create",id:this.Vc,text:this.Yc})}Kn(){this.Jc.Hc("runtime","screen-reader-text",{type:"release",id:this.Vc}),this.Jc=null,this.Yc="",this.Vc=-1}qc(t){this.Yc!==t&&(this.Yc=t,this.Jc.Hc("runtime","screen-reader-text",{type:"update",id:this.Vc,text:this.Yc}))}}}{const os=self.Ls;os.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.Zc=!1,this.Xc=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.Xc)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Zc=!0}}}{const as=self.Ls;as.Event.Kc=class extends as.qn{constructor(t){super(),this.$c=t,this.tf=[],this.if=new Set,this.ef=[],this.nf=new Set,this.rf=0,this.hf=[]}Kn(){0<this.rf||(as.Nh(this.tf),this.if.clear(),as.Nh(this.ef),this.nf.clear(),as.Nh(this.hf),as.Kn(this))}uf(t,s){this.lf()?this.hf.push({cf:"add",ff:t,capture:s}):s?this.if.has(t)||(this.tf.push(t),this.if.add(t)):this.nf.has(t)||(this.ef.push(t),this.nf.add(t))}df(t,s){this.lf()?this.hf.push({cf:"remove",ff:t,capture:s}):s?this.if.has(t)&&(this.if.delete(t),as.Oh(this.tf,t)):this.nf.has(t)&&(this.nf.delete(t),as.Oh(this.ef,t))}pf(){return!this.tf.length&&!this.ef.length}lf(){return 0<this.rf}mf(){const t=new Set,s=new Set;for(const i of this.hf)if("add"===i.cf)this.uf(i.ff,i.capture),(i.capture?s:t).delete(i.ff);else{if("remove"!==i.cf)throw new Error("invalid op");(i.capture?(this.if.delete(i.ff),s):(this.nf.delete(i.ff),t)).add(i.ff)}as.kh(this.ef,t),as.kh(this.tf,s),as.Nh(this.hf)}gf(i){this.yf();let e=!1;for(let t=0,s=this.tf.length;t<s;++t)if(this.tf[t](i),i.Zc){e=!0;break}if(!e)for(let t=0,s=this.ef.length;t<s&&(this.ef[t](i),!i.Zc);++t);return this.Mf(),!i.defaultPrevented}wf(i){this.yf();for(let t=0,s=this.tf.length;t<s;++t)this.tf[t](i);for(let t=0,s=this.ef.length;t<s;++t)this.ef[t](i);return this.Mf(),!0}yf(){this.rf++}Mf(){this.rf--,0===this.rf&&0<this.hf.length&&this.mf()}Sf(t){t?this.yf():this.Mf()}Tf(i){let e=[];for(let s=0,t=this.tf.length;s<t;++s){let t=this.tf[s];e.push(as.bf(()=>t(i)))}for(let s=0,t=this.ef.length;s<t;++s){let t=this.ef[s];e.push(as.bf(()=>t(i)))}return Promise.all(e).then(()=>!i.defaultPrevented)}vf(i){const e=[];this.yf();for(let t=0,s=this.tf.length;t<s;++t){const n=this.tf[t](i);n instanceof Promise&&e.push(n)}for(let t=0,s=this.ef.length;t<s;++t){const r=this.ef[t](i);r instanceof Promise&&e.push(r)}return this.Mf(),e.length?Promise.all(e).then(()=>!i.defaultPrevented):!i.defaultPrevented}async xf(t){return this.vf(t)}async If(i){this.yf();for(let t=0,s=this.tf.length;t<s;++t){const e=this.tf[t](i);e instanceof Promise&&await e}for(let t=0,s=this.ef.length;t<s;++t){const n=this.ef[t](i);n instanceof Promise&&await n}return this.Mf(),!i.defaultPrevented}*Cf(i){this.yf();for(let t=0,s=this.tf.length;t<s;++t){const e=this.tf[t](i);as.Do(e)&&(yield*e)}for(let t=0,s=this.ef.length;t<s;++t){const n=this.ef[t](i);as.Do(n)&&(yield*n)}this.Mf()}}}{const us=self.Ls;us.Event.Gf=class extends us.qn{constructor(){super(),this.Nf=new Map,this.Ef=!1}Kn(){if(this.Ef)throw new Error("already released");this.Df(),this.Ef=!0,us.Kn(this)}$n(){return this.Ef}Df(){if(this.Nf){for(let t of this.Nf.values())t.Kn();this.Nf.clear()}}_f(t,s){let i=this.Nf.get(t);return i||(s?(i=us.Xn(us.Event.Kc,t),this.Nf.set(t,i),i):null)}Af(t){return this.Nf.has(t)}addEventListener(t,s,i){let e=this._f(t,!0);e.uf(s,!!i)}removeEventListener(t,s,i){let e=this._f(t,!1);e&&(e.df(s,!!i),e.pf())&&this.Nf.delete(t)}dispatchEvent(t){const s=this._f(t.type,!1);return!s||(t.cancelable?s.gf(t):s.wf(t))}Lf(t){const s=this._f(t.type,!1);return s?(t.Xc=!0,s.Tf(t)):Promise.resolve(!0)}async Of(t){const s=this._f(t.type,!1);if(!s)return!0;this.Nf.delete(t.type),t.Xc=!0;const i=await s.Tf(t);return s.Kn(),i}async Rf(t){const s=this._f(t.type,!1);return!s||s.xf(t)}Pf(t){const s=this._f(t.type,!1);return!s||s.vf(t)}async kf(t){const s=this._f(t.type,!1);return!s||s.If(t)}Ff(t){const s=this._f(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.Cf(t)}Sf(t){for(const s of this.Nf.values())s.Sf(t)}}}{let r=function(t){c=u&&0===f?requestIdleCallback(s,{timeout:i}):setTimeout(s,0<f?1:t)},s=function(n){if(c=-1,l.length){let i=performance.now(),e=i,t=0,s;for(;h(l.shift()),e=performance.now(),++t,s=(e-i)/t*1.1,l.length&&(u&&0===f&&void 0!==n?s<n.timeRemaining():e-i+s<o););if(-1===c&&l.length){let t=e-i,s=Math.max(a-t,4);r(s)}}},h=function(s){let t;try{t=s.ff()}catch(t){return void s.reject(t)}s.resolve(t)},t=(r,s,h,self.Ls),o=12,a=16,i=35,u="undefined"!=typeof requestIdleCallback,l=[],c=-1,f=0,n=t.ti.Zs("disable-asyncify");n&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),t.bf=function(i){let e=null;return t.isDebug&&(e=t.he()),new Promise((t,s)=>{l.push({ff:i,resolve:t,reject:s,stack:e}),n?h(l.pop()):-1===c&&r(a)})},t.bf.jf=function(t){if(t)++f;else if(--f<0)throw new Error("already turned off high throughput mode")}}{let t=function(){r=-1},s=function(){h=-1,o=-1;let i=Date.now();for(let s of a)if(s.zf(i)){let t=s.Bf();(-1===o||t<o)&&(o=t)}else a.delete(s);if(-1!==o){let t=Math.max(o-i+n,e);h=self.setTimeout(s,t)}},i=(t,s,self.Ls),e=1e3,n=100,r=-1,h=(i.Uf=function(){return-1===r&&(r=Date.now(),self.setTimeout(t,16)),r},-1),o=-1,a=new Set;i.Wf=class{constructor(t,s){this.Qf=t,this.Jf=1e3*s,this.Yf=0,this.Vf=!1}Hf(){let t=i.Uf();this.Yf=t+this.Jf,this.Vf||(a.add(this),this.Vf=!0),-1===h?(o=this.Yf,h=self.setTimeout(s,this.Jf+n)):this.Yf<o&&o>t+e&&(self.clearTimeout(h),o=this.Yf,h=self.setTimeout(s,this.Jf+n))}zf(t){return!(t>=this.Yf)||(this.Qf()?(this.Yf=t+this.Jf,!0):this.Vf=!1)}Bf(){return this.Yf}qf(){this.Vf&&(a.delete(this),this.Vf=!1,0===a.size)&&-1!==h&&(self.clearTimeout(h),h=-1,o=-1)}Kn(){this.qf(),this.Qf=null}}}{const ls=self.Ls;ls.Zf=class cs{constructor(t){this.Xf=!1,this.Kf=t}$f(){this.Xf||(this.Xf=!0,this.Kf&&(this.Kf(),this.Kf=null))}t0(){return this.Xf}Kn(){this.$f()}static Kn(t){return new cs(()=>t.Kn())}static s0(s,i,e,n,t){if(null==n)n=!1;else if("boolean"!=typeof n&&"object"!=typeof n)throw new TypeError("invalid event listener options");if(t&&(e=e.bind(t)),i.includes(" ")){i=i.split(" ");const r=new ls.i0;for(let t of i)s.addEventListener(t,e,n),r.Zl(ls.Xn(ls.Zf,()=>s.removeEventListener(t,e,n)));return r}return s.addEventListener(i,e,n),ls.Xn(ls.Zf,()=>s.removeEventListener(i,e,n))}},ls.e0=class extends ls.Zf{n0(t){this.Kf=t}},ls.i0=class extends ls.Zf{constructor(...s){super(),this.r0=new Set;for(let t of s)this.Zl(t)}Zl(...s){if(this.Xf)throw new Error("already disposed");for(let t of s)this.r0.add(t)}h0(t){if(this.Xf)throw new Error("already disposed");this.r0.delete(t)}o0(){if(this.Xf)throw new Error("already disposed");if(this.r0){for(let t of this.r0)t.$f();this.r0.clear()}}t0(){return this.Xf}$f(){if(this.Xf)throw new Error("already disposed");this.Xf=!0;for(let t of this.r0)t.$f();this.r0.clear(),this.r0=null}Kn(){this.$f()}}}{const fs=self.Ls;fs.a0=class extends fs.qn{constructor(){super(),this.u0=0,this.Ba=0,this.l0=0,this.c0=0}Zl(t){this.Ba=(t=+t)-this.u0,this.l0=this.c0+this.Ba,this.u0=this.l0-this.c0-this.Ba,this.c0=this.l0}f0(t){this.c0-=+t}Xs(){return this.c0}Hf(){this.u0=0,this.Ba=0,this.l0=0,this.c0=0}Set(t){this.u0=0,this.Ba=0,this.l0=0,this.c0=+t}d0(t){this.u0=t.u0,this.Ba=t.Ba,this.l0=t.l0,this.c0=t.c0}Kn(){}}}{const ds=self.Ls,h={};h.p0=function(t){this.m0=t,this.right=this.m0.g0,this.left=this.m0.g0,this.parent=null,this.color=!1,this.key=null},h.y0=function(t){this.size=0,this.g0=new h.p0(this),this.g0.color=!1,this.root=this.g0,this.root.parent=this.g0,this.compare=t||this.M0},h.y0.prototype.M0=function(t,s){return t<s?-1:s<t?1:0},h.y0.prototype.clone=function(){var t=new h.y0(this.compare);return t.w0(this),t},h.y0.prototype.clear=function(){this.size=0,this.g0=new h.p0(this),this.g0.color=!1,this.root=this.g0,this.root.parent=this.g0},h.y0.prototype.S0=function(t){var s=t.right;t.right=s.left,s.left!=this.g0&&(s.left.parent=t),s.parent=t.parent,t.parent==this.g0?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,(s.left=t).parent=s},h.y0.prototype.T0=function(t){var s=t.left;t.left=s.right,s.right!=this.g0&&(s.right.parent=t),s.parent=t.parent,t.parent==this.g0?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,(s.right=t).parent=s},h.y0.prototype.b0=function(t){if(this.contains(t))this.v0(t).key=t;else{for(var s=new h.p0(this),i=(s.key=t,this.g0),e=this.root;e!=this.g0;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;(s.parent=i)==this.g0?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.g0,s.right=this.g0,s.color=!0,this.x0(s),this.size++}},h.y0.prototype.x0=function(t){for(;t!=this.g0&&t!=this.root&&1==t.parent.color;){var s;t.parent==t.parent.parent.left?1==(s=t.parent.parent.right).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.S0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.g0&&this.T0(t.parent.parent)):1==(s=t.parent.parent.left).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.T0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.g0&&this.S0(t.parent.parent))}this.root.color=!1},h.y0.prototype.I0=function(t){var s=t.left==this.g0||t.right==this.g0?t:this.C0(t),i=s.left!=this.g0?s.left:s.right;i.parent=s.parent,s.parent==this.g0?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.G0(i),this.size--},h.y0.prototype.G0=function(t){for(;t!=this.root&&0==t.color;){var s;t=t==t.parent.left?(1==(s=t.parent.right).color&&(s.color=!1,t.parent.color=!0,this.S0(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=!0,t.parent):(0==s.right.color&&(s.left.color=!1,s.color=!0,this.T0(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.S0(t.parent),this.root)):(1==(s=t.parent.left).color&&(s.color=!1,t.parent.color=!0,this.T0(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=!0,t.parent):(0==s.left.color&&(s.right.color=!1,s.color=!0,this.S0(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.T0(t.parent),this.root))}t.color=!1},h.y0.prototype.remove=function(t){var s;return(t=this.v0(t))!=this.g0?(s=t.key,this.I0(t),s):null},h.y0.prototype.N0=function(t,s){this.remove(s)},h.y0.prototype.min=function(t){for(;t.left!=this.g0;)t=t.left;return t},h.y0.prototype.max=function(t){for(;t.right!=this.g0;)t=t.right;return t},h.y0.prototype.C0=function(t){if(t.right!=this.g0)return this.min(t.right);for(var s=t.parent;s!=this.g0&&t==s.right;)s=(t=s).parent;return s},h.y0.prototype.E0=function(t){if(t.left!=this.g0)return this.max(t.left);for(var s=t.parent;s!=this.g0&&t==s.left;)s=(t=s).parent;return s},h.y0.prototype.D0=function(t){if(0<this.size){var s=this.v0(t);if(s==this.g0)return null;if(s.right!=this.g0)return this.min(s.right).key;for(var i=s.parent;i!=this.g0&&s==i.right;)i=(s=i).parent;return i!=this.g0?i.key:null}return null},h.y0.prototype._0=function(t){if(0<this.size){var s=this.v0(t);if(s==this.g0)return null;if(s.left!=this.g0)return this.max(s.left).key;for(var i=s.parent;i!=this.g0&&s==i.left;)i=(s=i).parent;return i!=this.g0?i.key:null}return null},h.y0.prototype.A0=function(){return this.min(this.root).key},h.y0.prototype.L0=function(){return this.max(this.root).key},h.y0.prototype.v0=function(t){for(var s=this.root;s!=this.g0&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},h.y0.prototype.contains=function(t){return null!=this.v0(t).key},h.y0.prototype.getValues=function(){var s=[];return this.forEach(function(t){s.push(t)}),s},h.y0.prototype.w0=function(t){if("array"==h.typeOf(t))for(var s=0;s<t.length;s++)this.b0(t[s]);else if("function"==h.typeOf(t.forEach))t.forEach(this.b0,this);else if("function"==h.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.b0(i[s]);else if("object"==h.typeOf(t))for(var e in t)this.b0(t[e])},h.y0.prototype.O0=function(t){if("array"==h.typeOf(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==h.typeOf(t.forEach))t.forEach(this.N0,this);else if("function"==h.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.remove(i[s]);else if("object"==h.typeOf(t))for(var e in t)this.remove(t[e])},h.y0.prototype.R0=function(t){if("array"==h.typeOf(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==h.typeOf(t.forEach))return t.every(this.contains,this);if("function"==h.typeOf(t.getValues)){for(var i=t.getValues(),s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==h.typeOf(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},h.y0.prototype.range=function(t,s){var i=[];return this.P0(function(t){i.push(t)},t,s),i},h.y0.prototype.k0=function(t,s){if(!this.F0())for(var i=this.min(this.root);i!=this.g0;){if(t.call(s,i.key,this))return;i=this.C0(i)}},h.y0.prototype.j0=function(t,s,i){if(!this.F0())for(var e=this.v0(s);e!=this.g0;){if(t.call(i,e.key,this))return;e=this.C0(e)}},h.y0.prototype.z0=function(t,s,i){if(!this.F0())for(var e=this.min(this.root),n=this.v0(s);e!=n;){if(t.call(i,e.key,this))return;e=this.C0(e)}},h.y0.prototype.P0=function(t,s,i,e){if(!this.F0())for(var n=this.v0(s),r=this.v0(i);n!=r;){if(t.call(e,n.key,this))return;n=this.C0(n)}},h.y0.prototype.B0=function(t,s){if(!this.F0())for(var i=this.max(this.root);i!=this.g0;){if(t.call(s,i.key,this))return;i=this.E0(i)}},h.y0.prototype.forEach=function(t,s){if(!this.F0())for(var i=this.min(this.root);i!=this.g0;i=this.C0(i))t.call(s,i.key,i.key,this)},h.y0.prototype.some=function(t,s){if(!this.F0())for(var i=this.min(this.root);i!=this.g0;i=this.C0(i))if(t.call(s,i.key,i.key,this))return!0;return!1},h.y0.prototype.every=function(t,s){if(this.F0())return!1;for(var i=this.min(this.root);i!=this.g0;i=this.C0(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},h.y0.prototype.map=function(t,s){var i=[];if(!this.F0())for(var e=this.min(this.root);e!=this.g0;e=this.C0(e))i.push(t.call(s,e.key,e.key,this));return i},h.y0.prototype.filter=function(t,s){var i=[];if(!this.F0())for(var e=this.min(this.root);e!=this.g0;e=this.C0(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},h.y0.prototype.getCount=function(){return this.size},h.y0.prototype.F0=function(){return 0==this.size},h.y0.prototype.re=function(t){var s=h.getCount(t);if(this.getCount()>s)return!1;var i=0;if(this.F0())return!0;for(var e=this.min(this.root);e!=this.g0;e=this.C0(e))h.contains.call(t,t,e.key)&&i++;return i==this.getCount()},h.y0.prototype.U0=function(t){var s=new h.y0(this.compare);if(!this.F0())for(var i=this.min(this.root);i!=this.g0;i=this.C0(i))t.contains.call(t,i.key,i.key,this)&&s.b0(i.key);return s},ds.y0=class extends ds.qn{constructor(t){super(),this.W0=new h.y0(t),this.Q0=!1,this.J0=new Set,this.Y0=new Set}Zl(t){this.Q0?this.W0.contains(t)?this.Y0.delete(t):this.J0.add(t):this.W0.b0(t)}h0(t){this.Q0?this.W0.contains(t)?this.Y0.add(t):this.J0.delete(t):this.W0.remove(t)}Zs(t){return this.Q0?!!this.J0.has(t)||!this.Y0.has(t)&&this.W0.contains(t):this.W0.contains(t)}zl(){this.W0.clear(),this.J0.clear(),this.Y0.clear()}toArray(){if(this.Q0)throw new Error("cannot be used in queueing mode");return this.W0.getValues()}Ql(){return this.W0.getCount()+this.J0.size-this.Y0.size}Bl(){return 0===this.Ql()}V0(){if(this.Bl())throw new Error("empty set");if(this.Q0)throw new Error("cannot be used in queueing mode");const t=this.W0,s=t.min(t.root);return s.key}H0(){if(this.Bl())throw new Error("empty set");if(this.Q0)throw new Error("cannot be used in queueing mode");const t=this.V0();return this.h0(t),t}q0(t){if(this.Q0!==(t=!!t)&&!(this.Q0=t)){for(const s of this.Y0)this.W0.remove(s);this.Y0.clear();for(const i of this.J0)this.W0.b0(i);this.J0.clear()}}Z0(t){this.W0.forEach(t)}*values(){if(!this.Bl()){const s=this.W0;for(let t=s.min(s.root);t!=s.g0;t=s.C0(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const ps=self.Ls;ps.X0=class{constructor(t=ps.hardwareConcurrency){this.K0=t,this.$0=[],this.t1=0}Zl(i){return new Promise((t,s)=>{this.$0.push({ff:i,resolve:t,reject:s}),this.s1()})}i1(i){for(let t=0,s=this.$0.length;t<s;++t)if(this.$0[t].ff===i)return t;return-1}e1(t,s){const i=this.i1(t);if(-1===i)throw new Error("cannot find promise to resolve");this.$0[i].resolve(s),this.$0.splice(i,1)}n1(t,s){const i=this.i1(t);if(-1===i)throw new Error("cannot find promise to reject");this.$0[i].reject(s),this.$0.splice(i,1)}async s1(){if(this.$0.length&&!(this.t1>=this.K0)){this.t1++;const s=this.$0.shift();try{const t=await s.ff();s.resolve(t)}catch(t){s.reject(t)}this.t1--,this.s1()}}static async h1(t,s){let i=[],e=!1,n=[];for(;t--;)n.push((async()=>{let t;for(;t=s.pop();){if(e)return;try{i.push(await t())}catch(t){throw e=!0,t}}})());return await Promise.all(n),i}}}{const ms=self.Ls;ms.o1=class{constructor(t,s,i){this.Qf=t,this.a1=s,this.u1=i||2*s,this.l1=-1,this.c1=-1/0,this.f1=()=>this.d1(),this.m1=!1,this.g1=!1,this.M1=null}w1(t){this.g1=!!t}S1(){return void 0!==ms.Battery&&ms.Battery.IsOnBatteryPower()?this.u1:this.a1}T1(...e){if(-1===this.l1){this.M1=e;let t=ms.Uf(),s=t-this.c1,i=this.S1();i<=s&&this.g1?(this.c1=t,this.b1()):this.l1=self.setTimeout(this.f1,Math.max(i-s,4))}}b1(){this.m1=!0;const t=this.M1;this.M1=null,t?this.Qf(...t):this.Qf(),this.m1=!1}Hf(){this.m1||(this.v1(),this.M1=null,this.c1=ms.Uf())}d1(){this.l1=-1,this.c1=ms.Uf(),this.b1()}v1(){-1!==this.l1&&(self.clearTimeout(this.l1),this.l1=-1)}Kn(){this.v1(),this.Qf=null,this.M1=null,this.f1=null}}}{const gs=self.Ls;gs.I1=class{constructor(){this.C1=new Map,this.G1=!1,this.N1=null,this.E1=null,this.D1=null,this._1=null}A1(t){this.G1=!!t}L1(){return this.G1}O1(t){this.N1=t}R1(t){if(this.N1)return this.N1(t);throw new Error("no get base size callback set")}P1(t){this.E1=t}F1(t,s,i,e,n,r){if(this.E1)return this.E1(t,s,i,e,n,r);throw new Error("no raster at size callback set")}j1(t){this.D1=t}z1(t){if(!this.D1)throw new Error("no release result callback set");this.D1(t)}B1(t){this._1=t}U1(){if(!this._1)throw new Error("no redraw callback set");this._1()}W1(t){let s=this.C1.get(t);return s||(s=gs.Xn(gs.Q1,this,t),this.C1.set(t,s)),s.J1(),s}Y1(t){this.C1.delete(t.V1())}H1(){for(const t of this.C1.values())t.q1(),t.Z1()}}}{const ys=self.Ls;ys.Q1=class{constructor(t,s){this.X1=t,this.K1=s,this.td=0,this.sd=0,this.ed=0,this.nd=this.X1.R1(s).then(t=>{this.X1&&(this.sd=t[0],this.ed=t[1],this.X1.U1())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.rd=!0,this.X1&&this.X1.U1()}),this.hd=0,this.od=0,this.ad=0,this.ud=0,this.ld=!1,this.fd=null,this.dd=!1,this.rd=!1}Kn(){if(this.td<=0)throw new Error("already released");this.td--,0===this.td&&this.pd()}q1(){this.fd&&(this.X1.z1(this.fd),this.fd=null)}pd(){this.q1(),this.X1.Y1(this),this.X1=null}V1(){return this.K1}J1(){this.td++}md(){return 0<this.td}gd(){return this.fd}Z1(){this.dd=!0}async yd(e,n,r){if(0!==n&&0!==r&&!this.rd&&!this.ld){let t=ys.Er(Math.ceil(n)),s=ys.Er(Math.ceil(r)),i=Math.max(t,s);if(4096<i){const h=4096/i;n*=h,r*=h,t=Math.min(Math.ceil(t*h),4096),s=Math.min(Math.ceil(s*h),4096)}if(n<t&&r<s){const o=n/r,a=t/s;r=o<a?(n=s*o,s):(n=t)/o}if(this.X1.L1()&&(t=Math.ceil(n),s=Math.ceil(r)),!(t<=this.hd&&s<=this.od)||this.dd){this.ld=!0,this.hd=t,this.od=s;const u=await this.X1.F1(this.K1,e,this.hd,this.od,n,r);this.X1&&(this.q1(),this.fd=u,this.ad=n,this.ud=r,this.ld=!1,this.dd=!1,this.X1.U1())}}}Md(){return this.nd}wd(){return this.sd}Sd(){return this.ed}Td(){return this.ad}bd(){return this.ud}vd(){return this.rd}}}{let s=function(t){return Ts.get(t)};s;const c=self.Ls,Ms=(c.xd="\ufeff",new Set("0123456789")),ws=(c.Id=function(t){return Ms.has(t)},new Set(" \t\n\r\u2028\u2029"));c.Cd=function(t){return ws.has(t)},c.Gd=function(t){return[...t].filter(t=>!c.Cd(t)).join("")},c.Nd=function(t){for(const s of t)if(!c.Cd(s))return!1;return!0},c.Ed=function(t){for(const s of t)if(!c.Cd(s))return!1;return!0},c.Dd=function(t){return 1===t.length&&t.charCodeAt(0)<32},c._d=function(t){return[...t].filter(t=>!c.Dd(t)).join("")};let i=null;try{i=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}c.Ad=function(t){return!c.Cd(t)&&i&&i.test(t)};const Ss=new Set("0123456789.+-e"),Ts=(c.Ld=function(s){if(!(s=s.trim()).length)return!1;let t=s.charAt(0);if("-"!==t&&!Ms.has(t))return!1;for(let t of s)if(!Ss.has(t))return!1;return!0},c.Od=function(s){let i=s.length;for(;0<i;){let t=s.charAt(i-1);if(!c.Id(t))break;--i}return s.substr(0,i)},c.Rd=function(t){let s=c.Od(t),i=t.substr(s.length);return s+(i?(parseInt(i,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),bs=/[&<>"']/g,vs=(c.Pd=function(t){return t.replace(bs,s)},c.kd=function(t){let s=c.Fd(t,"\\","\\\\");return s=c.Fd(s,'"','\\"'),s=c.Fd(s,"\t","\\t"),s=c.Fd(s,"\r",""),c.Fd(s,"\n","\\n")},c.jd=function(t){let s=c.Fd(t,"&","&amp;");return s=c.Fd(s,"<","&lt;"),s=c.Fd(s,">","&gt;"),c.Fd(s,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),xs=(c.ne=function(t){return t.replace(vs,"\\$&")},c.zd=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},c.Bd=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());let e=s.length,n=0,r,h=[];for(;-1<(r=t.indexOf(s,n));)h.push(r),n=r+e;return h},c.Fd=function(t,s,i){return t.replaceAll(s,()=>i)},c.Ud=function(t,s,i){return t.replace(new RegExp(c.ne(s),"gi"),()=>i)},c.Wd=function(t,s){"string"==typeof s?t.textContent=s:s.Qd()?t.textContent=s.toString():(t.innerHTML=s.Jd(),s instanceof c.xn&&s.Yd(t))},c.Vd=function(t,s){return t instanceof c.HtmlString||t instanceof c.xn?t.equals(s):s instanceof c.HtmlString||s instanceof c.xn?s.equals(t):t===s},c.Hd=function(i,...e){let n=i;for(let t=0,s=e.length;t<s;++t){const r=`{${t}}`;if(!i.includes(r))throw new Error(`missing placeholder '${r}' in string substitution`);n=n.replace(r,e[t].toString())}return n},c.qd=function(i,...e){let n=i,r=-1,h=-1;for(let t=0,s=e.length;t<s;++t){const o=`{${t}}`;i.includes(o)?(h=t,n=n.replace(o,e[t].toString())):-1===r&&(r=t)}if(0<=r&&0<=h&&r<h)throw new Error(`missing placeholder '${r}' in string substitution`);return n},c.Zd=function(t,i){let e=t;for(let[t,s]of Object.entries(i))e=e.replaceAll(t,s.toString());return e},c.Xd=function(t,s){return s<t?1:t<s?-1:0},c.Kd=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return e<i?1:i<e?-1:0},new self.Intl.Segmenter),Is=(c.$d=function(t){const s=[];for(const i of xs.segment(t))s.push(i.segment);return s},c.tp=function*(t){for(const s of xs.segment(t))yield s.segment},c.sp=function(t){let s=0;for(const i of xs.segment(t))++s;return s},1073741824),Cs=1024*Is,Gs={ip:!(c.ep=function(s,t){let i="common."+(t?"dataRates":"dataSizes")+".",e=self.langSub;if(s<1024)return e(i+"bytes",s);if(s<1048576){let t=s/1024;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"kilobytes",t)}if(s<Is){let t=s/1048576;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"megabytes",t)}if(s<Cs){let t=s/Is;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"gigabytes",t)}{let t=s/Cs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"terabytes",t)}}),np:!0,rp:!0,hp:!0,op:!0};c.up=function(t,s){s=Object.assign({},Gs,s),c.Lang.PushContext("common.time");const i=[],e=self.lang,n=self.langPluralSub;if(s.np){const h=Math.floor(t/86400);0<h&&(t-=24*h*3600,i.push(n(".days",null,h)))}if(s.rp){const o=Math.floor(t/3600);(0<o||i.length)&&(t-=3600*o,i.push(n(".hours",null,o)))}if(s.hp){const a=Math.floor(t/60);(0<a||i.length||!s.op)&&(t-=60*a,i.push(n(".minutes",null,a)))}if(s.op){const u=Math.floor(t%60);i.push(n(".seconds",null,u))}const r=(s.ip?e(".approx-prefix"):"")+i.join(e(".separator"));return c.Lang.PopContext(),r},c.lp=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),n=s-e.length;for(let t=0;t<n;++t)i+="0";return i+e},c.cp=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},c.fp=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());c._h(i,4,"0"),c._h(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const n=i[t]-e[t];if(0!=n)return n<0?-1:1}return 0},c.pp=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random()),i="x"===t?s:3&s|8;return i.toString(16)})},c.mp=function(i,e){if(i.length!==e.length)throw new Error("strings must be same length");let n=0;for(let t=0,s=i.length;t<s;++t)i.charAt(t)!==e.charAt(t)&&++n;return n},c.gp=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,n,r,h,o;for(s.length<t.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,n=1;n<=t.length;n++)h=s[e-1]===t[n-1]?o[n-1]:Math.min(o[n-1]+1,Math.min(r+1,o[n]+1)),o[n-1]=r,r=h;o[t.length]=r}return o[t.length]}}{let s=function(t,i,e){const n=o.get(e);if(!n)return"class"===e?i?"</span>":`<span class="bbclass${l++}">`:t;if("string"==typeof n){if("a"===n&&0===a.length||"abbr"===n&&0===u.length)return t;if("a"!==n||i){if("abbr"!==n||i)return"<"+i+n+">";{const r=parseInt(e.substring(3),10)-1;if(r<0||r>=u.length)throw new Error("invalid bbcode tip substitution");let t=u[r],s="";if("string"==typeof t?s=t:"function"==typeof t&&(s=t()),"string"!=typeof s)throw new TypeError("invalid bbcode tip");return`<abbr title="${f.Fd(s,'"',"&quot;")}">`}}{const s=parseInt(e.substring(1),10)-1;if(s<0||s>=a.length)throw new Error("invalid bbcode link substitution");const h=a[s];if("string"==typeof h)return`<a href="${a[s]}">`;if("function"==typeof h)return`<a class="bblink${s}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(n)){let t=n[0],s=n[1];return i?"</"+t+">":`<${t} class="${s}">`}},f=(s,self.Ls),o=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),d=new Set(["icon"]),i=/\[(\/?)([a-zA-Z0-9]+)\]/g,p=/\[(\/?)([^\[\n]*?)\]/g,a=null,u=null,l=0,e=/\n/g;f.xn=class{constructor(t,s){if(this.yp=s&&s.Mp?t:f.Pd(t),this.wp="",this.Sp=!1,this.Tp=[],this.bp=[],s){if(this.Sp=!!s.convertLineBreaks,s.links){if(9<s.links.length)throw new Error("too many links");this.Tp=s.links}if(s.tips){if(9<s.tips.length)throw new Error("too many tips");this.bp=s.tips}}this.vp=this.yp.includes("["),this.xp=this.Sp&&this.yp.includes("\n"),this.Ip=!this.vp&&!this.xp&&!this.yp.includes("&"),this.Cp=!1,this.Gp=[]}toString(){return this.yp}valueOf(){return this.yp}Qd(){return this.Ip}Np(){return this.vp?this.yp.replace(i,""):this.yp}Jd(){if(this.Ip)return this.yp;if(!this.wp&&this.yp){let t=this.yp;this.vp&&(l=0,a=this.Tp,u=this.bp,t=t.replace(i,s),a=null,u=null),this.xp&&(t=t.replace(e,"<br>")),this.wp=t}return this.wp}Yd(i){if(this.Tp.length)for(let t=0,s=this.Tp.length;t<s;++t){const e=this.Tp[t];if("function"==typeof e){const n=i.querySelector(".bblink"+t);if(!n)throw new Error("unable to attach BBString link handler");n.onclick=e}}}equals(t){return t instanceof f.HtmlString?this.Jd()===t.Jd():t instanceof f.xn?this.yp===t.yp:this.yp===t}Ep(){if(!this.Cp){let e=[],t=this.yp,n=[],s=p.lastIndex=0,i;for(;null!==(i=p.exec(t));){const r=i.index;if(!(0<r&&"\\"===t.charAt(r-1))){const h=i[0],o=i[1],a=i[2],u=t.substring(s,r);if(s=r+h.length,u&&e.push({text:u,Dp:n.slice(0)}),a)if(o){const l=a.toLowerCase();for(let t=n.length-1;0<=t;--t)if(n[t].tag===l){n.splice(t,1);break}}else{let t=a,s=null,i=a.indexOf("=");if(-1!==i?(t=a.substring(0,i).toLowerCase(),s=a.substring(i+1)):t=t.toLowerCase(),d.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);e.push({icon:s,Dp:n.slice(0)})}else n.push({tag:t,_p:s})}}}s<t.length&&e.push({text:t.substring(s),Dp:n.slice(0)});for(const c of e)c.text&&(c.text=this.Ap(c.text));this.Gp=e.map(t=>t.icon?f.Xn(f.Lp,{icon:t.icon,Dp:t.Dp}):f.Xn(f.Op,{Rp:f.$d(t.text),Dp:t.Dp})),this.Cp=!0}return this.Gp}Ap(t){return t=f.Fd(t,"\\[","["),f.Fd(t,"\\\\","\\")}static Pp(t){return f.Xn(f.xn,t,{Mp:!0}).Np()}static kp(t){return t.replace(p,"")}}}{let u=function(t){return""!==t&&""!==t&&M.Cd(t)},a=function(t){return Ns.has(t)},l=function(t){return M.Ad(t)&&!a(t)},c=function(t){for(;0<t.length&&u(t.at(-1));)t.pop()},y=function(t){return"\n"===t||"\r\n"===t};u,a,l,c,y;const M=self.Ls,Ns=new Set("");M.Fp=class{constructor(){this.jp=[],this.zp=null}Bp(){return this.jp}Up(){return this.jp.length}Wp(t){this.zp=t}Qp(t,s){let i=0,e=0,n=0,r=0,h=0;for(const o of t){if(-1===o.Jp()){const a=s(o);o.Yp(a.height),o.Vp(a.fontBoundingBoxAscent||0),o.Hp(a.fontBoundingBoxDescent||0),o.qp(a.Zp||0),o.Xp()?o.Kp(a.width):o.$p()&&o.tm(this.zp)}i+=o.Jp(),e=Math.max(e,o.im()),n=Math.max(n,o.nm()),r=Math.max(r,o.rm()),h=Math.max(h,o.hm())}return{width:i,height:e,fontBoundingBoxAscent:n,fontBoundingBoxDescent:r,Zp:h}}om(t,s,i,e,n,r){this.jp.push(M.Xn(M.Fp.am,{um:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:n,Zp:r}))}Fp(s,r,h,i,o){if("string"==typeof s&&(s=[M.Xn(M.Op,{Rp:M.$d(s)})]),M.Nh(this.jp),!(!s.length||1===s.length&&s[0].Xp()&&s[0].Bl()||h<2)){if(1===s.length){const a=s[0];if(a.Xp()&&a.lm()<=100&&!a.fm()){let{width:t,height:s,fontBoundingBoxAscent:i,fontBoundingBoxDescent:e,Zp:n}=r(a);if(t+=o,a.Kp(t),a.Yp(s),a.Vp(i||0),a.Hp(e||0),a.qp(n||0),t<=h)return void this.om([a],t,s,i,e,n)}}let t;t="word"===i?this.dm(s):"cjk"===i?this.pm(s):this.gm(s),this.ym(t,r,h,o)}}dm(t){let s=[],i=[],e=!1;for(const n of t){const r=n.Mm();if(n.$p())0<i.length&&s.push(i),s.push([n]),i=[];else for(const h of n.wm())if(y(h))0<i.length&&s.push(i),s.push([M.Xn(M.Op,{Rp:["\n"],Dp:r})]),i=[];else if(0===i.length)i.push(M.Xn(M.Op,{Rp:[h],Dp:r})),e=u(h);else{const o=u(h);if(o===e){const a=i.at(-1);a.Mm()===r?a.Sm(h):i.push(M.Xn(M.Op,{Rp:[h],Dp:r}))}else s.push(i),i=[M.Xn(M.Op,{Rp:[h],Dp:r})],e=o}}return 0<i.length&&s.push(i),s}pm(t){let s=[],i=[],e=!1;for(const n of t){const r=n.Mm();if(n.$p())0<i.length&&s.push(i),s.push([n]),i=[];else for(const h of n.wm())if(y(h))0<i.length&&s.push(i),s.push([M.Xn(M.Op,{Rp:["\n"],Dp:r})]),i=[];else{if(0===i.length)i.push(M.Xn(M.Op,{Rp:[h],Dp:r}));else if(e||l(h)){const o=i.at(-1);o.Mm()===r?o.Sm(h):i.push(M.Xn(M.Op,{Rp:[h],Dp:r}))}else s.push(i),i=[M.Xn(M.Op,{Rp:[h],Dp:r})];e=a(h)}}return 0<i.length&&s.push(i),s}gm(t){const s=[];for(const i of t)if(i.Xp()){const e=i.wm();M.zn(s,e.map(t=>[M.Xn(M.Op,{Rp:[t],Dp:i.Mm()})]))}else s.push([i]);return s}Tm(t){return t.map(t=>t.vm())}xm(s,i){let t=s.length?s.at(-1):null,e=0;t&&t.Xp()&&i[0].Xp()&&i[0].Mm()===t.Mm()&&(t.Im(i[0].wm()),e=1);for(let t=i.length;e<t;++e){const n=i[e];s.push(n.vm())}}ym(t,s,i,e){let n=[],r=0,h=0,o=0,a=0,u=0;for(const l of t)if(1===l.length&&l[0].Xp()&&1===l[0].lm()&&y(l[0].wm()[0])){if(0===h){const c=M.Xn(M.Op,{Rp:[" "],Dp:l[0].Mm()}),f=s(c);h=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,u=f.Zp||0}this.om(n,r,h,o,a,u),n=[],r=0,h=0,o=0,a=0,u=0}else{const d=this.Tm(n),p=(this.xm(d,l),this.Qp(d,s)),m=p.width;if(i<=m)if(0<n.length&&this.om(n,r,h,o,a,u),n=[],l[0].Xp()&&M.Ed(l[0].wm()))r=0,h=0,o=0,a=0,u=0;else{this.xm(n,l);const g=this.Qp(n,s);r=g.width,h=g.height,o=g.fontBoundingBoxAscent,a=g.fontBoundingBoxDescent,u=g.Zp}else n=d,r=m,h=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,u=p.Zp}0<n.length&&this.om(n,r,h,o,a,u),this.Cm(s,e)}Cm(s,i){for(const e of this.jp){const n=e.Gm();if(n.length){let t=n.at(-1);if(t.Xp()){const r=t.wm(),h=r.slice(0);if(c(h),0===h.length)e.Nm(-t.Jp()),n.pop();else if(h.length<r.length){t.Em(h);const o=s(t).width,a=t.Jp()-o;t.Kp(o),e.Nm(-a)}0!==i&&0<n.length&&((t=n.at(-1)).Nm(i),e.Nm(i))}}}}zl(){M.Nh(this.jp)}Dm(){return this.jp.reduce((t,s)=>Math.max(t,s.Jp()),0)}_m(){return this.jp.reduce((t,s)=>t+s.im(),0)}}}{const Es=self.Ls;Es.Fp.am=class{constructor(t){this.Gp=t.um||[],this.Am=t.width||-1,this.Lm=t.height||-1,this.Om=t.fontBoundingBoxAscent||-1,this.Rm=t.fontBoundingBoxDescent||-1,this.Pm=t.Zp||-1,this.km=0,this.Fm=0}um(){return this.Gp.values()}*jm(){const s=this.Gp;for(let t=s.length-1;0<=t;--t)yield s[t]}Gm(){return this.Gp}Nm(t){this.Am+=t}Jp(){return this.Am}im(){return this.Lm}zm(){return this.Om}rm(){return this.Rm}hm(){return this.Pm}Bm(t){this.km=t}Um(){return this.km}Wm(t){this.Fm=t}Qm(){return this.Fm}}}{const Ds=self.Ls;Ds.Jm=class{constructor(t){this.Ym=t.Dp||[],this.Am=t.width||-1,this.Lm=t.height||-1,this.Om=t.fontBoundingBoxAscent||-1,this.Rm=t.fontBoundingBoxDescent||-1,this.Pm=t.Zp||-1,this.km=0,this.Fm=0}Xp(){return!1}$p(){return!1}Mm(){return this.Ym}Vm(s){const i=this.Ym;for(let t=i.length-1;0<=t;--t){const e=i[t];if(e.tag===s)return e}return null}Hm(t){return!!this.Vm(t)}qm(){const t=new Map;for(const s of this.Ym)t.set(s.tag,s._p);return t}Nm(t){this.Am+=t}Kp(t){this.Am=t}Jp(){return this.Am}Yp(t){this.Lm=t}im(){return this.Lm}Vp(t){this.Om=t}nm(){return this.Om}Hp(t){this.Rm=t}rm(){return this.Rm}qp(t){this.Pm=t}hm(){return this.Pm}Bm(t){this.km=t}Um(){return this.km}Wm(t){this.Fm=t}Qm(){return this.Fm}}}{const _s=self.Ls;_s.Op=class extends _s.Jm{constructor(t){super(t),this.Zm=t.Rp}Xp(){return!0}Im(t){_s.zn(this.Zm,t),this.Am=-1,this.Lm=-1,this.Om=-1,this.Rm=-1,this.Pm=-1}Sm(t){this.Zm.push(t)}vm(){return _s.Xn(_s.Op,{Rp:this.Zm.slice(0),Dp:this.Ym,width:this.Am,height:this.Lm,fontBoundingBoxAscent:this.Om,fontBoundingBoxDescent:this.Rm,Zp:this.Pm})}wm(){return this.Zm}Em(t){this.Zm=t}lm(){return this.Zm.length}Bl(){return 0===this.Zm.length}fm(){return this.Zm.includes("\n")}}}{const As=self.Ls;As.Lp=class extends As.Jm{constructor(t){super(t),this.Xm=t.icon}$p(){return!0}Km(){return this.Xm}vm(){return As.Xn(As.Lp,{icon:this.Xm,Dp:this.Ym,width:this.Am,height:this.Lm,fontBoundingBoxAscent:this.Om,fontBoundingBoxDescent:this.Rm,Zp:this.Pm})}$m(t){if(!t)return null;let s=Number(this.Xm);return String(s)===this.Xm?(s=Math.floor(s),t.tg(s)):t.sg(this.Xm)}tm(t){const s=this.$m(t);this.Am=s?this.Lm*s.Jp()/s.im():0}ig(t){const s=this.$m(t);return s?s.ig():null}lm(){return 1}}}{const Ls=self.Ls;Ls.eg=class{constructor(t){this.ng=new Map,this.rg=t.hg,this.og=t.ag}Kn(){for(const t of this.ng.values())t.Kn();this.ng.clear()}ug(t){let s=this.ng.get(t);if(!s){const i=this.rg(t);s=Ls.Xn(Ls.lg,this,{source:t,fg:i}),this.ng.set(t,s)}return s}dg(t){return this.ng.has(t)}pg(t){const s=this.ng.get(t);s&&s.Kn(),this.ng.delete(t)}async mg(t){return this.og(t)}}}{const Os=self.Ls;Os.lg=class{constructor(t,s){this.gg=t,this.yg=s.source,this.Mg=[],this.wg=new Map,this.Sg=!1,this.Tg=!1,this.bg=null;const i=s.fg.vg;for(let t=0,s=i.length;t<s;++t){const e=i[t],n=Os.Xn(Os.xg,this,{index:t,tag:e.tag,source:e.source,width:e.width,height:e.height});this.Mg.push(n),e.tag&&this.wg.set(e.tag.toLowerCase(),n)}}Kn(){for(const t of this.Mg)t.Kn();Os.Nh(this.Mg),this.wg.clear(),this.gg=null,this.yg=null}Ig(){return this.Sg}Cg(){return this.Tg}Gg(){return this.bg||(this.bg=this.Ng()),this.bg}async Ng(){if(!this.Sg){this.Sg=!0,this.Tg=!0;const t=await this.gg.mg(this.yg);if(this.gg){const i=t.vg;for(let t=0,s=Math.min(i.length,this.Mg.length);t<s;++t){const e=i[t].Eg;this.Mg[t].Dg(e)}this.Tg=!1}}}tg(t){return(t=Math.floor(t))<0||t>=this.Mg.length?null:this.Mg[t]}sg(t){return this.wg.get(t.toLowerCase())||null}}}{const Rs=self.Ls;Rs.xg=class{constructor(t,s){this._g=t,this.yg=s.source||null,this.Ag=s.index,this.Lg=s.tag,this.Am=s.width,this.Lm=s.height,this.Og=null}Kn(){this.Am=0,this.Lm=0,this._g=null}Rg(){return this.yg}Jp(){return this.Am}im(){return this.Lm}Dg(t){this.Og=t}ig(){return this.Og}}}{let e=function(t,s,i,e){const n=zs;In.F(Fs,i,s),In.F(js,t,s),In.At(n,Fs,js),In.normalize(n,n),e.set(n[0],n[1],n[2],In._t(t,n))},h=function(t,s,i,e,n,r,h){const o=h.x,a=h.y,u=h.z,l=h.w,c=h.Pg,f=h.kg,d=h.Fg,p=1-c,m=1-f,g=1-d,y=o*t*c+o*e*p+a*s*f+a*n*m+u*i*d+u*r*g;if(l<=y)return!0;const M=o*e*c+o*t*p+a*n*f+a*s*m+u*r*d+u*i*g;return l<M},n=function(t,s,i,e){const n=e.x,r=e.y,h=e.z,o=e.w,a=n*t+r*s+h*i;return o<=a};e,h,n;const Ps=self.Ls,ks=self.gs,In=ks.xs,Wn=ks.Is,xn=ks.Ss,Fs=In.create(),js=In.create(),zs=In.create(),Bs=Wn.create(),Us=xn.create(),Ws=In.create(),Qs=In.create(),Js=In.create(),Ys=In.create(),Vs=In.create(),Hs=In.create(),qs=In.create(),Zs=In.create(),Xs=Wn.C(0,0,1,1);Ps.jg={zg(t,s,i,e,n,r,h){let o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],u=e[2]*t+e[6]*s+e[10]*i+e[14],l=e[3]*t+e[7]*s+e[11]*i+e[15],c=n[0]*o+n[4]*a+n[8]*u+n[12]*l,f=n[1]*o+n[5]*a+n[9]*u+n[13]*l,d=n[2]*o+n[6]*a+n[10]*u+n[14]*l,p=n[3]*o+n[7]*a+n[11]*u+n[15]*l;return 0!=p&&(f*=p=1/p,d*=p,h[0]=(.5*(c*=p)+.5)*r[2]+r[0],h[1]=(.5*f+.5)*r[3]+r[1],h[2]=.5*(1+d),!0)},Bg(t,s,i,e,n,r,h){const o=Us,a=Bs;return xn.multiply(o,n,e),null!==xn.N(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,Wn.kt(a,a,o),0!==a[3])&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0)},Ug(t,s,i,e,n,r,h){const o=Fs,a=js;if(!Ps.jg.Bg(t,s,0,e,n,r,o))return!1;if(!Ps.jg.Bg(t,s,1,e,n,r,a))return!1;let u=js,l=(In.F(u,a,o),zs),c=(In.set(l,0,0,1),-i),f=In._t(l,u),d=0;if(0===f){const p=In._t(l,o)+c;if(0!==p)return!1}else if((d=-(In._t(o,l)+c)/f)<0)return!1;return In.Ct(h,o,u,d),!0}};class Ks{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Pg=NaN,this.kg=NaN,this.Fg=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.Pg=0<t?1:0,this.kg=0<s?1:0,this.Fg=0<i?1:0}}Ps.jg.Wg=class{constructor(){this.Qg=new Ks,this.Jg=new Ks,this.Yg=new Ks,this.Vg=new Ks,this.Hg=new Ks,this.qg=new Ks}Zg(t,s){const i=Xs;Ps.jg.Bg(0,1,0,t,s,i,Ws),Ps.jg.Bg(1,1,0,t,s,i,Qs),Ps.jg.Bg(0,0,0,t,s,i,Js),Ps.jg.Bg(1,0,0,t,s,i,Ys),Ps.jg.Bg(0,1,1,t,s,i,Vs),Ps.jg.Bg(1,1,1,t,s,i,Hs),Ps.jg.Bg(0,0,1,t,s,i,qs),Ps.jg.Bg(1,0,1,t,s,i,Zs),e(Js,Ws,Vs,this.Qg),e(Ws,Qs,Hs,this.Jg),e(Qs,Ys,Zs,this.Yg),e(Ys,Js,qs,this.Vg),e(qs,Vs,Hs,this.qg),e(Ys,Qs,Ws,this.Hg)}Xg(t,s,i,e,n,r){return h(t,s,i,e,n,r,this.Qg)&&h(t,s,i,e,n,r,this.Jg)&&h(t,s,i,e,n,r,this.Yg)&&h(t,s,i,e,n,r,this.Vg)&&h(t,s,i,e,n,r,this.Hg)&&h(t,s,i,e,n,r,this.qg)}Kg(t,s,i){return!n(t,s,i,this.Hg)}}}{const $s=self.Ls,ti=self.gs,In=ti.xs,Wn=ti.Is,xn=ti.Ss,si=xn.create(),ii=In.C(0,0,0),ei=In.C(0,0,0),ni=In.C(0,0,0),ri=In.C(0,1,0),hi=(Wn.C(0,0,0,0),new $s.ju),oi=new $s.Rect,ai=new $s.ju(0,0,1,0,1,1,0,1),ui={$g:1,ty:1e4},li=xn.C(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);$s.jg.iy=class{constructor(t){t=Object.assign({},ui,t),this.Am=0,this.Lm=0,this.ey=$s.ur(45),this.ny=Math.tan(this.ey/2),this.hy=xn.create(),this.oy=xn.create(),this.uy=!1,this.ly=t.$g,this.my=t.ty,this.gy=[],this.yy=new Map,this.My=null,this.wy=null,this.Sy=null,this.Ty=null,this.by=null,this.vy=null,this.xy=null,this.Iy=null,this.Cy=null,this.Gy=null,this.Ny=null,this.Ey=null,this.Dy=new Map,this._y=null,this.Ay=[],this.Ly=new Map,this.Oy=0,this.Ry=0,this.Py=1,this.ky=[this.Py],this.Fy=1,this.jy=[this.Fy],this.zy=.5,this.By=[this.zy],this.Uy=0,this.Wy=!0,this.Qy=!1}Jy(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}Yy(){this.Oy=0,this.Ry=0,this.My=null,this.wy=null,this.Sy=null,this.Ty=null,this.by=null,this.vy=null,this.xy=null,this.Iy=null,this.Cy=null,this.Gy=null,this.Ny=null,this.Ey=null,this.Vy()}Hy(){this.Yy(),this._y=null}qy(){for(const t of this.gy)t.Kn();this.Yy()}Jp(){return this.Am}im(){return this.Lm}Zy(t){return this.Xy()?100:t/(2*this.Ky())}$y(t){if(this.Xy()){const s=t/(2*this.Ky());return s/this.Zy(t)}return 1}tM(t){this.ly=t}sM(){return this.ly}iM(t){this.my=t}eM(){return this.my}nM(t){this.ey=t,this.ny=Math.tan(this.ey/2)}rM(){return this.ey}Ky(){return this.ny}hM(){this.uy=!1}oM(){this.uy=!0}Xy(){return!this.uy}aM(){return this.uy}uM(t,s,i=.5,e=.5){const n=this.sM(),r=this.eM(),h=this.rM();if(.5===i&&.5===e)this.lM()?xn.Mt(t,h,s,n,r):xn.perspective(t,h,s,n,r);else{const o=2*(i=1-i)-2,a=2*i,u=2*e-2,l=2*e,c=this.Ky()*n,f=c*s;xn.gt(t,o*f,a*f,u*c,l*c,n,r),this.lM()&&xn.mul(t,li,t)}}cM(t,s,i,e=1){const n=self.devicePixelRatio,r=2*this.Zy(i)*n*this.Ky()/i,h=s*r/(2*n*e),o=i*r/(2*n*e),a=-h,u=h,l=-o,c=o;this.lM()?xn.bt(t,a,u,l,c,this.sM(),this.eM()):xn.ortho(t,a,u,l,c,this.sM(),this.eM())}fM(t,s,i,e,n,r=1){let h=1;this.Xy()&&(h=200*this.Ky()/n);const o=ni,a=(In.set(o,h,-h,1),ii),u=ei;In.multiply(a,s,o),In.multiply(u,i,o),xn.vt(t,a,u,e||ri),o[2]=r,xn.scale(t,t,o)}dM(t,s,i,e,n,r,h,o){return In.set(ii,t,s,i),In.set(ei,e,n,r),this.fM(si,ii,ei,ri,h,o),si}pM(t){this.gy.push(t),this.yy.set(t.kc(),t)}mM(t){const s=this.gy.indexOf(t);-1!==s&&this.gy.splice(s,1),this.yy.delete(t.kc())}Vy(){$s.Nh(this.gy),this.yy.clear()}gM(t){return this.yy.get(t)||null}yM(){return this.My}MM(){this.wM(this.My)}SM(){return this.wy}TM(){this.wM(this.wy)}bM(){this.wM(this.Sy)}vM(){this.wM(this.Ty)}xM(){this.wM(this.by)}IM(){this.wM(this.vy)}CM(){this.wM(this.xy)}GM(){this.wM(this.Iy)}NM(){this.wM(this.Cy)}EM(){this.wM(this.Gy)}DM(){this.wM(this.Ny)}_M(){this.wM(this.Ey)}AM(t){this._y=t}LM(){return this._y}OM(t,s,i,e){let n=$s.jg.PM.RM(t,s,i,e),r=this.Dy.get(n);return r||(r=$s.Xn($s.jg.PM,this,t,s,i,e),this.Dy.set(n,r)),r.kM(),r}FM(t){t.jM(),0===t.zM()&&(this._y===t&&(this._y=null),this.Dy.delete(t.BM()),t.Kn())}UM(t){$s.Nh(this.Ay),this.Ly.clear();let s=0;for(const i of t){const e=i[0],n=i[1],r=i[2];this.Ay.push([n,r]),this.Ly.set(e,{number:s,WM:n,QM:r}),s++}}JM(t){return this.Ay[t]}YM(t){return this.JM(t)[0]}VM(t){return this.JM(t)[1]}HM(t){const s=this.Ly.get(t);if(void 0===s)throw new Error("invalid blend name");return s}qM(t){const s=this.Ly.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}ZM(t){this.Oy=t}XM(){return this.Oy}KM(t){this.Ry=t,this._y=null}$M(){return this.Ry}am(t,s,i,e){const n=$s.pr(t,s,i,e),r=Math.sin(n),h=Math.cos(n),o=.5*this.Py,a=r*o,u=h*o,l=this.Fy;2===l?this.tw(t,s,0,i,e,0,a,u):1===l?this.iw(t,s,0,i,e,0,a,u):this.ew(t,s,0,i,e,0,a,u)}rw(t,s,i,e,n,r){const h=$s.pr(t,s,e,n),o=Math.sin(h),a=Math.cos(h),u=.5*this.Py,l=o*u,c=a*u,f=this.Fy;2===f?this.tw(t,s,i,e,n,r,l,c):1===f?this.iw(t,s,i,e,n,r,l,c):this.ew(t,s,i,e,n,r,l,c)}tw(t,s,i,e,n,r,h,o){const a=this.zy,u=t+a-o,l=s+a-h,c=e+a+o,f=n+a+h,d=2*o,p=2*h,m=u+h,g=l-o,y=u-h+d,M=l+o+p,w=c+h,S=f-o,T=c-h-d,b=f+o-p;this.hw(m,g,i,w,S,r,T,b,r,y,M,i,ai)}iw(t,s,i,e,n,r,h,o){const a=this.zy,u=t+a-o,l=s+a-h,c=e+a+o,f=n+a+h,d=u+h,p=l-o,m=u-h,g=l+o,y=c+h,M=f-o,w=c-h,S=f+o;this.hw(d,p,i,y,M,r,w,S,r,m,g,i,ai)}ew(t,s,i,e,n,r,h,o){const a=this.zy,u=t+a,l=s+a,c=e+a,f=n+a,d=u+h,p=l-o,m=u-h,g=l+o,y=c+h,M=f-o,w=c-h,S=f+o;this.hw(d,p,i,y,M,r,w,S,r,m,g,i,ai)}ow(t,s,i,e,n,r){const h=$s.pr(t,s,i,e),o=Math.sin(h),a=Math.cos(h),u=.5*this.Py,l=o*u,c=a*u,f=this.Fy;2===f?this.aw(t,s,i,e,l,c,n,r):1===f?this.uw(t,s,i,e,l,c,n,r):this.lw(t,s,i,e,l,c,n,r)}aw(t,s,i,e,n,r,h,o){const a=this.zy,u=t+a-r,l=s+a-n,c=i+a+r,f=e+a+n,d=2*r,p=2*n,m=u+n,g=l-r,y=u-n+d,M=l+r+p,w=c+n,S=f-r,T=c-n-d,b=f+r-p;hi.set(m,g,w,S,T,b,y,M),oi.set(h,0,o,0),this.cw(hi,oi)}uw(t,s,i,e,n,r,h,o){const a=this.zy,u=t+a-r,l=s+a-n,c=i+a+r,f=e+a+n,d=u+n,p=l-r,m=u-n,g=l+r,y=c+n,M=f-r,w=c-n,S=f+r;hi.set(d,p,y,M,w,S,m,g),oi.set(h,0,o,0),this.cw(hi,oi)}lw(t,s,i,e,n,r,h,o){const a=this.zy,u=t+a,l=s+a,c=i+a,f=e+a,d=u+n,p=l-r,m=u-n,g=l+r,y=c+n,M=f-r,w=c-n,S=f+r;hi.set(d,p,y,M,w,S,m,g),oi.set(h,0,o,0),this.cw(hi,oi)}fw(t,s,i,e){const n=.5*this.Py,r=this.Fy;2===r?this.dw(t,s,i,e,n):1===r?this.pw(t,s,i,e,n):this.mw(t,s,i,e,n)}dw(t,s,i,e,n){this.tw(t,s,0,i,s,0,0,n),this.tw(i,s,0,i,e,0,n,0),this.tw(i,e,0,t,e,0,0,-n),this.tw(t,e,0,t,s,0,-n,0)}pw(t,s,i,e,n){this.iw(t,s,0,i,s,0,0,n),this.iw(i,s,0,i,e,0,n,0),this.iw(i,e,0,t,e,0,0,-n),this.iw(t,e,0,t,s,0,-n,0)}mw(t,s,i,e,n){this.ew(t,s,0,i,s,0,0,n),this.ew(i,s,0,i,e,0,n,0),this.ew(i,e,0,t,e,0,0,-n),this.ew(t,e,0,t,s,0,-n,0)}gw(t){this.fw(t.uu(),t.lu(),t.cu(),t.fu())}yw(t){const s=$s.pr(t.Yr(),t.Vr(),t.Hr(),t.qr()),i=Math.sin(s),e=Math.cos(s),n=.5*this.Py,r=i*n,h=e*n,o=this.Fy;2===o?this.Mw(t,r,h):1===o?this.ww(t,r,h):this.Sw(t,r,h)}Mw(t,s,i){this.tw(t.Yr(),t.Vr(),0,t.Hr(),t.qr(),0,s,i),this.tw(t.Hr(),t.qr(),0,t.Zr(),t.Xr(),0,i,-s),this.tw(t.Zr(),t.Xr(),0,t.Kr(),t.$r(),0,-s,-i),this.tw(t.Kr(),t.$r(),0,t.Yr(),t.Vr(),0,-i,s)}ww(t,s,i){this.iw(t.Yr(),t.Vr(),0,t.Hr(),t.qr(),0,s,i),this.iw(t.Hr(),t.qr(),0,t.Zr(),t.Xr(),0,i,-s),this.iw(t.Zr(),t.Xr(),0,t.Kr(),t.$r(),0,-s,-i),this.iw(t.Kr(),t.$r(),0,t.Yr(),t.Vr(),0,-i,s)}Sw(t,s,i){this.ew(t.Yr(),t.Vr(),0,t.Hr(),t.qr(),0,s,i),this.ew(t.Hr(),t.qr(),0,t.Zr(),t.Xr(),0,i,-s),this.ew(t.Zr(),t.Xr(),0,t.Kr(),t.$r(),0,-s,-i),this.ew(t.Kr(),t.$r(),0,t.Yr(),t.Vr(),0,-i,s)}Tw(t){this.Py=t,this.ky[this.ky.length-1]=t}bw(){return this.Py}xw(t){if(100<=this.ky.length)throw new Error("pushed too many line widths - check push/pop pairs");this.ky.push(t),this.Py=t}Iw(){if(this.ky.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.ky.pop(),this.Py=this.ky.at(-1)}Cw(){this.Fy=0,this.jy[this.jy.length-1]=0}Gw(){this.Fy=1,this.jy[this.jy.length-1]=0}Nw(){this.Fy=2,this.jy[this.jy.length-1]=0}Ew(t){if("butt"===t)this.Dw();else if("square"===t)this._w();else{if("zag"!==t)throw new Error("invalid line cap");this.Aw()}}Dw(){if(100<=this.jy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.jy.push(0),this.Fy=0}_w(){if(100<=this.jy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.jy.push(1),this.Fy=1}Aw(){if(100<=this.jy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.jy.push(2),this.Fy=2}Lw(){if(this.jy.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.jy.pop(),this.Fy=this.jy.at(-1)}Ow(t){this.zy=t,this.By[this.By.length-1]=t}Rw(){return this.zy}Pw(t){if(100<=this.By.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.By.push(t),this.zy=t}kw(){if(this.By.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.By.pop(),this.zy=this.By.at(-1)}Fw(s){const t=s.length/2;if(t<3)throw new Error("need at least 3 points");const i=t-2,e=i-1,n=s[0],r=s[1];for(let t=0;t<i;t+=2){const h=2*t,o=s[2+h],a=s[3+h],u=s[4+h],l=s[5+h];if(t===e)this.jw(n,r,o,a,u,l,u,l);else{const c=s[6+h],f=s[7+h];this.jw(n,r,o,a,u,l,c,f)}}}zw(){return 3}Bw(){this.Uw(!0),this.Uy++}Ww(){return this.Uy}Qw(){this.Uy++}Jw(t){this.Wy=!!t}Yw(){return this.Wy}Vw(t){this.Qy=!!t}Hw(){return this.Qy}qw(){return!1}lM(){return!1}Zw(){}Xw(){}Kw(){}$w(){return this.Zw()+this.Xw()+this.Kw()}tS(){return $s.Xn($s.jg.sS,this)}}}{const ci=self.Ls;ci.jg.iS=class{constructor(t,s){this.er=s.name,this.eS=t,this.nS=s.extendBoxHorizontal||0,this.rS=s.extendBoxVertical||0,this.hS=!!s.crossSampling,this.oS=!!s.mustPreDraw,this.aS=!!s.preservesOpaqueness,this.uS=!!s.supports3dDirectRendering,this.lS=!!s.animated,this.cS=!!s.blendsBackground,this.fS=!!s.usesDepth,this.dS=!1,this.pS=this.hS||this.cS||0!==this.nS||0!==this.rS}Kn(){this.eS=null}mS(){return this.eS}kc(){return this.er}gS(){return 0!==this.nS||0!==this.rS}yS(){return this.nS}MS(){return this.rS}wS(){return this.hS}SS(){return this.oS}TS(){return this.aS}bS(){return this.uS}vS(){return this.lS}xS(){return this.cS}IS(){return this.fS}CS(){return this.dS}GS(){return this.pS}NS(){return!1}}}{const fi=self.Ls;fi.jg.PM=class{constructor(t,s,i,e,n){this.eS=t,this.td=0,this.ES=null,this.DS="",this._S=i,this.AS=fi.Xn(fi.Ao),this.AS.set(e),this.LS=n,"string"==typeof s?this.DS=s:(this.ES=s,this.DS=this.ES.kc())}Kn(){if(0<this.td)throw new Error("releasing state group still in use");this.eS=null,this.ES=null,this.DS=""}OS(){const t=this.eS;t.wM(this.ES),t.RS(this._S),t.PS(this.AS),t.KM(this.LS),t.AM(this)}BM(){return fi.jg.PM.RM(this.DS,this._S,this.AS,this.LS)}kM(){++this.td}jM(){--this.td}zM(){return this.td}kS(){this.ES=null}FS(t){if(this.ES=t.gM(this.DS),!this.ES)throw new Error("failed to restore shader program")}static RM(t,s,i,e){const n="string"==typeof t?t:t.kc();return n+","+s+","+i.Yo()+","+i.Vo()+","+i.Ho()+","+i.qo()+","+e}}}{let e=function(t,s,i){const e=i.Yr(),n=i.Vr(),r=i.Hr()-e,h=i.qr()-n,o=i.Kr()-e,a=i.$r()-n,u=r*t,l=h*t,c=o*s,f=a*s;return[e+u+c,n+l+f]};e;const C=self.Ls,di=C.Xn(C.ju);C.jg.jS=class{constructor(t,s,i){this.zS=t,this.BS=s,this.US=i,this.za=NaN,this.Ba=NaN,this.LS=NaN,this.WS=NaN,this.QS=NaN,this.za=0,this.Ba=0,this.LS=0,this.WS=0,this.QS=0}JS(t,s,i,e){this.za=t,this.Ba=s,this.WS=i,this.QS=e}YS(){return this.za}VS(t){this.za!==t&&(this.za=t,this.zS.HS())}qS(){return this.Ba}ZS(t){this.Ba!==t&&(this.Ba=t,this.zS.HS())}XS(){return this.LS}KS(t){this.LS!==t&&(this.LS=Math.max(t,0),this.zS.HS())}$S(){return this.WS}tT(t){this.WS=t}sT(){return this.QS}iT(t){this.QS=t}eT(t,s,i){[this.za,this.Ba]=e(t.za,t.Ba,s),this.LS=t.LS,this.WS=C.Lt(i.uu(),i.cu(),t.WS),this.QS=C.Lt(i.lu(),i.fu(),t.QS)}nT(t,s,i){[this.za,this.Ba]=e(t.za,t.Ba,s),this.LS=t.LS,[this.WS,this.QS]=e(t.WS,t.QS,i)}rT(){return{x:this.YS(),y:this.qS(),z:this.XS(),u:this.$S(),v:this.sT()}}hT(t){this.VS(t.x),this.ZS(t.y),t.hasOwnProperty("z")&&this.KS(t.z),this.tT(t.u),this.iT(t.v)}oT(){return this.zS}aT(){return this.BS}uT(){return this.US}},C.jg.lT=class{constructor(i,t,s){if(i<2||t<2)throw new Error("invalid mesh size");this.cT=i,this.fT=t,this.dT=s||null,this.pT=[],this.mT=0,this.gT=0,this.yT=1,this.MT=1,this.wT=0,this.ST=!1;const e=i-1,n=t-1;for(let s=0;s<t;++s){const r=[];for(let t=0;t<i;++t){const h=C.Xn(C.jg.jS,this,t,s),o=t/e,a=s/n;h.JS(o,a,o,a),r.push(h)}this.pT.push(r)}}Kn(){C.Nh(this.pT)}TT(){return this.cT}bT(){return this.fT}vT(){return this.dT}xT(){return this.pT}HS(){this.ST=!0}IT(){if(this.ST){let t=1/0,s=1/0,i=-1/0,e=-1/0,n=0;for(const r of this.pT)for(const h of r){const o=h.YS(),a=h.qS();t=Math.min(t,o),s=Math.min(s,a),i=Math.max(i,o),e=Math.max(e,a),n=Math.max(n,h.XS())}this.mT=t,this.gT=s,this.yT=i,this.MT=e,this.wT=n,this.ST=!1}}CT(){return this.IT(),this.mT}GT(){return this.IT(),this.gT}NT(){return this.IT(),this.yT}ET(){return this.IT(),this.MT}DT(){return this.IT(),this.wT}_T(){return 0<this.DT()}AT(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.cT||s<0||s>=this.fT?null:this.pT[s][t]}LT(t,i,e){const n=e instanceof C.Rect;if(t.TT()!==this.TT()||t.bT()!==this.bT())throw new Error("source mesh wrong size");const r=t.pT,h=this.pT;for(let t=0,s=h.length;t<s;++t){const o=r[t],a=h[t];for(let t=0,s=a.length;t<s;++t){const u=o[t],l=a[t];n?l.eT(u,i,e):l.nT(u,i,e)}}}OT(r){let h=this.pT,o=h[0];for(let t=1,s=h.length;t<s;++t){let i=h[t],e=o[0],n=i[0];for(let t=1,s=i.length;t<s;++t){const a=o[t],u=i[t];di.set(e.$S(),e.sT(),a.$S(),a.sT(),u.$S(),u.sT(),n.$S(),n.sT()),r.hw(e.YS(),e.qS(),e.XS(),a.YS(),a.qS(),a.XS(),u.YS(),u.qS(),u.XS(),n.YS(),n.qS(),n.XS(),di),e=a,n=u}o=i}}RT(o,a){a=a||((t,s,i)=>[t,s,i]);let t=this.pT,u=t[0];for(let r=1,h=t.length;r<h;++r){let i=t[r],e=u[0],n=i[0];for(let t=1,s=i.length;t<s;++t){const l=u[t],c=i[t],[f,d,p]=a(e.YS(),e.qS(),e.XS()),[m,g,y]=a(l.YS(),l.qS(),l.XS()),[M,w,S]=a(c.YS(),c.qS(),c.XS()),[T,b,v]=a(n.YS(),n.qS(),n.XS());o.rw(f,d,p,m,g,y),o.rw(f,d,p,M,w,S),o.rw(f,d,p,T,b,v),t===s-1&&o.rw(m,g,y,M,w,S),r===h-1&&o.rw(T,b,v,M,w,S),e=l,n=c}u=i}}PT(t){let i=.99999999,e=t.xl(),n=[],r=this.TT()-1,h=this.bT()-1,o=1/r,a=1/h,u=r-1,l=h-1,c=e[0],f=e[1],d=C.rr(Math.floor(c*r),0,u),p=C.rr(Math.floor(f*h),0,l),m=!0,g=0,y=0,M=0,w=-1,S=()=>{c=C.rr(C.Lt(c,g,M),0,1),f=C.rr(C.Lt(f,y,M),0,1),n.push(c,f)};for(let t=0,s=e.length;t<s;t+=2){c=e[t],f=e[t+1],n.push(c,f),d=C.rr(Math.floor(c*r),0,u),p=C.rr(Math.floor(f*h),0,l);const T=(t+2)%s;for(g=e[T],y=e[1+T],w=-1;;){if(1e6<n.length)throw new Error("Too many mesh poly points");const b=d*o,v=p*a,x=(d+1)*o,I=(p+1)*a;if(m=C.nh(c,f,b,v,x,v,x,I),0!==w&&0<=(M=C.eh(c,f,g,y,b,v,x,I,-.001))&&M<=i)S(),m=!m,w=0;else if(0<p&&2!==w&&0<=(M=C.eh(c,f,g,y,b,v,x,v,.001))&&M<=i)S(),p--,m=!1,w=4;else if(d<u&&3!==w&&0<=(M=C.eh(c,f,g,y,x,v,x,I,.001))&&M<=i)S(),d++,m=!1,w=1;else if(0<d&&1!==w&&0<=(M=C.eh(c,f,g,y,b,v,b,I,.001))&&M<=i)S(),d--,m=!0,w=3;else{if(!(p<l&&4!==w&&0<=(M=C.eh(c,f,g,y,b,I,x,I,.001))&&M<=i))break;S(),p++,m=!0,w=2}}}return C.Xn(C.wl,n)}kT(t,s){const i=this.FT(t);this.jT(i),s.Cl(i)}FT(t){const i=[],e=t.xl();for(let t=0,s=e.length;t<s;t+=2){const n=e[t],r=e[t+1],[h,o]=this.zT(n,r);i.push(h,o)}return i}zT(t,s){const i=this.TT()-1,e=this.bT()-1,n=1/i,r=1/e,h=C.rr(Math.floor(t*i),0,i-1),o=C.rr(Math.floor(s*e),0,e-1),a=h*n,u=o*r,l=(h+1)*n,c=(o+1)*r,f=this.AT(h,o),d=this.AT(h+1,o+1),p=C.nh(t,s,a,u,l,u,l,c),m=p?a+n:a,g=p?u:u+r,y=this.AT(h+(p?1:0),o+(p?0:1)),[M,w,S]=C.rh(t,s,a,u,m,g,l,c);return C.hh(M,w,S,f.YS(),f.qS(),f.XS(),y.YS(),y.qS(),y.XS(),d.YS(),d.qS(),d.XS())}jT(i){let e=[],n=i[0],r=i[1],h=n-i.at(-2),o=r-i.at(-1);for(let t=0,s=i.length;t<s;t+=2){const a=(t+2)%s,u=i[a],l=i[1+a],c=u-n,f=l-r,d=Math.abs(c)<1e-7&&Math.abs(h)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(c)===Math.sign(h);(!d&&!p&&.001<Math.abs(c/h-f/o)||0==c&&0==f)&&e.push(n,r),n=u,r=l,h=c,o=f}6<=e.length&&e.length<i.length&&C.Ah(i,e)}rT(){return{cols:this.TT(),rows:this.bT(),points:this.pT.map(t=>t.map(t=>t.rT()))}}hT(t){const i=this.TT(),e=this.bT();if(t.cols!==i||t.rows!==e)throw new Error("mesh data wrong size");const n=t.points;for(let s=0;s<e;++s){const r=n[s];for(let t=0;t<i;++t){const h=this.AT(t,s);h.hT(r[t])}}}}}{let d=function(t,s){let i,e,n,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,n=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,n=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{BT:i,UT:e,format:n,type:r}};d;const pi=self.Ls,mi=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),gi=new Set(["nearest","bilinear","trilinear"]),yi=new Set(["default","low","high"]),Mi=new Set(["clamp-to-edge","repeat","mirror-repeat"]),wi={WT:"clamp-to-edge",QT:"clamp-to-edge",JT:"trilinear",YT:0,VT:"rgba8",HT:!0,qT:"default",premultiplyAlpha:!0,ZT:!1,width:-1,height:-1},Si={premultiplyAlpha:!0,flipY:!1},Ti=new Set;pi.jg.XT=class{constructor(t){this.eS=t,this.KT=null,this.Am=0,this.Lm=0,this.$T=!0,this.t2="clamp-to-edge",this.s2="clamp-to-edge",this.i2="trilinear",this.e2=0,this.n2="rgba8",this.h2=!1,this.o2="default",this.td=0}a2(s,t){if(!("undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&s instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&s instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas||s instanceof ImageData||s instanceof ArrayBuffer||null===s))throw new Error("invalid texture source");if(t=Object.assign({},wi,t),this.KT)throw new Error("already created texture");if(this.t2=t.WT,this.s2=t.QT,this.i2=t.JT,this.e2=t.YT,this.n2=t.VT,this.h2=!!t.HT&&this.eS.Yw(),this.o2=t.qT,!Mi.has(this.t2)||!Mi.has(this.s2))throw new Error("invalid wrap mode");if(!gi.has(this.i2))throw new Error("invalid sampling");if(!mi.has(this.n2))throw new Error("invalid pixel format");if(!yi.has(this.o2))throw new Error("invalid mipmap quality");if(this.$T=!0,s instanceof ArrayBuffer||null===s||t.ZT){if(this.Am=t.width,this.Lm=t.height,s instanceof ArrayBuffer&&s.byteLength!==this.Am*this.Lm*4)throw new Error("ArrayBuffer wrong size")}else this.Am=s.width,this.Lm=s.height;if(this.Am<=0||this.Lm<=0)throw new Error("invalid texture data size");if(t.ZT){const o=pi.So(this.Am,this.Lm),a=o.getContext("2d");a.drawImage(s,0,0,this.Am,this.Lm),s=o}const i=pi.Nr(this.Am)&&pi.Nr(this.Lm),e=this.eS.u2();if(this.Am>e||this.Lm>e)throw new Error("texture data exceeds maximum texture size");const n=this.eS.l2(),r=this.eS.c2(),h=(this.KT=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.KT),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),d(this.n2,n));if(this.eS.f2()||i||!this.d2())if(2<=r){let t;t=this.h2?Math.floor(Math.log2(Math.max(this.Am,this.Lm))+1):1,n.texStorage2D(n.TEXTURE_2D,t,h.BT,this.Am,this.Lm),s instanceof ArrayBuffer?n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.Am,this.Lm,h.format,h.type,new Uint8Array(s)):null!==s&&n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,s)}else s instanceof ArrayBuffer?n.texImage2D(n.TEXTURE_2D,0,h.UT,this.Am,this.Lm,0,h.format,h.type,new Uint8Array(s)):null===s?n.texImage2D(n.TEXTURE_2D,0,h.UT,this.Am,this.Lm,0,h.format,h.type,null):n.texImage2D(n.TEXTURE_2D,0,h.UT,h.format,h.type,s);else{if(null===s)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((s=s instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(s),this.Am,this.Lm):s)instanceof ImageData){const c=pi.So(this.Am,this.Lm),f=c.getContext("2d");f.putImageData(s,0,0),s=c}const u=pi.So(pi.Er(this.Am),pi.Er(this.Lm)),l=u.getContext("2d");l.imageSmoothingEnabled="nearest"!==this.i2,l.drawImage(s,0,0,this.Am,this.Lm,0,0,u.width,u.height),n.texImage2D(n.TEXTURE_2D,0,h.UT,h.format,h.type,u)}null!==s&&this.m2(n),n.bindTexture(n.TEXTURE_2D,null),this.eS.g2(),this.td=1,Ti.add(this)}M2(t,s,i){if(i=Object.assign({},wi,i),this.KT)throw new Error("already created texture");if(this.t2=i.WT,this.s2=i.QT,this.i2=i.JT,this.n2=i.VT,this.h2=!!i.HT&&this.eS.Yw(),this.o2=i.qT,!Mi.has(this.t2)||!Mi.has(this.s2))throw new Error("invalid wrap mode");if(!gi.has(this.i2))throw new Error("invalid sampling");if(!mi.has(this.n2))throw new Error("invalid pixel format");if(!yi.has(this.o2))throw new Error("invalid mipmap quality");this.$T=!1,this.Am=Math.floor(t),this.Lm=Math.floor(s);const e=pi.Nr(this.Am)&&pi.Nr(this.Lm),n=this.eS.u2();if(this.Am<=0||this.Lm<=0)throw new Error("invalid texture size");if(this.Am>n||this.Lm>n)throw new Error("texture exceeds maximum texture size");if(!this.eS.f2()&&this.d2()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.eS.l2(),h=this.eS.c2(),o=(this.KT=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.KT),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),d(this.n2,r)),a=2<=h?o.BT:o.UT;r.texImage2D(r.TEXTURE_2D,0,a,this.Am,this.Lm,0,o.format,o.type,null),this.m2(r),r.bindTexture(r.TEXTURE_2D,null),this.eS.g2(),this.td=1,Ti.add(this)}w2(t){if("default"===this.o2)return this.$T?t.NICEST:t.FASTEST;if("low"===this.o2)return t.FASTEST;if("high"===this.o2)return t.NICEST;throw new Error("invalid mipmap quality")}d2(){return"clamp-to-edge"!==this.t2||"clamp-to-edge"!==this.s2}S2(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}m2(t){const s=pi.Nr(this.Am)&&pi.Nr(this.Lm);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.S2(t,this.t2)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.S2(t,this.s2)),"nearest"===this.i2)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.h2=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.eS.f2())&&this.h2){t.hint(t.GENERATE_MIPMAP_HINT,this.w2(t)),t.generateMipmap(t.TEXTURE_2D);const e="trilinear"===this.i2&&!this.eS.Hw();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.h2=!1;const i=this.eS.T2();i&&0<this.e2&&"nearest"!==this.i2&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.e2,this.eS.b2()))}v2(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.KT||this.td<=0)throw new Error("texture not created");if(this.$T)throw new Error("cannot update static texture");s=Object.assign({},Si,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,n=this.eS.c2(),r=this.eS.l2(),h=(r.bindTexture(r.TEXTURE_2D,this.KT),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY),d(this.n2,r)),o=2<=n?h.BT:h.UT;try{if(this.Am===i&&this.Lm===e){const a=pi.Nr(this.Am)&&pi.Nr(this.Lm);r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,t),(a||this.eS.f2())&&this.h2&&(r.hint(r.GENERATE_MIPMAP_HINT,this.w2(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.Am=i,this.Lm=e;const u=pi.Nr(this.Am)&&pi.Nr(this.Lm);if(!this.eS.f2()&&this.d2()&&!u)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,h.format,h.type,t),(u||this.eS.f2())&&this.h2&&(r.hint(r.GENERATE_MIPMAP_HINT,this.w2(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.eS.g2()}I2(){if(0<this.td)throw new Error("texture still has references");if(!this.KT)throw new Error("already deleted texture");Ti.delete(this);const t=this.eS.l2();t.deleteTexture(this.KT),this.KT=null}C2(){return!!this.KT}G2(){return this.KT}mS(){return this.eS}N2(){this.td++}E2(){if(this.td<=0)throw new Error("no more references");this.td--}D2(){return this.td}Jp(){return this.Am}im(){return this.Lm}_2(){return this.$T}A2(){let t=this.Am*this.Lm;switch(this.n2){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.h2&&(t+=Math.floor(t/3)),t}static kS(){Ti.clear()}static L2(){return Ti.values()}}}{const bi=self.Ls,vi=self.gs,In=vi.xs,xn=vi.Ss,xi=new Set(["nearest","bilinear","trilinear"]),Ii={JT:"trilinear",alpha:!0,depth:!1,O2:!0,R2:!0,P2:0},Ci=new Set;bi.jg.F2=class{constructor(t){this.eS=t,this.j2=null,this.z2=null,this.KT=null,this.B2=null,this.Am=0,this.Lm=0,this.U2=!0,this.i2="trilinear",this.W2=!0,this.Q2=!1,this.J2=!0,this.Y2=0,this.V2=xn.create(),this.H2=0,this.q2=0,this.Z2=0}X2(t,s,i){i=Object.assign({},Ii,i);const e=this.eS.c2();if(this.KT||this.B2)throw new Error("already created render target");if(this.i2=i.JT,this.W2=!!i.alpha,this.Q2=!!i.depth,this.J2=!!i.O2,this.U2=!!i.R2,this.Y2=i.P2,!xi.has(this.i2))throw new Error("invalid sampling");if(0<this.Y2&&(e<2||this.J2))throw new Error("invalid use of multisampling");if(e<2&&(this.J2=!0),this.Am=t,this.Lm=s,this.Am<=0||this.Lm<=0)throw new Error("invalid render target size");this.K2();const n=this.eS.l2();if(this.j2=n.createFramebuffer(),this.Q2&&(this.z2=n.createFramebuffer()),this.J2){this.KT=this.eS.tb(this.Am,this.Lm,{JT:this.i2,VT:this.W2?"rgba8":"rgb8",HT:!1});const h=this.KT.G2();n.bindFramebuffer(n.FRAMEBUFFER,this.j2),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,h,0),this.Q2&&(n.bindFramebuffer(n.FRAMEBUFFER,this.z2),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,h,0))}else{this.B2=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.B2);const o=this.W2?n.RGBA8:n.RGB8;if(0<this.Y2){const a=n.getInternalformatParameter(n.RENDERBUFFER,o,n.SAMPLES);if(a&&a[0]){const u=a[0];this.Y2>u&&(this.Y2=u)}else this.Y2=0}0===this.Y2?n.renderbufferStorage(n.RENDERBUFFER,o,this.Am,this.Lm):n.renderbufferStorageMultisample(n.RENDERBUFFER,this.Y2,o,this.Am,this.Lm),n.bindFramebuffer(n.FRAMEBUFFER,this.j2),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.B2),this.Q2&&(n.bindFramebuffer(n.FRAMEBUFFER,this.z2),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.B2)),n.bindRenderbuffer(n.RENDERBUFFER,null)}const r=this.eS.sb();this.Q2&&r&&(n.bindFramebuffer(n.FRAMEBUFFER,this.j2),this.eS.ib()?n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,r,0):n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r)),n.bindFramebuffer(n.FRAMEBUFFER,null),Ci.add(this)}eb(t,s){if(this.Am!==t||this.Lm!==s){this.Am=t,this.Lm=s,this.K2();const i=this.eS.l2(),e=(i.bindFramebuffer(i.FRAMEBUFFER,this.j2),this.KT?this.KT.v2(new ImageData(this.Am,this.Lm)):(i.bindRenderbuffer(i.RENDERBUFFER,this.B2),i.renderbufferStorage(i.RENDERBUFFER,this.W2?i.RGBA8:i.RGB8,this.Am,this.Lm),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.eS.sb());this.Q2&&e&&(this.eS.ib()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}}I2(){if(!this.KT&&!this.B2)throw new Error("already deleted render target");Ci.delete(this);const t=this.eS.l2(),s=(this.KT?(t.bindFramebuffer(t.FRAMEBUFFER,this.j2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.Q2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.z2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.eS.nb(this.KT),this.KT=null):this.B2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.j2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.Q2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.z2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.B2),this.B2=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.eS.c2()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.j2),this.Q2&&t.deleteFramebuffer(this.z2),this.eS.rb());s.hb=null,this.j2=s.ob=null}K2(){this.eS.uM(this.V2,this.Am/this.Lm),this.H2=this.eS.rM(),this.q2=this.eS.sM(),this.Z2=this.eS.eM()}ab(){return this.j2}ub(){return this.z2}mS(){return this.eS}lb(){return this.KT}cb(){return this.eS.rM()===this.H2&&this.eS.sM()===this.q2&&this.eS.eM()===this.Z2||this.K2(),this.V2}fb(){return"nearest"!==this.i2}pb(){return this.W2}mb(){return this.J2}gb(){return this.Q2}Jp(){return this.Am}im(){return this.Lm}yb(){return this.U2}Mb(){return this.Y2}wb(){const t={JT:this.i2,alpha:this.W2,O2:this.J2};return this.U2||(t.width=this.Am,t.height=this.Lm),t}Sb(t){return"nearest"!==(t=Object.assign({},Ii,t)).JT===this.fb()&&!!t.alpha===this.pb()&&!!t.depth===this.gb()&&!(2<=this.eS.c2()&&!!t.O2!==this.mb())&&("number"==typeof t.width||"number"==typeof t.height?!this.yb()&&this.Jp()===Math.floor(t.width)&&this.im()===Math.floor(t.height):this.yb())}Tb(){return this.KT?this.KT.G2():null}A2(){return this.KT?this.KT.A2():this.Am*this.Lm*(this.W2?4:3)}static async bb(t,s){const i=await t.vb(s,!0);return bi.vo(i)}static kS(){Ci.clear()}static xb(){return Ci.values()}static Ib(t,s){for(const i of Ci)i.yb()&&i.eb(t,s)}}}{const m=self.Ls,Gi=self.gs,In=Gi.xs,xn=Gi.Ss,Ni=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);m.jg.Cb=class extends m.jg.iS{static async Gb(t,s){const i=t.l2(),e=s.src,n=s.Nb,r=s.name,h=i.createShader(i.FRAGMENT_SHADER),o=(i.shaderSource(h,e),i.compileShader(h),i.createShader(i.VERTEX_SHADER)),a=(i.shaderSource(o,n),i.compileShader(o),i.createProgram()),u=(i.attachShader(a,h),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a),t.Eb());if(u?await t.Db(()=>i.getProgramParameter(a,u.COMPLETION_STATUS_KHR)):await m.Th(5),!i.getShaderParameter(h,i.COMPILE_STATUS)){const c=i.getShaderInfoLog(h);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+c)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const f=i.getShaderInfoLog(o);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const d=i.getProgramInfoLog(a);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+d)}const l=m._d(i.getProgramInfoLog(a)||"").trim();return l&&!m.Nd(l)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,l),i.deleteShader(h),i.deleteShader(o),a}static async _b(t,s){const i=await m.jg.Cb.Gb(t,s);return new m.jg.Cb(t,i,s)}constructor(t,s,i){super(t,i);const e=t.l2(),n=t.rb(),r=(t.Uw(),e.useProgram(s),this.Ab=e,this.ES=s,this.Lb="<default-device-transform>"===i.name,e.getAttribLocation(s,"aPos")),h=e.getAttribLocation(s,"aTex"),o=(this.Ob=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.Rb),e.vertexAttribPointer(r,t.zw(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==h&&(e.bindBuffer(e.ARRAY_BUFFER,t.Pb),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(h)),-1!==this.Ob&&(e.bindBuffer(e.ARRAY_BUFFER,t.kb),e.vertexAttribPointer(this.Ob,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.Ob)),e.bindBuffer(e.ARRAY_BUFFER,null),this.Fb=new m.jg.jb(this,"matP","mat4"),this.zb=new m.jg.jb(this,"matMV","mat4"),this.Bb=new m.jg.jb(this,"color","vec4"),this.Ub=new m.jg.jb(this,"samplerFront","sampler"),this.Wb=new m.jg.jb(this,"pointTexStart","vec2"),this.Qb=new m.jg.jb(this,"pointTexEnd","vec2"),this.Jb=new m.jg.jb(this,"zElevation","float"),this.Yb=new m.jg.jb(this,"tileSize","vec2"),this.Vb=new m.jg.jb(this,"tileSpacing","vec2"),this.Hb=new m.jg.jb(this,"color2_","vec4"),this.qb=new m.jg.jb(this,"outlineThickness","float"),this.Zb=new m.jg.jb(this,"samplerBack","sampler"),this.Xb=new m.jg.jb(this,"samplerDepth","sampler"),this.Kb=new m.jg.jb(this,"destStart","vec2"),this.$b=new m.jg.jb(this,"destEnd","vec2"),this.tv=new m.jg.jb(this,"srcStart","vec2"),this.sv=new m.jg.jb(this,"srcEnd","vec2"),this.nv=new m.jg.jb(this,"srcOriginStart","vec2"),this.rv=new m.jg.jb(this,"srcOriginEnd","vec2"),this.hv=new m.jg.jb(this,"pixelSize","vec2"),this.ov=new m.jg.jb(this,"seconds","float"),this.av=new m.jg.jb(this,"devicePixelRatio","float"),this.uv=new m.jg.jb(this,"layerScale","float"),this.lv=new m.jg.jb(this,"layerAngle","float"),this.cv=new m.jg.jb(this,"layoutStart","vec2"),this.dv=new m.jg.jb(this,"layoutEnd","vec2"),this.pv=new m.jg.jb(this,"zNear","float"),this.mv=new m.jg.jb(this,"zFar","float"),this.gv=!!(this.hv.yv()||this.ov.yv()||this.Zb.yv()||this.Kb.yv()||this.$b.yv()||this.tv.yv()||this.sv.yv()||this.nv.yv()||this.rv.yv()||this.av.yv()||this.uv.yv()||this.lv.yv()||this.cv.yv()||this.dv.yv()),i.parameters||[]);this.Mv=[],this.dS=this.hv.yv()||this.tv.yv()||this.sv.yv()||this.nv.yv()||this.rv.yv(),this.wv=!1,this.Sv=!1,this.Bb.Tv(1,1,1,1),this.Hb.Tv(1,1,1,1),this.Ub.bv(0),this.Zb.bv(1),this.Xb.bv(2),this.Wb.vv(0,0),this.Qb.vv(1,1),this.Jb.xv(0),this.Yb.vv(0,0),this.Vb.vv(0,0),this.Kb.vv(0,0),this.$b.vv(1,1),this.tv.vv(0,0),this.sv.vv(0,0),this.nv.vv(0,0),this.rv.vv(0,0),this.hv.vv(0,0),this.av.xv(1),this.pv.xv(t.sM()),this.mv.xv(t.eM()),this.uv.xv(1),this.lv.xv(0),this.ov.xv(0),this.cv.vv(0,0),this.dv.vv(0,0),this.qb.xv(1);for(const u of o){const l=u[0],c=u[2],f=new m.jg.jb(this,l,c);"color"===c?f.Iv(0,0,0):f.xv(0),this.Mv.push(f)}this.Lb?this.Cv(n.Gv):(this.Nv(n.Gv,!0),this.Ev(n.Dv,!0));const a=n._v;e.useProgram(a?a.ES:null)}Kn(){this.Ab.deleteProgram(this.ES),this.ES=null,this.eS.mM(this),this.Ab=null,super.Kn()}Av(){return this.Ab}Lv(){return this.ES}Ov(){return this.Mv.length}Rv(t){return t<0||t>=this.Mv.length?null:this.Mv[t].Pv()}kv(i){for(let t=0,s=i.length;t<s;++t)if(!this.Mv[t].Fv(i[t]))return!1;return!0}jv(i){for(let t=0,s=i.length;t<s;++t)this.Mv[t].zv(i[t])}Bv(t,s,i,e,n,r,h,o,a,u){return!this.Zb.yv()&&!(this.hv.yv()&&!this.hv.Uv(n,r)||this.Kb.yv()&&!this.Kb.Uv(t.uu(),t.lu())||this.$b.yv()&&!this.$b.Uv(t.cu(),t.fu())||this.av.yv()&&!this.av.Wv(h)||this.uv.yv()&&!this.uv.Wv(o)||this.lv.yv()&&!this.lv.Wv(a)||this.tv.yv()&&!this.tv.Uv(s.uu(),s.lu())||this.sv.yv()&&!this.sv.Uv(s.cu(),s.fu())||this.nv.yv()&&!this.nv.Uv(i.uu(),i.lu())||this.rv.yv()&&!this.rv.Uv(i.cu(),i.fu())||this.cv.yv()&&!this.cv.Uv(e.uu(),e.lu())||this.dv.yv()&&!this.dv.Uv(e.lu(),e.fu())||this.ov.yv()&&!this.ov.Wv(u))}Qv(t,s,i,e,n,r,h,o,a,u){this.Zb.yv()||(this.hv.yv()&&this.hv.Jv(n,r),this.Kb.yv()&&this.Kb.Jv(t.uu(),t.lu()),this.$b.yv()&&this.$b.Jv(t.cu(),t.fu()),this.av.yv()&&this.av.Yv(h),this.uv.yv()&&this.uv.Yv(o),this.lv.yv()&&this.lv.Yv(a),this.tv.yv()&&this.tv.Jv(s.uu(),s.lu()),this.sv.yv()&&this.sv.Jv(s.cu(),s.fu()),this.nv.yv()&&this.nv.Jv(i.uu(),i.lu()),this.rv.yv()&&this.rv.Jv(i.cu(),i.fu()),this.cv.yv()&&this.cv.Jv(e.uu(),e.lu()),this.dv.yv()&&this.dv.Jv(e.lu(),e.fu()),this.ov.yv()&&this.ov.Yv(u))}Nv(t,s){this.wv&&!s||this.Lb||(this.Fb.yv()&&this.Fb.Vv(t),this.wv=!0)}Hv(){this.wv=!1}Ev(t,s){this.Sv&&!s||this.Lb||(this.zb.yv()&&this.zb.Vv(t),this.Sv=!0)}qv(){this.Sv=!1}Cv(t){if(!this.Lb)throw new Error("not device transform shader");this.Fb.Vv(t);const s=this.eS,i=s.Jp()/2,e=s.im()/2,n=s.dM(i,e,s.Zy(s.im()),i,e,0,s.im());this.zb.Vv(n)}Zv(t){this.Bb.yv()&&this.Bb.Xv(t[0],t[1],t[2],t[3])}static Kv(){return Ni}static $v(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static tx(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static ix(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static nx(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static hx(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static ox(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static ux(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static lx(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static mx(t,s,i){let e="";return 2<=t?e="#version 300 es\n":(s&&(e="#extension GL_EXT_frag_depth : enable\n"),i&&(e+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),e+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!i?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static gx(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static yx(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static Mx(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static wx(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Sx(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Tx(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static bx(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static vx(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static xx(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static Ix(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static Cx(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static Gx(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static Nx(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const Ei=self.Ls,Di=self.gs,xn=Di.Ss,_i=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);Ei.jg.jb=class{constructor(t,s,i){if(!_i.has(i))throw new Error("invalid uniform type");this.dT=t,this.Ab=this.dT.Av(),this.er=s,this.$c=i,this.Ex="color"===this.$c,this.Dx=this.Ab.getUniformLocation(this.dT.Lv(),s),this._x=!!this.Dx;const e=_i.get(i);this.Ax=new Float32Array(e),this.Lx=new Float32Array(e)}Kn(){this.dT=null,this.Ab=null,this.Dx=null}yv(){return this._x}Pv(){return this.$c}Ox(){return this.Ex}xv(t){this.yv()&&(this.Ax[0]=t,this.Lx.set(this.Ax),this.Ab.uniform1f(this.Dx,t))}bv(t){this.yv()&&(this.Ax[0]=t,this.Lx.set(this.Ax),this.Ab.uniform1i(this.Dx,t))}vv(t,s){this.yv()&&(this.Ax[0]=t,this.Ax[1]=s,this.Lx.set(this.Ax),this.Ab.uniform2f(this.Dx,t,s))}Iv(t,s,i){this.yv()&&(this.Ax[0]=t,this.Ax[1]=s,this.Ax[2]=i,this.Lx.set(this.Ax),this.Ab.uniform3f(this.Dx,t,s,i))}Tv(t,s,i,e){this.yv()&&(this.Ax[0]=t,this.Ax[1]=s,this.Ax[2]=i,this.Ax[3]=e,this.Lx.set(this.Ax),this.Ab.uniform4f(this.Dx,t,s,i,e))}Rx(t){t=Math.fround(t);const s=this.Ax;s[0]!==t&&(s[0]=t,this.Ab.uniform1f(this.Dx,t))}Px(t){const s=this.Ax;s[0]!==t&&this.Ab.uniform1i(this.Dx,s[0]=t)}kx(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.Ax;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.Ab.uniform2f(this.Dx,t,s))}Fx(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.Ax;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.Ab.uniform3f(this.Dx,t,s,i))}Xv(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const n=this.Ax;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(n[0]=t,n[1]=s,n[2]=i,n[3]=e,this.Ab.uniform4f(this.Dx,t,s,i,e))}Vv(t){const s=this.Ax;xn.j(s,t)||(Ei.Ch(s,t,0),this.Ab.uniformMatrix4fv(this.Dx,!1,t))}Fv(t){const s=this.Lx;return this.Ox()?s[0]===Math.fround(t.Yo())&&s[1]===Math.fround(t.Vo())&&s[2]===Math.fround(t.Ho()):s[0]===Math.fround(t)}zv(t){const s=this.Lx;this.Ox()?(s[0]=t.Yo(),s[1]=t.Vo(),s[2]=t.Ho()):s[0]=t}Wv(t){return this.Lx[0]===Math.fround(t)}Uv(t,s){const i=this.Lx;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}Yv(t){this.Lx[0]=t}Jv(t,s){const i=this.Lx;i[0]=t,i[1]=s}}}{const Ai=self.Ls,Li=self.gs,Wn=Li.Is,xn=Li.Ss;Ai.jg.jx=class{constructor(t){this.renderer=t,this.Dv=xn.create(),this.Gv=xn.create(),this.hb=null,this.ob=null,this.zx=!1,this.Bx=Wn.C(1,1,1,1),this._v=null,this.Ux=new Ai.Rect,this.clearColor=Ai.Xn(Ai.Ao,0,0,0,0)}},Ai.jg.Wx=class{constructor(t){const s=new ArrayBuffer(96);this.$c=0,this.Qx=t,this.Ab=t.renderer.l2(),this.Jx=0,this.Yx=0,this.Vx=null,this.Hx=new Float32Array(s,0,16),this.qx=new Float32Array(s,64,4),this.Zx=new Float32Array(s,80,4),this.Xx=[]}Kx(t,s){this.$c=1,this.Jx=t,this.Yx=s}$x(){const t=this.Ab;t.drawElements(t.TRIANGLES,this.Yx,t.UNSIGNED_SHORT,this.Jx)}tI(t){this.$c=2,this.Vx=t}sI(){const t=this.Ab,s=this.Vx;t.bindTexture(t.TEXTURE_2D,s?s.G2():null)}iI(t){this.$c=3,t.Xo(this.qx,0)}eI(){const t=this.qx,s=this.Qx;Wn.I(s.Bx,t),s._v.Zv(t)}nI(t){this.$c=21,t.Xo(this.qx,0)}rI(){const t=this.qx,s=this.Qx._v;s.Hb.yv()&&s.Hb.Xv(t[0],t[1],t[2],t[3])}hI(t,s){this.$c=4,this.Jx=t,this.Yx=s}oI(){this.Ab.blendFunc(this.Jx,this.Yx)}aI(t,s,i,e){this.$c=5;const n=this.qx;n[0]=t,n[1]=s,n[2]=i,n[3]=e}uI(){const t=this.qx;this.Ab.viewport(t[0],t[1],t[2],t[3])}lI(t){this.$c=6,xn.I(this.Hx,t)}cI(){const t=this.Qx,i=t.renderer.gy,e=t._v,n=this.Hx;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.Nv(n,!0):r.Hv()}xn.I(t.Gv,n)}fI(t){this.$c=7,xn.I(this.Hx,t)}dI(){const t=this.Qx,i=t.renderer.gy,e=t._v,n=this.Hx;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.Ev(n,!0):r.qv()}xn.I(t.Dv,n)}pI(t){this.$c=8,this.Vx=t}mI(){const t=this.Ab,s=this.Vx,i=this.Qx;s?(i.hb=s.ab(),i.ob=s.ub(),i.zx&&i.ob?t.bindFramebuffer(t.FRAMEBUFFER,i.ob):t.bindFramebuffer(t.FRAMEBUFFER,i.hb)):(i.hb=null,i.ob=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}gI(t){this.$c=9,t.Xo(this.Hx,0)}yI(t,s,i,e){this.$c=9;const n=this.Hx;n[0]=t,n[1]=s,n[2]=i,n[3]=e}MI(){const t=this.Ab,s=this.Hx,i=this.Qx,e=i.clearColor,n=s[0],r=s[1],h=s[2],o=s[3];e.ea(n,r,h,o)||(t.clearColor(n,r,h,o),e.ko(n,r,h,o)),t.clear(t.COLOR_BUFFER_BIT)}wI(t){this.$c=15,t.Xo(this.Hx,0)}SI(){const t=this.Hx;this.Qx.Ux.set(t[0],t[1],t[2],t[3])}TI(t,s){this.$c=10,this.Jx=t,this.Yx=1,this.Hx[0]=s}bI(){const t=this.Ab,s=this.Qx,i=s.renderer,e=i.wy,n=(t.useProgram(e.ES),e.Nv(s.Gv,!1),e.Ev(s.Dv,!1),s.Ux),r=(e.Wb.yv()&&e.Wb.kx(n.uu(),n.lu()),e.Qb.yv()&&e.Qb.kx(n.cu(),n.fu()),this.Hx[0]);if(e.Jb.yv()&&e.Jb.Rx(r),e.Bb.yv()){const h=s.Bx;e.Bb.Xv(h[0],h[1],h[2],h[3])}t.drawArrays(t.POINTS,this.Jx/4,this.Yx),t.useProgram(s._v.ES)}vI(t){this.$c=11,this.Vx=t}xI(){const t=this.Ab,s=this.Qx,i=this.Vx;if(s._v=i,t.useProgram(i.ES),i.Nv(s.Gv,!1),i.Ev(s.Dv,!1),i.Bb.yv()){const e=s.Bx;i.Bb.Xv(e[0],e[1],e[2],e[3])}}II(){this.$c=12}CI(){const t=this.Qx._v,s=this.Ab,i=this.Hx,e=this.qx,n=this.Zx;if(t.Zb.yv()){const r=this.Qx.renderer,h=this.Vx;r.GI!==h&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,h?h.G2():null),r.GI=h,s.activeTexture(s.TEXTURE0))}t.hv.yv()&&t.hv.kx(i[0],i[1]),t.Kb.yv()&&t.Kb.kx(i[2],i[3]),t.$b.yv()&&t.$b.kx(i[4],i[5]),t.av.yv()&&t.av.Rx(this.Yx),t.uv.yv()&&t.uv.Rx(i[6]),t.lv.yv()&&t.lv.Rx(i[7]),t.tv.yv()&&t.tv.kx(i[12],i[13]),t.sv.yv()&&t.sv.kx(i[14],i[15]),t.nv.yv()&&t.nv.kx(n[0],n[1]),t.rv.yv()&&t.rv.kx(n[2],n[3]),t.cv.yv()&&t.cv.kx(e[0],e[1]),t.dv.yv()&&t.dv.kx(e[2],e[3]),t.ov.yv()&&t.ov.Rx(this.Jx)}NI(){this.$c=13}EI(){const t=this.Qx._v,i=t.Mv,e=this.Xx;for(let t=0,s=i.length;t<s;++t){const n=i[t],r=e[t];n.Ox()?n.Fx(r.Yo(),r.Vo(),r.Ho()):n.Rx(r)}}DI(t){this.$c=14,this.Vx=t}_I(){const t=this.Ab,s=this.Vx,i=this.Qx.hb;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}AI(t,s,i){this.$c=17;const e=this.Hx,n=this.Qx.renderer,r=(e[0]=t.Jp(),e[1]=t.im(),e[2]=(s||n).Jp(),e[3]=(s||n).im(),e[4]=t.fb()?1:0,e[5]="stretch"===i,this.Xx);Ai.Nh(r),r.push(t.ab()),r.push(s?s.ab():null)}LI(){const t=this.Hx,s=this.Xx,i=this.Ab,e=t[0],n=t[1],r=t[2],h=t[3],o=0!==t[4],a=0!==t[5],u=s[0],l=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,u),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,l),a)i.blitFramebuffer(0,0,e,n,0,0,r,h,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const c=Math.min(e,r),f=Math.min(n,h),d=Math.max(n-h,0),p=Math.max(h-n,0);i.blitFramebuffer(0,d,c,f+d,0,p,c,f+p,i.COLOR_BUFFER_BIT,i.NEAREST)}}OI(t){this.$c=18,this.Vx=t}RI(){this.Vx.kI(),this.Vx=null}FI(t){this.$c=19,this.Vx=t}jI(){this.Vx.zI(),this.Vx=null}BI(t,s,i){this.$c=20;const e=this.Hx;e[0]=t,e[1]=s,e[2]=i}UI(){const t=this.Qx._v,s=this.Hx;t.hv.yv()&&t.hv.kx(s[0],s[1]),t.qb.yv()&&t.qb.Rx(s[2])}WI(t,s,i,e,n,r,h){this.$c=16;const o=this.Hx;t.Xo(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=n/i,o[8]=r/s,o[9]=h/i}QI(){const t=this.Qx._v,s=this.Hx;t.tv.yv()&&t.tv.kx(s[0],s[1]),t.hv.yv()&&t.hv.kx(s[4],s[5]),t.Yb.yv()&&t.Yb.kx(s[6],s[7]),t.Vb.yv()&&t.Vb.kx(s[8],s[9])}JI(t,s,i,e,n,r,h){this.$c=29;const o=this.Hx;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=n,o[5]=r,o[6]=h}YI(){const t=this.Qx._v,s=this.Hx;t.hv.yv()&&t.hv.kx(s[0],s[1]),t.Yb.yv()&&t.Yb.kx(s[2],s[3]),t.qb.yv()&&t.qb.Rx(s[4]),t.Vb.yv()&&t.Vb.kx(s[5],s[6])}VI(t){this.$c=22,this.Jx=t?1:0}HI(){const t=this.Ab,s=0!==this.Jx;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}qI(t){this.$c=23,this.Jx=t?1:0}ZI(){const t=this.Ab;0===this.Jx?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}XI(t){this.$c=24,this.Jx=t?1:0}KI(){const t=this.Ab,s=this.Qx,i=s.renderer,e=0!==this.Jx;s.zx=e,t.activeTexture(t.TEXTURE2),e?(s.ob&&t.bindFramebuffer(t.FRAMEBUFFER,s.ob),t.bindTexture(t.TEXTURE_2D,i.sb())):(t.bindTexture(t.TEXTURE_2D,null),s.ob&&t.bindFramebuffer(t.FRAMEBUFFER,s.hb)),t.activeTexture(t.TEXTURE0)}$I(){this.$c=25}tC(){const t=this.Ab;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}sC(){this.$c=26}iC(){const t=this.Ab;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}eC(){this.$c=27}nC(){const t=this.Ab;t.disable(t.STENCIL_TEST)}rC(t,s,i,e,n){this.$c=28,this.Jx=t?1:0;const r=this.Hx;r[0]=s,r[1]=i,r[2]=e,r[3]=n}hC(){const t=this.Ab,s=this.Hx;1===this.Jx?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}oC(){switch(this.$c){case 1:return void this.$x();case 2:return void this.sI();case 3:return void this.eI();case 4:return void this.oI();case 5:return void this.uI();case 6:return void this.cI();case 7:return void this.dI();case 8:return void this.mI();case 9:return void this.MI();case 10:return void this.bI();case 11:return void this.xI();case 12:return void this.CI();case 13:return void this.EI();case 14:return void this._I();case 15:return void this.SI();case 16:return void this.QI();case 17:return void this.LI();case 18:return void this.RI();case 19:return void this.jI();case 20:return void this.UI();case 21:return void this.rI();case 22:return void this.HI();case 23:return void this.ZI();case 24:return void this.KI();case 25:return void this.tC();case 26:return void this.iC();case 27:return void this.nC();case 28:return void this.hC();case 29:return void this.YI()}}}}{let G=function(t,s,i,e,n,r){s?t.strokeRect(i,e,n,r):t.fillRect(i,e,n,r)},t=function(t){return t*(4/3)},o=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};G,t,o;const Oi=self.Ls,Ri=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Pi={timeout:60},ki=new Oi.Ao(0,0,0,1),Fi=new Set(["left","center","right"]),ji=new Set(["top","center","bottom"]),zi=new Set(["word","cjk","character"]),Bi=new Set(["ltr","rtl"]),Ui=new Set;Oi.FontManager&&Oi.FontManager.addEventListener("fontload",t=>{const s=t.font.kc();for(const i of Ui)(i.aC()||Oi.cn(i.uC(),s))&&i.lC()});let s=!1,i=!1;Oi.jg.sS=class{constructor(t,s){s=Object.assign({},Pi,s),this.eS=t,this.cC="Arial",this.fC=16,this.dC=1,this.pC=0,this.mC=!1,this.gC=!1,this.yC="black",this.MC=!1,this.zp=null,this.wC=!0,this.SC=null,this.TC=new Set,this.bC="left",this.vC="top",this.Yc="",this.xC=null,this.IC=Oi.Xn(Oi.Fp),this.CC="word",this.GC="ltr",this.NC=!1,this.EC=!1,this.DC=!1,this._C=-1,this.AC=0,this.LC=0,this.OC=0,this.Am=0,this.Lm=0,this.RC=1,this.PC=null,this.kC=null,this.FC=null,this.jC=null,this.zC=-1,this.BC=-1,this.UC="",this.WC="",this.QC="",this.JC=1,this.YC=1,this.VC=t=>this.HC(t),this.KT=null,this.qC=new Oi.Rect,this.ZC=1,this.XC=new Oi.Wf(()=>{this.KC(),this.$C(8,8)},s.timeout),this.tG=null,this.sG=!1,Ui.add(this)}Kn(){this.SC=null,this.TC.clear(),this.zp=null,this.xC=null,this.PC=null,this.kC=null,this.FC=null,this.jC=null,this.VC=null,this.XC.Kn(),this.tG=null,this.KC(),this.IC.zl(),this.IC=null,this.eS=null,this.sG=!0,Ui.delete(this)}iG(){this.DC=!0}eG(){this.iG(),this.EC=!0}lC(){this.eG(),this.NC=!0}nG(t){if(this.MC!==(t=!!t)){this.MC=t;const s=this.MC?"alphabetic":"top";this.kC&&(this.kC.textBaseline=s),this.FC&&(this.FC.textBaseline=s),this.lC()}}aC(){return this.MC}Wp(t){this.zp!==t&&(this.zp=t,this.IC.Wp(t),this.zp&&this.zp.Cg()&&this.zp.Gg().then(()=>this.iG()),this.lC())}rG(t){this.wC!==(t=!!t)&&(this.wC=t,this.iG())}hG(t){this.cC!==(t=t||"serif")&&(this.cC=t,this.lC())}uC(){return this.cC}oG(t){this.fC!==(t=t<.1?.1:t)&&(this.fC=t,this.lC())}aG(){return this.fC}uG(t){this.dC!==t&&(this.dC=t,this.lC())}lG(t){this.pC!==t&&(this.pC=t,this.eG())}cG(){return this.pC}fG(t){this.mC!==(t=!!t)&&(this.mC=t,this.lC())}dG(){return this.mC}pG(t){this.gC!==(t=!!t)&&(this.gC=t,this.lC())}mG(){return this.gC}gG(t){t=Math.floor(t),this._C!==t&&(this._C=t,this.iG())}yG(){return this._C}MG(t,s){let i=[];(this.mC||s.Hm("b"))&&i.push("bold"),(this.gC||s.Hm("i"))&&i.push("italic");const e=s.Vm("size"),n=(e?parseFloat(e._p):this.fC)*this.dC;i.push(t?n+"pt":n*this.wG()+"pt");let r=this.cC,h=s.Vm("font");return h&&h._p&&(r=h._p,this.SC)&&!this.TC.has(r)&&(this.SC(r),this.TC.add(r)),r&&(Ri.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}PS(t){t instanceof Oi.Ao&&(t=t.la()),this.yC!==t&&(this.yC=t,this.iG())}SG(t,s,i){ki.Fo(t,s,i),this.PS(ki)}TG(t){if(!Fi.has(t))throw new Error("invalid horizontal alignment");this.bC!==t&&(this.bC=t,this.eG())}bG(){return this.bC}vG(t){if(!ji.has(t))throw new Error("invalid vertical alignment");this.vC!==t&&(this.vC=t,this.eG())}xG(){return this.vC}IG(t){if(!zi.has(t))throw new Error("invalid word wrap mode");this.CC!==t&&(this.CC=t,this.lC())}CG(){return this.CC}GG(t){if(!Bi.has(t))throw new Error("invalid text direction");this.GC!==t&&(this.GC=t,this.kC&&(this.kC.direction=this.GC),this.FC&&(this.FC.direction=this.GC),this.lC())}NG(){return this.GC}qc(t){this.Yc!==t&&(this.Yc=t,this.lC())}EG(){return this.Yc}wG(){return this.ZC*this.RC*self.devicePixelRatio}DG(r,h,o){if(void 0===o&&(o=1),!(r<=0||this.LC===r&&this.OC===h&&this.RC===o)){let t=this.LC,s=(this.LC=r,this.OC=h,this.RC=o,self.devicePixelRatio),i=(this.Am=this.LC*this.RC*s,this.Lm=this.OC*this.RC*s,Math.max(this.Am,this.Lm)),e=Math.min(this.eS.u2(),4096),n=1;e<i&&(n=e/i,this.Am=Math.min(this.Am*n,e),this.Lm=Math.min(this.Lm*n,e)),this.ZC=n,this.LC!==t?this.lC():this.eG()}}Jp(){return this.Am}im(){return this.Lm}_G(){return this.RC}AG(){return this.LG(),this.IC.Dm()}OG(){return this.LG(),this.IC._m()+this.IC.Up()*(this.pC+4)-this.pC}PG(){this.LG();let t=0;for(const s of this.IC.Bp())for(const i of s.um())t+=i.lm();return t}lb(){return this.XC.Hf(),this.kG(),this.KT}FG(t,s){this.LG();const i=this.wG(),e=this.IC.Bp();for(const n of e){const r=n.rm()*i;if(s>=n.Qm()-n.im()*i+r&&s<n.Qm()+r)for(const h of n.um())if(t>=h.Um()&&t<h.Um()+h.Jp()*i)return h}return null}*jG(t){this.LG();const s=this.IC.Bp();for(const i of s)for(const e of i.um()){const n=e.Vm("tag");n&&Oi.cn(n._p,t)&&(yield e)}}zG(t,s){for(const i of this.jG(t)){if(0===s)return i;--s}return null}BG(t){let s=0;for(const i of this.jG(t))++s;return s}kG(){this.KT&&!this.DC&&!this.EC&&!this.NC||this.sG||this.Am<=0||this.Lm<=0||(this.DC=!1,this.UG())}UG(){this.sG||(this.LG(),this.$C(Math.max(Oi.Er(Math.ceil(this.Am)),128),Math.max(Oi.Er(Math.ceil(this.Lm)),64)),this.WG(),this.QG(),this.XC.Hf())}$C(t,s){this.PC||(this.PC=Oi.So(16,16));let i=!1;this.zC===t&&this.BC===s||(this.zC=t,this.BC=s,this.PC.width=t,this.PC.height=s,i=!0),this.kC||(this.kC=this.PC.getContext("2d"),i=!0),i?(this.kC.textBaseline=this.MC?"alphabetic":"top",this.kC.direction=this.GC,this.kC.font=this.UC,this.kC.fillStyle=this.QC,this.kC.strokeStyle=this.QC,this.kC.globalAlpha=this.JC,this.kC.lineWidth=this.YC):this.kC.clearRect(0,0,t,s)}JG(){this.FC||(this.FC=Oi.So(16,16).getContext("2d"),this.jC=Oi.So(16,16).getContext("2d"),this.FC.textBaseline=this.MC?"alphabetic":"top",this.jC.textBaseline="top",this.FC.direction=this.GC,this.jC.direction=this.GC)}YG(t){this.WC!==t&&(this.WC=t,this.FC.font=t,this.jC.font=t)}VG(){if(!s){s=!0,this.JG();const t=this.FC.measureText("test");i="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return i}LG(){this.HG(),this.qG()}HG(){this.NC&&(this.JG(),!this.MC||this.xC&&this.xC.toString()===this.Yc||(this.xC=new Oi.xn(this.Yc,{Mp:!0})),this.IC.Fp(this.MC?this.xC.Ep():this.Yc,this.VC,this.LC,this.CC,0),this.NC=!1)}qG(){this.EC&&(this.ZG(),this.EC=!1)}HC(t){let s=t.Xp()?t.wm().join(""):" ",i=(this.YG(this.MG(!0,t)),t.Vm("size")),e=(i?parseFloat(i._p):this.fC)*this.dC,n=this.FC.measureText(s),r=0;if(this.MC&&this.VG()){const h=this.jC.measureText(s);r=n.fontBoundingBoxAscent-h.fontBoundingBoxAscent}return{width:n.width,height:4/3*e,fontBoundingBoxAscent:n.fontBoundingBoxAscent||0,fontBoundingBoxDescent:n.fontBoundingBoxDescent||0,Zp:r}}XG(t){this.UC!==t&&(this.UC=t,this.kC.font=t)}KG(t){this.QC!==t&&(this.QC=t,this.kC.fillStyle=t,this.kC.strokeStyle=t)}$G(t){this.JC!==t&&(this.JC=t,this.kC.globalAlpha=t)}tN(t){this.YC!==t&&(this.YC=t,this.kC.lineWidth=t)}ZG(){let e=this.wG(),n=(4+this.pC)*e,r=0,h=this.IC.Bp();if(0!==h.length){for(const s of h){s.Bm(NaN),s.Wm(NaN);for(const o of s.um())o.Bm(NaN),o.Wm(NaN)}let t=this.MC&&this.VG(),i=h[0].im()*e;if("center"===this.vC){const a=h.reduce((t,s)=>t+s.im()*e+n,0)-n;r=Math.max(this.Lm/2-a/2,0),t&&(i=h[0].hm()*e)}else if("bottom"===this.vC){const u=h.reduce((t,s)=>t+s.im()*e+n,0)-this.pC*e,l=t?h.at(-1).rm()*e:0;r=this.Lm-u-l-2}for(let t=0,s=h.length;t<s;++t){const c=h[t],f=c.im()*e,d=r;if(this.MC){if(r+=0===t?i:f,0<t&&r>this.Lm-4*e)break}else if(0<t&&r>=this.Lm-f)break;0<=d&&this.sN(c,r,e),this.MC||(r+=f),r+=n}}}sN(t,s,i){let e=0;"center"===this.bC?e=Math.floor((this.Am-t.Jp()*i)/2):"right"===this.bC&&(e=this.Am-t.Jp()*i),t.Bm(e),t.Wm(s);for(const n of"ltr"===this.GC?t.um():t.jm())this.iN(n,e,s,i),e+=n.Jp()*i}iN(t,s,i,e){const n=t.Vm("offsetx"),r=(s+=n?o(n._p,t.im())*e:0,t.Vm("offsety"));if(i+=r?o(r._p,t.im())*e:0,t.$p()){const h=t.Vm("iconoffsety");i+=h?o(h._p,t.im())*e:.2*t.im()*e}t.Bm(s),t.Wm(i)}WG(){this.kC.imageSmoothingEnabled=this.wC,this.kC.imageSmoothingQuality="high",this.AC=0;const t=this.wG(),s=this.IC.Bp();for(const i of s)this.eN(i,t)}eN(t,s){const i=t.Um(),e=t.Qm();if(Number.isFinite(i)&&Number.isFinite(e))for(const n of"ltr"===this.GC?t.um():t.jm())this.nN(n,s,t.im())}nN(h,o,a){const u=this.kC,l=h.Um(),c=h.Qm();if(Number.isFinite(l)&&Number.isFinite(c)){let t=a/16,s=h.Jp()*o,i=h.im()*o,e=h.im()/16,n=(4+this.pC)*o,r=h.Xp()?h.wm():null;if(-1!==this._C){if(this.AC>=this._C)return;h.Xp()&&this.AC+r.length>this._C&&(r=r.slice(0,this._C-this.AC),s=this.HC(h).width*o),this.AC+=h.lm()}const f=h.Vm("background"),d=h.Hm("u"),p=h.Hm("s");if((!h.Xp()||!Oi.Ed(r)||f||d||p)&&!h.Hm("hide")){const m=h.Vm("color"),g=h.Vm("opacity"),y=(this.$G(g?parseFloat(g._p)/100:1),f&&(this.KG(f._p),u.fillRect(l,c-i,s,i+n)),h.Vm("linethickness")),M=y?parseFloat(y._p):1,w=h.Hm("stroke");if(w&&this.tN(.5*e*M*this.wG()),h.Xp()){const S=r.join("");if(this.XG(this.MG(!1,h)),!w){this.tN(.5*e*M*this.wG());const T=h.Vm("outlineback");T&&(this.KG(T._p),this.rN(!0,S,l,c,s))}if(this.KG(m?m._p:this.yC),this.rN(w,S,l,c,s),!w){this.tN(.5*e*M*this.wG());const b=h.Vm("outline");b&&(this.KG(b._p),this.rN(!0,S,l,c,s))}}else if(h.$p()&&0<h.Jp()){const v=h.ig(this.zp);v&&u.drawImage(v,l,c-i,s,i)}if(this.KG(m?m._p:this.yC),d&&G(u,w,l,c+o*t,s,o*t*M),p){const x=c-i/4,I=o*e,C=x+I/2;u.fillRect(l,C-I*M/2,s,I*M)}}}}rN(t,s,i,e,n){"rtl"===this.GC&&(i+=n),t?"Gecko"===Oi.ei.li?this.kC.strokeText(s,i,e,n):this.kC.strokeText(s,i,e):"Gecko"===Oi.ei.li?this.kC.fillText(s,i,e,n):this.kC.fillText(s,i,e)}QG(){this.eS.hN()||(this.KT||(this.KT=this.eS.tb(this.PC.width,this.PC.height,{HT:!0,qT:"high"})),this.eS.oN(this.PC,this.KT),this.qC.set(0,0,this.Am/this.KT.Jp(),this.Lm/this.KT.im()),this.tG&&this.tG())}aN(){return this.qC}KC(){this.KT&&(this.eS.hN()||this.eS.nb(this.KT),this.KT=null)}static kS(){for(const t of Ui)t.KC()}static uN(){return Ui.values()}}}{const Wi=self.Ls;class Qi{constructor(t){this.Ab=t.l2(),this.lN=t.c2(),this.cN=t.fN(),this.dN=null,this.Vf=!1,this.pN=!1,this.mN=0,1===this.lN?this.dN=this.cN.createQueryEXT():this.dN=this.Ab.createQuery()}Kn(){this.gN(),this.Ab=null,this.cN=null,this.pN=!1}gN(){this.dN&&(1===this.lN?this.cN.deleteQueryEXT(this.dN):this.Ab.deleteQuery(this.dN),this.dN=null)}kI(){if(this.Vf)throw new Error("query already active");1===this.lN?this.cN.beginQueryEXT(this.cN.TIME_ELAPSED_EXT,this.dN):this.Ab.beginQuery(this.cN.TIME_ELAPSED_EXT,this.dN),this.Vf=!0}zI(){if(!this.Vf)throw new Error("query not active");1===this.lN?this.cN.endQueryEXT(this.cN.TIME_ELAPSED_EXT):this.Ab.endQuery(this.cN.TIME_ELAPSED_EXT),this.Vf=!1}yN(){if(this.dN&&!this.pN&&!this.Vf){let t;t=1===this.lN?this.cN.getQueryObjectEXT(this.dN,this.cN.QUERY_RESULT_AVAILABLE_EXT):this.Ab.getQueryParameter(this.dN,this.Ab.QUERY_RESULT_AVAILABLE);const s=this.Ab.getParameter(this.cN.GPU_DISJOINT_EXT);t&&!s&&(1===this.lN?this.mN=this.cN.getQueryObjectEXT(this.dN,this.cN.QUERY_RESULT_EXT):this.mN=this.Ab.getQueryParameter(this.dN,this.Ab.QUERY_RESULT),this.mN/=1e9,this.pN=!0),(t||s)&&this.gN()}}MN(){return this.pN}wN(){if(this.pN)return this.mN;throw new Error("no result available")}}Wi.jg.SN=class{constructor(t){this.eS=t,this.Uy=t.Ww(),this.Vf=!1,this.TN=null,this.bN=!1,this.vN=null,this.xN=[]}Kn(){for(const t of this.xN)t instanceof Qi&&t.Kn();Wi.Nh(this.xN),this.TN=null,this.vN=null,this.eS=null}kI(){if(this.Vf)throw new Error("query already active");const t=this.eS.IN();0<t.length?(this.bN=!0,this.TN=t.at(-1),this.TN.CN(),this.TN.xN.push(this)):(this.bN=!1,this.TN=null),this.Vf=!0,t.push(this),this.GN()}zI(){if(!this.Vf)throw new Error("query not active");const t=this.eS.IN().pop();if(t!==this)throw new Error("can only end most nested query");this.Vf=!1,this.CN(),this.TN&&(this.TN.GN(),this.TN=null)}GN(){this.vN=Wi.Xn(Qi,this.eS),this.xN.push(this.vN),this.vN.kI()}CN(){this.vN.zI(),this.vN=null}yN(){for(const t of this.xN)t.yN()}NN(){return this.bN}MN(){return this.xN.every(t=>t.MN())}wN(){return this.xN.reduce((t,s)=>t+s.wN(),0)}Ww(){return this.Uy}}}{const Ji=self.Ls;Ji.jg.EN=class{constructor(t,s=1e3){this.eS=t,this.DN=s,this._N=[],this.eS.AN(this)}Kn(){this.zl(),this.eS.LN(this),this.eS=null}zl(){for(const t of this._N)t.Kn();Ji.Nh(this._N)}ON(){const t=new Ji.jg.SN(this.eS);if(this._N.push(t),this._N.length>this.DN){const s=this._N.shift();s.Kn()}return t}RN(t){for(const s of this._N){if(s.Ww()>=t)return;if(s.NN())return;s.yN()}}PN(t,s){if(s<=t)return NaN;let i=0;for(const e of this._N){if(e.Ww()>=s)break;if(!(e.Ww()<t)){if(!e.MN())return NaN;i+=e.wN()}}return i}kN(i){for(let t=0,s=this._N.length;t<s;++t){const e=this._N[t];if(!(e.Ww()<i))return void(0<t&&this._N.splice(0,t));e.Kn()}}}}{let i=function(){n=-1;for(const t of e)t.FN()&&(t.resolve(),e.delete(t));0<e.size&&(n=self.requestAnimationFrame(i))},S=(i,self.Ls),t=self.gs,T=(t.xs,t.Is),y=t.Ss,r={powerPreference:"default",jN:!0,alpha:!1,depth:!1,zN:!1,BN:2,failIfMajorPerformanceCaveat:!1},h=new Set(["default","low-power","high-performance"]),c=new S.ju(0,0,1,0,1,1,0,1),M=y.create(),w=y.create(),b=new S.ju,v=new S.Rect,x=null,e=(S.isDebug&&(self.UN=function(){x?x.loseContext():console.warn("WEBGL_lose_context not supported")},self.WN=function(){x?x.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),n=-1;S.jg.QN=class extends S.jg.iy{constructor(t,s){if(super(s),s=Object.assign({},r,s),!h.has(s.powerPreference))throw new Error("invalid power preference");let i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat},e=null,n=0;if(2<=s.BN&&(e=t.getContext("webgl2",i),n=2),e||(e=t.getContext("webgl",i),n=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.Ab=e,this.JN=e.getContextAttributes(),this.YN=e.getParameter(e.VERSION),this.lN=n,this.VN=T.create(),this.HN=!1,this.qN=y.create(),this.ZN=!!s.depth,this.XN=!(!s.depth||!s.zN),this.KN=this.ZN,this.$N=!1,this.tE=null,this.sE=!0,this.iE=0,this.eE=0,this.Rb=null,this.Pb=null,this.nE=null,this.kb=null,this.rE=new Float32Array(8e3*this.zw()),this.hE=new Uint16Array(12e3),this.oE=new Float32Array(16e3),this.aE=new Float32Array(32e3),this.uE=0,this.lE=0,this.cE=0,this.fE=0,this.dE=null,this.pE=null,this.mE=[],this.gE=0,this.yE=0,this.ME=null,this.wE=0,this.Qx=S.Xn(S.jg.jx,this),this.SE=S.Xn(S.Ao,1,1,1,1),this.TE=null,this.GI=null,this.bE=0,this.vE=0,this.xE=new S.Rect,this.IE=S.Xn(S.Rect,0,0,-1,-1),this.CE=0,this.GE=-1,this.NE=0,this.EE=0,this.DE=0,this._E="(unavailable)",this.AE="(unavailable)",this.LE=[],this.OE=!1,this.RE=null,this.PE=null,this.kE=null,this.FE=null,this.jE=null,this.zE=null,this.BE=0,this.UE=!!s.jN,this.cN=null,this.WE=new Set,this.QE=[],this.Jy(this.hE)}qw(){return!0}async Hy(){super.Hy();const t=this.Ab,s=this.zw(),i=(this.SE.ko(1,1,1,1),this.TE=null,this.GI=null,this.uE=0,this.cE=0,this.fE=8e3*s-4*s,S.Nh(this.mE),this.gE=0,this.yE=0,this.dE=null,this.ME=null,this.xE.set(0,0,1,1),this.wE=0,this.Qx),e=(i._v=null,i.hb=null,i.ob=null,T.set(i.Bx,1,1,1,1),i.clearColor.ko(0,0,0,0),i.Ux.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.bE=t.ONE,this.vE=t.ONE_MINUS_SRC_ALPHA,this.JE(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.ZN?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.KN=this.ZN,this.$N=!1,this.kb=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.kb),t.bufferData(t.ARRAY_BUFFER,this.aE.byteLength,t.DYNAMIC_DRAW),this.Rb=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Rb),t.bufferData(t.ARRAY_BUFFER,this.rE.byteLength,t.DYNAMIC_DRAW),this.Pb=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Pb),t.bufferData(t.ARRAY_BUFFER,this.oE.byteLength,t.DYNAMIC_DRAW),this.nE=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.nE),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.hE,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.GE=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),n=(this.NE=e[0],this.EE=e[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),h=(this.DE=n&&r?Math.min(n.precision,r.precision):0,2048<this.EE&&(this.EE=2048),this.LE=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(h&&(this._E=t.getParameter(h.UNMASKED_VENDOR_WEBGL),this.AE=t.getParameter(h.UNMASKED_RENDERER_WEBGL)),this.RE=t.getExtension("KHR_parallel_shader_compile"),S.isDebug&&(x=t.getExtension("WEBGL_lose_context")),this.UE&&(1===this.c2()?this.cN=t.getExtension("EXT_disjoint_timer_query"):this.cN=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.PE=t.getExtension("EXT_texture_filter_anisotropic"),this.PE?this.BE=t.getParameter(this.PE.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.BE=0,this.c2()<2&&this.ZN&&this.XN&&(this.kE=t.getExtension("WEBGL_depth_texture"),!this.kE))throw new Error("no depth texture support");this.c2()<2&&(this.FE=t.getExtension("EXT_frag_depth"),this.jE=t.getExtension("OES_standard_derivatives"),this.zE=t.getExtension("EXT_shader_texture_lod"));let o=S.jg.Cb,a=o.$v(!1),u=o.ix(),l=a,c=o.Mx(),f=o.gx(),d=o.ox(),p=o.$v(!0),m=!1;this.ZN&&(this.c2()<2?this.FE&&(u=o.nx(),c=o.wx(),d=o.ux(),m=!0):(l=o.tx(),u=o.hx(),c=o.Sx(),f=o.yx(),d=o.lx(),p=o.tx(!0)));const g=o.mx(this.c2(),m,this.jE&&this.zE),y=2<=this.c2()?o.tx():a,M=[[u,l,"<default>"],[u,l,"<default-device-transform>"],[c,f,"<point>"],[o.Tx(),a,"<fill>"],[o.bx(),a,"<lineargradient>"],[o.vx(),a,"<penumbra>"],[o.Ix(),a,"<hardellipse>"],[o.Cx(),a,"<hardellipseoutline>"],[o.Gx(),a,"<smoothellipse>"],[o.Nx(),a,"<smoothellipseoutline>"],[o.xx(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],w=await Promise.all(M.map(t=>this.YE({src:t[0],Nb:t[1],name:t[2]})));this.My=w[0],this.pE=w[1],this.wy=w[2],this.by=w[3],this.vy=w[4],this.xy=w[5],this.Iy=w[6],this.Cy=w[7],this.Gy=w[8],this.Ny=w[9],this.Ey=w[10],this.Sy=w[11],this.Ty=w[12],this.MM()}async YE(t){const s=await S.jg.Cb._b(this,t);return this.pM(s),s}VE(){this.dE=null}DG(t,s,i){if(this.Am!==t||this.Lm!==s||i){this.Uw();const e=this.Ab,n=this.Qx;this.Am=t,this.Lm=s,this.HE(0,0,t,s),this.uM(this.qN,t/s),this.qE(this.qN),this.pE&&(e.useProgram(this.pE.Lv()),this.pE.Cv(this.hy),this.dE=this.pE,this.Qx._v=this.pE),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.TE=null,this.GI=null,this.ZN&&this.sE&&this.ZE(this.Am,this.Lm),this.ME&&this.ME.eb(this.Am,this.Lm),e.bindFramebuffer(e.FRAMEBUFFER,null),this.ME=null,n.hb=null,n.ob=null}}ZE(t,s){const i=this.Ab;this.tE&&this.iE===t&&this.eE===s||(this.XN?(this.tE&&i.deleteTexture(this.tE),this.tE=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.tE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),2<=this.c2()?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.kE&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.kE.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.tE&&i.deleteRenderbuffer(this.tE),this.tE=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.tE),i.renderbufferStorage(i.RENDERBUFFER,2<=this.lN?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.iE=t,this.eE=s)}XE(t,s){this.ZN&&(this.sE=!1,this.ZE(t,s))}KE(){this.ZN&&(this.sE=!0,this.ZE(this.Am,this.Lm))}HE(t,s,i,e){const n=this.VN;if(n[0]!==t||n[1]!==s||n[2]!==i||n[3]!==e){const r=this.$E();r.aI(t,s,i,e),T.set(n,t,s,i,e),this.yE=0}}nM(t){super.nM(t),this.uM(this.qN,this.Am/this.Lm)}tM(t){super.tM(t),this.uM(this.qN,this.Am/this.Lm)}iM(t){super.iM(t),this.uM(this.qN,this.Am/this.Lm)}qE(t){if(!y.j(this.hy,t)){const s=this.$E();s.lI(t),y.I(this.hy,t),this.yE=0,this.HN=!0}}tD(){let t,s,i,e=this.ME;i=(null===e?(t=this.qN,s=this.Jp(),this):(t=e.cb(),s=e.Jp(),e)).im(),this.qE(t),this.HE(0,0,s,i)}sD(t){if(!y.j(this.oy,t)){const s=this.$E();s.fI(t),y.I(this.oy,t),this.yE=0,this.HN=!0}}iD(){this.HN=!1}eD(){return this.HN}rb(){return this.Qx}$E(){const t=this.mE;return this.gE===t.length&&t.push(new S.jg.Wx(this.Qx)),t[this.gE++]}Uw(){0===this.gE||this.hN()||(this.nD(),this.rD(),this.gE=0,this.uE=0,this.lE=0,this.cE=0,this.yE=0)}nD(){const t=this.Ab;0<this.cE&&(t.bindBuffer(t.ARRAY_BUFFER,this.kb),t.bufferSubData(t.ARRAY_BUFFER,0,this.aE.subarray(0,this.cE))),0<this.uE&&(t.bindBuffer(t.ARRAY_BUFFER,this.Rb),t.bufferSubData(t.ARRAY_BUFFER,0,this.rE.subarray(0,this.uE)),t.bindBuffer(t.ARRAY_BUFFER,this.Pb),t.bufferSubData(t.ARRAY_BUFFER,0,this.oE.subarray(0,this.lE)))}rD(){const i=this.mE;for(let t=0,s=this.gE;t<s;++t)i[t].oC()}hD(){return this.SE.qo()}oD(t,s,i,e){const n=this.SE;if(!n.ea(t,s,i,e)){n.ko(t,s,i,e);const r=this.$E();r.iI(n),this.yE=0,this._y=null}}aD(t){const s=this.SE;if(s.qo()!==t){s.Qo(t);const i=this.$E();i.iI(s),this.yE=0,this._y=null}}PS(t){const s=this.SE;if(!s.equals(t)){s.set(t);const i=this.$E();i.iI(s),this.yE=0,this._y=null}}uD(){this.oD(1,1,1,1)}lD(){return this.SE}cD(t){if(t!==this.TE){const s=this.$E();s.tI(t),this.TE=t,this.yE=0}}g2(){this.TE=null}RS(t){const s=this.JM(t);this.fD(s[0],s[1])}dD(t){const s=this.HM(t);this.fD(s.WM,s.QM)}fD(t,s){if(t!==this.bE||s!==this.vE){const i=this.$E();i.hI(t,s),this.bE=t,this.vE=s,this.yE=0,this._y=null}}pD(){return this.bE===this.Ab.ONE&&this.vE===this.Ab.ONE_MINUS_SRC_ALPHA}mD(){this.fD(this.Ab.ONE,this.Ab.ONE_MINUS_SRC_ALPHA)}gD(){this.fD(this.Ab.SRC_ALPHA,this.Ab.ONE_MINUS_SRC_ALPHA)}yD(){this.fD(this.Ab.ONE,this.Ab.ZERO)}Rect(t){this.MD(t.uu(),t.lu(),t.cu(),t.fu())}MD(t,s,i,e){this.jw(t,s,i,s,i,e,t,e)}wD(){let t=this.uE;if(t>=this.fE&&(this.Uw(),t=0),1===this.yE)this.mE[this.gE-1].Yx+=6;else{const s=this.$E();s.Kx(t,6),this.yE=1}}SD(t){t.rl(this.rE,this.uE,this.Oy+this.Ry),this.uE+=12}ju(t){this.wD(),this.SD(t),c.Xo(this.oE,this.lE),this.lE+=8}jw(t,s,i,e,n,r,h,o){this.wD();let a=this.rE,u=this.uE,l=this.Oy+this.Ry;a[u++]=t,a[u++]=s,a[u++]=l,a[u++]=i,a[u++]=e,a[u++]=l,a[u++]=n,a[u++]=r,a[u++]=l,a[u++]=h,a[u++]=o,a[u++]=l,this.uE=u,c.Xo(this.oE,this.lE),this.lE+=8}cw(t,s){this.wD(),this.SD(t),s.mu(this.oE,this.lE),this.lE+=8}TD(t,s){this.wD(),this.SD(t),s.Xo(this.oE,this.lE),this.lE+=8}bD(t,s,i,e,n,r,h,o,a,u,l,c,f){this.wD();let d=this.rE,p=this.uE,m=this.Oy+this.Ry;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=n,d[p++]=m+r,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=u,d[p++]=l,d[p++]=m+c,this.uE=p,f.mu(this.oE,this.lE),this.lE+=8}hw(t,s,i,e,n,r,h,o,a,u,l,c,f){this.wD();let d=this.rE,p=this.uE,m=this.Oy+this.Ry;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=n,d[p++]=m+r,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=u,d[p++]=l,d[p++]=m+c,this.uE=p,f.Xo(this.oE,this.lE),this.lE+=8}vD(e,n,r){const h=this.rE,o=this.oE;if(r.length%3!=0)throw new Error("invalid index buffer length");for(let i=0,t=r.length;i<t;){const a=r[i++],u=r[i++],l=r[i++],c=3*a,f=3*u,d=3*l,p=2*a,m=2*u,g=2*l;this.wD();let t=this.uE,s=this.lE;h[t++]=e[0+c],h[t++]=e[1+c],h[t++]=e[2+c],h[t++]=e[0+f],h[t++]=e[1+f],h[t++]=e[2+f],h[t++]=e[0+d],h[t++]=e[1+d],h[t++]=e[2+d],h[t++]=e[0+d],h[t++]=e[1+d],h[t++]=e[2+d],o[s++]=n[0+p],o[s++]=n[1+p],o[s++]=n[0+m],o[s++]=n[1+m],o[s++]=n[0+g],o[s++]=n[1+g],o[s++]=n[0+g],o[s++]=n[1+g],this.uE=t,this.lE=s}}xD(t,s){this.KM(0),y.I(M,this.hy),y.I(w,this.oy),this.tD();const[i,e]=this.ID(this.ME),n=this.dM(0,0,this.Zy(e),0,0,0,e);if(this.sD(n),"crop"===t&&this.ME&&s){const r=this.Am/2,h=this.Lm/2,o=s.Jp(),a=s.im(),u=this.ME.Jp(),l=this.ME.im(),c=Math.min(u,o),f=Math.min(l,a),d=Math.max(a-l,0),p=Math.max(l-a,0);v.set(-r,h-p,-r+c,h-f-p),b.hl(v),v.set(0,d,c,f+d),v.It(o,a),this.cw(b,v)}else{const m=i/2,g=e/2;this.MD(-m,g,m,-g)}this.qE(M),this.sD(w)}CD(t){if(!this.xE.equals(t)){this.xE.I(t);const s=this.$E();s.wI(t),this.yE=0}}GD(){}ND(t,s,i,e){7996<=this.cE&&this.Uw();let n=this.cE,r=this.Oy+this.Ry;if(2===this.yE&&this.wE===r)this.mE[this.gE-1].Yx++;else{const o=this.$E();o.TI(n,r),this.yE=2,this.wE=r}const h=this.aE;h[n++]=t,h[n++]=s,h[n++]=i,h[n++]=e,this.cE=n}wM(t){if(this.dE!==t){const s=this.$E();s.vI(t),this.dE=t,this.yE=0,this._y=null}}ED(){return this.dE}DD(){this.wM(this.pE)}_D(t){const s=this.$E();s.nI(t),this.yE=0}AD(t,s,i=1){const e=this.$E();e.BI(t,s,i),this.yE=0}LD(t,s,i,e,n,r,h){if(this.dE!==this.Sy)throw new Error("must set tilemap fill mode first");const o=this.$E();o.WI(t,s,i,e,n,r,h),this.yE=0}OD(t,s,i,e,n,r,h){if(this.dE!==this.Ty)throw new Error("must set tile randomization mode first");const o=this.$E();o.JI(t,s,i,e,n,r,h),this.yE=0}RD(t,s,i,e,n,r,h,o,a,u,l){const c=this.dE;if(l%=10800,c.gv&&!c.Bv(s,i,e,n,r,h,o,a,u,l)){const f=this.$E(),d=(f.II(),c.Qv(s,i,e,n,r,h,o,a,u,l),f.Hx),p=(d[0]=r,d[1]=h,s.Xo(d,2),d[6]=a,d[7]=u,i.Xo(d,12),f.qx),m=(n.Xo(p,0),p[1]);p[1]=p[3],p[3]=m,e.Xo(f.Zx,0),f.Jx=l,f.Yx=o,c.Zb.yv()?f.Vx=t?t.lb():null:f.Vx=null,this.yE=0}}PD(t){const s=this.dE;if(0!==t.length&&!s.kv(t)){const i=this.$E();i.NI(),s.jv(t),S.Ah(i.Xx,t),this.yE=0}}kD(t,s,i,e){const n=this.$E();n.yI(t,s,i,e),this.yE=0}zl(t){const s=this.$E();s.gI(t),this.yE=0}FD(){}Bw(){super.Bw(),this.Ab.flush()}jD(){if(this.ZN&&this.ME&&this.ME.gb()){const t=this.$E();t.VI(this.KN),this.yE=0}}zD(t){if(this.KN!==(t=!!t)&&this.ZN){this.KN=t;const s=this.$E();s.qI(t),this.yE=0}}BD(){return this.KN}sb(){return this.tE}ib(){return this.XN}UD(t){if(t=!!t,this.XN&&this.$N!==t){if(t&&this.BD())throw new Error("depth still enabled");this.$N=t;const s=this.$E();s.XI(t),this.yE=0}}WD(t,s,i,e,n=0){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),!this.IE.au(t,s,i,e)){this.IE.su(t,s,i,e);const r=n||this.ID(this.QD())[1],h=(s=r-s-e,this.$E());h.rC(!0,t,s,i,e),this.yE=0}}JD(){if(-1!==this.IE.cu()){this.IE.set(0,0,-1,-1);const t=this.$E();t.rC(!1,0,0,0,0),this.yE=0}}YD(){for(const t of this.WE)t.RN(this.Uy)}hN(){return!this.Ab||this.Ab.isContextLost()||this.OE}kS(){super.qy(),S.jg.XT.kS(),S.jg.F2.kS(),S.jg.sS.kS();for(const t of this.WE)t.zl();this.LE=[],this.cN=null,this.RE=null,this.PE=null,this.kE=null,this.FE=null,this.jE=null,this.zE=null,this.BE=0,this._E="(unavailable)",this.AE="(unavailable)",this.dE=null,this.pE=null,this.tE=null;for(const s of this.Dy.values())s.kS()}async FS(){this.OE=!0,await this.Hy(),this.OE=!1;for(const t of this.Dy.values())t.FS(this);this.DG(this.Am,this.Lm,!0)}VD(t,s){if(this.hN())throw new Error("context lost");this.Uw();const i=S.Xn(S.jg.XT,this);return i.a2(t,s),i}async HD(e,n){if(this.hN())throw new Error("context lost");if(n=Object.assign({},n),S.Ri.ImageBitmapOptions){let t=await createImageBitmap(e,{premultiplyAlpha:"premultiply"}),s=n.WT&&"clamp-to-edge"!==n.WT||n.QT&&"clamp-to-edge"!==n.QT,i=S.Nr(t.width)&&S.Nr(t.height);return this.f2()||i||!s?n.premultiplyAlpha=!1:S.Ri.ji?(t=await createImageBitmap(e,{premultiplyAlpha:"premultiply",resizeWidth:S.Er(t.width),resizeHeight:S.Er(t.height)}),n.premultiplyAlpha=!1):t=await createImageBitmap(e,{premultiplyAlpha:"none"}),S.bf(()=>this.VD(t,n))}if(e instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await S.wo(e);e=t}return S.bf(()=>this.VD(e,n))}tb(t,s,i){this.Uw();const e=S.Xn(S.jg.XT,this);return e.M2(t,s,i),e}oN(t,s,i){this.Uw(),s.v2(t,i)}nb(t){t&&(t.E2(),0<t.D2()||(this.Uw(),t===this.TE&&(this.Ab.bindTexture(this.Ab.TEXTURE_2D,null),this.TE=null),t===this.GI&&(this.Ab.activeTexture(this.Ab.TEXTURE1),this.Ab.bindTexture(this.Ab.TEXTURE_2D,null),this.Ab.activeTexture(this.Ab.TEXTURE0),this.GI=null),t.I2()))}qD(t){let s=this.Am,i=this.Lm,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height)&&(i=Math.floor(t.height),e=!1),s<=0||i<=0)throw new Error("invalid size");this.Uw();const n=S.Xn(S.jg.F2,this);return n.X2(s,i,Object.assign({R2:e},t)),this.ME=null,this.Qx.hb=null,this.Qx.ob=null,n}ZD(t,s=!0){if(t!==this.ME){t&&t.yb()&&t.eb(this.Am,this.Lm);const i=this.$E();i.pI(t),this.ME=t,this.yE=0,s&&this.tD()}}QD(){return this.ME}ID(t){return t?[t.Jp(),t.im()]:[this.Am,this.Lm]}XD(t,s="stretch"){if(this.lN<2||this.ME&&0<this.ME.Mb())this.yD(),this.uD(),this.KD(t,s);else{const i=this.$E();i.AI(t,this.ME,s),this.yE=0}}KD(t,s="stretch"){const i=t.lb();if(!i)throw new Error("not a texture-backed render target");this.cD(i),this.xD(s,i)}$D(t){if(!(this.lN<2)){const s=this.$E();s.DI(t.ab()),this.yE=0}}t_(t){this.ZD(null),this.Uw();const s=t.lb();s===this.TE&&(this.Ab.bindTexture(this.Ab.TEXTURE_2D,null),this.TE=null),s===this.GI&&(this.Ab.activeTexture(this.Ab.TEXTURE1),this.Ab.bindTexture(this.Ab.TEXTURE_2D,null),this.Ab.activeTexture(this.Ab.TEXTURE0),this.GI=null),t.I2()}async vb(t,s,i){this.Uw();let e=this.ME,n,r,h,o=(h=t?(n=t.Jp(),r=t.im(),t.ab()):(n=this.Jp(),r=this.im(),null),0),a=0,u=n,l=r;if(i){o=S.rr(Math.floor(i.uu()),0,n-1),a=S.rr(Math.floor(i.lu()),0,r-1);let t=i.width(),s=(t=0===t?n-o:S.rr(Math.floor(t),0,n-o),i.height());s=0===s?r-a:S.rr(Math.floor(s),0,r-a),u=t,l=s,a=r-(a+l)}let c=this.Ab,f=(c.bindFramebuffer(c.FRAMEBUFFER,h),()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.ME=null,this.Qx.hb=null,this.Qx.ob=null,this.ZD(e)}),d;if(!s&&2<=this.c2()){c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const p=c.createBuffer(),m=u*l*4,g=c.PIXEL_PACK_BUFFER,y=(c.bindBuffer(g,p),c.bufferData(g,m,c.STREAM_READ),c.readPixels(o,a,u,l,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(g,null),f(),c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0));await this.Db(()=>c.getSyncParameter(y,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(y),d=new ImageData(u,l),c.bindBuffer(g,p),c.getBufferSubData(g,0,new Uint8Array(d.data.buffer),0,m),c.bindBuffer(g,null),c.deleteBuffer(p)}else d=new ImageData(u,l),c.readPixels(o,a,u,l,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}s_(){this.zD(!0);const t=this.$E();t.$I(),this.yE=0,this.CE=1}i_(){this.zD(!1);const t=this.$E();t.sC(),this.yE=0,this.CE=2}e_(){return 2===this.CE}n_(){this.zD(!0);const t=this.$E();t.eC(),this.yE=0,this.CE=0}r_(t){if(this.h_()){const s=this.$E();s.OI(t),this.yE=0}}o_(t){if(this.h_()){const s=this.$E();s.FI(t),this.yE=0}}Db(s){const t=new Promise(t=>e.add({resolve:t,FN:s}));return-1===n&&(n=self.requestAnimationFrame(i)),t}Zw(){return this.Am*this.Lm*(this.JN.alpha?4:3)}Xw(){let t=0;for(const s of S.jg.F2.xb())s.lb()||(t+=s.A2());return t}Kw(){let t=0;for(const s of S.jg.XT.L2())t+=s.A2();return t}a_(){return this.YN}c2(){return this.lN}u_(){return"webgl"+this.c2()}f2(){return 2<=this.c2()}u2(){return this.GE}l_(){return this.NE}c_(){return this.EE}f_(){return 0!==this.DE}d_(){return this.DE}p_(){return this._E}m_(){return this.AE}g_(){if(2<=this.c2())return"webgl2";{const t=[];return this.FE&&t.push("EXT_frag_depth"),this.jE&&t.push("OES_standard_derivatives"),this.zE&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}y_(){return this.LE}h_(){return!!this.cN}fN(){return this.cN}Eb(){return this.RE}T2(){return this.PE}b2(){return this.BE}AN(t){this.WE.add(t)}LN(t){this.WE.delete(t)}IN(){return this.QE}l2(){return this.Ab}JE(t){this.UM([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}M_(){return this.tS()}}}{const Yi=self.Ls,Vi={w_:null,S_:null,T_:null,getTime:null,b_:null};Yi.jg.v_=class{constructor(t){t=Object.assign({},Vi,t),this.x_=t.w_,this.I_=t.S_,this.C_=t.T_,this.G_=t.getTime,this.N_=t.b_,this.E_=null,this.D_=new Set}__(t){this.D_.add(t)}A_(t){this.D_.delete(t)}kS(){this.E_=null;for(const t of this.D_)t.kS()}L_(t){return this.x_?this.x_(t):[t.Jp(),t.im()]}QD(t){return this.I_(t)}O_(t,s){this.C_(t,s)}R_(){return this.G_()}U1(t){this.N_(t)}P_(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.E_||this.E_.Jp()===s&&this.E_.im()===i||(t.nb(this.E_),this.E_=null),null===this.E_&&(this.E_=t.VD(null,{width:s,height:i,JT:"nearest",HT:!1})),this.E_}}}{const o=self.Ls,Hi=self.gs,xn=Hi.Ss,qi=o.Xn(o.Rect),Zi=o.Xn(o.Rect),Xi=o.Xn(o.Rect),Ki=o.Xn(o.Rect),$i=xn.create(),te=xn.create(),se={k_:null,F_:null,j_:null,z_:!1},ie={B_:null,U_:!1,W_:!1,Q_:!1,J_:!1,Y_:!1,V_:!1};o.jg.H_=class{constructor(t,s){s=Object.assign({},se,s),this.X1=t,this.q_=s.k_,this.Z_=s.F_,this.X_=s.j_,this.K_=null,this.tA=[],this.sA=[],this.iA=[],this.eA=!1,this._S=0,this.nA=!1,this.rA=!1,this.hA=!1,this.oA=!1,this.aA=!1,this.uA=!1,this.HN=!1,this.lA=!1,this.cA=!1,this.fA=!1,this.dA=!1,this.pA=!1,this.mA=0,this.gA=[null,null,null],this.yA=!!s.z_,this.MA=0,this.wA=0,this.SA=0,this.TA=0,this.bA=null,this.vA=null,this.xA=o.Xn(o.Rect),this.IA=o.Xn(o.Rect),this.CA=o.Xn(o.Rect),this.GA=o.Xn(o.Rect),this.NA=o.Xn(o.Rect),this.EA=1,this.DA=1,this._A=0,this.AA=0,this.LA=null,this.OA=null,this.RA=0,this.PA=0,this.kA=!1,this.V2=xn.create(),this.FA=xn.create(),this.X1.__(this)}Kn(){this.X1.A_(this),o.Nh(this.iA),o.Nh(this.tA),o.Nh(this.sA),this.bA=null,this.vA=null,this.q_=null,this.Z_=null,this.X_=null}kS(){this.eA=!0,o.Nh(this.iA),o.Nh(this.tA),o.Nh(this.sA)}jA(){return this.eA}zA(n,t){if(t=Object.assign({},ie,t),o.Nh(this.iA),this.MA=0,this.wA=0,this.nA=!1,this.rA=!1,this.hA=!1,this.oA=!1,this.aA=!1,this.uA=!1,this.mA=0,this.pA=!!t.J_,this.dA=!!t.V_,this.eA=!1,o.Ah(this.tA,n),0!==n.length){if(t.B_){if(t.B_.length!==n.length)throw new Error("incorrect indexMap length");o.Ah(this.sA,t.B_)}else{o.Nh(this.sA);for(let t=0,s=n.length;t<s;++t)this.sA.push(t)}for(const s of n)this.MA+=s.yS(),this.wA+=s.MS(),s.vS()&&(this.nA=!0),s.IS()&&(this.rA=!0),s.xS()&&(this.hA=!0),s.wS()&&(this.oA=!0),s.NS()&&(this.aA=!0);this.uA=this.BA(n[0].mS());const r=this.UA(n[0],t),h=this.WA(n.at(-1),t);if(1!==n.length||r||h){this.fA=!1;let e=0;r&&(this.mA=1,this.iA.push(o.Xn(o.jg.H_.JA.QA,this,-1,1)),e=1);for(let s=0,i=n.length;s<i;++s)if(0!==s||r){let t=1===e?2:1;s!==i-1||h||(t=0),this.mA=Math.max(this.mA,t),this.iA.push(o.Xn(o.jg.H_.JA.YA,this,e,t,s)),e=t}else this.mA=1,this.iA.push(o.Xn(o.jg.H_.JA.VA,this,-1,1,s)),e=1;h&&this.iA.push(o.Xn(o.jg.H_.JA.HA,this,e,0))}else this.fA=!0}}UA(t,s){return!!(s.U_||t.SS()||s.Q_&&!t.bS()||t.IS()&&!this.dA||0!==this.MA||0!==this.wA)||(t.mS().qw()?t.xS()&&(s.Y_||s.J_)||t.CS()&&s.J_:t.xS()&&!this.uA&&s.Y_)}WA(t,s){return!!s.W_||(t.mS().qw()?t.xS()||t.wS():(t.xS()||t.wS())&&this.qA())}BA(t){return t.lM()&&this.hA&&!this.oA}ZA(t,s,i){t.lM()&&null===s&&(s=t.GetBackbufferRenderTarget()),this.LA=s,this.bA=i.XA||null,this.vA=i.contextObject||null,this._S=i.KA||0,this.EA=i.devicePixelRatio||1,this.DA=i.$A||1,this._A=i.tL||0,this.AA="number"==typeof i.time?i.time:this.X1.R_(),this.HN=!1,t.iD(),this.nA&&this.sL();let e=!1;if(this.iL()&&(this.eL(t,i),e=!0,this.OA=this.X1.P_(t,this.SA,this.TA),qi.I(this.IA),qi._u(),t.lM()&&t._MaybeDoPendingClearRenderPass(this.LA),t.CopyTextureToTexture(this.LA.lb(),this.OA,qi.uu(),qi.lu(),qi.width(),qi.height())),this.fA)this.nL(t,i);else if(e||this.eL(t,i),0!==this.CA.width()||0!==this.CA.height()){t.mD(),t.uD(),t.ZM(0),t.KM(0),this.K_=i.rL||null,this.RA=i.hL||0,this.PA=i.oL||0,this.kA=!!i.aL,this.uL(t),this.gA[0]=s,this.gA[1]=1<=this.mA?this.lL():null,this.gA[2]=2===this.mA?this.lL():null;for(const n of this.iA){const r=this.cL(n.fL()),h=this.cL(n.dL());t.lM()?n.pL(t,r,h):n.mL(t,r,h)}t.cD(null),this.gA[1]&&this.gL(this.gA[1]),this.gA[2]&&this.gL(this.gA[2]),this.gA.fill(null),this.yL(t),this.LA=null,this.OA=null,this.bA=null,this.vA=null,this.K_=null}}eL(t,s){const[i,e]=this.X1.L_(t);this.ML(t,i,e),this.wL(s)}ML(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.SA===s&&this.TA===i||this.SL(t,s,i,0,0,this.V2,this.FA),this.SA=s,this.TA=i}SL(t,s,i,e,n,r,h){const o=s/2+e,a=i/2+n,u=(t.uM(r,s/i),t.dM(o,a,t.Zy(i),o,a,0,i));xn.I(h,u)}wL(t){this.xA.I(t.TL),t.bL?this.IA.I(t.bL):this.IA.set(0,0,this.SA,this.TA),this.CA.I(this.IA),this.CA.It(this.SA,this.TA);const s=this.DA*this.EA;this.IA.bu(this.MA*s,this.wA*s),this.NA.I(this.IA),this.NA.It(this.SA,this.TA),this.IA.Au(0,0,this.SA,this.TA),this.GA.I(this.IA),this.GA.It(this.SA,this.TA)}uL(t){if(this.lA=t.BD(),this.cA=t.e_(),this.dA)t.zD(!1),this.rA&&t.UD(!0);else{if(qi.I(this.IA),t.qw()){const s=this.DA*this.EA;qi.bu(Math.max(this.MA,1)*s,Math.max(this.wA,1)*s),qi._u(),qi.rr(0,0,this.SA,this.TA)}else qi._u();t.WD(qi.uu(),qi.lu(),qi.width(),qi.height(),this.TA)}}vL(t){t.uD(),this.dA||(this.cA&&t.n_(),t.zD(!1),this.rA&&t.UD(!0)),t.lM()&&t.SetNormalizedCoordsProgramVariant(!0)}yL(t){t.UD(!1),this.cA&&t.i_(),t.zD(this.lA),this.dA||t.JD(),t.lM()&&t.SetNormalizedCoordsProgramVariant(!1),this.HN=t.eD()}xL(){this.NA.rr(0,0,1,1)}cL(t){return t<0?null:this.gA[t]}lL(){return this.X1.QD(this)}IL(){return this.LA}gL(t){this.X1.O_(t,this)}CL(t){return this.tA[t]}GL(t){this.K_?this.K_(this,t,()=>this.q_(t,this)):this.q_(t,this),this.fA||this.vL(t)}NL(t){if(this.dA)return!0;if(0!==this.RA||0!==this.PA)return!1;const[s,i]=t.ID(t.QD());return s===this.SA&&i===this.TA}EL(t,s){let i=this.V2,e=this.FA;if(s&&!this.NL(t)){i=$i,e=te;const[n,r]=t.ID(t.QD());this.SL(t,n,r,this.RA,this.PA,i,e),this.dA||t.JD()}t.qE(i),t.sD(e)}sL(){this.X1.U1(this)}DL(t,s){return this.X_(this.sA[t],s)}_L(t,s){let i=this.NA,e=this.GA,n=this.CA;t.qw()&&(Zi.I(i),Zi.Iu(1),i=Zi,Xi.I(e),Xi.Iu(1),e=Xi,Ki.I(n),Ki.Iu(1),n=Ki),this.AL(t,s,e,n,i,1/this.SA,1/this.TA)}LL(t,s){let e=this.GA,n=this.CA,r=1/this.SA,h=1/this.TA;if(this.Z_){let{OL:t,RL:s,PL:i}=this.Z_(this.bA);t||(qi.set(0,0,0,0),t=qi),s=s||this.SA,i=i||this.TA,e=t,n=t,r=1/s,h=1/i}else t.qw()&&(Xi.I(e),Xi.Iu(1),e=Xi,Ki.I(n),Ki.Iu(1),n=Ki);let i=this.NA;t.qw()&&((i=Zi).I(this.NA),i.Iu(1)),this.AL(t,s,e,n,i,r,h),t.lM()&&this.aA&&t.SetProgramParameter_IsSrcTexRotated(this.pA)}kL(t){return this.hA?t.lM()?this.iL()?this.OA:this.LA.lb():this.LA:null}AL(t,s,i,e,n,r,h){t.RD(this.kL(t),n,i,e,this.xA,r,h,this.EA,this.DA,this._A,this.AA),t.PD(this.DL(s,t))}nL(t,s){const i=this.tA[0],e=t.BD(),n=i.IS();n&&(t.zD(!1),t.UD(!0),this.NA.set(0,0,1,1),this.CA.set(0,0,1,1)),t.wM(i),t.RS(this._S),t.ZD(this.LA);let r=0,h=1;if(this.CA.set(0,0,1,1),i.CS()&&this.Z_){const{OL:o,RL:a,PL:u}=this.Z_(this.bA);o&&this.CA.I(o),r=Number.isFinite(a)?1/a:0,h=Number.isFinite(u)?1/u:0}else{const[l,c]=this.X1.L_(t);r=1/l,h=1/c}s.TL?this.xA.I(s.TL):this.xA.set(0,0,0,0),t.RD(this.kL(t),this.NA,this.CA,this.CA,this.xA,r,h,this.EA,this.DA,this._A,this.AA),t.PD(this.DL(0,t)),t.lM()&&this.aA&&t.SetProgramParameter_IsSrcTexRotated(this.pA),t.ZM(0),this.GL(t),n&&(t.UD(!1),t.zD(e))}iL(){return this.uA}qA(){return!this.uA}FL(){return this.hA}jL(){return!!this.fA&&!this.iL()}zL(){return this.dA}BL(){return this.bA}UL(){return this.vA}WL(){return this._S}QL(){return this.kA}eD(){return this.HN}JL(){return this.IA}YL(){return this.GA}VL(){return this.yA}async HL(t,s,i){}}}{const ee=self.Ls;ee.jg.H_.JA=class{constructor(t,s,i,e=-1){this.qL=t,this.ZL=s,this.XL=i,this.Ag=e}KL(){return this.qL}fL(){return this.ZL}dL(){return this.XL}$L(){return this.Ag}Lv(){return this.KL().CL(this.$L())}mL(t,s,i){}pL(t,s,i){}}}{const ne=self.Ls;ne.jg.H_.JA.QA=class extends ne.jg.H_.JA{constructor(t,s,i,e){super(t,s,i,e)}mL(t,s,i){const e=this.KL();t.mD(),t.MM(),t.ZD(i,e.QL()),t.kD(0,0,0,0),e.GL(t),e.xL()}pL(t,s,i){const e=this.KL();t.mD(),t.MM(),t.ZD(i,!1),t.kD(0,0,0,0),e.GL(t),e.xL()}}}{const re=self.Ls,he=re.Xn(re.Rect),oe=re.Xn(re.ju);re.jg.H_.JA.HA=class extends re.jg.H_.JA{constructor(t,s,i,e){super(t,s,i,e)}mL(t,s,i){const e=this.KL();t.MM(),t.ZD(i),e.EL(t,!0),t.RS(e.WL()),t.cD(s.lb()),oe.hl(e.JL()),he.I(e.YL()),he.Iu(1),t.cw(oe,he),e.VL()&&t.$D(s)}pL(t,s,i){const e=this.KL();t.MM(),t.ZD(i,!1),e.NL(t)?oe.hl(e.YL()):(t.SetNormalizedCoordsProgramVariant(!1),e.EL(t,!0),oe.hl(e.JL())),t.SetBackTexture(null),t.RS(e.WL()),t.cD(s.lb()),e.zL()?t.xD():t.cw(oe,e.YL())}}}{const ae=self.Ls;ae.jg.H_.JA.VA=class extends ae.jg.H_.JA{constructor(t,s,i,e){super(t,s,i,e)}mL(t,s,i){const e=this.KL();t.ZD(i,e.QL()),t.kD(0,0,0,0),t.yD(),t.wM(this.Lv()),e.LL(t,this.$L()),e.GL(t),e.xL()}pL(t,s,i){const e=this.KL();t.ZD(i,!1),t.kD(0,0,0,0),t.yD(),t.wM(this.Lv()),e.LL(t,this.$L()),e.GL(t),e.xL()}}}{const ue=self.Ls,le=ue.Xn(ue.Rect),ce=ue.Xn(ue.ju);ue.jg.H_.JA.YA=class extends ue.jg.H_.JA{constructor(t,s,i,e){super(t,s,i,e)}mL(t,s,i){const e=this.KL(),n=(t.ZD(i),0===this.dL());n?t.RS(e.WL()):(t.kD(0,0,0,0),t.yD()),t.wM(this.Lv()),e._L(t,this.$L()),t.cD(s.lb()),e.EL(t,n),ce.hl(e.JL()),le.I(e.YL()),le.Iu(1),t.cw(ce,le),e.VL()&&t.$D(s)}pL(t,s,i){const e=this.KL(),n=(t.ZD(i,!1),0===this.dL());n?(t.RS(e.WL()),t.SetBackTexture(null),e.NL(t)?ce.hl(e.YL()):(t.SetNormalizedCoordsProgramVariant(!1),e.EL(t,!0),ce.hl(e.JL()))):(t.kD(0,0,0,0),t.yD(),ce.hl(e.YL())),t.wM(this.Lv()),e._L(t,this.$L()),t.cD(s.lb()),e.zL()?t.xD():t.cw(ce,e.YL())}}}{let l=function(t,s){const i=t[0],e=s[0],n=i-e;if(0!=n)return n;const r=t[1],h=s[1];return r-h},c=(l,self.Ls),f=self.Ws,d=null,s=new Set,p=[],m=[],i=!1,t=!1,e=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.tO=class{constructor(t){d=t,Object.defineProperties(this,{sO:{value:d.eO().iO(),writable:!1},nO:{value:d.hO().rO(),writable:!1},oO:{value:{},writable:!1},aO:{value:{},writable:!1},uO:{value:d.lO(),writable:!1},cO:{value:d.fO(),writable:!1},storage:{value:new self.dO(d),writable:!1},isInWorker:{value:d.pO(),writable:!1},mO:{value:d.gO(),writable:!1},yO:{value:d.MO(),writable:!1},JT:{value:d.wO(),writable:!1},SO:{value:d.TO(),writable:!1},bO:{value:new self.vO(t),writable:!1},xO:{value:new self.IO(t),writable:!1}}),d.CO().addEventListener("keydown",t=>{s.has(t.key)?t.stopPropagation():s.add(t.key)}),d.CO().addEventListener("keyup",t=>s.delete(t.key)),d.Gf().addEventListener("window-blur",()=>s.clear()),d.pO()&&(self.alert=t=>(i||(i=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}GO(t){Object.defineProperties(this.oO,t)}NO(t){Object.defineProperties(this.aO,t)}addEventListener(t,s){d.CO().addEventListener(t,s)}removeEventListener(t,s){d.CO().removeEventListener(t,s)}EO(t,...s){f.we(t);const i=d.DO(),e=i._O(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.kl())return e.AO();if(s.length<e.LO())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.LO()} expected)`);let n=e.OO(),r=n.RO(),h=i.PO();if(h){r=r.slice(0);const a=new Set(r);for(const u of h.RO())a.has(u)||(r.push(u),a.add(u));for(const l of i.kO())a.has(l)||(r.push(l),a.add(l))}const o=n.FO(r,e.jO(),e.zO(),e.AO(),...s);return o}BO(t){const s=d.WO().UO();if(!s)throw new Error("not in a function which returns a value");switch(s.QO()){case 1:"number"==typeof t&&s.JO(t);break;case 2:"string"==typeof t&&s.JO(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.JO(t)}}signal(t){f.we(t),d.DO().YO(t)}VO(t){return f.we(t),d.DO().HO(t)}qO(){return[d.gO(),d.MO()]}get isSuspended(){return d.ZO()}get XO(){return d.KO()}get $O(){return d.t3()}get s3(){return d.i3()}get e3(){return d.n3()}get r3(){return d.h3()}set r3(t){f.me(t),d.o3(t)}get fps(){return t||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),t=!0),d.a3()}get framesPerSecond(){return d.a3()}get u3(){return d.l3()}get f3(){return d.d3()}get m3(){return d.g3()}get y3(){return d.M3()}set y3(t){if(!e.has(t))throw new Error("invalid framerate mode");d.w3(t)}get S3(){return d.T3()}set S3(t){f.me(t),d.b3(t)}get v3(){return d.x3()}set v3(t){d.I3(t)}random(){return d.C3()}get layout(){const t=d.G3();if(t)return t.N3();throw new Error("no layout is running - make sure a layout is loaded before accessing")}E3(t){let s=d.D3(),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s._3(t))return i.N3();throw new Error("invalid layout")}A3(){return d.D3().L3().map(t=>t.N3())}O3(t){let s=d.D3(),i;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(i=s._3(t)))throw new Error("invalid layout");s.R3()||s.P3(i)}get keyboard(){const t=d.F3().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get j3(){const t=d.F3().j3;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get z3(){const t=d.F3().z3;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get B3(){const t=d.F3().B3;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}U3(t,s){f.we(t),f.we(s),d.W3(t,s)}Q3(t){f.me(t);const s=d.J3(t);return s?s.Y3():null}V3(t,e){f.We(e);const n=d.H3();for(const s of t){const i=d.q3(s),r=i.Z3();p.push([r.X3().$L(),r.K3()]),m.push(i)}if(0!==p.length){p.sort(l),m.sort((t,s)=>e(t.Y3(),s.Y3()));let i=!1;for(let t=0,s=p.length;t<s;++t){const h=m[t],o=n.t4(p[t][0]),a=p[t][1],u=o.s4();u[a]!==h&&((u[a]=h).Z3().i4(o,!0),o.e4(h),i=!0)}i&&d.n4(),c.Nh(p),c.Nh(m)}}async r4(t,s){const i=new MessageChannel,e=i.port1,n=i.port2;return await d.h4("runtime","script-create-worker",{url:t,opts:s,port2:n},[n]),e}alert(t){return d.h4("runtime","alert",{message:t+(d.pO()?" [via Web Worker]":"")})}o4(t){return f.me(t),d.a4(t)}u4(t){d.l4(t)}}}{let s=self.Ls,h=null;self.c4=class{constructor(t){h=t,Object.defineProperties(this,{f4:{value:h.d4("audio/webm; codecs=opus"),writable:!1}})}m4(t){const s=self.y4.g4(t);if(!s)throw new Error("invalid IImageInfo");s.M4(h.w4())}S4(t){return h.lo(t)}T4(t){return h.co(t)}b4(t){return h.fo(t)}v4(t){return h.do(t)}x4(t){return h.I4(t)}C4(t){return"flat"===h.G4()&&s.ho(t)&&(t=t.toLowerCase()),h.N4(t)}get E4(){return h.D4()}async _4(t,s){if(this.f4)throw new Error("decodeWebMOpus(): not supported because WebM Opus is supported by the platform");const i=await h.w4().A4(s),e=new Float32Array(i),n=t.createBuffer(1,e.length,48e3),r=n.getChannelData(0);return r.set(e),n}L4(...t){return h.O4(...t)}R4(t){return h.P4(t)}F4(t){return h.j4(t)}}}{let h=self.Ls,i=self.Ws,o=null;self.z4=class{constructor(t){o=t,Object.defineProperties(this,{runtime:{value:o.w4(),writable:!1}})}B4(t,s){const i=o.w4(),e=i.q3(t),n=i.q3(s);return o.U4(e,n)}W4(t,s){const i=o.w4(),e=i.q3(t);for(const n of s){const r=i.q3(n);if(o.U4(e,r))return n}return null}Q4(t){const s=o.w4().q3(t),i=o.J4(s);return i?i.Y3():null}Y4(t,s){if(i.me(t),i.me(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");o.V4(t,s)}H4(){return o.q4()}Z4(t,s){let i=o.w4(),e;e=Array.isArray(t)?t.map(t=>i.X4(t)):[i.X4(t)];const n=h.Rect.ou(s),r=[];return o.K4(null,e,n,r),r.map(t=>t.Y3())}}}{let s=self.Ls,i=null,e=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),n=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),r=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.vO=class{constructor(t){i=t,Object.defineProperties(this,{tR:{value:s.ei.di,writable:!1},sR:{value:e.get(s.ei.ni)||"unknown",writable:!1},iR:{value:s.ei.ri,writable:!1},eR:{value:n.get(s.ei.hi)||"unknown",writable:!1},nR:{value:s.ei.oi,writable:!1},rR:{value:r.get(s.ei.li)||"unknown",writable:!1}})}get exportType(){let t=i.hR();return i.oR()?t="nwjs":i.aR()?t="windows-webview2":"cordova"===t?t="Android"===s.ei.ni?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get renderer(){return i.lR().uR()}get cR(){return i.lR().fR()}get dR(){return i.lR().pR()}get mR(){return i.lR().gR()}get yR(){return i.lR().MR()}get wR(){return i.lR().SR()}get devicePixelRatio(){return i.TR()}}}{const fe=self.Ws;self.dO=class{constructor(t){this.bR=t.vR()}getItem(t){return fe.we(t),this.bR.getItem(t)}setItem(t,s){return fe.we(t),this.bR.setItem(t,s)}removeItem(t){return fe.we(t),this.bR.removeItem(t)}clear(){return this.bR.clear()}keys(){return this.bR.keys()}}}{const de=self.Ls,pe=de.Os();self.xR=class{#IR;constructor(){const t=de.GR.CR(pe);this.#IR=t,Object.defineProperties(this,{runtime:{value:t.w4().NR(),writable:!1},ER:{value:t.DR(),writable:!1},_R:{value:t.AR(),writable:!1},LR:{value:t.OR(),writable:!1},RR:{value:t.PR(),writable:!1},kR:{value:t.FR(),writable:!1},jR:{value:t.zR(),writable:!1},BR:{value:t.UR(),writable:!1},WR:{value:t.QR(),writable:!1}})}static JR(t){if(!t)return null;const s=de.GR.YR(t);return s?s.VR():null}HR(){return this.#IR.ZR().qR()}KR(){return this.#IR.$R().Y3()}}}{const me=self.Ls,ge=self.Ws,ye=me.Os();self.tP=class{#IR;constructor(){const t=me.GR.CR(ye);this.#IR=t,Object.defineProperties(this,{name:{value:t.kc(),writable:!1},runtime:{value:t.w4().NR(),writable:!1},sP:{value:t.iP().VR(),writable:!1}}),t.w4().eP(this,t)}addEventListener(t,s){ge.we(t),ge.We(s),this.#IR.CO().addEventListener(t,s)}removeEventListener(t,s){ge.we(t),ge.We(s),this.#IR.CO().removeEventListener(t,s)}nP(){return[...this.instances()]}rP(){return me.first(this.instances())}hP(){return[...this.oP()]}aP(){return me.first(this.oP())}uP(t){const s=this.#IR,i=s.w4().lP(t),e=s.cP(i);return e?e.Y3():null}*instances(){for(const t of this.#IR.fP())yield t.Y3()}*oP(){for(const t of this.#IR.pP().dP())yield t.Y3()}mP(t){ge.We(t);const s=this.#IR;if(0<s.gP())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.yP(t)}_i(t,s,i,e,n){if(ge.ue(s),ge.ue(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#IR,h=r.w4(),o=h.G3().X3(t);if(!o)throw new Error("invalid layer");const a=h.MP(r,o,s,i,e,n),u=(e&&o.wP(a),h.DO());return u.SP(!0),a.TP(),u.SP(!1),u.bP()||h.D3().vP()||h.xP(),a.Y3()}}}{const u=self.Ws,f=new WeakMap,Me=["above","below","top-sublayer","bottom-sublayer"];self.IP=class{constructor(t){f.set(this,t);const s=[],i=t.CP(),e=i.GP().length;for(let t=0;t<e;++t)s.push(new self.NP(i,t));Object.defineProperties(this,{name:{value:t.kc(),writable:!1},index:{value:t.$L(),writable:!1},EP:{value:s,writable:!1}})}addEventListener(t,s){u.we(t),u.We(s),f.get(this).CO().addEventListener(t,s)}removeEventListener(t,s){u.we(t),u.We(s),f.get(this).CO().removeEventListener(t,s)}get width(){return f.get(this).Jp()}set width(t){u.me(t),f.get(this).Kp(t)}get height(){return f.get(this).im()}set height(t){u.me(t),f.get(this).Yp(t)}DP(t,s){u.me(t),u.me(s);const i=f.get(this);i.Kp(t),i.Yp(s)}getSize(){const t=f.get(this);return[t.Jp(),t.im()]}set scale(t){u.me(t),f.get(this)._P(t)}get scale(){return f.get(this).AP()}set angle(t){u.me(t),f.get(this).LP(t)}get angle(){return f.get(this).OP()}set scrollX(t){u.ue(t),f.get(this).RP(t)}get scrollX(){return f.get(this).PP()}set scrollY(t){u.ue(t),f.get(this).kP(t)}get scrollY(){return f.get(this).FP()}scrollTo(t,s){u.ue(t),u.ue(s);const i=f.get(this);i.RP(t),i.kP(s)}jP(){const t=f.get(this);return[t.PP(),t.FP()]}zP(t){let s=f.get(this),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(i=s.X3(t))?i.BP():null}UP(){return f.get(this).WP().map(t=>t.BP())}*QP(){for(const t of f.get(this).QP())yield t.BP()}JP(t,s,i){const e=f.get(this),n=self.YP,r=(u.we(t),u.Xe(s,n),s?e.w4().VP(s):null),h=Me.indexOf(i);if(h<0)throw new Error("invalid location");e.HP(t,r,h)}qP(t,s,i){const e=f.get(this),n=e.w4(),r=self.YP,h=(u.Ze(t,r),n.VP(t));if(!h)throw new Error("invalid layer");u.Xe(s,r);const o=s?n.VP(s):null,a=Me.indexOf(i);if(a<0)throw new Error("invalid location");e.ZP(h,o,a)}XP(t){const s=f.get(this),i=self.YP,e=(u.Ze(t,i),s.w4().VP(t));if(!e)throw new Error("invalid layer");const n=e.w4();s.KP(e),n.DO().bP()||n.xP()}$P(){const t=f.get(this),s=t.w4();t.sk(),s.DO().bP()||s.xP()}ik(t,s){u.me(t),u.me(s),f.get(this).ek(t,s)}nk(){return f.get(this).rk()}set Z(t){u.we(t);const s=f.get(this);if("perspective"===t)s.hk();else{if("orthographic"!==t)throw new Error("invalid projection");s.ak()}}get Z(){return f.get(this).uk()?"orthographic":"perspective"}}}{const we=self.Ls,d=self.Ws,g=new WeakMap,Se=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Te=new Map([...Se.entries()].map(t=>[t[1],t[0]])),be=we.Xn(we.Ao);self.YP=class{constructor(t){g.set(this,t);const s=[],i=t.CP(),e=i.GP().length;for(let t=0;t<e;++t)s.push(new self.NP(i,t));Object.defineProperties(this,{name:{value:t.kc(),writable:!1},layout:{value:t._3().N3(),writable:!1},EP:{value:s,writable:!1}}),t.w4().eP(this,t)}get lk(){const t=g.get(this).ck();return t?t.BP():null}*fk(){for(const t of g.get(this).fk())yield t.BP()}*dk(){for(const t of g.get(this).pk())yield t.BP()}*mk(){for(const t of g.get(this).pk())for(const s of t.gk())yield s.BP()}get index(){return g.get(this).$L()}get isVisible(){return g.get(this).yk()}set isVisible(t){g.get(this).Mk(t)}get wk(){return g.get(this).Sk()}get isInteractive(){return g.get(this).Tk()}set isInteractive(t){g.get(this).bk(t)}get vk(){return g.get(this).xk()}set vk(t){g.get(this).Ik(!!t)}get Ck(){return g.get(this).Gk()}get opacity(){return g.get(this).hD()}set opacity(t){t=we.rr(+t,0,1),isNaN(t)||g.get(this).aD(t)}set scale(t){d.me(t),g.get(this).Nk(t)}get scale(){return g.get(this).Ek()}set scaleRate(t){d.me(t),g.get(this).Dk(t)}get scaleRate(){return g.get(this)._k()}set angle(t){d.me(t),g.get(this).LP(t)}get angle(){return g.get(this).Ak()}set parallaxX(t){d.me(t),g.get(this).Lk(t)}get parallaxX(){return g.get(this).Ok()}set parallaxY(t){d.me(t),g.get(this).Rk(t)}get parallaxY(){return g.get(this).Pk()}set kk(t){d.me(t),g.get(this).KS(t)}get kk(){return g.get(this).XS()}set Fk(t){g.get(this).jk(t)}get Fk(){return g.get(this).zk()}set Bk(t){g.get(this).Uk(t)}get Bk(){return g.get(this).Wk()}set KA(t){d.we(t);const s=Se.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");g.get(this).RS(s)}get KA(){return Te.get(g.get(this).Qk())}set backgroundColor(t){if(d.Re(t),t.length<3)throw new Error("expected 3 elements");be.Fo(t[0],t[1],t[2]);const s=g.get(this),i=s.Jk();i.$o(be)||(i.Jo(be),s.w4().n4())}get backgroundColor(){const t=g.get(this).Jk();return[t.Yo(),t.Vo(),t.Ho()]}set scrollX(t){d.ue(t);const s=g.get(this);s.Yk(!0),s.RP(t)}get scrollX(){return g.get(this).PP()}set scrollY(t){d.ue(t);const s=g.get(this);s.Yk(!0),s.kP(t)}get scrollY(){return g.get(this).FP()}scrollTo(t,s){d.ue(t),d.ue(s);const i=g.get(this);i.Yk(!0),i.RP(t),i.kP(s)}jP(){const t=g.get(this);return[t.PP(),t.FP()]}Vk(){g.get(this).Yk(!1)}getViewport(){return g.get(this).Hk().du()}qk(t,s,i=0){d.ue(t),d.ue(s),d.ue(i);const e=g.get(this),n=e.w4();return e.Zk(t-n.Xk(),s-n.Kk(),i)}$k(t,s,i=0){d.ue(t),d.ue(s),d.ue(i);const e=g.get(this),n=e.w4(),[r,h]=e.tF(t,s,i);return[r+n.Xk(),h+n.Kk()]}sF(t,s,i=0){return d.ue(t),d.ue(s),d.ue(i),g.get(this).iF(t,s,i)}eF(t,s,i=0){return d.ue(t),d.ue(s),d.ue(i),g.get(this).nF(t,s,i)}get rF(){return g.get(this).hF()}}}{let e=function(t){let s=Ie.get(t);return s||(s=ve.Xn(ve.Event.Gf),Ie.set(t,s)),s};e;const ve=self.Ls,xe=self.Ws,Ie=new WeakMap,Ce=ve.Os();self.oF=class{#IR;constructor(){const t=ve.GR.CR(Ce),s={runtime:{value:(this.#IR=t).w4().NR(),writable:!1},aF:{value:t.uF().qR(),writable:!1},sP:{value:t.iP().VR(),writable:!1}};t.lF(s),t.cF(s),Object.defineProperties(this,s),t.w4().eP(this,t)}static fF(){return ve.GR.dF()}pF(){const t=Ie.get(this);t&&(t.Kn(),Ie.delete(this))}addEventListener(t,s,i){xe.we(t),xe.We(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){xe.we(t),xe.We(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}mF(){const t=this.#IR,s=t.w4();s.gF(t),s.DO().bP()||s.D3().vP()||s.DO().yF()||s.xP()}MF(){const t=this.#IR.wF();return t?t.map(t=>t.Y3()):[]}*SF(){const t=this.#IR;if(t.TF())for(const s of t.bF())yield s.Y3()}get uid(){return this.#IR.vF()}get xF(){return this.#IR.IF()}set r3(t){xe.me(t),this.#IR.o3(t)}get r3(){return this.#IR.CF()}GF(){this.#IR.NF()}get XO(){const t=this.#IR;return t.w4().KO(t)}EF(...t){xe.Re(t);const s=new Set(t),i=this.#IR.DF();return s.re(i)}_F(t){xe.Ze(t,Set),this.#IR.AF(t)}LF(){return new Set(this.#IR.DF())}signal(t){xe.we(t);const s=this.#IR;s.w4().DO().OF(s,t)}VO(t){xe.we(t);const s=this.#IR;return s.w4().DO().RF(s,t)}}}{const Ge=self.Ls,Ne=self.Ws,Ee=Ge.Os();self.PF=class extends self.oF{#IR;#kF=!1;#FF=null;#jF=!1;#zF=null;#BF;#UF;constructor(t){super(),this.#IR=Ge.GR.CR(Ee),this.#kF=!1,this.#FF=null,this.#jF=!1,this.#zF=null,this.#BF=t?.domComponentId,this.#UF=t?.wrapperComponentId}pF(){this.WF(!1),this.QF(!1),super.pF()}JF(){return Ge.GR.YF()}VF(t){const s=this.#IR;s.w4().HF(t,s)}qF(t){const s=this.#IR;return s.w4().ZF(t,s)}XF(t,s){if(Ne.we(t),Ne.We(s),!this.#BF)throw new Error("no DOM component id set");const i=this.#IR.w4();i.KF(this.#BF,t,s)}$F(t){Ne.Re(t);for(const[s,i]of t)this.XF(s,i)}tj(t,s){if(Ne.we(t),!this.#BF)throw new Error("no DOM component id set");const i=this.#IR.w4();i.Hc(this.#BF,t,s)}sj(t,s){if(Ne.we(t),!this.#BF)throw new Error("no DOM component id set");const i=this.#IR.w4();return i.h4(this.#BF,t,s)}ij(t,s){const i=this.#IR.w4();if(!i.pO())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#BF,handler:t,data:s,responseId:null});this.tj(t,s)}WF(t){if(this.#kF!==(t=!!t)){this.#kF=t;const s=this.#IR.w4();t?(this.#FF||(this.#FF=()=>this.ej()),s.Gf().addEventListener("tick",this.#FF)):s.Gf().removeEventListener("tick",this.#FF)}}nj(){return this.#kF}ej(){}QF(t){if(this.#jF!==(t=!!t)){this.#jF=t;const s=this.#IR.w4();t?(this.#zF||(this.#zF=()=>this.rj()),s.Gf().addEventListener("tick2",this.#zF)):s.Gf().removeEventListener("tick2",this.#zF)}}hj(){return this.#jF}rj(){}oj(){return[]}aj(){return null}uj(t){}lj(){if(!this.#UF)throw new Error("no wrapper component id set");const t=this.#IR.w4();return t.cj(this.#UF)}fj(t,s){if(Ne.we(t),Ne.We(s),!this.#UF)throw new Error("no wrapper component id set");const i=this.#IR.w4();i.dj(this.#UF,t,s)}pj(t){Ne.Re(t);for(const[s,i]of t)this.fj(s,i)}mj(t,s){if(!this.#UF)throw new Error("no wrapper component id set");this.runtime.xO.gj(this.#UF,t,s)}yj(t,s){if(this.#UF)return this.runtime.xO.Mj(this.#UF,t,s);throw new Error("no wrapper component id set")}}}{let t=function(t){return class n extends t{#wj;#Sj;constructor(t){super(t);const s=De.GR.CR(Oe),i=s.Z3(),e=(this.#wj=s,this.#Sj=i,Le.set(this,s),[]),n=i.Tj();if(n){const h=i.uF().CP().GP().length;for(let t=0;t<h;++t)e.push(new self.NP(n,t))}const r={EP:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#Sj._3().N3()}get bj(){return this.#Sj.X3().BP()}get x(){return this.#Sj.YS()}set x(t){t=+t;const s=this.#Sj;isNaN(t)||s.YS()===t||(s.VS(t),s.vj())}get y(){return this.#Sj.qS()}set y(t){t=+t;const s=this.#Sj;isNaN(t)||s.qS()===t||(s.ZS(t),s.vj())}setPosition(t,s){t=+t,s=+s;const i=this.#Sj;isNaN(t)||isNaN(s)||i.YS()===t&&i.qS()===s||(i.xj(t,s),i.vj())}Ij(){const t=this.#Sj;return[t.YS(),t.qS()]}Cj(t,s){if(t=+t,s=+s,!(isNaN(t)||isNaN(s)||0===t&&0===s)){const i=this.#Sj;i.Gj(t,s),i.vj()}}get kk(){return this.#Sj.XS()}set kk(t){t=+t;const s=this.#wj,i=this.#Sj;isNaN(t)||i.XS()===t||(i.KS(t),s.w4().n4())}get Nj(){return this.#Sj.Ej()}get width(){return this.#Sj.Jp()}set width(t){t=+t;const s=this.#Sj;isNaN(t)||s.Jp()===t||(s.Kp(t),s.vj())}get height(){return this.#Sj.im()}set height(t){t=+t;const s=this.#Sj;isNaN(t)||s.im()===t||(s.Yp(t),s.vj())}DP(t,s){t=+t,s=+s;const i=this.#Sj;isNaN(t)||isNaN(s)||i.Jp()===t&&i.im()===s||(i.DG(t,s),i.vj())}getSize(){const t=this.#Sj;return[t.Jp(),t.im()]}get angle(){return this.#Sj.OP()}set angle(t){t=De.hr(+t);const s=this.#Sj;isNaN(t)||s.OP()===t||(s.LP(t),s.vj())}get Dj(){return De.lr(this.angle)}set Dj(t){this.angle=De.ur(t)}ul(){return this.#Sj._j().du()}Aj(){return this.#Sj.Lj().el()}Oj(){return this.#Sj.Rj()}get isVisible(){return this.#Sj.Sk()}set isVisible(t){t=!!t;const s=this.#wj,i=this.#Sj;i.Sk()!==t&&(i.Mk(t),s.w4().n4())}get opacity(){return this.#Sj.hD()}set opacity(t){t=De.rr(+t,0,1);const s=this.#wj,i=this.#Sj;isNaN(t)||i.hD()===t||(i.aD(t),s.w4().n4())}set Pj(t){if(_e.Re(t),t.length<3)throw new Error("expected 3 elements");ke.Fo(t[0],t[1],t[2]);const s=this.#wj,i=this.#Sj;i.kj().$o(ke)||(i.Fj(ke),s.w4().n4())}get Pj(){const t=this.#Sj.kj();return[t.Yo(),t.Vo(),t.Ho()]}set KA(t){_e.we(t);const s=Re.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#wj,e=this.#Sj;e.RS(s),i.w4().n4()}get KA(){return Pe.get(this.#Sj.Qk())}jj(){this.#Sj.zj()}Bj(){this.#Sj.Uj()}Wj(t){_e.Ze(t,Ae);const s=this.#wj,i=s.w4().VP(t);if(!i)throw new Error("invalid layer");s.Z3().Qj(i)}Jj(t,s){_e.Ze(t,n),this.#Sj.Yj(Le.get(t),s)}get zIndex(){return this.#Sj.K3()}get Vj(){return this.#Sj.Hj()}set Vj(t){this.#Sj.qj(!!t)}Ru(t,s){return _e.ue(t),_e.ue(s),this.#Sj.Zj(+t,+s)}B4(t){_e.Ze(t,n);const s=this.#wj,i=Le.get(t);return s.w4().hO().U4(s,i)}Q4(){const t=this.#wj,s=t.w4().hO().J4(t);return s?s.Y3():null}getParent(){const t=this.#wj.Xj();return t?t.Y3():null}Kj(){const t=this.#wj.$j();return t?t.Y3():null}*t5(){for(const t of this.#wj.t5())yield t.Y3()}s5(){return this.#wj.i5()}e5(t){const s=this.#wj.n5(t);return s?s.Y3():null}*children(){for(const t of this.#wj.children())yield t.Y3()}*r5(){for(const t of this.#wj.r5())yield t.Y3()}h5(t,s){_e.Ze(t,n),_e.Ne(s),s=s||{};const i=this.#wj,e=Le.get(t);i.o5(e,s)}removeChild(t){_e.Ze(t,n);const s=this.#wj,i=Le.get(t);s.a5(i)}u5(){const t=this.#wj;if(t.l5()){const s=t.Xj();s.a5(t)}}c5(){const t=this.#Sj;return{f5:t.d5(),p5:t.m5(),g5:t.y5(),M5:t.w5(),S5:t.T5(),b5:t.v5(),x5:t.I5(),C5:t.G5(),N5:t.E5()}}D5(t,s){_e.me(t),_e.me(s),this.#Sj._5(t,s)}A5(){const t=this.#Sj;t.L5(),t.vj()}O5(t,s,i){_e.me(t),_e.me(s),_e.Ge(i);const e=this.#Sj;e.R5(t,s,i)&&e.vj()}P5(t,s){let i=NaN,e=NaN,n=NaN,r=NaN,h=NaN,o=this.#Sj;if(o.k5()){const a=o.F5(),u=a.AT(t,s);null!==u&&(i=u.YS(),e=u.qS(),n=u.XS(),r=u.$S(),h=u.sT())}return{x:i,y:e,kk:n,u:r,v:h}}j5(){const t=this.#Sj;if(!t.k5())return[0,0];const s=t.F5();return[s.TT(),s.bT()]}}};0;const De=self.Ls,_e=self.Ws,Ae=self.YP,Le=new WeakMap,Oe=De.Os(),Re=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Pe=new Map([...Re.entries()].map(t=>[t[1],t[0]])),ke=De.Xn(De.Ao);self.z5=t(self.oF),self.B5=t(self.PF)}{const Fe=self.Ws;self.U5=class extends self.z5{#IR;constructor(){super(),this.#IR=self.oF.fF()}W5(){return this.#IR.J5().Q5()}focus(){this.#IR.J5().Y5()}blur(){this.#IR.J5().V5()}H5(t,s){Fe.we(t),this.#IR.J5().q5(t,s)}}}{let e=function(t){let s=Be.get(t);return s||(s=je.Xn(je.Event.Gf),Be.set(t,s)),s};e;const je=self.Ls,ze=self.Ws,Be=new WeakMap,Ue=je.Os();self.Z5=class{#IR;constructor(){const t=je.GR.CR(Ue),s={runtime:{value:(this.#IR=t).w4().NR(),writable:!1},behavior:{value:t.K5().X5(),writable:!1},sz:{value:t.ez().iz(),writable:!1}};Object.defineProperties(this,s),t.w4().eP(this,t)}static fF(){return je.GR.dF()}get nz(){return this.#IR.rz().Y3()}pF(){const t=Be.get(this);t&&(t.Kn(),Be.delete(this))}addEventListener(t,s,i){ze.we(t),ze.We(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){ze.we(t),ze.We(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}}}{const We=self.Ls,Qe=We.Os();self.hz=class{constructor(){const t=We.GR.CR(Qe),s={runtime:{value:t.w4().NR(),writable:!1},behavior:{value:t.K5().X5(),writable:!1},name:{value:t.kc(),writable:!1}};Object.defineProperties(this,s)}}}{const Je=self.Ls,Ye=Je.Os();self.oz=class{#IR;constructor(){const t=Je.GR.CR(Ye),s={runtime:{value:(this.#IR=t).w4().NR(),writable:!1}};Object.defineProperties(this,s)}nP(){return this.#IR.dP().map(t=>t.Y3())}static JR(t){if(!t)return null;const s=Je.GR.az(t);return s?s.X5():null}}}{const Ve=self.Ls,He=self.Ws,qe=Ve.Xn(Ve.Ao);self.NP=class{#IR;constructor(t,s){this.#IR=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){const t=this.#IR.GP();return t[this.index].kc()}get isActive(){return this.#IR.uz(this.index)}set isActive(t){t=!!t;const s=this.#IR;s.uz(this.index)!==t&&(s.lz(this.index,t),s.cz(),s.w4().n4())}setParameter(t,s){He.me(t),t=Math.floor(+t);const i=this.#IR,e=i.fz(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof Ve.Ao){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");qe.Fo(s[0],s[1],s[2]),s=qe}else if("number"!=typeof s)throw new TypeError("expected number");const n=i.dz(this.index,t,s);n&&i.uz(this.index)&&i.w4().n4()}getParameter(t){He.me(t),t=Math.floor(+t);const s=this.#IR,i=s.fz(this.index,t);if(null===i)throw new RangeError("invalid index");return i instanceof Ve.Ao?[i.Yo(),i.Vo(),i.Ho()]:i}}}self.pz=class{#IR;constructor(t){this.#IR=t,Object.defineProperties(this,{name:{value:t.kc(),writable:!1}})}get speed(){return this.#IR.mz()}get gz(){return this.#IR.yz()}get repeatCount(){return this.#IR.Mz()}get wz(){return this.#IR.Sz()}get Tz(){return this.#IR.bz()}get frameCount(){return this.#IR.vz()}xz(){return this.#IR.Iz().map(t=>t.Cz())}*frames(){for(const t of this.#IR.Iz())yield t.Cz()}};self.y4=class{#IR;constructor(t){this.#IR=t}static g4(t){return t.#IR}get width(){return this.#IR.Jp()}get height(){return this.#IR.im()}getSize(){const t=this.#IR;return[t.Jp(),t.im()]}Gz(t){return t.Nz(this)}Ez(){return this.#IR.aN().du()}};{const Ze=self.Ws;self.Dz=class extends self.y4{#IR;constructor(t){super(t._z()),this.#IR=t,Object.defineProperties(this,{duration:{value:t.Az(),writable:!1},Lz:{value:t.Oz(),writable:!1},Rz:{value:t.Pz(),writable:!1}})}kz(){const t=this.#IR;return[t.Oz(),t.Pz()]}Fz(){return this.#IR.jz()}zz(t){return this.Bz(t)[0]}Uz(t){return this.Bz(t)[1]}Bz(t){let s=this.#IR,i=null;if("number"==typeof t)i=s.Wz(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.Qz(t)}return i?[i.YS(),i.qS()]:this.kz()}Jz(){const t=this.#IR.Yz();return t?t.Il():0}Vz(t){return this.qz(t)[0]}Zz(t){return this.qz(t)[1]}qz(t){Ze.me(t),t=Math.floor(t);const s=this.#IR.Yz();if(!s||t<0||t>=s.Il())return[0,0];const i=s.xl(),e=i[2*t],n=i[2*t+1];return[e,n]}get tag(){return this.#IR.Xz()}}}{let s=function(t){const s=Ke.get(t);if(s.Kz())throw new Error("timeline/tween was released and is no longer valid");return s};s;const Xe=self.Ws,Ke=new WeakMap;self.$z=class{constructor(t){Ke.set(this,t),t.w4().eP(this,t)}pause(){s(this).tB()}resume(){s(this).sB()}stop(){s(this).Hf()}EF(t){return s(this).iB(t)}set time(t){Xe.me(t),s(this).eB(t)}get time(){return s(this).R_()}set totalTime(t){Xe.me(t),s(this).nB(t)}get totalTime(){return s(this).rB()}set gz(t){s(this).hB(!!t)}get gz(){return s(this).oB()}set Tz(t){s(this).aB(!!t)}get Tz(){return s(this).uB()}set playbackRate(t){Xe.me(t),s(this).lB(t)}get playbackRate(){return s(this).cB()}get progress(){const t=s(this);return t.R_()/t.rB()}get tags(){return s(this).fB()}get finished(){return s(this).dB()}get isPlaying(){return s(this).IsPlaying()}get pB(){return s(this).mB()}get gB(){return Ke.get(this).Kz()}}}{let i=new WeakMap;self.yB=class extends self.$z{constructor(t){super(t),i.set(this,t);const s={name:{value:t.kc(),writable:!1}};Object.defineProperties(this,s)}}}{let i=function(t){const s=n.get(t);if(s.Kz())throw new Error("tween was released and is no longer valid");return s},e=(i,self.Ws),n=new WeakMap,r=new WeakMap,h=null;self.MB=class extends self.$z{constructor(t,s,i){super(t),h=h||i.easeToIndexFunc,n.set(this,t),s&&r.set(this,s)}stop(){const t=i(this),s=r.get(this);s.ReleaseTween(t)}wB(t){e.we(t);const s=self.$l.Mc(h(t));i(this).SB(s)}get nz(){const t=i(this).TB();return t?t.Y3():null}get bB(){return i(this).vB()}set bB(t){i(this).xB(!!t)}get value(){const t=i(this);if("value"!==t.IB())throw new Error("not a value tween");return t.GB("value").CB()}}}self.NB=class extends self.xR{constructor(){super()}};{const $e=self.Ls,tn=self.Ws,sn=$e.Os();self.EB=class extends self.NB{#IR;#BF;#DB=0;#_B=new Map;constructor(t){if(super(),this.#IR=$e.GR.CR(sn),!t?.domComponentId)throw new Error("no DOM component ID specified");this.#BF=t.domComponentId,this.AB("elem-focused",t=>t.LB()),this.AB("elem-blurred",t=>{t&&t.OB()})}RB(t){const s=this.#DB++;return this.#_B.set(s,t),s}PB(t){this.#_B.delete(t)}AB(t,i){const s=this.#IR.w4();s.KF(this.#BF,t,t=>{const s=this.#_B.get(t.elementId);i(s,t)})}kB(t){tn.Re(t);for(const[s,i]of t)this.kB(s,i)}}}{const en=self.Ls,nn=(new WeakMap,en.Os());self.jB=class extends self.tP{#IR;constructor(){super(),this.#IR=en.GR.CR(nn)}zB(){}BB(){return this.#IR._z().UB()}WB(t){}QB(t){}JB(){}YB(t){}}}{const rn=self.Ls,hn=(new WeakMap,rn.Os());self.VB=class extends self.B5{#IR;#HB=null;#qB=null;constructor(t){super(t),this.#IR=rn.GR.CR(hn)}pF(){if(super.pF(),this.#HB){const t=this.#IR.w4().Gf();t.removeEventListener("renderercontextlost",this.#HB),t.removeEventListener("renderercontextrestored",this.#qB),this.#HB=null,this.#qB=null}}ZB(){if(!this.#HB){this.#HB=()=>this.XB(),this.#qB=()=>this.KB();const t=this.#IR.w4().Gf();t.addEventListener("renderercontextlost",this.#HB),t.addEventListener("renderercontextrestored",this.#qB)}}XB(){}KB(){}$B(t){}}}{const on=self.Ls,an=on.Xn(on.Rect),un=new WeakMap,ln=on.Os();self.tU=class extends self.VB{#sU=-1;#iU=!0;#eU=!1;#nU=!1;#rU=-.2;#hU=on.Xn(on.Rect,0,0,-1,-1);#oU=0;#aU=0;#uU=-1;#lU=-1;#cU=!1;constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const s=on.GR.CR(ln),i=(un.set(this,s),this.#sU=this.sP.RB(this),s.w4().lR());this.#oU=i.fU(),this.#aU=i.dU(),this.WF(!0)}pF(){super.pF(),this.sP.PB(this.#sU),this.pU("destroy"),this.#sU=-1,un.delete(this)}mU(){const t=un.get(this).w4();if(t.pO())throw new Error("not valid in worker mode");return this.gU("get-element")}pU(t,s){(s=s||{}).elementId=this.#sU,this.tj(t,s)}gU(t,s){return(s=s||{}).elementId=this.#sU,this.ij(t,s)}yU(t,s){return(s=s||{}).elementId=this.#sU,this.sj(t,s)}MU(t){t=t||{};const s=un.get(this).Z3();t.elementId=this.#sU,t.isVisible=s.Sk(),t.htmlIndex=s.X3().wU(),t.htmlZIndex=s.SU(),Object.assign(t,this.TU()),this.#iU=!!t.isVisible,this.ij("create",t),this.bU(!0)}vU(t){this.#iU!==(t=!!t)&&(this.#iU=t,this.pU("set-visible",{isVisible:t}))}ej(){this.bU(!1)}xU(){const t=un.get(this).w4(),s=t.lR().IU();return"Android"===on.ei.ni&&("scale-inner"===s||"scale-outer"===s||"crop"===s)}bU(l){const c=un.get(this);if(!c.CU()){let t=c.Z3(),s=t.X3(),i=t._j(),[e,n]=s.tF(i.uu(),i.lu()),[r,h]=s.tF(i.cu(),i.fu()),o=c.w4().lR(),a=o.pR(),u=o.gR();if(t.Sk()&&s.Sk())if(!this.xU()&&(r<=0||h<=0||a<=e||u<=n))this.vU(!1);else{an.set(e,n,r,h);const f=o.fU(),d=o.dU(),p=s.wU(),m=t.SU();if(!l&&an.equals(this.#hU)&&this.#oU===f&&this.#aU===d&&this.#uU===p&&this.#lU===m)this.vU(!0);else{this.#hU.I(an),this.#oU=f,this.#aU=d,this.#uU=p,this.#lU=m,this.vU(!0);let t=null;this.#nU&&(t=s.GU()+this.#rU),this.pU("update-position",{left:Math.round(this.#hU.uu()),top:Math.round(this.#hU.lu()),width:Math.round(this.#hU.width()),height:Math.round(this.#hU.height()),htmlIndex:p,htmlZIndex:m,fontSize:t})}}else this.vU(!1)}}NU(){this.gU("focus",{focus:!0})}EU(){this.gU("focus",{focus:!1})}LB(){this.#eU=!0}OB(){this.#eU=!1}DU(){return this.#eU}_U(t,s){this.postToDOMElement("set-css-style",{prop:on.Eo(t),val:s})}AU(t,s){this.postToDOMElement("set-attribute",{name:t,val:s})}LU(t){this.postToDOMElement("remove-attribute",{name:t})}OU(){this.#cU||(this.#cU=!0,Promise.resolve().then(()=>{this.#cU=!1,this.pU("update-state",this.TU())}))}TU(){}RU(){return this.#sU}}}self.PU=class extends self.oz{constructor(){super()}};self.kU=class extends globalThis.hz{constructor(){super()}zB(){}};{const cn=self.Ls,fn=new WeakMap,dn=cn.Os();self.FU=class extends self.Z5{#kF=!1;#jF=!1;#jU=!1;constructor(){super(),fn.set(this,cn.GR.CR(dn))}pF(){super.pF(),this.WF(!1),this.QF(!1),this.zU(!1),fn.delete(this)}JF(){return cn.GR.YF()}BU(){}VF(t){const s=fn.get(this);s.w4().HF(t,s.rz(),s.ez())}qF(t){const s=fn.get(this);return s.w4().ZF(t,s.rz(),s.ez())}WF(t){if(this.#kF!==(t=!!t)){this.#kF=t;const s=fn.get(this).w4();t?s.UU(this):s.WU(this)}}nj(){return this.#kF}ej(){}QF(t){if(this.#jF!==(t=!!t)){this.#jF=t;const s=fn.get(this).w4();t?s.QU(this):s.JU(this)}}hj(){return this.#jF}rj(){}zU(t){if(this.#jU!==(t=!!t)){this.#jU=t;const s=fn.get(this).w4();t?s.YU(this):s.VU(this)}}HU(){return this.#jU}qU(){}oj(){return[]}aj(){return null}uj(t){}}}{let e=self.Ws,n=null;self.IO=class{constructor(t){n=t}u4(t){n.l4(t)}gj(t,s,i){e.we(t),e.we(s),e.Pe(i),n.ZU(t,s,i)}Mj(t,s,i){return e.we(t),e.we(s),e.Pe(i),n.XU(t,s,i)}KU(t){return e.Se(t),new self.$U(n,t)}set t6(t){n.s6(!!t)}get t6(){return n.i6()}e6(t){n.n6(!!t)}r6(t){e.ue(t);const s=n.h6(t);return s?s.qR():null}}}self.$U=class{#o6;#a6;#u6;#l6;#c6;#f6;constructor(t,s){const i=(this.#o6=t).DO(),e=t.PO(),n=(this.#a6=e,this.#u6=e.d6(),t.WO()),r=(this.#l6=n.p6(),this.#c6=n.m6(e),i.g6()),h=r.m6();this.#f6=h,s&&h.y6(s),t.M6(!1)}w6(){const t=this.#o6.DO(),s=this.#u6,i=this.#f6;t.S6(s),this.#a6.T6(this.#l6,this.#c6),t.b6(s),i.v6(i.$L()+1)}get x6(){return this.#f6.I6()}release(){const t=this.#o6,s=t.WO(),i=t.DO().g6();t.M6(!0),i.C6(),s.C6()}};{let d=self.Ls,n=self.Ws,p=null,r=null;self.G6=class{constructor(t,s){r=t,p=s}N6(){p.mD()}E6(t){p.dD(t)}D6(){p.xM()}_6(){p.MM()}A6(){p._M()}setColor(t){p.oD(t[0],t[1],t[2],t[3])}L6(t,s,i,e){p.oD(t,s,i,e)}O6(){p.uD()}R6(t){p.aD(t)}P6(t){p.KM(t)}k6(){p.$M()}rect(t){p.MD(t.left,t.top,t.right,t.bottom)}F6(t,s,i,e){p.MD(t,s,i,e)}j6(t){p.ju(d.ju.nl(t))}z6(t,s,i,e,n,r,h,o){p.jw(t,s,i,e,n,r,h,o)}B6(t,s){p.cw(d.ju.nl(t),d.Rect.pu(s))}U6(t,s){p.TD(d.ju.nl(t),d.ju.nl(s))}W6(t,s,i,e,n,r,h,o,a,u,l,c,f){p.bD(t,s,i,e,n,r,h,o,a,u,l,c,d.Rect.pu(f))}Q6(t,s,i,e,n,r,h,o,a,u,l,c,f){p.hw(t,s,i,e,n,r,h,o,a,u,l,c,d.ju.nl(f))}J6(t,s,i){p.vD(t,s,i)}Y6(t){p.Fw(t)}line(t,s,i,e){p.am(t,s,i,e)}V6(t,s,i,e,n,r){p.ow(t,s,i,e,n,r)}H6(t,s,i,e){p.fw(t,s,i,e)}q6(t){p.gw(d.Rect.pu(t))}Z6(t){p.yw(d.ju.nl(t))}X6(t){p.xw(t)}K6(){p.Iw()}tW(t){p.Ew(t)}sW(){p.Lw()}iW(t){n.Xe(t,self.eW);const s=t?r.VP(t):null;p.cD(s)}nW(t,s){const i=self.y4.g4(t);if(i)return i.rW(p,{WT:s?.WT??"clamp-to-edge",QT:s?.QT??"clamp-to-edge",JT:s?.JT??"trilinear",HT:s?.HT??!0});throw new Error("invalid IImageInfo")}hW(t){const s=self.y4.g4(t);if(!s)throw new Error("invalid IImageInfo");s.KC()}Nz(t){const s=self.y4.g4(t);if(!s)throw new Error("invalid IImageInfo");const i=s.lb();return self.eW.oW(r,i)}aW(t,s,i){n.me(t),n.me(s);const e=p.tb(t,s,{WT:i?.WT??"clamp-to-edge",QT:i?.QT??"clamp-to-edge",JT:i?.JT??"trilinear",HT:i?.HT??!0});return self.eW.oW(r,e)}uW(t,s,i){n.Ze(s,self.eW);const e=r.VP(s);p.oN(t,e,{premultiplyAlpha:i?.premultiplyAlpha??!0})}deleteTexture(t){n.Ze(t,self.eW);const s=r.VP(t);p.nb(s)}lW(){const t=p.tS();return new self.cW(r,t)}fW(){r.lR().dW(p)}pW(t){n.Ze(t,globalThis.YP);const s=r.VP(t);s.mW(p)}}}{const pn=new WeakMap,mn=new WeakMap;self.eW=class{constructor(t,s){pn.set(this,{runtime:t,gW:s}),mn.set(s,this),t.eP(this,s),Object.defineProperties(this,{width:{value:s.Jp(),writable:!1},height:{value:s.im(),writable:!1}})}static oW(t,s){if(!s)return null;const i=mn.get(s);return i||new self.eW(t,s)}}}{let e=function(t){return yn.get(t).yW};e;const gn=self.Ws,yn=new WeakMap;self.cW=class{constructor(t,s){yn.set(this,{runtime:t,yW:s}),t.eP(this,s)}release(){e(this).Kn()}set MW(t){gn.we(t),e(this).hG(t)}get MW(){return e(this).uC()}set wW(t){gn.me(t),e(this).oG(t)}get wW(){return e(this).aG()}set lineHeight(t){gn.me(t),e(this).lG(t)}get lineHeight(){return e(this).cG()}set SW(t){e(this).fG(t)}get SW(){return e(this).dG()}set TW(t){e(this).pG(t)}get TW(){return e(this).mG()}setColor(t){gn.Re(t),this.bW(t[0],t[1],t[2])}bW(t,s,i){e(this).SG(t,s,i)}vW(t){gn.we(t),e(this).PS(t)}set xW(t){e(this).TG(t)}get xW(){return e(this).bG()}set verticalAlign(t){e(this).vG(t)}get verticalAlign(){return e(this).xG()}set IW(t){e(this).IG(t)}get IW(){return e(this).CG()}set GW(t){e(this).GG(t)}get GW(){return e(this).NG()}set text(t){gn.we(t),e(this).qc(t)}get text(){return e(this).EG()}DP(t,s,i){gn.me(t),gn.me(s),gn.me(i),e(this).DG(t,s,i)}Gz(){const{runtime:t,yW:s}=yn.get(this),i=s.lb();return self.eW.oW(t,i)}Ez(){return e(this).aN().du()}NW(t){gn.We(t),e(this).tG=t}EW(){e(this).KC()}get DW(){return e(this).AG()}get _W(){return e(this).OG()}}}{let e=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return wn.get(i)||""},r=function(e){return new Promise((t,s)=>{const i=document.createElement("script");i.onload=t,i.onerror=s,i.async=!1,i.type="module",i.src=e,document.head.appendChild(i)})};e,r;const w=self.Ls,Mn=new Set(["local","remote"]),wn=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);w.AW=class extends w.qn{constructor(t,s){super();const i=s.exportType,e=(this.Jc=t,this.LW="folders",this.OW=new Map,this.RW="cordova"===i,this.PW=!!s.isiOSCordova,this.kW=!!s.isFileProtocol,this.FW=s.swClientId,this.jW=s.supportedAudioFormats||{},this.zW=new Map,this.BW=!1,this.UW=s.scriptFolder,this.WW="",this.QW="",this.JW="",this.YW=s.fileMap||new Map,this.VW=new Map,"html5"===i||"scirra-arcade"===i||"instant-games"===i);this.HW=e?"remote":"local",this.qW=new Map,this.ZW=[],this.XW=[],this.KW=!1,this.$W=0,this.tQ=0,this.sQ=0,this.iQ=!1,this.eQ=w.Xn(w.o1,()=>this.nQ(),50),this.rQ=w.Xn(w.X0,Math.max(w.hardwareConcurrency,8)),this.hQ=w.Xn(w.X0,20),this.oQ=new self.c4(this)}Kn(){for(const t of this.qW.values())t.Kn();this.qW.clear(),w.Nh(this.XW),this.Jc=null}w4(){return this.Jc}aQ(t){this.LW=t}G4(){return this.LW}uQ(){return this.UW}lQ(t){this.WW=t}D4(){return this.WW}cQ(t){this.QW=t}fQ(){return this.QW}dQ(t){this.JW=t}pQ(){return this.JW}mQ(){return this.kW}fo(t,s){return s=s||this.HW,w.ho(t)?("flat"===this.LW&&(t=t.toLowerCase()),this.RW&&this.kW?this.gQ(t):"playable-ad-single-file"===this.Jc.hR()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===s?this.rQ:this.hQ).Zl(()=>w.fo(t))):w.fo(t)}do(t){return w.ho(t)?("flat"===this.LW&&(t=t.toLowerCase()),this.RW&&this.kW?this.yQ(t):"playable-ad-single-file"===this.Jc.hR()?w.mo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.HW?this.rQ:this.hQ).Zl(()=>w.do(t))):w.do(t)}lo(t){return w.ho(t)?("flat"===this.LW&&(t=t.toLowerCase()),this.RW&&this.kW?this.MQ(t):"playable-ad-single-file"===this.Jc.hR()?w.yo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.HW?this.rQ:this.hQ).Zl(()=>w.lo(t))):w.lo(t)}async co(t){const s=await this.lo(t);return JSON.parse(s)}wQ(t,s){return"flat"===this.LW&&(t=t.toLowerCase()),this.Jc.h4("runtime","cordova-fetch-local-file",{filename:t,as:s})}MQ(t){return this.wQ(t,"text")}async gQ(t){const s=await this.wQ(t,"buffer"),i=e(t);return new Blob([s],{type:i})}async SQ(t){"flat"===this.LW&&(t=t.toLowerCase());let s=this.OW.get(t);if(!s){const i=await this.gQ(t);s=URL.createObjectURL(i),this.OW.set(t,s)}return s}yQ(t){return this.wQ(t,"buffer")}N4(t){"flat"===this.LW&&(t=t.toLowerCase());let s=this.WW+t;return"Gecko"===w.ei.li&&"preview"===this.Jc.hR()?this.TQ(s):s}I4(t){return w.ro(t)?Promise.resolve(t):this.RW&&this.kW?this.SQ(t):"playable-ad-single-file"===this.Jc.hR()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.LW&&(t=t.toLowerCase()),Promise.resolve(t))}bQ(s){if(w.ro(s)||"preview"!==this.Jc.hR()||!this.FW||!s)return s;try{const t=new URL(s,location.href);return t.searchParams.set("__c3_client_id",this.FW),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+s),s}}vQ(t){return this.I4(t)}xQ(t){if(t.IQ&&!Mn.has(t.IQ))throw new Error("invalid load policy");let s=this.qW.get(t.url);return s||(s=w.Xn(w.CQ,this,{url:t.url,size:t.size||0,IQ:t.IQ||this.HW}),this.qW.set(s.GQ(),s),this.KW)||(this.$W+=s.Ql(),this.XW.push(s.NQ().then(()=>this.EQ(s.Ql())))),s}DQ(t){this.qW.delete(t.GQ())}async _Q(){try{await Promise.all(this.XW),this.sQ=1}catch(t){console.error("Error loading: ",t),this.iQ=!0,this.nQ()}}AQ(){this.KW=!0}LQ(){return this.iQ}EQ(t){this.tQ+=t,this.eQ.T1()}nQ(){const t=w.Xn(w.Event,"loadingprogress");this.sQ=w.rr(this.tQ/this.$W,0,1),t.progress=this.sQ,this.Jc.Gf().dispatchEvent(t)}OQ(){return this.sQ}RQ(t){w.Ah(this.ZW,t),this.ZW.length&&this.XW.push(this.PQ())}async PQ(){const t=[],s=[];for(const[i,e,n]of this.ZW)this.$W+=n,t.push(this.kQ(i,e,s).then(()=>this.EQ(n)));await Promise.all(t),this.Jc.pO()&&0<s.length&&await this.Jc.h4("runtime","load-webfonts",{webfonts:s})}async kQ(s,i,e){try{let t=await this.I4(i);"Gecko"===w.ei.li&&(s=`'${s}'`),("Gecko"===w.ei.li&&"preview"===this.Jc.hR()||"playable-ad-single-file"===this.Jc.hR())&&(t=this.TQ(t));const n=new FontFace(s,`url('${t}')`);(this.Jc.pO()?self:document).fonts.add(n),await n.load(),this.Jc.pO()&&e.push({name:s,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${s}': `,t)}}d4(t){return!!this.jW[t]}FQ(t,s){this.BW=!!s;for(const[i,e,n]of t)this.zW.set(i,{fileName:i,jQ:e.map(t=>({type:t[0],zQ:t[1],BQ:i+t[1],fileSize:t[2]})),UQ:n})}WQ(t){"flat"===this.LW&&(t=t.toLowerCase());const s=this.zW.get(t);if(!s)return null;let i=null;for(const e of s.jQ)if(i||"audio/webm; codecs=opus"!==e.type||(i=e),this.d4(e.type))return e;return i}QQ(t){const s=this.WQ(t);return s?{url:this.N4(s.BQ),type:s.type}:null}JQ(){if(this.BW){const t=[];for(const s of this.zW.values())if(!s.UQ){const i=this.WQ(s.fileName);i&&t.push({YQ:s.fileName,url:this.N4(i.BQ),type:i.type,fileSize:i.fileSize})}return t}return[]}VQ(t){return"preview"===this.Jc.hR()&&(t=new URL(t,location.href).toString()),this.YW.get(t)||null}TQ(t){let s=this.VW.get(t);if(!s){const i=this.VQ(t);if(!i)return t;s=URL.createObjectURL(i),this.VW.set(t,s)}return s}iO(){return this.oQ}async O4(...t){const s=await Promise.all(t.map(t=>this.I4(t)));if(this.Jc.pO())if(1===t.length){const i=t[0];await import((w.ho(i)?"./":"")+i)}else{const e=t.map(t=>`import "${w.ho(t)?"./":""}${t}";`).join("\n"),n=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));await import(n)}else await Promise.all(s.map(t=>r(t)))}async P4(t){if(WebAssembly.compileStreaming){const s=await this.I4(t);return WebAssembly.compileStreaming(fetch(s))}{const i=await w.do(t);return WebAssembly.compile(i)}}async j4(t){const s=await this.I4(t);return this.Jc.h4("runtime","add-stylesheet",{url:s})}}}{const Sn=self.Ls;Sn.HQ=class extends Sn.qn{constructor(t,s){super(),this.qQ=t,this.Jc=t.w4(),this.ZQ=s.url||"",this.XQ=s.size,this.KQ=s.IQ,this.$Q=s.blob||null,this.t8=!!this.$Q,this.bg=null}Kn(){this.bg=null,this.qQ=null,this.Jc=null,this.$Q=null}GQ(){return this.ZQ}Ql(){return this.XQ}NQ(){return"local"===this.KQ||this.$Q?(this.t8=!0,Promise.resolve()):(this.bg||(this.bg=this.qQ.fo(this.ZQ,this.KQ).then(t=>(this.t8=!0,this.bg=null,this.$Q=t)).catch(t=>{console.error("Error loading resource: ",t),this.bg=null})),this.bg)}s8(){return this.t8}i8(){return this.$Q?Promise.resolve(this.$Q):this.bg||this.qQ.fo(this.ZQ,this.KQ)}}}{const Tn=self.Ls,ur=new Tn.X0,lr=new Set;Tn.CQ=class extends Tn.HQ{constructor(t,s){super(t,s),this.e8=null,this.n8=null,this.td=0,this.r8=-1,this.h8=-1,lr.add(this)}Kn(){if(0!==this.td)throw new Error("released image asset which still has texture references");this.qQ.DQ(this),this.e8=null,lr.delete(this),super.Kn()}static o8(){for(const t of lr)t.e8=null,t.n8=null,t.td=0}rW(t,s){return s=s||{},this.td++,this.n8?Promise.resolve(this.n8):(this.e8||(s.YT=this.Jc.lR().a8(),this.e8=this.u8(t,s)),this.e8)}async u8(s,i){try{const e=await this.i8();return 0===this.td?this.e8=null:await ur.Zl(async()=>{const t=await s.HD(e,i);return this.e8=null,0===this.td?(s.nb(t),null):(this.n8=t,this.r8=t.Jp(),this.h8=t.im(),this.n8)})}catch(t){throw console.error("Failed to load texture: ",t),t}}KC(){if(this.td<=0)throw new Error("texture released too many times");if(this.td--,0===this.td&&this.n8){const t=this.n8.mS();t.nb(this.n8),this.n8=null}}l8(){return this.td}lb(){return this.n8}Jp(){return this.r8}im(){return this.h8}async c8(){const t=await this.i8();return Tn.Ri.ImageBitmap?createImageBitmap(t):Tn.wo(t)}}}{let t=function(t,s){return t.Z3().f8()-s.Z3().f8()};t;const cr=self.Ls;cr.d8=class extends cr.qn{constructor(t,s,i){super(),this.p8=t,this.za=s,this.Ba=i,this.m8=[],this.g8=!0,this.y8=new Set,this.M8=!1}Kn(){cr.Nh(this.m8),this.y8.clear(),this.p8=null}Hf(){cr.Nh(this.m8),this.g8=!0,this.y8.clear(),this.M8=!1}w8(){this.g8=!1}Bl(){if(this.m8.length){if(this.m8.length>this.y8.size)return!1;this.S8()}return!0}T8(t){this.y8.has(t)?(this.y8.delete(t),0===this.y8.size&&(this.M8=!1)):(this.m8.push(t),this.g8=1===this.m8.length)}h0(t){this.y8.add(t),this.M8=!0,50<=this.y8.size&&this.S8()}S8(){this.M8&&(this.m8.length===this.y8.size?this.Hf():(cr.kh(this.m8,this.y8),this.y8.clear(),this.M8=!1))}b8(){this.g8||(this.m8.sort(t),this.g8=!0)}v8(t){this.S8(),this.b8(),this.m8.length&&t.push(this.m8)}}}{const fr=self.Ls;fr.x8=class extends fr.qn{constructor(t,s){super(),this.I8=t,this.C8=s,this.G8=fr.Xn(fr.Fl)}Kn(){this.G8.Kn(),this.G8=null}N8(t,s,i){let e=this.G8.Xs(t,s);return e||(i?(e=fr.Xn(fr.d8,this,t,s),this.G8.Set(t,s,e),e):null)}E8(t){return Math.floor(t/this.I8)}D8(t){return Math.floor(t/this.C8)}_8(e,n,r){if(n)for(let i=n.uu(),t=n.cu();i<=t;++i)for(let t=n.lu(),s=n.fu();t<=s;++t)if(!r||!r.Ru(i,t)){const h=this.N8(i,t,!1);h&&(h.h0(e),h.Bl())&&this.G8.Ul(i,t)}if(r)for(let i=r.uu(),t=r.cu();i<=t;++i)for(let t=r.lu(),s=r.fu();t<=s;++t)n&&n.Ru(i,t)||this.N8(i,t,!0).T8(e)}A8(t,s){let i=this.E8(t.uu()),e=this.D8(t.lu()),n=this.E8(t.cu()),r=this.D8(t.fu());for(;i<=n;++i)for(let t=e;t<=r;++t){const h=this.N8(i,t,!1);h&&h.v8(s)}}L8(t){let s=t.uu(),i=t.lu(),e=t.cu(),n=t.fu();for(;s<=e;++s)for(let t=i;t<=n;++t){const r=this.N8(s,t,!1);r&&r.w8()}}}}{let h=function(t,s){return t.Z3().f8()-s.Z3().f8()},t=function(t,s){return t.Z3().XS()-s.Z3().XS()};h,t;const S=self.Ls,dr=new S.Rect,pr=new S.ju,mr=[],gr=(new S.Rect,new S.Rect,self.gs),In=gr.xs,Wn=gr.Is,xn=gr.Ss,yr=xn.create(),Mr=In.create(),wr=Wn.create(),Sr=In.create(),Tr=In.create(),br=In.create(),vr=S.Xn(S.ja),xr=(S.Xn(S.Rect),[]),Ir=[],Cr=[],Gr={name:"",sid:-1,O8:!1,isVisible:!0,isInteractive:!0,vk:!1,backgroundColor:[1,1,1,1],Fk:!0,P8:[1,1],opacity:1,Bk:!1,k8:!1,F8:!1,j8:!1,scaleRate:1,KA:0,kk:0,z8:[],B8:[],U8:[]};S.W8=class extends S.qn{constructor(t,s,i){super(),i=Object.assign({},Gr,i),this.Q8=t,this.Jc=t.w4(),this.J8=s,this.er=i.name,this.Ag=-1,this.Y8=!!i.vk,this.V8=-1,this.H8=i.sid,this.q8=!!i.O8,this.Z8=!!i.isVisible,this.X8=!!i.isInteractive,this.K8=S.Xn(S.Ao),this.K8.Na(i.backgroundColor),this.tJ=!!i.Fk,this.sJ=i.P8[0],this.iJ=i.P8[1],this.AS=S.Xn(S.Ao,1,1,1,i.opacity),this.eJ=S.Xn(S.Ao),this.nJ=!!i.Bk,this.rJ=!!i.k8,this.hJ=!!i.F8,this.oJ=!!i.j8,this.aJ=i.scaleRate,this._S=i.KA,this.uJ=null,this.lJ=1,this.LS=i.kk,this.cJ=0,this.fJ=0,this.dJ=0,this.pJ=!1,this.VN=S.Xn(S.Rect),this.mJ=S.Xn(S.Rect),this.gJ=S.Xn(S.Rect),this.yJ=!0,this.V2=xn.create(),this.MJ=!0,this.FA=xn.create(),this.wJ=!0,this.SJ=S.Xn(S.jg.Wg),this.TJ=!0,this.bJ=[],this.vJ=i.z8,this.xJ=[],this.IJ=[],this.CJ=new Map,this.m8=[],this.GJ=!1,this.NJ=!1,this.EJ=!1;const n=this.Jc.lR();this.DJ=S.Xn(S._J,this,i.B8),this.qL=S.Xn(S.jg.H_,n.AJ(),{k_:(t,s)=>{const i=s.BL(),e=i.QD();t.PS(i.LJ()),t.KD(e),t.$D(e),n.OJ(e)},j_:t=>this.CP().RJ(t)}),this.PJ=!0,this.kJ=!0,this.FJ=null,this.jJ=[],this.zJ=!1,this.BJ=S.Xn(S.Rect,0,0,-1,-1),this.UJ=S.Xn(S.Rect,0,0,-1,-1),this.WJ=new self.YP(this),this.QJ(),this.JJ()&&(this.FJ=S.Xn(S.x8,this.Jc.gO(),this.Jc.MO())),this.YJ=i.U8.map(t=>S.W8.VJ(this.Q8,this,t))}HJ(){for(const t of this.vJ){const s=this.Jc.qJ(t[1]);this.Q8.ZJ(s),s.XJ()||(s.KJ(t),s.$J(this.Ag)),this.xJ.push(t),this.CJ.set(t[2],t)}S.Ah(this.bJ,this.xJ),this.vJ=null}static VJ(t,s,i){return S.Xn(S.W8,t,s,{name:i[0],sid:i[2],isVisible:i[3],isInteractive:i[13],vk:i[19],backgroundColor:i[4].map(t=>t/255),Fk:i[5],P8:[i[6],i[7]],opacity:i[8],Bk:i[9],k8:i[17],F8:i[18],j8:i[10],scaleRate:i[11],KA:i[12],kk:i[16],z8:i[14],B8:i[15],U8:i[20]})}Kn(){for(const t of this.YJ)t.Kn();S.Nh(this.YJ);for(const s of this.m8)this.Jc.gF(s);S.Nh(this.m8),this.DJ.Kn(),this.DJ=null,this.qL.Kn(),this.qL=null,this.WJ=null,this.J8=null,this.Q8=null,this.Jc=null}tY(t){return this.CJ.get(t)}sY(n){let r=this.Q8.iY(),h=0,o=this.xJ;for(let e=0,t=o.length;e<t;++e){let t=o[e],s=this.Jc.qJ(t[1]),i=!0;if(!s.eY()||r){const a=this.Jc.nY(t,this,!0);n.push(a),s.rY()&&(i=!1,this.IJ.push(a.vF()))}i&&(o[h]=o[e],++h)}S.Gh(o,h),this.Jc.xP(),this.e4()}hY(t,s){if(!t.iP().AR())throw new Error("instance is not of world type");const i=t.Z3();if(i.X3()!==this)throw new Error("instance added to wrong layer");this.m8.push(t),0!==i.XS()&&(this.EJ=!0),s&&this.JJ()&&t.Z3().vj(),this.e4(t)}aY(t){this.m8.includes(t)||(this.m8.push(t),0!==t.Z3().XS()&&(this.EJ=!0),this.e4(t))}uY(t,s){const i=t.Z3();if(i.X3()!==this)throw new Error("instance added to wrong layer");this.m8.unshift(t),0!==i.XS()&&(this.EJ=!0),this.e4(t),s&&this.JJ()&&t.Z3().vj()}lY(t,s){const i=this.m8.indexOf(t);i<0||(s&&this.JJ()&&t.Z3().cY(),this.m8.splice(i,1),this.e4(t),this.fY())}dY(){this.EJ=!0}fY(){0===this.m8.length&&(this.EJ=!1)}pY(t){if(t){const s=new Set;for(const i of this.m8){const e=i.Z3().f8();0<=e&&s.add(e)}let t=-1;for(const n of this.m8){const r=n.Z3();if(!(0<=r.f8())){for(++t;s.has(t);)++t;r.mY(t)}}}this.m8.sort(h)}gY(){}yY(){for(const t of this.m8)t.uF().rY()||this.Jc.gF(t);this.Jc.xP(),S.Nh(this.m8),this.EJ=!1,this.e4()}MY(s,t,i,e,n,r){const h=this.Jc.DO(),o=this.Jc.wY(),a=s.SY(),u=[];for(const l of this.xJ){const c=l[0],f=c[0],d=c[1];if(t.Ru(f,d)){const p=o[l[1]];if(p!==s){if(!a)continue;if(!s.TY(p))continue}let t=n;if(!t){const y=this.Jc.H3();t=this._3()===y?this:(t=y.bY(this.kc()))||y.t4(this.$L())}const m=this.Jc.nY(l,t,!1,void 0,void 0,!1,r),g=(t.wP(m),m.Z3());g.Gj(i,e),g.vj(),h.SP(!0),m.TP(),h.SP(!1),u.push(m)}}return u}gP(){return this.m8.length}_3(){return this.Q8}kc(){return this.er}vY(t){this.Ag=t}$L(){return this.Ag}xY(t){this.V8=t}wU(){return this.V8}xk(){return this.Y8}Ik(t){this.Y8!==(t=!!t)&&(this.Y8=t,this.Q8.IY(),this.Jc.n4())}CY(){let t=this.ck();return(t?t.pk():this._3().GY()).indexOf(this)}NY(){return this.H8}w4(){return this.Jc}EY(){return this.q8}DY(){for(const t of this.fk())if(t.EY())return!0;return!1}TR(){return this.Jc.TR()}CP(){return this.DJ}KL(){return this._Y(),this.qL}_Y(){const t=this.AY();if(this.PJ||t!==this.kJ||this.qL.jA()){const s=this.CP().LY();this.qL.zA(s.map(t=>t.Lv()),{B_:s.map(t=>t.$L()),U_:!t,V_:!0}),this.PJ=!1,this.kJ=t}}cz(){this.CP().cz(),this.PJ=!0}JJ(){return this.oJ&&!this.hJ}OY(){return this.FJ}RY(){this.zJ=!1}Sk(){for(const t of this.PY())if(!t.yk())return!1;return!0}yk(){return this.Z8}Mk(t){this.Z8!==(t=!!t)&&(this.Z8=t,this.Jc.n4())}bk(t){this.X8=!!t}Tk(){return this.X8}Gk(){for(const t of this.PY())if(!t.Tk())return!1;return!0}Yk(t){if(this.pJ!==(t=!!t)){if(this.pJ=t){const s=this._3();this.fJ=s.PP(),this.dJ=s.FP()}this.kY(),this.Jc.n4()}}FY(){return this.pJ}RP(t){const s=this._3(),i=s.jY(),e=s.zY();this.fJ!==(t=(t=e<t?e:t)<i?i:t)&&(this.fJ=t,this.FY())&&(this.kY(),this.Jc.n4())}kP(t){const s=this._3(),i=s.BY(),e=s.UY();this.dJ!==(t=(t=e<t?e:t)<i?i:t)&&(this.dJ=t,this.FY())&&(this.kY(),this.Jc.n4())}PP(){return this.FY()?this.fJ:this._3().PP()}FP(){return this.FY()?this.dJ:this._3().FP()}Hk(){return this.WY(),this.VN}QY(){return this.WY(),this.mJ}JY(){return this.WY(),this.gJ}rk(){const t=this._3();return[t.YY(),t.VY()]}Zy(t){return this.Jc.Zy(t)}HY(c,e){const n=this.QY();if(0===c)e.I(n);else{let o=n.yu(),a=n.Mu(),t=this.qY(c),s=n.width()/t,i=n.height()/t,[u,l]=this.rk();if(.5!==u||.5!==l){let t=this.ZY(),s=this.Jc,i=this.Zy()/t,e=(u-.5)*s.XY()/i,n=(l-.5)*s.KY()/i,r=this.OP(),h=(0!==r&&(vr.set(e,n),vr.rotate(r),e=vr.Qa(),n=vr.Ya()),S.br(t,0,c));o+=S.Lt(e,0,h),a+=S.Lt(n,0,h)}e.set(o-s/2,a-i/2,o+s/2,a+i/2)}}hD(){return this.AS.qo()}aD(t){t=S.rr(t,0,1),this.AS.qo()!==t&&(this.AS.Qo(t),this.QJ(),this.Jc.n4())}QJ(){this.eJ.I(this.AS),this.eJ.oa()}LJ(){return this.eJ}AY(){return this.AS.ea(1,1,1,1)}_k(){return this.aJ}Dk(t){this.aJ!==t&&(this.aJ=t,this.kY(),this.Jc.n4())}Ok(){return this.sJ}Pk(){return this.iJ}$Y(t,s){this.sJ===t&&this.iJ===s||(this.sJ=t,this.iJ=s,this.kY(),this.Jc.n4())}Lk(t){this.$Y(t,this.Pk())}Rk(t){this.$Y(this.Ok(),t)}KS(t){this.LS!==t&&(this.LS=t,this.Jc.n4())}XS(){return this.LS}LP(t){t=S.hr(t),this.cJ!==t&&(this.cJ=t,this.kY(),this.Jc.n4())}OP(){return S.hr(this.Q8.OP()+this.cJ)}Ak(){return this.cJ}tV(){return 0<this.m8.length}s4(){return this.m8}sV(){return this.iV()&&this.hJ?(S.Ah(Cr,this.s4()),Cr.sort((t,s)=>this.eV(t,s)),Cr):this.s4()}nV(t){S.zn(t,this.sV());for(const s of this.YJ)s.Sk()&&0<s.hD()&&s.nV(t)}eV(t,s){const i=this._3().rV(),e=i[0],n=i[1],r=i[2],h=t.Z3(),o=s.Z3(),a=h.YS()-e,u=h.qS()-n,l=h.XS()-r,c=o.YS()-e,f=o.qS()-n,d=o.XS()-r;return c*c+f*f+d*d-(a*a+u*u+l*l)}Jk(){return this.K8}zk(){return this.tJ}jk(t){this.tJ!==(t=!!t)&&(this.tJ=t,this.Jc.n4())}Wk(){return this.nJ}Uk(t){this.nJ!==(t=!!t)&&(this.nJ=t,this.Jc.n4())}hV(){return!this.w4().oV()||!this.rJ}iV(){return!this.hV()}aV(){return this.iV()&&this._3().uV()}lV(){if(!this.aV())return!1;for(const t of this.YJ)if(!t.lV())return!1;return!0}RS(t){this._S!==t&&(this._S=t,this.Jc.n4())}Qk(){return this._S}cV(){return!this.J8}ck(){return this.J8}fV(t){this.J8=t}pk(){return this.YJ}dV(){return 0<this.YJ.length}pV(t,s=!0){s?this.YJ.push(t):this.YJ.unshift(t)}mV(t,s,i){let e=this.YJ.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.YJ.splice(e,0,t)}gV(t){const s=this.YJ.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.YJ.splice(s,1)}yV(){for(const t of this.YJ)if(t.MV())return!0;return!1}*gk(){for(const t of this.YJ)yield*t.gk();yield this}*fk(){let t=this.ck();for(;t;)yield t,t=t.ck()}*PY(){yield this,yield*this.fk()}wV(t){for(const s of this.fk())if(s===t)return!0;return!1}SV(t){return this===t||this.sJ===t.sJ&&this.iJ===t.iJ&&this.lJ===t.lJ&&this.aJ===t.aJ&&this.cJ===t.cJ&&this.PP()===t.PP()&&this.FP()===t.FP()}TV(){return{parallaxX:this.Ok(),parallaxY:this.Pk(),scale:this.Ek(),scaleRate:this._k(),angle:this.Ak(),hasOwnScroll:this.FY(),scrollX:this.PP(),scrollY:this.FP()}}bV(t){this.$Y(t.parallaxX,t.parallaxY),this.Nk(t.scale),this.Dk(t.scaleRate),this.LP(t.angle),this.Yk(t.hasOwnScroll),this.RP(t.scrollX),this.kP(t.scrollY),this.WY()}vV(t){if(0!==t.size){const s=S.kh(this.m8,t);0<s&&(this.fY(),this.e4())}}e4(t){this.GJ=!1,this.zJ=!1,t&&!t.uF().iP().OR()||(this.NJ=!1)}xV(){if(!this.GJ){if(this.m8.sort(t),this.JJ())for(let t=0,s=this.m8.length;t<s;++t){const i=this.m8[t].Z3();i.mY(t),this.FJ.L8(i.IV())}else for(let t=0,s=this.m8.length;t<s;++t)this.m8[t].Z3().mY(t);this.GJ=!0}}CV(){if(!this.NJ){let t=this.Q8.GV(this.wU()),s=t.map(t=>[...t.gk()]).flat(),i=0;for(const e of s){for(const n of e.s4())n.uF().iP().OR()&&n.Z3().NV(i++);e.EV()}}}EV(){this.NJ=!0}DV(){return{isVisible:this.Sk(),opacity:this.hD(),isInteractive:this.Tk()}}_V(t,s,i){const e=t.Z3(),n=s.Z3();if(e.X3()!==this||n.X3()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let r=e.K3(),h=n.K3();return r!==h+(i?1:-1)&&(S.Lh(this.m8,r),r<h&&h--,i&&h++,h===this.m8.length?this.m8.push(t):this.m8.splice(h,0,t),this.e4(t),!0)}AV(t,s){let i=[],e=0,n=0,r=t.length,h=s.length;for(;e<r&&n<h;){const o=t[e],a=s[n];o.Z3().f8()<a.Z3().f8()?(i.push(o),++e):(i.push(a),++n)}for(;e<r;++e)i.push(t[e]);for(;n<h;++n)i.push(s[n]);return i}LV(s){const i=[],e=s.length;for(let t=0;t<e-1;t+=2){const n=s[t],r=s[t+1];i.push(this.AV(n,r))}return e%2==1&&i.push(s[e-1]),i}OV(t){for(;1<t.length;)t=this.LV(t);return t[0]}RV(){return this.xV(),S.Nh(mr),this.FJ.A8(this.Hk(),mr),mr.length?1===mr.length?mr[0]:this.OV(mr):[]}MV(){return this.Sk()&&0<this.hD()&&this.PV()}PV(){if(this.tV()||!this.zk())return!0;for(const t of this.YJ)if(t.PV())return!0;return!1}kV(){return this.Wk()||!this.AY()||0!==this.Qk()||this.DJ.FV()}jV(){if(this.kV())return!0;for(const t of this.YJ)if(t.jV())return!0;return!1}QD(){return this.uJ}qY(t){if(this.Q8.uk())return 1;{const s=this.zV();return s/(s-t)}}BV(t){const s=this.Jc.hF();if(this.Q8.uk())return s;{const i=this.zV(),e=this.Zy();return e/Math.abs(i-t)*s}}kY(){this.wJ=!0,this.TJ=!0,this.yJ=!0}UV(t){return this.wJ&&(this.WV(t,this.FA,0,0,null),this.wJ=!1),this.FA}ZY(t){return this.Zy(t)/this.QV()}zV(){return this.aV()?this._3().rV()[2]:this.ZY()}JV(){if(this.aV()){const t=this._3().rV();return[t[0],t[1],t[2]]}return this.YV()}YV(t=0,s=0,n=0){let r=this.Jc,i=this._3(),e=r.VV(),h=r.HV(),o=(this.PP()-e)*this.sJ+e,a=(this.FP()-h)*this.iJ+h,u=(r.TO()&&(o=Math.round(o),a=Math.round(a)),o+t),l=a+s,c=i.uk()?this.Zy(n):this.ZY(n),[f,d]=this.rk();if(.5!==f||.5!==d){let t=this.Zy(n)/c,s=(f-.5)*r.XY()/t,i=(d-.5)*r.KY()/t,e=this.OP();0!==e&&(vr.set(s,i),vr.rotate(e),s=vr.Qa(),i=vr.Ya()),u+=s,l+=i}return[u,l,c]}WV(t,s,i,e,n){const r=this.Jc,h=this._3();if(this.aV()){In.I(Sr,h.rV()),In.I(Tr,h.qV()),In.I(br,h.ZV());const o=r.VV(),a=r.HV(),u=Tr[0]-Sr[0],l=Tr[1]-Sr[1],c=Tr[2]-Sr[2];Sr[0]=(Sr[0]-o)*this.sJ+o,Sr[1]=(Sr[1]-a)*this.iJ+a,Sr[2]*=Math.max(this.sJ,this.iJ),Tr[0]=Sr[0]+u,Tr[1]=Sr[1]+l,Tr[2]=Sr[2]+c}else{const[f,d,p]=this.YV(i,e,n),m=(In.set(Sr,f,d,p),In.set(Tr,f,d,p-100),this.OP());0===m?In.set(br,0,1,0):In.set(br,Math.sin(m),Math.cos(m),0)}t.fM(s,Sr,Tr,br,n||r.KY())}XV(){this.MJ=!0,this.TJ=!0,this.yJ=!0}KV(t){return this.MJ&&(this.$V(t),this.MJ=!1),this.V2}$V(t){const s=this.Jc.lR(),[i,e]=this.rk();if(this.Q8.uk())t.cM(this.V2,s.tH(),s.sH());else if(.5===i&&.5===e)xn.I(this.V2,s.iH());else{const n=s.tH(),r=s.sH();t.uM(this.V2,n/r,i,e)}}mW(t,s=!0,i=0,e=0,n=0){s&&t.qE(this.KV(t));let r;r=0===i&&0===e&&0===n?this.UV(t):(this.WV(t,yr,i,e,n),yr),t.sD(r)}eH(t){this.mW(t),t.ZM(this.XS())}nH(t){let s=null;if(t.qw()&&this.Jc.rH()){const i=this.Jc.lR().hH(this);i&&(s=i.ON(),t.r_(s))}return s}oH(t){if(t.lM()&&this.Jc.rH()){const s=2*(this.$L()+1);t.StartMeasuringRenderPassTime(s,1+s)}}OT(t,s,i){let e=this.Jc.lR(),n=this.kV(),r=null,h=this.nH(t);if(this.oH(t),n){const o={JT:this.Jc.wO(),O2:!0,aH:!!t.lM()&&this.Jc.uH()};"low"===e.lH()&&(o.width=e.tH(),o.height=e.sH()),r=this.Jc.cH(o),this.uJ=r,t.ZD(r),this.zk()&&t.kD(0,0,0,0)}else this.uJ=s,t.ZD(s);if(this.zk()||t.zl(this.K8),this.Q8.fH(t,this.uJ,this.YJ,n&&this.zk()),this.oH(t),this.mW(t),t.ZM(this.XS()),t.zD(this.iV()),this.QV()>Number.EPSILON){this.xV();const a=this.JJ()&&0===this.XS()&&!this.EJ;this.aV()?this.dH(t):a?this.pH(t):this.mH(t,this.sV())}t.ZM(0),t.KM(0),n&&(t.zD(!1),this.gH(t,r,s,i)),h&&t.o_(h),this.uJ=null}mH(i,e){let n=this.Hk(),r=this.uJ,h=this._3().uk(),o=this._3().yH(),a=null;for(let t=0,s=e.length;t<s;++t){const u=e[t];if(u!==a){const l=(a=u).Z3();l.Sk()&&l.MH(n,o,h)&&this.wH(u,l,i,r)}}}dH(e){const n=this.uJ,r=this.SH(),h=xr,o=Ir,a=this.sV();for(let s=0,i=a.length;s<i;){const u=a[s],l=u.Z3();if(l.Sk()&&l.TH(r)){(!u.bH()||0<l.vH())&&o.push(u);const c=u.Z3().Ej();h.push(u);let t=s+1;for(;t<i;++t){const f=a[t],d=f.Z3();if(d.Sk()&&d.TH(r)){if(d.Ej()!==c)break;(f.bH()?(0<d.vH()&&o.push(f),h):o).push(f)}}if(1!==h.length||h[0].xH()){this.IH(e,h);for(let t=0,s=o.length;t<s;++t){const p=o[t],m=p.Z3();m.CH(!0),this.wH(p,m,e,n),m.CH(!1)}}else{this.wH(u,l,e,n);for(let t=0,s=o.length;t<s;++t){const g=o[t];if(g!==u){const y=g.Z3(),M=y.X3();M.wH(g,y,e,n)}}}s=t,S.Nh(h),S.Nh(o)}else++s}}IH(i,e){const n=this.uJ;i.s_();for(let t=0,s=e.length;t<s;++t){const r=e[t],h=r.Z3();h.GH(!0),this.NH(r,h,i)}i.i_();for(let t=0,s=e.length;t<s;++t){const o=e[t],a=o.Z3();this.wH(o,a,i,n),a.GH(!1)}i.n_()}pH(t){let s=this.FJ,i=this.UJ,e=this.BJ,n=this.Hk(),r;i.set(s.E8(n.uu()),s.D8(n.lu()),s.E8(n.cu()),s.D8(n.fu())),this.zJ&&i.equals(e)?r=this.jJ:(r=this.RV(),this.zJ=!0,e.I(i)),this.mH(t,r),r!==this.jJ&&S.Ah(this.jJ,r)}wH(t,s,i,e){s.FV()?this.EH(t,s,i,e):this.NH(t,s,i)}NH(t,s,i){const e=s.DH();i.LM()!==e&&e.OS(),t.OT(i)}EH(t,s,i,e){this._H(t,s,i,e,null)&&this.mW(i)}_H(t,s,i,e,n){const r=s.Tj().KL();return r.ZA(i,e,{XA:t,KA:s.Qk(),devicePixelRatio:this.Jc.AH(),time:t.LH(),$A:this.Jc.OH()*this.QV(),tL:this.OP(),TL:s._j(),bL:r.jL()?null:this.RH(s),rL:n&&n.rL,hL:n&&n.hL,oL:n&&n.oL,aL:n&&n.aL}),i.ZM(this.XS()),r.eD()}gH(t,s,i,e){const n=this.DJ.LY(),r=this.Jc;0===n.length?(t.ZD(i),t.MM(),e&&0===this._S&&this.AY()?t.XD(s):(t.RS(this._S),t.PS(this.eJ),t.KD(s)),t.$D(s),r.OJ(s)):this.KL().ZA(t,i,{XA:this,KA:this.Qk(),devicePixelRatio:r.AH(),$A:r.OH()*this.QV(),tL:this.OP(),TL:this.Hk(),bL:null,z_:!0})}Ek(){return this.lJ}Nk(t){this.lJ!==t&&(this.lJ=t,this.Q8.PH(),this.kY(),this.Jc.n4())}hF(){return this.QV()*this.Jc.hF()}GU(){return this.QV()*this.Jc.GU()}QV(){return(this.lJ*this.Q8.AP()-1)*this.aJ+1}WY(){if(this.yJ){this.yJ=!1;let t=this.Jc.VV(),s=this.Jc.HV(),i=(this.PP()-t)*this.sJ+t,e=(this.FP()-s)*this.iJ+s,n=this.QV(),r=this.Jc.XY()/n,h=this.Jc.KY()/n,o=i-r/2,a=e-h/2;this.Jc.TO()&&(o=Math.round(o),a=Math.round(a));const u=this.mJ,l=(u.set(o,a,o+r,a+h),this.OP()),c=(0!==l&&(dr.I(u),dr.offset(-u.yu(),-u.Mu()),pr.ol(dr,l),pr.ul(dr),dr.offset(u.yu(),u.Mu()),u.I(dr)),this.LS);this.HY(c,this.VN),this.aV()?this.kH(c,this.gJ):this.gJ.I(this.VN)}}kH(t,s){let i=this.Jc.lR(),e=i.pR(),n=i.gR(),[r,h]=this.Zk(0,0,t),[o,a]=this.Zk(e,0,t),[u,l]=this.Zk(e,n,t),[c,f]=this.Zk(0,n,t),d=Math.min(r,o,u,c),p=Math.min(h,a,l,f),m=Math.max(r,o,u,c),g=Math.max(h,a,l,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}Zk(t,s,i=0){return this.FH(t,s,i,this.GU())}iF(t,s,i=0){return this.FH(t,s,i,this.hF()*this.TR())}FH(t,s,i,e){const n=this.Jc,r=n.mS(),h=this.QV(),o=n.XY()/h,a=n.KY()/h,u=wr,l=(Wn.set(u,0,0,o,a),t/=e,s=u[3]-s/e,this.KV(r)),c=this.UV(r),f=Mr,d=S.jg.Ug(t,s,i,c,l,u,f);return d?[f[0],f[1]]:[NaN,NaN]}jH(t,s){const i=this.lJ,e=this.aJ,n=this.sJ,r=this.iJ,h=this.cJ,o=(this.lJ=1,this.aJ=1,this.sJ=1,this.iJ=1,this.cJ=0,this.kY(),this.Zk(t,s));return this.lJ=i,this.aJ=e,this.sJ=n,this.iJ=r,this.cJ=h,this.kY(),o}tF(t,s,i=0){return this.zH(t,s,i,this.GU())}nF(t,s,i=0){return this.zH(t,s,i,this.hF()*this.TR())}zH(t,s,i,e){const n=this.Jc,r=n.mS(),h=this.QV(),o=n.XY()/h,a=n.KY()/h,u=wr,l=(Wn.set(u,0,0,o,a),this.KV(r)),c=this.UV(r),f=Mr,d=S.jg.zg(t,s,i,c,l,u,f);return d?[f[0]*e,(u[3]-f[1])*e]:[NaN,NaN]}BH(t,s){return t*=this.hF()*this.TR(),0!==s&&(t*=this.qY(s)),t}RH(t){const s=t._j(),i=t.Ej(),e=t.vH(),u=i+e,l=s.uu(),c=s.lu(),f=s.cu(),d=s.fu();if(this.aV()){if(this.UH(l,c,i)||this.UH(f,c,i)||this.UH(f,d,i)||this.UH(l,d,i))return null;if(0<e&&(this.UH(l,c,u)||this.UH(f,c,u)||this.UH(f,d,u)||this.UH(l,d,u)))return null}else if(u>=this.ZY())return null;let[p,m]=this.nF(l,c,i),[g,y]=this.nF(f,d,i);if(0!==this.OP()||0<e||this.aV()){const[M,w]=this.nF(f,c,i),[S,T]=this.nF(l,d,i);if(0<e){let[t,s]=this.nF(l,c,u),[i,e]=this.nF(f,c,u),[n,r]=this.nF(f,d,u),[h,o]=this.nF(l,d,u),a=Math.min(p,g,M,S,t,i,n,h);g=Math.max(p,g,M,S,t,i,n,h),p=a,a=Math.min(m,y,w,T,s,e,r,o),y=Math.max(m,y,w,T,s,e,r,o),m=a}else{let t=Math.min(p,g,M,S);g=Math.max(p,g,M,S),p=t,t=Math.min(m,y,w,T),y=Math.max(m,y,w,T),m=t}}return dr.set(p,m,g,y),dr}SH(){return this.TJ&&(this.WH(),this.TJ=!1),this.SJ}WH(){const t=this.Jc.mS(),s=this.KV(t),i=this.UV(t);this.SJ.Zg(i,s)}UH(t,s,i){return this.SH().Kg(t,s,i)}QH(){const t={d:this.EY(),s:this.Ek(),a:this.Ak(),v:this.yk(),i:this.Tk(),html:this.xk(),bc:this.K8.toJSON(),t:this.zk(),sx:this.fJ,sy:this.dJ,hosp:this.pJ,px:this.Ok(),py:this.Pk(),c:this.AS.toJSON(),sr:this._k(),fx:this.DJ.rT(),cg:this.IJ};return t}JH(t){this.q8=!!t.d,this.lJ=t.s,this.cJ=t.a,this.Z8=!!t.v,this.X8=!t.hasOwnProperty("i")||t.i,this.Y8=!!t.html,this.K8.Na(t.bc),this.tJ=!!t.t,t.hasOwnProperty("sx")&&(this.fJ=t.sx),t.hasOwnProperty("sy")&&(this.dJ=t.sy),t.hasOwnProperty("hosp")&&(this.pJ=!!t.hosp),this.sJ=t.px,this.iJ=t.py,this.AS.Na(t.c),this.QJ(),this.aJ=t.sr,S.Ah(this.IJ,t.cg),S.Ah(this.xJ,this.bJ);let i=new Set(this.IJ),e=0;for(let t=0,s=this.xJ.length;t<s;++t)i.has(this.xJ[t][2])||(this.xJ[e]=this.xJ[t],++e);S.Gh(this.xJ,e),this.DJ.hT(t.fx),this.PJ=!0}YH(){this.pY(!1),this.e4(),this.kY(),this.XV()}BP(){return this.WJ}wP(t,s=!1){if(this.m8.includes(t))s&&this.m8.sort((t,s)=>{const i=t.Z3().VH(),e=s.Z3().VH();return i-e});else if(t.HH()){const i=[...t.r5()];i.push(t),i.sort((t,s)=>{const i=t.Z3().VH(),e=s.Z3().VH();return i-e});for(const e of i)if(e.TF())for(const n of e.bF())if(!i.includes(n)){const r=[...n.r5()];r.push(n),r.sort((t,s)=>{const i=t.Z3().VH(),e=s.Z3().VH();return i-e}),r&&r.length&&i.splice(i.length,0,...r)}for(const h of i)h.iP().AR()&&this.hY(h,!0)}else if(t.iP().AR()&&this.hY(t,!0),t.TF())for(const o of t.bF()){const a=[...o.r5()];if(a.push(o),a.sort((t,s)=>{const i=t.Z3().VH(),e=s.Z3().VH();return i-e}),a&&a.length)for(const u of a)u.iP().AR()&&this.hY(u,!0)}}}}{let u=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},T=function(t,s){G!==t&&(t.eH(s),G=t)},b=(u,T,self.Ls),e=self.C3Debugger,n=(b.Xn(b.Rect),b.Xn(b.Rect),b.Xn(b.Rect)),v=b.Xn(b.Ao),t=self.gs,l=t.xs,a=[],x=[],I=[],C=[],G=null;b.qH=class extends b.qn{constructor(t,s,i){super(),this.ZH=t,this.Jc=t.w4(),this.er=i[0],this.XH=i[1],this.KH=i[2],this.Am=i[1],this.Lm=i[2],this.$H=!!i[3],this.t7=!!i[4],this.s7=i[5],this.i7=i[6],this.e7=i[7],this.n7=null,this.H8=i[8],this.Ag=s,this.fJ=0,this.dJ=0,this.lJ=1,this.cJ=0,this.r7=new Set,this.h7=new Set,this.o7=new Set,this.a7=[],this.u7=[],this.l7=new Map,this.c7=new Map,this.f7=[],this.d7=!1,this.p7=l.create(),this.m7=l.create(),this.g7=l.create(),this.y7=[],this.M7=[],this.w7=new Map,this.S7=new Map,this.T7=-1;const n=this.Jc.lR();this.DJ=b.Xn(b._J,this,i[11]),this.qL=b.Xn(b.jg.H_,n.AJ(),{k_:(t,s)=>{const i=s.BL(),e=i.QD();t.uD(),t.KD(e),t.$D(e),n.OJ(e)},j_:t=>this.CP().RJ(t)}),this.PJ=!0,this.b7=!1,this.uJ=null,this.v7={},this.x7=new Map,this.I7=!0,this.C7=new self.IP(this),this.G7=b.Xn(b.Event.Gf);for(const e of i[9])this.y7.push(b.W8.VJ(this,null,e));this.N7();for(const r of this.QP())r.HJ();for(const h of i[10]){const o=this.Jc.qJ(h[1]);if(!o)throw new Error("missing nonworld object class");o.XJ()||o.KJ(h),this.f7.push(h),this.ZJ(o)}}Kn(){for(const t of this.M7)t.Kn();b.Nh(this.M7),this.o7.clear(),this.n7=null,this.ZH=null,this.Jc=null}w4(){return this.Jc}kc(){return this.er}NY(){return this.H8}$L(){return this.Ag}CP(){return this.DJ}KL(){return this._Y(),this.qL}_Y(){const t="low"===this.Jc.lR().lH();if(this.PJ||this.b7!==t||this.qL.jA()){const s=this.CP().LY();this.qL.zA(s.map(t=>t.Lv()),{B_:s.map(t=>t.$L()),W_:t,V_:!0}),this.PJ=!1,this.b7=t}}cz(){this.CP().cz(),this.PJ=!0}E7(){let i=this.M7[0].QV();for(let t=1,s=this.M7.length;t<s;++t){const e=this.M7[t];0===e.Ok()&&0===e.Pk()||(i=Math.min(i,e.QV()))}return i}D7(){return.5*this.Jc.XY()/this.E7()}_7(){return.5*this.Jc.KY()/this.E7()}jY(){return this.A7()?-1/0:this.D7()}zY(){return this.A7()?1/0:this.Jp()-this.D7()}BY(){return this.A7()?-1/0:this._7()}UY(){return this.A7()?1/0:this.im()-this._7()}RP(t){const s=this.jY(),i=this.zY();this.fJ!==(t=(t=i<t?i:t)<s?s:t)&&(this.fJ=t,this.L7(),this.Jc.n4())}PP(){return this.fJ}kP(t){const s=this.BY(),i=this.UY();this.dJ!==(t=(t=i<t?i:t)<s?s:t)&&(this.dJ=t,this.L7(),this.Jc.n4())}FP(){return this.dJ}A7(){return this.$H}PH(){this.RP(this.PP()),this.kP(this.FP());for(const t of this.M7)t.FY()&&(t.RP(t.PP()),t.kP(t.FP()))}ek(t,s){this.s7===t&&this.i7===s||(this.s7=t,this.i7=s,this.O7()&&(this.R7(),this.L7(),this.Jc.n4()))}YY(){return this.uk()?.5:this.s7}VY(){return this.uk()?.5:this.i7}yH(){const t=this.YY(),s=this.VY();return t<0||1<t||s<0||1<s}hk(){this.t7&&(this.t7=!1,this.R7(),this.L7(),this.Jc.n4())}ak(){this.t7||(this.t7=!0,this.R7(),this.L7(),this.Jc.n4())}uk(){return this.t7}O7(){return!this.uk()}P7(t){this.d7!==(t=!!t)&&(this.d7=t,this.L7(),this.Jc.n4())}uV(){return this.d7}k7(t,s,i,e,n,r,h,o,a){u(this.p7,t,s,i)&&u(this.m7,e,n,r)&&u(this.g7,h,o,a)||(l.set(this.p7,t,s,i),l.set(this.m7,e,n,r),l.set(this.g7,h,o,a),this.F7())}F7(){this.L7(),this.Jc.n4()}rV(){return this.p7}qV(){return this.m7}ZV(){return this.g7}AP(){return this.lJ}_P(t){this.lJ!==t&&(this.lJ=t,this.L7(),this.PH(),this.Jc.n4())}LP(t){t=b.hr(t),this.cJ!==t&&(this.cJ=t,this.L7(),this.Jc.n4())}OP(){return this.cJ}Jp(){return this.Am}Kp(t){!isFinite(t)||t<1||(this.Am=t)}im(){return this.Lm}Yp(t){!isFinite(t)||t<1||(this.Lm=t)}j7(){return this.n7}GY(){return this.y7}*QP(){for(const t of this.y7)yield*t.gk()}WP(){return this.M7}z7(){return this.M7.length}X3(t){return"number"==typeof t?this.t4(t):this.bY(t.toString())}t4(t){return t=b.rr(Math.floor(t),0,this.M7.length-1),this.M7[t]}bY(t){return this.w7.get(t.toLowerCase())||null}B7(t){return!!this.bY(t)}U7(t){return this.S7.get(t)||null}R7(){for(const t of this.M7)t.XV()}L7(){for(const t of this.M7)t.kY()}HP(t,s,i){if(this.B7(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=2<=i?s:s.ck(),n=b.Xn(b.W8,this,e,{name:t,sid:Math.floor(1e15*Math.random()),O8:!0});this.W7(n,s,i),this.w4().n4(),this.IY()}ZP(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.Q7(t),this.W7(t,s,i),this.w4().n4(),this.IY())}KP(t){if(this.Q7(t)){const s=this.Jc.DO();s.SP(!0),t.Kn(),s.SP(!1),this.w4().n4(),this.IY()}}sk(){const t=new Set;for(const s of this.QP())s.EY()&&!s.DY()&&t.add(s);if(0!==t.size){const i=this.Jc.DO();i.SP(!0);for(const e of t)this.Q7(e),e.Kn();i.SP(!1),this.w4().n4(),this.IY()}}W7(s,i,e){if(2<=e)if(i){if(i===s||i.wV(s))throw new Error(`cannot move layer '${s.kc()}' to sub-layer of itself`);i.pV(s,2===e),s.fV(i)}else 2===e?this.y7.push(s):this.y7.unshift(s),s.fV(null);else{const t=i.ck();if(t){if(i.wV(s))throw new Error(`cannot move layer '${s.kc()}' to sub-layer of itself`);t.mV(s,i,0===e),s.fV(t)}else{let t=this.y7.indexOf(i);if(-1===t)throw new Error("cannot find layer to insert by");0===e&&++t,this.y7.splice(t,0,s),s.fV(null)}}}Q7(t){const s=t.ck();if(s)return s.gV(t),!0;if(1<this.y7.length){const i=this.y7.indexOf(t);if(-1===i)throw new Error("cannot find layer to remove");return this.y7.splice(i,1),!0}return!1}N7(){this.M7=[...this.QP()],this.w7.clear(),this.S7.clear();for(let t=0,s=this.M7.length;t<s;++t){const i=this.M7[t];i.vY(t),this.w7.set(i.kc().toLowerCase(),i),this.S7.set(i.NY(),i)}}J7(){let t=0;for(const s of this.y7){for(const i of s.gk())i.xY(t);s.xk()&&t++}}Y7(){return this.y7.at(-1).wU()+1}async IY(){this.N7(),this.J7(),this.T7=this.Y7()}V7(){return this.T7}H7(){this.T7=-1}GV(t){const s=[];for(const i of this.y7){const e=i.wU();if(e===t)s.push(i);else if(t<e)break}return s}TV(){return{scrollX:this.PP(),scrollY:this.FP(),scale:this.AP(),angle:this.OP(),vpX:this.YY(),vpY:this.VY()}}bV(t){this.RP(t.scrollX),this.kP(t.scrollY),this._P(t.scale),this.LP(t.angle),this.ek(t.vpX,t.vpY)}q7(){let t=this.y7.filter(t=>t.MV())[0];for(;t;){if(!t.zk())return v.Jo(t.Jk()),v.Qo(1),v;if(t.kV())return v.ko(0,0,0,0),v;t=t.pk().filter(t=>t.MV())[0]}return v.ko(0,0,0,0),v}iY(){return this.I7}Z7(){return[...this.r7]}ZJ(t){if(t.TF())for(const s of t.K7().X7())this.r7.add(s);else this.r7.add(t)}t9(){return[...this.h7]}s9(t,s){if(t===this||!s)return Promise.resolve();t&&(b.xo(this.h7,t.h7),t.h7.clear());const i=[];for(const e of this.r7)this.h7.has(e)||(i.push(e.i9(s)),this.h7.add(e));return Promise.all(i)}async e9(t){if(t.SY())throw new Error("cannot load textures for family");const s=this.Jc.mS();if(s&&!s.hN()&&!this.h7.has(t)){this.h7.add(t);const i=t.i9(s);this.n9(i),await i,t.r9(),this.Jc.n4()}}n9(t){this.o7.add(t),t.then(()=>this.o7.delete(t)).catch(()=>this.o7.delete(t))}h9(){return Promise.all([...this.o7])}o9(t){if(t.SY()||0<t.gP())throw new Error("cannot unload textures");const s=this.Jc.mS();s&&this.h7.has(t)&&(this.h7.delete(t),t.a9(s))}u9(t,s){if(t!==this&&s)for(const i of this.h7)i.rY()||t.r7.has(i)||(i.a9(),this.h7.delete(i))}l9(){this.h7.clear()}async c9(t){const s=this.Jc,i=this.ZH,e=s.DO(),n=(this.e7&&(this.n7=e.f9(this.e7),this.n7.d9()),i.p9(this),this.Am=this.XH,this.Lm=this.KH,this.fJ=s.gO()/2,this.dJ=s.MO()/2,this.PH(),this.R7(),this.L7(),this.J7(),await this.Jc.lR().m9(this.Y7(),!0),this.g9(t),this.Jc.y9(!0),this.M9(),this.I7||this.w9(),this.S9(this.a7),this.S9(this.u7),this.T9(),i.b9(),s.xP(),this.Jc.y9(!1),this.Jc.v9());if(await Promise.all(n),b.Nh(n),!s.x9()){for(const r of this.a7)r.I9();for(const h of this.u7)h.C9(this.l7,this.c7);for(const[o,a]of Object.entries(this.v7)){const u=this.Jc.h6(parseInt(o,10));u&&!u.SY()&&u.eY()&&b.Nh(a)}for(const l of this.a7)l.G9();for(const c of this.u7)c.G9()}b.Nh(this.a7),b.Nh(this.u7),this.l7.clear(),this.c7.clear(),await Promise.all([...this.r7].map(t=>t.N9(this.Jc.mS()))),t&&(s.Gf().dispatchEvent(new b.Event("beforefirstlayoutstart")),await s.E9(new b.Event("beforeprojectstart"))),await this.D9(new b.Event("beforeanylayoutstart")),s.Gf().dispatchEvent(new b.Event("beforelayoutstart")),await this.E9(new b.Event("beforelayoutstart")),s.x9()||await s.ZF(b.O9.L9.A9._9,null,null),s.Gf().dispatchEvent(new b.Event("afterlayoutstart")),await this.E9(new b.Event("afterlayoutstart")),await this.D9(new b.Event("afteranylayoutstart")),t&&(s.Gf().dispatchEvent(new b.Event("afterfirstlayoutstart")),await s.E9(new b.Event("afterprojectstart"))),e.R9(i),await this.h9(),this.I7=!1}g9(t){for(const s of this.Jc.wY())if(!s.SY()&&s.AR())for(const i of s.dP()){const e=i.Z3(),n=e.X3(),r=b.rr(n.$L(),0,this.M7.length-1),h=this.M7[r];e.i4(h,!0),h.aY(i)}if(!t)for(const o of this.M7)o.pY(!1)}M9(){for(const t of this.M7)t.sY(this.a7),t.gY()}w9(){let s=!1;for(const[t,i]of Object.entries(this.v7)){const e=this.Jc.h6(parseInt(t,10));if(e&&!e.SY()&&e.eY())for(const n of i){let t=null;if(!e.AR()||(t=n.hasOwnProperty("instJson")?this.U7(n.instJson.w.l):this.U7(n.w.l))){const r=this.Jc.nY(e,t,!1,0,0,!0);n.hasOwnProperty("instJson")?r.hT(n.instJson):r.hT(n),s=!0,this.u7.push(r),n.hasOwnProperty("instJson")&&(this.l7.set(r,n),this.c7.set(n.index,r))}}}for(const h of this.M7)h.pY(!0),h.e4();s&&(this.Jc.xP(),this.Jc.P9())}S9(s){for(const i of s)if(i.TF()){const e=i.Z3(),t=i.k9();for(const n of i.uF().K7().F9())if(n!==i.uF()){const r=n.dP();if(r.length>t)i.j9(r[t]);else{let t;t=e?this.Jc.nY(n,e.X3(),!0,e.YS(),e.qS(),!0):this.Jc.nY(n,null,!0,0,0,!0),this.Jc.xP(),n.z9(),i.j9(t),s.push(t)}}}}T9(){for(const t of this.f7){const s=this.Jc.qJ(t[1]);s.TF()||this.Jc.nY(t,null,!0)}}B9(){let i=[],e=this.f7,n=0;for(let t=0,s=e.length;t<s;++t){const r=e[t],h=this.Jc.qJ(r[1]);h.rY()?h.TF()&&h.K7().U9()||i.push(this.Jc.nY(r,null,!0)):(e[n]=r,++n)}b.Gh(e,n),this.Jc.xP(),this.S9(i)}MY(t,s,i,e,n,r,h){if(i)return i.MY(t,s,n,r,e,h);{const o=[];for(const a of this.M7)o.push(a.MY(t,s,n,r,e,h));return o.flat()}}async W9(){const t=this.ZH;this.Jc.x9()||(await this.D9(new b.Event("beforeanylayoutend")),await this.E9(new b.Event("beforelayoutend")),await this.Jc.ZF(b.O9.L9.A9.Q9,null,null),await this.E9(new b.Event("afterlayoutend")),await this.D9(new b.Event("afteranylayoutend"))),t.J9(!0),this.Jc.DO().Y9(),this.I7||this.V9();for(const s of this.M7)s.yY();for(const i of this.Jc.wY())if(!(i.rY()||i.AR()||i.iP().DR()||i.SY())){for(const e of i.dP())this.Jc.gF(e);this.Jc.xP()}t.J9(!1),t.G3()===this&&t.p9(null)}H9(t,s){const i=t.uF().NY().toString(),e=(this.v7.hasOwnProperty(i)||(this.v7[i]=[]),this.v7[i]),n={index:s,instJson:t.rT(),sceneGraphJson:{children:[]}};e.push(n),this.x7.set(t,n)}q9(t){const s=this.x7.get(t);for(const i of t.Z9()){const e=this.x7.get(i);e&&s.sceneGraphJson.children.push({index:e.index,flags:b.K9.X9(i.Z3())})}}V9(){this.x7.clear();let t=0;for(const s of this.M7){s.xV();for(const i of s.s4()){const e=i.uF();!e.rY()&&e.eY()&&(this.H9(i,t),t++)}}for(const n of this.M7)for(const r of n.s4()){const h=r.uF();!h.rY()&&h.eY()&&this.q9(r)}this.x7.clear()}tq(){this.v7={},this.I7=!0}QD(){return this.uJ}kV(){const t=this.Jc,s=t.mS().qw();return"low"===t.lR().lH()||s&&t.uH()||this.DJ.FV()||s&&t.oV()}sq(t){const s=this.Jc.lR();if(this.kV()){t.ZD(null),t.kD(0,0,0,0);const i={JT:this.Jc.wO(),O2:t.lM()||this.Jc.uH()||this.DJ.FV(),aH:!!t.lM()&&this.Jc.uH()};"low"===s.lH()&&(i.width=s.tH(),i.height=s.sH()),this.uJ=this.Jc.cH(i)}else this.uJ=null}iq(t){this.Jc.eq(t)&&(t.zD(!1),t.ZD(null),t.MM(),t.XD(this.uJ))}nq(t){this.kV()&&(t.zD(!1),this.rq(t,this.uJ))}hq(t){t.ZD(this.uJ),t.zl(this.q7()),this.Jc.oV()&&t.jD();const s=this.GV(0);this.fH(t,this.uJ,s,!0),t.lM()&&t.StartMeasuringRenderPassTime(0,1),this.nq(t),this.uJ=null}oq(t,s){let i=null;this.Jc.eq(t)&&(i=this.uJ),t.ZD(i),t.kD(0,0,0,0),this.Jc.oV()&&t.jD();const e=this.GV(s);this.fH(t,i,e,!0),this.iq(t),t.Uw(),this.Jc.lR().aq(s)}fH(t,e,s,n){const r=s.filter(t=>t.MV());for(let s=0,i=r.length;s<i;){const h=r[s];if(h.lV()&&!h.jV()){a.push(h);for(let t=s+1;t<i;++t){const o=r[t];if(!o.lV()||o.jV())break;a.push(r[t])}if(2<=a.length||1===a.length&&a[0].yV()){this.uq(t,e,a),s+=a.length,b.Nh(a);continue}b.Nh(a)}h.OT(t,e,n&&0===s),++s}}rq(t,s){const i=this.DJ.LY(),e=this.Jc;0===i.length?(t.ZD(null),t.MM(),t.XD(s),t.$D(s),e.OJ(s)):(n.set(0,0,e.XY(),e.KY()),this.KL().ZA(t,null,{XA:this,KA:3,devicePixelRatio:this.Jc.AH(),$A:this.Jc.OH()*this.AP(),tL:this.OP(),TL:n,bL:null,z_:!0}))}uq(e,n,t){t[0].zk()||(v.Jo(t[0].Jk()),v.Qo(1),e.zl(v)),this.Jc.lR(),e.zD(!0);const r=x,h=I,o=C;for(const a of t)a.xV(),a.nV(r);const s=t[0],i=s.nH(e);s.oH(e);for(let s=0,i=r.length;s<i;){const u=r[s],l=u.Z3(),c=l.X3();if(l.Sk()&&l.TH(c.SH())){(!u.bH()||0<l.vH())&&o.push(u);const f=u.Z3().Ej();h.push(u);let t=s+1;for(;t<i;++t){const d=r[t],p=d.Z3();if(p.Sk()&&p.TH(p.X3().SH())){if(p.Ej()!==f)break;(d.bH()?(0<p.vH()&&o.push(d),h):o).push(d)}}if(1!==h.length||h[0].xH()){this.lq(e,n,h);for(let t=0,s=o.length;t<s;++t){const m=o[t],g=m.Z3(),y=g.X3();g.CH(!0),T(y,e),y.wH(m,g,e,n),g.CH(!1)}}else{T(c,e),c.wH(u,l,e,n);for(let t=0,s=o.length;t<s;++t){const M=o[t];if(M!==u){const w=M.Z3(),S=w.X3();T(S,e),S.wH(M,w,e,n)}}}s=t,b.Nh(h),b.Nh(o)}else++s}i&&e.o_(i),b.Nh(r),G=null}lq(i,e,n){i.s_();for(let t=0,s=n.length;t<s;++t){const r=n[t],h=r.Z3(),o=h.X3();h.GH(!0),T(o,i),o.NH(r,h,i)}i.i_();for(let t=0,s=n.length;t<s;++t){const a=n[t],u=a.Z3(),l=u.X3();T(l,i),l.wH(a,u,i,e),u.GH(!1)}i.n_()}QH(){const t={sx:this.PP(),sy:this.FP(),s:this.AP(),a:this.OP(),w:this.Jp(),h:this.im(),ortho:this.uk(),vpX:this.YY(),vpY:this.VY(),fv:this.I7,persist:this.v7,fx:this.DJ.rT(),layers:{},dynamicLayers:[]};for(const s of this.M7)if(s.EY()){const i=s.ck();t.dynamicLayers.push({sid:s.NY(),name:s.kc(),parentSid:i?i.NY():null,siblingIndex:s.CY(),data:s.QH()})}else t.layers[s.NY().toString()]=s.QH();return t}JH(t){this.fJ=t.sx,this.dJ=t.sy,this.lJ=t.s,this.cJ=t.a,this.Am=t.w,this.Lm=t.h,this.t7=!!t.ortho,t.hasOwnProperty("vpX")&&(this.s7=t.vpX),t.hasOwnProperty("vpY")&&(this.i7=t.vpY),this.I7=!!t.fv,this.v7=t.persist,this.DJ.hT(t.fx),this.PJ=!0;for(const[s,i]of Object.entries(t.layers)){const e=parseInt(s,10),n=this.U7(e);n&&n.JH(i)}if(t.hasOwnProperty("dynamicLayers")){this.sk(),this.Jc.xP();const r=new Map,h=t.dynamicLayers;for(let t=h.length-1;0<=t;--t){const o=h[t],a=o.sid,u=o.name,l=o.parentSid,c=o.siblingIndex,f=o.data;if(this.N7(),!this.B7(u)&&!this.U7(a)){let t,s;if(null===l)t=null,s=this.y7;else{if(!(t=this.U7(l)))continue;s=t.pk()}const d=b.Xn(b.W8,this,t,{name:u,sid:a,O8:!0});s.push(d);let i=r.get(s);i||(i=[],r.set(s,i)),i.push({bj:d,siblingIndex:c}),d.JH(f)}}for(const[p,m]of r){m.sort((t,s)=>t.siblingIndex-s.siblingIndex);for(const g of m){let t=g.bj,s=g.siblingIndex,i=p.indexOf(t);p.splice(i,1),p.splice(s,0,t)}}}this.IY(),this.R7(),this.L7()}N3(){return this.C7}CO(){return this.G7}cq(t){t.layout=this.N3();const s=this.Jc,i=s.fq()&&!s.DO().bP();i&&e.StartMeasuringScriptTime(),this.G7.dispatchEvent(t),i&&e.AddScriptTime()}E9(t){return t.layout=this.N3(),this.G7.Rf(t)}D9(t){return t.layout=this.N3(),this.Jc.E9(t)}pq(){this.mq(this.y7)}mq(t,s=0){const i=t.slice(0);i.reverse();for(const e of i)console.log("\t".repeat(s)+"- "+e.kc()),this.mq(e.pk(),s+1)}}}{const Nr=self.Ls;Nr.gq=class extends Nr.qn{#o6;#yq=[];#Mq=new Map;#wq=new Map;#Sq=null;#Tq=[];#bq=null;#vq=0;#xq=null;constructor(t){super(),this.#o6=t}Kn(){this.#o6=null,this.#Sq=null,this.#bq=null,this.#xq=null,Nr.Nh(this.#yq),this.#Mq.clear(),this.#wq.clear(),Nr.Nh(this.#Tq)}_b(t){const s=Nr.Xn(Nr.qH,this,this.#yq.length,t);this.#yq.push(s),this.#Mq.set(s.kc().toLowerCase(),s),this.#wq.set(s.NY(),s)}w4(){return this.#o6}Iq(t){this.#bq=t}Cq(){if(this.#bq)return this.#bq;if(this.#yq.length)return this.#yq[0];throw new Error("no first layout")}Gq(t){return this.#Mq.get(t.toLowerCase())||null}Nq(t){return this.#wq.get(t)||null}Eq(t){return t=Nr.rr(Math.floor(t),0,this.#yq.length-1),this.#yq[t]}_3(t){return"number"==typeof t?this.Eq(t):this.Gq(t.toString())}L3(){return this.#yq}p9(t){this.#Sq=t}G3(){return this.#Sq}Dq(t){if(this.#Tq.includes(t))throw new Error("layout already running");this.#Tq.push(t)}_q(t){const s=this.#Tq.indexOf(t);if(-1===s)throw new Error("layout not running");this.#Tq.splice(s,1)}*Aq(){this.#Sq&&(yield this.#Sq),this.#Tq.length&&(yield*this.#Tq)}Lq(t){return this.#Sq===t||this.#Tq.includes(t)}J9(t){if(t)this.#vq++;else{if(this.#vq<=0)throw new Error("already unset");this.#vq--}}vP(){return 0<this.#vq}P3(t){this.#xq=t}b9(){this.#xq=null}R3(){return!!this.#xq}Oq(){return this.#xq}Rq(){const t=this.G3();t&&t.R7()}Pq(){const t=this.G3();t&&t.L7()}}}{const T=self.Ls,Er=new RegExp("<(.+?)>","g");T.kq=class extends T.qn{constructor(t){super(),this.Jc=t,this.Fq=T.Xn(T.jq),this.zq=null,this.Bq=[],this.Uq=new Map,this.Wq=new Map,this.Qq=new Map,this.Jq=[],this.Yq=[],this.Vq=[],this.Hq=!1,this.qq=!1,this.Zq=!1,this.Xq=()=>this.Kq(),this.$q=()=>this.tZ(),this.sZ=()=>this.iZ(),this.eZ=()=>this.nZ(),this.rZ=t=>this.hZ(t.nz),this.oZ=t=>this.aZ(),this.uZ=t=>this.lZ(),this.cZ=t=>this.fZ(),this.dZ=[],this.pZ=0}Kn(){this.mZ(),this.Xq=null,this.$q=null,this.sZ=null,this.eZ=null,this.rZ=null,this.uZ=null;for(const t of this.Bq)t.tB(),t.Kn();T.Nh(this.Bq),this.Bq=null,this.Fq.Kn(),this.Fq=null,T.Nh(this.Jq),this.Jq=null,T.Nh(this.Yq),this.Yq=null,T.Nh(this.Vq),this.Vq=null,this.Uq.clear(),this.Uq=null,this.Wq.clear(),this.Wq=null,this.Qq.clear(),this.Qq=null,T.Nh(this.dZ),this.dZ=null,this.Jc=null}gZ(){const t=this.Jc.Gf();t.addEventListener("pretick",this.Xq),t.addEventListener("tick2",this.$q),t.addEventListener("beforelayoutchange",this.sZ),t.addEventListener("layoutchange",this.eZ),t.addEventListener("instancedestroy",this.rZ),t.addEventListener("beforeload",this.oZ),t.addEventListener("afterload",this.uZ),t.addEventListener("afterlayoutstart",this.cZ)}mZ(){const t=this.Jc.Gf();t.removeEventListener("pretick",this.Xq),t.removeEventListener("tick2",this.$q),t.removeEventListener("beforelayoutchange",this.sZ),t.removeEventListener("layoutchange",this.eZ),t.removeEventListener("instancedestroy",this.rZ),t.removeEventListener("beforeload",this.oZ),t.removeEventListener("afterload",this.uZ),t.removeEventListener("afterlayoutstart",this.cZ)}_b(t){this.Fq.Zl(t);const s=T.MZ.yZ(t,this);this.Zl(s),this.wZ(s),this.Qq.set(s.kc(),0)}SZ(t){const s=this.TZ(),i=t.IF(),e=s.Xs(i),n=T.MZ.SZ(i+":"+this.Qq.get(i),e,this);return this.bZ(i),this.Zl(n),n}bZ(t){this.Qq.set(t,this.Qq.get(t)+1)}vZ(){for(const t of this.Bq)if(!t.xZ()){const s=t.IF();this.bZ(s)}}IZ(){for(const t of this.Qq.keys())this.Qq.set(t,0)}Zl(t){this.Bq.push(t),this.Uq.set(t.kc().toLowerCase(),t)}h0(t){t.CZ(),t.xZ()||(T.Oh(this.Bq,t),T.Oh(this.Jq,t),T.Oh(this.Yq,t),T.Oh(this.Vq,t),this.Uq.delete(t.kc().toLowerCase()),this.GZ(t),t.Kz())||t.Kn()}HF(t){this.Jc.HF(t,this.zq,null)}w4(){return this.Jc}TZ(){return this.Fq}NZ(t){this.zq=t}EZ(){return this.zq}*DZ(){for(const t of this.Bq)yield t}*_Z(){for(const t of this.Yq)yield t}AZ(t,s){this.Wq.has(t)||this.Wq.set(t,new Set),this.Wq.get(t).add(s)}wZ(t){for(const s of t.LZ())this.AZ(s,t)}GZ(t){for(const[s,i]of this.Wq.entries())i.has(t)&&(i.delete(t),0===i.size)&&this.Wq.delete(s)}OZ(t){if(this.Wq.has(t))return this.Wq.get(t)}RZ(t,s){if(s)for(const i of this.Bq){const e=s.every(t=>i.PZ(t.nz,t.trackId));if(e&&i.kc().includes(t.kc()))return i}}kZ(t){return this.Uq.get(t.toLowerCase())||null}FZ(t){for(const s of this.Jq)if(s.kc()===t)return s;for(const i of this.Yq)if(i.kc()===t)return i;return null}*jZ(i){if(Er.test(i)){Er.lastIndex=0;let t,s=new Set;do{if(t=Er.exec(i)){const e=t[1].split(",");for(const n of e)s.add(n)}}while(t);for(const r of s.values()){const h=this.kZ(r);h&&(yield h)}s.clear()}else{const t=this.kZ(i);t&&(yield t)}}*zZ(t){for(const s of this.Bq)s.iB(t)&&(yield s)}BZ(t){this.Jq.includes(t)||this.Jq.push(t),this.UZ()}WZ(t){T.Oh(this.Yq,t),this.QZ()}JZ(t){this.Yq.includes(t)?(t.YZ(!0),t.VZ(!1),t.HZ(!1)):(t.YZ(!1),t.VZ(!0),t.HZ(!1),this.Jq.includes(t)||this.Jq.push(t)),this.UZ()}qZ(t){t.YZ(!1),t.VZ(!1),t.ZZ(),T.Oh(this.Jq,t),this.QZ()}XZ(t){t.YZ(!1),t.VZ(!1),this.Yq.includes(t)&&(t.HZ(!0),this.Vq.push(t),T.Oh(this.Yq,t)),this.Jq.includes(t)&&t.HZ(!0)}KZ(t){t.YZ(!1),t.VZ(!1),t.HZ(!1),t.lB(1),T.Oh(this.Yq,t)}$Z(t){this.XZ(t),t.ZZ()}Kq(){if(!this.w4().x9()&&this.Hq&&!this.qq){for(this.Zq=!0;this.Jq.length;){const t=this.Jq.pop();(t.tX()?(t.sX(),this.Vq):(t.iX(),this.Yq)).push(t),0!==t.eX()&&(this.pZ=1)}const s=this.Jc.nX(),i=this.Jc.rX(),e=this.Jc.h3();for(let t=this.Yq.length-1;0<=t;t--){const n=this.Yq[t];n&&n.hX(s,e,i)}this.Zq=!1,0!==this.pZ&&this.w4().n4()}}tZ(){if(!this.w4().x9()&&this.Hq&&!this.qq){let i;for(let t=0,s=this.Vq.length;t<s;t++){const e=this.Vq[t];i=i||new Set,e.CZ(),this.aX(e),i.add(e)}if(i){T.kh(this.Vq,i);for(let t=this.pZ=0,s=this.Yq.length;t<s;t++)if(0!==this.Yq[t].eX()){this.pZ=1;break}}this.QZ()}}aX(t){t.Kz()||t.uX()&&t.lX()&&t.cX()&&t.fX()}UZ(){this.Hq||(this.Hq=!0)}QZ(){this.Vq.length||this.Yq.length||this.Jq.length||this.Zq||(this.Hq=!1)}iZ(){for(this.qq=!0;this.Jq.length;)this.qZ(this.Jq.pop());const t=new Set;for(const s of this.Yq){const i=s.iZ();i&&(s.CZ(),t.add(s))}T.kh(this.Yq,t),t.clear();for(const e of this.Vq){const n=e.iZ();n&&(e.CZ(),t.add(e))}T.kh(this.Vq,t),this.QZ();for(const r of this.Bq)r.dX()}nZ(){this.qq=!1}hZ(t){const s=t.uF(),i=this.OZ(s);if(i)if(this.Jc.x9())this.dZ.push(t);else for(const e of i)e.xZ()||(e.Kz()?this.h0(e):e.uX()||(this.aX(e),this.h0(e)))}aZ(){for(const t of this.Jq.map(t=>t))this.aX(t),this.h0(t);for(const s of this.Yq.map(t=>t))this.aX(s),this.h0(s)}lZ(){for(const t of this.dZ)this.hZ(t);T.Nh(this.dZ);for(const s of this.Bq)s.lZ()}fZ(){const t=this.Jc.D3(),s=t.G3();if(s)for(const i of this.Bq){const e=i.pX();e&&s.kc()===e&&this.JZ(i)}}QH(){return{timelinesJson:this.mX(),scheduledTimelinesJson:this.gX(),playingTimelinesJson:this.yX(),markedForRemovalTimelinesJson:this.MX(),hasRuntimeListeners:this.Hq,changingLayout:this.qq,isTickingTimelines:this.Zq}}JH(t){t&&(this.IZ(),this.wX(t.timelinesJson),this.SX(t.scheduledTimelinesJson),this.TX(t.playingTimelinesJson),this.bX(t.markedForRemovalTimelinesJson),this.Hq=!t.hasRuntimeListeners,this.qq=!!t.changingLayout,this.Zq=!!t.isTickingTimelines,this.vZ(),this.UZ(),this.QZ())}mX(){return this.Bq.map(t=>t.QH())}wX(t){for(const s of t){let t=this.kZ(s.name);if(t)t.JH(s);else{const i=this.vX(s);if(!i)continue;const e=this.kZ(i);(t=this.SZ(e)).JH(s)}t.xX()||this.h0(t)}}vX(t){const s=t.name,i=s.split(":");return i&&2===i.length?i[0]:null}gX(){return this.IX(this.Jq)}SX(t){this.CX(t,this.Jq)}yX(){return this.IX(this.Yq)}TX(t){this.CX(t,this.Yq)}MX(){return this.IX(this.Vq)}bX(t){this.CX(t,this.Vq)}GX(t,s){if(s)for(const i of s)if(i===t.kc())return!0;return!1}IX(t){return t.map(t=>t.kc())}CX(t,s){const i=new Set;for(const e of s)this.GX(e,t)||i.add(e);if(T.kh(s,i),t)for(const n of t){const r=this.kZ(n);if(r){const h=s.find((s=>t=>t.kc()===s)(n));h||s.push(r)}}}}}{const Dr=self.Ls,_r=[0,0],Ar=[0,0],Lr=[0,0],Or=[0,0,0,0,0],Rr=new Array(4),Pr=[{x:0,y:0,t:0,Gt:0},{x:0,y:0,t:0,Gt:0},{x:0,y:0,t:0,Gt:0}],kr={x:0,y:0,t:0,Gt:0};Dr.NX=class{constructor(t,s){this.EX=!1,this.DX=t,this._X=[];let i=null;if(i=s?this.DX.AX(s):Dr.first(this.DX.LX())){const e=i.GB("offsetX"),n=i.GB("offsetY");if(e&&n){this.OX=e,this.RX=n;const r=e.PX(),h=n.PX();for(let t=1,s=Math.min(r.length,h.length);t<s;++t){const o=r[t],a=(o.kX(),o.FX()),u=h[t],l=(u.kX(),u.FX());a&&"cubic-bezier"===a.jX()&&l&&"cubic-bezier"===l.jX()?this._X.push(Dr.Xn(Dr.zX,a,l,o,u,this._X.length)):(a&&"line"===a.jX()&&l&&l.jX(),this._X.push(Dr.Xn(Dr.BX,o,u,this._X.length)))}this.EX=!0}}}Kn(){for(const t of this._X)t.Kn();Dr.Nh(this._X),this._X=null,this.DX=null,this.OX=null,this.RX=null}UX(){return this.EX}WX(){return this._X}QX(t){const s="relative"===this.OX.JX()?t.YS():0,i="relative"===this.RX.JX()?t.qS():0;for(const e of this._X)e.QX(s,i)}zg(s,i,t){let e=NaN,n=this._X.length;for(let t=0;t<n;t++){const r=this._X[t];if("cubic-bezier"===r.Pv()){const h=r.zg(s,i);(isNaN(e)||h[3]<e)&&(e=h[3],Lr[0]=h[2],Lr[1]=r.$L())}}return Lr}YX(s,i,t){const e=t.tRange;Dr.ae(e[0])||(e[0]=0),Dr.ae(e[1])||(e[1]=1);let n=NaN,r=this._X.length;for(let t=0;t<r;t++){const h=this._X[t];if("cubic-bezier"===h.Pv()){const o=h.VX(s,i,e);(isNaN(n)||o[3]<n)&&(n=o[3],Lr[0]=o[2],Lr[1]=h.$L())}}return Lr}HX(t,s){return this._X[s].HX(t)}qX(t,s){return this._X[s].qX(t)}},Dr.zX=class{constructor(t,s,i,e,n){this.Ag=n;const r=t.ZX("cubic-bezier"),h=i.ZX("cubic-bezier"),o=s.ZX("cubic-bezier"),a=e.ZX("cubic-bezier");this.XX=t.KX(),this.$X=s.KX(),this.tK=t.KX()+r.sK(),this.iK=s.KX()+o.sK(),this.eK=i.KX()+h.nK(),this.rK=e.KX()+a.nK(),this.hK=i.KX(),this.oK=e.KX(),this.aK=0,this.uK=0,this.lK=0,this.cK=0,this.fK=0,this.dK=0,this.pK=0,this.mK=0,this.gK=0,this.yK=0,this.MK=0,this.wK=0,this.SK=0,this.TK=0,this.bK=0,this.vK=0,this.xK=0,this.IK=0,this.CK=0,this.GK=0,this.NK=NaN,this.EX=!1,this.EK=100,this.DK=new Array(this.EK+1),this.DK[0]=0,this._K=0,this.AK=[],this.LK=[];for(let t=0;t<100;t++)this.LK.push({x:0,y:0,t:0,Gt:0});this.RK()}Kn(){Dr.Nh(this.DK),this.DK=null,Dr.Nh(this.AK),this.AK=null,Dr.Nh(this.LK),this.LK=null}Pv(){return"cubic-bezier"}$L(){return this.Ag}PK(){return Math.floor(this._K/25)}kK(){return 1/this.PK()}QX(t,s){this.FK=t,this.jK=s,this.DK=new Array(this.EK+1),this.DK[0]=0,this.RK(),this.aK=this.XX+this.FK,this.uK=this.$X+this.jK,this.lK=this.tK+this.FK,this.cK=this.iK+this.jK,this.fK=this.eK+this.FK,this.dK=this.rK+this.jK,this.pK=this.hK+this.FK,this.mK=this.oK+this.jK,this.gK=3*(this.lK-this.aK),this.yK=3*(this.cK-this.uK),this.MK=3*(this.fK-this.lK),this.wK=3*(this.dK-this.cK),this.SK=3*(this.pK-this.fK),this.TK=3*(this.mK-this.dK),this.bK=3*(this.lK-this.aK),this.vK=3*(this.aK+this.fK-2*this.lK),this.xK=this.pK-this.aK+3*(this.lK-this.fK),this.IK=3*(this.cK-this.uK),this.CK=3*(this.uK+this.dK-2*this.cK),this.GK=this.mK-this.uK+3*(this.cK-this.dK)}Map(t){if(!this.EX)return NaN;const s=this.zK(t);return Ar[0]=this.BK(s),Ar[1]=this.UK(s),Ar}zg(t,s){const i=this.WK(100),e=this.QK(t,s,i),n=this.JK(t,s,i,e);return Or[0]=n.x,Or[1]=n.y,Or[2]=n.t,Or[3]=n.Gt,Or}VX(t,s,i){const e=this.WK(100),n=this.YK(t,s,e,i),r=this.JK(t,s,e,n);return Or[0]=r.x,Or[1]=r.y,Or[2]=r.t,Or[3]=r.Gt,Or}HX(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.gK+e*this.MK+n*this.SK,h=i*this.yK+e*this.wK+n*this.TK,o=Math.hypot(r,h);return _r[0]=r/o,_r[1]=h/o,_r}qX(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.gK+e*this.MK+n*this.SK,h=i*this.yK+e*this.wK+n*this.TK;return Math.atan2(h,r)}zK(n){if(this.EX){let t=n*this.DK[this.EK],s=0,i=this.EK,e=0;for(;s<i;)e=s+((i-s)/2|0),this.DK[e]<t?s=e+1:i=e;this.DK[e]>t&&e--;const r=this.DK[e];return r===t?e/this.EK:(e+(t-r)/(this.DK[e+1]-r))/this.EK}}BK(t){return this.EX?self.$l.mc("cubicbezier")(t,this.XX+this.FK,this.tK+this.FK,this.eK+this.FK,this.hK+this.FK):NaN}UK(t){return this.EX?self.$l.mc("cubicbezier")(t,this.$X+this.jK,this.iK+this.jK,this.rK+this.jK,this.oK+this.jK):NaN}WK(s){if(!(this.AK.length>=(s=s||100))){this.AK=new Array(s),s++;for(let t=0;t<s-1;t++){const i=t/(s-1),e=i**2,n=i**3,r=this.bK*i,h=this.vK*e,o=this.xK*n,a=this.IK*i,u=this.CK*e,l=this.GK*n,c=this.aK+r+h+o,f=this.uK+a+u+l;this.LK[t].x=c,this.LK[t].y=f,this.LK[t].t=i,this.LK[t].Gt=0,this.AK[t]=this.LK[t]}}return this.AK}QK(s,i,e,t=0,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.NK))for(let t=0;t<100;t++){const h=e[t],o=h.x-s,a=h.y-i;h.Gt=o*o+a*a,h.Gt<n&&(n=h.Gt,r=t)}else{for(let t=this.NK;t<this.NK+5&&!(t>=e.length);t++){const u=e[t],l=u.x-s,c=u.y-i;u.Gt=l*l+c*c,u.Gt<n&&(n=u.Gt,r=t)}for(let t=this.NK;t>this.NK-5&&!(t<0);t--){const f=e[t],d=f.x-s,p=f.y-i;f.Gt=d*d+p*p,f.Gt<n&&(n=f.Gt,r=t)}}return this.NK=r}YK(s,i,e,n,r=Number.MAX_SAFE_INTEGER){let h=0;if(isNaN(this.NK))for(let t=0;t<100;t++){const o=e[t],a=o.x-s,u=o.y-i;o.Gt=a*a+u*u,o.t>=n[0]&&o.t<=n[1]&&o.Gt<r&&(r=o.Gt,h=t)}else{for(let t=this.NK;t<this.NK+5&&!(t>=e.length);t++){const l=e[t],c=l.x-s,f=l.y-i;l.Gt=c*c+f*f,l.t>=n[0]&&l.t<=n[1]&&l.Gt<r&&(r=l.Gt,h=t)}for(let t=this.NK;t>this.NK-5&&!(t<0);t--){const d=e[t],p=d.x-s,m=d.y-i;d.Gt=p*p+m*m,d.t>=n[0]&&d.t<=n[1]&&d.Gt<r&&(r=d.Gt,h=t)}}return this.NK=h}JK(h,o,a,u){let l=a[u],t=1,c=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,s=0===u?0:u-1,i=u===t-1?t-1:u+1,e=a[s].t,n=a[i].t,r=(n-e)/4;if(r<.001)break;Rr[0]=a[s];for(let t=1;t<=2;t++){const f=e+t*r,d=f**2,p=f**3,m=this.bK*f,g=this.vK*d,y=this.xK*p,M=this.IK*f,w=this.CK*d,S=this.GK*p,T=this.aK+m+g+y,b=this.uK+M+w+S,v=T-h,x=b-o,I=v*v+x*x;if(I<c){c=I,u=t,kr.x=T,kr.y=b,kr.t=f,kr.Gt=I,l=kr;break t}const C=Pr[t-1];C.x=T,C.y=b,C.t=f,C.Gt=I,Rr[t]=C}Rr[3]=a[i],a=Rr}while(t++<20);return l}RK(){this.EX=!0;let s=this.BK(0),i=this.UK(0),e=0;for(let t=1;t<=this.EK;t++){const n=this.BK(.01*t),r=this.UK(.01*t),h=s-n,o=i-r;e+=Math.hypot(h,o),this.DK[t]=e,s=n,i=r}this._K=e}},Dr.BX=class{constructor(t,s,i){this.Ag=i,this.VK=t.KX(),this.HK=s.KX(),this.FK=0,this.jK=0}Kn(){}Pv(){return"line"}$L(){return this.Ag}QX(t,s){this.FK=t,this.jK=s}YS(){return this.VK+this.FK}qS(){return this.HK+this.jK}}}{const b=self.Ls;b.MZ=class extends b.qn{constructor(t,s,i){super(),this.Jc=i.w4(),this.qK=i,this.ZK=s,this.er=t,this.XK=[],this.KK=0,this.$K=null,this.t$=0,this.s$(),this.i$=null,this.e$=null,this.n$=0,this.r$=0,this.h$=1,this.o$=0,this.a$=1,this.u$=!1,this.l$=!1,this.c$=!1,this.f$=!0,this.d$=!1,this.p$=!1,this.m$=-1,this.g$=!1,this.y$=!1,this.M$=!1,this.w$=!1,this.S$=NaN,this.T$=[""],this.b$="",this.v$=!1,this.pZ=0,this.x$=0,this.I$=null}static yZ(t,s){const i=s.TZ(),e=i.C$(),n=i.Xs(t[e]),r=b.Xn(b.MZ,t[e],n,s);return r.G$(!0),r}static SZ(t,s,i){return b.Xn(b.MZ,t,s,i)}Kn(){if(!this.Kz()){const t=this.Jc.Gf();this.qK.qZ(this),this.qK.$Z(this);for(const s of this.XK)s.Kn();b.Nh(this.XK),this.XK=null,this.Jc=null,this.qK=null,this.ZK=null,this.d$=!0,this.i$=null,this.e$=null,this.N$(t)}}N$(t){const s=b.Xn(b.Event,"timelinestatereleased");s.E$=this,t.dispatchEvent(s)}Pv(){return 0}s$(){for(const t of this.ZK._$().D$())this.KK=this.XK.push(b.A$._b(this,t))}L$(){return this.qK}w4(){return this.Jc}LX(){return this.XK}O$(e,n,r,h){if(this.x$){let i;for(let s=0;s<this.XK.length;s++){let t=this.XK[s];if(e===t.TB()){const o=t.GB(r);o&&n.constructor===o.R$().constructor&&o.JX()===h.JX()&&(i=i||[]).push(o)}}return i}}xX(){return!!this.XK.length}AX(t){for(const s of this.XK)if(b.cn(s.IB(),t))return s;return null}P$(t){for(const s of this.XK)if(!s.k$()&&b.cn(s.kc(),t))return s;return null}y6(t){this.er=t}kc(){return this.er}F$(){return this.ZK}IF(){return this.ZK.kc()}rB(){return this.ZK.rB()}nB(t){this.ZK.nB(t)}j$(){return this.ZK.j$()}z$(t){this.ZK.z$(t)}B$(){return this.ZK.B$()}U$(t){this.ZK.U$(t)}JX(){return this.ZK.JX()}W$(t){this.ZK.JX(t)}SB(t){for(const s of this.LX())s.SB(t)}oB(){return this.ZK.oB()}hB(t){return this.ZK.hB(t)}uB(){return this.ZK.uB()}aB(t){return this.ZK.aB(t)}Mz(){return this.ZK.Mz()}Q$(t){return this.ZK.Q$(t)}lB(t){return this.h$=t}cB(){return this.h$}pX(){return this.ZK.pX()}J$(){return this.ZK.J$()}Y$(){return this.ZK.Y$()}V$(){return this.o$}H$(){return!this.IsPlaying()||0<this.h$}dB(){return this.i$||(this.i$=new Promise(t=>{this.e$=t})),this.i$}ZZ(){this.i$&&(this.e$(),this.i$=null,this.e$=null)}q$(t){this.T$=b.MZ.Z$(t),this.v$=!0}fB(){return this.T$}X$(){return this.v$&&(this.b$=this.T$.join(" ")),this.v$=!1,this.b$}iB(t){if(!this.T$)return!1;if(!this.T$.length)return!1;const s=b.MZ.Z$(t);return!!s&&!!s.length&&s.every(b.MZ.K$,this)}$$(){b.O9.Timeline&&this.constructor===b.MZ&&(b.O9.Timeline.A9.PushTriggerTimeline(this),this.qK.HF(b.O9.Timeline.A9.OnTimelineStarted),this.qK.HF(b.O9.Timeline.A9.OnTimelineStartedByName),this.qK.HF(b.O9.Timeline.A9.OnTimelineStartedByTags),this.qK.HF(b.O9.Timeline.A9.OnAnyTimelineStarted),b.O9.Timeline.A9.PopTriggerTimeline())}ttt(){this.m$=this.Jc.stt()}fX(){this.M$||(this.M$=!0,b.O9.Timeline&&this.constructor===b.MZ&&(b.O9.Timeline.A9.PushTriggerTimeline(this),this.qK.HF(b.O9.Timeline.A9.OnTimelineFinished),this.qK.HF(b.O9.Timeline.A9.OnTimelineFinishedByName),this.qK.HF(b.O9.Timeline.A9.OnTimelineFinishedByTags),this.qK.HF(b.O9.Timeline.A9.OnAnyTimelineFinished),b.O9.Timeline.A9.PopTriggerTimeline()))}YZ(t){this.u$=t}itt(){return this.m$===this.Jc.stt()}IsPlaying(t=!1){return!!this.itt()||!(!this.ett()||t)||this.u$}ntt(){return this.IsPlaying(!0)}mB(){return this.htt()}htt(){return!(this.Kz()||this.ett()||this.ntt()||this.lX())}VZ(t){this.l$=t}ett(){return this.l$}ott(t){this.f$=t;const s=this.R_();(s<=0||s>=this.rB())&&(this.f$=!0)}lX(){return this.f$}Kz(){return this.d$}HZ(t){this.p$=t}tX(){return this.p$}att(t){this.g$=t}utt(){return this.g$}G$(t){this.y$=!!t}xZ(){return this.y$}cX(){return this.c$}R_(){return this.n$}eB(t){const s=this.R_();this.ltt(t),this.ott(!1),this.lX()||this.att(!0),!this.ntt()&&!this.ett()&&this.c$||(this.ntt()||this.ett()||this.c$?this.ntt()?this.tB():this.ett()&&(this.qK.qZ(this),this.ctt()):this.ctt()),this.ftt(),this.dtt(this.R_(),!1,!0,!0,s),this.ptt(),this.pZ&&this.w4().n4(),this.mtt()}ltt(t){(t=b.ae(t)?t:this.rB())<0?this.n$=0:t>=this.rB()?this.n$=this.rB():this.n$=t}gtt(t){(t=b.ae(t)?t:this.rB())<0?this.n$=0:t>=this.rB()?this.n$=this.rB():this.n$=t;for(const s of this.XK)s.ytt()}mtt(){b.O9.Timeline&&this.constructor===b.MZ&&(b.O9.Timeline.A9.PushTriggerTimeline(this),this.qK.HF(b.O9.Timeline.A9.OnTimeSet),this.qK.HF(b.O9.Timeline.A9.OnTimeSetByName),this.qK.HF(b.O9.Timeline.A9.OnTimeSetByTags),b.O9.Timeline.A9.PopTriggerTimeline())}Mtt(){if(!this.oB())if(this.uB()&&1===this.o$){if(this.H$()){if(this.R_()>=this.rB())return!1}else if(this.R_()<=0)return!1}else if(!this.oB()&&!this.uB())if(this.H$()){if(this.R_()>=this.rB())return!1}else if(this.R_()<=0)return!1;return!0}sB(){this.Kz()||this.Mtt()&&this.Play(!0)}Play(t=!1){return!this.Kz()&&!this.ett()&&(this.ntt()&&this.itt()?this.wtt():!this.ntt()&&!!(this.lX()||t||this.utt())&&this.Stt())}wtt(){return this.att(!1),this.qK.WZ(this),this.qK.JZ(this),this.dB(),!0}Stt(){return this.att(!1),this.qK.JZ(this),this.dB(),!0}tB(t=!1){this.Kz()||(this.ott(t),this.qK.XZ(this),this.lX()&&this.ZZ())}Hf(t=!0,s=!1){if(!this.Kz()){if(!this.ntt()&&this.ett())return this.qK.qZ(this);if(!this.lX()){this.tB(!0),this.H$()?this.ltt(0):this.ltt(this.rB());const i=this.R_();this.ftt(),s?this.Ttt(i):this.dtt(i,!1,!1,!0),t&&this.mtt(),this.ptt(),this.pZ&&t&&this.w4().n4()}}}btt(){this.Hf(!1,!0)}Ttt(t){this.dtt(t,!1,!1,!0,NaN,!1,!0)}iZ(){if(!this.Kz()){if(!this.w4().x9()&&this.vtt())return!1;this.qK.KZ(this),this.w4().x9()||this.btt()}return!0}ctt(){this.iX(!0)}sX(){this.iX(!1,!0),this.YZ(!1),this.VZ(!1)}iX(t=!1,s=!1){if(!this.tX()||s){if(t){this.M$=!1,this.c$=!0,this.w$=!0,this.ftt();for(const i of this.XK)i.iX()}else if(this.YZ(!0),this.VZ(!1),this.$$(),this.lX()){this.m$=-1,0!==this.o$&&(this.h$=Math.abs(this.h$)),this.o$=0,this.a$=1,this.f$=!1,this.M$=!1,this.c$=!0,this.w$=!0,this.H$()?this.ltt(0):this.ltt(this.rB()),this.ftt();for(const e of this.XK)e.iX()}else{this.w$=!0,this.M$=!1,this.ftt();for(const n of this.XK)n.xtt()}this.ptt()}}eX(){return this.pZ}ftt(){this.x$=0;for(const t of this.XK)t.NN()&&(this.x$=1)}ptt(){this.pZ=0;for(const t of this.XK)t.Itt(),0===this.pZ&&1===t.eX()&&(this.pZ=1),this.$K||1!==t.Ctt()||(this.$K||(this.$K=[]),this.t$=this.$K.push(t))}hX(t,s,i){if(this.Y$()){if(0===t&&0===this.S$)return;this.S$=t,t=i}else{if(0===i&&0===this.S$)return;t=this.S$=i,s=1}const e=this.n$+this.r$,n=t*s*this.h$,r=e+n,h=this.ZK.Gtt;r<0?(this.n$=0,this.r$=-r):h<=r?(this.n$=h,this.r$=this.n$-r):(this.n$=r,this.r$=0);let o=!1,a=!1,u=this.oB(),l=this.uB();u||l?u&&!l?0<this.h$?this.n$>=h&&(this.gtt(0),a=!0):this.n$<=0&&(this.gtt(h),a=!0):!u&&l?0<this.h$?this.n$>=h&&(this.ltt(h),this.lB(-1*this.cB()),a=!0,1===this.o$?this.a$<this.Mz()?(this.a$++,this.o$=0):o=!0:0===this.o$&&(this.o$=1)):this.n$<=0&&(this.ltt(0),this.lB(-1*this.cB()),a=!0,1===this.o$?this.a$<this.Mz()?(this.a$++,this.o$=0):o=!0:0===this.o$&&(this.o$=1)):u&&l&&(0<this.h$?this.n$>=h&&(this.ltt(h),this.lB(-1*this.cB()),a=!0,this.o$++,b.wrap(this.o$,0,2)):this.n$<=0&&(this.ltt(0),this.lB(-1*this.cB()),a=!0,this.o$++,b.wrap(this.o$,0,2))):0<this.h$?this.n$>=h&&(this.a$<this.Mz()?(this.a$++,this.gtt(0),a=!0):(this.ltt(h),o=!0)):this.n$<=0&&(this.a$<this.Mz()?(this.a$++,this.gtt(h),a=!0):(this.ltt(0),o=!0));let c,f=this.KK;if(o){for(c=0;c<f;c++)this.XK[c].Ntt();this.tB(!0),this.ttt()}else{const d=this.t$;for(c=0;c<d;c++)this.$K[c].Ett();if(1===this.x$)for(c=0;c<f;c++){const p=this.XK[c],m=p.Dtt(),g=this.n$-m,y=e-m;g<0&&0<y?(this.n$=m<0?0:h<=m?h:m,p.Gc(m,!0,!1,a,this.w$,!1)):p.Gc(this.n$,!0,!1,a,this.w$,!1)}else for(c=0;c<f;c++)this.XK[c].Gc(this.n$,!0,!1,a,this.w$,!1);for(c=0;c<d;c++)this.$K[c]._tt();this.w$&&(this.w$=!1)}}dtt(s,i=!1,e=!1,n=!1,r=NaN,t=!1,h=!1){for(const o of this.XK)o.Ett();for(const a of this.XK){let t=s;if("number"==typeof r&&!isNaN(r)){const u=this.R_(),l=u-a.Dtt(),c=r-a.Dtt();l<0&&0<c&&(t=a.Dtt(),this.ltt(t))}a.Gc(t,i,e,n,this.w$,h)}for(const f of this.XK)f._tt();this.w$&&t&&(this.w$=!1)}Att(){const t=this.ZK._$().Ltt(),s=b.A$._b(this,t);return this.KK=this.XK.push(s),s}CZ(){if(!this.Kz())for(const t of this.XK)t.Ott()}dX(){for(const t of this.XK)t.dX()}Rtt(){for(const t of this.XK)t.Ptt()}ktt(t,s,i){if(s){if("number"==typeof i&&0<=i){const e=this.XK[i];return e?(e.Ftt(s),void this.qK.AZ(s.uF(),this)):void 0}for(const n of this.XK)if(n.k$())if(t){if(n.IB()===t){n.Ftt(s),this.qK.AZ(s.uF(),this);break}}else if(!n.jtt()){n.Ftt(s),this.qK.AZ(s.uF(),this);break}}}PZ(t,s){for(const i of this.XK)if(i.k$())if(s){if(s===i.IB()&&t===i.TB())return!0}else if(t===i.TB())return!0;return!1}uX(){return this.XK.some(t=>!t.k$()||t.ztt())}vtt(){return this.XK.some(t=>{if(t.k$()){if(!t.ztt())return!1;const s=t.uF();return!!s&&s.rY()}return!1})}GB(t){for(const s of this.LX())for(const i of s.Btt())if(i.Utt()===t)return i}Wtt(t){for(const s of this.XK)if(t===s.TB())return s;return null}Qtt(t){let s=t?t.split(" "):[],i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const e of this.LX())for(const n of e.Jtt()){const r=s.every(t=>n.Ytt(t));if(r)return n}}LZ(){const t=[];for(const s of this.LX())t.push(s.uF());return t.filter(t=>t)}lZ(){for(const t of this.LX())t.lZ()}QH(){return{tracksJson:this.Vtt(),name:this.er,playheadTime:this.R_(),playbackRate:this.h$,pingPongState:this.o$,currentRepeatCount:this.a$,isPlaying:this.u$,isScheduled:this.l$,initialStateSet:this.c$,finishedTriggers:this.M$,complete:this.f$,released:this.d$,markedForRemoval:this.p$,completedTick:this.m$,implicitPause:this.g$,isTemplate:this.y$,tags:this.T$.join(" "),stringTags:this.b$,tagsChanged:this.v$,firstTick:this.w$}}JH(t){t&&(this.Htt(t.tracksJson),this.er=t.name,this.n$=t.playheadTime,this.h$=t.playbackRate,this.o$=t.pingPongState,this.a$=t.currentRepeatCount,this.u$=!!t.isPlaying,this.l$=!!t.isScheduled,this.c$=!!t.initialStateSet,this.M$=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.f$=!!t.complete,this.d$=!!t.released,this.p$=!!t.markedForRemoval,this.m$=t.completedTick,this.g$=!!t.implicitPause,this.y$=!!t.isTemplate,this.T$=t.tags.split(" "),this.b$=t.stringTags,this.v$=!!t.tagsChanged,this.w$=!!t.firstTick)}Vtt(){return this.XK.map(t=>t.QH())}Htt(t){this.Rtt(),t.forEach((t,s)=>{const i=this.XK[s];i.JH(t)}),this.XK.filter(t=>t.ztt())}static K$(t){const s=this.fB();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static Z$(t){if(b.Oe(t))return t.slice(0);if(b.Me(t))return t.split(" ");throw new Error("invalid tags")}qtt(){return this.I$||(this.I$=b.Xn(self.yB,this)),this.I$}}}{const Fr=self.Ls;Fr.A$=class extends Fr.qn{constructor(t,s){super(),this.DX=t,this.Ztt=s,this.Xtt=s._$(),this.Ktt=NaN,this.$tt=NaN,this.tst=null,this.sst=null,this.ist=!1,this.bN=0<s.Dtt(),this.est=!1,this.nst=!1,this.rst=NaN,this.hst=null,this.ost=this.Ztt.ust().ast(),this.lst=[],this.cst(),this.fst=0,this.pZ=0,this.dst=0}static _b(t,s){return Fr.Xn(Fr.A$,t,s)}Kn(){this.ost=null;for(const t of this.lst)t.Kn();Fr.Nh(this.lst),this.lst=null,this.DX=null,this.tst=null,this.sst=null,this.Ztt=null,this.hst=null}cst(){for(const t of this.Ztt.mst().pst())this.lst.push(Fr.gst._b(this,t))}Ott(){for(const t of this.lst)t.Ott()}dX(){for(const t of this.lst)t.dX();this.tst=null,this.sst=null}yst(){return this.DX}w4(){return this.DX.w4()}Jtt(){return this.ost||(this.ost=this.Ztt.ust().ast()),this.ost}Btt(){return this.lst}GB(s){for(let t=0;t<this.lst.length;t++){const i=this.lst[t];if(i.Utt()===s)return i}}Mst(){this.tst||this.TB()}wst(){return!!this.tst&&!this.tst.CU()}ztt(){if(!this.k$())return!1;const t=this.Sst(),s=this.w4().J3(t);return!!s&&!s.CU()}uF(){if(this.k$()){const t=this.Tst();if(-1!==t)return this.w4().qJ(t)}}bst(){return this.DX.LX().indexOf(this)}Ptt(){this.tst=null,this.Ktt=NaN,this.sst=null,this.$tt=NaN,this.ist=!0}jtt(){return!!this.tst}TB(){if(!this.ist){if(!this.tst||!this.wst()){const t=this.Sst();this.tst=this.w4().J3(t)}return this.tst}}Ftt(t){if(this.ist=!1,this.tst!==t){this.dX(),this.tst=t,this.$tt=t.uF().$L(),this.Ktt=t.vF(),this.sst=t.Z3();for(const s of this.vst()){const i=s.xst,e=s.Ist,n=i.Cst();switch(n){case"instance-variable":{e.Gst();const r=t.uF(),h=r.Nst(s.name),o=r.Est(h),a=r.Dst(h);o===s.name&&a===s.type&&e._st(h);break}case"behavior":{const u=s.sz,l=this.uF(),c=t.uF(),f=e.ez(c);if(u&&f){const d=u.kc();l.Ast(d),c.Ast(d),e.Gst(),e.Lst(f.NY())}break}}}}}*vst(){for(const t of this.lst){const s=t.R$(),i=this.uF(),e={xst:t,Ist:s};switch(t.Cst()){case"world-instance":e.property=t.Utt();break;case"instance-variable":{const n=s.Gst();e.name=i.Est(n),e.type=i.Dst(n);break}case"effect":{const r=i.CP(),h=s.Ost(r);e.Rst=h;break}case"behavior":{const o=s.ez(i);e.sz=o;break}case"plugin":e.sP=i.iP()}yield e}}Z3(){if(!this.sst||!this.wst()){const t=this.TB();t&&(this.sst=t.Z3())}return this.sst}Pst(){return this.Ztt}Sst(){return isNaN(this.Ktt)?this.Ztt.Sst():this.Ktt}kst(t){this.Ztt.kst(t)}B$(){return this.Ztt.B$()}U$(t){this.Ztt.U$(t)}JX(){return this.Ztt.JX()}IB(){return this.Ztt.IB()}Dtt(){return this.Ztt.Dtt()}Fst(){return this.Ztt.Fst()}jst(t){this.Ztt.jst(t)}W$(t){this.Ztt.W$(t)}SB(t){for(const s of this.Jtt())s.SB(t);for(const i of this.Btt())i.SB(t)}zst(){return this.Ztt.zst()}Bst(t){this.Ztt.Bst(t)}Tst(){return isNaN(this.$tt)?this.Ztt.Tst():this.$tt}Ust(t){this.Ztt.Ust(t)}Wst(t){this.Ztt.Wst(t)}Qst(){const t=this.TB();if(t){const s=t.J5();if(s.Jst())return t.J5().Qst()}return this.Ztt.Qst()}Yst(t){this.Ztt.Yst(t)}Vst(){const t=this.TB();if(t){const s=t.J5();if(s.Jst())return t.J5().Vst()}return this.Ztt.Vst()}Pv(){return this.Ztt.Pv()}kc(){return this.Ztt.kc()}k$(){return 0===this.Pv()}Hst(){return 1===this.Pv()}qst(){return 2===this.Pv()}Zst(){return this.fst}eX(){return this.pZ}Ctt(){return this.dst}NN(){return this.bN}ytt(){for(const t of this.lst)t.ytt()}iX(){if(this.Mst(),this.wst()||!this.k$()){const t=this.yst(),s=t.H$(),i=s?0:this.Fst();for(const n of this.lst)n.iX(i),0===this.fst&&1===n.Zst()&&(this.fst=1),0===this.pZ&&1===n.eX()&&(this.pZ=1);this.dst=0;const e=this.lst.some(t=>t.Ctt());e&&(this.dst=1),this.hst=this.Xst(i),this.est=!1,this.nst=!1,this.Gc(i),this.Kst(this.Xst(i))}}xtt(){if(this.Mst(),this.wst()||!this.k$()){this.DX.H$();const t=this.DX.R_()-this.Dtt();this.hst=this.Xst(t);for(const s of this.lst)s.xtt(t)}}Ntt(){if(!this.yst().lX()&&(this.Mst(),this.wst()||!this.k$())&&!this.bN){const t=this.DX.R_(),s=this.Dtt()+this.Fst();s<=t?this.Gc(this.Fst(),!0,!1,!0,!1,!1,!0):t<=0&&this.Gc(0,!0,!1,!0,!1,!1,!0)}}Itt(){for(let t=0,s=this.lst.length;t<s;t++){const i=this.lst[t];i.Itt(),0===this.fst&&1===i.Zst()&&(this.fst=1),0===this.pZ&&1===i.eX()&&(this.pZ=1)}}Ett(){const s=this.lst.length;for(let t=0;t<s;t++)this.lst[t].Ett()}Gc(i,t=!1,e=!1,n=!1,s=!1,r=!1,h=!1){this.tst||this.TB();const o=this.tst&&!this.tst.CU(),a=0===this.Ztt.$c;if((o||!a)&&!(r&&a&&this.uF().rY()||(i-=this.Dtt())<0)){this.$st(i,t),this.tit(i,t,s);for(let t=0,s=this.lst.length;t<s;t++)this.lst[t].Gc(i,e,n,h);this.sit(i,t),0!==this.fst&&(this.sst||(this.sst=this.tst.Z3()),this.sst)&&this.sst.vj()}}_tt(){const s=this.lst.length;for(let t=0;t<s;t++)this.lst[t]._tt()}$st(t,s){if(s&&this.bN&&!this.est){const i=this.yst();if(i.H$()){if(t<0)return}else if(t>this.Fst())return;for(const e of this.lst)e.iX();this.est=!0}}sit(t,s){if(s&&this.bN&&!this.nst){const i=this.yst();if(i.H$()){if(t>=this.Fst()){for(const e of this.lst)e.Gc(this.Fst(),!1,!0);this.nst=!0}}else if(t<=0){for(const n of this.lst)n.Gc(0,!1,!0);this.nst=!0}}}tit(t,s,i){if(!i&&s&&Fr.O9.Timeline){const e=this.yst(),n=this.hst.kX(),r=this.hst.R_(),h=n?n.R_():e.rB();if(t<=r||h<=t)if(this.hst=this.Xtt.iit(t,this.Ztt),e.H$())n&&this.Kst(this.hst);else{const o=this.hst.kX();o&&this.Kst(o)}}}Xst(t){const s=this.Xtt.eit(t,this.Ztt);return s||this.Xtt.iit(t,this.Ztt)}Kst(t){if(Fr.O9.Timeline){const s=this.yst(),i=s.L$();Fr.O9.Timeline.A9.PushTriggerTimeline(s),Fr.O9.Timeline.A9.PushTriggerKeyframe(t),i.HF(Fr.O9.Timeline.A9.OnAnyKeyframeReached),i.HF(Fr.O9.Timeline.A9.Kst),Fr.O9.Timeline.A9.PopTriggerTimeline(s),Fr.O9.Timeline.A9.PopTriggerKeyframe(t)}}nit(){const t=this.Ztt.ust(),s=t.rit();return s}hit(){const t=this.Ztt.mst(),s=t.oit(),i=Fr.gst._b(this,s);return this.lst.push(i),i}ait(t){const s=this.Ztt.ust();s.uit(t)}lit(t){for(const s of this.lst)s.lit(t)}cit(){for(const t of this.lst)t.cit()}fit(){if(this.Mst(),this.wst()||!this.k$())for(const t of this.lst)t.fit()}dit(){if(this.Mst(),this.wst()||!this.k$()){let t=!1;for(const s of this.lst){const i=s.dit();!t&&i&&(t=!0)}if(t){const e=this.nit();e.eB(this.yst().R_()),e.SB("noease"),e.Bst(!0),e.q$("")}}}lZ(){isNaN(this.rst)||this.pit(this.rst),this.rst=NaN}QH(){const t=this.TB(),s=t?t.vF():this.Sst();return{propertyTracksJson:this.mit(),lastKeyframeDataItemJson:this.git(),initialStateOfNestedSet:this.est,endStateOfNestedSet:this.nst,instanceUid:s,cleared:this.ist}}JH(t){if(t){this.yit(t.propertyTracksJson),this.Mit(t.lastKeyframeDataItemJson),this.rst=t.instanceUid,this.est=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.est=t.initialStateOfNestedSet),this.nst=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.nst=t.endStateOfNestedSet),this.ist=!!t.hasOwnProperty("cleared")&&t.cleared;for(const s of this.lst)0===this.fst&&1===s.Zst()&&(this.fst=1),0===this.pZ&&1===s.eX()&&(this.pZ=1);this.dst=0,this.lst.some(t=>t.Ctt())&&(this.dst=1)}}git(){const t=this.Ztt.ust();return t.wit(this.hst)}mit(){return this.lst.map(t=>t.QH())}yit(t){t.forEach((t,s)=>{const i=this.lst[s];i.JH(t)})}pit(t){if(Fr.ae(t)){const s=this.w4().J3(t);if(s){const i=this.yst();i.ktt(this.Ztt.IB(),s,this.bst())}}}Mit(t){const s=this.Ztt.ust();this.hst=s.Sit(t)}}}{const jr=self.Ls;jr.gst=class extends jr.qn{constructor(t,s){super(),this.Tit=t,this.bit=s,this.vit=s.mst(),this.fst=0,this.pZ=0,this.dst=0,this.xit=this.R$(),this.Iit=this.bit.Git().Cit(),this.Nit=null,this.Eit=null}static _b(t,s){return jr.Xn(jr.gst,t,s)}Kn(){this.Tit=null,this.xit&&(this.xit.Kn(),this.xit=null),this.Iit=null,this.bit=null,this.vit=null}Zst(){return this.fst}eX(){return this.pZ}Ctt(){return this.dst}Dit(){return!!this.Eit}_it(t){this.Eit=t}Ait(){return this.Eit}Lit(){return this.Tit}Oit(){return this.bit}mst(){return this.vit}yst(){return this.Tit.yst()}w4(){return this.Tit.w4()}TB(){return this.Tit.TB()}R$(){if(!this.xit){let t=this.bit.Cst(),s;switch(t){case"behavior":s=new jr.gst.Rit(this);break;case"effect":s=new jr.gst.Pit(this),this.pZ=1;break;case"instance-variable":s=new jr.gst.kit(this);break;case"plugin":s=new jr.gst.Fit(this),this.pZ=1;break;case"world-instance":s=new jr.gst.jit(this),this.pZ=1,this.fst=1;break;case"value":s=new jr.gst.zit(this);break;case"audio":s=new jr.gst.Bit(this)}this.xit=s}return this.xit}Cst(){return this.bit.Cst()}Uit(t){this.bit.Uit(t)}Wit(){return this.bit.Qit()}Jit(t){this.bit.Yit(t)}CB(){return this.R$().Vit()}Utt(){return this.bit.Hit()}qit(t){this.bit.Zit(t)}Xit(){return this.bit.Pv()}Kit(t){this.bit.$it(t)}tet(){return this.mst().iet(this.bit).Pv()}eet(){return this.bit.eet()}net(t){this.bit.net(t)}ret(){return this.bit.ret()}het(t){this.bit.het(t)}zst(){return this.bit.zst()}Bst(t){this.bit.Bst(t)}B$(){return this.bit.B$()}U$(t){this.bit.U$(t)}JX(){return this.bit.JX()}W$(t){this.bit.W$(t)}SB(t){for(const s of this.oet())s.SB(t)}aet(){return this.bit.aet()}oet(){return this.Iit||(this.Iit=this.bit.Git().Cit()),this.Iit}PX(){return this.bit.Git().PX()}uet(t){return this.vit.uet(t,this.bit)}let(t){return this.vit.let(t,this.bit)}cet(t){let s=this.vit.uet(t,this.bit),i;return i=s?this.vit.fet(t,this.bit):(s=this.vit.let(t,this.bit),this.vit.det(t,this.bit)),{start:s,end:i}}*pet(){for(const t of this.oet())yield t.KX()}*met(){for(const t of this.oet())yield t.R_()}Ott(){this.R$().Ott()}dX(){this.R$().dX()}yet(){return this.R$().yet()}ytt(){this.R$().ytt()}iX(t){this.R$().iX(),this.Nit=this.Met(t),this.Itt()}xtt(t){this.R$().xtt(),this.Nit=this.Met(t)}Itt(){const t=this.Lit();if(this.dst=0,t.k$()){const s=this.yst(),i=t.TB(),e=this.R$(),n=this.Utt(),r=e.wet();if(r){const h=s.O$(i,e,n,this);h&&h.length&&(this.dst=1)}else this.dst=0}}Met(t){const s=this.yst(),i=this.vit.uet(t,this.bit);return i||(s.H$()?this.vit.let(t,this.bit):this.vit.det(t,this.bit))}Ett(){this.xit.Ett()}Gc(t,s=!1,i=!1,e=!1){let n,r,h=!1;if(s)n=this.vit.let(t,this.bit);else{if(this.Nit){const o=this.yst(),a=this.Nit.kX(),u=this.Nit.R_(),l=a?a.R_():o.rB();(t<=u||l<=t)&&(this.Nit=this.vit.let(t,this.bit),h=!0)}else this.Nit=this.vit.let(t,this.bit),h=!0;n=this.Nit}n&&(r=n.kX()),this.xit.Gc(t,n,r,s,i,e,h)}Tet(t){if(this.Nit){const e=this.yst(),n=this.Nit.kX(),r=this.Nit.R_(),h=n?n.R_():e.rB();(t<=r||h<=t)&&(this.Nit=this.vit.let(t,this.bit))}else this.Nit=this.vit.let(t,this.bit);const s=this.Nit,i=s.kX();return this.xit.Tet(t,s,i)}bet(t,s,i){return this.xit.Tet(t,s,i)}_tt(){this.xit._tt()}static vet(t,s){const i=s.Oit(),e=s.vit;return e.let(t,i)}static xet(t,s){const i=s.Oit(),e=s.vit;return e.det(t,i)}Iet(){const t=this.bit.Git(),s=t.Cet();return this.Nit=null,s}lit(t){this.Nit=null;const s=this.bit.Git();s.Get(t)}cit(){this.R$().cit()}fit(){const t=this.R$().fit();if(t){const s=this.vit.iet(this.bit),i=this.R$().yet();s.Net(i)}}dit(){const t=this.R$().dit();return t&&this.Eet(),this.R$().Det(),t}Eet(){const t=this.yst().R_(),s=this.R$(),i=jr.gst.vet(t,this),e=this.Iet();e.$it(i.Pv()),e.eB(t),e.SB(i._et()),e.Bst(!0),e.Aet(s.Let()),e.Net(s.yet())}QH(){return{sourceAdapterJson:this.R$().QH()}}JH(t){t&&this.R$().JH(t.sourceAdapterJson)}}}{const zr=self.Ls,Br=zr.gst;Br.jit=class{constructor(t){this.Oet=t,this.Ret=null,this.Pet()}Kn(){this.Ret&&(this.Ret.Kn(),this.Ret=null),this.Oet=null}wet(){return this.Ret.wet()}GB(){return this.Oet}Ott(){this.Ret&&this.Ret.Ott()}dX(){this.Ret&&this.Ret.dX()}Pet(){return this.Ret||(this.Ret=this.ket()),this.Ret}Gst(){}$L(){return this.Gst()}Fet(){}ytt(){this.Pet().ytt()}iX(){this.Pet().iX()}xtt(){this.Pet().xtt()}Ett(){this.Ret.jet()}Gc(t,s,i,e,n,r,h){let o=this.Oet.tet(),a;switch(o){case"numeric":a=Br.zet.Gc(t,s,i,this.Oet);break;case"angle":a=Br.Bet.Gc(t,s,i,this.Oet);break;case"boolean":a=Br.Uet.Gc(t,s,i,this.Oet);break;case"color":a=Br.Wet.Gc(t,s,i,this.Oet);break;case"text":a=Br.Qet.Gc(t,s,i,this.Oet)}this.Ret.Jet(t,a,s,i,e,n,r,h)}Tet(t,s,i){switch(this.Oet.tet()){case"numeric":return Br.zet.Gc(t,s,i,this.Oet);case"angle":return Br.Bet.Gc(t,s,i,this.Oet);case"boolean":return Br.Uet.Gc(t,s,i,this.Oet);case"color":return Br.Wet.Gc(t,s,i,this.Oet);case"text":return Br.Qet.Gc(t,s,i,this.Oet)}}_tt(){this.Ret.Yet()}cit(){this.Pet().Vet()}Det(){this.Pet().Det()}yet(){return this.Pet().yet()}fit(){return this.Pet().fit()}dit(){return this.Pet().dit()}Let(){const t=this.Oet,s=t.Lit(),i=s.yst().R_(),e=Br.vet(i,t),n=e.kX(),r=t.tet();switch(r){case"numeric":return Br.zet.Gc(i,e,n,t);case"angle":return Br.Bet.Gc(i,e,n,t);case"boolean":return Br.Uet.Gc(i,e,n,t);case"color":return Br.Wet.Gc(i,e,n,t);case"text":return Br.Qet.Gc(i,e,n,t)}}ket(){const t=this.Oet,s=t.aet()?t.tet():"";switch(s){case"combo":case"boolean":case"text":case"string":return new Br.qet.Het(this);case"numeric":case"number":case"angle":return new("combo"===this.Oet.Xit()?Br.qet.Het:Br.qet.Zet)(this);case"color":case"offsetColor":return new Br.qet.Xet(this);default:return new Br.qet.Zet(this)}}QH(){return{propertyAdapterJson:this.Pet().QH()}}JH(t){t&&this.Pet().JH(t.propertyAdapterJson)}}}{const Ur=self.Ls;class Wr extends Ur.gst.jit{constructor(t){super(t),this.Ket=NaN}Gst(){return this.Oet.Oit().Qit()[0]}$L(){return this.Ket||super.$L()}Fet(){return this.Oet.Lit().TB()}_st(t){const s=this.Oet.Oit().Qit()[0];s!==t&&(this.Ket=t)}Gc(t,s,i,e,n,r,h){this.Pet().$et(s.Vit())&&super.Gc(t,s,i,e,n,r,h)}Tet(t,s,i){if(this.Pet().$et(s.Vit()))return super.Tet(t,s,i)}QH(){return Object.assign(super.QH(),{index:this.Ket})}JH(t){t&&(super.JH(t),this.Ket=t.index)}}Ur.gst.kit=Wr}{const Qr=self.Ls;class Jr extends Qr.gst.jit{constructor(t){super(t),this.H8=NaN}Gst(){const t=this.Oet.Oit();return t.Qit()[1]}Fet(){const t=this.Oet.Oit(),s=this.Oet.Lit(),i=this.H8||t.Qit()[0],e=s.TB(),n=e.tnt(i),r=e.snt()[n];return r.J5()}ez(t){const s=this.Oet.Oit(),i=s.Qit()[2];return t.int(i)}Lst(t){const s=this.Oet.Oit();s.Qit()[0]!==t&&(this.H8=t)}Gc(t,s,i,e,n,r,h){const o=this.Oet.Lit(),a=o.TB();this.ez(a.uF())&&super.Gc(t,s,i,e,n,r,h)}Tet(t,s,i){const e=this.Oet.Lit(),n=e.TB();if(this.ez(n.uF()))return super.Tet(t,s,i)}QH(){return Object.assign(super.QH(),{sid:this.H8})}JH(t){t&&(super.JH(t),this.H8=t.sid)}}Qr.gst.Rit=Jr}{const Yr=self.Ls;class Vr extends Yr.gst.jit{constructor(t){super(t)}Gst(){return this.Oet.Oit().Qit()[1]}Fet(){const t=this.Oet,s=t.Lit(),i=s.Z3(),e=i.Tj(),n=e.CP(),r=this.Ost(n),h=r.$L();return e.uz(h)?e.ent(h):null}Ost(t){const s=this.Oet,i=s.Oit().Qit()[0];return t.nnt(i)}Gc(t,s,i,e,n,r,h){this.rnt()&&super.Gc(t,s,i,e,n,r,h)}Tet(t,s,i){if(this.rnt())return super.Tet(t,s,i)}rnt(){const t=this.Oet,s=t.Lit(),i=s.Z3(),e=i.Tj(),n=e.CP(),r=this.Ost(n);if(r){const h=r.$L();return e.uz(h)}}}Yr.gst.Pit=Vr}{const Hr=self.Ls;class qr extends Hr.gst.jit{constructor(t){super(t)}Gst(){return this.Oet.Oit().Qit()[0]}Fet(){return this.Oet.Lit().TB().J5()}Gc(t,s,i,e,n,r,h){const o=this.Oet.Lit(),a=o.uF().iP(),u=o.TB().uF().iP();a===u&&super.Gc(t,s,i,e,n,r,h)}Tet(t,s,i){const e=this.Oet.Lit(),n=e.uF().iP(),r=e.TB().uF().iP();if(n===r)return super.Tet(t,s,i)}hnt(){const t=this.Oet.Lit(),s=t.uF().iP();if(Hr.O9.ont&&s instanceof Hr.O9.ont&&("initial-frame"===this.Oet.Utt()||"initial-animation"===this.Oet.Utt()))switch(this.Oet.JX()){case"relative":case"absolute":return null}}}Hr.gst.Fit=qr}{const Zr=self.Ls;class Xr extends Zr.gst.jit{constructor(t){super(t),this.ant=0,this.unt=!1}wet(){return!1}iX(){let t=this.Oet.mst(),s=this.Oet.Oit();s=t.iet(s),this.ant=s.KX()}xtt(){}Vit(){return this.unt||this.Oet.Gc(0),this.ant}Gc(t,s,i,e,n,r,h){this.ant=Zr.gst.zet.Gc(t,s,i,this.Oet),this.unt=!0}cit(){}Det(){}yet(){return this.ant}fit(){return!1}dit(){return!1}QH(){return{value:this.ant,init:this.unt}}JH(t){t&&(this.ant=t.value,this.unt=!t.hasOwnProperty("init")||t.init)}}Zr.gst.zit=Xr}{const Kr=self.Ls;class $r extends Kr.gst.jit{constructor(t){super(t),this.lnt=!1,this.cnt=null,this.fnt=null,this.dnt=null,this.DX=this.Oet.yst(),this.Tit=this.Oet.Lit(),this.pnt=this.Oet.Wit(),this.mnt=this.pnt[0],this.gnt=this.pnt[1],this.pnt[3]?this.ynt=this.pnt[3]:this.ynt=Math.random().toString(36).slice(2),this.Mnt=NaN,this.wnt=NaN,this.Snt=NaN,this.Tnt=null,this.bnt()}Kn(){super.Kn(),this.cnt=null,this.fnt=null,this.dnt=null,this.DX=null,this.Tit=null,this.pnt=null,this.mnt=null,this.Tnt=null}bnt(){if(self.Ls.O9.Audio){const t=this.Oet.w4(),s=t.vnt(self.Ls.O9.Audio);s&&(this.cnt=s.$R().J5()),this.fnt=self.Ls.O9.Audio.xnt,this.dnt=self.Ls.O9.Audio.Int}}Cnt(){if(!this.Tnt){const t=this.Oet.Lit(),s=t.GB("audioSource");s&&(this.Tnt=s.R$())}}Gnt(){const t=this.Oet.Lit(),s=t.GB("volume");return(s?s.R$():this).wnt}Ott(){super.Ott(),this.lnt=!1,this.cnt&&(this.dnt&&(this.Mnt=this.dnt.PlaybackTime.call(this.cnt,this.ynt),this.wnt=this.dnt.Volume.call(this.cnt,this.ynt)),this.fnt)&&this.fnt.tB.call(this.cnt,this.ynt)}Nnt(){return this.ynt}Ent(){return this.Snt}Dnt(t){this.Snt=t}iX(){super.iX(),this.Mnt=NaN,this.lnt=!1}xtt(){super.xtt();const t=this.Oet.yst(),s=t.R_();switch(this.Mnt=s-this.gnt,this.Oet.Utt()){case"audioSource":break;case"volume":this.wnt=this.Oet.Tet(s)}this.lnt=!1}Gc(t,s,i,e,n,r,h){if(this.cnt)switch(this.Oet.Utt()){case"audioSource":{if(!this.DX.H$())return;if(e)return void(this.fnt&&this.fnt.tB.call(this.cnt,this.ynt));if(t<this.gnt)return void(this.lnt=!1);const o=this.dnt.PlaybackRate.call(this.cnt,this.ynt),a=this.DX.cB();if(a!==o&&this.fnt.lB.call(this.cnt,this.ynt,a),this.lnt)return;if(!this.Oet.yst().IsPlaying())return;if(this.lnt=!0,isNaN(this.Mnt)){const u=self.performance.now(),l=t-this.gnt,c=this.cnt.GetAudioContextState();if("suspended"===c)return void(this.lnt=!1);const f=self.performance.now(),d=(f-u)/1e3,p=l+d;if(this.fnt){let t=this.Ent();isNaN(t)?(this.Dnt(0),t=0):this.Dnt(t),this.fnt.PlayFromTimeline.call(this.cnt,this.mnt,t,this.ynt,p)}}else{const m=this.Mnt,g=(this.Mnt=NaN,this.Gnt()),y=(this.wnt=NaN,this.cnt.GetAudioContextState());if("suspended"===y)return void(this.lnt=!1);this.fnt&&(this.Dnt(g),this.fnt.PlayFromTimeline.call(this.cnt,this.mnt,g,this.ynt,m))}break}case"volume":this.Cnt(),super.Gc(t,s,i,e,n,r,h)}}Tet(t,s,i){if(this.cnt)switch(this.Oet.Utt()){case"audioSource":return;case"volume":return this.Cnt(),super.Tet(t,s,i)}}_nt(t,s){return this.Tnt?this.Tnt.Ent():0}Ant(t,s,i,e){this.Tnt&&this.Tnt.Dnt(this._nt()+s),this.fnt&&this.Tnt&&this.fnt.Dnt.call(this.cnt,this.Tnt.Nnt(),this.Tnt.Ent())}Lnt(t,s,i){this.Tnt&&this.Tnt.Dnt(s),this.fnt&&this.Tnt&&this.fnt.Dnt.call(this.cnt,this.Tnt.Nnt(),this.Tnt.Ent())}Ont(){return!0}QH(){return{audioPlaybackStarted:this.lnt,audioTag:this.ynt,pauseTime:this.Mnt,pauseVolume:this.wnt,volume:this.Snt}}JH(t){t&&(this.lnt=t.audioPlaybackStarted,this.ynt=t.audioTag,this.Mnt=t.pauseTime,this.wnt=t.pauseVolume,this.Snt=t.volume,this.bnt())}}Kr.gst.Bit=$r}{const th=self.Ls;th.gst.qet=class{constructor(t){this.xit=t,this.Oet=t.GB(),this.sst=this.Oet.Lit().Z3(),this.Rnt=this.Oet.Utt(),this.Pnt=!1,this.knt=null,this.Fnt=null}Kn(){this.xit=null,this.Oet=null,this.sst=null,this.knt=null,this.Fnt=null}wet(){return!1}Ott(){}dX(){this.sst=null,this.knt=null,this.Fnt=null}R$(){return this.xit}GB(){return this.Oet}Z3(){return this.sst||(this.sst=this.Oet.Lit().Z3()),this.sst}jnt(t){this.Pnt=!!t}znt(){return this.Pnt}ytt(){}iX(){}xtt(){}Vet(){this.knt=this.yet()}Det(){this.knt=null}yet(){}fit(){}dit(){}$et(t){const s=typeof this.Bnt(),i=typeof t;return s==i}jet(){}Jet(t,s,i,e,n,r,h,o){}Yet(){}Unt(){const t=this.Wnt(()=>{const t=this.Oet.Oit(),s=this.Oet.mst();return s.iet(t)},()=>{const t=this.Oet.Oit(),s=this.Oet.mst();return s.Qnt(t)});return t.Jnt()}Ynt(){const t=this.Oet.yst(),e=t.R_()-this.Oet.Lit().Dtt(),s=this.Wnt(()=>{const t=this.Oet.Oit(),s=this.Oet.mst();return s.let(e,t)},()=>{const t=this.Oet.Oit(),s=this.Oet.mst(),i=s.det(e,t);return i||s.Qnt(t)});return s.Jnt()}Wnt(t,s){const i=this.Oet.yst();return(i.H$()?t:s)()}Vnt(t,s){const i=this.Oet.JX();return("relative"===i?t:s)()}Hnt(t,s){return(this.znt()?(this.jnt(!1),t):s)()}qnt(t){}Znt(){return this.xit.$L()}Xnt(){return this.Fnt||(this.Fnt=this.xit.Fet()),this.Fnt}Knt(t,s,i,e,n,r){const h=this.Oet.Cst();switch(h){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return n();case"audio":return r()}}QH(){return{firstAbsoluteUpdate:this.Pnt,saveState:this.knt}}JH(t){t&&(this.Pnt=t.firstAbsoluteUpdate,this.knt=t.saveState)}$nt(t,s=!1){const i=[];for(const e of t){const n=e.Lit().Dtt();for(const r of e.oet())(s&&0===r.R_()||!s)&&i.push({time:n+r.R_(),value:r.Jnt()})}return i.sort((t,s)=>t.time-s.time)}trt(t,s,i){return this.srt(s,i)}srt(s,i){for(let t=i.length-1;0<=t;t--){const e=i[t].time;if(e<=s)return i[t]}return null}}}{const sh=self.Ls,ih=new Map,eh=[0,0,0];class nh extends sh.gst.qet{constructor(t){super(t)}ytt(){}iX(){}xtt(){}yet(){const t=this.Oet.Cst(),s=this.Xnt(),i=this.Znt();switch(t){case"behavior":return this.irt(s.ert(i));case"effect":return this.irt(s[i]);case"plugin":return this.irt(s.ert(i));case"world-instance":return this.irt(this.Bnt())}}fit(){const t=this.Unt();return!this.nrt(t,this.Bnt())}dit(){return!sh.fe(this.knt)&&!this.nrt(this.knt,this.Bnt())}nrt(t,s){return t=this.rrt(t),s=this.rrt(s),t.$o(s)}Unt(){const t=super.Unt();return this.rrt(t)}Ynt(){const t=super.Ynt();return this.rrt(t)}qnt(t){}irt(t){return(sh.He(t,sh.Ao)?t.toArray():t).slice(0,3)}rrt(t){return sh.He(t,sh.Ao)?t:new sh.Ao(t[0],t[1],t[2],1)}$et(t){return!0}wet(){return!0}jet(){const t=this.Oet.yst(),s=this.Oet.TB(),i=this.Oet.R$(),e=t.O$(s,i,this.Rnt,this.Oet);if(e&&1<e.length){ih.has(s)||ih.set(s,new Map);const n=ih.get(s),r=this.Oet.Cst(),h=(n.has(r)||n.set(r,new Map),n.get(r));h.has(this.Rnt)||h.set(this.Rnt,{hrt:!1,color:new sh.Ao(0,0,0,1)})}}ort(t,s,i){const e=ih.get(t).get(s).get(i);return e.hrt=!0,e.color}Jet(t,s,i,e,n,r,h,o){const a=this.Oet.yst(),u=this.Oet.Lit(),l=this.Oet.TB(),c=this.Oet.R$(),f=this.Oet.Cst(),d=this.Rnt,p=a.O$(l,c,d,this.Oet);if(p&&1<p.length){const m=this.$nt(p,!0),g=this.trt(a,a.R_(),m);if(g){const y=u.Dtt(),M=g.time-y;if(0==M)this.ort(l,f,this.Rnt).jo(s[0],s[1],s[2]);else if(!(M<0)){const w=s[0],S=s[1],T=s[2],b=this.Oet.Gc(M,!1,!0),v=sh.Ao.La(w,b[0]),x=sh.Ao.La(S,b[1]),I=sh.Ao.La(T,b[2]);this.ort(l,f,this.Rnt).jo(v,x,I)}}}else this.art(s[0],s[1],s[2])}Yet(){const t=this.Oet.TB();if(ih.has(t)){const s=ih.get(t),i=this.Oet.Cst();if(s.has(i)){const e=s.get(i);if(e.has(this.Rnt)){const n=e.get(this.Rnt),r=n.hrt,h=n.color;r&&this.art(h.Yo(),h.Vo(),h.Ho()),0===e.size&&s.delete(i),0===s.size&&ih.delete(t)}}}}Bnt(){const t=this.Oet.Cst(),s=this.Xnt(),i=this.Znt();switch(t){case"behavior":return this.rrt(s.ert(i));case"effect":return s[i].clone();case"plugin":return this.rrt(s.ert(i));case"world-instance":return this.Z3().kj().clone()}}art(t,s,i){const e=this.Oet.Cst(),n=this.Xnt(),r=this.Znt();switch(e){case"behavior":eh[0]=t,eh[1]=s,eh[2]=i,n.urt(r,eh);break;case"effect":n[r].Fo(t,s,i);break;case"plugin":eh[0]=t,eh[1]=s,eh[2]=i,n.urt(r,eh);break;case"world-instance":this.Z3().lrt(t,s,i)}}QH(){}JH(t){}}sh.gst.qet.Xet=nh}{const rh=self.Ls,hh=rh.gst;class oh extends rh.gst.qet{constructor(t){super(t)}ytt(){}iX(){}xtt(){}yet(){return this.Bnt()}fit(){const t=this.Unt();return t!==this.yet()}dit(){return!rh.fe(this.knt)&&this.knt!==this.yet()}wet(){return!1}Jet(t,s,i,e,n,r,h,o){const a=this.Oet,u=a.Lit(),l=a.Cst(),c=a.yst(),f=u.TB(),d=a.R$(),p=this.Rnt,m=c.O$(f,d,p,a);if(m&&1<m.length){const y=this.$nt(m),M=t+u.Dtt(),w=this.trt(c,M,y);w&&(s=w.value)}const g=a.tet();switch(g){case"numeric":if(hh.zet.crt(this.Znt(),this.Xnt(),s,l))break;return;case"angle":if(hh.Bet.crt(this.Znt(),this.Xnt(),s,l))break;return;case"boolean":if(hh.Uet.crt(this.Znt(),this.Xnt(),s,l))break;return;case"color":if(hh.Wet.crt(this.Znt(),this.Xnt(),s,l))break;return;case"text":if(!hh.Qet.crt(this.Znt(),this.Xnt(),s,l))return}this.art(s)}Bnt(){const t=this.Oet.Cst(),s=this.Xnt(),i=this.Znt();switch(t){case"behavior":return s.ert(i);case"effect":return s[i];case"instance-variable":return s.frt(i);case"plugin":return s.ert(i)}}art(t){const s=this.Oet.Cst(),i=this.Xnt(),e=this.Znt();switch(s){case"behavior":i.urt(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.drt(e,t);break;case"plugin":i.urt(e,t)}}}rh.gst.qet.Het=oh}{const v=self.Ls,ah=(v.gst.qet,new Map),uh=(t,s,i,e,n,r=!1,h=null,o=null)=>{ah.set(t,{prt:s,mrt:i,grt:e,round:n,yrt:r,init:h,reset:o})};uh("offsetX",(t,s,i,e)=>{"relative"===e.Oet.JX()?t.Mrt(s,i.yst().J$()):t.Mrt(s)},(t,s)=>t.VS(s),t=>t.YS(),!0),uh("offsetY",(t,s,i,e)=>{"relative"===e.Oet.JX()?t.wrt(s,i.yst().J$()):t.wrt(s)},(t,s)=>t.ZS(s),t=>t.qS(),!0),uh("offsetWidth",(s,t,o,i,e)=>{if(0!==t){const n="relative"===i.Oet.JX(),u=1===i.Srt.Pv();if((n||u)&&s.l5()&&s.y5()){if(isNaN(i.Trt)){let e=[],t=s.Xj();for(;t;)e.push(t),t=t.Xj();e.reverse();let a=(t,s)=>s.yst().Wtt(t.TB()),n=(t,s)=>{const i=a(t,s);if(i)return i.Qst();const e=t.TB().J5();return e.Jst()?e.Qst():t.vrt().brt()},r=(t,s,i,e=0)=>{const n=a(t,s);if(!n)return e;const r=n.GB(i);if(!r)return e;const h=r.Oit().Git();if(!h)return e;const o=h.Qnt();return o?o.Vit():e},h;if(u){let t=e[e.length-1];h=t.Jp()}else{let s=e[0],t=s.vrt().brt(),i=s.vrt().xrt();h=t*i,h=(h+=r(s,o,"offsetWidth"))+n(s,o)*r(s,o,"offsetScaleX");for(let t=1;t<e.length;t++){const l=(s=e[t]).vrt().xrt();h=(h=(h*=l)+r(s,o,"offsetWidth"))+n(s,o)*r(s,o,"offsetScaleX")}}i.Trt=0===h?Number.EPSILON:h}e||s.Nm(t/i.Trt,!0)}else s.Nm(t)}},(t,s)=>t.Kp(s),t=>t.Jp(),!0),uh("offsetHeight",(s,t,o,i,e)=>{if(0!==t){const n="relative"===i.Oet.JX(),a=1===i.Srt.Pv();if((n||a)&&s.l5()&&s.w5()){if(isNaN(i.Trt)){let e=[],t=s.Xj();for(;t;)e.push(t),t=t.Xj();e.reverse();let n=(t,s)=>{e=t;const i=s.yst().Wtt(e.TB());var e;if(i)return i.Vst();const n=t.TB().J5();return n.Jst()?n.Vst():t.vrt().Irt()},r=(t,s,i,e=0)=>{const n=s.yst().Wtt(t.TB());if(!n)return e;const r=n.GB(i);if(!r)return e;const h=r.Oit().Git();if(!h)return e;const o=h.Qnt();return o?o.Vit():e},h;if(a){let t=e[e.length-1];h=t.im()}else{let s=e[0],t=s.vrt().Irt(),i=s.vrt().Crt();h=t*i,h=(h+=r(s,o,"offsetHeight"))+n(s,o)*r(s,o,"offsetScaleY");for(let t=1;t<e.length;t++){const u=(s=e[t]).vrt().Crt();h=(h=(h*=u)+r(s,o))+n(s,o)*r(s,o,"offsetScaleY")}}i.Trt=0===h?Number.EPSILON:h}e||s.Grt(t/i.Trt,!0)}else s.Grt(t)}},(t,s)=>t.Yp(s),t=>t.im(),!0),uh("offsetAngle",(t,s,i,e,n)=>{t.Nrt(s)},(t,s)=>t.LP(s),t=>t.OP(),!1,!0),uh("offsetOpacity",(t,s,i,e,n)=>{const r=e.Ert||1,h=(s/=r,t.hD()),o=h+s;if(0===e.Drt)1<o?e.Drt+=o-1:o<0&&(e.Drt+=o),t._rt(s);else{const a=t.hD()+s;0<s&&0<e.Drt?1<a&&(e.Drt+=a-1):0<s&&e.Drt<0?(e.Drt+=s,0<e.Drt&&(t._rt(e.Drt),e.Drt=0)):s<0&&0<e.Drt?(e.Drt+=s,e.Drt<0&&(t._rt(e.Drt),e.Drt=0)):s<0&&e.Drt<0&&a<0&&(e.Drt+=a)}},(t,s)=>{t.aD(s)},t=>t.hD(),!1,!0,(r,n,h)=>{switch(r.Drt=0,r.Oet.JX()){case"relative":{r.Oet.mst();let t=r.Oet.Oit(),s=t.Git(),i=s.Cit(),e=r.Z3().hD(),n=e;for(const o of i){const a=o.R_(),u=r.Oet.Tet(a);n=e+u,n=v.rr(n,0,1)}r.Art=e-n,r.Art=Math.round(100*(r.Art+Number.EPSILON))/100,n=e;for(let t=i.length-1;0<=t;t--){const l=i[t].R_(),c=r.Oet.Tet(l);n-=c,n=v.rr(n,0,1)}r.Lrt=n,r.Lrt=Math.round(100*(r.Lrt+Number.EPSILON))/100;break}}const t="relative"===r.Oet.JX(),s=1===r.Srt.Pv();if((t||s)&&n.l5()&&n.I5()){let s=[],t=n.Xj();for(;t;)s.push(t),t=t.Xj();s.reverse();let i=(t,s,i)=>{const e=s.yst().Wtt(t.TB());if(!e)return 0;const n=e.GB(i);if(!n)return 0;const r=n.Oit().Git();if(!r)return 0;const h=r.Qnt();return h?h.Vit():0},e=s[0].vrt().Ort();e+=i(s[0],h,"offsetOpacity");for(let t=1;t<s.length;t++)e+=i(s[t],h,"offsetOpacity");r.Ert=0===e?1:e}},i=>{switch(i.Oet.JX()){case"relative":{i.Drt=0;let t=i.Z3(),s=t.hD();s=Math.round(100*(s+Number.EPSILON))/100,i.Oet.yst().H$()?(t.aD(s+i.Art),i.Ax=0):(t.aD(s-i.Lrt),i.Ax=i.R$().Let());break}}}),uh("offsetOriginX",(t,s)=>t.Rrt(s),(t,s)=>t.Prt(s),t=>t.Oz(),!1),uh("offsetOriginY",(t,s)=>t.krt(s),(t,s)=>t.Frt(s),t=>t.Pz(),!1),uh("offsetZElevation",(t,s)=>t.jrt(s),(t,s)=>t.KS(s),t=>t.XS(),!0),uh("offsetScaleX",(t,s,i,e)=>{if(0!==s){const n=t.Jp()<0?-1:1;if("relative"===e.Oet.JX()&&t.l5()&&t.y5()){const r=i.Qst()*n*s;isNaN(e.Trt)&&ah.get("offsetWidth").prt(t,1,i,e,!0),t.Nm(r/e.Trt,!0)}else t.Nm(i.Qst()*n*s)}},(t,s,i)=>{t.Kp(i.Qst()*s)},(e,n)=>{const r=e.Jp()<0?-1:1;if(e.y5()){let t=e.Xj(),s=n.yst().Wtt(t.TB()),i=NaN;if(s)i=t.Jp()/s.Qst();else{const h=t.TB().J5();i=h.Jst()?t.Jp()/h.Qst():1}return e.Jp()*r/(n.Qst()*i)}return e.Jp()*r/n.Qst()},!1),uh("offsetScaleY",(t,s,i,e)=>{if(0!==s){const n=t.im()<0?-1:1;if("relative"===e.Oet.JX()&&t.l5()&&t.w5()){const r=i.Vst()*n*s;isNaN(e.Trt)&&ah.get("offsetHeight").prt(t,1,i,e,!0),t.Grt(r/e.Trt,!0)}else t.Grt(i.Vst()*n*s)}},(t,s,i)=>{t.Yp(i.Vst()*s)},(e,n)=>{const r=e.im()<0?-1:1;if(e.w5()){let t=e.Xj(),s=n.yst().Wtt(t.TB()),i=NaN;if(s)i=t.im()/s.Vst();else{const h=t.TB().J5();i=h.Jst()?t.im()/h.Vst():1}return e.im()*r/(n.Vst()*i)}return e.im()*r/n.Vst()},!1);class lh extends v.gst.qet{constructor(t){super(t),this.Ax=0,this.Drt=0,this.Art=0,this.Lrt=0,this.Ert=NaN,this.Trt=NaN,this.zrt=void 0,this.Brt=void 0,this.Urt=null,this.Wrt=null,this.Qrt=null,this.Jrt=null,this.Yrt=null,this.Vrt=null,this.Hrt=null,this.qrt=null,this.Zrt=!1,this.Xrt=!1,v.He(this.Oet.yst(),v.Krt)?this.Srt=new v.gst.qet.$rt(this):this.Srt=new v.gst.qet.tht(this);const s=this.Oet.Utt();switch(this.Oet.Cst()){case"world-instance":{const i=ah.get(s);this.Urt=i.grt,this.Wrt=i.prt,this.Qrt=i.mrt,this.Zrt=i.round,this.Xrt=i.yrt,this.Yrt=i.init,this.Jrt=i.reset;break}case"audio":this.Vrt=t._nt,this.Hrt=t.Ant,this.qrt=t.Lnt,this.Zrt=!!t.Ont(),this.Xrt=!1}}Kn(){this.Srt=null,this.Urt=null,this.Wrt=null,this.Qrt=null,this.Jrt=null,this.Yrt=null,this.Vrt=null,this.Hrt=null,this.qrt=null,super.Kn()}wet(){return this.Srt.wet()}sht(){return this.Ax}iht(t){this.Ax=t}ytt(){this.Jrt&&this.Jrt(this)}iX(){const t=this.Srt.iX();if("number"==typeof t&&(this.Ax=t),this.Yrt){const s=this.Z3(),i=this.Oet.Lit();this.Yrt(this,s,i)}}xtt(){const t=this.Srt.xtt();"number"==typeof t&&(this.Ax=t)}yet(){return this.Bnt()}fit(){const t=this.Unt();return t!==this.yet()}dit(){return!v.fe(this.knt)&&this.knt!==this.yet()}jet(){this.Srt.jet()}Jet(t,s,i,e,n,r,h,o){return this.Srt.Jet(t,s,i,e,n,r,h,o)}Yet(){this.Srt.Yet()}Bnt(){const t=this.Xnt(),s=this.Znt(),i=this.Z3(),e=this.Oet.Lit(),n=this.Oet.Cst();switch(n){case"behavior":return t.ert(s);case"effect":return t[s];case"instance-variable":return t.frt(s);case"plugin":return t.ert(s);case"world-instance":return this.Urt(i,e);case"audio":return this.Vrt.call(this.R$(),i,e)}}art(t,s,i){const e=this.Xnt(),n=this.Znt(),r=this.Z3(),h=this.Oet.Lit(),o=this.Oet.Cst();switch(o){case"behavior":e.eht(n,t);break;case"effect":e[n]+=t;break;case"instance-variable":e.nht(n,t);break;case"plugin":e.eht(n,t,this.R$().hnt());break;case"world-instance":this.Wrt(r,t,h,this);break;case"audio":this.Hrt.call(this.R$(),r,t,h,this)}}rht(t,s,i){let e=this.Oet.B$();if("discrete"!==(e="default"===e?"continuous":e)||s){if("discrete"===e&&i){const u=this.Oet.yst(),l=u.R_(),c=this.Oet.uet(l);if(!c)return}const n=this.Xnt(),r=this.Znt(),h=this.Z3(),o=this.Oet.Lit(),a=this.Oet.Cst();switch(a){case"behavior":n.urt(r,t);break;case"effect":n[r]=t;break;case"instance-variable":n.drt(r,t);break;case"plugin":n.urt(r,t,this.R$().hnt());break;case"world-instance":this.Qrt(h,t,o);break;case"audio":this.qrt.call(this.R$(),h,t,o)}}}hht(t,s,i,e,n,r,h,o){this.Srt.hht(t,s,i,e,n,r,h,o)}oht(t,s,i,e,n){let r=(t="angle"===this.Oet.Xit()?v.lr(t):t).toString(),h=r.split(".")[1]||"",o=h.length,a=this.Bnt(),u;switch(u=0===o?this.Zrt?Math.round(a):this.Xrt?"angle"===this.Oet.Xit()?v.ur(Math.round(v.lr(a))):Number(v.toFixed(a,2)):a:this.Zrt?Number(v.toFixed(a,o)):(this.Xrt,a),this.art(u-a,s,i),this.Oet.Utt()){case"offsetWidth":case"offsetScaleX":{const l=this.Z3(),c=l.Jp(),f=Number(v.toFixed(c,2));l.Nm(f-c);break}case"offsetHeight":case"offsetScaleY":{const d=this.Z3(),p=d.im(),m=Number(v.toFixed(p,2));d.Grt(m-p);break}}}QH(){return Object.assign(super.QH(),{v:this.Ax,a:this.Drt,fod:this.Art,bod:this.Lrt,of:this.Ert,sf:this.Trt,armorf:this.zrt,armandf:this.Brt})}JH(t){t&&(super.JH(t),this.Ax=t.v,this.Drt=t.a,this.Art=v.ae(t.fod)?t.fod:0,this.Lrt=v.ae(t.bod)?t.bod:0,this.Ert=v.ae(t.of)?t.of:NaN,this.Trt=v.ae(t.sf)?t.sf:NaN,this.zrt=v.ae(t.armorf)?t.armorf:void 0,this.Brt=v.ae(t.armandf)?t.armandf:void 0)}}v.gst.qet.Zet=lh}{const ch=self.Ls;class fh{constructor(t){this.aht=!1,this.ant=0,this.uht=!1,this.lht=!1,this.lst=t;for(let t=0,s=this.lst.length;t<s;t++)this.lst[t]._it(this)}Btt(){return this.lst}cht(){this.aht=!0}fht(){return this.aht}Aet(t){this.ant=t}Vit(){return this.ant}dht(t){this.uht=t}pht(){return this.uht}Ntt(t){this.lht=t}mht(){return this.lht}Hf(){this.aht=!1,this.ant=0,this.uht=!1,this.lht=!1}}class dh{constructor(t){this.ght=t}Kn(){this.ght=null}Pv(){return 0}iX(){const t=this.ght;return this.ght.GB(),t.Vnt(()=>t.Wnt(()=>0,()=>t.R$().Let()),()=>{})}xtt(){}wet(){this.ght;const t=this.ght.GB();switch(t.JX()){case"relative":return!1;case"absolute":return!0}}jet(){this.ght;const t=this.ght.GB(),s=t.Utt();switch(t.JX()){case"relative":break;case"absolute":if(t.Dit()){const i=t.Ait();i.Hf()}else{const e=t.yst(),n=t.TB(),r=t.R$(),h=e.O$(n,r,s,t);h&&1<h.length&&new fh(h)}}}Jet(t,s,i,e,n,r,h,o){const a=this.ght,u=this.ght.GB();switch(u.JX()){case"relative":{const l=a.sht();a.art(s-l,i,e),r&&this.hht(t,i,e,n,l,s),a.iht(s);break}case"absolute":{const c=u.yst(),f=u.Lit();if(u.TB(),u.R$(),u.Dit()){const d=u.Ait(),p=d.Btt(),m=a.$nt(p,!0),g=a.trt(c,c.R_(),m);if(g){const y=f.Dtt(),M=g.time-y;if(0==M)d.Ntt(h),d.dht(o),d.cht(),d.Aet(d.Vit()+s);else{if(M<0)return;const w=u.Tet(M);d.Ntt(h),d.dht(o),d.cht(),d.Aet(d.Vit()+(s-w))}}}else a.rht(s,o,h);break}}}Yet(){const t=this.ght,s=this.ght.GB();switch(s.JX()){case"relative":break;case"absolute":if(s.Dit()){const i=s.Ait();i.fht()&&t.rht(i.Vit(),i.pht(),i.mht())}}}hht(t,s,i,e,n,r){const h=this.ght;e||(s&&t===s.R_()?h.oht(s.KX(),s,i):i&&t===i.R_()?h.oht(i.KX(),s,i):r-n==0&&h.oht(s.KX(),s,i))}}ch.gst.qet.tht=dh}{const ph=self.Ls;class mh{constructor(t){this.ght=t}Kn(){this.ght=null}Pv(){return 1}iX(){const t=this.ght;return t.jnt(!0),this.qnt(t.Unt())}xtt(){const t=this.ght;if(t.Unt()!==t.Ynt())return t.jnt(!0),this.qnt(t.Ynt())}wet(){return!1}jet(){}Jet(t,s,i,e,n,r,h,o){const a=this.ght,u=a.sht();switch(a.GB().JX()){case"relative":a.art(s-u,i,e),r&&this.hht(t,i,e,n,u,s,!1,h);break;case"absolute":a.znt()?(a.jnt(!1),a.art(u,i,e)):0===t&&0===a.GB().yst().rB()?a.rht(s,!0,!1):(a.art(s-u,i,e),r&&this.hht(t,i,e,n,u,s,this.yht(),h))}a.iht(s)}Yet(){}qnt(t){const s=this.ght;return t-s.yet()}yht(){let t=this.ght,s=t.Z3().TB(),i=t.GB().w4(),e=i.L$(),n=0;for(const r of e._Z())0===r.Pv()?r.PZ(s)&&n++:1===r.Pv()&&r.TB()===s&&n++;return n<=1}hht(t,s,i,e,n,r,h,o){const a=this.ght;e?s&&t===s.R_()?a.oht(s.KX(),s,i,h,o):i&&t===i.R_()?a.oht(i.KX(),s,i,h,o):i||a.oht(s.KX(),s,i,h,o):s&&t===s.R_()?a.oht(s.KX(),s,i,h,o):i&&t===i.R_()?a.oht(i.KX(),s,i,h,o):r-n==0&&a.oht(s.KX(),s,i,h,o)}}ph.gst.qet.$rt=mh}{const gh=self.Ls,yh=self.$l;gh.gst.zet=class{constructor(){}static crt(t,s,i,e){let n;switch(e){case"behavior":n=s.ert(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.frt(t);break;case"plugin":n=s.ert(t)}return n!==i}static Gc(r,h,o,a){if(!o){let t=a.Oit(),s=a.mst();return(t=s.Qnt(t)).KX()}let u=a.B$();if("default"===u&&(u="continuous"),"discrete"===(u="combo"===a.Xit()?"discrete":u))return h.KX();if("continuous"===u||"step"===u){const l=a.yst().j$();if("step"===u&&0!==l){const g=1/l;r=Math.floor(r*g)/g}const c=h.KX(),f=o.KX(),d=h.ZX("cubic-bezier"),p=o.ZX("cubic-bezier"),m=d&&d.Mht()&&p&&p.wht();if(!m&&c===f)return c;let t=h.R_(),s=o.R_(),i=("step"===u&&0!==l&&(r=gh.rr(r,t,s)),gh.normalize(r,t,s)),e=h._et(),n;if(m){const y=s-t;n=yh.mc(e)(y*i,0,1,y),n=yh.mc("cubicbezier")(n,c,c+d.sK(),f+p.nK(),f)}else n=yh.mc(e)((s-t)*i,c,f-c,s-t);return"integer"===a.Xit()?Math.floor(n):n}}}}{const Mh=self.Ls;Mh.gst.Bet=class{constructor(){}static crt(t,s,i,e){let n;switch(e){case"behavior":n=s.ert(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.frt(t);break;case"plugin":n=s.ert(t)}return n!==i}static Gc(t,s,i,e){if(!i){let t=e.Oit(),s=e.mst();return(t=s.Qnt(t)).KX()}let n=e.B$();if("default"===n&&(n="continuous"),"discrete"===(n="combo"===e.Xit()?"discrete":n))return s.KX();if("continuous"===n||"step"===n){const r=e.yst().j$();if("step"===n&&0!==r){const c=1/r;t=Math.floor(t*c)/c}const h=s.R_(),o=i.R_(),a=s.KX(),u=i.KX(),l=("step"===n&&0!==r&&(t=Mh.rr(t,h,o)),s.ZX("angle"));if(!l){if(a===u)return a;const f=Mh.normalize(t,h,o),d=self.$l.mc(s._et());return Mh.Mr(a,u,d(f,0,1,1))}{const p=l.Sht();if(a===u&&0===p)return a;const m=Mh.normalize(t,h,o),g=self.$l.mc(s._et()),y=g(m,0,1,1);switch(l.Tht()){case"closest":return Mh.Mr(a,u,y,p);case"clockwise":return Mh.wr(a,u,y,p);case"anti-clockwise":return Mh.Sr(a,u,y,p)}}}}}}{const wh=self.Ls;wh.gst.Uet=class{constructor(){}static crt(t,s,i,e){let n;switch(e){case"behavior":n=s.ert(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.frt(t);break;case"plugin":n=s.ert(t)}return!!n!=!!i}static Gc(t,s,i,e){if(i)return s.KX()?1:0;{let t=e.Oit(),s=e.mst();return(t=s.Qnt(t)).KX()?1:0}}}}{const Sh=self.Ls,Th=[0,0,0],bh=[0,0,0],vh=[0,0,0];Sh.gst.Wet=class{constructor(){}static crt(t,s,i,e){let n;switch(e){case"behavior":n=s.ert(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.frt(t);break;case"plugin":n=s.ert(t)}return Array.isArray(i)?(Th[0]=i[0],Th[1]=i[1],Th[2]=i[2]):(vh.ga(i),Th[0]=Math.floor(255*vh.Yo()),Th[1]=Math.floor(255*vh.Vo()),Th[2]=Math.floor(255*vh.Ho())),Array.isArray(n)?(bh[0]=n[0],bh[1]=n[1],bh[2]=n[2]):(vh.ga(n),bh[0]=Math.floor(255*vh.Yo()),bh[1]=Math.floor(255*vh.Vo()),bh[2]=Math.floor(255*vh.Ho())),Th[0]!==bh[0]||Th[1]!==bh[1]||Th[2]!==bh[2]}static Gc(t,s,i,e){if(!i){let t=e.Oit(),s=e.mst(),i=(t=s.Qnt(t)).KX();return Th[0]=i[0],Th[1]=i[1],Th[2]=i[2],Th}let n=e.B$();if("discrete"===(n="default"===n?"continuous":n)){const r=s.KX();return Th[0]=r[0],Th[1]=r[1],Th[2]=r[2],Th}if("continuous"===n||"step"===n){const h=e.yst().j$();if("step"===n&&0!==h){const b=1/h;t=Math.floor(t*b)/b}const o=s.R_(),a=i.R_(),u=s.KX(),l=i.KX(),c=("step"===n&&0!==h&&(t=Sh.rr(t,o,a)),Sh.normalize(t,o,a)),f=s._et(),d=u[0],p=u[1],m=u[2],g=l[0],y=l[1],M=l[2],w=self.$l.mc(f),S=a-o,T=S*c;return Th[0]=d===g?d:w(T,d,g-d,S),Th[1]=p===y?p:w(T,p,y-p,S),Th[2]=m===M?m:w(T,m,M-m,S),Th}}}}{const xh=self.Ls;xh.gst.Qet=class{constructor(){}static crt(t,s,i,e){let n;switch(e){case"behavior":n=s.ert(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.frt(t);break;case"plugin":n=s.ert(t)}return n!==i}static Gc(t,s,i,e){if(i)return s.KX();{let t=e.Oit(),s=e.mst();return(t=s.Qnt(t)).KX()}}}}{const Ih=self.Ls;Ih.jq=class{constructor(){this.bht=new Map}Kn(){for(const t of this.bht.values())t.Kn();this.bht.clear(),this.bht=null}Zl(t){const s=new Ih.vht(t),i=s.kc();this.bht.set(i,s)}Xs(t){return this.bht.get(t)}C$(){return 0}static xht(t,s,i,e){if(s)for(const n of s)Ih.jq.Iht("create",n,t,i,e)}static Cht(t,s,i,e){if(s)for(const n of s)Ih.jq.Iht("create-including-disabled",n,t,i,e)}static Ght(i,t,s,e){i.length?t.forEach((t,s)=>{i[s].JH(t)}):t.forEach(t=>{Ih.jq.Iht("load",t,i,s,e)})}static Iht(t,s,i,e,n){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,n);break;case"create":case"create-including-disabled":r=new e(s,n)}else if("object"==typeof e){const h=e.prop,o=s[h],a=e.map.get(o);switch(t){case"load":r=new a(null,n);break;case"create":case"create-including-disabled":r=new a(s,n)}}switch(t){case"load":r.JH(s),i.push(r);break;case"create":if("function"==typeof r.zst&&!r.zst())return r.Kn();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const Ch=self.Ls;Ch.vht=class{constructor(t){this.er="",this.Gtt=NaN,this.Nht=0,this.Eht="default",this.Dht="default",this._ht=!1,this.Aht=!1,this.Lht=1,this.Xtt=null,this.Oht="",this.Rht=!1,this.Pht=!0,t&&(this.er=t[0],this.Gtt=t[1],this.Nht=t[2],this.Eht=t[3],this.Dht=t[4],this._ht=!!t[6],this.Aht=!!t[7],this.Lht=t[8],this.Oht=t[9],this.Rht=!!t[10],this.Pht=!!t[11],this.Xtt=new Ch.kht(t[5],this))}Kn(){this.Xtt.Kn(),this.Xtt=null}_$(){return this.Xtt||(this.Xtt=new Ch.kht(null,this)),this.Xtt}kc(){return this.er}y6(t){this.er=t}rB(){return this.Gtt}nB(t){this.Gtt=t}j$(){return this.Nht}z$(t){this.Nht=t}B$(){return this.Eht}U$(t){this.Eht=t}JX(){return this.Dht}W$(t){this.Dht=t}oB(){return this._ht}hB(t){this._ht=t}uB(){return this.Aht}aB(t){this.Aht=t}Mz(){return this.Lht}Q$(t){this.Lht=t}pX(){return this.Oht}J$(){return this.Rht}Y$(){return this.Pht}QH(){return{trackDataJson:this.Xtt.QH(),name:this.er,totalTime:this.Gtt,step:this.Nht,interpolationMode:this.Eht,resultMode:this.Dht,loop:this._ht,pingPong:this.Aht,repeatCount:this.Lht,startOnLayout:this.Oht,transformWithSceneGraph:!!this.Rht,useSystemTimescale:this.Pht}}JH(t){t&&(this._$().JH(t.trackDataJson),this.er=t.name,this.Gtt=t.totalTime,this.Nht=t.step,this.Eht=t.interpolationMode,this.Dht=t.resultMode,this._ht=t.loop,this.Aht=t.pingPong,this.Lht=t.repeatCount,this.Oht=t.startOnLayout,this.Rht=!!t.transformWithSceneGraph,this.Pht=!!t.useSystemTimescale)}}}{const Gh=self.Ls;class Nh{constructor(t,s){this.Xtt=s,this.Fht=null,this.jht=null,this.Ktt=NaN,this.$tt=NaN,this.Eht="default",this.Dht="default",this.vl=!1,this.zht=null,this.vit=null,this.Vc="",this.Bht=null,this.Uht=0,this.Wht=this.Xtt.F$().rB(),this.$c=0,this.er="",t&&(t[0]&&(this.Fht=t[0],this.Ktt=t[0][2],this.$tt=t[0][1]),this.Eht=t[1],this.Dht=t[2],this.vl=!!t[3],t[6]&&(this.Vc=t[6]),t[7]&&(this.Bht=t[7],this.Uht=t[7][0],this.Wht=t[7][1]),t[8]&&(this.jht=t[8]),t[8]&&(this.jht=t[8]),t[9]&&(this.$c=t[9]),t[10]&&(this.er=t[10]),this.zht=new Gh.Qht(t[4],this),this.vit=new Gh.Jht(t[5],this))}Kn(){this.Fht=null,this.Xtt=null,this.zht&&(this.zht.Kn(),this.zht=null),this.vit&&(this.vit.Kn(),this.vit=null),this.Bht=null}_$(){return this.Xtt}ust(){return this.zht||(this.zht=new Gh.Qht(null,this)),this.zht}mst(){return this.vit||(this.vit=new Gh.Jht(null,this)),this.vit}Yht(){return this.Fht}Tst(){return this.$tt}Ust(t){this.$tt=t}Sst(){return this.Ktt}kst(t){this.Ktt=t}B$(){return this.Eht}U$(t){this.Eht=t}JX(){return this.Dht}W$(t){this.Dht=t}zst(){return this.vl}Bst(t){this.vl=!!t}IB(){return this.Vc}Dtt(){return this.Uht}Fst(){return this.Wht}jst(t){this.Wht=t}Qst(){return this.jht[0]}Wst(t){this.jht||(this.jht=[]),this.jht[0]=t}Vst(){return this.jht||(this.jht=[]),this.jht[1]}Yst(t){this.jht||(this.jht=[]),this.jht[1]=t}Pv(){return this.$c}kc(){return this.er}QH(){return{keyframeDataJson:this.zht.QH(),propertyTrackDataJson:this.vit.QH(),instanceData:this.Fht,additionalInstanceData:this.jht,instanceUid:this.Ktt,objectClassIndex:this.$tt,interpolationMode:this.Eht,resultMode:this.Dht,enabled:this.vl,id:this.Vc,nestedData:this.Bht,type:this.$c,name:this.er}}JH(t){t&&(this.Fht=t.instanceData,this.Ktt=t.instanceUid,this.$tt=t.objectClassIndex,this.Eht=t.interpolationMode,this.Dht=t.resultMode,this.vl=t.enabled,this.Vc=t.id,this.$c=t.type||0,this.er=t.name||"",this.Wht=this.Xtt.F$().rB(),t.nestedData&&(this.Bht=t.nestedData,this.Uht=this.Bht[0],this.Wht=this.Bht[1]),t.additionalInstanceData&&(this.jht=t.additionalInstanceData),this.ust().JH(t.keyframeDataJson),this.mst().JH(t.propertyTrackDataJson))}}Gh.kht=class{constructor(t,s){this.ZK=s,this.Vht=[],Gh.jq.xht(this.Vht,t,Nh,this)}Kn(){this.ZK=null;for(const t of this.Vht)t.Kn();Gh.Nh(this.Vht),this.Vht=null}F$(){return this.ZK}Ltt(){const t=new Nh(null,this);return this.Vht.push(t),t}Hht(t){return t.ust().ast()[0]}qht(t){const s=t.ust().ast();return s.at(-1)}eit(s,t){const i=t.ust().ast(),e=i.length;for(let t=0;t<e;t++){const n=i[t];if(n.R_()===s)return n}}Zht(s,t){const i=t.ust().ast(),e=i.length;for(let t=0;t<e;t++){const n=i[t];if(n.R_()>s)return n}}Xht(s,t){const i=t.ust().ast(),e=i.length;for(let t=0;t<e;t++){const n=i[t];if(n.R_()>=s)return n}}iit(s,t){const i=t.ust().ast();for(let t=i.length-1;0<=t;t--){const e=i[t];if(e.R_()<=s)return e}}*D$(){for(const t of this.Vht)yield t}QH(){return{trackDataItemsJson:this.Vht.map(t=>t.QH())}}JH(t){t&&Gh.jq.Ght(this.Vht,t.trackDataItemsJson,Nh,this)}}}{const Eh=self.Ls;class Dh{constructor(t,s){this.vit=s,this.Kht="",this.$ht=null,this.Rnt=null,this.$c=null,this.tot=NaN,this.sot=NaN,this.Eht="default",this.Dht="default",this.vl=!1,this.iot=null,this.eot=!0,t&&(this.Kht=t[0][0],this.$ht=t[0].slice(1),this.Rnt=t[1],this.$c=t[2],this.tot=t[3],this.sot=t[4],this.Eht=t[5],this.Dht=t[6],this.vl=!!t[7],this.iot=new Eh.not(t[8],this),this.eot=t[9])}Kn(){this.iot.Kn(),this.iot=null,this.vit=null,this.$ht=null}mst(){return this.vit}Git(){return this.iot||(this.iot=new Eh.not(null,this)),this.iot}Cst(){return this.Kht}Uit(t){this.Kht=t}Qit(){return this.$ht}Yit(t){this.$ht=t}Hit(){return this.Rnt}Zit(t){this.Rnt=t}Pv(){return this.$c}$it(t){this.$c=t}eet(){return this.tot}net(t){this.tot=t}ret(){return this.sot}het(t){this.sot=t}B$(){return this.Eht}U$(t){this.Eht=t}JX(){return this.Dht}W$(t){this.Dht=t}zst(){return this.vl}Bst(t){this.vl=!!t}aet(){return!!this.eot}QH(){return{propertyKeyframeDataJson:this.iot.QH(),sourceAdapterId:this.Kht,sourceAdapterArguments:this.$ht,property:this.Rnt,type:this.$c,min:this.tot,max:this.sot,interpolationMode:this.Eht,resultMode:this.Dht,enabled:this.vl,canHavePropertyKeyframes:this.eot}}JH(t){t&&(this.Kht=t.sourceAdapterId,this.$ht=t.sourceAdapterArguments,this.Rnt=t.property,this.$c=t.type,this.tot=t.min,this.sot=t.max,this.Eht=t.interpolationMode,this.Dht=t.resultMode,this.vl=t.enabled,this.eot=t.canHavePropertyKeyframes,this.Git().JH(t.propertyKeyframeDataJson))}}Eh.Jht=class{constructor(t,s){this.Ztt=s,this.rot=[],Eh.jq.xht(this.rot,t,Dh,this)}Kn(){this.Ztt=null;for(const t of this.rot)t.Kn();Eh.Nh(this.rot),this.rot=null}Pst(){return this.Ztt}oit(){const t=new Dh(null,this);return this.rot.push(t),t}iet(t){const s=t.Git();return s.Cit()[0]}Qnt(t){const s=t.Git(),i=s.Cit();return i.at(-1)}uet(s,t){const i=t.Git(),e=i.Cit(),n=e.length;for(let t=0;t<n;t++){const r=e[t];if(r.R_()===s)return r}}fet(s,t){const i=t.Git(),e=i.Cit(),n=e.length;for(let t=0;t<n;t++){const r=e[t];if(r.R_()>s)return r}}det(s,t){const i=t.Git(),e=i.Cit(),n=e.length;for(let t=0;t<n;t++){const r=e[t];if(r.R_()>=s)return r}}let(s,t){const i=t.Git(),e=i.Cit();for(let t=e.length-1;0<=t;t--){const n=e[t];if(n.R_()<=s)return n}}*pst(){for(const t of this.rot)yield t}QH(){return{propertyTrackDataItemsJson:this.rot.map(t=>t.QH())}}JH(t){t&&Eh.jq.Ght(this.rot,t.propertyTrackDataItemsJson,Dh,this)}}}{const _h=self.Ls;class Ah{constructor(t,s){if(this.zht=s,this.AA=-1,this.hot="noease",this.oot=!1,this.T$=null,this.aot=null,t){this.AA=t[0],this.hot=t[1],this.oot=!!t[2];const i=t[3];this.T$=i?i.split(" "):[],this.aot=new Set(this.T$.map(t=>t.toLowerCase())),this.uot=null}}Kn(){this.zht=null,_h.Nh(this.T$),this.T$=null,this.aot.clear(),this.aot=null,this.uot=null}ust(){return this.zht}kX(){return this.uot}lot(t){this.uot=t}R_(){return this.AA}eB(t){this.AA=t,this.zht.cot()}_et(){return this.hot}SB(t){this.hot=t}zst(){return this.oot}Bst(t){this.oot=!!t}fB(){return this.T$}q$(t){this.T$=t?t.split(" "):[],this.aot=new Set(this.T$.map(t=>t.toLowerCase()))}fot(){return this.aot}Ytt(t){return this.aot.has(t.toLowerCase())}QH(){return{time:this.AA,ease:this.hot,enable:this.oot,tags:this.T$}}JH(t){t&&(this.AA=t.time,this.hot=t.ease,this.oot=t.enable,this.T$=t.tags,this.aot=new Set(this.T$.map(t=>t.toLowerCase())))}}_h.Qht=class{constructor(t,s){this.Ztt=s,this.ost=[],_h.jq.xht(this.ost,t,Ah,this),this.cot()}Kn(){this.Ztt=null;for(const t of this.ost)t.Kn();_h.Nh(this.ost),this.ost=null}cot(){this.ost.sort((t,s)=>t.R_()-s.R_());for(let t=0;t<this.ost.length;t++){const s=this.ost[t];s.lot(this.ost[t+1])}}Pst(){return this.Ztt}dot(){return this.ost.length}ast(){return this.ost}rit(){const t=new Ah(null,this);return this.ost.push(t),this.cot(),t}uit(t){for(const s of this.ost)if(t(s)){const i=this.ost.indexOf(s);-1!==i&&(s.Kn(),this.ost.splice(i,1))}this.pot(),this.cot()}pot(){this.ost.sort((t,s)=>t.R_()-s.R_())}wit(t){return this.ost.indexOf(t)}Sit(t){return this.ost[t]}*mot(){for(const t of this.ost)yield t}*got(){for(let t=this.ost.length-1;0<=t;t--)yield this.ost[t]}QH(){return{keyframeDataItemsJson:this.ost.map(t=>t.QH())}}JH(t){t&&(_h.jq.Ght(this.ost,t.keyframeDataItemsJson,Ah,this),this.cot())}}}{const Lh=self.Ls;class Oh{constructor(t,s){this.iot=s,this.ant=null,this.yot=null,this.$c="",this.AA=NaN,this.hot="noease",this.oot=!1,this.Mot=null,this.wot=void 0,this.Sot="line",t&&(this.ant=t[0][0],this.yot=t[0][1],this.$c=t[0][2],this.AA=t[1],this.hot=t[2],this.oot=!!t[3],this.Sot=t[5],this.Mot=null,t[4]&&(this.Mot=new Lh.Tot(t[4],this)),this.uot=null,this.bot=null)}Kn(){this.iot=null,this.Mot&&(this.Mot.Kn(),this.Mot=null),this.uot=null,this.bot=null}vot(){return this.Mot}lot(t){this.uot=t}kX(){return this.uot}xot(t){this.bot=t}FX(){return this.bot}Vit(){return this.ant}Aet(t){"color"===this.$c&&Lh.ae(t)?(this.ant[0]=Lh.kr(t),this.ant[1]=Lh.Fr(t),this.ant[2]=Lh.jr(t)):this.ant=t}Jnt(){return this.yot}Net(t){"color"===this.$c&&Lh.ae(t)?(this.yot[0]=Lh.kr(t),this.yot[1]=Lh.Fr(t),this.yot[2]=Lh.jr(t)):this.yot=t}KX(){const t=this.iot.Oit().JX();return"relative"===t?this.Vit():"absolute"===t?this.Jnt():void 0}Pv(){return this.$c}$it(t){this.$c=t}R_(){return this.AA}eB(t){this.AA=t,this.iot.Iot()}_et(){return this.hot}SB(t){this.hot=t}zst(){return this.oot}Bst(t){this.oot=!!t}jX(){return this.Sot}ZX(s){if(this.Mot){if(!this.wot&&null!==this.wot){const i=this.Mot.Cot();if(i){const e=i.length;for(let t=0;t<e;t++){const n=i[t];if(n.IB()===s)return this.wot=n,this.wot}}this.wot=null}return this.wot}}QH(){const t=this.Mot;return{addonDataJson:t&&t.QH(),value:this.ant,aValue:this.yot,type:this.$c,time:this.AA,ease:this.hot,enable:this.oot}}JH(t){t&&(t.addonDataJson&&this.Mot._SetFromJson(t.addonDataJson),this.ant=t.value,this.yot=t.aValue,this.$c=t.type,this.AA=t.time,this.hot=t.ease,this.oot=t.enable)}}Lh.not=class{constructor(t,s){this.bit=s,this.Iit=[],this.Got=[],Lh.jq.xht(this.Iit,t,Oh,this),Lh.jq.Cht(this.Got,t,Oh,this),this.Iot()}Kn(){this.bit=null;for(const t of this.Iit)t.Kn();Lh.Nh(this.Iit),this.Iit=null;for(const s of this.Got)s.Kn();Lh.Nh(this.Got),this.Got=null}Iot(){let s=this.Iit;s.sort((t,s)=>t.R_()-s.R_());for(let t=0;t<s.length;t++){const i=s[t];t+1<s.length&&i.lot(s[t+1]),0<=t-1&&i.xot(s[t-1])}(s=this.Got).sort((t,s)=>t.R_()-s.R_());for(let t=0;t<s.length;t++){const e=s[t];t+1<s.length&&e.lot(s[t+1]),0<=t-1&&e.xot(s[t-1])}}Cet(){const t=new Oh(null,this);return this.Iit.push(t),this.Iot(),t}Get(t){for(const s of this.Iit)if(t(s)){const i=this.Iit.indexOf(s);-1!==i&&(s.Kn(),this.Iit.splice(i,1))}this.Not(),this.Iot()}Not(){this.Iit.sort((t,s)=>t.R_()-s.R_())}Oit(){return this.bit}Eot(){return this.Iit.length}Qnt(){return this.Iit[this.Iit.length-1]}Cit(){return this.Iit}PX(){return this.Got}*Dot(){for(const t of this.Iit)yield t}*_ot(){for(let t=this.Iit.length-1;0<=t;t--)yield this.Iit[t]}QH(){const t=this.Iit,s=this.Got;return{propertyKeyframeDataItemsJson:t.map(t=>t.QH()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.QH())}}JH(t){t&&(Lh.jq.Ght(this.Iit,t.propertyKeyframeDataItemsJson,Oh,this),Lh.jq.Ght(this.Got,t.propertyKeyframeDataItemsIncludingDisabledJson,Oh,this),this.Iot())}}}{const Rh=self.Ls;class Ph{constructor(t,s){this.Mot=s,this.Vc=t[0],this.Aot=t[1]}Kn(){this.Mot=null,this.Aot=null}vot(){return this.Mot}IB(){return this.Vc}QH(){return{id:this.Vc,data:this.Aot}}JH(t){t&&(this.Vc=t.id,this.Aot=t.data)}}class kh extends Ph{constructor(t,s){super(t,s),this.Lot=this.Aot[0],this.Oot=!!this.Aot[1],this.Rot=this.Aot[2],this.Pot=!!this.Aot[3]}Kn(){super.Kn()}sK(){return this.Lot}Mht(){return this.Oot}nK(){return this.Rot}wht(){return this.Pot}QH(){return Object.assign(super.QH(),{startAnchor:this.Lot,startEnable:!!this.Oot,endAnchor:this.Rot,endEnable:!!this.Pot})}JH(t){t&&(super.JH(t),this.Lot=t.startAnchor,this.Oot=!!t.startEnable,this.Rot=t.endAnchor,this.Pot=!!t.endEnable)}}class Fh extends Ph{constructor(t,s){super(t,s),this.kot=this.Aot[0],this.Fot=this.Aot[1]}Kn(){super.Kn()}Tht(){return this.kot}Sht(){return this.Fot}QH(){return Object.assign(super.QH(),{direction:this.kot,revolutions:this.Fot})}JH(t){t&&(super.JH(t),this.kot=t.direction,this.Fot=t.revolutions)}}Rh.Tot=class{constructor(t,s){this.jot=s,this.zot=[],Rh.jq.xht(this.zot,t,{prop:0,map:new Map([["cubic-bezier",kh],["angle",Fh]])},this)}Kn(){this.jot=null;for(const t of this.zot)t.Kn();Rh.Nh(this.zot),this.zot=null}Bot(){return this.jot}Cot(){return this.zot}*Uot(){for(const t of this.zot)yield t}QH(){return{addonDataItemsJson:this.zot.map(t=>t.QH())}}JH(t){t&&Rh.jq.Ght(this.zot,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",kh],["angle",Fh]])},this)}}}{let m=self.Ls,i=0;m.Krt=class extends m.MZ{constructor(t,s){super("tween-"+i++,t,s),this.Vc="",this.Wot=!1,this.Qot="start-value",this.tst=null,this.Jot=null,this.Yot=null,this.Tit=null,this.Vot=null}N$(t){const s=m.Xn(m.Event,"tweenstatereleased");s.Hot=this,t.dispatchEvent(s)}Pv(){return 1}s$(){for(const t of this.ZK._$().D$())this.XK.push(m.qot._b(this,t));this.Tit=this.XK[0]}Att(){const t=this.ZK._$().Ltt(),s=m.qot._b(this,t);return this.XK.push(s),this.Zot(),s}Zot(){this.Tit=this.XK[0]}GB(t){return this.Tit.Btt()[0]}Kit(t){this.Xot=t}TB(){const t=this.LX();if(t&&t.length){const s=t[0];if(this.Tit=s){const i=s.TB();return s.wst()?i:void 0}}}Kot(t){this.Yot||(this.Yot=[]),this.Yot.push(t)}$ot(t){this.Jot||(this.Jot=[]),this.Jot.push(t)}tat(t){if(this.Yot){const s=this.Yot.indexOf(t);-1!==s&&this.Yot.splice(s,1)}}sat(t){if(this.Jot){const s=this.Jot.indexOf(t);-1!==s&&this.Jot.splice(s,1)}}iat(t,s){for(const i of this.XK)for(const e of i.lst)if(e.Utt()===s){const n=e.mst(),r=e.Oit(),h=n.iet(r);h.Aet(t),h.Net(t)}}eat(t){for(const s of this.XK)for(const i of s.lst)if(i.Utt()===t)return i}nat(t){for(const s of t){const i=this.eat(s);this.iat(i.yet(),s)}if(this.H$()){const e=this.rB()-this.R_();this.nB(e);for(const n of this.XK)n.jst(e);this.ltt(0)}else{const r=this.R_();this.nB(r);for(const h of this.XK)h.jst(r);this.ltt(r)}this.ctt()}rat(t,s){const i=this.eat(s),e=i.mst(),n=i.Oit(),r=e.Qnt(n);r.eB(this.rB()),r.Aet(t),r.Net(t)}hat(t){this.Vc=t}IB(){return this.Vc}oat(t){this.Qot=t}aat(){return this.Qot}xB(t){this.Wot=t}vB(){return this.Wot}$$(){if(this.Yot)for(const t of this.Yot)t(this);if(!this.lX())for(const s of this.XK)s.dit()}ttt(){this.m$=this.Jc.stt()}fX(){if(!this.M$&&(this.M$=!0,this.Jot))for(const t of this.Jot)t(this)}eB(t){this.uat(),super.eB(t)}gtt(t){(t=m.ae(t)?t:this.rB())<0?this.n$=0:t>=this.rB()?this.n$=this.rB():this.n$=t,this.Tit.ytt()}iX(t){if(!this.cX()&&"current-state"===this.aat())for(const s of this.XK)s.fit();super.iX(t)}tB(t=!1){if(super.tB(t),!this.lX())for(const s of this.XK)s.cit()}Hf(t=!0,s=!1){this.uat(),super.Hf(t,s)}uat(){for(const t of this.XK){const s=t=>{const s=t.R_(),i=this.rB();return 0!==s&&s!==i};t.ait(s),t.lit(s)}}iZ(){if(!this.Kz()){const t=this.TB();if(t&&t.uF().rY())return!1;this.qK.KZ(this),this.btt()}return!0}hX(n,t,s){if(this.tst||(this.tst=this.TB()),!this.tst||this.tst.CU())this.tB(!0),this.ttt();else{const i=this.tst.h3();if(0!==(n=-1!==i?s*i:n)||0!==this.S$){this.S$=n;const r=this.n$+this.r$,h=n*this.h$,o=r+h,a=this.ZK.Gtt;o<0?(this.n$=0,this.r$=-o):a<=o?(this.n$=a,this.r$=this.n$-o):(this.n$=o,this.r$=0);let t=!1,s=!1,i=this.oB(),e=this.uB();i||e?i&&!e?0<this.h$?this.n$>=a&&(this.gtt(0),this.lat(m.cat.Tween.A9.OnAnyTweenLoop),this.lat(m.cat.Tween.A9.OnTweensLoop),s=!0):this.n$<=0&&(this.gtt(a),this.lat(m.cat.Tween.A9.OnAnyTweenLoop),this.lat(m.cat.Tween.A9.OnTweensLoop),s=!0):!i&&e?0<this.h$?this.n$>=a&&(this.ltt(a),this.lB(-1*this.cB()),s=!0,1===this.o$?this.a$<this.Mz()?(this.a$++,this.lat(m.cat.Tween.A9.OnAnyTweenLoop),this.lat(m.cat.Tween.A9.OnTweensLoop),this.lat(m.cat.Tween.A9.OnAnyTweenPingPong),this.lat(m.cat.Tween.A9.OnTweensPingPong),this.o$=0):(this.lat(m.cat.Tween.A9.OnAnyTweenPingPong),this.lat(m.cat.Tween.A9.OnTweensPingPong),t=!0):0===this.o$&&(this.lat(m.cat.Tween.A9.OnAnyTweenPingPong),this.lat(m.cat.Tween.A9.OnTweensPingPong),this.o$=1)):this.n$<=0&&(this.ltt(0),this.lB(-1*this.cB()),s=!0,1===this.o$?this.a$<this.Mz()?(this.a$++,this.lat(m.cat.Tween.A9.OnAnyTweenLoop),this.lat(m.cat.Tween.A9.OnTweensLoop),this.lat(m.cat.Tween.A9.OnAnyTweenPingPong),this.lat(m.cat.Tween.A9.OnTweensPingPong),this.o$=0):(t=!0,this.lat(m.cat.Tween.A9.OnAnyTweenPingPong),this.lat(m.cat.Tween.A9.OnTweensPingPong)):0===this.o$&&(this.lat(m.cat.Tween.A9.OnAnyTweenPingPong),this.lat(m.cat.Tween.A9.OnTweensPingPong),this.o$=1)):i&&e&&(0<this.h$?this.n$>=a&&(this.ltt(a),this.lB(-1*this.cB()),s=!0,0===this.o$&&(this.lat(m.cat.Tween.A9.OnAnyTweenPingPong),this.lat(m.cat.Tween.A9.OnTweensPingPong)),1===this.o$&&(this.lat(m.cat.Tween.A9.OnAnyTweenLoop),this.lat(m.cat.Tween.A9.OnTweensLoop),this.lat(m.cat.Tween.A9.OnAnyTweenPingPong),this.lat(m.cat.Tween.A9.OnTweensPingPong)),this.o$++,this.o$=m.wrap(this.o$,0,2)):this.n$<=0&&(this.ltt(0),this.lB(-1*this.cB()),s=!0,0===this.o$&&(this.lat(m.cat.Tween.A9.OnAnyTweenPingPong),this.lat(m.cat.Tween.A9.OnTweensPingPong)),1===this.o$&&(this.lat(m.cat.Tween.A9.OnAnyTweenLoop),this.lat(m.cat.Tween.A9.OnTweensLoop),this.lat(m.cat.Tween.A9.OnAnyTweenPingPong),this.lat(m.cat.Tween.A9.OnTweensPingPong)),this.o$++,this.o$=m.wrap(this.o$,0,2))):0<this.h$?this.n$>=a&&(this.a$<this.Mz()?(this.a$++,this.gtt(0),this.lat(m.cat.Tween.A9.OnAnyTweenLoop),this.lat(m.cat.Tween.A9.OnTweensLoop),s=!0):(this.ltt(a),t=!0)):this.n$<=0&&(this.a$<this.Mz()?(this.a$++,this.gtt(a),this.lat(m.cat.Tween.A9.OnAnyTweenLoop),this.lat(m.cat.Tween.A9.OnTweensLoop),s=!0):(this.ltt(0),t=!0)),t?(this.Tit.Ntt(),this.tB(!0),this.ttt()):(this.Tit.Gc(this.n$,!0,!1,s,this.w$,!1),this.w$&&(this.w$=!1))}}}lat(t){const s=this.TB(),i=s.fat(m.cat.Tween);i.PushTriggerTween(this),this.Jc.HF(t,s,i.ez()),i.PopTriggerTween()}QH(){const t=super.QH(),s=this.F$();return Object.assign(t,{tweenDataItemJson:s.QH(),id:this.Vc,destroyInstanceOnComplete:this.Wot,initialValueMode:this.Qot})}JH(t){if(t){const s=this.F$();s.JH(t.tweenDataItemJson),super.JH(t),this.Vc=t.id,this.Wot=t.destroyInstanceOnComplete,this.Qot=t.initialValueMode,this.Zot()}}static IsPlaying(t){return t.IsPlaying()}static mB(t){return t.mB()}static dat(t){return!!t.uB()&&0===t.V$()}static pat(t){return!!t.uB()&&1===t.V$()}static mat(t){const s=t.runtime.L$(),i=new m.vht;if(t.json){i.JH(t.json.tweenDataItemJson);const e=new m.Krt(i,s);return e.JH(t.json),e}{const n=new m.Krt(i,s),r=(m.Oe(t.gat)||(t.gat=[t.gat]),n.hat(t.id),n.q$(t.tags),n.oat(t.initialValueMode),n.xB(t.releaseOnComplete),n.hB(t.loop),n.aB(t.pingPong),n.nB(t.time),n.z$(0),n.U$("default"),n.W$(t.gat[0].resultMode),n.Q$(t.repeatCount),n.Att()),h=(r.kst(t.nz.vF()),r.U$("default"),r.W$(t.gat[0].resultMode),r.Bst(!0),r.Ust(t.nz.uF().$L()),t.nz.J5()),o=h.Jst()?h.Qst():t.nz.Z3().Jp(),a=h.Jst()?h.Vst():t.nz.Z3().im(),u=(r.Wst(o),r.Yst(a),r.nit()),l=(u.eB(0),u.SB("noease"),u.Bst(!0),u.q$(""),r.nit());l.eB(t.time),l.SB("noease"),l.Bst(!0),l.q$("");for(const c of t.gat){const f=r.hit(),d=(f.Uit(c.sourceId),f.Jit(c.sourceArgs),f.qit(c.property),f.Kit(c.type),f.net(NaN),f.het(NaN),f.U$("default"),f.W$(c.resultMode),f.Bst(!0),f.Iet()),p=(d.$it(c.valueType),d.eB(0),d.SB(c.ease),d.Bst(!0),d.Aet(c.startValue),d.Net(c.startValue),f.Iet());p.$it(c.valueType),p.eB(t.time),p.SB(c.ease),p.Bst(!0),p.Aet(c.endValue),p.Net(c.endValue),f.R$()}return n}}static kst(t,s){if(!isNaN(s))for(const i of t.LX())i.kst(s)}yat(t,s){return this.Vot||(this.Vot=m.Xn(self.MB,this,t,s)),this.Vot}}}{const jh=self.Ls;jh.qot=class extends jh.A${constructor(t,s){super(t,s),this.Mat=null,this.wat=null}static _b(t,s){return jh.Xn(jh.qot,t,s)}Sat(){1===this.lst.length?this.Mat=this.lst[0]:(this.Mat=this.lst[0],this.wat=this.lst[1])}cst(){for(const t of this.Ztt.mst().pst())this.lst.push(jh.Tat._b(this,t));this.Sat()}hit(){const t=this.Ztt.mst(),s=t.oit(),i=jh.Tat._b(this,s);return this.lst.push(i),this.Sat(),i}iX(){if(this.Mst(),this.wst()||!this.k$()){const t=this.yst(),s=t.H$(),i=s?0:this.Fst();for(const n of this.lst)n.iX(i),0===this.fst&&1===n.Zst()&&(this.fst=1),0===this.pZ&&1===n.eX()&&(this.pZ=1);this.dst=0;const e=this.lst.some(t=>t.Ctt());e&&(this.dst=1),this.hst=this.Xst(i),this.est=!1,this.nst=!1,this.Gc(i)}}Ett(){}Gc(t,s=0,i=!1,e=!1,n,r=!1,h=!1){if(this.tst||this.TB(),this.tst){const o=!this.tst.CU();return o&&(!r||!this.uF().rY())&&((this.wat?(this.Mat.Gc(t,i,e,h),this.wat):this.Mat).Gc(t,i,e,h),void(0!==this.Mat.Zst()&&(this.sst||(this.sst=this.tst.Z3()),this.sst)&&this.sst.vj()))}}_tt(){}JH(t){super.JH(t),this.Sat()}}}{const zh=self.Ls;zh.Tat=class extends zh.gst{constructor(t,s){super(t,s),this.bat=!1}static _b(t,s){return zh.Xn(zh.Tat,t,s)}Gc(t,s=!1,i=!1,e=!1){let n,r;if(this.bat)n=this.Iit[0],r=this.Iit[1];else{if(s)n=this.vit.let(t,this.bit);else{if(this.Nit){const h=this.yst(),o=this.Nit.kX(),a=this.Nit.R_(),u=o?o.R_():h.rB();(t<=a||u<=t)&&(this.Nit=this.vit.let(t,this.bit))}else this.Nit=this.vit.let(t,this.bit);n=this.Nit}r=n.kX()}this.xit.Gc(t,n,r,s,i,e)}Iet(){const t=this.bit.Git(),s=t.Cet();return this.Nit=null,this.bat=this.oet().length<=2,s}lit(t){this.Nit=null;const s=this.bit.Git();s.Get(t),this.bat=this.oet().length<=2}QH(){return{sourceAdapterJson:this.R$().QH(),basic:this.bat}}JH(t){t&&(this.R$().JH(t.sourceAdapterJson),this.bat=t.basic)}}}{const Bh=self.Ls,Uh=self.$l;Bh.Nc=class extends Bh.qn{constructor(t,s=!0){super(),this.er=t[0],this.vat=t[2],this.xat=[];for(const i of t[1]){const e=Bh.Iat._b(this,i);this.xat.push(e)}for(let t=0;t<this.xat.length;t++){const n=this.xat[t],r=this.xat[t+1],h=this.xat[t-1];n.lot(r),n.xot(h)}this.Cat=new Map,this.Gat=new Map,this.Nat(),s&&Uh.Dc(this.er,(t,s,i,e)=>this.Gc(t,s,i,e),null,{transition:this})}static _b(t){return Bh.Xn(Bh.Nc,t)}Kn(){for(const t of this.xat)t.Kn();Bh.Nh(this.xat),this.xat=null,this.Cat.clear(),this.Cat=null,this.Gat.clear(),this.Gat=null}Ec(t){this.vat=!!t}Eat(t){const s=this.Gat.get(t);if(s)return s;for(const i of this.xat)if(i.Dat()===t)return this.Gat.set(t,i),i}_at(s){for(let t=this.xat.length-1;0<=t;t--){const i=this.xat[t],e=i.Dat();if(e<=s){let t=i;if(e<s)return t;if(e===s){for(;t;){const n=t.FX();if(!n)break;if(n.Dat()!==t.Dat())break;t=n}return t}}}}Gc(t,s,i,e){let n=t/e;if(this.vat){const M=this.Eat(0),w=this.Eat(1),S=s+(s+i)*M.Aat(),T=(s+i)*w.Aat(),b=T-S;return 0===e?S+b:Uh.Ac(t,S,b,e)}0===e&&(n=1);let r=this._at(n),h=r.kX();if(!h){const v=r.FX(),x=r;r=v,h=x}const o=h.Dat()-r.Dat(),a=Bh.nr(n,r.Dat(),h.Dat(),0,o);if(r.Lat()||0==o){const I=s+(s+i)*r.Aat(),C=(s+i)*h.Aat(),G=C-I;return 0==o?1===a?I+G:I:Uh.Ac(a,I,G,o)}let u=r.Dat(),l=r.Aat(),c=r.Dat()+r.Oat(),f=r.Aat()+r.Rat(),d=h.Dat()+h.Pat(),p=h.Aat()+h.kat(),m=h.Dat(),g=h.Aat(),y=Uh.mc("spline")(a,u,l,c,f,d,p,m,g,this.Cat.get(r));return(1-(y+=r.Aat()))*s+y*(s+i)}Nat(){this.Cat.clear();for(let t=0;t<this.xat.length-1;t++){const s=this.xat[t];if(s.Mht()){const i=s,e=this.xat[t+1];if(e.wht()){const n=i.Dat(),r=i.Dat()+i.Oat(),h=e.Dat()+e.Pat(),o=e.Dat();this.Cat.set(i,Uh.Lc(n,r,h,o))}}}}}}{const Wh=self.Ls;Wh.Iat=class extends Wh.qn{constructor(t,s){super(),this.Fat=t,this.jat=s[0],this.zat=s[1],this.Bat=s[2],this.Uat=s[3],this.Wat=s[4],this.Qat=s[5],this.Oot=s[6],this.Pot=s[7],this.Jat=s[8],this.uot=null,this.bot=null}Kn(){this.Fat=null}static _b(t,s){return Wh.Xn(Wh.Iat,t,s)}lot(t){this.uot=t}kX(){return this.uot}xot(t){this.bot=t}FX(){return this.bot}Dat(){return this.jat}Aat(){return this.zat}Oat(){return this.Bat}Rat(){return this.Uat}Pat(){return this.Wat}kat(){return this.Qat}Mht(){return this.Oot}wht(){return this.Pot}Lat(){return"linear"===this.Jat}Yat(){return"cubic"===this.Jat}}}{const Qh=self.Ls;Qh.Vat=class extends Qh.qn{constructor(t){super(),this.Jc=t,this.Hat=[]}Kn(){for(const t of this.Hat)t.Kn();Qh.Nh(this.Hat),this.Hat=null}_b(t){this.Hat.push(Qh.Nc._b(t))}}}{const Jh=self.Ls;Jh.qat=class extends Jh.qn{constructor(t){super(),this.Jc=t,this.Zat=null,this.Xat=null,this.rZ=t=>this.hZ(t.nz)}Kn(){if(this.mZ(),this.Zat){for(const t of this.Zat.values())t.clear();this.Zat.clear()}this.Zat=null,this.Jc=null}_b(t){if(this.Zat||(this.Zat=new Map),t){const s=t[0][16],i=s[0],e=t[1],n=(this.Zat.has(e)||this.Zat.set(e,new Map),this.Zat.get(e));n.set(i,t)}}gZ(){const t=this.Jc.Gf();t&&t.addEventListener("instancedestroy",this.rZ)}mZ(){const t=this.Jc.Gf();t&&t.removeEventListener("instancedestroy",this.rZ)}Kat(){return!!this.Zat&&0!==this.Zat.size}$at(t,s){let i;if(i=t instanceof Jh.tut?t.$L():t,this.Zat.has(i)){const e=this.Zat.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}}sut(t,s){this.Xat||(this.Xat=new WeakMap),this.Xat.has(t)||this.Xat.set(t,s)}iut(t){if(!this.Xat)return"";const s=this.Xat.get(t);return s||""}hZ(t){this.Xat&&this.Xat.has(t)&&this.Xat.delete(t)}}}{const Yh=self.Ls;Yh.eut=class{constructor(t){this.Jc=t,this.nut=new Yh.rut}Kn(){this.nut.Kn(),this.nut=null,this.Jc=null}w4(){return this.Jc}_b(t){this.nut.Zl(t)}hut(t){return this.nut.Xs(t)}out(){return this.nut.out()}}}{const x=self.Ls;x.aut=class{constructor(t,s,i,e,n,r,h){this.Jc=n.w4(),this.uut=n,this.lut=t,this.cut=i,this.fut=e,this.Lg=s,this.zq=r,this.dut=h??r.TB().vF(),this.mut(),this.gut=this.Mut?.yut()??-1,this.wut=[],this.Sut=null,this.Tut=NaN,this.but=null,this.vut=null,this.xut=null,this.Iut="",this.Cut=null,this.Gut="",this.Nut="",this.Eut=0,this.Dut=!1,this.d$=!1}Kn(){this.d$||(x.Nh(this.wut),this.wut=null,this.Jc=null,this.uut=null,this.fut=null,this.zq=null,this.Sut=null,this.Tut=NaN,this.but&&this.but.clear(),this.but=null,this.vut=null,this.xut=null,this.Iut="",this.Cut=null,this.Gut="",this.Nut="",this.d$=!0)}$n(){return this.d$}_ut(){return this.uut}w4(){return this.Jc}kc(){return this.lut}Aut(){return this.fut}Xz(){return this.Lg}EZ(){return this.zq||(this.zq=this.Jc.J3(this.dut).J5()),this.zq}Lut(){return this.Out(this.gut)}Rut(){const t=this.Lut();return t?t.Xz():""}Put(){const t=this.Lut();return t?t.fB():[]}kut(t){const s=this.Put();if(!s)return!1;if(!s.length)return!1;const i=x.aut.Z$(t);return!(!i||!i.length)&&i.every(x.aut.K$,s)}Fut(t,s){const i=this.Put();if(!i)return!1;if(!i.length)return!1;const e=x.aut.Z$(t);return!(!e||!e.length)&&e.every(t=>x.aut.jut.call(i,t,s))}static K$(t){return""===t?1===this.length&&""===this[0]:this.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static Z$(t){return t.trim().split(" ")}static jut(s,i){return""===s?1===this.length&&""===this[0]:this.some(t=>x.compare(t.trim(),i,s.trim()))}zut(t){const s=this.Lut();if(s){if(x.ae(t)){const i=s.But(),e=i?i[t]:void 0;if(x.ae(e))return this.Out(e)}if("string"==typeof t)for(const n of s.But()){const r=this.Out(n);if(r.iB(t))return this.Out(r.yut())}}}Uut(t){const s=this.zut(t);return s?s.Xz():""}Wut(t){const s=this.zut(t);return s?s.fB():""}Qut(t){const s=this.Lut();if(!s)return-1;const i=s.But();if(!i)return-1;const e=this.zut(t);return e?i.indexOf(e.yut()):-1}Jut(){const t=this.Lut();if(!t)return 0;const s=t.But();return s?s.length:0}Out(t){return this.fut.Out(t)}Hf(){const t=this.Yut();t.Vut(!0)}Vut(t){if(this.Hut()){for(const[s,i]of this.Hut().entries())i.Vut(!1);this.Hut().clear()}if(this.but=null,this.Sut=null,this.qut=null,this.vut=null,this.Iut="",this.Cut=null,this.Gut="",this.Nut="",this.wut=[],t){this.uut.Zut(this);const e=this.Mut.yut();e!==this.gut&&this.Xut(e)}else this.gut=this.Mut.yut()}Kut(){const t=this.fut.Out(this.gut);return t?t.tlt().$ut():0}slt(t){const s=this.ilt(t);return s?s.kc():""}elt(t){let s;return x.ae(t)&&(s=this.ilt(t)),"string"==typeof t&&(s=this.nlt(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Vit():""}rlt(t){let s;if(x.ae(t)&&(s=this.ilt(t)),s="string"==typeof t?this.nlt(t):s){const i=s.hlt();x.ae(i)&&(this.wut.push(this.gut),this.Xut(i))}}olt(t){const s=this.fut.ult(t);if(s){const i=this.fut.Out(s.yut());i&&(this.wut.push(this.gut),this.Xut(i.yut()))}}llt(){const t=this.wut.pop();x.ae(t)?this.Xut(t):this.clt()&&(this.uut.Zut(this.clt(),!0,!1,!1),this.clt().Xut(this.flt()),this.Yut().dlt(this.clt()))}plt(t){const s=this.Lut();if(s){s.yut();const i=this.zut(t);i&&(this.wut.push(this.gut),this.Xut(i.yut()))}}mlt(s){if(x.ae(s)){const t=this.fut.Out(this.gut),i=t.tlt().glt();return!!i[s]}if("string"==typeof s){const e=this.fut.Out(this.gut),n=e.tlt().glt();for(let t=0;t<n.length;t++)if(n[t].kc()===s)return!0}return!1}ylt(){this.Dut=!0}Mlt(){return 0<this.Eut}wlt(){this.Eut++}Slt(){this.Eut--,0===this.Eut&&this.Dut&&this.uut.Tlt(this)}Xut(t){const i=this.gut,s=this.EZ().TB();if(this.wlt(),this.uut.blt(this),this.Jc.HF(x.O9.Flowchart.A9.OnBeforeAnyNodeChange,s),this.Jc.HF(x.O9.Flowchart.A9.OnBeforeTaggedNodeChange,s),this.Jc.HF(x.O9.Flowchart.A9.OnBeforeAnyNodeChangeInFlowchart,s),this.Jc.HF(x.O9.Flowchart.A9.OnBeforeTaggedNodeChangeInFlowchart,s),this.gut=t,this.Jc.HF(x.O9.Flowchart.A9.OnAnyNodeChange,s),this.Jc.HF(x.O9.Flowchart.A9.OnTaggedNodeChange,s),this.Jc.HF(x.O9.Flowchart.A9.OnAnyNodeChangeInFlowchart,s),this.Jc.HF(x.O9.Flowchart.A9.OnTaggedNodeChangeInFlowchart,s),this.uut.vlt(),this.Slt(),!this.$n()){const e=this.Out(this.gut);if("reference"===e.Pv()){const n=e.xlt();if(this.Ilt(e)){this.wut.pop();const r=this.Clt(e),h=(this.uut.Zut(r,!0,!0,!1),r.Glt(this,i),this.Yut());h.dlt(r)}else{const o=e.Nlt();if(n){this.wut.pop();let s=e.Elt();if(s){let t=this.uut.Dlt(s);for(;t;)s=x.Rd(s),t=this.uut.Dlt(s)}else{s=n+"-ref";let t=this.uut.Dlt(s);for(;t;)s=x.Rd(s),t=this.uut.Dlt(s)}const a=this.uut._lt(n,o,s,this.zq,!0),u=(a.Glt(this,i),this.Alt(e,a),this.Yut());a.Llt(u),u.dlt(a)}}}}}ilt(t){const s=this.fut.Out(this.gut);if(!s)return null;const i=s.tlt().glt();if(!i)return null;const e=i[t];return e||null}nlt(t){const s=this.fut.Out(this.gut);if(!s)return null;const i=s.tlt().Olt(t);return i||null}mut(s){if("number"==typeof s){let t=this.Out(s);t=t||this.fut.Rlt(),this.Mut=t}else{let t=this.fut.ult(this.cut);t=t||this.fut.Rlt(),this.Mut=t}}QH(){return this.Dut?null:{flowchartName:this.lut,flowchartTag:this.Lg,startNodeTag:this.cut,currentNodeId:this.gut,previousNodeIds:this.wut,pluginUID:this.zq.TB().vF(),reference:{previousFlowchartTag:this.clt()?this.clt().Xz():"",previousStartNodeId:x.ae(this.flt())?this.flt():NaN,referencesJson:this.Plt(),currentReferenceFlowchartTag:this.klt()?this.klt().Xz():"",rootFlowchartTag:this.Yut()?this.Yut().Xz():""}}}Plt(){if(!this.Flt())return null;const t=[];for(const[s,i]of this.Hut().entries())t.push({flowchartElementId:s.yut(),flowchartStateTag:i.Xz()});return t.length?t:null}JH(t){if(t){if(this.lut=t.flowchartName,this.Lg=t.flowchartTag,this.cut=t.startNodeTag,this.gut=t.currentNodeId,this.wut=t.previousNodeIds,this.dut=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.Iut=s.previousFlowchartTag,this.Tut=s.previousStartNodeId,this.Cut=s.referencesJson,this.Gut=s.currentReferenceFlowchartTag,this.Nut=s.rootFlowchartTag}this.mut()}}clt(){return"string"==typeof this.Iut&&this.Iut&&(this.Sut=this.uut.Dlt(this.Iut),this.Iut=""),this.Sut}flt(){return this.Tut}Glt(t,s){this.Sut=t,this.Tut=s}klt(){return"string"==typeof this.Gut&&this.Gut&&(this.vut=this.uut.Dlt(this.Gut),this.Gut=""),this.vut}dlt(t){this.vut=t,this.vut===this&&(this.vut=null)}Yut(){return"string"==typeof this.Nut&&this.Nut&&(this.xut=this.uut.Dlt(this.Nut),this.Nut=""),this.xut||this}Llt(t){this.xut=t}Flt(){return this.jlt(),!!this.but}Ilt(t){return this.jlt(),this.but&&this.but.has(t)}jlt(){if(this.Cut){this.but&&this.but.clear(),this.but||(this.but=new Map);for(const t of this.Cut){const s=this.uut.Dlt(t.flowchartStateTag),i=s.Out(t.flowchartElementId);this.but.set(i,s)}this.Cut=null}}Hut(){return this.jlt(),this.but}Clt(t){return this.jlt(),this.but.get(t)}Alt(t,s){this.but||(this.but=new Map),this.but.set(t,s)}}}{const Vh=self.Ls;Vh.zlt=class{constructor(t){this.Jc=t,this.Blt=new Map,this.Ult=null,this.Wlt=[],this.Qlt=()=>this.lZ(),this.Jlt=null}Kn(){Vh.Nh(this.Wlt),this.Wlt=null,this.Blt.clear(),this.Blt=null,this.Ult=null,this.Jc=null,this.Jlt=null}w4(){return this.Jc}_lt(t,s,i,e,n,r){const h=this.Jc._ut().hut(t);if(h){if(!this.Blt.has(i)){const o=new Vh.aut(t,i,s,h,this,e,r);return this.Blt.set(i,o),n&&this.Zut(o,!0),o}{const a=this.Blt.get(i);a&&this.Tlt(a)}}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}Tlt(t){if(t.ylt(),!t.Mlt()){const s=t.Xz();this.Blt.delete(s),t.Kn(),this.Ult===t&&(this.Ult=null)}}Ylt(t){t.Hf()}Dlt(t){return this.Blt.get(t)}blt(t){this.Wlt.push(t)}vlt(){this.Wlt.pop()}Zut(t,s=!1,i=!1,e=!0){if(e){const n=t.klt();t=n||t}t!==this.Ult&&(this.Vlt(),this.Hlt(t,s,i))}qlt(t){return"string"==typeof t?this.Dlt(t):this.Wlt.length?this.Wlt[this.Wlt.length-1]:this.Ult}Vlt(){if(this.Ult&&!this.Ult.$n()){const t=this.Ult.EZ().TB();this.Ult.wlt(),this.blt(this.Ult),this.Jc.HF(Vh.O9.Flowchart.A9.OnBeforeFlowchartChange,t),this.vlt(),this.Ult.Slt()}}Hlt(t,s=!1,i=!1){if(this.Ult=t,this.Ult&&!this.Ult.$n()){const e=this.Ult.EZ().TB();this.Ult.wlt(),this.blt(this.Ult),this.Jc.HF(Vh.O9.Flowchart.A9.OnFlowchartChange,e),!0!==i&&"number"!=typeof i||this.Ult.mut(i),s&&(this.Jc.HF(Vh.O9.Flowchart.A9.OnAnyNodeChange,e),this.Jc.HF(Vh.O9.Flowchart.A9.OnTaggedNodeChange,e)),this.vlt(),this.Ult.Slt()}}QH(){return{flowchartJsonObjects:[...this.Blt.values()].map(t=>t.QH()),currentFlowchartTag:this.Ult?this.Ult.Xz():null}}JH(t){if(t){this.Jlt=t;const s=new Map;for(const i of this.Jlt.flowchartJsonObjects){const e=i.flowchartTag;if(this.Blt.has(e)){const n=this.Blt.get(e);n.JH(i),s.set(e,n)}else{const r=this._lt(i.flowchartName,i.startNodeTag,i.flowchartTag,null,!1,i.pluginUID);r.JH(i),s.set(i.flowchartTag,r)}}for(const[h,o]of this.Blt.entries())s.has(h)||o.Kn();this.Blt.clear(),this.Blt=s,this.Jc.x9()?this.Jc.Gf().addEventListener("afterload",this.Qlt):this.lZ()}}lZ(){this.Jc.Gf().removeEventListener("afterload",this.Qlt);const t=this.Blt.get(this.Jlt.currentFlowchartTag);t&&this.Zut(t,!0),this.Jlt=null}}}{const Hh=self.Ls;Hh.rut=class{constructor(){this.Zlt=new Map}Kn(){for(const t of this.Zlt.values())t.Kn();this.Zlt.clear(),this.Zlt=null}Zl(t){const s=new Hh.Xlt(t),i=s.kc();this.Zlt.set(i,s)}Xs(t){return this.Zlt.get(t)}out(){return!!this.Zlt.size}static Klt(t,s,i,e){if(s)for(const n of s){const r=new i(n,e);t.push(r)}}}}{const qh=self.Ls;qh.Xlt=class{constructor(t){this.er=t[0],this.$lt=new qh.tct(t[1],this)}Kn(){this.$lt.Kn(),this.$lt=null}sct(){return this.$lt}Out(t){return this.$lt.Out(t)}ult(t){return this.$lt.ult(t)}Rlt(){return this.$lt.Rlt()}kc(){return this.er}}}{const Zh=self.Ls;class Xh{constructor(t,s){this.$lt=s,this.$c=t[7],this.ict=t[0],this.Lg=t[1],this.Lg?this.T$=this.Lg.trim().split(" ").map(t=>t.trim()):this.T$=[],this.ect=t[2],this.nct=null,this.rct=null,"dictionary"===this.$c&&(this.nct=t[3],this.rct=t[4]),this.hct=t[6],this.oct=null,this.uct=null,this.lct=null,"reference"===this.$c&&(this.oct=t[8],this.uct=t[9],this.lct=t[10]),this.cct=new Zh.fct(t[5],this)}Kn(){this.$lt=null}sct(){return this.$lt}tlt(){return this.cct}yut(){return this.ict}Xz(){return this.Lg}fB(){return this.T$}iB(t){if(!this.T$)return!1;if(!this.T$.length)return!1;const s=Zh.aut.Z$(t);return!(!s||!s.length)&&s.every(Zh.aut.K$,this.T$)}dct(){return this.hct}But(){return this.ect}pct(){return this.nct}mct(){return this.rct}Pv(){return this.$c}xlt(){return this.oct}Nlt(){return this.uct}Elt(){return this.lct}}Zh.tct=class{constructor(t,s){this.fut=s,this.gct=[],this.yct=new Map,this.Mct=new Map,this.wct=null,Zh.rut.Klt(this.gct,t,Xh,this);for(const i of this.gct){const e=i.yut(),n=i.Xz(),r=i.fB(),h=i.dct();if(this.yct.set(e,i),n)for(const a of r)this.Mct.has(a)||this.Mct.set(a,new Set),this.Mct.get(a).add(i);h&&(this.wct=i);const o=i.tlt();for(const u of o.Sct()){const l=u.yut();this.yct.set(l,u)}}}Kn(){this.fut=null;for(const t of this.gct)t.Kn();Zh.Nh(this.gct),this.gct=null}Aut(){return this.fut}Out(t){return this.yct.get(t)}ult(t){if(!t||!t.length)return null;const i=[];for(const e of t.trim().split(" ")){let t=this.Mct.get(e.trim())??new Set;if(0===t.size)return null;i.push(t)}const s=i.reduce((t,s)=>s.size<t.size?s:t);return[...s].filter(s=>i.every(t=>t.has(s)))[0]}Rlt(){return this.wct}*Tct(){for(const t of this.gct)yield t}}}{const Kh=self.Ls;class $h{constructor(t,s){this.cct=s,this.ict=t[0],this.er=t[1],this.ant=t[2],this.bct=t[3]}Kn(){this.cct=null}tlt(){return this.cct}yut(){return this.ict}kc(){return this.er}Vit(){return this.ant}hlt(){return this.bct}}Kh.fct=class{constructor(t,s){this.vct=s,this.xct=[],this.Ict=new Map,Kh.rut.Klt(this.xct,t,$h,this);for(const i of this.xct)this.Ict.set(i.kc(),i)}Kn(){this.vct=null;for(const t of this.xct)t.Kn();Kh.Nh(this.xct),this.xct=null}Cct(){return this.vct}$ut(){return this.xct.length}glt(){return this.xct}Olt(t){return this.Ict.get(t)}*Sct(){for(const t of this.xct)yield t}}}{const to=self.Ls;to.Gct=class extends to.qn{constructor(t){super(),this.Nct=t,this.Ect=[],this.Ect.push(to.Xn(to.Dct,this)),this.Ag=0,this._ct=this.Ect[0]}Kn(){for(const t of this.Ect)t.Kn();to.Nh(this.Ect),this._ct=null,this.Nct=null}uF(){return this.Nct}pP(){return this._ct}Act(){return this.Ect[this.Ag-1]}zl(){this.pP().zl()}Lct(){const t=this.Ect,s=++this.Ag;if(s===t.length){const i=to.Xn(to.Dct,this);t.push(i),this._ct=i}else{const e=t[s];e.Hf(),this._ct=e}}Oct(){const t=this.Ect,s=++this.Ag,i=(s===t.length&&t.push(to.Xn(to.Dct,this)),t[s]);i.d0(t[s-1]),this._ct=i}C6(){this._ct=this.Ect[--this.Ag]}Rct(i){const e=this.Ect;for(let t=0,s=e.length;t<s;++t)e[t].Rct(i)}}}{const so=self.Ls;so.Dct=class extends so.qn{constructor(t){super(),this.Ect=t,this.Nct=this.Ect.uF(),this.Pct=this.Nct.w4().WO(),this.kct=!0,this.m8=[],this.Fct=[]}Kn(){this.jct(),this.Ect=null,this.Nct=null,this.Pct=null}jct(){so.Nh(this.m8),so.Nh(this.Fct)}uF(){return this.Nct}zct(){return this.kct}Bct(){return this.kct?!!this.Nct.gP():!!this.m8.length}dP(){return this.kct?this.Nct.dP():this.m8}Uct(){return!!this.Fct.length}Wct(){return this.Fct}Qct(){const t=this.dP();return t.length?t:this.Fct}Hf(){this.kct=!0,so.Nh(this.Fct)}zl(){this.kct=!0}d0(t){t.zct()?this.Hf():(this.kct=!1,so.Ah(this.m8,t.m8),so.Nh(this.Fct))}Jct(t){this.m8.push(t)}Yct(t){this.Fct.push(t)}Vct(t){this.kct=!!t}Hct(){return this.m8}qct(){return this.Fct}Zct(t){this.kct=!1,so.Nh(this.m8),this.m8.push(t)}Xct(t){this.kct=!1,so.Ah(this.m8,t)}Kct(t){this.kct=!1,so.Nh(this.m8);for(const s of t)this.m8.push(s)}$ct(t,s){for(const i of s)t.has(i)||this.Fct.push(i)}tft(t){for(const s of t)this.m8.push(s);so.kh(this.Fct,t)}ift(){so.Nh(this.Fct)}eft(t){if(t)if(this.Pct.p6().PO().nft()){this.zct()&&(so.Nh(this.m8),so.Ah(this.Fct,t.uF().dP()),this.kct=!1);const s=this.Fct.indexOf(t);-1!==s&&(this.m8.push(this.Fct[s]),this.Fct.splice(s,1))}else this.Zct(t)}Rct(t){so.kh(this.m8,t),so.kh(this.Fct,t)}}}{const io=self.Ls;io.rft=class extends io.qn{constructor(t){super(),this.hft=t,this.Jc=this.hft.w4(),this.Ect=[],this.Ect.push(io.Xn(io.oft,this,null)),this.Ag=0,this.aft=[]}Kn(){for(const t of this.Ect)t.Kn();io.Nh(this.Ect),io.Nh(this.aft),this.hft=null,this.Jc=null}DO(){return this.hft}w4(){return this.Jc}p6(){return this.Ect[this.Ag]}uft(){return this.Ect}lft(){return this.Ag}m6(t){const s=this.Ect,i=++this.Ag;if(i===s.length){const e=io.Xn(io.oft,this,t);return s.push(e),e}{const n=s[i];return n.Hf(t),n}}C6(){--this.Ag}cft(t){this.aft.push(t)}fft(){this.aft.pop()}UO(){const t=this.aft;return 0===t.length?null:t.at(-1)}}}{const eo=self.Ls;eo.oft=class extends eo.qn{constructor(t,s){super(),this.Ect=t,this.Jc=this.Ect.w4(),this.dft=s,this.pft=0,this.mft=0,this.gft=!1,this.yft=!1,this.Mft=null,this.wft=0,this.Sft=0,this.Tft=null}Kn(){this.Hf(null),this.Ect=null,this.Jc=null}Hf(t){this.dft=t,this.pft=0,this.mft=0,this.gft=!1,this.yft=!1,this.Tft=null}bft(t,s){this.dft=t,this.pft=0,this.mft=s}vft(){this.pft=0,this.mft=0}PO(){return this.dft}xft(t){this.dft=t}Ift(){return this.pft}Cft(t){this.pft=t}Gft(){return this.mft}Nft(t){this.mft=t}Eft(t){this.gft=!!t}Dft(){return this.gft}_ft(t){this.yft=!!t}Aft(){return this.yft}Lft(t){this.Mft=t}Oft(){return this.Mft}Rft(t,s){this.wft=t,this.Sft=s}QO(){return this.wft}JO(t){this.Sft=t}Pft(){return this.Sft}kft(){const t=this.dft;return!!t.Fft()||this.pft<t.jft()-1&&!!t.d6().length}zft(t){this.Tft=t}Bft(){return this.Tft}}}{const no=self.Ls;no.Uft=class extends no.qn{constructor(t){super(),this.hft=t,this.Jc=this.hft.w4(),this.Ect=[],this.Ag=-1,this._ct=null,this.Wft=[]}Kn(){no.Nh(this.Ect),this.hft=null,this.Jc=null}Qft(t){this.Wft=t;const s=this.Wft.slice(0);this.Ect.push(s),this.Ag=0,this._ct=s}DO(){return this.hft}w4(){return this.Jc}Jft(){return this._ct}m6(){const t=++this.Ag,s=this.Ect;t===s.length?s.push(this.Wft.slice(0)):no.Ah(s[t],this.Wft),this._ct=s[t]}C6(){this._ct=this.Ect[--this.Ag]}}}{const ro=self.Ls;ro.Yft=class extends ro.qn{constructor(t){super(),this.hft=t,this.Jc=this.hft.w4(),this.Ect=[],this.Ag=-1}Kn(){ro.Nh(this.Ect),this.hft=null,this.Jc=null}DO(){return this.hft}w4(){return this.Jc}Vft(){return 0<=this.Ag}Jft(){return this.Ect[this.Ag]}m6(){if(++this.Ag,this.Ag===this.Ect.length){const t=ro.Xn(ro.Hft,this);return this.Ect.push(t),t}{const s=this.Ect[this.Ag];return s.Hf(),s}}C6(){--this.Ag}qft(s){const i=this.Ect;for(let t=this.Ag;0<=t;--t){const e=i[t];if(e.kc()===s)return e}return null}Zft(){return this.Ect.slice(0,this.Ag+1)}}}{const ho=self.Ls;ho.Hft=class extends ho.qn{constructor(t){super(),this.Xft=t,this.er="",this.Ag=0,this.Kft=!1,this.$ft=NaN}Hf(){this.er="",this.Ag=0,this.Kft=!1,this.$ft=NaN}y6(t){this.er=t}kc(){return this.er}v6(t){this.Ag=t}$L(){return this.Ag}tB(){this.Kft=!0}I6(){return this.Kft}t0t(t){this.$ft=t}s0t(){return this.$ft}}}{const oo=self.Ls;oo.i0t=class extends oo.qn{constructor(){super(),this.Ect=[],this.Ag=-1}Kn(){oo.Nh(this.Ect)}Jft(){return this.Ect[this.Ag]}m6(){if(++this.Ag,this.Ag!==this.Ect.length)return this.Ect[this.Ag];{const t=[];return this.Ect.push(t),t}}C6(){--this.Ag}}}{let t=function(t,s){return t.$L()-s.$L()},r=function(i,e){for(let t=0,s=i.length;t<s;++t)if(i[t]!==e[t])return!1;return!0};t,r;const I=self.Ls;I.e0t=class extends I.qn{constructor(t){super(),this.Jc=t,this.n0t=[],this.r0t=new Map,this.h0t=[],this.o0t=new Map,this.a0t=new Map,this.u0t=new Map,this.l0t=new Map,this.c0t=new Map,this.f0t=new Map,this.d0t=0,this.p0t=[],this.m0t=[],this.g0t=[],this.y0t=new Map,this.M0t=new Map,this.Pct=I.Xn(I.rft,this),this.w0t=I.Xn(I.Uft,this),this.Xft=I.Xn(I.Yft,this),this.S0t=[],this.T0t=[],this.b0t=[],this.v0t=0,this.x0t=0,this.I0t=0,this.C0t=[],this.G0t=[],this.N0t=[],this.E0t=new Map,this.D0t=new Map,self.c3_callFunction=(t,s)=>this._0t(t,s)}Kn(){this.Y9(),this.Pct.Kn(),this.Pct=null,this.w0t.Kn(),this.w0t=null,I.Nh(this.T0t),I.Nh(this.b0t),this.Jc=null,I.Nh(this.n0t),this.r0t.clear()}_b(t){const s=I.Xn(I.A0t,this,t);this.n0t.push(s),this.r0t.set(s.kc().toLowerCase(),s)}L0t(t){this.S0t.push(t)}O0t(){for(const t of this.M0t.values())t.R0t();for(const s of this.y0t.values())s.O0t();for(const i of this.M0t.values())i.O0t();for(const e of this.n0t)e.O0t();for(const n of this.n0t)n.d9();for(const r of this.S0t)r.O0t(!1);I.Nh(this.S0t),this.w0t.Qft(this.g0t)}w4(){return this.Jc}f9(t){return this.r0t.get(t.toLowerCase())||null}P0t(t){this.h0t.push(t),this.o0t.set(t.k0t(),t)}F0t(t){this.a0t.set(t.NY(),t)}j0t(t){this.u0t.set(t.NY(),t)}z0t(t){this.l0t.set(t.NY(),t)}B0t(t){switch(t.U0t()){case 0:this.y0t.set(t.W0t().toLowerCase(),t);break;case 1:this.M0t.set(t.W0t().toLowerCase(),t)}}Q0t(t){this.f0t.set(t.NY(),t),(t.rY()?this.p0t:this.m0t).push(t)}J0t(i){2<=i.length&&i.sort(t);let e=this.c0t.get(i.length);e||(e=[],this.c0t.set(i.length,e));for(let t=0,s=e.length;t<s;++t){const n=e[t];if(r(i,n))return n}return e.push(i),i}Y0t(t){return this.g0t.push(t.V0t()),this.d0t++}WO(){return this.Pct}H0t(){return this.WO().p6()}PO(){return this.H0t().PO()}q0t(){const t=this.H0t(),s=t.PO();return s.Z0t(t.Ift())}X0t(){const t=this.H0t(),s=t.PO();return s.K0t(t.Gft())}$0t(){return this.w0t}g6(){return this.Xft}t1t(t){const s=[];for(t=t.s1t();t;)I.zn(s,t.i1t()),t=t.s1t();return s}e1t(t){const s={};for(const i of this.t1t(t))s[i.n1t()]=i.r1t();return Object.create(Object.prototype,s)}h1t(t){return this.f0t.get(t)||null}o1t(t){return this.a0t.get(t)||null}a1t(t){return this.u0t.get(t)||null}u1t(t){return this.l0t.get(t)||null}_O(t){return this.y0t.get(t.toLowerCase())||null}l1t(t,s){let i=this.M0t.get((t.kc()+"."+s).toLowerCase());if(i)return i;if(!t.SY())for(const e of t.c1t())if(i=this.M0t.get((e.kc()+"."+s).toLowerCase()))return i;return null}f1t(){return this.p0t}d1t(){return this.m0t}p1t(t){for(const s of this.p0t)s.m1t();if(t)for(const i of this.m0t)i._2()&&i.m1t()}g1t(t){return this.o0t.get(t.toLowerCase())||null}y1t(t){const s=this.a0t.get(t);return s&&s.M1t()?s:null}w1t(){return this.h0t}S1t(){for(const t of this.h0t)t.T1t()}b1t(){for(const t of this.n0t)t.v1t()}x1t(t){this.b1t(),this.v0t++;for(const s of t.Aq()){const i=s.j7();i&&(this.Jc.I1t(s),i.oC(),this.Jc.C1t())}this.v0t--}async G1t(t){this.b1t(),this.v0t++;for(const s of this.N1t(t))await this.Jc.E1t(s);this.v0t--}*N1t(t){for(const s of t.Aq()){const i=s.j7();i&&(this.Jc.I1t(s),yield*i.D1t(),this.Jc.C1t())}}_1t(t,s,i,e){let n=!1;if(!t.G3())return this.A1t(s,i,e);this.x0t++;for(const r of t.Aq()){const h=r.j7();if(h){this.Jc.I1t(r);for(const a of h.L1t()){const u=a._1t(s,i,e);n=n||u}const o=h._1t(s,i,e);n=n||o,this.Jc.C1t()}}return this.x0t--,n}*O1t(t,s,i,e){let n=!1;if(!t.G3())return this.A1t(s,i,e);this.x0t++;for(const r of t.Aq()){const h=r.j7();if(h){this.Jc.I1t(r);for(const a of h.L1t()){const u=yield*a.O1t(s,i,e);n=n||u}const o=yield*h.O1t(s,i,e);n=n||o,this.Jc.C1t()}}return this.x0t--,n}A1t(t,s,i){return this.T0t.push([t,s,i]),!1}R1t(t,s,i){let e=null,n=new Promise(t=>e=t);return this.b0t.push([t,s,i,e]),n}*P1t(){if(this.Jc.k1t())throw new Error("should not be in breakpoint");const t=this.Jc.D3();for(;this.b0t.length;){const[s,i,e,n]=this.b0t.shift(),r=yield*this.O1t(t,s,i,e);n(r)}}async F1t(){for(const t of this.P1t())await this.Jc.E1t(t)}j1t(t,i,e,n){let r=!1,s=t.G3(),h=s.j7();if(h){this.x0t++,this.Jc.I1t(s);const o=h.L1t();for(let t=0,s=o.length;t<s;++t){const u=o[t].j1t(i,e,n);r=r||u}const a=h.j1t(i,e,n);return r=r||a,this.Jc.C1t(),this.x0t--,r}}*z1t(t,i,e,n){let r=!1,s=t.G3(),h=s.j7();if(h){this.x0t++,this.Jc.I1t(s);const o=h.L1t();for(let t=0,s=o.length;t<s;++t){const u=yield*o[t].z1t(i,e,n);r=r||u}const a=yield*h.z1t(i,e,n);return r=r||a,this.Jc.C1t(),this.x0t--,r}}B1t(){return this.x0t}U1t(){return 0<this.B1t()}W1t(){return++this.x0t}Q1t(){--this.x0t}J1t(){return 0<this.v0t}bP(){return this.J1t()||this.U1t()}R9(t){for(const[s,i,e]of this.T0t)this._1t(t,s,i,e);I.Nh(this.T0t)}SP(t){t?this.I0t++:this.I0t--}yF(){return 0<this.I0t}Y1t(i){for(let t=0,s=i.length;t<s;++t)i[t].V1t().zl()}H1t(i){for(let t=0,s=i.length;t<s;++t)i[t].V1t().Lct()}S6(i){for(let t=0,s=i.length;t<s;++t)i[t].V1t().Oct()}b6(i){for(let t=0,s=i.length;t<s;++t)i[t].V1t().C6()}kO(s){const i=new Set,e=this.Pct.uft(),n=this.Pct.lft();for(let t=0;t<=n;++t){const r=e[t].Bft();if(r)for(const h of r)s&&s.has(h)||i.add(h)}return i}q1t(t){const s=new Set([...t]),i=this.kO(s);if(0<i.size){for(const e of i)e.V1t().Lct();return[...i]}return null}Z1t(){const t=I.Xn(I.X1t,this);return this.C0t.push(t),t}K1t(){return this.C0t}$1t(){if(this.C0t.length){let i=this.H0t(),e=!1;this.v0t++;for(let t=0,s=this.C0t.length;t<s;++t){const n=this.C0t[t];n.tdt()&&n.sdt(i),n.idt()&&(e=!0)}e&&(this.edt(),i.Hf(null)),this.v0t--}}async ndt(){if(this.C0t.length){let i=this.H0t(),e=!1;this.v0t++;for(let t=0,s=this.C0t.length;t<s;++t){const n=this.C0t[t];n.tdt()&&await n.rdt(i),n.idt()&&(e=!0)}e&&(this.edt(),i.Hf(null)),this.v0t--}}edt(){const t=I.Ph(this.C0t,t=>t.idt());for(const s of t)s.Kn()}Y9(){for(const t of this.C0t)t.Kn();I.Nh(this.C0t)}hdt(t){for(const s of this.C0t)s.Rct(t);for(const i of t){const e=this.D0t.get(i);if(this.D0t.delete(i),e)for(const{resolve:n}of e.odt.values())n(!0)}}adt(t){this.G0t.push({promise:t,udt:this.B1t()})}ldt(){I.Nh(this.G0t)}cdt(){const s=this.B1t();this.G0t=this.G0t.filter(t=>t.udt<=s)}fdt(){const t=Promise.all(this.G0t.map(t=>t.promise));return this.G0t=[],t}YO(t){const s=t.toLowerCase();this.N0t.push(s),this.Jc.HF(I.O9.L9.A9.ddt,null),this.N0t.pop();for(const e of this.Jc.DO().K1t())e.pdt()&&e.mdt()===s&&e.gdt();const i=this.E0t.get(s);i&&(i.resolve(),this.E0t.delete(s))}HO(t){const i=t.toLowerCase(),s=this.E0t.get(i);if(s)return s.promise;{let s=null,t=new Promise(t=>s=t);return this.E0t.set(i,{promise:t,resolve:s}),t}}ydt(){if(0===this.N0t.length)throw new Error("not in a signal");return this.N0t.at(-1)}Mdt(t){let s=this.D0t.get(t);return s||(s={wdt:[],odt:new Map},this.D0t.set(t,s)),s}OF(t,s){const i=this.Mdt(t),e=s.toLowerCase();i.wdt.push(e),this.Jc.HF(t.iP().Tdt().A9.Sdt,t),i.wdt.pop();for(const r of this.Jc.DO().K1t())r.bdt()&&r.mdt()===e&&r.vdt(t);const n=i.odt.get(e);n&&(n.resolve(!1),i.odt.delete(e)),0===i.wdt.length&&0===i.odt.size&&this.D0t.delete(t)}RF(t,s){const i=this.Mdt(t),e=s.toLowerCase(),n=i.odt.get(e);if(n)return n.promise;{let s=null,t=new Promise(t=>s=t);return i.odt.set(e,{promise:t,resolve:s}),t}}xdt(t){const s=this.Mdt(t);if(s&&0!==s.wdt.length)return s.wdt.at(-1);throw new Error("not in a signal")}QH(){return{groups:this.Idt(),cnds:this.Cdt(),acts:this.Gdt(),vars:this.Ndt(),waits:this.Edt()}}JH(t){this.Ddt(t.groups),this._dt(t.cnds),this.Adt(t.acts),this.Ldt(t.vars),this.Odt(t.waits)}Idt(){const t={};for(const s of this.w1t())t[s.NY().toString()]=s.Rdt();return t}Ddt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),n=this.y1t(e);n&&n.Pdt(i)}}Cdt(){const t={};for(const[s,i]of this.u0t){const e=i.QH();e&&(t[s.toString()]=e)}return t}_dt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[n,r]of this.u0t)r.JH(s.get(n)||null)}Gdt(){const t={};for(const[s,i]of this.l0t){const e=i.QH();e&&(t[s.toString()]=e)}return t}Adt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[n,r]of this.l0t)r.JH(s.get(n)||null)}Ndt(){const t={};for(const[s,i]of this.f0t)i.kdt()||!i.rY()&&!i._2()||(t[s.toString()]=i.Vit());return t}Ldt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),n=this.h1t(e);n&&n.Aet(i)}}Edt(){return this.C0t.filter(t=>!t.Fdt()).map(t=>t.QH())}Odt(t){this.Y9();for(const s of t){const i=I.X1t.jdt(this,s);i&&this.C0t.push(i)}}zdt(){return[...this.Jc.D3().Aq()].map(t=>t.j7()).filter(t=>t).map(t=>t.Bdt())}Udt(t){for(;t;){const s=t.s1t();if(s instanceof I.Wdt)return s;t=s}return null}_0t(t,s){Array.isArray(s)||(s=[]);const i=this._O(t.toLowerCase());if(!i)return null;if(!i.kl())return i.AO();const e=i.Qdt();if(s.length<e.length)for(s=s.slice(0);s.push(e[s.length].V0t()),s.length<e.length;);const n=i.OO();return n.FO(n.RO(),!1,i.zO(),i.AO(),...s)}}}{const ao=self.Ls;ao.A0t=class extends ao.qn{constructor(t,s){super(),this.hft=t,this.Jc=t.w4(),this.er=s[0],this.Jdt=[],this.Ydt=new Map,this.Vdt=new Map,this.Hdt=new Map,this.qdt=!1,this.Zdt=[],this.Xdt=[],this.Kdt=new Set;for(const i of s[1])this.$dt(i,null,this.Jdt);this.tpt=this.Jc.fq()?{type:"sheet",name:this.er,spt:0,children:[]}:null}Kn(){this.hft=null,this.Jc=null}$dt(t,s,i){switch(t[0]){case 0:case 3:this.ipt(t,s,i);break;case 1:this.ept(t,s,i);break;case 2:this.npt(t,s,i);break;case 4:this.rpt(t,s);break;case 5:this.hpt(t,s,i);break;case 6:this.opt(t,s);break;default:throw new Error("invalid event type")}}ipt(t,s,i){const e=ao.apt._b(this,s,t);if(e.nft()){i.push(e);const n=e.upt();for(let t=0,s=n.length;t<s;++t)n[t].lpt()&&this.cpt(e,t)}else e.lpt()?this.cpt(e,0):i.push(e)}rpt(t,s){const i=ao.Wdt.fpt(this,s,t);this.hft.B0t(i)}opt(t,s){const i=ao.Wdt.dpt(this,s,t);this.hft.B0t(i)}ept(t,s,i){const e=ao.ppt._b(this,s,t);i.push(e)}npt(t,s,i){const e=ao.mpt._b(this,s,t);i.push(e)}hpt(t,s,i){const e=ao.gpt._b(this,s,t);i.push(e)}cpt(n,r){n.nft()||this.hft.L0t(n);const h=n.Z0t(r),o=h.ypt(),a=h.uF();if(h.Mpt()){let t=this.Vdt.get(a),s=(t||(t=new Map,this.Vdt.set(a,t)),h.wpt().toLowerCase()),i=t.get(o),e=(i||(i=new Map,t.set(o,i)),i.get(s));e||(e=[],i.set(s,e)),e.push([n,r])}else{let t=this.Ydt.get(a),s=(t||(t={Spt:new Map,Tpt:new Map},this.Ydt.set(a,t)),h.ez()),i,e=(s?(i=t.Tpt.get(s))||(i=new Map,t.Tpt.set(s,i)):i=t.Spt,i.get(o));e||(e=[],i.set(o,e)),e.push([n,r])}}O0t(){const i=this.Jdt;for(let t=0,s=i.length;t<s;++t){const e=t<s-1&&i[t+1]instanceof ao.apt&&i[t+1].bpt();i[t].O0t(e)}}vpt(t){this.Zdt.push(t)}d9(){ao.Nh(this.Xdt),this.xpt(this),this.Kdt.clear()}xpt(t){const s=t.Xdt,i=t.Kdt;for(const e of this.Zdt){const n=e.Ipt();e.Cpt()&&t!==n&&!i.has(n)&&(i.add(n),n.xpt(t),s.push(n))}}L1t(){return this.Xdt}DO(){return this.hft}w4(){return this.Jc}kc(){return this.er}Gpt(t,s){this.Hdt.set(s,t)}Npt(t){return this.Hdt.get(t)||null}v1t(){this.qdt=!1}oC(){if(!this.qdt){const t=this.Jc,s=t.Ept(),i=s?performance.now():0,e=(this.qdt=!0,this.DO()),n=e.H0t();for(const r of this.Jdt)r.oC(n),e.Y1t(r.d6()),e.ldt(),t.xP();n.Hf(null),s&&(this.tpt.spt+=performance.now()-i)}}*D1t(){if(!this.qdt){this.qdt=!0;const t=this.Jc,s=this.DO(),i=s.H0t();for(const e of this.Jdt)yield*e.D1t(i),s.Y1t(e.d6()),s.ldt(),t.xP();i.Hf(null)}}_1t(e,n,r){if(!n)return this.Dpt(e,n,null,null);{let t=n.uF(),s=!1,i=this.Dpt(e,n,t,r);s=s||i;for(const h of t.c1t())i=this.Dpt(e,n,h,r),s=s||i}}Dpt(t,s,i,e){const n=this.Ydt.get(i);if(!n)return!1;const r=e?n.Tpt.get(e):n.Spt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[a,u]of h){const l=this._pt(s,a,u);o=o||l}return o}*O1t(e,n,r){if(!n)return yield*this.Apt(e,n,null,null);{let t=n.uF(),s=!1,i=yield*this.Apt(e,n,t,r);s=s||i;for(const h of t.c1t())i=yield*this.Apt(e,n,h,r),s=s||i}}*Apt(t,s,i,e){const n=this.Ydt.get(i);if(!n)return!1;const r=e?n.Tpt.get(e):n.Spt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[a,u]of h){let t;t=a.Lpt()?this._pt(s,a,u):yield*this.Opt(s,a,u),o=o||t}return o}j1t(t,s,i){const e=s.uF(),n=this.Vdt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const a=h[t],u=this._pt(null,a[0],a[1]);o=o||u}return o}*z1t(t,s,i){const e=s.uF(),n=this.Vdt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let n=0,t=h.length;n<t;++n){let t=h[n],s=t[0],i=t[1],e;e=s.Lpt()?this._pt(null,s,i):yield*this.Opt(null,s,i),o=o||e}return o}_pt(t,s,i){let e=this.Jc,n=this.hft,r=n.PO(),h=n.WO(),o=n.B1t(),a=!1;r&&n.H1t(r.RO()),n.H1t(s.RO());const u=1<o,l=(u&&n.$0t().m6(),h.m6(s));if(t){const f=s.upt()[i].uF(),d=f.pP();d.Zct(t),t.TF()&&t.Rpt()}let c=!0;if(s.Xj()){const p=s.Ppt();for(let t=0,s=p.length;t<s;++t)if(!p[t].kpt(l)){c=!1;break}}return c&&(s.nft()?s.Fpt(l,i):s.oC(l),a=l.Dft()),h.C6(),u&&n.$0t().C6(),n.b6(s.RO()),r&&n.b6(r.RO()),r||1!==o||(n.ldt(),n.yF())||e.xP(),a}*Opt(t,s,i){let e=this.Jc,n=this.hft,r=n.PO(),h=n.WO(),o=n.B1t(),a=!1;r&&n.H1t(r.RO()),n.H1t(s.RO());const u=1<o,l=(u&&n.$0t().m6(),h.m6(s));if(t){const f=s.upt()[i].uF(),d=f.pP();d.Zct(t),t.TF()&&t.Rpt()}let c=!0;if(s.Xj()){const p=s.Ppt();for(let t=0,s=p.length;t<s;++t)if(!(yield*p[t].jpt(l))){c=!1;break}}return c&&(s.nft()?yield*s.zpt(l,i):yield*s.D1t(l),a=l.Dft()),h.C6(),u&&n.$0t().C6(),n.b6(s.RO()),r&&n.b6(r.RO()),r||1!==o||(n.ldt(),n.yF())||e.xP(),a}Bdt(){return this.tpt}}}{let l=function(t,s){return!0};l;const uo=self.Ls,lo=[];function*z(t,s){return!0}uo.apt=class extends uo.qn{constructor(t,s,i){super(),this.n7=t,this.Jc=t.w4(),this.Bpt=s,this.Upt=null,this.Pct=this.Jc.DO().WO(),this.Wpt=[],this.Qpt=[],this.Jpt=!1,this.Ypt=!1,this.Vpt=!1,this.Hpt=!1,this.qpt=!!i[2],this.Zpt=!1,this.Xpt=null,this.Kpt=[],this.fnt=[],this.$pt=[],this.tmt=l,this.smt=z,this.imt=!1,this.emt=!1,this.nmt="",this.rmt=!1,this.hmt=null,this.tpt=null,this.H8=i[4],this.omt=i[5],this.n7.Gpt(this,this.omt),this.amt=this.Jc.fq()?{umt:i[3][0],lmt:i[3][1],cmt:!1,fmt:!1,dmt:!1,pmt:!1}:null,this.DO().F0t(this),3===i[0]&&this.mmt(i[1]);let e=0;for(const n of i[6]){const r=uo.gmt._b(this,n,e++);this.Kpt.push(r),this.ymt(r.uF())}e=0;for(const h of i[7]){const o=uo.Mmt._b(this,h,e++);this.fnt.push(o)}if(9===i.length){const a=i[8];for(const u of a)this.n7.$dt(u,this,this.$pt)}this.Kpt.length&&(this.Zpt=null===this.Kpt[0].uF()&&this.Kpt[0].ypt()===uo.O9.L9.A9.wmt),0===this.Kpt.length&&(this.Kpt=lo),0===this.fnt.length&&(this.fnt=lo),0===this.$pt.length&&(this.$pt=lo)}static _b(t,s,i){return uo.Xn(uo.apt,t,s,i)}mmt(t){this.imt=!0,this.emt=!!t[0],this.rmt=this.emt,this.nmt=t[1].toLowerCase(),this.hmt=[],this.DO().P0t(this),this.Jc.fq()&&(this.tpt={type:"group",name:t[1],spt:0,children:[]})}Smt(t){this.hmt.push(t)}Tmt(t,s){for(const i of t.K7().F9())s.includes(i)||s.push(i)}bmt(t,s){if(t)if(s.includes(t)||s.push(t),t.SY())for(const i of t.vmt())i.TF()&&this.Tmt(i,s);else t.TF()&&this.Tmt(t,s)}ymt(t){this.bmt(t,this.Wpt)}xmt(t){this.bmt(t,this.Qpt)}Imt(){this.Wpt=this.Jc.wY()}O0t(t){this.Hpt=!!t,this.Cmt(),this.Gmt();for(const s of this.Kpt)s.O0t();if(0<this.fnt.length){let t=!1;for(const e of this.fnt)e.O0t(),e.Nmt()&&(t=!0);t?(this.tmt=this.Emt,this.smt=this.Dmt):(this.tmt=this._mt,this.smt=this.Amt)}const i=this.$pt;for(let t=0,s=i.length;t<s;++t){const n=t<s-1&&i[t+1]instanceof uo.apt&&i[t+1].bpt();i[t].O0t(n)}this.amt&&this.Lmt(),this.tpt&&this.Omt().Bdt().children.push(this.tpt)}Bdt(){return this.tpt}Omt(){let t=this.Xj();for(;t;){if(t.M1t())return t;t=t.Xj()}return this.n7}Lmt(){const t=this.amt;t.cmt=this.Kpt.every(t=>t.Lpt()),t.fmt=this.fnt.every(t=>t.Lpt()),t.dmt=this.$pt.every(t=>t.Lpt()),t.pmt=t.cmt&&t.fmt&&t.dmt}Rmt(){let t=this;for(;t.Lmt(),t=t.Xj(););}Cmt(){if(this.M1t()){let t=this.Xj();for(this.Vpt=!0;t;){if(!t.M1t()){this.Vpt=!1;break}t=t.Xj()}}}Pmt(){const t=this.Jc.wY();if(this.Wpt===t)this.Qpt=t;else{this.Qpt=uo.zh(this.Wpt);let t=this.Xj();for(;t;){for(const i of t.Wpt)this.xmt(i);t=t.Xj()}const s=this.DO();this.Wpt=s.J0t(this.Wpt),this.Qpt=s.J0t(this.Qpt)}}Gmt(){if(this.kmt()){this.Xpt=[];let t=this.Xj();for(;t;)this.Xpt.push(t),t=t.Xj();this.Xpt.reverse()}}Fmt(){this.Ypt=!0,this.Bpt&&this.Bpt.Fmt()}Fft(){return this.Ypt}d6(){return this.Wpt}RO(){return this.Jpt||(this.Jpt=!0,this.Pmt()),this.Qpt}jmt(t){return this.Wpt.includes(t)}Ppt(){return this.Xpt}j7(){return this.n7}DO(){return this.n7.DO()}w4(){return this.Jc}Xj(){return this.Bpt}zmt(t){this.Upt=t}s1t(){return this.Upt||this.Bpt}Bmt(){return this.omt}Umt(){return this.amt&&this.amt.lmt}Wmt(){return this.Umt()&&this.amt.umt}Qmt(t){this.amt.umt=!!t,this.Rmt()}M1t(){return this.imt}Jmt(){return this.Vpt}bpt(){return this.Zpt}Ymt(){return this.Hpt}k0t(){return this.nmt}Rdt(){return this.rmt}T1t(){this.Pdt(this.emt)}Pdt(t){if(t=!!t,!this.imt)throw new Error("not a group");if(this.rmt!==t){this.rmt=t;for(const s of this.hmt)s.Vmt();if(this.hmt.length){const i=this.Jc.H3(),e=i.j7();e&&e.d9()}}}NY(){return this.H8}nft(){return this.qpt}lpt(){return this.Kpt.length&&this.Kpt[0].lpt()}Hmt(){return this.Upt&&this.Upt instanceof uo.Wdt}kmt(){return this.Hmt()||this.Kpt.some(t=>t.lpt())}upt(){return this.Kpt}jft(){return this.Kpt.length}Z0t(t){if((t=Math.floor(t))<0||t>=this.Kpt.length)throw new RangeError("invalid condition index");return this.Kpt[t]}qmt(t){return this.Z0t(t)}Zmt(t){let s=t.$L();if(0!==s){--s;const i=t.Xmt()?t.Kmt():t.uF();for(;0<=s;--s){const e=this.Kpt[s];if(i===e.uF()||e.Xmt()&&e.Kmt()===i)return!1}}return!0}$mt(){return this.fnt}tgt(){return this.fnt.length}K0t(t){if((t=Math.floor(t))<0||t>=this.fnt.length)throw new RangeError("invalid action index");return this.fnt[t]}sgt(s){s=Math.floor(s);const t=this.fnt.find(t=>t.igt()===s);if(t)return t;throw new RangeError("invalid action debug index")}egt(t){return 0<=(t=Math.floor(t))&&t<this.fnt.length}ngt(){return this.$pt}i1t(){return this.$pt.filter(t=>t instanceof uo.ppt)}kpt(i){i.xft(this);let e=this.Kpt,n=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.Cft(t),r.yz())throw new Error("trigger cannot be used as sub-event to a loop");if(r.oC())n=!0;else if(!this.qpt)return!1}return!this.qpt||n}Fpt(t,s){t.xft(this),t.Cft(s),this.Kpt[s].oC()&&(this.tmt(t,0)&&this.rgt(t),t.Eft(!0))}*jpt(i){i.xft(this);let e=this.Kpt,n=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.Cft(t),r.yz())throw new Error("trigger cannot be used as sub-event to a loop");if(r.Lpt()?r.oC():yield*r.D1t())n=!0;else if(!this.qpt)return!1}return!this.qpt||n}*zpt(t,s){t.xft(this),t.Cft(s);let i=this.Kpt[s];if(i.Lpt()?i.oC():yield*i.D1t())(this.hgt()?this.tmt(t,0):yield*this.smt(t,0))&&(this.ogt()?this.rgt():yield*this.agt()),t.Eft(!0)}oC(t){t.xft(this),this.Zpt||t._ft(!1),this.qpt?this.ugt(t):this.lgt(t)}*D1t(t){(this.Wmt()||this.Jc.cgt())&&(yield this),t.xft(this),this.Zpt||t._ft(!1),this.qpt?yield*this.fgt(t):yield*this.dgt(t)}ugt(i){let e=this.Kpt,n=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(!r.lpt()){i.Cft(t);const h=r.oC();n=n||h}}i.Eft(n),n&&(this.tmt(i,0)&&this.rgt(i),this.Hpt)&&i._ft(!0)}*fgt(i){let e=this.Kpt,n=0===e.length;for(let s=0,t=e.length;s<t;++s){const r=e[s];if(!r.lpt()){i.Cft(s);let t;t=r.Lpt()?r.oC():yield*r.D1t(),n=n||t}}if(i.Eft(n),n)(this.hgt()?this.tmt(i,0):yield*this.smt(i,0))&&(this.ogt()?this.rgt():yield*this.agt()),this.Hpt&&i._ft(!0)}lgt(i){const e=this.Kpt;for(let t=0,s=e.length;t<s;++t){const n=e[t],r=(i.Cft(t),n.oC());if(!r)return void i.Eft(!1)}i.Eft(!0),this.tmt(i,0)&&this.rgt(i),i.Dft()&&this.Hpt&&i._ft(!0)}*dgt(i){const e=this.Kpt;for(let t=0,s=e.length;t<s;++t){const n=e[t];i.Cft(t);if(!(n.Lpt()?n.oC():yield*n.D1t()))return void i.Eft(!1)}i.Eft(!0);(this.hgt()?this.tmt(i,0):yield*this.smt(i,0))&&(this.ogt()?this.rgt():yield*this.agt()),i.Dft()&&this.Hpt&&i._ft(!0)}_mt(i,e){const n=this.fnt;for(let t=e,s=n.length;t<s;++t){const r=n[t];i.Nft(t),r.oC()}return!0}*Amt(i,e){const n=this.fnt;for(let t=e,s=n.length;t<s;++t){const r=n[t];i.Nft(t),r.Lpt()?r.oC():yield*r.D1t()}return!0}Emt(i,e){const n=this.DO(),r=this.fnt;for(let t=e,s=r.length;t<s;++t){const h=r[t],o=(i.Nft(t),h.oC());if(h.pgt()&&!0===o)return!1;h.mgt()&&o instanceof Promise&&n.adt(o)}return!0}*Dmt(i,e){const n=this.DO(),r=this.fnt;for(let s=e,t=r.length;s<t;++s){const h=r[s];i.Nft(s);let t;if(t=h.Lpt()?h.oC():yield*h.D1t(),h.pgt()&&!0===t)return!1;h.mgt()&&t instanceof Promise&&n.adt(t)}return!0}ggt(t){this.tmt(t,t.Gft())&&this.rgt()}*ygt(t){(yield*this.smt(t,t.Gft()))&&(yield*this.agt())}rgt(){if(this.$pt.length){const t=this.M1t()&&this.Jc.Ept(),s=t?performance.now():0,i=this.Pct,e=i.m6(this);this.Ypt?this.Mgt(e):this.wgt(e),i.C6(),t&&(this.tpt.spt+=performance.now()-s)}}Mgt(e){const n=this.imt,r=this.Vpt,h=this.DO(),o=this.$pt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],u=a.d6(),l=!r||!n&&t<i;l&&h.S6(u),a.oC(e),l?h.b6(u):h.Y1t(u)}}wgt(i){const e=this.$pt;for(let t=0,s=e.length;t<s;++t)e[t].oC(i)}*agt(){if(this.$pt.length){const t=this.Pct,s=t.m6(this);this.Ypt?yield*this.Sgt(s):yield*this.Tgt(s),t.C6()}}*Sgt(e){const n=this.imt,r=this.Vpt,h=this.DO(),o=this.$pt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],u=a.d6(),l=!r||!n&&t<i;l&&h.S6(u),yield*a.D1t(e),l?h.b6(u):h.Y1t(u)}}*Tgt(i){const e=this.$pt;for(let t=0,s=e.length;t<s;++t)yield*e[t].D1t(i)}T6(i,e){e.vft();const n=this.Kpt;if(!this.nft())for(let t=i.Ift()+1,s=n.length;t<s;++t){const r=n[t],h=(e.Cft(t),r.oC());if(!h)return!1}return this.tmt(e,0)&&this.rgt(e),!0}*bgt(i,e){e.vft();const n=this.Kpt;if(!this.nft())for(let t=i.Ift()+1,s=n.length;t<s;++t){const r=n[t];e.Cft(t);if(!(r.Lpt()?r.oC():yield*r.D1t()))return!1}return(this.hgt()?this.tmt(e,0):yield*this.smt(e,0))&&(this.ogt()?this.rgt():yield*this.agt()),!0}Lpt(){return!this.Wmt()&&!this.Jc.cgt()&&this.amt.pmt}hgt(){return!this.Jc.cgt()&&this.amt.fmt}ogt(){return!this.Jc.cgt()&&this.amt.dmt}vgt(i){if(this.Xj()){const e=this.Ppt();for(let t=0,s=e.length;t<s;++t)if(!e[t].kpt(i))return!1}return!0}*xgt(i){if(this.Xj()){const e=this.Ppt();for(let t=0,s=e.length;t<s;++t)if(!(yield*e[t].jpt(i)))return!1}return!0}Igt(t,s,i){if(0<s.length)if(i){const e=s.map(t=>t.Xs(0));t.$0t().m6(),this.Upt.Cgt(e)}else this.Upt.Ggt(s);else i&&t.$0t().m6()}Ngt(t,s,i,e){let n,r,h=0<t.length,o=null,a=this.Jc,u=this.Pct,l=a.DO(),c=this.Upt,f=c.mgt(),d=l.W1t(),p=1<d;if(this.Igt(l,s,p),h&&(i?l.S6(t):l.H1t(t)),null!==e){if(e.Egt){const g=i?e.Egt.pP():e.Egt.V1t().Act(),y=e.Dgt.pP();y.Xct(g.dP()),y.ift(),i||e.Dgt._gt()}else if(e.Agt){const M=e.Agt.pP();M.Xct(e.Lgt),M.ift()}e.Ogt&&(o=l.q1t(t))}const m=u.m6(this);return i&&m.zft(t),this.vgt(m)&&(m.xft(this),f&&([r,n]=c.Rgt()),this.lgt(m),f)&&c.Pgt(r),u.C6(),p&&l.$0t().C6(),null!==o&&l.b6(o),h&&l.b6(t),l.Q1t(),f||l.cdt(),n}*kgt(t,s,i,e){let n,r,h=((this.Wmt()||this.Jc.cgt())&&(yield this),0<t.length),o=null,a=this.Jc,u=this.Pct,l=a.DO(),c=this.Upt,f=c.mgt(),d=l.W1t(),p=1<d;if(this.Igt(l,s,p),h&&(i?l.S6(t):l.H1t(t)),null!==e){if(e.Egt){const g=i?e.Egt.pP():e.Egt.V1t().Act(),y=e.Dgt.pP();y.Xct(g.dP()),y.ift(),i||e.Dgt._gt()}else if(e.Agt){const M=e.Agt.pP();M.Xct(e.Lgt),M.ift()}e.Ogt&&(o=l.q1t(t))}const m=u.m6(this);return i&&m.zft(t),(yield*this.xgt(m))&&(m.xft(this),f&&([r,n]=c.Rgt()),yield*this.dgt(m),f)&&c.Pgt(r),u.C6(),p&&l.$0t().C6(),null!==o&&l.b6(o),h&&l.b6(t),l.Q1t(),f||l.cdt(),n}Fgt(t,s){const i=this.RO(),e=0<i.length,n=this.Jc,r=this.Pct,h=n.DO(),o=h.W1t(),a=1<o,u=(a&&h.$0t().m6(),this.Upt.Cgt(t),e&&(s?h.S6(i):h.H1t(i)),r.m6(this));this.vgt(u)&&(u.xft(this),this.lgt(u)),r.C6(),a&&h.$0t().C6(),e&&h.b6(i),h.Q1t(),h.cdt()}*jgt(t,s){(this.Wmt()||this.Jc.cgt())&&(yield this);const i=this.RO(),e=0<i.length,n=this.Jc,r=this.Pct,h=n.DO(),o=h.W1t(),a=1<o,u=(a&&h.$0t().m6(),this.Upt.Cgt(t),e&&(s?h.S6(i):h.H1t(i)),r.m6(this));(yield*this.xgt(u))&&(u.xft(this),yield*this.dgt(u)),r.C6(),a&&h.$0t().C6(),e&&h.b6(i),h.Q1t(),h.cdt()}FO(t,s,i,e,...n){let r,h,o=0<t.length,a=this.Jc,u=this.Pct,l=a.DO(),c=this.Upt,f=c.mgt(),d=l.W1t(),p=1<d,m=(p&&l.$0t().m6(),0<n.length&&this.Upt.Cgt(n),o&&(s?l.S6(t):l.H1t(t)),u.m6(this));return m.Rft(i,e),u.cft(m),a.M6(!1),this.vgt(m)&&(m.xft(this),f&&([h,r]=c.Rgt()),this.lgt(m),f)&&c.Pgt(h),a.M6(!0),u.C6(),u.fft(),p&&l.$0t().C6(),o&&l.b6(t),l.Q1t(),f||l.cdt(),r||m.Pft()}}}{let e=self.Ls,t=[],s=!1;e.gpt=class extends e.qn{constructor(t,s,i){super();const e=t.w4(),n=t.DO(),r=(this.n7=t,this.hft=n,this.Jc=t.w4(),this.Bpt=s,e.zgt(i[1]));this.Bgt=r,this.omt=i[2],this.n7.Gpt(this,this.omt),this.amt=e.fq()?{umt:i[3][0],lmt:i[3][1]}:null}static _b(t,s,i){return e.Xn(e.gpt,t,s,i)}O0t(){const t=this.Bgt,s=this.Jc.DO().e1t(this);this.Bgt=t.bind(null,this.Jc.NR(),s)}Xj(){return this.Bpt}s1t(){return this.Bpt}j7(){return this.n7}Bmt(){return this.omt}Umt(){return this.amt&&this.amt.lmt}Wmt(){return this.Umt()&&this.amt.umt}Qmt(t){this.amt.umt=!!t}bpt(){return!1}d6(){return t}RO(){return this.Bpt?this.Bpt.RO():t}oC(t){t.xft(this),this.hft.adt(this.Ugt())}async Ugt(){try{await this.Bgt()}catch(t){console.error(`Unhandled exception running script %c${this.j7().kc()}, event ${this.Bmt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),s||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),s=!0)}}*D1t(t){t.xft(this),(this.Wmt()||this.Jc.cgt())&&(yield this),this.oC(t)}Lpt(){return!this.Wmt()&&!this.Jc.cgt()}static Wgt(){return s}static Qgt(){s=!0}}}{const co=self.Ls;co.Wdt=class extends co.qn{constructor(t,s,i){super(),this.n7=t,this.Jc=t.w4(),this.Bpt=s,this.Jgt=0,this.Ygt="",this.Vgt=0,this.Hgt=[],this.qgt=!0,this.Zgt="",this.Nct=null,this.Xgt=!1,this.Kgt=[],this.$gt=!1,this.tyt=!1,this.syt=0,this.iyt=-1,this.eyt=new Map,this.nyt=co.apt._b(t,s,i),this.nyt.zmt(this)}ryt(t){this.Jgt=0,this.Ygt=t[0],this.Vgt=t[1],this.Hgt=t[2].map(t=>co.ppt._b(this.n7,this,t)),this.qgt=t[3],this.tyt=t[4],this.$gt=t[5]}hyt(t){this.Jgt=1,this.Zgt=t[1],this.Nct=this.Jc.qJ(t[2]),this.nyt.ymt(this.Nct),this.Ygt=this.Nct.kc()+"."+this.Zgt,this.Vgt=t[3],this.Hgt=t[4].map(t=>co.ppt._b(this.n7,this,t)),this.qgt=t[5],this.tyt=t[6],this.$gt=t[7],this.Nct.oyt(this)}static fpt(t,s,i){const e=co.Xn(co.Wdt,t,s,i),n=i[1];return e.ryt(n),e}static dpt(t,s,i){const e=co.Xn(co.Wdt,t,s,i),n=i[1];return e.hyt(n),e}R0t(){if(this.Nct&&this.Nct.SY())for(const t of this.Nct.vmt())if(t.ayt(this.Zgt)){this.Xgt=!0;break}}O0t(){for(const t of this.Hgt)t.O0t();this.nyt.O0t(!1)}U0t(){return this.Jgt}i1t(){return this.Hgt}Qdt(){return this.Hgt}LO(){return this.Hgt.length}uyt(t){this.Kgt.push(t)}lyt(){return this.Kgt}Ggt(i){const e=this.Hgt;for(let t=0,s=e.length;t<s;++t)e[t].Aet(i[t].Xs(0))}Cgt(i){const e=this.Hgt;for(let t=0,s=e.length;t<s;++t)e[t].Aet(i[t])}cyt(){return this.Hgt.map(t=>t.Vit())}Xj(){return this.Bpt}s1t(){return this.Bpt}W0t(){return this.Ygt}fyt(){return this.Zgt}dyt(){return this.Xgt}zO(){return this.Vgt}uF(){return this.Nct}kl(){return this.qgt}AO(){switch(this.Vgt){case 0:return null;case 2:return"";default:return 0}}OO(){return this.nyt}jO(){return this.$gt}mgt(){return this.tyt}Rgt(){const t=this.syt++;this.iyt=t;let s,i=new Promise(t=>s=t);return this.eyt.set(t,{resolve:s,pyt:0}),[t,i]}Pgt(t){const s=this.eyt.get(t);0===s.pyt&&(s.resolve(),this.eyt.delete(t)),this.iyt=-1}myt(){const t=this.eyt.get(this.iyt);return t.pyt++,this.iyt}gyt(t){this.iyt=t;const s=this.eyt.get(t);s.pyt--}yyt(t,s){const i=new Map,e=[];for(const n of this.Nct.pP().dP()){const r=n.uF();if(r.ayt(this.Zgt)){const h=i.get(r);Array.isArray(h)?h.push(n):i.set(r,[n])}else e.push(n)}if(0<e.length&&this.nyt.Ngt(t,s,this.$gt,{Agt:this.Nct,Lgt:e}),0<i.size)for(const[o,a]of i){const u=o.Myt(this.Zgt).OO(),l=[...new Set([...t,...u.d6()])];u.Ngt(l,s,this.$gt,{Agt:o,Lgt:a})}}*wyt(t,s){const i=new Map,e=[];for(const n of this.Nct.pP().dP()){const r=n.uF();if(r.ayt(this.Zgt)){const h=i.get(r);Array.isArray(h)?h.push(n):i.set(r,[n])}else e.push(n)}if(0<e.length&&(yield*this.nyt.kgt(t,s,this.$gt,{Agt:this.Nct,Lgt:e})),0<i.size)for(const[o,a]of i){const u=o.Myt(this.Zgt).OO(),l=[...new Set([...t,...u.d6()])];yield*u.kgt(l,s,this.$gt,{Agt:o,Lgt:a})}}}}{const fo=self.Ls,po=[];fo.ppt=class extends fo.qn{constructor(t,s,i){super();const e=t.DO();this.n7=t,this.hft=e,this.Jc=t.w4(),this.Bpt=s,this.w0t=e.$0t(),this.er=i[1],this.$c=i[2],this.Syt=i[3],this.$T=!!i[4],this.Tyt=!!i[5],this.byt=s instanceof fo.Wdt,this.H8=i[6],this.vyt=this.Jc.n1t(i[8]),this.xyt=t=>this.Aet(t),this.Iyt=()=>this.Vit(),this.Cyt=!this.Bpt||this.$T||this.Tyt,this.ant=this.Syt,this.Gyt=-1,this.Nyt()&&(this.ant=this.ant?1:0),!this.Eyt()||this._2()||this.kdt()||(this.Gyt=e.Y0t(this)),e.Q0t(this)}static _b(t,s,i){return fo.Xn(fo.ppt,t,s,i)}O0t(){if(this.Eyt()&&!this._2()&&!this.kdt()&&!this.Dyt()){const t=this.hft.Udt(this);t&&t.uyt(this)}}kc(){return this.er}n1t(){return this.vyt}Xj(){return this.Bpt}s1t(){return this.Xj()}rY(){return!this.Xj()}Eyt(){return!this.rY()}Dyt(){return this.byt}_2(){return this.$T}kdt(){return this.Tyt}oe(){return 0===this.$c}Me(){return 1===this.$c}Nyt(){return 2===this.$c}bpt(){return!1}NY(){return this.H8}V0t(){return this.Syt}d6(){return po}oC(t){!this.Eyt()||this._2()||this.kdt()||this.Aet(this.V0t())}Lpt(){return!0}*D1t(t){this.oC(t)}Aet(t){this.oe()?"number"!=typeof t&&(t=parseFloat(t)):this.Me()?"string"!=typeof t&&(t=t.toString()):this.Nyt()&&(t=t?1:0),this.Cyt?this.ant=t:this.w0t.Jft()[this.Gyt]=t}Vit(){return this.Cyt?this.ant:this.w0t.Jft()[this.Gyt]}_yt(){let t=this.Vit();return this.Nyt()?!!t:t}m1t(){this.ant=this.Syt}r1t(){return{configurable:!1,enumerable:!0,get:this.Iyt,set:this.xyt}}}}{const mo=self.Ls,go=[];mo.mpt=class extends mo.qn{constructor(t,s,i){super();const e=t.DO();this.n7=t,this.hft=e,this.Jc=t.w4(),this.Bpt=s,this.Ayt=null,this.Lyt=i[1],this.Vf=!0}static _b(t,s,i){return mo.Xn(mo.mpt,t,s,i)}O0t(){this.Ayt=this.hft.f9(this.Lyt),this.n7.vpt(this);let t=this.Xj();for(;t;)t instanceof mo.apt&&t.M1t()&&t.Smt(this),t=t.Xj();this.Vmt(),this.Jc.fq()&&this.n7.Bdt().children.push(this.Ayt.Bdt())}Xj(){return this.Bpt}d6(){return go}Ipt(){return this.Ayt}oC(t){const s=!!this.Xj(),i=this.Jc.wY();s&&this.hft.H1t(i),this.Ayt.oC(),s&&this.hft.b6(i)}*D1t(t){const s=!!this.Xj(),i=this.Jc.wY();s&&this.hft.H1t(i),yield*this.Ayt.D1t(),s&&this.hft.b6(i)}Lpt(){return!1}Cpt(){return this.Vf}Vmt(){let t=this.Xj();for(;t;){if(t instanceof mo.apt&&t.M1t()&&!t.Rdt())return void(this.Vf=!1);t=t.Xj()}this.Vf=!0}}}{let a=function(t,s){return s<=t?t%s:(t<0&&(t<=-s&&(t%=s),t<0)&&(t+=s),t)};a;const yo=self.Ls;yo.Oyt=class extends yo.qn{constructor(t){super(),this.dT=t,this.Jc=t.w4()}O0t(){}static Ryt(t,s){const i=s[0],e=[bo,So,To,vo,Mo,wo];return yo.Xn(e[i],t,s)}};class Mo extends yo.Oyt{constructor(t,s){super(t),this.Pyt=this.Jc.kyt(),this.Bgt=this.Jc.zgt(s[1]),this.Bgt!==yo.O9.L9.Int.random&&this.Bgt!==yo.O9.L9.Int.Fyt||this.dT.jyt()}zyt(){return this.Pyt.Byt(this.Bgt,this.Pyt)}}class wo extends yo.Oyt{constructor(t,s){super(t),this.Uyt=null,this.Ygt=s[1],this.dT.jyt()}O0t(){const t=this.Jc.DO(),s=(this.Uyt=t._O(this.Ygt),this.Ygt=null,this.dT.OO()),i=this.Uyt.OO();this.Wyt=[...new Set([...s.RO(),...i.RO()])],this.Wyt=t.J0t(this.Wyt)}zyt(){const t=this.Uyt;if(t.kl()){const s=t.OO();return yo.apt.prototype.FO.bind(s,this.Wyt,t.jO(),t.zO(),t.AO())}{const i=t.AO();return()=>i}}}class So extends yo.Oyt{constructor(t,s){super(t),this.Nct=this.Jc.qJ(s[1]),this.Bgt=this.Jc.zgt(s[2]),this.Qyt=!!s[3],this.Pct=this.Jc.DO().WO(),this.dT.Jyt(this.Nct)}zyt(){return this.Nct.iP().Byt(this.Bgt,this.Nct.$R().J5())}Yyt(...t){const s=this.Nct,i=s.pP().Qct(),e=i.length;if(0===e)return this.Qyt?"":0;const n=a(this.dT.Vyt(),e);return this.Pct.p6().Lft(s),this.Bgt.apply(i[n].J5(),t)}Hyt(t,...s){const i=this.Nct,e=i.dP(),n=e.length;if(0===n)return this.Qyt?"":0;const r=a(t,n);return this.Pct.p6().Lft(i),this.Bgt.apply(e[r].J5(),s)}}class To extends yo.Oyt{constructor(t,s){super(t),this.Nct=this.Jc.qJ(s[1]),this.qyt=s[3],this.Qyt=!!s[2],this.dT.Jyt(this.Nct)}Zyt(){const t=this.Nct.pP().Qct(),s=t.length;if(0===s)return this.Qyt?"":0;const i=a(this.dT.Vyt(),s);return t[i].Xyt(this.qyt)}Kyt(){const t=this.Nct,s=t.pP().Qct(),i=s.length;if(0===i)return this.Qyt?"":0;const e=a(this.dT.Vyt(),i),n=s[e],r=n.uF().$yt(t.tMt());return n.Xyt(this.qyt+r)}sMt(t){const s=this.Nct,i=s.dP(),e=i.length;if(0===e)return this.Qyt?"":0;let n=a(t,e),r=i[n],h=0;return s.SY()&&(h=r.uF().$yt(s.tMt())),r.Xyt(this.qyt+h)}}class bo extends yo.Oyt{constructor(t,s){super(t),this.Nct=this.Jc.qJ(s[1]),this.iMt=this.Nct.int(s[2]),this.eMt=this.Nct.Ast(s[2]),this.Bgt=this.Jc.zgt(s[3]),this.Qyt=!!s[4],this.Pct=this.Jc.DO().WO(),this.dT.Jyt(this.Nct)}nMt(...t){const s=this.Nct,i=s.pP().Qct(),e=i.length;if(0===e)return this.Qyt?"":0;let n=a(this.dT.Vyt(),e),r=(this.Pct.p6().Lft(s),i[n]),h=0;return s.SY()&&(h=r.uF().rMt(s.tMt())),this.Bgt.apply(r.snt()[this.eMt+h].J5(),t)}hMt(t,...s){const i=this.Nct,e=i.dP(),n=e.length;if(0===n)return this.Qyt?"":0;let r=a(t,n),h=(this.Pct.p6().Lft(i),e[r]),o=0;return i.SY()&&(o=h.uF().rMt(i.tMt())),this.Bgt.apply(h.snt()[this.eMt+o].J5(),s)}}class vo extends yo.Oyt{constructor(t,s){super(t),this.oMt=null,this.aMt=s[1]}O0t(){this.oMt=this.Jc.DO().h1t(this.aMt)}uMt(){return this.oMt}}}{let r=function(t){const s=self.lMt[t];if(s)return s;throw new Error("invalid expression number")};r;const xo=self.Ls;xo.cMt=class extends xo.qn{constructor(t,s,i){super(),this.dT=t,this.Ag=i,this.$c=s,this.Xs=null,this.fMt=!1,this.Tyt=!1}static _b(t,s,i){const e=s[0],n=[Io,Co,Lo,No,Do,Go,_o,Io,No,No,Oo,Ro,Lo,ko,Co,Ao,Eo,Po,Fo,jo,zo,Bo];return xo.Xn(n[e],t,e,i,s)}O0t(){}jyt(){this.fMt=!0}Jyt(t){this.fMt||!t||t.iP().DR()||(this.fMt=!0)}dMt(){return this.fMt}$L(){return this.Ag}w4(){return this.dT.w4()}OO(){return this.dT.OO()}kdt(){return this.Tyt}pMt(){return 4===this.$c}};class Io extends xo.cMt{constructor(t,s,i,e){super(t,s,i),this.mMt=0;const n=e[1];this.gMt=n[0],this.yMt=[],this.MMt=null;for(let t=1,s=n.length;t<s;++t)this.yMt.push(xo.Oyt.Ryt(this,n[t]));this.yMt.length?this.Xs=this.wMt:(this.Xs=r(this.gMt),this.Tyt=!0)}SMt(t){if(t<0||t>=this.yMt.length)throw new RangeError("invalid numbered node");return this.yMt[t]}O0t(){for(const s of this.yMt)s.O0t();const t=r(this.gMt);this.yMt.length?this.MMt=t(this):this.MMt=t}Vyt(){return this.mMt}wMt(t){return this.mMt=t,this.MMt()}}class Co extends Io{constructor(t,s,i,e){super(t,s,i,e),this.Xs=this.TMt,14===s&&(this.OO().Imt(),this.dT instanceof xo.Mmt)&&this.OO().Fmt()}TMt(t){this.mMt=t;const s=this.MMt();return"string"==typeof s?s:""}bMt(){return r(this.gMt)()}}class Go extends Io{constructor(t,s,i,e){super(t,s,i,e),2<=t.vMt()?this.Xs=this.BP:this.Xs=this.X3,this.Tyt=!1}X3(t){this.mMt=t;const s=this.MMt(),i=this.w4().H3();return i.X3(s)}BP(t){const s=this.X3(t);return s?s.BP():null}}class No extends xo.cMt{constructor(t,s,i,e){super(t,s,i),this.xMt=e[1],this.Xs=this.IMt,this.Tyt=!0}IMt(){return this.xMt}}class Eo extends xo.cMt{constructor(t,s,i,e){super(t,s,i),this.CMt=e[1],this.Xs=this.GMt,this.Tyt=!0}GMt(){return this.CMt}}class Do extends xo.cMt{constructor(t,s,i,e){super(t,s,i),this.Nct=this.w4().qJ(e[1]),2<=t.vMt()?this.Xs=this.qR:this.Xs=this.uF;const n=this.OO();n.ymt(this.Nct),this.dT instanceof xo.Mmt?n.Fmt():n.Xj()&&n.Xj().Fmt(),this.Tyt=!0}uF(){return this.Nct}qR(){return this.Nct?this.Nct.qR():null}}class _o extends xo.cMt{constructor(t,s,i,e){super(t,s,i),this.Q8=this.w4().D3().Gq(e[1]),2<=t.vMt()?this.Xs=this.N3:this.Xs=this._3,this.Tyt=!0}_3(){return this.Q8}N3(){return this.Q8?this.Q8.N3():null}}class Ao extends xo.cMt{constructor(t,s,i,e){super(t,s,i),this.DX=this.w4().L$().kZ(e[1]),2<=t.vMt()?this.Xs=this.qtt:this.Xs=this.yst,this.Tyt=!0}yst(){return this.DX}qtt(){return this.DX?this.DX.qtt():null}}class Lo extends xo.cMt{constructor(t,s,i,e){super(t,s,i),this.NMt=e[1],this.Xs=this.EMt,this.Tyt=!0}EMt(){return this.NMt}}class Oo extends xo.cMt{constructor(t,s,i,e){super(t,s,i),this.DMt=e[1];const n=this.dT.uF();this.dT instanceof xo.gmt&&this.dT._2()||!n||!n.SY()?(this.Xs=this._Mt,this.Tyt=!0):(this.Xs=this.AMt,this.jyt())}_Mt(){return this.DMt}AMt(t){t=t||0;let s=this.dT.uF(),i=s.pP(),e=i.dP(),n=null;if(e.length)n=e[t%e.length].uF();else if(i.Uct()){const r=i.Wct();n=r[t%r.length].uF()}else{if(!(0<s.gP()))return 0;{const h=s.dP();n=h[t%h.length].uF()}}return this.DMt+n.$yt(s.tMt())}}class Ro extends xo.cMt{constructor(t,s,i,e){super(t,s,i),this.aMt=e[1],this.oMt=null,2<=t.vMt()?this.Xs=this.LMt:this.Xs=this.OMt,this.Tyt=!0}O0t(){this.oMt=this.w4().DO().h1t(this.aMt)}OMt(){return this.oMt}LMt(){return null}}class Po extends xo.cMt{constructor(t,s,i,e){super(t,s,i),this.RMt=e[1],this.Uyt=null,2<=t.vMt()?this.Xs=this.PMt:this.Xs=this.kMt,this.Tyt=!0}O0t(){this.Uyt=this.w4().DO()._O(this.RMt),this.RMt=null}kMt(){return this.Uyt}PMt(){return null}}class ko extends xo.cMt{constructor(t,s,i,e){super(t,s,i),this.FMt=[],this.jMt=[],this.Tyt=!0;for(let t=1,s=e.length;t<s;++t){const n=xo.cMt._b(this.dT,e[t],0);this.FMt.push(n),this.jMt.push(0),n.kdt()||(this.Tyt=!1)}this.Xs=this.zMt}O0t(){for(const t of this.FMt)t.O0t()}zMt(){const i=this.FMt,e=this.jMt;for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Xs(0);return e}}class Fo extends xo.cMt{constructor(t,s,i,e){super(t,s,i),this.BMt=e[1],this.Xs=this._et,this.Tyt=!0}_et(){return this.BMt}}class jo extends xo.cMt{constructor(t,s,i,e){super(t,s,i),this.UMt=e[1],this.Xs=this.WMt,this.Tyt=!0}WMt(){return this.UMt}}class zo extends Io{constructor(t,s,i,e){super(t,s,i,e),this.Xs=this.IF,this.Tyt=!1}IF(){return this.MMt()}}class Bo extends xo.cMt{constructor(t,s,i,e){super(t,s,i),this.fut=this.w4()._ut().hut(e[1]),this.Xs=this.QMt,this.Tyt=!0}QMt(){return this.fut.kc()}}}{let e=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Xs(0)};e;const Uo=self.Ls,Wo=[],Qo=function(){};Uo.gmt=class extends Uo.qn{constructor(t,i,s){if(super(),this.nyt=t,this.Jc=t.w4(),this.Ag=s,this.Bgt=this.Jc.zgt(i[1]),this.JMt=0<i[3],this.YMt=2===i[3],this.VMt=!!i[4],this.HMt=!!i[5],this.$T=!!i[6],this.H8=i[7],this.qMt=this.nyt.nft(),this.Nct=null,this.iMt=null,this.eMt=-1,this.Pyt=null,this.oC=Qo,this.D1t=Qo,this.Ys=[],this.ZMt=[],this.XMt=!1,this.KMt=null,this.$Mt=null,this.amt=this.Jc.fq()?{umt:i[8][0],twt:i[8][1]}:null,-1===i[0]?this.Pyt=this.Jc.kyt():(this.Nct=this.Jc.qJ(i[0]),i[2]&&(this.iMt=this.Nct.int(i[2]),this.eMt=this.Nct.Ast(i[2])),this.nyt.Xj()&&this.nyt.Xj().Fmt()),10===i.length){let s=i[9];for(let t of s)this.Ys.push(Uo.cMt._b(this,t,this.Ys.length)),this.ZMt.push(0)}0===this.Ys.length&&(this.Ys=Wo,this.ZMt=Wo),this.nyt.DO().j0t(this)}static _b(t,s,i){return Uo.Xn(Uo.gmt,t,s,i)}O0t(){for(const t of this.Ys)t.O0t(),t.dMt()&&(this.XMt=!0);this.YMt?(this.oC=this.swt,this.D1t=this.iwt):this.Pyt?(this.ewt(),this.D1t=this.nwt):this.Nct.iP().DR()?(this.rwt(),this.D1t=this.hwt):this.$T?(this.oC=this.owt,this.D1t=this.awt):(this.oC=this.uwt,this.D1t=this.lwt)}ewt(){const t=this.Pyt,s=this.Pyt;this.cwt(t,s,this.fwt)}rwt(){const t=this.Nct.iP(),s=this.Nct.$R().J5();this.cwt(t,s,this.dwt)}cwt(t,s,i){const e=this.Bgt,n=this.HMt,r=this.Ys;if(0===r.length){const h=t.Byt(e,s);n?this.oC=function(){return Uo.xor(h(),n)}:this.oC=h}else if(1===r.length){const o=r[0];if(!n&&o.kdt())this.oC=t.pwt(e,s,o.Xs(0));else{const a=t.Byt(e,s);this.oC=function(){return Uo.xor(a(o.Xs(0)),n)}}}else if(2===r.length){const u=r[0],l=r[1];if(!n&&u.kdt()&&l.kdt())this.oC=t.mwt(e,s,u.Xs(0),l.Xs(0));else{const c=t.Byt(e,s);this.oC=function(){return Uo.xor(c(u.Xs(0),l.Xs(0)),n)}}}else if(3===r.length){const f=r[0],d=r[1],p=r[2];if(!n&&f.kdt()&&d.kdt()&&p.kdt())this.oC=t.gwt(e,s,f.Xs(0),d.Xs(0),p.Xs(0));else{const m=t.Byt(e,s);this.oC=function(){return Uo.xor(m(f.Xs(0),d.Xs(0),p.Xs(0)),n)}}}else this.oC=i}NY(){return this.H8}ypt(){return this.Bgt}uF(){return this.Nct}ez(){return this.iMt}ywt(){return this.iMt?this.iMt.K5():this.Nct?this.Nct.iP():null}vMt(){const t=this.ywt();return t?t.Mwt():1}OO(){return this.nyt}w4(){return this.Jc}$L(){return this.Ag}igt(){return this.$L()}lpt(){return this.JMt}Mpt(){return this.YMt}wwt(){return this.HMt}yz(){return this.VMt}_2(){return this.$T}Swt(){return this.amt.umt}Twt(){return!!this.Pyt}Xmt(){return this.Twt()||this.Nct.iP().DR()}Kmt(){for(const t of this.Ys)if(t.pMt())return t.uF();return null}bwt(t){this.amt.umt=!!t,this.nyt.Rmt()}vwt(){return this.amt.twt}Lpt(){return!this.Swt()&&!this.Jc.cgt()&&!this.vwt()}xwt(){return this.KMt||(this.KMt=new Map),this.KMt}Iwt(){return this.$Mt||(this.$Mt=new Map),this.$Mt}fwt(){const t=this.ZMt;return e(this.Ys,t),Uo.xor(this.Bgt.apply(this.Pyt,t),this.HMt)}*nwt(){if((this.Swt()||this.Jc.cgt())&&(yield this),this.vwt()){const s=this.ZMt;e(this.Ys,s);let t=this.Bgt.apply(this.Pyt,s);return Uo.Do(t)&&(t=yield*t),Uo.xor(t,this.HMt)}return this.oC()}dwt(){const t=this.ZMt,s=(e(this.Ys,t),this.Nct.$R().J5());return Uo.xor(this.Bgt.apply(s,t),this.HMt)}*hwt(){if((this.Swt()||this.Jc.cgt())&&(yield this),this.vwt()){let t=this.ZMt,s=(e(this.Ys,t),this.Nct.$R().J5()),i=this.Bgt.apply(s,t);return Uo.Do(i)&&(i=yield*i),Uo.xor(i,this.HMt)}return this.oC()}swt(){return!0}*iwt(){return(this.Swt()||this.Jc.cgt())&&(yield this),!0}Cwt(){if(this.iMt){if(2<=this.iMt.K5().Mwt())throw new Error("not yet implemented");return this.iMt}return 2<=this.Nct.iP().Mwt()?this.Nct.qR():this.Nct}owt(){const t=this.ZMt,s=(e(this.Ys,t),this.Bgt.apply(this.Cwt(),t));return this.Nct._gt(),s}*awt(){if((this.Swt()||this.Jc.cgt())&&(yield this),this.vwt()){const s=this.ZMt;e(this.Ys,s);let t=this.Bgt.apply(this.Cwt(),s);return Uo.Do(t)&&(t=yield*t),this.Nct._gt(),t}return this.oC()}uwt(){const i=this.Ys,e=this.ZMt,t=this.Nct.pP();for(let t=0,s=i.length;t<s;++t){const n=i[t];n.dMt()||(e[t]=n.Xs(0))}return t.zct()?this.Gwt(t):this.Nwt(t)}*lwt(){return(this.Swt()||this.Jc.cgt())&&(yield this),this.uwt()}Ewt(i){const e=this.Ys,n=this.ZMt;for(let t=0,s=e.length;t<s;++t){const r=e[t];r.dMt()&&(n[t]=r.Xs(i))}}Gwt(i){const t=this.Nct,e=t.SY(),n=t.tMt(),r=this.eMt,h=0<=r,o=t.dP(),a=this.XMt,u=this.ZMt,l=this.Bgt,c=this.HMt,f=this.qMt&&!this.JMt;i.jct();for(let s=0,t=o.length;s<t;++s){const d=o[s];a&&this.Ewt(s);let t;if(h){const p=e?d.uF().rMt(n):0;t=l.apply(d.snt()[r+p].J5(),u)}else t=l.apply(d.J5(),u);Uo.xor(t,c)?i.Jct(d):f&&i.Yct(d)}return t.Dwt(!0),i.Vct(!1),t._gt(),i.Bct()}Nwt(t){let s=this.Nct,i=s.SY(),e=s.tMt(),n=s.TF(),r=this.eMt,h=0<=r,o=this.XMt,a=this.ZMt,u=this.Bgt,l=this.HMt,c=this.qMt&&!this.JMt,f=t.Hct(),d=t.qct(),p=c&&!this.nyt.Zmt(this),m=p?d:f,g=0,y=!1;for(let s=0,t=m.length;s<t;++s){const w=m[s];o&&this.Ewt(s);let t;if(h){const S=i?w.uF().rMt(e):0;t=u.apply(w.snt()[r+S].J5(),a)}else t=u.apply(w.J5(),a);Uo.xor(t,l)?(y=!0,p?(f.push(w),n&&w._wt()):(m[g]=w,n&&w.Awt(g),++g)):p?(m[g]=w,n&&w.Lwt(g),++g):c&&(d.push(w),n)&&w.Owt()}Uo.Gh(m,g),n&&s.Rwt(p,g);const M=y;return p&&!y&&(y=this.Pwt(f)),s.Dwt(M||c),c?y:t.Bct()}Pwt(i){const t=this.Nct,e=t.SY(),n=t.tMt(),r=this.XMt,h=this.eMt,o=0<=h,a=this.ZMt,u=this.Bgt,l=this.HMt;for(let s=0,t=i.length;s<t;++s){const c=i[s];r&&this.Ewt(s);let t;if(o){const f=e?c.uF().rMt(n):0;t=u.apply(c.snt()[h+f].J5(),a)}else t=u.apply(c.J5(),a);if(Uo.xor(t,l))return!0}return!1}kwt(t,s){return this.Ys[t].Xs(s)}wpt(){const t=this.Ys;if(t.length)return t[0].bMt();throw new Error("no parameters")}QH(){if(!this.KMt||!this.KMt.size)return null;const s={};for(const[i,e]of this.KMt.entries()){let t=e;"collmemory"===i&&(t=[...e.entries()].map(t=>[t[0].vF(),t[1].vF(),t[2]])),s[i]=t}return{ex:s}}JH(t){if(this.KMt&&(this.KMt.clear(),this.KMt=null),t){const s=this.Jc,i=t.ex;if(i){const e=this.xwt();e.clear();for(const[n,r]of Object.entries(i)){let t=r;"collmemory"===n&&(t=Uo.Xn(Uo.Fl,r.map(t=>[s.J3(t[0]),s.J3(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),e.set(n,t)}}}}}}{let n=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Xs(0)};n;const Jo=self.Ls,Yo=[],Vo=function(){},Ho=function*(){};Jo.Mmt=class extends Jo.qn{constructor(t,s,i){super();const e=(this.nyt=t).w4(),n=(this.Jc=e,this.Ag=i,this.H8=4<=s.length?s[3]:-1,this.Fwt=5<=s.length?255&s[4]:0,this.jwt=5<=s.length?s[4]>>8:0,this.Bgt=null,this.Nct=null,this.iMt=null,this.eMt=-1,this.Pyt=null,this.zwt="",this.Bwt=null,this.Uwt=null,this.oC=Vo,this.D1t=Vo,this.Ys=[],this.ZMt=[],this.XMt=!1,this.KMt=null,this.$Mt=null,-3===s[0]),r=n?s[2]:s[5];if(this.amt=e.fq()||n?{umt:r[0],twt:r[1],index:r[2]}:null,-1===s[0])this.Pyt=e.kyt(),this.Bgt=e.zgt(s[1]);else if(-2===s[0])this.zwt=s[1];else if(n){const h=e.zgt(s[1]);this.Bgt=h,this.oC=this.Wwt,this.D1t=this.Qwt,this.jwt|=8}else this.Nct=e.qJ(s[0]),4&this.jwt?(this.zwt=s[1],this.Bwt=e.qJ(s[2])):(s[2]&&(this.iMt=this.Nct.int(s[2]),this.eMt=this.Nct.Ast(s[2])),this.Bgt=e.zgt(s[1]));if(7===s.length){const o=s[6];for(const a of o)this.Ys.push(Jo.cMt._b(this,a,this.Ys.length)),this.ZMt.push(0)}0===this.Ys.length&&(this.Ys=Yo,this.ZMt=Yo),this.Jwt()&&(this.nyt.Imt(),this.nyt.Fmt()),this.nyt.DO().z0t(this)}static _b(t,s,i){return Jo.Xn(Jo.Mmt,t,s,i)}O0t(){for(const t of this.Ys)t.O0t(),t.dMt()&&(this.XMt=!0);if(this.Pyt)this.ewt(),this.D1t=this.nwt;else if(this.zwt)4&this.jwt?this.Ywt():this.Vwt(),this.zwt="",this.Bwt=null;else if(this.oC===this.Wwt){const s=this.Bgt,i=this.Jc.DO().e1t(this.nyt);this.Bgt=s.bind(null,this.Jc.NR(),i)}else this.iMt?this.mgt()?(this.oC=this.Hwt,this.D1t=this.qwt):(this.oC=this.Zwt,this.D1t=this.Xwt):this.Nct.iP().DR()?(this.rwt(),this.D1t=this.hwt):this._2()?(this.oC=this.Kwt,this.D1t=this.$wt):this.mgt()?(this.oC=this.tSt,this.D1t=this.sSt):this.iSt()?(this.oC=this.eSt,this.D1t=this.nSt):this.Ys.length?this.Ys.every(t=>t.dMt())?(this.oC=this.rSt,this.D1t=this.hSt):this.XMt?(this.oC=this.oSt,this.D1t=this.aSt):this.Ys.every(t=>t.kdt())?(n(this.Ys,this.ZMt),this.oC=this.uSt,this.D1t=this.lSt):(this.oC=this.cSt,this.D1t=this.fSt):(this.oC=this.uSt,this.D1t=this.lSt)}ewt(){const t=this.Pyt,s=this.Pyt;this.cwt(t,s,this.fwt)}rwt(){const t=this.Nct.iP(),s=this.Nct.$R().J5();this.cwt(t,s,this.dwt)}Vwt(){const t=this.nyt.DO(),i=t._O(this.zwt);if(i.kl()){const e=0!=(2&this.jwt);this.Uwt=i.OO();let s=[...new Set([...this.nyt.RO(),...this.Uwt.RO()])];s=t.J0t(s);const n=!i.jO()&&this.dSt()?{Ogt:!0}:null;if(this.oC=Jo.apt.prototype.Ngt.bind(this.Uwt,s,this.Ys,e,n),this.Jc.fq()){const r=this;this.D1t=function*(){(r.Swt()||r.Jc.cgt())&&(yield r);const t=yield*r.Uwt.kgt(s,r.Ys,e,n);return t}}else this.D1t=Ho}else this.oC=Vo,this.D1t=Ho}Ywt(){const r=this.nyt.DO(),h=r.l1t(this.Bwt,this.zwt);if(h.kl()){const o=0!=(2&this.jwt);this.Uwt=h.OO();let s=[...new Set([...this.nyt.RO(),...this.Uwt.RO(),this.Nct,h.uF()])],t=(s=r.J0t(s),!this.Nct.SY()&&!h.uF().SY()),i=!this.Nct.SY()&&h.uF().SY(),e=this.Nct.SY(),n=null;if(!h.jO()&&this.dSt()&&((n=n||{}).Ogt=!0),!i&&o||((n=n||{}).Egt=this.Nct,n.Dgt=h.uF()),t||i||e&&!h.dyt()?this.oC=Jo.apt.prototype.Ngt.bind(this.Uwt,s,this.Ys,o,n):e&&(this.oC=Jo.Wdt.prototype.yyt.bind(h,s,this.Ys)),this.Jc.fq()){const a=this;t||i||e&&!h.dyt()?this.D1t=function*(){(a.Swt()||a.Jc.cgt())&&(yield a);const t=yield*a.Uwt.kgt(s,a.Ys,o,n);return t}:e&&(this.D1t=function*(){(a.Swt()||a.Jc.cgt())&&(yield a);const t=yield*h.wyt(s,a.Ys);return t})}else this.D1t=Ho}else this.oC=Vo,this.D1t=Ho}cwt(t,s,i){const e=this.Bgt,n=this.Ys;if(0===n.length)this.oC=t.Byt(e,s);else if(1===n.length){const r=n[0];if(r.kdt())this.oC=t.pwt(e,s,r.Xs(0));else{const h=t.Byt(e,s);this.oC=function(){return h(r.Xs(0))}}}else if(2===n.length){const o=n[0],a=n[1];if(o.kdt()&&a.kdt())this.oC=t.mwt(e,s,o.Xs(0),a.Xs(0));else{const u=t.Byt(e,s);this.oC=function(){return u(o.Xs(0),a.Xs(0))}}}else if(3===n.length){const l=n[0],c=n[1],f=n[2];if(l.kdt()&&c.kdt()&&f.kdt())this.oC=t.gwt(e,s,l.Xs(0),c.Xs(0),f.Xs(0));else{const d=t.Byt(e,s);this.oC=function(){return d(l.Xs(0),c.Xs(0),f.Xs(0))}}}else this.oC=i}NY(){return this.H8}mgt(){return 0!=(8&this.jwt)}pgt(){return 0!=(16&this.jwt)}iSt(){return 1===this.Fwt}_2(){return 2===this.Fwt}Jwt(){return 0!=(1&this.jwt)}Nmt(){return this.mgt()||this.pgt()}uF(){return this.Nct}ywt(){return this.iMt?this.iMt.K5():this.Nct?this.Nct.iP():null}vMt(){const t=this.ywt();return t?t.Mwt():1}OO(){return this.nyt}dSt(){let t=this.nyt;do{if(t instanceof Jo.Wdt&&t.jO())return!0}while(t=t.s1t());return!1}w4(){return this.Jc}$L(){return this.Ag}igt(){return this.amt.index}Swt(){return this.amt.umt}bwt(t){this.amt.umt=!!t,this.nyt.Rmt()}vwt(){return this.amt.twt}Lpt(){return!this.Swt()&&!this.Jc.cgt()&&!this.vwt()}xwt(){return this.KMt||(this.KMt=new Map),this.KMt}Iwt(){return this.$Mt||(this.$Mt=new Map),this.$Mt}fwt(){const t=this.ZMt;return n(this.Ys,t),this.Bgt.apply(this.Pyt,t)}*nwt(){if((this.Swt()||this.Jc.cgt())&&(yield this),this.vwt()){const t=this.ZMt,s=(n(this.Ys,t),yield*this.Bgt.apply(this.Pyt,t));return s}return this.oC()}dwt(){const t=this.ZMt;return n(this.Ys,t),this.Bgt.apply(this.Nct.$R().J5(),t)}*hwt(){if((this.Swt()||this.Jc.cgt())&&(yield this),this.vwt()){const t=this.ZMt,s=(n(this.Ys,t),yield*this.Bgt.apply(this.Nct.$R().J5(),t));return s}return this.oC()}uSt(){const i=this.ZMt,e=this.Nct.pP().dP();for(let t=0,s=e.length;t<s;++t)this.Bgt.apply(e[t].J5(),i)}*lSt(){if((this.Swt()||this.Jc.cgt())&&(yield this),this.vwt()){const i=this.ZMt,e=this.Nct.pP().dP();for(let t=0,s=e.length;t<s;++t)yield*this.Bgt.apply(e[t].J5(),i)}else this.uSt()}cSt(){const i=this.ZMt,e=(n(this.Ys,i),this.Nct.pP().dP());for(let t=0,s=e.length;t<s;++t)this.Bgt.apply(e[t].J5(),i)}*fSt(){if((this.Swt()||this.Jc.cgt())&&(yield this),this.vwt()){const i=this.ZMt,e=(n(this.Ys,i),this.Nct.pP().dP());for(let t=0,s=e.length;t<s;++t)yield*this.Bgt.apply(e[t].J5(),i)}else this.cSt()}rSt(){const e=this.Ys,n=this.ZMt,s=this.Bgt,r=this.Nct.pP().dP();for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].Xs(i);s.apply(h.J5(),n)}}*hSt(){if((this.Swt()||this.Jc.cgt())&&(yield this),this.vwt()){const e=this.Ys,n=this.ZMt,s=this.Bgt,r=this.Nct.pP().dP();for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].Xs(i);yield*s.apply(h.J5(),n)}}else this.rSt()}oSt(){const e=this.Ys,n=this.ZMt,s=this.Bgt,r=this.Nct.pP().dP();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.dMt()||(n[t]=i.Xs(0))}for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.dMt()&&(n[t]=o.Xs(i))}s.apply(h.J5(),n)}}*aSt(){if((this.Swt()||this.Jc.cgt())&&(yield this),this.vwt()){const e=this.Ys,n=this.ZMt,s=this.Bgt,r=this.Nct.pP().dP();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.dMt()||(n[t]=i.Xs(0))}for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.dMt()&&(n[t]=o.Xs(i))}yield*s.apply(h.J5(),n)}}else this.oSt()}eSt(){const e=this.Ys,n=this.ZMt,s=this.Bgt,t=this.Nct,i=t.pSt(),r=t.pP().dP();i.mSt(s);for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].Xs(i);s.apply(h.J5(),n)}i.gSt(s)}*nSt(){if((this.Swt()||this.Jc.cgt())&&(yield this),this.vwt()){const e=this.Ys,n=this.ZMt,s=this.Bgt,t=this.Nct,i=t.pSt(),r=t.pP().dP();i.mSt(s);for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].Xs(i);yield*s.apply(h.J5(),n)}i.gSt(s)}else this.eSt()}Kwt(){const t=this.ZMt;return n(this.Ys,t),this.Bgt.apply(this.iMt||this.Nct,t)}*$wt(){if((this.Swt()||this.Jc.cgt())&&(yield this),this.vwt()){const s=this.ZMt;n(this.Ys,s);let t=this.Bgt.apply(this.iMt||this.Nct,s);return Jo.Do(t)?yield*t:t}return this.Kwt()}Zwt(){const t=this.Nct,s=t.SY(),e=t.tMt(),n=this.Ys,r=this.XMt,h=this.ZMt,o=this.Bgt,a=this.eMt,u=t.pP().dP();for(let t=0,s=n.length;t<s;++t){const i=n[t];i.dMt()||(h[t]=i.Xs(0))}for(let i=0,t=u.length;i<t;++i){const l=u[i];if(r)for(let t=0,s=n.length;t<s;++t){const f=n[t];f.dMt()&&(h[t]=f.Xs(i))}const c=s?l.uF().rMt(e):0;o.apply(l.snt()[a+c].J5(),h)}}*Xwt(){if((this.Swt()||this.Jc.cgt())&&(yield this),this.vwt()){const t=this.Nct,s=t.SY(),e=t.tMt(),n=this.Ys,r=this.XMt,h=this.ZMt,o=this.Bgt,a=this.eMt,u=t.pP().dP();for(let t=0,s=n.length;t<s;++t){const i=n[t];i.dMt()||(h[t]=i.Xs(0))}for(let i=0,t=u.length;i<t;++i){const l=u[i];if(r)for(let t=0,s=n.length;t<s;++t){const f=n[t];f.dMt()&&(h[t]=f.Xs(i))}const c=s?l.uF().rMt(e):0;yield*o.apply(l.snt()[a+c].J5(),h)}}else this.Zwt()}tSt(){const e=this.Ys,n=this.ZMt,s=this.Bgt,r=this.Nct.pP().dP(),h=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].Xs(i);h.push(s.apply(o.J5(),n))}return Promise.all(h)}*sSt(){if((this.Swt()||this.Jc.cgt())&&(yield this),this.vwt()){const e=this.Ys,n=this.ZMt,s=this.Bgt,r=this.Nct.pP().dP(),h=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].Xs(i);h.push(yield*s.apply(o.J5(),n))}return Promise.all(h)}return this.tSt()}Hwt(){const t=this.Nct,s=t.SY(),e=t.tMt(),n=this.Ys,r=this.ZMt,h=this.Bgt,o=this.eMt,a=t.pP().dP(),u=[];for(let i=0,t=a.length;i<t;++i){const l=a[i];for(let t=0,s=n.length;t<s;++t)r[t]=n[t].Xs(i);const c=s?l.uF().rMt(e):0;u.push(h.apply(l.snt()[o+c].J5(),r))}return Promise.all(u)}*qwt(){if((this.Swt()||this.Jc.cgt())&&(yield this),this.vwt()){const t=this.Nct,s=t.SY(),e=t.tMt(),n=this.Ys,r=this.ZMt,h=this.Bgt,o=this.eMt,a=t.pP().dP(),u=[];for(let i=0,t=a.length;i<t;++i){const l=a[i];for(let t=0,s=n.length;t<s;++t)r[t]=n[t].Xs(i);const c=s?l.uF().rMt(e):0;u.push(yield*h.apply(l.snt()[o+c].J5(),r))}return Promise.all(u)}return this.Hwt()}async Wwt(){try{await this.Bgt()}catch(t){console.error(`Unhandled exception running script %c${this.nyt.j7().kc()}, event ${this.nyt.Bmt()}, action ${this.igt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),Jo.gpt.Wgt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Jo.gpt.Qgt())}}*Qwt(){return(this.Swt()||this.Jc.cgt())&&(yield this),this.Wwt()}QH(){return this.KMt&&this.KMt.size?{ex:Jo.Go(this.KMt)}:null}JH(t){if(this.KMt&&(this.KMt.clear(),this.KMt=null),t){const s=t.ex;s&&(this.KMt=Jo.No(s))}}}}{let d=function(t){return t instanceof h?M.VP(t):t.TB()},l=function(t){return d(t).Z3()},n=function(t){return M.VP(t)},N=function(t,s,i,e){const n=s.vF(),r=i.vF();n<r?t.Set(s,i,e):t.Set(i,s,e)},E=function(t,s,i){const e=s.vF(),n=i.vF();e<n?t.Ul(s,i):t.Ul(i,s)},D=function(t,s){t.Wl(s)},_=function(t,s,i){const e=s.vF(),n=i.vF();return e<n?t.Xs(s,i):t.Xs(i,s)},e=function(t,s,i,e){if(!s)return!1;const n=0!==i||0!==e,r=t.Z3(),h=M.hO(),o=M.q0t(),a=o.OO().nft(),u=o.uF(),l=o.wwt(),c=s.pP(),f=u!==s;C=s,I=f&&!l;let d,p=0,m=0,g=G=!1;c.zct()?(w.I(r._j()),w.offset(i,e),h.ySt(r.X3(),s,w,S),d=S):!a||M.MSt()&&!c.qct().length&&c.Hct().length?d=c.Hct():(d=c.qct(),G=!0),n&&(p=r.YS(),m=r.qS(),r.Gj(i,e),r.vj());for(const y of d)if(h.U4(t,y)){if(g=!0,l)break;f&&O.add(y)}return n&&(r.xj(p,m),r.vj()),A.Nh(S),g},i=function(t){const s=M.PO().nft(),i=C.pP(),e=i.Hct(),n=i.qct();i.zct()?(i.Kct(O),s&&(A.Nh(n),i.$ct(O,C.dP()))):s?G?i.tft(O):(i.$ct(O,e),i.Kct(O)):i.Kct(O),C._gt()},T=function(t,s){I&&(s&&i(),O.clear(),C=null,I=!1)},s=function(t,s){const i=M.J3(s);if(i){const e=t.pP();if(e.zct()||e.Hct().includes(i))if(t.SY()){if(i.uF().wSt(t))return e.eft(i),t._gt(),!0}else if(i.uF()===t)return e.eft(i),t._gt(),!0}return!1},r=function(t,n){const r=t.pP();if(r.zct()){r.Vct(!1),r.jct();const i=t.dP();for(let t=0,s=i.length;t<s;++t){const e=i[t];e.vF()===n?r.Yct(e):r.Jct(e)}return t._gt(),!!r.Hct().length}{let i=r.Hct(),e=0;for(let t=0,s=i.length;t<s;++t){const h=i[t];(i[e]=h).vF()===n?r.Yct(h):++e}return A.Gh(i,e),t._gt(),!!i.length}},A=(d,l,n,N,E,D,_,e,i,T,s,r,self.Ls),u=new A.Ao,b={},v={},x={},M=null,h=(A.SSt=function(t){M=t},self.oF),w=(v.TSt=function(t,s){return A.compare(this.Z3().YS(),t,s)},x.TSt=function(t,s){return A.compare(this.x,t,s)},v.bSt=function(t,s){return A.compare(this.Z3().qS(),t,s)},x.bSt=function(t,s){return A.compare(this.y,t,s)},v.vSt=function(){return this.Z3().Rj()},x.vSt=function(){return this.Oj()},b.xSt=function(){const t=l(this),s=t._3(),i=t._j();return i.cu()<0||i.fu()<0||i.uu()>s.Jp()||i.lu()>s.im()},b.ISt=function(i,e,n){const t=this.pP(),r=t.dP();if(!r.length)return!1;let h=r[0],o=h.Z3(),a=h,u=A.dr(o.YS(),o.qS(),e,n);for(let t=1,s=r.length;t<s;++t){h=r[t],o=h.Z3();const l=A.dr(o.YS(),o.qS(),e,n);(0===i&&l<u||1===i&&l>u)&&(u=l,a=h)}return t.eft(a),!0},v.VS=function(t){const s=this.Z3();s.YS()!==t&&(s.VS(t),s.vj())},x.VS=function(t){this.x=+t},v.ZS=function(t){const s=this.Z3();s.qS()!==t&&(s.ZS(t),s.vj())},x.ZS=function(t){this.y=+t},v.CSt=function(t,s){const i=this.Z3();i.GSt(t,s)||(i.xj(t,s),i.vj())},x.CSt=function(t,s){this.setPosition(t,s)},b.NSt=function(t,s){if(t){const i=d(this),e=t.cP(i);if(e){const[n,r]=e.ESt(s),h=i.Z3();h.YS()===n&&h.qS()===r||(h.xj(n,r),h.vj())}}},b.DSt=function(t){if(0!==t){const s=l(this);s.Gj(s._St()*t,s.ASt()*t),s.vj()}},v.LSt=function(t,s){if(0!==s){const i=this.Z3();t=A.ur(t),i.Gj(Math.cos(t)*s,Math.sin(t)*s),i.vj()}},x.LSt=function(t,s){0!==s&&(t=A.ur(t),this.Cj(Math.cos(t)*s,Math.sin(t)*s))},v.YS=function(){return this.Z3().YS()},x.YS=function(){return this.x},v.qS=function(){return this.Z3().qS()},x.qS=function(){return this.y},b.KO=function(){return M.KO(d(this))},v.OSt=function(t,s){return A.compare(this.Z3().Jp(),t,s)},x.OSt=function(t,s){return A.compare(this.width,t,s)},v.RSt=function(t,s){return A.compare(this.Z3().im(),t,s)},x.RSt=function(t,s){return A.compare(this.height,t,s)},v.Kp=function(t){const s=this.Z3();s.Jp()!==t&&(s.Kp(t),s.vj())},x.Kp=function(t){this.width=t},v.Yp=function(t){const s=this.Z3();s.im()!==t&&(s.Yp(t),s.vj())},x.Yp=function(t){this.height=t},v.DG=function(t,s){const i=l(this);i.Jp()===t&&i.im()===s||(i.DG(t,s),i.vj())},x.DG=function(t,s){this.DP(t,s)},v.Jp=function(){return this.Z3().Jp()},x.Jp=function(){return this.width},v.im=function(){return this.Z3().im()},x.im=function(){return this.height},b.PSt=function(){return l(this)._j().uu()},b.kSt=function(){return l(this)._j().lu()},b.FSt=function(){return l(this)._j().cu()},b.jSt=function(){return l(this)._j().fu()},b.zSt=function(){const t=l(this)._j();return(t.uu()+t.cu())/2},b.BSt=function(){const t=l(this)._j();return(t.lu()+t.fu())/2},b.USt=function(t,s){return A.mr(l(this).OP(),A.ur(s))<=A.ur(t)},b.WSt=function(t){return A.yr(l(this).OP(),A.ur(t))},b.QSt=function(t,s){const i=A.ur(t),e=A.ur(s),n=l(this).OP(),r=!A.yr(e,i);return r?!(!A.yr(n,i)&&A.yr(n,e)):A.yr(n,i)&&!A.yr(n,e)},v.LP=function(t){const s=this.Z3(),i=A.hr(A.ur(t));isNaN(i)||s.OP()===i||(s.LP(i),s.vj())},x.LP=function(t){this.Dj=t},b.JSt=function(t){if(!isNaN(t)&&0!==t){const s=l(this);s.LP(s.OP()+A.ur(t)),s.vj()}},b.YSt=function(t){if(!isNaN(t)&&0!==t){const s=l(this);s.LP(s.OP()-A.ur(t)),s.vj()}},b.VSt=function(t,s){const i=l(this),e=i.OP(),n=A.gr(e,A.ur(s),A.ur(t));isNaN(n)||e===n||(i.LP(n),i.vj())},b.HSt=function(t,s,i){const e=l(this),n=e.OP(),r=s-e.YS(),h=i-e.qS(),o=Math.atan2(h,r),a=A.gr(n,o,A.ur(t));isNaN(a)||n===a||(e.LP(a),e.vj())},b.qSt=function(t,s){const i=l(this),e=i.OP(),n=t-i.YS(),r=s-i.qS(),h=Math.atan2(r,n);isNaN(h)||e===h||(i.LP(h),i.vj())},v.OP=function(){return A.lr(this.Z3().OP())},x.OP=function(){return this.Dj},b.ZSt=function(t,s){return A.compare(A.Ar(100*l(this).hD(),6),t,s)},v.Sk=function(){return this.Z3().Sk()},x.Sk=function(){return this.isVisible},b.Mk=function(t){const s=l(this);t=2===t?!s.Sk():0!==t,s.Sk()!==t&&(s.Mk(t),M.n4())},b.aD=function(t){const s=A.rr(t/100,0,1),i=l(this);if(i.I5()){if(i.vrt().XSt()===s)return}else if(i.hD()===s)return;i.aD(s),M.n4()},b.KSt=function(t){u.ua(t);const s=l(this);s.kj().$o(u)||(s.Fj(u),M.n4())},b.lD=function(){const t=l(this).kj();return A.Rr(t.Yo(),t.Vo(),t.Ho(),t.qo())},b.hD=function(){return A.Ar(100*l(this).hD(),6)},b.$St=function(t){return!!t&&l(this).X3()===t},b.tTt=function(i){const t=this.pP(),e=t.dP();if(!e.length)return!1;let s=e[0],n=s;for(let t=1,s=e.length;t<s;++t){const r=e[t],h=r.Z3(),o=n.Z3(),a=h.X3().$L(),u=o.X3().$L();0===i?(u<a||a===u&&h.K3()>o.K3())&&(n=r):(a<u||a===u&&h.K3()<o.K3())&&(n=r)}return t.eft(n),!0},v.sTt=function(t,s,i){const e=this.Z3(),n=0===t?e.XS():e.Ej();return A.compare(n,s,i)},x.sTt=function(t,s,i){const e=0===t?this.kk:this.Nj;return A.compare(e,s,i)},v.iTt=function(){this.Z3().zj()},x.iTt=function(){this.jj()},v.eTt=function(){this.Z3().Uj()},x.eTt=function(){this.Bj()},b.nTt=function(t){t&&l(this).Qj(t)},b.rTt=function(t,s){const i=0===t;if(s){const e=d(this),n=s.hTt(e);n&&e.Z3().Yj(n,i)}},v.KS=function(t){const s=this.Z3();s.XS()!==t&&(s.KS(t),M.n4())},x.KS=function(t){this.kk=t},b.oTt=function(){return l(this).X3().$L()},b.aTt=function(){return l(this).X3().kc()},v.uTt=function(){return this.Z3().K3()},x.uTt=function(){return this.zIndex},v.lTt=function(){return this.Z3().XS()},x.lTt=function(){return this.kk},v.cTt=function(){return this.Z3().Ej()},x.cTt=function(){return this.Nj},b.fTt=function(t){const s=d(this),i=s.uF().CP().nnt(t);if(i){const e=i.$L(),n=s.Z3().Tj();return n.uz(e)}},b.dTt=function(t,s){const i=d(this),e=i.uF().CP().nnt(s);if(e){const n=e.$L(),r=1===t,h=i.Z3().Tj();h.uz(n)!==r&&(h.lz(n,r),h.cz(),M.n4())}},b.pTt=function(t,s,i){const e=d(this),n=e.uF().CP().nnt(t);if(n){s=Math.floor(s);const r=n.Lv().Rv(s);if(r){"color"===r?(u.ua(i),i=u):"percent"===r&&(i/=100);const h=n.$L(),o=e.Z3().Tj(),a=o.dz(h,s,i);a&&o.uz(h)&&M.n4()}}},A.Xn(A.Rect)),L=[],S=[],I=!1,C=null,G=!1,O=new Set;b.mTt=function(M){if(this.Jc.gTt())return function*(M){if(M){let t=this.Jc,s=t.hO(),e=t.DO(),i=e.WO(),n=e.q0t(),r=n.uF(),h=n.xwt(),o=n.Iwt(),a=i.p6(),u=t.stt(),l=u-1,c=a.PO(),f=i.m6(c),d=h.get("collmemory"),p=(d||(d=A.Xn(A.Fl),h.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Gf().addEventListener("instancedestroy",t=>D(d,t.nz))),r.pP()),m=M.pP(),g=p.dP(),y=null;for(let t=0;t<g.length;++t){const w=g[t];m.zct()?(s.ySt(w.Z3().X3(),M,w.Z3()._j(),L),y=L,s.yTt(w,M,y)):y=m.dP();for(let t=0;t<y.length;++t){const S=y[t];if(s.U4(w,S)||s.MTt(w,S)){let t=_(d,w,S),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const T=!s||i<l;if(N(d,w,S,u),T){const b=c.d6(),v=(e.S6(b),r.pP()),x=M.pP();if(v.Vct(!1),x.Vct(!1),r===M){const I=v.Hct();A.Nh(I),I.push(w),I.push(S),r._gt()}else{const C=v.Hct(),G=x.Hct();A.Nh(C),A.Nh(G),C.push(w),G.push(S),r._gt(),M._gt()}yield*c.bgt(a,f),e.b6(b)}}else E(d,w,S)}A.Nh(L)}i.C6()}return!1}.call(this,M);if(M){let t=this.Jc,s=t.hO(),e=t.DO(),i=e.WO(),n=e.q0t(),r=n.uF(),h=n.xwt(),o=n.Iwt(),a=i.p6(),u=t.stt(),l=u-1,c=a.PO(),f=i.m6(c),d=h.get("collmemory"),p=(d||(d=A.Xn(A.Fl),h.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Gf().addEventListener("instancedestroy",t=>D(d,t.nz))),r.pP()),m=M.pP(),g=p.dP(),y=null;for(let t=0;t<g.length;++t){const w=g[t];m.zct()?(s.ySt(w.Z3().X3(),M,w.Z3()._j(),L),y=L,s.yTt(w,M,y)):y=m.dP();for(let t=0;t<y.length;++t){const S=y[t];if(s.U4(w,S)||s.MTt(w,S)){let t=_(d,w,S),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const T=!s||i<l;if(N(d,w,S,u),T){const b=c.d6(),v=(e.S6(b),r.pP()),x=M.pP();if(v.Vct(!1),x.Vct(!1),r===M){const I=v.Hct();A.Nh(I),I.push(w),I.push(S),r._gt()}else{const C=v.Hct(),G=x.Hct();A.Nh(C),A.Nh(G),C.push(w),G.push(S),r._gt(),M._gt()}c.T6(a,f),e.b6(b)}}else E(d,w,S)}A.Nh(L)}i.C6()}return!1},b.wTt=function(t){return e(d(this),t,0,0)},b.STt=function(t,s,i){return e(d(this),t,s,i)},b.l5=function(){return l(this).l5()},b.HH=function(){return l(this).HH()},b.TTt=function(i,e){const t=this.pP(),n=t.dP();if(0===n.length)return!1;let s=i.pP(),r=s.dP();if(s.zct()){const a=[...this.Jc.bTt(i)];0<a.length&&(r=r.concat(a))}if(0===r.length)return!1;const h=s.zct()?null:new Set(r),o=new Set;for(let t=0,s=n.length;t<s;++t){const u=n[t];if(1===e)for(const l of u.t5())l.vTt(i)&&(null===h||h.has(l))&&o.add(l);else{let t;if(0===e){if(null===(t=u.Xj()))continue}else t=u.$j();t.vTt(i)&&(null===h||h.has(t))&&o.add(t)}}return 0!==o.size&&(s.Kct(o),i._gt(),!0)},b.xTt=function(i,e){const t=this.pP(),n=t.dP();if(0===n.length)return!1;let s=i.pP(),r=s.dP();if(s.zct()){const a=[...this.Jc.bTt(i)];0<a.length&&(r=r.concat(a))}if(0===r.length)return!1;const h=s.zct()?null:new Set(r),o=new Set;for(let t=0,s=n.length;t<s;++t){const u=n[t];2!==e||u.HH()||!u.vTt(i)||null!==h&&!h.has(u)||o.add(u);for(const l of 0===e?u.children():u.r5())2===e&&l.HH()||l.vTt(i)&&(null===h||h.has(l))&&o.add(l)}return 0!==o.size&&(s.Kct(o),i._gt(),!0)},b.ITt=function(i,e,n){const t=this.pP(),r=t.dP();if(0===r.length)return!1;let s=i.pP(),h=s.dP();if(s.zct()){const u=[...this.Jc.bTt(i)];0<u.length&&(h=h.concat(u))}if(0===h.length)return!1;const o=s.zct()?null:new Set(h),a=[];for(let t=0,s=r.length;t<s;++t){const l=r[t];if(0===e){const c=l.n5(n);null!==c&&c.vTt(i)&&(null===o||o.has(c))&&a.push(c)}else if(1===e)for(const f of l.children())if(f.vTt(i)){if(0===n){null!==o&&!o.has(f)||a.push(f);break}--n}}return 0!==a.length&&(s.Xct(a),i._gt(),!0)},b.CTt=function(t,s,i){const e=d(this);switch(t){case 0:default:return A.compare(e.i5(),s,i);case 1:return A.compare(e.GTt(),s,i)}},b.o5=function(t,s,i,e,n,r,h,o,a,u){const l=d(this),c=M.X0t().uF();for(const f of t.NTt(l,c)){if(!f.iP().UR())return;l.o5(f,{f5:s,p5:i,g5:e,M5:n,S5:r,x5:h,b5:o,C5:a,N5:u})}},b.a5=function(t){const s=d(this),i=M.X0t().uF();for(const e of t.NTt(s,i))s.a5(e)},b.ETt=function(){const t=d(this);if(t.l5()){const s=t.Xj();s.a5(t)}},b.DTt=function(){return d(this).i5()},b._Tt=function(){return d(this).GTt()},b.ATt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=l(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.L5(),i.vj()):i._5(t,s)},b.R5=function(t,s,i,e,n,r,h,o){const a=l(this),u=a.R5(t,s,{mode:0===i?"absolute":"relative",x:e,y:n,kk:r,u:h,v:o});u&&a.vj()},b.LTt=function(){const t=l(this);return t.k5()?t.F5().TT():0},b.OTt=function(){const t=l(this);return t.k5()?t.F5().bT():0},b.RTt=function(t){const s=l(this);t=2===t?!s.Sk():0!==t,s.Sk()!==t&&s.Mk(t)},b.q5=function(t,s){this instanceof self.oF?this._U(t,s):this.q5(t,s)},b.PTt=function(t,s){this instanceof self.oF?this.AU(t,""+s):this.PTt(t,""+s)},b.kTt=function(t){this instanceof self.oF?this.LU(t):this.kTt(t)},b.FTt=function(){this instanceof self.oF?this.NU():this.Y5()},b.jTt=function(){this instanceof self.oF?this.EU():this.V5()},b.zTt=function(){return this instanceof self.oF?this.DU():this.zTt()},b.BTt=function(t){this instanceof self.oF?this._setEnabled(0!==t):this._SetEnabled(0!==t)},b.UTt=function(){return this instanceof self.oF?this.qgt():this._IsEnabled()},v.WTt=function(t,s,i){return A.compare(this.TB().frt(t),s,i)},x.WTt=function(t,s,i){return A.compare(n(this).frt(t),s,i)},v.QTt=function(t){return!!this.TB().frt(t)},x.QTt=function(t){return!!n(this).frt(t)},b.JTt=function(i,e){const t=this.pP(),n=t.dP();if(!n.length)return!1;let r=this.SY(),h=null,o=0;for(let t=0,s=n.length;t<s;++t){const a=n[t],u=r?a.uF().$yt(this.tMt()):0,l=a.frt(u+e);(null===h||0===i&&l<o||1===i&&l>o)&&(o=l,h=a)}return t.eft(h),!0},b.YTt=function(t){return(this.Jc.q0t().wwt()?r:s)(this,t)},b.iB=function(t){const s=new Set(A.Wh(t)),i=d(this).DF();return s.re(i)},b.VTt=function(){return d(this).HTt()},b.qTt=function(){return d(this).DF().size},b.ZTt=function(t){return d(this).XTt(t)},b.KTt=function(t,s){const i=A.Wh(s);if(0!==i.length){const e=d(this),n=new Set(e.DF());if(0===t)for(const r of i)n.add(r);else if(1===t)for(const h of i)n.delete(h);e.AF(n)}},b.$Tt=function(){M.gF(d(this))},b.t2t=function(){return!0},b.s2t=function(){return!0},v.i2t=function(t,s){this.TB().drt(t,s)},x.i2t=function(t,s){n(this).drt(t,s)},v.e2t=function(t,s){const i=this.TB(),e=i.frt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.drt(t,e+s)},x.e2t=function(t,s){const i=n(this),e=i.frt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.drt(t,e+s)},v.n2t=function(t,s){const i=this.TB(),e=i.frt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.drt(t,e-s))},x.n2t=function(t,s){const i=n(this),e=i.frt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.drt(t,e-s))},v.r2t=function(t,s){this.TB().drt(t,s?1:0)},x.r2t=function(t,s){n(this).drt(t,s?1:0)},v.h2t=function(t){const s=this.TB();s.drt(t,0===s.frt(t)?1:0)},x.h2t=function(t){const s=n(this);s.drt(t,0===s.frt(t)?1:0)},b.o2t=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=d(this);M.a2t(),i.aZ("state"),i.hT(s,"state"),M.u2t("state",{l2t:!0})},b.c2t=function(){return JSON.stringify(d(this).rT("state"))},b.f2t=function(){return d(this).uF().kc()},b.d2t=function(){let t=M.H0t().Oft(),s=t.gP();for(const i of M.bTt(t))++s;return s},b.p2t=function(){return M.H0t().Oft().pP().dP().length},v.k9=function(){return this.TB().k9()},x.k9=function(){return n(this).k9()},v.vF=function(){return this.TB().vF()},x.vF=function(){return n(this).vF()},b.Sdt=function(t){const s=d(this);return t.toLowerCase()===M.DO().xdt(s)},b.OF=function(t){const s=d(this);M.DO().OF(s,t)},b.m2t=function(t){return M.DO().Z1t().g2t(this.pP().dP(),t),!0},b.y2t=function(){return d(this).IF()},A.M2t=function(t,s,i){const e=t[1],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],u=t[8],l=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.A9,M=s.xnt,w=s.Int,S=Object.assign({},b,2<=i?x:v);n&&(y.TSt=S.TSt,y.bSt=S.bSt,y.vSt=S.vSt,y.xSt=S.xSt,y.ISt=S.ISt,M.VS=S.VS,M.ZS=S.ZS,M.CSt=S.CSt,M.NSt=S.NSt,M.DSt=S.DSt,M.LSt=S.LSt,w.w2t=S.YS,w.S2t=S.qS,w.XO=S.KO),r&&(y.OSt=S.OSt,y.RSt=S.RSt,M.Kp=S.Kp,M.Yp=S.Yp,M.DG=S.DG,w.T2t=S.Jp,w.b2t=S.im,w.v2t=S.PSt,w.x2t=S.kSt,w.I2t=S.FSt,w.C2t=S.jSt,w.G2t=S.zSt,w.N2t=S.BSt),h&&(y.E2t=S.USt,y.D2t=S.WSt,y.QSt=S.QSt,M.LP=S.LP,M.JSt=S.JSt,M.YSt=S.YSt,M.VSt=S.VSt,M.HSt=S.HSt,M.qSt=S.qSt,w._2t=S.OP),o&&(y.Sk=S.Sk,y.ZSt=S.ZSt,M.Mk=S.Mk,M.aD=S.aD,M.KSt=S.KSt,w.Opacity=S.hD,w.A2t=S.lD),a&&(y.$St=S.$St,y.tTt=S.tTt,y.sTt=S.sTt,M.iTt=S.iTt,M.eTt=S.eTt,M.nTt=S.nTt,M.rTt=S.rTt,M.KS=S.KS,w.oTt=S.oTt,w.aTt=S.aTt,w.uTt=S.uTt,w.lTt=S.lTt,w.cTt=S.cTt),u&&(y.fTt=S.fTt,M.dTt=S.dTt,M.pTt=S.pTt),d&&(y.l5=S.l5,y.HH=S.HH,y.TTt=S.TTt,y.xTt=S.xTt,y.ITt=S.ITt,y.CTt=S.CTt,M.o5=S.o5,M.a5=S.a5,M.ETt=S.ETt,w.DTt=S.DTt,w._Tt=S._Tt),p&&(M.ATt=S.ATt,M.R5=S.R5,w.LTt=S.LTt,w.OTt=S.OTt),l&&(y.Sk=S.Sk,M.Mk=S.RTt,M.L2t=S.q5,M.O2t=S.PTt,M.R2t=S.kTt),c&&(y.P2t=S.zTt,M.k2t=S.FTt,M.F2t=S.jTt),f&&(y.kl=S.UTt,M.j2t=S.BTt),m&&(y.mTt=S.mTt,y.wTt=S.wTt,y.STt=S.STt,s.z2t=T),e||(y.WTt=S.WTt,y.QTt=S.QTt,y.JTt=S.JTt,y.YTt=S.YTt,y.iB=S.iB,M.i2t=S.i2t,M.e2t=S.e2t,M.n2t=S.n2t,M.r2t=S.r2t,M.h2t=S.h2t,M.KTt=S.KTt,y.t2t=S.t2t,y.s2t=S.s2t,M.$Tt=S.$Tt,M.o2t||(M.o2t=S.o2t),w.c2t||(w.c2t=S.c2t),w.d2t=S.d2t,w.p2t=S.p2t,w.B2t=S.k9,w.U2t=S.vF,w.f2t=S.f2t,w.VTt=S.VTt,w.qTt=S.qTt,w.ZTt=S.ZTt,y.Sdt=S.Sdt,M.OF=S.OF,M.m2t=S.m2t),g&&(w.y2t=S.y2t)}}{const qo=self.Ls;qo.X1t=class extends qo.qn{constructor(t){super(),this.hft=t,this.$c="",this.AA=-1,this.W2t="",this.Q2t=!1,this.J2t=null,this.mft=0,this.Wpt=[],this.Tft=null,this.Y2t=new Map,this.V2t=null,this.H2t=null,this.q2t=-1,this.Hgt=null,this.Z2t=null,this.X2t=!1}Kn(){this.$c="",this.AA=-1,this.W2t="",this.J2t=null,this.H2t=null,this.Hgt=null,this.Z2t=null,this.q2t=-1,qo.Nh(this.Wpt),this.Tft&&(this.Tft.clear(),this.Tft=null);for(const t of this.Y2t.values())t.Kn();this.Y2t.clear(),this.V2t=null}JS(){const t=this.hft,s=t.w4().wY(),i=t.H0t(),e=(this.J2t=i.PO(),this.mft=i.Gft()+1,t.Udt(this.J2t));e&&(this.H2t=e,this.Hgt=e.cyt(),this.Z2t=e.lyt().map(t=>t.Vit()),e.mgt())&&(this.q2t=e.myt());for(const r of s){const h=r.pP();h.zct()&&!this.J2t.jmt(r)||(this.Wpt.push(r),this.Y2t.set(r,qo.Xn(qo.K2t,h)))}const n=t.kO();this.Tft=0<n.size?n:null}$2t(t){this.$c="timer",this.JS(),this.AA=this.hft.w4().i3()+t}tbt(t){this.$c="signal",this.JS(),this.W2t=t.toLowerCase()}g2t(t,s){this.$c="instance-signals",this.JS(),this.W2t=s.toLowerCase(),this.V2t=new Set(t)}sbt(t){this.$c="promise",this.JS(),t.then(()=>this.gdt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.gdt()})}ibt(){return"timer"===this.$c}pdt(){return"signal"===this.$c}bdt(){return"instance-signals"===this.$c}Fdt(){return"promise"===this.$c}mdt(){return this.W2t}ebt(){return this.Q2t}gdt(){this.Q2t=!0}vdt(t){this.V2t.delete(t),0===this.V2t.size&&this.gdt()}tdt(){return this.ibt()?this.AA<=this.hft.w4().i3():this.ebt()}nbt(t){t.bft(this.J2t,this.mft);for(const[i,e]of this.Y2t.entries()){const n=i.pP();e.bft(n)}this.Tft&&t.zft([...this.Tft]);const s=this.H2t;s&&(s.Cgt(this.Hgt),s.lyt().map((t,s)=>t.Aet(this.Z2t[s])),s.mgt())&&s.gyt(this.q2t)}sdt(t){this.nbt(t),this.J2t.ggt(t),this.H2t&&this.H2t.mgt()&&this.H2t.Pgt(this.q2t),this.hft.Y1t(this.Wpt),this.X2t=!0}async rdt(t){this.nbt(t);for(const s of this.J2t.ygt(t))await this.hft.w4().E1t(s);this.H2t&&this.H2t.mgt()&&this.H2t.Pgt(this.q2t),this.hft.Y1t(this.Wpt),this.X2t=!0}idt(){return this.X2t}Rct(t){for(const s of this.Y2t.values())s.Rct(t);if("instance-signals"===this.$c){for(const i of t)this.V2t.delete(i);0===this.V2t.size&&this.gdt()}}QH(){const t={},s={wt:this.$c,t:this.AA,st:this.W2t,s:this.Q2t,ev:this.J2t.NY(),sm:this.Wpt.map(t=>t.NY()),dsm:this.Tft?[...this.Tft].map(t=>t.NY()):null,sols:t};this.J2t.egt(this.mft)&&(s.act=this.J2t.K0t(this.mft).NY());for(const[i,e]of this.Y2t)t[i.NY().toString()]=e.QH();return"instance-signals"===this.$c&&(s.pi=[...this.V2t].map(t=>t.vF())),s}static jdt(t,s){const i=t.w4(),e=t.o1t(s.ev);if(!e)return null;let n=0;if(s.hasOwnProperty("act")){const h=t.u1t(s.act);if(!h)return null;n=h.$L()}const r=qo.Xn(qo.X1t,t);r.AA=s.t,s.hasOwnProperty("wt")?r.$c=s.wt:r.$c=-1===r.AA?"signal":"timer",r.W2t=s.st,r.Q2t=s.s,r.J2t=e,r.mft=n;for(const o of s.sm){const a=i.h6(o);a&&r.Wpt.push(a)}if(Array.isArray(s.dsm))for(const u of s.dsm){const l=i.h6(u);l&&(r.Tft||(r.Tft=new Set),r.Tft.add(l))}for(const[c,f]of Object.entries(s.sols)){const d=parseInt(c,10),p=i.h6(d);if(p){const m=qo.Xn(qo.K2t,null);m.JH(t,f),r.Y2t.set(p,m)}}if("instance-signals"===r.$c){r.V2t=new Set;for(const g of s.pi){const y=i.J3(g);y&&r.V2t.add(y)}}return r}}}{const Zo=self.Ls;Zo.K2t=class extends Zo.qn{constructor(t){super(),this.Nct=null,this.rbt=!0,this.m8=[],t&&(this.Nct=t.uF(),this.rbt=t.zct(),Zo.Ah(this.m8,t.Hct()))}Kn(){this.Nct=null,Zo.Nh(this.m8)}bft(t){t.Vct(this.rbt),Zo.Ah(t.Hct(),this.m8)}Rct(t){Zo.kh(this.m8,t)}QH(){return{sa:this.rbt,insts:this.m8.map(t=>t.vF())}}JH(t,s){const i=t.w4();this.rbt=!!s.sa,Zo.Nh(this.m8);for(const e of s.insts){const n=i.J3(e);n&&this.m8.push(n)}}}}{let u=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};u;const Xo=self.Ls;Xo.hbt=class extends Xo.qn{constructor(t){super(),this.Jc=t.runtime,this.obt=!!t.ER,this.abt=!!t.ubt,this.lbt=!!t.RR,this.cbt=!!t.fbt,this.dbt=!!t.kR,this.pbt=!!t.mbt,this.gbt=!!t.WR,this.ybt=!!t.LR,this.Mbt=!!t.jR,this.wbt=t.Sbt,this.Tbt=null,this.bbt=new Map,this.vbt=new Map,this.xbt=new Map,this.Ibt=new Map,this.Cbt=t.Gbt,this.Nbt=null}Kn(){this.Jc=null}w4(){return this.Jc}Ebt(){}Tdt(){return(2<=this.Mwt()?this.Nbt:this).constructor}Mwt(){return this.wbt}Dbt(t=!1){let s=this.Cbt;return t&&"function"!=typeof s&&2<=this.Mwt()?globalThis.NB:s}DR(){return this.obt}AR(){return this.abt}OR(){return this.ybt}zR(){return this.Mbt}PR(){return this.lbt}SS(){return this.cbt}FR(){return this.dbt}UR(){return this.pbt}QR(){return this.gbt}Byt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.bbt.get(t);return i||(i=t.bind(s),this.bbt.set(t,i)),i}pwt(t,s,i){if(!s)throw new Error("missing 'this' binding");let e=u(this.vbt,t),n=e.get(i);return n||(n=t.bind(s,i),e.set(i,n)),n}mwt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");let n=u(this.xbt,t),r=u(n,i),h=r.get(e);return h||(h=t.bind(s,i,e),r.set(e,h)),h}gwt(t,s,i,e,n){if(!s)throw new Error("missing 'this' binding");let r=u(this.Ibt,t),h=u(r,i),o=u(h,e),a=o.get(n);return a||(a=t.bind(s,i,e,n),o.set(n,a)),a}_bt(t){if(!this.DR())throw new Error("must be single-global plugin");this.Tbt=t}ZR(){if(this.DR())return this.Tbt;throw new Error("must be single-global plugin")}$R(){if(this.DR())return this.Tbt.$R();throw new Error("must be single-global plugin")}Abt(){const t=this.Mwt(),s=(Xo.GR.Lbt(this,t),this.Dbt(!0));if(s){if(this.Nbt=new s,!(this.Nbt instanceof self.xR))throw new TypeError("plugin class must derive from IPlugin")}else this.Nbt=new self.xR;Xo.GR.Obt(t)}VR(){return this.Nbt}}}{const Ko=self.Ls;Ko.Rbt=class extends Ko.hbt{constructor(t,s){super(t),this.Pbt=s,this.kbt=0,this.Fbt=new Map,this.jbt("elem-focused",t=>t.zbt()),this.jbt("elem-blurred",t=>{t&&t.Bbt()})}Kn(){super.Kn()}Ubt(t){const s=this.kbt++;return this.Fbt.set(s,t),s}Wbt(t){this.Fbt.delete(t)}jbt(t,i){this.Jc.KF(this.Pbt,t,t=>{const s=this.Fbt.get(t.elementId);i(s,t)})}}}{const $o=self.Ls;$o.Qbt=class extends $o.qn{constructor(t){super(),this.Nct=t,this.Jc=t.w4(),this.Jbt=t.iP()}Kn(){this.Nct=null,this.Jc=null,this.Jbt=null}uF(){return this.Nct}w4(){return this.Jc}iP(){return this.Jbt}_z(){return this.Nct._z()}Ebt(){}Dwt(t){}mSt(t){}gSt(t){}i9(t){}a9(){}r9(){}N9(t){}Ybt(){}Dbt(){return null}Vbt(t,s,i){const e=$o.Xn($o.Event,t,s);e.Hbt=this,i&&Object.assign(e,i),this.uF().cq(e)}}}{const ta=self.Ls;ta.qbt=class extends ta.qn{constructor(t,s){super(),this.wi=t,this.Pbt=s,this.Zbt=null,this.Jc=t.w4(),this.Nct=this.wi.uF(),this.Xbt=this.Nct.pSt(),this.Xq=null,this.$q=null,this.nj=!1,this.hj=!1,this.r0=null,this.sG=!1}Kn(){this.sG=!0,this.Kbt(),this.$bt(),this.Xq=null,this.$q=null,this.r0&&(this.r0.Kn(),this.r0=null),this.wi=null,this.Jc=null,this.Nct=null,this.Xbt=null}$n(){return this.sG}TB(){return this.wi}w4(){return this.Jc}uF(){return this.Nct}iP(){return this.Xbt.iP()}pSt(){return this.Xbt}tvt(){return this.wi.Y3()}HF(t){return this.Jc.HF(t,this.wi,null)}svt(t){return this.Jc.svt(t,this.wi,null)}ZF(t){return this.Jc.ZF(t,this.wi,null)}ivt(t,s){return this.Jc.ivt(t,this.wi,s)}evt(t,s){return this.Jc.evt(t,this.wi,s)}nvt(t){return this.Jc.nvt(t)}rvt(t,s){this.Jc.KF(this.Pbt,t,s)}hvt(t){for(const[s,i]of t)this.rvt(s,i)}ovt(t,s){this.Jc.Hc(this.Pbt,t,s)}avt(t,s){return this.Jc.h4(this.Pbt,t,s)}uvt(t,s){if(!this.Jc.pO())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.Pbt,handler:t,data:s,responseId:null});this.ovt(t,s)}lvt(t){if(!t)throw new Error("cannot set empty component id");this.Zbt=t}cvt(){if(this.Zbt)return this.Jc.cj(this.Zbt);throw new Error("wrapper extension component id not set")}dj(t,s){if(!this.Zbt)throw new Error("wrapper extension component id not set");this.Jc.dj(this.Zbt,t,s)}fvt(t){for(const[s,i]of t)this.dj(s,i)}ZU(t,s){if(!this.Zbt)throw new Error("wrapper extension component id not set");this.Jc.ZU(this.Zbt,t,s)}XU(t,s){if(this.Zbt)return this.Jc.XU(this.Zbt,t,s);throw new Error("wrapper extension component id not set")}hX(){}dvt(){}pvt(){this.nj||(this.Xq||(this.Xq=()=>this.hX()),this.Jc.Gf().addEventListener("tick",this.Xq),this.nj=!0)}Kbt(){this.nj&&(this.Jc.Gf().removeEventListener("tick",this.Xq),this.nj=!1)}mvt(){return this.nj}gvt(){this.hj||(this.$q||(this.$q=()=>this.dvt()),this.Jc.Gf().addEventListener("tick2",this.$q),this.hj=!0)}$bt(){this.hj&&(this.Jc.Gf().removeEventListener("tick2",this.$q),this.hj=!1)}yvt(){return this.hj}Mvt(){return[]}rT(){return null}hT(t){}ert(t){}urt(t,s){}eht(t,s,i){if(0!==s){const e=this.ert(t);if("number"!=typeof e)throw new Error("expected number");this.urt(t,e+s,i)}}wvt(t,s,i,e){}Svt(t,...s){t.call(this,...s)}Tvt(t,...s){return t.call(this,...s)}Dbt(){return null}Vbt(t,s,i){if(this.wi.bvt()){const e=this.tvt(),n=ta.Xn(ta.Event,t,s);n.nz=e,i&&Object.assign(n,i),e.dispatchEvent(n)}}SS(){return!1}}}{const sa=self.Ls;sa.vvt=class extends sa.qbt{constructor(t,s){super(t,s),this.sst=t.Z3(),this.xvt=null,this.Ivt=null}Kn(){if(this.xvt){const t=this.Jc.Gf();t.removeEventListener("renderercontextlost",this.xvt),t.removeEventListener("renderercontextrestored",this.Ivt),this.xvt=null,this.Ivt=null}this.sst=null,super.Kn()}Cvt(){this.Gvt()}Nvt(){}Evt(){}Gvt(){if(!this.xvt){this.xvt=()=>this.o8(),this.Ivt=()=>this.Dvt();const t=this.Jc.Gf();t.addEventListener("renderercontextlost",this.xvt),t.addEventListener("renderercontextrestored",this.Ivt)}}o8(){this.Nvt()}Dvt(){this.Evt()}Z3(){return this.sst}Jst(){return!1}Qst(){if(!this.Jst())throw new Error("original size not known");const t=this._vt();if(t)return t.Jp()}Vst(){if(!this.Jst())throw new Error("original size not known");const t=this._vt();if(t)return t.im()}_vt(){return null}Avt(){const t=this._vt();if(t){const s=t.lb();if(s)return[s.Jp(),s.im()]}return[100,100]}Lvt(){const t=this._vt();return t?t.aN():null}Ovt(){const t=this._vt();return t?t.Rvt():null}Pvt(){const t=this._vt();return!!t&&t.kvt()}ESt(t){const s=this.wi.Z3();return[s.YS(),s.qS(),s.Ej()]}Ybt(t,s,i){}Fvt(t,s){}bH(){return!0}}}{const ia=self.Ls,ea=ia.Xn(ia.Rect);ia.jvt=class extends ia.vvt{constructor(t,s){super(t,s),this.zvt=this.iP().Ubt(this),this.Bvt=!0,this.Uvt=!1,this.Wvt=!1,this.Qvt=-.2,this.Jvt=ia.Xn(ia.Rect,0,0,-1,-1);const i=this.Jc.lR();this.Yvt=i.fU(),this.Vvt=i.dU(),this.Hvt=-1,this.qvt=-1,this.Zvt=!1,this.pvt()}Kn(){this.iP().Wbt(this.zvt),this.Xvt("destroy"),this.zvt=-1,super.Kn()}Q5(){if(this.Jc.pO())throw new Error("not valid in worker mode");return this.Kvt("get-element")}Xvt(t,s){(s=s||{}).elementId=this.zvt,this.ovt(t,s)}Kvt(t,s){return(s=s||{}).elementId=this.zvt,this.uvt(t,s)}$vt(t,s){return(s=s||{}).elementId=this.zvt,this.avt(t,s)}txt(t){t=t||{};const s=this.Z3();t.elementId=this.zvt,t.isVisible=s.Sk(),t.htmlIndex=s.X3().wU(),t.htmlZIndex=s.SU(),Object.assign(t,this.sxt()),this.Bvt=!!t.isVisible,this.uvt("create",t),this.ixt(!0)}RTt(t){this.Bvt!==(t=!!t)&&(this.Bvt=t,this.Xvt("set-visible",{isVisible:t}))}hX(){this.ixt(!1)}nxt(){const t=this.Jc.lR().IU();return"Android"===ia.ei.ni&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}ixt(l){if(!this.TB().CU()){let t=this.Z3(),s=t.X3(),i=t._j(),[e,n]=s.tF(i.uu(),i.lu()),[r,h]=s.tF(i.cu(),i.fu()),o=this.Jc.lR(),a=o.pR(),u=o.gR();if(t.Sk()&&s.Sk())if(!this.nxt()&&(r<=0||h<=0||a<=e||u<=n))this.RTt(!1);else{ea.set(e,n,r,h);const c=o.fU(),f=o.dU(),d=s.wU(),p=t.SU();if(!l&&ea.equals(this.Jvt)&&this.Yvt===c&&this.Vvt===f&&this.Hvt===d&&this.qvt===p)this.RTt(!0);else{this.Jvt.I(ea),this.Yvt=c,this.Vvt=f,this.Hvt=d,this.qvt=p,this.RTt(!0);let t=null;this.Wvt&&(t=s.GU()+this.Qvt),this.Xvt("update-position",{left:Math.round(this.Jvt.uu()),top:Math.round(this.Jvt.lu()),width:Math.round(this.Jvt.width()),height:Math.round(this.Jvt.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this.RTt(!1)}}Y5(){this.Kvt("focus",{focus:!0})}V5(){this.Kvt("focus",{focus:!1})}zbt(){this.Uvt=!0}Bbt(){this.Uvt=!1}zTt(){return this.Uvt}q5(t,s){this.Xvt("set-css-style",{prop:ia.Eo(t),val:s})}PTt(t,s){this.Xvt("set-attribute",{name:t,val:s})}kTt(t){this.Xvt("remove-attribute",{name:t})}rxt(){this.Zvt||(this.Zvt=!0,Promise.resolve().then(()=>{this.Zvt=!1,this.Xvt("update-state",this.sxt())}))}sxt(){}hxt(){return this.zvt}}}{const na=self.Ls,ra=self.oz;na.oxt=class extends na.qn{constructor(t){super(),this.Jc=t.runtime,this.axt=na.Xn(na.Yl),this.uxt=na.Xn(na.Yl),this.wbt=t.Sbt,this.Cbt=t.Gbt,this.lxt=null}Kn(){this.uxt.Kn(),this.axt.Kn(),this.Jc=null}w4(){return this.Jc}Ebt(){}Mwt(){return this.wbt}Dbt(t=!1){let s=this.Cbt;return t&&"function"!=typeof s&&2<=this.Mwt()?globalThis.PU:s}cxt(t){this.axt.Zl(t)}LZ(){return this.axt.Xl()}hY(t){this.uxt.Zl(t)}lY(t){this.uxt.Ul(t)}dP(){return this.uxt.Xl()}Abt(){const t=this.Mwt(),s=(na.GR.Lbt(this,t),this.Dbt(!0));if(s){if(this.lxt=new s,!(this.lxt instanceof ra))throw new TypeError("behavior class must derive from IBehavior")}else this.lxt=new ra;na.GR.Obt(t)}X5(){return this.lxt}}}{const ha=self.Ls;ha.fxt=class extends ha.qn{constructor(t){super(),this.Jc=t.w4(),this.iMt=t,this.Nct=t.uF(),this.dxt=t.K5(),this.dxt.cxt(this.Nct)}Kn(){this.Jc=null,this.iMt=null,this.Nct=null,this.dxt=null}Ebt(){}ez(){return this.iMt}uF(){return this.Nct}w4(){return this.Jc}K5(){return this.dxt}}}{const oa=self.Ls;oa.pxt=class extends oa.qn{constructor(t,s){super(),this.mxt=t,this.Pbt=s,this.wi=t.rz(),this.Jc=t.w4(),this.iMt=t.ez(),this.Xbt=this.iMt.pSt(),this.nj=!1,this.hj=!1,this.HU=!1,this.r0=null}Kn(){this.Kbt(),this.$bt(),this.gxt(),this.r0&&(this.r0.Kn(),this.r0=null),this.mxt=null,this.wi=null,this.Jc=null,this.iMt=null,this.Xbt=null}K5(){return this.iMt.K5()}yxt(){return this.mxt}rz(){return this.wi}uF(){return this.wi.uF()}Z3(){return this.wi.Z3()}w4(){return this.Jc}ez(){return this.iMt}pSt(){return this.Xbt}tvt(){return this.mxt.tvt()}HF(t){return this.Jc.HF(t,this.wi,this.iMt)}svt(t){return this.Jc.svt(t,this.wi,this.iMt)}ZF(t){return this.Jc.ZF(t,this.wi,this.iMt)}Mxt(){}hX(){}dvt(){}wxt(){}pvt(){this.nj||(this.Jc.UU(this),this.nj=!0)}Kbt(){this.nj&&(this.Jc.WU(this),this.nj=!1)}mvt(){return this.nj}gvt(){this.hj||(this.Jc.QU(this),this.hj=!0)}$bt(){this.hj&&(this.Jc.JU(this),this.hj=!1)}yvt(){return this.hj}Sxt(){this.HU||(this.Jc.YU(this),this.HU=!0)}gxt(){this.HU&&(this.Jc.VU(this),this.HU=!1)}Txt(){return this.HU}Mvt(){return[]}rvt(t,s){this.Jc.KF(this.Pbt,t,s)}bxt(t,s){}rT(){return null}hT(t){}ert(t){}urt(t,s){}eht(t,s){if(0!==s){const i=this.ert(t);if("number"!=typeof i)throw new Error("expected number");this.urt(t,i+s)}}wvt(t,s,i,e){}Svt(t,...s){t.call(this,...s)}Tvt(t,...s){return t.call(this,...s)}Dbt(){return null}Vbt(t,s,i){if(this.mxt.bvt()){const e=this.tvt(),n=oa.Xn(oa.Event,t,s);n.vxt=e,n.nz=e.nz,i&&Object.assign(n,i),e.dispatchEvent(n)}}}}{let s=function(t){if(t!==i)throw new Error("invalid internal API token")},r=(s,self.Ls),i=(r.O9={},r.cat={},r.Os()),e=[],n=[],h=[],o=null,a=null,t=null,u=null,l=new Map,c=new Map;r.GR=class extends r.qn{constructor(t,s){super(),this.Jc=t,this.xxt=[],this.Pyt=null,this.Ixt=[],this.Cxt=new Map,this.Gxt=null,this.Nxt=null,this.Ext=new Set(s)}Dxt(t){const s=t[19],i=this.Jc.zgt(t[0]);if(!i)throw new Error("missing plugin");r.M2t(t,i,s);const e=2<=s?r.hbt:i,n=r.Xn(e,{runtime:this.Jc,ER:t[1],ubt:t[2],RR:t[5],kR:t[8],fbt:t[9],mbt:t[13],WR:t[14],LR:t[17],jR:t[18],Sbt:s,Gbt:2<=s?i:null});n.Ebt(),this.xxt.push(n),l.set(i,n)}_xt(){this.Pyt=r.Xn(r.O9.L9,{runtime:this.Jc,ER:!0}),this.Pyt.Ebt()}Axt(t){const i=t[1],e=this.Jc.zgt(t[0]);if(!e)throw new Error("missing behavior");this.Cxt.set(e,()=>{const t=2<=i?r.oxt:e,s=r.Xn(t,{runtime:this.Jc,Sbt:i,Gbt:2<=i?e:null});s.Ebt(),this.Ixt.push(s),c.set(e,s),!this.Gxt&&r.cat.solid&&s instanceof r.cat.solid?this.Gxt=s:!this.Nxt&&r.cat.jumpthru&&s instanceof r.cat.jumpthru&&(this.Nxt=s),s.Abt()})}Lxt(t){const s=this.Cxt.get(t);s&&(s(),this.Cxt.delete(t))}static Lbt(t,s=1){if(r.GR.Lbt!==o)throw new Error("invalid method");1===s&&e.push(t),n.push(t)}static Obt(t=1){if(r.GR.Obt!==a)throw new Error("invalid method");1===t&&e.pop(),n.pop()}static dF(){if(r.GR.dF!==t)throw new Error("invalid method");if(0===e.length)throw new Error("no init object set");return e.at(-1)}static CR(t){if(r.GR.CR!==u)throw new Error("invalid method");if(s(t),0===n.length)throw new Error("no init object set");return n.at(-1)}static Oxt(t){h.push(t)}static Rxt(){h.pop()}static YF(){if(0===h.length)throw new Error("no init properties set");return h.at(-1)}Pxt(){for(const t of this.xxt)t.Abt()}static YR(t){return l.get(t)||null}static az(t){return c.get(t)||null}kyt(){return this.Pyt}kxt(){return this.Gxt}Fxt(){return this.Nxt}cj(t){return this.Ext.has(t)}},o=r.GR.Lbt,a=r.GR.Obt,t=r.GR.dF,u=r.GR.CR}{const aa=self.Ls,ua=new Set;aa.jxt=class extends aa.qn{constructor(){super(),this.zxt=0,this.ZQ="",this.XQ=0,this.Bxt=0,this.Uxt=0,this.Am=0,this.Lm=0,this.Wxt=!1,this.Qxt=!1,this.Jxt=null,this.Yxt="",this.qC=aa.Xn(aa.Rect),this.Vxt=aa.Xn(aa.ju),this.Hxt="",this.qxt=new self.y4(this),ua.add(this)}Kn(){this.KC(),this.Jxt&&0===this.Jxt.l8()&&this.Jxt.Kn(),this.Jxt=null,ua.delete(this),this.Zxt()}static o8(){for(const t of ua)t.Yxt="",t.qC.set(0,0,0,0),t.Vxt.hl(t.qC)}Xxt(t){this.ZQ=t[0],this.XQ=t[1],this.Bxt=t[2],this.Uxt=t[3],this.Am=t[4],this.Lm=t[5],this.Wxt=t[6],this.Qxt=!0}Kxt(t,s){if(this.Jxt)throw new Error("already loaded asset");this.ZQ=s;const i={};return aa.ro(s)&&(i.IQ="remote"),this.M4(t,i),this.Jxt.NQ()}$xt(t,s){if(this.Jxt)throw new Error("already loaded asset");this.ZQ="",this.XQ=s.size,this.Jxt=aa.Xn(aa.CQ,t.eO(),{blob:s,size:this.XQ,IQ:"local"})}tIt(t){if(t===this)throw new Error("cannot replace with self");this.zxt++,this.KC(),this.ZQ=t.ZQ,this.XQ=t.XQ,this.Bxt=t.Bxt,this.Uxt=t.Uxt,this.Am=t.Am,this.Lm=t.Lm,this.Wxt=t.Wxt,this.Qxt=t.Qxt,this.Jxt=t.Jxt,this.Yxt=t.Yxt,this.qC=t.qC,this.Vxt=t.Vxt,this.Zxt()}GQ(){return this.ZQ}Ql(){return this.XQ}sIt(){return this.Bxt}iIt(){return this.Uxt}kvt(){return this.Wxt}Jp(){return this.Am}im(){return this.Lm}eIt(){return this.Jxt.Jp()}nIt(){return this.Jxt.im()}M4(t,s){if(this.Jxt)throw new Error("already got asset");s=Object.assign({},s,{url:this.GQ(),size:this.Ql()}),this.Jxt=t.xQ(s)}s8(){return this.Jxt&&this.Jxt.s8()}async rW(t,s){if(!this.Jxt)throw new Error("no asset");if(this.Yxt)throw new Error("already loaded texture");const i=this.zxt,e=(this.Yxt="loading",await this.Jxt.rW(t,s));if(this.zxt!==i)return null;if(!e)return this.Yxt="",null;this.Yxt="loaded",this.Qxt||(this.Am=e.Jp(),this.Lm=e.im(),this.Qxt=!0);const n=this.Wxt?this.Lm:this.Am,r=this.Wxt?this.Am:this.Lm;return this.qC.set(this.Bxt,this.Uxt,this.Bxt+n,this.Uxt+r),this.qC.It(e.Jp(),e.im()),this.Vxt.hl(this.qC),this.Wxt&&this.Vxt.fl(),e}KC(){this.Yxt&&(this.Jxt&&this.Jxt.KC(),this.Yxt="",this.qC.set(0,0,0,0),this.Vxt.hl(this.qC))}lb(){return this.Jxt&&"loaded"===this.Yxt?this.Jxt.lb():null}aN(){return this.qC}Rvt(){return this.Vxt}UB(){return this.qxt}rIt(){return this.Jxt}async hIt(t){t=t||await this.Jxt.c8();const s=aa.So(this.Am,this.Lm),i=s.getContext("2d");return this.Wxt?(i.rotate(Math.PI/-2),i.translate(-this.Lm,0),i.drawImage(t,this.Bxt,this.Uxt,this.Lm,this.Am,0,0,this.Lm,this.Am)):i.drawImage(t,this.Bxt,this.Uxt,this.Am,this.Lm,0,0,this.Am,this.Lm),s}async oIt(t){if(!this.Hxt){const s=await this.hIt(t),i=await aa.To(s);this.Hxt=URL.createObjectURL(i)}return this.Hxt}Zxt(){this.Hxt&&(URL.revokeObjectURL(this.Hxt),this.Hxt="")}}}{const la=self.Ls;la.aIt=class extends la.qn{constructor(t){super(),this.er=t[0],this.uIt=t[1],this.VMt=!!t[2],this.Lht=t[3],this.lIt=t[4],this.cIt=!!t[5],this.H8=t[6],this.fIt=t[7].map(t=>la.Xn(la.dIt,t)),this.pIt=new self.pz(this)}static mIt(t,s){const i=la.Xn(la.aIt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.fIt.push(la.dIt.mIt(t)),i}Kn(){for(const t of this.fIt)t.Kn();la.Nh(this.fIt)}gIt(t){for(const s of this.fIt)s._z().M4(t)}yIt(s,i){return Promise.all(this.fIt.map(t=>t._z().rW(s,i)))}MIt(){for(const t of this.fIt)t._z().KC()}kc(){return this.er}NY(){return this.H8}vz(){return this.fIt.length}Iz(){return this.fIt}wIt(t){if((t=Math.floor(t))<0||t>=this.fIt.length)throw new RangeError("invalid frame");return this.fIt[t]}SIt(t,s){(s=Math.floor(s))<0?this.fIt.unshift(t):s>=this.fIt.length?this.fIt.push(t):this.fIt.splice(s,0,t)}TIt(t){if((t=Math.floor(t))<0||t>=this.fIt.length)throw new RangeError("invalid frame");this.fIt[t].Kn(),this.fIt.splice(t,1)}bIt(i){for(let t=0,s=this.fIt.length;t<s;++t)if(la.cn(this.fIt[t].Xz(),i))return t;return-1}vIt(t){if("string"!=typeof t)return t;{const s=this.bIt(t);if(-1===s)throw new Error("cannot find animation frame with tag "+t);return s}}mz(){return this.uIt}yz(){return this.VMt}Mz(){return this.Lht}Sz(){return this.lIt}bz(){return this.cIt}xIt(){return this.pIt}}}{const ca=self.Ls,fa=(()=>{const i=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),e=new Uint8Array(i.length);for(let t=0,s=i.length;t<s;++t)e[t]=i.charCodeAt(t);return new Blob([e],{type:"image/png"})})();ca.dIt=class extends ca.qn{constructor(t){super(),this.IIt=ca.Xn(ca.jxt),this.IIt.Xxt(t),this.CIt=t[7],this.GIt=ca.Xn(ca.ja,t[8],t[9]),this.NIt=t[10].map(t=>ca.Xn(ca.EIt,this,t)),this.DIt=new Map;for(const i of this.NIt)this.DIt.set(i.kc().toLowerCase(),i);this._It=null;const s=t[11];6<=s.length&&(this._It=ca.Xn(ca.wl,s)),this.Lg=t[12]||"",this.AIt=new self.Dz(this)}static mIt(t){const s=ca.Xn(ca.dIt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.IIt.$xt(t,fa),s}Kn(){this._It&&(this._It.Kn(),this._It=null),this.IIt.Kn(),this.IIt=null}_z(){return this.IIt}Az(){return this.CIt}Oz(){return this.GIt.Qa()}Pz(){return this.GIt.Ya()}Yz(){return this._It}Qz(t){return this.DIt.get(t.toLowerCase())||null}Wz(t){return(t=Math.floor(t))<0||t>=this.NIt.length?null:this.NIt[t]}jz(){return this.NIt.length}Xz(){return this.Lg}Cz(){return this.AIt}}}{const da=self.Ls;da.EIt=class extends da.qn{constructor(t,s){super(),this.LIt=t,this.er=s[0],this.OIt=da.Xn(da.ja,s[1],s[2])}Kn(){}kc(){return this.er}YS(){return this.OIt.Qa()}qS(){return this.OIt.Ya()}RIt(){return this.OIt}}}{const G=self.Ls,pa=self.C3Debugger,ma=self.tP;G.tut=class extends G.qn{constructor(s,t,i){super();const e=s.zgt(i[1]),[n,r]=(this.Jc=s,this.Jbt=G.GR.YR(e),this.Xbt=null,this.PIt=e.Instance,this.Ag=t,this.H8=i[11],this.er=i[0],this.vyt=this.Jc.n1t(i[14]),this.kIt=!!i[9],this.FIt=!!i[2],this.jIt=!!i[10],this.zIt=i[3].map(t=>({sid:t[0],type:t[1],name:t[2],BIt:s.n1t(t[3])})),this.UIt=i[4],this.WIt=i[5],this.abt=this.Jbt.AR(),this.QIt=G.Xn(G.Event.Gf),this.DJ=null,s.hO().q4());if(this.JIt=G.Xn(G.YIt,n,r),this.VIt=!0,this.HIt=null,this.qIt=null,this.ZIt=-1,this.XIt=null,this.KIt=null,this.$It=null,this.tCt=null,this.sCt=null,this.iCt=!1,this.eCt=null,this.nCt=i[8].map(t=>G.rCt._b(this,t)),this.hCt=[],this.oCt=new Map,this.aCt=new Map,this.uCt=new Set,this.lCt=new Map,this.cCt=G.Xn(G.Gct,this),this.fCt=null,this.dCt=0,this.pCt=!1,this.eCt=null,this.IIt=null,this.mCt=null,this.gCt=null,this.yCt=null,this.MCt=0,this.KMt=new Map,this.$Mt=new Map,this.m8=[],this.wCt=new Map,this.SCt=!0,this.Jbt.FR()&&(this.DJ=G.Xn(G._J,this,i[12])),i[6]&&(this.IIt=G.Xn(G.jxt),this.IIt.Xxt(i[6])),i[7]){this.mCt=i[7].map(t=>G.Xn(G.aIt,t)),this.gCt=new Map,this.yCt=new Map;for(const a of this.mCt)this.gCt.set(a.kc().toLowerCase(),a),this.yCt.set(a.NY(),a)}this.FIt?(this.HIt=[],this.qIt=new Set,this.ZIt=this.Jc.TCt()):(this.XIt=[],this.KIt=new Set,this.$It=[],this.tCt=[],this.sCt=[]);const h=this.Jbt.Mwt();if(h<2&&(this.Xbt=G.Xn(e.bCt,this,i[15]),!(this.Xbt instanceof G.Qbt)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.vCt=null,this.xCt=null,this.G7=G.Xn(G.Event.Gf),G.GR.Lbt(this,h);let o;if(o=2<=h?(o=e.bCt)||globalThis.jB:this.Xbt.Dbt()){if(this.vCt=new o(h<2?this:null),h<2&&!(this.vCt instanceof ma))throw new TypeError("script interface class must derive from IObjectClass");if(2<=h&&!(this.vCt instanceof globalThis.jB))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.vCt=new ma;if(G.GR.Obt(h),i[13]){const u=i[13];if(u){const l=u[0],c=u[1],f=u[2];this.Xbt.Ybt(l,c,f)}}this.Jc.ICt()&&!this.FIt&&!this.jIt&&this.abt||this.Ebt(),this.Jbt.DR()&&(this.Jbt._bt(this),this.CCt(i)),this.GCt=null}static _b(t,s,i){return G.Xn(G.tut,t,s,i)}Kn(){if(this.QIt.Kn(),this.QIt=null,this.IIt&&(this.IIt.Kn(),this.IIt=null),this.mCt){for(const t of this.mCt)t.Kn();G.Nh(this.mCt),this.gCt.clear(),this.yCt.clear()}this.GCt=null,this.cCt.Kn(),this.cCt=null,this.KMt.clear(),this.$Mt.clear(),this.eCt=null,this.Jc=null}NCt(i){for(let t=1,s=i.length;t<s;++t){const e=this.Jc.qJ(i[t]);this.HIt.push(e),this.qIt.add(e),e.XIt.push(this),e.KIt.add(this)}}ECt(t){this.iCt=!0,this.eCt=t}TF(){return this.iCt}K7(){return this.eCt}DCt(){let t=0;if(!this.FIt)for(const s of this.XIt)for(const i of s._Ct()){const e=i.kc().toLowerCase();this.oCt.set(e,i),this.aCt.set(e,t),this.hCt.push(i),++t}for(const n of this._Ct()){const r=n.kc().toLowerCase();this.oCt.set(r,n),this.aCt.set(r,t),this.hCt.push(n),++t}for(const h of this.hCt)this.uCt.add(h.K5().constructor);if(!this.FIt&&this.XIt.length){let t=this.Jc.ACt(),s=(G.Dh(this.$It,t,0),G.Dh(this.tCt,t,0),G.Dh(this.sCt,t,0),[]),i=0,e=0,n=0;for(const o of this.XIt){const a=o.tMt(),u=(this.$It[a]=i,i+=o.LCt(),this.tCt[a]=e,e+=o.OCt(),this.sCt[a]=n,n+=o.RCt(),o.CP());if(u&&this.DJ)for(const l of u.GP())s.push(l.PCt(this.DJ))}this.DJ&&this.DJ.kCt(s)}}CCt(t){const s=this.Jc.FCt(),i=G.Xn(G.Instance,{runtime:this.Jc,aF:this,uid:s});i.jCt(t[16],[]),this.Jc.zCt(s,i),this.m8.push(i)}pSt(){return this.Xbt}BCt(){return this.jIt}Gf(){return this.QIt}Ebt(){this.FIt||(this.Xbt?this.Xbt.Ebt():this.vCt.zB())}UCt(){return 0<this.MCt}async i9(t){this.FIt||(this.MCt++,1===this.MCt&&(this.Xbt?await this.Xbt.i9(t):await this.vCt.WB(this.Jc.lR().WCt())))}a9(){if(!this.FIt){if(this.MCt--,this.MCt<0)throw new Error("released textures too many times");0===this.MCt&&(this.Xbt?this.Xbt.a9():this.vCt.QB(this.Jc.lR().WCt()))}}r9(){if(this.FIt)throw new Error("not applicable to family");this.Xbt?this.Xbt.r9():this.vCt.JB()}async N9(t){this.FIt||(this.Xbt?await this.Xbt.N9(t):await this.vCt.YB(this.Jc.lR().WCt()))}w4(){return this.Jc}iP(){return this.Jbt}QCt(){return this.PIt}kc(){return this.er}n1t(){return this.vyt}$L(){return this.Ag}NY(){return this.H8}SY(){return this.FIt}rY(){return this.kIt}AR(){return this.abt}tMt(){return this.ZIt}_Ct(){return this.nCt}OCt(){return this.UIt}JCt(t){return t&&this.uCt.has(t)}LCt(){return this.zIt.length}YCt(){return this.zIt.map(t=>t.sid)}VCt(s){return this.zIt.findIndex(t=>t.sid===s)}Nst(s){return this.zIt.findIndex(t=>t.name===s)}HCt(){return this.zIt.map(t=>t.name)}qCt(){return this.zIt.map(t=>t.BIt)}Dst(t){if((t=Math.floor(t))<0||t>=this.zIt.length)throw new RangeError("invalid instance variable index");return this.zIt[t].type}Est(t){if((t=Math.floor(t))<0||t>=this.zIt.length)throw new RangeError("invalid instance variable index");return this.zIt[t].name}RCt(){return this.WIt}ZCt(){return this.hCt}int(t){return this.oCt.get(t.toLowerCase())||null}Ast(t){const s=this.aCt.get(t.toLowerCase());return void 0===s?-1:s}CP(){return this.DJ}FR(){return this.Jbt.FR()}XCt(){return this.DJ&&this.DJ.KCt()}V1t(){return this.cCt}pP(){return this.cCt.pP()}_z(){return this.IIt}KJ(t){this.fCt=t}XJ(){return this.fCt}$J(t){this.dCt=t}$Ct(){return this.dCt}tGt(){return this.mCt}sGt(){return this.mCt.length}c1t(){return this.XIt}wSt(t){return this.KIt.has(t)}vmt(){return this.HIt}TY(t){return this.qIt.has(t)}rMt(t){return this.tCt[t]}$yt(t){return this.$It[t]}oyt(t){this.lCt.set(t.fyt().toLowerCase(),t)}ayt(t){return!!this.Myt(t)}Myt(t){const s=this.lCt.get(t.toLowerCase());return s&&s.kl()?s:null}iGt(){return this.mCt}eGt(t){if(this.mCt)return this.gCt.get(t.toLowerCase())||null;throw new Error("no animations")}nGt(t){if(this.mCt)return this.yCt.get(t)||null;throw new Error("no animations")}rGt(t){if(this.eGt(t))throw new Error(`animation name '${t}' already exists`);const s=G.aIt.mIt(this.w4(),t);return this.mCt.push(s),this.gCt.set(s.kc().toLowerCase(),s),this.yCt.set(s.NY(),s),s}hGt(t){const s=this.eGt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.mCt.length)throw new Error("cannot remove last animation");const i=this.mCt.indexOf(s);this.mCt.splice(i,1),this.gCt.delete(s.kc().toLowerCase()),this.yCt.delete(s.NY()),s.Kn()}oGt(){if(this.mCt)return this.mCt[0];throw new Error("no animations")}aGt(){return this.oGt().wIt(0)}uGt(){if(this.mCt){const t=this.aGt()._z();return[t.Jp(),t.im()]}return this.IIt?[this.IIt.Jp(),this.IIt.im()]:[100,100]}$R(){if(this.Jbt.DR())return this.m8[0];throw new Error("not a single-global plugin")}dP(){return this.m8}*instances(){yield*this.m8}*fP(){yield*this.m8,yield*this.Jc.bTt(this)}gP(){return this.m8.length}hY(t){this.m8.push(t)}lGt(){this.SCt=!0}z9(){if(this.SCt&&!this.FIt){let s=this.m8,i=0;for(let t=s.length;i<t;++i)s[i].cGt(i);const t=this.Jc.fGt();for(const e of t)e.uF()===this&&e.cGt(i++);this.SCt=!1}}dGt(t){const s=this.m8;if(t<s.length)return s[t];t-=s.length;const i=this.Jc.fGt();for(const e of i)if(e.uF()===this){if(0===t)return e;--t}return null}hTt(t){if(t&&t.TF()&&t.uF()!==this)for(const i of t.bF())if(i.uF()===this)return i;const s=this.pP().dP();return s.length?s[0]:null}cP(t){const s=this.pP().dP();return 0<s.length?s[t.k9()%s.length]:null}*NTt(t,s){let i=this.pP().dP(),e=i.length,n=s.pP(),r=s.pP().dP(),h=r.length,o=t.k9(),a=(!s.SY()&&n.zct()||(o=r.indexOf(t)),Math.ceil(e/h)),u=e%h,l=0,c;c=0==u||o<u?(l=o*a,a):(l=u*a+(o-u)*(a-1),a-1);for(let t=l,s=l+c;t<s;++t)yield i[t]}Dwt(t){this.Xbt?.Dwt(t)}_gt(){if(this.iCt&&!this.FIt){this.z9();const t=this.pP(),s=t.Hct(),i=t.zct(),e=this.Jc.H0t(),n=e&&e.PO()&&e.PO().nft();for(const r of this.eCt.F9())if(r!==this){r.z9();const h=r.pP();if(h.Vct(i),!i){const o=h.Hct();G.Nh(o);for(const a of s)o.push(r.dGt(a.k9()));if(n){const u=t.qct(),l=h.qct();G.Nh(l);for(const c of u)l.push(r.dGt(c.k9()))}}}}}Rwt(t,s){for(const i of this.K7().F9()){const e=i.pP();t?G.Gh(e.qct(),s):G.Gh(e.Hct(),s)}}pGt(){return this.JIt}mGt(t){this.VIt=!!t}gGt(){if(this.VIt&&this.abt){for(const t of this.m8)t.Z3().yGt();for(const s of this.Jc.fGt())s.uF()===this&&s.Z3().yGt();this.VIt=!1}}MGt(s,t,i){if(t){const e=this.wCt.get(t);e&&(e.delete(s),0===e.size)&&this.wCt.delete(t)}if(i){let t=this.wCt.get(i);t||(t=new Set,this.wCt.set(i,t)),t.add(s)}}wGt(){if(this.SY()){const t=new Set;for(const s of this.HIt)for(const i of s.wGt())t.add(i);return t.values()}return this.wCt.keys()}xwt(){return this.KMt||(this.KMt=new Map),this.KMt}Iwt(){return this.$Mt||(this.$Mt=new Map),this.$Mt}SGt(){return this.JCt(G.cat.solid)}TGt(){return this.JCt(G.cat.jumpthru)}bGt(){return this.JCt(G.cat.NoSave)}eY(){return this.JCt(G.cat.Persist)}QH(){const t={instances:this.m8.map(t=>t.rT())};return this.KMt&&this.KMt.size&&(t.ex=G.Go(this.KMt)),t}JH(t,e){this.KMt&&(this.KMt.clear(),this.KMt=null);const s=t.ex,n=(s&&(this.KMt=G.No(s)),this.m8),r=t.instances;for(let t=0,s=Math.min(n.length,r.length);t<s;++t)n[t].hT(r[t]);for(let t=r.length,s=n.length;t<s;++t)this.Jc.gF(n[t]);for(let i=n.length,t=r.length;i<t;++i){let t=r[i],s=null;if(!this.AR()||(s=this.Jc.G3().U7(t.w.l))){const h=this.Jc.nY(this.fCt||this,s,!1,0,0,!0);h.hT(t),e&&e.add(h)}}this.GCt=r,this.lGt()}vGt(){return this.GCt}xGt(){this.GCt=null}IGt(){for(let t=0,s=this.m8;t<s;++t)this.m8[t].IGt()}qR(){return this.vCt}CO(){return this.G7}CGt(){return this.xCt}yP(t){this.xCt=t}cq(t){const s=this.Jc,i=s.fq()&&!s.DO().bP();i&&pa.StartMeasuringScriptTime(),this.G7.dispatchEvent(t),i&&pa.AddScriptTime()}}}{const ga=self.Ls;ga.GGt=class extends ga.qn{constructor(t,s){super(),this.Jc=t,this.NGt=s;for(const i of this.NGt)i.ECt(this)}Kn(){this.Jc=null}w4(){return this.Jc}X7(){return this.NGt}F9(){return this.NGt}U9(){return this.NGt.some(t=>t.AR())}}}{let w=self.Ls,n=self.C3Debugger,h=w.GR,o=[],a=0,S=new WeakMap,e=new WeakMap;w.Instance=class extends w.qn{constructor(t){if(w.GR!==h)throw new Error("invalid addon manager");super(),this.Jc=t.runtime,this.EGt=t.aF,this.sst=null,this.DGt=null,this._Gt=null,this.AGt=0,this.LGt=t.uid,this.OGt=a++,this.jwt=0,this.RGt=null;const s=w.Wh(t.tags),i=(0<s.length&&(this.RGt=new Set(s)),this.PGt=o,this.kGt=o,this.EGt.ZCt()),e=(0<i.length&&(this.kGt=i.map((t,s)=>w.Xn(w.FGt,{runtime:this.Jc,sz:t,nz:this,index:s}))),this.jGt=this.EGt.TF()?[]:null,this.zGt=-1,this.QIt=null,this.iP());if(e.SS()&&(this.jwt|=4),e.AR())if(this.sst=w.Xn(w.BGt,this,t.bj),t.UGt)this.sst.WGt(t.UGt);else{this.sst.QGt();const[n,r]=this.EGt.uGt();this.sst.DG(n,r),this.uF().XCt()&&this.sst.Tj().JGt()}t.YGt?this.VGt(t.YGt):this.HGt()}Kn(){if(this._Gt&&(this._Gt.pF(),this._Gt=null),0<this.kGt.length){for(const i of this.kGt)i.Kn();w.Nh(this.kGt)}this.DGt&&(this.DGt.Kn(),this.DGt=null);const t=S.get(this),s=(t&&(t.clear(),S.delete(this)),e.get(this));s&&(s.clear(),e.delete(this)),this.jGt&&w.Nh(this.jGt),this.QIt&&(this.QIt.Kn(),this.QIt=null),this.RGt&&this.RGt.clear(),this.RGt=null,this.Jc=null,this.EGt=null,0<this.PGt.length&&w.Nh(this.PGt),this.sst&&(this.sst.Kn(),this.sst=null)}VGt(t){0<t.length&&(this.PGt=[],w.Ah(this.PGt,t))}HGt(){const s=this.EGt.LCt();if(0!==s){this.PGt=[];const i=[0,0,""];for(let t=0;t<s;++t)this.PGt.push(i[this.EGt.Dst(t)])}}jCt(t,i){if(this.DGt)throw new Error("already got sdk instance");for(let t=0,s=this.kGt.length;t<s;++t){const e=this.kGt[t];e.jCt(i?i[t]:null)}const s=this.iP().Mwt();if(s<2){if(this.DGt=w.Xn(this.EGt.QCt(),this,t),!(this.DGt instanceof w.qbt))throw new Error("sdk type must derive from SDKInstanceBase");!this.iP().AR()&&this.EGt.CGt()&&this.Y3()}else{const n=this.iP().Dbt();this.qGt(n.Instance,t)}}J5(){return this.DGt??this._Gt}Z3(){return this.sst}w4(){return this.Jc}h3(){return this.zGt}CF(){const t=this.zGt;return-1===t?this.w4().h3():t}o3(t){((t=+t)<0||!isFinite(t))&&(t=0),this.zGt=t,this.uF().XCt()&&this.Jc.ZGt(this,!0)}NF(){this.zGt=-1,this.uF().XCt()&&this.Jc.ZGt(this,!1)}LH(){return this.Jc.XGt(this)}Gf(){return this.QIt||(this.QIt=w.Xn(w.Event.Gf)),this.QIt}OT(t){this.DGt?this.DGt.OT(t):this._Gt.$B(this.Jc.lR().WCt())}Ebt(t){this.DGt.Ebt(t)}KGt(){this.jwt|=2}$Gt(){return 0!=(2&this.jwt)}tNt(){this.jwt|=1}CU(){return 0!=(1&this.jwt)}SS(){return 0!=(4&this.jwt)||this.DGt.SS()}sNt(){this.jwt|=32}xH(){return 0!=(32&this.jwt)}iNt(){return 0!=(8&this.jwt)}eNt(t){t?this.jwt|=8:this.jwt&=-9}nNt(){return 0!=(16&this.jwt)}rNt(t){t?this.jwt|=16:this.jwt&=-17}hNt(){return 0!=(64&this.jwt)}oNt(t){t?this.jwt|=64:this.jwt&=-65}aNt(t,s){t<<=16,s?this.jwt|=t:this.jwt&=~t}uNt(t){return 0!=(this.jwt&t<<16)}_vt(){return this.DGt._vt()}Avt(){return this.DGt.Avt()}Lvt(){return this.DGt.Lvt()}Ovt(){return this.DGt.Ovt()}Pvt(){return this.DGt.Pvt()}ESt(t){return this.DGt.ESt(t)}uF(){return this.EGt}bH(){return this.DGt.bH()}vTt(t){return t.SY()?t.TY(this.uF()):this.uF()===t}lNt(n,t,s){const i=(t,s)=>{const i=s||t.uF(),e=n.get(i);e?e.add(t):n.set(i,new Set([t]))};if(i(this,t),this.TF())for(const e of this.bF())i(e);if(s)for(const r of this.r5())i(r)}cNt(){if(!this.iP().UR())throw new Error("object does not support scene graph")}l5(){return null!==this.Xj()}Xj(){const t=this.Z3();if(!t)return null;const s=t.Xj();return s?s.TB():null}$j(){const t=this.Z3();if(!t)return null;const s=t.$j();return s?s.TB():null}*t5(){const t=this.Z3();if(t)for(const s of t.t5())yield s.TB()}fNt(t){if(t)for(const s of this.children())if(s===t)return!0;return!1}HH(){const t=this.Z3();return!!t&&t.HH()}dNt(t){const s=this.Z3();if(!s)return[];const i=t.kc();return s.Z9().map(t=>t.TB()).filter(t=>t.uF().kc()===i)}Z9(){const t=this.Z3();return t?t.Z9().map(t=>t.TB()):[]}*children(){const t=this.Z3();if(t)for(const s of t.children())yield s.TB()}*r5(){const t=this.Z3();if(t)for(const s of t.r5())yield s.TB()}i5(){const t=this.Z3();return t?t.i5():0}pNt(){return[...this.t5()].length}GTt(){const t=this.Z3();return t?t.GTt():0}n5(t){const s=this.Z3();if(!s)return null;const i=s.n5(t);return i?i.TB():null}mNt(){const t=this.Z3();if(!t)return NaN;const s=t.Xj();return s?s.gNt(t):NaN}yNt(t){for(const s of this.Z3().Z9())if(s.TB().vF()===t)return!0;return!1}o5(t,s){this.cNt(),t.cNt(),this.Z3().o5(t.Z3(),s||{})}a5(t){const s=this.Z3();s&&s.a5(t.Z3())}E5(){const t=this.Z3();return!!t&&t.E5()}I9(){const t=this.Z3();if(t){const s=t.MNt();if(s)for(const i of s){const e=this.Jc.J3(i[2]);if(e){const n=i[3];this.o5(e,{f5:!!(n>>0&1),p5:!!(n>>1&1),g5:!!(n>>2&1),M5:!!(n>>3&1),S5:!!(n>>4&1),N5:!!(n>>5&1),b5:!!(n>>6&1),x5:!!(n>>7&1),C5:!!(n>>8&1)})}}}}C9(t,s){const i=t.get(this);if(i)for(const e of i.sceneGraphJson.children){const n=s.get(e.index);if(n){const r=e.flags;this.o5(n,{f5:!!(r>>0&1),p5:!!(r>>1&1),g5:!!(r>>2&1),M5:!!(r>>3&1),S5:!!(r>>4&1),N5:!!(r>>5&1),b5:!!(r>>6&1),x5:!!(r>>7&1),C5:!!(r>>8&1)})}}}IF(){const t=this.Jc.wNt();return t?t.iut(this):""}TF(){return null!==this.jGt}j9(t){this.jGt.push(t)}wF(){return this.jGt}SNt(t){return!!this.TNt(t)}TNt(t){const s=this.bF();if(null===s||0===s.length)return!1;for(const i of s)if(i.uF()===t)return i;return null}bF(){return this.jGt}Rpt(){for(const t of this.bF())t.uF().pP().Zct(t)}_wt(){for(const t of this.bF())t.uF().pP().Jct(t)}Awt(t){for(const s of this.bF())s.uF().pP().Hct()[t]=s}Owt(){for(const t of this.bF())t.uF().pP().Yct(t)}Lwt(t){for(const s of this.bF())s.uF().pP().qct()[t]=s}iP(){return this.EGt.iP()}cGt(t){this.AGt=t}k9(){return this.EGt.z9(),this.AGt}vF(){return this.LGt}bNt(){return this.OGt}vNt(t){t?this.AF(new Set(t)):this.RGt=null}AF(t){if(0===t.size)this.RGt=null;else{this.RGt?this.RGt.clear():this.RGt=new Set;for(const s of t)this.RGt.add(s)}}DF(){return this.RGt??new Set}HTt(){return Array.from(this.DF()).join(" ")}XTt(t){t=Math.floor(t);for(const s of this.DF()){if(0===t)return s;--t}return""}snt(){return this.kGt}xNt(t){if(t)for(const s of this.kGt)if(s.K5()instanceof t)return s;return null}fat(t){if(!t)return null;const s=this.xNt(t);return s?s.J5():null}tnt(i){const e=this.kGt;for(let t=0,s=e.length;t<s;++t)if(e[t].ez().NY()===i)return t;return-1}INt(){return this.PGt}HCt(){return this.EGt.HCt()}CNt(){return this.PGt.length}frt(t){const s=this.PGt;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}Xyt(t){return this.PGt[t]}GNt(t){const s=this.PGt[t];return 0===this.EGt.Dst(t)?!!s:s}drt(t,s){const i=this.PGt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=this.EGt.Dst(t);switch(e){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}nht(t,s){if(0!==s){const i=this.PGt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}}xwt(){let t=S.get(this);return t||(t=new Map,S.set(this,t)),t}Iwt(){let t=e.get(this);return t||(t=new Map,e.set(this,t)),t}NNt(t){const s=this.uF();if(s.CO().Af(t))return!0;for(const i of s.c1t())if(i.CO().Af(t))return!0;return!!this.Jc.CO().Af(t)}TP(){const t=new Set,s=(t.add(this),this.Z3());if(s&&s.HH())for(const i of this.r5())if(t.add(i),i.TF())for(const e of i.bF())t.add(e);if(this.TF())for(const n of this.bF())t.add(n);for(const r of t.values())r.G9()}ENt(){this.EGt.CGt()&&this.Y3();for(const t of this.kGt)t.Mxt()}DNt(){this.ENt()}G9(){if(this.ENt(),this.NNt("instancecreate")){const t=this.uF(),s=new w.Event("instancecreate");s.nz=this.Y3(),t.cq(s);for(const i of t.c1t())i.cq(s);this.Jc.cq(s)}this.Jc.HF(this.iP().Tdt().A9.t2t,this,null)}_Nt(){this.Jc.HF(this.iP().Tdt().A9.s2t,this,null)}ANt(t){if(this._Gt){const s=new w.Event("destroy");s.LNt=t,this.cq(s)}if(this.NNt("instancedestroy")){const i=this.uF(),e=new w.Event("instancedestroy");e.nz=this.Y3(),e.LNt=t,i.cq(e);for(const n of i.c1t())n.cq(e);this.Jc.cq(e)}}ONt(){return this.DGt?this.DGt.Mvt():this._Gt.oj()}rT(t="full",s=null){const i={},e=("full"===t?i.uid=this.vF():i.c3=!0,this.DF());if(0<e.size&&(i.tags=Array.from(e)),"visual-state"!==t){const r=S.get(this);if(r&&r.size&&(i.ex=w.Go(r)),-1!==this.h3()&&(i.mts=this.h3()),0<this.EGt.LCt()){const h={},o=this.EGt.YCt();for(let t=0,s=this.PGt.length;t<s;++t)h[o[t].toString()]=this.PGt[t];i.ivs=h}if(this.kGt.length){const a={};for(const u of this.kGt){const l=u.rT(t);l&&(a[u.ez().NY().toString()]=l)}i.behs=a}}this.sst&&(i.w=this.sst.QH(t,s));const n=this.DGt?this.DGt.rT():this._Gt.aj();return n&&(i.data=n),i}aZ(t="full",s){this.sst&&this.sst.aZ(t)}lZ(t,s="full",i=null){this.sst&&this.sst.lZ(t,s,i)}RNt(t,s="full",i=null){this.sst&&this.sst.RNt(t,s,i)}IGt(){this.iP().AR()&&this.sst.IGt()}hT(s,t="full",i){if("full"===t)this.LGt=s.uid;else if(!s.c3)return;if(this.vNt(s.tags),"visual-state"!==t){let t=S.get(this);t&&(t.clear(),S.delete(this));const n=s.ex,r=(n&&(t=w.No(n),S.set(this,t)),this.zGt=s.hasOwnProperty("mts")?s.mts:-1,s.ivs);if(r)for(const[h,o]of Object.entries(r)){const a=parseInt(h,10),u=this.EGt.VCt(a);if(!(u<0||u>=this.PGt.length)){let t=o;null===t&&(t=NaN),this.PGt[u]=t}}}if(this.iP().AR()){const l=s.w;if(l){const c=l.l;if(this.sst.X3().NY()!==c){const f=this.sst.X3(),d=f._3().U7(c);d?(this.sst.i4(d),f.lY(this,!0),d.hY(this,!0),d.e4(this),this.sst.vj()):"full"===t&&this.Jc.gF(this)}this.sst.JH(l,t)}}if("visual-state"!==t){const p=s.behs;if(p)for(const[m,g]of Object.entries(p)){const y=parseInt(m,10),M=this.tnt(y);M<0||M>=this.kGt.length||this.kGt[M].hT(g,t)}}const e=s.data;e&&(this.DGt?this.DGt.hT(e,t):this._Gt.uj(e))}Y3(){return this._Gt||this.qGt()}bvt(){return!!this._Gt}qGt(t,s){const i=this.sst?t?self.VB:self.z5:t?self.PF:self.oF,e=t||this.DGt.Dbt(),n=this.EGt.CGt(),r=n||e||i,h=this.iP().Mwt();if(w.GR.Lbt(this,h),w.GR.Oxt(s),this._Gt=new r,w.GR.Rxt(),w.GR.Obt(h),e&&!(this._Gt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(n){const o=e||i;if(!(this._Gt instanceof o))throw new TypeError(`setInstanceClass(): class '${n.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this._Gt}lF(t){if(0!==this.PGt.length){const i={},e=this.EGt.qCt();for(let t=0,s=e.length;t<s;++t)i[e[t]]={configurable:!1,enumerable:!0,get:w.Instance.prototype.GNt.bind(this,t),set:w.Instance.prototype.drt.bind(this,t)};const s=Object.create(Object.prototype,i);t.PNt={value:s,writable:!1}}}cF(t){const s=this.kGt;if(0!==s.length){const i={};for(const n of s)i[n.ez().n1t()]={value:n.tvt(),writable:!1};const e=Object.create(Object.prototype,i);t.Tpt={value:e,writable:!1}}}cq(t){if(this.bvt()){const s=this.Y3(),i=(t.nz=s,this.Jc),e=i.fq()&&!i.DO().bP();e&&n.StartMeasuringScriptTime(),s.dispatchEvent(t),e&&n.AddScriptTime()}}}}{const ya=self.Ls;ya.K9=class extends ya.qn{constructor(e){super(),this.dT=e,this.Bpt=null,this.kNt=[],this.FNt=e.Jp(),this.jNt=e.im(),this.zNt=1,this.BNt=1,this.UNt=0,this.WNt=1,this.QNt=e.hD(),this.JNt=null,this.YNt=null,this.VNt=NaN,this.HNt=!1,this.XH=NaN,this.KH=NaN,this.qNt=t=>{if(t.nz===this.Bpt.TB()){const s=e.w4(),i=(s.Gf().removeEventListener("instancecreate",this.qNt),this.Bpt.TB().J5());this.HNt=!!i.Jst(),this.XH=this.HNt?i.Qst():NaN,this.KH=this.HNt?i.Vst():NaN}}}Kn(){this.Bpt=null,this.JNt=null,this.YNt=null,this.VNt=NaN,this.HNt=!1,this.XH=NaN,this.KH=NaN,ya.Nh(this.kNt)}ZNt(t){if(this.WNt=this.dT.hD(),this.QNt=this.WNt,this.Bpt=t,this.UNt=t?t.OP():0,this.Bpt){const s=this.dT,i=s.w4(),e=this.Bpt.TB().iP().Mwt();if(e<2){const n=this.Bpt.TB().J5();n?(this.HNt=!!n.Jst(),this.XH=this.HNt?n.Qst():NaN,this.KH=this.HNt?n.Vst():NaN):this.Bpt.TB().CU()||i.Gf().addEventListener("instancecreate",this.qNt)}else this.HNt=!1,this.XH=NaN,this.KH=NaN}else this.HNt=!1,this.XH=NaN,this.KH=NaN}Xj(){return this.Bpt}HH(){return 0<this.kNt.length}Z9(){return this.kNt}XNt(){this.HH()&&1!==this.kNt.length&&(this.YNt?this.kNt.sort((t,s)=>{const i=this.YNt.get(t.TB()),e=this.YNt.get(s.TB());return ya.ae(i)&&ya.ae(e)?i-e:0}):this.kNt.sort((t,s)=>{const i=t.vrt().KNt(),e=s.vrt().KNt();return ya.ae(i)&&ya.ae(e)?i-e:0}))}KNt(){return this.VNt}xrt(){return this.zNt}$Nt(t){this.zNt=t}Crt(){return this.BNt}tEt(t){this.BNt=t}Ort(){return this.QNt}XSt(){return this.WNt}sEt(t){this.WNt=t}brt(){return 0===this.FNt?Number.EPSILON:this.FNt}Irt(){return 0===this.jNt?Number.EPSILON:this.jNt}iEt(){if(this.dT.y5()){let t=this.Bpt,s=t.Jp(),i=t.vrt().brt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.HNt?1+s/this.XH:s/i}return 1}eEt(){if(this.dT.w5()){let t=this.Bpt,s=t.im(),i=t.vrt().Irt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.HNt?1+s/this.KH:s/i}return 1}nEt(){return 0}rEt(){return{sw:this.FNt,sh:this.jNt,sx:this.zNt,sy:this.BNt,psa:this.UNt,oo:this.WNt,so:this.QNt,pi:this.dT.TB().mNt()}}QH(t,s=null){const i=this.rEt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.hEt(t),c:this.oEt(t)})}aEt(t){let s="";return t.d5()&&(s+="x"),t.m5()&&(s+="y"),t.y5()&&(s+="w"),t.w5()&&(s+="h"),t.T5()&&(s+="a"),t.v5()&&(s+="z"),t.E5()&&(s+="d"),t.I5()&&(s+="o"),t.G5()&&(s+="v"),s}hEt(t){return this.Bpt&&this.Bpt.TB()&&!this.Bpt.TB().CU()?this.uEt(this.Bpt,this.dT,t):null}oEt(s){return this.kNt.map(t=>this.uEt(t,t,s)).filter(t=>t)}uEt(t,s,i){const e=t.TB();if(e&&e.CU())return null;const n={};return n.uid=e.vF(),n.f=this.aEt(s),n.offsets=s.lEt(),n.data=ya.K9.cEt(e),n.oci=e.uF().$L(),"state"===i?(n.inst=e.rT("full",{selfOnly:!0}),n.instIndex=NaN):(n.instIndex=e.uF().dP().indexOf(e),n.inst=null),n}JH(t){this.FNt=t.sw,this.jNt=t.sh,this.zNt=t.sx,this.BNt=t.sy,this.UNt=t.psa,this.WNt=t.oo,this.QNt=t.so,this.VNt=ya.ae(t.pi)?t.pi:NaN}fEt(t,s){if(!t&&!s&&this.JNt)for(const i of this.JNt)i.CU()||i.l5()||i.w4().gF(i);this.JNt=t,this.YNt=s}lZ(t,s){const i=this.dT,e=i.w4(),n=new Set;if(t.p&&!this.Bpt){const o=t.p.uid,a=e.J3(o);if(s?.l2t,a){const u=a.Z3();if(a.fNt(i.TB()))this.Bpt=u;else{a.yNt(i.TB().vF())?e.gF(i.TB()):a.o5(i.TB(),this.dEt(t.p.f)),n.has(i)||(i.pEt(t.p.offsets),this.mEt(a,t.p,s)),n.add(i);const l=a.Z3();l.vrt().XNt()}}else if(ya.ae(t.p.oci)){const c=e.qJ(t.p.oci),f=(e.kyt(),e.MP(c,i.X3(),0,0,!0));if(s?.l2t,f){const d=this.gEt(t.p,e),p=(d&&f.hT(d),f.Z3()),m=(p.X3().wP(f),f.o5(i.TB(),this.dEt(t.p.f)),f.Z3());m.vrt().XNt()}}}const r=[];for(const g of t.c){const y=g.uid,M=e.J3(y);M&&r.push(M)}let h=0;for(const w of t.c){const S=w.uid,T=e.J3(S);if(s?.l2t,T){if(this.JNt){if(this.JNt.includes(T)){const I=T;if(I.uF()!==T.uF()){h++;continue}if(I.CU()){h++;continue}const C=t.c[h];if(!s?.l2t&&this.yEt(I,r,i)){this.MEt(h,C,i,n,s),h++;continue}if(I.l5()&&I.Xj()!==i.TB()){const G=this.wEt(C,s);this.SEt(G,C,n,s),h++;continue}this.SEt(I.Z3(),C,n,s,!0),h++;continue}if(this.JNt[h]){const N=this.JNt[h];if(N.uF()!==T.uF()){h++;continue}if(N.CU()){h++;continue}const E=t.c[h];if(!s?.l2t&&this.yEt(N,r,i)){this.MEt(h,E,i,n,s),h++;continue}if(N.l5()&&N.Xj()!==i.TB()){const D=this.wEt(E,s);this.SEt(D,E,n,s),h++;continue}this.SEt(N.Z3(),E,n,s,!0),h++;continue}}const b=T.uF(),v=this.TEt(r,b),x=i.TB().dNt(b).length;if(v===x){const _=i.TB().n5(h);if(_){const A=_.Z3();A&&(n.has(A)||(A.pEt(w.offsets),this.mEt(_,w,s)),n.add(A))}h++;continue}if(T.l5()&&T.Xj()!==i.TB()){const L=this.wEt(w,s);this.SEt(L,w,n,s),h++;continue}this.SEt(T.Z3(),w,n,s)}else if(this.JNt&&this.JNt[h]){const O=this.JNt[h],P=e.qJ(this.bEt(w));if(O.uF()!==P){h++;continue}if(O.CU()){h++;continue}const R=t.c[h];if(!s?.l2t&&this.yEt(O,r,i)){this.MEt(h,R,i,n,s),h++;continue}if(O.l5()&&O.Xj()!==i.TB()){const k=this.wEt(R,s);this.SEt(k,R,n,s),h++;continue}this.SEt(O.Z3(),R,n,s)}else{const F=this.wEt(w,s);this.SEt(F,w,n,s)}h++}}yEt(t,s,i){const e=t.uF(),n=this.TEt(s,e),r=i.TB().dNt(e).length;return n===r}MEt(t,s,i,e,n){const r=i.TB().n5(t,s);if(r){const h=r.Z3();h&&(e.has(h)||(h.pEt(s.offsets),this.mEt(r,s,n)),e.add(h))}}dEt(t){const s={};return s.f5=t.includes("x"),s.p5=t.includes("y"),s.g5=t.includes("w"),s.M5=t.includes("h"),s.S5=t.includes("a"),s.b5=t.includes("z"),s.N5=t.includes("d"),s.x5=t.includes("o"),s.C5=t.includes("v"),s}bEt(t){return ya.ae(t.oci)?t.oci:t[1]}wEt(e,n){if(ya.ae(e.oci)){let t=this.dT,s=t.w4(),i;if(e.data)i=s.nY(e.data,t.X3(),!1,0,0,!1,!0);else{const r=s.qJ(e.oci);i=s.MP(r,t.X3(),0,0,!0)}if(n?.l2t,i){const h=this.gEt(e,s),o=(h&&i.hT(h),i.Z3());return o.X3().wP(i,!0),o}}}SEt(t,s,i,e,n=!0){const r=this.dT,h=r.o5(t,this.dEt(s.f));h&&n&&(i.has(t)||(t.pEt(s.offsets),this.mEt(t.TB(),s,e)),i.add(t)),this.XNt()}mEt(t,s,i){let e=this.gEt(s,this.dT.w4());e&&((e=JSON.parse(JSON.stringify(e))).w=null,t.hT(e))}TEt(t,s){return t.filter(t=>t.uF().kc()===s.kc()).length}gEt(t,s){if(ya.ae(t.instIndex)){const i=s.qJ(t.oci),e=i.vGt();return e?e[t.instIndex]:null}return ya.Me(t.inst)?JSON.parse(t.inst):t.inst||void 0}static cEt(t){let s=t.Z3().X3().tY(t.vF());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const e of[...t.Z9()]){const n=e.Z3();i.push([n._3().NY(),n.X3().$L(),e.vF(),ya.K9.X9(n),e.uF().TF()?1:0,n.K3(),ya.K9.cEt(e)])}return ya.Oe(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=ya.K9.vEt(),s[0][14][1]=i,s[0][14][2]=t.Z3().K3()),s}static X9(t){let s=0;return(s|=Number(t.G5())<<8)|Number(t.I5())<<7|Number(t.v5())<<6|Number(t.E5())<<5|Number(t.T5())<<4|Number(t.w5())<<3|Number(t.y5())<<2|Number(t.m5())<<1|Number(t.d5())<<0}static vEt(t){let s=0;return s,511}}}{let d=self.Ls,t=self.gs,r=(t.xs,d.Xn(d.Rect)),h=d.Xn(d.ju),s=d.Xn(d.Event,"bboxchange",!1),f=d.Xn(d.Ao,0,0,0,0),l=d.Xn(d.wl),i=d.Xn(d.Ao,1,1,1,1),o=d.Xn(d.Rect,0,0,-1,-1),n=d.Xn(d.Rect,0,0,-1,-1),p=new Set(["absolute","relative"]),e=[],m=!0,g=new WeakMap,a=new WeakMap;d.BGt=class extends d.qn{constructor(t,s){super(),this.wi=t,this.Nct=t.uF(),this.Jc=t.w4(),this.xEt=s,this.Nct.MGt(this,null,s),this.IEt=-1,this.CEt=-1,this.jwt=196635,this.Nct.iP().PR()&&(this.jwt|=128),this.za=NaN,this.Ba=NaN,this.LS=NaN,this.GEt=NaN,this.NEt=NaN,this.Q2=NaN,this.Po=NaN,this.EEt=NaN,this.DEt=NaN,this._Et=NaN,this.AEt=NaN,this.LEt=d.Xn(d.Rect),this.OEt=d.Xn(d.ju),this.REt=n,this.PEt=o,this.kEt=null,this.FEt=null,this.jEt=null,this.AS=i,this.zEt=i,this.BEt=null,this.UEt=null,this.wi.uF().XCt()&&(this.UEt=d.Xn(d.WEt,this.wi,this)),this.QEt=null,this.JNt=null,this.YNt=null,this.JEt=-1,this.YEt=null}tNt(){this.jwt|=256}Kn(){if(this.Nct.MGt(this,this.xEt,null),this.BEt&&(this.Jc.mS().FM(this.BEt),this.BEt=null),this.kEt=null,this.FEt&&(this.FEt.VEt.Kn(),this.FEt=null),this.jEt&&(this.jEt.clear(),this.jEt=null),this.L5(),this.UEt&&this.UEt.Kn(),this.l5()&&this.Xj().a5(this),this.HH()){const t=[...this.Z9()];for(const s of t)this.a5(s)}this.HEt(),this.qEt(),g.delete(this),a.delete(this),this.wi=null,this.Nct=null,this.Jc=null,this.xEt=null}WGt(t){if(m=!1,this.xj(t[0],t[1]),this.KS(t[2]),this.DG(t[3],t[4]),this.Q2=0,this.PR()?this.LP(t[6]):this.Po=0,f.Na(t[7]),this.ZEt(f),this.Prt(t[8]),this.Frt(t[9]),this.RS(t[10]),this.UEt&&this.UEt.XEt(t[12]),t[14]&&g.set(this,{KEt:t[14][1],$Et:t[14][2]}),t[15]){const s=t[15],e=(this._5(s[0],s[1]),this.F5()),n=s[2];for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=r.length;t<s;++t){const h=r[t],o=e.AT(t,i);o.VS(h[0]),o.ZS(h[1]),o.KS(h[2]),o.tT(h[3]),o.iT(h[4])}}}if(t[16]){const i=t[16][0],a=t[16][1],u=!!a,l=!u,c=this.Jc.wNt();u&&c&&c.sut(this.TB(),a),l&&c&&c.sut(this.TB(),i)}m=!0,this.tDt()}QGt(){this.za=0,this.Ba=0,this.LS=0,this.GEt=0,this.NEt=0,this.Q2=0,this.Po=0,this.EEt=0,this.DEt=1,this._Et=0,this.AEt=0,this.tDt()}w4(){return this.Jc}uF(){return this.Nct}TB(){return this.wi}sDt(){return this.T5()?this.iDt(this.Xj().eDt()-this.QEt.nEt()):0}VS(t){if(t=+t,this.d5()){const s=this.QEt,i=t-this.YS(),e=-this.sDt();0==e?this.za+=i/s.iEt():(this.za+=Math.cos(e)*i/s.iEt(),this.m5()&&(this.Ba+=Math.sin(e)*i/s.eEt()))}else this.za=t}Mrt(t,s=!1){t=+t,!s&&this.d5()?this.VS(this.YS()+t):this.za+=t}YS(){if(this.d5()){let t=this.za,s=this.QEt,i=this.Xj(),e=this.sDt();return 0===e?t*=s.iEt():(t=t*s.iEt()*Math.cos(e),this.m5()&&(t-=this.Ba*s.eEt()*Math.sin(e))),i.YS()+t}return this.za}ZS(t){if(t=+t,this.m5()){const s=this.QEt,i=t-this.qS(),e=-this.sDt();0==e?this.Ba+=i/s.eEt():(this.d5()&&(this.za-=Math.sin(e)*i/s.iEt()),this.Ba+=Math.cos(e)*i/s.eEt())}else this.Ba=t}wrt(t,s=!1){t=+t,!s&&this.m5()?this.ZS(this.qS()+t):this.Ba+=t}qS(){if(this.m5()){let t=this.Ba,s=this.QEt,i=this.Xj(),e=this.sDt();return 0===e?t*=s.eEt():(t=t*s.eEt()*Math.cos(e),this.d5()&&(t+=this.za*s.iEt()*Math.sin(e))),i.qS()+t}return this.Ba}xj(t,s){if(t=+t,s=+s,this.nDt()){const i=this.d5(),e=this.m5(),n=this.QEt,r=t-this.YS(),h=s-this.qS(),o=-this.sDt();if(0==o)i?this.za+=r/n.iEt():this.za=t,e?this.Ba+=h/n.eEt():this.Ba=s;else{const a=Math.sin(o),u=Math.cos(o);i?this.za+=e?(u*r-a*h)/n.iEt():u*r/n.iEt():this.za=t,e?this.Ba+=i?(a*r+u*h)/n.eEt():u*h/n.eEt():this.Ba=s}}else this.za=t,this.Ba=s}rDt(){return[this.YS(),this.qS()]}Gj(t,s){t=+t,s=+s,this.nDt()?this.xj(this.YS()+t,this.qS()+s):(this.za+=t,this.Ba+=s)}GSt(t,s){return this.YS()===t&&this.qS()===s}KS(t){if(t=+t,this.v5()&&(t-=this.Xj().XS()),this.LS!==t){this.LS=t,this.hDt();const s=this.X3();0!==this.LS&&s.dY(),s.e4(this)}}hDt(){if(this.tDt(),this.HH()){const i=this.Z9();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.v5()&&e.hDt()}}}jrt(t){this.KS(this.XS()+t)}XS(){return this.v5()?this.Xj().XS()+this.LS:this.LS}Ej(){return this.X3().XS()+this.XS()}Jst(){const t=this.TB().iP().Mwt();return t<2&&this.TB().J5().Jst()}Kp(t){if(t=+t,this.y5()){const s=this.Jp();0===s?this.GEt=Number.EPSILON:this.GEt*=t/s}else this.GEt=t;this.oDt()}Nm(t,s){t=+t,!s&&this.y5()?this.Kp(this.Jp()+t):this.GEt+=t,this.oDt()}Jp(){if(this.y5()){const t=this.Xj(),s=t.Jp(),i=t.vrt().brt();return i===Number.EPSILON?(this.vrt().brt()+s)*this.GEt:s*this.GEt}return this.GEt}Yp(t){if(t=+t,this.w5()){const s=this.im();0===s?this.NEt=Number.EPSILON:this.NEt*=t/s}else this.NEt=t;this.oDt()}Grt(t,s){t=+t,!s&&this.w5()?this.Yp(this.im()+t):this.NEt+=t,this.oDt()}im(){if(this.w5()){const t=this.Xj(),s=t.im(),i=t.vrt().Irt();return i===Number.EPSILON?(this.vrt().Irt()+s)*this.NEt:s*this.NEt}return this.NEt}DG(t,s){if(t=+t,s=+s,this.y5()){const i=this.Jp();0===i?this.GEt=Number.EPSILON:this.GEt*=t/i}else this.GEt=t;if(this.w5()){const e=this.im();0===e?this.NEt=Number.EPSILON:this.NEt*=s/e}else this.NEt=s;this.oDt()}Ql(){return[this.Jp(),this.im()]}vH(){return this.Q2}aDt(t){if(t<0)throw new RangeError("invalid depth");this.Q2=t}uDt(){if(this.l5()){const t=this.QEt;return Math.min(t.iEt(),t.eEt())}return 1}PR(){return 0!=(128&this.jwt)}LP(t){t=+t,this.PR()&&(this.T5()&&(t-=this.Xj().OP()),t=d.hr(t),this.Po!==t)&&(this.Po=t,this.oDt())}Nrt(t){0!=(t=+t)&&this.PR()&&(this.Po=d.hr(this.Po+t),this.oDt())}oDt(){if(this.jwt|=1<<18,this.HH()){const i=this.Z9();for(let t=0,s=i.length;t<s;t++)i[t].oDt()}}OP(){return this.T5()&&this.PR()?this.iDt(d.hr(this.Xj().eDt()+this.Po)):this.Po}eDt(){return this.T5()&&this.PR()?d.hr(this.Xj().eDt()+this.Po):this.Po}iDt(t){return this.y5()&&this.$j().Jp()<0&&(t=d.hr(d.Tr(t,this.$j().OP()+Math.PI))),this.w5()&&this.$j().im()<0?d.Tr(t,this.$j().OP()):t}lDt(){const t=this.Xj();return!!(this.y5()&&t.Jp()<0)||!!(this.w5()&&t.im()<0)}cDt(){const t=this.Xj();return!!(this.y5()&&t.Jp()<0&&this.w5()&&t.im()<0)}fDt(){const t=this.jwt;if(0!=(t&1<<18)){const s=this.OP();this.EEt=Math.sin(s),this.DEt=Math.cos(s),this.jwt=-262145&t}}ASt(){return this.fDt(),this.EEt}_St(){return this.fDt(),this.DEt}Prt(t){this._Et=+t}Rrt(t){this._Et+=+t}Oz(){return this._Et}Frt(t){this.AEt=+t}krt(t){this.AEt+=+t}Pz(){return this.AEt}ZEt(t){this.AS.equals(t)||(this.AS===i?(this.AS=d.Xn(d.Ao,t),this.zEt=d.Xn(d.Ao,t),this.zEt.oa()):t.ea(1,1,1,1)?(this.AS=i,this.zEt=i):(this.AS.set(t),this.zEt.set(t),this.zEt.oa()),this.tDt())}aD(t){if(t=d.rr(+t,0,1),this.I5()){if(this.vrt().XSt()===t)return;this.vrt().sEt(t),t=this.hD()}else if(this.AS.a===t)return;this.dDt(t)}pDt(){if(this.HH()){const i=this.Z9();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.dDt(e.hD())}}}dDt(t){f.Jo(this.AS),f.a=t,this.ZEt(f),this.pDt()}_rt(t){this.I5()?this.aD(this.vrt().XSt()+t):this.aD(this.hD()+t)}hD(){return this.I5()?this.Xj().hD()*this.vrt().XSt():this.AS.a}Fj(t){this.AS.$o(t)||(f.Jo(t),f.a=this.hD(),this.ZEt(f))}lrt(t,s,i){f.Fo(t,s,i),this.Fj(f)}mDt(t,s,i){0===t&&0===s&&0===i||(f.Jo(this.AS),f.r+=t,f.Ea+=s,f.b+=i,this.Fj(f))}kj(){return this.AS}LJ(){return this.zEt}E5(){return 0!=(512&this.jwt)}gDt(t){this.yDt(512,t)}d5(){return 0!=(1024&this.jwt)}MDt(t){this.yDt(1024,t)}m5(){return 0!=(2048&this.jwt)}nDt(){return 0!=(3072&this.jwt)}wDt(t){this.yDt(2048,t)}y5(){return 0!=(4096&this.jwt)}SDt(t){this.yDt(4096,t)}w5(){return 0!=(8192&this.jwt)}TDt(t){this.yDt(8192,t)}T5(){return 0!=(16384&this.jwt)}bDt(t){this.yDt(16384,t)}v5(){return 0!=(32768&this.jwt)}vDt(t){this.yDt(32768,t)}I5(){return 0!=(this.jwt&1<<22)}xDt(t){this.yDt(1<<22,t)}G5(){return 0!=(this.jwt&1<<23)}IDt(t){this.yDt(1<<23,t)}CDt(){this.jwt&=-12647937}o5(t,s){if(t===this)return!1;if(t.l5())return!1;if(this.GDt(t))return!1;if(this.NDt(t))return!1;const i=t.YS(),e=t.qS(),n=t.Jp(),r=t.im(),h=t.OP(),o=t.XS(),a=t.hD(),u=(t.EDt(this),t.MDt(s.f5),t.wDt(s.p5),t.SDt(s.g5),t.TDt(s.M5),t.bDt(s.S5),t.vDt(s.b5),t.xDt(s.x5),t.IDt(s.C5),t.gDt(s.N5),i-this.YS()),l=e-this.qS(),c=-this.OP(),f=Math.cos(c),d=Math.sin(c);if(s.f5&&(s.S5?t.za=u*f-l*d:t.za=u,s.g5)){const p=this.Jp()/this.QEt.brt();0!=p&&(t.za/=p)}if(s.p5&&(s.S5?t.Ba=u*d+l*f:t.Ba=l,s.M5)){const m=this.im()/this.QEt.Irt();0!=m&&(t.Ba/=m)}if(s.g5){const g=this.Jp();0===g||g===Number.EPSILON?(t.GEt=1,t.QEt.$Nt(1)):(t.GEt=n/this.Jp(),t.QEt.$Nt(t.GEt))}if(s.M5){const y=this.im();0===y||y===Number.EPSILON?(t.NEt=1,t.QEt.tEt(1)):(t.NEt=r/this.im(),t.QEt.tEt(t.NEt))}return s.S5&&(t.Po=h-this.OP()),s.b5&&(t.LS=o-this.XS()),s.x5&&t.QEt.sEt(a),s.C5&&t.Mk(this.Sk()),this.DDt(t),this.vj(),this.pDt(),!0}a5(t){if(t.Xj()===this){const s=t.YS(),i=t.qS(),e=t.Jp(),n=t.im(),r=t.OP(),h=t.XS(),o=t.hD();t.EDt(null),t.CDt(),t.xj(s,i),t.DG(e,n),t.LP(r),t.KS(h),t.aD(o),this._Dt(t),this.vj()}}ADt(){return this.JEt}LDt(){this.ODt();const t=[...this.children()];for(const i of t)this.a5(i);const s=this.Xj();s&&s.a5(this),this.CDt()}ODt(){if(this.RDt(),!this.JNt){const s=[...this.children()];s.length&&(this.JNt=[],this.YNt=new WeakMap);let t=0;for(const i of s){const e=i.TB();this.JNt.push(e),this.YNt.set(e,t),t++}}const t=this.Xj();t&&t.ODt()}RDt(){if(-1===this.JEt){const t=[...this.t5()];this.JEt=t.length;for(const i of t)i.RDt();const s=[...this.children()];for(const e of s)e.RDt()}}qEt(){this.JNt&&(this.JNt.length=0),this.JNt=null,this.YNt=null;const t=this.Xj();t&&t.qEt(),this.JEt=-1}l5(){return null!==this.Xj()}Xj(){const t=this.QEt;return null!==t?t.Xj():null}$j(){let t=this;for(;t.l5();)t=t.Xj();return t}*t5(){let t=this.Xj();for(;t;)yield t,t=t.Xj()}fNt(t){return this.Z9().includes(t)}HH(){const t=this.QEt;return null!==t&&t.HH()}Z9(){const t=this.QEt;return null!==t?t.Z9():e}children(){return this.Z9()}*r5(){for(const t of this.children())yield t,yield*t.r5()}i5(){return this.Z9().length}GTt(){return[...this.r5()].length}n5(t){const s=this.Z9();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}gNt(s){if(s){const i=this.Z9();if(i)for(let t=0;t<i.length;t++)if(s===i[t])return t}return NaN}PDt(t){this.QEt||(this.QEt=d.Xn(d.K9,this)),t&&this.QEt.ZNt(t)}vrt(){return this.QEt}HEt(){this.QEt&&(this.QEt.Kn(),this.QEt=null)}EDt(t){t?(t.PDt(null),this.PDt(t)):(this.QEt&&this.QEt.ZNt(null),this.HH()||this.HEt())}NDt(t){if(!this.l5())return!1;const s=this.Xj();return s===t||s.NDt(t)}GDt(t){if(this.fNt(t))return!0;for(const s of this.Z9())if(s.GDt(t))return!0;return!1}DDt(t){this.QEt.Z9().push(t)}_Dt(t){const s=this.QEt.Z9(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.l5()||this.HEt(),t.HH()||t.HEt()}MNt(){const t=g.get(this);return t?t.KEt:null}kDt(){const t=g.get(this);return t?t.$Et:NaN}VH(){const t=a.get(this);return d.ae(t)?t:NaN}FDt(t){a.set(this,t)}jDt(){this.yDt(1<<19,!0),this.tDt()}tDt(){if(m){const s=this.Jc.mS();this.BEt&&s.FM(this.BEt);let t;t=0!=(this.jwt&1<<19)?s.SM()||"<point>":s.yM()||"<default>",this.BEt=s.OM(t,this.Qk(),this.zEt,this.XS())}}DH(){return this.BEt}AY(){return this.AS===i}RS(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.Qk()!==t&&(this.jwt=this.jwt&~(31<<26)|t<<26,this.tDt())}Qk(){return(this.jwt&31<<26)>>26}i4(t,s){const i=s&&this.xEt!==t;i&&this.cY(),this.Nct.MGt(this,this.xEt,t),this.xEt=t,i&&this.zDt(),0!==this.XS()&&this.xEt.dY()}X3(){return this.xEt}_3(){return this.X3()._3()}mY(t){this.IEt=0|t}K3(){return this.xEt.xV(),this.IEt}NV(t){this.CEt=0|t}SU(){return this.xEt.CV(),this.CEt}f8(){return this.IEt}yDt(t,s){s?this.jwt|=t:this.jwt&=~t}Sk(){return 0!=(1&this.jwt)}Mk(t){if(this.yDt(1,t),this.HH())for(const s of this.Z9())s.G5()&&s.Mk(t)}Hj(){return 0!=(8&this.jwt)}qj(t){t=!!t,this.Hj()!==t&&(this.yDt(8,t),t?this.vj():this.BDt())}UDt(t,s){if(this.yDt(32,t),this.jEt&&this.jEt.clear(),s.trim()){this.jEt||(this.jEt=new Set);for(const i of s.split(" "))i&&this.jEt.add(i.toLowerCase())}else this.jEt=null}WDt(t){const s=0!=(32&this.jwt),i=this.jEt;if(t&&i)for(const e of i)if(t.has(e))return s;return!s}vj(){if(this.jwt|=65554,this.Nct.mGt(!0),this.Jc.n4(),this.xEt.JJ()&&(this.QDt(this.LEt,this.OEt,!0),this.jwt&=-3,this.zDt()),0!=(4&this.jwt)&&this.wi.Gf().dispatchEvent(s),null!==this.QEt){const i=this.QEt.Z9();for(let t=0,s=i.length;t<s;++t)i[t].vj()}}QDt(t,s,i){const e=this.YS(),n=this.qS(),r=this.Jp(),h=this.im(),o=this.OP();t.su(e-this._Et*r,n-this.AEt*h,r,h),i&&this.k5()&&this.JDt(t),0===o?s.hl(t):(t.offset(-e,-n),s.al(t,this.ASt(),this._St()),s.offset(e,n),s.ul(t)),t.normalize()}YDt(){const t=this.jwt;0!=(2&t)&&(this.QDt(this.LEt,this.OEt,!0),this.jwt=-3&t)}_j(){return this.YDt(),this.LEt}Lj(){return this.YDt(),this.OEt}VDt(t){const s=this.YS(),i=this.qS(),e=Math.round(s)-s,n=Math.round(i)-i;return 0==e&&0==n?t:(h.I(t),h.offset(e,n),h)}HDt(t){this.LEt.I(t),this.OEt.hl(this.LEt),this.jwt&=-3,this.yGt(),this.zDt()}qDt(t){this.yDt(4,t)}ZDt(){return 0!=(4&this.jwt)}MH(t,s,i){return s&&0!==this.vH()?this.TH(this.X3().SH()):0===this.XS()||i?t.Lu(this._j()):this.XDt()}XDt(){const t=this.X3(),s=this.Ej();return!(s>=t.ZY())&&(t.HY(s,r),r.Lu(this._j()))}TH(t){const s=this._j(),i=s.uu(),e=s.cu(),n=s.lu(),r=s.fu(),h=this.Ej(),o=h+this.vH();return t.Xg(i,n,h,e,r,o)}Rj(){const t=this.X3();if(t.aV())return this.TH(t.SH());{const s=t._3();return this.MH(t.Hk(),s.yH(),s.uk())}}GH(t){this.yDt(1<<20,t)}CH(t){this.yDt(1<<21,t)}KDt(){return 0!=(this.jwt&1<<20)}$Dt(){return 0!=(this.jwt&1<<21)}t_t(t){this.kEt=t,this.s_t(),this.k5()&&(this.YEt.i_t=null)}e_t(){return this.kEt}n_t(){return null!==this.kEt||this.k5()}r_t(){return this.h_t(this.Jp(),this.im(),this.OP(),this.ASt(),this._St())}o_t(t,s,i){let e=0,n=1;return 0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.h_t(t,s,i,e,n)}h_t(n,r,t,h,o){let s=this.FEt;null===s&&(s={VEt:d.Xn(d.wl),width:NaN,height:NaN,angle:NaN},this.FEt=s);const a=s.VEt;if(s.width!==n||s.height!==r||s.angle!==t){const u=this.kEt;if(this.k5()){let t=this.Oz(),s=this.Pz(),i=this.F5(),e=this.YEt.i_t;e||(u?(l.I(u),l.offset(t,s)):l.Gl(),e=i.PT(l),this.YEt.i_t=e),i.kT(e,a),a.offset(-t,-s),a._l(n,r,h,o)}else u?(a.I(u),a._l(n,r,h,o)):a.Dl(this.Lj(),-this.YS(),-this.qS());s.width=n,s.height=r,s.angle=t}return a}s_t(){this.a_t(!0);const t=this.FEt;null!==t&&(t.width=NaN)}_5(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.TB().iP().QR())throw new Error("object does not support mesh");this.L5(),this.YEt={u_t:d.Xn(d.jg.lT,t,s),l_t:d.Xn(d.jg.lT,t,s),i_t:null}}k5(){return null!==this.YEt}F5(){if(this.k5())return this.YEt.u_t;throw new Error("no mesh")}c_t(){if(this.k5())return this.YEt.l_t;throw new Error("no mesh")}f_t(t){this.yDt(65536,t)}d_t(){return 0!=(65536&this.jwt)}a_t(t){this.yDt(1<<17,t)}p_t(){return 0!=(this.jwt&1<<17)}JDt(t){const s=this.YEt.u_t,i=Math.min(s.CT(),0),e=Math.min(s.GT(),0),n=Math.max(s.NT(),1),r=Math.max(s.ET(),1),h=t.width(),o=t.height();t.offsetLeft(i*h),t.offsetTop(e*o),t.wu((n-1)*h),t.Su((r-1)*o),this.Q2=s.DT()}L5(){this.YEt&&(this.YEt.u_t.Kn(),this.YEt.l_t.Kn(),this.YEt=null,this.s_t())}R5(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!p.has(e))throw new Error("invalid mode");let n="relative"===e,r=i.x,h=i.y,o=i.kk,a="number"==typeof i.u?i.u:n?0:-1,u="number"==typeof i.v?i.v:n?0:-1;if(!this.k5())return!1;const l=this.F5(),c=l.AT(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.XS()!==o&&(c.KS(o),f=!0),n&&(r+=t/(l.TT()-1),h+=s/(l.bT()-1)),a=-1!==a||n?(n&&(a+=t/(l.TT()-1)),d.rr(a,0,1)):c.$S(),u=-1!==u||n?(n&&(u+=s/(l.bT()-1)),d.rr(u,0,1)):c.sT(),c.YS()===r&&c.qS()===h&&c.$S()===a&&c.sT()===u?f:(c.VS(r),c.ZS(h),c.tT(a),c.iT(u),this.s_t(),!0)}$Gt(){return this.wi.$Gt()}Zj(t,s){return!!this._j().Ru(t,s)&&!!this.Lj().Ru(t,s)&&(this.$Gt()?this.wi.J5().Fvt(t,s):!this.n_t()||this.r_t().Ru(t-this.YS(),s-this.qS()))}m_t(){return 0!=(16&this.jwt)}yGt(){if(this.m_t()&&this.Hj()&&0==(256&this.jwt)){const t=this._j(),s=this.Nct.pGt(),i=this.REt;if(r.set(s.E8(t.uu()),s.D8(t.lu()),s.E8(t.cu()),s.D8(t.fu())),!i.equals(r)){const e=this.wi;i===n?(s._8(e,null,r),this.REt=d.Xn(d.Rect,r)):(s._8(e,i,r),i.I(r)),this.jwt&=-17}}}g_t(){this.jwt|=16}BDt(){const t=this.REt;t!==n&&(this.Nct.pGt()._8(this.wi,t,null),this.REt=n)}zDt(){const t=this.X3();if(t.JJ()&&0==(256&this.jwt)){const s=t.OY(),i=this._j(),e=this.PEt;if(r.set(s.E8(i.uu()),s.D8(i.lu()),s.E8(i.cu()),s.D8(i.fu())),!e.equals(r)){const n=this.wi;e===o?(s._8(n,null,r),this.PEt=d.Xn(d.Rect,r)):(s._8(n,e,r),e.I(r)),t.RY()}}}cY(){const t=this.PEt;t!==o&&(this.X3().OY()._8(this.wi,t,null),this.PEt=o)}IV(){return this.PEt}zj(){const t=this.wi,s=this.xEt,i=s.s4();i.length&&i.at(-1)===t||(s.lY(t,!1),s.hY(t,!1),this.Jc.n4())}Uj(){const t=this.wi,s=this.xEt,i=s.s4();i.length&&i[0]===t||(s.lY(t,!1),s.uY(t,!1),this.Jc.n4())}Qj(t){const s=this.wi,i=this.xEt;if(i._3()!==t._3())throw new Error("layer from different layout");t!==i&&(i.lY(s,!0),this.i4(t),t.hY(s,!0),this.Jc.n4())}Yj(t,s){let i=this.wi,e=!1,n=this.xEt;if(t.vF()!==i.vF()){const r=t.Z3();if(!r)throw new Error("expected world instance");const h=r.X3(),o=(n.$L()!==h.$L()&&(n.lY(i,!0),this.i4(h),h.hY(i,!0),e=!0),h._V(i,t,!!s));(e||o)&&this.Jc.n4()}}Tj(){return this.UEt}y_t(t){this.yDt(64,t)}FV(){return 0!=(64&this.jwt)}QH(t,s=null){const i={x:this.YS(),y:this.qS(),w:this.Jp(),h:this.im(),l:this.X3().NY(),zi:this.K3()},e=(0!==this.XS()&&(i.ze=this.XS()),0!==this.OP()&&(i.a=this.eDt()),this.AY()||(i.c=this.AS.toJSON()),.5!==this.Oz()&&(i.oX=this.Oz()),.5!==this.Pz()&&(i.oY=this.Pz()),0!==this.Qk()&&(i.bm=this.Qk()),this.Sk()||(i.v=this.Sk()),this.Hj()||(i.ce=this.Hj()),this.ZDt()&&(i.be=this.ZDt()),this.UEt&&(i.fx=this.UEt.QH()),0!=(32&this.jwt));return e&&(i.sfi=e),this.jEt&&(i.sft=[...this.jEt].join(" ")),this.QEt&&"visual-state"!==t&&(i.sgi=this.QEt.QH(t,s),g.has(this))&&(i.sgcd=g.get(this).KEt,i.sgzid=g.get(this).$Et),this.k5()&&(i.mesh=this.F5().rT()),i}lEt(){return{x:this.za,y:this.Ba,z:this.LS,w:this.GEt,h:this.NEt,a:this.Po,sgi:this.vrt()?this.vrt().rEt():null}}pEt(t){t&&(this.za=t.x,this.Ba=t.y,this.LS=t.z,this.GEt=t.w,this.NEt=t.h,this.Po=t.a,t.sgi&&this.vrt()&&this.vrt().JH(t.sgi),this.oDt(),this.vj())}IGt(){this.qEt(),this.LDt(),this.PDt(null),this.QEt&&this.QEt.fEt(this.JNt,this.YNt)}aZ(t){"visual-state"!==t&&this.LDt()}lZ(t,s="full",i=null){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.jwt)&&this.QEt.lZ(t.sgi,i)}RNt(t,s="full",i){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.jwt)&&(this.QEt.fEt(null,null),this.qEt(),this.vj())}JH(t,s){if(m=!1,this.VS(t.x),this.ZS(t.y),this.Kp(t.w),this.Yp(t.h),this.mY(t.zi),this.KS(t.hasOwnProperty("ze")?t.ze:0),this.LP(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?f.Na(t.c):t.hasOwnProperty("o")?(f.Jo(this.AS),f.a=t.o):f.ko(1,1,1,1),this.ZEt(f),this.Prt(t.hasOwnProperty("oX")?t.oX:.5),this.Frt(t.hasOwnProperty("oY")?t.oY:.5),this.RS(t.hasOwnProperty("bm")?t.bm:0),this.Mk(!t.hasOwnProperty("v")||t.v),this.qj(!t.hasOwnProperty("ce")||t.ce),this.qDt(!!t.hasOwnProperty("be")&&t.be),this.UDt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.UEt&&t.hasOwnProperty("fx")&&this.UEt.JH(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==s&&this.JNt)for(const i of this.JNt)i.CU()||this.Jc.gF(i);if(t.hasOwnProperty("sgi")&&"visual-state"!==s){this.PDt(null);const e=this.QEt,n=t.sgi;e.JH(n),e.fEt(this.JNt,this.YNt),t.sgcd&&d.ae(t.sgzid)&&g.set(this,{KEt:t.sgcd,$Et:t.sgzid})}if(t.hasOwnProperty("mesh")){const r=t.mesh;this._5(r.cols,r.rows),this.F5().hT(r)}else this.L5();this.vj(),m=!0,this.tDt(),"visual-state"!==s&&this.Jc.M_t(this.TB(),t)}}}{const Ma=self.Ls;Ma.rCt=class extends Ma.qn{constructor(t,s){super();const i=t.w4(),e=i.zgt(s[1]),n=(i.w_t().Lxt(e),this.Jc=i,this.Nct=t,this.dxt=Ma.GR.az(e),this.Xbt=null,this.S_t=null,this.PIt=e.Instance,this.H8=s[2],this.er=s[0],this.vyt=this.Jc.n1t(s[3]),this.dxt.Mwt());if(n<2&&(this.Xbt=Ma.Xn(e.bCt,this),!(this.Xbt instanceof Ma.fxt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(Ma.GR.Lbt(this,n),2<=n){const r=e.bCt??globalThis.kU;if(this.S_t=new r,!(this.S_t instanceof globalThis.kU))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.S_t=new globalThis.hz;Ma.GR.Obt(n),this.Ebt()}static _b(t,s){return Ma.Xn(Ma.rCt,t,s)}Kn(){this.Jc=null,this.dxt=null,this.Xbt&&(this.Xbt.Kn(),this.Xbt=null),this.PIt=null}pSt(){return this.Xbt}Ebt(){this.Xbt?this.Xbt.Ebt():this.S_t&&this.S_t.zB()}w4(){return this.Jc}uF(){return this.Nct}K5(){return this.dxt}QCt(){return this.PIt}kc(){return this.er}NY(){return this.H8}iz(){return this.S_t}n1t(){return this.vyt}}}{const wa=self.Ls,Sa=self.Z5;wa.FGt=class extends wa.qn{constructor(t){super(),this.Jc=t.runtime,this.iMt=t.sz,this.dxt=this.iMt.K5(),this.wi=t.nz,this.Ag=t.index,this.DGt=null,this._Gt=null,this.dxt.hY(this.wi)}Kn(){this._Gt&&(this._Gt.pF(),this._Gt=null),this.dxt.lY(this.wi),this.DGt&&(this.DGt.Kn(),this.DGt=null),this.Jc=null,this.iMt=null,this.dxt=null,this.wi=null}jCt(t){if(this.DGt)throw new Error("already got sdk instance");const s=this.K5().Mwt();if(s<2){if(this.DGt=wa.Xn(this.iMt.QCt(),this,t),!(this.DGt instanceof wa.pxt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const i=this.K5().Dbt();this.Abt(i.Instance,t)}}J5(){return this.DGt??this._Gt}rz(){return this.wi}w4(){return this.Jc}ez(){return this.iMt}K5(){return this.dxt}Znt(){return this.Ag}Mxt(){this.DGt?this.DGt.Mxt():this._Gt.BU()}bxt(t,s){this.DGt&&this.DGt.bxt(t,s)}ONt(){return this.DGt?this.DGt.Mvt():this._Gt.oj()}rT(t="full"){return this.DGt?this.DGt.rT(t):this._Gt.aj(t)}hT(t,s="full"){if(this.DGt)return this.DGt.hT(t,s);this._Gt.uj(t,s)}static T_t(t,s,i){let e=globalThis.FU,n,r;n=s instanceof e?t.VP(s):s.yxt(),r=i instanceof e?t.VP(i):i.yxt();const h=n.rz(),o=r.rz(),a=h.uF().$L(),u=o.uF().$L();if(a!==u)return a-u;const l=h.bNt(),c=o.bNt();return l!==c?l-c:n.Znt()-r.Znt()}Abt(t,s){const i=Sa,e=t??this.DGt.Dbt(),n=e||i,r=this.K5().Mwt();if(wa.GR.Lbt(this,r),wa.GR.Oxt(s),this._Gt=new n,wa.GR.Rxt(),wa.GR.Obt(r),!e||this._Gt instanceof i)return this._Gt;throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`)}tvt(){return this._Gt||this.Abt()}bvt(){return!!this._Gt}}}{const Ta=self.Ls;Ta._J=class extends Ta.qn{constructor(t,s){super(),this.dT=t,this.b_t=[],this.v_t=[],this.x_t=new Map,this.I_t=[],this.C_t=[],this.G_t=new Set,this.aS=!0;for(const i of s){const e=Ta.Xn(Ta.N_t,this,i,this.b_t.length);this.b_t.push(e),this.x_t.set(e.kc().toLowerCase(),e),3<=i.length&&this.I_t.push(this.E_t(e,i[2]))}this.w4().D_t(this)}Kn(){this.w4().__t(this);for(const t of this.C_t)t.Kn();Ta.Nh(this.C_t),Ta.Nh(this.b_t),Ta.Nh(this.v_t),this.x_t.clear(),Ta.Nh(this.I_t),this.dT=null}A_t(t){this.G_t.add(t)}L_t(t){this.G_t.delete(t)}O_t(t){t.lM()&&(this.C_t=this.b_t.map(t=>{const s=t.Lv();return 0<s.GetCustomParametersByteSize()?Ta.Xn(Ta.jg.WebGPUEffectCustomParamsBuffer,s):null}),this.R_t());for(const s of this.G_t)s.O_t(t)}kCt(t){if(t.length){this.b_t=t.concat(this.b_t);for(const s of t)this.x_t.set(s.kc().toLowerCase(),s);for(let t=0,s=this.b_t.length;t<s;++t)this.b_t[t].vY(t)}}E_t(t,s){t.P_t(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const n=Ta.Xn(Ta.Ao);n.Na(e),i[t]=n}}return i}vT(){return this.dT}w4(){return this.dT.w4()}cz(){Ta.Nh(this.v_t);let t=!0;for(const s of this.b_t)s.Cpt()&&(this.v_t.push(s),s.Lv().TS()||(t=!1));this.aS=t}GP(){return this.b_t}KCt(){return 0<this.b_t.length}nnt(t){return this.x_t.get(t.toLowerCase())||null}k_t(t){if((t=Math.floor(+t))<0||t>=this.b_t.length)throw new RangeError("invalid effect type index");return this.b_t[t]}uz(t){return this.k_t(t).Cpt()}lz(t,s){this.k_t(t).P_t(s)}LY(){return this.v_t}FV(){return 0<this.v_t.length}TS(){return this.aS}ent(t){return this.I_t[t]}RJ(t){return(t<this.C_t.length?this.C_t:this.I_t)[t]}fz(t,s){if(t<0||t>=this.I_t.length)return null;const i=this.I_t[t];return s<0||s>=i.length?null:i[s]}dz(t,s,i){if(t<0||t>=this.I_t.length)return!1;const e=this.I_t[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof Ta.Ao){if(n.$o(i))return!1;n.Jo(i)}else{if(n===i)return!1;e[s]=i}return t<this.C_t.length&&this.C_t[t].SetParameterValue(s,i),!0}R_t(){const i=this.I_t,e=this.C_t;for(let t=0,s=Math.min(i.length,e.length);t<s;++t){const n=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)n.SetParameterValue(t,r[t])}}static F_t(t){return t&&t instanceof Ta.Ao?{t:"color",v:t.toJSON()}:t}static j_t(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const s=t.t;if("color"!==s)throw new Error("invalid effect parameter type");{const i=Ta.Xn(Ta.Ao);return i.Na(t.v),i}}}static z_t(t){return t.map(Ta._J.F_t)}static B_t(t){return t.map(Ta._J.j_t)}rT(){return this.b_t.map(t=>({name:t.kc(),active:t.Cpt(),params:Ta._J.z_t(this.I_t[t.$L()])}))}hT(t){for(const s of t){const i=this.nnt(s.name);i&&(i.P_t(s.active),this.I_t[i.$L()]=Ta._J.B_t(s.params))}this.cz(),this.R_t()}}}{const ba=self.Ls;ba.N_t=class extends ba.qn{constructor(t,s,i){super(),this.DJ=t,this.Vc=s[0],this.er=s[1],this.Ag=i,this.ES=null,this.Vf=!0}Kn(){this.DJ=null,this.ES=null}PCt(t){const s=ba.Xn(ba.N_t,t,[this.Vc,this.er],-1);return s.ES=this.ES,s.Vf=this.Vf,s}O_t(t){const s=t.gM(this.Vc);if(!s)throw new Error("failed to find shader program '"+this.Vc+"'");this.ES=s}CP(){return this.DJ}kc(){return this.er}vY(t){this.Ag=t}$L(){return this.Ag}vT(){return this.DJ.vT()}w4(){return this.DJ.w4()}P_t(t){this.Vf=!!t}Cpt(){return this.Vf}Lv(){return this.ES}U_t(){const i=[];for(let t=0,s=this.ES.Ov();t<s;++t){const e=this.ES.Rv(t);if("float"===e||"percent"===e)i.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");i.push(ba.Xn(ba.Ao,1,1,1,1))}}return i}}}{const va=self.Ls;va.WEt=class extends va.qn{constructor(t,s){super(),this.wi=t,this.W_t=s,this.DJ=t.uF().CP(),this.Q_t=!0,this.kJ=!0,this.J_t=!1,this.Y_t=!1,this.V_t=!1,this.H_t=!1,this.qL=va.Xn(va.jg.H_,t.w4().lR().AJ(),{k_:(t,s)=>{const i=s.BL(),e=i.Z3();t.PS(e.LJ()),t.KM(e.Ej()),i.OT(t),t.KM(0)},F_:t=>{const s=t.Lvt(),[i,e]=t.Avt();return{OL:s,RL:i,PL:e}},j_:t=>this.RJ(t)}),this.q_t=[],this.v_t=[],this.aS=!0,this.I_t=[],this.C_t=[],this.O_t(t.w4().mS());for(let t=0,s=this.DJ.GP().length;t<s;++t)this.q_t.push(!0);this.cz(),this.DJ.A_t(this)}Kn(){this.DJ.L_t(this);for(const t of this.C_t)t&&t.Kn();va.Nh(this.C_t),this.qL.Kn(),this.qL=null,va.Nh(this.q_t),va.Nh(this.v_t),va.Nh(this.I_t),this.wi=null,this.DJ=null}O_t(t){t.lM()&&(this.C_t=this.DJ.GP().map(t=>{const s=t.Lv();return 0<s.GetCustomParametersByteSize()?va.Xn(va.jg.WebGPUEffectCustomParamsBuffer,s):null}))}XEt(t){let s=0;for(const i of t)this.I_t.push(this.E_t(s,i)),++s;this.R_t(),this.cz()}E_t(t,s){this.q_t[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const n=va.Xn(va.Ao);n.Na(e),i[t]=n}}return i}JGt(){for(const t of this.DJ.GP())this.I_t.push(t.U_t());this.R_t()}vT(){return this.dT}CP(){return this.DJ}KL(){return this._Y(),this.qL}w4(){return this.wi.w4()}cz(){va.Nh(this.v_t);let t=this.W_t,i=this.DJ.GP(),e=this.v_t,n=this.q_t,r=!0;for(let t=0,s=i.length;t<s;++t)if(n[t]){const h=i[t];e.push(h),h.Lv().TS()||(r=!1)}this.aS=r,t.y_t(!!e.length),this.Q_t=!0}_Y(){const t=this.wi,s=this.W_t,i=s.AY(),e=t.iP().zR(),n=0!==s.OP()||0!==s.X3().OP()||s.Jp()<0||s.im()<0,r=t.Pvt(),h=t.SS();(this.Q_t||i!==this.kJ||e!==this.J_t||n!==this.Y_t||r!==this.V_t||h!==this.H_t||this.qL.jA())&&(this.qL.zA(this.v_t.map(t=>t.Lv()),{B_:this.v_t.map(t=>t.$L()),U_:!i||h,Q_:e,J_:r,Y_:n}),this.Q_t=!1,this.kJ=i,this.J_t=e,this.Y_t=n,this.V_t=r,this.H_t=h)}LY(){return this.v_t}ent(t){return this.I_t[t]}RJ(t){return(t<this.C_t.length?this.C_t:this.I_t)[t]}fz(t,s){if(t<0||t>=this.I_t.length)return null;const i=this.I_t[t];return s<0||s>=i.length?null:i[s]}dz(t,s,i){if(t<0||t>=this.I_t.length)return!1;const e=this.I_t[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof va.Ao){if(n.$o(i))return!1;n.Jo(i)}else{if(n===i)return!1;e[s]=i}return t<this.C_t.length&&this.C_t[t].SetParameterValue(s,i),!0}R_t(){const i=this.I_t,e=this.C_t;for(let t=0,s=e.length;t<s;++t){const n=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)n.SetParameterValue(t,r[t])}}TS(){return this.aS}Z_t(){return this.v_t.some(t=>t.Lv().xS())}uz(t){return this.q_t[t]}lz(t,s){this.q_t[t]=!!s}GP(){return this.DJ.GP()}QH(){return this.DJ.GP().map(t=>({name:t.kc(),active:this.q_t[t.$L()],params:va._J.z_t(this.I_t[t.$L()])}))}JH(t){for(const s of t){const i=this.DJ.nnt(s.name);i&&(this.q_t[i.$L()]=s.active,this.I_t[i.$L()]=va._J.B_t(s.params))}this.cz(),this.R_t()}}}{let C=self.Ls,r=[],S=[],h=[],T=C.Xn(C.wl),M=C.Xn(C.wl),b=C.Xn(C.ju),d=C.Xn(C.Rect),p=C.Xn(C.Rect),m=null,g=null,y=null;C.X_t=class extends C.qn{constructor(t){super(),this.Jc=t,this.K_t=0,this.$_t=0,this.tAt=[],this.sAt=0,this.iAt=0,this.eAt=0,this.nAt=0,this.rAt=new self.z4(this)}Kn(){this.Jc=null}w4(){return this.Jc}rO(){return this.rAt}hAt(){this.iAt=this.sAt,this.sAt=0,this.nAt=this.eAt,this.eAt=0}oAt(){return this.iAt}aAt(){return this.nAt}uAt(t,s){const i=t.Z3(),e=s.Z3();i&&e&&i.Hj()&&e.Hj()&&this.tAt.push([t,s])}yTt(s,i,e){for(const[n,r]of this.tAt){let t=null;if(s===n)t=r;else{if(s!==r)continue;t=n}t.vTt(i)&&!e.includes(t)&&e.push(t)}}MTt(t,s){if(this.tAt.length)for(const[i,e]of this.tAt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}lAt(){C.Nh(this.tAt)}U4(t,s){if(!t||!s||t===s)return!1;const i=t.Z3(),e=s.Z3();if(!i.Hj()||!e.Hj())return!1;this.sAt++;const n=i.X3(),r=e.X3(),h=n.SV(r);return h?this.cAt(i,e):this.fAt(i,e)}cAt(t,s){if(!t._j().Lu(s._j()))return!1;if(this.eAt++,!t.Lj().cl(s.Lj()))return!1;if(t.$Gt()&&s.$Gt())return!1;if(t.$Gt())return this.dAt(t,s);if(s.$Gt())return this.dAt(s,t);if(!t.n_t()&&!s.n_t())return!0;const i=t.r_t(),e=s.r_t();return i.Al(e,s.YS()-t.YS(),s.qS()-t.qS())}fAt(i,e){const t=i.$Gt(),s=e.$Gt();if(t&&!s)return this.pAt(i,e);if(s&&!t)return this.pAt(e,i);if(s||t)return!1;{const n=i.X3(),r=e.X3(),h=(T.I(i.r_t()),M.I(e.r_t()),T.xl());for(let t=0,s=h.length;t<s;t+=2){const a=t+1,u=h[t],l=h[a],[c,f]=n.tF(u+i.YS(),l+i.qS());h[t]=c,h[a]=f}const o=M.xl();for(let t=0,s=o.length;t<s;t+=2){const d=t+1,p=o[t],m=o[d],[g,y]=r.tF(p+e.YS(),m+e.qS());o[t]=g,o[d]=y}return T.Nl(),M.Nl(),this.eAt++,T.Al(M,0,0)}}pAt(t,s){const i=t.X3(),e=s.X3(),n=(m=m||C.Xn(C.wl),g=g||C.Xn(C.Rect),y=y||C.Xn(C.ju),s.YS()),r=s.qS(),[h,o]=e.tF(n,r),[a,u]=i.Zk(h,o),l=a-n,c=u-r;if(g.I(s._j()),g.offset(l,c),!t._j().Lu(g))return!1;if(y.I(s.Lj()),y.offset(l,c),this.eAt++,!t.Lj().cl(y))return!1;m.I(s.r_t());const f=m.xl();for(let t=0,s=f.length;t<s;t+=2){const d=t+1;f[t]+=l,f[d]+=c}return m.Nl(),this.dAt(t,s,a,u,m,g,y)}dAt(t,e,s,i,n,r,h){const o=void 0!==r?r:e._j(),a=t.YS(),u=t.qS(),l=t.TB().J5(),c=void 0!==s?s:e.YS(),f=void 0!==i?i:e.qS(),d=e.n_t(),p=void 0!==h?h:e.Lj(),m=S;l.GetCollisionRectCandidates(o,m);for(let t=0,s=m.length;t<s;++t){const g=m[t],y=g.GetRect();if(this.sAt++,o.Ou(y,a,u)&&(b.hl(y),b.offset(a,u),b.cl(p)))if(d){let t=void 0!==n?n:e.r_t(),s=c,i=f;void 0!==n&&(s=e.YS(),i=e.qS());const M=g.GetPoly();if(M){if(this.eAt++,M.Al(t,s-(a+y.uu()),i-(u+y.lu())))return C.Nh(m),!0}else if(T.Dl(b,0,0),T.Al(t,s,i))return C.Nh(m),!0}else{const w=g.GetPoly();if(!w)return C.Nh(m),!0;if(T.Dl(p,0,0),w.Al(T,-(a+y.uu()),-(u+y.lu())))return C.Nh(m),!0}}return C.Nh(m),!1}mAt(t,o,a){const u=t.pP(),s=this.Jc.PO();if(!s)throw new Error("cannot call outside event");const l=s.nft(),i=new Map,c=t=>{let s=i.get(t);return void 0===s&&(s=t.Gk(),i.set(t,s)),s};if(u.zct()){a||(u.Vct(!1),C.Nh(u.Hct())),l&&C.Nh(u.qct());for(const e of t.dP()){let n=e.Z3(),r=n.X3();if(!(!c(r)||!n.Rj())&&o.some(([t,s])=>{const[i,e]=r.Zk(t,s,n.Ej());return n.Zj(i,e)})){if(a)return!1;u.Jct(e)}else l&&u.Yct(e)}}else{let i,e=!1,h=(!l||s.Zmt(this.Jc.q0t())||this.Jc.MSt()&&!u.qct().length&&u.Hct().length?i=u.Hct():(i=u.qct(),e=!0),0);for(let s=0,t=i.length;s<t;++s){let t=i[s],n=t.Z3(),r=n.X3();if(!(!c(r)||!n.Rj())&&o.some(([t,s])=>{const[i,e]=r.Zk(t,s,n.Ej());return n.Zj(i,e)})){if(a)return!1;e?u.Jct(t):i[h++]=t}else e?i[h++]=t:l&&u.Yct(t)}a||(i.length=h)}return t._gt(),i.clear(),!!a||u.Bct()}gAt(t,s){if(t)for(const i of s.wGt())if(!t.SV(i))return!1;return!0}ySt(t,s,i,e){if(s.SY())for(const n of s.vmt())this.gAt(t,n)?(n.gGt(),n.pGt().A8(i,e)):C.zn(e,n.dP());else this.gAt(t,s)?(s.gGt(),s.pGt().A8(i,e)):C.zn(e,s.dP())}K4(t,s,i,e){for(const n of s)this.ySt(t,n,i,e)}yAt(t,s,i){const e=this.Jc.kxt();e&&this.K4(t,e.LZ(),s,i)}MAt(t,s,i){const e=this.Jc.Fxt();e&&this.K4(t,e.LZ(),s,i)}WDt(t,s){return t.iNt()&&(!s||s.Z3().WDt(t.xwt().get("solidTags")))}J4(t){const s=t.Z3();this.yAt(s.X3(),s._j(),r);for(const i of r)if(this.WDt(i,t)&&this.U4(t,i))return C.Nh(r),i;return C.Nh(r),null}wAt(t,s){this.yAt(null,t,r);for(const i of r)if(this.WDt(i,s)&&this.SAt(t,i))return C.Nh(r),i;return C.Nh(r),null}TAt(t,s){let i=null;s&&(i=h,C.Nh(i));const e=t.Z3();this.MAt(e.X3(),e._j(),r);for(const n of r)if(n.nNt()&&this.U4(t,n)){if(!s)return C.Nh(r),n;i.push(n)}return C.Nh(r),i}bAt(s,i,e,n,r){n=n||50;const h=s.Z3(),o=h.YS(),a=h.qS();for(let t=0;t<n;++t)if(h.xj(o+i*t,a+e*t),h.vj(),!this.U4(s,r))return!0;return h.xj(o,a),h.vj(),!1}vAt(s,i,e,n,r,h){n=n||50;let o=s.Z3(),a=o.YS(),u=o.qS(),l=null,c=null;for(let t=0;t<n;++t)if(o.xj(a+i*t,u+e*t),o.vj(),!this.U4(s,l))if(l=this.J4(s))c=l;else if(r&&(l=h?this.U4(s,h)?h:null:this.TAt(s))&&(c=l),!l)return c&&this.xAt(s,i,e,c,16,!0),!0;return o.xj(a,u),o.vj(),!1}IAt(i,e,n,t){t=t||50;let r=i.Z3(),h=r.YS(),o=r.qS(),a=null,u=null;for(let s=0;s<t;++s)for(let t=0;t<2;++t){const l=2*t-1;if(r.xj(h+e*s*l,o+n*s*l),r.vj(),!this.U4(i,a)){if(!(a=this.J4(i)))return u&&this.xAt(i,e*l,n*l,u,16,!0),!0;u=a}}return r.xj(h,o),r.vj(),!1}xAt(t,s,i,e,n,r){let h=2,o=!1,a=!1,u=t.Z3(),l=u.YS(),c=u.qS();for(;h<=n;){const f=1/h;h*=2,u.Gj(s*f*(o?1:-1),i*f*(o?1:-1)),u.vj(),this.U4(t,e)||r&&this.J4(t)?(o=!0,a=!0):(o=!1,a=!1,l=u.YS(),c=u.qS())}a&&(u.xj(l,c),u.vj())}CAt(i,t=100){let e=0,n=i.Z3(),r=n.YS(),h=n.qS(),o=0,a=this.J4(i);if(!a)return!0;for(;e<=t;){let t=0,s=0;switch(o){case 0:t=0,s=-1,e++;break;case 1:t=1,s=-1;break;case 2:t=1,s=0;break;case 3:t=1,s=1;break;case 4:t=0,s=1;break;case 5:t=-1,s=1;break;case 6:t=-1,s=0;break;case 7:t=-1,s=-1}if(o=(o+1)%8,n.xj(Math.floor(r+t*e),Math.floor(h+s*e)),n.vj(),!this.U4(i,a)&&!(a=this.J4(i)))return!0}return n.xj(r,h),n.vj(),!1}GAt(t,s,i,e){const n=t.Z3(),r=n.YS(),h=n.qS(),o=Math.max(10,C.cr(s,i,r,h)),a=C.pr(s,i,r,h),u=e||this.J4(t);if(!u)return C.hr(a+Math.PI);let l=u,c=0,f=0,d=C.ur(5),p;for(p=1;p<36;++p){const x=a-p*d;if(n.xj(s+Math.cos(x)*o,i+Math.sin(x)*o),n.vj(),!this.U4(t,l)&&!(l=e?null:this.J4(t))){c=x;break}}for(36===p&&(c=C.hr(a+Math.PI)),l=u,p=1;p<36;++p){const I=a+p*d;if(n.xj(s+Math.cos(I)*o,i+Math.sin(I)*o),n.vj(),!this.U4(t,l)&&!(l=e?null:this.J4(t))){f=I;break}}if(36===p&&(f=C.hr(a+Math.PI)),n.xj(r,h),n.vj(),f===c)return f;let m=C.mr(f,c)/2,g;g=C.yr(f,c)?C.hr(c+m+Math.PI):C.hr(f+m);const y=Math.cos(a),M=Math.sin(a),w=Math.cos(g),S=Math.sin(g),T=y*w+M*S,b=y-2*T*w,v=M-2*T*S;return C.pr(0,0,b,v)}NAt(t,s,i,e,n){if(!n)return!1;const r=n.Z3();if(!r.Hj())return!1;if(this.sAt++,d.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!r._j().Lu(d))return!1;if(n.$Gt())return this.EAt(t,s,i,e,n,r);if(this.eAt++,!r.Lj().ll(t,s,i,e))return!1;if(!r.n_t())return!0;const h=r.r_t();return h.ll(r.YS(),r.qS(),t,s,i,e)}EAt(i,e,n,r,t,s){const h=s.YS(),o=s.qS(),a=t.J5(),u=S;p.set(i,e,n,r),p.normalize(),a.GetCollisionRectCandidates(p,u);for(let t=0,s=u.length;t<s;++t){const l=u[t],c=l.GetRect();if(this.sAt++,d.Ou(c,h,o)&&(b.hl(c),b.offset(h,o),b.ll(i,e,n,r))){const f=l.GetPoly();if(!f)return C.Nh(u),!0;if(this.eAt++,f.ll(h+c.uu(),o+c.lu(),i,e,n,r))return C.Nh(u),!0}}return C.Nh(u),!1}SAt(t,s){if(!s)return!1;const i=s.Z3();if(!i.Hj())return!1;if(this.sAt++,!i._j().Lu(t))return!1;if(s.$Gt())return this.DAt(t,s,i);if(this.eAt++,b.hl(t),!i.Lj().cl(b))return!1;if(!i.n_t())return!0;const e=T,n=(e.hl(t,i.YS(),i.qS()),i.r_t());return e.Al(n,0,0)}DAt(i,t,s){const e=s.YS(),n=s.qS(),r=t.J5(),h=S;r.GetCollisionRectCandidates(i,h);for(let t=0,s=h.length;t<s;++t){const o=h[t],a=o.GetRect();if(this.sAt++,i.Ou(a,e,n)){const u=o.GetPoly();if(!u)return C.Nh(h),!0;if(this.eAt++,T.hl(i,0,0),u.Al(T,-(e+a.uu()),-(n+a.lu())))return C.Nh(h),!0}}return C.Nh(h),!1}_At(t,s){if(t){const i=t.Z3();i.Hj()&&(this.sAt++,i._j().Lu(s.rect))&&(t.$Gt()?this.AAt(t,i,s):(this.eAt++,i.n_t()?s.LAt(t,i.YS(),i.qS(),i.r_t()):s.OAt(t,i.Lj())))}}AAt(i,e,n){const r=e.YS(),h=e.qS(),o=S;i.J5().GetCollisionRectCandidates(n.rect,o);for(let t=0,s=o.length;t<s;t++){const a=o[t],u=a.GetRect();if(this.sAt++,n.rect.Ou(u,r,h)){const l=a.GetPoly();this.eAt++,l?n.LAt(i,r+u.uu(),h+u.lu(),l):n.RAt(i,e.YS(),e.qS(),u)}}C.Nh(o)}V4(t,s){if(t!==this.K_t||s!==this.$_t){this.K_t=t,this.$_t=s;const i=this.Jc.wY();for(const e of i)if(e.AR()){for(const n of e.fP())n.Z3().BDt();e.pGt().PAt(t,s),e.mGt();for(const r of e.fP()){const h=r.Z3();h.g_t(),h.yGt()}}}}q4(){return[this.K_t,this.$_t]}kAt(t,s){this.K_t=t,this.$_t=s}}}{const xa=self.Ls;xa.YIt=class extends xa.qn{constructor(t,s){super(),this.I8=t,this.C8=s,this.G8=xa.Xn(xa.Fl)}Kn(){this.G8.Kn(),this.G8=null}PAt(t,s){if(!this.G8.Bl())throw new Error("grid not empty");this.I8=t,this.C8=s}N8(t,s,i){let e=this.G8.Xs(t,s);return e||(i?(e=xa.Xn(xa.FAt,this,t,s),this.G8.Set(t,s,e),e):null)}E8(t){const s=Math.floor(t/this.I8);return isFinite(s)?s:0}D8(t){const s=Math.floor(t/this.C8);return isFinite(s)?s:0}_8(e,n,r){if(n)for(let i=n.uu(),t=n.cu();i<=t;++i)for(let t=n.lu(),s=n.fu();t<=s;++t)if(!r||!r.Ru(i,t)){const h=this.N8(i,t,!1);h&&(h.h0(e),h.Bl())&&this.G8.Ul(i,t)}if(r)for(let i=r.uu(),t=r.cu();i<=t;++i)for(let t=r.lu(),s=r.fu();t<=s;++t)n&&n.Ru(i,t)||this.N8(i,t,!0).T8(e)}A8(t,s){let i=this.E8(t.uu()),e=this.D8(t.lu()),n=this.E8(t.cu()),r=this.D8(t.fu());if(isFinite(n)&&isFinite(r))for(;i<=n;++i)for(let t=e;t<=r;++t){const h=this.N8(i,t,!1);h&&h.v8(s)}}}}{const Ia=self.Ls;Ia.FAt=class extends Ia.qn{constructor(t,s,i){super(),this.p8=t,this.za=s,this.Ba=i,this.m8=Ia.Xn(Ia.Yl)}Kn(){this.m8.Kn(),this.m8=null,this.p8=null}Bl(){return this.m8.Bl()}T8(t){this.m8.Zl(t)}h0(t){this.m8.Ul(t)}v8(t){Ia.zn(t,this.m8.Xl())}}}{const Ca=self.Ls;Ca.jAt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Ca.Rect,this.zAt=2,this.BAt=null,this.UAt=0,this.WAt=0,this.QAt=0,this.JAt=0,this.YAt=0,this.Gt=0,this.VAt=1,this.HAt=0,this.qAt=1,this.ZAt=0}XAt(){return this.zAt<1+1e-6}Hf(){this.zAt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.zAt=2,this.BAt=null,this.UAt=0,this.WAt=0,this.QAt=0,this.JAt=0,this.YAt=0,this.Gt=0,this.VAt=1,this.HAt=0,this.qAt=1,this.ZAt=0,this}KAt(){if(!1!==this.XAt()){const t=this.dx*this.zAt,s=this.dy*this.zAt,i=Math.hypot(t,s),e=t/i,n=s/i,r=(this.Gt=i-1e-6,this.JAt=this.x1+e*this.Gt,this.YAt=this.y1+n*this.Gt,this.UAt=Math.atan2(this.QAt,this.WAt)+Math.PI/2,this.VAt=Math.cos(this.UAt),this.HAt=Math.sin(this.UAt),e*this.VAt+n*this.HAt);if(this.qAt=e-2*this.VAt*r,this.ZAt=n-2*this.HAt*r,0<r){const h=Math.PI;this.UAt=Ca.hr(this.UAt+h),this.VAt=-this.VAt,this.HAt=-this.HAt}}}$At(t,s,i,e,n){const r=Ca.ih(this.x1,this.y1,this.x2,this.y2,s,i,e,n);0<=r&&r<this.zAt&&(this.zAt=r,this.BAt=t.vF(),this.WAt=s-e,this.QAt=i-n)}RAt(t,s,i,e){const n=s+e.uu(),r=s+e.cu(),h=i+e.lu(),o=i+e.fu();this.$At(t,n,h,r,h),this.$At(t,r,h,r,o),this.$At(t,r,o,n,o),this.$At(t,n,o,n,h)}OAt(t,s){const i=s.Yr(),e=s.Vr(),n=s.Hr(),r=s.qr(),h=s.Zr(),o=s.Xr(),a=s.Kr(),u=s.$r();this.$At(t,i,e,n,r),this.$At(t,n,r,h,o),this.$At(t,h,o,a,u),this.$At(t,a,u,i,e)}LAt(i,e,n,t){const r=t.xl();for(let t=0,s=r.length;t<s;t+=2){const h=(t+2)%s,o=r[t]+e,a=r[t+1]+n,u=r[h]+e,l=r[1+h]+n;this.$At(i,o,a,u,l)}}}}{const N=self.Ls,Ga=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Na=new Set(["high","low"]),Ea=self.gs,xn=Ea.Ss,In=Ea.xs,Da=xn.create(),_a=N.Xn(N.ju),E=N.Xn(N.Rect);N.tLt=class extends N.qn{constructor(t){super(),this.Jc=t,this.sLt=[],this.iLt=!1,this.eLt=null,this.nLt=null,this.rLt=null,this.hLt="high-performance",this.oLt=!1,this.aLt=0,this.uLt=0,this.lLt="",this.cLt=0,this.fLt=0,this.dLt=0,this.pLt=0,this.mLt=0,this.gLt=0,this.uy="normalized",this.yLt=0,this.MLt=1,this.wLt=1e4,this.Wy=!0,this.SLt=0,this.SA=0,this.TA=0,this.TLt="letterbox-scale",this.bLt="letterbox-scale",this.vLt=0,this.xLt=0,this.ILt=xn.create(),this.CLt="high",this.GLt=this.CLt,this.NLt=!1,this.ELt=[],this.DLt=new Set,this._Lt=self.C3_Shaders,this.ALt=N.Xn(N.jg.v_,{w_:()=>[this.tH(),this.sH()],S_:()=>this.LLt(),T_:t=>this.OLt(t),getTime:()=>this.w4().i3(),b_:()=>this.w4().n4()}),this.RLt=0,this.PLt=0,this.kLt=NaN,this.FLt=null,this.jLt=new Map,this.zLt=NaN,this.BLt=new Map,this.ULt="",this.WLt=1,this.QLt=N.Xn(N.Rect),this.JLt="",this.YLt=null,this.VLt=null,this.HLt=0,this.qLt=0,this.ZLt=-1,this.XLt=0,this.KLt=t=>this.XLt=t.progress,this.$Lt=null,this.tOt={sOt:null,iOt:null,eOt:null},this.nOt=0,this.rOt=0,this.hOt=0,this.oOt="fade-in",this.aOt=null,this.uOt=new Promise(t=>this.aOt=t)}lOt(t){this.hLt=t}cOt(t){this.iLt=!!t}fOt(t){this.uy=t}dOt(){return this.uy}pOt(t){this.yLt=t}mOt(t,s){this.MLt=t,this.wLt=s}gOt(t){this.oLt=!!t}async So(t){let s=t.canvas,i=(this.sLt.push({canvas:s,yOt:null}),this.Jc.KF("runtime","window-resize",t=>this.MOt(t)),this.Jc.KF("runtime","fullscreenchange",t=>this.wOt(t)),this.Jc.KF("runtime","fullscreenerror",t=>this.SOt(t)),s.addEventListener("webglcontextlost",t=>this.TOt(t)),s.addEventListener("webglcontextrestored",t=>this.bOt(t)),this.NLt=!!t.isFullscreen,this.lLt=t.cssDisplayMode,navigator.gpu&&this.iLt),e=!1;if(i)try{await this.vOt(!0)}catch(t){this.xOt("WebGPU",t),this.nLt=null}if(!this.mS())try{await this.IOt(!0)}catch(t){this.xOt("WebGL",t),this.eLt=null}if(this.mS()||(e=!0),!this.mS()&&i)try{await this.vOt(!1)}catch(t){this.xOt("WebGPU",t),this.nLt=null}if(!this.mS())try{await this.IOt(!1)}catch(t){this.xOt("WebGL",t),this.eLt=null}const n=this.mS();if(!n)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");n.Vw(e),this.nLt&&(this.nLt.COt=()=>this.GOt(),this.nLt.NOt=()=>this.EOt()),"normalized"===this.uy?n.hM():(n.oM(),n.nM(this.yLt)),this.DG(t.windowInnerWidth,t.windowInnerHeight,!0),await this.O_t()}xOt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async vOt(t){const s={$g:this.MLt,ty:this.wLt},i={powerPreference:this.hLt,depth:this.Jc.oV(),failIfMajorPerformanceCaveat:t,DOt:this.Jc.uH(),_Ot:this.Jc.AOt(),zN:this.Jc.LOt()};this.nLt=N.Xn(N.jg.WebGPURenderer,s),await this.nLt._b(this.sLt[0].canvas,i)}async IOt(t){const s={alpha:!0,powerPreference:this.hLt,jN:"xbox-uwp-webview2"!==this.Jc.hR(),depth:this.Jc.oV(),zN:this.Jc.LOt(),failIfMajorPerformanceCaveat:t,$g:this.MLt,ty:this.wLt};this.oLt&&(s.BN=1),this.eLt=N.Xn(N.jg.QN,this.sLt[0].canvas,s),await this.eLt.Hy()}async OOt(){if(this._Lt){const t=[];for(const[s,i]of Object.entries(this._Lt)){i.src=i.wgsl;const e=N.jg.WebGPUShaderProgram.$v();t.push(this.nLt.YE(Object.assign({Nb:e,name:s},i)))}await Promise.all(t)}}async ROt(){if(this._Lt){const s=[];for(const[i,e]of Object.entries(this._Lt)){let t;if(e.glslWebGL2&&2<=this.eLt.c2())e.src=e.glslWebGL2,t=N.jg.Cb.tx();else{if(!e.glsl)throw new Error(`shader '${i}' does not support WebGL 1`);e.src=e.glsl,t=N.jg.Cb.$v()}s.push(this.eLt.YE(Object.assign({Nb:t,name:i},e)))}await Promise.all(s),this.eLt.VE(),this.eLt.MM()}this.eLt.h_()&&(this.FLt=N.Xn(N.jg.EN,this.eLt))}async O_t(){this.nLt?await this.OOt():this.eLt&&await this.ROt();const t=this.mS();t.Jw(this.Wy),t.h_()&&(this.kLt=0);for(const s of this.Jc.POt()){for(const i of s.GP())i.O_t(t);s.O_t(t),s.cz()}this.rLt=new self.G6(this.Jc,t)}Kn(){this.Jc=null,this.eLt=null,this.sLt.length=0}pO(){return this.Jc.pO()}MOt(t){const s=this.Jc;if(!s.kOt()){const i=t.devicePixelRatio,e=(this.pO()&&(self.devicePixelRatio=i),s.FOt(i),this.NLt=!!t.isFullscreen,this.lLt=t.cssDisplayMode,this.DG(t.innerWidth,t.innerHeight),s.n4(),new N.Event("window-resize")),n=(e.data=t,s.Gf().kf(e),new N.Event("resize"));n.jOt=this.pR(),n.zOt=this.gR(),n.BOt=this.MR(),n.UOt=this.SR(),s.cq(n),s.fq()&&(s.k1t()||self.C3Debugger.IsDebuggerPaused())&&s.ZA()}}wOt(t){this.NLt=!!t.isFullscreen,this.DG(t.innerWidth,t.innerHeight,!0),this.Jc.n4()}SOt(t){this.NLt=!!t.isFullscreen,this.DG(t.innerWidth,t.innerHeight,!0),this.Jc.n4()}DG(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.aLt!==t||this.uLt!==s||i){this.aLt=t,this.uLt=s;const e=this.WOt();"letterbox-scale"===e?this.QOt(t,s):"letterbox-integer-scale"===e?this.JOt(t,s):"off"===e?this.YOt(t,s):this.VOt(t,s),this.HOt(e);for(const{canvas:h}of this.sLt)h.width=this.dLt,h.height=this.pLt;this.Jc.Hc("canvas","update-size",{marginLeft:this.mLt,marginTop:this.gLt,styleWidth:this.cLt,styleHeight:this.fLt,displayScale:this.GU()});const n=this.mS();n.DG(this.dLt,this.pLt,!0);for(const o of this.ELt)n.t_(o);N.Nh(this.ELt),this.qOt();const r=this.Jc.D3();r.Rq(),r.Pq()}}qOt(){this.mS().uM(this.ILt,this.tH()/this.sH())}iH(){return this.ILt}QOt(t,s){const i=this.Jc.TR(),e=this.Jc.gO(),n=this.Jc.MO(),r=e/n,h=t/s;if(r<h){const o=s*r;this.cLt=Math.round(o),this.fLt=s,this.mLt=Math.floor((t-this.cLt)/2),this.gLt=0}else{const a=t/r;this.cLt=t,this.fLt=Math.round(a),this.mLt=0,this.gLt=Math.floor((s-this.fLt)/2)}this.dLt=Math.round(this.cLt*i),this.pLt=Math.round(this.fLt*i),this.Jc.ZOt(e,n)}JOt(t,s){let i=this.Jc.TR(),e=(1!==i&&(t+=1,s+=1),this.Jc.gO()),n=this.Jc.MO(),r=e/n,h=t/s,o;if(r<h){const a=s*r;o=a*i/e}else{const u=t/r;o=u*i/n}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.dLt=Math.round(e*o),this.pLt=Math.round(n*o),this.cLt=this.dLt/i,this.fLt=this.pLt/i,this.mLt=Math.max(Math.floor((t-this.cLt)/2),0),this.gLt=Math.max(Math.floor((s-this.fLt)/2),0),this.Jc.ZOt(e,n)}VOt(t,s){const i=this.Jc.TR(),e=(this.cLt=t,this.fLt=s,this.dLt=Math.round(this.cLt*i),this.pLt=Math.round(this.fLt*i),this.mLt=0,this.gLt=0,this.GU());this.Jc.ZOt(this.cLt/e,this.fLt/e)}YOt(t,s){const i=this.Jc.TR();this.cLt=this.Jc.XY(),this.fLt=this.Jc.KY(),this.dLt=Math.round(this.cLt*i),this.pLt=Math.round(this.fLt*i),this.XOt()?(this.mLt=Math.floor((t-this.cLt)/2),this.gLt=Math.floor((s-this.fLt)/2)):(this.mLt=0,this.gLt=0),this.Jc.ZOt(this.Jc.XY(),this.Jc.KY())}HOt(i){if("high"===this.CLt)this.SA=this.dLt,this.TA=this.pLt,this.GLt="high";else{let t,s;if(s="off"===this.WOt()?(t=this.Jc.XY(),this.Jc.KY()):(t=this.Jc.gO(),this.Jc.MO()),this.dLt<t||this.pLt<s)this.SA=this.dLt,this.TA=this.pLt,this.GLt="high";else if(this.SA=t,this.TA=s,this.GLt="low","scale-inner"===i){const e=t/s,n=this.aLt/this.uLt;n<e?this.SA=this.TA*n:e<n&&(this.TA=this.SA/n)}else if("scale-outer"===i){const r=t/s,h=this.aLt/this.uLt;r<h?this.SA=this.TA*h:h<r&&(this.TA=this.SA/h)}}}w4(){return this.Jc}KOt(){return this.sLt[0].canvas}AJ(){return this.ALt}XOt(){return this.NLt}$Ot(){return this.lLt}t3t(t){if(!Ga.has(t))throw new Error("invalid fullscreen mode");this.TLt=t;const s=this.Jc.D3();s.Rq(),s.Pq()}IU(){return this.TLt}s3t(t){if(!Ga.has(t))throw new Error("invalid fullscreen mode");this.bLt=t;const s=this.Jc.D3();s.Rq(),s.Pq()}i3t(){return this.bLt}WOt(){return this.XOt()?this.i3t():this.IU()}e3t(t){if(!Na.has(t))throw new Error("invalid fullscreen scaling quality");this.CLt=t,this.Jc.D3().Rq()}n3t(){return this.CLt}lH(){return this.GLt}static r3t(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}fU(){return this.aLt}dU(){return this.uLt}tH(){return this.SA}sH(){return this.TA}Jw(t){this.Wy=!!t}h3t(t){this.SLt=t}a8(){return this.SLt}o3t(){return this.mS().hN()}TOt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.ELt=[],this.DLt.clear(),this.ALt.kS(),this.eLt.kS(),this.Jc.l9()}GOt(){console.log("[Construct] WebGPU device lost"),this.ELt=[],this.DLt.clear(),this.ALt.kS(),this.Jc.l9()}async bOt(t){await this.eLt.FS(),await this.O_t(),await this.Jc.a3t(),console.log("[Construct] WebGL context restored")}async EOt(){await this.O_t(),await this.Jc.a3t(),console.log("[Construct] WebGPU device restored")}u3t(){return this.eLt}l3t(){return this.nLt}mS(){return this.nLt||this.eLt}WCt(){return this.rLt}uR(){let t="";return t=this.Jc.l3t()?"webgpu":"webgl"+this.Jc.u3t().c2(),this.Jc.mS().Hw()&&(t+="-software"),t}fR(){return this.Jc.l3t()?this.Jc.l3t().GetAdapterInfoString():this.Jc.u3t().m_()}hF(){return"low"===this.GLt?1/this.Jc.TR():this.GU()}GU(){const t=this.WOt();if("off"===t||"crop"===t)return 1;const s=this.Jc.gO(),i=this.Jc.MO(),e=s/i,n=this.dLt/this.pLt;return"scale-inner"!==t&&e<n||"scale-inner"===t&&n<e?this.fLt/i:this.cLt/s}OH(){return"low"===this.lH()?1:this.GU()}AH(){return"low"===this.lH()?1:this.Jc.TR()}c3t(t,s){this.vLt=t,this.xLt=s}dW(s,i,e,t=!0){i=i||this.SA,e=e||this.TA;const n=i/2+this.vLt,r=e/2+this.xLt;if(t){let t=this.iH();i===this.SA&&e===this.TA||(s.uM(Da,i/e),t=Da),s.qE(t)}const h=s.dM(n,r,s.Zy(e),n,r,0,e);s.sD(h)}f3t(t,s=!0){const i=this.pR(),e=this.gR(),n=i/2,r=e/2,h=(s&&t.qE(this.iH()),t.dM(n,r,t.Zy(e),n,r,0,e));t.sD(h)}MR(){return this.dLt}SR(){return this.pLt}pR(){return this.cLt}gR(){return this.fLt}Xk(){return this.mLt}Kk(){return this.gLt}Y7(){return this.sLt.length}d3t(){return"undefined"!=typeof OffscreenCanvas&&this.KOt()instanceof OffscreenCanvas&&("Chromium"!==N.ei.li||124<=N.ei.ai)}async m9(e,n=!1){if(e<1)throw new Error("invalid HTML layer count");if(this.sLt.length!==e){let t=this.Jc.D3().G3(),s={count:e,layersDomState:t.GY().filter(t=>t.xk()).map(t=>t.DV()),immediate:n,marginLeft:this.mLt,marginTop:this.gLt,styleWidth:this.cLt,styleHeight:this.fLt},i;if(i=this.pO()?await this.Jc.h4("canvas","set-html-layer-count",s):self.c3_runtimeInterface._OnSetHTMLLayerCount(s),e<this.sLt.length)this.sLt.length=e;else for(const r of i.addedCanvases){r.width=this.dLt,r.height=this.pLt;const h=this.d3t()?"bitmaprenderer":"2d",o=r.getContext(h);if(!o)throw new Error(`failed to acquire '${h}' canvas context`);this.sLt.push({canvas:r,yOt:o})}this.Jc.n4()}}aq(t){if(!(t>=this.sLt.length)){const s=this.KOt(),i=this.sLt[t].yOt;this.d3t()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}}cH(s){s.depth=this.Jc.oV();let t=this.ELt,i=t.findIndex(t=>t.Sb(s)),e;return-1!==i?(e=t[i],t.splice(i,1)):e=this.mS().qD(s),this.DLt.add(e),e}OJ(t){if(!this.DLt.has(t))throw new Error("render target not in use");this.DLt.delete(t),this.ELt.push(t)}LLt(){const t={JT:this.Jc.wO()};return"low"===this.lH()&&(t.width=this.tH(),t.height=this.sH()),this.cH(t)}OLt(t){this.OJ(t)}*p3t(){for(const t of this.Jc.D3().Aq())for(const s of t.WP()){const i=this.jLt.get(s);i&&(yield i)}}hH(t){if(!this.mS().h_())return null;let s=this.jLt.get(t);return s||(s={bj:t,name:t.kc(),m3t:N.Xn(N.jg.EN,this.eLt),g3t:0,y3t:0,M3t:0},this.jLt.set(t,s)),s.m3t}w3t(){const t=this.mS();if(t.h_()&&0===this.PLt){this.PLt=t.Ww(),this.zLt=NaN;for(const s of this.p3t())s.g3t=NaN}}S3t(){this.eLt&&this.eLt.h_()&&this.T3t(),this.nLt&&this.nLt.h_()&&this.b3t()}T3t(){if(isNaN(this.zLt)&&(this.zLt=this.FLt.PN(this.RLt,this.PLt),!isNaN(this.zLt))){if(this.Jc.fq())for(const t of this.p3t())if(t.g3t=t.m3t.PN(this.RLt,this.PLt),isNaN(t.g3t))return;if(this.FLt.kN(this.PLt),this.kLt=Math.min(this.zLt,1),this.Jc.fq()){const i=new Map;for(const n of this.p3t())n.m3t.kN(this.PLt),n.y3t=Math.min(n.g3t,1),i.set(n.bj,n.y3t);for(const r of this.p3t()){const h=r.bj,o=i.get(h)||0,a=o-h.pk().reduce((t,s)=>t+(i.get(s)||0),0);r.M3t=N.rr(a,0,1)}const s=this.Jc.G3(),e=this.kLt-s.GY().reduce((t,s)=>t+(i.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(N.rr(e,0,1),this.kLt,[...this.p3t()])}this.RLt=this.PLt,this.PLt=0}}v3t(){return this.FLt}b3t(){if(0!==this.PLt){for(let t=this.RLt;t<this.PLt;++t){const i=this.BLt.get(t);if(i&&!i.MN())return}let t=this.Jc.G3(),h=N._o(t.z7()+1,0),s=0;for(let t=this.RLt;t<this.PLt;++t){const o=this.BLt.get(t);if(o){let i=o.wN(),e=BigInt(0),n=BigInt(0),r=BigInt(0);for(let t=0,s=Math.min(h.length,i.length/2);t<s;++t){const l=i[2*t],c=i[2*t+1],f=(l!==r&&(e===r||l<e)&&(e=l),c>n&&(n=c),c-l),d=Number(f)/1e9;h[t]+=d}const a=n-e,u=Number(a)/1e9;s+=u}}if(this.kLt=N.rr(s,0,1),this.Jc.fq()){const e=t.WP(),n=new Map;for(let t=0,s=Math.min(e.length,h.length-1);t<s;++t){const g=h[t+1];n.set(e[t],g)}const r=[],p=new Map;for(const[y,M]of n){const w=[...y.gk()].reduce((t,s)=>t+(n.get(s)||0),0);p.set(y,w),r.push({name:y.kc(),M3t:N.rr(M,0,1),y3t:N.rr(w,0,1)})}const m=this.kLt-t.GY().reduce((t,s)=>t+(p.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(N.rr(m,0,1),this.kLt,r)}for(let t=this.RLt;t<this.PLt;++t)this.BLt.delete(t);this.RLt=this.PLt,this.PLt=0}}x3t(t){this.BLt.set(this.nLt.Ww(),t)}g3(){return this.kLt}I3t(t,s,i,e,n,r){return this.ULt=t,this.WLt=s,this.QLt.su(i,e,n,r),this.YLt||(this.YLt=new Promise(t=>{this.VLt=t})),this.YLt}C3t(){if(this.ULt){let t=this.KOt(),s=this.QLt,i=N.rr(Math.floor(s.uu()),0,t.width),e=N.rr(Math.floor(s.lu()),0,t.height),n=s.width(),r=(n=0===n?t.width-i:N.rr(Math.floor(n),0,t.width-i),s.height());if(r=0===r?t.height-e:N.rr(Math.floor(r),0,t.height-e),(0!==i||0!==e||n!==t.width||r!==t.height)&&0<n&&0<r){const h=N.So(n,r),o=h.getContext("2d");o.drawImage(t,i,e,n,r,0,0,n,r),t=h}N.To(t,this.ULt,this.WLt).then(t=>{this.JLt&&URL.revokeObjectURL(this.JLt),this.JLt=URL.createObjectURL(t),this.YLt=null,this.VLt(this.JLt)}),this.ULt="",this.WLt=1}}G3t(){return this.JLt}N3t(t){t?this.HLt++:this.HLt--}E3t(){return 0<this.HLt}D3t(t){const s=this.mS();if(2===t)this.$Lt=N.Xn(N.jg.sS,this.mS()),this.$Lt.hG("Arial"),this.$Lt.oG(16),this.$Lt.TG("center"),this.$Lt.vG("center"),this.$Lt.DG(300,200);else if(0===t){const i=this.Jc._3t();i&&i.rW(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.A3t("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSIxNzAwLjc5MDA0cHgiIGhlaWdodD0iMTcwMC43OTAwNHB4IiB2aWV3Qm94PSIyODcgMzE3IDExMjUgMTEyNSINCgkgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTcwMC43OTAwNCAxNzAwLjc5MDA0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJsb2dvIj4NCgk8Zz4NCgkJPGc+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0ZGRkZGRiIgZD0iTTM1NC45Nzc1NCwxMTk1LjYyMzA1DQoJCQkJYzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NjI5LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOGwtNC45MzI2Miw4LjU0MTk5DQoJCQkJYy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNjU2LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMzMiwwLDUuOTYxOTEtMC40NDMzNiw4LjcyNjU2LTEuMjY4NTVjNi4yOTQ5Mi0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTczOCw2LjUwMDk4bDQuOTMxNjQsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM4NDgsNS43MzQzOGMtOS4wMDM5MSw1LjYwMTU2LTE5LjYzMTg0LDguODM3ODktMzEuMDE2Niw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzI5Ni4xNTgyLDEyMjEuOTU3MDMsMzIyLjQ5MjE5LDExOTUuNjIzMDUsMzU0Ljk3NzU0LDExOTUuNjIzMDUNCgkJCQlMMzU0Ljk3NzU0LDExOTUuNjIzMDV6IE03MDMuMjE0ODQsMTI1OS4xNzU3OGMtMTQuNTU5NTctOS44MTczOC0yMC4yMDMxMy0yMC4wMzIyMy0yMC4yMDMxMy0zMy4wODAwOA0KCQkJCWMwLTE4LjQ4OTI2LDE1LjcxNDg0LTI5Ljc2MzY3LDM4LjI2NjYtMjkuNzYzNjdjOS42NTcyMywwLDE4LjcyMTY4LDIuNTQyOTcsMjYuNTU5NTcsNi45OTQxNA0KCQkJCWMyLjA0OTgsMS4xNjQwNiwyLjc2MTcyLDMuNzgzMiwxLjU4MzAxLDUuODI0MjJsLTMuNDE3OTcsNS45MTk5MmMtMy4yNDcwNyw1LjYyNDAyLTkuOTA4Miw4LjMzMTA1LTE2LjE1MzMyLDYuNTQ4ODMNCgkJCQljLTIuNzIzNjMtMC43NzYzNy01LjU5ODYzLTEuMTkyMzgtOC41NzEyOS0xLjE5MjM4Yy0xMC40OTAyMywwLTExLjU5ODYzLDkuNTc2MTctNC44NTc0MiwxNC4xMjMwNWwyMy42ODY1MiwxNS45NzY1Ng0KCQkJCWM5Ljk5MDIzLDYuNzM4MjgsMTUuODk1NTEsMTcuMDY2NDEsMTUuODk1NTEsMjguNzE4NzVjMCwxOC43ODYxMy0xNS4wMDY4NCwzMy4zMDc2Mi0zOC4yNjc1OCwzMy4zMDc2Mg0KCQkJCWMtOS41MjI0NiwwLTE4LjU4Nzg5LTEuOTU3MDMtMjYuODE1NDMtNS40OTAyM2MtNy43ODEyNS0zLjMzOTg0LTEwLjkzMzU5LTEyLjc4MjIzLTYuNjk3MjctMjAuMTE4MTZsMy40ODczLTYuMDQxOTkNCgkJCQljMS4yMTM4Ny0yLjA5OTYxLDMuOTMxNjQtMi43NTk3Nyw1Ljk3NDYxLTEuNDU2MDVjNi44NTkzOCw0LjM4MjgxLDE2LjQ5MDIzLDcuNTk0NzMsMjQuNzU4NzksNy41OTQ3Mw0KCQkJCWMxMC41NDU5LDAsMTEuMzI4MTMtOS45NTg5OCwzLjc2NzU4LTE1LjA1NzYyTDcwMy4yMTQ4NCwxMjU5LjE3NTc4TDcwMy4yMTQ4NCwxMjU5LjE3NTc4eiBNOTg0LjYzMDg2LDEyMDIuMDAwOTgNCgkJCQljMC0yLjM0NzY2LDEuOTAzMzItNC4yNTE5NSw0LjI1MTk1LTQuMjUxOTVoOS45MjE4OGM3LjgyNzE1LDAsMTQuMTcyODUsNi4zNDU3LDE0LjE3Mjg1LDE0LjE3MzgzdjU3LjQwMTM3DQoJCQkJYzAsOC42MTAzNSw2Ljk4MDQ3LDE1LjU5MDgyLDE1LjU5MDgyLDE1LjU5MDgyczE1LjU5MDgyLTYuOTgwNDcsMTUuNTkwODItMTUuNTkwODJ2LTU3LjQwMTM3DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoOS45MjA5YzIuMzQ4NjMsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2NjcuMzIzMjQNCgkJCQljMCwyNC4yNjU2My0xOS42NzA5LDQzLjkzNzUtNDMuOTM2NTIsNDMuOTM3NXMtNDMuOTM3NS0xOS42NzE4OC00My45Mzc1LTQzLjkzNzVWMTIwMi4wMDA5OEw5ODQuNjMwODYsMTIwMi4wMDA5OHoNCgkJCQkgTTQ2Ni44NjkxNCwxMTk1LjYyMzA1YzMyLjQ4NDM4LDAsNTguODE4MzYsMjYuMzMzOTgsNTguODE4MzYsNTguODE5MzRjMCwzMi40ODQzOC0yNi4zMzM5OCw1OC44MTkzNC01OC44MTgzNiw1OC44MTkzNA0KCQkJCWMtMzIuNDg2MzMsMC01OC44MTkzNC0yNi4zMzQ5Ni01OC44MTkzNC01OC44MTkzNEM0MDguMDQ5OCwxMjIxLjk1NzAzLDQzNC4zODI4MSwxMTk1LjYyMzA1LDQ2Ni44NjkxNCwxMTk1LjYyMzA1DQoJCQkJTDQ2Ni44NjkxNCwxMTk1LjYyMzA1eiBNNDY2Ljg2OTE0LDEyMjUuMDMzMmMtMTYuMjQzMTYsMC0yOS40MTAxNiwxMy4xNjY5OS0yOS40MTAxNiwyOS40MDkxOA0KCQkJCXMxMy4xNjY5OSwyOS40MDgyLDI5LjQxMDE2LDI5LjQwODJjMTYuMjQxMjEsMCwyOS40MDgyLTEzLjE2NjAyLDI5LjQwODItMjkuNDA4MlM0ODMuMTEwMzUsMTIyNS4wMzMyLDQ2Ni44NjkxNCwxMjI1LjAzMzINCgkJCQlMNDY2Ljg2OTE0LDEyMjUuMDMzMnogTTU1Ni43MzI0MiwxMzExLjEzNDc3Yy0yLjM0NzY2LDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtOTQuOTYxOTENCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzM4My0xNC4xNzM4M2gzLjk1ODk4YzQuNjI1LDAsOC45NTg5OCwyLjI1Njg0LDExLjYxMTMzLDYuMDQ1OWw0MS4xMjIwNyw1OC43NDcwN3YtNTAuNjE5MTQNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2g5LjkyMTg4YzIuMzQ3NjYsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2OTQuOTYwOTQNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3MzgzLDE0LjE3Mjg1aC0zLjk1ODk4Yy00LjYyNSwwLTguOTU4OTgtMi4yNTU4Ni0xMS42MTEzMy02LjA0NDkybC00MS4xMjIwNy01OC43NDYwOXY1MC42MTgxNg0KCQkJCWMwLDcuODI5MS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVINTU2LjczMjQyTDU1Ni43MzI0MiwxMzExLjEzNDc3eiBNMTIxNS4wMjA1MSwxMjExLjkyMjg1DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoNTAuMzE1NDNjMi4zNDg2MywwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyDQoJCQkJYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVoLTYuMDI0NDF2NzUuMTE4MTZjMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMTg4DQoJCQkJYy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtODUuMDQxMDJoLTE1Ljk0NDM0Yy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMzMyLTQuMjUxOTUtNC4yNTE5NVYxMjExLjkyMjg1DQoJCQkJTDEyMTUuMDIwNTEsMTIxMS45MjI4NXogTTc3Ni40NDkyMiwxMjExLjkyMjg1YzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTczODMtMTQuMTczODNoNTAuMzE0NDUNCgkJCQljMi4zNDk2MSwwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcxODgsMTQuMTcyODVoLTYuMDI1Mzl2NzUuMTE4MTYNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMDljLTIuMzQ5NjEsMC00LjI1MTk1LTEuOTAyMzQtNC4yNTE5NS00LjI1di04NS4wNDEwMmgtMTUuOTQ1MzENCgkJCQljLTIuMzQ3NjYsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMTEuOTIyODVMNzc2LjQ0OTIyLDEyMTEuOTIyODV6IE05MjkuNjA0NDksMTI3Mi4wMjI0NmwyNi45NTgwMSwzMi4xMjc5Mw0KCQkJCWMyLjMxNDQ1LDIuNzU3ODEsMC4zNDM3NSw2Ljk4NDM4LTMuMjU2ODQsNi45ODQzOGgtMTkuNzA1MDhjLTQuMTg5NDUsMC04LjE2NTA0LTEuODUxNTYtMTAuODU3NDItNS4wNjA1NWwtMjIuNjgxNjQtMjcuMDMxMjUNCgkJCQl2MjcuODQxOGMwLDIuMzQ3NjYtMS45MDMzMiw0LjI1LTQuMjUxOTUsNC4yNWgtOS45MjA5Yy03LjgyNzE1LDAtMTQuMTcyODUtNi4zNDM3NS0xNC4xNzI4NS0xNC4xNzI4NXYtODUuMDM5MDYNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2gyOS43NjM2N2MyMi43MDAyLDAsNDEuMTAyNTQsMTcuMTMzNzksNDEuMTAyNTQsMzguMjY4NTUNCgkJCQlDOTU2Ljc1NDg4LDEyNTIuNTkwODIsOTQ1LjQzNjUyLDEyNjYuNzAyMTUsOTI5LjYwNDQ5LDEyNzIuMDIyNDZMOTI5LjYwNDQ5LDEyNzIuMDIyNDZ6IE05MDAuMDYxNTIsMTIyMS44NDM3NXYzMi41OTg2M2g4LjUwMzkxDQoJCQkJYzEwLjk1ODk4LDAsMTkuODQyNzctNy4yOTc4NSwxOS44NDI3Ny0xNi4yOTg4M2MwLTkuMDAxOTUtOC44ODM3OS0xNi4yOTk4LTE5Ljg0Mjc3LTE2LjI5OThIOTAwLjA2MTUyTDkwMC4wNjE1MiwxMjIxLjg0Mzc1eg0KCQkJCSBNMTE1OC4zNTkzOCwxMTk1LjYyMzA1YzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NzI3LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOA0KCQkJCWwtNC45MzI2Miw4LjU0MTk5Yy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNTU5LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMyMjMsMCw1Ljk2MDk0LTAuNDQzMzYsOC43MjU1OS0xLjI2ODU1YzYuMjk1OS0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTgzNiw2LjUwMDk4bDQuOTMwNjYsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM3NSw1LjczNDM4Yy05LjAwNDg4LDUuNjAxNTYtMTkuNjMyODEsOC44Mzc4OS0zMS4wMTc1OCw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzEwOTkuNTQwMDQsMTIyMS45NTcwMywxMTI1Ljg3NDAyLDExOTUuNjIzMDUsMTE1OC4zNTkzOCwxMTk1LjYyMzA1eiIvPg0KCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMwMEZGREEiIGQ9Ik0xMzE4LjE5NzI3LDEyMDYuMDMyMjMNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2MyMC42NTYyNSwwLDQxLjMxMjUsMCw2MS45Njg3NSwwYzMuNDI5NjksMCw1LjQ1MDIsMy44ODA4NiwzLjQ4MzQsNi42OTA0Mw0KCQkJCWwtMTkuMjk2ODgsMjcuNTY3MzhjMTUuNTQyOTcsOC4zNzU5OCwyNi4xMDY0NSwyNC44MDA3OCwyNi4xMDY0NSw0My42OTUzMWMwLDI3LjM5NzQ2LTIyLjIwODk4LDQ5LjYwNjQ1LTQ5LjYwNjQ1LDQ5LjYwNjQ1DQoJCQkJYy0xNi42ODg0OCwwLTMxLjQ1MTE3LTguMjQwMjMtNDAuNDQzMzYtMjAuODc1OThjLTEuNDUwMi0yLjAzOTA2LTAuODMxMDUtNC44OTk0MSwxLjMzNTk0LTYuMTUyMzRsMTAuOTc3NTQtNi4zMzc4OQ0KCQkJCWM0Ljg4MTg0LTIuODE4MzYsMTAuOTc5NDktMi40NzU1OSwxNS41MTQ2NSwwLjg3MzA1YzMuNTI4MzIsMi42MDU0Nyw3Ljg5MTYsNC4xNDY0OCwxMi42MTUyMyw0LjE0NjQ4DQoJCQkJYzExLjc0MjE5LDAsMjEuMjU5NzctOS41MTg1NSwyMS4yNTk3Ny0yMS4yNTk3N3MtOS41MTc1OC0yMS4yNTk3Ny0yMS4yNTk3Ny0yMS4yNTk3N2gtMTUuMjE3NzcNCgkJCQljLTMuNDI5NjksMC01LjQ1MDItMy44ODA4Ni0zLjQ4NDM4LTYuNjkwNDNsMTguMTM1NzQtMjUuOTA4MmgtMzIuMDA5NzdjLTIuMzQ4NjMsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMDYuMDMyMjN6DQoJCQkJIi8+DQoJCTwvZz4NCgkJPGc+DQoJCQk8Zz4NCgkJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0RBRThGNyIgZD0iTTg1MC4zOTU1MSw4NTcuNTkxOA0KCQkJCQljLTUwLjM1NjQ1LDAtOTQuMzI1Mi0yNy4zNTY0NS0xMTcuODUyNTQtNjguMDIwNTFsLTgwLjAzMDI3LDQ2LjIwNDFjLTQuNjU1MjcsMi42ODk0NS02LjEzMTg0LDguNzE4NzUtMy4yNDkwMiwxMy4yNTU4Ng0KCQkJCQljNDIuMjM3Myw2Ni40ODYzMywxMTYuNTMzMiwxMTAuNjA3NDIsMjAxLjEzMTg0LDExMC42MDc0MmM4OC4xMjU5OCwwLDE2NS4wNzEyOS00Ny44NzUsMjA2LjI0MzE2LTExOS4wMzYxM2wtODAuNDg3My00Ni40Njk3Mw0KCQkJCQljLTQuMzEzNDgtMi40OTAyMy05LjgwMTc2LTEuMjA1MDgtMTIuNTcwMzEsMi45MzU1NUM5MzkuMTc1NzgsODMzLjU2MjUsODk3LjU5MTgsODU3LjU5MTgsODUwLjM5NTUxLDg1Ny41OTE4DQoJCQkJCUw4NTAuMzk1NTEsODU3LjU5MTh6IE0xMTM2LjcyMTY4LDU1Ni4yMTc3N2M0LjYxNDI2LTIuNjYzMDksNi4xMTAzNS04LjYxOTE0LDMuMzEyNS0xMy4xNTEzNw0KCQkJCQljLTU5LjkxNTA0LTk3LjAzMDI3LTE2Ny4yMjQ2MS0xNjEuNjk0MzQtMjg5LjYzODY3LTE2MS42OTQzNGMtMTI1Ljg5MzU1LDAtMjM1LjgxMzQ4LDY4LjM5MjU4LTI5NC42MzM3OSwxNzAuMDQ5OA0KCQkJCQlsODAuMzc2OTUsNDYuNDA2MjVjNC4zOTc0NiwyLjUzOTA2LDEwLjAwMTk1LDEuMTQ5NDEsMTIuNzEwOTQtMy4xNDU1MQ0KCQkJCQljNDIuMTY0MDYtNjYuODUxNTYsMTE2LjY2ODk1LTExMS4yNjM2NywyMDEuNTQ1OS0xMTEuMjYzNjdjODguMTI1OTgsMCwxNjUuMDcxMjksNDcuODc1OTgsMjA2LjI0MzE2LDExOS4wMzYxMw0KCQkJCQlMMTEzNi43MjE2OCw1NTYuMjE3Nzd6Ii8+DQoJCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNBNUJBQzgiIGQ9Ik04NTAuMzk1NTEsOTU5LjYzODY3DQoJCQkJCWMtODQuNTk4NjMsMC0xNTguODk0NTMtNDQuMTIxMDktMjAxLjEzMTg0LTExMC42MDc0MmMtMi44NzY5NS00LjUzMDI3LTEuMzk5NDEtMTAuNTcwMzEsMy4yNDkwMi0xMy4yNTU4Nmw4MC4wMzAyNy00Ni4yMDQxDQoJCQkJCWMtMTEuNTgxMDUtMjAuMDE2Ni0xOC4yMDk5Ni00My4yNTQ4OC0xOC4yMDk5Ni02OC4wNDE5OWMwLTc0Ljc4NTE2LDYwLjU1NzYyLTEzNi4wNjI1LDEzNi4wNjI1LTEzNi4wNjI1DQoJCQkJCWM0Ny4xOTYyOSwwLDg4Ljc4MDI3LDI0LjAyOTMsMTEzLjE4NTU1LDYwLjUyMjQ2YzIuNzY0NjUsNC4xMzM3OSw4LjI2MzY3LDUuNDIxODgsMTIuNTcwMzEsMi45MzU1NWw4MC40ODczLTQ2LjQ2OTczDQoJCQkJCWMtNDEuMTcxODgtNzEuMTYwMTYtMTE4LjExNzE5LTExOS4wMzYxMy0yMDYuMjQzMTYtMTE5LjAzNjEzYy04NC44NzY5NSwwLTE1OS4zODE4NCw0NC40MTIxMS0yMDEuNTQ1OSwxMTEuMjYzNjcNCgkJCQkJYy0yLjcwNjA1LDQuMjkxMDItOC4zMTgzNiw1LjY4MTY0LTEyLjcxMDk0LDMuMTQ1NTFsLTgwLjM3Njk1LTQ2LjQwNjI1DQoJCQkJCWMtMjguOTUyMTUsNTAuMDQwMDQtNDUuNTIzNDQsMTA4LjEzOTY1LTQ1LjUyMzQ0LDE3MC4xMDc0MmMwLDE4Ni45NjM4NywxNTEuMzk0NTMsMzQwLjE1NzIzLDM0MC4xNTcyMywzNDAuMTU3MjMNCgkJCQkJYzEyMi40MTQwNiwwLDIyOS43MjM2My02NC42NjQwNiwyODkuNjM4NjctMTYxLjY5NTMxYzIuNzk0OTItNC41MjYzNywxLjI5NDkyLTEwLjQ5MDIzLTMuMzEyNS0xMy4xNTEzN2wtODAuMDgzMDEtNDYuMjM3Mw0KCQkJCQlDMTAxNS40NjY4LDkxMS43NjM2Nyw5MzguNTIxNDgsOTU5LjYzODY3LDg1MC4zOTU1MSw5NTkuNjM4Njd6Ii8+DQoJCQk8L2c+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzAwRkZEQSIgZD0iTTExMzcuMTg1NTUsNzU4LjExMzI4di03My4xNjc5N2wtNjMuMzY1MjMsMzYuNTgzOTgNCgkJCQlMMTEzNy4xODU1NSw3NTguMTEzMjhMMTEzNy4xODU1NSw3NTguMTEzMjh6IE0xMDI2LjU3NjE3LDcwNS4xNjQwNmwxMjAuMDU4NTktNjkuMzE2NDENCgkJCQljMTIuNTY4MzYtNy4yNTU4NiwyOC4zNDQ3MywxLjg1MjU0LDI4LjM0NTcsMTYuMzY2MjF2MTM4LjYzMDg2Yy0wLjAwMDk4LDE0LjUxMjctMTUuNzc3MzQsMjMuNjIyMDctMjguMzQ1NywxNi4zNjYyMQ0KCQkJCWwtMTIwLjA1ODU5LTY5LjMxNjQxQzEwMTQuMDI4MzIsNzMwLjY0OTQxLDEwMTQuMDI4MzIsNzEyLjQwOTE4LDEwMjYuNTc2MTcsNzA1LjE2NDA2eiIvPg0KCQk8L2c+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=").then(t=>{"done"===this.oOt?s.nb(t):this.tOt.sOt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.L3t("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAmd137hFVqjO7zCKIRGZ881JRAAAFY0lEQVR42u2aPW/bVhSGn1iiPizZ8D+QgSJBNglFmiboQA0NUKAD1XotYA0BOspAkZnqx24vnTrIQNCpg4QkQMcYKDoW9j9w5y6qLNqWFDlvh3tJUa6ddHBhAuS7SKBIQffhuee851CQKVOmTJkyZcqUKXmqa8O+uyNlABKsFRmdP0o5AOle2gHoWdoBzFrpBHACwPeetJNmAFSlt6kGwGH0LqUAVqRuqgHkpEaqAVRkfvOWr+Dh9Rc4j6VvwnrhPNAbgK2ezj+yx7Z6GjUuASi4Ch4lHQAGwBeRK1rROQAdUx5K0hE4NUkaAdS02ZEuoms2wkCSgvYSgFJfkn6CobkSPG0mEcAOrHnGFOxAToHNjk/MygLgO/PxL0BN9yRdQKlufMQAoCdJGi8BOJYknXTJ269cu9HtdqNb4Ni6oimUbFb0dAZQ1DmULJ+TFtT0qQHwg73mLlCMfFUMQPR5VWrbmttNHICC1KDiSZ+w3pMOwFPDhP4IYFtv4ZX0nIorbUBNmjWAiqdZg5fmNFd6jvPhJQDjAV9LI0r28IpmycsBZalNWfoRWJcuoKY9c7cCkwpOwdcIqNT1BmrSgQkNbQAvpAGOF+aHOIBpCxhKR/TVBNjVOHkAOgrg2N6aoU7sklmVidtD7bNm/fIrjaBmk+Sxea142iBnTyguAfjZZscNXLOdXFM8EgVgXRpDz/6yonTEts6AXdV1APTVoKigFSXEmj3XN0kSV01WFQwAHC8O4Mhagye8NgHS137SALzsS3dxwhtXkQ4oaw64eqomOFKXbc2xJbFLTX8DOHYnsKsJu2Gdu8IIuTqjrMB8eyM5ACIFXQo2S5t7lNMM6AdFTaCgADqahHW8EQIohBk9rzEdE+JXAtjVmHWpDTmplUAA96Ea/bJDnVKSWjgaFTSHqubgmjVDXQchgFy4wBXNcXV6LYC8RjbEypomcCAyBopRShxqAn21yenM8WawqjOoKVbmLYBFndeImsnyVwJY1RR8NW1FTRiA6UNTCsP6fKwLONQBZTXx1WVbT0KbtwygvAxg81oAZU0xe2QYxkmyrDDx2DzWBXTUZFs7dNQwHUEMwN4VAKb47wOQ1wj8Gx0+/Y8A8powVJtt7XOoxn8A8N4IqCrA8cJUmzgAl3JAUWN8tSjqDX0NwI/XbwugGLe178oBK7bBaBesm0gggOUqwLrOHe8c1jV2NAMOw/XFAFRth2dr/burANS1cSc0C8kDsB7zAZvgKCjoLTiaFqwpmvwLQC7e2b3PB4CrZj48KXkAKktOEPr6VqeAr680udzEWACluK0LreJ1ThBe6+w4HkfJAhD1AtbAu3qgPcDVX2oCK9bqxwFQ1+fRsVW7va/uBZpAWaND652TCGBoM1rHHN6VmQlsq6cdE+4mC75oLAC49prKB1zTDd6NukHIKahbIkkEsGrmAQWZbZqXNLClrg04dTP4KnjnCwBfmgkZT7WD45k94C8BmA3MPGBgeqcbfQBxwwDsRMi3N7Iqc3dzsuVhV5ofkevpJOoGKUn6Ax5L92F49USoayZCls08uQDiM0ETCWPb8k7DMmH02SICGC7ayVhnsABwEpsZQkfxUpI4ALGpsFn4xCbHcVjnwgnvAkBh0U6CbzqrXgzA1E6FB9YOJGcacgUAfl36t0Ro/SIDUDEL/D1WBcJr5q0oRoJ2LQZgZJ4LPIu2RCPJAJafDLm2Yr2OHmQ4H0vzBksA2PKl38L3fY0aLAFYejK0ZpJhelVKzkj8dlRNzkj8dpRP0DTkVjTUXroB9PVnqtefS9I05BZU8NOdAyUl5q8RtwUg6KYcwP1Up8CanpMpU6ZMmTLdgP4BRYsi23xEdOAAAAAASUVORK5CYII=").then(t=>{"done"===this.oOt?s.nb(t):this.tOt.iOt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.L3t("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAdxHdu4hmVZnuRMwzqiLYE4y2AAAFw0lEQVR42u2Yy+9LQRTHp6Xq0VIkXkFvwkYslAWJiGJj2a6sJJe/oF3YWGElEQmxkYi4ErFWNpatWFmIx9Lm1sJCLKgqraqv82h726l6hOuRzDf53TtnOr+ZOZ+ZOffca5ycnJycnJycnJycnJycnJz+pi7g2G9osxjvzX8qB8ABcAAcgH8XwDa85dspNOiaRDuAR4U0PnHtDuyy7IJRJS6gvVmL6TywVkp4ZxIhulUxFvlaXQTrgEHbnMDH5XRjlXCdb+uAnc2ojWgFFTYBZ8e9tzcaswAk6v/3K4sPfPNRFj87IXj+KXQUS9m2jXoH1lMuLq2DtEcAtNMBT9PjanFq7ySAhbABVEAaeDaAwkk2D7GRqctAMQJIq2sBauLnB/VxCfqKpWrbRhSC1W5SMQ9RTgBUwKpF1ccmAIQ2gCxE+20Au9nSESvDgeIDkJSBMpA9vgyXdsj0H0GORL3n2fbwPOKoSQS4Q2cBOGzSJbQYAHDbZEI+rEuBcyZRlF71fIP/x0wBuIBOw6xH3xu2GQFAP2cegmvSwHkeqBZjECzB46UXD3bg8UKJCT6QYzgDY9uiU7hC11doERq6MAZ2CPJ7ipEulOrteDcB4KOZBpBG7zrV1JGzATzmIdnrl/go3bRiBJBHlZc+6ItjuQQ+yFLz8Gka2LZFRVTFGdoQJQ0LPodHnXkS8AjlRWkBLwKQswAs0PDzGpcsAAMNuG+5WgdqxwjgEcp8qcBjN5oZdPhEvOfhU/hsbJuVloWV6WWgp2IBLxXQNEwLDfKqoMXrEQBjATiFA3qePlgAZJRl+EStdaAQjfgALOC1zfeX8ALV+7S69JdALWjxHGqztmxyMnTD6OOBWvAdGDkn60c6vrI5H4CPnOJsWQDe8G0hIU0MB8ojFx+AFAeqeitLy5FkL3w0yNNcSOx3oDxjjxaH9XxldZluY5NBfwrAQvQbRjQXAO8UqVq5dh6A7HCgWzgdFwBdgOX4lMZbTndkWWkDN07Bk+zItllLdHm1+FkLwBSADNDf8B0AnGOp5gFYgJEexwcgGQx4iyeD9ybFkWsbDZbv0+2Y8XvGtqMpWsUimpMAzA1AUrj5ALjm2wCoONKB+ACYsEeDlU04MMs4imeJQqljslSuD4xl/zgAsx6ku/8DgDwaO9AwFU56qhzOPiXpKCzCpSSdb8v+CQDmXshb99cARAPFCOA1chWaFXlP55yn2FqEgiFvOSzYtmiJzisKB7MxQPS8iO63YsD3AHDv8QPgjR92eKuf9vts1wdZjvZhN4XajD35FNDiR7ln0LYBaILY+OZT4DsA+BkTP4AUrgXkxSJcDFps+72X7EGlx6mBbU/lAbdQjvKA7hSAlSuHxdw0gORsHrAUnXkAUuj+AQAZdHGRp9bShX2ECz1JRSk4zNhRJqj5SZQJfpgCUNS2eRsAP/usTDAxPxFKA834AZgAOM1z6qGgxxpdmUDQNjP25LtAsojxu0AehSkAF6RLXWR/EkAdVYEevQtswVtpMwuAB1JGh2jbxQcgBKrig/qSxTD6o2Nm7fttSY6uUnErV+jb4CJyaArAI5luJkCDOy5HAPISSB5A3wYbhJERahvtPALAAw2EI9Vzsh2TTuk23qEceN9d4vVVv227hNroe0CRi/o9IKTZTQFIAc/M8jwGEiouG2/042u8u25uAuPvAavRH7XhzqcBpICdRpssRa+aNLFoh2JeyBzU08fih/ht20WZXghW34s+/ZQnAKhzojsSH4CC/sjARPKamLXacOfTAIwfNSkCbROLluG9Tm2gdl3PY178tu2SBIpFQ6fHH//2GAvAogCkjtGDEAFQYPsu6DdBqw11bgFIF8dNHsQGIEFRSDOe0RS9YYJk23JMrw+/Cr9bFX0VXmNsACbhA088qXhBrMYAlq8Gjhh//FX4YNSGO7cASO9n9B99AuHk5OTk5OTk5OTk5OTk5OTk5OT0VX0B7+fX+9cwWYYAAAAASUVORK5CYII=").then(t=>{"done"===this.oOt?s.nb(t):this.tOt.eOt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async A3t(t){t=new URL(t,this.Jc.O3t()).toString();const s=await N.fo(t),i=await this.Jc.R3t(s,2048,2048);return this.mS().HD(i,{qT:"high"})}async L3t(t){t=new URL(t,this.Jc.O3t()).toString();const s=await N.fo(t);return this.mS().HD(s,{qT:"high"})}P3t(){this.Jc.Hc("runtime","hide-cordova-splash")}k3t(){this.qLt=Date.now(),this.Jc.Gf().addEventListener("loadingprogress",this.KLt),this.ZLt=requestAnimationFrame(()=>this.F3t());const t=this.Jc.j3t();3!==t&&this.P3t()}async z3t(){const t=this.mS(),s=(this.XLt=1,this.Jc.j3t());4===s&&await this.uOt,this.aOt=null,this.uOt=null,-1!==this.ZLt&&(cancelAnimationFrame(this.ZLt),this.ZLt=-1),this.Jc.Gf().removeEventListener("loadingprogress",this.KLt),this.KLt=null,this.$Lt&&(this.$Lt.Kn(),this.$Lt=null),this.Jc.B3t(),t.FD(),this.tOt.sOt&&(t.nb(this.tOt.sOt),this.tOt.sOt=null),this.tOt.iOt&&(t.nb(this.tOt.iOt),this.tOt.iOt=null),this.tOt.eOt&&(t.nb(this.tOt.eOt),this.tOt.eOt=null),t.kD(0,0,0,0),t.Bw(),this.oOt="done",this.RLt=t.Ww(),3===s&&this.P3t()}F3t(){if(-1!==this.ZLt){const t=this.mS(),s=(t.FD(),this.ZLt=-1,this.Jc.eO().LQ()),i=this.Jc.j3t();if(3!==i&&(this.f3t(t),t.kD(0,0,0,0),t.uD(),t.MM(),t.cD(null)),0===i)this.U3t(s);else if(1===i)this.W3t(s,120,0);else if(2===i)this.Q3t(s);else if(3===i)N.xh();else{if(4!==i)throw new Error("invalid loader style");this.J3t(s)}t.Bw(),this.ZLt=requestAnimationFrame(()=>this.F3t())}}Q3t(t){t?this.$Lt.SG(1,0,0):this.$Lt.SG(.6,.6,.6),this.$Lt.qc(Math.round(100*this.XLt)+"%");const s=this.cLt/2,i=this.fLt/2,e=(_a.Hu(s-150,i-100,150+s,100+i),this.mS());e.cD(this.$Lt.lb()),e.cw(_a,this.$Lt.aN())}W3t(t,s,i){const e=this.mS(),n=(e.xM(),t?e.oD(1,0,0,1):e.oD(.118,.565,1,1),this.cLt/2),r=this.fLt/2,h=s/2;E.su(n-h,r-4+i,Math.floor(s*this.XLt),8),e.Rect(E),E.su(n-h,r-4+i,s,8),E.offset(-.5,-.5),E.bu(.5,.5),e.oD(0,0,0,1),e.gw(E),E.bu(1,1),e.oD(1,1,1,1),e.gw(E)}U3t(t){const s=this.mS(),i=this.Jc._3t();if(i){const e=i.lb();if(e){const n=e.Jp(),r=e.im(),h=this.cLt/2,o=this.fLt/2,a=n/2,u=r/2;_a.Hu(h-a,o-u,h+a,o+u),s.cD(e),s.ju(_a),this.W3t(t,n,16+u)}else this.W3t(t,120,0)}else this.W3t(t,120,0)}J3t(t){let s=this.mS(),i=this.tOt.sOt,e=this.tOt.iOt,n=this.tOt.eOt,r=Date.now(),h=(0===this.nOt&&(this.qLt=r),this.Jc.Y3t()||this.Jc.V3t()&&!this.Jc.H3t()),o=h?0:200,a=h?0:3e3,u=1,l=("fade-in"===this.oOt?u=Math.min((r-this.qLt)/300,1):"fade-out"===this.oOt&&(u=Math.max(1-(r-this.hOt)/300,0)),s.xM(),s.oD(.231*u,.251*u,.271*u,u),E.set(0,0,this.cLt,this.fLt),s.Rect(E),Math.ceil(this.cLt)),c=Math.ceil(this.fLt),f,d;256<this.fLt?(s.oD(.302*u,.334*u,.365*u,u),f=l,d=Math.max(.005*c,2),E.su(0,.8*c-d/2,f,d),s.Rect(E),t?s.oD(u,0,0,u):s.oD(.161*u,.953*u,.816*u,u),f=l*this.XLt,E.su(.5*l-f/2,.8*c-d/2,f,d),s.Rect(E),s.oD(u,u,u,u),s.MM(),e&&(f=1.5*N.rr(.22*c,105,.6*l),d=f/8,E.su(.5*l-f/2,.2*c-d/2,f,d),s.cD(e),s.Rect(E)),i&&(f=Math.min(.395*c,.95*l),d=f,E.su(.5*l-f/2,.485*c-d/2,f,d),s.cD(i),s.Rect(E)),n&&(f=1.5*N.rr(.22*c,105,.6*l),d=f/8,E.su(.5*l-f/2,.868*c-d/2,f,d),s.cD(n),s.Rect(E))):(s.oD(.302*u,.334*u,.365*u,u),f=l,d=Math.max(.005*c,2),E.su(0,.85*c-d/2,f,d),s.Rect(E),t?s.oD(u,0,0,u):s.oD(.161*u,.953*u,.816*u,u),f=l*this.XLt,E.su(.5*l-f/2,.85*c-d/2,f,d),s.Rect(E),s.oD(u,u,u,u),s.MM(),i&&(f=.55*c,d=f,E.su(.5*l-f/2,.45*c-d/2,f,d),s.cD(i),s.Rect(E))),this.nOt++,"fade-in"===this.oOt&&300<=r-this.qLt&&2<=this.nOt&&(this.oOt="wait",this.rOt=r),"wait"===this.oOt&&r-this.rOt>=a&&1<=this.XLt&&(this.oOt="fade-out",this.hOt=r),("fade-out"===this.oOt&&r-this.hOt>=300+o||h&&1<=this.XLt&&r-this.qLt<500)&&this.aOt()}}}{let U=self.Ls,W=self.C3Debugger,i={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},h=!0;U.q3t=class extends U.qn{constructor(t){t=Object.assign({},i,t),super(),this.Z3t=t.messagePort,this.X3t=t.runtimeBaseUrl,this.K3t=t.previewUrl,this.$3t=!!t.headless,this.t4t=!!t.hasDom,this.s4t=!!t.isInWorker,h=t.ife,this.i4t=!!t.useAudio,this.e4t=t.exportType,this.n4t=t.isNWjs,this.PW=!!t.isiOSCordova,this.r4t=!!t.isiOSWebView,this.h4t=!!t.isWindowsWebView2,this.o4t=!!t.isAnyWebView2Wrapper,this.a4t=!!t.isFBInstantAvailable,this.u4t=!("preview"!==this.e4t||!t.isDebug),this.l4t=this.u4t,this.c4t=this.u4t,this.f4t=0,this.d4t=[],this.p4t=[],this.m4t=!1,this.g4t="",this.y4t="",this.M4t="",this.w4t="",this.S4t=0,this.T4t=0,this.EA=self.devicePixelRatio,this.b4t=0,this.v4t=0,this.x4t=0,this.I4t=0,this.C4t=0,this.G4t=!1,this.Tg=!0,this.N4t=!1,this.E4t=!1,this.D4t=!1,this._4t=null,this.qQ=U.Xn(U.AW,this,t),this.ZH=U.Xn(U.gq,this),this.hft=U.Xn(U.e0t,this),this.A4t=U.Xn(U.GR,this,t.wrapperComponentIds),this.L4t=U.Xn(U.X_t,this),this.qK=U.Xn(U.kq,this),this.O4t=U.Xn(U.Vat,this),this.R4t=U.Xn(U.qat,this),this.uut=U.Xn(U.eut,this),this.gg=U.Xn(U.eg,{hg:t=>this.P4t(t),ag:t=>this.k4t(t)}),this.F4t=new Map,this.j4t=[],this.z4t=new Map,this.B4t=new Map,this.U4t=0,this.W4t=[],this.Q4t=new Set,this.J4t=[],this.Y4t=[],this.V4t=new Map,this.H4t=!1,this.q4t=!1,this.Z4t=0,this.X4t=0,this.K4t=new Map,this.$4t=new Set,this.tRt=new Set,this.sRt=[],this.iRt=[],this.eRt=null,this.nRt=!1,this.rRt="vsync",this.i2="trilinear",this.hRt=!1,this.oRt=!0,this.aRt=!1,this.uRt=!1,this.lRt=null,this.cRt={fRt:t=>{this.ZLt=-1,this.dRt=-1,this.hX(t)},pRt:t=>{this.dRt=-1,this.hX(t,!1,"skip-render")},mRt:()=>{this.ZLt=-1,this.ZA()}},this.ZLt=-1,this.dRt=-1,this.gRt=0,this.yRt=0,this.MRt=!1,this.wRt=!1,this.SRt=!1,this.TRt=!0,this.bRt=!0,this.vRt=!1,this.xRt=0,this.IRt=new U.X0(1),this.CRt=()=>Math.random(),this.GRt=0,this.NRt=0,this.ERt=0,this.DRt=0,this._Rt=0,this.zGt=1,this.ARt=1/30,this.LRt=0,this.ORt=U.Xn(U.a0),this.RRt=U.Xn(U.a0),this.PRt=U.Xn(U.a0),this.kRt=new Map,this.FRt=-1,this.jRt=0,this.zRt=0,this.BRt=-1,this.URt=0,this.WRt=0,this.QRt=0,this.JRt=!1,this.YRt="",this.VRt=!1,this.HRt="",this.uj=null,this.qRt="",this.ZRt=null,this.XRt=null,this.QIt=U.Xn(U.Event.Gf),this.KRt=new Map,this.$Rt=new Map,this.tPt=0,this.sPt=!1,this.iPt=!1,this.ePt=!1,this.nPt=[],this.rPt={pretick:U.Xn(U.Event,"pretick",!1),tick:U.Xn(U.Event,"tick",!1),tick2:U.Xn(U.Event,"tick2",!1),instancecreate:U.Xn(U.Event,"instancecreate",!1),instancedestroy:U.Xn(U.Event,"instancedestroy",!1),beforelayoutchange:U.Xn(U.Event,"beforelayoutchange",!1),layoutchange:U.Xn(U.Event,"layoutchange",!1)},this.rPt.instancecreate.nz=null,this.rPt.instancedestroy.nz=null,this.G7=U.Xn(U.Event.Gf),this.hPt=null;const s=(t,s)=>U.FGt.T_t(this,t,s);this.oPt=U.Xn(U.y0,s),this.aPt=U.Xn(U.y0,s),this.uPt=U.Xn(U.y0,s),this.lPt=U.Xn(U.cPt,this,t.jobScheduler),t.canvas&&(this.eRt=U.Xn(U.tLt,this)),this.Z3t.onmessage=t=>this._OnMessageFromDOM(t.data),this.KF("runtime","visibilitychange",t=>this.fPt(t)),this.KF("runtime","wrapper-extension-message",t=>this.dPt(t)),this.KF("runtime","opus-decode",t=>this.A4(t.arrayBuffer)),this.KF("runtime","get-remote-preview-status-info",()=>this.pPt()),this.KF("runtime","js-invoke-function",t=>this._0t(t)),this.KF("runtime","go-to-last-error-script",self.goToLastErrorScript),this.KF("runtime","offline-audio-render-completed",t=>this.mPt(t)),this.QIt.addEventListener("window-blur",t=>this.gPt(t)),this.QIt.addEventListener("window-focus",()=>this.yPt()),this.qK.gZ(),this.R4t.gZ(),this.MPt=null,this.wPt=new WeakMap,this.SPt={keyboard:null,j3:null,z3:null,B3:null},this.TPt=new WeakMap,this.bPt=[]}static _b(t){return U.Xn(U.q3t,t)}Kn(){U.Nh(this.j4t),this.z4t.clear(),this.B4t.clear(),this.ZH.Kn(),this.ZH=null,this.hft.Kn(),this.hft=null,this.A4t.Kn(),this.A4t=null,this.qQ.Kn(),this.qQ=null,this.L4t.Kn(),this.L4t=null,this.qK.Kn(),this.qK=null,this.O4t.Kn(),this.O4t=null,this.R4t.Kn(),this.R4t=null,this.uut.Kn(),this.uut=null,this.gg.Kn(),this.gg=null,this.eRt&&(this.eRt.Kn(),this.eRt=null),this.QIt.Kn(),this.QIt=null,this.vPt=null}["_OnMessageFromDOM"](t){const s=t.type;if("event"===s)this.xPt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.IPt(t)}}xPt(t){if(this.ePt){const s=t.component,i=t.handler,e=t.data,n=t.dispatchOpts,r=!(!n||!n.dispatchRuntimeEvent),h=!(!n||!n.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const u=new U.Event(i);u.data=e,this.QIt.kf(u)}if(h){const l=new U.Event(i,!0);for(const[c,f]of Object.entries(e))l[c]=f;this.cq(l)}}const a=this.KRt.get(s);if(a){const d=a.get(i);if(d){let t=null;try{t=d(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.CPt(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this.CPt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.CPt(o,!1,""+t)}):this.CPt(o,!0,t))}else r||h||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`)}else r||h||console.warn(`[Runtime] No DOM event handlers for component '${s}'`)}else this.nPt.push(t)}CPt(t,s,i){this.Z3t.postMessage({type:"result",responseId:t,isOk:s,result:i})}IPt(t){const s=t.responseId,i=t.isOk,e=t.result,n=this.$Rt.get(s);i?n.resolve(e):n.reject(e),this.$Rt.delete(s)}KF(t,s,i){let e=this.KRt.get(t);if(e||(e=new Map,this.KRt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}Hc(t,s,i,e){this.Z3t.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}h4(t,s,i,e){const n=this.tPt++,r=new Promise((t,s)=>{this.$Rt.set(n,{resolve:t,reject:s})});return this.Z3t.postMessage({type:"event",component:t,handler:s,data:i,responseId:n},e),r}ZU(t,s,i,e=-1){this.Hc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}XU(t,s,i){const e=this.tPt++,n=new Promise((t,s)=>{this.$Rt.set(e,{resolve:t,reject:s})});return this.ZU(t,s,i,e),n}dPt(t){if(-1!==t.asyncId){const s=t.asyncId,i=this.$Rt.get(s);i.resolve(t.params),this.$Rt.delete(s)}else this.xPt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}dj(t,s,i){this.KF("wrapper-extension:"+t,s,i)}cj(t){return this.A4t.cj(t)}GPt(t){if(!this.fq())throw new Error("not in debug mode");this.Hc("runtime","post-to-debugger",t)}async WGt(t){U.SSt(this),this.fq()?await W.WGt(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const[s]=await Promise.all([this.qQ.co("data.json"),this.NPt(),this.lPt.WGt()]);if(await this.EPt(s),await this.DPt(t),this.Y3t()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.u3t()){const i=this.u3t();console.info(`[C3 runtime] Hosted in ${this.pO()?"worker":"DOM"}, rendering with WebGL ${i.c2()} [${i.m_()}]`)}else this.l3t()&&console.info(`[C3 runtime] Hosted in ${this.pO()?"worker":"DOM"}, rendering with WebGPU [${this.l3t().GetAdapterInfoString()}]`);this.mS().Hw()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.ePt=!0;for(const e of this.nPt)this.xPt(e);U.Nh(this.nPt),this.eRt&&this.eRt.k3t();for(const n of t.runOnStartupFunctions)this.d4t.push(this._Pt(n));if(await Promise.all([this.qQ._Q(),...this.d4t]),U.Nh(this.d4t),!this.qQ.LQ())return this.eRt&&await this.eRt.z3t(),await this.QIt.Rf(new U.Event("beforeruntimestart")),await this.FD(),this.Z3t.postMessage({type:"runtime-ready"}),this;this.eRt&&this.eRt.P3t()}async _Pt(t){try{await t(this.MPt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async EPt(t){const s=t.project,i=(this.g4t=s[0],this.y4t=s[16],this.M4t=s[31],this.w4t=s[38],s[39]||"loading-logo.png"),e=(this.hRt=!!s[9],this.S4t=this.x4t=s[10],this.T4t=this.I4t=s[11],this.L4t.kAt(this.S4t,this.T4t),this.b4t=this.S4t/2,this.v4t=this.T4t/2,this.rRt=s[37],this.nRt=!!s[40],this.i2=s[14],this.N4t=s[15],this.E4t=s[42],this.D4t=s[17],this.G4t=!!s[18],this.C4t=s[19],this.X4t=s[21],this.aRt=s[22],this.qQ);if(e.aQ(s[45]),e.FQ(s[7],s[25]),e.lQ(s[8]),e.cQ(s[32]),e.dQ(s[28]),e.RQ(s[29]),0===this.C4t){let t;(t="flat"===e.G4()?e.pQ()+i:i)&&(this._4t=e.xQ({url:t}))}this.eRt&&(this.eRt.t3t(U.tLt.r3t(s[12])),this.eRt.e3t(s[23]?"high":"low"),this.eRt.Jw(0!==s[24]),this.eRt.lOt(s[34]),this.eRt.h3t(s[41]),this.eRt.cOt(s[13]),this.eRt.fOt(s[30]),this.eRt.mOt(s[46],s[47]),this.eRt.pOt(s[26]),this.eRt.gOt(s[48]));const n=s[43],r=(n&&await this.APt(n),this.LPt(),this.A4t._xt(),this.sRt=self.OPt(),s[2]);for(const u of r[1])this.A4t.Axt(u);for(const l of r[0])this.A4t.Dxt(l);this.sRt=self.OPt(),this.RPt(),this.A4t.Pxt();for(const c of s[3]){const f=U.tut._b(this,this.j4t.length,c);this.j4t.push(f),this.z4t.set(f.kc().toLowerCase(),f),this.B4t.set(f.NY(),f)}for(const d of s[4]){const p=this.j4t[d[0]];p.NCt(d)}for(const m of s[27]){const g=m.map(t=>this.j4t[t]);this.W4t.push(U.Xn(U.GGt,this,g))}this.PPt();for(const y of this.j4t)y.DCt();for(const M of s[5])this.ZH._b(M);const h=s[1];if(h){const w=this.ZH.Gq(h);w&&this.ZH.Iq(w)}for(const S of s[35])this.O4t._b(S);for(const T of s[33])this.qK._b(T);for(const b of s[44])this.R4t._b(b);this.R4t.Kat()||(this.R4t.Kn(),this.R4t=null);for(const v of s[49])this.uut._b(v);this.uut.out()||(this.uut.Kn(),this.uut=null);for(const x of s[6])this.hft._b(x);this.hft.O0t(),this.kPt(),U.Nh(this.sRt),this.xP();let o="any",a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.Hc("runtime","set-target-orientation",{targetOrientation:o})}async APt(t){const s=t.format;"image-sequence"===s?this.lRt=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===s?this.lRt=new self.C3ExportToGIF(this,t):"webm"===s?this.lRt=new self.C3ExportToWebMVideo(this,t):"mp4"===s&&(this.lRt=new self.C3ExportToMP4Video(this,t)),this.rRt="unlimited-frame",this.eRt.t3t("off"),this.EA=1,self.devicePixelRatio=1,await this.h4("runtime","set-exporting-to-video",{message:this.lRt.GetExportingMessageForPercent(0),duration:this.lRt.Az()})}j3t(){return this.C4t}kOt(){return null!==this.lRt}FPt(){return this.lRt.Az()}jPt(){return this.lRt.GetFramerate()}zPt(){return this.lRt.WGt({width:this.eRt.MR(),height:this.eRt.SR()})}BPt(){const t=this.gRt/this.jPt();return this.lRt.AddFrame(this.eRt.KOt(),t)}UPt(){this.lRt&&this.lRt.nit()}mPt(t){this.lRt.OnOfflineAudioRenderCompleted(t)}WPt(){return this.lRt.Bw()}V3t(){return this.a4t}Cg(){return this.Tg}l4(t){this.d4t.push(t)}y9(t){this.m4t=!!t}QPt(t){this.m4t&&this.p4t.push(t)}v9(){return this.p4t}TCt(){return this.U4t++}ACt(){return this.U4t}D_t(t){this.Q4t.add(t)}__t(t){this.Q4t.delete(t)}POt(){return this.Q4t}async DPt(t){this.eRt&&(await this.eRt.So(t),this.eRt.D3t(this.C4t))}async NPt(){const n=this.qQ;if(!n.d4("audio/webm; codecs=opus")){let t=null,s=n.uQ(),i=s+"opus.wasm.js",e=s+"opus.wasm.wasm";try{t=this.JPt()&&n.mQ()?await n.yQ(e):await n.do(e)}catch(t){return void console.info("Failed to fetch Opus decoder WASM; assuming project has no Opus audio.",t)}this.YPt(t,"opus-decoder-wasm"),await this.VPt([i])}}async A4(t){const s=await this.HPt("OpusDecode",{arrayBuffer:t},[t]);return s}async FD(){this.MRt=!0,this.GRt=Date.now();let s=null,t=new Promise(t=>s=t);if(this.G4t){for(const n of this.j4t)n.SY()||n.BCt()||!n.AR()||n.Ebt();(async()=>{await this.qQ._Q(),await t,this.Tg=!1,this.qPt()})()}else this.Tg=!1;this.qQ.AQ(),this.fq()&&W.RuntimeInit(h);for(const r of this.ZH.L3())r.B9();this.kOt()&&await this.zPt();const i=this.ZH.Cq(),e=(await i.s9(null,this.mS()),await i.c9(!0),this.jRt=performance.now(),s(),this.G4t||this.qPt(),await this.h4("runtime","before-start-ticking"));e.isSuspended&&!this.kOt()?(this.xRt++,this.vRt=!0):this.hX()}qPt(){this.HF(U.O9.L9.A9.ZPt,null,null),this.Hc("runtime","register-sw")}zgt(t){t=Math.floor(t);const s=this.sRt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}RPt(){for(const t of self.XPt){const s=U.first(Object.keys(t));this.iRt.push(s)}}n1t(t){t=Math.floor(t);const s=this.iRt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}KPt(){return this.t4t}$Pt(){return this.$3t}pO(){return this.s4t}O3t(){return this.X3t}tkt(){return this.K3t}DO(){return this.hft}WO(){return this.hft.WO()}H0t(){return this.hft.H0t()}PO(){return this.hft.PO()}q0t(){return this.hft.q0t()}MSt(){return 0===this.H0t().Ift()}X0t(){return this.hft.X0t()}w_t(){return this.A4t}kyt(){return this.A4t.kyt()}qJ(t){if((t=Math.floor(t))<0||t>=this.j4t.length)throw new RangeError("invalid index");return this.j4t[t]}skt(t){return this.z4t.get(t.toLowerCase())||null}h6(t){return this.B4t.get(t)||null}vnt(t){const s=U.GR.YR(t);return s?s.ZR():null}wY(){return this.j4t}*ikt(){for(const t of this.j4t)t.SY()||(yield*t.instances())}Gf(){return this.QIt}CO(){return this.G7}cq(t){t.runtime=this.NR();const s=this.fq()&&!this.hft.bP();s&&W.StartMeasuringScriptTime(),this.G7.dispatchEvent(t),s&&W.AddScriptTime()}E9(t){return t.runtime=this.NR(),this.G7.Rf(t)}gO(){return this.S4t}MO(){return this.T4t}ekt(t,s){if(this.S4t!==t||this.T4t!==s){this.S4t=t,this.T4t=s;const i=this.D3();i.Rq(),i.Pq()}}XY(){return this.x4t}KY(){return this.I4t}ZOt(t,s){if(this.x4t!==t||this.I4t!==s){this.x4t=t,this.I4t=s;const i=this.D3();i.Rq(),i.Pq()}}FOt(t){this.kOt()||(this.EA=t)}TR(){return this.EA}VV(){return this.b4t}HV(){return this.v4t}lR(){return this.eRt}tH(){return this.eRt?this.eRt.tH():this.x4t}sH(){return this.eRt?this.eRt.sH():this.I4t}hF(){return this.eRt?this.eRt.hF():1}GU(){return this.eRt?this.eRt.GU():1}OH(){return this.eRt?this.eRt.OH():1}AH(){return this.eRt?this.eRt.AH():1}Xk(){return this.eRt?this.eRt.Xk():0}Kk(){return this.eRt?this.eRt.Kk():0}nkt(){return this.eRt?this.eRt.pR():0}rkt(){return this.eRt?this.eRt.gR():0}IU(){return this.eRt?this.eRt.IU():"off"}cH(t){return this.eRt?this.eRt.cH(t):null}OJ(t){this.eRt&&this.eRt.OJ(t)}uH(){return this.N4t}AOt(){return this.E4t}LOt(){return this.D4t}g3(){return this.eRt?this.eRt.g3():NaN}fb(){return"nearest"!==this.wO()}M3(){return this.rRt}w3(t){this.rRt!==t&&(this.rRt=t,-1!==this.ZLt||-1!==this.dRt)&&(this.hkt(),this.okt())}wO(){return this.i2}ICt(){return this.G4t}_3t(){return this._4t}B3t(){this._4t&&(this._4t.KC(),this._4t.Kn(),this._4t=null)}D3(){return this.ZH}G3(){return this.ZH.G3()}L$(){return this.qK}akt(){return this.O4t}wNt(){return this.R4t}_ut(){return this.uut}eO(){return this.qQ}xQ(t){return this.qQ.xQ(t)}MP(t,s,i,e,n,r){if(r&&this.R4t){if(t instanceof U.tut&&t.SY()){const o=t.vmt(),a=Math.floor(this.C3()*o.length);return this.MP(o[a],s,i,e,n,r)}const h=this.R4t.$at(t,r);if(h){const u=this.nY(h,s,!1,i,e,!1,n,void 0,n);return this.R4t.sut(u,r),u}}return this.nY(t,s,!1,i,e,!1,n,void 0,n)}nY(t,s,i,e,n,r,h,o,a){let u=null,l=null;if(t instanceof U.tut){if((l=t).SY()){const S=l.vmt(),T=Math.floor(this.C3()*S.length);l=S[T]}u=l.XJ()}else u=t,l=this.qJ(u[1]);const c=l.iP().AR();if(this.Tg&&c&&!l.BCt())return null;const f=s;c||(s=null);let d;d=i&&!r&&u&&!this.K4t.has(u[2])?u[2]:this.X4t++;const p=u?u[0]:null,m=U.Xn(U.Instance,{runtime:this,aF:l,bj:s,UGt:p,YGt:u?u[3]:null,uid:d,tags:u?u[6]:null});this.K4t.set(d,m);let g=null,y=(c&&(g=m.Z3(),void 0!==e&&void 0!==n&&(g.VS(e),g.ZS(n)),l.mGt(!0)),s&&(a||s.hY(m,!0),s._3().e9(l)),this.Z4t++,!0);if(o){const b=o.uF();if(b.TF()&&l.TF()){const v=l.K7(),x=b.K7();v===x&&(y=!1)}}if(l.TF()&&!i&&!r&&y){const I=new Set;for(const C of l.K7().F9())if(C!==l){const G=this.ukt(C,g,I);if(G){const N=this.nY(G,f,!1,g?g.YS():e,g?g.qS():n,!0,!1,void 0,a);m.j9(N)}else{const F=this.nY(C,f,!1,g?g.YS():e,g?g.qS():n,!0,!1,void 0,a);m.j9(F)}}for(const E of m.bF()){E.j9(m);for(const D of m.bF())E!==D&&E.j9(D)}}if(c&&!i&&h&&this.lkt(m,p,g,s,e,n,a),l.TF()&&!i&&!r&&h)for(const _ of m.bF()){const A=_.Z3();if(A){const j=_.iP(),L=_.uF().XJ()[0];j.AR()?this.lkt(_,L,A,s,A.YS(),A.qS(),a):this.lkt(_,L,A,s,void 0,void 0,a)}}if(!r&&h){void 0===e&&(e=p[0]),void 0===n&&(n=p[1]);const O=g.$j(),z=e-g.YS()+O.YS(),B=n-g.qS()+O.qS();O.xj(z,B)}l.lGt();const P=u?U.zh(u[5]):null,k=u?u[4].map(t=>U.zh(t)):null,M=c&&p&&p[13];if(M&&m.KGt(),m.jCt(P,k),M){const R=p[13];m.J5().Ybt(R[2],R[0],R[1])}this.Y4t.push(m),this.H4t=!0,this.fq()&&W.InstanceCreated(m);const w=this.rPt.instancecreate;return w.nz=m,this.QIt.dispatchEvent(w),m}gEt(t){const s=t[0],i=t[1],e=t[2],n=t[6];if(n)return n;const r=this.ZH.Nq(s),h=r.X3(i);return h.tY(e)}ukt(t,s,i){const e=s?.MNt()??[];for(const n of e){const r=this.gEt(n),h=!!n[4],o=this.qJ(r[1]);if(!i.has(r)&&t===o&&h)return i.add(r),r}}lkt(a,t,s,u,l,c,f){const i=s.kDt(),e=s.MNt();if(a.Z3().FDt(i),e){void 0===l&&(l=t[0]),void 0===c&&(c=t[1]);const d=new Set,p=t[0],m=t[1];for(const g of e){let t=g[0],s=g[1],i=g[2],e=g[3],n=!!g[4],r=g[5],h=g[6],o;if(h)o=h;else{const S=this.ZH.Nq(t),T=S.X3(s);o=T.tY(i)}const y=this.qJ(o[1]),M=a.SNt(y),w=d.has(y);if(M&&!w&&n){const b=a.TNt(y),v=(b.Z3().WGt(o[0]),l+o[0][0]-p),x=c+o[0][1]-m;b.Z3().xj(v,x),b.Z3().FDt(r),a.o5(b,{f5:!!(e>>0&1),p5:!!(e>>1&1),g5:!!(e>>2&1),M5:!!(e>>3&1),S5:!!(e>>4&1),N5:!!(e>>5&1),b5:!!(e>>6&1),x5:!!(e>>7&1),C5:!!(e>>8&1)}),d.add(y)}else{const I=l+o[0][0]-p,C=c+o[0][1]-m,G=this.nY(o,u,!1,I,C,!1,!0,a,f);G.Z3().FDt(r),a.o5(G,{f5:!!(e>>0&1),p5:!!(e>>1&1),g5:!!(e>>2&1),M5:!!(e>>3&1),S5:!!(e>>4&1),N5:!!(e>>5&1),b5:!!(e>>6&1),x5:!!(e>>7&1),C5:!!(e>>8&1)})}}}}gF(i){if(!this.$4t.has(i)){let t=i.uF(),s=this.V4t.get(t);if(s){if(s.has(i))return;s.add(i)}else(s=new Set).add(i),this.V4t.set(t,s);if(this.fq()&&W.InstanceDestroyed(i),i.tNt(),this.H4t=!0,i.TF())for(const e of i.bF())this.gF(e);for(const n of i.children())n.E5()&&this.gF(n);if(!this.ZH.vP()&&!this.JRt){const r=this.DO();r.SP(!0),i._Nt(),r.SP(!1)}i.ANt(this.ZH.vP())}}xP(){this.H4t&&(this.q4t=!0,this.ckt(),this.fkt(),this.q4t=!1,this.H4t=!1,this.n4())}ckt(){for(const t of this.Y4t){const s=t.uF();s.hY(t);for(const i of s.c1t())i.hY(t),i.lGt()}U.Nh(this.Y4t)}fkt(){this.QIt.Sf(!0);for(const[t,s]of this.V4t.entries())this.dkt(t,s),s.clear();this.V4t.clear(),this.QIt.Sf(!1)}dkt(t,s){for(const i of s){const e=this.rPt.instancedestroy,n=(e.nz=i,this.QIt.dispatchEvent(e),this.K4t.delete(i.vF()),this.kRt.delete(i),i.Z3());n&&(n.BDt(),n.cY(),n.tNt()),this.$4t.add(i),this.Z4t--}U.kh(t.dP(),s),t.lGt(),this.tRt.add(t);for(const r of t.c1t())U.kh(r.dP(),s),r.lGt(),this.tRt.add(r);if(t.iP().AR()){const h=new Set([...s].map(t=>t.Z3().X3()));for(const o of h)o.vV(s)}}fGt(){return this.Y4t}*bTt(t){for(const s of this.fGt())t.SY()?s.uF().wSt(t)&&(yield s):s.uF()===t&&(yield s)}FCt(){return this.X4t++}zCt(t,s){this.K4t.set(t,s)}s6(t){this.bRt!==(t=!!t)&&(this.bRt=!!t,this.bRt)&&this.vRt&&(this.n6(!1),this.vRt=!1)}i6(){return this.bRt}l9(){this.QIt.dispatchEvent(U.Xn(U.Event,"renderercontextlost")),this.n6(!0);for(const s of this.j4t)!s.SY()&&s.UCt()&&s.a9();const t=this.G3();t&&t.l9(),U.jxt.o8(),U.CQ.o8()}async a3t(){await this.G3().s9(null,this.mS()),this.QIt.dispatchEvent(U.Xn(U.Event,"renderercontextrestored")),this.n6(!1),this.n4()}fPt(t){if(this.bRt){const s=t.hidden;this.n6(s),(this.vRt=s)||this.n4()}}gPt(t){this.Y3t()&&this.aRt&&!U.ei.di&&!t.data.parentHasFocus&&(this.n6(!0),this.uRt=!0)}yPt(){this.uRt&&(this.n6(!1),this.uRt=!1)}okt(){const t=this.cRt;"vsync"===this.rRt?-1===this.ZLt&&(this.ZLt=self.requestAnimationFrame(t.fRt)):"unlimited-tick"===this.rRt?(-1===this.dRt&&(this.dRt=U.Xh(t.pRt)),-1===this.ZLt&&(this.ZLt=self.requestAnimationFrame(t.mRt))):-1===this.dRt&&(this.dRt=U.Xh(t.fRt))}hkt(){-1!==this.ZLt&&(self.cancelAnimationFrame(this.ZLt),this.ZLt=-1),-1!==this.dRt&&(U.Kh(this.dRt),this.dRt=-1)}ZO(){return 0<this.xRt}n6(t){if(!this.kOt()){const s=this.ZO(),i=(this.xRt+=t?1:-1,this.xRt<0&&(this.xRt=0),this.ZO());if(!s&&i)console.log("[Construct] Suspending"),this.hkt(),this.QIt.dispatchEvent(U.Xn(U.Event,"suspend")),this.HF(U.O9.L9.A9.pkt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const e=performance.now();this.NRt=e,this.jRt=e,this.FRt=0,this.zRt=0,this.BRt=0,this.URt=0,this.QRt=0,this.WRt=0,this.QIt.dispatchEvent(U.Xn(U.Event,"resume")),this.HF(U.O9.L9.A9.mkt,null,null),this.k1t()||this.hX(e)}}}UU(t){this.oPt.Zl(t)}YU(t){this.aPt.Zl(t)}QU(t){this.uPt.Zl(t)}WU(t){this.oPt.h0(t)}VU(t){this.aPt.h0(t)}JU(t){this.uPt.h0(t)}gkt(){const t=globalThis.FU;this.oPt.q0(!0);for(const s of this.oPt)s instanceof t?s.ej():s.hX();this.oPt.q0(!1)}ykt(){const t=globalThis.FU;this.aPt.q0(!0);for(const s of this.aPt)s instanceof t?s.qU():s.wxt();this.aPt.q0(!1)}Mkt(){const t=globalThis.FU;this.uPt.q0(!0);for(const s of this.uPt)s instanceof t?s.rj():s.dvt();this.uPt.q0(!1)}*wkt(){const s=globalThis.FU;this.oPt.q0(!0);for(const i of this.oPt){let t;t=i instanceof s?i.ej():i.hX(),U.Do(t)&&(yield*t)}this.oPt.q0(!1)}*Skt(){const s=globalThis.FU;this.aPt.q0(!0);for(const i of this.aPt){let t;t=i instanceof s?i.qU():i.wxt(),U.Do(t)&&(yield*t)}this.aPt.q0(!1)}*Tkt(){const s=globalThis.FU;this.uPt.q0(!0);for(const i of this.uPt){let t;t=i instanceof s?i.rj():i.dvt(),U.Do(t)&&(yield*t)}this.uPt.q0(!1)}async hX(a,t,s){this.SRt=!0;const u="background-wake"===s,l="background-wake"!==s&&"skip-render"!==s,c=this.D3(),f=this.lR();if(this.MRt&&(!this.ZO()||t||u)){let t=performance.now(),s=(this.wRt=!0,this.bkt(a||0),this.BRt++,this.vkt(),this.xkt()),i=(this.gTt()&&await s,this.QIt.Pf(this.rPt.pretick)),e=(i instanceof Promise&&await i,this.Ikt()),n=(this.gTt()&&await e,this.Ckt()&&await this.Gkt(),c.R3()&&await this.Nkt(),this.Ekt()),r=(this.gTt()&&await n,c.G3()),h=r.V7(),o=!1;if(-1!==h&&(r.H7(),f.Y7()!==h)){const d=this.lR().m9(h);this.pO()&&(o=!0,await d)}this.Hc("canvas","update-html-layer-dom-state",{layersDomState:r.GY().filter(t=>t.xk()).map(t=>t.DV())}),l&&this.ZA(),o&&this.Hc("canvas","cleanup-html-layers"),this.kOt()&&(await this.BPt(),this.i3()>=this.FPt())?this.WPt():(this.ZO()||u||this.okt(),this.gRt++,this.yRt++,this.wRt=!1,this.WRt+=performance.now()-t)}}async xkt(){const t=this.hft,s=this.fq();this.xP(),t.SP(!0),this.I1t(this.G3()),s&&W.StartMeasuringTime(),this.gTt()?await t.ndt():t.$1t(),s&&W.AddEventsTime(),this.C1t(),t.SP(!1),this.xP(),t.SP(!0)}async Ikt(){const t=this.fq(),s=this.gTt(),i=this.QIt,e=this.rPt,n=this.hPt;t&&W.StartMeasuringTime(),s?await this.Dkt(this.wkt()):this.gkt(),s?await this.Dkt(this.Skt()):this.ykt(),t&&W.AddBehaviorTickTime(),t&&W.StartMeasuringTime(),s?await this._kt(e.tick):i.dispatchEvent(e.tick),t&&W.AddPluginTickTime(),this.hft.SP(!1),this.cq(n.tick)}async Ekt(){const t=this.hft,s=this.QIt,i=this.rPt,e=this.fq(),n=this.gTt();e&&W.StartMeasuringTime(),n?await t.G1t(this.ZH):t.x1t(this.ZH),e&&W.AddEventsTime(),this.L4t.lAt(),this.vkt(),this.TRt=!1,t.SP(!0),e&&W.StartMeasuringTime(),n?await this.Dkt(this.Tkt()):this.Mkt(),e&&W.AddBehaviorTickTime(),e&&W.StartMeasuringTime(),n?await this._kt(i.tick2):s.dispatchEvent(i.tick2),e&&W.AddPluginTickTime(),t.SP(!1),n&&await t.F1t()}vkt(){if(0!==this.$4t.size){const t=this.QIt;t.Sf(!0);for(const s of this.tRt)s.V1t().Rct(this.$4t);this.tRt.clear(),this.hft.hdt(this.$4t);for(const i of this.$4t)i.Kn();this.$4t.clear(),t.Sf(!1)}}async Nkt(){let t=this.D3(),s=0;for(;t.R3()&&s++<10;)await this.Akt(t.Oq())}bkt(t){let s=0;if(this.kOt())s=1/this.jPt(),this.ERt=s,this.DRt=s;else if(0!==this.NRt){const i=Math.max(t-this.NRt,0);.5<(s=i/1e3)&&(s=0),this.ERt=s,this.DRt=U.rr(s,this.LRt,this.ARt)}this.NRt=t,this._Rt=this.DRt*this.zGt,this.ORt.Zl(this._Rt),this.RRt.Zl(s*this.zGt),this.PRt.Zl(this.DRt);for(const[e,n]of this.kRt)n.Zl(this.DRt*e.h3());this.eRt&&this.eRt.S3t(),1e3<=t-this.jRt&&(this.jRt+=1e3,1e3<=t-this.jRt&&(this.jRt=t),this.zRt=this.FRt,this.FRt=0,this.URt=this.BRt,this.BRt=0,this.QRt=Math.min(this.WRt/1e3,1),this.WRt=0,this.eRt&&this.eRt.w3t(),this.L4t.hAt(),this.fq())&&W.Update1sPerfStats()}ZGt(t,s){if(s){if(!this.kRt.has(t)){const i=U.Xn(U.a0);i.d0(this.ORt),this.kRt.set(t,i)}}else this.kRt.delete(t)}XGt(t){const s=this.kRt.get(t);return s?s.Xs():this.i3()}async Akt(t){const s=this.QIt,i=this.D3(),e=i.G3();await e.W9(),e.u9(t,this.mS()),e===t&&this.hft.Y9(),this.L4t.lAt(),this.vkt(),s.dispatchEvent(this.rPt.beforelayoutchange),U.bf.jf(!0),await t.s9(e,this.mS()),U.bf.jf(!1),await t.c9(!1),s.dispatchEvent(this.rPt.layoutchange),this.n4(),this.TRt=!0,this.xP(),this.UPt()}n4(){this.oRt=!0}u3t(){return this.eRt?this.eRt.u3t():null}l3t(){return this.eRt?this.eRt.l3t():null}mS(){return this.eRt?this.eRt.mS():null}ZA(){const i=this.eRt;if(i&&!i.o3t()){const e=this.mS(),t=e.h_(),n=t&&e.qw(),r=t&&e.lM();if(n&&e.YD(),this.oRt||this.kOt()){const h=this.ZH.G3(),o=(this.FRt++,e.FD(),this.fq());o&&W.StartMeasuringTime(),this.oRt=!1;let t=null,s=(n&&(t=i.v3t().ON(),e.r_(t)),null);r&&(s=e.StartFrameTiming(2*(1+h.z7())),e.StartMeasuringRenderPassTime(0,1)),this.oV()&&"low"===i.lH()?e.XE(i.tH(),i.sH()):e.KE(),this.Lkt(this.mS(),h),t&&e.o_(t),r&&(e.StopMeasuringRenderPassTime(),this.eRt.x3t(s)),e.Bw(),o&&(W.AddDrawCallsTime(),W.UpdateInspectHighlight()),i&&i.C3t()}else e.Qw()}}eq(t){return"low"===this.lR().lH()||t.qw()&&(this.uH()||this.oV())}Lkt(s,i){s.MM(),s.mD(),s.oD(1,1,1,1),s.ZD(null),s.cD(null),s.zD(this.oV()),this.eq(s)&&i.sq(s);const e=i.Y7();for(let t=1;t<e;++t)i.oq(s,t),s.lM()&&s.Restart();this.eq(s)||i.sq(s),i.hq(s)}HF(t,s,i){if(!this.MRt)return!1;let e=!this.wRt&&!this.hft.U1t(),n=0;e&&(n=performance.now());const r=this.fq(),h=(r&&this.M6(!1),this.hft._1t(this.ZH,t,s,i));if(e){const o=performance.now()-n;this.WRt+=o,r&&W.AddTriggersTime(o)}return r&&this.M6(!0),h}svt(t,s,i){if(!this.gTt())return this.HF(t,s,i);if(this.k1t())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.wRt||this.hft.U1t())return this.hft.O1t(this.ZH,t,s,i);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async ZF(t,s,i){if(!this.gTt())return this.HF(t,s,i);if(!this.MRt)return!1;if(this.k1t())return this.hft.R1t(t,s,i);if(!this.G3())return this.hft.A1t(t,s,i);let e=performance.now(),n=this.hft.O1t(this.ZH,t,s,i),r=n.next();for(;!r.done;)await this.E1t(r.value),r=n.next();return this.ZO()||this.hft.U1t()||(await this.hft.F1t(),this.SRt&&!this.wRt&&this.okt()),this.WRt+=performance.now()-e,r.value}ivt(t,s,i){const e=this.fq(),n=(e&&this.M6(!1),this.hft.j1t(this.ZH,t,s,i));return e&&this.M6(!0),n}evt(t,s,i){return this.hft.z1t(this.ZH,t,s,i)}nvt(t){return this.IRt.Zl(t)}I1t(t){this.J4t.push(t)}C1t(){if(!this.J4t.length)throw new Error("layout stack empty");this.J4t.pop()}H3(){return this.J4t.length?this.J4t.at(-1):this.G3()}KO(t){return t&&-1!==t.h3()?this.DRt*t.h3():this._Rt}nX(){return this._Rt}rX(){return this.DRt}t3(){return this.ERt}h3(){return this.zGt}o3(t){(isNaN(t)||t<0)&&(t=0),this.zGt=t}b3(t){this.LRt=Math.max(t,0)}T3(){return this.LRt}I3(t){this.ARt=Math.max(t,0)}x3(){return this.ARt}a3(){return this.zRt}l3(){return this.URt}d3(){return this.QRt}Okt(){return this.GRt}i3(){return this.ORt.Xs()}Rkt(){return this.RRt.Xs()}n3(){return this.PRt.Xs()}stt(){return this.gRt}Pkt(){return this.yRt}kkt(){return this.Z4t}lO(){return this.g4t}fO(){return this.y4t}Fkt(){return this.M4t}jkt(){return this.w4t}J3(t){if(this.JRt)throw new Error("cannot call while loading state - wait until afterload event");return this.K4t.get(t)||null}P9(){this.K4t.clear();for(const t of this.j4t)if(!t.SY())for(const s of t.dP())this.K4t.set(s.vF(),s)}Y3t(){return"preview"===this.e4t}fq(){return this.u4t}hR(){return this.e4t}oR(){return"nwjs"===this.hR()||this.n4t}H3t(){return"cordova"===this.e4t}zkt(){return"Android"===U.ei.ni&&("cordova"===this.e4t||"playable-ad-single-file"===this.e4t||"playable-ad-zip"===this.e4t||"instant-games"===this.e4t)}JPt(){return this.PW}Bkt(){return this.r4t}aR(){return this.h4t}Ukt(){return this.o4t}hO(){return this.L4t}kxt(){return this.A4t.kxt()}Fxt(){return this.A4t.Fxt()}oV(){return this.nRt}Wkt(){return this.mS().$y(this.KY())}Zy(t){return this.mS().Zy(t||this.KY())}Qkt(){return this.TRt}Jkt(t){this.hRt!==(t=!!t)&&(this.hRt=t,this.D3().Pq(),this.n4())}TO(){return this.hRt}Ykt(t){if(!this.F4t.has(t)){const i=()=>this.Vkt(t);this.F4t.set(t,i),t.Gf().addEventListener("animationframeimagechange",i)}const s=this.gg.ug(t);return s.Ig()||s.Gg().then(()=>this.n4()),s}Vkt(t){this.gg.pg(t)}P4t(t){const s=[];for(const i of t.tGt())for(const e of i.Iz()){const n=e._z();s.push({source:e,width:n.Jp(),height:n.im(),tag:e.Xz()})}return{vg:s}}async k4t(t){const s=U.Xn(U.X0),i=[],n=new Map;for(const h of t.tGt())for(const o of h.Iz()){const a=o._z().rIt();n.has(a)||(n.set(a,null),i.push(s.Zl(async()=>{const t=await a.c8();n.set(a,t)})))}await Promise.all(i);const e=[];for(const u of t.tGt())for(const l of u.Iz())e.push(s.Zl(async()=>{const t=l._z(),s=n.get(t.rIt()),i=await t.hIt(s),e=await createImageBitmap(i);return{Eg:e}}));const r=await Promise.all(e);for(const c of n.values())c instanceof ImageBitmap&&c.close&&c.close();return{vg:r}}Hkt(t){this.YRt=t,this.VRt=!1}qkt(){this.YRt="",this.VRt=!0}Zkt(t){this.HRt=t}o2t(t){this.uj=t}Xkt(){return this.qRt}Ckt(){return!!(this.YRt||this.VRt||this.HRt||null!==this.uj)}async Gkt(){if(this.YRt&&(this.xP(),await this.Kkt(this.YRt),this.$kt()),this.HRt&&(await this.tFt(this.HRt),this.$kt(),this.fq())&&W.StepIfPausedInDebugger(),this.VRt){const t=await this.sFt();this.qRt=t,await this.ZF(U.O9.L9.A9.iFt,null),this.qRt="",this.$kt()}if(null!==this.uj){this.xP();try{await this.eFt(this.uj),this.qRt=this.uj,await this.ZF(U.O9.L9.A9.nFt,null),this.qRt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.ZF(U.O9.L9.A9.rFt,null)}this.$kt()}}$kt(){this.YRt="",this.VRt=!1,this.HRt="",this.uj=null}vR(){return this.ZRt||(this.ZRt=localforage._i({name:"c3-localstorage-"+this.Fkt(),description:this.lO()})),this.ZRt}hFt(){return this.XRt||(this.XRt=localforage._i({name:"c3-savegames-"+this.Fkt(),description:this.lO()})),this.XRt}async Kkt(t){const s=await this.sFt();try{await this.hFt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.qRt=s,await this.ZF(U.O9.L9.A9.iFt,null),this.qRt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.ZF(U.O9.L9.A9.oFt,null)}}async tFt(t){try{const s=await this.hFt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.eFt(s),this.qRt=s,await this.ZF(U.O9.L9.A9.nFt,null),this.qRt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.ZF(U.O9.L9.A9.rFt,null)}}async sFt(){const t={c3save:!0,version:1,rt:{time:this.i3(),timeRaw:this.Rkt(),walltime:this.n3(),timescale:this.h3(),tickcount:this.stt(),next_uid:this.X4t,running_layout:this.G3().NY(),start_time_offset:Date.now()-this.GRt},types:{},layouts:{},events:this.hft.QH(),timelines:this.qK.QH(),user_script_data:null};for(const i of this.j4t)i.SY()||i.bGt()||(t.types[i.NY().toString()]=i.QH());for(const e of this.ZH.L3())t.layouts[e.NY().toString()]=e.QH();const s=this.aFt("save");return s.saveData=null,await this.E9(s),t.user_script_data=s.saveData,JSON.stringify(t)}x9(){return this.JRt}async eFt(t){const s=this.D3(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(1<i.version)throw new Error("C3 save data from future version");this.a2t(),this.QIt.dispatchEvent(U.Xn(U.Event,"beforeload"));for(const a of this.ikt()){const u=a.uF();u.bGt()||a.aZ()}let e=i.rt,n=(this.ORt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.RRt.Set(e.timeRaw),this.PRt.Set(e.walltime),this.zGt=e.timescale,this.gRt=e.tickcount,this.GRt=Date.now()-e.start_time_offset,e.running_layout),r=!(this.JRt=!0);if(n!==this.G3().NY()){const l=s.Nq(n);if(!l)return;await this.Akt(l),r=!0}for(const[c,f]of Object.entries(i.layouts)){const d=parseInt(c,10),p=s.Nq(d);p&&p.JH(f)}const h=new Set;for(const[m,g]of Object.entries(i.types)){const y=parseInt(m,10),M=this.h6(y);!M||M.SY()||M.bGt()||M.JH(g,h)}for(const w of this.ZH.L3())for(const S of w.QP())S.YH();if(this.xP(),this.P9(),this.JRt=!1,r){for(const T of this.ikt())T.I9();for(const[b,v]of Object.entries(i.types)){const x=parseInt(b,10),I=this.h6(x);!I||I.SY()||I.bGt()||I.IGt(v)}}this.X4t=e.next_uid,this.hft.JH(i.events);for(const C of this.j4t)if(!C.SY()&&C.TF())for(const G of C.dP()){const N=G.k9();for(const E of C.K7().F9())if(E!==C){const D=E.dP();if(N<0||N>=D.length)throw new Error("missing sibling instance");G.j9(D[N])}}this.qK.JH(i.timelines),s.Rq(),s.Pq();for(const _ of h)_.DNt();this.u2t(),this.QIt.dispatchEvent(U.Xn(U.Event,"afterload")),this.cq(this.aFt("afterload"));for(const[A,L]of Object.entries(i.types)){const O=parseInt(A,10),R=this.h6(O);R&&R.xGt()}const o=this.aFt("load");o.saveData=i.user_script_data,await this.E9(o),this.n4()}uFt(t,s){return t.Z3().ADt()-s.Z3().ADt()}M_t(t,s){t.Z3()&&!this.TPt.has(t)&&(this.TPt.set(t,s),this.bPt.push(t))}a2t(){this.TPt=new WeakMap,U.Nh(this.bPt)}u2t(t="full",s=null){this.bPt.sort(this.uFt);for(const i of this.bPt)i.lZ(this.TPt.get(i),t,s);for(const e of this.bPt)e.RNt(this.TPt.get(e),t,s);this.a2t()}async VPt(t){const s=await Promise.all(t.map(async t=>{const s=this.H3t()&&this.qQ.mQ();if(s||"playable-ad-single-file"===this.hR()){const i=await this.qQ.fo(t);return URL.createObjectURL(i)}return new URL(t,location.href).toString()}));this.lPt.lFt(s)}cFt(t,s){this.lPt.fFt(t,s)}YPt(t,s){this.lPt.dFt(t,s)}HPt(t,s,i,e){return this.lPt.HPt(t,s,i,null,null,e)}pFt(t,s,i,e){return this.lPt.pFt(t,s,i,e)}mFt(){return this.lPt.gFt()}W3(t,s){this.Hc("runtime","invoke-download",{url:t,filename:s})}async R3t(t,s,i,e,n,r){if(e=e||s,n=n||i,this.pO()){const h=await this.h4("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:n,imageBitmapOpts:r});return h.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,s,i,e,n);return r?self.createImageBitmap(o,r):o}}async yFt(t){return this.pO()?this.h4("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}MFt(){this.sPt||(this.sPt=!0,this.Hc("runtime","enable-device-orientation"))}wFt(){this.iPt||(this.iPt=!0,this.Hc("runtime","enable-device-motion"))}C3(){return this.CRt()}SFt(t){this.CRt=t}pPt(){const t=this.mS();return{fps:this.a3(),tps:this.l3(),cpu:this.d3(),gpu:this.g3(),layout:this.G3()?this.G3().kc():"",renderer:t.qw()?t.m_():t.GetAdapterInfoString()}}k1t(){return!!this.fq()&&W.k1t()}E1t(t){return this.gTt()?W.E1t(t):Promise.resolve()}cgt(){return!!this.gTt()&&W.BreakNext()}TFt(t){this.l4t=!!t,this.bFt()}vFt(){return this.l4t}gTt(){return this.c4t}M6(t){t?this.f4t--:this.f4t++,this.bFt()}bFt(){this.c4t=this.fq()&&this.l4t&&0===this.f4t}Ept(){return this.fq()&&W.Ept()}rH(){return this.fq()&&this.mS().h_()&&W.rH()}async Dkt(t){if(t)for(const s of t)await this.E1t(s)}_kt(t){return this.Dkt(this.QIt.Ff(t))}_0t(t){return this.hft._0t(t.name,t.params)}a4(t){if(this.pO())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}NR(){return this.MPt}aFt(t){const s=U.Xn(U.Event,t,!1);return s.runtime=this.MPt,s}LPt(){this.MPt=new self.tO(this),this.hPt={tick:this.aFt("tick")}}PPt(){const t={};for(const s of this.j4t)t[s.n1t()]={value:s.qR(),enumerable:!0,writable:!1};this.MPt.GO(t)}kPt(){const t={};for(const s of this.DO().f1t())t[s.n1t()]=s.r1t();this.MPt.NO(t)}F3(){return this.SPt}eP(t,s){this.wPt.set(t,s)}VP(t){return this.wPt.get(t)}X4(t){if(!(t instanceof self.tP))throw new TypeError("expected IObjectClass");const s=this.VP(t);if(s&&s instanceof U.tut)return s;throw new Error("invalid IObjectClass")}lP(t){if(!(t instanceof self.oF))throw new TypeError("expected IInstance");const s=this.VP(t);if(s&&s instanceof U.Instance)return s;throw new Error("invalid IInstance")}q3(t){if(!(t instanceof self.z5))throw new TypeError("expected IWorldInstance");const s=this.VP(t);if(s&&s instanceof U.Instance)return s;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=U.q3t._b,self.C3_InitRuntime=(t,s)=>t.WGt(s)}{const Aa=self.Ls;Aa.cPt=class extends Aa.qn{constructor(t,s){super(),this.Jc=t,this.xFt=new Map,this.IFt=0,this.CFt=s.inputPort,s.outputPort.onmessage=t=>this.GFt(t),this.NFt=s.maxNumWorkers,this.EFt=1,this.DFt=!1,this._Ft=!1}async WGt(){}gFt(){return this.NFt}lFt(t){this.CFt.postMessage({type:"_import_scripts",scripts:t})}fFt(t,s){this.CFt.postMessage({type:"_send_blob",blob:t,id:s})}dFt(t,s){this.CFt.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}HPt(t,s,i,e,n,r){if(i=i||[],"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const h=this.IFt++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:h,params:s,transferables:i},a=new Promise((t,s)=>{this.xFt.set(h,{resolve:t,progress:e,reject:s,AFt:!1,maxWorkerNum:r})});return n&&n.n0(()=>this.LFt(h)),this.CFt.postMessage(o,i),this.OFt(),a}pFt(t,s,i,e){if(i=i||[],"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const n=this.IFt++,r={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:n,params:s,transferables:i};this.CFt.postMessage(r,i)}LFt(t){const s=this.xFt.get(t);s&&(s.AFt=!0,s.resolve=null,s.progress=null,s.reject=null,this.CFt.postMessage({type:"_cancel",jobId:t}))}GFt(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.RFt(e,s.result);break;case"progress":this.PFt(e,s.progress);break;case"error":this.kFt(e,s.error);break;case"ready":this.FFt();break;default:throw new Error(`unknown message from worker '${i}'`)}}RFt(t,s){const i=this.xFt.get(t);if(!i)throw new Error("invalid job ID");i.AFt||i.resolve(s),this.xFt.delete(t)}PFt(t,s){const i=this.xFt.get(t);if(!i)throw new Error("invalid job ID");!i.AFt&&i.progress&&i.progress(s)}kFt(t,s){const i=this.xFt.get(t);if(!i)throw new Error("invalid job ID");i.AFt||i.reject(s),this.xFt.delete(t)}FFt(){this.DFt&&(this.DFt=!1,this.EFt++,this.EFt<this.NFt?this.OFt():this.CFt.postMessage({type:"_no_more_workers"}))}jFt(){let t=0,s=[...this.xFt.values()].sort((t,s)=>{const i=t.maxWorkerNum||1/0,e=s.maxWorkerNum||1/0;return i-e});for(const i of s){const e=i.maxWorkerNum||1/0;t<e&&t++}return t}async OFt(){if(!(this.EFt>=this.NFt||this.DFt||this._Ft||this.jFt()<=this.EFt))try{this.DFt=!0;const t=await this.Jc.h4("runtime","create-job-worker");t.outputPort.onmessage=t=>this.GFt(t)}catch(t){this._Ft=!0,this.DFt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.EFt} so far)`,t)}}}}self.C3_Shaders={};{let w=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const n=""+i,r=""+e;return n<r?-1:r<n?1:0}},S=(w,self.Ls),i=null,e="",n="",r=[],h="",o="",a="",T=S.Xn(S.i0t);S.O9.L9=class extends S.hbt{constructor(t){super(t),this.Xft=this.Jc.DO().g6(),this.Pct=this.Jc.DO().WO(),this.zFt=0,this.BFt=0,this.UFt=new Map}Kn(){super.Kn()}n4(){this.Jc.n4()}HF(t){this.Jc.HF(t,null,null)}WFt(t,s){return i&&t===e&&s===n||(i=new RegExp(t,s),e=t,n=s),i.lastIndex=0,i}QFt(t,s,i){if(t!==h||s!==o||i!==a){const e=this.WFt(s,i);r=t.match(e),h=t,o=s,a=i}return r}async JFt(t,s){if(s.length){this.zFt+=s.length;const i=[];for(const e of s)i.push(t.e9(e));await S.Hh(i,()=>{this.BFt++}),this.BFt++,this.BFt===this.zFt&&(this.BFt=0,this.zFt=0,this.Jc.HF(S.O9.L9.A9.YFt,null,null))}}VFt(t,s){for(const i of s)0===i.gP()&&t.o9(i)}HFt(){return T}qFt(s){const i=this.Jc.DO(),t=i.WO(),e=t.p6(),n=e.PO(),r=n.d6(),h=e.kft(),o=t.m6(n),a=i.g6(),u=a.m6();if(u.t0t(s),h)for(let t=0;t<s&&!u.I6();++t)i.S6(r),u.v6(t),n.T6(e,o),i.b6(r);else for(let t=0;t<s&&!u.I6();++t)u.v6(t),n.T6(e,o);return t.C6(),a.C6(),!1}*ZFt(s){const i=this.Jc.DO(),t=i.WO(),e=t.p6(),n=e.PO(),r=n.d6(),h=e.kft(),o=t.m6(n),a=i.g6(),u=a.m6();if(u.t0t(s),h)for(let t=0;t<s&&!u.I6();++t)i.S6(r),u.v6(t),yield*n.bgt(e,o),i.b6(r);else for(let t=0;t<s&&!u.I6();++t)u.v6(t),yield*n.bgt(e,o);return t.C6(),a.C6(),!1}XFt(){const s=this.Jc.DO(),t=s.WO(),i=t.p6(),e=i.PO(),n=e.d6(),r=i.kft(),h=t.m6(e),o=s.g6(),a=o.m6();if(r)for(let t=0;!a.I6();++t)s.S6(n),a.v6(t),e.T6(i,h)||a.tB(),s.b6(n);else for(let t=0;!a.I6();++t)a.v6(t),e.T6(i,h)||a.tB();return t.C6(),o.C6(),!1}*KFt(){const s=this.Jc.DO(),t=s.WO(),i=t.p6(),e=i.PO(),n=e.d6(),r=i.kft(),h=t.m6(e),o=s.g6(),a=o.m6();if(r)for(let t=0;!a.I6();++t){s.S6(n),a.v6(t);const u=yield*e.bgt(i,h);u||a.tB(),s.b6(n)}else for(let t=0;!a.I6();++t){a.v6(t);const l=yield*e.bgt(i,h);l||a.tB()}return t.C6(),o.C6(),!1}$Ft(t,s,i){const e=this.Jc.DO(),n=e.WO(),r=n.p6(),h=r.PO(),o=h.d6(),a=r.kft(),u=n.m6(h),l=e.g6(),c=l.m6();if(c.y6(t),c.t0t(i),i<s)if(a)for(let t=s;t>=i&&!c.I6();--t)e.S6(o),c.v6(t),h.T6(r,u),e.b6(o);else for(let t=s;t>=i&&!c.I6();--t)c.v6(t),h.T6(r,u);else if(a)for(let t=s;t<=i&&!c.I6();++t)e.S6(o),c.v6(t),h.T6(r,u),e.b6(o);else for(let t=s;t<=i&&!c.I6();++t)c.v6(t),h.T6(r,u);return n.C6(),l.C6(),!1}*tjt(t,s,i){const e=this.Jc.DO(),n=e.WO(),r=n.p6(),h=r.PO(),o=h.d6(),a=r.kft(),u=n.m6(h),l=e.g6(),c=l.m6();if(c.y6(t),c.t0t(i),i<s)if(a)for(let t=s;t>=i&&!c.I6();--t)e.S6(o),c.v6(t),yield*h.bgt(r,u),e.b6(o);else for(let t=s;t>=i&&!c.I6();--t)c.v6(t),yield*h.bgt(r,u);else if(a)for(let t=s;t<=i&&!c.I6();++t)e.S6(o),c.v6(t),yield*h.bgt(r,u),e.b6(o);else for(let t=s;t<=i&&!c.I6();++t)c.v6(t),yield*h.bgt(r,u);return n.C6(),l.C6(),!1}sjt(i){const t=i.pP(),s=t.dP();if(0!==s.length){const e=this.Jc.DO(),n=e.WO(),r=n.p6(),h=r.PO(),o=h.d6(),a=r.kft(),u=n.m6(h),l=e.g6(),c=l.m6(),f=i.TF(),d=T.m6();if(S.Ah(d,s),c.t0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.I6();++t){e.S6(o);const p=d[t];i.pP().Zct(p),f&&p.Rpt(),c.v6(t),h.T6(r,u),e.b6(o)}else{t.Vct(!1);const m=t.Hct();S.Nh(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.I6();++t){const g=d[t];m[0]=g,f&&g.Rpt(),c.v6(t),h.T6(r,u)}}n.C6(),l.C6(),S.Nh(d),T.C6()}return!1}*ijt(i){const t=i.pP(),s=t.dP();if(0!==s.length){const e=this.Jc.DO(),n=e.WO(),r=n.p6(),h=r.PO(),o=h.d6(),a=r.kft(),u=n.m6(h),l=e.g6(),c=l.m6(),f=i.TF(),d=T.m6();if(S.Ah(d,s),c.t0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.I6();++t){e.S6(o);const p=d[t];i.pP().Zct(p),f&&p.Rpt(),c.v6(t),yield*h.bgt(r,u),e.b6(o)}else{t.Vct(!1);const m=t.Hct();S.Nh(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.I6();++t){const g=d[t];m[0]=g,f&&g.Rpt(),c.v6(t),yield*h.bgt(r,u)}}n.C6(),l.C6(),S.Nh(d),T.C6()}return!1}ejt(i,t){const s=i.pP(),e=s.dP();if(0!==e.length){const n=this.Jc.DO(),r=n.WO(),h=n.q0t(),o=r.p6(),a=o.PO(),u=a.d6(),l=o.kft(),c=r.m6(a),f=n.g6(),d=f.m6(),p=i.TF(),m=T.m6();S.Nh(m),d.t0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.kwt(1,t)]);if(m.sort(w),1===t&&m.reverse(),l)for(let t=0,s=m.length;t<s&&!d.I6();++t){n.S6(u);const g=m[t][0];i.pP().Zct(g),p&&g.Rpt(),d.v6(t),a.T6(o,c),n.b6(u)}else{s.Vct(!1);const y=s.Hct();S.Nh(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.I6();++t){const M=m[t][0];y[0]=M,p&&M.Rpt(),d.v6(t),a.T6(o,c)}}r.C6(),f.C6(),S.Nh(m),T.C6()}return!1}*njt(i,t){const s=i.pP(),e=s.dP();if(0!==e.length){const n=this.Jc.DO(),r=n.WO(),h=n.q0t(),o=r.p6(),a=o.PO(),u=a.d6(),l=o.kft(),c=r.m6(a),f=n.g6(),d=f.m6(),p=i.TF(),m=T.m6();S.Nh(m),d.t0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.kwt(1,t)]);if(m.sort(w),1===t&&m.reverse(),l)for(let t=0,s=m.length;t<s&&!d.I6();++t){n.S6(u);const g=m[t][0];i.pP().Zct(g),p&&g.Rpt(),d.v6(t),yield*a.bgt(o,c),n.b6(u)}else{s.Vct(!1);const y=s.Hct();S.Nh(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.I6();++t){const M=m[t][0];y[0]=M,p&&M.Rpt(),d.v6(t),yield*a.bgt(o,c)}}r.C6(),f.C6(),S.Nh(m),T.C6()}return!1}rjt(t,s){let i=this.UFt.get(t);if(!i){if(!s)return null;i={hjt:null,ojt:new Map},this.UFt.set(t,i)}return i}ajt(t,s,i,e,n){s.OO().Fgt(i,s.jO()),e&&t.b6(n)}*ujt(t,s,i,e,n){yield*s.OO().jgt(i,s.jO()),e&&t.b6(n)}}}{const La=self.Ls;La.O9.L9.bCt=class extends La.qn{constructor(t){super(),this.Nct=t,this.Jc=t.w4(),this.Jbt=t.iP()}Ebt(){}Kn(){this.Nct=null,this.Jc=null,this.Jbt=null}}}{const Oa=self.Ls;Oa.O9.L9.Instance=class extends Oa.qn{constructor(t,s){super(),this.wi=t,this.Nct=this.wi.uF(),this.Xbt=this.Nct.pSt(),this.Jc=this.wi.w4()}Kn(){this.wi=null,this.Nct=null,this.Xbt=null,this.Jc=null}}}{const D=self.Ls,Ra=[];D.O9.L9.A9={ljt(){return!0},_9(){return!0},Q9(){return!0},pkt(){return!0},mkt(){return!0},ZO(){return this.Jc.ZO()},wmt(){const t=this.Jc.H0t();return!t.Aft()&&!t.Dft()},cjt(){let t=this.Jc.q0t(),s=t.xwt(),i=s.get("TriggerOnce_lastTick");void 0===i&&(i=-1,s.set("TriggerOnce_lastTick",-1));const e=this.Jc.stt();return s.set("TriggerOnce_lastTick",e),this.Jc.Qkt()||i!==e-1},fjt(t){const s=this.Jc.q0t(),i=s.xwt(),e=i.get("Every_lastTime")||0,n=this.Jc.i3(),r=(i.has("Every_seconds")||i.set("Every_seconds",t),i.get("Every_seconds"));return e+r<=n?(i.set("Every_lastTime",e+r),n>=i.get("Every_lastTime")+.04&&i.set("Every_lastTime",n),i.set("Every_seconds",t),!0):(n<e-.1&&i.set("Every_lastTime",n),!1)},Rdt(t){const s=this.Jc.DO().g1t(t);return s&&s.Rdt()},Y3t(){return this.Jc.Y3t()},di(){return D.ei.di},ZPt(){return!0},djt(){return!0},pjt(){return!0},iFt(){return!0},oFt(){return!0},nFt(){return!0},rFt(){return!0},mjt(t){return!!this.Jc.J3(t)},gjt(t){switch(t){case 0:return"browser"===D.ei.ci;case 1:return"iOS"===D.ei.ni;case 2:return"Android"===D.ei.ni;case 8:return"cordova"===D.ei.ci;case 9:return"scirra-arcade"===this.Jc.hR();case 10:return"nwjs"===D.ei.ci;case 13:return"windows-uwp"===this.Jc.hR();default:return!1}},yjt(t,s,i){const e=this.WFt(s,i);return e.test(t)},Mjt(t,s,i){return D.compare(t,s,i)},wjt(t,s,i){return s<=t&&t<=i},Sjt(t,s,i){return D.compare(t.Vit(),s,i)},Tjt(t){return!!t.Vit()},bjt(t,s){const i=this.Jc.i3();if(0!==t)return D.compare(i,t,s);{const e=this.Jc.q0t(),n=e.xwt();return!n.get("CompareTime_executed")&&s<=i&&(n.set("CompareTime_executed",!0),!0)}},vjt(t){return isNaN(t)},E2t(t,s,i){return D.mr(D.ur(t),D.ur(i))<=D.ur(s)},D2t(t,s){return D.yr(D.ur(t),D.ur(s))},QSt(t,s,i){let e=D.ur(t),n=D.ur(s),r=D.ur(i),h=!D.yr(r,n);return h?!(!D.yr(e,n)&&D.yr(e,r)):D.yr(e,n)&&!D.yr(e,r)},xjt(t,s){return"number"==typeof t?0===s:1===s},Ijt(t){return!!t},ddt(t){return t.toLowerCase()===this.Jc.DO().ydt()},Cjt(t,i,e,n){if(!t)return!1;let s=this.HFt(),r=s.m6(),h=t.pP(),o=(D.Ah(r,h.dP()),h.zct()&&D.Nh(h.qct()),this.Jc.q0t()),a=0;for(let t=0,s=r.length;t<s;++t){const l=r[t];r[a]=l,i=o.kwt(1,t),n=o.kwt(3,t),D.compare(i,e,n)?++a:h.Yct(l)}D.Gh(r,a),h.Xct(r);const u=!!r.length;return D.Nh(r),s.C6(),t._gt(),u},Gjt(t,s){if(!t)return!1;let i=this.HFt(),e=i.m6(),n=t.pP(),r=(D.Ah(e,n.dP()),n.zct()&&D.Nh(n.qct()),this.Jc.q0t()),h=0;for(let t=0,s=e.length;t<s;++t){const a=e[t];e[h]=a,r.kwt(1,t)?++h:n.Yct(a)}D.Gh(e,h),n.Xct(e);const o=!!e.length;return D.Nh(e),i.C6(),t._gt(),o},Njt(t,i,e){if(!t)return!1;const s=t.pP(),n=s.dP();if(0===n.length)return!1;let r=this.Jc.q0t(),h=null,o=0;for(let t=0,s=n.length;t<s;++t){const a=n[t];e=r.kwt(2,t),(null===h||0===i&&e<o||1===i&&e>o)&&(o=e,h=a)}return s.eft(h),t._gt(),!0},Ejt(t,s){if(!t)return!1;const i=t.pP(),e=i.dP();if((s=Math.floor(s))>=e.length)return!1;const n=e[s];return i.eft(n),t._gt(),!0},Djt(t){if(!t)return!1;const s=t.pP(),i=s.dP(),e=Math.floor(this.Jc.C3()*i.length);if(e>=i.length)return!1;const n=i[e];return s.eft(n),t._gt(),!0},_jt(t){if(!t)return!1;if(!t.gP())return!1;const s=t.pP();return s.Vct(!0),t._gt(),!0},Ajt(t,i,e){if(!t)return!1;const n=t.pP(),s=n.dP(),r=this.Jc.PO(),h=r.nft(),o=this.Jc.q0t().wwt();n.zct()?(D.Ah(Ra,s),n.jct(),n.Vct(!1)):h?(D.Ah(Ra,n.qct()),D.Nh(n.qct())):(D.Ah(Ra,n.Hct()),D.Nh(n.Hct()));for(let t=0,s=Ra.length;t<s;++t){const a=Ra[t];D.xor(a.Z3().Zj(i,e),o)?n.Jct(a):n.Yct(a)}return t._gt(),D.xor(!!n.Hct().length,o)},Ljt(s){if(!s)return!1;let i=s.SY(),e=null,n=this.Jc.fGt();for(let t=n.length-1;0<=t;--t){const r=n[t];if(i){if(r.uF().wSt(s)){e=r;break}}else if(r.uF()===s){e=r;break}}if(!e){const h=s.dP();h.length&&(e=h.at(-1))}if(!e)return!1;const t=s.pP();return t.eft(e),s._gt(),!0},Ojt(t){return this.Jc.gTt()?this.ZFt(t):this.qFt(t)},Rjt(){return this.Jc.gTt()?this.KFt():this.XFt()},Pjt(t,s,i){return this.Jc.gTt()?this.tjt(t,s,i):this.$Ft(t,s,i)},Z0(t){return this.Jc.gTt()?this.ijt(t):this.sjt(t)},kjt(t,s,i){return this.Jc.gTt()?this.njt(t,i):this.ejt(t,i)},Fjt(t){return!!t&&t.Sk()},jjt(t){return!!t&&t.Gk()},zjt(t){return!!t&&t.xk()},Bjt(t){return!!t&&!t.gP()},Ujt(t,s,i){return!!t&&D.compare(100*t.hD(),s,i)},Wjt(t){const s=this.Jc.G3();return!!s&&s.B7(t)},YFt(){return!0},Qjt(){return 0<this.zFt},Jjt(t,s){const i=this.Jc.wNt();return!!i&&!!s&&!!i.$at(t,s)}}}{let m=function(t,s){const i=t[0],e=s[0],n=i-e;if(0!=n)return n;const r=t[1],h=s[1];return r-h},g=function(t,s){return t[1]-s[1]};m,g;const Pa=self.Ls,ka=[],Fa=[],ja=Pa.Xn(Pa.Rect),za=Pa.Xn(Pa.Ao),Ba=[];Pa.O9.L9.xnt={Yjt(t,s){t.Aet(s)},Vjt(t,s){t.oe()&&"number"!=typeof s&&(s=parseFloat(s)),t.Aet(t.Vit()+s)},Hjt(t,s){t.oe()&&t.Aet(t.Vit()-s)},qjt(t,s){t.Aet(!!s)},Zjt(t){t.Aet(!t.Vit())},Xjt(t){t.Aet(t.V0t())},Kjt(t){this.Jc.DO().p1t(t)},$jt(t,s,i,e,n,r){if(t&&s){const h=this.Jc.MP(t,s,i,e,n,r);if(h){n&&s.wP(h);const o=this.Jc.DO(),a=(o.SP(!0),h.TP(),o.SP(!1),new Map);h.lNt(a,t,n);for(const[u,l]of a)u.pP().Kct(l)}}},t5t(t,s,i,e,n,r){if(t&&s){const h=this.Jc.skt(t);h&&Pa.O9.L9.xnt.$jt.call(this,h,s,i,e,n,r)}},MY(n,r,h,o,a,t,u,l,c,f,d){if(n){let s=this.Jc.H3(),i=s;if(t){const p=this.Jc.D3().Gq(t);if(!p)return;i=p}let e=null;if(!("number"!=typeof u||0<=u)||(e=i.X3(u))){let t=null;if(!("number"!=typeof l||0<=l)||(t=s.X3(l))){ja.set(r,h,o,a);const m=i.MY(n,ja,e,t,c,f,d);n.pP().Xct(m),n._gt()}}}},s5t(){const t=this.Xft;t.Vft()&&t.Jft().tB()},Pdt(t,s){const i=this.Jc.DO().g1t(t);i&&(0===s?i.Pdt(!1):1===s?i.Pdt(!0):i.Pdt(!i.Rdt()))},i5t(t){this.Jc.o3(t)},e5t(t,s){if(s<0&&(s=0),t){const i=t.pP(),e=i.dP();for(const n of e)n.o3(s)}},n5t(t){if(t){const s=t.pP(),i=s.dP();for(const e of i)e.NF()}},Th(t){if(!(t<0))return this.Jc.DO().Z1t().$2t(t),!0},HO(t){return this.Jc.DO().Z1t().tbt(t),!0},r5t(){const t=this.Jc.DO();return t.Z1t().sbt(t.fdt()),!0},YO(t){this.Jc.DO().YO(t)},async I3t(t,s,i,e,n,r){const h=this.Jc.lR();h&&(this.n4(),await h.I3t(0===t?"image/png":"image/jpeg",s/100,i,e,n,r),await this.Jc.ZF(Pa.O9.L9.A9.djt,null))},h5t(t,s){if(!(t<=0||s<=0)){this.Jc.ZOt(t,s),this.Jc.H3().PH();const i=this.Jc.lR();i&&("off"!==i.WOt()&&this.Jc.ekt(t,s),i.DG(i.fU(),i.dU(),!0),this.Jc.n4())}},o5t(t){const s=this.Jc.lR();s&&"off"!==s.WOt()&&(s.e3t(0!==t?"high":"low"),s.DG(s.fU(),s.dU(),!0))},cit(t){this.Jc.Hkt(t)},a5t(){this.Jc.qkt()},u5t(t){this.Jc.Zkt(t)},l5t(t){this.Jc.o2t(t)},c5t(t){},f5t(){for(const t of this.Jc.D3().L3())t.tq()},d5t(t){this.Jc.Jkt(0!==t)},p5t(t,s){this.Jc.I3(1/t),this.Jc.b3(1/s)},m5t(t,s){this.Jc.b3(t),this.Jc.I3(s)},g5t(t){this.Jc.w3(["vsync","unlimited-tick","unlimited-frame"][t])},y5t(t,i){if(t){const s=t.pP(),e=s.dP(),n=ka,r=Fa,h=this.Jc.H3(),o=t.SY(),a=t.tMt();for(let t=0,s=e.length;t<s;++t){const u=e[t],l=u.Z3();if(l){let t;t=o?u.frt(i+u.uF().$yt(a)):u.frt(i),n.push([l.X3().$L(),l.K3()]),r.push([u,t])}}if(n.length){n.sort(m),r.sort(g);let i=!1;for(let t=0,s=n.length;t<s;++t){const c=r[t][0],f=h.t4(n[t][0]),d=n[t][1],p=f.s4();p[d]!==c&&((p[d]=c).Z3().i4(f,!0),f.e4(c),i=!0)}i&&this.Jc.n4(),Pa.Nh(ka),Pa.Nh(Fa)}}},V4(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.Jc.hO().V4(t,s)},M5t(t){if(!this.Jc.Cg()){const s=this.Jc.D3();s.R3()||s.P3(t)}},w5t(t){if(!this.Jc.Cg()){const s=this.Jc.D3();if(!s.R3()){const i=s.Gq(t);i&&s.P3(i)}}},S5t(t){if(!this.Jc.Cg()){const s=this.Jc.D3();if(!s.R3()){const i=s.L3(),e=i.indexOf(s.G3());if((!t||0!==e)&&(t||e!==i.length-1)){const n=i[e+(t?-1:1)];s.P3(n)}}}},T5t(){if(!this.Jc.Cg()){const t=this.Jc.D3();t.R3()||(t.P3(t.G3()),this.Jc.DO().S1t())}},b5t(t,s){t&&t.Mk(s)},v5t(t,s){t&&t.bk(s)},x5t(t,s){t&&t.Ik(s)},I5t(t,s){t&&t.aD(s/100)},C5t(t,s){t&&t.Nk(s)},G5t(t,s){t&&t.Dk(s)},N5t(t,s){t&&t.LP(Pa.ur(+s))},E5t(t,s,i){t&&(t.Yk(!0),t.RP(s),t.kP(i))},D5t(t){t&&t.Yk(!1)},_5t(t,s,i){t&&t.$Y(s/100,i/100)},A5t(t,s){t&&t.KS(+s)},L5t(t,s){if(t){za.ua(s),za.rr();const i=t.Jk();i.$o(za)||(i.Jo(za),this.n4())}},O5t(t,s){t&&t.jk(s)},R5t(t,s){t&&t.RS(s)},P5t(t,s,i){if(t){const e=t.CP(),n=e.nnt(i);if(n){const r=1===s;n.Cpt()!==r&&(n.P_t(r),t.cz(),this.Jc.n4())}}},k5t(t,s,i,e){if(t){const n=t.CP(),r=n.nnt(s);if(r){i=Math.floor(i);const h=r.Lv().Rv(i);if(h){"color"===h?(za.ua(e),e=za):"percent"===h&&(e/=100);const o=n.dz(r.$L(),i,e);o&&r.Cpt()&&this.Jc.n4()}}}},F5t(t,s){t&&t.Uk(s)},j5t(t){this.Jc.H3()._P(+t)},z5t(t){this.Jc.H3().LP(Pa.ur(+t))},B5t(t,s){const i=this.Jc.H3(),e=i.CP(),n=e.nnt(s);if(n){const r=1===t;n.Cpt()!==r&&(n.P_t(r),i.cz(),this.Jc.n4())}},U5t(t,s,i){const e=this.Jc.H3(),n=e.CP(),r=n.nnt(t);if(r){s=Math.floor(s);const h=r.Lv().Rv(s);if(h){"color"===h?(za.ua(i),i=za):"percent"===h&&(i/=100);const o=n.dz(r.$L(),s,i);o&&r.Cpt()&&this.Jc.n4()}}},W5t(t,s){const i=this.Jc.H3();i.ek(t/100,s/100)},Q5t(t){const s=this.Jc.H3();0===t?s.hk():s.ak()},J5t(t){const s=this.Jc.H3();s.RP(t)},Y5t(t){const s=this.Jc.H3();s.kP(t)},V5t(t,s){const i=this.Jc.H3();i.RP(t),i.kP(s)},H5t(t){if(t){const s=t.hTt();if(s){const i=s.Z3();if(i){const e=this.Jc.H3();e.RP(i.YS()),e.kP(i.qS())}}}},HP(t,s,i){const e=this.Jc.H3();try{e.HP(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},ZP(t,s,i){if(t){const e=this.Jc.H3();try{e.ZP(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},KP(t){if(t){const s=this.Jc.H3();s.KP(t)}},sk(){this.Jc.H3().sk()},async q5t(t){const s=this.Jc.G3();if(s&&t&&!this.Jc.Cg()){const i=t.SY()?t.vmt():[t];await this.JFt(s,i)}},async Z5t(t){await Pa.O9.L9.xnt.q5t.call(this,this.Jc.skt(t))},X5t(t){const s=this.Jc.G3();if(s&&t){const i=t.SY()?t.vmt():[t];this.VFt(s,i)}},K5t(t){Pa.O9.L9.xnt.X5t.call(this,this.Jc.skt(t))},$5t(){const t=this.Jc.G3();if(t){const s=t.t9();this.VFt(t,s)}},async tzt(t){const s=this.Jc.G3();t&&s&&!this.Jc.Cg()&&await this.JFt(s,t.Z7())},async szt(t){const s=this.Jc.G3(),i=this.Jc.D3().Gq(t);i&&s&&!this.Jc.Cg()&&await this.JFt(s,i.Z7())},JO(t){const s=this.Pct.UO();if(s)switch(s.QO()){case 1:"number"==typeof t&&s.JO(t);break;case 2:"string"==typeof t&&s.JO(t);break;case 3:s.JO(t)}},izt(t,s,i){const e=this.rjt(t.toLowerCase(),!0),n=e.ojt,r=s.toLowerCase(),h=(n.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`),Pa.first(n.values())||e.hjt);if(h){const o=0!==h.zO(),a=0!==i.zO();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`)}n.set(r,i)},ezt(t,s){const i=this.rjt(t.toLowerCase(),!0),e=(i.hjt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),Pa.first(i.ojt.values())||i.hjt);if(e){const n=0!==e.zO(),r=0!==s.zO();if(n!=r)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}i.hjt=s},nzt(t,s,i){const e=this.Jc,n=e.gTt()?Ba:null,r=(i=Math.floor(i),this.rjt(t.toLowerCase(),!1));if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),n;let h=r.ojt.get(s.toLowerCase());if(!h){if(!r.hjt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),n;h=r.hjt,i=0}if(!h.kl())return n;if(0!==h.zO())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),n;const o=e.DO(),a=o.PO(),u=a.RO(),l=0<u.length,c=(l&&(h.jO()?o.S6(u):o.H1t(u)),[]),f=o.Udt(a);if(f){const p=f.Qdt();for(let t=i,s=p.length;t<s;++t)c.push(p[t].Vit())}const d=h.Qdt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].V0t());return e.gTt()?this.ujt(o,h,c,l,u):this.ajt(o,h,c,l,u)}}}{const _=self.Ls;_.O9.L9.Int={rzt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},O(t){return t.toString()},Wt(t){return"string"==typeof t?t.length:0},random(t,s){return void 0===s?this.Jc.C3()*t:this.Jc.C3()*(s-t)+t},Fyt(...t){const s=Math.floor(this.Jc.C3()*t.length);return t[s]},hzt(t,...s){return"number"!=typeof t&&(t=0),s[t=_.rr(Math.floor(t),0,s.length-1)]},pi(){return Math.PI},ozt(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},azt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(_.ur(t))},cos(t){return Math.cos(_.ur(t))},tan(t){return Math.tan(_.ur(t))},asin(t){return _.lr(Math.asin(t))},acos(t){return _.lr(Math.acos(t))},atan(t){return _.lr(Math.atan(t))},exp(t){return Math.exp(t)},qt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e<t&&(e=t)}return e},min(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e>t&&(e=t)}return e},rr(t,s,i){return _.rr(t,s,i)},Gt(t,s,i,e){return _.cr(t,s,i,e)},angle(t,s,i,e){return _.lr(_.pr(t,s,i,e))},Lt(t,s,i){return _.Lt(t,s,i)},br(t,s,i){return _.br(t,s,i)},Ir(t,s,i,e){return _.Ir(t,s,i,e)},Cr(t,s,i,e,n){return _.Cr(t,s,i,e,n)},Gr(t,s,i){return _.Gr(t,s,i)},uzt(t,s){return _.lr(_.mr(_.ur(t),_.ur(s)))},lzt(t,s,i){return _.lr(_.Mr(_.ur(t),_.ur(s),i))},czt(t,s,i){return _.lr(_.gr(_.ur(t),_.ur(s),_.ur(i)))},fzt(t,s,i){return(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s},dzt(t,s){return(t|=0)^1<<(0|s)},pzt(t,s){return(t|=0)&1<<(0|s)?1:0},mzt(){return"\n"},gzt(t){return"string"==typeof t?t.toUpperCase():""},yzt(t){return"string"==typeof t?t.toLowerCase():""},left(t,s){return"string"==typeof t?t.substr(0,s):""},mid(t,s,i){return"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i)},right(t,s){return"string"==typeof t?t.substr(Math.max(t.length-s,0)):""},trim(t){return"string"==typeof t?t.trim():""},Mzt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},wzt(t,s){return"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0},find(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(_.ne(s),"i")):-1},Szt(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(_.ne(s),"")):-1},replace(t,s,i){return"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(_.ne(s),"gi"),i):"string"==typeof t?t:""},Tzt(t,...i){let e=t;for(let t=0,s=i.length;t<s;++t)e=e.replaceAll(`{${t}}`,i[t].toString());return e},bzt(t,s,i){const e=this.WFt(s,i);return t?t.search(e):-1},vzt(t,s,i,e){const n=this.WFt(s,i);return t?t.replace(n,e):""},xzt(t,s,i){const e=this.QFt(t.toString(),s,i);return e?e.length:0},Izt(t,s,i,e){e=Math.floor(e);const n=this.QFt(t.toString(),s,i);return!n||e<0||e>=n.length?"":n[e]},Czt(t,s){let i=t<0?"-":"",e=s-(t=t<0?-t:t).toString().length;return(i+="0".repeat(Math.max(e,0)))+t.toString()},Gzt(t){return encodeURIComponent(t)},Nzt(t){return decodeURIComponent(t)},XO(){return this.Jc.nX()},timescale(){return this.Jc.h3()},Ezt(){return(Date.now()-this.Jc.Okt())/1e3},Dzt(){return Date.now()},time(){return this.Jc.i3()},tickcount(){return this.Jc.stt()},_zt(){return this.Jc.kkt()},fps(){return this.Jc.a3()},Azt(){return this.Jc.d3()},Lzt(){return this.Jc.g3()},Ozt(){return this.Jc.lR().MR()},Rzt(){return this.Jc.lR().SR()},Pzt(){return this.Jc.gO()},kzt(){return this.Jc.MO()},Fzt(){return this.Jc.gO()},jzt(){return this.Jc.MO()},zzt(){return this.Jc.H3().PP()},Bzt(){return this.Jc.H3().FP()},Uzt(){return this.Jc.H3().kc()},Wzt(){return this.Jc.H3().AP()},Qzt(){return _.lr(this.Jc.H3().OP())},Jzt(){return this.Jc.H3().Jp()},Yzt(){return this.Jc.H3().im()},Vzt(){return 100*this.Jc.H3().YY()},Hzt(){return 100*this.Jc.H3().VY()},qzt(t){const s=this.Jc.H3().X3(t);return s?s.JY().uu():0},Zzt(t){const s=this.Jc.H3().X3(t);return s?s.JY().lu():0},Xzt(t){const s=this.Jc.H3().X3(t);return s?s.JY().cu():0},Kzt(t){const s=this.Jc.H3().X3(t);return s?s.JY().fu():0},$zt(t){const s=this.Jc.H3().X3(t);return s?s.JY().width():0},tBt(t){const s=this.Jc.H3().X3(t);return s?s.JY().height():0},sBt(t){const s=this.Jc.H3().X3(t);if(s){const i=s.JY();return(i.uu()+i.cu())/2}return 0},iBt(t){const s=this.Jc.H3().X3(t);if(s){const i=s.JY();return(i.lu()+i.fu())/2}return 0},eBt(t,s,i){const e=this.Jc.H3().X3(t);return e?e.Zk(s,i)[0]:0},nBt(t,s,i){const e=this.Jc.H3().X3(t);return e?e.Zk(s,i)[1]:0},rBt(t,s,i){const e=this.Jc.H3().X3(t);return e?e.tF(s,i)[0]:0},hBt(t,s,i){const e=this.Jc.H3().X3(t);return e?e.tF(s,i)[1]:0},oBt(t,s,i,e){const n=this.Jc.H3(),r=n.X3(t),h=n.X3(s);if(!r||!h||r===h)return i;const[o,a]=r.tF(i,e);return h.Zk(o,a)[0]},aBt(t,s,i,e){const n=this.Jc.H3(),r=n.X3(t),h=n.X3(s);if(!r||!h||r===h)return e;const[o,a]=r.tF(i,e);return h.Zk(o,a)[1]},uBt(t){const s=this.Jc.H3().X3(t);return s?s.Ek():0},lBt(t){const s=this.Jc.H3().X3(t);return s?_.lr(s.Ak()):0},cBt(t){const s=this.Jc.H3().X3(t);return s?100*s.hD():0},fBt(t){const s=this.Jc.H3().X3(t);return s?s._k():0},dBt(t){const s=this.Jc.H3().X3(t);return s?s.PP():0},pBt(t){const s=this.Jc.H3().X3(t);return s?s.FP():0},mBt(t){const s=this.Jc.H3().X3(t);return s?100*s.Ok():0},gBt(t){const s=this.Jc.H3().X3(t);return s?100*s.Pk():0},yBt(t){const s=this.Jc.H3().X3(t);return s?s.XS():0},MBt(t){const s=this.Jc.H3().X3(t);return s?s.$L():-1},wBt(){const t=this.Jc.lR();return t?t.G3t():""},SBt(t){const s=this.Xft;if(!s.Vft())return 0;if(t){const i=s.qft(t);return i?i.$L():0}return s.Jft().$L()},TBt(){return this.Jc.Xkt()},bBt(t,s,...i){const e=this.rjt(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let n=e.ojt.get(s.toLowerCase());if(!n){if(!e.hjt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;n=e.hjt}const r=n.zO(),h=n.AO();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!n.kl())return h;const o=this.Jc,a=o.DO(),u=a.PO(),l=u.RO(),c=0<l.length,f=(c&&(n.jO()?a.S6(l):a.H1t(l)),n.Qdt());for(let t=i.length,s=f.length;t<s;++t)i.push(f[t].V0t());const d=n.OO(),p=d.FO(d.RO(),n.jO(),r,h,...i);return c&&a.b6(l),p},vBt(){return this.Jc.eO().OQ()},xBt(){return 0===this.zFt?1:this.BFt/this.zFt},renderer(){return this.Jc.l3t()?"webgpu":"webgl"},IBt(){return this.Jc.l3t()?this.Jc.l3t().GetAdapterInfoString():this.Jc.u3t().m_()},CBt(){let t=this.Jc.mS().Kw();return Math.round(100*t/1048576)/100},GBt(t,s,i){return _.Or(t,s,i)},NBt(t,s,i){return _.Pr(t/100,s/100,i/100)},EBt(t,s,i,e){return _.Rr(t/100,s/100,i/100,e/100)},DBt(t,s,i){return _.Pr(t/255,s/255,i/255)},_Bt(t,s,i,e){return _.Rr(t/255,s/255,i/255,e/255)},ABt(){return this.Jc.lO()},LBt(){return this.Jc.fO()},OBt(){return this.Jc.PO().j7().kc()},RBt(){return this.Jc.PO().Bmt()}}}{const Ua=self.Ls;Ua.O9.ont=class extends Ua.hbt{constructor(t){super(t)}Kn(){super.Kn()}}}{const Wa=self.Ls,Qa=self.Ws,Ja=[],Ya=(Wa.O9.ont.bCt=class extends Wa.Qbt{constructor(t){super(t),this.mCt=t.tGt()}Kn(){Wa.Nh(this.mCt),super.Kn()}Ebt(){for(const t of this.mCt)t.gIt(this.Jc)}i9(s){const i={JT:this.Jc.wO()};return Promise.all(this.mCt.map(t=>t.yIt(s,i)))}a9(){for(const t of this.mCt)t.MIt()}r9(){this.PBt()}PBt(){for(const t of this.Nct.fP())t.J5().kBt()}Dwt(t){Wa.O9.ont.z2t(this,t)}mSt(t){Ja.push({Hbt:null,FBt:!1,instances:[]})}jBt(t,s,i){const e=Ja.at(-1);e.Hbt=t,e.FBt=i,e.instances.push(s)}gSt(t){const s=Ja.pop(),i=s.Hbt,e=s.FBt;if(i){const n=new Map;for(const r of s.instances)r.lNt(n,i,e);for(const[h,o]of n)h.pP().Kct(o)}}zBt(t){const s=this.uF().rGt(t),i=this.w4(),e=s.wIt(0);return e._z().rW(i.mS(),{JT:i.wO()}).then(()=>this.PBt()),s}BBt(t){for(const s of this.Nct.fP())s.J5().UBt(t);this.uF().hGt(t)}WBt(t,s){const i=this.Nct.eGt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.vIt(s);e<0&&(e+=i.vz()+1);const n=Wa.dIt.mIt(this.w4()),r=(i.SIt(n,e),this.w4());n._z().rW(r.mS(),{JT:r.wO()}).then(()=>this.PBt());for(const h of this.Nct.fP())h.J5().QBt();return n}JBt(t,s){const i=this.Nct.eGt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.vz())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.vIt(s);e<0&&(e+=i.vz()),i.TIt(e);for(const n of this.Nct.fP())n.J5().QBt()}Dbt(){return self.YBt}},new WeakMap);self.YBt=class extends self.tP{constructor(t){super(t),Ya.set(this,t.pSt())}VBt(t){Qa.we(t);const s=Ya.get(this).uF().eGt(t);return s?s.xIt():null}HBt(){return Ya.get(this).uF().iGt().map(t=>t.xIt())}qBt(t){return Qa.we(t),Ya.get(this).zBt(t).xIt()}ZBt(t){Qa.we(t),Ya.get(this).BBt(t)}XBt(t,s){if(Qa.we(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return Ya.get(this).WBt(t,s).Cz()}KBt(t,s){if(Qa.we(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");Ya.get(this).JBt(t,s)}}}{const A=self.Ls,Va=self.Ws,Ha=A.Xn(A.Rect),qa=A.Xn(A.ju),Za=A.Xn(A.ja),L=(A.O9.ont.Instance=class extends A.vvt{constructor(t,s){super(t);let i=!0,e="",n=0,r=!0;s&&(i=!!s[0],e=s[1],n=s[2],r=s[3]),this.$Bt=this.Nct.eGt(e)||this.Nct.tGt()[0],this.tUt=A.rr(n,0,this.$Bt.vz()-1),this.sUt=this.$Bt.wIt(this.tUt);const h=this.sUt._z(),o=(this.iUt=h.lb(),this.eUt=h.aN(),this.nUt=h.Rvt(),this.Gvt(),t.aNt(2,!0),t.aNt(1,0<=this.$Bt.mz()),this.rUt=Math.abs(this.$Bt.mz()),this.hUt=this.$Bt.Sz(),this.oUt=A.Xn(A.a0),this.aUt=0,this.uUt=0,this.lUt="",this.cUt=-1,this.fUt="",this.dUt=0,this.Z3());this.pUt=o.Lj(),o.Mk(i),o.qj(r),o.Prt(this.sUt.Oz()),o.Frt(this.sUt.Pz()),o.t_t(this.sUt.Yz()),o.vj(),1===this.Nct.sGt()&&1===this.Nct.tGt()[0].vz()||0===this.rUt||this.pvt()}Kn(){this.$Bt=null,this.sUt=null,this.iUt=null,this.oUt=null,super.Kn()}_vt(){return this.sUt._z()}Jst(){return!0}o8(){this.iUt=null}Dvt(){this.kBt()}OT(t){const s=this.iUt;if(null!==s){t.cD(s);const i=this.Z3();i.k5()?this.mUt(i,t):this.gUt(i,t)}}gUt(t,s){let i=this.pUt;this.Jc.TO()&&(i=t.VDt(i)),s.TD(i,this.nUt)}mUt(s,t){const i=s.c_t();if(s.d_t()){s.QDt(Ha,qa,!1);let t=qa;this.Jc.TO()&&(t=s.VDt(t)),i.LT(s.F5(),t,this.nUt),s.f_t(!1)}i.OT(t)}yUt(){return this.oUt.Xs()}MUt(){return this.wi.uNt(2)}wUt(t){this.wi.aNt(2,t)}SUt(){return this.wi.uNt(1)}TUt(t){this.wi.aNt(1,t)}bUt(){return this.wi.uNt(4)}vUt(t){this.wi.aNt(4,t)}hX(){this.fUt&&this.xUt(),0<=this.cUt&&this.IUt();const t=this.rUt;if(this.MUt()&&0!==t){const s=this.Jc.KO(this.wi),i=(this.oUt.Zl(s),this.yUt()),e=this.sUt,n=e.Az()/t;if(!(i<this.aUt+n)){const r=this.$Bt,h=this.hUt,o=r.vz(),a=r.Mz(),u=r.yz(),l=r.bz(),c=(this.SUt()?this.tUt++:this.tUt--,this.aUt+=n,this.tUt>=o&&(l?(this.TUt(!1),this.tUt=o-2):!u&&(this.uUt++,this.uUt>=a)?this.CUt(!1):this.tUt=h),this.tUt<0&&(l?(this.tUt=1,this.TUt(!0),u||(this.uUt++,this.uUt>=a&&this.CUt(!0))):!u&&(this.uUt++,this.uUt>=a)?this.CUt(!0):this.tUt=h),this.tUt=A.rr(this.tUt,0,o-1),r.wIt(this.tUt));i>this.aUt+c.Az()/t&&(this.aUt=i),this.GUt(e,c)}}else this.Kbt()}CUt(t){this.tUt=t?0:this.$Bt.vz()-1,this.wUt(!1),this.lUt=this.$Bt.kc(),this.vUt(!0),this.Vbt("animationend",!1,{animationName:this.lUt}),this.HF(A.O9.ont.A9.NUt),this.HF(A.O9.ont.A9.EUt),this.vUt(!1),this.uUt=0}GUt(i,e,t){if(i!==e){const s=this.Z3(),n=i._z(),r=e._z(),h=n.Jp(),o=n.im(),a=r.Jp(),u=r.im(),l=(t&&t.onFrameChange?t.onFrameChange(s,h,o,a,u):(h!==a&&s.Kp(s.Jp()*(a/h)),o!==u&&s.Yp(s.im()*(u/o))),s.Prt(e.Oz()),s.Frt(e.Pz()),s.t_t(e.Yz()),s.vj(),this.sUt=e,this.iUt=r.lb(),this.eUt=r.aN(),this.nUt=r.Rvt(),this.TB().snt());for(let t=0,s=l.length;t<s;++t)l[t].bxt(i,e);this.Vbt("framechange",!1,{animationName:this.$Bt.kc(),DUt:this.tUt}),this.HF(A.O9.ont.A9._Ut),this.Jc.n4()}}AUt(t){this.wUt(!0),this.aUt=this.yUt(),1===t&&0!==this.tUt&&(this.cUt=0,this.bUt()||this.IUt()),this.pvt()}LUt(t,s,i){this.fUt=t,this.dUt=s,this.pvt(),!i&&this.bUt()||this.xUt()}OUt(){return this.$Bt}RUt(){return this.fUt||this.$Bt.kc()}UBt(t){A.cn(t,this.RUt())&&this.LUt(this.Nct.oGt().kc(),1,!0)}PUt(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.Nct.eGt(this.RUt());if(!s)return;if(-1===(t=s.bIt(t)))return}isFinite(t)&&(this.cUt=t,this.bUt()||this.IUt())}QBt(){if(!this.fUt&&-1===this.cUt){const t=this.sUt,s=this.$Bt.wIt(A.rr(this.tUt,0,this.$Bt.vz()-1));t!==s&&this.GUt(t,s),1<this.$Bt.vz()&&0<this.rUt&&this.pvt()}}kUt(){return this.tUt}FUt(){return this.sUt.Xz()}jUt(t){this.rUt=Math.abs(t),this.TUt(0<=t),0<this.rUt&&this.pvt()}zUt(){return this.SUt()?this.rUt:-this.rUt}BUt(t){"string"==typeof t&&-1===(t=this.$Bt.bIt(t))||(t=A.rr(Math.floor(t),0,this.$Bt.vz()-1),this.hUt=t)}UUt(){return this.hUt}xUt(t){const s=this.sUt,i=this.Nct.eGt(this.fUt);if(this.fUt="",i&&(i!==this.$Bt||!this.MUt())){this.$Bt=i,this.TUt(0<=i.mz()),this.rUt=Math.abs(i.mz()),this.hUt=i.Sz(),this.tUt=A.rr(this.tUt,0,this.$Bt.vz()-1),1===this.dUt&&(this.tUt=0),this.wUt(!0),this.aUt=this.yUt();const e=this.$Bt.wIt(this.tUt);this.GUt(s,e,t)}}IUt(t){const s=this.sUt,i=this.tUt;if(this.tUt=A.rr(Math.floor(this.cUt),0,this.$Bt.vz()-1),this.cUt=-1,t||i!==this.tUt){const e=this.$Bt.wIt(this.tUt);this.GUt(s,e),this.aUt=this.yUt()}}kBt(){const t=this.sUt._z();this.iUt=t.lb(),this.eUt=t.aN(),this.nUt=t.Rvt(),this.Z3().f_t(!0)}lb(){return this.iUt}aN(){return this.eUt}Rvt(){return this.nUt}jz(){return this.sUt.jz()}ESt(t){let s=this.sUt,i=this.Z3(),e=null;if("string"==typeof t)e=s.Qz(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.Wz(t-1)}let n=i.Ej();if(!e)return[i.YS(),i.qS(),n];if(Za.I(e.RIt()),i.k5()){const[r,h,o]=i.F5().zT(Za.Qa(),Za.Ya());Za.set(r,h),n+=o}return Za.offset(-s.Oz(),-s.Pz()),Za.scale(i.Jp(),i.im()),Za.rotate(i.OP()),Za.offset(i.YS(),i.qS()),[Za.Qa(),Za.Ya(),n]}WUt(){return this.Z3().r_t().Il()}QUt(t){t=Math.floor(t);const s=this.Z3(),i=s.r_t(),e=i.Il();if((t=t===e?0:t)<0||e<=t)return[0,0];const n=i.xl();return[n[2*t+0]+s.YS(),n[2*t+1]+s.qS()]}Mvt(){const s=A.O9.ont.xnt,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.$Bt.kc(),JUt:t=>this.Svt(s.YUt,t,0)},{name:t+".current-frame",value:this.tUt,JUt:t=>this.Svt(s.VUt,t)},{name:t+".is-playing",value:this.MUt(),JUt:t=>t?this.Svt(s.HUt,0):this.Svt(s.qUt)},{name:t+".speed",value:this.rUt,JUt:t=>this.Svt(s.ZUt,t)},{name:t+".repeats",value:this.uUt,JUt:t=>this.uUt=t}]}]}rT(){const t={a:this.$Bt.NY()},s=(0!==this.aUt&&(t.fs=this.aUt),this.yUt()),i=(0!==s&&(t.at=s),0!==this.tUt&&(t.f=this.tUt),0!==this.rUt&&(t.cas=this.rUt),1!==this.uUt&&(t.ar=this.uUt),0!==this.hUt&&(t.rt=this.hUt),this.MUt()||(t.ap=this.MUt()),this.SUt()||(t.af=this.SUt()),this.Z3());return i.Hj()&&(t.ce=i.Hj()),t}hT(t){const s=this.uF().nGt(t.a),i=(s&&(this.$Bt=s),this.aUt=t.hasOwnProperty("fs")?t.fs:0,this.oUt.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),e=(this.tUt=A.rr(i,0,this.$Bt.vz()-1),this.rUt=t.hasOwnProperty("cas")?t.cas:0,this.uUt=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),n=(this.hUt=A.rr(e,0,this.$Bt.vz()-1),this.wUt(!t.hasOwnProperty("ap")||!!t.ap),this.TUt(!t.hasOwnProperty("af")||!!t.af),this.$Bt.wIt(this.tUt)),r=(this.sUt=n,this.kBt(),this.Z3());r.Prt(n.Oz()),r.Frt(n.Pz()),r.t_t(n.Yz()),r.qj(!!t.ce),this.MUt()&&this.pvt()}ert(t){const s=this.Z3();switch(t){case 3:return s.Hj();case 2:return A.rr(this.tUt,0,this.$Bt.vz()-1);case 1:return this.$Bt.kc()}}urt(t,s,i){const e=this.Z3();switch(t){case 3:e.qj(!!s);break;case 2:{this.wUt(!1);const n=this.$Bt.vz()-1,r=s=A.rr(s,0,n),h=this.$Bt.wIt(this.tUt),o=this.$Bt.wIt(r);this.GUt(h,o,i),this.tUt=A.rr(r,0,n);break}case 1:{this.fUt=s,this.xUt(i);const a=this.$Bt.vz();1<a&&0<this.$Bt.mz()?this.pvt():this.Kbt();break}}}Dbt(){return self.XUt}},new WeakMap),Xa=new Map([["current-frame",0],["beginning",1]]);self.XUt=class extends self.z5{constructor(){super(),L.set(this,self.oF.fF().J5())}Fz(){return L.get(this).jz()}zz(t){return this.Bz(t)[0]}Uz(t){return this.Bz(t)[1]}KUt(t){return this.Bz(t)[2]}Bz(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return L.get(this).ESt(t)}Jz(){return L.get(this).WUt()}Vz(t){return Va.me(t),L.get(this).QUt(t)[0]}Zz(t){return Va.me(t),L.get(this).QUt(t)[1]}qz(t){return Va.me(t),L.get(this).QUt(t)}$Ut(){L.get(this).wUt(!1)}t6t(t="current-frame"){Va.we(t);const s=Xa.get(t);if(void 0===s)throw new Error("invalid mode");L.get(this).AUt(s)}s6t(t,s="beginning"){Va.we(t),Va.we(s);const i=Xa.get(s);if(void 0===i)throw new Error("invalid mode");const e=L.get(this);if(!e.uF().eGt(t))throw new Error(`animation name "${t}" does not exist`);e.LUt(t,i)}VBt(t){Va.we(t);const s=L.get(this).uF().eGt(t);return s?s.xIt():null}get animation(){return L.get(this).OUt().xIt()}get animationName(){return L.get(this).RUt()}set DUt(t){Va.me(t),L.get(this).PUt(t)}get DUt(){return L.get(this).kUt()}set i6t(t){Va.we(t),L.get(this).PUt(t)}get i6t(){return L.get(this).FUt()}set e6t(t){Va.me(t),L.get(this).jUt(t)}get e6t(){return L.get(this).zUt()}set n6t(t){Va.me(t),L.get(this).BUt(t)}get n6t(){return L.get(this).UUt()}get imageWidth(){return L.get(this)._vt().Jp()}get imageHeight(){return L.get(this)._vt().im()}r6t(){const t=L.get(this)._vt();return[t.Jp(),t.im()]}async h6t(t){Va.Ze(t,Blob);const s=L.get(this),i=s.w4(),e=s._vt(),n=A.Xn(A.jxt);if(n.$xt(i,t),await n.rW(i.mS(),{JT:i.wO()}),s.$n())n.Kn();else{e.tIt(n);const r=s.pSt();r.PBt(),r.uF().Gf().dispatchEvent(new A.Event("animationframeimagechange")),i.n4()}}o6t(t,s){Va.we(s),L.get(this).Z3().UDt(!!t,s)}}}{const Ka=self.Ls;Ka.O9.ont.A9={a6t(t){return Ka.cn(this.RUt(),t)},u6t(t,s){return Ka.compare(this.tUt,t,s)},l6t(t,s){if("string"!=typeof s)return!1;const i=this.sUt.Xz();return Ka.compare(i.toLowerCase(),t,s.toLowerCase())},c6t(t,s){return Ka.compare(this.zUt(),t,s)},EUt(t){return Ka.cn(this.lUt,t)},NUt(){return!0},_Ut(){return!0},f6t(){return this.Z3().Jp()<0},d6t(){return this.Z3().im()<0},p6t(){return!0},m6t(){return!0},Hj(){return this.Z3().Hj()}}}{const $a=self.Ls;$a.O9.ont.xnt={g6t(t,s,i,e,n){if(t&&s){const[r,h]=this.ESt(i),o=this.Jc.MP(t,s,r,h,e,n);if(o){if(e&&s.wP(o),t.iP().PR()){const u=o.Z3();u.LP(this.Z3().OP()),u.vj()}const a=this.Jc.DO();a.SP(!0),o.TP(),a.SP(!1),t!==this.Jc.X0t().uF()&&this.Xbt.jBt(t,o,e)}}},qUt(){this.wUt(!1)},HUt(t){this.AUt(t)},YUt(t,s){this.LUt(t,s)},VUt(t){this.PUt(t)},ZUt(t){this.jUt(t)},y6t(t){this.BUt(t)},M6t(s,t){try{0===s?this.pSt().zBt(t):this.pSt().BBt(t)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation: `,t)}},w6t(s,t,i){try{0===s?this.pSt().WBt(t,i):this.pSt().JBt(t,i)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation frame: `,t)}},S6t(t){const s=this.Z3(),i=s.Jp(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Kp(e),s.vj())},T6t(t){const s=this.Z3(),i=s.im(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Yp(e),s.vj())},_P(t){const s=this.sUt,i=s._z(),e=this.Z3(),n=e.Jp()<0?-1:1,r=e.im()<0?-1:1,h=i.Jp()*t*n,o=i.im()*t*r;e.Jp()===h&&e.im()===o||(e.DG(h,o),e.vj())},async b6t(t,s,i){const e=this.sUt,n=e._z(),r=this.Z3(),h=this.Jc,o=this.Xbt;if(n.GQ()===t)0===s&&(r.DG(n.Jp(),n.im()),r.vj()),this.HF($a.O9.ont.A9.p6t);else{const a=$a.Xn($a.jxt);try{if(await a.Kxt(h,t),!a.s8())throw new Error("image failed to load");if(this.$n())return void a.Kn();await a.rW(h.mS(),{JT:h.wO()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.$n()||this.HF($a.O9.ont.A9.m6t))}this.$n()?a.Kn():(n.tIt(a),o.PBt(),o.uF().Gf().dispatchEvent(new $a.Event("animationframeimagechange")),h.n4(),0===s&&(r.DG(n.Jp(),n.im()),r.vj()),await this.ZF($a.O9.ont.A9.p6t))}},v6t(t){this.Z3().qj(t)},UDt(t,s){this.Z3().UDt(0===t,s)},x6t(t){this.Z3().RS(t),this.Jc.n4()}}}{const tu=self.Ls;tu.O9.ont.Int={I6t(){return this.kUt()},C6t(){return this.FUt()},G6t(){return this.$Bt.vz()},N6t(){return this.$Bt.kc()},E6t(){return this.zUt()},D6t(){return this.$Bt.mz()},_6t(t){return this.ESt(t)[0]},A6t(t){return this.ESt(t)[1]},L6t(t){return this.ESt(t)[2]},O6t(){return this.jz()},R6t(){return this._vt().Jp()},P6t(){return this._vt().im()},k6t(t){return this.QUt(t)[0]},F6t(t){return this.QUt(t)[1]},j6t(){return this.WUt()}}}{const su=self.Ls;su.O9.z6t=class extends su.hbt{constructor(t){super(t)}Kn(){super.Kn()}}}{let i=function(t){switch(t){case 0:return"clamp-to-edge";case 1:return"repeat";case 2:return"mirror-repeat"}return"repeat"};i;const iu=self.Ls;iu.O9.z6t.bCt=class extends iu.Qbt{constructor(t,s){super(t),this.t2="repeat",this.s2="repeat",s&&(this.t2=i(s[0]),this.s2=i(s[1]))}Kn(){super.Kn()}Ebt(){this._z().M4(this.Jc)}i9(t){return this._z().rW(t,{JT:this.Jc.wO(),WT:this.t2,QT:this.s2})}a9(){this._z().KC()}B6t(){return this.t2}U6t(){return this.s2}}}{const eu=self.Ls,nu=self.Ws,ru=eu.Xn(eu.Rect),hu=eu.Xn(eu.ju),ou=eu.Xn(eu.Rect),au=eu.Xn(eu.ju),O=(eu.O9.z6t.Instance=class extends eu.vvt{constructor(t,s){super(t),this.W6t=0,this.Q6t=0,this.J6t=1,this.Y6t=1,this.V6t=0,this.H6t=!1,this.q6t=0,this.Z6t=0,this.X6t=0,this.K6t=0,this.$6t=0,this.tWt=null,s&&(this.Z3().Mk(!!s[0]),this.W6t=s[4],this.Q6t=s[5],this.J6t=s[6],this.Y6t=s[7],this.V6t=eu.ur(s[8]),this.H6t=!!s[9],this.q6t=s[10],this.Z6t=s[11],this.X6t=s[12],this.K6t=s[13],this.$6t=s[14])}Kn(){this.sWt(),super.Kn()}sWt(){this.tWt&&(this.tWt.Kn(),this.tWt=null)}iWt(t,s,i){const e=this._vt(),n=e.Jp(),r=e.im(),h=this.W6t/n,o=this.Q6t/r,a=this.V6t;ou.set(0,0,t/(n*this.J6t),s/(r*this.Y6t)),ou.offset(-h,-o),0===a?i.hl(ou):i.ol(ou,-a)}eWt(t,s=!0){if(this.H6t){const i=this._vt();t.vM(),t.OD(i.Jp()*this.J6t,i.im()*this.Y6t,this.q6t,this.Z6t,this.X6t,this.K6t,this.$6t)}else s&&t.MM()}OT(t){const s=this._vt(),i=s.lb();if(null!==i){this.eWt(t),t.cD(i);const e=s.Jp(),n=s.im(),r=this.W6t/e,h=this.Q6t/n,o=this.Z3();ou.set(0,0,o.Jp()/(e*this.J6t),o.im()/(n*this.Y6t)),ou.offset(-r,-h),o.k5()?this.mUt(o,t):this.gUt(o,t)}}gUt(t,s){let i=t.Lj();this.Jc.TO()&&(i=t.VDt(i)),0===this.V6t?s.cw(i,ou):(au.ol(ou,-this.V6t),s.TD(i,au))}mUt(i,t){const e=i.c_t();if(i.d_t()){i.QDt(ru,hu,!1);let t=hu,s=(this.Jc.TO()&&(t=i.VDt(t)),ou);0!==this.V6t&&(au.ol(ou,-this.V6t),s=au),e.LT(i.F5(),t,s),i.f_t(!1)}e.OT(t)}_vt(){return this.tWt||this.Nct._z()}Jst(){return!0}lb(){return this._vt().lb()}nWt(){this.Z3().f_t(!0)}rWt(t){this.W6t!==t&&(this.W6t=t,this.Jc.n4(),this.nWt())}hWt(){return this.W6t}oWt(t){this.Q6t!==t&&(this.Q6t=t,this.Jc.n4(),this.nWt())}aWt(){return this.Q6t}uWt(t){this.J6t!==t&&(this.J6t=t,this.Jc.n4(),this.nWt())}lWt(){return this.J6t}cWt(t){this.Y6t!==t&&(this.Y6t=t,this.Jc.n4(),this.nWt())}fWt(){return this.Y6t}dWt(t){this.V6t!==t&&(this.V6t=t,this.Jc.n4(),this.nWt())}pWt(){return this.V6t}mWt(t){this.H6t!==(t=!!t)&&(this.H6t=t,this.Jc.n4())}gWt(){return this.H6t}yWt(t){this.q6t!==t&&(this.q6t=t,this.gWt())&&this.Jc.n4()}MWt(){return this.q6t}wWt(t){this.Z6t!==t&&(this.Z6t=t,this.gWt())&&this.Jc.n4()}SWt(){return this.Z6t}TWt(t){this.X6t!==t&&(this.X6t=t,this.gWt())&&this.Jc.n4()}bWt(){return this.X6t}vWt(t){this.K6t!==t&&(this.K6t=t,this.gWt())&&this.Jc.n4()}xWt(){return this.K6t}IWt(t){this.$6t!==t&&(this.$6t=t,this.gWt())&&this.Jc.n4()}CWt(){return this.$6t}rT(){const t={};return 0!==this.W6t&&(t.iox=this.W6t),0!==this.Q6t&&(t.ioy=this.Q6t),1!==this.J6t&&(t.isx=this.J6t),1!==this.Y6t&&(t.isy=this.Y6t),0!==this.V6t&&(t.ia=this.V6t),this.H6t&&(t.tr=!0),1!==this.q6t&&(t.trx=this.q6t),1!==this.Z6t&&(t.try=this.Z6t),1!==this.X6t&&(t.tra=this.X6t),.1!==this.K6t&&(t.trbmx=this.K6t),.1!==this.$6t&&(t.trbmy=this.$6t),t}hT(t){this.W6t=t.iox||0,this.Q6t=t.ioy||0,this.J6t=t.hasOwnProperty("isx")?t.isx:1,this.Y6t=t.hasOwnProperty("isy")?t.isy:1,this.V6t=t.ia||0,this.H6t=!!t.tr,this.q6t=t.hasOwnProperty("trx")?t.trx:1,this.Z6t=t.hasOwnProperty("try")?t.try:1,this.X6t=t.hasOwnProperty("tra")?t.tra:1,this.K6t=t.hasOwnProperty("trbmx")?t.trbmx:.1,this.$6t=t.hasOwnProperty("trbmy")?t.trbmy:.1}Mvt(){const t="plugins.tiledbg.properties";return[{title:t+".image-transform.name",properties:[{name:t+".image-offset-x.name",value:this.hWt(),JUt:t=>this.rWt(t)},{name:t+".image-offset-y.name",value:this.aWt(),JUt:t=>this.oWt(t)},{name:t+".image-scale-x.name",value:100*this.lWt(),JUt:t=>this.uWt(t/100)},{name:t+".image-scale-y.name",value:100*this.fWt(),JUt:t=>this.cWt(t/100)},{name:t+".image-angle.name",value:eu.lr(this.pWt()),JUt:t=>this.dWt(eu.ur(t))}]},{title:t+".tile-randomization.name",properties:[{name:t+".enable-tile-randomization.name",value:this.gWt(),JUt:t=>this.mWt(t)},{name:t+".x-random.name",value:100*this.MWt(),JUt:t=>this.yWt(t/100)},{name:t+".y-random.name",value:100*this.SWt(),JUt:t=>this.wWt(t/100)},{name:t+".angle-random.name",value:100*this.bWt(),JUt:t=>this.TWt(t/100)},{name:t+".blend-margin-x.name",value:100*this.xWt(),JUt:t=>this.vWt(t/100)},{name:t+".blend-margin-y.name",value:100*this.CWt(),JUt:t=>this.IWt(t/100)}]}]}ert(t){switch(t){case 4:return this.hWt();case 5:return this.aWt();case 6:return this.lWt();case 7:return this.fWt();case 8:return this.pWt();case 9:return this.gWt();case 10:return this.MWt();case 11:return this.SWt();case 12:return this.bWt();case 13:return this.xWt();case 14:return this.CWt()}}urt(t,s){switch(t){case 4:this.rWt(s);break;case 5:this.oWt(s);break;case 6:this.uWt(s);break;case 7:this.cWt(s);break;case 8:this.dWt(s);break;case 9:this.mWt(!!s);break;case 10:this.yWt(s);break;case 11:this.wWt(s);break;case 12:this.TWt(s);break;case 13:this.vWt(s);break;case 14:this.IWt(s)}}Dbt(){return self.GWt}},new WeakMap);self.GWt=class extends self.z5{constructor(){super(),O.set(this,self.oF.fF().J5())}set NWt(t){nu.me(t),O.get(this).rWt(t)}get NWt(){return O.get(this).hWt()}set EWt(t){nu.me(t),O.get(this).oWt(t)}get EWt(){return O.get(this).aWt()}DWt(t,s){nu.me(t),nu.me(s);const i=O.get(this);i.rWt(t),i.oWt(s)}_Wt(){const t=O.get(this);return[t.hWt(),t.aWt()]}set AWt(t){nu.me(t),O.get(this).uWt(t)}get AWt(){return O.get(this).lWt()}set LWt(t){nu.me(t),O.get(this).cWt(t)}get LWt(){return O.get(this).fWt()}OWt(t,s){nu.me(t),nu.me(s);const i=O.get(this);i.uWt(t),i.cWt(s)}RWt(){const t=O.get(this);return[t.lWt(),t.fWt()]}set PWt(t){nu.me(t),O.get(this).dWt(t)}get PWt(){return O.get(this).pWt()}set kWt(t){nu.me(t),O.get(this).dWt(eu.ur(t))}get kWt(){return eu.lr(O.get(this).pWt())}get imageWidth(){return O.get(this)._vt().Jp()}get imageHeight(){return O.get(this)._vt().im()}r6t(){const t=O.get(this)._vt();return[t.Jp(),t.im()]}set FWt(t){O.get(this).mWt(!!t)}get FWt(){return O.get(this).gWt()}set jWt(t){nu.me(t),O.get(this).yWt(t)}get jWt(){return O.get(this).MWt()}set zWt(t){nu.me(t),O.get(this).wWt(t)}get zWt(){return O.get(this).SWt()}BWt(t,s){nu.me(t),nu.me(s);const i=O.get(this);i.yWt(t),i.wWt(s)}UWt(){const t=O.get(this);return[t.MWt(),t.SWt()]}set WWt(t){nu.me(t),O.get(this).TWt(t)}get WWt(){return O.get(this).bWt()}set QWt(t){nu.me(t),O.get(this).vWt(t)}get QWt(){return O.get(this).xWt()}set JWt(t){nu.me(t),O.get(this).IWt(t)}get JWt(){return O.get(this).CWt()}YWt(t,s){nu.me(t),nu.me(s);const i=O.get(this);i.vWt(t),i.IWt(s)}VWt(){const t=O.get(this);return[t.xWt(),t.CWt()]}async HWt(t){nu.Ze(t,Blob);const s=O.get(this),i=s.w4(),e=eu.Xn(eu.jxt);e.$xt(i,t),await e.rW(i.mS(),{JT:i.wO(),WT:s.pSt().B6t(),QT:s.pSt().U6t()}),s.$n()?e.Kn():(s.sWt(),s.tWt=e,i.n4())}}}{const uu=self.Ls;uu.O9.z6t.A9={p6t(){return!0},m6t(){return!0},qWt(){return this.gWt()}}}{const lu=self.Ls;lu.O9.z6t.xnt={ZWt(t){this.rWt(t)},XWt(t){this.oWt(t)},KWt(t){this.uWt(t/100)},$Wt(t){this.cWt(t/100)},tQt(t){this.dWt(lu.ur(t))},sQt(t){this.mWt(t)},iQt(t,s){this.yWt(t/100),this.wWt(s/100)},eQt(t){this.TWt(t/100)},nQt(t,s){this.vWt(t/100),this.IWt(s/100)},x6t(t){this.Z3().RS(t),this.Jc.n4()},async b6t(t,s){if(!this.tWt||this.tWt.GQ()!==t){const i=this.Jc,e=lu.Xn(lu.jxt);try{if(await e.Kxt(i,t),!e.s8())throw new Error("image failed to load");if(this.$n())return e.Kn(),null;const n=await e.rW(i.mS(),{JT:i.wO(),WT:this.pSt().B6t(),QT:this.pSt().U6t()});if(!n)return}catch(t){return console.error("Load image from URL failed: ",t),void(this.$n()||this.HF(lu.O9.z6t.A9.m6t))}this.$n()?e.Kn():(this.sWt(),this.tWt=e,i.n4(),await this.ZF(lu.O9.z6t.A9.p6t))}}}}{const cu=self.Ls;cu.O9.z6t.Int={R6t(){return this._vt().Jp()},P6t(){return this._vt().im()},rQt(){return this.W6t},hQt(){return this.Q6t},oQt(){return 100*this.J6t},aQt(){return 100*this.Y6t},uQt(){return cu.lr(this.V6t)},lQt(){return 100*this.MWt()},cQt(){return 100*this.SWt()},fQt(){return 100*this.bWt()},dQt(){return 100*this.xWt()},pQt(){return 100*this.CWt()}}}{const fu=self.Ls;fu.O9.Keyboard=class extends fu.hbt{constructor(t){super(t)}Kn(){super.Kn()}}}{let i=function(){return s.$R().J5()};i;const du=self.Ls;du.O9.Keyboard.bCt=class extends du.Qbt{constructor(t){super(t)}Kn(){super.Kn()}Ebt(){}Dbt(){return self.mQt}};let s=null;self.mQt=class extends self.tP{constructor(t){super(t),(s=t).w4().F3().keyboard=this}gQt(t){const s=i();if("string"==typeof t)return s.yQt(t);if("number"==typeof t)return s.MQt(t);throw new TypeError("expected string or number")}}}{const pu=self.Ls;pu.O9.Keyboard.Instance=class extends pu.qbt{constructor(t,s){super(t),this.wQt=new Set,this.SQt=new Set,this.TQt=0,this.bQt="",this.vQt="";const i=this.w4().Gf();this.r0=new pu.i0(pu.Zf.s0(i,"keydown",t=>this.xQt(t.data)),pu.Zf.s0(i,"keyup",t=>this.IQt(t.data)),pu.Zf.s0(i,"window-blur",()=>this.CQt()),pu.Zf.s0(i,"keyboard-blur",()=>this.CQt()))}Kn(){super.Kn()}xQt(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.wQt.has(i)||(this.wQt.add(i),this.SQt.add(s),this.bQt=i,this.TQt=s,this.vQt=e,this.HF(pu.O9.Keyboard.A9.GQt),this.HF(pu.O9.Keyboard.A9.NQt),this.HF(pu.O9.Keyboard.A9.EQt),this.HF(pu.O9.Keyboard.A9.DQt))}IQt(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.wQt.delete(i),this.SQt.delete(s),this.bQt=i,this.TQt=s,this.vQt=e,this.HF(pu.O9.Keyboard.A9._Qt),this.HF(pu.O9.Keyboard.A9.AQt),this.HF(pu.O9.Keyboard.A9.LQt),this.HF(pu.O9.Keyboard.A9.OQt)}CQt(){for(const t of this.SQt)this.SQt.delete(t),this.TQt=t,this.HF(pu.O9.Keyboard.A9._Qt),this.HF(pu.O9.Keyboard.A9.AQt),this.HF(pu.O9.Keyboard.A9.OQt);this.wQt.clear()}yQt(t){return this.wQt.has(t)}MQt(t){return this.SQt.has(t)}rT(){return{tk:this.TQt,tkk:this.vQt}}hT(t){this.TQt=t.tk,t.hasOwnProperty("tkk")&&(this.vQt=t.tkk)}Mvt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.TQt},{name:t+".debugger.last-key-string",value:pu.O9.Keyboard.Int.RQt(this.TQt)},{name:t+".debugger.last-typed-key",value:this.vQt}]}]}}}{const mu=self.Ls,gu=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];mu.O9.Keyboard.A9={yQt(t){return this.SQt.has(t)},NQt(t){return this.TQt===t},GQt(){return!0},_Qt(){return!0},AQt(t){return this.TQt===t},MQt(t){return t=Math.floor(t),this.SQt.has(t)},DQt(t){return this.TQt===t},OQt(t){return this.TQt===t},EQt(t){const s=gu[t];return this.bQt===s},LQt(t){const s=gu[t];return this.bQt===s},PQt(t){const s=gu[t];return this.wQt.has(s)}}}{const yu=self.Ls;yu.O9.Keyboard.xnt={}}{let s=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"";case 38:return"";case 39:return"";case 40:return"";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};s;const Mu=self.Ls;Mu.O9.Keyboard.Int={kQt(){return this.TQt},RQt(t){return s(t)},FQt(){return this.vQt}}}{let t=function(t,s){return"number"==typeof t&&"number"==typeof s};t,0;self.lMt=[()=>1e3,()=>0,t=>{const s=t.SMt(0).zyt(),i=t.SMt(1).zyt();return()=>Math.floor(s(i()))},()=>"",t=>{const s=t.SMt(0).zyt();return()=>s(1)},()=>.5,()=>50,()=>-50,t=>{const s=t.SMt(0),i=t.SMt(1),e=t.SMt(2).zyt();return()=>s.Yyt()+i.Zyt()*e()}]}var t=self.Ls;self.OPt=function(){return[t.O9.ont,t.O9.z6t,t.O9.Keyboard,t.O9.L9.A9._9,t.O9.L9.A9.Ojt,t.O9.L9.xnt.$jt,t.O9.L9.Int.random,t.O9.L9.Int.Jzt,t.O9.ont.xnt.iTt,t.O9.L9.A9.Mjt,t.O9.ont.xnt.S6t,t.O9.Keyboard.A9.yQt,t.O9.ont.xnt.i2t,t.O9.L9.A9.ljt,t.O9.ont.xnt.CSt,t.O9.ont.Int.w2t,t.O9.L9.Int.XO,t.O9.ont.Int.S2t,t.O9.L9.xnt.H5t,t.O9.ont.A9.WTt]},self.XPt=[{jQt:0},{zQt:0},{BQt:0},{UQt:0},{WQt:0},{Keyboard:0}],self.QQt={BQt:class extends self.XUt{},UQt:class extends self.GWt{},WQt:class extends self.XUt{},Keyboard:class extends self.oF{}};