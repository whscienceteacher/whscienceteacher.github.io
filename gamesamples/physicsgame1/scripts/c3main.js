// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let It=function(t){i=t},Nt=function(t){return t*r},Et=function(t,i){return Math.abs(t-i)<=s*Math.max(1,Math.abs(t),Math.abs(i))},Dt=function(){var t=new i(4);return i!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},_t=function(t){var s=new i(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},At=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Lt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},Ot=function(t,s,e,n){var r=new i(4);return r[0]=t,r[1]=s,r[2]=e,r[3]=n,r},Rt=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},Pt=function(t,s){if(t===s){var i=s[1];t[1]=s[2],t[2]=i}else t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3];return t},kt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*r-n*e;return h?(h=1/h,t[0]=r*h,t[1]=-e*h,t[2]=-n*h,t[3]=i*h,t):null},Ft=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},jt=function(t){return t[0]*t[3]-t[2]*t[1]},zt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],u=i[2],l=i[3];return t[0]=e*o+r*a,t[1]=n*o+h*a,t[2]=e*u+r*l,t[3]=n*u+h*l,t},Bt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+r*o,t[1]=n*a+h*o,t[2]=e*-o+r*a,t[3]=n*-o+h*a,t},Ut=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1];return t[0]=e*o,t[1]=n*o,t[2]=r*a,t[3]=h*a,t},Wt=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t},Qt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},Jt=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Vt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},Yt=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},Ht=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},qt=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Zt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Kt=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=i[0],a=i[1],u=i[2],l=i[3];return Math.abs(e-o)<=s*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=s*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-u)<=s*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(h-l)<=s*Math.max(1,Math.abs(h),Math.abs(l))},Xt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},$t=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ts=function(){var t=new i(6);return i!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},ss=function(t){var s=new i(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},is=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},es=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ns=function(t,s,e,n,r,h){var o=new i(6);return o[0]=t,o[1]=s,o[2]=e,o[3]=n,o[4]=r,o[5]=h,o},rs=function(t,s,i,e,n,r,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t},hs=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=i*r-e*n;return a?(a=1/a,t[0]=r*a,t[1]=-e*a,t[2]=-n*a,t[3]=i*a,t[4]=(n*o-r*h)*a,t[5]=(e*h-i*o)*a,t):null},os=function(t){return t[0]*t[3]-t[1]*t[2]},as=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=i[0],l=i[1],c=i[2],f=i[3],d=i[4],p=i[5];return t[0]=e*u+r*l,t[1]=n*u+h*l,t[2]=e*c+r*f,t[3]=n*c+h*f,t[4]=e*d+r*p+o,t[5]=n*d+h*p+a,t},us=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=Math.sin(i),l=Math.cos(i);return t[0]=e*l+r*u,t[1]=n*l+h*u,t[2]=e*-u+r*l,t[3]=n*-u+h*l,t[4]=o,t[5]=a,t},ls=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=i[0],l=i[1];return t[0]=e*u,t[1]=n*u,t[2]=r*l,t[3]=h*l,t[4]=o,t[5]=a,t},cs=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=i[0],l=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=e*u+r*l+o,t[5]=n*u+h*l+a,t},fs=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t[4]=0,t[5]=0,t},ds=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},ps=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},ms=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},ys=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},gs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},Ms=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},ws=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},Ss=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},Ts=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},bs=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],u=i[0],l=i[1],c=i[2],f=i[3],d=i[4],p=i[5];return Math.abs(e-u)<=s*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(n-l)<=s*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-c)<=s*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(h-f)<=s*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(o-d)<=s*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-p)<=s*Math.max(1,Math.abs(a),Math.abs(p))},vs=function(){var t=new i(9);return i!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},xs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Cs=function(t){var s=new i(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},Gs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Is=function(t,s,e,n,r,h,o,a,u){var l=new i(9);return l[0]=t,l[1]=s,l[2]=e,l[3]=n,l[4]=r,l[5]=h,l[6]=o,l[7]=a,l[8]=u,l},Ns=function(t,s,i,e,n,r,h,o,a,u){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=u,t},Es=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ds=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[5];t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=n}else t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8];return t},_s=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=l*h-o*u,f=-l*r+o*a,d=u*r-h*a,p=i*c+e*f+n*d;return p?(p=1/p,t[0]=c*p,t[1]=(-l*e+n*u)*p,t[2]=(o*e-n*h)*p,t[3]=f*p,t[4]=(l*i-n*a)*p,t[5]=(-o*i+n*r)*p,t[6]=d*p,t[7]=(-u*i+e*a)*p,t[8]=(h*i-e*r)*p,t):null},As=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],u=s[7],l=s[8];return t[0]=h*l-o*u,t[1]=n*u-e*l,t[2]=e*o-n*h,t[3]=o*a-r*l,t[4]=i*l-n*a,t[5]=n*r-i*o,t[6]=r*u-h*a,t[7]=e*a-i*u,t[8]=i*h-e*r,t},Ls=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],u=t[8];return s*(u*r-h*a)+i*(-u*n+h*o)+e*(a*n-r*o)},Os=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=i[0],d=i[1],p=i[2],m=i[3],y=i[4],g=i[5],M=i[6],w=i[7],S=i[8];return t[0]=f*e+d*h+p*u,t[1]=f*n+d*o+p*l,t[2]=f*r+d*a+p*c,t[3]=m*e+y*h+g*u,t[4]=m*n+y*o+g*l,t[5]=m*r+y*a+g*c,t[6]=M*e+w*h+S*u,t[7]=M*n+w*o+S*l,t[8]=M*r+w*a+S*c,t},Rs=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=i[0],d=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=f*e+d*h+u,t[7]=f*n+d*o+l,t[8]=f*r+d*a+c,t},Ps=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=Math.sin(i),d=Math.cos(i);return t[0]=d*e+f*h,t[1]=d*n+f*o,t[2]=d*r+f*a,t[3]=d*h-f*e,t[4]=d*o-f*n,t[5]=d*a-f*r,t[6]=u,t[7]=l,t[8]=c,t},ks=function(t,s,i){var e=i[0],n=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=n*s[3],t[4]=n*s[4],t[5]=n*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Fs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},js=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=-i,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},zs=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Bs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Us=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,u=i*h,l=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,y=r*o,g=r*a;return t[0]=1-c-p,t[3]=l-g,t[6]=f+y,t[1]=l+g,t[4]=1-u-p,t[7]=d-m,t[2]=f-y,t[5]=d+m,t[8]=1-u-c,t},Ws=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],y=s[14],g=s[15],M=i*o-e*h,w=i*a-n*h,S=i*u-r*h,T=e*a-n*o,b=e*u-r*o,v=n*u-r*a,x=l*m-c*p,C=l*y-f*p,G=l*g-d*p,I=c*y-f*m,N=c*g-d*m,E=f*g-d*y,D=M*E-w*N+S*I+T*G-b*C+v*x;return D?(D=1/D,t[0]=(o*E-a*N+u*I)*D,t[1]=(a*G-h*E-u*C)*D,t[2]=(h*N-o*G+u*x)*D,t[3]=(n*N-e*E-r*I)*D,t[4]=(i*E-n*G+r*C)*D,t[5]=(e*G-i*N-r*x)*D,t[6]=(m*v-y*b+g*T)*D,t[7]=(y*S-p*v-g*w)*D,t[8]=(p*b-m*S+g*M)*D,t):null},Qs=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Js=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Vs=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Ys=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},Hs=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},qs=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Zs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Ks=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},Xs=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],u=t[6],l=t[7],c=t[8],f=i[0],d=i[1],p=i[2],m=i[3],y=i[4],g=i[5],M=i[6],w=i[7],S=i[8];return Math.abs(e-f)<=s*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(n-d)<=s*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-p)<=s*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(h-m)<=s*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(o-y)<=s*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(a-g)<=s*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(u-M)<=s*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(l-w)<=s*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(c-S)<=s*Math.max(1,Math.abs(c),Math.abs(S))},$s=function(){var t=new i(16);return i!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},ti=function(t){var s=new i(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},si=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},ii=function(t,s,e,n,r,h,o,a,u,l,c,f,d,p,m,y){var g=new i(16);return g[0]=t,g[1]=s,g[2]=e,g[3]=n,g[4]=r,g[5]=h,g[6]=o,g[7]=a,g[8]=u,g[9]=l,g[10]=c,g[11]=f,g[12]=d,g[13]=p,g[14]=m,g[15]=y,g},ei=function(t,s,i,e,n,r,h,o,a,u,l,c,f,d,p,m,y){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=u,t[9]=l,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=y,t},ni=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ri=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[3],r=s[6],h=s[7],o=s[11];t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=n,t[13]=h,t[14]=o}else t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15];return t},hi=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],y=s[14],g=s[15],M=i*o-e*h,w=i*a-n*h,S=i*u-r*h,T=e*a-n*o,b=e*u-r*o,v=n*u-r*a,x=l*m-c*p,C=l*y-f*p,G=l*g-d*p,I=c*y-f*m,N=c*g-d*m,E=f*g-d*y,D=M*E-w*N+S*I+T*G-b*C+v*x;return D?(D=1/D,t[0]=(o*E-a*N+u*I)*D,t[1]=(n*N-e*E-r*I)*D,t[2]=(m*v-y*b+g*T)*D,t[3]=(f*b-c*v-d*T)*D,t[4]=(a*G-h*E-u*C)*D,t[5]=(i*E-n*G+r*C)*D,t[6]=(y*S-p*v-g*w)*D,t[7]=(l*v-f*S+d*w)*D,t[8]=(h*N-o*G+u*x)*D,t[9]=(e*G-i*N-r*x)*D,t[10]=(p*b-m*S+g*M)*D,t[11]=(c*S-l*b-d*M)*D,t[12]=(o*C-h*I-a*x)*D,t[13]=(i*I-e*C+n*x)*D,t[14]=(m*w-p*T-y*M)*D,t[15]=(l*T-c*w+f*M)*D,t):null},oi=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],y=s[14],g=s[15],M=i*o-e*h,w=i*a-n*h,S=i*u-r*h,T=e*a-n*o,b=e*u-r*o,v=n*u-r*a,x=l*m-c*p,C=l*y-f*p,G=l*g-d*p,I=c*y-f*m,N=c*g-d*m,E=f*g-d*y;return t[0]=o*E-a*N+u*I,t[1]=n*N-e*E-r*I,t[2]=m*v-y*b+g*T,t[3]=f*b-c*v-d*T,t[4]=a*G-h*E-u*C,t[5]=i*E-n*G+r*C,t[6]=y*S-p*v-g*w,t[7]=l*v-f*S+d*w,t[8]=h*N-o*G+u*x,t[9]=e*G-i*N-r*x,t[10]=p*b-m*S+g*M,t[11]=c*S-l*b-d*M,t[12]=o*C-h*I-a*x,t[13]=i*I-e*C+n*x,t[14]=m*w-p*T-y*M,t[15]=l*T-c*w+f*M,t},ai=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],u=t[8],l=t[9],c=t[10],f=t[11],d=t[12],p=t[13],m=t[14],y=s*h-i*r,g=s*o-e*r,M=i*o-e*h,w=u*p-l*d,S=u*m-c*d,T=l*m-c*p;return a*(s*T-i*S+e*w)-n*(r*T-h*S+o*w)+t[15]*(u*M-l*g+c*y)-f*(d*M-p*g+m*y)},ui=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],y=s[13],g=s[14],M=s[15],w=i[0],S=i[1],T=i[2],b=i[3];return t[0]=w*e+S*o+T*c+b*m,t[1]=w*n+S*a+T*f+b*y,t[2]=w*r+S*u+T*d+b*g,t[3]=w*h+S*l+T*p+b*M,w=i[4],S=i[5],T=i[6],b=i[7],t[4]=w*e+S*o+T*c+b*m,t[5]=w*n+S*a+T*f+b*y,t[6]=w*r+S*u+T*d+b*g,t[7]=w*h+S*l+T*p+b*M,w=i[8],S=i[9],T=i[10],b=i[11],t[8]=w*e+S*o+T*c+b*m,t[9]=w*n+S*a+T*f+b*y,t[10]=w*r+S*u+T*d+b*g,t[11]=w*h+S*l+T*p+b*M,w=i[12],S=i[13],T=i[14],b=i[15],t[12]=w*e+S*o+T*c+b*m,t[13]=w*n+S*a+T*f+b*y,t[14]=w*r+S*u+T*d+b*g,t[15]=w*h+S*l+T*p+b*M,t},li=function(t,s,i){var e,n,r,h,o,a,u,l,c,f,d,p,m=i[0],y=i[1],g=i[2];return s===t?(t[12]=s[0]*m+s[4]*y+s[8]*g+s[12],t[13]=s[1]*m+s[5]*y+s[9]*g+s[13],t[14]=s[2]*m+s[6]*y+s[10]*g+s[14],t[15]=s[3]*m+s[7]*y+s[11]*g+s[15]):(e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=u,t[7]=l,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*y+c*g+s[12],t[13]=n*m+a*y+f*g+s[13],t[14]=r*m+u*y+d*g+s[14],t[15]=h*m+l*y+p*g+s[15]),t},ci=function(t,s,i){var e=i[0],n=i[1],r=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*n,t[5]=s[5]*n,t[6]=s[6]*n,t[7]=s[7]*n,t[8]=s[8]*r,t[9]=s[9]*r,t[10]=s[10]*r,t[11]=s[11]*r,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fi=function(t,i,e,n){var r,h,o,a,u,l,c,f,d,p,m,y,g,M,w,S,T,b,v,x,C,G,I,N,E=n[0],D=n[1],_=n[2],A=Math.hypot(E,D,_);return A<s?null:(E*=A=1/A,D*=A,_*=A,r=Math.sin(e),o=1-(h=Math.cos(e)),a=i[0],u=i[1],l=i[2],c=i[3],f=i[4],d=i[5],p=i[6],m=i[7],y=i[8],g=i[9],M=i[10],w=i[11],S=E*E*o+h,T=D*E*o+_*r,b=_*E*o-D*r,v=E*D*o-_*r,x=D*D*o+h,C=_*D*o+E*r,G=E*_*o+D*r,I=D*_*o-E*r,N=_*_*o+h,t[0]=a*S+f*T+y*b,t[1]=u*S+d*T+g*b,t[2]=l*S+p*T+M*b,t[3]=c*S+m*T+w*b,t[4]=a*v+f*x+y*C,t[5]=u*v+d*x+g*C,t[6]=l*v+p*x+M*C,t[7]=c*v+m*x+w*C,t[8]=a*G+f*I+y*N,t[9]=u*G+d*I+g*N,t[10]=l*G+p*I+M*N,t[11]=c*G+m*I+w*N,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t)},di=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[4],h=s[5],o=s[6],a=s[7],u=s[8],l=s[9],c=s[10],f=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=r*n+u*e,t[5]=h*n+l*e,t[6]=o*n+c*e,t[7]=a*n+f*e,t[8]=u*n-r*e,t[9]=l*n-h*e,t[10]=c*n-o*e,t[11]=f*n-a*e,t},pi=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],u=s[8],l=s[9],c=s[10],f=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n-u*e,t[1]=h*n-l*e,t[2]=o*n-c*e,t[3]=a*n-f*e,t[8]=r*e+u*n,t[9]=h*e+l*n,t[10]=o*e+c*n,t[11]=a*e+f*n,t},mi=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],u=s[4],l=s[5],c=s[6],f=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n+u*e,t[1]=h*n+l*e,t[2]=o*n+c*e,t[3]=a*n+f*e,t[4]=u*n-r*e,t[5]=l*n-h*e,t[6]=c*n-o*e,t[7]=f*n-a*e,t},yi=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},gi=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Mi=function(t,i,e){var n,r,h,o=e[0],a=e[1],u=e[2],l=Math.hypot(o,a,u);return l<s?null:(o*=l=1/l,a*=l,u*=l,n=Math.sin(i),h=1-(r=Math.cos(i)),t[0]=o*o*h+r,t[1]=a*o*h+u*n,t[2]=u*o*h-a*n,t[3]=0,t[4]=o*a*h-u*n,t[5]=a*a*h+r,t[6]=u*a*h+o*n,t[7]=0,t[8]=o*u*h+a*n,t[9]=a*u*h-o*n,t[10]=u*u*h+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},wi=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Si=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ti=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},bi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=e+e,a=n+n,u=r+r,l=e*o,c=e*a,f=e*u,d=n*a,p=n*u,m=r*u,y=h*o,g=h*a,M=h*u;return t[0]=1-(d+m),t[1]=c+M,t[2]=f-g,t[3]=0,t[4]=c-M,t[5]=1-(l+m),t[6]=p+y,t[7]=0,t[8]=f+g,t[9]=p-y,t[10]=1-(l+d),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},vi=function(t,s){var e=new i(3),n=-s[0],r=-s[1],h=-s[2],o=s[3],a=s[4],u=s[5],l=s[6],c=s[7],f=n*n+r*r+h*h+o*o;return f>0?(e[0]=2*(a*o+c*n+u*h-l*r)/f,e[1]=2*(u*o+c*r+l*n-a*h)/f,e[2]=2*(l*o+c*h+a*r-u*n)/f):(e[0]=2*(a*o+c*n+u*h-l*r),e[1]=2*(u*o+c*r+l*n-a*h),e[2]=2*(l*o+c*h+a*r-u*n)),bi(t,s,e),t},xi=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},Ci=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[4],h=s[5],o=s[6],a=s[8],u=s[9],l=s[10];return t[0]=Math.hypot(i,e,n),t[1]=Math.hypot(r,h,o),t[2]=Math.hypot(a,u,l),t},Gi=function(t,s){var e=new i(3);Ci(e,s);var n=1/e[0],r=1/e[1],h=1/e[2],o=s[0]*n,a=s[1]*r,u=s[2]*h,l=s[4]*n,c=s[5]*r,f=s[6]*h,d=s[8]*n,p=s[9]*r,m=s[10]*h,y=o+c+m,g=0;return y>0?(g=2*Math.sqrt(y+1),t[3]=.25*g,t[0]=(f-p)/g,t[1]=(d-u)/g,t[2]=(a-l)/g):o>c&&o>m?(g=2*Math.sqrt(1+o-c-m),t[3]=(f-p)/g,t[0]=.25*g,t[1]=(a+l)/g,t[2]=(d+u)/g):c>m?(g=2*Math.sqrt(1+c-o-m),t[3]=(d-u)/g,t[0]=(a+l)/g,t[1]=.25*g,t[2]=(f+p)/g):(g=2*Math.sqrt(1+m-o-c),t[3]=(a-l)/g,t[0]=(d+u)/g,t[1]=(f+p)/g,t[2]=.25*g),t},Ii=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var n=e[0],r=e[1],h=e[2],o=e[4],a=e[5],u=e[6],l=e[8],c=e[9],f=e[10];i[0]=Math.hypot(n,r,h),i[1]=Math.hypot(o,a,u),i[2]=Math.hypot(l,c,f);var d=1/i[0],p=1/i[1],m=1/i[2],y=n*d,g=r*p,M=h*m,w=o*d,S=a*p,T=u*m,b=l*d,v=c*p,x=f*m,C=y+S+x,G=0;return C>0?(G=2*Math.sqrt(C+1),t[3]=.25*G,t[0]=(T-v)/G,t[1]=(b-M)/G,t[2]=(g-w)/G):y>S&&y>x?(G=2*Math.sqrt(1+y-S-x),t[3]=(T-v)/G,t[0]=.25*G,t[1]=(g+w)/G,t[2]=(b+M)/G):S>x?(G=2*Math.sqrt(1+S-y-x),t[3]=(b-M)/G,t[0]=(g+w)/G,t[1]=.25*G,t[2]=(T+v)/G):(G=2*Math.sqrt(1+x-y-S),t[3]=(g-w)/G,t[0]=(b+M)/G,t[1]=(T+v)/G,t[2]=.25*G),t},Ni=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3],a=n+n,u=r+r,l=h+h,c=n*a,f=n*u,d=n*l,p=r*u,m=r*l,y=h*l,g=o*a,M=o*u,w=o*l,S=e[0],T=e[1],b=e[2];return t[0]=(1-(p+y))*S,t[1]=(f+w)*S,t[2]=(d-M)*S,t[3]=0,t[4]=(f-w)*T,t[5]=(1-(c+y))*T,t[6]=(m+g)*T,t[7]=0,t[8]=(d+M)*b,t[9]=(m-g)*b,t[10]=(1-(c+p))*b,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ei=function(t,s,i,e,n){var r=s[0],h=s[1],o=s[2],a=s[3],u=r+r,l=h+h,c=o+o,f=r*u,d=r*l,p=r*c,m=h*l,y=h*c,g=o*c,M=a*u,w=a*l,S=a*c,T=e[0],b=e[1],v=e[2],x=n[0],C=n[1],G=n[2],I=(1-(m+g))*T,N=(d+S)*T,E=(p-w)*T,D=(d-S)*b,_=(1-(f+g))*b,A=(y+M)*b,L=(p+w)*v,O=(y-M)*v,R=(1-(f+m))*v;return t[0]=I,t[1]=N,t[2]=E,t[3]=0,t[4]=D,t[5]=_,t[6]=A,t[7]=0,t[8]=L,t[9]=O,t[10]=R,t[11]=0,t[12]=i[0]+x-(I*x+D*C+L*G),t[13]=i[1]+C-(N*x+_*C+O*G),t[14]=i[2]+G-(E*x+A*C+R*G),t[15]=1,t},Di=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,u=i*h,l=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,y=r*o,g=r*a;return t[0]=1-c-p,t[1]=l+g,t[2]=f-y,t[3]=0,t[4]=l-g,t[5]=1-u-p,t[6]=d+m,t[7]=0,t[8]=f+y,t[9]=d-m,t[10]=1-u-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},_i=function(t,s,i,e,n,r,h){var o=1/(i-s),a=1/(n-e),u=1/(r-h);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(n+e)*a,t[10]=(h+r)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*r*2*u,t[15]=0,t},Ai=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=(n+e)*h,t[14]=2*n*e*h}else t[10]=-1,t[14]=-2*e;return t},Li=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=n*h,t[14]=n*e*h}else t[10]=-1,t[14]=-e;return t},Oi=function(t,s,i,e){var n=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),h=Math.tan(s.leftDegrees*Math.PI/180),o=Math.tan(s.rightDegrees*Math.PI/180),a=2/(h+o),u=2/(n+r);return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(h-o)*a*.5,t[9]=(n-r)*u*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},Ri=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),u=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=(h+r)*u,t[15]=1,t},Pi=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),u=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=u,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=r*u,t[15]=1,t},ki=function(t,i,e,n){var r,h,o,a,u,l,c,f,d,p,m=i[0],y=i[1],g=i[2],M=n[0],w=n[1],S=n[2],T=e[0],b=e[1],v=e[2];return Math.abs(m-T)<s&&Math.abs(y-b)<s&&Math.abs(g-v)<s?ni(t):(c=m-T,f=y-b,d=g-v,r=w*(d*=p=1/Math.hypot(c,f,d))-S*(f*=p),h=S*(c*=p)-M*d,o=M*f-w*c,(p=Math.hypot(r,h,o))?(r*=p=1/p,h*=p,o*=p):(r=0,h=0,o=0),a=f*o-d*h,u=d*r-c*o,l=c*h-f*r,(p=Math.hypot(a,u,l))?(a*=p=1/p,u*=p,l*=p):(a=0,u=0,l=0),t[0]=r,t[1]=a,t[2]=c,t[3]=0,t[4]=h,t[5]=u,t[6]=f,t[7]=0,t[8]=o,t[9]=l,t[10]=d,t[11]=0,t[12]=-(r*m+h*y+o*g),t[13]=-(a*m+u*y+l*g),t[14]=-(c*m+f*y+d*g),t[15]=1,t)},Fi=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=e[0],a=e[1],u=e[2],l=n-i[0],c=r-i[1],f=h-i[2],d=l*l+c*c+f*f;d>0&&(l*=d=1/Math.sqrt(d),c*=d,f*=d);var p=a*f-u*c,m=u*l-o*f,y=o*c-a*l;return(d=p*p+m*m+y*y)>0&&(p*=d=1/Math.sqrt(d),m*=d,y*=d),t[0]=p,t[1]=m,t[2]=y,t[3]=0,t[4]=c*y-f*m,t[5]=f*p-l*y,t[6]=l*m-c*p,t[7]=0,t[8]=l,t[9]=c,t[10]=f,t[11]=0,t[12]=n,t[13]=r,t[14]=h,t[15]=1,t},ji=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},zi=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Bi=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Ui=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},Wi=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Qi=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},Ji=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Vi=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],u=t[6],l=t[7],c=t[8],f=t[9],d=t[10],p=t[11],m=t[12],y=t[13],g=t[14],M=t[15],w=i[0],S=i[1],T=i[2],b=i[3],v=i[4],x=i[5],C=i[6],G=i[7],I=i[8],N=i[9],E=i[10],D=i[11],_=i[12],A=i[13],L=i[14],O=i[15];return Math.abs(e-w)<=s*Math.max(1,Math.abs(e),Math.abs(w))&&Math.abs(n-S)<=s*Math.max(1,Math.abs(n),Math.abs(S))&&Math.abs(r-T)<=s*Math.max(1,Math.abs(r),Math.abs(T))&&Math.abs(h-b)<=s*Math.max(1,Math.abs(h),Math.abs(b))&&Math.abs(o-v)<=s*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-x)<=s*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(u-C)<=s*Math.max(1,Math.abs(u),Math.abs(C))&&Math.abs(l-G)<=s*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(c-I)<=s*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(f-N)<=s*Math.max(1,Math.abs(f),Math.abs(N))&&Math.abs(d-E)<=s*Math.max(1,Math.abs(d),Math.abs(E))&&Math.abs(p-D)<=s*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(m-_)<=s*Math.max(1,Math.abs(m),Math.abs(_))&&Math.abs(y-A)<=s*Math.max(1,Math.abs(y),Math.abs(A))&&Math.abs(g-L)<=s*Math.max(1,Math.abs(g),Math.abs(L))&&Math.abs(M-O)<=s*Math.max(1,Math.abs(M),Math.abs(O))},Yi=function(){var t=new i(3);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},Hi=function(t){var s=new i(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},qi=function(t){var s=t[0],i=t[1],e=t[2];return Math.hypot(s,i,e)},Zi=function(t,s,e){var n=new i(3);return n[0]=t,n[1]=s,n[2]=e,n},Ki=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Xi=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},$i=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},te=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},se=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},ie=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},ee=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},ne=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},re=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},he=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},oe=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ae=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},ue=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},le=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return Math.hypot(i,e,n)},ce=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return i*i+e*e+n*n},fe=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e},de=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},pe=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},me=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*i+e*e+n*n;return r>0&&(r=1/Math.sqrt(r)),t[0]=s[0]*r,t[1]=s[1]*r,t[2]=s[2]*r,t},ye=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},ge=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2];return t[0]=n*a-r*o,t[1]=r*h-e*a,t[2]=e*o-n*h,t},Me=function(t,s,i,e){var n=s[0],r=s[1],h=s[2];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t},we=function(t,s,i,e){var n=Math.acos(Math.min(Math.max(ye(s,i),-1),1)),r=Math.sin(n),h=Math.sin((1-e)*n)/r,o=Math.sin(e*n)/r;return t[0]=h*s[0]+o*i[0],t[1]=h*s[1]+o*i[1],t[2]=h*s[2]+o*i[2],t},Se=function(t,s,i,e,n,r){var h=r*r,o=h*(2*r-3)+1,a=h*(r-2)+r,u=h*(r-1),l=h*(3-2*r);return t[0]=s[0]*o+i[0]*a+e[0]*u+n[0]*l,t[1]=s[1]*o+i[1]*a+e[1]*u+n[1]*l,t[2]=s[2]*o+i[2]*a+e[2]*u+n[2]*l,t},Te=function(t,s,i,e,n,r){var h=1-r,o=h*h,a=r*r,u=o*h,l=3*r*o,c=3*a*h,f=a*r;return t[0]=s[0]*u+i[0]*l+e[0]*c+n[0]*f,t[1]=s[1]*u+i[1]*l+e[1]*c+n[1]*f,t[2]=s[2]*u+i[2]*l+e[2]*c+n[2]*f,t},be=function(t,s){s=s||1;var i=2*e()*Math.PI,n=2*e()-1,r=Math.sqrt(1-n*n)*s;return t[0]=Math.cos(i)*r,t[1]=Math.sin(i)*r,t[2]=n*s,t},ve=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[3]*e+i[7]*n+i[11]*r+i[15];return h=h||1,t[0]=(i[0]*e+i[4]*n+i[8]*r+i[12])/h,t[1]=(i[1]*e+i[5]*n+i[9]*r+i[13])/h,t[2]=(i[2]*e+i[6]*n+i[10]*r+i[14])/h,t},xe=function(t,s,i){var e=s[0],n=s[1],r=s[2];return t[0]=e*i[0]+n*i[3]+r*i[6],t[1]=e*i[1]+n*i[4]+r*i[7],t[2]=e*i[2]+n*i[5]+r*i[8],t},Ce=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],u=s[2],l=n*u-r*a,c=r*o-e*u,f=e*a-n*o,d=n*f-r*c,p=r*l-e*f,m=e*c-n*l,y=2*h;return l*=y,c*=y,f*=y,d*=2,p*=2,m*=2,t[0]=o+l+d,t[1]=a+c+p,t[2]=u+f+m,t},Ge=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0],r[1]=n[1]*Math.cos(e)-n[2]*Math.sin(e),r[2]=n[1]*Math.sin(e)+n[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},Ie=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[2]*Math.sin(e)+n[0]*Math.cos(e),r[1]=n[1],r[2]=n[2]*Math.cos(e)-n[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},Ne=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0]*Math.cos(e)-n[1]*Math.sin(e),r[1]=n[0]*Math.sin(e)+n[1]*Math.cos(e),r[2]=n[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},Ee=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2],a=Math.sqrt((i*i+e*e+n*n)*(r*r+h*h+o*o)),u=a&&ye(t,s)/a;return Math.acos(Math.min(Math.max(u,-1),1))},De=function(t){return t[0]=0,t[1]=0,t[2]=0,t},_e=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},Ae=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},Le=function(t,i){var e=t[0],n=t[1],r=t[2],h=i[0],o=i[1],a=i[2];return Math.abs(e-h)<=s*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-o)<=s*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=s*Math.max(1,Math.abs(r),Math.abs(a))},Oe=function(){var t=new i(4);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},Re=function(t){var s=new i(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Pe=function(t,s,e,n){var r=new i(4);return r[0]=t,r[1]=s,r[2]=e,r[3]=n,r},ke=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Fe=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},je=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},ze=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Be=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Ue=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},We=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Qe=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Je=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Ve=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Ye=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},He=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},qe=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Ze=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return Math.hypot(i,e,n,r)},Ke=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return i*i+e*e+n*n+r*r},Xe=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return Math.hypot(s,i,e,n)},$e=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return s*s+i*i+e*e+n*n},tn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},sn=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},en=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r;return h>0&&(h=1/Math.sqrt(h)),t[0]=i*h,t[1]=e*h,t[2]=n*h,t[3]=r*h,t},nn=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},rn=function(t,s,i,e){var n=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],h=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],u=i[2]*e[3]-i[3]*e[2],l=s[0],c=s[1],f=s[2],d=s[3];return t[0]=c*u-f*a+d*o,t[1]=-l*u+f*h-d*r,t[2]=l*a-c*h+d*n,t[3]=-l*o+c*r-f*n,t},hn=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t[3]=o+e*(i[3]-o),t},on=function(t,s){var i,n,r,h,o,a;s=s||1;do{o=(i=2*e()-1)*i+(n=2*e()-1)*n}while(o>=1);do{a=(r=2*e()-1)*r+(h=2*e()-1)*h}while(a>=1);var u=Math.sqrt((1-o)/a);return t[0]=s*i,t[1]=s*n,t[2]=s*r*u,t[3]=s*h*u,t},an=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3];return t[0]=i[0]*e+i[4]*n+i[8]*r+i[12]*h,t[1]=i[1]*e+i[5]*n+i[9]*r+i[13]*h,t[2]=i[2]*e+i[6]*n+i[10]*r+i[14]*h,t[3]=i[3]*e+i[7]*n+i[11]*r+i[15]*h,t},un=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2],u=i[3],l=u*e+o*r-a*n,c=u*n+a*e-h*r,f=u*r+h*n-o*e,d=-h*e-o*n-a*r;return t[0]=l*u+d*-h+c*-a-f*-o,t[1]=c*u+d*-o+f*-h-l*-a,t[2]=f*u+d*-a+l*-o-c*-h,t[3]=s[3],t},ln=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},cn=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},fn=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},dn=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=i[0],a=i[1],u=i[2],l=i[3];return Math.abs(e-o)<=s*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=s*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-u)<=s*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(h-l)<=s*Math.max(1,Math.abs(h),Math.abs(l))},pn=function(){var t=new i(4);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},mn=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},yn=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},gn=function(t,i){var e=2*Math.acos(i[3]),n=Math.sin(e/2);return n>s?(t[0]=i[0]/n,t[1]=i[1]/n,t[2]=i[2]/n):(t[0]=1,t[1]=0,t[2]=0),e},Mn=function(t,s){var i=V(t,s);return Math.acos(2*i*i-1)},wn=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],u=i[2],l=i[3];return t[0]=e*l+h*o+n*u-r*a,t[1]=n*l+h*a+r*o-e*u,t[2]=r*l+h*u+e*a-n*o,t[3]=h*l-e*o-n*a-r*u,t},Sn=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+h*o,t[1]=n*a+r*o,t[2]=r*a-n*o,t[3]=h*a-e*o,t},Tn=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a-r*o,t[1]=n*a+h*o,t[2]=r*a+e*o,t[3]=h*a-n*o,t},bn=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+n*o,t[1]=n*a-e*o,t[2]=r*a+h*o,t[3]=h*a-r*o,t},vn=function(t,s){var i=s[0],e=s[1],n=s[2];return t[0]=i,t[1]=e,t[2]=n,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-n*n)),t},xn=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=Math.exp(r),a=h>0?o*Math.sin(h)/h:0;return t[0]=i*a,t[1]=e*a,t[2]=n*a,t[3]=o*Math.cos(h),t},Cn=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=h>0?Math.atan2(h,r)/h:0;return t[0]=i*o,t[1]=e*o,t[2]=n*o,t[3]=.5*Math.log(i*i+e*e+n*n+r*r),t},Gn=function(t,s,i){return Cn(t,s),J(t,t,i),xn(t,t),t},In=function(t,i,e,n){var r,h,o,a,u,l=i[0],c=i[1],f=i[2],d=i[3],p=e[0],m=e[1],y=e[2],g=e[3];return(h=l*p+c*m+f*y+d*g)<0&&(h=-h,p=-p,m=-m,y=-y,g=-g),1-h>s?(r=Math.acos(h),o=Math.sin(r),a=Math.sin((1-n)*r)/o,u=Math.sin(n*r)/o):(a=1-n,u=n),t[0]=a*l+u*p,t[1]=a*c+u*m,t[2]=a*f+u*y,t[3]=a*d+u*g,t},Nn=function(t){var s=e(),i=e(),n=e(),r=Math.sqrt(1-s),h=Math.sqrt(s);return t[0]=r*Math.sin(2*Math.PI*i),t[1]=r*Math.cos(2*Math.PI*i),t[2]=h*Math.sin(2*Math.PI*n),t[3]=h*Math.cos(2*Math.PI*n),t},En=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r,o=h?1/h:0;return t[0]=-i*o,t[1]=-e*o,t[2]=-n*o,t[3]=r*o,t},Dn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},_n=function(t,s){var i,e=s[0]+s[4]+s[8];if(e>0)i=Math.sqrt(e+1),t[3]=.5*i,i=.5/i,t[0]=(s[5]-s[7])*i,t[1]=(s[6]-s[2])*i,t[2]=(s[1]-s[3])*i;else{var n=0;s[4]>s[0]&&(n=1),s[8]>s[3*n+n]&&(n=2);var r=(n+1)%3,h=(n+2)%3;i=Math.sqrt(s[3*n+n]-s[3*r+r]-s[3*h+h]+1),t[n]=.5*i,i=.5/i,t[3]=(s[3*r+h]-s[3*h+r])*i,t[r]=(s[3*r+n]+s[3*n+r])*i,t[h]=(s[3*h+n]+s[3*n+h])*i}return t},An=function(t,s,i,e){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n,h=Math.PI/360;s*=h,e*=h,i*=h;var o=Math.sin(s),a=Math.cos(s),u=Math.sin(i),l=Math.cos(i),c=Math.sin(e),f=Math.cos(e);switch(r){case"xyz":t[0]=o*l*f+a*u*c,t[1]=a*u*f-o*l*c,t[2]=a*l*c+o*u*f,t[3]=a*l*f-o*u*c;break;case"xzy":t[0]=o*l*f-a*u*c,t[1]=a*u*f-o*l*c,t[2]=a*l*c+o*u*f,t[3]=a*l*f+o*u*c;break;case"yxz":t[0]=o*l*f+a*u*c,t[1]=a*u*f-o*l*c,t[2]=a*l*c-o*u*f,t[3]=a*l*f+o*u*c;break;case"yzx":t[0]=o*l*f+a*u*c,t[1]=a*u*f+o*l*c,t[2]=a*l*c-o*u*f,t[3]=a*l*f-o*u*c;break;case"zxy":t[0]=o*l*f-a*u*c,t[1]=a*u*f+o*l*c,t[2]=a*l*c+o*u*f,t[3]=a*l*f-o*u*c;break;case"zyx":t[0]=o*l*f-a*u*c,t[1]=a*u*f+o*l*c,t[2]=a*l*c-o*u*f,t[3]=a*l*f+o*u*c;break;default:throw new Error("Unknown angle order "+r)}return t},Ln=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},On=function(t,i){return Math.abs(nn(t,i))>=1-s},Rn=function(){var t=new i(8);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},Pn=function(t){var s=new i(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},kn=function(t,s,e,n,r,h,o,a){var u=new i(8);return u[0]=t,u[1]=s,u[2]=e,u[3]=n,u[4]=r,u[5]=h,u[6]=o,u[7]=a,u},Fn=function(t,s,e,n,r,h,o){var a=new i(8);a[0]=t,a[1]=s,a[2]=e,a[3]=n;var u=.5*r,l=.5*h,c=.5*o;return a[4]=u*n+l*e-c*s,a[5]=l*n+c*t-u*e,a[6]=c*n+u*s-l*t,a[7]=-u*t-l*s-c*e,a},jn=function(t,s,i){var e=.5*i[0],n=.5*i[1],r=.5*i[2],h=s[0],o=s[1],a=s[2],u=s[3];return t[0]=h,t[1]=o,t[2]=a,t[3]=u,t[4]=e*u+n*a-r*o,t[5]=n*u+r*h-e*a,t[6]=r*u+e*o-n*h,t[7]=-e*h-n*o-r*a,t},zn=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},Bn=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Un=function(t,s){var e=pn();Gi(e,s);var n=new i(3);return xi(n,s),jn(t,e,n),t},Wn=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},Qn=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Jn=function(t,s,i,e,n,r,h,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t},Vn=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},Yn=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Hn=function(t,s){var i=s[4],e=s[5],n=s[6],r=s[7],h=-s[0],o=-s[1],a=-s[2],u=s[3];return t[0]=2*(i*u+r*h+e*a-n*o),t[1]=2*(e*u+r*o+n*h-i*a),t[2]=2*(n*u+r*a+i*o-e*h),t},qn=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=.5*i[0],a=.5*i[1],u=.5*i[2],l=s[4],c=s[5],f=s[6],d=s[7];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=h*o+n*u-r*a+l,t[5]=h*a+r*o-e*u+c,t[6]=h*u+e*a-n*o+f,t[7]=-e*o-n*a-r*u+d,t},Zn=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=o*h+l*e+a*r-u*n,f=a*h+l*n+u*e-o*r,d=u*h+l*r+o*n-a*e,p=l*h-o*e-a*n-u*r;return Sn(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Kn=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=o*h+l*e+a*r-u*n,f=a*h+l*n+u*e-o*r,d=u*h+l*r+o*n-a*e,p=l*h-o*e-a*n-u*r;return Tn(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Xn=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=o*h+l*e+a*r-u*n,f=a*h+l*n+u*e-o*r,d=u*h+l*r+o*n-a*e,p=l*h-o*e-a*n-u*r;return bn(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},$n=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],u=s[2],l=s[3];return t[0]=o*h+l*e+a*r-u*n,t[1]=a*h+l*n+u*e-o*r,t[2]=u*h+l*r+o*n-a*e,t[3]=l*h-o*e-a*n-u*r,o=s[4],a=s[5],u=s[6],l=s[7],t[4]=o*h+l*e+a*r-u*n,t[5]=a*h+l*n+u*e-o*r,t[6]=u*h+l*r+o*n-a*e,t[7]=l*h-o*e-a*n-u*r,t},tr=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],u=i[2],l=i[3];return t[0]=e*l+h*o+n*u-r*a,t[1]=n*l+h*a+r*o-e*u,t[2]=r*l+h*u+e*a-n*o,t[3]=h*l-e*o-n*a-r*u,o=i[4],a=i[5],u=i[6],l=i[7],t[4]=e*l+h*o+n*u-r*a,t[5]=n*l+h*a+r*o-e*u,t[6]=r*l+h*u+e*a-n*o,t[7]=h*l-e*o-n*a-r*u,t},sr=function(t,i,e,n){if(Math.abs(n)<s)return Wn(t,i);var r=Math.hypot(e[0],e[1],e[2]);n*=.5;var h=Math.sin(n),o=h*e[0]/r,a=h*e[1]/r,u=h*e[2]/r,l=Math.cos(n),c=i[0],f=i[1],d=i[2],p=i[3];t[0]=c*l+p*o+f*u-d*a,t[1]=f*l+p*a+d*o-c*u,t[2]=d*l+p*u+c*a-f*o,t[3]=p*l-c*o-f*a-d*u;var m=i[4],y=i[5],g=i[6],M=i[7];return t[4]=m*l+M*o+y*u-g*a,t[5]=y*l+M*a+g*o-m*u,t[6]=g*l+M*u+m*a-y*o,t[7]=M*l-m*o-y*a-g*u,t},ir=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},er=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[4],a=i[5],u=i[6],l=i[7],c=s[4],f=s[5],d=s[6],p=s[7],m=i[0],y=i[1],g=i[2],M=i[3];return t[0]=e*M+h*m+n*g-r*y,t[1]=n*M+h*y+r*m-e*g,t[2]=r*M+h*g+e*y-n*m,t[3]=h*M-e*m-n*y-r*g,t[4]=e*l+h*o+n*u-r*a+c*M+p*m+f*g-d*y,t[5]=n*l+h*a+r*o-e*u+f*M+p*y+d*m-c*g,t[6]=r*l+h*u+e*a-n*o+d*M+p*g+c*y-f*m,t[7]=h*l-e*o-n*a-r*u+p*M-c*m-f*y-d*g,t},nr=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},rr=function(t,s,i,e){var n=1-e;return ot(s,i)<0&&(e=-e),t[0]=s[0]*n+i[0]*e,t[1]=s[1]*n+i[1]*e,t[2]=s[2]*n+i[2]*e,t[3]=s[3]*n+i[3]*e,t[4]=s[4]*n+i[4]*e,t[5]=s[5]*n+i[5]*e,t[6]=s[6]*n+i[6]*e,t[7]=s[7]*n+i[7]*e,t},hr=function(t,s){var i=lt(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},or=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},ar=function(t,s){var i=lt(s);if(i>0){i=Math.sqrt(i);var e=s[0]/i,n=s[1]/i,r=s[2]/i,h=s[3]/i,o=s[4],a=s[5],u=s[6],l=s[7],c=e*o+n*a+r*u+h*l;t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=(o-e*c)/i,t[5]=(a-n*c)/i,t[6]=(u-r*c)/i,t[7]=(l-h*c)/i}return t},ur=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},lr=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},cr=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],u=t[6],l=t[7],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],y=i[5],g=i[6],M=i[7];return Math.abs(e-c)<=s*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(n-f)<=s*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=s*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(h-p)<=s*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=s*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-y)<=s*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(u-g)<=s*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(l-M)<=s*Math.max(1,Math.abs(l),Math.abs(M))},fr=function(){var t=new i(2);return i!=Float32Array&&(t[0]=0,t[1]=0),t},dr=function(t){var s=new i(2);return s[0]=t[0],s[1]=t[1],s},pr=function(t,s){var e=new i(2);return e[0]=t,e[1]=s,e},mr=function(t,s){return t[0]=s[0],t[1]=s[1],t},yr=function(t,s,i){return t[0]=s,t[1]=i,t},gr=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},Mr=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},wr=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},Sr=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},Tr=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},br=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},vr=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},xr=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Cr=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Gr=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},Ir=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},Nr=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return Math.hypot(i,e)},Er=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},Dr=function(t){var s=t[0],i=t[1];return Math.hypot(s,i)},_r=function(t){var s=t[0],i=t[1];return s*s+i*i},Ar=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},Lr=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},Or=function(t,s){var i=s[0],e=s[1],n=i*i+e*e;return n>0&&(n=1/Math.sqrt(n)),t[0]=s[0]*n,t[1]=s[1]*n,t},Rr=function(t,s){return t[0]*s[0]+t[1]*s[1]},Pr=function(t,s,i){var e=s[0]*i[1]-s[1]*i[0];return t[0]=t[1]=0,t[2]=e,t},kr=function(t,s,i,e){var n=s[0],r=s[1];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t},Fr=function(t,s){s=s||1;var i=2*e()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},jr=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n,t[1]=i[1]*e+i[3]*n,t},zr=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n+i[4],t[1]=i[1]*e+i[3]*n+i[5],t},Br=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[3]*n+i[6],t[1]=i[1]*e+i[4]*n+i[7],t},Ur=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[4]*n+i[12],t[1]=i[1]*e+i[5]*n+i[13],t},Wr=function(t,s,i,e){var n=s[0]-i[0],r=s[1]-i[1],h=Math.sin(e),o=Math.cos(e);return t[0]=n*o-r*h+i[0],t[1]=n*h+r*o+i[1],t},Qr=function(t,s){var i=t[0],e=t[1],n=s[0],r=s[1],h=Math.sqrt((i*i+e*e)*(n*n+r*r)),o=h&&(i*n+e*r)/h;return Math.acos(Math.min(Math.max(o,-1),1))},Jr=function(t){return t[0]=0,t[1]=0,t},Vr=function(t){return"vec2("+t[0]+", "+t[1]+")"},Yr=function(t,s){return t[0]===s[0]&&t[1]===s[1]},Hr=function(t,i){var e=t[0],n=t[1],r=i[0],h=i[1];return Math.abs(e-r)<=s*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(n-h)<=s*Math.max(1,Math.abs(n),Math.abs(h))};s=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,e=Math.random,n="zyx",r=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),h={__proto__:null,EPSILON:s,get i(){return i},h:e,o:n,u:It,l:Nt,equals:Et},o=zt,a=qt,u=Object.freeze({__proto__:null,create:Dt,clone:_t,m:At,identity:Lt,M:Ot,set:Rt,S:Pt,T:kt,v:Ft,C:jt,multiply:zt,rotate:Bt,scale:Ut,G:Wt,I:Qt,N:Jt,D:Vt,_:Yt,add:Ht,A:qt,L:Zt,equals:Kt,O:Xt,R:$t,mul:o,sub:a}),l=as,c=Ms,f=Object.freeze({__proto__:null,create:ts,clone:ss,m:is,identity:es,M:ns,set:rs,T:hs,C:os,multiply:as,rotate:us,scale:ls,translate:cs,G:fs,I:ds,P:ps,N:ms,D:ys,add:gs,A:Ms,O:ws,R:Ss,L:Ts,equals:bs,mul:l,sub:c}),d=Os,p=Hs,m=Object.freeze({__proto__:null,create:vs,F:xs,clone:Cs,m:Gs,M:Is,set:Ns,identity:Es,S:Ds,T:_s,v:As,C:Ls,multiply:Os,translate:Rs,rotate:Ps,scale:ks,P:Fs,G:js,I:zs,j:Bs,B:Us,U:Ws,W:Qs,N:Js,D:Vs,add:Ys,A:Hs,O:qs,R:Zs,L:Ks,equals:Xs,mul:d,sub:p}),y=Ai,g=Ri,M=ui,w=Ui,S=Object.freeze({__proto__:null,create:$s,clone:ti,m:si,M:ii,set:ei,identity:ni,S:ri,T:hi,v:oi,C:ai,multiply:ui,translate:li,scale:ci,rotate:fi,J:di,V:pi,Y:mi,P:yi,I:gi,G:Mi,H:wi,Z:Si,K:Ti,X:bi,$:vi,tt:xi,st:Ci,it:Gi,et:Ii,nt:Ni,rt:Ei,B:Di,ht:_i,ot:Ai,perspective:y,ut:Li,lt:Oi,ct:Ri,ft:g,dt:Pi,yt:ki,gt:Fi,N:ji,D:zi,add:Bi,A:Ui,O:Wi,R:Qi,L:Ji,equals:Vi,mul:M,sub:w}),T=te,b=se,v=ie,x=le,C=ce,G=qi,I=fe,t=Yi(),N=function(s,i,e,n,r,h){var o,a;for(i||(i=3),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2];return s},E=Object.freeze({__proto__:null,create:Yi,clone:Hi,length:qi,M:Zi,m:Ki,set:Xi,add:$i,A:te,multiply:se,Mt:ie,ceil:ee,floor:ne,min:re,max:he,round:oe,scale:ae,wt:ue,St:le,Tt:ce,bt:fe,vt:de,inverse:pe,normalize:me,xt:ye,Ct:ge,Gt:Me,It:we,Nt:Se,Et:Te,random:be,Dt:ve,_t:xe,At:Ce,J:Ge,V:Ie,Y:Ne,angle:Ee,Lt:De,N:_e,L:Ae,equals:Le,sub:T,mul:b,div:v,Ot:x,Rt:C,Pt:G,kt:I,forEach:N}),D=ze,_=Be,A=Ue,L=Ze,O=Ke,R=Xe,P=$e,k=function(){var t=Oe();return function(s,i,e,n,r,h){var o,a;for(i||(i=4),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],t[3]=s[o+3],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2],s[o+3]=t[3];return s}}(),F=Object.freeze({__proto__:null,create:Oe,clone:Re,M:Pe,m:ke,set:Fe,add:je,A:ze,multiply:Be,Mt:Ue,ceil:We,floor:Qe,min:Je,max:Ve,round:Ye,scale:He,wt:qe,St:Ze,Tt:Ke,length:Xe,bt:$e,vt:tn,inverse:sn,normalize:en,xt:nn,Ct:rn,Gt:hn,random:on,Dt:an,At:un,Lt:ln,N:cn,L:fn,equals:dn,sub:D,mul:_,div:A,Ot:L,Rt:O,Pt:R,kt:P,forEach:k}),j=Re,z=Pe,B=ke,U=Fe,W=je,Q=wn,J=He,V=nn,Y=hn,q=H=Xe,K=Z=$e,X=en,$=fn,tt=function(){var t=Yi(),s=Zi(1,0,0),i=Zi(0,1,0);return function(e,n,r){var h=ye(n,r);return h<-.999999?(ge(t,s,n),G(t)<1e-6&&ge(t,i,n),me(t,t),yn(e,t,Math.PI),e):h>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(ge(t,n,r),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1+h,X(e,e))}}(),st=function(){var t=pn(),s=pn();return function(i,e,n,r,h,o){return In(t,e,h,o),In(s,n,r,o),In(i,t,s,2*o*(1-o)),i}}(),it=function(){var t=vs();return function(s,i,e,n){return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-i[0],t[5]=-i[1],t[8]=-i[2],X(s,_n(s,t))}}(),et=Object.freeze({__proto__:null,create:pn,identity:mn,Ft:yn,jt:gn,zt:Mn,multiply:wn,J:Sn,V:Tn,Y:bn,Bt:vn,exp:xn,Ut:Cn,pow:Gn,It:In,random:Nn,T:En,Wt:Dn,Qt:_n,Jt:An,N:Ln,clone:j,M:z,m:B,set:U,add:W,mul:Q,scale:J,xt:V,Gt:Y,length:H,Pt:q,bt:Z,kt:K,normalize:X,L:$,equals:On,Vt:tt,Yt:st,Ht:it}),nt=B,rt=B,ht=er,ot=V,ut=at=H,ct=lt=Z,ft=Object.freeze({__proto__:null,create:Rn,clone:Pn,M:kn,qt:Fn,X:jn,P:zn,G:Bn,F:Un,m:Wn,identity:Qn,set:Jn,Zt:nt,Kt:Vn,Xt:rt,$t:Yn,tt:Hn,translate:qn,J:Zn,V:Kn,Y:Xn,ts:$n,ss:tr,es:sr,add:ir,multiply:er,mul:ht,scale:nr,xt:ot,Gt:rr,T:hr,Wt:or,length:at,Pt:ut,bt:lt,kt:ct,normalize:ar,N:ur,L:lr,equals:cr}),dt=Dr,pt=Mr,mt=wr,yt=Sr,gt=Nr,Mt=Er,wt=_r,St=function(){var t=fr();return function(s,i,e,n,r,h){var o,a;for(i||(i=2),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],r(t,t,h),s[o]=t[0],s[o+1]=t[1];return s}}(),Tt=Object.freeze({__proto__:null,create:fr,clone:dr,M:pr,m:mr,set:yr,add:gr,A:Mr,multiply:wr,Mt:Sr,ceil:Tr,floor:br,min:vr,max:xr,round:Cr,scale:Gr,wt:Ir,St:Nr,Tt:Er,length:Dr,bt:_r,vt:Ar,inverse:Lr,normalize:Or,xt:Rr,Ct:Pr,Gt:kr,random:Fr,ns:jr,rs:zr,_t:Br,Dt:Ur,rotate:Wr,angle:Qr,Lt:Jr,N:Vr,L:Yr,equals:Hr,Pt:dt,sub:pt,mul:mt,div:yt,Ot:gt,Rt:Mt,kt:wt,forEach:St}),globalThis.hs=h,globalThis.hs.us=u,globalThis.hs.ls=f,globalThis.hs.cs=m,globalThis.hs.fs=S,globalThis.hs.ds=et,globalThis.hs.ps=ft,globalThis.hs.ys=Tt,globalThis.hs.gs=E,globalThis.hs.Ms=F}var t,s,i,e,n,r,h,o,a,u,l,c,f,d,p,m,y,g,M,w,S,T,b,v,x,C,G,I,N,E,D,_,A,L,O,R,P,k,F,j,z,B,U,W,Q,J,V,Y,H,q,Z,K,X,$,tt,st,it,et,nt,rt,ht,ot,at,ut,lt,ct,ft,dt,pt,mt,yt,gt,Mt,wt,St,Tt,bt,vt,xt,Ct;{let qr=function(t,s,i){i=i||0;var e,n,r,h,o,a,u,l=[0,0];return e=t[1][1]-t[0][1],n=t[0][0]-t[1][0],r=e*t[0][0]+n*t[0][1],h=s[1][1]-s[0][1],o=s[0][0]-s[1][0],a=h*s[0][0]+o*s[0][1],Th(u=e*o-h*n,0,i)||(l[0]=(o*r-n*a)/u,l[1]=(e*a-h*r)/u),l},Zr=function(t,s,i,e){var n=s[0]-t[0],r=s[1]-t[1],h=e[0]-i[0],o=e[1]-i[1];if(h*r-o*n==0)return!1;var a=(n*(i[1]-t[1])+r*(t[0]-i[0]))/(h*r-o*n),u=(h*(t[1]-i[1])+o*(i[0]-t[0]))/(o*n-h*r);return a>=0&&a<=1&&u>=0&&u<=1},Kr=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},Xr=function(t,s,i){return Kr(t,s,i)>0},$r=function(t,s,i){return Kr(t,s,i)>=0},th=function(t,s,i){return Kr(t,s,i)<0},sh=function(t,s,i){return Kr(t,s,i)<=0},ih=function(t,s,i,e){if(e){var n=bt,r=vt;n[0]=s[0]-t[0],n[1]=s[1]-t[1],r[0]=i[0]-s[0],r[1]=i[1]-s[1];var h=n[0]*r[0]+n[1]*r[1],o=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=Math.sqrt(r[0]*r[0]+r[1]*r[1]);return Math.acos(h/(o*a))<e}return 0===Kr(t,s,i)},eh=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},nh=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},rh=function(t){t.length=0},hh=function(t,s,i,e){for(var n=i;n<e;n++)t.push(s[n])},oh=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!Xr(nh(t,s-1),nh(t,s),nh(t,s+1))&&(ah(t),!0)},ah=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},uh=function(t,s){return th(nh(t,s-1),nh(t,s),nh(t,s+1))},lh=function(t,s,i){var e,n,r=xt,h=Ct;if($r(nh(t,s+1),nh(t,s),nh(t,i))&&sh(nh(t,s-1),nh(t,s),nh(t,i)))return!1;n=eh(nh(t,s),nh(t,i));for(var o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&$r(nh(t,s),nh(t,i),nh(t,o+1))&&sh(nh(t,s),nh(t,i),nh(t,o))&&(r[0]=nh(t,s),r[1]=nh(t,i),h[0]=nh(t,o),h[1]=nh(t,o+1),e=qr(r,h),eh(nh(t,s),e)<n))return!1;return!0},ch=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&Zr(nh(t,s),nh(t,i),nh(t,e),nh(t,e+1)))return!1;return!0},fh=function(t,s,i,e){var n=e||[];if(rh(n),s<i)for(var r=s;r<=i;r++)n.push(t[r]);else{for(r=0;r<=i;r++)n.push(t[r]);for(r=s;r<t.length;r++)n.push(t[r])}return n},dh=function(t){for(var s=[],i=[],e=[],n=[],r=Number.MAX_VALUE,h=0;h<t.length;++h)if(uh(t,h))for(var o=0;o<t.length;++o)if(lh(t,h,o)){i=dh(fh(t,h,o,n)),e=dh(fh(t,o,h,n));for(var a=0;a<e.length;a++)i.push(e[a]);i.length<r&&(s=i,r=i.length,s.push([nh(t,h),nh(t,o)]))}return s},ph=function(t){var s=dh(t);return s.length>0?mh(t,s):[t]},mh=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var n=s[e],r=0;r<i.length;r++){var h=mh(i[r],n);if(h){i.splice(r,1),i.push(h[0],h[1]);break}}return i}return n=s,e=t.indexOf(n[0]),r=t.indexOf(n[1]),-1!==e&&-1!==r&&[fh(t,e,r),fh(t,r,e)]},yh=function(t){var s,i=t;for(s=0;s<i.length-1;s++)for(var e=0;e<s-1;e++)if(Zr(i[s],i[s+1],i[e],i[e+1]))return!1;for(s=1;s<i.length-2;s++)if(Zr(i[0],i[i.length-1],i[s],i[s+1]))return!1;return!0},gh=function(t,s,i,e,n){n=n||0;var r=s[1]-t[1],h=t[0]-s[0],o=r*t[0]+h*t[1],a=e[1]-i[1],u=i[0]-e[0],l=a*i[0]+u*i[1],c=r*u-a*h;return Th(c,0,n)?[0,0]:[(u*o-h*l)/c,(r*l-a*o)/c]},Mh=function(t,s,i,e,n,r,h){r=r||100,h=h||0,n=n||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],u=[0,0],l=0,c=0,f=0,d=0,p=0,m=0,y=0,g=[],M=[],w=t,S=t;if(S.length<3)return s;if(++h>r)return console.warn("quickDecomp: max level ("+r+") reached."),s;for(var T=0;T<t.length;++T)if(uh(w,T)){i.push(w[T]),l=c=Number.MAX_VALUE;for(var b=0;b<t.length;++b)Xr(nh(w,T-1),nh(w,T),nh(w,b))&&sh(nh(w,T-1),nh(w,T),nh(w,b-1))&&(u=gh(nh(w,T-1),nh(w,T),nh(w,b),nh(w,b-1)),th(nh(w,T+1),nh(w,T),u)&&(f=eh(w[T],u))<c&&(c=f,a=u,m=b)),Xr(nh(w,T+1),nh(w,T),nh(w,b+1))&&sh(nh(w,T+1),nh(w,T),nh(w,b))&&(u=gh(nh(w,T+1),nh(w,T),nh(w,b),nh(w,b+1)),Xr(nh(w,T-1),nh(w,T),u)&&(f=eh(w[T],u))<l&&(l=f,o=u,p=b));if(m===(p+1)%t.length)u[0]=(a[0]+o[0])/2,u[1]=(a[1]+o[1])/2,e.push(u),T<p?(hh(g,w,T,p+1),g.push(u),M.push(u),0!==m&&hh(M,w,m,w.length),hh(M,w,0,T+1)):(0!==T&&hh(g,w,T,w.length),hh(g,w,0,p+1),g.push(u),M.push(u),hh(M,w,m,T+1));else{if(m>p&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(b=m;b<=p;++b)$r(nh(w,T-1),nh(w,T),nh(w,b))&&sh(nh(w,T+1),nh(w,T),nh(w,b))&&(f=eh(nh(w,T),nh(w,b)))<d&&ch(w,T,b)&&(d=f,y=b%t.length);T<y?(hh(g,w,T,y+1),0!==y&&hh(M,w,y,S.length),hh(M,w,0,T+1)):(0!==T&&hh(g,w,T,S.length),hh(g,w,0,y+1),hh(M,w,y,T+1))}return g.length<M.length?(Mh(g,s,i,e,n,r,h),Mh(M,s,i,e,n,r,h)):(Mh(M,s,i,e,n,r,h),Mh(g,s,i,e,n,r,h)),s}return s.push(t),s},wh=function(t,s){for(var i=0,e=t.length-1;t.length>3&&e>=0;--e)ih(nh(t,e-1),nh(t,e),nh(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},Sh=function(t,s){for(var i=t.length-1;i>=1;--i)for(var e=t[i],n=i-1;n>=0;--n)bh(e,t[n],s)&&t.splice(i,1)},Th=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},bh=function(t,s,i){return Th(t[0],s[0],i)&&Th(t[1],s[1],i)};bt=[],vt=[],xt=[],Ct=[],self.ws={Ss:ph,Ts:Mh,bs:yh,vs:wh,xs:Sh,Cs:oh}}{let vh=!1,xh=!1,Ch="dev";const Gh=Symbol("Construct internal API token");let Ih=16;const Nh=self.Gs=class{constructor(){throw TypeError("static class can't be instantiated")}static Is(){if(Ih<=0)throw new Error("cannot obtain internal API token");return--Ih,Gh}static Ns(){vh=!0}static Es(){return vh}static Ds(){xh=!0}static _s(){return xh}static As(t){Ch=t}static Ls(){return Ch}static Os(){return"final"===Ch}};Nh.Rs=!1,Nh.Ps=!1,Nh.hardwareConcurrency=navigator.hardwareConcurrency||2,self.ks={}}{const Eh=self.Gs;Eh.Fs=class{constructor(t){this.js=t,this.zs=new Map,this.Bs()}Bs(){let t=this.js;(t.startsWith("?")||t.startsWith("#"))&&(t=t.substr(1));const s=t.split("&");for(const t of s)this.Us(t)}Us(t){if(!t)return;if(!t.includes("="))return void this.zs.set(t,null);const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.zs.set(i,e)}Ws(){for(const t of this.zs)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}Qs(t){return this.zs.has(t)}Js(t){const s=this.zs.get(t);return void 0===s?null:s}Vs(){history.replaceState("",document.title,location.pathname+location.search)}Ys(t){this.js=t,this.zs.clear(),this.Bs()}},Eh.Hs=new Eh.Fs(location.search),Eh.qs=new Eh.Fs(location.hash),Eh.Hs.Qs("perf")&&(Eh.Zs=!0),"dev"!==Eh.Hs.Js("mode")&&Eh.As("final")}{let Dh=function(t){const s=parseFloat(t);return Lh.get(s)||(s>=13?"11":"NT "+t)};0;const _h=self.Gs,Ah="(unknown)";_h.Ks={Xs:Ah,$s:Ah,ti:Ah,si:Ah,ii:NaN,ei:Ah,ni:"browser",ri:!0,hi:!1,oi:!1,ai:!1,li:async()=>{}};const Lh=new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]]),Oh=navigator.userAgent,Rh=navigator.userAgentData;if(Rh&&Rh.brands.length>0){let Ph=function(t){let s="",i="",e="",n="";for(const r of t){const t=kh.get(r.brand);!s&&t&&(s=t,i=r.version);const h=Fh.get(r.brand);!e&&h&&(e=h,n=r.version)}s||"Chromium"!==e||(_h.Ks.ti="Chromium",_h.Ks.si=n),_h.Ks.ti=s||Ah,_h.Ks.si=i||Ah,_h.Ks.ei=e||Ah};_h.Ks.Xs=Rh.platform,_h.Ks.hi=Rh.mobile,_h.Ks.ri=!_h.Ks.hi;const kh=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),Fh=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);Ph(Rh.brands);let jh=!1;_h.Ks.li=async()=>{if(!jh)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);Ph(t.fullVersionList),"Windows"===_h.Ks.Xs?_h.Ks.$s=Dh(t.platformVersion):_h.Ks.$s=t.platformVersion,jh=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let zh=function(t,s){const i=Array.isArray(t)?t:[t];for(const t of i){const i=t.exec(Oh);if(i){s(i);break}}};zh(/windows\s+nt\s+([\d\.]+)/i,(t=>{_h.Ks.Xs="Windows";const s=t[1];_h.Ks.$s=Dh(s)})),zh(/mac\s+os\s+x\s+([\d\._]+)/i,(t=>{_h.Ks.Xs="macOS",_h.Ks.$s=t[1].replace(/_/g,".")})),zh(/CrOS/,(()=>{_h.Ks.Xs="Chrome OS"})),zh(/linux|openbsd|freebsd|netbsd/i,(()=>{_h.Ks.Xs="Linux"})),zh(/android/i,(()=>{_h.Ks.Xs="Android"})),zh(/android\s+([\d\.]+)/i,(t=>{_h.Ks.Xs="Android",_h.Ks.$s=t[1]})),_h.Ks.Xs===Ah&&(zh(/(iphone|ipod|ipad)/i,(t=>{_h.Ks.Xs="iOS"})),zh([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],(t=>{_h.Ks.Xs="iOS",_h.Ks.$s=t[1].replace(/_/g,".")})));const Bh=/chrome\//i.test(Oh),Uh=/chromium\//i.test(Oh),Wh=/edg\//i.test(Oh),Qh=/OPR\//.test(Oh),Jh=/nwjs/i.test(Oh),Vh=/safari\//i.test(Oh),Yh=/webkit/i.test(Oh);Wh||Qh||zh(/chrome\/([\d\.]+)/i,(t=>{_h.Ks.ti="Chrome",_h.Ks.si=t[1],_h.Ks.ei="Chromium"})),zh(/edg\/([\d\.]+)/i,(t=>{_h.Ks.ti="Edge",_h.Ks.si=t[1],_h.Ks.ei="Chromium"})),zh(/OPR\/([\d\.]+)/,(t=>{_h.Ks.ti="Opera",_h.Ks.si=t[1],_h.Ks.ei="Chromium"})),zh(/chromium\/([\d\.]+)/i,(t=>{_h.Ks.ti="Chromium",_h.Ks.si=t[1],_h.Ks.ei="Chromium"})),zh(/nwjs\/[0-9.]+/i,(t=>{_h.Ks.ti="NW.js",_h.Ks.si=t[1],_h.Ks.ei="Chromium",_h.Ks.ni="nwjs"})),zh(/firefox\/([\d\.]+)/i,(t=>{_h.Ks.ti="Firefox",_h.Ks.si=t[1],_h.Ks.ei="Gecko"})),!Vh||Bh||Uh||Wh||Qh||Jh||(_h.Ks.ti="Safari",_h.Ks.ei="WebKit",zh(/version\/([\d\.]+)/i,(t=>{_h.Ks.si=t[1]})),zh(/crios\/([\d\.]+)/i,(t=>{_h.Ks.ti="Chrome for iOS",_h.Ks.si=t[1]})),zh(/fxios\/([\d\.]+)/i,(t=>{_h.Ks.ti="Firefox for iOS",_h.Ks.si=t[1]})),zh(/edgios\/([\d\.]+)/i,(t=>{_h.Ks.ti="Edge for iOS",_h.Ks.si=t[1]}))),_h.Ks.ei===Ah&&Yh&&(_h.Ks.ei="WebKit"),"Android"===_h.Ks.Xs&&"Safari"===_h.Ks.ti&&(_h.Ks.ti="Stock");const Hh=new Set(["Windows","macOS","Linux","Chrome OS"]).has(_h.Ks.Xs)||"nwjs"===_h.Ks.ni;_h.Ks.ri=Hh,_h.Ks.hi=!Hh}"Chrome"===_h.Ks.ti&&"browser"===_h.Ks.ni&&/wv\)/.test(Oh)&&(_h.Ks.ni="webview"),"nwjs"!==_h.Ks.ni&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(_h.Ks.ni="webapp"),_h.Ks.ii=parseFloat(_h.Ks.si);"macOS"===_h.Ks.Xs&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&(_h.Ks.Xs="iOS",_h.Ks.$s=_h.Ks.si,_h.Ks.ri=!1,_h.Ks.hi=!0,_h.Ks.ai=!0),_h.Ks.oi="macOS"===_h.Ks.Xs||"iOS"===_h.Ks.Xs}{let qh=function(t){return new Promise(((s,i)=>{t.onsuccess=()=>s(t.result),t.onerror=()=>i(t.error)}))},Zh=function(t){return new Promise(((s,i)=>{t.oncomplete=()=>s(),t.onerror=()=>i(t.error),t.onabort=()=>i(t.error)}))},Kh=function(t,s){return oo(t,s)},Xh=function(t,s){return oo(t,s,!0)},$h=function(t){to(t);let s=no.get(t);return s instanceof Promise||(s=ao(t),no.set(t,s),s.catch((s=>no.delete(t)))),s},to=function(t){if("string"!=typeof t)throw new TypeError("expected string")},so=function(t,s){const i=t.objectStore(eo).openCursor();return new Promise((t=>{const e=[];i.onsuccess=i=>{const n=i.target.result;if(n){switch(s){case"entries":e.push([n.key,n.value]);break;case"keys":e.push(n.key);break;case"values":e.push(n.value)}n.continue()}else t(e)}}))};0;const io=2,eo="keyvaluepairs",no=new Map,ro="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,ho="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function oo(t,s,i=!1,e=!0){const n=await $h(t);try{return s(n.transaction([eo],i?"readwrite":"readonly"))}catch(n){if(e&&"InvalidStateError"===n.name)return no.delete(t),oo(t,s,i,!1);throw n}}async function ao(t){to(t);const s=indexedDB.open(t,io);return s.addEventListener("upgradeneeded",(s=>{try{s.target.result.createObjectStore(eo)}catch(s){console.error(`Failed to create objectstore for database ${t}`,s)}})),qh(s)}class uo{constructor(t){to(t),this.name=t}async ready(){await $h(this.name)}set(t,s){return to(t),Xh(this.name,(async i=>{const e=qh(i.objectStore(eo).put(s,t)),n=Zh(i);await Promise.all([n,e])}))}get(t){return to(t),Kh(this.name,(async s=>{const i=qh(s.objectStore(eo).get(t)),e=Zh(s),[n,r]=await Promise.all([e,i]);return r}))}delete(t){return to(t),Xh(this.name,(async s=>{const i=qh(s.objectStore(eo).delete(t)),e=Zh(s);await Promise.all([e,i])}))}clear(){return Xh(this.name,(async t=>{const s=qh(t.objectStore(eo).clear()),i=Zh(t);await Promise.all([i,s])}))}keys(){return Kh(this.name,(async t=>{let s;s=ho?qh(t.objectStore(eo).getAllKeys()):so(t,"keys");const i=Zh(t),[e,n]=await Promise.all([i,s]);return n}))}values(){return Kh(this.name,(async t=>{let s;s=ro?qh(t.objectStore(eo).getAll()):so(t,"values");const i=Zh(t),[e,n]=await Promise.all([i,s]);return n}))}entries(){return Kh(this.name,(async t=>{const s=so(t,"entries"),i=Zh(t),[e,n]=await Promise.all([i,s]);return n}))}}self.ci=uo}{let lo=function(t){throw new Error(`"${t}" is not implemented`)},co=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},fo=function(t){return"object"==typeof t?new Promise((s=>{const{port1:i,port2:e}=new MessageChannel;e.onmessage=t=>s(t.data),i.postMessage(t)})):Promise.resolve(t)};0;const po=self.ci,mo=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];class yo{constructor(t){this.fi=t,this.di=!this.fi,this.di||"undefined"!=typeof indexedDB||(this.di=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.pi=new Map}mi(t){if(!this.di)for(const s of mo)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.di=!0;break}}async yi(t){const s=this.pi.get(t),i=await fo(s);return void 0===i?null:i}async gi(t,s){s=await fo(s),this.pi.set(t,s)}Mi(t){this.pi.delete(t)}wi(){this.pi.clear()}Si(){return Array.from(this.pi.keys())}Ti(){return this.di}bi(){return this.pi}xi(t){this.pi=t}async getItem(t,s){if(co(s),this.di)return await this.yi(t);let i;try{i=await this.fi.get(t)}catch(s){return this.mi(s),this.di?await this.yi(t):(console.error(`Error reading '${t}' from storage, returning null: `,s),null)}return void 0===i?null:i}async setItem(t,s,i){if(co(i),void 0===s&&(s=null),this.di)await this.gi(t,s);else try{await this.fi.set(t,s)}catch(i){if(this.mi(i),!this.di)throw i;await this.gi(t,s)}}async removeItem(t,s){if(co(s),this.di)this.Mi(t);else try{await this.fi.delete(t)}catch(s){this.mi(s),this.di?this.Mi(t):console.error(`Error removing '${t}' from storage: `,s)}}async clear(t){if(co(t),this.di)this.wi();else try{await this.fi.clear()}catch(t){this.mi(t),this.di?this.wi():console.error("Error clearing storage: ",t)}}async keys(t){if(co(t),this.di)return this.Si();let s=[];try{s=await this.fi.keys()}catch(t){if(this.mi(t),this.di)return this.Si();console.error("Error getting storage keys: ",t)}return s}ready(t){return co(t),this.di?Promise.resolve(!0):this.fi.ready()}Ci(t){if(t.Gi)return new yo(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new po(s);return new yo(i)}}length(t){lo("localforage.length()")}key(t,s){lo("localforage.key()")}iterate(t,s){lo("localforage.iterate()")}Ii(t){lo("localforage.setDriver()")}config(t){lo("localforage.config()")}Ni(t){lo("localforage.defineDriver()")}Ei(){lo("localforage.driver()")}supports(t){lo("localforage.supports()")}dropInstance(){lo("localforage.dropInstance()")}}self.localforage=new yo(new po("localforage"))}{const go=self.Gs;if(go.Di={},go.Di._i=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");return void 0!==t.animate&&void 0!==t.animate([{opacity:"0"},{opacity:"1"}],1e3).reverse}catch(t){return!1}})(),go.Di.Ai="undefined"!=typeof HTMLDialogElement,go.Di.Li=!!self.requestIdleCallback,go.Di.ImageBitmap=!!self.createImageBitmap,go.Di.ImageBitmapOptions=!1,go.Di.Oi=!1,go.Di.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then((()=>{go.Di.ImageBitmapOptions=!0})).catch((()=>{go.Di.ImageBitmapOptions=!1}))}catch(Mo){go.Di.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then((t=>{go.Di.Oi=10===t.width&&10===t.height})).catch((()=>{go.Di.Oi=!1}))}catch(wo){go.Di.Oi=!1}}if(go.Di.Ri=!(!navigator.clipboard||!navigator.clipboard.readText),go.Di.Pi=!(!navigator.permissions||!navigator.permissions.query),go.Di.ki=!1,go.Di.Pi){const So={name:"clipboard-read"};navigator.permissions.query(So).then((()=>{go.Di.ki=!0})).catch((()=>{go.Di.ki=!1}))}go.Di.Fi=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),go.Di.ji="undefined"!=typeof Proxy,go.Di.zi="undefined"!=typeof document&&void 0!==document.createElement("a").download,go.Di.Bi="function"==typeof fetch,go.Di.Ui=!!(self.isSecureContext&&"Opera"!==go.Ks.ti&&navigator.storage&&navigator.storage.persist),go.Di.Wi=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),go.Di.Qi=(()=>{if("undefined"==typeof document)return!1;if("iOS"===go.Ks.Xs)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),go.Di.ImageDecoder=void 0!==self.ImageDecoder,go.Di.Ji=!!self.VideoEncoder,go.Di.Vi=!!self.showOpenFilePicker,go.Di.Yi=!!self.queryLocalFonts,go.Di.UserActivation=!!navigator.userActivation,go.Di.Hi=!1,(async()=>{let t;"undefined"==typeof document?t=new OffscreenCanvas(32,32):(t=document.createElement("canvas"),t.width=32,t.height=32);const s=t.getContext("2d");s.fillStyle="blue",s.fillRect(0,0,32,32);let i=null;try{t.convertToBlob?i=await t.convertToBlob({type:"image/webp",quality:1}):t.toBlob&&(i=await new Promise((s=>t.toBlob(s,"image/webp",1)))),go.Di.Hi=i&&"image/webp"===i.type}catch(t){go.Di.Hi=!1}})()}{const To=self.Gs;if(!String.prototype.trimStart){const bo=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(bo,"")}}if(!String.prototype.trimEnd){const vo=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(vo,"")}}if(String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(To.Zi(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),!Array.prototype.flat){let xo=function(t,s){return t.reduce(((t,i)=>s>0&&Array.isArray(i)?(Array.prototype.push.apply(t,xo(i,s-1)),t):(t.push(i),t)),[])};Array.prototype.flat=function(t=1){return xo(this,t)}}Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise(((t,s)=>navigator.webkitTemporaryStorage.queryUsageAndQuota(((s,i)=>t({usage:s,quota:i})),s)))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let Co=function(t){let s="Assertion failure: "+t+"\n\nStack trace:\n"+Go.Ki();console.error(s)};0;const Go=self.Gs;self.assert=function(t,s){t||Co(s)}}{const Io=self.Gs,No=self.ks;Io.Xi=function(t){return"number"==typeof t},Io.$i=function(t){return Io.Xi(t)&&isFinite(t)},Io.te=function(t){if(!Io.Xi(t))throw new TypeError("expected number")},Io.se=function(t){Io.ie(t)},Io.ee=function(t,s,i){if(!Io.Xi(t)||isNaN(t)||s>t||i<t)throw new RangeError("number outside of range")},Io.ne=function(...t){for(let s of t);},Io.re=function(t){if(!Io.$i(t))throw new TypeError("expected finite number")},Io.he=function(t){Io.ie(t)},Io.oe=function(...t){for(let s of t);},Io.ae=function(t){return"string"==typeof t},Io.ue=function(t){if(!Io.ae(t))throw new TypeError("expected string")},Io.le=function(t){Io.ie(t)},Io.ce=function(...t){for(let s of t);},Io.fe=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},Io.de=function(t){if(!Io.fe(t))throw new TypeError("expected simple object")},Io.pe=function(t){if(!Io.ie(t)&&!Io.fe(t))throw new TypeError("expected simple object")},Io.me=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},Io.ye=function(t){if(!Io.me(t))throw new TypeError("expected object")},Io.ge=function(t){Io.ie(t)},Io.Me=function(...t){for(let s of t);},Io.we=function(t){return Io.Se(t,Blob)&&"string"==typeof t.name},Io.Te=function(t){if(!Io.we(t))throw new TypeError("expected file")},Io.be=function(t){Io.ie(t)},Io.ve=function(t){return Array.isArray(t)},Io.xe=function(t){if(!Io.ve(t))throw new TypeError("expected array")},Io.Ce=function(t){Io.ie(t)},Io.Ge=function(...t){for(let s of t);},Io.Ie=function(t){return!(!Io.ve(t)||t.length&&!Io.ve(t[0]))},Io.Ne=function(t){if(!Io.Ie(t))throw new TypeError("expected 2d array");for(let s of t)if(!Io.ve(s))throw new TypeError("expected 2d array")},Io.Ee=function(t){Io.ie(t)},Io.De=function(t){return"function"==typeof t},Io._e=function(t,s){if(!Io.De(t))throw new TypeError("expected function");if(!Io.ie(s)&&t!==s)throw new TypeError("expected same function reference")},Io.Ae=function(t){Io.ie(t)},Io.Le=function(...t){for(let s of t);},Io.Oe=function(t,...s){if(!Io.De(t))throw new TypeError("expected function");if(!s.length)throw new Error("missing comparison functions");for(let i of s)if(!Io.ie(i)&&t===i)return;throw new TypeError("expected same function reference")},Io.Re=function(...t){if(!Io.ie(t))for(let s of t);},Io.Pe=function(t,s){return t instanceof s},Io.ke=function(t,...s){for(let i of s)if(Io.Pe(t,i))return!0;return!1},Io.Fe=function(t,s){if(!Io.Pe(t,s))throw new TypeError("unexpected type")},Io.je=function(t,s){Io.ie(t)},Io.ze=function(t,...s){for(let t of s);},Io.Be=function(t,...s){if(!Io.ke(t,...s))throw new TypeError("unexpected type")},Io.Ue=function(t,...s){if(!Io.ie(t)&&!Io.ke(t,...s))throw new TypeError("unexpected type")},Io.We=function(t,s){for(let i of t)if(!Io.Pe(i,s))return!1;return!0},Io.Qe=function(t){for(let s of t)if(!Io.$i(s))return!1;return!0},Io.Je=function(t,s){for(let s of t);},Io.Ve=function(t,s){if(!Io.ie(t))for(let s of t);},Io.Ye=function(t,s){if(!Io.ie(t))for(let s of t);},Io.He=function(t,...s){for(let s of t);},Io.qe=function(t,...s){if(!Io.ie(t))for(let s of t);},Io.Ze=function(t,s){return!(Io.ie(t)||!Io.ae(t.nodeName))&&(!s||Io.Ke(t.nodeName,s))},Io.Xe=function(t,s){if(Io.ie(t)||!Io.ae(t.nodeName))throw new TypeError("expected DOM node");if(s&&!Io.Ke(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},Io.$e=function(t,s){Io.ie(t)},Io.tn=function(t,s){return!(Io.ie(t)||!Io.ae(t.tagName))&&(!s||Io.Ke(t.tagName,s))},Io.sn=function(t,s){if(Io.ie(t)||!Io.ae(t.tagName))throw new TypeError("expected HTML element");if(s&&!Io.Ke(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},Io.en=function(t,s){Io.ie(t)},Io.nn=function(t){return Io.tn(t,"img")||Io.tn(t,"canvas")||Io.tn(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},Io.rn=function(t){if(!Io.nn(t))throw new TypeError("expected drawable")},Io.hn=function(t){Io.ie(t)},Io.an=function(t){return t instanceof ImageData||Io.nn(t)},Io.un=function(t){if(!Io.an(t))throw new TypeError("expected drawable or image data")},Io.ln=function(t){if(!Io.ie(t)&&!Io.an(t))throw new TypeError("expected drawable or image data")},Io.cn=function(t){return"string"==typeof t||Io.fn&&t instanceof Io.fn||t instanceof Io.dn},Io.pn=function(t){if(!Io.cn(t))throw new TypeError("expected string-like")},Io.mn=function(t){Io.ie(t)},Io.yn=function(...t){for(let s of t);},Io.gn=function(){throw new Error("must be overridden")},Io.Mn=function(){throw new Error("not yet implemented")},Io.wn=function(t){return t.constructor===function*(){}.constructor},Io.Sn=function(t){if(!Io.wn(t))throw new Error("expected generator function")},Io.Tn=function(t){return"function"===t[Symbol.iterator]},Io.bn=function(t){if(!Io.Tn(t))throw new Error("expected iterable")},Io.vn=function(t){return!Io.ie(t)},Io.ie=function(t){return null==t},Io.xn=function(t){let s=t[0].constructor;for(let i of t)if(i.constructor!==s)return!1;return s},Io.Cn=function(t,s){for(let i of t)if(!(i instanceof s))return!1;return!0};const Eo=Object.getPrototypeOf(Uint8Array);Io.Gn=function(t){return Io.Pe(t,Eo)},Io.In=function(t){},Io.Nn=function(t){Io.En(t,Eo)},Io.Dn=function(t,...s){if(!Io._n(t,...s))throw new TypeError("unexpected type")},Io._n=function(t,...s){for(const i of s)if(Io.Se(t,i))return!0;return!1},Io.En=function(t,s){if(!Io.Se(t,s))throw new TypeError("unexpected type")},Io.Se=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},No.te=Io.te,No.se=Io.se,No.re=Io.re,No.he=Io.he,No.ue=Io.ue,No.le=Io.le,No.ye=Io.ye,No.ge=Io.ge,No.xe=Io.xe,No.Ce=Io.Ce,No._e=Io._e,No.Ae=Io.Ae,No.Fe=Io.Fe,No.je=Io.je,No.ie=Io.ie}{let Do=function(t,s){let i=Ro.getType(t),e=Ro.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},_o=function(t){console.warn("[Defence] "+t+" @",Ro.Ki())},Ao=function(){if(Wo=-1,Fo.size>0||jo.size>0){let t=[...new Set([...Fo.keys()].map((t=>Ro.getName(t))))].join(",");console.warn(`An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${t}`),Fo.clear(),jo.clear()}},Lo=function(t){let s=new Set;for(let i in t)s.add(i);return s},Oo=function(t,s){let i=Lo(s),e=Qo.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);Ro.An(s,[...i]),s.length&&console.warn(`[Defence] '${Ro.getName(t)}' constructor creates inconsistent properties: ${s.join(", ")}`)}else Qo.set(t,i)};0;const Ro=self.Gs,Po=new Map;let ko;Ro.Ln=function(t,s){console.log(`%c${t}`,`font-weight: bold; color:${s}`)},Ro.On=function(t,...s){Po.has(t)||Po.set(t,-1),-1===Po.get(t)&&Po.set(t,requestAnimationFrame((()=>{console.log(`%c${t}`,"font-weight: bold",...s),Po.set(t,-1)})))},Ro.Rn=function(t){performance.mark(t),ko||(ko=new Map),ko.has(t)||ko.set(t,{Pn:0,total:0,kn:0,Fn:1,toString:function(){return`${t} :: current => ${this.Pn.toPrecision(3)} :: average => ${this.kn.toPrecision(3)} :: calls => ${this.Fn}`}})},Ro.jn=function(t){performance.measure(`measure-${t}`,t);const s=performance.getEntriesByName(`measure-${t}`)[0],i=ko.get(t);i.Pn=s.duration,i.total+=i.Pn,i.kn=i.total/i.Fn,console.log(i.toString()),i.Fn++,performance.clearMarks(t),performance.clearMeasures(`measure-${t}`)},Ro.Ki=function(){return(new Error).stack},Ro.zn=function(){},Ro.cast=function(t,s){return t&&t instanceof s?t:null},Ro.getName=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":Ro.Xi(t)?"<number>":Ro.ae(t)?"<string>":Ro.ve(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":Ro.De(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},Ro.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},Ro.range=function*(t,s){if(!isFinite(Math.abs(t-s)))throw new Error("Invalid parameters");if(t>s)for(let i=t-1;i>=s;i--)yield i;else for(let i=t;i<s;i++)yield i};let Fo=new Map,jo=new Map,zo=new WeakMap,Bo=new WeakMap;Ro.Bn={};const Uo=new Set(["then","splice"]);Ro.Bn.get=function(t,s){return s in t||"symbol"==typeof s||Uo.has(s)||_o(`Accessed missing property '${s}' from defended object '${Ro.getName(t)}', returning undefined`),Bo.has(t)&&"symbol"!=typeof s&&!Uo.has(s)&&_o(`Accessed property '${s}' on a released object '${Ro.getName(t)}'\nObject was originally released at: ${Bo.get(t)})\nCall stack at access: `),t[s]},Ro.Bn.set=function(t,s,i){return s in t||Fo.has(t)||_o(`Set non-existent property '${s}' to '${i}' on defended object '${Ro.getName(t)}'`),Do(t[s],i)||Fo.has(t)||_o(`Set '${Ro.getType(t[s])}' property '${s}' to type '${Ro.getType(i)}' on defended object '${Ro.getName(t)}'`),Bo.has(t)&&_o(`Set property '${s}' on a released object '${Ro.getName(t)}'\nObject was originally released at: ${Bo.get(t)})\nCall stack at access: `),t[s]=i,!0},Ro.Bn.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${Ro.getName(t)}'`)},Ro.Bn.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${Ro.getName(t)}'`)},Ro.Bn.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${Ro.getName(t)}'`)};let Wo=-1;Ro.Un=class{constructor(){if(!Ro.Ps||!Ro.Di.ji)return;let t=new.target,s=Object.create(t.prototype),i=new Proxy(s,Ro.Bn);return Fo.set(s,i),jo.set(i,s),zo.set(i,s),-1===Wo&&(Wo=requestAnimationFrame(Ao)),i}},Ro.Wn=function(t){if(Ro.Ps&&Ro.Di.ji&&t instanceof Ro.Un){if(!jo.has(t))return t;let s=jo.get(t);return jo.delete(t),Fo.delete(s),t}return Ro.Rs?Object.seal(t):t},Ro.Qn=function(t,...s){let i;try{i=new t(...s)}catch(t){throw jo.clear(),Fo.clear(),t}return Ro.Ps&&Oo(t,i),Ro.Wn(i)},Ro.Jn=function(t){let s=zo.get(t);s&&Bo.set(s,Ro.Ki())},Ro.Vn=function(t){let s=zo.get(t);return!!s&&!!Bo.get(s)};let Qo=new Map;Ro.Yn=class{constructor(t){this.Hn="",t&&this.start(t)}start(t){Ro.Zs&&(this.Hn=t,performance.mark(this.Hn+"-Start"))}end(){Ro.Zs&&(performance.mark(this.Hn+"-End"),performance.measure(this.Hn,this.Hn+"-Start",this.Hn+"-End"))}next(t){Ro.Zs&&(this.end(),this.Hn=t,performance.mark(this.Hn+"-Start"))}}}{let Jo=function(t){return 0===t&&1/t<0};0;const Vo=self.Gs,Yo=2*Math.PI,Ho=Math.PI/180,qo=180/Math.PI;Vo.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0===e)return i;if(t<s){const n=i-(s-t)%e;return n===i?0:n}return s+(t-s)%e},Vo.qn=function(t,s,i,e,n){const r=i-s;return 0===r&&0===e?t:(t-s)*(n-e)/r+e},Vo.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},Vo.Zn=function(t,s,i){return t<s?s:t>i?i:t},Vo.Kn=function(t){return(t%=Yo)<0&&(t+=Yo),t},Vo.Xn=function(t){return t*Ho},Vo.$n=function(t){return t*qo},Vo.tr=function(t,s){return Math.sqrt(t*t+s*s)},Vo.sr=function(t,s,i){return Math.sqrt(t*t+s*s+i*i)},Vo.ir=function(t,s,i,e){return Vo.tr(i-t,e-s)},Vo.er=function(t,s,i,e){const n=i-t,r=e-s;return n*n+r*r},Vo.nr=function(t,s,i,e){return Math.atan2(e-s,i-t)},Vo.rr=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),n=i*Math.sin(s)+e*Math.cos(s);return n>=1?0:n<=-1?Math.PI:Math.acos(n)},Vo.hr=function(t,s,i){let e=Math.sin(t),n=Math.cos(t),r=Math.sin(s),h=Math.cos(s);return Math.acos(e*r+n*h)>i?n*r-e*h>0?Vo.Kn(t+i):Vo.Kn(t-i):Vo.Kn(s)},Vo.ar=function(t,s){let i=Math.sin(t);return Math.cos(t)*Math.sin(s)-i*Math.cos(s)<=0},Vo.ur=function(t,s,i,e=0){let n=Vo.rr(t,s);const r=Yo*e;return Vo.ar(s,t)?Vo.Kn(t+(n+r)*i):Vo.Kn(t-(n+r)*i)},Vo.lr=function(t,s,i,e=0){const n=Vo.rr(t,s),r=Yo*e;return Vo.ar(s,t)?Vo.Kn(t+(n+r)*i):Vo.Kn(t+(Yo-n+r)*i)},Vo.cr=function(t,s,i,e=0){const n=Vo.rr(t,s),r=Yo*e;return Vo.ar(s,t)?Vo.Kn(t-(-Yo+n-r)*i):Vo.Kn(t-(n+r)*i)},Vo.dr=function(t,s){const i=Vo.rr(t,s);return Vo.ar(t,s)?Vo.Kn(s-i):Vo.Kn(s+i)},Vo.Gt=function(t,s,i){return t+i*(s-t)},Vo.pr=function(t,s,i){return t===s?0:(i-t)/(s-t)},Vo.mr=function(t,s,i,e,n){return Vo.Gt(e,n,Vo.pr(t,s,i))},Vo.yr=function(t,s,i,e){return Vo.Gt(Vo.Gt(t,s,e),Vo.Gt(s,i,e),e)},Vo.gr=function(t,s,i,e,n){return Vo.Gt(Vo.yr(t,s,i,n),Vo.yr(s,i,e,n),n)},Vo.Mr=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},Vo.wr=function(t){return t>0&&!(t-1&t)},Vo.Sr=function(t){--t;for(let s=1;s<32;s<<=1)t|=t>>s;return t+1},Vo.Tr=function(t,s){return Math.round(t*s)/s},Vo.br=function(t,s){return Math.floor(t*s)/s},Vo.vr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},Vo.Cr=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},Vo.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;e>=0&&"0"===i.charAt(e);--e);return e>=0&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},Vo.Gr=function(t,s,i){return Vo.Zn(t,0,255)|Vo.Zn(s,0,255)<<8|Vo.Zn(i,0,255)<<16};Vo.Ir=function(t,s,i,e){return(t=Vo.Zn(Math.floor(1024*t),-8192,8191))<0&&(t+=16384),(s=Vo.Zn(Math.floor(1024*s),-8192,8191))<0&&(s+=16384),(i=Vo.Zn(Math.floor(1024*i),-8192,8191))<0&&(i+=16384),-(16384*t*16384*1024+16384*s*1024+1024*i+(e=Vo.Zn(Math.floor(1023*e),0,1023)))},Vo.Nr=function(t,s,i){return Vo.Ir(t,s,i,1)},Vo.Er=function(t){if(t>=0)return(255&t)/255;{let s=Math.floor(-t/274877906944);return s>8191&&(s-=16384),s/1024}},Vo.Dr=function(t){if(t>=0)return((65280&t)>>8)/255;{let s=Math.floor(-t%274877906944/16777216);return s>8191&&(s-=16384),s/1024}},Vo._r=function(t){if(t>=0)return((16711680&t)>>16)/255;{let s=Math.floor(-t%16777216/1024);return s>8191&&(s-=16384),s/1024}},Vo.Ar=function(t){return Jo(t)?0:t>=0?1:Math.floor(-t%1024)/1023},Vo.Lr=function(t,s){for(t=Math.floor(t),s=Math.floor(s);0!==s;){let i=s;s=t%s,t=i}return t};const Zo=[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]];Vo.Or=function(t,s){if((t=Math.floor(t))===(s=Math.floor(s)))return[1,1];for(let i of Zo){let e=t/i[0]*i[1];if(Math.abs(s-e)<1)return i.slice(0);if(e=t/i[1]*i[0],Math.abs(s-e)<1)return[i[1],i[0]]}let i=Vo.Lr(t,s);return[t/i,s/i]},Vo.Rr=function(t,s,i,e,n,r,h,o){const a=Math.min(t,i),u=Math.max(t,i),l=Math.min(n,h),c=Math.max(n,h);if(u<l||a>c)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||f>m)return!1;const y=n-t+h-i,g=r-s+o-e,M=i-t,w=e-s,S=h-n,T=o-r,b=Math.abs(w*S-T*M),v=S*g-T*y;if(Math.abs(v)>b)return!1;const x=M*g-w*y;return Math.abs(x)<=b},Vo.Pr=function(t,s,i,e,n,r,h,o,a,u,l,c){const f=Math.min(a,l),d=Math.max(a,l);if(r<f||n>d)return!1;const p=Math.min(u,c),m=Math.max(u,c);if(o<p||h>m)return!1;const y=a-t+l-i,g=u-s+c-e,M=i-t,w=e-s,S=l-a,T=c-u,b=Math.abs(w*S-T*M),v=S*g-T*y;if(Math.abs(v)>b)return!1;const x=M*g-w*y;return Math.abs(x)<=b},Vo.kr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),u=n.Fr(),l=n.jr(),c=n.zr(),f=n.Br(),d=n.Ur(),p=n.Wr(),m=n.Qr(),y=n.Jr();return Vo.Pr(t,s,i,e,r,h,o,a,u,l,c,f)||Vo.Pr(t,s,i,e,r,h,o,a,c,f,d,p)||Vo.Pr(t,s,i,e,r,h,o,a,d,p,m,y)||Vo.Pr(t,s,i,e,r,h,o,a,m,y,u,l)},Vo.Vr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e);let u=0;for(let l=n.length-4;u<=l;u+=2)if(Vo.Pr(t,s,i,e,r,h,o,a,n[u],n[u+1],n[u+2],n[u+3]))return!0;return Vo.Pr(t,s,i,e,r,h,o,a,n[u],n[u+1],n[0],n[1])};Vo.Yr=function(t,s,i,e,n,r,h,o){const a=i-t,u=o-r,l=a*u-(e-s)*(h-n);if(0===l)return 2;const c=((s-e)*(h-t)+a*(o-s))/l;return 0<c&&c<1.000001?(u*(h-t)+(n-h)*(o-s))/l:2},Vo.Hr=function(t,s,i,e,n,r,h,o,a){const u=(h-n)*a,l=(o-r)*a;return Vo.Yr(t,s,i,e,n-u,r-l,h+u,o+l)},Vo.qr=function(t,s,i,e,n,r,h,o){const a=n-i,u=r-e,l=h-i,c=o-e,f=t-i,d=s-e,p=a*a+u*u,m=a*l+u*c,y=a*f+u*d,g=l*l+c*c,M=l*f+c*d,w=1/(p*g-m*m),S=(g*y-m*M)*w,T=(p*M-m*y)*w;return S>=0&&T>=0&&S+T<=1},Vo.Zr=function(t,s,i,e,n,r,h,o){const a=n-i,u=r-e,l=h-i,c=o-e,f=t-i,d=s-e,p=a*a+u*u,m=a*l+u*c,y=l*l+c*c,g=f*a+d*u,M=f*l+d*c,w=p*y-m*m,S=(y*g-m*M)/w,T=(p*M-m*g)/w;return[1-S-T,S,T]},Vo.Kr=function(t,s,i,e,n,r,h,o,a,u,l,c){return[t*e+s*h+i*u,t*n+s*o+i*l,t*r+s*a+i*c]}}{const Ko=self.Gs;let Xo=null,$o="";if("undefined"!=typeof document){Xo=document;const ra=document.querySelector("base");$o=ra&&ra.hasAttribute("href")?ra.getAttribute("href"):"",$o&&($o.startsWith("/")&&($o=$o.substr(1)),$o.endsWith("/")||($o+="/"))}Ko.Xr=function(){return $o},Ko.$r=function(){if(!Xo)return"";const t=Xo.location;return Ko.th(t.origin+t.pathname)+$o},Ko.th=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},Ko.sh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},Ko.ih=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},Ko.eh=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},Ko.nh=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},Ko.rh=function(t){return t.replace(/\\/g,"/")},Ko.hh=function(t,s){return s===(t?Ko.ih(t).slice(1):"")},Ko.oh=function(t,s){let i,e;return Ko.we(t)&&(i=Ko.nh(t.name)),Ko.ae(t)&&(i=Ko.nh(t)),Ko.we(s)&&(e=Ko.nh(s.name)),Ko.ae(s)&&(e=Ko.nh(s)),i===e},Ko.ah=function(t){t=Ko.rh(t);let s=/^\w\:\//.exec(t);s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=t.replace(/\/{2,}/g,"/")).length>1&&"/"===t.slice(-1)&&(t=t.slice(0,-1));const i=t.lastIndexOf("/")+1;let e,n="",r=t,h="";i>0&&(n=t.slice(0,i),r=t.slice(i)),e=r;const o=r.lastIndexOf(".");return o>0&&(h=r.slice(o),e=r.slice(0,-h.length)),{dir:n,uh:r,name:e,root:s,ext:h,fh:s+n+r}},Ko.dh=function(t,s){return new Promise(((i,e)=>{self.setTimeout(i,t,s)}))},Ko.ph=function(t){try{t()}catch(t){Ko.Rs&&console.warn("Swallowed exception: ",t)}},Ko.mh=function(){},Ko.Ke=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},Ko.yh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},Ko.gh=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},Ko.Mh=function(t,s){t.length=s},Ko.wh=function(t){t&&0!==t.length&&Ko.Mh(t,0)},Ko.Sh=function(t){if(t){for(let s=0;s<t.length;s++){let i=t[s];Ko.Mh(i,0)}Ko.Mh(t,0)}},Ko.Th=function(t,s,i){s|=0;const e=t.length;if(!(s<=e))for(let n=e;n<s;++n)t.push(i)},Ko.bh=function(t,s,i){s|=0;const e=t.length;s<e?Ko.Mh(t,s):s>e&&Ko.Th(t,s,i)},Ko.xh=function(t,s){Ko.wh(t),Ko.An(t,s)},Ko.An=function(t,s){if(s.length<1e4)t.push(...s);else for(let i=0,e=s.length;i<e;++i)t.push(s[i])},Ko.Ch=function(t,s){if((s=Math.floor(s))<0||s>=t.length)return;let i=t.length-1;for(let e=s;e<i;++e)t[e]=t[e+1];Ko.Mh(t,i)},Ko.Gh=function(t,s){let i=t.indexOf(s);i>=0&&t.splice(i,1)},Ko.Ih=function(t,s){let i=t.length;if(s.length!==i)return!1;for(let e=0;e<i;++e)if(t[e]!==s[e])return!1;return!0},Ko.Nh=function(t,s){let i=[],e=0;for(let n=0,r=t.length;n<r;++n){let r=t[n];s(r)?i.push(r):(t[e]=r,++e)}return Ko.Mh(t,e),i},Ko.Eh=function(t,s){const i=t.length;let e=0;for(let i=0,n=t.length;i<n;++i){let n=t[i];s.has(n)||(t[e++]=n)}return Ko.Mh(t,e),i-e},Ko.Dh=function(t,s){return t===Math.floor(t)&&t>=0&&t<s.length},Ko._h=function(t,s){if(!Ko.Dh(t,s))throw new RangeError("array index out of bounds")},Ko.Ah=function(t){return t.slice()},Ko.Lh=function(t,s){let i=[];for(let e of t)if(Ko.me(e)){let t=s(e);if(!t)throw new Error("missing clone");if(t.constructor!==e.constructor)throw new Error("object is not a clone");i.push(t)}else Ko.ve(e)?i.push(Ko.Lh(e,s)):i.push(e);return i},Ko.Oh=function(t){let s=[];for(let i of t)s.push(i.slice());return s},Ko.Rh=function(t,s=" "){return t?t.split(s).map((t=>t.trim())).filter((t=>!!t)):[]},Ko.Ph=function(t,s,i){const e=new Set;for(const n of t.values())s(n)&&(i?e.add(i(n)):e.add(n));return e},Ko.kh=function(t,s){return t.union?t.union(s):new Set([...t,...s])},Ko.Fh=function(t,s){for(const i of s)t.add(i);return t},Ko.jh=function(t){for(let s of t)return s;return null},Ko.xor=function(t,s){return!t!=!s},Ko.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return t>i;case 5:return t>=i;default:return!1}},Ko.zh=function(t){for(let s in t)if(t.hasOwnProperty(s))return!0;return!1},Ko.Bh=function(t,s){return t.length?new Promise(((i,e)=>{const n=[];let r=0,h=!1;for(let o=0,a=t.length;o<a;++o)n.push(void 0),t[o].then((e=>{h||(n[o]=e,++r,r===t.length?i(n):s(r,t.length))})).catch((t=>{h=!0,e(t)}))})):Promise.resolve([])};let ta=[];Ko.Uh=function(t){ta.push(t)},Ko.Wh=function(){let t=0;for(let s of ta)t+=s();return Math.floor(t)};let sa=1;const ia=new Map,ea=new MessageChannel;ea.port2.onmessage=function(t){const s=t.data,i=ia.get(s);ia.delete(s),i&&i(performance.now())},Ko.Qh=function(t){const s=sa++;return ia.set(s,t),ea.port1.postMessage(s),s},Ko.Jh=function(t){ia.delete(t)},Ko.Vh=Ko.Qh,Ko.Yh=function(){return new Promise((t=>Ko.Vh(t)))};const na=new Set;Ko.Hh=function(t){const s=self.requestAnimationFrame((async i=>{await Ko.Yh(),na.has(s)&&(na.delete(s),t(i))}));return na.add(s),s},Ko.qh=function(t){na.has(t)&&(self.cancelAnimationFrame(t),na.delete(t))}}{const ha=self.Gs;ha.Zh=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},ha.Kh=function(t){return!ha.Zh(t)},ha.Xh=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} ${t.statusText}`)},ha.$h=function(t,s){return fetch(t,s).then((t=>(ha.Xh(t),t)))},ha.so=function(t){return ha.$h(t).then((t=>t.text()))},ha.io=function(t){return ha.$h(t).then((t=>t.json()))},ha.eo=function(t){return ha.$h(t).then((t=>t.blob()))},ha.no=function(t){return ha.$h(t).then((t=>t.arrayBuffer()))},ha.ro=function(t){return new Promise(((s,i)=>{const e=new Image;e.onload=()=>s(e),e.onerror=t=>i(t),e.src=t}))},ha.ho=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise(((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsArrayBuffer(t)}))},ha.oo=function(t){return"function"==typeof t.text?t.text():new Promise(((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsText(t)}))},ha.ao=function(t){return ha.oo(t).then((t=>JSON.parse(t)))},ha.uo=async function(t,s){let i=URL.createObjectURL(t);try{const t=await ha.ro(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof t.decode&&await t.decode(),t}finally{i&&URL.revokeObjectURL(i)}},ha.lo=function(t,s){if("undefined"!=typeof document&&"function"==typeof document.createElement){const i=document.createElement("canvas");return i.width=t,i.height=s,i}return new OffscreenCanvas(t,s)},ha.co=function(t,s,i){if("number"!=typeof i&&(i=1),s=s||"image/png",i=ha.Zn(i,0,1),t.convertToBlob)return t.convertToBlob({type:s,quality:i});if(t.toBlob)return new Promise((e=>t.toBlob(e,s,i)));throw new Error("could not convert canvas to blob")},ha.fo=function(t,s,i){const e=ha.lo(t.width,t.height);return e.getContext("2d").drawImage(t,0,0),ha.co(e,s,i)},ha.do=function(t,s,i){if(ha.Di.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then((t=>ha.fo(t,s,i)));if(ha.Di.ImageBitmap)return createImageBitmap(t).then((t=>ha.fo(t,s,i)));{const e=ha.lo(t.width,t.height);return e.getContext("2d").putImageData(t,0,0),ha.co(e,s,i)}},ha.po=function(t,s){t.clear();for(const i of s)t.add(i)},ha.mo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},ha.yo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},ha.Mo=function t(s){if("object"==typeof s&&null!==s){if(s instanceof Set)return{_c3type_:"set",data:[...s].map((s=>t(s)))};if(s instanceof Map)return{_c3type_:"map",data:[...s].map((s=>[s[0],t(s[1])]))};{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},ha.wo=function t(s){if("object"==typeof s&null!==s){if("set"===s._c3type_)return new Set(s.data.map((s=>t(s))));if("map"===s._c3type_)return new Map(s.data.map((s=>[s[0],t(s[1])])));{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},ha.So=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const n of t)"-"===n?e>0&&(i=!0):i?(s+=n.toUpperCase(),i=!1):s+=n,++e;return s},ha.To=function(t){return"object"==typeof t&&"function"==typeof t.next},ha.bo=function(t,s){const i=[];if("function"==typeof s)for(let e=0;e<t;++e)i.push(s());else for(let e=0;e<t;++e)i.push(s);return i}}{let oa=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},aa=function(t,s,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};0;const ua=self.Gs,la=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,ca=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;ua.vo=class{constructor(t,s,i,e){this.xo=NaN,this.Co=NaN,this.Go=NaN,this.Io=NaN,this.xo=0,this.Co=0,this.Go=0,this.Io=0,t instanceof ua.vo?this.set(t):this.No(t||0,s||0,i||0,e||0)}Eo(t,s,i){return this.xo=+t,this.Co=+s,this.Go=+i,this.Zn(),this}No(t,s,i,e){return this.xo=+t,this.Co=+s,this.Go=+i,this.Io=+e,this.Zn(),this}set(t){return this.xo=t.xo,this.Co=t.Co,this.Go=t.Go,this.Io=t.Io,this}m(t){return this.set(t)}add(t){this.xo+=t.xo,this.Co+=t.Co,this.Go+=t.Go,this.Io+=t.Io,this.Zn()}Do(t,s,i,e=0){this.xo+=+t,this.Co+=+s,this.Go+=+i,this.Io+=+e,this.Zn()}_o(t){this.Ao(Math.max(this.xo,t.xo)-Math.min(this.xo,t.xo)),this.Lo(Math.max(this.Co,t.Co)-Math.min(this.Co,t.Co)),this.Oo(Math.max(this.Go,t.Go)-Math.min(this.Go,t.Go)),this.Ro(Math.max(this.Io,t.Io)-Math.min(this.Io,t.Io)),this.Zn()}Po(t){this.xo=t.xo,this.Co=t.Co,this.Go=t.Go}Ao(t){this.xo=ua.Zn(+t,0,1)}ko(){return this.xo}Lo(t){this.Co=ua.Zn(+t,0,1)}Fo(){return this.Co}Oo(t){this.Go=ua.Zn(+t,0,1)}jo(){return this.Go}Ro(t){this.Io=ua.Zn(+t,0,1)}zo(){return this.Io}clone(){return ua.Qn(ua.vo,this.xo,this.Co,this.Go,this.Io)}toArray(){return[this.xo,this.Co,this.Go,this.Io]}Bo(){return new Float64Array(this.toArray())}Uo(t,s){t[s++]=this.xo,t[s++]=this.Co,t[s++]=this.Go,t[s]=this.Io}Wo(t,s){t[s++]=this.xo,t[s++]=this.Co,t[s]=this.Go}equals(t){return this.xo===t.xo&&this.Co===t.Co&&this.Go===t.Go&&this.Io===t.Io}Qo(t){return this.xo===t.xo&&this.Co===t.Co&&this.Go===t.Go}Jo(t,s,i){return this.xo===t&&this.Co===s&&this.Go===i}Vo(t,s,i,e){return this.xo===t&&this.Co===s&&this.Go===i&&this.Io===e}Yo(t,s){return t[s]===Math.fround(this.xo)&&t[s+1]===Math.fround(this.Co)&&t[s+2]===Math.fround(this.Go)&&t[s+3]===Math.fround(this.Io)}Ho(t,s){return t[s]===Math.fround(this.xo)&&t[s+1]===Math.fround(this.Co)&&t[s+2]===Math.fround(this.Go)}multiply(t){this.xo*=t.xo,this.Co*=t.Co,this.Go*=t.Go,this.Io*=t.Io}qo(t){this.xo*=t,this.Co*=t,this.Go*=t,this.Io*=t}Zo(){return this.xo*=this.Io,this.Co*=this.Io,this.Go*=this.Io,this}Ko(){return this.xo/=this.Io,this.Co/=this.Io,this.Go/=this.Io,this}Zn(){return this.xo=ua.Zn(this.xo,0,1),this.Co=ua.Zn(this.Co,0,1),this.Go=ua.Zn(this.Go,0,1),this.Io=ua.Zn(this.Io,0,1),this}Xo(t){this.xo=ua.Er(t),this.Co=ua.Dr(t),this.Go=ua._r(t),this.Io=ua.Ar(t)}$o(t,s,i){return`rgb(${100*(ua.$i(t)?t:this.ko())}%, ${100*(ua.$i(s)?s:this.Fo())}%, ${100*(ua.$i(i)?i:this.jo())}%)`}ta(t,s,i,e){return`rgba(${100*(ua.$i(t)?t:this.ko())}%, ${100*(ua.$i(s)?s:this.Fo())}%, ${100*(ua.$i(i)?i:this.jo())}%, ${ua.$i(e)?e:this.zo()})`}sa(){const t=Math.round(255*this.ko()),s=Math.round(255*this.Fo()),i=Math.round(255*this.jo());return"#"+oa(t.toString(16))+oa(s.toString(16))+oa(i.toString(16))}ia(t){if("string"!=typeof t)return!1;let s,i,e;if("#"===(t=t.trim()).charAt(0)&&(t=t.substr(1)),3===t.length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Ao(s),isFinite(i)&&this.Lo(i),isFinite(e)&&this.Oo(e),this.Ro(1),!0}ea(){return`${Math.round(255*this.ko())}, ${Math.round(255*this.Fo())}, ${Math.round(255*this.jo())}`}na(){return[Math.round(255*this.ko()),Math.round(255*this.Fo()),Math.round(255*this.jo())]}ra(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Ao(i),isFinite(e)&&this.Lo(e),isFinite(n)&&this.Oo(n),this.Ro(1),!0}ha(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Ao(i),isFinite(e)&&this.Lo(e),isFinite(n)&&this.Oo(n),this.Ro(1),!0}oa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.Ao(i),isFinite(e)&&this.Lo(e),isFinite(n)&&this.Oo(n),isFinite(r)&&this.Ro(r),!0}aa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.Ao(i),isFinite(e)&&this.Lo(e),isFinite(n)&&this.Oo(n),isFinite(r)&&this.Ro(r),!0}ua(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.ha(t):this.ra(t);if(t.startsWith("rgba("))return t.includes("%")?this.aa(t):this.oa(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.la(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.ha(t):4===s.length&&this.aa(t):3===s.length?this.ra(t):4===s.length&&this.oa(t)}}return this.ia(t)}toJSON(){return[this.xo,this.Co,this.Go,this.Io]}ca(t,s,i,e){let n,r,h;if(t%=360,s=ua.Zn(s,0,100),i=ua.Zn(i,0,100),e=ua.Zn(e,0,1),t/=360,i/=100,0==(s/=100))n=r=h=i;else{const e=i<.5?i*(1+s):i+s-i*s,o=2*i-e;n=aa(o,e,t+1/3),r=aa(o,e,t),h=aa(o,e,t-1/3)}return this.Ao(n),this.Lo(r),this.Oo(h),this.Ro(e),this}la(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=la.exec(s),e=ca.exec(s);return i&&4===i.length?(this.ca(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.ca(+i[1],+i[2],+i[3],+i[4]),0))}fa(){const t=this.xo,s=this.Co,i=this.Go,e=this.Io;return`hsla(${ua.vo.da(t,s,i)}, ${ua.vo.pa(t,s,i)}%, ${ua.vo.ma(t,s,i)}%, ${e})`}ya(){const t=this.xo,s=this.Co,i=this.Go;return[ua.vo.da(t,s,i),ua.vo.pa(t,s,i),ua.vo.ma(t,s,i),this.Io]}ga(t){Array.isArray(t)&&(t.length<3||(this.xo=t[0],this.Co=t[1],this.Go=t[2],t.length>=4?this.Io=t[3]:this.Io=1))}set r(t){this.Ao(t)}get r(){return this.ko()}set g(t){this.Lo(t)}get g(){return this.Fo()}set b(t){this.Oo(t)}get b(){return this.jo()}set a(t){this.Ro(t)}get a(){return this.zo()}Ma(t,s){switch(t){case 0:this.Ao(s);break;case 1:this.Lo(s);break;case 2:this.Oo(s);break;case 3:this.Ro(s);break;default:throw new RangeError("invalid color index")}}wa(t){switch(t){case 0:return this.ko();case 1:return this.Fo();case 2:return this.jo();case 3:return this.zo();default:throw new RangeError("invalid color index")}}static Sa(t,s){let i,e;if(Array.isArray(t))i=new ua.vo,i.ga(t);else{if(!(t instanceof ua.vo))throw new Error("unexpected type");i=t}if(Array.isArray(s))e=new ua.vo,e.ga(s);else{if(!(s instanceof ua.vo))throw new Error("unexpected type");e=s}return i.equals(e)}static Ta(t,s){return ua.Zn(Math.max(t,s)-Math.min(t,s),0,1)}static ba(t,s){const i=new ua.vo;return i.Ao(Math.max(t.xo,s.xo)-Math.min(t.xo,s.xo)),i.Lo(Math.max(t.Co,s.Co)-Math.min(t.Co,s.Co)),i.Oo(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),i.Ro(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),i}static va(t,s){const i=new ua.vo(0,0,0,1);return i.Ao(Math.max(t.xo,s.xo)-Math.min(t.xo,s.xo)),i.Lo(Math.max(t.Co,s.Co)-Math.min(t.Co,s.Co)),i.Oo(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),i}static da(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;let r=0;switch(e){case t:r=(s-i)/(e-n)+(s<i?6:0);break;case s:r=(i-t)/(e-n)+2;break;case i:r=(t-s)/(e-n)+4}return Math.round(r/6*360)}static pa(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;const r=e-n,h=(e+n)/2>.5?r/(2-e-n):r/(e+n);return Math.round(100*h)}static ma(t,s,i){const e=Math.max(t,s,i),n=(e+Math.min(t,s,i))/2;return e?Math.round(100*n):0}},ua.vo.xa=Object.freeze(ua.Qn(ua.vo,1,1,1,1)),ua.vo.Ca=Object.freeze(ua.Qn(ua.vo,0,0,0,1)),ua.vo.Ga=Object.freeze(ua.Qn(ua.vo,0,0,0,0))}{const fa=self.Gs;fa.Ia=class{constructor(t,s){this.Na=0,this.Ea=0,t instanceof fa.Ia?this.m(t):this.set(t||0,s||0)}set(t,s){this.Na=+t,this.Ea=+s}m(t){this.Na=t.Na,this.Ea=t.Ea}equals(t){return this.Na===t.Na&&this.Ea===t.Ea}Da(t,s){return this.Na===t&&this.Ea===s}Yo(t,s){return t[s]===Math.fround(this.Na)&&t[s+1]===Math.fround(this.Ea)}_a(t){this.Na=+t}Aa(){return this.Na}La(t){this.Ea=+t}Oa(){return this.Ea}toArray(){return[this.Na,this.Ea]}Bo(){return new Float64Array(this.toArray())}Uo(t,s){t[s++]=this.Na,t[s]=this.Ea}offset(t,s){this.Na+=+t,this.Ea+=+s}scale(t,s){this.Na*=t,this.Ea*=s}Mt(t,s){this.Na/=t,this.Ea/=s}round(){this.Na=Math.round(this.Na),this.Ea=Math.round(this.Ea)}floor(){this.Na=Math.floor(this.Na),this.Ea=Math.floor(this.Ea)}ceil(){this.Na=Math.ceil(this.Na),this.Ea=Math.ceil(this.Ea)}angle(){return fa.nr(0,0,this.Na,this.Ea)}Ra(){return this.Na*this.Na+this.Ea*this.Ea}length(){return fa.tr(this.Na,this.Ea)}Pa(t,s){const i=this.Na*s-this.Ea*t;this.Ea=this.Ea*s+this.Na*t,this.Na=i}rotate(t){0!==t&&this.Pa(Math.sin(t),Math.cos(t))}ka(t,s,i){0===t||s===this.Na&&i===this.Ea||(this.Na-=s,this.Ea-=i,this.Pa(Math.sin(t),Math.cos(t)),this.Na+=+s,this.Ea+=+i)}move(t,s){0!==s&&(this.Na+=Math.cos(t)*s,this.Ea+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Na/=t,this.Ea/=t)}Zn(t,s){this.Na=fa.Zn(this.Na,t,s),this.Ea=fa.Zn(this.Ea,t,s)}xt(t){return this.Na*t.Na+this.Ea*t.Ea}reverse(){this.Na=-this.Na,this.Ea=-this.Ea}Fa(){let t=this.Na;return this.Na=this.Ea,this.Ea=-t,this}}}{const da=self.Gs;da.Rect=class{constructor(t,s,i,e){this.ja=NaN,this.za=NaN,this.Ba=NaN,this.Ua=NaN,this.ja=0,this.za=0,this.Ba=0,this.Ua=0,t instanceof da.Rect?this.m(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.ja=+t,this.za=+s,this.Ba=+i,this.Ua=+e}Wa(t,s,i,e){t=+t,s=+s,this.ja=t,this.za=s,this.Ba=t+ +i,this.Ua=s+ +e}m(t){this.ja=+t.ja,this.za=+t.za,this.Ba=+t.Ba,this.Ua=+t.Ua}clone(){return new da.Rect(this.ja,this.za,this.Ba,this.Ua)}static Qa(t,s){const i=new da.Rect;return i.Ja(Math.min(t.ja,s.ja)),i.Va(Math.min(t.za,s.za)),i.Ya(Math.max(t.Ba,s.Ba)),i.Ha(Math.max(t.Ua,s.Ua)),i}static qa(t){return new da.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.ja===t.ja&&this.za===t.za&&this.Ba===t.Ba&&this.Ua===t.Ua}Za(t,s,i,e){return this.ja===t&&this.za===s&&this.width()===i&&this.height()===e}Yo(t,s){return t[s]===Math.fround(this.ja)&&t[s+1]===Math.fround(this.za)&&t[s+2]===Math.fround(this.Ba)&&t[s+3]===Math.fround(this.Ua)}Ja(t){this.ja=+t}Ka(){return this.ja}Va(t){this.za=+t}Xa(){return this.za}Ya(t){this.Ba=+t}$a(){return this.Ba}Ha(t){this.Ua=+t}tu(){return this.Ua}toArray(){return[this.ja,this.za,this.Ba,this.Ua]}Bo(){return new Float64Array(this.toArray())}su(){return new DOMRect(this.ja,this.za,this.width(),this.height())}static iu(t){return da.Qn(da.Rect,t.left,t.top,t.right,t.bottom)}Uo(t,s){t[s++]=this.ja,t[s++]=this.za,t[s++]=this.Ba,t[s]=this.Ua}eu(t,s){t[s++]=this.ja,t[s++]=this.za,t[s++]=this.Ba,t[s++]=this.za,t[s++]=this.Ba,t[s++]=this.Ua,t[s++]=this.ja,t[s]=this.Ua}nu(t,s,i){t[s++]=this.ja,t[s++]=this.za,t[s++]=i,t[s++]=this.Ba,t[s++]=this.za,t[s++]=i,t[s++]=this.Ba,t[s++]=this.Ua,t[s++]=i,t[s++]=this.ja,t[s++]=this.Ua,t[s]=i}width(){return this.Ba-this.ja}height(){return this.Ua-this.za}ru(){return(this.ja+this.Ba)/2}hu(){return(this.za+this.Ua)/2}offset(t,s){t=+t,s=+s,this.ja+=t,this.za+=s,this.Ba+=t,this.Ua+=s}offsetLeft(t){this.ja+=+t}offsetTop(t){this.za+=+t}ou(t){this.Ba+=+t}au(t){this.Ua+=+t}uu(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.za<this.Ua?this.ja<this.Ba?this.Ua=this.za+this.width():this.Ua=this.za-this.width():this.ja<this.Ba?this.Ua=this.za-this.width():this.Ua=this.za+this.width()}lu(t,s){t=+t,s=+s,this.ja-=t,this.za-=s,this.Ba+=t,this.Ua+=s}cu(t,s){t=+t,s=+s,this.ja+=t,this.za+=s,this.Ba-=t,this.Ua-=s}multiply(t,s){this.ja*=t,this.za*=s,this.Ba*=t,this.Ua*=s}Mt(t,s){this.ja/=t,this.za/=s,this.Ba/=t,this.Ua/=s}fu(t){this.ja=+t-this.ja,this.Ba=+t-this.Ba}du(t){this.za=+t-this.za,this.Ua=+t-this.Ua}pu(t,s){const i=this.width(),e=this.height(),n=this.Ka()+i*t,r=this.Xa()+e*s;this.Wa(n-e*s,r-i*t,e,i)}mu(){const t=this.ja;this.ja=this.Ba,this.Ba=t}yu(){const t=this.za;this.za=this.Ua,this.Ua=t}gu(t){const s=this.za;this.za=+t-this.Ua,this.Ua=+t-s}round(){this.ja=Math.round(this.ja),this.za=Math.round(this.za),this.Ba=Math.round(this.Ba),this.Ua=Math.round(this.Ua)}Mu(){this.ja=Math.ceil(this.ja),this.za=Math.ceil(this.za),this.Ba=Math.floor(this.Ba),this.Ua=Math.floor(this.Ua)}wu(){this.ja=Math.floor(this.ja),this.za=Math.floor(this.za),this.Ba=Math.ceil(this.Ba),this.Ua=Math.ceil(this.Ua)}floor(){this.ja=Math.floor(this.ja),this.za=Math.floor(this.za),this.Ba=Math.floor(this.Ba),this.Ua=Math.floor(this.Ua)}ceil(){this.ja=Math.ceil(this.ja),this.za=Math.ceil(this.za),this.Ba=Math.ceil(this.Ba),this.Ua=Math.ceil(this.Ua)}Zn(t,s,i,e){this.ja=Math.max(this.ja,+t),this.za=Math.max(this.za,+s),this.Ba=Math.min(this.Ba,+i),this.Ua=Math.min(this.Ua,+e)}Su(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.ja=da.Zn(this.ja,t,i),this.za=da.Zn(this.za,s,e),this.Ba=da.Zn(this.Ba,t,i),this.Ua=da.Zn(this.Ua,s,e)}normalize(){this.ja>this.Ba&&this.mu(),this.za>this.Ua&&this.yu()}Tu(t){return!(t.Ba<this.ja||t.Ua<this.za||t.ja>this.Ba||t.za>this.Ua)}bu(t,s,i){return!(t.Ba+s<this.ja||t.Ua+i<this.za||t.ja+s>this.Ba||t.za+i>this.Ua)}vu(t,s){return t>=this.ja&&t<=this.Ba&&s>=this.za&&s<=this.Ua}xu(t){return t.ja>=this.ja&&t.za>=this.za&&t.Ba<=this.Ba&&t.Ua<=this.Ua}Cu(t){t.ja<this.ja&&(this.ja=+t.ja),t.za<this.za&&(this.za=+t.za),t.Ba>this.Ba&&(this.Ba=+t.Ba),t.Ua>this.Ua&&(this.Ua=+t.Ua)}Gu(t){this.ja=da.Gt(t.ja,t.Ba,this.ja),this.za=da.Gt(t.za,t.Ua,this.za),this.Ba=da.Gt(t.ja,t.Ba,this.Ba),this.Ua=da.Gt(t.za,t.Ua,this.Ua)}}}{const pa=self.Gs;pa.Iu=class{constructor(t,s,i,e,n,r,h,o){this.Nu=NaN,this.Eu=NaN,this.Du=NaN,this._u=NaN,this.Au=NaN,this.Lu=NaN,this.Ou=NaN,this.Ru=NaN,this.Nu=0,this.Eu=0,this.Du=0,this._u=0,this.Au=0,this.Lu=0,this.Ou=0,this.Ru=0,t instanceof pa.Iu?this.m(t):this.set(t||0,s||0,i||0,e||0,n||0,r||0,h||0,o||0)}set(t,s,i,e,n,r,h,o){this.Nu=+t,this.Eu=+s,this.Du=+i,this._u=+e,this.Au=+n,this.Lu=+r,this.Ou=+h,this.Ru=+o}Pu(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}m(t){this.Nu=t.Nu,this.Eu=t.Eu,this.Du=t.Du,this._u=t._u,this.Au=t.Au,this.Lu=t.Lu,this.Ou=t.Ou,this.Ru=t.Ru}equals(t){return this.Nu===t.Nu&&this.Eu===t.Eu&&this.Du===t.Du&&this._u===t._u&&this.Au===t.Au&&this.Lu===t.Lu&&this.Ou===t.Ou&&this.Ru===t.Ru}ku(t){this.Nu=+t}Fr(){return this.Nu}Fu(t){this.Eu=+t}jr(){return this.Eu}ju(t){this.Du=+t}zr(){return this.Du}zu(t){this._u=+t}Br(){return this._u}Bu(t){this.Au=+t}Ur(){return this.Au}Uu(t){this.Lu=+t}Wr(){return this.Lu}Wu(t){this.Ou=+t}Qr(){return this.Ou}Qu(t){this.Ru=+t}Jr(){return this.Ru}Ju(){return new DOMQuad(new DOMPoint(this.Nu,this.Eu),new DOMPoint(this.Du,this._u),new DOMPoint(this.Au,this.Lu),new DOMPoint(this.Ou,this.Ru))}static Vu(t){return pa.Qn(pa.Iu,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Nu,this.Eu,this.Du,this._u,this.Au,this.Lu,this.Ou,this.Ru]}Bo(){return new Float64Array(this.toArray())}Uo(t,s){t[s++]=this.Nu,t[s++]=this.Eu,t[s++]=this.Du,t[s++]=this._u,t[s++]=this.Au,t[s++]=this.Lu,t[s++]=this.Ou,t[s]=this.Ru}Yu(t,s,i){t[s++]=this.Nu,t[s++]=this.Eu,t[s++]=i,t[s++]=this.Du,t[s++]=this._u,t[s++]=i,t[s++]=this.Au,t[s++]=this.Lu,t[s++]=i,t[s++]=this.Ou,t[s++]=this.Ru,t[s]=i}offset(t,s){t=+t,s=+s,this.Nu+=t,this.Eu+=s,this.Du+=t,this._u+=s,this.Au+=t,this.Lu+=s,this.Ou+=t,this.Ru+=s}round(){this.Nu=Math.round(this.Nu),this.Eu=Math.round(this.Eu),this.Du=Math.round(this.Du),this._u=Math.round(this._u),this.Au=Math.round(this.Au),this.Lu=Math.round(this.Lu),this.Ou=Math.round(this.Ou),this.Ru=Math.round(this.Ru)}floor(){this.Nu=Math.floor(this.Nu),this.Eu=Math.floor(this.Eu),this.Du=Math.floor(this.Du),this._u=Math.floor(this._u),this.Au=Math.floor(this.Au),this.Lu=Math.floor(this.Lu),this.Ou=Math.floor(this.Ou),this.Ru=Math.floor(this.Ru)}ceil(){this.Nu=Math.ceil(this.Nu),this.Eu=Math.ceil(this.Eu),this.Du=Math.ceil(this.Du),this._u=Math.ceil(this._u),this.Au=Math.ceil(this.Au),this.Lu=Math.ceil(this.Lu),this.Ou=Math.ceil(this.Ou),this.Ru=Math.ceil(this.Ru)}Hu(t){this.Nu=t.ja,this.Eu=t.za,this.Du=t.Ba,this._u=t.za,this.Au=t.Ba,this.Lu=t.Ua,this.Ou=t.ja,this.Ru=t.Ua}qu(t,s){0===s?this.Hu(t):this.Zu(t,Math.sin(s),Math.cos(s))}Zu(t,s,i){const e=t.ja*s,n=t.za*s,r=t.Ba*s,h=t.Ua*s,o=t.ja*i,a=t.za*i,u=t.Ba*i,l=t.Ua*i;this.Nu=o-n,this.Eu=a+e,this.Du=u-n,this._u=a+r,this.Au=u-h,this.Lu=l+r,this.Ou=o-h,this.Ru=l+e}Ku(t){t.set(Math.min(this.Nu,this.Du,this.Au,this.Ou),Math.min(this.Eu,this._u,this.Lu,this.Ru),Math.max(this.Nu,this.Du,this.Au,this.Ou),Math.max(this.Eu,this._u,this.Lu,this.Ru))}vu(t,s){let i=this.Du-this.Nu,e=this._u-this.Eu;const n=this.Au-this.Nu,r=this.Lu-this.Eu,h=t-this.Nu,o=s-this.Eu;let a=i*i+e*e,u=i*n+e*r,l=i*h+e*o;const c=n*n+r*r,f=n*h+r*o;let d=1/(a*c-u*u),p=(c*l-u*f)*d,m=(a*f-u*l)*d;return p>=0&&m>0&&p+m<1||(i=this.Ou-this.Nu,e=this.Ru-this.Eu,a=i*i+e*e,u=i*n+e*r,l=i*h+e*o,d=1/(a*c-u*u),p=(c*l-u*f)*d,m=(a*f-u*l)*d,p>=0&&m>0&&p+m<1)}ru(){return(this.Nu+this.Du+this.Au+this.Ou)/4}hu(){return(this.Eu+this._u+this.Lu+this.Ru)/4}Xu(t,s,i,e){return!(!this.vu(t,s)&&!this.vu(i,e))||pa.kr(t,s,i,e,this)}$u(t){let s=t.ru(),i=t.hu();if(this.vu(s,i))return!0;if(s=this.ru(),i=this.hu(),t.vu(s,i))return!0;const e=this.Nu,n=this.Eu,r=this.Du,h=this._u,o=this.Au,a=this.Lu,u=this.Ou,l=this.Ru;return pa.kr(e,n,r,h,t)||pa.kr(r,h,o,a,t)||pa.kr(o,a,u,l,t)||pa.kr(u,l,e,n,t)}tl(){const t=this.Nu,s=this.Eu;this.Nu=this.Du,this.Eu=this._u,this.Du=this.Au,this._u=this.Lu,this.Au=this.Ou,this.Lu=this.Ru,this.Ou=t,this.Ru=s}sl(){this.il(0,2),this.il(1,3),this.il(6,4),this.il(7,5)}el(){this.il(0,6),this.il(1,7),this.il(2,4),this.il(3,5)}nl(){this.il(2,6),this.il(3,7)}il(t,s){const i=this.rl(t);this.hl(t,this.rl(s)),this.hl(s,i)}rl(t){switch(t){case 0:return this.Nu;case 1:return this.Eu;case 2:return this.Du;case 3:return this._u;case 4:return this.Au;case 5:return this.Lu;case 6:return this.Ou;case 7:return this.Ru;default:throw new RangeError("invalid quad point index")}}hl(t,s){switch(s=+s,t){case 0:this.Nu=s;break;case 1:this.Eu=s;break;case 2:this.Du=s;break;case 3:this._u=s;break;case 4:this.Au=s;break;case 5:this.Lu=s;break;case 6:this.Ou=s;break;case 7:this.Ru=s;break;default:throw new RangeError("invalid quad point index")}}}}{const ma=self.Gs,ya=(self.assert,[0,0,1,0,1,1,0,1]),ga=ma.Qn(ma.Iu);ma.ol=class extends ma.Un{constructor(t,s=!0){super(),t||(t=ya),this.al=Float64Array.from(t),this.ul=new ma.Rect,this.ll=!0,this.cl=s}Jn(){}fl(){return this.al}dl(){return this.al.length/2}pl(t){this.al.length===t.length?this.al.set(t):this.al=Float64Array.from(t),this.ll=!0}ml(){this.pl(ya)}m(t){this.pl(t.al)}yl(){this.ll=!0}gl(){if(!this.ll)return;const t=this.al;let s=t[0],i=t[1],e=s,n=i;for(let r=0,h=t.length;r<h;r+=2){const h=t[r],o=t[r+1];h<s&&(s=h),h>e&&(e=h),o<i&&(i=o),o>n&&(n=o)}this.ul.set(s,i,e,n),this.ll=!1}Hu(t,s,i){let e=this.al;8!==e.length&&(e=new Float64Array(8),this.al=e),e[0]=t.Ka()-s,e[1]=t.Xa()-i,e[2]=t.$a()-s,e[3]=t.Xa()-i,e[4]=t.$a()-s,e[5]=t.tu()-i,e[6]=t.Ka()-s,e[7]=t.tu()-i,this.ul.m(t),0===s&&0===i||this.ul.offset(-s,-i),this.ll=!1}Ml(t,s,i){ga.m(t),ga.offset(s,i),this.pl(ga.toArray()),this.ll=!0}transform(t,s,i){let e=0,n=1;0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.wl(t,s,e,n)}wl(t,s,i,e){const n=this.al;for(let r=0,h=n.length;r<h;r+=2){const h=r+1,o=n[r]*t,a=n[h]*s;n[r]=o*e-a*i,n[h]=a*e+o*i}this.ll=!0}offset(t,s){const i=this.al;for(let e=0,n=i.length;e<n;e+=2)i[e]+=t,i[e+1]+=s}vu(t,s){const i=this.al;if(t===i[0]&&s===i[1])return!0;this.gl();const e=this.ul,n=e.Ka()-110,r=e.Xa()-101,h=e.$a()+131,o=e.tu()+120;let a=0,u=0,l=0,c=0,f=0,d=0,p=0,m=0;n<t?(a=n,l=t):(a=t,l=n),r<s?(u=r,c=s):(u=s,c=r),h<t?(f=h,p=t):(f=t,p=h),o<s?(d=o,m=s):(d=s,m=o);let y=0,g=0;for(let e=0,M=i.length;e<M;e+=2){const w=(e+2)%M,S=i[e],T=i[e+1],b=i[w],v=i[w+1];ma.Pr(n,r,t,s,a,l,u,c,S,T,b,v)&&++y,ma.Pr(h,o,t,s,f,p,d,m,S,T,b,v)&&++g}return y%2==1||g%2==1}Sl(t,s,i){const e=t.al,n=this.al;if(this.vu(e[0]+s,e[1]+i))return!0;if(t.vu(n[0]-s,n[1]-i))return!0;for(let t=0,r=n.length;t<r;t+=2){const h=(t+2)%r,o=n[t],a=n[t+1],u=n[h],l=n[h+1];let c=0,f=0,d=0,p=0;o<u?(c=o,d=u):(c=u,d=o),a<l?(f=a,p=l):(f=l,p=a);for(let t=0,n=e.length;t<n;t+=2){const r=(t+2)%n,h=e[t]+s,m=e[t+1]+i,y=e[r]+s,g=e[r+1]+i;if(ma.Pr(o,a,u,l,c,d,f,p,h,m,y,g))return!0}}return!1}Xu(t,s,i,e,n,r){if(this.vu(i-t,e-s))return!0;if(this.vu(n-t,r-s))return!0;let h=0,o=0,a=0,u=0;i<n?(h=i,a=n):(h=n,a=i),e<r?(o=e,u=r):(o=r,u=e);const l=this.al;for(let c=0,f=l.length;c<f;c+=2){const d=(c+2)%f,p=l[c]+t,m=l[c+1]+s,y=l[d]+t,g=l[d+1]+s;if(ma.Pr(i,e,n,r,h,a,o,u,p,m,y,g))return!0}return!1}sl(t){const s=this.al;for(let i=0,e=s.length;i<e;i+=2)s[i]=2*t-s[i];this.ll=!0}el(t){const s=this.al;for(let i=0,e=s.length;i<e;i+=2){const e=i+1;s[e]=2*t-s[e]}this.ll=!0}nl(){const t=this.al;for(let s=0,i=t.length;s<i;s+=2){const i=s+1,e=t[s];t[s]=t[i],t[i]=e}this.ll=!0}Tl(){const t=this.al;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i];return s/this.dl()}bl(){const t=this.al;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i+1];return s/this.dl()}vl(){return this.al}xl(){return this.dl()}Cl(){return this.cl}}}{const Ma=self.Gs;Ma.Gl=class extends Ma.Un{constructor(t){if(super(),this.Il=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}Jn(){this.Nl(),this.Il=null}El(){return 0===this.Il.size}Nl(){const t=this.Il;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){const e=this.Il;let n=e.get(t);n||(n=new Map,e.set(t,n)),n.set(s,i)}Js(t,s){const i=this.Il.get(t);return i?i.get(s):i}Qs(t,s){const i=this.Il.get(t);return!!i&&i.has(s)}Dl(t,s){const i=this.Il,e=i.get(t);if(!e)return!1;const n=e.delete(s);return n&&0===e.size&&i.delete(t),n}_l(t){const s=this.Il,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[i,e]of s.entries())e.delete(t)&&0===e.size&&s.delete(i)}Al(){let t=0;for(const s of this.Il.values())t+=s.size;return t}*values(){for(const t of this.Il.values())yield*t.values()}*Ll(){for(const[t,s]of this.Il.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.Il.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const wa=self.Gs;wa.Ol=class extends wa.Un{constructor(){super(),this.Rl=new Set,this.Pl=[],this.kl=!1}Jn(){this.Nl()}Nl(){this.Rl.clear(),wa.wh(this.Pl),this.kl=!1}Fl(t){this.Rl.has(t)||(this.Rl.add(t),this.kl||this.Pl.push(t))}Qs(t){return this.Rl.has(t)}Dl(t){this.Rl.delete(t)&&(this.kl=!0)}Al(){return this.Rl.size}El(){return 0===this.Rl.size}jl(){return this.kl&&(this.zl(),this.kl=!1),this.Pl}zl(){const t=this.Pl;wa.wh(t);for(const s of this.Rl)t.push(s)}}}{const Sa=self.Gs,Ta=new Map,ba=new Map,va=new Map,xa=new Map,Ca=new Map,Ga=new Map,Ia=new Map,Na=new Map,Ea=new Map;Ea.set("linear","noease"),Ea.set("default","noease");const Da=["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"],_a=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Aa=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]);self.Bl=class t{constructor(){}static Ul(){return"default"}static Wl(){return"noease"}static Ql(t){return Aa.get(t)}static Jl(s,...i){let e,n;this.Vl(),s?(va.has(s)||va.set(s,new Map),e=va.get(s),n=[...e.keys()].filter((i=>!t.Yl(i,s)||t.Yl(i,s).transition.Hl()))):(e=Ca,n=[...e.keys()]);const r=n.sort();return[...ba.keys()].concat(r).filter((t=>!i.includes(t)))}static ql(){this.Vl();const t=[...Ca.keys()];return t.sort(),[...ba.keys()].concat(t)}static Zl(){this.Vl();const t=[...Ca.keys()];return t.sort(),t}static Kl(t){for(const s of Da)if(self.lang(`ui.bars.timeline.eases.${s}`)===t)return!0;for(const s of _a)if(self.lang(`ui.bars.timeline.short-eases.${s}`)===t)return!0}static Xl(t){return this.Vl(),[...ba.keys()].includes(t)}static $l(s){const i=Ea.get(s);return i?Ta.get(i):t.Xl(s)?Ta.get(s):Ia.has(s)?Ia.get(s):void 0}static tc(t){return this.Vl(),Na.get(t)}static sc(s,i){this.Vl();const e=t.$l(s);if(e)return e;if(!i)throw new Error("missing ease function");return va.get(i).get(s)}static Yl(t,s){this.Vl();const i=xa.get(s);if(i)return i.get(t)}static ec(s,i){return this.Vl(),!!t.$l(s)||!!va.get(i).get(s)}static nc(s){this.Vl();return t.$l(s)||Ca.get(s)}static rc(t){return this.Vl(),Ga.get(t)}static hc(t){return this.Vl(),this.ql()[t]}static oc(t,s){return this.Vl(),this.Jl(s).indexOf(t)}static ac(t){return this.oc(t)}static Vl(){0===Ta.size&&(this.uc("default",(()=>{})),this.uc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.uc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.uc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.uc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.uc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.uc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.uc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.uc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.uc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.uc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.uc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.uc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.uc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.uc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.uc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.uc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.uc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.uc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.uc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.uc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.uc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.uc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.uc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.uc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.uc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.uc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.lc("cubicbezier",this.cc),this.lc("spline",this.fc))}static uc(s,i,e=!1){if("function"==typeof i)t.dc(s,i,"predefined");else{if(!Sa.ve(i))throw new Error("unexpected arguments");if(self.mc){const n=Sa.Qn(self.mc,s,e);n.yc(i),t.dc(s,((t,s,i,e)=>n.Mc(t,s,i,e)),"predefined"),Na.set(s,n)}else{const n=Sa.Qn(Sa.wc,[s,i.map((t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee]))],!1);n.Sc(e),t.dc(s,((t,s,i,e)=>n.Mc(t,s,i,e)),"predefined")}}}static lc(s,i){t.dc(s,i,"private")}static Tc(s,i,e,n){this.Vl(),t.dc(s,i,"custom",e,n)}static bc(t,s){if(this.Xl(t))return;if([...Ia.keys()].includes(t))return;const i=va.get(s);i&&i.delete(t);const e=xa.get(s);e&&e.delete(t)}static dc(t,s,i,e,n){switch(i){case"predefined":Ta.set(t,s),ba.set(t,s);break;case"custom":e?(va.has(e)||va.set(e,new Map),xa.has(e)||xa.set(e,new Map),va.get(e).set(t,s),xa.get(e).set(t,n)):(Ca.set(t,s),Ga.set(t,n));break;case"private":Ta.set(t,s),Ia.set(t,s);break;default:throw new Error("unexpected ease mode")}}static vc(t,s,i,e){return 0===e?s:i*t/e+s}static cc(t,s,i,e,n){return s+3*t*(i-s)+3*t**2*(s+e-2*i)+t**3*(n-s+3*i-3*e)}static fc(t,s,i,e,n,r,h,o,a,u){if(e===n&&r===h)return t;const l=za(t,s,e,r,o,u),c=Ra(i,n,h,a),f=Pa(i,n,h,a),d=ka(i,n,h,a);return Fa(l,c,f,d)}static xc(t,s,i,e){const n=[],r=Ra(t,s,i,e),h=Pa(t,s,i,e),o=ka(t,s,i,e);for(let t=0;t<La;++t){const s=Fa(t*Oa,r,h,o);n.push(s)}return n}};const La=11,Oa=1/(La-1),Ra=(t,s,i,e)=>e-3*i+3*s-t,Pa=(t,s,i,e)=>3*i-6*s+3*t,ka=(t,s,i,e)=>3*(s-t),Fa=(t,s,i,e)=>((s*t+i)*t+e)*t,ja=(t,s,i,e)=>3*s*t*t+2*i*t+e,za=(t,s,i,e,n,r)=>{if(1==t)return 1;let h=0,o=1,a=r[o],u=La-1;for(r[La-1];o!=u&&a<=t;)o++,a=r[o],h+=Oa;o--,a=r[o];let l=h+(t-a)/(r[o+1]-a)*Oa;const c=Ra(s,i,e,n),f=Pa(s,i,e,n),d=ka(s,i,e,n),p=ja(l,c,f,d);if(0===p)return l;if(p>=.01){for(let s=0;s<4;++s)l-=(Fa(l,c,f,d)-t)/ja(l,c,f,d);return l}{let s,i,e=h,n=h+Oa,r=0;do{l=e+(n-e)/2;let h=Fa(l,c,f,d)-t;h>0?n=l:e=l,s=Math.abs(h)>1e-7,i=++r<10}while(s&&i);return l}}}{let Ba=function(t){Ua.ae(t)};0;const Ua=self.Gs;Ua.Cc=class{constructor(t){this.Gc=[],this.Hn=t||"",this.Ic=0}Jn(){this.Nl(),this.Gc=null}Nc(){return this.Hn}Nl(){Ua.Sh(this.Gc),this.Ic=0}Ec(){return this.Ic}Dc(t=Math.random()*this.Ec()){let s=0;for(const[i,e]of this.Gc)if(s+=i,t<s)return e;return 0}_c(){return!!this.Gc.length}Ac(t,s){Ba(s),this.Ic+=t,this.Gc.push([t,s])}Lc(t,s){Ba(s);const i=0===t;for(let e=0;e<this.Gc.length;e++){const n=this.Gc[e],r=i||n[0]===t,h=n[1]===s;if(r&&h){this.Gc.splice(e,1),this.Ic-=n[0];break}}}Oc(){return JSON.stringify(this.Gc)}static Rc(t,s){const i=new Ua.Cc(s),e=JSON.parse(t);for(const t of e){const s=t[0],e=t[1];i.Ac(s,e)}return i}}}{const Wa=self.Gs;let Qa=0;Wa.Pc=class{constructor(t,s){this.kc=t,this.Fc=s,this.jc=Qa++,this.kc.zc("runtime","screen-reader-text",{type:"create",id:this.jc,text:this.Fc})}Jn(){this.kc.zc("runtime","screen-reader-text",{type:"release",id:this.jc}),this.kc=null,this.Fc="",this.jc=-1}Bc(t){this.Fc!==t&&(this.Fc=t,this.kc.zc("runtime","screen-reader-text",{type:"update",id:this.jc,text:this.Fc}))}}}self.Gs.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.Uc=!1,this.Wc=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.Wc)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Uc=!0}};{const Ja=self.Gs;self.assert;Ja.Event.Qc=class extends Ja.Un{constructor(t){super(),this.Jc=t,this.Vc=[],this.Yc=new Set,this.Hc=[],this.qc=new Set,this.Zc=0,this.Kc=[]}Jn(){this.Zc>0||(Ja.wh(this.Vc),this.Yc.clear(),Ja.wh(this.Hc),this.qc.clear(),Ja.wh(this.Kc),Ja.Jn(this))}Xc(t,s){if(this.$c())this.Kc.push({tf:"add",sf:t,capture:s});else if(s){if(this.Yc.has(t))return;this.Vc.push(t),this.Yc.add(t)}else{if(this.qc.has(t))return;this.Hc.push(t),this.qc.add(t)}}if(t,s){this.$c()?this.Kc.push({tf:"remove",sf:t,capture:s}):s?this.Yc.has(t)&&(this.Yc.delete(t),Ja.Gh(this.Vc,t)):this.qc.has(t)&&(this.qc.delete(t),Ja.Gh(this.Hc,t))}ef(){return!this.Vc.length&&!this.Hc.length}$c(){return this.Zc>0}nf(){const t=new Set,s=new Set;for(const i of this.Kc)if("add"===i.tf)this.Xc(i.sf,i.capture),i.capture?s.delete(i.sf):t.delete(i.sf);else{if("remove"!==i.tf)throw new Error("invalid op");i.capture?(this.Yc.delete(i.sf),s.add(i.sf)):(this.qc.delete(i.sf),t.add(i.sf))}Ja.Eh(this.Hc,t),Ja.Eh(this.Vc,s),Ja.wh(this.Kc)}rf(t){this.hf();let s=!1;for(let i=0,e=this.Vc.length;i<e;++i)if(this.Vc[i](t),t.Uc){s=!0;break}if(!s)for(let s=0,i=this.Hc.length;s<i&&(this.Hc[s](t),!t.Uc);++s);return this.af(),!t.defaultPrevented}uf(t){this.hf();for(let s=0,i=this.Vc.length;s<i;++s)this.Vc[s](t);for(let s=0,i=this.Hc.length;s<i;++s)this.Hc[s](t);return this.af(),!0}hf(){this.Zc++}af(){this.Zc--,0===this.Zc&&this.Kc.length>0&&this.nf()}lf(t){t?this.hf():this.af()}cf(t){let s=[];for(let i=0,e=this.Vc.length;i<e;++i){let e=this.Vc[i];s.push(Ja.ff((()=>e(t))))}for(let i=0,e=this.Hc.length;i<e;++i){let e=this.Hc[i];s.push(Ja.ff((()=>e(t))))}return Promise.all(s).then((()=>!t.defaultPrevented))}df(t){const s=[];this.hf();for(let i=0,e=this.Vc.length;i<e;++i){const e=this.Vc[i](t);e instanceof Promise&&s.push(e)}for(let i=0,e=this.Hc.length;i<e;++i){const e=this.Hc[i](t);e instanceof Promise&&s.push(e)}return this.af(),s.length?Promise.all(s).then((()=>!t.defaultPrevented)):!t.defaultPrevented}async pf(t){return await this.df(t)}async mf(t){this.hf();for(let s=0,i=this.Vc.length;s<i;++s){const i=this.Vc[s](t);i instanceof Promise&&await i}for(let s=0,i=this.Hc.length;s<i;++s){const i=this.Hc[s](t);i instanceof Promise&&await i}return this.af(),!t.defaultPrevented}*yf(t){this.hf();for(let s=0,i=this.Vc.length;s<i;++s){const i=this.Vc[s](t);Ja.To(i)&&(yield*i)}for(let s=0,i=this.Hc.length;s<i;++s){const i=this.Hc[s](t);Ja.To(i)&&(yield*i)}this.af()}}}{const Va=self.Gs;Va.Event.gf=class extends Va.Un{constructor(){super(),this.Mf=new Map,this.wf=!1}Jn(){if(this.wf)throw new Error("already released");this.Sf(),this.wf=!0,Va.Jn(this)}Vn(){return this.wf}Sf(){if(this.Mf){for(let t of this.Mf.values())t.Jn();this.Mf.clear()}}Tf(t,s){let i=this.Mf.get(t);return i||(s?(i=Va.Qn(Va.Event.Qc,t),this.Mf.set(t,i),i):null)}bf(t){return this.Mf.has(t)}addEventListener(t,s,i){this.Tf(t,!0).Xc(s,!!i)}removeEventListener(t,s,i){let e=this.Tf(t,!1);e&&(e.if(s,!!i),e.ef()&&this.Mf.delete(t))}dispatchEvent(t){const s=this.Tf(t.type,!1);return!s||(t.cancelable?s.rf(t):s.uf(t))}vf(t){const s=this.Tf(t.type,!1);return s?(t.Wc=!0,s.cf(t)):Promise.resolve(!0)}async xf(t){const s=this.Tf(t.type,!1);if(!s)return!0;this.Mf.delete(t.type),t.Wc=!0;const i=await s.cf(t);return s.Jn(),i}async Cf(t){const s=this.Tf(t.type,!1);return!s||await s.pf(t)}Gf(t){const s=this.Tf(t.type,!1);return!s||s.df(t)}async If(t){const s=this.Tf(t.type,!1);return!s||await s.mf(t)}Nf(t){const s=this.Tf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.yf(t)}lf(t){for(const s of this.Mf.values())s.lf(t)}}}{let Ya=function(t){$a=Ka&&0===tu?requestIdleCallback(Ha,{timeout:35}):setTimeout(Ha,tu>0?1:t)},Ha=function(t){if($a=-1,!Xa.length)return;let s=performance.now(),i=s,e=0,n=0;do{qa(Xa.shift()),i=performance.now(),++e,n=(i-s)/e*1.1}while(Xa.length&&(Ka&&0===tu&&void 0!==t?n<t.timeRemaining():i-s+n<12));if(-1===$a&&Xa.length){let t=i-s;Ya(Math.max(16-t,4))}},qa=function(t){let s;try{s=t.sf()}catch(s){return void t.reject(s)}t.resolve(s)};0;const Za=self.Gs,Ka="undefined"!=typeof requestIdleCallback;let Xa=[],$a=-1,tu=0,su=Za.Hs.Qs("disable-asyncify");su&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),Za.ff=function(t){let s=null;return Za.Rs&&(s=Za.Ki()),new Promise(((i,e)=>{Xa.push({sf:t,resolve:i,reject:e,stack:s}),su?qa(Xa.pop()):-1===$a&&Ya(16)}))},Za.ff.Ef=function(t){if(t)++tu;else if(--tu,tu<0)throw new Error("already turned off high throughput mode")}}{let iu=function(){ru=-1},eu=function(){hu=-1,ou=-1;let t=Date.now();for(let s of au)if(s.Df(t)){let t=s._f();(-1===ou||t<ou)&&(ou=t)}else au.delete(s);if(-1!==ou){let s=Math.max(ou-t+100,1e3);hu=self.setTimeout(eu,s)}};0;const nu=self.Gs;let ru=-1;nu.Af=function(){return-1===ru&&(ru=Date.now(),self.setTimeout(iu,16)),ru};let hu=-1,ou=-1,au=new Set;nu.Lf=class{constructor(t,s){this.Of=t,this.Rf=1e3*s,this.Pf=0,this.kf=!1}Ff(){let t=nu.Af();this.Pf=t+this.Rf,this.kf||(au.add(this),this.kf=!0),-1===hu?(ou=this.Pf,hu=self.setTimeout(eu,this.Rf+100)):this.Pf<ou&&ou>t+1e3&&(self.clearTimeout(hu),ou=this.Pf,hu=self.setTimeout(eu,this.Rf+100))}Df(t){return!(t>=this.Pf&&(this.Of()?(this.Pf=t+this.Rf,0):(this.kf=!1,1)))}_f(){return this.Pf}jf(){this.kf&&(au.delete(this),this.kf=!1,0===au.size&&-1!==hu&&(self.clearTimeout(hu),hu=-1,ou=-1))}Jn(){this.jf(),this.Of=null}}}{const uu=self.Gs;uu.zf=class t{constructor(t){this.Bf=!1,this.Uf=t}Wf(){this.Bf||(this.Bf=!0,this.Uf&&(this.Uf(),this.Uf=null))}Qf(){return this.Bf}Jn(){this.Wf()}static Jn(s){return new t((()=>s.Jn()))}static Jf(t,s,i,e,n){if("string"!=typeof s&&!Array.isArray(s))throw new TypeError("expected string or array");if(null==e)e=!1;else if("boolean"!=typeof e&&"object"!=typeof e)throw new TypeError("invalid event listener options");if(n&&(i=i.bind(n)),Array.isArray(s)||s.includes(" ")){"string"==typeof s&&(s=s.split(" "));const n=new uu.Vf;for(const r of s)t.addEventListener(r,i,e),n.Fl(uu.Qn(uu.zf,(()=>t.removeEventListener(r,i,e))));return n}return t.addEventListener(s,i,e),uu.Qn(uu.zf,(()=>t.removeEventListener(s,i,e)))}},uu.Yf=class extends uu.zf{Hf(t){this.Uf=t}},uu.Vf=class extends uu.zf{constructor(...t){super(),this.qf=new Set;for(let s of t)this.Fl(s)}Fl(...t){if(this.Bf)throw new Error("already disposed");for(let s of t)this.qf.add(s)}Zf(t){if(this.Bf)throw new Error("already disposed");this.qf.delete(t)}Kf(){if(this.Bf)throw new Error("already disposed");if(this.qf){for(let t of this.qf)t.Wf();this.qf.clear()}}Qf(){return this.Bf}Wf(){if(this.Bf)throw new Error("already disposed");this.Bf=!0;for(let t of this.qf)t.Wf();this.qf.clear(),this.qf=null}Jn(){this.Wf()}}}{const lu=self.Gs;lu.Xf=class extends lu.Un{constructor(){super(),this.$f=0,this.Ea=0,this.td=0,this.sd=0}Fl(t){t=+t,this.Ea=t-this.$f,this.td=this.sd+this.Ea,this.$f=this.td-this.sd-this.Ea,this.sd=this.td}ed(t){this.sd-=+t}Js(){return this.sd}Ff(){this.$f=0,this.Ea=0,this.td=0,this.sd=0}Set(t){this.$f=0,this.Ea=0,this.td=0,this.sd=+t}nd(t){this.$f=t.$f,this.Ea=t.Ea,this.td=t.td,this.sd=t.sd}Jn(){}}}{const cu=self.Gs,fu={},du=!0;fu.rd=function(t){this.hd=t,this.right=this.hd.od,this.left=this.hd.od,this.parent=null,this.color=!1,this.key=null},fu.ad=function(t){this.size=0,this.od=new fu.rd(this),this.od.color=!1,this.root=this.od,this.root.parent=this.od,this.compare=t||this.ud},fu.ad.prototype.ud=function(t,s){return t<s?-1:s<t?1:0},fu.ad.prototype.clone=function(){var t=new fu.ad(this.compare);return t.ld(this),t},fu.ad.prototype.clear=function(){this.size=0,this.od=new fu.rd(this),this.od.color=!1,this.root=this.od,this.root.parent=this.od},fu.ad.prototype.fd=function(t){var s=t.right;t.right=s.left,s.left!=this.od&&(s.left.parent=t),s.parent=t.parent,t.parent==this.od?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,s.left=t,t.parent=s},fu.ad.prototype.dd=function(t){var s=t.left;t.left=s.right,s.right!=this.od&&(s.right.parent=t),s.parent=t.parent,t.parent==this.od?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,s.right=t,t.parent=s},fu.ad.prototype.pd=function(t){if(this.contains(t))this.md(t).key=t;else{var s=new fu.rd(this);s.key=t;for(var i=this.od,e=this.root;e!=this.od;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;s.parent=i,i==this.od?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.od,s.right=this.od,s.color=du,this.yd(s),this.size++}},fu.ad.prototype.yd=function(t){for(;t!=this.od&&t!=this.root&&t.parent.color==du;){var s;t.parent==t.parent.parent.left?(s=t.parent.parent.right).color==du?(t.parent.color=!1,s.color=!1,t.parent.parent.color=du,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.fd(t)),t.parent.color=!1,t.parent.parent.color=du,t.parent.parent!=this.od&&this.dd(t.parent.parent)):(s=t.parent.parent.left).color==du?(t.parent.color=!1,s.color=!1,t.parent.parent.color=du,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.dd(t)),t.parent.color=!1,t.parent.parent.color=du,t.parent.parent!=this.od&&this.fd(t.parent.parent))}this.root.color=!1},fu.ad.prototype.gd=function(t){var s,i;(i=(s=t.left==this.od||t.right==this.od?t:this.Md(t)).left!=this.od?s.left:s.right).parent=s.parent,s.parent==this.od?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.wd(i),this.size--},fu.ad.prototype.wd=function(t){for(;t!=this.root&&0==t.color;){var s;t==t.parent.left?((s=t.parent.right).color==du&&(s.color=!1,t.parent.color=du,this.fd(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=du,t=t.parent):(0==s.right.color&&(s.left.color=!1,s.color=du,this.dd(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.fd(t.parent),t=this.root)):((s=t.parent.left).color==du&&(s.color=!1,t.parent.color=du,this.dd(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=du,t=t.parent):(0==s.left.color&&(s.right.color=!1,s.color=du,this.fd(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.dd(t.parent),t=this.root))}t.color=!1},fu.ad.prototype.remove=function(t){var s=this.md(t);if(s!=this.od){var i=s.key;return this.gd(s),i}return null},fu.ad.prototype.Sd=function(t,s){this.remove(s)},fu.ad.prototype.min=function(t){for(;t.left!=this.od;)t=t.left;return t},fu.ad.prototype.max=function(t){for(;t.right!=this.od;)t=t.right;return t},fu.ad.prototype.Md=function(t){if(t.right!=this.od)return this.min(t.right);for(var s=t.parent;s!=this.od&&t==s.right;)t=s,s=s.parent;return s},fu.ad.prototype.Td=function(t){if(t.left!=this.od)return this.max(t.left);for(var s=t.parent;s!=this.od&&t==s.left;)t=s,s=s.parent;return s},fu.ad.prototype.bd=function(t){if(this.size>0){var s=this.md(t);if(s==this.od)return null;if(s.right!=this.od)return this.min(s.right).key;for(var i=s.parent;i!=this.od&&s==i.right;)s=i,i=i.parent;return i!=this.od?i.key:null}return null},fu.ad.prototype.vd=function(t){if(this.size>0){var s=this.md(t);if(s==this.od)return null;if(s.left!=this.od)return this.max(s.left).key;for(var i=s.parent;i!=this.od&&s==i.left;)s=i,i=i.parent;return i!=this.od?i.key:null}return null},fu.ad.prototype.xd=function(){return this.min(this.root).key},fu.ad.prototype.Cd=function(){return this.max(this.root).key},fu.ad.prototype.md=function(t){for(var s=this.root;s!=this.od&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},fu.ad.prototype.contains=function(t){return null!=this.md(t).key},fu.ad.prototype.getValues=function(){var t=[];return this.forEach((function(s){t.push(s)})),t},fu.ad.prototype.ld=function(t){if("array"==fu.Gd(t))for(var s=0;s<t.length;s++)this.pd(t[s]);else if("function"==fu.Gd(t.forEach))t.forEach(this.pd,this);else if("function"==fu.Gd(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.pd(i[s])}else if("object"==fu.Gd(t))for(var e in t)this.pd(t[e])},fu.ad.prototype.Id=function(t){if("array"==fu.Gd(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==fu.Gd(t.forEach))t.forEach(this.Sd,this);else if("function"==fu.Gd(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.remove(i[s])}else if("object"==fu.Gd(t))for(var e in t)this.remove(t[e])},fu.ad.prototype.Nd=function(t){if("array"==fu.Gd(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==fu.Gd(t.forEach))return t.every(this.contains,this);if("function"==fu.Gd(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==fu.Gd(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},fu.ad.prototype.range=function(t,s){var i=[];return this.Ed((function(t){i.push(t)}),t,s),i},fu.ad.prototype.Dd=function(t,s){if(!this._d())for(var i=this.min(this.root);i!=this.od;){if(t.call(s,i.key,this))return;i=this.Md(i)}},fu.ad.prototype.Ad=function(t,s,i){if(!this._d())for(var e=this.md(s);e!=this.od;){if(t.call(i,e.key,this))return;e=this.Md(e)}},fu.ad.prototype.traverseTo=function(t,s,i){if(!this._d())for(var e=this.min(this.root),n=this.md(s);e!=n;){if(t.call(i,e.key,this))return;e=this.Md(e)}},fu.ad.prototype.Ed=function(t,s,i,e){if(!this._d())for(var n=this.md(s),r=this.md(i);n!=r;){if(t.call(e,n.key,this))return;n=this.Md(n)}},fu.ad.prototype.Ld=function(t,s){if(!this._d())for(var i=this.max(this.root);i!=this.od;){if(t.call(s,i.key,this))return;i=this.Td(i)}},fu.ad.prototype.forEach=function(t,s){if(!this._d())for(var i=this.min(this.root);i!=this.od;i=this.Md(i))t.call(s,i.key,i.key,this)},fu.ad.prototype.some=function(t,s){if(this._d())return!1;for(var i=this.min(this.root);i!=this.od;i=this.Md(i))if(t.call(s,i.key,i.key,this))return!0;return!1},fu.ad.prototype.every=function(t,s){if(this._d())return!1;for(var i=this.min(this.root);i!=this.od;i=this.Md(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},fu.ad.prototype.map=function(t,s){var i=[];if(this._d())return i;for(var e=this.min(this.root);e!=this.od;e=this.Md(e))i.push(t.call(s,e.key,e.key,this));return i},fu.ad.prototype.filter=function(t,s){var i=[];if(this._d())return i;for(var e=this.min(this.root);e!=this.od;e=this.Md(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},fu.ad.prototype.Od=function(){return this.size},fu.ad.prototype._d=function(){return 0==this.size},fu.ad.prototype.isSubsetOf=function(t){var s=fu.Od(t);if(this.Od()>s)return!1;var i=0;if(this._d())return!0;for(var e=this.min(this.root);e!=this.od;e=this.Md(e))fu.contains.call(t,t,e.key)&&i++;return i==this.Od()},fu.ad.prototype.intersection=function(t){var s=new fu.ad(this.compare);if(this._d())return s;for(var i=this.min(this.root);i!=this.od;i=this.Md(i))t.contains.call(t,i.key,i.key,this)&&s.pd(i.key);return s},cu.ad=class extends cu.Un{constructor(t){super(),this.Rd=new fu.ad(t),this.Pd=!1,this.kd=new Set,this.Fd=new Set}Fl(t){this.Pd?this.Rd.contains(t)?this.Fd.delete(t):this.kd.add(t):this.Rd.pd(t)}Zf(t){this.Pd?this.Rd.contains(t)?this.Fd.add(t):this.kd.delete(t):this.Rd.remove(t)}Qs(t){return this.Pd?!!this.kd.has(t)||!this.Fd.has(t)&&this.Rd.contains(t):this.Rd.contains(t)}Nl(){this.Rd.clear(),this.kd.clear(),this.Fd.clear()}toArray(){if(this.Pd)throw new Error("cannot be used in queueing mode");return this.Rd.getValues()}Al(){return this.Rd.Od()+this.kd.size-this.Fd.size}El(){return 0===this.Al()}jd(){if(this.El())throw new Error("empty set");if(this.Pd)throw new Error("cannot be used in queueing mode");const t=this.Rd;return t.min(t.root).key}zd(){if(this.El())throw new Error("empty set");if(this.Pd)throw new Error("cannot be used in queueing mode");const t=this.jd();return this.Zf(t),t}Bd(t){if(t=!!t,this.Pd!==t&&(this.Pd=t,!t)){for(const t of this.Fd)this.Rd.remove(t);this.Fd.clear();for(const t of this.kd)this.Rd.pd(t);this.kd.clear()}}Ud(t){this.Rd.forEach(t)}*values(){if(this.El())return;const t=this.Rd;for(let s=t.min(t.root);s!=t.od;s=t.Md(s))yield s.key}[Symbol.iterator](){return this.values()}}}{const pu=self.Gs;pu.Wd=class{constructor(t=pu.hardwareConcurrency){this.Qd=t,this.Jd=[],this.Vd=0}Fl(t){return new Promise(((s,i)=>{this.Jd.push({sf:t,resolve:s,reject:i}),this.Yd()}))}Hd(t){for(let s=0,i=this.Jd.length;s<i;++s)if(this.Jd[s].sf===t)return s;return-1}qd(t,s){const i=this.Hd(t);if(-1===i)throw new Error("cannot find promise to resolve");this.Jd[i].resolve(s),this.Jd.splice(i,1)}Zd(t,s){const i=this.Hd(t);if(-1===i)throw new Error("cannot find promise to reject");this.Jd[i].reject(s),this.Jd.splice(i,1)}async Yd(){if(!this.Jd.length)return;if(this.Vd>=this.Qd)return;this.Vd++;const t=this.Jd.shift();try{const s=await t.sf();t.resolve(s)}catch(s){t.reject(s)}this.Vd--,this.Yd()}static async Kd(t,s){const i=[];let e=!1;const n=async t=>{let n;for(;n=s.pop();){if(e)return;try{i.push(await n())}catch(t){throw e=!0,t}}},r=[];for(;t--;)r.push(n());return await Promise.all(r),i}}}{const mu=self.Gs;mu.Xd=class{constructor(t,s,i){this.Of=t,this.$d=s,this.tp=i||2*s,this.sp=-1,this.ip=-1/0,this.ep=()=>this.np(),this.rp=!1,this.hp=!1,this.op=null}ap(t){this.hp=!!t}up(){return void 0!==mu.lp&&mu.lp.cp()?this.tp:this.$d}fp(...t){if(-1!==this.sp)return;this.op=t;let s=mu.Af(),i=s-this.ip,e=this.up();i>=e&&this.hp?(this.ip=s,this.pp()):this.sp=self.setTimeout(this.ep,Math.max(e-i,4))}pp(){this.rp=!0;const t=this.op;this.op=null,t?this.Of(...t):this.Of(),this.rp=!1}Ff(){this.rp||(this.mp(),this.op=null,this.ip=mu.Af())}np(){this.sp=-1,this.ip=mu.Af(),this.pp()}mp(){-1!==this.sp&&(self.clearTimeout(this.sp),this.sp=-1)}Jn(){this.mp(),this.Of=null,this.op=null,this.ep=null}}}{const yu=self.Gs;yu.yp=class{constructor(){this.gp=new Map,this.Mp=!1,this.wp=null,this.Sp=null,this.Tp=null,this.bp=null}vp(t){this.Mp=!!t}xp(){return this.Mp}Cp(t){this.wp=t}Gp(t){if(!this.wp)throw new Error("no get base size callback set");return this.wp(t)}Ip(t){this.Sp=t}Np(t,s,i,e,n,r){if(!this.Sp)throw new Error("no raster at size callback set");return this.Sp(t,s,i,e,n,r)}Ep(t){this.Tp=t}Dp(t){if(!this.Tp)throw new Error("no release result callback set");this.Tp(t)}_p(t){this.bp=t}Ap(){if(!this.bp)throw new Error("no redraw callback set");this.bp()}Lp(t){let s=this.gp.get(t);return s||(s=yu.Qn(yu.Op,this,t),this.gp.set(t,s)),s.Rp(),s}Pp(t){this.gp.delete(t.kp())}Fp(){for(const t of this.gp.values())t.jp(),t.zp()}}}{const gu=self.Gs;gu.Op=class{constructor(t,s){this.Bp=t,this.Up=s,this.Wp=0,this.Qp=0,this.Jp=0,this.Vp=this.Bp.Gp(s).then((t=>{this.Bp&&(this.Qp=t[0],this.Jp=t[1],this.Bp.Ap())})).catch((t=>{console.error("[SVG] Error loading SVG: ",t),this.Yp=!0,this.Bp&&this.Bp.Ap()})),this.Hp=0,this.qp=0,this.Zp=0,this.Kp=0,this.Xp=!1,this.$p=null,this.tm=!1,this.Yp=!1}Jn(){if(this.Wp<=0)throw new Error("already released");this.Wp--,0===this.Wp&&this.sm()}jp(){this.$p&&(this.Bp.Dp(this.$p),this.$p=null)}sm(){this.jp(),this.Bp.Pp(this),this.Bp=null}kp(){return this.Up}Rp(){this.Wp++}im(){return this.Wp>0}nm(){return this.$p}zp(){this.tm=!0}async rm(t,s,i){if(0===s||0===i||this.Yp)return;if(this.Xp)return;let e=gu.Sr(Math.ceil(s)),n=gu.Sr(Math.ceil(i));const r=Math.max(e,n);if(r>4096){const t=4096/r;s*=t,i*=t,e=Math.min(Math.ceil(e*t),4096),n=Math.min(Math.ceil(n*t),4096)}if(s<e&&i<n){const t=s/i;e/n>t?(s=n*t,i=n):(s=e,i=e/t)}if(this.Bp.xp()&&(e=Math.ceil(s),n=Math.ceil(i)),e<=this.Hp&&n<=this.qp&&!this.tm)return;this.Xp=!0,this.Hp=e,this.qp=n;const h=await this.Bp.Np(this.Up,t,this.Hp,this.qp,s,i);this.Bp&&(this.jp(),this.$p=h,this.Zp=s,this.Kp=i,this.Xp=!1,this.tm=!1,this.Bp.Ap())}hm(){return this.Vp}om(){return this.Qp}am(){return this.Jp}um(){return this.Zp}lm(){return this.Kp}fm(){return this.Yp}}}{let Mu=function(t){return xu.get(t)};0;const wu=self.Gs;wu.dm="\ufeff";const Su=new Set("0123456789");wu.pm=function(t){return Su.has(t)};const Tu=new Set(" \t\n\r\u2028\u2029");wu.ym=function(t){return Tu.has(t)},wu.gm=function(t){return[...t].filter((t=>!wu.ym(t))).join("")},wu.Mm=function(t){for(const s of t)if(!wu.ym(s))return!1;return!0},wu.wm=function(t){for(const s of t)if(!wu.ym(s))return!1;return!0},wu.Sm=function(t){return 1===t.length&&t.charCodeAt(0)<32},wu.Tm=function(t){return[...t].filter((t=>!wu.Sm(t))).join("")};let bu=null;try{bu=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}wu.bm=function(t){return!wu.ym(t)&&bu&&bu.test(t)};const vu=new Set("0123456789.+-e");wu.vm=function(t){if(!(t=t.trim()).length)return!1;let s=t.charAt(0);if("-"!==s&&!Su.has(s))return!1;for(let s of t)if(!vu.has(s))return!1;return!0},wu.xm=function(t){let s=t.length;for(;s>0;){let i=t.charAt(s-1);if(!wu.pm(i))break;--s}return t.substr(0,s)},wu.Cm=function(t){let s=wu.xm(t),i=t.substr(s.length);return i=i?(parseInt(i,10)+1).toString():"2",s+i};const xu=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]]),Cu=/[&<>"']/g;wu.Gm=function(t){return t.replace(Cu,Mu)},wu.Im=function(t){let s=wu.Nm(t,"\\","\\\\");return s=wu.Nm(s,'"','\\"'),s=wu.Nm(s,"\t","\\t"),s=wu.Nm(s,"\r",""),wu.Nm(s,"\n","\\n")},wu.Em=function(t){let s=wu.Nm(t,"&","&amp;");return s=wu.Nm(s,"<","&lt;"),s=wu.Nm(s,">","&gt;"),wu.Nm(s,'"',"&quot;")};const Gu=/[-[\]{}()*+?.,\\^$|#\s]/g;wu.Zi=function(t){return t.replace(Gu,"\\$&")},wu.Dm=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},wu._m=function(t,s){let i=0,e=0;for(;i<s;){if(i=t.indexOf("\n",i),-1===i)return e;e++,i++}return e},wu.Am=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());const e=s.length;let n=0,r=0,h=[];for(;(r=t.indexOf(s,n))>-1;)h.push(r),n=r+e;return h},wu.Nm=function(t,s,i){return t.replaceAll(s,(()=>i))},wu.Lm=function(t,s,i){return t.replace(new RegExp(wu.Zi(s),"gi"),(()=>i))},wu.Om=function(t,s){"string"==typeof s?t.textContent=s:s.Rm()?t.textContent=s.toString():(t.innerHTML=s.Pm(),s instanceof wu.dn&&s.km(t))},wu.Fm=function(t,s){return t instanceof wu.fn||t instanceof wu.dn?t.equals(s):s instanceof wu.fn||s instanceof wu.dn?s.equals(t):t===s},wu.jm=function(t,...s){let i=t;for(let e=0,n=s.length;e<n;++e){const n=`{${e}}`;if(!t.includes(n))throw new Error(`missing placeholder '${n}' in string substitution`);i=i.replace(n,s[e].toString())}return i},wu.zm=function(t,...s){let i=t,e=-1,n=-1;for(let r=0,h=s.length;r<h;++r){const h=`{${r}}`;t.includes(h)?(n=r,i=i.replace(h,s[r].toString())):-1===e&&(e=r)}if(e>=0&&n>=0&&e<n)throw new Error(`missing placeholder '${e}' in string substitution`);return i},wu.Bm=function(t,s){let i=t;for(let[t,e]of Object.entries(s))i=i.replaceAll(t,e.toString());return i},wu.Um=function(t,s){return t>s?1:t<s?-1:0},wu.Wm=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return i>e?1:i<e?-1:0};const Iu=new self.Intl.Segmenter;wu.Qm=function(t){const s=[];for(const i of Iu.segment(t))s.push(i.segment);return s},wu.Jm=function*(t){for(const s of Iu.segment(t))yield s.segment},wu.Vm=function(t){let s=0;for(const i of Iu.segment(t))++s;return s};const Nu=1073741824,Eu=1099511627776;wu.Ym=function(t,s){let i="common."+(s?"dataRates":"dataSizes")+".";const e=self.Hm;if(t<1024)return e(i+"bytes",t);if(t<1048576){let s=t/1024;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"kilobytes",s)}if(t<Nu){let s=t/1048576;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"megabytes",s)}if(t<Eu){let s=t/Nu;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"gigabytes",s)}{let s=t/Eu;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"terabytes",s)}};const Du={qm:!1,Zm:!0,Km:!0,Xm:!0,$m:!0};wu.ty=function(t,s){s=Object.assign({},Du,s),wu.iy.sy("common.time");const i=[],e=self.lang,n=self.ey;if(s.Zm){const s=Math.floor(t/86400);s>0&&(t-=24*s*3600,i.push(n(".days",null,s)))}if(s.Km){const s=Math.floor(t/3600);(s>0||i.length)&&(t-=3600*s,i.push(n(".hours",null,s)))}if(s.Xm){const e=Math.floor(t/60);(e>0||i.length||!s.$m)&&(t-=60*e,i.push(n(".minutes",null,e)))}if(s.$m){const s=Math.floor(t%60);i.push(n(".seconds",null,s))}const r=(s.qm?e(".approx-prefix"):"")+i.join(e(".separator"));return wu.iy.ny(),r},wu.hy=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),n=s-e.length;for(let t=0;t<n;++t)i+="0";return i+e},wu.oy=function(t){return t.toLowerCase().replace(/\b\w/g,(t=>t.toUpperCase()))},wu.uy=function(t,s){let i=t.split(".").map((t=>t.trim())),e=s.split(".").map((t=>t.trim()));wu.bh(i,4,"0"),wu.bh(e,4,"0"),i=i.map((t=>parseInt(t,10))),e=e.map((t=>parseInt(t,10)));for(let t=0;t<4;++t){const s=i[t]-e[t];if(0!==s)return s<0?-1:1}return 0},wu.ly=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const s=Math.floor(16*Math.random());return("x"===t?s:3&s|8).toString(16)}))},wu.py=function(t,s){if(t.length!==s.length)throw new Error("strings must be same length");let i=0;for(let e=0,n=t.length;e<n;++e)t.charAt(e)!==s.charAt(e)&&++i;return i},wu.my=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,n,r,h,o;for(t.length>s.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,n=1;n<=t.length;n++)h=s[e-1]===t[n-1]?o[n-1]:Math.min(o[n-1]+1,Math.min(r+1,o[n]+1)),o[n-1]=r,r=h;o[t.length]=r}return o[t.length]}}{let _u=function(t,s,i){const e=Lu.get(i);if(!e)return"class"===i?s?"</span>":`<span class="bbclass${ju++}">`:t;if("string"==typeof e){if("a"===e&&0===ku.length||"abbr"===e&&0===Fu.length)return t;if("a"!==e||s){if("abbr"!==e||s)return"<"+s+e+">";{const t=parseInt(i.substring(3),10)-1;if(t<0||t>=Fu.length)throw new Error("invalid bbcode tip substitution");const s=Fu[t];let e="";if("string"==typeof s?e=s:"function"==typeof s&&(e=s()),"string"!=typeof e)throw new TypeError("invalid bbcode tip");return`<abbr title="${Au.Nm(e,'"',"&quot;")}">`}}{const t=parseInt(i.substring(1),10)-1;if(t<0||t>=ku.length)throw new Error("invalid bbcode link substitution");const s=ku[t];if("string"==typeof s)return`<a href="${ku[t]}">`;if("function"==typeof s)return`<a class="bblink${t}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(e)){let t=e[0],i=e[1];return s?"</"+t+">":`<${t} class="${i}">`}};0;const Au=self.Gs,Lu=(self.assert,new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]])),Ou=new Set(["icon"]),Ru=/\[(\/?)([a-zA-Z0-9]+)\]/g,Pu=/\[(\/?)([^\[\n]*?)\]/g;let ku=null,Fu=null,ju=0;const zu=/\n/g;Au.dn=class{constructor(t,s){if(this.yy=s&&s.gy?t:Au.Gm(t),this.My="",this.wy=!1,this.Sy=[],this.Ty=[],s){if(this.wy=!!s.by,s.links){if(s.links.length>9)throw new Error("too many links");this.Sy=s.links}if(s.vy){if(s.vy.length>9)throw new Error("too many tips");this.Ty=s.vy}}this.xy=this.yy.includes("["),this.Cy=this.wy&&this.yy.includes("\n"),this.Gy=!this.xy&&!this.Cy&&!this.yy.includes("&"),this.Iy=!1,this.Ny=[]}toString(){return this.yy}valueOf(){return this.yy}Rm(){return this.Gy}Ey(){return this.xy?this.yy.replace(Ru,""):this.yy}Pm(){if(this.Gy)return this.yy;if(!this.My&&this.yy){let t=this.yy;this.xy&&(ju=0,ku=this.Sy,Fu=this.Ty,t=t.replace(Ru,_u),ku=null,Fu=null),this.Cy&&(t=t.replace(zu,"<br>")),this.My=t}return this.My}km(t){if(this.Sy.length)for(let s=0,i=this.Sy.length;s<i;++s){const i=this.Sy[s];if("function"!=typeof i)continue;const e=t.querySelector(".bblink"+s);if(!e)throw new Error("unable to attach BBString link handler");e.onclick=i}}equals(t){return t instanceof Au.fn?this.Pm()===t.Pm():t instanceof Au.dn?this.yy===t.yy:this.yy===t}Dy(){if(this.Iy)return this.Ny;const t=[],s=this.yy,i=[];Pu.lastIndex=0;let e=0,n=null;for(;null!==(n=Pu.exec(s));){const r=n.index;if(r>0&&"\\"===s.charAt(r-1))continue;const h=n[0],o=n[1],a=n[2],u=s.substring(e,r);if(e=r+h.length,u&&t.push({text:u,_y:i.slice(0)}),a)if(o){const t=a.toLowerCase();for(let s=i.length-1;s>=0;--s)if(i[s].tag===t){i.splice(s,1);break}}else{let s=a,e=null;const n=a.indexOf("=");if(-1!==n?(s=a.substring(0,n).toLowerCase(),e=a.substring(n+1)):s=s.toLowerCase(),Ou.has(s)){if("icon"!==s)throw new Error(`unknown self-closing tag ${s}`);t.push({icon:e,_y:i.slice(0)})}else i.push({tag:s,Ay:e})}}e<s.length&&t.push({text:s.substring(e),_y:i.slice(0)});for(const s of t)s.text&&(s.text=this.Ly(s.text));return this.Ny=t.map((t=>t.icon?Au.Qn(Au.Oy,{icon:t.icon,_y:t._y}):Au.Qn(Au.Ry,{Py:Au.Qm(t.text),_y:t._y}))),this.Iy=!0,this.Ny}Ly(t){return t=Au.Nm(t,"\\[","["),Au.Nm(t,"\\\\","\\")}static ky(t){return Au.Qn(Au.dn,t,{gy:!0}).Ey()}static Fy(t){return t.replace(Pu,"")}}}{let Bu=function(t){return""!==t&&""!==t&&Vu.ym(t)},Uu=function(t){return Yu.has(t)},Wu=function(t){return Vu.bm(t)&&!Uu(t)},Qu=function(t){for(;t.length>0&&Bu(t.at(-1));)t.pop()},Ju=function(t){return"\n"===t||"\r\n"===t};0;const Vu=self.Gs,Yu=new Set("");Vu.jy=class{constructor(){this.zy=[],this.By=null}Uy(){return this.zy}Wy(){return this.zy.length}Qy(t){this.By=t}Jy(t,s){let i=0,e=0,n=0,r=0,h=0;for(const o of t){if(-1===o.Vy()){const t=s(o);o.Yy(t.height),o.Hy(t.fontBoundingBoxAscent||0),o.qy(t.fontBoundingBoxDescent||0),o.Zy(t.Ky||0),o.Xy()?o.$y(t.width):o.tg()&&o.sg(this.By)}i+=o.Vy(),e=Math.max(e,o.ig()),n=Math.max(n,o.eg()),r=Math.max(r,o.ng()),h=Math.max(h,o.rg())}return{width:i,height:e,fontBoundingBoxAscent:n,fontBoundingBoxDescent:r,Ky:h}}hg(t,s,i,e,n,r){this.zy.push(Vu.Qn(Vu.jy.og,{ag:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:n,Ky:r}))}jy(t,s,i,e,n){if("string"==typeof t&&(t=[Vu.Qn(Vu.Ry,{Py:Vu.Qm(t)})]),Vu.wh(this.zy),!t.length||1===t.length&&t[0].Xy()&&t[0].El()||i<2)return;if(1===t.length){const e=t[0];if(e.Xy()&&e.ug()<=100&&!e.lg()){let{width:t,height:r,fontBoundingBoxAscent:h,fontBoundingBoxDescent:o,Ky:a}=s(e);if(t+=n,e.$y(t),e.Yy(r),e.Hy(h||0),e.qy(o||0),e.Zy(a||0),t<=i)return void this.hg([e],t,r,h,o,a)}}let r;r="word"===e?this.cg(t):"cjk"===e?this.fg(t):this.dg(t),this.pg(r,s,i,n)}cg(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.mg();if(n.tg())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.yg())if(Ju(r))i.length>0&&s.push(i),s.push([Vu.Qn(Vu.Ry,{Py:["\n"],_y:t})]),i=[];else if(0===i.length)i.push(Vu.Qn(Vu.Ry,{Py:[r],_y:t})),e=Bu(r);else{const n=Bu(r);if(n===e){const s=i.at(-1);s.mg()===t?s.gg(r):i.push(Vu.Qn(Vu.Ry,{Py:[r],_y:t}))}else s.push(i),i=[Vu.Qn(Vu.Ry,{Py:[r],_y:t})],e=n}}return i.length>0&&s.push(i),s}fg(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.mg();if(n.tg())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.yg())if(Ju(r))i.length>0&&s.push(i),s.push([Vu.Qn(Vu.Ry,{Py:["\n"],_y:t})]),i=[];else if(0===i.length)i.push(Vu.Qn(Vu.Ry,{Py:[r],_y:t})),e=Uu(r);else if(e||Wu(r)){const s=i.at(-1);s.mg()===t?s.gg(r):i.push(Vu.Qn(Vu.Ry,{Py:[r],_y:t})),e=Uu(r)}else s.push(i),i=[Vu.Qn(Vu.Ry,{Py:[r],_y:t})],e=Uu(r)}return i.length>0&&s.push(i),s}dg(t){const s=[];for(const i of t)if(i.Xy()){const t=i.yg();Vu.An(s,t.map((t=>[Vu.Qn(Vu.Ry,{Py:[t],_y:i.mg()})])))}else s.push([i]);return s}Mg(t){return t.map((t=>t.wg()))}Sg(t,s){const i=t.length?t.at(-1):null;let e=0;i&&i.Xy()&&s[0].Xy()&&s[0].mg()===i.mg()&&(i.Tg(s[0].yg()),e=1);for(let i=s.length;e<i;++e){const i=s[e];t.push(i.wg())}}pg(t,s,i,e){let n=[],r=0,h=0,o=0,a=0,u=0;for(const e of t){if(1===e.length&&e[0].Xy()&&1===e[0].ug()&&Ju(e[0].yg()[0])){if(0===h){const t=s(Vu.Qn(Vu.Ry,{Py:[" "],_y:e[0].mg()}));h=t.height,o=t.fontBoundingBoxAscent||0,a=t.fontBoundingBoxDescent||0,u=t.Ky||0}this.hg(n,r,h,o,a,u),n=[],r=0,h=0,o=0,a=0,u=0;continue}const t=this.Mg(n);this.Sg(t,e);const l=this.Jy(t,s),c=l.width;if(c>=i)if(n.length>0&&this.hg(n,r,h,o,a,u),n=[],e[0].Xy()&&Vu.wm(e[0].yg()))r=0,h=0,o=0,a=0,u=0;else{this.Sg(n,e);const t=this.Jy(n,s);r=t.width,h=t.height,o=t.fontBoundingBoxAscent,a=t.fontBoundingBoxDescent,u=t.Ky}else n=t,r=c,h=l.height,o=l.fontBoundingBoxAscent,a=l.fontBoundingBoxDescent,u=l.Ky}n.length>0&&this.hg(n,r,h,o,a,u),this.bg(s,e)}bg(t,s){for(const i of this.zy){const e=i.vg();if(!e.length)continue;let n=e.at(-1);if(n.Xy()){const r=n.yg(),h=r.slice(0);if(Qu(h),0===h.length)i.xg(-n.Vy()),e.pop();else if(h.length<r.length){n.Cg(h);const s=t(n).width,e=n.Vy()-s;n.$y(s),i.xg(-e)}0!==s&&e.length>0&&(n=e.at(-1),n.xg(s),i.xg(s))}}}Nl(){Vu.wh(this.zy)}Gg(){return this.zy.reduce(((t,s)=>Math.max(t,s.Vy())),0)}Ig(){return this.zy.reduce(((t,s)=>t+s.ig()),0)}}}self.Gs.jy.og=class{constructor(t){this.Ny=t.ag||[],this.Ng=t.width||-1,this.Eg=t.height||-1,this.Dg=t.fontBoundingBoxAscent||-1,this._g=t.fontBoundingBoxDescent||-1,this.Ag=t.Ky||-1,this.Lg=0,this.Og=0}ag(){return this.Ny.values()}*Rg(){const t=this.Ny;for(let s=t.length-1;s>=0;--s)yield t[s]}vg(){return this.Ny}xg(t){this.Ng+=t}Vy(){return this.Ng}ig(){return this.Eg}Pg(){return this.Dg}ng(){return this._g}rg(){return this.Ag}kg(t){this.Lg=t}Fg(){return this.Lg}jg(t){this.Og=t}zg(){return this.Og}};self.Gs.Bg=class{constructor(t){this.Ug=t._y||[],this.Ng=t.width||-1,this.Eg=t.height||-1,this.Dg=t.fontBoundingBoxAscent||-1,this._g=t.fontBoundingBoxDescent||-1,this.Ag=t.Ky||-1,this.Lg=0,this.Og=0}Xy(){return!1}tg(){return!1}mg(){return this.Ug}Wg(t){const s=this.Ug;for(let i=s.length-1;i>=0;--i){const e=s[i];if(e.tag===t)return e}return null}Qg(t){return!!this.Wg(t)}Jg(){const t=new Map;for(const s of this.Ug)t.set(s.tag,s.Ay);return t}xg(t){this.Ng+=t}$y(t){this.Ng=t}Vy(){return this.Ng}Yy(t){this.Eg=t}ig(){return this.Eg}Hy(t){this.Dg=t}eg(){return this.Dg}qy(t){this._g=t}ng(){return this._g}Zy(t){this.Ag=t}rg(){return this.Ag}kg(t){this.Lg=t}Fg(){return this.Lg}jg(t){this.Og=t}zg(){return this.Og}};{const Hu=self.Gs;Hu.Ry=class extends Hu.Bg{constructor(t){super(t),this.Vg=t.Py}Xy(){return!0}Tg(t){Hu.An(this.Vg,t),this.Ng=-1,this.Eg=-1,this.Dg=-1,this._g=-1,this.Ag=-1}gg(t){this.Vg.push(t)}wg(){return Hu.Qn(Hu.Ry,{Py:this.Vg.slice(0),_y:this.Ug,width:this.Ng,height:this.Eg,fontBoundingBoxAscent:this.Dg,fontBoundingBoxDescent:this._g,Ky:this.Ag})}yg(){return this.Vg}Cg(t){this.Vg=t}ug(){return this.Vg.length}El(){return 0===this.Vg.length}lg(){return this.Vg.includes("\n")}}}{const qu=self.Gs;qu.Oy=class extends qu.Bg{constructor(t){super(t),this.Yg=t.icon}tg(){return!0}Hg(){return this.Yg}wg(){return qu.Qn(qu.Oy,{icon:this.Yg,_y:this.Ug,width:this.Ng,height:this.Eg,fontBoundingBoxAscent:this.Dg,fontBoundingBoxDescent:this._g,Ky:this.Ag})}qg(t){if(!t)return null;let s=Number(this.Yg);return String(s)===this.Yg?(s=Math.floor(s),t.Zg(s)):t.Kg(this.Yg)}sg(t){const s=this.qg(t);this.Ng=s?this.Eg*s.Vy()/s.ig():0}Xg(t){const s=this.qg(t);return s?s.Xg():null}ug(){return 1}}}{const Zu=self.Gs;Zu.$g=class{constructor(t){this.tM=new Map,this.sM=t.iM,this.eM=t.nM}Jn(){for(const t of this.tM.values())t.Jn();this.tM.clear()}rM(t){let s=this.tM.get(t);if(s)return s;const i=this.sM(t);return s=Zu.Qn(Zu.hM,this,{source:t,oM:i}),this.tM.set(t,s),s}aM(t){return this.tM.has(t)}uM(t){const s=this.tM.get(t);s&&s.Jn(),this.tM.delete(t)}async lM(t){return await this.eM(t)}}}{const Ku=self.Gs;Ku.hM=class{constructor(t,s){this.cM=t,this.fM=s.source,this.dM=[],this.pM=new Map,this.mM=!1,this.yM=!1,this.gM=null;const i=s.oM.MM;for(let t=0,s=i.length;t<s;++t){const s=i[t],e=Ku.Qn(Ku.wM,this,{index:t,tag:s.tag,source:s.source,width:s.width,height:s.height});this.dM.push(e),s.tag&&this.pM.set(s.tag.toLowerCase(),e)}}Jn(){for(const t of this.dM)t.Jn();Ku.wh(this.dM),this.pM.clear(),this.cM=null,this.fM=null}SM(){return this.mM}TM(){return this.yM}bM(){return this.gM||(this.gM=this.vM()),this.gM}async vM(){if(this.mM)return;this.mM=!0,this.yM=!0;const t=await this.cM.lM(this.fM);if(!this.cM)return;const s=t.MM;for(let t=0,i=Math.min(s.length,this.dM.length);t<i;++t){const i=s[t].xM;this.dM[t].CM(i)}this.yM=!1}Zg(t){return(t=Math.floor(t))<0||t>=this.dM.length?null:this.dM[t]}Kg(t){return this.pM.get(t.toLowerCase())||null}}}self.Gs.wM=class{constructor(t,s){this.GM=t,this.fM=s.source||null,this.IM=s.index,this.NM=s.tag,this.Ng=s.width,this.Eg=s.height,this.EM=null}Jn(){this.Ng=0,this.Eg=0,this.GM=null}DM(){return this.fM}Vy(){return this.Ng}ig(){return this.Eg}CM(t){this.EM=t}Xg(){return this.EM}};{let Xu=function(t,s,i,e){const n=al;el.A(hl,i,s),el.A(ol,t,s),el.Ct(n,hl,ol),el.normalize(n,n),e.set(n[0],n[1],n[2],el.xt(t,n))},$u=function(t,s,i,e,n,r,h){const o=h.x,a=h.y,u=h.z,l=h.w,c=h._M,f=h.AM,d=h.LM,p=1-c,m=1-f,y=1-d;return o*t*c+o*e*p+a*s*f+a*n*m+u*i*d+u*r*y>=l||o*e*c+o*t*p+a*n*f+a*s*m+u*r*d+u*i*y>l},tl=function(t,s,i,e){return e.x*t+e.y*s+e.z*i>=e.w};0;const sl=self.Gs,il=self.hs,el=il.gs,nl=il.Ms,rl=il.fs,hl=el.create(),ol=el.create(),al=el.create(),ul=nl.create(),ll=rl.create(),cl=el.create(),fl=el.create(),dl=el.create(),pl=el.create(),ml=el.create(),yl=el.create(),gl=el.create(),Ml=el.create(),wl=nl.M(0,0,1,1);sl.OM={RM(t,s,i,e,n,r,h){const o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],u=e[2]*t+e[6]*s+e[10]*i+e[14],l=e[3]*t+e[7]*s+e[11]*i+e[15];let c=n[0]*o+n[4]*a+n[8]*u+n[12]*l,f=n[1]*o+n[5]*a+n[9]*u+n[13]*l,d=n[2]*o+n[6]*a+n[10]*u+n[14]*l,p=n[3]*o+n[7]*a+n[11]*u+n[15]*l;return 0!==p&&(p=1/p,c*=p,f*=p,d*=p,h[0]=(.5*c+.5)*r[2]+r[0],h[1]=(.5*f+.5)*r[3]+r[1],h[2]=.5*(1+d),!0)},PM(t,s,i,e,n,r,h){const o=ll,a=ul;return rl.multiply(o,n,e),null!==rl.T(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,nl.Dt(a,a,o),0!==a[3]&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0))},kM(t,s,i,e,n,r,h){const o=hl,a=ol;if(!sl.OM.PM(t,s,0,e,n,r,o))return!1;if(!sl.OM.PM(t,s,1,e,n,r,a))return!1;const u=ol;el.A(u,a,o);const l=al;el.set(l,0,0,1);const c=-i,f=el.xt(l,u);let d=0;if(0===f){if(0!==el.xt(l,o)+c)return!1}else if(d=-(el.xt(o,l)+c)/f,d<0)return!1;return el.wt(h,o,u,d),!0}};class Sl{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this._M=NaN,this.AM=NaN,this.LM=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this._M=t>0?1:0,this.AM=s>0?1:0,this.LM=i>0?1:0}}sl.OM.FM=class{constructor(){this.jM=new Sl,this.zM=new Sl,this.BM=new Sl,this.UM=new Sl,this.WM=new Sl,this.QM=new Sl}JM(t,s){const i=wl;sl.OM.PM(0,1,0,t,s,i,cl),sl.OM.PM(1,1,0,t,s,i,fl),sl.OM.PM(0,0,0,t,s,i,dl),sl.OM.PM(1,0,0,t,s,i,pl),sl.OM.PM(0,1,1,t,s,i,ml),sl.OM.PM(1,1,1,t,s,i,yl),sl.OM.PM(0,0,1,t,s,i,gl),sl.OM.PM(1,0,1,t,s,i,Ml),Xu(dl,cl,ml,this.jM),Xu(cl,fl,yl,this.zM),Xu(fl,pl,Ml,this.BM),Xu(pl,dl,gl,this.UM),Xu(gl,ml,yl,this.QM),Xu(pl,fl,cl,this.WM)}VM(t,s,i,e,n,r){return $u(t,s,i,e,n,r,this.jM)&&$u(t,s,i,e,n,r,this.zM)&&$u(t,s,i,e,n,r,this.BM)&&$u(t,s,i,e,n,r,this.UM)&&$u(t,s,i,e,n,r,this.WM)&&$u(t,s,i,e,n,r,this.QM)}YM(t,s,i){return!tl(t,s,i,this.WM)}}}{const Tl=self.Gs,bl=self.hs,vl=bl.gs,xl=bl.Ms,Cl=bl.fs,Gl=Cl.create(),Il=vl.M(0,0,0),Nl=vl.M(0,0,0),El=vl.M(0,0,0),Dl=vl.M(0,1,0),_l=(xl.M(0,0,0,0),new Tl.Iu),Al=new Tl.Rect,Ll=new Tl.Iu(0,0,1,0,1,1,0,1),Ol={HM:1,qM:1e4},Rl=Cl.M(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Tl.OM.ZM=class{constructor(t){t=Object.assign({},Ol,t),this.Ng=0,this.Eg=0,this.KM=Tl.Xn(45),this.XM=Math.tan(this.KM/2),this.$M=Cl.create(),this.tw=Cl.create(),this.sw=!1,this.iw=t.HM,this.ew=t.qM,this.rw=[],this.hw=new Map,this.ow=null,this.aw=null,this.uw=null,this.lw=null,this.cw=null,this.fw=null,this.dw=null,this.pw=null,this.mw=null,this.yw=null,this.gw=null,this.Mw=null,this.ww=new Map,this.Sw=null,this.Tw=[],this.bw=new Map,this.xw=0,this.Cw=0,this.Gw=1,this.Iw=[this.Gw],this.Nw=1,this.Ew=[this.Nw],this.Dw=.5,this._w=[this.Dw],this.Aw=0,this.Lw=!0,this.Ow=!1}Rw(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}Pw(){this.xw=0,this.Cw=0,this.ow=null,this.aw=null,this.uw=null,this.lw=null,this.cw=null,this.fw=null,this.dw=null,this.pw=null,this.mw=null,this.yw=null,this.gw=null,this.Mw=null,this.kw()}Fw(){this.Pw(),this.Sw=null}jw(){for(const t of this.rw)t.Jn();this.Pw()}Vy(){return this.Ng}ig(){return this.Eg}zw(t){return this.Bw()?100:t/(2*this.Uw())}Ww(t){return this.Bw()?t/(2*this.Uw())/this.zw(t):1}Qw(t){this.iw=t}Jw(){return this.iw}Vw(t){this.ew=t}Yw(){return this.ew}Hw(t){this.KM=t,this.XM=Math.tan(this.KM/2)}qw(){return this.KM}Uw(){return this.XM}Zw(){this.sw=!1}Kw(){this.sw=!0}Bw(){return!this.sw}Xw(){return this.sw}$w(t,s,i=.5,e=.5){const n=this.Jw(),r=this.Yw(),h=this.qw();if(.5===i&&.5===e)this.tS()?Cl.ut(t,h,s,n,r):Cl.perspective(t,h,s,n,r);else{const h=2*(i=1-i)-2,o=2*i,a=2*e-2,u=2*e,l=this.Uw()*n,c=l*s;Cl.ht(t,h*c,o*c,a*l,u*l,n,r),this.tS()&&Cl.mul(t,Rl,t)}}sS(t,s,i,e=1){const n=self.devicePixelRatio,r=2*this.zw(i)*n*this.Uw()/i,h=s*r/(2*n*e),o=i*r/(2*n*e),a=-h,u=h,l=-o,c=o;this.tS()?Cl.dt(t,a,u,l,c,this.Jw(),this.Yw()):Cl.ft(t,a,u,l,c,this.Jw(),this.Yw())}iS(t,s,i,e,n,r=1){let h=1;this.Bw()&&(h=200*this.Uw()/n);const o=El;vl.set(o,h,-h,1);const a=Il,u=Nl;vl.multiply(a,s,o),vl.multiply(u,i,o),Cl.yt(t,a,u,e||Dl),o[2]=r,Cl.scale(t,t,o)}eS(t,s,i,e,n,r,h,o){return vl.set(Il,t,s,i),vl.set(Nl,e,n,r),this.iS(Gl,Il,Nl,Dl,h,o),Gl}nS(t){this.rw.push(t),this.hw.set(t.Nc(),t)}rS(t){const s=this.rw.indexOf(t);-1!==s&&this.rw.splice(s,1),this.hw.delete(t.Nc())}kw(){Tl.wh(this.rw),this.hw.clear()}hS(t){return this.hw.get(t)||null}oS(){return this.ow}aS(){this.uS(this.ow)}lS(){return this.aw}cS(){this.uS(this.aw)}fS(){this.uS(this.uw)}dS(){this.uS(this.lw)}pS(){this.uS(this.cw)}mS(){this.uS(this.fw)}yS(){this.uS(this.dw)}gS(){this.uS(this.pw)}MS(){this.uS(this.mw)}wS(){this.uS(this.yw)}SS(){this.uS(this.gw)}TS(){this.uS(this.Mw)}bS(t){this.Sw=t}vS(){return this.Sw}xS(t,s,i,e){const n=Tl.OM.GS.CS(t,s,i,e);let r=this.ww.get(n);return r||(r=Tl.Qn(Tl.OM.GS,this,t,s,i,e),this.ww.set(n,r)),r.IS(),r}NS(t){t.ES(),0===t.DS()&&(this.Sw===t&&(this.Sw=null),this.ww.delete(t._S()),t.Jn())}AS(t){Tl.wh(this.Tw),this.bw.clear();let s=0;for(const i of t){const t=i[0],e=i[1],n=i[2];this.Tw.push([e,n]),this.bw.set(t,{number:s,LS:e,OS:n}),s++}}RS(t){return this.Tw[t]}PS(t){return this.RS(t)[0]}kS(t){return this.RS(t)[1]}FS(t){const s=this.bw.get(t);if(void 0===s)throw new Error("invalid blend name");return s}jS(t){const s=this.bw.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}zS(t){this.xw=t}BS(){return this.xw}US(t){this.Cw=t,this.Sw=null}WS(){return this.Cw}og(t,s,i,e){const n=Tl.nr(t,s,i,e),r=Math.sin(n),h=Math.cos(n),o=.5*this.Gw,a=r*o,u=h*o,l=this.Nw;2===l?this.QS(t,s,0,i,e,0,a,u):1===l?this.JS(t,s,0,i,e,0,a,u):this.VS(t,s,0,i,e,0,a,u)}YS(t,s,i,e,n,r){const h=Tl.nr(t,s,e,n),o=Math.sin(h),a=Math.cos(h),u=.5*this.Gw,l=o*u,c=a*u,f=this.Nw;2===f?this.QS(t,s,i,e,n,r,l,c):1===f?this.JS(t,s,i,e,n,r,l,c):this.VS(t,s,i,e,n,r,l,c)}QS(t,s,i,e,n,r,h,o){const a=this.Dw,u=t+a-o,l=s+a-h,c=e+a+o,f=n+a+h,d=2*o,p=2*h,m=u+h,y=l-o,g=u-h+d,M=l+o+p,w=c+h,S=f-o,T=c-h-d,b=f+o-p;this.HS(m,y,i,w,S,r,T,b,r,g,M,i,Ll)}JS(t,s,i,e,n,r,h,o){const a=this.Dw,u=t+a-o,l=s+a-h,c=e+a+o,f=n+a+h,d=u+h,p=l-o,m=u-h,y=l+o,g=c+h,M=f-o,w=c-h,S=f+o;this.HS(d,p,i,g,M,r,w,S,r,m,y,i,Ll)}VS(t,s,i,e,n,r,h,o){const a=this.Dw,u=t+a,l=s+a,c=e+a,f=n+a,d=u+h,p=l-o,m=u-h,y=l+o,g=c+h,M=f-o,w=c-h,S=f+o;this.HS(d,p,i,g,M,r,w,S,r,m,y,i,Ll)}qS(t,s,i,e,n,r){const h=Tl.nr(t,s,i,e),o=Math.sin(h),a=Math.cos(h),u=.5*this.Gw,l=o*u,c=a*u,f=this.Nw;2===f?this.ZS(t,s,i,e,l,c,n,r):1===f?this.KS(t,s,i,e,l,c,n,r):this.XS(t,s,i,e,l,c,n,r)}ZS(t,s,i,e,n,r,h,o){const a=this.Dw,u=t+a-r,l=s+a-n,c=i+a+r,f=e+a+n,d=2*r,p=2*n,m=u+n,y=l-r,g=u-n+d,M=l+r+p,w=c+n,S=f-r,T=c-n-d,b=f+r-p;_l.set(m,y,w,S,T,b,g,M),Al.set(h,0,o,0),this.$S(_l,Al)}KS(t,s,i,e,n,r,h,o){const a=this.Dw,u=t+a-r,l=s+a-n,c=i+a+r,f=e+a+n,d=u+n,p=l-r,m=u-n,y=l+r,g=c+n,M=f-r,w=c-n,S=f+r;_l.set(d,p,g,M,w,S,m,y),Al.set(h,0,o,0),this.$S(_l,Al)}XS(t,s,i,e,n,r,h,o){const a=this.Dw,u=t+a,l=s+a,c=i+a,f=e+a,d=u+n,p=l-r,m=u-n,y=l+r,g=c+n,M=f-r,w=c-n,S=f+r;_l.set(d,p,g,M,w,S,m,y),Al.set(h,0,o,0),this.$S(_l,Al)}tT(t,s,i,e){const n=.5*this.Gw,r=this.Nw;2===r?this.sT(t,s,i,e,n):1===r?this.iT(t,s,i,e,n):this.eT(t,s,i,e,n)}sT(t,s,i,e,n){this.QS(t,s,0,i,s,0,0,n),this.QS(i,s,0,i,e,0,n,0),this.QS(i,e,0,t,e,0,0,-n),this.QS(t,e,0,t,s,0,-n,0)}iT(t,s,i,e,n){this.JS(t,s,0,i,s,0,0,n),this.JS(i,s,0,i,e,0,n,0),this.JS(i,e,0,t,e,0,0,-n),this.JS(t,e,0,t,s,0,-n,0)}eT(t,s,i,e,n){this.VS(t,s,0,i,s,0,0,n),this.VS(i,s,0,i,e,0,n,0),this.VS(i,e,0,t,e,0,0,-n),this.VS(t,e,0,t,s,0,-n,0)}nT(t){this.tT(t.Ka(),t.Xa(),t.$a(),t.tu())}rT(t){const s=Tl.nr(t.Fr(),t.jr(),t.zr(),t.Br()),i=Math.sin(s),e=Math.cos(s),n=.5*this.Gw,r=i*n,h=e*n,o=this.Nw;2===o?this.hT(t,r,h):1===o?this.oT(t,r,h):this.aT(t,r,h)}hT(t,s,i){this.QS(t.Fr(),t.jr(),0,t.zr(),t.Br(),0,s,i),this.QS(t.zr(),t.Br(),0,t.Ur(),t.Wr(),0,i,-s),this.QS(t.Ur(),t.Wr(),0,t.Qr(),t.Jr(),0,-s,-i),this.QS(t.Qr(),t.Jr(),0,t.Fr(),t.jr(),0,-i,s)}oT(t,s,i){this.JS(t.Fr(),t.jr(),0,t.zr(),t.Br(),0,s,i),this.JS(t.zr(),t.Br(),0,t.Ur(),t.Wr(),0,i,-s),this.JS(t.Ur(),t.Wr(),0,t.Qr(),t.Jr(),0,-s,-i),this.JS(t.Qr(),t.Jr(),0,t.Fr(),t.jr(),0,-i,s)}aT(t,s,i){this.VS(t.Fr(),t.jr(),0,t.zr(),t.Br(),0,s,i),this.VS(t.zr(),t.Br(),0,t.Ur(),t.Wr(),0,i,-s),this.VS(t.Ur(),t.Wr(),0,t.Qr(),t.Jr(),0,-s,-i),this.VS(t.Qr(),t.Jr(),0,t.Fr(),t.jr(),0,-i,s)}uT(t){this.Gw=t,this.Iw[this.Iw.length-1]=t}lT(){return this.Gw}cT(t){if(this.Iw.length>=100)throw new Error("pushed too many line widths - check push/pop pairs");this.Iw.push(t),this.Gw=t}fT(){if(this.Iw.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.Iw.pop(),this.Gw=this.Iw.at(-1)}dT(){this.Nw=0,this.Ew[this.Ew.length-1]=0}pT(){this.Nw=1,this.Ew[this.Ew.length-1]=0}mT(){this.Nw=2,this.Ew[this.Ew.length-1]=0}yT(t){if("butt"===t)this.gT();else if("square"===t)this.MT();else{if("zag"!==t)throw new Error("invalid line cap");this.wT()}}gT(){if(this.Ew.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Ew.push(0),this.Nw=0}MT(){if(this.Ew.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Ew.push(1),this.Nw=1}wT(){if(this.Ew.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Ew.push(2),this.Nw=2}ST(){if(this.Ew.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.Ew.pop(),this.Nw=this.Ew.at(-1)}TT(t){this.Dw=t,this._w[this._w.length-1]=t}bT(){return this.Dw}vT(t){if(this._w.length>=100)throw new Error("pushed too many line offsets - check push/pop pairs");this._w.push(t),this.Dw=t}xT(){if(this._w.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this._w.pop(),this.Dw=this._w.at(-1)}CT(t){const s=t.length/2;if(s<3)throw new Error("need at least 3 points");const i=s-2,e=i-1,n=t[0],r=t[1];for(let s=0;s<i;s+=2){const i=2*s,h=t[i+2],o=t[i+3],a=t[i+4],u=t[i+5];if(s===e)this.GT(n,r,h,o,a,u,a,u);else{const s=t[i+6],e=t[i+7];this.GT(n,r,h,o,a,u,s,e)}}}IT(){return 3}NT(){this.ET(!0),this.Aw++}DT(){return this.Aw}_T(){this.Aw++}AT(t){this.Lw=!!t}LT(){return this.Lw}OT(t){this.Ow=!!t}RT(){return this.Ow}PT(){return!1}tS(){return!1}kT(){}FT(){}jT(){}zT(){return this.kT()+this.FT()+this.jT()}BT(){return Tl.Qn(Tl.OM.UT,this)}}}self.Gs.OM.WT=class{constructor(t,s){this.Hn=s.name,this.QT=t,this.JT=s.VT||0,this.YT=s.HT||0,this.qT=!!s.ZT,this.KT=!!s.XT,this.$T=!!s.tb,this.sb=!!s.ib,this.eb=!!s.animated,this.nb=!!s.rb,this.hb=!!s.ob,this.ab=!1,this.ub=this.qT||this.nb||0!==this.JT||0!==this.YT}Jn(){this.QT=null}lb(){return this.QT}Nc(){return this.Hn}cb(){return 0!==this.JT||0!==this.YT}fb(){return this.JT}pb(){return this.YT}mb(){return this.qT}yb(){return this.KT}gb(){return this.$T}Mb(){return this.sb}wb(){return this.eb}Sb(){return this.nb}Tb(){return this.hb}bb(){return this.ab}xb(){return this.ub}Cb(){return!1}};{const Pl=self.Gs;Pl.OM.GS=class{constructor(t,s,i,e,n){this.QT=t,this.Wp=0,this.Gb=null,this.Ib="",this.Nb=i,this.Eb=Pl.Qn(Pl.vo),this.Eb.set(e),this.Db=n,"string"==typeof s?this.Ib=s:(this.Gb=s,this.Ib=this.Gb.Nc())}Jn(){if(this.Wp>0)throw new Error("releasing state group still in use");this.QT=null,this.Gb=null,this.Ib=""}_b(){const t=this.QT;t.uS(this.Gb),t.Ab(this.Nb),t.Lb(this.Eb),t.US(this.Db),t.bS(this)}_S(){return Pl.OM.GS.CS(this.Ib,this.Nb,this.Eb,this.Db)}IS(){++this.Wp}ES(){--this.Wp}DS(){return this.Wp}Ob(){this.Gb=null}Rb(t){if(this.Gb=t.hS(this.Ib),!this.Gb)throw new Error("failed to restore shader program")}static CS(t,s,i,e){return("string"==typeof t?t:t.Nc())+","+s+","+i.ko()+","+i.Fo()+","+i.jo()+","+i.zo()+","+e}}}{let kl=function(t,s,i){const e=i.Fr(),n=i.jr(),r=i.zr()-e,h=i.Br()-n;return[e+r*t+(i.Qr()-e)*s,n+h*t+(i.Jr()-n)*s]};0;const Fl=self.Gs,jl=Fl.Qn(Fl.Iu);Fl.OM.Pb=class{constructor(t,s,i){this.kb=t,this.Fb=s,this.jb=i,this.Na=NaN,this.Ea=NaN,this.Db=NaN,this.zb=NaN,this.Bb=NaN,this.Na=0,this.Ea=0,this.Db=0,this.zb=0,this.Bb=0}Ub(t,s,i,e){this.Na=t,this.Ea=s,this.zb=i,this.Bb=e}Wb(){return this.Na}Qb(t){this.Na!==t&&(this.Na=t,this.kb.Jb())}Vb(){return this.Ea}Yb(t){this.Ea!==t&&(this.Ea=t,this.kb.Jb())}Hb(){return this.Db}qb(t){this.Db!==t&&(this.Db=Math.max(t,0),this.kb.Jb())}Zb(){return this.zb}Kb(t){this.zb=t}Xb(){return this.Bb}$b(t){this.Bb=t}tv(t,s,i){[this.Na,this.Ea]=kl(t.Na,t.Ea,s),this.Db=t.Db,this.zb=Fl.Gt(i.Ka(),i.$a(),t.zb),this.Bb=Fl.Gt(i.Xa(),i.tu(),t.Bb)}sv(t,s,i){[this.Na,this.Ea]=kl(t.Na,t.Ea,s),this.Db=t.Db,[this.zb,this.Bb]=kl(t.zb,t.Bb,i)}ev(){return{x:this.Wb(),y:this.Vb(),z:this.Hb(),u:this.Zb(),v:this.Xb()}}nv(t){this.Qb(t.x),this.Yb(t.y),t.hasOwnProperty("z")&&this.qb(t.z),this.Kb(t.u),this.$b(t.v)}rv(){return this.kb}hv(){return this.Fb}ov(){return this.jb}},Fl.OM.av=class{constructor(t,s,i){if(t<2||s<2)throw new Error("invalid mesh size");this.uv=t,this.lv=s,this.cv=i||null,this.fv=[],this.dv=0,this.pv=0,this.mv=1,this.yv=1,this.gv=0,this.Mv=!1;const e=t-1,n=s-1;for(let i=0;i<s;++i){const s=[];for(let r=0;r<t;++r){const t=Fl.Qn(Fl.OM.Pb,this,r,i),h=r/e,o=i/n;t.Ub(h,o,h,o),s.push(t)}this.fv.push(s)}}Jn(){Fl.wh(this.fv)}wv(){return this.uv}Sv(){return this.lv}Tv(){return this.cv}bv(){return this.fv}Jb(){this.Mv=!0}vv(){if(!this.Mv)return;let t=1/0,s=1/0,i=-1/0,e=-1/0,n=0;for(const r of this.fv)for(const h of r){const r=h.Wb(),o=h.Vb();t=Math.min(t,r),s=Math.min(s,o),i=Math.max(i,r),e=Math.max(e,o),n=Math.max(n,h.Hb())}this.dv=t,this.pv=s,this.mv=i,this.yv=e,this.gv=n,this.Mv=!1}xv(){return this.vv(),this.dv}Cv(){return this.vv(),this.pv}Gv(){return this.vv(),this.mv}Iv(){return this.vv(),this.yv}Nv(){return this.vv(),this.gv}Ev(){return this.Nv()>0}Dv(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.uv||s<0||s>=this.lv?null:this.fv[s][t]}_v(t,s,i){const e=i instanceof Fl.Rect;if(t.wv()!==this.wv()||t.Sv()!==this.Sv())throw new Error("source mesh wrong size");const n=t.fv,r=this.fv;for(let t=0,h=r.length;t<h;++t){const h=n[t],o=r[t];for(let t=0,n=o.length;t<n;++t){const n=h[t],r=o[t];e?r.tv(n,s,i):r.sv(n,s,i)}}}Av(t){const s=this.fv;let i=s[0];for(let e=1,n=s.length;e<n;++e){const n=s[e];let r=i[0],h=n[0];for(let s=1,e=n.length;s<e;++s){const e=i[s],o=n[s];jl.set(r.Zb(),r.Xb(),e.Zb(),e.Xb(),o.Zb(),o.Xb(),h.Zb(),h.Xb()),t.HS(r.Wb(),r.Vb(),r.Hb(),e.Wb(),e.Vb(),e.Hb(),o.Wb(),o.Vb(),o.Hb(),h.Wb(),h.Vb(),h.Hb(),jl),r=e,h=o}i=n}}Lv(t,s){s||(s=(t,s,i)=>[t,s,i]);const i=this.fv;let e=i[0];for(let n=1,r=i.length;n<r;++n){const h=i[n];let o=e[0],a=h[0];for(let i=1,u=h.length;i<u;++i){const l=e[i],c=h[i],[f,d,p]=s(o.Wb(),o.Vb(),o.Hb()),[m,y,g]=s(l.Wb(),l.Vb(),l.Hb()),[M,w,S]=s(c.Wb(),c.Vb(),c.Hb()),[T,b,v]=s(a.Wb(),a.Vb(),a.Hb());t.YS(f,d,p,m,y,g),t.YS(f,d,p,M,w,S),t.YS(f,d,p,T,b,v),i===u-1&&t.YS(m,y,g,M,w,S),n===r-1&&t.YS(T,b,v,M,w,S),o=l,a=c}e=h}}Ov(t){const s=.001,i=.99999999,e=t.fl(),n=[],r=this.wv()-1,h=this.Sv()-1,o=1/r,a=1/h,u=r-1,l=h-1;let c=e[0],f=e[1],d=Fl.Zn(Math.floor(c*r),0,u),p=Fl.Zn(Math.floor(f*h),0,l),m=!0,y=0,g=0,M=0,w=-1;const S=()=>{c=Fl.Zn(Fl.Gt(c,y,M),0,1),f=Fl.Zn(Fl.Gt(f,g,M),0,1),n.push(c,f)};for(let t=0,T=e.length;t<T;t+=2){c=e[t],f=e[t+1],n.push(c,f),d=Fl.Zn(Math.floor(c*r),0,u),p=Fl.Zn(Math.floor(f*h),0,l);const b=(t+2)%T;for(y=e[b],g=e[b+1],w=-1;;){if(n.length>1e6)throw new Error("Too many mesh poly points");const t=d*o,e=p*a,r=(d+1)*o,h=(p+1)*a;if(m=Fl.qr(c,f,t,e,r,e,r,h),0!==w&&(M=Fl.Hr(c,f,y,g,t,e,r,h,-.001),M>=0&&M<=i))S(),m=!m,w=0;else if(p>0&&2!==w&&(M=Fl.Hr(c,f,y,g,t,e,r,e,s),M>=0&&M<=i))S(),p--,m=!1,w=4;else if(d<u&&3!==w&&(M=Fl.Hr(c,f,y,g,r,e,r,h,s),M>=0&&M<=i))S(),d++,m=!1,w=1;else if(d>0&&1!==w&&(M=Fl.Hr(c,f,y,g,t,e,t,h,s),M>=0&&M<=i))S(),d--,m=!0,w=3;else{if(!(p<l&&4!==w&&(M=Fl.Hr(c,f,y,g,t,h,r,h,s),M>=0&&M<=i)))break;S(),p++,m=!0,w=2}}}return Fl.Qn(Fl.ol,n)}Rv(t,s){const i=this.Pv(t);this.kv(i),s.pl(i)}Pv(t){const s=[],i=t.fl();for(let t=0,e=i.length;t<e;t+=2){const e=i[t],n=i[t+1],[r,h]=this.Fv(e,n);s.push(r,h)}return s}Fv(t,s){const i=this.wv()-1,e=this.Sv()-1,n=1/i,r=1/e,h=Fl.Zn(Math.floor(t*i),0,i-1),o=Fl.Zn(Math.floor(s*e),0,e-1),a=h*n,u=o*r,l=(h+1)*n,c=(o+1)*r,f=this.Dv(h,o),d=this.Dv(h+1,o+1),p=Fl.qr(t,s,a,u,l,u,l,c),m=p?a+n:a,y=p?u:u+r,g=this.Dv(h+(p?1:0),o+(p?0:1)),[M,w,S]=Fl.Zr(t,s,a,u,m,y,l,c);return Fl.Kr(M,w,S,f.Wb(),f.Vb(),f.Hb(),g.Wb(),g.Vb(),g.Hb(),d.Wb(),d.Vb(),d.Hb())}kv(t){const s=[],i=1e-7;let e=t[0],n=t[1],r=e-t.at(-2),h=n-t.at(-1);for(let o=0,a=t.length;o<a;o+=2){const u=(o+2)%a,l=t[u],c=t[u+1],f=l-e,d=c-n,p=Math.abs(f)<i&&Math.abs(r)<i&&Math.sign(d)===Math.sign(h),m=Math.abs(d)<i&&Math.abs(h)<i&&Math.sign(f)===Math.sign(r);(!p&&!m&&Math.abs(f/r-d/h)>.001||0==f&&0===d)&&s.push(e,n),e=l,n=c,r=f,h=d}s.length>=6&&s.length<t.length&&Fl.xh(t,s)}ev(){return{cols:this.wv(),rows:this.Sv(),points:this.fv.map((t=>t.map((t=>t.ev()))))}}nv(t){const s=this.wv(),i=this.Sv();if(t.cols!==s||t.rows!==i)throw new Error("mesh data wrong size");const e=t.points;for(let t=0;t<i;++t){const i=e[t];for(let e=0;e<s;++e)this.Dv(e,t).nv(i[e])}}}}{let zl=function(t,s){let i,e,n,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,n=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,n=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{jv:i,zv:e,format:n,type:r}};0;const Bl=self.Gs,Ul=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),Wl=new Set(["nearest","bilinear","trilinear"]),Ql=new Set(["default","low","high"]),Jl=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Vl={Bv:"clamp-to-edge",Uv:"clamp-to-edge",Wv:"trilinear",Qv:0,Jv:"rgba8",Vv:!0,Yv:"default",Hv:!0,qv:!1,width:-1,height:-1},Yl={Hv:!0,flipY:!1},Hl=new Set;Bl.OM.Zv=class{constructor(t){this.QT=t,this.Kv=null,this.Ng=0,this.Eg=0,this.Xv=!0,this.$v="clamp-to-edge",this.tx="clamp-to-edge",this.sx="trilinear",this.ix=0,this.nx="rgba8",this.hx=!1,this.ox="default",this.Wp=0}ux(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData||t instanceof ArrayBuffer||null===t))throw new Error("invalid texture source");if(s=Object.assign({},Vl,s),this.Kv)throw new Error("already created texture");if(this.$v=s.Bv,this.tx=s.Uv,this.sx=s.Wv,this.ix=s.Qv,this.nx=s.Jv,this.hx=!!s.Vv&&this.QT.LT(),this.ox=s.Yv,!Jl.has(this.$v)||!Jl.has(this.tx))throw new Error("invalid wrap mode");if(!Wl.has(this.sx))throw new Error("invalid sampling");if(!Ul.has(this.nx))throw new Error("invalid pixel format");if(!Ql.has(this.ox))throw new Error("invalid mipmap quality");if(this.Xv=!0,t instanceof ArrayBuffer||null===t||s.qv){if(this.Ng=s.width,this.Eg=s.height,t instanceof ArrayBuffer&&t.byteLength!==this.Ng*this.Eg*4)throw new Error("ArrayBuffer wrong size")}else this.Ng=t.width,this.Eg=t.height;if(this.Ng<=0||this.Eg<=0)throw new Error("invalid texture data size");if(s.qv){const s=Bl.lo(this.Ng,this.Eg);s.getContext("2d").drawImage(t,0,0,this.Ng,this.Eg),t=s}const i=Bl.wr(this.Ng)&&Bl.wr(this.Eg),e=this.QT.lx();if(this.Ng>e||this.Eg>e)throw new Error("texture data exceeds maximum texture size");const n=this.QT.mx(),r=this.QT.yx();this.Kv=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.Kv),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.Hv),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const h=zl(this.nx,n);if(this.QT.gx()||i||!this.Mx())if(r>=2){let s;s=this.hx?Math.floor(Math.log2(Math.max(this.Ng,this.Eg))+1):1,n.texStorage2D(n.TEXTURE_2D,s,h.jv,this.Ng,this.Eg),t instanceof ArrayBuffer?n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.Ng,this.Eg,h.format,h.type,new Uint8Array(t)):null!==t&&n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,t)}else t instanceof ArrayBuffer?n.texImage2D(n.TEXTURE_2D,0,h.zv,this.Ng,this.Eg,0,h.format,h.type,new Uint8Array(t)):null===t?n.texImage2D(n.TEXTURE_2D,0,h.zv,this.Ng,this.Eg,0,h.format,h.type,null):n.texImage2D(n.TEXTURE_2D,0,h.zv,h.format,h.type,t);else{if(null===t)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if(t instanceof ArrayBuffer&&(t=new ImageData(new Uint8ClampedArray(t),this.Ng,this.Eg)),t instanceof ImageData){const s=Bl.lo(this.Ng,this.Eg);s.getContext("2d").putImageData(t,0,0),t=s}const s=Bl.lo(Bl.Sr(this.Ng),Bl.Sr(this.Eg)),i=s.getContext("2d");i.imageSmoothingEnabled="nearest"!==this.sx,i.drawImage(t,0,0,this.Ng,this.Eg,0,0,s.width,s.height),n.texImage2D(n.TEXTURE_2D,0,h.zv,h.format,h.type,s)}null!==t&&this.wx(n),n.bindTexture(n.TEXTURE_2D,null),this.QT.Sx(),this.Wp=1,Hl.add(this)}Tx(t,s,i){if(i=Object.assign({},Vl,i),this.Kv)throw new Error("already created texture");if(this.$v=i.Bv,this.tx=i.Uv,this.sx=i.Wv,this.nx=i.Jv,this.hx=!!i.Vv&&this.QT.LT(),this.ox=i.Yv,!Jl.has(this.$v)||!Jl.has(this.tx))throw new Error("invalid wrap mode");if(!Wl.has(this.sx))throw new Error("invalid sampling");if(!Ul.has(this.nx))throw new Error("invalid pixel format");if(!Ql.has(this.ox))throw new Error("invalid mipmap quality");this.Xv=!1,this.Ng=Math.floor(t),this.Eg=Math.floor(s);const e=Bl.wr(this.Ng)&&Bl.wr(this.Eg),n=this.QT.lx();if(this.Ng<=0||this.Eg<=0)throw new Error("invalid texture size");if(this.Ng>n||this.Eg>n)throw new Error("texture exceeds maximum texture size");if(!this.QT.gx()&&this.Mx()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.QT.mx(),h=this.QT.yx();this.Kv=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.Kv),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.Hv),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const o=zl(this.nx,r),a=h>=2?o.jv:o.zv;r.texImage2D(r.TEXTURE_2D,0,a,this.Ng,this.Eg,0,o.format,o.type,null),this.wx(r),r.bindTexture(r.TEXTURE_2D,null),this.QT.Sx(),this.Wp=1,Hl.add(this)}bx(t){if("default"===this.ox)return this.Xv?t.NICEST:t.FASTEST;if("low"===this.ox)return t.FASTEST;if("high"===this.ox)return t.NICEST;throw new Error("invalid mipmap quality")}Mx(){return"clamp-to-edge"!==this.$v||"clamp-to-edge"!==this.tx}vx(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}wx(t){const s=Bl.wr(this.Ng)&&Bl.wr(this.Eg);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.vx(t,this.$v)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.vx(t,this.tx)),"nearest"===this.sx)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.hx=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.QT.gx())&&this.hx){t.hint(t.GENERATE_MIPMAP_HINT,this.bx(t)),t.generateMipmap(t.TEXTURE_2D);const s="trilinear"===this.sx&&!this.QT.RT();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.hx=!1;const i=this.QT.xx();i&&this.ix>0&&"nearest"!==this.sx&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.ix,this.QT.Cx()))}Gx(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.Kv||this.Wp<=0)throw new Error("texture not created");if(this.Xv)throw new Error("cannot update static texture");s=Object.assign({},Yl,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,n=this.QT.yx(),r=this.QT.mx();r.bindTexture(r.TEXTURE_2D,this.Kv),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.Hv),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY);const h=zl(this.nx,r),o=n>=2?h.jv:h.zv;try{if(this.Ng===i&&this.Eg===e){const s=Bl.wr(this.Ng)&&Bl.wr(this.Eg);r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,t),(s||this.QT.gx())&&this.hx&&(r.hint(r.GENERATE_MIPMAP_HINT,this.bx(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.Ng=i,this.Eg=e;const s=Bl.wr(this.Ng)&&Bl.wr(this.Eg);if(!this.QT.gx()&&this.Mx()&&!s)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,h.format,h.type,t),(s||this.QT.gx())&&this.hx&&(r.hint(r.GENERATE_MIPMAP_HINT,this.bx(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.QT.Sx()}Ix(){if(this.Wp>0)throw new Error("texture still has references");if(!this.Kv)throw new Error("already deleted texture");Hl.delete(this),this.QT.mx().deleteTexture(this.Kv),this.Kv=null}Nx(){return!!this.Kv}Ex(){return this.Kv}lb(){return this.QT}Dx(){this.Wp++}_x(){if(this.Wp<=0)throw new Error("no more references");this.Wp--}Ax(){return this.Wp}Vy(){return this.Ng}ig(){return this.Eg}Lx(){return this.Xv}Ox(){let t=this.Ng*this.Eg;switch(this.nx){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.hx&&(t+=Math.floor(t/3)),t}static Ob(){Hl.clear()}static Rx(){return Hl.values()}}}{const ql=self.Gs,Zl=(self.assert,self.hs),Kl=(Zl.gs,Zl.fs),Xl=new Set(["nearest","bilinear","trilinear"]),$l={Wv:"trilinear",alpha:!0,depth:!1,Px:!0,kx:!0,Fx:0},tc=new Set;ql.OM.jx=class{constructor(t){this.QT=t,this.zx=null,this.Bx=null,this.Kv=null,this.Ux=null,this.Ng=0,this.Eg=0,this.Wx=!0,this.sx="trilinear",this.Qx=!0,this.Jx=!1,this.Vx=!0,this.Yx=0,this.Hx=Kl.create(),this.qx=0,this.Zx=0,this.Kx=0}Xx(t,s,i){i=Object.assign({},$l,i);const e=this.QT.yx();if(this.Kv||this.Ux)throw new Error("already created render target");if(this.sx=i.Wv,this.Qx=!!i.alpha,this.Jx=!!i.depth,this.Vx=!!i.Px,this.Wx=!!i.kx,this.Yx=i.Fx,!Xl.has(this.sx))throw new Error("invalid sampling");if(this.Yx>0&&(e<2||this.Vx))throw new Error("invalid use of multisampling");if(e<2&&(this.Vx=!0),this.Ng=t,this.Eg=s,this.Ng<=0||this.Eg<=0)throw new Error("invalid render target size");this.$x();const n=this.QT.mx();if(this.zx=n.createFramebuffer(),this.Jx&&(this.Bx=n.createFramebuffer()),this.Vx){this.Kv=this.QT.tC(this.Ng,this.Eg,{Wv:this.sx,Jv:this.Qx?"rgba8":"rgb8",Vv:!1});const t=this.Kv.Ex();n.bindFramebuffer(n.FRAMEBUFFER,this.zx),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),this.Jx&&(n.bindFramebuffer(n.FRAMEBUFFER,this.Bx),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0))}else{this.Ux=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.Ux);const t=this.Qx?n.RGBA8:n.RGB8;if(this.Yx>0){const s=n.getInternalformatParameter(n.RENDERBUFFER,t,n.SAMPLES);if(s&&s[0]){const t=s[0];this.Yx>t&&(this.Yx=t)}else this.Yx=0}0===this.Yx?n.renderbufferStorage(n.RENDERBUFFER,t,this.Ng,this.Eg):n.renderbufferStorageMultisample(n.RENDERBUFFER,this.Yx,t,this.Ng,this.Eg),n.bindFramebuffer(n.FRAMEBUFFER,this.zx),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.Ux),this.Jx&&(n.bindFramebuffer(n.FRAMEBUFFER,this.Bx),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.Ux)),n.bindRenderbuffer(n.RENDERBUFFER,null)}const r=this.QT.sC();this.Jx&&r&&(n.bindFramebuffer(n.FRAMEBUFFER,this.zx),this.QT.iC()?n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,r,0):n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r)),n.bindFramebuffer(n.FRAMEBUFFER,null),tc.add(this)}eC(t,s){if(this.Ng===t&&this.Eg===s)return;this.Ng=t,this.Eg=s,this.$x();const i=this.QT.mx();i.bindFramebuffer(i.FRAMEBUFFER,this.zx),this.Kv?this.Kv.Gx(new ImageData(this.Ng,this.Eg)):(i.bindRenderbuffer(i.RENDERBUFFER,this.Ux),i.renderbufferStorage(i.RENDERBUFFER,this.Qx?i.RGBA8:i.RGB8,this.Ng,this.Eg),i.bindRenderbuffer(i.RENDERBUFFER,null));const e=this.QT.sC();this.Jx&&e&&(this.QT.iC()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}Ix(){if(!this.Kv&&!this.Ux)throw new Error("already deleted render target");tc.delete(this);const t=this.QT.mx();this.Kv?(t.bindFramebuffer(t.FRAMEBUFFER,this.zx),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.Jx&&(t.bindFramebuffer(t.FRAMEBUFFER,this.Bx),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.QT.nC(this.Kv),this.Kv=null):this.Ux&&(t.bindFramebuffer(t.FRAMEBUFFER,this.zx),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.Jx&&(t.bindFramebuffer(t.FRAMEBUFFER,this.Bx),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.Ux),this.Ux=null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.QT.yx()>=2&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.zx),this.Jx&&t.deleteFramebuffer(this.Bx);const s=this.QT.rC();s.hC=null,s.oC=null,this.zx=null}$x(){this.QT.$w(this.Hx,this.Ng/this.Eg),this.qx=this.QT.qw(),this.Zx=this.QT.Jw(),this.Kx=this.QT.Yw()}aC(){return this.zx}uC(){return this.Bx}lb(){return this.QT}lC(){return this.Kv}cC(){return this.QT.qw()===this.qx&&this.QT.Jw()===this.Zx&&this.QT.Yw()===this.Kx||this.$x(),this.Hx}fC(){return"nearest"!==this.sx}dC(){return this.Qx}pC(){return this.Vx}mC(){return this.Jx}Vy(){return this.Ng}ig(){return this.Eg}yC(){return this.Wx}gC(){return this.Yx}MC(){const t={Wv:this.sx,alpha:this.Qx,Px:this.Vx};return this.Wx||(t.width=this.Ng,t.height=this.Eg),t}wC(t){return"nearest"!==(t=Object.assign({},$l,t)).Wv===this.fC()&&!!t.alpha===this.dC()&&!!t.depth===this.mC()&&!(this.QT.yx()>=2&&!!t.Px!==this.pC())&&("number"==typeof t.width||"number"==typeof t.height?!this.yC()&&this.Vy()===Math.floor(t.width)&&this.ig()===Math.floor(t.height):this.yC())}SC(){return this.Kv?this.Kv.Ex():null}Ox(){return this.Kv?this.Kv.Ox():this.Ng*this.Eg*(this.Qx?4:3)}static async TC(t,s){const i=await t.bC(s,!0);return await ql.do(i)}static Ob(){tc.clear()}static vC(){return tc.values()}static xC(t,s){for(const i of tc)i.yC()&&i.eC(t,s)}}}{const sc=self.Gs,ic=self.hs,ec=(ic.gs,ic.fs,new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]));sc.OM.CC=class extends sc.OM.WT{static async GC(t,s){const i=t.mx(),e=s.src,n=s.IC,r=s.name,h=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(h,e),i.compileShader(h);const o=i.createShader(i.VERTEX_SHADER);i.shaderSource(o,n),i.compileShader(o);const a=i.createProgram();i.attachShader(a,h),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a);const u=t.NC();if(u?await t.EC((()=>i.getProgramParameter(a,u.COMPLETION_STATUS_KHR))):await sc.dh(5),!i.getShaderParameter(h,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(h);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+t)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(o);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+t)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const t=i.getProgramInfoLog(a);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+t)}const l=sc.Tm(i.getProgramInfoLog(a)||"").trim();return l&&!sc.Mm(l)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,l),i.deleteShader(h),i.deleteShader(o),a}static async DC(t,s){const i=await sc.OM.CC.GC(t,s);return new sc.OM.CC(t,i,s)}constructor(t,s,i){super(t,i);const e=t.mx(),n=t.rC();t.ET(),e.useProgram(s),this._C=e,this.Gb=s,this.AC="<default-device-transform>"===i.name;const r=e.getAttribLocation(s,"aPos"),h=e.getAttribLocation(s,"aTex");this.LC=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.OC),e.vertexAttribPointer(r,t.IT(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==h&&(e.bindBuffer(e.ARRAY_BUFFER,t.RC),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(h)),-1!==this.LC&&(e.bindBuffer(e.ARRAY_BUFFER,t.PC),e.vertexAttribPointer(this.LC,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.LC)),e.bindBuffer(e.ARRAY_BUFFER,null),this.kC=new sc.OM.FC(this,"matP","mat4"),this.jC=new sc.OM.FC(this,"matMV","mat4"),this.zC=new sc.OM.FC(this,"color","vec4"),this.BC=new sc.OM.FC(this,"samplerFront","sampler"),this.UC=new sc.OM.FC(this,"pointTexStart","vec2"),this.WC=new sc.OM.FC(this,"pointTexEnd","vec2"),this.QC=new sc.OM.FC(this,"zElevation","float"),this.JC=new sc.OM.FC(this,"tileSize","vec2"),this.VC=new sc.OM.FC(this,"tileSpacing","vec2"),this.YC=new sc.OM.FC(this,"color2_","vec4"),this.HC=new sc.OM.FC(this,"outlineThickness","float"),this.qC=new sc.OM.FC(this,"samplerBack","sampler"),this.ZC=new sc.OM.FC(this,"samplerDepth","sampler"),this.KC=new sc.OM.FC(this,"destStart","vec2"),this.XC=new sc.OM.FC(this,"destEnd","vec2"),this.$C=new sc.OM.FC(this,"srcStart","vec2"),this.tG=new sc.OM.FC(this,"srcEnd","vec2"),this.sG=new sc.OM.FC(this,"srcOriginStart","vec2"),this.iG=new sc.OM.FC(this,"srcOriginEnd","vec2"),this.eG=new sc.OM.FC(this,"pixelSize","vec2"),this.nG=new sc.OM.FC(this,"seconds","float"),this.rG=new sc.OM.FC(this,"devicePixelRatio","float"),this.hG=new sc.OM.FC(this,"layerScale","float"),this.oG=new sc.OM.FC(this,"layerAngle","float"),this.aG=new sc.OM.FC(this,"layoutStart","vec2"),this.uG=new sc.OM.FC(this,"layoutEnd","vec2"),this.lG=new sc.OM.FC(this,"zNear","float"),this.cG=new sc.OM.FC(this,"zFar","float"),this.fG=!!(this.eG.dG()||this.nG.dG()||this.qC.dG()||this.KC.dG()||this.XC.dG()||this.$C.dG()||this.tG.dG()||this.sG.dG()||this.iG.dG()||this.rG.dG()||this.hG.dG()||this.oG.dG()||this.aG.dG()||this.uG.dG());const o=i.parameters||[];this.pG=[],this.ab=this.eG.dG()||this.$C.dG()||this.tG.dG()||this.sG.dG()||this.iG.dG(),this.mG=!1,this.yG=!1,this.zC.gG(1,1,1,1),this.YC.gG(1,1,1,1),this.BC.MG(0),this.qC.MG(1),this.ZC.MG(2),this.UC.wG(0,0),this.WC.wG(1,1),this.QC.SG(0),this.JC.wG(0,0),this.VC.wG(0,0),this.KC.wG(0,0),this.XC.wG(1,1),this.$C.wG(0,0),this.tG.wG(0,0),this.sG.wG(0,0),this.iG.wG(0,0),this.eG.wG(0,0),this.rG.SG(1),this.lG.SG(t.Jw()),this.cG.SG(t.Yw()),this.hG.SG(1),this.oG.SG(0),this.nG.SG(0),this.aG.wG(0,0),this.uG.wG(0,0),this.HC.SG(1);for(const t of o){const s=t[0],i=t[2],e=new sc.OM.FC(this,s,i);"color"===i?e.TG(0,0,0):e.SG(0),this.pG.push(e)}this.AC?this.bG(n.vG):(this.xG(n.vG,!0),this.CG(n.GG,!0));const a=n.IG;e.useProgram(a?a.Gb:null)}Jn(){this._C.deleteProgram(this.Gb),this.Gb=null,this.QT.rS(this),this._C=null,super.Jn()}NG(){return this._C}EG(){return this.Gb}DG(){return this.pG.length}_G(t){return t<0||t>=this.pG.length?null:this.pG[t].AG()}LG(t){for(let s=0,i=t.length;s<i;++s)if(!this.pG[s].OG(t[s]))return!1;return!0}PG(t){for(let s=0,i=t.length;s<i;++s)this.pG[s].kG(t[s])}FG(t,s,i,e,n,r,h,o,a,u){return!(this.qC.dG()||this.eG.dG()&&!this.eG.jG(n,r)||this.KC.dG()&&!this.KC.jG(t.Ka(),t.Xa())||this.XC.dG()&&!this.XC.jG(t.$a(),t.tu())||this.rG.dG()&&!this.rG.zG(h)||this.hG.dG()&&!this.hG.zG(o)||this.oG.dG()&&!this.oG.zG(a)||this.$C.dG()&&!this.$C.jG(s.Ka(),s.Xa())||this.tG.dG()&&!this.tG.jG(s.$a(),s.tu())||this.sG.dG()&&!this.sG.jG(i.Ka(),i.Xa())||this.iG.dG()&&!this.iG.jG(i.$a(),i.tu())||this.aG.dG()&&!this.aG.jG(e.Ka(),e.Xa())||this.uG.dG()&&!this.uG.jG(e.Xa(),e.tu())||this.nG.dG()&&!this.nG.zG(u))}BG(t,s,i,e,n,r,h,o,a,u){this.qC.dG()||(this.eG.dG()&&this.eG.UG(n,r),this.KC.dG()&&this.KC.UG(t.Ka(),t.Xa()),this.XC.dG()&&this.XC.UG(t.$a(),t.tu()),this.rG.dG()&&this.rG.WG(h),this.hG.dG()&&this.hG.WG(o),this.oG.dG()&&this.oG.WG(a),this.$C.dG()&&this.$C.UG(s.Ka(),s.Xa()),this.tG.dG()&&this.tG.UG(s.$a(),s.tu()),this.sG.dG()&&this.sG.UG(i.Ka(),i.Xa()),this.iG.dG()&&this.iG.UG(i.$a(),i.tu()),this.aG.dG()&&this.aG.UG(e.Ka(),e.Xa()),this.uG.dG()&&this.uG.UG(e.Xa(),e.tu()),this.nG.dG()&&this.nG.WG(u))}xG(t,s){this.mG&&!s||this.AC||(this.kC.dG()&&this.kC.QG(t),this.mG=!0)}JG(){this.mG=!1}CG(t,s){this.yG&&!s||this.AC||(this.jC.dG()&&this.jC.QG(t),this.yG=!0)}VG(){this.yG=!1}bG(t){if(!this.AC)throw new Error("not device transform shader");this.kC.QG(t);const s=this.QT,i=s.Vy()/2,e=s.ig()/2,n=s.eS(i,e,s.zw(s.ig()),i,e,0,s.ig());this.jC.QG(n)}YG(t){this.zC.dG()&&this.zC.HG(t[0],t[1],t[2],t[3])}static qG(){return ec}static ZG(t){return t?"\n#extension GL_EXT_conservative_depth : enable\nlayout (depth_greater) out highp float gl_FragDepth;\n\t":""}static KG(t){const s=t?"highp":"mediump";return["attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","}"].join("\n")}static XG(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","}"].join("\n")}static $G(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static tI(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static sI(t){return["#version 300 es",sc.OM.CC.ZG(t),"in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static iI(){return["varying highp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static eI(){return["#extension GL_EXT_frag_depth : enable","varying highp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static nI(t){return["#version 300 es",sc.OM.CC.ZG(t),"in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static rI(t,s,i,e){let n="";return t>=2?n="#version 300 es\n"+sc.OM.CC.ZG(e):(s&&(n="#extension GL_EXT_frag_depth : enable\n"),i&&(n+="#extension GL_EXT_shader_texture_lod : enable\n",n+="#extension GL_OES_standard_derivatives : enable\n")),n+`\nprecision highp float;\n${t>=2?"in":"varying"} vec2 vTex;\n${t>=2?"out lowp vec4 outColor;":""}\nuniform lowp vec4 color;\nuniform lowp sampler2D samplerFront;\nuniform vec2 pixelSize;\n\nuniform vec2 tileSize;\nuniform vec2 tileSpacing;\nuniform float outlineThickness;\n\nconst float PI = 3.1415926;\n\nlowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nvec3 randVec3(vec2 seed)\n{\n\treturn vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));\n}\n\nlowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)\n{\n\tvec2 posRandom = tileSize;\n\tfloat angleRandom = outlineThickness;\n\t\n\tvec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;\n\t\n\tfloat angle = angleRandom * rand.z * PI;\n\tfloat sin_a = sin(angle);\n\tfloat cos_a = cos(angle);\n\tfloat aspect = pixelSize.x / pixelSize.y;\n\n\tvec2 mid = tile + vec2(0.5, 0.5);\n\tvec2 dp = uv - mid;\n\tdp.x /= aspect;\n\tvec2 r = vec2(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvec2 p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\t${t>=2?"return textureGrad(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&!i?"return texture2D(samplerFront, p);":""}\n}\n\nvoid main(void) {\n\t\n\t${t<2?"lowp vec4 outColor;":""}\n\t\n\tfloat blendMarginX = tileSpacing.x;\n\tfloat blendMarginY = tileSpacing.y;\n\t\n\tvec2 tile = floor(vTex);\n\tvec2 tex = fract(vTex);\n\tvec2 ddx = ${t>=2||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};\n\tvec2 ddy = ${t>=2||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};\n\t\n\tvec4 curTile = sampleTile(tile, vTex, ddx, ddy);\n\t\n\tbool inLeftMargin = (tex.x < blendMarginX);\n\tbool inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tbool inTopMargin = (tex.y < blendMarginY);\n\tbool inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tlowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tlowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tlowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tlowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tlowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tlowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutColor = curTile;\n\t}\n\t\n\toutColor *= color;\n\t${t<2?"gl_FragColor = outColor;":""}\n\t${t>=2?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n\t${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n}\n`}static hI(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static oI(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static aI(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static uI(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static lI(t){return["#version 300 es",sc.OM.CC.ZG(t),"uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static cI(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static fI(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static dI(){return["precision lowp float;","varying highp vec2 vTex;","uniform vec4 color;","void main(void) {","\thighp float grad = vTex.x / (1.0 - vTex.y);","\tgl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);","}"].join("\n")}static pI(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static mI(){return["varying highp vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static yI(){return["varying highp vec2 vTex;","uniform lowp vec4 color;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp float innerF = step(distSq, 0.25);","\thighp vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static gI(){return["varying highp vec2 vTex;","uniform lowp vec4 color;","uniform highp vec2 pixelSize;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 innerEdge = halfNorm - pixelSize * norm;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static MI(){return["varying highp vec2 vTex;","uniform lowp vec4 color;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 pxNorm = pixelSize * norm;","\thighp vec2 innerEdge1 = halfNorm - pxNorm;","\thighp vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\thighp float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\thighp vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\thighp vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\thighp vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\thighp vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\thighp float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const nc=self.Gs,rc=self.hs.fs,hc=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);nc.OM.FC=class{constructor(t,s,i){if(!hc.has(i))throw new Error("invalid uniform type");this.cv=t,this._C=this.cv.NG(),this.Hn=s,this.Jc=i,this.wI="color"===this.Jc,this.SI=this._C.getUniformLocation(this.cv.EG(),s),this.TI=!!this.SI;const e=hc.get(i);this.bI=new Float32Array(e),this.vI=new Float32Array(e)}Jn(){this.cv=null,this._C=null,this.SI=null}dG(){return this.TI}AG(){return this.Jc}xI(){return this.wI}SG(t){this.dG()&&(this.bI[0]=t,this.vI.set(this.bI),this._C.uniform1f(this.SI,t))}MG(t){this.dG()&&(this.bI[0]=t,this.vI.set(this.bI),this._C.uniform1i(this.SI,t))}wG(t,s){this.dG()&&(this.bI[0]=t,this.bI[1]=s,this.vI.set(this.bI),this._C.uniform2f(this.SI,t,s))}TG(t,s,i){this.dG()&&(this.bI[0]=t,this.bI[1]=s,this.bI[2]=i,this.vI.set(this.bI),this._C.uniform3f(this.SI,t,s,i))}gG(t,s,i,e){this.dG()&&(this.bI[0]=t,this.bI[1]=s,this.bI[2]=i,this.bI[3]=e,this.vI.set(this.bI),this._C.uniform4f(this.SI,t,s,i,e))}CI(t){t=Math.fround(t);const s=this.bI;s[0]!==t&&(s[0]=t,this._C.uniform1f(this.SI,t))}GI(t){const s=this.bI;s[0]!==t&&(s[0]=t,this._C.uniform1i(this.SI,t))}II(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.bI;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this._C.uniform2f(this.SI,t,s))}NI(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.bI;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this._C.uniform3f(this.SI,t,s,i))}HG(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const n=this.bI;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(n[0]=t,n[1]=s,n[2]=i,n[3]=e,this._C.uniform4f(this.SI,t,s,i,e))}QG(t){const s=this.bI;rc.L(s,t)||(nc.gh(s,t,0),this._C.uniformMatrix4fv(this.SI,!1,t))}OG(t){const s=this.vI;return this.xI()?s[0]===Math.fround(t.ko())&&s[1]===Math.fround(t.Fo())&&s[2]===Math.fround(t.jo()):s[0]===Math.fround(t)}kG(t){const s=this.vI;this.xI()?(s[0]=t.ko(),s[1]=t.Fo(),s[2]=t.jo()):s[0]=t}zG(t){return this.vI[0]===Math.fround(t)}jG(t,s){const i=this.vI;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}WG(t){this.vI[0]=t}UG(t,s){const i=this.vI;i[0]=t,i[1]=s}}}{const oc=self.Gs,ac=self.hs,uc=ac.Ms,lc=ac.fs;oc.OM.EI=class{constructor(t){this.DI=t,this.GG=lc.create(),this.vG=lc.create(),this.hC=null,this.oC=null,this._I=!1,this.AI=uc.M(1,1,1,1),this.IG=null,this.LI=new oc.Rect,this.clearColor=oc.Qn(oc.vo,0,0,0,0)}},oc.OM.OI=class{constructor(t){const s=new ArrayBuffer(96);this.Jc=0,this.RI=t,this._C=t.DI.mx(),this.kI=0,this.FI=0,this.jI=null,this.zI=new Float32Array(s,0,16),this.BI=new Float32Array(s,64,4),this.UI=new Float32Array(s,80,4),this.WI=[]}QI(t,s){this.Jc=1,this.kI=t,this.FI=s}JI(){const t=this._C;t.drawElements(t.TRIANGLES,this.FI,t.UNSIGNED_SHORT,this.kI)}VI(t){this.Jc=2,this.jI=t}YI(){const t=this._C,s=this.jI;t.bindTexture(t.TEXTURE_2D,s?s.Ex():null)}HI(t){this.Jc=3,t.Uo(this.BI,0)}qI(){const t=this.BI,s=this.RI;uc.m(s.AI,t),s.IG.YG(t)}ZI(t){this.Jc=21,t.Uo(this.BI,0)}KI(){const t=this.BI,s=this.RI.IG;s.YC.dG()&&s.YC.HG(t[0],t[1],t[2],t[3])}XI(t,s){this.Jc=4,this.kI=t,this.FI=s}$I(){this._C.blendFunc(this.kI,this.FI)}tN(t,s,i,e){this.Jc=5;const n=this.BI;n[0]=t,n[1]=s,n[2]=i,n[3]=e}sN(){const t=this.BI;this._C.viewport(t[0],t[1],t[2],t[3])}iN(t){this.Jc=6,lc.m(this.zI,t)}eN(){const t=this.RI,s=t.DI.rw,i=t.IG,e=this.zI;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.xG(e,!0):n.JG()}lc.m(t.vG,e)}nN(t){this.Jc=7,lc.m(this.zI,t)}rN(){const t=this.RI,s=t.DI.rw,i=t.IG,e=this.zI;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.CG(e,!0):n.VG()}lc.m(t.GG,e)}hN(t){this.Jc=8,this.jI=t}oN(){const t=this._C,s=this.jI,i=this.RI;s?(i.hC=s.aC(),i.oC=s.uC(),i._I&&i.oC?t.bindFramebuffer(t.FRAMEBUFFER,i.oC):t.bindFramebuffer(t.FRAMEBUFFER,i.hC)):(i.hC=null,i.oC=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}aN(t){this.Jc=9,t.Uo(this.zI,0)}uN(t,s,i,e){this.Jc=9;const n=this.zI;n[0]=t,n[1]=s,n[2]=i,n[3]=e}lN(){const t=this._C,s=this.zI,i=this.RI.clearColor,e=s[0],n=s[1],r=s[2],h=s[3];i.Vo(e,n,r,h)||(t.clearColor(e,n,r,h),i.No(e,n,r,h)),t.clear(t.COLOR_BUFFER_BIT)}cN(t){this.Jc=15,t.Uo(this.zI,0)}fN(){const t=this.zI;this.RI.LI.set(t[0],t[1],t[2],t[3])}dN(t,s){this.Jc=10,this.kI=t,this.FI=1,this.zI[0]=s}pN(){const t=this._C,s=this.RI,i=s.DI.aw;t.useProgram(i.Gb),i.xG(s.vG,!1),i.CG(s.GG,!1);const e=s.LI;i.UC.dG()&&i.UC.II(e.Ka(),e.Xa()),i.WC.dG()&&i.WC.II(e.$a(),e.tu());const n=this.zI[0];if(i.QC.dG()&&i.QC.CI(n),i.zC.dG()){const t=s.AI;i.zC.HG(t[0],t[1],t[2],t[3])}t.drawArrays(t.POINTS,this.kI/4,this.FI),t.useProgram(s.IG.Gb)}mN(t){this.Jc=11,this.jI=t}yN(){const t=this._C,s=this.RI,i=this.jI;if(s.IG=i,t.useProgram(i.Gb),i.xG(s.vG,!1),i.CG(s.GG,!1),i.zC.dG()){const t=s.AI;i.zC.HG(t[0],t[1],t[2],t[3])}}gN(){this.Jc=12}MN(){const t=this.RI.IG,s=this._C,i=this.zI,e=this.BI,n=this.UI;if(t.qC.dG()){const t=this.RI.DI,i=this.jI;t.wN!==i&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,i?i.Ex():null),t.wN=i,s.activeTexture(s.TEXTURE0))}t.eG.dG()&&t.eG.II(i[0],i[1]),t.KC.dG()&&t.KC.II(i[2],i[3]),t.XC.dG()&&t.XC.II(i[4],i[5]),t.rG.dG()&&t.rG.CI(this.FI),t.hG.dG()&&t.hG.CI(i[6]),t.oG.dG()&&t.oG.CI(i[7]),t.$C.dG()&&t.$C.II(i[12],i[13]),t.tG.dG()&&t.tG.II(i[14],i[15]),t.sG.dG()&&t.sG.II(n[0],n[1]),t.iG.dG()&&t.iG.II(n[2],n[3]),t.aG.dG()&&t.aG.II(e[0],e[1]),t.uG.dG()&&t.uG.II(e[2],e[3]),t.nG.dG()&&t.nG.CI(this.kI)}SN(){this.Jc=13}TN(){const t=this.RI.IG.pG,s=this.WI;for(let i=0,e=t.length;i<e;++i){const e=t[i],n=s[i];e.xI()?e.NI(n.ko(),n.Fo(),n.jo()):e.CI(n)}}bN(t){this.Jc=14,this.jI=t}vN(){const t=this._C,s=this.jI,i=this.RI.hC;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}xN(t,s,i){this.Jc=17;const e=this.zI,n=this.RI.DI;e[0]=t.Vy(),e[1]=t.ig(),e[2]=s?s.Vy():n.Vy(),e[3]=s?s.ig():n.ig(),e[4]=t.fC()?1:0,e[5]="stretch"===i;const r=this.WI;oc.wh(r),r.push(t.aC()),r.push(s?s.aC():null)}CN(){const t=this.zI,s=this.WI,i=this._C,e=t[0],n=t[1],r=t[2],h=t[3],o=0!==t[4],a=0!==t[5],u=s[0],l=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,u),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,l),a)i.blitFramebuffer(0,0,e,n,0,0,r,h,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const t=Math.min(e,r),s=Math.min(n,h),o=Math.max(n-h,0),a=Math.max(h-n,0);i.blitFramebuffer(0,o,t,s+o,0,a,t,s+a,i.COLOR_BUFFER_BIT,i.NEAREST)}}GN(t){this.Jc=18,this.jI=t}IN(){this.jI.NN(),this.jI=null}EN(t){this.Jc=19,this.jI=t}DN(){this.jI._N(),this.jI=null}AN(t,s,i){this.Jc=20;const e=this.zI;e[0]=t,e[1]=s,e[2]=i}LN(){const t=this.RI.IG,s=this.zI;t.eG.dG()&&t.eG.II(s[0],s[1]),t.HC.dG()&&t.HC.CI(s[2])}ON(t,s,i,e,n,r,h){this.Jc=16;const o=this.zI;t.Uo(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=n/i,o[8]=r/s,o[9]=h/i}RN(){const t=this.RI.IG,s=this.zI;t.$C.dG()&&t.$C.II(s[0],s[1]),t.eG.dG()&&t.eG.II(s[4],s[5]),t.JC.dG()&&t.JC.II(s[6],s[7]),t.VC.dG()&&t.VC.II(s[8],s[9])}PN(t,s,i,e,n,r,h){this.Jc=29;const o=this.zI;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=n,o[5]=r,o[6]=h}kN(){const t=this.RI.IG,s=this.zI;t.eG.dG()&&t.eG.II(s[0],s[1]),t.JC.dG()&&t.JC.II(s[2],s[3]),t.HC.dG()&&t.HC.CI(s[4]),t.VC.dG()&&t.VC.II(s[5],s[6])}FN(t){this.Jc=22,this.kI=t?1:0}jN(){const t=this._C,s=0!==this.kI;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}zN(t){this.Jc=23,this.kI=t?1:0}BN(){const t=this._C;0===this.kI?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}UN(t){this.Jc=24,this.kI=t?1:0}WN(){const t=this._C,s=this.RI,i=s.DI,e=0!==this.kI;s._I=e,t.activeTexture(t.TEXTURE2),e?(s.oC&&t.bindFramebuffer(t.FRAMEBUFFER,s.oC),t.bindTexture(t.TEXTURE_2D,i.sC())):(t.bindTexture(t.TEXTURE_2D,null),s.oC&&t.bindFramebuffer(t.FRAMEBUFFER,s.hC)),t.activeTexture(t.TEXTURE0)}QN(){this.Jc=25}JN(){const t=this._C;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}VN(){this.Jc=26}YN(){const t=this._C;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}HN(){this.Jc=27}qN(){const t=this._C;t.disable(t.STENCIL_TEST)}ZN(t,s,i,e,n){this.Jc=28,this.kI=t?1:0;const r=this.zI;r[0]=s,r[1]=i,r[2]=e,r[3]=n}KN(){const t=this._C,s=this.zI;1===this.kI?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}XN(){switch(this.Jc){case 1:return void this.JI();case 2:return void this.YI();case 3:return void this.qI();case 4:return void this.$I();case 5:return void this.sN();case 6:return void this.eN();case 7:return void this.rN();case 8:return void this.oN();case 9:return void this.lN();case 10:return void this.pN();case 11:return void this.yN();case 12:return void this.MN();case 13:return void this.TN();case 14:return void this.vN();case 15:return void this.fN();case 16:return void this.RN();case 17:return void this.CN();case 18:return void this.IN();case 19:return void this.DN();case 20:return void this.LN();case 21:return void this.KI();case 22:return void this.jN();case 23:return void this.BN();case 24:return void this.WN();case 25:return void this.JN();case 26:return void this.YN();case 27:return void this.qN();case 28:return void this.KN();case 29:return void this.kN()}}}}{let cc=function(t,s,i,e,n,r){s?t.strokeRect(i,e,n,r):t.fillRect(i,e,n,r)},fc=function(t){return t*(4/3)},dc=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};0;const pc=self.Gs,mc=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),yc={timeout:60},gc=new pc.vo(0,0,0,1),Mc=new Set(["left","center","right"]),wc=new Set(["top","center","bottom"]),Sc=new Set(["word","cjk","character"]),Tc=new Set(["ltr","rtl"]),bc=new Set;pc.$N&&pc.$N.addEventListener("fontload",(t=>{const s=t.font.Nc();for(const t of bc)(t.tE()||pc.Ke(t.sE(),s))&&t.iE()}));let vc=!1,xc=!1;pc.OM.UT=class{constructor(t,s){s=Object.assign({},yc,s),this.QT=t,this.eE="Arial",this.nE=16,this.rE=1,this.hE=0,this.oE=!1,this.aE=!1,this.uE="black",this.lE=!1,this.By=null,this.cE=!0,this.fE=null,this.dE=new Set,this.pE="left",this.mE="top",this.Fc="",this.yE=null,this.gE=pc.Qn(pc.jy),this.ME="word",this.wE="ltr",this.SE=!1,this.TE=!1,this.bE=!1,this.vE=-1,this.xE=0,this.CE=0,this.GE=0,this.Ng=0,this.Eg=0,this.IE=1,this.NE=null,this.EE=null,this.DE=null,this._E=null,this.AE=-1,this.LE=-1,this.OE="",this.RE="",this.PE="",this.kE=1,this.FE=1,this.jE=t=>this.zE(t),this.Kv=null,this.BE=new pc.Rect,this.UE=1,this.WE=new pc.Lf((()=>{this.QE(),this.JE(8,8)}),s.timeout),this.VE=null,this.YE=!1,bc.add(this)}Jn(){this.fE=null,this.dE.clear(),this.By=null,this.yE=null,this.NE=null,this.EE=null,this.DE=null,this._E=null,this.jE=null,this.WE.Jn(),this.VE=null,this.QE(),this.gE.Nl(),this.gE=null,this.QT=null,this.YE=!0,bc.delete(this)}HE(){this.bE=!0}qE(){this.HE(),this.TE=!0}iE(){this.qE(),this.SE=!0}ZE(t){if(t=!!t,this.lE===t)return;this.lE=t;const s=this.lE?"alphabetic":"top";this.EE&&(this.EE.textBaseline=s),this.DE&&(this.DE.textBaseline=s),this.iE()}tE(){return this.lE}Qy(t){this.By!==t&&(this.By=t,this.gE.Qy(t),this.By&&this.By.TM()&&this.By.bM().then((()=>this.HE())),this.iE())}KE(t){t=!!t,this.cE!==t&&(this.cE=t,this.HE())}XE(t){t||(t="serif"),this.eE!==t&&(this.eE=t,this.iE())}sE(){return this.eE}$E(t){t<.1&&(t=.1),this.nE!==t&&(this.nE=t,this.iE())}tD(){return this.nE}sD(t){this.rE!==t&&(this.rE=t,this.iE())}iD(t){this.hE!==t&&(this.hE=t,this.qE())}eD(){return this.hE}nD(t){t=!!t,this.oE!==t&&(this.oE=t,this.iE())}rD(){return this.oE}hD(t){t=!!t,this.aE!==t&&(this.aE=t,this.iE())}oD(){return this.aE}aD(t){t=Math.floor(t),this.vE!==t&&(this.vE=t,this.HE())}uD(){return this.vE}lD(t,s){let i=[];(this.oE||s.Qg("b"))&&i.push("bold"),(this.aE||s.Qg("i"))&&i.push("italic");const e=s.Wg("size"),n=(e?parseFloat(e.Ay):this.nE)*this.rE;t?i.push(n+"pt"):i.push(n*this.cD()+"pt");let r=this.eE;const h=s.Wg("font");return h&&h.Ay&&(r=h.Ay,this.fE&&!this.dE.has(r)&&(this.fE(r),this.dE.add(r))),r&&(mc.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}Lb(t){t instanceof pc.vo&&(t=t.$o()),this.uE!==t&&(this.uE=t,this.HE())}fD(t,s,i){gc.Eo(t,s,i),this.Lb(gc)}dD(t){if(!Mc.has(t))throw new Error("invalid horizontal alignment");this.pE!==t&&(this.pE=t,this.qE())}pD(){return this.pE}mD(t){if(!wc.has(t))throw new Error("invalid vertical alignment");this.mE!==t&&(this.mE=t,this.qE())}yD(){return this.mE}gD(t){if(!Sc.has(t))throw new Error("invalid word wrap mode");this.ME!==t&&(this.ME=t,this.iE())}MD(){return this.ME}wD(t){if(!Tc.has(t))throw new Error("invalid text direction");this.wE!==t&&(this.wE=t,this.EE&&(this.EE.direction=this.wE),this.DE&&(this.DE.direction=this.wE),this.iE())}SD(){return this.wE}Bc(t){this.Fc!==t&&(this.Fc=t,this.iE())}TD(){return this.Fc}cD(){return this.UE*this.IE*self.devicePixelRatio}bD(t,s,i){if(void 0===i&&(i=1),t<=0||t<=0)return;if(this.CE===t&&this.GE===s&&this.IE===i)return;const e=this.CE;this.CE=t,this.GE=s,this.IE=i;const n=self.devicePixelRatio;this.Ng=this.CE*this.IE*n,this.Eg=this.GE*this.IE*n;const r=Math.max(this.Ng,this.Eg),h=Math.min(this.QT.lx(),4096);let o=1;r>h&&(o=h/r,this.Ng=Math.min(this.Ng*o,h),this.Eg=Math.min(this.Eg*o,h)),this.UE=o,this.CE!==e?this.iE():this.qE()}Vy(){return this.Ng}ig(){return this.Eg}vD(){return this.IE}xD(){return this.CD(),this.gE.Gg()}GD(){return this.CD(),this.gE.Ig()+this.gE.Wy()*(this.hE+4)-this.hE}ID(){this.CD();let t=0;for(const s of this.gE.Uy())for(const i of s.ag())t+=i.ug();return t}lC(){return this.WE.Ff(),this.ND(),this.Kv}ED(t,s){this.CD();const i=this.cD(),e=this.gE.Uy();for(const n of e){const e=n.ng()*i;if(s>=n.zg()-n.ig()*i+e&&s<n.zg()+e)for(const s of n.ag())if(t>=s.Fg()&&t<s.Fg()+s.Vy()*i)return s}return null}*DD(t){this.CD();const s=this.gE.Uy();for(const i of s)for(const s of i.ag()){const i=s.Wg("tag");i&&pc.Ke(i.Ay,t)&&(yield s)}}_D(t,s){for(const i of this.DD(t)){if(0===s)return i;--s}return null}AD(t){let s=0;for(const i of this.DD(t))++s;return s}ND(){(!this.Kv||this.bE||this.TE||this.SE)&&(this.YE||this.Ng<=0||this.Eg<=0||(this.bE=!1,this.LD()))}LD(){this.YE||(this.CD(),this.JE(Math.max(pc.Sr(Math.ceil(this.Ng)),128),Math.max(pc.Sr(Math.ceil(this.Eg)),64)),this.OD(),this.RD(),this.WE.Ff())}JE(t,s){this.NE||(this.NE=pc.lo(16,16));let i=!1;this.AE===t&&this.LE===s||(this.AE=t,this.LE=s,this.NE.width=t,this.NE.height=s,i=!0),this.EE||(this.EE=this.NE.getContext("2d"),i=!0),i?(this.EE.textBaseline=this.lE?"alphabetic":"top",this.EE.direction=this.wE,this.EE.font=this.OE,this.EE.fillStyle=this.PE,this.EE.strokeStyle=this.PE,this.EE.globalAlpha=this.kE,this.EE.lineWidth=this.FE):this.EE.clearRect(0,0,t,s)}PD(){this.DE||(this.DE=pc.lo(16,16).getContext("2d"),this._E=pc.lo(16,16).getContext("2d"),this.DE.textBaseline=this.lE?"alphabetic":"top",this._E.textBaseline="top",this.DE.direction=this.wE,this._E.direction=this.wE)}kD(t){this.RE!==t&&(this.RE=t,this.DE.font=t,this._E.font=t)}FD(){if(!vc){vc=!0,this.PD();const t=this.DE.measureText("test");xc="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return xc}CD(){this.jD(),this.zD()}jD(){this.SE&&(this.PD(),!this.lE||this.yE&&this.yE.toString()===this.Fc||(this.yE=new pc.dn(this.Fc,{gy:!0})),this.gE.jy(this.lE?this.yE.Dy():this.Fc,this.jE,this.CE,this.ME,0),this.SE=!1)}zD(){this.TE&&(this.BD(),this.TE=!1)}zE(t){const s=t.Xy()?t.yg().join(""):" ";this.kD(this.lD(!0,t));const i=t.Wg("size"),e=(i?parseFloat(i.Ay):this.nE)*this.rE,n=this.DE.measureText(s);let r=0;if(this.lE&&this.FD()){const t=this._E.measureText(s);r=n.fontBoundingBoxAscent-t.fontBoundingBoxAscent}return{width:n.width,height:fc(e),fontBoundingBoxAscent:n.fontBoundingBoxAscent||0,fontBoundingBoxDescent:n.fontBoundingBoxDescent||0,Ky:r}}UD(t){this.OE!==t&&(this.OE=t,this.EE.font=t)}WD(t){this.PE!==t&&(this.PE=t,this.EE.fillStyle=t,this.EE.strokeStyle=t)}QD(t){this.kE!==t&&(this.kE=t,this.EE.globalAlpha=t)}JD(t){this.FE!==t&&(this.FE=t,this.EE.lineWidth=t)}BD(){const t=this.cD(),s=(4+this.hE)*t;let i=0;const e=this.gE.Uy();if(0===e.length)return;for(const t of e){t.kg(NaN),t.jg(NaN);for(const s of t.ag())s.kg(NaN),s.jg(NaN)}const n=this.lE&&this.FD();let r=e[0].ig()*t;if("center"===this.mE){const h=e.reduce(((i,e)=>i+e.ig()*t+s),0)-s;i=Math.max(this.Eg/2-h/2,0),n&&(r=e[0].rg()*t)}else if("bottom"===this.mE){const r=e.reduce(((i,e)=>i+e.ig()*t+s),0)-this.hE*t,h=n?e.at(-1).ng()*t:0;i=this.Eg-r-h-2}for(let n=0,h=e.length;n<h;++n){const h=e[n],o=h.ig()*t,a=i;if(this.lE){if(i+=0===n?r:o,n>0&&i>this.Eg-4*t)break}else if(n>0&&i>=this.Eg-o)break;a>=0&&this.VD(h,i,t),this.lE||(i+=o),i+=s}}VD(t,s,i){let e=0;"center"===this.pE?e=Math.floor((this.Ng-t.Vy()*i)/2):"right"===this.pE&&(e=this.Ng-t.Vy()*i),t.kg(e),t.jg(s);for(const n of"ltr"===this.wE?t.ag():t.Rg())this.YD(n,e,s,i),e+=n.Vy()*i}YD(t,s,i,e){const n=t.Wg("offsetx");s+=n?dc(n.Ay,t.ig())*e:0;const r=t.Wg("offsety");if(i+=r?dc(r.Ay,t.ig())*e:0,t.tg()){const s=t.Wg("iconoffsety");i+=s?dc(s.Ay,t.ig())*e:.2*t.ig()*e}t.kg(s),t.jg(i)}OD(){this.EE.imageSmoothingEnabled=this.cE,this.EE.imageSmoothingQuality="high",this.xE=0;const t=this.cD(),s=this.gE.Uy();for(const i of s)this.HD(i,t)}HD(t,s){const i=t.Fg(),e=t.zg();if(Number.isFinite(i)&&Number.isFinite(e))for(const i of"ltr"===this.wE?t.ag():t.Rg())this.qD(i,s,t.ig())}qD(t,s,i){const e=this.EE,n=t.Fg(),r=t.zg();if(!Number.isFinite(n)||!Number.isFinite(r))return;const h=i/16;let o=t.Vy()*s;const a=t.ig()*s,u=t.ig()/16,l=(4+this.hE)*s;let c=t.Xy()?t.yg():null;if(-1!==this.vE){if(this.xE>=this.vE)return;t.Xy()&&this.xE+c.length>this.vE&&(c=c.slice(0,this.vE-this.xE),o=this.zE(t).width*s),this.xE+=t.ug()}const f=t.Wg("background"),d=t.Qg("u"),p=t.Qg("s");if(t.Xy()&&pc.wm(c)&&!f&&!d&&!p||t.Qg("hide"))return;const m=t.Wg("color"),y=t.Wg("opacity");this.QD(y?parseFloat(y.Ay)/100:1),f&&(this.WD(f.Ay),e.fillRect(n,r-a,o,a+l));const g=t.Wg("linethickness"),M=g?parseFloat(g.Ay):1,w=t.Qg("stroke");if(w&&this.JD(.5*u*M*this.cD()),t.Xy()){const s=c.join("");if(this.UD(this.lD(!1,t)),!w){this.JD(.5*u*M*this.cD());const i=t.Wg("outlineback");i&&(this.WD(i.Ay),this.ZD(!0,s,n,r,o))}if(this.WD(m?m.Ay:this.uE),this.ZD(w,s,n,r,o),!w){this.JD(.5*u*M*this.cD());const i=t.Wg("outline");i&&(this.WD(i.Ay),this.ZD(!0,s,n,r,o))}}else if(t.tg()&&t.Vy()>0){const s=t.Xg(this.By);s&&e.drawImage(s,n,r-a,o,a)}if(this.WD(m?m.Ay:this.uE),d&&cc(e,w,n,r+s*h,o,s*h*M),p){const t=s*u,i=r-a/4+t/2;e.fillRect(n,i-t*M/2,o,t*M)}}ZD(t,s,i,e,n){"rtl"===this.wE&&(i+=n),t?"Gecko"===pc.Ks.ei?this.EE.strokeText(s,i,e,n):this.EE.strokeText(s,i,e):"Gecko"===pc.Ks.ei?this.EE.fillText(s,i,e,n):this.EE.fillText(s,i,e)}RD(){this.QT.KD()||(this.Kv||(this.Kv=this.QT.tC(this.NE.width,this.NE.height,{Vv:!0,Yv:"high"})),this.QT.XD(this.NE,this.Kv),this.BE.set(0,0,this.Ng/this.Kv.Vy(),this.Eg/this.Kv.ig()),this.VE&&this.VE())}$D(){return this.BE}QE(){this.Kv&&(this.QT.KD()||this.QT.nC(this.Kv),this.Kv=null)}static Ob(){for(const t of bc)t.QE()}static t_(){return bc.values()}}}{const Cc=self.Gs;class Gc{constructor(t){this._C=t.mx(),this.s_=t.yx(),this.i_=t.e_(),this.n_=null,this.kf=!1,this.r_=!1,this.h_=0,1===this.s_?this.n_=this.i_.createQueryEXT():this.n_=this._C.createQuery()}Jn(){this.o_(),this._C=null,this.i_=null,this.r_=!1}o_(){this.n_&&(1===this.s_?this.i_.deleteQueryEXT(this.n_):this._C.deleteQuery(this.n_),this.n_=null)}NN(){if(this.kf)throw new Error("query already active");1===this.s_?this.i_.beginQueryEXT(this.i_.TIME_ELAPSED_EXT,this.n_):this._C.beginQuery(this.i_.TIME_ELAPSED_EXT,this.n_),this.kf=!0}_N(){if(!this.kf)throw new Error("query not active");1===this.s_?this.i_.endQueryEXT(this.i_.TIME_ELAPSED_EXT):this._C.endQuery(this.i_.TIME_ELAPSED_EXT),this.kf=!1}a_(){if(!this.n_||this.r_||this.kf)return;let t=!1;t=1===this.s_?this.i_.getQueryObjectEXT(this.n_,this.i_.QUERY_RESULT_AVAILABLE_EXT):this._C.getQueryParameter(this.n_,this._C.QUERY_RESULT_AVAILABLE);const s=this._C.getParameter(this.i_.GPU_DISJOINT_EXT);t&&!s&&(1===this.s_?this.h_=this.i_.getQueryObjectEXT(this.n_,this.i_.QUERY_RESULT_EXT):this.h_=this._C.getQueryParameter(this.n_,this._C.QUERY_RESULT),this.h_/=1e9,this.r_=!0),(t||s)&&this.o_()}u_(){return this.r_}l_(){if(!this.r_)throw new Error("no result available");return this.h_}}Cc.OM.c_=class{constructor(t){this.QT=t,this.Aw=t.DT(),this.kf=!1,this.f_=null,this.d_=!1,this.p_=null,this.m_=[]}Jn(){for(const t of this.m_)t instanceof Gc&&t.Jn();Cc.wh(this.m_),this.f_=null,this.p_=null,this.QT=null}NN(){if(this.kf)throw new Error("query already active");const t=this.QT.y_();t.length>0?(this.d_=!0,this.f_=t.at(-1),this.f_.g_(),this.f_.m_.push(this)):(this.d_=!1,this.f_=null),this.kf=!0,t.push(this),this.M_()}_N(){if(!this.kf)throw new Error("query not active");if(this.QT.y_().pop()!==this)throw new Error("can only end most nested query");this.kf=!1,this.g_(),this.f_&&(this.f_.M_(),this.f_=null)}M_(){this.p_=Cc.Qn(Gc,this.QT),this.m_.push(this.p_),this.p_.NN()}g_(){this.p_._N(),this.p_=null}a_(){for(const t of this.m_)t.a_()}w_(){return this.d_}u_(){return this.m_.every((t=>t.u_()))}l_(){return this.m_.reduce(((t,s)=>t+s.l_()),0)}DT(){return this.Aw}}}{const Ic=self.Gs;Ic.OM.S_=class{constructor(t,s=1e3){this.QT=t,this.T_=s,this.b_=[],this.QT.v_(this)}Jn(){this.Nl(),this.QT.x_(this),this.QT=null}Nl(){for(const t of this.b_)t.Jn();Ic.wh(this.b_)}C_(){const t=new Ic.OM.c_(this.QT);return this.b_.push(t),this.b_.length>this.T_&&this.b_.shift().Jn(),t}G_(t){for(const s of this.b_){if(s.DT()>=t)return;if(s.w_())return;s.a_()}}I_(t,s){if(s<=t)return NaN;let i=0;for(const e of this.b_){if(e.DT()>=s)break;if(!(e.DT()<t)){if(!e.u_())return NaN;i+=e.l_()}}return i}N_(t){for(let s=0,i=this.b_.length;s<i;++s){const i=this.b_[s];if(!(i.DT()<t))return void(s>0&&this.b_.splice(0,s));i.Jn()}}}}{let Nc=function(){Uc=-1;for(const t of Bc)t.E_()&&(t.resolve(),Bc.delete(t));Bc.size>0&&(Uc=self.requestAnimationFrame(Nc))};0;const Ec=self.Gs,Dc=(self.assert,self.hs),_c=(Dc.gs,Dc.Ms),Ac=Dc.fs,Lc={powerPreference:"default",D_:!0,alpha:!1,depth:!1,__:!1,A_:2,failIfMajorPerformanceCaveat:!1},Oc=new Set(["default","low-power","high-performance"]),Rc=new Ec.Iu(0,0,1,0,1,1,0,1),Pc=Ac.create(),kc=Ac.create(),Fc=new Ec.Iu,jc=new Ec.Rect;let zc=null;Ec.Rs&&(self.L_=function(){zc?zc.loseContext():console.warn("WEBGL_lose_context not supported")},self.O_=function(){zc?zc.restoreContext():console.warn("WEBGL_lose_context not supported")});const Bc=new Set;let Uc=-1;Ec.OM.R_=class extends Ec.OM.ZM{constructor(t,s){if(super(s),s=Object.assign({},Lc,s),!Oc.has(s.powerPreference))throw new Error("invalid power preference");const i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat};let e=null,n=0;if(s.A_>=2&&(e=t.getContext("webgl2",i),n=2),e||(e=t.getContext("webgl",i),n=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this._C=e,this.P_=e.getContextAttributes(),this.k_=e.getParameter(e.VERSION),this.s_=n,this.F_=_c.create(),this.j_=!1,this.z_=Ac.create(),this.B_=!!s.depth,this.U_=!(!s.depth||!s.__),this.W_=this.B_,this.Q_=!1,this.J_=null,this.V_=!0,this.Y_=0,this.H_=0,this.OC=null,this.RC=null,this.q_=null,this.PC=null,this.Z_=new Float32Array(8e3*this.IT()),this.K_=new Uint16Array(12e3),this.X_=new Float32Array(16e3),this.tA=new Float32Array(32e3),this.sA=0,this.iA=0,this.eA=0,this.nA=0,this.rA=null,this.hA=null,this.oA=[],this.aA=0,this.uA=0,this.lA=null,this.cA=0,this.RI=Ec.Qn(Ec.OM.EI,this),this.fA=Ec.Qn(Ec.vo,1,1,1,1),this.dA=null,this.wN=null,this.pA=0,this.mA=0,this.yA=new Ec.Rect,this.gA=Ec.Qn(Ec.Rect,0,0,-1,-1),this.MA=0,this.wA=-1,this.SA=0,this.TA=0,this.bA="(unavailable)",this.vA="(unavailable)",this.xA=[],this.CA=!1,this.GA=null,this.IA=null,this.NA=null,this.EA=null,this.DA=null,this._A=null,this.AA=null,this.LA=0,this.OA=!!s.D_,this.i_=null,this.RA=new Set,this.PA=[],this.Rw(this.K_)}PT(){return!0}async Fw(){super.Fw();const t=this._C,s=this.IT();this.fA.No(1,1,1,1),this.dA=null,this.wN=null,this.sA=0,this.eA=0,this.nA=8e3*s-4*s,Ec.wh(this.oA),this.aA=0,this.uA=0,this.rA=null,this.lA=null,this.yA.set(0,0,1,1),this.cA=0;const i=this.RI;i.IG=null,i.hC=null,i.oC=null,_c.set(i.AI,1,1,1,1),i.clearColor.No(0,0,0,0),i.LI.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.pA=t.ONE,this.mA=t.ONE_MINUS_SRC_ALPHA,this.kA(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.B_?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.W_=this.B_,this.Q_=!1,this.PC=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.PC),t.bufferData(t.ARRAY_BUFFER,this.tA.byteLength,t.DYNAMIC_DRAW),this.OC=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.OC),t.bufferData(t.ARRAY_BUFFER,this.Z_.byteLength,t.DYNAMIC_DRAW),this.RC=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.RC),t.bufferData(t.ARRAY_BUFFER,this.X_.byteLength,t.DYNAMIC_DRAW),this.q_=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.q_),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.K_,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.wA=t.getParameter(t.MAX_TEXTURE_SIZE);const e=t.getParameter(t.ALIASED_POINT_SIZE_RANGE);this.SA=e[0],this.TA=e[1],this.TA>2048&&(this.TA=2048),this.xA=t.getSupportedExtensions();const n=t.getExtension("WEBGL_debug_renderer_info");if(n&&(this.bA=t.getParameter(n.UNMASKED_VENDOR_WEBGL),this.vA=t.getParameter(n.UNMASKED_RENDERER_WEBGL)),this.GA=t.getExtension("KHR_parallel_shader_compile"),this.s_>=2&&("Chromium"!==Ec.Ks.ei||Ec.Ks.ii>=135)&&(this.NA=t.getExtension("EXT_conservative_depth")),Ec.Rs&&(zc=t.getExtension("WEBGL_lose_context")),this.OA&&(1===this.yx()?this.i_=t.getExtension("EXT_disjoint_timer_query"):this.i_=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.IA=t.getExtension("EXT_texture_filter_anisotropic"),this.IA?this.LA=t.getParameter(this.IA.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.LA=0,this.yx()<2&&this.B_&&this.U_&&(this.EA=t.getExtension("WEBGL_depth_texture"),!this.EA))throw new Error("no depth texture support");this.yx()<2&&(this.DA=t.getExtension("EXT_frag_depth"),this._A=t.getExtension("OES_standard_derivatives"),this.AA=t.getExtension("EXT_shader_texture_lod"));const r=Ec.OM.CC,h=r.KG(!1);let o=r.$G(),a=h,u=r.aI(),l=r.hI(),c=r.iI(),f=r.KG(!0),d=!1;this.B_&&(this.yx()<2?this.DA&&(o=r.tI(),u=r.uI(),c=r.eI(),d=!0):(a=r.XG(),o=r.sI(this.FA()),u=r.lI(this.FA()),l=r.oI(),c=r.nI(this.FA()),f=r.XG(!0)));const p=r.rI(this.yx(),d,this._A&&this.AA,this.FA()),m=this.yx()>=2?r.XG():h,y=[[o,a,"<default>"],[o,a,"<default-device-transform>"],[u,l,"<point>"],[r.cI(),h,"<fill>"],[r.fI(),h,"<lineargradient>"],[r.dI(),h,"<penumbra>"],[r.mI(),h,"<hardellipse>"],[r.yI(),h,"<hardellipseoutline>"],[r.gI(),h,"<smoothellipse>"],[r.MI(),h,"<smoothellipseoutline>"],[r.pI(),h,"<smoothline>"],[c,f,"<tilemap>"],[p,m,"<tilerandomization>"]],g=await Promise.all(y.map((t=>this.jA({src:t[0],IC:t[1],name:t[2]}))));this.ow=g[0],this.hA=g[1],this.aw=g[2],this.cw=g[3],this.fw=g[4],this.dw=g[5],this.pw=g[6],this.mw=g[7],this.yw=g[8],this.gw=g[9],this.Mw=g[10],this.uw=g[11],this.lw=g[12],this.aS()}async jA(t){const s=await Ec.OM.CC.DC(this,t);return this.nS(s),s}zA(){this.rA=null}bD(t,s,i){if(this.Ng===t&&this.Eg===s&&!i)return;this.ET();const e=this._C,n=this.RI;this.Ng=t,this.Eg=s,this.BA(0,0,t,s),this.$w(this.z_,t/s),this.UA(this.z_),this.hA&&(e.useProgram(this.hA.EG()),this.hA.bG(this.$M),this.rA=this.hA,this.RI.IG=this.hA),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.dA=null,this.wN=null,this.B_&&this.V_&&this.WA(this.Ng,this.Eg),this.lA&&this.lA.eC(this.Ng,this.Eg),e.bindFramebuffer(e.FRAMEBUFFER,null),this.lA=null,n.hC=null,n.oC=null}WA(t,s){const i=this._C;this.J_&&this.Y_===t&&this.H_===s||(this.U_?(this.J_&&i.deleteTexture(this.J_),this.J_=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.J_),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),this.yx()>=2?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.EA&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.EA.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.J_&&i.deleteRenderbuffer(this.J_),this.J_=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.J_),i.renderbufferStorage(i.RENDERBUFFER,this.s_>=2?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.Y_=t,this.H_=s)}QA(t,s){this.B_&&(this.V_=!1,this.WA(t,s))}JA(){this.B_&&(this.V_=!0,this.WA(this.Ng,this.Eg))}BA(t,s,i,e){const n=this.F_;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(this.VA().tN(t,s,i,e),_c.set(n,t,s,i,e),this.uA=0)}Hw(t){super.Hw(t),this.$w(this.z_,this.Ng/this.Eg)}Qw(t){super.Qw(t),this.$w(this.z_,this.Ng/this.Eg)}Vw(t){super.Vw(t),this.$w(this.z_,this.Ng/this.Eg)}UA(t){Ac.L(this.$M,t)||(this.VA().iN(t),Ac.m(this.$M,t),this.uA=0,this.j_=!0)}YA(){let t,s,i;const e=this.lA;null===e?(t=this.z_,s=this.Vy(),i=this.ig()):(t=e.cC(),s=e.Vy(),i=e.ig()),this.UA(t),this.BA(0,0,s,i)}HA(t){Ac.L(this.tw,t)||(this.VA().nN(t),Ac.m(this.tw,t),this.uA=0,this.j_=!0)}qA(){this.j_=!1}ZA(){return this.j_}rC(){return this.RI}VA(){const t=this.oA;return this.aA===t.length&&t.push(new Ec.OM.OI(this.RI)),t[this.aA++]}ET(){0!==this.aA&&(this.KD()||(this.KA(),this.XA(),this.aA=0,this.sA=0,this.iA=0,this.eA=0,this.uA=0))}KA(){const t=this._C;this.eA>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.PC),t.bufferSubData(t.ARRAY_BUFFER,0,this.tA.subarray(0,this.eA))),this.sA>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.OC),t.bufferSubData(t.ARRAY_BUFFER,0,this.Z_.subarray(0,this.sA)),t.bindBuffer(t.ARRAY_BUFFER,this.RC),t.bufferSubData(t.ARRAY_BUFFER,0,this.X_.subarray(0,this.iA)))}XA(){const t=this.oA;for(let s=0,i=this.aA;s<i;++s)t[s].XN()}$A(){return this.fA.zo()}tL(t,s,i,e){const n=this.fA;n.Vo(t,s,i,e)||(n.No(t,s,i,e),this.VA().HI(n),this.uA=0,this.Sw=null)}sL(t){const s=this.fA;s.zo()!==t&&(s.Ro(t),this.VA().HI(s),this.uA=0,this.Sw=null)}Lb(t){const s=this.fA;s.equals(t)||(s.set(t),this.VA().HI(s),this.uA=0,this.Sw=null)}iL(){this.tL(1,1,1,1)}eL(){return this.fA}nL(t){t!==this.dA&&(this.VA().VI(t),this.dA=t,this.uA=0)}Sx(){this.dA=null}Ab(t){const s=this.RS(t);this.rL(s[0],s[1])}hL(t){const s=this.FS(t);this.rL(s.LS,s.OS)}rL(t,s){t===this.pA&&s===this.mA||(this.VA().XI(t,s),this.pA=t,this.mA=s,this.uA=0,this.Sw=null)}oL(){return this.pA===this._C.ONE&&this.mA===this._C.ONE_MINUS_SRC_ALPHA}aL(){this.rL(this._C.ONE,this._C.ONE_MINUS_SRC_ALPHA)}uL(){this.rL(this._C.SRC_ALPHA,this._C.ONE_MINUS_SRC_ALPHA)}lL(){this.rL(this._C.ONE,this._C.ZERO)}Rect(t){this.cL(t.Ka(),t.Xa(),t.$a(),t.tu())}cL(t,s,i,e){this.GT(t,s,i,s,i,e,t,e)}fL(){let t=this.sA;t>=this.nA&&(this.ET(),t=0),1===this.uA?this.oA[this.aA-1].FI+=6:(this.VA().QI(t,6),this.uA=1)}dL(t){t.Yu(this.Z_,this.sA,this.xw+this.Cw),this.sA+=12}Iu(t){this.fL(),this.dL(t),Rc.Uo(this.X_,this.iA),this.iA+=8}GT(t,s,i,e,n,r,h,o){this.fL();const a=this.Z_;let u=this.sA;const l=this.xw+this.Cw;a[u++]=t,a[u++]=s,a[u++]=l,a[u++]=i,a[u++]=e,a[u++]=l,a[u++]=n,a[u++]=r,a[u++]=l,a[u++]=h,a[u++]=o,a[u++]=l,this.sA=u,Rc.Uo(this.X_,this.iA),this.iA+=8}$S(t,s){this.fL(),this.dL(t),s.eu(this.X_,this.iA),this.iA+=8}pL(t,s){this.fL(),this.dL(t),s.Uo(this.X_,this.iA),this.iA+=8}mL(t,s,i,e,n,r,h,o,a,u,l,c,f){this.fL();const d=this.Z_;let p=this.sA;const m=this.xw+this.Cw;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=n,d[p++]=m+r,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=u,d[p++]=l,d[p++]=m+c,this.sA=p,f.eu(this.X_,this.iA),this.iA+=8}HS(t,s,i,e,n,r,h,o,a,u,l,c,f){this.fL();const d=this.Z_;let p=this.sA;const m=this.xw+this.Cw;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=n,d[p++]=m+r,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=u,d[p++]=l,d[p++]=m+c,this.sA=p,f.Uo(this.X_,this.iA),this.iA+=8}yL(t,s,i){const e=this.Z_,n=this.X_;if(i.length%3!=0)throw new Error("invalid index buffer length");for(let r=0,h=i.length;r<h;){const h=i[r++],o=i[r++],a=i[r++],u=3*h,l=3*o,c=3*a,f=2*h,d=2*o,p=2*a;this.fL();let m=this.sA,y=this.iA;e[m++]=t[u+0],e[m++]=t[u+1],e[m++]=t[u+2],e[m++]=t[l+0],e[m++]=t[l+1],e[m++]=t[l+2],e[m++]=t[c+0],e[m++]=t[c+1],e[m++]=t[c+2],e[m++]=t[c+0],e[m++]=t[c+1],e[m++]=t[c+2],n[y++]=s[f+0],n[y++]=s[f+1],n[y++]=s[d+0],n[y++]=s[d+1],n[y++]=s[p+0],n[y++]=s[p+1],n[y++]=s[p+0],n[y++]=s[p+1],this.sA=m,this.iA=y}}gL(t,s){this.US(0),Ac.m(Pc,this.$M),Ac.m(kc,this.tw),this.YA();const[i,e]=this.ML(this.lA),n=this.eS(0,0,this.zw(e),0,0,0,e);if(this.HA(n),"crop"===t&&this.lA&&s){const t=this.Ng/2,i=this.Eg/2,e=s.Vy(),n=s.ig(),r=this.lA.Vy(),h=this.lA.ig(),o=Math.min(r,e),a=Math.min(h,n),u=Math.max(n-h,0),l=Math.max(h-n,0);jc.set(-t,i-l,-t+o,i-a-l),Fc.Hu(jc),jc.set(0,u,o,a+u),jc.Mt(e,n),this.$S(Fc,jc)}else{const t=i/2,s=e/2;this.cL(-t,s,t,-s)}this.UA(Pc),this.HA(kc)}wL(t){this.yA.equals(t)||(this.yA.m(t),this.VA().cN(t),this.uA=0)}SL(){}TL(t,s,i,e){this.eA>=7996&&this.ET();let n=this.eA;const r=this.xw+this.Cw;2===this.uA&&this.cA===r?this.oA[this.aA-1].FI++:(this.VA().dN(n,r),this.uA=2,this.cA=r);const h=this.tA;h[n++]=t,h[n++]=s,h[n++]=i,h[n++]=e,this.eA=n}uS(t){this.rA!==t&&(this.VA().mN(t),this.rA=t,this.uA=0,this.Sw=null)}bL(){return this.rA}vL(){this.uS(this.hA)}xL(t){this.VA().ZI(t),this.uA=0}CL(t,s,i=1){this.VA().AN(t,s,i),this.uA=0}GL(t,s,i,e,n,r,h){if(this.rA!==this.uw)throw new Error("must set tilemap fill mode first");this.VA().ON(t,s,i,e,n,r,h),this.uA=0}IL(t,s,i,e,n,r,h){if(this.rA!==this.lw)throw new Error("must set tile randomization mode first");this.VA().PN(t,s,i,e,n,r,h),this.uA=0}NL(t,s,i,e,n,r,h,o,a,u,l){const c=this.rA;if(l%=10800,!c.fG||c.FG(s,i,e,n,r,h,o,a,u,l))return;const f=this.VA();f.gN(),c.BG(s,i,e,n,r,h,o,a,u,l);const d=f.zI;d[0]=r,d[1]=h,s.Uo(d,2),d[6]=a,d[7]=u,i.Uo(d,12);const p=f.BI;n.Uo(p,0);const m=p[1];p[1]=p[3],p[3]=m,e.Uo(f.UI,0),f.kI=l,f.FI=o,c.qC.dG()?f.jI=t?t.lC():null:f.jI=null,this.uA=0}EL(t){const s=this.rA;if(0===t.length||s.LG(t))return;const i=this.VA();i.SN(),s.PG(t),Ec.xh(i.WI,t),this.uA=0}DL(t,s,i,e){this.VA().uN(t,s,i,e),this.uA=0}Nl(t){this.VA().aN(t),this.uA=0}_L(){}NT(){super.NT(),this._C.flush()}AL(){this.B_&&this.lA&&this.lA.mC()&&(this.VA().FN(this.W_),this.uA=0)}LL(t){t=!!t,this.W_!==t&&this.B_&&(this.W_=t,this.VA().zN(t),this.uA=0)}OL(){return this.W_}sC(){return this.J_}iC(){return this.U_}RL(t){if(t=!!t,this.U_&&this.Q_!==t){if(t&&this.OL())throw new Error("depth still enabled");this.Q_=t,this.VA().UN(t),this.uA=0}}PL(t,s,i,e,n=0){t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),this.gA.Za(t,s,i,e)||(this.gA.Wa(t,s,i,e),s=(n||this.ML(this.kL())[1])-s-e,this.VA().ZN(!0,t,s,i,e),this.uA=0)}FL(){-1!==this.gA.$a()&&(this.gA.set(0,0,-1,-1),this.VA().ZN(!1,0,0,0,0),this.uA=0)}jL(){for(const t of this.RA)t.G_(this.Aw)}KD(){return!this._C||this._C.isContextLost()||this.CA}Ob(){super.jw(),Ec.OM.Zv.Ob(),Ec.OM.jx.Ob(),Ec.OM.UT.Ob();for(const t of this.RA)t.Nl();this.xA=[],this.i_=null,this.GA=null,this.NA=null,this.IA=null,this.EA=null,this.DA=null,this._A=null,this.AA=null,this.LA=0,this.bA="(unavailable)",this.vA="(unavailable)",this.rA=null,this.hA=null,this.J_=null;for(const t of this.ww.values())t.Ob()}async Rb(){this.CA=!0,await this.Fw(),this.CA=!1;for(const t of this.ww.values())t.Rb(this);this.bD(this.Ng,this.Eg,!0)}zL(t,s){if(this.KD())throw new Error("context lost");this.ET();const i=Ec.Qn(Ec.OM.Zv,this);return i.ux(t,s),i}async BL(t,s){if(this.KD())throw new Error("context lost");if(s=Object.assign({},s),Ec.Di.ImageBitmapOptions){let i=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});const e=s.Bv&&"clamp-to-edge"!==s.Bv||s.Uv&&"clamp-to-edge"!==s.Uv,n=Ec.wr(i.width)&&Ec.wr(i.height);return this.gx()||n||!e?s.Hv=!1:Ec.Di.Oi?(i=await createImageBitmap(t,{premultiplyAlpha:"premultiply",resizeWidth:Ec.Sr(i.width),resizeHeight:Ec.Sr(i.height)}),s.Hv=!1):i=await createImageBitmap(t,{premultiplyAlpha:"none"}),await Ec.ff((()=>this.zL(i,s)))}if(t instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const s=await Ec.uo(t);t=s}return await Ec.ff((()=>this.zL(t,s)))}tC(t,s,i){this.ET();const e=Ec.Qn(Ec.OM.Zv,this);return e.Tx(t,s,i),e}XD(t,s,i){this.ET(),s.Gx(t,i)}nC(t){t&&(t._x(),t.Ax()>0||(this.ET(),t===this.dA&&(this._C.bindTexture(this._C.TEXTURE_2D,null),this.dA=null),t===this.wN&&(this._C.activeTexture(this._C.TEXTURE1),this._C.bindTexture(this._C.TEXTURE_2D,null),this._C.activeTexture(this._C.TEXTURE0),this.wN=null),t.Ix()))}UL(t){let s=this.Ng,i=this.Eg,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height&&(i=Math.floor(t.height),e=!1)),s<=0||i<=0)throw new Error("invalid size");this.ET();const n=Ec.Qn(Ec.OM.jx,this);return n.Xx(s,i,Object.assign({kx:e},t)),this.lA=null,this.RI.hC=null,this.RI.oC=null,n}WL(t,s=!0){t!==this.lA&&(t&&t.yC()&&t.eC(this.Ng,this.Eg),this.VA().hN(t),this.lA=t,this.uA=0,s&&this.YA())}kL(){return this.lA}ML(t){return t?[t.Vy(),t.ig()]:[this.Ng,this.Eg]}QL(t,s="stretch"){this.s_<2||this.lA&&this.lA.gC()>0?(this.lL(),this.iL(),this.JL(t,s)):(this.VA().xN(t,this.lA,s),this.uA=0)}JL(t,s="stretch"){const i=t.lC();if(!i)throw new Error("not a texture-backed render target");this.nL(i),this.gL(s,i)}VL(t){this.s_<2||(this.VA().bN(t.aC()),this.uA=0)}YL(t){this.WL(null),this.ET();const s=t.lC();s===this.dA&&(this._C.bindTexture(this._C.TEXTURE_2D,null),this.dA=null),s===this.wN&&(this._C.activeTexture(this._C.TEXTURE1),this._C.bindTexture(this._C.TEXTURE_2D,null),this._C.activeTexture(this._C.TEXTURE0),this.wN=null),t.Ix()}async bC(t,s,i){this.ET();const e=this.lA;let n,r,h;t?(n=t.Vy(),r=t.ig(),h=t.aC()):(n=this.Vy(),r=this.ig(),h=null);let o=0,a=0,u=n,l=r;if(i){o=Ec.Zn(Math.floor(i.Ka()),0,n-1),a=Ec.Zn(Math.floor(i.Xa()),0,r-1);let t=i.width();t=0===t?n-o:Ec.Zn(Math.floor(t),0,n-o);let s=i.height();s=0===s?r-a:Ec.Zn(Math.floor(s),0,r-a),u=t,l=s,a=r-(a+l)}const c=this._C;c.bindFramebuffer(c.FRAMEBUFFER,h);const f=()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.lA=null,this.RI.hC=null,this.RI.oC=null,this.WL(e)};let d;if(!s&&this.yx()>=2){c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const t=c.createBuffer(),s=u*l*4,i=c.PIXEL_PACK_BUFFER;c.bindBuffer(i,t),c.bufferData(i,s,c.STREAM_READ),c.readPixels(o,a,u,l,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(i,null),f();const e=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);await this.EC((()=>c.getSyncParameter(e,c.SYNC_STATUS)===c.SIGNALED)),c.deleteSync(e),d=new ImageData(u,l),c.bindBuffer(i,t),c.getBufferSubData(i,0,new Uint8Array(d.data.buffer),0,s),c.bindBuffer(i,null),c.deleteBuffer(t)}else d=new ImageData(u,l),c.readPixels(o,a,u,l,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}HL(){this.LL(!0),this.VA().QN(),this.uA=0,this.MA=1}qL(){this.LL(!1),this.VA().VN(),this.uA=0,this.MA=2}ZL(){return 2===this.MA}KL(){this.LL(!0),this.VA().HN(),this.uA=0,this.MA=0}XL(t){this.$L()&&(this.VA().GN(t),this.uA=0)}tO(t){this.$L()&&(this.VA().EN(t),this.uA=0)}EC(t){const s=new Promise((s=>Bc.add({resolve:s,E_:t})));return-1===Uc&&(Uc=self.requestAnimationFrame(Nc)),s}kT(){return this.Ng*this.Eg*(this.P_.alpha?4:3)}FT(){let t=0;for(const s of Ec.OM.jx.vC())s.lC()||(t+=s.Ox());return t}jT(){let t=0;for(const s of Ec.OM.Zv.Rx())t+=s.Ox();return t}sO(){return this.k_}yx(){return this.s_}iO(){return"webgl"+this.yx()}gx(){return this.yx()>=2}lx(){return this.wA}eO(){return this.SA}nO(){return this.TA}rO(){return this.bA}hO(){return this.vA}oO(){if(this.yx()>=2)return"webgl2";{const t=[];return this.DA&&t.push("EXT_frag_depth"),this._A&&t.push("OES_standard_derivatives"),this.AA&&t.push("EXT_shader_texture_lod"),t.length>0?"webgl1:"+t.join(","):"webgl1:none"}}aO(){return this.xA}$L(){return!!this.i_}e_(){return this.i_}NC(){return this.GA}FA(){return!!this.NA}xx(){return this.IA}Cx(){return this.LA}v_(t){this.RA.add(t)}x_(t){this.RA.delete(t)}y_(){return this.PA}mx(){return this._C}kA(t){this.AS([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}uO(){return this.BT()}}}{const Wc=self.Gs,Qc={lO:null,cO:null,fO:null,getTime:null,dO:null};Wc.OM.pO=class{constructor(t){t=Object.assign({},Qc,t),this.mO=t.lO,this.yO=t.cO,this.gO=t.fO,this.MO=t.getTime,this.wO=t.dO,this.SO=null,this.TO=new Set}bO(t){this.TO.add(t)}vO(t){this.TO.delete(t)}Ob(){this.SO=null;for(const t of this.TO)t.Ob()}xO(t){return this.mO?this.mO(t):[t.Vy(),t.ig()]}kL(t){return this.yO(t)}CO(t,s){this.gO(t,s)}GO(){return this.MO()}Ap(t){this.wO(t)}IO(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.SO||this.SO.Vy()===s&&this.SO.ig()===i||(t.nC(this.SO),this.SO=null),null===this.SO&&(this.SO=t.zL(null,{width:s,height:i,Wv:"nearest",Vv:!1})),this.SO}}}{const Jc=self.Gs,Vc=(self.assert,self.hs.fs),Yc=Jc.Qn(Jc.Rect),Hc=Jc.Qn(Jc.Rect),qc=Jc.Qn(Jc.Rect),Zc=Jc.Qn(Jc.Rect),Kc=Vc.create(),Xc=Vc.create(),$c={NO:null,EO:null,DO:null,_O:!1},tf={AO:null,LO:!1,OO:!1,RO:!1,PO:!1,kO:!1,FO:!1};Jc.OM.jO=class{constructor(t,s){s=Object.assign({},$c,s),this.Bp=t,this.zO=s.NO,this.BO=s.EO,this.UO=s.DO,this.WO=null,this.QO=[],this.JO=[],this.VO=[],this.YO=!1,this.Nb=0,this.HO=!1,this.qO=!1,this.ZO=!1,this.KO=!1,this.XO=!1,this.$O=!1,this.j_=!1,this.tR=!1,this.sR=!1,this.iR=!1,this.eR=!1,this.nR=!1,this.rR=0,this.hR=[null,null,null],this.oR=!!s._O,this.aR=0,this.uR=0,this.lR=0,this.cR=0,this.fR=null,this.dR=null,this.pR=Jc.Qn(Jc.Rect),this.mR=Jc.Qn(Jc.Rect),this.yR=Jc.Qn(Jc.Rect),this.gR=Jc.Qn(Jc.Rect),this.MR=Jc.Qn(Jc.Rect),this.wR=1,this.SR=1,this.TR=0,this.bR=0,this.vR=null,this.xR=null,this.CR=0,this.GR=0,this.IR=0,this.NR=0,this.ER=!1,this.Hx=Vc.create(),this.DR=Vc.create(),this.Bp.bO(this)}Jn(){this.Bp.vO(this),Jc.wh(this.VO),Jc.wh(this.QO),Jc.wh(this.JO),this.fR=null,this.dR=null,this.zO=null,this.BO=null,this.UO=null}Ob(){this.YO=!0,Jc.wh(this.VO),Jc.wh(this.QO),Jc.wh(this.JO)}_R(){return this.YO}AR(t,s){if(s=Object.assign({},tf,s),Jc.wh(this.VO),this.aR=0,this.uR=0,this.HO=!1,this.qO=!1,this.ZO=!1,this.KO=!1,this.XO=!1,this.$O=!1,this.rR=0,this.nR=!!s.PO,this.eR=!!s.FO,this.YO=!1,Jc.xh(this.QO,t),0===t.length)return;if(s.AO){if(s.AO.length!==t.length)throw new Error("incorrect indexMap length");Jc.xh(this.JO,s.AO)}else{Jc.wh(this.JO);for(let s=0,i=t.length;s<i;++s)this.JO.push(s)}for(const s of t)this.aR+=s.fb(),this.uR+=s.pb(),s.wb()&&(this.HO=!0),s.Tb()&&(this.qO=!0),s.Sb()&&(this.ZO=!0),s.mb()&&(this.KO=!0),s.Cb()&&(this.XO=!0);this.$O=this.LR(t[0].lb());const i=this.OR(t[0],s),e=this.RR(t.at(-1),s);if(1===t.length&&!i&&!e)return void(this.iR=!0);this.iR=!1;let n=0;i&&(this.rR=1,this.VO.push(Jc.Qn(Jc.OM.jO.kR.PR,this,-1,1)),n=1);for(let s=0,r=t.length;s<r;++s)if(0!==s||i){let t=1===n?2:1;s!==r-1||e||(t=0),this.rR=Math.max(this.rR,t),this.VO.push(Jc.Qn(Jc.OM.jO.kR.FR,this,n,t,s)),n=t}else this.rR=1,this.VO.push(Jc.Qn(Jc.OM.jO.kR.jR,this,-1,1,s)),n=1;e&&this.VO.push(Jc.Qn(Jc.OM.jO.kR.zR,this,n,0))}OR(t,s){return!!(s.LO||t.yb()||s.RO&&!t.Mb()||t.Tb()&&!this.eR||0!==this.aR||0!==this.uR)||(t.lb().PT()?t.Sb()&&(s.kO||s.PO)||t.bb()&&s.PO:t.Sb()&&!this.$O&&s.kO)}RR(t,s){return!!s.OO||(t.lb().PT()?t.Sb()||t.mb():(t.Sb()||t.mb())&&this.BR())}LR(t){return t.tS()&&this.ZO&&!this.KO}UR(t,s,i){t.tS()&&null===s&&(s=t.WR()),this.vR=s,this.fR=i.QR||null,this.dR=i.JR||null,this.Nb=i.VR||0,this.wR=i.devicePixelRatio||1,this.SR=i.YR||1,this.TR=i.HR||0,this.bR="number"==typeof i.time?i.time:this.Bp.GO(),this.j_=!1,t.qA(),this.HO&&this.qR();let e=!1;if(this.ZR()&&(this.KR(t,i),e=!0,this.xR=this.Bp.IO(t,this.lR,this.cR),Yc.m(this.mR),Yc.wu(),t.tS()&&t.XR(this.vR),t.$R(this.vR.lC(),this.xR,Yc.Ka(),Yc.Xa(),Yc.width(),Yc.height())),this.iR)this.tP(t,i);else if(e||this.KR(t,i),0!==this.yR.width()||0!==this.yR.height()){t.aL(),t.iL(),t.zS(0),t.US(0),this.WO=i.sP||null,this.CR=i.iP||0,this.GR=i.eP||0,this.IR=i.nP||0,this.NR=i.rP||0,this.ER=!!i.hP,this.oP(t),this.hR[0]=s,this.hR[1]=this.rR>=1?this.aP():null,this.hR[2]=2===this.rR?this.aP():null;for(const s of this.VO){const i=this.uP(s.lP()),e=this.uP(s.cP());t.tS()?s.fP(t,i,e):s.dP(t,i,e)}t.nL(null),this.hR[1]&&this.pP(this.hR[1]),this.hR[2]&&this.pP(this.hR[2]),this.hR.fill(null),this.mP(t),this.vR=null,this.xR=null,this.fR=null,this.dR=null,this.WO=null}}KR(t,s){const[i,e]=this.Bp.xO(t);this.yP(t,i,e),this.gP(s)}yP(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.lR===s&&this.cR===i||this.MP(t,s,i,0,0,this.Hx,this.DR),this.lR=s,this.cR=i}MP(t,s,i,e,n,r,h){const o=s/2+e,a=i/2+n;t.$w(r,s/i);const u=t.eS(o,a,t.zw(i),o,a,0,i);Vc.m(h,u)}gP(t){this.pR.m(t.wP),t.SP?this.mR.m(t.SP):this.mR.set(0,0,this.lR,this.cR),this.yR.m(this.mR),this.yR.Mt(this.lR,this.cR);const s=this.SR*this.wR;this.mR.lu(this.aR*s,this.uR*s),this.MR.m(this.mR),this.MR.Mt(this.lR,this.cR),this.mR.Su(0,0,this.lR,this.cR),this.gR.m(this.mR),this.gR.Mt(this.lR,this.cR)}oP(t){if(this.tR=t.OL(),this.sR=t.ZL(),this.eR)t.LL(!1),this.qO&&t.RL(!0);else{if(Yc.m(this.mR),t.PT()){const t=this.SR*this.wR;Yc.lu(Math.max(this.aR,1)*t,Math.max(this.uR,1)*t),Yc.wu(),Yc.Zn(0,0,this.lR,this.cR)}else Yc.wu();t.PL(Yc.Ka(),Yc.Xa(),Yc.width(),Yc.height(),this.cR)}}TP(t){t.iL(),this.eR||(this.sR&&t.KL(),t.LL(!1),this.qO&&t.RL(!0)),t.tS()&&t.bP(!0)}mP(t){t.RL(!1),this.sR&&t.qL(),t.LL(this.tR),this.eR||t.FL(),t.tS()&&t.bP(!1),this.j_=t.ZA()}vP(){this.MR.Zn(0,0,1,1)}uP(t){return t<0?null:this.hR[t]}aP(){return this.Bp.kL(this)}xP(){return this.vR}pP(t){this.Bp.CO(t,this)}CP(t){return this.QO[t]}GP(t){this.WO?this.WO(this,t,(()=>this.zO(t,this))):this.zO(t,this),this.iR||this.TP(t)}IP(t){if(this.eR)return!0;if(0!==this.CR||0!==this.GR||0!==this.IR||0!==this.NR)return!1;const[s,i]=t.ML(t.kL());return s===this.lR&&i===this.cR}NP(t,s){let i=this.Hx,e=this.DR;if(s&&!this.IP(t)){let s,n;i=Kc,e=Xc,0!==this.IR&&0!==this.NR?[s,n]=[this.IR,this.NR]:[s,n]=t.ML(t.kL()),this.MP(t,s,n,this.CR,this.GR,i,e),this.eR||t.FL()}t.UA(i),t.HA(e)}qR(){this.Bp.Ap(this)}EP(t,s){return this.UO(this.JO[t],s)}DP(t,s){let i=this.MR,e=this.gR,n=this.yR;t.PT()&&(Hc.m(i),Hc.du(1),i=Hc,qc.m(e),qc.du(1),e=qc,Zc.m(n),Zc.du(1),n=Zc),this._P(t,s,e,n,i,1/this.lR,1/this.cR)}AP(t,s){let i=this.gR,e=this.yR,n=1/this.lR,r=1/this.cR;if(this.BO){let{LP:t,OP:s,RP:h}=this.BO(this.fR);t||(Yc.set(0,0,0,0),t=Yc),s||(s=this.lR),h||(h=this.cR),i=t,e=t,n=1/s,r=1/h}else t.PT()&&(qc.m(i),qc.du(1),i=qc,Zc.m(e),Zc.du(1),e=Zc);let h=this.MR;t.PT()&&(h=Hc,h.m(this.MR),h.du(1)),this._P(t,s,i,e,h,n,r),t.tS()&&this.XO&&t.PP(this.nR)}kP(t){return this.ZO?t.tS()?this.ZR()?this.xR:this.vR.lC():this.vR:null}_P(t,s,i,e,n,r,h){t.NL(this.kP(t),n,i,e,this.pR,r,h,this.wR,this.SR,this.TR,this.bR),t.EL(this.EP(s,t))}tP(t,s){const i=this.QO[0],e=t.OL(),n=i.Tb();n&&(t.LL(!1),t.RL(!0),this.MR.set(0,0,1,1),this.yR.set(0,0,1,1)),t.uS(i),t.Ab(this.Nb),t.WL(this.vR);let r=0,h=1;if(this.yR.set(0,0,1,1),i.bb()&&this.BO){const{LP:t,OP:s,RP:i}=this.BO(this.fR);t&&this.yR.m(t),r=Number.isFinite(s)?1/s:0,h=Number.isFinite(i)?1/i:0}else{const[s,i]=this.Bp.xO(t);r=1/s,h=1/i}s.wP?this.pR.m(s.wP):this.pR.set(0,0,0,0),t.NL(this.kP(t),this.MR,this.yR,this.yR,this.pR,r,h,this.wR,this.SR,this.TR,this.bR),t.EL(this.EP(0,t)),t.tS()&&this.XO&&t.PP(this.nR),t.zS(0),this.GP(t),n&&(t.RL(!1),t.LL(e))}ZR(){return this.$O}BR(){return!this.$O}FP(){return this.ZO}jP(){return!!this.iR&&!this.ZR()}zP(){return this.eR}BP(){return this.fR}UP(){return this.dR}WP(){return this.Nb}QP(){return this.ER}ZA(){return this.j_}JP(){return this.mR}VP(){return this.gR}YP(){return this.oR}async HP(t,s,i){}}}self.Gs.OM.jO.kR=class{constructor(t,s,i,e=-1){this.qP=t,this.ZP=s,this.KP=i,this.IM=e}XP(){return this.qP}lP(){return this.ZP}cP(){return this.KP}$P(){return this.IM}EG(){return this.XP().CP(this.$P())}dP(t,s,i){}fP(t,s,i){}};{const sf=self.Gs;sf.OM.jO.kR.PR=class extends sf.OM.jO.kR{constructor(t,s,i,e){super(t,s,i,e)}dP(t,s,i){const e=this.XP();t.aL(),t.aS(),t.WL(i,e.QP()),t.DL(0,0,0,0),e.GP(t),e.vP()}fP(t,s,i){const e=this.XP();t.aL(),t.aS(),t.WL(i,!1),t.DL(0,0,0,0),e.GP(t),e.vP()}}}{const ef=self.Gs,nf=ef.Qn(ef.Rect),rf=ef.Qn(ef.Iu);ef.OM.jO.kR.zR=class extends ef.OM.jO.kR{constructor(t,s,i,e){super(t,s,i,e)}dP(t,s,i){const e=this.XP();t.aS(),t.WL(i),e.NP(t,!0),t.Ab(e.WP()),t.nL(s.lC()),rf.Hu(e.JP()),nf.m(e.VP()),nf.du(1),t.$S(rf,nf),e.YP()&&t.VL(s)}fP(t,s,i){const e=this.XP();t.aS(),t.WL(i,!1),e.IP(t)?rf.Hu(e.VP()):(t.bP(!1),e.NP(t,!0),rf.Hu(e.JP())),t.tk(null),t.Ab(e.WP()),t.nL(s.lC()),e.zP()?t.gL():t.$S(rf,e.VP())}}}{const hf=self.Gs;hf.OM.jO.kR.jR=class extends hf.OM.jO.kR{constructor(t,s,i,e){super(t,s,i,e)}dP(t,s,i){const e=this.XP();t.WL(i,e.QP()),t.DL(0,0,0,0),t.lL(),t.uS(this.EG()),e.AP(t,this.$P()),e.GP(t),e.vP()}fP(t,s,i){const e=this.XP();t.WL(i,!1),t.DL(0,0,0,0),t.lL(),t.uS(this.EG()),e.AP(t,this.$P()),e.GP(t),e.vP()}}}{const of=self.Gs,af=of.Qn(of.Rect),uf=of.Qn(of.Iu);of.OM.jO.kR.FR=class extends of.OM.jO.kR{constructor(t,s,i,e){super(t,s,i,e)}dP(t,s,i){const e=this.XP();t.WL(i);const n=0===this.cP();n?t.Ab(e.WP()):(t.DL(0,0,0,0),t.lL()),t.uS(this.EG()),e.DP(t,this.$P()),t.nL(s.lC()),e.NP(t,n),uf.Hu(e.JP()),af.m(e.VP()),af.du(1),t.$S(uf,af),e.YP()&&t.VL(s)}fP(t,s,i){const e=this.XP();t.WL(i,!1),0===this.cP()?(t.Ab(e.WP()),t.tk(null),e.IP(t)?uf.Hu(e.VP()):(t.bP(!1),e.NP(t,!0),uf.Hu(e.JP()))):(t.DL(0,0,0,0),t.lL(),uf.Hu(e.VP())),t.uS(this.EG()),e.DP(t,this.$P()),t.nL(s.lC()),e.zP()?t.gL():t.$S(uf,e.VP())}}}{let lf=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]};0;const cf=self.Gs,ff=self.ks;let df=null;const pf=new Set,mf=[],yf=[];let gf=!1,Mf=!1,wf=!1;const Sf=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.sk=class{constructor(t){df=t,Object.defineProperties(this,{ik:{value:df.nk().ek(),writable:!1},rk:{value:df.ak().hk(),writable:!1},uk:{value:{},writable:!1},lk:{value:{},writable:!1},ck:{value:df.fk(),writable:!1},dk:{value:df.pk(),writable:!1},mk:{value:df.yk(),writable:!1},gk:{value:df.Mk(),writable:!1},wk:{value:new Date(df.Sk()),writable:!1},storage:{value:new self.Tk(df),writable:!1},bk:{value:df.vk(),writable:!1},xk:{value:df.Ck(),writable:!1},Gk:{value:df.Ik(),writable:!1},Wv:{value:df.Nk(),writable:!1},Ek:{value:df.Dk(),writable:!1},_k:{value:new self.Ak(t),writable:!1},Lk:{value:new self.Ok(t),writable:!1}}),df.Rk().addEventListener("keydown",(t=>{pf.has(t.key)?t.stopPropagation():pf.add(t.key)})),df.Rk().addEventListener("keyup",(t=>pf.delete(t.key))),df.gf().addEventListener("window-blur",(()=>pf.clear())),df.vk()&&(self.alert=t=>(gf||(gf=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}Pk(t){Object.defineProperties(this.uk,t)}kk(t){Object.defineProperties(this.lk,t)}addEventListener(t,s){df.Rk().addEventListener(t,s)}removeEventListener(t,s){df.Rk().removeEventListener(t,s)}Fk(t,...s){ff.ue(t);const i=df.jk(),e=i.zk(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.Cl())return e.Bk();if(s.length<e.Uk())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.Uk()} expected)`);const n=e.Wk();let r=n.Qk();const h=i.Jk();if(h){r=r.slice(0);const t=new Set(r);for(const s of h.Qk())t.has(s)||(r.push(s),t.add(s));for(const s of i.Vk())t.has(s)||(r.push(s),t.add(s))}return n.Yk(r,e.Hk(),e.qk(),e.Bk(),...s)}Zk(t){const s=df.Xk().Kk();if(!s)throw new Error("not in a function which returns a value");switch(s.$k()){case 1:"number"==typeof t&&s.tF(t);break;case 2:"string"==typeof t&&s.tF(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.tF(t)}}signal(t){ff.ue(t),df.jk().sF(t)}iF(t){return ff.ue(t),df.jk().eF(t)}nF(){return[df.Ck(),df.Ik()]}get rF(){return df.hF()}get oF(){return df.aF()}get uF(){return df.lF()}get cF(){return df.fF()}get dF(){return df.pF()}get mF(){return df.yF()}get gF(){return df.MF()}set gF(t){ff.re(t),df.wF(t)}get SF(){return Mf||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),Mf=!0),df.TF()}get framesPerSecond(){return df.TF()}get bF(){return df.vF()}get xF(){return df.CF()}get GF(){return df.IF()}get NF(){return df.EF()}set NF(t){if(!Sf.has(t))throw new Error("invalid framerate mode");df.DF(t)}get _F(){return df.AF()}set _F(t){ff.re(t),df.LF(t)}get OF(){return df.RF()}set OF(t){df.PF(t)}get kF(){return df.nk().FF()}get jF(){return df.nk().zF()}random(){return df.BF()}get layout(){const t=df.UF();if(!t)throw new Error("no layout is running - make sure a layout is loaded before accessing");return t.WF()}QF(t){const s=df.JF();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.VF(t),!i)throw new Error("invalid layout");return i.WF()}YF(){return df.JF().HF().map((t=>t.WF()))}qF(t){const s=df.JF();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.VF(t),!i)throw new Error("invalid layout");s.ZF()||s.KF(i)}get keyboard(){const t=df.XF().keyboard;if(!t)throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first");return t}get $F(){const t=df.XF().$F;if(!t)throw new Error("runtime.mouse used but Mouse object missing - add it to your project first");return t}get tj(){const t=df.XF().tj;if(!t)throw new Error("runtime.touch used but Touch object missing - add it to your project first");return t}get sj(){const t=df.XF().sj;if(!t)throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first");return t}ij(t,s){ff.ue(t),ff.ue(s),df.ej(t,s)}nj(t){ff.re(t);const s=df.rj(t);return s?s.hj():null}oj(t,s){ff._e(s);const i=df.aj();for(const s of t){const t=df.uj(s),i=t.lj();mf.push([i.cj().$P(),i.fj()]),yf.push(t)}if(0===mf.length)return;mf.sort(lf),yf.sort(((t,i)=>s(t.hj(),i.hj())));let e=!1;for(let t=0,s=mf.length;t<s;++t){const s=yf[t],n=i.dj(mf[t][0]),r=mf[t][1],h=n.pj();h[r]!==s&&(h[r]=s,s.lj().mj(n,!0),n.yj(s),e=!0)}e&&df.gj(),cf.wh(mf),cf.wh(yf)}async Mj(t,s){wf||(console.warn("IRuntime.createWorker() is deprecated. All modern browsers now support nested workers so this method is no longer needed."),wf=!0);const i=new MessageChannel,e=i.port1,n=i.port2;return await df.wj("runtime","script-create-worker",{url:t,opts:s,port2:n},[n]),e}alert(t){return df.wj("runtime","alert",{message:t+(df.vk()?" [via Web Worker]":"")})}Sj(t){return ff.re(t),df.Tj(t)}bj(t){df.vj(t)}async xj(t,s,i){ff.le(t),ff.se(s),ff.je(i,DOMRect),i||(i=new DOMRect(0,0,0,0));const e=df.Cj();if(!e)return;df.gj();const n=await e.Gj(t||"image/png",s,i.x,i.y,i.width,i.height);return await df.Ij(cf._j.Dj.Ej.Nj,null),n}}}{const Tf=self.Gs;self.ks;let bf=null;self.Aj=class{constructor(t){bf=t,Object.defineProperties(this,{Lj:{value:!0,writable:!1}})}Oj(t){const s=self.Pj.Rj(t);if(!s)throw new Error("invalid IImageInfo");s.kj(bf.Fj())}jj(t){return bf.so(t)}zj(t){return bf.io(t)}Bj(t){return bf.eo(t)}Uj(t){return bf.no(t)}Wj(t){return bf.Qj(t)}Jj(t){return"flat"===bf.Vj()&&Tf.Kh(t)&&(t=t.toLowerCase()),bf.Yj(t)}get Hj(){return bf.qj()}async Zj(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}Kj(...t){return bf.Xj(...t)}$j(t){return bf.tz(t)}sz(t){return bf.iz(t)}}}{const vf=self.Gs,xf=self.ks;let Cf=null;self.ez=class{constructor(t){Cf=t,Object.defineProperties(this,{runtime:{value:Cf.Fj(),writable:!1}})}nz(t,s){const i=Cf.Fj(),e=i.uj(t),n=i.uj(s);return Cf.rz(e,n)}hz(t,s){const i=Cf.Fj(),e=i.uj(t);for(const t of s){const s=i.uj(t);if(Cf.rz(e,s))return t}return null}oz(t){const s=Cf.Fj().uj(t),i=Cf.az(s);return i?i.hj():null}uz(t,s){if(xf.re(t),xf.re(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");Cf.lz(t,s)}cz(){return Cf.fz()}dz(t,s){const i=Cf.Fj();let e;e=Array.isArray(t)?t.map((t=>i.pz(t))):[i.pz(t)];const n=vf.Rect.qa(s),r=[];return Cf.mz(null,e,n,r),r.map((t=>t.hj()))}}}{const Gf=self.Gs;self.ks;let If=null;const Nf=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),Ef=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),Df=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.Ak=class{constructor(t){If=t,Object.defineProperties(this,{yz:{value:Gf.Ks.hi,writable:!1},os:{value:Nf.get(Gf.Ks.Xs)||"unknown",writable:!1},gz:{value:Gf.Ks.$s,writable:!1},browser:{value:Ef.get(Gf.Ks.ti)||"unknown",writable:!1},Mz:{value:Gf.Ks.si,writable:!1},wz:{value:Df.get(Gf.Ks.ei)||"unknown",writable:!1}})}get Sz(){let t=If.Tz();return If.bz()?t="nwjs":If.vz()?t="windows-webview2":"cordova"===t?t="Android"===Gf.Ks.Xs?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get DI(){return If.Cj().xz()}get Cz(){return If.Cj().Gz()}get Iz(){return If.Cj().Nz()}get Ez(){return If.Cj().Dz()}get _z(){return If.Cj().Az()}get Lz(){return If.Cj().Oz()}get Rz(){return If.Cj().Pz()}get kz(){return If.Cj().Fz()}get devicePixelRatio(){return If.jz()}}}{self.Gs;const _f=self.ks;self.Tk=class{constructor(t){this.zz=t.Bz()}getItem(t){return _f.ue(t),this.zz.getItem(t)}setItem(t,s){return _f.ue(t),this.zz.setItem(t,s)}removeItem(t){return _f.ue(t),this.zz.removeItem(t)}clear(){return this.zz.clear()}keys(){return this.zz.keys()}}}{const Af=self.Gs,Lf=(self.ks,Af.Is());self.Uz=class{#t;constructor(){const t=Af.Qz.Wz(Lf);this.#t=t,Object.defineProperties(this,{runtime:{value:t.Fj().Jz(),writable:!1},id:{value:t.Vz(),writable:!1},Yz:{value:t.qz(),writable:!1},Zz:{value:t.Kz(),writable:!1},Xz:{value:t.$z(),writable:!1},tB:{value:t.sB(),writable:!1},iB:{value:t.eB(),writable:!1},nB:{value:t.rB(),writable:!1},hB:{value:t.oB(),writable:!1},aB:{value:t.uB(),writable:!1}}),t.Fj().lB(this,t)}static cB(t){if(!t)return null;const s=Af.Qz.fB(t);return s?s.dB():null}pB(){return this.#t.yB().mB()}gB(){return this.#t.MB().hj()}}}{const Of=globalThis.Gs,Rf=globalThis.ks,Pf=Of.Is();globalThis.wB=class{#t;constructor(){const t=Of.Qz.Wz(Pf);this.#t=t,Object.defineProperties(this,{name:{value:t.Nc(),writable:!1},runtime:{value:t.Fj().Jz(),writable:!1},SB:{value:t.TB().dB(),writable:!1}}),t.Fj().lB(this,t)}addEventListener(t,s){Rf.ue(t),Rf._e(s),this.#t.Rk().addEventListener(t,s)}removeEventListener(t,s){Rf.ue(t),Rf._e(s),this.#t.Rk().removeEventListener(t,s)}bB(){return[...this.vB()]}xB(){return Of.jh(this.vB())}CB(){return[...this.GB()]}IB(){return Of.jh(this.GB())}NB(t){const s=this.#t,i=s.Fj().EB(t),e=s.DB(i);return e?e.hj():null}*vB(){for(const t of this.#t._B())yield t.hj()}*GB(){for(const t of this.#t.LB().AB())yield t.hj()}}}{const kf=globalThis.Gs,Ff=globalThis.ks,jf=kf.Is();globalThis.OB=class extends globalThis.wB{#t;constructor(){super();const t=kf.Qz.Wz(jf);this.#t=t}RB(t){Ff._e(t);const s=this.#t;if(s.PB()>0)throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.kB(t)}Ci(t,s,i,e,n){if(Ff.te(s),Ff.te(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#t,h=r.Fj(),o=h.UF().cj(t);if(!o)throw new Error("invalid layer");const a=h.jB(r,o,s,i,e,n);e&&o.zB(a);const u=h.jk();return u.BB(!0),a.UB(),u.BB(!1),u.WB()||h.JF().QB()||h.JB(),a.hj()}VB(){return this.#t.YB().map((t=>t.mB()))}*HB(){for(const t of this.#t.YB())yield t.mB()}qB(t){return Ff.Fe(t,globalThis.ZB),t.KB(this)}}}{const zf=globalThis.Gs,Bf=globalThis.ks,Uf=globalThis.OB,Wf=zf.Is();globalThis.ZB=class extends globalThis.wB{#t;constructor(){super();const t=zf.Qz.Wz(Wf);this.#t=t}XB(){return this.#t.$B().map((t=>t.mB()))}*tU(){for(const t of this.#t.$B())yield t.mB()}KB(t){Bf.Fe(t,Uf);const s=this.#t,i=s.Fj().pz(t);return s.sU(i)}}}{self.Gs;const Qf=self.ks,Jf=new WeakMap,Vf=["above","below","top-sublayer","bottom-sublayer"];self.iU=class{constructor(t){Jf.set(this,t);const s=[],i=t.eU(),e=i.nU().length;for(let t=0;t<e;++t)s.push(new self.rU(i,t));Object.defineProperties(this,{name:{value:t.Nc(),writable:!1},index:{value:t.$P(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){Qf.ue(t),Qf._e(s),Jf.get(this).Rk().addEventListener(t,s)}removeEventListener(t,s){Qf.ue(t),Qf._e(s),Jf.get(this).Rk().removeEventListener(t,s)}get width(){return Jf.get(this).Vy()}set width(t){Qf.re(t),Jf.get(this).$y(t)}get height(){return Jf.get(this).ig()}set height(t){Qf.re(t),Jf.get(this).Yy(t)}hU(t,s){Qf.re(t),Qf.re(s);const i=Jf.get(this);i.$y(t),i.Yy(s)}getSize(){const t=Jf.get(this);return[t.Vy(),t.ig()]}set scale(t){Qf.re(t),Jf.get(this).oU(t)}get scale(){return Jf.get(this).aU()}set angle(t){Qf.re(t),Jf.get(this).uU(t)}get angle(){return Jf.get(this).lU()}set scrollX(t){Qf.te(t),Jf.get(this).cU(t)}get scrollX(){return Jf.get(this).fU()}set scrollY(t){Qf.te(t),Jf.get(this).dU(t)}get scrollY(){return Jf.get(this).pU()}scrollTo(t,s){Qf.te(t),Qf.te(s);const i=Jf.get(this);i.cU(t),i.dU(s)}mU(){const t=Jf.get(this);return[t.fU(),t.pU()]}yU(t){const s=Jf.get(this);let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return i=s.cj(t),i?i.gU():null}MU(){return Jf.get(this).wU().map((t=>t.gU()))}*SU(){for(const t of Jf.get(this).SU())yield t.gU()}TU(t,s,i){const e=Jf.get(this),n=self.bU;Qf.ue(t),Qf.je(s,n);const r=s?e.Fj().vU(s):null,h=Vf.indexOf(i);if(h<0)throw new Error("invalid location");e.xU(t,r,h)}CU(t,s,i){const e=Jf.get(this),n=e.Fj(),r=self.bU;Qf.Fe(t,r);const h=n.vU(t);if(!h)throw new Error("invalid layer");Qf.je(s,r);const o=s?n.vU(s):null,a=Vf.indexOf(i);if(a<0)throw new Error("invalid location");e.GU(h,o,a)}IU(t){const s=Jf.get(this),i=self.bU;Qf.Fe(t,i);const e=s.Fj().vU(t);if(!e)throw new Error("invalid layer");const n=e.Fj();s.NU(e),n.jk().WB()||n.JB()}EU(){const t=Jf.get(this),s=t.Fj();t.DU(),s.jk().WB()||s.JB()}_U(t,s){Qf.re(t),Qf.re(s),Jf.get(this).AU(t,s)}LU(){return Jf.get(this).OU()}set W(t){Qf.ue(t);const s=Jf.get(this);if("perspective"===t)s.RU();else{if("orthographic"!==t)throw new Error("invalid projection");s.PU()}}get W(){return Jf.get(this).kU()?"orthographic":"perspective"}}}{const Yf=self.Gs,Hf=self.ks,qf=new WeakMap,Zf=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Kf=new Map([...Zf.entries()].map((t=>[t[1],t[0]]))),Xf=new Set(["2d","3d"]),$f=Yf.Qn(Yf.vo);self.bU=class{constructor(t){qf.set(this,t);const s=[],i=t.eU(),e=i.nU().length;for(let t=0;t<e;++t)s.push(new self.rU(i,t));Object.defineProperties(this,{name:{value:t.Nc(),writable:!1},layout:{value:t.VF().WF(),writable:!1},effects:{value:s,writable:!1}}),t.Fj().lB(this,t)}get FU(){const t=qf.get(this).jU();return t?t.gU():null}*zU(){for(const t of qf.get(this).zU())yield t.gU()}*BU(){for(const t of qf.get(this).UU())yield t.gU()}*WU(){for(const t of qf.get(this).UU())for(const s of t.QU())yield s.gU()}get index(){return qf.get(this).$P()}get isVisible(){return qf.get(this).JU()}set isVisible(t){qf.get(this).VU(t)}get YU(){return qf.get(this).HU()}get qU(){return qf.get(this).ZU()}set qU(t){qf.get(this).KU(t)}get XU(){return qf.get(this).$U()}set XU(t){qf.get(this).tW(!!t)}get sW(){return qf.get(this).iW()}get opacity(){return qf.get(this).$A()}set opacity(t){t=Yf.Zn(+t,0,1),isNaN(t)||qf.get(this).sL(t)}set scale(t){Hf.re(t),qf.get(this).eW(t)}get scale(){return qf.get(this).nW()}set rW(t){Hf.re(t),qf.get(this).hW(t)}get rW(){return qf.get(this).oW()}set angle(t){Hf.re(t),qf.get(this).uU(t)}get angle(){return qf.get(this).aW()}set uW(t){Hf.re(t),qf.get(this).lW(t)}get uW(){return qf.get(this).cW()}set fW(t){Hf.re(t),qf.get(this).dW(t)}get fW(){return qf.get(this).pW()}set mW(t){Hf.re(t),qf.get(this).qb(t)}get mW(){return qf.get(this).Hb()}set renderingMode(t){if(!Xf.has(t))throw TypeError("invalid rendering mode");qf.get(this).yW("3d"===t)}get renderingMode(){return qf.get(this).gW()?"3d":"2d"}set MW(t){qf.get(this).wW(t)}get MW(){return qf.get(this).SW()}set TW(t){qf.get(this).bW(t)}get TW(){return qf.get(this).vW()}set VR(t){Hf.ue(t);const s=Zf.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");qf.get(this).Ab(s)}get VR(){return Kf.get(qf.get(this).xW())}set backgroundColor(t){if(Hf.xe(t),t.length<3)throw new Error("expected 3 elements");$f.Eo(t[0],t[1],t[2]);const s=qf.get(this),i=s.GW();i.Qo($f)||(i.Po($f),s.Fj().gj())}get backgroundColor(){const t=qf.get(this).GW();return[t.ko(),t.Fo(),t.jo()]}set scrollX(t){Hf.te(t);const s=qf.get(this);s.IW(!0),s.cU(t)}get scrollX(){return qf.get(this).fU()}set scrollY(t){Hf.te(t);const s=qf.get(this);s.IW(!0),s.dU(t)}get scrollY(){return qf.get(this).pU()}scrollTo(t,s){Hf.te(t),Hf.te(s);const i=qf.get(this);i.IW(!0),i.cU(t),i.dU(s)}mU(){const t=qf.get(this);return[t.fU(),t.pU()]}NW(){qf.get(this).IW(!1)}getViewport(){return qf.get(this).EW().su()}DW(t,s,i=0){Hf.te(t),Hf.te(s),Hf.te(i);const e=qf.get(this),n=e.Fj();return e._W(t-n.Nz(),s-n.Dz(),i)}AW(t,s,i=0){Hf.te(t),Hf.te(s),Hf.te(i);const e=qf.get(this),n=e.Fj(),[r,h]=e.LW(t,s,i);return[r+n.Nz(),h+n.Dz()]}OW(t,s,i=0){return Hf.te(t),Hf.te(s),Hf.te(i),qf.get(this).RW(t,s,i)}PW(t,s,i=0){return Hf.te(t),Hf.te(s),Hf.te(i),qf.get(this).kW(t,s,i)}get FW(){return qf.get(this).jW()}}}{let td=function(t){let s=ed.get(t);return s||(s=sd.Qn(sd.Event.gf),ed.set(t,s),s)};0;const sd=self.Gs,id=self.ks,ed=new WeakMap,nd=sd.Is();self.zW=class{#t;constructor(){const t=sd.Qz.Wz(nd);this.#t=t;const s={runtime:{value:t.Fj().Jz(),writable:!1},objectType:{value:t.BW().mB(),writable:!1},SB:{value:t.TB().dB(),writable:!1}};t.UW(s),t.WW(s),Object.defineProperties(this,s),t.Fj().lB(this,t)}static QW(){return sd.Qz.JW()}VW(){const t=ed.get(this);t&&(t.Jn(),ed.delete(this))}addEventListener(t,s,i){id.ue(t),id._e(s),td(this).addEventListener(t,s,i)}removeEventListener(t,s,i){id.ue(t),id._e(s),td(this).removeEventListener(t,s,i)}dispatchEvent(t){td(this).dispatchEvent(t)}destroy(){const t=this.#t,s=t.Fj();s.YW(t),s.jk().WB()||s.JF().QB()||s.jk().HW()||s.JB()}qW(){const t=this.#t.ZW();return t?t.map((t=>t.hj())):[]}*KW(){const t=this.#t;if(t.XW())for(const s of t.$W())yield s.hj()}get uid(){return this.#t.tQ()}get sQ(){return this.#t.iQ()}get eQ(){return this.#t.nQ()}set gF(t){id.re(t),this.#t.wF(t)}get gF(){return this.#t.rQ()}hQ(){this.#t.oQ()}get oF(){const t=this.#t;return t.Fj().aF(t)}aQ(...t){id.xe(t);const s=new Set(t),i=this.#t.uQ();return s.isSubsetOf(i)}lQ(t){id.Fe(t,Set),this.#t.cQ(t)}fQ(){return new Set(this.#t.uQ())}signal(t){id.ue(t);const s=this.#t;s.Fj().jk().dQ(s,t)}iF(t){id.ue(t);const s=this.#t;return s.Fj().jk().pQ(s,t)}}}{const rd=self.Gs,hd=self.ks,od=rd.Is();self.mQ=class extends self.zW{#t;#s=!1;#i=null;#e=!1;#n=null;#r;#h;constructor(t){super(),this.#t=rd.Qz.Wz(od),this.#s=!1,this.#i=null,this.#e=!1,this.#n=null,this.#r=t?.yQ,this.#h=t?.gQ}VW(){this.MQ(!1),this.wQ(!1),super.VW()}SQ(){return rd.Qz.TQ()}bQ(t){const s=this.#t;s.Fj().vQ(t,s)}xQ(t){const s=this.#t;return s.Fj().Ij(t,s)}CQ(t,s){if(hd.ue(t),hd._e(s),!this.#r)throw new Error("no DOM component id set");this.#t.Fj().GQ(this.#r,t,s)}IQ(t){hd.xe(t);for(const[s,i]of t)this.CQ(s,i)}NQ(t,s){if(hd.ue(t),!this.#r)throw new Error("no DOM component id set");this.#t.Fj().zc(this.#r,t,s)}EQ(t,s){if(hd.ue(t),!this.#r)throw new Error("no DOM component id set");return this.#t.Fj().wj(this.#r,t,s)}DQ(t,s){if(!this.#t.Fj().vk())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#r,handler:t,data:s,responseId:null});this.NQ(t,s)}MQ(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=this.#t.Fj();if(t){if(!this.#i)if(this.#t.Fj()._Q()){const t=globalThis.AQ,s=this.SB;this.#i=()=>{const i=performance.now();this.LQ(),t.OQ(s,performance.now()-i)}}else this.#i=()=>this.LQ();s.gf().addEventListener("tick",this.#i)}else s.gf().removeEventListener("tick",this.#i)}RQ(){return this.#s}LQ(){}wQ(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=this.#t.Fj();if(t){if(!this.#n)if(this.#t.Fj()._Q()){const t=globalThis.AQ,s=this.SB;this.#n=()=>{const i=performance.now();this.PQ(),t.OQ(s,performance.now()-i)}}else this.#n=()=>this.PQ();s.gf().addEventListener("tick2",this.#n)}else s.gf().removeEventListener("tick2",this.#n)}kQ(){return this.#e}PQ(){}FQ(){return[]}jQ(){return null}zQ(t){}BQ(){if(!this.#h)throw new Error("no wrapper component id set");return this.#t.Fj().UQ(this.#h)}WQ(t,s){if(hd.ue(t),hd._e(s),!this.#h)throw new Error("no wrapper component id set");this.#t.Fj().QQ(this.#h,t,s)}JQ(t){hd.xe(t);for(const[s,i]of t)this.WQ(s,i)}VQ(t,s){if(!this.#h)throw new Error("no wrapper component id set");this.runtime.Lk.YQ(this.#h,t,s)}HQ(t,s){if(!this.#h)throw new Error("no wrapper component id set");return this.runtime.Lk.qQ(this.#h,t,s)}}}{let ad=function(t){return class s extends t{#t;#s;constructor(t){super(t);const s=ud.Qz.Wz(md),i=s.lj();this.#t=s,this.#s=i,pd.set(this,s);const e=[],n=i.ZQ();if(n){const t=i.BW().eU().nU().length;for(let s=0;s<t;++s)e.push(new self.rU(n,s))}const r={effects:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#s.VF().WF()}get KQ(){return this.#s.cj().gU()}get x(){return this.#s.Wb()}set x(t){t=+t;const s=this.#s;isNaN(t)||s.Wb()===t||(s.Qb(t),s.XQ())}get y(){return this.#s.Vb()}set y(t){t=+t;const s=this.#s;isNaN(t)||s.Vb()===t||(s.Yb(t),s.XQ())}setPosition(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.Wb()===t&&i.Vb()===s||(i.$Q(t,s),i.XQ())}tJ(){const t=this.#s;return[t.Wb(),t.Vb()]}offsetPosition(t,s){if(t=+t,s=+s,isNaN(t)||isNaN(s)||0===t&&0===s)return;const i=this.#s;i.sJ(t,s),i.XQ()}set iJ(t){t=+t;const s=this.#s;isNaN(t)||s.eJ()===t||(s.nJ(t),s.XQ())}get iJ(){return this.#s.eJ()}set rJ(t){t=+t;const s=this.#s;isNaN(t)||s.hJ()===t||(s.oJ(t),s.XQ())}get rJ(){return this.#s.hJ()}aJ(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.eJ()===t&&i.hJ()===s||(i.nJ(t),i.oJ(s),i.XQ())}uJ(){const t=this.#s;return[t.eJ(),t.hJ()]}get mW(){return this.#s.Hb()}set mW(t){t=+t;const s=this.#t,i=this.#s;isNaN(t)||i.Hb()===t||(i.qb(t),s.Fj().gj())}get lJ(){return this.#s.cJ()}get width(){return this.#s.Vy()}set width(t){t=+t;const s=this.#s;isNaN(t)||s.Vy()===t||(s.$y(t),s.XQ())}get height(){return this.#s.ig()}set height(t){t=+t;const s=this.#s;isNaN(t)||s.ig()===t||(s.Yy(t),s.XQ())}hU(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.Vy()===t&&i.ig()===s||(i.bD(t,s),i.XQ())}getSize(){const t=this.#s;return[t.Vy(),t.ig()]}get angle(){return this.#s.lU()}set angle(t){t=ud.Kn(+t);const s=this.#s;isNaN(t)||s.lU()===t||(s.uU(t),s.XQ())}get fJ(){return ud.$n(this.angle)}set fJ(t){this.angle=ud.Xn(t)}Ku(t){return t?(this.#s.dJ(fd,dd,!1),fd.su()):this.#s.pJ().su()}mJ(t){return t?(this.#s.dJ(fd,dd,!1),dd.Ju()):this.#s.yJ().Ju()}gJ(){return this.#s.MJ()}get isVisible(){return this.#s.HU()}set isVisible(t){t=!!t;const s=this.#t,i=this.#s;i.HU()!==t&&(i.VU(t),s.Fj().gj())}get opacity(){return this.#s.$A()}set opacity(t){t=ud.Zn(+t,0,1);const s=this.#t,i=this.#s;isNaN(t)||i.$A()===t||(i.sL(t),s.Fj().gj())}set wJ(t){if(ld.xe(t),t.length<3)throw new Error("expected 3 elements");Md.Eo(t[0],t[1],t[2]);const s=this.#t,i=this.#s;i.SJ().Qo(Md)||(i.TJ(Md),s.Fj().gj())}get wJ(){const t=this.#s.SJ();return[t.ko(),t.Fo(),t.jo()]}set VR(t){ld.ue(t);const s=yd.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#t;this.#s.Ab(s),i.Fj().gj()}get VR(){return gd.get(this.#s.xW())}bJ(){this.#s.vJ()}xJ(){this.#s.CJ()}GJ(t){ld.Fe(t,cd);const s=this.#t,i=s.Fj().vU(t);if(!i)throw new Error("invalid layer");s.lj().IJ(i)}NJ(t,i){ld.Fe(t,s),this.#s.EJ(pd.get(t),i)}get zIndex(){return this.#s.fj()}get DJ(){return this.#s._J()}set DJ(t){this.#s.AJ(!!t)}vu(t,s){return ld.te(t),ld.te(s),this.#s.LJ(+t,+s)}nz(t){ld.Fe(t,s);const i=this.#t,e=pd.get(t);return i.Fj().ak().rz(i,e)}oz(){const t=this.#t,s=t.Fj().ak().az(t);return s?s.hj():null}getParent(){const t=this.#t.OJ();return t?t.hj():null}RJ(){const t=this.#t.PJ();return t?t.hj():null}*kJ(){for(const t of this.#t.kJ())yield t.hj()}FJ(){return this.#t.jJ()}zJ(t){const s=this.#t.BJ(t);return s?s.hj():null}*children(){for(const t of this.#t.children())yield t.hj()}*UJ(){for(const t of this.#t.UJ())yield t.hj()}WJ(t,i){ld.Fe(t,s),ld.ge(i),i||(i={});const e=this.#t,n=pd.get(t);e.QJ(n,i)}removeChild(t){ld.Fe(t,s);const i=this.#t,e=pd.get(t);i.JJ(e)}VJ(){const t=this.#t;t.YJ()&&t.OJ().JJ(t)}HJ(){const t=this.#s;return{qJ:t.ZJ(),KJ:t.XJ(),$J:t.tV(),sV:t.iV(),eV:t.nV(),rV:t.hV(),oV:t.aV(),uV:t.lV(),cV:t.fV()}}dV(t,s){ld.re(t),ld.re(s),this.#s.pV(t,s)}mV(){const t=this.#s;t.yV(),t.XQ()}gV(t,s,i){ld.re(t),ld.re(s),ld.ye(i);const e=this.#s;e.MV(t,s,i)&&e.XQ()}wV(t,s){let i=NaN,e=NaN,n=NaN,r=NaN,h=NaN;const o=this.#s;if(o.SV()){const a=o.TV().Dv(t,s);null!==a&&(i=a.Wb(),e=a.Vb(),n=a.Hb(),r=a.Zb(),h=a.Xb())}return{x:i,y:e,mW:n,bV:r,vV:h}}xV(){const t=this.#s;if(!t.SV())return[0,0];const s=t.TV();return[s.wv(),s.Sv()]}}};0;const ud=self.Gs,ld=self.ks,cd=(self.zW,self.bU),fd=ud.Qn(ud.Rect),dd=ud.Qn(ud.Iu),pd=new WeakMap,md=ud.Is(),yd=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),gd=new Map([...yd.entries()].map((t=>[t[1],t[0]]))),Md=ud.Qn(ud.vo);self.CV=ad(self.zW),self.GV=ad(self.mQ)}{self.Gs;const wd=self.ks;self.IV=class extends self.CV{#t;constructor(){super(),this.#t=self.zW.QW()}NV(){return this.#t.DV().EV()}focus(){this.#t.DV()._V()}blur(){this.#t.DV().AV()}LV(t,s){wd.ue(t),this.#t.DV().OV(t,s)}}}{let Sd=function(t){let s=vd.get(t);return s||(s=Td.Qn(Td.Event.gf),vd.set(t,s),s)};0;const Td=self.Gs,bd=self.ks,vd=new WeakMap,xd=Td.Is();self.RV=class{#t;constructor(){const t=Td.Qz.Wz(xd);this.#t=t;const s={runtime:{value:t.Fj().Jz(),writable:!1},behavior:{value:t.kV().PV(),writable:!1},FV:{value:t.zV().jV(),writable:!1}};Object.defineProperties(this,s),t.Fj().lB(this,t)}static QW(){return Td.Qz.JW()}get BV(){return this.#t.UV().hj()}VW(){const t=vd.get(this);t&&(t.Jn(),vd.delete(this))}addEventListener(t,s,i){bd.ue(t),bd._e(s),Sd(this).addEventListener(t,s,i)}removeEventListener(t,s,i){bd.ue(t),bd._e(s),Sd(this).removeEventListener(t,s,i)}dispatchEvent(t){Sd(this).dispatchEvent(t)}}}{const Cd=self.Gs,Gd=(self.ks,Cd.Is());self.WV=class{constructor(){const t=Cd.Qz.Wz(Gd),s={runtime:{value:t.Fj().Jz(),writable:!1},behavior:{value:t.kV().PV(),writable:!1},name:{value:t.Nc(),writable:!1}};Object.defineProperties(this,s)}}}{const Id=self.Gs,Nd=(self.ks,Id.Is());self.QV=class{#s;constructor(){const t=Id.Qz.Wz(Nd);this.#s=t;const s={runtime:{value:t.Fj().Jz(),writable:!1},id:{value:t.Vz(),writable:!1}};Object.defineProperties(this,s),t.Fj().lB(this,t)}bB(){return this.#s.AB().map((t=>t.hj()))}static cB(t){if(!t)return null;const s=Id.Qz.JV(t);return s?s.PV():null}}}{const Ed=self.Gs,Dd=self.ks,_d=Ed.Qn(Ed.vo);self.rU=class{#t;constructor(t,s){this.#t=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){return this.#t.nU()[this.index].Nc()}get isActive(){return this.#t.VV(this.index)}set isActive(t){t=!!t;const s=this.#t;s.VV(this.index)!==t&&(s.YV(this.index,t),s.HV(),s.Fj().gj())}setParameter(t,s){Dd.re(t),t=Math.floor(+t);const i=this.#t,e=i.qV(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof Ed.vo){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");_d.Eo(s[0],s[1],s[2]),s=_d}else if("number"!=typeof s)throw new TypeError("expected number");i.ZV(this.index,t,s)&&i.VV(this.index)&&i.Fj().gj()}getParameter(t){Dd.re(t),t=Math.floor(+t);const s=this.#t.qV(this.index,t);if(null===s)throw new RangeError("invalid index");return s instanceof Ed.vo?[s.ko(),s.Fo(),s.jo()]:s}}}self.Gs,self.ks;self.KV=class{#t;constructor(t){this.#t=t,Object.defineProperties(this,{name:{value:t.Nc(),writable:!1}})}get speed(){return this.#t.XV()}get $V(){return this.#t.tY()}get sY(){return this.#t.iY()}get eY(){return this.#t.nY()}get rY(){return this.#t.hY()}get frameCount(){return this.#t.oY()}aY(){return this.#t.uY().map((t=>t.lY()))}*frames(){for(const t of this.#t.uY())yield t.lY()}};self.Gs,self.ks;self.Pj=class{#s;constructor(t){this.#s=t}static Rj(t){return t.#s}get width(){return this.#s.Vy()}get height(){return this.#s.ig()}getSize(){const t=this.#s;return[t.Vy(),t.ig()]}cY(t){return t.fY(this)}dY(){return this.#s.$D().su()}};{self.Gs;const Ad=self.ks;self.pY=class extends self.Pj{#s;constructor(t){super(t.mY()),this.#s=t,Object.defineProperties(this,{duration:{value:t.yY(),writable:!1},iJ:{value:t.eJ(),writable:!1},rJ:{value:t.hJ(),writable:!1}})}uJ(){const t=this.#s;return[t.eJ(),t.hJ()]}gY(){return this.#s.MY()}wY(t){return this.SY(t)[0]}TY(t){return this.SY(t)[1]}SY(t){const s=this.#s;let i=null;if("number"==typeof t)i=s.bY(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.vY(t)}return i?[i.Wb(),i.Vb()]:this.uJ()}xY(){const t=this.#s.CY();return t?t.dl():0}GY(t){return this.IY(t)[0]}NY(t){return this.IY(t)[1]}IY(t){Ad.re(t),t=Math.floor(t);const s=this.#s.CY();if(!s||t<0||t>=s.dl())return[0,0];const i=s.fl();return[i[2*t],i[2*t+1]]}get tag(){return this.#s.EY()}}}{let Ld=function(t){const s=Rd.get(t);if(s.DY())throw new Error("timeline/tween was released and is no longer valid");return s};0;self.Gs;const Od=self.ks,Rd=new WeakMap;self._Y=class{constructor(t){Rd.set(this,t),t.Fj().lB(this,t)}pause(){Ld(this).AY()}resume(){Ld(this).LY()}stop(){Ld(this).Ff()}aQ(t){return Ld(this).OY(t)}set time(t){Od.re(t),Ld(this).RY(t)}get time(){return Ld(this).GO()}set totalTime(t){Od.re(t),Ld(this).PY(t)}get totalTime(){return Ld(this).kY()}set $V(t){Ld(this).FY(!!t)}get $V(){return Ld(this).jY()}set rY(t){Ld(this).zY(!!t)}get rY(){return Ld(this).BY()}set playbackRate(t){Od.re(t),Ld(this).UY(t)}get playbackRate(){return Ld(this).WY()}get progress(){const t=Ld(this);return t.GO()/t.kY()}get tags(){return Ld(this).QY()}get finished(){return Ld(this).JY()}get VY(){return Ld(this).IsPlaying()}get YY(){return Ld(this).HY()}get qY(){return Rd.get(this).DY()}}}{let Pd=function(t){const s=kd.get(t);if(s.DY())throw new Error("timeline was released and is no longer valid");return s};0;self.Gs,self.ks;const kd=new WeakMap;self.ZY=class extends self._Y{constructor(t){super(t),kd.set(this,t);const s={name:{value:t.Nc(),writable:!1}};Object.defineProperties(this,s)}}}{let Fd=function(t){const s=zd.get(t);if(s.DY())throw new Error("tween was released and is no longer valid");return s};0;self.Gs;const jd=self.ks,zd=new WeakMap,Bd=new WeakMap;let Ud=null;self.KY=class extends self._Y{constructor(t,s,i){super(t),Ud||(Ud=i.XY),zd.set(this,t),s&&Bd.set(this,s)}stop(){const t=Fd(this);Bd.get(this).$Y(t)}tH(t){jd.ue(t);const s=self.Bl.hc(Ud(t));Fd(this).sH(s)}get BV(){const t=Fd(this).iH();return t?t.hj():null}get eH(){return Fd(this).nH()}set eH(t){Fd(this).rH(!!t)}get value(){const t=Fd(this);if("value"!==t.hH())throw new Error("not a value tween");return t.aH("value").oH()}}}self.Gs,self.ks;self.uH=class extends self.Uz{constructor(){super()}};{const Wd=self.Gs,Qd=self.ks,Jd=Wd.Is();self.lH=class extends self.uH{#t;#i;#s=0;#r=new Map;constructor(t){if(super(),this.#t=Wd.Qz.Wz(Jd),!t?.yQ)throw new Error("no DOM component ID specified");this.#i=t.yQ,this.cH("elem-focused",(t=>t.fH())),this.cH("elem-blurred",(t=>{t&&t.dH()}))}pH(t){const s=this.#s++;return this.#r.set(s,t),s}mH(t){this.#r.delete(t)}cH(t,s){this.#t.Fj().GQ(this.#i,t,(t=>{const i=this.#r.get(t.elementId);s(i,t)}))}yH(t){Qd.xe(t);for(const[s,i]of t)this.yH(s,i)}}}{const Vd=self.Gs,Yd=(self.ks,Vd.Is());self.gH=class extends self.OB{#t;constructor(){super(),this.#t=Vd.Qz.Wz(Yd)}MH(){}wH(){return this.#t.mY().SH()}TH(t){}bH(t){}vH(){}xH(t){}}}{const Hd=self.Gs,qd=(self.ks,Hd.Is());self.CH=class extends self.GV{#t;#n=null;#s=null;constructor(t){super(t),this.#t=Hd.Qz.Wz(qd)}VW(){if(super.VW(),this.#n){const t=this.#t.Fj().gf();t.removeEventListener("renderercontextlost",this.#n),t.removeEventListener("renderercontextrestored",this.#s),this.#n=null,this.#s=null}}GH(){if(this.#n)return;this.#n=()=>this.IH(),this.#s=()=>this.NH();const t=this.#t.Fj().gf();t.addEventListener("renderercontextlost",this.#n),t.addEventListener("renderercontextrestored",this.#s)}IH(){}NH(){}EH(t){}}}{const Zd=self.Gs,Kd=(self.ks,Zd.Qn(Zd.Rect)),Xd=new WeakMap,$d=Zd.Is();self.DH=class extends self.CH{#t=-1;#s=!0;#r=!1;#e=!1;#i=-.2;#h=Zd.Qn(Zd.Rect,0,0,-1,-1);#o=0;#a=0;#u=-1;#l=-1;#c=!1;constructor(t){if(!t?.yQ)throw new Error("no DOM component ID specified");super(t);const s=Zd.Qz.Wz($d);Xd.set(this,s),this.#t=this.SB.pH(this);const i=s.Fj().Cj();this.#o=i._H(),this.#a=i.AH(),this.MQ(!0)}VW(){super.VW(),this.SB.mH(this.#t),this.LH("destroy"),this.#t=-1,Xd.delete(this)}OH(){if(Xd.get(this).Fj().vk())throw new Error("not valid in worker mode");return this.RH("get-element")}LH(t,s){s||(s={}),s.elementId=this.#t,this.NQ(t,s)}RH(t,s){return s||(s={}),s.elementId=this.#t,this.DQ(t,s)}PH(t,s){return s||(s={}),s.elementId=this.#t,this.EQ(t,s)}kH(t){t||(t={});const s=Xd.get(this).lj();t.elementId=this.#t,t.isVisible=s.HU(),t.htmlIndex=s.cj().FH(),t.htmlZIndex=s.jH(),Object.assign(t,this.zH()),this.#s=!!t.isVisible,this.DQ("create",t),this.BH(!0)}UH(t){t=!!t,this.#s!==t&&(this.#s=t,this.LH("set-visible",{isVisible:t}))}LQ(){this.BH(!1)}WH(){const t=Xd.get(this).Fj().Cj().QH();return"Android"===Zd.Ks.Xs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}BH(t){const s=Xd.get(this);if(s.JH())return;const i=s.lj(),e=i.cj(),n=i.pJ();let[r,h]=e.LW(n.Ka(),n.Xa()),[o,a]=e.LW(n.$a(),n.tu());const u=s.Fj().Cj(),l=u.Az(),c=u.Oz();if(!i.HU()||!e.HU())return void this.UH(!1);if(!this.WH()&&(o<=0||a<=0||r>=l||h>=c))return void this.UH(!1);Kd.set(r,h,o,a);const f=u._H(),d=u.AH(),p=e.FH(),m=i.jH();if(!t&&Kd.equals(this.#h)&&this.#o===f&&this.#a===d&&this.#u===p&&this.#l===m)return void this.UH(!0);this.#h.m(Kd),this.#o=f,this.#a=d,this.#u=p,this.#l=m,this.UH(!0);let y=null;this.#e&&(y=e.VH()+this.#i),this.LH("update-position",{left:Math.round(this.#h.Ka()),top:Math.round(this.#h.Xa()),width:Math.round(this.#h.width()),height:Math.round(this.#h.height()),htmlIndex:p,htmlZIndex:m,fontSize:y})}YH(){this.RH("focus",{focus:!0})}HH(){this.RH("focus",{focus:!1})}fH(){this.#r=!0}dH(){this.#r=!1}qH(){return this.#r}ZH(t,s){this.KH("set-css-style",{prop:Zd.So(t),val:s})}XH(t,s){this.KH("set-attribute",{name:t,val:s})}$H(t){this.KH("remove-attribute",{name:t})}tq(){this.#c||(this.#c=!0,Promise.resolve().then((()=>{this.#c=!1,this.LH("update-state",this.zH())})))}zH(){}sq(){return this.#t}}}self.Gs,self.ks;self.iq=class extends self.QV{constructor(){super()}};self.Gs,self.ks;self.eq=class extends globalThis.WV{constructor(){super()}MH(){}};{const tp=self.Gs,sp=(self.ks,new WeakMap),ip=tp.Is();self.nq=class extends self.RV{#e=!1;#s=!1;#t=!1;constructor(){super(),sp.set(this,tp.Qz.Wz(ip))}VW(){super.VW(),this.MQ(!1),this.wQ(!1),this.rq(!1),sp.delete(this)}SQ(){return tp.Qz.TQ()}hq(){}bQ(t){const s=sp.get(this);s.Fj().vQ(t,s.UV(),s.zV())}xQ(t){const s=sp.get(this);return s.Fj().Ij(t,s.UV(),s.zV())}MQ(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=sp.get(this).Fj();t?s.oq(this):s.aq(this)}RQ(){return this.#e}LQ(){}wQ(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=sp.get(this).Fj();t?s.uq(this):s.lq(this)}kQ(){return this.#s}PQ(){}rq(t){if(t=!!t,this.#t===t)return;this.#t=t;const s=sp.get(this).Fj();t?s.cq(this):s.fq(this)}pq(){return this.#t}mq(){}FQ(){return[]}jQ(){return null}zQ(t){}}}{self.Gs;const ep=self.ks;let np=null;self.Ok=class{constructor(t){np=t}bj(t){np.vj(t)}YQ(t,s,i){ep.ue(t),ep.ue(s),ep.Ce(i),np.yq(t,s,i)}qQ(t,s,i){return ep.ue(t),ep.ue(s),ep.Ce(i),np.gq(t,s,i)}Mq(t){return ep.le(t),new self.wq(np,t)}set Sq(t){np.Tq(!!t)}get Sq(){return np.bq()}vq(t){np.xq(!!t)}Cq(t){ep.te(t);const s=np.Gq(t);return s?s.mB():null}}}self.Gs,self.ks;self.wq=class{#t;#s;#h;#i;#r;#n;constructor(t,s){this.#t=t;const i=t.jk(),e=t.Jk();this.#s=e,this.#h=e.Iq();const n=t.Xk();this.#i=n.Nq(),this.#r=n.Eq(e);const r=i.Dq().Eq();this.#n=r,s&&r._q(s),t.Aq(!1)}Lq(){const t=this.#t.jk(),s=this.#h,i=this.#n;t.Oq(s),this.#s.Rq(this.#i,this.#r),t.Pq(s),i.kq(i.$P()+1)}get Fq(){return this.#n.jq()}release(){const t=this.#t,s=t.Xk(),i=t.jk().Dq();t.Aq(!0),i.zq(),s.zq()}};{const rp=self.Gs,hp=self.ks;let op=null,ap=null;self.Bq=class{constructor(t,s){ap=t,op=s}Uq(){op.aL()}Wq(t){op.hL(t)}Qq(){op.pS()}Jq(){op.aS()}Vq(){op.TS()}setColor(t){op.tL(t[0],t[1],t[2],t[3])}Yq(t,s,i,e){op.tL(t,s,i,e)}Hq(){op.iL()}qq(t){op.sL(t)}Zq(t){op.US(t)}Kq(){op.WS()}rect(t){op.cL(t.left,t.top,t.right,t.bottom)}Xq(t,s,i,e){op.cL(t,s,i,e)}$q(t){op.Iu(rp.Iu.Vu(t))}tZ(t,s,i,e,n,r,h,o){op.GT(t,s,i,e,n,r,h,o)}sZ(t,s){op.$S(rp.Iu.Vu(t),rp.Rect.iu(s))}iZ(t,s){op.pL(rp.Iu.Vu(t),rp.Iu.Vu(s))}eZ(t,s,i,e,n,r,h,o,a,u,l,c,f){op.mL(t,s,i,e,n,r,h,o,a,u,l,c,rp.Rect.iu(f))}nZ(t,s,i,e,n,r,h,o,a,u,l,c,f){op.HS(t,s,i,e,n,r,h,o,a,u,l,c,rp.Iu.Vu(f))}rZ(t,s,i){op.yL(t,s,i)}hZ(t){op.CT(t)}line(t,s,i,e){op.og(t,s,i,e)}oZ(t,s,i,e,n,r){op.qS(t,s,i,e,n,r)}aZ(t,s,i,e){op.tT(t,s,i,e)}uZ(t){op.nT(rp.Rect.iu(t))}lZ(t){op.rT(rp.Iu.Vu(t))}cZ(t){op.cT(t)}fZ(){op.fT()}dZ(t){op.yT(t)}pZ(){op.ST()}mZ(t){hp.je(t,self.yZ);const s=t?ap.vU(t):null;op.nL(s)}gZ(t,s){const i=self.Pj.Rj(t);if(!i)throw new Error("invalid IImageInfo");return i.MZ(op,{Bv:s?.Bv??"clamp-to-edge",Uv:s?.Uv??"clamp-to-edge",Wv:s?.Wv??"trilinear",Vv:s?.Vv??!0})}wZ(t){const s=self.Pj.Rj(t);if(!s)throw new Error("invalid IImageInfo");s.QE()}fY(t){const s=self.Pj.Rj(t);if(!s)throw new Error("invalid IImageInfo");const i=s.lC();return self.yZ.SZ(ap,i)}TZ(t,s,i){hp.re(t),hp.re(s);const e=op.tC(t,s,{Bv:i?.Bv??"clamp-to-edge",Uv:i?.Uv??"clamp-to-edge",Wv:i?.Wv??"trilinear",Vv:i?.Vv??!0});return self.yZ.SZ(ap,e)}bZ(t,s,i){hp.Fe(s,self.yZ);const e=ap.vU(s);op.XD(t,e,{Hv:i?.Hv??!0})}deleteTexture(t){hp.Fe(t,self.yZ);const s=ap.vU(t);op.nC(s)}vZ(){const t=op.BT();return new self.xZ(ap,t)}CZ(){ap.Cj().GZ(op)}IZ(t){hp.Fe(t,globalThis.bU),ap.vU(t).NZ(op)}}}{self.Gs,self.ks;const up=new WeakMap,lp=new WeakMap;self.yZ=class{constructor(t,s){up.set(this,{runtime:t,texture:s}),lp.set(s,this),t.lB(this,s),Object.defineProperties(this,{width:{value:s.Vy(),writable:!1},height:{value:s.ig(),writable:!1}})}static SZ(t,s){if(!s)return null;return lp.get(s)||new self.yZ(t,s)}}}{let cp=function(t){return dp.get(t).EZ};0;self.Gs;const fp=self.ks,dp=new WeakMap;self.xZ=class{constructor(t,s){dp.set(this,{runtime:t,EZ:s}),t.lB(this,s)}release(){cp(this).Jn()}set DZ(t){fp.ue(t),cp(this).XE(t)}get DZ(){return cp(this).sE()}set _Z(t){fp.re(t),cp(this).$E(t)}get _Z(){return cp(this).tD()}set lineHeight(t){fp.re(t),cp(this).iD(t)}get lineHeight(){return cp(this).eD()}set AZ(t){cp(this).nD(t)}get AZ(){return cp(this).rD()}set LZ(t){cp(this).hD(t)}get LZ(){return cp(this).oD()}setColor(t){fp.xe(t),this.OZ(t[0],t[1],t[2])}OZ(t,s,i){cp(this).fD(t,s,i)}RZ(t){fp.ue(t),cp(this).Lb(t)}set PZ(t){cp(this).dD(t)}get PZ(){return cp(this).pD()}set verticalAlign(t){cp(this).mD(t)}get verticalAlign(){return cp(this).yD()}set kZ(t){cp(this).gD(t)}get kZ(){return cp(this).MD()}set FZ(t){cp(this).wD(t)}get FZ(){return cp(this).SD()}set text(t){fp.ue(t),cp(this).Bc(t)}get text(){return cp(this).TD()}hU(t,s,i){fp.re(t),fp.re(s),fp.re(i),cp(this).bD(t,s,i)}cY(){const{runtime:t,EZ:s}=dp.get(this),i=s.lC();return self.yZ.SZ(t,i)}dY(){return cp(this).$D().su()}jZ(t){fp._e(t),cp(this).VE=t}zZ(){cp(this).QE()}get BZ(){return cp(this).xD()}get UZ(){return cp(this).GD()}}}{let pp=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return Mp.get(i)||""},mp=function(t){return new Promise(((s,i)=>{const e=document.createElement("script");e.onload=s,e.onerror=i,e.async=!1,e.type="module",e.src=t,document.head.appendChild(e)}))};0;const yp=self.Gs,gp=new Set(["local","remote"]),Mp=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);yp.WZ=class extends yp.Un{constructor(t,s){super();const i=s.exportType;this.kc=t,this.QZ="folders",this.JZ=new Map,this.VZ="cordova"===i,this.YZ=!!s.isiOSCordova,this.HZ=!!s.isFileProtocol,this.qZ=s.swClientId,this.ZZ=s.supportedAudioFormats||{},this.KZ=new Map,this.XZ=!1,this.$Z=s.scriptFolder,this.tK="",this.sK="",this.iK="",this.eK=s.fileMap||new Map,this.nK=new Map;const e="html5"===i||"scirra-arcade"===i||"instant-games"===i;this.rK=e?"remote":"local",this.hK=new Map,this.oK=[],this.aK=[],this.uK=!1,this.lK=0,this.cK=0,this.fK=0,this.dK=!1,this.pK=yp.Qn(yp.Xd,(()=>this.mK()),50),this.yK=yp.Qn(yp.Wd,Math.max(yp.hardwareConcurrency,8)),this.gK=yp.Qn(yp.Wd,20),this.MK=new self.Aj(this)}Jn(){for(const t of this.hK.values())t.Jn();this.hK.clear(),yp.wh(this.aK),this.kc=null}Fj(){return this.kc}wK(t){this.QZ=t}Vj(){return this.QZ}SK(){return this.$Z}TK(t){this.tK=t}qj(){return this.tK}bK(t){this.sK=t}vK(){return this.sK}xK(t){this.iK=t}CK(){return this.iK}GK(){return this.HZ}eo(t,s){return s=s||this.rK,yp.Kh(t)?("flat"===this.QZ&&(t=t.toLowerCase()),this.VZ&&this.HZ?this.IK(t):"playable-ad-single-file"===this.kc.Tz()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):"local"===s?this.yK.Fl((()=>yp.eo(t))):this.gK.Fl((()=>yp.eo(t)))):yp.eo(t)}no(t){return yp.Kh(t)?("flat"===this.QZ&&(t=t.toLowerCase()),this.VZ&&this.HZ?this.NK(t):"playable-ad-single-file"===this.kc.Tz()?yp.ho(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.rK?this.yK.Fl((()=>yp.no(t))):this.gK.Fl((()=>yp.no(t)))):yp.no(t)}so(t){return yp.Kh(t)?("flat"===this.QZ&&(t=t.toLowerCase()),this.VZ&&this.HZ?this.EK(t):"playable-ad-single-file"===this.kc.Tz()?yp.oo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.rK?this.yK.Fl((()=>yp.so(t))):this.gK.Fl((()=>yp.so(t)))):yp.so(t)}async io(t){const s=await this.so(t);return JSON.parse(s)}DK(t,s){return"flat"===this.QZ&&(t=t.toLowerCase()),this.kc.wj("runtime","cordova-fetch-local-file",{filename:t,as:s})}EK(t){return this.DK(t,"text")}async IK(t){const s=await this.DK(t,"buffer"),i=pp(t);return new Blob([s],{type:i})}async _K(t){"flat"===this.QZ&&(t=t.toLowerCase());let s=this.JZ.get(t);if(s)return s;const i=await this.IK(t);return s=URL.createObjectURL(i),this.JZ.set(t,s),s}NK(t){return this.DK(t,"buffer")}Yj(t){"flat"===this.QZ&&(t=t.toLowerCase());let s=this.tK+t;return"Gecko"===yp.Ks.ei&&"preview"===this.kc.Tz()&&(s=this.AK(s)),s}Qj(t){return yp.Zh(t)?Promise.resolve(t):this.VZ&&this.HZ?this._K(t):"playable-ad-single-file"===this.kc.Tz()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.QZ&&(t=t.toLowerCase()),Promise.resolve(t))}LK(t){if(yp.Zh(t)||"preview"!==this.kc.Tz()||!this.qZ||!t)return t;try{const s=new URL(t,location.href);return s.searchParams.set("__c3_client_id",this.qZ),s.toString()}catch(s){return console.warn("Invalid iframe URL: "+t),t}}RK(t){return this.Qj(t)}PK(t,s){return(s?"true":"false")+"|"+t}kK(t){const s=!!t.FK;if(t.jK&&!gp.has(t.jK))throw new Error("invalid load policy");const i=this.PK(t.url,s);let e=this.hK.get(i);return e||(e=yp.Qn(yp.zK,this,{url:t.url,size:t.size||0,jK:t.jK||this.rK,FK:s}),this.hK.set(i,e),this.uK||(this.lK+=e.Al(),this.aK.push(e.BK().then((()=>this.UK(e.Al()))))),e)}WK(t){const s=this.PK(t.QK(),t.JK());this.hK.delete(s)}async VK(){try{await Promise.all(this.aK),this.fK=1}catch(t){console.error("Error loading: ",t),this.dK=!0,this.mK()}}YK(){this.uK=!0}HK(){return this.dK}UK(t){this.cK+=t,this.pK.fp()}mK(){const t=yp.Qn(yp.Event,"loadingprogress");this.fK=yp.Zn(this.cK/this.lK,0,1),t.progress=this.fK,this.kc.gf().dispatchEvent(t),this.kc.qK(yp.Qn(yp.Event,"loadingprogress"))}FF(){return this.fK}zF(){return this.kc.KK().ZK()}XK(t){yp.xh(this.oK,t),this.oK.length&&this.aK.push(this.$K())}async $K(){const t=[],s=[];for(const[i,e,n]of this.oK)this.lK+=n,t.push(this.tX(i,e,s).then((()=>this.UK(n))));await Promise.all(t),this.kc.vk()&&s.length>0&&await this.kc.wj("runtime","load-webfonts",{webfonts:s})}async tX(t,s,i){try{let e=await this.Qj(s);"Gecko"===yp.Ks.ei&&(t=`'${t}'`),("Gecko"===yp.Ks.ei&&"preview"===this.kc.Tz()||"playable-ad-single-file"===this.kc.Tz())&&(e=this.AK(e));const n=new FontFace(t,`url('${e}')`);this.kc.vk()?self.fonts.add(n):document.fonts.add(n),await n.load(),this.kc.vk()&&i.push({name:t,url:e})}catch(s){console.warn(`[C3 runtime] Failed to load web font '${t}': `,s)}}sX(t){return!!this.ZZ[t]}iX(t,s){this.XZ=!!s;for(const[s,i,e]of t)this.KZ.set(s,{fileName:s,eX:i.map((t=>({type:t[0],nX:t[1],fullName:s+t[1],fileSize:t[2]}))),rX:e})}hX(t){"flat"===this.QZ&&(t=t.toLowerCase());const s=this.KZ.get(t);if(!s)return null;let i=null;for(const t of s.eX)if(i||"audio/webm; codecs=opus"!==t.type||(i=t),this.sX(t.type))return t;return i}oX(t){const s=this.hX(t);return s?{url:this.Yj(s.fullName),type:s.type}:null}aX(){if(this.XZ){const t=[];for(const s of this.KZ.values()){if(s.rX)continue;const i=this.hX(s.fileName);i&&t.push({uX:s.fileName,url:this.Yj(i.fullName),type:i.type,fileSize:i.fileSize})}return t}return[]}lX(t){return"preview"===this.kc.Tz()&&(t=new URL(t,location.href).toString()),this.eK.get(t)||null}AK(t){let s=this.nK.get(t);if(s)return s;const i=this.lX(t);return i?(s=URL.createObjectURL(i),this.nK.set(t,s),s):t}ek(){return this.MK}async Xj(...t){const s=await Promise.all(t.map((t=>this.Qj(t))));if(this.kc.vk())if(1===t.length){const s=t[0];await import((yp.Kh(s)?"./":"")+s)}else{const s=t.map((t=>`import "${yp.Kh(t)?"./":""}${t}";`)).join("\n"),i=URL.createObjectURL(new Blob([s],{type:"application/javascript"}));await import(i)}else await Promise.all(s.map((t=>mp(t))))}async tz(t){if(WebAssembly.compileStreaming){const s=await this.Qj(t);return await WebAssembly.compileStreaming(fetch(s))}{const s=await yp.no(t);return await WebAssembly.compile(s)}}async iz(t){const s=await this.Qj(t);return await this.kc.wj("runtime","add-stylesheet",{url:s})}}}{const wp=self.Gs;wp.cX=class extends wp.Un{constructor(t,s){super(),this.fX=t,this.kc=t.Fj(),this.dX=s.url||"",this.pX=s.size,this.mX=s.jK,this.yX=s.blob||null,this.gX=!!this.yX,this.gM=null}Jn(){this.gM=null,this.fX=null,this.kc=null,this.yX=null}QK(){return this.dX}Al(){return this.pX}BK(){return"local"===this.mX||this.yX?(this.gX=!0,Promise.resolve()):(this.gM||(this.gM=this.fX.eo(this.dX,this.mX).then((t=>(this.gX=!0,this.gM=null,this.yX=t,t))).catch((t=>{console.error("Error loading resource: ",t),this.gM=null}))),this.gM)}MX(){return this.gX}wX(){return this.yX?Promise.resolve(this.yX):this.gM?this.gM:this.fX.eo(this.dX,this.mX)}}}{const Sp=self.Gs,Tp=new Sp.Wd,bp=new Set;Sp.zK=class extends Sp.cX{constructor(t,s){super(t,s),this.SX=null,this.TX=null,this.Wp=0,this.bX=-1,this.vX=-1,this.xX=!!s.FK,bp.add(this)}Jn(){if(0!==this.Wp)throw new Error("released image asset which still has texture references");this.fX.WK(this),this.SX=null,bp.delete(this),super.Jn()}static CX(){for(const t of bp)t.SX=null,t.TX=null,t.Wp=0}MZ(t,s){return s=s||{},this.Wp++,this.TX?Promise.resolve(this.TX):(this.SX||(s.Qv=this.kc.Cj().GX(),this.SX=this.IX(t,s)),this.SX)}async IX(t,s){try{const i=await this.wX();return 0===this.Wp?(this.SX=null,null):await Tp.Fl((async()=>{const e=await t.BL(i,s);return this.SX=null,0===this.Wp?(t.nC(e),null):(this.TX=e,this.bX=e.Vy(),this.vX=e.ig(),this.TX)}))}catch(t){throw console.error("Failed to load texture: ",t),t}}QE(){if(this.Wp<=0)throw new Error("texture released too many times");this.Wp--,0===this.Wp&&this.TX&&(this.TX.lb().nC(this.TX),this.TX=null)}NX(){return this.Wp}lC(){return this.TX}Vy(){return this.bX}ig(){return this.vX}JK(){return this.xX}async EX(){const t=await this.wX();return Sp.Di.ImageBitmap?await createImageBitmap(t):await Sp.uo(t)}}}{let vp=function(t,s){return t.lj().DX()-s.lj().DX()};0;const xp=self.Gs;self.assert;xp._X=class extends xp.Un{constructor(t,s,i){super(),this.AX=t,this.Na=s,this.Ea=i,this.LX=[],this.OX=!0,this.RX=new Set,this.PX=!1}Jn(){xp.wh(this.LX),this.RX.clear(),this.AX=null}Ff(){xp.wh(this.LX),this.OX=!0,this.RX.clear(),this.PX=!1}kX(){this.OX=!1}El(){return!this.LX.length||!(this.LX.length>this.RX.size)&&(this.FX(),!0)}jX(t){if(this.RX.has(t))return this.RX.delete(t),void(0===this.RX.size&&(this.PX=!1));this.LX.push(t),this.OX=1===this.LX.length}Zf(t){this.RX.add(t),this.PX=!0,this.RX.size>=50&&this.FX()}FX(){this.PX&&(this.LX.length!==this.RX.size?(xp.Eh(this.LX,this.RX),this.RX.clear(),this.PX=!1):this.Ff())}zX(){this.OX||(this.LX.sort(vp),this.OX=!0)}BX(t){this.FX(),this.zX(),this.LX.length&&t.push(this.LX)}}}{const Cp=self.Gs;Cp.UX=class extends Cp.Un{constructor(t,s){super(),this.WX=t,this.QX=s,this.JX=Cp.Qn(Cp.Gl)}Jn(){this.JX.Jn(),this.JX=null}VX(t,s,i){let e=this.JX.Js(t,s);return e||(i?(e=Cp.Qn(Cp._X,this,t,s),this.JX.Set(t,s,e),e):null)}YX(t){return Math.floor(t/this.WX)}HX(t){return Math.floor(t/this.QX)}qX(t,s,i){if(s)for(let e=s.Ka(),n=s.$a();e<=n;++e)for(let n=s.Xa(),r=s.tu();n<=r;++n){if(i&&i.vu(e,n))continue;const s=this.VX(e,n,!1);s&&(s.Zf(t),s.El()&&this.JX.Dl(e,n))}if(i)for(let e=i.Ka(),n=i.$a();e<=n;++e)for(let n=i.Xa(),r=i.tu();n<=r;++n)s&&s.vu(e,n)||this.VX(e,n,!0).jX(t)}ZX(t,s){let i=this.YX(t.Ka());const e=this.HX(t.Xa()),n=this.YX(t.$a()),r=this.HX(t.tu());for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this.VX(i,t,!1);e&&e.BX(s)}}KX(t){let s=t.Ka();const i=t.Xa(),e=t.$a(),n=t.tu();for(;s<=e;++s)for(let t=i;t<=n;++t){const i=this.VX(s,t,!1);i&&i.kX()}}}}{let Gp=function(t,s){return t.lj().DX()-s.lj().DX()},Ip=function(t,s){return t.lj().Hb()-s.lj().Hb()};0;const Np=self.Gs,Ep=(self.assert,new Np.Rect),Dp=new Np.Iu,_p=[],Ap=(new Np.Rect,new Np.Rect,self.hs),Lp=Ap.gs,Op=Ap.Ms,Rp=Ap.fs,Pp=Rp.create(),kp=Lp.create(),Fp=Op.create(),jp=Lp.create(),zp=Lp.create(),Bp=Lp.create(),Up=Np.Qn(Np.Ia),Wp=(Np.Qn(Np.Rect),[]),Qp=[],Jp=[],Vp={name:"",XX:-1,$X:!1,isVisible:!0,qU:!0,XU:!1,backgroundColor:[1,1,1,1],MW:!0,t$:[1,1],opacity:1,TW:!1,s$:!1,i$:!1,e$:!1,rW:1,VR:0,mW:0,n$:[],r$:[],h$:[]};Np.o$=class extends Np.Un{constructor(t,s,i){super(),i=Object.assign({},Vp,i),this.a$=t,this.kc=t.Fj(),this.u$=s,this.Hn=i.name,this.IM=-1,this.l$=!!i.XU,this.c$=-1,this.f$=i.XX,this.d$=!!i.$X,this.p$=!!i.isVisible,this.m$=!!i.qU,this.y$=Np.Qn(Np.vo),this.y$.ga(i.backgroundColor),this.g$=!!i.MW,this.M$=i.t$[0],this.w$=i.t$[1],this.Eb=Np.Qn(Np.vo,1,1,1,i.opacity),this.S$=Np.Qn(Np.vo),this.T$=!!i.TW,this.b$=!!i.s$,this.v$=!!i.i$,this.x$=!!i.e$,this.C$=i.rW,this.Nb=i.VR,this.G$=null,this.I$=1,this.Db=i.mW,this.N$=0,this.E$=0,this.D$=0,this._$=!1,this.F_=Np.Qn(Np.Rect),this.A$=Np.Qn(Np.Rect),this.L$=Np.Qn(Np.Rect),this.O$=!0,this.Hx=Rp.create(),this.R$=!0,this.DR=Rp.create(),this.P$=!0,this.k$=Np.Qn(Np.OM.FM),this.F$=!0,this.j$=[],this.z$=i.n$,this.B$=[],this.U$=[],this.W$=new Map,this.LX=[],this.Q$=!1,this.J$=!1,this.V$=!1;const e=this.kc.Cj();this.Y$=Np.Qn(Np.H$,this,i.r$),this.qP=Np.Qn(Np.OM.jO,e.q$(),{NO:(t,s)=>{const i=s.BP(),n=i.kL();t.Lb(i.Z$()),t.JL(n),t.VL(n),e.K$(n)},DO:t=>this.eU().X$(t)}),this.$$=!0,this.t0=!0,this.s0=null,this.i0=[],this.e0=!1,this.n0=Np.Qn(Np.Rect,0,0,-1,-1),this.r0=Np.Qn(Np.Rect,0,0,-1,-1),this.h0=new self.bU(this),this.o0(),this.a0()&&(this.s0=Np.Qn(Np.UX,this.kc.Ck(),this.kc.Ik())),this.u0=i.h$.map((t=>Np.o$.l0(this.a$,this,t)))}c0(){for(const t of this.z$){const s=this.kc.f0(t[1]);this.a$.d0(s),s.p0()||(s.m0(t),s.y0(this.IM)),this.B$.push(t),this.W$.set(t[2],t)}Np.xh(this.j$,this.B$),this.z$=null}static l0(t,s,i){return Np.Qn(Np.o$,t,s,{name:i[0],XX:i[2],isVisible:i[3],qU:i[13],XU:i[19],backgroundColor:i[4].map((t=>t/255)),MW:i[5],t$:[i[6],i[7]],opacity:i[8],TW:i[9],s$:i[17],i$:i[18],e$:i[10],rW:i[11],VR:i[12],mW:i[16],n$:i[14],r$:i[15],h$:i[20]})}Jn(){for(const t of this.u0)t.Jn();Np.wh(this.u0);for(const t of this.LX)this.kc.YW(t);Np.wh(this.LX),this.Y$.Jn(),this.Y$=null,this.qP.Jn(),this.qP=null,this.h0=null,this.u$=null,this.a$=null,this.kc=null}Vn(){return!this.a$}g0(t){return this.W$.get(t)}M0(t){const s=this.a$.w0(),i=this.B$;let e=0;for(let n=0,r=i.length;n<r;++n){const r=i[n],h=this.kc.f0(r[1]);let o=!0;if(!h.S0()||s){const s=this.kc.T0(r,this,!0);t.push(s),h.b0()&&(o=!1,this.U$.push(s.tQ()))}o&&(i[e]=i[n],++e)}Np.Mh(i,e),this.kc.JB(),this.yj()}v0(t,s){if(!t.TB().Kz())throw new Error("instance is not of world type");const i=t.lj();if(i.cj()!==this)throw new Error("instance added to wrong layer");this.LX.push(t),0!==i.Hb()&&(this.V$=!0),s&&this.a0()&&t.lj().XQ(),this.yj(t)}x0(t){this.LX.includes(t)||(this.LX.push(t),0!==t.lj().Hb()&&(this.V$=!0),this.yj(t))}C0(t,s){const i=t.lj();if(i.cj()!==this)throw new Error("instance added to wrong layer");this.LX.unshift(t),0!==i.Hb()&&(this.V$=!0),this.yj(t),s&&this.a0()&&t.lj().XQ()}G0(t,s){const i=this.LX.indexOf(t);i<0||(s&&this.a0()&&t.lj().I0(),this.LX.splice(i,1),this.yj(t),this.N0())}E0(){this.V$=!0}N0(){0===this.LX.length&&(this.V$=!1)}D0(t){if(t){const t=new Set;for(const s of this.LX){const i=s.lj().DX();i>=0&&t.add(i)}let s=-1;for(const i of this.LX){const e=i.lj();if(!(e.DX()>=0)){for(++s;t.has(s);)++s;e._0(s)}}}this.LX.sort(Gp)}A0(){}L0(){for(const t of this.LX)t.BW().b0()||this.kc.YW(t);this.kc.JB(),Np.wh(this.LX),this.V$=!1,this.yj()}O0(t,s,i,e,n,r){const h=this.kc.jk(),o=this.kc.R0(),a=t.P0(),u=[];for(const l of this.B$){const c=l[0],f=c[0],d=c[1];if(!s.vu(f,d))continue;const p=o[l[1]];if(p!==t){if(!a)continue;if(!t.sU(p))continue}let m=n;if(!m){const t=this.kc.aj();this.VF()===t?m=this:(m=t.k0(this.Nc()),m||(m=t.dj(this.$P())))}const y=this.kc.T0(l,m,!1,void 0,void 0,!1,r);m.zB(y);const g=y.lj();g.sJ(i,e),g.XQ(),h.BB(!0),y.UB(),h.BB(!1),u.push(y)}return u}PB(){return this.LX.length}VF(){return this.a$}Nc(){return this.Hn}F0(t){this.IM=t}$P(){return this.IM}j0(t){this.c$=t}FH(){return this.c$}$U(){return this.l$}tW(t){t=!!t,this.l$!==t&&(this.l$=t,this.a$.z0(),this.kc.gj())}B0(){let t=-1;const s=this.jU();return t=s?s.UU().indexOf(this):this.VF().U0().indexOf(this),t}W0(){return this.f$}Fj(){return this.kc}Q0(){return this.d$}J0(){for(const t of this.zU())if(t.Q0())return!0;return!1}jz(){return this.kc.jz()}eU(){return this.Y$}XP(){return this.V0(),this.qP}V0(){const t=this.Y0();if(!this.$$&&t===this.t0&&!this.qP._R())return;const s=this.eU().H0();this.qP.AR(s.map((t=>t.EG())),{AO:s.map((t=>t.$P())),LO:!t,FO:!0}),this.$$=!1,this.t0=t}HV(){this.eU().HV(),this.$$=!0}a0(){return this.x$&&!this.v$}q0(){return this.s0}Z0(){this.e0=!1}HU(){for(const t of this.K0())if(!t.JU())return!1;return!0}JU(){return this.p$}VU(t){t=!!t,this.p$!==t&&(this.p$=t,this.kc.gj())}KU(t){this.m$=!!t}ZU(){return this.m$}iW(){for(const t of this.K0())if(!t.ZU())return!1;return!0}IW(t){if(t=!!t,this._$!==t){if(this._$=t,t){const t=this.VF();this.E$=t.fU(),this.D$=t.pU()}this.X0(),this.kc.gj()}}$0(){return this._$}cU(t){const s=this.VF(),i=s.t1(),e=s.s1();t>e&&(t=e),t<i&&(t=i),this.E$!==t&&(this.E$=t,this.$0()&&(this.X0(),this.kc.gj()))}dU(t){const s=this.VF(),i=s.i1(),e=s.e1();t>e&&(t=e),t<i&&(t=i),this.D$!==t&&(this.D$=t,this.$0()&&(this.X0(),this.kc.gj()))}fU(){return this.$0()?this.E$:this.VF().fU()}pU(){return this.$0()?this.D$:this.VF().pU()}EW(){return this.n1(),this.F_}h1(){return this.n1(),this.A$}o1(){return this.n1(),this.L$}OU(){const t=this.VF();return[t.a1(),t.u1()]}zw(t){return this.kc.zw(t)}l1(t,s){const i=this.h1();if(0===t)s.m(i);else{let e=i.ru(),n=i.hu();const r=this.c1(t),h=i.width()/r,o=i.height()/r,[a,u]=this.OU();if(.5!==a||.5!==u){const s=this.f1(),i=this.kc,r=this.zw()/s;let h=(a-.5)*i.d1()/r,o=(u-.5)*i.m1()/r;const l=this.lU();0!==l&&(Up.set(h,o),Up.rotate(l),h=Up.Aa(),o=Up.Oa());const c=Np.pr(s,0,t);e+=Np.Gt(h,0,c),n+=Np.Gt(o,0,c)}s.set(e-h/2,n-o/2,e+h/2,n+o/2)}}$A(){return this.Eb.zo()}sL(t){t=Np.Zn(t,0,1),this.Eb.zo()!==t&&(this.Eb.Ro(t),this.o0(),this.kc.gj())}o0(){this.S$.m(this.Eb),this.S$.Zo()}Z$(){return this.S$}Y0(){return this.Eb.Vo(1,1,1,1)}oW(){return this.C$}hW(t){this.C$!==t&&(this.C$=t,this.X0(),this.kc.gj())}cW(){return this.M$}pW(){return this.w$}g1(t,s){this.M$===t&&this.w$===s||(this.M$=t,this.w$=s,this.X0(),this.kc.gj())}lW(t){this.g1(t,this.pW())}dW(t){this.g1(this.cW(),t)}qb(t){this.Db!==t&&(this.Db=t,this.kc.gj())}Hb(){return this.Db}uU(t){t=Np.Kn(t),this.N$!==t&&(this.N$=t,this.X0(),this.kc.gj())}lU(){return Np.Kn(this.a$.lU()+this.N$)}aW(){return this.N$}M1(){return this.LX.length>0}pj(){return this.LX}w1(){return this.S1()&&this.v$?(Np.xh(Jp,this.pj()),Jp.sort(((t,s)=>this.T1(t,s))),Jp):this.pj()}b1(t){Np.An(t,this.w1());for(const s of this.u0)s.HU()&&s.$A()>0&&s.b1(t)}T1(t,s){const i=this.VF().v1(),e=i[0],n=i[1],r=i[2],h=t.lj(),o=s.lj(),a=h.Wb()-e,u=h.Vb()-n,l=h.Hb()-r,c=o.Wb()-e,f=o.Vb()-n,d=o.Hb()-r;return c*c+f*f+d*d-(a*a+u*u+l*l)}GW(){return this.y$}SW(){return this.g$}wW(t){t=!!t,this.g$!==t&&(this.g$=t,this.kc.gj())}vW(){return this.T$}bW(t){t=!!t,this.T$!==t&&(this.T$=t,this.kc.gj())}yW(t){t=!!t,this.b$!==t&&(this.b$=t,this.X0(),this.kc.gj())}gW(){return this.b$}C1(){return!this.Fj().G1()||!this.b$}S1(){return!this.C1()}I1(){return this.S1()&&this.VF().N1()}E1(){if(!this.I1())return!1;for(const t of this.u0)if(!t.E1())return!1;return!0}Ab(t){this.Nb!==t&&(this.Nb=t,this.kc.gj())}xW(){return this.Nb}D1(){return!this.u$}jU(){return this.u$}_1(t){this.u$=t}UU(){return this.u0}A1(){return this.u0.length>0}L1(t,s=!0){s?this.u0.push(t):this.u0.unshift(t)}O1(t,s,i){let e=this.u0.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.u0.splice(e,0,t)}R1(t){const s=this.u0.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.u0.splice(s,1)}P1(){for(const t of this.u0)if(t.F1())return!0;return!1}*QU(){for(const t of this.u0)yield*t.QU();yield this}*zU(){let t=this.jU();for(;t;)yield t,t=t.jU()}*K0(){yield this,yield*this.zU()}j1(t){for(const s of this.zU())if(s===t)return!0;return!1}z1(t){return this===t||this.M$===t.M$&&this.w$===t.w$&&this.I$===t.I$&&this.C$===t.C$&&this.N$===t.N$&&this.fU()===t.fU()&&this.pU()===t.pU()}B1(){return{parallaxX:this.cW(),parallaxY:this.pW(),scale:this.nW(),scaleRate:this.oW(),angle:this.aW(),hasOwnScroll:this.$0(),scrollX:this.fU(),scrollY:this.pU()}}U1(t){this.g1(t.parallaxX,t.parallaxY),this.eW(t.scale),this.hW(t.scaleRate),this.uU(t.angle),this.IW(t.hasOwnScroll),this.cU(t.scrollX),this.dU(t.scrollY),this.n1()}W1(t){0!==t.size&&Np.Eh(this.LX,t)>0&&(this.N0(),this.yj())}yj(t){this.Q$=!1,this.e0=!1,t&&!t.BW().TB().$z()||(this.J$=!1)}Q1(){if(!this.Q$){if(this.LX.sort(Ip),this.a0())for(let t=0,s=this.LX.length;t<s;++t){const s=this.LX[t].lj();s._0(t),this.s0.KX(s.J1())}else for(let t=0,s=this.LX.length;t<s;++t)this.LX[t].lj()._0(t);this.Q$=!0}}V1(){if(this.J$)return;const t=this.a$.Y1(this.FH()).map((t=>[...t.QU()])).flat();let s=0;for(const i of t){for(const t of i.pj())t.BW().TB().$z()&&t.lj().H1(s++);i.q1()}}q1(){this.J$=!0}Z1(){return{isVisible:this.HU(),opacity:this.$A(),isInteractive:this.ZU()}}K1(t,s,i){const e=t.lj(),n=s.lj();if(e.cj()!==this||n.cj()!==this)throw new Error("can't arrange Z order unless both objects on this layer");const r=e.fj();let h=n.fj();return r!==h+(i?1:-1)&&(Np.Ch(this.LX,r),r<h&&h--,i&&h++,h===this.LX.length?this.LX.push(t):this.LX.splice(h,0,t),this.yj(t),!0)}X1(t,s){const i=[];let e=0,n=0,r=t.length,h=s.length;for(;e<r&&n<h;){const r=t[e],h=s[n];r.lj().DX()<h.lj().DX()?(i.push(r),++e):(i.push(h),++n)}for(;e<r;++e)i.push(t[e]);for(;n<h;++n)i.push(s[n]);return i}t2(t){const s=[],i=t.length;for(let e=0;e<i-1;e+=2){const i=t[e],n=t[e+1];s.push(this.X1(i,n))}return i%2==1&&s.push(t[i-1]),s}s2(t){for(;t.length>1;)t=this.t2(t);return t[0]}i2(){return this.Q1(),Np.wh(_p),this.s0.ZX(this.EW(),_p),_p.length?1===_p.length?_p[0]:this.s2(_p):[]}F1(){return this.HU()&&this.$A()>0&&this.e2()}e2(){if(this.M1()||!this.SW())return!0;for(const t of this.u0)if(t.e2())return!0;return!1}n2(){return this.vW()||!this.Y0()||0!==this.xW()||this.Y$.h2()}o2(){if(this.n2())return!0;for(const t of this.u0)if(t.o2())return!0;return!1}kL(){return this.G$}c1(t){if(this.a$.kU())return 1;{const s=this.a2();return s/(s-t)}}u2(t){const s=this.kc.jW();if(this.a$.kU())return s;{const i=this.a2();return this.zw()/Math.abs(i-t)*s}}X0(){this.P$=!0,this.F$=!0,this.O$=!0}l2(t){return this.P$&&(this.c2(t,this.DR,0,0,null),this.P$=!1),this.DR}f1(t){return this.zw(t)/this.f2()}a2(){return this.I1()?this.VF().v1()[2]:this.f1()}d2(){if(this.I1()){const t=this.VF().v1();return[t[0],t[1],t[2]]}return this.m2()}m2(t=0,s=0,i=0){const e=this.kc,n=this.VF(),r=e.g2(),h=e.M2();let o=(this.fU()-r)*this.M$+r,a=(this.pU()-h)*this.w$+h;e.Dk()&&(o=Math.round(o),a=Math.round(a));let u=o+t,l=a+s;const c=n.kU()?this.zw(i):this.f1(i),[f,d]=this.OU();if(.5!==f||.5!==d){const t=this.zw(i)/c;let s=(f-.5)*e.d1()/t,n=(d-.5)*e.m1()/t;const r=this.lU();0!==r&&(Up.set(s,n),Up.rotate(r),s=Up.Aa(),n=Up.Oa()),u+=s,l+=n}return[u,l,c]}c2(t,s,i,e,n){const r=this.kc,h=this.VF();if(this.I1()){Lp.m(jp,h.v1()),Lp.m(zp,h.w2()),Lp.m(Bp,h.S2());const t=r.g2(),s=r.M2(),i=zp[0]-jp[0],e=zp[1]-jp[1],n=zp[2]-jp[2];jp[0]=(jp[0]-t)*this.M$+t,jp[1]=(jp[1]-s)*this.w$+s,jp[2]*=Math.max(this.M$,this.w$),zp[0]=jp[0]+i,zp[1]=jp[1]+e,zp[2]=jp[2]+n}else{const[t,s,r]=this.m2(i,e,n);Lp.set(jp,t,s,r),Lp.set(zp,t,s,r-100);const h=this.lU();0===h?Lp.set(Bp,0,1,0):Lp.set(Bp,Math.sin(h),Math.cos(h),0)}t.iS(s,jp,zp,Bp,n||r.m1())}T2(){this.R$=!0,this.F$=!0,this.O$=!0}b2(t){return this.R$&&(this.v2(t),this.R$=!1),this.Hx}v2(t){const s=this.kc.Cj(),[i,e]=this.OU();if(this.a$.kU())t.sS(this.Hx,s.C2(),s.G2());else if(.5===i&&.5===e)Rp.m(this.Hx,s.I2());else{const n=s.C2(),r=s.G2();t.$w(this.Hx,n/r,i,e)}}NZ(t,s=!0,i=0,e=0,n=0){s&&t.UA(this.b2(t));let r=null;0===i&&0===e&&0===n?r=this.l2(t):(this.c2(t,Pp,i,e,n),r=Pp),t.HA(r)}N2(t){this.NZ(t),t.zS(this.Hb())}E2(t){let s=null;if(t.PT()&&this.kc.D2()){const i=this.kc.Cj()._2(this);i&&(s=i.C_(),t.XL(s))}return s}A2(t){if(t.tS()&&this.kc.D2()){const s=2*(this.$P()+1);t.L2(s,s+1)}}Av(t,s,i){const e=this.kc.Cj(),n=this.n2();let r=null;const h=this.E2(t);if(this.A2(t),n){const s={Wv:this.kc.Nk(),Px:!0,O2:!!t.tS()&&this.kc.R2()};"low"===e.P2()&&(s.width=e.C2(),s.height=e.G2()),r=this.kc.F2(s),this.G$=r,t.WL(r),this.SW()&&t.DL(0,0,0,0)}else this.G$=s,t.WL(s);if(this.SW()||t.Nl(this.y$),this.a$.j2(t,this.G$,this.u0,n&&this.SW()),this.A2(t),this.NZ(t),t.zS(this.Hb()),t.LL(this.S1()),this.f2()>Number.EPSILON){this.Q1();const s=this.a0()&&0===this.Hb()&&!this.V$;this.I1()?this.z2(t):s?this.B2(t):this.U2(t,this.w1())}t.zS(0),t.US(0),n&&(t.LL(!1),this.W2(t,r,s,i)),h&&t.tO(h),this.G$=null}U2(t,s){const i=this.EW(),e=this.G$,n=this.VF().kU(),r=this.VF().Q2();let h=null;for(let o=0,a=s.length;o<a;++o){const a=s[o];if(a===h)continue;h=a;const u=a.lj();u.HU()&&u.J2(i,r,n)&&this.V2(a,u,t,e)}}z2(t){const s=this.G$,i=this.Y2(),e=Wp,n=Qp,r=this.w1();for(let h=0,o=r.length;h<o;){const a=r[h],u=a.lj();if(!u.HU()||!u.H2(i)){++h;continue}(!a.q2()||u.Z2()>0)&&n.push(a);const l=a.lj().cJ();e.push(a);let c=h+1;for(;c<o;++c){const t=r[c],s=t.lj();if(s.HU()&&s.H2(i)){if(s.cJ()!==l)break;t.q2()?(s.Z2()>0&&n.push(t),e.push(t)):n.push(t)}}if(1!==e.length||e[0].K2()){this.X2(t,e);for(let i=0,e=n.length;i<e;++i){const e=n[i],r=e.lj();r.t4(!0),this.V2(e,r,t,s),r.t4(!1)}}else{this.V2(a,u,t,s);for(let i=0,e=n.length;i<e;++i){const e=n[i];if(e===a)continue;const r=e.lj();r.cj().V2(e,r,t,s)}}h=c,Np.wh(e),Np.wh(n)}}X2(t,s){const i=this.G$;t.HL();for(let i=0,e=s.length;i<e;++i){const e=s[i],n=e.lj();n.s4(!0),this.i4(e,n,t)}t.qL();for(let e=0,n=s.length;e<n;++e){const n=s[e],r=n.lj();this.V2(n,r,t,i),r.s4(!1)}t.KL()}B2(t){const s=this.s0,i=this.r0,e=this.n0,n=this.EW();let r;i.set(s.YX(n.Ka()),s.HX(n.Xa()),s.YX(n.$a()),s.HX(n.tu())),this.e0&&i.equals(e)?r=this.i0:(r=this.i2(),this.e0=!0,e.m(i)),this.U2(t,r),r!==this.i0&&Np.xh(this.i0,r)}V2(t,s,i,e){s.h2()?this.e4(t,s,i,e):this.i4(t,s,i)}i4(t,s,i){const e=s.n4();i.vS()!==e&&e._b(),t.Av(i)}e4(t,s,i,e){this.r4(t,s,i,e,null)&&this.NZ(i)}r4(t,s,i,e,n){const r=s.ZQ().XP();return r.UR(i,e,{QR:t,VR:s.xW(),devicePixelRatio:this.kc.h4(),time:t.o4(),YR:this.kc.a4()*this.f2(),HR:this.lU(),wP:s.pJ(),SP:r.jP()?null:this.u4(s),sP:n&&n.sP,iP:n&&n.iP,eP:n&&n.eP,nP:n&&n.nP,rP:n&&n.rP,hP:n&&n.hP}),i.zS(this.Hb()),r.ZA()}W2(t,s,i,e){const n=this.Y$.H0(),r=this.kc;0===n.length?(t.WL(i),t.aS(),e&&0===this.Nb&&this.Y0()?t.QL(s):(t.Ab(this.Nb),t.Lb(this.S$),t.JL(s)),t.VL(s),r.K$(s)):this.XP().UR(t,i,{QR:this,VR:this.xW(),devicePixelRatio:r.h4(),YR:r.a4()*this.f2(),HR:this.lU(),wP:this.EW(),SP:null,_O:!0})}nW(){return this.I$}eW(t){this.I$!==t&&(this.I$=t,this.a$.l4(),this.X0(),this.kc.gj())}jW(){return this.f2()*this.kc.jW()}VH(){return this.f2()*this.kc.VH()}f2(){return(this.I$*this.a$.aU()-1)*this.C$+1}n1(){if(!this.O$)return;this.O$=!1;const t=this.kc.g2(),s=this.kc.M2(),i=(this.fU()-t)*this.M$+t,e=(this.pU()-s)*this.w$+s,n=this.f2(),r=this.kc.d1()/n,h=this.kc.m1()/n;let o=i-r/2,a=e-h/2;this.kc.Dk()&&(o=Math.round(o),a=Math.round(a));const u=this.A$;u.set(o,a,o+r,a+h);const l=this.lU();0!==l&&(Ep.m(u),Ep.offset(-u.ru(),-u.hu()),Dp.qu(Ep,l),Dp.Ku(Ep),Ep.offset(u.ru(),u.hu()),u.m(Ep));const c=this.Db;this.l1(c,this.F_),this.I1()?this.c4(c,this.L$):this.L$.m(this.F_)}c4(t,s){const i=this.kc.Cj(),e=i.Az(),n=i.Oz(),[r,h]=this._W(0,0,t),[o,a]=this._W(e,0,t),[u,l]=this._W(e,n,t),[c,f]=this._W(0,n,t);let d=Math.min(r,o,u,c),p=Math.min(h,a,l,f),m=Math.max(r,o,u,c),y=Math.max(h,a,l,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(y)||(y=1/0),s.set(d,p,m,y)}_W(t,s,i=0){return this.f4(t,s,i,this.VH())}RW(t,s,i=0){return this.f4(t,s,i,this.jW()*this.jz())}f4(t,s,i,e){const n=this.kc,r=n.lb(),h=this.f2(),o=n.d1()/h,a=n.m1()/h,u=Fp;Op.set(u,0,0,o,a),t/=e,s=u[3]-s/e;const l=this.b2(r),c=this.l2(r),f=kp;return Np.OM.kM(t,s,i,c,l,u,f)?[f[0],f[1]]:[NaN,NaN]}d4(t,s){const i=this.I$,e=this.C$,n=this.M$,r=this.w$,h=this.N$;this.I$=1,this.C$=1,this.M$=1,this.w$=1,this.N$=0,this.X0();const o=this._W(t,s);return this.I$=i,this.C$=e,this.M$=n,this.w$=r,this.N$=h,this.X0(),o}LW(t,s,i=0){return this.m4(t,s,i,this.VH())}kW(t,s,i=0){return this.m4(t,s,i,this.jW()*this.jz())}m4(t,s,i,e){const n=this.kc,r=n.lb(),h=this.f2(),o=n.d1()/h,a=n.m1()/h,u=Fp;Op.set(u,0,0,o,a);const l=this.b2(r),c=this.l2(r),f=kp;return Np.OM.RM(t,s,i,c,l,u,f)?[f[0]*e,(u[3]-f[1])*e]:[NaN,NaN]}y4(t,s){return t*=this.jW()*this.jz(),0!==s&&(t*=this.c1(s)),t}u4(t){const s=t.pJ(),i=t.cJ(),e=t.Z2(),n=i+e,r=s.Ka(),h=s.Xa(),o=s.$a(),a=s.tu();if(this.I1()){if(this.g4(r,h,i)||this.g4(o,h,i)||this.g4(o,a,i)||this.g4(r,a,i))return null;if(e>0&&(this.g4(r,h,n)||this.g4(o,h,n)||this.g4(o,a,n)||this.g4(r,a,n)))return null}else if(n>=this.f1())return null;let[u,l]=this.kW(r,h,i),[c,f]=this.kW(o,a,i);if(0!==this.lU()||e>0||this.I1()){const[t,s]=this.kW(o,h,i),[d,p]=this.kW(r,a,i);if(e>0){const[i,e]=this.kW(r,h,n),[m,y]=this.kW(o,h,n),[g,M]=this.kW(o,a,n),[w,S]=this.kW(r,a,n);let T=Math.min(u,c,t,d,i,m,g,w);c=Math.max(u,c,t,d,i,m,g,w),u=T,T=Math.min(l,f,s,p,e,y,M,S),f=Math.max(l,f,s,p,e,y,M,S),l=T}else{let i=Math.min(u,c,t,d);c=Math.max(u,c,t,d),u=i,i=Math.min(l,f,s,p),f=Math.max(l,f,s,p),l=i}}return Ep.set(u,l,c,f),Ep}Y2(){return this.F$&&(this.M4(),this.F$=!1),this.k$}M4(){const t=this.kc.lb(),s=this.b2(t),i=this.l2(t);this.k$.JM(i,s)}g4(t,s,i){return this.Y2().YM(t,s,i)}w4(){return{d:this.Q0(),s:this.nW(),a:this.aW(),v:this.JU(),i:this.ZU(),html:this.$U(),bc:this.y$.toJSON(),t:this.SW(),sx:this.E$,sy:this.D$,hosp:this._$,px:this.cW(),py:this.pW(),c:this.Eb.toJSON(),sr:this.oW(),fx:this.Y$.ev(),cg:this.U$}}S4(t){this.d$=!!t.d,this.I$=t.s,this.N$=t.a,this.p$=!!t.v,this.m$=!t.hasOwnProperty("i")||t.i,this.l$=!!t.html,this.y$.ga(t.bc),this.g$=!!t.t,t.hasOwnProperty("sx")&&(this.E$=t.sx),t.hasOwnProperty("sy")&&(this.D$=t.sy),t.hasOwnProperty("hosp")&&(this._$=!!t.hosp),this.M$=t.px,this.w$=t.py,this.Eb.ga(t.c),this.o0(),this.C$=t.sr,Np.xh(this.U$,t.cg),Np.xh(this.B$,this.j$);const s=new Set(this.U$);let i=0;for(let t=0,e=this.B$.length;t<e;++t)s.has(this.B$[t][2])||(this.B$[i]=this.B$[t],++i);Np.Mh(this.B$,i),this.Y$.nv(t.fx),this.$$=!0}T4(){this.D0(!1),this.yj(),this.X0(),this.T2()}gU(){return this.h0}zB(t,s=!1,i=!1){if(this.LX.includes(t))return s&&this.LX.sort(((t,s)=>(t.lj().b4()??0)-(s.lj().b4()??0))),void(i&&this.LX.forEach(((t,s)=>t.lj()._0(s))));if(t.v4()){const s=[...t.UJ()];s.push(t),s.sort(((t,s)=>(t.lj().b4()??0)-(s.lj().b4()??0)));for(const t of s)if(t.XW())for(const i of t.$W()){if(s.includes(i))continue;const t=[...i.UJ()];t.push(i),t.sort(((t,s)=>(t.lj().b4()??0)-(s.lj().b4()??0))),t&&t.length&&s.splice(s.length,0,...t)}for(const t of s)t.TB().Kz()&&this.v0(t,!0);i&&this.LX.forEach(((t,s)=>t.lj()._0(s)))}else{if(t.TB().Kz()&&this.v0(t,!0),!t.XW())return void(i&&this.LX.forEach(((t,s)=>t.lj()._0(s))));for(const s of t.$W()){const t=[...s.UJ()];if(t.push(s),t.sort(((t,s)=>(t.lj().b4()??0)-(s.lj().b4()??0))),t&&t.length)for(const s of t)s.TB().Kz()&&this.v0(s,!0)}i&&this.LX.forEach(((t,s)=>t.lj()._0(s)))}}}}{let Yp=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},Hp=function(t,s){nm!==t&&(t.N2(s),nm=t)};0;const qp=self.Gs,Zp=self.AQ,Kp=(self.assert,qp.Qn(qp.Rect),qp.Qn(qp.Rect),qp.Qn(qp.Rect)),Xp=qp.Qn(qp.vo),$p=self.hs.gs,tm=[],sm=[],im=[],em=[];let nm=null;qp.x4=class extends qp.Un{constructor(t,s,i){super(),this.C4=t,this.kc=t.Fj(),this.Hn=i[0],this.G4=i[1],this.I4=i[2],this.Ng=i[1],this.Eg=i[2],this.N4=!!i[3],this.E4=!!i[4],this.D4=i[5],this._4=i[6],this.A4=i[7],this.L4=null,this.f$=i[8],this.IM=s,this.E$=0,this.D$=0,this.I$=1,this.N$=0,this.O4=new Set,this.R4=new Set,this.P4=new Set,this.F4=[],this.j4=[],this.z4=new Map,this.B4=new Map,this.U4=[],this.W4=!1,this.Q4=$p.create(),this.J4=$p.create(),this.V4=$p.create(),this.Y4=[],this.H4=[],this.q4=new Map,this.Z4=new Map,this.K4=-1;const e=this.kc.Cj();this.Y$=qp.Qn(qp.H$,this,i[11]),this.qP=qp.Qn(qp.OM.jO,e.q$(),{NO:(t,s)=>{const i=s.BP().kL();t.iL(),t.JL(i),t.VL(i),e.K$(i)},DO:t=>this.eU().X$(t)}),this.$$=!0,this.X4=!1,this.G$=null,this.t3={},this.s3=new Map,this.i3=!0,this.e3=new self.iU(this),this.n3=qp.Qn(qp.Event.gf);for(const t of i[9])this.Y4.push(qp.o$.l0(this,null,t));this.r3();for(const t of this.SU())t.c0();for(const t of i[10]){const s=this.kc.f0(t[1]);if(!s)throw new Error("missing nonworld object class");s.p0()||s.m0(t),this.U4.push(t),this.d0(s)}}Jn(){for(const t of this.H4)t.Jn();qp.wh(this.H4),this.P4.clear(),this.L4=null,this.C4=null,this.kc=null}Fj(){return this.kc}Nc(){return this.Hn}W0(){return this.f$}$P(){return this.IM}eU(){return this.Y$}XP(){return this.V0(),this.qP}V0(){const t="low"===this.kc.Cj().P2();if(!this.$$&&this.X4===t&&!this.qP._R())return;const s=this.eU().H0();this.qP.AR(s.map((t=>t.EG())),{AO:s.map((t=>t.$P())),OO:t,FO:!0}),this.$$=!1,this.X4=t}HV(){this.eU().HV(),this.$$=!0}h3(){let t=this.H4[0].f2();for(let s=1,i=this.H4.length;s<i;++s){const i=this.H4[s];0===i.cW()&&0===i.pW()||(t=Math.min(t,i.f2()))}return t}o3(){return.5*this.kc.d1()/this.h3()}a3(){return.5*this.kc.m1()/this.h3()}t1(){return this.u3()?-1/0:this.o3()}s1(){return this.u3()?1/0:this.Vy()-this.o3()}i1(){return this.u3()?-1/0:this.a3()}e1(){return this.u3()?1/0:this.ig()-this.a3()}cU(t){const s=this.t1(),i=this.s1();t>i&&(t=i),t<s&&(t=s),this.E$!==t&&(this.E$=t,this.l3(),this.kc.gj())}fU(){return this.E$}dU(t){const s=this.i1(),i=this.e1();t>i&&(t=i),t<s&&(t=s),this.D$!==t&&(this.D$=t,this.l3(),this.kc.gj())}pU(){return this.D$}u3(){return this.N4}l4(){this.cU(this.fU()),this.dU(this.pU());for(const t of this.H4)t.$0()&&(t.cU(t.fU()),t.dU(t.pU()))}AU(t,s){this.D4===t&&this._4===s||(this.D4=t,this._4=s,this.c3()&&(this.f3(),this.l3(),this.kc.gj()))}a1(){return this.kU()?.5:this.D4}u1(){return this.kU()?.5:this._4}Q2(){const t=this.a1(),s=this.u1();return t<0||t>1||s<0||s>1}RU(){this.E4&&(this.E4=!1,this.f3(),this.l3(),this.kc.gj())}PU(){this.E4||(this.E4=!0,this.f3(),this.l3(),this.kc.gj())}kU(){return this.E4}c3(){return!this.kU()}d3(t){t=!!t,this.W4!==t&&(this.W4=t,this.l3(),this.kc.gj())}N1(){return this.W4}m3(t,s,i,e,n,r,h,o,a){Yp(this.Q4,t,s,i)&&Yp(this.J4,e,n,r)&&Yp(this.V4,h,o,a)||($p.set(this.Q4,t,s,i),$p.set(this.J4,e,n,r),$p.set(this.V4,h,o,a),this.y3())}y3(){this.l3(),this.kc.gj()}v1(){return this.Q4}w2(){return this.J4}S2(){return this.V4}aU(){return this.I$}oU(t){this.I$!==t&&(this.I$=t,this.l3(),this.l4(),this.kc.gj())}uU(t){t=qp.Kn(t),this.N$!==t&&(this.N$=t,this.l3(),this.kc.gj())}lU(){return this.N$}Vy(){return this.Ng}$y(t){!isFinite(t)||t<1||(this.Ng=t)}ig(){return this.Eg}Yy(t){!isFinite(t)||t<1||(this.Eg=t)}g3(){return this.L4}U0(){return this.Y4}*SU(){for(const t of this.Y4)yield*t.QU()}wU(){return this.H4}M3(){return this.H4.length}cj(t){return"number"==typeof t?this.dj(t):this.k0(t.toString())}dj(t){return t=qp.Zn(Math.floor(t),0,this.H4.length-1),this.H4[t]}k0(t){return this.q4.get(t.toLowerCase())||null}w3(t){return!!this.k0(t)}S3(t){return this.Z4.get(t)||null}f3(){for(const t of this.H4)t.T2()}l3(){for(const t of this.H4)t.X0()}xU(t,s,i){if(this.w3(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=i>=2?s:s.jU(),n=qp.Qn(qp.o$,this,e,{name:t,XX:Math.floor(1e15*Math.random()),$X:!0});this.T3(n,s,i),this.Fj().gj(),this.z0()}GU(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.b3(t),this.T3(t,s,i),this.Fj().gj(),this.z0())}NU(t){if(this.b3(t)){const s=this.kc.jk();s.BB(!0),t.Jn(),s.BB(!1),this.Fj().gj(),this.z0()}}DU(){const t=new Set;for(const s of this.SU())s.Q0()&&!s.J0()&&t.add(s);if(0===t.size)return;const s=this.kc.jk();s.BB(!0);for(const s of t)this.b3(s),s.Jn();s.BB(!1),this.Fj().gj(),this.z0()}T3(t,s,i){if(i>=2)if(s){if(s===t||s.j1(t))throw new Error(`cannot move layer '${t.Nc()}' to sub-layer of itself`);s.L1(t,2===i),t._1(s)}else 2===i?this.Y4.push(t):this.Y4.unshift(t),t._1(null);else{const e=s.jU();if(e){if(s.j1(t))throw new Error(`cannot move layer '${t.Nc()}' to sub-layer of itself`);e.O1(t,s,0===i),t._1(e)}else{let e=this.Y4.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");0===i&&++e,this.Y4.splice(e,0,t),t._1(null)}}}b3(t){const s=t.jU();if(s)return s.R1(t),!0;if(this.Y4.length>1){const s=this.Y4.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");return this.Y4.splice(s,1),!0}return!1}r3(){this.H4=[...this.SU()],this.q4.clear(),this.Z4.clear();for(let t=0,s=this.H4.length;t<s;++t){const s=this.H4[t];s.F0(t),this.q4.set(s.Nc().toLowerCase(),s),this.Z4.set(s.W0(),s)}}v3(){let t=0;for(const s of this.Y4){for(const i of s.QU())i.j0(t);s.$U()&&t++}}x3(){return this.Y4.at(-1).FH()+1}async z0(){this.r3(),this.v3(),this.K4=this.x3()}C3(){return this.K4}G3(){this.K4=-1}Y1(t){const s=[];for(const i of this.Y4){const e=i.FH();if(e===t)s.push(i);else if(e>t)break}return s}B1(){return{scrollX:this.fU(),scrollY:this.pU(),scale:this.aU(),angle:this.lU(),vpX:this.a1(),vpY:this.u1()}}U1(t){this.cU(t.scrollX),this.dU(t.scrollY),this.oU(t.scale),this.uU(t.angle),this.AU(t.vpX,t.vpY)}I3(){let t=this.Y4.filter((t=>t.F1()))[0];for(;t;){if(!t.SW())return Xp.Po(t.GW()),Xp.Ro(1),Xp;if(t.n2())return Xp.No(0,0,0,0),Xp;t=t.UU().filter((t=>t.F1()))[0]}return Xp.No(0,0,0,0),Xp}w0(){return this.i3}N3(){return[...this.O4]}d0(t){if(t.XW())for(const s of t.D3().E3())this.O4.add(s);else this.O4.add(t)}_3(){return[...this.R4]}A3(t,s){if(t===this||!s)return Promise.resolve();t&&(qp.po(this.R4,t.R4),t.R4.clear());const i=[];for(const t of this.O4)this.R4.has(t)||(i.push(t.L3(s)),this.R4.add(t));return Promise.all(i)}async O3(t){if(t.P0())throw new Error("cannot load textures for family");const s=this.kc.lb();if(!s||s.KD()||this.R4.has(t))return;this.R4.add(t);const i=t.L3(s);this.R3(i),await i,t.P3(),this.kc.gj()}R3(t){this.P4.add(t),t.then((()=>this.P4.delete(t))).catch((()=>this.P4.delete(t)))}F3(){return Promise.all([...this.P4])}j3(t){if(t.P0()||t.PB()>0)throw new Error("cannot unload textures");const s=this.kc.lb();s&&this.R4.has(t)&&(this.R4.delete(t),t.z3(s))}B3(t,s){if(t!==this&&s)for(const s of this.R4)s.b0()||t.O4.has(s)||(s.z3(),this.R4.delete(s))}U3(){this.R4.clear()}async W3(t){const s=this.kc,i=this.C4,e=s.jk();this.A4&&(this.L4=e.Q3(this.A4),this.L4.J3()),i.V3(this),this.Ng=this.G4,this.Eg=this.I4,this.E$=s.Ck()/2,this.D$=s.Ik()/2,this.l4(),this.f3(),this.l3(),this.v3(),await this.kc.Cj().Y3(this.x3(),!0),this.H3(t),this.kc.q3(!0),this.Z3(),this.i3||this.K3(),this.X3(this.F4),this.X3(this.j4),this.t5(),i.s5(),s.JB(),this.kc.q3(!1);const n=this.kc.i5();if(await Promise.all(n),qp.wh(n),!s.e5()){for(const t of this.F4)t.n5();for(const t of this.j4)t.r5(this.z4,this.B4);for(const[t,s]of Object.entries(this.t3)){const i=this.kc.Gq(parseInt(t,10));i&&!i.P0()&&i.S0()&&qp.wh(s)}for(const t of this.F4)t.h5();for(const t of this.j4)t.h5();for(const t of this.F4)t.YJ()||t.o5();for(const t of this.j4)t.YJ()||t.o5()}qp.wh(this.F4),qp.wh(this.j4),this.z4.clear(),this.B4.clear(),await Promise.all([...this.O4].map((t=>t.a5(this.kc.lb())))),t&&(s.gf().dispatchEvent(new qp.Event("beforefirstlayoutstart")),await s.u5(new qp.Event("beforeprojectstart"))),await this.l5(new qp.Event("beforeanylayoutstart")),s.gf().dispatchEvent(new qp.Event("beforelayoutstart")),await this.u5(new qp.Event("beforelayoutstart")),s.e5()||await s.Ij(qp._j.Dj.Ej.c5,null,null),s.gf().dispatchEvent(new qp.Event("afterlayoutstart")),await this.u5(new qp.Event("afterlayoutstart")),await this.l5(new qp.Event("afteranylayoutstart")),t&&(s.gf().dispatchEvent(new qp.Event("afterfirstlayoutstart")),await s.u5(new qp.Event("afterprojectstart"))),e.f5(i),await this.F3(),this.i3=!1}H3(t){for(const t of this.kc.R0())if(!t.P0()&&t.Kz())for(const s of t.AB()){const t=s.lj(),i=t.cj(),e=qp.Zn(i.$P(),0,this.H4.length-1),n=this.H4[e];t.mj(n,!0),n.x0(s)}if(!t)for(const t of this.H4)t.D0(!1)}Z3(){for(const t of this.H4)t.M0(this.F4),t.A0()}K3(){let t=!1;for(const[s,i]of Object.entries(this.t3)){const e=this.kc.Gq(parseInt(s,10));if(e&&!e.P0()&&e.S0())for(const s of i){let i=null;if(e.Kz()&&(i=s.hasOwnProperty("instJson")?this.S3(s.instJson.w.l):this.S3(s.w.l),!i))continue;const n=this.kc.T0(e,i,!1,0,0,!0);s.hasOwnProperty("instJson")?n.nv(s.instJson):n.nv(s),t=!0,this.j4.push(n),s.hasOwnProperty("instJson")&&(this.z4.set(n,s),this.B4.set(s.index,n))}}for(const t of this.H4)t.D0(!0),t.yj();t&&(this.kc.JB(),this.kc.d5())}X3(t){for(const s of t){if(!s.XW())continue;const i=s.lj(),e=s.iQ();for(const n of s.BW().D3().tU()){if(n===s.BW())continue;const r=n.AB();if(r.length>e)s.p5(r[e]);else{let e;e=i?this.kc.T0(n,i.cj(),!0,i.Wb(),i.Vb(),!0):this.kc.T0(n,null,!0,0,0,!0),this.kc.JB(),n.m5(),s.p5(e),t.push(e)}}}}t5(){for(const t of this.U4)this.kc.f0(t[1]).XW()||this.kc.T0(t,null,!0)}y5(){const t=[],s=this.U4;let i=0;for(let e=0,n=s.length;e<n;++e){const n=s[e],r=this.kc.f0(n[1]);r.b0()?r.XW()&&r.D3().g5()||t.push(this.kc.T0(n,null,!0)):(s[i]=n,++i)}qp.Mh(s,i),this.kc.JB(),this.X3(t)}O0(t,s,i,e,n,r,h){if(i)return i.O0(t,s,n,r,e,h);{const i=[];for(const o of this.H4)i.push(o.O0(t,s,n,r,e,h));return i.flat()}}async M5(){const t=this.C4;this.kc.e5()||(await this.l5(new qp.Event("beforeanylayoutend")),await this.u5(new qp.Event("beforelayoutend")),await this.kc.Ij(qp._j.Dj.Ej.w5,null,null),await this.u5(new qp.Event("afterlayoutend")),await this.l5(new qp.Event("afteranylayoutend"))),t.S5(!0),this.kc.jk().T5(),this.i3||this.b5();for(const t of this.H4)t.L0();for(const t of this.kc.R0())if(!(t.b0()||t.Kz()||t.TB().qz()||t.P0())){for(const s of t.AB())this.kc.YW(s);this.kc.JB()}t.S5(!1),t.UF()===this&&t.V3(null)}v5(t,s){const i=t.BW().W0().toString();this.t3.hasOwnProperty(i)||(this.t3[i]=[]);const e=this.t3[i],n={index:s,instJson:t.ev(),sceneGraphJson:{children:[]}};e.push(n),this.s3.set(t,n)}x5(t){const s=this.s3.get(t);for(const i of t.C5()){const t=this.s3.get(i);t&&s.sceneGraphJson.children.push({index:t.index,flags:qp.I5.G5(i.lj())})}}b5(){this.s3.clear();let t=0;for(const s of this.H4){s.Q1();for(const i of s.pj()){const s=i.BW();!s.b0()&&s.S0()&&(this.v5(i,t),t++)}}for(const t of this.H4)for(const s of t.pj()){const t=s.BW();!t.b0()&&t.S0()&&this.x5(s)}this.s3.clear()}N5(){this.t3={},this.i3=!0}kL(){return this.G$}n2(){const t=this.kc,s=t.lb().PT();return"low"===t.Cj().P2()||s&&t.R2()||this.Y$.h2()||s&&t.G1()}E5(t){const s=this.kc.Cj();if(this.n2()){t.WL(null),t.DL(0,0,0,0);const i={Wv:this.kc.Nk(),Px:t.tS()||this.kc.R2()||this.Y$.h2(),O2:!!t.tS()&&this.kc.R2()};"low"===s.P2()&&(i.width=s.C2(),i.height=s.G2()),this.G$=this.kc.F2(i)}else this.G$=null}D5(t){this.kc._5(t)&&(t.LL(!1),t.WL(null),t.aS(),t.QL(this.G$))}A5(t){this.n2()&&(t.LL(!1),this.L5(t,this.G$))}O5(t){t.WL(this.G$),t.Nl(this.I3()),this.kc.G1()&&t.AL();const s=this.Y1(0);this.j2(t,this.G$,s,!0),t.tS()&&t.L2(0,1),this.A5(t),this.G$=null}R5(t,s){let i=null;this.kc._5(t)&&(i=this.G$),t.WL(i),t.DL(0,0,0,0),this.kc.G1()&&t.AL();const e=this.Y1(s);this.j2(t,i,e,!0),this.D5(t),t.ET(),this.kc.Cj().P5(s)}j2(t,s,i,e){const n=i.filter((t=>t.F1()));for(let i=0,r=n.length;i<r;){const h=n[i];if(h.E1()&&!h.o2()){tm.push(h);for(let t=i+1;t<r;++t){const s=n[t];if(!s.E1()||s.o2())break;tm.push(n[t])}if(tm.length>=2||1===tm.length&&tm[0].P1()){this.k5(t,s,tm),i+=tm.length,qp.wh(tm);continue}qp.wh(tm)}h.Av(t,s,e&&0===i),++i}}L5(t,s){const i=this.Y$.H0(),e=this.kc;0===i.length?(t.WL(null),t.aS(),t.QL(s),t.VL(s),e.K$(s)):(Kp.set(0,0,e.d1(),e.m1()),this.XP().UR(t,null,{QR:this,VR:3,devicePixelRatio:this.kc.h4(),YR:this.kc.a4()*this.aU(),HR:this.lU(),wP:Kp,SP:null,_O:!0}))}k5(t,s,i){i[0].SW()||(Xp.Po(i[0].GW()),Xp.Ro(1),t.Nl(Xp)),this.kc.Cj(),t.LL(!0);const e=sm,n=im,r=em;for(const t of i)t.Q1(),t.b1(e);const h=i[0],o=h.E2(t);h.A2(t);for(let i=0,h=e.length;i<h;){const o=e[i],a=o.lj(),u=a.cj();if(!a.HU()||!a.H2(u.Y2())){++i;continue}(!o.q2()||a.Z2()>0)&&r.push(o);const l=o.lj().cJ();n.push(o);let c=i+1;for(;c<h;++c){const t=e[c],s=t.lj();if(s.HU()&&s.H2(s.cj().Y2())){if(s.cJ()!==l)break;t.q2()?(s.Z2()>0&&r.push(t),n.push(t)):r.push(t)}}if(1!==n.length||n[0].K2()){this.F5(t,s,n);for(let i=0,e=r.length;i<e;++i){const e=r[i],n=e.lj(),h=n.cj();n.t4(!0),Hp(h,t),h.V2(e,n,t,s),n.t4(!1)}}else{Hp(u,t),u.V2(o,a,t,s);for(let i=0,e=r.length;i<e;++i){const e=r[i];if(e===o)continue;const n=e.lj(),h=n.cj();Hp(h,t),h.V2(e,n,t,s)}}i=c,qp.wh(n),qp.wh(r)}o&&t.tO(o),qp.wh(e),nm=null}F5(t,s,i){t.HL();for(let s=0,e=i.length;s<e;++s){const e=i[s],n=e.lj(),r=n.cj();n.s4(!0),Hp(r,t),r.i4(e,n,t)}t.qL();for(let e=0,n=i.length;e<n;++e){const n=i[e],r=n.lj(),h=r.cj();Hp(h,t),h.V2(n,r,t,s),r.s4(!1)}t.KL()}w4(){const t={sx:this.fU(),sy:this.pU(),s:this.aU(),a:this.lU(),w:this.Vy(),h:this.ig(),ortho:this.kU(),vpX:this.a1(),vpY:this.u1(),fv:this.i3,persist:this.t3,fx:this.Y$.ev(),layers:{},dynamicLayers:[]};for(const s of this.H4)if(s.Q0()){const i=s.jU();t.dynamicLayers.push({sid:s.W0(),name:s.Nc(),parentSid:i?i.W0():null,siblingIndex:s.B0(),data:s.w4()})}else t.layers[s.W0().toString()]=s.w4();return t}S4(t){this.E$=t.sx,this.D$=t.sy,this.I$=t.s,this.N$=t.a,this.Ng=t.w,this.Eg=t.h,this.E4=!!t.ortho,t.hasOwnProperty("vpX")&&(this.D4=t.vpX),t.hasOwnProperty("vpY")&&(this._4=t.vpY),this.i3=!!t.fv,this.t3=t.persist,this.Y$.nv(t.fx),this.$$=!0;for(const[s,i]of Object.entries(t.layers)){const t=parseInt(s,10),e=this.S3(t);e&&e.S4(i)}if(t.hasOwnProperty("dynamicLayers")){this.DU(),this.kc.JB();const s=new Map,i=t.dynamicLayers;for(let t=i.length-1;t>=0;--t){const e=i[t],n=e.sid,r=e.name,h=e.parentSid,o=e.siblingIndex,a=e.data;if(this.r3(),this.w3(r)||this.S3(n))continue;let u,l;if(null===h)u=null,l=this.Y4;else{if(u=this.S3(h),!u)continue;l=u.UU()}const c=qp.Qn(qp.o$,this,u,{name:r,XX:n,$X:!0});l.push(c);let f=s.get(l);f||(f=[],s.set(l,f)),f.push({KQ:c,j5:o}),c.S4(a)}for(const[t,i]of s){i.sort(((t,s)=>t.j5-s.j5));for(const s of i){const i=s.KQ,e=s.j5;let n=t.indexOf(i);t.splice(n,1),t.splice(e,0,i)}}}this.z0(),this.f3(),this.l3()}WF(){return this.e3}Rk(){return this.n3}qK(t){t.layout=this.WF();const s=this.kc,i=s._Q()&&!s.jk().WB();i&&Zp.z5(),this.n3.dispatchEvent(t),i&&Zp.B5()}u5(t){return t.layout=this.WF(),this.n3.Cf(t)}l5(t){return t.layout=this.WF(),this.kc.u5(t)}U5(){this.W5(this.Y4)}W5(t,s=0){const i=t.slice(0);i.reverse();for(const t of i)console.log(`${"\t".repeat(s)}- ${t.Nc()}`),this.W5(t.UU(),s+1)}}}{const rm=self.Gs;rm.Q5=class extends rm.Un{#s;#i=[];#f=new Map;#a=new Map;#e=null;#t=[];#r=null;#h=0;#d=null;constructor(t){super(),this.#s=t}Jn(){this.#s=null,this.#e=null,this.#r=null,this.#d=null,rm.wh(this.#i),this.#f.clear(),this.#a.clear(),rm.wh(this.#t)}DC(t){const s=rm.Qn(rm.x4,this,this.#i.length,t);this.#i.push(s),this.#f.set(s.Nc().toLowerCase(),s),this.#a.set(s.W0(),s)}Fj(){return this.#s}J5(t){this.#r=t}V5(){if(this.#r)return this.#r;if(this.#i.length)return this.#i[0];throw new Error("no first layout")}Y5(t){return this.#f.get(t.toLowerCase())||null}H5(t){return this.#a.get(t)||null}q5(t){return t=rm.Zn(Math.floor(t),0,this.#i.length-1),this.#i[t]}VF(t){return"number"==typeof t?this.q5(t):this.Y5(t.toString())}HF(){return this.#i}V3(t){this.#e=t}UF(){return this.#e}Z5(t){if(this.#t.includes(t))throw new Error("layout already running");this.#t.push(t)}K5(t){const s=this.#t.indexOf(t);if(-1===s)throw new Error("layout not running");this.#t.splice(s,1)}*X5(){this.#e&&(yield this.#e),this.#t.length&&(yield*this.#t)}t6(t){return this.#e===t||this.#t.includes(t)}S5(t){if(t)this.#h++;else{if(this.#h<=0)throw new Error("already unset");this.#h--}}QB(){return this.#h>0}KF(t){this.#d=t}s5(){this.#d=null}ZF(){return!!this.#d}s6(){return this.#d}i6(){const t=this.UF();t&&t.f3()}e6(){const t=this.UF();t&&t.l3()}}}{const hm=self.Gs,om=new RegExp("<(.+?)>","g");hm.n6=class extends hm.Un{constructor(t){super(),this.kc=t,this.r6=hm.Qn(hm.h6),this.o6=null,this.a6=[],this.u6=new Map,this.l6=new Map,this.c6=new Map,this.f6=[],this.d6=[],this.p6=[],this.m6=!1,this.y6=!1,this.g6=!1,this.M6=()=>this.w6(),this.S6=()=>this.T6(),this.b6=()=>this.v6(),this.x6=()=>this.C6(),this.G6=t=>this.I6(t.BV),this.N6=t=>this.E6(),this.D6=t=>this._6(),this.A6=t=>this.L6(),this.O6=[],this.R6=0}Jn(){this.P6(),this.M6=null,this.S6=null,this.b6=null,this.x6=null,this.G6=null,this.D6=null;for(const t of this.a6)t.AY(),t.Jn();hm.wh(this.a6),this.a6=null,this.r6.Jn(),this.r6=null,hm.wh(this.f6),this.f6=null,hm.wh(this.d6),this.d6=null,hm.wh(this.p6),this.p6=null,this.u6.clear(),this.u6=null,this.l6.clear(),this.l6=null,this.c6.clear(),this.c6=null,hm.wh(this.O6),this.O6=null,this.kc=null}k6(){const t=this.kc.gf();t.addEventListener("pretick",this.M6),t.addEventListener("tick2",this.S6),t.addEventListener("beforelayoutchange",this.b6),t.addEventListener("layoutchange",this.x6),t.addEventListener("instancedestroy",this.G6),t.addEventListener("beforeload",this.N6),t.addEventListener("afterload",this.D6),t.addEventListener("afterlayoutstart",this.A6)}P6(){const t=this.kc.gf();t.removeEventListener("pretick",this.M6),t.removeEventListener("tick2",this.S6),t.removeEventListener("beforelayoutchange",this.b6),t.removeEventListener("layoutchange",this.x6),t.removeEventListener("instancedestroy",this.G6),t.removeEventListener("beforeload",this.N6),t.removeEventListener("afterload",this.D6),t.removeEventListener("afterlayoutstart",this.A6)}DC(t){this.r6.Fl(t);const s=hm.j6.F6(t,this);this.Fl(s),this.z6(s),this.c6.set(s.Nc(),0)}B6(t){const s=this.U6(),i=t.nQ(),e=s.Js(i),n=hm.j6.B6(`${i}:${this.c6.get(i)}`,e,this);return this.W6(i),this.Fl(n),n}W6(t){this.c6.set(t,this.c6.get(t)+1)}Q6(){for(const t of this.a6){if(t.J6())continue;const s=t.nQ();this.W6(s)}}V6(){for(const t of this.c6.keys())this.c6.set(t,0)}Fl(t){this.a6.push(t),this.u6.set(t.Nc().toLowerCase(),t)}Zf(t){t.Y6(),t.J6()||(hm.Gh(this.a6,t),hm.Gh(this.f6,t),hm.Gh(this.d6,t),hm.Gh(this.p6,t),this.u6.delete(t.Nc().toLowerCase()),this.H6(t),t.DY()||t.Jn())}vQ(t){this.kc.vQ(t,this.o6,null)}Fj(){return this.kc}U6(){return this.r6}q6(t){this.o6=t}Z6(){return this.o6}*K6(){for(const t of this.a6)yield t}*X6(){for(const t of this.d6)yield t}t8(t,s){this.l6.has(t)||this.l6.set(t,new Set),this.l6.get(t).add(s)}z6(t){for(const s of t.s8())this.t8(s,t)}H6(t){for(const[s,i]of this.l6.entries())i.has(t)&&(i.delete(t),0===i.size&&this.l6.delete(s))}i8(t){if(this.l6.has(t))return this.l6.get(t)}e8(t,s){if(s)for(const i of this.a6)if(s.every((t=>i.n8(t.BV,t.trackId)))&&i.Nc().includes(t.Nc()))return i}r8(t){return this.u6.get(t.toLowerCase())||null}h8(t){for(const s of this.f6)if(s.Nc()===t)return s;for(const s of this.d6)if(s.Nc()===t)return s;return null}*o8(t){if(om.test(t)){let s;om.lastIndex=0;const i=new Set;do{if(s=om.exec(t),s){const t=s[1].split(",");for(const s of t)i.add(s)}}while(s);for(const t of i.values()){const s=this.r8(t);s&&(yield s)}i.clear()}else{const s=this.r8(t);s&&(yield s)}}*a8(t){for(const s of this.a6)s.OY(t)&&(yield s)}u8(t){this.f6.includes(t)||this.f6.push(t),this.l8()}c8(t){hm.Gh(this.d6,t),this.f8()}d8(t){this.d6.includes(t)?(t.p8(!0),t.m8(!1),t.y8(!1)):(t.p8(!1),t.m8(!0),t.y8(!1),this.f6.includes(t)||this.f6.push(t)),this.l8()}g8(t){t.p8(!1),t.m8(!1),t.M8(),hm.Gh(this.f6,t),this.f8()}w8(t){t.p8(!1),t.m8(!1),this.d6.includes(t)&&(t.y8(!0),this.p6.push(t),hm.Gh(this.d6,t)),this.f6.includes(t)&&t.y8(!0)}S8(t){t.p8(!1),t.m8(!1),t.y8(!1),t.UY(1),hm.Gh(this.d6,t)}T8(t){this.w8(t),t.M8()}w6(){const t=this.Fj();if(t.e5())return;if(!this.m6)return;if(this.y6)return;let s=0;for(t._Q()&&(s=performance.now()),this.g6=!0;this.f6.length;){const t=this.f6.pop();t.b8()?(t.v8(),this.p6.push(t)):(t.x8(),this.d6.push(t)),0!==t.C8()&&(this.R6=1)}const i=this.kc.G8(),e=this.kc.I8(),n=this.kc.MF();for(let t=this.d6.length-1;t>=0;t--){const s=this.d6[t];s&&s.N8(i,n,e)}this.g6=!1,t._Q()&&globalThis.AQ.E8(performance.now()-s),0!==this.R6&&t.gj()}T6(){const t=this.Fj();if(t.e5())return;if(!this.m6)return;if(this.y6)return;let s,i=0;t._Q()&&(i=performance.now());for(let t=0,i=this.p6.length;t<i;t++){const i=this.p6[t];s||(s=new Set),i.Y6(),this.D8(i),s.add(i)}if(s){hm.Eh(this.p6,s),this.R6=0;for(let t=0,s=this.d6.length;t<s;t++)if(0!==this.d6[t].C8()){this.R6=1;break}}this.f8(),t._Q()&&globalThis.AQ.E8(performance.now()-i)}D8(t){t.DY()||t._8()&&t.A8()&&t.L8()&&t.O8()}l8(){this.m6||(this.m6=!0)}f8(){this.p6.length||this.d6.length||this.f6.length||this.g6||(this.m6=!1)}v6(){for(this.y6=!0;this.f6.length;)this.g8(this.f6.pop());const t=new Set;for(const s of this.d6)s.v6()&&(s.Y6(),t.add(s));hm.Eh(this.d6,t),t.clear();for(const s of this.p6)s.v6()&&(s.Y6(),t.add(s));hm.Eh(this.p6,t),this.f8();for(const t of this.a6)t.P8()}C6(){this.y6=!1}I6(t){const s=t.BW(),i=this.i8(s);if(i)if(this.kc.e5())this.O6.push(t);else for(const t of i)t.J6()||(t.DY()?this.Zf(t):t._8()||(this.D8(t),this.Zf(t)))}E6(){for(const t of this.f6.map((t=>t)))this.D8(t),this.Zf(t);for(const t of this.d6.map((t=>t)))this.D8(t),this.Zf(t)}_6(){for(const t of this.O6)this.I6(t);hm.wh(this.O6);for(const t of this.a6)t._6()}L6(){const t=this.kc.JF().UF();if(t)for(const s of this.a6){const i=s.k8();i&&t.Nc()===i&&this.d8(s)}}w4(){return{timelinesJson:this.F8(),scheduledTimelinesJson:this.j8(),playingTimelinesJson:this.z8(),markedForRemovalTimelinesJson:this.B8(),hasRuntimeListeners:this.m6,changingLayout:this.y6,isTickingTimelines:this.g6}}S4(t){t&&(this.V6(),this.U8(t.timelinesJson),this.W8(t.scheduledTimelinesJson),this.Q8(t.playingTimelinesJson),this.J8(t.markedForRemovalTimelinesJson),this.m6=!t.hasRuntimeListeners,this.y6=!!t.changingLayout,this.g6=!!t.isTickingTimelines,this.Q6(),this.l8(),this.f8())}F8(){return this.a6.map((t=>t.w4()))}U8(t){for(const s of t){let t=this.r8(s.name);if(t)t.S4(s);else{const i=this.V8(s);if(!i)continue;const e=this.r8(i);t=this.B6(e),t.S4(s)}t.Y8()||this.Zf(t)}}V8(t){const s=t.name.split(":");return s&&2===s.length?s[0]:null}j8(){return this.H8(this.f6)}W8(t){this.q8(t,this.f6)}z8(){return this.H8(this.d6)}Q8(t){this.q8(t,this.d6)}B8(){return this.H8(this.p6)}J8(t){this.q8(t,this.p6)}Z8(t,s){if(!s)return!1;for(const i of s)if(i===t.Nc())return!0;return!1}H8(t){return t.map((t=>t.Nc()))}q8(t,s){const i=new Set;for(const e of s)this.Z8(e,t)||i.add(e);if(hm.Eh(s,i),t){const i=t=>s=>s.Nc()===t;for(const e of t){const t=this.r8(e);t&&(s.find(i(e))||s.push(t))}}}}}{const am=self.Gs,um=[0,0],lm=[0,0],cm=[0,0],fm=[0,0,0,0,0],dm=new Array(4),pm=[{x:0,y:0,t:0,St:0},{x:0,y:0,t:0,St:0},{x:0,y:0,t:0,St:0}],mm={x:0,y:0,t:0,St:0};am.K8=class{constructor(t,s){this.X8=!1,this.t7=t,this.s7=[];let i=null;if(i=s?this.t7.i7(s):am.jh(this.t7.e7()),!i)return;const e=i.aH("offsetX"),n=i.aH("offsetY");if(!e||!n)return;this.n7=e,this.r7=n;const r=e.h7(),h=n.h7();for(let t=1,s=Math.min(r.length,h.length);t<s;++t){const s=r[t],i=(s.o7(),s.a7()),e=h[t],n=(e.o7(),e.a7());i&&"cubic-bezier"===i.u7()&&n&&"cubic-bezier"===n.u7()?this.s7.push(am.Qn(am.l7,i,n,s,e,this.s7.length)):(i&&"line"===i.u7()&&n&&n.u7(),this.s7.push(am.Qn(am.c7,s,e,this.s7.length)))}this.X8=!0}Jn(){for(const t of this.s7)t.Jn();am.wh(this.s7),this.s7=null,this.t7=null,this.n7=null,this.r7=null}f7(){return this.X8}d7(){return this.s7}p7(t){const s="relative"===this.n7.m7()?t.Wb():0,i="relative"===this.r7.m7()?t.Vb():0;for(const t of this.s7)t.p7(s,i)}RM(t,s,i){let e=NaN,n=this.s7.length;for(let i=0;i<n;i++){const n=this.s7[i];if("cubic-bezier"===n.AG()){const i=n.RM(t,s);(isNaN(e)||i[3]<e)&&(e=i[3],cm[0]=i[2],cm[1]=n.$P())}}return cm}y7(t,s,i){const e=i.g7;am.$i(e[0])||(e[0]=0),am.$i(e[1])||(e[1]=1);let n=NaN,r=this.s7.length;for(let i=0;i<r;i++){const r=this.s7[i];if("cubic-bezier"===r.AG()){const i=r.M7(t,s,e);(isNaN(n)||i[3]<n)&&(n=i[3],cm[0]=i[2],cm[1]=r.$P())}}return cm}w7(t,s){return this.s7[s].w7(t)}S7(t,s){return this.s7[s].S7(t)}},am.l7=class{constructor(t,s,i,e,n){this.IM=n;const r=t.T7("cubic-bezier"),h=i.T7("cubic-bezier"),o=s.T7("cubic-bezier"),a=e.T7("cubic-bezier");this.b7=t.v7(),this.x7=s.v7(),this.C7=t.v7()+r.G7(),this.I7=s.v7()+o.G7(),this.N7=i.v7()+h.E7(),this.D7=e.v7()+a.E7(),this._7=i.v7(),this.A7=e.v7(),this.L7=0,this.O7=0,this.R7=0,this.P7=0,this.k7=0,this.F7=0,this.j7=0,this.z7=0,this.B7=0,this.U7=0,this.W7=0,this.Q7=0,this.J7=0,this.V7=0,this.Y7=0,this.H7=0,this.q7=0,this.Z7=0,this.K7=0,this.X7=0,this.t9=NaN,this.X8=!1,this.s9=100,this.i9=new Array(this.s9+1),this.i9[0]=0,this.e9=0,this.n9=[],this.r9=[];for(let t=0;t<100;t++)this.r9.push({x:0,y:0,t:0,St:0});this.h9()}Jn(){am.wh(this.i9),this.i9=null,am.wh(this.n9),this.n9=null,am.wh(this.r9),this.r9=null}AG(){return"cubic-bezier"}$P(){return this.IM}o9(){return Math.floor(this.e9/25)}a9(){return 1/this.o9()}p7(t,s){this.u9=t,this.l9=s,this.i9=new Array(this.s9+1),this.i9[0]=0,this.h9(),this.L7=this.b7+this.u9,this.O7=this.x7+this.l9,this.R7=this.C7+this.u9,this.P7=this.I7+this.l9,this.k7=this.N7+this.u9,this.F7=this.D7+this.l9,this.j7=this._7+this.u9,this.z7=this.A7+this.l9,this.B7=3*(this.R7-this.L7),this.U7=3*(this.P7-this.O7),this.W7=3*(this.k7-this.R7),this.Q7=3*(this.F7-this.P7),this.J7=3*(this.j7-this.k7),this.V7=3*(this.z7-this.F7),this.Y7=3*(this.R7-this.L7),this.H7=3*(this.L7+this.k7-2*this.R7),this.q7=this.j7-this.L7+3*(this.R7-this.k7),this.Z7=3*(this.P7-this.O7),this.K7=3*(this.O7+this.F7-2*this.P7),this.X7=this.z7-this.O7+3*(this.P7-this.F7)}Map(t){if(!this.X8)return NaN;const s=this.c9(t);return lm[0]=this.f9(s),lm[1]=this.d9(s),lm}RM(t,s){const i=this.p9(100),e=this.m9(t,s,i),n=this.y9(t,s,i,e);return fm[0]=n.x,fm[1]=n.y,fm[2]=n.t,fm[3]=n.St,fm}M7(t,s,i){const e=this.p9(100),n=this.g9(t,s,e,i),r=this.y9(t,s,e,n);return fm[0]=r.x,fm[1]=r.y,fm[2]=r.t,fm[3]=r.St,fm}w7(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.B7+e*this.W7+n*this.J7,h=i*this.U7+e*this.Q7+n*this.V7,o=am.tr(r,h);return um[0]=r/o,um[1]=h/o,um}S7(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.B7+e*this.W7+n*this.J7,h=i*this.U7+e*this.Q7+n*this.V7;return Math.atan2(h,r)}c9(t){if(!this.X8)return;let s=t*this.i9[this.s9],i=0,e=this.s9,n=0;for(;i<e;)n=i+((e-i)/2|0),this.i9[n]<s?i=n+1:e=n;this.i9[n]>s&&n--;const r=this.i9[n];return r===s?n/this.s9:(n+(s-r)/(this.i9[n+1]-r))/this.s9}f9(t){return this.X8?self.Bl.nc("cubicbezier")(t,this.b7+this.u9,this.C7+this.u9,this.N7+this.u9,this._7+this.u9):NaN}d9(t){return this.X8?self.Bl.nc("cubicbezier")(t,this.x7+this.l9,this.I7+this.l9,this.D7+this.l9,this.A7+this.l9):NaN}p9(t){if(t=t||100,this.n9.length>=t)return this.n9;this.n9=new Array(t),t++;for(let s=0;s<t-1;s++){const i=s/(t-1),e=i**2,n=i**3,r=this.Y7*i,h=this.H7*e,o=this.q7*n,a=this.Z7*i,u=this.K7*e,l=this.X7*n,c=this.L7+r+h+o,f=this.O7+a+u+l;this.r9[s].x=c,this.r9[s].y=f,this.r9[s].t=i,this.r9[s].St=0,this.n9[s]=this.r9[s]}return this.n9}m9(t,s,i,e=null,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.t9))for(let e=0;e<100;e++){const h=i[e],o=h.x-t,a=h.y-s;h.St=o*o+a*a,h.St<n&&(n=h.St,r=e)}else{for(let e=this.t9;e<this.t9+5&&!(e>=i.length);e++){const h=i[e],o=h.x-t,a=h.y-s;h.St=o*o+a*a,h.St<n&&(n=h.St,r=e)}for(let e=this.t9;e>this.t9-5&&!(e<0);e--){const h=i[e],o=h.x-t,a=h.y-s;h.St=o*o+a*a,h.St<n&&(n=h.St,r=e)}}return this.t9=r,r}g9(t,s,i,e,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.t9))for(let h=0;h<100;h++){const o=i[h],a=o.x-t,u=o.y-s;o.St=a*a+u*u,o.t>=e[0]&&o.t<=e[1]&&o.St<n&&(n=o.St,r=h)}else{for(let h=this.t9;h<this.t9+5&&!(h>=i.length);h++){const o=i[h],a=o.x-t,u=o.y-s;o.St=a*a+u*u,o.t>=e[0]&&o.t<=e[1]&&o.St<n&&(n=o.St,r=h)}for(let h=this.t9;h>this.t9-5&&!(h<0);h--){const o=i[h],a=o.x-t,u=o.y-s;o.St=a*a+u*u,o.t>=e[0]&&o.t<=e[1]&&o.St<n&&(n=o.St,r=h)}}return this.t9=r,r}y9(t,s,i,e){let n=i[e],r=1,h=Number.MAX_SAFE_INTEGER;t:do{const r=i.length;let o=0===e?0:e-1,a=e===r-1?r-1:e+1,u=i[o].t,l=(i[a].t-u)/4;if(l<.001)break;dm[0]=i[o];for(let i=1;i<=2;i++){const r=u+i*l,o=r**2,a=r**3,c=this.Y7*r,f=this.H7*o,d=this.q7*a,p=this.Z7*r,m=this.K7*o,y=this.X7*a,g=this.L7+c+f+d,M=this.O7+p+m+y,w=g-t,S=M-s,T=w*w+S*S;if(T<h){h=T,e=i,mm.x=g,mm.y=M,mm.t=r,mm.St=T,n=mm;break t}const b=pm[i-1];b.x=g,b.y=M,b.t=r,b.St=T,dm[i]=b}dm[3]=i[a],i=dm}while(r++<20);return n}h9(){this.X8=!0;let t=this.f9(0),s=this.d9(0),i=0;for(let e=1;e<=this.s9;e++){const n=this.f9(.01*e),r=this.d9(.01*e),h=t-n,o=s-r;i+=am.tr(h,o),this.i9[e]=i,t=n,s=r}this.e9=i}},am.c7=class{constructor(t,s,i){this.IM=i,this.M9=t.v7(),this.w9=s.v7(),this.u9=0,this.l9=0}Jn(){}AG(){return"line"}$P(){return this.IM}p7(t,s){this.u9=t,this.l9=s}Wb(){return this.M9+this.u9}Vb(){return this.w9+this.l9}}}{const ym=self.Gs;ym.j6=class extends ym.Un{constructor(t,s,i){super(),this.kc=i.Fj(),this.S9=i,this.T9=s,this.Hn=t,this.b9=[],this.v9=0,this.x9=null,this.C9=0,this.G9(),this.I9=null,this.N9=null,this.E9=0,this.D9=0,this._9=1,this.A9=0,this.L9=-1,this.O9=1,this.R9=!1,this.P9=!1,this.k9=!1,this.F9=!0,this.j9=!1,this.z9=!1,this.B9=-1,this.U9=!1,this.W9=!1,this.Q9=!1,this.J9=!1,this.V9=NaN,this.Y9=[""],this.H9="",this.q9=!1,this.R6=0,this.Z9=0,this.K9=null,this.X9=null}static F6(t,s){const i=s.U6(),e=i.ttt(),n=i.Js(t[e]),r=ym.Qn(ym.j6,t[e],n,s);return r.stt(!0),r}static B6(t,s,i){return ym.Qn(ym.j6,t,s,i)}Jn(){if(this.DY())return;const t=this.kc.gf();this.S9.g8(this),this.S9.T8(this);for(const t of this.b9)t.Jn();ym.wh(this.b9),this.b9=null,this.kc=null,this.S9=null,this.T9=null,this.j9=!0,this.I9=null,this.N9=null,this.itt(t)}itt(t){const s=ym.Qn(ym.Event,"timelinestatereleased");s.ett=this,t.dispatchEvent(s)}AG(){return 0}G9(){for(const t of this.T9.htt().ntt())this.v9=this.b9.push(ym.ott.DC(this,t))}att(){return this.S9}Fj(){return this.kc}e7(){return this.b9}utt(t,s,i,e){if(!this.Z9)return;let n;for(let r=0;r<this.b9.length;r++){let h=this.b9[r];if(t!==h.iH())continue;const o=h.aH(i);o&&s.constructor===o.ltt().constructor&&o.m7()===e.m7()&&(n||(n=[]),n.push(o))}return n}Y8(){return!!this.b9.length}i7(t){for(const s of this.b9)if(ym.Ke(s.hH(),t))return s;return null}ctt(t){for(const s of this.b9)if(!s.ftt()&&ym.Ke(s.Nc(),t))return s;return null}_q(t){this.Hn=t}Nc(){return this.Hn}dtt(){return this.T9}nQ(){return this.T9.Nc()}kY(){return this.T9.kY()}PY(t){this.T9.PY(t)}ptt(){return this.T9.ptt()}mtt(t){this.T9.mtt(t)}ytt(){return this.T9.ytt()}gtt(t){this.T9.gtt(t)}m7(){return this.T9.m7()}Mtt(t){this.T9.m7(t)}sH(t){for(const s of this.e7())s.sH(t)}jY(){return this.T9.jY()}FY(t){return this.T9.FY(t)}BY(){return this.T9.BY()}zY(t){return this.T9.zY(t)}iY(){return this.T9.iY()}wtt(t){return this.T9.wtt(t)}UY(t){return this._9=t}WY(){return this._9}k8(){return this.T9.k8()}Stt(){return this.T9.Stt()}Ttt(){return this.T9.Ttt()}btt(){return this.A9}vtt(){return!this.IsPlaying()||this._9>0}JY(){return this.I9||(this.I9=new Promise((t=>{this.N9=t}))),this.I9}M8(){this.I9&&(this.N9(),this.I9=null,this.N9=null)}xtt(t){this.Y9=ym.j6.Ctt(t),this.q9=!0}QY(){return this.Y9}Gtt(){return this.q9&&(this.H9=this.Y9.join(" ")),this.q9=!1,this.H9}OY(t){if(!this.Y9)return!1;if(!this.Y9.length)return!1;const s=ym.j6.Ctt(t);return!!s&&!!s.length&&s.every(ym.j6.Itt,this)}Ntt(){ym._j.Ett&&this.constructor===ym.j6&&(ym._j.Ett.Ej.Dtt(this),this.S9.vQ(ym._j.Ett.Ej._tt),this.S9.vQ(ym._j.Ett.Ej.Att),this.S9.vQ(ym._j.Ett.Ej.Ltt),this.S9.vQ(ym._j.Ett.Ej.Ott),ym._j.Ett.Ej.Rtt())}Ptt(){this.B9=this.kc.pF()}O8(){this.Q9||(this.Q9=!0,ym._j.Ett&&this.constructor===ym.j6&&(ym._j.Ett.Ej.Dtt(this),this.S9.vQ(ym._j.Ett.Ej.ktt),this.S9.vQ(ym._j.Ett.Ej.Ftt),this.S9.vQ(ym._j.Ett.Ej.jtt),this.S9.vQ(ym._j.Ett.Ej.ztt),ym._j.Ett.Ej.Rtt()))}p8(t){this.R9=t}Btt(){return this.B9===this.kc.pF()}IsPlaying(t=!1){return!!this.Btt()||!(!this.Utt()||t)||this.R9}Wtt(){return this.IsPlaying(!0)}HY(){return this.Qtt()}Qtt(){return!(this.DY()||this.Utt()||this.Wtt()||this.A8())}m8(t){this.P9=t}Utt(){return this.P9}Jtt(t){this.F9=t;const s=this.jY(),i=this.BY();if(s||i){if(s&&!i);else if(!s&&i){const t=this.GO();1===this.A9&&(t<=0||t>=this.kY())&&(this.F9=!0)}}else{const t=this.GO();(t<=0||t>=this.kY())&&(this.F9=!0)}}A8(){return this.F9}DY(){return this.j9}y8(t){this.z9=t}b8(){return this.z9}Vtt(t){this.U9=t}Ytt(){return this.U9}stt(t){this.W9=!!t}J6(){return this.W9}L8(){return this.k9}GO(){return this.E9}RY(t){const s=this.GO();this.Htt(t),this.Jtt(!1),this.A8()||this.Vtt(!0),(this.Wtt()||this.Utt()||!this.k9)&&(this.Wtt()||this.Utt()||this.k9?this.Wtt()?this.AY():this.Utt()&&(this.S9.g8(this),this.qtt()):this.qtt()),this.Ztt(),this.Ktt(this.GO(),!1,!0,!0,s),this.Xtt(),this.R6&&this.Fj().gj(),this.$tt()}Htt(t){ym.$i(t)||(t=this.kY()),t<0?this.E9=0:t>=this.kY()?this.E9=this.kY():this.E9=t}tst(t){ym.$i(t)||(t=this.kY()),t<0?this.E9=0:t>=this.kY()?this.E9=this.kY():this.E9=t;for(const t of this.b9)t.sst()}$tt(){ym._j.Ett&&this.constructor===ym.j6&&(ym._j.Ett.Ej.Dtt(this),this.S9.vQ(ym._j.Ett.Ej.ist),this.S9.vQ(ym._j.Ett.Ej.est),this.S9.vQ(ym._j.Ett.Ej.nst),ym._j.Ett.Ej.Rtt())}rst(){if(this.jY())return!0;if(this.BY()&&1===this.A9){if(this.vtt()){if(this.GO()>=this.kY())return!1}else if(this.GO()<=0)return!1}else if(!this.jY()&&!this.BY())if(this.vtt()){if(this.GO()>=this.kY())return!1}else if(this.GO()<=0)return!1;return!0}LY(){this.DY()||this.rst()&&this.Play(!0)}Play(t=!1){return!this.DY()&&!this.Utt()&&(this.Wtt()&&this.Btt()?this.hst():!this.Wtt()&&!!(this.A8()||t||this.Ytt())&&this.ost())}hst(){return this.Vtt(!1),this.S9.c8(this),this.S9.d8(this),this.JY(),!0}ost(){return this.Vtt(!1),this.S9.d8(this),this.JY(),!0}AY(t=!1){this.DY()||(this.Jtt(t),this.S9.w8(this),this.A8()&&this.M8())}Ff(t=!0,s=!1){if(this.DY())return;if(!this.Wtt()&&this.Utt())return this.S9.g8(this);if(this.A8())return;this.AY(!0),this.vtt()?this.Htt(0):this.Htt(this.kY());const i=this.GO();this.Ztt(),s?this.ast(i):this.Ktt(i,!1,!1,!0),t&&this.$tt(),this.Xtt(),this.R6&&t&&this.Fj().gj()}ust(){this.Ff(!1,!0)}ast(t){this.Ktt(t,!1,!1,!0,NaN,!1,!0)}v6(){return!!this.DY()||!(!this.Fj().e5()&&this.lst())&&(this.S9.S8(this),this.Fj().e5()||this.ust(),!0)}qtt(){this.x8(!0)}v8(){this.x8(!1,!0),this.p8(!1),this.m8(!1)}x8(t=!1,s=!1){if(!this.b8()||s)if(t){this.Q9=!1,this.k9=!0,this.J9=!0,this.Ztt();for(const t of this.b9)t.x8();this.Xtt()}else if(this.p8(!0),this.m8(!1),this.Ntt(),this.A8()){this.B9=-1,0!==this.A9&&(this._9=Math.abs(this._9)),this.A9=0,this.L9=-1,this.O9=1,this.F9=!1,this.Q9=!1,this.k9=!0,this.J9=!0,this.vtt()?this.Htt(0):this.Htt(this.kY()),this.Ztt();for(const t of this.b9)t.x8();this.Xtt()}else{-1!==this.L9&&(this.A9=this.L9),this.J9=!0,this.Q9=!1,this.Ztt();for(const t of this.b9)t.cst();this.Xtt()}}C8(){return this.R6}Ztt(){this.Z9=0;for(const t of this.b9)t.w_()&&(this.Z9=1)}Xtt(){this.R6=0;for(const t of this.b9)t.fst(),0===this.R6&&1===t.C8()&&(this.R6=1),this.x9||1!==t.dst()||(this.x9||(this.x9=[]),this.C9=this.x9.push(t))}N8(t,s,i){if(this.Ttt()){if(0===t&&0===this.V9)return;this.V9=t,t=i}else{if(0===i&&0===this.V9)return;this.V9=i,t=i,s=1}const e=this.E9+this.D9,n=e+t*s*this._9,r=this.T9.pst;n<0?(this.E9=0,this.D9=-n):n>=r?(this.E9=r,this.D9=this.E9-n):(this.E9=n,this.D9=0);let h=!1,o=!1;const a=this.jY(),u=this.BY();let l;a||u?a&&!u?this._9>0?this.E9>=r&&(this.tst(0),o=!0):this.E9<=0&&(this.tst(r),o=!0):!a&&u?this._9>0?this.E9>=r&&(this.Htt(r),this.UY(-1*this.WY()),o=!0,1===this.A9?this.O9<this.iY()?(this.O9++,this.A9=0):h=!0:0===this.A9&&(this.A9=1)):this.E9<=0&&(this.Htt(0),this.UY(-1*this.WY()),o=!0,1===this.A9?this.O9<this.iY()?(this.O9++,this.A9=0):h=!0:0===this.A9&&(this.A9=1)):a&&u&&(this._9>0?this.E9>=r&&(this.Htt(r),this.UY(-1*this.WY()),o=!0,this.A9++,ym.wrap(this.A9,0,2)):this.E9<=0&&(this.Htt(0),this.UY(-1*this.WY()),o=!0,this.A9++,ym.wrap(this.A9,0,2))):this._9>0?this.E9>=r&&(this.O9<this.iY()?(this.O9++,this.tst(0),o=!0):(this.Htt(r),h=!0)):this.E9<=0&&(this.O9<this.iY()?(this.O9++,this.tst(r),o=!0):(this.Htt(0),h=!0));const c=this.v9;if(h){for(l=0;l<c;l++)this.b9[l].mst();return this.AY(!0),void this.Ptt()}const f=this.C9;for(l=0;l<f;l++)this.x9[l].yst();if(1===this.Z9)for(l=0;l<c;l++){const t=this.b9[l],s=t.gst();this.E9-s<0&&e-s>0?(this.E9=s<0?0:s>=r?r:s,t.Mc(s,!0,!1,o,this.J9,!1)):t.Mc(this.E9,!0,!1,o,this.J9,!1)}else for(l=0;l<c;l++)this.b9[l].Mc(this.E9,!0,!1,o,this.J9,!1);if(!this.IsPlaying()&&this.K9){const t=this.K9.GO()+this.K9.wst().Mst().gst(),s=this.E9-t;this.E9-=s,0!==this.D9&&(this.D9-=s),this.K9=null}for(l=0;l<f;l++)this.x9[l].Sst();this.J9&&(this.J9=!1)}Tst(t){this.K9=t}bst(){return this.K9}Ktt(t,s=!1,i=!1,e=!1,n=NaN,r=!1,h=!1){for(const t of this.b9)t.yst();for(const r of this.b9){let o=t;if("number"==typeof n&&!isNaN(n)){const t=this.GO()-r.gst(),s=n-r.gst();t<0&&s>0&&(o=r.gst(),this.Htt(o))}r.Mc(o,s,i,e,this.J9,h)}for(const t of this.b9)t.Sst();this.J9&&r&&(this.J9=!1)}vst(){const t=this.T9.htt().xst(),s=ym.ott.DC(this,t);return this.v9=this.b9.push(s),s}Y6(){if(!this.DY())for(const t of this.b9)t.Cst()}P8(){for(const t of this.b9)t.P8()}Gst(){for(const t of this.b9)t.Ist()}Nst(t,s,i){if(s){if("number"==typeof i&&i>=0){const t=this.b9[i];if(!t)return;return t.Est(s),void this.S9.t8(s.BW(),this)}for(const i of this.b9)if(i.ftt()){if(t){if(i.hH()!==t)continue;i.Est(s),this.S9.t8(s.BW(),this);break}if(!i.Dst()){i.Est(s),this.S9.t8(s.BW(),this);break}}}}n8(t,s){for(const i of this.b9)if(i.ftt())if(s){if(s===i.hH()&&t===i.iH())return!0}else if(t===i.iH())return!0;return!1}_8(){return this.b9.some((t=>!t.ftt()||t._st()))}lst(){return this.b9.some((t=>{if(t.ftt()){if(!t._st())return!1;const s=t.BW();return!!s&&s.b0()}return!1}))}aH(t){for(const s of this.e7())for(const i of s.Ast())if(i.Lst()===t)return i}Ost(t){for(const s of this.b9)if(t===s.iH())return s;return null}Rst(t){let s=t?t.split(" "):[];const i=new Set(s.map((t=>t.toLowerCase().trim())));s=[...i.values()];for(const t of this.e7())for(const i of t.Pst())if(s.every((t=>i.kst(t))))return i}s8(){const t=[];for(const s of this.e7())t.push(s.BW());return t.filter((t=>t))}_6(){for(const t of this.e7())t._6()}w4(){return{tracksJson:this.Fst(),name:this.Hn,playheadTime:this.GO(),playbackRate:this._9,pingPongState:this.A9,resumePingPongState:this.L9,currentRepeatCount:this.O9,isPlaying:this.R9,isScheduled:this.P9,initialStateSet:this.k9,finishedTriggers:this.Q9,complete:this.F9,released:this.j9,markedForRemoval:this.z9,completedTick:this.B9,implicitPause:this.U9,isTemplate:this.W9,tags:this.Y9.join(" "),stringTags:this.H9,tagsChanged:this.q9,firstTick:this.J9}}S4(t){t&&(this.jst(t.tracksJson),this.Hn=t.name,this.E9=t.playheadTime,this._9=t.playbackRate,this.A9=t.pingPongState,this.L9=t.hasOwnProperty("resumePingPongState")?t.resumePingPongState:-1,this.O9=t.currentRepeatCount,this.R9=!!t.isPlaying,this.P9=!!t.isScheduled,this.k9=!!t.initialStateSet,this.Q9=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.F9=!!t.complete,this.j9=!!t.released,this.z9=!!t.markedForRemoval,this.B9=t.completedTick,this.U9=!!t.implicitPause,this.W9=!!t.isTemplate,this.Y9=t.tags.split(" "),this.H9=t.stringTags,this.q9=!!t.tagsChanged,this.J9=!!t.firstTick)}Fst(){return this.b9.map((t=>t.w4()))}jst(t){this.Gst(),t.forEach(((t,s)=>{this.b9[s].S4(t)})),this.b9.filter((t=>t._st()))}static Itt(t){const s=this.QY();return""===t?1===s.length&&""===s[0]:s.map((t=>t.toLowerCase())).includes(t.toLowerCase())}static Ctt(t){if(ym.ve(t))return t.slice(0);if(ym.ae(t))return t.split(" ");throw new Error("invalid tags")}zst(){return this.X9||(this.X9=ym.Qn(self.ZY,this)),this.X9}}}{const gm=self.Gs;gm.ott=class extends gm.Un{constructor(t,s){super(),this.t7=t,this.Bst=s,this.Ust=s.htt(),this.Wst=NaN,this.Qst=NaN,this.Jst=null,this.Vst=null,this.Yst=!1,this.d_=s.gst()>0,this.Hst=!1,this.qst=!1,this.Zst=NaN,this.Kst=null,this.Xst=this.Bst.wst().$st(),this.tit=[],this.sit(),this.iit=0,this.R6=0,this.eit=0}static DC(t,s){return gm.Qn(gm.ott,t,s)}Jn(){this.Xst=null;for(const t of this.tit)t.Jn();gm.wh(this.tit),this.tit=null,this.t7=null,this.Jst=null,this.Vst=null,this.Bst=null,this.Kst=null}sit(){for(const t of this.Bst.rit().nit())this.tit.push(gm.hit.DC(this,t))}Cst(){for(const t of this.tit)t.Cst()}P8(){for(const t of this.tit)t.P8();this.Jst=null,this.Vst=null}oit(){return this.t7}Fj(){return this.t7.Fj()}Pst(){return this.Xst||(this.Xst=this.Bst.wst().$st()),this.Xst}Ast(){return this.tit}aH(t){for(let s=0;s<this.tit.length;s++){const i=this.tit[s];if(i.Lst()===t)return i}}ait(){this.Jst||this.iH()}uit(){return!!this.Jst&&!this.Jst.JH()}_st(){if(!this.ftt())return!1;const t=this.lit(),s=this.Fj().rj(t);return!!s&&!s.JH()}BW(){if(!this.ftt())return;const t=this.cit();return-1!==t?this.Fj().f0(t):void 0}fit(){return this.t7.e7().indexOf(this)}Ist(){this.Jst=null,this.Wst=NaN,this.Vst=null,this.Qst=NaN,this.Yst=!0}Dst(){return!!this.Jst}iH(){if(this.Yst)return;if(this.Jst&&this.uit())return this.Jst;const t=this.lit();return this.Jst=this.Fj().rj(t),this.Jst}Est(t){if(this.Yst=!1,this.Jst!==t){this.P8(),this.Jst=t,this.Qst=t.BW().$P(),this.Wst=t.tQ(),this.Vst=t.lj();for(const s of this.dit()){const i=s.pit,e=s.mit;switch(i.yit()){case"instance-variable":{e.git();const i=t.BW(),n=i.Mit(s.name),r=i.wit(n),h=i.Sit(n);r===s.name&&h===s.type&&e.Tit(n);break}case"behavior":{const i=s.FV,n=this.BW(),r=t.BW(),h=e.zV(r);if(i&&h){const t=i.Nc();n.bit(t),r.bit(t),e.git(),e.vit(h.W0())}break}}}}}*dit(){for(const t of this.tit){const s=t.ltt(),i=this.BW(),e={pit:t,mit:s};switch(t.yit()){case"world-instance":e.xit=t.Lst();break;case"instance-variable":{const t=s.git();e.name=i.wit(t),e.type=i.Sit(t);break}case"effect":{const t=i.eU(),n=s.Cit(t);e.Git=n;break}case"behavior":{const t=s.zV(i);e.FV=t;break}case"plugin":e.SB=i.TB()}yield e}}lj(){if(this.Vst&&this.uit())return this.Vst;const t=this.iH();return t&&(this.Vst=t.lj()),this.Vst}Mst(){return this.Bst}lit(){return isNaN(this.Wst)?this.Bst.lit():this.Wst}Iit(t){this.Bst.Iit(t)}ytt(){return this.Bst.ytt()}gtt(t){this.Bst.gtt(t)}m7(){return this.Bst.m7()}hH(){return this.Bst.hH()}gst(){return this.Bst.gst()}Nit(){return this.Bst.Nit()}Eit(t){this.Bst.Eit(t)}Mtt(t){this.Bst.Mtt(t)}sH(t){for(const s of this.Pst())s.sH(t);for(const s of this.Ast())s.sH(t)}Dit(){return this.Bst.Dit()}_it(t){this.Bst._it(t)}cit(){return isNaN(this.Qst)?this.Bst.cit():this.Qst}Ait(t){this.Bst.Ait(t)}Lit(t){this.Bst.Lit(t)}Oit(){const t=this.iH();return t&&t.DV().Rit()?t.DV().Oit():this.Bst.Oit()}Pit(t){this.Bst.Pit(t)}kit(){const t=this.iH();return t&&t.DV().Rit()?t.DV().kit():this.Bst.kit()}AG(){return this.Bst.AG()}Nc(){return this.Bst.Nc()}ftt(){return 0===this.AG()}Fit(){return 1===this.AG()}jit(){return 2===this.AG()}zit(){return this.iit}C8(){return this.R6}dst(){return this.eit}w_(){return this.d_}sst(){for(const t of this.tit)t.sst()}x8(){if(this.ait(),!this.uit()&&this.ftt())return;const t=this.oit().vtt(),s=t?0:this.Nit();for(const t of this.tit)t.x8(s),0===this.iit&&1===t.zit()&&(this.iit=1),0===this.R6&&1===t.C8()&&(this.R6=1);this.eit=0,this.tit.some((t=>t.dst()))&&(this.eit=1),this.Kst=t?this.Bit(s):this.Uit(s),this.Hst=!1,this.qst=!1,this.Mc(s),this.Wit(this.Kst)}cst(){if(this.ait(),!this.uit()&&this.ftt())return;const t=this.t7.vtt(),s=this.t7.GO()-this.gst();this.Kst=t?this.Bit(s):this.Uit(s);for(const t of this.tit)t.cst(s)}mst(){if(!this.oit().A8()&&(this.ait(),(this.uit()||!this.ftt())&&!this.d_)){const t=this.t7.GO();t>=this.gst()+this.Nit()?this.Mc(this.Nit(),!0,!1,!0,!1,!1,!0):t<=0&&this.Mc(0,!0,!1,!0,!1,!1,!0)}}fst(){for(let t=0,s=this.tit.length;t<s;t++){const s=this.tit[t];s.fst(),0===this.iit&&1===s.zit()&&(this.iit=1),0===this.R6&&1===s.C8()&&(this.R6=1)}}yst(){const t=this.tit.length;for(let s=0;s<t;s++)this.tit[s].yst()}Mc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){this.Jst||this.iH();const o=this.Jst&&!this.Jst.JH(),a=0===this.Bst.Jc;if((o||!a)&&!(r&&a&&this.BW().b0()||(t-=this.gst())<0)){this.Qit(t,s),this.Jit(t,s,n),!this.oit().IsPlaying()&&this.oit().bst()&&(t=this.oit().bst().GO());for(let s=0,n=this.tit.length;s<n;s++)this.tit[s].Mc(t,i,e,h);this.Vit(t,s),0!==this.iit&&(this.Vst||(this.Vst=this.Jst.lj()),this.Vst&&this.Vst.XQ())}}Sst(){const t=this.tit.length;for(let s=0;s<t;s++)this.tit[s].Sst()}Qit(t,s){if(s&&this.d_&&!this.Hst){if(this.oit().vtt()){if(t<0)return}else if(t>this.Nit())return;for(const t of this.tit)t.x8();this.Hst=!0}}Vit(t,s){if(s&&this.d_&&!this.qst)if(this.oit().vtt()){if(t>=this.Nit()){for(const t of this.tit)t.Mc(this.Nit(),!1,!0);this.qst=!0}}else if(t<=0){for(const t of this.tit)t.Mc(0,!1,!0);this.qst=!0}}Jit(t,s,i){if(i)return;if(!s)return;if(!gm._j.Ett)return;const e=this.oit();if(e.vtt()){const s=this.Kst.o7(),i=this.Kst.GO(),n=s?s.GO():e.kY();(t<=i||t>=n)&&(this.Kst=this.Ust.Yit(t,this.Bst),s&&this.Hit(this.Kst))}else{if(!this.Ust.qit(t,this.Bst))return;this.Kst||(this.Kst=this.Ust.qit(t,this.Bst));const s=this.Kst.Zit(),i=this.Kst.GO(),e=s?s.GO():0;(t>=i||t<=e)&&(this.Kst=this.Ust.qit(t,this.Bst),this.Kst&&this.Hit(this.Kst))}}Bit(t){return this.Ust.Kit(t,this.Bst)||this.Ust.Yit(t,this.Bst)}Uit(t){return this.Ust.Kit(t,this.Bst)||this.Ust.qit(t,this.Bst)}Hit(t,s=!1){if(!gm._j.Ett)return;const i=this.oit(),e=i.att();gm._j.Ett.Ej.Dtt(i),gm._j.Ett.Ej.Xit(t),e.vQ(gm._j.Ett.Ej.$it),e.vQ(gm._j.Ett.Ej.Hit),i.IsPlaying()||s||i.Tst(t),gm._j.Ett.Ej.Rtt(i),gm._j.Ett.Ej.tet(t)}Wit(t){this.Hit(t,!0)}iet(){return this.Bst.wst().eet()}net(){const t=this.Bst.rit().ret(),s=gm.hit.DC(this,t);return this.tit.push(s),s}het(t){this.Bst.wst().oet(t)}aet(t){for(const s of this.tit)s.aet(t)}uet(){for(const t of this.tit)t.uet()}let(){if(this.ait(),this.uit()||!this.ftt())for(const t of this.tit)t.let()}cet(){if(this.ait(),!this.uit()&&this.ftt())return;let t=!1;for(const s of this.tit){const i=s.cet();!t&&i&&(t=!0)}if(t){const t=this.iet();t.RY(this.oit().GO()),t.sH("noease"),t._it(!0),t.xtt("")}}_6(){isNaN(this.Zst)||this.fet(this.Zst),this.Zst=NaN}w4(){const t=this.iH(),s=t?t.tQ():this.lit();return{propertyTracksJson:this.det(),lastKeyframeDataItemJson:this.pet(),initialStateOfNestedSet:this.Hst,endStateOfNestedSet:this.qst,instanceUid:s,cleared:this.Yst}}S4(t){if(t){this.met(t.propertyTracksJson),this.yet(t.lastKeyframeDataItemJson),this.Zst=t.instanceUid,this.Hst=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Hst=t.initialStateOfNestedSet),this.qst=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.qst=t.endStateOfNestedSet),this.Yst=!!t.hasOwnProperty("cleared")&&t.cleared;for(const t of this.tit)0===this.iit&&1===t.zit()&&(this.iit=1),0===this.R6&&1===t.C8()&&(this.R6=1);this.eit=0,this.tit.some((t=>t.dst()))&&(this.eit=1)}}pet(){return this.Bst.wst().Met(this.Kst)}det(){return this.tit.map((t=>t.w4()))}met(t){t.forEach(((t,s)=>{this.tit[s].S4(t)}))}fet(t){if(!gm.$i(t))return;const s=this.Fj().rj(t);s&&this.oit().Nst(this.Bst.hH(),s,this.fit())}yet(t){const s=this.Bst.wst();this.Kst=s.wet(t)}}}{const Mm=self.Gs;Mm.hit=class extends Mm.Un{constructor(t,s){super(),this.Tet=t,this.bet=s,this.vet=s.rit(),this.iit=0,this.R6=0,this.eit=0,this.xet=this.ltt(),this.Cet=this.bet.Iet().Get(),this.Net=null,this.Eet=null}static DC(t,s){return Mm.Qn(Mm.hit,t,s)}Jn(){this.Tet=null,this.xet&&(this.xet.Jn(),this.xet=null),this.Cet=null,this.bet=null,this.vet=null}zit(){return this.iit}C8(){return this.R6}dst(){return this.eit}Det(){return!!this.Eet}_et(t){this.Eet=t}Aet(){return this.Eet}Let(){return this.Tet}Oet(){return this.bet}rit(){return this.vet}oit(){return this.Tet.oit()}Fj(){return this.Tet.Fj()}iH(){return this.Tet.iH()}ltt(){if(this.xet)return this.xet;let t;switch(this.bet.yit()){case"behavior":t=new Mm.hit.Ret(this);break;case"effect":t=new Mm.hit.Pet(this),this.R6=1;break;case"instance-variable":t=new Mm.hit.ket(this);break;case"plugin":t=new Mm.hit.Fet(this),this.R6=1;break;case"world-instance":t=new Mm.hit.jet(this),this.R6=1,this.iit=1;break;case"value":t=new Mm.hit.zet(this);break;case"audio":t=new Mm.hit.Bet(this)}return this.xet=t,this.xet}yit(){return this.bet.yit()}Uet(t){this.bet.Uet(t)}Wet(){return this.bet.Qet()}Jet(t){this.bet.Vet(t)}oH(){return this.ltt().Yet()}Lst(){return this.bet.Het()}qet(t){this.bet.Zet(t)}Ket(){return this.bet.AG()}Xet(t){this.bet.$et(t)}tnt(){return this.rit().snt(this.bet).AG()}int(){return this.bet.int()}ent(t){this.bet.ent(t)}nnt(){return this.bet.nnt()}rnt(t){this.bet.rnt(t)}Dit(){return this.bet.Dit()}_it(t){this.bet._it(t)}ytt(){return this.bet.ytt()}gtt(t){this.bet.gtt(t)}m7(){return this.bet.m7()}Mtt(t){this.bet.Mtt(t)}sH(t){for(const s of this.hnt())s.sH(t)}ont(){return this.bet.ont()}hnt(){return this.Cet||(this.Cet=this.bet.Iet().Get()),this.Cet}h7(){return this.bet.Iet().h7()}ant(t){return this.vet.ant(t,this.bet)}unt(t){return this.vet.unt(t,this.bet)}lnt(t){let s,i=this.vet.ant(t,this.bet);return i?s=this.vet.cnt(t,this.bet):(i=this.vet.unt(t,this.bet),s=this.vet.fnt(t,this.bet)),{start:i,end:s}}*dnt(){for(const t of this.hnt())yield t.v7()}*pnt(){for(const t of this.hnt())yield t.GO()}Cst(){this.ltt().Cst()}P8(){this.ltt().P8()}mnt(){return this.ltt().mnt()}sst(){this.ltt().sst()}x8(t){this.ltt().x8(),this.Net=this.ynt(t),this.fst()}cst(t){this.ltt().cst(),this.Net=this.ynt(t)}fst(){const t=this.Let();if(this.eit=0,t.ftt()){const s=this.oit(),i=t.iH(),e=this.ltt(),n=this.Lst();if(e.gnt()){const t=s.utt(i,e,n,this);t&&t.length&&(this.eit=1)}else this.eit=0}}ynt(t){const s=this.oit();return this.vet.ant(t,this.bet)||(s.vtt()?this.vet.unt(t,this.bet):this.vet.fnt(t,this.bet))}yst(){this.xet.yst()}Mc(t,s=!1,i=!1,e=!1){let n,r,h=!1;if(s)n=this.vet.unt(t,this.bet);else{if(this.Net){const s=this.oit(),i=this.Net.o7(),e=this.Net.GO(),n=i?i.GO():s.kY();(t<=e||t>=n)&&(this.Net=this.vet.unt(t,this.bet),h=!0)}else this.Net=this.vet.unt(t,this.bet),h=!0;n=this.Net}n&&(r=n.o7()),this.xet.Mc(t,n,r,s,i,e,h)}Mnt(t){if(this.Net){const s=this.oit(),i=this.Net.o7(),e=this.Net.GO(),n=i?i.GO():s.kY();(t<=e||t>=n)&&(this.Net=this.vet.unt(t,this.bet))}else this.Net=this.vet.unt(t,this.bet);const s=this.Net,i=s.o7();return this.xet.Mnt(t,s,i)}wnt(t,s,i){return this.xet.Mnt(t,s,i)}Sst(){this.xet.Sst()}static Snt(t,s){const i=s.Oet();return s.vet.unt(t,i)}static Tnt(t,s){const i=s.Oet();return s.vet.fnt(t,i)}bnt(){const t=this.bet.Iet().vnt();return this.Net=null,t}aet(t){this.Net=null,this.bet.Iet().xnt(t)}uet(){this.ltt().uet()}let(){if(this.ltt().let()){const t=this.vet.snt(this.bet),s=this.ltt().mnt();t.Cnt(s)}}cet(){const t=this.ltt().cet();return t&&this.Gnt(),this.ltt().Int(),t}Gnt(){const t=this.oit().GO(),s=this.ltt(),i=Mm.hit.Snt(t,this),e=this.bnt();e.$et(i.AG()),e.RY(t),e.sH(i.Nnt()),e._it(!0),e.Ent(s.Dnt()),e.Cnt(s.mnt())}w4(){return{sourceAdapterJson:this.ltt().w4()}}S4(t){t&&this.ltt().S4(t.sourceAdapterJson)}}}{const wm=self.Gs.hit;wm.jet=class{constructor(t){this._nt=t,this.Ant=null,this.Lnt()}Jn(){this.Ant&&(this.Ant.Jn(),this.Ant=null),this._nt=null}gnt(){return this.Ant.gnt()}aH(){return this._nt}Cst(){this.Ant&&this.Ant.Cst()}P8(){this.Ant&&this.Ant.P8()}Lnt(){return this.Ant||(this.Ant=this.Ont()),this.Ant}git(){}$P(){return this.git()}Rnt(){}sst(){this.Lnt().sst()}x8(){this.Lnt().x8()}cst(){this.Lnt().cst()}yst(){this.Ant.Pnt()}Mc(t,s,i,e,n,r,h){let o;switch(this._nt.tnt()){case"numeric":o=wm.knt.Mc(t,s,i,this._nt);break;case"angle":o=wm.Fnt.Mc(t,s,i,this._nt);break;case"boolean":o=wm.jnt.Mc(t,s,i,this._nt);break;case"color":o=wm.znt.Mc(t,s,i,this._nt);break;case"text":o=wm.Bnt.Mc(t,s,i,this._nt)}this.Ant.Unt(t,o,s,i,e,n,r,h)}Mnt(t,s,i){switch(this._nt.tnt()){case"numeric":return wm.knt.Mc(t,s,i,this._nt);case"angle":return wm.Fnt.Mc(t,s,i,this._nt);case"boolean":return wm.jnt.Mc(t,s,i,this._nt);case"color":return wm.znt.Mc(t,s,i,this._nt);case"text":return wm.Bnt.Mc(t,s,i,this._nt)}}Sst(){this.Ant.Wnt()}uet(){this.Lnt().Qnt()}Int(){this.Lnt().Int()}mnt(){return this.Lnt().mnt()}let(){return this.Lnt().let()}cet(){return this.Lnt().cet()}Dnt(){const t=this._nt,s=t.Let().oit().GO(),i=wm.Snt(s,t),e=i.o7();switch(t.tnt()){case"numeric":return wm.knt.Mc(s,i,e,t);case"angle":return wm.Fnt.Mc(s,i,e,t);case"boolean":return wm.jnt.Mc(s,i,e,t);case"color":return wm.znt.Mc(s,i,e,t);case"text":return wm.Bnt.Mc(s,i,e,t)}}Ont(){const t=this._nt;switch(t.ont()?t.tnt():""){case"combo":case"boolean":case"text":case"string":return new wm.Vnt.Jnt(this);case"numeric":case"number":case"angle":return"combo"===this._nt.Ket()?new wm.Vnt.Jnt(this):new wm.Vnt.Ynt(this);case"color":case"offsetColor":return new wm.Vnt.Hnt(this);default:return new wm.Vnt.Ynt(this)}}w4(){return{propertyAdapterJson:this.Lnt().w4()}}S4(t){t&&this.Lnt().S4(t.propertyAdapterJson)}}}{const Sm=self.Gs;class Tm extends Sm.hit.jet{constructor(t){super(t),this.qnt=NaN}git(){return this._nt.Oet().Qet()[0]}$P(){return this.qnt?this.qnt:super.$P()}Rnt(){return this._nt.Let().iH()}Tit(t){this._nt.Oet().Qet()[0]!==t&&(this.qnt=t)}Mc(t,s,i,e,n,r,h){this.Lnt().Znt(s.Yet())&&super.Mc(t,s,i,e,n,r,h)}Mnt(t,s,i){if(this.Lnt().Znt(s.Yet()))return super.Mnt(t,s,i)}w4(){return Object.assign(super.w4(),{index:this.qnt})}S4(t){t&&(super.S4(t),this.qnt=t.index)}}Sm.hit.ket=Tm}{const bm=self.Gs;class vm extends bm.hit.jet{constructor(t){super(t),this.f$=NaN}git(){return this._nt.Oet().Qet()[1]}Rnt(){const t=this._nt.Oet(),s=this._nt.Let(),i=this.f$?this.f$:t.Qet()[0],e=s.iH(),n=e.Knt(i);return e.Xnt()[n].DV()}zV(t){const s=this._nt.Oet().Qet()[2];return t.$nt(s)}vit(t){this._nt.Oet().Qet()[0]!==t&&(this.f$=t)}Mc(t,s,i,e,n,r,h){const o=this._nt.Let().iH();this.zV(o.BW())&&super.Mc(t,s,i,e,n,r,h)}Mnt(t,s,i){const e=this._nt.Let().iH();if(this.zV(e.BW()))return super.Mnt(t,s,i)}w4(){return Object.assign(super.w4(),{sid:this.f$})}S4(t){t&&(super.S4(t),this.f$=t.sid)}}bm.hit.Ret=vm}{const xm=self.Gs;class Cm extends xm.hit.jet{constructor(t){super(t)}git(){return this._nt.Oet().Qet()[1]}Rnt(){const t=this._nt.Let().lj().ZQ(),s=t.eU(),i=this.Cit(s).$P();return t.VV(i)?t.trt(i):null}Cit(t){const s=this._nt.Oet().Qet()[0];return t.srt(s)}Mc(t,s,i,e,n,r,h){this.irt()&&super.Mc(t,s,i,e,n,r,h)}Mnt(t,s,i){if(this.irt())return super.Mnt(t,s,i)}irt(){const t=this._nt.Let().lj().ZQ(),s=t.eU(),i=this.Cit(s);if(!i)return;const e=i.$P();return t.VV(e)}}xm.hit.Pet=Cm}{const Gm=self.Gs;class Im extends Gm.hit.jet{constructor(t){super(t)}git(){return this._nt.Oet().Qet()[0]}Rnt(){return this._nt.Let().iH().DV()}Mc(t,s,i,e,n,r,h){const o=this._nt.Let();o.BW().TB()===o.iH().BW().TB()&&super.Mc(t,s,i,e,n,r,h)}Mnt(t,s,i){const e=this._nt.Let();if(e.BW().TB()===e.iH().BW().TB())return super.Mnt(t,s,i)}ert(){const t=this._nt.Let(),s=t.BW().TB();if(Gm._j.nrt&&s instanceof Gm._j.nrt&&("initial-frame"===this._nt.Lst()||"initial-animation"===this._nt.Lst()))switch(this._nt.m7()){case"relative":return{rrt:(s,i,e,n,r)=>{if(i!==n){const e=n/i,r=t.aH("offsetWidth"),h=t.aH("offsetScaleX");if(r||h){const o=r?.ltt()?.Lnt(),a=h?.ltt()?.Lnt();if(s.YJ()&&s.tV())a&&a.hrt(n),s.$y(this.ort(n,i,s,t,o,a));else{const i=n*((s.urt()?.art()??this.lrt(s,t))/this.lrt(s,t));a&&a.hrt(n);const r=o?.crt()??0,h=a?.crt()??0;s.$y(i+(r+h*e))}}else s.$y(s.Vy()*e)}if(e!==r){const i=r/e,n=t.aH("offsetHeight"),h=t.aH("offsetScaleY");if(n||h){const o=n?.ltt()?.Lnt(),a=h?.ltt()?.Lnt();if(s.YJ()&&s.iV())a&&a.hrt(r),s.Yy(this.frt(r,e,s,t,o,a));else{const e=r*((s.urt()?.drt()??this.prt(s,t))/this.prt(s,t));a&&a.hrt(r);const n=o?.crt()??0,h=a?.crt()??0;s.Yy(e+(n+h*i))}}else s.Yy(s.ig()*i)}}};case"absolute":return null}}mrt(t,s,i,e=0){const n=s.oit().Ost(t.iH());if(!n)return e;const r=n.aH(i);if(!r)return e;const h=r.Oet().Iet();if(!h)return e;const o=h.yrt();return o?o.Yet():e}lrt(t,s){const i=s.oit().Ost(t.iH());if(i)return i.Oit();const e=t.iH().DV();return e.Rit()?e.Oit():t.urt().art()}prt(t,s){const i=s.oit().Ost(t.iH());if(i)return i.kit();const e=t.iH().DV();return e.Rit()?e.kit():t.urt().drt()}ort(t,s,i,e,n,r){const h=i.urt().art(),o=h/i.OJ().urt().art();let a=1;const u=r?.grt()??0;if(0!==u){const t=h/this.lrt(i,e);a=(t+u)/(0===t?Number.EPSILON:t)}const l=h*(t/s);let c=n?.Mrt()??0;c+=l-h;const f=(h+c)/(0===h?Number.EPSILON:h);return i.OJ().Vy()*o*a*f}frt(t,s,i,e,n,r){const h=i.urt().drt(),o=h/i.OJ().urt().drt();let a=1;const u=r?.wrt()??0;if(0!==u){const t=h/this.prt(i,e);a=(t+u)/(0===t?Number.EPSILON:t)}const l=h*(t/s);let c=n?.Srt()??0;c+=l-h;const f=(h+c)/(0===h?Number.EPSILON:h);return i.OJ().ig()*o*a*f}}Gm.hit.Fet=Im}{const Nm=self.Gs;class Em extends Nm.hit.jet{constructor(t){super(t),this.Trt=0,this.brt=!1}gnt(){return!1}x8(){const t=this._nt.rit();let s=this._nt.Oet();s=t.snt(s),this.Trt=s.v7()}cst(){}Yet(){return this.brt||this._nt.Mc(0),this.Trt}Mc(t,s,i,e,n,r,h){this.Trt=Nm.hit.knt.Mc(t,s,i,this._nt),this.brt=!0}uet(){}Int(){}mnt(){return this.Trt}let(){return!1}cet(){return!1}w4(){return{value:this.Trt,init:this.brt}}S4(t){t&&(this.Trt=t.value,this.brt=!t.hasOwnProperty("init")||t.init)}}Nm.hit.zet=Em}{const Dm=self.Gs;class _m extends Dm.hit.jet{constructor(t){super(t),this.vrt=!1,this.xrt=null,this.Crt=null,this.Grt=null,this.t7=this._nt.oit(),this.Tet=this._nt.Let(),this.Irt=this._nt.Wet(),this.Nrt=this.Irt[0],this.Ert=this.Irt[1],this.Irt[3]?this.Drt=this.Irt[3]:this.Drt=Math.random().toString(36).slice(2),this._rt=NaN,this.Art=NaN,this.Lrt=NaN,this.Ort=null,this.Rrt()}Jn(){super.Jn(),this.xrt=null,this.Crt=null,this.Grt=null,this.t7=null,this.Tet=null,this.Irt=null,this.Nrt=null,this.Ort=null}Rrt(){if(!self.Gs._j.Audio)return;const t=this._nt.Fj().Prt(self.Gs._j.Audio);t&&(this.xrt=t.MB().DV()),this.Crt=self.Gs._j.Audio.krt,this.Grt=self.Gs._j.Audio.Frt}jrt(){if(this.Ort)return;const t=this._nt.Let().aH("audioSource");t&&(this.Ort=t.ltt())}zrt(){const t=this._nt.Let().aH("volume");return t?t.ltt().Art:this.Art}Cst(){super.Cst(),this.vrt=!1,this.xrt&&(this.Grt&&(this._rt=this.Grt.Brt.call(this.xrt,this.Drt),this.Art=this.Grt.Urt.call(this.xrt,this.Drt)),this.Crt&&this.Crt.AY.call(this.xrt,this.Drt))}Wrt(){return this.Drt}Qrt(){return this.Lrt}Jrt(t){this.Lrt=t}x8(){super.x8(),this._rt=NaN,this.vrt=!1}cst(){super.cst();const t=this._nt.oit().GO();switch(this._rt=t-this.Ert,this._nt.Lst()){case"audioSource":break;case"volume":this.Art=this._nt.Mnt(t)}this.vrt=!1}Mc(t,s,i,e,n,r,h){if(this.xrt)switch(this._nt.Lst()){case"audioSource":{if(!this.t7.vtt())return;if(e)return void(this.Crt&&this.Crt.AY.call(this.xrt,this.Drt));if(t<this.Ert)return void(this.vrt=!1);const s=this.Grt.Vrt.call(this.xrt,this.Drt),i=this.t7.WY();if(i!==s&&this.Crt.UY.call(this.xrt,this.Drt,i),this.vrt)return;if(!this._nt.oit().IsPlaying())return;if(this.vrt=!0,isNaN(this._rt)){const s=self.performance.now(),i=t-this.Ert;if("suspended"===this.xrt.Yrt())return void(this.vrt=!1);const e=i+(self.performance.now()-s)/1e3;if(this.Crt){let t=this.Qrt();isNaN(t)?(this.Jrt(0),t=0):this.Jrt(t),this.Crt.Hrt.call(this.xrt,this.Nrt,t,this.Drt,e)}}else{const t=this._rt;this._rt=NaN;const s=this.zrt();if(this.Art=NaN,"suspended"===this.xrt.Yrt())return void(this.vrt=!1);this.Crt&&(this.Jrt(s),this.Crt.Hrt.call(this.xrt,this.Nrt,s,this.Drt,t))}break}case"volume":this.jrt(),super.Mc(t,s,i,e,n,r,h)}}Mnt(t,s,i){if(this.xrt)switch(this._nt.Lst()){case"audioSource":return;case"volume":return this.jrt(),super.Mnt(t,s,i)}}qrt(t,s){return this.Ort?this.Ort.Qrt():0}Zrt(t,s,i,e){this.Ort&&this.Ort.Jrt(this.qrt()+s),this.Crt&&this.Ort&&this.Crt.Jrt.call(this.xrt,this.Ort.Wrt(),this.Ort.Qrt())}Krt(t,s,i){this.Ort&&this.Ort.Jrt(s),this.Crt&&this.Ort&&this.Crt.Jrt.call(this.xrt,this.Ort.Wrt(),this.Ort.Qrt())}Xrt(){return!0}w4(){return{audioPlaybackStarted:this.vrt,audioTag:this.Drt,pauseTime:this._rt,pauseVolume:this.Art,volume:this.Lrt}}S4(t){t&&(this.vrt=t.audioPlaybackStarted,this.Drt=t.audioTag,this._rt=t.pauseTime,this.Art=t.pauseVolume,this.Lrt=t.volume,this.Rrt())}}Dm.hit.Bet=_m}self.Gs.hit.Vnt=class{constructor(t){this.xet=t,this._nt=t.aH(),this.Vst=this._nt.Let().lj(),this.$rt=this._nt.Lst(),this.tht=!1,this.sht=null,this.iht=null}Jn(){this.xet=null,this._nt=null,this.Vst=null,this.sht=null,this.iht=null}gnt(){return!1}Cst(){}P8(){this.Vst=null,this.sht=null,this.iht=null}ltt(){return this.xet}aH(){return this._nt}lj(){return this.Vst||(this.Vst=this._nt.Let().lj()),this.Vst}eht(t){this.tht=!!t}nht(){return this.tht}sst(){}x8(){}cst(){}Qnt(){this.sht=this.mnt()}Int(){this.sht=null}mnt(){}let(){}cet(){}Znt(t){return typeof this.rht()==typeof t}Pnt(){}Unt(t,s,i,e,n,r,h,o){}Wnt(){}hht(){return this.aht((()=>{const t=this._nt.Oet();return this._nt.rit().snt(t)}),(()=>{const t=this._nt.Oet();return this._nt.rit().yrt(t)})).oht()}uht(){const t=this._nt.oit().GO()-this._nt.Let().gst();return this.aht((()=>{const s=this._nt.Oet();return this._nt.rit().unt(t,s)}),(()=>{const s=this._nt.Oet(),i=this._nt.rit();return i.fnt(t,s)||i.yrt(s)})).oht()}aht(t,s){return this._nt.oit().vtt()?t():s()}lht(t,s){return"relative"===this._nt.m7()?t():s()}cht(t,s){return this.nht()?(this.eht(!1),t()):s()}fht(t){}dht(){return this.xet.$P()}pht(){return this.iht||(this.iht=this.xet.Rnt()),this.iht}mht(t,s,i,e,n,r){switch(this._nt.yit()){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return n();case"audio":return r()}}w4(){return{firstAbsoluteUpdate:this.tht,saveState:this.sht}}S4(t){t&&(this.tht=t.firstAbsoluteUpdate,this.sht=t.saveState)}yht(t,s=!1){const i=[];for(const e of t){const t=e.Let().gst();for(const n of e.hnt())s&&0===n.GO()?i.push({time:t+n.GO(),value:n.oht()}):s||i.push({time:t+n.GO(),value:n.oht()})}return i.sort(((t,s)=>t.time-s.time))}ght(t,s,i){return this.Mht(s,i)}Mht(t,s){for(let i=s.length-1;i>=0;i--)if(s[i].time<=t)return s[i];return null}};{const Am=self.Gs,Lm=new Map,Om=[0,0,0];class Rm extends Am.hit.Vnt{constructor(t){super(t)}sst(){}x8(){}cst(){}mnt(){const t=this._nt.yit(),s=this.pht(),i=this.dht();switch(t){case"behavior":case"plugin":return this.wht(s.Sht(i));case"effect":return this.wht(s[i]);case"world-instance":return this.wht(this.rht())}}let(){const t=this.hht();return!this.Tht(t,this.rht())}cet(){return!Am.ie(this.sht)&&!this.Tht(this.sht,this.rht())}Tht(t,s){return t=this.bht(t),s=this.bht(s),t.Qo(s)}hht(){const t=super.hht();return this.bht(t)}uht(){const t=super.uht();return this.bht(t)}fht(t){}wht(t){return Am.Pe(t,Am.vo)?t.toArray().slice(0,3):t.slice(0,3)}bht(t){return Am.Pe(t,Am.vo)?t:new Am.vo(t[0],t[1],t[2],1)}Znt(t){return!0}gnt(){return!0}Pnt(){const t=this._nt.oit(),s=this._nt.iH(),i=this._nt.ltt(),e=t.utt(s,i,this.$rt,this._nt);if(e&&e.length>1){Lm.has(s)||Lm.set(s,new Map);const t=Lm.get(s),i=this._nt.yit();t.has(i)||t.set(i,new Map);const e=t.get(i);e.has(this.$rt)||e.set(this.$rt,{vht:!1,color:new Am.vo(0,0,0,1)})}}xht(t,s,i){const e=Lm.get(t).get(s).get(i);return e.vht=!0,e.color}Unt(t,s,i,e,n,r,h,o){const a=this._nt.oit(),u=this._nt.Let(),l=this._nt.iH(),c=this._nt.ltt(),f=this._nt.yit(),d=this.$rt,p=a.utt(l,c,d,this._nt);if(p&&p.length>1){const t=this.yht(p,!0),i=this.ght(a,a.GO(),t);if(i){const t=u.gst(),e=i.time-t;if(0===e)this.xht(l,f,this.$rt).Do(s[0],s[1],s[2]);else{if(e<0)return;const t=s[0],i=s[1],n=s[2],r=this._nt.Mc(e,!1,!0),h=Am.vo.Ta(t,r[0]),o=Am.vo.Ta(i,r[1]),a=Am.vo.Ta(n,r[2]);this.xht(l,f,this.$rt).Do(h,o,a)}}}else this.Cht(s[0],s[1],s[2])}Wnt(){const t=this._nt.iH();if(!Lm.has(t))return;const s=Lm.get(t),i=this._nt.yit();if(!s.has(i))return;const e=s.get(i);if(!e.has(this.$rt))return;const n=e.get(this.$rt),r=n.vht,h=n.color;r&&this.Cht(h.ko(),h.Fo(),h.jo()),0===e.size&&s.delete(i),0===s.size&&Lm.delete(t)}rht(){const t=this._nt.yit(),s=this.pht(),i=this.dht();switch(t){case"behavior":case"plugin":return this.bht(s.Sht(i));case"effect":return s[i].clone();case"world-instance":return this.lj().SJ().clone()}}Cht(t,s,i){const e=this._nt.yit(),n=this.pht(),r=this.dht();switch(e){case"behavior":case"plugin":Om[0]=t,Om[1]=s,Om[2]=i,n.Ght(r,Om);break;case"effect":n[r].Eo(t,s,i);break;case"world-instance":this.lj().Iht(t,s,i)}}w4(){}S4(t){}}Am.hit.Vnt.Hnt=Rm}{const Pm=self.Gs,km=Pm.hit;class Fm extends Pm.hit.Vnt{constructor(t){super(t)}sst(){}x8(){}cst(){}mnt(){return this.rht()}let(){return this.hht()!==this.mnt()}cet(){return!Pm.ie(this.sht)&&this.sht!==this.mnt()}gnt(){return!1}Unt(t,s,i,e,n,r,h,o){const a=this._nt,u=a.Let(),l=a.yit(),c=a.oit(),f=u.iH(),d=a.ltt(),p=this.$rt,m=c.utt(f,d,p,a);if(m&&m.length>1){const i=this.yht(m),e=t+u.gst(),n=this.ght(c,e,i);n&&(s=n.value)}switch(a.tnt()){case"numeric":if(!km.knt.Nht(this.dht(),this.pht(),s,l))return;break;case"angle":if(!km.Fnt.Nht(this.dht(),this.pht(),s,l))return;break;case"boolean":if(!km.jnt.Nht(this.dht(),this.pht(),s,l))return;break;case"color":if(!km.znt.Nht(this.dht(),this.pht(),s,l))return;break;case"text":if(!km.Bnt.Nht(this.dht(),this.pht(),s,l))return}this.Cht(s)}rht(){const t=this._nt.yit(),s=this.pht(),i=this.dht();switch(t){case"behavior":case"plugin":return s.Sht(i);case"effect":return s[i];case"instance-variable":return s.Eht(i)}}Cht(t){const s=this._nt.yit(),i=this.pht(),e=this.dht();switch(s){case"behavior":case"plugin":i.Ght(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.Dht(e,t)}}}Pm.hit.Vnt.Jnt=Fm}{const jm=self.Gs,zm=(jm.hit.Vnt,new Map),Bm=(t,s,i,e,n,r=!1,h=null,o=null)=>{zm.set(t,{_ht:s,Aht:i,Lht:e,round:n,Oht:r,init:h,reset:o})},Um=(t,s,i,e=0)=>{const n=s.oit().Ost(t.iH());if(!n)return e;const r=n.aH(i);if(!r)return e;const h=r.Oet().Iet();if(!h)return e;const o=h.yrt();return o?o.Yet():e},Wm=t=>{const s=[];let i=t.OJ();for(;i;)s.push(i),i=i.OJ();return s.reverse(),s};Bm("offsetX",((t,s,i,e)=>{"relative"===e._nt.m7()?t.Rht(s,i.oit().Stt()):t.Rht(s)}),((t,s)=>t.Qb(s)),(t=>t.Wb()),!0),Bm("offsetY",((t,s,i,e)=>{"relative"===e._nt.m7()?t.Pht(s,i.oit().Stt()):t.Pht(s)}),((t,s)=>t.Yb(s)),(t=>t.Vb()),!0),Bm("offsetWidth",((t,s,i,e,n=!1,r=!0)=>{if(0===s)return;const h="relative"===e._nt.m7(),o=1===e.kht.AG();if((h||o)&&t.YJ()&&t.tV()){if(isNaN(e.Fht)){const s=Wm(t);let i;i=o?s[s.length-1].Vy():s[s.length-1].urt().art(),e.Fht=0===i?Number.EPSILON:i}if(n)return;e.jht+=s;const i=s/e.Fht;t.xg(i,r),e.zht+=i}else t.xg(s),e.zht+=s}),((t,s)=>t.$y(s)),(t=>t.Vy()),!0,!1,null,(t=>{t.zht=0,t.jht=0})),Bm("offsetHeight",((t,s,i,e,n=!1,r=!0)=>{if(0===s)return;const h="relative"===e._nt.m7(),o=1===e.kht.AG();if((h||o)&&t.YJ()&&t.iV()){if(isNaN(e.Fht)){const s=Wm(t);let i;i=o?s[s.length-1].ig():s[s.length-1].urt().drt(),e.Fht=0===i?Number.EPSILON:i}if(n)return;e.Bht+=s;const i=s/e.Fht;t.Uht(i,r),e.zht+=i}else t.Uht(s),e.zht+=s}),((t,s)=>t.Yy(s)),(t=>t.ig()),!0,!1,null,(t=>{t.zht=0,t.Bht=0})),Bm("offsetAngle",((t,s,i,e,n)=>{t.Wht(s)}),((t,s)=>t.uU(s)),(t=>t.lU()),!1,!0),Bm("offsetOpacity",((t,s,i,e,n)=>{s/=e.Qht?e.Qht:1;const r=t.$A()+s;if(0===e.Jht)r>1?e.Jht+=r-1:r<0&&(e.Jht+=r),t.Vht(s);else{const i=t.$A()+s;s>0&&e.Jht>0?i>1&&(e.Jht+=i-1):s>0&&e.Jht<0?(e.Jht+=s,e.Jht>0&&(t.Vht(e.Jht),e.Jht=0)):s<0&&e.Jht>0?(e.Jht+=s,e.Jht<0&&(t.Vht(e.Jht),e.Jht=0)):s<0&&e.Jht<0&&i<0&&(e.Jht+=i)}}),((t,s)=>{t.sL(s)}),(t=>t.$A()),!1,!0,((t,s,i)=>{switch(t.Jht=0,t._nt.m7()){case"relative":{t._nt.rit();const s=t._nt.Oet().Iet().Get();let i=t.lj().$A(),e=i;for(const n of s){const s=n.GO();e=i+t._nt.Mnt(s),e=jm.Zn(e,0,1)}t.Yht=i-e,t.Yht=Math.round(100*(t.Yht+Number.EPSILON))/100,e=i;for(let i=s.length-1;i>=0;i--){const n=s[i].GO();e-=t._nt.Mnt(n),e=jm.Zn(e,0,1)}t.Hht=e,t.Hht=Math.round(100*(t.Hht+Number.EPSILON))/100;break}}const e="relative"===t._nt.m7(),n=1===t.kht.AG();if((e||n)&&s.YJ()&&s.aV()){const e=Wm(s);let n=e[0].urt().qht();n+=Um(e[0],i,"offsetOpacity");for(let t=1;t<e.length;t++)n+=Um(e[t],i,"offsetOpacity");t.Qht=0===n?1:n}}),(t=>{switch(t._nt.m7()){case"relative":{t.Jht=0;const s=t.lj();let i=s.$A();i=Math.round(100*(i+Number.EPSILON))/100,t._nt.oit().vtt()?(s.sL(i+t.Yht),t.bI=0):(s.sL(i-t.Hht),t.bI=t.ltt().Dnt());break}}})),Bm("offsetOriginX",((t,s)=>t.Zht(s)),((t,s)=>t.nJ(s)),(t=>t.eJ()),!1),Bm("offsetOriginY",((t,s)=>t.Kht(s)),((t,s)=>t.oJ(s)),(t=>t.hJ()),!1),Bm("offsetZElevation",((t,s)=>t.Xht(s)),((t,s)=>t.qb(s)),(t=>t.Hb()),!0),Bm("offsetScaleX",((t,s,i,e)=>{if(0===s)return;const n=t.Vy()<0?-1:1;if(e.$ht+=s,"relative"===e._nt.m7()&&t.YJ()&&t.tV()){const r=Um(t,i,"offsetWidth"),h=isNaN(e.tot)?i.Oit():e.tot,o=(h+r/(t.urt().art()/h))*n*s;isNaN(e.Fht)&&zm.get("offsetWidth")._ht(t,1,i,e,!0);const a=o/e.Fht;t.xg(a,!0),e.zht+=a}else{const r=(isNaN(e.tot)?i.Oit():e.tot)*n*s;t.xg(r),e.zht+=r}}),((t,s,i)=>{t.$y(i.Oit()*s)}),((t,s)=>{const i=t.Vy()<0?-1:1;if(t.tV()){const e=t.OJ(),n=s.oit().Ost(e.iH());let r=NaN;if(n)r=e.Vy()/n.Oit();else{const t=e.iH().DV();r=t.Rit()?e.Vy()/t.Oit():1}return t.Vy()*i/(s.Oit()*r)}return t.Vy()*i/s.Oit()}),!1,!1,null,(t=>{t.zht=0,t.tot=NaN,t.$ht=0})),Bm("offsetScaleY",((t,s,i,e)=>{if(0===s)return;const n=t.ig()<0?-1:1;if(e.sot+=s,"relative"===e._nt.m7()&&t.YJ()&&t.iV()){const r=Um(t,i,"offsetHeight"),h=isNaN(e.tot)?i.kit():e.tot,o=(h+r/(t.urt().drt()/h))*n*s;isNaN(e.Fht)&&zm.get("offsetHeight")._ht(t,1,i,e,!0);const a=o/e.Fht;t.Uht(a,!0),e.zht+=a}else{const r=(isNaN(e.tot)?i.kit():e.tot)*n*s;t.Uht(r),e.zht+=r}}),((t,s,i)=>{t.Yy(i.kit()*s)}),((t,s)=>{const i=t.ig()<0?-1:1;if(t.iV()){const e=t.OJ(),n=s.oit().Ost(e.iH());let r=NaN;if(n)r=e.ig()/n.kit();else{const t=e.iH().DV();r=t.Rit()?e.ig()/t.kit():1}return t.ig()*i/(s.kit()*r)}return t.ig()*i/s.kit()}),!1,!1,null,(t=>{t.zht=0,t.tot=NaN,t.sot=0}));class Qm extends jm.hit.Vnt{constructor(t){super(t),this.bI=0,this.Jht=0,this.Yht=0,this.Hht=0,this.Qht=NaN,this.Fht=NaN,this.zht=0,this.tot=NaN,this.jht=0,this.$ht=0,this.Bht=0,this.sot=0,this.iot=void 0,this.eot=void 0,this.not=null,this.rot=null,this.hot=null,this.oot=null,this.aot=null,this.uot=null,this.lot=null,this.cot=null,this.fot=!1,this.dot=!1,jm.Pe(this._nt.oit(),jm.pot)?this.kht=new jm.hit.Vnt.mot(this):this.kht=new jm.hit.Vnt.yot(this);const s=this._nt.Lst();switch(this._nt.yit()){case"world-instance":{const t=zm.get(s);this.not=t.Lht,this.rot=t._ht,this.hot=t.Aht,this.fot=t.round,this.dot=t.Oht,this.aot=t.init,this.oot=t.reset;break}case"audio":this.uot=t.qrt,this.lot=t.Zrt,this.cot=t.Krt,this.fot=!!t.Xrt(),this.dot=!1}}Jn(){this.kht=null,this.not=null,this.rot=null,this.hot=null,this.oot=null,this.aot=null,this.uot=null,this.lot=null,this.cot=null,super.Jn()}gnt(){return this.kht.gnt()}got(){return this.bI}Mot(t){this.bI=t}sst(){this.oot&&this.oot(this)}x8(){const t=this.kht.x8();if("number"==typeof t&&(this.bI=t),this.aot){const t=this.lj(),s=this._nt.Let();this.aot(this,t,s)}}cst(){const t=this.kht.cst();"number"==typeof t&&(this.bI=t)}mnt(){return this.rht()}let(){return this.hht()!==this.mnt()}cet(){return!jm.ie(this.sht)&&this.sht!==this.mnt()}Pnt(){this.kht.Pnt()}Unt(t,s,i,e,n,r,h,o){return this.kht.Unt(t,s,i,e,n,r,h,o)}Wnt(){this.kht.Wnt()}rht(){const t=this.pht(),s=this.dht(),i=this.lj(),e=this._nt.Let();switch(this._nt.yit()){case"behavior":case"plugin":return t.Sht(s);case"effect":return t[s];case"instance-variable":return t.Eht(s);case"world-instance":return this.not(i,e);case"audio":return this.uot.call(this.ltt(),i,e)}}Cht(t,s,i,e=!0){const n=this.pht(),r=this.dht(),h=this.lj(),o=this._nt.Let();switch(this._nt.yit()){case"behavior":n.wot(r,t);break;case"effect":n[r]+=t;break;case"instance-variable":n.Sot(r,t);break;case"plugin":n.wot(r,t,this.ltt().ert());break;case"world-instance":this.rot(h,t,o,this,!1,e);break;case"audio":this.lot.call(this.ltt(),h,t,o,this)}}Tot(t,s,i){let e=this._nt.ytt();if(e="default"===e?"continuous":e,"discrete"===e&&!s)return;if("discrete"===e&&i){const t=this._nt.oit().GO();if(!this._nt.ant(t))return}const n=this.pht(),r=this.dht(),h=this.lj(),o=this._nt.Let();switch(this._nt.yit()){case"behavior":n.Ght(r,t);break;case"effect":n[r]=t;break;case"instance-variable":n.Dht(r,t);break;case"plugin":n.Ght(r,t,this.ltt().ert());break;case"world-instance":this.hot(h,t,o);break;case"audio":this.cot.call(this.ltt(),h,t,o)}}bot(t,s,i,e,n,r,h,o){this.kht.bot(t,s,i,e,n,r,h,o)}vot(t,s,i,e,n){"angle"===this._nt.Ket()&&(t=jm.$n(t));const r=(t.toString().split(".")[1]||"").length,h=this.rht();let o;switch(o=0===r?this.fot?Math.round(h):this.dot?"angle"===this._nt.Ket()?jm.Xn(Math.round(jm.$n(h))):Number(jm.toFixed(h,2)):h:this.fot?Number(jm.toFixed(h,r)):(this.dot,h),this.Cht(o-h,s,i,!1),this._nt.Lst()){case"offsetWidth":case"offsetScaleX":{const t=this.lj(),s=t.Vy(),i=Number(jm.toFixed(s,2));t.xg(i-s);break}case"offsetHeight":case"offsetScaleY":{const t=this.lj(),s=t.ig(),i=Number(jm.toFixed(s,2));t.Uht(i-s);break}}}w4(){return Object.assign(super.w4(),{v:this.bI,a:this.Jht,fod:this.Yht,bod:this.Hht,of:this.Qht,sf:this.Fht,armorf:this.iot,armandf:this.eot,ca:this.zht,os:this.tot,awo:this.jht,aho:this.Bht,asxo:this.$ht,asyo:this.sot})}S4(t){t&&(super.S4(t),this.bI=t.v,this.Jht=t.a,this.Yht=jm.$i(t.fod)?t.fod:0,this.Hht=jm.$i(t.bod)?t.bod:0,this.Qht=jm.$i(t.of)?t.of:NaN,this.Fht=jm.$i(t.sf)?t.sf:NaN,this.iot=jm.$i(t.armorf)?t.armorf:void 0,this.eot=jm.$i(t.armandf)?t.armandf:void 0,this.zht=jm.$i(t.ca)?t.ca:0,this.tot=jm.$i(t.os)?t.os:NaN,this.jht=jm.$i(t.awo)?t.awo:0,this.Bht=jm.$i(t.aho)?t.aho:0,this.$ht=jm.$i(t.asxo)?t.asxo:0,this.sot=jm.$i(t.asyo)?t.asyo:0)}hrt(t){this.tot=t}crt(){return this.zht}Mrt(){return this.jht}Srt(){return this.Bht}grt(){return this.$ht}wrt(){return this.sot}}jm.hit.Vnt.Ynt=Qm}{const Jm=self.Gs;class Vm{constructor(t){this.xot=!1,this.Trt=0,this.Cot=!1,this.Got=!1,this.tit=t;for(let t=0,s=this.tit.length;t<s;t++)this.tit[t]._et(this)}Ast(){return this.tit}Iot(){this.xot=!0}Not(){return this.xot}Ent(t){this.Trt=t}Yet(){return this.Trt}Eot(t){this.Cot=t}Dot(){return this.Cot}mst(t){this.Got=t}_ot(){return this.Got}Ff(){this.xot=!1,this.Trt=0,this.Cot=!1,this.Got=!1}}class Ym{constructor(t){this.Aot=t}Jn(){this.Aot=null}AG(){return 0}x8(){const t=this.Aot;return this.Aot.aH(),t.lht((()=>t.aht((()=>0),(()=>t.ltt().Dnt()))),(()=>{}))}cst(){}gnt(){switch(this.Aot,this.Aot.aH().m7()){case"relative":return!1;case"absolute":return!0}}Pnt(){this.Aot;const t=this.Aot.aH(),s=t.Lst();switch(t.m7()){case"relative":break;case"absolute":if(t.Det())t.Aet().Ff();else{const i=t.oit(),e=t.iH(),n=t.ltt(),r=i.utt(e,n,s,t);r&&r.length>1&&new Vm(r)}}}Unt(t,s,i,e,n,r,h,o){const a=this.Aot,u=this.Aot.aH();switch(u.m7()){case"relative":{const h=a.got();a.Cht(s-h,i,e),r&&this.bot(t,i,e,n,h,s),a.Mot(s);break}case"absolute":{const t=u.oit(),i=u.Let();if(u.iH(),u.ltt(),u.Det()){const e=u.Aet(),n=e.Ast(),r=a.yht(n,!0),l=a.ght(t,t.GO(),r);if(l){const t=i.gst(),n=l.time-t;if(0===n)e.mst(h),e.Eot(o),e.Iot(),e.Ent(e.Yet()+s);else{if(n<0)return;const t=u.Mnt(n);e.mst(h),e.Eot(o),e.Iot(),e.Ent(e.Yet()+(s-t))}}}else a.Tot(s,o,h);break}}}Wnt(){const t=this.Aot,s=this.Aot.aH();switch(s.m7()){case"relative":break;case"absolute":if(s.Det()){const i=s.Aet();i.Not()&&t.Tot(i.Yet(),i.Dot(),i._ot())}}}bot(t,s,i,e,n,r){const h=this.Aot;e||(s&&t===s.GO()?h.vot(s.v7(),s,i):i&&t===i.GO()?h.vot(i.v7(),s,i):r-n==0&&h.vot(s.v7(),s,i))}}Jm.hit.Vnt.yot=Ym}{const Hm=self.Gs;class qm{constructor(t){this.Aot=t}Jn(){this.Aot=null}AG(){return 1}x8(){const t=this.Aot;return t.eht(!0),this.fht(t.hht())}cst(){const t=this.Aot;if(t.hht()!==t.uht())return t.eht(!0),this.fht(t.uht())}gnt(){return!1}Pnt(){}Unt(t,s,i,e,n,r,h,o){const a=this.Aot,u=a.got();switch(a.aH().m7()){case"relative":a.Cht(s-u,i,e),r&&this.bot(t,i,e,n,u,s,!1,h);break;case"absolute":a.nht()?(a.eht(!1),a.Cht(u,i,e)):0===t&&0===a.aH().oit().kY()?a.Tot(s,!0,!1):(a.Cht(s-u,i,e),r&&this.bot(t,i,e,n,u,s,this.Lot(),h))}a.Mot(s)}Wnt(){}fht(t){return t-this.Aot.mnt()}Lot(){const t=this.Aot,s=t.lj().iH(),i=t.aH().Fj().att();let e=0;for(const t of i.X6())0===t.AG()?t.n8(s)&&e++:1===t.AG()&&t.iH()===s&&e++;return e<=1}bot(t,s,i,e,n,r,h,o){const a=this.Aot;e?s&&t===s.GO()?a.vot(s.v7(),s,i,h,o):i&&t===i.GO()?a.vot(i.v7(),s,i,h,o):i||a.vot(s.v7(),s,i,h,o):s&&t===s.GO()?a.vot(s.v7(),s,i,h,o):i&&t===i.GO()?a.vot(i.v7(),s,i,h,o):r-n==0&&a.vot(s.v7(),s,i,h,o)}}Hm.hit.Vnt.mot=qm}{const Zm=self.Gs,Km=self.Bl;Zm.hit.knt=class{constructor(){}static Nht(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Sht(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Eht(t)}return n!==i}static Mc(t,s,i,e){if(!i){let t=e.Oet();return t=e.rit().yrt(t),t.v7()}let n=e.ytt();if("default"===n&&(n="continuous"),"combo"===e.Ket()&&(n="discrete"),"discrete"===n)return s.v7();if("continuous"===n||"step"===n){const r=e.oit().ptt();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.v7(),o=i.v7(),a=s.T7("cubic-bezier"),u=i.T7("cubic-bezier"),l=a&&a.Oot()&&u&&u.Rot();if(!l&&h===o)return h;const c=s.GO(),f=i.GO();"step"===n&&0!==r&&(t=Zm.Zn(t,c,f));const d=Zm.normalize(t,c,f),p=s.Nnt();let m;if(l){const t=f-c;m=Km.nc(p)(t*d,0,1,t),m=Km.nc("cubicbezier")(m,h,h+a.G7(),o+u.E7(),o)}else m=Km.nc(p)((f-c)*d,h,o-h,f-c);return"integer"===e.Ket()?Math.floor(m):m}}}}{const Xm=self.Gs;Xm.hit.Fnt=class{constructor(){}static Nht(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Sht(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Eht(t)}return n!==i}static Mc(t,s,i,e){if(!i){let t=e.Oet();return t=e.rit().yrt(t),t.v7()}let n=e.ytt();if("default"===n&&(n="continuous"),"combo"===e.Ket()&&(n="discrete"),"discrete"===n)return s.v7();if("continuous"===n||"step"===n){const r=e.oit().ptt();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.GO(),o=i.GO(),a=s.v7(),u=i.v7();"step"===n&&0!==r&&(t=Xm.Zn(t,h,o));const l=s.T7("angle");if(!l){if(a===u)return a;const i=Xm.normalize(t,h,o),e=self.Bl.nc(s.Nnt());return Xm.ur(a,u,e(i,0,1,1))}{const i=l.Pot();if(a===u&&0===i)return a;const e=Xm.normalize(t,h,o),n=self.Bl.nc(s.Nnt())(e,0,1,1);switch(l.kot()){case"closest":return Xm.ur(a,u,n,i);case"clockwise":return Xm.lr(a,u,n,i);case"anti-clockwise":return Xm.cr(a,u,n,i)}}}}}}self.Gs.hit.jnt=class{constructor(){}static Nht(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Sht(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Eht(t)}return!!n!=!!i}static Mc(t,s,i,e){if(!i){let t=e.Oet();return t=e.rit().yrt(t),t.v7()?1:0}return s.v7()?1:0}};{const $m=self.Gs,ty=[0,0,0],sy=[0,0,0],iy=[0,0,0];$m.hit.znt=class{constructor(){}static Nht(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Sht(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Eht(t)}return Array.isArray(i)?(ty[0]=i[0],ty[1]=i[1],ty[2]=i[2]):(iy.ra(i),ty[0]=Math.floor(255*iy.ko()),ty[1]=Math.floor(255*iy.Fo()),ty[2]=Math.floor(255*iy.jo())),Array.isArray(n)?(sy[0]=n[0],sy[1]=n[1],sy[2]=n[2]):(iy.ra(n),sy[0]=Math.floor(255*iy.ko()),sy[1]=Math.floor(255*iy.Fo()),sy[2]=Math.floor(255*iy.jo())),ty[0]!==sy[0]||ty[1]!==sy[1]||ty[2]!==sy[2]}static Mc(t,s,i,e){if(!i){let t=e.Oet();t=e.rit().yrt(t);const s=t.v7();return ty[0]=s[0],ty[1]=s[1],ty[2]=s[2],ty}let n=e.ytt();if("default"===n&&(n="continuous"),"discrete"===n){const t=s.v7();return ty[0]=t[0],ty[1]=t[1],ty[2]=t[2],ty}if("continuous"===n||"step"===n){const r=e.oit().ptt();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.GO(),o=i.GO(),a=s.v7(),u=i.v7();"step"===n&&0!==r&&(t=$m.Zn(t,h,o));const l=$m.normalize(t,h,o),c=s.Nnt(),f=a[0],d=a[1],p=a[2],m=u[0],y=u[1],g=u[2],M=self.Bl.nc(c),w=o-h,S=w*l;return ty[0]=f===m?f:M(S,f,m-f,w),ty[1]=d===y?d:M(S,d,y-d,w),ty[2]=p===g?p:M(S,p,g-p,w),ty}}}}self.Gs.hit.Bnt=class{constructor(){}static Nht(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Sht(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Eht(t)}return n!==i}static Mc(t,s,i,e){if(!i){let t=e.Oet();return t=e.rit().yrt(t),t.v7()}return s.v7()}};{const ey=self.Gs;ey.h6=class{constructor(){this.Fot=new Map}Jn(){for(const t of this.Fot.values())t.Jn();this.Fot.clear(),this.Fot=null}Fl(t){const s=new ey.jot(t),i=s.Nc();this.Fot.set(i,s)}Js(t){return this.Fot.get(t)}ttt(){return 0}static zot(t,s,i,e){if(s)for(const n of s)ey.h6.Bot("create",n,t,i,e)}static Uot(t,s,i,e){if(s)for(const n of s)ey.h6.Bot("create-including-disabled",n,t,i,e)}static Wot(t,s,i,e){t.length?s.forEach(((s,i)=>{t[i].S4(s)})):s.forEach((s=>{ey.h6.Bot("load",s,t,i,e)}))}static Bot(t,s,i,e,n){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,n);break;case"create":case"create-including-disabled":r=new e(s,n)}else if("object"==typeof e){const i=s[e.Qot],h=e.map.get(i);switch(t){case"load":r=new h(null,n);break;case"create":case"create-including-disabled":r=new h(s,n)}}switch(t){case"load":r.S4(s),i.push(r);break;case"create":if("function"==typeof r.Dit&&!r.Dit())return r.Jn();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const ny=self.Gs;ny.jot=class{constructor(t){this.Hn="",this.pst=NaN,this.Jot=0,this.Vot="default",this.Yot="default",this.Hot=!1,this.qot=!1,this.Zot=1,this.Ust=null,this.Kot="",this.Xot=!1,this.$ot=!0,t&&(this.Hn=t[0],this.pst=t[1],this.Jot=t[2],this.Vot=t[3],this.Yot=t[4],this.Hot=!!t[6],this.qot=!!t[7],this.Zot=t[8],this.Kot=t[9],this.Xot=!!t[10],this.$ot=!!t[11],this.Ust=new ny.tat(t[5],this))}Jn(){this.Ust.Jn(),this.Ust=null}htt(){return this.Ust||(this.Ust=new ny.tat(null,this)),this.Ust}Nc(){return this.Hn}_q(t){this.Hn=t}kY(){return this.pst}PY(t){this.pst=t}ptt(){return this.Jot}mtt(t){this.Jot=t}ytt(){return this.Vot}gtt(t){this.Vot=t}m7(){return this.Yot}Mtt(t){this.Yot=t}jY(){return this.Hot}FY(t){this.Hot=t}BY(){return this.qot}zY(t){this.qot=t}iY(){return this.Zot}wtt(t){this.Zot=t}k8(){return this.Kot}Stt(){return this.Xot}Ttt(){return this.$ot}w4(){return{trackDataJson:this.Ust.w4(),name:this.Hn,totalTime:this.pst,step:this.Jot,interpolationMode:this.Vot,resultMode:this.Yot,loop:this.Hot,pingPong:this.qot,repeatCount:this.Zot,startOnLayout:this.Kot,transformWithSceneGraph:!!this.Xot,useSystemTimescale:this.$ot}}S4(t){t&&(this.htt().S4(t.trackDataJson),this.Hn=t.name,this.pst=t.totalTime,this.Jot=t.step,this.Vot=t.interpolationMode,this.Yot=t.resultMode,this.Hot=t.loop,this.qot=t.pingPong,this.Zot=t.repeatCount,this.Kot=t.startOnLayout,this.Xot=!!t.transformWithSceneGraph,this.$ot=!!t.useSystemTimescale)}}}{const ry=self.Gs;class hy{constructor(t,s){this.Ust=s,this.sat=null,this.iat=null,this.Wst=NaN,this.Qst=NaN,this.Vot="default",this.Yot="default",this.cl=!1,this.eat=null,this.vet=null,this.jc="",this.nat=null,this.rat=0,this.hat=this.Ust.dtt().kY(),this.Jc=0,this.Hn="",t&&(t[0]&&(this.sat=t[0],this.Wst=t[0][2],this.Qst=t[0][1]),this.Vot=t[1],this.Yot=t[2],this.cl=!!t[3],t[6]&&(this.jc=t[6]),t[7]&&(this.nat=t[7],this.rat=t[7][0],this.hat=t[7][1]),t[8]&&(this.iat=t[8]),t[8]&&(this.iat=t[8]),t[9]&&(this.Jc=t[9]),t[10]&&(this.Hn=t[10]),this.eat=new ry.oat(t[4],this),this.vet=new ry.aat(t[5],this))}Jn(){this.sat=null,this.Ust=null,this.eat&&(this.eat.Jn(),this.eat=null),this.vet&&(this.vet.Jn(),this.vet=null),this.nat=null}htt(){return this.Ust}wst(){return this.eat||(this.eat=new ry.oat(null,this)),this.eat}rit(){return this.vet||(this.vet=new ry.aat(null,this)),this.vet}uat(){return this.sat}cit(){return this.Qst}Ait(t){this.Qst=t}lit(){return this.Wst}Iit(t){this.Wst=t}ytt(){return this.Vot}gtt(t){this.Vot=t}m7(){return this.Yot}Mtt(t){this.Yot=t}Dit(){return this.cl}_it(t){this.cl=!!t}hH(){return this.jc}gst(){return this.rat}Nit(){return this.hat}Eit(t){this.hat=t}Oit(){return this.iat[0]}Lit(t){this.iat||(this.iat=[]),this.iat[0]=t}kit(){return this.iat||(this.iat=[]),this.iat[1]}Pit(t){this.iat||(this.iat=[]),this.iat[1]=t}AG(){return this.Jc}Nc(){return this.Hn}w4(){return{keyframeDataJson:this.eat.w4(),propertyTrackDataJson:this.vet.w4(),instanceData:this.sat,additionalInstanceData:this.iat,instanceUid:this.Wst,objectClassIndex:this.Qst,interpolationMode:this.Vot,resultMode:this.Yot,enabled:this.cl,id:this.jc,nestedData:this.nat,type:this.Jc,name:this.Hn}}S4(t){t&&(this.sat=t.instanceData,this.Wst=t.instanceUid,this.Qst=t.objectClassIndex,this.Vot=t.interpolationMode,this.Yot=t.resultMode,this.cl=t.enabled,this.jc=t.id,this.Jc=t.type?t.type:0,this.Hn=t.name?t.name:"",this.hat=this.Ust.dtt().kY(),t.nestedData&&(this.nat=t.nestedData,this.rat=this.nat[0],this.hat=this.nat[1]),t.additionalInstanceData&&(this.iat=t.additionalInstanceData),this.wst().S4(t.keyframeDataJson),this.rit().S4(t.propertyTrackDataJson))}}ry.tat=class{constructor(t,s){this.T9=s,this.lat=[],ry.h6.zot(this.lat,t,hy,this)}Jn(){this.T9=null;for(const t of this.lat)t.Jn();ry.wh(this.lat),this.lat=null}dtt(){return this.T9}xst(){const t=new hy(null,this);return this.lat.push(t),t}cat(t){return t.wst().$st()[0]}fat(t){return t.wst().$st().at(-1)}Kit(t,s){const i=s.wst().$st(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.GO()===t)return e}}dat(t,s){const i=s.wst().$st(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.GO()>t)return e}}qit(t,s){const i=s.wst().$st(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.GO()>=t)return e}}Yit(t,s){const i=s.wst().$st();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.GO()<=t)return e}}*ntt(){for(const t of this.lat)yield t}w4(){return{trackDataItemsJson:this.lat.map((t=>t.w4()))}}S4(t){t&&ry.h6.Wot(this.lat,t.trackDataItemsJson,hy,this)}}}{const oy=self.Gs;class ay{constructor(t,s){this.vet=s,this.pat="",this.mat=null,this.$rt=null,this.Jc=null,this.yat=NaN,this.gat=NaN,this.Vot="default",this.Yot="default",this.cl=!1,this.Mat=null,this.wat=!0,t&&(this.pat=t[0][0],this.mat=t[0].slice(1),this.$rt=t[1],this.Jc=t[2],this.yat=t[3],this.gat=t[4],this.Vot=t[5],this.Yot=t[6],this.cl=!!t[7],this.Mat=new oy.Sat(t[8],this),this.wat=t[9])}Jn(){this.Mat.Jn(),this.Mat=null,this.vet=null,this.mat=null}rit(){return this.vet}Iet(){return this.Mat||(this.Mat=new oy.Sat(null,this)),this.Mat}yit(){return this.pat}Uet(t){this.pat=t}Qet(){return this.mat}Vet(t){this.mat=t}Het(){return this.$rt}Zet(t){this.$rt=t}AG(){return this.Jc}$et(t){this.Jc=t}int(){return this.yat}ent(t){this.yat=t}nnt(){return this.gat}rnt(t){this.gat=t}ytt(){return this.Vot}gtt(t){this.Vot=t}m7(){return this.Yot}Mtt(t){this.Yot=t}Dit(){return this.cl}_it(t){this.cl=!!t}ont(){return!!this.wat}w4(){return{propertyKeyframeDataJson:this.Mat.w4(),sourceAdapterId:this.pat,sourceAdapterArguments:this.mat,property:this.$rt,type:this.Jc,min:this.yat,max:this.gat,interpolationMode:this.Vot,resultMode:this.Yot,enabled:this.cl,canHavePropertyKeyframes:this.wat}}S4(t){t&&(this.pat=t.sourceAdapterId,this.mat=t.sourceAdapterArguments,this.$rt=t.property,this.Jc=t.type,this.yat=t.min,this.gat=t.max,this.Vot=t.interpolationMode,this.Yot=t.resultMode,this.cl=t.enabled,this.wat=t.canHavePropertyKeyframes,this.Iet().S4(t.propertyKeyframeDataJson))}}oy.aat=class{constructor(t,s){this.Bst=s,this.Tat=[],oy.h6.zot(this.Tat,t,ay,this)}Jn(){this.Bst=null;for(const t of this.Tat)t.Jn();oy.wh(this.Tat),this.Tat=null}Mst(){return this.Bst}ret(){const t=new ay(null,this);return this.Tat.push(t),t}snt(t){return t.Iet().Get()[0]}yrt(t){return t.Iet().Get().at(-1)}ant(t,s){const i=s.Iet().Get(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.GO()===t)return e}}cnt(t,s){const i=s.Iet().Get(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.GO()>t)return e}}fnt(t,s){const i=s.Iet().Get(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.GO()>=t)return e}}unt(t,s){const i=s.Iet().Get();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.GO()<=t)return e}}*nit(){for(const t of this.Tat)yield t}w4(){return{propertyTrackDataItemsJson:this.Tat.map((t=>t.w4()))}}S4(t){t&&oy.h6.Wot(this.Tat,t.propertyTrackDataItemsJson,ay,this)}}}{const uy=self.Gs;class ly{constructor(t,s){if(this.eat=s,this.bR=-1,this.bat="noease",this.vat=!1,this.Y9=null,this.xat=null,!t)return;this.bR=t[0],this.bat=t[1],this.vat=!!t[2];const i=t[3];this.Y9=i?i.split(" "):[],this.xat=new Set(this.Y9.map((t=>t.toLowerCase()))),this.Cat=null,this.Gat=null}Jn(){this.eat=null,uy.wh(this.Y9),this.Y9=null,this.xat.clear(),this.xat=null,this.Cat=null}wst(){return this.eat}o7(){return this.Cat}Iat(t){this.Cat=t}Zit(){return this.Gat}Nat(t){this.Gat=t}GO(){return this.bR}RY(t){this.bR=t,this.eat.Eat()}Nnt(){return this.bat}sH(t){this.bat=t}Dit(){return this.vat}_it(t){this.vat=!!t}QY(){return this.Y9}xtt(t){this.Y9=t?t.split(" "):[],this.xat=new Set(this.Y9.map((t=>t.toLowerCase())))}Dat(){return this.xat}kst(t){return this.xat.has(t.toLowerCase())}w4(){return{time:this.bR,ease:this.bat,enable:this.vat,tags:this.Y9}}S4(t){t&&(this.bR=t.time,this.bat=t.ease,this.vat=t.enable,this.Y9=t.tags,this.xat=new Set(this.Y9.map((t=>t.toLowerCase()))))}}uy.oat=class{constructor(t,s){this.Bst=s,this.Xst=[],uy.h6.zot(this.Xst,t,ly,this),this.Eat()}Jn(){this.Bst=null;for(const t of this.Xst)t.Jn();uy.wh(this.Xst),this.Xst=null}Eat(){this.Xst.sort(((t,s)=>t.GO()-s.GO()));for(let t=0;t<this.Xst.length;t++){const s=this.Xst[t];s.Iat(this.Xst[t+1]),s.Nat(this.Xst[t-1])}}Mst(){return this.Bst}_at(){return this.Xst.length}$st(){return this.Xst}eet(){const t=new ly(null,this);return this.Xst.push(t),this.Eat(),t}oet(t){for(const s of this.Xst){if(!t(s))continue;const i=this.Xst.indexOf(s);-1!==i&&(s.Jn(),this.Xst.splice(i,1))}this.Aat(),this.Eat()}Aat(){this.Xst.sort(((t,s)=>t.GO()-s.GO()))}Met(t){return this.Xst.indexOf(t)}wet(t){return this.Xst[t]}*Lat(){for(const t of this.Xst)yield t}*Oat(){for(let t=this.Xst.length-1;t>=0;t--)yield this.Xst[t]}w4(){return{keyframeDataItemsJson:this.Xst.map((t=>t.w4()))}}S4(t){t&&(uy.h6.Wot(this.Xst,t.keyframeDataItemsJson,ly,this),this.Eat())}}}{const cy=self.Gs;class fy{constructor(t,s){this.Mat=s,this.Trt=null,this.Rat=null,this.Jc="",this.bR=NaN,this.bat="noease",this.vat=!1,this.Pat=null,this.kat=void 0,this.Fat="line",t&&(this.Trt=t[0][0],this.Rat=t[0][1],this.Jc=t[0][2],this.bR=t[1],this.bat=t[2],this.vat=!!t[3],this.Fat=t[5],this.Pat=null,t[4]&&(this.Pat=new cy.jat(t[4],this)),this.Cat=null,this.zat=null)}Jn(){this.Mat=null,this.Pat&&(this.Pat.Jn(),this.Pat=null),this.Cat=null,this.zat=null}Bat(){return this.Pat}Iat(t){this.Cat=t}o7(){return this.Cat}Uat(t){this.zat=t}a7(){return this.zat}Yet(){return this.Trt}Ent(t){"color"===this.Jc&&cy.$i(t)?(this.Trt[0]=cy.Er(t),this.Trt[1]=cy.Dr(t),this.Trt[2]=cy._r(t)):this.Trt=t}oht(){return this.Rat}Cnt(t){"color"===this.Jc&&cy.$i(t)?(this.Rat[0]=cy.Er(t),this.Rat[1]=cy.Dr(t),this.Rat[2]=cy._r(t)):this.Rat=t}v7(){const t=this.Mat.Oet().m7();return"relative"===t?this.Yet():"absolute"===t?this.oht():void 0}AG(){return this.Jc}$et(t){this.Jc=t}GO(){return this.bR}RY(t){this.bR=t,this.Mat.Wat()}Nnt(){return this.bat}sH(t){this.bat=t}Dit(){return this.vat}_it(t){this.vat=!!t}u7(){return this.Fat}T7(t){if(!this.Pat)return;if(this.kat||null===this.kat)return this.kat;const s=this.Pat.Qat();if(!s)return this.kat=null,this.kat;const i=s.length;for(let e=0;e<i;e++){const i=s[e];if(i.hH()===t)return this.kat=i,this.kat}return this.kat=null,this.kat}w4(){const t=this.Pat;return{addonDataJson:t?t.w4():t,value:this.Trt,aValue:this.Rat,type:this.Jc,time:this.bR,ease:this.bat,enable:this.vat}}S4(t){t&&(t.addonDataJson&&this.Pat.Jat(t.addonDataJson),this.Trt=t.value,this.Rat=t.aValue,this.Jc=t.type,this.bR=t.time,this.bat=t.ease,this.vat=t.enable)}}cy.Sat=class{constructor(t,s){this.bet=s,this.Cet=[],this.Vat=[],cy.h6.zot(this.Cet,t,fy,this),cy.h6.Uot(this.Vat,t,fy,this),this.Wat()}Jn(){this.bet=null;for(const t of this.Cet)t.Jn();cy.wh(this.Cet),this.Cet=null;for(const t of this.Vat)t.Jn();cy.wh(this.Vat),this.Vat=null}Wat(){let t=this.Cet;t.sort(((t,s)=>t.GO()-s.GO()));for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.Iat(t[s+1]),s-1>=0&&i.Uat(t[s-1])}t=this.Vat,t.sort(((t,s)=>t.GO()-s.GO()));for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.Iat(t[s+1]),s-1>=0&&i.Uat(t[s-1])}}vnt(){const t=new fy(null,this);return this.Cet.push(t),this.Wat(),t}xnt(t){for(const s of this.Cet){if(!t(s))continue;const i=this.Cet.indexOf(s);-1!==i&&(s.Jn(),this.Cet.splice(i,1))}this.Yat(),this.Wat()}Yat(){this.Cet.sort(((t,s)=>t.GO()-s.GO()))}Oet(){return this.bet}Hat(){return this.Cet.length}yrt(){return this.Cet[this.Cet.length-1]}Get(){return this.Cet}h7(){return this.Vat}*qat(){for(const t of this.Cet)yield t}*Zat(){for(let t=this.Cet.length-1;t>=0;t--)yield this.Cet[t]}w4(){const t=this.Cet,s=this.Vat;return{propertyKeyframeDataItemsJson:t.map((t=>t.w4())),propertyKeyframeDataItemsIncludingDisabledJson:s.map((t=>t.w4()))}}S4(t){t&&(cy.h6.Wot(this.Cet,t.propertyKeyframeDataItemsJson,fy,this),cy.h6.Wot(this.Vat,t.propertyKeyframeDataItemsIncludingDisabledJson,fy,this),this.Wat())}}}{const dy=self.Gs;class py{constructor(t,s){this.Pat=s,this.jc=t[0],this.Kat=t[1]}Jn(){this.Pat=null,this.Kat=null}Bat(){return this.Pat}hH(){return this.jc}w4(){return{id:this.jc,data:this.Kat}}S4(t){t&&(this.jc=t.id,this.Kat=t.data)}}class my extends py{constructor(t,s){super(t,s),this.Xat=this.Kat[0],this.$at=!!this.Kat[1],this.tut=this.Kat[2],this.sut=!!this.Kat[3]}Jn(){super.Jn()}G7(){return this.Xat}Oot(){return this.$at}E7(){return this.tut}Rot(){return this.sut}w4(){return Object.assign(super.w4(),{startAnchor:this.Xat,startEnable:!!this.$at,endAnchor:this.tut,endEnable:!!this.sut})}S4(t){t&&(super.S4(t),this.Xat=t.startAnchor,this.$at=!!t.startEnable,this.tut=t.endAnchor,this.sut=!!t.endEnable)}}class yy extends py{constructor(t,s){super(t,s),this.iut=this.Kat[0],this.eut=this.Kat[1]}Jn(){super.Jn()}kot(){return this.iut}Pot(){return this.eut}w4(){return Object.assign(super.w4(),{direction:this.iut,revolutions:this.eut})}S4(t){t&&(super.S4(t),this.iut=t.direction,this.eut=t.revolutions)}}dy.jat=class{constructor(t,s){this.nut=s,this.rut=[],dy.h6.zot(this.rut,t,{Qot:0,map:new Map([["cubic-bezier",my],["angle",yy]])},this)}Jn(){this.nut=null;for(const t of this.rut)t.Jn();dy.wh(this.rut),this.rut=null}hut(){return this.nut}Qat(){return this.rut}*out(){for(const t of this.rut)yield t}w4(){return{addonDataItemsJson:this.rut.map((t=>t.w4()))}}S4(t){t&&dy.h6.Wot(this.rut,t.addonDataItemsJson,{Qot:"id",map:new Map([["cubic-bezier",my],["angle",yy]])},this)}}}{const gy=self.Gs;let My=0;gy.pot=class extends gy.j6{constructor(t,s){super("tween-"+My++,t,s),this.jc="",this.aut=!1,this.uut="start-value",this.Jst=null,this.lut=null,this.cut=null,this.fut=null,this.Tet=null,this.dut=null}itt(t){const s=gy.Qn(gy.Event,"tweenstatereleased");s.mut=this,t.dispatchEvent(s)}AG(){return 1}G9(){for(const t of this.T9.htt().ntt())this.b9.push(gy.yut.DC(this,t));this.Tet=this.b9[0]}vst(){const t=this.T9.htt().xst(),s=gy.yut.DC(this,t);return this.b9.push(s),this.gut(),s}gut(){this.Tet=this.b9[0]}aH(t){return this.Tet.Ast()[0]}Xet(t){this.Mut=t}iH(){const t=this.e7();if(!t||!t.length)return;const s=t[0];if(this.Tet=s,!s)return;const i=s.iH();return s.uit()?i:void 0}wut(t){this.fut=t}Sut(t){this.cut||(this.cut=[]),this.cut.push(t)}Tut(t){this.lut||(this.lut=[]),this.lut.push(t)}but(t){if(!this.cut)return;const s=this.cut.indexOf(t);-1!==s&&this.cut.splice(s,1)}vut(t){if(!this.lut)return;const s=this.lut.indexOf(t);-1!==s&&this.lut.splice(s,1)}xut(t,s){for(const i of this.b9)for(const e of i.tit){if(e.Lst()!==s)continue;const i=e.rit(),n=e.Oet(),r=i.snt(n);r.Ent(t),r.Cnt(t)}}Cut(t){for(const s of this.b9)for(const i of s.tit)if(i.Lst()===t)return i}Gut(t){for(const s of t){const t=this.Cut(s);this.xut(t.mnt(),s)}if(this.vtt()){const t=this.kY()-this.GO();this.PY(t);for(const s of this.b9)s.Eit(t);this.Htt(0)}else{const t=this.GO();this.PY(t);for(const s of this.b9)s.Eit(t);this.Htt(t)}this.qtt()}Iut(t,s){const i=this.Cut(s),e=i.rit(),n=i.Oet(),r=e.yrt(n);r.RY(this.kY()),r.Ent(t),r.Cnt(t)}Nut(t){this.jc=t}hH(){return this.jc}Eut(t){this.uut=t}Dut(){return this.uut}rH(t){this.aut=t}nH(){return this.aut}Ntt(){if(this.cut)for(const t of this.cut)t(this);if(!this.A8())for(const t of this.b9)t.cet()}Ptt(){this.B9=this.kc.pF()}O8(){if(!this.Q9&&(this.Q9=!0,this.lut))for(const t of this.lut)t(this)}RY(t){this._ut(),super.RY(t)}tst(t){gy.$i(t)||(t=this.kY()),t<0?this.E9=0:t>=this.kY()?this.E9=this.kY():this.E9=t,this.Tet.sst()}x8(t){if(!this.L8()&&"current-state"===this.Dut())for(const t of this.b9)t.let();super.x8(t)}AY(t=!1){if(super.AY(t),!this.A8())for(const t of this.b9)t.uet()}Ff(t=!0,s=!1){this._ut(),super.Ff(t,s)}_ut(){for(const t of this.b9){const s=t=>{const s=t.GO(),i=this.kY();return 0!==s&&s!==i};t.het(s),t.aet(s)}}v6(){if(this.DY())return!0;const t=this.iH();return!(t&&t.BW().b0()||(this.S9.S8(this),this.ust(),0))}N8(t,s,i){if(this.Jst||(this.Jst=this.iH()),!this.Jst||this.Jst.JH())return this.AY(!0),void this.Ptt();const e=this.Jst.MF();if(-1!==e&&(t=i*e),0===t&&0===this.V9)return;this.V9=t;const n=this.E9+this.D9+t*this._9,r=this.T9.pst;n<0?(this.E9=0,this.D9=-n):n>=r?(this.E9=r,this.D9=this.E9-n):(this.E9=n,this.D9=0);let h=!1,o=!1;const a=this.jY(),u=this.BY();if(a||u?a&&!u?this._9>0?this.E9>=r&&(this.tst(0),this.Aut(gy.Rut.Out.Ej.Lut),this.Aut(gy.Rut.Out.Ej.Put),o=!0):this.E9<=0&&(this.tst(r),this.Aut(gy.Rut.Out.Ej.Lut),this.Aut(gy.Rut.Out.Ej.Put),o=!0):!a&&u?this._9>0?this.E9>=r&&(this.Htt(r),this.UY(-1*this.WY()),o=!0,1===this.A9?this.O9<this.iY()?(this.O9++,this.Aut(gy.Rut.Out.Ej.Lut),this.Aut(gy.Rut.Out.Ej.Put),this.Aut(gy.Rut.Out.Ej.kut),this.Aut(gy.Rut.Out.Ej.Fut),this.IsPlaying()?this.A9=0:this.L9=0):(this.Aut(gy.Rut.Out.Ej.kut),this.Aut(gy.Rut.Out.Ej.Fut),h=!0):0===this.A9&&(this.Aut(gy.Rut.Out.Ej.kut),this.Aut(gy.Rut.Out.Ej.Fut),this.IsPlaying()?this.A9=1:this.L9=1)):this.E9<=0&&(this.Htt(0),this.UY(-1*this.WY()),o=!0,1===this.A9?this.O9<this.iY()?(this.O9++,this.Aut(gy.Rut.Out.Ej.Lut),this.Aut(gy.Rut.Out.Ej.Put),this.Aut(gy.Rut.Out.Ej.kut),this.Aut(gy.Rut.Out.Ej.Fut),this.IsPlaying()?this.A9=0:this.L9=0):(h=!0,this.Aut(gy.Rut.Out.Ej.kut),this.Aut(gy.Rut.Out.Ej.Fut)):0===this.A9&&(this.Aut(gy.Rut.Out.Ej.kut),this.Aut(gy.Rut.Out.Ej.Fut),this.IsPlaying()?this.A9=1:this.L9=1)):a&&u&&(this._9>0?this.E9>=r&&(this.Htt(r),this.UY(-1*this.WY()),o=!0,0===this.A9&&(this.Aut(gy.Rut.Out.Ej.kut),this.Aut(gy.Rut.Out.Ej.Fut)),1===this.A9&&(this.Aut(gy.Rut.Out.Ej.Lut),this.Aut(gy.Rut.Out.Ej.Put),this.Aut(gy.Rut.Out.Ej.kut),this.Aut(gy.Rut.Out.Ej.Fut)),this.IsPlaying()?(this.A9++,this.A9=gy.wrap(this.A9,0,2)):(this.L9=this.A9+1,this.L9=gy.wrap(this.L9,0,2))):this.E9<=0&&(this.Htt(0),this.UY(-1*this.WY()),o=!0,0===this.A9&&(this.Aut(gy.Rut.Out.Ej.kut),this.Aut(gy.Rut.Out.Ej.Fut)),1===this.A9&&(this.Aut(gy.Rut.Out.Ej.Lut),this.Aut(gy.Rut.Out.Ej.Put),this.Aut(gy.Rut.Out.Ej.kut),this.Aut(gy.Rut.Out.Ej.Fut)),this.IsPlaying()?(this.A9++,this.A9=gy.wrap(this.A9,0,2)):(this.L9=this.A9+1,this.L9=gy.wrap(this.L9,0,2)))):this._9>0?this.E9>=r&&(this.O9<this.iY()?(this.O9++,this.tst(0),this.Aut(gy.Rut.Out.Ej.Lut),this.Aut(gy.Rut.Out.Ej.Put),o=!0):(this.Htt(r),h=!0)):this.E9<=0&&(this.O9<this.iY()?(this.O9++,this.tst(r),this.Aut(gy.Rut.Out.Ej.Lut),this.Aut(gy.Rut.Out.Ej.Put),o=!0):(this.Htt(0),h=!0)),this.IsPlaying()){if(h)return this.Tet.mst(),this.AY(!0),void this.Ptt();this.Tet.Mc(this.E9,!0,!1,o,this.J9,!1),this.J9&&(this.J9=!1)}}Aut(t){const s=this.iH();this.fut.jut(this),this.kc.vQ(t,s,this.fut.zV()),this.fut.zut()}w4(){const t=super.w4(),s=this.dtt();return Object.assign(t,{tweenDataItemJson:s.w4(),id:this.jc,destroyInstanceOnComplete:this.aut,initialValueMode:this.uut})}S4(t){t&&(this.dtt().S4(t.tweenDataItemJson),super.S4(t),this.jc=t.id,this.aut=t.destroyInstanceOnComplete,this.uut=t.initialValueMode,this.gut())}static IsPlaying(t){return t.IsPlaying()}static HY(t){return t.HY()}static But(t){return!!t.BY()&&0===t.btt()}static Uut(t){return!!t.BY()&&1===t.btt()}static Wut(t){const s=t.runtime.att(),i=new gy.jot;if(t.json){i.S4(t.json.tweenDataItemJson);const e=new gy.pot(i,s);return e.S4(t.json),e}{const e=new gy.pot(i,s);gy.ve(t.Qut)||(t.Qut=[t.Qut]),e.Nut(t.id),e.xtt(t.tags),e.Eut(t.Jut),e.rH(t.Vut),e.FY(t.loop),e.zY(t.Yut),e.PY(t.time),e.mtt(0),e.gtt("default"),e.Mtt(t.Qut[0].Hut),e.wtt(t.sY);const n=e.vst();n.Iit(t.BV.tQ()),n.gtt("default"),n.Mtt(t.Qut[0].Hut),n._it(!0),n.Ait(t.BV.BW().$P());const r=t.BV.DV(),h=r.Rit()?r.Oit():t.BV.lj().Vy(),o=r.Rit()?r.kit():t.BV.lj().ig();n.Lit(h),n.Pit(o);const a=n.iet();a.RY(0),a.sH("noease"),a._it(!0),a.xtt("");const u=n.iet();u.RY(t.time),u.sH("noease"),u._it(!0),u.xtt("");for(const s of t.Qut){const i=n.net();i.Uet(s.qut),i.Jet(s.Zut),i.qet(s.xit),i.Xet(s.type),i.ent(NaN),i.rnt(NaN),i.gtt("default"),i.Mtt(s.Hut),i._it(!0);const e=i.bnt();e.$et(s.valueType),e.RY(0),e.sH(s.Kut),e._it(!0),e.Ent(s.Xut),e.Cnt(s.Xut);const r=i.bnt();r.$et(s.valueType),r.RY(t.time),r.sH(s.Kut),r._it(!0),r.Ent(s.$ut),r.Cnt(s.$ut),i.ltt()}return e}}static Iit(t,s){if(!isNaN(s))for(const i of t.e7())i.Iit(s)}static wut(t,s){t.wut(s)}tlt(t,s){return this.dut||(this.dut=gy.Qn(self.KY,this,t,s)),this.dut}}}{const wy=self.Gs;wy.yut=class extends wy.ott{constructor(t,s){super(t,s),this.slt=null,this.ilt=null}static DC(t,s){return wy.Qn(wy.yut,t,s)}elt(){1===this.tit.length?this.slt=this.tit[0]:(this.slt=this.tit[0],this.ilt=this.tit[1])}sit(){for(const t of this.Bst.rit().nit())this.tit.push(wy.nlt.DC(this,t));this.elt()}net(){const t=this.Bst.rit().ret(),s=wy.nlt.DC(this,t);return this.tit.push(s),this.elt(),s}x8(){if(this.ait(),!this.uit()&&this.ftt())return;const t=this.oit().vtt()?0:this.Nit();for(const s of this.tit)s.x8(t),0===this.iit&&1===s.zit()&&(this.iit=1),0===this.R6&&1===s.C8()&&(this.R6=1);this.eit=0,this.tit.some((t=>t.dst()))&&(this.eit=1),this.Kst=this.Bit(t),this.Hst=!1,this.qst=!1,this.Mc(t)}yst(){}Mc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){if(this.Jst||this.iH(),this.Jst)return!this.Jst.JH()&&(!r||!this.BW().b0())&&(this.ilt?(this.slt.Mc(t,i,e,h),this.ilt.Mc(t,i,e,h)):this.slt.Mc(t,i,e,h),void(0!==this.slt.zit()&&(this.Vst||(this.Vst=this.Jst.lj()),this.Vst&&this.Vst.XQ())))}Sst(){}S4(t){super.S4(t),this.elt()}}}{const Sy=self.Gs;Sy.nlt=class extends Sy.hit{constructor(t,s){super(t,s),this.rlt=!1}static DC(t,s){return Sy.Qn(Sy.nlt,t,s)}Mc(t,s=!1,i=!1,e=!1){let n,r;if(this.rlt)n=this.Cet[0],r=this.Cet[1];else if(s)n=this.vet.unt(t,this.bet),r=n.o7();else{if(this.Net){const s=this.oit(),i=this.Net.o7(),e=this.Net.GO(),n=i?i.GO():s.kY();(t<=e||t>=n)&&(this.Net=this.vet.unt(t,this.bet))}else this.Net=this.vet.unt(t,this.bet);n=this.Net,r=n.o7()}this.xet.Mc(t,n,r,s,i,e)}bnt(){const t=this.bet.Iet().vnt();return this.Net=null,this.rlt=this.hnt().length<=2,t}aet(t){this.Net=null,this.bet.Iet().xnt(t),this.rlt=this.hnt().length<=2}w4(){return{sourceAdapterJson:this.ltt().w4(),basic:this.rlt}}S4(t){t&&(this.ltt().S4(t.sourceAdapterJson),this.rlt=t.basic)}}}{const Ty=self.Gs,by=self.Bl;Ty.wc=class extends Ty.Un{constructor(t,s=!0){super(),this.Hn=t[0],this.hlt=t[2],this.olt=[];for(const s of t[1]){const t=Ty.ult.DC(this,s);this.olt.push(t)}for(let t=0;t<this.olt.length;t++){const s=this.olt[t],i=this.olt[t+1],e=this.olt[t-1];s.Iat(i),s.Uat(e)}this.llt=new Map,this.clt=new Map,this.flt(),s&&by.Tc(this.Hn,((t,s,i,e)=>this.Mc(t,s,i,e)),null,{transition:this})}static DC(t){return Ty.Qn(Ty.wc,t)}Jn(){for(const t of this.olt)t.Jn();Ty.wh(this.olt),this.olt=null,this.llt.clear(),this.llt=null,this.clt.clear(),this.clt=null}Sc(t){this.hlt=!!t}dlt(t){const s=this.clt.get(t);if(s)return s;for(const s of this.olt)if(s.plt()===t)return this.clt.set(t,s),s}mlt(t){for(let s=this.olt.length-1;s>=0;s--){const i=this.olt[s],e=i.plt();if(e<=t){let s=i;if(e<t)return s;if(e===t){for(;s;){const t=s.a7();if(!t)break;if(t.plt()!==s.plt())break;s=t}return s}}}}Mc(t,s,i,e){let n=t/e;if(this.hlt){const n=this.dlt(0),r=this.dlt(1),h=s+(s+i)*n.ylt(),o=(s+i)*r.ylt()-h;return 0===e?h+o:by.vc(t,h,o,e)}0===e&&(n=1);let r=this.mlt(n),h=r.o7();if(!h){const t=r.a7(),s=r;r=t,h=s}const o=h.plt()-r.plt(),a=Ty.qn(n,r.plt(),h.plt(),0,o);if(r.glt()||0===o){const t=s+(s+i)*r.ylt(),e=(s+i)*h.ylt()-t;return 0===o?1===a?t+e:t:by.vc(a,t,e,o)}const u=r.plt(),l=r.ylt(),c=r.plt()+r.Mlt(),f=r.ylt()+r.wlt(),d=h.plt()+h.Slt(),p=h.ylt()+h.Tlt(),m=h.plt(),y=h.ylt();let g=by.nc("spline")(a,u,l,c,f,d,p,m,y,this.llt.get(r));return g+=r.ylt(),(1-g)*s+g*(s+i)}flt(){this.llt.clear();for(let t=0;t<this.olt.length-1;t++){const s=this.olt[t];if(!s.Oot())continue;const i=s,e=this.olt[t+1];if(!e.Rot())continue;const n=i.plt(),r=i.plt()+i.Mlt(),h=e.plt()+e.Slt(),o=e.plt();this.llt.set(i,by.xc(n,r,h,o))}}}}{const vy=self.Gs;vy.ult=class extends vy.Un{constructor(t,s){super(),this.blt=t,this.vlt=s[0],this.xlt=s[1],this.Clt=s[2],this.Glt=s[3],this.Ilt=s[4],this.Nlt=s[5],this.$at=s[6],this.sut=s[7],this.Elt=s[8],this.Cat=null,this.zat=null}Jn(){this.blt=null}static DC(t,s){return vy.Qn(vy.ult,t,s)}Iat(t){this.Cat=t}o7(){return this.Cat}Uat(t){this.zat=t}a7(){return this.zat}plt(){return this.vlt}ylt(){return this.xlt}Mlt(){return this.Clt}wlt(){return this.Glt}Slt(){return this.Ilt}Tlt(){return this.Nlt}Oot(){return this.$at}Rot(){return this.sut}glt(){return"linear"===this.Elt}Dlt(){return"cubic"===this.Elt}}}{const xy=self.Gs;xy._lt=class extends xy.Un{constructor(t){super(),this.kc=t,this.Alt=[]}Jn(){for(const t of this.Alt)t.Jn();xy.wh(this.Alt),this.Alt=null}DC(t){this.Alt.push(xy.wc.DC(t))}}}{const Cy=self.Gs;Cy.Llt=class extends Cy.Un{constructor(t){super(),this.kc=t,this.Olt=null,this.Rlt=null,this.G6=t=>this.I6(t.BV)}Jn(){if(this.P6(),this.Olt){for(const t of this.Olt.values())t.clear();this.Olt.clear()}this.Olt=null,this.kc=null}DC(t){if(this.Olt||(this.Olt=new Map),!t)return;const s=t[0][16][0],i=t[1];this.Olt.has(i)||this.Olt.set(i,new Map),this.Olt.get(i).set(s,t)}k6(){const t=this.kc.gf();t&&t.addEventListener("instancedestroy",this.G6)}P6(){const t=this.kc.gf();t&&t.removeEventListener("instancedestroy",this.G6)}Plt(){return!!this.Olt&&0!==this.Olt.size}klt(t,s){let i=0;if(i=t instanceof Cy.Flt?t.$P():t,!this.Olt.has(i))return;const e=this.Olt.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}jlt(t,s){this.Rlt||(this.Rlt=new WeakMap),this.Rlt.has(t)||this.Rlt.set(t,s)}zlt(t){if(!this.Rlt)return"";return this.Rlt.get(t)||""}I6(t){this.Rlt&&this.Rlt.has(t)&&this.Rlt.delete(t)}}}{const Gy=self.Gs;Gy.Blt=class{constructor(t){this.kc=t,this.Ult=new Gy.Wlt}Jn(){this.Ult.Jn(),this.Ult=null,this.kc=null}Fj(){return this.kc}DC(t){this.Ult.Fl(t)}Qlt(t){return this.Ult.Js(t)}Jlt(){return this.Ult.Jlt()}}}{const Iy=self.Gs;Iy.Vlt=class{constructor(t,s,i,e,n,r,h){this.kc=n.Fj(),this.Ylt=n,this.Hlt=t,this.qlt=i,this.Zlt=e,this.NM=s,this.o6=r,this.Klt=h??r.iH().tQ(),this.Xlt(),this.$lt=this.sct?.tct()??-1,this.ict=[],this.ect=null,this.nct=NaN,this.rct=null,this.hct=null,this.oct=null,this.act="",this.uct=null,this.lct="",this.cct="",this.fct=0,this.dct=!1,this.j9=!1}Jn(){this.j9||(Iy.wh(this.ict),this.ict=null,this.kc=null,this.Ylt=null,this.Zlt=null,this.o6=null,this.ect=null,this.nct=NaN,this.rct&&this.rct.clear(),this.rct=null,this.hct=null,this.oct=null,this.act="",this.uct=null,this.lct="",this.cct="",this.j9=!0)}Vn(){return this.j9}pct(){return this.Ylt}Fj(){return this.kc}Nc(){return this.Hlt}mct(){return this.Zlt}EY(){return this.NM}Z6(){return this.o6||(this.o6=this.kc.rj(this.Klt).DV()),this.o6}yct(){return this.gct(this.$lt)}Mct(){const t=this.yct();return t?t.EY():""}wct(){const t=this.yct();return t?t.QY():[]}Sct(t){const s=this.wct();if(!s)return!1;if(!s.length)return!1;const i=Iy.Vlt.Ctt(t);return!(!i||!i.length)&&i.every(Iy.Vlt.Itt,s)}Tct(t,s){const i=this.wct();if(!i)return!1;if(!i.length)return!1;const e=Iy.Vlt.Ctt(t);return!(!e||!e.length)&&e.every((t=>Iy.Vlt.bct.call(i,t,s)))}static Itt(t){const s=this;return""===t?1===s.length&&""===s[0]:s.map((t=>t.trim().toLowerCase())).includes(t.trim().toLowerCase())}static Ctt(t){return t.trim().split(" ")}static bct(t,s){const i=this;return""===t?1===i.length&&""===i[0]:i.some((i=>Iy.compare(i.trim(),s,t.trim())))}vct(t){const s=this.yct();if(s){if(Iy.$i(t)){const i=s.xct(),e=i?i[t]:void 0;if(Iy.$i(e))return this.gct(e)}if("string"==typeof t)for(const i of s.xct()){const s=this.gct(i);if(s.OY(t))return this.gct(s.tct())}}}Cct(t){const s=this.vct(t);return s?s.EY():""}Gct(t){const s=this.vct(t);return s?s.QY():""}Ict(t){const s=this.yct();if(!s)return-1;const i=s.xct();if(!i)return-1;const e=this.vct(t);return e?i.indexOf(e.tct()):-1}Nct(){const t=this.yct();if(!t)return 0;const s=t.xct();return s?s.length:0}gct(t){return this.Zlt.gct(t)}Ff(){this.Dct().Ect(!0)}Ect(t){if(this._ct()){for(const[t,s]of this._ct().entries())s.Ect(!1);this._ct().clear()}if(this.rct=null,this.ect=null,this.Act=null,this.hct=null,this.act="",this.uct=null,this.lct="",this.cct="",this.ict=[],t){this.Ylt.Lct(this);const t=this.sct.tct();t!==this.$lt&&this.Oct(t)}else this.$lt=this.sct.tct()}Rct(){const t=this.Zlt.gct(this.$lt);return t?t.kct().Pct():0}Fct(t){return!(t<0)&&t===this.jct()}jct(){const t=this.Zlt.gct(this.$lt);if(!t)return-1;let s=t.kct().zct();return s?t.kct().Bct().indexOf(s):-1}Uct(t){const s=this.Wct(t);return s?s.Nc():""}Qct(t){let s;return Iy.$i(t)&&(s=this.Wct(t)),"string"==typeof t&&(s=this.Jct(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Yet():""}Vct(t,s){if(t.Dit())return t.tct();{const i=t.kct().zct();if(!i)return s.tct();const e=i.Yct();if(!Iy.$i(e))return s.tct();const n=this.gct(e);return n?this.Vct(n,s):s.tct()}}Hct(t,s){if(t.Dit()){if("reference"===t.AG()){const s=t.qct(),i=t.Zct(),e=this.Ylt.Qlt(s);if(!e)return[-1,null];const n=e.Kct(i);return n?this.Hct(n,e):this.Hct(e.Xct(),e)}return[t.tct(),s]}{const i=t.kct().zct();if(!i)return[-1,null];const e=i.Yct();if(!Iy.$i(e))return[-1,null];const n=s.gct(e);return n?this.Hct(n,s):[-1,null]}}$ct(t,s){let i=this.gct(t);if(i){if(!i.Dit()){const s=this.gct(this.$lt);t=this.Vct(i,s)}if(Iy.$i(t)&&t!==this.$lt)if(i=this.gct(t),"reference"===i.AG()){const e=i.qct(),n=i.Zct(),r=this.Ylt.Qlt(e);let h=r.Kct(n);if(h){const i=this.Hct(h,r);if(-1===i[0])return;s(this.$lt,t,i[1],i[0])}else s(this.$lt,t)}else s(this.$lt,t)}}tft(t){let s;if(Iy.$i(t)&&(s=this.Wct(t)),"string"==typeof t&&(s=this.Jct(t)),!s)return;let i=s.Yct();Iy.$i(i)&&this.$ct(i,((t,s,i,e)=>{this.ict.push(t),this.Oct(s,i,e)}))}sft(){const t=this.ift();if(!t)return;const s=t.Yct();Iy.$i(s)&&this.$ct(s,((t,s,i,e)=>{this.ict.push(t),this.Oct(s,i,e)}))}eft(t){const s=this.Zlt.Kct(t);if(!s)return;const i=s.tct();Iy.$i(i)&&this.$ct(i,((t,s,i,e)=>{this.ict.push(t),this.Oct(s,i,e)}))}nft(){const t=this.ict.pop();Iy.$i(t)?this.Oct(t):this.rft()&&(this.Ylt.Lct(this.rft(),!0,!1,!1),this.rft().Oct(this.hft()),this.Dct().oft(this.rft()))}aft(t){if(!this.yct())return;const s=this.vct(t);if(s){if(!s.Dit())return;const t=s.tct();if(!Iy.$i(t))return;this.ict.push(this.$lt),this.Oct(s.tct())}}uft(t){if(Iy.$i(t))return!!this.Zlt.gct(this.$lt).kct().Bct()[t];if("string"==typeof t){const s=this.Zlt.gct(this.$lt).kct().Bct();for(let i=0;i<s.length;i++)if(s[i].Nc()===t)return!0;return!1}return!1}lft(){this.dct=!0}cft(){return this.fct>0}fft(){this.fct++}dft(){this.fct--,0===this.fct&&this.dct&&this.Ylt.pft(this)}Oct(t,s,i){const e=this.$lt,n=this.Z6().iH();this.fft(),this.Ylt.mft(this),this.kc.vQ(Iy._j.gft.Ej.yft,n),this.kc.vQ(Iy._j.gft.Ej.Mft,n),this.kc.vQ(Iy._j.gft.Ej.wft,n),this.kc.vQ(Iy._j.gft.Ej.Sft,n),this.$lt=t;let r=this.gct(this.$lt);if("dictionary"===r.AG()&&(this.kc.vQ(Iy._j.gft.Ej.Tft,n),this.kc.vQ(Iy._j.gft.Ej.bft,n),this.kc.vQ(Iy._j.gft.Ej.vft,n),this.kc.vQ(Iy._j.gft.Ej.xft,n)),this.Ylt.Cft(),this.dft(),!this.Vn()&&(r=this.gct(this.$lt),"reference"===r.AG())){const t=s?s.Nc():r.qct();if(this.Gft(r)){this.ict.pop();const t=this.Ift(r);this.Ylt.Lct(t,!0,!0,!1),t.Nft(this,e),this.Dct().oft(t)}else{const s="number"==typeof i?i:r.Zct();if(t){this.ict.pop();let i=r.Eft();if(i){let t=this.Ylt.Dft(i);for(;t;)i=Iy.Cm(i),t=this.Ylt.Dft(i)}else{i=`${t}-ref`;let s=this.Ylt.Dft(i);for(;s;)i=Iy.Cm(i),s=this.Ylt.Dft(i)}const n=this.Ylt._ft(t,s,i,this.o6,!0);n.Nft(this,e),this.Aft(r,n);const h=this.Dct();n.Lft(h),h.oft(n)}}}}ift(){const t=this.Zlt.gct(this.$lt);return t?t.kct().zct():null}Wct(t){const s=this.Zlt.gct(this.$lt);if(!s)return null;const i=s.kct().Bct();if(!i)return null;return i[t]||null}Jct(t){const s=this.Zlt.gct(this.$lt);if(!s)return null;return s.kct().Oft(t)||null}Xlt(t){if("number"==typeof t){let s=this.gct(t);s||(s=this.Zlt.Xct()),this.sct=s}else if("number"==typeof this.qlt){let t=this.gct(this.qlt);t||(t=this.Zlt.Xct()),this.sct=t}else{let t=this.Zlt.Kct(this.qlt);t||(t=this.Zlt.Xct()),this.sct=t}}w4(){return this.dct?null:{flowchartName:this.Hlt,flowchartTag:this.NM,startNodeTag:this.qlt,currentNodeId:this.$lt,previousNodeIds:this.ict,pluginUID:this.o6.iH().tQ(),reference:{previousFlowchartTag:this.rft()?this.rft().EY():"",previousStartNodeId:Iy.$i(this.hft())?this.hft():NaN,referencesJson:this.Rft(),currentReferenceFlowchartTag:this.Pft()?this.Pft().EY():"",rootFlowchartTag:this.Dct()?this.Dct().EY():""}}}Rft(){if(!this.kft())return null;const t=[];for(const[s,i]of this._ct().entries())t.push({flowchartElementId:s.tct(),flowchartStateTag:i.EY()});return t.length?t:null}S4(t){if(t){if(this.Hlt=t.flowchartName,this.NM=t.flowchartTag,this.qlt=t.startNodeTag,this.$lt=t.currentNodeId,this.ict=t.previousNodeIds,this.Klt=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.act=s.previousFlowchartTag,this.nct=s.previousStartNodeId,this.uct=s.referencesJson,this.lct=s.currentReferenceFlowchartTag,this.cct=s.rootFlowchartTag}this.Xlt()}}rft(){return"string"==typeof this.act&&this.act&&(this.ect=this.Ylt.Dft(this.act),this.act=""),this.ect}hft(){return this.nct}Nft(t,s){this.ect=t,this.nct=s}Pft(){return"string"==typeof this.lct&&this.lct&&(this.hct=this.Ylt.Dft(this.lct),this.lct=""),this.hct}oft(t){this.hct=t,this.hct===this&&(this.hct=null)}Dct(){return"string"==typeof this.cct&&this.cct&&(this.oct=this.Ylt.Dft(this.cct),this.cct=""),this.oct?this.oct:this}Lft(t){this.oct=t}kft(){return this.Fft(),!!this.rct}Gft(t){return this.Fft(),this.rct&&this.rct.has(t)}Fft(){if(this.uct){this.rct&&this.rct.clear(),this.rct||(this.rct=new Map);for(const t of this.uct){const s=this.Ylt.Dft(t.flowchartStateTag),i=s.gct(t.flowchartElementId);this.rct.set(i,s)}this.uct=null}}_ct(){return this.Fft(),this.rct}Ift(t){return this.Fft(),this.rct.get(t)}Aft(t,s){this.rct||(this.rct=new Map),this.rct.set(t,s)}}}{const Ny=self.Gs;Ny.jft=class{constructor(t){this.kc=t,this.zft=new Map,this.Bft=null,this.Uft=[],this.Wft=()=>this._6(),this.Qft=null}Jn(){Ny.wh(this.Uft),this.Uft=null,this.zft.clear(),this.zft=null,this.Bft=null,this.kc=null,this.Qft=null}Fj(){return this.kc}Qlt(t){return this.kc.pct().Qlt(t)}_ft(t,s,i,e,n,r){const h=this.kc.pct().Qlt(t);if(!h)return void console.warn(`[Flowcharts] no flowchart found with name '${t}'`);if(this.zft.has(i)){const t=this.zft.get(i);t&&this.pft(t)}const o=new Ny.Vlt(t,i,s,h,this,e,r);return this.zft.set(i,o),n&&this.Lct(o,!0),o}pft(t){if(t.lft(),t.cft())return;const s=t.EY();this.zft.delete(s),t.Jn(),this.Bft===t&&(this.Bft=null)}Jft(t){t.Ff()}Dft(t){return this.zft.get(t)}mft(t){this.Uft.push(t)}Cft(){this.Uft.pop()}Lct(t,s=!1,i=!1,e=!0){if(e){const s=t.Pft();t=s||t}t!==this.Bft&&(this.Vft(),this.Yft(t,s,i))}Hft(t){return"string"==typeof t?this.Dft(t):this.Uft.length?this.Uft[this.Uft.length-1]:this.Bft}Vft(){if(!this.Bft)return;if(this.Bft.Vn())return;const t=this.Bft.Z6().iH();this.Bft.fft(),this.mft(this.Bft),this.kc.vQ(Ny._j.gft.Ej.qft,t),this.Cft(),this.Bft.dft()}Yft(t,s=!1,i=!1){if(this.Bft=t,!this.Bft)return;if(this.Bft.Vn())return;const e=this.Bft.Z6().iH();this.Bft.fft(),this.mft(this.Bft),this.kc.vQ(Ny._j.gft.Ej.Zft,e),!0!==i&&"number"!=typeof i||this.Bft.Xlt(i),s&&(this.kc.vQ(Ny._j.gft.Ej.Tft,e),this.kc.vQ(Ny._j.gft.Ej.bft,e),this.kc.vQ(Ny._j.gft.Ej.vft,e),this.kc.vQ(Ny._j.gft.Ej.xft,e)),this.Cft(),this.Bft.dft()}w4(){return{flowchartJsonObjects:[...this.zft.values()].map((t=>t.w4())),currentFlowchartTag:this.Bft?this.Bft.EY():null}}S4(t){if(!t)return;this.Qft=t;const s=new Map;for(const t of this.Qft.flowchartJsonObjects){const i=t.flowchartTag;if(this.zft.has(i)){const e=this.zft.get(i);e.S4(t),s.set(i,e)}else{const i=this._ft(t.flowchartName,t.startNodeTag,t.flowchartTag,null,!1,t.pluginUID);i.S4(t),s.set(t.flowchartTag,i)}}for(const[t,i]of this.zft.entries())s.has(t)||i.Jn();this.zft.clear(),this.zft=s,this.kc.e5()?this.kc.gf().addEventListener("afterload",this.Wft):this._6()}_6(){this.kc.gf().removeEventListener("afterload",this.Wft);const t=this.zft.get(this.Qft.currentFlowchartTag);t&&this.Lct(t,!0),this.Qft=null}}}{const Ey=self.Gs;Ey.Wlt=class{constructor(){this.Kft=new Map}Jn(){for(const t of this.Kft.values())t.Jn();this.Kft.clear(),this.Kft=null}Fl(t){const s=new Ey.Xft(t),i=s.Nc();this.Kft.set(i,s)}Js(t){return this.Kft.get(t)}Jlt(){return!!this.Kft.size}static $ft(t,s,i,e){if(s)for(const n of s){const s=new i(n,e);t.push(s)}}}}{const Dy=self.Gs;Dy.Xft=class{constructor(t){this.Hn=t[0],this.tdt=new Dy.sdt(t[1],this)}Jn(){this.tdt.Jn(),this.tdt=null}idt(){return this.tdt}gct(t){return this.tdt.gct(t)}Kct(t){return this.tdt.Kct(t)}Xct(){return this.tdt.Xct()}Nc(){return this.Hn}}}{const _y=self.Gs;class Ay{constructor(t,s){this.tdt=s,this.Jc=t[7],this.edt=t[0],this.NM=t[1],this.NM?this.Y9=this.NM.trim().split(" ").map((t=>t.trim())):this.Y9=[],this.ndt=t[2],this.rdt=null,this.hdt=null,this.vat=!1,"dictionary"===this.Jc&&(this.rdt=t[3],this.hdt=t[4],this.vat=t[8]),this.odt=t[6],this.adt=null,this.udt=null,this.ldt=null,"reference"===this.Jc&&(this.adt=t[8],this.udt=t[9],this.ldt=t[10],this.vat=t[11]),this.cdt=new _y.fdt(t[5],this)}Jn(){this.tdt=null}idt(){return this.tdt}kct(){return this.cdt}tct(){return this.edt}EY(){return this.NM}QY(){return this.Y9}OY(t){if(!this.Y9)return!1;if(!this.Y9.length)return!1;const s=_y.Vlt.Ctt(t);return!(!s||!s.length)&&s.every(_y.Vlt.Itt,this.Y9)}ddt(){return this.odt}pdt(t){this.odt=!!t}mdt(){if("dictionary"===this.Jc)return!0;if("reference"===this.Jc)return!1;throw new Error(`unexpected flowchart node type: ${this.Jc}`)}xct(){return this.ndt}ydt(){return this.rdt}gdt(){return this.hdt}AG(){return this.Jc}Dit(){return this.vat}qct(){return this.adt}Zct(){return this.udt}Eft(){return this.ldt}}_y.sdt=class{constructor(t,s){this.Zlt=s,this.Mdt=[],this.wdt=new Map,this.Sdt=new Map,this.Tdt=null,_y.Wlt.$ft(this.Mdt,t,Ay,this);for(const t of this.Mdt){const s=t.tct(),i=t.EY(),e=t.QY(),n=t.ddt();if(this.wdt.set(s,t),i)for(const s of e)this.Sdt.has(s)||this.Sdt.set(s,new Set),this.Sdt.get(s).add(t);n&&(this.Tdt=t);const r=t.kct();for(const t of r.bdt()){const s=t.tct();this.wdt.set(s,t)}}this.Tdt||this.vdt()}Jn(){this.Zlt=null;for(const t of this.Mdt)t.Jn();_y.wh(this.Mdt),this.Mdt=null}mct(){return this.Zlt}gct(t){return this.wdt.get(t)}Kct(t){if(!t||!t.length)return null;const s=[];for(const i of t.trim().split(" ")){let t=this.Sdt.get(i.trim())??new Set;if(0===t.size)return null;s.push(t)}return[...s.reduce(((t,s)=>s.size<t.size?s:t))].filter((t=>s.every((s=>s.has(t)))))[0]}Xct(){return this.Tdt}*xdt(){for(const t of this.Mdt)yield t}vdt(){let t=0;for(const s of this.xdt())s.ddt()&&t++;if(0===t){for(const t of this.xdt())if(t.mdt()&&!t.ddt())return void t.pdt(!0)}else{if(1===t)return;if(t>1){let t=!0;for(const s of this.xdt())s.mdt()&&(s.ddt()&&t?t=!1:s.ddt()&&!t&&s.pdt(!1))}}for(const t of this.xdt())if(t.mdt()&&t.ddt())return void(this.Tdt=t)}}}{const Ly=self.Gs;class Oy{constructor(t,s){this.cdt=s,this.edt=t[0],this.Hn=t[1],this.Trt=t[2],this.Cdt=t[3],this.vat=t[4],this.Gdt=t[5]}Jn(){this.cdt=null}kct(){return this.cdt}tct(){return this.edt}Nc(){return this.Hn}Yet(){return this.Trt}Yct(){return this.Cdt}Dit(){return this.vat}Idt(){return this.Gdt}}Ly.fdt=class{constructor(t,s){this.Ndt=s,this.Edt=[],this.Ddt=new Map,Ly.Wlt.$ft(this.Edt,t,Oy,this),this._dt=this.Edt.filter((t=>t.Dit()));for(const t of this._dt)this.Ddt.set(t.Nc(),t)}Jn(){this.Ndt=null;for(const t of this.Edt)t.Jn();Ly.wh(this.Edt),this.Edt=null,Ly.wh(this._dt),this._dt=null}Adt(){return this.Ndt}Pct(){return this._dt.length}Bct(){return this._dt}Oft(t){return this.Ddt.get(t)}zct(){for(const t of this._dt)if(t.Idt())return t}*bdt(){for(const t of this._dt)yield t}}}{const Ry=self.Gs;Ry.Ldt=class extends Ry.Un{constructor(t){super(),this.Odt=t,this.Rdt=[],this.Rdt.push(Ry.Qn(Ry.Pdt,this)),this.IM=0,this.kdt=this.Rdt[0]}Jn(){for(const t of this.Rdt)t.Jn();Ry.wh(this.Rdt),this.kdt=null,this.Odt=null}BW(){return this.Odt}LB(){return this.kdt}Fdt(){return this.Rdt[this.IM-1]}Nl(){this.LB().Nl()}jdt(){const t=this.Rdt,s=++this.IM;if(s===t.length){const s=Ry.Qn(Ry.Pdt,this);t.push(s),this.kdt=s}else{const i=t[s];i.Ff(),this.kdt=i}}zdt(){const t=this.Rdt,s=++this.IM;s===t.length&&t.push(Ry.Qn(Ry.Pdt,this));const i=t[s];i.nd(t[s-1]),this.kdt=i}zq(){this.kdt=this.Rdt[--this.IM]}Bdt(t){const s=this.Rdt;for(let i=0,e=s.length;i<e;++i)s[i].Bdt(t)}}}{const Py=self.Gs;Py.Pdt=class extends Py.Un{constructor(t){super(),this.Rdt=t,this.Odt=this.Rdt.BW(),this.Udt=this.Odt.Fj().Xk(),this.Wdt=!0,this.LX=[],this.Qdt=[]}Jn(){this.Jdt(),this.Rdt=null,this.Odt=null,this.Udt=null}Jdt(){Py.wh(this.LX),Py.wh(this.Qdt)}BW(){return this.Odt}Vdt(){return this.Wdt}Ydt(){return this.Wdt?!!this.Odt.PB():!!this.LX.length}AB(){return this.Wdt?this.Odt.AB():this.LX}Hdt(){return!!this.Qdt.length}qdt(){return this.Qdt}Zdt(){const t=this.AB();return t.length?t:this.Qdt}Ff(){this.Wdt=!0,Py.wh(this.Qdt)}Nl(){this.Wdt=!0}nd(t){t.Vdt()?this.Ff():(this.Wdt=!1,Py.xh(this.LX,t.LX),Py.wh(this.Qdt))}Kdt(t){this.LX.push(t)}Xdt(t){this.Qdt.push(t)}$dt(t){this.Wdt=!!t}tpt(){return this.LX}spt(){return this.Qdt}ipt(t){this.Wdt=!1,Py.wh(this.LX),this.LX.push(t)}ept(t){this.Wdt=!1,Py.xh(this.LX,t)}npt(t){this.Wdt=!1,Py.wh(this.LX);for(const s of t)this.LX.push(s)}rpt(t,s){for(const i of s)t.has(i)||this.Qdt.push(i)}hpt(t){for(const s of t)this.LX.push(s);Py.Eh(this.Qdt,t)}opt(){Py.wh(this.Qdt)}apt(t){if(t)if(this.Udt.Nq().Jk().upt()){this.Vdt()&&(Py.wh(this.LX),Py.xh(this.Qdt,t.BW().AB()),this.Wdt=!1);const s=this.Qdt.indexOf(t);-1!==s&&(this.LX.push(this.Qdt[s]),this.Qdt.splice(s,1))}else this.ipt(t)}Bdt(t){Py.Eh(this.LX,t),Py.Eh(this.Qdt,t)}}}{const ky=self.Gs;ky.lpt=class extends ky.Un{constructor(t){super(),this.cpt=t,this.kc=this.cpt.Fj(),this.Rdt=[],this.Rdt.push(ky.Qn(ky.fpt,this,null)),this.IM=0,this.dpt=[]}Jn(){for(const t of this.Rdt)t.Jn();ky.wh(this.Rdt),ky.wh(this.dpt),this.cpt=null,this.kc=null}jk(){return this.cpt}Fj(){return this.kc}Nq(){return this.Rdt[this.IM]}ppt(){return this.Rdt}mpt(){return this.IM}Eq(t){const s=this.Rdt,i=++this.IM;if(i===s.length){const i=ky.Qn(ky.fpt,this,t);return s.push(i),i}{const e=s[i];return e.Ff(t),e}}zq(){--this.IM}ypt(t){this.dpt.push(t)}gpt(){this.dpt.pop()}Kk(){const t=this.dpt;return 0===t.length?null:t.at(-1)}}}{const Fy=self.Gs;Fy.fpt=class extends Fy.Un{constructor(t,s){super(),this.Rdt=t,this.kc=this.Rdt.Fj(),this.Mpt=s,this.wpt=0,this.Spt=0,this.Tpt=!1,this.bpt=!1,this.vpt=null,this.xpt=0,this.Cpt=0,this.Gpt=null}Jn(){this.Ff(null),this.Rdt=null,this.kc=null}Ff(t){this.Mpt=t,this.wpt=0,this.Spt=0,this.Tpt=!1,this.bpt=!1,this.Gpt=null}Ipt(t,s){this.Mpt=t,this.wpt=0,this.Spt=s}Npt(){this.wpt=0,this.Spt=0}Jk(){return this.Mpt}Ept(t){this.Mpt=t}Dpt(){return this.wpt}_pt(t){this.wpt=t}Apt(){return this.Spt}Lpt(t){this.Spt=t}Opt(t){this.Tpt=!!t}Rpt(){return this.Tpt}Ppt(t){this.bpt=!!t}kpt(){return this.bpt}Fpt(t){this.vpt=t}jpt(){return this.vpt}zpt(t,s){this.xpt=t,this.Cpt=s}$k(){return this.xpt}tF(t){this.Cpt=t}Bpt(){return this.Cpt}Upt(){const t=this.Mpt;return!!t.Wpt()||this.wpt<t.Qpt()-1&&!!t.Iq().length}Jpt(t){this.Gpt=t}Vpt(){return this.Gpt}}}{const jy=self.Gs;jy.Ypt=class extends jy.Un{constructor(t){super(),this.cpt=t,this.kc=this.cpt.Fj(),this.Rdt=[],this.IM=-1,this.kdt=null,this.Hpt=[]}Jn(){jy.wh(this.Rdt),this.cpt=null,this.kc=null}qpt(t){this.Hpt=t;const s=this.Hpt.slice(0);this.Rdt.push(s),this.IM=0,this.kdt=s}jk(){return this.cpt}Fj(){return this.kc}Zpt(){return this.kdt}Eq(){const t=++this.IM,s=this.Rdt;t===s.length?s.push(this.Hpt.slice(0)):jy.xh(s[t],this.Hpt),this.kdt=s[t]}zq(){this.kdt=this.Rdt[--this.IM]}}}{const zy=self.Gs;zy.Kpt=class extends zy.Un{constructor(t){super(),this.cpt=t,this.kc=this.cpt.Fj(),this.Rdt=[],this.IM=-1}Jn(){zy.wh(this.Rdt),this.cpt=null,this.kc=null}jk(){return this.cpt}Fj(){return this.kc}Xpt(){return this.IM>=0}Zpt(){return this.Rdt[this.IM]}Eq(){if(++this.IM,this.IM===this.Rdt.length){const t=zy.Qn(zy.$pt,this);return this.Rdt.push(t),t}{const t=this.Rdt[this.IM];return t.Ff(),t}}zq(){--this.IM}tmt(t){const s=this.Rdt;for(let i=this.IM;i>=0;--i){const e=s[i];if(e.Nc()===t)return e}return null}smt(){return this.Rdt.slice(0,this.IM+1)}}}{const By=self.Gs;By.$pt=class extends By.Un{constructor(t){super(),this.imt=t,this.Hn="",this.IM=0,this.emt=!1,this.nmt=NaN}Ff(){this.Hn="",this.IM=0,this.emt=!1,this.nmt=NaN}_q(t){this.Hn=t}Nc(){return this.Hn}kq(t){this.IM=t}$P(){return this.IM}AY(){this.emt=!0}jq(){return this.emt}rmt(t){this.nmt=t}hmt(){return this.nmt}}}{const Uy=self.Gs;Uy.omt=class extends Uy.Un{constructor(){super(),this.Rdt=[],this.IM=-1}Jn(){Uy.wh(this.Rdt)}Zpt(){return this.Rdt[this.IM]}Eq(){if(++this.IM,this.IM===this.Rdt.length){const t=[];return this.Rdt.push(t),t}return this.Rdt[this.IM]}zq(){--this.IM}}}{let Wy=function(t,s){return t.$P()-s.$P()},Qy=function(t,s){for(let i=0,e=t.length;i<e;++i)if(t[i]!==s[i])return!1;return!0};0;const Jy=self.Gs;self.assert;Jy.amt=class extends Jy.Un{constructor(t){super(),this.kc=t,this.umt=[],this.lmt=new Map,this.cmt=[],this.fmt=new Map,this.dmt=new Map,this.pmt=new Map,this.mmt=new Map,this.ymt=new Map,this.gmt=new Map,this.Mmt=0,this.wmt=[],this.Smt=[],this.Tmt=[],this.bmt=new Map,this.vmt=new Map,this.Udt=Jy.Qn(Jy.lpt,this),this.xmt=Jy.Qn(Jy.Ypt,this),this.imt=Jy.Qn(Jy.Kpt,this),this.Cmt=[],this.Gmt=[],this.Imt=[],this.Nmt=0,this.Emt=0,this.Dmt=0,this._mt=[],this.Amt=[],this.Lmt=[],this.Omt=new Map,this.Rmt=new Map,self.c3_callFunction=(t,s)=>this.Pmt(t,s)}Jn(){this.T5(),this.Udt.Jn(),this.Udt=null,this.xmt.Jn(),this.xmt=null,Jy.wh(this.Gmt),Jy.wh(this.Imt),this.kc=null,Jy.wh(this.umt),this.lmt.clear()}DC(t){const s=Jy.Qn(Jy.kmt,this,t);this.umt.push(s),this.lmt.set(s.Nc().toLowerCase(),s)}Fmt(t){this.Cmt.push(t)}jmt(){for(const t of this.vmt.values())t.zmt();for(const t of this.bmt.values())t.jmt();for(const t of this.vmt.values())t.jmt();for(const t of this.umt)t.jmt();for(const t of this.umt)t.J3();for(const t of this.Cmt)t.jmt(!1);Jy.wh(this.Cmt),this.xmt.qpt(this.Tmt)}Fj(){return this.kc}Q3(t){return this.lmt.get(t.toLowerCase())||null}Bmt(t){this.cmt.push(t),this.fmt.set(t.Umt(),t)}Wmt(t){this.dmt.set(t.W0(),t)}Qmt(t){this.pmt.set(t.W0(),t)}Jmt(t){this.mmt.set(t.W0(),t)}Vmt(t){switch(t.Ymt()){case 0:this.bmt.set(t.Hmt().toLowerCase(),t);break;case 1:this.vmt.set(t.Hmt().toLowerCase(),t)}}qmt(t){this.gmt.set(t.W0(),t),t.b0()?this.wmt.push(t):this.Smt.push(t)}Zmt(t){t.length>=2&&t.sort(Wy);let s=this.ymt.get(t.length);s||(s=[],this.ymt.set(t.length,s));for(let i=0,e=s.length;i<e;++i){const e=s[i];if(Qy(t,e))return e}return s.push(t),t}Kmt(t){return this.Tmt.push(t.Xmt()),this.Mmt++}Xk(){return this.Udt}$mt(){return this.Xk().Nq()}Jk(){return this.$mt().Jk()}tyt(){const t=this.$mt();return t.Jk().syt(t.Dpt())}iyt(){const t=this.$mt();return t.Jk().eyt(t.Apt())}nyt(){return this.xmt}Dq(){return this.imt}ryt(t){const s=[];for(t=t.hyt();t;)Jy.An(s,t.oyt()),t=t.hyt();return s}ayt(t){const s={};for(const i of this.ryt(t))s[i.uyt()]=i.lyt();return Object.create(Object.prototype,s)}cyt(t){return this.gmt.get(t)||null}fyt(t){return this.dmt.get(t)||null}dyt(t){return this.pmt.get(t)||null}pyt(t){return this.mmt.get(t)||null}zk(t){return this.bmt.get(t.toLowerCase())||null}myt(t,s){let i=this.vmt.get((t.Nc()+"."+s).toLowerCase());if(i)return i;if(!t.P0())for(const e of t.YB())if(i=this.vmt.get((e.Nc()+"."+s).toLowerCase()),i)return i;return null}yyt(){return this.wmt}gyt(){return this.Smt}Myt(t){for(const t of this.wmt)t.wyt();if(t)for(const t of this.Smt)t.Lx()&&t.wyt()}Syt(t){return this.fmt.get(t.toLowerCase())||null}Tyt(t){const s=this.dmt.get(t);return s&&s.byt()?s:null}vyt(){return this.cmt}xyt(){for(const t of this.cmt)t.Cyt()}Gyt(){for(const t of this.umt)t.Iyt()}Nyt(t){this.Gyt(),this.Nmt++;for(const s of t.X5()){const t=s.g3();t&&(this.kc.Eyt(s),t.XN(),this.kc.Dyt())}this.Nmt--}async _yt(t){this.Gyt(),this.Nmt++;for(const s of this.Ayt(t))await this.kc.Lyt(s);this.Nmt--}*Ayt(t){for(const s of t.X5()){const t=s.g3();t&&(this.kc.Eyt(s),yield*t.Oyt(),this.kc.Dyt())}}Ryt(t,s,i,e){let n=!1;if(!t.UF())return this.Pyt(s,i,e);this.Emt++;for(const r of t.X5()){const t=r.g3();if(!t)continue;this.kc.Eyt(r);for(const r of t.kyt()){const t=r.Ryt(s,i,e);n=n||t}const h=t.Ryt(s,i,e);n=n||h,this.kc.Dyt()}return this.Emt--,n}*Fyt(t,s,i,e){let n=!1;if(!t.UF())return this.Pyt(s,i,e);this.Emt++;for(const r of t.X5()){const t=r.g3();if(!t)continue;this.kc.Eyt(r);for(const r of t.kyt()){const t=yield*r.Fyt(s,i,e);n=n||t}const h=yield*t.Fyt(s,i,e);n=n||h,this.kc.Dyt()}return this.Emt--,n}Pyt(t,s,i){return this.Gmt.push([t,s,i]),!1}jyt(t,s,i){let e=null;const n=new Promise((t=>e=t));return this.Imt.push([t,s,i,e]),n}*zyt(){if(this.kc.Byt())throw new Error("should not be in breakpoint");const t=this.kc.JF();for(;this.Imt.length;){const[s,i,e,n]=this.Imt.shift();n(yield*this.Fyt(t,s,i,e))}}async Uyt(){for(const t of this.zyt())await this.kc.Lyt(t)}Wyt(t,s,i,e){let n=!1;const r=t.UF(),h=r.g3();if(!h)return;this.Emt++,this.kc.Eyt(r);const o=h.kyt();for(let t=0,r=o.length;t<r;++t){const r=o[t].Wyt(s,i,e);n=n||r}const a=h.Wyt(s,i,e);return n=n||a,this.kc.Dyt(),this.Emt--,n}*Qyt(t,s,i,e){let n=!1;const r=t.UF(),h=r.g3();if(!h)return;this.Emt++,this.kc.Eyt(r);const o=h.kyt();for(let t=0,r=o.length;t<r;++t){const r=yield*o[t].Qyt(s,i,e);n=n||r}const a=yield*h.Qyt(s,i,e);return n=n||a,this.kc.Dyt(),this.Emt--,n}Jyt(){return this.Emt}Vyt(){return this.Jyt()>0}Yyt(){return++this.Emt}Hyt(){--this.Emt}qyt(){return this.Nmt>0}WB(){return this.qyt()||this.Vyt()}f5(t){for(const[s,i,e]of this.Gmt)this.Ryt(t,s,i,e);Jy.wh(this.Gmt)}BB(t){t?this.Dmt++:this.Dmt--}HW(){return this.Dmt>0}Zyt(t){for(let s=0,i=t.length;s<i;++s)t[s].Kyt().Nl()}Xyt(t){for(let s=0,i=t.length;s<i;++s)t[s].Kyt().jdt()}Oq(t){for(let s=0,i=t.length;s<i;++s)t[s].Kyt().zdt()}Pq(t){for(let s=0,i=t.length;s<i;++s)t[s].Kyt().zq()}Vk(t){const s=new Set,i=this.Udt.ppt(),e=this.Udt.mpt();for(let n=0;n<=e;++n){const e=i[n].Vpt();if(e)for(const i of e)t&&t.has(i)||s.add(i)}return s}$yt(t){const s=new Set([...t]),i=this.Vk(s);if(i.size>0){for(const t of i)t.Kyt().jdt();return[...i]}return null}tgt(){const t=Jy.Qn(Jy.sgt,this);return this._mt.push(t),t}igt(){return this._mt}egt(){if(!this._mt.length)return;const t=this.$mt();let s=!1;this.Nmt++;for(let i=0,e=this._mt.length;i<e;++i){const e=this._mt[i];e.ngt()&&e.rgt(t),e.hgt()&&(s=!0)}s&&(this.ogt(),t.Ff(null)),this.Nmt--}async agt(){if(!this._mt.length)return;const t=this.$mt();let s=!1;this.Nmt++;for(let i=0,e=this._mt.length;i<e;++i){const e=this._mt[i];e.ngt()&&await e.ugt(t),e.hgt()&&(s=!0)}s&&(this.ogt(),t.Ff(null)),this.Nmt--}ogt(){const t=Jy.Nh(this._mt,(t=>t.hgt()));for(const s of t)s.Jn()}T5(){for(const t of this._mt)t.Jn();Jy.wh(this._mt)}lgt(t){for(const s of this._mt)s.Bdt(t);for(const s of t){const t=this.Rmt.get(s);if(this.Rmt.delete(s),t)for(const{resolve:s}of t.cgt.values())s(!0)}}fgt(t){this.Amt.push({promise:t,dgt:this.Jyt()})}pgt(){Jy.wh(this.Amt)}mgt(){const t=this.Jyt(),s=Promise.all(this.Amt.filter((s=>s.dgt===t)).map((t=>t.promise)));return this.Amt=this.Amt.filter((s=>s.dgt<t)),s}sF(t){const s=t.toLowerCase();this.Lmt.push(s),this.kc.vQ(Jy._j.Dj.Ej.ygt,null),this.Lmt.pop();for(const t of this.kc.jk().igt())t.ggt()&&t.Mgt()===s&&t.wgt();const i=this.Omt.get(s);i&&(i.resolve(),this.Omt.delete(s))}eF(t){const s=t.toLowerCase(),i=this.Omt.get(s);if(i)return i.promise;{let t=null;const i=new Promise((s=>t=s));return this.Omt.set(s,{promise:i,resolve:t}),i}}Sgt(){if(0===this.Lmt.length)throw new Error("not in a signal");return this.Lmt.at(-1)}Tgt(t){let s=this.Rmt.get(t);return s||(s={bgt:[],cgt:new Map},this.Rmt.set(t,s)),s}dQ(t,s){const i=this.Tgt(t),e=s.toLowerCase();i.bgt.push(e),this.kc.vQ(t.TB().xgt().Ej.vgt,t),i.bgt.pop();for(const s of this.kc.jk().igt())s.Cgt()&&s.Mgt()===e&&s.Ggt(t);const n=i.cgt.get(e);n&&(n.resolve(!1),i.cgt.delete(e)),0===i.bgt.length&&0===i.cgt.size&&this.Rmt.delete(t)}pQ(t,s){const i=this.Tgt(t),e=s.toLowerCase(),n=i.cgt.get(e);if(n)return n.promise;{let t=null;const s=new Promise((s=>t=s));return i.cgt.set(e,{promise:s,resolve:t}),s}}Igt(t){const s=this.Tgt(t);if(!s||0===s.bgt.length)throw new Error("not in a signal");return s.bgt.at(-1)}w4(){return{groups:this.Ngt(),cnds:this.Egt(),acts:this.Dgt(),vars:this._gt(),waits:this.Agt()}}S4(t){this.Lgt(t.groups),this.Ogt(t.cnds),this.Rgt(t.acts),this.Pgt(t.vars),this.kgt(t.waits)}Ngt(){const t={};for(const s of this.vyt())t[s.W0().toString()]=s.Fgt();return t}Lgt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.Tyt(t);e&&e.jgt(i)}}Egt(){const t={};for(const[s,i]of this.pmt){const e=i.w4();e&&(t[s.toString()]=e)}return t}Ogt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.pmt)i.S4(s.get(t)||null)}Dgt(){const t={};for(const[s,i]of this.mmt){const e=i.w4();e&&(t[s.toString()]=e)}return t}Rgt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.mmt)i.S4(s.get(t)||null)}_gt(){const t={};for(const[s,i]of this.gmt)i.zgt()||!i.b0()&&!i.Lx()||(t[s.toString()]=i.Yet());return t}Pgt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.cyt(t);e&&e.Ent(i)}}Agt(){return this._mt.filter((t=>!t.Bgt())).map((t=>t.w4()))}kgt(t){this.T5();for(const s of t){const t=Jy.sgt.Ugt(this,s);t&&this._mt.push(t)}}Wgt(){return[...this.kc.JF().X5()].map((t=>t.g3())).filter((t=>t)).map((t=>t.Qgt()))}Jgt(t){for(;t;){const s=t.hyt();if(s instanceof Jy.Vgt)return s;t=s}return null}Pmt(t,s){Array.isArray(s)||(s=[]);const i=this.zk(t.toLowerCase());if(!i)return null;if(!i.Cl())return i.Bk();const e=i.Ygt();if(s.length<e.length){s=s.slice(0);do{s.push(e[s.length].Xmt())}while(s.length<e.length)}const n=i.Wk();return n.Yk(n.Qk(),!1,i.qk(),i.Bk(),...s)}}}{const Vy=self.Gs;Vy.kmt=class extends Vy.Un{constructor(t,s){super(),this.cpt=t,this.kc=t.Fj(),this.Hn=s[0],this.Hgt=[],this.qgt=new Map,this.Zgt=new Map,this.Kgt=new Map,this.Xgt=!1,this.$gt=[],this.tMt=[],this.sMt=new Set;for(const t of s[1])this.iMt(t,null,this.Hgt);this.eMt=this.kc._Q()?{type:"sheet",name:this.Hn,nMt:0,children:[]}:null}Jn(){this.cpt=null,this.kc=null}iMt(t,s,i){switch(t[0]){case 0:case 3:this.rMt(t,s,i);break;case 1:this.hMt(t,s,i);break;case 2:this.oMt(t,s,i);break;case 4:this.aMt(t,s);break;case 5:this.uMt(t,s,i);break;case 6:this.lMt(t,s);break;default:throw new Error("invalid event type")}}rMt(t,s,i){const e=Vy.cMt.DC(this,s,t);if(e.upt()){i.push(e);const t=e.fMt();for(let s=0,i=t.length;s<i;++s)t[s].dMt()&&this.pMt(e,s)}else e.dMt()?this.pMt(e,0):i.push(e)}aMt(t,s){const i=Vy.Vgt.mMt(this,s,t);this.cpt.Vmt(i)}lMt(t,s){const i=Vy.Vgt.yMt(this,s,t);this.cpt.Vmt(i)}hMt(t,s,i){const e=Vy.gMt.DC(this,s,t);i.push(e)}oMt(t,s,i){const e=Vy.MMt.DC(this,s,t);i.push(e)}uMt(t,s,i){const e=Vy.wMt.DC(this,s,t);i.push(e)}pMt(t,s){t.upt()||this.cpt.Fmt(t);const i=t.syt(s),e=i.SMt(),n=i.BW();if(i.TMt()){let r=this.Zgt.get(n);r||(r=new Map,this.Zgt.set(n,r));const h=i.bMt().toLowerCase();let o=r.get(e);o||(o=new Map,r.set(e,o));let a=o.get(h);a||(a=[],o.set(h,a)),a.push([t,s])}else{let r=this.qgt.get(n);r||(r={vMt:new Map,xMt:new Map},this.qgt.set(n,r));const h=i.zV();let o;h?(o=r.xMt.get(h),o||(o=new Map,r.xMt.set(h,o))):o=r.vMt;let a=o.get(e);a||(a=[],o.set(e,a)),a.push([t,s])}}jmt(){const t=this.Hgt;for(let s=0,i=t.length;s<i;++s){const e=s<i-1&&t[s+1]instanceof Vy.cMt&&t[s+1].CMt();t[s].jmt(e)}}GMt(t){this.$gt.push(t)}J3(){Vy.wh(this.tMt),this.IMt(this),this.sMt.clear()}IMt(t){const s=t.tMt,i=t.sMt;for(const e of this.$gt){const n=e.NMt();e.EMt()&&t!==n&&!i.has(n)&&(i.add(n),n.IMt(t),s.push(n))}}kyt(){return this.tMt}jk(){return this.cpt}Fj(){return this.kc}Nc(){return this.Hn}DMt(t,s){this.Kgt.set(s,t)}_Mt(t){return this.Kgt.get(t)||null}Iyt(){this.Xgt=!1}XN(){if(this.Xgt)return;const t=this.kc,s=t.AMt(),i=s?performance.now():0;this.Xgt=!0;const e=this.jk(),n=e.$mt();for(const s of this.Hgt)s.XN(n),e.Zyt(s.Iq()),e.pgt(),t.JB();n.Ff(null),s&&(this.eMt.nMt+=performance.now()-i)}*Oyt(){if(this.Xgt)return;this.Xgt=!0;const t=this.kc,s=this.jk(),i=s.$mt();for(const e of this.Hgt)yield*e.Oyt(i),s.Zyt(e.Iq()),s.pgt(),t.JB();i.Ff(null)}Ryt(t,s,i){if(!s)return this.LMt(t,s,null,null);{const e=s.BW();let n=!1,r=this.LMt(t,s,e,i);n=n||r;for(const h of e.YB())r=this.LMt(t,s,h,i),n=n||r}}LMt(t,s,i,e){const n=this.qgt.get(i);if(!n)return!1;const r=e?n.xMt.get(e):n.vMt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){const e=this.OMt(s,t,i);o=o||e}return o}*Fyt(t,s,i){if(!s)return yield*this.RMt(t,s,null,null);{const e=s.BW();let n=!1,r=yield*this.RMt(t,s,e,i);n=n||r;for(const h of e.YB())r=yield*this.RMt(t,s,h,i),n=n||r}}*RMt(t,s,i,e){const n=this.qgt.get(i);if(!n)return!1;const r=e?n.xMt.get(e):n.vMt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){let e;e=t.PMt()?this.OMt(s,t,i):yield*this.kMt(s,t,i),o=o||e}return o}Wyt(t,s,i){const e=s.BW(),n=this.Zgt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=this.OMt(null,s[0],s[1]);o=o||i}return o}*Qyt(t,s,i){const e=s.BW(),n=this.Zgt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=s[0],e=s[1];let n;n=i.PMt()?this.OMt(null,i,e):yield*this.kMt(null,i,e),o=o||n}return o}OMt(t,s,i){const e=this.kc,n=this.cpt,r=n.Jk(),h=n.Xk(),o=n.Jyt();let a=!1;r&&n.Xyt(r.Qk()),n.Xyt(s.Qk());const u=o>1;u&&n.nyt().Eq();const l=h.Eq(s);t&&(s.fMt()[i].BW().LB().ipt(t),t.XW()&&t.FMt());let c=!0;if(s.OJ()){const t=s.jMt();for(let s=0,i=t.length;s<i;++s)if(!t[s].zMt(l)){c=!1;break}}return c&&(s.upt()?s.BMt(l,i):s.XN(l),a=l.Rpt()),h.zq(),u&&n.nyt().zq(),n.Pq(s.Qk()),r&&n.Pq(r.Qk()),r||1!==o||(n.pgt(),n.HW()||e.JB()),a}*kMt(t,s,i){const e=this.kc,n=this.cpt,r=n.Jk(),h=n.Xk(),o=n.Jyt();let a=!1;r&&n.Xyt(r.Qk()),n.Xyt(s.Qk());const u=o>1;u&&n.nyt().Eq();const l=h.Eq(s);t&&(s.fMt()[i].BW().LB().ipt(t),t.XW()&&t.FMt());let c=!0;if(s.OJ()){const t=s.jMt();for(let s=0,i=t.length;s<i;++s)if(!(yield*t[s].UMt(l))){c=!1;break}}return c&&(s.upt()?yield*s.WMt(l,i):yield*s.Oyt(l),a=l.Rpt()),h.zq(),u&&n.nyt().zq(),n.Pq(s.Qk()),r&&n.Pq(r.Qk()),r||1!==o||(n.pgt(),n.HW()||e.JB()),a}Qgt(){return this.eMt}}}{let Yy=function(t,s){return!0};0;const Hy=self.Gs,qy=[];function*Zy(t,s){return!0}Hy.cMt=class extends Hy.Un{constructor(t,s,i){super(),this.L4=t,this.kc=t.Fj(),this.QMt=s,this.JMt=null,this.Udt=this.kc.jk().Xk(),this.VMt=[],this.YMt=[],this.HMt=!1,this.qMt=!1,this.ZMt=!1,this.KMt=!1,this.XMt=!!i[2],this.$Mt=!1,this.twt=null,this.swt=[],this.Crt=[],this.iwt=[],this.ewt=Yy,this.nwt=Zy,this.rwt=!1,this.hwt=!1,this.owt="",this.awt=!1,this.uwt=null,this.eMt=null,this.f$=i[4],this.lwt=i[5],this.L4.DMt(this,this.lwt),this.cwt=this.kc._Q()?{fwt:i[3][0],dwt:i[3][1],pwt:!1,mwt:!1,ywt:!1,gwt:!1}:null,this.jk().Wmt(this),3===i[0]&&this.Mwt(i[1]);let e=0;for(const t of i[6]){const s=Hy.wwt.DC(this,t,e++);this.swt.push(s),this.Swt(s.BW())}e=0;for(const t of i[7]){const s=Hy.Twt.DC(this,t,e++);this.Crt.push(s)}if(9===i.length){const t=i[8];for(const s of t)this.L4.iMt(s,this,this.iwt)}this.swt.length&&(this.$Mt=null===this.swt[0].BW()&&this.swt[0].SMt()===Hy._j.Dj.Ej.bwt),0===this.swt.length&&(this.swt=qy),0===this.Crt.length&&(this.Crt=qy),0===this.iwt.length&&(this.iwt=qy)}static DC(t,s,i){return Hy.Qn(Hy.cMt,t,s,i)}Mwt(t){this.rwt=!0,this.hwt=!!t[0],this.awt=this.hwt,this.owt=t[1].toLowerCase(),this.uwt=[],this.jk().Bmt(this),this.kc._Q()&&(this.eMt={type:"group",name:t[1],nMt:0,children:[]})}vwt(t){this.uwt.push(t)}xwt(t,s){for(const i of t.D3().tU())s.includes(i)||s.push(i)}Cwt(t,s){if(t)if(s.includes(t)||s.push(t),t.P0())for(const i of t.$B())i.XW()&&this.xwt(i,s);else t.XW()&&this.xwt(t,s)}Swt(t){this.Cwt(t,this.VMt)}Gwt(t){this.Cwt(t,this.YMt)}Iwt(){this.VMt=this.kc.R0()}jmt(t){this.KMt=!!t,this.Nwt(),this.Ewt();for(const t of this.swt)t.jmt();if(this.Crt.length>0){let t=!1;for(const s of this.Crt)s.jmt(),s.Dwt()&&(t=!0);t?(this.ewt=this._wt,this.nwt=this.Awt):(this.ewt=this.Lwt,this.nwt=this.Owt)}const s=this.iwt;for(let t=0,i=s.length;t<i;++t){const e=t<i-1&&s[t+1]instanceof Hy.cMt&&s[t+1].CMt();s[t].jmt(e)}this.cwt&&this.Rwt(),this.eMt&&this.Pwt().Qgt().children.push(this.eMt)}Qgt(){return this.eMt}Pwt(){let t=this.OJ();for(;t;){if(t.byt())return t;t=t.OJ()}return this.L4}Rwt(){const t=this.cwt;t.pwt=this.swt.every((t=>t.PMt())),t.mwt=this.Crt.every((t=>t.PMt())),t.ywt=this.iwt.every((t=>t.PMt())),t.gwt=t.pwt&&t.mwt&&t.ywt}kwt(){let t=this;do{t.Rwt(),t=t.OJ()}while(t)}Nwt(){if(!this.byt())return;let t=this.OJ();for(this.ZMt=!0;t;){if(!t.byt()){this.ZMt=!1;break}t=t.OJ()}}Fwt(){const t=this.kc.R0();if(this.VMt===t)this.YMt=t;else{this.YMt=Hy.Ah(this.VMt);let t=this.OJ();for(;t;){for(const s of t.VMt)this.Gwt(s);t=t.OJ()}const s=this.jk();this.VMt=s.Zmt(this.VMt),this.YMt=s.Zmt(this.YMt)}}Ewt(){if(!this.jwt())return;this.twt=[];let t=this.OJ();for(;t;)this.twt.push(t),t=t.OJ();this.twt.reverse()}zwt(){this.qMt=!0,this.QMt&&this.QMt.zwt()}Wpt(){return this.qMt}Iq(){return this.VMt}Qk(){return this.HMt||(this.HMt=!0,this.Fwt()),this.YMt}Bwt(t){return this.VMt.includes(t)}jMt(){return this.twt}g3(){return this.L4}jk(){return this.L4.jk()}Fj(){return this.kc}OJ(){return this.QMt}Uwt(t){this.JMt=t}hyt(){return this.JMt||this.QMt}Wwt(){return this.lwt}Qwt(){return this.cwt&&this.cwt.dwt}Jwt(){return this.Qwt()&&this.cwt.fwt}Vwt(t){this.cwt.fwt=!!t,this.kwt()}byt(){return this.rwt}Ywt(){return this.ZMt}CMt(){return this.$Mt}Hwt(){return this.KMt}Umt(){return this.owt}Fgt(){return this.awt}Cyt(){this.jgt(this.hwt)}jgt(t){if(t=!!t,!this.rwt)throw new Error("not a group");if(this.awt!==t){this.awt=t;for(const t of this.uwt)t.qwt();if(this.uwt.length){const t=this.kc.aj().g3();t&&t.J3()}}}W0(){return this.f$}upt(){return this.XMt}dMt(){return this.swt.length&&this.swt[0].dMt()}Zwt(){return this.JMt&&this.JMt instanceof Hy.Vgt}jwt(){return this.Zwt()||this.swt.some((t=>t.dMt()))}fMt(){return this.swt}Qpt(){return this.swt.length}syt(t){if((t=Math.floor(t))<0||t>=this.swt.length)throw new RangeError("invalid condition index");return this.swt[t]}Kwt(t){return this.syt(t)}Xwt(t){let s=t.$P();if(0===s)return!0;--s;const i=t.$wt()?t.tSt():t.BW();for(;s>=0;--s){const t=this.swt[s];if(i===t.BW()||t.$wt()&&t.tSt()===i)return!1}return!0}sSt(){return this.Crt}iSt(){return this.Crt.length}eyt(t){if((t=Math.floor(t))<0||t>=this.Crt.length)throw new RangeError("invalid action index");return this.Crt[t]}eSt(t){t=Math.floor(t);const s=this.Crt.find((s=>s.nSt()===t));if(!s)throw new RangeError("invalid action debug index");return s}rSt(t){return(t=Math.floor(t))>=0&&t<this.Crt.length}hSt(){return this.iwt}oyt(){return this.iwt.filter((t=>t instanceof Hy.gMt))}zMt(t){t.Ept(this);const s=this.swt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t._pt(e),n.tY())throw new Error("trigger cannot be used as sub-event to a loop");if(n.XN())i=!0;else if(!this.XMt)return!1}return!this.XMt||i}BMt(t,s){t.Ept(this),t._pt(s),this.swt[s].XN()&&(this.ewt(t,0)&&this.oSt(t),t.Opt(!0))}*UMt(t){t.Ept(this);const s=this.swt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t._pt(e),n.tY())throw new Error("trigger cannot be used as sub-event to a loop");let r;if(r=n.PMt()?n.XN():yield*n.Oyt(),r)i=!0;else if(!this.XMt)return!1}return!this.XMt||i}*WMt(t,s){t.Ept(this),t._pt(s);const i=this.swt[s];let e;if(e=i.PMt()?i.XN():yield*i.Oyt(),e){let s;s=this.aSt()?this.ewt(t,0):yield*this.nwt(t,0),s&&(this.uSt()?this.oSt():yield*this.lSt()),t.Opt(!0)}}XN(t){t.Ept(this),this.$Mt||t.Ppt(!1),this.XMt?this.cSt(t):this.fSt(t)}*Oyt(t){(this.Jwt()||this.kc.dSt())&&(yield this),t.Ept(this),this.$Mt||t.Ppt(!1),this.XMt?yield*this.pSt(t):yield*this.mSt(t)}cSt(t){const s=this.swt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.dMt())continue;t._pt(e);const r=n.XN();i=i||r}t.Opt(i),i&&(this.ewt(t,0)&&this.oSt(t),this.KMt&&t.Ppt(!0))}*pSt(t){const s=this.swt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.dMt())continue;let r;t._pt(e),r=n.PMt()?n.XN():yield*n.Oyt(),i=i||r}if(t.Opt(i),i){let s;s=this.aSt()?this.ewt(t,0):yield*this.nwt(t,0),s&&(this.uSt()?this.oSt():yield*this.lSt()),this.KMt&&t.Ppt(!0)}}fSt(t){const s=this.swt;for(let i=0,e=s.length;i<e;++i){const e=s[i];if(t._pt(i),!e.XN())return void t.Opt(!1)}t.Opt(!0),this.ewt(t,0)&&this.oSt(t),t.Rpt()&&this.KMt&&t.Ppt(!0)}*mSt(t){const s=this.swt;for(let i=0,e=s.length;i<e;++i){const e=s[i];let n;if(t._pt(i),n=e.PMt()?e.XN():yield*e.Oyt(),!n)return void t.Opt(!1)}let i;t.Opt(!0),i=this.aSt()?this.ewt(t,0):yield*this.nwt(t,0),i&&(this.uSt()?this.oSt():yield*this.lSt()),t.Rpt()&&this.KMt&&t.Ppt(!0)}Lwt(t,s){const i=this.Crt;for(let e=s,n=i.length;e<n;++e){const s=i[e];t.Lpt(e),s.XN()}return!0}*Owt(t,s){const i=this.Crt;for(let e=s,n=i.length;e<n;++e){const s=i[e];t.Lpt(e),s.PMt()?s.XN():yield*s.Oyt()}return!0}_wt(t,s){const i=this.jk(),e=this.Crt;for(let n=s,r=e.length;n<r;++n){const s=e[n];t.Lpt(n);const r=s.XN();if(s.ySt()&&!0===r)return!1;s.gSt()&&r instanceof Promise&&i.fgt(r)}return!0}*Awt(t,s){const i=this.jk(),e=this.Crt;for(let n=s,r=e.length;n<r;++n){const s=e[n];let r;if(t.Lpt(n),r=s.PMt()?s.XN():yield*s.Oyt(),s.ySt()&&!0===r)return!1;s.gSt()&&r instanceof Promise&&i.fgt(r)}return!0}MSt(t){this.ewt(t,t.Apt())&&this.oSt()}*wSt(t){(yield*this.nwt(t,t.Apt()))&&(yield*this.lSt())}oSt(){if(!this.iwt.length)return;const t=this.byt()&&this.kc.AMt(),s=t?performance.now():0,i=this.Udt,e=i.Eq(this);this.qMt?this.SSt(e):this.TSt(e),i.zq(),t&&(this.eMt.nMt+=performance.now()-s)}SSt(t){const s=this.rwt,i=this.ZMt,e=this.jk(),n=this.iwt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.Iq(),u=!i||!s&&r<o;u&&e.Oq(a),h.XN(t),u?e.Pq(a):e.Zyt(a)}}TSt(t){const s=this.iwt;for(let i=0,e=s.length;i<e;++i)s[i].XN(t)}*lSt(){if(!this.iwt.length)return;const t=this.Udt,s=t.Eq(this);this.qMt?yield*this.bSt(s):yield*this.vSt(s),t.zq()}*bSt(t){const s=this.rwt,i=this.ZMt,e=this.jk(),n=this.iwt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.Iq(),u=!i||!s&&r<o;u&&e.Oq(a),yield*h.Oyt(t),u?e.Pq(a):e.Zyt(a)}}*vSt(t){const s=this.iwt;for(let i=0,e=s.length;i<e;++i)yield*s[i].Oyt(t)}Rq(t,s){s.Npt();const i=this.swt;if(!this.upt())for(let e=t.Dpt()+1,n=i.length;e<n;++e){const t=i[e];if(s._pt(e),!t.XN())return!1}return this.ewt(s,0)&&this.oSt(s),!0}*xSt(t,s){s.Npt();const i=this.swt;if(!this.upt())for(let e=t.Dpt()+1,n=i.length;e<n;++e){const t=i[e];let n;if(s._pt(e),n=t.PMt()?t.XN():yield*t.Oyt(),!n)return!1}let e;return e=this.aSt()?this.ewt(s,0):yield*this.nwt(s,0),e&&(this.uSt()?this.oSt():yield*this.lSt()),!0}PMt(){return!this.Jwt()&&!this.kc.dSt()&&this.cwt.gwt}aSt(){return!this.kc.dSt()&&this.cwt.mwt}uSt(){return!this.kc.dSt()&&this.cwt.ywt}CSt(t){if(this.OJ()){const s=this.jMt();for(let i=0,e=s.length;i<e;++i)if(!s[i].zMt(t))return!1}return!0}*GSt(t){if(this.OJ()){const s=this.jMt();for(let i=0,e=s.length;i<e;++i)if(!(yield*s[i].UMt(t)))return!1}return!0}ISt(t,s,i){if(s.length>0)if(i){const i=s.map((t=>t.Js(0)));t.nyt().Eq(),this.JMt.NSt(i)}else this.JMt.ESt(s);else i&&t.nyt().Eq()}DSt(t,s,i,e){let n,r;const h=t.length>0;let o=null;const a=this.kc,u=this.Udt,l=a.jk(),c=this.JMt,f=c.gSt(),d=l.Yyt()>1;if(this.ISt(l,s,d),h&&(i?l.Oq(t):l.Xyt(t)),null!==e){if(e._St){const t=i?e._St.LB():e._St.Kyt().Fdt(),s=e.ASt.LB();s.ept(t.AB()),s.opt(),i||e.ASt.LSt()}else if(e.OSt){const t=e.OSt.LB();t.ept(e.RSt),t.opt()}e.PSt&&(o=l.$yt(t))}const p=u.Eq(this);return i&&p.Jpt(t),this.CSt(p)&&(p.Ept(this),f&&([r,n]=c.kSt()),this.fSt(p),f&&c.FSt(r)),u.zq(),d&&l.nyt().zq(),null!==o&&l.Pq(o),h&&l.Pq(t),l.Hyt(),n}*jSt(t,s,i,e){let n,r;(this.Jwt()||this.kc.dSt())&&(yield this);const h=t.length>0;let o=null;const a=this.kc,u=this.Udt,l=a.jk(),c=this.JMt,f=c.gSt(),d=l.Yyt()>1;if(this.ISt(l,s,d),h&&(i?l.Oq(t):l.Xyt(t)),null!==e){if(e._St){const t=i?e._St.LB():e._St.Kyt().Fdt(),s=e.ASt.LB();s.ept(t.AB()),s.opt(),i||e.ASt.LSt()}else if(e.OSt){const t=e.OSt.LB();t.ept(e.RSt),t.opt()}e.PSt&&(o=l.$yt(t))}const p=u.Eq(this);return i&&p.Jpt(t),(yield*this.GSt(p))&&(p.Ept(this),f&&([r,n]=c.kSt()),yield*this.mSt(p),f&&c.FSt(r)),u.zq(),d&&l.nyt().zq(),null!==o&&l.Pq(o),h&&l.Pq(t),l.Hyt(),n}zSt(t,s){const i=this.Qk(),e=i.length>0,n=this.kc,r=this.Udt,h=n.jk(),o=h.Yyt()>1;o&&h.nyt().Eq(),this.JMt.NSt(t),e&&(s?h.Oq(i):h.Xyt(i));const a=r.Eq(this);this.CSt(a)&&(a.Ept(this),this.fSt(a)),r.zq(),o&&h.nyt().zq(),e&&h.Pq(i),h.Hyt()}*BSt(t,s){(this.Jwt()||this.kc.dSt())&&(yield this);const i=this.Qk(),e=i.length>0,n=this.kc,r=this.Udt,h=n.jk(),o=h.Yyt()>1;o&&h.nyt().Eq(),this.JMt.NSt(t),e&&(s?h.Oq(i):h.Xyt(i));const a=r.Eq(this);(yield*this.GSt(a))&&(a.Ept(this),yield*this.mSt(a)),r.zq(),o&&h.nyt().zq(),e&&h.Pq(i),h.Hyt()}Yk(t,s,i,e,...n){let r,h;const o=t.length>0,a=this.kc,u=this.Udt,l=a.jk(),c=this.JMt,f=c.gSt(),d=l.Yyt()>1;d&&l.nyt().Eq(),n.length>0&&this.JMt.NSt(n),o&&(s?l.Oq(t):l.Xyt(t));const p=u.Eq(this);return p.zpt(i,e),u.ypt(p),a.Aq(!1),this.CSt(p)&&(p.Ept(this),f&&([h,r]=c.kSt()),this.fSt(p),f&&c.FSt(h)),a.Aq(!0),u.zq(),u.gpt(),d&&l.nyt().zq(),o&&l.Pq(t),l.Hyt(),r||p.Bpt()}}}{const Ky=self.Gs,Xy=[];let $y=!1;Ky.wMt=class extends Ky.Un{constructor(t,s,i){super();const e=t.Fj(),n=t.jk();this.L4=t,this.cpt=n,this.kc=t.Fj(),this.QMt=s;const r=e.USt(i[1]);this.WSt=r,this.lwt=i[2],this.L4.DMt(this,this.lwt),this.cwt=e._Q()?{fwt:i[3][0],dwt:i[3][1]}:null}static DC(t,s,i){return Ky.Qn(Ky.wMt,t,s,i)}jmt(){const t=this.WSt,s=this.kc.jk().ayt(this);this.WSt=t.bind(null,this.kc.Jz(),s)}OJ(){return this.QMt}hyt(){return this.QMt}g3(){return this.L4}Wwt(){return this.lwt}Qwt(){return this.cwt&&this.cwt.dwt}Jwt(){return this.Qwt()&&this.cwt.fwt}Vwt(t){this.cwt.fwt=!!t}CMt(){return!1}Iq(){return Xy}Qk(){return this.QMt?this.QMt.Qk():Xy}XN(t){t.Ept(this),this.cpt.fgt(this.QSt())}async QSt(){try{await this.WSt()}catch(t){console.error(`Unhandled exception running script %c${this.g3().Nc()}, event ${this.Wwt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.AQ&&self.AQ.JSt(this),$y||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),$y=!0)}}*Oyt(t){t.Ept(this),(this.Jwt()||this.kc.dSt())&&(yield this),this.XN(t)}PMt(){return!this.Jwt()&&!this.kc.dSt()}static VSt(){return $y}static YSt(){$y=!0}}}{const tg=self.Gs;self.assert;tg.Vgt=class extends tg.Un{constructor(t,s,i){super(),this.L4=t,this.kc=t.Fj(),this.QMt=s,this.HSt=0,this.qSt="",this.ZSt=0,this.KSt=[],this.XSt=!0,this.$St="",this.Odt=null,this.tTt=!1,this.sTt=[],this.iTt=!1,this.eTt=!1,this.nTt=0,this.rTt=-1,this.hTt=new Map,this.oTt=tg.cMt.DC(t,s,i),this.oTt.Uwt(this)}aTt(t){this.HSt=0,this.qSt=t[0],this.ZSt=t[1],this.KSt=t[2].map((t=>tg.gMt.DC(this.L4,this,t))),this.XSt=t[3],this.eTt=t[4],this.iTt=t[5]}uTt(t){this.HSt=1,this.$St=t[1],this.Odt=this.kc.f0(t[2]),this.oTt.Swt(this.Odt),this.qSt=this.Odt.Nc()+"."+this.$St,this.ZSt=t[3],this.KSt=t[4].map((t=>tg.gMt.DC(this.L4,this,t))),this.XSt=t[5],this.eTt=t[6],this.iTt=t[7],this.Odt.lTt(this)}static mMt(t,s,i){const e=tg.Qn(tg.Vgt,t,s,i),n=i[1];return e.aTt(n),e}static yMt(t,s,i){const e=tg.Qn(tg.Vgt,t,s,i),n=i[1];return e.uTt(n),e}zmt(){if(this.Odt&&this.Odt.P0())for(const t of this.Odt.$B())if(t.cTt(this.$St)){this.tTt=!0;break}}jmt(){for(const t of this.KSt)t.jmt();this.oTt.jmt(!1)}Ymt(){return this.HSt}oyt(){return this.KSt}Ygt(){return this.KSt}Uk(){return this.KSt.length}fTt(t){this.sTt.push(t)}dTt(){return this.sTt}ESt(t){const s=this.KSt;for(let i=0,e=s.length;i<e;++i)s[i].Ent(t[i].Js(0))}NSt(t){const s=this.KSt;for(let i=0,e=s.length;i<e;++i)s[i].Ent(t[i])}pTt(){return this.KSt.map((t=>t.Yet()))}OJ(){return this.QMt}hyt(){return this.QMt}Hmt(){return this.qSt}mTt(){return this.$St}yTt(){return this.tTt}qk(){return this.ZSt}BW(){return this.Odt}Cl(){return this.XSt}Bk(){switch(this.ZSt){case 0:return null;case 2:return"";default:return 0}}Wk(){return this.oTt}Hk(){return this.iTt}gSt(){return this.eTt}kSt(){const t=this.nTt++;let s;this.rTt=t;const i=new Promise((t=>s=t));return this.hTt.set(t,{resolve:s,gTt:0}),[t,i]}FSt(t){const s=this.hTt.get(t);0===s.gTt&&(s.resolve(),this.hTt.delete(t)),this.rTt=-1}MTt(){return this.hTt.get(this.rTt).gTt++,this.rTt}wTt(t){this.rTt=t,this.hTt.get(t).gTt--}STt(t,s){const i=new Map,e=[];for(const t of this.Odt.LB().AB()){const s=t.BW();if(s.cTt(this.$St)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&this.oTt.DSt(t,s,this.iTt,{OSt:this.Odt,RSt:e}),i.size>0)for(const[e,n]of i){const i=e.TTt(this.$St).Wk(),r=[...new Set([...t,...i.Iq()])];i.DSt(r,s,this.iTt,{OSt:e,RSt:n})}}*bTt(t,s){const i=new Map,e=[];for(const t of this.Odt.LB().AB()){const s=t.BW();if(s.cTt(this.$St)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&(yield*this.oTt.jSt(t,s,this.iTt,{OSt:this.Odt,RSt:e})),i.size>0)for(const[e,n]of i){const i=e.TTt(this.$St).Wk(),r=[...new Set([...t,...i.Iq()])];yield*i.jSt(r,s,this.iTt,{OSt:e,RSt:n})}}}}{const sg=self.Gs,ig=[];sg.gMt=class extends sg.Un{constructor(t,s,i){super();const e=t.jk();this.L4=t,this.cpt=e,this.kc=t.Fj(),this.QMt=s,this.xmt=e.nyt(),this.Hn=i[1],this.Jc=i[2],this.vTt=i[3],this.Xv=!!i[4],this.xTt=!!i[5],this.CTt=s instanceof sg.Vgt,this.f$=i[6],this.GTt=this.kc.uyt(i[8]),this.ITt=t=>this.Ent(t),this.NTt=()=>this.Yet(),this.ETt=!this.QMt||this.Xv||this.xTt,this.Trt=this.vTt,this.DTt=-1,this._Tt()&&(this.Trt=this.Trt?1:0),!this.ATt()||this.Lx()||this.zgt()||(this.DTt=e.Kmt(this)),e.qmt(this)}static DC(t,s,i){return sg.Qn(sg.gMt,t,s,i)}jmt(){if(this.ATt()&&!this.Lx()&&!this.zgt()&&!this.LTt()){const t=this.cpt.Jgt(this);t&&t.fTt(this)}}Nc(){return this.Hn}uyt(){return this.GTt}OJ(){return this.QMt}hyt(){return this.OJ()}b0(){return!this.OJ()}ATt(){return!this.b0()}LTt(){return this.CTt}Lx(){return this.Xv}zgt(){return this.xTt}Xi(){return 0===this.Jc}ae(){return 1===this.Jc}_Tt(){return 2===this.Jc}CMt(){return!1}W0(){return this.f$}Xmt(){return this.vTt}Iq(){return ig}XN(t){!this.ATt()||this.Lx()||this.zgt()||this.Ent(this.Xmt())}PMt(){return!0}*Oyt(t){this.XN(t)}Ent(t){this.Xi()?"number"!=typeof t&&(t=parseFloat(t)):this.ae()?"string"!=typeof t&&(t=t.toString()):this._Tt()&&(t=t?1:0),this.ETt?this.Trt=t:this.xmt.Zpt()[this.DTt]=t}Yet(){return this.ETt?this.Trt:this.xmt.Zpt()[this.DTt]}OTt(){let t=this.Yet();return this._Tt()&&(t=!!t),t}wyt(){this.Trt=this.vTt}lyt(){return{configurable:!1,enumerable:!0,get:this.NTt,set:this.ITt}}}}{const eg=self.Gs,ng=(self.assert,[]);eg.MMt=class extends eg.Un{constructor(t,s,i){super();const e=t.jk();this.L4=t,this.cpt=e,this.kc=t.Fj(),this.QMt=s,this.RTt=null,this.PTt=i[1],this.kf=!0}static DC(t,s,i){return eg.Qn(eg.MMt,t,s,i)}jmt(){this.RTt=this.cpt.Q3(this.PTt),this.L4.GMt(this);let t=this.OJ();for(;t;)t instanceof eg.cMt&&t.byt()&&t.vwt(this),t=t.OJ();this.qwt(),this.kc._Q()&&this.L4.Qgt().children.push(this.RTt.Qgt())}OJ(){return this.QMt}Iq(){return ng}NMt(){return this.RTt}XN(t){const s=!!this.OJ(),i=this.kc.R0();s&&this.cpt.Xyt(i),this.RTt.XN(),s&&this.cpt.Pq(i)}*Oyt(t){const s=!!this.OJ(),i=this.kc.R0();s&&this.cpt.Xyt(i),yield*this.RTt.Oyt(),s&&this.cpt.Pq(i)}PMt(){return!1}EMt(){return this.kf}qwt(){let t=this.OJ();for(;t;){if(t instanceof eg.cMt&&t.byt()&&!t.Fgt())return void(this.kf=!1);t=t.OJ()}this.kf=!0}}}{let rg=function(t,s){return t>=s?t%s:t<0?(t<=-s&&(t%=s),t<0&&(t+=s),t):t};0;const hg=self.Gs;self.assert;hg.kTt=class extends hg.Un{constructor(t){super(),this.cv=t,this.kc=t.Fj()}jmt(){}static FTt(t,s){const i=s[0],e=[cg,ug,lg,fg,og,ag];return hg.Qn(e[i],t,s)}};class og extends hg.kTt{constructor(t,s){super(t),this.jTt=this.kc.KK(),this.WSt=this.kc.USt(s[1]),this.WSt!==hg._j.Dj.Frt.random&&this.WSt!==hg._j.Dj.Frt.zTt||this.cv.BTt()}UTt(){return this.jTt.WTt(this.WSt,this.jTt)}}class ag extends hg.kTt{constructor(t,s){super(t),this.QTt=null,this.qSt=s[1],this.cv.BTt()}jmt(){const t=this.kc.jk();this.QTt=t.zk(this.qSt),this.qSt=null;const s=this.cv.Wk(),i=this.QTt.Wk();this.JTt=[...new Set([...s.Qk(),...i.Qk()])],this.JTt=t.Zmt(this.JTt)}UTt(){const t=this.QTt;if(t.Cl()){const s=t.Wk();return hg.cMt.prototype.Yk.bind(s,this.JTt,t.Hk(),t.qk(),t.Bk())}{const s=t.Bk();return()=>s}}}class ug extends hg.kTt{constructor(t,s){super(t),this.Odt=this.kc.f0(s[1]),this.WSt=this.kc.USt(s[2]),this.VTt=!!s[3],this.Udt=this.kc.jk().Xk(),this.cv.YTt(this.Odt)}UTt(){return this.Odt.TB().WTt(this.WSt,this.Odt.MB().DV())}HTt(...t){const s=this.Odt,i=s.LB().Zdt(),e=i.length;if(0===e)return this.VTt?"":0;const n=rg(this.cv.qTt(),e);return this.Udt.Nq().Fpt(s),this.WSt.apply(i[n].DV(),t)}ZTt(t,...s){const i=this.Odt,e=i.AB(),n=e.length;if(0===n||"number"!=typeof t)return this.VTt?"":0;const r=rg(t,n);return this.Udt.Nq().Fpt(i),this.WSt.apply(e[r].DV(),s)}}class lg extends hg.kTt{constructor(t,s){super(t),this.Odt=this.kc.f0(s[1]),this.KTt=s[3],this.VTt=!!s[2],this.cv.YTt(this.Odt)}XTt(){const t=this.Odt.LB().Zdt(),s=t.length;return 0===s?this.VTt?"":0:t[rg(this.cv.qTt(),s)].$Tt(this.KTt)}tbt(){const t=this.Odt,s=t.LB().Zdt(),i=s.length;if(0===i)return this.VTt?"":0;const e=s[rg(this.cv.qTt(),i)],n=e.BW().sbt(t.ibt());return e.$Tt(this.KTt+n)}ebt(t){const s=this.Odt,i=s.AB(),e=i.length;if(0===e||"number"!=typeof t)return this.VTt?"":0;const n=i[rg(t,e)];let r=0;return s.P0()&&(r=n.BW().sbt(s.ibt())),n.$Tt(this.KTt+r)}}class cg extends hg.kTt{constructor(t,s){super(t),this.Odt=this.kc.f0(s[1]),this.nbt=this.Odt.$nt(s[2]),this.rbt=this.Odt.bit(s[2]),this.WSt=this.kc.USt(s[3]),this.VTt=!!s[4],this.Udt=this.kc.jk().Xk(),this.cv.YTt(this.Odt)}hbt(...t){const s=this.Odt,i=s.LB().Zdt(),e=i.length;if(0===e)return this.VTt?"":0;const n=rg(this.cv.qTt(),e);this.Udt.Nq().Fpt(s);const r=i[n];let h=0;return s.P0()&&(h=r.BW().obt(s.ibt())),this.WSt.apply(r.Xnt()[this.rbt+h].DV(),t)}abt(t,...s){const i=this.Odt,e=i.AB(),n=e.length;if(0===n||"number"!=typeof t)return this.VTt?"":0;const r=rg(t,n);this.Udt.Nq().Fpt(i);const h=e[r];let o=0;return i.P0()&&(o=h.BW().obt(i.ibt())),this.WSt.apply(h.Xnt()[this.rbt+o].DV(),s)}}class fg extends hg.kTt{constructor(t,s){super(t),this.ubt=null,this.lbt=s[1]}jmt(){this.ubt=this.kc.jk().cyt(this.lbt)}cbt(){return this.ubt}}}{let dg=function(t){const s=self.fbt[t];if(!s)throw new Error("invalid expression number");return s};0;const pg=self.Gs;self.assert;pg.dbt=class extends pg.Un{constructor(t,s,i){super(),this.cv=t,this.IM=i,this.Jc=s,this.Js=null,this.pbt=!1,this.xTt=!1}static DC(t,s,i){const e=s[0],n=[mg,yg,vg,Mg,Sg,gg,Tg,mg,Mg,Mg,xg,Cg,vg,Ig,yg,bg,wg,Gg,Ng,Eg,Dg,_g];return pg.Qn(n[e],t,e,i,s)}jmt(){}BTt(){this.pbt=!0}YTt(t){this.pbt||t&&(t.TB().qz()||(this.pbt=!0))}mbt(){return this.pbt}$P(){return this.IM}Fj(){return this.cv.Fj()}Wk(){return this.cv.Wk()}zgt(){return this.xTt}ybt(){return 4===this.Jc}};class mg extends pg.dbt{constructor(t,s,i,e){super(t,s,i),this.gbt=0;const n=e[1];this.Mbt=n[0],this.wbt=[],this.Sbt=null;for(let t=1,s=n.length;t<s;++t)this.wbt.push(pg.kTt.FTt(this,n[t]));this.wbt.length?this.Js=this.Tbt:(this.Js=dg(this.Mbt),this.xTt=!0)}bbt(t){if(t<0||t>=this.wbt.length)throw new RangeError("invalid numbered node");return this.wbt[t]}jmt(){for(const t of this.wbt)t.jmt();const t=dg(this.Mbt);this.wbt.length?this.Sbt=t(this):this.Sbt=t}qTt(){return this.gbt}Tbt(t){return this.gbt=t,this.Sbt()}}class yg extends mg{constructor(t,s,i,e){super(t,s,i,e),this.Js=this.vbt,14===s&&(this.Wk().Iwt(),this.cv instanceof pg.Twt&&this.Wk().zwt())}vbt(t){this.gbt=t;const s=this.Sbt();return"string"==typeof s?s:""}xbt(){return dg(this.Mbt)()}}class gg extends mg{constructor(t,s,i,e){super(t,s,i,e),t.Cbt()>=2?this.Js=this.gU:this.Js=this.cj,this.xTt=!1}cj(t){this.gbt=t;const s=this.Sbt();return this.Fj().aj().cj(s)}gU(t){const s=this.cj(t);return s?s.gU():null}}class Mg extends pg.dbt{constructor(t,s,i,e){super(t,s,i),this.Gbt=e[1],this.Js=this.Ibt,this.xTt=!0}Ibt(){return this.Gbt}}class wg extends pg.dbt{constructor(t,s,i,e){super(t,s,i),this.Nbt=e[1],this.Js=this.Ebt,this.xTt=!0}Ebt(){return this.Nbt}}class Sg extends pg.dbt{constructor(t,s,i,e){super(t,s,i),this.Odt=this.Fj().f0(e[1]),t.Cbt()>=2?this.Js=this.mB:this.Js=this.BW;const n=this.Wk();n.Swt(this.Odt),this.cv instanceof pg.Twt?n.zwt():n.OJ()&&n.OJ().zwt(),this.xTt=!0}BW(){return this.Odt}mB(){return this.Odt?this.Odt.mB():null}}class Tg extends pg.dbt{constructor(t,s,i,e){super(t,s,i),this.a$=this.Fj().JF().Y5(e[1]),t.Cbt()>=2?this.Js=this.WF:this.Js=this.VF,this.xTt=!0}VF(){return this.a$}WF(){return this.a$?this.a$.WF():null}}class bg extends pg.dbt{constructor(t,s,i,e){super(t,s,i),this.t7=this.Fj().att().r8(e[1]),t.Cbt()>=2?this.Js=this.zst:this.Js=this.oit,this.xTt=!0}oit(){return this.t7}zst(){return this.t7?this.t7.zst():null}}class vg extends pg.dbt{constructor(t,s,i,e){super(t,s,i),this.Dbt=e[1],this.Js=this._bt,this.xTt=!0}_bt(){return this.Dbt}}class xg extends pg.dbt{constructor(t,s,i,e){super(t,s,i),this.Abt=e[1];const n=this.cv.BW();this.cv instanceof pg.wwt&&this.cv.Lx()?(this.Js=this.Lbt,this.xTt=!0):n&&n.P0()?(this.Js=this.Obt,this.BTt()):(this.Js=this.Lbt,this.xTt=!0)}Lbt(){return this.Abt}Obt(t){t=t||0;const s=this.cv.BW(),i=s.LB(),e=i.AB();let n=null;if(e.length)n=e[t%e.length].BW();else if(i.Hdt()){const s=i.qdt();n=s[t%s.length].BW()}else{if(!(s.PB()>0))return 0;{const i=s.AB();n=i[t%i.length].BW()}}return this.Abt+n.sbt(s.ibt())}}class Cg extends pg.dbt{constructor(t,s,i,e){super(t,s,i),this.lbt=e[1],this.ubt=null,t.Cbt()>=2?this.Js=this.Rbt:this.Js=this.Pbt,this.xTt=!0}jmt(){this.ubt=this.Fj().jk().cyt(this.lbt)}Pbt(){return this.ubt}Rbt(){return null}}class Gg extends pg.dbt{constructor(t,s,i,e){super(t,s,i),this.kbt=e[1],this.QTt=null,t.Cbt()>=2?this.Js=this.Fbt:this.Js=this.jbt,this.xTt=!0}jmt(){this.QTt=this.Fj().jk().zk(this.kbt),this.kbt=null}jbt(){return this.QTt}Fbt(){return null}}class Ig extends pg.dbt{constructor(t,s,i,e){super(t,s,i),this.zbt=[],this.Bbt=[],this.xTt=!0;for(let t=1,s=e.length;t<s;++t){const s=pg.dbt.DC(this.cv,e[t],0);this.zbt.push(s),this.Bbt.push(0),s.zgt()||(this.xTt=!1)}this.Js=this.Ubt}jmt(){for(const t of this.zbt)t.jmt()}Ubt(){const t=this.zbt,s=this.Bbt;for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(0);return s}}class Ng extends pg.dbt{constructor(t,s,i,e){super(t,s,i),this.Wbt=e[1],this.Js=this.Nnt,this.xTt=!0}Nnt(){return this.Wbt}}class Eg extends pg.dbt{constructor(t,s,i,e){super(t,s,i),this.Qbt=e[1],this.Js=this.Jbt,this.xTt=!0}Jbt(){return this.Qbt}}class Dg extends mg{constructor(t,s,i,e){super(t,s,i,e),this.Js=this.nQ,this.xTt=!1}nQ(){return this.Sbt()}}class _g extends pg.dbt{constructor(t,s,i,e){super(t,s,i),this.Zlt=this.Fj().pct().Qlt(e[1]),this.Js=this.Vbt,this.xTt=!0}Vbt(){return this.Zlt.Nc()}}}{let Ag=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(0)};0;const Lg=self.Gs,Og=(self.assert,[]),Rg=function(){};Lg.wwt=class extends Lg.Un{constructor(t,s,i){if(super(),this.oTt=t,this.kc=t.Fj(),this.IM=i,this.WSt=this.kc.USt(s[1]),this.Ybt=s[3]>0,this.Hbt=2===s[3],this.qbt=!!s[4],this.Zbt=!!s[5],this.Xv=!!s[6],this.f$=s[7],this.Kbt=this.oTt.upt(),this.Odt=null,this.nbt=null,this.rbt=-1,this.jTt=null,this.XN=Rg,this.Oyt=Rg,this.zs=[],this.Xbt=[],this.$bt=!1,this.tvt=null,this.svt=null,this.cwt=this.kc._Q()?{fwt:s[8][0],ivt:s[8][1]}:null,-1===s[0]?this.jTt=this.kc.KK():(this.Odt=this.kc.f0(s[0]),s[2]&&(this.nbt=this.Odt.$nt(s[2]),this.rbt=this.Odt.bit(s[2])),this.oTt.OJ()&&this.oTt.OJ().zwt()),10===s.length){let t=s[9];for(let s of t)this.zs.push(Lg.dbt.DC(this,s,this.zs.length)),this.Xbt.push(0)}0===this.zs.length&&(this.zs=Og,this.Xbt=Og),this.oTt.jk().Qmt(this)}static DC(t,s,i){return Lg.Qn(Lg.wwt,t,s,i)}jmt(){for(const t of this.zs)t.jmt(),t.mbt()&&(this.$bt=!0);this.Hbt?(this.XN=this.evt,this.Oyt=this.nvt):this.jTt?(this.rvt(),this.Oyt=this.hvt):this.Odt.TB().qz()?(this.ovt(),this.Oyt=this.avt):this.Xv?(this.XN=this.uvt,this.Oyt=this.lvt):(this.XN=this.cvt,this.Oyt=this.fvt)}rvt(){const t=this.jTt,s=this.jTt;this.dvt(t,s,this.pvt)}ovt(){const t=this.Odt.TB(),s=this.Odt.MB().DV();this.dvt(t,s,this.mvt)}dvt(t,s,i){const e=this.WSt,n=this.Zbt,r=this.zs;if(0===r.length){const i=t.WTt(e,s);this.XN=n?function(){return Lg.xor(i(),n)}:i}else if(1===r.length){const i=r[0];if(!n&&i.zgt())this.XN=t.yvt(e,s,i.Js(0));else{const r=t.WTt(e,s);this.XN=function(){return Lg.xor(r(i.Js(0)),n)}}}else if(2===r.length){const i=r[0],h=r[1];if(!n&&i.zgt()&&h.zgt())this.XN=t.gvt(e,s,i.Js(0),h.Js(0));else{const r=t.WTt(e,s);this.XN=function(){return Lg.xor(r(i.Js(0),h.Js(0)),n)}}}else if(3===r.length){const i=r[0],h=r[1],o=r[2];if(!n&&i.zgt()&&h.zgt()&&o.zgt())this.XN=t.Mvt(e,s,i.Js(0),h.Js(0),o.Js(0));else{const r=t.WTt(e,s);this.XN=function(){return Lg.xor(r(i.Js(0),h.Js(0),o.Js(0)),n)}}}else this.XN=i}W0(){return this.f$}SMt(){return this.WSt}BW(){return this.Odt}zV(){return this.nbt}wvt(){return this.nbt?this.nbt.kV():this.Odt?this.Odt.TB():null}Cbt(){const t=this.wvt();return t?t.Svt():1}Wk(){return this.oTt}Fj(){return this.kc}$P(){return this.IM}nSt(){return this.$P()}dMt(){return this.Ybt}TMt(){return this.Hbt}Tvt(){return this.Zbt}tY(){return this.qbt}Lx(){return this.Xv}bvt(){return this.cwt.fwt}vvt(){return!!this.jTt}$wt(){return this.vvt()||this.Odt.TB().qz()}tSt(){for(const t of this.zs)if(t.ybt())return t.BW();return null}xvt(t){this.cwt.fwt=!!t,this.oTt.kwt()}Cvt(){return this.cwt.ivt}PMt(){return!this.bvt()&&!this.kc.dSt()&&!this.Cvt()}Gvt(){return this.tvt||(this.tvt=new Map),this.tvt}Ivt(){return this.svt||(this.svt=new Map),this.svt}pvt(){const t=this.Xbt;return Ag(this.zs,t),Lg.xor(this.WSt.apply(this.jTt,t),this.Zbt)}*hvt(){if((this.bvt()||this.kc.dSt())&&(yield this),this.Cvt()){const t=this.Xbt;Ag(this.zs,t);let s=this.WSt.apply(this.jTt,t);return Lg.To(s)&&(s=yield*s),Lg.xor(s,this.Zbt)}return this.XN()}mvt(){const t=this.Xbt;Ag(this.zs,t);const s=this.Odt.MB().DV();return Lg.xor(this.WSt.apply(s,t),this.Zbt)}*avt(){if((this.bvt()||this.kc.dSt())&&(yield this),this.Cvt()){const t=this.Xbt;Ag(this.zs,t);const s=this.Odt.MB().DV();let i=this.WSt.apply(s,t);return Lg.To(i)&&(i=yield*i),Lg.xor(i,this.Zbt)}return this.XN()}evt(){return!0}*nvt(){return(this.bvt()||this.kc.dSt())&&(yield this),!0}Nvt(){return this.nbt?this.nbt.kV().Svt()>=2?this.nbt.jV():this.nbt:this.Odt.TB().Svt()>=2?this.Odt.mB():this.Odt}uvt(){const t=this.Xbt;Ag(this.zs,t);const s=this.WSt.apply(this.Nvt(),t);return this.Odt.LSt(),s}*lvt(){if((this.bvt()||this.kc.dSt())&&(yield this),this.Cvt()){const t=this.Xbt;Ag(this.zs,t);let s=this.WSt.apply(this.Nvt(),t);return Lg.To(s)&&(s=yield*s),this.Odt.LSt(),s}return this.XN()}cvt(){const t=this.zs,s=this.Xbt,i=this.Odt.LB();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.mbt()||(s[i]=e.Js(0))}return i.Vdt()?this.Evt(i):this.Dvt(i)}*fvt(){return(this.bvt()||this.kc.dSt())&&(yield this),this.cvt()}_vt(t){const s=this.zs,i=this.Xbt;for(let e=0,n=s.length;e<n;++e){const n=s[e];n.mbt()&&(i[e]=n.Js(t))}}Evt(t){const s=this.Odt,i=s.P0(),e=s.ibt(),n=this.rbt,r=n>=0,h=s.AB(),o=this.$bt,a=this.Xbt,u=this.WSt,l=this.Zbt,c=this.Kbt&&!this.Ybt;t.Jdt();for(let s=0,f=h.length;s<f;++s){const f=h[s];let d;if(o&&this._vt(s),r){const t=i?f.BW().obt(e):0;d=u.apply(f.Xnt()[n+t].DV(),a)}else d=u.apply(f.DV(),a);Lg.xor(d,l)?t.Kdt(f):c&&t.Xdt(f)}return s.Avt(!0),t.$dt(!1),s.LSt(),t.Ydt()}Dvt(t){const s=this.Odt,i=s.P0(),e=s.ibt(),n=s.XW(),r=this.rbt,h=r>=0,o=this.$bt,a=this.Xbt,u=this.WSt,l=this.Zbt,c=this.Kbt&&!this.Ybt,f=t.tpt(),d=t.spt(),p=c&&!this.oTt.Xwt(this),m=p?d:f;let y=0,g=!1;for(let t=0,s=m.length;t<s;++t){const s=m[t];let M;if(o&&this._vt(t),h){const t=i?s.BW().obt(e):0;M=u.apply(s.Xnt()[r+t].DV(),a)}else M=u.apply(s.DV(),a);Lg.xor(M,l)?(g=!0,p?(f.push(s),n&&s.Lvt()):(m[y]=s,n&&s.Ovt(y),++y)):p?(m[y]=s,n&&s.Rvt(y),++y):c&&(d.push(s),n&&s.Pvt())}Lg.Mh(m,y),n&&s.kvt(p,y);const M=g;return p&&!g&&(g=this.Fvt(f)),s.Avt(M||c),c?g:t.Ydt()}Fvt(t){const s=this.Odt,i=s.P0(),e=s.ibt(),n=this.$bt,r=this.rbt,h=r>=0,o=this.Xbt,a=this.WSt,u=this.Zbt;for(let s=0,l=t.length;s<l;++s){const l=t[s];let c;if(n&&this._vt(s),h){const t=i?l.BW().obt(e):0;c=a.apply(l.Xnt()[r+t].DV(),o)}else c=a.apply(l.DV(),o);if(Lg.xor(c,u))return!0}return!1}jvt(t,s){return this.zs[t].Js(s)}bMt(){const t=this.zs;if(!t.length)throw new Error("no parameters");return t[0].xbt()}w4(){if(!this.tvt||!this.tvt.size)return null;const t={};for(const[s,i]of this.tvt.entries()){let e=i;"collmemory"===s&&(e=[...i.entries()].map((t=>[t[0].tQ(),t[1].tQ(),t[2]]))),t[s]=e}return{ex:t}}S4(t){if(this.tvt&&(this.tvt.clear(),this.tvt=null),!t)return;const s=this.kc,i=t.ex;if(i){const t=this.Gvt();t.clear();for(const[e,n]of Object.entries(i)){let i=n;"collmemory"===e&&(i=Lg.Qn(Lg.Gl,n.map((t=>[s.rj(t[0]),s.rj(t[1]),t[2]])).filter((t=>t[0]&&t[1])))),t.set(e,i)}}}}}{let Pg=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(0)};0;const kg=self.Gs,Fg=(self.assert,[]),jg=function(){},zg=function*(){};kg.Twt=class extends kg.Un{constructor(t,s,i){super(),this.oTt=t;const e=t.Fj();this.kc=e,this.IM=i,this.f$=s.length>=4?s[3]:-1,this.zvt=s.length>=5?255&s[4]:0,this.Bvt=s.length>=5?s[4]>>8:0,this.WSt=null,this.Odt=null,this.nbt=null,this.rbt=-1,this.jTt=null,this.Uvt="",this.Wvt=null,this.Qvt=null,this.XN=jg,this.Oyt=jg,this.zs=[],this.Xbt=[],this.$bt=!1,this.tvt=null,this.svt=null;const n=-3===s[0],r=n?s[2]:s[5];if(this.cwt=e._Q()||n?{fwt:r[0],ivt:r[1],index:r[2]}:null,-1===s[0])this.jTt=e.KK(),this.WSt=e.USt(s[1]);else if(-2===s[0])this.Uvt=s[1];else if(n){const t=e.USt(s[1]);this.WSt=t,this.XN=this.Jvt,this.Oyt=this.Vvt,this.Bvt|=8}else this.Odt=e.f0(s[0]),4&this.Bvt?(this.Uvt=s[1],this.Wvt=e.f0(s[2])):(s[2]&&(this.nbt=this.Odt.$nt(s[2]),this.rbt=this.Odt.bit(s[2])),this.WSt=e.USt(s[1]));if(7===s.length){const t=s[6];for(const s of t)this.zs.push(kg.dbt.DC(this,s,this.zs.length)),this.Xbt.push(0)}0===this.zs.length&&(this.zs=Fg,this.Xbt=Fg),this.Yvt()&&(this.oTt.Iwt(),this.oTt.zwt()),this.oTt.jk().Jmt(this)}static DC(t,s,i){return kg.Qn(kg.Twt,t,s,i)}jmt(){for(const t of this.zs)t.jmt(),t.mbt()&&(this.$bt=!0);if(this.jTt)this.rvt(),this.Oyt=this.hvt;else if(this.Uvt)4&this.Bvt?this.Hvt():this.qvt(),this.Uvt="",this.Wvt=null;else if(this.XN===this.Jvt){const t=this.WSt,s=this.kc.jk().ayt(this.oTt);this.WSt=t.bind(null,this.kc.Jz(),s)}else this.nbt?this.gSt()?(this.XN=this.Zvt,this.Oyt=this.Kvt):(this.XN=this.Xvt,this.Oyt=this.$vt):this.Odt.TB().qz()?(this.ovt(),this.Oyt=this.avt):this.Lx()?(this.XN=this.txt,this.Oyt=this.sxt):this.gSt()?(this.XN=this.ixt,this.Oyt=this.nxt):this.rxt()?(this.XN=this.hxt,this.Oyt=this.oxt):this.zs.length?this.zs.every((t=>t.mbt()))?(this.XN=this.axt,this.Oyt=this.uxt):this.$bt?(this.XN=this.lxt,this.Oyt=this.cxt):this.zs.every((t=>t.zgt()))?(Pg(this.zs,this.Xbt),this.XN=this.fxt,this.Oyt=this.dxt):(this.XN=this.pxt,this.Oyt=this.mxt):(this.XN=this.fxt,this.Oyt=this.dxt)}rvt(){const t=this.jTt,s=this.jTt;this.dvt(t,s,this.pvt)}ovt(){const t=this.Odt.TB(),s=this.Odt.MB().DV();this.dvt(t,s,this.mvt)}qvt(){const t=this.oTt.jk(),s=t.zk(this.Uvt);if(s.Cl()){const i=!!(2&this.Bvt);this.Qvt=s.Wk();let e=[...new Set([...this.oTt.Qk(),...this.Qvt.Qk()])];e=t.Zmt(e);const n=!s.Hk()&&this.yxt()?{PSt:!0}:null;if(this.XN=kg.cMt.prototype.DSt.bind(this.Qvt,e,this.zs,i,n),this.kc._Q()){const t=this;this.Oyt=function*(){return(t.bvt()||t.kc.dSt())&&(yield t),yield*t.Qvt.jSt(e,t.zs,i,n)}}else this.Oyt=zg}else this.XN=jg,this.Oyt=zg}Hvt(){const t=this.oTt.jk(),s=t.myt(this.Wvt,this.Uvt);if(s.Cl()){const i=!!(2&this.Bvt);this.Qvt=s.Wk();let e=[...new Set([...this.oTt.Qk(),...this.Qvt.Qk(),this.Odt,s.BW()])];e=t.Zmt(e);const n=!this.Odt.P0()&&!s.BW().P0(),r=!this.Odt.P0()&&s.BW().P0(),h=this.Odt.P0();let o=null;if(!s.Hk()&&this.yxt()&&(o=o||{},o.PSt=!0),!r&&i||(o=o||{},o._St=this.Odt,o.ASt=s.BW()),n||r||h&&!s.yTt()?this.XN=kg.cMt.prototype.DSt.bind(this.Qvt,e,this.zs,i,o):h&&(this.XN=kg.Vgt.prototype.STt.bind(s,e,this.zs)),this.kc._Q()){const t=this;n||r||h&&!s.yTt()?this.Oyt=function*(){return(t.bvt()||t.kc.dSt())&&(yield t),yield*t.Qvt.jSt(e,t.zs,i,o)}:h&&(this.Oyt=function*(){return(t.bvt()||t.kc.dSt())&&(yield t),yield*s.bTt(e,t.zs)})}else this.Oyt=zg}else this.XN=jg,this.Oyt=zg}dvt(t,s,i){const e=this.WSt,n=this.zs;if(0===n.length)this.XN=t.WTt(e,s);else if(1===n.length){const i=n[0];if(i.zgt())this.XN=t.yvt(e,s,i.Js(0));else{const n=t.WTt(e,s);this.XN=function(){return n(i.Js(0))}}}else if(2===n.length){const i=n[0],r=n[1];if(i.zgt()&&r.zgt())this.XN=t.gvt(e,s,i.Js(0),r.Js(0));else{const n=t.WTt(e,s);this.XN=function(){return n(i.Js(0),r.Js(0))}}}else if(3===n.length){const i=n[0],r=n[1],h=n[2];if(i.zgt()&&r.zgt()&&h.zgt())this.XN=t.Mvt(e,s,i.Js(0),r.Js(0),h.Js(0));else{const n=t.WTt(e,s);this.XN=function(){return n(i.Js(0),r.Js(0),h.Js(0))}}}else this.XN=i}W0(){return this.f$}gSt(){return!!(8&this.Bvt)}ySt(){return!!(16&this.Bvt)}rxt(){return 1===this.zvt}Lx(){return 2===this.zvt}Yvt(){return!!(1&this.Bvt)}Dwt(){return this.gSt()||this.ySt()}BW(){return this.Odt}wvt(){return this.nbt?this.nbt.kV():this.Odt?this.Odt.TB():null}Cbt(){const t=this.wvt();return t?t.Svt():1}Wk(){return this.oTt}yxt(){let t=this.oTt;do{if(t instanceof kg.Vgt&&t.Hk())return!0;t=t.hyt()}while(t);return!1}Fj(){return this.kc}$P(){return this.IM}nSt(){return this.cwt.index}bvt(){return this.cwt.fwt}xvt(t){this.cwt.fwt=!!t,this.oTt.kwt()}Cvt(){return this.cwt.ivt}PMt(){return!this.bvt()&&!this.kc.dSt()&&!this.Cvt()}Gvt(){return this.tvt||(this.tvt=new Map),this.tvt}Ivt(){return this.svt||(this.svt=new Map),this.svt}pvt(){const t=this.Xbt;return Pg(this.zs,t),this.WSt.apply(this.jTt,t)}*hvt(){if((this.bvt()||this.kc.dSt())&&(yield this),this.Cvt()){const t=this.Xbt;return Pg(this.zs,t),yield*this.WSt.apply(this.jTt,t)}return this.XN()}mvt(){const t=this.Xbt;return Pg(this.zs,t),this.WSt.apply(this.Odt.MB().DV(),t)}*avt(){if((this.bvt()||this.kc.dSt())&&(yield this),this.Cvt()){const t=this.Xbt;return Pg(this.zs,t),yield*this.WSt.apply(this.Odt.MB().DV(),t)}return this.XN()}fxt(){const t=this.Xbt,s=this.Odt.LB().AB();for(let i=0,e=s.length;i<e;++i)this.WSt.apply(s[i].DV(),t)}*dxt(){if((this.bvt()||this.kc.dSt())&&(yield this),this.Cvt()){const t=this.Xbt,s=this.Odt.LB().AB();for(let i=0,e=s.length;i<e;++i)yield*this.WSt.apply(s[i].DV(),t)}else this.fxt()}pxt(){const t=this.Xbt;Pg(this.zs,t);const s=this.Odt.LB().AB();for(let i=0,e=s.length;i<e;++i)this.WSt.apply(s[i].DV(),t)}*mxt(){if((this.bvt()||this.kc.dSt())&&(yield this),this.Cvt()){const t=this.Xbt;Pg(this.zs,t);const s=this.Odt.LB().AB();for(let i=0,e=s.length;i<e;++i)yield*this.WSt.apply(s[i].DV(),t)}else this.pxt()}axt(){const t=this.zs,s=this.Xbt,i=this.WSt,e=this.Odt.LB().AB();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(n);i.apply(r.DV(),s)}}*uxt(){if((this.bvt()||this.kc.dSt())&&(yield this),this.Cvt()){const t=this.zs,s=this.Xbt,i=this.WSt,e=this.Odt.LB().AB();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(n);yield*i.apply(r.DV(),s)}}else this.axt()}lxt(){const t=this.zs,s=this.Xbt,i=this.WSt,e=this.Odt.LB().AB();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.mbt()||(s[i]=e.Js(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.mbt()&&(s[i]=e.Js(n))}i.apply(r.DV(),s)}}*cxt(){if((this.bvt()||this.kc.dSt())&&(yield this),this.Cvt()){const t=this.zs,s=this.Xbt,i=this.WSt,e=this.Odt.LB().AB();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.mbt()||(s[i]=e.Js(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.mbt()&&(s[i]=e.Js(n))}yield*i.apply(r.DV(),s)}}else this.lxt()}hxt(){const t=this.zs,s=this.Xbt,i=this.WSt,e=this.Odt,n=e.gxt(),r=e.LB().AB();n.Mxt(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].Js(e);i.apply(n.DV(),s)}n.wxt(i)}*oxt(){if((this.bvt()||this.kc.dSt())&&(yield this),this.Cvt()){const t=this.zs,s=this.Xbt,i=this.WSt,e=this.Odt,n=e.gxt(),r=e.LB().AB();n.Mxt(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].Js(e);yield*i.apply(n.DV(),s)}n.wxt(i)}else this.hxt()}Sxt(){return this.nbt?this.nbt.kV().Svt()>=2?this.nbt.jV():this.nbt:this.Odt.TB().Svt()>=2?this.Odt.mB():this.Odt}txt(){const t=this.Xbt;return Pg(this.zs,t),this.WSt.apply(this.Sxt(),t)}*sxt(){if((this.bvt()||this.kc.dSt())&&(yield this),this.Cvt()){const t=this.Xbt;Pg(this.zs,t);let s=this.WSt.apply(this.Sxt(),t);return kg.To(s)&&(s=yield*s),s}return this.txt()}Xvt(){const t=this.Odt,s=t.P0(),i=t.ibt(),e=this.zs,n=this.$bt,r=this.Xbt,h=this.WSt,o=this.rbt,a=t.LB().AB();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.mbt()||(r[t]=s.Js(0))}for(let t=0,u=a.length;t<u;++t){const u=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.mbt()&&(r[s]=i.Js(t))}const l=s?u.BW().obt(i):0;h.apply(u.Xnt()[o+l].DV(),r)}}*$vt(){if((this.bvt()||this.kc.dSt())&&(yield this),this.Cvt()){const t=this.Odt,s=t.P0(),i=t.ibt(),e=this.zs,n=this.$bt,r=this.Xbt,h=this.WSt,o=this.rbt,a=t.LB().AB();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.mbt()||(r[t]=s.Js(0))}for(let t=0,u=a.length;t<u;++t){const u=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.mbt()&&(r[s]=i.Js(t))}const l=s?u.BW().obt(i):0;yield*h.apply(u.Xnt()[o+l].DV(),r)}}else this.Xvt()}ixt(){const t=this.zs,s=this.Xbt,i=this.WSt,e=this.Odt.LB().AB(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(r);n.push(i.apply(h.DV(),s))}return Promise.all(n)}*nxt(){if((this.bvt()||this.kc.dSt())&&(yield this),this.Cvt()){const t=this.zs,s=this.Xbt,i=this.WSt,e=this.Odt.LB().AB(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(r);n.push(yield*i.apply(h.DV(),s))}return Promise.all(n)}return this.ixt()}Zvt(){const t=this.Odt,s=t.P0(),i=t.ibt(),e=this.zs,n=this.Xbt,r=this.WSt,h=this.rbt,o=t.LB().AB(),a=[];for(let t=0,u=o.length;t<u;++t){const u=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].Js(t);const l=s?u.BW().obt(i):0;a.push(r.apply(u.Xnt()[h+l].DV(),n))}return Promise.all(a)}*Kvt(){if((this.bvt()||this.kc.dSt())&&(yield this),this.Cvt()){const t=this.Odt,s=t.P0(),i=t.ibt(),e=this.zs,n=this.Xbt,r=this.WSt,h=this.rbt,o=t.LB().AB(),a=[];for(let t=0,u=o.length;t<u;++t){const u=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].Js(t);const l=s?u.BW().obt(i):0;a.push(yield*r.apply(u.Xnt()[h+l].DV(),n))}return Promise.all(a)}return this.Zvt()}async Jvt(){try{await this.WSt()}catch(t){console.error(`Unhandled exception running script %c${this.oTt.g3().Nc()}, event ${this.oTt.Wwt()}, action ${this.nSt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.AQ&&self.AQ.JSt(this),kg.wMt.VSt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),kg.wMt.YSt())}}*Vvt(){return(this.bvt()||this.kc.dSt())&&(yield this),this.Jvt()}w4(){return this.tvt&&this.tvt.size?{ex:kg.Mo(this.tvt)}:null}S4(t){if(this.tvt&&(this.tvt.clear(),this.tvt=null),!t)return;const s=t.ex;s&&(this.tvt=kg.wo(s))}}}{let Bg=function(t){return t instanceof aM?oM.vU(t):t.iH()},Ug=function(t){return Bg(t).lj()},Wg=function(t){return oM.vU(t)},Qg=function(t){return Wg(t).lj()},Jg=function(t){return t instanceof uM?oM.vU(t):t},Vg=function(t){return t instanceof lM?oM.vU(t):t},Yg=function(t,s,i,e){s.tQ()<i.tQ()?t.Set(s,i,e):t.Set(i,s,e)},Hg=function(t,s,i){s.tQ()<i.tQ()?t.Dl(s,i):t.Dl(i,s)},qg=function(t,s){t._l(s)},Zg=function(t,s,i){return s.tQ()<i.tQ()?t.Js(s,i):t.Js(i,s)},Kg=function(t,s,i,e){if(!s)return!1;const n=0!==i||0!==e,r=t.lj(),h=oM.ak(),o=oM.tyt(),a=o.Wk().upt(),u=o.BW(),l=o.Tvt(),c=s.LB(),f=u!==s;let d;mM=s,pM=f&&!l,yM=!1;let p=0,m=0,y=!1;c.Vdt()?(cM.m(r.pJ()),cM.offset(i,e),h.Txt(r.cj(),s,cM,dM),d=dM):a?oM.bxt()&&!c.spt().length&&c.tpt().length?d=c.tpt():(d=c.spt(),yM=!0):d=c.tpt(),n&&(p=r.Wb(),m=r.Vb(),r.sJ(i,e),r.XQ());for(const s of d)if(h.rz(t,s)){if(y=!0,l)break;f&&gM.add(s)}return n&&(r.$Q(p,m),r.XQ()),iM.wh(dM),y},Xg=function(t){const s=oM.Jk().upt(),i=mM.LB(),e=i.tpt(),n=i.spt();i.Vdt()?(i.npt(gM),s&&(iM.wh(n),i.rpt(gM,mM.AB()))):s?yM?i.hpt(gM):(i.rpt(gM,e),i.npt(gM)):i.npt(gM),mM.LSt()},$g=function(t,s){pM&&(s&&Xg(t),gM.clear(),mM=null,pM=!1)},tM=function(t,s){const i=oM.rj(s);if(!i)return!1;const e=t.LB();if(!e.Vdt()&&!e.tpt().includes(i))return!1;if(t.P0()){if(i.BW().vxt(t))return e.apt(i),t.LSt(),!0}else if(i.BW()===t)return e.apt(i),t.LSt(),!0;return!1},sM=function(t,s){const i=t.LB();if(i.Vdt()){i.$dt(!1),i.Jdt();const e=t.AB();for(let t=0,n=e.length;t<n;++t){const n=e[t];n.tQ()===s?i.Xdt(n):i.Kdt(n)}return t.LSt(),!!i.tpt().length}{const e=i.tpt();let n=0;for(let t=0,r=e.length;t<r;++t){const r=e[t];e[n]=r,r.tQ()===s?i.Xdt(r):++n}return iM.Mh(e,n),t.LSt(),!!e.length}};0;const iM=self.Gs,eM=new iM.vo,nM={},rM={},hM={};let oM=null;iM.xxt=function(t){oM=t};const aM=self.zW,uM=self.wB,lM=self.bU;rM.Cxt=function(t,s){return iM.compare(this.lj().Wb(),t,s)},hM.Cxt=function(t,s){return iM.compare(this.x,t,s)},rM.Gxt=function(t,s){return iM.compare(this.lj().Vb(),t,s)},hM.Gxt=function(t,s){return iM.compare(this.y,t,s)},rM.Ixt=function(){return this.lj().MJ()},hM.Ixt=function(){return this.gJ()},nM.Nxt=function(){const t=Ug(this),s=t.VF(),i=t.pJ();return i.$a()<0||i.tu()<0||i.Ka()>s.Vy()||i.Xa()>s.ig()},nM.Ext=function(t,s,i){const e=Jg(this).LB(),n=e.AB();if(!n.length)return!1;let r=n[0],h=r.lj(),o=r,a=iM.er(h.Wb(),h.Vb(),s,i);for(let e=1,u=n.length;e<u;++e){r=n[e],h=r.lj();const u=iM.er(h.Wb(),h.Vb(),s,i);(0===t&&u<a||1===t&&u>a)&&(a=u,o=r)}return e.apt(o),!0},rM.Qb=function(t){const s=this.lj();s.Wb()!==t&&(s.Qb(t),s.XQ())},hM.Qb=function(t){this.x=+t},rM.Yb=function(t){const s=this.lj();s.Vb()!==t&&(s.Yb(t),s.XQ())},hM.Yb=function(t){this.y=+t},rM.Dxt=function(t,s){const i=this.lj();i._xt(t,s)||(i.$Q(t,s),i.XQ())},hM.Dxt=function(t,s){this.setPosition(t,s)},nM.Axt=function(t,s){if(!(t=Jg(t)))return;const i=Bg(this),e=t.DB(i);if(!e)return;const[n,r]=e.Lxt(s),h=i.lj();h.Wb()===n&&h.Vb()===r||(h.$Q(n,r),h.XQ())},nM.Oxt=function(t){if(0===t)return;const s=Ug(this);s.sJ(s.Rxt()*t,s.Pxt()*t),s.XQ()},rM.kxt=function(t,s){if(0===s)return;const i=this.lj();t=iM.Xn(t),i.sJ(Math.cos(t)*s,Math.sin(t)*s),i.XQ()},hM.kxt=function(t,s){0!==s&&(t=iM.Xn(t),this.offsetPosition(Math.cos(t)*s,Math.sin(t)*s))},rM.Wb=function(){return this.lj().Wb()},hM.Wb=function(){return this.x},rM.Vb=function(){return this.lj().Vb()},hM.Vb=function(){return this.y},nM.aF=function(){return oM.aF(Bg(this))},rM.Fxt=function(t,s){return iM.compare(this.lj().Vy(),t,s)},hM.Fxt=function(t,s){return iM.compare(this.width,t,s)},rM.jxt=function(t,s){return iM.compare(this.lj().ig(),t,s)},hM.jxt=function(t,s){return iM.compare(this.height,t,s)},rM.$y=function(t){const s=this.lj();s.Vy()!==t&&(s.$y(t),s.XQ())},hM.$y=function(t){this.width=t},rM.Yy=function(t){const s=this.lj();s.ig()!==t&&(s.Yy(t),s.XQ())},hM.Yy=function(t){this.height=t},rM.bD=function(t,s){const i=Ug(this);i.Vy()===t&&i.ig()===s||(i.bD(t,s),i.XQ())},hM.bD=function(t,s){this.hU(t,s)},rM.Vy=function(){return this.lj().Vy()},hM.Vy=function(){return this.width},rM.ig=function(){return this.lj().ig()},hM.ig=function(){return this.height},nM.zxt=function(){return Ug(this).pJ().Ka()},nM.Bxt=function(){return Ug(this).pJ().Xa()},nM.Uxt=function(){return Ug(this).pJ().$a()},nM.Wxt=function(){return Ug(this).pJ().tu()},nM.Qxt=function(){const t=Ug(this).pJ();return(t.Ka()+t.$a())/2},nM.Jxt=function(){const t=Ug(this).pJ();return(t.Xa()+t.tu())/2},nM.Vxt=function(t,s){return iM.rr(Ug(this).lU(),iM.Xn(s))<=iM.Xn(t)},nM.Yxt=function(t){return iM.ar(Ug(this).lU(),iM.Xn(t))},nM.Hxt=function(t,s){const i=iM.Xn(t),e=iM.Xn(s),n=Ug(this).lU();return iM.ar(e,i)?iM.ar(n,i)&&!iM.ar(n,e):!(!iM.ar(n,i)&&iM.ar(n,e))},rM.uU=function(t){const s=this.lj(),i=iM.Kn(iM.Xn(t));isNaN(i)||s.lU()===i||(s.uU(i),s.XQ())},hM.uU=function(t){this.fJ=t},nM.qxt=function(t){if(isNaN(t)||0===t)return;const s=Ug(this);s.uU(s.lU()+iM.Xn(t)),s.XQ()},nM.Zxt=function(t){if(isNaN(t)||0===t)return;const s=Ug(this);s.uU(s.lU()-iM.Xn(t)),s.XQ()},nM.Kxt=function(t,s){const i=Ug(this),e=i.lU(),n=iM.hr(e,iM.Xn(s),iM.Xn(t));isNaN(n)||e===n||(i.uU(n),i.XQ())},nM.Xxt=function(t,s,i){const e=Ug(this),n=e.lU(),r=s-e.Wb(),h=i-e.Vb(),o=Math.atan2(h,r),a=iM.hr(n,o,iM.Xn(t));isNaN(a)||n===a||(e.uU(a),e.XQ())},nM.$xt=function(t,s){const i=Ug(this),e=i.lU(),n=t-i.Wb(),r=s-i.Vb(),h=Math.atan2(r,n);isNaN(h)||e===h||(i.uU(h),i.XQ())},rM.lU=function(){return iM.$n(this.lj().lU())},hM.lU=function(){return this.fJ},nM.tCt=function(t,s){return iM.compare(iM.vr(100*Ug(this).$A(),6),t,s)},rM.HU=function(){return this.lj().HU()},hM.HU=function(){return this.isVisible},nM.VU=function(t){const s=Ug(this);t=2===t?!s.HU():0!==t,s.HU()!==t&&(s.VU(t),oM.gj())},nM.sL=function(t){const s=iM.Zn(t/100,0,1),i=Ug(this);if(i.aV()){if(i.urt().sCt()===s)return}else if(i.$A()===s)return;i.sL(s),oM.gj()},nM.iCt=function(t){eM.Xo(t);const s=Ug(this);s.SJ().Qo(eM)||(s.TJ(eM),oM.gj())},nM.eL=function(){const t=Ug(this).SJ();return iM.Ir(t.ko(),t.Fo(),t.jo(),t.zo())},nM.$A=function(){return iM.vr(100*Ug(this).$A(),6)},nM.eCt=function(t){return!!(t=Vg(t))&&Ug(this).cj()===t},nM.nCt=function(t){const s=Jg(this).LB(),i=s.AB();if(!i.length)return!1;let e=i[0];for(let s=1,n=i.length;s<n;++s){const n=i[s],r=n.lj(),h=e.lj(),o=r.cj().$P(),a=h.cj().$P();0===t?(o>a||o===a&&r.fj()>h.fj())&&(e=n):(o<a||o===a&&r.fj()<h.fj())&&(e=n)}return s.apt(e),!0},rM.rCt=function(t,s,i){const e=this.lj(),n=0===t?e.Hb():e.cJ();return iM.compare(n,s,i)},hM.rCt=function(t,s,i){const e=0===t?this.mW:this.lJ;return iM.compare(e,s,i)},rM.hCt=function(){this.lj().vJ()},hM.hCt=function(){this.bJ()},rM.oCt=function(){this.lj().CJ()},hM.oCt=function(){this.xJ()},nM.aCt=function(t){(t=Vg(t))&&Ug(this).IJ(t)},nM.uCt=function(t,s){const i=0===t;if(!(s=Jg(s)))return;const e=Bg(this),n=s.lCt(e);n&&e.lj().EJ(n,i)},rM.qb=function(t){const s=this.lj();s.Hb()!==t&&(s.qb(t),oM.gj())},hM.qb=function(t){this.mW=t},nM.cCt=function(){return Ug(this).cj().$P()},nM.fCt=function(){return Ug(this).cj().Nc()},rM.dCt=function(){return this.lj().fj()},hM.dCt=function(){return this.zIndex},rM.pCt=function(){return this.lj().Hb()},hM.pCt=function(){return this.mW},rM.mCt=function(){return this.lj().cJ()},hM.mCt=function(){return this.lJ},nM.yCt=function(t){const s=Bg(this),i=s.BW().eU().srt(t);if(!i)return;const e=i.$P();return s.lj().ZQ().VV(e)},nM.gCt=function(t,s){const i=Bg(this),e=i.BW().eU().srt(s);if(!e)return;const n=e.$P(),r=1===t,h=i.lj().ZQ();h.VV(n)!==r&&(h.YV(n,r),h.HV(),oM.gj())},nM.MCt=function(t,s,i){const e=Bg(this),n=e.BW().eU().srt(t);if(!n)return;s=Math.floor(s);const r=n.EG()._G(s);if(!r)return;"color"===r?(eM.Xo(i),i=eM):"percent"===r&&(i/=100);const h=n.$P(),o=e.lj().ZQ();o.ZV(h,s,i)&&o.VV(h)&&oM.gj()};const cM=iM.Qn(iM.Rect),fM=[],dM=[];let pM=!1,mM=null,yM=!1;const gM=new Set;function*MM(t){if(!t)return!1;const s=this.Fj(),i=s.ak(),e=s.jk(),n=e.Xk(),r=e.tyt(),h=r.BW(),o=r.Gvt(),a=r.Ivt(),u=n.Nq(),l=s.pF(),c=l-1,f=u.Jk(),d=n.Eq(f);let p=o.get("collmemory");p||(p=iM.Qn(iM.Gl),o.set("collmemory",p)),a.get("collisionCreatedDestroyCallback")||(a.set("collisionCreatedDestroyCallback",!0),s.gf().addEventListener("instancedestroy",(t=>qg(p,t.BV))));const m=h.LB(),y=t.LB(),g=m.AB();let M=null;for(let s=0;s<g.length;++s){const n=g[s];y.Vdt()?(i.Txt(n.lj().cj(),t,n.lj().pJ(),fM),M=fM,i.wCt(n,t,M)):M=y.AB();for(let s=0;s<M.length;++s){const r=M[s];if(i.rz(n,r)||i.SCt(n,r)){const s=Zg(p,n,r);let i=!1,o=-2;"number"==typeof s&&(i=!0,o=s);const a=!i||o<c;if(Yg(p,n,r,l),a){const s=f.Iq();e.Oq(s);const i=h.LB(),o=t.LB();if(i.$dt(!1),o.$dt(!1),h===t){const t=i.tpt();iM.wh(t),t.push(n),t.push(r),h.LSt()}else{const s=i.tpt(),e=o.tpt();iM.wh(s),iM.wh(e),s.push(n),e.push(r),h.LSt(),t.LSt()}yield*f.xSt(u,d),e.Pq(s)}}else Hg(p,n,r)}iM.wh(fM)}return n.zq(),!1}nM.TCt=function(t){const s=Jg(this);t=Jg(t);const i=s.Fj();if(i.bCt())return MM.call(s,t);if(!t)return!1;const e=i.ak(),n=i.jk(),r=n.Xk(),h=n.tyt(),o=h.BW(),a=h.Gvt(),u=h.Ivt(),l=r.Nq(),c=i.pF(),f=c-1,d=l.Jk(),p=r.Eq(d);let m=a.get("collmemory");m||(m=iM.Qn(iM.Gl),a.set("collmemory",m)),u.get("collisionCreatedDestroyCallback")||(u.set("collisionCreatedDestroyCallback",!0),i.gf().addEventListener("instancedestroy",(t=>qg(m,t.BV))));const y=o.LB(),g=t.LB(),M=y.AB();let w=null;for(let s=0;s<M.length;++s){const i=M[s];g.Vdt()?(e.Txt(i.lj().cj(),t,i.lj().pJ(),fM),w=fM,e.wCt(i,t,w)):w=g.AB();for(let s=0;s<w.length;++s){const r=w[s];if(e.rz(i,r)||e.SCt(i,r)){const s=Zg(m,i,r);let e=!1,h=-2;"number"==typeof s&&(e=!0,h=s);const a=!e||h<f;if(Yg(m,i,r,c),a){const s=d.Iq();n.Oq(s);const e=o.LB(),h=t.LB();if(e.$dt(!1),h.$dt(!1),o===t){const t=e.tpt();iM.wh(t),t.push(i),t.push(r),o.LSt()}else{const s=e.tpt(),n=h.tpt();iM.wh(s),iM.wh(n),s.push(i),n.push(r),o.LSt(),t.LSt()}d.Rq(l,p),n.Pq(s)}}else Hg(m,i,r)}iM.wh(fM)}return r.zq(),!1},nM.vCt=function(t){return t=Jg(t),Kg(Bg(this),t,0,0)},nM.xCt=function(t,s,i){return t=Jg(t),Kg(Bg(this),t,s,i)},nM.CCt=function(){return!0},nM.YJ=function(){return Ug(this).YJ()},nM.v4=function(){return Ug(this).v4()},nM.GCt=function(t,s){const i=Jg(this);t=Jg(t);const e=i.Fj(),n=this.LB().AB();if(0===n.length)return!1;const r=t.LB();let h=r.AB();if(r.Vdt()){const s=[...e.ICt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r.Vdt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];if(1===s)for(const s of e.kJ())s.NCt(t)&&(null===o||o.has(s))&&a.add(s);else{let i;if(0===s){if(i=e.OJ(),null===i)continue}else i=e.PJ();i.NCt(t)&&(null===o||o.has(i))&&a.add(i)}}return 0!==a.size&&(r.npt(a),t.LSt(),!0)},nM.ECt=function(t,s){const i=Jg(this);t=Jg(t);const e=i.Fj(),n=i.LB().AB();if(0===n.length)return!1;const r=t.LB();let h=r.AB();if(r.Vdt()){const s=[...e.ICt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r.Vdt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];2!==s||e.v4()||!e.NCt(t)||null!==o&&!o.has(e)||a.add(e);for(const i of 0===s?e.children():e.UJ())2===s&&i.v4()||i.NCt(t)&&(null===o||o.has(i))&&a.add(i)}return 0!==a.size&&(r.npt(a),t.LSt(),!0)},nM.DCt=function(t,s,i){const e=Jg(this);t=Jg(t);const n=e.Fj(),r=e.LB().AB();if(0===r.length)return!1;const h=t.LB();let o=h.AB();if(h.Vdt()){const s=[...n.ICt(t)];s.length>0&&(o=o.concat(s))}if(0===o.length)return!1;const a=h.Vdt()?null:new Set(o),u=[];for(let e=0,n=r.length;e<n;++e){const n=r[e];if(0===s){const s=n.BJ(i);null!==s&&s.NCt(t)&&(null===a||a.has(s))&&u.push(s)}else if(1===s)for(const s of n.children())if(s.NCt(t)){if(0===i){(null===a||a.has(s))&&u.push(s);break}--i}}return 0!==u.length&&(h.ept(u),t.LSt(),!0)},nM._Ct=function(t,s,i){const e=Bg(this);switch(t){case 0:default:return iM.compare(e.jJ(),s,i);case 1:return iM.compare(e.ACt(),s,i)}},nM.QJ=function(t,s,i,e,n,r,h,o,a,u){t=Jg(t);const l=Bg(this),c=oM.iyt().BW();for(const f of t.LCt(l,c)){if(!f.TB().oB())return;l.QJ(f,{qJ:s,KJ:i,$J:e,sV:n,eV:r,oV:h,rV:o,uV:a,cV:u})}},nM.JJ=function(t){t=Jg(t);const s=Bg(this),i=oM.iyt().BW();for(const e of t.LCt(s,i))s.JJ(e)},nM.OCt=function(){const t=Bg(this);t.YJ()&&t.OJ().JJ(t)},nM.RCt=function(){const t=Bg(this).OJ();return t?t.tQ():-1},nM.PCt=function(){return Bg(this).jJ()},nM.kCt=function(){return Bg(this).ACt()},nM.FCt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=Ug(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.yV(),i.XQ()):i.pV(t,s)},nM.MV=function(t,s,i,e,n,r,h,o){const a=Ug(this);a.MV(t,s,{mode:0===i?"absolute":"relative",x:e,y:n,mW:r,bV:h,vV:o})&&a.XQ()},nM.jCt=function(){const t=Ug(this);return t.SV()?t.TV().wv():0},nM.zCt=function(){const t=Ug(this);return t.SV()?t.TV().Sv():0},nM.BCt=function(t){const s=Ug(this);t=2===t?!s.HU():0!==t,s.HU()!==t&&s.VU(t)},nM.OV=function(t,s){this instanceof self.zW?this.ZH(t,s):this.OV(t,s)},nM.UCt=function(t,s){this instanceof self.zW?this.XH(t,""+s):this.UCt(t,""+s)},nM.WCt=function(t){this instanceof self.zW?this.$H(t):this.WCt(t)},nM.QCt=function(){this instanceof self.zW?this.YH():this._V()},nM.JCt=function(){this instanceof self.zW?this.HH():this.AV()},nM.VCt=function(){return this instanceof self.zW?this.qH():this.VCt()},nM.YCt=function(t){this instanceof self.zW?this.HCt(0!==t):this.qCt(0!==t)},nM.ZCt=function(){return this instanceof self.zW?this.XSt():this.KCt()},rM.XCt=function(t,s,i){return iM.compare(this.iH().Eht(t),s,i)},hM.XCt=function(t,s,i){return iM.compare(Wg(this).Eht(t),s,i)},rM.$Ct=function(t){return!!this.iH().Eht(t)},hM.$Ct=function(t){return!!Wg(this).Eht(t)},nM.tGt=function(t,s){const i=Jg(this),e=i.LB(),n=e.AB();if(!n.length)return!1;const r=i.P0();let h=null,o=0;for(let e=0,a=n.length;e<a;++e){const a=n[e],u=r?a.BW().sbt(i.ibt()):0,l=a.Eht(u+s);(null===h||0===t&&l<o||1===t&&l>o)&&(o=l,h=a)}return e.apt(h),!0},nM.sGt=function(t){const s=Jg(this);return s.Fj().tyt().Tvt()?sM(s,t):tM(s,t)},nM.OY=function(t){const s=new Set(iM.Rh(t)),i=Bg(this).uQ();return s.isSubsetOf(i)},nM.iGt=function(){return Bg(this).eGt()},nM.nGt=function(){return Bg(this).uQ().size},nM.rGt=function(t){return Bg(this).hGt(t)},nM.oGt=function(t,s){const i=iM.Rh(s);if(0===i.length)return;const e=Bg(this),n=new Set(e.uQ());if(0===t)for(const t of i)n.add(t);else if(1===t)for(const t of i)n.delete(t);e.cQ(n)},nM.aGt=function(){oM.YW(Bg(this))},nM.uGt=function(){return!0},nM.lGt=function(){return!0},rM.cGt=function(t,s){this.iH().Dht(t,s)},hM.cGt=function(t,s){Wg(this).Dht(t,s)},rM.fGt=function(t,s){const i=this.iH(),e=i.Eht(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Dht(t,e+s)},hM.fGt=function(t,s){const i=Wg(this),e=i.Eht(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Dht(t,e+s)},rM.dGt=function(t,s){const i=this.iH(),e=i.Eht(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Dht(t,e-s))},hM.dGt=function(t,s){const i=Wg(this),e=i.Eht(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Dht(t,e-s))},rM.pGt=function(t,s){this.iH().Dht(t,s?1:0)},hM.pGt=function(t,s){Wg(this).Dht(t,s?1:0)},rM.mGt=function(t){const s=this.iH();s.Dht(t,0===s.Eht(t)?1:0)},hM.mGt=function(t){const s=Wg(this);s.Dht(t,0===s.Eht(t)?1:0)},nM.yGt=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=Bg(this),e="state";oM.gGt(),i.E6(e),i.nv(s,e),oM.MGt(e,{wGt:!0})},nM.SGt=function(){return JSON.stringify(Bg(this).ev("state"))},nM.TGt=function(){return Bg(this).BW().Nc()},nM.bGt=function(){const t=oM.$mt().jpt();let s=t.PB();for(const i of oM.ICt(t))++s;return s},nM.vGt=function(){return oM.$mt().jpt().LB().AB().length},rM.iQ=function(){return this.iH().iQ()},hM.iQ=function(){return Wg(this).iQ()},rM.tQ=function(){return this.iH().tQ()},hM.tQ=function(){return Wg(this).tQ()},nM.vgt=function(t){const s=Bg(this);return t.toLowerCase()===oM.jk().Igt(s)},nM.dQ=function(t){const s=Bg(this);oM.jk().dQ(s,t)},nM.xGt=function(t){const s=Jg(this);return oM.jk().tgt().CGt(s.LB().AB(),t),!0},nM.GGt=function(){return Bg(this).nQ()},iM.IGt=function(t,s,i){const e=t[1],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],u=t[8],l=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],y=t[16],g=s.Ej,M=s.krt,w=s.Frt,S=Object.assign({},nM,i>=2?hM:rM);n&&(g.Cxt=S.Cxt,g.Gxt=S.Gxt,g.Ixt=S.Ixt,g.Nxt=S.Nxt,g.Ext=S.Ext,M.Qb=S.Qb,M.Yb=S.Yb,M.Dxt=S.Dxt,M.Axt=S.Axt,M.Oxt=S.Oxt,M.kxt=S.kxt,w.NGt=S.Wb,w.EGt=S.Vb,w.oF=S.aF),r&&(g.Fxt=S.Fxt,g.jxt=S.jxt,M.$y=S.$y,M.Yy=S.Yy,M.bD=S.bD,w.DGt=S.Vy,w._Gt=S.ig,w.AGt=S.zxt,w.LGt=S.Bxt,w.OGt=S.Uxt,w.RGt=S.Wxt,w.PGt=S.Qxt,w.kGt=S.Jxt),h&&(g.FGt=S.Vxt,g.jGt=S.Yxt,g.Hxt=S.Hxt,M.uU=S.uU,M.qxt=S.qxt,M.Zxt=S.Zxt,M.Kxt=S.Kxt,M.Xxt=S.Xxt,M.$xt=S.$xt,w.zGt=S.lU),o&&(g.HU=S.HU,g.tCt=S.tCt,M.VU=S.VU,M.sL=S.sL,M.iCt=S.iCt,w.Opacity=S.$A,w.ColorValue=S.eL),a&&(g.eCt=S.eCt,g.nCt=S.nCt,g.rCt=S.rCt,M.hCt=S.hCt,M.oCt=S.oCt,M.aCt=S.aCt,M.uCt=S.uCt,M.qb=S.qb,w.cCt=S.cCt,w.fCt=S.fCt,w.dCt=S.dCt,w.pCt=S.pCt,w.mCt=S.mCt),u&&(g.yCt=S.yCt,M.gCt=S.gCt,M.MCt=S.MCt),d&&(g.CCt=S.CCt,g.YJ=S.YJ,g.v4=S.v4,g.GCt=S.GCt,g.ECt=S.ECt,g.DCt=S.DCt,g._Ct=S._Ct,M.QJ=S.QJ,M.JJ=S.JJ,M.OCt=S.OCt,w.RCt=S.RCt,w.PCt=S.PCt,w.kCt=S.kCt),p&&(M.FCt=S.FCt,M.MV=S.MV,w.jCt=S.jCt,w.zCt=S.zCt),l&&(g.HU=S.HU,M.VU=S.BCt,M.BGt=S.OV,M.UGt=S.UCt,M.WGt=S.WCt),c&&(g.QGt=S.VCt,M.JGt=S.QCt,M.VGt=S.JCt),f&&(g.Cl=S.ZCt,M.YGt=S.YCt),m&&(g.TCt=S.TCt,g.vCt=S.vCt,g.xCt=S.xCt,s.HGt=$g),e||(g.XCt=S.XCt,g.$Ct=S.$Ct,g.tGt=S.tGt,g.sGt=S.sGt,g.OY=S.OY,M.cGt=S.cGt,M.fGt=S.fGt,M.dGt=S.dGt,M.pGt=S.pGt,M.mGt=S.mGt,M.oGt=S.oGt,g.uGt=S.uGt,g.lGt=S.lGt,M.aGt=S.aGt,M.yGt||(M.yGt=S.yGt),w.SGt||(w.SGt=S.SGt),w.bGt=S.bGt,w.vGt=S.vGt,w.qGt=S.iQ,w.ZGt=S.tQ,w.TGt=S.TGt,w.iGt=S.iGt,w.nGt=S.nGt,w.rGt=S.rGt,g.vgt=S.vgt,M.dQ=S.dQ,M.xGt=S.xGt),y&&(w.GGt=S.GGt)}}{const wM=self.Gs;wM.sgt=class extends wM.Un{constructor(t){super(),this.cpt=t,this.Jc="",this.bR=-1,this.KGt="",this.XGt=!1,this.$Gt=null,this.Spt=0,this.VMt=[],this.Gpt=null,this.tIt=new Map,this.sIt=null,this.iIt=null,this.eIt=-1,this.KSt=null,this.nIt=null,this.rIt=!1}Jn(){this.Jc="",this.bR=-1,this.KGt="",this.$Gt=null,this.iIt=null,this.KSt=null,this.nIt=null,this.eIt=-1,wM.wh(this.VMt),this.Gpt&&(this.Gpt.clear(),this.Gpt=null);for(const t of this.tIt.values())t.Jn();this.tIt.clear(),this.sIt=null}Ub(){const t=this.cpt,s=t.Fj().R0(),i=t.$mt();this.$Gt=i.Jk(),this.Spt=i.Apt()+1;const e=t.Jgt(this.$Gt);e&&(this.iIt=e,this.KSt=e.pTt(),this.nIt=e.dTt().map((t=>t.Yet())),e.gSt()&&(this.eIt=e.MTt()));for(const t of s){const s=t.LB();s.Vdt()&&!this.$Gt.Bwt(t)||(this.VMt.push(t),this.tIt.set(t,wM.Qn(wM.hIt,s)))}const n=t.Vk();this.Gpt=n.size>0?n:null}oIt(t){this.Jc="timer",this.Ub(),this.bR=this.cpt.Fj().fF()+t}aIt(t){this.Jc="walltimer",this.Ub(),this.bR=this.cpt.Fj().yF()+t}uIt(t){this.Jc="signal",this.Ub(),this.KGt=t.toLowerCase()}CGt(t,s){this.Jc="instance-signals",this.Ub(),this.KGt=s.toLowerCase(),this.sIt=new Set(t)}lIt(t){this.Jc="promise",this.Ub(),t.then((()=>this.wgt())).catch((t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.wgt()}))}cIt(){return"timer"===this.Jc}fIt(){return"walltimer"===this.Jc}ggt(){return"signal"===this.Jc}Cgt(){return"instance-signals"===this.Jc}Bgt(){return"promise"===this.Jc}Mgt(){return this.KGt}dIt(){return this.XGt}wgt(){this.XGt=!0}Ggt(t){this.sIt.delete(t),0===this.sIt.size&&this.wgt()}ngt(){return this.cIt()?this.bR<=this.cpt.Fj().fF():this.fIt()?this.bR<=this.cpt.Fj().yF():this.dIt()}pIt(t){t.Ipt(this.$Gt,this.Spt);for(const[t,s]of this.tIt.entries()){const i=t.LB();s.Ipt(i)}this.Gpt&&t.Jpt([...this.Gpt]);const s=this.iIt;s&&(s.NSt(this.KSt),s.dTt().map(((t,s)=>t.Ent(this.nIt[s]))),s.gSt()&&s.wTt(this.eIt))}rgt(t){this.pIt(t),this.$Gt.MSt(t),this.iIt&&this.iIt.gSt()&&this.iIt.FSt(this.eIt),this.cpt.Zyt(this.VMt),this.rIt=!0}async ugt(t){this.pIt(t);for(const s of this.$Gt.wSt(t))await this.cpt.Fj().Lyt(s);this.iIt&&this.iIt.gSt()&&this.iIt.FSt(this.eIt),this.cpt.Zyt(this.VMt),this.rIt=!0}hgt(){return this.rIt}Bdt(t){for(const s of this.tIt.values())s.Bdt(t);if("instance-signals"===this.Jc){for(const s of t)this.sIt.delete(s);0===this.sIt.size&&this.wgt()}}w4(){const t={},s={wt:this.Jc,t:this.bR,st:this.KGt,s:this.XGt,ev:this.$Gt.W0(),sm:this.VMt.map((t=>t.W0())),dsm:this.Gpt?[...this.Gpt].map((t=>t.W0())):null,sols:t};this.$Gt.rSt(this.Spt)&&(s.act=this.$Gt.eyt(this.Spt).W0());for(const[s,i]of this.tIt)t[s.W0().toString()]=i.w4();return"instance-signals"===this.Jc&&(s.pi=[...this.sIt].map((t=>t.tQ()))),s}static Ugt(t,s){const i=t.Fj(),e=t.fyt(s.ev);if(!e)return null;let n=0;if(s.hasOwnProperty("act")){const i=t.pyt(s.act);if(!i)return null;n=i.$P()}const r=wM.Qn(wM.sgt,t);r.bR=s.t,s.hasOwnProperty("wt")?r.Jc=s.wt:r.Jc=-1===r.bR?"signal":"timer",r.KGt=s.st,r.XGt=s.s,r.$Gt=e,r.Spt=n;for(const t of s.sm){const s=i.Gq(t);s&&r.VMt.push(s)}if(Array.isArray(s.dsm))for(const t of s.dsm){const s=i.Gq(t);s&&(r.Gpt||(r.Gpt=new Set),r.Gpt.add(s))}for(const[e,n]of Object.entries(s.sols)){const s=parseInt(e,10),h=i.Gq(s);if(!h)continue;const o=wM.Qn(wM.hIt,null);o.S4(t,n),r.tIt.set(h,o)}if("instance-signals"===r.Jc){r.sIt=new Set;for(const t of s.pi){const s=i.rj(t);s&&r.sIt.add(s)}}return r}}}{const SM=self.Gs;SM.hIt=class extends SM.Un{constructor(t){super(),this.Odt=null,this.mIt=!0,this.LX=[],t&&(this.Odt=t.BW(),this.mIt=t.Vdt(),SM.xh(this.LX,t.tpt()))}Jn(){this.Odt=null,SM.wh(this.LX)}Ipt(t){t.$dt(this.mIt),SM.xh(t.tpt(),this.LX)}Bdt(t){SM.Eh(this.LX,t)}w4(){return{sa:this.mIt,insts:this.LX.map((t=>t.tQ()))}}S4(t,s){const i=t.Fj();this.mIt=!!s.sa,SM.wh(this.LX);for(const t of s.insts){const s=i.rj(t);s&&this.LX.push(s)}}}}{let TM=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};0;const bM=self.Gs;bM.yIt=class extends bM.Un{constructor(t){super(),this.kc=t.runtime,this.jc=t.id,this.Hn=t.name??"",this.gIt=!!t.Yz,this.MIt=!!t.wIt,this.SIt=!!t.tB,this.TIt=!!t.bIt,this.vIt=!!t.iB,this.xIt=!!t.CIt,this.GIt=!!t.aB,this.IIt=!!t.Xz,this.NIt=!!t.nB,this.EIt=t.DIt,this._It=null,this.AIt=new Map,this.LIt=new Map,this.OIt=new Map,this.RIt=new Map,this.PIt=t.kIt,this.FIt=null}Jn(){this.kc=null}Fj(){return this.kc}Vz(){return this.jc}Nc(){return this.Hn}jIt(){}xgt(){return this.Svt()>=2?this.FIt.constructor:this.constructor}Svt(){return this.EIt}zIt(t=!1){let s=this.PIt;return t&&"function"!=typeof s&&this.Svt()>=2&&(s=globalThis.uH),s}qz(){return this.gIt}Kz(){return this.MIt}$z(){return this.IIt}rB(){return this.NIt}sB(){return this.SIt}yb(){return this.TIt}eB(){return this.vIt}oB(){return this.xIt}uB(){return this.GIt}WTt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.AIt.get(t);return i||(i=t.bind(s),this.AIt.set(t,i),i)}yvt(t,s,i){if(!s)throw new Error("missing 'this' binding");const e=TM(this.LIt,t);let n=e.get(i);return n||(n=t.bind(s,i),e.set(i,n),n)}gvt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");const n=TM(this.OIt,t),r=TM(n,i);let h=r.get(e);return h||(h=t.bind(s,i,e),r.set(e,h),h)}Mvt(t,s,i,e,n){if(!s)throw new Error("missing 'this' binding");const r=TM(this.RIt,t),h=TM(r,i),o=TM(h,e);let a=o.get(n);return a||(a=t.bind(s,i,e,n),o.set(n,a),a)}BIt(t){if(!this.qz())throw new Error("must be single-global plugin");this._It=t}yB(){if(!this.qz())throw new Error("must be single-global plugin");return this._It}MB(){if(!this.qz())throw new Error("must be single-global plugin");return this._It.MB()}UIt(){const t=this.Svt();bM.Qz.WIt(this,t);const s=this.zIt(!0);if(s){if(this.FIt=new s,!(this.FIt instanceof self.Uz))throw new TypeError("plugin class must derive from IPlugin")}else this.FIt=new self.Uz;bM.Qz.QIt(t)}dB(){return this.FIt}}}{const vM=self.Gs;vM.JIt=class extends vM.yIt{constructor(t,s){super(t),this.VIt=s,this.YIt=0,this.HIt=new Map,this.qIt("elem-focused",(t=>t.ZIt())),this.qIt("elem-blurred",(t=>{t&&t.KIt()}))}Jn(){super.Jn()}XIt(t){const s=this.YIt++;return this.HIt.set(s,t),s}$It(t){this.HIt.delete(t)}qIt(t,s){this.kc.GQ(this.VIt,t,(t=>{const i=this.HIt.get(t.elementId);s(i,t)}))}}}{const xM=self.Gs;xM.tNt=class extends xM.Un{constructor(t){super(),this.Odt=t,this.kc=t.Fj(),this.sNt=t.TB()}Jn(){this.Odt=null,this.kc=null,this.sNt=null}BW(){return this.Odt}Fj(){return this.kc}TB(){return this.sNt}mY(){return this.Odt.mY()}jIt(){}Avt(t){}Mxt(t){}wxt(t){}L3(t){}z3(){}P3(){}a5(t){}iNt(){}zIt(){return null}eNt(t,s,i){const e=xM.Qn(xM.Event,t,s);e.nNt=this,i&&Object.assign(e,i),this.BW().qK(e)}}}{const CM=self.Gs;CM.rNt=class extends CM.Un{constructor(t,s){super(),this.fi=t,this.VIt=s,this.hNt=null,this.kc=t.Fj(),this.Odt=this.fi.BW(),this.oNt=this.Odt.gxt(),this.M6=null,this.S6=null,this.RQ=!1,this.kQ=!1,this.qf=null,this.YE=!1}Jn(){this.YE=!0,this.aNt(),this.uNt(),this.M6=null,this.S6=null,this.qf&&(this.qf.Jn(),this.qf=null),this.fi=null,this.kc=null,this.Odt=null,this.oNt=null}Vn(){return this.YE}iH(){return this.fi}Fj(){return this.kc}BW(){return this.Odt}TB(){return this.oNt.TB()}gxt(){return this.oNt}lNt(){return this.fi.hj()}vQ(t){return this.kc.vQ(t,this.fi,null)}cNt(t){return this.kc.cNt(t,this.fi,null)}Ij(t){return this.kc.Ij(t,this.fi,null)}fNt(t,s){return this.kc.fNt(t,this.fi,s)}dNt(t,s){return this.kc.dNt(t,this.fi,s)}pNt(t){return this.kc.pNt(t)}mNt(t,s){this.kc.GQ(this.VIt,t,s)}yNt(t){for(const[s,i]of t)this.mNt(s,i)}gNt(t,s){this.kc.zc(this.VIt,t,s)}MNt(t,s){return this.kc.wj(this.VIt,t,s)}wNt(t,s){if(!this.kc.vk())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.VIt,handler:t,data:s,responseId:null});this.gNt(t,s)}SNt(t){if(!t)throw new Error("cannot set empty component id");this.hNt=t}TNt(){if(!this.hNt)throw new Error("wrapper extension component id not set");return this.kc.UQ(this.hNt)}QQ(t,s){if(!this.hNt)throw new Error("wrapper extension component id not set");this.kc.QQ(this.hNt,t,s)}bNt(t){for(const[s,i]of t)this.QQ(s,i)}yq(t,s){if(!this.hNt)throw new Error("wrapper extension component id not set");this.kc.yq(this.hNt,t,s)}gq(t,s){if(!this.hNt)throw new Error("wrapper extension component id not set");return this.kc.gq(this.hNt,t,s)}N8(){}vNt(){}xNt(){if(!this.RQ){if(!this.M6)if(this.kc._Q()){const t=globalThis.AQ,s=this.TB();this.M6=()=>{const i=performance.now();this.N8(),t.OQ(s,performance.now()-i)}}else this.M6=()=>this.N8();this.kc.gf().addEventListener("tick",this.M6),this.RQ=!0}}aNt(){this.RQ&&(this.kc.gf().removeEventListener("tick",this.M6),this.RQ=!1)}CNt(){return this.RQ}GNt(){if(!this.kQ){if(!this.S6)if(this.kc._Q()){const t=globalThis.AQ,s=this.TB();this.S6=()=>{const i=performance.now();this.vNt(),t.OQ(s,performance.now()-i)}}else this.S6=()=>this.vNt();this.kc.gf().addEventListener("tick2",this.S6),this.kQ=!0}}uNt(){this.kQ&&(this.kc.gf().removeEventListener("tick2",this.S6),this.kQ=!1)}INt(){return this.kQ}NNt(){return[]}ev(){return null}nv(t){}Sht(t){}Ght(t,s){}wot(t,s,i){if(0===s)return;const e=this.Sht(t);if("number"!=typeof e)throw new Error("expected number");this.Ght(t,e+s,i)}ENt(t,s,i,e){}DNt(t,...s){t.call(this,...s)}_Nt(t,...s){return t.call(this,...s)}zIt(){return null}eNt(t,s,i){if(!this.fi.ANt())return;const e=this.lNt(),n=CM.Qn(CM.Event,t,s);n.BV=e,i&&Object.assign(n,i),e.dispatchEvent(n)}yb(){return!1}}}{const GM=self.Gs;GM.LNt=class extends GM.rNt{constructor(t,s){super(t,s),this.Vst=t.lj(),this.ONt=null,this.RNt=null}Jn(){if(this.ONt){const t=this.kc.gf();t.removeEventListener("renderercontextlost",this.ONt),t.removeEventListener("renderercontextrestored",this.RNt),this.ONt=null,this.RNt=null}this.Vst=null,super.Jn()}PNt(){this.kNt()}FNt(){}jNt(){}kNt(){if(this.ONt)return;this.ONt=()=>this.CX(),this.RNt=()=>this.zNt();const t=this.kc.gf();t.addEventListener("renderercontextlost",this.ONt),t.addEventListener("renderercontextrestored",this.RNt)}CX(){this.FNt()}zNt(){this.jNt()}lj(){return this.Vst}Rit(){return!1}Oit(){if(!this.Rit())throw new Error("original size not known");const t=this.BNt();if(t)return t.Vy()}kit(){if(!this.Rit())throw new Error("original size not known");const t=this.BNt();if(t)return t.ig()}BNt(){return null}UNt(){const t=this.BNt();if(t){const s=t.lC();if(s)return[s.Vy(),s.ig()]}return[100,100]}WNt(){const t=this.BNt();return t?t.$D():null}QNt(){const t=this.BNt();return t?t.JNt():null}VNt(){const t=this.BNt();return!!t&&t.YNt()}Lxt(t){const s=this.fi.lj();return[s.Wb(),s.Vb(),s.cJ()]}iNt(t,s,i){}HNt(t,s){}q2(){return!0}}}{const IM=self.Gs,NM=IM.Qn(IM.Rect);IM.qNt=class extends IM.LNt{constructor(t,s){super(t,s),this.ZNt=this.TB().XIt(this),this.KNt=!0,this.XNt=!1,this.$Nt=!1,this.tEt=-.2,this.sEt=IM.Qn(IM.Rect,0,0,-1,-1);const i=this.kc.Cj();this.iEt=i._H(),this.eEt=i.AH(),this.nEt=-1,this.rEt=-1,this.hEt=!1,this.xNt()}Jn(){this.TB().$It(this.ZNt),this.oEt("destroy"),this.ZNt=-1,super.Jn()}EV(){if(this.kc.vk())throw new Error("not valid in worker mode");return this.aEt("get-element")}oEt(t,s){s||(s={}),s.elementId=this.ZNt,this.gNt(t,s)}aEt(t,s){return s||(s={}),s.elementId=this.ZNt,this.wNt(t,s)}uEt(t,s){return s||(s={}),s.elementId=this.ZNt,this.MNt(t,s)}lEt(t){t||(t={});const s=this.lj();t.elementId=this.ZNt,t.isVisible=s.HU(),t.htmlIndex=s.cj().FH(),t.htmlZIndex=s.jH(),Object.assign(t,this.cEt()),this.KNt=!!t.isVisible,this.wNt("create",t),this.fEt(!0)}BCt(t){t=!!t,this.KNt!==t&&(this.KNt=t,this.oEt("set-visible",{isVisible:t}))}N8(){this.fEt(!1)}dEt(){const t=this.kc.Cj().QH();return"Android"===IM.Ks.Xs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}fEt(t){if(this.iH().JH())return;const s=this.lj(),i=s.cj(),e=s.pJ();let[n,r]=i.LW(e.Ka(),e.Xa()),[h,o]=i.LW(e.$a(),e.tu());const a=this.kc.Cj(),u=a.Az(),l=a.Oz();if(!s.HU()||!i.HU())return void this.BCt(!1);if(!this.dEt()&&(h<=0||o<=0||n>=u||r>=l))return void this.BCt(!1);NM.set(n,r,h,o);const c=a._H(),f=a.AH(),d=i.FH(),p=s.jH();if(!t&&NM.equals(this.sEt)&&this.iEt===c&&this.eEt===f&&this.nEt===d&&this.rEt===p)return void this.BCt(!0);this.sEt.m(NM),this.iEt=c,this.eEt=f,this.nEt=d,this.rEt=p,this.BCt(!0);let m=null;this.$Nt&&(m=i.VH()+this.tEt),this.aEt("update-position",{left:Math.round(this.sEt.Ka()),top:Math.round(this.sEt.Xa()),width:Math.round(this.sEt.width()),height:Math.round(this.sEt.height()),htmlIndex:d,htmlZIndex:p,fontSize:m})}_V(){this.aEt("focus",{focus:!0})}AV(){this.aEt("focus",{focus:!1})}ZIt(){this.XNt=!0}KIt(){this.XNt=!1}VCt(){return this.XNt}OV(t,s){this.oEt("set-css-style",{prop:IM.So(t),val:s})}UCt(t,s){this.oEt("set-attribute",{name:t,val:s})}WCt(t){this.oEt("remove-attribute",{name:t})}pEt(){this.hEt||(this.hEt=!0,Promise.resolve().then((()=>{this.hEt=!1,this.oEt("update-state",this.cEt())})))}cEt(){}mEt(){return this.ZNt}}}{const EM=self.Gs,DM=self.QV;EM.yEt=class extends EM.Un{constructor(t){super(),this.kc=t.runtime,this.jc=t.id,this.Hn=t.name??"",this.gEt=EM.Qn(EM.Ol),this.MEt=EM.Qn(EM.Ol),this.EIt=t.DIt,this.PIt=t.kIt,this.wEt=null}Jn(){this.MEt.Jn(),this.gEt.Jn(),this.kc=null}Fj(){return this.kc}Vz(){return this.jc}Nc(){return this.Hn}jIt(){}Svt(){return this.EIt}zIt(t=!1){let s=this.PIt;return t&&"function"!=typeof s&&this.Svt()>=2&&(s=globalThis.iq),s}SEt(t){this.gEt.Fl(t)}s8(){return this.gEt.jl()}v0(t){this.MEt.Fl(t)}G0(t){this.MEt.Dl(t)}AB(){return this.MEt.jl()}UIt(){const t=this.Svt();EM.Qz.WIt(this,t);const s=this.zIt(!0);if(s){if(this.wEt=new s,!(this.wEt instanceof DM))throw new TypeError("behavior class must derive from IBehavior")}else this.wEt=new DM;EM.Qz.QIt(t)}PV(){return this.wEt}}}{const _M=self.Gs;_M.TEt=class extends _M.Un{constructor(t){super(),this.kc=t.Fj(),this.nbt=t,this.Odt=t.BW(),this.bEt=t.kV(),this.bEt.SEt(this.Odt)}Jn(){this.kc=null,this.nbt=null,this.Odt=null,this.bEt=null}jIt(){}zV(){return this.nbt}BW(){return this.Odt}Fj(){return this.kc}kV(){return this.bEt}}}{const AM=self.Gs;AM.vEt=class extends AM.Un{constructor(t,s){super(),this.fut=t,this.VIt=s,this.fi=t.UV(),this.kc=t.Fj(),this.nbt=t.zV(),this.oNt=this.nbt.gxt(),this.RQ=!1,this.kQ=!1,this.pq=!1,this.qf=null}Jn(){this.aNt(),this.uNt(),this.xEt(),this.qf&&(this.qf.Jn(),this.qf=null),this.fut=null,this.fi=null,this.kc=null,this.nbt=null,this.oNt=null}kV(){return this.nbt.kV()}CEt(){return this.fut}UV(){return this.fi}BW(){return this.fi.BW()}lj(){return this.fi.lj()}Fj(){return this.kc}zV(){return this.nbt}gxt(){return this.oNt}lNt(){return this.fut.lNt()}vQ(t){return this.kc.vQ(t,this.fi,this.nbt)}cNt(t){return this.kc.cNt(t,this.fi,this.nbt)}Ij(t){return this.kc.Ij(t,this.fi,this.nbt)}GEt(){}N8(){}vNt(){}IEt(){}xNt(){this.RQ||(this.kc.oq(this),this.RQ=!0)}aNt(){this.RQ&&(this.kc.aq(this),this.RQ=!1)}CNt(){return this.RQ}GNt(){this.kQ||(this.kc.uq(this),this.kQ=!0)}uNt(){this.kQ&&(this.kc.lq(this),this.kQ=!1)}INt(){return this.kQ}NEt(){this.pq||(this.kc.cq(this),this.pq=!0)}xEt(){this.pq&&(this.kc.fq(this),this.pq=!1)}EEt(){return this.pq}NNt(){return[]}mNt(t,s){this.kc.GQ(this.VIt,t,s)}DEt(t,s){}ev(){return null}nv(t){}Sht(t){}Ght(t,s){}wot(t,s){if(0===s)return;const i=this.Sht(t);if("number"!=typeof i)throw new Error("expected number");this.Ght(t,i+s)}ENt(t,s,i,e){}DNt(t,...s){t.call(this,...s)}_Nt(t,...s){return t.call(this,...s)}zIt(){return null}eNt(t,s,i){if(!this.fut.ANt())return;const e=this.lNt(),n=AM.Qn(AM.Event,t,s);n._Et=e,n.BV=e.BV,i&&Object.assign(n,i),e.dispatchEvent(n)}}}{let LM=function(t){if(t!==RM)throw new Error("invalid internal API token")};0;const OM=self.Gs;OM._j={},OM.Rut={};const RM=OM.Is();let PM=[],kM=[],FM=[],jM=null,zM=null,BM=null,UM=null;const WM=new Map,QM=new Map;OM.Qz=class extends OM.Un{constructor(t,s){super(),this.kc=t,this.AEt=[],this.jTt=null,this.LEt=[],this.OEt=new Map,this.REt=null,this.PEt=null,this.kEt=new Set(s)}FEt(t){const s=t[19],i=this.kc.USt(t[0]);if(!i)throw new Error("missing plugin");OM.IGt(t,i,s);const e=s>=2?OM.yIt:i,n=OM.Qn(e,{runtime:this.kc,Yz:t[1],wIt:t[2],tB:t[5],iB:t[8],bIt:t[9],CIt:t[13],aB:t[14],Xz:t[17],nB:t[18],DIt:s,id:t[20],name:t[21],kIt:s>=2?i:null});n.jIt(),this.AEt.push(n),WM.set(i,n)}jEt(){this.jTt=OM.Qn(OM._j.Dj,{runtime:this.kc,Yz:!0}),this.jTt.jIt()}zEt(t){const s=t[1],i=t[2],e=t[3],n=this.kc.USt(t[0]);if(!n)throw new Error("missing behavior");this.OEt.set(n,(()=>{const t=s>=2?OM.yEt:n,r=OM.Qn(t,{runtime:this.kc,id:i,name:e,DIt:s,kIt:s>=2?n:null});r.jIt(),this.LEt.push(r),QM.set(n,r),!this.REt&&OM.Rut.BEt&&r instanceof OM.Rut.BEt?this.REt=r:!this.PEt&&OM.Rut.UEt&&r instanceof OM.Rut.UEt&&(this.PEt=r),r.UIt()}))}WEt(t){const s=this.OEt.get(t);s&&(s(),this.OEt.delete(t))}static WIt(t,s=1){if(OM.Qz.WIt!==jM)throw new Error("invalid method");1===s&&PM.push(t),kM.push(t)}static QIt(t=1){if(OM.Qz.QIt!==zM)throw new Error("invalid method");1===t&&PM.pop(),kM.pop()}static JW(){if(OM.Qz.JW!==BM)throw new Error("invalid method");if(0===PM.length)throw new Error("no init object set");return PM.at(-1)}static Wz(t){if(OM.Qz.Wz!==UM)throw new Error("invalid method");if(LM(t),0===kM.length)throw new Error("no init object set");return kM.at(-1)}static QEt(t){FM.push(t)}static JEt(){FM.pop()}static TQ(){if(0===FM.length)throw new Error("no init properties set");return FM.at(-1)}VEt(){for(const t of this.AEt)t.UIt()}static fB(t){return WM.get(t)||null}static JV(t){return QM.get(t)||null}KK(){return this.jTt}YEt(){return this.REt}HEt(){return this.PEt}UQ(t){return this.kEt.has(t)}},jM=OM.Qz.WIt,zM=OM.Qz.QIt,BM=OM.Qz.JW,UM=OM.Qz.Wz}{const JM=self.Gs,VM=new Set;JM.qEt=class extends JM.Un{constructor(){super(),this.ZEt=0,this.dX="",this.pX=0,this.KEt=0,this.XEt=0,this.Ng=0,this.Eg=0,this.$Et=!1,this.tDt=!1,this.sDt=null,this.iDt="",this.BE=JM.Qn(JM.Rect),this.eDt=JM.Qn(JM.Iu),this.nDt="",this.rDt=new self.Pj(this),VM.add(this)}Jn(){this.QE(),this.sDt&&0===this.sDt.NX()&&this.sDt.Jn(),this.sDt=null,VM.delete(this),this.hDt()}static CX(){for(const t of VM)t.iDt="",t.BE.set(0,0,0,0),t.eDt.Hu(t.BE)}oDt(t){this.dX=t[0],this.pX=t[1],this.KEt=t[2],this.XEt=t[3],this.Ng=t[4],this.Eg=t[5],this.$Et=t[6],this.tDt=!0}aDt(t,s,i){if(i=!!i,this.sDt)throw new Error("already loaded asset");this.dX=s;const e={FK:i};return JM.Zh(s)&&(e.jK="remote"),this.kj(t,e),this.sDt.BK()}uDt(t,s){if(this.sDt)throw new Error("already loaded asset");this.dX="",this.pX=s.size,this.sDt=JM.Qn(JM.zK,t.nk(),{blob:s,size:this.pX,jK:"local"})}lDt(t){if(t===this)throw new Error("cannot replace with self");this.ZEt++,this.QE(),this.dX=t.dX,this.pX=t.pX,this.KEt=t.KEt,this.XEt=t.XEt,this.Ng=t.Ng,this.Eg=t.Eg,this.$Et=t.$Et,this.tDt=t.tDt,this.sDt=t.sDt,this.iDt=t.iDt,this.BE=t.BE,this.eDt=t.eDt,this.hDt()}QK(){return this.dX}Al(){return this.pX}cDt(){return this.KEt}fDt(){return this.XEt}YNt(){return this.$Et}Vy(){return this.Ng}ig(){return this.Eg}dDt(){return this.sDt.Vy()}pDt(){return this.sDt.ig()}kj(t,s){if(this.sDt)throw new Error("already got asset");s=Object.assign({},s,{url:this.QK(),size:this.Al()}),this.sDt=t.kK(s)}MX(){return this.sDt&&this.sDt.MX()}async MZ(t,s){if(!this.sDt)throw new Error("no asset");if(this.iDt)throw new Error("already loaded texture");const i=this.ZEt;this.iDt="loading";const e=await this.sDt.MZ(t,s);if(this.ZEt!==i)return null;if(!e)return this.iDt="",null;this.iDt="loaded",this.tDt||(this.Ng=e.Vy(),this.Eg=e.ig(),this.tDt=!0);const n=this.$Et?this.Eg:this.Ng,r=this.$Et?this.Ng:this.Eg;return this.BE.set(this.KEt,this.XEt,this.KEt+n,this.XEt+r),this.BE.Mt(e.Vy(),e.ig()),this.eDt.Hu(this.BE),this.$Et&&this.eDt.tl(),e}QE(){this.iDt&&(this.sDt&&this.sDt.QE(),this.iDt="",this.BE.set(0,0,0,0),this.eDt.Hu(this.BE))}lC(){return this.sDt&&"loaded"===this.iDt?this.sDt.lC():null}$D(){return this.BE}JNt(){return this.eDt}SH(){return this.rDt}mDt(){return this.sDt}async yDt(t){t||(t=await this.sDt.EX());const s=JM.lo(this.Ng,this.Eg),i=s.getContext("2d");return this.$Et?(i.rotate(Math.PI/-2),i.translate(-this.Eg,0),i.drawImage(t,this.KEt,this.XEt,this.Eg,this.Ng,0,0,this.Eg,this.Ng)):i.drawImage(t,this.KEt,this.XEt,this.Ng,this.Eg,0,0,this.Ng,this.Eg),s}async gDt(t){if(this.nDt)return this.nDt;const s=await this.yDt(t),i=await JM.co(s);return this.nDt=URL.createObjectURL(i),this.nDt}hDt(){this.nDt&&(URL.revokeObjectURL(this.nDt),this.nDt="")}}}{const YM=self.Gs;YM.MDt=class extends YM.Un{constructor(t){super(),this.Hn=t[0],this.wDt=t[1],this.qbt=!!t[2],this.Zot=t[3],this.SDt=t[4],this.TDt=!!t[5],this.f$=t[6],this.bDt=t[7].map((t=>YM.Qn(YM.vDt,t))),this.xDt=new self.KV(this)}static CDt(t,s){const i=YM.Qn(YM.MDt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.bDt.push(YM.vDt.CDt(t)),i}Jn(){for(const t of this.bDt)t.Jn();YM.wh(this.bDt)}GDt(t){for(const s of this.bDt)s.mY().kj(t)}IDt(t,s){return Promise.all(this.bDt.map((i=>i.mY().MZ(t,s))))}NDt(){for(const t of this.bDt)t.mY().QE()}Nc(){return this.Hn}W0(){return this.f$}oY(){return this.bDt.length}uY(){return this.bDt}EDt(t){if((t=Math.floor(t))<0||t>=this.bDt.length)throw new RangeError("invalid frame");return this.bDt[t]}DDt(t,s){(s=Math.floor(s))<0?this.bDt.unshift(t):s>=this.bDt.length?this.bDt.push(t):this.bDt.splice(s,0,t)}_Dt(t){if((t=Math.floor(t))<0||t>=this.bDt.length)throw new RangeError("invalid frame");this.bDt[t].Jn(),this.bDt.splice(t,1)}ADt(t){for(let s=0,i=this.bDt.length;s<i;++s)if(YM.Ke(this.bDt[s].EY(),t))return s;return-1}LDt(t){if("string"==typeof t){const s=this.ADt(t);if(-1===s)throw new Error(`cannot find animation frame with tag ${t}`);return s}return t}XV(){return this.wDt}tY(){return this.qbt}iY(){return this.Zot}nY(){return this.SDt}hY(){return this.TDt}ODt(){return this.xDt}}}{const HM=self.Gs,qM=(()=>{const t=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),s=new Uint8Array(t.length);for(let i=0,e=t.length;i<e;++i)s[i]=t.charCodeAt(i);return new Blob([s],{type:"image/png"})})();HM.vDt=class extends HM.Un{constructor(t){super(),this.RDt=HM.Qn(HM.qEt),this.RDt.oDt(t),this.PDt=t[7],this.kDt=HM.Qn(HM.Ia,t[8],t[9]),this.FDt=t[10].map((t=>HM.Qn(HM.jDt,this,t))),this.zDt=new Map;for(const t of this.FDt)this.zDt.set(t.Nc().toLowerCase(),t);this.BDt=null;const s=t[11];s.length>=6&&(this.BDt=HM.Qn(HM.ol,s)),this.NM=t[12]?t[12]:"",this.UDt=new self.pY(this)}static CDt(t){const s=HM.Qn(HM.vDt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.RDt.uDt(t,qM),s}Jn(){this.BDt&&(this.BDt.Jn(),this.BDt=null),this.RDt.Jn(),this.RDt=null}mY(){return this.RDt}yY(){return this.PDt}eJ(){return this.kDt.Aa()}hJ(){return this.kDt.Oa()}CY(){return this.BDt}vY(t){return this.zDt.get(t.toLowerCase())||null}bY(t){return(t=Math.floor(t))<0||t>=this.FDt.length?null:this.FDt[t]}MY(){return this.FDt.length}EY(){return this.NM}lY(){return this.UDt}}}{const ZM=self.Gs;ZM.jDt=class extends ZM.Un{constructor(t,s){super(),this.WDt=t,this.Hn=s[0],this.QDt=ZM.Qn(ZM.Ia,s[1],s[2])}Jn(){}Nc(){return this.Hn}Wb(){return this.QDt.Aa()}Vb(){return this.QDt.Oa()}JDt(){return this.QDt}}}{const KM=globalThis.Gs,XM=globalThis.AQ,$M=(globalThis.wB,globalThis.OB),tw=globalThis.ZB;globalThis.assert;KM.Flt=class extends KM.Un{constructor(t,s,i){super();const e=t.USt(i[1]);this.kc=t,this.sNt=KM.Qz.fB(e),this.oNt=null,this.VDt=e.Instance,this.IM=s,this.f$=i[11],this.Hn=i[0],this.GTt=this.kc.uyt(i[14]),this.YDt=!!i[9],this.HDt=!!i[2],this.qDt=!!i[10],this.ZDt=i[3].map((s=>({XX:s[0],type:s[1],name:s[2],KDt:t.uyt(s[3])}))),this.XDt=i[4],this.$Dt=i[5],this.MIt=this.sNt.Kz(),this.t_t=KM.Qn(KM.Event.gf),this.Y$=null;const[n,r]=t.ak().fz();if(this.s_t=KM.Qn(KM.i_t,n,r),this.e_t=!0,this.n_t=null,this.r_t=null,this.h_t=-1,this.o_t=null,this.a_t=null,this.u_t=null,this.l_t=null,this.c_t=null,this.f_t=!1,this.d_t=null,this.p_t=i[8].map((t=>KM.m_t.DC(this,t))),this.y_t=[],this.g_t=new Map,this.M_t=new Map,this.w_t=new Set,this.S_t=new Map,this.T_t=KM.Qn(KM.Ldt,this),this.b_t=null,this.v_t=0,this.x_t=!1,this.d_t=null,this.RDt=null,this.C_t=null,this.G_t=null,this.I_t=null,this.N_t=0,this.tvt=new Map,this.svt=new Map,this.LX=[],this.E_t=new Map,this.D_t=!0,this.sNt.eB()&&(this.Y$=KM.Qn(KM.H$,this,i[12])),i[6]&&(this.RDt=KM.Qn(KM.qEt),this.RDt.oDt(i[6])),i[7]){this.C_t=i[7].map((t=>KM.Qn(KM.MDt,t))),this.G_t=new Map,this.I_t=new Map;for(const t of this.C_t)this.G_t.set(t.Nc().toLowerCase(),t),this.I_t.set(t.W0(),t)}this.HDt?(this.n_t=[],this.r_t=new Set,this.h_t=this.kc.__t()):(this.o_t=[],this.a_t=new Set,this.u_t=[],this.l_t=[],this.c_t=[]);const h=this.sNt.Svt();if(h<2&&(this.oNt=KM.Qn(e.A_t,this,i[15]),!(this.oNt instanceof KM.tNt)))throw new Error("v1 sdk type must derive from SDKTypeBase");let o;if(this.L_t=null,this.O_t=null,this.n3=KM.Qn(KM.Event.gf),KM.Qz.WIt(this,h),h>=2?(o=e.A_t,o||(o=globalThis.gH)):o=this.oNt.zIt(),o&&!this.HDt){if(this.L_t=new o(h<2?this:null),h<2&&!(this.L_t instanceof $M))throw new TypeError("script interface class must derive from IObjectType");if(h>=2&&!(this.L_t instanceof globalThis.gH))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else{const t=this.HDt?tw:$M;this.L_t=new t}if(KM.Qz.QIt(h),i[13]){const t=i[13];if(t){const s=t[0],i=t[1],e=t[2];this.oNt.iNt(s,i,e)}}this.kc.R_t()&&!this.HDt&&!this.qDt&&this.MIt||this.jIt(),this.sNt.qz()&&(this.sNt.BIt(this),this.P_t(i)),this.k_t=null}static DC(t,s,i){return KM.Qn(KM.Flt,t,s,i)}Jn(){if(this.t_t.Jn(),this.t_t=null,this.RDt&&(this.RDt.Jn(),this.RDt=null),this.C_t){for(const t of this.C_t)t.Jn();KM.wh(this.C_t),this.G_t.clear(),this.I_t.clear()}this.k_t=null,this.T_t.Jn(),this.T_t=null,this.tvt.clear(),this.svt.clear(),this.d_t=null,this.kc=null}F_t(t){for(let s=1,i=t.length;s<i;++s){const i=this.kc.f0(t[s]);this.n_t.push(i),this.r_t.add(i),i.o_t.push(this),i.a_t.add(this)}}j_t(t){this.f_t=!0,this.d_t=t}XW(){return this.f_t}D3(){return this.d_t}z_t(){let t=0;if(!this.HDt)for(const s of this.o_t)for(const i of s.B_t()){const s=i.Nc().toLowerCase();this.g_t.set(s,i),this.M_t.set(s,t),this.y_t.push(i),++t}for(const s of this.B_t()){const i=s.Nc().toLowerCase();this.g_t.set(i,s),this.M_t.set(i,t),this.y_t.push(s),++t}for(const t of this.y_t)this.w_t.add(t.kV().constructor);if(!this.HDt&&this.o_t.length){const t=this.kc.U_t();KM.Th(this.u_t,t,0),KM.Th(this.l_t,t,0),KM.Th(this.c_t,t,0);const s=[];let i=0,e=0,n=0;for(const t of this.o_t){const r=t.ibt();this.u_t[r]=i,i+=t.W_t(),this.l_t[r]=e,e+=t.Q_t(),this.c_t[r]=n,n+=t.J_t();const h=t.eU();if(h&&this.Y$)for(const t of h.nU())s.push(t.V_t(this.Y$))}this.Y$&&this.Y$.Y_t(s)}}P_t(t){const s=KM.$i(t[17])?t[17]:this.kc.H_t(),i=KM.Qn(KM.Instance,{runtime:this.kc,objectType:this,uid:s});i.q_t(t[16],[]),this.kc.Z_t(s,i),this.LX.push(i)}gxt(){return this.oNt}K_t(){return this.qDt}gf(){return this.t_t}jIt(){this.HDt||(this.oNt?this.oNt.jIt():this.L_t.MH())}X_t(){return this.N_t>0}async L3(t){this.HDt||(this.N_t++,1===this.N_t&&(this.oNt?await this.oNt.L3(t):await this.L_t.TH(this.kc.Cj().$_t())))}z3(){if(!this.HDt){if(this.N_t--,this.N_t<0)throw new Error("released textures too many times");0===this.N_t&&(this.oNt?this.oNt.z3():this.L_t.bH(this.kc.Cj().$_t()))}}P3(){if(this.HDt)throw new Error("not applicable to family");this.oNt?this.oNt.P3():this.L_t.vH()}async a5(t){this.HDt||(this.oNt?await this.oNt.a5(t):await this.L_t.xH(this.kc.Cj().$_t()))}Fj(){return this.kc}TB(){return this.sNt}tAt(){return this.VDt}Nc(){return this.Hn}uyt(){return this.GTt}$P(){return this.IM}W0(){return this.f$}P0(){return this.HDt}b0(){return this.YDt}Kz(){return this.MIt}ibt(){return this.h_t}B_t(){return this.p_t}Q_t(){return this.XDt}sAt(t){return t&&this.w_t.has(t)}W_t(){return this.ZDt.length}iAt(){return this.ZDt.map((t=>t.XX))}eAt(t){return this.ZDt.findIndex((s=>s.XX===t))}Mit(t){return this.ZDt.findIndex((s=>s.name===t))}nAt(){return this.ZDt.map((t=>t.name))}rAt(){return this.ZDt.map((t=>t.KDt))}Sit(t){if((t=Math.floor(t))<0||t>=this.ZDt.length)throw new RangeError("invalid instance variable index");return this.ZDt[t].type}wit(t){if((t=Math.floor(t))<0||t>=this.ZDt.length)throw new RangeError("invalid instance variable index");return this.ZDt[t].name}J_t(){return this.$Dt}hAt(){return this.y_t}$nt(t){return this.g_t.get(t.toLowerCase())||null}bit(t){const s=this.M_t.get(t.toLowerCase());return void 0===s?-1:s}eU(){return this.Y$}eB(){return this.sNt.eB()}oAt(){return this.Y$&&this.Y$.aAt()}Kyt(){return this.T_t}LB(){return this.T_t.LB()}mY(){return this.RDt}m0(t){this.b_t=t}p0(){return this.b_t}y0(t){this.v_t=t}uAt(){return this.v_t}lAt(){return this.C_t}cAt(){return this.C_t.length}YB(){return this.o_t}vxt(t){return this.a_t.has(t)}$B(){return this.n_t}sU(t){return this.r_t.has(t)}obt(t){return this.l_t[t]}sbt(t){return this.u_t[t]}lTt(t){this.S_t.set(t.mTt().toLowerCase(),t)}cTt(t){return!!this.TTt(t)}TTt(t){const s=this.S_t.get(t.toLowerCase());return s&&s.Cl()?s:null}fAt(){return this.C_t}dAt(t){if(!this.C_t)throw new Error("no animations");return this.G_t.get(t.toLowerCase())||null}pAt(t){if(!this.C_t)throw new Error("no animations");return this.I_t.get(t)||null}mAt(t){if(this.dAt(t))throw new Error(`animation name '${t}' already exists`);const s=KM.MDt.CDt(this.Fj(),t);return this.C_t.push(s),this.G_t.set(s.Nc().toLowerCase(),s),this.I_t.set(s.W0(),s),s}yAt(t){const s=this.dAt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.C_t.length)throw new Error("cannot remove last animation");const i=this.C_t.indexOf(s);this.C_t.splice(i,1),this.G_t.delete(s.Nc().toLowerCase()),this.I_t.delete(s.W0()),s.Jn()}gAt(){if(!this.C_t)throw new Error("no animations");return this.C_t[0]}MAt(){return this.gAt().EDt(0)}wAt(){if(this.C_t){const t=this.MAt().mY();return[t.Vy(),t.ig()]}return this.RDt?[this.RDt.Vy(),this.RDt.ig()]:[100,100]}MB(){if(!this.sNt.qz())throw new Error("not a single-global plugin");return this.LX[0]}AB(){return this.LX}*vB(){yield*this.LX}*_B(){yield*this.LX,yield*this.kc.ICt(this)}PB(){return this.LX.length}v0(t){this.LX.push(t)}SAt(){this.D_t=!0}m5(){if(!this.D_t||this.HDt)return;const t=this.LX;let s=0;for(let i=t.length;s<i;++s)t[s].TAt(s);const i=this.kc.bAt();for(const t of i)t.BW()===this&&t.TAt(s++);this.D_t=!1}vAt(t){const s=this.LX;if(t<s.length)return s[t];t-=s.length;const i=this.kc.bAt();for(const s of i)if(s.BW()===this){if(0===t)return s;--t}return null}lCt(t){if(t&&t.XW()&&t.BW()!==this)for(const s of t.$W())if(s.BW()===this)return s;const s=this.LB().AB();return s.length?s[0]:null}DB(t){const s=this.LB().AB();return s.length>0?s[t.iQ()%s.length]:null}*LCt(t,s){const i=this.LB().AB(),e=i.length,n=s.LB(),r=s.LB().AB(),h=r.length;let o=t.iQ();!s.P0()&&n.Vdt()||(o=r.indexOf(t));const a=Math.ceil(e/h),u=e%h;let l=0,c=0;0===u||o<u?(l=o*a,c=a):(l=u*a+(o-u)*(a-1),c=a-1);for(let t=l,s=l+c;t<s;++t)yield i[t]}Avt(t){this.oNt?.Avt(t)}LSt(){if(!this.f_t||this.HDt)return;this.m5();const t=this.LB(),s=t.tpt(),i=t.Vdt(),e=this.kc.$mt(),n=e&&e.Jk()&&e.Jk().upt();for(const e of this.d_t.tU()){if(e===this)continue;e.m5();const r=e.LB();if(r.$dt(i),!i){const i=r.tpt();KM.wh(i);for(const t of s)i.push(e.vAt(t.iQ()));if(n){const s=t.spt(),i=r.spt();KM.wh(i);for(const t of s)i.push(e.vAt(t.iQ()))}}}}kvt(t,s){for(const i of this.D3().tU()){const e=i.LB();t?KM.Mh(e.spt(),s):KM.Mh(e.tpt(),s)}}xAt(){return this.s_t}CAt(t){this.e_t=!!t}GAt(){if(this.e_t&&this.MIt){for(const t of this.LX)t.lj().IAt();for(const t of this.kc.bAt())t.BW()===this&&t.lj().IAt();this.e_t=!1}}NAt(t,s,i){if(s){const i=this.E_t.get(s);i&&(i.delete(t),0===i.size&&this.E_t.delete(s))}if(i){let s=this.E_t.get(i);s||(s=new Set,this.E_t.set(i,s)),s.add(t)}}*EAt(){if(this.P0()){const t=new Set;for(const s of this.n_t)for(const i of s.EAt())t.add(i);yield*t.values()}else for(const t of this.E_t.keys())t.Vn()||(yield t)}Gvt(){return this.tvt||(this.tvt=new Map),this.tvt}Ivt(){return this.svt||(this.svt=new Map),this.svt}DAt(){return this.sAt(KM.Rut.BEt)}_At(){return this.sAt(KM.Rut.UEt)}AAt(){return this.sAt(KM.Rut.LAt)}S0(){return this.sAt(KM.Rut.OAt)}w4(){const t={instances:this.LX.map((t=>t.ev()))};return this.tvt&&this.tvt.size&&(t.ex=KM.Mo(this.tvt)),t}S4(t,s){this.tvt&&(this.tvt.clear(),this.tvt=null);const i=t.ex;i&&(this.tvt=KM.wo(i));const e=this.LX,n=t.instances;for(let t=0,s=Math.min(e.length,n.length);t<s;++t)e[t].nv(n[t]);for(let t=n.length,s=e.length;t<s;++t)this.kc.YW(e[t]);for(let t=e.length,i=n.length;t<i;++t){const i=n[t];let e=null;if(this.Kz()&&(e=this.kc.UF().S3(i.w.l),!e))continue;const r=this.kc.T0(this.b_t||this,e,!1,0,0,!0);r.nv(i),s&&s.add(r)}this.k_t=n,this.SAt()}RAt(){return this.k_t}PAt(){this.k_t=null}kAt(){for(let t=0,s=this.LX;t<s;++t)this.LX[t].kAt()}mB(){return this.L_t}Rk(){return this.n3}FAt(){return this.O_t}kB(t){this.O_t=t}qK(t){const s=this.kc,i=s._Q()&&!s.jk().WB();i&&XM.z5(),this.n3.dispatchEvent(t),i&&XM.B5()}}}{const sw=self.Gs;sw.jAt=class extends sw.Un{constructor(t,s){super(),this.kc=t,this.zAt=s;for(const t of this.zAt)t.j_t(this)}Jn(){this.kc=null}Fj(){return this.kc}E3(){return this.zAt}tU(){return this.zAt}g5(){return this.zAt.some((t=>t.Kz()))}}}{const iw=self.Gs,ew=self.AQ,nw=(self.zW,iw.Qz),rw=[];let hw=0;const ow=new WeakMap,aw=new WeakMap;iw.Instance=class extends iw.Un{constructor(t){if(iw.Qz!==nw)throw new Error("invalid addon manager");super(),this.kc=t.runtime,this.BAt=t.objectType,this.Vst=null,this.UAt=null,this.WAt=null,this.QAt=0,this.JAt=t.uid,this.VAt=hw++,this.Bvt=0,this.YAt=null;const s=iw.Rh(t.tags);s.length>0&&(this.YAt=new Set(s)),this.HAt=rw,this.qAt=rw;const i=this.BAt.hAt();i.length>0&&(this.qAt=i.map(((t,s)=>iw.Qn(iw.ZAt,{runtime:this.kc,FV:t,BV:this,index:s})))),this.KAt=this.BAt.XW()?[]:null,this.XAt=-1,this.t_t=null;const e=this.TB();if(e.yb()&&(this.Bvt|=4),e.Kz())if(this.Vst=iw.Qn(iw.$At,this,t.KQ),t.tLt)this.Vst.sLt(t.tLt);else{this.Vst.iLt();const[t,s]=this.BAt.wAt();this.Vst.bD(t,s),this.BW().oAt()&&this.Vst.ZQ().eLt()}t.nLt?this.rLt(t.nLt):this.hLt()}Jn(){if(this.WAt&&(this.WAt.VW(),this.WAt=null),this.qAt.length>0){for(const t of this.qAt)t.Jn();iw.wh(this.qAt)}this.UAt&&(this.UAt.Jn(),this.UAt=null);const t=ow.get(this);t&&(t.clear(),ow.delete(this));const s=aw.get(this);s&&(s.clear(),aw.delete(this)),this.KAt&&iw.wh(this.KAt),this.t_t&&(this.t_t.Jn(),this.t_t=null),this.YAt&&this.YAt.clear(),this.YAt=null,this.kc=null,this.BAt=null,this.HAt.length>0&&iw.wh(this.HAt),this.Vst&&(this.Vst.Jn(),this.Vst=null)}rLt(t){t.length>0&&(this.HAt=[],iw.xh(this.HAt,t))}hLt(){const t=this.BAt.W_t();if(0===t)return;this.HAt=[];const s=[0,0,""];for(let i=0;i<t;++i)this.HAt.push(s[this.BAt.Sit(i)])}q_t(t,s){if(this.UAt)throw new Error("already got sdk instance");for(let t=0,i=this.qAt.length;t<i;++t)this.qAt[t].q_t(s?s[t]:null);if(this.TB().Svt()<2){if(this.UAt=iw.Qn(this.BAt.tAt(),this,t),!(this.UAt instanceof iw.rNt))throw new Error("sdk type must derive from SDKInstanceBase");!this.TB().Kz()&&this.BAt.FAt()&&this.hj()}else{const s=this.TB().zIt();this.oLt(s.Instance,t)}}DV(){return this.UAt??this.WAt}lj(){return this.Vst}Fj(){return this.kc}MF(){return this.XAt}rQ(){const t=this.XAt;return-1===t?this.Fj().MF():t}wF(t){((t=+t)<0||!isFinite(t))&&(t=0),this.XAt=t,this.BW().oAt()&&this.kc.aLt(this,!0)}oQ(){this.XAt=-1,this.BW().oAt()&&this.kc.aLt(this,!1)}o4(){return this.kc.uLt(this)}gf(){return this.t_t||(this.t_t=iw.Qn(iw.Event.gf)),this.t_t}Av(t){this.UAt?this.UAt.Av(t):this.WAt.EH(this.kc.Cj().$_t())}jIt(t){this.UAt.jIt(t)}lLt(){this.Bvt|=2}cLt(){return!!(2&this.Bvt)}fLt(){this.Bvt|=1}JH(){return!!(1&this.Bvt)}yb(){return!!(4&this.Bvt)||this.UAt.yb()}dLt(){this.Bvt|=32}K2(){return!!(32&this.Bvt)}pLt(){return!!(8&this.Bvt)}mLt(t){t?this.Bvt|=8:this.Bvt&=-9}yLt(){return!!(16&this.Bvt)}gLt(t){t?this.Bvt|=16:this.Bvt&=-17}MLt(){return!!(64&this.Bvt)}wLt(t){t?this.Bvt|=64:this.Bvt&=-65}SLt(t,s){t<<=16,s?this.Bvt|=t:this.Bvt&=~t}TLt(t){return!!(this.Bvt&t<<16)}BNt(){return this.UAt.BNt()}UNt(){return this.UAt.UNt()}WNt(){return this.UAt.WNt()}QNt(){return this.UAt.QNt()}VNt(){return this.UAt.VNt()}Lxt(t){return this.UAt.Lxt(t)}BW(){return this.BAt}q2(){return this.UAt.q2()}NCt(t){return t.P0()?t.sU(this.BW()):this.BW()===t}bLt(t,s,i){const e=(s,i)=>{const e=i||s.BW(),n=t.get(e);n?n.add(s):t.set(e,new Set([s]))};if(e(this,s),this.XW())for(const t of this.$W())e(t);if(i)for(const t of this.UJ())e(t)}vLt(){if(!this.TB().oB())throw new Error("object does not support scene graph")}YJ(){return null!==this.OJ()}OJ(){const t=this.lj();if(!t)return null;const s=t.OJ();return s?s.iH():null}PJ(){const t=this.lj();if(!t)return null;const s=t.PJ();return s?s.iH():null}*kJ(){const t=this.lj();if(t)for(const s of t.kJ())yield s.iH()}xLt(t){if(!t)return!1;for(const s of this.children())if(s===t)return!0;return!1}v4(){const t=this.lj();return!!t&&t.v4()}CLt(t){const s=this.lj();if(!s)return[];const i=t.Nc();return s.C5().map((t=>t.iH())).filter((t=>t.BW().Nc()===i))}C5(){const t=this.lj();return t?t.C5().map((t=>t.iH())):[]}*children(){const t=this.lj();if(t)for(const s of t.children())yield s.iH()}*UJ(){const t=this.lj();if(t)for(const s of t.UJ())yield s.iH()}jJ(){const t=this.lj();return t?t.jJ():0}GLt(){return[...this.kJ()].length}ACt(){const t=this.lj();return t?t.ACt():0}BJ(t){const s=this.lj();if(!s)return null;const i=s.BJ(t);return i?i.iH():null}ILt(){const t=this.lj();if(!t)return NaN;const s=t.OJ();return s?s.NLt(t):NaN}ELt(t){for(const s of this.lj().C5())if(s.iH().tQ()===t)return!0;return!1}QJ(t,s){this.vLt(),t.vLt(),this.lj().QJ(t.lj(),s||{})}JJ(t){const s=this.lj();s&&s.JJ(t.lj())}fV(){const t=this.lj();return!!t&&t.fV()}n5(){const t=this.lj();if(!t)return;const s=t.DLt();if(s)for(const t of s){const s=this.kc.rj(t[2]);if(s){const i=t[3];this.QJ(s,{qJ:!!(1&i),KJ:!!(i>>1&1),$J:!!(i>>2&1),sV:!!(i>>3&1),eV:!!(i>>4&1),cV:!!(i>>5&1),rV:!!(i>>6&1),oV:!!(i>>7&1),uV:!!(i>>8&1)})}}}r5(t,s){const i=t.get(this);if(i)for(const t of i.sceneGraphJson.children){const i=s.get(t.index);if(!i)continue;const e=t.flags;this.QJ(i,{qJ:!!(1&e),KJ:!!(e>>1&1),$J:!!(e>>2&1),sV:!!(e>>3&1),eV:!!(e>>4&1),cV:!!(e>>5&1),rV:!!(e>>6&1),oV:!!(e>>7&1),uV:!!(e>>8&1)})}}nQ(){const t=this.kc._Lt();return t?t.zlt(this):""}XW(){return null!==this.KAt}ALt(){iw.wh(this.KAt)}p5(t){this.KAt.push(t)}ZW(){return this.KAt}LLt(t){return!!this.OLt(t)}OLt(t){const s=this.$W();if(null===s||0===s.length)return!1;for(const i of s)if(i.BW()===t)return i;return null}$W(){return this.KAt}FMt(){for(const t of this.$W())t.BW().LB().ipt(t)}Lvt(){for(const t of this.$W())t.BW().LB().Kdt(t)}Ovt(t){for(const s of this.$W())s.BW().LB().tpt()[t]=s}Pvt(){for(const t of this.$W())t.BW().LB().Xdt(t)}Rvt(t){for(const s of this.$W())s.BW().LB().spt()[t]=s}TB(){return this.BAt.TB()}TAt(t){this.QAt=t}iQ(){return this.BAt.m5(),this.QAt}tQ(){return this.JAt}RLt(t){this.JAt=t}PLt(){return this.VAt}kLt(t){t?this.cQ(new Set(t)):this.YAt=null}cQ(t){if(0===t.size)this.YAt=null;else{this.YAt?this.YAt.clear():this.YAt=new Set;for(const s of t)this.YAt.add(s)}}uQ(){return this.YAt??new Set}eGt(){return Array.from(this.uQ()).join(" ")}hGt(t){t=Math.floor(t);for(const s of this.uQ()){if(0===t)return s;--t}return""}Xnt(){return this.qAt}FLt(t){if(!t)return null;for(const s of this.qAt)if(s.kV()instanceof t)return s;return null}jLt(t){if(!t)return null;const s=this.FLt(t);return s?s.DV():null}Knt(t){const s=this.qAt;for(let i=0,e=s.length;i<e;++i)if(s[i].zV().W0()===t)return i;return-1}zLt(){return this.HAt}nAt(){return this.BAt.nAt()}BLt(){return this.HAt.length}Eht(t){t|=0;const s=this.HAt;if(t<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}$Tt(t){return this.HAt[t]}ULt(t){const s=this.HAt[t];return 0===this.BAt.Sit(t)?!!s:s}Dht(t,s){t|=0;const i=this.HAt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");switch(this.BAt.Sit(t)){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}Sot(t,s){if(0===s)return;t|=0;const i=this.HAt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}Gvt(){let t=ow.get(this);return t||(t=new Map,ow.set(this,t),t)}Ivt(){let t=aw.get(this);return t||(t=new Map,aw.set(this,t),t)}WLt(t){const s=this.BW();if(s.Rk().bf(t))return!0;for(const i of s.YB())if(i.Rk().bf(t))return!0;return!!this.kc.Rk().bf(t)}UB(t=void 0){const s=t??new Set;if(s.has(this))return;s.add(this);const i=this.lj();if(i&&i.v4())for(const t of this.UJ())if(s.add(t),t.XW())for(const i of t.$W())s.add(i);if(this.XW())for(const t of this.$W())t.UB(s);if(!t){for(const t of s.values())t.h5();this.o5()}}QLt(){this.BAt.FAt()&&this.hj();for(const t of this.qAt)t.GEt()}JLt(){this.QLt()}h5(){if(this.QLt(),this.WLt("instancecreate")){const t=this.BW(),s=new iw.Event("instancecreate");s.BV=this.hj(),t.qK(s);for(const i of t.YB())i.qK(s);this.kc.qK(s)}this.kc.vQ(this.TB().xgt().Ej.uGt,this,null)}o5(){if(this.TB().oB()){if(this.qK(new iw.Event("hierarchyready")),this.WLt("hierarchyready")){const t=this.BW(),s=new iw.Event("hierarchyready");s.BV=this.hj(),t.qK(s);for(const i of t.YB())i.qK(s);this.kc.qK(s)}this.kc.vQ(this.TB().xgt().Ej.CCt,this,null)}}VLt(){this.kc.vQ(this.TB().xgt().Ej.lGt,this,null)}YLt(t){if(this.WAt){const s=new iw.Event("destroy");s.HLt=t,this.qK(s)}if(!this.WLt("instancedestroy"))return;const s=this.BW(),i=new iw.Event("instancedestroy");i.BV=this.hj(),i.HLt=t,s.qK(i);for(const t of s.YB())t.qK(i);this.kc.qK(i)}qLt(){return this.UAt?this.UAt.NNt():this.WAt.FQ()}ev(t="full",s=null){const i={};"full"===t?i.uid=this.tQ():i.c3=!0;const e=this.uQ();if(e.size>0&&(i.tags=Array.from(e)),"visual-state"!==t){const s=ow.get(this);if(s&&s.size&&(i.ex=iw.Mo(s)),-1!==this.MF()&&(i.mts=this.MF()),this.BAt.W_t()>0){const t={},s=this.BAt.iAt();for(let i=0,e=this.HAt.length;i<e;++i)t[s[i].toString()]=this.HAt[i];i.ivs=t}if(this.qAt.length){const s={};for(const i of this.qAt){const e=i.ev(t);e&&(s[i.zV().W0().toString()]=e)}i.behs=s}}this.Vst&&(i.w=this.Vst.w4(t,s));const n=this.UAt?this.UAt.ev():this.WAt.jQ();return n&&(i.data=n),i}E6(t="full",s=null){this.Vst&&this.Vst.E6(t)}_6(t,s="full",i=null){this.Vst&&this.Vst._6(t,s,i)}ZLt(t,s="full",i=null){this.Vst&&this.Vst.ZLt(t,s,i)}kAt(){this.TB().Kz()&&this.Vst.kAt()}nv(t,s="full",i=null){if("full"===s)this.JAt=t.uid;else if(!t.c3)return;if(this.kLt(t.tags),"visual-state"!==s){let s=ow.get(this);s&&(s.clear(),ow.delete(this));const i=t.ex;i&&(s=iw.wo(i),ow.set(this,s)),this.XAt=t.hasOwnProperty("mts")?t.mts:-1;const e=t.ivs;if(e)for(const[t,s]of Object.entries(e)){const i=parseInt(t,10),e=this.BAt.eAt(i);if(e<0||e>=this.HAt.length)continue;let n=s;null===n&&(n=NaN),this.HAt[e]=n}}if(this.TB().Kz()){const e=t.w;if(e){const t=e.l;if(this.Vst.cj().W0()!==t){const i=this.Vst.cj(),e=i.VF().S3(t);e?(this.Vst.mj(e),i.G0(this,!0),e.v0(this,!0),e.yj(this),this.Vst.XQ()):"full"===s&&this.kc.YW(this)}this.Vst.S4(e,s,i)}}if("visual-state"!==s){const i=t.behs;if(i)for(const[t,e]of Object.entries(i)){const i=parseInt(t,10),n=this.Knt(i);n<0||n>=this.qAt.length||this.qAt[n].nv(e,s)}}const e=t.data;e&&(this.UAt?this.UAt.nv(e,s):this.WAt.zQ(e))}KLt(t){if(this.Vst.cj().W0()===t)return;const s=this.Vst.cj(),i=s.VF().S3(t);i&&(this.Vst.mj(i),s.G0(this,!0),i.v0(this,!0),i.yj(this),this.Vst.XQ())}hj(){return this.WAt||this.oLt()}ANt(){return!!this.WAt}oLt(t,s){const i=this.Vst?t?self.CH:self.CV:t?self.mQ:self.zW,e=t||this.UAt.zIt(),n=this.BAt.FAt(),r=n||e||i,h=this.TB().Svt();if(iw.Qz.WIt(this,h),iw.Qz.QEt(s),this.WAt=new r,iw.Qz.JEt(),iw.Qz.QIt(h),e&&!(this.WAt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(n){const t=e||i;if(!(this.WAt instanceof t))throw new TypeError(`setInstanceClass(): class '${n.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.WAt}UW(t){if(0===this.HAt.length)return;const s={},i=this.BAt.rAt();for(let t=0,e=i.length;t<e;++t)s[i[t]]={configurable:!1,enumerable:!0,get:iw.Instance.prototype.ULt.bind(this,t),set:iw.Instance.prototype.Dht.bind(this,t)};const e=Object.create(Object.prototype,s);t.XLt={value:e,writable:!1}}WW(t){const s=this.qAt;if(0===s.length)return;const i={};for(const t of s)i[t.zV().uyt()]={value:t.lNt(),writable:!1};const e=Object.create(Object.prototype,i);t.xMt={value:e,writable:!1}}qK(t){if(!this.ANt())return;const s=this.hj();t.BV=s;const i=this.kc,e=i._Q()&&!i.jk().WB();e&&ew.z5(),s.dispatchEvent(t),e&&ew.B5()}}}{const uw=self.Gs,lw=new Map;uw.I5=class extends uw.Un{constructor(t){super(),this.cv=t,this.QMt=null,this.$Lt=[],this.tOt=t.Vy(),this.sOt=t.ig(),this.iOt=1,this.eOt=1,this.nOt=0,this.rOt=1,this.hOt=t.$A(),this.oOt=null,this.aOt=null,this.uOt=NaN,this.lOt=!1,this.G4=NaN,this.I4=NaN,this.cOt=s=>{if(s.BV!==this.QMt.iH())return;t.Fj().gf().removeEventListener("instancecreate",this.cOt);const i=this.QMt.iH().DV();this.lOt=!!i.Rit(),this.G4=this.lOt?i.Oit():NaN,this.I4=this.lOt?i.kit():NaN}}Jn(){this.QMt=null,this.oOt=null,this.aOt=null,this.uOt=NaN,this.lOt=!1,this.G4=NaN,this.I4=NaN,uw.wh(this.$Lt)}fOt(t){if(this.rOt=this.cv.$A(),this.hOt=this.rOt,this.QMt=t,this.nOt=t?t.lU():0,this.QMt){const t=this.cv.Fj();if(this.QMt.iH().TB().Svt()<2){const s=this.QMt.iH().DV();s?(this.lOt=!!s.Rit(),this.G4=this.lOt?s.Oit():NaN,this.I4=this.lOt?s.kit():NaN):this.QMt.iH().JH()||t.gf().addEventListener("instancecreate",this.cOt)}else this.lOt=!1,this.G4=NaN,this.I4=NaN}else this.lOt=!1,this.G4=NaN,this.I4=NaN}OJ(){return this.QMt}v4(){return this.$Lt.length>0}C5(){return this.$Lt}dOt(){this.v4()&&1!==this.$Lt.length&&(this.aOt?this.$Lt.sort(((t,s)=>{const i=this.aOt.get(t.iH()),e=this.aOt.get(s.iH());return uw.$i(i)&&uw.$i(e)?i-e:0})):this.$Lt.sort(((t,s)=>{const i=t.urt().pOt(),e=s.urt().pOt();return uw.$i(i)&&uw.$i(e)?i-e:0})))}pOt(){return this.uOt}mOt(){return this.iOt}yOt(t){this.iOt=t}gOt(){return this.eOt}MOt(t){this.eOt=t}qht(){return this.hOt}sCt(){return this.rOt}wOt(t){this.rOt=t}art(){return 0===this.tOt?Number.EPSILON:this.tOt}drt(){return 0===this.sOt?Number.EPSILON:this.sOt}SOt(){if(this.cv.tV()){const t=this.QMt;let s=t.Vy(),i=t.urt().art();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.lOt?1+s/this.G4:s/i}return 1}TOt(){if(this.cv.iV()){const t=this.QMt;let s=t.ig(),i=t.urt().drt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.lOt?1+s/this.I4:s/i}return 1}bOt(){return 0}vOt(){return{sw:this.tOt,sh:this.sOt,sx:this.iOt,sy:this.eOt,psa:this.nOt,oo:this.rOt,so:this.hOt,pi:this.cv.iH().ILt()}}w4(t,s=null){const i=this.vOt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.xOt(t),c:this.COt(t)})}GOt(t){let s="";return t.ZJ()&&(s+="x"),t.XJ()&&(s+="y"),t.tV()&&(s+="w"),t.iV()&&(s+="h"),t.nV()&&(s+="a"),t.hV()&&(s+="z"),t.fV()&&(s+="d"),t.aV()&&(s+="o"),t.lV()&&(s+="v"),s}xOt(t){return this.QMt?!this.QMt.iH()||this.QMt.iH().JH()?null:this.IOt(this.QMt,this.cv,t):null}COt(t){return this.$Lt.map((s=>this.IOt(s,s,t))).filter((t=>t))}IOt(t,s,i){const e=t.iH();if(e&&e.JH())return null;const n={};return n.uid=e.tQ(),n.f=this.GOt(s),n.offsets=s.NOt(),n.data=uw.I5.EOt(e),n.oci=e.BW().$P(),"state"===i?(n.inst=e.ev("full",{selfOnly:!0}),n.instIndex=NaN):(n.instIndex=e.BW().AB().indexOf(e),n.inst=null),n}S4(t){this.tOt=t.sw,this.sOt=t.sh,this.iOt=t.sx,this.eOt=t.sy,this.nOt=t.psa,this.rOt=t.oo,this.hOt=t.so,this.uOt=uw.$i(t.pi)?t.pi:NaN}DOt(t,s,i,e){if(!t&&!s)if(e?.wGt){if(this.oOt)for(const t of this.oOt)t.JH()||t.YJ()||t.Fj().YW(t)}else if(this.oOt)for(const t of this.oOt)if(i.c&&i.c.length){if(!i.c.some((s=>s.uid===t.tQ())))continue;t.JH()||t.YJ()||t.Fj().YW(t)}this.oOt=t,this.aOt=s}_Ot(t){const s=this.cv.Fj();return lw.has(t)?lw.get(t):s.rj(t)}_6(t,s){const i=this.cv,e=i.Fj(),n=s?.AOt??new Set;if(t.p&&!this.QMt){const r=t.p.uid,h=this._Ot(r);if(h){const r=h.lj();h.xLt(i.iH())?this.QMt=r:(h.ELt(i.iH().tQ())?(e.YW(i.iH()),e.LOt(i.iH().tQ()),lw.delete(i.iH().tQ())):h.QJ(i.iH(),this.OOt(t.p.f)),n.has(i)||(i.ROt(t.p.offsets),this.POt(h,t.p,s),this.kOt(h,h.tQ(),i.Fj(),s)),n.add(i),h.lj().urt().dOt())}else if(uw.$i(t.p.oci)){const n=e.jB(e.f0(t.p.oci),i.cj(),0,0,!0);if(n){const r=this.FOt(t.p,e);r&&n.nv(r);const h=n.lj(),o=!!s?.wGt;h.cj().zB(n,!1,o),n.QJ(i.iH(),this.OOt(t.p.f)),lw.set(n.tQ(),n),this.kOt(n,n.tQ(),e,s),n.lj().urt().dOt()}}}const r=[];for(const s of t.c){const t=s.uid,i=this._Ot(t);i&&r.push(i)}let h=0;for(const o of t.c){const a=o.uid,u=this._Ot(a);if(u){if(this.oOt){if(this.oOt.includes(u)){const e=u;if(e.BW()!==u.BW()){h++;continue}if(e.JH()){h++;continue}const o=t.c[h];if(!s?.wGt&&this.jOt(e,r,i)){if(i.iH().BJ(h)){const r=e.BW().$P(),a=o.oci,u=i.iH().BJ(h).BW().$P();if(r!==a||a!==u){this.zOt(t.c,i,n,s);break}this.BOt(h,o,i,n,s)}else this.BOt(h,o,i,n,s);h++;continue}if(e.YJ()&&e.OJ()!==i.iH()){const t=this.UOt(o,s);this.WOt(t,o,n,s),h++;continue}this.WOt(e.lj(),o,n,s,!0),h++;continue}if(this.oOt[h]){const e=this.oOt[h];if(e.BW()!==u.BW()){h++;continue}if(e.JH()){h++;continue}const o=t.c[h];if(!s?.wGt&&this.jOt(e,r,i)){if(i.iH().BJ(h)){const r=e.BW().$P(),a=o.oci,u=i.iH().BJ(h).BW().$P();if(r!==a||a!==u){this.zOt(t.c,i,n,s);break}this.BOt(h,o,i,n,s)}else this.BOt(h,o,i,n,s);h++;continue}if(e.YJ()&&e.OJ()!==i.iH()){const t=this.UOt(o,s);this.WOt(t,o,n,s),h++;continue}this.WOt(e.lj(),o,n,s,!0),h++;continue}}const e=u.BW();if(this.QOt(r,e)===i.iH().CLt(e).length){for(const t of i.iH().C5()){if(t.BW()!==e)continue;const i=t.lj();if(i&&!n.has(i)){n.add(i),i.ROt(o.offsets),this.POt(t,o,s);break}}h++;continue}if(u.YJ()&&u.OJ()!==i.iH()){const t=this.UOt(o,s);this.WOt(t,o,n,s),h++;continue}this.WOt(u.lj(),o,n,s)}else if(this.oOt&&this.oOt[h]){const a=this.oOt[h],u=e.f0(this.JOt(o));if(a.BW()!==u){h++;continue}if(a.JH()){h++;continue}const l=t.c[h];if(!s?.wGt&&this.jOt(a,r,i)){if(i.iH().BJ(h)){const e=a.BW().$P(),r=l.oci,o=i.iH().BJ(h).BW().$P();if(e!==r||r!==o){this.zOt(t.c,i,n,s);break}this.BOt(h,l,i,n,s)}else this.BOt(h,l,i,n,s);h++;continue}if(a.YJ()&&a.OJ()!==i.iH()){const t=this.UOt(l,s);this.WOt(t,l,n,s),h++;continue}this.WOt(a.lj(),l,n,s)}else{const t=this.UOt(o,s);this.WOt(t,o,n,s)}h++}}zOt(t,s,i,e){const n=s.Fj();for(const t of s.iH().children())t&&!t.JH()&&(n.YW(t),n.LOt(t.tQ()),lw.delete(t.tQ()));this.oOt&&(this.oOt=[]),this.aOt&&(this.aOt=new WeakMap),Object.assign({},e,{assignZIndex:!1});for(const s of t){const t=this.UOt(s,e);this.WOt(t,s,i,e),this.oOt.push(t.iH()),this.aOt.set(t.iH(),this.oOt.length-1)}s.urt().dOt()}jOt(t,s,i){const e=t.BW();return this.QOt(s,e)===i.iH().CLt(e).length}BOt(t,s,i,e,n){const r=i.iH().BJ(t);if(!r)return;const h=r.lj();h&&(e.has(h)||(h.ROt(s.offsets),this.POt(r,s,n)),e.add(h))}OOt(t){const s={};return s.qJ=t.includes("x"),s.KJ=t.includes("y"),s.$J=t.includes("w"),s.sV=t.includes("h"),s.eV=t.includes("a"),s.rV=t.includes("z"),s.cV=t.includes("d"),s.oV=t.includes("o"),s.uV=t.includes("v"),s}JOt(t){return uw.$i(t.oci)?t.oci:t[1]}UOt(t,s){if(!uw.$i(t.oci))return;const i=this.cv,e=i.Fj();let n;const r=!s.hasOwnProperty("createHierarchy")||s.createHierarchy;if(n=t.data?e.T0(t.data,i.cj(),!1,0,0,!1,r):e.jB(e.f0(t.oci),i.cj(),0,0,r),!n)return;const h=this.FOt(t,e);h&&n.nv(h);const o=n.lj(),a=!!s?.wGt;return o.cj().zB(n,!0,a),o}kOt(t,s,i,e){if(this._Ot(s)&&!e?.wGt){const e=this._Ot(s);e!==t&&i.YW(e)}i.LOt(s),i.Z_t(s,t)}WOt(t,s,i,e,n=!0){const r=this.cv,h=r.QJ(t,this.OOt(s.f));h&&n?(i.has(t)||(t.ROt(s.offsets),this.POt(t.iH(),s,e)),i.add(t)):h&&(lw.set(t.iH().tQ(),t.iH()),this.kOt(t.iH(),s.uid,r.Fj(),e)),this.dOt()}POt(t,s,i){let e=this.FOt(s,this.cv.Fj());if(!e)return;const n=!i.hasOwnProperty("clearChildren")||i.clearChildren,r=!i.hasOwnProperty("assignZIndex")||i.assignZIndex,h=t.Fj();if(lw.set(t.tQ(),t),e=JSON.parse(JSON.stringify(e)),n&&t.tQ()!==e.uid){for(const s of t.children())s&&!s.JH()&&(h.YW(s),h.LOt(s.tQ()),lw.delete(s.tQ()));if(e.w?.sgi&&e.w.sgi.c?.length)for(const s of e.w.sgi.c){const e=Object.assign({},i,{clearChildren:!1,createHierarchy:!1}),n=this.UOt(s,e);lw.set(n.iH().tQ(),n.iH()),t.QJ(n.iH(),this.OOt(s.f)),n.ROt(s.offsets),this.POt(n.iH(),s,e)}}const o=e.w?.zi,a=e.w?.l;e.w=null,t.nv(e),i?.wGt||(uw.$i(o)&&r&&t.lj()._0(o),uw.$i(a)&&t.KLt(a)),this.kOt(t,e.uid,h,i)}QOt(t,s){return t.filter((t=>t.BW().Nc()===s.Nc())).length}FOt(t,s){if(uw.$i(t.instIndex)){const i=s.f0(t.oci).RAt();return i?i[t.instIndex]:null}return uw.ae(t.inst)?JSON.parse(t.inst):t.inst?t.inst:void 0}static EOt(t){let s=t.lj().cj().g0(t.tQ());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const s of[...t.C5()]){const t=s.lj();i.push([t.VF().W0(),t.cj().$P(),s.tQ(),uw.I5.G5(t),s.BW().XW()?1:0,t.fj(),uw.I5.EOt(s)])}return uw.ve(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=uw.I5.VOt(),s[0][14][1]=i,s[0][14][2]=t.lj().fj()),s}static G5(t){let s=0;return s|=Number(t.lV())<<8,s|=Number(t.aV())<<7,s|=Number(t.hV())<<6,s|=Number(t.fV())<<5,s|=Number(t.nV())<<4,s|=Number(t.iV())<<3,s|=Number(t.tV())<<2,s|=Number(t.XJ())<<1,s|=0|Number(t.ZJ()),s}static VOt(t){let s=0;return s|=256,s|=128,s|=64,s|=32,s|=16,s|=8,s|=4,s|=2,s|=1,511}static YOt(){lw.clear()}}}{const cw=self.Gs,fw=self.hs,dw=(fw.gs,fw.Ms,cw.Qn(cw.Rect)),pw=cw.Qn(cw.Iu),mw=cw.Qn(cw.Event,"bboxchange",!1),yw=cw.Qn(cw.vo,0,0,0,0),gw=cw.Qn(cw.ol),Mw=cw.Qn(cw.vo,1,1,1,1),ww=cw.Qn(cw.Rect,0,0,-1,-1),Sw=cw.Qn(cw.Rect,0,0,-1,-1),Tw=new Set(["absolute","relative"]),bw=[];let vw=!0;const xw=new WeakMap,Cw=new WeakMap;cw.$At=class extends cw.Un{constructor(t,s){super(),this.fi=t,this.Odt=t.BW(),this.kc=t.Fj(),this.HOt=s,this.Odt.NAt(this,null,s),this.qOt=-1,this.ZOt=-1,this.Bvt=196635,this.Odt.TB().sB()&&(this.Bvt|=128),this.Na=NaN,this.Ea=NaN,this.Db=NaN,this.KOt=NaN,this.XOt=NaN,this.Jx=NaN,this.Io=NaN,this.$Ot=NaN,this.tRt=NaN,this.sRt=NaN,this.iRt=NaN,this.eRt=cw.Qn(cw.Rect),this.nRt=cw.Qn(cw.Iu),this.rRt=Sw,this.hRt=ww,this.oRt=null,this.aRt=null,this.uRt=null,this.Eb=Mw,this.lRt=Mw,this.cRt=null,this.fRt=null,this.fi.BW().oAt()&&(this.fRt=cw.Qn(cw.dRt,this.fi,this)),this.pRt=null,this.oOt=null,this.aOt=null,this.mRt=-1,this.yRt=null}fLt(){this.Bvt|=256}Jn(){if(this.Odt.NAt(this,this.HOt,null),this.cRt&&(this.kc.lb().NS(this.cRt),this.cRt=null),this.oRt=null,this.aRt&&(this.aRt.gRt.Jn(),this.aRt=null),this.uRt&&(this.uRt.clear(),this.uRt=null),this.yV(),this.fRt&&this.fRt.Jn(),this.YJ()&&this.OJ().JJ(this),this.v4()){const t=[...this.C5()];for(const s of t)this.JJ(s)}this.MRt(),this.wRt(),xw.delete(this),Cw.delete(this),this.fi=null,this.Odt=null,this.kc=null,this.HOt=null}sLt(t){if(vw=!1,this.$Q(t[0],t[1]),this.qb(t[2]),this.bD(t[3],t[4]),this.Jx=0,this.sB()?this.uU(t[6]):this.Io=0,yw.ga(t[7]),this.SRt(yw),this.nJ(t[8]),this.oJ(t[9]),this.Ab(t[10]),this.fRt&&this.fRt.TRt(t[12]),t[14]&&xw.set(this,{bRt:t[14][1],vRt:t[14][2]}),t[15]){const s=t[15];this.pV(s[0],s[1]);const i=this.TV(),e=s[2];for(let t=0,s=e.length;t<s;++t){const s=e[t];for(let e=0,n=s.length;e<n;++e){const n=s[e],r=i.Dv(e,t);r.Qb(n[0]),r.Yb(n[1]),r.qb(n[2]),r.Kb(n[3]),r.$b(n[4])}}}if(t[16]){const s=t[16][0],i=t[16][1],e=!!i,n=!e,r=this.kc._Lt();e&&r&&r.jlt(this.iH(),i),n&&r&&r.jlt(this.iH(),s)}vw=!0,this.xRt()}iLt(){this.Na=0,this.Ea=0,this.Db=0,this.KOt=0,this.XOt=0,this.Jx=0,this.Io=0,this.$Ot=0,this.tRt=1,this.sRt=0,this.iRt=0,this.xRt()}Fj(){return this.kc}BW(){return this.Odt}iH(){return this.fi}CRt(){return this.nV()?this.GRt(this.OJ().IRt()-this.pRt.bOt()):0}Qb(t){if(t=+t,this.ZJ()){const s=this.pRt,i=t-this.Wb(),e=-this.CRt();0===e?this.Na+=i/s.SOt():(this.Na+=Math.cos(e)*i/s.SOt(),this.XJ()&&(this.Ea+=Math.sin(e)*i/s.TOt()))}else this.Na=t}Rht(t,s=!1){t=+t,s?this.Na+=t:this.ZJ()?this.Qb(this.Wb()+t):this.Na+=t}Wb(){if(this.ZJ()){let t=this.Na;const s=this.pRt,i=this.OJ(),e=this.CRt();return 0===e?t*=s.SOt():(t=t*s.SOt()*Math.cos(e),this.XJ()&&(t-=this.Ea*s.TOt()*Math.sin(e))),i.Wb()+t}return this.Na}Yb(t){if(t=+t,this.XJ()){const s=this.pRt,i=t-this.Vb(),e=-this.CRt();0===e?this.Ea+=i/s.TOt():(this.ZJ()&&(this.Na-=Math.sin(e)*i/s.SOt()),this.Ea+=Math.cos(e)*i/s.TOt())}else this.Ea=t}Pht(t,s=!1){t=+t,s?this.Ea+=t:this.XJ()?this.Yb(this.Vb()+t):this.Ea+=t}Vb(){if(this.XJ()){let t=this.Ea;const s=this.pRt,i=this.OJ(),e=this.CRt();return 0===e?t*=s.TOt():(t=t*s.TOt()*Math.cos(e),this.ZJ()&&(t+=this.Na*s.SOt()*Math.sin(e))),i.Vb()+t}return this.Ea}$Q(t,s){if(t=+t,s=+s,this.NRt()){const i=this.ZJ(),e=this.XJ(),n=this.pRt,r=t-this.Wb(),h=s-this.Vb(),o=-this.CRt();if(0===o)i?this.Na+=r/n.SOt():this.Na=t,e?this.Ea+=h/n.TOt():this.Ea=s;else{const a=Math.sin(o),u=Math.cos(o);i?this.Na+=e?(u*r-a*h)/n.SOt():u*r/n.SOt():this.Na=t,e?this.Ea+=i?(a*r+u*h)/n.TOt():u*h/n.TOt():this.Ea=s}}else this.Na=t,this.Ea=s}ERt(){return[this.Wb(),this.Vb()]}sJ(t,s){t=+t,s=+s,this.NRt()?this.$Q(this.Wb()+t,this.Vb()+s):(this.Na+=t,this.Ea+=s)}_xt(t,s){return this.Wb()===t&&this.Vb()===s}qb(t){if(t=+t,this.hV()&&(t-=this.OJ().Hb()),this.Db===t)return;this.Db=t,this.DRt();const s=this.cj();0!==this.Db&&s.E0(),s.yj(this)}DRt(){if(this.xRt(),this.v4()){const t=this.C5();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.hV()&&i.DRt()}}}Xht(t){this.qb(this.Hb()+t)}Hb(){return this.hV()?this.OJ().Hb()+this.Db:this.Db}cJ(){return this.cj().Hb()+this.Hb()}Rit(){return this.iH().TB().Svt()<2&&this.iH().DV().Rit()}$y(t){if(t=+t,this.tV()){const s=this.Vy();0===s?this.KOt=Number.EPSILON:this.KOt*=t/s}else this.KOt=t;this._Rt()}xg(t,s){t=+t,s?this.KOt+=t:this.tV()?this.$y(this.Vy()+t):this.KOt+=t,this._Rt()}Vy(){if(this.tV()){const t=this.OJ(),s=t.Vy();return t.urt().art()===Number.EPSILON?(this.urt().art()+s)*this.KOt:s*this.KOt}return this.KOt}Yy(t){if(t=+t,this.iV()){const s=this.ig();0===s?this.XOt=Number.EPSILON:this.XOt*=t/s}else this.XOt=t;this._Rt()}Uht(t,s){t=+t,s?this.XOt+=t:this.iV()?this.Yy(this.ig()+t):this.XOt+=t,this._Rt()}ig(){if(this.iV()){const t=this.OJ(),s=t.ig();return t.urt().drt()===Number.EPSILON?(this.urt().drt()+s)*this.XOt:s*this.XOt}return this.XOt}bD(t,s){if(t=+t,s=+s,this.tV()){const s=this.Vy();0===s?this.KOt=Number.EPSILON:this.KOt*=t/s}else this.KOt=t;if(this.iV()){const t=this.ig();0===t?this.XOt=Number.EPSILON:this.XOt*=s/t}else this.XOt=s;this._Rt()}Al(){return[this.Vy(),this.ig()]}Z2(){return this.Jx}ARt(t){if(t<0)throw new RangeError("invalid depth");this.Jx=t}LRt(){if(this.YJ()){const t=this.pRt;return Math.min(t.SOt(),t.TOt())}return 1}sB(){return!!(128&this.Bvt)}uU(t){t=+t,this.sB()&&(this.nV()&&(t-=this.OJ().lU()),t=cw.Kn(t),this.Io!==t&&(this.Io=t,this._Rt()))}Wht(t){0!=(t=+t)&&this.sB()&&(this.Io=cw.Kn(this.Io+t),this._Rt())}_Rt(){if(this.Bvt|=262144,this.v4()){const t=this.C5();for(let s=0,i=t.length;s<i;s++)t[s]._Rt()}}lU(){return this.nV()&&this.sB()?this.GRt(cw.Kn(this.OJ().IRt()+this.Io)):this.Io}IRt(){return this.nV()&&this.sB()?cw.Kn(this.OJ().IRt()+this.Io):this.Io}GRt(t){return this.tV()&&this.PJ().Vy()<0&&(t=cw.Kn(cw.dr(t,this.PJ().lU()+Math.PI))),this.iV()&&this.PJ().ig()<0&&(t=cw.dr(t,this.PJ().lU())),t}ORt(){const t=this.OJ();return!!(this.tV()&&t.Vy()<0)||!!(this.iV()&&t.ig()<0)}RRt(){const t=this.OJ();return!!(this.tV()&&t.Vy()<0&&this.iV()&&t.ig()<0)}PRt(){const t=this.Bvt;if(!(262144&t))return;const s=this.lU();this.$Ot=Math.sin(s),this.tRt=Math.cos(s),this.Bvt=-262145&t}Pxt(){return this.PRt(),this.$Ot}Rxt(){return this.PRt(),this.tRt}nJ(t){this.sRt=+t}Zht(t){this.sRt+=+t}eJ(){return this.sRt}oJ(t){this.iRt=+t}Kht(t){this.iRt+=+t}hJ(){return this.iRt}SRt(t){this.Eb.equals(t)||(this.Eb===Mw?(this.Eb=cw.Qn(cw.vo,t),this.lRt=cw.Qn(cw.vo,t),this.lRt.Zo()):t.Vo(1,1,1,1)?(this.Eb=Mw,this.lRt=Mw):(this.Eb.set(t),this.lRt.set(t),this.lRt.Zo()),this.xRt())}sL(t){if(t=cw.Zn(+t,0,1),this.aV()){if(this.urt().sCt()===t)return;this.urt().wOt(t),t=this.$A()}else if(this.Eb.a===t)return;this.kRt(t)}FRt(){if(!this.v4())return;const t=this.C5();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.kRt(i.$A())}}kRt(t){yw.Po(this.Eb),yw.a=t,this.SRt(yw),this.FRt()}Vht(t){this.aV()?this.sL(this.urt().sCt()+t):this.sL(this.$A()+t)}$A(){return this.aV()?this.OJ().$A()*this.urt().sCt():this.Eb.a}TJ(t){this.Eb.Qo(t)||(yw.Po(t),yw.a=this.$A(),this.SRt(yw))}Iht(t,s,i){yw.Eo(t,s,i),this.TJ(yw)}jRt(t,s,i){0===t&&0===s&&0===i||(yw.Po(this.Eb),yw.r+=t,yw.g+=s,yw.b+=i,this.TJ(yw))}SJ(){return this.Eb}Z$(){return this.lRt}fV(){return!!(512&this.Bvt)}zRt(t){this.BRt(512,t)}ZJ(){return!!(1024&this.Bvt)}URt(t){this.BRt(1024,t)}XJ(){return!!(2048&this.Bvt)}NRt(){return!!(3072&this.Bvt)}WRt(t){this.BRt(2048,t)}tV(){return!!(4096&this.Bvt)}QRt(t){this.BRt(4096,t)}iV(){return!!(8192&this.Bvt)}JRt(t){this.BRt(8192,t)}nV(){return!!(16384&this.Bvt)}VRt(t){this.BRt(16384,t)}hV(){return!!(32768&this.Bvt)}YRt(t){this.BRt(32768,t)}aV(){return!!(4194304&this.Bvt)}HRt(t){this.BRt(4194304,t)}lV(){return!!(8388608&this.Bvt)}qRt(t){this.BRt(8388608,t)}ZRt(){this.Bvt&=-12647937}QJ(t,s){if(t===this)return!1;if(t.YJ())return!1;if(this.KRt(t))return!1;if(this.XRt(t))return!1;const i=t.Wb(),e=t.Vb(),n=t.Vy(),r=t.ig(),h=t.lU(),o=t.Hb(),a=t.$A();t.$Rt(this),t.URt(s.qJ),t.WRt(s.KJ),t.QRt(s.$J),t.JRt(s.sV),t.VRt(s.eV),t.YRt(s.rV),t.HRt(s.oV),t.qRt(s.uV),t.zRt(s.cV);const u=i-this.Wb(),l=e-this.Vb(),c=-this.lU(),f=Math.cos(c),d=Math.sin(c);if(s.qJ&&(s.eV?t.Na=u*f-l*d:t.Na=u,s.$J)){const s=this.Vy()/this.pRt.art();0!==s&&(t.Na/=s)}if(s.KJ&&(s.eV?t.Ea=u*d+l*f:t.Ea=l,s.sV)){const s=this.ig()/this.pRt.drt();0!==s&&(t.Ea/=s)}if(s.$J){const s=this.Vy();0===s||s===Number.EPSILON?(t.KOt=1,t.pRt.yOt(1)):(t.KOt=n/this.Vy(),t.pRt.yOt(t.KOt))}if(s.sV){const s=this.ig();0===s||s===Number.EPSILON?(t.XOt=1,t.pRt.MOt(1)):(t.XOt=r/this.ig(),t.pRt.MOt(t.XOt))}return s.eV&&(t.Io=h-this.lU()),s.rV&&(t.Db=o-this.Hb()),s.oV&&t.pRt.wOt(a),s.uV&&t.VU(this.HU()),this.tPt(t),this.XQ(),this.FRt(),!0}JJ(t){if(t.OJ()!==this)return;const s=t.Wb(),i=t.Vb(),e=t.Vy(),n=t.ig(),r=t.lU(),h=t.Hb(),o=t.$A();t.$Rt(null),t.ZRt(),t.$Q(s,i),t.bD(e,n),t.uU(r),t.qb(h),t.sL(o),this.sPt(t),this.XQ()}iPt(){return this.mRt}ePt(){this.nPt();const t=[...this.children()];for(const s of t)this.JJ(s);const s=this.OJ();s&&s.JJ(this),this.ZRt()}nPt(){if(this.rPt(),!this.oOt){const t=[...this.children()];t.length&&(this.oOt=[],this.aOt=new WeakMap);let s=0;for(const i of t){const t=i.iH();this.oOt.push(t),this.aOt.set(t,s),s++}}const t=this.OJ();t&&t.nPt()}rPt(){if(-1!==this.mRt)return;const t=[...this.kJ()];this.mRt=t.length;for(const s of t)s.rPt();const s=[...this.children()];for(const t of s)t.rPt()}wRt(){this.oOt&&(this.oOt.length=0),this.oOt=null,this.aOt=null;const t=this.OJ();t&&t.wRt(),this.mRt=-1}YJ(){return null!==this.OJ()}OJ(){const t=this.pRt;return null!==t?t.OJ():null}PJ(){let t=this;for(;t.YJ();)t=t.OJ();return t}*kJ(){let t=this.OJ();for(;t;)yield t,t=t.OJ()}xLt(t){return this.C5().includes(t)}v4(){const t=this.pRt;return null!==t&&t.v4()}C5(){const t=this.pRt;return null!==t?t.C5():bw}children(){return this.C5()}*UJ(){for(const t of this.children())yield t,yield*t.UJ()}jJ(){return this.C5().length}ACt(){return[...this.UJ()].length}BJ(t){const s=this.C5();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}NLt(t){if(!t)return NaN;const s=this.C5();if(!s)return NaN;for(let i=0;i<s.length;i++)if(t===s[i])return i;return NaN}hPt(t){this.pRt||(this.pRt=cw.Qn(cw.I5,this)),t&&this.pRt.fOt(t)}urt(){return this.pRt}MRt(){this.pRt&&(this.pRt.Jn(),this.pRt=null)}$Rt(t){t?(t.hPt(null),this.hPt(t)):(this.pRt&&this.pRt.fOt(null),this.v4()||this.MRt())}XRt(t){if(!this.YJ())return!1;const s=this.OJ();return s===t||s.XRt(t)}KRt(t){if(this.xLt(t))return!0;for(const s of this.C5())if(s.KRt(t))return!0;return!1}tPt(t){this.pRt.C5().push(t)}sPt(t){const s=this.pRt.C5(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.YJ()||this.MRt(),t.v4()||t.MRt()}DLt(){const t=xw.get(this);return t?t.bRt:null}oPt(){const t=xw.get(this);return t?t.vRt:NaN}b4(){const t=Cw.get(this);return cw.$i(t)?t:NaN}aPt(t){Cw.set(this,t)}uPt(){this.BRt(524288,!0),this.xRt()}xRt(){if(!vw)return;const t=this.kc.lb();let s;this.cRt&&t.NS(this.cRt),s=524288&this.Bvt?t.lS()||"<point>":t.oS()||"<default>",this.cRt=t.xS(s,this.xW(),this.lRt,this.Hb())}n4(){return this.cRt}Y0(){return this.Eb===Mw}Ab(t){if((t|=0)<0||t>31)throw new RangeError("invalid blend mode");this.xW()!==t&&(this.Bvt=-2080374785&this.Bvt|t<<26,this.xRt())}xW(){return(2080374784&this.Bvt)>>26}mj(t,s){const i=s&&this.HOt!==t;i&&this.I0(),this.Odt.NAt(this,this.HOt,t),this.HOt=t,i&&this.lPt(),0!==this.Hb()&&this.HOt.E0()}cj(){return this.HOt}VF(){return this.cj().VF()}_0(t){this.qOt=0|t}fj(){return this.HOt.Q1(),this.qOt}H1(t){this.ZOt=0|t}jH(){return this.HOt.V1(),this.ZOt}DX(){return this.qOt}BRt(t,s){s?this.Bvt|=t:this.Bvt&=~t}HU(){return!!(1&this.Bvt)}VU(t){if(this.BRt(1,t),this.v4())for(const s of this.C5())s.lV()&&s.VU(t)}_J(){return!!(8&this.Bvt)}AJ(t){t=!!t,this._J()!==t&&(this.BRt(8,t),t?this.XQ():this.cPt())}fPt(t,s){if(this.BRt(32,t),this.uRt&&this.uRt.clear(),s.trim()){this.uRt||(this.uRt=new Set);for(const t of s.split(" "))t&&this.uRt.add(t.toLowerCase())}else this.uRt=null}dPt(t){const s=!!(32&this.Bvt),i=this.uRt;if(!t||!i)return!s;for(const e of i)if(t.has(e))return s;return!s}XQ(){if(this.Bvt|=65554,this.Odt.CAt(!0),this.kc.gj(),this.HOt.a0()&&(this.dJ(this.eRt,this.nRt,!0),this.Bvt&=-3,this.lPt()),4&this.Bvt&&this.fi.gf().dispatchEvent(mw),null!==this.pRt){const t=this.pRt.C5();for(let s=0,i=t.length;s<i;++s)t[s].XQ()}}dJ(t,s,i){const e=this.Wb(),n=this.Vb(),r=this.Vy(),h=this.ig(),o=this.lU();t.Wa(e-this.sRt*r,n-this.iRt*h,r,h),i&&this.SV()&&this.pPt(t),0===o?s.Hu(t):(t.offset(-e,-n),s.Zu(t,this.Pxt(),this.Rxt()),s.offset(e,n),s.Ku(t)),t.normalize()}mPt(){const t=this.Bvt;2&t&&(this.dJ(this.eRt,this.nRt,!0),this.Bvt=-3&t)}pJ(){return this.mPt(),this.eRt}yJ(){return this.mPt(),this.nRt}yPt(t){const s=this.Wb(),i=this.Vb(),e=Math.round(s)-s,n=Math.round(i)-i;return 0===e&&0===n?t:(pw.m(t),pw.offset(e,n),pw)}gPt(t){this.eRt.m(t),this.nRt.Hu(this.eRt),this.Bvt&=-3,this.IAt(),this.lPt()}MPt(t){this.BRt(4,t)}wPt(){return!!(4&this.Bvt)}J2(t,s,i){return s&&0!==this.Z2()?this.H2(this.cj().Y2()):0===this.Hb()||i?t.Tu(this.pJ()):this.SPt()}SPt(){const t=this.cj(),s=this.cJ();return!(s>=t.f1())&&(t.l1(s,dw),dw.Tu(this.pJ()))}H2(t){const s=this.pJ(),i=s.Ka(),e=s.$a(),n=s.Xa(),r=s.tu(),h=this.cJ(),o=h+this.Z2();return t.VM(i,n,h,e,r,o)}MJ(){const t=this.cj();if(t.I1())return this.H2(t.Y2());{const s=t.VF();return this.J2(t.EW(),s.Q2(),s.kU())}}s4(t){this.BRt(1048576,t)}t4(t){this.BRt(2097152,t)}TPt(){return!!(1048576&this.Bvt)}bPt(){return!!(2097152&this.Bvt)}vPt(t){this.oRt=t,this.xPt(),this.SV()&&(this.yRt.CPt=null)}GPt(){return this.oRt}IPt(){return null!==this.oRt||this.SV()}NPt(){return this.EPt(this.Vy(),this.ig(),this.lU(),this.Pxt(),this.Rxt())}DPt(t,s,i){let e=0,n=1;return 0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.EPt(t,s,i,e,n)}EPt(t,s,i,e,n){let r=this.aRt;null===r&&(r={gRt:cw.Qn(cw.ol),width:NaN,height:NaN,angle:NaN},this.aRt=r);const h=r.gRt;if(r.width===t&&r.height===s&&r.angle===i)return h;const o=this.oRt;if(this.SV()){const i=this.eJ(),r=this.hJ(),a=this.TV();let u=this.yRt.CPt;u||(o?(gw.m(o),gw.offset(i,r)):gw.ml(),u=a.Ov(gw),this.yRt.CPt=u),a.Rv(u,h),h.offset(-i,-r),h.wl(t,s,e,n)}else o?(h.m(o),h.wl(t,s,e,n)):h.Ml(this.yJ(),-this.Wb(),-this.Vb());return r.width=t,r.height=s,r.angle=i,h}xPt(){this._Pt(!0);const t=this.aRt;null!==t&&(t.width=NaN)}pV(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.iH().TB().uB())throw new Error("object does not support mesh");this.yV(),this.yRt={APt:cw.Qn(cw.OM.av,t,s),LPt:cw.Qn(cw.OM.av,t,s),CPt:null}}SV(){return null!==this.yRt}TV(){if(!this.SV())throw new Error("no mesh");return this.yRt.APt}OPt(){if(!this.SV())throw new Error("no mesh");return this.yRt.LPt}RPt(t){this.BRt(65536,t)}PPt(){return!!(65536&this.Bvt)}_Pt(t){this.BRt(131072,t)}kPt(){return!!(131072&this.Bvt)}pPt(t){const s=this.yRt.APt,i=Math.min(s.xv(),0),e=Math.min(s.Cv(),0),n=Math.max(s.Gv(),1),r=Math.max(s.Iv(),1),h=t.width(),o=t.height();t.offsetLeft(i*h),t.offsetTop(e*o),t.ou((n-1)*h),t.au((r-1)*o),this.Jx=s.Nv()}yV(){this.yRt&&(this.yRt.APt.Jn(),this.yRt.LPt.Jn(),this.yRt=null,this.xPt())}MV(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!Tw.has(e))throw new Error("invalid mode");const n="relative"===e;let r=i.x,h=i.y;const o=i.mW;let a="number"==typeof i.bV?i.bV:n?0:-1,u="number"==typeof i.vV?i.vV:n?0:-1;if(!this.SV())return!1;const l=this.TV(),c=l.Dv(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.Hb()!==o&&(c.qb(o),f=!0),n&&(r+=t/(l.wv()-1),h+=s/(l.Sv()-1)),-1!==a||n?(n&&(a+=t/(l.wv()-1)),a=cw.Zn(a,0,1)):a=c.Zb(),-1!==u||n?(n&&(u+=s/(l.Sv()-1)),u=cw.Zn(u,0,1)):u=c.Xb(),c.Wb()===r&&c.Vb()===h&&c.Zb()===a&&c.Xb()===u?f:(c.Qb(r),c.Yb(h),c.Kb(a),c.$b(u),this.xPt(),!0)}cLt(){return this.fi.cLt()}LJ(t,s){return!!this.pJ().vu(t,s)&&!!this.yJ().vu(t,s)&&(this.cLt()?this.fi.DV().HNt(t,s):!this.IPt()||this.NPt().vu(t-this.Wb(),s-this.Vb()))}FPt(){return!!(16&this.Bvt)}IAt(){if(!this.FPt()||!this._J()||256&this.Bvt)return;const t=this.pJ(),s=this.Odt.xAt(),i=this.rRt;if(dw.set(s.YX(t.Ka()),s.HX(t.Xa()),s.YX(t.$a()),s.HX(t.tu())),i.equals(dw))return;const e=this.fi;i===Sw?(s.qX(e,null,dw),this.rRt=cw.Qn(cw.Rect,dw)):(s.qX(e,i,dw),i.m(dw)),this.Bvt&=-17}jPt(){this.Bvt|=16}cPt(){const t=this.rRt;t!==Sw&&(this.Odt.xAt().qX(this.fi,t,null),this.rRt=Sw)}lPt(){const t=this.cj();if(!t.a0()||256&this.Bvt)return;const s=t.q0(),i=this.pJ(),e=this.hRt;if(dw.set(s.YX(i.Ka()),s.HX(i.Xa()),s.YX(i.$a()),s.HX(i.tu())),e.equals(dw))return;const n=this.fi;e===ww?(s.qX(n,null,dw),this.hRt=cw.Qn(cw.Rect,dw)):(s.qX(n,e,dw),e.m(dw)),t.Z0()}I0(){const t=this.hRt;t!==ww&&(this.cj().q0().qX(this.fi,t,null),this.hRt=ww)}J1(){return this.hRt}vJ(){const t=this.fi,s=this.HOt,i=s.pj();i.length&&i.at(-1)===t||(s.G0(t,!1),s.v0(t,!1),this.kc.gj())}CJ(){const t=this.fi,s=this.HOt,i=s.pj();i.length&&i[0]===t||(s.G0(t,!1),s.C0(t,!1),this.kc.gj())}IJ(t){const s=this.fi,i=this.HOt;if(i.VF()!==t.VF())throw new Error("layer from different layout");t!==i&&(i.G0(s,!0),this.mj(t),t.v0(s,!0),this.kc.gj())}EJ(t,s){const i=this.fi;let e=!1;const n=this.HOt;if(t.tQ()===i.tQ())return;const r=t.lj();if(!r)throw new Error("expected world instance");const h=r.cj();n.$P()!==h.$P()&&(n.G0(i,!0),this.mj(h),h.v0(i,!0),e=!0);const o=h.K1(i,t,!!s);(e||o)&&this.kc.gj()}ZQ(){return this.fRt}zPt(t){this.BRt(64,t)}h2(){return!!(64&this.Bvt)}w4(t,s=null){const i={x:this.Wb(),y:this.Vb(),w:this.Vy(),h:this.ig(),l:this.cj().W0(),zi:this.fj()};0!==this.Hb()&&(i.ze=this.Hb()),0!==this.lU()&&(i.a=this.IRt()),this.Y0()||(i.c=this.Eb.toJSON()),.5!==this.eJ()&&(i.oX=this.eJ()),.5!==this.hJ()&&(i.oY=this.hJ()),0!==this.xW()&&(i.bm=this.xW()),this.HU()||(i.v=this.HU()),this._J()||(i.ce=this._J()),this.wPt()&&(i.be=this.wPt()),this.fRt&&(i.fx=this.fRt.w4());const e=!!(32&this.Bvt);return e&&(i.sfi=e),this.uRt&&(i.sft=[...this.uRt].join(" ")),this.pRt&&"visual-state"!==t&&(i.sgi=this.pRt.w4(t,s),xw.has(this)&&(i.sgcd=xw.get(this).bRt,i.sgzid=xw.get(this).vRt)),this.SV()&&(i.mesh=this.TV().ev()),i}NOt(){return{x:this.Na,y:this.Ea,z:this.Db,w:this.KOt,h:this.XOt,a:this.Io,sgi:this.urt()?this.urt().vOt():null}}ROt(t){t&&(this.Na=t.x,this.Ea=t.y,this.Db=t.z,this.KOt=t.w,this.XOt=t.h,this.Io=t.a,t.sgi&&this.urt()&&this.urt().S4(t.sgi),this._Rt(),this.XQ())}kAt(){this.wRt(),this.ePt(),this.hPt(null),this.pRt&&this.pRt.DOt(this.oOt,this.aOt)}E6(t){"visual-state"!==t&&this.ePt()}_6(t,s="full",i=null){if(t.hasOwnProperty("sgi")&&"visual-state"!==s){if(256&this.Bvt)return;this.pRt._6(t.sgi,i)}}ZLt(t,s="full",i=null){if("visual-state"!==s)if(256&this.Bvt)this.wRt();else{if(t.hasOwnProperty("sgi"))this.pRt.DOt(null,null,t.sgi,i);else if(i?.wGt&&this.oOt)for(const t of this.oOt)t.JH()||this.kc.YW(t);this.wRt(),this.XQ()}}S4(t,s,i=null){if(vw=!1,this.Qb(t.x),this.Yb(t.y),this.$y(t.w),this.Yy(t.h),this._0(t.zi),this.qb(t.hasOwnProperty("ze")?t.ze:0),this.uU(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?yw.ga(t.c):t.hasOwnProperty("o")?(yw.Po(this.Eb),yw.a=t.o):yw.No(1,1,1,1),this.SRt(yw),this.nJ(t.hasOwnProperty("oX")?t.oX:.5),this.oJ(t.hasOwnProperty("oY")?t.oY:.5),this.Ab(t.hasOwnProperty("bm")?t.bm:0),this.VU(!t.hasOwnProperty("v")||t.v),this.AJ(!t.hasOwnProperty("ce")||t.ce),this.MPt(!!t.hasOwnProperty("be")&&t.be),this.fPt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.fRt&&t.hasOwnProperty("fx")&&this.fRt.S4(t.fx),t.hasOwnProperty("sgi")&&"visual-state"!==s){this.hPt(null);const s=this.pRt,i=t.sgi;s.S4(i),s.DOt(this.oOt,this.aOt),this.BPt(t.sgcd,t.sgzid)}if(t.hasOwnProperty("mesh")){const s=t.mesh;this.pV(s.cols,s.rows),this.TV().nv(s)}else this.yV();this.XQ(),vw=!0,this.xRt(),"visual-state"!==s&&this.kc.UPt(this.iH(),t)}BPt(t,s){t&&cw.$i(s)&&xw.set(this,{bRt:t,vRt:s})}}}{const Gw=self.Gs;Gw.m_t=class extends Gw.Un{constructor(t,s){super();const i=t.Fj(),e=i.USt(s[1]);i.WPt().WEt(e),this.kc=i,this.Odt=t,this.bEt=Gw.Qz.JV(e),this.oNt=null,this.QPt=null,this.VDt=e.Instance,this.f$=s[2],this.Hn=s[0],this.GTt=this.kc.uyt(s[3]);const n=this.bEt.Svt();if(n<2&&(this.oNt=Gw.Qn(e.A_t,this),!(this.oNt instanceof Gw.TEt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(Gw.Qz.WIt(this,n),n>=2){const t=e.A_t??globalThis.eq;if(this.QPt=new t,!(this.QPt instanceof globalThis.eq))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.QPt=new globalThis.WV;Gw.Qz.QIt(n),this.jIt()}static DC(t,s){return Gw.Qn(Gw.m_t,t,s)}Jn(){this.kc=null,this.bEt=null,this.oNt&&(this.oNt.Jn(),this.oNt=null),this.VDt=null}gxt(){return this.oNt}jIt(){this.oNt?this.oNt.jIt():this.QPt&&this.QPt.MH()}Fj(){return this.kc}BW(){return this.Odt}kV(){return this.bEt}tAt(){return this.VDt}Nc(){return this.Hn}W0(){return this.f$}jV(){return this.QPt}uyt(){return this.GTt}}}{const Iw=self.Gs,Nw=self.RV;Iw.ZAt=class extends Iw.Un{constructor(t){super(),this.kc=t.runtime,this.nbt=t.FV,this.bEt=this.nbt.kV(),this.fi=t.BV,this.IM=t.index,this.UAt=null,this.WAt=null,this.bEt.v0(this.fi)}Jn(){this.WAt&&(this.WAt.VW(),this.WAt=null),this.bEt.G0(this.fi),this.UAt&&(this.UAt.Jn(),this.UAt=null),this.kc=null,this.nbt=null,this.bEt=null,this.fi=null}q_t(t){if(this.UAt)throw new Error("already got sdk instance");if(this.kV().Svt()<2){if(this.UAt=Iw.Qn(this.nbt.tAt(),this,t),!(this.UAt instanceof Iw.vEt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const s=this.kV().zIt();this.UIt(s.Instance,t)}}DV(){return this.UAt??this.WAt}UV(){return this.fi}Fj(){return this.kc}zV(){return this.nbt}kV(){return this.bEt}dht(){return this.IM}GEt(){this.UAt?this.UAt.GEt():this.WAt.hq()}DEt(t,s){this.UAt&&this.UAt.DEt(t,s)}qLt(){return this.UAt?this.UAt.NNt():this.WAt.FQ()}ev(t="full"){return this.UAt?this.UAt.ev(t):this.WAt.jQ(t)}nv(t,s="full"){if(this.UAt)return this.UAt.nv(t,s);this.WAt.zQ(t,s)}static JPt(t,s,i){const e=globalThis.nq;let n,r;n=s instanceof e?t.vU(s):s.CEt(),r=i instanceof e?t.vU(i):i.CEt();const h=n.UV(),o=r.UV(),a=h.BW().$P(),u=o.BW().$P();if(a!==u)return a-u;const l=h.PLt(),c=o.PLt();return l!==c?l-c:n.dht()-r.dht()}UIt(t,s){const i=Nw,e=t??this.UAt.zIt(),n=e||i,r=this.kV().Svt();if(Iw.Qz.WIt(this,r),Iw.Qz.QEt(s),this.WAt=new n,Iw.Qz.JEt(),Iw.Qz.QIt(r),e&&!(this.WAt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);return this.WAt}lNt(){return this.WAt||this.UIt()}ANt(){return!!this.WAt}}}{const Ew=self.Gs;Ew.H$=class extends Ew.Un{constructor(t,s){super(),this.cv=t,this.VPt=[],this.YPt=[],this.HPt=new Map,this.qPt=[],this.ZPt=[],this.KPt=new Set,this.$T=!0;for(const t of s){const s=Ew.Qn(Ew.XPt,this,t,this.VPt.length);this.VPt.push(s),this.HPt.set(s.Nc().toLowerCase(),s),t.length>=3&&this.qPt.push(this.$Pt(s,t[2]))}this.Fj().tkt(this)}Jn(){this.Fj().skt(this);for(const t of this.ZPt)t.Jn();Ew.wh(this.ZPt),Ew.wh(this.VPt),Ew.wh(this.YPt),this.HPt.clear(),Ew.wh(this.qPt),this.cv=null}ikt(t){this.KPt.add(t)}ekt(t){this.KPt.delete(t)}nkt(t){t.tS()&&(this.ZPt=this.VPt.map((t=>{const s=t.EG();return s.rkt()>0?Ew.Qn(Ew.OM.hkt,s):null})),this.okt());for(const s of this.KPt)s.nkt(t)}Y_t(t){if(t.length){this.VPt=t.concat(this.VPt);for(const s of t)this.HPt.set(s.Nc().toLowerCase(),s);for(let t=0,s=this.VPt.length;t<s;++t)this.VPt[t].F0(t)}}$Pt(t,s){t.akt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=Ew.Qn(Ew.vo);e.ga(s),i[t]=e}}return i}Tv(){return this.cv}Fj(){return this.cv.Fj()}HV(){Ew.wh(this.YPt);let t=!0;for(const s of this.VPt)s.EMt()&&(this.YPt.push(s),s.EG().gb()||(t=!1));this.$T=t}nU(){return this.VPt}aAt(){return this.VPt.length>0}srt(t){return this.HPt.get(t.toLowerCase())||null}ukt(t){if((t=Math.floor(+t))<0||t>=this.VPt.length)throw new RangeError("invalid effect type index");return this.VPt[t]}VV(t){return this.ukt(t).EMt()}YV(t,s){this.ukt(t).akt(s)}H0(){return this.YPt}h2(){return this.YPt.length>0}gb(){return this.$T}trt(t){return this.qPt[t]}X$(t){return t<this.ZPt.length?this.ZPt[t]:this.qPt[t]}qV(t,s){if(t<0||t>=this.qPt.length)return null;const i=this.qPt[t];return s<0||s>=i.length?null:i[s]}ZV(t,s,i){if(t<0||t>=this.qPt.length)return!1;const e=this.qPt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof Ew.vo){if(n.Qo(i))return!1;n.Po(i)}else{if(n===i)return!1;e[s]=i}return t<this.ZPt.length&&this.ZPt[t].lkt(s,i),!0}okt(){const t=this.qPt,s=this.ZPt;for(let i=0,e=Math.min(t.length,s.length);i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.lkt(t,n[t])}}static ckt(t){return t&&t instanceof Ew.vo?{t:"color",v:t.toJSON()}:t}static fkt(t){if(null===t)return NaN;if("object"==typeof t){if("color"===t.t){const s=Ew.Qn(Ew.vo);return s.ga(t.v),s}throw new Error("invalid effect parameter type")}return t}static dkt(t){return t.map(Ew.H$.ckt)}static pkt(t){return t.map(Ew.H$.fkt)}ev(){return this.VPt.map((t=>({name:t.Nc(),active:t.EMt(),params:Ew.H$.dkt(this.qPt[t.$P()])})))}nv(t){for(const s of t){const t=this.srt(s.name);t&&(t.akt(s.active),this.qPt[t.$P()]=Ew.H$.pkt(s.params))}this.HV(),this.okt()}}}{const Dw=self.Gs;Dw.XPt=class extends Dw.Un{constructor(t,s,i){super(),this.Y$=t,this.jc=s[0],this.Hn=s[1],this.IM=i,this.Gb=null,this.kf=!0}Jn(){this.Y$=null,this.Gb=null}V_t(t){const s=Dw.Qn(Dw.XPt,t,[this.jc,this.Hn],-1);return s.Gb=this.Gb,s.kf=this.kf,s}nkt(t){const s=t.hS(this.jc);if(!s)throw new Error("failed to find shader program '"+this.jc+"'");this.Gb=s}eU(){return this.Y$}Nc(){return this.Hn}F0(t){this.IM=t}$P(){return this.IM}Tv(){return this.Y$.Tv()}Fj(){return this.Y$.Fj()}akt(t){this.kf=!!t}EMt(){return this.kf}EG(){return this.Gb}mkt(){const t=[];for(let s=0,i=this.Gb.DG();s<i;++s){const i=this.Gb._G(s);if("float"===i||"percent"===i)t.push(0);else{if("color"!==i)throw new TypeError("unknown effect parameter type");t.push(Dw.Qn(Dw.vo,1,1,1,1))}}return t}}}{const _w=self.Gs;_w.dRt=class extends _w.Un{constructor(t,s){super(),this.fi=t,this.ykt=s,this.Y$=t.BW().eU(),this.gkt=!0,this.t0=!0,this.Mkt=!1,this.wkt=!1,this.Skt=!1,this.Tkt=!1,this.qP=_w.Qn(_w.OM.jO,t.Fj().Cj().q$(),{NO:(t,s)=>{const i=s.BP(),e=i.lj();t.Lb(e.Z$()),t.US(e.cJ()),i.Av(t),t.US(0)},EO:t=>{const s=t.WNt(),[i,e]=t.UNt();return{LP:s,OP:i,RP:e}},DO:t=>this.X$(t)}),this.bkt=[],this.YPt=[],this.$T=!0,this.qPt=[],this.ZPt=[],this.nkt(t.Fj().lb());for(let t=0,s=this.Y$.nU().length;t<s;++t)this.bkt.push(!0);this.HV(),this.Y$.ikt(this)}Jn(){this.Y$.ekt(this);for(const t of this.ZPt)t&&t.Jn();_w.wh(this.ZPt),this.qP.Jn(),this.qP=null,_w.wh(this.bkt),_w.wh(this.YPt),_w.wh(this.qPt),this.fi=null,this.Y$=null}nkt(t){t.tS()&&(this.ZPt=this.Y$.nU().map((t=>{const s=t.EG();return s.rkt()>0?_w.Qn(_w.OM.hkt,s):null})))}TRt(t){let s=0;for(const i of t)this.qPt.push(this.$Pt(s,i)),++s;this.okt(),this.HV()}$Pt(t,s){this.bkt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=_w.Qn(_w.vo);e.ga(s),i[t]=e}}return i}eLt(){for(const t of this.Y$.nU())this.qPt.push(t.mkt());this.okt()}Tv(){return this.cv}eU(){return this.Y$}XP(){return this.V0(),this.qP}Fj(){return this.fi.Fj()}HV(){_w.wh(this.YPt);const t=this.ykt,s=this.Y$.nU(),i=this.YPt,e=this.bkt;let n=!0;for(let t=0,r=s.length;t<r;++t)if(e[t]){const e=s[t];i.push(e),e.EG().gb()||(n=!1)}this.$T=n,t.zPt(!!i.length),this.gkt=!0}V0(){const t=this.fi,s=this.ykt,i=s.Y0(),e=t.TB().rB(),n=0!==s.lU()||0!==s.cj().lU()||s.Vy()<0||s.ig()<0,r=t.VNt(),h=t.yb();(this.gkt||i!==this.t0||e!==this.Mkt||n!==this.wkt||r!==this.Skt||h!==this.Tkt||this.qP._R())&&(this.qP.AR(this.YPt.map((t=>t.EG())),{AO:this.YPt.map((t=>t.$P())),LO:!i||h,RO:e,PO:r,kO:n}),this.gkt=!1,this.t0=i,this.Mkt=e,this.wkt=n,this.Skt=r,this.Tkt=h)}H0(){return this.YPt}trt(t){return this.qPt[t]}X$(t){return t<this.ZPt.length?this.ZPt[t]:this.qPt[t]}qV(t,s){if(t<0||t>=this.qPt.length)return null;const i=this.qPt[t];return s<0||s>=i.length?null:i[s]}ZV(t,s,i){if(t<0||t>=this.qPt.length)return!1;const e=this.qPt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof _w.vo){if(n.Qo(i))return!1;n.Po(i)}else{if(n===i)return!1;e[s]=i}return t<this.ZPt.length&&this.ZPt[t].lkt(s,i),!0}okt(){const t=this.qPt,s=this.ZPt;for(let i=0,e=s.length;i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.lkt(t,n[t])}}gb(){return this.$T}vkt(){return this.YPt.some((t=>t.EG().Sb()))}VV(t){return this.bkt[t]}YV(t,s){this.bkt[t]=!!s}nU(){return this.Y$.nU()}w4(){return this.Y$.nU().map((t=>({name:t.Nc(),active:this.bkt[t.$P()],params:_w.H$.dkt(this.qPt[t.$P()])})))}S4(t){for(const s of t){const t=this.Y$.srt(s.name);t&&(this.bkt[t.$P()]=s.active,this.qPt[t.$P()]=_w.H$.pkt(s.params))}this.HV(),this.okt()}}}{const Aw=self.Gs,Lw=[],Ow=[],Rw=[],Pw=Aw.Qn(Aw.ol),kw=Aw.Qn(Aw.ol),Fw=Aw.Qn(Aw.Iu),jw=Aw.Qn(Aw.Rect),zw=Aw.Qn(Aw.Rect);let Bw=null,Uw=null,Ww=null;Aw.xkt=class extends Aw.Un{constructor(t){super(),this.kc=t,this.Ckt=0,this.Gkt=0,this.Ikt=[],this.Nkt=0,this.Ekt=0,this.Dkt=0,this._kt=0,this.Akt=new self.ez(this)}Jn(){this.kc=null}Fj(){return this.kc}hk(){return this.Akt}Lkt(){this.Ekt=this.Nkt,this.Nkt=0,this._kt=this.Dkt,this.Dkt=0}Okt(){return this.Ekt}Rkt(){return this._kt}Pkt(t,s){const i=t.lj(),e=s.lj();i&&e&&i._J()&&e._J()&&this.Ikt.push([t,s])}wCt(t,s,i){for(const[e,n]of this.Ikt){let r=null;if(t===e)r=n;else{if(t!==n)continue;r=e}r.NCt(s)&&(i.includes(r)||i.push(r))}}SCt(t,s){if(!this.Ikt.length)return!1;for(const[i,e]of this.Ikt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}kkt(){Aw.wh(this.Ikt)}rz(t,s){if(!t||!s||t===s)return!1;const i=t.lj(),e=s.lj();if(!i._J()||!e._J())return!1;this.Nkt++;const n=i.cj(),r=e.cj();return n.z1(r)?this.Fkt(i,e):this.jkt(i,e)}Fkt(t,s){if(!t.pJ().Tu(s.pJ()))return!1;if(this.Dkt++,!t.yJ().$u(s.yJ()))return!1;if(t.cLt()&&s.cLt())return!1;if(t.cLt())return this.zkt(t,s);if(s.cLt())return this.zkt(s,t);if(!t.IPt()&&!s.IPt())return!0;const i=t.NPt(),e=s.NPt();return i.Sl(e,s.Wb()-t.Wb(),s.Vb()-t.Vb())}jkt(t,s){const i=t.cLt(),e=s.cLt();if(i&&!e)return this.Bkt(t,s);if(e&&!i)return this.Bkt(s,t);if(e||i)return!1;{const i=t.cj(),e=s.cj();Pw.m(t.NPt()),kw.m(s.NPt());const n=Pw.fl();for(let s=0,e=n.length;s<e;s+=2){const e=s+1,r=n[s],h=n[e],[o,a]=i.LW(r+t.Wb(),h+t.Vb());n[s]=o,n[e]=a}const r=kw.fl();for(let t=0,i=r.length;t<i;t+=2){const i=t+1,n=r[t],h=r[i],[o,a]=e.LW(n+s.Wb(),h+s.Vb());r[t]=o,r[i]=a}return Pw.yl(),kw.yl(),this.Dkt++,Pw.Sl(kw,0,0)}}Bkt(t,s){const i=t.cj(),e=s.cj();Bw||(Bw=Aw.Qn(Aw.ol)),Uw||(Uw=Aw.Qn(Aw.Rect)),Ww||(Ww=Aw.Qn(Aw.Iu));const n=s.Wb(),r=s.Vb(),[h,o]=e.LW(n,r),[a,u]=i._W(h,o),l=a-n,c=u-r;if(Uw.m(s.pJ()),Uw.offset(l,c),!t.pJ().Tu(Uw))return!1;if(Ww.m(s.yJ()),Ww.offset(l,c),this.Dkt++,!t.yJ().$u(Ww))return!1;Bw.m(s.NPt());const f=Bw.fl();for(let t=0,s=f.length;t<s;t+=2){const s=t+1;f[t]+=l,f[s]+=c}return Bw.yl(),this.zkt(t,s,a,u,Bw,Uw,Ww)}zkt(t,s,i,e,n,r,h){const o=void 0!==r?r:s.pJ(),a=t.Wb(),u=t.Vb(),l=t.iH().DV(),c=void 0!==i?i:s.Wb(),f=void 0!==e?e:s.Vb(),d=s.IPt(),p=void 0!==h?h:s.yJ(),m=Ow;l.Ukt(o,m);for(let t=0,i=m.length;t<i;++t){const i=m[t],e=i.Wkt();if(this.Nkt++,o.bu(e,a,u)&&(Fw.Hu(e),Fw.offset(a,u),Fw.$u(p)))if(d){const t=void 0!==n?n:s.NPt();let r=c,h=f;void 0!==n&&(r=s.Wb(),h=s.Vb());const o=i.Qkt();if(o){if(this.Dkt++,o.Sl(t,r-(a+e.Ka()),h-(u+e.Xa())))return Aw.wh(m),!0}else if(Pw.Ml(Fw,0,0),Pw.Sl(t,r,h))return Aw.wh(m),!0}else{const t=i.Qkt();if(!t)return Aw.wh(m),!0;if(Pw.Ml(p,0,0),t.Sl(Pw,-(a+e.Ka()),-(u+e.Xa())))return Aw.wh(m),!0}}return Aw.wh(m),!1}Jkt(t,s,i){const e=t.LB(),n=this.kc.Jk();if(!n)throw new Error("cannot call outside event");const r=n.upt(),h=new Aw.Vkt;if(e.Vdt()){i||(e.$dt(!1),Aw.wh(e.tpt())),r&&Aw.wh(e.spt());for(const n of t.AB()){const t=n.lj(),o=t.cj();let a=!1;if(h.ZU(o)&&t.MJ()&&(a=s.some((([s,i])=>{const[e,n]=h._W(o,s,i,t.cJ());return t.LJ(e,n)}))),a){if(i)return!1;e.Kdt(n)}else r&&e.Xdt(n)}}else{let t,o=!1;r&&!n.Xwt(this.kc.tyt())?this.kc.bxt()&&!e.spt().length&&e.tpt().length?t=e.tpt():(t=e.spt(),o=!0):t=e.tpt();let a=0;for(let n=0,u=t.length;n<u;++n){const u=t[n],l=u.lj(),c=l.cj();let f=!1;if(h.ZU(c)&&l.MJ()&&(f=s.some((([t,s])=>{const[i,e]=h._W(c,t,s,l.cJ());return l.LJ(i,e)}))),f){if(i)return!1;o?e.Kdt(u):t[a++]=u}else o?t[a++]=u:r&&e.Xdt(u)}i||(t.length=a)}return t.LSt(),h.Jn(),!!i||e.Ydt()}Ykt(t,s){if(!t)return!0;for(const i of s.EAt())if(!t.z1(i))return!1;return!0}Txt(t,s,i,e){if(s.P0())for(const n of s.$B())this.Ykt(t,n)?(n.GAt(),n.xAt().ZX(i,e)):Aw.An(e,n.AB());else this.Ykt(t,s)?(s.GAt(),s.xAt().ZX(i,e)):Aw.An(e,s.AB())}mz(t,s,i,e){for(const n of s)this.Txt(t,n,i,e)}Hkt(t,s,i){const e=this.kc.YEt();e&&this.mz(t,e.s8(),s,i)}qkt(t,s,i){const e=this.kc.HEt();e&&this.mz(t,e.s8(),s,i)}dPt(t,s){return t.pLt()&&(!s||s.lj().dPt(t.Gvt().get("solidTags")))}az(t){const s=t.lj();this.Hkt(s.cj(),s.pJ(),Lw);for(const s of Lw)if(this.dPt(s,t)&&this.rz(t,s))return Aw.wh(Lw),s;return Aw.wh(Lw),null}Zkt(t,s){this.Hkt(null,t,Lw);for(const i of Lw)if(this.dPt(i,s)&&this.Kkt(t,i))return Aw.wh(Lw),i;return Aw.wh(Lw),null}Xkt(t,s){let i=null;s&&(i=Rw,Aw.wh(i));const e=t.lj();this.qkt(e.cj(),e.pJ(),Lw);for(const e of Lw)if(e.yLt()&&this.rz(t,e)){if(!s)return Aw.wh(Lw),e;i.push(e)}return Aw.wh(Lw),i}$kt(t,s,i,e,n){e=e||50;const r=t.lj(),h=r.Wb(),o=r.Vb();for(let a=0;a<e;++a)if(r.$Q(h+s*a,o+i*a),r.XQ(),!this.rz(t,n))return!0;return r.$Q(h,o),r.XQ(),!1}tFt(t,s,i,e,n,r){e=e||50;const h=t.lj(),o=h.Wb(),a=h.Vb();let u=null,l=null;for(let c=0;c<e;++c)if(h.$Q(o+s*c,a+i*c),h.XQ(),!this.rz(t,u))if(u=this.az(t),u)l=u;else if(n&&(u=r?this.rz(t,r)?r:null:this.Xkt(t),u&&(l=u)),!u)return l&&this.sFt(t,s,i,l,16,!0),!0;return h.$Q(o,a),h.XQ(),!1}iFt(t,s,i,e){e=e||50;const n=t.lj(),r=n.Wb(),h=n.Vb();let o=null,a=null;for(let u=0;u<e;++u)for(let e=0;e<2;++e){const l=2*e-1;if(n.$Q(r+s*u*l,h+i*u*l),n.XQ(),!this.rz(t,o)){if(o=this.az(t),!o)return a&&this.sFt(t,s*l,i*l,a,16,!0),!0;a=o}}return n.$Q(r,h),n.XQ(),!1}sFt(t,s,i,e,n,r){let h=2,o=!1,a=!1;const u=t.lj();let l=u.Wb(),c=u.Vb();for(;h<=n;){const n=1/h;h*=2,u.sJ(s*n*(o?1:-1),i*n*(o?1:-1)),u.XQ(),this.rz(t,e)||r&&this.az(t)?(o=!0,a=!0):(o=!1,a=!1,l=u.Wb(),c=u.Vb())}a&&(u.$Q(l,c),u.XQ())}eFt(t,s=100){let i=0;const e=t.lj(),n=e.Wb(),r=e.Vb();let h=0,o=this.az(t);if(!o)return!0;for(;i<=s;){let s=0,a=0;switch(h){case 0:s=0,a=-1,i++;break;case 1:s=1,a=-1;break;case 2:s=1,a=0;break;case 3:s=1,a=1;break;case 4:s=0,a=1;break;case 5:s=-1,a=1;break;case 6:s=-1,a=0;break;case 7:s=-1,a=-1}if(h=(h+1)%8,e.$Q(Math.floor(n+s*i),Math.floor(r+a*i)),e.XQ(),!this.rz(t,o)&&(o=this.az(t),!o))return!0}return e.$Q(n,r),e.XQ(),!1}nFt(t,s,i,e){const n=t.lj(),r=n.Wb(),h=n.Vb(),o=Math.max(10,Aw.ir(s,i,r,h)),a=Aw.nr(s,i,r,h),u=e||this.az(t);if(!u)return Aw.Kn(a+Math.PI);let l=u,c=0,f=0;const d=Aw.Xn(5);let p;for(p=1;p<36;++p){const r=a-p*d;if(n.$Q(s+Math.cos(r)*o,i+Math.sin(r)*o),n.XQ(),!this.rz(t,l)&&(l=e?null:this.az(t),!l)){c=r;break}}for(36===p&&(c=Aw.Kn(a+Math.PI)),l=u,p=1;p<36;++p){const r=a+p*d;if(n.$Q(s+Math.cos(r)*o,i+Math.sin(r)*o),n.XQ(),!this.rz(t,l)&&(l=e?null:this.az(t),!l)){f=r;break}}if(36===p&&(f=Aw.Kn(a+Math.PI)),n.$Q(r,h),n.XQ(),f===c)return f;const m=Aw.rr(f,c)/2;let y;y=Aw.ar(f,c)?Aw.Kn(c+m+Math.PI):Aw.Kn(f+m);const g=Math.cos(a),M=Math.sin(a),w=Math.cos(y),S=Math.sin(y),T=g*w+M*S,b=g-2*T*w,v=M-2*T*S;return Aw.nr(0,0,b,v)}rFt(t,s,i,e,n){if(!n)return!1;const r=n.lj();return!!r._J()&&(this.Nkt++,jw.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!!r.pJ().Tu(jw)&&(n.cLt()?this.hFt(t,s,i,e,n,r):(this.Dkt++,!!r.yJ().Xu(t,s,i,e)&&(!r.IPt()||r.NPt().Xu(r.Wb(),r.Vb(),t,s,i,e)))))}hFt(t,s,i,e,n,r){const h=r.Wb(),o=r.Vb(),a=n.DV(),u=Ow;zw.set(t,s,i,e),zw.normalize(),a.Ukt(zw,u);for(let n=0,r=u.length;n<r;++n){const r=u[n],a=r.Wkt();if(this.Nkt++,jw.bu(a,h,o)&&(Fw.Hu(a),Fw.offset(h,o),Fw.Xu(t,s,i,e))){const n=r.Qkt();if(!n)return Aw.wh(u),!0;if(this.Dkt++,n.Xu(h+a.Ka(),o+a.Xa(),t,s,i,e))return Aw.wh(u),!0}}return Aw.wh(u),!1}Kkt(t,s){if(!s)return!1;const i=s.lj();if(!i._J())return!1;if(this.Nkt++,!i.pJ().Tu(t))return!1;if(s.cLt())return this.oFt(t,s,i);if(this.Dkt++,Fw.Hu(t),!i.yJ().$u(Fw))return!1;if(!i.IPt())return!0;const e=Pw;e.Hu(t,i.Wb(),i.Vb());const n=i.NPt();return e.Sl(n,0,0)}oFt(t,s,i){const e=i.Wb(),n=i.Vb(),r=s.DV(),h=Ow;r.Ukt(t,h);for(let s=0,i=h.length;s<i;++s){const i=h[s],r=i.Wkt();if(this.Nkt++,t.bu(r,e,n)){const s=i.Qkt();if(!s)return Aw.wh(h),!0;if(this.Dkt++,Pw.Hu(t,0,0),s.Sl(Pw,-(e+r.Ka()),-(n+r.Xa())))return Aw.wh(h),!0}}return Aw.wh(h),!1}aFt(t,s){if(!t)return;const i=t.lj();i._J()&&(this.Nkt++,i.pJ().Tu(s.rect)&&(t.cLt()?this.uFt(t,i,s):(this.Dkt++,i.IPt()?s.lFt(t,i.Wb(),i.Vb(),i.NPt()):s.cFt(t,i.yJ()))))}uFt(t,s,i){const e=s.Wb(),n=s.Vb(),r=Ow;t.DV().Ukt(i.rect,r);for(let h=0,o=r.length;h<o;h++){const o=r[h],a=o.Wkt();if(this.Nkt++,i.rect.bu(a,e,n)){const r=o.Qkt();this.Dkt++,r?i.lFt(t,e+a.Ka(),n+a.Xa(),r):i.fFt(t,s.Wb(),s.Vb(),a)}}Aw.wh(r)}lz(t,s){if(t===this.Ckt&&s===this.Gkt)return;this.Ckt=t,this.Gkt=s;const i=this.kc.R0();for(const e of i)if(e.Kz()){for(const t of e._B())t.lj().cPt();e.xAt().dFt(t,s),e.CAt();for(const t of e._B()){const s=t.lj();s.jPt(),s.IAt()}}}fz(){return[this.Ckt,this.Gkt]}pFt(t,s){this.Ckt=t,this.Gkt=s}}}{const Qw=self.Gs;Qw.i_t=class extends Qw.Un{constructor(t,s){super(),this.WX=t,this.QX=s,this.JX=Qw.Qn(Qw.Gl)}Jn(){this.JX.Jn(),this.JX=null}dFt(t,s){if(!this.JX.El())throw new Error("grid not empty");this.WX=t,this.QX=s}VX(t,s,i){let e=this.JX.Js(t,s);return e||(i?(e=Qw.Qn(Qw.mFt,this,t,s),this.JX.Set(t,s,e),e):null)}YX(t){const s=Math.floor(t/this.WX);return isFinite(s)?s:0}HX(t){const s=Math.floor(t/this.QX);return isFinite(s)?s:0}qX(t,s,i){if(s)for(let e=s.Ka(),n=s.$a();e<=n;++e)for(let n=s.Xa(),r=s.tu();n<=r;++n){if(i&&i.vu(e,n))continue;const s=this.VX(e,n,!1);s&&(s.Zf(t),s.El()&&this.JX.Dl(e,n))}if(i)for(let e=i.Ka(),n=i.$a();e<=n;++e)for(let n=i.Xa(),r=i.tu();n<=r;++n)s&&s.vu(e,n)||this.VX(e,n,!0).jX(t)}ZX(t,s){let i=this.YX(t.Ka());const e=this.HX(t.Xa()),n=this.YX(t.$a()),r=this.HX(t.tu());if(isFinite(n)&&isFinite(r))for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this.VX(i,t,!1);e&&e.BX(s)}}}}{const Jw=self.Gs;Jw.mFt=class extends Jw.Un{constructor(t,s,i){super(),this.AX=t,this.Na=s,this.Ea=i,this.LX=Jw.Qn(Jw.Ol)}Jn(){this.LX.Jn(),this.LX=null,this.AX=null}El(){return this.LX.El()}jX(t){this.LX.Fl(t)}Zf(t){this.LX.Dl(t)}BX(t){Jw.An(t,this.LX.jl())}}}{const Vw=self.Gs,Yw=1e-6;Vw.yFt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Vw.Rect,this.gFt=2,this.MFt=null,this.wFt=0,this.SFt=0,this.TFt=0,this.bFt=0,this.vFt=0,this.St=0,this.xFt=1,this.CFt=0,this.GFt=1,this.IFt=0}NFt(){return this.gFt<1.000001}Ff(){this.gFt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.gFt=2,this.MFt=null,this.wFt=0,this.SFt=0,this.TFt=0,this.bFt=0,this.vFt=0,this.St=0,this.xFt=1,this.CFt=0,this.GFt=1,this.IFt=0,this}EFt(){if(!1===this.NFt())return;const t=this.dx*this.gFt,s=this.dy*this.gFt,i=Vw.tr(t,s),e=t/i,n=s/i;this.St=i-Yw,this.bFt=this.x1+e*this.St,this.vFt=this.y1+n*this.St,this.wFt=Math.atan2(this.TFt,this.SFt)+Math.PI/2,this.xFt=Math.cos(this.wFt),this.CFt=Math.sin(this.wFt);const r=e*this.xFt+n*this.CFt;if(this.GFt=e-2*this.xFt*r,this.IFt=n-2*this.CFt*r,r>0){const t=Math.PI;this.wFt=Vw.Kn(this.wFt+t),this.xFt=-this.xFt,this.CFt=-this.CFt}}DFt(t,s,i,e,n){const r=Vw.Yr(this.x1,this.y1,this.x2,this.y2,s,i,e,n);r>=0&&r<this.gFt&&(this.gFt=r,this.MFt=t.tQ(),this.SFt=s-e,this.TFt=i-n)}fFt(t,s,i,e){const n=s+e.Ka(),r=s+e.$a(),h=i+e.Xa(),o=i+e.tu();this.DFt(t,n,h,r,h),this.DFt(t,r,h,r,o),this.DFt(t,r,o,n,o),this.DFt(t,n,o,n,h)}cFt(t,s){const i=s.Fr(),e=s.jr(),n=s.zr(),r=s.Br(),h=s.Ur(),o=s.Wr(),a=s.Qr(),u=s.Jr();this.DFt(t,i,e,n,r),this.DFt(t,n,r,h,o),this.DFt(t,h,o,a,u),this.DFt(t,a,u,i,e)}lFt(t,s,i,e){const n=e.fl();for(let e=0,r=n.length;e<r;e+=2){const h=(e+2)%r,o=n[e]+s,a=n[e+1]+i,u=n[h]+s,l=n[h+1]+i;this.DFt(t,o,a,u,l)}}}}{const Hw=self.Gs;Hw.Vkt=class{constructor(){this._Ft=new Map}Jn(){for(const t of this._Ft.values())t.AFt.Nl();this._Ft.clear()}LFt(t){let s=this._Ft.get(t);return void 0===s&&(s={qU:null,AFt:new Hw.Gl},this._Ft.set(t,s)),s}ZU(t){const s=this.LFt(t);return null===s.qU&&(s.qU=t.iW()),s.qU}_W(t,s,i,e){if(0!==e)return t._W(s,i,e);const n=this.LFt(t);let r=n.AFt.Js(s,i);return void 0===r&&(r=t._W(s,i,e),n.AFt.Set(s,i,r)),r}}}{const qw=self.Gs,Zw=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Kw=new Set(["high","low"]),Xw=self.hs,$w=Xw.fs,tS=(Xw.gs,$w.create()),sS=qw.Qn(qw.Iu),iS=qw.Qn(qw.Rect);qw.OFt=class extends qw.Un{constructor(t){super(),this.kc=t,this.RFt=[],this.PFt=!1,this.kFt=null,this.FFt=null,this.jFt=null,this.zFt="high-performance",this.BFt=!1,this.UFt="auto",this.WFt=0,this.QFt=0,this.JFt="",this.VFt=0,this.YFt=0,this.HFt=0,this.qFt=0,this.ZFt=0,this.KFt=0,this.sw="normalized",this.XFt=0,this.$Ft=1,this.tjt=1e4,this.Lw=!0,this.sjt=0,this.lR=0,this.cR=0,this.ijt="letterbox-scale",this.ejt="letterbox-scale",this.njt=0,this.rjt=0,this.hjt=$w.create(),this.ojt="high",this.ajt=this.ojt,this.ujt=!1,this.ljt=[],this.cjt=new Set,this.fjt=self.C3_Shaders,this.djt=qw.Qn(qw.OM.pO,{lO:()=>[this.C2(),this.G2()],cO:()=>this.pjt(),fO:t=>this.mjt(t),getTime:()=>this.Fj().fF(),dO:()=>this.Fj().gj()}),this.yjt=0,this.gjt=0,this.Mjt=NaN,this.wjt=null,this.Sjt=new Map,this.Tjt=NaN,this.bjt=new Map,this.vjt="",this.xjt=1,this.Cjt=qw.Qn(qw.Rect),this.Gjt="",this.Ijt=null,this.Njt=null,this.Ejt=0,this.Djt=0,this._jt=-1,this.Ajt=0,this.Ljt=t=>this.Ajt=t.progress,this.Ojt=null,this.Rjt={Pjt:null,kjt:null,Fjt:null},this.jjt=0,this.zjt=0,this.Bjt=0,this.Ujt="fade-in",this.Wjt=null,this.Qjt=new Promise((t=>this.Wjt=t))}Jjt(t){this.zFt=t}Vjt(t){this.PFt=!!t}Yjt(t){this.sw=t}Hjt(){return this.sw}qjt(t){this.XFt=t}Zjt(t,s){this.$Ft=t,this.tjt=s}Kjt(t){this.BFt=!!t}Xjt(t){this.UFt=t}async lo(t){let s=t.canvas;this.RFt.push({canvas:s,$jt:null}),this.kc.GQ("runtime","window-resize",(t=>this.tzt(t))),this.kc.GQ("runtime","fullscreenchange",(t=>this.szt(t))),this.kc.GQ("runtime","fullscreenerror",(t=>this.izt(t))),s.addEventListener("webglcontextlost",(t=>this.ezt(t))),s.addEventListener("webglcontextrestored",(t=>this.nzt(t))),this.ujt=!!t.isFullscreen,this.JFt=t.cssDisplayMode;const i=navigator.gpu&&this.PFt;let e=!1;if(i)try{await this.rzt(!0)}catch(t){this.hzt("WebGPU",t),this.FFt=null}if(!this.lb())try{await this.ozt(!0)}catch(t){this.hzt("WebGL",t),this.kFt=null}if(this.lb()||(e=!0),!this.lb()&&i)try{await this.rzt(!1)}catch(t){this.hzt("WebGPU",t),this.FFt=null}if(!this.lb())try{await this.ozt(!1)}catch(t){this.hzt("WebGL",t),this.kFt=null}const n=this.lb();if(!n)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");n.OT(e),this.FFt&&(this.FFt.azt=()=>this.uzt(),this.FFt.lzt=()=>this.czt()),"normalized"===this.sw?n.Zw():(n.Kw(),n.Hw(this.XFt)),this.bD(t.windowInnerWidth,t.windowInnerHeight,!0),await this.nkt()}hzt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async rzt(t){const s={HM:this.$Ft,qM:this.tjt};let i=!0;"no"===this.UFt?i=!1:"auto"===this.UFt&&(i=qw.Ks.ri);const e={powerPreference:this.zFt,depth:this.kc.G1(),failIfMajorPerformanceCaveat:t,fzt:this.kc.R2(),dzt:this.kc.pzt(),__:this.kc.mzt(),yzt:i};this.FFt=qw.Qn(qw.OM.gzt,s),await this.FFt.DC(this.RFt[0].canvas,e)}async ozt(t){const s={alpha:!0,powerPreference:this.zFt,D_:"xbox-uwp-webview2"!==this.kc.Tz(),depth:this.kc.G1(),__:this.kc.mzt(),failIfMajorPerformanceCaveat:t,HM:this.$Ft,qM:this.tjt};this.BFt&&(s.A_=1),this.kFt=qw.Qn(qw.OM.R_,this.RFt[0].canvas,s),await this.kFt.Fw()}async Mzt(){if(this.fjt){const t=[];for(const[s,i]of Object.entries(this.fjt)){i.src=i.wzt;const e=qw.OM.Szt.KG(this.FFt.Tzt());t.push(this.FFt.jA(Object.assign({IC:e,name:s},i)))}await Promise.all(t)}}async bzt(){if(this.fjt){const t=[];for(const[s,i]of Object.entries(this.fjt)){let e;if(i.vzt&&this.kFt.yx()>=2)i.src=i.vzt,e=qw.OM.CC.XG();else{if(!i.xzt)throw new Error(`shader '${s}' does not support WebGL 1`);i.src=i.xzt,e=qw.OM.CC.KG()}t.push(this.kFt.jA(Object.assign({IC:e,name:s},i)))}await Promise.all(t),this.kFt.zA(),this.kFt.aS()}this.kFt.$L()&&(this.wjt=qw.Qn(qw.OM.S_,this.kFt))}async nkt(){this.FFt?await this.Mzt():this.kFt&&await this.bzt();const t=this.lb();t.AT(this.Lw),t.$L()&&(this.Mjt=0);for(const s of this.kc.Czt()){for(const i of s.nU())i.nkt(t);s.nkt(t),s.HV()}this.jFt=new self.Bq(this.kc,t)}Jn(){this.kc=null,this.kFt=null,this.RFt.length=0}vk(){return this.kc.vk()}tzt(t){const s=this.kc;if(s.Gzt())return;const i=t.devicePixelRatio;this.vk()&&(self.devicePixelRatio=i),s.Izt(i),this.ujt=!!t.isFullscreen,this.JFt=t.cssDisplayMode,this.bD(t.innerWidth,t.innerHeight),s.gj();const e=new qw.Event("window-resize");e.data=t,s.gf().If(e);const n=new qw.Event("resize");n.Nzt=this.Az(),n.Ezt=this.Oz(),n.Dzt=this.Pz(),n._zt=this.Fz(),s.qK(n),this.kc.aj()?.l4(),s._Q()&&(s.Byt()||self.AQ.Azt())&&s.UR()}szt(t){this.ujt=!!t.isFullscreen,this.bD(t.innerWidth,t.innerHeight,!0),this.kc.gj()}izt(t){this.ujt=!!t.isFullscreen,this.bD(t.innerWidth,t.innerHeight,!0),this.kc.gj()}bD(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.WFt===t&&this.QFt===s&&!i)return;this.WFt=t,this.QFt=s;const e=this.Lzt();"letterbox-scale"===e?this.Ozt(t,s):"letterbox-integer-scale"===e?this.Rzt(t,s):"off"===e?this.Pzt(t,s):this.kzt(t,s),this.Fzt(e);for(const{canvas:t}of this.RFt)t.width=this.HFt,t.height=this.qFt;this.kc.zc("canvas","update-size",{marginLeft:this.ZFt,marginTop:this.KFt,styleWidth:this.VFt,styleHeight:this.YFt,displayScale:this.VH()});const n=this.lb();n.bD(this.HFt,this.qFt,!0);for(const t of this.ljt)n.YL(t);qw.wh(this.ljt),this.jzt();const r=this.kc.JF();r.i6(),r.e6()}jzt(){this.lb().$w(this.hjt,this.C2()/this.G2())}I2(){return this.hjt}Ozt(t,s){const i=this.kc.jz(),e=this.kc.Ck(),n=this.kc.Ik(),r=e/n;if(t/s>r){const i=s*r;this.VFt=Math.round(i),this.YFt=s,this.ZFt=Math.floor((t-this.VFt)/2),this.KFt=0}else{const i=t/r;this.VFt=t,this.YFt=Math.round(i),this.ZFt=0,this.KFt=Math.floor((s-this.YFt)/2)}this.HFt=Math.round(this.VFt*i),this.qFt=Math.round(this.YFt*i),this.kc.zzt(e,n)}Rzt(t,s){const i=this.kc.jz();1!==i&&(t+=1,s+=1);const e=this.kc.Ck(),n=this.kc.Ik(),r=e/n;let h;h=t/s>r?s*r*i/e:t/r*i/n,h>1?h=Math.floor(h):h<1&&(h=1/Math.ceil(1/h)),this.HFt=Math.round(e*h),this.qFt=Math.round(n*h),this.VFt=this.HFt/i,this.YFt=this.qFt/i,this.ZFt=Math.max(Math.floor((t-this.VFt)/2),0),this.KFt=Math.max(Math.floor((s-this.YFt)/2),0),this.kc.zzt(e,n)}kzt(t,s){const i=this.kc.jz();this.VFt=t,this.YFt=s,this.HFt=Math.round(this.VFt*i),this.qFt=Math.round(this.YFt*i),this.ZFt=0,this.KFt=0;const e=this.VH();this.kc.zzt(this.VFt/e,this.YFt/e)}Pzt(t,s){const i=this.kc.jz();this.VFt=this.kc.d1(),this.YFt=this.kc.m1(),this.HFt=Math.round(this.VFt*i),this.qFt=Math.round(this.YFt*i),this.Bzt()?(this.ZFt=Math.floor((t-this.VFt)/2),this.KFt=Math.floor((s-this.YFt)/2)):(this.ZFt=0,this.KFt=0),this.kc.zzt(this.kc.d1(),this.kc.m1())}Fzt(t){if("high"===this.ojt)this.lR=this.HFt,this.cR=this.qFt,this.ajt="high";else{let s,i;if("off"===this.Lzt()?(s=this.kc.d1(),i=this.kc.m1()):(s=this.kc.Ck(),i=this.kc.Ik()),this.HFt<s||this.qFt<i)this.lR=this.HFt,this.cR=this.qFt,this.ajt="high";else if(this.lR=s,this.cR=i,this.ajt="low","scale-inner"===t){const t=s/i,e=this.WFt/this.QFt;e<t?this.lR=this.cR*e:e>t&&(this.cR=this.lR/e)}else if("scale-outer"===t){const t=s/i,e=this.WFt/this.QFt;e>t?this.lR=this.cR*e:e<t&&(this.cR=this.lR/e)}}}Fj(){return this.kc}Uzt(){return this.RFt[0].canvas}q$(){return this.djt}Bzt(){return this.ujt}Wzt(){return this.JFt}Qzt(t){if(!Zw.has(t))throw new Error("invalid fullscreen mode");this.ijt=t;const s=this.kc.JF();s.i6(),s.e6()}QH(){return this.ijt}Jzt(t){if(!Zw.has(t))throw new Error("invalid fullscreen mode");this.ejt=t;const s=this.kc.JF();s.i6(),s.e6()}Vzt(){return this.ejt}Lzt(){return this.Bzt()?this.Vzt():this.QH()}Yzt(t){if(!Kw.has(t))throw new Error("invalid fullscreen scaling quality");this.ojt=t,this.kc.JF().i6()}Hzt(){return this.ojt}P2(){return this.ajt}static qzt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}_H(){return this.WFt}AH(){return this.QFt}C2(){return this.lR}G2(){return this.cR}AT(t){this.Lw=!!t}Zzt(t){this.sjt=t}GX(){return this.sjt}Kzt(){return this.lb().KD()}ezt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.ljt=[],this.cjt.clear(),this.djt.Ob(),this.kFt.Ob(),this.kc.U3()}uzt(){console.log("[Construct] WebGPU device lost"),this.ljt=[],this.cjt.clear(),this.djt.Ob(),this.kc.U3()}async nzt(t){await this.kFt.Rb(),await this.nkt(),await this.kc.Xzt(),console.log("[Construct] WebGL context restored")}async czt(){await this.nkt(),await this.kc.Xzt(),console.log("[Construct] WebGPU device restored")}$zt(){return this.kFt}tBt(){return this.FFt}lb(){return this.FFt||this.kFt}$_t(){return this.jFt}xz(){let t="";return t=this.kc.tBt()?"webgpu":"webgl"+this.kc.$zt().yx(),this.kc.lb().RT()&&(t+="-software"),t}Gz(){return this.kc.tBt()?this.kc.tBt().sBt():this.kc.$zt().hO()}jW(){return"low"===this.ajt?1/this.kc.jz():this.VH()}VH(){const t=this.Lzt();if("off"===t||"crop"===t)return 1;const s=this.kc.Ck(),i=this.kc.Ik(),e=s/i,n=this.HFt/this.qFt;return"scale-inner"!==t&&n>e||"scale-inner"===t&&n<e?this.YFt/i:this.VFt/s}a4(){return"low"===this.P2()?1:this.VH()}h4(){return"low"===this.P2()?1:this.kc.jz()}iBt(t,s){this.njt=t,this.rjt=s}GZ(t,s,i,e=!0){s=s||this.lR,i=i||this.cR;const n=s/2+this.njt,r=i/2+this.rjt;if(e){let e=this.I2();s===this.lR&&i===this.cR||(t.$w(tS,s/i),e=tS),t.UA(e)}const h=t.eS(n,r,t.zw(i),n,r,0,i);t.HA(h)}eBt(t,s=!0){const i=this.Az(),e=this.Oz(),n=i/2,r=e/2;s&&t.UA(this.I2());const h=t.eS(n,r,t.zw(e),n,r,0,e);t.HA(h)}Pz(){return this.HFt}Fz(){return this.qFt}Az(){return this.VFt}Oz(){return this.YFt}Nz(){return this.ZFt}Dz(){return this.KFt}x3(){return this.RFt.length}nBt(){return"undefined"!=typeof OffscreenCanvas&&this.Uzt()instanceof OffscreenCanvas&&("Chromium"!==qw.Ks.ei||qw.Ks.ii>=124)}async Y3(t,s=!1){if(t<1)throw new Error("invalid HTML layer count");if(this.RFt.length===t)return;const i={count:t,layersDomState:this.kc.JF().UF().U0().filter((t=>t.$U())).map((t=>t.Z1())),immediate:s,marginLeft:this.ZFt,marginTop:this.KFt,styleWidth:this.VFt,styleHeight:this.YFt};let e;if(e=this.vk()?await this.kc.wj("canvas","set-html-layer-count",i):self.c3_runtimeInterface._OnSetHTMLLayerCount(i),t<this.RFt.length)this.RFt.length=t;else for(const t of e.addedCanvases){t.width=this.HFt,t.height=this.qFt;const s=this.nBt()?"bitmaprenderer":"2d",i=t.getContext(s);if(!i)throw new Error(`failed to acquire '${s}' canvas context`);this.RFt.push({canvas:t,$jt:i})}this.kc.gj()}P5(t){if(t>=this.RFt.length)return;const s=this.Uzt(),i=this.RFt[t].$jt;this.nBt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}F2(t){t.depth=this.kc.G1();const s=this.ljt,i=s.findIndex((s=>s.wC(t)));let e;return-1!==i?(e=s[i],s.splice(i,1)):e=this.lb().UL(t),this.cjt.add(e),e}K$(t){if(!this.cjt.has(t))throw new Error("render target not in use");this.cjt.delete(t),this.ljt.push(t)}pjt(){const t={Wv:this.kc.Nk()};return"low"===this.P2()&&(t.width=this.C2(),t.height=this.G2()),this.F2(t)}mjt(t){this.K$(t)}*rBt(){for(const t of this.kc.JF().X5())for(const s of t.wU()){const t=this.Sjt.get(s);t&&(yield t)}}_2(t){if(!this.lb().$L())return null;let s=this.Sjt.get(t);return s||(s={KQ:t,name:t.Nc(),hBt:qw.Qn(qw.OM.S_,this.kFt),oBt:0,aBt:0,uBt:0},this.Sjt.set(t,s)),s.hBt}lBt(){const t=this.lb();if(t.$L()&&0===this.gjt){this.gjt=t.DT(),this.Tjt=NaN;for(const t of this.rBt())t.oBt=NaN}}cBt(){this.kFt&&this.kFt.$L()&&this.fBt(),this.FFt&&this.FFt.$L()&&this.dBt()}fBt(){if(isNaN(this.Tjt)&&(this.Tjt=this.wjt.I_(this.yjt,this.gjt),!isNaN(this.Tjt))){if(this.kc._Q())for(const t of this.rBt())if(t.oBt=t.hBt.I_(this.yjt,this.gjt),isNaN(t.oBt))return;if(this.wjt.N_(this.gjt),this.Mjt=Math.min(this.Tjt,1),this.kc._Q()){const t=new Map;for(const s of this.rBt())s.hBt.N_(this.gjt),s.aBt=Math.min(s.oBt,1),t.set(s.KQ,s.aBt);for(const s of this.rBt()){const i=s.KQ,e=(t.get(i)||0)-i.UU().reduce(((s,i)=>s+(t.get(i)||0)),0);s.uBt=qw.Zn(e,0,1)}const s=this.kc.UF(),i=this.Mjt-s.U0().reduce(((s,i)=>s+(t.get(i)||0)),0);self.AQ.pBt(qw.Zn(i,0,1),this.Mjt,[...this.rBt()])}this.yjt=this.gjt,this.gjt=0}}mBt(){return this.wjt}dBt(){if(0===this.gjt)return;for(let t=this.yjt;t<this.gjt;++t){const s=this.bjt.get(t);if(s&&!s.u_())return}const t=this.kc.UF(),s=qw.bo(t.M3()+1,0);let i=0;for(let t=this.yjt;t<this.gjt;++t){const e=this.bjt.get(t);if(!e)continue;const n=e.l_();let r=BigInt(0),h=BigInt(0);const o=BigInt(0);for(let t=0,i=Math.min(s.length,n.length/2);t<i;++t){const i=n[2*t],e=n[2*t+1];i!==o&&(r===o||i<r)&&(r=i),e>h&&(h=e);const a=Number(e-i)/1e9;s[t]+=a}i+=Number(h-r)/1e9}if(this.Mjt=qw.Zn(i,0,1),this.kc._Q()){const i=t.wU(),e=new Map;for(let t=0,n=Math.min(i.length,s.length-1);t<n;++t){const n=s[t+1];e.set(i[t],n)}const n=[],r=new Map;for(const[t,s]of e){const i=[...t.QU()].reduce(((t,s)=>t+(e.get(s)||0)),0);r.set(t,i),n.push({name:t.Nc(),uBt:qw.Zn(s,0,1),aBt:qw.Zn(i,0,1)})}const h=this.Mjt-t.U0().reduce(((t,s)=>t+(r.get(s)||0)),0);self.AQ.pBt(qw.Zn(h,0,1),this.Mjt,n)}for(let t=this.yjt;t<this.gjt;++t)this.bjt.delete(t);this.yjt=this.gjt,this.gjt=0}yBt(t){this.bjt.set(this.FFt.DT(),t)}IF(){return this.Mjt}Gj(t,s,i,e,n,r){return this.vjt=t,this.xjt=s,this.Cjt.Wa(i,e,n,r),this.Ijt||(this.Ijt=new Promise((t=>{this.Njt=t}))),this.Ijt}gBt(){if(!this.vjt)return;let t=this.Uzt();const s=this.Cjt,i=qw.Zn(Math.floor(s.Ka()),0,t.width),e=qw.Zn(Math.floor(s.Xa()),0,t.height);let n=s.width();n=0===n?t.width-i:qw.Zn(Math.floor(n),0,t.width-i);let r=s.height();if(r=0===r?t.height-e:qw.Zn(Math.floor(r),0,t.height-e),(0!==i||0!==e||n!==t.width||r!==t.height)&&n>0&&r>0){const s=qw.lo(n,r);s.getContext("2d").drawImage(t,i,e,n,r,0,0,n,r),t=s}qw.co(t,this.vjt,this.xjt).then((t=>{this.Gjt&&URL.revokeObjectURL(this.Gjt),this.Gjt=URL.createObjectURL(t),this.Ijt=null,this.Njt(t)})),this.vjt="",this.xjt=1}MBt(){return this.Gjt}wBt(t){t?this.Ejt++:this.Ejt--}SBt(){return this.Ejt>0}TBt(t){const s=this.lb();if(2===t)this.Ojt=qw.Qn(qw.OM.UT,this.lb()),this.Ojt.XE("Arial"),this.Ojt.$E(16),this.Ojt.dD("center"),this.Ojt.mD("center"),this.Ojt.bD(300,200);else if(0===t){const t=this.kc.bBt();t&&t.MZ(s).catch((t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t)))}else 4===t&&(this.vBt("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSIxNzAwLjc5MDA0cHgiIGhlaWdodD0iMTcwMC43OTAwNHB4IiB2aWV3Qm94PSIyODcgMzE3IDExMjUgMTEyNSINCgkgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTcwMC43OTAwNCAxNzAwLjc5MDA0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJsb2dvIj4NCgk8Zz4NCgkJPGc+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0ZGRkZGRiIgZD0iTTM1NC45Nzc1NCwxMTk1LjYyMzA1DQoJCQkJYzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NjI5LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOGwtNC45MzI2Miw4LjU0MTk5DQoJCQkJYy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNjU2LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMzMiwwLDUuOTYxOTEtMC40NDMzNiw4LjcyNjU2LTEuMjY4NTVjNi4yOTQ5Mi0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTczOCw2LjUwMDk4bDQuOTMxNjQsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM4NDgsNS43MzQzOGMtOS4wMDM5MSw1LjYwMTU2LTE5LjYzMTg0LDguODM3ODktMzEuMDE2Niw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzI5Ni4xNTgyLDEyMjEuOTU3MDMsMzIyLjQ5MjE5LDExOTUuNjIzMDUsMzU0Ljk3NzU0LDExOTUuNjIzMDUNCgkJCQlMMzU0Ljk3NzU0LDExOTUuNjIzMDV6IE03MDMuMjE0ODQsMTI1OS4xNzU3OGMtMTQuNTU5NTctOS44MTczOC0yMC4yMDMxMy0yMC4wMzIyMy0yMC4yMDMxMy0zMy4wODAwOA0KCQkJCWMwLTE4LjQ4OTI2LDE1LjcxNDg0LTI5Ljc2MzY3LDM4LjI2NjYtMjkuNzYzNjdjOS42NTcyMywwLDE4LjcyMTY4LDIuNTQyOTcsMjYuNTU5NTcsNi45OTQxNA0KCQkJCWMyLjA0OTgsMS4xNjQwNiwyLjc2MTcyLDMuNzgzMiwxLjU4MzAxLDUuODI0MjJsLTMuNDE3OTcsNS45MTk5MmMtMy4yNDcwNyw1LjYyNDAyLTkuOTA4Miw4LjMzMTA1LTE2LjE1MzMyLDYuNTQ4ODMNCgkJCQljLTIuNzIzNjMtMC43NzYzNy01LjU5ODYzLTEuMTkyMzgtOC41NzEyOS0xLjE5MjM4Yy0xMC40OTAyMywwLTExLjU5ODYzLDkuNTc2MTctNC44NTc0MiwxNC4xMjMwNWwyMy42ODY1MiwxNS45NzY1Ng0KCQkJCWM5Ljk5MDIzLDYuNzM4MjgsMTUuODk1NTEsMTcuMDY2NDEsMTUuODk1NTEsMjguNzE4NzVjMCwxOC43ODYxMy0xNS4wMDY4NCwzMy4zMDc2Mi0zOC4yNjc1OCwzMy4zMDc2Mg0KCQkJCWMtOS41MjI0NiwwLTE4LjU4Nzg5LTEuOTU3MDMtMjYuODE1NDMtNS40OTAyM2MtNy43ODEyNS0zLjMzOTg0LTEwLjkzMzU5LTEyLjc4MjIzLTYuNjk3MjctMjAuMTE4MTZsMy40ODczLTYuMDQxOTkNCgkJCQljMS4yMTM4Ny0yLjA5OTYxLDMuOTMxNjQtMi43NTk3Nyw1Ljk3NDYxLTEuNDU2MDVjNi44NTkzOCw0LjM4MjgxLDE2LjQ5MDIzLDcuNTk0NzMsMjQuNzU4NzksNy41OTQ3Mw0KCQkJCWMxMC41NDU5LDAsMTEuMzI4MTMtOS45NTg5OCwzLjc2NzU4LTE1LjA1NzYyTDcwMy4yMTQ4NCwxMjU5LjE3NTc4TDcwMy4yMTQ4NCwxMjU5LjE3NTc4eiBNOTg0LjYzMDg2LDEyMDIuMDAwOTgNCgkJCQljMC0yLjM0NzY2LDEuOTAzMzItNC4yNTE5NSw0LjI1MTk1LTQuMjUxOTVoOS45MjE4OGM3LjgyNzE1LDAsMTQuMTcyODUsNi4zNDU3LDE0LjE3Mjg1LDE0LjE3MzgzdjU3LjQwMTM3DQoJCQkJYzAsOC42MTAzNSw2Ljk4MDQ3LDE1LjU5MDgyLDE1LjU5MDgyLDE1LjU5MDgyczE1LjU5MDgyLTYuOTgwNDcsMTUuNTkwODItMTUuNTkwODJ2LTU3LjQwMTM3DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoOS45MjA5YzIuMzQ4NjMsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2NjcuMzIzMjQNCgkJCQljMCwyNC4yNjU2My0xOS42NzA5LDQzLjkzNzUtNDMuOTM2NTIsNDMuOTM3NXMtNDMuOTM3NS0xOS42NzE4OC00My45Mzc1LTQzLjkzNzVWMTIwMi4wMDA5OEw5ODQuNjMwODYsMTIwMi4wMDA5OHoNCgkJCQkgTTQ2Ni44NjkxNCwxMTk1LjYyMzA1YzMyLjQ4NDM4LDAsNTguODE4MzYsMjYuMzMzOTgsNTguODE4MzYsNTguODE5MzRjMCwzMi40ODQzOC0yNi4zMzM5OCw1OC44MTkzNC01OC44MTgzNiw1OC44MTkzNA0KCQkJCWMtMzIuNDg2MzMsMC01OC44MTkzNC0yNi4zMzQ5Ni01OC44MTkzNC01OC44MTkzNEM0MDguMDQ5OCwxMjIxLjk1NzAzLDQzNC4zODI4MSwxMTk1LjYyMzA1LDQ2Ni44NjkxNCwxMTk1LjYyMzA1DQoJCQkJTDQ2Ni44NjkxNCwxMTk1LjYyMzA1eiBNNDY2Ljg2OTE0LDEyMjUuMDMzMmMtMTYuMjQzMTYsMC0yOS40MTAxNiwxMy4xNjY5OS0yOS40MTAxNiwyOS40MDkxOA0KCQkJCXMxMy4xNjY5OSwyOS40MDgyLDI5LjQxMDE2LDI5LjQwODJjMTYuMjQxMjEsMCwyOS40MDgyLTEzLjE2NjAyLDI5LjQwODItMjkuNDA4MlM0ODMuMTEwMzUsMTIyNS4wMzMyLDQ2Ni44NjkxNCwxMjI1LjAzMzINCgkJCQlMNDY2Ljg2OTE0LDEyMjUuMDMzMnogTTU1Ni43MzI0MiwxMzExLjEzNDc3Yy0yLjM0NzY2LDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtOTQuOTYxOTENCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzM4My0xNC4xNzM4M2gzLjk1ODk4YzQuNjI1LDAsOC45NTg5OCwyLjI1Njg0LDExLjYxMTMzLDYuMDQ1OWw0MS4xMjIwNyw1OC43NDcwN3YtNTAuNjE5MTQNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2g5LjkyMTg4YzIuMzQ3NjYsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2OTQuOTYwOTQNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3MzgzLDE0LjE3Mjg1aC0zLjk1ODk4Yy00LjYyNSwwLTguOTU4OTgtMi4yNTU4Ni0xMS42MTEzMy02LjA0NDkybC00MS4xMjIwNy01OC43NDYwOXY1MC42MTgxNg0KCQkJCWMwLDcuODI5MS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVINTU2LjczMjQyTDU1Ni43MzI0MiwxMzExLjEzNDc3eiBNMTIxNS4wMjA1MSwxMjExLjkyMjg1DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoNTAuMzE1NDNjMi4zNDg2MywwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyDQoJCQkJYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVoLTYuMDI0NDF2NzUuMTE4MTZjMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMTg4DQoJCQkJYy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtODUuMDQxMDJoLTE1Ljk0NDM0Yy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMzMyLTQuMjUxOTUtNC4yNTE5NVYxMjExLjkyMjg1DQoJCQkJTDEyMTUuMDIwNTEsMTIxMS45MjI4NXogTTc3Ni40NDkyMiwxMjExLjkyMjg1YzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTczODMtMTQuMTczODNoNTAuMzE0NDUNCgkJCQljMi4zNDk2MSwwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcxODgsMTQuMTcyODVoLTYuMDI1Mzl2NzUuMTE4MTYNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMDljLTIuMzQ5NjEsMC00LjI1MTk1LTEuOTAyMzQtNC4yNTE5NS00LjI1di04NS4wNDEwMmgtMTUuOTQ1MzENCgkJCQljLTIuMzQ3NjYsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMTEuOTIyODVMNzc2LjQ0OTIyLDEyMTEuOTIyODV6IE05MjkuNjA0NDksMTI3Mi4wMjI0NmwyNi45NTgwMSwzMi4xMjc5Mw0KCQkJCWMyLjMxNDQ1LDIuNzU3ODEsMC4zNDM3NSw2Ljk4NDM4LTMuMjU2ODQsNi45ODQzOGgtMTkuNzA1MDhjLTQuMTg5NDUsMC04LjE2NTA0LTEuODUxNTYtMTAuODU3NDItNS4wNjA1NWwtMjIuNjgxNjQtMjcuMDMxMjUNCgkJCQl2MjcuODQxOGMwLDIuMzQ3NjYtMS45MDMzMiw0LjI1LTQuMjUxOTUsNC4yNWgtOS45MjA5Yy03LjgyNzE1LDAtMTQuMTcyODUtNi4zNDM3NS0xNC4xNzI4NS0xNC4xNzI4NXYtODUuMDM5MDYNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2gyOS43NjM2N2MyMi43MDAyLDAsNDEuMTAyNTQsMTcuMTMzNzksNDEuMTAyNTQsMzguMjY4NTUNCgkJCQlDOTU2Ljc1NDg4LDEyNTIuNTkwODIsOTQ1LjQzNjUyLDEyNjYuNzAyMTUsOTI5LjYwNDQ5LDEyNzIuMDIyNDZMOTI5LjYwNDQ5LDEyNzIuMDIyNDZ6IE05MDAuMDYxNTIsMTIyMS44NDM3NXYzMi41OTg2M2g4LjUwMzkxDQoJCQkJYzEwLjk1ODk4LDAsMTkuODQyNzctNy4yOTc4NSwxOS44NDI3Ny0xNi4yOTg4M2MwLTkuMDAxOTUtOC44ODM3OS0xNi4yOTk4LTE5Ljg0Mjc3LTE2LjI5OThIOTAwLjA2MTUyTDkwMC4wNjE1MiwxMjIxLjg0Mzc1eg0KCQkJCSBNMTE1OC4zNTkzOCwxMTk1LjYyMzA1YzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NzI3LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOA0KCQkJCWwtNC45MzI2Miw4LjU0MTk5Yy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNTU5LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMyMjMsMCw1Ljk2MDk0LTAuNDQzMzYsOC43MjU1OS0xLjI2ODU1YzYuMjk1OS0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTgzNiw2LjUwMDk4bDQuOTMwNjYsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM3NSw1LjczNDM4Yy05LjAwNDg4LDUuNjAxNTYtMTkuNjMyODEsOC44Mzc4OS0zMS4wMTc1OCw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzEwOTkuNTQwMDQsMTIyMS45NTcwMywxMTI1Ljg3NDAyLDExOTUuNjIzMDUsMTE1OC4zNTkzOCwxMTk1LjYyMzA1eiIvPg0KCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMwMEZGREEiIGQ9Ik0xMzE4LjE5NzI3LDEyMDYuMDMyMjMNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2MyMC42NTYyNSwwLDQxLjMxMjUsMCw2MS45Njg3NSwwYzMuNDI5NjksMCw1LjQ1MDIsMy44ODA4NiwzLjQ4MzQsNi42OTA0Mw0KCQkJCWwtMTkuMjk2ODgsMjcuNTY3MzhjMTUuNTQyOTcsOC4zNzU5OCwyNi4xMDY0NSwyNC44MDA3OCwyNi4xMDY0NSw0My42OTUzMWMwLDI3LjM5NzQ2LTIyLjIwODk4LDQ5LjYwNjQ1LTQ5LjYwNjQ1LDQ5LjYwNjQ1DQoJCQkJYy0xNi42ODg0OCwwLTMxLjQ1MTE3LTguMjQwMjMtNDAuNDQzMzYtMjAuODc1OThjLTEuNDUwMi0yLjAzOTA2LTAuODMxMDUtNC44OTk0MSwxLjMzNTk0LTYuMTUyMzRsMTAuOTc3NTQtNi4zMzc4OQ0KCQkJCWM0Ljg4MTg0LTIuODE4MzYsMTAuOTc5NDktMi40NzU1OSwxNS41MTQ2NSwwLjg3MzA1YzMuNTI4MzIsMi42MDU0Nyw3Ljg5MTYsNC4xNDY0OCwxMi42MTUyMyw0LjE0NjQ4DQoJCQkJYzExLjc0MjE5LDAsMjEuMjU5NzctOS41MTg1NSwyMS4yNTk3Ny0yMS4yNTk3N3MtOS41MTc1OC0yMS4yNTk3Ny0yMS4yNTk3Ny0yMS4yNTk3N2gtMTUuMjE3NzcNCgkJCQljLTMuNDI5NjksMC01LjQ1MDItMy44ODA4Ni0zLjQ4NDM4LTYuNjkwNDNsMTguMTM1NzQtMjUuOTA4MmgtMzIuMDA5NzdjLTIuMzQ4NjMsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMDYuMDMyMjN6DQoJCQkJIi8+DQoJCTwvZz4NCgkJPGc+DQoJCQk8Zz4NCgkJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0RBRThGNyIgZD0iTTg1MC4zOTU1MSw4NTcuNTkxOA0KCQkJCQljLTUwLjM1NjQ1LDAtOTQuMzI1Mi0yNy4zNTY0NS0xMTcuODUyNTQtNjguMDIwNTFsLTgwLjAzMDI3LDQ2LjIwNDFjLTQuNjU1MjcsMi42ODk0NS02LjEzMTg0LDguNzE4NzUtMy4yNDkwMiwxMy4yNTU4Ng0KCQkJCQljNDIuMjM3Myw2Ni40ODYzMywxMTYuNTMzMiwxMTAuNjA3NDIsMjAxLjEzMTg0LDExMC42MDc0MmM4OC4xMjU5OCwwLDE2NS4wNzEyOS00Ny44NzUsMjA2LjI0MzE2LTExOS4wMzYxM2wtODAuNDg3My00Ni40Njk3Mw0KCQkJCQljLTQuMzEzNDgtMi40OTAyMy05LjgwMTc2LTEuMjA1MDgtMTIuNTcwMzEsMi45MzU1NUM5MzkuMTc1NzgsODMzLjU2MjUsODk3LjU5MTgsODU3LjU5MTgsODUwLjM5NTUxLDg1Ny41OTE4DQoJCQkJCUw4NTAuMzk1NTEsODU3LjU5MTh6IE0xMTM2LjcyMTY4LDU1Ni4yMTc3N2M0LjYxNDI2LTIuNjYzMDksNi4xMTAzNS04LjYxOTE0LDMuMzEyNS0xMy4xNTEzNw0KCQkJCQljLTU5LjkxNTA0LTk3LjAzMDI3LTE2Ny4yMjQ2MS0xNjEuNjk0MzQtMjg5LjYzODY3LTE2MS42OTQzNGMtMTI1Ljg5MzU1LDAtMjM1LjgxMzQ4LDY4LjM5MjU4LTI5NC42MzM3OSwxNzAuMDQ5OA0KCQkJCQlsODAuMzc2OTUsNDYuNDA2MjVjNC4zOTc0NiwyLjUzOTA2LDEwLjAwMTk1LDEuMTQ5NDEsMTIuNzEwOTQtMy4xNDU1MQ0KCQkJCQljNDIuMTY0MDYtNjYuODUxNTYsMTE2LjY2ODk1LTExMS4yNjM2NywyMDEuNTQ1OS0xMTEuMjYzNjdjODguMTI1OTgsMCwxNjUuMDcxMjksNDcuODc1OTgsMjA2LjI0MzE2LDExOS4wMzYxMw0KCQkJCQlMMTEzNi43MjE2OCw1NTYuMjE3Nzd6Ii8+DQoJCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNBNUJBQzgiIGQ9Ik04NTAuMzk1NTEsOTU5LjYzODY3DQoJCQkJCWMtODQuNTk4NjMsMC0xNTguODk0NTMtNDQuMTIxMDktMjAxLjEzMTg0LTExMC42MDc0MmMtMi44NzY5NS00LjUzMDI3LTEuMzk5NDEtMTAuNTcwMzEsMy4yNDkwMi0xMy4yNTU4Nmw4MC4wMzAyNy00Ni4yMDQxDQoJCQkJCWMtMTEuNTgxMDUtMjAuMDE2Ni0xOC4yMDk5Ni00My4yNTQ4OC0xOC4yMDk5Ni02OC4wNDE5OWMwLTc0Ljc4NTE2LDYwLjU1NzYyLTEzNi4wNjI1LDEzNi4wNjI1LTEzNi4wNjI1DQoJCQkJCWM0Ny4xOTYyOSwwLDg4Ljc4MDI3LDI0LjAyOTMsMTEzLjE4NTU1LDYwLjUyMjQ2YzIuNzY0NjUsNC4xMzM3OSw4LjI2MzY3LDUuNDIxODgsMTIuNTcwMzEsMi45MzU1NWw4MC40ODczLTQ2LjQ2OTczDQoJCQkJCWMtNDEuMTcxODgtNzEuMTYwMTYtMTE4LjExNzE5LTExOS4wMzYxMy0yMDYuMjQzMTYtMTE5LjAzNjEzYy04NC44NzY5NSwwLTE1OS4zODE4NCw0NC40MTIxMS0yMDEuNTQ1OSwxMTEuMjYzNjcNCgkJCQkJYy0yLjcwNjA1LDQuMjkxMDItOC4zMTgzNiw1LjY4MTY0LTEyLjcxMDk0LDMuMTQ1NTFsLTgwLjM3Njk1LTQ2LjQwNjI1DQoJCQkJCWMtMjguOTUyMTUsNTAuMDQwMDQtNDUuNTIzNDQsMTA4LjEzOTY1LTQ1LjUyMzQ0LDE3MC4xMDc0MmMwLDE4Ni45NjM4NywxNTEuMzk0NTMsMzQwLjE1NzIzLDM0MC4xNTcyMywzNDAuMTU3MjMNCgkJCQkJYzEyMi40MTQwNiwwLDIyOS43MjM2My02NC42NjQwNiwyODkuNjM4NjctMTYxLjY5NTMxYzIuNzk0OTItNC41MjYzNywxLjI5NDkyLTEwLjQ5MDIzLTMuMzEyNS0xMy4xNTEzN2wtODAuMDgzMDEtNDYuMjM3Mw0KCQkJCQlDMTAxNS40NjY4LDkxMS43NjM2Nyw5MzguNTIxNDgsOTU5LjYzODY3LDg1MC4zOTU1MSw5NTkuNjM4Njd6Ii8+DQoJCQk8L2c+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzAwRkZEQSIgZD0iTTExMzcuMTg1NTUsNzU4LjExMzI4di03My4xNjc5N2wtNjMuMzY1MjMsMzYuNTgzOTgNCgkJCQlMMTEzNy4xODU1NSw3NTguMTEzMjhMMTEzNy4xODU1NSw3NTguMTEzMjh6IE0xMDI2LjU3NjE3LDcwNS4xNjQwNmwxMjAuMDU4NTktNjkuMzE2NDENCgkJCQljMTIuNTY4MzYtNy4yNTU4NiwyOC4zNDQ3MywxLjg1MjU0LDI4LjM0NTcsMTYuMzY2MjF2MTM4LjYzMDg2Yy0wLjAwMDk4LDE0LjUxMjctMTUuNzc3MzQsMjMuNjIyMDctMjguMzQ1NywxNi4zNjYyMQ0KCQkJCWwtMTIwLjA1ODU5LTY5LjMxNjQxQzEwMTQuMDI4MzIsNzMwLjY0OTQxLDEwMTQuMDI4MzIsNzEyLjQwOTE4LDEwMjYuNTc2MTcsNzA1LjE2NDA2eiIvPg0KCQk8L2c+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=").then((t=>{"done"===this.Ujt?s.nC(t):this.Rjt.Pjt=t})).catch((t=>console.warn("Failed to load splash image: ",t))),this.xBt("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAmd137hFVqjO7zCKIRGZ881JRAAAFY0lEQVR42u2aPW/bVhSGn1iiPizZ8D+QgSJBNglFmiboQA0NUKAD1XotYA0BOspAkZnqx24vnTrIQNCpg4QkQMcYKDoW9j9w5y6qLNqWFDlvh3tJUa6ddHBhAuS7SKBIQffhuee851CQKVOmTJkyZcqUKXmqa8O+uyNlABKsFRmdP0o5AOle2gHoWdoBzFrpBHACwPeetJNmAFSlt6kGwGH0LqUAVqRuqgHkpEaqAVRkfvOWr+Dh9Rc4j6VvwnrhPNAbgK2ezj+yx7Z6GjUuASi4Ch4lHQAGwBeRK1rROQAdUx5K0hE4NUkaAdS02ZEuoms2wkCSgvYSgFJfkn6CobkSPG0mEcAOrHnGFOxAToHNjk/MygLgO/PxL0BN9yRdQKlufMQAoCdJGi8BOJYknXTJ269cu9HtdqNb4Ni6oimUbFb0dAZQ1DmULJ+TFtT0qQHwg73mLlCMfFUMQPR5VWrbmttNHICC1KDiSZ+w3pMOwFPDhP4IYFtv4ZX0nIorbUBNmjWAiqdZg5fmNFd6jvPhJQDjAV9LI0r28IpmycsBZalNWfoRWJcuoKY9c7cCkwpOwdcIqNT1BmrSgQkNbQAvpAGOF+aHOIBpCxhKR/TVBNjVOHkAOgrg2N6aoU7sklmVidtD7bNm/fIrjaBmk+Sxea142iBnTyguAfjZZscNXLOdXFM8EgVgXRpDz/6yonTEts6AXdV1APTVoKigFSXEmj3XN0kSV01WFQwAHC8O4Mhagye8NgHS137SALzsS3dxwhtXkQ4oaw64eqomOFKXbc2xJbFLTX8DOHYnsKsJu2Gdu8IIuTqjrMB8eyM5ACIFXQo2S5t7lNMM6AdFTaCgADqahHW8EQIohBk9rzEdE+JXAtjVmHWpDTmplUAA96Ea/bJDnVKSWjgaFTSHqubgmjVDXQchgFy4wBXNcXV6LYC8RjbEypomcCAyBopRShxqAn21yenM8WawqjOoKVbmLYBFndeImsnyVwJY1RR8NW1FTRiA6UNTCsP6fKwLONQBZTXx1WVbT0KbtwygvAxg81oAZU0xe2QYxkmyrDDx2DzWBXTUZFs7dNQwHUEMwN4VAKb47wOQ1wj8Gx0+/Y8A8powVJtt7XOoxn8A8N4IqCrA8cJUmzgAl3JAUWN8tSjqDX0NwI/XbwugGLe178oBK7bBaBesm0gggOUqwLrOHe8c1jV2NAMOw/XFAFRth2dr/burANS1cSc0C8kDsB7zAZvgKCjoLTiaFqwpmvwLQC7e2b3PB4CrZj48KXkAKktOEPr6VqeAr680udzEWACluK0LreJ1ThBe6+w4HkfJAhD1AtbAu3qgPcDVX2oCK9bqxwFQ1+fRsVW7va/uBZpAWaND652TCGBoM1rHHN6VmQlsq6cdE+4mC75oLAC49prKB1zTDd6NukHIKahbIkkEsGrmAQWZbZqXNLClrg04dTP4KnjnCwBfmgkZT7WD45k94C8BmA3MPGBgeqcbfQBxwwDsRMi3N7Iqc3dzsuVhV5ofkevpJOoGKUn6Ax5L92F49USoayZCls08uQDiM0ETCWPb8k7DMmH02SICGC7ayVhnsABwEpsZQkfxUpI4ALGpsFn4xCbHcVjnwgnvAkBh0U6CbzqrXgzA1E6FB9YOJGcacgUAfl36t0Ro/SIDUDEL/D1WBcJr5q0oRoJ2LQZgZJ4LPIu2RCPJAJafDLm2Yr2OHmQ4H0vzBksA2PKl38L3fY0aLAFYejK0ZpJhelVKzkj8dlRNzkj8dpRP0DTkVjTUXroB9PVnqtefS9I05BZU8NOdAyUl5q8RtwUg6KYcwP1Up8CanpMpU6ZMmTLdgP4BRYsi23xEdOAAAAAASUVORK5CYII=").then((t=>{"done"===this.Ujt?s.nC(t):this.Rjt.kjt=t})).catch((t=>console.warn("Failed to load splash image: ",t))),this.xBt("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAdxHdu4hmVZnuRMwzqiLYE4y2AAAFw0lEQVR42u2Yy+9LQRTHp6Xq0VIkXkFvwkYslAWJiGJj2a6sJJe/oF3YWGElEQmxkYi4ErFWNpatWFmIx9Lm1sJCLKgqraqv82h726l6hOuRzDf53TtnOr+ZOZ+ZOffca5ycnJycnJycnJycnJycnJz+pi7g2G9osxjvzX8qB8ABcAAcgH8XwDa85dspNOiaRDuAR4U0PnHtDuyy7IJRJS6gvVmL6TywVkp4ZxIhulUxFvlaXQTrgEHbnMDH5XRjlXCdb+uAnc2ojWgFFTYBZ8e9tzcaswAk6v/3K4sPfPNRFj87IXj+KXQUS9m2jXoH1lMuLq2DtEcAtNMBT9PjanFq7ySAhbABVEAaeDaAwkk2D7GRqctAMQJIq2sBauLnB/VxCfqKpWrbRhSC1W5SMQ9RTgBUwKpF1ccmAIQ2gCxE+20Au9nSESvDgeIDkJSBMpA9vgyXdsj0H0GORL3n2fbwPOKoSQS4Q2cBOGzSJbQYAHDbZEI+rEuBcyZRlF71fIP/x0wBuIBOw6xH3xu2GQFAP2cegmvSwHkeqBZjECzB46UXD3bg8UKJCT6QYzgDY9uiU7hC11doERq6MAZ2CPJ7ipEulOrteDcB4KOZBpBG7zrV1JGzATzmIdnrl/go3bRiBJBHlZc+6ItjuQQ+yFLz8Gka2LZFRVTFGdoQJQ0LPodHnXkS8AjlRWkBLwKQswAs0PDzGpcsAAMNuG+5WgdqxwjgEcp8qcBjN5oZdPhEvOfhU/hsbJuVloWV6WWgp2IBLxXQNEwLDfKqoMXrEQBjATiFA3qePlgAZJRl+EStdaAQjfgALOC1zfeX8ALV+7S69JdALWjxHGqztmxyMnTD6OOBWvAdGDkn60c6vrI5H4CPnOJsWQDe8G0hIU0MB8ojFx+AFAeqeitLy5FkL3w0yNNcSOx3oDxjjxaH9XxldZluY5NBfwrAQvQbRjQXAO8UqVq5dh6A7HCgWzgdFwBdgOX4lMZbTndkWWkDN07Bk+zItllLdHm1+FkLwBSADNDf8B0AnGOp5gFYgJEexwcgGQx4iyeD9ybFkWsbDZbv0+2Y8XvGtqMpWsUimpMAzA1AUrj5ALjm2wCoONKB+ACYsEeDlU04MMs4imeJQqljslSuD4xl/zgAsx6ku/8DgDwaO9AwFU56qhzOPiXpKCzCpSSdb8v+CQDmXshb99cARAPFCOA1chWaFXlP55yn2FqEgiFvOSzYtmiJzisKB7MxQPS8iO63YsD3AHDv8QPgjR92eKuf9vts1wdZjvZhN4XajD35FNDiR7ln0LYBaILY+OZT4DsA+BkTP4AUrgXkxSJcDFps+72X7EGlx6mBbU/lAbdQjvKA7hSAlSuHxdw0gORsHrAUnXkAUuj+AQAZdHGRp9bShX2ECz1JRSk4zNhRJqj5SZQJfpgCUNS2eRsAP/usTDAxPxFKA834AZgAOM1z6qGgxxpdmUDQNjP25LtAsojxu0AehSkAF6RLXWR/EkAdVYEevQtswVtpMwuAB1JGh2jbxQcgBKrig/qSxTD6o2Nm7fttSY6uUnErV+jb4CJyaArAI5luJkCDOy5HAPISSB5A3wYbhJERahvtPALAAw2EI9Vzsh2TTuk23qEceN9d4vVVv227hNroe0CRi/o9IKTZTQFIAc/M8jwGEiouG2/042u8u25uAuPvAavRH7XhzqcBpICdRpssRa+aNLFoh2JeyBzU08fih/ht20WZXghW34s+/ZQnAKhzojsSH4CC/sjARPKamLXacOfTAIwfNSkCbROLluG9Tm2gdl3PY178tu2SBIpFQ6fHH//2GAvAogCkjtGDEAFQYPsu6DdBqw11bgFIF8dNHsQGIEFRSDOe0RS9YYJk23JMrw+/Cr9bFX0VXmNsACbhA088qXhBrMYAlq8Gjhh//FX4YNSGO7cASO9n9B99AuHk5OTk5OTk5OTk5OTk5OTk5OT0VX0B7+fX+9cwWYYAAAAASUVORK5CYII=").then((t=>{"done"===this.Ujt?s.nC(t):this.Rjt.Fjt=t})).catch((t=>console.warn("Failed to load splash image: ",t))))}async vBt(t){t=new URL(t,this.kc.CBt()).toString();const s=await qw.eo(t),i=await this.kc.GBt(s,2048,2048);return await this.lb().BL(i,{Yv:"high"})}async xBt(t){t=new URL(t,this.kc.CBt()).toString();const s=await qw.eo(t);return await this.lb().BL(s,{Yv:"high"})}IBt(){this.kc.zc("runtime","hide-cordova-splash")}NBt(){this.Djt=Date.now(),this.kc.gf().addEventListener("loadingprogress",this.Ljt),this._jt=requestAnimationFrame((()=>this.EBt())),3!==this.kc.DBt()&&this.IBt()}async _Bt(){const t=this.lb();this.Ajt=1;const s=this.kc.DBt();4===s&&await this.Qjt,this.Wjt=null,this.Qjt=null,-1!==this._jt&&(cancelAnimationFrame(this._jt),this._jt=-1),this.kc.gf().removeEventListener("loadingprogress",this.Ljt),this.Ljt=null,this.Ojt&&(this.Ojt.Jn(),this.Ojt=null),this.kc.ABt(),t._L(),this.Rjt.Pjt&&(t.nC(this.Rjt.Pjt),this.Rjt.Pjt=null),this.Rjt.kjt&&(t.nC(this.Rjt.kjt),this.Rjt.kjt=null),this.Rjt.Fjt&&(t.nC(this.Rjt.Fjt),this.Rjt.Fjt=null),t.DL(0,0,0,0),t.NT(),this.Ujt="done",this.yjt=t.DT(),3===s&&this.IBt()}EBt(){if(-1===this._jt)return;const t=this.lb();t._L(),this._jt=-1;const s=this.kc.nk().HK(),i=this.kc.DBt();if(3!==i&&(this.eBt(t),t.DL(0,0,0,0),t.iL(),t.aS(),t.nL(null)),0===i)this.LBt(s);else if(1===i)this.OBt(s,120,0);else if(2===i)this.RBt(s);else if(3===i)qw.mh();else{if(4!==i)throw new Error("invalid loader style");this.PBt(s)}t.NT(),this._jt=requestAnimationFrame((()=>this.EBt()))}RBt(t){t?this.Ojt.fD(1,0,0):this.Ojt.fD(.6,.6,.6),this.Ojt.Bc(Math.round(100*this.Ajt)+"%");const s=this.VFt/2,i=this.YFt/2;sS.Pu(s-150,i-100,s+150,i+100);const e=this.lb();e.nL(this.Ojt.lC()),e.$S(sS,this.Ojt.$D())}OBt(t,s,i){const e=this.lb();e.pS(),t?e.tL(1,0,0,1):e.tL(.118,.565,1,1);const n=this.VFt/2,r=this.YFt/2,h=s/2;iS.Wa(n-h,r-4+i,Math.floor(s*this.Ajt),8),e.Rect(iS),iS.Wa(n-h,r-4+i,s,8),iS.offset(-.5,-.5),iS.lu(.5,.5),e.tL(0,0,0,1),e.nT(iS),iS.lu(1,1),e.tL(1,1,1,1),e.nT(iS)}LBt(t){const s=this.lb(),i=this.kc.bBt();if(!i)return void this.OBt(t,120,0);const e=i.lC();if(!e)return void this.OBt(t,120,0);const n=e.Vy(),r=e.ig(),h=this.VFt/2,o=this.YFt/2,a=n/2,u=r/2;sS.Pu(h-a,o-u,h+a,o+u),s.nL(e),s.Iu(sS),this.OBt(t,n,u+16)}PBt(t){const s=this.lb(),i=this.Rjt.Pjt,e=this.Rjt.kjt,n=this.Rjt.Fjt,r=Date.now();0===this.jjt&&(this.Djt=r);const h=this.kc.kBt()||this.kc.FBt()&&!this.kc.jBt(),o=h?0:200,a=h?0:3e3;let u=1;"fade-in"===this.Ujt?u=Math.min((r-this.Djt)/300,1):"fade-out"===this.Ujt&&(u=Math.max(1-(r-this.Bjt)/300,0)),s.pS(),s.tL(.231*u,.251*u,.271*u,u),iS.set(0,0,this.VFt,this.YFt),s.Rect(iS);const l=Math.ceil(this.VFt),c=Math.ceil(this.YFt);let f,d;this.YFt>256?(s.tL(.302*u,.334*u,.365*u,u),f=l,d=Math.max(.005*c,2),iS.Wa(0,.8*c-d/2,f,d),s.Rect(iS),t?s.tL(u,0,0,u):s.tL(.161*u,.953*u,.816*u,u),f=l*this.Ajt,iS.Wa(.5*l-f/2,.8*c-d/2,f,d),s.Rect(iS),s.tL(u,u,u,u),s.aS(),e&&(f=1.5*qw.Zn(.22*c,105,.6*l),d=f/8,iS.Wa(.5*l-f/2,.2*c-d/2,f,d),s.nL(e),s.Rect(iS)),i&&(f=Math.min(.395*c,.95*l),d=f,iS.Wa(.5*l-f/2,.485*c-d/2,f,d),s.nL(i),s.Rect(iS)),n&&(f=1.5*qw.Zn(.22*c,105,.6*l),d=f/8,iS.Wa(.5*l-f/2,.868*c-d/2,f,d),s.nL(n),s.Rect(iS))):(s.tL(.302*u,.334*u,.365*u,u),f=l,d=Math.max(.005*c,2),iS.Wa(0,.85*c-d/2,f,d),s.Rect(iS),t?s.tL(u,0,0,u):s.tL(.161*u,.953*u,.816*u,u),f=l*this.Ajt,iS.Wa(.5*l-f/2,.85*c-d/2,f,d),s.Rect(iS),s.tL(u,u,u,u),s.aS(),i&&(f=.55*c,d=f,iS.Wa(.5*l-f/2,.45*c-d/2,f,d),s.nL(i),s.Rect(iS))),this.jjt++,"fade-in"===this.Ujt&&r-this.Djt>=300&&this.jjt>=2&&(this.Ujt="wait",this.zjt=r),"wait"===this.Ujt&&r-this.zjt>=a&&this.Ajt>=1&&(this.Ujt="fade-out",this.Bjt=r),("fade-out"===this.Ujt&&r-this.Bjt>=300+o||h&&this.Ajt>=1&&r-this.Djt<500)&&this.Wjt()}}}{const eS=self.Gs,nS=self.AQ,rS=(self.assert,self.nq),hS={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""};let oS=!0;eS.zBt=class extends eS.Un{constructor(t){t=Object.assign({},hS,t),super(),this.BBt=t.messagePort,this.UBt=t.runtimeBaseUrl,this.WBt=t.previewUrl,this.QBt=!!t.headless,this.JBt=!!t.hasDom,this.VBt=!!t.isInWorker,oS=t.ife,this.YBt=!!t.useAudio,this.HBt=t.exportType,this.qBt=t.isNWjs,this.YZ=!!t.isiOSCordova,this.ZBt=!!t.isiOSWebView,this.KBt=!!t.isWindowsWebView2,this.XBt=!!t.isAnyWebView2Wrapper,this.$Bt=!!t.isFBInstantAvailable,this.tUt=!("preview"!==this.HBt||!t.isDebug),this.sUt=this.tUt,this.iUt=this.tUt,this.eUt=0,this.nUt=[],this.rUt=[],this.hUt=!1,this.oUt="",this.aUt="",this.uUt="",this.lUt="",this.cUt=0,this.fUt=0,this.dUt=0,this.wR=self.devicePixelRatio,this.pUt=0,this.mUt=0,this.yUt=0,this.gUt=0,this.MUt=0,this.wUt=!1,this.yM=!0,this.SUt=!1,this.TUt=!1,this.bUt=!1,this.vUt=null,this.fX=eS.Qn(eS.WZ,this,t),this.C4=eS.Qn(eS.Q5,this),this.cpt=eS.Qn(eS.amt,this),this.xUt=eS.Qn(eS.Qz,this,t.wrapperComponentIds),this.CUt=eS.Qn(eS.xkt,this),this.S9=eS.Qn(eS.n6,this),this.GUt=eS.Qn(eS._lt,this),this.IUt=eS.Qn(eS.Llt,this),this.Ylt=eS.Qn(eS.Blt,this),this.cM=eS.Qn(eS.$g,{iM:t=>this.NUt(t),nM:t=>this.EUt(t)}),this.DUt=new Map,this._Ut=[],this.AUt=new Map,this.LUt=new Map,this.OUt=0,this.RUt=[],this.PUt=new Set,this.kUt=[],this.FUt=[],this.jUt=new Map,this.zUt=!1,this.BUt=!1,this.UUt=0,this.WUt=0,this.QUt=new Map,this.JUt=new Set,this.VUt=new Set,this.YUt=[],this.HUt=[],this.qUt=null,this.ZUt=!1,this.KUt="vsync",this.sx="trilinear",this.XUt=!1,this.$Ut=!0,this.tWt=!1,this.sWt=!1,this.iWt=null,this.eWt={nWt:t=>{this._jt=-1,this.rWt=-1,this.N8(t)},hWt:t=>{this.rWt=-1,this.N8(t,!1,"skip-render")},oWt:()=>{this._jt=-1,this.UR()}},this._jt=-1,this.rWt=-1,this.aWt=0,this.uWt=0,this.lWt=!1,this.cWt=!1,this.fWt=!1,this.dWt=!0,this.pWt=!0,this.mWt=!1,this.yWt=0,this.gWt=new eS.Wd(1),this.MWt=()=>Math.random(),this.wWt=0,this.SWt=0,this.TWt=0,this.bWt=0,this.vWt=0,this.XAt=1,this.xWt=1/30,this.CWt=0,this.GWt=eS.Qn(eS.Xf),this.IWt=eS.Qn(eS.Xf),this.NWt=eS.Qn(eS.Xf),this.EWt=new Map,this.DWt=-1,this._Wt=0,this.AWt=0,this.LWt=-1,this.OWt=0,this.RWt=0,this.PWt=0,this.kWt=!1,this.FWt="",this.jWt=!1,this.zWt="",this.zQ=null,this.BWt="",this.UWt=null,this.WWt=null,this.t_t=eS.Qn(eS.Event.gf),this.QWt=new Map,this.JWt=new Map,this.VWt=0,this.YWt=!1,this.HWt=!1,this.qWt=!1,this.ZWt=[],this.KWt={pretick:eS.Qn(eS.Event,"pretick",!1),tick:eS.Qn(eS.Event,"tick",!1),tick2:eS.Qn(eS.Event,"tick2",!1),instancecreate:eS.Qn(eS.Event,"instancecreate",!1),instancedestroy:eS.Qn(eS.Event,"instancedestroy",!1),beforelayoutchange:eS.Qn(eS.Event,"beforelayoutchange",!1),layoutchange:eS.Qn(eS.Event,"layoutchange",!1)},this.KWt.instancecreate.BV=null,this.KWt.instancedestroy.BV=null,this.n3=eS.Qn(eS.Event.gf),this.XWt=null;const s=(t,s)=>eS.ZAt.JPt(this,t,s);this.$Wt=eS.Qn(eS.ad,s),this.tQt=eS.Qn(eS.ad,s),this.sQt=eS.Qn(eS.ad,s),this.iQt=eS.Qn(eS.eQt,this,t.jobScheduler),t.canvas&&(this.qUt=eS.Qn(eS.OFt,this)),this.BBt.onmessage=t=>this._OnMessageFromDOM(t.data),this.GQ("runtime","visibilitychange",(t=>this.nQt(t))),this.GQ("runtime","wrapper-extension-message",(t=>this.rQt(t))),this.GQ("runtime","get-remote-preview-status-info",(()=>this.hQt())),this.GQ("runtime","js-invoke-function",(t=>this.Pmt(t))),this.GQ("runtime","go-to-last-error-script",self.goToLastErrorScript),this.GQ("runtime","offline-audio-render-completed",(t=>this.oQt(t))),this.t_t.addEventListener("window-blur",(t=>this.aQt(t))),this.t_t.addEventListener("window-focus",(()=>this.uQt())),this.S9.k6(),this.IUt.k6(),this.lQt=null,this.cQt=new WeakMap,this.fQt={keyboard:null,$F:null,tj:null,sj:null},this.dQt=new WeakMap,this.pQt=[]}static DC(t){return eS.Qn(eS.zBt,t)}Jn(){eS.wh(this._Ut),this.AUt.clear(),this.LUt.clear(),this.C4.Jn(),this.C4=null,this.cpt.Jn(),this.cpt=null,this.xUt.Jn(),this.xUt=null,this.fX.Jn(),this.fX=null,this.CUt.Jn(),this.CUt=null,this.S9.Jn(),this.S9=null,this.GUt.Jn(),this.GUt=null,this.IUt.Jn(),this.IUt=null,this.Ylt.Jn(),this.Ylt=null,this.cM.Jn(),this.cM=null,this.qUt&&(this.qUt.Jn(),this.qUt=null),this.t_t.Jn(),this.t_t=null,this.mQt=null}_OnMessageFromDOM(t){const s=t.type;if("event"===s)this.yQt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.gQt(t)}}yQt(t){if(!this.qWt)return void this.ZWt.push(t);const s=t.component,i=t.handler,e=t.data,n=t.dispatchOpts,r=!(!n||!n.dispatchRuntimeEvent),h=!(!n||!n.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const t=new eS.Event(i);t.data=e,this.t_t.If(t)}if(h){const t=new eS.Event(i,!0);for(const[s,i]of Object.entries(e))t[s]=i;this.qK(t)}}const a=this.QWt.get(s);if(!a)return void(r||h||console.warn(`[Runtime] No DOM event handlers for component '${s}'`));const u=a.get(i);if(!u)return void(r||h||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`));let l=null;try{l=u(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.MQt(o,!1,""+t))}null!==o&&(l&&l.then?l.then((t=>this.MQt(o,!0,t))).catch((t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.MQt(o,!1,""+t)})):this.MQt(o,!0,l))}MQt(t,s,i){this.BBt.postMessage({type:"result",responseId:t,isOk:s,result:i})}gQt(t){const s=t.responseId,i=t.isOk,e=t.result,n=this.JWt.get(s);i?n.resolve(e):n.reject(e),this.JWt.delete(s)}GQ(t,s,i){let e=this.QWt.get(t);if(e||(e=new Map,this.QWt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}zc(t,s,i,e){this.BBt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}wj(t,s,i,e){const n=this.VWt++,r=new Promise(((t,s)=>{this.JWt.set(n,{resolve:t,reject:s})}));return this.BBt.postMessage({type:"event",component:t,handler:s,data:i,responseId:n},e),r}yq(t,s,i,e=-1){this.zc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}gq(t,s,i){const e=this.VWt++,n=new Promise(((t,s)=>{this.JWt.set(e,{resolve:t,reject:s})}));return this.yq(t,s,i,e),n}rQt(t){if(-1!==t.asyncId){const s=t.asyncId;this.JWt.get(s).resolve(t.params),this.JWt.delete(s)}else this.yQt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}QQ(t,s,i){this.GQ("wrapper-extension:"+t,s,i)}UQ(t){return this.xUt.UQ(t)}wQt(t){if(!this._Q())throw new Error("not in debug mode");this.zc("runtime","post-to-debugger",t)}async sLt(t){eS.xxt(this),this._Q()?await nS.sLt(this):self.AQ&&self.AQ.SQt(this);const s=await this.fX.io("data.json");if(await this.TQt(s),await this.bQt(t),this.kBt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.$zt()){const t=this.$zt();console.info(`[C3 runtime] Hosted in ${this.vk()?"worker":"DOM"}, rendering with WebGL ${t.yx()} [${t.hO()}]`)}else this.tBt()&&console.info(`[C3 runtime] Hosted in ${this.vk()?"worker":"DOM"}, rendering with WebGPU [${this.tBt().sBt()}]`);this.lb().RT()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.qWt=!0;for(const t of this.ZWt)this.yQt(t);eS.wh(this.ZWt),this.qUt&&this.qUt.NBt();for(const s of t.runOnStartupFunctions)this.nUt.push(this.vQt(s));if(await Promise.all([this.fX.VK(),...this.nUt]),eS.wh(this.nUt),!this.fX.HK())return this.qUt&&await this.qUt._Bt(),await this.t_t.Cf(new eS.Event("beforeruntimestart")),await this._L(),this.BBt.postMessage({type:"runtime-ready"}),this;this.qUt&&this.qUt.IBt()}async vQt(t){try{await t(this.lQt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async TQt(t){const s=t.project;this.oUt=s[0],this.aUt=s[16],this.uUt=s[31],this.lUt=s[38],this.cUt=s[36];const i=s[39]||"loading-logo.png";this.XUt=!!s[9],this.fUt=this.yUt=s[10],this.dUt=this.gUt=s[11],this.CUt.pFt(this.fUt,this.dUt),this.pUt=this.fUt/2,this.mUt=this.dUt/2,this.KUt=s[37],this.ZUt=!!s[40],this.sx=s[14],this.SUt=s[15],this.TUt=s[42],this.bUt=s[17],this.wUt=!!s[18],this.MUt=s[19],this.WUt=s[21],this.tWt=s[22];const e=this.fX;if(e.wK(s[45]),e.iX(s[7],s[25]),e.TK(s[8]),e.bK(s[32]),e.xK(s[28]),e.XK(s[29]),0===this.MUt){let t="";t="flat"===e.Vj()?e.CK()+i:i,t&&(this.vUt=e.kK({url:t}))}this.qUt&&(this.qUt.Qzt(eS.OFt.qzt(s[12])),this.qUt.Yzt(s[23]?"high":"low"),this.qUt.AT(0!==s[24]),this.qUt.Jjt(s[34]),this.qUt.Zzt(s[41]),this.qUt.Vjt(s[13]),this.qUt.Yjt(s[30]),this.qUt.Zjt(s[46],s[47]),this.qUt.qjt(s[26]),this.qUt.Kjt(s[48]),this.qUt.Xjt(s[50]));const n=s[43];n&&await this.xQt(n),this.CQt(),this.xUt.jEt(),this.YUt=self.GQt();const r=s[2];for(const t of r[1])this.xUt.zEt(t);for(const t of r[0])this.xUt.FEt(t);this.YUt=self.GQt(),this.IQt(),this.xUt.VEt();for(const t of s[3]){const s=eS.Flt.DC(this,this._Ut.length,t);this._Ut.push(s),this.AUt.set(s.Nc().toLowerCase(),s),this.LUt.set(s.W0(),s)}for(const t of s[4])this._Ut[t[0]].F_t(t);for(const t of s[27]){const s=t.map((t=>this._Ut[t]));this.RUt.push(eS.Qn(eS.jAt,this,s))}this.NQt();for(const t of this._Ut)t.z_t();for(const t of s[5])this.C4.DC(t);const h=s[1];if(h){const t=this.C4.Y5(h);t&&this.C4.J5(t)}for(const t of s[35])this.GUt.DC(t);for(const t of s[33])this.S9.DC(t);for(const t of s[44])this.IUt.DC(t);this.IUt.Plt()||(this.IUt.Jn(),this.IUt=null);for(const t of s[49])this.Ylt.DC(t);this.Ylt.Jlt()||(this.Ylt.Jn(),this.Ylt=null);for(const t of s[6])this.cpt.DC(t);this.cpt.jmt(),this.EQt(),eS.wh(this.YUt),this.JB();let o="any";const a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.zc("runtime","set-target-orientation",{targetOrientation:o})}async xQt(t){const s=t.format;"image-sequence"===s?this.iWt=new self.DQt(this,t):"image-sequence-gif"===s?this.iWt=new self._Qt(this,t):"webm"===s?this.iWt=new self.AQt(this,t):"mp4"===s&&(this.iWt=new self.LQt(this,t)),this.KUt="unlimited-frame",this.qUt.Qzt("off"),this.wR=1,self.devicePixelRatio=1,await this.wj("runtime","set-exporting-to-video",{message:this.iWt.OQt(0),duration:this.iWt.yY()})}DBt(){return this.MUt}Gzt(){return null!==this.iWt}RQt(){return this.iWt.yY()}PQt(){return this.iWt.kQt()}FQt(){return this.iWt.sLt({width:this.qUt.Pz(),height:this.qUt.Fz()})}jQt(){const t=this.aWt/this.PQt();return this.iWt.zQt(this.qUt.Uzt(),t)}BQt(){this.iWt&&this.iWt.iet()}oQt(t){this.iWt.UQt(t)}WQt(){return this.iWt.NT()}FBt(){return this.$Bt}TM(){return this.yM}vj(t){this.nUt.push(t)}q3(t){this.hUt=!!t}QQt(t){this.hUt&&this.rUt.push(t)}i5(){return this.rUt}__t(){return this.OUt++}U_t(){return this.OUt}tkt(t){this.PUt.add(t)}skt(t){this.PUt.delete(t)}Czt(){return this.PUt}async bQt(t){this.qUt&&(await this.qUt.lo(t),this.qUt.TBt(this.MUt))}async _L(){this.lWt=!0,this.wWt=Date.now();let t=null;const s=new Promise((s=>t=s));if(this.wUt){for(const t of this._Ut)t.P0()||t.K_t()||!t.Kz()||t.jIt();(async()=>{await this.fX.VK(),await s,this.yM=!1,this.JQt()})()}else this.yM=!1;this.fX.YK(),this._Q()&&nS.VQt(oS);for(const t of this.C4.HF())t.y5();this.Gzt()&&await this.FQt();const i=this.C4.V5();await i.A3(null,this.lb()),await i.W3(!0),this._Wt=performance.now(),t(),this.wUt||this.JQt(),(await this.wj("runtime","before-start-ticking")).isSuspended&&!this.Gzt()?(this.yWt++,this.mWt=!0):this.N8()}JQt(){this.vQ(eS._j.Dj.Ej.YQt,null,null),this.zc("runtime","register-sw")}USt(t){t=Math.floor(t);const s=this.YUt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}IQt(){for(const t of self.HQt){const s=eS.jh(Object.keys(t));this.HUt.push(s)}}uyt(t){t=Math.floor(t);const s=this.HUt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}qQt(){return this.JBt}ZQt(){return this.QBt}vk(){return this.VBt}CBt(){return this.UBt}KQt(){return this.WBt}jk(){return this.cpt}Xk(){return this.cpt.Xk()}$mt(){return this.cpt.$mt()}Jk(){return this.cpt.Jk()}tyt(){return this.cpt.tyt()}bxt(){return 0===this.$mt().Dpt()}iyt(){return this.cpt.iyt()}WPt(){return this.xUt}KK(){return this.xUt.KK()}f0(t){if((t=Math.floor(t))<0||t>=this._Ut.length)throw new RangeError("invalid index");return this._Ut[t]}XQt(t){return this.AUt.get(t.toLowerCase())||null}Gq(t){return this.LUt.get(t)||null}Prt(t){const s=eS.Qz.fB(t);return s?s.yB():null}R0(){return this._Ut}*$Qt(){for(const t of this._Ut)t.P0()||(yield*t.vB())}gf(){return this.t_t}Rk(){return this.n3}qK(t){t.runtime=this.Jz();const s=this._Q()&&!this.cpt.WB();s&&nS.z5(),this.n3.dispatchEvent(t),s&&nS.B5()}u5(t){return t.runtime=this.Jz(),this.n3.Cf(t)}Ck(){return this.fUt}Ik(){return this.dUt}tJt(t,s){if(this.fUt===t&&this.dUt===s)return;this.fUt=t,this.dUt=s;const i=this.JF();i.i6(),i.e6()}d1(){return this.yUt}m1(){return this.gUt}zzt(t,s){if(this.yUt===t&&this.gUt===s)return;this.yUt=t,this.gUt=s;const i=this.JF();i.i6(),i.e6()}Izt(t){this.Gzt()||(this.wR=t)}jz(){return this.wR}g2(){return this.pUt}M2(){return this.mUt}Cj(){return this.qUt}C2(){return this.qUt?this.qUt.C2():this.yUt}G2(){return this.qUt?this.qUt.G2():this.gUt}jW(){return this.qUt?this.qUt.jW():1}VH(){return this.qUt?this.qUt.VH():1}a4(){return this.qUt?this.qUt.a4():1}h4(){return this.qUt?this.qUt.h4():1}Nz(){return this.qUt?this.qUt.Nz():0}Dz(){return this.qUt?this.qUt.Dz():0}sJt(){return this.qUt?this.qUt.Az():0}iJt(){return this.qUt?this.qUt.Oz():0}QH(){return this.qUt?this.qUt.QH():"off"}F2(t){return this.qUt?this.qUt.F2(t):null}K$(t){this.qUt&&this.qUt.K$(t)}R2(){return this.SUt}pzt(){return this.TUt}mzt(){return this.bUt}IF(){return this.qUt?this.qUt.IF():NaN}fC(){return"nearest"!==this.Nk()}EF(){return this.KUt}DF(t){this.KUt!==t&&(this.KUt=t,-1===this._jt&&-1===this.rWt||(this.eJt(),this.nJt()))}Nk(){return this.sx}R_t(){return this.wUt}bBt(){return this.vUt}ABt(){this.vUt&&(this.vUt.QE(),this.vUt.Jn(),this.vUt=null)}JF(){return this.C4}UF(){return this.C4.UF()}att(){return this.S9}rJt(){return this.GUt}_Lt(){return this.IUt}pct(){return this.Ylt}nk(){return this.fX}kK(t){return this.fX.kK(t)}jB(t,s,i,e,n,r){if(r&&this.IUt){if(t instanceof eS.Flt&&t.P0()){const h=t.$B(),o=Math.floor(this.BF()*h.length);return this.jB(h[o],s,i,e,n,r)}const h=this.IUt.klt(t,r);if(h){const t=this.T0(h,s,!1,i,e,!1,n,void 0,n);return this.IUt.jlt(t,r),t}}return this.T0(t,s,!1,i,e,!1,n,void 0,n)}T0(t,s,i,e,n,r,h,o,a){let u=null,l=null;if(t instanceof eS.Flt){if(l=t,l.P0()){const t=l.$B();l=t[Math.floor(this.BF()*t.length)]}u=l.p0()}else u=t,l=this.f0(u[1]);const c=l.TB().Kz();if(this.yM&&c&&!l.K_t())return null;const f=s;let d;c||(s=null),d=i&&!r&&u&&!this.QUt.has(u[2])?u[2]:this.WUt++;const p=u?u[0]:null,m=eS.Qn(eS.Instance,{runtime:this,objectType:l,KQ:s,tLt:p,nLt:u?u[3]:null,uid:d,tags:u?u[6]:null});this.QUt.set(d,m);let y=null;if(c&&(y=m.lj(),void 0!==e&&void 0!==n&&(y.Qb(e),y.Yb(n)),l.CAt(!0)),s&&(a||s.v0(m,!0),s.VF().O3(l)),this.UUt++,l.XW()&&!i&&!r){const t=new Set;for(const s of l.D3().tU()){if(s===l)continue;const i=this.hJt(s,y,t);if(i){const t=this.T0(i,f,!1,y?y.Wb():e,y?y.Vb():n,!0,!1,void 0,a);m.p5(t)}else{const t=this.T0(s,f,!1,y?y.Wb():e,y?y.Vb():n,!0,!1,void 0,a);m.p5(t)}}for(const t of m.$W()){t.p5(m);for(const s of m.$W())t!==s&&t.p5(s)}}if(c&&!i&&h&&this.oJt(m,p,y,s,e,n,a),l.XW()&&!i&&!r&&h)for(const t of m.$W()){const i=t.lj();if(!i)continue;const e=t.TB(),n=t.BW().p0()[0];e.Kz()?this.oJt(t,n,i,s,i.Wb(),i.Vb(),a):this.oJt(t,n,i,s,void 0,void 0,a)}if(!r&&h){void 0===e&&(e=p[0]),void 0===n&&(n=p[1]);const t=y.PJ(),s=e-y.Wb()+t.Wb(),i=n-y.Vb()+t.Vb();t.$Q(s,i)}l.SAt();const g=u?eS.Ah(u[5]):null,M=u?u[4].map((t=>eS.Ah(t))):null,w=c&&p&&p[13];if(w&&m.lLt(),m.q_t(g,M),w){const t=p[13];m.DV().iNt(t[2],t[0],t[1])}this.FUt.push(m),this.zUt=!0,this._Q()&&nS.aJt(m);const S=this.KWt.instancecreate;return S.BV=m,this.t_t.dispatchEvent(S),m}FOt(t){const s=t[0],i=t[1],e=t[2],n=t[6];return n||this.C4.H5(s).cj(i).g0(e)}hJt(t,s,i){const e=s?.DLt()??[];for(const s of e){const e=this.FOt(s),n=!!s[4],r=this.f0(e[1]);if(!i.has(e)&&t===r&&n)return i.add(e),e}}oJt(t,s,i,e,n,r,h){const o=i.oPt(),a=i.DLt();if(t.lj().aPt(o),!a)return;void 0===n&&(n=s[0]),void 0===r&&(r=s[1]);const u=new Set,l=s[0],c=s[1];for(const s of a){const i=s[0],o=s[1],a=s[2],f=s[3],d=!!s[4],p=s[5],m=s[6];let y;y=m||this.C4.H5(i).cj(o).g0(a);const g=this.f0(y[1]),M=t.LLt(g),w=u.has(g);if(M&&!w&&d){const s=t.OLt(g);s.lj().sLt(y[0]);const i=n+y[0][0]-l,e=r+y[0][1]-c;s.lj().$Q(i,e),s.lj().aPt(p),t.QJ(s,{qJ:!!(1&f),KJ:!!(f>>1&1),$J:!!(f>>2&1),sV:!!(f>>3&1),eV:!!(f>>4&1),cV:!!(f>>5&1),rV:!!(f>>6&1),oV:!!(f>>7&1),uV:!!(f>>8&1)}),u.add(g)}else{const s=n+y[0][0]-l,i=r+y[0][1]-c,o=this.T0(y,e,!1,s,i,!1,!0,t,h);o.lj().aPt(p),t.QJ(o,{qJ:!!(1&f),KJ:!!(f>>1&1),$J:!!(f>>2&1),sV:!!(f>>3&1),eV:!!(f>>4&1),cV:!!(f>>5&1),rV:!!(f>>6&1),oV:!!(f>>7&1),uV:!!(f>>8&1)})}}}YW(t){if(this.JUt.has(t))return;const s=t.BW();let i=this.jUt.get(s);if(i){if(i.has(t))return;i.add(t)}else i=new Set,i.add(t),this.jUt.set(s,i);if(this._Q()&&nS.uJt(t),t.fLt(),this.zUt=!0,t.XW())for(const s of t.$W())this.YW(s);for(const s of t.children())s.fV()&&this.YW(s);if(!this.C4.QB()&&!this.kWt){const s=this.jk();s.BB(!0),t.VLt(),s.BB(!1)}t.YLt(this.C4.QB())}JB(){this.zUt&&(this.BUt=!0,this.lJt(),this.cJt(),this.BUt=!1,this.zUt=!1,this.gj())}lJt(){for(const t of this.FUt){const s=t.BW();s.v0(t);for(const i of s.YB())i.v0(t),i.SAt()}eS.wh(this.FUt)}cJt(){this.t_t.lf(!0);for(const[t,s]of this.jUt.entries())this.fJt(t,s),s.clear();this.jUt.clear(),this.t_t.lf(!1)}fJt(t,s){for(const t of s){const s=this.KWt.instancedestroy;s.BV=t,this.t_t.dispatchEvent(s),this.QUt.delete(t.tQ()),this.EWt.delete(t);const i=t.lj();i&&(i.cPt(),i.I0(),i.fLt()),this.JUt.add(t),this.UUt--}eS.Eh(t.AB(),s),t.SAt(),this.VUt.add(t);for(const i of t.YB())eS.Eh(i.AB(),s),i.SAt(),this.VUt.add(i);if(t.TB().Kz()){const t=new Set([...s].map((t=>t.lj().cj())));for(const i of t)i.W1(s)}}bAt(){return this.FUt}*ICt(t){for(const s of this.bAt())t.P0()?s.BW().vxt(t)&&(yield s):s.BW()===t&&(yield s)}H_t(){return this.WUt++}Z_t(t,s){this.QUt.set(t,s)}Tq(t){t=!!t,this.pWt!==t&&(this.pWt=!!t,this.pWt&&this.mWt&&(this.xq(!1),this.mWt=!1))}bq(){return this.pWt}U3(){this.t_t.dispatchEvent(eS.Qn(eS.Event,"renderercontextlost")),this.xq(!0);for(const t of this._Ut)!t.P0()&&t.X_t()&&t.z3();const t=this.UF();t&&t.U3(),eS.qEt.CX(),eS.zK.CX()}async Xzt(){await this.UF().A3(null,this.lb()),this.t_t.dispatchEvent(eS.Qn(eS.Event,"renderercontextrestored")),this.xq(!1),this.gj()}nQt(t){if(!this.pWt)return;const s=t.hidden;this.xq(s),this.mWt=s,s||this.gj()}aQt(t){this.kBt()&&this.tWt&&!eS.Ks.hi&&(t.data.parentHasFocus||(this.xq(!0),this.sWt=!0))}uQt(){this.sWt&&(this.xq(!1),this.sWt=!1)}nJt(){const t=this.eWt;"vsync"===this.KUt?-1===this._jt&&(this._jt=self.requestAnimationFrame(t.nWt)):"unlimited-tick"===this.KUt?(-1===this.rWt&&(this.rWt=eS.Qh(t.hWt)),-1===this._jt&&(this._jt=self.requestAnimationFrame(t.oWt))):-1===this.rWt&&(this.rWt=eS.Qh(t.nWt))}eJt(){-1!==this._jt&&(self.cancelAnimationFrame(this._jt),this._jt=-1),-1!==this.rWt&&(eS.Jh(this.rWt),this.rWt=-1)}hF(){return this.yWt>0}xq(t){if(this.Gzt())return;const s=this.hF();this.yWt+=t?1:-1,this.yWt<0&&(this.yWt=0);const i=this.hF();if(!s&&i)console.log("[Construct] Suspending"),this.eJt(),this.t_t.dispatchEvent(eS.Qn(eS.Event,"suspend")),this.qK(eS.Qn(eS.Event,"suspend")),this.vQ(eS._j.Dj.Ej.dJt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const t=performance.now();this.SWt=t,this._Wt=t,this.DWt=0,this.AWt=0,this.LWt=0,this.OWt=0,this.PWt=0,this.RWt=0,this.t_t.dispatchEvent(eS.Qn(eS.Event,"resume")),this.qK(eS.Qn(eS.Event,"resume")),this.vQ(eS._j.Dj.Ej.pJt,null,null),this.Byt()||this.N8(t)}}oq(t){this.$Wt.Fl(t)}cq(t){this.tQt.Fl(t)}uq(t){this.sQt.Fl(t)}aq(t){this.$Wt.Zf(t)}fq(t){this.tQt.Zf(t)}lq(t){this.sQt.Zf(t)}mJt(t,s){const i=s?performance.now():0;let e;return t instanceof rS?(e=t.LQ(),s&&nS.yJt(t.behavior,performance.now()-i)):(e=t.N8(),s&&nS.yJt(t.kV(),performance.now()-i)),e}gJt(){const t=this._Q();this.$Wt.Bd(!0);for(const s of this.$Wt)this.mJt(s,t);this.$Wt.Bd(!1)}MJt(t,s){const i=s?performance.now():0;let e;return t instanceof rS?(e=t.mq(),s&&nS.yJt(t.behavior,performance.now()-i)):(e=t.IEt(),s&&nS.yJt(t.kV(),performance.now()-i)),e}wJt(){const t=this._Q();this.tQt.Bd(!0);for(const s of this.tQt)this.MJt(s,t);this.tQt.Bd(!1)}SJt(t,s){const i=s?performance.now():0;let e;return t instanceof rS?(e=t.PQ(),s&&nS.yJt(t.behavior,performance.now()-i)):(e=t.vNt(),s&&nS.yJt(t.kV(),performance.now()-i)),e}TJt(){const t=this._Q();this.sQt.Bd(!0);for(const s of this.sQt)this.SJt(s,t);this.sQt.Bd(!1)}*bJt(){const t=this._Q();this.$Wt.Bd(!0);for(const s of this.$Wt){const i=this.mJt(s,t);eS.To(i)&&(yield*i)}this.$Wt.Bd(!1)}*vJt(){const t=this._Q();this.tQt.Bd(!0);for(const s of this.tQt){const i=this.MJt(s,t);eS.To(i)&&(yield*i)}this.tQt.Bd(!1)}*xJt(){const t=this._Q();this.sQt.Bd(!0);for(const s of this.sQt){const i=this.SJt(s,t);eS.To(i)&&(yield*i)}this.sQt.Bd(!1)}async N8(t,s,i){this.fWt=!0;const e="background-wake"===i,n="background-wake"!==i&&"skip-render"!==i,r=this.JF(),h=this.Cj();if(!this.lWt||this.hF()&&!s&&!e)return;const o=performance.now();this.cWt=!0,this.CJt(t||0),this.LWt++,this.GJt();const a=this.IJt();this.bCt()&&await a;const u=this.t_t.Gf(this.KWt.pretick);u instanceof Promise&&await u,this.qK(this.XWt.pretick);const l=this.NJt();this.bCt()&&await l,this.EJt()&&await this.DJt(),r.ZF()&&await this._Jt();const c=this.AJt();this.bCt()&&await c;const f=r.UF(),d=f.C3();let p=!1;if(-1!==d&&(f.G3(),h.x3()!==d)){const t=this.Cj().Y3(d);this.vk()&&(p=!0,await t)}this.zc("canvas","update-html-layer-dom-state",{layersDomState:f.U0().filter((t=>t.$U())).map((t=>t.Z1()))}),n&&this.UR(),p&&this.zc("canvas","cleanup-html-layers"),this.Gzt()&&(await this.jQt(),this.fF()>=this.RQt())?this.WQt():(this.hF()||e||this.nJt(),this.aWt++,this.uWt++,this.cWt=!1,this.RWt+=performance.now()-o)}async IJt(){const t=this.cpt,s=this._Q();this.JB(),t.BB(!0),this.Eyt(this.UF()),s&&nS.LJt(),this.bCt()?await t.agt():t.egt(),s&&nS.OJt(),this.Dyt(),t.BB(!1),this.JB(),t.BB(!0)}async NJt(){const t=this.cpt,s=this._Q(),i=this.bCt(),e=this.t_t,n=this.KWt,r=this.XWt;s&&nS.LJt(),i?await this.RJt(this.bJt()):this.gJt(),i?await this.RJt(this.vJt()):this.wJt(),s&&nS.PJt(),s&&nS.LJt(),i?await this.kJt(n.tick):e.dispatchEvent(n.tick),s&&nS.FJt(),t.BB(!1),this.qK(r.tick)}async AJt(){const t=this.cpt,s=this.t_t,i=this.KWt,e=this.XWt,n=this._Q(),r=this.bCt();n&&nS.LJt(),r?await t._yt(this.C4):t.Nyt(this.C4),n&&nS.OJt(),this.CUt.kkt(),this.GJt(),this.dWt=!1,t.BB(!0),n&&nS.LJt(),r?await this.RJt(this.xJt()):this.TJt(),n&&nS.PJt(),n&&nS.LJt(),r?await this.kJt(i.tick2):s.dispatchEvent(i.tick2),n&&nS.FJt(),t.BB(!1),this.qK(e.tick2),r&&await t.Uyt(),this.JB(),this.GJt()}GJt(){if(0===this.JUt.size)return;const t=this.t_t;t.lf(!0);for(const t of this.VUt)t.Kyt().Bdt(this.JUt);this.VUt.clear(),this.cpt.lgt(this.JUt);for(const t of this.JUt)t.Jn();this.JUt.clear(),t.lf(!1)}async _Jt(){const t=this.JF();let s=0;for(;t.ZF()&&s++<10;)await this.jJt(t.s6())}CJt(t){let s=0;this.Gzt()?(s=1/this.PQt(),this.TWt=s,this.bWt=s):0!==this.SWt&&(s=Math.max(t-this.SWt,0)/1e3,s>.5&&(s=0),this.TWt=s,this.bWt=eS.Zn(s,this.CWt,this.xWt)),this.SWt=t,this.vWt=this.bWt*this.XAt,this.GWt.Fl(this.vWt),this.IWt.Fl(s*this.XAt),this.NWt.Fl(this.bWt);for(const[t,s]of this.EWt)s.Fl(this.bWt*t.MF());this.qUt&&this.qUt.cBt(),t-this._Wt>=1e3&&(this._Wt+=1e3,t-this._Wt>=1e3&&(this._Wt=t),this.AWt=this.DWt,this.DWt=0,this.OWt=this.LWt,this.LWt=0,this.PWt=Math.min(this.RWt/1e3,1),this.RWt=0,this.qUt&&this.qUt.lBt(),this.CUt.Lkt(),this._Q()&&nS.zJt())}aLt(t,s){if(s){if(!this.EWt.has(t)){const s=eS.Qn(eS.Xf);s.nd(this.GWt),this.EWt.set(t,s)}}else this.EWt.delete(t)}uLt(t){const s=this.EWt.get(t);return s?s.Js():this.fF()}async jJt(t){const s=this.t_t,i=this.JF().UF();await i.M5(),i.B3(t,this.lb()),i===t&&this.cpt.T5(),this.CUt.kkt(),this.GJt(),s.dispatchEvent(this.KWt.beforelayoutchange),eS.ff.Ef(!0),await t.A3(i,this.lb()),eS.ff.Ef(!1),await t.W3(!1),s.dispatchEvent(this.KWt.layoutchange),this.gj(),this.dWt=!0,this.JB(),this.BQt()}gj(){this.$Ut=!0}$zt(){return this.qUt?this.qUt.$zt():null}tBt(){return this.qUt?this.qUt.tBt():null}lb(){return this.qUt?this.qUt.lb():null}UR(){const t=this.qUt;if(!t||t.Kzt())return;const s=this.lb(),i=s.$L(),e=i&&s.PT(),n=i&&s.tS();if(e&&s.jL(),!this.$Ut&&!this.Gzt())return void s._T();const r=this.C4.UF();this.DWt++,s._L();const h=this._Q();h&&nS.LJt(),this.$Ut=!1;let o=null;e&&(o=t.mBt().C_(),s.XL(o));let a=null;n&&(a=s.BJt(2*(1+r.M3())),s.L2(0,1)),this.G1()&&"low"===t.P2()?s.QA(t.C2(),t.G2()):s.JA(),this.UJt(this.lb(),r),o&&s.tO(o),n&&(s.WJt(),this.qUt.yBt(a)),s.NT(),h&&(nS.QJt(),nS.JJt()),t&&t.gBt()}_5(t){return"low"===this.Cj().P2()||t.PT()&&(this.R2()||this.G1())}UJt(t,s){t.aS(),t.aL(),t.tL(1,1,1,1),t.WL(null),t.nL(null),t.LL(this.G1()),this._5(t)&&s.E5(t);const i=s.x3();for(let e=1;e<i;++e)s.R5(t,e),t.tS()&&t.VJt();this._5(t)||s.E5(t),s.O5(t)}vQ(t,s,i){if(!this.lWt)return!1;const e=!this.cWt&&!this.cpt.Vyt();let n=0;e&&(n=performance.now());const r=this._Q();r&&this.Aq(!1);const h=this.cpt.Ryt(this.C4,t,s,i);if(e){const t=performance.now()-n;this.RWt+=t,r&&nS.YJt(t)}return r&&this.Aq(!0),h}cNt(t,s,i){if(!this.bCt())return this.vQ(t,s,i);if(this.Byt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(!this.cWt&&!this.cpt.Vyt())throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead");return this.cpt.Fyt(this.C4,t,s,i)}async Ij(t,s,i){if(!this.bCt())return this.vQ(t,s,i);if(!this.lWt)return!1;if(this.Byt())return this.cpt.jyt(t,s,i);if(!this.UF())return this.cpt.Pyt(t,s,i);const e=performance.now(),n=this.cpt.Fyt(this.C4,t,s,i);let r=n.next();for(;!r.done;)await this.Lyt(r.value),r=n.next();return this.hF()||this.cpt.Vyt()||(await this.cpt.Uyt(),this.fWt&&!this.cWt&&this.nJt()),this.RWt+=performance.now()-e,r.value}fNt(t,s,i){const e=this._Q();e&&this.Aq(!1);const n=this.cpt.Wyt(this.C4,t,s,i);return e&&this.Aq(!0),n}dNt(t,s,i){return this.cpt.Qyt(this.C4,t,s,i)}pNt(t){return this.gWt.Fl(t)}Eyt(t){this.kUt.push(t)}Dyt(){if(!this.kUt.length)throw new Error("layout stack empty");this.kUt.pop()}aj(){return this.kUt.length?this.kUt.at(-1):this.UF()}aF(t){return t&&-1!==t.MF()?this.bWt*t.MF():this.vWt}G8(){return this.vWt}I8(){return this.bWt}lF(){return this.TWt}MF(){return this.XAt}wF(t){(isNaN(t)||t<0)&&(t=0),this.XAt=t}LF(t){this.CWt=Math.max(t,0)}AF(){return this.CWt}PF(t){this.xWt=Math.max(t,0)}RF(){return this.xWt}TF(){return this.AWt}vF(){return this.OWt}CF(){return this.PWt}HJt(){return this.wWt}fF(){return this.GWt.Js()}qJt(){return this.IWt.Js()}yF(){return this.NWt.Js()}pF(){return this.aWt}ZJt(){return this.uWt}KJt(){return this.UUt}fk(){return this.oUt}pk(){return this.aUt}Mk(){return this.uUt}yk(){return this.lUt}Sk(){return this.cUt}rj(t){if(this.kWt)throw new Error("cannot call while loading state - wait until afterload event");return this.QUt.get(t)||null}LOt(t){if(this.kWt)throw new Error("cannot call while loading state - wait until afterload event");this.QUt.delete(t)}d5(){this.QUt.clear();for(const t of this._Ut)if(!t.P0())for(const s of t.AB())this.QUt.set(s.tQ(),s)}kBt(){return"preview"===this.HBt}_Q(){return this.tUt}Tz(){return this.HBt}bz(){return"nwjs"===this.Tz()||this.qBt}jBt(){return"cordova"===this.HBt}XJt(){return"Android"===eS.Ks.Xs&&("cordova"===this.HBt||"playable-ad-single-file"===this.HBt||"playable-ad-zip"===this.HBt||"instant-games"===this.HBt)}$Jt(){return this.YZ}tVt(){return this.ZBt}vz(){return this.KBt}sVt(){return this.XBt}ak(){return this.CUt}YEt(){return this.xUt.YEt()}HEt(){return this.xUt.HEt()}G1(){return this.ZUt}iVt(){return this.lb().Ww(this.m1())}zw(t){return this.lb().zw(t||this.m1())}eVt(){return this.dWt}nVt(t){t=!!t,this.XUt!==t&&(this.XUt=t,this.JF().e6(),this.gj())}Dk(){return this.XUt}rVt(t){if(!this.DUt.has(t)){const s=()=>this.hVt(t);this.DUt.set(t,s),t.gf().addEventListener("animationframeimagechange",s)}const s=this.cM.rM(t);return s.SM()||s.bM().then((()=>this.gj())),s}hVt(t){this.cM.uM(t)}NUt(t){const s=[];for(const i of t.lAt())for(const t of i.uY()){const i=t.mY();s.push({source:t,width:i.Vy(),height:i.ig(),tag:t.EY()})}return{MM:s}}async EUt(t){const s=eS.Qn(eS.Wd),i=[],e=new Map;for(const n of t.lAt())for(const t of n.uY()){const n=t.mY().mDt();e.has(n)||(e.set(n,null),i.push(s.Fl((async()=>{const t=await n.EX();e.set(n,t)}))))}await Promise.all(i);const n=[];for(const i of t.lAt())for(const t of i.uY())n.push(s.Fl((async()=>{const s=t.mY(),i=e.get(s.mDt()),n=await s.yDt(i);return{xM:await createImageBitmap(n)}})));const r=await Promise.all(n);for(const t of e.values())t instanceof ImageBitmap&&t.close&&t.close();return{MM:r}}oVt(t){this.FWt=t,this.jWt=!1}aVt(){this.FWt="",this.jWt=!0}uVt(t){this.zWt=t}yGt(t){this.zQ=t}lVt(){return this.BWt}EJt(){return!!(this.FWt||this.jWt||this.zWt||null!==this.zQ)}async DJt(){if(this.FWt&&(this.JB(),await this.cVt(this.FWt),this.fVt()),this.zWt&&(await this.dVt(this.zWt),this.fVt(),this._Q()&&nS.pVt()),this.jWt){const t=await this.mVt();this.BWt=t,await this.Ij(eS._j.Dj.Ej.yVt,null),this.BWt="",this.fVt()}if(null!==this.zQ){this.JB();try{await this.gVt(this.zQ),this.BWt=this.zQ,await this.Ij(eS._j.Dj.Ej.MVt,null),this.BWt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.Ij(eS._j.Dj.Ej.wVt,null)}this.fVt()}}fVt(){this.FWt="",this.jWt=!1,this.zWt="",this.zQ=null}Bz(){return this.UWt||(this.UWt=localforage.Ci({name:"c3-localstorage-"+this.Mk(),description:this.fk()})),this.UWt}SVt(){return this.WWt||(this.WWt=localforage.Ci({name:"c3-savegames-"+this.Mk(),description:this.fk()})),this.WWt}async cVt(t){const s=await this.mVt();try{await this.SVt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.BWt=s,await this.Ij(eS._j.Dj.Ej.yVt,null),this.BWt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.Ij(eS._j.Dj.Ej.TVt,null)}}async dVt(t){try{const s=await this.SVt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.gVt(s),this.BWt=s,await this.Ij(eS._j.Dj.Ej.MVt,null),this.BWt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.Ij(eS._j.Dj.Ej.wVt,null)}}async mVt(){const t={c3save:!0,version:1,rt:{time:this.fF(),timeRaw:this.qJt(),walltime:this.yF(),timescale:this.MF(),tickcount:this.pF(),next_uid:this.WUt,running_layout:this.UF().W0(),start_time_offset:Date.now()-this.wWt},types:{},layouts:{},events:this.cpt.w4(),timelines:this.S9.w4(),user_script_data:null};for(const s of this._Ut)s.P0()||s.AAt()||(t.types[s.W0().toString()]=s.w4());for(const s of this.C4.HF())t.layouts[s.W0().toString()]=s.w4();const s=this.bVt("save");return s.saveData=null,await this.u5(s),t.user_script_data=s.saveData,JSON.stringify(t)}e5(){return this.kWt}async gVt(t){const s=this.JF(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(i.version>1)throw new Error("C3 save data from future version");this.gGt(),this.t_t.dispatchEvent(eS.Qn(eS.Event,"beforeload"));for(const t of this.$Qt())t.BW().AAt()||t.E6();const e=i.rt;this.GWt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.IWt.Set(e.timeRaw),this.NWt.Set(e.walltime),this.XAt=e.timescale,this.aWt=e.tickcount,this.wWt=Date.now()-e.start_time_offset;const n=e.running_layout;this.kWt=!0;let r=!1;if(n!==this.UF().W0()){const t=s.H5(n);if(!t)return;await this.jJt(t),r=!0}for(const[t,e]of Object.entries(i.layouts)){const i=parseInt(t,10),n=s.H5(i);n&&n.S4(e)}const h=new Set;for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.Gq(i);!e||e.P0()||e.AAt()||e.S4(s,h)}for(const t of this.C4.HF())for(const s of t.SU())s.T4();if(this.JB(),this.d5(),this.kWt=!1,r){for(const t of this.$Qt())t.n5();for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.Gq(i);!e||e.P0()||e.AAt()||e.kAt(s)}}this.WUt=e.next_uid,this.cpt.S4(i.events);for(const t of this._Ut)if(!t.P0()&&t.XW())for(const s of t.AB()){const i=s.iQ();s.ALt();for(const e of t.D3().tU()){if(e===t)continue;const n=e.AB();if(i<0||i>=n.length)throw new Error("missing sibling instance");s.p5(n[i])}}this.S9.S4(i.timelines),s.i6(),s.e6();for(const t of h)t.JLt();this.MGt(),this.t_t.dispatchEvent(eS.Qn(eS.Event,"afterload")),this.qK(this.bVt("afterload"));for(const[t,s]of Object.entries(i.types)){const s=parseInt(t,10),i=this.Gq(s);i&&i.PAt()}const o=this.bVt("load");o.saveData=i.user_script_data,await this.u5(o),this.gj()}vVt(t,s){return s.lj().iPt()-t.lj().iPt()}UPt(t,s){t.lj()&&(this.dQt.has(t)||(this.dQt.set(t,s),this.pQt.push(t)))}gGt(){this.dQt=new WeakMap,eS.wh(this.pQt),eS.I5.YOt()}MGt(t="full",s=null){this.pQt.sort(this.vVt),s||(s={}),s.AOt=new Set;const i=this.pQt.length;for(const i of this.pQt)i._6(this.dQt.get(i),t,s);for(const i of this.pQt)i.ZLt(this.dQt.get(i),t,s);if(this.gGt(),i){this.JB(),this.d5();for(const t of this.C4.HF())for(const s of t.SU())s.D0(),s.yj()}}async xVt(t){const s=await Promise.all(t.map((async t=>{if(this.jBt()&&this.fX.GK()||"playable-ad-single-file"===this.Tz()){const s=await this.fX.eo(t);return URL.createObjectURL(s)}return new URL(t,location.href).toString()})));this.iQt.CVt(s)}GVt(t,s){this.iQt.IVt(t,s)}NVt(t,s){this.iQt.EVt(t,s)}DVt(t,s,i,e){return this.iQt.DVt(t,s,i,null,null,e)}_Vt(t,s,i,e){return this.iQt._Vt(t,s,i,e)}AVt(){return this.iQt.LVt()}ej(t,s){this.zc("runtime","invoke-download",{url:t,filename:s})}async GBt(t,s,i,e,n,r){if(e=e||s,n=n||i,this.vk())return(await this.wj("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:n,imageBitmapOpts:r})).imageBitmap;{const h=await self.C3_RasterSvgImageBlob(t,s,i,e,n);return r?await self.createImageBitmap(h,r):h}}async OVt(t){return this.vk()?await this.wj("runtime","get-svg-image-size",{blob:t}):await self.C3_GetSvgImageSize(t)}RVt(){this.YWt||(this.YWt=!0,this.zc("runtime","enable-device-orientation"))}PVt(){this.HWt||(this.HWt=!0,this.zc("runtime","enable-device-motion"))}BF(){return this.MWt()}kVt(t){this.MWt=t}hQt(){const t=this.lb();return{fps:this.TF(),tps:this.vF(),cpu:this.CF(),gpu:this.IF(),layout:this.UF()?this.UF().Nc():"",renderer:t.PT()?t.hO():t.sBt()}}Byt(){return!!this._Q()&&nS.Byt()}Lyt(t){return this.bCt()?nS.Lyt(t):Promise.resolve()}dSt(){return!!this.bCt()&&nS.FVt()}jVt(t){this.sUt=!!t,this.zVt()}BVt(){return this.sUt}bCt(){return this.iUt}Aq(t){t?this.eUt--:this.eUt++,this.zVt()}zVt(){this.iUt=this._Q()&&this.sUt&&0===this.eUt}AMt(){return this._Q()&&nS.AMt()}D2(){return this._Q()&&this.lb().$L()&&nS.D2()}async RJt(t){if(t)for(const s of t)await this.Lyt(s)}kJt(t){return this.RJt(this.t_t.Nf(t))}Pmt(t){return this.cpt.Pmt(t.name,t.params)}Tj(t){if(this.vk())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}Jz(){return this.lQt}bVt(t){const s=eS.Qn(eS.Event,t,!1);return s.runtime=this.lQt,s}CQt(){this.lQt=new self.sk(this),this.XWt={pretick:this.bVt("pretick"),tick:this.bVt("tick"),tick2:this.bVt("tick2")}}NQt(){const t={};for(const s of this._Ut)t[s.uyt()]={value:s.mB(),enumerable:!0,writable:!1};this.lQt.Pk(t)}EQt(){const t={};for(const s of this.jk().yyt())t[s.uyt()]=s.lyt();this.lQt.kk(t)}XF(){return this.fQt}lB(t,s){this.cQt.set(t,s)}vU(t){return this.cQt.get(t)}pz(t){if(!(t instanceof self.wB))throw new TypeError("expected IObjectClass");const s=this.vU(t);if(!(s&&s instanceof eS.Flt))throw new Error("invalid IObjectClass");return s}EB(t){if(!(t instanceof self.zW))throw new TypeError("expected IInstance");const s=this.vU(t);if(!(s&&s instanceof eS.Instance))throw new Error("invalid IInstance");return s}uj(t){if(!(t instanceof self.CV))throw new TypeError("expected IWorldInstance");const s=this.vU(t);if(!(s&&s instanceof eS.Instance))throw new Error("invalid IInstance");return s}},self.C3_CreateRuntime=eS.zBt.DC,self.C3_InitRuntime=(t,s)=>t.sLt(s)}{const aS=self.Gs;aS.eQt=class extends aS.Un{constructor(t,s){super(),this.kc=t,this.UVt=new Map,this.WVt=0,this.QVt=s.inputPort,s.outputPort.onmessage=t=>this.JVt(t),this.VVt=s.maxNumWorkers,this.YVt=1,this.HVt=!1,this.qVt=!1}LVt(){return this.VVt}CVt(t){this.QVt.postMessage({type:"_import_scripts",scripts:t})}IVt(t,s){this.QVt.postMessage({type:"_send_blob",blob:t,id:s})}EVt(t,s){this.QVt.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}DVt(t,s,i,e,n,r){if(i||(i=[]),"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const h=this.WVt++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:h,params:s,transferables:i},a=new Promise(((t,s)=>{this.UVt.set(h,{resolve:t,progress:e,reject:s,ZVt:!1,KVt:r})}));return n&&n.Hf((()=>this.XVt(h))),this.QVt.postMessage(o,i),this.$Vt(),a}_Vt(t,s,i,e){if(i||(i=[]),"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const n={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:this.WVt++,params:s,transferables:i};this.QVt.postMessage(n,i)}XVt(t){const s=this.UVt.get(t);s&&(s.ZVt=!0,s.resolve=null,s.progress=null,s.reject=null,this.QVt.postMessage({type:"_cancel",jobId:t}))}JVt(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.tYt(e,s.result);break;case"progress":this.sYt(e,s.progress);break;case"error":this.iYt(e,s.error);break;case"ready":this.eYt();break;default:throw new Error(`unknown message from worker '${i}'`)}}tYt(t,s){const i=this.UVt.get(t);if(!i)throw new Error("invalid job ID");i.ZVt||i.resolve(s),this.UVt.delete(t)}sYt(t,s){const i=this.UVt.get(t);if(!i)throw new Error("invalid job ID");!i.ZVt&&i.progress&&i.progress(s)}iYt(t,s){const i=this.UVt.get(t);if(!i)throw new Error("invalid job ID");i.ZVt||i.reject(s),this.UVt.delete(t)}eYt(){this.HVt&&(this.HVt=!1,this.YVt++,this.YVt<this.VVt?this.$Vt():this.QVt.postMessage({type:"_no_more_workers"}))}nYt(){let t=0;const s=[...this.UVt.values()].sort(((t,s)=>(t.KVt||1/0)-(s.KVt||1/0)));for(const i of s)t<(i.KVt||1/0)&&t++;return t}async $Vt(){if(!(this.YVt>=this.VVt||this.HVt||this.qVt||this.nYt()<=this.YVt))try{this.HVt=!0,(await this.kc.wj("runtime","create-job-worker")).outputPort.onmessage=t=>this.JVt(t)}catch(t){this.qVt=!0,this.HVt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.YVt} so far)`,t)}}}}self.C3_Shaders={};{let uS=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const t=""+i,s=""+e;return t<s?-1:t>s?1:0}};0;const lS=self.Gs;let cS=null,fS="",dS="",pS=[],mS="",yS="",gS="";const MS=lS.Qn(lS.omt);lS._j.Dj=class extends lS.yIt{constructor(t){super(t),this.imt=this.kc.jk().Dq(),this.Udt=this.kc.jk().Xk(),this.rYt=0,this.hYt=0,this.oYt=new Map}Jn(){super.Jn()}gj(){this.kc.gj()}vQ(t){this.kc.vQ(t,null,null)}aYt(t,s){return cS&&t===fS&&s===dS||(cS=new RegExp(t,s),fS=t,dS=s),cS.lastIndex=0,cS}uYt(t,s,i){if(t===mS&&s===yS&&i===gS)return pS;const e=this.aYt(s,i);return pS=t.match(e),mS=t,yS=s,gS=i,pS}async lYt(t,s){if(!s.length)return;this.rYt+=s.length;const i=[];for(const e of s)i.push(t.O3(e));await lS.Bh(i,(()=>{this.hYt++})),this.hYt++,this.hYt===this.rYt&&(this.hYt=0,this.rYt=0,this.kc.vQ(lS._j.Dj.Ej.cYt,null,null))}ZK(){return 0===this.rYt?1:this.hYt/this.rYt}fYt(t,s){for(const i of s)0===i.PB()&&t.j3(i)}dYt(){return MS}pYt(t){const s=this.kc.jk(),i=s.Xk(),e=i.Nq(),n=e.Jk(),r=n.Iq(),h=e.Upt(),o=i.Eq(n),a=s.Dq(),u=a.Eq();if(u.rmt(t),h)for(let i=0;i<t&&!u.jq();++i)s.Oq(r),u.kq(i),n.Rq(e,o),s.Pq(r);else for(let s=0;s<t&&!u.jq();++s)u.kq(s),n.Rq(e,o);return i.zq(),a.zq(),!1}*mYt(t){const s=this.kc.jk(),i=s.Xk(),e=i.Nq(),n=e.Jk(),r=n.Iq(),h=e.Upt(),o=i.Eq(n),a=s.Dq(),u=a.Eq();if(u.rmt(t),h)for(let i=0;i<t&&!u.jq();++i)s.Oq(r),u.kq(i),yield*n.xSt(e,o),s.Pq(r);else for(let s=0;s<t&&!u.jq();++s)u.kq(s),yield*n.xSt(e,o);return i.zq(),a.zq(),!1}yYt(){const t=this.kc.jk(),s=t.Xk(),i=s.Nq(),e=i.Jk(),n=e.Iq(),r=i.Upt(),h=s.Eq(e),o=t.Dq(),a=o.Eq();if(r)for(let s=0;!a.jq();++s)t.Oq(n),a.kq(s),e.Rq(i,h)||a.AY(),t.Pq(n);else for(let t=0;!a.jq();++t)a.kq(t),e.Rq(i,h)||a.AY();return s.zq(),o.zq(),!1}*gYt(){const t=this.kc.jk(),s=t.Xk(),i=s.Nq(),e=i.Jk(),n=e.Iq(),r=i.Upt(),h=s.Eq(e),o=t.Dq(),a=o.Eq();if(r)for(let s=0;!a.jq();++s)t.Oq(n),a.kq(s),(yield*e.xSt(i,h))||a.AY(),t.Pq(n);else for(let t=0;!a.jq();++t)a.kq(t),(yield*e.xSt(i,h))||a.AY();return s.zq(),o.zq(),!1}MYt(t,s,i){const e=this.kc.jk(),n=e.Xk(),r=n.Nq(),h=r.Jk(),o=h.Iq(),a=r.Upt(),u=n.Eq(h),l=e.Dq(),c=l.Eq();if(c._q(t),c.rmt(i),i<s)if(a)for(let t=s;t>=i&&!c.jq();--t)e.Oq(o),c.kq(t),h.Rq(r,u),e.Pq(o);else for(let t=s;t>=i&&!c.jq();--t)c.kq(t),h.Rq(r,u);else if(a)for(let t=s;t<=i&&!c.jq();++t)e.Oq(o),c.kq(t),h.Rq(r,u),e.Pq(o);else for(let t=s;t<=i&&!c.jq();++t)c.kq(t),h.Rq(r,u);return n.zq(),l.zq(),!1}*wYt(t,s,i){const e=this.kc.jk(),n=e.Xk(),r=n.Nq(),h=r.Jk(),o=h.Iq(),a=r.Upt(),u=n.Eq(h),l=e.Dq(),c=l.Eq();if(c._q(t),c.rmt(i),i<s)if(a)for(let t=s;t>=i&&!c.jq();--t)e.Oq(o),c.kq(t),yield*h.xSt(r,u),e.Pq(o);else for(let t=s;t>=i&&!c.jq();--t)c.kq(t),yield*h.xSt(r,u);else if(a)for(let t=s;t<=i&&!c.jq();++t)e.Oq(o),c.kq(t),yield*h.xSt(r,u),e.Pq(o);else for(let t=s;t<=i&&!c.jq();++t)c.kq(t),yield*h.xSt(r,u);return n.zq(),l.zq(),!1}SYt(t){const s=t.LB(),i=s.AB();if(0===i.length)return!1;const e=this.kc.jk(),n=e.Xk(),r=n.Nq(),h=r.Jk(),o=h.Iq(),a=r.Upt(),u=n.Eq(h),l=e.Dq(),c=l.Eq(),f=t.XW(),d=MS.Eq();if(lS.xh(d,i),c.rmt(d.length),a)for(let s=0,i=d.length;s<i&&!c.jq();++s){e.Oq(o);const i=d[s];t.LB().ipt(i),f&&i.FMt(),c.kq(s),h.Rq(r,u),e.Pq(o)}else{s.$dt(!1);const t=s.tpt();lS.wh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.jq();++s){const i=d[s];t[0]=i,f&&i.FMt(),c.kq(s),h.Rq(r,u)}}return n.zq(),l.zq(),lS.wh(d),MS.zq(),!1}*TYt(t){const s=t.LB(),i=s.AB();if(0===i.length)return!1;const e=this.kc.jk(),n=e.Xk(),r=n.Nq(),h=r.Jk(),o=h.Iq(),a=r.Upt(),u=n.Eq(h),l=e.Dq(),c=l.Eq(),f=t.XW(),d=MS.Eq();if(lS.xh(d,i),c.rmt(d.length),a)for(let s=0,i=d.length;s<i&&!c.jq();++s){e.Oq(o);const i=d[s];t.LB().ipt(i),f&&i.FMt(),c.kq(s),yield*h.xSt(r,u),e.Pq(o)}else{s.$dt(!1);const t=s.tpt();lS.wh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.jq();++s){const i=d[s];t[0]=i,f&&i.FMt(),c.kq(s),yield*h.xSt(r,u)}}return n.zq(),l.zq(),lS.wh(d),MS.zq(),!1}bYt(t,s){const i=t.LB(),e=i.AB();if(0===e.length)return!1;const n=this.kc.jk(),r=n.Xk(),h=n.tyt(),o=r.Nq(),a=o.Jk(),u=a.Iq(),l=o.Upt(),c=r.Eq(a),f=n.Dq(),d=f.Eq(),p=t.XW(),m=MS.Eq();lS.wh(m),d.rmt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.jvt(1,t)]);if(m.sort(uS),1===s&&m.reverse(),l)for(let s=0,i=m.length;s<i&&!d.jq();++s){n.Oq(u);const i=m[s][0];t.LB().ipt(i),p&&i.FMt(),d.kq(s),a.Rq(o,c),n.Pq(u)}else{i.$dt(!1);const t=i.tpt();lS.wh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.jq();++s){const i=m[s][0];t[0]=i,p&&i.FMt(),d.kq(s),a.Rq(o,c)}}return r.zq(),f.zq(),lS.wh(m),MS.zq(),!1}*vYt(t,s){const i=t.LB(),e=i.AB();if(0===e.length)return!1;const n=this.kc.jk(),r=n.Xk(),h=n.tyt(),o=r.Nq(),a=o.Jk(),u=a.Iq(),l=o.Upt(),c=r.Eq(a),f=n.Dq(),d=f.Eq(),p=t.XW(),m=MS.Eq();lS.wh(m),d.rmt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.jvt(1,t)]);if(m.sort(uS),1===s&&m.reverse(),l)for(let s=0,i=m.length;s<i&&!d.jq();++s){n.Oq(u);const i=m[s][0];t.LB().ipt(i),p&&i.FMt(),d.kq(s),yield*a.xSt(o,c),n.Pq(u)}else{i.$dt(!1);const t=i.tpt();lS.wh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.jq();++s){const i=m[s][0];t[0]=i,p&&i.FMt(),d.kq(s),yield*a.xSt(o,c)}}return r.zq(),f.zq(),lS.wh(m),MS.zq(),!1}xYt(t,s){let i=this.oYt.get(t);return i||(s?(i={CYt:null,GYt:new Map},this.oYt.set(t,i),i):null)}IYt(t,s,i,e,n){s.Wk().zSt(i,s.Hk()),e&&t.Pq(n)}*NYt(t,s,i,e,n){yield*s.Wk().BSt(i,s.Hk()),e&&t.Pq(n)}}}{const wS=self.Gs;wS._j.Dj.A_t=class extends wS.Un{constructor(t){super(),this.Odt=t,this.kc=t.Fj(),this.sNt=t.TB()}jIt(){}Jn(){this.Odt=null,this.kc=null,this.sNt=null}}}{const SS=self.Gs;SS._j.Dj.Instance=class extends SS.Un{constructor(t,s){super(),this.fi=t,this.Odt=this.fi.BW(),this.oNt=this.Odt.gxt(),this.kc=this.fi.Fj()}Jn(){this.fi=null,this.Odt=null,this.oNt=null,this.kc=null}}}{const TS=self.Gs,bS=[];TS._j.Dj.Ej={EYt:()=>!0,c5:()=>!0,w5:()=>!0,dJt:()=>!0,pJt:()=>!0,hF(){return this.kc.hF()},bwt(){const t=this.kc.$mt();return!t.kpt()&&!t.Rpt()},DYt(){const t=this.kc.tyt().Gvt();let s=t.get("TriggerOnce_lastTick");void 0===s&&(s=-1,t.set("TriggerOnce_lastTick",-1));const i=this.kc.pF();return t.set("TriggerOnce_lastTick",i),this.kc.eVt()||s!==i-1},_Yt(t){const s=this.kc.tyt().Gvt(),i=s.get("Every_lastTime")||0,e=this.kc.fF();s.has("Every_seconds")||s.set("Every_seconds",t);const n=s.get("Every_seconds");return e>=i+n?(s.set("Every_lastTime",i+n),e>=s.get("Every_lastTime")+.04&&s.set("Every_lastTime",e),s.set("Every_seconds",t),!0):(e<i-.1&&s.set("Every_lastTime",e),!1)},Fgt(t){const s=this.kc.jk().Syt(t);return s&&s.Fgt()},kBt(){return this.kc.kBt()},hi:()=>TS.Ks.hi,YQt:()=>!0,Nj:()=>!0,AYt:()=>!0,yVt:()=>!0,TVt:()=>!0,MVt:()=>!0,wVt:()=>!0,LYt(t){return!!this.kc.rj(t)},OYt(t){switch(t){case 0:return"browser"===TS.Ks.ni;case 1:return"iOS"===TS.Ks.Xs;case 2:return"Android"===TS.Ks.Xs;case 8:return"cordova"===TS.Ks.ni;case 9:return"scirra-arcade"===this.kc.Tz();case 10:return"nwjs"===TS.Ks.ni;case 13:return"windows-uwp"===this.kc.Tz();default:return!1}},RYt(t,s,i){return this.aYt(s,i).test(t)},PYt:(t,s,i)=>TS.compare(t,s,i),kYt:(t,s,i)=>t>=s&&t<=i,FYt:(t,s,i)=>TS.compare(t.Yet(),s,i),jYt:t=>!!t.Yet(),zYt(t,s){const i=this.kc.fF();if(0===t){const t=this.kc.tyt().Gvt();return!t.get("CompareTime_executed")&&i>=s&&(t.set("CompareTime_executed",!0),!0)}return TS.compare(i,t,s)},BYt:t=>isNaN(t),FGt:(t,s,i)=>TS.rr(TS.Xn(t),TS.Xn(i))<=TS.Xn(s),jGt:(t,s)=>TS.ar(TS.Xn(t),TS.Xn(s)),Hxt(t,s,i){let e=TS.Xn(t),n=TS.Xn(s),r=TS.Xn(i);return TS.ar(r,n)?TS.ar(e,n)&&!TS.ar(e,r):!(!TS.ar(e,n)&&TS.ar(e,r))},UYt:(t,s)=>"number"==typeof t?0===s:1===s,WYt:t=>!!t,ygt(t){return t.toLowerCase()===this.kc.jk().Sgt()},QYt(t,s,i,e){if(!t)return!1;const n=this.dYt(),r=n.Eq(),h=t.LB();TS.xh(r,h.AB()),h.Vdt()&&TS.wh(h.spt());const o=this.kc.tyt();let a=0;for(let t=0,n=r.length;t<n;++t){const n=r[t];r[a]=n,s=o.jvt(1,t),e=o.jvt(3,t),TS.compare(s,i,e)?++a:h.Xdt(n)}TS.Mh(r,a),h.ept(r);const u=!!r.length;return TS.wh(r),n.zq(),t.LSt(),u},JYt(t,s){if(!t)return!1;const i=this.dYt(),e=i.Eq(),n=t.LB();TS.xh(e,n.AB()),n.Vdt()&&TS.wh(n.spt());const r=this.kc.tyt();let h=0;for(let t=0,s=e.length;t<s;++t){const s=e[t];e[h]=s,r.jvt(1,t)?++h:n.Xdt(s)}TS.Mh(e,h),n.ept(e);const o=!!e.length;return TS.wh(e),i.zq(),t.LSt(),o},VYt(t,s,i){if(!t)return!1;const e=t.LB(),n=e.AB();if(0===n.length)return!1;const r=this.kc.tyt();let h=null,o=0;for(let t=0,e=n.length;t<e;++t){const e=n[t];i=r.jvt(2,t),(null===h||0===s&&i<o||1===s&&i>o)&&(o=i,h=e)}return e.apt(h),t.LSt(),!0},YYt(t,s){if(!t)return!1;const i=t.LB(),e=i.AB();if((s=Math.floor(s))>=e.length)return!1;const n=e[s];return i.apt(n),t.LSt(),!0},HYt(t){if(!t)return!1;const s=t.LB(),i=s.AB(),e=Math.floor(this.kc.BF()*i.length);if(e>=i.length)return!1;const n=i[e];return s.apt(n),t.LSt(),!0},qYt:t=>!!t&&(!!t.PB()&&(t.LB().$dt(!0),t.LSt(),!0)),ZYt(t,s,i){if(!t)return!1;const e=t.LB(),n=e.AB(),r=this.kc.Jk().upt(),h=this.kc.tyt().Tvt();e.Vdt()?(TS.xh(bS,n),e.Jdt(),e.$dt(!1)):r?(TS.xh(bS,e.spt()),TS.wh(e.spt())):(TS.xh(bS,e.tpt()),TS.wh(e.tpt()));for(let t=0,n=bS.length;t<n;++t){const n=bS[t];TS.xor(n.lj().LJ(s,i),h)?e.Kdt(n):e.Xdt(n)}return t.LSt(),TS.xor(!!e.tpt().length,h)},KYt(t){if(!t)return!1;const s=t.P0();let i=null;const e=this.kc.bAt();for(let n=e.length-1;n>=0;--n){const r=e[n];if(s){if(r.BW().vxt(t)){i=r;break}}else if(r.BW()===t){i=r;break}}if(!i){const s=t.AB();s.length&&(i=s.at(-1))}return!!i&&(t.LB().apt(i),t.LSt(),!0)},XYt(t){return this.kc.bCt()?this.mYt(t):this.pYt(t)},$Yt(){return this.kc.bCt()?this.gYt():this.yYt()},tHt(t,s,i){return this.kc.bCt()?this.wYt(t,s,i):this.MYt(t,s,i)},Ud(t){return this.kc.bCt()?this.TYt(t):this.SYt(t)},sHt(t,s,i){return this.kc.bCt()?this.vYt(t,i):this.bYt(t,i)},iHt:t=>!!t&&t.HU(),eHt:t=>!!t&&t.iW(),nHt:t=>!!t&&t.$U(),rHt:t=>!!t&&!t.PB(),hHt:(t,s,i)=>!!t&&TS.compare(100*t.$A(),s,i),oHt(t){const s=this.kc.UF();return!!s&&s.w3(t)},cYt:()=>!0,aHt(){return this.rYt>0},uHt(t,s){const i=this.kc._Lt();return!!i&&!!s&&!!i.klt(t,s)}}}{let vS=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]},xS=function(t,s){return t[1]-s[1]};0;const CS=self.Gs,GS=[],IS=[],NS=CS.Qn(CS.Rect),ES=CS.Qn(CS.vo),DS=[];CS._j.Dj.krt={lHt(t,s){t.Ent(s)},cHt(t,s){t.Xi()&&"number"!=typeof s&&(s=parseFloat(s)),t.Ent(t.Yet()+s)},fHt(t,s){t.Xi()&&t.Ent(t.Yet()-s)},dHt(t,s){t.Ent(!!s)},pHt(t){t.Ent(!t.Yet())},mHt(t){t.Ent(t.Xmt())},yHt(t){this.kc.jk().Myt(t)},gHt(t,s,i,e,n,r){if(!t||!s)return;const h=this.kc.jB(t,s,i,e,n,r);if(!h)return;n&&s.zB(h);const o=this.kc.jk();o.BB(!0),h.UB(),o.BB(!1);const a=new Map;h.bLt(a,t,n);for(const[t,s]of a)t.LB().npt(s)},MHt(t,s,i,e,n,r){if(!t||!s)return;const h=this.kc.XQt(t);h&&CS._j.Dj.krt.gHt.call(this,h,s,i,e,n,r)},O0(t,s,i,e,n,r,h,o,a,u,l){if(!t)return;const c=this.kc.aj();let f=c;if(r){const t=this.kc.JF().Y5(r);if(!t)return;f=t}let d=null;if(("number"!=typeof h||h>=0)&&(d=f.cj(h),!d))return;let p=null;if(("number"!=typeof o||o>=0)&&(p=c.cj(o),!p))return;NS.set(s,i,e,n);const m=f.O0(t,NS,d,p,a,u,l);t.LB().ept(m),t.LSt()},wHt(){const t=this.imt;t.Xpt()&&t.Zpt().AY()},jgt(t,s){const i=this.kc.jk().Syt(t);i&&(0===s?i.jgt(!1):1===s?i.jgt(!0):i.jgt(!i.Fgt()))},SHt(t){this.kc.wF(t)},THt(t,s){if(s<0&&(s=0),!t)return;const i=t.LB().AB();for(const t of i)t.wF(s)},bHt(t){if(!t)return;const s=t.LB().AB();for(const t of s)t.oQ()},dh(t,s){if(t<0)return;const i=this.kc.jk().tgt();return s?i.oIt(t):i.aIt(t),!0},eF(t){return this.kc.jk().tgt().uIt(t),!0},vHt(){const t=this.kc.jk();return t.tgt().lIt(t.mgt()),!0},sF(t){this.kc.jk().sF(t)},async Gj(t,s,i,e,n,r){const h=this.kc.Cj();h&&(this.gj(),await h.Gj(0===t?"image/png":"image/jpeg",s/100,i,e,n,r),await this.kc.Ij(CS._j.Dj.Ej.Nj,null))},xHt(t,s){if(t<=0||s<=0)return;this.kc.zzt(t,s),this.kc.aj().l4();const i=this.kc.Cj();i&&("off"===i.Lzt()||this.kc.tJt(t,s),i.bD(i._H(),i.AH(),!0),this.kc.gj())},CHt(t){const s=this.kc.Cj();s&&"off"!==s.Lzt()&&(s.Yzt(0!==t?"high":"low"),s.bD(s._H(),s.AH(),!0))},uet(t){this.kc.oVt(t)},GHt(){this.kc.aVt()},IHt(t){this.kc.uVt(t)},NHt(t){this.kc.yGt(t)},EHt(t){},DHt(){for(const t of this.kc.JF().HF())t.N5()},_Ht(t){this.kc.nVt(0!==t)},AHt(t,s){this.kc.PF(1/t),this.kc.LF(1/s)},LHt(t,s){this.kc.LF(t),this.kc.PF(s)},OHt(t){this.kc.DF(["vsync","unlimited-tick","unlimited-frame"][t])},RHt(t,s){if(!t)return;const i=t.LB().AB(),e=GS,n=IS,r=this.kc.aj(),h=t.P0(),o=t.ibt();for(let t=0,r=i.length;t<r;++t){const r=i[t],a=r.lj();if(!a)continue;let u;u=h?r.Eht(s+r.BW().sbt(o)):r.Eht(s),e.push([a.cj().$P(),a.fj()]),n.push([r,u])}if(!e.length)return;e.sort(vS),n.sort(xS);let a=!1;for(let t=0,s=e.length;t<s;++t){const s=n[t][0],i=r.dj(e[t][0]),h=e[t][1],o=i.pj();o[h]!==s&&(o[h]=s,s.lj().mj(i,!0),i.yj(s),a=!0)}a&&this.kc.gj(),CS.wh(GS),CS.wh(IS)},lz(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.kc.ak().lz(t,s)},PHt(t){if(this.kc.TM())return;const s=this.kc.JF();s.ZF()||s.KF(t)},kHt(t){if(this.kc.TM())return;const s=this.kc.JF();if(s.ZF())return;const i=s.Y5(t);i&&s.KF(i)},FHt(t){if(this.kc.TM())return;const s=this.kc.JF();if(s.ZF())return;const i=s.HF(),e=i.indexOf(s.UF());if(t&&0===e)return;if(!t&&e===i.length-1)return;const n=i[e+(t?-1:1)];s.KF(n)},jHt(){if(this.kc.TM())return;const t=this.kc.JF();t.ZF()||(t.KF(t.UF()),this.kc.jk().xyt())},zHt(t,s){t&&t.VU(s)},BHt(t,s){t&&t.KU(s)},UHt(t,s){t&&t.tW(s)},WHt(t,s){t&&t.sL(s/100)},QHt(t,s){t&&t.eW(s)},JHt(t,s){t&&t.hW(s)},VHt(t,s){t&&t.uU(CS.Xn(+s))},YHt(t,s,i){t&&(t.IW(!0),t.cU(s),t.dU(i))},HHt(t){t&&t.IW(!1)},qHt(t,s,i){t&&t.g1(s/100,i/100)},ZHt(t,s){t&&t.qb(+s)},KHt(t,s){t&&t.yW(1===s)},XHt(t,s){if(!t)return;ES.Xo(s),ES.Zn();const i=t.GW();i.Qo(ES)||(i.Po(ES),this.gj())},$Ht(t,s){t&&t.wW(s)},tqt(t,s){t&&t.Ab(s)},sqt(t,s,i){if(!t)return;const e=t.eU().srt(i);if(!e)return;const n=1===s;e.EMt()!==n&&(e.akt(n),t.HV(),this.kc.gj())},iqt(t,s,i,e){if(!t)return;const n=t.eU(),r=n.srt(s);if(!r)return;i=Math.floor(i);const h=r.EG()._G(i);h&&("color"===h?(ES.Xo(e),e=ES):"percent"===h&&(e/=100),n.ZV(r.$P(),i,e)&&r.EMt()&&this.kc.gj())},eqt(t,s){t&&t.bW(s)},nqt(t){this.kc.aj().oU(+t)},rqt(t){this.kc.aj().uU(CS.Xn(+t))},hqt(t,s){const i=this.kc.aj(),e=i.eU().srt(s);if(!e)return;const n=1===t;e.EMt()!==n&&(e.akt(n),i.HV(),this.kc.gj())},oqt(t,s,i){const e=this.kc.aj().eU(),n=e.srt(t);if(!n)return;s=Math.floor(s);const r=n.EG()._G(s);r&&("color"===r?(ES.Xo(i),i=ES):"percent"===r&&(i/=100),e.ZV(n.$P(),s,i)&&n.EMt()&&this.kc.gj())},aqt(t,s){this.kc.aj().AU(t/100,s/100)},uqt(t){const s=this.kc.aj();0===t?s.RU():s.PU()},lqt(t){this.kc.aj().cU(t)},cqt(t){this.kc.aj().dU(t)},fqt(t,s){const i=this.kc.aj();i.cU(t),i.dU(s)},dqt(t){if(!t)return;const s=t.lCt();if(!s)return;const i=s.lj();if(!i)return;const e=this.kc.aj();e.cU(i.Wb()),e.dU(i.Vb())},xU(t,s,i){const e=this.kc.aj();try{e.xU(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},GU(t,s,i){if(!t)return;const e=this.kc.aj();try{e.GU(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}},NU(t){t&&this.kc.aj().NU(t)},DU(){this.kc.aj().DU()},async pqt(t){const s=this.kc.UF();if(!s||!t||this.kc.TM())return;const i=t.P0()?t.$B():[t];await this.lYt(s,i)},async mqt(t){await CS._j.Dj.krt.pqt.call(this,this.kc.XQt(t))},yqt(t){const s=this.kc.UF();if(!s||!t)return;const i=t.P0()?t.$B():[t];this.fYt(s,i)},gqt(t){CS._j.Dj.krt.yqt.call(this,this.kc.XQt(t))},Mqt(){const t=this.kc.UF();if(!t)return;const s=t._3();this.fYt(t,s)},async wqt(t){const s=this.kc.UF();t&&s&&!this.kc.TM()&&await this.lYt(s,t.N3())},async Sqt(t){const s=this.kc.UF(),i=this.kc.JF().Y5(t);i&&s&&!this.kc.TM()&&await this.lYt(s,i.N3())},tF(t){const s=this.Udt.Kk();if(s)switch(s.$k()){case 1:"number"==typeof t&&s.tF(t);break;case 2:"string"==typeof t&&s.tF(t);break;case 3:s.tF(t)}},Tqt(t,s,i){const e=this.xYt(t.toLowerCase(),!0),n=e.GYt,r=s.toLowerCase();n.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`);const h=CS.jh(n.values())||e.CYt;h&&0!==h.qk()!=(0!==i.qk())?console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`):n.set(r,i)},bqt(t,s){const i=this.xYt(t.toLowerCase(),!0);i.CYt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`);const e=CS.jh(i.GYt.values())||i.CYt;e&&0!==e.qk()!=(0!==s.qk())?console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`):i.CYt=s},vqt(t,s,i){const e=this.kc,n=e.bCt()?DS:null;i=Math.floor(i);const r=this.xYt(t.toLowerCase(),!1);if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),n;let h=r.GYt.get(s.toLowerCase());if(!h){if(!r.CYt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),n;h=r.CYt,i=0}if(!h.Cl())return n;if(0!==h.qk())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),n;const o=e.jk(),a=o.Jk(),u=a.Qk(),l=u.length>0;l&&(h.Hk()?o.Oq(u):o.Xyt(u));const c=[],f=o.Jgt(a);if(f){const t=f.Ygt();for(let s=i,e=t.length;s<e;++s)c.push(t[s].Yet())}const d=h.Ygt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].Xmt());return e.bCt()?this.NYt(o,h,c,l,u):this.IYt(o,h,c,l,u)}}}{const _S=self.Gs;_S._j.Dj.Frt={xqt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t)&&(t=0)),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t)&&(t=0)),t},N:t=>t.toString(),Pt:t=>"string"==typeof t?t.length:0,random(t,s){return void 0===s?this.kc.BF()*t:this.kc.BF()*(s-t)+t},zTt(...t){return t[Math.floor(this.kc.BF()*t.length)]},Cqt:(t,...s)=>("number"!=typeof t&&(t=0),s[t=_S.Zn(Math.floor(t),0,s.length-1)]),Gqt:()=>Math.PI,Iqt:()=>1/0,sqrt:t=>Math.sqrt(t),abs:t=>Math.abs(t),round:t=>Math.round(t),Nqt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor:t=>Math.floor(t),ceil:t=>Math.ceil(t),sign:t=>Math.sign(t),sin:t=>Math.sin(_S.Xn(t)),cos:t=>Math.cos(_S.Xn(t)),tan:t=>Math.tan(_S.Xn(t)),asin:t=>_S.$n(Math.asin(t)),acos:t=>_S.$n(Math.acos(t)),atan:t=>_S.$n(Math.atan(t)),exp:t=>Math.exp(t),Ut:t=>Math.log(t),log10:t=>Math.log10(t),max(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s<e&&(s=e)}return s},min(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s>e&&(s=e)}return s},Zn:(t,s,i)=>_S.Zn(t,s,i),St:(t,s,i,e)=>_S.ir(t,s,i,e),angle:(t,s,i,e)=>_S.$n(_S.nr(t,s,i,e)),Gt:(t,s,i)=>_S.Gt(t,s,i),pr:(t,s,i)=>_S.pr(t,s,i),yr:(t,s,i,e)=>_S.yr(t,s,i,e),gr:(t,s,i,e,n)=>_S.gr(t,s,i,e,n),Mr:(t,s,i)=>_S.Mr(t,s,i),Eqt:(t,s)=>_S.$n(_S.rr(_S.Xn(t),_S.Xn(s))),Dqt:(t,s,i)=>_S.$n(_S.ur(_S.Xn(t),_S.Xn(s),i)),_qt:(t,s,i)=>_S.$n(_S.hr(_S.Xn(t),_S.Xn(s),_S.Xn(i))),Aqt:(t,s,i)=>(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s,Lqt:(t,s)=>(t|=0)^1<<s,Oqt:(t,s)=>(t|=0)&1<<(s|=0)?1:0,Rqt:()=>"\n",Pqt:t=>"string"==typeof t?t.toUpperCase():"",kqt:t=>"string"==typeof t?t.toLowerCase():"",left:(t,s)=>"string"==typeof t?t.substr(0,s):"",mid:(t,s,i)=>"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i),right:(t,s)=>"string"==typeof t?t.substr(Math.max(t.length-s,0)):"",trim:t=>"string"==typeof t?t.trim():"",Fqt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},jqt:(t,s)=>"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0,find:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(_S.Zi(s),"i")):-1,zqt:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(_S.Zi(s),"")):-1,replace:(t,s,i)=>"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(_S.Zi(s),"gi"),i):"string"==typeof t?t:"",Bqt(t,...s){let i=t;for(let t=0,e=s.length;t<e;++t)i=i.replaceAll(`{${t}}`,s[t].toString());return i},Uqt(t,s,i){const e=this.aYt(s,i);return t?t.search(e):-1},Wqt(t,s,i,e){const n=this.aYt(s,i);return t?t.replace(n,e):""},Qqt(t,s,i){const e=this.uYt(t.toString(),s,i);return e?e.length:0},Jqt(t,s,i,e){e=Math.floor(e);const n=this.uYt(t.toString(),s,i);return!n||e<0||e>=n.length?"":n[e]},Vqt(t,s){let i=t<0?"-":"";t<0&&(t=-t);const e=s-t.toString().length;return i+="0".repeat(Math.max(e,0)),i+t.toString()},Yqt:t=>encodeURIComponent(t),Hqt:t=>decodeURIComponent(t),oF(){return this.kc.G8()},qqt(){return this.kc.I8()},Zqt(){return this.kc.MF()},Kqt(){return(Date.now()-this.kc.HJt())/1e3},Xqt:()=>Date.now(),time(){return this.kc.fF()},$qt(){return this.kc.pF()},tZt(){return this.kc.KJt()},SF(){return this.kc.TF()},sZt(){return this.kc.CF()},iZt(){return this.kc.IF()},eZt(){return this.kc.Cj().Pz()},nZt(){return this.kc.Cj().Fz()},rZt(){return this.kc.Ck()},hZt(){return this.kc.Ik()},oZt(){return this.kc.Ck()},aZt(){return this.kc.Ik()},uZt(){return this.kc.aj().fU()},lZt(){return this.kc.aj().pU()},cZt(){return this.kc.aj().Nc()},fZt(){return this.kc.aj().aU()},dZt(){return _S.$n(this.kc.aj().lU())},pZt(){return this.kc.aj().Vy()},mZt(){return this.kc.aj().ig()},yZt(){return 100*this.kc.aj().a1()},gZt(){return 100*this.kc.aj().u1()},MZt(t){const s=this.kc.aj().cj(t);return s?s.o1().Ka():0},wZt(t){const s=this.kc.aj().cj(t);return s?s.o1().Xa():0},SZt(t){const s=this.kc.aj().cj(t);return s?s.o1().$a():0},TZt(t){const s=this.kc.aj().cj(t);return s?s.o1().tu():0},bZt(t){const s=this.kc.aj().cj(t);return s?s.o1().width():0},vZt(t){const s=this.kc.aj().cj(t);return s?s.o1().height():0},xZt(t){const s=this.kc.aj().cj(t);if(s){const t=s.o1();return(t.Ka()+t.$a())/2}return 0},CZt(t){const s=this.kc.aj().cj(t);if(s){const t=s.o1();return(t.Xa()+t.tu())/2}return 0},GZt(t,s,i){const e=this.kc.aj().cj(t);return e?e._W(s,i)[0]:0},IZt(t,s,i){const e=this.kc.aj().cj(t);return e?e._W(s,i)[1]:0},NZt(t,s,i){const e=this.kc.aj().cj(t);return e?e.LW(s,i)[0]:0},EZt(t,s,i){const e=this.kc.aj().cj(t);return e?e.LW(s,i)[1]:0},DZt(t,s,i,e){const n=this.kc.aj(),r=n.cj(t),h=n.cj(s);if(!r||!h||r===h)return i;const[o,a]=r.LW(i,e);return h._W(o,a)[0]},_Zt(t,s,i,e){const n=this.kc.aj(),r=n.cj(t),h=n.cj(s);if(!r||!h||r===h)return e;const[o,a]=r.LW(i,e);return h._W(o,a)[1]},AZt(t){const s=this.kc.aj().cj(t);return s?s.nW():0},LZt(t){const s=this.kc.aj().cj(t);return s?_S.$n(s.aW()):0},OZt(t){const s=this.kc.aj().cj(t);return s?100*s.$A():0},RZt(t){const s=this.kc.aj().cj(t);return s?s.oW():0},PZt(t){const s=this.kc.aj().cj(t);return s?s.fU():0},kZt(t){const s=this.kc.aj().cj(t);return s?s.pU():0},FZt(t){const s=this.kc.aj().cj(t);return s?100*s.cW():0},jZt(t){const s=this.kc.aj().cj(t);return s?100*s.pW():0},zZt(t){const s=this.kc.aj().cj(t);return s?s.Hb():0},BZt(t){const s=this.kc.aj().cj(t);return s?s.$P():-1},UZt(){const t=this.kc.Cj();return t?t.MBt():""},WZt(t){const s=this.imt;if(!s.Xpt())return 0;if(t){const i=s.tmt(t);return i?i.$P():0}return s.Zpt().$P()},QZt(){return this.kc.lVt()},JZt(t,s,...i){const e=this.xYt(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let n=e.GYt.get(s.toLowerCase());if(!n){if(!e.CYt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;n=e.CYt}const r=n.qk(),h=n.Bk();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!n.Cl())return h;const o=this.kc.jk(),a=o.Jk().Qk(),u=a.length>0;u&&(n.Hk()?o.Oq(a):o.Xyt(a));const l=n.Ygt();for(let t=i.length,s=l.length;t<s;++t)i.push(l[t].Xmt());const c=n.Wk(),f=c.Yk(c.Qk(),n.Hk(),r,h,...i);return u&&o.Pq(a),f},VZt(){return this.kc.nk().FF()},YZt(){return this.ZK()},DI(){return this.kc.tBt()?"webgpu":"webgl"},HZt(){return this.kc.tBt()?this.kc.tBt().sBt():this.kc.$zt().hO()},qZt(){let t=this.kc.lb().jT();return Math.round(100*t/1048576)/100},ZZt:(t,s,i)=>_S.Gr(t,s,i),KZt:(t,s,i)=>_S.Nr(t/100,s/100,i/100),XZt:(t,s,i,e)=>_S.Ir(t/100,s/100,i/100,e/100),$Zt:(t,s,i)=>_S.Nr(t/255,s/255,i/255),tKt:(t,s,i,e)=>_S.Ir(t/255,s/255,i/255,e/255),sKt(){return this.kc.fk()},iKt(){return this.kc.pk()},eKt(){return this.kc.yk()},nKt(){return this.kc.Mk()},rKt(){return this.kc.Jk().g3().Nc()},hKt(){return this.kc.Jk().Wwt()}}}{const AS=self.Gs;AS._j.nrt=class extends AS.yIt{constructor(t){super(t)}Jn(){super.Jn()}}}{const LS=self.Gs,OS=self.ks,RS=[];LS._j.nrt.A_t=class extends LS.tNt{constructor(t){super(t),this.C_t=t.lAt()}Jn(){LS.wh(this.C_t),super.Jn()}jIt(){for(const t of this.C_t)t.GDt(this.kc)}L3(t){const s={Wv:this.kc.Nk()};return Promise.all(this.C_t.map((i=>i.IDt(t,s))))}z3(){for(const t of this.C_t)t.NDt()}P3(){this.oKt()}oKt(){for(const t of this.Odt._B())t.DV().aKt()}Avt(t){LS._j.nrt.HGt(this,t)}Mxt(t){RS.push({nNt:null,uKt:!1,vB:[]})}lKt(t,s,i){const e=RS.at(-1);e.nNt=t,e.uKt=i,e.vB.push(s)}wxt(t){const s=RS.pop(),i=s.nNt,e=s.uKt;if(!i)return;const n=new Map;for(const t of s.vB)t.bLt(n,i,e);for(const[t,s]of n)t.LB().npt(s)}cKt(t){const s=this.BW().mAt(t),i=this.Fj();return s.EDt(0).mY().MZ(i.lb(),{Wv:i.Nk()}).then((()=>this.oKt())),s}fKt(t){for(const s of this.Odt._B())s.DV().dKt(t);this.BW().yAt(t)}pKt(t,s){const i=this.Odt.dAt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.LDt(s);e<0&&(e+=i.oY()+1);const n=LS.vDt.CDt(this.Fj());i.DDt(n,e);const r=this.Fj();n.mY().MZ(r.lb(),{Wv:r.Nk()}).then((()=>this.oKt()));for(const t of this.Odt._B())t.DV().mKt();return n}yKt(t,s){const i=this.Odt.dAt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.oY())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.LDt(s);e<0&&(e+=i.oY()),i._Dt(e);for(const t of this.Odt._B())t.DV().mKt()}zIt(){return self.gKt}};const PS=new WeakMap;self.gKt=class extends self.OB{constructor(t){super(t),PS.set(this,t.gxt())}MKt(t){OS.ue(t);const s=PS.get(this).BW().dAt(t);return s?s.ODt():null}wKt(){return PS.get(this).BW().fAt().map((t=>t.ODt()))}SKt(t){return OS.ue(t),PS.get(this).cKt(t).ODt()}TKt(t){OS.ue(t),PS.get(this).fKt(t)}bKt(t,s){if(OS.ue(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return PS.get(this).pKt(t,s).lY()}vKt(t,s){if(OS.ue(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");PS.get(this).yKt(t,s)}}}{const kS=self.Gs,FS=self.ks,jS=0,zS=1,BS=2,US=3,WS=kS.Qn(kS.Rect),QS=kS.Qn(kS.Iu),JS=kS.Qn(kS.Ia),VS=1,YS=2,HS=4;kS._j.nrt.Instance=class extends kS.LNt{constructor(t,s){super(t);let i=!0,e="",n=0,r=!0;s&&(i=!!s[jS],e=s[zS],n=s[BS],r=s[US]),this.xKt=this.Odt.dAt(e)||this.Odt.lAt()[0],this.CKt=kS.Zn(n,0,this.xKt.oY()-1),this.GKt=this.xKt.EDt(this.CKt);const h=this.GKt.mY();this.IKt=h.lC(),this.NKt=h.$D(),this.EKt=h.JNt(),this.kNt(),t.SLt(YS,!0),t.SLt(VS,this.xKt.XV()>=0),this.DKt=Math.abs(this.xKt.XV()),this._Kt=this.xKt.nY(),this.AKt=kS.Qn(kS.Xf),this.LKt=0,this.OKt=0,this.RKt="",this.PKt=-1,this.kKt="",this.FKt=0;const o=this.lj();this.jKt=o.yJ(),o.VU(i),o.AJ(r),o.nJ(this.GKt.eJ()),o.oJ(this.GKt.hJ()),o.vPt(this.GKt.CY()),o.XQ(),1===this.Odt.cAt()&&1===this.Odt.lAt()[0].oY()||0===this.DKt||this.xNt()}Jn(){this.xKt=null,this.GKt=null,this.IKt=null,this.AKt=null,super.Jn()}BNt(){return this.GKt.mY()}Rit(){return!0}CX(){this.IKt=null}zNt(){this.aKt()}Av(t){const s=this.IKt;if(null===s)return;t.nL(s);const i=this.lj();i.SV()?this.zKt(i,t):this.BKt(i,t)}BKt(t,s){let i=this.jKt;this.kc.Dk()&&(i=t.yPt(i)),s.pL(i,this.EKt)}zKt(t,s){const i=t.OPt();if(t.PPt()){t.dJ(WS,QS,!1);let s=QS;this.kc.Dk()&&(s=t.yPt(s)),i._v(t.TV(),s,this.EKt),t.RPt(!1)}i.Av(s)}UKt(){return this.AKt.Js()}WKt(){return this.fi.TLt(YS)}QKt(t){this.fi.SLt(YS,t)}JKt(){return this.fi.TLt(VS)}VKt(t){this.fi.SLt(VS,t)}YKt(){return this.fi.TLt(HS)}HKt(t){this.fi.SLt(HS,t)}N8(){this.kKt&&this.qKt(),this.PKt>=0&&this.ZKt();const t=this.DKt;if(!this.WKt()||0===t)return void this.aNt();const s=this.kc.aF(this.fi);this.AKt.Fl(s);const i=this.UKt(),e=this.GKt,n=e.yY()/t;if(i<this.LKt+n)return;const r=this.xKt,h=this._Kt,o=r.oY(),a=r.iY(),u=r.tY(),l=r.hY();this.JKt()?this.CKt++:this.CKt--,this.LKt+=n,this.CKt>=o&&(l?(this.VKt(!1),this.CKt=o-2):u?this.CKt=h:(this.OKt++,this.OKt>=a?this.KKt(!1):this.CKt=h)),this.CKt<0&&(l?(this.CKt=1,this.VKt(!0),u||(this.OKt++,this.OKt>=a&&this.KKt(!0))):u?this.CKt=h:(this.OKt++,this.OKt>=a?this.KKt(!0):this.CKt=h)),this.CKt=kS.Zn(this.CKt,0,o-1);const c=r.EDt(this.CKt);i>this.LKt+c.yY()/t&&(this.LKt=i),this.XKt(e,c)}KKt(t){this.CKt=t?0:this.xKt.oY()-1,this.QKt(!1),this.RKt=this.xKt.Nc(),this.HKt(!0),this.eNt("animationend",!1,{animationName:this.RKt}),this.vQ(kS._j.nrt.Ej.$Kt),this.vQ(kS._j.nrt.Ej.tXt),this.HKt(!1),this.OKt=0}XKt(t,s,i){if(t===s)return;const e=this.lj(),n=t.mY(),r=s.mY(),h=n.Vy(),o=n.ig(),a=r.Vy(),u=r.ig();i&&i.rrt?i.rrt(e,h,o,a,u):(h!==a&&e.$y(e.Vy()*(a/h)),o!==u&&e.Yy(e.ig()*(u/o))),e.nJ(s.eJ()),e.oJ(s.hJ()),e.vPt(s.CY()),e.XQ(),this.GKt=s,this.IKt=r.lC(),this.NKt=r.$D(),this.EKt=r.JNt();const l=this.iH().Xnt();for(let i=0,e=l.length;i<e;++i)l[i].DEt(t,s);this.eNt("framechange",!1,{animationName:this.xKt.Nc(),sXt:this.CKt}),this.vQ(kS._j.nrt.Ej.iXt),this.kc.gj()}eXt(t){this.QKt(!0),this.LKt=this.UKt(),1===t&&0!==this.CKt&&(this.PKt=0,this.YKt()||this.ZKt()),this.xNt()}nXt(t,s,i){this.kKt=t,this.FKt=s,this.xNt(),!i&&this.YKt()||this.qKt()}rXt(){return this.xKt}hXt(){return this.kKt?this.kKt:this.xKt.Nc()}dKt(t){kS.Ke(t,this.hXt())&&this.nXt(this.Odt.gAt().Nc(),1,!0)}oXt(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.Odt.dAt(this.hXt());if(!s)return;if(-1===(t=s.ADt(t)))return}isFinite(t)&&(this.PKt=t,this.YKt()||this.ZKt())}mKt(){if(this.kKt||-1!==this.PKt)return;const t=this.GKt,s=this.xKt.EDt(kS.Zn(this.CKt,0,this.xKt.oY()-1));t!==s&&this.XKt(t,s),this.xKt.oY()>1&&this.DKt>0&&this.xNt()}aXt(){return this.CKt}uXt(){return this.GKt.EY()}lXt(t){this.DKt=Math.abs(t),this.VKt(t>=0),this.DKt>0&&this.xNt()}cXt(){return this.JKt()?this.DKt:-this.DKt}fXt(t){"string"==typeof t&&-1===(t=this.xKt.ADt(t))||(t=kS.Zn(Math.floor(t),0,this.xKt.oY()-1),this._Kt=t)}dXt(){return this._Kt}qKt(t){const s=this.GKt,i=this.Odt.dAt(this.kKt);if(this.kKt="",!i)return;if(i===this.xKt&&this.WKt())return;this.xKt=i,this.VKt(i.XV()>=0),this.DKt=Math.abs(i.XV()),this._Kt=i.nY(),this.CKt=kS.Zn(this.CKt,0,this.xKt.oY()-1),1===this.FKt&&(this.CKt=0),this.QKt(!0),this.LKt=this.UKt();const e=this.xKt.EDt(this.CKt);this.XKt(s,e,t)}ZKt(t){const s=this.GKt,i=this.CKt;if(this.CKt=kS.Zn(Math.floor(this.PKt),0,this.xKt.oY()-1),this.PKt=-1,!t&&i===this.CKt)return;const e=this.xKt.EDt(this.CKt);this.XKt(s,e),this.LKt=this.UKt()}aKt(){const t=this.GKt.mY();this.IKt=t.lC(),this.NKt=t.$D(),this.EKt=t.JNt(),this.lj().RPt(!0)}lC(){return this.IKt}$D(){return this.NKt}JNt(){return this.EKt}MY(){return this.GKt.MY()}Lxt(t){const s=this.GKt,i=this.lj();let e=null;if("string"==typeof t)e=s.vY(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.bY(t-1)}let n=i.cJ();if(!e)return[i.Wb(),i.Vb(),n];if(JS.m(e.JDt()),i.SV()){const[t,s,e]=i.TV().Fv(JS.Aa(),JS.Oa());JS.set(t,s),n+=e}return JS.offset(-s.eJ(),-s.hJ()),JS.scale(i.Vy(),i.ig()),JS.rotate(i.lU()),JS.offset(i.Wb(),i.Vb()),[JS.Aa(),JS.Oa(),n]}pXt(){return this.lj().NPt().dl()}mXt(t){t=Math.floor(t);const s=this.lj(),i=s.NPt(),e=i.dl();if(t===e&&(t=0),t<0||t>=e)return[0,0];const n=i.fl();return[n[2*t+0]+s.Wb(),n[2*t+1]+s.Vb()]}NNt(){const t=kS._j.nrt.krt,s="plugins.sprite.debugger.animation-properties";return[{title:s+".title",properties:[{name:s+".current-animation",value:this.xKt.Nc(),yXt:s=>this.DNt(t.gXt,s,0)},{name:s+".current-frame",value:this.CKt,yXt:s=>this.DNt(t.MXt,s)},{name:s+".is-playing",value:this.WKt(),yXt:s=>s?this.DNt(t.wXt,0):this.DNt(t.SXt)},{name:s+".speed",value:this.DKt,yXt:s=>this.DNt(t.TXt,s)},{name:s+".repeats",value:this.OKt,yXt:t=>this.OKt=t}]}]}ev(){const t={a:this.xKt.W0()};0!==this.LKt&&(t.fs=this.LKt);const s=this.UKt();0!==s&&(t.at=s),0!==this.CKt&&(t.f=this.CKt),0!==this.DKt&&(t.cas=this.DKt),1!==this.OKt&&(t.ar=this.OKt),0!==this._Kt&&(t.rt=this._Kt),this.WKt()||(t.ap=this.WKt()),this.JKt()||(t.af=this.JKt());const i=this.lj();return i._J()&&(t.ce=i._J()),t}nv(t){const s=this.BW().pAt(t.a);s&&(this.xKt=s),this.LKt=t.hasOwnProperty("fs")?t.fs:0,this.AKt.Set(t.hasOwnProperty("at")?t.at:0);const i=t.hasOwnProperty("f")?t.f:0;this.CKt=kS.Zn(i,0,this.xKt.oY()-1),this.DKt=t.hasOwnProperty("cas")?t.cas:0,this.OKt=t.hasOwnProperty("ar")?t.ar:1;const e=t.hasOwnProperty("rt")?t.rt:0;this._Kt=kS.Zn(e,0,this.xKt.oY()-1),this.QKt(!t.hasOwnProperty("ap")||!!t.ap),this.VKt(!t.hasOwnProperty("af")||!!t.af);const n=this.xKt.EDt(this.CKt);this.GKt=n,this.aKt();const r=this.lj();r.nJ(n.eJ()),r.oJ(n.hJ()),r.vPt(n.CY()),r.AJ(!!t.ce),this.WKt()&&this.xNt()}Sht(t){const s=this.lj();switch(t){case US:return s._J();case BS:return kS.Zn(this.CKt,0,this.xKt.oY()-1);case zS:return this.xKt.Nc()}}Ght(t,s,i){const e=this.lj();switch(t){case US:e.AJ(!!s);break;case BS:{this.QKt(!1);const t=this.xKt.oY()-1,e=s=kS.Zn(s,0,t),n=this.xKt.EDt(this.CKt),r=this.xKt.EDt(e);this.XKt(n,r,i),this.CKt=kS.Zn(e,0,t);break}case zS:this.kKt=s,this.qKt(i),this.xKt.oY()>1&&this.xKt.XV()>0?this.xNt():this.aNt()}}zIt(){return self.bXt}};const qS=new WeakMap,ZS=new Map([["current-frame",0],["beginning",1]]);self.bXt=class extends self.CV{constructor(){super(),qS.set(this,self.zW.QW().DV())}gY(){return qS.get(this).MY()}wY(t){return this.SY(t)[0]}TY(t){return this.SY(t)[1]}vXt(t){return this.SY(t)[2]}SY(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return qS.get(this).Lxt(t)}xY(){return qS.get(this).pXt()}GY(t){return FS.re(t),qS.get(this).mXt(t)[0]}NY(t){return FS.re(t),qS.get(this).mXt(t)[1]}IY(t){return FS.re(t),qS.get(this).mXt(t)}xXt(){qS.get(this).QKt(!1)}CXt(t="current-frame"){FS.ue(t);const s=ZS.get(t);if(void 0===s)throw new Error("invalid mode");qS.get(this).eXt(s)}GXt(t,s="beginning"){FS.ue(t),FS.ue(s);const i=ZS.get(s);if(void 0===i)throw new Error("invalid mode");const e=qS.get(this);if(!e.BW().dAt(t))throw new Error(`animation name "${t}" does not exist`);e.nXt(t,i)}MKt(t){FS.ue(t);const s=qS.get(this).BW().dAt(t);return s?s.ODt():null}get animation(){return qS.get(this).rXt().ODt()}get animationName(){return qS.get(this).hXt()}set sXt(t){FS.re(t),qS.get(this).oXt(t)}get sXt(){return qS.get(this).aXt()}set IXt(t){FS.ue(t),qS.get(this).oXt(t)}get IXt(){return qS.get(this).uXt()}set NXt(t){FS.re(t),qS.get(this).lXt(t)}get NXt(){return qS.get(this).cXt()}set EXt(t){FS.re(t),qS.get(this).fXt(t)}get EXt(){return qS.get(this).dXt()}get imageWidth(){return qS.get(this).BNt().Vy()}get imageHeight(){return qS.get(this).BNt().ig()}DXt(){const t=qS.get(this).BNt();return[t.Vy(),t.ig()]}async _Xt(t){FS.Fe(t,Blob);const s=qS.get(this),i=s.Fj(),e=s.BNt(),n=kS.Qn(kS.qEt);if(n.uDt(i,t),await n.MZ(i.lb(),{Wv:i.Nk()}),s.Vn())return void n.Jn();e.lDt(n);const r=s.gxt();r.oKt(),r.BW().gf().dispatchEvent(new kS.Event("animationframeimagechange")),i.gj()}AXt(t,s){FS.ue(s),qS.get(this).lj().fPt(!!t,s)}}}{const KS=self.Gs;KS._j.nrt.Ej={LXt(t){return KS.Ke(this.hXt(),t)},OXt(t,s){return KS.compare(this.CKt,t,s)},RXt(t,s){if("string"!=typeof s)return!1;const i=this.GKt.EY();return KS.compare(i.toLowerCase(),t,s.toLowerCase())},PXt(t,s){return KS.compare(this.cXt(),t,s)},tXt(t){return KS.Ke(this.RKt,t)},$Kt:()=>!0,iXt:()=>!0,kXt(){return this.lj().Vy()<0},FXt(){return this.lj().ig()<0},jXt:()=>!0,zXt:()=>!0,_J(){return this.lj()._J()}}}{const XS=self.Gs;XS._j.nrt.krt={BXt(t,s,i,e,n){if(!t||!s)return;const[r,h]=this.Lxt(i),o=this.kc.jB(t,s,r,h,e,n);if(!o)return;if(e&&s.zB(o),t.TB().sB()){const t=o.lj();t.uU(this.lj().lU()),t.XQ()}const a=this.kc.jk();a.BB(!0),o.UB(),a.BB(!1),t!==this.kc.iyt().BW()&&this.oNt.lKt(t,o,e)},SXt(){this.QKt(!1)},wXt(t){this.eXt(t)},gXt(t,s){this.nXt(t,s)},MXt(t){this.oXt(t)},TXt(t){this.lXt(t)},UXt(t){this.fXt(t)},WXt(t,s){try{0===t?this.gxt().cKt(s):this.gxt().fKt(s)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation: `,s)}},QXt(t,s,i){try{0===t?this.gxt().pKt(s,i):this.gxt().yKt(s,i)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation frame: `,s)}},JXt(t){const s=this.lj(),i=s.Vy(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.$y(e),s.XQ())},VXt(t){const s=this.lj(),i=s.ig(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Yy(e),s.XQ())},oU(t){const s=this.GKt.mY(),i=this.lj(),e=i.Vy()<0?-1:1,n=i.ig()<0?-1:1,r=s.Vy()*t*e,h=s.ig()*t*n;i.Vy()===r&&i.ig()===h||(i.bD(r,h),i.XQ())},async YXt(t,s,i){const e=this.GKt.mY(),n=this.lj(),r=this.kc,h=this.oNt;if(e.QK()===t)return 0===s&&(n.bD(e.Vy(),e.ig()),n.XQ()),void this.vQ(XS._j.nrt.Ej.jXt);const o=XS.Qn(XS.qEt);try{if(await o.aDt(r,t),!o.MX())throw new Error("image failed to load");if(this.Vn())return void o.Jn();await o.MZ(r.lb(),{Wv:r.Nk()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.Vn()||this.vQ(XS._j.nrt.Ej.zXt))}this.Vn()?o.Jn():(e.lDt(o),h.oKt(),h.BW().gf().dispatchEvent(new XS.Event("animationframeimagechange")),r.gj(),0===s&&(n.bD(e.Vy(),e.ig()),n.XQ()),await this.Ij(XS._j.nrt.Ej.jXt))},HXt(t){this.lj().AJ(t)},fPt(t,s){this.lj().fPt(0===t,s)},qXt(t){this.lj().Ab(t),this.kc.gj()}}}self.Gs._j.nrt.Frt={ZXt(){return this.aXt()},KXt(){return this.uXt()},XXt(){return this.xKt.oY()},$Xt(){return this.xKt.Nc()},t$t(){return this.cXt()},s$t(){return this.xKt.XV()},i$t(t){return this.Lxt(t)[0]},e$t(t){return this.Lxt(t)[1]},n$t(t){return this.Lxt(t)[2]},r$t(){return this.MY()},h$t(){return this.BNt().Vy()},o$t(){return this.BNt().ig()},a$t(t){return this.mXt(t)[0]},u$t(t){return this.mXt(t)[1]},l$t(){return this.pXt()}};{const $S=self.Gs;$S._j.Keyboard=class extends $S.yIt{constructor(t){super(t)}Jn(){super.Jn()}}}{let tT=function(){return iT.MB().DV()};0;const sT=self.Gs;self.ks,sT._j.Keyboard.A_t=class extends sT.tNt{constructor(t){super(t)}Jn(){super.Jn()}jIt(){}zIt(){return self.c$t}};let iT=null;self.c$t=class extends self.OB{constructor(t){super(t),iT=t,t.Fj().XF().keyboard=this}f$t(t){const s=tT();if("string"==typeof t)return s.d$t(t);if("number"==typeof t)return s.p$t(t);throw new TypeError("expected string or number")}}}{const eT=self.Gs,nT="keyboard";eT._j.Keyboard.Instance=class extends eT.rNt{constructor(t,s){super(t,nT),this.m$t=new Set,this.y$t=new Set,this.g$t=0,this.M$t="",this.w$t="",this.S$t=!1;const i=this.Fj().gf();this.qf=new eT.Vf(eT.zf.Jf(i,"keydown",(t=>this.T$t(t.data))),eT.zf.Jf(i,"keyup",(t=>this.b$t(t.data))),eT.zf.Jf(i,"window-blur",(()=>this.v$t())),eT.zf.Jf(i,"keyboard-blur",(()=>this.v$t()))),this.kc.vj(this.Ub())}Jn(){super.Jn()}async Ub(){const t=await this.MNt("init");this.S$t=t.isKeyboardLockSupported}T$t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.m$t.has(i)||(this.m$t.add(i),this.y$t.add(s),this.M$t=i,this.g$t=s,this.w$t=e,this.vQ(eT._j.Keyboard.Ej.x$t),this.vQ(eT._j.Keyboard.Ej.C$t),this.vQ(eT._j.Keyboard.Ej.G$t),this.vQ(eT._j.Keyboard.Ej.I$t))}b$t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.m$t.delete(i),this.y$t.delete(s),this.M$t=i,this.g$t=s,this.w$t=e,this.vQ(eT._j.Keyboard.Ej.N$t),this.vQ(eT._j.Keyboard.Ej.E$t),this.vQ(eT._j.Keyboard.Ej.D$t),this.vQ(eT._j.Keyboard.Ej._$t)}v$t(){for(const t of this.y$t)this.y$t.delete(t),this.g$t=t,this.vQ(eT._j.Keyboard.Ej.N$t),this.vQ(eT._j.Keyboard.Ej.E$t),this.vQ(eT._j.Keyboard.Ej._$t);this.m$t.clear()}d$t(t){return this.m$t.has(t)}p$t(t){return this.y$t.has(t)}ev(){return{tk:this.g$t,tkk:this.w$t}}nv(t){this.g$t=t.tk,t.hasOwnProperty("tkk")&&(this.w$t=t.tkk)}NNt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.g$t},{name:t+".debugger.last-key-string",value:eT._j.Keyboard.Frt.A$t(this.g$t)},{name:t+".debugger.last-typed-key",value:this.w$t}]}]}}}{const rT=self.Gs,hT=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];rT._j.Keyboard.Ej={d$t(t){return this.y$t.has(t)},C$t(t){return this.g$t===t},x$t:()=>!0,N$t:()=>!0,E$t(t){return this.g$t===t},p$t(t){return t=Math.floor(t),this.y$t.has(t)},I$t(t){return this.g$t===t},_$t(t){return this.g$t===t},G$t(t){const s=hT[t];return this.M$t===s},D$t(t){const s=hT[t];return this.M$t===s},L$t(t){const s=hT[t];return this.m$t.has(s)},O$t(){return this.S$t},R$t:()=>!0,P$t:()=>!0}}{const oT=self.Gs;oT._j.Keyboard.krt={async k$t(t){if(!this.S$t)return;let s=[];t&&(s=t.split(",")),(await this.MNt("lock-keyboard",{keysArr:s})).isOk?this.vQ(oT._j.Keyboard.Ej.R$t):this.vQ(oT._j.Keyboard.Ej.P$t)},F$t(){this.S$t&&this.MNt("unlock-keyboard")}}}{let aT=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"";case 38:return"";case 39:return"";case 40:return"";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};self.Gs._j.Keyboard.Frt={j$t(){return this.g$t},A$t:t=>aT(t),z$t(){return this.w$t}}}{let uT=function(t,s){return"number"==typeof t&&"number"==typeof s},lT=function(t,s){return uT(t,s)?t+s:t},cT=function(t,s){return uT(t,s)?t-s:t},fT=function(t,s){return uT(t,s)?t*s:t},dT=function(t,s){return uT(t,s)?t/s:t},pT=function(t,s){return uT(t,s)?t%s:t},mT=function(t,s){return uT(t,s)?Math.pow(t,s):t},yT=function(t,s){return uT(t,s)?t||s?1:0:t};0;self.Gs;self.fbt=[t=>{const s=t.bbt(0),i=t.bbt(1),e=t.bbt(2).UTt();return()=>s.HTt()+i.XTt()*e()},t=>{const s=t.bbt(0),i=t.bbt(1),e=t.bbt(2).UTt();return()=>s.XTt()+i.XTt()*e()},()=>-100,()=>100,()=>0,()=>300,t=>{const s=t.bbt(0).UTt(),i=t.bbt(1).UTt();return()=>s(i())},()=>"",t=>{const s=t.bbt(0).UTt();return()=>s(1)},()=>.5,t=>{const s=t.bbt(0);return()=>s.HTt()},t=>{const s=t.bbt(0);return()=>1.1*s.XTt()},()=>-200,()=>200,()=>2,()=>50,()=>-50,t=>{const s=t.bbt(0);return()=>s.XTt()-1}]}var Gt=self.Gs;self.GQt=function(){return[Gt._j.nrt,Gt._j.Keyboard,Gt._j.Dj.Ej.EYt,Gt._j.nrt.krt.Dxt,Gt._j.nrt.Frt.NGt,Gt._j.Dj.Frt.oF,Gt._j.nrt.Frt.EGt,Gt._j.Dj.krt.dqt,Gt._j.nrt.krt.cGt,Gt._j.Keyboard.Ej.d$t,Gt._j.nrt.krt.JXt,Gt._j.Dj.Ej.c5,Gt._j.Dj.Ej.XYt,Gt._j.Dj.krt.gHt,Gt._j.Dj.Frt.random,Gt._j.Dj.Frt.pZt,Gt._j.Dj.Frt.mZt,Gt._j.nrt.krt.hCt,Gt._j.Dj.Ej.PYt,Gt._j.Keyboard.Ej.C$t,Gt._j.Dj.krt.dh,Gt._j.nrt.krt.aGt,Gt._j.Dj.Ej.Ud,Gt._j.Dj.Ej.bwt,Gt._j.nrt.Ej.vCt,Gt._j.nrt.Ej.XCt,Gt._j.Dj.Ej._Yt]},self.HQt=[{B$t:0},{U$t:0},{W$t:0},{Keyboard:0},{Q$t:0},{J$t:0},{V$t:0},{Y$t:0},{H$t:0},{q$t:0},{Z$t:0}],self.K$t={W$t:class extends self.bXt{},Keyboard:class extends self.zW{},Q$t:class extends self.bXt{},Y$t:class extends self.bXt{},q$t:class extends self.bXt{},Z$t:class extends self.bXt{}};
/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.4.1

Copyright (c) 2015-2021, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/