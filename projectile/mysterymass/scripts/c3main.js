// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__commonJS=(t,e)=>function(){return e||(0,t[__getOwnPropNames(t)[0]])((e={exports:{}}).exports,e),e.exports},__copyProps=(e,i,s,r)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let t of __getOwnPropNames(i))__hasOwnProp.call(e,t)||t===s||__defProp(e,t,{get:()=>i[t],enumerable:!(r=__getOwnPropDesc(i,t))||r.enumerable});return e},__toESM=(t,e,i)=>(i=null!=t?__create(__getProtoOf(t)):{},__copyProps(!e&&t&&t.__esModule?i:__defProp(i,"default",{value:t,enumerable:!0}),t)),require_c3runtime=__commonJS({"file-map:scripts/c3runtime.js"(exports,module){{let setMatrixArrayType2=function(t){ARRAY_TYPE=t},toRadian2=function(t){return t*degree},equals$92=function(t,e){return Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$82=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},clone$82=function(t){var e=new ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},copy$82=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},identity$52=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},fromValues$82=function(t,e,i,s){var r=new ARRAY_TYPE(4);return r[0]=t,r[1]=e,r[2]=i,r[3]=s,r},set$82=function(t,e,i,s,r){return t[0]=e,t[1]=i,t[2]=s,t[3]=r,t},transpose$22=function(t,e){var i;return t===e?(i=e[1],t[1]=e[2],t[2]=i):(t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3]),t},invert$52=function(t,e){var i=e[0],s=e[1],r=e[2],e=e[3],h=i*e-r*s;return h?(t[0]=e*(h=1/h),t[1]=-s*h,t[2]=-r*h,t[3]=i*h,t):null},adjoint$22=function(t,e){var i=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=i,t},determinant$32=function(t){return t[0]*t[3]-t[2]*t[1]},multiply$82=function(t,e,i){var s=e[0],r=e[1],h=e[2],e=e[3],n=i[0],a=i[1],o=i[2],i=i[3];return t[0]=s*n+h*a,t[1]=r*n+e*a,t[2]=s*o+h*i,t[3]=r*o+e*i,t},rotate$42=function(t,e,i){var s=e[0],r=e[1],h=e[2],e=e[3],n=Math.sin(i),i=Math.cos(i);return t[0]=s*i+h*n,t[1]=r*i+e*n,t[2]=s*-n+h*i,t[3]=r*-n+e*i,t},scale$82=function(t,e,i){var s=e[0],r=e[1],h=e[2],e=e[3],n=i[0],i=i[1];return t[0]=s*n,t[1]=r*n,t[2]=h*i,t[3]=e*i,t},fromRotation$42=function(t,e){var i=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t},fromScaling$32=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},str$82=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},frob$32=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},LDU2=function(t,e,i,s){return t[2]=s[2]/s[0],i[0]=s[0],i[1]=s[1],i[3]=s[3]-t[2]*i[1],[t,e,i]},add$82=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t},subtract$62=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t},exactEquals$82=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},equals$82=function(t,e){var i=t[0],s=t[1],r=t[2],t=t[3],h=e[0],n=e[1],a=e[2],e=e[3];return Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-n)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(n))&&Math.abs(r-a)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},multiplyScalar$32=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},multiplyScalarAndAdd$32=function(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t},create$72=function(){var t=new ARRAY_TYPE(6);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},clone$72=function(t){var e=new ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},copy$72=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},identity$42=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},fromValues$72=function(t,e,i,s,r,h){var n=new ARRAY_TYPE(6);return n[0]=t,n[1]=e,n[2]=i,n[3]=s,n[4]=r,n[5]=h,n},set$72=function(t,e,i,s,r,h,n){return t[0]=e,t[1]=i,t[2]=s,t[3]=r,t[4]=h,t[5]=n,t},invert$42=function(t,e){var i=e[0],s=e[1],r=e[2],h=e[3],n=e[4],e=e[5],a=i*h-s*r;return a?(t[0]=h*(a=1/a),t[1]=-s*a,t[2]=-r*a,t[3]=i*a,t[4]=(r*e-h*n)*a,t[5]=(s*n-i*e)*a,t):null},determinant$22=function(t){return t[0]*t[3]-t[1]*t[2]},multiply$72=function(t,e,i){var s=e[0],r=e[1],h=e[2],n=e[3],a=e[4],e=e[5],o=i[0],l=i[1],u=i[2],c=i[3],f=i[4],i=i[5];return t[0]=s*o+h*l,t[1]=r*o+n*l,t[2]=s*u+h*c,t[3]=r*u+n*c,t[4]=s*f+h*i+a,t[5]=r*f+n*i+e,t},rotate$32=function(t,e,i){var s=e[0],r=e[1],h=e[2],n=e[3],a=e[4],e=e[5],o=Math.sin(i),i=Math.cos(i);return t[0]=s*i+h*o,t[1]=r*i+n*o,t[2]=s*-o+h*i,t[3]=r*-o+n*i,t[4]=a,t[5]=e,t},scale$72=function(t,e,i){var s=e[0],r=e[1],h=e[2],n=e[3],a=e[4],e=e[5],o=i[0],i=i[1];return t[0]=s*o,t[1]=r*o,t[2]=h*i,t[3]=n*i,t[4]=a,t[5]=e,t},translate$32=function(t,e,i){var s=e[0],r=e[1],h=e[2],n=e[3],a=e[4],e=e[5],o=i[0],i=i[1];return t[0]=s,t[1]=r,t[2]=h,t[3]=n,t[4]=s*o+h*i+a,t[5]=r*o+n*i+e,t},fromRotation$32=function(t,e){var i=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t[4]=0,t[5]=0,t},fromScaling$22=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},fromTranslation$32=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},str$72=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},frob$22=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},add$72=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t},subtract$52=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t},multiplyScalar$22=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t},multiplyScalarAndAdd$22=function(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t},exactEquals$72=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},equals$72=function(t,e){var i=t[0],s=t[1],r=t[2],h=t[3],n=t[4],t=t[5],a=e[0],o=e[1],l=e[2],u=e[3],c=e[4],e=e[5];return Math.abs(i-a)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(s-o)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(o))&&Math.abs(r-l)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(h-u)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(u))&&Math.abs(n-c)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$62=function(){var t=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},fromMat4$12=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},clone$62=function(t){var e=new ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},copy$62=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},fromValues$62=function(t,e,i,s,r,h,n,a,o){var l=new ARRAY_TYPE(9);return l[0]=t,l[1]=e,l[2]=i,l[3]=s,l[4]=r,l[5]=h,l[6]=n,l[7]=a,l[8]=o,l},set$62=function(t,e,i,s,r,h,n,a,o,l){return t[0]=e,t[1]=i,t[2]=s,t[3]=r,t[4]=h,t[5]=n,t[6]=a,t[7]=o,t[8]=l,t},identity$32=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose$12=function(t,e){var i,s,r;return t===e?(i=e[1],s=e[2],r=e[5],t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=s,t[7]=r):(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]),t},invert$32=function(t,e){var i=e[0],s=e[1],r=e[2],h=e[3],n=e[4],a=e[5],o=e[6],l=e[7],e=e[8],u=e*n-a*l,c=-e*h+a*o,f=l*h-n*o,d=i*u+s*c+r*f;return d?(t[0]=u*(d=1/d),t[1]=(-e*s+r*l)*d,t[2]=(a*s-r*n)*d,t[3]=c*d,t[4]=(e*i-r*o)*d,t[5]=(-a*i+r*h)*d,t[6]=f*d,t[7]=(-l*i+s*o)*d,t[8]=(n*i-s*h)*d,t):null},adjoint$12=function(t,e){var i=e[0],s=e[1],r=e[2],h=e[3],n=e[4],a=e[5],o=e[6],l=e[7],e=e[8];return t[0]=n*e-a*l,t[1]=r*l-s*e,t[2]=s*a-r*n,t[3]=a*o-h*e,t[4]=i*e-r*o,t[5]=r*h-i*a,t[6]=h*l-n*o,t[7]=s*o-i*l,t[8]=i*n-s*h,t},determinant$12=function(t){var e=t[0],i=t[3],s=t[4],r=t[5],h=t[6],n=t[7],a=t[8];return e*(a*s-r*n)+t[1]*(-a*i+r*h)+t[2]*(n*i-s*h)},multiply$62=function(t,e,i){var s=e[0],r=e[1],h=e[2],n=e[3],a=e[4],o=e[5],l=e[6],u=e[7],e=e[8],c=i[0],f=i[1],d=i[2],C=i[3],p=i[4],m=i[5],v=i[6],S=i[7],i=i[8];return t[0]=c*s+f*n+d*l,t[1]=c*r+f*a+d*u,t[2]=c*h+f*o+d*e,t[3]=C*s+p*n+m*l,t[4]=C*r+p*a+m*u,t[5]=C*h+p*o+m*e,t[6]=v*s+S*n+i*l,t[7]=v*r+S*a+i*u,t[8]=v*h+S*o+i*e,t},translate$22=function(t,e,i){var s=e[0],r=e[1],h=e[2],n=e[3],a=e[4],o=e[5],l=e[6],u=e[7],e=e[8],c=i[0],i=i[1];return t[0]=s,t[1]=r,t[2]=h,t[3]=n,t[4]=a,t[5]=o,t[6]=c*s+i*n+l,t[7]=c*r+i*a+u,t[8]=c*h+i*o+e,t},rotate$22=function(t,e,i){var s=e[0],r=e[1],h=e[2],n=e[3],a=e[4],o=e[5],l=e[6],u=e[7],e=e[8],c=Math.sin(i),i=Math.cos(i);return t[0]=i*s+c*n,t[1]=i*r+c*a,t[2]=i*h+c*o,t[3]=i*n-c*s,t[4]=i*a-c*r,t[5]=i*o-c*h,t[6]=l,t[7]=u,t[8]=e,t},scale$62=function(t,e,i){var s=i[0],i=i[1];return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},fromTranslation$22=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},fromRotation$22=function(t,e){var i=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=i,t[2]=0,t[3]=-i,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromScaling$12=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat2d2=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},fromQuat$12=function(t,e){var i=e[0],s=e[1],r=e[2],e=e[3],h=i+i,n=s+s,a=r+r,i=i*h,o=s*h,s=s*n,l=r*h,u=r*n,r=r*a,h=e*h,n=e*n,e=e*a;return t[0]=1-s-r,t[3]=o-e,t[6]=l+n,t[1]=o+e,t[4]=1-i-r,t[7]=u-h,t[2]=l-n,t[5]=u+h,t[8]=1-i-s,t},normalFromMat42=function(t,e){var i=e[0],s=e[1],r=e[2],h=e[3],n=e[4],a=e[5],o=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11],C=e[12],p=e[13],m=e[14],e=e[15],v=i*a-s*n,S=i*o-r*n,g=i*l-h*n,T=s*o-r*a,_=s*l-h*a,y=r*l-h*o,E=u*p-c*C,I=u*m-f*C,u=u*e-d*C,A=c*m-f*p,c=c*e-d*p,f=f*e-d*m,d=v*f-S*c+g*A+T*u-_*I+y*E;return d?(t[0]=(a*f-o*c+l*A)*(d=1/d),t[1]=(o*u-n*f-l*I)*d,t[2]=(n*c-a*u+l*E)*d,t[3]=(r*c-s*f-h*A)*d,t[4]=(i*f-r*u+h*I)*d,t[5]=(s*u-i*c-h*E)*d,t[6]=(p*y-m*_+e*T)*d,t[7]=(m*g-C*y-e*S)*d,t[8]=(C*_-p*g+e*v)*d,t):null},projection2=function(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},str$62=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},frob$12=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},add$62=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t},subtract$42=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t},multiplyScalar$12=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t},multiplyScalarAndAdd$12=function(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t[6]=e[6]+i[6]*s,t[7]=e[7]+i[7]*s,t[8]=e[8]+i[8]*s,t},exactEquals$62=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},equals$62=function(t,e){var i=t[0],s=t[1],r=t[2],h=t[3],n=t[4],a=t[5],o=t[6],l=t[7],t=t[8],u=e[0],c=e[1],f=e[2],d=e[3],C=e[4],p=e[5],m=e[6],v=e[7],e=e[8];return Math.abs(i-u)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(s-c)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(r-f)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(h-d)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(d))&&Math.abs(n-C)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(C))&&Math.abs(a-p)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-m)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(l-v)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$52=function(){var t=new ARRAY_TYPE(16);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},clone$52=function(t){var e=new ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},copy$52=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},fromValues$52=function(t,e,i,s,r,h,n,a,o,l,u,c,f,d,C,p){var m=new ARRAY_TYPE(16);return m[0]=t,m[1]=e,m[2]=i,m[3]=s,m[4]=r,m[5]=h,m[6]=n,m[7]=a,m[8]=o,m[9]=l,m[10]=u,m[11]=c,m[12]=f,m[13]=d,m[14]=C,m[15]=p,m},set$52=function(t,e,i,s,r,h,n,a,o,l,u,c,f,d,C,p,m){return t[0]=e,t[1]=i,t[2]=s,t[3]=r,t[4]=h,t[5]=n,t[6]=a,t[7]=o,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=C,t[14]=p,t[15]=m,t},identity$22=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},transpose2=function(t,e){var i,s,r,h,n,a;return t===e?(i=e[1],s=e[2],r=e[3],h=e[6],n=e[7],a=e[11],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=s,t[9]=h,t[11]=e[14],t[12]=r,t[13]=n,t[14]=a):(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]),t},invert$22=function(t,e){var i=e[0],s=e[1],r=e[2],h=e[3],n=e[4],a=e[5],o=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11],C=e[12],p=e[13],m=e[14],e=e[15],v=i*a-s*n,S=i*o-r*n,g=i*l-h*n,T=s*o-r*a,_=s*l-h*a,y=r*l-h*o,E=u*p-c*C,I=u*m-f*C,A=u*e-d*C,M=c*m-f*p,R=c*e-d*p,w=f*e-d*m,b=v*w-S*R+g*M+T*A-_*I+y*E;return b?(t[0]=(a*w-o*R+l*M)*(b=1/b),t[1]=(r*R-s*w-h*M)*b,t[2]=(p*y-m*_+e*T)*b,t[3]=(f*_-c*y-d*T)*b,t[4]=(o*A-n*w-l*I)*b,t[5]=(i*w-r*A+h*I)*b,t[6]=(m*g-C*y-e*S)*b,t[7]=(u*y-f*g+d*S)*b,t[8]=(n*R-a*A+l*E)*b,t[9]=(s*A-i*R-h*E)*b,t[10]=(C*_-p*g+e*v)*b,t[11]=(c*g-u*_-d*v)*b,t[12]=(a*I-n*M-o*E)*b,t[13]=(i*M-s*I+r*E)*b,t[14]=(p*S-C*T-m*v)*b,t[15]=(u*T-c*S+f*v)*b,t):null},adjoint2=function(t,e){var i=e[0],s=e[1],r=e[2],h=e[3],n=e[4],a=e[5],o=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11],C=e[12],p=e[13],m=e[14],e=e[15],v=i*a-s*n,S=i*o-r*n,g=i*l-h*n,T=s*o-r*a,_=s*l-h*a,y=r*l-h*o,E=u*p-c*C,I=u*m-f*C,A=u*e-d*C,M=c*m-f*p,R=c*e-d*p,w=f*e-d*m;return t[0]=a*w-o*R+l*M,t[1]=r*R-s*w-h*M,t[2]=p*y-m*_+e*T,t[3]=f*_-c*y-d*T,t[4]=o*A-n*w-l*I,t[5]=i*w-r*A+h*I,t[6]=m*g-C*y-e*S,t[7]=u*y-f*g+d*S,t[8]=n*R-a*A+l*E,t[9]=s*A-i*R-h*E,t[10]=C*_-p*g+e*v,t[11]=c*g-u*_-d*v,t[12]=a*I-n*M-o*E,t[13]=i*M-s*I+r*E,t[14]=p*S-C*T-m*v,t[15]=u*T-c*S+f*v,t},determinant2=function(t){var e=t[0],i=t[1],s=t[2],r=t[4],h=t[5],n=t[6],a=t[8],o=t[9],l=t[10],u=t[12],c=t[13],f=t[14],d=e*h-i*r,C=e*n-s*r,p=i*n-s*h,m=a*c-o*u,v=a*f-l*u,S=o*f-l*c;return t[7]*(e*S-i*v+s*m)-t[3]*(r*S-h*v+n*m)+t[15]*(a*p-o*C+l*d)-t[11]*(u*p-c*C+f*d)},multiply$52=function(t,e,i){var s=e[0],r=e[1],h=e[2],n=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],f=e[9],d=e[10],C=e[11],p=e[12],m=e[13],v=e[14],e=e[15],S=i[0],g=i[1],T=i[2],_=i[3];return t[0]=S*s+g*a+T*c+_*p,t[1]=S*r+g*o+T*f+_*m,t[2]=S*h+g*l+T*d+_*v,t[3]=S*n+g*u+T*C+_*e,t[4]=(S=i[4])*s+(g=i[5])*a+(T=i[6])*c+(_=i[7])*p,t[5]=S*r+g*o+T*f+_*m,t[6]=S*h+g*l+T*d+_*v,t[7]=S*n+g*u+T*C+_*e,t[8]=(S=i[8])*s+(g=i[9])*a+(T=i[10])*c+(_=i[11])*p,t[9]=S*r+g*o+T*f+_*m,t[10]=S*h+g*l+T*d+_*v,t[11]=S*n+g*u+T*C+_*e,t[12]=(S=i[12])*s+(g=i[13])*a+(T=i[14])*c+(_=i[15])*p,t[13]=S*r+g*o+T*f+_*m,t[14]=S*h+g*l+T*d+_*v,t[15]=S*n+g*u+T*C+_*e,t},translate$12=function(t,e,i){var s,r,h,n,a,o,l,u,c,f,d,C,p=i[0],m=i[1],i=i[2];return e===t?(t[12]=e[0]*p+e[4]*m+e[8]*i+e[12],t[13]=e[1]*p+e[5]*m+e[9]*i+e[13],t[14]=e[2]*p+e[6]*m+e[10]*i+e[14],t[15]=e[3]*p+e[7]*m+e[11]*i+e[15]):(s=e[0],r=e[1],h=e[2],n=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],f=e[9],d=e[10],C=e[11],t[0]=s,t[1]=r,t[2]=h,t[3]=n,t[4]=a,t[5]=o,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=C,t[12]=s*p+a*m+c*i+e[12],t[13]=r*p+o*m+f*i+e[13],t[14]=h*p+l*m+d*i+e[14],t[15]=n*p+u*m+C*i+e[15]),t},scale$52=function(t,e,i){var s=i[0],r=i[1],i=i[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},rotate$12=function(t,e,i,s){var r,h,n,a,o,l,u,c,f,d,C,p,m,v,S,g,T,_,y,E,I=s[0],A=s[1],s=s[2],M=Math.hypot(I,A,s);return M<EPSILON?null:(I*=M=1/M,A*=M,s*=M,M=Math.sin(i),i=Math.cos(i),h=e[0],n=e[1],a=e[2],o=e[3],u=e[5],c=e[6],f=e[7],C=e[9],p=e[10],m=e[11],S=I*A*(r=1-i)-s*M,g=A*A*r+i,T=s*A*r+I*M,_=I*s*r+A*M,y=A*s*r-I*M,E=s*s*r+i,t[0]=h*(i=I*I*r+i)+(l=e[4])*(v=A*I*r+s*M)+(d=e[8])*(s=s*I*r-A*M),t[1]=n*i+u*v+C*s,t[2]=a*i+c*v+p*s,t[3]=o*i+f*v+m*s,t[4]=h*S+l*g+d*T,t[5]=n*S+u*g+C*T,t[6]=a*S+c*g+p*T,t[7]=o*S+f*g+m*T,t[8]=h*_+l*y+d*E,t[9]=n*_+u*y+C*E,t[10]=a*_+c*y+p*E,t[11]=o*_+f*y+m*E,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},rotateX$32=function(t,e,i){var s=Math.sin(i),i=Math.cos(i),r=e[4],h=e[5],n=e[6],a=e[7],o=e[8],l=e[9],u=e[10],c=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*i+o*s,t[5]=h*i+l*s,t[6]=n*i+u*s,t[7]=a*i+c*s,t[8]=o*i-r*s,t[9]=l*i-h*s,t[10]=u*i-n*s,t[11]=c*i-a*s,t},rotateY$32=function(t,e,i){var s=Math.sin(i),i=Math.cos(i),r=e[0],h=e[1],n=e[2],a=e[3],o=e[8],l=e[9],u=e[10],c=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*i-o*s,t[1]=h*i-l*s,t[2]=n*i-u*s,t[3]=a*i-c*s,t[8]=r*s+o*i,t[9]=h*s+l*i,t[10]=n*s+u*i,t[11]=a*s+c*i,t},rotateZ$32=function(t,e,i){var s=Math.sin(i),i=Math.cos(i),r=e[0],h=e[1],n=e[2],a=e[3],o=e[4],l=e[5],u=e[6],c=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*i+o*s,t[1]=h*i+l*s,t[2]=n*i+u*s,t[3]=a*i+c*s,t[4]=o*i-r*s,t[5]=l*i-h*s,t[6]=u*i-n*s,t[7]=c*i-a*s,t},fromTranslation$12=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},fromScaling2=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotation$12=function(t,e,i){var s,r=i[0],h=i[1],i=i[2],n=Math.hypot(r,h,i);return n<EPSILON?null:(r*=n=1/n,h*=n,i*=n,n=Math.sin(e),e=Math.cos(e),t[0]=r*r*(s=1-e)+e,t[1]=h*r*s+i*n,t[2]=i*r*s-h*n,t[3]=0,t[4]=r*h*s-i*n,t[5]=h*h*s+e,t[6]=i*h*s+r*n,t[7]=0,t[8]=r*i*s+h*n,t[9]=h*i*s-r*n,t[10]=i*i*s+e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromXRotation2=function(t,e){var i=Math.sin(e),e=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromYRotation2=function(t,e){var i=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation2=function(t,e){var i=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotationTranslation$12=function(t,e,i){var s=e[0],r=e[1],h=e[2],e=e[3],n=s+s,a=r+r,o=h+h,l=s*n,u=s*a,s=s*o,c=r*a,r=r*o,h=h*o,n=e*n,a=e*a,e=e*o;return t[0]=1-(c+h),t[1]=u+e,t[2]=s-a,t[3]=0,t[4]=u-e,t[5]=1-(l+h),t[6]=r+n,t[7]=0,t[8]=s+a,t[9]=r-n,t[10]=1-(l+c),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},fromQuat22=function(t,e){var i=new ARRAY_TYPE(3),s=-e[0],r=-e[1],h=-e[2],n=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=s*s+r*r+h*h+n*n;return 0<c?(i[0]=2*(a*n+u*s+o*h-l*r)/c,i[1]=2*(o*n+u*r+l*s-a*h)/c,i[2]=2*(l*n+u*h+a*r-o*s)/c):(i[0]=2*(a*n+u*s+o*h-l*r),i[1]=2*(o*n+u*r+l*s-a*h),i[2]=2*(l*n+u*h+a*r-o*s)),fromRotationTranslation$12(t,e,i),t},getTranslation$12=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},getScaling2=function(t,e){var i=e[0],s=e[4],r=e[5],h=e[6],n=e[8],a=e[9],o=e[10];return t[0]=Math.hypot(i,e[1],e[2]),t[1]=Math.hypot(s,r,h),t[2]=Math.hypot(n,a,o),t},getRotation2=function(t,e){var i=new ARRAY_TYPE(3),s=(getScaling2(i,e),1/i[0]),r=1/i[1],i=1/i[2],h=e[0]*s,n=e[1]*r,a=e[2]*i,o=e[4]*s,l=e[5]*r,u=e[6]*i,s=e[8]*s,r=e[9]*r,e=e[10]*i,i=h+l+e,c=0;return 0<i?(c=2*Math.sqrt(1+i),t[3]=.25*c,t[0]=(u-r)/c,t[1]=(s-a)/c,t[2]=(n-o)/c):l<h&&e<h?(c=2*Math.sqrt(1+h-l-e),t[3]=(u-r)/c,t[0]=.25*c,t[1]=(n+o)/c,t[2]=(s+a)/c):e<l?(c=2*Math.sqrt(1+l-h-e),t[3]=(s-a)/c,t[0]=(n+o)/c,t[1]=.25*c,t[2]=(u+r)/c):(c=2*Math.sqrt(1+e-h-l),t[3]=(n-o)/c,t[0]=(s+a)/c,t[1]=(u+r)/c,t[2]=.25*c),t},decompose2=function(t,e,i,s){e[0]=s[12],e[1]=s[13],e[2]=s[14];var e=s[0],r=s[1],h=s[2],n=s[4],a=s[5],o=s[6],l=s[8],u=s[9],s=s[10],c=(i[0]=Math.hypot(e,r,h),i[1]=Math.hypot(n,a,o),i[2]=Math.hypot(l,u,s),1/i[0]),f=1/i[1],i=1/i[2],e=e*c,r=r*f,h=h*i,n=n*c,a=a*f,o=o*i,l=l*c,c=u*f,u=s*i,f=e+a+u,s=0;return 0<f?(s=2*Math.sqrt(1+f),t[3]=.25*s,t[0]=(o-c)/s,t[1]=(l-h)/s,t[2]=(r-n)/s):a<e&&u<e?(s=2*Math.sqrt(1+e-a-u),t[3]=(o-c)/s,t[0]=.25*s,t[1]=(r+n)/s,t[2]=(l+h)/s):u<a?(s=2*Math.sqrt(1+a-e-u),t[3]=(l-h)/s,t[0]=(r+n)/s,t[1]=.25*s,t[2]=(o+c)/s):(s=2*Math.sqrt(1+u-e-a),t[3]=(r-n)/s,t[0]=(l+h)/s,t[1]=(o+c)/s,t[2]=.25*s),t},fromRotationTranslationScale2=function(t,e,i,s){var r=e[0],h=e[1],n=e[2],e=e[3],a=r+r,o=h+h,l=n+n,u=r*a,c=r*o,r=r*l,f=h*o,h=h*l,n=n*l,a=e*a,o=e*o,e=e*l,l=s[0],d=s[1],s=s[2];return t[0]=(1-(f+n))*l,t[1]=(c+e)*l,t[2]=(r-o)*l,t[3]=0,t[4]=(c-e)*d,t[5]=(1-(u+n))*d,t[6]=(h+a)*d,t[7]=0,t[8]=(r+o)*s,t[9]=(h-a)*s,t[10]=(1-(u+f))*s,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},fromRotationTranslationScaleOrigin2=function(t,e,i,s,r){var h=e[0],n=e[1],a=e[2],e=e[3],o=h+h,l=n+n,u=a+a,c=h*o,f=h*l,h=h*u,d=n*l,n=n*u,a=a*u,o=e*o,l=e*l,e=e*u,u=s[0],C=s[1],s=s[2],p=r[0],m=r[1],r=r[2],v=(1-(d+a))*u,S=(f+e)*u,u=(h-l)*u,f=(f-e)*C,e=(1-(c+a))*C,a=(n+o)*C,C=(h+l)*s,h=(n-o)*s,l=(1-(c+d))*s;return t[0]=v,t[1]=S,t[2]=u,t[3]=0,t[4]=f,t[5]=e,t[6]=a,t[7]=0,t[8]=C,t[9]=h,t[10]=l,t[11]=0,t[12]=i[0]+p-(v*p+f*m+C*r),t[13]=i[1]+m-(S*p+e*m+h*r),t[14]=i[2]+r-(u*p+a*m+l*r),t[15]=1,t},fromQuat3=function(t,e){var i=e[0],s=e[1],r=e[2],e=e[3],h=i+i,n=s+s,a=r+r,i=i*h,o=s*h,s=s*n,l=r*h,u=r*n,r=r*a,h=e*h,n=e*n,e=e*a;return t[0]=1-s-r,t[1]=o+e,t[2]=l-n,t[3]=0,t[4]=o-e,t[5]=1-i-r,t[6]=u+h,t[7]=0,t[8]=l+n,t[9]=u-h,t[10]=1-i-s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum2=function(t,e,i,s,r,h,n){var a=1/(i-e),o=1/(r-s),l=1/(h-n);return t[0]=2*h*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*h*o,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(r+s)*o,t[10]=(n+h)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=n*h*2*l,t[15]=0,t},perspectiveNO2=function(t,e,i,s,r){e=1/Math.tan(e/2);return t[0]=e/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+s)*(i=1/(s-r)),t[14]=2*r*s*i):(t[10]=-1,t[14]=-2*s),t},perspectiveZO2=function(t,e,i,s,r){e=1/Math.tan(e/2);return t[0]=e/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=r*(i=1/(s-r)),t[14]=r*s*i):(t[10]=-1,t[14]=-s),t},perspectiveFromFieldOfView2=function(t,e,i,s){var r=Math.tan(e.upDegrees*Math.PI/180),h=Math.tan(e.downDegrees*Math.PI/180),n=Math.tan(e.leftDegrees*Math.PI/180),e=Math.tan(e.rightDegrees*Math.PI/180),a=2/(n+e),o=2/(r+h);return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=-(n-e)*a*.5,t[9]=(r-h)*o*.5,t[10]=s/(i-s),t[11]=-1,t[12]=0,t[13]=0,t[14]=s*i/(i-s),t[15]=0,t},orthoNO2=function(t,e,i,s,r,h,n){var a=1/(e-i),o=1/(s-r),l=1/(h-n);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+i)*a,t[13]=(r+s)*o,t[14]=(n+h)*l,t[15]=1,t},orthoZO2=function(t,e,i,s,r,h,n){var a=1/(e-i),o=1/(s-r),n=1/(h-n);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n,t[11]=0,t[12]=(e+i)*a,t[13]=(r+s)*o,t[14]=h*n,t[15]=1,t},lookAt2=function(t,e,i,s){var r,h,n,a,o=e[0],l=e[1],e=e[2],u=s[0],c=s[1],s=s[2],f=i[0],d=i[1],i=i[2];return Math.abs(o-f)<EPSILON&&Math.abs(l-d)<EPSILON&&Math.abs(e-i)<EPSILON?identity$22(t):(f=o-f,d=l-d,i=e-i,r=c*(i*=a=1/Math.hypot(f,d,i))-s*(d*=a),s=s*(f*=a)-u*i,u=u*d-c*f,(a=Math.hypot(r,s,u))?(r*=a=1/a,s*=a,u*=a):u=s=r=0,c=d*u-i*s,h=i*r-f*u,n=f*s-d*r,(a=Math.hypot(c,h,n))?(c*=a=1/a,h*=a,n*=a):n=h=c=0,t[0]=r,t[1]=c,t[2]=f,t[3]=0,t[4]=s,t[5]=h,t[6]=d,t[7]=0,t[8]=u,t[9]=n,t[10]=i,t[11]=0,t[12]=-(r*o+s*l+u*e),t[13]=-(c*o+h*l+n*e),t[14]=-(f*o+d*l+i*e),t[15]=1,t)},targetTo2=function(t,e,i,s){var r=e[0],h=e[1],e=e[2],n=s[0],a=s[1],s=s[2],o=r-i[0],l=h-i[1],i=e-i[2],u=o*o+l*l+i*i,c=(0<u&&(o*=u=1/Math.sqrt(u),l*=u,i*=u),a*i-s*l),s=s*o-n*i,n=n*l-a*o;return 0<(u=c*c+s*s+n*n)&&(c*=u=1/Math.sqrt(u),s*=u,n*=u),t[0]=c,t[1]=s,t[2]=n,t[3]=0,t[4]=l*n-i*s,t[5]=i*c-o*n,t[6]=o*s-l*c,t[7]=0,t[8]=o,t[9]=l,t[10]=i,t[11]=0,t[12]=r,t[13]=h,t[14]=e,t[15]=1,t},str$52=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob2=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},add$52=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t},subtract$32=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t},multiplyScalar2=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t},multiplyScalarAndAdd2=function(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t[4]=e[4]+i[4]*s,t[5]=e[5]+i[5]*s,t[6]=e[6]+i[6]*s,t[7]=e[7]+i[7]*s,t[8]=e[8]+i[8]*s,t[9]=e[9]+i[9]*s,t[10]=e[10]+i[10]*s,t[11]=e[11]+i[11]*s,t[12]=e[12]+i[12]*s,t[13]=e[13]+i[13]*s,t[14]=e[14]+i[14]*s,t[15]=e[15]+i[15]*s,t},exactEquals$52=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},equals$52=function(t,e){var i=t[0],s=t[1],r=t[2],h=t[3],n=t[4],a=t[5],o=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],C=t[12],p=t[13],m=t[14],t=t[15],v=e[0],S=e[1],g=e[2],T=e[3],_=e[4],y=e[5],E=e[6],I=e[7],A=e[8],M=e[9],R=e[10],w=e[11],b=e[12],G=e[13],O=e[14],e=e[15];return Math.abs(i-v)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(s-S)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(r-g)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(h-T)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(n-_)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(a-y)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(o-E)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(l-I)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(u-A)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(c-M)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(M))&&Math.abs(f-R)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(d-w)<=EPSILON*Math.max(1,Math.abs(d),Math.abs(w))&&Math.abs(C-b)<=EPSILON*Math.max(1,Math.abs(C),Math.abs(b))&&Math.abs(p-G)<=EPSILON*Math.max(1,Math.abs(p),Math.abs(G))&&Math.abs(m-O)<=EPSILON*Math.max(1,Math.abs(m),Math.abs(O))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$42=function(){var t=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},clone$42=function(t){var e=new ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},length$42=function(t){var e=t[0];return Math.hypot(e,t[1],t[2])},fromValues$42=function(t,e,i){var s=new ARRAY_TYPE(3);return s[0]=t,s[1]=e,s[2]=i,s},copy$42=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},set$42=function(t,e,i,s){return t[0]=e,t[1]=i,t[2]=s,t},add$42=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t},subtract$22=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t},multiply$42=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t},divide$22=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t},ceil$22=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},floor$22=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},min$22=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t},max$22=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t},round$22=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},scale$42=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},scaleAndAdd$22=function(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t},distance$22=function(t,e){var i=e[0]-t[0];return Math.hypot(i,e[1]-t[1],e[2]-t[2])},squaredDistance$22=function(t,e){var i=e[0]-t[0],s=e[1]-t[1],e=e[2]-t[2];return i*i+s*s+e*e},squaredLength$42=function(t){var e=t[0],i=t[1],t=t[2];return e*e+i*i+t*t},negate$22=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},inverse$22=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},normalize$42=function(t,e){var i=e[0],s=e[1],r=e[2],i=i*i+s*s+r*r;return 0<i&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},dot$42=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},cross$22=function(t,e,i){var s=e[0],r=e[1],e=e[2],h=i[0],n=i[1],i=i[2];return t[0]=r*i-e*n,t[1]=e*h-s*i,t[2]=s*n-r*h,t},lerp$42=function(t,e,i,s){var r=e[0],h=e[1],e=e[2];return t[0]=r+s*(i[0]-r),t[1]=h+s*(i[1]-h),t[2]=e+s*(i[2]-e),t},slerp$12=function(t,e,i,s){var r=Math.acos(Math.min(Math.max(dot$42(e,i),-1),1)),h=Math.sin(r),n=Math.sin((1-s)*r)/h,s=Math.sin(s*r)/h;return t[0]=n*e[0]+s*i[0],t[1]=n*e[1]+s*i[1],t[2]=n*e[2]+s*i[2],t},hermite2=function(t,e,i,s,r,h){var n=h*h,a=n*(2*h-3)+1,o=n*(h-2)+h,l=n*(h-1),n=n*(3-2*h);return t[0]=e[0]*a+i[0]*o+s[0]*l+r[0]*n,t[1]=e[1]*a+i[1]*o+s[1]*l+r[1]*n,t[2]=e[2]*a+i[2]*o+s[2]*l+r[2]*n,t},bezier2=function(t,e,i,s,r,h){var n=1-h,a=n*n,o=h*h,l=a*n,a=3*h*a,n=3*o*n,o=o*h;return t[0]=e[0]*l+i[0]*a+s[0]*n+r[0]*o,t[1]=e[1]*l+i[1]*a+s[1]*n+r[1]*o,t[2]=e[2]*l+i[2]*a+s[2]*n+r[2]*o,t},random$32=function(t,e){e=e||1;var i=2*RANDOM()*Math.PI,s=2*RANDOM()-1,r=Math.sqrt(1-s*s)*e;return t[0]=Math.cos(i)*r,t[1]=Math.sin(i)*r,t[2]=s*e,t},transformMat4$22=function(t,e,i){var s=e[0],r=e[1],e=e[2],h=i[3]*s+i[7]*r+i[11]*e+i[15];return t[0]=(i[0]*s+i[4]*r+i[8]*e+i[12])/(h=h||1),t[1]=(i[1]*s+i[5]*r+i[9]*e+i[13])/h,t[2]=(i[2]*s+i[6]*r+i[10]*e+i[14])/h,t},transformMat3$12=function(t,e,i){var s=e[0],r=e[1],e=e[2];return t[0]=s*i[0]+r*i[3]+e*i[6],t[1]=s*i[1]+r*i[4]+e*i[7],t[2]=s*i[2]+r*i[5]+e*i[8],t},transformQuat$12=function(t,e,i){var s=i[0],r=i[1],h=i[2],n=e[0],a=e[1],e=e[2],o=r*e-h*a,l=h*n-s*e,u=s*a-r*n,c=r*u-h*l,h=h*o-s*u,s=s*l-r*o,r=2*i[3];return l*=r,u*=r,h*=2,s*=2,t[0]=n+(o*=r)+(c*=2),t[1]=a+l+h,t[2]=e+u+s,t},rotateX$22=function(t,e,i,s){var r=[],h=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],h[0]=r[0],h[1]=r[1]*Math.cos(s)-r[2]*Math.sin(s),h[2]=r[1]*Math.sin(s)+r[2]*Math.cos(s),t[0]=h[0]+i[0],t[1]=h[1]+i[1],t[2]=h[2]+i[2],t},rotateY$22=function(t,e,i,s){var r=[],h=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],h[0]=r[2]*Math.sin(s)+r[0]*Math.cos(s),h[1]=r[1],h[2]=r[2]*Math.cos(s)-r[0]*Math.sin(s),t[0]=h[0]+i[0],t[1]=h[1]+i[1],t[2]=h[2]+i[2],t},rotateZ$22=function(t,e,i,s){var r=[],h=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],h[0]=r[0]*Math.cos(s)-r[1]*Math.sin(s),h[1]=r[0]*Math.sin(s)+r[1]*Math.cos(s),h[2]=r[2],t[0]=h[0]+i[0],t[1]=h[1]+i[1],t[2]=h[2]+i[2],t},angle$12=function(t,e){var i=t[0],s=t[1],r=t[2],h=e[0],n=e[1],a=e[2],i=Math.sqrt((i*i+s*s+r*r)*(h*h+n*n+a*a)),s=i&&dot$42(t,e)/i;return Math.acos(Math.min(Math.max(s,-1),1))},zero$22=function(t){return t[0]=0,t[1]=0,t[2]=0,t},str$42=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},exactEquals$42=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},equals$42=function(t,e){var i=t[0],s=t[1],t=t[2],r=e[0],h=e[1],e=e[2];return Math.abs(i-r)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(s-h)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$32=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},clone$32=function(t){var e=new ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},fromValues$32=function(t,e,i,s){var r=new ARRAY_TYPE(4);return r[0]=t,r[1]=e,r[2]=i,r[3]=s,r},copy$32=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},set$32=function(t,e,i,s,r){return t[0]=e,t[1]=i,t[2]=s,t[3]=r,t},add$32=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t},subtract$12=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t},multiply$32=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t},divide$12=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t},ceil$12=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},floor$12=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},min$12=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t},max$12=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t},round$12=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},scale$32=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},scaleAndAdd$12=function(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t[2]=e[2]+i[2]*s,t[3]=e[3]+i[3]*s,t},distance$12=function(t,e){var i=e[0]-t[0];return Math.hypot(i,e[1]-t[1],e[2]-t[2],e[3]-t[3])},squaredDistance$12=function(t,e){var i=e[0]-t[0],s=e[1]-t[1],r=e[2]-t[2],e=e[3]-t[3];return i*i+s*s+r*r+e*e},length$32=function(t){var e=t[0];return Math.hypot(e,t[1],t[2],t[3])},squaredLength$32=function(t){var e=t[0],i=t[1],s=t[2],t=t[3];return e*e+i*i+s*s+t*t},negate$12=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},inverse$12=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},normalize$32=function(t,e){var i=e[0],s=e[1],r=e[2],e=e[3],h=i*i+s*s+r*r+e*e;return 0<h&&(h=1/Math.sqrt(h)),t[0]=i*h,t[1]=s*h,t[2]=r*h,t[3]=e*h,t},dot$32=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},cross$12=function(t,e,i,s){var r=i[0]*s[1]-i[1]*s[0],h=i[0]*s[2]-i[2]*s[0],n=i[0]*s[3]-i[3]*s[0],a=i[1]*s[2]-i[2]*s[1],o=i[1]*s[3]-i[3]*s[1],i=i[2]*s[3]-i[3]*s[2],s=e[0],l=e[1],u=e[2],e=e[3];return t[0]=l*i-u*o+e*a,t[1]=-s*i+u*n-e*h,t[2]=s*o-l*n+e*r,t[3]=-s*a+l*h-u*r,t},lerp$32=function(t,e,i,s){var r=e[0],h=e[1],n=e[2],e=e[3];return t[0]=r+s*(i[0]-r),t[1]=h+s*(i[1]-h),t[2]=n+s*(i[2]-n),t[3]=e+s*(i[3]-e),t},random$22=function(t,e){var i,s,r,h,n,a;for(e=e||1;1<=(n=(i=2*RANDOM()-1)*i+(s=2*RANDOM()-1)*s););for(;1<=(a=(r=2*RANDOM()-1)*r+(h=2*RANDOM()-1)*h););var o=Math.sqrt((1-n)/a);return t[0]=e*i,t[1]=e*s,t[2]=e*r*o,t[3]=e*h*o,t},transformMat4$12=function(t,e,i){var s=e[0],r=e[1],h=e[2],e=e[3];return t[0]=i[0]*s+i[4]*r+i[8]*h+i[12]*e,t[1]=i[1]*s+i[5]*r+i[9]*h+i[13]*e,t[2]=i[2]*s+i[6]*r+i[10]*h+i[14]*e,t[3]=i[3]*s+i[7]*r+i[11]*h+i[15]*e,t},transformQuat2=function(t,e,i){var s=e[0],r=e[1],h=e[2],n=i[0],a=i[1],o=i[2],i=i[3],l=i*s+a*h-o*r,u=i*r+o*s-n*h,c=i*h+n*r-a*s,s=-n*s-a*r-o*h;return t[0]=l*i+s*-n+u*-o-c*-a,t[1]=u*i+s*-a+c*-n-l*-o,t[2]=c*i+s*-o+l*-a-u*-n,t[3]=e[3],t},zero$12=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},str$32=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},exactEquals$32=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},equals$32=function(t,e){var i=t[0],s=t[1],r=t[2],t=t[3],h=e[0],n=e[1],a=e[2],e=e[3];return Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-n)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(n))&&Math.abs(r-a)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$22=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},identity$12=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},setAxisAngle2=function(t,e,i){i*=.5;var s=Math.sin(i);return t[0]=s*e[0],t[1]=s*e[1],t[2]=s*e[2],t[3]=Math.cos(i),t},getAxisAngle2=function(t,e){var i=2*Math.acos(e[3]),s=Math.sin(i/2);return EPSILON<s?(t[0]=e[0]/s,t[1]=e[1]/s,t[2]=e[2]/s):(t[0]=1,t[1]=0,t[2]=0),i},getAngle2=function(t,e){t=dot$2(t,e);return Math.acos(2*t*t-1)},multiply$22=function(t,e,i){var s=e[0],r=e[1],h=e[2],e=e[3],n=i[0],a=i[1],o=i[2],i=i[3];return t[0]=s*i+e*n+r*o-h*a,t[1]=r*i+e*a+h*n-s*o,t[2]=h*i+e*o+s*a-r*n,t[3]=e*i-s*n-r*a-h*o,t},rotateX$12=function(t,e,i){i*=.5;var s=e[0],r=e[1],h=e[2],e=e[3],n=Math.sin(i),i=Math.cos(i);return t[0]=s*i+e*n,t[1]=r*i+h*n,t[2]=h*i-r*n,t[3]=e*i-s*n,t},rotateY$12=function(t,e,i){i*=.5;var s=e[0],r=e[1],h=e[2],e=e[3],n=Math.sin(i),i=Math.cos(i);return t[0]=s*i-h*n,t[1]=r*i+e*n,t[2]=h*i+s*n,t[3]=e*i-r*n,t},rotateZ$12=function(t,e,i){i*=.5;var s=e[0],r=e[1],h=e[2],e=e[3],n=Math.sin(i),i=Math.cos(i);return t[0]=s*i+r*n,t[1]=r*i-s*n,t[2]=h*i+e*n,t[3]=e*i-h*n,t},calculateW2=function(t,e){var i=e[0],s=e[1],e=e[2];return t[0]=i,t[1]=s,t[2]=e,t[3]=Math.sqrt(Math.abs(1-i*i-s*s-e*e)),t},exp2=function(t,e){var i=e[0],s=e[1],r=e[2],e=e[3],h=Math.sqrt(i*i+s*s+r*r),e=Math.exp(e),n=0<h?e*Math.sin(h)/h:0;return t[0]=i*n,t[1]=s*n,t[2]=r*n,t[3]=e*Math.cos(h),t},ln2=function(t,e){var i=e[0],s=e[1],r=e[2],e=e[3],h=Math.sqrt(i*i+s*s+r*r),h=0<h?Math.atan2(h,e)/h:0;return t[0]=i*h,t[1]=s*h,t[2]=r*h,t[3]=.5*Math.log(i*i+s*s+r*r+e*e),t},pow2=function(t,e,i){return ln2(t,e),scale$2(t,t,i),exp2(t,t),t},slerp2=function(t,e,i,s){var r,h,n=e[0],a=e[1],o=e[2],e=e[3],l=i[0],u=i[1],c=i[2],i=i[3],f=n*l+a*u+o*c+e*i;return f<0&&(f=-f,l=-l,u=-u,c=-c,i=-i),f=EPSILON<1-f?(f=Math.acos(f),r=Math.sin(f),h=Math.sin((1-s)*f)/r,Math.sin(s*f)/r):(h=1-s,s),t[0]=h*n+f*l,t[1]=h*a+f*u,t[2]=h*o+f*c,t[3]=h*e+f*i,t},random$12=function(t){var e=RANDOM(),i=RANDOM(),s=RANDOM(),r=Math.sqrt(1-e),e=Math.sqrt(e);return t[0]=r*Math.sin(2*Math.PI*i),t[1]=r*Math.cos(2*Math.PI*i),t[2]=e*Math.sin(2*Math.PI*s),t[3]=e*Math.cos(2*Math.PI*s),t},invert$12=function(t,e){var i=e[0],s=e[1],r=e[2],e=e[3],h=i*i+s*s+r*r+e*e,h=h?1/h:0;return t[0]=-i*h,t[1]=-s*h,t[2]=-r*h,t[3]=e*h,t},conjugate$12=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},fromMat32=function(t,e){var i,s,r,h=e[0]+e[4]+e[8];return 0<h?(r=Math.sqrt(h+1),t[3]=.5*r,t[0]=(e[5]-e[7])*(r=.5/r),t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r):(i=((h=e[3*(h=e[4]>e[h=0]?1:h)+h]<e[8]?2:h)+1)%3,s=(h+2)%3,r=Math.sqrt(e[3*h+h]-e[3*i+i]-e[3*s+s]+1),t[h]=.5*r,t[3]=(e[3*i+s]-e[3*s+i])*(r=.5/r),t[i]=(e[3*i+h]+e[3*h+i])*r,t[s]=(e[3*s+h]+e[3*h+s])*r),t},fromEuler2=function(t,e,i,s){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:ANGLE_ORDER,h=Math.PI/360,n=(s*=h,i*=h,Math.sin(e*=h)),a=Math.cos(e),o=Math.sin(i),l=Math.cos(i),u=Math.sin(s),c=Math.cos(s);switch(r){case"xyz":t[0]=n*l*c+a*o*u,t[1]=a*o*c-n*l*u,t[2]=a*l*u+n*o*c,t[3]=a*l*c-n*o*u;break;case"xzy":t[0]=n*l*c-a*o*u,t[1]=a*o*c-n*l*u,t[2]=a*l*u+n*o*c,t[3]=a*l*c+n*o*u;break;case"yxz":t[0]=n*l*c+a*o*u,t[1]=a*o*c-n*l*u,t[2]=a*l*u-n*o*c,t[3]=a*l*c+n*o*u;break;case"yzx":t[0]=n*l*c+a*o*u,t[1]=a*o*c+n*l*u,t[2]=a*l*u-n*o*c,t[3]=a*l*c-n*o*u;break;case"zxy":t[0]=n*l*c-a*o*u,t[1]=a*o*c+n*l*u,t[2]=a*l*u+n*o*c,t[3]=a*l*c-n*o*u;break;case"zyx":t[0]=n*l*c-a*o*u,t[1]=a*o*c+n*l*u,t[2]=a*l*u-n*o*c,t[3]=a*l*c+n*o*u;break;default:throw new Error("Unknown angle order "+r)}return t},str$22=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},equals$22=function(t,e){return Math.abs(dot$32(t,e))>=1-EPSILON},create$12=function(){var t=new ARRAY_TYPE(8);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},clone$12=function(t){var e=new ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e},fromValues$12=function(t,e,i,s,r,h,n,a){var o=new ARRAY_TYPE(8);return o[0]=t,o[1]=e,o[2]=i,o[3]=s,o[4]=r,o[5]=h,o[6]=n,o[7]=a,o},fromRotationTranslationValues2=function(t,e,i,s,r,h,n){var a=new ARRAY_TYPE(8),r=(a[0]=t,a[1]=e,a[2]=i,a[3]=s,.5*r),h=.5*h,n=.5*n;return a[4]=r*s+h*i-n*e,a[5]=h*s+n*t-r*i,a[6]=n*s+r*e-h*t,a[7]=-r*t-h*e-n*i,a},fromRotationTranslation2=function(t,e,i){var s=.5*i[0],r=.5*i[1],i=.5*i[2],h=e[0],n=e[1],a=e[2],e=e[3];return t[0]=h,t[1]=n,t[2]=a,t[3]=e,t[4]=s*e+r*a-i*n,t[5]=r*e+i*h-s*a,t[6]=i*e+s*n-r*h,t[7]=-s*h-r*n-i*a,t},fromTranslation2=function(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t},fromRotation2=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},fromMat42=function(t,e){var i=create$22(),s=(getRotation2(i,e),new ARRAY_TYPE(3));return getTranslation$12(s,e),fromRotationTranslation2(t,i,s),t},copy$12=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t},identity2=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},set$12=function(t,e,i,s,r,h,n,a,o){return t[0]=e,t[1]=i,t[2]=s,t[3]=r,t[4]=h,t[5]=n,t[6]=a,t[7]=o,t},getDual2=function(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t},setDual2=function(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t},getTranslation2=function(t,e){var i=e[4],s=e[5],r=e[6],h=e[7],n=-e[0],a=-e[1],o=-e[2],e=e[3];return t[0]=2*(i*e+h*n+s*o-r*a),t[1]=2*(s*e+h*a+r*n-i*o),t[2]=2*(r*e+h*o+i*a-s*n),t},translate2=function(t,e,i){var s=e[0],r=e[1],h=e[2],n=e[3],a=.5*i[0],o=.5*i[1],i=.5*i[2],l=e[4],u=e[5],c=e[6],e=e[7];return t[0]=s,t[1]=r,t[2]=h,t[3]=n,t[4]=n*a+r*i-h*o+l,t[5]=n*o+h*a-s*i+u,t[6]=n*i+s*o-r*a+c,t[7]=-s*a-r*o-h*i+e,t},rotateX2=function(t,e,i){var s=-e[0],r=-e[1],h=-e[2],n=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=a*n+u*s+o*h-l*r,f=o*n+u*r+l*s-a*h,d=l*n+u*h+a*r-o*s,u=u*n-a*s-o*r-l*h;return rotateX$12(t,e,i),s=t[0],t[4]=c*(n=t[3])+u*s+f*(h=t[2])-d*(r=t[1]),t[5]=f*n+u*r+d*s-c*h,t[6]=d*n+u*h+c*r-f*s,t[7]=u*n-c*s-f*r-d*h,t},rotateY2=function(t,e,i){var s=-e[0],r=-e[1],h=-e[2],n=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=a*n+u*s+o*h-l*r,f=o*n+u*r+l*s-a*h,d=l*n+u*h+a*r-o*s,u=u*n-a*s-o*r-l*h;return rotateY$12(t,e,i),s=t[0],t[4]=c*(n=t[3])+u*s+f*(h=t[2])-d*(r=t[1]),t[5]=f*n+u*r+d*s-c*h,t[6]=d*n+u*h+c*r-f*s,t[7]=u*n-c*s-f*r-d*h,t},rotateZ2=function(t,e,i){var s=-e[0],r=-e[1],h=-e[2],n=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=a*n+u*s+o*h-l*r,f=o*n+u*r+l*s-a*h,d=l*n+u*h+a*r-o*s,u=u*n-a*s-o*r-l*h;return rotateZ$12(t,e,i),s=t[0],t[4]=c*(n=t[3])+u*s+f*(h=t[2])-d*(r=t[1]),t[5]=f*n+u*r+d*s-c*h,t[6]=d*n+u*h+c*r-f*s,t[7]=u*n-c*s-f*r-d*h,t},rotateByQuatAppend2=function(t,e,i){var s=i[0],r=i[1],h=i[2],i=i[3],n=e[0],a=e[1],o=e[2],l=e[3];return t[0]=n*i+l*s+a*h-o*r,t[1]=a*i+l*r+o*s-n*h,t[2]=o*i+l*h+n*r-a*s,t[3]=l*i-n*s-a*r-o*h,t[4]=(n=e[4])*i+(l=e[7])*s+(a=e[5])*h-(o=e[6])*r,t[5]=a*i+l*r+o*s-n*h,t[6]=o*i+l*h+n*r-a*s,t[7]=l*i-n*s-a*r-o*h,t},rotateByQuatPrepend2=function(t,e,i){var s=e[0],r=e[1],h=e[2],e=e[3],n=i[0],a=i[1],o=i[2],l=i[3];return t[0]=s*l+e*n+r*o-h*a,t[1]=r*l+e*a+h*n-s*o,t[2]=h*l+e*o+s*a-r*n,t[3]=e*l-s*n-r*a-h*o,t[4]=s*(l=i[7])+e*(n=i[4])+r*(o=i[6])-h*(a=i[5]),t[5]=r*l+e*a+h*n-s*o,t[6]=h*l+e*o+s*a-r*n,t[7]=e*l-s*n-r*a-h*o,t},rotateAroundAxis2=function(t,e,i,s){var r,h,n,a,o,l;return Math.abs(s)<EPSILON?copy$12(t,e):(l=Math.hypot(i[0],i[1],i[2]),s*=.5,r=(n=Math.sin(s))*i[0]/l,h=n*i[1]/l,n=n*i[2]/l,i=Math.cos(s),l=e[0],t[0]=l*i+(s=e[3])*r+(a=e[1])*n-(o=e[2])*h,t[1]=a*i+s*h+o*r-l*n,t[2]=o*i+s*n+l*h-a*r,t[3]=s*i-l*r-a*h-o*n,t[4]=(s=e[4])*i+(l=e[7])*r+(a=e[5])*n-(o=e[6])*h,t[5]=a*i+l*h+o*r-s*n,t[6]=o*i+l*n+s*h-a*r,t[7]=l*i-s*r-a*h-o*n,t)},add$12=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t},multiply$12=function(t,e,i){var s=e[0],r=e[1],h=e[2],n=e[3],a=i[4],o=i[5],l=i[6],u=i[7],c=e[4],f=e[5],d=e[6],e=e[7],C=i[0],p=i[1],m=i[2],i=i[3];return t[0]=s*i+n*C+r*m-h*p,t[1]=r*i+n*p+h*C-s*m,t[2]=h*i+n*m+s*p-r*C,t[3]=n*i-s*C-r*p-h*m,t[4]=s*u+n*a+r*l-h*o+c*i+e*C+f*m-d*p,t[5]=r*u+n*o+h*a-s*l+f*i+e*p+d*C-c*m,t[6]=h*u+n*l+s*o-r*a+d*i+e*m+c*p-f*C,t[7]=n*u-s*a-r*o-h*l+e*i-c*C-f*p-d*m,t},scale$12=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t},lerp$12=function(t,e,i,s){var r=1-s;return dot$1(e,i)<0&&(s=-s),t[0]=e[0]*r+i[0]*s,t[1]=e[1]*r+i[1]*s,t[2]=e[2]*r+i[2]*s,t[3]=e[3]*r+i[3]*s,t[4]=e[4]*r+i[4]*s,t[5]=e[5]*r+i[5]*s,t[6]=e[6]*r+i[6]*s,t[7]=e[7]*r+i[7]*s,t},invert2=function(t,e){var i=squaredLength$1(e);return t[0]=-e[0]/i,t[1]=-e[1]/i,t[2]=-e[2]/i,t[3]=e[3]/i,t[4]=-e[4]/i,t[5]=-e[5]/i,t[6]=-e[6]/i,t[7]=e[7]/i,t},conjugate2=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t},normalize$12=function(t,e){var i,s,r,h,n,a,o,l,u=squaredLength$1(e);return 0<u&&(u=Math.sqrt(u),l=(i=e[0]/u)*(n=e[4])+(s=e[1]/u)*(a=e[5])+(r=e[2]/u)*(o=e[6])+(h=e[3]/u)*(e=e[7]),t[0]=i,t[1]=s,t[2]=r,t[3]=h,t[4]=(n-i*l)/u,t[5]=(a-s*l)/u,t[6]=(o-r*l)/u,t[7]=(e-h*l)/u),t},str$12=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},exactEquals$12=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]},equals$12=function(t,e){var i=t[0],s=t[1],r=t[2],h=t[3],n=t[4],a=t[5],o=t[6],t=t[7],l=e[0],u=e[1],c=e[2],f=e[3],d=e[4],C=e[5],p=e[6],e=e[7];return Math.abs(i-l)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-u)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(r-c)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(h-f)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(n-d)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(a-C)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(C))&&Math.abs(o-p)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create2=function(){var t=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t},clone2=function(t){var e=new ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},fromValues2=function(t,e){var i=new ARRAY_TYPE(2);return i[0]=t,i[1]=e,i},copy2=function(t,e){return t[0]=e[0],t[1]=e[1],t},set2=function(t,e,i){return t[0]=e,t[1]=i,t},add2=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t},subtract2=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t},multiply2=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t},divide2=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t},ceil2=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},floor2=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},min2=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t},max2=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t},round2=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},scale2=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t},scaleAndAdd2=function(t,e,i,s){return t[0]=e[0]+i[0]*s,t[1]=e[1]+i[1]*s,t},distance2=function(t,e){var i=e[0]-t[0];return Math.hypot(i,e[1]-t[1])},squaredDistance2=function(t,e){var i=e[0]-t[0],e=e[1]-t[1];return i*i+e*e},length2=function(t){var e=t[0];return Math.hypot(e,t[1])},squaredLength2=function(t){var e=t[0],t=t[1];return e*e+t*t},negate2=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},inverse2=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},normalize2=function(t,e){var i=e[0],s=e[1],i=i*i+s*s;return 0<i&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t},dot2=function(t,e){return t[0]*e[0]+t[1]*e[1]},cross2=function(t,e,i){e=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=e,t},lerp2=function(t,e,i,s){var r=e[0],e=e[1];return t[0]=r+s*(i[0]-r),t[1]=e+s*(i[1]-e),t},random2=function(t,e){e=e||1;var i=2*RANDOM()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t},transformMat22=function(t,e,i){var s=e[0],e=e[1];return t[0]=i[0]*s+i[2]*e,t[1]=i[1]*s+i[3]*e,t},transformMat2d2=function(t,e,i){var s=e[0],e=e[1];return t[0]=i[0]*s+i[2]*e+i[4],t[1]=i[1]*s+i[3]*e+i[5],t},transformMat32=function(t,e,i){var s=e[0],e=e[1];return t[0]=i[0]*s+i[3]*e+i[6],t[1]=i[1]*s+i[4]*e+i[7],t},transformMat42=function(t,e,i){var s=e[0],e=e[1];return t[0]=i[0]*s+i[4]*e+i[12],t[1]=i[1]*s+i[5]*e+i[13],t},rotate2=function(t,e,i,s){var r=e[0]-i[0],e=e[1]-i[1],h=Math.sin(s),s=Math.cos(s);return t[0]=r*s-e*h+i[0],t[1]=r*h+e*s+i[1],t},angle2=function(t,e){var i=t[0],t=t[1],s=e[0],e=e[1],r=Math.sqrt((i*i+t*t)*(s*s+e*e));return Math.acos(Math.min(Math.max(r&&(i*s+t*e)/r,-1),1))},zero2=function(t){return t[0]=0,t[1]=0,t},str2=function(t){return"vec2("+t[0]+", "+t[1]+")"},exactEquals2=function(t,e){return t[0]===e[0]&&t[1]===e[1]},equals2=function(t,e){var i=t[0],t=t[1],s=e[0],e=e[1];return Math.abs(i-s)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))};setMatrixArrayType=setMatrixArrayType2,toRadian=toRadian2,equals$9=equals$92,create$8=create$82,clone$8=clone$82,copy$8=copy$82,identity$5=identity$52,fromValues$8=fromValues$82,set$8=set$82,transpose$2=transpose$22,invert$5=invert$52,adjoint$2=adjoint$22,determinant$3=determinant$32,multiply$8=multiply$82,rotate$4=rotate$42,scale$8=scale$82,fromRotation$4=fromRotation$42,fromScaling$3=fromScaling$32,str$8=str$82,frob$3=frob$32,LDU=LDU2,add$8=add$82,subtract$6=subtract$62,exactEquals$8=exactEquals$82,equals$8=equals$82,multiplyScalar$3=multiplyScalar$32,multiplyScalarAndAdd$3=multiplyScalarAndAdd$32,create$7=create$72,clone$7=clone$72,copy$7=copy$72,identity$4=identity$42,fromValues$7=fromValues$72,set$7=set$72,invert$4=invert$42,determinant$2=determinant$22,multiply$7=multiply$72,rotate$3=rotate$32,scale$7=scale$72,translate$3=translate$32,fromRotation$3=fromRotation$32,fromScaling$2=fromScaling$22,fromTranslation$3=fromTranslation$32,str$7=str$72,frob$2=frob$22,add$7=add$72,subtract$5=subtract$52,multiplyScalar$2=multiplyScalar$22,multiplyScalarAndAdd$2=multiplyScalarAndAdd$22,exactEquals$7=exactEquals$72,equals$7=equals$72,create$6=create$62,fromMat4$1=fromMat4$12,clone$6=clone$62,copy$6=copy$62,fromValues$6=fromValues$62,set$6=set$62,identity$3=identity$32,transpose$1=transpose$12,invert$3=invert$32,adjoint$1=adjoint$12,determinant$1=determinant$12,multiply$6=multiply$62,translate$2=translate$22,rotate$2=rotate$22,scale$6=scale$62,fromTranslation$2=fromTranslation$22,fromRotation$2=fromRotation$22,fromScaling$1=fromScaling$12,fromMat2d=fromMat2d2,fromQuat$1=fromQuat$12,normalFromMat4=normalFromMat42,projection=projection2,str$6=str$62,frob$1=frob$12,add$6=add$62,subtract$4=subtract$42,multiplyScalar$1=multiplyScalar$12,multiplyScalarAndAdd$1=multiplyScalarAndAdd$12,exactEquals$6=exactEquals$62,equals$6=equals$62,create$5=create$52,clone$5=clone$52,copy$5=copy$52,fromValues$5=fromValues$52,set$5=set$52,identity$2=identity$22,transpose=transpose2,invert$2=invert$22,adjoint=adjoint2,determinant=determinant2,multiply$5=multiply$52,translate$1=translate$12,scale$5=scale$52,rotate$1=rotate$12,rotateX$3=rotateX$32,rotateY$3=rotateY$32,rotateZ$3=rotateZ$32,fromTranslation$1=fromTranslation$12,fromScaling=fromScaling2,fromRotation$1=fromRotation$12,fromXRotation=fromXRotation2,fromYRotation=fromYRotation2,fromZRotation=fromZRotation2,fromRotationTranslation$1=fromRotationTranslation$12,fromQuat2=fromQuat22,getTranslation$1=getTranslation$12,getScaling=getScaling2,getRotation=getRotation2,decompose=decompose2,fromRotationTranslationScale=fromRotationTranslationScale2,fromRotationTranslationScaleOrigin=fromRotationTranslationScaleOrigin2,fromQuat=fromQuat3,frustum=frustum2,perspectiveNO=perspectiveNO2,perspectiveZO=perspectiveZO2,perspectiveFromFieldOfView=perspectiveFromFieldOfView2,orthoNO=orthoNO2,orthoZO=orthoZO2,lookAt=lookAt2,targetTo=targetTo2,str$5=str$52,frob=frob2,add$5=add$52,subtract$3=subtract$32,multiplyScalar=multiplyScalar2,multiplyScalarAndAdd=multiplyScalarAndAdd2,exactEquals$5=exactEquals$52,equals$5=equals$52,create$4=create$42,clone$4=clone$42,length$4=length$42,fromValues$4=fromValues$42,copy$4=copy$42,set$4=set$42,add$4=add$42,subtract$2=subtract$22,multiply$4=multiply$42,divide$2=divide$22,ceil$2=ceil$22,floor$2=floor$22,min$2=min$22,max$2=max$22,round$2=round$22,scale$4=scale$42,scaleAndAdd$2=scaleAndAdd$22,distance$2=distance$22,squaredDistance$2=squaredDistance$22,squaredLength$4=squaredLength$42,negate$2=negate$22,inverse$2=inverse$22,normalize$4=normalize$42,dot$4=dot$42,cross$2=cross$22,lerp$4=lerp$42,slerp$1=slerp$12,hermite=hermite2,bezier=bezier2,random$3=random$32,transformMat4$2=transformMat4$22,transformMat3$1=transformMat3$12,transformQuat$1=transformQuat$12,rotateX$2=rotateX$22,rotateY$2=rotateY$22,rotateZ$2=rotateZ$22,angle$1=angle$12,zero$2=zero$22,str$4=str$42,exactEquals$4=exactEquals$42,equals$4=equals$42,create$3=create$32,clone$3=clone$32,fromValues$3=fromValues$32,copy$3=copy$32,set$3=set$32,add$3=add$32,subtract$1=subtract$12,multiply$3=multiply$32,divide$1=divide$12,ceil$1=ceil$12,floor$1=floor$12,min$1=min$12,max$1=max$12,round$1=round$12,scale$3=scale$32,scaleAndAdd$1=scaleAndAdd$12,distance$1=distance$12,squaredDistance$1=squaredDistance$12,length$3=length$32,squaredLength$3=squaredLength$32,negate$1=negate$12,inverse$1=inverse$12,normalize$3=normalize$32,dot$3=dot$32,cross$1=cross$12,lerp$3=lerp$32,random$2=random$22,transformMat4$1=transformMat4$12,transformQuat=transformQuat2,zero$1=zero$12,str$3=str$32,exactEquals$3=exactEquals$32,equals$3=equals$32,create$2=create$22,identity$1=identity$12,setAxisAngle=setAxisAngle2,getAxisAngle=getAxisAngle2,getAngle=getAngle2,multiply$2=multiply$22,rotateX$1=rotateX$12,rotateY$1=rotateY$12,rotateZ$1=rotateZ$12,calculateW=calculateW2,exp=exp2,ln=ln2,pow=pow2,slerp=slerp2,random$1=random$12,invert$1=invert$12,conjugate$1=conjugate$12,fromMat3=fromMat32,fromEuler=fromEuler2,str$2=str$22,equals$2=equals$22,create$1=create$12,clone$1=clone$12,fromValues$1=fromValues$12,fromRotationTranslationValues=fromRotationTranslationValues2,fromRotationTranslation=fromRotationTranslation2,fromTranslation=fromTranslation2,fromRotation=fromRotation2,fromMat4=fromMat42,copy$1=copy$12,identity=identity2,set$1=set$12,getDual=getDual2,setDual=setDual2,getTranslation=getTranslation2,translate=translate2,rotateX=rotateX2,rotateY=rotateY2,rotateZ=rotateZ2,rotateByQuatAppend=rotateByQuatAppend2,rotateByQuatPrepend=rotateByQuatPrepend2,rotateAroundAxis=rotateAroundAxis2,add$1=add$12,multiply$1=multiply$12,scale$1=scale$12,lerp$1=lerp$12,invert=invert2,conjugate=conjugate2,normalize$1=normalize$12,str$1=str$12,exactEquals$1=exactEquals$12,equals$1=equals$12,create=create2,clone=clone2,fromValues=fromValues2,copy=copy2,set=set2,add=add2,subtract=subtract2,multiply=multiply2,divide=divide2,ceil=ceil2,floor=floor2,min=min2,max=max2,round=round2,scale=scale2,scaleAndAdd=scaleAndAdd2,distance=distance2,squaredDistance=squaredDistance2,length=length2,squaredLength=squaredLength2,negate=negate2,inverse=inverse2,normalize=normalize2,dot=dot2,cross=cross2,lerp=lerp2,random=random2,transformMat2=transformMat22,transformMat2d=transformMat2d2,transformMat3=transformMat32,transformMat4=transformMat42,rotate=rotate2,angle=angle2,zero=zero2,str=str2,exactEquals=exactEquals2,equals=equals2,EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,RANDOM=Math.random,ANGLE_ORDER="zyx",degree=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),common={__proto__:null,EPSILON:EPSILON,get C(){return ARRAY_TYPE},m:RANDOM,S:ANGLE_ORDER,g:setMatrixArrayType2,T:toRadian2,equals:equals$92},mul$8=multiply$82,sub$6=subtract$62,mat2=Object.freeze({__proto__:null,create:create$82,clone:clone$82,_:copy$82,identity:identity$52,I:fromValues$82,set:set$82,A:transpose$22,M:invert$52,R:adjoint$22,G:determinant$32,multiply:multiply$82,rotate:rotate$42,scale:scale$82,O:fromRotation$42,P:fromScaling$32,L:str$82,D:frob$32,N:LDU2,add:add$82,F:subtract$62,$:exactEquals$82,equals:equals$82,B:multiplyScalar$32,W:multiplyScalarAndAdd$32,mul:mul$8,sub:sub$6}),mul$7=multiply$72,sub$5=subtract$52,mat2d=Object.freeze({__proto__:null,create:create$72,clone:clone$72,_:copy$72,identity:identity$42,I:fromValues$72,set:set$72,M:invert$42,G:determinant$22,multiply:multiply$72,rotate:rotate$32,scale:scale$72,translate:translate$32,O:fromRotation$32,P:fromScaling$22,V:fromTranslation$32,L:str$72,D:frob$22,add:add$72,F:subtract$52,B:multiplyScalar$22,W:multiplyScalarAndAdd$22,$:exactEquals$72,equals:equals$72,mul:mul$7,sub:sub$5}),mul$6=multiply$62,sub$4=subtract$42,mat3=Object.freeze({__proto__:null,create:create$62,H:fromMat4$12,clone:clone$62,_:copy$62,I:fromValues$62,set:set$62,identity:identity$32,A:transpose$12,M:invert$32,R:adjoint$12,G:determinant$12,multiply:multiply$62,translate:translate$22,rotate:rotate$22,scale:scale$62,V:fromTranslation$22,O:fromRotation$22,P:fromScaling$12,U:fromMat2d2,j:fromQuat$12,X:normalFromMat42,Y:projection2,L:str$62,D:frob$12,add:add$62,F:subtract$42,B:multiplyScalar$12,W:multiplyScalarAndAdd$12,$:exactEquals$62,equals:equals$62,mul:mul$6,sub:sub$4}),perspective=perspectiveNO2,ortho=orthoNO2,mul$5=multiply$52,sub$3=subtract$32,mat4=Object.freeze({__proto__:null,create:create$52,clone:clone$52,_:copy$52,I:fromValues$52,set:set$52,identity:identity$22,A:transpose2,M:invert$22,R:adjoint2,G:determinant2,multiply:multiply$52,translate:translate$12,scale:scale$52,rotate:rotate$12,K:rotateX$32,J:rotateY$32,Z:rotateZ$32,V:fromTranslation$12,P:fromScaling2,O:fromRotation$12,tt:fromXRotation2,et:fromYRotation2,it:fromZRotation2,ht:fromRotationTranslation$12,nt:fromQuat22,ot:getTranslation$12,lt:getScaling2,ut:getRotation2,ct:decompose2,ft:fromRotationTranslationScale2,dt:fromRotationTranslationScaleOrigin2,j:fromQuat3,Ct:frustum2,vt:perspectiveNO2,perspective:perspective,St:perspectiveZO2,gt:perspectiveFromFieldOfView2,Tt:orthoNO2,ortho:ortho,_t:orthoZO2,yt:lookAt2,Et:targetTo2,L:str$52,D:frob2,add:add$52,F:subtract$32,B:multiplyScalar2,W:multiplyScalarAndAdd2,$:exactEquals$52,equals:equals$52,mul:mul$5,sub:sub$3}),sub$2=subtract$22,mul$4=multiply$42,div$2=divide$22,dist$2=distance$22,sqrDist$2=squaredDistance$22,len$4=length$42,sqrLen$4=squaredLength$42,forEach$2=(()=>{var o=create$42();return function(t,e,i,s,r,h){var n,a;for(e=e||3,i=i||0,a=s?Math.min(s*e+i,t.length):t.length,n=i;n<a;n+=e)o[0]=t[n],o[1]=t[n+1],o[2]=t[n+2],r(o,o,h),t[n]=o[0],t[n+1]=o[1],t[n+2]=o[2];return t}})(),vec3=Object.freeze({__proto__:null,create:create$42,clone:clone$42,length:length$42,I:fromValues$42,_:copy$42,set:set$42,add:add$42,F:subtract$22,multiply:multiply$42,It:divide$22,ceil:ceil$22,floor:floor$22,min:min$22,max:max$22,round:round$22,scale:scale$42,At:scaleAndAdd$22,Mt:distance$22,Rt:squaredDistance$22,bt:squaredLength$42,Gt:negate$22,inverse:inverse$22,normalize:normalize$42,Ot:dot$42,Pt:cross$22,Lt:lerp$42,xt:slerp$12,Dt:hermite2,Nt:bezier2,random:random$32,Ft:transformMat4$22,$t:transformMat3$12,Bt:transformQuat$12,K:rotateX$22,J:rotateY$22,Z:rotateZ$22,angle:angle$12,kt:zero$22,L:str$42,$:exactEquals$42,equals:equals$42,sub:sub$2,mul:mul$4,div:div$2,Wt:dist$2,Vt:sqrDist$2,Ht:len$4,Ut:sqrLen$4,forEach:forEach$2}),sub$1=subtract$12,mul$3=multiply$32,div$1=divide$12,dist$1=distance$12,sqrDist$1=squaredDistance$12,len$3=length$32,sqrLen$3=squaredLength$32,forEach$1=(()=>{var o=create$32();return function(t,e,i,s,r,h){var n,a;for(e=e||4,i=i||0,a=s?Math.min(s*e+i,t.length):t.length,n=i;n<a;n+=e)o[0]=t[n],o[1]=t[n+1],o[2]=t[n+2],o[3]=t[n+3],r(o,o,h),t[n]=o[0],t[n+1]=o[1],t[n+2]=o[2],t[n+3]=o[3];return t}})(),vec4=Object.freeze({__proto__:null,create:create$32,clone:clone$32,I:fromValues$32,_:copy$32,set:set$32,add:add$32,F:subtract$12,multiply:multiply$32,It:divide$12,ceil:ceil$12,floor:floor$12,min:min$12,max:max$12,round:round$12,scale:scale$32,At:scaleAndAdd$12,Mt:distance$12,Rt:squaredDistance$12,length:length$32,bt:squaredLength$32,Gt:negate$12,inverse:inverse$12,normalize:normalize$32,Ot:dot$32,Pt:cross$12,Lt:lerp$32,random:random$22,Ft:transformMat4$12,Bt:transformQuat2,kt:zero$12,L:str$32,$:exactEquals$32,equals:equals$32,sub:sub$1,mul:mul$3,div:div$1,Wt:dist$1,Vt:sqrDist$1,Ht:len$3,Ut:sqrLen$3,forEach:forEach$1}),clone$2=clone$32,fromValues$2=fromValues$32,copy$2=copy$32,set$2=set$32,add$2=add$32,mul$2=multiply$22,scale$2=scale$32,dot$2=dot$32,lerp$2=lerp$32,length$2=length$32,len$2=length$2,squaredLength$2=squaredLength$32,sqrLen$2=squaredLength$2,normalize$2=normalize$32,exactEquals$2=exactEquals$32,rotationTo=(()=>{var r=create$42(),h=fromValues$42(1,0,0),n=fromValues$42(0,1,0);return function(t,e,i){var s=dot$42(e,i);return s<-.999999?(cross$22(r,h,e),len$4(r)<1e-6&&cross$22(r,n,e),normalize$42(r,r),setAxisAngle2(t,r,Math.PI),t):.999999<s?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(cross$22(r,e,i),t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=1+s,normalize$2(t,t))}})(),sqlerp=(()=>{var n=create$22(),a=create$22();return function(t,e,i,s,r,h){return slerp2(n,e,r,h),slerp2(a,i,s,h),slerp2(t,n,a,2*h*(1-h)),t}})(),setAxes=(()=>{var r=create$62();return function(t,e,i,s){return r[0]=i[0],r[3]=i[1],r[6]=i[2],r[1]=s[0],r[4]=s[1],r[7]=s[2],r[2]=-e[0],r[5]=-e[1],r[8]=-e[2],normalize$2(t,fromMat32(t,r))}})(),quat=Object.freeze({__proto__:null,create:create$22,identity:identity$12,jt:setAxisAngle2,Xt:getAxisAngle2,Yt:getAngle2,multiply:multiply$22,K:rotateX$12,J:rotateY$12,Z:rotateZ$12,qt:calculateW2,exp:exp2,zt:ln2,pow:pow2,xt:slerp2,random:random$12,M:invert$12,Kt:conjugate$12,Jt:fromMat32,Zt:fromEuler2,L:str$22,clone:clone$2,I:fromValues$2,_:copy$2,set:set$2,add:add$2,mul:mul$2,scale:scale$2,Ot:dot$2,Lt:lerp$2,length:length$2,Ht:len$2,bt:squaredLength$2,Ut:sqrLen$2,normalize:normalize$2,$:exactEquals$2,equals:equals$22,Qt:rotationTo,te:sqlerp,ie:setAxes}),getReal=copy$2,setReal=copy$2,mul$1=multiply$12,dot$1=dot$2,length$1=length$2,len$1=length$1,squaredLength$1=squaredLength$2,sqrLen$1=squaredLength$1,quat2=Object.freeze({__proto__:null,create:create$12,clone:clone$12,I:fromValues$12,re:fromRotationTranslationValues2,ht:fromRotationTranslation2,V:fromTranslation2,O:fromRotation2,H:fromMat42,_:copy$12,identity:identity2,set:set$12,he:getReal,ne:getDual2,ae:setReal,oe:setDual2,ot:getTranslation2,translate:translate2,K:rotateX2,J:rotateY2,Z:rotateZ2,le:rotateByQuatAppend2,ue:rotateByQuatPrepend2,fe:rotateAroundAxis2,add:add$12,multiply:multiply$12,mul:mul$1,scale:scale$12,Ot:dot$1,Lt:lerp$12,M:invert2,Kt:conjugate2,length:length$1,Ht:len$1,bt:squaredLength$1,Ut:sqrLen$1,normalize:normalize$12,L:str$12,$:exactEquals$12,equals:equals$12}),len=length2,sub=subtract2,mul=multiply2,div=divide2,dist=distance2,sqrDist=squaredDistance2,sqrLen=squaredLength2,forEach=(()=>{var o=create2();return function(t,e,i,s,r,h){var n,a;for(e=e||2,i=i||0,a=s?Math.min(s*e+i,t.length):t.length,n=i;n<a;n+=e)o[0]=t[n],o[1]=t[n+1],r(o,o,h),t[n]=o[0],t[n+1]=o[1];return t}})(),vec2=Object.freeze({__proto__:null,create:create2,clone:clone2,I:fromValues2,_:copy2,set:set2,add:add2,F:subtract2,multiply:multiply2,It:divide2,ceil:ceil2,floor:floor2,min:min2,max:max2,round:round2,scale:scale2,At:scaleAndAdd2,Mt:distance2,Rt:squaredDistance2,length:length2,bt:squaredLength2,Gt:negate2,inverse:inverse2,normalize:normalize2,Ot:dot2,Pt:cross2,Lt:lerp2,random:random2,de:transformMat22,Ce:transformMat2d2,$t:transformMat32,Ft:transformMat42,rotate:rotate2,angle:angle2,kt:zero2,L:str2,$:exactEquals2,equals:equals2,Ht:len,sub:sub,mul:mul,div:div,Wt:dist,Vt:sqrDist,Ut:sqrLen,forEach:forEach}),globalThis.pe=common,globalThis.pe.me=mat2,globalThis.pe.ve=mat2d,globalThis.pe.Se=mat3,globalThis.pe.ge=mat4,globalThis.pe.Te=quat,globalThis.pe._e=quat2,globalThis.pe.ye=vec2,globalThis.pe.Ee=vec3,globalThis.pe.Ie=vec4}var EPSILON,ARRAY_TYPE,RANDOM,ANGLE_ORDER,degree,common,mul$8,sub$6,mat2,mul$7,sub$5,mat2d,mul$6,sub$4,mat3,perspective,ortho,mul$5,sub$3,mat4,sub$2,mul$4,div$2,dist$2,sqrDist$2,len$4,sqrLen$4,forEach$2,vec3,sub$1,mul$3,div$1,dist$1,sqrDist$1,len$3,sqrLen$3,forEach$1,vec4,clone$2,fromValues$2,copy$2,set$2,add$2,mul$2,scale$2,dot$2,lerp$2,length$2,len$2,squaredLength$2,sqrLen$2,normalize$2,exactEquals$2,rotationTo,sqlerp,setAxes,quat,getReal,setReal,mul$1,dot$1,length$1,len$1,squaredLength$1,sqrLen$1,quat2,len,sub,mul,div,dist,sqrDist,sqrLen,forEach,vec2,setMatrixArrayType,toRadian,equals$9,create$8,clone$8,copy$8,identity$5,fromValues$8,set$8,transpose$2,invert$5,adjoint$2,determinant$3,multiply$8,rotate$4,scale$8,fromRotation$4,fromScaling$3,str$8,frob$3,LDU,add$8,subtract$6,exactEquals$8,equals$8,multiplyScalar$3,multiplyScalarAndAdd$3,create$7,clone$7,copy$7,identity$4,fromValues$7,set$7,invert$4,determinant$2,multiply$7,rotate$3,scale$7,translate$3,fromRotation$3,fromScaling$2,fromTranslation$3,str$7,frob$2,add$7,subtract$5,multiplyScalar$2,multiplyScalarAndAdd$2,exactEquals$7,equals$7,create$6,fromMat4$1,clone$6,copy$6,fromValues$6,set$6,identity$3,transpose$1,invert$3,adjoint$1,determinant$1,multiply$6,translate$2,rotate$2,scale$6,fromTranslation$2,fromRotation$2,fromScaling$1,fromMat2d,fromQuat$1,normalFromMat4,projection,str$6,frob$1,add$6,subtract$4,multiplyScalar$1,multiplyScalarAndAdd$1,exactEquals$6,equals$6,create$5,clone$5,copy$5,fromValues$5,set$5,identity$2,transpose,invert$2,adjoint,determinant,multiply$5,translate$1,scale$5,rotate$1,rotateX$3,rotateY$3,rotateZ$3,fromTranslation$1,fromScaling,fromRotation$1,fromXRotation,fromYRotation,fromZRotation,fromRotationTranslation$1,fromQuat2,getTranslation$1,getScaling,getRotation,decompose,fromRotationTranslationScale,fromRotationTranslationScaleOrigin,fromQuat,frustum,perspectiveNO,perspectiveZO,perspectiveFromFieldOfView,orthoNO,orthoZO,lookAt,targetTo,str$5,frob,add$5,subtract$3,multiplyScalar,multiplyScalarAndAdd,exactEquals$5,equals$5,create$4,clone$4,length$4,fromValues$4,copy$4,set$4,add$4,subtract$2,multiply$4,divide$2,ceil$2,floor$2,min$2,max$2,round$2,scale$4,scaleAndAdd$2,distance$2,squaredDistance$2,squaredLength$4,negate$2,inverse$2,normalize$4,dot$4,cross$2,lerp$4,slerp$1,hermite,bezier,random$3,transformMat4$2,transformMat3$1,transformQuat$1,rotateX$2,rotateY$2,rotateZ$2,angle$1,zero$2,str$4,exactEquals$4,equals$4,create$3,clone$3,fromValues$3,copy$3,set$3,add$3,subtract$1,multiply$3,divide$1,ceil$1,floor$1,min$1,max$1,round$1,scale$3,scaleAndAdd$1,distance$1,squaredDistance$1,length$3,squaredLength$3,negate$1,inverse$1,normalize$3,dot$3,cross$1,lerp$3,random$2,transformMat4$1,transformQuat,zero$1,str$3,exactEquals$3,equals$3,create$2,identity$1,setAxisAngle,getAxisAngle,getAngle,multiply$2,rotateX$1,rotateY$1,rotateZ$1,calculateW,exp,ln,pow,slerp,random$1,invert$1,conjugate$1,fromMat3,fromEuler,str$2,equals$2,create$1,clone$1,fromValues$1,fromRotationTranslationValues,fromRotationTranslation,fromTranslation,fromRotation,fromMat4,copy$1,identity,set$1,getDual,setDual,getTranslation,translate,rotateX,rotateY,rotateZ,rotateByQuatAppend,rotateByQuatPrepend,rotateAroundAxis,add$1,multiply$1,scale$1,lerp$1,invert,conjugate,normalize$1,str$1,exactEquals$1,equals$1,create,clone,fromValues,copy,set,add,subtract,multiply,divide,ceil,floor,min,max,round,scale,scaleAndAdd,distance,squaredDistance,length,squaredLength,negate,inverse,normalize,dot,cross,lerp,random,transformMat2,transformMat2d,transformMat3,transformMat4,rotate,angle,zero,str,exactEquals,equals,GraphemeSplitter,tmpPoint1,tmpPoint2,tmpLine1,tmpLine2,lineInt,lineSegmentsIntersect,triangleArea,isLeft,isLeftOn,isRight,isRightOn,collinear,sqdist,polygonAt,polygonClear,polygonAppend,polygonMakeCCW,polygonReverse,polygonIsReflex,polygonCanSee,polygonCanSee2,polygonCopy,polygonGetCutEdges,polygonDecomp,polygonSlice,polygonIsSimple,getIntersectionPoint,polygonQuickDecomp,polygonRemoveCollinearPoints,polygonRemoveDuplicatePoints,scalar_eq,points_eq,ReadBrandList,RunTest,GetWindowsNTVersionName,asyncifyRequest,asyncifyTransaction,openReadOnlyTransaction,openWriteTransaction,lazyOpenDatabase,RequireString,getEntriesFromCursor,NOT_IMPLEMENTED,DISALLOW_CALLBACK,StructuredClone,arrayFlat,assertFail,isValidTypeChange,logDefendedObjectWarning,CheckDefendedObjectsUsedCorrectly,getObjectPropertySet,VerifyObjectPropertiesConsistent,isNegativeZero,padTwoDigits,hueToRGB,RequireStringOrNumber,SetNewCallback,DoAsyncifiedWork,DoNextAsyncifiedJob,ClearTimeCache,CheckActiveIdleTimeouts,lookupHtmlEntity,bbToHtmlReplacerFunc,IsWordBreakWhiteSpace,IsOpeningCJKPunctiationChar,IsContinuingCJKPunctuationChar,WordBreakTrimEnd,IsNewline,PlaneFromPoints,IsInFrontOfPlane,IsPointInFrontOfPlane,interpolateQuad,GetFormatSpecifiers,fillOrStrokeRect,ptToPx,getOffsetParam,CheckPendingPolls,SortZOrderList,GetDispatcher,MakeIWorldInstanceClass,GetDispatcher,GetTimelineState,GetTimelineState,GetTweenState,getActual,GetTypeFromFileExtension,AddScript,SortByInstLastCachedZIndex,SortByInstLastCachedZIndex,SortByInstZElevation,vec3EqualsXYZ,MaybePrepareLayerDraw,SortSolArray,IsSolArrayIdentical,NoActions,WrapIndex,GetExpressionFunc,EvalParams,EvalParams,GetInst,GetWorldInfo,CompareX,CompareY,IsOnScreen,IsOutsideLayout,PickDistance,SetX,SetY,SetPos,SetPosToObject,MoveForward,MoveAtAngle,GetX,GetY,GetDt,CompareWidth,CompareHeight,SetWidth,SetHeight,SetSize,GetWidth,GetHeight,GetBboxLeft,GetBboxTop,GetBboxRight,GetBboxBottom,GetBboxMidX,GetBboxMidY,IsAngleWithin,IsAngleClockwiseFrom,IsBetweenAngles,SetAngle,RotateClockwise,RotateCounterclockwise,RotateTowardAngle,RotateTowardPosition,SetTowardPosition,GetAngle,CompareOpacity,IsVisible,SetVisible,SetOpacity,SetDefaultColor,GetColor,GetOpacity,IsOnLayer,PickTopBottom,CompareZElevation,MoveToTop,MoveToBottom,MoveToLayer,ZMoveToObject,SetZElevation,LayerNumber,LayerName,ZIndex,ZElevation,TotalZElevation,IsEffectEnabled,SetEffectEnabled,SetEffectParam,CollMemory_Add,CollMemory_Remove,CollMemory_RemoveInstance,CollMemory_Get,DoOverlapCondition,FinishCollisionConditionPicking,FinishCollisionCondition,OnCollision,IsOverlapping,IsOverlappingOffset,HasParent,HasChildren,PickParent,PickChildren,PickNthChild,CompareChildCount,AddChild,RemoveChild,RemoveFromParent,ChildCount,AllChildCount,SetMeshSize,SetMeshPoint,MeshColumns,MeshRows,SetElementVisible,SetElementCSSStyle,SetElementAttribute,RemoveElementAttribute,SetElementFocus,SetElementBlur,IsElementFocused,SetElementEnabled,IsElementEnabled,CompareInstanceVar,IsBoolInstanceVarSet,PickInstVarHiLow,PickByUID,PickByUID_Normal,PickByUID_Inverted,HasTags,Tags,TagsCount,TagAt,ChangeTags,Destroy,OnCreated,OnDestroyed,SetInstanceVar,AddInstanceVar,SubInstanceVar,SetBoolInstanceVar,ToggleBoolInstanceVar,LoadFromJsonString,AsJSON,ObjectTypeName,Count,PickedCount,GetIID,GetUID,OnInstanceSignal,InstanceSignal,InstanceWaitForSignal,TemplateName,GetNextParamMap,ValidateInternalAPIToken,ForEachOrdered_SortInstances,SortZOrderList,SortInstancesByValue,GetTouchSdkInstance,GetKeyboardSdkInstance,StringFromCharCode,GetSdkInstance,unaryminus,bothNumbers,add,subtract,multiply,divide,mod,pow,and,or;{let GraphemeSplitter2=function(){function c(t,e){var i,s=t.charCodeAt(e=void 0===e?0:e);return 55296<=s&&s<=56319&&e<t.length-1?(i=s,56320<=(t=t.charCodeAt(e+1))&&t<=57343?1024*(i-55296)+(t-56320)+65536:i):56320<=s&&s<=57343&&1<=e?(i=t.charCodeAt(e-1),t=s,55296<=i&&i<=56319?1024*(i-55296)+(t-56320)+65536:t):s}function f(t){return 1536<=t&&t<=1541||1757==t||1807==t||2274==t||3406==t||69821==t||70082<=t&&t<=70083||72250==t||72326<=t&&t<=72329||73030==t?12:13==t?0:10==t?1:0<=t&&t<=9||11<=t&&t<=12||14<=t&&t<=31||127<=t&&t<=159||173==t||1564==t||6158==t||8203==t||8206<=t&&t<=8207||8232==t||8233==t||8234<=t&&t<=8238||8288<=t&&t<=8292||8293==t||8294<=t&&t<=8303||55296<=t&&t<=57343||65279==t||65520<=t&&t<=65528||65529<=t&&t<=65531||113824<=t&&t<=113827||119155<=t&&t<=119162||917504==t||917505==t||917506<=t&&t<=917535||917632<=t&&t<=917759||918e3<=t&&t<=921599?2:768<=t&&t<=879||1155<=t&&t<=1159||1160<=t&&t<=1161||1425<=t&&t<=1469||1471==t||1473<=t&&t<=1474||1476<=t&&t<=1477||1479==t||1552<=t&&t<=1562||1611<=t&&t<=1631||1648==t||1750<=t&&t<=1756||1759<=t&&t<=1764||1767<=t&&t<=1768||1770<=t&&t<=1773||1809==t||1840<=t&&t<=1866||1958<=t&&t<=1968||2027<=t&&t<=2035||2070<=t&&t<=2073||2075<=t&&t<=2083||2085<=t&&t<=2087||2089<=t&&t<=2093||2137<=t&&t<=2139||2260<=t&&t<=2273||2275<=t&&t<=2306||2362==t||2364==t||2369<=t&&t<=2376||2381==t||2385<=t&&t<=2391||2402<=t&&t<=2403||2433==t||2492==t||2494==t||2497<=t&&t<=2500||2509==t||2519==t||2530<=t&&t<=2531||2561<=t&&t<=2562||2620==t||2625<=t&&t<=2626||2631<=t&&t<=2632||2635<=t&&t<=2637||2641==t||2672<=t&&t<=2673||2677==t||2689<=t&&t<=2690||2748==t||2753<=t&&t<=2757||2759<=t&&t<=2760||2765==t||2786<=t&&t<=2787||2810<=t&&t<=2815||2817==t||2876==t||2878==t||2879==t||2881<=t&&t<=2884||2893==t||2902==t||2903==t||2914<=t&&t<=2915||2946==t||3006==t||3008==t||3021==t||3031==t||3072==t||3134<=t&&t<=3136||3142<=t&&t<=3144||3146<=t&&t<=3149||3157<=t&&t<=3158||3170<=t&&t<=3171||3201==t||3260==t||3263==t||3266==t||3270==t||3276<=t&&t<=3277||3285<=t&&t<=3286||3298<=t&&t<=3299||3328<=t&&t<=3329||3387<=t&&t<=3388||3390==t||3393<=t&&t<=3396||3405==t||3415==t||3426<=t&&t<=3427||3530==t||3535==t||3538<=t&&t<=3540||3542==t||3551==t||3633==t||3636<=t&&t<=3642||3655<=t&&t<=3662||3761==t||3764<=t&&t<=3769||3771<=t&&t<=3772||3784<=t&&t<=3789||3864<=t&&t<=3865||3893==t||3895==t||3897==t||3953<=t&&t<=3966||3968<=t&&t<=3972||3974<=t&&t<=3975||3981<=t&&t<=3991||3993<=t&&t<=4028||4038==t||4141<=t&&t<=4144||4146<=t&&t<=4151||4153<=t&&t<=4154||4157<=t&&t<=4158||4184<=t&&t<=4185||4190<=t&&t<=4192||4209<=t&&t<=4212||4226==t||4229<=t&&t<=4230||4237==t||4253==t||4957<=t&&t<=4959||5906<=t&&t<=5908||5938<=t&&t<=5940||5970<=t&&t<=5971||6002<=t&&t<=6003||6068<=t&&t<=6069||6071<=t&&t<=6077||6086==t||6089<=t&&t<=6099||6109==t||6155<=t&&t<=6157||6277<=t&&t<=6278||6313==t||6432<=t&&t<=6434||6439<=t&&t<=6440||6450==t||6457<=t&&t<=6459||6679<=t&&t<=6680||6683==t||6742==t||6744<=t&&t<=6750||6752==t||6754==t||6757<=t&&t<=6764||6771<=t&&t<=6780||6783==t||6832<=t&&t<=6845||6846==t||6912<=t&&t<=6915||6964==t||6966<=t&&t<=6970||6972==t||6978==t||7019<=t&&t<=7027||7040<=t&&t<=7041||7074<=t&&t<=7077||7080<=t&&t<=7081||7083<=t&&t<=7085||7142==t||7144<=t&&t<=7145||7149==t||7151<=t&&t<=7153||7212<=t&&t<=7219||7222<=t&&t<=7223||7376<=t&&t<=7378||7380<=t&&t<=7392||7394<=t&&t<=7400||7405==t||7412==t||7416<=t&&t<=7417||7616<=t&&t<=7673||7675<=t&&t<=7679||8204==t||8400<=t&&t<=8412||8413<=t&&t<=8416||8417==t||8418<=t&&t<=8420||8421<=t&&t<=8432||11503<=t&&t<=11505||11647==t||11744<=t&&t<=11775||12330<=t&&t<=12333||12334<=t&&t<=12335||12441<=t&&t<=12442||42607==t||42608<=t&&t<=42610||42612<=t&&t<=42621||42654<=t&&t<=42655||42736<=t&&t<=42737||43010==t||43014==t||43019==t||43045<=t&&t<=43046||43204<=t&&t<=43205||43232<=t&&t<=43249||43302<=t&&t<=43309||43335<=t&&t<=43345||43392<=t&&t<=43394||43443==t||43446<=t&&t<=43449||43452==t||43493==t||43561<=t&&t<=43566||43569<=t&&t<=43570||43573<=t&&t<=43574||43587==t||43596==t||43644==t||43696==t||43698<=t&&t<=43700||43703<=t&&t<=43704||43710<=t&&t<=43711||43713==t||43756<=t&&t<=43757||43766==t||44005==t||44008==t||44013==t||64286==t||65024<=t&&t<=65039||65056<=t&&t<=65071||65438<=t&&t<=65439||66045==t||66272==t||66422<=t&&t<=66426||68097<=t&&t<=68099||68101<=t&&t<=68102||68108<=t&&t<=68111||68152<=t&&t<=68154||68159==t||68325<=t&&t<=68326||69633==t||69688<=t&&t<=69702||69759<=t&&t<=69761||69811<=t&&t<=69814||69817<=t&&t<=69818||69888<=t&&t<=69890||69927<=t&&t<=69931||69933<=t&&t<=69940||70003==t||70016<=t&&t<=70017||70070<=t&&t<=70078||70090<=t&&t<=70092||70191<=t&&t<=70193||70196==t||70198<=t&&t<=70199||70206==t||70367==t||70371<=t&&t<=70378||70400<=t&&t<=70401||70460==t||70462==t||70464==t||70487==t||70502<=t&&t<=70508||70512<=t&&t<=70516||70712<=t&&t<=70719||70722<=t&&t<=70724||70726==t||70832==t||70835<=t&&t<=70840||70842==t||70845==t||70847<=t&&t<=70848||70850<=t&&t<=70851||71087==t||71090<=t&&t<=71093||71100<=t&&t<=71101||71103<=t&&t<=71104||71132<=t&&t<=71133||71219<=t&&t<=71226||71229==t||71231<=t&&t<=71232||71339==t||71341==t||71344<=t&&t<=71349||71351==t||71453<=t&&t<=71455||71458<=t&&t<=71461||71463<=t&&t<=71467||72193<=t&&t<=72198||72201<=t&&t<=72202||72243<=t&&t<=72248||72251<=t&&t<=72254||72263==t||72273<=t&&t<=72278||72281<=t&&t<=72283||72330<=t&&t<=72342||72344<=t&&t<=72345||72752<=t&&t<=72758||72760<=t&&t<=72765||72767==t||72850<=t&&t<=72871||72874<=t&&t<=72880||72882<=t&&t<=72883||72885<=t&&t<=72886||73009<=t&&t<=73014||73018==t||73020<=t&&t<=73021||73023<=t&&t<=73029||73031==t||92912<=t&&t<=92916||92976<=t&&t<=92982||94095<=t&&t<=94098||113821<=t&&t<=113822||119141==t||119143<=t&&t<=119145||119150<=t&&t<=119154||119163<=t&&t<=119170||119173<=t&&t<=119179||119210<=t&&t<=119213||119362<=t&&t<=119364||121344<=t&&t<=121398||121403<=t&&t<=121452||121461==t||121476==t||121499<=t&&t<=121503||121505<=t&&t<=121519||122880<=t&&t<=122886||122888<=t&&t<=122904||122907<=t&&t<=122913||122915<=t&&t<=122916||122918<=t&&t<=122922||125136<=t&&t<=125142||125252<=t&&t<=125258||917536<=t&&t<=917631||917760<=t&&t<=917999?3:127462<=t&&t<=127487?4:2307==t||2363==t||2366<=t&&t<=2368||2377<=t&&t<=2380||2382<=t&&t<=2383||2434<=t&&t<=2435||2495<=t&&t<=2496||2503<=t&&t<=2504||2507<=t&&t<=2508||2563==t||2622<=t&&t<=2624||2691==t||2750<=t&&t<=2752||2761==t||2763<=t&&t<=2764||2818<=t&&t<=2819||2880==t||2887<=t&&t<=2888||2891<=t&&t<=2892||3007==t||3009<=t&&t<=3010||3014<=t&&t<=3016||3018<=t&&t<=3020||3073<=t&&t<=3075||3137<=t&&t<=3140||3202<=t&&t<=3203||3262==t||3264<=t&&t<=3265||3267<=t&&t<=3268||3271<=t&&t<=3272||3274<=t&&t<=3275||3330<=t&&t<=3331||3391<=t&&t<=3392||3398<=t&&t<=3400||3402<=t&&t<=3404||3458<=t&&t<=3459||3536<=t&&t<=3537||3544<=t&&t<=3550||3570<=t&&t<=3571||3635==t||3763==t||3902<=t&&t<=3903||3967==t||4145==t||4155<=t&&t<=4156||4182<=t&&t<=4183||4228==t||6070==t||6078<=t&&t<=6085||6087<=t&&t<=6088||6435<=t&&t<=6438||6441<=t&&t<=6443||6448<=t&&t<=6449||6451<=t&&t<=6456||6681<=t&&t<=6682||6741==t||6743==t||6765<=t&&t<=6770||6916==t||6965==t||6971==t||6973<=t&&t<=6977||6979<=t&&t<=6980||7042==t||7073==t||7078<=t&&t<=7079||7082==t||7143==t||7146<=t&&t<=7148||7150==t||7154<=t&&t<=7155||7204<=t&&t<=7211||7220<=t&&t<=7221||7393==t||7410<=t&&t<=7411||7415==t||43043<=t&&t<=43044||43047==t||43136<=t&&t<=43137||43188<=t&&t<=43203||43346<=t&&t<=43347||43395==t||43444<=t&&t<=43445||43450<=t&&t<=43451||43453<=t&&t<=43456||43567<=t&&t<=43568||43571<=t&&t<=43572||43597==t||43755==t||43758<=t&&t<=43759||43765==t||44003<=t&&t<=44004||44006<=t&&t<=44007||44009<=t&&t<=44010||44012==t||69632==t||69634==t||69762==t||69808<=t&&t<=69810||69815<=t&&t<=69816||69932==t||70018==t||70067<=t&&t<=70069||70079<=t&&t<=70080||70188<=t&&t<=70190||70194<=t&&t<=70195||70197==t||70368<=t&&t<=70370||70402<=t&&t<=70403||70463==t||70465<=t&&t<=70468||70471<=t&&t<=70472||70475<=t&&t<=70477||70498<=t&&t<=70499||70709<=t&&t<=70711||70720<=t&&t<=70721||70725==t||70833<=t&&t<=70834||70841==t||70843<=t&&t<=70844||70846==t||70849==t||71088<=t&&t<=71089||71096<=t&&t<=71099||71102==t||71216<=t&&t<=71218||71227<=t&&t<=71228||71230==t||71340==t||71342<=t&&t<=71343||71350==t||71456<=t&&t<=71457||71462==t||72199<=t&&t<=72200||72249==t||72279<=t&&t<=72280||72343==t||72751==t||72766==t||72873==t||72881==t||72884==t||94033<=t&&t<=94078||119142==t||119149==t?5:4352<=t&&t<=4447||43360<=t&&t<=43388?6:4448<=t&&t<=4519||55216<=t&&t<=55238?7:4520<=t&&t<=4607||55243<=t&&t<=55291?8:44032==t||44060==t||44088==t||44116==t||44144==t||44172==t||44200==t||44228==t||44256==t||44284==t||44312==t||44340==t||44368==t||44396==t||44424==t||44452==t||44480==t||44508==t||44536==t||44564==t||44592==t||44620==t||44648==t||44676==t||44704==t||44732==t||44760==t||44788==t||44816==t||44844==t||44872==t||44900==t||44928==t||44956==t||44984==t||45012==t||45040==t||45068==t||45096==t||45124==t||45152==t||45180==t||45208==t||45236==t||45264==t||45292==t||45320==t||45348==t||45376==t||45404==t||45432==t||45460==t||45488==t||45516==t||45544==t||45572==t||45600==t||45628==t||45656==t||45684==t||45712==t||45740==t||45768==t||45796==t||45824==t||45852==t||45880==t||45908==t||45936==t||45964==t||45992==t||46020==t||46048==t||46076==t||46104==t||46132==t||46160==t||46188==t||46216==t||46244==t||46272==t||46300==t||46328==t||46356==t||46384==t||46412==t||46440==t||46468==t||46496==t||46524==t||46552==t||46580==t||46608==t||46636==t||46664==t||46692==t||46720==t||46748==t||46776==t||46804==t||46832==t||46860==t||46888==t||46916==t||46944==t||46972==t||47e3==t||47028==t||47056==t||47084==t||47112==t||47140==t||47168==t||47196==t||47224==t||47252==t||47280==t||47308==t||47336==t||47364==t||47392==t||47420==t||47448==t||47476==t||47504==t||47532==t||47560==t||47588==t||47616==t||47644==t||47672==t||47700==t||47728==t||47756==t||47784==t||47812==t||47840==t||47868==t||47896==t||47924==t||47952==t||47980==t||48008==t||48036==t||48064==t||48092==t||48120==t||48148==t||48176==t||48204==t||48232==t||48260==t||48288==t||48316==t||48344==t||48372==t||48400==t||48428==t||48456==t||48484==t||48512==t||48540==t||48568==t||48596==t||48624==t||48652==t||48680==t||48708==t||48736==t||48764==t||48792==t||48820==t||48848==t||48876==t||48904==t||48932==t||48960==t||48988==t||49016==t||49044==t||49072==t||49100==t||49128==t||49156==t||49184==t||49212==t||49240==t||49268==t||49296==t||49324==t||49352==t||49380==t||49408==t||49436==t||49464==t||49492==t||49520==t||49548==t||49576==t||49604==t||49632==t||49660==t||49688==t||49716==t||49744==t||49772==t||49800==t||49828==t||49856==t||49884==t||49912==t||49940==t||49968==t||49996==t||50024==t||50052==t||50080==t||50108==t||50136==t||50164==t||50192==t||50220==t||50248==t||50276==t||50304==t||50332==t||50360==t||50388==t||50416==t||50444==t||50472==t||50500==t||50528==t||50556==t||50584==t||50612==t||50640==t||50668==t||50696==t||50724==t||50752==t||50780==t||50808==t||50836==t||50864==t||50892==t||50920==t||50948==t||50976==t||51004==t||51032==t||51060==t||51088==t||51116==t||51144==t||51172==t||51200==t||51228==t||51256==t||51284==t||51312==t||51340==t||51368==t||51396==t||51424==t||51452==t||51480==t||51508==t||51536==t||51564==t||51592==t||51620==t||51648==t||51676==t||51704==t||51732==t||51760==t||51788==t||51816==t||51844==t||51872==t||51900==t||51928==t||51956==t||51984==t||52012==t||52040==t||52068==t||52096==t||52124==t||52152==t||52180==t||52208==t||52236==t||52264==t||52292==t||52320==t||52348==t||52376==t||52404==t||52432==t||52460==t||52488==t||52516==t||52544==t||52572==t||52600==t||52628==t||52656==t||52684==t||52712==t||52740==t||52768==t||52796==t||52824==t||52852==t||52880==t||52908==t||52936==t||52964==t||52992==t||53020==t||53048==t||53076==t||53104==t||53132==t||53160==t||53188==t||53216==t||53244==t||53272==t||53300==t||53328==t||53356==t||53384==t||53412==t||53440==t||53468==t||53496==t||53524==t||53552==t||53580==t||53608==t||53636==t||53664==t||53692==t||53720==t||53748==t||53776==t||53804==t||53832==t||53860==t||53888==t||53916==t||53944==t||53972==t||54e3==t||54028==t||54056==t||54084==t||54112==t||54140==t||54168==t||54196==t||54224==t||54252==t||54280==t||54308==t||54336==t||54364==t||54392==t||54420==t||54448==t||54476==t||54504==t||54532==t||54560==t||54588==t||54616==t||54644==t||54672==t||54700==t||54728==t||54756==t||54784==t||54812==t||54840==t||54868==t||54896==t||54924==t||54952==t||54980==t||55008==t||55036==t||55064==t||55092==t||55120==t||55148==t||55176==t?9:44033<=t&&t<=44059||44061<=t&&t<=44087||44089<=t&&t<=44115||44117<=t&&t<=44143||44145<=t&&t<=44171||44173<=t&&t<=44199||44201<=t&&t<=44227||44229<=t&&t<=44255||44257<=t&&t<=44283||44285<=t&&t<=44311||44313<=t&&t<=44339||44341<=t&&t<=44367||44369<=t&&t<=44395||44397<=t&&t<=44423||44425<=t&&t<=44451||44453<=t&&t<=44479||44481<=t&&t<=44507||44509<=t&&t<=44535||44537<=t&&t<=44563||44565<=t&&t<=44591||44593<=t&&t<=44619||44621<=t&&t<=44647||44649<=t&&t<=44675||44677<=t&&t<=44703||44705<=t&&t<=44731||44733<=t&&t<=44759||44761<=t&&t<=44787||44789<=t&&t<=44815||44817<=t&&t<=44843||44845<=t&&t<=44871||44873<=t&&t<=44899||44901<=t&&t<=44927||44929<=t&&t<=44955||44957<=t&&t<=44983||44985<=t&&t<=45011||45013<=t&&t<=45039||45041<=t&&t<=45067||45069<=t&&t<=45095||45097<=t&&t<=45123||45125<=t&&t<=45151||45153<=t&&t<=45179||45181<=t&&t<=45207||45209<=t&&t<=45235||45237<=t&&t<=45263||45265<=t&&t<=45291||45293<=t&&t<=45319||45321<=t&&t<=45347||45349<=t&&t<=45375||45377<=t&&t<=45403||45405<=t&&t<=45431||45433<=t&&t<=45459||45461<=t&&t<=45487||45489<=t&&t<=45515||45517<=t&&t<=45543||45545<=t&&t<=45571||45573<=t&&t<=45599||45601<=t&&t<=45627||45629<=t&&t<=45655||45657<=t&&t<=45683||45685<=t&&t<=45711||45713<=t&&t<=45739||45741<=t&&t<=45767||45769<=t&&t<=45795||45797<=t&&t<=45823||45825<=t&&t<=45851||45853<=t&&t<=45879||45881<=t&&t<=45907||45909<=t&&t<=45935||45937<=t&&t<=45963||45965<=t&&t<=45991||45993<=t&&t<=46019||46021<=t&&t<=46047||46049<=t&&t<=46075||46077<=t&&t<=46103||46105<=t&&t<=46131||46133<=t&&t<=46159||46161<=t&&t<=46187||46189<=t&&t<=46215||46217<=t&&t<=46243||46245<=t&&t<=46271||46273<=t&&t<=46299||46301<=t&&t<=46327||46329<=t&&t<=46355||46357<=t&&t<=46383||46385<=t&&t<=46411||46413<=t&&t<=46439||46441<=t&&t<=46467||46469<=t&&t<=46495||46497<=t&&t<=46523||46525<=t&&t<=46551||46553<=t&&t<=46579||46581<=t&&t<=46607||46609<=t&&t<=46635||46637<=t&&t<=46663||46665<=t&&t<=46691||46693<=t&&t<=46719||46721<=t&&t<=46747||46749<=t&&t<=46775||46777<=t&&t<=46803||46805<=t&&t<=46831||46833<=t&&t<=46859||46861<=t&&t<=46887||46889<=t&&t<=46915||46917<=t&&t<=46943||46945<=t&&t<=46971||46973<=t&&t<=46999||47001<=t&&t<=47027||47029<=t&&t<=47055||47057<=t&&t<=47083||47085<=t&&t<=47111||47113<=t&&t<=47139||47141<=t&&t<=47167||47169<=t&&t<=47195||47197<=t&&t<=47223||47225<=t&&t<=47251||47253<=t&&t<=47279||47281<=t&&t<=47307||47309<=t&&t<=47335||47337<=t&&t<=47363||47365<=t&&t<=47391||47393<=t&&t<=47419||47421<=t&&t<=47447||47449<=t&&t<=47475||47477<=t&&t<=47503||47505<=t&&t<=47531||47533<=t&&t<=47559||47561<=t&&t<=47587||47589<=t&&t<=47615||47617<=t&&t<=47643||47645<=t&&t<=47671||47673<=t&&t<=47699||47701<=t&&t<=47727||47729<=t&&t<=47755||47757<=t&&t<=47783||47785<=t&&t<=47811||47813<=t&&t<=47839||47841<=t&&t<=47867||47869<=t&&t<=47895||47897<=t&&t<=47923||47925<=t&&t<=47951||47953<=t&&t<=47979||47981<=t&&t<=48007||48009<=t&&t<=48035||48037<=t&&t<=48063||48065<=t&&t<=48091||48093<=t&&t<=48119||48121<=t&&t<=48147||48149<=t&&t<=48175||48177<=t&&t<=48203||48205<=t&&t<=48231||48233<=t&&t<=48259||48261<=t&&t<=48287||48289<=t&&t<=48315||48317<=t&&t<=48343||48345<=t&&t<=48371||48373<=t&&t<=48399||48401<=t&&t<=48427||48429<=t&&t<=48455||48457<=t&&t<=48483||48485<=t&&t<=48511||48513<=t&&t<=48539||48541<=t&&t<=48567||48569<=t&&t<=48595||48597<=t&&t<=48623||48625<=t&&t<=48651||48653<=t&&t<=48679||48681<=t&&t<=48707||48709<=t&&t<=48735||48737<=t&&t<=48763||48765<=t&&t<=48791||48793<=t&&t<=48819||48821<=t&&t<=48847||48849<=t&&t<=48875||48877<=t&&t<=48903||48905<=t&&t<=48931||48933<=t&&t<=48959||48961<=t&&t<=48987||48989<=t&&t<=49015||49017<=t&&t<=49043||49045<=t&&t<=49071||49073<=t&&t<=49099||49101<=t&&t<=49127||49129<=t&&t<=49155||49157<=t&&t<=49183||49185<=t&&t<=49211||49213<=t&&t<=49239||49241<=t&&t<=49267||49269<=t&&t<=49295||49297<=t&&t<=49323||49325<=t&&t<=49351||49353<=t&&t<=49379||49381<=t&&t<=49407||49409<=t&&t<=49435||49437<=t&&t<=49463||49465<=t&&t<=49491||49493<=t&&t<=49519||49521<=t&&t<=49547||49549<=t&&t<=49575||49577<=t&&t<=49603||49605<=t&&t<=49631||49633<=t&&t<=49659||49661<=t&&t<=49687||49689<=t&&t<=49715||49717<=t&&t<=49743||49745<=t&&t<=49771||49773<=t&&t<=49799||49801<=t&&t<=49827||49829<=t&&t<=49855||49857<=t&&t<=49883||49885<=t&&t<=49911||49913<=t&&t<=49939||49941<=t&&t<=49967||49969<=t&&t<=49995||49997<=t&&t<=50023||50025<=t&&t<=50051||50053<=t&&t<=50079||50081<=t&&t<=50107||50109<=t&&t<=50135||50137<=t&&t<=50163||50165<=t&&t<=50191||50193<=t&&t<=50219||50221<=t&&t<=50247||50249<=t&&t<=50275||50277<=t&&t<=50303||50305<=t&&t<=50331||50333<=t&&t<=50359||50361<=t&&t<=50387||50389<=t&&t<=50415||50417<=t&&t<=50443||50445<=t&&t<=50471||50473<=t&&t<=50499||50501<=t&&t<=50527||50529<=t&&t<=50555||50557<=t&&t<=50583||50585<=t&&t<=50611||50613<=t&&t<=50639||50641<=t&&t<=50667||50669<=t&&t<=50695||50697<=t&&t<=50723||50725<=t&&t<=50751||50753<=t&&t<=50779||50781<=t&&t<=50807||50809<=t&&t<=50835||50837<=t&&t<=50863||50865<=t&&t<=50891||50893<=t&&t<=50919||50921<=t&&t<=50947||50949<=t&&t<=50975||50977<=t&&t<=51003||51005<=t&&t<=51031||51033<=t&&t<=51059||51061<=t&&t<=51087||51089<=t&&t<=51115||51117<=t&&t<=51143||51145<=t&&t<=51171||51173<=t&&t<=51199||51201<=t&&t<=51227||51229<=t&&t<=51255||51257<=t&&t<=51283||51285<=t&&t<=51311||51313<=t&&t<=51339||51341<=t&&t<=51367||51369<=t&&t<=51395||51397<=t&&t<=51423||51425<=t&&t<=51451||51453<=t&&t<=51479||51481<=t&&t<=51507||51509<=t&&t<=51535||51537<=t&&t<=51563||51565<=t&&t<=51591||51593<=t&&t<=51619||51621<=t&&t<=51647||51649<=t&&t<=51675||51677<=t&&t<=51703||51705<=t&&t<=51731||51733<=t&&t<=51759||51761<=t&&t<=51787||51789<=t&&t<=51815||51817<=t&&t<=51843||51845<=t&&t<=51871||51873<=t&&t<=51899||51901<=t&&t<=51927||51929<=t&&t<=51955||51957<=t&&t<=51983||51985<=t&&t<=52011||52013<=t&&t<=52039||52041<=t&&t<=52067||52069<=t&&t<=52095||52097<=t&&t<=52123||52125<=t&&t<=52151||52153<=t&&t<=52179||52181<=t&&t<=52207||52209<=t&&t<=52235||52237<=t&&t<=52263||52265<=t&&t<=52291||52293<=t&&t<=52319||52321<=t&&t<=52347||52349<=t&&t<=52375||52377<=t&&t<=52403||52405<=t&&t<=52431||52433<=t&&t<=52459||52461<=t&&t<=52487||52489<=t&&t<=52515||52517<=t&&t<=52543||52545<=t&&t<=52571||52573<=t&&t<=52599||52601<=t&&t<=52627||52629<=t&&t<=52655||52657<=t&&t<=52683||52685<=t&&t<=52711||52713<=t&&t<=52739||52741<=t&&t<=52767||52769<=t&&t<=52795||52797<=t&&t<=52823||52825<=t&&t<=52851||52853<=t&&t<=52879||52881<=t&&t<=52907||52909<=t&&t<=52935||52937<=t&&t<=52963||52965<=t&&t<=52991||52993<=t&&t<=53019||53021<=t&&t<=53047||53049<=t&&t<=53075||53077<=t&&t<=53103||53105<=t&&t<=53131||53133<=t&&t<=53159||53161<=t&&t<=53187||53189<=t&&t<=53215||53217<=t&&t<=53243||53245<=t&&t<=53271||53273<=t&&t<=53299||53301<=t&&t<=53327||53329<=t&&t<=53355||53357<=t&&t<=53383||53385<=t&&t<=53411||53413<=t&&t<=53439||53441<=t&&t<=53467||53469<=t&&t<=53495||53497<=t&&t<=53523||53525<=t&&t<=53551||53553<=t&&t<=53579||53581<=t&&t<=53607||53609<=t&&t<=53635||53637<=t&&t<=53663||53665<=t&&t<=53691||53693<=t&&t<=53719||53721<=t&&t<=53747||53749<=t&&t<=53775||53777<=t&&t<=53803||53805<=t&&t<=53831||53833<=t&&t<=53859||53861<=t&&t<=53887||53889<=t&&t<=53915||53917<=t&&t<=53943||53945<=t&&t<=53971||53973<=t&&t<=53999||54001<=t&&t<=54027||54029<=t&&t<=54055||54057<=t&&t<=54083||54085<=t&&t<=54111||54113<=t&&t<=54139||54141<=t&&t<=54167||54169<=t&&t<=54195||54197<=t&&t<=54223||54225<=t&&t<=54251||54253<=t&&t<=54279||54281<=t&&t<=54307||54309<=t&&t<=54335||54337<=t&&t<=54363||54365<=t&&t<=54391||54393<=t&&t<=54419||54421<=t&&t<=54447||54449<=t&&t<=54475||54477<=t&&t<=54503||54505<=t&&t<=54531||54533<=t&&t<=54559||54561<=t&&t<=54587||54589<=t&&t<=54615||54617<=t&&t<=54643||54645<=t&&t<=54671||54673<=t&&t<=54699||54701<=t&&t<=54727||54729<=t&&t<=54755||54757<=t&&t<=54783||54785<=t&&t<=54811||54813<=t&&t<=54839||54841<=t&&t<=54867||54869<=t&&t<=54895||54897<=t&&t<=54923||54925<=t&&t<=54951||54953<=t&&t<=54979||54981<=t&&t<=55007||55009<=t&&t<=55035||55037<=t&&t<=55063||55065<=t&&t<=55091||55093<=t&&t<=55119||55121<=t&&t<=55147||55149<=t&&t<=55175||55177<=t&&t<=55203?10:9757==t||9977==t||9994<=t&&t<=9997||127877==t||127938<=t&&t<=127940||127943==t||127946<=t&&t<=127948||128066<=t&&t<=128067||128070<=t&&t<=128080||128110==t||128112<=t&&t<=128120||128124==t||128129<=t&&t<=128131||128133<=t&&t<=128135||128170==t||128372<=t&&t<=128373||128378==t||128400==t||128405<=t&&t<=128406||128581<=t&&t<=128583||128587<=t&&t<=128591||128675==t||128692<=t&&t<=128694||128704==t||128716==t||129304<=t&&t<=129308||129310<=t&&t<=129311||129318==t||129328<=t&&t<=129337||129341<=t&&t<=129342||129489<=t&&t<=129501?13:127995<=t&&t<=127999?14:8205==t?15:9792==t||9794==t||9877<=t&&t<=9878||9992==t||10084==t||127752==t||127806==t||127859==t||127891==t||127908==t||127912==t||127979==t||127981==t||128139==t||128187<=t&&t<=128188||128295==t||128300==t||128488==t||128640==t||128658==t?16:128102<=t&&t<=128105?17:11}return this.Ae=function(t,e){if((e=void 0===e?0:e)<0)return 0;if(!(e>=t.length-1)){var i,s,r,h,n,a=f(c(t,e)),o=[];for(e+=1;e<t.length;e++){var l=t,u=e-1;if(!(55296<=l.charCodeAt(u)&&l.charCodeAt(u)<=56319&&56320<=l.charCodeAt(1+u)&&l.charCodeAt(1+u)<=57343)){if(l=f(c(t,e)),u=l,n=h=r=void 0,r=[i=a].concat(s=o).concat([u]),h=r[r.length-2],1<(n=r.lastIndexOf(14))&&r.slice(1,n).every(function(t){return 3==t})&&-1==[3,13,17].indexOf(i)||(0<(i=r.lastIndexOf(4))&&r.slice(1,i).every(function(t){return 4==t})&&-1==[12,4].indexOf(h)?(r.filter(function(t){return 4==t}).length,1):(0!=h||1!=u)&&(2==h||0==h||1==h?(14==u&&s.every(function(t){return 3==t}),1):2==u||0==u||1==u||(6!=h||6!=u&&7!=u&&9!=u&&10!=u)&&(9!=h&&7!=h||7!=u&&8!=u)&&(10!=h&&8!=h||8!=u)&&3!=u&&15!=u&&5!=u&&12!=h&&(i=-1!=r.indexOf(3)?r.lastIndexOf(3)-1:r.length-2,!(-1!=[13,17].indexOf(r[i])&&r.slice(i+1,-1).every(function(t){return 3==t})&&14==u||15==h&&-1!=[16,17].indexOf(u)||-1==s.indexOf(4)&&4==h&&4==u)))))return e;o.push(l)}}}return t.length},this.Me=function(t){for(var e,i=[],s=0;(e=this.Ae(t,s))<t.length;)i.push(t.slice(s,e)),s=e;return s<t.length&&i.push(t.slice(s)),i},this.Re=function(i){var s=0,t={next:function(){var t,e;return(t=this.Ae(i,s))<i.length?(e=i.slice(s,t),s=t,{value:e,done:!1}):s<i.length?(e=i.slice(s),s=i.length,{value:e,done:!1}):{value:void 0,done:!0}}.bind(this)};return"undefined"!=typeof Symbol&&Symbol.iterator&&(t[Symbol.iterator]=function(){return t}),t},this.we=function(t){for(var e,i=0,s=0;(e=this.Ae(t,s))<t.length;)s=e,i++;return s<t.length&&i++,i},this};GraphemeSplitter=GraphemeSplitter2,self.Ge=GraphemeSplitter2}{let lineInt2=function(t,e,i){i=i||0;var s=[0,0],r=t[1][1]-t[0][1],h=t[0][0]-t[1][0],t=r*t[0][0]+h*t[0][1],n=e[1][1]-e[0][1],a=e[0][0]-e[1][0],e=n*e[0][0]+a*e[0][1],o=r*a-n*h;return scalar_eq2(o,0,i)||(s[0]=(a*t-h*e)/o,s[1]=(r*e-n*t)/o),s},lineSegmentsIntersect2=function(t,e,i,s){var r,h=e[0]-t[0],e=e[1]-t[1],n=s[0]-i[0],s=s[1]-i[1];return n*e-s*h!=0&&(r=(n*(t[1]-i[1])+s*(i[0]-t[0]))/(s*h-n*e),0<=(t=(h*(i[1]-t[1])+e*(t[0]-i[0]))/(n*e-s*h)))&&t<=1&&0<=r&&r<=1},triangleArea2=function(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1])},isLeft2=function(t,e,i){return 0<triangleArea2(t,e,i)},isLeftOn2=function(t,e,i){return 0<=triangleArea2(t,e,i)},isRight2=function(t,e,i){return triangleArea2(t,e,i)<0},isRightOn2=function(t,e,i){return triangleArea2(t,e,i)<=0},collinear2=function(t,e,i,s){var r,h,n;return s?(n=tmpPoint2,(h=tmpPoint1)[0]=e[0]-t[0],h[1]=e[1]-t[1],n[0]=i[0]-e[0],n[1]=i[1]-e[1],r=h[0]*n[0]+h[1]*n[1],h=Math.sqrt(h[0]*h[0]+h[1]*h[1]),n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),Math.acos(r/(h*n))<s):0===triangleArea2(t,e,i)},sqdist2=function(t,e){var i=e[0]-t[0],e=e[1]-t[1];return i*i+e*e},polygonAt2=function(t,e){var i=t.length;return t[e<0?e%i+i:e%i]},polygonClear2=function(t){t.length=0},polygonAppend2=function(t,e,i,s){for(var r=i;r<s;r++)t.push(e[r])},polygonMakeCCW2=function(t){for(var e=0,i=t,s=1;s<t.length;++s)(i[s][1]<i[e][1]||i[s][1]===i[e][1]&&i[s][0]>i[e][0])&&(e=s);return!isLeft2(polygonAt2(t,e-1),polygonAt2(t,e),polygonAt2(t,e+1))&&(polygonReverse2(t),!0)},polygonReverse2=function(t){for(var e=[],i=t.length,s=0;s!==i;s++)e.push(t.pop());for(s=0;s!==i;s++)t[s]=e[s]},polygonIsReflex2=function(t,e){return isRight2(polygonAt2(t,e-1),polygonAt2(t,e),polygonAt2(t,e+1))},polygonCanSee3=function(t,e,i){var s,r=tmpLine1,h=tmpLine2;if(isLeftOn2(polygonAt2(t,e+1),polygonAt2(t,e),polygonAt2(t,i))&&isRightOn2(polygonAt2(t,e-1),polygonAt2(t,e),polygonAt2(t,i)))return!1;for(var n=sqdist2(polygonAt2(t,e),polygonAt2(t,i)),a=0;a!==t.length;++a)if((a+1)%t.length!==e&&a!==e&&isLeftOn2(polygonAt2(t,e),polygonAt2(t,i),polygonAt2(t,a+1))&&isRightOn2(polygonAt2(t,e),polygonAt2(t,i),polygonAt2(t,a))&&(r[0]=polygonAt2(t,e),r[1]=polygonAt2(t,i),h[0]=polygonAt2(t,a),h[1]=polygonAt2(t,a+1),s=lineInt2(r,h),sqdist2(polygonAt2(t,e),s)<n))return!1;return!0},polygonCanSee22=function(t,e,i){for(var s=0;s!==t.length;++s)if(s!==e&&s!==i&&(s+1)%t.length!==e&&(s+1)%t.length!==i&&lineSegmentsIntersect2(polygonAt2(t,e),polygonAt2(t,i),polygonAt2(t,s),polygonAt2(t,s+1)))return!1;return!0},polygonCopy2=function(t,e,i,s){var r=s||[];if(polygonClear2(r),e<i)for(var h=e;h<=i;h++)r.push(t[h]);else{for(h=0;h<=i;h++)r.push(t[h]);for(h=e;h<t.length;h++)r.push(t[h])}return r},polygonGetCutEdges2=function(t){for(var e=[],i=[],s=[],r=Number.MAX_VALUE,h=0;h<t.length;++h)if(polygonIsReflex2(t,h))for(var n=0;n<t.length;++n)if(polygonCanSee3(t,h,n)){for(var i=polygonGetCutEdges2(polygonCopy2(t,h,n,s)),a=polygonGetCutEdges2(polygonCopy2(t,n,h,s)),o=0;o<a.length;o++)i.push(a[o]);i.length<r&&(r=(e=i).length,e.push([polygonAt2(t,h),polygonAt2(t,n)]))}return e},polygonDecomp2=function(t){var e=polygonGetCutEdges2(t);return 0<e.length?polygonSlice2(t,e):[t]},polygonSlice2=function(t,e){if(0===e.length)return[t];if(e instanceof Array&&e.length&&e[0]instanceof Array&&2===e[0].length&&e[0][0]instanceof Array){for(var i=[t],s=0;s<e.length;s++)for(var r=e[s],h=0;h<i.length;h++){var n=i[h],n=polygonSlice2(n,r);if(n){i.splice(h,1),i.push(n[0],n[1]);break}}return i}return s=t.indexOf((r=e)[0]),h=t.indexOf(r[1]),-1!==s&&-1!==h&&[polygonCopy2(t,s,h),polygonCopy2(t,h,s)]},polygonIsSimple2=function(t){for(var e=t,i=0;i<e.length-1;i++)for(var s=0;s<i-1;s++)if(lineSegmentsIntersect2(e[i],e[i+1],e[s],e[s+1]))return!1;for(i=1;i<e.length-2;i++)if(lineSegmentsIntersect2(e[0],e[e.length-1],e[i],e[i+1]))return!1;return!0},getIntersectionPoint2=function(t,e,i,s,r){r=r||0;var h=e[1]-t[1],e=t[0]-e[0],t=h*t[0]+e*t[1],n=s[1]-i[1],s=i[0]-s[0],i=n*i[0]+s*i[1],a=h*s-n*e;return scalar_eq2(a,0,r)?[0,0]:[(s*t-e*i)/a,(h*i-n*t)/a]},polygonQuickDecomp2=function(t,e,i,s,r,h,n){h=h||100,n=n||0,r=r||25,e=void 0!==e?e:[],i=i||[],s=s||[];var a=[0,0],o=[0,0],l=[0,0],u=0,c=0,f=0,d=0,C=0,p=0,m=0,v=[],S=[],g=t,T=t;if(!(T.length<3))if(h<++n)console.warn("quickDecomp: max level ("+h+") reached.");else{for(var _=0;_<t.length;++_)if(polygonIsReflex2(g,_)){i.push(g[_]);for(var u=c=Number.MAX_VALUE,y=0;y<t.length;++y)isLeft2(polygonAt2(g,_-1),polygonAt2(g,_),polygonAt2(g,y))&&isRightOn2(polygonAt2(g,_-1),polygonAt2(g,_),polygonAt2(g,y-1))&&(l=getIntersectionPoint2(polygonAt2(g,_-1),polygonAt2(g,_),polygonAt2(g,y),polygonAt2(g,y-1)),isRight2(polygonAt2(g,_+1),polygonAt2(g,_),l))&&(f=sqdist2(g[_],l))<c&&(c=f,o=l,p=y),isLeft2(polygonAt2(g,_+1),polygonAt2(g,_),polygonAt2(g,y+1))&&isRightOn2(polygonAt2(g,_+1),polygonAt2(g,_),polygonAt2(g,y))&&(l=getIntersectionPoint2(polygonAt2(g,_+1),polygonAt2(g,_),polygonAt2(g,y),polygonAt2(g,y+1)),isLeft2(polygonAt2(g,_-1),polygonAt2(g,_),l))&&(f=sqdist2(g[_],l))<u&&(u=f,a=l,C=y);if(p===(C+1)%t.length)l[0]=(o[0]+a[0])/2,l[1]=(o[1]+a[1])/2,s.push(l),_<C?(polygonAppend2(v,g,_,C+1),v.push(l),S.push(l),0!==p&&polygonAppend2(S,g,p,g.length),polygonAppend2(S,g,0,_+1)):(0!==_&&polygonAppend2(v,g,_,g.length),polygonAppend2(v,g,0,C+1),v.push(l),S.push(l),polygonAppend2(S,g,p,_+1));else{if(C<p&&(C+=t.length),d=Number.MAX_VALUE,C<p)return e;for(y=p;y<=C;++y)isLeftOn2(polygonAt2(g,_-1),polygonAt2(g,_),polygonAt2(g,y))&&isRightOn2(polygonAt2(g,_+1),polygonAt2(g,_),polygonAt2(g,y))&&(f=sqdist2(polygonAt2(g,_),polygonAt2(g,y)))<d&&polygonCanSee22(g,_,y)&&(d=f,m=y%t.length);_<m?(polygonAppend2(v,g,_,m+1),0!==m&&polygonAppend2(S,g,m,T.length),polygonAppend2(S,g,0,_+1)):(0!==_&&polygonAppend2(v,g,_,T.length),polygonAppend2(v,g,0,m+1),polygonAppend2(S,g,m,_+1))}return v.length<S.length?(polygonQuickDecomp2(v,e,i,s,r,h,n),polygonQuickDecomp2(S,e,i,s,r,h,n)):(polygonQuickDecomp2(S,e,i,s,r,h,n),polygonQuickDecomp2(v,e,i,s,r,h,n)),e}e.push(t)}return e},polygonRemoveCollinearPoints2=function(t,e){for(var i=0,s=t.length-1;3<t.length&&0<=s;--s)collinear2(polygonAt2(t,s-1),polygonAt2(t,s),polygonAt2(t,s+1),e)&&(t.splice(s%t.length,1),i++);return i},polygonRemoveDuplicatePoints2=function(t,e){for(var i=t.length-1;1<=i;--i)for(var s=t[i],r=i-1;0<=r;--r)if(points_eq2(s,t[r],e)){t.splice(i,1);continue}},scalar_eq2=function(t,e,i){return i=i||0,Math.abs(t-e)<=i},points_eq2=function(t,e,i){return scalar_eq2(t[0],e[0],i)&&scalar_eq2(t[1],e[1],i)};lineInt=lineInt2,lineSegmentsIntersect=lineSegmentsIntersect2,triangleArea=triangleArea2,isLeft=isLeft2,isLeftOn=isLeftOn2,isRight=isRight2,isRightOn=isRightOn2,collinear=collinear2,sqdist=sqdist2,polygonAt=polygonAt2,polygonClear=polygonClear2,polygonAppend=polygonAppend2,polygonMakeCCW=polygonMakeCCW2,polygonReverse=polygonReverse2,polygonIsReflex=polygonIsReflex2,polygonCanSee=polygonCanSee3,polygonCanSee2=polygonCanSee22,polygonCopy=polygonCopy2,polygonGetCutEdges=polygonGetCutEdges2,polygonDecomp=polygonDecomp2,polygonSlice=polygonSlice2,polygonIsSimple=polygonIsSimple2,getIntersectionPoint=getIntersectionPoint2,polygonQuickDecomp=polygonQuickDecomp2,polygonRemoveCollinearPoints=polygonRemoveCollinearPoints2,polygonRemoveDuplicatePoints=polygonRemoveDuplicatePoints2,scalar_eq=scalar_eq2,points_eq=points_eq2,tmpPoint1=[],tmpPoint2=[],tmpLine1=[],tmpLine2=[],self.Oe={Pe:polygonDecomp2,Le:polygonQuickDecomp2,xe:polygonIsSimple2,De:polygonRemoveCollinearPoints2,Ne:polygonRemoveDuplicatePoints2,Fe:polygonMakeCCW2}}{let isReady=!1,hasAppStarted=!1,buildMode="dev",internalApiToken=Symbol("Construct internal API token"),internalApiTokenAccessesRemaining=14,C33=self.$e=class C3{constructor(){throw TypeError("static class can't be instantiated")}static Be(){if(internalApiTokenAccessesRemaining<=0)throw new Error("cannot obtain internal API token");return--internalApiTokenAccessesRemaining,internalApiToken}static ke(){isReady=!0}static We(){return isReady}static Ve(){hasAppStarted=!0}static He(){return hasAppStarted}static Ue(t){buildMode=t}static je(){return buildMode}static Xe(){return"final"===buildMode}};C33.isDebug=!1,C33.Ye=!1,C33.hardwareConcurrency=navigator.hardwareConcurrency||2,self.qe={}}{let C33=self.$e;C33.Ke=class QueryParser{constructor(t){this.Je=t,this.Ze=new Map,this.Qe()}Qe(){let t=this.Je;var e;for(e of(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&"))this.ti(e)}ti(t){var e,i;t&&(t.includes("=")?(i=t.indexOf("="),e=decodeURIComponent(t.substring(0,i)),i=decodeURIComponent(t.substring(i+1)),this.Ze.set(e,i)):this.Ze.set(t,null))}ei(){for(var t of this.Ze)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}si(t){return this.Ze.has(t)}ri(t){t=this.Ze.get(t);return void 0===t?null:t}hi(){history.replaceState("",document.title,location.pathname+location.search)}ni(t){this.Je=t,this.Ze.clear(),this.Qe()}},C33.ai=new C33.Ke(location.search),C33.oi=new C33.Ke(location.hash),C33.ai.si("perf")&&(C33.li=!0),"dev"!==C33.ai.ri("mode")&&C33.Ue("final")}{let GetWindowsNTVersionName2=function(t){var e=parseFloat(t),i=windowsNTVerMap.get(e);return i||(13<=e?"11":"NT "+t)},C33=(GetWindowsNTVersionName=GetWindowsNTVersionName2,self.$e),UNKNOWN="(unknown)",windowsNTVerMap=(C33.ci={fi:UNKNOWN,di:UNKNOWN,Ci:UNKNOWN,mi:UNKNOWN,vi:NaN,Si:UNKNOWN,gi:"browser",Ti:!0,_i:!1,yi:!1,Ei:!1,Ii:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),uaStr=navigator.userAgent,uaData=navigator.userAgentData;if(uaData&&0<uaData.brands.length){let ReadBrandList2=function(t){let e="",i="",s="",r="";for(var h of t){var n=RECOGNIZED_BROWSERS.get(h.brand),n=(!e&&n&&(e=n,i=h.version),RECOGNIZED_ENGINES.get(h.brand));!s&&n&&(s=n,r=h.version)}e||"Chromium"!==s||(C33.ci.Ci="Chromium",C33.ci.mi=r),C33.ci.Ci=e||UNKNOWN,C33.ci.mi=i||UNKNOWN,C33.ci.Si=s||UNKNOWN},RECOGNIZED_BROWSERS=(ReadBrandList=ReadBrandList2,C33.ci.fi=uaData.platform,C33.ci._i=uaData.mobile,C33.ci.Ti=!C33.ci._i,new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]])),RECOGNIZED_ENGINES=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]),didGetDetailedInfo=(ReadBrandList2(uaData.brands),!1);C33.ci.Ii=async()=>{if(!didGetDetailedInfo)try{var t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);ReadBrandList2(t.fullVersionList),"Windows"===C33.ci.fi?C33.ci.di=GetWindowsNTVersionName2(t.platformVersion):C33.ci.di=t.platformVersion,didGetDetailedInfo=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let RunTest2=function(t,e){var i;for(i of Array.isArray(t)?t:[t]){var s=i.exec(uaStr);if(s){e(s);break}}},hasChrome=(RunTest=RunTest2,RunTest2(/windows\s+nt\s+([\d\.]+)/i,t=>{C33.ci.fi="Windows";t=t[1];C33.ci.di=GetWindowsNTVersionName2(t)}),RunTest2(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{C33.ci.fi="macOS",C33.ci.di=t[1].replace(/_/g,".")}),RunTest2(/CrOS/,()=>{C33.ci.fi="Chrome OS"}),RunTest2(/linux|openbsd|freebsd|netbsd/i,()=>{C33.ci.fi="Linux"}),RunTest2(/android/i,()=>{C33.ci.fi="Android"}),RunTest2(/android\s+([\d\.]+)/i,t=>{C33.ci.fi="Android",C33.ci.di=t[1]}),C33.ci.fi===UNKNOWN&&(RunTest2(/(iphone|ipod|ipad)/i,t=>{C33.ci.fi="iOS"}),RunTest2([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{C33.ci.fi="iOS",C33.ci.di=t[1].replace(/_/g,".")})),/chrome\//i.test(uaStr)),hasChromium=/chromium\//i.test(uaStr),hasEdge=/edg\//i.test(uaStr),hasOpera=/OPR\//.test(uaStr),hasNWjs=/nwjs/i.test(uaStr),hasSafari=/safari\//i.test(uaStr),hasWebKit=/webkit/i.test(uaStr),desktopOSs=(hasEdge||hasOpera||RunTest2(/chrome\/([\d\.]+)/i,t=>{C33.ci.Ci="Chrome",C33.ci.mi=t[1],C33.ci.Si="Chromium"}),RunTest2(/edg\/([\d\.]+)/i,t=>{C33.ci.Ci="Edge",C33.ci.mi=t[1],C33.ci.Si="Chromium"}),RunTest2(/OPR\/([\d\.]+)/,t=>{C33.ci.Ci="Opera",C33.ci.mi=t[1],C33.ci.Si="Chromium"}),RunTest2(/chromium\/([\d\.]+)/i,t=>{C33.ci.Ci="Chromium",C33.ci.mi=t[1],C33.ci.Si="Chromium"}),RunTest2(/nwjs\/[0-9.]+/i,t=>{C33.ci.Ci="NW.js",C33.ci.mi=t[1],C33.ci.Si="Chromium",C33.ci.gi="nwjs"}),RunTest2(/firefox\/([\d\.]+)/i,t=>{C33.ci.Ci="Firefox",C33.ci.mi=t[1],C33.ci.Si="Gecko"}),!hasSafari||hasChrome||hasChromium||hasEdge||hasOpera||hasNWjs||(C33.ci.Ci="Safari",C33.ci.Si="WebKit",RunTest2(/version\/([\d\.]+)/i,t=>{C33.ci.mi=t[1]}),RunTest2(/crios\/([\d\.]+)/i,t=>{C33.ci.Ci="Chrome for iOS",C33.ci.mi=t[1]}),RunTest2(/fxios\/([\d\.]+)/i,t=>{C33.ci.Ci="Firefox for iOS",C33.ci.mi=t[1]}),RunTest2(/edgios\/([\d\.]+)/i,t=>{C33.ci.Ci="Edge for iOS",C33.ci.mi=t[1]})),C33.ci.Si===UNKNOWN&&hasWebKit&&(C33.ci.Si="WebKit"),"Android"===C33.ci.fi&&"Safari"===C33.ci.Ci&&(C33.ci.Ci="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),isDesktop=desktopOSs.has(C33.ci.fi)||"nwjs"===C33.ci.gi;C33.ci.Ti=isDesktop,C33.ci._i=!isDesktop}"Chrome"===C33.ci.Ci&&"browser"===C33.ci.gi&&/wv\)/.test(uaStr)&&(C33.ci.gi="webview"),"nwjs"!==C33.ci.gi&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(C33.ci.gi="webapp"),C33.ci.vi=parseFloat(C33.ci.mi);let looksLikeIPadOS="macOS"===C33.ci.fi&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;looksLikeIPadOS&&(C33.ci.fi="iOS",C33.ci.di=C33.ci.mi,C33.ci.Ti=!1,C33.ci._i=!0,C33.ci.Ei=!0),C33.ci.yi="macOS"===C33.ci.fi||"iOS"===C33.ci.fi}{let asyncifyRequest2=function(i){return new Promise((t,e)=>{i.onsuccess=()=>t(i.result),i.onerror=()=>e(i.error)})},asyncifyTransaction2=function(i){return new Promise((t,e)=>{i.oncomplete=()=>t(),i.onerror=()=>e(i.error),i.onabort=()=>e(i.error)})},openReadOnlyTransaction2=function(t,e){return openTransaction(t,e)},openWriteTransaction2=function(t,e){return openTransaction(t,e,!0)},lazyOpenDatabase2=function(e){RequireString2(e);let t=DATABASE_PROMISE_MAP.get(e);return t instanceof Promise||(t=openDatabase(e),DATABASE_PROMISE_MAP.set(e,t),t.catch(t=>DATABASE_PROMISE_MAP.delete(e))),t},RequireString2=function(t){if("string"!=typeof t)throw new TypeError("expected string")},getEntriesFromCursor2=function(t,r){let e=t.objectStore(STORE_NAME).openCursor();return new Promise(i=>{let s=[];e.onsuccess=t=>{var e=t.target.result;if(e){switch(r){case"entries":s.push([e.key,e.value]);break;case"keys":s.push(e.key);break;case"values":s.push(e.value)}e.continue()}else i(s)}})},VERSION=(asyncifyRequest=asyncifyRequest2,asyncifyTransaction=asyncifyTransaction2,openReadOnlyTransaction=openReadOnlyTransaction2,openWriteTransaction=openWriteTransaction2,lazyOpenDatabase=lazyOpenDatabase2,RequireString=RequireString2,getEntriesFromCursor=getEntriesFromCursor2,2),STORE_NAME="keyvaluepairs",DATABASE_PROMISE_MAP=new Map,SUPPORTS_GETALL="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,SUPPORTS_GETALLKEYS="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function openTransaction(e,i,s=!1,r=!0){var t=await lazyOpenDatabase2(e);try{return i(t.transaction([STORE_NAME],s?"readwrite":"readonly"))}catch(t){if(r&&"InvalidStateError"===t.name)return DATABASE_PROMISE_MAP.delete(e),openTransaction(e,i,s,!1);throw t}}async function openDatabase(e){RequireString2(e);var t=indexedDB.open(e,VERSION);return t.addEventListener("upgradeneeded",t=>{try{t.target.result.createObjectStore(STORE_NAME)}catch(t){console.error("Failed to create objectstore for database "+e,t)}}),asyncifyRequest2(t)}class KVStorageContainer{constructor(t){RequireString2(t),this.name=t}async ready(){await lazyOpenDatabase2(this.name)}set(i,s){return RequireString2(i),openWriteTransaction2(this.name,async t=>{var e=t.objectStore(STORE_NAME).put(s,i),e=asyncifyRequest2(e),t=asyncifyTransaction2(t);await Promise.all([t,e])})}get(i){return RequireString2(i),openReadOnlyTransaction2(this.name,async t=>{var e=t.objectStore(STORE_NAME).get(i),e=asyncifyRequest2(e),t=asyncifyTransaction2(t),[,t]=await Promise.all([t,e]);return t})}delete(i){return RequireString2(i),openWriteTransaction2(this.name,async t=>{var e=t.objectStore(STORE_NAME).delete(i),e=asyncifyRequest2(e),t=asyncifyTransaction2(t);await Promise.all([t,e])})}clear(){return openWriteTransaction2(this.name,async t=>{var e=t.objectStore(STORE_NAME).clear(),e=asyncifyRequest2(e),t=asyncifyTransaction2(t);await Promise.all([t,e])})}keys(){return openReadOnlyTransaction2(this.name,async t=>{let e;e=SUPPORTS_GETALLKEYS?(i=t.objectStore(STORE_NAME).getAllKeys(),asyncifyRequest2(i)):getEntriesFromCursor2(t,"keys");var i=asyncifyTransaction2(t),[,t]=await Promise.all([i,e]);return t})}values(){return openReadOnlyTransaction2(this.name,async t=>{let e;e=SUPPORTS_GETALL?(i=t.objectStore(STORE_NAME).getAll(),asyncifyRequest2(i)):getEntriesFromCursor2(t,"values");var i=asyncifyTransaction2(t),[,t]=await Promise.all([i,e]);return t})}entries(){return openReadOnlyTransaction2(this.name,async t=>{var e=getEntriesFromCursor2(t,"entries"),t=asyncifyTransaction2(t),[,t]=await Promise.all([t,e]);return t})}}self.Ai=KVStorageContainer}{let NOT_IMPLEMENTED2=function(t){throw new Error(`"${t}" is not implemented`)},DISALLOW_CALLBACK2=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},StructuredClone2=function(s){return"object"==typeof s?new Promise(e=>{var{port1:t,port2:i}=new MessageChannel;i.onmessage=t=>e(t.data),t.postMessage(s)}):Promise.resolve(s)},KVStorageContainer=(NOT_IMPLEMENTED=NOT_IMPLEMENTED2,DISALLOW_CALLBACK=DISALLOW_CALLBACK2,StructuredClone=StructuredClone2,self.Ai),CRITICAL_ERRORS=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i],memoryStorage=new WeakMap,isInMemory=!1;"undefined"==typeof indexedDB&&(isInMemory=!0,console.warn("Unable to use local storage because indexedDB is not defined"));class ForageAdaptor{constructor(t){this.Mi=t,memoryStorage.set(this,new Map)}Ri(t){if(!isInMemory)for(var e of CRITICAL_ERRORS)if(t&&e.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),isInMemory=!0;break}}async wi(t){t=memoryStorage.get(this).get(t),t=await StructuredClone2(t);return void 0===t?null:t}async bi(t,e){e=await StructuredClone2(e),memoryStorage.get(this).set(t,e)}Gi(t){memoryStorage.get(this).delete(t)}Oi(){memoryStorage.get(this).clear()}Pi(){return Array.from(memoryStorage.get(this).keys())}Li(){return isInMemory}async getItem(e,t){if(DISALLOW_CALLBACK2(t),isInMemory)return this.wi(e);let i;try{i=await this.Mi.get(e)}catch(t){return this.Ri(t),isInMemory?this.wi(e):(console.error(`Error reading '${e}' from storage, returning null: `,t),null)}return void 0===i?null:i}async setItem(e,i,t){if(DISALLOW_CALLBACK2(t),void 0===i&&(i=null),isInMemory)await this.bi(e,i);else try{await this.Mi.set(e,i)}catch(t){if(this.Ri(t),!isInMemory)throw t;await this.bi(e,i)}}async removeItem(e,t){if(DISALLOW_CALLBACK2(t),isInMemory)this.Gi(e);else try{await this.Mi.delete(e)}catch(t){this.Ri(t),isInMemory?this.Gi(e):console.error(`Error removing '${e}' from storage: `,t)}}async clear(t){if(DISALLOW_CALLBACK2(t),isInMemory)this.Oi();else try{await this.Mi.clear()}catch(t){this.Ri(t),isInMemory?this.Oi():console.error("Error clearing storage: ",t)}}async keys(t){if(DISALLOW_CALLBACK2(t),isInMemory)return this.Pi();let e=[];try{e=await this.Mi.keys()}catch(t){if(this.Ri(t),isInMemory)return this.Pi();console.error("Error getting storage keys: ",t)}return e}ready(t){return DISALLOW_CALLBACK2(t),isInMemory?Promise.resolve(!0):this.Mi.ready()}xi(t){if("object"!=typeof t)throw new TypeError("invalid options object");t=t.name;if("string"!=typeof t)throw new TypeError("invalid store name");t=new KVStorageContainer(t);return new ForageAdaptor(t)}length(t){NOT_IMPLEMENTED2("localforage.length()")}key(t,e){NOT_IMPLEMENTED2("localforage.key()")}iterate(t,e){NOT_IMPLEMENTED2("localforage.iterate()")}Di(t){NOT_IMPLEMENTED2("localforage.setDriver()")}config(t){NOT_IMPLEMENTED2("localforage.config()")}Ni(t){NOT_IMPLEMENTED2("localforage.defineDriver()")}Fi(){NOT_IMPLEMENTED2("localforage.driver()")}supports(t){NOT_IMPLEMENTED2("localforage.supports()")}dropInstance(){NOT_IMPLEMENTED2("localforage.dropInstance()")}$i(){isInMemory=!1}}self.localforage=new ForageAdaptor(new KVStorageContainer("localforage"))}{let C33=self.$e;if(C33.Bi={},C33.Bi.ki=(()=>{try{var t;return"undefined"==typeof document?!1:void 0!==(t=document.createElement("div")).animate&&void 0!==t.animate([{opacity:"0"},{opacity:"1"}],1e3).reverse}catch(t){return!1}})(),C33.Bi.Wi="undefined"!=typeof HTMLDialogElement,C33.Bi.Vi=!!self.requestIdleCallback,C33.Bi.ImageBitmap=!!self.createImageBitmap,C33.Bi.ImageBitmapOptions=!1,C33.Bi.Hi=!1,C33.Bi.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{C33.Bi.ImageBitmapOptions=!0}).catch(()=>{C33.Bi.ImageBitmapOptions=!1})}catch(err){C33.Bi.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{C33.Bi.Hi=10===t.width&&10===t.height}).catch(()=>{C33.Bi.Hi=!1})}catch(err){C33.Bi.Hi=!1}}if(C33.Bi.Ui=!(!navigator.clipboard||!navigator.clipboard.readText),C33.Bi.ji=!(!navigator.permissions||!navigator.permissions.query),C33.Bi.Xi=!1,C33.Bi.ji){let permission={name:"clipboard-read"};navigator.permissions.query(permission).then(()=>{C33.Bi.Xi=!0}).catch(()=>{C33.Bi.Xi=!1})}C33.Bi.Yi=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),C33.Bi.Ki="undefined"!=typeof Proxy,C33.Bi.Ji="undefined"!=typeof document&&void 0!==document.createElement("a").download,C33.Bi.Zi="function"==typeof fetch,C33.Bi.Qi=!!(self.isSecureContext&&"Opera"!==C33.ci.Ci&&navigator.storage&&navigator.storage.persist),C33.Bi.ts=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),C33.Bi.es=(()=>{var t;return"undefined"!=typeof document&&"iOS"!==C33.ci.fi&&!!((t=document.documentElement).requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),C33.Bi.ImageDecoder=void 0!==self.ImageDecoder,C33.Bi.ss=!!self.VideoEncoder,C33.Bi.rs=!!self.showOpenFilePicker,C33.Bi.hs=!!self.queryLocalFonts,C33.Bi.UserActivation=!!navigator.userActivation,C33.Bi.ns=!1,(async()=>{let e;"undefined"==typeof document?e=new OffscreenCanvas(32,32):((e=document.createElement("canvas")).width=32,e.height=32);var t=e.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let i=null;try{e.convertToBlob?i=await e.convertToBlob({type:"image/webp",quality:1}):e.toBlob&&(i=await new Promise(t=>e.toBlob(t,"image/webp",1))),C33.Bi.ns=i&&"image/webp"===i.type}catch(t){C33.Bi.ns=!1}})()}{let C33=self.$e;if(!String.prototype.trimStart){let startWhitespace=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(startWhitespace,"")}}if(!String.prototype.trimEnd){let endWhitespace=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(endWhitespace,"")}}if(String.prototype.replaceAll||(String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(C33.os(t),"g"),e)}),Array.prototype.values||(Array.prototype.values=function*(){for(var t of this)yield t}),!Array.prototype.flat){let arrayFlat2=function(t,i){return t.reduce((t,e)=>(0<i&&Array.isArray(e)?Array.prototype.push.apply(t,arrayFlat2(e,i-1)):t.push(e),t),[])};arrayFlat=arrayFlat2,Array.prototype.flat=function(t=1){return arrayFlat2(this,t)}}Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.ls||(Set.prototype.ls=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(var e of this)if(!t.has(e))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((i,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,e)=>i({usage:t,quota:e}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let assertFail2=function(t){var e=C33.us();console.error("Assertion failure: "+t+"\n\nStack trace:\n"+e)},C33=(assertFail=assertFail2,self.$e);self.assert=function(t,e){t||assertFail2(e)}}{let C33=self.$e,C3X=self.qe,TypedArray=(C33.cs=function(t){return"number"==typeof t},C33.ds=function(t){return C33.cs(t)&&isFinite(t)},C33.Cs=function(t){if(!C33.cs(t))throw new TypeError("expected number")},C33.vs=function(t){C33.Ss(t)},C33.gs=function(t,e,i){if(!C33.cs(t)||isNaN(t)||t<e||i<t)throw new RangeError("number outside of range")},C33.Ts=function(...t){for(var e of t);},C33._s=function(t){if(!C33.ds(t))throw new TypeError("expected finite number")},C33.ys=function(t){C33.Ss(t)},C33.Es=function(...t){for(var e of t);},C33.Is=function(t){return"string"==typeof t},C33.As=function(t){if(!C33.Is(t))throw new TypeError("expected string")},C33.Ms=function(t){C33.Ss(t)},C33.Rs=function(...t){for(var e of t);},C33.ws=function(t){return"object"==typeof t&&null!==t&&((t=Object.getPrototypeOf(t))?t.constructor===Object:null===t)},C33.bs=function(t){if(!C33.ws(t))throw new TypeError("expected simple object")},C33.Gs=function(t){if(!C33.Ss(t)&&!C33.ws(t))throw new TypeError("expected simple object")},C33.Os=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},C33.Ps=function(t){if(!C33.Os(t))throw new TypeError("expected object")},C33.Ls=function(t){C33.Ss(t)},C33.xs=function(...t){for(var e of t);},C33.Ds=function(t){return C33.Ns(t,Blob)&&"string"==typeof t.name},C33.Fs=function(t){if(!C33.Ds(t))throw new TypeError("expected file")},C33.$s=function(t){C33.Ss(t)},C33.Bs=function(t){return Array.isArray(t)},C33.ks=function(t){if(!C33.Bs(t))throw new TypeError("expected array")},C33.Ws=function(t){C33.Ss(t)},C33.Vs=function(...t){for(var e of t);},C33.Hs=function(t){return!(!C33.Bs(t)||t.length&&!C33.Bs(t[0]))},C33.Us=function(t){if(!C33.Hs(t))throw new TypeError("expected 2d array");for(var e of t)if(!C33.Bs(e))throw new TypeError("expected 2d array")},C33.js=function(t){C33.Ss(t)},C33.Xs=function(t){return"function"==typeof t},C33.Ys=function(t,e){if(!C33.Xs(t))throw new TypeError("expected function");if(!C33.Ss(e)&&t!==e)throw new TypeError("expected same function reference")},C33.qs=function(t){C33.Ss(t)},C33.zs=function(...t){for(var e of t);},C33.Ks=function(t,...e){if(!C33.Xs(t))throw new TypeError("expected function");if(!e.length)throw new Error("missing comparison functions");for(var i of e)if(!C33.Ss(i)&&t===i)return;throw new TypeError("expected same function reference")},C33.Js=function(...t){if(!C33.Ss(t))for(var e of t);},C33.Zs=function(t,e){return t instanceof e},C33.Qs=function(t,...e){for(var i of e)if(C33.Zs(t,i))return!0;return!1},C33.tr=function(t,e){if(!C33.Zs(t,e))throw new TypeError("unexpected type")},C33.er=function(t,e){C33.Ss(t)},C33.ir=function(t,...e){for(var i of e);},C33.rr=function(t,...e){if(!C33.Qs(t,...e))throw new TypeError("unexpected type")},C33.hr=function(t,...e){if(!C33.Ss(t)&&!C33.Qs(t,...e))throw new TypeError("unexpected type")},C33.nr=function(t,e){for(var i of t)if(!C33.Zs(i,e))return!1;return!0},C33.lr=function(t){for(var e of t)if(!C33.ds(e))return!1;return!0},C33.ur=function(t,e){for(var i of t);},C33.cr=function(t,e){if(!C33.Ss(t))for(var i of t);},C33.dr=function(t,e){if(!C33.Ss(t))for(var i of t);},C33.Cr=function(t){for(var e of t);},C33.pr=function(t){if(!C33.Ss(t))for(var e of t);},C33.mr=function(t,e){return!(C33.Ss(t)||!C33.Is(t.nodeName))&&(!e||C33.vr(t.nodeName,e))},C33.Sr=function(t,e){if(C33.Ss(t)||!C33.Is(t.nodeName))throw new TypeError("expected DOM node");if(e&&!C33.vr(t.nodeName,e))throw new TypeError(`expected DOM '${e}' node`)},C33.gr=function(t,e){C33.Ss(t)},C33.Tr=function(t,e){return!(C33.Ss(t)||!C33.Is(t.tagName))&&(!e||C33.vr(t.tagName,e))},C33._r=function(t,e){if(C33.Ss(t)||!C33.Is(t.tagName))throw new TypeError("expected HTML element");if(e&&!C33.vr(t.tagName,e))throw new TypeError(`expected HTML '${e}' element`)},C33.yr=function(t,e){C33.Ss(t)},C33.Er=function(t){return C33.Tr(t,"img")||C33.Tr(t,"canvas")||C33.Tr(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},C33.Ir=function(t){if(!C33.Er(t))throw new TypeError("expected drawable")},C33.Ar=function(t){C33.Ss(t)},C33.Mr=function(t){return t instanceof ImageData||C33.Er(t)},C33.Rr=function(t){if(!C33.Mr(t))throw new TypeError("expected drawable or image data")},C33.br=function(t){if(!C33.Ss(t)&&!C33.Mr(t))throw new TypeError("expected drawable or image data")},C33.Gr=function(t){return"string"==typeof t||C33.HtmlString&&t instanceof C33.HtmlString||t instanceof C33.Or},C33.Pr=function(t){if(!C33.Gr(t))throw new TypeError("expected string-like")},C33.Lr=function(t){C33.Ss(t)},C33.Dr=function(...t){for(var e of t);},C33.Nr=function(){throw new Error("must be overridden")},C33.Fr=function(){throw new Error("not yet implemented")},C33.$r=function(t,...e){let i=t;if(void 0===i)return!1;for(var s of e){if(void 0===i[s])return!1;i=i[s]}return!0},C33.Ss=function(t){return null==t},C33.Br=function(t){var e,i=t[0].constructor;for(e of t)if(e.constructor!==i)return!1;return i},C33.kr=function(t,e){for(var i of t)if(!(i instanceof e))return!1;return!0},Object.getPrototypeOf(Uint8Array));C33.Wr=function(t){return C33.Zs(t,TypedArray)},C33.Vr=function(t){},C33.Hr=function(t){C33.Ur(t,TypedArray)},C33.jr=function(t,...e){if(!C33.Xr(t,...e))throw new TypeError("unexpected type")},C33.Xr=function(t,...e){for(var i of e)if(C33.Ns(t,i))return!0;return!1},C33.Ur=function(t,e){if(!C33.Ns(t,e))throw new TypeError("unexpected type")},C33.Ns=function(t,e){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===e.name)return!0;return!1},C3X.Cs=C33.Cs,C3X.vs=C33.vs,C3X._s=C33._s,C3X.ys=C33.ys,C3X.As=C33.As,C3X.Ms=C33.Ms,C3X.Ps=C33.Ps,C3X.Ls=C33.Ls,C3X.ks=C33.ks,C3X.Ws=C33.Ws,C3X.Ys=C33.Ys,C3X.qs=C33.qs,C3X.tr=C33.tr,C3X.er=C33.er,C3X.Ss=C33.Ss}{let isValidTypeChange2=function(t,e){t=C33.getType(t),e=C33.getType(e);return"null"===t||"null"===e||"undefined"!==t&&"undefined"!==e&&t===e},logDefendedObjectWarning2=function(t){console.warn("[Defence] "+t+" @",C33.us())},CheckDefendedObjectsUsedCorrectly2=function(){var t;checkRafId=-1,(0<ctorObjectToProxy.size||0<ctorProxyToObject.size)&&(t=[...new Set([...ctorObjectToProxy.keys()].map(t=>C33.Yr(t)))].join(","),console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+t),ctorObjectToProxy.clear(),ctorProxyToObject.clear())},getObjectPropertySet2=function(t){var e,i=new Set;for(e in t)i.add(e);return i},VerifyObjectPropertiesConsistent2=function(t,e){var i=getObjectPropertySet2(e),e=typeProperties.get(t);if(e){var s,r=[];for(s of e.values())i.has(s)?i.delete(s):r.push(s);C33.qr(r,[...i]),r.length&&console.warn(`[Defence] '${C33.Yr(t)}' constructor creates inconsistent properties: `+r.join(", "))}else typeProperties.set(t,i)},C33=(isValidTypeChange=isValidTypeChange2,logDefendedObjectWarning=logDefendedObjectWarning2,CheckDefendedObjectsUsedCorrectly=CheckDefendedObjectsUsedCorrectly2,getObjectPropertySet=getObjectPropertySet2,VerifyObjectPropertiesConsistent=VerifyObjectPropertiesConsistent2,self.$e),logRafIds=new Map;C33.zr=function(t,e){console.log("%c"+t,"font-weight: bold; color:"+e)},C33.Kr=function(t,...e){logRafIds.has(t)||logRafIds.set(t,-1),-1===logRafIds.get(t)&&logRafIds.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...e),logRafIds.set(t,-1)}))};let measures,ctorObjectToProxy=(C33.Jr=function(t){performance.mark(t),(measures=measures||new Map).has(t)||measures.set(t,{current:0,total:0,Zr:0,Qr:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.Zr.toPrecision(3)} :: calls => `+this.Qr}})},C33.th=function(t){performance.measure("measure-"+t,t);var e=performance.getEntriesByName("measure-"+t)[0],i=measures.get(t);i.current=e.duration,i.total+=i.current,i.Zr=i.total/i.Qr,console.log(i.toString()),i.Qr++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},C33.us=function(){return(new Error).stack},C33.eh=function(){debugger},C33.cast=function(t,e){return t&&t instanceof e?t:null},C33.Yr=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":C33.cs(t)?"<number>":C33.Is(t)?"<string>":C33.Bs(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":C33.Xs(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},C33.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},C33.range=function*(e,i){if(!isFinite(Math.abs(e-i)))throw new Error("Invalid parameters");if(i<e)for(let t=e-1;t>=i;t--)yield t;else for(let t=e;t<i;t++)yield t},new Map),ctorProxyToObject=new Map,proxyToObject=new WeakMap,releasedObjects=new WeakMap,VALID_GET_MISSING_KEYS=(C33.ih={},new Set(["then","splice"])),checkRafId=(C33.ih.get=function(t,e){return e in t||"symbol"==typeof e||VALID_GET_MISSING_KEYS.has(e)||logDefendedObjectWarning2(`Accessed missing property '${e}' from defended object '${C33.Yr(t)}', returning undefined`),releasedObjects.has(t)&&"symbol"!=typeof e&&!VALID_GET_MISSING_KEYS.has(e)&&logDefendedObjectWarning2(`Accessed property '${e}' on a released object '${C33.Yr(t)}'
Object was originally released at: ${releasedObjects.get(t)})
Call stack at access: `),t[e]},C33.ih.set=function(t,e,i){return e in t||ctorObjectToProxy.has(t)||logDefendedObjectWarning2(`Set non-existent property '${e}' to '${i}' on defended object '${C33.Yr(t)}'`),isValidTypeChange2(t[e],i)||ctorObjectToProxy.has(t)||logDefendedObjectWarning2(`Set '${C33.getType(t[e])}' property '${e}' to type '${C33.getType(i)}' on defended object '${C33.Yr(t)}'`),releasedObjects.has(t)&&logDefendedObjectWarning2(`Set property '${e}' on a released object '${C33.Yr(t)}'
Object was originally released at: ${releasedObjects.get(t)})
Call stack at access: `),t[e]=i,!0},C33.ih.deleteProperty=function(t,e){throw new ReferenceError(`Cannot delete property '${e}' from defended object '${C33.Yr(t)}'`)},C33.ih.defineProperty=function(t,e,i){throw new ReferenceError(`Cannot define property '${e}' on defended object '${C33.Yr(t)}'`)},C33.ih.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${C33.Yr(t)}'`)},-1),typeProperties=(C33.rh=class DefendedBase{constructor(){var t,e;if(C33.Ye&&C33.Bi.Ki)return t=Object.create(new.target.prototype),e=new Proxy(t,C33.ih),ctorObjectToProxy.set(t,e),ctorProxyToObject.set(e,t),proxyToObject.set(e,t),-1===checkRafId&&(checkRafId=requestAnimationFrame(CheckDefendedObjectsUsedCorrectly2)),e}},C33.hh=function(t){var e;return C33.Ye&&C33.Bi.Ki&&t instanceof C33.rh?(ctorProxyToObject.has(t)&&(e=ctorProxyToObject.get(t),ctorProxyToObject.delete(t),ctorObjectToProxy.delete(e)),t):C33.isDebug?Object.seal(t):t},C33.nh=function(t,...e){let i;try{i=new t(...e)}catch(t){throw ctorProxyToObject.clear(),ctorObjectToProxy.clear(),t}return C33.Ye&&VerifyObjectPropertiesConsistent2(t,i),C33.hh(i)},C33.ah=function(t){t=proxyToObject.get(t);t&&releasedObjects.set(t,C33.us())},C33.oh=function(t){t=proxyToObject.get(t);return!!t&&!!releasedObjects.get(t)},new Map);C33.lh=class PerfMark{constructor(t){this.uh="",t&&this.start(t)}start(t){C33.li&&(this.uh=t,performance.mark(this.uh+"-Start"))}end(){C33.li&&(performance.mark(this.uh+"-End"),performance.measure(this.uh,this.uh+"-Start",this.uh+"-End"))}next(t){C33.li&&(this.end(),this.uh=t,performance.mark(this.uh+"-Start"))}}}{let isNegativeZero2=function(t){return 0===t&&1/t<0},C33=(isNegativeZero=isNegativeZero2,self.$e),TWO_PI=2*Math.PI,D_TO_R=Math.PI/180,R_TO_D=180/Math.PI,ALPHAEX_SHIFT=(C33.wrap=function(t,e,i){t=Math.floor(t),e=Math.floor(e);var s,r=(i=Math.floor(i))-e;return 0==r?i:t<e?(s=i-(e-t)%r)===i?0:s:e+(t-e)%r},C33.fh=function(t,e,i,s,r){i-=e;return 0==i&&0===s?t:(t-e)*(r-s)/i+s},C33.normalize=function(t,e,i){return e-i==0?1:(t-e)/(i-e)},C33.dh=function(t,e,i){return t<e?e:i<t?i:t},C33.Ch=function(t){return(t%=TWO_PI)<0&&(t+=TWO_PI),t},C33.ph=function(t){return t*D_TO_R},C33.mh=function(t){return t*R_TO_D},C33.Sh=function(t,e,i,s){return Math.hypot(i-t,s-e)},C33.gh=function(t,e,i,s){i-=t,t=s-e;return i*i+t*t},C33.Th=function(t,e,i,s){return Math.atan2(s-e,i-t)},C33._h=function(t,e){var i;return t===e||(i=Math.sin(t),t=Math.cos(t),1<=(i=i*Math.sin(e)+t*Math.cos(e)))?0:i<=-1?Math.PI:Math.acos(i)},C33.yh=function(t,e,i){var s=Math.sin(t),r=Math.cos(t),h=Math.sin(e),n=Math.cos(e);return Math.acos(s*h+r*n)>i?0<r*h-s*n?C33.Ch(t+i):C33.Ch(t-i):C33.Ch(e)},C33.Eh=function(t,e){var i=Math.sin(t);return Math.cos(t)*Math.sin(e)-i*Math.cos(e)<=0},C33.Ih=function(t,e,i,s=0){var r=C33._h(t,e),s=TWO_PI*s;return C33.Eh(e,t)?C33.Ch(t+(r+s)*i):C33.Ch(t-(r+s)*i)},C33.Ah=function(t,e,i,s=0){var r=C33._h(t,e),s=TWO_PI*s;return C33.Eh(e,t)?C33.Ch(t+(r+s)*i):C33.Ch(t+(TWO_PI-r+s)*i)},C33.Mh=function(t,e,i,s=0){var r=C33._h(t,e),s=TWO_PI*s;return C33.Eh(e,t)?C33.Ch(t-(-TWO_PI+r-s)*i):C33.Ch(t-(r+s)*i)},C33.Rh=function(t,e){var i=C33._h(t,e);return C33.Eh(t,e)?C33.Ch(e-i):C33.Ch(e+i)},C33.Lt=function(t,e,i){return t+i*(e-t)},C33.wh=function(t,e,i){return t===e?0:(i-t)/(e-t)},C33.bh=function(t,e,i,s,r){return C33.Lt(s,r,C33.wh(t,e,i))},C33.Gh=function(t,e,i,s){return C33.Lt(C33.Lt(t,e,s),C33.Lt(e,i,s),s)},C33.Oh=function(t,e,i,s,r){return C33.Lt(C33.Gh(t,e,i,r),C33.Gh(e,i,s,r),r)},C33.Ph=function(t,e,i){return(t+e+(t-e)*Math.cos(i*Math.PI))/2},C33.Lh=function(t){return 0<t&&0==(t-1&t)},C33.xh=function(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1},C33.Dh=function(t,e){return Math.round(t*e)/e},C33.Nh=function(t,e){return Math.floor(t*e)/e},C33.Fh=function(t,e){e=Math.max(Math.floor(e),0);e=Math.pow(10,e);return Math.round(t*e)/e},C33.$h=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},C33.toFixed=function(t,e){var i=t.toFixed(e);let s=i.length-1;for(;0<=s&&"0"===i.charAt(s);--s);return 0<=s&&"."===i.charAt(s)&&--s,s<0?i:i.substr(0,s+1)},C33.Bh=function(t,e,i){return C33.dh(t,0,255)|C33.dh(e,0,255)<<8|C33.dh(i,0,255)<<16},1024),ALPHAEX_MAX=1023,RGBEX_SHIFT=16384,RGBEX_MAX=8191,RGBEX_MIN=-8192,COMMON_ASPECT_RATIOS=(C33.kh=function(t,e,i,s){return t=C33.dh(Math.floor(1024*t),RGBEX_MIN,RGBEX_MAX),e=C33.dh(Math.floor(1024*e),RGBEX_MIN,RGBEX_MAX),i=C33.dh(Math.floor(1024*i),RGBEX_MIN,RGBEX_MAX),s=C33.dh(Math.floor(s*ALPHAEX_MAX),0,ALPHAEX_MAX),t<0&&(t+=RGBEX_SHIFT),e<0&&(e+=RGBEX_SHIFT),i<0&&(i+=RGBEX_SHIFT),-(t*RGBEX_SHIFT*RGBEX_SHIFT*ALPHAEX_SHIFT+e*RGBEX_SHIFT*ALPHAEX_SHIFT+i*ALPHAEX_SHIFT+s)},C33.Wh=function(t,e,i){return C33.kh(t,e,i,1)},C33.Vh=function(e){if(0<=e)return(255&e)/255;{let t=Math.floor(-e/(RGBEX_SHIFT*RGBEX_SHIFT*ALPHAEX_SHIFT));return t>RGBEX_MAX&&(t-=RGBEX_SHIFT),t/1024}},C33.Hh=function(e){if(0<=e)return((65280&e)>>8)/255;{let t=Math.floor(-e%(RGBEX_SHIFT*RGBEX_SHIFT*ALPHAEX_SHIFT)/(RGBEX_SHIFT*ALPHAEX_SHIFT));return t>RGBEX_MAX&&(t-=RGBEX_SHIFT),t/1024}},C33.Uh=function(e){if(0<=e)return((16711680&e)>>16)/255;{let t=Math.floor(-e%(RGBEX_SHIFT*ALPHAEX_SHIFT)/ALPHAEX_SHIFT);return t>RGBEX_MAX&&(t-=RGBEX_SHIFT),t/1024}},C33.jh=function(t){return isNegativeZero2(t)?0:0<=t?1:Math.floor(-t%ALPHAEX_SHIFT)/ALPHAEX_MAX},C33.Xh=function(t,e){for(t=Math.floor(t),e=Math.floor(e);0!==e;){var i=e;e=t%e,t=i}return t},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]),NO_HIT=(C33.Yh=function(t,e){if((t=Math.floor(t))===(e=Math.floor(e)))return[1,1];for(var i of COMMON_ASPECT_RATIOS){var s=t/i[0]*i[1];if(Math.abs(e-s)<1)return i.slice(0);if(s=t/i[1]*i[0],Math.abs(e-s)<1)return[i[1],i[0]]}var r=C33.Xh(t,e);return[t/r,e/r]},C33.qh=function(t,e,i,s,r,h,n,a){var o,l,u,c,f,d=Math.min(t,i),C=Math.max(t,i),p=Math.min(r,n),m=Math.max(r,n);return!(C<p||m<d||(C=Math.min(e,s),p=Math.max(e,s),m=Math.min(h,a),d=Math.max(h,a),p<m)||d<C||(o=r-t+n-i,l=h-e+a-s,u=i-t,c=s-e,p=n-r,m=a-h,f=Math.abs(c*p-m*u),Math.abs(p*l-m*o)>f))&&Math.abs(u*l-c*o)<=f},C33.zh=function(t,e,i,s,r,h,n,a,o,l,u,c){var f,d,C,p,m,v=Math.min(o,u),S=Math.max(o,u);return!(h<v||S<r||(h=Math.min(l,c),v=Math.max(l,c),a<h)||v<n||(f=o-t+u-i,d=l-e+c-s,C=i-t,p=s-e,S=u-o,r=c-l,m=Math.abs(p*S-r*C),Math.abs(S*d-r*f)>m))&&Math.abs(C*d-p*f)<=m},C33.Kh=function(t,e,i,s,r){var h=Math.min(t,i),n=Math.max(t,i),a=Math.min(e,s),o=Math.max(e,s),l=r.Jh(),u=r.Zh(),c=r.Qh(),f=r.tn(),d=r.sn(),C=r.rn(),p=r.hn(),r=r.nn();return C33.zh(t,e,i,s,h,n,a,o,l,u,c,f)||C33.zh(t,e,i,s,h,n,a,o,c,f,d,C)||C33.zh(t,e,i,s,h,n,a,o,d,C,p,r)||C33.zh(t,e,i,s,h,n,a,o,p,r,l,u)},C33.an=function(t,e,i,s,r){var h=Math.min(t,i),n=Math.max(t,i),a=Math.min(e,s),o=Math.max(e,s);let l=0;for(var u=r.length-4;l<=u;l+=2)if(C33.zh(t,e,i,s,h,n,a,o,r[l],r[l+1],r[l+2],r[l+3]))return!0;return C33.zh(t,e,i,s,h,n,a,o,r[l],r[l+1],r[0],r[1])},2),PADDING=1e-6;C33.ln=function(t,e,i,s,r,h,n,a){var i=i-t,h=a-h,o=i*h-(s-e)*(n-r);return 0!=o&&0<(s=((e-s)*(n-t)+i*(a-e))/o)&&s<1+PADDING?(h*(n-t)+(r-n)*(a-e))/o:NO_HIT},C33.un=function(t,e,i,s,r,h,n,a,o){var l=(n-r)*o,o=(a-h)*o;return C33.ln(t,e,i,s,r-l,h-o,n+l,a+o)},C33.cn=function(t,e,i,s,r,h,n,a){r-=i,h-=s,n-=i,a-=s,t-=i,i=e-s,e=r*r+h*h,s=r*n+h*a,r=r*t+h*i,h=n*n+a*a,n=n*t+a*i,t=1/(e*h-s*s),a=(h*r-s*n)*t,i=(e*n-s*r)*t;return 0<=a&&0<=i&&a+i<=1},C33.dn=function(t,e,i,s,r,h,n,a){var r=r-i,h=h-s,n=n-i,a=a-s,t=t-i,i=e-s,e=r*r+h*h,s=r*n+h*a,o=n*n+a*a,r=t*r+i*h,h=t*n+i*a,t=e*o-s*s,n=(o*r-s*h)/t,i=(e*h-s*r)/t;return[1-n-i,n,i]},C33.Cn=function(t,e,i,s,r,h,n,a,o,l,u,c){return[t*s+e*n+i*l,t*r+e*a+i*u,t*h+e*o+i*c]}}{let C33=self.$e,mainDocument=null,baseHref="";if("undefined"!=typeof document){mainDocument=document;let baseElem=document.querySelector("base");baseHref=baseElem&&baseElem.hasAttribute("href")?baseElem.getAttribute("href"):"",baseHref&&(baseHref.startsWith("/")&&(baseHref=baseHref.substr(1)),baseHref.endsWith("/")||(baseHref+="/"))}C33.pn=function(){return baseHref},C33.mn=function(){var t;return mainDocument?(t=mainDocument.location,C33.vn(t.origin+t.pathname)+baseHref):""},C33.vn=function(t){var e;return!t.length||t.endsWith("/")||t.endsWith("\\")?t:-1===(e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\")))?"":t.substr(0,e+1)},C33.Sn=function(t){var e;return t.length?t.endsWith("/")||t.endsWith("\\")?"":-1===(e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\")))?t:t.substr(e+1):t},C33.gn=function(t){var e=t.lastIndexOf(".");return e<1?"":t.substr(e)},C33.Tn=function(t,e){var i=t.lastIndexOf(".");return-1===i?t+"."+e:t.substr(0,i+1)+e},C33._n=function(t){var e=t.lastIndexOf(".");return e<1?t:t.substr(0,e)},C33.yn=function(t){return t.replace(/\\/g,"/")},C33.En=function(t,e){return e===(t?C33.gn(t).slice(1):"")},C33.In=function(t,e){let i,s;return C33.Ds(t)&&(i=C33._n(t.name)),C33.Is(t)&&(i=C33._n(t)),C33.Ds(e)&&(s=C33._n(e.name)),C33.Is(e)&&(s=C33._n(e)),i===s},C33.An=function(t){t=C33.yn(t);let e=/^\w:\//.exec(t);e?(e=e[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):e="";var i=(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1;let s="",r=t,h,n="";0<i&&(s=t.slice(0,i),r=t.slice(i));t=(h=r).lastIndexOf("."),0<t&&(n=r.slice(t),h=r.slice(0,-n.length)),i=e+s+r;return{dir:s,Mn:r,name:h,root:e,ext:n,Rn:i}},C33.wn=function(i,s){return new Promise((t,e)=>{self.setTimeout(t,i,s)})},C33.bn=function(t){try{t()}catch(t){C33.isDebug&&console.warn("Swallowed exception: ",t)}},C33.Gn=function(){},C33.vr=function(t,e){return"string"==typeof t&&"string"==typeof e&&(t===e||t.normalize().toLowerCase()===e.normalize().toLowerCase())},C33.On=function(t,e){return"string"==typeof t&&"string"==typeof e&&(t===e||t.normalize()===e.normalize())},C33.Pn=function(t,e,i){t[i++]=e[0],t[i++]=e[1],t[i++]=e[2],t[i++]=e[3],t[i++]=e[4],t[i++]=e[5],t[i++]=e[6],t[i++]=e[7],t[i++]=e[8],t[i++]=e[9],t[i++]=e[10],t[i++]=e[11],t[i++]=e[12],t[i++]=e[13],t[i++]=e[14],t[i]=e[15]},C33.Ln=function(t,e){t.length=e},C33.xn=function(t){t&&0!==t.length&&C33.Ln(t,0)},C33.Dn=function(e){if(e){for(let t=0;t<e.length;t++){var i=e[t];C33.Ln(i,0)}C33.Ln(e,0)}},C33.Nn=function(e,i,s){i|=0;var r=e.length;if(!(i<=r))for(let t=r;t<i;++t)e.push(s)},C33.Fn=function(t,e,i){var s=t.length;(e|=0)<s?C33.Ln(t,e):s<e&&C33.Nn(t,e,i)},C33.$n=function(t,e){C33.xn(t),C33.qr(t,e)},C33.qr=function(i,s){if(s.length<1e4)i.push(...s);else for(let t=0,e=s.length;t<e;++t)i.push(s[t])},C33.Bn=function(e,i){if(!((i=Math.floor(i))<0||i>=e.length)){var s=e.length-1;for(let t=i;t<s;++t)e[t]=e[t+1];C33.Ln(e,s)}},C33.kn=function(t,e){e=t.indexOf(e);0<=e&&t.splice(e,1)},C33.Wn=function(e,i){var s=e.length;if(i.length!==s)return!1;for(let t=0;t<s;++t)if(e[t]!==i[t])return!1;return!0},C33.Vn=function(i,s){var r=[];let h=0;for(let t=0,e=i.length;t<e;++t){var n=i[t];s(n)?r.push(n):(i[h]=n,++h)}return C33.Ln(i,h),r},C33.Hn=function(i,s){var t=i.length;let r=0;for(let t=0,e=i.length;t<e;++t){var h=i[t];s.has(h)||(i[r++]=h)}return C33.Ln(i,r),t-r},C33.Un=function(t,e){return t===Math.floor(t)&&0<=t&&t<e.length},C33.jn=function(t,e){if(!C33.Un(t,e))throw new RangeError("array index out of bounds")},C33.Xn=function(t){return t.slice()},C33.Yn=function(t,e){var i,s=[];for(i of t)if(C33.Os(i)){var r=e(i);if(!r)throw new Error("missing clone");if(r.constructor!==i.constructor)throw new Error("object is not a clone");s.push(r)}else C33.Bs(i)?s.push(C33.Yn(i,e)):s.push(i);return s},C33.qn=function(t){var e,i=[];for(e of t)i.push(e.slice());return i},C33.zn=function(t,e=" "){return t?t.split(e).map(t=>t.trim()).filter(t=>!!t):[]},C33.Kn=function(t,e,i){var s,r=new Set;for(s of t.values())e(s)&&(i?r.add(i(s)):r.add(s));return r},C33.Jn=function(t,e){return t.union?t.union(e):new Set([...t,...e])},C33.Zn=function(t,e){for(var i of e)t.add(i);return t},C33.first=function(t){for(var e of t)return e;return null},C33.xor=function(t,e){return!t!=!e},C33.compare=function(t,e,i){switch(e){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}},C33.Qn=function(t){for(var e in t)if(t.hasOwnProperty(e))return!0;return!1},C33.ta=function(a,o){return a.length?new Promise((i,s)=>{let r=[],h=0,n=!1;for(let e=0,t=a.length;e<t;++e)r.push(void 0),a[e].then(t=>{n||(r[e]=t,++h===a.length?i(r):o(h,a.length))}).catch(t=>{n=!0,s(t)})}):Promise.resolve([])};let memoryCallbacks=[],nextTaskId=(C33.ea=function(t){memoryCallbacks.push(t)},C33.ia=function(){let t=0;for(var e of memoryCallbacks){e=e();t+=e}return Math.floor(t)},1),activeTaskIds=new Map,taskMessageChannel=new MessageChannel,activeRPAFids=(taskMessageChannel.port2.onmessage=function(t){var t=t.data,e=activeTaskIds.get(t);activeTaskIds.delete(t),e&&e(performance.now())},C33.ra=function(t){var e=nextTaskId++;return activeTaskIds.set(e,t),taskMessageChannel.port1.postMessage(e),e},C33.na=function(t){activeTaskIds.delete(t)},C33.aa=C33.ra,C33.oa=function(){return new Promise(t=>C33.aa(t))},new Set);C33.la=function(e){let i=self.requestAnimationFrame(async t=>{await C33.oa(),activeRPAFids.has(i)&&(activeRPAFids.delete(i),e(t))});return activeRPAFids.add(i),i},C33.ua=function(t){activeRPAFids.has(t)&&(self.cancelAnimationFrame(t),activeRPAFids.delete(t))}}{let C33=self.$e;C33.ca=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},C33.fa=function(t){return!C33.ca(t)},C33.da=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},C33.Ca=function(t,e){return fetch(t,e).then(t=>(C33.da(t),t))},C33.pa=function(t){return C33.Ca(t).then(t=>t.text())},C33.ma=function(t){return C33.Ca(t).then(t=>t.json())},C33.Sa=function(t){return C33.Ca(t).then(t=>t.blob())},C33.ga=function(t){return C33.Ca(t).then(t=>t.arrayBuffer())},C33.Ta=function(s){return new Promise((t,e)=>{let i=new Image;i.onload=()=>t(i),i.onerror=t=>e(t),i.src=s})},C33._a=function(s){return"function"==typeof s.arrayBuffer?s.arrayBuffer():new Promise((t,e)=>{let i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>e(i.error),i.readAsArrayBuffer(s)})},C33.ya=function(s){return"function"==typeof s.text?s.text():new Promise((t,e)=>{let i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>e(i.error),i.readAsText(s)})},C33.Ea=function(t){return C33.ya(t).then(t=>JSON.parse(t))},C33.Ia=async function(t,e){let i=URL.createObjectURL(t);try{var s=await C33.Ta(i);return URL.revokeObjectURL(i),i="",e&&"function"==typeof s.decode&&await s.decode(),s}finally{i&&URL.revokeObjectURL(i)}},C33.Aa=function(t,e){var i;return"undefined"!=typeof document&&"function"==typeof document.createElement?((i=document.createElement("canvas")).width=t,i.height=e,i):new OffscreenCanvas(t,e)},C33.Ma=function(e,i,s){if("number"!=typeof s&&(s=1),i=i||"image/png",s=C33.dh(s,0,1),e.convertToBlob)return e.convertToBlob({type:i,quality:s});if(e.toBlob)return new Promise(t=>e.toBlob(t,i,s));throw new Error("could not convert canvas to blob")},C33.Ra=function(t,e,i){var s=C33.Aa(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),C33.Ma(s,e,i)},C33.wa=function(t,e,i){var s;return C33.Bi.ImageBitmapOptions?createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>C33.Ra(t,e,i)):C33.Bi.ImageBitmap?createImageBitmap(t).then(t=>C33.Ra(t,e,i)):((s=C33.Aa(t.width,t.height)).getContext("2d").putImageData(t,0,0),C33.Ma(s,e,i))},C33.ba=function(t,e){t.clear();for(var i of e)t.add(i)},C33.Ga=function(t){var e,i,s=Object.create(null);for([e,i]of t.entries())s[e]=i;return s},C33.Oa=function(t,e){e.clear();for(var[i,s]of Object.entries(t))e.set(i,s)},C33.Pa=function e(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>e(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],e(t[1])])};var i,s,r=Object.create(null);for([i,s]of Object.entries(t))r[i]=e(s);return r},C33.La=function e(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>e(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],e(t[1])]));var i,s,r=Object.create(null);for([i,s]of Object.entries(t))r[i]=e(s);return r}return t},C33.xa=function(t){if(t.startsWith("--"))return t;let e="",i=!1,s=0;for(var r of t)"-"===r?0<s&&(i=!0):i?(e+=r.toUpperCase(),i=!1):e+=r,++s;return e},C33.Da=function(t){return"object"==typeof t&&"function"==typeof t.next},C33.Na=function(e,i){var s=[];if("function"==typeof i)for(let t=0;t<e;++t)s.push(i());else for(let t=0;t<e;++t)s.push(i);return s}}{let padTwoDigits2=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},hueToRGB2=function(t,e,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},C33=(padTwoDigits=padTwoDigits2,hueToRGB=hueToRGB2,self.$e),HSL_TEST=/([0-9.]+),([0-9.]+)%?,([0-9.]+)%?/i,HSLA_TEST=/([0-9.]+),([0-9.]+)%?,([0-9.]+)%?,([0-9.])/i;C33.Fa=class Color{constructor(t,e,i,s){this.$a=NaN,this.Ba=NaN,this.ka=NaN,this.Wa=NaN,this.$a=0,this.Ba=0,this.ka=0,this.Wa=0,t instanceof C33.Fa?this.set(t):this.Va(t||0,e||0,i||0,s||0)}Ha(t,e,i){return this.$a=+t,this.Ba=+e,this.ka=+i,this.dh(),this}Va(t,e,i,s){return this.$a=+t,this.Ba=+e,this.ka=+i,this.Wa=+s,this.dh(),this}set(t){return this.$a=t.$a,this.Ba=t.Ba,this.ka=t.ka,this.Wa=t.Wa,this}_(t){return this.set(t)}add(t){this.$a+=t.$a,this.Ba+=t.Ba,this.ka+=t.ka,this.Wa+=t.Wa,this.dh()}Ua(t,e,i,s=0){this.$a+=+t,this.Ba+=+e,this.ka+=+i,this.Wa+=+s,this.dh()}ja(t){this.Xa(Math.max(this.$a,t.$a)-Math.min(this.$a,t.$a)),this.Ya(Math.max(this.Ba,t.Ba)-Math.min(this.Ba,t.Ba)),this.qa(Math.max(this.ka,t.ka)-Math.min(this.ka,t.ka)),this.za(Math.max(this.Wa,t.Wa)-Math.min(this.Wa,t.Wa)),this.dh()}Ka(t){this.$a=t.$a,this.Ba=t.Ba,this.ka=t.ka}Xa(t){this.$a=C33.dh(+t,0,1)}Ja(){return this.$a}Ya(t){this.Ba=C33.dh(+t,0,1)}Za(){return this.Ba}qa(t){this.ka=C33.dh(+t,0,1)}Qa(){return this.ka}za(t){this.Wa=C33.dh(+t,0,1)}eo(){return this.Wa}clone(){return C33.nh(C33.Fa,this.$a,this.Ba,this.ka,this.Wa)}toArray(){return[this.$a,this.Ba,this.ka,this.Wa]}io(){return new Float64Array(this.toArray())}ro(t,e){t[e++]=this.$a,t[e++]=this.Ba,t[e++]=this.ka,t[e]=this.Wa}ho(t,e){t[e++]=this.$a,t[e++]=this.Ba,t[e]=this.ka}equals(t){return this.$a===t.$a&&this.Ba===t.Ba&&this.ka===t.ka&&this.Wa===t.Wa}no(t){return this.$a===t.$a&&this.Ba===t.Ba&&this.ka===t.ka}ao(t,e,i){return this.$a===t&&this.Ba===e&&this.ka===i}lo(t,e,i,s){return this.$a===t&&this.Ba===e&&this.ka===i&&this.Wa===s}uo(t,e){return t[e]===Math.fround(this.$a)&&t[e+1]===Math.fround(this.Ba)&&t[e+2]===Math.fround(this.ka)&&t[e+3]===Math.fround(this.Wa)}co(t,e){return t[e]===Math.fround(this.$a)&&t[e+1]===Math.fround(this.Ba)&&t[e+2]===Math.fround(this.ka)}multiply(t){this.$a*=t.$a,this.Ba*=t.Ba,this.ka*=t.ka,this.Wa*=t.Wa}fo(t){this.$a*=t,this.Ba*=t,this.ka*=t,this.Wa*=t}do(){return this.$a*=this.Wa,this.Ba*=this.Wa,this.ka*=this.Wa,this}Co(){return this.$a/=this.Wa,this.Ba/=this.Wa,this.ka/=this.Wa,this}dh(){return this.$a=C33.dh(this.$a,0,1),this.Ba=C33.dh(this.Ba,0,1),this.ka=C33.dh(this.ka,0,1),this.Wa=C33.dh(this.Wa,0,1),this}po(t){this.$a=C33.Vh(t),this.Ba=C33.Hh(t),this.ka=C33.Uh(t),this.Wa=C33.jh(t)}mo(t,e,i){return`rgb(${100*(C33.ds(t)?t:this.Ja())}%, ${100*(C33.ds(e)?e:this.Za())}%, ${100*(C33.ds(i)?i:this.Qa())}%)`}vo(t,e,i,s){return`rgba(${100*(C33.ds(t)?t:this.Ja())}%, ${100*(C33.ds(e)?e:this.Za())}%, ${100*(C33.ds(i)?i:this.Qa())}%, ${C33.ds(s)?s:this.eo()})`}So(){var t=Math.round(255*this.Ja()),e=Math.round(255*this.Za()),i=Math.round(255*this.Qa());return"#"+padTwoDigits2(t.toString(16))+padTwoDigits2(e.toString(16))+padTwoDigits2(i.toString(16))}To(t){if("string"!=typeof t)return!1;let e,i,s;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)e=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,s=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;e=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,s=parseInt(t.substr(4,2),16)/255}return isFinite(e)&&this.Xa(e),isFinite(i)&&this.Ya(i),isFinite(s)&&this.qa(s),this.za(1),!0}_o(){return Math.round(255*this.Ja())+`, ${Math.round(255*this.Za())}, `+Math.round(255*this.Qa())}yo(){return[Math.round(255*this.Ja()),Math.round(255*this.Za()),Math.round(255*this.Qa())]}Eo(t){var e,i;return"string"==typeof t&&!((t=(t=t.replace(/^rgb\(|\)|%/,"")).split(",")).length<3||(e=parseInt(t[0].trim(),10)/255,i=parseInt(t[1].trim(),10)/255,t=parseInt(t[2].trim(),10)/255,isFinite(e)&&this.Xa(e),isFinite(i)&&this.Ya(i),isFinite(t)&&this.qa(t),this.za(1),0))}Io(t){var e,i;return"string"==typeof t&&!((t=(t=t.replace(/^rgb\(|\)|%/,"")).split(",")).length<3||(e=parseInt(t[0].trim(),10)/100,i=parseInt(t[1].trim(),10)/100,t=parseInt(t[2].trim(),10)/100,isFinite(e)&&this.Xa(e),isFinite(i)&&this.Ya(i),isFinite(t)&&this.qa(t),this.za(1),0))}Ao(t){var e,i,s;return"string"==typeof t&&!((t=(t=t.replace(/^rgba\(|\)|%/,"")).split(",")).length<4||(e=parseInt(t[0].trim(),10)/255,i=parseInt(t[1].trim(),10)/255,s=parseInt(t[2].trim(),10)/255,t=parseFloat(t[3].trim()),isFinite(e)&&this.Xa(e),isFinite(i)&&this.Ya(i),isFinite(s)&&this.qa(s),isFinite(t)&&this.za(t),0))}Mo(t){var e,i,s;return"string"==typeof t&&!((t=(t=t.replace(/^rgba\(|\)|%/,"")).split(",")).length<4||(e=parseInt(t[0].trim(),10)/100,i=parseInt(t[1].trim(),10)/100,s=parseInt(t[2].trim(),10)/100,t=parseFloat(t[3].trim()),isFinite(e)&&this.Xa(e),isFinite(i)&&this.Ya(i),isFinite(s)&&this.qa(s),isFinite(t)&&this.za(t),0))}Ro(t){var e;return"string"==typeof t&&((t=t.replace(/\s+/,"")).includes(",")?t.startsWith("rgb(")?t.includes("%")?this.Io(t):this.Eo(t):t.startsWith("rgba(")?t.includes("%")?this.Mo(t):this.Ao(t):t.startsWith("hsl(")||t.startsWith("hsla(")?this.wo(t):(e=t.split(","),t.includes("%")?3===e.length?this.Io(t):4===e.length&&this.Mo(t):3===e.length?this.Eo(t):4===e.length&&this.Ao(t)):this.To(t))}toJSON(){return[this.$a,this.Ba,this.ka,this.Wa]}bo(t,e,i,s){let r,h,n;return t%=360,e=C33.dh(e,0,100),i=C33.dh(i,0,100),s=C33.dh(s,0,1),t/=360,i/=100,0===(e/=100)?r=h=n=i:(e=2*i-(i=i<.5?i*(1+e):i+e-i*e),r=hueToRGB2(e,i,t+1/3),h=hueToRGB2(e,i,t),n=hueToRGB2(e,i,t-1/3)),this.Xa(r),this.Ya(h),this.qa(n),this.za(s),this}wo(t){var t=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),e=HSL_TEST.exec(t),t=HSLA_TEST.exec(t);return e&&4===e.length?(this.bo(+e[1],+e[2],+e[3],1),!0):!(!t||5!==t.length||(this.bo(+e[1],+e[2],+e[3],+e[4]),0))}Go(){var t=this.$a,e=this.Ba,i=this.ka,s=this.Wa;return`hsla(${C33.Fa.Oo(t,e,i)}, ${C33.Fa.Po(t,e,i)}%, ${C33.Fa.Lo(t,e,i)}%, ${s})`}xo(){var t=this.$a,e=this.Ba,i=this.ka;return[C33.Fa.Oo(t,e,i),C33.Fa.Po(t,e,i),C33.Fa.Lo(t,e,i),this.Wa]}Do(t){!Array.isArray(t)||t.length<3||(this.$a=t[0],this.Ba=t[1],this.ka=t[2],this.Wa=4<=t.length?t[3]:1)}set r(t){this.Xa(t)}get r(){return this.Ja()}set No(t){this.Ya(t)}get No(){return this.Za()}set b(t){this.qa(t)}get b(){return this.Qa()}set a(t){this.za(t)}get a(){return this.eo()}Fo(t,e){switch(t){case 0:this.Xa(e);break;case 1:this.Ya(e);break;case 2:this.qa(e);break;case 3:this.za(e);break;default:throw new RangeError("invalid color index")}}$o(t){switch(t){case 0:return this.Ja();case 1:return this.Za();case 2:return this.Qa();case 3:return this.eo();default:throw new RangeError("invalid color index")}}static Bo(t,e){let i,s;if(Array.isArray(t))(i=new C33.Fa).Do(t);else{if(!(t instanceof C33.Fa))throw new Error("unexpected type");i=t}if(Array.isArray(e))(s=new C33.Fa).Do(e);else{if(!(e instanceof C33.Fa))throw new Error("unexpected type");s=e}return i.equals(s)}static ko(t,e){return C33.dh(Math.max(t,e)-Math.min(t,e),0,1)}static Wo(t,e){var i=new C33.Fa;return i.Xa(Math.max(t.$a,e.$a)-Math.min(t.$a,e.$a)),i.Ya(Math.max(t.Ba,e.Ba)-Math.min(t.Ba,e.Ba)),i.qa(Math.max(t.ka,e.ka)-Math.min(t.ka,e.ka)),i.za(Math.max(t.Wa,e.Wa)-Math.min(t.Wa,e.Wa)),i}static Vo(t,e){var i=new C33.Fa(0,0,0,1);return i.Xa(Math.max(t.$a,e.$a)-Math.min(t.$a,e.$a)),i.Ya(Math.max(t.Ba,e.Ba)-Math.min(t.Ba,e.Ba)),i.qa(Math.max(t.ka,e.ka)-Math.min(t.ka,e.ka)),i}static Oo(t,e,i){var s=Math.max(t,e,i),r=Math.min(t,e,i);if(s===r)return 0;let h=0;switch(s){case t:h=(e-i)/(s-r)+(e<i?6:0);break;case e:h=(i-t)/(s-r)+2;break;case i:h=(t-e)/(s-r)+4}return Math.round(h/6*360)}static Po(t,e,i){var s=Math.max(t,e,i),t=Math.min(t,e,i);return s===t?0:(e=s-t,Math.round(100*(.5<(s+t)/2?e/(2-s-t):e/(s+t))))}static Lo(t,e,i){var s=Math.max(t,e,i),t=Math.min(t,e,i);return s?Math.round(100*((s+t)/2)):0}},C33.Fa.Ho=Object.freeze(C33.nh(C33.Fa,1,1,1,1)),C33.Fa.Uo=Object.freeze(C33.nh(C33.Fa,0,0,0,1)),C33.Fa.jo=Object.freeze(C33.nh(C33.Fa,0,0,0,0))}{let C33=self.$e;C33.Xo=class Vector2{constructor(t,e){this.Yo=0,this.qo=0,t instanceof C33.Xo?this._(t):this.set(t||0,e||0)}set(t,e){this.Yo=+t,this.qo=+e}_(t){this.Yo=t.Yo,this.qo=t.qo}equals(t){return this.Yo===t.Yo&&this.qo===t.qo}zo(t,e){return this.Yo===t&&this.qo===e}uo(t,e){return t[e]===Math.fround(this.Yo)&&t[e+1]===Math.fround(this.qo)}Ko(t){this.Yo=+t}Jo(){return this.Yo}Zo(t){this.qo=+t}Qo(){return this.qo}toArray(){return[this.Yo,this.qo]}io(){return new Float64Array(this.toArray())}ro(t,e){t[e++]=this.Yo,t[e]=this.qo}offset(t,e){this.Yo+=+t,this.qo+=+e}scale(t,e){this.Yo*=t,this.qo*=e}It(t,e){this.Yo/=t,this.qo/=e}round(){this.Yo=Math.round(this.Yo),this.qo=Math.round(this.qo)}floor(){this.Yo=Math.floor(this.Yo),this.qo=Math.floor(this.qo)}ceil(){this.Yo=Math.ceil(this.Yo),this.qo=Math.ceil(this.qo)}angle(){return C33.Th(0,0,this.Yo,this.qo)}tl(){return this.Yo*this.Yo+this.qo*this.qo}length(){return Math.hypot(this.Yo,this.qo)}el(t,e){var i=this.Yo*e-this.qo*t;this.qo=this.qo*e+this.Yo*t,this.Yo=i}rotate(t){0!==t&&this.el(Math.sin(t),Math.cos(t))}il(t,e,i){0===t||e===this.Yo&&i===this.qo||(this.Yo-=e,this.qo-=i,this.el(Math.sin(t),Math.cos(t)),this.Yo+=+e,this.qo+=+i)}move(t,e){0!==e&&(this.Yo+=Math.cos(t)*e,this.qo+=Math.sin(t)*e)}normalize(){var t=this.length();0!==t&&1!==t&&(this.Yo/=t,this.qo/=t)}dh(t,e){this.Yo=C33.dh(this.Yo,t,e),this.qo=C33.dh(this.qo,t,e)}Ot(t){return this.Yo*t.Yo+this.qo*t.qo}reverse(){this.Yo=-this.Yo,this.qo=-this.qo}sl(){var t=this.Yo;return this.Yo=this.qo,this.qo=-t,this}}}{let C33=self.$e;C33.Rect=class Rect{constructor(t,e,i,s){this.rl=NaN,this.hl=NaN,this.nl=NaN,this.al=NaN,this.rl=0,this.hl=0,this.nl=0,this.al=0,t instanceof C33.Rect?this._(t):this.set(t||0,e||0,i||0,s||0)}set(t,e,i,s){this.rl=+t,this.hl=+e,this.nl=+i,this.al=+s}ol(t,e,i,s){e=+e,this.rl=t=+t,this.hl=e,this.nl=t+ +i,this.al=e+ +s}_(t){this.rl=+t.rl,this.hl=+t.hl,this.nl=+t.nl,this.al=+t.al}clone(){return new C33.Rect(this.rl,this.hl,this.nl,this.al)}static ll(t,e){var i=new C33.Rect;return i.ul(Math.min(t.rl,e.rl)),i.cl(Math.min(t.hl,e.hl)),i.fl(Math.max(t.nl,e.nl)),i.dl(Math.max(t.al,e.al)),i}static Cl(t){return new C33.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.rl===t.rl&&this.hl===t.hl&&this.nl===t.nl&&this.al===t.al}pl(t,e,i,s){return this.rl===t&&this.hl===e&&this.width()===i&&this.height()===s}uo(t,e){return t[e]===Math.fround(this.rl)&&t[e+1]===Math.fround(this.hl)&&t[e+2]===Math.fround(this.nl)&&t[e+3]===Math.fround(this.al)}ul(t){this.rl=+t}ml(){return this.rl}cl(t){this.hl=+t}vl(){return this.hl}fl(t){this.nl=+t}Sl(){return this.nl}dl(t){this.al=+t}gl(){return this.al}toArray(){return[this.rl,this.hl,this.nl,this.al]}io(){return new Float64Array(this.toArray())}Tl(){return new DOMRect(this.rl,this.hl,this.width(),this.height())}static _l(t){return C33.nh(C33.Rect,t.left,t.top,t.right,t.bottom)}ro(t,e){t[e++]=this.rl,t[e++]=this.hl,t[e++]=this.nl,t[e]=this.al}yl(t,e){t[e++]=this.rl,t[e++]=this.hl,t[e++]=this.nl,t[e++]=this.hl,t[e++]=this.nl,t[e++]=this.al,t[e++]=this.rl,t[e]=this.al}El(t,e,i){t[e++]=this.rl,t[e++]=this.hl,t[e++]=i,t[e++]=this.nl,t[e++]=this.hl,t[e++]=i,t[e++]=this.nl,t[e++]=this.al,t[e++]=i,t[e++]=this.rl,t[e++]=this.al,t[e]=i}width(){return this.nl-this.rl}height(){return this.al-this.hl}Il(){return(this.rl+this.nl)/2}Al(){return(this.hl+this.al)/2}offset(t,e){e=+e,this.rl+=t=+t,this.hl+=e,this.nl+=t,this.al+=e}offsetLeft(t){this.rl+=+t}offsetTop(t){this.hl+=+t}Ml(t){this.nl+=+t}Rl(t){this.al+=+t}wl(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.hl<this.al?this.rl<this.nl?this.al=this.hl+this.width():this.al=this.hl-this.width():this.rl<this.nl?this.al=this.hl-this.width():this.al=this.hl+this.width()}bl(t,e){e=+e,this.rl-=t=+t,this.hl-=e,this.nl+=t,this.al+=e}Gl(t,e){e=+e,this.rl+=t=+t,this.hl+=e,this.nl-=t,this.al-=e}multiply(t,e){this.rl*=t,this.hl*=e,this.nl*=t,this.al*=e}It(t,e){this.rl/=t,this.hl/=e,this.nl/=t,this.al/=e}Ol(t){this.rl=+t-this.rl,this.nl=+t-this.nl}Pl(t){this.hl=+t-this.hl,this.al=+t-this.al}Ll(t,e){var i=this.width(),s=this.height(),r=this.ml()+i*t,h=this.vl()+s*e;this.ol(r-s*e,h-i*t,s,i)}xl(){var t=this.rl;this.rl=this.nl,this.nl=t}Dl(){var t=this.hl;this.hl=this.al,this.al=t}Nl(t){var e=this.hl;this.hl=+t-this.al,this.al=+t-e}round(){this.rl=Math.round(this.rl),this.hl=Math.round(this.hl),this.nl=Math.round(this.nl),this.al=Math.round(this.al)}Fl(){this.rl=Math.ceil(this.rl),this.hl=Math.ceil(this.hl),this.nl=Math.floor(this.nl),this.al=Math.floor(this.al)}$l(){this.rl=Math.floor(this.rl),this.hl=Math.floor(this.hl),this.nl=Math.ceil(this.nl),this.al=Math.ceil(this.al)}floor(){this.rl=Math.floor(this.rl),this.hl=Math.floor(this.hl),this.nl=Math.floor(this.nl),this.al=Math.floor(this.al)}ceil(){this.rl=Math.ceil(this.rl),this.hl=Math.ceil(this.hl),this.nl=Math.ceil(this.nl),this.al=Math.ceil(this.al)}dh(t,e,i,s){this.rl=Math.max(this.rl,+t),this.hl=Math.max(this.hl,+e),this.nl=Math.min(this.nl,+i),this.al=Math.min(this.al,+s)}Bl(t,e,i,s){t=+t,e=+e,i=+i,s=+s,this.rl=C33.dh(this.rl,t,i),this.hl=C33.dh(this.hl,e,s),this.nl=C33.dh(this.nl,t,i),this.al=C33.dh(this.al,e,s)}normalize(){this.rl>this.nl&&this.xl(),this.hl>this.al&&this.Dl()}kl(t){return!(t.nl<this.rl||t.al<this.hl||t.rl>this.nl||t.hl>this.al)}Wl(t,e,i){return!(t.nl+e<this.rl||t.al+i<this.hl||t.rl+e>this.nl||t.hl+i>this.al)}Vl(t,e){return t>=this.rl&&t<=this.nl&&e>=this.hl&&e<=this.al}Hl(t){return t.rl>=this.rl&&t.hl>=this.hl&&t.nl<=this.nl&&t.al<=this.al}Ul(t){t.rl<this.rl&&(this.rl=+t.rl),t.hl<this.hl&&(this.hl=+t.hl),t.nl>this.nl&&(this.nl=+t.nl),t.al>this.al&&(this.al=+t.al)}jl(t){this.rl=C33.Lt(t.rl,t.nl,this.rl),this.hl=C33.Lt(t.hl,t.al,this.hl),this.nl=C33.Lt(t.rl,t.nl,this.nl),this.al=C33.Lt(t.hl,t.al,this.al)}}}{let C33=self.$e;C33.Xl=class Quad{constructor(t,e,i,s,r,h,n,a){this.Yl=NaN,this.ql=NaN,this.zl=NaN,this.Kl=NaN,this.Jl=NaN,this.Zl=NaN,this.Ql=NaN,this.tu=NaN,this.Yl=0,this.ql=0,this.zl=0,this.Kl=0,this.Jl=0,this.Zl=0,this.Ql=0,this.tu=0,t instanceof C33.Xl?this._(t):this.set(t||0,e||0,i||0,s||0,r||0,h||0,n||0,a||0)}set(t,e,i,s,r,h,n,a){this.Yl=+t,this.ql=+e,this.zl=+i,this.Kl=+s,this.Jl=+r,this.Zl=+h,this.Ql=+n,this.tu=+a}eu(t,e,i,s){this.set(t,e,i,e,i,s,t,s)}_(t){this.Yl=t.Yl,this.ql=t.ql,this.zl=t.zl,this.Kl=t.Kl,this.Jl=t.Jl,this.Zl=t.Zl,this.Ql=t.Ql,this.tu=t.tu}equals(t){return this.Yl===t.Yl&&this.ql===t.ql&&this.zl===t.zl&&this.Kl===t.Kl&&this.Jl===t.Jl&&this.Zl===t.Zl&&this.Ql===t.Ql&&this.tu===t.tu}iu(t){this.Yl=+t}Jh(){return this.Yl}su(t){this.ql=+t}Zh(){return this.ql}ru(t){this.zl=+t}Qh(){return this.zl}hu(t){this.Kl=+t}tn(){return this.Kl}nu(t){this.Jl=+t}sn(){return this.Jl}au(t){this.Zl=+t}rn(){return this.Zl}ou(t){this.Ql=+t}hn(){return this.Ql}lu(t){this.tu=+t}nn(){return this.tu}uu(){return new DOMQuad(new DOMPoint(this.Yl,this.ql),new DOMPoint(this.zl,this.Kl),new DOMPoint(this.Jl,this.Zl),new DOMPoint(this.Ql,this.tu))}static cu(t){return C33.nh(C33.Xl,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Yl,this.ql,this.zl,this.Kl,this.Jl,this.Zl,this.Ql,this.tu]}io(){return new Float64Array(this.toArray())}ro(t,e){t[e++]=this.Yl,t[e++]=this.ql,t[e++]=this.zl,t[e++]=this.Kl,t[e++]=this.Jl,t[e++]=this.Zl,t[e++]=this.Ql,t[e]=this.tu}fu(t,e,i){t[e++]=this.Yl,t[e++]=this.ql,t[e++]=i,t[e++]=this.zl,t[e++]=this.Kl,t[e++]=i,t[e++]=this.Jl,t[e++]=this.Zl,t[e++]=i,t[e++]=this.Ql,t[e++]=this.tu,t[e]=i}offset(t,e){e=+e,this.Yl+=t=+t,this.ql+=e,this.zl+=t,this.Kl+=e,this.Jl+=t,this.Zl+=e,this.Ql+=t,this.tu+=e}round(){this.Yl=Math.round(this.Yl),this.ql=Math.round(this.ql),this.zl=Math.round(this.zl),this.Kl=Math.round(this.Kl),this.Jl=Math.round(this.Jl),this.Zl=Math.round(this.Zl),this.Ql=Math.round(this.Ql),this.tu=Math.round(this.tu)}floor(){this.Yl=Math.floor(this.Yl),this.ql=Math.floor(this.ql),this.zl=Math.floor(this.zl),this.Kl=Math.floor(this.Kl),this.Jl=Math.floor(this.Jl),this.Zl=Math.floor(this.Zl),this.Ql=Math.floor(this.Ql),this.tu=Math.floor(this.tu)}ceil(){this.Yl=Math.ceil(this.Yl),this.ql=Math.ceil(this.ql),this.zl=Math.ceil(this.zl),this.Kl=Math.ceil(this.Kl),this.Jl=Math.ceil(this.Jl),this.Zl=Math.ceil(this.Zl),this.Ql=Math.ceil(this.Ql),this.tu=Math.ceil(this.tu)}du(t){this.Yl=t.rl,this.ql=t.hl,this.zl=t.nl,this.Kl=t.hl,this.Jl=t.nl,this.Zl=t.al,this.Ql=t.rl,this.tu=t.al}Cu(t,e){0===e?this.du(t):this.pu(t,Math.sin(e),Math.cos(e))}pu(t,e,i){var s=t.rl*e,r=t.hl*e,h=t.nl*e,e=t.al*e,n=t.rl*i,a=t.hl*i,o=t.nl*i,t=t.al*i;this.Yl=n-r,this.ql=a+s,this.zl=o-r,this.Kl=a+h,this.Jl=o-e,this.Zl=t+h,this.Ql=n-e,this.tu=t+s}mu(t){t.set(Math.min(this.Yl,this.zl,this.Jl,this.Ql),Math.min(this.ql,this.Kl,this.Zl,this.tu),Math.max(this.Yl,this.zl,this.Jl,this.Ql),Math.max(this.ql,this.Kl,this.Zl,this.tu))}Vl(t,e){var i=this.zl-this.Yl,s=this.Kl-this.ql,r=this.Jl-this.Yl,h=this.Zl-this.ql,t=t-this.Yl,e=e-this.ql,n=i*i+s*s,a=i*r+s*h,o=i*t+s*e,l=r*r+h*h,u=r*t+h*e,c=1/(n*l-a*a),f=(l*o-a*u)*c,d=(n*u-a*o)*c;return 0<=f&&0<d&&f+d<1||(d=((n=(i=this.Ql-this.Yl)*i+(s=this.tu-this.ql)*s)*u-(a=i*r+s*h)*(o=i*t+s*e))*(c=1/(n*l-a*a)),0<=(f=(l*o-a*u)*c)&&0<d&&f+d<1)}Il(){return(this.Yl+this.zl+this.Jl+this.Ql)/4}Al(){return(this.ql+this.Kl+this.Zl+this.tu)/4}vu(t,e,i,s){return!(!this.Vl(t,e)&&!this.Vl(i,s))||C33.Kh(t,e,i,s,this)}Su(t){var e,i,s,r,h,n,a=t.Il(),o=t.Al();return!!this.Vl(a,o)||(a=this.Il(),o=this.Al(),!!t.Vl(a,o))||(a=this.Yl,o=this.ql,e=this.zl,i=this.Kl,s=this.Jl,r=this.Zl,h=this.Ql,n=this.tu,C33.Kh(a,o,e,i,t))||C33.Kh(e,i,s,r,t)||C33.Kh(s,r,h,n,t)||C33.Kh(h,n,a,o,t)}gu(){var t=this.Yl,e=this.ql;this.Yl=this.zl,this.ql=this.Kl,this.zl=this.Jl,this.Kl=this.Zl,this.Jl=this.Ql,this.Zl=this.tu,this.Ql=t,this.tu=e}Tu(){this._u(0,2),this._u(1,3),this._u(6,4),this._u(7,5)}yu(){this._u(0,6),this._u(1,7),this._u(2,4),this._u(3,5)}Eu(){this._u(2,6),this._u(3,7)}_u(t,e){var i=this.Iu(t);this.Au(t,this.Iu(e)),this.Au(e,i)}Iu(t){switch(t){case 0:return this.Yl;case 1:return this.ql;case 2:return this.zl;case 3:return this.Kl;case 4:return this.Jl;case 5:return this.Zl;case 6:return this.Ql;case 7:return this.tu;default:throw new RangeError("invalid quad point index")}}Au(t,e){switch(e=+e,t){case 0:this.Yl=e;break;case 1:this.ql=e;break;case 2:this.zl=e;break;case 3:this.Kl=e;break;case 4:this.Jl=e;break;case 5:this.Zl=e;break;case 6:this.Ql=e;break;case 7:this.tu=e;break;default:throw new RangeError("invalid quad point index")}}}}{let C33=self.$e,assert=self.assert,DEFAULT_POLY_POINTS=[0,0,1,0,1,1,0,1],tempQuad=C33.nh(C33.Xl);C33.Mu=class CollisionPoly extends C33.rh{constructor(t,e=!0){super(),t=t||DEFAULT_POLY_POINTS,this.Ru=Float64Array.from(t),this.wu=new C33.Rect,this.bu=!0,this.Gu=e}ah(){}Ou(){return this.Ru}Pu(){return this.Ru.length/2}Lu(t){this.Ru.length===t.length?this.Ru.set(t):this.Ru=Float64Array.from(t),this.bu=!0}xu(){this.Lu(DEFAULT_POLY_POINTS)}_(t){this.Lu(t.Ru)}Du(){this.bu=!0}Nu(){if(this.bu){var n=this.Ru;let i=n[0],s=n[1],r=i,h=s;for(let t=0,e=n.length;t<e;t+=2){var a=n[t],o=n[t+1];a<i&&(i=a),a>r&&(r=a),o<s&&(s=o),o>h&&(h=o)}this.wu.set(i,s,r,h),this.bu=!1}}du(t,e,i){let s=this.Ru;8!==s.length&&(s=new Float64Array(8),this.Ru=s),s[0]=t.ml()-e,s[1]=t.vl()-i,s[2]=t.Sl()-e,s[3]=t.vl()-i,s[4]=t.Sl()-e,s[5]=t.gl()-i,s[6]=t.ml()-e,s[7]=t.gl()-i,this.wu._(t),0===e&&0===i||this.wu.offset(-e,-i),this.bu=!1}Fu(t,e,i){tempQuad._(t),tempQuad.offset(e,i),this.Lu(tempQuad.toArray()),this.bu=!0}transform(t,e,i){let s=0,r=1;0!==i&&(s=Math.sin(i),r=Math.cos(i)),this.$u(t,e,s,r)}$u(i,s,r,h){var n=this.Ru;for(let t=0,e=n.length;t<e;t+=2){var a=t+1,o=n[t]*i,l=n[a]*s;n[t]=o*h-l*r,n[a]=l*h+o*r}this.bu=!0}offset(i,s){var r=this.Ru;for(let t=0,e=r.length;t<e;t+=2)r[t]+=i,r[t+1]+=s}Vl(i,s){var r=this.Ru;if(i===r[0]&&s===r[1])return!0;this.Nu();var t=this.wu,h=t.ml()-110,n=t.vl()-101,a=t.Sl()+131,o=t.gl()+120;let l=0,u=0,c=0,f=0,d=0,C=0,p=0,m=0,v=(c=h<i?(l=h,i):(l=i,h),f=n<s?(u=n,s):(u=s,n),p=a<i?(d=a,i):(d=i,a),m=o<s?(C=o,s):(C=s,o),0),S=0;for(let t=0,e=r.length;t<e;t+=2){var g=(t+2)%e,T=r[t],_=r[t+1],y=r[g],g=r[1+g];C33.zh(h,n,i,s,l,c,u,f,T,_,y,g)&&++v,C33.zh(a,o,i,s,d,p,C,m,T,_,y,g)&&++S}return v%2==1||S%2==1}Bu(t,n,a){var o=t.Ru,l=this.Ru;if(this.Vl(o[0]+n,o[1]+a))return!0;if(t.Vl(l[0]-n,l[1]-a))return!0;for(let t=0,e=l.length;t<e;t+=2){var u=(t+2)%e,c=l[t],f=l[t+1],d=l[u],C=l[1+u];let i=0,s=0,r=0,h=0;r=c<d?(i=c,d):(i=d,c),h=f<C?(s=f,C):(s=C,f);for(let t=0,e=o.length;t<e;t+=2){var p=(t+2)%e,m=o[t]+n,v=o[t+1]+a,S=o[p]+n,p=o[1+p]+a;if(C33.zh(c,f,d,C,i,r,s,h,m,v,S,p))return!0}}return!1}vu(i,s,r,h,n,a){if(this.Vl(r-i,h-s))return!0;if(this.Vl(n-i,a-s))return!0;let o=0,l=0,u=0,c=0;u=r<n?(o=r,n):(o=n,r),c=h<a?(l=h,a):(l=a,h);var f=this.Ru;for(let t=0,e=f.length;t<e;t+=2){var d=(t+2)%e,C=f[t]+i,p=f[t+1]+s,m=f[d]+i,d=f[1+d]+s;if(C33.zh(r,h,n,a,o,u,l,c,C,p,m,d))return!0}return!1}Tu(i){var s=this.Ru;for(let t=0,e=s.length;t<e;t+=2)s[t]=2*i-s[t];this.bu=!0}yu(i){var s=this.Ru;for(let t=0,e=s.length;t<e;t+=2){var r=t+1;s[r]=2*i-s[r]}this.bu=!0}Eu(){var i=this.Ru;for(let t=0,e=i.length;t<e;t+=2){var s=t+1,r=i[t];i[t]=i[s],i[s]=r}this.bu=!0}ku(){var i=this.Ru;let s=0;for(let t=0,e=i.length;t<e;t+=2)s+=i[t];return s/this.Pu()}Wu(){var i=this.Ru;let s=0;for(let t=0,e=i.length;t<e;t+=2)s+=i[t+1];return s/this.Pu()}Vu(){return this.Ru}Hu(){return this.Pu()}Uu(){return this.Gu}}}{let C33=self.$e;C33.ju=class PairMap extends C33.rh{constructor(t){if(super(),this.Xu=new Map,t)for(var[e,i,s]of t)this.Set(e,i,s)}ah(){this.Yu(),this.Xu=null}qu(){return 0===this.Xu.size}Yu(){var t,e=this.Xu;for(t of e.values())t.clear();e.clear()}Set(t,e,i){var s=this.Xu;let r=s.get(t);r||(r=new Map,s.set(t,r)),r.set(e,i)}ri(t,e){t=this.Xu.get(t);return t&&t.get(e)}si(t,e){t=this.Xu.get(t);return!!t&&t.has(e)}zu(t,e){var i=this.Xu,s=i.get(t);return!!s&&((e=s.delete(e))&&0===s.size&&i.delete(t),e)}Ku(t){var e,i,s=this.Xu,r=s.get(t);r&&(r.clear(),s.delete(t));for([e,i]of s.entries())i.delete(t)&&0===i.size&&s.delete(e)}Ju(){let t=0;for(var e of this.Xu.values())t+=e.size;return t}*values(){for(var t of this.Xu.values())yield*t.values()}*Zu(){for(var[t,e]of this.Xu.entries())for(var i of e.keys())yield[t,i]}*entries(){for(var[t,e]of this.Xu.entries())for(var[i,s]of e.entries())yield[t,i,s]}}}{let C33=self.$e;C33.Qu=class ArraySet extends C33.rh{constructor(){super(),this.tc=new Set,this.ec=[],this.ic=!1}ah(){this.Yu()}Yu(){this.tc.clear(),C33.xn(this.ec),this.ic=!1}sc(t){this.tc.has(t)||(this.tc.add(t),this.ic)||this.ec.push(t)}si(t){return this.tc.has(t)}zu(t){this.tc.delete(t)&&(this.ic=!0)}Ju(){return this.tc.size}qu(){return 0===this.tc.size}rc(){return this.ic&&(this.hc(),this.ic=!1),this.ec}hc(){var t,e=this.ec;C33.xn(e);for(t of this.tc)e.push(t)}}}{let C33=self.$e,EASE_MAP=new Map,PREDEFINED_EASE_MAP=new Map,CUSTOM_EASE_EDITOR_MAP=new Map,CUSTOM_EASE_DATA_EDITOR_MAP=new Map,CUSTOM_EASE_RUNTIME_MAP=new Map,CUSTOM_EASE_DATA_RUNTIME_MAP=new Map,PRIVATE_EASE_MAP=new Map,BUILT_IN_TRANSITION_MAP=new Map,ALIAS_MAP=new Map,EASE_TRANSLATION_KEYS=(ALIAS_MAP.set("linear","noease"),ALIAS_MAP.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),SHORT_EASE_TRANSLATION_KEYS=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],EASE_API2INTERNAL_NAMES=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),SAMPLE_COUNT=(self.nc=class Ease{constructor(){}static ac(){return"default"}static oc(){return"noease"}static lc(t){return EASE_API2INTERNAL_NAMES.get(t)}static uc(e,...i){this.cc();let t,s;var r=(s=e?(CUSTOM_EASE_EDITOR_MAP.has(e)||CUSTOM_EASE_EDITOR_MAP.set(e,new Map),[...(t=CUSTOM_EASE_EDITOR_MAP.get(e)).keys()].filter(t=>!Ease.fc(t,e)||Ease.fc(t,e).transition.IsForAnyPurpose())):[...(t=CUSTOM_EASE_RUNTIME_MAP).keys()]).sort();return[...PREDEFINED_EASE_MAP.keys()].concat(r).filter(t=>!i.includes(t))}static Cc(){this.cc();var t=[...CUSTOM_EASE_RUNTIME_MAP.keys()];return t.sort(),[...PREDEFINED_EASE_MAP.keys()].concat(t)}static mc(){this.cc();var t=[...CUSTOM_EASE_RUNTIME_MAP.keys()];return t.sort(),t}static vc(t){for(var e of EASE_TRANSLATION_KEYS)if(self.lang("ui.bars.timeline.eases."+e)===t)return!0;for(var i of SHORT_EASE_TRANSLATION_KEYS)if(self.lang("ui.bars.timeline.short-eases."+i)===t)return!0}static Sc(t){return this.cc(),[...PREDEFINED_EASE_MAP.keys()].includes(t)}static Tc(t){var e=ALIAS_MAP.get(t);return e?EASE_MAP.get(e):Ease.Sc(t)?EASE_MAP.get(t):PRIVATE_EASE_MAP.has(t)?PRIVATE_EASE_MAP.get(t):void 0}static _c(t){return this.cc(),BUILT_IN_TRANSITION_MAP.get(t)}static yc(t,e){this.cc();var i=Ease.Tc(t);if(i)return i;if(e)return CUSTOM_EASE_EDITOR_MAP.get(e).get(t);throw new Error("missing ease function")}static fc(t,e){this.cc();e=CUSTOM_EASE_DATA_EDITOR_MAP.get(e);if(e)return e.get(t)}static Ec(t,e){return this.cc(),!!Ease.Tc(t)||!!CUSTOM_EASE_EDITOR_MAP.get(e).get(t)}static Ic(t){this.cc();var e=Ease.Tc(t);return e||CUSTOM_EASE_RUNTIME_MAP.get(t)}static Ac(t){return this.cc(),CUSTOM_EASE_DATA_RUNTIME_MAP.get(t)}static Mc(t){return this.cc(),this.Cc()[t]}static Rc(t,e){return this.cc(),this.uc(e).indexOf(t)}static wc(t){return this.Rc(t)}static cc(){0===EASE_MAP.size&&(this.Gc("default",()=>{}),this.Gc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.Gc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.Gc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.Gc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.Gc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.Gc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.Gc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.Gc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.Gc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.Gc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.Gc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.Gc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.Gc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.Gc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.Gc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.Gc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.Gc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.Gc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.Gc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Gc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.Gc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.Gc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.Gc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.Gc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.Gc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Gc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.Gc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Gc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.Gc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.Gc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.Gc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Oc("cubicbezier",this.Pc),this.Oc("spline",this.Lc))}static Gc(t,e,i=!1){if("function"==typeof e)Ease.xc(t,e,"predefined");else{if(!C33.Bs(e))throw new Error("unexpected arguments");if(self.BuiltInTransition){let r=C33.nh(self.BuiltInTransition,t,i);r.SetFromJson(e),Ease.xc(t,(t,e,i,s)=>r.Dc(t,e,i,s),"predefined"),BUILT_IN_TRANSITION_MAP.set(t,r)}else{let r=C33.nh(C33.Nc,[t,e.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);r.Fc(i),Ease.xc(t,(t,e,i,s)=>r.Dc(t,e,i,s),"predefined")}}}static Oc(t,e){Ease.xc(t,e,"private")}static $c(t,e,i,s){this.cc(),Ease.xc(t,e,"custom",i,s)}static Bc(t,e){var i;this.Sc(t)||![...PRIVATE_EASE_MAP.keys()].includes(t)&&((i=CUSTOM_EASE_EDITOR_MAP.get(e))&&i.delete(t),i=CUSTOM_EASE_DATA_EDITOR_MAP.get(e))&&i.delete(t)}static xc(t,e,i,s,r){switch(i){case"predefined":EASE_MAP.set(t,e),PREDEFINED_EASE_MAP.set(t,e);break;case"custom":(s?(CUSTOM_EASE_EDITOR_MAP.has(s)||CUSTOM_EASE_EDITOR_MAP.set(s,new Map),CUSTOM_EASE_DATA_EDITOR_MAP.has(s)||CUSTOM_EASE_DATA_EDITOR_MAP.set(s,new Map),CUSTOM_EASE_EDITOR_MAP.get(s).set(t,e),CUSTOM_EASE_DATA_EDITOR_MAP.get(s)):(CUSTOM_EASE_RUNTIME_MAP.set(t,e),CUSTOM_EASE_DATA_RUNTIME_MAP)).set(t,r);break;case"private":EASE_MAP.set(t,e),PRIVATE_EASE_MAP.set(t,e);break;default:throw new Error("unexpected ease mode")}}static kc(t,e,i,s){return 0===s?e:i*t/s+e}static Pc(t,e,i,s,r){return e+3*t*(i-e)+3*t**2*(e+s-2*i)+t**3*(r-e+3*i-3*s)}static Lc(t,e,i,s,r,h,n,o,l,u){return s===r&&h===n?t:(t=get_t_for_x(t,e,s,h,o,u),e=a(i,r,n,l),s=b(i,r,n,l),h=c(i,r,n,l),calc_bezier(t,e,s,h))}static Wc(t,e,i,s){var r=[],h=a(t,e,i,s),n=b(t,e,i,s),o=c(t,e,i,s);for(let t=0;t<SAMPLE_COUNT;++t){var l=calc_bezier(t*SAMPLE_STEP,h,n,o);r.push(l)}return r}},11),SAMPLE_STEP=1/(SAMPLE_COUNT-1),NEWTON_RAPHSON_ITERATIONS=4,NEWTON_RAPHSON_MIN_SLOPE=.01,SUBDIVISION_PRECISION=1e-7,SUBDIVISION_MAX_ITERATIONS=10,a=(t,e,i,s)=>s-3*i+3*e-t,b=(t,e,i,s)=>3*i-6*e+3*t,c=(t,e,i,s)=>3*(e-t),calc_bezier=(t,e,i,s)=>((e*t+i)*t+s)*t,get_slope=(t,e,i,s)=>3*e*t*t+2*i*t+s,get_t_for_x=(s,t,e,i,r,h)=>{if(1==s)return 1;let n=0,o=1,l=h[o];var u=SAMPLE_COUNT-1;for(SAMPLE_COUNT;o!=u&&l<=s;)o++,l=h[o],n+=SAMPLE_STEP;o--;var f=(s-(l=h[o]))/(h[o+1]-l);let d=n+f*SAMPLE_STEP;var C,p=a(t,e,i,r),m=b(t,e,i,r),v=c(t,e,i,r),f=get_slope(d,p,m,v);if(0===f)return d;if(f>=NEWTON_RAPHSON_MIN_SLOPE){for(let t=0;t<NEWTON_RAPHSON_ITERATIONS;++t){var S=calc_bezier(d,p,m,v)-s,g=get_slope(d,p,m,v);d-=S/g}return d}{let t=n,e=n+SAMPLE_STEP,i=0;do{d=t+(e-t)/2;var T=calc_bezier(d,p,m,v)-s;0<T?e=d:t=d,T=Math.abs(T)>SUBDIVISION_PRECISION,C=++i<SUBDIVISION_MAX_ITERATIONS}while(T&&C);return d}}}{let RequireStringOrNumber2=function(t){C33.Is(t)},C33=(RequireStringOrNumber=RequireStringOrNumber2,self.$e);C33.Vc=class ProbabilityTable{constructor(t){this.Hc=[],this.uh=t||"",this.Uc=0}ah(){this.Yu(),this.Hc=null}jc(){return this.uh}Yu(){C33.Dn(this.Hc),this.Uc=0}Xc(){return this.Uc}Yc(t=Math.random()*this.Xc()){let e=0;for(var[i,s]of this.Hc)if(t<(e+=i))return s;return 0}qc(t,e){RequireStringOrNumber2(e),this.Uc+=t,this.Hc.push([t,e])}zc(e,i){RequireStringOrNumber2(i);var s=0===e;for(let t=0;t<this.Hc.length;t++){var r=this.Hc[t],h=s||r[0]===e,n=r[1]===i;if(h&&n){this.Hc.splice(t,1),this.Uc-=r[0];break}}}Kc(){return JSON.stringify(this.Hc)}static Jc(t,e){var i,s=new C33.Vc(e);for(i of JSON.parse(t)){var r=i[0],h=i[1];s.qc(r,h)}return s}}}{let C33=self.$e,nextId=0;C33.Zc=class ScreenReaderText{constructor(t,e){this.Qc=t,this.t3=e,this.e3=nextId++,this.Qc.i3("runtime","screen-reader-text",{type:"create",id:this.e3,text:this.t3})}ah(){this.Qc.i3("runtime","screen-reader-text",{type:"release",id:this.e3}),this.Qc=null,this.t3="",this.e3=-1}s3(t){this.t3!==t&&(this.t3=t,this.Qc.i3("runtime","screen-reader-text",{type:"update",id:this.e3,text:this.t3}))}}}{let C33=self.$e;C33.Event=class Event{constructor(t,e){this.type=t,this.cancelable=!!e,this.defaultPrevented=!1,this.r3=!1,this.h3=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.h3)throw new Error(`cannot stop async event '${this.type}' propagation`);this.r3=!0}}}{let C33=self.$e,assert=self.assert;C33.Event.n3=class EventHandler extends C33.rh{constructor(t){super(),this.a3=t,this.o3=[],this.l3=new Set,this.u3=[],this.f3=new Set,this.d3=0,this.C3=[]}ah(){0<this.d3||(C33.xn(this.o3),this.l3.clear(),C33.xn(this.u3),this.f3.clear(),C33.xn(this.C3),C33.ah(this))}m3(t,e){this.v3()?this.C3.push({S3:"add",g3:t,capture:e}):e?this.l3.has(t)||(this.o3.push(t),this.l3.add(t)):this.f3.has(t)||(this.u3.push(t),this.f3.add(t))}T3(t,e){this.v3()?this.C3.push({S3:"remove",g3:t,capture:e}):e?this.l3.has(t)&&(this.l3.delete(t),C33.kn(this.o3,t)):this.f3.has(t)&&(this.f3.delete(t),C33.kn(this.u3,t))}_3(){return!this.o3.length&&!this.u3.length}v3(){return 0<this.d3}y3(){var t,e=new Set,i=new Set;for(t of this.C3)if("add"===t.S3)this.m3(t.g3,t.capture),(t.capture?i:e).delete(t.g3);else{if("remove"!==t.S3)throw new Error("invalid op");(t.capture?(this.l3.delete(t.g3),i):(this.f3.delete(t.g3),e)).add(t.g3)}C33.Hn(this.u3,e),C33.Hn(this.o3,i),C33.xn(this.C3)}E3(i){this.I3();let s=!1;for(let t=0,e=this.o3.length;t<e;++t)if(this.o3[t](i),i.r3){s=!0;break}if(!s)for(let t=0,e=this.u3.length;t<e&&(this.u3[t](i),!i.r3);++t);return this.A3(),!i.defaultPrevented}M3(i){this.I3();for(let t=0,e=this.o3.length;t<e;++t)this.o3[t](i);for(let t=0,e=this.u3.length;t<e;++t)this.u3[t](i);return this.A3(),!0}I3(){this.d3++}A3(){this.d3--,0===this.d3&&0<this.C3.length&&this.y3()}R3(t){t?this.I3():this.A3()}w3(i){var s=[];for(let e=0,t=this.o3.length;e<t;++e){let t=this.o3[e];s.push(C33.b3(()=>t(i)))}for(let e=0,t=this.u3.length;e<t;++e){let t=this.u3[e];s.push(C33.b3(()=>t(i)))}return Promise.all(s).then(()=>!i.defaultPrevented)}G3(i){var s=[];this.I3();for(let t=0,e=this.o3.length;t<e;++t){var r=this.o3[t](i);r instanceof Promise&&s.push(r)}for(let t=0,e=this.u3.length;t<e;++t){var h=this.u3[t](i);h instanceof Promise&&s.push(h)}return this.A3(),s.length?Promise.all(s).then(()=>!i.defaultPrevented):!i.defaultPrevented}async O3(t){return this.G3(t)}async P3(i){this.I3();for(let t=0,e=this.o3.length;t<e;++t){var s=this.o3[t](i);s instanceof Promise&&await s}for(let t=0,e=this.u3.length;t<e;++t){var r=this.u3[t](i);r instanceof Promise&&await r}return this.A3(),!i.defaultPrevented}*L3(i){this.I3();for(let t=0,e=this.o3.length;t<e;++t){var s=this.o3[t](i);C33.Da(s)&&(yield*s)}for(let t=0,e=this.u3.length;t<e;++t){var r=this.u3[t](i);C33.Da(r)&&(yield*r)}this.A3()}}}{let C33=self.$e;C33.Event.x3=class EventDispatcher extends C33.rh{constructor(){super(),this.D3=new Map,this.N3=!1}ah(){if(this.N3)throw new Error("already released");this.F3(),this.N3=!0,C33.ah(this)}oh(){return this.N3}F3(){if(this.D3){for(var t of this.D3.values())t.ah();this.D3.clear()}}B3(t,e){var i=this.D3.get(t);return i||(e?(i=C33.nh(C33.Event.n3,t),this.D3.set(t,i),i):null)}W3(t){return this.D3.has(t)}addEventListener(t,e,i){this.B3(t,!0).m3(e,!!i)}removeEventListener(t,e,i){var s=this.B3(t,!1);s&&(s.T3(e,!!i),s._3())&&this.D3.delete(t)}dispatchEvent(t){var e=this.B3(t.type,!1);return!e||(t.cancelable?e.E3(t):e.M3(t))}V3(t){var e=this.B3(t.type,!1);return e?(t.h3=!0,e.w3(t)):Promise.resolve(!0)}async H3(t){var e=this.B3(t.type,!1);if(!e)return!0;this.D3.delete(t.type),t.h3=!0;t=await e.w3(t);return e.ah(),t}async U3(t){var e=this.B3(t.type,!1);return!e||e.O3(t)}j3(t){var e=this.B3(t.type,!1);return!e||e.G3(t)}async X3(t){var e=this.B3(t.type,!1);return!e||e.P3(t)}Y3(t){var e=this.B3(t.type,!1);if(!e)return null;if(t.cancelable)throw new Error("not supported");return e.L3(t)}R3(t){for(var e of this.D3.values())e.R3(t)}}}{let SetNewCallback2=function(t){callbackId=SUPPORTS_RIC&&0===highThroughputMode?requestIdleCallback(DoAsyncifiedWork2,{timeout:IDLECALLBACK_TIMEOUT}):setTimeout(DoAsyncifiedWork2,0<highThroughputMode?1:t)},DoAsyncifiedWork2=function(i){if(callbackId=-1,workQueue.length){var s=performance.now();let t=s,e=0;for(var r,h;DoNextAsyncifiedJob2(workQueue.shift()),t=performance.now(),++e,r=(t-s)/e*1.1,workQueue.length&&(SUPPORTS_RIC&&0===highThroughputMode&&void 0!==i?r<i.timeRemaining():t-s+r<SETTIMEOUT_WORK_DURATION););-1===callbackId&&workQueue.length&&(h=t-s,h=Math.max(SETTIMEOUT_INTERVAL-h,4),SetNewCallback2(h))}},DoNextAsyncifiedJob2=function(e){let t;try{t=e.g3()}catch(t){return void e.reject(t)}e.resolve(t)},C33=(SetNewCallback=SetNewCallback2,DoAsyncifiedWork=DoAsyncifiedWork2,DoNextAsyncifiedJob=DoNextAsyncifiedJob2,self.$e),SETTIMEOUT_WORK_DURATION=12,SETTIMEOUT_INTERVAL=16,IDLECALLBACK_TIMEOUT=35,SUPPORTS_RIC="undefined"!=typeof requestIdleCallback,workQueue=[],callbackId=-1,highThroughputMode=0,asyncifyDisabled=C33.ai.si("disable-asyncify");asyncifyDisabled&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),C33.b3=function(i){let s=null;return C33.isDebug&&(s=C33.us()),new Promise((t,e)=>{workQueue.push({g3:i,resolve:t,reject:e,stack:s}),asyncifyDisabled?DoNextAsyncifiedJob2(workQueue.pop()):-1===callbackId&&SetNewCallback2(SETTIMEOUT_INTERVAL)})},C33.b3.q3=function(t){if(t)++highThroughputMode;else if(--highThroughputMode<0)throw new Error("already turned off high throughput mode")}}{let ClearTimeCache2=function(){cachedNowTime=-1},CheckActiveIdleTimeouts2=function(){timerId=-1,nextDeadline=-1;var t,e,i,s=Date.now();for(t of activeIdleTimeouts)t.z3(s)?(e=t.K3(),(-1===nextDeadline||e<nextDeadline)&&(nextDeadline=e)):activeIdleTimeouts.delete(t);-1!==nextDeadline&&(i=Math.max(nextDeadline-s+IDLE_CHECK_TIMER_OVERSHOOT,IDLE_CHECK_MIN_INTERVAL),timerId=self.setTimeout(CheckActiveIdleTimeouts2,i))},C33=(ClearTimeCache=ClearTimeCache2,CheckActiveIdleTimeouts=CheckActiveIdleTimeouts2,self.$e),IDLE_CHECK_MIN_INTERVAL=1e3,IDLE_CHECK_TIMER_OVERSHOOT=100,cachedNowTime=-1,timerId=(C33.J3=function(){return-1===cachedNowTime&&(cachedNowTime=Date.now(),self.setTimeout(ClearTimeCache2,16)),cachedNowTime},-1),nextDeadline=-1,activeIdleTimeouts=new Set;C33.Z3=class IdleTimeout{constructor(t,e){this.Q3=t,this.tf=1e3*e,this.ef=0,this.if=!1}rf(){var t=C33.J3();this.ef=t+this.tf,this.if||(activeIdleTimeouts.add(this),this.if=!0),-1===timerId?(nextDeadline=this.ef,timerId=self.setTimeout(CheckActiveIdleTimeouts2,this.tf+IDLE_CHECK_TIMER_OVERSHOOT)):this.ef<nextDeadline&&nextDeadline>t+IDLE_CHECK_MIN_INTERVAL&&(self.clearTimeout(timerId),nextDeadline=this.ef,timerId=self.setTimeout(CheckActiveIdleTimeouts2,this.tf+IDLE_CHECK_TIMER_OVERSHOOT))}z3(t){return!(t>=this.ef)||(this.Q3()?(this.ef=t+this.tf,!0):this.if=!1)}K3(){return this.ef}hf(){this.if&&(activeIdleTimeouts.delete(this),this.if=!1,0===activeIdleTimeouts.size)&&-1!==timerId&&(self.clearTimeout(timerId),timerId=-1,nextDeadline=-1)}ah(){this.hf(),this.Q3=null}}}{let C33=self.$e;C33.nf=class Disposable{constructor(t){this.lf=!1,this.uf=t}cf(){this.lf||(this.lf=!0,this.uf&&(this.uf(),this.uf=null))}ff(){return this.lf}ah(){this.cf()}static ah(t){return new Disposable(()=>t.ah())}static df(e,i,s,r,t){if(null==r)r=!1;else if("boolean"!=typeof r&&"object"!=typeof r)throw new TypeError("invalid event listener options");if(t&&(s=s.bind(t)),i.includes(" ")){i=i.split(" ");var h=new C33.Cf;for(let t of i)e.addEventListener(t,s,r),h.sc(C33.nh(C33.nf,()=>e.removeEventListener(t,s,r)));return h}return e.addEventListener(i,s,r),C33.nh(C33.nf,()=>e.removeEventListener(i,s,r))}},C33.pf=class StubDisposable extends C33.nf{mf(t){this.uf=t}},C33.Cf=class CompositeDisposable extends C33.nf{constructor(...t){super(),this.vf=new Set;for(var e of t)this.sc(e)}sc(...t){if(this.lf)throw new Error("already disposed");for(var e of t)this.vf.add(e)}Sf(t){if(this.lf)throw new Error("already disposed");this.vf.delete(t)}gf(){if(this.lf)throw new Error("already disposed");if(this.vf){for(var t of this.vf)t.cf();this.vf.clear()}}ff(){return this.lf}cf(){if(this.lf)throw new Error("already disposed");this.lf=!0;for(var t of this.vf)t.cf();this.vf.clear(),this.vf=null}ah(){this.cf()}}}{let C33=self.$e;C33.Tf=class KahanSum extends C33.rh{constructor(){super(),this._f=0,this.qo=0,this.yf=0,this.Ef=0}sc(t){this.qo=(t=+t)-this._f,this.yf=this.Ef+this.qo,this._f=this.yf-this.Ef-this.qo,this.Ef=this.yf}If(t){this.Ef-=+t}ri(){return this.Ef}rf(){this._f=0,this.qo=0,this.yf=0,this.Ef=0}Set(t){this._f=0,this.qo=0,this.yf=0,this.Ef=+t}Af(t){this._f=t._f,this.qo=t.qo,this.yf=t.yf,this.Ef=t.Ef}ah(){}}}{let C33=self.$e,js_cols={},RED=!0,BLACK=!1;js_cols.Mf=function(t){this.Rf=t,this.right=this.Rf.wf,this.left=this.Rf.wf,this.parent=null,this.color=!1,this.key=null},js_cols.bf=function(t){this.size=0,this.wf=new js_cols.Mf(this),this.wf.color=BLACK,this.root=this.wf,this.root.parent=this.wf,this.compare=t||this.Gf},js_cols.bf.prototype.Gf=function(t,e){return t<e?-1:e<t?1:0},js_cols.bf.prototype.clone=function(){var t=new js_cols.bf(this.compare);return t.Of(this),t},js_cols.bf.prototype.clear=function(){this.size=0,this.wf=new js_cols.Mf(this),this.wf.color=BLACK,this.root=this.wf,this.root.parent=this.wf},js_cols.bf.prototype.Pf=function(t){var e=t.right;t.right=e.left,e.left!=this.wf&&(e.left.parent=t),e.parent=t.parent,t.parent==this.wf?this.root=e:t==t.parent.left?t.parent.left=e:t.parent.right=e,(e.left=t).parent=e},js_cols.bf.prototype.Lf=function(t){var e=t.left;t.left=e.right,e.right!=this.wf&&(e.right.parent=t),e.parent=t.parent,t.parent==this.wf?this.root=e:t==t.parent.right?t.parent.right=e:t.parent.left=e,(e.right=t).parent=e},js_cols.bf.prototype.xf=function(t){if(this.contains(t))this.Df(t).key=t;else{for(var e=new js_cols.Mf(this),i=(e.key=t,this.wf),s=this.root;s!=this.wf;)i=s,s=this.compare(e.key,s.key)<0?s.left:s.right;(e.parent=i)==this.wf?this.root=e:this.compare(e.key,i.key)<0?i.left=e:i.right=e,e.left=this.wf,e.right=this.wf,e.color=RED,this.Nf(e),this.size++}},js_cols.bf.prototype.Nf=function(t){for(;t!=this.wf&&t!=this.root&&t.parent.color==RED;){var e;t.parent==t.parent.parent.left?(e=t.parent.parent.right).color==RED?(t.parent.color=BLACK,e.color=BLACK,t.parent.parent.color=RED,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.Pf(t)),t.parent.color=BLACK,t.parent.parent.color=RED,t.parent.parent!=this.wf&&this.Lf(t.parent.parent)):(e=t.parent.parent.left).color==RED?(t.parent.color=BLACK,e.color=BLACK,t.parent.parent.color=RED,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.Lf(t)),t.parent.color=BLACK,t.parent.parent.color=RED,t.parent.parent!=this.wf&&this.Pf(t.parent.parent))}this.root.color=BLACK},js_cols.bf.prototype.Ff=function(t){var e=t.left==this.wf||t.right==this.wf?t:this.$f(t),i=e.left!=this.wf?e.left:e.right;i.parent=e.parent,e.parent==this.wf?this.root=i:e==e.parent.left?e.parent.left=i:e.parent.right=i,e!=t&&(t.key=e.key),e.color==BLACK&&this.Bf(i),this.size--},js_cols.bf.prototype.Bf=function(t){for(;t!=this.root&&t.color==BLACK;){var e;t=t==t.parent.left?((e=t.parent.right).color==RED&&(e.color=BLACK,t.parent.color=RED,this.Pf(t.parent),e=t.parent.right),e.left.color==BLACK&&e.right.color==BLACK?(e.color=RED,t.parent):(e.right.color==BLACK&&(e.left.color=BLACK,e.color=RED,this.Lf(e),e=t.parent.right),e.color=t.parent.color,t.parent.color=BLACK,e.right.color=BLACK,this.Pf(t.parent),this.root)):((e=t.parent.left).color==RED&&(e.color=BLACK,t.parent.color=RED,this.Lf(t.parent),e=t.parent.left),e.right.color==BLACK&&e.left.color==BLACK?(e.color=RED,t.parent):(e.left.color==BLACK&&(e.right.color=BLACK,e.color=RED,this.Pf(e),e=t.parent.left),e.color=t.parent.color,t.parent.color=BLACK,e.left.color=BLACK,this.Lf(t.parent),this.root))}t.color=BLACK},js_cols.bf.prototype.remove=function(t){var e,t=this.Df(t);return t!=this.wf?(e=t.key,this.Ff(t),e):null},js_cols.bf.prototype.kf=function(t,e){this.remove(e)},js_cols.bf.prototype.min=function(t){for(;t.left!=this.wf;)t=t.left;return t},js_cols.bf.prototype.max=function(t){for(;t.right!=this.wf;)t=t.right;return t},js_cols.bf.prototype.$f=function(t){if(t.right!=this.wf)return this.min(t.right);for(var e=t.parent;e!=this.wf&&t==e.right;)e=(t=e).parent;return e},js_cols.bf.prototype.Wf=function(t){if(t.left!=this.wf)return this.max(t.left);for(var e=t.parent;e!=this.wf&&t==e.left;)e=(t=e).parent;return e},js_cols.bf.prototype.Vf=function(t){if(0<this.size){var e=this.Df(t);if(e==this.wf)return null;if(e.right!=this.wf)return this.min(e.right).key;for(var i=e.parent;i!=this.wf&&e==i.right;)i=(e=i).parent;return i!=this.wf?i.key:null}return null},js_cols.bf.prototype.Hf=function(t){if(0<this.size){var e=this.Df(t);if(e==this.wf)return null;if(e.left!=this.wf)return this.max(e.left).key;for(var i=e.parent;i!=this.wf&&e==i.left;)i=(e=i).parent;return i!=this.wf?i.key:null}return null},js_cols.bf.prototype.Uf=function(){return this.min(this.root).key},js_cols.bf.prototype.jf=function(){return this.max(this.root).key},js_cols.bf.prototype.Df=function(t){for(var e=this.root;e!=this.wf&&0!=this.compare(e.key,t);)e=this.compare(t,e.key)<0?e.left:e.right;return e},js_cols.bf.prototype.contains=function(t){return null!=this.Df(t).key},js_cols.bf.prototype.getValues=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},js_cols.bf.prototype.Of=function(t){if("array"==js_cols.typeOf(t))for(var e=0;e<t.length;e++)this.xf(t[e]);else if("function"==js_cols.typeOf(t.forEach))t.forEach(this.xf,this);else if("function"==js_cols.typeOf(t.getValues))for(var i=t.getValues(),e=0;e<i.length;e++)this.xf(i[e]);else if("object"==js_cols.typeOf(t))for(var s in t)this.xf(t[s])},js_cols.bf.prototype.Xf=function(t){if("array"==js_cols.typeOf(t))for(var e=0;e<t.length;e++)this.remove(t[e]);else if("function"==js_cols.typeOf(t.forEach))t.forEach(this.kf,this);else if("function"==js_cols.typeOf(t.getValues))for(var i=t.getValues(),e=0;e<i.length;e++)this.remove(i[e]);else if("object"==js_cols.typeOf(t))for(var s in t)this.remove(t[s])},js_cols.bf.prototype.Yf=function(t){if("array"==js_cols.typeOf(t)){for(var e=0;e<t.length;e++)if(!this.contains(t[e]))return!1;return!0}if("function"==js_cols.typeOf(t.forEach))return t.every(this.contains,this);if("function"==js_cols.typeOf(t.getValues)){for(var i=t.getValues(),e=0;e<i.length;e++)if(!this.contains(i[e]))return!1;return!0}if("object"==js_cols.typeOf(t)){for(var s in t)if(!this.contains(t[s]))return!1;return!0}},js_cols.bf.prototype.range=function(t,e){var i=[];return this.qf(function(t){i.push(t)},t,e),i},js_cols.bf.prototype.zf=function(t,e){if(!this.Kf())for(var i=this.min(this.root);i!=this.wf;){if(t.call(e,i.key,this))return;i=this.$f(i)}},js_cols.bf.prototype.Jf=function(t,e,i){if(!this.Kf())for(var s=this.Df(e);s!=this.wf;){if(t.call(i,s.key,this))return;s=this.$f(s)}},js_cols.bf.prototype.Zf=function(t,e,i){if(!this.Kf())for(var s=this.min(this.root),r=this.Df(e);s!=r;){if(t.call(i,s.key,this))return;s=this.$f(s)}},js_cols.bf.prototype.qf=function(t,e,i,s){if(!this.Kf())for(var r=this.Df(e),h=this.Df(i);r!=h;){if(t.call(s,r.key,this))return;r=this.$f(r)}},js_cols.bf.prototype.Qf=function(t,e){if(!this.Kf())for(var i=this.max(this.root);i!=this.wf;){if(t.call(e,i.key,this))return;i=this.Wf(i)}},js_cols.bf.prototype.forEach=function(t,e){if(!this.Kf())for(var i=this.min(this.root);i!=this.wf;i=this.$f(i))t.call(e,i.key,i.key,this)},js_cols.bf.prototype.some=function(t,e){if(!this.Kf())for(var i=this.min(this.root);i!=this.wf;i=this.$f(i))if(t.call(e,i.key,i.key,this))return!0;return!1},js_cols.bf.prototype.every=function(t,e){if(this.Kf())return!1;for(var i=this.min(this.root);i!=this.wf;i=this.$f(i))if(!t.call(e,i.key,i.key,this))return!1;return!0},js_cols.bf.prototype.map=function(t,e){var i=[];if(!this.Kf())for(var s=this.min(this.root);s!=this.wf;s=this.$f(s))i.push(t.call(e,s.key,s.key,this));return i},js_cols.bf.prototype.filter=function(t,e){var i=[];if(!this.Kf())for(var s=this.min(this.root);s!=this.wf;s=this.$f(s))t.call(e,s.key,s.key,this)&&i.push(s.key);return i},js_cols.bf.prototype.getCount=function(){return this.size},js_cols.bf.prototype.Kf=function(){return 0==this.size},js_cols.bf.prototype.ls=function(t){var e=js_cols.getCount(t);if(this.getCount()>e)return!1;var i=0;if(this.Kf())return!0;for(var s=this.min(this.root);s!=this.wf;s=this.$f(s))js_cols.contains.call(t,t,s.key)&&i++;return i==this.getCount()},js_cols.bf.prototype.t0=function(t){var e=new js_cols.bf(this.compare);if(!this.Kf())for(var i=this.min(this.root);i!=this.wf;i=this.$f(i))t.contains.call(t,i.key,i.key,this)&&e.xf(i.key);return e},C33.bf=class RedBlackSet extends C33.rh{constructor(t){super(),this.e0=new js_cols.bf(t),this.i0=!1,this.s0=new Set,this.r0=new Set}sc(t){this.i0?this.e0.contains(t)?this.r0.delete(t):this.s0.add(t):this.e0.xf(t)}Sf(t){this.i0?this.e0.contains(t)?this.r0.add(t):this.s0.delete(t):this.e0.remove(t)}si(t){return this.i0?!!this.s0.has(t)||!this.r0.has(t)&&this.e0.contains(t):this.e0.contains(t)}Yu(){this.e0.clear(),this.s0.clear(),this.r0.clear()}toArray(){if(this.i0)throw new Error("cannot be used in queueing mode");return this.e0.getValues()}Ju(){return this.e0.getCount()+this.s0.size-this.r0.size}qu(){return 0===this.Ju()}h0(){if(this.qu())throw new Error("empty set");if(this.i0)throw new Error("cannot be used in queueing mode");var t=this.e0;return t.min(t.root).key}n0(){if(this.qu())throw new Error("empty set");if(this.i0)throw new Error("cannot be used in queueing mode");var t=this.h0();return this.Sf(t),t}a0(t){if(this.i0!==(t=!!t)&&!(this.i0=t)){for(var e of this.r0)this.e0.remove(e);this.r0.clear();for(var i of this.s0)this.e0.xf(i);this.s0.clear()}}o0(t){this.e0.forEach(t)}*values(){if(!this.qu()){var e=this.e0;for(let t=e.min(e.root);t!=e.wf;t=e.$f(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{let C33=self.$e;C33.l0=class PromiseThrottle{constructor(t=C33.hardwareConcurrency){this.u0=t,this.c0=[],this.f0=0}sc(i){return new Promise((t,e)=>{this.c0.push({g3:i,resolve:t,reject:e}),this.d0()})}C0(i){for(let t=0,e=this.c0.length;t<e;++t)if(this.c0[t].g3===i)return t;return-1}p0(t,e){t=this.C0(t);if(-1===t)throw new Error("cannot find promise to resolve");this.c0[t].resolve(e),this.c0.splice(t,1)}m0(t,e){t=this.C0(t);if(-1===t)throw new Error("cannot find promise to reject");this.c0[t].reject(e),this.c0.splice(t,1)}async d0(){if(this.c0.length&&!(this.f0>=this.u0)){this.f0++;var e=this.c0.shift();try{var t=await e.g3();e.resolve(t)}catch(t){e.reject(t)}this.f0--,this.d0()}}static async v0(t,e){let i=[],s=!1;for(var r=[];t--;)r.push((async()=>{for(var t;t=e.pop();){if(s)return;try{i.push(await t())}catch(t){throw s=!0,t}}})());return await Promise.all(r),i}}}{let C33=self.$e;C33.S0=class RateLimiter{constructor(t,e,i){this.Q3=t,this.g0=e,this.T0=i||2*e,this._0=-1,this.y0=-1/0,this.E0=()=>this.I0(),this.A0=!1,this.M0=!1,this.R0=null}w0(t){this.M0=!!t}b0(){return void 0!==C33.Battery&&C33.Battery.IsOnBatteryPower()?this.T0:this.g0}G0(...t){var e,i;-1===this._0&&(this.R0=t,e=(t=C33.J3())-this.y0,(i=this.b0())<=e&&this.M0?(this.y0=t,this.O0()):this._0=self.setTimeout(this.E0,Math.max(i-e,4)))}O0(){this.A0=!0;var t=this.R0;this.R0=null,t?this.Q3(...t):this.Q3(),this.A0=!1}rf(){this.A0||(this.P0(),this.R0=null,this.y0=C33.J3())}I0(){this._0=-1,this.y0=C33.J3(),this.O0()}P0(){-1!==this._0&&(self.clearTimeout(this._0),this._0=-1)}ah(){this.P0(),this.Q3=null,this.R0=null,this.E0=null}}}{let C33=self.$e;C33.L0=class SVGRasterManager{constructor(){this.x0=new Map,this.D0=!1,this.N0=null,this.F0=null,this.$0=null,this.B0=null}k0(t){this.D0=!!t}W0(){return this.D0}V0(t){this.N0=t}H0(t){if(this.N0)return this.N0(t);throw new Error("no get base size callback set")}U0(t){this.F0=t}j0(t,e,i,s,r,h){if(this.F0)return this.F0(t,e,i,s,r,h);throw new Error("no raster at size callback set")}X0(t){this.$0=t}Y0(t){if(!this.$0)throw new Error("no release result callback set");this.$0(t)}q0(t){this.B0=t}z0(){if(!this.B0)throw new Error("no redraw callback set");this.B0()}K0(t){let e=this.x0.get(t);return e||(e=C33.nh(C33.J0,this,t),this.x0.set(t,e)),e.Z0(),e}Q0(t){this.x0.delete(t.td())}ed(){for(var t of this.x0.values())t.sd(),t.rd()}}}{let C33=self.$e,MAX_SURFACE_SIZE=4096;C33.J0=class SVGRasterImage{constructor(t,e){this.hd=t,this.nd=e,this.ad=0,this.od=0,this.ld=0,this.ud=this.hd.H0(e).then(t=>{this.hd&&(this.od=t[0],this.ld=t[1],this.hd.z0())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.fd=!0,this.hd&&this.hd.z0()}),this.dd=0,this.Cd=0,this.pd=0,this.md=0,this.vd=!1,this.Sd=null,this.gd=!1,this.fd=!1}ah(){if(this.ad<=0)throw new Error("already released");this.ad--,0===this.ad&&this.Td()}sd(){this.Sd&&(this.hd.Y0(this.Sd),this.Sd=null)}Td(){this.sd(),this.hd.Q0(this),this.hd=null}td(){return this.nd}Z0(){this.ad++}_d(){return 0<this.ad}yd(){return this.Sd}rd(){this.gd=!0}async Ed(i,s,r){if(0!==s&&0!==r&&!this.fd&&!this.vd){let t=C33.xh(Math.ceil(s)),e=C33.xh(Math.ceil(r));var h=Math.max(t,e);h>MAX_SURFACE_SIZE&&(s*=h=MAX_SURFACE_SIZE/h,r*=h,t=Math.min(Math.ceil(t*h),MAX_SURFACE_SIZE),e=Math.min(Math.ceil(e*h),MAX_SURFACE_SIZE)),s<t&&r<e&&(r=(h=s/r)<t/e?(s=e*h,e):(s=t)/h),this.hd.W0()&&(t=Math.ceil(s),e=Math.ceil(r)),t<=this.dd&&e<=this.Cd&&!this.gd||(this.vd=!0,this.dd=t,this.Cd=e,h=await this.hd.j0(this.nd,i,this.dd,this.Cd,s,r),this.hd&&(this.sd(),this.Sd=h,this.pd=s,this.md=r,this.vd=!1,this.gd=!1,this.hd.z0()))}}Id(){return this.ud}Ad(){return this.od}Md(){return this.ld}Rd(){return this.pd}wd(){return this.md}bd(){return this.fd}}}{let lookupHtmlEntity2=function(t){return HTML_ENTITY_MAP.get(t)},C33=(lookupHtmlEntity=lookupHtmlEntity2,self.$e),NUMERIC_CHARS=(C33.Gd="\ufeff",new Set("0123456789")),WHITESPACE_CHARS=(C33.Od=function(t){return NUMERIC_CHARS.has(t)},new Set(" \t\n\r\u2028\u2029")),CJK_PUNCTUATION_REGEX=(C33.Pd=function(t){return WHITESPACE_CHARS.has(t)},C33.Ld=function(t){return[...t].filter(t=>!C33.Pd(t)).join("")},C33.xd=function(t){for(var e of t)if(!C33.Pd(e))return!1;return!0},C33.Dd=function(t){for(var e of t)if(!C33.Pd(e))return!1;return!0},C33.Nd=function(t){return 1===t.length&&t.charCodeAt(0)<32},C33.Fd=function(t){return[...t].filter(t=>!C33.Nd(t)).join("")},/\p{P}(?<=[\u3000-\u303F\uFF00-\uFFEF])/u),NUMERIC_STRING_CHARS=(C33.$d=function(t){return!C33.Pd(t)&&CJK_PUNCTUATION_REGEX.test(t)},new Set("0123456789.+-e")),HTML_ENTITY_MAP=(C33.Bd=function(t){if(!(t=t.trim()).length)return!1;var e,i=t.charAt(0);if("-"!==i&&!NUMERIC_CHARS.has(i))return!1;for(e of t)if(!NUMERIC_STRING_CHARS.has(e))return!1;return!0},C33.kd=function(t){let e=t.length;for(;0<e;){var i=t.charAt(e-1);if(!C33.Od(i))break;--e}return t.substr(0,e)},C33.Wd=function(t){var e=C33.kd(t);let i=t.substr(e.length);return e+(i=i?(parseInt(i,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),HTML_ENTITY_REGEX=/[&<>"']/g,ESCAPE_REGEX=(C33.Vd=function(t){return t.replace(HTML_ENTITY_REGEX,lookupHtmlEntity2)},C33.Hd=function(t){t=C33.Ud(t,"\\","\\\\"),t=C33.Ud(t,'"','\\"');return t=C33.Ud(t,"\t","\\t"),t=C33.Ud(t,"\r",""),C33.Ud(t,"\n","\\n")},C33.jd=function(t){t=C33.Ud(t,"&","&amp;"),t=C33.Ud(t,"<","&lt;");return t=C33.Ud(t,">","&gt;"),C33.Ud(t,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),intlSegmenter=(C33.os=function(t){return t.replace(ESCAPE_REGEX,"\\$&")},C33.Xd=function(t,e){let i=0;for(var s of t)s===e&&++i;return i},C33.Yd=function(t,e,i=!1){if(!e)return[];i||(t=t.toLowerCase(),e=e.toLowerCase());var s=e.length;let r=0;for(var h,n=[];-1<(h=t.indexOf(e,r));)n.push(h),r=h+s;return n},C33.Ud=function(t,e,i){return t.replaceAll(e,()=>i)},C33.qd=function(t,e,i){return t.replace(new RegExp(C33.os(e),"gi"),()=>i)},C33.zd=function(t,e){"string"==typeof e?t.textContent=e:e.Kd()?t.textContent=e.toString():(t.innerHTML=e.Jd(),e instanceof C33.Or&&e.Zd(t))},C33.Qd=function(t,e){return t instanceof C33.HtmlString||t instanceof C33.Or?t.equals(e):e instanceof C33.HtmlString||e instanceof C33.Or?e.equals(t):t===e},C33.t1=function(i,...s){let r=i;for(let t=0,e=s.length;t<e;++t){var h=`{${t}}`;if(!i.includes(h))throw new Error(`missing placeholder '${h}' in string substitution`);r=r.replace(h,s[t].toString())}return r},C33.e1=function(i,...s){let r=i,h=-1,n=-1;for(let t=0,e=s.length;t<e;++t){var a=`{${t}}`;i.includes(a)?(n=t,r=r.replace(a,s[t].toString())):-1===h&&(h=t)}if(0<=h&&0<=n&&h<n)throw new Error(`missing placeholder '${h}' in string substitution`);return r},C33.i1=function(t,e){let i=t;for(var[s,r]of Object.entries(e))i=i.replaceAll(s,r.toString());return i},C33.s1=function(t,e){return e<t?1:t<e?-1:0},C33.h1=function(t,e){t=t.toLowerCase(),e=e.toLowerCase();return e<t?1:t<e?-1:0},null),graphemeSplitter=null,KILOBYTE=(self.Intl&&self.Intl.Segmenter?intlSegmenter=new self.Intl.Segmenter:graphemeSplitter=new self.Ge,C33.n1=function(t){if(intlSegmenter){var e,i=[];for(e of intlSegmenter.segment(t))i.push(e.segment);return i}return graphemeSplitter.Me(t)},C33.a1=function*(t){if(intlSegmenter)for(var e of intlSegmenter.segment(t))yield e.segment;else yield*graphemeSplitter.Re(t)},C33.o1=function(e){if(intlSegmenter){let t=0;for(var i of intlSegmenter.segment(e))++t;return t}return graphemeSplitter.we(e)},1024),MEGABYTE=1024*KILOBYTE,GIGABYTE=1024*MEGABYTE,TERABYTE=1024*GIGABYTE,DEFAULT_FORMATTIME_OPTS=(C33.l1=function(e,i){var i="common."+(i?"dataRates":"dataSizes")+".",s=self.langSub;if(e<KILOBYTE)return s(i+"bytes",e);if(e<MEGABYTE){let t=e/KILOBYTE;return s(i+"kilobytes",t=t<10?Math.round(10*t)/10:Math.round(t))}if(e<GIGABYTE){let t=e/MEGABYTE;return s(i+"megabytes",t=t<10?Math.round(10*t)/10:Math.round(t))}if(e<TERABYTE){let t=e/GIGABYTE;return s(i+"gigabytes",t=t<10?Math.round(10*t)/10:Math.round(t))}{let t=e/TERABYTE;return s(i+"terabytes",t=t<10?Math.round(10*t)/10:Math.round(t))}},{u1:!1,c1:!0,f1:!0,d1:!0,C1:!0});C33.m1=function(t,e){e=Object.assign({},DEFAULT_FORMATTIME_OPTS,e),C33.Lang.PushContext("common.time");var i,s=[],r=self.lang,h=self.langPluralSub,t=(e.c1&&0<(i=Math.floor(t/86400))&&(t-=24*i*3600,s.push(h(".days",null,i))),e.f1&&(0<(i=Math.floor(t/3600))||s.length)&&(t-=3600*i,s.push(h(".hours",null,i))),e.d1&&(0<(i=Math.floor(t/60))||s.length||!e.C1)&&(t-=60*i,s.push(h(".minutes",null,i))),e.C1&&(i=Math.floor(t%60),s.push(h(".seconds",null,i))),(e.u1?r(".approx-prefix"):"")+s.join(r(".separator")));return C33.Lang.PopContext(),t},C33.v1=function(t,e){let i=t<0?"-":"";var t=(t=Math.abs(t)).toString(),s=e-t.length;for(let t=0;t<s;++t)i+="0";return i+t},C33.S1=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},C33.g1=function(t,e){let i=t.split(".").map(t=>t.trim()),s=e.split(".").map(t=>t.trim());C33.Fn(i,4,"0"),C33.Fn(s,4,"0"),i=i.map(t=>parseInt(t,10)),s=s.map(t=>parseInt(t,10));for(let t=0;t<4;++t){var r=i[t]-s[t];if(0!=r)return r<0?-1:1}return 0},C33.T1=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{var e=Math.floor(16*Math.random());return("x"===t?e:3&e|8).toString(16)})},C33._1=function(i,s){if(i.length!==s.length)throw new Error("strings must be same length");let r=0;for(let t=0,e=i.length;t<e;++t)i.charAt(t)!==s.charAt(t)&&++r;return r},C33.E1=function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;let i,s,r,h,n,a;for(e.length<t.length&&(i=t,t=e,e=i),a=Array(t.length+1),s=0;s<=t.length;s++)a[s]=s;for(s=1;s<=e.length;s++){for(h=s,r=1;r<=t.length;r++)n=e[s-1]===t[r-1]?a[r-1]:Math.min(a[r-1]+1,Math.min(h+1,a[r]+1)),a[r-1]=h,h=n;a[t.length]=h}return a[t.length]}}{let bbToHtmlReplacerFunc2=function(t,e,i){var s=BB_CODE_MAP.get(i);if(!s)return"class"===i?e?"</span>":`<span class="bbclass${classIndex++}">`:t;if("string"!=typeof s)return Array.isArray(s)?(r=s[0],h=s[1],e?"</"+r+">":`<${r} class="${h}">`):void 0;if("a"===s&&0===linkActions.length||"abbr"===s&&0===tipList.length)return t;if("a"!==s||e){if("abbr"!==s||e)return"<"+e+s+">";{var r=parseInt(i.substring(3),10)-1;if(r<0||r>=tipList.length)throw new Error("invalid bbcode tip substitution");var h=tipList[r];let t="";if("string"==typeof h?t=h:"function"==typeof h&&(t=h()),"string"!=typeof t)throw new TypeError("invalid bbcode tip");return`<abbr title="${C33.Ud(t,'"',"&quot;")}">`}}t=parseInt(i.substring(1),10)-1;if(t<0||t>=linkActions.length)throw new Error("invalid bbcode link substitution");e=linkActions[t];if("string"==typeof e)return`<a href="${linkActions[t]}">`;if("function"==typeof e)return`<a class="bblink${t}">`;throw new TypeError("invalid bbcode link action")},C33=(bbToHtmlReplacerFunc=bbToHtmlReplacerFunc2,self.$e),assert=self.assert,BB_CODE_MAP=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),SELF_CLOSING_TAGS=new Set(["icon"]),BBREGEX=/\[(\/?)([a-zA-Z0-9]+)\]/g,CUSTOM_BBREGEX=/\[(\/?)([^\[\n]*?)\]/g,linkActions=null,tipList=null,classIndex=0,LINEBREAK_REGEX=/\n/g;C33.Or=class BBString{constructor(t,e){if(this.I1=e&&e.A1?t:C33.Vd(t),this.M1="",this.R1=!1,this.w1=[],this.b1=[],e){if(this.R1=!!e.convertLineBreaks,e.links){if(9<e.links.length)throw new Error("too many links");this.w1=e.links}if(e.tips){if(9<e.tips.length)throw new Error("too many tips");this.b1=e.tips}}this.G1=this.I1.includes("["),this.O1=this.R1&&this.I1.includes("\n"),this.P1=!this.G1&&!this.O1&&!this.I1.includes("&"),this.L1=!1,this.D1=[]}toString(){return this.I1}valueOf(){return this.I1}Kd(){return this.P1}N1(){return this.G1?this.I1.replace(BBREGEX,""):this.I1}Jd(){if(this.P1)return this.I1;if(!this.M1&&this.I1){let t=this.I1;this.G1&&(classIndex=0,linkActions=this.w1,tipList=this.b1,t=t.replace(BBREGEX,bbToHtmlReplacerFunc2),linkActions=null,tipList=null),this.O1&&(t=t.replace(LINEBREAK_REGEX,"<br>")),this.M1=t}return this.M1}Zd(i){if(this.w1.length)for(let t=0,e=this.w1.length;t<e;++t){var s=this.w1[t];if("function"==typeof s){var r=i.querySelector(".bblink"+t);if(!r)throw new Error("unable to attach BBString link handler");r.onclick=s}}}equals(t){return t instanceof C33.HtmlString?this.Jd()===t.Jd():t instanceof C33.Or?this.I1===t.I1:this.I1===t}F1(){if(!this.L1){var i=[],e=this.I1,s=[];let t=CUSTOM_BBREGEX.lastIndex=0;for(var r;null!==(o=CUSTOM_BBREGEX.exec(e));){var h=o.index;if(!(0<h&&"\\"===e.charAt(h-1))){var n=o[0],a=o[1],o=o[2],l=e.substring(t,h);if(t=h+n.length,l&&i.push({text:l,B1:s.slice(0)}),o)if(a){var u=o.toLowerCase();for(let t=s.length-1;0<=t;--t)if(s[t].tag===u){s.splice(t,1);break}}else{let t=o,e=null;h=o.indexOf("=");if(-1!==h?(t=o.substring(0,h).toLowerCase(),e=o.substring(h+1)):t=t.toLowerCase(),SELF_CLOSING_TAGS.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);i.push({icon:e,B1:s.slice(0)})}else s.push({tag:t,W1:e})}}}t<e.length&&i.push({text:e.substring(t),B1:s.slice(0)});for(r of i)r.text&&(r.text=this.V1(r.text));this.D1=i.map(t=>t.icon?C33.nh(C33.H1,{icon:t.icon,B1:t.B1}):C33.nh(C33.U1,{j1:C33.n1(t.text),B1:t.B1})),this.L1=!0}return this.D1}V1(t){return t=C33.Ud(t,"\\[","["),C33.Ud(t,"\\\\","\\")}static X1(t){return C33.nh(C33.Or,t,{A1:!0}).N1()}static Y1(t){return t.replace(CUSTOM_BBREGEX,"")}}}{let IsWordBreakWhiteSpace2=function(t){return""!==t&&""!==t&&C33.Pd(t)},IsOpeningCJKPunctiationChar2=function(t){return CJK_OPEN_PUNCTUATION.has(t)},IsContinuingCJKPunctuationChar2=function(t){return C33.$d(t)&&!IsOpeningCJKPunctiationChar2(t)},WordBreakTrimEnd2=function(t){for(;0<t.length&&IsWordBreakWhiteSpace2(t.at(-1));)t.pop()},IsNewline2=function(t){return"\n"===t||"\r\n"===t},C33=(IsWordBreakWhiteSpace=IsWordBreakWhiteSpace2,IsOpeningCJKPunctiationChar=IsOpeningCJKPunctiationChar2,IsContinuingCJKPunctuationChar=IsContinuingCJKPunctuationChar2,WordBreakTrimEnd=WordBreakTrimEnd2,IsNewline=IsNewline2,self.$e),CJK_OPEN_PUNCTUATION=new Set("");C33.q1=class WordWrap{constructor(){this.z1=[],this.K1=null}J1(){return this.z1}Z1(){return this.z1.length}Q1(t){this.K1=t}tC(t,e){let i=0,s=0,r=0,h=0,n=0;for(var a of t){var o;-1===a.eC()&&(o=e(a),a.iC(o.height),a.sC(o.fontBoundingBoxAscent||0),a.rC(o.fontBoundingBoxDescent||0),a.hC(o.nC||0),a.aC()?a.oC(o.width):a.lC()&&a.uC(this.K1)),i+=a.eC(),s=Math.max(s,a.cC()),r=Math.max(r,a.fC()),h=Math.max(h,a.dC()),n=Math.max(n,a.CC())}return{width:i,height:s,fontBoundingBoxAscent:r,fontBoundingBoxDescent:h,nC:n}}pC(t,e,i,s,r,h){this.z1.push(C33.nh(C33.q1.mC,{vC:t,width:e,height:i,fontBoundingBoxAscent:s,fontBoundingBoxDescent:r,nC:h}))}q1(e,i,s,r,h){if("string"==typeof e&&(e=[C33.nh(C33.U1,{j1:C33.n1(e)})]),C33.xn(this.z1),!(!e.length||1===e.length&&e[0].aC()&&e[0].qu()||s<2)){if(1===e.length){var n=e[0];if(n.aC()&&n.SC()<=100&&!n.gC()){var{width:a,height:o,fontBoundingBoxAscent:l,fontBoundingBoxDescent:u,nC:c}=i(n);if(n.oC(a+=h),n.iC(o),n.sC(l||0),n.rC(u||0),n.hC(c||0),a<=s)return void this.pC([n],a,o,l,u,c)}}let t;t="word"===r?this.TC(e):"cjk"===r?this._C(e):this.yC(e),this.EC(t,i,s,h)}}TC(t){var e,i=[];let s=[],r=!1;for(e of t){var h,n,a=e.IC();if(e.lC())0<s.length&&i.push(s),i.push([e]),s=[];else for(var o of e.AC())IsNewline2(o)?(0<s.length&&i.push(s),i.push([C33.nh(C33.U1,{j1:["\n"],B1:a})]),s=[]):0===s.length?(s.push(C33.nh(C33.U1,{j1:[o],B1:a})),r=IsWordBreakWhiteSpace2(o)):(h=IsWordBreakWhiteSpace2(o))===r?(n=s.at(-1)).IC()===a?n.MC(o):s.push(C33.nh(C33.U1,{j1:[o],B1:a})):(i.push(s),s=[C33.nh(C33.U1,{j1:[o],B1:a})],r=h)}return 0<s.length&&i.push(s),i}_C(t){var e,i=[];let s=[],r=!1;for(e of t){var h,n=e.IC();if(e.lC())0<s.length&&i.push(s),i.push([e]),s=[];else for(var a of e.AC())IsNewline2(a)?(0<s.length&&i.push(s),i.push([C33.nh(C33.U1,{j1:["\n"],B1:n})]),s=[]):r=(0===s.length?s.push(C33.nh(C33.U1,{j1:[a],B1:n})):r||IsContinuingCJKPunctuationChar2(a)?(h=s.at(-1)).IC()===n?h.MC(a):s.push(C33.nh(C33.U1,{j1:[a],B1:n})):(i.push(s),s=[C33.nh(C33.U1,{j1:[a],B1:n})]),IsOpeningCJKPunctiationChar2(a))}return 0<s.length&&i.push(s),i}yC(t){var i,s=[];for(let e of t)e.aC()?(i=e.AC(),C33.qr(s,i.map(t=>[C33.nh(C33.U1,{j1:[t],B1:e.IC()})]))):s.push([e]);return s}RC(t){return t.map(t=>t.wC())}bC(t,e){var i=t.length?t.at(-1):null;let s=0;i&&i.aC()&&e[0].aC()&&e[0].IC()===i.IC()&&(i.GC(e[0].AC()),s=1);for(var r=e.length;s<r;++s){var h=e[s];t.push(h.wC())}}EC(t,e,i,s){let r=[],h=0,n=0,a=0,o=0,l=0;for(var u of t){var c,f,d;1===u.length&&u[0].aC()&&1===u[0].SC()&&IsNewline2(u[0].AC()[0])?(0===n&&(c=e(C33.nh(C33.U1,{j1:[" "],B1:u[0].IC()})),n=c.height,a=c.fontBoundingBoxAscent||0,o=c.fontBoundingBoxDescent||0,l=c.nC||0),this.pC(r,h,n,a,o,l),r=[],h=0,n=0,a=0,o=0,l=0):(c=this.RC(r),this.bC(c,u),d=(f=this.tC(c,e)).width,l=i<=d?(0<r.length&&this.pC(r,h,n,a,o,l),r=[],u[0].aC()&&C33.Dd(u[0].AC())?(h=0,n=0,a=0,o=0):(this.bC(r,u),u=this.tC(r,e),h=u.width,n=u.height,a=u.fontBoundingBoxAscent,o=u.fontBoundingBoxDescent,u.nC)):(r=c,h=d,n=f.height,a=f.fontBoundingBoxAscent,o=f.fontBoundingBoxDescent,f.nC))}0<r.length&&this.pC(r,h,n,a,o,l),this.OC(e,s)}OC(e,i){for(var s of this.z1){var r,h,n=s.PC();if(n.length){let t=n.at(-1);t.aC()&&(h=(r=t.AC()).slice(0),WordBreakTrimEnd2(h),0===h.length?(s.LC(-t.eC()),n.pop()):h.length<r.length&&(t.xC(h),r=e(t).width,h=t.eC()-r,t.oC(r),s.LC(-h)),0!==i)&&0<n.length&&((t=n.at(-1)).LC(i),s.LC(i))}}}Yu(){C33.xn(this.z1)}DC(){return this.z1.reduce((t,e)=>Math.max(t,e.eC()),0)}NC(){return this.z1.reduce((t,e)=>t+e.cC(),0)}}}{let C33=self.$e;C33.q1.mC=class WordWrapLine{constructor(t){this.D1=t.vC||[],this.FC=t.width||-1,this.$C=t.height||-1,this.BC=t.fontBoundingBoxAscent||-1,this.kC=t.fontBoundingBoxDescent||-1,this.WC=t.nC||-1,this.VC=0,this.HC=0}vC(){return this.D1.values()}*UC(){var e=this.D1;for(let t=e.length-1;0<=t;--t)yield e[t]}PC(){return this.D1}LC(t){this.FC+=t}eC(){return this.FC}cC(){return this.$C}jC(){return this.BC}dC(){return this.kC}CC(){return this.WC}XC(t){this.VC=t}YC(){return this.VC}qC(t){this.HC=t}zC(){return this.HC}}}{let C33=self.$e;C33.KC=class FragmentBase{constructor(t){this.JC=t.B1||[],this.FC=t.width||-1,this.$C=t.height||-1,this.BC=t.fontBoundingBoxAscent||-1,this.kC=t.fontBoundingBoxDescent||-1,this.WC=t.nC||-1,this.VC=0,this.HC=0}aC(){return!1}lC(){return!1}IC(){return this.JC}ZC(e){var i=this.JC;for(let t=i.length-1;0<=t;--t){var s=i[t];if(s.tag===e)return s}return null}QC(t){return!!this.ZC(t)}tp(){var t,e=new Map;for(t of this.JC)e.set(t.tag,t.W1);return e}LC(t){this.FC+=t}oC(t){this.FC=t}eC(){return this.FC}iC(t){this.$C=t}cC(){return this.$C}sC(t){this.BC=t}fC(){return this.BC}rC(t){this.kC=t}dC(){return this.kC}hC(t){this.WC=t}CC(){return this.WC}XC(t){this.VC=t}YC(){return this.VC}qC(t){this.HC=t}zC(){return this.HC}}}{let C33=self.$e;C33.U1=class TextFragment extends C33.KC{constructor(t){super(t),this.ep=t.j1}aC(){return!0}GC(t){C33.qr(this.ep,t),this.FC=-1,this.$C=-1,this.BC=-1,this.kC=-1,this.WC=-1}MC(t){this.ep.push(t)}wC(){return C33.nh(C33.U1,{j1:this.ep.slice(0),B1:this.JC,width:this.FC,height:this.$C,fontBoundingBoxAscent:this.BC,fontBoundingBoxDescent:this.kC,nC:this.WC})}AC(){return this.ep}xC(t){this.ep=t}SC(){return this.ep.length}qu(){return 0===this.ep.length}gC(){return this.ep.includes("\n")}}}{let C33=self.$e;C33.H1=class IconFragment extends C33.KC{constructor(t){super(t),this.ip=t.icon}lC(){return!0}sp(){return this.ip}wC(){return C33.nh(C33.H1,{icon:this.ip,B1:this.JC,width:this.FC,height:this.$C,fontBoundingBoxAscent:this.BC,fontBoundingBoxDescent:this.kC,nC:this.WC})}rp(t){var e;return t?(e=Number(this.ip),String(e)===this.ip?(e=Math.floor(e),t.hp(e)):t.np(this.ip)):null}uC(t){t=this.rp(t);this.FC=t?this.$C*t.eC()/t.cC():0}op(t){t=this.rp(t);return t?t.op():null}SC(){return 1}}}{let C33=self.$e;C33.lp=class TextIconManager{constructor(t){this.up=new Map,this.cp=t.fp,this.Cp=t.pp}ah(){for(var t of this.up.values())t.ah();this.up.clear()}mp(t){var e,i=this.up.get(t);return i||(e=this.cp(t),i=C33.nh(C33.vp,this,{source:t,Sp:e}),this.up.set(t,i)),i}gp(t){return this.up.has(t)}Tp(t){var e=this.up.get(t);e&&e.ah(),this.up.delete(t)}async _p(t){return this.Cp(t)}}}{let C33=self.$e;C33.vp=class TextIconSet{constructor(t,e){this.yp=t,this.Ep=e.source,this.Ip=[],this.Ap=new Map,this.Mp=!1,this.Rp=!1,this.wp=null;var i=e.Sp.bp;for(let t=0,e=i.length;t<e;++t){var s=i[t],r=C33.nh(C33.Gp,this,{index:t,tag:s.tag,source:s.source,width:s.width,height:s.height});this.Ip.push(r),s.tag&&this.Ap.set(s.tag.toLowerCase(),r)}}ah(){for(var t of this.Ip)t.ah();C33.xn(this.Ip),this.Ap.clear(),this.yp=null,this.Ep=null}Op(){return this.Mp}Pp(){return this.Rp}Lp(){return this.wp||(this.wp=this.xp()),this.wp}async xp(){if(!this.Mp){this.Mp=!0,this.Rp=!0;var t=await this.yp._p(this.Ep);if(this.yp){var i=t.bp;for(let t=0,e=Math.min(i.length,this.Ip.length);t<e;++t){var s=i[t].Dp;this.Ip[t].Np(s)}this.Rp=!1}}}hp(t){return(t=Math.floor(t))<0||t>=this.Ip.length?null:this.Ip[t]}np(t){return this.Ap.get(t.toLowerCase())||null}}}{let C33=self.$e;C33.Gp=class TextIcon{constructor(t,e){this.Fp=t,this.Ep=e.source||null,this.$p=e.index,this.Bp=e.tag,this.FC=e.width,this.$C=e.height,this.kp=null}ah(){this.FC=0,this.$C=0,this.Fp=null}Wp(){return this.Ep}eC(){return this.FC}cC(){return this.$C}Np(t){this.kp=t}op(){return this.kp}}}{let PlaneFromPoints2=function(t,e,i,s){var r=tempVec3c;vec32.F(tempVec3a,i,e),vec32.F(tempVec3b,t,e),vec32.Pt(r,tempVec3a,tempVec3b),vec32.normalize(r,r),s.set(r[0],r[1],r[2],vec32.Ot(t,r))},IsInFrontOfPlane2=function(t,e,i,s,r,h,n){var a=n.x,o=n.y,l=n.z,u=n.w,c=n.Vp,f=n.Hp,n=n.Up,d=1-c,C=1-f,p=1-n;return u<=a*t*c+a*s*d+o*e*f+o*r*C+l*i*n+l*h*p||u<a*s*c+a*t*d+o*r*f+o*e*C+l*h*n+l*i*p},IsPointInFrontOfPlane2=function(t,e,i,s){var r=s.x;return s.w<=r*t+s.y*e+s.z*i},C33=(PlaneFromPoints=PlaneFromPoints2,IsInFrontOfPlane=IsInFrontOfPlane2,IsPointInFrontOfPlane=IsPointInFrontOfPlane2,self.$e),glMatrix=self.pe,vec32=glMatrix.Ee,vec42=glMatrix.Ie,mat42=glMatrix.ge,tempVec3a=vec32.create(),tempVec3b=vec32.create(),tempVec3c=vec32.create(),tempVec4=vec42.create(),tempMat4=mat42.create(),neartl=vec32.create(),neartr=vec32.create(),nearbl=vec32.create(),nearbr=vec32.create(),fartl=vec32.create(),fartr=vec32.create(),farbl=vec32.create(),farbr=vec32.create(),unitViewport=vec42.I(0,0,1,1);C33.jp={Xp(t,e,i,s,r,h,n){var a=s[0]*t+s[4]*e+s[8]*i+s[12],o=s[1]*t+s[5]*e+s[9]*i+s[13],l=s[2]*t+s[6]*e+s[10]*i+s[14],t=s[3]*t+s[7]*e+s[11]*i+s[15],e=r[0]*a+r[4]*o+r[8]*l+r[12]*t,i=r[1]*a+r[5]*o+r[9]*l+r[13]*t,s=r[2]*a+r[6]*o+r[10]*l+r[14]*t,a=r[3]*a+r[7]*o+r[11]*l+r[15]*t;return 0!=a&&(i*=a=1/a,s*=a,n[0]=(.5*(e*=a)+.5)*h[2]+h[0],n[1]=(.5*i+.5)*h[3]+h[1],n[2]=.5*(1+s),!0)},Yp(t,e,i,s,r,h,n){var a=tempMat4,o=tempVec4;return mat42.multiply(a,r,s),null!==mat42.M(a,a)&&(o[0]=(t-h[0])/h[2]*2-1,o[1]=(e-h[1])/h[3]*2-1,o[2]=2*i-1,o[3]=1,vec42.Ft(o,o,a),0!==o[3])&&(o[3]=1/o[3],n[0]=o[0]*o[3],n[1]=o[1]*o[3],n[2]=o[2]*o[3],!0)},qp(t,e,i,s,r,h,n){var a=tempVec3a,o=tempVec3b;if(!C33.jp.Yp(t,e,0,s,r,h,a))return!1;if(!C33.jp.Yp(t,e,1,s,r,h,o))return!1;t=tempVec3b,vec32.F(t,o,a),e=tempVec3c,vec32.set(e,0,0,1),s=-i,r=vec32.Ot(e,t);let l=0;if(0===r){if(0!==vec32.Ot(e,a)+s)return!1}else if((l=-(vec32.Ot(a,e)+s)/r)<0)return!1;return vec32.At(n,a,t,l),!0}};class Plane{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Vp=NaN,this.Hp=NaN,this.Up=NaN}set(t,e,i,s){this.x=t,this.y=e,this.z=i,this.w=s,this.Vp=0<t?1:0,this.Hp=0<e?1:0,this.Up=0<i?1:0}}C33.jp.zp=class ViewFrustum{constructor(){this.Kp=new Plane,this.Jp=new Plane,this.Zp=new Plane,this.Qp=new Plane,this.tm=new Plane,this.im=new Plane}rm(t,e){var i=unitViewport;C33.jp.Yp(0,1,0,t,e,i,neartl),C33.jp.Yp(1,1,0,t,e,i,neartr),C33.jp.Yp(0,0,0,t,e,i,nearbl),C33.jp.Yp(1,0,0,t,e,i,nearbr),C33.jp.Yp(0,1,1,t,e,i,fartl),C33.jp.Yp(1,1,1,t,e,i,fartr),C33.jp.Yp(0,0,1,t,e,i,farbl),C33.jp.Yp(1,0,1,t,e,i,farbr),PlaneFromPoints2(nearbl,neartl,fartl,this.Kp),PlaneFromPoints2(neartl,neartr,fartr,this.Jp),PlaneFromPoints2(neartr,nearbr,farbr,this.Zp),PlaneFromPoints2(nearbr,nearbl,farbl,this.Qp),PlaneFromPoints2(farbl,fartl,fartr,this.im),PlaneFromPoints2(nearbr,neartr,neartl,this.tm)}hm(t,e,i,s,r,h){return IsInFrontOfPlane2(t,e,i,s,r,h,this.Kp)&&IsInFrontOfPlane2(t,e,i,s,r,h,this.Jp)&&IsInFrontOfPlane2(t,e,i,s,r,h,this.Zp)&&IsInFrontOfPlane2(t,e,i,s,r,h,this.Qp)&&IsInFrontOfPlane2(t,e,i,s,r,h,this.tm)&&IsInFrontOfPlane2(t,e,i,s,r,h,this.im)}nm(t,e,i){return!IsPointInFrontOfPlane2(t,e,i,this.tm)}}}{let C33=self.$e,glMatrix=self.pe,vec32=glMatrix.Ee,vec42=glMatrix.Ie,mat42=glMatrix.ge,tempMat4=mat42.create(),tmpVec3a=vec32.I(0,0,0),tmpVec3b=vec32.I(0,0,0),tmpVec3c=vec32.I(0,0,0),defaultUpVector=vec32.I(0,1,0),tmpVec4=vec42.I(0,0,0,0),tmpQuad=new C33.Xl,tmpRect=new C33.Rect,defaultTexCoordsQuad=new C33.Xl(0,0,1,0,1,1,0,1),DEFAULT_RENDERERBASE_OPTS={om:1,lm:1e4},matWebGLtoWebGPU=mat42.I(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);C33.jp.um=class RendererBase{constructor(t){t=Object.assign({},DEFAULT_RENDERERBASE_OPTS,t),this.FC=0,this.$C=0,this.fm=C33.ph(45),this.dm=Math.tan(this.fm/2),this.Cm=mat42.create(),this.pm=mat42.create(),this.vm=!1,this.Sm=t.om,this.gm=t.lm,this.Tm=[],this._m=new Map,this.ym=null,this.Em=null,this.Im=null,this.Am=null,this.Mm=null,this.Rm=null,this.wm=null,this.Gm=null,this.Om=null,this.Pm=null,this.Lm=null,this.xm=null,this.Dm=new Map,this.Nm=null,this.Fm=[],this.$m=new Map,this.Bm=0,this.km=0,this.Wm=1,this.Vm=[this.Wm],this.Hm=1,this.Um=[this.Hm],this.jm=.5,this.Xm=[this.jm],this.Ym=0,this.qm=!0,this.zm=!1}Km(t){let e=0,i=t.length,s=0;for(;e<i;)t[e++]=s,t[e++]=s+1,t[e++]=s+2,t[e++]=s,t[e++]=s+2,t[e++]=s+3,s+=4}Jm(){this.Bm=0,this.km=0,this.ym=null,this.Em=null,this.Im=null,this.Am=null,this.Mm=null,this.Rm=null,this.wm=null,this.Gm=null,this.Om=null,this.Pm=null,this.Lm=null,this.xm=null,this.Zm()}Qm(){this.Jm(),this.Nm=null}t2(){for(var t of this.Tm)t.ah();this.Jm()}eC(){return this.FC}cC(){return this.$C}e2(t){return this.i2()?100:t/(2*this.s2())}h2(t){return this.i2()?t/(2*this.s2())/this.e2(t):1}n2(t){this.Sm=t}a2(){return this.Sm}o2(t){this.gm=t}l2(){return this.gm}u2(t){this.fm=t,this.dm=Math.tan(this.fm/2)}c2(){return this.fm}s2(){return this.dm}f2(){this.vm=!1}d2(){this.vm=!0}i2(){return!this.vm}C2(){return this.vm}m2(t,e,i=.5,s=.5){var r,h,n=this.a2(),a=this.l2(),o=this.c2();.5===i&&.5===s?this.v2()?mat42.St(t,o,e,n,a):mat42.perspective(t,o,e,n,a):(o=2*(i=1-i)-2,i=2*i,r=2*s-2,s=2*s,e=(h=this.s2()*n)*e,mat42.Ct(t,o*e,i*e,r*h,s*h,n,a),this.v2()&&mat42.mul(t,matWebGLtoWebGPU,t))}S2(t,e,i,s=1){var r=self.devicePixelRatio,h=2*this.e2(i)*r*this.s2()/i,e=e*h/(2*r*s),i=i*h/(2*r*s),h=-e,r=e,s=-i,e=i;this.v2()?mat42._t(t,h,r,s,e,this.a2(),this.l2()):mat42.ortho(t,h,r,s,e,this.a2(),this.l2())}g2(t,e,i,s,r,h=1){let n=1;this.i2()&&(n=200*this.s2()/r);var r=tmpVec3c,a=(vec32.set(r,n,-n,1),tmpVec3a),o=tmpVec3b;vec32.multiply(a,e,r),vec32.multiply(o,i,r),mat42.yt(t,a,o,s||defaultUpVector),r[2]=h,mat42.scale(t,t,r)}T2(t,e,i,s,r,h,n,a){return vec32.set(tmpVec3a,t,e,i),vec32.set(tmpVec3b,s,r,h),this.g2(tempMat4,tmpVec3a,tmpVec3b,defaultUpVector,n,a),tempMat4}_2(t){this.Tm.push(t),this._m.set(t.jc(),t)}E2(t){var e=this.Tm.indexOf(t);-1!==e&&this.Tm.splice(e,1),this._m.delete(t.jc())}Zm(){C33.xn(this.Tm),this._m.clear()}I2(t){return this._m.get(t)||null}A2(){return this.ym}M2(){this.R2(this.ym)}w2(){return this.Em}b2(){this.R2(this.Em)}G2(){this.R2(this.Im)}O2(){this.R2(this.Am)}P2(){this.R2(this.Mm)}L2(){this.R2(this.Rm)}D2(){this.R2(this.wm)}N2(){this.R2(this.Gm)}F2(){this.R2(this.Om)}B2(){this.R2(this.Pm)}W2(){this.R2(this.Lm)}V2(){this.R2(this.xm)}H2(t){this.Nm=t}U2(){return this.Nm}j2(t,e,i,s){var r=C33.jp.Y2.X2(t,e,i,s);let h=this.Dm.get(r);return h||(h=C33.nh(C33.jp.Y2,this,t,e,i,s),this.Dm.set(r,h)),h.q2(),h}z2(t){t.K2(),0===t.J2()&&(this.Nm===t&&(this.Nm=null),this.Dm.delete(t.Z2()),t.ah())}Q2(t){C33.xn(this.Fm),this.$m.clear();let e=0;for(var i of t){var s=i[0],r=i[1],i=i[2];this.Fm.push([r,i]),this.$m.set(s,{number:e,tv:r,sv:i}),e++}}rv(t){return this.Fm[t]}hv(t){return this.rv(t)[0]}nv(t){return this.rv(t)[1]}av(t){t=this.$m.get(t);if(void 0===t)throw new Error("invalid blend name");return t}ov(t){t=this.$m.get(t);if(void 0===t)throw new Error("invalid blend name");return t.number}lv(t){this.Bm=t}uv(){return this.Bm}cv(t){this.km=t,this.Nm=null}dv(){return this.km}mC(t,e,i,s){var r=C33.Th(t,e,i,s),h=Math.sin(r),r=Math.cos(r),n=.5*this.Wm,h=h*n,r=r*n,n=this.Hm;2===n?this.Cv(t,e,0,i,s,0,h,r):1===n?this.pv(t,e,0,i,s,0,h,r):this.vv(t,e,0,i,s,0,h,r)}Sv(t,e,i,s,r,h){var n=C33.Th(t,e,s,r),a=Math.sin(n),n=Math.cos(n),o=.5*this.Wm,a=a*o,n=n*o,o=this.Hm;2===o?this.Cv(t,e,i,s,r,h,a,n):1===o?this.pv(t,e,i,s,r,h,a,n):this.vv(t,e,i,s,r,h,a,n)}Cv(t,e,i,s,r,h,n,a){var o=this.jm,t=t+o-a,e=e+o-n,s=s+o+a,r=r+o+n,o=2*a,l=2*n;this.gv(t+n,e-a,i,s+n,r-a,h,s-n-o,r+a-l,h,t-n+o,e+a+l,i,defaultTexCoordsQuad)}pv(t,e,i,s,r,h,n,a){var o=this.jm,t=t+o-a,e=e+o-n,s=s+o+a,r=r+o+n;this.gv(t+n,e-a,i,s+n,r-a,h,s-n,r+a,h,t-n,e+a,i,defaultTexCoordsQuad)}vv(t,e,i,s,r,h,n,a){var o=this.jm,t=t+o,e=e+o,s=s+o,r=r+o;this.gv(t+n,e-a,i,s+n,r-a,h,s-n,r+a,h,t-n,e+a,i,defaultTexCoordsQuad)}Tv(t,e,i,s,r,h){var n=C33.Th(t,e,i,s),a=Math.sin(n),n=Math.cos(n),o=.5*this.Wm,a=a*o,n=n*o,o=this.Hm;2===o?this._v(t,e,i,s,a,n,r,h):1===o?this.yv(t,e,i,s,a,n,r,h):this.Ev(t,e,i,s,a,n,r,h)}_v(t,e,i,s,r,h,n,a){var o=this.jm,t=t+o-h,e=e+o-r,i=i+o+h,s=s+o+r,o=2*h,l=2*r,u=t+r,c=e-h,t=t-r+o,e=e+h+l,f=i+r,d=s-h,i=i-r-o,r=s+h-l;tmpQuad.set(u,c,f,d,i,r,t,e),tmpRect.set(n,0,a,0),this.Iv(tmpQuad,tmpRect)}yv(t,e,i,s,r,h,n,a){var o=this.jm,t=t+o-h,e=e+o-r,i=i+o+h,s=s+o+r,o=t+r,l=e-h,t=t-r,e=e+h,u=i+r,c=s-h,i=i-r,r=s+h;tmpQuad.set(o,l,u,c,i,r,t,e),tmpRect.set(n,0,a,0),this.Iv(tmpQuad,tmpRect)}Ev(t,e,i,s,r,h,n,a){var o=this.jm,t=t+o,e=e+o,i=i+o,s=s+o,o=t+r,l=e-h,t=t-r,e=e+h,u=i+r,c=s-h,i=i-r,r=s+h;tmpQuad.set(o,l,u,c,i,r,t,e),tmpRect.set(n,0,a,0),this.Iv(tmpQuad,tmpRect)}Av(t,e,i,s){var r=.5*this.Wm,h=this.Hm;2===h?this.Mv(t,e,i,s,r):1===h?this.Rv(t,e,i,s,r):this.wv(t,e,i,s,r)}Mv(t,e,i,s,r){this.Cv(t,e,0,i,e,0,0,r),this.Cv(i,e,0,i,s,0,r,0),this.Cv(i,s,0,t,s,0,0,-r),this.Cv(t,s,0,t,e,0,-r,0)}Rv(t,e,i,s,r){this.pv(t,e,0,i,e,0,0,r),this.pv(i,e,0,i,s,0,r,0),this.pv(i,s,0,t,s,0,0,-r),this.pv(t,s,0,t,e,0,-r,0)}wv(t,e,i,s,r){this.vv(t,e,0,i,e,0,0,r),this.vv(i,e,0,i,s,0,r,0),this.vv(i,s,0,t,s,0,0,-r),this.vv(t,s,0,t,e,0,-r,0)}bv(t){this.Av(t.ml(),t.vl(),t.Sl(),t.gl())}Gv(t){var e=C33.Th(t.Jh(),t.Zh(),t.Qh(),t.tn()),i=Math.sin(e),e=Math.cos(e),s=.5*this.Wm,i=i*s,e=e*s,s=this.Hm;2===s?this.Ov(t,i,e):1===s?this.Pv(t,i,e):this.Lv(t,i,e)}Ov(t,e,i){this.Cv(t.Jh(),t.Zh(),0,t.Qh(),t.tn(),0,e,i),this.Cv(t.Qh(),t.tn(),0,t.sn(),t.rn(),0,i,-e),this.Cv(t.sn(),t.rn(),0,t.hn(),t.nn(),0,-e,-i),this.Cv(t.hn(),t.nn(),0,t.Jh(),t.Zh(),0,-i,e)}Pv(t,e,i){this.pv(t.Jh(),t.Zh(),0,t.Qh(),t.tn(),0,e,i),this.pv(t.Qh(),t.tn(),0,t.sn(),t.rn(),0,i,-e),this.pv(t.sn(),t.rn(),0,t.hn(),t.nn(),0,-e,-i),this.pv(t.hn(),t.nn(),0,t.Jh(),t.Zh(),0,-i,e)}Lv(t,e,i){this.vv(t.Jh(),t.Zh(),0,t.Qh(),t.tn(),0,e,i),this.vv(t.Qh(),t.tn(),0,t.sn(),t.rn(),0,i,-e),this.vv(t.sn(),t.rn(),0,t.hn(),t.nn(),0,-e,-i),this.vv(t.hn(),t.nn(),0,t.Jh(),t.Zh(),0,-i,e)}xv(t){this.Wm=t,this.Vm[this.Vm.length-1]=t}Dv(){return this.Wm}Nv(t){if(100<=this.Vm.length)throw new Error("pushed too many line widths - check push/pop pairs");this.Vm.push(t),this.Wm=t}Fv(){if(this.Vm.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.Vm.pop(),this.Wm=this.Vm.at(-1)}$v(){this.Hm=0,this.Um[this.Um.length-1]=0}Bv(){this.Hm=1,this.Um[this.Um.length-1]=0}kv(){this.Hm=2,this.Um[this.Um.length-1]=0}Wv(t){if("butt"===t)this.Vv();else if("square"===t)this.Hv();else{if("zag"!==t)throw new Error("invalid line cap");this.Uv()}}Vv(){if(100<=this.Um.length)throw new Error("pushed too many line caps - check push/pop pairs");this.Um.push(0),this.Hm=0}Hv(){if(100<=this.Um.length)throw new Error("pushed too many line caps - check push/pop pairs");this.Um.push(1),this.Hm=1}Uv(){if(100<=this.Um.length)throw new Error("pushed too many line caps - check push/pop pairs");this.Um.push(2),this.Hm=2}jv(){if(this.Um.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.Um.pop(),this.Hm=this.Um.at(-1)}Xv(t){this.jm=t,this.Xm[this.Xm.length-1]=t}Yv(){return this.jm}qv(t){if(100<=this.Xm.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.Xm.push(t),this.jm=t}zv(){if(this.Xm.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.Xm.pop(),this.jm=this.Xm.at(-1)}Kv(e){var t=e.length/2;if(t<3)throw new Error("need at least 3 points");var i=t-2,s=i-1,r=e[0],h=e[1];for(let t=0;t<i;t+=2){var n,a=2*t,o=e[2+a],l=e[3+a],u=e[4+a],c=e[5+a];t===s?this.Jv(r,h,o,l,u,c,u,c):(n=e[6+a],this.Jv(r,h,o,l,u,c,n,e[7+a]))}}Zv(){return 3}Qv(){this.tS(!0),this.Ym++}eS(){return this.Ym}iS(){this.Ym++}sS(t){this.qm=!!t}rS(){return this.qm}hS(t){this.zm=!!t}nS(){return this.zm}aS(){return!1}v2(){return!1}oS(){}lS(){}uS(){}cS(){return this.oS()+this.lS()+this.uS()}fS(){return C33.nh(C33.jp.dS,this)}}}{let C33=self.$e;C33.jp.CS=class ShaderProgramBase{constructor(t,e){this.uh=e.name,this.pS=t,this.mS=e.extendBoxHorizontal||0,this.vS=e.extendBoxVertical||0,this.SS=!!e.crossSampling,this.gS=!!e.mustPreDraw,this.TS=!!e.preservesOpaqueness,this._S=!!e.supports3dDirectRendering,this.yS=!!e.animated,this.ES=!!e.blendsBackground,this.IS=!!e.usesDepth,this.AS=!1,this.MS=this.SS||this.ES||0!==this.mS||0!==this.vS}ah(){this.pS=null}RS(){return this.pS}jc(){return this.uh}wS(){return 0!==this.mS||0!==this.vS}bS(){return this.mS}GS(){return this.vS}OS(){return this.SS}PS(){return this.gS}LS(){return this.TS}xS(){return this._S}DS(){return this.yS}NS(){return this.ES}FS(){return this.IS}$S(){return this.AS}BS(){return this.MS}kS(){return!1}}}{let C33=self.$e;C33.jp.Y2=class StateGroup{constructor(t,e,i,s,r){this.pS=t,this.ad=0,this.WS=null,this.VS="",this.HS=i,this.US=C33.nh(C33.Fa),this.US.set(s),this.jS=r,"string"==typeof e?this.VS=e:(this.WS=e,this.VS=this.WS.jc())}ah(){if(0<this.ad)throw new Error("releasing state group still in use");this.pS=null,this.WS=null,this.VS=""}XS(){var t=this.pS;t.R2(this.WS),t.YS(this.HS),t.qS(this.US),t.cv(this.jS),t.H2(this)}Z2(){return C33.jp.Y2.X2(this.VS,this.HS,this.US,this.jS)}q2(){++this.ad}K2(){--this.ad}J2(){return this.ad}zS(){this.WS=null}KS(t){if(this.WS=t.I2(this.VS),!this.WS)throw new Error("failed to restore shader program")}static X2(t,e,i,s){return("string"==typeof t?t:t.jc())+","+e+","+i.Ja()+","+i.Za()+","+i.Qa()+","+i.eo()+","+s}}}{let interpolateQuad2=function(t,e,i){var s=i.Jh(),r=i.Zh(),h=i.Qh()-s,n=i.tn()-r;return[s+h*t+(i.hn()-s)*e,r+n*t+(i.nn()-r)*e]},C33=(interpolateQuad=interpolateQuad2,self.$e),tempQuadTex=C33.nh(C33.Xl);C33.jp.JS=class MeshPoint{constructor(t,e,i){this.ZS=t,this.QS=e,this.tg=i,this.Yo=NaN,this.qo=NaN,this.jS=NaN,this.eg=NaN,this.ig=NaN,this.Yo=0,this.qo=0,this.jS=0,this.eg=0,this.ig=0}sg(t,e,i,s){this.Yo=t,this.qo=e,this.eg=i,this.ig=s}rg(){return this.Yo}hg(t){this.Yo!==t&&(this.Yo=t,this.ZS.ng())}ag(){return this.qo}og(t){this.qo!==t&&(this.qo=t,this.ZS.ng())}lg(){return this.jS}ug(t){this.jS!==t&&(this.jS=Math.max(t,0),this.ZS.ng())}fg(){return this.eg}dg(t){this.eg=t}Cg(){return this.ig}pg(t){this.ig=t}mg(t,e,i){[this.Yo,this.qo]=interpolateQuad2(t.Yo,t.qo,e),this.jS=t.jS,this.eg=C33.Lt(i.ml(),i.Sl(),t.eg),this.ig=C33.Lt(i.vl(),i.gl(),t.ig)}vg(t,e,i){[this.Yo,this.qo]=interpolateQuad2(t.Yo,t.qo,e),this.jS=t.jS,[this.eg,this.ig]=interpolateQuad2(t.eg,t.ig,i)}Sg(){return{x:this.rg(),y:this.ag(),z:this.lg(),u:this.fg(),v:this.Cg()}}gg(t){this.hg(t.x),this.og(t.y),t.hasOwnProperty("z")&&this.ug(t.z),this.dg(t.u),this.pg(t.v)}Tg(){return this.ZS}_g(){return this.QS}yg(){return this.tg}},C33.jp.Eg=class Mesh{constructor(i,t,e){if(i<2||t<2)throw new Error("invalid mesh size");this.Ig=i,this.Ag=t,this.Mg=e||null,this.Rg=[],this.wg=0,this.bg=0,this.Gg=1,this.Og=1,this.Pg=0,this.Lg=!1;var s=i-1,r=t-1;for(let e=0;e<t;++e){var h=[];for(let t=0;t<i;++t){var n=C33.nh(C33.jp.JS,this,t,e),a=t/s,o=e/r;n.sg(a,o,a,o),h.push(n)}this.Rg.push(h)}}ah(){C33.xn(this.Rg)}xg(){return this.Ig}Dg(){return this.Ag}Ng(){return this.Mg}Fg(){return this.Rg}ng(){this.Lg=!0}$g(){if(this.Lg){let t=1/0,e=1/0,i=-1/0,s=-1/0,r=0;for(var h of this.Rg)for(var n of h){var a=n.rg(),o=n.ag();t=Math.min(t,a),e=Math.min(e,o),i=Math.max(i,a),s=Math.max(s,o),r=Math.max(r,n.lg())}this.wg=t,this.bg=e,this.Gg=i,this.Og=s,this.Pg=r,this.Lg=!1}}Bg(){return this.$g(),this.wg}kg(){return this.$g(),this.bg}Wg(){return this.$g(),this.Gg}Vg(){return this.$g(),this.Og}Hg(){return this.$g(),this.Pg}Ug(){return 0<this.Hg()}jg(t,e){return t=Math.floor(t),e=Math.floor(e),t<0||t>=this.Ig||e<0||e>=this.Ag?null:this.Rg[e][t]}Xg(t,i,s){var r=s instanceof C33.Rect;if(t.xg()!==this.xg()||t.Dg()!==this.Dg())throw new Error("source mesh wrong size");var h=t.Rg,n=this.Rg;for(let t=0,e=n.length;t<e;++t){var a=h[t],o=n[t];for(let t=0,e=o.length;t<e;++t){var l=a[t],u=o[t];r?u.mg(l,i,s):u.vg(l,i,s)}}}Yg(r){var h=this.Rg;let n=h[0];for(let t=1,e=h.length;t<e;++t){var a=h[t];let i=n[0],s=a[0];for(let t=1,e=a.length;t<e;++t){var o=n[t],l=a[t];tempQuadTex.set(i.fg(),i.Cg(),o.fg(),o.Cg(),l.fg(),l.Cg(),s.fg(),s.Cg()),r.gv(i.rg(),i.ag(),i.lg(),o.rg(),o.ag(),o.lg(),l.rg(),l.ag(),l.lg(),s.rg(),s.ag(),s.lg(),tempQuadTex),i=o,s=l}n=a}}qg(n,a){a=a||((t,e,i)=>[t,e,i]);var t=this.Rg;let o=t[0];for(let r=1,h=t.length;r<h;++r){var l=t[r];let i=o[0],s=l[0];for(let t=1,e=l.length;t<e;++t){var u=o[t],c=l[t],[f,d,C]=a(i.rg(),i.ag(),i.lg()),[p,m,v]=a(u.rg(),u.ag(),u.lg()),[S,g,T]=a(c.rg(),c.ag(),c.lg()),[_,y,E]=a(s.rg(),s.ag(),s.lg());n.Sv(f,d,C,p,m,v),n.Sv(f,d,C,S,g,T),n.Sv(f,d,C,_,y,E),t===e-1&&n.Sv(p,m,v,S,g,T),r===h-1&&n.Sv(_,y,E,S,g,T),i=u,s=c}o=l}}zg(t){var i=.99999999,s=t.Ou();let r=[];var h=this.xg()-1,n=this.Dg()-1,a=1/h,o=1/n,l=h-1,u=n-1;let c=s[0],f=s[1],d=C33.dh(Math.floor(c*h),0,l),C=C33.dh(Math.floor(f*n),0,u),p=!0,m=0,v=0,S=0;let g=-1;var T=()=>{c=C33.dh(C33.Lt(c,m,S),0,1),f=C33.dh(C33.Lt(f,v,S),0,1),r.push(c,f)};for(let t=0,e=s.length;t<e;t+=2){c=s[t],f=s[t+1],r.push(c,f),d=C33.dh(Math.floor(c*h),0,l),C=C33.dh(Math.floor(f*n),0,u);var _=(t+2)%e;for(m=s[_],v=s[1+_],g=-1;;){if(1e6<r.length)throw new Error("Too many mesh poly points");var y=d*a,E=C*o,I=(d+1)*a,A=(C+1)*o;if(p=C33.cn(c,f,y,E,I,E,I,A),0!==g&&0<=(S=C33.un(c,f,m,v,y,E,I,A,-.001))&&S<=i)T(),p=!p,g=0;else if(0<C&&2!==g&&0<=(S=C33.un(c,f,m,v,y,E,I,E,.001))&&S<=i)T(),C--,p=!1,g=4;else if(d<l&&3!==g&&0<=(S=C33.un(c,f,m,v,I,E,I,A,.001))&&S<=i)T(),d++,p=!1,g=1;else if(0<d&&1!==g&&0<=(S=C33.un(c,f,m,v,y,E,y,A,.001))&&S<=i)T(),d--,p=!0,g=3;else{if(!(C<u&&4!==g&&0<=(S=C33.un(c,f,m,v,y,A,I,A,.001))&&S<=i))break;T(),C++,p=!0,g=2}}}return C33.nh(C33.Mu,r)}Kg(t,e){t=this.Jg(t);this.Zg(t),e.Lu(t)}Jg(t){var i=[],s=t.Ou();for(let t=0,e=s.length;t<e;t+=2){var r=s[t],h=s[t+1],[r,h]=this.Qg(r,h);i.push(r,h)}return i}Qg(t,e){var i=this.xg()-1,s=this.Dg()-1,r=1/i,h=1/s,i=C33.dh(Math.floor(t*i),0,i-1),s=C33.dh(Math.floor(e*s),0,s-1),n=i*r,a=s*h,o=(i+1)*r,l=(s+1)*h,u=this.jg(i,s),c=this.jg(i+1,s+1),f=C33.cn(t,e,n,a,o,a,o,l),r=f?n+r:n,h=f?a:a+h,i=this.jg(i+(f?1:0),s+(f?0:1)),[s,f,t]=C33.dn(t,e,n,a,r,h,o,l);return C33.Cn(s,f,t,u.rg(),u.ag(),u.lg(),i.rg(),i.ag(),i.lg(),c.rg(),c.ag(),c.lg())}Zg(i){var s=[];let r=i[0],h=i[1],n=r-i.at(-2),a=h-i.at(-1);for(let t=0,e=i.length;t<e;t+=2){var o=(t+2)%e,l=i[o],o=i[1+o],u=l-r,c=o-h,f=Math.abs(u)<1e-7&&Math.abs(n)<1e-7&&Math.sign(c)===Math.sign(a),d=Math.abs(c)<1e-7&&Math.abs(a)<1e-7&&Math.sign(u)===Math.sign(n);(!f&&!d&&.001<Math.abs(u/n-c/a)||0==u&&0==c)&&s.push(r,h),r=l,h=o,n=u,a=c}6<=s.length&&s.length<i.length&&C33.$n(i,s)}Sg(){return{cols:this.xg(),rows:this.Dg(),points:this.Rg.map(t=>t.map(t=>t.Sg()))}}gg(t){var i=this.xg(),s=this.Dg();if(t.cols!==i||t.rows!==s)throw new Error("mesh data wrong size");var r=t.points;for(let e=0;e<s;++e){var h=r[e];for(let t=0;t<i;++t)this.jg(t,e).gg(h[t])}}}}{let GetFormatSpecifiers2=function(t,e){let i,s,r,h;switch(t){case"rgba8":i=e.RGBA8,s=e.RGBA,r=e.RGBA,h=e.UNSIGNED_BYTE;break;case"rgb8":i=e.RGB8,s=e.RGB,r=e.RGB,h=e.UNSIGNED_BYTE;break;case"rgba4":i=e.RGBA4,s=e.RGBA,r=e.RGBA,h=e.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=e.RGB5_A1,s=e.RGBA,r=e.RGBA,h=e.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=e.RGB565,s=e.RGB,r=e.RGB,h=e.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{tT:i,eT:s,format:r,type:h}},C33=(GetFormatSpecifiers=GetFormatSpecifiers2,self.$e),VALID_PIXEL_FORMATS=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),VALID_SAMPLINGS=new Set(["nearest","bilinear","trilinear"]),VALID_MIPMAP_QUALITIES=new Set(["default","low","high"]),VALID_WRAP_MODES=new Set(["clamp-to-edge","repeat","mirror-repeat"]),CREATEFROM_DEFAULT_OPTIONS={iT:"clamp-to-edge",sT:"clamp-to-edge",rT:"trilinear",hT:0,nT:"rgba8",aT:!0,oT:"default",premultiplyAlpha:!0,lT:!1,width:-1,height:-1},UPDATE_DEFAULT_OPTIONS={premultiplyAlpha:!0,flipY:!1},allTextures=new Set;C33.jp.uT=class WebGLRendererTexture{constructor(t){this.pS=t,this.cT=null,this.FC=0,this.$C=0,this.fT=!0,this.dT="clamp-to-edge",this.CT="clamp-to-edge",this.pT="trilinear",this.mT=0,this.vT="rgba8",this.ST=!1,this.gT="default",this.ad=0}TT(e,i){if(!("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas||e instanceof ImageData||e instanceof ArrayBuffer||null===e))throw new Error("invalid texture source");if(i=Object.assign({},CREATEFROM_DEFAULT_OPTIONS,i),this.cT)throw new Error("already created texture");if(this.dT=i.iT,this.CT=i.sT,this.pT=i.rT,this.mT=i.hT,this.vT=i.nT,this.ST=!!i.aT&&this.pS.rS(),this.gT=i.oT,!VALID_WRAP_MODES.has(this.dT)||!VALID_WRAP_MODES.has(this.CT))throw new Error("invalid wrap mode");if(!VALID_SAMPLINGS.has(this.pT))throw new Error("invalid sampling");if(!VALID_PIXEL_FORMATS.has(this.vT))throw new Error("invalid pixel format");if(!VALID_MIPMAP_QUALITIES.has(this.gT))throw new Error("invalid mipmap quality");if(this.fT=!0,e instanceof ArrayBuffer||null===e||i.lT){if(this.FC=i.width,this.$C=i.height,e instanceof ArrayBuffer&&e.byteLength!==this.FC*this.$C*4)throw new Error("ArrayBuffer wrong size")}else this.FC=e.width,this.$C=e.height;if(this.FC<=0||this.$C<=0)throw new Error("invalid texture data size");i.lT&&((t=C33.Aa(this.FC,this.$C)).getContext("2d").drawImage(e,0,0,this.FC,this.$C),e=t);var t=C33.Lh(this.FC)&&C33.Lh(this.$C),s=this.pS._T();if(this.FC>s||this.$C>s)throw new Error("texture data exceeds maximum texture size");var s=this.pS.yT(),r=this.pS.ET(),i=(this.cT=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.cT),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,!1),GetFormatSpecifiers2(this.vT,s));if(this.pS.IT()||t||!this.AT())if(2<=r){let t;t=this.ST?Math.floor(Math.log2(Math.max(this.FC,this.$C))+1):1,s.texStorage2D(s.TEXTURE_2D,t,i.tT,this.FC,this.$C),e instanceof ArrayBuffer?s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.FC,this.$C,i.format,i.type,new Uint8Array(e)):null!==e&&s.texSubImage2D(s.TEXTURE_2D,0,0,0,i.format,i.type,e)}else e instanceof ArrayBuffer?s.texImage2D(s.TEXTURE_2D,0,i.eT,this.FC,this.$C,0,i.format,i.type,new Uint8Array(e)):null===e?s.texImage2D(s.TEXTURE_2D,0,i.eT,this.FC,this.$C,0,i.format,i.type,null):s.texImage2D(s.TEXTURE_2D,0,i.eT,i.format,i.type,e);else{if(null===e)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");(e=e instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(e),this.FC,this.$C):e)instanceof ImageData&&((t=C33.Aa(this.FC,this.$C)).getContext("2d").putImageData(e,0,0),e=t);r=C33.Aa(C33.xh(this.FC),C33.xh(this.$C)),t=r.getContext("2d");t.imageSmoothingEnabled="nearest"!==this.pT,t.drawImage(e,0,0,this.FC,this.$C,0,0,r.width,r.height),s.texImage2D(s.TEXTURE_2D,0,i.eT,i.format,i.type,r)}null!==e&&this.MT(s),s.bindTexture(s.TEXTURE_2D,null),this.pS.RT(),this.ad=1,allTextures.add(this)}wT(t,e,i){if(i=Object.assign({},CREATEFROM_DEFAULT_OPTIONS,i),this.cT)throw new Error("already created texture");if(this.dT=i.iT,this.CT=i.sT,this.pT=i.rT,this.vT=i.nT,this.ST=!!i.aT&&this.pS.rS(),this.gT=i.oT,!VALID_WRAP_MODES.has(this.dT)||!VALID_WRAP_MODES.has(this.CT))throw new Error("invalid wrap mode");if(!VALID_SAMPLINGS.has(this.pT))throw new Error("invalid sampling");if(!VALID_PIXEL_FORMATS.has(this.vT))throw new Error("invalid pixel format");if(!VALID_MIPMAP_QUALITIES.has(this.gT))throw new Error("invalid mipmap quality");this.fT=!1,this.FC=Math.floor(t),this.$C=Math.floor(e);t=C33.Lh(this.FC)&&C33.Lh(this.$C),e=this.pS._T();if(this.FC<=0||this.$C<=0)throw new Error("invalid texture size");if(this.FC>e||this.$C>e)throw new Error("texture exceeds maximum texture size");if(!this.pS.IT()&&this.AT()&&!t)throw new Error("non-power-of-two tiled textures not supported");e=this.pS.yT(),t=this.pS.ET(),this.cT=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.cT),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),i=GetFormatSpecifiers2(this.vT,e),t=2<=t?i.tT:i.eT;e.texImage2D(e.TEXTURE_2D,0,t,this.FC,this.$C,0,i.format,i.type,null),this.MT(e),e.bindTexture(e.TEXTURE_2D,null),this.pS.RT(),this.ad=1,allTextures.add(this)}bT(t){if("default"===this.gT)return this.fT?t.NICEST:t.FASTEST;if("low"===this.gT)return t.FASTEST;if("high"===this.gT)return t.NICEST;throw new Error("invalid mipmap quality")}AT(){return"clamp-to-edge"!==this.dT||"clamp-to-edge"!==this.CT}GT(t,e){if("clamp-to-edge"===e)return t.CLAMP_TO_EDGE;if("repeat"===e)return t.REPEAT;if("mirror-repeat"===e)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}MT(t){var e=C33.Lh(this.FC)&&C33.Lh(this.$C),e=(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.GT(t,this.dT)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.GT(t,this.CT)),"nearest"===this.pT?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.ST=!1):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(e||this.pS.IT())&&this.ST?(t.hint(t.GENERATE_MIPMAP_HINT,this.bT(t)),t.generateMipmap(t.TEXTURE_2D),e="trilinear"===this.pT&&!this.pS.nS(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.ST=!1)),this.pS.OT());e&&0<this.mT&&"nearest"!==this.pT&&t.texParameterf(t.TEXTURE_2D,e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.mT,this.pS.PT()))}LT(t,e){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.cT||this.ad<=0)throw new Error("texture not created");if(this.fT)throw new Error("cannot update static texture");e=Object.assign({},UPDATE_DEFAULT_OPTIONS,e);var i=t.width||t.videoWidth,s=t.height||t.videoHeight,r=this.pS.ET(),h=this.pS.yT(),e=(h.bindTexture(h.TEXTURE_2D,this.cT),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!!e.flipY),GetFormatSpecifiers2(this.vT,h)),r=2<=r?e.tT:e.eT;try{if(this.FC===i&&this.$C===s){var n=C33.Lh(this.FC)&&C33.Lh(this.$C);h.texSubImage2D(h.TEXTURE_2D,0,0,0,e.format,e.type,t),(n||this.pS.IT())&&this.ST&&(h.hint(h.GENERATE_MIPMAP_HINT,this.bT(h)),h.generateMipmap(h.TEXTURE_2D))}else{this.FC=i,this.$C=s;var a=C33.Lh(this.FC)&&C33.Lh(this.$C);if(!this.pS.IT()&&this.AT()&&!a)throw new Error("non-power-of-two tiled textures not supported");h.texImage2D(h.TEXTURE_2D,0,r,e.format,e.type,t),(a||this.pS.IT())&&this.ST&&(h.hint(h.GENERATE_MIPMAP_HINT,this.bT(h)),h.generateMipmap(h.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}h.bindTexture(h.TEXTURE_2D,null),this.pS.RT()}xT(){if(0<this.ad)throw new Error("texture still has references");if(!this.cT)throw new Error("already deleted texture");allTextures.delete(this),this.pS.yT().deleteTexture(this.cT),this.cT=null}DT(){return!!this.cT}NT(){return this.cT}RS(){return this.pS}FT(){this.ad++}$T(){if(this.ad<=0)throw new Error("no more references");this.ad--}BT(){return this.ad}eC(){return this.FC}cC(){return this.$C}kT(){return this.fT}WT(){let t=this.FC*this.$C;switch(this.vT){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.ST&&(t+=Math.floor(t/3)),t}static zS(){allTextures.clear()}static VT(){return allTextures.values()}}}{let C33=self.$e,assert=self.assert,glMatrix=self.pe,vec32=glMatrix.Ee,mat42=glMatrix.ge,VALID_SAMPLINGS=new Set(["nearest","bilinear","trilinear"]),DEFAULT_RENDERTARGET_OPTIONS={rT:"trilinear",alpha:!0,depth:!1,HT:!0,UT:!0,jT:0},allRenderTargets=new Set;C33.jp.XT=class WebGLRenderTarget{constructor(t){this.pS=t,this.YT=null,this.qT=null,this.cT=null,this.zT=null,this.FC=0,this.$C=0,this.KT=!0,this.pT="trilinear",this.JT=!0,this.ZT=!1,this.QT=!0,this.t_=0,this.e_=mat42.create(),this.i_=0,this.s_=0,this.r_=0}h_(t,e,i){i=Object.assign({},DEFAULT_RENDERTARGET_OPTIONS,i);var s=this.pS.ET();if(this.cT||this.zT)throw new Error("already created render target");if(this.pT=i.rT,this.JT=!!i.alpha,this.ZT=!!i.depth,this.QT=!!i.HT,this.KT=!!i.UT,this.t_=i.jT,!VALID_SAMPLINGS.has(this.pT))throw new Error("invalid sampling");if(0<this.t_&&(s<2||this.QT))throw new Error("invalid use of multisampling");if(s<2&&(this.QT=!0),this.FC=t,this.$C=e,this.FC<=0||this.$C<=0)throw new Error("invalid render target size");this.n_();i=this.pS.yT(),this.YT=i.createFramebuffer(),this.ZT&&(this.qT=i.createFramebuffer()),this.QT?(this.cT=this.pS.a_(this.FC,this.$C,{rT:this.pT,nT:this.JT?"rgba8":"rgb8",aT:!1}),s=this.cT.NT(),i.bindFramebuffer(i.FRAMEBUFFER,this.YT),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,s,0),this.ZT&&(i.bindFramebuffer(i.FRAMEBUFFER,this.qT),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,s,0))):(this.zT=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.zT),t=this.JT?i.RGBA8:i.RGB8,0<this.t_&&((e=i.getInternalformatParameter(i.RENDERBUFFER,t,i.SAMPLES))&&e[0]?(s=e[0],this.t_>s&&(this.t_=s)):this.t_=0),0===this.t_?i.renderbufferStorage(i.RENDERBUFFER,t,this.FC,this.$C):i.renderbufferStorageMultisample(i.RENDERBUFFER,this.t_,t,this.FC,this.$C),i.bindFramebuffer(i.FRAMEBUFFER,this.YT),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,this.zT),this.ZT&&(i.bindFramebuffer(i.FRAMEBUFFER,this.qT),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,this.zT)),i.bindRenderbuffer(i.RENDERBUFFER,null)),e=this.pS.o_();this.ZT&&e&&(i.bindFramebuffer(i.FRAMEBUFFER,this.YT),this.pS.l_()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null),allRenderTargets.add(this)}u_(t,e){this.FC===t&&this.$C===e||(this.FC=t,this.$C=e,this.n_(),(t=this.pS.yT()).bindFramebuffer(t.FRAMEBUFFER,this.YT),this.cT?this.cT.LT(new ImageData(this.FC,this.$C)):(t.bindRenderbuffer(t.RENDERBUFFER,this.zT),t.renderbufferStorage(t.RENDERBUFFER,this.JT?t.RGBA8:t.RGB8,this.FC,this.$C),t.bindRenderbuffer(t.RENDERBUFFER,null)),e=this.pS.o_(),this.ZT&&e&&(this.pS.l_()?t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,e,0):t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)),t.bindFramebuffer(t.FRAMEBUFFER,null))}xT(){if(!this.cT&&!this.zT)throw new Error("already deleted render target");allRenderTargets.delete(this);var t=this.pS.yT(),t=(this.cT?(t.bindFramebuffer(t.FRAMEBUFFER,this.YT),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.ZT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.qT),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.pS.c_(this.cT),this.cT=null):this.zT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.YT),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.ZT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.qT),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.zT),this.zT=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.pS.ET()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.YT),this.ZT&&t.deleteFramebuffer(this.qT),this.pS.f_());t.d_=null,this.YT=t.C_=null}n_(){this.pS.m2(this.e_,this.FC/this.$C),this.i_=this.pS.c2(),this.s_=this.pS.a2(),this.r_=this.pS.l2()}p_(){return this.YT}m_(){return this.qT}RS(){return this.pS}v_(){return this.cT}S_(){return this.pS.c2()===this.i_&&this.pS.a2()===this.s_&&this.pS.l2()===this.r_||this.n_(),this.e_}g_(){return"nearest"!==this.pT}T_(){return this.JT}__(){return this.QT}y_(){return this.ZT}eC(){return this.FC}cC(){return this.$C}E_(){return this.KT}I_(){return this.t_}A_(){var t={rT:this.pT,alpha:this.JT,HT:this.QT};return this.KT||(t.width=this.FC,t.height=this.$C),t}M_(t){return"nearest"!==(t=Object.assign({},DEFAULT_RENDERTARGET_OPTIONS,t)).rT===this.g_()&&!!t.alpha===this.T_()&&!!t.depth===this.y_()&&!(2<=this.pS.ET()&&!!t.HT!==this.__())&&("number"==typeof t.width||"number"==typeof t.height?!this.E_()&&this.eC()===Math.floor(t.width)&&this.cC()===Math.floor(t.height):this.E_())}R_(){return this.cT?this.cT.NT():null}WT(){return this.cT?this.cT.WT():this.FC*this.$C*(this.JT?4:3)}static async w_(t,e){t=await t.b_(e,!0);return C33.wa(t)}static zS(){allRenderTargets.clear()}static G_(){return allRenderTargets.values()}static O_(t,e){for(var i of allRenderTargets)i.E_()&&i.u_(t,e)}}}{let C33=self.$e,glMatrix=self.pe,vec32=glMatrix.Ee,mat42=glMatrix.ge,RESERVED_UNIFORM_NAMES=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);C33.jp.P_=class WebGLShaderProgram extends C33.jp.CS{static async L_(t,e){let i=t.yT();var s=e.src,r=e.x_,e=e.name,h=i.createShader(i.FRAGMENT_SHADER),s=(i.shaderSource(h,s),i.compileShader(h),i.createShader(i.VERTEX_SHADER));i.shaderSource(s,r),i.compileShader(s);let n=i.createProgram(),a=(i.attachShader(n,h),i.attachShader(n,s),i.bindAttribLocation(n,0,"aPos"),i.bindAttribLocation(n,1,"aTex"),i.bindAttribLocation(n,2,"aPoints"),i.linkProgram(n),t.D_());if(a?await t.N_(()=>i.getProgramParameter(n,a.COMPLETION_STATUS_KHR)):await C33.wn(5),!i.getShaderParameter(h,i.COMPILE_STATUS))throw r=i.getShaderInfoLog(h),i.deleteShader(h),i.deleteShader(s),i.deleteProgram(n),new Error("Error compiling fragment shader: "+r);if(!i.getShaderParameter(s,i.COMPILE_STATUS))throw t=i.getShaderInfoLog(s),i.deleteShader(h),i.deleteShader(s),i.deleteProgram(n),new Error("Error compiling vertex shader: "+t);if(i.getProgramParameter(n,i.LINK_STATUS))return(r=C33.Fd(i.getProgramInfoLog(n)||"").trim())&&!C33.xd(r)&&console.info(`[WebGL] Shader program '${e}' compilation log: `,r),i.deleteShader(h),i.deleteShader(s),n;throw t=i.getProgramInfoLog(n),i.deleteShader(h),i.deleteShader(s),i.deleteProgram(n),new Error("Error linking shader program: "+t)}static async F_(t,e){var i=await C33.jp.P_.L_(t,e);return new C33.jp.P_(t,i,e)}constructor(t,e,i){super(t,i);var s,r=t.yT(),h=t.f_(),n=(t.tS(),r.useProgram(e),this.B_=r,this.WS=e,this.k_="<default-device-transform>"===i.name,r.getAttribLocation(e,"aPos")),a=r.getAttribLocation(e,"aTex"),e=(this.W_=r.getAttribLocation(e,"aPoints"),-1!==n&&(r.bindBuffer(r.ARRAY_BUFFER,t.V_),r.vertexAttribPointer(n,t.Zv(),r.FLOAT,!1,0,0),r.enableVertexAttribArray(n)),-1!==a&&(r.bindBuffer(r.ARRAY_BUFFER,t.H_),r.vertexAttribPointer(a,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(a)),-1!==this.W_&&(r.bindBuffer(r.ARRAY_BUFFER,t.U_),r.vertexAttribPointer(this.W_,4,r.FLOAT,!1,0,0),r.enableVertexAttribArray(this.W_)),r.bindBuffer(r.ARRAY_BUFFER,null),this.j_=new C33.jp.X_(this,"matP","mat4"),this.Y_=new C33.jp.X_(this,"matMV","mat4"),this.q_=new C33.jp.X_(this,"color","vec4"),this.z_=new C33.jp.X_(this,"samplerFront","sampler"),this.K_=new C33.jp.X_(this,"pointTexStart","vec2"),this.J_=new C33.jp.X_(this,"pointTexEnd","vec2"),this.Z_=new C33.jp.X_(this,"zElevation","float"),this.Q_=new C33.jp.X_(this,"tileSize","vec2"),this.ty=new C33.jp.X_(this,"tileSpacing","vec2"),this.ey=new C33.jp.X_(this,"color2_","vec4"),this.iy=new C33.jp.X_(this,"outlineThickness","float"),this.hy=new C33.jp.X_(this,"samplerBack","sampler"),this.ny=new C33.jp.X_(this,"samplerDepth","sampler"),this.oy=new C33.jp.X_(this,"destStart","vec2"),this.ly=new C33.jp.X_(this,"destEnd","vec2"),this.uy=new C33.jp.X_(this,"srcStart","vec2"),this.Cy=new C33.jp.X_(this,"srcEnd","vec2"),this.my=new C33.jp.X_(this,"srcOriginStart","vec2"),this.vy=new C33.jp.X_(this,"srcOriginEnd","vec2"),this.Sy=new C33.jp.X_(this,"pixelSize","vec2"),this.gy=new C33.jp.X_(this,"seconds","float"),this.Ty=new C33.jp.X_(this,"devicePixelRatio","float"),this._y=new C33.jp.X_(this,"layerScale","float"),this.yy=new C33.jp.X_(this,"layerAngle","float"),this.Ey=new C33.jp.X_(this,"layoutStart","vec2"),this.Iy=new C33.jp.X_(this,"layoutEnd","vec2"),this.Ay=new C33.jp.X_(this,"zNear","float"),this.My=new C33.jp.X_(this,"zFar","float"),this.Ry=!!(this.Sy.wy()||this.gy.wy()||this.hy.wy()||this.oy.wy()||this.ly.wy()||this.uy.wy()||this.Cy.wy()||this.my.wy()||this.vy.wy()||this.Ty.wy()||this._y.wy()||this.yy.wy()||this.Ey.wy()||this.Iy.wy()),i.parameters||[]);this.by=[],this.AS=this.Sy.wy()||this.uy.wy()||this.Cy.wy()||this.my.wy()||this.vy.wy(),this.Gy=!1,this.Oy=!1,this.q_.Py(1,1,1,1),this.ey.Py(1,1,1,1),this.z_.Ly(0),this.hy.Ly(1),this.ny.Ly(2),this.K_.xy(0,0),this.J_.xy(1,1),this.Z_.Dy(0),this.Q_.xy(0,0),this.ty.xy(0,0),this.oy.xy(0,0),this.ly.xy(1,1),this.uy.xy(0,0),this.Cy.xy(0,0),this.my.xy(0,0),this.vy.xy(0,0),this.Sy.xy(0,0),this.Ty.Dy(1),this.Ay.Dy(t.a2()),this.My.Dy(t.l2()),this._y.Dy(1),this.yy.Dy(0),this.gy.Dy(0),this.Ey.xy(0,0),this.Iy.xy(0,0),this.iy.Dy(1);for(s of e){var o=s[0],l=s[2],o=new C33.jp.X_(this,o,l);"color"===l?o.Ny(0,0,0):o.Dy(0),this.by.push(o)}this.k_?this.Fy(h.$y):(this.By(h.$y,!0),this.ky(h.Wy,!0));n=h.Vy;r.useProgram(n?n.WS:null)}ah(){this.B_.deleteProgram(this.WS),this.WS=null,this.pS.E2(this),this.B_=null,super.ah()}Hy(){return this.B_}Uy(){return this.WS}jy(){return this.by.length}Xy(t){return t<0||t>=this.by.length?null:this.by[t].Yy()}qy(i){for(let t=0,e=i.length;t<e;++t)if(!this.by[t].zy(i[t]))return!1;return!0}Ky(i){for(let t=0,e=i.length;t<e;++t)this.by[t].Jy(i[t])}Zy(t,e,i,s,r,h,n,a,o,l){return!this.hy.wy()&&!(this.Sy.wy()&&!this.Sy.Qy(r,h)||this.oy.wy()&&!this.oy.Qy(t.ml(),t.vl())||this.ly.wy()&&!this.ly.Qy(t.Sl(),t.gl())||this.Ty.wy()&&!this.Ty.tE(n)||this._y.wy()&&!this._y.tE(a)||this.yy.wy()&&!this.yy.tE(o)||this.uy.wy()&&!this.uy.Qy(e.ml(),e.vl())||this.Cy.wy()&&!this.Cy.Qy(e.Sl(),e.gl())||this.my.wy()&&!this.my.Qy(i.ml(),i.vl())||this.vy.wy()&&!this.vy.Qy(i.Sl(),i.gl())||this.Ey.wy()&&!this.Ey.Qy(s.ml(),s.vl())||this.Iy.wy()&&!this.Iy.Qy(s.vl(),s.gl())||this.gy.wy()&&!this.gy.tE(l))}eE(t,e,i,s,r,h,n,a,o,l){this.hy.wy()||(this.Sy.wy()&&this.Sy.iE(r,h),this.oy.wy()&&this.oy.iE(t.ml(),t.vl()),this.ly.wy()&&this.ly.iE(t.Sl(),t.gl()),this.Ty.wy()&&this.Ty.sE(n),this._y.wy()&&this._y.sE(a),this.yy.wy()&&this.yy.sE(o),this.uy.wy()&&this.uy.iE(e.ml(),e.vl()),this.Cy.wy()&&this.Cy.iE(e.Sl(),e.gl()),this.my.wy()&&this.my.iE(i.ml(),i.vl()),this.vy.wy()&&this.vy.iE(i.Sl(),i.gl()),this.Ey.wy()&&this.Ey.iE(s.ml(),s.vl()),this.Iy.wy()&&this.Iy.iE(s.vl(),s.gl()),this.gy.wy()&&this.gy.sE(l))}By(t,e){this.Gy&&!e||this.k_||(this.j_.wy()&&this.j_.rE(t),this.Gy=!0)}hE(){this.Gy=!1}ky(t,e){this.Oy&&!e||this.k_||(this.Y_.wy()&&this.Y_.rE(t),this.Oy=!0)}nE(){this.Oy=!1}Fy(t){if(!this.k_)throw new Error("not device transform shader");this.j_.rE(t);var t=this.pS,e=t.eC()/2,i=t.cC()/2,e=t.T2(e,i,t.e2(t.cC()),e,i,0,t.cC());this.Y_.rE(e)}aE(t){this.q_.wy()&&this.q_.oE(t[0],t[1],t[2],t[3])}static lE(){return RESERVED_UNIFORM_NAMES}static uE(t){t=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${t} vec2 aTex;`,`varying ${t} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static cE(t){t=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${t} vec2 aTex;`,`out ${t} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static fE(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static dE(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static CE(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static pE(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static mE(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static vE(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static SE(t,e,i){let s="";return 2<=t?s="#version 300 es\n":(e&&(s="#extension GL_EXT_frag_depth : enable\n"),i&&(s+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),s+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!i?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&e?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static gE(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static TE(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static _E(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static yE(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static EE(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static IE(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static AE(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static ME(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static RE(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static wE(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static bE(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static GE(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static OE(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{let C33=self.$e,glMatrix=self.pe,mat42=glMatrix.ge,TYPE_SIZES=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);C33.jp.X_=class WebGLShaderUniform{constructor(t,e,i){if(!TYPE_SIZES.has(i))throw new Error("invalid uniform type");this.Mg=t,this.B_=this.Mg.Hy(),this.uh=e,this.a3=i,this.PE="color"===this.a3,this.LE=this.B_.getUniformLocation(this.Mg.Uy(),e),this.xE=!!this.LE;t=TYPE_SIZES.get(i);this.DE=new Float32Array(t),this.NE=new Float32Array(t)}ah(){this.Mg=null,this.B_=null,this.LE=null}wy(){return this.xE}Yy(){return this.a3}FE(){return this.PE}Dy(t){this.wy()&&(this.DE[0]=t,this.NE.set(this.DE),this.B_.uniform1f(this.LE,t))}Ly(t){this.wy()&&(this.DE[0]=t,this.NE.set(this.DE),this.B_.uniform1i(this.LE,t))}xy(t,e){this.wy()&&(this.DE[0]=t,this.DE[1]=e,this.NE.set(this.DE),this.B_.uniform2f(this.LE,t,e))}Ny(t,e,i){this.wy()&&(this.DE[0]=t,this.DE[1]=e,this.DE[2]=i,this.NE.set(this.DE),this.B_.uniform3f(this.LE,t,e,i))}Py(t,e,i,s){this.wy()&&(this.DE[0]=t,this.DE[1]=e,this.DE[2]=i,this.DE[3]=s,this.NE.set(this.DE),this.B_.uniform4f(this.LE,t,e,i,s))}$E(t){t=Math.fround(t);var e=this.DE;e[0]!==t&&(e[0]=t,this.B_.uniform1f(this.LE,t))}BE(t){var e=this.DE;e[0]!==t&&this.B_.uniform1i(this.LE,e[0]=t)}kE(t,e){t=Math.fround(t),e=Math.fround(e);var i=this.DE;i[0]===t&&i[1]===e||(i[0]=t,i[1]=e,this.B_.uniform2f(this.LE,t,e))}WE(t,e,i){t=Math.fround(t),e=Math.fround(e),i=Math.fround(i);var s=this.DE;s[0]===t&&s[1]===e&&s[2]===i||(s[0]=t,s[1]=e,s[2]=i,this.B_.uniform3f(this.LE,t,e,i))}oE(t,e,i,s){t=Math.fround(t),e=Math.fround(e),i=Math.fround(i),s=Math.fround(s);var r=this.DE;r[0]===t&&r[1]===e&&r[2]===i&&r[3]===s||(r[0]=t,r[1]=e,r[2]=i,r[3]=s,this.B_.uniform4f(this.LE,t,e,i,s))}rE(t){var e=this.DE;mat42.$(e,t)||(C33.Pn(e,t,0),this.B_.uniformMatrix4fv(this.LE,!1,t))}zy(t){var e=this.NE;return this.FE()?e[0]===Math.fround(t.Ja())&&e[1]===Math.fround(t.Za())&&e[2]===Math.fround(t.Qa()):e[0]===Math.fround(t)}Jy(t){var e=this.NE;this.FE()?(e[0]=t.Ja(),e[1]=t.Za(),e[2]=t.Qa()):e[0]=t}tE(t){return this.NE[0]===Math.fround(t)}Qy(t,e){var i=this.NE;return i[0]===Math.fround(t)&&i[1]===Math.fround(e)}sE(t){this.NE[0]=t}iE(t,e){var i=this.NE;i[0]=t,i[1]=e}}}{let C33=self.$e,glMatrix=self.pe,vec42=glMatrix.Ie,mat42=glMatrix.ge,BATCH_NULL=0,BATCH_QUAD=1,BATCH_SETTEXTURE=2,BATCH_SETCOLOR=3,BATCH_SETBLEND=4,BATCH_SETVIEWPORT=5,BATCH_SETPROJECTION=6,BATCH_SETMODELVIEW=7,BATCH_SETRENDERTARGET=8,BATCH_CLEARSURFACE=9,BATCH_POINTS=10,BATCH_SETPROGRAM=11,BATCH_SETPROGRAMPARAMETERS=12,BATCH_SETPROGRAMCUSTOMPARAMETERS=13,BATCH_INVALIDATEFRAMEBUFFER=14,BATCH_SETPOINTTEXCOORDS=15,BATCH_SETTILEMAPINFO=16,BATCH_BLITFRAMEBUFFER=17,BATCH_STARTQUERY=18,BATCH_ENDQUERY=19,BATCH_SETELLIPSEPARAMS=20,BATCH_SETGRADIENTCOLOR=21,BATCH_CLEARDEPTH=22,BATCH_SETDEPTHENABLED=23,BATCH_SETDEPTHSAMPLINGENABLED=24,BATCH_COPLANAR_STARTSTENCILPASS=25,BATCH_COPLANAR_STARTCOLORPASS=26,BATCH_COPLANAR_RESTORE=27,BATCH_SET_SCISSOR=28,BATCH_SETTILERANDOMIZATIONINFO=29;C33.jp.VE=class BatchState{constructor(t){this.renderer=t,this.Wy=mat42.create(),this.$y=mat42.create(),this.d_=null,this.C_=null,this.HE=!1,this.UE=vec42.I(1,1,1,1),this.Vy=null,this.jE=new C33.Rect,this.clearColor=C33.nh(C33.Fa,0,0,0,0)}},C33.jp.XE=class WebGLBatchJob{constructor(t){var e=new ArrayBuffer(96);this.a3=0,this.YE=t,this.B_=t.renderer.yT(),this.qE=0,this.zE=0,this.KE=null,this.JE=new Float32Array(e,0,16),this.ZE=new Float32Array(e,64,4),this.QE=new Float32Array(e,80,4),this.tI=[]}eI(t,e){this.a3=BATCH_QUAD,this.qE=t,this.zE=e}iI(){var t=this.B_;t.drawElements(t.TRIANGLES,this.zE,t.UNSIGNED_SHORT,this.qE)}sI(t){this.a3=BATCH_SETTEXTURE,this.KE=t}rI(){var t=this.B_,e=this.KE;t.bindTexture(t.TEXTURE_2D,e?e.NT():null)}hI(t){this.a3=BATCH_SETCOLOR,t.ro(this.ZE,0)}nI(){var t=this.ZE,e=this.YE;vec42._(e.UE,t),e.Vy.aE(t)}aI(t){this.a3=BATCH_SETGRADIENTCOLOR,t.ro(this.ZE,0)}oI(){var t=this.ZE,e=this.YE.Vy;e.ey.wy()&&e.ey.oE(t[0],t[1],t[2],t[3])}lI(t,e){this.a3=BATCH_SETBLEND,this.qE=t,this.zE=e}uI(){this.B_.blendFunc(this.qE,this.zE)}cI(t,e,i,s){this.a3=BATCH_SETVIEWPORT;var r=this.ZE;r[0]=t,r[1]=e,r[2]=i,r[3]=s}fI(){var t=this.ZE;this.B_.viewport(t[0],t[1],t[2],t[3])}dI(t){this.a3=BATCH_SETPROJECTION,mat42._(this.JE,t)}CI(){var t=this.YE,i=t.renderer.Tm,s=t.Vy,r=this.JE;for(let t=0,e=i.length;t<e;++t){var h=i[t];h===s?h.By(r,!0):h.hE()}mat42._(t.$y,r)}pI(t){this.a3=BATCH_SETMODELVIEW,mat42._(this.JE,t)}mI(){var t=this.YE,i=t.renderer.Tm,s=t.Vy,r=this.JE;for(let t=0,e=i.length;t<e;++t){var h=i[t];h===s?h.ky(r,!0):h.nE()}mat42._(t.Wy,r)}vI(t){this.a3=BATCH_SETRENDERTARGET,this.KE=t}SI(){var t=this.B_,e=this.KE,i=this.YE;e?(i.d_=e.p_(),i.C_=e.m_(),i.HE&&i.C_?t.bindFramebuffer(t.FRAMEBUFFER,i.C_):t.bindFramebuffer(t.FRAMEBUFFER,i.d_)):(i.d_=null,i.C_=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}gI(t){this.a3=BATCH_CLEARSURFACE,t.ro(this.JE,0)}TI(t,e,i,s){this.a3=BATCH_CLEARSURFACE;var r=this.JE;r[0]=t,r[1]=e,r[2]=i,r[3]=s}_I(){var t=this.B_,e=this.JE,i=this.YE.clearColor,s=e[0],r=e[1],h=e[2],e=e[3];i.lo(s,r,h,e)||(t.clearColor(s,r,h,e),i.Va(s,r,h,e)),t.clear(t.COLOR_BUFFER_BIT)}yI(t){this.a3=BATCH_SETPOINTTEXCOORDS,t.ro(this.JE,0)}EI(){var t=this.JE;this.YE.jE.set(t[0],t[1],t[2],t[3])}II(t,e){this.a3=BATCH_POINTS,this.qE=t,this.zE=1,this.JE[0]=e}AI(){var t=this.B_,e=this.YE,i=e.renderer.Em,s=(t.useProgram(i.WS),i.By(e.$y,!1),i.ky(e.Wy,!1),e.jE),s=(i.K_.wy()&&i.K_.kE(s.ml(),s.vl()),i.J_.wy()&&i.J_.kE(s.Sl(),s.gl()),this.JE[0]);i.Z_.wy()&&i.Z_.$E(s),i.q_.wy()&&(s=e.UE,i.q_.oE(s[0],s[1],s[2],s[3])),t.drawArrays(t.POINTS,this.qE/4,this.zE),t.useProgram(e.Vy.WS)}MI(t){this.a3=BATCH_SETPROGRAM,this.KE=t}RI(){var t=this.B_,e=this.YE,i=this.KE;e.Vy=i,t.useProgram(i.WS),i.By(e.$y,!1),i.ky(e.Wy,!1),i.q_.wy()&&(t=e.UE,i.q_.oE(t[0],t[1],t[2],t[3]))}wI(){this.a3=BATCH_SETPROGRAMPARAMETERS}bI(){var t,e,i=this.YE.Vy,s=this.B_,r=this.JE,h=this.ZE,n=this.QE;i.hy.wy()&&(t=this.YE.renderer,e=this.KE,t.GI!==e)&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,e?e.NT():null),t.GI=e,s.activeTexture(s.TEXTURE0)),i.Sy.wy()&&i.Sy.kE(r[0],r[1]),i.oy.wy()&&i.oy.kE(r[2],r[3]),i.ly.wy()&&i.ly.kE(r[4],r[5]),i.Ty.wy()&&i.Ty.$E(this.zE),i._y.wy()&&i._y.$E(r[6]),i.yy.wy()&&i.yy.$E(r[7]),i.uy.wy()&&i.uy.kE(r[12],r[13]),i.Cy.wy()&&i.Cy.kE(r[14],r[15]),i.my.wy()&&i.my.kE(n[0],n[1]),i.vy.wy()&&i.vy.kE(n[2],n[3]),i.Ey.wy()&&i.Ey.kE(h[0],h[1]),i.Iy.wy()&&i.Iy.kE(h[2],h[3]),i.gy.wy()&&i.gy.$E(this.qE)}OI(){this.a3=BATCH_SETPROGRAMCUSTOMPARAMETERS}LI(){var i=this.YE.Vy.by,s=this.tI;for(let t=0,e=i.length;t<e;++t){var r=i[t],h=s[t];r.FE()?r.WE(h.Ja(),h.Za(),h.Qa()):r.$E(h)}}xI(t){this.a3=BATCH_INVALIDATEFRAMEBUFFER,this.KE=t}DI(){var t=this.B_,e=this.KE,i=this.YE.d_;e!==i&&t.bindFramebuffer(t.FRAMEBUFFER,e),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),e!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}NI(t,e,i){this.a3=BATCH_BLITFRAMEBUFFER;var s=this.JE,r=this.YE.renderer,r=(s[0]=t.eC(),s[1]=t.cC(),s[2]=(e||r).eC(),s[3]=(e||r).cC(),s[4]=t.g_()?1:0,s[5]="stretch"===i,this.tI);C33.xn(r),r.push(t.p_()),r.push(e?e.p_():null)}FI(){var t=this.JE,e=this.tI,i=this.B_,s=t[0],r=t[1],h=t[2],n=t[3],a=0!==t[4],t=0!==t[5],o=e[0],e=e[1];i.bindFramebuffer(i.READ_FRAMEBUFFER,o),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,e),t?i.blitFramebuffer(0,0,s,r,0,0,h,n,i.COLOR_BUFFER_BIT,a?i.LINEAR:i.NEAREST):(o=Math.min(s,h),e=Math.min(r,n),t=Math.max(r-n,0),a=Math.max(n-r,0),i.blitFramebuffer(0,t,o,e+t,0,a,o,e+a,i.COLOR_BUFFER_BIT,i.NEAREST))}$I(t){this.a3=BATCH_STARTQUERY,this.KE=t}BI(){this.KE.kI(),this.KE=null}WI(t){this.a3=BATCH_ENDQUERY,this.KE=t}VI(){this.KE.HI(),this.KE=null}UI(t,e,i){this.a3=BATCH_SETELLIPSEPARAMS;var s=this.JE;s[0]=t,s[1]=e,s[2]=i}jI(){var t=this.YE.Vy,e=this.JE;t.Sy.wy()&&t.Sy.kE(e[0],e[1]),t.iy.wy()&&t.iy.$E(e[2])}XI(t,e,i,s,r,h,n){this.a3=BATCH_SETTILEMAPINFO;var a=this.JE;t.ro(a,0),a[4]=1/e,a[5]=1/i,a[6]=s/e,a[7]=r/i,a[8]=h/e,a[9]=n/i}YI(){var t=this.YE.Vy,e=this.JE;t.uy.wy()&&t.uy.kE(e[0],e[1]),t.Sy.wy()&&t.Sy.kE(e[4],e[5]),t.Q_.wy()&&t.Q_.kE(e[6],e[7]),t.ty.wy()&&t.ty.kE(e[8],e[9])}qI(t,e,i,s,r,h,n){this.a3=BATCH_SETTILERANDOMIZATIONINFO;var a=this.JE;a[0]=1/t,a[1]=1/e,a[2]=i,a[3]=s,a[4]=r,a[5]=h,a[6]=n}zI(){var t=this.YE.Vy,e=this.JE;t.Sy.wy()&&t.Sy.kE(e[0],e[1]),t.Q_.wy()&&t.Q_.kE(e[2],e[3]),t.iy.wy()&&t.iy.$E(e[4]),t.ty.wy()&&t.ty.kE(e[5],e[6])}KI(t){this.a3=BATCH_CLEARDEPTH,this.qE=t?1:0}JI(){var t=this.B_,e=0!==this.qE;e||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),e||t.depthMask(!1)}ZI(t){this.a3=BATCH_SETDEPTHENABLED,this.qE=t?1:0}QI(){var t=this.B_;0===this.qE?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}tA(t){this.a3=BATCH_SETDEPTHSAMPLINGENABLED,this.qE=t?1:0}eA(){var t=this.B_,e=this.YE,i=e.renderer,s=0!==this.qE;e.HE=s,t.activeTexture(t.TEXTURE2),s?(e.C_&&t.bindFramebuffer(t.FRAMEBUFFER,e.C_),t.bindTexture(t.TEXTURE_2D,i.o_())):(t.bindTexture(t.TEXTURE_2D,null),e.C_&&t.bindFramebuffer(t.FRAMEBUFFER,e.d_)),t.activeTexture(t.TEXTURE0)}iA(){this.a3=BATCH_COPLANAR_STARTSTENCILPASS}sA(){var t=this.B_;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}rA(){this.a3=BATCH_COPLANAR_STARTCOLORPASS}hA(){var t=this.B_;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}nA(){this.a3=BATCH_COPLANAR_RESTORE}aA(){var t=this.B_;t.disable(t.STENCIL_TEST)}oA(t,e,i,s,r){this.a3=BATCH_SET_SCISSOR,this.qE=t?1:0;t=this.JE;t[0]=e,t[1]=i,t[2]=s,t[3]=r}lA(){var t=this.B_,e=this.JE;1===this.qE?(t.enable(t.SCISSOR_TEST),t.scissor(e[0],e[1],e[2],e[3])):t.disable(t.SCISSOR_TEST)}uA(){switch(this.a3){case 1:return void this.iI();case 2:return void this.rI();case 3:return void this.nI();case 4:return void this.uI();case 5:return void this.fI();case 6:return void this.CI();case 7:return void this.mI();case 8:return void this.SI();case 9:return void this._I();case 10:return void this.AI();case 11:return void this.RI();case 12:return void this.bI();case 13:return void this.LI();case 14:return void this.DI();case 15:return void this.EI();case 16:return void this.YI();case 17:return void this.FI();case 18:return void this.BI();case 19:return void this.VI();case 20:return void this.jI();case 21:return void this.oI();case 22:return void this.JI();case 23:return void this.QI();case 24:return void this.eA();case 25:return void this.sA();case 26:return void this.hA();case 27:return void this.aA();case 28:return void this.lA();case 29:return void this.zI()}}}}{let fillOrStrokeRect2=function(t,e,i,s,r,h){e?t.strokeRect(i,s,r,h):t.fillRect(i,s,r,h)},ptToPx2=function(t){return t*(4/3)},getOffsetParam2=function(t,e){t=t.trim();var i=parseFloat(t);return isFinite(i)?t.endsWith("%")?e*i/100:i:0},C33=(fillOrStrokeRect=fillOrStrokeRect2,ptToPx=ptToPx2,getOffsetParam=getOffsetParam2,self.$e),MAX_TEXTURE_SIZE=4096,EXTRA_LINE_HEIGHT=4,GENERIC_FONT_FAMILIES=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),DEFAULT_OPTS={timeout:60},tempColor=new C33.Fa(0,0,0,1),VALID_HORIZ_ALIGNMENTS=new Set(["left","center","right"]),VALID_VERT_ALIGNMENTS=new Set(["top","center","bottom"]),VALID_WORD_WRAP_MODES=new Set(["word","cjk","character"]),VALID_TEXT_DIRECTIONS=new Set(["ltr","rtl"]),allRendererTexts=new Set,didCheckFoundBoundingBoxSupport=(C33.FontManager&&C33.FontManager.addEventListener("fontload",t=>{var e,i=t.font.jc();for(e of allRendererTexts)(e.cA()||C33.vr(e.fA(),i))&&e.dA()}),!1),supportsFontBoundingBoxMeasurements=!1;C33.jp.dS=class RendererText{constructor(t,e){e=Object.assign({},DEFAULT_OPTS,e),this.pS=t,this.CA="Arial",this.pA=16,this.mA=1,this.vA=0,this.SA=!1,this.gA=!1,this.TA="black",this._A=!1,this.K1=null,this.yA=!0,this.EA=null,this.IA=new Set,this.AA="left",this.MA="top",this.t3="",this.RA=null,this.wA=C33.nh(C33.q1),this.bA="word",this.GA="ltr",this.OA=!1,this.PA=!1,this.LA=!1,this.xA=-1,this.DA=0,this.NA=0,this.FA=0,this.FC=0,this.$C=0,this.$A=1,this.BA=null,this.kA=null,this.WA=null,this.VA=null,this.HA=-1,this.UA=-1,this.jA="",this.XA="",this.YA="",this.qA=1,this.zA=1,this.KA=t=>this.JA(t),this.cT=null,this.ZA=new C33.Rect,this.QA=1,this.tM=new C33.Z3(()=>{this.eM(),this.iM(8,8)},e.timeout),this.sM=null,this.rM=!1,allRendererTexts.add(this)}ah(){this.EA=null,this.IA.clear(),this.K1=null,this.RA=null,this.BA=null,this.kA=null,this.WA=null,this.VA=null,this.KA=null,this.tM.ah(),this.sM=null,this.eM(),this.wA.Yu(),this.wA=null,this.pS=null,this.rM=!0,allRendererTexts.delete(this)}hM(){this.LA=!0}nM(){this.hM(),this.PA=!0}dA(){this.nM(),this.OA=!0}aM(t){this._A!==(t=!!t)&&(this._A=t,t=this._A?"alphabetic":"top",this.kA&&(this.kA.textBaseline=t),this.WA&&(this.WA.textBaseline=t),this.dA())}cA(){return this._A}Q1(t){this.K1!==t&&(this.K1=t,this.wA.Q1(t),this.K1&&this.K1.Pp()&&this.K1.Lp().then(()=>this.hM()),this.dA())}oM(t){this.yA!==(t=!!t)&&(this.yA=t,this.hM())}lM(t){this.CA!==(t=t||"serif")&&(this.CA=t,this.dA())}fA(){return this.CA}uM(t){this.pA!==(t=t<.1?.1:t)&&(this.pA=t,this.dA())}cM(){return this.pA}fM(t){this.mA!==t&&(this.mA=t,this.dA())}dM(t){this.vA!==t&&(this.vA=t,this.nM())}CM(){return this.vA}pM(t){this.SA!==(t=!!t)&&(this.SA=t,this.dA())}mM(){return this.SA}vM(t){this.gA!==(t=!!t)&&(this.gA=t,this.dA())}SM(){return this.gA}gM(t){t=Math.floor(t),this.xA!==t&&(this.xA=t,this.hM())}TM(){return this.xA}_M(t,e){var i=[],s=((this.SA||e.QC("b"))&&i.push("bold"),(this.gA||e.QC("i"))&&i.push("italic"),e.ZC("size")),s=(s?parseFloat(s.W1):this.pA)*this.mA;i.push(t?s+"pt":s*this.yM()+"pt");let r=this.CA;t=e.ZC("font");return t&&t.W1&&(r=t.W1,this.EA)&&!this.IA.has(r)&&(this.EA(r),this.IA.add(r)),r&&(GENERIC_FONT_FAMILIES.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}qS(t){t instanceof C33.Fa&&(t=t.mo()),this.TA!==t&&(this.TA=t,this.hM())}EM(t,e,i){tempColor.Ha(t,e,i),this.qS(tempColor)}IM(t){if(!VALID_HORIZ_ALIGNMENTS.has(t))throw new Error("invalid horizontal alignment");this.AA!==t&&(this.AA=t,this.nM())}AM(){return this.AA}MM(t){if(!VALID_VERT_ALIGNMENTS.has(t))throw new Error("invalid vertical alignment");this.MA!==t&&(this.MA=t,this.nM())}RM(){return this.MA}wM(t){if(!VALID_WORD_WRAP_MODES.has(t))throw new Error("invalid word wrap mode");this.bA!==t&&(this.bA=t,this.dA())}bM(){return this.bA}GM(t){if(!VALID_TEXT_DIRECTIONS.has(t))throw new Error("invalid text direction");this.GA!==t&&(this.GA=t,this.kA&&(this.kA.direction=this.GA),this.WA&&(this.WA.direction=this.GA),this.dA())}OM(){return this.GA}s3(t){this.t3!==t&&(this.t3=t,this.dA())}PM(){return this.t3}yM(){return this.QA*this.$A*self.devicePixelRatio}LM(e,i,s){if(void 0===s&&(s=1),!(e<=0||this.NA===e&&this.FA===i&&this.$A===s)){var r=this.NA,e=(this.NA=e,this.FA=i,this.$A=s,self.devicePixelRatio),i=(this.FC=this.NA*this.$A*e,this.$C=this.FA*this.$A*e,Math.max(this.FC,this.$C)),s=Math.min(this.pS._T(),MAX_TEXTURE_SIZE);let t=1;s<i&&(t=s/i,this.FC=Math.min(this.FC*t,s),this.$C=Math.min(this.$C*t,s)),this.QA=t,this.NA!==r?this.dA():this.nM()}}eC(){return this.FC}cC(){return this.$C}xM(){return this.$A}DM(){return this.NM(),this.wA.DC()}FM(){return this.NM(),this.wA.NC()+this.wA.Z1()*(this.vA+EXTRA_LINE_HEIGHT)-this.vA}$M(){this.NM();let t=0;for(var e of this.wA.J1())for(var i of e.vC())t+=i.SC();return t}v_(){return this.tM.rf(),this.BM(),this.cT}kM(t,e){this.NM();var i,s=this.yM();for(i of this.wA.J1()){var r=i.dC()*s;if(e>=i.zC()-i.cC()*s+r&&e<i.zC()+r)for(var h of i.vC())if(t>=h.YC()&&t<h.YC()+h.eC()*s)return h}return null}*WM(t){var e;this.NM();for(e of this.wA.J1())for(var i of e.vC()){var s=i.ZC("tag");s&&C33.vr(s.W1,t)&&(yield i)}}VM(t,e){for(var i of this.WM(t)){if(0===e)return i;--e}return null}HM(t){let e=0;for(var i of this.WM(t))++e;return e}BM(){this.cT&&!this.LA&&!this.PA&&!this.OA||this.rM||this.FC<=0||this.$C<=0||(this.LA=!1,this.UM())}UM(){this.rM||(this.NM(),this.iM(Math.max(C33.xh(Math.ceil(this.FC)),128),Math.max(C33.xh(Math.ceil(this.$C)),64)),this.jM(),this.XM(),this.tM.rf())}iM(t,e){this.BA||(this.BA=C33.Aa(16,16));let i=!1;this.HA===t&&this.UA===e||(this.HA=t,this.UA=e,this.BA.width=t,this.BA.height=e,i=!0),this.kA||(this.kA=this.BA.getContext("2d"),i=!0),i?(this.kA.textBaseline=this._A?"alphabetic":"top",this.kA.direction=this.GA,this.kA.font=this.jA,this.kA.fillStyle=this.YA,this.kA.strokeStyle=this.YA,this.kA.globalAlpha=this.qA,this.kA.lineWidth=this.zA):this.kA.clearRect(0,0,t,e)}YM(){this.WA||(this.WA=C33.Aa(16,16).getContext("2d"),this.VA=C33.Aa(16,16).getContext("2d"),this.WA.textBaseline=this._A?"alphabetic":"top",this.VA.textBaseline="top",this.WA.direction=this.GA,this.VA.direction=this.GA)}qM(t){this.XA!==t&&(this.XA=t,this.WA.font=t,this.VA.font=t)}zM(){var t;return didCheckFoundBoundingBoxSupport||(didCheckFoundBoundingBoxSupport=!0,this.YM(),t=this.WA.measureText("test"),supportsFontBoundingBoxMeasurements="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent),supportsFontBoundingBoxMeasurements}NM(){this.KM(),this.JM()}KM(){this.OA&&(this.YM(),!this._A||this.RA&&this.RA.toString()===this.t3||(this.RA=new C33.Or(this.t3,{A1:!0})),this.wA.q1(this._A?this.RA.F1():this.t3,this.KA,this.NA,this.bA,0),this.OA=!1)}JM(){this.PA&&(this.ZM(),this.PA=!1)}JA(t){var e=t.aC()?t.AC().join(""):" ",t=(this.qM(this._M(!0,t)),t.ZC("size")),t=(t?parseFloat(t.W1):this.pA)*this.mA,i=this.WA.measureText(e);let s=0;return this._A&&this.zM()&&(e=this.VA.measureText(e),s=i.fontBoundingBoxAscent-e.fontBoundingBoxAscent),{width:i.width,height:ptToPx2(t),fontBoundingBoxAscent:i.fontBoundingBoxAscent||0,fontBoundingBoxDescent:i.fontBoundingBoxDescent||0,nC:s}}QM(t){this.jA!==t&&(this.jA=t,this.kA.font=t)}tR(t){this.YA!==t&&(this.YA=t,this.kA.fillStyle=t,this.kA.strokeStyle=t)}eR(t){this.qA!==t&&(this.qA=t,this.kA.globalAlpha=t)}iR(t){this.zA!==t&&(this.zA=t,this.kA.lineWidth=t)}ZM(){let s=this.yM(),r=(EXTRA_LINE_HEIGHT+this.vA)*s,h=0;var n=this.wA.J1();if(0!==n.length){for(var t of n){t.XC(NaN),t.qC(NaN);for(var e of t.vC())e.XC(NaN),e.qC(NaN)}var a,o=this._A&&this.zM();let i=n[0].cC()*s;"center"===this.MA?(a=n.reduce((t,e)=>t+e.cC()*s+r,0)-r,h=Math.max(this.$C/2-a/2,0),o&&(i=n[0].CC()*s)):"bottom"===this.MA&&(a=n.reduce((t,e)=>t+e.cC()*s+r,0)-this.vA*s,o=o?n.at(-1).dC()*s:0,h=this.$C-a-o-2);for(let t=0,e=n.length;t<e;++t){var l=n[t],u=l.cC()*s,c=h;if(this._A){if(h+=0===t?i:u,0<t&&h>this.$C-EXTRA_LINE_HEIGHT*s)break}else if(0<t&&h>=this.$C-u)break;0<=c&&this.sR(l,h,s),this._A||(h+=u),h+=r}}}sR(t,e,i){let s=0;"center"===this.AA?s=(this.FC-t.eC()*i)/2:"right"===this.AA&&(s=this.FC-t.eC()*i),t.XC(s),t.qC(e);for(var r of"ltr"===this.GA?t.vC():t.UC())this.rR(r,s,e,i),s+=r.eC()*i}rR(t,e,i,s){var r=t.ZC("offsetx"),r=(e+=r?getOffsetParam2(r.W1,t.cC())*s:0,t.ZC("offsety"));i+=r?getOffsetParam2(r.W1,t.cC())*s:0,t.lC()&&(i+=(r=t.ZC("iconoffsety"))?getOffsetParam2(r.W1,t.cC())*s:.2*t.cC()*s),t.XC(e),t.qC(i)}jM(){this.kA.imageSmoothingEnabled=this.yA,this.kA.imageSmoothingQuality="high",this.DA=0;var t,e=this.yM();for(t of this.wA.J1())this.hR(t,e)}hR(t,e){var i=t.YC(),s=t.zC();if(Number.isFinite(i)&&Number.isFinite(s))for(var r of"ltr"===this.GA?t.vC():t.UC())this.nR(r,e,t.cC())}nR(i,s,r){var h=this.kA,n=i.YC(),a=i.zC();if(Number.isFinite(n)&&Number.isFinite(a)){r=r/16;let t=i.eC()*s;var o=i.cC()*s,l=i.cC()/16,u=(EXTRA_LINE_HEIGHT+this.vA)*s;let e=i.aC()?i.AC():null;if(-1!==this.xA){if(this.DA>=this.xA)return;i.aC()&&this.DA+e.length>this.xA&&(e=e.slice(0,this.xA-this.DA),t=this.JA(i).width*s),this.DA+=i.SC()}var c,f,d,C=i.ZC("background"),p=i.QC("u"),m=i.QC("s");i.aC()&&C33.Dd(e)&&!C&&!p&&!m||i.QC("hide")||(c=i.ZC("color"),d=i.ZC("opacity"),this.eR(d?parseFloat(d.W1)/100:1),C&&(this.tR(C.W1),h.fillRect(n,a-o,t,o+u)),C=(d=i.ZC("linethickness"))?parseFloat(d.W1):1,(u=i.QC("stroke"))&&this.iR(.5*l*C*this.yM()),i.aC()?(d=e.join(""),this.QM(this._M(!1,i)),!u&&(this.iR(.5*l*C*this.yM()),f=i.ZC("outlineback"))&&(this.tR(f.W1),this.aR(!0,d,n,a,t)),this.tR(c?c.W1:this.TA),this.aR(u,d,n,a,t),!u&&(this.iR(.5*l*C*this.yM()),f=i.ZC("outline"))&&(this.tR(f.W1),this.aR(!0,d,n,a,t))):i.lC()&&0<i.eC()&&(f=i.op(this.K1))&&h.drawImage(f,n,a-o,t,o),this.tR(c?c.W1:this.TA),p&&fillOrStrokeRect2(h,u,n,a+s*r,t,s*r*C),m&&h.fillRect(n,a-o/4+(d=s*l)/2-d*C/2,t,d*C))}}aR(t,e,i,s,r){"rtl"===this.GA&&(i+=r),t?"Gecko"===C33.ci.Si?this.kA.strokeText(e,i,s,r):this.kA.strokeText(e,i,s):"Gecko"===C33.ci.Si?this.kA.fillText(e,i,s,r):this.kA.fillText(e,i,s)}XM(){this.pS.oR()||(this.cT||(this.cT=this.pS.a_(this.BA.width,this.BA.height,{aT:!0,oT:"high"})),this.pS.lR(this.BA,this.cT),this.ZA.set(0,0,this.FC/this.cT.eC(),this.$C/this.cT.cC()),this.sM&&this.sM())}uR(){return this.ZA}eM(){this.cT&&(this.pS.oR()||this.pS.c_(this.cT),this.cT=null)}static zS(){for(var t of allRendererTexts)t.eM()}static cR(){return allRendererTexts.values()}}}{let C33=self.$e;class WebGLRealTimeElapsedQuery{constructor(t){this.B_=t.yT(),this.fR=t.ET(),this.dR=t.CR(),this.pR=null,this.if=!1,this.mR=!1,this.vR=0,1===this.fR?this.pR=this.dR.createQueryEXT():this.pR=this.B_.createQuery()}ah(){this.SR(),this.B_=null,this.dR=null,this.mR=!1}SR(){this.pR&&(1===this.fR?this.dR.deleteQueryEXT(this.pR):this.B_.deleteQuery(this.pR),this.pR=null)}kI(){if(this.if)throw new Error("query already active");1===this.fR?this.dR.beginQueryEXT(this.dR.TIME_ELAPSED_EXT,this.pR):this.B_.beginQuery(this.dR.TIME_ELAPSED_EXT,this.pR),this.if=!0}HI(){if(!this.if)throw new Error("query not active");1===this.fR?this.dR.endQueryEXT(this.dR.TIME_ELAPSED_EXT):this.B_.endQuery(this.dR.TIME_ELAPSED_EXT),this.if=!1}gR(){if(this.pR&&!this.mR&&!this.if){let t=!1;t=1===this.fR?this.dR.getQueryObjectEXT(this.pR,this.dR.QUERY_RESULT_AVAILABLE_EXT):this.B_.getQueryParameter(this.pR,this.B_.QUERY_RESULT_AVAILABLE);var e=this.B_.getParameter(this.dR.GPU_DISJOINT_EXT);t&&!e&&(1===this.fR?this.vR=this.dR.getQueryObjectEXT(this.pR,this.dR.QUERY_RESULT_EXT):this.vR=this.B_.getQueryParameter(this.pR,this.B_.QUERY_RESULT),this.vR/=1e9,this.mR=!0),(t||e)&&this.SR()}}TR(){return this.mR}_R(){if(this.mR)return this.vR;throw new Error("no result available")}}C33.jp.yR=class WebGLTimeElapsedQuery{constructor(t){this.pS=t,this.Ym=t.eS(),this.if=!1,this.ER=null,this.IR=!1,this.AR=null,this.MR=[]}ah(){for(var t of this.MR)t instanceof WebGLRealTimeElapsedQuery&&t.ah();C33.xn(this.MR),this.ER=null,this.AR=null,this.pS=null}kI(){if(this.if)throw new Error("query already active");var t=this.pS.RR();0<t.length?(this.IR=!0,this.ER=t.at(-1),this.ER.wR(),this.ER.MR.push(this)):(this.IR=!1,this.ER=null),this.if=!0,t.push(this),this.bR()}HI(){if(!this.if)throw new Error("query not active");if(this.pS.RR().pop()!==this)throw new Error("can only end most nested query");this.if=!1,this.wR(),this.ER&&(this.ER.bR(),this.ER=null)}bR(){this.AR=C33.nh(WebGLRealTimeElapsedQuery,this.pS),this.MR.push(this.AR),this.AR.kI()}wR(){this.AR.HI(),this.AR=null}gR(){for(var t of this.MR)t.gR()}GR(){return this.IR}TR(){return this.MR.every(t=>t.TR())}_R(){return this.MR.reduce((t,e)=>t+e._R(),0)}eS(){return this.Ym}}}{let C33=self.$e;C33.jp.OR=class WebGLQueryResultBuffer{constructor(t,e=1e3){this.pS=t,this.PR=e,this.LR=[],this.pS.xR(this)}ah(){this.Yu(),this.pS.DR(this),this.pS=null}Yu(){for(var t of this.LR)t.ah();C33.xn(this.LR)}NR(){var t=new C33.jp.yR(this.pS);return this.LR.push(t),this.LR.length>this.PR&&this.LR.shift().ah(),t}FR(t){for(var e of this.LR){if(e.eS()>=t)return;if(e.GR())return;e.gR()}}$R(t,e){if(e<=t)return NaN;let i=0;for(var s of this.LR){if(s.eS()>=e)break;if(!(s.eS()<t)){if(!s.TR())return NaN;i+=s._R()}}return i}BR(i){for(let t=0,e=this.LR.length;t<e;++t){var s=this.LR[t];if(!(s.eS()<i))return void(0<t&&this.LR.splice(0,t));s.ah()}}}}{let CheckPendingPolls2=function(){pollRafId=-1;for(var t of pendingPolls)t.kR()&&(t.resolve(),pendingPolls.delete(t));0<pendingPolls.size&&(pollRafId=self.requestAnimationFrame(CheckPendingPolls2))},C33=(CheckPendingPolls=CheckPendingPolls2,self.$e),assert=self.assert,glMatrix=self.pe,vec32=glMatrix.Ee,vec42=glMatrix.Ie,mat42=glMatrix.ge,DEFAULT_WEBGLRENDERER_OPTS={powerPreference:"default",WR:!0,alpha:!1,depth:!1,VR:!1,HR:2,failIfMajorPerformanceCaveat:!1},VALID_POWER_PREFERENCES=new Set(["default","low-power","high-performance"]),MAX_VERTICES=8e3,MAX_INDICES=MAX_VERTICES/2*3,MAX_POINTS=8e3,LAST_POINT=MAX_POINTS-4,PARTIAL_TEXTURE_UPLOAD_CHUNK_SIZE=262144,defaultTexCoordsQuad=new C33.Xl(0,0,1,0,1,1,0,1),tmpProjection=mat42.create(),tmpModelView=mat42.create(),tmpQuad=new C33.Xl,tmpRect=new C33.Rect,loseContextExtension=null,pendingPolls=(C33.isDebug&&(self.UR=function(){loseContextExtension?loseContextExtension.loseContext():console.warn("WEBGL_lose_context not supported")},self.jR=function(){loseContextExtension?loseContextExtension.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),pollRafId=-1;C33.jp.YR=class WebGLRenderer extends C33.jp.um{constructor(t,e){if(super(e),e=Object.assign({},DEFAULT_WEBGLRENDERER_OPTS,e),!VALID_POWER_PREFERENCES.has(e.powerPreference))throw new Error("invalid power preference");var i={alpha:!!e.alpha,depth:!1,antialias:!1,powerPreference:e.powerPreference,failIfMajorPerformanceCaveat:!!e.failIfMajorPerformanceCaveat};let s=null,r=0;if(2<=e.HR&&(s=t.getContext("webgl2",i),r=2),s||(s=t.getContext("webgl",i),r=1),!s)throw new Error("renderer-unavailable (could not get WebGL context)");this.B_=s,this.qR=s.getContextAttributes(),this.zR=s.getParameter(s.VERSION),this.fR=r,this.KR=vec42.create(),this.JR=!1,this.ZR=mat42.create(),this.QR=!!e.depth,this.ew=!(!e.depth||!e.VR),this.iw=this.QR,this.rw=!1,this.hw=null,this.aw=!0,this.ow=0,this.lw=0,this.V_=null,this.H_=null,this.uw=null,this.U_=null,this.cw=new Float32Array(MAX_VERTICES*this.Zv()),this.fw=new Uint16Array(MAX_INDICES),this.dw=new Float32Array(2*MAX_VERTICES),this.Cw=new Float32Array(4*MAX_POINTS),this.pw=0,this.mw=0,this.Sw=0,this.gw=0,this.Tw=null,this._w=null,this.yw=[],this.Ew=0,this.Iw=0,this.Aw=null,this.Mw=0,this.YE=C33.nh(C33.jp.VE,this),this.Rw=C33.nh(C33.Fa,1,1,1,1),this.ww=null,this.GI=null,this.bw=0,this.Gw=0,this.Ow=new C33.Rect,this.Pw=C33.nh(C33.Rect,0,0,-1,-1),this.Lw=0,this.xw=-1,this.Dw=0,this.Nw=0,this.Fw=0,this.$w="(unavailable)",this.Bw="(unavailable)",this.kw=[],this.Ww=!1,this.Vw=null,this.Hw=null,this.Uw=null,this.jw=null,this.Xw=null,this.Yw=null,this.qw=0,this.zw=!!e.WR,this.dR=null,this.Kw=new Set,this.Jw=[],this.Km(this.fw)}aS(){return!0}async Qm(){super.Qm();var t=this.B_,e=this.Zv(),e=(this.Rw.Va(1,1,1,1),this.ww=null,this.GI=null,this.pw=0,this.Sw=0,this.gw=MAX_VERTICES*e-4*e,C33.xn(this.yw),this.Ew=0,this.Iw=0,this.Tw=null,this.Aw=null,this.Ow.set(0,0,1,1),this.Mw=0,this.YE),e=(e.Vy=null,e.d_=null,e.C_=null,vec42.set(e.UE,1,1,1,1),e.clearColor.Va(0,0,0,0),e.jE.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.bw=t.ONE,this.Gw=t.ONE_MINUS_SRC_ALPHA,this.Zw(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.QR?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.iw=this.QR,this.rw=!1,this.U_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.U_),t.bufferData(t.ARRAY_BUFFER,this.Cw.byteLength,t.DYNAMIC_DRAW),this.V_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.V_),t.bufferData(t.ARRAY_BUFFER,this.cw.byteLength,t.DYNAMIC_DRAW),this.H_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.H_),t.bufferData(t.ARRAY_BUFFER,this.dw.byteLength,t.DYNAMIC_DRAW),this.uw=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.uw),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.fw,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.xw=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),e=(this.Dw=e[0],this.Nw=e[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),i=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),e=(this.Fw=e&&i?Math.min(e.precision,i.precision):0,2048<this.Nw&&(this.Nw=2048),this.kw=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(e&&(this.$w=t.getParameter(e.UNMASKED_VENDOR_WEBGL),this.Bw=t.getParameter(e.UNMASKED_RENDERER_WEBGL)),this.Vw=t.getExtension("KHR_parallel_shader_compile"),C33.isDebug&&(loseContextExtension=t.getExtension("WEBGL_lose_context")),this.zw&&(1===this.ET()?this.dR=t.getExtension("EXT_disjoint_timer_query"):this.dR=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.Hw=t.getExtension("EXT_texture_filter_anisotropic"),this.Hw?this.qw=t.getParameter(this.Hw.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.qw=0,this.ET()<2&&this.QR&&this.ew&&(this.Uw=t.getExtension("WEBGL_depth_texture"),!this.Uw))throw new Error("no depth texture support");this.ET()<2&&(this.jw=t.getExtension("EXT_frag_depth"),this.Xw=t.getExtension("OES_standard_derivatives"),this.Yw=t.getExtension("EXT_shader_texture_lod"));i=C33.jp.P_,e=i.uE(!1);let s=i.fE(),r=e,h=i._E(),n=i.gE(),a=i.pE(),o=i.uE(!0),l=!1;this.QR&&(this.ET()<2?this.jw&&(s=i.dE(),h=i.yE(),a=i.mE(),l=!0):(r=i.cE(),s=i.CE(),h=i.EE(),n=i.TE(),a=i.vE(),o=i.cE(!0)));var t=i.SE(this.ET(),l,this.Xw&&this.Yw),u=2<=this.ET()?i.cE():e,i=[[s,r,"<default>"],[s,r,"<default-device-transform>"],[h,n,"<point>"],[i.IE(),e,"<fill>"],[i.AE(),e,"<lineargradient>"],[i.ME(),e,"<penumbra>"],[i.wE(),e,"<hardellipse>"],[i.bE(),e,"<hardellipseoutline>"],[i.GE(),e,"<smoothellipse>"],[i.OE(),e,"<smoothellipseoutline>"],[i.RE(),e,"<smoothline>"],[a,o,"<tilemap>"],[t,u,"<tilerandomization>"]],e=await Promise.all(i.map(t=>this.Qw({src:t[0],x_:t[1],name:t[2]})));this.ym=e[0],this._w=e[1],this.Em=e[2],this.Mm=e[3],this.Rm=e[4],this.wm=e[5],this.Gm=e[6],this.Om=e[7],this.Pm=e[8],this.Lm=e[9],this.xm=e[10],this.Im=e[11],this.Am=e[12],this.M2()}async Qw(t){t=await C33.jp.P_.F_(this,t);return this._2(t),t}tb(){this.Tw=null}LM(t,e,i){var s;this.FC===t&&this.$C===e&&!i||(this.tS(),i=this.B_,s=this.YE,this.FC=t,this.$C=e,this.eb(0,0,t,e),this.m2(this.ZR,t/e),this.ib(this.ZR),this._w&&(i.useProgram(this._w.Uy()),this._w.Fy(this.Cm),this.Tw=this._w,this.YE.Vy=this._w),i.bindTexture(i.TEXTURE_2D,null),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,null),i.activeTexture(i.TEXTURE0),this.ww=null,this.GI=null,this.QR&&this.aw&&this.sb(this.FC,this.$C),this.Aw&&this.Aw.u_(this.FC,this.$C),i.bindFramebuffer(i.FRAMEBUFFER,null),this.Aw=null,s.d_=null,s.C_=null)}sb(t,e){var i=this.B_;this.hw&&this.ow===t&&this.lw===e||(this.ew?(this.hw&&i.deleteTexture(this.hw),this.hw=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.hw),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),2<=this.ET()?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,e,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.Uw&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,e,0,i.DEPTH_STENCIL,this.Uw.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.hw&&i.deleteRenderbuffer(this.hw),this.hw=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.hw),i.renderbufferStorage(i.RENDERBUFFER,2<=this.fR?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,e),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.ow=t,this.lw=e)}rb(t,e){this.QR&&(this.aw=!1,this.sb(t,e))}hb(){this.QR&&(this.aw=!0,this.sb(this.FC,this.$C))}eb(t,e,i,s){var r=this.KR;r[0]===t&&r[1]===e&&r[2]===i&&r[3]===s||(this.nb().cI(t,e,i,s),vec42.set(r,t,e,i,s),this.Iw=0)}u2(t){super.u2(t),this.m2(this.ZR,this.FC/this.$C)}n2(t){super.n2(t),this.m2(this.ZR,this.FC/this.$C)}o2(t){super.o2(t),this.m2(this.ZR,this.FC/this.$C)}ib(t){mat42.$(this.Cm,t)||(this.nb().dI(t),mat42._(this.Cm,t),this.Iw=0,this.JR=!0)}ab(){let t,e,i;var s=this.Aw;i=(null===s?(t=this.ZR,e=this.eC(),this):(t=s.S_(),e=s.eC(),s)).cC(),this.ib(t),this.eb(0,0,e,i)}ob(t){mat42.$(this.pm,t)||(this.nb().pI(t),mat42._(this.pm,t),this.Iw=0,this.JR=!0)}lb(){this.JR=!1}ub(){return this.JR}f_(){return this.YE}nb(){var t=this.yw;return this.Ew===t.length&&t.push(new C33.jp.XE(this.YE)),t[this.Ew++]}tS(){0===this.Ew||this.oR()||(this.cb(),this.fb(),this.Ew=0,this.pw=0,this.mw=0,this.Sw=0,this.Iw=0)}cb(){var t=this.B_;0<this.Sw&&(t.bindBuffer(t.ARRAY_BUFFER,this.U_),t.bufferSubData(t.ARRAY_BUFFER,0,this.Cw.subarray(0,this.Sw))),0<this.pw&&(t.bindBuffer(t.ARRAY_BUFFER,this.V_),t.bufferSubData(t.ARRAY_BUFFER,0,this.cw.subarray(0,this.pw)),t.bindBuffer(t.ARRAY_BUFFER,this.H_),t.bufferSubData(t.ARRAY_BUFFER,0,this.dw.subarray(0,this.mw)))}fb(){var i=this.yw;for(let t=0,e=this.Ew;t<e;++t)i[t].uA()}Cb(){return this.Rw.eo()}pb(t,e,i,s){var r=this.Rw;r.lo(t,e,i,s)||(r.Va(t,e,i,s),this.nb().hI(r),this.Iw=0,this.Nm=null)}mb(t){var e=this.Rw;e.eo()!==t&&(e.za(t),this.nb().hI(e),this.Iw=0,this.Nm=null)}qS(t){var e=this.Rw;e.equals(t)||(e.set(t),this.nb().hI(e),this.Iw=0,this.Nm=null)}vb(){this.pb(1,1,1,1)}Sb(){return this.Rw}gb(t){t!==this.ww&&(this.nb().sI(t),this.ww=t,this.Iw=0)}RT(){this.ww=null}YS(t){t=this.rv(t);this.Tb(t[0],t[1])}_b(t){t=this.av(t);this.Tb(t.tv,t.sv)}Tb(t,e){t===this.bw&&e===this.Gw||(this.nb().lI(t,e),this.bw=t,this.Gw=e,this.Iw=0,this.Nm=null)}yb(){return this.bw===this.B_.ONE&&this.Gw===this.B_.ONE_MINUS_SRC_ALPHA}Eb(){this.Tb(this.B_.ONE,this.B_.ONE_MINUS_SRC_ALPHA)}Ib(){this.Tb(this.B_.SRC_ALPHA,this.B_.ONE_MINUS_SRC_ALPHA)}Ab(){this.Tb(this.B_.ONE,this.B_.ZERO)}Rect(t){this.Mb(t.ml(),t.vl(),t.Sl(),t.gl())}Mb(t,e,i,s){this.Jv(t,e,i,e,i,s,t,s)}Rb(){let t=this.pw;t>=this.gw&&(this.tS(),t=0),1===this.Iw?this.yw[this.Ew-1].zE+=6:(this.nb().eI(t,6),this.Iw=1)}wb(t){t.fu(this.cw,this.pw,this.Bm+this.km),this.pw+=12}Xl(t){this.Rb(),this.wb(t),defaultTexCoordsQuad.ro(this.dw,this.mw),this.mw+=8}Jv(t,e,i,s,r,h,n,a){this.Rb();var o=this.cw,l=this.pw,u=this.Bm+this.km;o[l++]=t,o[l++]=e,o[l++]=u,o[l++]=i,o[l++]=s,o[l++]=u,o[l++]=r,o[l++]=h,o[l++]=u,o[l++]=n,o[l++]=a,o[l++]=u,this.pw=l,defaultTexCoordsQuad.ro(this.dw,this.mw),this.mw+=8}Iv(t,e){this.Rb(),this.wb(t),e.yl(this.dw,this.mw),this.mw+=8}bb(t,e){this.Rb(),this.wb(t),e.ro(this.dw,this.mw),this.mw+=8}Gb(t,e,i,s,r,h,n,a,o,l,u,c,f){this.Rb();var d=this.cw,C=this.pw,p=this.Bm+this.km;d[C++]=t,d[C++]=e,d[C++]=p+i,d[C++]=s,d[C++]=r,d[C++]=p+h,d[C++]=n,d[C++]=a,d[C++]=p+o,d[C++]=l,d[C++]=u,d[C++]=p+c,this.pw=C,f.yl(this.dw,this.mw),this.mw+=8}gv(t,e,i,s,r,h,n,a,o,l,u,c,f){this.Rb();var d=this.cw,C=this.pw,p=this.Bm+this.km;d[C++]=t,d[C++]=e,d[C++]=p+i,d[C++]=s,d[C++]=r,d[C++]=p+h,d[C++]=n,d[C++]=a,d[C++]=p+o,d[C++]=l,d[C++]=u,d[C++]=p+c,this.pw=C,f.ro(this.dw,this.mw),this.mw+=8}Ob(i,s,r){var h=this.cw,n=this.dw;if(r.length%3!=0)throw new Error("invalid index buffer length");for(let t=0,e=r.length;t<e;){var a=r[t++],o=r[t++],l=r[t++],u=3*a,c=3*o,f=3*l,a=2*a,o=2*o,l=2*l,d=(this.Rb(),this.pw),C=this.mw;h[d++]=i[0+u],h[d++]=i[1+u],h[d++]=i[2+u],h[d++]=i[0+c],h[d++]=i[1+c],h[d++]=i[2+c],h[d++]=i[0+f],h[d++]=i[1+f],h[d++]=i[2+f],h[d++]=i[0+f],h[d++]=i[1+f],h[d++]=i[2+f],n[C++]=s[0+a],n[C++]=s[1+a],n[C++]=s[0+o],n[C++]=s[1+o],n[C++]=s[0+l],n[C++]=s[1+l],n[C++]=s[0+l],n[C++]=s[1+l],this.pw=d,this.mw=C}}Pb(t,e){this.cv(0),mat42._(tmpProjection,this.Cm),mat42._(tmpModelView,this.pm),this.ab();var i,s,r,h,n,[a,o]=this.Lb(this.Aw),l=this.T2(0,0,this.e2(o),0,0,0,o);this.ob(l),"crop"===t&&this.Aw&&e?(l=this.FC/2,t=this.$C/2,i=e.eC(),e=e.cC(),s=this.Aw.eC(),n=this.Aw.cC(),s=Math.min(s,i),r=Math.min(n,e),h=Math.max(e-n,0),n=Math.max(n-e,0),tmpRect.set(-l,t-n,-l+s,t-r-n),tmpQuad.du(tmpRect),tmpRect.set(0,h,s,r+h),tmpRect.It(i,e),this.Iv(tmpQuad,tmpRect)):this.Mb(-(l=a/2),t=o/2,l,-t),this.ib(tmpProjection),this.ob(tmpModelView)}xb(t){this.Ow.equals(t)||(this.Ow._(t),this.nb().yI(t),this.Iw=0)}Db(){}Nb(t,e,i,s){this.Sw>=LAST_POINT&&this.tS();var r=this.Sw,h=this.Bm+this.km,h=(2===this.Iw&&this.Mw===h?this.yw[this.Ew-1].zE++:(this.nb().II(r,h),this.Iw=2,this.Mw=h),this.Cw);h[r++]=t,h[r++]=e,h[r++]=i,h[r++]=s,this.Sw=r}R2(t){this.Tw!==t&&(this.nb().MI(t),this.Tw=t,this.Iw=0,this.Nm=null)}Fb(){return this.Tw}$b(){this.R2(this._w)}Bb(t){this.nb().aI(t),this.Iw=0}kb(t,e,i=1){this.nb().UI(t,e,i),this.Iw=0}Wb(t,e,i,s,r,h,n){if(this.Tw!==this.Im)throw new Error("must set tilemap fill mode first");this.nb().XI(t,e,i,s,r,h,n),this.Iw=0}Vb(t,e,i,s,r,h,n){if(this.Tw!==this.Am)throw new Error("must set tile randomization mode first");this.nb().qI(t,e,i,s,r,h,n),this.Iw=0}Hb(t,e,i,s,r,h,n,a,o,l,u){var c,f,d=this.Tw;u%=10800,d.Ry&&!d.Zy(e,i,s,r,h,n,a,o,l,u)&&((c=this.nb()).wI(),d.eE(e,i,s,r,h,n,a,o,l,u),(f=c.JE)[0]=h,f[1]=n,e.ro(f,2),f[6]=o,f[7]=l,i.ro(f,12),h=c.ZE,r.ro(h,0),n=h[1],h[1]=h[3],h[3]=n,s.ro(c.QE,0),c.qE=u,c.zE=a,d.hy.wy()?c.KE=t?t.v_():null:c.KE=null,this.Iw=0)}Ub(t){var e,i=this.Tw;0===t.length||i.qy(t)||((e=this.nb()).OI(),i.Ky(t),C33.$n(e.tI,t),this.Iw=0)}jb(t,e,i,s){this.nb().TI(t,e,i,s),this.Iw=0}Yu(t){this.nb().gI(t),this.Iw=0}Xb(){}Qv(){super.Qv(),this.B_.flush()}Yb(){this.QR&&this.Aw&&this.Aw.y_()&&(this.nb().KI(this.iw),this.Iw=0)}qb(t){this.iw!==(t=!!t)&&this.QR&&(this.iw=t,this.nb().ZI(t),this.Iw=0)}zb(){return this.iw}o_(){return this.hw}l_(){return this.ew}Kb(t){if(t=!!t,this.ew&&this.rw!==t){if(t&&this.zb())throw new Error("depth still enabled");this.rw=t,this.nb().tA(t),this.Iw=0}}Jb(t,e,i,s,r=0){t=Math.floor(t),e=Math.floor(e),i=Math.floor(i),s=Math.floor(s),this.Pw.pl(t,e,i,s)||(this.Pw.ol(t,e,i,s),e=(r||this.Lb(this.Zb())[1])-e-s,this.nb().oA(!0,t,e,i,s),this.Iw=0)}Qb(){-1!==this.Pw.Sl()&&(this.Pw.set(0,0,-1,-1),this.nb().oA(!1,0,0,0,0),this.Iw=0)}tG(){for(var t of this.Kw)t.FR(this.Ym)}oR(){return!this.B_||this.B_.isContextLost()||this.Ww}zS(){super.t2(),C33.jp.uT.zS(),C33.jp.XT.zS(),C33.jp.dS.zS();for(var t of this.Kw)t.Yu();this.kw=[],this.dR=null,this.Vw=null,this.Hw=null,this.Uw=null,this.jw=null,this.Xw=null,this.Yw=null,this.qw=0,this.$w="(unavailable)",this.Bw="(unavailable)",this.Tw=null,this._w=null,this.hw=null;for(var e of this.Dm.values())e.zS()}async KS(){this.Ww=!0,await this.Qm(),this.Ww=!1;for(var t of this.Dm.values())t.KS(this);this.LM(this.FC,this.$C,!0)}eG(t,e){if(this.oR())throw new Error("context lost");this.tS();var i=C33.nh(C33.jp.uT,this);return i.TT(t,e),i}async iG(e,i){if(this.oR())throw new Error("context lost");if(i=Object.assign({},i),C33.Bi.ImageBitmapOptions){let t=await createImageBitmap(e,{premultiplyAlpha:"premultiply"});var s=i.iT&&"clamp-to-edge"!==i.iT||i.sT&&"clamp-to-edge"!==i.sT,r=C33.Lh(t.width)&&C33.Lh(t.height);return this.IT()||r||!s?i.premultiplyAlpha=!1:C33.Bi.Hi?(t=await createImageBitmap(e,{premultiplyAlpha:"premultiply",resizeWidth:C33.xh(t.width),resizeHeight:C33.xh(t.height)}),i.premultiplyAlpha=!1):t=await createImageBitmap(e,{premultiplyAlpha:"none"}),C33.b3(()=>this.eG(t,i))}if(e instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");r=await C33.Ia(e);e=r}return C33.b3(()=>this.eG(e,i))}a_(t,e,i){this.tS();var s=C33.nh(C33.jp.uT,this);return s.wT(t,e,i),s}lR(t,e,i){this.tS(),e.LT(t,i)}c_(t){t&&(t.$T(),0<t.BT()||(this.tS(),t===this.ww&&(this.B_.bindTexture(this.B_.TEXTURE_2D,null),this.ww=null),t===this.GI&&(this.B_.activeTexture(this.B_.TEXTURE1),this.B_.bindTexture(this.B_.TEXTURE_2D,null),this.B_.activeTexture(this.B_.TEXTURE0),this.GI=null),t.xT()))}sG(t){let e=this.FC,i=this.$C,s=!0;if(t&&("number"==typeof t.width&&(e=Math.floor(t.width),s=!1),"number"==typeof t.height)&&(i=Math.floor(t.height),s=!1),e<=0||i<=0)throw new Error("invalid size");this.tS();var r=C33.nh(C33.jp.XT,this);return r.h_(e,i,Object.assign({UT:s},t)),this.Aw=null,this.YE.d_=null,this.YE.C_=null,r}rG(t,e=!0){t!==this.Aw&&(t&&t.E_()&&t.u_(this.FC,this.$C),this.nb().vI(t),this.Aw=t,this.Iw=0,e)&&this.ab()}Zb(){return this.Aw}Lb(t){return t?[t.eC(),t.cC()]:[this.FC,this.$C]}hG(t,e="stretch"){this.fR<2||this.Aw&&0<this.Aw.I_()?(this.Ab(),this.vb(),this.nG(t,e)):(this.nb().NI(t,this.Aw,e),this.Iw=0)}nG(t,e="stretch"){t=t.v_();if(!t)throw new Error("not a texture-backed render target");this.gb(t),this.Pb(e,t)}aG(t){this.fR<2||(this.nb().xI(t.p_()),this.Iw=0)}oG(t){this.rG(null),this.tS();var e=t.v_();e===this.ww&&(this.B_.bindTexture(this.B_.TEXTURE_2D,null),this.ww=null),e===this.GI&&(this.B_.activeTexture(this.B_.TEXTURE1),this.B_.bindTexture(this.B_.TEXTURE_2D,null),this.B_.activeTexture(this.B_.TEXTURE0),this.GI=null),t.xT()}async b_(e,i,s){this.tS();let t=this.Aw,r,h,n,a=(n=e?(r=e.eC(),h=e.cC(),e.p_()):(r=this.eC(),h=this.cC(),null),0),o=0,l=r,u=h;if(s){a=C33.dh(Math.floor(s.ml()),0,r-1),o=C33.dh(Math.floor(s.vl()),0,h-1);let t=s.width(),e=(t=0===t?r-a:C33.dh(Math.floor(t),0,r-a),s.height());e=0===e?h-o:C33.dh(Math.floor(e),0,h-o),l=t,u=e,o=h-(o+u)}let c=this.B_;c.bindFramebuffer(c.FRAMEBUFFER,n);e=()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.Aw=null,this.YE.d_=null,this.YE.C_=null,this.rG(t)};let f;if(!i&&2<=this.ET()){c.bindFramebuffer(c.READ_FRAMEBUFFER,n);var s=c.createBuffer(),i=l*u*4,d=c.PIXEL_PACK_BUFFER;c.bindBuffer(d,s),c.bufferData(d,i,c.STREAM_READ),c.readPixels(a,o,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(d,null),e();let t=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);await this.N_(()=>c.getSyncParameter(t,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(t),f=new ImageData(l,u),c.bindBuffer(d,s),c.getBufferSubData(d,0,new Uint8Array(f.data.buffer),0,i),c.bindBuffer(d,null),c.deleteBuffer(s)}else f=new ImageData(l,u),c.readPixels(a,o,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(f.data.buffer)),e();return f}lG(){this.qb(!0),this.nb().iA(),this.Iw=0,this.Lw=1}uG(){this.qb(!1),this.nb().rA(),this.Iw=0,this.Lw=2}cG(){return 2===this.Lw}fG(){this.qb(!0),this.nb().nA(),this.Iw=0,this.Lw=0}dG(t){this.CG()&&(this.nb().$I(t),this.Iw=0)}pG(t){this.CG()&&(this.nb().WI(t),this.Iw=0)}N_(e){var t=new Promise(t=>pendingPolls.add({resolve:t,kR:e}));return-1===pollRafId&&(pollRafId=self.requestAnimationFrame(CheckPendingPolls2)),t}oS(){return this.FC*this.$C*(this.qR.alpha?4:3)}lS(){let t=0;for(var e of C33.jp.XT.G_())e.v_()||(t+=e.WT());return t}uS(){let t=0;for(var e of C33.jp.uT.VT())t+=e.WT();return t}mG(){return this.zR}ET(){return this.fR}vG(){return"webgl"+this.ET()}IT(){return 2<=this.ET()}_T(){return this.xw}SG(){return this.Dw}gG(){return this.Nw}TG(){return 0!==this.Fw}_G(){return this.Fw}yG(){return this.$w}EG(){return this.Bw}IG(){var t;return 2<=this.ET()?"webgl2":(t=[],this.jw&&t.push("EXT_frag_depth"),this.Xw&&t.push("OES_standard_derivatives"),this.Yw&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none")}AG(){return this.kw}CG(){return!!this.dR}CR(){return this.dR}D_(){return this.Vw}OT(){return this.Hw}PT(){return this.qw}xR(t){this.Kw.add(t)}DR(t){this.Kw.delete(t)}RR(){return this.Jw}yT(){return this.B_}Zw(t){this.Q2([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}MG(){return this.fS()}}}{let C33=self.$e,DEFAULT_CTOR_OPTS={wG:null,bG:null,GG:null,getTime:null,OG:null};C33.jp.PG=class EffectChainManager{constructor(t){t=Object.assign({},DEFAULT_CTOR_OPTS,t),this.LG=t.wG,this.xG=t.bG,this.DG=t.GG,this.NG=t.getTime,this.FG=t.OG,this.$G=null,this.BG=new Set}kG(t){this.BG.add(t)}WG(t){this.BG.delete(t)}zS(){this.$G=null;for(var t of this.BG)t.zS()}VG(t){return this.LG?this.LG(t):[t.eC(),t.cC()]}Zb(t){return this.xG(t)}HG(t,e){this.DG(t,e)}UG(){return this.NG()}z0(t){this.FG(t)}jG(t,e,i){return e=Math.floor(e),i=Math.floor(i),!this.$G||this.$G.eC()===e&&this.$G.cC()===i||(t.c_(this.$G),this.$G=null),null===this.$G&&(this.$G=t.eG(null,{width:e,height:i,rT:"nearest",aT:!1})),this.$G}}}{let C33=self.$e,assert=self.assert,glMatrix=self.pe,mat42=glMatrix.ge,tempRect=C33.nh(C33.Rect),tempRect2=C33.nh(C33.Rect),tempRect3=C33.nh(C33.Rect),tempRect4=C33.nh(C33.Rect),tempMat4a=mat42.create(),tempMat4b=mat42.create(),DEFAULT_CTOR_OPTS={XG:null,YG:null,qG:null,zG:!1},DEFAULT_BUILDSTEPS_OPTS={KG:null,JG:!1,ZG:!1,QG:!1,t4:!1,e4:!1,i4:!1};C33.jp.s4=class EffectChain{constructor(t,e){e=Object.assign({},DEFAULT_CTOR_OPTS,e),this.hd=t,this.r4=e.XG,this.h4=e.YG,this.n4=e.qG,this.a4=null,this.o4=[],this.l4=[],this.u4=[],this.c4=!1,this.HS=0,this.f4=!1,this.d4=!1,this.C4=!1,this.m4=!1,this.v4=!1,this.S4=!1,this.JR=!1,this.g4=!1,this.T4=!1,this._4=!1,this.y4=!1,this.E4=!1,this.I4=0,this.A4=[null,null,null],this.M4=!!e.zG,this.R4=0,this.w4=0,this.b4=0,this.G4=0,this.O4=null,this.P4=null,this.L4=C33.nh(C33.Rect),this.x4=C33.nh(C33.Rect),this.D4=C33.nh(C33.Rect),this.N4=C33.nh(C33.Rect),this.F4=C33.nh(C33.Rect),this.B4=1,this.W4=1,this.V4=0,this.H4=0,this.U4=null,this.j4=null,this.X4=0,this.Y4=0,this.q4=!1,this.e_=mat42.create(),this.z4=mat42.create(),this.hd.kG(this)}ah(){this.hd.WG(this),C33.xn(this.u4),C33.xn(this.o4),C33.xn(this.l4),this.O4=null,this.P4=null,this.r4=null,this.h4=null,this.n4=null}zS(){this.c4=!0,C33.xn(this.u4),C33.xn(this.o4),C33.xn(this.l4)}K4(){return this.c4}J4(r,t){if(t=Object.assign({},DEFAULT_BUILDSTEPS_OPTS,t),C33.xn(this.u4),this.R4=0,this.w4=0,this.f4=!1,this.d4=!1,this.C4=!1,this.m4=!1,this.v4=!1,this.S4=!1,this.I4=0,this.E4=!!t.t4,this.y4=!!t.i4,this.c4=!1,C33.$n(this.o4,r),0!==r.length){if(t.KG){if(t.KG.length!==r.length)throw new Error("incorrect indexMap length");C33.$n(this.l4,t.KG)}else{C33.xn(this.l4);for(let t=0,e=r.length;t<e;++t)this.l4.push(t)}for(var e of r)this.R4+=e.bS(),this.w4+=e.GS(),e.DS()&&(this.f4=!0),e.FS()&&(this.d4=!0),e.NS()&&(this.C4=!0),e.OS()&&(this.m4=!0),e.kS()&&(this.v4=!0);this.S4=this.Z4(r[0].RS());var h=this.Q4(r[0],t),n=this.tO(r.at(-1),t);if(1!==r.length||h||n){this._4=!1;let s=0;h&&(this.I4=1,this.u4.push(C33.nh(C33.jp.s4.iO.eO,this,-1,1)),s=1);for(let e=0,i=r.length;e<i;++e)if(0!==e||h){let t=1===s?2:1;e!==i-1||n||(t=0),this.I4=Math.max(this.I4,t),this.u4.push(C33.nh(C33.jp.s4.iO.sO,this,s,t,e)),s=t}else this.I4=1,this.u4.push(C33.nh(C33.jp.s4.iO.rO,this,-1,1,e)),s=1;n&&this.u4.push(C33.nh(C33.jp.s4.iO.hO,this,s,0))}else this._4=!0}}Q4(t,e){return!!(e.JG||t.PS()||e.QG&&!t.xS()||t.FS()&&!this.y4||0!==this.R4||0!==this.w4)||(t.RS().aS()?t.NS()&&(e.e4||e.t4)||t.$S()&&e.t4:t.NS()&&!this.S4&&e.e4)}tO(t,e){return!!e.ZG||(t.RS().aS()?t.NS()||t.OS():(t.NS()||t.OS())&&this.nO())}Z4(t){return t.v2()&&this.C4&&!this.m4}aO(t,e,i){t.v2()&&null===e&&(e=t.GetBackbufferRenderTarget()),this.U4=e,this.O4=i.oO||null,this.P4=i.contextObject||null,this.HS=i.lO||0,this.B4=i.devicePixelRatio||1,this.W4=i.uO||1,this.V4=i.cO||0,this.H4="number"==typeof i.time?i.time:this.hd.UG(),this.JR=!1,t.lb(),this.f4&&this.fO();let s=!1;if(this.dO()&&(this.CO(t,i),s=!0,this.j4=this.hd.jG(t,this.b4,this.G4),tempRect._(this.x4),tempRect.$l(),t.v2()&&t._MaybeDoPendingClearRenderPass(this.U4),t.CopyTextureToTexture(this.U4.v_(),this.j4,tempRect.ml(),tempRect.vl(),tempRect.width(),tempRect.height())),this._4)this.pO(t,i);else if(s||this.CO(t,i),0!==this.D4.width()||0!==this.D4.height()){t.Eb(),t.vb(),t.lv(0),t.cv(0),this.a4=i.mO||null,this.X4=i.vO||0,this.Y4=i.SO||0,this.q4=!!i.gO,this.TO(t),this.A4[0]=e,this.A4[1]=1<=this.I4?this._O():null,this.A4[2]=2===this.I4?this._O():null;for(var r of this.u4){var h=this.yO(r.EO()),n=this.yO(r.IO());t.v2()?r.AO(t,h,n):r.MO(t,h,n)}t.gb(null),this.A4[1]&&this.RO(this.A4[1]),this.A4[2]&&this.RO(this.A4[2]),this.A4.fill(null),this.wO(t),this.U4=null,this.j4=null,this.O4=null,this.P4=null,this.a4=null}}CO(t,e){var[i,s]=this.hd.VG(t);this.bO(t,i,s),this.GO(e)}bO(t,e,i){if(e<=0||i<=0)throw new Error("invalid draw size");this.b4===e&&this.G4===i||this.OO(t,e,i,0,0,this.e_,this.z4),this.b4=e,this.G4=i}OO(t,e,i,s,r,h,n){s=e/2+s,r=i/2+r,t.m2(h,e/i),h=t.T2(s,r,t.e2(i),s,r,0,i);mat42._(n,h)}GO(t){this.L4._(t.PO),t.LO?this.x4._(t.LO):this.x4.set(0,0,this.b4,this.G4),this.D4._(this.x4),this.D4.It(this.b4,this.G4);t=this.W4*this.B4;this.x4.bl(this.R4*t,this.w4*t),this.F4._(this.x4),this.F4.It(this.b4,this.G4),this.x4.Bl(0,0,this.b4,this.G4),this.N4._(this.x4),this.N4.It(this.b4,this.G4)}TO(t){var e;this.g4=t.zb(),this.T4=t.cG(),this.y4?(t.qb(!1),this.d4&&t.Kb(!0)):(tempRect._(this.x4),t.aS()?(e=this.W4*this.B4,tempRect.bl(Math.max(this.R4,1)*e,Math.max(this.w4,1)*e),tempRect.$l(),tempRect.dh(0,0,this.b4,this.G4)):tempRect.$l(),t.Jb(tempRect.ml(),tempRect.vl(),tempRect.width(),tempRect.height(),this.G4))}xO(t){t.vb(),this.y4||(this.T4&&t.fG(),t.qb(!1),this.d4&&t.Kb(!0)),t.v2()&&t.SetNormalizedCoordsProgramVariant(!0)}wO(t){t.Kb(!1),this.T4&&t.uG(),t.qb(this.g4),this.y4||t.Qb(),t.v2()&&t.SetNormalizedCoordsProgramVariant(!1),this.JR=t.ub()}DO(){this.F4.dh(0,0,1,1)}yO(t){return t<0?null:this.A4[t]}_O(){return this.hd.Zb(this)}NO(){return this.U4}RO(t){this.hd.HG(t,this)}FO(t){return this.o4[t]}$O(t){this.a4?this.a4(this,t,()=>this.r4(t,this)):this.r4(t,this),this._4||this.xO(t)}BO(t){var e;return!!this.y4||0===this.X4&&0===this.Y4&&([t,e]=t.Lb(t.Zb()),t===this.b4)&&e===this.G4}kO(t,e){let i=this.e_,s=this.z4;var r;e&&!this.BO(t)&&(i=tempMat4a,s=tempMat4b,[e,r]=t.Lb(t.Zb()),this.OO(t,e,r,this.X4,this.Y4,i,s),this.y4||t.Qb()),t.ib(i),t.ob(s)}fO(){this.hd.z0(this)}WO(t,e){return this.n4(this.l4[t],e)}VO(t,e){let i=this.F4,s=this.N4,r=this.D4;t.aS()&&(tempRect2._(i),tempRect2.Pl(1),i=tempRect2,tempRect3._(s),tempRect3.Pl(1),s=tempRect3,tempRect4._(r),tempRect4.Pl(1),r=tempRect4),this.HO(t,e,s,r,i,1/this.b4,1/this.G4)}UO(t,e){let s=this.N4,r=this.D4,h=1/this.b4,n=1/this.G4;if(this.h4){let{jO:t,XO:e,YO:i}=this.h4(this.O4);t||(tempRect.set(0,0,0,0),t=tempRect),e=e||this.b4,i=i||this.G4,s=t,r=t,h=1/e,n=1/i}else t.aS()&&(tempRect3._(s),tempRect3.Pl(1),s=tempRect3,tempRect4._(r),tempRect4.Pl(1),r=tempRect4);let i=this.F4;t.aS()&&((i=tempRect2)._(this.F4),i.Pl(1)),this.HO(t,e,s,r,i,h,n),t.v2()&&this.v4&&t.SetProgramParameter_IsSrcTexRotated(this.E4)}qO(t){return this.C4?t.v2()?this.dO()?this.j4:this.U4.v_():this.U4:null}HO(t,e,i,s,r,h,n){t.Hb(this.qO(t),r,i,s,this.L4,h,n,this.B4,this.W4,this.V4,this.H4),t.Ub(this.WO(e,t))}pO(t,e){var i,s,r=this.o4[0],h=t.zb(),n=r.FS();n&&(t.qb(!1),t.Kb(!0),this.F4.set(0,0,1,1),this.D4.set(0,0,1,1)),t.R2(r),t.YS(this.HS),t.rG(this.U4);let a=0,o=1;this.D4.set(0,0,1,1),o=r.$S()&&this.h4?({jO:r,XO:s,YO:i}=this.h4(this.O4),r&&this.D4._(r),a=Number.isFinite(s)?1/s:0,Number.isFinite(i)?1/i:0):([r,s]=this.hd.VG(t),a=1/r,1/s),e.PO?this.L4._(e.PO):this.L4.set(0,0,0,0),t.Hb(this.qO(t),this.F4,this.D4,this.D4,this.L4,a,o,this.B4,this.W4,this.V4,this.H4),t.Ub(this.WO(0,t)),t.v2()&&this.v4&&t.SetProgramParameter_IsSrcTexRotated(this.E4),t.lv(0),this.$O(t),n&&(t.Kb(!1),t.qb(h))}dO(){return this.S4}nO(){return!this.S4}zO(){return this.C4}KO(){return!!this._4&&!this.dO()}JO(){return this.y4}ZO(){return this.O4}QO(){return this.P4}tP(){return this.HS}eP(){return this.q4}ub(){return this.JR}iP(){return this.x4}sP(){return this.N4}rP(){return this.M4}async hP(t,e,i){}}}{let C33=self.$e;C33.jp.s4.iO=class EffectChainStep{constructor(t,e,i,s=-1){this.nP=t,this.aP=e,this.oP=i,this.$p=s}lP(){return this.nP}EO(){return this.aP}IO(){return this.oP}uP(){return this.$p}Uy(){return this.lP().FO(this.uP())}MO(t,e,i){}AO(t,e,i){}}}{let C33=self.$e;C33.jp.s4.iO.eO=class PreDrawStep extends C33.jp.s4.iO{constructor(t,e,i,s){super(t,e,i,s)}MO(t,e,i){var s=this.lP();t.Eb(),t.M2(),t.rG(i,s.eP()),t.jb(0,0,0,0),s.$O(t),s.DO()}AO(t,e,i){var s=this.lP();t.Eb(),t.M2(),t.rG(i,!1),t.jb(0,0,0,0),s.$O(t),s.DO()}}}{let C33=self.$e,tempRect=C33.nh(C33.Rect),tempQuad=C33.nh(C33.Xl);C33.jp.s4.iO.hO=class PostDrawStep extends C33.jp.s4.iO{constructor(t,e,i,s){super(t,e,i,s)}MO(t,e,i){var s=this.lP();t.M2(),t.rG(i),s.kO(t,!0),t.YS(s.tP()),t.gb(e.v_()),tempQuad.du(s.iP()),tempRect._(s.sP()),tempRect.Pl(1),t.Iv(tempQuad,tempRect),s.rP()&&t.aG(e)}AO(t,e,i){var s=this.lP();t.M2(),t.rG(i,!1),s.BO(t)?tempQuad.du(s.sP()):(t.SetNormalizedCoordsProgramVariant(!1),s.kO(t,!0),tempQuad.du(s.iP())),t.SetBackTexture(null),t.YS(s.tP()),t.gb(e.v_()),s.JO()?t.Pb():t.Iv(tempQuad,s.sP())}}}{let C33=self.$e;C33.jp.s4.iO.rO=class FirstBounceStep extends C33.jp.s4.iO{constructor(t,e,i,s){super(t,e,i,s)}MO(t,e,i){var s=this.lP();t.rG(i,s.eP()),t.jb(0,0,0,0),t.Ab(),t.R2(this.Uy()),s.UO(t,this.uP()),s.$O(t),s.DO()}AO(t,e,i){var s=this.lP();t.rG(i,!1),t.jb(0,0,0,0),t.Ab(),t.R2(this.Uy()),s.UO(t,this.uP()),s.$O(t),s.DO()}}}{let C33=self.$e,tempRect=C33.nh(C33.Rect),tempQuad=C33.nh(C33.Xl);C33.jp.s4.iO.sO=class BounceStep extends C33.jp.s4.iO{constructor(t,e,i,s){super(t,e,i,s)}MO(t,e,i){var s=this.lP(),i=(t.rG(i),0===this.IO());i?t.YS(s.tP()):(t.jb(0,0,0,0),t.Ab()),t.R2(this.Uy()),s.VO(t,this.uP()),t.gb(e.v_()),s.kO(t,i),tempQuad.du(s.iP()),tempRect._(s.sP()),tempRect.Pl(1),t.Iv(tempQuad,tempRect),s.rP()&&t.aG(e)}AO(t,e,i){var s=this.lP(),i=(t.rG(i,!1),0===this.IO());i?(t.YS(s.tP()),t.SetBackTexture(null),s.BO(t)?tempQuad.du(s.sP()):(t.SetNormalizedCoordsProgramVariant(!1),s.kO(t,!0),tempQuad.du(s.iP()))):(t.jb(0,0,0,0),t.Ab(),tempQuad.du(s.sP())),t.R2(this.Uy()),s.VO(t,this.uP()),t.gb(e.v_()),s.JO()?t.Pb():t.Iv(tempQuad,s.sP())}}}{let SortZOrderList2=function(t,e){var i=t[0]-e[0];return 0!=i?i:t[1]-e[1]},C33=(SortZOrderList=SortZOrderList2,self.$e),C3X=self.qe,runtime=null,keysDownByKey=new Set,tempZOrderList=[],tempInstances=[],didWarnInAlertPolyfill=!1,didWarnFpsDeprecated=!1,VALID_FRAMERATE_MODES=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.cP=class IRuntime{constructor(t){runtime=t,Object.defineProperties(this,{fP:{value:runtime.CP().dP(),writable:!1},pP:{value:runtime.vP().mP(),writable:!1},SP:{value:{},writable:!1},gP:{value:{},writable:!1},TP:{value:runtime._P(),writable:!1},yP:{value:runtime.EP(),writable:!1},storage:{value:new self.IP(runtime),writable:!1},isInWorker:{value:runtime.AP(),writable:!1},MP:{value:runtime.RP(),writable:!1},wP:{value:runtime.bP(),writable:!1},rT:{value:runtime.GP(),writable:!1},OP:{value:runtime.PP(),writable:!1},LP:{value:new self.xP(t),writable:!1}}),runtime.DP().addEventListener("keydown",t=>{keysDownByKey.has(t.key)?t.stopPropagation():keysDownByKey.add(t.key)}),runtime.DP().addEventListener("keyup",t=>keysDownByKey.delete(t.key)),runtime.x3().addEventListener("window-blur",()=>keysDownByKey.clear()),runtime.AP()&&(self.alert=t=>(didWarnInAlertPolyfill||(didWarnInAlertPolyfill=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}NP(t){Object.defineProperties(this.SP,t)}FP(t){Object.defineProperties(this.gP,t)}addEventListener(t,e){runtime.DP().addEventListener(t,e)}removeEventListener(t,e){runtime.DP().removeEventListener(t,e)}$P(t,...e){C3X.As(t);var i=runtime.BP(),s=i.kP(t);if(!s)throw new Error(`cannot find function name '${t}'`);if(!s.Uu())return s.WP();if(e.length<s.VP())throw new Error(`not enough function parameters passed for '${t}' (${e.length} passed, ${s.VP()} expected)`);t=s.HP();let r=t.UP();var h=i.jP();if(h){r=r.slice(0);var n,a,o=new Set(r);for(n of h.UP())o.has(n)||(r.push(n),o.add(n));for(a of i.XP())o.has(a)||(r.push(a),o.add(a))}return t.YP(r,s.qP(),s.zP(),s.WP(),...e)}KP(t){var e=runtime.ZP().JP();if(!e)throw new Error("not in a function which returns a value");switch(e.QP()){case 1:"number"==typeof t&&e.tL(t);break;case 2:"string"==typeof t&&e.tL(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||e.tL(t)}}signal(t){C3X.As(t),runtime.BP().eL(t)}iL(t){return C3X.As(t),runtime.BP().sL(t)}rL(){return[runtime.RP(),runtime.bP()]}get isSuspended(){return runtime.hL()}get nL(){return runtime.aL()}get oL(){return runtime.lL()}get uL(){return runtime.cL()}get fL(){return runtime.dL()}get CL(){return runtime.pL()}set CL(t){C3X._s(t),runtime.mL(t)}get fps(){return didWarnFpsDeprecated||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),didWarnFpsDeprecated=!0),runtime.vL()}get framesPerSecond(){return runtime.vL()}get SL(){return runtime.gL()}get TL(){return runtime._L()}get yL(){return runtime.EL()}get IL(){return runtime.AL()}set IL(t){if(!VALID_FRAMERATE_MODES.has(t))throw new Error("invalid framerate mode");runtime.ML(t)}get RL(){return runtime.wL()}set RL(t){C3X._s(t),runtime.bL(t)}get GL(){return runtime.OL()}set GL(t){runtime.PL(t)}random(){return runtime.LL()}get layout(){var t=runtime.xL();if(t)return t.DL();throw new Error("no layout is running - make sure a layout is loaded before accessing")}NL(t){var e=runtime.FL();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=e.$L(t))return i.DL();throw new Error("invalid layout")}BL(){return runtime.FL().kL().map(t=>t.DL())}WL(t){var e=runtime.FL();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(i=e.$L(t)))throw new Error("invalid layout");e.VL()||e.HL(i)}get keyboard(){var t=runtime.UL().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get jL(){var t=runtime.UL().jL;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get XL(){var t=runtime.UL().XL;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get YL(){var t=runtime.UL().YL;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}get qL(){var t=runtime.UL().qL;if(t)return t;throw new Error("runtime.platformInfo used but Platform Info object missing - add it to your project first")}zL(t,e){C3X.As(t),C3X.As(e),runtime.KL(t,e)}JL(t){C3X._s(t);t=runtime.ZL(t);return t?t.QL():null}t5(t,s){C3X.Ys(s);var e,r=runtime.e5();for(e of t){var i=runtime.i5(e),h=i.s5();tempZOrderList.push([h.r5().uP(),h.h5()]),tempInstances.push(i)}if(0!==tempZOrderList.length){tempZOrderList.sort(SortZOrderList2),tempInstances.sort((t,e)=>s(t.QL(),e.QL()));let i=!1;for(let t=0,e=tempZOrderList.length;t<e;++t){var n=tempInstances[t],a=r.n5(tempZOrderList[t][0]),o=tempZOrderList[t][1],l=a.a5();l[o]!==n&&((l[o]=n).s5().o5(a,!0),a.l5(n),i=!0)}i&&runtime.u5(),C33.xn(tempZOrderList),C33.xn(tempInstances)}}async c5(t,e){var i=new MessageChannel,s=i.port1,i=i.port2;return await runtime.f5("runtime","script-create-worker",{url:t,opts:e,port2:i},[i]),s}alert(t){return runtime.f5("runtime","alert",{message:t+(runtime.AP()?" [via Web Worker]":"")})}d5(t){return C3X._s(t),runtime.C5(t)}p5(t){runtime.m5(t)}}}{let C33=self.$e,C3X=self.qe,assetManager=null;self.v5=class IAssetManager{constructor(t){assetManager=t,Object.defineProperties(this,{S5:{value:assetManager.g5("audio/webm; codecs=opus"),writable:!1}})}T5(t){t=self.y5._5(t);if(!t)throw new Error("invalid IImageInfo");t.E5(assetManager.I5())}A5(t){return assetManager.pa(t)}M5(t){return assetManager.ma(t)}R5(t){return assetManager.Sa(t)}w5(t){return assetManager.ga(t)}b5(t){return assetManager.G5(t)}O5(t){return"flat"===assetManager.P5()&&C33.fa(t)&&(t=t.toLowerCase()),assetManager.L5(t)}get x5(){return assetManager.D5()}async N5(t,e){if(this.S5)throw new Error("decodeWebMOpus(): not supported because WebM Opus is supported by the platform");e=await assetManager.I5().F5(e),e=new Float32Array(e),t=t.createBuffer(1,e.length,48e3);return t.getChannelData(0).set(e),t}B5(...t){return assetManager.k5(...t)}W5(t){return assetManager.V5(t)}H5(t){return assetManager.U5(t)}}}{let C33=self.$e,C3X=self.qe,collisionEngine=null;self.j5=class ICollisionEngine{constructor(t){collisionEngine=t,Object.defineProperties(this,{runtime:{value:collisionEngine.I5(),writable:!1}})}X5(t,e){var i=collisionEngine.I5(),t=i.i5(t),i=i.i5(e);return collisionEngine.Y5(t,i)}q5(t,e){var i,s=collisionEngine.I5(),r=s.i5(t);for(i of e){var h=s.i5(i);if(collisionEngine.Y5(r,h))return i}return null}z5(t){t=collisionEngine.I5().i5(t),t=collisionEngine.K5(t);return t?t.QL():null}J5(t,e){if(C3X._s(t),C3X._s(e),t=Math.floor(t),e=Math.floor(e),t<=0||e<=0)throw new Error("invalid cell size");collisionEngine.Z5(t,e)}Q5(){return collisionEngine.tx()}ix(t,e){let i=collisionEngine.I5(),s;s=Array.isArray(t)?t.map(t=>i.hx(t)):[i.hx(t)];t=C33.Rect.Cl(e),e=[];return collisionEngine.nx(null,s,t,e),e.map(t=>t.QL())}}}{let C33=self.$e,C3X=self.qe;self.IP=class IStorage{constructor(t){this.ox=t.lx()}getItem(t){return C3X.As(t),this.ox.getItem(t)}setItem(t,e){return C3X.As(t),this.ox.setItem(t,e)}removeItem(t){return C3X.As(t),this.ox.removeItem(t)}clear(){return this.ox.clear()}keys(){return this.ox.keys()}}}{let C33=self.$e,C3X=self.qe,map=new WeakMap,internalApiToken=C33.Be();self.ux=class IPlugin{constructor(){var t=C33.mx.Cx(internalApiToken);map.set(this,t),Object.defineProperties(this,{runtime:{value:t.I5().vx(),writable:!1},Sx:{value:t.gx(),writable:!1},Tx:{value:t._x(),writable:!1},yx:{value:t.Ex(),writable:!1},Ix:{value:t.Ax(),writable:!1},Mx:{value:t.Rx(),writable:!1},wx:{value:t.bx(),writable:!1},Gx:{value:t.Ox(),writable:!1},Px:{value:t.Lx(),writable:!1}})}static xx(t){return(t=t&&C33.mx.Dx(t))?t.Nx():null}Fx(){return map.get(this).Bx().$x()}kx(){return map.get(this).Wx().QL()}}}{let C33=self.$e,C3X=self.qe,map=new WeakMap,internalApiToken=C33.Be();self.Vx=class IObjectClass{constructor(){var t=C33.mx.Cx(internalApiToken);map.set(this,t),Object.defineProperties(this,{name:{value:t.jc(),writable:!1},runtime:{value:t.I5().vx(),writable:!1},Hx:{value:t.Ux().Nx(),writable:!1}}),t.I5().jx(this,t)}addEventListener(t,e){C3X.As(t),C3X.Ys(e),map.get(this).DP().addEventListener(t,e)}removeEventListener(t,e){C3X.As(t),C3X.Ys(e),map.get(this).DP().removeEventListener(t,e)}Xx(){return[...this.instances()]}Yx(){return C33.first(this.instances())}qx(){return[...this.zx()]}Kx(){return C33.first(this.zx())}Jx(t){var e=map.get(this),t=e.I5().Zx(t),e=e.Qx(t);return e?e.QL():null}*instances(){for(var t of map.get(this).tD())yield t.QL()}*zx(){for(var t of map.get(this).iD().eD())yield t.QL()}sD(t){if(C3X.Ys(t),0<map.get(this).rD())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");map.get(this).hD(t)}xi(t,e,i,s,r){if(C3X.Cs(e),C3X.Cs(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");var h=map.get(this),n=h.I5(),t=n.xL().r5(t);if(t)return h=n.nD(h,t,e,i,s,r),s&&t.aD(h),(e=n.BP()).oD(!0),h.lD(),e.oD(!1),e.uD()||n.FL().cD()||n.fD(),h.QL();throw new Error("invalid layer")}}}{let C33=self.$e,C3X=self.qe,map=new WeakMap,VALID_WHERE_STRINGS=["above","below","top-sublayer","bottom-sublayer"];self.dD=class ILayout{constructor(t){map.set(this,t);var e=[],i=t.CD(),s=i.pD().length;for(let t=0;t<s;++t)e.push(new self.mD(i,t));Object.defineProperties(this,{name:{value:t.jc(),writable:!1},index:{value:t.uP(),writable:!1},vD:{value:e,writable:!1}})}addEventListener(t,e){C3X.As(t),C3X.Ys(e),map.get(this).DP().addEventListener(t,e)}removeEventListener(t,e){C3X.As(t),C3X.Ys(e),map.get(this).DP().removeEventListener(t,e)}get width(){return map.get(this).eC()}set width(t){C3X._s(t),map.get(this).oC(t)}get height(){return map.get(this).cC()}set height(t){C3X._s(t),map.get(this).iC(t)}SD(t,e){C3X._s(t),C3X._s(e);var i=map.get(this);i.oC(t),i.iC(e)}getSize(){var t=map.get(this);return[t.eC(),t.cC()]}set scale(t){C3X._s(t),map.get(this).gD(t)}get scale(){return map.get(this).TD()}set angle(t){C3X._s(t),map.get(this)._D(t)}get angle(){return map.get(this).yD()}set scrollX(t){C3X.Cs(t),map.get(this).ED(t)}get scrollX(){return map.get(this).ID()}set scrollY(t){C3X.Cs(t),map.get(this).AD(t)}get scrollY(){return map.get(this).MD()}scrollTo(t,e){C3X.Cs(t),C3X.Cs(e);var i=map.get(this);i.ED(t),i.AD(e)}RD(){var t=map.get(this);return[t.ID(),t.MD()]}wD(t){var e=map.get(this);let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(i=e.r5(t))?i.bD():null}GD(){return map.get(this).OD().map(t=>t.bD())}*PD(){for(var t of map.get(this).PD())yield t.bD()}LD(t,e,i){var s=map.get(this),r=self.xD,r=(C3X.As(t),C3X.er(e,r),e?s.I5().DD(e):null),e=VALID_WHERE_STRINGS.indexOf(i);if(e<0)throw new Error("invalid location");s.ND(t,r,e)}FD(t,e,i){var s=map.get(this),r=s.I5(),h=self.xD,t=(C3X.tr(t,h),r.DD(t));if(!t)throw new Error("invalid layer");C3X.er(e,h);h=e?r.DD(e):null,r=VALID_WHERE_STRINGS.indexOf(i);if(r<0)throw new Error("invalid location");s.$D(t,h,r)}BD(t){var e=map.get(this),i=self.xD,i=(C3X.tr(t,i),e.I5().DD(t));if(!i)throw new Error("invalid layer");t=i.I5();e.kD(i),t.BP().uD()||t.fD()}WD(){var t=map.get(this),e=t.I5();t.VD(),e.BP().uD()||e.fD()}HD(t,e){C3X._s(t),C3X._s(e),map.get(this).UD(t,e)}jD(){return map.get(this).XD()}set Y(t){C3X.As(t);var e=map.get(this);if("perspective"===t)e.YD();else{if("orthographic"!==t)throw new Error("invalid projection");e.qD()}}get Y(){return map.get(this).zD()?"orthographic":"perspective"}}}{let C33=self.$e,C3X=self.qe,map=new WeakMap,BLEND_MODE_TO_INDEX=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),INDEX_TO_BLEND_MODE=new Map([...BLEND_MODE_TO_INDEX.entries()].map(t=>[t[1],t[0]])),tempColor=C33.nh(C33.Fa);self.xD=class ILayer{constructor(t){map.set(this,t);var e=[],i=t.CD(),s=i.pD().length;for(let t=0;t<s;++t)e.push(new self.mD(i,t));Object.defineProperties(this,{name:{value:t.jc(),writable:!1},layout:{value:t.$L().DL(),writable:!1},vD:{value:e,writable:!1}}),t.I5().jx(this,t)}get KD(){var t=map.get(this).JD();return t?t.bD():null}*ZD(){for(var t of map.get(this).ZD())yield t.bD()}*QD(){for(var t of map.get(this).tN())yield t.bD()}*eN(){for(var t of map.get(this).tN())for(var e of t.iN())yield e.bD()}get index(){return map.get(this).uP()}get isVisible(){return map.get(this).sN()}set isVisible(t){map.get(this).rN(t)}get hN(){return map.get(this).nN()}get aN(){return map.get(this).oN()}set aN(t){map.get(this).lN(t)}get uN(){return map.get(this).cN()}set uN(t){map.get(this).fN(!!t)}get dN(){return map.get(this).CN()}get opacity(){return map.get(this).Cb()}set opacity(t){t=C33.dh(+t,0,1),isNaN(t)||map.get(this).mb(t)}set scale(t){C3X._s(t),map.get(this).pN(t)}get scale(){return map.get(this).mN()}set scaleRate(t){C3X._s(t),map.get(this).vN(t)}get scaleRate(){return map.get(this).SN()}set angle(t){C3X._s(t),map.get(this)._D(t)}get angle(){return map.get(this).gN()}set parallaxX(t){C3X._s(t),map.get(this).TN(t)}get parallaxX(){return map.get(this)._N()}set parallaxY(t){C3X._s(t),map.get(this).yN(t)}get parallaxY(){return map.get(this).EN()}set IN(t){C3X._s(t),map.get(this).ug(t)}get IN(){return map.get(this).lg()}set AN(t){map.get(this).MN(t)}get AN(){return map.get(this).RN()}set wN(t){map.get(this).bN(t)}get wN(){return map.get(this).GN()}set lO(t){C3X.As(t);t=BLEND_MODE_TO_INDEX.get(t);if("number"!=typeof t)throw new Error("invalid blend mode");map.get(this).YS(t)}get lO(){return INDEX_TO_BLEND_MODE.get(map.get(this).ON())}set backgroundColor(t){if(C3X.ks(t),t.length<3)throw new Error("expected 3 elements");tempColor.Ha(t[0],t[1],t[2]);var t=map.get(this),e=t.PN();e.no(tempColor)||(e.Ka(tempColor),t.I5().u5())}get backgroundColor(){var t=map.get(this).PN();return[t.Ja(),t.Za(),t.Qa()]}set scrollX(t){C3X.Cs(t);var e=map.get(this);e.LN(!0),e.ED(t)}get scrollX(){return map.get(this).ID()}set scrollY(t){C3X.Cs(t);var e=map.get(this);e.LN(!0),e.AD(t)}get scrollY(){return map.get(this).MD()}scrollTo(t,e){C3X.Cs(t),C3X.Cs(e);var i=map.get(this);i.LN(!0),i.ED(t),i.AD(e)}RD(){var t=map.get(this);return[t.ID(),t.MD()]}xN(){map.get(this).LN(!1)}getViewport(){return map.get(this).DN().Tl()}NN(t,e,i=0){C3X.Cs(t),C3X.Cs(e),C3X.Cs(i);var s=map.get(this),r=s.I5();return s.FN(t-r.$N(),e-r.BN(),i)}kN(t,e,i=0){C3X.Cs(t),C3X.Cs(e),C3X.Cs(i);var s=map.get(this),r=s.I5(),[s,t]=s.WN(t,e,i);return[s+r.$N(),t+r.BN()]}VN(t,e,i=0){return C3X.Cs(t),C3X.Cs(e),C3X.Cs(i),map.get(this).HN(t,e,i)}UN(t,e,i=0){return C3X.Cs(t),C3X.Cs(e),C3X.Cs(i),map.get(this).jN(t,e,i)}get XN(){return map.get(this).YN()}}}{let GetDispatcher2=function(t){var e=dispatchers.get(t);return e||(e=C33.nh(C33.Event.x3),dispatchers.set(t,e)),e},C33=(GetDispatcher=GetDispatcher2,self.$e),C3X=self.qe,map=new WeakMap,dispatchers=new WeakMap,internalApiToken=C33.Be();self.qN=class IInstance{constructor(){var t=C33.mx.Cx(internalApiToken),e=(map.set(this,t),{runtime:{value:t.I5().vx(),writable:!1},zN:{value:t.KN().$x(),writable:!1},Hx:{value:t.Ux().Nx(),writable:!1}});t.JN(e),t.ZN(e),Object.defineProperties(this,e),t.I5().jx(this,t)}static QN(){return C33.mx.tF()}eF(){var t=dispatchers.get(this);t&&(t.ah(),dispatchers.delete(this)),map.delete(this)}addEventListener(t,e,i){C3X.As(t),C3X.Ys(e),GetDispatcher2(this).addEventListener(t,e,i)}removeEventListener(t,e,i){C3X.As(t),C3X.Ys(e),GetDispatcher2(this).removeEventListener(t,e,i)}dispatchEvent(t){GetDispatcher2(this).dispatchEvent(t)}iF(){var t=map.get(this),e=t.I5();e.sF(t),e.BP().uD()||e.FL().cD()||e.BP().rF()||e.fD()}hF(){var t=map.get(this).nF();return t?t.map(t=>t.QL()):[]}*aF(){var t=map.get(this);if(t.oF())for(var e of t.lF())yield e.QL()}get uid(){return map.get(this).uF()}get cF(){return map.get(this).fF()}set CL(t){C3X._s(t),map.get(this).mL(t)}get CL(){return map.get(this).dF()}CF(){map.get(this).pF()}get nL(){var t=map.get(this);return t.I5().aL(t)}mF(...t){C3X.ks(t);var t=new Set(t),e=map.get(this).vF();return t.ls(e)}SF(t){C3X.tr(t,Set),map.get(this).gF(t)}TF(){return new Set(map.get(this).vF())}signal(t){C3X.As(t);var e=map.get(this);e.I5().BP()._F(e,t)}iL(t){C3X.As(t);var e=map.get(this);return e.I5().BP().yF(e,t)}}}{let C33=self.$e,C3X=self.qe,map=new WeakMap,internalApiToken=C33.Be();self.EF=class ISDKInstanceBase extends self.qN{constructor(t){super(),map.set(this,C33.mx.Cx(internalApiToken)),this.IF=!1,this.AF=null,this.MF=!1,this.RF=null,this.wF=t?.domComponentId,this.bF=t?.wrapperComponentId}eF(){super.eF(),map.delete(this)}GF(){return C33.mx.OF()}PF(t){var e=map.get(this);e.I5().LF(t,e)}xF(t){var e=map.get(this);return e.I5().DF(t,e)}NF(t,e){if(C3X.As(t),C3X.Ys(e),!this.wF)throw new Error("no DOM component id set");map.get(this).I5().FF(this.wF,t,e)}$F(t){C3X.ks(t);for(var[e,i]of t)this.NF(e,i)}BF(t,e){if(C3X.As(t),!this.wF)throw new Error("no DOM component id set");map.get(this).I5().i3(this.wF,t,e)}kF(t,e){if(C3X.As(t),this.wF)return map.get(this).I5().f5(this.wF,t,e);throw new Error("no DOM component id set")}WF(t,e){if(!map.get(this).I5().AP())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.wF,handler:t,data:e,responseId:null});this.BF(t,e)}VF(t){var e;this.IF!==(t=!!t)&&(this.IF=t,e=map.get(this).I5(),t?(this.AF||(this.AF=()=>this.HF()),e.x3().addEventListener("tick",this.AF)):e.x3().removeEventListener("tick",this.AF))}UF(){return this.IF}HF(){}jF(t){var e;this.MF!==(t=!!t)&&(this.MF=t,e=map.get(this).I5(),t?(this.RF||(this.RF=()=>this.XF()),e.x3().addEventListener("tick2",this.RF)):e.x3().removeEventListener("tick2",this.RF))}YF(){return this.MF}XF(){}qF(){return[]}zF(){return null}KF(t){}JF(){if(this.bF)return map.get(this).I5().ZF(this.bF);throw new Error("no wrapper component id set")}QF(t,e){if(C3X.As(t),C3X.Ys(e),!this.bF)throw new Error("no wrapper component id set");map.get(this).I5().t7(this.bF,t,e)}e7(t){C3X.ks(t);for(var[e,i]of t)this.QF(e,i)}i7(t,e){if(!this.bF)throw new Error("no wrapper component id set");this.runtime.s7(this.bF,t,e)}r7(t,e){if(this.bF)return this.runtime.h7(this.bF,t,e);throw new Error("no wrapper component id set")}}}{let MakeIWorldInstanceClass2=function(t){return class s extends t{constructor(t){super(t);var t=C33.mx.Cx(internalApiToken),e=(map.set(this,t),[]),t=t.s5(),i=t.n7();if(i){var s=t.KN().CD().pD().length;for(let t=0;t<s;++t)e.push(new self.mD(i,t))}Object.defineProperties(this,{vD:{value:e,writable:!1}})}get layout(){return map.get(this).s5().$L().DL()}get a7(){return map.get(this).s5().r5().bD()}get x(){return map.get(this).s5().rg()}set x(t){t=+t;var e=map.get(this).s5();isNaN(t)||e.rg()===t||(e.hg(t),e.o7())}get y(){return map.get(this).s5().ag()}set y(t){t=+t;var e=map.get(this).s5();isNaN(t)||e.ag()===t||(e.og(t),e.o7())}setPosition(t,e){t=+t,e=+e;var i=map.get(this).s5();isNaN(t)||isNaN(e)||i.rg()===t&&i.ag()===e||(i.l7(t,e),i.o7())}u7(){var t=map.get(this).s5();return[t.rg(),t.ag()]}c7(t,e){var i;t=+t,e=+e,isNaN(t)||isNaN(e)||0===t&&0===e||((i=map.get(this).s5()).f7(t,e),i.o7())}get IN(){return map.get(this).s5().lg()}set IN(t){t=+t;var e=map.get(this),i=e.s5();isNaN(t)||i.lg()===t||(i.ug(t),e.I5().u5())}get d7(){return map.get(this).s5().C7()}get width(){return map.get(this).s5().eC()}set width(t){t=+t;var e=map.get(this).s5();isNaN(t)||e.eC()===t||(e.oC(t),e.o7())}get height(){return map.get(this).s5().cC()}set height(t){t=+t;var e=map.get(this).s5();isNaN(t)||e.cC()===t||(e.iC(t),e.o7())}SD(t,e){t=+t,e=+e;var i=map.get(this).s5();isNaN(t)||isNaN(e)||i.eC()===t&&i.cC()===e||(i.LM(t,e),i.o7())}getSize(){var t=map.get(this).s5();return[t.eC(),t.cC()]}get angle(){return map.get(this).s5().yD()}set angle(t){t=C33.Ch(+t);var e=map.get(this).s5();isNaN(t)||e.yD()===t||(e._D(t),e.o7())}get p7(){return C33.mh(this.angle)}set p7(t){this.angle=C33.ph(t)}mu(){return map.get(this).s5().m7().Tl()}v7(){return map.get(this).s5().S7().uu()}g7(){return map.get(this).s5().T7()}get isVisible(){return map.get(this).s5().nN()}set isVisible(t){t=!!t;var e=map.get(this),i=e.s5();i.nN()!==t&&(i.rN(t),e.I5().u5())}get opacity(){return map.get(this).s5().Cb()}set opacity(t){t=C33.dh(+t,0,1);var e=map.get(this),i=e.s5();isNaN(t)||i.Cb()===t||(i.mb(t),e.I5().u5())}set _7(t){if(C3X.ks(t),t.length<3)throw new Error("expected 3 elements");tempColor.Ha(t[0],t[1],t[2]);var t=map.get(this),e=t.s5();e.y7().no(tempColor)||(e.E7(tempColor),t.I5().u5())}get _7(){var t=map.get(this).s5().y7();return[t.Ja(),t.Za(),t.Qa()]}set lO(t){C3X.As(t);t=BLEND_MODE_TO_INDEX.get(t);if("number"!=typeof t)throw new Error("invalid blend mode");var e=map.get(this);e.s5().YS(t),e.I5().u5()}get lO(){return INDEX_TO_BLEND_MODE.get(map.get(this).s5().ON())}I7(){map.get(this).s5().A7()}M7(){map.get(this).s5().R7()}w7(t){C3X.tr(t,ILayer);var e=map.get(this),t=e.I5().DD(t);if(!t)throw new Error("invalid layer");e.s5().b7(t)}G7(t,e){C3X.tr(t,s),map.get(this).s5().O7(map.get(t),e)}get zIndex(){return map.get(this).s5().h5()}get P7(){return map.get(this).s5().L7()}set P7(t){map.get(this).s5().x7(!!t)}Vl(t,e){return C3X.Cs(t),C3X.Cs(e),map.get(this).s5().D7(+t,+e)}X5(t){C3X.tr(t,s);var e=map.get(this),t=map.get(t);return e.I5().vP().Y5(e,t)}z5(){var t=map.get(this),t=t.I5().vP().K5(t);return t?t.QL():null}getParent(){var t=map.get(this).N7();return t?t.QL():null}F7(){var t=map.get(this).B7();return t?t.QL():null}*k7(){for(var t of map.get(this).k7())yield t.QL()}W7(){return map.get(this).V7()}H7(t){t=map.get(this).U7(t);return t?t.QL():null}*children(){for(var t of map.get(this).children())yield t.QL()}*j7(){for(var t of map.get(this).j7())yield t.QL()}X7(t,e){C3X.tr(t,s),C3X.Ls(e),e=e||{};var i=map.get(this),t=map.get(t);i.Y7(t,e)}removeChild(t){C3X.tr(t,s);var e=map.get(this),t=map.get(t);e.q7(t)}z7(){var t=map.get(this);t.K7()&&t.N7().q7(t)}J7(){var t=map.get(this).s5();return{Z7:t.Q7(),t6:t.e6(),i6:t.s6(),r6:t.h6(),n6:t.a6(),o6:t.l6(),u6:t.c6(),f6:t.d6(),C6:t.p6()}}m6(t,e){C3X._s(t),C3X._s(e),map.get(this).s5().v6(t,e)}S6(){var t=map.get(this).s5();t.g6(),t.o7()}T6(t,e,i){C3X._s(t),C3X._s(e),C3X.Ps(i);var s=map.get(this).s5();s._6(t,e,i)&&s.o7()}y6(t,e){let i=NaN,s=NaN,r=NaN,h=NaN,n=NaN;var a=map.get(this).s5();return a.E6()&&null!==(a=a.I6().jg(t,e))&&(i=a.rg(),s=a.ag(),r=a.lg(),h=a.fg(),n=a.Cg()),{x:i,y:s,IN:r,u:h,v:n}}A6(){var t=map.get(this).s5();return t.E6()?[(t=t.I6()).xg(),t.Dg()]:[0,0]}}},C33=(MakeIWorldInstanceClass=MakeIWorldInstanceClass2,self.$e),C3X=self.qe,IInstance=self.qN,ILayer=self.xD,map=new WeakMap,internalApiToken=C33.Be(),BLEND_MODE_TO_INDEX=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),INDEX_TO_BLEND_MODE=new Map([...BLEND_MODE_TO_INDEX.entries()].map(t=>[t[1],t[0]])),tempColor=C33.nh(C33.Fa);self.M6=MakeIWorldInstanceClass2(self.qN),self.R6=MakeIWorldInstanceClass2(self.EF)}{let C33=self.$e,C3X=self.qe,map=new WeakMap;self.w6=class IDOMInstance extends self.M6{constructor(){super(),map.set(this,self.qN.QN())}b6(){return map.get(this).O6().G6()}focus(){map.get(this).O6().P6()}blur(){map.get(this).O6().L6()}x6(t,e){C3X.As(t),map.get(this).O6().D6(t,e)}}}{let GetDispatcher2=function(t){var e=dispatchers.get(t);return e||(e=C33.nh(C33.Event.x3),dispatchers.set(t,e)),e},C33=(GetDispatcher=GetDispatcher2,self.$e),C3X=self.qe,map=new WeakMap,dispatchers=new WeakMap,internalApiToken=C33.Be();self.N6=class IBehaviorInstance{constructor(){var t=C33.mx.Cx(internalApiToken),e=(map.set(this,t),{runtime:{value:t.I5().vx(),writable:!1},behavior:{value:t.B6().F6(),writable:!1},k6:{value:t.V6().W6(),writable:!1}});Object.defineProperties(this,e),t.I5().jx(this,t)}static QN(){return C33.mx.tF()}get H6(){return map.get(this).U6().QL()}eF(){var t=dispatchers.get(this);t&&(t.ah(),dispatchers.delete(this)),map.delete(this)}addEventListener(t,e,i){C3X.As(t),C3X.Ys(e),GetDispatcher2(this).addEventListener(t,e,i)}removeEventListener(t,e,i){C3X.As(t),C3X.Ys(e),GetDispatcher2(this).removeEventListener(t,e,i)}dispatchEvent(t){GetDispatcher2(this).dispatchEvent(t)}}}{let C33=self.$e,C3X=self.qe,internalApiToken=C33.Be();self.j6=class IBehaviorType{constructor(){var t=C33.mx.Cx(internalApiToken),t={runtime:{value:t.I5().vx(),writable:!1},behavior:{value:t.B6().F6(),writable:!1},name:{value:t.jc(),writable:!1}};Object.defineProperties(this,t)}}}{let C33=self.$e,C3X=self.qe,map=new WeakMap,internalApiToken=C33.Be();self.X6=class IBehavior{constructor(){var t=C33.mx.Cx(internalApiToken),t=(map.set(this,t),{runtime:{value:t.I5().vx(),writable:!1}});Object.defineProperties(this,t)}Xx(){return map.get(this).eD().map(t=>t.QL())}static xx(t){return(t=t&&C33.mx.Y6(t))?t.F6():null}}}{let C33=self.$e,C3X=self.qe,map=new WeakMap,tempColor=C33.nh(C33.Fa);self.mD=class IEffectInstance{constructor(t,e){map.set(this,t),Object.defineProperties(this,{index:{value:e,writable:!1}})}get name(){return map.get(this).pD()[this.index].jc()}get isActive(){return map.get(this).q6(this.index)}set isActive(t){t=!!t;var e=map.get(this);e.q6(this.index)!==t&&(e.z6(this.index,t),e.K6(),e.I5().u5())}setParameter(t,e){C3X._s(t),t=Math.floor(+t);var i=map.get(this),s=i.J6(this.index,t);if(null===s)throw new RangeError("invalid index");if(s instanceof C33.Fa){if(!Array.isArray(e)||e.length<3)throw new TypeError("expected array with 3 elements");tempColor.Ha(e[0],e[1],e[2]),e=tempColor}else if("number"!=typeof e)throw new TypeError("expected number");i.Z6(this.index,t,e)&&i.q6(this.index)&&i.I5().u5()}getParameter(t){C3X._s(t),t=Math.floor(+t);t=map.get(this).J6(this.index,t);if(null===t)throw new RangeError("invalid index");return t instanceof C33.Fa?[t.Ja(),t.Za(),t.Qa()]:t}}}{let C33=self.$e,C3X=self.qe,map=new WeakMap;self.Q6=class IAnimation{constructor(t){map.set(this,t),Object.defineProperties(this,{name:{value:t.jc(),writable:!1}})}get speed(){return map.get(this).t$()}get e$(){return map.get(this).i$()}get repeatCount(){return map.get(this).s$()}get r$(){return map.get(this).h$()}get n$(){return map.get(this).a$()}get frameCount(){return map.get(this).o$()}l$(){return map.get(this).u$().map(t=>t.c$())}*frames(){for(var t of map.get(this).u$())yield t.c$()}}}{let C33=self.$e,C3X=self.qe,map=new WeakMap;self.y5=class IImageInfo{constructor(t){map.set(this,t)}static _5(t){return map.get(t)}get width(){return map.get(this).eC()}get height(){return map.get(this).cC()}getSize(){var t=map.get(this);return[t.eC(),t.cC()]}f$(t){return t.d$(this)}C$(){return map.get(this).uR().Tl()}}}{let C33=self.$e,C3X=self.qe,map=new WeakMap;self.p$=class IAnimationFrame extends self.y5{constructor(t){super(t.m$()),map.set(this,t),Object.defineProperties(this,{duration:{value:t.v$(),writable:!1},S$:{value:t.g$(),writable:!1},T$:{value:t._$(),writable:!1}})}y$(){var t=map.get(this);return[t.g$(),t._$()]}E$(){return map.get(this).I$()}A$(t){return this.M$(t)[0]}R$(t){return this.M$(t)[1]}M$(t){var e=map.get(this);let i=null;if("number"==typeof t)i=e.w$(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=e.b$(t)}return i?[i.rg(),i.ag()]:this.y$()}G$(){var t=map.get(this).O$();return t?t.Pu():0}P$(t){return this.L$(t)[0]}x$(t){return this.L$(t)[1]}L$(t){C3X._s(t),t=Math.floor(t);var e=map.get(this).O$();return!e||t<0||t>=e.Pu()?[0,0]:[(e=e.Ou())[2*t],e[2*t+1]]}get tag(){return map.get(this).D$()}}}{let GetTimelineState2=function(t){t=map.get(t);if(t.N$())throw new Error("timeline/tween was released and is no longer valid");return t},C33=(GetTimelineState=GetTimelineState2,self.$e),C3X=self.qe,map=new WeakMap;self.F$=class ITimelineStateBase{constructor(t){map.set(this,t),t.I5().jx(this,t)}pause(){GetTimelineState2(this).$$()}resume(){GetTimelineState2(this).B$()}stop(){GetTimelineState2(this).rf()}mF(t){return GetTimelineState2(this).k$(t)}set time(t){C3X._s(t),GetTimelineState2(this).W$(t)}get time(){return GetTimelineState2(this).UG()}set totalTime(t){C3X._s(t),GetTimelineState2(this).V$(t)}get totalTime(){return GetTimelineState2(this).H$()}set e$(t){GetTimelineState2(this).U$(!!t)}get e$(){return GetTimelineState2(this).j$()}set n$(t){GetTimelineState2(this).X$(!!t)}get n$(){return GetTimelineState2(this).Y$()}set playbackRate(t){C3X._s(t),GetTimelineState2(this).q$(t)}get playbackRate(){return GetTimelineState2(this).z$()}get progress(){var t=GetTimelineState2(this);return t.UG()/t.H$()}get tags(){return GetTimelineState2(this).K$()}get finished(){return GetTimelineState2(this).J$()}get isPlaying(){return GetTimelineState2(this).IsPlaying()}get Z$(){return GetTimelineState2(this).Q$()}get tB(){return map.get(this).N$()}}}{let GetTimelineState2=function(t){t=map.get(t);if(t.N$())throw new Error("timeline was released and is no longer valid");return t},C33=(GetTimelineState=GetTimelineState2,self.$e),C3X=self.qe,map=new WeakMap,easeToIndexFunc=null;self.eB=class ITimelineState extends self.F${constructor(t){super(t),map.set(this,t);t={name:{value:t.jc(),writable:!1}};Object.defineProperties(this,t)}}}{let GetTweenState2=function(t){t=map.get(t);if(t.N$())throw new Error("tween was released and is no longer valid");return t},C33=(GetTweenState=GetTweenState2,self.$e),C3X=self.qe,map=new WeakMap,behInstMap=new WeakMap,easeToIndexFunc=null;self.iB=class ITweenState extends self.F${constructor(t,e,i){super(t),easeToIndexFunc=easeToIndexFunc||i.easeToIndexFunc,map.set(this,t),e&&behInstMap.set(this,e)}stop(){var t=GetTweenState2(this);behInstMap.get(this).ReleaseTween(t)}sB(t){C3X.As(t);t=self.nc.Mc(easeToIndexFunc(t));GetTweenState2(this).rB(t)}get H6(){var t=GetTweenState2(this).hB();return t?t.QL():null}get nB(){return GetTweenState2(this).aB()}set nB(t){GetTweenState2(this).oB(!!t)}get value(){var t=GetTweenState2(this);if("value"!==t.lB())throw new Error("not a value tween");return t.cB("value").uB()}}}{let C33=self.$e,C3X=self.qe;self.fB=class ISDKPluginBase extends self.ux{constructor(){super()}}}{let C33=self.$e,C3X=self.qe,map=new WeakMap,internalApiToken=C33.Be();self.dB=class ISDKDOMPluginBase extends self.fB{constructor(t){if(super(),map.set(this,C33.mx.Cx(internalApiToken)),!t?.domComponentId)throw new Error("no DOM component ID specified");this.wF=t.domComponentId,this.CB=0,this.pB=new Map,this.mB("elem-focused",t=>t.vB()),this.mB("elem-blurred",t=>{t&&t.SB()})}gB(t){var e=this.CB++;return this.pB.set(e,t),e}TB(t){this.pB.delete(t)}mB(t,i){map.get(this).I5().FF(this.wF,t,t=>{var e=this.pB.get(t.elementId);i(e,t)})}_B(t){C3X.ks(t);for(var[e,i]of t)this._B(e,i)}}}{let C33=self.$e,C3X=self.qe,map=new WeakMap,internalApiToken=C33.Be();self.yB=class ISDKObjectTypeBase extends self.Vx{constructor(){super();var t=C33.mx.Cx(internalApiToken);map.set(this,t)}EB(){}IB(){return map.get(this).m$().AB()}MB(t){}RB(t){}wB(){}bB(t){}}}{let C33=self.$e,C3X=self.qe,map=new WeakMap,internalApiToken=C33.Be();self.GB=class ISDKWorldInstanceBase extends self.R6{constructor(t){super(t),map.set(this,C33.mx.Cx(internalApiToken)),this.OB=null,this.PB=null}eF(){var t;super.eF(),this.OB&&((t=map.get(this).I5().x3()).removeEventListener("renderercontextlost",this.OB),t.removeEventListener("renderercontextrestored",this.PB),this.OB=null,this.PB=null),map.delete(this)}LB(){var t;this.OB||(this.OB=()=>this.xB(),this.PB=()=>this.DB(),(t=map.get(this).I5().x3()).addEventListener("renderercontextlost",this.OB),t.addEventListener("renderercontextrestored",this.PB))}xB(){}DB(){}NB(t){}}}{let C33=self.$e,C3X=self.qe,tempRect=C33.nh(C33.Rect),map=new WeakMap,internalApiToken=C33.Be();self.$B=class ISDKDOMInstanceBase extends self.GB{constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);t=C33.mx.Cx(internalApiToken),map.set(this,t),this.BB=this.Hx.gB(this),this.kB=!0,this.WB=!1,this.VB=!1,this.HB=-.2,this.UB=C33.nh(C33.Rect,0,0,-1,-1),t=t.I5().jB();this.XB=t.YB(),this.qB=t.zB(),this.KB=-1,this.JB=-1,this.ZB=!1,this.VF(!0)}eF(){super.eF(),this.Hx.TB(this.BB),this.QB("destroy"),this.BB=-1,map.delete(this)}ek(){if(map.get(this).I5().AP())throw new Error("not valid in worker mode");return this.ik("get-element")}QB(t,e){(e=e||{}).elementId=this.BB,this.BF(t,e)}ik(t,e){return(e=e||{}).elementId=this.BB,this.WF(t,e)}sk(t,e){return(e=e||{}).elementId=this.BB,this.kF(t,e)}rk(t){t=t||{};var e=map.get(this).s5();t.elementId=this.BB,t.isVisible=e.nN(),t.htmlIndex=e.r5().hk(),t.htmlZIndex=e.nk(),Object.assign(t,this.ak()),this.kB=!!t.isVisible,this.WF("create",t),this.lk(!0)}uk(t){this.kB!==(t=!!t)&&(this.kB=t,this.QB("set-visible",{isVisible:t}))}HF(){this.lk(!1)}ck(){var t=map.get(this).I5().jB().fk();return"Android"===C33.ci.fi&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}lk(t){var e=map.get(this);if(!e.dk()){var i=e.s5(),s=i.r5(),r=i.m7(),[h,n]=s.WN(r.ml(),r.vl()),[r,a]=s.WN(r.Sl(),r.gl()),e=e.I5().jB(),o=e.Ck(),l=e.pk();if(i.nN()&&s.nN())if(!this.ck()&&(r<=0||a<=0||o<=h||l<=n))this.uk(!1);else{tempRect.set(h,n,r,a);o=e.YB(),l=e.zB(),h=s.hk(),n=i.nk();if(!t&&tempRect.equals(this.UB)&&this.XB===o&&this.qB===l&&this.KB===h&&this.JB===n)this.uk(!0);else{this.UB._(tempRect),this.XB=o,this.qB=l,this.KB=h,this.JB=n,this.uk(!0);let t=null;this.VB&&(t=s.mk()+this.HB),this.QB("update-position",{left:Math.round(this.UB.ml()),top:Math.round(this.UB.vl()),width:Math.round(this.UB.width()),height:Math.round(this.UB.height()),htmlIndex:h,htmlZIndex:n,fontSize:t})}}else this.uk(!1)}}vk(){this.ik("focus",{focus:!0})}Sk(){this.ik("focus",{focus:!1})}vB(){this.WB=!0}SB(){this.WB=!1}gk(){return this.WB}Tk(t,e){this.postToDOMElement("set-css-style",{prop:C33.xa(t),val:e})}_k(t,e){this.postToDOMElement("set-attribute",{name:t,val:e})}yk(t){this.postToDOMElement("remove-attribute",{name:t})}Ek(){this.ZB||(this.ZB=!0,Promise.resolve().then(()=>{this.ZB=!1,this.QB("update-state",this.ak())}))}ak(){}Ik(){return this.BB}}}{let C33=self.$e,C3X=self.qe;self.Ak=class ISDKBehaviorBase extends self.X6{constructor(){super()}}}{let C33=self.$e,C3X=self.qe;self.Mk=class ISDKBehaviorTypeBase extends globalThis.j6{constructor(){super()}EB(){}}}{let C33=self.$e,C3X=self.qe,map=new WeakMap,internalApiToken=C33.Be();self.Rk=class ISDKBehaviorInstanceBase extends self.N6{constructor(){super(),map.set(this,C33.mx.Cx(internalApiToken)),this.IF=!1,this.MF=!1,this.wk=!1}eF(){super.eF(),this.VF(!1),this.jF(!1),this.bk(!1),map.delete(this)}GF(){return C33.mx.OF()}Gk(){}PF(t){var e=map.get(this);e.I5().LF(t,e.U6(),e.V6())}xF(t){var e=map.get(this);return e.I5().DF(t,e.U6(),e.V6())}VF(t){var e;this.IF!==(t=!!t)&&(this.IF=t,e=map.get(this).I5(),t?e.Ok(this):e.Pk(this))}UF(){return this.IF}HF(){}jF(t){var e;this.MF!==(t=!!t)&&(this.MF=t,e=map.get(this).I5(),t?e.Lk(this):e.xk(this))}YF(){return this.MF}XF(){}bk(t){var e;this.wk!==(t=!!t)&&(this.wk=t,e=map.get(this).I5(),t?e.Dk(this):e.Nk(this))}Fk(){return this.wk}$k(){}qF(){return[]}zF(){return null}KF(t){}}}{let C33=self.$e,C3X=self.qe,runtime=null;self.xP=class ISDKUtils{constructor(t){runtime=t}p5(t){runtime.m5(t)}s7(t,e,i){C3X.As(t),C3X.As(e),C3X.Ws(i),runtime.Bk(t,e,i)}h7(t,e,i){return C3X.As(t),C3X.As(e),C3X.Ws(i),runtime.kk(t,e,i)}Wk(t){return C3X.Ms(t),new self.Vk(runtime,t)}set Hk(t){runtime.Uk(!!t)}get Hk(){return runtime.jk()}Xk(t){runtime.Yk(!!t)}}}{let C33=self.$e,C3X=self.qe,map=new WeakMap;self.Vk=class ILoopingConditionContext{constructor(t,e){var i=t.BP(),s=t.jP(),r=s.qk(),h=t.ZP(),n=h.zk(),h=h.Kk(s),i=i.Jk().Kk();e&&i.Zk(e),t.Qk(!1),map.set(this,{runtime:t,t8:s,e8:r,i8:n,s8:h,loop:i})}r8(){var{runtime:t,t8:e,e8:i,i8:s,s8:r,loop:h}=map.get(this),t=t.BP();t.h8(i),e.n8(s,r),t.a8(i),h.o8(h.uP()+1)}get l8(){var t=map.get(this).loop;return t.u8()}release(){var t=map.get(this).runtime,e=t.ZP(),i=t.BP().Jk();t.Qk(!0),i.c8(),e.c8(),map.delete(this)}}}{let C33=self.$e,C3X=self.qe,renderer=null,runtime=null;self.f8=class IRenderer{constructor(t,e){runtime=t,renderer=e}d8(){renderer.Eb()}C8(t){renderer._b(t)}p8(){renderer.P2()}m8(){renderer.M2()}v8(){renderer.V2()}setColor(t){renderer.pb(t[0],t[1],t[2],t[3])}S8(t,e,i,s){renderer.pb(t,e,i,s)}g8(){renderer.vb()}T8(t){renderer.mb(t)}_8(t){renderer.cv(t)}y8(){renderer.dv()}rect(t){renderer.Mb(t.left,t.top,t.right,t.bottom)}E8(t,e,i,s){renderer.Mb(t,e,i,s)}I8(t){renderer.Xl(C33.Xl.cu(t))}A8(t,e,i,s,r,h,n,a){renderer.Jv(t,e,i,s,r,h,n,a)}M8(t,e){renderer.Iv(C33.Xl.cu(t),C33.Rect._l(e))}w8(t,e){renderer.bb(C33.Xl.cu(t),C33.Xl.cu(e))}b8(t,e,i,s,r,h,n,a,o,l,u,c,f){renderer.Gb(t,e,i,s,r,h,n,a,o,l,u,c,C33.Rect._l(f))}G8(t,e,i,s,r,h,n,a,o,l,u,c,f){renderer.gv(t,e,i,s,r,h,n,a,o,l,u,c,C33.Xl.cu(f))}O8(t,e,i){renderer.Ob(t,e,i)}P8(t){renderer.Kv(t)}line(t,e,i,s){renderer.mC(t,e,i,s)}L8(t,e,i,s,r,h){renderer.Tv(t,e,i,s,r,h)}x8(t,e,i,s){renderer.Av(t,e,i,s)}D8(t){renderer.bv(C33.Rect._l(t))}N8(t){renderer.Gv(C33.Xl.cu(t))}F8(t){renderer.Nv(t)}B8(){renderer.Fv()}k8(t){renderer.Wv(t)}W8(){renderer.jv()}V8(t){C3X.er(t,self.H8);t=t?runtime.DD(t):null;renderer.gb(t)}U8(t,e){t=self.y5._5(t);if(t)return t.j8(renderer,{iT:e?.iT??"clamp-to-edge",sT:e?.sT??"clamp-to-edge",rT:e?.rT??"trilinear",aT:e?.aT??!0});throw new Error("invalid IImageInfo")}X8(t){t=self.y5._5(t);if(!t)throw new Error("invalid IImageInfo");t.eM()}d$(t){var t=self.y5._5(t);if(t)return t=t.v_(),self.H8.Y8(runtime,t);throw new Error("invalid IImageInfo")}q8(t,e,i){C3X._s(t),C3X._s(e);t=renderer.a_(t,e,{iT:i?.iT??"clamp-to-edge",sT:i?.sT??"clamp-to-edge",rT:i?.rT??"trilinear",aT:i?.aT??!0});return self.H8.Y8(runtime,t)}z8(t,e,i){C3X.tr(e,self.H8);e=runtime.DD(e);renderer.lR(t,e,{premultiplyAlpha:i?.premultiplyAlpha??!0})}deleteTexture(t){C3X.tr(t,self.H8);t=runtime.DD(t);renderer.c_(t)}K8(){var t=renderer.fS();return new self.J8(runtime,t)}Z8(){runtime.jB().Q8(renderer)}t9(t){C3X.tr(t,globalThis.xD),runtime.DD(t).e9(renderer)}}}{let C33=self.$e,C3X=self.qe,map=new WeakMap,reverseMap=new WeakMap;self.H8=class ITexture{constructor(t,e){map.set(this,{runtime:t,i9:e}),reverseMap.set(e,this),t.jx(this,e),Object.defineProperties(this,{width:{value:e.eC(),writable:!1},height:{value:e.cC(),writable:!1}})}static Y8(t,e){return e?reverseMap.get(e)||new self.H8(t,e):null}}}{let getActual2=function(t){return map.get(t).s9},C33=(getActual=getActual2,self.$e),C3X=self.qe,map=new WeakMap;self.J8=class IRendererText{constructor(t,e){map.set(this,{runtime:t,s9:e}),t.jx(this,e)}release(){getActual2(this).ah()}set r9(t){C3X.As(t),getActual2(this).lM(t)}get r9(){return getActual2(this).fA()}set h9(t){C3X._s(t),getActual2(this).uM(t)}get h9(){return getActual2(this).cM()}set lineHeight(t){C3X._s(t),getActual2(this).dM(t)}get lineHeight(){return getActual2(this).CM()}set n9(t){getActual2(this).pM(t)}get n9(){return getActual2(this).mM()}set a9(t){getActual2(this).vM(t)}get a9(){return getActual2(this).SM()}setColor(t){C3X.ks(t),this.o9(t[0],t[1],t[2])}o9(t,e,i){getActual2(this).EM(t,e,i)}l9(t){C3X.As(t),getActual2(this).qS(t)}set u9(t){getActual2(this).IM(t)}get u9(){return getActual2(this).AM()}set verticalAlign(t){getActual2(this).MM(t)}get verticalAlign(){return getActual2(this).RM()}set c9(t){getActual2(this).wM(t)}get c9(){return getActual2(this).bM()}set f9(t){getActual2(this).GM(t)}get f9(){return getActual2(this).OM()}set text(t){C3X.As(t),getActual2(this).s3(t)}get text(){return getActual2(this).PM()}SD(t,e,i){C3X._s(t),C3X._s(e),C3X._s(i),getActual2(this).LM(t,e,i)}f$(){var{runtime:t,s9:e}=map.get(this),e=e.v_();return self.H8.Y8(t,e)}C$(){return getActual2(this).uR().Tl()}d9(t){C3X.Ys(t),getActual2(this).sM=t}C9(){getActual2(this).eM()}get p9(){return getActual2(this).DM()}get m9(){return getActual2(this).FM()}}}{let GetTypeFromFileExtension2=function(t){return t&&!((t=t.split(".")).length<2)&&(t=t.at(-1).toLowerCase(),EXT_TO_TYPE.get(t))||""},AddScript2=function(s){return new Promise((t,e)=>{var i=document.createElement("script");i.onload=t,i.onerror=e,i.async=!1,i.type="module",i.src=s,document.head.appendChild(i)})},C33=(GetTypeFromFileExtension=GetTypeFromFileExtension2,AddScript=AddScript2,self.$e),VALID_LOAD_POLICIES=new Set(["local","remote"]),EXT_TO_TYPE=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);C33.v9=class AssetManager extends C33.rh{constructor(t,e){super();var i=e.exportType,t=(this.Qc=t,this.S9="folders",this.g9=new Map,this.T9="cordova"===i,this._9=!!e.isiOSCordova,this.y9=!!e.isFileProtocol,this.E9=e.swClientId,this.I9=e.supportedAudioFormats||{},this.A9=new Map,this.M9=!1,this.R9=e.scriptFolder,this.w9="",this.b9="",this.G9="",this.O9=e.fileMap||new Map,this.P9=new Map,"html5"===i||"scirra-arcade"===i||"instant-games"===i);this.L9=t?"remote":"local",this.x9=new Map,this.D9=[],this.N9=[],this.F9=!1,this.B9=0,this.k9=0,this.W9=0,this.V9=!1,this.H9=C33.nh(C33.S0,()=>this.U9(),50),this.j9=C33.nh(C33.l0,Math.max(C33.hardwareConcurrency,8)),this.X9=C33.nh(C33.l0,20),this.Y9=new self.v5(this)}ah(){for(var t of this.x9.values())t.ah();this.x9.clear(),C33.xn(this.N9),this.Qc=null}I5(){return this.Qc}q9(t){this.S9=t}P5(){return this.S9}z9(){return this.R9}K9(t){this.w9=t}D5(){return this.w9}J9(t){this.b9=t}Z9(){return this.b9}Q9(t){this.G9=t}tW(){return this.G9}eW(){return this.y9}Sa(t,e){return e=e||this.L9,C33.fa(t)?("flat"===this.S9&&(t=t.toLowerCase()),this.T9&&this.y9?this.iW(t):"playable-ad-single-file"===this.Qc.sW()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===e?this.j9:this.X9).sc(()=>C33.Sa(t))):C33.Sa(t)}ga(t){return C33.fa(t)?("flat"===this.S9&&(t=t.toLowerCase()),this.T9&&this.y9?this.rW(t):"playable-ad-single-file"===this.Qc.sW()?C33._a(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.L9?this.j9:this.X9).sc(()=>C33.ga(t))):C33.ga(t)}pa(t){return C33.fa(t)?("flat"===this.S9&&(t=t.toLowerCase()),this.T9&&this.y9?this.hW(t):"playable-ad-single-file"===this.Qc.sW()?C33.ya(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.L9?this.j9:this.X9).sc(()=>C33.pa(t))):C33.pa(t)}async ma(t){t=await this.pa(t);return JSON.parse(t)}nW(t,e){return"flat"===this.S9&&(t=t.toLowerCase()),this.Qc.f5("runtime","cordova-fetch-local-file",{filename:t,as:e})}hW(t){return this.nW(t,"text")}async iW(t){var e=await this.nW(t,"buffer"),t=GetTypeFromFileExtension2(t);return new Blob([e],{type:t})}async aW(t){"flat"===this.S9&&(t=t.toLowerCase());var e,i=this.g9.get(t);return i||(e=await this.iW(t),i=URL.createObjectURL(e),this.g9.set(t,i)),i}rW(t){return this.nW(t,"buffer")}L5(t){"flat"===this.S9&&(t=t.toLowerCase());let e=this.w9+t;return e="Gecko"===C33.ci.Si&&"preview"===this.Qc.sW()?this.oW(e):e}G5(t){return C33.ca(t)?Promise.resolve(t):this.T9&&this.y9?this.aW(t):"playable-ad-single-file"===this.Qc.sW()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.S9&&(t=t.toLowerCase()),Promise.resolve(t))}lW(e){if(C33.ca(e)||"preview"!==this.Qc.sW()||!this.E9||!e)return e;try{var t=new URL(e,location.href);return t.searchParams.set("__c3_client_id",this.E9),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+e),e}}uW(t){return this.G5(t)}cW(t){if(t.fW&&!VALID_LOAD_POLICIES.has(t.fW))throw new Error("invalid load policy");let e=this.x9.get(t.url);return e||(e=C33.nh(C33.dW,this,{url:t.url,size:t.size||0,fW:t.fW||this.L9}),this.x9.set(e.pW(),e),this.F9)||(this.B9+=e.Ju(),this.N9.push(e.mW().then(()=>this.vW(e.Ju())))),e}SW(t){this.x9.delete(t.pW())}async gW(){try{await Promise.all(this.N9),this.W9=1}catch(t){console.error("Error loading: ",t),this.V9=!0,this.U9()}}TW(){this.F9=!0}_W(){return this.V9}vW(t){this.k9+=t,this.H9.G0()}U9(){var t=C33.nh(C33.Event,"loadingprogress");this.W9=C33.dh(this.k9/this.B9,0,1),t.progress=this.W9,this.Qc.x3().dispatchEvent(t)}yW(){return this.W9}EW(t){C33.$n(this.D9,t),this.D9.length&&this.N9.push(this.IW())}async IW(){var s=[],r=[];for(let[t,e,i]of this.D9)this.B9+=i,s.push(this.AW(t,e,r).then(()=>this.vW(i)));await Promise.all(s),this.Qc.AP()&&0<r.length&&await this.Qc.f5("runtime","load-webfonts",{webfonts:r})}async AW(e,i,s){try{let t=await this.G5(i);"Gecko"===C33.ci.Si&&(e=`'${e}'`),("Gecko"===C33.ci.Si&&"preview"===this.Qc.sW()||"playable-ad-single-file"===this.Qc.sW())&&(t=this.oW(t));var r=new FontFace(e,`url('${t}')`);(this.Qc.AP()?self:document).fonts.add(r),await r.load(),this.Qc.AP()&&s.push({name:e,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${e}': `,t)}}g5(t){return!!this.I9[t]}MW(s,t){this.M9=!!t;for(let[e,t,i]of s)this.A9.set(e,{fileName:e,RW:t.map(t=>({type:t[0],wW:t[1],bW:e+t[1],fileSize:t[2]})),GW:i})}OW(t){"flat"===this.S9&&(t=t.toLowerCase());var e,t=this.A9.get(t);if(!t)return null;let i=null;for(e of t.RW)if(i||"audio/webm; codecs=opus"!==e.type||(i=e),this.g5(e.type))return e;return i}PW(t){t=this.OW(t);return t?{url:this.L5(t.bW),type:t.type}:null}LW(){if(this.M9){var t,e,i=[];for(t of this.A9.values())t.GW||(e=this.OW(t.fileName))&&i.push({xW:t.fileName,url:this.L5(e.bW),type:e.type,fileSize:e.fileSize});return i}return[]}DW(t){return"preview"===this.Qc.sW()&&(t=new URL(t,location.href).toString()),this.O9.get(t)||null}oW(t){var e=this.P9.get(t);if(!e){var i=this.DW(t);if(!i)return t;e=URL.createObjectURL(i),this.P9.set(t,e)}return e}dP(){return this.Y9}async k5(...t){var e,i=await Promise.all(t.map(t=>this.G5(t)));this.Qc.AP()?1===t.length?(e=t[0],await self.c3_import((C33.fa(e)?"./":"")+e)):(e=t.map(t=>`import "${C33.fa(t)?"./":""}${t}";`).join("\n"),t=URL.createObjectURL(new Blob([e],{type:"application/javascript"})),await self.c3_import(t)):await Promise.all(i.map(t=>AddScript2(t)))}async V5(t){var e;return WebAssembly.compileStreaming?(e=await this.G5(t),WebAssembly.compileStreaming(fetch(e))):(e=await C33.ga(t),WebAssembly.compile(e))}async U5(t){t=await this.G5(t);return this.Qc.f5("runtime","add-stylesheet",{url:t})}}}{let C33=self.$e;C33.NW=class Asset extends C33.rh{constructor(t,e){super(),this.FW=t,this.Qc=t.I5(),this.$W=e.url||"",this.BW=e.size,this.kW=e.fW,this.WW=e.blob||null,this.VW=!!this.WW,this.wp=null}ah(){this.wp=null,this.FW=null,this.Qc=null,this.WW=null}pW(){return this.$W}Ju(){return this.BW}mW(){return"local"===this.kW||this.WW?(this.VW=!0,Promise.resolve()):(this.wp||(this.wp=this.FW.Sa(this.$W,this.kW).then(t=>(this.VW=!0,this.wp=null,this.WW=t)).catch(t=>{console.error("Error loading resource: ",t),this.wp=null})),this.wp)}HW(){return this.VW}UW(){return this.WW?Promise.resolve(this.WW):this.wp||this.FW.Sa(this.$W,this.kW)}}}{let C33=self.$e,promiseThrottle=new C33.l0,allImageAssets=new Set;C33.dW=class ImageAsset extends C33.NW{constructor(t,e){super(t,e),this.jW=null,this.XW=null,this.ad=0,this.YW=-1,this.qW=-1,allImageAssets.add(this)}ah(){if(0!==this.ad)throw new Error("released image asset which still has texture references");this.FW.SW(this),this.jW=null,allImageAssets.delete(this),super.ah()}static zW(){for(var t of allImageAssets)t.jW=null,t.XW=null,t.ad=0}j8(t,e){return e=e||{},this.ad++,this.XW?Promise.resolve(this.XW):(this.jW||(e.hT=this.Qc.jB().KW(),this.jW=this.JW(t,e)),this.jW)}async JW(i,s){try{let e=await this.UW();return 0===this.ad?this.jW=null:await promiseThrottle.sc(async()=>{var t=await i.iG(e,s);return this.jW=null,0===this.ad?(i.c_(t),null):(this.XW=t,this.YW=t.eC(),this.qW=t.cC(),this.XW)})}catch(t){throw console.error("Failed to load texture: ",t),t}}eM(){if(this.ad<=0)throw new Error("texture released too many times");this.ad--,0===this.ad&&this.XW&&(this.XW.RS().c_(this.XW),this.XW=null)}ZW(){return this.ad}v_(){return this.XW}eC(){return this.YW}cC(){return this.qW}async QW(){var t=await this.UW();return C33.Bi.ImageBitmap?createImageBitmap(t):C33.Ia(t)}}}{let SortByInstLastCachedZIndex2=function(t,e){return t.s5().tV()-e.s5().tV()},C33=(SortByInstLastCachedZIndex=SortByInstLastCachedZIndex2,self.$e),assert=self.assert;C33.eV=class RenderCell extends C33.rh{constructor(t,e,i){super(),this.iV=t,this.Yo=e,this.qo=i,this.sV=[],this.rV=!0,this.hV=new Set,this.nV=!1}ah(){C33.xn(this.sV),this.hV.clear(),this.iV=null}rf(){C33.xn(this.sV),this.rV=!0,this.hV.clear(),this.nV=!1}aV(){this.rV=!1}qu(){if(this.sV.length){if(this.sV.length>this.hV.size)return!1;this.oV()}return!0}lV(t){this.hV.has(t)?(this.hV.delete(t),0===this.hV.size&&(this.nV=!1)):(this.sV.push(t),this.rV=1===this.sV.length)}Sf(t){this.hV.add(t),this.nV=!0,50<=this.hV.size&&this.oV()}oV(){this.nV&&(this.sV.length===this.hV.size?this.rf():(C33.Hn(this.sV,this.hV),this.hV.clear(),this.nV=!1))}uV(){this.rV||(this.sV.sort(SortByInstLastCachedZIndex2),this.rV=!0)}cV(t){this.oV(),this.uV(),this.sV.length&&t.push(this.sV)}}}{let C33=self.$e;C33.fV=class RenderGrid extends C33.rh{constructor(t,e){super(),this.dV=t,this.CV=e,this.pV=C33.nh(C33.ju)}ah(){this.pV.ah(),this.pV=null}mV(t,e,i){var s=this.pV.ri(t,e);return s||(i?(s=C33.nh(C33.eV,this,t,e),this.pV.Set(t,e,s),s):null)}vV(t){return Math.floor(t/this.dV)}SV(t){return Math.floor(t/this.CV)}gV(s,r,h){if(r)for(let i=r.ml(),t=r.Sl();i<=t;++i)for(let t=r.vl(),e=r.gl();t<=e;++t){var n;h&&h.Vl(i,t)||(n=this.mV(i,t,!1))&&(n.Sf(s),n.qu())&&this.pV.zu(i,t)}if(h)for(let i=h.ml(),t=h.Sl();i<=t;++i)for(let t=h.vl(),e=h.gl();t<=e;++t)r&&r.Vl(i,t)||this.mV(i,t,!0).lV(s)}TV(t,e){let i=this.vV(t.ml());for(var s=this.SV(t.vl()),r=this.vV(t.Sl()),h=this.SV(t.gl());i<=r;++i)for(let t=s;t<=h;++t){var n=this.mV(i,t,!1);n&&n.cV(e)}}_V(t){let e=t.ml();for(var i=t.vl(),s=t.Sl(),r=t.gl();e<=s;++e)for(let t=i;t<=r;++t){var h=this.mV(e,t,!1);h&&h.aV()}}}}{let SortByInstLastCachedZIndex2=function(t,e){return t.s5().tV()-e.s5().tV()},SortByInstZElevation2=function(t,e){return t.s5().lg()-e.s5().lg()},C33=(SortByInstLastCachedZIndex=SortByInstLastCachedZIndex2,SortByInstZElevation=SortByInstZElevation2,self.$e),assert=self.assert,tmpRect=new C33.Rect,tmpQuad=new C33.Xl,renderCellArr=[],tmpDestRect=new C33.Rect,tmpSrcRect=new C33.Rect,glMatrix=self.pe,vec32=glMatrix.Ee,vec42=glMatrix.Ie,mat42=glMatrix.ge,tempMat4=mat42.create(),tempVec3=vec32.create(),tempVec4=vec42.create(),camVector=vec32.create(),lookVector=vec32.create(),upVector=vec32.create(),tempVec2=C33.nh(C33.Xo),tempRect=C33.nh(C33.Rect),tempInstanceList1=[],tempInstanceList2=[],tempInstancesByCameraDist=[],DEFAULT_LAYER_OPTIONS={name:"",sid:-1,yV:!1,isVisible:!0,aN:!0,uN:!1,backgroundColor:[1,1,1,1],AN:!0,EV:[1,1],opacity:1,wN:!1,IV:!1,AV:!1,MV:!1,scaleRate:1,lO:0,IN:0,RV:[],wV:[],bV:[]};C33.GV=class Layer extends C33.rh{constructor(t,e,i){super(),i=Object.assign({},DEFAULT_LAYER_OPTIONS,i),this.OV=t,this.Qc=t.I5(),this.PV=e,this.uh=i.name,this.$p=-1,this.LV=!!i.uN,this.xV=-1,this.DV=i.sid,this.NV=!!i.yV,this.FV=!!i.isVisible,this.$V=!!i.aN,this.BV=C33.nh(C33.Fa),this.BV.Do(i.backgroundColor),this.kV=!!i.AN,this.WV=i.EV[0],this.VV=i.EV[1],this.US=C33.nh(C33.Fa,1,1,1,i.opacity),this.HV=C33.nh(C33.Fa),this.UV=!!i.wN,this.jV=!!i.IV,this.XV=!!i.AV,this.YV=!!i.MV,this.qV=i.scaleRate,this.HS=i.lO,this.zV=null,this.KV=1,this.jS=i.IN,this.JV=0,this.ZV=0,this.QV=0,this.tH=!1,this.KR=C33.nh(C33.Rect),this.eH=C33.nh(C33.Rect),this.iH=C33.nh(C33.Rect),this.sH=!0,this.e_=mat42.create(),this.rH=!0,this.z4=mat42.create(),this.hH=!0,this.nH=C33.nh(C33.jp.zp),this.aH=!0,this.oH=[],this.lH=i.RV,this.uH=[],this.cH=[],this.fH=new Map,this.sV=[],this.dH=!1,this.CH=!1,this.pH=!1;let s=this.Qc.jB();this.mH=C33.nh(C33.vH,this,i.wV),this.nP=C33.nh(C33.jp.s4,s.SH(),{XG:(t,e)=>{var e=e.ZO(),i=e.Zb();t.qS(e.gH()),t.nG(i),t.aG(i),s.TH(i)},qG:t=>this.CD()._H(t)}),this.yH=!0,this.EH=!0,this.IH=null,this.AH=[],this.MH=!1,this.RH=C33.nh(C33.Rect,0,0,-1,-1),this.wH=C33.nh(C33.Rect,0,0,-1,-1),this.bH=new self.xD(this),this.GH(),this.OH()&&(this.IH=C33.nh(C33.fV,this.Qc.RP(),this.Qc.bP())),this.PH=i.bV.map(t=>C33.GV.LH(this.OV,this,t))}xH(){for(var t of this.lH){var e=this.Qc.DH(t[1]);this.OV.NH(e),e.FH()||(e.$H(t),e.BH(this.$p)),this.uH.push(t),this.fH.set(t[2],t)}C33.$n(this.oH,this.uH),this.lH=null}static LH(t,e,i){return C33.nh(C33.GV,t,e,{name:i[0],sid:i[2],isVisible:i[3],aN:i[13],uN:i[19],backgroundColor:i[4].map(t=>t/255),AN:i[5],EV:[i[6],i[7]],opacity:i[8],wN:i[9],IV:i[17],AV:i[18],MV:i[10],scaleRate:i[11],lO:i[12],IN:i[16],RV:i[14],wV:i[15],bV:i[20]})}ah(){for(var t of this.PH)t.ah();C33.xn(this.PH);for(var e of this.sV)this.Qc.sF(e);C33.xn(this.sV),this.mH.ah(),this.mH=null,this.nP.ah(),this.nP=null,this.bH=null,this.PV=null,this.OV=null,this.Qc=null}kH(t){return this.fH.get(t)}WH(i){var s=this.OV.VH();let r=0;var h=this.uH;for(let e=0,t=h.length;e<t;++e){var n=h[e],a=this.Qc.DH(n[1]);let t=!0;a.HH()&&!s||(n=this.Qc.UH(n,this,!0),i.push(n),a.jH()&&(t=!1,this.cH.push(n.uF()))),t&&(h[r]=h[e],++r)}C33.Ln(h,r),this.Qc.fD(),this.l5()}XH(t,e){if(!t.Ux()._x())throw new Error("instance is not of world type");var i=t.s5();if(i.r5()!==this)throw new Error("instance added to wrong layer");this.sV.push(t),0!==i.lg()&&(this.pH=!0),e&&this.OH()&&t.s5().o7(),this.l5(t)}YH(t){this.sV.includes(t)||(this.sV.push(t),0!==t.s5().lg()&&(this.pH=!0),this.l5(t))}qH(t,e){var i=t.s5();if(i.r5()!==this)throw new Error("instance added to wrong layer");this.sV.unshift(t),0!==i.lg()&&(this.pH=!0),this.l5(t),e&&this.OH()&&t.s5().o7()}zH(t,e){var i=this.sV.indexOf(t);i<0||(e&&this.OH()&&t.s5().KH(),this.sV.splice(i,1),this.l5(t),this.JH())}ZH(){this.pH=!0}JH(){0===this.sV.length&&(this.pH=!1)}QH(t){if(t){var e,i,s=new Set;for(e of this.sV){var r=e.s5().tV();0<=r&&s.add(r)}let t=-1;for(i of this.sV){var h=i.s5();if(!(0<=h.tV())){for(++t;s.has(t);)++t;h.tU(t)}}}this.sV.sort(SortByInstLastCachedZIndex2)}eU(){}iU(){for(var t of this.sV)t.KN().jH()||this.Qc.sF(t);this.Qc.fD(),C33.xn(this.sV),this.pH=!1,this.l5()}sU(e,t,i,s,r,h){var n,a=this.Qc.BP(),o=this.Qc.rU(),l=e.hU(),u=[];for(n of this.uH){var c=n[0],f=c[0];if(t.Vl(f,c[1])){f=o[n[1]];if(f!==e){if(!l)continue;if(!e.nU(f))continue}let t=r;t||(c=this.Qc.e5(),t=this.$L()===c?this:(t=c.aU(this.jc()))||c.n5(this.uP()));f=this.Qc.UH(n,t,!1,void 0,void 0,!1,h),c=(t.aD(f),f.s5());c.f7(i,s),c.o7(),a.oD(!0),f.lD(),a.oD(!1),u.push(f)}}return u}rD(){return this.sV.length}$L(){return this.OV}jc(){return this.uh}oU(t){this.$p=t}uP(){return this.$p}lU(t){this.xV=t}hk(){return this.xV}cN(){return this.LV}fN(t){this.LV!==(t=!!t)&&(this.LV=t,this.OV.uU(),this.Qc.u5())}cU(){let t=-1;var e=this.JD();return t=(e?e.tN():this.$L().fU()).indexOf(this)}dU(){return this.DV}I5(){return this.Qc}CU(){return this.NV}pU(){for(var t of this.ZD())if(t.CU())return!0;return!1}mU(){return this.Qc.mU()}CD(){return this.mH}lP(){return this.vU(),this.nP}vU(){var t,e=this.SU();(this.yH||e!==this.EH||this.nP.K4())&&(t=this.CD().gU(),this.nP.J4(t.map(t=>t.Uy()),{KG:t.map(t=>t.uP()),JG:!e,i4:!0}),this.yH=!1,this.EH=e)}K6(){this.CD().K6(),this.yH=!0}OH(){return this.YV&&!this.XV}TU(){return this.IH}_U(){this.MH=!1}nN(){for(var t of this.yU())if(!t.sN())return!1;return!0}sN(){return this.FV}rN(t){this.FV!==(t=!!t)&&(this.FV=t,this.Qc.u5())}lN(t){this.$V=!!t}oN(){return this.$V}CN(){for(var t of this.yU())if(!t.oN())return!1;return!0}LN(t){this.tH!==(t=!!t)&&((this.tH=t)&&(t=this.$L(),this.ZV=t.ID(),this.QV=t.MD()),this.EU(),this.Qc.u5())}IU(){return this.tH}ED(t){var e=this.$L(),i=e.AU(),e=e.MU();this.ZV!==(t=(t=e<t?e:t)<i?i:t)&&(this.ZV=t,this.IU())&&(this.EU(),this.Qc.u5())}AD(t){var e=this.$L(),i=e.RU(),e=e.wU();this.QV!==(t=(t=e<t?e:t)<i?i:t)&&(this.QV=t,this.IU())&&(this.EU(),this.Qc.u5())}ID(){return this.IU()?this.ZV:this.$L().ID()}MD(){return this.IU()?this.QV:this.$L().MD()}DN(){return this.bU(),this.KR}GU(){return this.bU(),this.eH}OU(){return this.bU(),this.iH}XD(){var t=this.$L();return[t.PU(),t.LU()]}e2(t){return this.Qc.e2(t)}xU(r,t){var e=this.GU();if(0===r)t._(e);else{let i=e.Il(),s=e.Al();var h=this.DU(r),n=e.width()/h,e=e.height()/h,[h,a]=this.XD();if(.5!==h||.5!==a){var o=this.NU(),l=this.Qc,u=this.e2()/o;let t=(h-.5)*l.FU()/u,e=(a-.5)*l.$U()/u;h=this.yD(),a=(0!==h&&(tempVec2.set(t,e),tempVec2.rotate(h),t=tempVec2.Jo(),e=tempVec2.Qo()),C33.wh(o,0,r));i+=C33.Lt(t,0,a),s+=C33.Lt(e,0,a)}t.set(i-n/2,s-e/2,i+n/2,s+e/2)}}Cb(){return this.US.eo()}mb(t){t=C33.dh(t,0,1),this.US.eo()!==t&&(this.US.za(t),this.GH(),this.Qc.u5())}GH(){this.HV._(this.US),this.HV.do()}gH(){return this.HV}SU(){return this.US.lo(1,1,1,1)}SN(){return this.qV}vN(t){this.qV!==t&&(this.qV=t,this.EU(),this.Qc.u5())}_N(){return this.WV}EN(){return this.VV}BU(t,e){this.WV===t&&this.VV===e||(this.WV=t,this.VV=e,this.EU(),this.Qc.u5())}TN(t){this.BU(t,this.EN())}yN(t){this.BU(this._N(),t)}ug(t){this.jS!==t&&(this.jS=t,this.Qc.u5())}lg(){return this.jS}_D(t){t=C33.Ch(t),this.JV!==t&&(this.JV=t,this.EU(),this.Qc.u5())}yD(){return C33.Ch(this.OV.yD()+this.JV)}gN(){return this.JV}kU(){return 0<this.sV.length}a5(){return this.sV}WU(){return this.VU()&&this.XV?(C33.$n(tempInstancesByCameraDist,this.a5()),tempInstancesByCameraDist.sort((t,e)=>this.HU(t,e)),tempInstancesByCameraDist):this.a5()}UU(t){C33.qr(t,this.WU());for(var e of this.PH)e.nN()&&0<e.Cb()&&e.UU(t)}HU(t,e){var i=this.$L().jU(),s=i[0],r=i[1],i=i[2],t=t.s5(),e=e.s5(),h=t.rg()-s,n=t.ag()-r,t=t.lg()-i,s=e.rg()-s,r=e.ag()-r,e=e.lg()-i;return s*s+r*r+e*e-(h*h+n*n+t*t)}PN(){return this.BV}RN(){return this.kV}MN(t){this.kV!==(t=!!t)&&(this.kV=t,this.Qc.u5())}GN(){return this.UV}bN(t){this.UV!==(t=!!t)&&(this.UV=t,this.Qc.u5())}XU(){return!this.I5().YU()||!this.jV}VU(){return!this.XU()}qU(){return this.VU()&&this.$L().zU()}KU(){if(!this.qU())return!1;for(var t of this.PH)if(!t.KU())return!1;return!0}YS(t){this.HS!==t&&(this.HS=t,this.Qc.u5())}ON(){return this.HS}JU(){return!this.PV}JD(){return this.PV}ZU(t){this.PV=t}tN(){return this.PH}QU(){return 0<this.PH.length}tj(t,e=!0){e?this.PH.push(t):this.PH.unshift(t)}ej(t,e,i){let s=this.PH.indexOf(e);if(-1===s)throw new Error("cannot find layer to insert by");i&&++s,this.PH.splice(s,0,t)}ij(t){t=this.PH.indexOf(t);if(-1===t)throw new Error("cannot find layer to remove");this.PH.splice(t,1)}sj(){for(var t of this.PH)if(t.rj())return!0;return!1}*iN(){for(var t of this.PH)yield*t.iN();yield this}*ZD(){let t=this.JD();for(;t;)yield t,t=t.JD()}*yU(){yield this,yield*this.ZD()}hj(t){for(var e of this.ZD())if(e===t)return!0;return!1}nj(t){return this===t||this.WV===t.WV&&this.VV===t.VV&&this.KV===t.KV&&this.qV===t.qV&&this.JV===t.JV&&this.ID()===t.ID()&&this.MD()===t.MD()}aj(){return{parallaxX:this._N(),parallaxY:this.EN(),scale:this.mN(),scaleRate:this.SN(),angle:this.gN(),hasOwnScroll:this.IU(),scrollX:this.ID(),scrollY:this.MD()}}oj(t){this.BU(t.parallaxX,t.parallaxY),this.pN(t.scale),this.vN(t.scaleRate),this._D(t.angle),this.LN(t.hasOwnScroll),this.ED(t.scrollX),this.AD(t.scrollY),this.bU()}lj(t){0!==t.size&&0<C33.Hn(this.sV,t)&&(this.JH(),this.l5())}l5(t){this.dH=!1,this.MH=!1,t&&!t.KN().Ux().Ex()||(this.CH=!1)}uj(){if(!this.dH){if(this.sV.sort(SortByInstZElevation2),this.OH())for(let t=0,e=this.sV.length;t<e;++t){var i=this.sV[t].s5();i.tU(t),this.IH._V(i.cj())}else for(let t=0,e=this.sV.length;t<e;++t)this.sV[t].s5().tU(t);this.dH=!0}}fj(){if(!this.CH){var e;let t=0;for(e of this.OV.dj(this.hk()).map(t=>[...t.iN()]).flat()){for(var i of e.a5())i.KN().Ux().Ex()&&i.s5().Cj(t++);e.pj()}}}pj(){this.CH=!0}mj(t,e,i){var s=t.s5(),e=e.s5();if(s.r5()!==this||e.r5()!==this)throw new Error("can't arrange Z order unless both objects on this layer");s=s.h5();let r=e.h5();return s!==r+(i?1:-1)&&(C33.Bn(this.sV,s),s<r&&r--,i&&r++,r===this.sV.length?this.sV.push(t):this.sV.splice(r,0,t),this.l5(t),!0)}vj(t,e){var i=[];let s=0,r=0,h=t.length,n=e.length;for(;s<h&&r<n;){var a=t[s],o=e[r];a.s5().tV()<o.s5().tV()?(i.push(a),++s):(i.push(o),++r)}for(;s<h;++s)i.push(t[s]);for(;r<n;++r)i.push(e[r]);return i}Sj(e){var i=[],s=e.length;for(let t=0;t<s-1;t+=2){var r=e[t],h=e[t+1];i.push(this.vj(r,h))}return s%2==1&&i.push(e[s-1]),i}gj(t){for(;1<t.length;)t=this.Sj(t);return t[0]}Tj(){return this.uj(),C33.xn(renderCellArr),this.IH.TV(this.DN(),renderCellArr),renderCellArr.length?1===renderCellArr.length?renderCellArr[0]:this.gj(renderCellArr):[]}rj(){return this.nN()&&0<this.Cb()&&this._j()}_j(){if(this.kU()||!this.RN())return!0;for(var t of this.PH)if(t._j())return!0;return!1}yj(){return this.GN()||!this.SU()||0!==this.ON()||this.mH.Ej()}Ij(){if(this.yj())return!0;for(var t of this.PH)if(t.Ij())return!0;return!1}Zb(){return this.zV}DU(t){var e;return this.OV.zD()?1:(e=this.Aj())/(e-t)}Mj(t){var e,i=this.Qc.YN();return this.OV.zD()?i:(e=this.Aj(),this.e2()/Math.abs(e-t)*i)}EU(){this.hH=!0,this.aH=!0,this.sH=!0}Rj(t){return this.hH&&(this.wj(t,this.z4,0,0,null),this.hH=!1),this.z4}NU(t){return this.e2(t)/this.bj()}Aj(){return this.qU()?this.$L().jU()[2]:this.NU()}Gj(){var t;return this.qU()?[(t=this.$L().jU())[0],t[1],t[2]]:this.Oj()}Oj(i=0,s=0,r=0){var h=this.Qc,n=this.$L(),a=h.Pj(),o=h.Lj();let t=(this.ID()-a)*this.WV+a,e=(this.MD()-o)*this.VV+o,l=(h.PP()&&(t=Math.round(t),e=Math.round(e)),t+i),u=e+s;var a=n.zD()?this.e2(r):this.NU(r),[o,i]=this.XD();if(.5!==o||.5!==i){s=this.e2(r)/a;let t=(o-.5)*h.FU()/s,e=(i-.5)*h.$U()/s;n=this.yD();0!==n&&(tempVec2.set(t,e),tempVec2.rotate(n),t=tempVec2.Jo(),e=tempVec2.Qo()),l+=t,u+=e}return[l,u,a]}wj(t,e,i,s,r){var h,n,a,o,l=this.Qc,u=this.$L();this.qU()?(vec32._(camVector,u.jU()),vec32._(lookVector,u.xj()),vec32._(upVector,u.Dj()),u=l.Pj(),n=l.Lj(),a=lookVector[0]-camVector[0],o=lookVector[1]-camVector[1],h=lookVector[2]-camVector[2],camVector[0]=(camVector[0]-u)*this.WV+u,camVector[1]=(camVector[1]-n)*this.VV+n,camVector[2]*=Math.max(this.WV,this.VV),lookVector[0]=camVector[0]+a,lookVector[1]=camVector[1]+o,lookVector[2]=camVector[2]+h):([u,n,a]=this.Oj(i,s,r),vec32.set(camVector,u,n,a),vec32.set(lookVector,u,n,a-100),0===(o=this.yD())?vec32.set(upVector,0,1,0):vec32.set(upVector,Math.sin(o),Math.cos(o),0)),t.g2(e,camVector,lookVector,upVector,r||l.$U())}Nj(){this.rH=!0,this.aH=!0,this.sH=!0}Fj(t){return this.rH&&(this.$j(t),this.rH=!1),this.e_}$j(t){var e,i=this.Qc.jB(),[s,r]=this.XD();this.OV.zD()?t.S2(this.e_,i.Bj(),i.kj()):.5===s&&.5===r?mat42._(this.e_,i.Wj()):(e=i.Bj(),i=i.kj(),t.m2(this.e_,e/i,s,r))}e9(t,e=!0,i=0,s=0,r=0){e&&t.ib(this.Fj(t));let h=null;h=0===i&&0===s&&0===r?this.Rj(t):(this.wj(t,tempMat4,i,s,r),tempMat4),t.ob(h)}Vj(t){this.e9(t),t.lv(this.lg())}Hj(t){let e=null;var i;return t.aS()&&this.Qc.Uj()&&(i=this.Qc.jB().jj(this))&&(e=i.NR(),t.dG(e)),e}Xj(t){var e;t.v2()&&this.Qc.Uj()&&(e=2*(this.uP()+1),t.StartMeasuringRenderPassTime(e,1+e))}Yg(t,e,i){var s=this.Qc.jB(),r=this.yj();let h=null;var n,a=this.Hj(t);this.Xj(t),r?(n={rT:this.Qc.GP(),HT:!0,Yj:!!t.v2()&&this.Qc.qj()},"low"===s.zj()&&(n.width=s.Bj(),n.height=s.kj()),h=this.Qc.Kj(n),this.zV=h,t.rG(h),this.RN()&&t.jb(0,0,0,0)):(this.zV=e,t.rG(e)),this.RN()||t.Yu(this.BV),this.OV.Jj(t,this.zV,this.PH,r&&this.RN()),this.Xj(t),this.e9(t),t.lv(this.lg()),t.qb(this.VU()),this.bj()>Number.EPSILON&&(this.uj(),s=this.OH()&&0===this.lg()&&!this.pH,this.qU()?this.Zj(t):s?this.Qj(t):this.tX(t,this.WU())),t.lv(0),t.cv(0),r&&(t.qb(!1),this.eX(t,h,e,i)),a&&t.pG(a),this.zV=null}tX(i,s){var r=this.DN(),h=this.zV,n=this.$L().zD(),a=this.$L().iX();let o=null;for(let t=0,e=s.length;t<e;++t){var l,u=s[t];u!==o&&((l=(o=u).s5()).nN()&&l.sX(r,a,n))&&this.rX(u,l,i,h)}}Zj(s){var r=this.zV,h=this.hX(),n=tempInstanceList1,a=tempInstanceList2,o=this.WU();for(let e=0,i=o.length;e<i;){var l=o[e],u=l.s5();if(u.nN()&&u.nX(h)){(!l.aX()||0<u.lX())&&a.push(l);var c=l.s5().C7();n.push(l);let t=e+1;for(;t<i;++t){var f=o[t],d=f.s5();if(d.nN()&&d.nX(h)){if(d.C7()!==c)break;(f.aX()?(0<d.lX()&&a.push(f),n):a).push(f)}}if(1!==n.length||n[0].uX()){this.cX(s,n);for(let t=0,e=a.length;t<e;++t){var C=a[t],p=C.s5();p.fX(!0),this.rX(C,p,s,r),p.fX(!1)}}else{this.rX(l,u,s,r);for(let t=0,e=a.length;t<e;++t){var m,v=a[t];v!==l&&(m=v.s5()).r5().rX(v,m,s,r)}}e=t,C33.xn(n),C33.xn(a)}else++e}}cX(i,s){var r=this.zV;i.lG();for(let t=0,e=s.length;t<e;++t){var h=s[t],n=h.s5();n.dX(!0),this.CX(h,n,i)}i.uG();for(let t=0,e=s.length;t<e;++t){var a=s[t],o=a.s5();this.rX(a,o,i,r),o.dX(!1)}i.fG()}Qj(t){var e=this.IH,i=this.wH,s=this.RH,r=this.DN();let h;i.set(e.vV(r.ml()),e.SV(r.vl()),e.vV(r.Sl()),e.SV(r.gl())),this.MH&&i.equals(s)?h=this.AH:(h=this.Tj(),this.MH=!0,s._(i)),this.tX(t,h),h!==this.AH&&C33.$n(this.AH,h)}rX(t,e,i,s){e.Ej()?this.pX(t,e,i,s):this.CX(t,e,i)}CX(t,e,i){e=e.mX();i.U2()!==e&&e.XS(),t.Yg(i)}pX(t,e,i,s){this.vX(t,e,i,s,null)&&this.e9(i)}vX(t,e,i,s,r){var h=e.n7().lP();return h.aO(i,s,{oO:t,lO:e.ON(),devicePixelRatio:this.Qc.SX(),time:t.gX(),uO:this.Qc.TX()*this.bj(),cO:this.yD(),PO:e.m7(),LO:h.KO()?null:this._X(e),mO:r&&r.mO,vO:r&&r.vO,SO:r&&r.SO,gO:r&&r.gO}),i.lv(this.lg()),h.ub()}eX(t,e,i,s){var r=this.mH.gU(),h=this.Qc;0===r.length?(t.rG(i),t.M2(),s&&0===this.HS&&this.SU()?t.hG(e):(t.YS(this.HS),t.qS(this.HV),t.nG(e)),t.aG(e),h.TH(e)):this.lP().aO(t,i,{oO:this,lO:this.ON(),devicePixelRatio:h.SX(),uO:h.TX()*this.bj(),cO:this.yD(),PO:this.DN(),LO:null,zG:!0})}mN(){return this.KV}pN(t){this.KV!==t&&(this.KV=t,this.OV.yX(),this.EU(),this.Qc.u5())}YN(){return this.bj()*this.Qc.YN()}mk(){return this.bj()*this.Qc.mk()}bj(){return(this.KV*this.OV.TD()-1)*this.qV+1}bU(){if(this.sH){this.sH=!1;var i=this.Qc.Pj(),s=this.Qc.Lj(),i=(this.ID()-i)*this.WV+i,s=(this.MD()-s)*this.VV+s,r=this.bj(),h=this.Qc.FU()/r,r=this.Qc.$U()/r;let t=i-h/2,e=s-r/2;this.Qc.PP()&&(t=Math.round(t),e=Math.round(e));i=this.eH,s=(i.set(t,e,t+h,e+r),this.yD()),h=(0!==s&&(tmpRect._(i),tmpRect.offset(-i.Il(),-i.Al()),tmpQuad.Cu(tmpRect,s),tmpQuad.mu(tmpRect),tmpRect.offset(i.Il(),i.Al()),i._(tmpRect)),this.jS);this.xU(h,this.KR),this.qU()?this.EX(h,this.iH):this.iH._(this.KR)}}EX(t,e){var i=this.Qc.jB(),s=i.Ck(),i=i.pk(),[r,h]=this.FN(0,0,t),[n,a]=this.FN(s,0,t),[s,o]=this.FN(s,i,t),[i,t]=this.FN(0,i,t);let l=Math.min(r,n,s,i),u=Math.min(h,a,o,t),c=Math.max(r,n,s,i),f=Math.max(h,a,o,t);isFinite(l)||(l=-1/0),isFinite(u)||(u=-1/0),isFinite(c)||(c=1/0),isFinite(f)||(f=1/0),e.set(l,u,c,f)}FN(t,e,i=0){return this.IX(t,e,i,this.mk())}HN(t,e,i=0){return this.IX(t,e,i,this.YN()*this.mU())}IX(t,e,i,s){var r=this.Qc,h=r.RS(),n=this.bj(),a=r.FU()/n,r=r.$U()/n,n=tempVec4,a=(vec42.set(n,0,0,a,r),t/=s,e=n[3]-e/s,this.Fj(h)),r=this.Rj(h),s=tempVec3;return C33.jp.qp(t,e,i,r,a,n,s)?[s[0],s[1]]:[NaN,NaN]}AX(t,e){var i=this.KV,s=this.qV,r=this.WV,h=this.VV,n=this.JV,t=(this.KV=1,this.qV=1,this.WV=1,this.VV=1,this.JV=0,this.EU(),this.FN(t,e));return this.KV=i,this.qV=s,this.WV=r,this.VV=h,this.JV=n,this.EU(),t}WN(t,e,i=0){return this.MX(t,e,i,this.mk())}jN(t,e,i=0){return this.MX(t,e,i,this.YN()*this.mU())}MX(t,e,i,s){var r=this.Qc,h=r.RS(),n=this.bj(),a=r.FU()/n,r=r.$U()/n,n=tempVec4,a=(vec42.set(n,0,0,a,r),this.Fj(h)),r=this.Rj(h),h=tempVec3;return C33.jp.Xp(t,e,i,r,a,n,h)?[h[0]*s,(n[3]-h[1])*s]:[NaN,NaN]}RX(t,e){return t*=this.YN()*this.mU(),0!==e&&(t*=this.DU(e)),t}_X(t){var e,i,s,r,h,n,a=t.m7(),o=t.C7(),t=t.lX(),l=o+t,u=a.ml(),c=a.vl(),f=a.Sl(),a=a.gl();if(this.qU()){if(this.wX(u,c,o)||this.wX(f,c,o)||this.wX(f,a,o)||this.wX(u,a,o))return null;if(0<t&&(this.wX(u,c,l)||this.wX(f,c,l)||this.wX(f,a,l)||this.wX(u,a,l)))return null}else if(l>=this.NU())return null;let[d,C]=this.jN(u,c,o),[p,m]=this.jN(f,a,o);return(0!==this.yD()||0<t||this.qU())&&([e,i]=this.jN(f,c,o),[o,s]=this.jN(u,a,o),C=0<t?([t,r]=this.jN(u,c,l),[c,h]=this.jN(f,c,l),[f,n]=this.jN(f,a,l),[u,a]=this.jN(u,a,l),l=Math.min(d,p,e,o,t,c,f,u),p=Math.max(d,p,e,o,t,c,f,u),d=l,l=Math.min(C,m,i,s,r,h,n,a),m=Math.max(C,m,i,s,r,h,n,a),l):(t=Math.min(d,p,e,o),p=Math.max(d,p,e,o),d=t,t=Math.min(C,m,i,s),m=Math.max(C,m,i,s),t)),tmpRect.set(d,C,p,m),tmpRect}hX(){return this.aH&&(this.bX(),this.aH=!1),this.nH}bX(){var t=this.Qc.RS(),e=this.Fj(t),t=this.Rj(t);this.nH.rm(t,e)}wX(t,e,i){return this.hX().nm(t,e,i)}GX(){return{d:this.CU(),s:this.mN(),a:this.gN(),v:this.sN(),i:this.oN(),html:this.cN(),bc:this.BV.toJSON(),t:this.RN(),sx:this.ZV,sy:this.QV,hosp:this.tH,px:this._N(),py:this.EN(),c:this.US.toJSON(),sr:this.SN(),fx:this.mH.Sg(),cg:this.cH}}OX(t){this.NV=!!t.d,this.KV=t.s,this.JV=t.a,this.FV=!!t.v,this.$V=!t.hasOwnProperty("i")||t.i,this.LV=!!t.html,this.BV.Do(t.bc),this.kV=!!t.t,t.hasOwnProperty("sx")&&(this.ZV=t.sx),t.hasOwnProperty("sy")&&(this.QV=t.sy),t.hasOwnProperty("hosp")&&(this.tH=!!t.hosp),this.WV=t.px,this.VV=t.py,this.US.Do(t.c),this.GH(),this.qV=t.sr,C33.$n(this.cH,t.cg),C33.$n(this.uH,this.oH);var i=new Set(this.cH);let s=0;for(let t=0,e=this.uH.length;t<e;++t)i.has(this.uH[t][2])||(this.uH[s]=this.uH[t],++s);C33.Ln(this.uH,s),this.mH.gg(t.fx),this.yH=!0}PX(){this.QH(!1),this.l5(),this.EU(),this.Nj()}bD(){return this.bH}aD(t,e=!1){if(this.sV.includes(t))e&&this.sV.sort((t,e)=>t.s5().LX()-e.s5().LX());else if(t.xX()){var i,s,r,h=[...t.j7()];h.push(t),h.sort((t,e)=>t.s5().LX()-e.s5().LX());for(i of h)if(i.oF())for(var n of i.lF())h.includes(n)||((s=[...n.j7()]).push(n),s.sort((t,e)=>t.s5().LX()-e.s5().LX()),s&&s.length&&h.splice(h.length,0,...s));for(r of h)r.Ux()._x()&&this.XH(r,!0)}else if(t.Ux()._x()&&this.XH(t,!0),t.oF())for(var a of t.lF()){var o=[...a.j7()];if(o.push(a),o.sort((t,e)=>t.s5().LX()-e.s5().LX()),o&&o.length)for(var l of o)l.Ux()._x()&&this.XH(l,!0)}}}}{let vec3EqualsXYZ2=function(t,e,i,s){return t[0]===Math.fround(e)&&t[1]===Math.fround(i)&&t[2]===Math.fround(s)},MaybePrepareLayerDraw2=function(t,e){lastLayerPreparedForDrawing!==t&&(t.Vj(e),lastLayerPreparedForDrawing=t)},C33=(vec3EqualsXYZ=vec3EqualsXYZ2,MaybePrepareLayerDraw=MaybePrepareLayerDraw2,self.$e),C3Debugger=self.C3Debugger,assert=self.assert,tempDestRect=C33.nh(C33.Rect),tempSrcRect=C33.nh(C33.Rect),tempLayoutRect=C33.nh(C33.Rect),tempColor=C33.nh(C33.Fa),glMatrix=self.pe,vec32=glMatrix.Ee,tempRender3dList=[],tempInstanceList1=[],tempInstanceList2=[],tempInstanceList3=[],lastLayerPreparedForDrawing=null;C33.DX=class Layout extends C33.rh{constructor(t,e,i){super(),this.NX=t,this.Qc=t.I5(),this.uh=i[0],this.FX=i[1],this.$X=i[2],this.FC=i[1],this.$C=i[2],this.BX=!!i[3],this.kX=!!i[4],this.WX=i[5],this.VX=i[6],this.HX=i[7],this.UX=null,this.DV=i[8],this.$p=e,this.ZV=0,this.QV=0,this.KV=1,this.JV=0,this.jX=new Set,this.XX=new Set,this.YX=new Set,this.qX=[],this.zX=[],this.KX=new Map,this.JX=new Map,this.ZX=[],this.QX=!1,this.tY=vec32.create(),this.eY=vec32.create(),this.iY=vec32.create(),this.sY=[],this.rY=[],this.hY=new Map,this.nY=new Map,this.aY=-1;let s=this.Qc.jB();this.mH=C33.nh(C33.vH,this,i[11]),this.nP=C33.nh(C33.jp.s4,s.SH(),{XG:(t,e)=>{e=e.ZO().Zb();t.vb(),t.nG(e),t.aG(e),s.TH(e)},qG:t=>this.CD()._H(t)}),this.yH=!0,this.lY=!1,this.zV=null,this.uY={},this.cY=new Map,this.fY=!0,this.dY=new self.dD(this),this.CY=C33.nh(C33.Event.x3);for(var r of i[9])this.sY.push(C33.GV.LH(this,null,r));this.pY();for(var h of this.PD())h.xH();for(var n of i[10]){var a=this.Qc.DH(n[1]);if(!a)throw new Error("missing nonworld object class");a.FH()||a.$H(n),this.ZX.push(n),this.NH(a)}}ah(){for(var t of this.rY)t.ah();C33.xn(this.rY),this.YX.clear(),this.UX=null,this.NX=null,this.Qc=null}I5(){return this.Qc}jc(){return this.uh}dU(){return this.DV}uP(){return this.$p}CD(){return this.mH}lP(){return this.vU(),this.nP}vU(){var t,e="low"===this.Qc.jB().zj();(this.yH||this.lY!==e||this.nP.K4())&&(t=this.CD().gU(),this.nP.J4(t.map(t=>t.Uy()),{KG:t.map(t=>t.uP()),ZG:e,i4:!0}),this.yH=!1,this.lY=e)}K6(){this.CD().K6(),this.yH=!0}mY(){let i=this.rY[0].bj();for(let t=1,e=this.rY.length;t<e;++t){var s=this.rY[t];0===s._N()&&0===s.EN()||(i=Math.min(i,s.bj()))}return i}vY(){return.5*this.Qc.FU()/this.mY()}SY(){return.5*this.Qc.$U()/this.mY()}AU(){return this.gY()?-1/0:this.vY()}MU(){return this.gY()?1/0:this.eC()-this.vY()}RU(){return this.gY()?-1/0:this.SY()}wU(){return this.gY()?1/0:this.cC()-this.SY()}ED(t){var e=this.AU(),i=this.MU();this.ZV!==(t=(t=i<t?i:t)<e?e:t)&&(this.ZV=t,this.TY(),this.Qc.u5())}ID(){return this.ZV}AD(t){var e=this.RU(),i=this.wU();this.QV!==(t=(t=i<t?i:t)<e?e:t)&&(this.QV=t,this.TY(),this.Qc.u5())}MD(){return this.QV}gY(){return this.BX}yX(){this.ED(this.ID()),this.AD(this.MD());for(var t of this.rY)t.IU()&&(t.ED(t.ID()),t.AD(t.MD()))}UD(t,e){this.WX===t&&this.VX===e||(this.WX=t,this.VX=e,this._Y()&&(this.yY(),this.TY(),this.Qc.u5()))}PU(){return this.zD()?.5:this.WX}LU(){return this.zD()?.5:this.VX}iX(){var t=this.PU(),e=this.LU();return t<0||1<t||e<0||1<e}YD(){this.kX&&(this.kX=!1,this.yY(),this.TY(),this.Qc.u5())}qD(){this.kX||(this.kX=!0,this.yY(),this.TY(),this.Qc.u5())}zD(){return this.kX}_Y(){return!this.zD()}EY(t){this.QX!==(t=!!t)&&(this.QX=t,this.TY(),this.Qc.u5())}zU(){return this.QX}IY(t,e,i,s,r,h,n,a,o){vec3EqualsXYZ2(this.tY,t,e,i)&&vec3EqualsXYZ2(this.eY,s,r,h)&&vec3EqualsXYZ2(this.iY,n,a,o)||(vec32.set(this.tY,t,e,i),vec32.set(this.eY,s,r,h),vec32.set(this.iY,n,a,o),this.AY())}AY(){this.TY(),this.Qc.u5()}jU(){return this.tY}xj(){return this.eY}Dj(){return this.iY}TD(){return this.KV}gD(t){this.KV!==t&&(this.KV=t,this.TY(),this.yX(),this.Qc.u5())}_D(t){t=C33.Ch(t),this.JV!==t&&(this.JV=t,this.TY(),this.Qc.u5())}yD(){return this.JV}eC(){return this.FC}oC(t){!isFinite(t)||t<1||(this.FC=t)}cC(){return this.$C}iC(t){!isFinite(t)||t<1||(this.$C=t)}MY(){return this.UX}fU(){return this.sY}*PD(){for(var t of this.sY)yield*t.iN()}OD(){return this.rY}RY(){return this.rY.length}r5(t){return"number"==typeof t?this.n5(t):this.aU(t.toString())}n5(t){return t=C33.dh(Math.floor(t),0,this.rY.length-1),this.rY[t]}aU(t){return this.hY.get(t.toLowerCase())||null}wY(t){return!!this.aU(t)}bY(t){return this.nY.get(t)||null}yY(){for(var t of this.rY)t.Nj()}TY(){for(var t of this.rY)t.EU()}ND(t,e,i){if(this.wY(t))throw new Error(`layer name '${t}' already in use`);if(!e&&i<2)throw new Error("invalid insert position");var s=2<=i?e:e.JD(),s=C33.nh(C33.GV,this,s,{name:t,sid:Math.floor(1e15*Math.random()),yV:!0});this.GY(s,e,i),this.I5().u5(),this.uU()}$D(t,e,i){if(!e&&i<2)throw new Error("invalid insert position");t===e&&i<2||(this.OY(t),this.GY(t,e,i),this.I5().u5(),this.uU())}kD(t){var e;this.OY(t)&&((e=this.Qc.BP()).oD(!0),t.ah(),e.oD(!1),this.I5().u5(),this.uU())}VD(){var t,e=new Set;for(t of this.PD())t.CU()&&!t.pU()&&e.add(t);if(0!==e.size){var i,s=this.Qc.BP();s.oD(!0);for(i of e)this.OY(i),i.ah();s.oD(!1),this.I5().u5(),this.uU()}}GY(e,i,s){if(2<=s)if(i){if(i===e||i.hj(e))throw new Error(`cannot move layer '${e.jc()}' to sub-layer of itself`);i.tj(e,2===s),e.ZU(i)}else 2===s?this.sY.push(e):this.sY.unshift(e),e.ZU(null);else{var t=i.JD();if(t){if(i.hj(e))throw new Error(`cannot move layer '${e.jc()}' to sub-layer of itself`);t.ej(e,i,0===s),e.ZU(t)}else{let t=this.sY.indexOf(i);if(-1===t)throw new Error("cannot find layer to insert by");0===s&&++t,this.sY.splice(t,0,e),e.ZU(null)}}}OY(t){var e=t.JD();if(e)return e.ij(t),!0;if(1<this.sY.length){e=this.sY.indexOf(t);if(-1===e)throw new Error("cannot find layer to remove");return this.sY.splice(e,1),!0}return!1}pY(){this.rY=[...this.PD()],this.hY.clear(),this.nY.clear();for(let t=0,e=this.rY.length;t<e;++t){var i=this.rY[t];i.oU(t),this.hY.set(i.jc().toLowerCase(),i),this.nY.set(i.dU(),i)}}PY(){let t=0;for(var e of this.sY){for(var i of e.iN())i.lU(t);e.cN()&&t++}}LY(){return this.sY.at(-1).hk()+1}async uU(){this.pY(),this.PY(),this.aY=this.LY()}xY(){return this.aY}DY(){this.aY=-1}dj(t){var e,i=[];for(e of this.sY){var s=e.hk();if(s===t)i.push(e);else if(t<s)break}return i}aj(){return{scrollX:this.ID(),scrollY:this.MD(),scale:this.TD(),angle:this.yD(),vpX:this.PU(),vpY:this.LU()}}oj(t){this.ED(t.scrollX),this.AD(t.scrollY),this.gD(t.scale),this._D(t.angle),this.UD(t.vpX,t.vpY)}NY(){let t=this.sY.filter(t=>t.rj())[0];for(;t;){if(!t.RN())return tempColor.Ka(t.PN()),tempColor.za(1),tempColor;if(t.yj())return tempColor.Va(0,0,0,0),tempColor;t=t.tN().filter(t=>t.rj())[0]}return tempColor.Va(0,0,0,0),tempColor}VH(){return this.fY}FY(){return[...this.jX]}NH(t){if(t.oF())for(var e of t.BY().$Y())this.jX.add(e);else this.jX.add(t)}kY(){return[...this.XX]}WY(t,e){if(t===this||!e)return Promise.resolve();t&&(C33.ba(this.XX,t.XX),t.XX.clear());var i,s=[];for(i of this.jX)this.XX.has(i)||(s.push(i.VY(e)),this.XX.add(i));return Promise.all(s)}async HY(t){if(t.hU())throw new Error("cannot load textures for family");var e=this.Qc.RS();!e||e.oR()||this.XX.has(t)||(this.XX.add(t),e=t.VY(e),this.UY(e),await e,t.jY(),this.Qc.u5())}UY(t){this.YX.add(t),t.then(()=>this.YX.delete(t)).catch(()=>this.YX.delete(t))}XY(){return Promise.all([...this.YX])}YY(t){if(t.hU()||0<t.rD())throw new Error("cannot unload textures");var e=this.Qc.RS();e&&this.XX.has(t)&&(this.XX.delete(t),t.qY(e))}zY(t,e){if(t!==this&&e)for(var i of this.XX)i.jH()||t.jX.has(i)||(i.qY(),this.XX.delete(i))}KY(){this.XX.clear()}async JY(t){var e=this.Qc,i=this.NX,s=e.BP(),r=(this.HX&&(this.UX=s.ZY(this.HX),this.UX.QY()),i.tq(this),this.FC=this.FX,this.$C=this.$X,this.ZV=e.RP()/2,this.QV=e.bP()/2,this.yX(),this.yY(),this.TY(),this.PY(),await this.Qc.jB().eq(this.LY(),!0),this.iq(t),this.Qc.sq(!0),this.rq(),this.fY||this.hq(),this.nq(this.qX),this.nq(this.zX),this.aq(),i.oq(),e.fD(),this.Qc.sq(!1),this.Qc.lq());if(await Promise.all(r),C33.xn(r),!e.uq()){for(var h of this.qX)h.cq();for(var n of this.zX)n.fq(this.KX,this.JX);for(var[a,o]of Object.entries(this.uY)){a=this.Qc.Cq(parseInt(a,10));a&&!a.hU()&&a.HH()&&C33.xn(o)}for(var l of this.qX)l.pq();for(var u of this.zX)u.pq()}C33.xn(this.qX),C33.xn(this.zX),this.KX.clear(),this.JX.clear(),await Promise.all([...this.jX].map(t=>t.mq(this.Qc.RS()))),t&&(e.x3().dispatchEvent(new C33.Event("beforefirstlayoutstart")),await e.vq(new C33.Event("beforeprojectstart"))),await this.Sq(new C33.Event("beforeanylayoutstart")),e.x3().dispatchEvent(new C33.Event("beforelayoutstart")),await this.vq(new C33.Event("beforelayoutstart")),e.uq()||await e.DF(C33.yq._q.Tq.gq,null,null),e.x3().dispatchEvent(new C33.Event("afterlayoutstart")),await this.vq(new C33.Event("afterlayoutstart")),await this.Sq(new C33.Event("afteranylayoutstart")),t&&(e.x3().dispatchEvent(new C33.Event("afterfirstlayoutstart")),await e.vq(new C33.Event("afterprojectstart"))),s.Eq(i),await this.XY(),this.fY=!1}iq(t){for(var e of this.Qc.rU())if(!e.hU()&&e._x())for(var i of e.eD()){var s=i.s5(),r=s.r5(),r=C33.dh(r.uP(),0,this.rY.length-1),r=this.rY[r];s.o5(r,!0),r.YH(i)}if(!t)for(var h of this.rY)h.QH(!1)}rq(){for(var t of this.rY)t.WH(this.qX),t.eU()}hq(){let e=!1;for(var[t,i]of Object.entries(this.uY)){var s,r=this.Qc.Cq(parseInt(t,10));if(r&&!r.hU()&&r.HH())for(var h of i){let t=null;r._x()&&!(t=h.hasOwnProperty("instJson")?this.bY(h.instJson.w.l):this.bY(h.w.l))||(s=this.Qc.UH(r,t,!1,0,0,!0),h.hasOwnProperty("instJson")?s.gg(h.instJson):s.gg(h),e=!0,this.zX.push(s),h.hasOwnProperty("instJson")&&(this.KX.set(s,h),this.JX.set(h.index,s)))}}for(var n of this.rY)n.QH(!0),n.l5();e&&(this.Qc.fD(),this.Qc.Iq())}nq(e){for(var i of e)if(i.oF()){var s,r=i.s5(),t=i.Aq();for(s of i.KN().BY().Mq())if(s!==i.KN()){var h=s.eD();if(h.length>t)i.Rq(h[t]);else{let t;t=r?this.Qc.UH(s,r.r5(),!0,r.rg(),r.ag(),!0):this.Qc.UH(s,null,!0,0,0,!0),this.Qc.fD(),s.wq(),i.Rq(t),e.push(t)}}}}aq(){for(var t of this.ZX)this.Qc.DH(t[1]).oF()||this.Qc.UH(t,null,!0)}bq(){var i=[],s=this.ZX;let r=0;for(let t=0,e=s.length;t<e;++t){var h=s[t],n=this.Qc.DH(h[1]);n.jH()?n.oF()&&n.BY().Gq()||i.push(this.Qc.UH(h,null,!0)):(s[r]=h,++r)}C33.Ln(s,r),this.Qc.fD(),this.nq(i)}sU(t,e,i,s,r,h,n){if(i)return i.sU(t,e,r,h,s,n);var a,o=[];for(a of this.rY)o.push(a.sU(t,e,r,h,s,n));return o.flat()}async Oq(){var t,e,i=this.NX;this.Qc.uq()||(await this.Sq(new C33.Event("beforeanylayoutend")),await this.vq(new C33.Event("beforelayoutend")),await this.Qc.DF(C33.yq._q.Tq.Pq,null,null),await this.vq(new C33.Event("afterlayoutend")),await this.Sq(new C33.Event("afteranylayoutend"))),i.Lq(!0),this.Qc.BP().xq(),this.fY||this.Dq();for(t of this.rY)t.iU();for(e of this.Qc.rU())if(!(e.jH()||e._x()||e.Ux().gx()||e.hU())){for(var s of e.eD())this.Qc.sF(s);this.Qc.fD()}i.Lq(!1),i.xL()===this&&i.tq(null)}Nq(t,e){var i=t.KN().dU().toString(),i=(this.uY.hasOwnProperty(i)||(this.uY[i]=[]),this.uY[i]),e={index:e,instJson:t.Sg(),sceneGraphJson:{children:[]}};i.push(e),this.cY.set(t,e)}Fq(t){var e,i=this.cY.get(t);for(e of t.$q()){var s=this.cY.get(e);s&&i.sceneGraphJson.children.push({index:s.index,flags:C33.kq.Bq(e.s5())})}}Dq(){this.cY.clear();let t=0;for(var e of this.rY){e.uj();for(var i of e.a5()){var s=i.KN();!s.jH()&&s.HH()&&(this.Nq(i,t),t++)}}for(var r of this.rY)for(var h of r.a5()){var n=h.KN();!n.jH()&&n.HH()&&this.Fq(h)}this.cY.clear()}Wq(){this.uY={},this.fY=!0}Zb(){return this.zV}yj(){var t=this.Qc,e=t.RS().aS();return"low"===t.jB().zj()||e&&t.qj()||this.mH.Ej()||e&&t.YU()}Vq(t){var e=this.Qc.jB();this.yj()?(t.rG(null),t.jb(0,0,0,0),t={rT:this.Qc.GP(),HT:t.v2()||this.Qc.qj()||this.mH.Ej(),Yj:!!t.v2()&&this.Qc.qj()},"low"===e.zj()&&(t.width=e.Bj(),t.height=e.kj()),this.zV=this.Qc.Kj(t)):this.zV=null}Hq(t){this.Qc.Uq(t)&&(t.qb(!1),t.rG(null),t.M2(),t.hG(this.zV))}jq(t){this.yj()&&(t.qb(!1),this.Xq(t,this.zV))}Yq(t){t.rG(this.zV),t.Yu(this.NY()),this.Qc.YU()&&t.Yb();var e=this.dj(0);this.Jj(t,this.zV,e,!0),t.v2()&&t.StartMeasuringRenderPassTime(0,1),this.jq(t),this.zV=null}qq(t,e){let i=null;this.Qc.Uq(t)&&(i=this.zV),t.rG(i),t.jb(0,0,0,0),this.Qc.YU()&&t.Yb();var s=this.dj(e);this.Jj(t,i,s,!0),this.Hq(t),t.tS(),this.Qc.jB().zq(e)}Jj(t,s,e,r){var h=e.filter(t=>t.rj());for(let e=0,i=h.length;e<i;){var n=h[e];if(n.KU()&&!n.Ij()){tempRender3dList.push(n);for(let t=e+1;t<i;++t){var a=h[t];if(!a.KU()||a.Ij())break;tempRender3dList.push(h[t])}if(2<=tempRender3dList.length||1===tempRender3dList.length&&tempRender3dList[0].sj()){this.Kq(t,s,tempRender3dList),e+=tempRender3dList.length,C33.xn(tempRender3dList);continue}C33.xn(tempRender3dList)}n.Yg(t,s,r&&0===e),++e}}Xq(t,e){var i=this.mH.gU(),s=this.Qc;0===i.length?(t.rG(null),t.M2(),t.hG(e),t.aG(e),s.TH(e)):(tempLayoutRect.set(0,0,s.FU(),s.$U()),this.lP().aO(t,null,{oO:this,lO:3,devicePixelRatio:this.Qc.SX(),uO:this.Qc.TX()*this.TD(),cO:this.yD(),PO:tempLayoutRect,LO:null,zG:!0}))}Kq(s,r,t){t[0].RN()||(tempColor.Ka(t[0].PN()),tempColor.za(1),s.Yu(tempColor));this.Qc.jB();s.qb(!0);var e,h=tempInstanceList1,n=tempInstanceList2,a=tempInstanceList3;for(e of t)e.uj(),e.UU(h);var t=t[0],i=t.Hj(s);t.Xj(s);for(let e=0,i=h.length;e<i;){var o=h[e],l=o.s5(),u=l.r5();if(l.nN()&&l.nX(u.hX())){(!o.aX()||0<l.lX())&&a.push(o);var c=o.s5().C7();n.push(o);let t=e+1;for(;t<i;++t){var f=h[t],d=f.s5();if(d.nN()&&d.nX(d.r5().hX())){if(d.C7()!==c)break;(f.aX()?(0<d.lX()&&a.push(f),n):a).push(f)}}if(1!==n.length||n[0].uX()){this.Jq(s,r,n);for(let t=0,e=a.length;t<e;++t){var C=a[t],p=C.s5(),m=p.r5();p.fX(!0),MaybePrepareLayerDraw2(m,s),m.rX(C,p,s,r),p.fX(!1)}}else{MaybePrepareLayerDraw2(u,s),u.rX(o,l,s,r);for(let t=0,e=a.length;t<e;++t){var v,S,g=a[t];g!==o&&(S=(v=g.s5()).r5(),MaybePrepareLayerDraw2(S,s),S.rX(g,v,s,r))}}e=t,C33.xn(n),C33.xn(a)}else++e}i&&s.pG(i),C33.xn(h),lastLayerPreparedForDrawing=null}Jq(i,s,r){i.lG();for(let t=0,e=r.length;t<e;++t){var h=r[t],n=h.s5(),a=n.r5();n.dX(!0),MaybePrepareLayerDraw2(a,i),a.CX(h,n,i)}i.uG();for(let t=0,e=r.length;t<e;++t){var o=r[t],l=o.s5(),u=l.r5();MaybePrepareLayerDraw2(u,i),u.rX(o,l,i,s),l.dX(!1)}i.fG()}GX(){var t,e,i={sx:this.ID(),sy:this.MD(),s:this.TD(),a:this.yD(),w:this.eC(),h:this.cC(),ortho:this.zD(),vpX:this.PU(),vpY:this.LU(),fv:this.fY,persist:this.uY,fx:this.mH.Sg(),layers:{},dynamicLayers:[]};for(t of this.rY)t.CU()?(e=t.JD(),i.dynamicLayers.push({sid:t.dU(),name:t.jc(),parentSid:e?e.dU():null,siblingIndex:t.cU(),data:t.GX()})):i.layers[t.dU().toString()]=t.GX();return i}OX(t){this.ZV=t.sx,this.QV=t.sy,this.KV=t.s,this.JV=t.a,this.FC=t.w,this.$C=t.h,this.kX=!!t.ortho,t.hasOwnProperty("vpX")&&(this.WX=t.vpX),t.hasOwnProperty("vpY")&&(this.VX=t.vpY),this.fY=!!t.fv,this.uY=t.persist,this.mH.gg(t.fx),this.yH=!0;for(var[e,i]of Object.entries(t.layers)){e=parseInt(e,10),e=this.bY(e);e&&e.OX(i)}if(t.hasOwnProperty("dynamicLayers")){this.VD(),this.Qc.fD();var s,r,h=new Map,n=t.dynamicLayers;for(let t=n.length-1;0<=t;--t){var a=n[t],o=a.sid,l=a.name,u=a.parentSid,c=a.siblingIndex,a=a.data;if(this.pY(),!this.wY(l)&&!this.bY(o)){let t,e;if(null===u)t=null,e=this.sY;else{if(!(t=this.bY(u)))continue;e=t.tN()}u=C33.nh(C33.GV,this,t,{name:l,sid:o,yV:!0});e.push(u);let i=h.get(e);i||(i=[],h.set(e,i)),i.push({a7:u,siblingIndex:c}),u.OX(a)}}for([s,r]of h){r.sort((t,e)=>t.siblingIndex-e.siblingIndex);for(var f of r){var d=f.a7,f=f.siblingIndex,C=s.indexOf(d);s.splice(C,1),s.splice(f,0,d)}}}this.uU(),this.yY(),this.TY()}DL(){return this.dY}DP(){return this.CY}Zq(t){t.layout=this.DL();var e=this.Qc,e=e.Qq()&&!e.BP().uD();e&&C3Debugger.StartMeasuringScriptTime(),this.CY.dispatchEvent(t),e&&C3Debugger.AddScriptTime()}vq(t){return t.layout=this.DL(),this.CY.U3(t)}Sq(t){return t.layout=this.DL(),this.Qc.vq(t)}ez(){this.iz(this.sY)}iz(t,e=0){var i,t=t.slice(0);t.reverse();for(i of t)console.log("\t".repeat(e)+"- "+i.jc()),this.iz(i.tN(),e+1)}}}{let C33=self.$e;C33.sz=class LayoutManager extends C33.rh{constructor(t){super(),this.Qc=t,this.rz=[],this.hz=new Map,this.nz=new Map,this.az=null,this.oz=[],this.lz=null,this.uz=0,this.cz=null}ah(){this.Qc=null,this.az=null,this.lz=null,this.cz=null,C33.xn(this.rz),this.hz.clear(),this.nz.clear(),C33.xn(this.oz)}F_(t){t=C33.nh(C33.DX,this,this.rz.length,t);this.rz.push(t),this.hz.set(t.jc().toLowerCase(),t),this.nz.set(t.dU(),t)}I5(){return this.Qc}fz(t){this.lz=t}dz(){if(this.lz)return this.lz;if(this.rz.length)return this.rz[0];throw new Error("no first layout")}Cz(t){return this.hz.get(t.toLowerCase())||null}pz(t){return this.nz.get(t)||null}mz(t){return t=C33.dh(Math.floor(t),0,this.rz.length-1),this.rz[t]}$L(t){return"number"==typeof t?this.mz(t):this.Cz(t.toString())}kL(){return this.rz}tq(t){this.az=t}xL(){return this.az}vz(t){if(this.oz.includes(t))throw new Error("layout already running");this.oz.push(t)}Sz(t){t=this.oz.indexOf(t);if(-1===t)throw new Error("layout not running");this.oz.splice(t,1)}*gz(){this.az&&(yield this.az),this.oz.length&&(yield*this.oz)}Tz(t){return this.az===t||this.oz.includes(t)}Lq(t){if(t)this.uz++;else{if(this.uz<=0)throw new Error("already unset");this.uz--}}cD(){return 0<this.uz}HL(t){this.cz=t}oq(){this.cz=null}VL(){return!!this.cz}_z(){return this.cz}yz(){var t=this.xL();t&&t.yY()}Ez(){var t=this.xL();t&&t.TY()}}}{let C33=self.$e,NAMES_REGEXP=new RegExp("<(.+?)>","g");C33.Iz=class TimelineManager extends C33.rh{constructor(t){super(),this.Qc=t,this.Az=C33.nh(C33.Mz),this.Rz=null,this.wz=[],this.bz=new Map,this.Gz=new Map,this.Oz=new Map,this.Pz=[],this.Lz=[],this.xz=[],this.Dz=!1,this.Nz=!1,this.Fz=!1,this.$z=()=>this.Bz(),this.kz=()=>this.Wz(),this.Vz=()=>this.Uz(),this.jz=()=>this.Xz(),this.Yz=t=>this.qz(t.H6),this.zz=t=>this.Kz(),this.Jz=t=>this.Zz(),this.Qz=t=>this.tK(),this.eK=[],this.iK=0}ah(){this.sK(),this.$z=null,this.kz=null,this.Vz=null,this.jz=null,this.Yz=null,this.Jz=null;for(var t of this.wz)t.$$(),t.ah();C33.xn(this.wz),this.wz=null,this.Az.ah(),this.Az=null,C33.xn(this.Pz),this.Pz=null,C33.xn(this.Lz),this.Lz=null,C33.xn(this.xz),this.xz=null,this.bz.clear(),this.bz=null,this.Gz.clear(),this.Gz=null,this.Oz.clear(),this.Oz=null,C33.xn(this.eK),this.eK=null,this.Qc=null}rK(){var t=this.Qc.x3();t.addEventListener("pretick",this.$z),t.addEventListener("tick2",this.kz),t.addEventListener("beforelayoutchange",this.Vz),t.addEventListener("layoutchange",this.jz),t.addEventListener("instancedestroy",this.Yz),t.addEventListener("beforeload",this.zz),t.addEventListener("afterload",this.Jz),t.addEventListener("afterlayoutstart",this.Qz)}sK(){var t=this.Qc.x3();t.removeEventListener("pretick",this.$z),t.removeEventListener("tick2",this.kz),t.removeEventListener("beforelayoutchange",this.Vz),t.removeEventListener("layoutchange",this.jz),t.removeEventListener("instancedestroy",this.Yz),t.removeEventListener("beforeload",this.zz),t.removeEventListener("afterload",this.Jz),t.removeEventListener("afterlayoutstart",this.Qz)}F_(t){this.Az.sc(t);t=C33.nK.hK(t,this);this.sc(t),this.aK(t),this.Oz.set(t.jc(),0)}oK(t){var e=this.lK(),t=t.fF(),e=e.ri(t),e=C33.nK.oK(t+":"+this.Oz.get(t),e,this);return this.uK(t),this.sc(e),e}uK(t){this.Oz.set(t,this.Oz.get(t)+1)}cK(){for(var t of this.wz)t.fK()||(t=t.fF(),this.uK(t))}dK(){for(var t of this.Oz.keys())this.Oz.set(t,0)}sc(t){this.wz.push(t),this.bz.set(t.jc().toLowerCase(),t)}Sf(t){t.CK(),t.fK()||(C33.kn(this.wz,t),C33.kn(this.Pz,t),C33.kn(this.Lz,t),C33.kn(this.xz,t),this.bz.delete(t.jc().toLowerCase()),this.pK(t),t.N$())||t.ah()}LF(t){this.Qc.LF(t,this.Rz,null)}I5(){return this.Qc}lK(){return this.Az}mK(t){this.Rz=t}vK(){return this.Rz}*SK(){for(var t of this.wz)yield t}*gK(){for(var t of this.Lz)yield t}TK(t,e){this.Gz.has(t)||this.Gz.set(t,new Set),this.Gz.get(t).add(e)}aK(t){for(var e of t._K())this.TK(e,t)}pK(t){for(var[e,i]of this.Gz.entries())i.has(t)&&(i.delete(t),0===i.size)&&this.Gz.delete(e)}yK(t){if(this.Gz.has(t))return this.Gz.get(t)}EK(t,i){if(i)for(let e of this.wz){var s=i.every(t=>e.IK(t.H6,t.trackId));if(s&&e.jc().includes(t.jc()))return e}}AK(t){return this.bz.get(t.toLowerCase())||null}MK(t){for(var e of this.Pz)if(e.jc()===t)return e;for(var i of this.Lz)if(i.jc()===t)return i;return null}*RK(t){if(NAMES_REGEXP.test(t)){NAMES_REGEXP.lastIndex=0;var e,i=new Set;do{var s,r=NAMES_REGEXP.exec(t);if(r)for(s of r[1].split(","))i.add(s)}while(r);for(e of i.values()){var h=this.AK(e);h&&(yield h)}i.clear()}else{var n=this.AK(t);n&&(yield n)}}*wK(t){for(var e of this.wz)e.k$(t)&&(yield e)}bK(t){this.Pz.includes(t)||this.Pz.push(t),this.GK()}PK(t){C33.kn(this.Lz,t),this.LK()}xK(t){this.Lz.includes(t)?(t.DK(!0),t.NK(!1),t.FK(!1)):(t.DK(!1),t.NK(!0),t.FK(!1),this.Pz.includes(t)||this.Pz.push(t)),this.GK()}$K(t){t.DK(!1),t.NK(!1),t.BK(),C33.kn(this.Pz,t),this.LK()}kK(t){t.DK(!1),t.NK(!1),this.Lz.includes(t)&&(t.FK(!0),this.xz.push(t),C33.kn(this.Lz,t)),this.Pz.includes(t)&&t.FK(!0)}WK(t){t.DK(!1),t.NK(!1),t.FK(!1),t.q$(1),C33.kn(this.Lz,t)}VK(t){this.kK(t),t.BK()}Bz(){if(!this.I5().uq()&&this.Dz&&!this.Nz){for(this.Fz=!0;this.Pz.length;){var t=this.Pz.pop();(t.HK()?(t.UK(),this.xz):(t.jK(),this.Lz)).push(t),0!==t.XK()&&(this.iK=1)}var e=this.Qc.YK(),i=this.Qc.qK(),s=this.Qc.pL();for(let t=this.Lz.length-1;0<=t;t--){var r=this.Lz[t];r&&r.zK(e,s,i)}this.Fz=!1,0!==this.iK&&this.I5().u5()}}Wz(){if(!this.I5().uq()&&this.Dz&&!this.Nz){let i;for(let t=0,e=this.xz.length;t<e;t++){var s=this.xz[t];i=i||new Set,s.CK(),this.KK(s),i.add(s)}if(i){C33.Hn(this.xz,i);for(let t=this.iK=0,e=this.Lz.length;t<e;t++)if(0!==this.Lz[t].XK()){this.iK=1;break}}this.LK()}}KK(t){t.N$()||t.JK()&&t.ZK()&&t.QK()&&t.tJ()}GK(){this.Dz||(this.Dz=!0)}LK(){this.xz.length||this.Lz.length||this.Pz.length||this.Fz||(this.Dz=!1)}Uz(){for(this.Nz=!0;this.Pz.length;)this.$K(this.Pz.pop());var t,e,i,s=new Set;for(t of this.Lz)t.Uz()&&(t.CK(),s.add(t));C33.Hn(this.Lz,s),s.clear();for(e of this.xz)e.Uz()&&(e.CK(),s.add(e));C33.Hn(this.xz,s),this.LK();for(i of this.wz)i.eJ()}Xz(){this.Nz=!1}qz(t){var e=t.KN(),e=this.yK(e);if(e)if(this.Qc.uq())this.eK.push(t);else for(var i of e)i.fK()||(i.N$()?this.Sf(i):i.JK()||(this.KK(i),this.Sf(i)))}Kz(){for(var t of this.Pz.map(t=>t))this.KK(t),this.Sf(t);for(var e of this.Lz.map(t=>t))this.KK(e),this.Sf(e)}Zz(){for(var t of this.eK)this.qz(t);C33.xn(this.eK);for(var e of this.wz)e.Zz()}tK(){var t=this.Qc.FL().xL();if(t)for(var e of this.wz){var i=e.iJ();i&&t.jc()===i&&this.xK(e)}}GX(){return{timelinesJson:this.sJ(),scheduledTimelinesJson:this.rJ(),playingTimelinesJson:this.hJ(),markedForRemovalTimelinesJson:this.nJ(),hasRuntimeListeners:this.Dz,changingLayout:this.Nz,isTickingTimelines:this.Fz}}OX(t){t&&(this.dK(),this.aJ(t.timelinesJson),this.oJ(t.scheduledTimelinesJson),this.lJ(t.playingTimelinesJson),this.uJ(t.markedForRemovalTimelinesJson),this.Dz=!t.hasRuntimeListeners,this.Nz=!!t.changingLayout,this.Fz=!!t.isTickingTimelines,this.cK(),this.GK(),this.LK())}sJ(){return this.wz.map(t=>t.GX())}aJ(t){for(var e of t){let t=this.AK(e.name);if(t)t.OX(e);else{var i=this.cJ(e);if(!i)continue;i=this.AK(i);(t=this.oK(i)).OX(e)}t.fJ()||this.Sf(t)}}cJ(t){t=t.name.split(":");return t&&2===t.length?t[0]:null}rJ(){return this.dJ(this.Pz)}oJ(t){this.CJ(t,this.Pz)}hJ(){return this.dJ(this.Lz)}lJ(t){this.CJ(t,this.Lz)}nJ(){return this.dJ(this.xz)}uJ(t){this.CJ(t,this.xz)}pJ(t,e){if(e)for(var i of e)if(i===t.jc())return!0;return!1}dJ(t){return t.map(t=>t.jc())}CJ(t,e){var i,s=new Set;for(i of e)this.pJ(i,t)||s.add(i);if(C33.Hn(e,s),t){var r;for(r of t){var h=this.AK(r);h&&!e.find((e=>t=>t.jc()===e)(r))&&e.push(h)}}}}}{let C33=self.$e,STEPS=100,LENGTH_STEP_SIZE=.01,BEZIER_STEP_SIZE=25,REFINE_ITERATIONS=20,LOOKUP_STEPS_FROM_LAST=5,TANGENT_RESULT=[0,0],MAP_RESULT=[0,0],SHORT_PROJECTION_RESULT=[0,0],PROJECTION_RESULT=[0,0,0,0,0],REFINE_LUT=new Array(4),REFINE_LUT_OBJECTS=[{x:0,y:0,t:0,Mt:0},{x:0,y:0,t:0,Mt:0},{x:0,y:0,t:0,Mt:0}],REFINE_RESULT={x:0,y:0,t:0,Mt:0};C33.mJ=class TimelineInfo{constructor(t,e){this.vJ=!1,this.SJ=t,this.gJ=[];let i=null;if(i=e?this.SJ.TJ(e):C33.first(this.SJ._J())){t=i.cB("offsetX"),e=i.cB("offsetY");if(t&&e){this.yJ=t,this.EJ=e;var s=t.IJ(),r=e.IJ();for(let t=1,e=Math.min(s.length,r.length);t<e;++t){var h=s[t],n=(h.AJ(),h.MJ()),a=r[t],o=(a.AJ(),a.MJ());n&&"cubic-bezier"===n.RJ()&&o&&"cubic-bezier"===o.RJ()?this.gJ.push(C33.nh(C33.wJ,n,o,h,a,this.gJ.length)):(n&&"line"===n.RJ()&&o&&o.RJ(),this.gJ.push(C33.nh(C33.bJ,h,a,this.gJ.length)))}this.vJ=!0}}}ah(){for(var t of this.gJ)t.ah();C33.xn(this.gJ),this.gJ=null,this.SJ=null,this.yJ=null,this.EJ=null}GJ(){return this.vJ}OJ(){return this.gJ}PJ(t){var e,i="relative"===this.yJ.LJ()?t.rg():0,s="relative"===this.EJ.LJ()?t.ag():0;for(e of this.gJ)e.PJ(i,s)}Xp(e,i,t){let s=NaN;var r=this.gJ.length;for(let t=0;t<r;t++){var h,n=this.gJ[t];"cubic-bezier"===n.Yy()&&(h=n.Xp(e,i),isNaN(s)||h[3]<s)&&(s=h[3],SHORT_PROJECTION_RESULT[0]=h[2],SHORT_PROJECTION_RESULT[1]=n.uP())}return SHORT_PROJECTION_RESULT}xJ(e,i,t){var s=t.tRange;C33.ds(s[0])||(s[0]=0),C33.ds(s[1])||(s[1]=1);let r=NaN;var h=this.gJ.length;for(let t=0;t<h;t++){var n,a=this.gJ[t];"cubic-bezier"===a.Yy()&&(n=a.DJ(e,i,s),isNaN(r)||n[3]<r)&&(r=n[3],SHORT_PROJECTION_RESULT[0]=n[2],SHORT_PROJECTION_RESULT[1]=a.uP())}return SHORT_PROJECTION_RESULT}NJ(t,e){return this.gJ[e].NJ(t)}FJ(t,e){return this.gJ[e].FJ(t)}},C33.wJ=class TimelineCubicBezierSegmentInfo{constructor(t,e,i,s,r){this.$p=r;var r=t.$J("cubic-bezier"),h=i.$J("cubic-bezier"),n=e.$J("cubic-bezier"),a=s.$J("cubic-bezier");this.BJ=t.kJ(),this.WJ=e.kJ(),this.VJ=t.kJ()+r.HJ(),this.UJ=e.kJ()+n.HJ(),this.jJ=i.kJ()+h.XJ(),this.YJ=s.kJ()+a.XJ(),this.qJ=i.kJ(),this.zJ=s.kJ(),this.KJ=0,this.JJ=0,this.ZJ=0,this.QJ=0,this.tZ=0,this.eZ=0,this.iZ=0,this.sZ=0,this.rZ=0,this.hZ=0,this.nZ=0,this.aZ=0,this.oZ=0,this.lZ=0,this.uZ=0,this.cZ=0,this.fZ=0,this.dZ=0,this.CZ=0,this.pZ=0,this.mZ=NaN,this.vJ=!1,this.vZ=STEPS,this.SZ=new Array(this.vZ+1),this.SZ[0]=0,this.gZ=0,this.TZ=[],this._Z=[];for(let t=0;t<STEPS;t++)this._Z.push({x:0,y:0,t:0,Mt:0});this.yZ()}ah(){C33.xn(this.SZ),this.SZ=null,C33.xn(this.TZ),this.TZ=null,C33.xn(this._Z),this._Z=null}Yy(){return"cubic-bezier"}uP(){return this.$p}EZ(){return Math.floor(this.gZ/BEZIER_STEP_SIZE)}IZ(){return 1/this.EZ()}PJ(t,e){this.AZ=t,this.MZ=e,this.SZ=new Array(this.vZ+1),this.SZ[0]=0,this.yZ(),this.KJ=this.BJ+this.AZ,this.JJ=this.WJ+this.MZ,this.ZJ=this.VJ+this.AZ,this.QJ=this.UJ+this.MZ,this.tZ=this.jJ+this.AZ,this.eZ=this.YJ+this.MZ,this.iZ=this.qJ+this.AZ,this.sZ=this.zJ+this.MZ,this.rZ=3*(this.ZJ-this.KJ),this.hZ=3*(this.QJ-this.JJ),this.nZ=3*(this.tZ-this.ZJ),this.aZ=3*(this.eZ-this.QJ),this.oZ=3*(this.iZ-this.tZ),this.lZ=3*(this.sZ-this.eZ),this.uZ=3*(this.ZJ-this.KJ),this.cZ=3*(this.KJ+this.tZ-2*this.ZJ),this.fZ=this.iZ-this.KJ+3*(this.ZJ-this.tZ),this.dZ=3*(this.QJ-this.JJ),this.CZ=3*(this.JJ+this.eZ-2*this.QJ),this.pZ=this.sZ-this.JJ+3*(this.QJ-this.eZ)}Map(t){return this.vJ?(t=this.RZ(t),MAP_RESULT[0]=this.wZ(t),MAP_RESULT[1]=this.bZ(t),MAP_RESULT):NaN}Xp(t,e){var i=this.GZ(STEPS),s=this.OZ(t,e,i),t=this.PZ(t,e,i,s);return PROJECTION_RESULT[0]=t.x,PROJECTION_RESULT[1]=t.y,PROJECTION_RESULT[2]=t.t,PROJECTION_RESULT[3]=t.Mt,PROJECTION_RESULT}DJ(t,e,i){var s=this.GZ(STEPS),i=this.LZ(t,e,s,i),t=this.PZ(t,e,s,i);return PROJECTION_RESULT[0]=t.x,PROJECTION_RESULT[1]=t.y,PROJECTION_RESULT[2]=t.t,PROJECTION_RESULT[3]=t.Mt,PROJECTION_RESULT}NJ(t){var e=1-t,i=e*e,e=2*e*t,t=t*t,s=i*this.rZ+e*this.nZ+t*this.oZ,i=i*this.hZ+e*this.aZ+t*this.lZ,e=Math.hypot(s,i);return TANGENT_RESULT[0]=s/e,TANGENT_RESULT[1]=i/e,TANGENT_RESULT}FJ(t){var e=1-t,i=e*e,e=2*e*t,t=t*t,s=i*this.rZ+e*this.nZ+t*this.oZ,i=i*this.hZ+e*this.aZ+t*this.lZ;return Math.atan2(i,s)}RZ(s){if(this.vJ){var r=s*this.SZ[this.vZ];let t=0,e=this.vZ,i=0;for(;t<e;)i=t+((e-t)/2|0),this.SZ[i]<r?t=i+1:e=i;this.SZ[i]>r&&i--;s=this.SZ[i];return s===r?i/this.vZ:(i+(r-s)/(this.SZ[i+1]-s))/this.vZ}}wZ(t){return this.vJ?self.nc.Ic("cubicbezier")(t,this.BJ+this.AZ,this.VJ+this.AZ,this.jJ+this.AZ,this.qJ+this.AZ):NaN}bZ(t){return this.vJ?self.nc.Ic("cubicbezier")(t,this.WJ+this.MZ,this.UJ+this.MZ,this.YJ+this.MZ,this.zJ+this.MZ):NaN}GZ(e){if(e=e||STEPS,!(this.TZ.length>=e)){this.TZ=new Array(e),e++;for(let t=0;t<e-1;t++){var i=t/(e-1),s=i**2,r=i**3,h=this.uZ*i,n=this.cZ*s,a=this.fZ*r,o=this.dZ*i,s=this.CZ*s,r=this.pZ*r,h=this.KJ+h+n+a,n=this.JJ+o+s+r;this._Z[t].x=h,this._Z[t].y=n,this._Z[t].t=i,this._Z[t].Mt=0,this.TZ[t]=this._Z[t]}}return this.TZ}OZ(e,i,s,t=0,r=Number.MAX_SAFE_INTEGER){let h=0;if(isNaN(this.mZ))for(let t=0;t<STEPS;t++){var n=s[t],a=n.x-e,o=n.y-i;n.Mt=a*a+o*o,n.Mt<r&&(r=n.Mt,h=t)}else{for(let t=this.mZ;t<this.mZ+LOOKUP_STEPS_FROM_LAST&&!(t>=s.length);t++){var l=s[t],u=l.x-e,c=l.y-i;l.Mt=u*u+c*c,l.Mt<r&&(r=l.Mt,h=t)}for(let t=this.mZ;t>this.mZ-LOOKUP_STEPS_FROM_LAST&&!(t<0);t--){var f=s[t],d=f.x-e,C=f.y-i;f.Mt=d*d+C*C,f.Mt<r&&(r=f.Mt,h=t)}}return this.mZ=h}LZ(e,i,s,r,h=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.mZ))for(let t=0;t<STEPS;t++){var a=s[t],o=a.x-e,l=a.y-i;a.Mt=o*o+l*l,a.t>=r[0]&&a.t<=r[1]&&a.Mt<h&&(h=a.Mt,n=t)}else{for(let t=this.mZ;t<this.mZ+LOOKUP_STEPS_FROM_LAST&&!(t>=s.length);t++){var u=s[t],c=u.x-e,f=u.y-i;u.Mt=c*c+f*f,u.t>=r[0]&&u.t<=r[1]&&u.Mt<h&&(h=u.Mt,n=t)}for(let t=this.mZ;t>this.mZ-LOOKUP_STEPS_FROM_LAST&&!(t<0);t--){var d=s[t],C=d.x-e,p=d.y-i;d.Mt=C*C+p*p,d.t>=r[0]&&d.t<=r[1]&&d.Mt<h&&(h=d.Mt,n=t)}}return this.mZ=n}PZ(e,i,t,s){let r=t[s],h=1,n=Number.MAX_SAFE_INTEGER;t:do{var a=t.length,o=0===s?0:s-1,a=s===a-1?a-1:s+1,l=t[o].t,u=(t[a].t-l)/4;if(u<.001)break;REFINE_LUT[0]=t[o];for(let t=1;t<=2;t++){var c=l+t*u,f=c**2,d=c**3,C=this.uZ*c,p=this.cZ*f,m=this.fZ*d,v=this.dZ*c,f=this.CZ*f,d=this.pZ*d,C=this.KJ+C+p+m,p=this.JJ+v+f+d,m=C-e,v=p-i,f=m*m+v*v;if(f<n){n=f,s=t,REFINE_RESULT.x=C,REFINE_RESULT.y=p,REFINE_RESULT.t=c,REFINE_RESULT.Mt=f,r=REFINE_RESULT;break t}d=REFINE_LUT_OBJECTS[t-1];d.x=C,d.y=p,d.t=c,d.Mt=f,REFINE_LUT[t]=d}REFINE_LUT[3]=t[a],t=REFINE_LUT}while(h++<REFINE_ITERATIONS);return r}yZ(){this.vJ=!0;let e=this.wZ(0),i=this.bZ(0),s=0;for(let t=1;t<=this.vZ;t++){var r=this.wZ(t*LENGTH_STEP_SIZE),h=this.bZ(t*LENGTH_STEP_SIZE),n=e-r,a=i-h;s+=Math.hypot(n,a),this.SZ[t]=s,e=r,i=h}this.gZ=s}},C33.bJ=class TimelineLineSegmentInfo{constructor(t,e,i){this.$p=i,this.xZ=t.kJ(),this.DZ=e.kJ(),this.AZ=0,this.MZ=0}ah(){}Yy(){return"line"}uP(){return this.$p}PJ(t,e){this.AZ=t,this.MZ=e}rg(){return this.xZ+this.AZ}ag(){return this.DZ+this.MZ}}}{let C33=self.$e,PING_PONG_BEGIN=0,PING_PONG_END=1;C33.nK=class Timeline extends C33.rh{constructor(t,e,i){super(),this.Qc=i.I5(),this.NZ=i,this.FZ=e,this.uh=t,this.$Z=[],this.BZ=0,this.kZ=null,this.WZ=0,this.VZ(),this.HZ=null,this.UZ=null,this.jZ=0,this.XZ=0,this.YZ=1,this.qZ=PING_PONG_BEGIN,this.zZ=1,this.KZ=!1,this.JZ=!1,this.ZZ=!1,this.QZ=!0,this.tQ=!1,this.eQ=!1,this.iQ=-1,this.sQ=!1,this.rQ=!1,this.hQ=!1,this.nQ=!1,this.aQ=NaN,this.oQ=[""],this.lQ="",this.uQ=!1,this.iK=0,this.cQ=0,this.fQ=null}static hK(t,e){var i=e.lK(),s=i.dQ(),i=i.ri(t[s]),t=C33.nh(C33.nK,t[s],i,e);return t.CQ(!0),t}static oK(t,e,i){return C33.nh(C33.nK,t,e,i)}ah(){if(!this.N$()){var t,e=this.Qc.x3();this.NZ.$K(this),this.NZ.VK(this);for(t of this.$Z)t.ah();C33.xn(this.$Z),this.$Z=null,this.Qc=null,this.NZ=null,this.FZ=null,this.tQ=!0,this.HZ=null,this.UZ=null,this.pQ(e)}}pQ(t){var e=C33.nh(C33.Event,"timelinestatereleased");e.mQ=this,t.dispatchEvent(e)}Yy(){return 0}VZ(){for(var t of this.FZ.SQ().vQ())this.BZ=this.$Z.push(C33.gQ.F_(this,t))}TQ(){return this.NZ}I5(){return this.Qc}_J(){return this.$Z}_Q(i,s,r,h){if(this.cQ){let e;for(let t=0;t<this.$Z.length;t++){var n=this.$Z[t];i===n.hB()&&((n=n.cB(r))&&s.constructor===n.yQ().constructor&&n.LJ()===h.LJ())&&(e=e||[]).push(n)}return e}}fJ(){return!!this.$Z.length}TJ(t){for(var e of this.$Z)if(C33.vr(e.lB(),t))return e;return null}EQ(t){for(var e of this.$Z)if(!e.IQ()&&C33.vr(e.jc(),t))return e;return null}Zk(t){this.uh=t}jc(){return this.uh}AQ(){return this.FZ}fF(){return this.FZ.jc()}H$(){return this.FZ.H$()}V$(t){this.FZ.V$(t)}MQ(){return this.FZ.MQ()}RQ(t){this.FZ.RQ(t)}wQ(){return this.FZ.wQ()}bQ(t){this.FZ.bQ(t)}LJ(){return this.FZ.LJ()}GQ(t){this.FZ.LJ(t)}rB(t){for(var e of this._J())e.rB(t)}j$(){return this.FZ.j$()}U$(t){return this.FZ.U$(t)}Y$(){return this.FZ.Y$()}X$(t){return this.FZ.X$(t)}s$(){return this.FZ.s$()}OQ(t){return this.FZ.OQ(t)}q$(t){return this.YZ=t}z$(){return this.YZ}iJ(){return this.FZ.iJ()}PQ(){return this.FZ.PQ()}LQ(){return this.FZ.LQ()}xQ(){return this.qZ}DQ(){return!this.IsPlaying()||0<this.YZ}J$(){return this.HZ||(this.HZ=new Promise(t=>{this.UZ=t})),this.HZ}BK(){this.HZ&&(this.UZ(),this.HZ=null,this.UZ=null)}NQ(t){this.oQ=C33.nK.FQ(t),this.uQ=!0}K$(){return this.oQ}$Q(){return this.uQ&&(this.lQ=this.oQ.join(" ")),this.uQ=!1,this.lQ}k$(t){return!!(this.oQ&&this.oQ.length&&(t=C33.nK.FQ(t))&&t.length)&&t.every(C33.nK.BQ,this)}kQ(){C33.yq.Timeline&&this.constructor===C33.nK&&(C33.yq.Timeline.Tq.PushTriggerTimeline(this),this.NZ.LF(C33.yq.Timeline.Tq.OnTimelineStarted),this.NZ.LF(C33.yq.Timeline.Tq.OnTimelineStartedByName),this.NZ.LF(C33.yq.Timeline.Tq.OnTimelineStartedByTags),this.NZ.LF(C33.yq.Timeline.Tq.OnAnyTimelineStarted),C33.yq.Timeline.Tq.PopTriggerTimeline())}WQ(){this.iQ=this.Qc.VQ()}tJ(){this.hQ||(this.hQ=!0,C33.yq.Timeline&&this.constructor===C33.nK&&(C33.yq.Timeline.Tq.PushTriggerTimeline(this),this.NZ.LF(C33.yq.Timeline.Tq.OnTimelineFinished),this.NZ.LF(C33.yq.Timeline.Tq.OnTimelineFinishedByName),this.NZ.LF(C33.yq.Timeline.Tq.OnTimelineFinishedByTags),this.NZ.LF(C33.yq.Timeline.Tq.OnAnyTimelineFinished),C33.yq.Timeline.Tq.PopTriggerTimeline()))}DK(t){this.KZ=t}HQ(){return this.iQ===this.Qc.VQ()}IsPlaying(t=!1){return!!this.HQ()||!(!this.UQ()||t)||this.KZ}jQ(){return this.IsPlaying(!0)}Q$(){return this.XQ()}XQ(){return!(this.N$()||this.UQ()||this.jQ()||this.ZK())}NK(t){this.JZ=t}UQ(){return this.JZ}YQ(t){this.QZ=t;t=this.UG();(t<=0||t>=this.H$())&&(this.QZ=!0)}ZK(){return this.QZ}N$(){return this.tQ}FK(t){this.eQ=t}HK(){return this.eQ}qQ(t){this.sQ=t}zQ(){return this.sQ}CQ(t){this.rQ=!!t}fK(){return this.rQ}QK(){return this.ZZ}UG(){return this.jZ}W$(t){var e=this.UG();this.KQ(t),this.YQ(!1),this.ZK()||this.qQ(!0),!this.jQ()&&!this.UQ()&&this.ZZ||(this.jQ()||this.UQ()||this.ZZ?this.jQ()?this.$$():this.UQ()&&(this.NZ.$K(this),this.JQ()):this.JQ()),this.ZQ(),this.QQ(this.UG(),!1,!0,!0,e),this.ttt(),this.iK&&this.I5().u5(),this.ett()}KQ(t){(t=C33.ds(t)?t:this.H$())<0?this.jZ=0:t>=this.H$()?this.jZ=this.H$():this.jZ=t}itt(t){(t=C33.ds(t)?t:this.H$())<0?this.jZ=0:t>=this.H$()?this.jZ=this.H$():this.jZ=t;for(var e of this.$Z)e.stt()}ett(){C33.yq.Timeline&&this.constructor===C33.nK&&(C33.yq.Timeline.Tq.PushTriggerTimeline(this),this.NZ.LF(C33.yq.Timeline.Tq.OnTimeSet),this.NZ.LF(C33.yq.Timeline.Tq.OnTimeSetByName),this.NZ.LF(C33.yq.Timeline.Tq.OnTimeSetByTags),C33.yq.Timeline.Tq.PopTriggerTimeline())}htt(){if(!this.j$())if(this.Y$()&&this.qZ===PING_PONG_END){if(this.DQ()){if(this.UG()>=this.H$())return!1}else if(this.UG()<=0)return!1}else if(!this.j$()&&!this.Y$())if(this.DQ()){if(this.UG()>=this.H$())return!1}else if(this.UG()<=0)return!1;return!0}B$(){this.N$()||this.htt()&&this.Play(!0)}Play(t=!1){return!this.N$()&&!this.UQ()&&(this.jQ()&&this.HQ()?this.ntt():!this.jQ()&&!!(this.ZK()||t||this.zQ())&&this.att())}ntt(){return this.qQ(!1),this.NZ.PK(this),this.NZ.xK(this),this.J$(),!0}att(){return this.qQ(!1),this.NZ.xK(this),this.J$(),!0}$$(t=!1){this.N$()||(this.YQ(t),this.NZ.kK(this),this.ZK()&&this.BK())}rf(t=!0,e=!1){if(!this.N$()){if(!this.jQ()&&this.UQ())return this.NZ.$K(this);var i;this.ZK()||(this.$$(!0),this.DQ()?this.KQ(0):this.KQ(this.H$()),i=this.UG(),this.ZQ(),e?this.ott(i):this.QQ(i,!1,!1,!0),t&&this.ett(),this.ttt(),this.iK&&t&&this.I5().u5())}}ltt(){this.rf(!1,!0)}ott(t){this.QQ(t,!1,!1,!0,NaN,!1,!0)}Uz(){if(!this.N$()){if(!this.I5().uq()&&this.utt())return!1;this.NZ.WK(this),this.I5().uq()||this.ltt()}return!0}JQ(){this.jK(!0)}UK(){this.jK(!1,!0),this.DK(!1),this.NK(!1)}jK(t=!1,e=!1){if(!this.HK()||e){if(t){this.hQ=!1,this.ZZ=!0,this.nQ=!0,this.ZQ();for(var i of this.$Z)i.jK()}else if(this.DK(!0),this.NK(!1),this.kQ(),this.ZK()){this.iQ=-1,this.qZ!==PING_PONG_BEGIN&&(this.YZ=Math.abs(this.YZ)),this.qZ=PING_PONG_BEGIN,this.zZ=1,this.QZ=!1,this.hQ=!1,this.ZZ=!0,this.nQ=!0,this.DQ()?this.KQ(0):this.KQ(this.H$()),this.ZQ();for(var s of this.$Z)s.jK()}else{this.nQ=!0,this.hQ=!1,this.ZQ();for(var r of this.$Z)r.ctt()}this.ttt()}}XK(){return this.iK}ZQ(){this.cQ=0;for(var t of this.$Z)t.GR()&&(this.cQ=1)}ttt(){this.iK=0;for(var t of this.$Z)t.ftt(),0===this.iK&&1===t.XK()&&(this.iK=1),this.kZ||1!==t.dtt()||(this.kZ||(this.kZ=[]),this.WZ=this.kZ.push(t))}zK(t,e,i){if(this.LQ()){if(0===t&&0===this.aQ)return;this.aQ=t,t=i}else{if(0===i&&0===this.aQ)return;t=this.aQ=i,e=1}var s=this.jZ+this.XZ,i=s+t*e*this.YZ,r=this.FZ.Ctt;i<0?(this.jZ=0,this.XZ=-i):r<=i?(this.jZ=r,this.XZ=this.jZ-i):(this.jZ=i,this.XZ=0);let h=!1,n=!1;t=this.j$(),e=this.Y$();t||e?t&&!e?0<this.YZ?this.jZ>=r&&(this.itt(0),n=!0):this.jZ<=0&&(this.itt(r),n=!0):!t&&e?0<this.YZ?this.jZ>=r&&(this.KQ(r),this.q$(-1*this.z$()),n=!0,this.qZ===PING_PONG_END?this.zZ<this.s$()?(this.zZ++,this.qZ=PING_PONG_BEGIN):h=!0:this.qZ===PING_PONG_BEGIN&&(this.qZ=PING_PONG_END)):this.jZ<=0&&(this.KQ(0),this.q$(-1*this.z$()),n=!0,this.qZ===PING_PONG_END?this.zZ<this.s$()?(this.zZ++,this.qZ=PING_PONG_BEGIN):h=!0:this.qZ===PING_PONG_BEGIN&&(this.qZ=PING_PONG_END)):t&&e&&(0<this.YZ?this.jZ>=r&&(this.KQ(r),this.q$(-1*this.z$()),n=!0,this.qZ++,C33.wrap(this.qZ,0,2)):this.jZ<=0&&(this.KQ(0),this.q$(-1*this.z$()),n=!0,this.qZ++,C33.wrap(this.qZ,0,2))):0<this.YZ?this.jZ>=r&&(this.zZ<this.s$()?(this.zZ++,this.itt(0),n=!0):(this.KQ(r),h=!0)):this.jZ<=0&&(this.zZ<this.s$()?(this.zZ++,this.itt(r),n=!0):(this.KQ(0),h=!0));let a;var o=this.BZ;if(h){for(a=0;a<o;a++)this.$Z[a].ptt();this.$$(!0),this.WQ()}else{var l=this.WZ;for(a=0;a<l;a++)this.kZ[a].mtt();if(1===this.cQ)for(a=0;a<o;a++){var u=this.$Z[a],c=u.vtt();this.jZ-c<0&&0<s-c?(this.jZ=c<0?0:r<=c?r:c,u.Dc(c,!0,!1,n,this.nQ,!1)):u.Dc(this.jZ,!0,!1,n,this.nQ,!1)}else for(a=0;a<o;a++)this.$Z[a].Dc(this.jZ,!0,!1,n,this.nQ,!1);for(a=0;a<l;a++)this.kZ[a].Stt();this.nQ&&(this.nQ=!1)}}QQ(e,i=!1,s=!1,r=!1,h=NaN,t=!1,n=!1){for(var a of this.$Z)a.mtt();for(var o of this.$Z){let t=e;var l,u;"number"!=typeof h||isNaN(h)||(l=this.UG()-o.vtt(),u=h-o.vtt(),l<0&&0<u&&(t=o.vtt(),this.KQ(t))),o.Dc(t,i,s,r,this.nQ,n)}for(var c of this.$Z)c.Stt();this.nQ&&t&&(this.nQ=!1)}gtt(){var t=this.FZ.SQ().Ttt(),t=C33.gQ.F_(this,t);return this.BZ=this.$Z.push(t),t}CK(){if(!this.N$())for(var t of this.$Z)t._tt()}eJ(){for(var t of this.$Z)t.eJ()}ytt(){for(var t of this.$Z)t.Ett()}Itt(t,e,i){if(e){var s;if("number"==typeof i&&0<=i)return(i=this.$Z[i])?(i.Att(e),void this.NZ.TK(e.KN(),this)):void 0;for(s of this.$Z)if(s.IQ())if(t){if(s.lB()===t){s.Att(e),this.NZ.TK(e.KN(),this);break}}else if(!s.Mtt()){s.Att(e),this.NZ.TK(e.KN(),this);break}}}IK(t,e){for(var i of this.$Z)if(i.IQ())if(e){if(e===i.lB()&&t===i.hB())return!0}else if(t===i.hB())return!0;return!1}JK(){return this.$Z.some(t=>!t.IQ()||t.Rtt())}utt(){return this.$Z.some(t=>!!t.IQ()&&!!t.Rtt()&&!!(t=t.KN())&&t.jH())}cB(t){for(var e of this._J())for(var i of e.wtt())if(i.btt()===t)return i}Gtt(t){for(var e of this.$Z)if(t===e.hB())return e;return null}Ott(t){let i=t?t.split(" "):[];var s,t=new Set(i.map(t=>t.toLowerCase().trim()));i=[...t.values()];for(s of this._J())for(let e of s.Ptt())if(i.every(t=>e.Ltt(t)))return e}_K(){var t,e=[];for(t of this._J())e.push(t.KN());return e.filter(t=>t)}Zz(){for(var t of this._J())t.Zz()}GX(){return{tracksJson:this.xtt(),name:this.uh,playheadTime:this.UG(),playbackRate:this.YZ,pingPongState:this.qZ,currentRepeatCount:this.zZ,isPlaying:this.KZ,isScheduled:this.JZ,initialStateSet:this.ZZ,finishedTriggers:this.hQ,complete:this.QZ,released:this.tQ,markedForRemoval:this.eQ,completedTick:this.iQ,implicitPause:this.sQ,isTemplate:this.rQ,tags:this.oQ.join(" "),stringTags:this.lQ,tagsChanged:this.uQ,firstTick:this.nQ}}OX(t){t&&(this.Dtt(t.tracksJson),this.uh=t.name,this.jZ=t.playheadTime,this.YZ=t.playbackRate,this.qZ=t.pingPongState,this.zZ=t.currentRepeatCount,this.KZ=!!t.isPlaying,this.JZ=!!t.isScheduled,this.ZZ=!!t.initialStateSet,this.hQ=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.QZ=!!t.complete,this.tQ=!!t.released,this.eQ=!!t.markedForRemoval,this.iQ=t.completedTick,this.sQ=!!t.implicitPause,this.rQ=!!t.isTemplate,this.oQ=t.tags.split(" "),this.lQ=t.stringTags,this.uQ=!!t.tagsChanged,this.nQ=!!t.firstTick)}xtt(){return this.$Z.map(t=>t.GX())}Dtt(t){this.ytt(),t.forEach((t,e)=>{this.$Z[e].OX(t)}),this.$Z.filter(t=>t.Rtt())}static BQ(t){var e=this.K$();return""===t?1===e.length&&""===e[0]:e.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static FQ(t){if(C33.Bs(t))return t.slice(0);if(C33.Is(t))return t.split(" ");throw new Error("invalid tags")}Ntt(){return this.fQ||(this.fQ=C33.nh(self.eB,this)),this.fQ}}}{let C33=self.$e,INSTANCE_TRACK=0,VALUE_TRACK=1,AUDIO_TRACK=2;C33.gQ=class Track extends C33.rh{constructor(t,e){super(),this.SJ=t,this.Ftt=e,this.$tt=e.SQ(),this.Btt=NaN,this.ktt=NaN,this.Wtt=null,this.Vtt=null,this.Htt=!1,this.IR=0<e.vtt(),this.Utt=!1,this.jtt=!1,this.Xtt=NaN,this.Ytt=null,this.qtt=this.Ftt.Ktt().ztt(),this.Jtt=[],this.Ztt(),this.Qtt=0,this.iK=0,this.tet=0}static F_(t,e){return C33.nh(C33.gQ,t,e)}ah(){this.qtt=null;for(var t of this.Jtt)t.ah();C33.xn(this.Jtt),this.Jtt=null,this.SJ=null,this.Wtt=null,this.Vtt=null,this.Ftt=null,this.Ytt=null}Ztt(){for(var t of this.Ftt.iet().eet())this.Jtt.push(C33.ret.F_(this,t))}_tt(){for(var t of this.Jtt)t._tt()}eJ(){for(var t of this.Jtt)t.eJ();this.Wtt=null,this.Vtt=null}het(){return this.SJ}I5(){return this.SJ.I5()}Ptt(){return this.qtt||(this.qtt=this.Ftt.Ktt().ztt()),this.qtt}wtt(){return this.Jtt}cB(e){for(let t=0;t<this.Jtt.length;t++){var i=this.Jtt[t];if(i.btt()===e)return i}}net(){this.Wtt||this.hB()}aet(){return!!this.Wtt&&!this.Wtt.dk()}Rtt(){var t;return!!this.IQ()&&(t=this.oet(),!!(t=this.I5().ZL(t)))&&!t.dk()}KN(){if(this.IQ()){var t=this.let();if(-1!==t)return this.I5().DH(t)}}uet(){return this.SJ._J().indexOf(this)}Ett(){this.Wtt=null,this.Btt=NaN,this.Vtt=null,this.ktt=NaN,this.Htt=!0}Mtt(){return!!this.Wtt}hB(){var t;if(!this.Htt)return this.Wtt&&this.aet()||(t=this.oet(),this.Wtt=this.I5().ZL(t)),this.Wtt}Att(t){if(this.Htt=!1,this.Wtt!==t){this.eJ(),this.Wtt=t,this.ktt=t.KN().uP(),this.Btt=t.uF(),this.Vtt=t.s5();for(var e of this.cet()){var i=e.fet,s=e.det;switch(i.Cet()){case"instance-variable":s.pet();var r=t.KN(),h=r.met(e.name),n=r.vet(h),r=r.Tet(h);n===e.name&&r===e.type&&s._et(h);break;case"behavior":var a,n=e.k6,r=this.KN(),h=t.KN(),o=s.V6(h);n&&o&&(a=n.jc(),r.yet(a),h.yet(a),s.pet(),s.Eet(o.dU()))}}}}*cet(){for(var t of this.Jtt){var e=t.yQ(),i=this.KN(),s={fet:t,det:e};switch(t.Cet()){case"world-instance":s.property=t.btt();break;case"instance-variable":var r=e.pet();s.name=i.vet(r),s.type=i.Tet(r);break;case"effect":var r=i.CD(),h=e.Iet(r);s.Aet=h;break;case"behavior":h=e.V6(i);s.k6=h;break;case"plugin":s.Hx=i.Ux()}yield s}}s5(){var t;return this.Vtt&&this.aet()||(t=this.hB())&&(this.Vtt=t.s5()),this.Vtt}Met(){return this.Ftt}oet(){return isNaN(this.Btt)?this.Ftt.oet():this.Btt}Ret(t){this.Ftt.Ret(t)}wQ(){return this.Ftt.wQ()}bQ(t){this.Ftt.bQ(t)}LJ(){return this.Ftt.LJ()}lB(){return this.Ftt.lB()}vtt(){return this.Ftt.vtt()}wet(){return this.Ftt.wet()}bet(t){this.Ftt.bet(t)}GQ(t){this.Ftt.GQ(t)}rB(t){for(var e of this.Ptt())e.rB(t);for(var i of this.wtt())i.rB(t)}Get(){return this.Ftt.Get()}Oet(t){this.Ftt.Oet(t)}let(){return isNaN(this.ktt)?this.Ftt.let():this.ktt}Pet(t){this.Ftt.Pet(t)}Let(t){this.Ftt.Let(t)}xet(){var t=this.hB();if(t&&t.O6().Det())return t.O6().xet();return this.Ftt.xet()}Net(t){this.Ftt.Net(t)}Fet(){var t=this.hB();if(t&&t.O6().Det())return t.O6().Fet();return this.Ftt.Fet()}Yy(){return this.Ftt.Yy()}jc(){return this.Ftt.jc()}IQ(){return this.Yy()===INSTANCE_TRACK}$et(){return this.Yy()===VALUE_TRACK}Bet(){return this.Yy()===AUDIO_TRACK}ket(){return this.Qtt}XK(){return this.iK}dtt(){return this.tet}GR(){return this.IR}stt(){for(var t of this.Jtt)t.stt()}jK(){if(this.net(),this.aet()||!this.IQ()){var t,e=this.het().DQ()?0:this.wet();for(t of this.Jtt)t.jK(e),0===this.Qtt&&1===t.ket()&&(this.Qtt=1),0===this.iK&&1===t.XK()&&(this.iK=1);this.tet=0,this.Jtt.some(t=>t.dtt())&&(this.tet=1),this.Ytt=this.Wet(e),this.Utt=!1,this.jtt=!1,this.Dc(e),this.Vet(this.Wet(e))}}ctt(){if(this.net(),this.aet()||!this.IQ()){this.SJ.DQ();var t,e=this.SJ.UG()-this.vtt();this.Ytt=this.Wet(e);for(t of this.Jtt)t.ctt(e)}}ptt(){var t;this.het().ZK()||(this.net(),!this.aet()&&this.IQ())||this.IR||(t=this.SJ.UG(),this.vtt()+this.wet()<=t?this.Dc(this.wet(),!0,!1,!0,!1,!1,!0):t<=0&&this.Dc(0,!0,!1,!0,!1,!1,!0))}ftt(){for(let t=0,e=this.Jtt.length;t<e;t++){var i=this.Jtt[t];i.ftt(),0===this.Qtt&&1===i.ket()&&(this.Qtt=1),0===this.iK&&1===i.XK()&&(this.iK=1)}}mtt(){var e=this.Jtt.length;for(let t=0;t<e;t++)this.Jtt[t].mtt()}Dc(i,t=!1,s=!1,r=!1,e=!1,h=!1,n=!1){this.Wtt||this.hB();var a=this.Wtt&&!this.Wtt.dk(),o=this.Ftt.a3===INSTANCE_TRACK;if((a||!o)&&!(h&&o&&this.KN().jH()||(i-=this.vtt())<0)){this.Het(i,t),this.Uet(i,t,e);for(let t=0,e=this.Jtt.length;t<e;t++)this.Jtt[t].Dc(i,s,r,n);this.jet(i,t),0!==this.Qtt&&(this.Vtt||(this.Vtt=this.Wtt.s5()),this.Vtt)&&this.Vtt.o7()}}Stt(){var e=this.Jtt.length;for(let t=0;t<e;t++)this.Jtt[t].Stt()}Het(t,e){if(e&&this.IR&&!this.Utt){var i;if(this.het().DQ()){if(t<0)return}else if(t>this.wet())return;for(i of this.Jtt)i.jK();this.Utt=!0}}jet(t,e){if(e&&(this.IR&&!this.jtt))if(this.het().DQ()){if(t>=this.wet()){for(var i of this.Jtt)i.Dc(this.wet(),!1,!0);this.jtt=!0}}else if(t<=0){for(var s of this.Jtt)s.Dc(0,!1,!0);this.jtt=!0}}Uet(t,e,i){var s,r;i||e&&C33.yq.Timeline&&(i=this.het(),e=this.Ytt.AJ(),r=this.Ytt.UG(),s=e?e.UG():i.H$(),t<=r||s<=t)&&(this.Ytt=this.$tt.Xet(t,this.Ftt),i.DQ()?e&&this.Vet(this.Ytt):(r=this.Ytt.AJ())&&this.Vet(r))}Wet(t){var e=this.$tt.Yet(t,this.Ftt);return e||this.$tt.Xet(t,this.Ftt)}Vet(t){var e,i;C33.yq.Timeline&&(i=(e=this.het()).TQ(),C33.yq.Timeline.Tq.PushTriggerTimeline(e),C33.yq.Timeline.Tq.PushTriggerKeyframe(t),i.LF(C33.yq.Timeline.Tq.OnAnyKeyframeReached),i.LF(C33.yq.Timeline.Tq.Vet),C33.yq.Timeline.Tq.PopTriggerTimeline(e),C33.yq.Timeline.Tq.PopTriggerKeyframe(t))}qet(){return this.Ftt.Ktt().zet()}Ket(){var t=this.Ftt.iet().Jet(),t=C33.ret.F_(this,t);return this.Jtt.push(t),t}Zet(t){this.Ftt.Ktt().Qet(t)}tit(t){for(var e of this.Jtt)e.tit(t)}eit(){for(var t of this.Jtt)t.eit()}iit(){if(this.net(),this.aet()||!this.IQ())for(var t of this.Jtt)t.iit()}sit(){if(this.net(),this.aet()||!this.IQ()){let t=!1;for(var e of this.Jtt){e=e.sit();!t&&e&&(t=!0)}var i;t&&((i=this.qet()).W$(this.het().UG()),i.rB("noease"),i.Oet(!0),i.NQ(""))}}Zz(){isNaN(this.Xtt)||this.rit(this.Xtt),this.Xtt=NaN}GX(){var t=this.hB(),t=t?t.uF():this.oet();return{propertyTracksJson:this.hit(),lastKeyframeDataItemJson:this.nit(),initialStateOfNestedSet:this.Utt,endStateOfNestedSet:this.jtt,instanceUid:t,cleared:this.Htt}}OX(t){if(t){this.ait(t.propertyTracksJson),this.oit(t.lastKeyframeDataItemJson),this.Xtt=t.instanceUid,this.Utt=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Utt=t.initialStateOfNestedSet),this.jtt=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.jtt=t.endStateOfNestedSet),this.Htt=!!t.hasOwnProperty("cleared")&&t.cleared;for(var e of this.Jtt)0===this.Qtt&&1===e.ket()&&(this.Qtt=1),0===this.iK&&1===e.XK()&&(this.iK=1);this.tet=0,this.Jtt.some(t=>t.dtt())&&(this.tet=1)}}nit(){return this.Ftt.Ktt().lit(this.Ytt)}hit(){return this.Jtt.map(t=>t.GX())}ait(t){t.forEach((t,e)=>{this.Jtt[e].OX(t)})}rit(t){C33.ds(t)&&(t=this.I5().ZL(t))&&this.het().Itt(this.Ftt.lB(),t,this.uet())}oit(t){var e=this.Ftt.Ktt();this.Ytt=e.uit(t)}}}{let C33=self.$e;C33.ret=class PropertyTrack extends C33.rh{constructor(t,e){super(),this.cit=t,this.fit=e,this.dit=e.iet(),this.Qtt=0,this.iK=0,this.tet=0,this.Cit=this.yQ(),this.pit=this.fit.vit().mit(),this.Sit=null,this.git=null}static F_(t,e){return C33.nh(C33.ret,t,e)}ah(){this.cit=null,this.Cit&&(this.Cit.ah(),this.Cit=null),this.pit=null,this.fit=null,this.dit=null}ket(){return this.Qtt}XK(){return this.iK}dtt(){return this.tet}Tit(){return!!this.git}_it(t){this.git=t}yit(){return this.git}Eit(){return this.cit}Iit(){return this.fit}iet(){return this.dit}het(){return this.cit.het()}I5(){return this.cit.I5()}hB(){return this.cit.hB()}yQ(){if(!this.Cit){let t;switch(this.fit.Cet()){case"behavior":t=new C33.ret.Ait(this);break;case"effect":t=new C33.ret.Mit(this),this.iK=1;break;case"instance-variable":t=new C33.ret.Rit(this);break;case"plugin":t=new C33.ret.wit(this),this.iK=1;break;case"world-instance":t=new C33.ret.bit(this),this.iK=1,this.Qtt=1;break;case"value":t=new C33.ret.Git(this);break;case"audio":t=new C33.ret.Oit(this)}this.Cit=t}return this.Cit}Cet(){return this.fit.Cet()}Pit(t){this.fit.Pit(t)}Lit(){return this.fit.xit()}Dit(t){this.fit.Nit(t)}uB(){return this.yQ().Fit()}btt(){return this.fit.$it()}Bit(t){this.fit.kit(t)}Wit(){return this.fit.Yy()}Vit(t){this.fit.Hit(t)}Uit(){return this.iet().jit(this.fit).Yy()}Xit(){return this.fit.Xit()}Yit(t){this.fit.Yit(t)}qit(){return this.fit.qit()}zit(t){this.fit.zit(t)}Get(){return this.fit.Get()}Oet(t){this.fit.Oet(t)}wQ(){return this.fit.wQ()}bQ(t){this.fit.bQ(t)}LJ(){return this.fit.LJ()}GQ(t){this.fit.GQ(t)}rB(t){for(var e of this.Kit())e.rB(t)}Jit(){return this.fit.Jit()}Kit(){return this.pit||(this.pit=this.fit.vit().mit()),this.pit}IJ(){return this.fit.vit().IJ()}Zit(t){return this.dit.Zit(t,this.fit)}Qit(t){return this.dit.Qit(t,this.fit)}tst(t){let e=this.dit.Zit(t,this.fit),i;return i=e?this.dit.est(t,this.fit):(e=this.dit.Qit(t,this.fit),this.dit.ist(t,this.fit)),{start:e,end:i}}*sst(){for(var t of this.Kit())yield t.kJ()}*rst(){for(var t of this.Kit())yield t.UG()}_tt(){this.yQ()._tt()}eJ(){this.yQ().eJ()}hst(){return this.yQ().hst()}stt(){this.yQ().stt()}jK(t){this.yQ().jK(),this.Sit=this.nst(t),this.ftt()}ctt(t){this.yQ().ctt(),this.Sit=this.nst(t)}ftt(){var t,e,i,s=this.Eit();this.tet=0,s.IQ()&&(i=this.het(),s=s.hB(),t=this.yQ(),e=this.btt(),t.ast()?(i=i._Q(s,t,e,this))&&i.length&&(this.tet=1):this.tet=0)}nst(t){var e=this.het(),i=this.dit.Zit(t,this.fit);return i||(e.DQ()?this.dit.Qit(t,this.fit):this.dit.ist(t,this.fit))}mtt(){this.Cit.mtt()}Dc(t,e=!1,i=!1,s=!1){let r,h,n=!1;var a,o,l;(r=e?this.dit.Qit(t,this.fit):((!this.Sit||(a=this.het(),l=this.Sit.AJ(),o=this.Sit.UG(),l=l?l.UG():a.H$(),t<=o)||l<=t)&&(this.Sit=this.dit.Qit(t,this.fit),n=!0),this.Sit))&&(h=r.AJ()),this.Cit.Dc(t,r,h,e,i,s,n)}ost(t){(!this.Sit||(i=this.het(),e=this.Sit.AJ(),s=this.Sit.UG(),e=e?e.UG():i.H$(),t<=s)||e<=t)&&(this.Sit=this.dit.Qit(t,this.fit));var e,i=this.Sit,s=i.AJ();return this.Cit.ost(t,i,s)}lst(t,e,i){return this.Cit.ost(t,e,i)}Stt(){this.Cit.Stt()}static ust(t,e){var i=e.Iit();return e.dit.Qit(t,i)}static cst(t,e){var i=e.Iit();return e.dit.ist(t,i)}fst(){var t=this.fit.vit().dst();return this.Sit=null,t}tit(t){this.Sit=null,this.fit.vit().Cst(t)}eit(){this.yQ().eit()}iit(){var t,e;this.yQ().iit()&&(t=this.dit.jit(this.fit),e=this.yQ().hst(),t.pst(e))}sit(){var t=this.yQ().sit();return t&&this.mst(),this.yQ().vst(),t}mst(){var t=this.het().UG(),e=this.yQ(),i=C33.ret.ust(t,this),s=this.fst();s.Hit(i.Yy()),s.W$(t),s.rB(i.Sst()),s.Oet(!0),s.gst(e.Tst()),s.pst(e.hst())}GX(){return{sourceAdapterJson:this.yQ().GX()}}OX(t){t&&this.yQ().OX(t.sourceAdapterJson)}}}{let C33=self.$e,NS=C33.ret;NS.bit=class PropertySourceAdapter{constructor(t){this._st=t,this.yst=null,this.Est()}ah(){this.yst&&(this.yst.ah(),this.yst=null),this._st=null}ast(){return this.yst.ast()}cB(){return this._st}_tt(){this.yst&&this.yst._tt()}eJ(){this.yst&&this.yst.eJ()}Est(){return this.yst||(this.yst=this.Ist()),this.yst}pet(){}uP(){return this.pet()}Ast(){}stt(){this.Est().stt()}jK(){this.Est().jK()}ctt(){this.Est().ctt()}mtt(){this.yst.Mst()}Dc(t,e,i,s,r,h,n){let a;switch(this._st.Uit()){case"numeric":a=NS.Rst.Dc(t,e,i,this._st);break;case"angle":a=NS.wst.Dc(t,e,i,this._st);break;case"boolean":a=NS.bst.Dc(t,e,i,this._st);break;case"color":a=NS.Gst.Dc(t,e,i,this._st);break;case"text":a=NS.Ost.Dc(t,e,i,this._st)}this.yst.Pst(t,a,e,i,s,r,h,n)}ost(t,e,i){switch(this._st.Uit()){case"numeric":return NS.Rst.Dc(t,e,i,this._st);case"angle":return NS.wst.Dc(t,e,i,this._st);case"boolean":return NS.bst.Dc(t,e,i,this._st);case"color":return NS.Gst.Dc(t,e,i,this._st);case"text":return NS.Ost.Dc(t,e,i,this._st)}}Stt(){this.yst.Lst()}eit(){this.Est().xst()}vst(){this.Est().vst()}hst(){return this.Est().hst()}iit(){return this.Est().iit()}sit(){return this.Est().sit()}Tst(){var t=this._st,e=t.Eit().het().UG(),i=NS.ust(e,t),s=i.AJ();switch(t.Uit()){case"numeric":return NS.Rst.Dc(e,i,s,t);case"angle":return NS.wst.Dc(e,i,s,t);case"boolean":return NS.bst.Dc(e,i,s,t);case"color":return NS.Gst.Dc(e,i,s,t);case"text":return NS.Ost.Dc(e,i,s,t)}}Ist(){var t=this._st;switch(t.Jit()?t.Uit():""){case"combo":case"boolean":case"text":case"string":return new NS.Nst.Dst(this);case"numeric":case"number":case"angle":return new("combo"===this._st.Wit()?NS.Nst.Dst:NS.Nst.Fst)(this);case"color":case"offsetColor":return new NS.Nst.$st(this);default:return new NS.Nst.Fst(this)}}GX(){return{propertyAdapterJson:this.Est().GX()}}OX(t){t&&this.Est().OX(t.propertyAdapterJson)}}}{let C33=self.$e,INDEX=0;class InstanceVariableSourceAdapter extends C33.ret.bit{constructor(t){super(t),this.Bst=NaN}pet(){return this._st.Iit().xit()[INDEX]}uP(){return this.Bst||super.uP()}Ast(){return this._st.Eit().hB()}_et(t){this._st.Iit().xit()[INDEX]!==t&&(this.Bst=t)}Dc(t,e,i,s,r,h,n){this.Est().kst(e.Fit())&&super.Dc(t,e,i,s,r,h,n)}ost(t,e,i){if(this.Est().kst(e.Fit()))return super.ost(t,e,i)}GX(){return Object.assign(super.GX(),{index:this.Bst})}OX(t){t&&(super.OX(t),this.Bst=t.index)}}C33.ret.Rit=InstanceVariableSourceAdapter}{let C33=self.$e,SID=0,INDEX=1,NAME=2;class BehaviorSourceAdapter extends C33.ret.bit{constructor(t){super(t),this.DV=NaN}pet(){return this._st.Iit().xit()[INDEX]}Ast(){var t=this._st.Iit(),e=this._st.Eit(),t=this.DV||t.xit()[SID],e=e.hB(),t=e.Wst(t);return e.Vst()[t].O6()}V6(t){var e=this._st.Iit().xit()[NAME];return t.Hst(e)}Eet(t){this._st.Iit().xit()[SID]!==t&&(this.DV=t)}Dc(t,e,i,s,r,h,n){var a=this._st.Eit().hB();this.V6(a.KN())&&super.Dc(t,e,i,s,r,h,n)}ost(t,e,i){var s=this._st.Eit().hB();if(this.V6(s.KN()))return super.ost(t,e,i)}GX(){return Object.assign(super.GX(),{sid:this.DV})}OX(t){t&&(super.OX(t),this.DV=t.sid)}}C33.ret.Ait=BehaviorSourceAdapter}{let C33=self.$e,NAME=0,INDEX=1;class EffectSourceAdapter extends C33.ret.bit{constructor(t){super(t)}pet(){return this._st.Iit().xit()[INDEX]}Ast(){var t=this._st.Eit().s5().n7(),e=t.CD(),e=this.Iet(e).uP();return t.q6(e)?t.Ust(e):null}Iet(t){var e=this._st.Iit().xit()[NAME];return t.jst(e)}Dc(t,e,i,s,r,h,n){this.Xst()&&super.Dc(t,e,i,s,r,h,n)}ost(t,e,i){if(this.Xst())return super.ost(t,e,i)}Xst(){var t=this._st.Eit().s5().n7(),e=t.CD(),e=this.Iet(e);if(e)return e=e.uP(),t.q6(e)}}C33.ret.Mit=EffectSourceAdapter}{let C33=self.$e,INDEX=0;class PluginSourceAdapter extends C33.ret.bit{constructor(t){super(t)}pet(){return this._st.Iit().xit()[INDEX]}Ast(){return this._st.Eit().hB().O6()}Dc(t,e,i,s,r,h,n){var a=this._st.Eit();a.KN().Ux()===a.hB().KN().Ux()&&super.Dc(t,e,i,s,r,h,n)}ost(t,e,i){var s=this._st.Eit(),r=s.KN().Ux(),s=s.hB().KN().Ux();if(r===s)return super.ost(t,e,i)}Yst(){var t=this._st.Eit().KN().Ux();if(C33.yq.qst&&t instanceof C33.yq.qst&&("initial-frame"===this._st.btt()||"initial-animation"===this._st.btt()))switch(this._st.LJ()){case"relative":case"absolute":return null}}}C33.ret.wit=PluginSourceAdapter}{let C33=self.$e;class ValueSourceAdapter extends C33.ret.bit{constructor(t){super(t),this.zst=0,this.Kst=!1}ast(){return!1}jK(){var t=this._st.iet(),e=this._st.Iit(),e=t.jit(e);this.zst=e.kJ()}ctt(){}Fit(){return this.Kst||this._st.Dc(0),this.zst}Dc(t,e,i,s,r,h,n){this.zst=C33.ret.Rst.Dc(t,e,i,this._st),this.Kst=!0}eit(){}vst(){}hst(){return this.zst}iit(){return!1}sit(){return!1}GX(){return{value:this.zst,init:this.Kst}}OX(t){t&&(this.zst=t.value,this.Kst=!t.hasOwnProperty("init")||t.init)}}C33.ret.Git=ValueSourceAdapter}{let C33=self.$e,PROJECT_FILE=0,PROJECT_FILE_NAME=0,PROJECT_FILE_TYPE=1,START_OFFSET=1,AUDIO_DURATION=2,AUDIO_TAG=3;class AudioSourceAdapter extends C33.ret.bit{constructor(t){super(t),this.Jst=!1,this.Zst=null,this.Qst=null,this.trt=null,this.SJ=this._st.het(),this.cit=this._st.Eit(),this.ert=this._st.Lit(),this.irt=this.ert[PROJECT_FILE],this.srt=this.ert[START_OFFSET],this.ert[AUDIO_TAG]?this.rrt=this.ert[AUDIO_TAG]:this.rrt=Math.random().toString(36).slice(2),this.hrt=NaN,this.nrt=NaN,this.art=NaN,this.ort=null,this.lrt()}ah(){super.ah(),this.Zst=null,this.Qst=null,this.trt=null,this.SJ=null,this.cit=null,this.ert=null,this.irt=null,this.ort=null}lrt(){var t;self.$e.yq.Audio&&((t=this._st.I5().urt(self.$e.yq.Audio))&&(this.Zst=t.Wx().O6()),this.Qst=self.$e.yq.Audio.crt,this.trt=self.$e.yq.Audio.frt)}drt(){var t;this.ort||(t=this._st.Eit().cB("audioSource"))&&(this.ort=t.yQ())}Crt(){var t=this._st.Eit().cB("volume");return(t?t.yQ():this).nrt}_tt(){super._tt(),this.Jst=!1,this.Zst&&(this.trt&&(this.hrt=this.trt.PlaybackTime.call(this.Zst,this.rrt),this.nrt=this.trt.Volume.call(this.Zst,this.rrt)),this.Qst)&&this.Qst.$$.call(this.Zst,this.rrt)}prt(){return this.rrt}mrt(){return this.art}vrt(t){this.art=t}jK(){super.jK(),this.hrt=NaN,this.Jst=!1}ctt(){super.ctt();var t=this._st.het().UG();switch(this.hrt=t-this.srt,this._st.btt()){case"audioSource":break;case"volume":this.nrt=this._st.ost(t)}this.Jst=!1}Dc(t,e,i,s,r,h,n){if(this.Zst)switch(this._st.btt()){case"audioSource":if(!this.SJ.DQ())return;if(s)return void(this.Qst&&this.Qst.$$.call(this.Zst,this.rrt));if(t<this.srt)return void(this.Jst=!1);var a=this.trt.PlaybackRate.call(this.Zst,this.rrt),o=this.SJ.z$();if(o!==a&&this.Qst.q$.call(this.Zst,this.rrt,o),this.Jst)return;if(!this._st.het().IsPlaying())return;if(this.Jst=!0,isNaN(this.hrt)){a=self.performance.now(),o=t-this.srt;if("suspended"===this.Zst.GetAudioContextState())return void(this.Jst=!1);o=o+(self.performance.now()-a)/1e3;if(this.Qst){let t=this.mrt();isNaN(t)?(this.vrt(0),t=0):this.vrt(t),this.Qst.PlayFromTimeline.call(this.Zst,this.irt,t,this.rrt,o)}}else{var a=this.hrt,o=(this.hrt=NaN,this.Crt()),l=(this.nrt=NaN,this.Zst.GetAudioContextState());if("suspended"===l)return void(this.Jst=!1);this.Qst&&(this.vrt(o),this.Qst.PlayFromTimeline.call(this.Zst,this.irt,o,this.rrt,a))}break;case"volume":this.drt(),super.Dc(t,e,i,s,r,h,n)}}ost(t,e,i){if(this.Zst)switch(this._st.btt()){case"audioSource":return;case"volume":return this.drt(),super.ost(t,e,i)}}Srt(t,e){return this.ort?this.ort.mrt():0}grt(t,e,i,s){this.ort&&this.ort.vrt(this.Srt()+e),this.Qst&&this.ort&&this.Qst.vrt.call(this.Zst,this.ort.prt(),this.ort.mrt())}Trt(t,e,i){this.ort&&this.ort.vrt(e),this.Qst&&this.ort&&this.Qst.vrt.call(this.Zst,this.ort.prt(),this.ort.mrt())}_rt(){return!0}GX(){return{audioPlaybackStarted:this.Jst,audioTag:this.rrt,pauseTime:this.hrt,pauseVolume:this.nrt,volume:this.art}}OX(t){t&&(this.Jst=t.audioPlaybackStarted,this.rrt=t.audioTag,this.hrt=t.pauseTime,this.nrt=t.pauseVolume,this.art=t.volume,this.lrt())}}C33.ret.Oit=AudioSourceAdapter}{let C33=self.$e;C33.ret.Nst=class PropertyInterpolationAdapter{constructor(t){this.Cit=t,this._st=t.cB(),this.Vtt=this._st.Eit().s5(),this.yrt=this._st.btt(),this.Ert=!1,this.Irt=null,this.Art=null}ah(){this.Cit=null,this._st=null,this.Vtt=null,this.Irt=null,this.Art=null}ast(){return!1}_tt(){}eJ(){this.Vtt=null,this.Irt=null,this.Art=null}yQ(){return this.Cit}cB(){return this._st}s5(){return this.Vtt||(this.Vtt=this._st.Eit().s5()),this.Vtt}Mrt(t){this.Ert=!!t}Rrt(){return this.Ert}stt(){}jK(){}ctt(){}xst(){this.Irt=this.hst()}vst(){this.Irt=null}hst(){}iit(){}sit(){}kst(t){return typeof this.wrt()==typeof t}Mst(){}Pst(t,e,i,s,r,h,n,a){}Lst(){}brt(){return this.Ort(()=>{var t=this._st.Iit();return this._st.iet().jit(t)},()=>{var t=this._st.Iit();return this._st.iet().Prt(t)}).Grt()}Lrt(){let s=this._st.het().UG()-this._st.Eit().vtt();return this.Ort(()=>{var t=this._st.Iit();return this._st.iet().Qit(s,t)},()=>{var t=this._st.Iit(),e=this._st.iet(),i=e.ist(s,t);return i||e.Prt(t)}).Grt()}Ort(t,e){return(this._st.het().DQ()?t:e)()}xrt(t,e){return("relative"===this._st.LJ()?t:e)()}Drt(t,e){return(this.Rrt()?(this.Mrt(!1),t):e)()}Nrt(t){}Frt(){return this.Cit.uP()}$rt(){return this.Art||(this.Art=this.Cit.Ast()),this.Art}Brt(t,e,i,s,r,h){switch(this._st.Cet()){case"behavior":return t();case"effect":return e();case"instance-variable":return i();case"plugin":return s();case"world-instance":return r();case"audio":return h()}}GX(){return{firstAbsoluteUpdate:this.Ert,saveState:this.Irt}}OX(t){t&&(this.Ert=t.firstAbsoluteUpdate,this.Irt=t.saveState)}krt(t,e=!1){var i,s=[];for(i of t){var r,h=i.Eit().vtt();for(r of i.Kit())(!e||0!==r.UG())&&e||s.push({time:h+r.UG(),value:r.Grt()})}return s.sort((t,e)=>t.time-e.time)}Wrt(t,e,i){return this.Vrt(e,i)}Vrt(e,i){for(let t=i.length-1;0<=t;t--)if(i[t].time<=e)return i[t];return null}}}{let C33=self.$e,TMP_COLORS_MAP=new Map,TMP_COLOR=[0,0,0];class ColorInterpolationAdapter extends C33.ret.Nst{constructor(t){super(t)}stt(){}jK(){}ctt(){}hst(){var t=this._st.Cet(),e=this.$rt(),i=this.Frt();switch(t){case"behavior":return this.Hrt(e.Urt(i));case"effect":return this.Hrt(e[i]);case"plugin":return this.Hrt(e.Urt(i));case"world-instance":return this.Hrt(this.wrt())}}iit(){var t=this.brt();return!this.jrt(t,this.wrt())}sit(){return!C33.Ss(this.Irt)&&!this.jrt(this.Irt,this.wrt())}jrt(t,e){return t=this.Xrt(t),e=this.Xrt(e),t.no(e)}brt(){var t=super.brt();return this.Xrt(t)}Lrt(){var t=super.Lrt();return this.Xrt(t)}Nrt(t){}Hrt(t){return(C33.Zs(t,C33.Fa)?t.toArray():t).slice(0,3)}Xrt(t){return C33.Zs(t,C33.Fa)?t:new C33.Fa(t[0],t[1],t[2],1)}kst(t){return!0}ast(){return!0}Mst(){var t=this._st.het(),e=this._st.hB(),i=this._st.yQ(),t=t._Q(e,i,this.yrt,this._st);t&&1<t.length&&(TMP_COLORS_MAP.has(e)||TMP_COLORS_MAP.set(e,new Map),i=TMP_COLORS_MAP.get(e),t=this._st.Cet(),i.has(t)||i.set(t,new Map),(e=i.get(t)).has(this.yrt)||e.set(this.yrt,{Yrt:!1,color:new C33.Fa(0,0,0,1)}))}qrt(t,e,i){t=TMP_COLORS_MAP.get(t).get(e).get(i);return t.Yrt=!0,t.color}Pst(t,e,i,s,r,h,n,a){var o=this._st.het(),l=this._st.Eit(),u=this._st.hB(),c=this._st.yQ(),f=this._st.Cet(),d=this.yrt,c=o._Q(u,c,d,this._st);c&&1<c.length?(d=this.krt(c,!0),(c=this.Wrt(o,o.UG(),d))&&(o=l.vtt(),0==(d=c.time-o)?this.qrt(u,f,this.yrt).Ua(e[0],e[1],e[2]):d<0||(l=e[0],c=e[1],o=e[2],d=this._st.Dc(d,!1,!0),l=C33.Fa.ko(l,d[0]),c=C33.Fa.ko(c,d[1]),o=C33.Fa.ko(o,d[2]),this.qrt(u,f,this.yrt).Ua(l,c,o)))):this.zrt(e[0],e[1],e[2])}Lst(){var t,e,i,s,r,h=this._st.hB();TMP_COLORS_MAP.has(h)&&(t=TMP_COLORS_MAP.get(h),e=this._st.Cet(),t.has(e))&&(i=t.get(e)).has(this.yrt)&&(s=(r=i.get(this.yrt)).Yrt,r=r.color,s&&this.zrt(r.Ja(),r.Za(),r.Qa()),0===i.size&&t.delete(e),0===t.size)&&TMP_COLORS_MAP.delete(h)}wrt(){var t=this._st.Cet(),e=this.$rt(),i=this.Frt();switch(t){case"behavior":return this.Xrt(e.Urt(i));case"effect":return e[i].clone();case"plugin":return this.Xrt(e.Urt(i));case"world-instance":return this.s5().y7().clone()}}zrt(t,e,i){var s=this._st.Cet(),r=this.$rt(),h=this.Frt();switch(s){case"behavior":TMP_COLOR[0]=t,TMP_COLOR[1]=e,TMP_COLOR[2]=i,r.Krt(h,TMP_COLOR);break;case"effect":r[h].Ha(t,e,i);break;case"plugin":TMP_COLOR[0]=t,TMP_COLOR[1]=e,TMP_COLOR[2]=i,r.Krt(h,TMP_COLOR);break;case"world-instance":this.s5().Jrt(t,e,i)}}GX(){}OX(t){}}C33.ret.Nst.$st=ColorInterpolationAdapter}{let C33=self.$e,NS=C33.ret;class NoInterpolationAdapter extends C33.ret.Nst{constructor(t){super(t)}stt(){}jK(){}ctt(){}hst(){return this.wrt()}iit(){return this.brt()!==this.hst()}sit(){return!C33.Ss(this.Irt)&&this.Irt!==this.hst()}ast(){return!1}Pst(t,e,i,s,r,h,n,a){var o=this._st,l=o.Eit(),u=o.Cet(),c=o.het(),f=l.hB(),d=o.yQ(),C=this.yrt,f=c._Q(f,d,C,o),t=(f&&1<f.length&&(d=this.krt(f),C=t+l.vtt(),f=this.Wrt(c,C,d))&&(e=f.value),o.Uit());switch(t){case"numeric":if(NS.Rst.Zrt(this.Frt(),this.$rt(),e,u))break;return;case"angle":if(NS.wst.Zrt(this.Frt(),this.$rt(),e,u))break;return;case"boolean":if(NS.bst.Zrt(this.Frt(),this.$rt(),e,u))break;return;case"color":if(NS.Gst.Zrt(this.Frt(),this.$rt(),e,u))break;return;case"text":if(!NS.Ost.Zrt(this.Frt(),this.$rt(),e,u))return}this.zrt(e)}wrt(){var t=this._st.Cet(),e=this.$rt(),i=this.Frt();switch(t){case"behavior":return e.Urt(i);case"effect":return e[i];case"instance-variable":return e.Qrt(i);case"plugin":return e.Urt(i)}}zrt(t){var e=this._st.Cet(),i=this.$rt(),s=this.Frt();switch(e){case"behavior":i.Krt(s,t);break;case"effect":i[s]=t;break;case"instance-variable":i.tht(s,t);break;case"plugin":i.Krt(s,t)}}}C33.ret.Nst.Dst=NoInterpolationAdapter}{let C33=self.$e,NS=C33.ret.Nst,INSTANCE_FUNC_MAP=new Map,add2=(t,e,i,s,r,h=!1,n=null,a=null)=>{INSTANCE_FUNC_MAP.set(t,{eht:e,iht:i,sht:s,round:r,rht:h,init:n,reset:a})};add2("offsetX",(t,e,i,s)=>{"relative"===s._st.LJ()?t.hht(e,i.het().PQ()):t.hht(e)},(t,e)=>t.hg(e),t=>t.rg(),!0),add2("offsetY",(t,e,i,s)=>{"relative"===s._st.LJ()?t.nht(e,i.het().PQ()):t.nht(e)},(t,e)=>t.og(e),t=>t.ag(),!0),add2("offsetWidth",(e,t,s,h,i)=>{if(0!==t){var n="relative"===h._st.LJ(),a=1===h.aht.Yy();if((n||a)&&e.K7()&&e.s6()){if(isNaN(h.oht)){var o=[];let t=e.N7();for(;t;)o.push(t),t=t.N7();o.reverse();let r=(t,e)=>e.het().Gtt(t.hB());var l=(t,e)=>{var e=r(t,e);return e||(e=t.hB().O6()).Det()?e.xet():t.uht().lht()},u=(t,e,i,s=0)=>{var t=r(t,e);return t&&(e=t.cB(i))&&(t=e.Iit().vit())&&(i=t.Prt())?i.Fit():s};let i;if(a)i=o[o.length-1].eC();else{let e=o[0];n=e.uht().lht(),a=e.uht().cht();i=n*a,i=(i+=u(e,s,"offsetWidth"))+l(e,s)*u(e,s,"offsetScaleX");for(let t=1;t<o.length;t++){var c=(e=o[t]).uht().cht();i=(i=(i*=c)+u(e,s,"offsetWidth"))+l(e,s)*u(e,s,"offsetScaleX")}}h.oht=0===i?Number.EPSILON:i}i||e.LC(t/h.oht,!0)}else e.LC(t)}},(t,e)=>t.oC(e),t=>t.eC(),!0),add2("offsetHeight",(e,t,s,r,i)=>{if(0!==t){var h="relative"===r._st.LJ(),n=1===r.aht.Yy();if((h||n)&&e.K7()&&e.h6()){if(isNaN(r.oht)){var a=[];let t=e.N7();for(;t;)a.push(t),t=t.N7();a.reverse();var o=(t,e)=>{i=t;var i,e=e.het().Gtt(i.hB());return e?e.Fet():(i=t.hB().O6()).Det()?i.Fet():t.uht().fht()},l=(t,e,i,s=0)=>{var e=e.het().Gtt(t.hB());return e&&(t=e.cB(i))&&(e=t.Iit().vit())&&(i=e.Prt())?i.Fit():s};let i;if(n)i=a[a.length-1].cC();else{let e=a[0];h=e.uht().fht(),n=e.uht().dht();i=h*n,i=(i+=l(e,s,"offsetHeight"))+o(e,s)*l(e,s,"offsetScaleY");for(let t=1;t<a.length;t++){var u=(e=a[t]).uht().dht();i=(i=(i*=u)+l(e,s))+o(e,s)*l(e,s,"offsetScaleY")}}r.oht=0===i?Number.EPSILON:i}i||e.Cht(t/r.oht,!0)}else e.Cht(t)}},(t,e)=>t.iC(e),t=>t.cC(),!0),add2("offsetAngle",(t,e,i,s,r)=>{t.pht(e)},(t,e)=>t._D(e),t=>t.yD(),!1,!0),add2("offsetOpacity",(t,e,i,s,r)=>{e/=s.mht||1;var h=t.Cb(),h=h+e;0===s.vht?(1<h?s.vht+=h-1:h<0&&(s.vht+=h),t.Sht(e)):(h=t.Cb()+e,0<e&&0<s.vht?1<h&&(s.vht+=h-1):0<e&&s.vht<0?(s.vht+=e,0<s.vht&&(t.Sht(s.vht),s.vht=0)):e<0&&0<s.vht?(s.vht+=e,s.vht<0&&(t.Sht(s.vht),s.vht=0)):e<0&&s.vht<0&&h<0&&(s.vht+=h))},(t,e)=>{t.mb(e)},t=>t.Cb(),!1,!0,(i,s,r)=>{switch(i.vht=0,i._st.LJ()){case"relative":{i._st.iet();var t,h=i._st.Iit().vit().mit(),n=i.s5().Cb();let e=n;for(t of h){var a=t.UG(),a=i._st.ost(a);e=n+a,e=C33.dh(e,0,1)}i.ght=n-e,i.ght=Math.round(100*(i.ght+Number.EPSILON))/100,e=n;for(let t=h.length-1;0<=t;t--){var o=h[t].UG(),o=i._st.ost(o);e-=o,e=C33.dh(e,0,1)}i.Tht=e,i.Tht=Math.round(100*(i.Tht+Number.EPSILON))/100;break}}var e="relative"===i._st.LJ(),l=1===i.aht.Yy();if((e||l)&&s.K7()&&s.c6()){var u=[];let t=s.N7();for(;t;)u.push(t),t=t.N7();u.reverse();var c=(t,e,i)=>{var e=e.het().Gtt(t.hB());return e&&(t=e.cB(i))&&(e=t.Iit().vit())&&(i=e.Prt())?i.Fit():0};let e=u[0].uht()._ht();e+=c(u[0],r,"offsetOpacity");for(let t=1;t<u.length;t++)e+=c(u[t],r,"offsetOpacity");i.mht=0===e?1:e}},t=>{var e,i;"relative"===t._st.LJ()&&(t.vht=0,i=(e=t.s5()).Cb(),i=Math.round(100*(i+Number.EPSILON))/100,t._st.het().DQ()?(e.mb(i+t.ght),t.DE=0):(e.mb(i-t.Tht),t.DE=t.yQ().Tst()))}),add2("offsetOriginX",(t,e)=>t.yht(e),(t,e)=>t.Eht(e),t=>t.g$(),!1),add2("offsetOriginY",(t,e)=>t.Iht(e),(t,e)=>t.Aht(e),t=>t._$(),!1),add2("offsetZElevation",(t,e)=>t.Mht(e),(t,e)=>t.ug(e),t=>t.lg(),!0),add2("offsetScaleX",(t,e,i,s)=>{var r,h;0!==e&&(r=t.eC()<0?-1:1,"relative"===s._st.LJ()&&t.K7()&&t.s6()?(h=i.xet()*r*e,isNaN(s.oht)&&INSTANCE_FUNC_MAP.get("offsetWidth").eht(t,1,i,s,!0),t.LC(h/s.oht,!0)):t.LC(i.xet()*r*e))},(t,e,i)=>{t.oC(i.xet()*e)},(e,i)=>{var s=e.eC()<0?-1:1;if(e.s6()){var r=e.N7(),h=i.het().Gtt(r.hB());let t=NaN;return t=h?r.eC()/h.xet():(h=r.hB().O6()).Det()?r.eC()/h.xet():1,e.eC()*s/(i.xet()*t)}return e.eC()*s/i.xet()},!1),add2("offsetScaleY",(t,e,i,s)=>{var r,h;0!==e&&(r=t.cC()<0?-1:1,"relative"===s._st.LJ()&&t.K7()&&t.h6()?(h=i.Fet()*r*e,isNaN(s.oht)&&INSTANCE_FUNC_MAP.get("offsetHeight").eht(t,1,i,s,!0),t.Cht(h/s.oht,!0)):t.Cht(i.Fet()*r*e))},(t,e,i)=>{t.iC(i.Fet()*e)},(e,i)=>{var s=e.cC()<0?-1:1;if(e.h6()){var r=e.N7(),h=i.het().Gtt(r.hB());let t=NaN;return t=h?r.cC()/h.Fet():(h=r.hB().O6()).Det()?r.cC()/h.Fet():1,e.cC()*s/(i.Fet()*t)}return e.cC()*s/i.Fet()},!1);class NumericInterpolationAdapter extends C33.ret.Nst{constructor(t){super(t),this.DE=0,this.vht=0,this.ght=0,this.Tht=0,this.mht=NaN,this.oht=NaN,this.Rht=void 0,this.wht=void 0,this.bht=null,this.Ght=null,this.Oht=null,this.Pht=null,this.Lht=null,this.xht=null,this.Dht=null,this.Nht=null,this.Fht=!1,this.$ht=!1,C33.Zs(this._st.het(),C33.Bht)?this.aht=new C33.ret.Nst.kht(this):this.aht=new C33.ret.Nst.Wht(this);var e=this._st.btt();switch(this._st.Cet()){case"world-instance":var i=INSTANCE_FUNC_MAP.get(e);this.bht=i.sht,this.Ght=i.eht,this.Oht=i.iht,this.Fht=i.round,this.$ht=i.rht,this.Lht=i.init,this.Pht=i.reset;break;case"audio":this.xht=t.Srt,this.Dht=t.grt,this.Nht=t.Trt,this.Fht=!!t._rt(),this.$ht=!1}}ah(){this.aht=null,this.bht=null,this.Ght=null,this.Oht=null,this.Pht=null,this.Lht=null,this.xht=null,this.Dht=null,this.Nht=null,super.ah()}ast(){return this.aht.ast()}Vht(){return this.DE}Hht(t){this.DE=t}stt(){this.Pht&&this.Pht(this)}jK(){var t,e=this.aht.jK();"number"==typeof e&&(this.DE=e),this.Lht&&(e=this.s5(),t=this._st.Eit(),this.Lht(this,e,t))}ctt(){var t=this.aht.ctt();"number"==typeof t&&(this.DE=t)}hst(){return this.wrt()}iit(){return this.brt()!==this.hst()}sit(){return!C33.Ss(this.Irt)&&this.Irt!==this.hst()}Mst(){this.aht.Mst()}Pst(t,e,i,s,r,h,n,a){return this.aht.Pst(t,e,i,s,r,h,n,a)}Lst(){this.aht.Lst()}wrt(){var t=this.$rt(),e=this.Frt(),i=this.s5(),s=this._st.Eit();switch(this._st.Cet()){case"behavior":return t.Urt(e);case"effect":return t[e];case"instance-variable":return t.Qrt(e);case"plugin":return t.Urt(e);case"world-instance":return this.bht(i,s);case"audio":return this.xht.call(this.yQ(),i,s)}}zrt(t,e,i){var s=this.$rt(),r=this.Frt(),h=this.s5(),n=this._st.Eit();switch(this._st.Cet()){case"behavior":s.Uht(r,t);break;case"effect":s[r]+=t;break;case"instance-variable":s.jht(r,t);break;case"plugin":s.Uht(r,t,this.yQ().Yst());break;case"world-instance":this.Ght(h,t,n,this);break;case"audio":this.Dht.call(this.yQ(),h,t,n,this)}}Xht(t,e,i){var s=this._st.wQ();if("discrete"!==(s="default"===s?"continuous":s)||e){if("discrete"===s&&i){e=this._st.het().UG();if(!this._st.Zit(e))return}var r=this.$rt(),h=this.Frt(),n=this.s5(),a=this._st.Eit();switch(this._st.Cet()){case"behavior":r.Krt(h,t);break;case"effect":r[h]=t;break;case"instance-variable":r.tht(h,t);break;case"plugin":r.Krt(h,t,this.yQ().Yst());break;case"world-instance":this.Oht(n,t,a);break;case"audio":this.Nht.call(this.yQ(),n,t,a)}}}Yht(t,e,i,s,r,h,n,a){this.aht.Yht(t,e,i,s,r,h,n,a)}qht(t,e,i,s,r){var t=((t="angle"===this._st.Wit()?C33.mh(t):t).toString().split(".")[1]||"").length,h=this.wrt();let n;switch(n=0===t?this.Fht?Math.round(h):this.$ht?"angle"===this._st.Wit()?C33.ph(Math.round(C33.mh(h))):Number(C33.toFixed(h,2)):h:this.Fht?Number(C33.toFixed(h,t)):(this.$ht,h),this.zrt(n-h,e,i),this._st.btt()){case"offsetWidth":case"offsetScaleX":var a=this.s5(),o=a.eC(),l=Number(C33.toFixed(o,2));a.LC(l-o);break;case"offsetHeight":case"offsetScaleY":a=this.s5(),l=a.cC(),o=Number(C33.toFixed(l,2));a.Cht(o-l)}}GX(){return Object.assign(super.GX(),{v:this.DE,a:this.vht,fod:this.ght,bod:this.Tht,of:this.mht,sf:this.oht,armorf:this.Rht,armandf:this.wht})}OX(t){t&&(super.OX(t),this.DE=t.v,this.vht=t.a,this.ght=C33.ds(t.fod)?t.fod:0,this.Tht=C33.ds(t.bod)?t.bod:0,this.mht=C33.ds(t.of)?t.of:NaN,this.oht=C33.ds(t.sf)?t.sf:NaN,this.Rht=C33.ds(t.armorf)?t.armorf:void 0,this.wht=C33.ds(t.armandf)?t.armandf:void 0)}}C33.ret.Nst.Fst=NumericInterpolationAdapter}{let C33=self.$e;class AbsoluteValueObject{constructor(t){this.zht=!1,this.zst=0,this.Kht=!1,this.Jht=!1,this.Jtt=t;for(let t=0,e=this.Jtt.length;t<e;t++)this.Jtt[t]._it(this)}wtt(){return this.Jtt}Zht(){this.zht=!0}Qht(){return this.zht}gst(t){this.zst=t}Fit(){return this.zst}tnt(t){this.Kht=t}ent(){return this.Kht}ptt(t){this.Jht=t}int(){return this.Jht}rf(){this.zht=!1,this.zst=0,this.Kht=!1,this.Jht=!1}}class NumericInterpolationAdapterForTimeline{constructor(t){this.snt=t}ah(){this.snt=null}Yy(){return 0}jK(){let t=this.snt;this.snt.cB();return t.xrt(()=>t.Ort(()=>0,()=>t.yQ().Tst()),()=>{})}ctt(){}ast(){this.snt;switch(this.snt.cB().LJ()){case"relative":return!1;case"absolute":return!0}}Mst(){this.snt;var t,e,i,s=this.snt.cB(),r=s.btt();switch(s.LJ()){case"relative":break;case"absolute":s.Tit()?s.yit().rf():(i=s.het(),t=s.hB(),e=s.yQ(),(i=i._Q(t,e,r,s))&&1<i.length&&new AbsoluteValueObject(i))}}Pst(t,e,i,s,r,h,n,a){var o=this.snt,l=this.snt.cB();switch(l.LJ()){case"relative":var u=o.Vht();o.zrt(e-u,i,s),h&&this.Yht(t,i,s,r,u,e),o.Hht(e);break;case"absolute":var u=l.het(),c=l.Eit();l.hB(),l.yQ();if(l.Tit()){var f=l.yit(),d=f.wtt(),d=o.krt(d,!0),u=o.Wrt(u,u.UG(),d);if(u){d=c.vtt(),c=u.time-d;if(0==c)f.ptt(n),f.tnt(a),f.Zht(),f.gst(f.Fit()+e);else{if(c<0)return;u=l.ost(c);f.ptt(n),f.tnt(a),f.Zht(),f.gst(f.Fit()+(e-u))}}}else o.Xht(e,a,n)}}Lst(){var t,e=this.snt,i=this.snt.cB();switch(i.LJ()){case"relative":break;case"absolute":i.Tit()&&(t=i.yit()).Qht()&&e.Xht(t.Fit(),t.ent(),t.int())}}Yht(t,e,i,s,r,h){var n=this.snt;s||(e&&t===e.UG()?n.qht(e.kJ(),e,i):i&&t===i.UG()?n.qht(i.kJ(),e,i):h-r==0&&n.qht(e.kJ(),e,i))}}C33.ret.Nst.Wht=NumericInterpolationAdapterForTimeline}{let C33=self.$e;class NumericInterpolationAdapterForTween{constructor(t){this.snt=t}ah(){this.snt=null}Yy(){return 1}jK(){var t=this.snt;return t.Mrt(!0),this.Nrt(t.brt())}ctt(){var t=this.snt;if(t.brt()!==t.Lrt())return t.Mrt(!0),this.Nrt(t.Lrt())}ast(){return!1}Mst(){}Pst(t,e,i,s,r,h,n,a){var o=this.snt,l=o.Vht();switch(o.cB().LJ()){case"relative":o.zrt(e-l,i,s),h&&this.Yht(t,i,s,r,l,e,!1,n);break;case"absolute":o.Rrt()?(o.Mrt(!1),o.zrt(l,i,s)):0===t&&0===o.cB().het().H$()?o.Xht(e,!0,!1):(o.zrt(e-l,i,s),h&&this.Yht(t,i,s,r,l,e,this.rnt(),n))}o.Hht(e)}Lst(){}Nrt(t){return t-this.snt.hst()}rnt(){var t,e=this.snt,i=e.s5().hB();let s=0;for(t of e.cB().I5().TQ().gK())0===t.Yy()?t.IK(i)&&s++:1===t.Yy()&&t.hB()===i&&s++;return s<=1}Yht(t,e,i,s,r,h,n,a){var o=this.snt;s?e&&t===e.UG()?o.qht(e.kJ(),e,i,n,a):i&&t===i.UG()?o.qht(i.kJ(),e,i,n,a):i||o.qht(e.kJ(),e,i,n,a):e&&t===e.UG()?o.qht(e.kJ(),e,i,n,a):i&&t===i.UG()?o.qht(i.kJ(),e,i,n,a):h-r==0&&o.qht(e.kJ(),e,i,n,a)}}C33.ret.Nst.kht=NumericInterpolationAdapterForTween}{let C33=self.$e,Ease=self.nc;C33.ret.Rst=class NumericTypeAdapter{constructor(){}static Zrt(t,e,i,s){let r;switch(s){case"behavior":r=e.Urt(t);break;case"effect":r=e[t];break;case"instance-variable":r=e.Qrt(t);break;case"plugin":r=e.Urt(t)}return r!==i}static Dc(e,i,s,r){if(!s)return n=r.Iit(),(n=r.iet().Prt(n)).kJ();let h=r.wQ();if("default"===h&&(h="continuous"),"discrete"===(h="combo"===r.Wit()?"discrete":h))return i.kJ();if("continuous"===h||"step"===h){var n=r.het().MQ(),a=("step"===h&&0!==n&&(a=1/n,e=Math.floor(e*a)/a),i.kJ()),o=s.kJ(),l=i.$J("cubic-bezier"),u=s.$J("cubic-bezier"),c=l&&l.hnt()&&u&&u.nnt();if(!c&&a===o)return a;var f=i.UG(),s=s.UG(),n=("step"===h&&0!==n&&(e=C33.dh(e,f,s)),C33.normalize(e,f,s)),e=i.Sst();let t;return t=c?(i=s-f,t=Ease.Ic(e)(i*n,0,1,i),Ease.Ic("cubicbezier")(t,a,a+l.HJ(),o+u.XJ(),o)):Ease.Ic(e)((s-f)*n,a,o-a,s-f),"integer"===r.Wit()?Math.floor(t):t}}}}{let C33=self.$e;C33.ret.wst=class AngleTypeAdapter{constructor(){}static Zrt(t,e,i,s){let r;switch(s){case"behavior":r=e.Urt(t);break;case"effect":r=e[t];break;case"instance-variable":r=e.Qrt(t);break;case"plugin":r=e.Urt(t)}return r!==i}static Dc(t,e,i,s){if(!i)return h=s.Iit(),(h=s.iet().Prt(h)).kJ();let r=s.wQ();if("default"===r&&(r="continuous"),"discrete"===(r="combo"===s.Wit()?"discrete":r))return e.kJ();if("continuous"===r||"step"===r){var h=s.het().MQ(),s=("step"===r&&0!==h&&(s=1/h,t=Math.floor(t*s)/s),e.UG()),n=i.UG(),a=e.kJ(),o=i.kJ(),i=("step"===r&&0!==h&&(t=C33.dh(t,s,n)),e.$J("angle"));if(!i)return a===o?a:(h=C33.normalize(t,s,n),u=self.nc.Ic(e.Sst()),C33.Ih(a,o,u(h,0,1,1)));var l=i.ant();if(a===o&&0===l)return a;var u=C33.normalize(t,s,n),c=self.nc.Ic(e.Sst())(u,0,1,1);switch(i.ont()){case"closest":return C33.Ih(a,o,c,l);case"clockwise":return C33.Ah(a,o,c,l);case"anti-clockwise":return C33.Mh(a,o,c,l)}}}}}{let C33=self.$e;C33.ret.bst=class BooleanTypeAdapter{constructor(){}static Zrt(t,e,i,s){let r;switch(s){case"behavior":r=e.Urt(t);break;case"effect":r=e[t];break;case"instance-variable":r=e.Qrt(t);break;case"plugin":r=e.Urt(t)}return!!r!=!!i}static Dc(t,e,i,s){return i?e.kJ()?1:0:(i=s.Iit(),(i=s.iet().Prt(i)).kJ()?1:0)}}}{let C33=self.$e,TEMP_COLOR_ARRAY=[0,0,0],TEMP_COLOR_ARRAY_2=[0,0,0],TEMP_COLOR_ARRAY_3=[0,0,0];C33.ret.Gst=class ColorTypeAdapter{constructor(){}static Zrt(t,e,i,s){let r;switch(s){case"behavior":r=e.Urt(t);break;case"effect":r=e[t];break;case"instance-variable":r=e.Qrt(t);break;case"plugin":r=e.Urt(t)}return Array.isArray(i)?(TEMP_COLOR_ARRAY[0]=i[0],TEMP_COLOR_ARRAY[1]=i[1],TEMP_COLOR_ARRAY[2]=i[2]):(TEMP_COLOR_ARRAY_3.Eo(i),TEMP_COLOR_ARRAY[0]=Math.floor(255*TEMP_COLOR_ARRAY_3.Ja()),TEMP_COLOR_ARRAY[1]=Math.floor(255*TEMP_COLOR_ARRAY_3.Za()),TEMP_COLOR_ARRAY[2]=Math.floor(255*TEMP_COLOR_ARRAY_3.Qa())),Array.isArray(r)?(TEMP_COLOR_ARRAY_2[0]=r[0],TEMP_COLOR_ARRAY_2[1]=r[1],TEMP_COLOR_ARRAY_2[2]=r[2]):(TEMP_COLOR_ARRAY_3.Eo(r),TEMP_COLOR_ARRAY_2[0]=Math.floor(255*TEMP_COLOR_ARRAY_3.Ja()),TEMP_COLOR_ARRAY_2[1]=Math.floor(255*TEMP_COLOR_ARRAY_3.Za()),TEMP_COLOR_ARRAY_2[2]=Math.floor(255*TEMP_COLOR_ARRAY_3.Qa())),TEMP_COLOR_ARRAY[0]!==TEMP_COLOR_ARRAY_2[0]||TEMP_COLOR_ARRAY[1]!==TEMP_COLOR_ARRAY_2[1]||TEMP_COLOR_ARRAY[2]!==TEMP_COLOR_ARRAY_2[2]}static Dc(t,e,i,s){var r,h,n,a,o,l;if(!i)return r=s.Iit(),r=(r=s.iet().Prt(r)).kJ(),TEMP_COLOR_ARRAY[0]=r[0],TEMP_COLOR_ARRAY[1]=r[1],TEMP_COLOR_ARRAY[2]=r[2],TEMP_COLOR_ARRAY;let u=s.wQ();return"discrete"===(u="default"===u?"continuous":u)?(r=e.kJ(),TEMP_COLOR_ARRAY[0]=r[0],TEMP_COLOR_ARRAY[1]=r[1],TEMP_COLOR_ARRAY[2]=r[2],TEMP_COLOR_ARRAY):"continuous"===u||"step"===u?(r=s.het().MQ(),"step"===u&&0!==r&&(s=1/r,t=Math.floor(t*s)/s),s=e.UG(),l=i.UG(),n=e.kJ(),i=i.kJ(),"step"===u&&0!==r&&(t=C33.dh(t,s,l)),r=C33.normalize(t,s,l),t=e.Sst(),e=n[0],h=n[1],n=n[2],a=i[0],o=i[1],i=i[2],t=self.nc.Ic(t),s=(l=l-s)*r,TEMP_COLOR_ARRAY[0]=e===a?e:t(s,e,a-e,l),TEMP_COLOR_ARRAY[1]=h===o?h:t(s,h,o-h,l),TEMP_COLOR_ARRAY[2]=n===i?n:t(s,n,i-n,l),TEMP_COLOR_ARRAY):void 0}}}{let C33=self.$e;C33.ret.Ost=class TextTypeAdapter{constructor(){}static Zrt(t,e,i,s){let r;switch(s){case"behavior":r=e.Urt(t);break;case"effect":r=e[t];break;case"instance-variable":r=e.Qrt(t);break;case"plugin":r=e.Urt(t)}return r!==i}static Dc(t,e,i,s){return(i?e:(i=s.Iit(),i=s.iet().Prt(i))).kJ()}}}{let C33=self.$e;C33.Mz=class TimelineDataManager{constructor(){this.lnt=new Map}ah(){for(var t of this.lnt.values())t.ah();this.lnt.clear(),this.lnt=null}sc(t){var t=new C33.unt(t),e=t.jc();this.lnt.set(e,t)}ri(t){return this.lnt.get(t)}dQ(){return 0}static cnt(t,e,i,s){if(e)for(var r of e)C33.Mz.fnt("create",r,t,i,s)}static dnt(t,e,i,s){if(e)for(var r of e)C33.Mz.fnt("create-including-disabled",r,t,i,s)}static Cnt(i,t,e,s){i.length?t.forEach((t,e)=>{i[e].OX(t)}):t.forEach(t=>{C33.Mz.fnt("load",t,i,e,s)})}static fnt(t,e,i,s,r){let h;if("function"==typeof s)switch(t){case"load":h=new s(null,r);break;case"create":case"create-including-disabled":h=new s(e,r)}else if("object"==typeof s){var n=e[s.prop],a=s.map.get(n);switch(t){case"load":h=new a(null,r);break;case"create":case"create-including-disabled":h=new a(e,r)}}switch(t){case"load":h.OX(e),i.push(h);break;case"create":if("function"==typeof h.Get&&!h.Get())return h.ah();i.push(h);break;case"create-including-disabled":i.push(h)}}}}{let C33=self.$e,NAME=0,TOTAL_TIME=1,STEP=2,INTERPOLATION_MODE=3,RESULT_MODE=4,TRACKS=5,LOOP=6,PING_PONG=7,REPEAT_COUNT=8,START_ON_LAYOUT=9,TRANSFORM_WITH_SCENE_GRAPH=10,USE_SYSTEM_TIMESCALE=11;C33.unt=class TimelineDataItem{constructor(t){this.uh="",this.Ctt=NaN,this.pnt=0,this.mnt="default",this.vnt="default",this.Snt=!1,this.gnt=!1,this.Tnt=1,this.$tt=null,this._nt="",this.ynt=!1,this.Ent=!0,t&&(this.uh=t[NAME],this.Ctt=t[TOTAL_TIME],this.pnt=t[STEP],this.mnt=t[INTERPOLATION_MODE],this.vnt=t[RESULT_MODE],this.Snt=!!t[LOOP],this.gnt=!!t[PING_PONG],this.Tnt=t[REPEAT_COUNT],this._nt=t[START_ON_LAYOUT],this.ynt=!!t[TRANSFORM_WITH_SCENE_GRAPH],this.Ent=!!t[USE_SYSTEM_TIMESCALE],this.$tt=new C33.Int(t[TRACKS],this))}ah(){this.$tt.ah(),this.$tt=null}SQ(){return this.$tt||(this.$tt=new C33.Int(null,this)),this.$tt}jc(){return this.uh}Zk(t){this.uh=t}H$(){return this.Ctt}V$(t){this.Ctt=t}MQ(){return this.pnt}RQ(t){this.pnt=t}wQ(){return this.mnt}bQ(t){this.mnt=t}LJ(){return this.vnt}GQ(t){this.vnt=t}j$(){return this.Snt}U$(t){this.Snt=t}Y$(){return this.gnt}X$(t){this.gnt=t}s$(){return this.Tnt}OQ(t){this.Tnt=t}iJ(){return this._nt}PQ(){return this.ynt}LQ(){return this.Ent}GX(){return{trackDataJson:this.$tt.GX(),name:this.uh,totalTime:this.Ctt,step:this.pnt,interpolationMode:this.mnt,resultMode:this.vnt,loop:this.Snt,pingPong:this.gnt,repeatCount:this.Tnt,startOnLayout:this._nt,transformWithSceneGraph:!!this.ynt,useSystemTimescale:this.Ent}}OX(t){t&&(this.SQ().OX(t.trackDataJson),this.uh=t.name,this.Ctt=t.totalTime,this.pnt=t.step,this.mnt=t.interpolationMode,this.vnt=t.resultMode,this.Snt=t.loop,this.gnt=t.pingPong,this.Tnt=t.repeatCount,this._nt=t.startOnLayout,this.ynt=!!t.transformWithSceneGraph,this.Ent=!!t.useSystemTimescale)}}}{let C33=self.$e,WI_DATA=0,OC_INDEX=1,WI_UID=2,INTERPOLATION_MODE=1,RESULT_MODE=2,ENABLED=3,KEYFRAMES=4,PROPERTY_TRACKS=5,ID=6,NESTED_DATA=7,START_OFFSET=0,LOCAL_TOTAL_TIME=1,WI_ADDITIONAL_DATA=8,ORIGINAL_WIDTH=0,ORIGINAL_HEIGHT=1,TRACK_TYPE=9,TRACK_NAME=10;class TrackDataItem{constructor(t,e){this.$tt=e,this.Ant=null,this.Mnt=null,this.Btt=NaN,this.ktt=NaN,this.mnt="default",this.vnt="default",this.Gu=!1,this.Rnt=null,this.dit=null,this.e3="",this.wnt=null,this.bnt=0,this.Gnt=this.$tt.AQ().H$(),this.a3=0,this.uh="",t&&(t[WI_DATA]&&(this.Ant=t[WI_DATA],this.Btt=t[WI_DATA][WI_UID],this.ktt=t[WI_DATA][OC_INDEX]),this.mnt=t[INTERPOLATION_MODE],this.vnt=t[RESULT_MODE],this.Gu=!!t[ENABLED],t[ID]&&(this.e3=t[ID]),t[NESTED_DATA]&&(this.wnt=t[NESTED_DATA],this.bnt=t[NESTED_DATA][START_OFFSET],this.Gnt=t[NESTED_DATA][LOCAL_TOTAL_TIME]),t[WI_ADDITIONAL_DATA]&&(this.Mnt=t[WI_ADDITIONAL_DATA]),t[WI_ADDITIONAL_DATA]&&(this.Mnt=t[WI_ADDITIONAL_DATA]),t[TRACK_TYPE]&&(this.a3=t[TRACK_TYPE]),t[TRACK_NAME]&&(this.uh=t[TRACK_NAME]),this.Rnt=new C33.Ont(t[KEYFRAMES],this),this.dit=new C33.Pnt(t[PROPERTY_TRACKS],this))}ah(){this.Ant=null,this.$tt=null,this.Rnt&&(this.Rnt.ah(),this.Rnt=null),this.dit&&(this.dit.ah(),this.dit=null),this.wnt=null}SQ(){return this.$tt}Ktt(){return this.Rnt||(this.Rnt=new C33.Ont(null,this)),this.Rnt}iet(){return this.dit||(this.dit=new C33.Pnt(null,this)),this.dit}Lnt(){return this.Ant}let(){return this.ktt}Pet(t){this.ktt=t}oet(){return this.Btt}Ret(t){this.Btt=t}wQ(){return this.mnt}bQ(t){this.mnt=t}LJ(){return this.vnt}GQ(t){this.vnt=t}Get(){return this.Gu}Oet(t){this.Gu=!!t}lB(){return this.e3}vtt(){return this.bnt}wet(){return this.Gnt}bet(t){this.Gnt=t}xet(){return this.Mnt[ORIGINAL_WIDTH]}Let(t){this.Mnt||(this.Mnt=[]),this.Mnt[ORIGINAL_WIDTH]=t}Fet(){return this.Mnt||(this.Mnt=[]),this.Mnt[ORIGINAL_HEIGHT]}Net(t){this.Mnt||(this.Mnt=[]),this.Mnt[ORIGINAL_HEIGHT]=t}Yy(){return this.a3}jc(){return this.uh}GX(){return{keyframeDataJson:this.Rnt.GX(),propertyTrackDataJson:this.dit.GX(),instanceData:this.Ant,additionalInstanceData:this.Mnt,instanceUid:this.Btt,objectClassIndex:this.ktt,interpolationMode:this.mnt,resultMode:this.vnt,enabled:this.Gu,id:this.e3,nestedData:this.wnt,type:this.a3,name:this.uh}}OX(t){t&&(this.Ant=t.instanceData,this.Btt=t.instanceUid,this.ktt=t.objectClassIndex,this.mnt=t.interpolationMode,this.vnt=t.resultMode,this.Gu=t.enabled,this.e3=t.id,this.a3=t.type||0,this.uh=t.name||"",this.Gnt=this.$tt.AQ().H$(),t.nestedData&&(this.wnt=t.nestedData,this.bnt=this.wnt[START_OFFSET],this.Gnt=this.wnt[LOCAL_TOTAL_TIME]),t.additionalInstanceData&&(this.Mnt=t.additionalInstanceData),this.Ktt().OX(t.keyframeDataJson),this.iet().OX(t.propertyTrackDataJson))}}C33.Int=class TrackData{constructor(t,e){this.FZ=e,this.xnt=[],C33.Mz.cnt(this.xnt,t,TrackDataItem,this)}ah(){this.FZ=null;for(var t of this.xnt)t.ah();C33.xn(this.xnt),this.xnt=null}AQ(){return this.FZ}Ttt(){var t=new TrackDataItem(null,this);return this.xnt.push(t),t}Dnt(t){return t.Ktt().ztt()[0]}Nnt(t){return t.Ktt().ztt().at(-1)}Yet(e,t){var i=t.Ktt().ztt(),s=i.length;for(let t=0;t<s;t++){var r=i[t];if(r.UG()===e)return r}}Fnt(e,t){var i=t.Ktt().ztt(),s=i.length;for(let t=0;t<s;t++){var r=i[t];if(r.UG()>e)return r}}$nt(e,t){var i=t.Ktt().ztt(),s=i.length;for(let t=0;t<s;t++){var r=i[t];if(r.UG()>=e)return r}}Xet(e,t){var i=t.Ktt().ztt();for(let t=i.length-1;0<=t;t--){var s=i[t];if(s.UG()<=e)return s}}*vQ(){for(var t of this.xnt)yield t}GX(){return{trackDataItemsJson:this.xnt.map(t=>t.GX())}}OX(t){t&&C33.Mz.Cnt(this.xnt,t.trackDataItemsJson,TrackDataItem,this)}}}{let C33=self.$e,SOURCE_DATA=0,SOURCE=0,PROPERTY=1,TYPE=2,MIN=3,MAX=4,INTERPOLATION_MODE=5,RESULT_MODE=6,ENABLED=7,PROPERTY_KEYFRAMES=8,CAN_HAVE_PROPERTY_KEYFRAMES=9;class PropertyTrackDataItem{constructor(t,e){this.dit=e,this.Bnt="",this.knt=null,this.yrt=null,this.a3=null,this.Wnt=NaN,this.Vnt=NaN,this.mnt="default",this.vnt="default",this.Gu=!1,this.Hnt=null,this.Unt=!0,t&&(this.Bnt=t[SOURCE_DATA][SOURCE],this.knt=t[SOURCE_DATA].slice(1),this.yrt=t[PROPERTY],this.a3=t[TYPE],this.Wnt=t[MIN],this.Vnt=t[MAX],this.mnt=t[INTERPOLATION_MODE],this.vnt=t[RESULT_MODE],this.Gu=!!t[ENABLED],this.Hnt=new C33.jnt(t[PROPERTY_KEYFRAMES],this),this.Unt=t[CAN_HAVE_PROPERTY_KEYFRAMES])}ah(){this.Hnt.ah(),this.Hnt=null,this.dit=null,this.knt=null}iet(){return this.dit}vit(){return this.Hnt||(this.Hnt=new C33.jnt(null,this)),this.Hnt}Cet(){return this.Bnt}Pit(t){this.Bnt=t}xit(){return this.knt}Nit(t){this.knt=t}$it(){return this.yrt}kit(t){this.yrt=t}Yy(){return this.a3}Hit(t){this.a3=t}Xit(){return this.Wnt}Yit(t){this.Wnt=t}qit(){return this.Vnt}zit(t){this.Vnt=t}wQ(){return this.mnt}bQ(t){this.mnt=t}LJ(){return this.vnt}GQ(t){this.vnt=t}Get(){return this.Gu}Oet(t){this.Gu=!!t}Jit(){return!!this.Unt}GX(){return{propertyKeyframeDataJson:this.Hnt.GX(),sourceAdapterId:this.Bnt,sourceAdapterArguments:this.knt,property:this.yrt,type:this.a3,min:this.Wnt,max:this.Vnt,interpolationMode:this.mnt,resultMode:this.vnt,enabled:this.Gu,canHavePropertyKeyframes:this.Unt}}OX(t){t&&(this.Bnt=t.sourceAdapterId,this.knt=t.sourceAdapterArguments,this.yrt=t.property,this.a3=t.type,this.Wnt=t.min,this.Vnt=t.max,this.mnt=t.interpolationMode,this.vnt=t.resultMode,this.Gu=t.enabled,this.Unt=t.canHavePropertyKeyframes,this.vit().OX(t.propertyKeyframeDataJson))}}C33.Pnt=class PropertyTrackData{constructor(t,e){this.Ftt=e,this.Xnt=[],C33.Mz.cnt(this.Xnt,t,PropertyTrackDataItem,this)}ah(){this.Ftt=null;for(var t of this.Xnt)t.ah();C33.xn(this.Xnt),this.Xnt=null}Met(){return this.Ftt}Jet(){var t=new PropertyTrackDataItem(null,this);return this.Xnt.push(t),t}jit(t){return t.vit().mit()[0]}Prt(t){return t.vit().mit().at(-1)}Zit(e,t){var i=t.vit().mit(),s=i.length;for(let t=0;t<s;t++){var r=i[t];if(r.UG()===e)return r}}est(e,t){var i=t.vit().mit(),s=i.length;for(let t=0;t<s;t++){var r=i[t];if(r.UG()>e)return r}}ist(e,t){var i=t.vit().mit(),s=i.length;for(let t=0;t<s;t++){var r=i[t];if(r.UG()>=e)return r}}Qit(e,t){var i=t.vit().mit();for(let t=i.length-1;0<=t;t--){var s=i[t];if(s.UG()<=e)return s}}*eet(){for(var t of this.Xnt)yield t}GX(){return{propertyTrackDataItemsJson:this.Xnt.map(t=>t.GX())}}OX(t){t&&C33.Mz.Cnt(this.Xnt,t.propertyTrackDataItemsJson,PropertyTrackDataItem,this)}}}{let C33=self.$e,TIME=0,EASE=1,ENABLE=2,TAGS=3;class KeyframeDataItem{constructor(t,e){this.Rnt=e,this.H4=-1,this.Ynt="noease",this.qnt=!1,this.oQ=null,this.znt=null,t&&(this.H4=t[TIME],this.Ynt=t[EASE],this.qnt=!!t[ENABLE],e=t[TAGS],this.oQ=e?e.split(" "):[],this.znt=new Set(this.oQ.map(t=>t.toLowerCase())),this.Knt=null)}ah(){this.Rnt=null,C33.xn(this.oQ),this.oQ=null,this.znt.clear(),this.znt=null,this.Knt=null}Ktt(){return this.Rnt}AJ(){return this.Knt}Jnt(t){this.Knt=t}UG(){return this.H4}W$(t){this.H4=t,this.Rnt.Znt()}Sst(){return this.Ynt}rB(t){this.Ynt=t}Get(){return this.qnt}Oet(t){this.qnt=!!t}K$(){return this.oQ}NQ(t){this.oQ=t?t.split(" "):[],this.znt=new Set(this.oQ.map(t=>t.toLowerCase()))}Qnt(){return this.znt}Ltt(t){return this.znt.has(t.toLowerCase())}GX(){return{time:this.H4,ease:this.Ynt,enable:this.qnt,tags:this.oQ}}OX(t){t&&(this.H4=t.time,this.Ynt=t.ease,this.qnt=t.enable,this.oQ=t.tags,this.znt=new Set(this.oQ.map(t=>t.toLowerCase())))}}C33.Ont=class KeyframeData{constructor(t,e){this.Ftt=e,this.qtt=[],C33.Mz.cnt(this.qtt,t,KeyframeDataItem,this),this.Znt()}ah(){this.Ftt=null;for(var t of this.qtt)t.ah();C33.xn(this.qtt),this.qtt=null}Znt(){this.qtt.sort((t,e)=>t.UG()-e.UG());for(let t=0;t<this.qtt.length;t++)this.qtt[t].Jnt(this.qtt[t+1])}Met(){return this.Ftt}tat(){return this.qtt.length}ztt(){return this.qtt}zet(){var t=new KeyframeDataItem(null,this);return this.qtt.push(t),this.Znt(),t}Qet(t){for(var e of this.qtt){var i;t(e)&&-1!==(i=this.qtt.indexOf(e))&&(e.ah(),this.qtt.splice(i,1))}this.eat(),this.Znt()}eat(){this.qtt.sort((t,e)=>t.UG()-e.UG())}lit(t){return this.qtt.indexOf(t)}uit(t){return this.qtt[t]}*iat(){for(var t of this.qtt)yield t}*sat(){for(let t=this.qtt.length-1;0<=t;t--)yield this.qtt[t]}GX(){return{keyframeDataItemsJson:this.qtt.map(t=>t.GX())}}OX(t){t&&(C33.Mz.Cnt(this.qtt,t.keyframeDataItemsJson,KeyframeDataItem,this),this.Znt())}}}{let C33=self.$e,VALUE_DATA=0,VALUE_DATA_VALUE=0,VALUE_DATA_ABSOLUTE_VALUE=1,VALUE_DATA_TYPE=2,TIME=1,EASE=2,ENABLE=3,ADDONS=4,PATH_MODE=5;class PropertyKeyframeDataItem{constructor(t,e){this.Hnt=e,this.zst=null,this.rat=null,this.a3="",this.H4=NaN,this.Ynt="noease",this.qnt=!1,this.hat=null,this.nat=void 0,this.aat="line",t&&(this.zst=t[VALUE_DATA][VALUE_DATA_VALUE],this.rat=t[VALUE_DATA][VALUE_DATA_ABSOLUTE_VALUE],this.a3=t[VALUE_DATA][VALUE_DATA_TYPE],this.H4=t[TIME],this.Ynt=t[EASE],this.qnt=!!t[ENABLE],this.aat=t[PATH_MODE],this.hat=null,t[ADDONS]&&(this.hat=new C33.oat(t[ADDONS],this)),this.Knt=null,this.lat=null)}ah(){this.Hnt=null,this.hat&&(this.hat.ah(),this.hat=null),this.Knt=null,this.lat=null}uat(){return this.hat}Jnt(t){this.Knt=t}AJ(){return this.Knt}cat(t){this.lat=t}MJ(){return this.lat}Fit(){return this.zst}gst(t){"color"===this.a3&&C33.ds(t)?(this.zst[0]=C33.Vh(t),this.zst[1]=C33.Hh(t),this.zst[2]=C33.Uh(t)):this.zst=t}Grt(){return this.rat}pst(t){"color"===this.a3&&C33.ds(t)?(this.rat[0]=C33.Vh(t),this.rat[1]=C33.Hh(t),this.rat[2]=C33.Uh(t)):this.rat=t}kJ(){var t=this.Hnt.Iit().LJ();return"relative"===t?this.Fit():"absolute"===t?this.Grt():void 0}Yy(){return this.a3}Hit(t){this.a3=t}UG(){return this.H4}W$(t){this.H4=t,this.Hnt.fat()}Sst(){return this.Ynt}rB(t){this.Ynt=t}Get(){return this.qnt}Oet(t){this.qnt=!!t}RJ(){return this.aat}$J(e){if(this.hat){if(!this.nat&&null!==this.nat){var i=this.hat.dat();if(i){var s=i.length;for(let t=0;t<s;t++){var r=i[t];if(r.lB()===e)return this.nat=r,this.nat}}this.nat=null}return this.nat}}GX(){var t=this.hat;return{addonDataJson:t&&t.GX(),value:this.zst,aValue:this.rat,type:this.a3,time:this.H4,ease:this.Ynt,enable:this.qnt}}OX(t){t&&(t.addonDataJson&&this.hat._SetFromJson(t.addonDataJson),this.zst=t.value,this.rat=t.aValue,this.a3=t.type,this.H4=t.time,this.Ynt=t.ease,this.qnt=t.enable)}}C33.jnt=class PropertyKeyframeData{constructor(t,e){this.fit=e,this.pit=[],this.Cat=[],C33.Mz.cnt(this.pit,t,PropertyKeyframeDataItem,this),C33.Mz.dnt(this.Cat,t,PropertyKeyframeDataItem,this),this.fat()}ah(){this.fit=null;for(var t of this.pit)t.ah();C33.xn(this.pit),this.pit=null;for(var e of this.Cat)e.ah();C33.xn(this.Cat),this.Cat=null}fat(){let e=this.pit;e.sort((t,e)=>t.UG()-e.UG());for(let t=0;t<e.length;t++){var i=e[t];t+1<e.length&&i.Jnt(e[t+1]),0<=t-1&&i.cat(e[t-1])}(e=this.Cat).sort((t,e)=>t.UG()-e.UG());for(let t=0;t<e.length;t++){var s=e[t];t+1<e.length&&s.Jnt(e[t+1]),0<=t-1&&s.cat(e[t-1])}}dst(){var t=new PropertyKeyframeDataItem(null,this);return this.pit.push(t),this.fat(),t}Cst(t){for(var e of this.pit){var i;t(e)&&-1!==(i=this.pit.indexOf(e))&&(e.ah(),this.pit.splice(i,1))}this.pat(),this.fat()}pat(){this.pit.sort((t,e)=>t.UG()-e.UG())}Iit(){return this.fit}mat(){return this.pit.length}Prt(){return this.pit[this.pit.length-1]}mit(){return this.pit}IJ(){return this.Cat}*vat(){for(var t of this.pit)yield t}*Sat(){for(let t=this.pit.length-1;0<=t;t--)yield this.pit[t]}GX(){var t=this.pit,e=this.Cat;return{propertyKeyframeDataItemsJson:t.map(t=>t.GX()),propertyKeyframeDataItemsIncludingDisabledJson:e.map(t=>t.GX())}}OX(t){t&&(C33.Mz.Cnt(this.pit,t.propertyKeyframeDataItemsJson,PropertyKeyframeDataItem,this),C33.Mz.Cnt(this.Cat,t.propertyKeyframeDataItemsIncludingDisabledJson,PropertyKeyframeDataItem,this),this.fat())}}}{let C33=self.$e,ADDON_ID=0,ADDON_DATA=1;class AddonDataItem{constructor(t,e){this.hat=e,this.e3=t[ADDON_ID],this.gat=t[ADDON_DATA]}ah(){this.hat=null,this.gat=null}uat(){return this.hat}lB(){return this.e3}GX(){return{id:this.e3,data:this.gat}}OX(t){t&&(this.e3=t.id,this.gat=t.data)}}let START_ANCHOR=0,START_ENABLE=1,END_ANCHOR=2,END_ENABLE=3;class AddonDataCubicBezierItem extends AddonDataItem{constructor(t,e){super(t,e),this.Tat=this.gat[START_ANCHOR],this._at=!!this.gat[START_ENABLE],this.yat=this.gat[END_ANCHOR],this.Eat=!!this.gat[END_ENABLE]}ah(){super.ah()}HJ(){return this.Tat}hnt(){return this._at}XJ(){return this.yat}nnt(){return this.Eat}GX(){return Object.assign(super.GX(),{startAnchor:this.Tat,startEnable:!!this._at,endAnchor:this.yat,endEnable:!!this.Eat})}OX(t){t&&(super.OX(t),this.Tat=t.startAnchor,this._at=!!t.startEnable,this.yat=t.endAnchor,this.Eat=!!t.endEnable)}}let DIRECTION=0,REVOLUTIONS=1;class AddonDataAngleItem extends AddonDataItem{constructor(t,e){super(t,e),this.Iat=this.gat[DIRECTION],this.Aat=this.gat[REVOLUTIONS]}ah(){super.ah()}ont(){return this.Iat}ant(){return this.Aat}GX(){return Object.assign(super.GX(),{direction:this.Iat,revolutions:this.Aat})}OX(t){t&&(super.OX(t),this.Iat=t.direction,this.Aat=t.revolutions)}}C33.oat=class AddonData{constructor(t,e){this.Mat=e,this.Rat=[],C33.Mz.cnt(this.Rat,t,{prop:0,map:new Map([["cubic-bezier",AddonDataCubicBezierItem],["angle",AddonDataAngleItem]])},this)}ah(){this.Mat=null;for(var t of this.Rat)t.ah();C33.xn(this.Rat),this.Rat=null}wat(){return this.Mat}dat(){return this.Rat}*bat(){for(var t of this.Rat)yield t}GX(){return{addonDataItemsJson:this.Rat.map(t=>t.GX())}}OX(t){t&&C33.Mz.Cnt(this.Rat,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",AddonDataCubicBezierItem],["angle",AddonDataAngleItem]])},this)}}}{let C33=self.$e,INITIAL_VALUE_MODE_START_VALUE="start-value",INITIAL_VALUE_MODE_CURRENT_STATE="current-state",PING_PONG_BEGIN=0,PING_PONG_END=1,createdTweens=0;C33.Bht=class Tween extends C33.nK{constructor(t,e){super("tween-"+createdTweens++,t,e),this.e3="",this.Gat=!1,this.Oat=INITIAL_VALUE_MODE_START_VALUE,this.Wtt=null,this.Pat=null,this.Lat=null,this.cit=null,this.xat=null}pQ(t){var e=C33.nh(C33.Event,"tweenstatereleased");e.Dat=this,t.dispatchEvent(e)}Yy(){return 1}VZ(){for(var t of this.FZ.SQ().vQ())this.$Z.push(C33.Nat.F_(this,t));this.cit=this.$Z[0]}gtt(){var t=this.FZ.SQ().Ttt(),t=C33.Nat.F_(this,t);return this.$Z.push(t),this.Fat(),t}Fat(){this.cit=this.$Z[0]}cB(t){return this.cit.wtt()[0]}Vit(t){this.$at=t}hB(){var t=this._J();if(t&&t.length){var e,t=t[0];if(this.cit=t)return e=t.hB(),t.aet()?e:void 0}}Bat(t){this.Lat||(this.Lat=[]),this.Lat.push(t)}kat(t){this.Pat||(this.Pat=[]),this.Pat.push(t)}Wat(t){this.Lat&&-1!==(t=this.Lat.indexOf(t))&&this.Lat.splice(t,1)}Vat(t){this.Pat&&-1!==(t=this.Pat.indexOf(t))&&this.Pat.splice(t,1)}Hat(t,e){for(var i of this.$Z)for(var s of i.Jtt){var r;s.btt()===e&&(r=s.iet(),s=s.Iit(),(r=r.jit(s)).gst(t),r.pst(t))}}Uat(t){for(var e of this.$Z)for(var i of e.Jtt)if(i.btt()===t)return i}jat(t){for(var e of t){var i=this.Uat(e);this.Hat(i.hst(),e)}if(this.DQ()){var s,r=this.H$()-this.UG();this.V$(r);for(s of this.$Z)s.bet(r);this.KQ(0)}else{var h,n=this.UG();this.V$(n);for(h of this.$Z)h.bet(n);this.KQ(n)}this.JQ()}Xat(t,e){var e=this.Uat(e),i=e.iet(),e=e.Iit(),i=i.Prt(e);i.W$(this.H$()),i.gst(t),i.pst(t)}Yat(t){this.e3=t}lB(){return this.e3}qat(t){this.Oat=t}zat(){return this.Oat}oB(t){this.Gat=t}aB(){return this.Gat}kQ(){if(this.Lat)for(var t of this.Lat)t(this);if(!this.ZK())for(var e of this.$Z)e.sit()}WQ(){this.iQ=this.Qc.VQ()}tJ(){if(!this.hQ&&(this.hQ=!0,this.Pat))for(var t of this.Pat)t(this)}W$(t){this.Kat(),super.W$(t)}itt(t){(t=C33.ds(t)?t:this.H$())<0?this.jZ=0:t>=this.H$()?this.jZ=this.H$():this.jZ=t,this.cit.stt()}jK(t){if(!this.QK()&&this.zat()===INITIAL_VALUE_MODE_CURRENT_STATE)for(var e of this.$Z)e.iit();super.jK(t)}$$(t=!1){if(super.$$(t),!this.ZK())for(var e of this.$Z)e.eit()}rf(t=!0,e=!1){this.Kat(),super.rf(t,e)}Kat(){for(var t of this.$Z){var e=t=>{var t=t.UG(),e=this.H$();return 0!==t&&t!==e};t.Zet(e),t.tit(e)}}Uz(){if(!this.N$()){var t=this.hB();if(t&&t.KN().jH())return!1;this.NZ.WK(this),this.ltt()}return!0}zK(i,t,s){if(this.Wtt||(this.Wtt=this.hB()),!this.Wtt||this.Wtt.dk())this.$$(!0),this.WQ();else{var r=this.Wtt.pL();if(0!==(i=-1!==r?s*r:i)||0!==this.aQ){this.aQ=i;s=this.jZ+this.XZ+i*this.YZ,r=this.FZ.Ctt;s<0?(this.jZ=0,this.XZ=-s):r<=s?(this.jZ=r,this.XZ=this.jZ-s):(this.jZ=s,this.XZ=0);let t=!1,e=!1;i=this.j$(),s=this.Y$();i||s?i&&!s?0<this.YZ?this.jZ>=r&&(this.itt(0),this.Jat(C33.Zat.Tween.Tq.OnAnyTweenLoop),this.Jat(C33.Zat.Tween.Tq.OnTweensLoop),e=!0):this.jZ<=0&&(this.itt(r),this.Jat(C33.Zat.Tween.Tq.OnAnyTweenLoop),this.Jat(C33.Zat.Tween.Tq.OnTweensLoop),e=!0):!i&&s?0<this.YZ?this.jZ>=r&&(this.KQ(r),this.q$(-1*this.z$()),e=!0,this.qZ===PING_PONG_END?this.zZ<this.s$()?(this.zZ++,this.Jat(C33.Zat.Tween.Tq.OnAnyTweenLoop),this.Jat(C33.Zat.Tween.Tq.OnTweensLoop),this.Jat(C33.Zat.Tween.Tq.OnAnyTweenPingPong),this.Jat(C33.Zat.Tween.Tq.OnTweensPingPong),this.qZ=PING_PONG_BEGIN):(this.Jat(C33.Zat.Tween.Tq.OnAnyTweenPingPong),this.Jat(C33.Zat.Tween.Tq.OnTweensPingPong),t=!0):this.qZ===PING_PONG_BEGIN&&(this.Jat(C33.Zat.Tween.Tq.OnAnyTweenPingPong),this.Jat(C33.Zat.Tween.Tq.OnTweensPingPong),this.qZ=PING_PONG_END)):this.jZ<=0&&(this.KQ(0),this.q$(-1*this.z$()),e=!0,this.qZ===PING_PONG_END?this.zZ<this.s$()?(this.zZ++,this.Jat(C33.Zat.Tween.Tq.OnAnyTweenLoop),this.Jat(C33.Zat.Tween.Tq.OnTweensLoop),this.Jat(C33.Zat.Tween.Tq.OnAnyTweenPingPong),this.Jat(C33.Zat.Tween.Tq.OnTweensPingPong),this.qZ=PING_PONG_BEGIN):(t=!0,this.Jat(C33.Zat.Tween.Tq.OnAnyTweenPingPong),this.Jat(C33.Zat.Tween.Tq.OnTweensPingPong)):this.qZ===PING_PONG_BEGIN&&(this.Jat(C33.Zat.Tween.Tq.OnAnyTweenPingPong),this.Jat(C33.Zat.Tween.Tq.OnTweensPingPong),this.qZ=PING_PONG_END)):i&&s&&(0<this.YZ?this.jZ>=r&&(this.KQ(r),this.q$(-1*this.z$()),e=!0,this.qZ===PING_PONG_BEGIN&&(this.Jat(C33.Zat.Tween.Tq.OnAnyTweenPingPong),this.Jat(C33.Zat.Tween.Tq.OnTweensPingPong)),this.qZ===PING_PONG_END&&(this.Jat(C33.Zat.Tween.Tq.OnAnyTweenLoop),this.Jat(C33.Zat.Tween.Tq.OnTweensLoop),this.Jat(C33.Zat.Tween.Tq.OnAnyTweenPingPong),this.Jat(C33.Zat.Tween.Tq.OnTweensPingPong)),this.qZ++,this.qZ=C33.wrap(this.qZ,0,2)):this.jZ<=0&&(this.KQ(0),this.q$(-1*this.z$()),e=!0,this.qZ===PING_PONG_BEGIN&&(this.Jat(C33.Zat.Tween.Tq.OnAnyTweenPingPong),this.Jat(C33.Zat.Tween.Tq.OnTweensPingPong)),this.qZ===PING_PONG_END&&(this.Jat(C33.Zat.Tween.Tq.OnAnyTweenLoop),this.Jat(C33.Zat.Tween.Tq.OnTweensLoop),this.Jat(C33.Zat.Tween.Tq.OnAnyTweenPingPong),this.Jat(C33.Zat.Tween.Tq.OnTweensPingPong)),this.qZ++,this.qZ=C33.wrap(this.qZ,0,2))):0<this.YZ?this.jZ>=r&&(this.zZ<this.s$()?(this.zZ++,this.itt(0),this.Jat(C33.Zat.Tween.Tq.OnAnyTweenLoop),this.Jat(C33.Zat.Tween.Tq.OnTweensLoop),e=!0):(this.KQ(r),t=!0)):this.jZ<=0&&(this.zZ<this.s$()?(this.zZ++,this.itt(r),this.Jat(C33.Zat.Tween.Tq.OnAnyTweenLoop),this.Jat(C33.Zat.Tween.Tq.OnTweensLoop),e=!0):(this.KQ(0),t=!0)),t?(this.cit.ptt(),this.$$(!0),this.WQ()):(this.cit.Dc(this.jZ,!0,!1,e,this.nQ,!1),this.nQ&&(this.nQ=!1))}}}Jat(t){var e=this.hB(),i=e.Qat(C33.Zat.Tween);i.PushTriggerTween(this),this.Qc.LF(t,e,i.V6()),i.PopTriggerTween()}GX(){var t=super.GX(),e=this.AQ();return Object.assign(t,{tweenDataItemJson:e.GX(),id:this.e3,destroyInstanceOnComplete:this.Gat,initialValueMode:this.Oat})}OX(t){t&&(this.AQ().OX(t.tweenDataItemJson),super.OX(t),this.e3=t.id,this.Gat=t.destroyInstanceOnComplete,this.Oat=t.initialValueMode,this.Fat())}static IsPlaying(t){return t.IsPlaying()}static Q$(t){return t.Q$()}static tot(t){return!!t.Y$()&&t.xQ()===PING_PONG_BEGIN}static eot(t){return!!t.Y$()&&t.xQ()===PING_PONG_END}static iot(t){var e=t.runtime.TQ(),i=new C33.unt;if(t.json)return i.OX(t.json.tweenDataItemJson),(r=new C33.Bht(i,e)).OX(t.json),r;var s,r=new C33.Bht(i,e),h=(C33.Bs(t.sot)||(t.sot=[t.sot]),r.Yat(t.id),r.NQ(t.tags),r.qat(t.initialValueMode),r.oB(t.releaseOnComplete),r.U$(t.loop),r.X$(t.pingPong),r.V$(t.time),r.RQ(0),r.bQ("default"),r.GQ(t.sot[0].resultMode),r.OQ(t.repeatCount),r.gtt()),i=(h.Ret(t.H6.uF()),h.bQ("default"),h.GQ(t.sot[0].resultMode),h.Oet(!0),h.Pet(t.H6.KN().uP()),t.H6.O6()),e=i.Det()?i.xet():t.H6.s5().eC(),i=i.Det()?i.Fet():t.H6.s5().cC(),e=(h.Let(e),h.Net(i),h.qet()),i=(e.W$(0),e.rB("noease"),e.Oet(!0),e.NQ(""),h.qet());i.W$(t.time),i.rB("noease"),i.Oet(!0),i.NQ("");for(s of t.sot){var n=h.Ket(),a=(n.Pit(s.sourceId),n.Dit(s.sourceArgs),n.Bit(s.property),n.Vit(s.type),n.Yit(NaN),n.zit(NaN),n.bQ("default"),n.GQ(s.resultMode),n.Oet(!0),n.fst()),a=(a.Hit(s.valueType),a.W$(0),a.rB(s.ease),a.Oet(!0),a.gst(s.startValue),a.pst(s.startValue),n.fst());a.Hit(s.valueType),a.W$(t.time),a.rB(s.ease),a.Oet(!0),a.gst(s.endValue),a.pst(s.endValue),n.yQ()}return r}static Ret(t,e){if(!isNaN(e))for(var i of t._J())i.Ret(e)}rot(t,e){return this.xat||(this.xat=C33.nh(self.iB,this,t,e)),this.xat}}}{let C33=self.$e;C33.Nat=class TweenTrack extends C33.gQ{constructor(t,e){super(t,e),this.hot=null,this.not=null}static F_(t,e){return C33.nh(C33.Nat,t,e)}aot(){1===this.Jtt.length?this.hot=this.Jtt[0]:(this.hot=this.Jtt[0],this.not=this.Jtt[1])}Ztt(){for(var t of this.Ftt.iet().eet())this.Jtt.push(C33.oot.F_(this,t));this.aot()}Ket(){var t=this.Ftt.iet().Jet(),t=C33.oot.F_(this,t);return this.Jtt.push(t),this.aot(),t}jK(){if(this.net(),this.aet()||!this.IQ()){var t,e=this.het().DQ()?0:this.wet();for(t of this.Jtt)t.jK(e),0===this.Qtt&&1===t.ket()&&(this.Qtt=1),0===this.iK&&1===t.XK()&&(this.iK=1);this.tet=0,this.Jtt.some(t=>t.dtt())&&(this.tet=1),this.Ytt=this.Wet(e),this.Utt=!1,this.jtt=!1,this.Dc(e)}}mtt(){}Dc(t,e=0,i=!1,s=!1,r,h=!1,n=!1){if(this.Wtt||this.hB(),this.Wtt)return!(this.Wtt.dk()||h&&this.KN().jH())&&((this.not?(this.hot.Dc(t,i,s,n),this.not):this.hot).Dc(t,i,s,n),void(0!==this.hot.ket()&&(this.Vtt||(this.Vtt=this.Wtt.s5()),this.Vtt)&&this.Vtt.o7()))}Stt(){}OX(t){super.OX(t),this.aot()}}}{let C33=self.$e;C33.oot=class TweenPropertyTrackState extends C33.ret{constructor(t,e){super(t,e),this.lot=!1}static F_(t,e){return C33.nh(C33.oot,t,e)}Dc(t,e=!1,i=!1,s=!1){let r,h;var n,a,o;h=this.lot?(r=this.pit[0],this.pit[1]):(r=e?this.dit.Qit(t,this.fit):((!this.Sit||(n=this.het(),o=this.Sit.AJ(),a=this.Sit.UG(),o=o?o.UG():n.H$(),t<=a)||o<=t)&&(this.Sit=this.dit.Qit(t,this.fit)),this.Sit)).AJ(),this.Cit.Dc(t,r,h,e,i,s)}fst(){var t=this.fit.vit().dst();return this.Sit=null,this.lot=this.Kit().length<=2,t}tit(t){this.Sit=null,this.fit.vit().Cst(t),this.lot=this.Kit().length<=2}GX(){return{sourceAdapterJson:this.yQ().GX(),basic:this.lot}}OX(t){t&&(this.yQ().OX(t.sourceAdapterJson),this.lot=t.basic)}}}{let C33=self.$e,Ease=self.nc,NAME=0,TRANSITION_KEYFRAMES=1,LINEAR=2;C33.Nc=class Transition extends C33.rh{constructor(t,e=!0){super(),this.uh=t[NAME],this.uot=t[LINEAR],this.cot=[];for(var i of t[TRANSITION_KEYFRAMES]){i=C33.fot.F_(this,i);this.cot.push(i)}for(let t=0;t<this.cot.length;t++){var s=this.cot[t],r=this.cot[t+1],h=this.cot[t-1];s.Jnt(r),s.cat(h)}this.dot=new Map,this.Cot=new Map,this.pot(),e&&Ease.$c(this.uh,(t,e,i,s)=>this.Dc(t,e,i,s),null,{transition:this})}static F_(t){return C33.nh(C33.Nc,t)}ah(){for(var t of this.cot)t.ah();C33.xn(this.cot),this.cot=null,this.dot.clear(),this.dot=null,this.Cot.clear(),this.Cot=null}Fc(t){this.uot=!!t}mot(t){var e,i=this.Cot.get(t);if(i)return i;for(e of this.cot)if(e.vot()===t)return this.Cot.set(t,e),e}Sot(e){for(let t=this.cot.length-1;0<=t;t--){var i=this.cot[t],s=i.vot();if(s<=e){let t=i;if(s<e)return t;if(s===e){for(;t;){var r=t.MJ();if(!r)break;if(r.vot()!==t.vot())break;t=r}return t}}}}Dc(t,e,i,s){let r=t/s;if(this.uot)return a=this.mot(0),d=this.mot(1),a=e+(e+i)*a.got(),d=(e+i)*d.got()-a,0===s?a+d:Ease.kc(t,a,d,s);0===s&&(r=1);let h=this.Sot(r),n=h.AJ();n||(t=h.MJ(),a=h,h=t,n=a);var a,o,l,u,c,f,d=n.vot()-h.vot(),s=C33.fh(r,h.vot(),n.vot(),0,d);return h.Tot()||0==d?(t=e+(e+i)*h.got(),a=(e+i)*n.got()-t,0==d?1===s?t+a:t:Ease.kc(s,t,a,d)):(t=h.vot(),a=h.got(),d=h.vot()+h._ot(),o=h.got()+h.yot(),l=n.vot()+n.Eot(),u=n.got()+n.Iot(),c=n.vot(),f=n.got(),s=Ease.Ic("spline")(s,t,a,d,o,l,u,c,f,this.dot.get(h)),(1-(s+=h.got()))*e+s*(e+i))}pot(){this.dot.clear();for(let t=0;t<this.cot.length-1;t++){var e,i,s,r,h=this.cot[t];h.hnt()&&(h=h,(r=this.cot[t+1]).nnt())&&(e=h.vot(),i=h.vot()+h._ot(),s=r.vot()+r.Eot(),r=r.vot(),this.dot.set(h,Ease.Wc(e,i,s,r)))}}}}{let C33=self.$e,VALUE_X=0,VALUE_Y=1,START_ANCHOR_X=2,START_ANCHOR_Y=3,END_ANCHOR_X=4,END_ANCHOR_Y=5,START_ENABLE=6,END_ENABLE=7,SEGMENT_MODE=8;C33.fot=class TransitionKeyframe extends C33.rh{constructor(t,e){super(),this.Aot=t,this.Mot=e[VALUE_X],this.Rot=e[VALUE_Y],this.wot=e[START_ANCHOR_X],this.bot=e[START_ANCHOR_Y],this.Got=e[END_ANCHOR_X],this.Oot=e[END_ANCHOR_Y],this._at=e[START_ENABLE],this.Eat=e[END_ENABLE],this.Pot=e[SEGMENT_MODE],this.Knt=null,this.lat=null}ah(){this.Aot=null}static F_(t,e){return C33.nh(C33.fot,t,e)}Jnt(t){this.Knt=t}AJ(){return this.Knt}cat(t){this.lat=t}MJ(){return this.lat}vot(){return this.Mot}got(){return this.Rot}_ot(){return this.wot}yot(){return this.bot}Eot(){return this.Got}Iot(){return this.Oot}hnt(){return this._at}nnt(){return this.Eat}Tot(){return"linear"===this.Pot}Lot(){return"cubic"===this.Pot}}}{let C33=self.$e;C33.xot=class TransitionManager extends C33.rh{constructor(t){super(),this.Qc=t,this.Dot=[]}ah(){for(var t of this.Dot)t.ah();C33.xn(this.Dot),this.Dot=null}F_(t){this.Dot.push(C33.Nc.F_(t))}}}{let C33=self.$e;C33.Not=class TemplateManager extends C33.rh{constructor(t){super(),this.Qc=t,this.Fot=null,this.$ot=null,this.Yz=t=>this.qz(t.H6)}ah(){if(this.sK(),this.Fot){for(var t of this.Fot.values())t.clear();this.Fot.clear()}this.Fot=null,this.Qc=null}F_(t){var e,i;this.Fot||(this.Fot=new Map),t&&(e=t[0][16][0],this.Fot.has(i=t[1])||this.Fot.set(i,new Map),this.Fot.get(i).set(e,t))}rK(){var t=this.Qc.x3();t&&t.addEventListener("instancedestroy",this.Yz)}sK(){var t=this.Qc.x3();t&&t.removeEventListener("instancedestroy",this.Yz)}Bot(){return!!this.Fot&&0!==this.Fot.size}kot(t,e){let i=0;return i=t instanceof C33.Wot?t.uP():t,this.Fot.has(i)&&(t=this.Fot.get(i).get(e))?JSON.parse(JSON.stringify(t)):void 0}Vot(t,e){this.$ot||(this.$ot=new WeakMap),this.$ot.has(t)||this.$ot.set(t,e)}Hot(t){return this.$ot&&this.$ot.get(t)||""}qz(t){this.$ot&&this.$ot.has(t)&&this.$ot.delete(t)}}}{let C33=self.$e;C33.Uot=class FlowchartManager{constructor(t){this.Qc=t,this.jot=new C33.Xot}ah(){this.jot.ah(),this.jot=null,this.Qc=null}I5(){return this.Qc}F_(t){this.jot.sc(t)}Yot(t){return this.jot.ri(t)}qot(){return this.jot.qot()}}}{let C33=self.$e;C33.zot=class Flowchart{constructor(t,e,i,s,r,h,n){this.Qc=r.I5(),this.Kot=r,this.Jot=t,this.Zot=i,this.Qot=s,this.Bp=e,this.Rz=h,this.tlt=n??h.hB().uF(),this.elt(),this.ilt=this.rlt?.slt()??-1,this.hlt=[],this.nlt=null,this.olt=NaN,this.llt=null,this.ult=null,this.clt=null,this.flt="",this.dlt=null,this.Clt="",this.plt="",this.mlt=0,this.vlt=!1,this.tQ=!1}ah(){this.tQ||(C33.xn(this.hlt),this.hlt=null,this.Qc=null,this.Kot=null,this.Qot=null,this.Rz=null,this.nlt=null,this.olt=NaN,this.llt&&this.llt.clear(),this.llt=null,this.ult=null,this.clt=null,this.flt="",this.dlt=null,this.Clt="",this.plt="",this.tQ=!0)}oh(){return this.tQ}Slt(){return this.Kot}I5(){return this.Qc}jc(){return this.Jot}glt(){return this.Qot}D$(){return this.Bp}vK(){return this.Rz||(this.Rz=this.Qc.ZL(this.tlt).O6()),this.Rz}Tlt(){return this._lt(this.ilt)}ylt(){var t=this.Tlt();return t?t.D$():""}Elt(t){var e=this.Tlt();if(e){if(C33.ds(t)){var i=e.Ilt(),i=i?i[t]:void 0;if(C33.ds(i))return this._lt(i)}if("string"==typeof t)for(var s of e.Ilt()){s=this._lt(s);if(s.D$()===t)return this._lt(s.slt())}}}Alt(t){t=this.Elt(t);return t?t.D$():""}Mlt(t){var e,t=this.Elt(t);return t&&(e=t.Ilt())?e.indexOf(t.slt()):-1}Rlt(){var t=this.Tlt();return(t=t&&t.Ilt())?t.length:0}_lt(t){return this.Qot._lt(t)}rf(){this.blt().wlt(!0)}wlt(t){if(this.Glt()){for(var[e,i]of this.Glt().entries())i.wlt(!1);this.Glt().clear()}this.llt=null,this.nlt=null,this.Olt=null,this.ult=null,this.flt="",this.dlt=null,this.Clt="",this.plt="",this.hlt=[],t?(this.Kot.Plt(this),(t=this.rlt.slt())!==this.ilt&&this.Llt(t)):this.ilt=this.rlt.slt()}xlt(){var t=this.Qot._lt(this.ilt);return t?t.Nlt().Dlt():0}Flt(t){t=this.$lt(t);return t?t.jc():""}Blt(t){let e;return C33.ds(t)&&(e=this.$lt(t)),"string"==typeof t&&(e=this.klt(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),e?e.Fit():""}Wlt(t){let e;C33.ds(t)&&(e=this.$lt(t));t=(e="string"==typeof t?this.klt(t):e).Vlt();C33.ds(t)&&(this.hlt.push(this.ilt),this.Llt(t))}Hlt(t){var t=this.Qot.Ult(t);t&&(t=this.Qot._lt(t.slt()))&&(this.hlt.push(this.ilt),this.Llt(t.slt()))}jlt(){var t=this.hlt.pop();C33.ds(t)?this.Llt(t):this.Xlt()&&(this.Kot.Plt(this.Xlt(),!0,!1,!1),this.Xlt().Llt(this.Ylt()),this.blt().qlt(this.Xlt()))}zlt(t){var e=this.Tlt();e&&(e.slt(),e=this.Elt(t))&&(this.hlt.push(this.ilt),this.Llt(e.slt()))}Klt(e){if(C33.ds(e))return!!this.Qot._lt(this.ilt).Nlt().Jlt()[e];if("string"==typeof e){var i=this.Qot._lt(this.ilt).Nlt().Jlt();for(let t=0;t<i.length;t++)if(i[t].jc()===e)return!0}return!1}Zlt(){this.vlt=!0}Qlt(){return 0<this.mlt}tut(){this.mlt++}eut(){this.mlt--,0===this.mlt&&this.vlt&&this.Kot.iut(this)}Llt(t){var i=this.ilt,s=this.vK().hB();if(this.tut(),this.Kot.sut(this),this.Qc.LF(C33.yq.Flowchart.Tq.OnBeforeAnyNodeChange,s),this.Qc.LF(C33.yq.Flowchart.Tq.OnBeforeTaggedNodeChange,s),this.Qc.LF(C33.yq.Flowchart.Tq.OnBeforeAnyNodeChangeInFlowchart,s),this.Qc.LF(C33.yq.Flowchart.Tq.OnBeforeTaggedNodeChangeInFlowchart,s),this.ilt=t,this.Qc.LF(C33.yq.Flowchart.Tq.OnAnyNodeChange,s),this.Qc.LF(C33.yq.Flowchart.Tq.OnTaggedNodeChange,s),this.Qc.LF(C33.yq.Flowchart.Tq.OnAnyNodeChangeInFlowchart,s),this.Qc.LF(C33.yq.Flowchart.Tq.OnTaggedNodeChangeInFlowchart,s),this.Kot.rut(),this.eut(),!this.oh()){t=this._lt(this.ilt);if("reference"===t.Yy()){s=t.hut();if(this.nut(t)){this.hlt.pop();var r=this.aut(t);this.Kot.Plt(r,!0,!0,!1),r.out(this,i),this.blt().qlt(r)}else{r=t.lut();if(s){this.hlt.pop();let e=t.uut();if(e){let t=this.Kot.cut(e);for(;t;)e=C33.Wd(e),t=this.Kot.cut(e)}else{e=s+"-ref";let t=this.Kot.cut(e);for(;t;)e=C33.Wd(e),t=this.Kot.cut(e)}s=this.Kot.fut(s,r,e,this.Rz,!0),r=(s.out(this,i),this.dut(t,s),this.blt());s.Cut(r),r.qlt(s)}}}}}$lt(t){var e=this.Qot._lt(this.ilt);return(e=e&&e.Nlt().Jlt())&&e[t]||null}klt(t){var e=this.Qot._lt(this.ilt);return e&&e.Nlt().mut(t)||null}elt(e){if("number"==typeof e){let t=this._lt(e);t=t||this.Qot.vut(),this.rlt=t}else{let t=this.Qot.Ult(this.Zot);t=t||this.Qot.vut(),this.rlt=t}}GX(){return this.vlt?null:{flowchartName:this.Jot,flowchartTag:this.Bp,startNodeTag:this.Zot,currentNodeId:this.ilt,previousNodeIds:this.hlt,pluginUID:this.Rz.hB().uF(),reference:{previousFlowchartTag:this.Xlt()?this.Xlt().D$():"",previousStartNodeId:C33.ds(this.Ylt())?this.Ylt():NaN,referencesJson:this.Sut(),currentReferenceFlowchartTag:this.gut()?this.gut().D$():"",rootFlowchartTag:this.blt()?this.blt().D$():""}}}Sut(){if(!this.Tut())return null;var t,e,i=[];for([t,e]of this.Glt().entries())i.push({flowchartElementId:t.slt(),flowchartStateTag:e.D$()});return i.length?i:null}OX(t){t&&(this.Jot=t.flowchartName,this.Bp=t.flowchartTag,this.Zot=t.startNodeTag,this.ilt=t.currentNodeId,this.hlt=t.previousNodeIds,this.tlt=t.pluginUID,t.hasOwnProperty("reference")&&(t=t.reference,this.flt=t.previousFlowchartTag,this.olt=t.previousStartNodeId,this.dlt=t.referencesJson,this.Clt=t.currentReferenceFlowchartTag,this.plt=t.rootFlowchartTag),this.elt())}Xlt(){return"string"==typeof this.flt&&this.flt&&(this.nlt=this.Kot.cut(this.flt),this.flt=""),this.nlt}Ylt(){return this.olt}out(t,e){this.nlt=t,this.olt=e}gut(){return"string"==typeof this.Clt&&this.Clt&&(this.ult=this.Kot.cut(this.Clt),this.Clt=""),this.ult}qlt(t){this.ult=t,this.ult===this&&(this.ult=null)}blt(){return"string"==typeof this.plt&&this.plt&&(this.clt=this.Kot.cut(this.plt),this.plt=""),this.clt||this}Cut(t){this.clt=t}Tut(){return this._ut(),!!this.llt}nut(t){return this._ut(),this.llt&&this.llt.has(t)}_ut(){if(this.dlt){this.llt&&this.llt.clear(),this.llt||(this.llt=new Map);for(var t of this.dlt){var e=this.Kot.cut(t.flowchartStateTag),t=e._lt(t.flowchartElementId);this.llt.set(t,e)}this.dlt=null}}Glt(){return this._ut(),this.llt}aut(t){return this._ut(),this.llt.get(t)}dut(t,e){this.llt||(this.llt=new Map),this.llt.set(t,e)}}}{let C33=self.$e;C33.yut=class FlowchartStateManager{constructor(t){this.Qc=t,this.Eut=new Map,this.Iut=null,this.Aut=[],this.Mut=()=>this.Zz(),this.Rut=null}ah(){C33.xn(this.Aut),this.Aut=null,this.Eut.clear(),this.Eut=null,this.Iut=null,this.Qc=null,this.Rut=null}I5(){return this.Qc}fut(t,e,i,s,r,h){var n=this.Qc.Slt().Yot(t);if(n){if(!this.Eut.has(i))return e=new C33.zot(t,i,e,n,this,s,h),this.Eut.set(i,e),r&&this.Plt(e,!0),e;console.warn(`[Flowcharts] there already is a flowchart with the tag '${i}'`)}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}iut(t){var e;t.Zlt(),t.Qlt()||(e=t.D$(),this.Eut.delete(e),t.ah(),this.Iut===t&&(this.Iut=null))}wut(t){t.rf()}cut(t){return this.Eut.get(t)}sut(t){this.Aut.push(t)}rut(){this.Aut.pop()}Plt(t,e=!1,i=!1,s=!0){(t=s&&t.gut()||t)!==this.Iut&&(this.but(),this.Gut(t,e,i))}Out(t){return"string"==typeof t?this.cut(t):this.Aut.length?this.Aut[this.Aut.length-1]:this.Iut}but(){var t;this.Iut&&!this.Iut.oh()&&(t=this.Iut.vK().hB(),this.Iut.tut(),this.sut(this.Iut),this.Qc.LF(C33.yq.Flowchart.Tq.OnBeforeFlowchartChange,t),this.rut(),this.Iut.eut())}Gut(t,e=!1,i=!1){this.Iut=t,this.Iut&&!this.Iut.oh()&&(t=this.Iut.vK().hB(),this.Iut.tut(),this.sut(this.Iut),this.Qc.LF(C33.yq.Flowchart.Tq.OnFlowchartChange,t),!0!==i&&"number"!=typeof i||this.Iut.elt(i),e&&(this.Qc.LF(C33.yq.Flowchart.Tq.OnAnyNodeChange,t),this.Qc.LF(C33.yq.Flowchart.Tq.OnTaggedNodeChange,t)),this.rut(),this.Iut.eut())}GX(){return{flowchartJsonObjects:[...this.Eut.values()].map(t=>t.GX()),currentFlowchartTag:this.Iut?this.Iut.D$():null}}OX(t){if(t){this.Rut=t;var e,i,s,r=new Map;for(e of this.Rut.flowchartJsonObjects){var h,n=e.flowchartTag;this.Eut.has(n)?((h=this.Eut.get(n)).OX(e),r.set(n,h)):((n=this.fut(e.flowchartName,e.startNodeTag,e.flowchartTag,null,!1,e.pluginUID)).OX(e),r.set(e.flowchartTag,n))}for([i,s]of this.Eut.entries())r.has(i)||s.ah();this.Eut.clear(),this.Eut=r,this.Qc.uq()?this.Qc.x3().addEventListener("afterload",this.Mut):this.Zz()}}Zz(){this.Qc.x3().removeEventListener("afterload",this.Mut);var t=this.Eut.get(this.Rut.currentFlowchartTag);t&&this.Plt(t,!0),this.Rut=null}}}{let C33=self.$e;C33.Xot=class FlowchartDataManager{constructor(){this.Put=new Map}ah(){for(var t of this.Put.values())t.ah();this.Put.clear(),this.Put=null}sc(t){var t=new C33.Lut(t),e=t.jc();this.Put.set(e,t)}ri(t){return this.Put.get(t)}qot(){return!!this.Put.size}static xut(t,e,i,s){if(e)for(var r of e){r=new i(r,s);t.push(r)}}}}{let C33=self.$e,NAME=0,NODES=1;C33.Lut=class FlowchartDataItem{constructor(t){this.uh=t[NAME],this.Dut=new C33.Nut(t[NODES],this)}ah(){this.Dut.ah(),this.Dut=null}Fut(){return this.Dut}_lt(t){return this.Dut._lt(t)}Ult(t){return this.Dut.Ult(t)}vut(){return this.Dut.vut()}jc(){return this.uh}}}{let C33=self.$e,FLOWCHART_ID=0,TAG=1,PARENT_FLOWCHART_IDS=2,PARENT_OUTPUT_FLOWCHART_IDS=3,CHILDREN_FLOWCHART_IDS=4,OUTPUTS=5,IS_START=6,TYPE=7,REFERENCE_FLOWCHART=8,REFERENCE_FLOWCHART_START_NODE=9,REFERENCE_FLOWCHART_TAG=10;class FlowchartNodeDataItem{constructor(t,e){this.Dut=e,this.a3=t[TYPE],this.$ut=t[FLOWCHART_ID],this.Bp=t[TAG],this.But=t[PARENT_FLOWCHART_IDS],this.kut=null,this.Wut=null,"dictionary"===this.a3&&(this.kut=t[PARENT_OUTPUT_FLOWCHART_IDS],this.Wut=t[CHILDREN_FLOWCHART_IDS]),this.Vut=t[IS_START],this.Hut=null,this.Uut=null,this.jut=null,"reference"===this.a3&&(this.Hut=t[REFERENCE_FLOWCHART],this.Uut=t[REFERENCE_FLOWCHART_START_NODE],this.jut=t[REFERENCE_FLOWCHART_TAG]),this.Xut=new C33.Yut(t[OUTPUTS],this)}ah(){this.Dut=null}Fut(){return this.Dut}Nlt(){return this.Xut}slt(){return this.$ut}D$(){return this.Bp}qut(){return this.Vut}Ilt(){return this.But}zut(){return this.kut}Kut(){return this.Wut}Yy(){return this.a3}hut(){return this.Hut}lut(){return this.Uut}uut(){return this.jut}}C33.Nut=class FlowchartNodeData{constructor(t,e){this.Qot=e,this.Jut=[],this.Zut=new Map,this.Qut=new Map,this.tct=null,C33.Xot.xut(this.Jut,t,FlowchartNodeDataItem,this);for(var i of this.Jut){var s,r=i.slt(),h=i.D$(),n=i.qut();this.Zut.set(r,i),h&&this.Qut.set(h,i),n&&(this.tct=i);for(s of i.Nlt().ect()){var a=s.slt();this.Zut.set(a,s)}}}ah(){this.Qot=null;for(var t of this.Jut)t.ah();C33.xn(this.Jut),this.Jut=null}glt(){return this.Qot}_lt(t){return this.Zut.get(t)}Ult(t){return this.Qut.get(t)}vut(){return this.tct}*ict(){for(var t of this.Jut)yield t}}}{let C33=self.$e,FLOWCHART_ID=0,NAME=1,VALUE=2,CONNECTED_FLOWCHART_NODE_FLOWCHART_ID=3;class FlowchartNodeDataOutputItem{constructor(t,e){this.Xut=e,this.$ut=t[FLOWCHART_ID],this.uh=t[NAME],this.zst=t[VALUE],this.sct=t[CONNECTED_FLOWCHART_NODE_FLOWCHART_ID]}ah(){this.Xut=null}Nlt(){return this.Xut}slt(){return this.$ut}jc(){return this.uh}Fit(){return this.zst}Vlt(){return this.sct}}C33.Yut=class FlowchartNodeOutputData{constructor(t,e){this.rct=e,this.hct=[],this.nct=new Map,C33.Xot.xut(this.hct,t,FlowchartNodeDataOutputItem,this);for(var i of this.hct)this.nct.set(i.jc(),i)}ah(){this.rct=null;for(var t of this.hct)t.ah();C33.xn(this.hct),this.hct=null}oct(){return this.rct}Dlt(){return this.hct.length}Jlt(){return this.hct}mut(t){return this.nct.get(t)}*ect(){for(var t of this.hct)yield t}}}{let C33=self.$e;C33.lct=class SolStack extends C33.rh{constructor(t){super(),this.uct=t,this.cct=[],this.cct.push(C33.nh(C33.fct,this)),this.$p=0,this.dct=this.cct[0]}ah(){for(var t of this.cct)t.ah();C33.xn(this.cct),this.dct=null,this.uct=null}KN(){return this.uct}iD(){return this.dct}Cct(){return this.cct[this.$p-1]}Yu(){this.iD().Yu()}pct(){var t,e=this.cct,i=++this.$p;i===e.length?(t=C33.nh(C33.fct,this),e.push(t),this.dct=t):((t=e[i]).rf(),this.dct=t)}mct(){var t=this.cct,e=++this.$p,i=(e===t.length&&t.push(C33.nh(C33.fct,this)),t[e]);i.Af(t[e-1]),this.dct=i}c8(){this.dct=this.cct[--this.$p]}vct(i){var s=this.cct;for(let t=0,e=s.length;t<e;++t)s[t].vct(i)}}}{let C33=self.$e;C33.fct=class Sol extends C33.rh{constructor(t){super(),this.cct=t,this.uct=this.cct.KN(),this.Sct=this.uct.I5().ZP(),this.gct=!0,this.sV=[],this.Tct=[]}ah(){this._ct(),this.cct=null,this.uct=null,this.Sct=null}_ct(){C33.xn(this.sV),C33.xn(this.Tct)}KN(){return this.uct}yct(){return this.gct}Ect(){return this.gct?!!this.uct.rD():!!this.sV.length}eD(){return this.gct?this.uct.eD():this.sV}Ict(){return!!this.Tct.length}Act(){return this.Tct}Mct(){var t=this.eD();return t.length?t:this.Tct}rf(){this.gct=!0,C33.xn(this.Tct)}Yu(){this.gct=!0}Af(t){t.yct()?this.rf():(this.gct=!1,C33.$n(this.sV,t.sV),C33.xn(this.Tct))}Rct(t){this.sV.push(t)}wct(t){this.Tct.push(t)}bct(t){this.gct=!!t}Gct(){return this.sV}Oct(){return this.Tct}Pct(t){this.gct=!1,C33.xn(this.sV),this.sV.push(t)}Lct(t){this.gct=!1,C33.$n(this.sV,t)}xct(t){this.gct=!1,C33.xn(this.sV);for(var e of t)this.sV.push(e)}Dct(t,e){for(var i of e)t.has(i)||this.Tct.push(i)}Nct(t){for(var e of t)this.sV.push(e);C33.Hn(this.Tct,t)}Fct(){C33.xn(this.Tct)}$ct(t){var e;t&&(this.Sct.zk().jP().Bct()?(this.yct()&&(C33.xn(this.sV),C33.$n(this.Tct,t.KN().eD()),this.gct=!1),-1!==(e=this.Tct.indexOf(t))&&(this.sV.push(this.Tct[e]),this.Tct.splice(e,1))):this.Pct(t))}vct(t){C33.Hn(this.sV,t),C33.Hn(this.Tct,t)}}}{let C33=self.$e;C33.kct=class EventStack extends C33.rh{constructor(t){super(),this.Wct=t,this.Qc=this.Wct.I5(),this.cct=[],this.cct.push(C33.nh(C33.Vct,this,null)),this.$p=0,this.Hct=[]}ah(){for(var t of this.cct)t.ah();C33.xn(this.cct),C33.xn(this.Hct),this.Wct=null,this.Qc=null}BP(){return this.Wct}I5(){return this.Qc}zk(){return this.cct[this.$p]}Uct(){return this.cct}jct(){return this.$p}Kk(t){var e,i=this.cct,s=++this.$p;return s===i.length?(e=C33.nh(C33.Vct,this,t),i.push(e),e):((e=i[s]).rf(t),e)}c8(){--this.$p}Xct(t){this.Hct.push(t)}Yct(){this.Hct.pop()}JP(){var t=this.Hct;return 0===t.length?null:t.at(-1)}}}{let C33=self.$e;C33.Vct=class EventStackFrame extends C33.rh{constructor(t,e){super(),this.cct=t,this.Qc=this.cct.I5(),this.qct=e,this.zct=0,this.Kct=0,this.Jct=!1,this.Zct=!1,this.Qct=null,this.t3t=0,this.e3t=0,this.i3t=null}ah(){this.rf(null),this.cct=null,this.Qc=null}rf(t){this.qct=t,this.zct=0,this.Kct=0,this.Jct=!1,this.Zct=!1,this.i3t=null}s3t(t,e){this.qct=t,this.zct=0,this.Kct=e}r3t(){this.zct=0,this.Kct=0}jP(){return this.qct}h3t(t){this.qct=t}n3t(){return this.zct}a3t(t){this.zct=t}o3t(){return this.Kct}l3t(t){this.Kct=t}u3t(t){this.Jct=!!t}c3t(){return this.Jct}f3t(t){this.Zct=!!t}d3t(){return this.Zct}C3t(t){this.Qct=t}p3t(){return this.Qct}m3t(t,e){this.t3t=t,this.e3t=e}QP(){return this.t3t}tL(t){this.e3t=t}v3t(){return this.e3t}S3t(){var t=this.qct;return!!t.g3t()||this.zct<t.T3t()-1&&!!t.qk().length}_3t(t){this.i3t=t}y3t(){return this.i3t}}}{let C33=self.$e;C33.E3t=class LocalVarStack extends C33.rh{constructor(t){super(),this.Wct=t,this.Qc=this.Wct.I5(),this.cct=[],this.$p=-1,this.dct=null,this.I3t=[]}ah(){C33.xn(this.cct),this.Wct=null,this.Qc=null}A3t(t){this.I3t=t;t=this.I3t.slice(0);this.cct.push(t),this.$p=0,this.dct=t}BP(){return this.Wct}I5(){return this.Qc}M3t(){return this.dct}Kk(){var t=++this.$p,e=this.cct;t===e.length?e.push(this.I3t.slice(0)):C33.$n(e[t],this.I3t),this.dct=e[t]}c8(){this.dct=this.cct[--this.$p]}}}{let C33=self.$e;C33.R3t=class LoopStack extends C33.rh{constructor(t){super(),this.Wct=t,this.Qc=this.Wct.I5(),this.cct=[],this.$p=-1}ah(){C33.xn(this.cct),this.Wct=null,this.Qc=null}BP(){return this.Wct}I5(){return this.Qc}w3t(){return 0<=this.$p}M3t(){return this.cct[this.$p]}Kk(){var t;return++this.$p,this.$p===this.cct.length?(t=C33.nh(C33.b3t,this),this.cct.push(t),t):((t=this.cct[this.$p]).rf(),t)}c8(){--this.$p}G3t(e){var i=this.cct;for(let t=this.$p;0<=t;--t){var s=i[t];if(s.jc()===e)return s}return null}O3t(){return this.cct.slice(0,this.$p+1)}}}{let C33=self.$e;C33.b3t=class Loop extends C33.rh{constructor(t){super(),this.P3t=t,this.uh="",this.$p=0,this.L3t=!1,this.x3t=NaN}rf(){this.uh="",this.$p=0,this.L3t=!1,this.x3t=NaN}Zk(t){this.uh=t}jc(){return this.uh}o8(t){this.$p=t}uP(){return this.$p}$$(){this.L3t=!0}u8(){return this.L3t}D3t(t){this.x3t=t}N3t(){return this.x3t}}}{let C33=self.$e;C33.F3t=class ArrayStack extends C33.rh{constructor(){super(),this.cct=[],this.$p=-1}ah(){C33.xn(this.cct)}M3t(){return this.cct[this.$p]}Kk(){var t;return++this.$p,this.$p===this.cct.length?(this.cct.push(t=[]),t):this.cct[this.$p]}c8(){--this.$p}}}{let SortSolArray2=function(t,e){return t.uP()-e.uP()},IsSolArrayIdentical2=function(i,s){for(let t=0,e=i.length;t<e;++t)if(i[t]!==s[t])return!1;return!0},C33=(SortSolArray=SortSolArray2,IsSolArrayIdentical=IsSolArrayIdentical2,self.$e),assert=self.assert;C33.$3t=class EventSheetManager extends C33.rh{constructor(t){super(),this.Qc=t,this.B3t=[],this.k3t=new Map,this.W3t=[],this.V3t=new Map,this.H3t=new Map,this.U3t=new Map,this.j3t=new Map,this.X3t=new Map,this.Y3t=new Map,this.q3t=0,this.z3t=[],this.K3t=[],this.J3t=[],this.Z3t=new Map,this.Q3t=new Map,this.Sct=C33.nh(C33.kct,this),this.tft=C33.nh(C33.E3t,this),this.P3t=C33.nh(C33.R3t,this),this.eft=[],this.ift=[],this.rft=[],this.hft=0,this.nft=0,this.aft=0,this.oft=[],this.lft=[],this.uft=[],this.cft=new Map,this.fft=new Map,self.c3_callFunction=(t,e)=>this.dft(t,e)}ah(){this.xq(),this.Sct.ah(),this.Sct=null,this.tft.ah(),this.tft=null,C33.xn(this.ift),C33.xn(this.rft),this.Qc=null,C33.xn(this.B3t),this.k3t.clear()}F_(t){t=C33.nh(C33.Cft,this,t);this.B3t.push(t),this.k3t.set(t.jc().toLowerCase(),t)}pft(t){this.eft.push(t)}mft(){for(var t of this.Q3t.values())t.vft();for(var e of this.Z3t.values())e.mft();for(var i of this.Q3t.values())i.mft();for(var s of this.B3t)s.mft();for(var r of this.B3t)r.QY();for(var h of this.eft)h.mft(!1);C33.xn(this.eft),this.tft.A3t(this.J3t)}I5(){return this.Qc}ZY(t){return this.k3t.get(t.toLowerCase())||null}Sft(t){this.W3t.push(t),this.V3t.set(t.gft(),t)}Tft(t){this.H3t.set(t.dU(),t)}_ft(t){this.U3t.set(t.dU(),t)}yft(t){this.j3t.set(t.dU(),t)}Eft(t){switch(t.Ift()){case 0:this.Z3t.set(t.Aft().toLowerCase(),t);break;case 1:this.Q3t.set(t.Aft().toLowerCase(),t)}}Mft(t){this.Y3t.set(t.dU(),t),(t.jH()?this.z3t:this.K3t).push(t)}Rft(i){2<=i.length&&i.sort(SortSolArray2);let s=this.X3t.get(i.length);s||(s=[],this.X3t.set(i.length,s));for(let t=0,e=s.length;t<e;++t){var r=s[t];if(IsSolArrayIdentical2(i,r))return r}return s.push(i),i}wft(t){return this.J3t.push(t.bft()),this.q3t++}ZP(){return this.Sct}Gft(){return this.ZP().zk()}jP(){return this.Gft().jP()}Oft(){var t=this.Gft();return t.jP().Pft(t.n3t())}Lft(){var t=this.Gft();return t.jP().xft(t.o3t())}Dft(){return this.tft}Jk(){return this.P3t}Nft(t){var e=[];for(t=t.Fft();t;)C33.qr(e,t.$ft()),t=t.Fft();return e}Bft(t){var e,i={};for(e of this.Nft(t))i[e.kft()]=e.Wft();return Object.create(Object.prototype,i)}Vft(t){return this.Y3t.get(t)||null}Hft(t){return this.H3t.get(t)||null}Uft(t){return this.U3t.get(t)||null}jft(t){return this.j3t.get(t)||null}kP(t){return this.Z3t.get(t.toLowerCase())||null}Xft(t,e){let i=this.Q3t.get((t.jc()+"."+e).toLowerCase());if(i)return i;if(!t.hU())for(var s of t.Yft())if(i=this.Q3t.get((s.jc()+"."+e).toLowerCase()))return i;return null}qft(){return this.z3t}zft(){return this.K3t}Kft(t){for(var e of this.z3t)e.Jft();if(t)for(var i of this.K3t)i.kT()&&i.Jft()}Zft(t){return this.V3t.get(t.toLowerCase())||null}Qft(t){t=this.H3t.get(t);return t&&t.t0t()?t:null}e0t(){return this.W3t}i0t(){for(var t of this.W3t)t.s0t()}r0t(){for(var t of this.B3t)t.h0t()}n0t(t){this.r0t(),this.hft++;for(var e of t.gz()){var i=e.MY();i&&(this.Qc.a0t(e),i.uA(),this.Qc.o0t())}this.hft--}async l0t(t){this.r0t(),this.hft++;for(var e of this.u0t(t))await this.Qc.c0t(e);this.hft--}*u0t(t){for(var e of t.gz()){var i=e.MY();i&&(this.Qc.a0t(e),yield*i.f0t(),this.Qc.o0t())}}d0t(t,e,i,s){let r=!1;if(!t.xL())return this.C0t(e,i,s);this.nft++;for(var h of t.gz()){var n=h.MY();if(n){this.Qc.a0t(h);for(var a of n.p0t()){a=a.d0t(e,i,s);r=r||a}h=n.d0t(e,i,s);r=r||h,this.Qc.o0t()}}return this.nft--,r}*m0t(t,e,i,s){let r=!1;if(!t.xL())return this.C0t(e,i,s);this.nft++;for(var h of t.gz()){var n=h.MY();if(n){this.Qc.a0t(h);for(var a of n.p0t()){a=yield*a.m0t(e,i,s);r=r||a}h=yield*n.m0t(e,i,s);r=r||h,this.Qc.o0t()}}return this.nft--,r}C0t(t,e,i){return this.ift.push([t,e,i]),!1}v0t(t,e,i){let s=null;var r=new Promise(t=>s=t);return this.rft.push([t,e,i,s]),r}*S0t(){if(this.Qc.g0t())throw new Error("should not be in breakpoint");for(var t=this.Qc.FL();this.rft.length;){var[e,i,s,r]=this.rft.shift();r(yield*this.m0t(t,e,i,s))}}async T0t(){for(var t of this.S0t())await this.Qc.c0t(t)}_0t(t,i,s,r){let h=!1;var t=t.xL(),e=t.MY();if(e){this.nft++,this.Qc.a0t(t);var n=e.p0t();for(let t=0,e=n.length;t<e;++t){var a=n[t]._0t(i,s,r);h=h||a}t=e._0t(i,s,r);return h=h||t,this.Qc.o0t(),this.nft--,h}}*y0t(t,i,s,r){let h=!1;var t=t.xL(),e=t.MY();if(e){this.nft++,this.Qc.a0t(t);var n=e.p0t();for(let t=0,e=n.length;t<e;++t){var a=yield*n[t].y0t(i,s,r);h=h||a}t=yield*e.y0t(i,s,r);return h=h||t,this.Qc.o0t(),this.nft--,h}}E0t(){return this.nft}I0t(){return 0<this.E0t()}A0t(){return++this.nft}M0t(){--this.nft}R0t(){return 0<this.hft}uD(){return this.R0t()||this.I0t()}Eq(t){for(var[e,i,s]of this.ift)this.d0t(t,e,i,s);C33.xn(this.ift)}oD(t){t?this.aft++:this.aft--}rF(){return 0<this.aft}w0t(i){for(let t=0,e=i.length;t<e;++t)i[t].b0t().Yu()}G0t(i){for(let t=0,e=i.length;t<e;++t)i[t].b0t().pct()}h8(i){for(let t=0,e=i.length;t<e;++t)i[t].b0t().mct()}a8(i){for(let t=0,e=i.length;t<e;++t)i[t].b0t().c8()}XP(e){var i=new Set,s=this.Sct.Uct(),r=this.Sct.jct();for(let t=0;t<=r;++t){var h=s[t].y3t();if(h)for(var n of h)e&&e.has(n)||i.add(n)}return i}O0t(t){t=new Set([...t]),t=this.XP(t);if(0<t.size){for(var e of t)e.b0t().pct();return[...t]}return null}P0t(){var t=C33.nh(C33.L0t,this);return this.oft.push(t),t}x0t(){return this.oft}D0t(){if(this.oft.length){var s=this.Gft();let i=!1;this.hft++;for(let t=0,e=this.oft.length;t<e;++t){var r=this.oft[t];r.N0t()&&r.F0t(s),r.$0t()&&(i=!0)}i&&(this.B0t(),s.rf(null)),this.hft--}}async k0t(){if(this.oft.length){var s=this.Gft();let i=!1;this.hft++;for(let t=0,e=this.oft.length;t<e;++t){var r=this.oft[t];r.N0t()&&await r.W0t(s),r.$0t()&&(i=!0)}i&&(this.B0t(),s.rf(null)),this.hft--}}B0t(){var t;for(t of C33.Vn(this.oft,t=>t.$0t()))t.ah()}xq(){for(var t of this.oft)t.ah();C33.xn(this.oft)}V0t(t){for(var e of this.oft)e.vct(t);for(var i of t){var s=this.fft.get(i);if(this.fft.delete(i),s)for(var{resolve:r}of s.H0t.values())r(!0)}}U0t(t){this.lft.push(t)}j0t(){C33.xn(this.lft)}X0t(){var t=Promise.all(this.lft);return this.lft=[],t}eL(t){var e,i=t.toLowerCase();this.uft.push(i),this.Qc.LF(C33.yq._q.Tq.Y0t,null),this.uft.pop();for(e of this.Qc.BP().x0t())e.q0t()&&e.z0t()===i&&e.K0t();t=this.cft.get(i);t&&(t.resolve(),this.cft.delete(i))}sL(t){var t=t.toLowerCase(),i=this.cft.get(t);if(i)return i.promise;{let e=null;i=new Promise(t=>e=t);return this.cft.set(t,{promise:i,resolve:e}),i}}J0t(){if(0===this.uft.length)throw new Error("not in a signal");return this.uft.at(-1)}Z0t(t){let e=this.fft.get(t);return e||(e={Q0t:[],H0t:new Map},this.fft.set(t,e)),e}_F(t,e){var i,s=this.Z0t(t),r=e.toLowerCase();s.Q0t.push(r),this.Qc.LF(t.Ux().edt().Tq.tdt,t),s.Q0t.pop();for(i of this.Qc.BP().x0t())i.idt()&&i.z0t()===r&&i.sdt(t);e=s.H0t.get(r);e&&(e.resolve(!1),s.H0t.delete(r)),0===s.Q0t.length&&0===s.H0t.size&&this.fft.delete(t)}yF(t,i){var t=this.Z0t(t),i=i.toLowerCase(),s=t.H0t.get(i);if(s)return s.promise;{let e=null;s=new Promise(t=>e=t);return t.H0t.set(i,{promise:s,resolve:e}),s}}rdt(t){t=this.Z0t(t);if(t&&0!==t.Q0t.length)return t.Q0t.at(-1);throw new Error("not in a signal")}GX(){return{groups:this.hdt(),cnds:this.ndt(),acts:this.adt(),vars:this.odt(),waits:this.ldt()}}OX(t){this.udt(t.groups),this.cdt(t.cnds),this.fdt(t.acts),this.ddt(t.vars),this.Cdt(t.waits)}hdt(){var t,e={};for(t of this.e0t())e[t.dU().toString()]=t.pdt();return e}udt(t){for(var[e,i]of Object.entries(t)){e=parseInt(e,10),e=this.Qft(e);e&&e.mdt(i)}}ndt(){var t,e,i={};for([t,e]of this.U3t){var s=e.GX();s&&(i[t.toString()]=s)}return i}cdt(t){var e,i,s,r,h=new Map;for([e,i]of Object.entries(t))h.set(parseInt(e,10),i);for([s,r]of this.U3t)r.OX(h.get(s)||null)}adt(){var t,e,i={};for([t,e]of this.j3t){var s=e.GX();s&&(i[t.toString()]=s)}return i}fdt(t){var e,i,s,r,h=new Map;for([e,i]of Object.entries(t))h.set(parseInt(e,10),i);for([s,r]of this.j3t)r.OX(h.get(s)||null)}odt(){var t,e,i={};for([t,e]of this.Y3t)e.vdt()||!e.jH()&&!e.kT()||(i[t.toString()]=e.Fit());return i}ddt(t){for(var[e,i]of Object.entries(t)){e=parseInt(e,10),e=this.Vft(e);e&&e.gst(i)}}ldt(){return this.oft.filter(t=>!t.Sdt()).map(t=>t.GX())}Cdt(t){this.xq();for(var e of t){e=C33.L0t.gdt(this,e);e&&this.oft.push(e)}}Tdt(){return[...this.Qc.FL().gz()].map(t=>t.MY()).filter(t=>t).map(t=>t._dt())}ydt(t){for(;t;){var e=t.Fft();if(e instanceof C33.Edt)return e;t=e}return null}dft(t,e){Array.isArray(e)||(e=[]);t=this.kP(t.toLowerCase());if(!t)return null;if(!t.Uu())return t.WP();var i=t.Idt();if(e.length<i.length)for(e=e.slice(0);e.push(i[e.length].bft()),e.length<i.length;);var s=t.HP();return s.YP(s.UP(),!1,t.zP(),t.WP(),...e)}}}{let C33=self.$e;C33.Cft=class EventSheet extends C33.rh{constructor(t,e){super(),this.Wct=t,this.Qc=t.I5(),this.uh=e[0],this.Adt=[],this.Mdt=new Map,this.Rdt=new Map,this.wdt=new Map,this.bdt=!1,this.Gdt=[],this.Odt=[],this.Pdt=new Set;for(var i of e[1])this.Ldt(i,null,this.Adt);this.xdt=this.Qc.Qq()?{type:"sheet",name:this.uh,Ddt:0,children:[]}:null}ah(){this.Wct=null,this.Qc=null}Ldt(t,e,i){switch(t[0]){case 0:case 3:this.Ndt(t,e,i);break;case 1:this.Fdt(t,e,i);break;case 2:this.$dt(t,e,i);break;case 4:this.Bdt(t,e);break;case 5:this.kdt(t,e,i);break;case 6:this.Wdt(t,e);break;default:throw new Error("invalid event type")}}Ndt(t,e,i){var s=C33.Vdt.F_(this,e,t);if(s.Bct()){i.push(s);var r=s.Hdt();for(let t=0,e=r.length;t<e;++t)r[t].Udt()&&this.jdt(s,t)}else s.Udt()?this.jdt(s,0):i.push(s)}Bdt(t,e){e=C33.Edt.Xdt(this,e,t);this.Wct.Eft(e)}Wdt(t,e){e=C33.Edt.Ydt(this,e,t);this.Wct.Eft(e)}Fdt(t,e,i){e=C33.qdt.F_(this,e,t);i.push(e)}$dt(t,e,i){e=C33.zdt.F_(this,e,t);i.push(e)}kdt(t,e,i){e=C33.Kdt.F_(this,e,t);i.push(e)}jdt(s,r){s.Bct()||this.Wct.pft(s);var h=s.Pft(r),n=h.Jdt(),a=h.KN();if(h.Zdt()){let t=this.Rdt.get(a);t||(t=new Map,this.Rdt.set(a,t));var o=h.Qdt().toLowerCase();let e=t.get(n),i=(e||(e=new Map,t.set(n,e)),e.get(o));i||(i=[],e.set(o,i)),i.push([s,r])}else{let t=this.Mdt.get(a);t||(t={t1t:new Map,e1t:new Map},this.Mdt.set(a,t));o=h.V6();let e,i=(o?(e=t.e1t.get(o))||(e=new Map,t.e1t.set(o,e)):e=t.t1t,e.get(n));i||(i=[],e.set(n,i)),i.push([s,r])}}mft(){var i=this.Adt;for(let t=0,e=i.length;t<e;++t){var s=t<e-1&&i[t+1]instanceof C33.Vdt&&i[t+1].i1t();i[t].mft(s)}}s1t(t){this.Gdt.push(t)}QY(){C33.xn(this.Odt),this.r1t(this),this.Pdt.clear()}r1t(t){var e,i=t.Odt,s=t.Pdt;for(e of this.Gdt){var r=e.h1t();e.n1t()&&t!==r&&!s.has(r)&&(s.add(r),r.r1t(t),i.push(r))}}p0t(){return this.Odt}BP(){return this.Wct}I5(){return this.Qc}jc(){return this.uh}a1t(t,e){this.wdt.set(e,t)}o1t(t){return this.wdt.get(t)||null}h0t(){this.bdt=!1}uA(){if(!this.bdt){var t,e=this.Qc,i=e.l1t(),s=i?performance.now():0,r=(this.bdt=!0,this.BP()),h=r.Gft();for(t of this.Adt)t.uA(h),r.w0t(t.qk()),r.j0t(),e.fD();h.rf(null),i&&(this.xdt.Ddt+=performance.now()-s)}}*f0t(){if(!this.bdt){this.bdt=!0;var t,e=this.Qc,i=this.BP(),s=i.Gft();for(t of this.Adt)yield*t.f0t(s),i.w0t(t.qk()),i.j0t(),e.fD();s.rf(null)}}d0t(i,s,r){if(!s)return this.u1t(i,s,null,null);{var h,n=s.KN();let t=!1,e=this.u1t(i,s,n,r);t=t||e;for(h of n.Yft())e=this.u1t(i,s,h,r),t=t||e}}u1t(t,e,i,s){i=this.Mdt.get(i);if(!i)return!1;s=s?i.e1t.get(s):i.t1t;if(!s)return!1;var r,h,i=s.get(t);if(!i)return!1;let n=!1;for([r,h]of i){var a=this.c1t(e,r,h);n=n||a}return n}*m0t(i,s,r){if(!s)return yield*this.f1t(i,s,null,null);{var h,n=s.KN();let t=!1,e=yield*this.f1t(i,s,n,r);t=t||e;for(h of n.Yft())e=yield*this.f1t(i,s,h,r),t=t||e}}*f1t(t,e,i,s){i=this.Mdt.get(i);if(!i)return!1;s=s?i.e1t.get(s):i.t1t;if(!s)return!1;var r,h,i=s.get(t);if(!i)return!1;let n=!1;for([r,h]of i){let t;t=r.d1t()?this.c1t(e,r,h):yield*this.C1t(e,r,h),n=n||t}return n}_0t(t,e,i){e=e.KN(),e=this.Rdt.get(e);if(!e)return!1;e=e.get(t);if(!e)return!1;var s=e.get(i);if(!s)return!1;let r=!1;for(let t=0,e=s.length;t<e;++t){var h=s[t],h=this.c1t(null,h[0],h[1]);r=r||h}return r}*y0t(t,e,i){e=e.KN(),e=this.Rdt.get(e);if(!e)return!1;e=e.get(t);if(!e)return!1;var s=e.get(i);if(!s)return!1;let r=!1;for(let e=0,t=s.length;e<t;++e){var h=s[e],n=h[0],h=h[1];let t;t=n.d1t()?this.c1t(null,n,h):yield*this.C1t(null,n,h),r=r||t}return r}c1t(t,e,i){var s=this.Qc,r=this.Wct,h=r.jP(),n=r.ZP(),a=r.E0t();let o=!1;h&&r.G0t(h.UP()),r.G0t(e.UP());var l=1<a,u=(l&&r.Dft().Kk(),n.Kk(e));t&&(e.Hdt()[i].KN().iD().Pct(t),t.oF())&&t.p1t();let c=!0;if(e.N7()){var f=e.m1t();for(let t=0,e=f.length;t<e;++t)if(!f[t].v1t(u)){c=!1;break}}return c&&(e.Bct()?e.S1t(u,i):e.uA(u),o=u.c3t()),n.c8(),l&&r.Dft().c8(),r.a8(e.UP()),h&&r.a8(h.UP()),h||1!==a||(r.j0t(),r.rF())||s.fD(),o}*C1t(t,e,i){var s=this.Qc,r=this.Wct,h=r.jP(),n=r.ZP(),a=r.E0t();let o=!1;h&&r.G0t(h.UP()),r.G0t(e.UP());var l=1<a,u=(l&&r.Dft().Kk(),n.Kk(e));t&&(e.Hdt()[i].KN().iD().Pct(t),t.oF())&&t.p1t();let c=!0;if(e.N7()){var f=e.m1t();for(let t=0,e=f.length;t<e;++t)if(!(yield*f[t].g1t(u))){c=!1;break}}return c&&(e.Bct()?yield*e.T1t(u,i):yield*e.f0t(u),o=u.c3t()),n.c8(),l&&r.Dft().c8(),r.a8(e.UP()),h&&r.a8(h.UP()),h||1!==a||(r.j0t(),r.rF())||s.fD(),o}_dt(){return this.xdt}}}{let NoActions2=function(t,e){return!0},C33=(NoActions=NoActions2,self.$e),EMPTY_ARRAY=[];function*DebugNoActions(t,e){return!0}C33.Vdt=class EventBlock extends C33.rh{constructor(t,e,i){super(),this.UX=t,this.Qc=t.I5(),this._1t=e,this.y1t=null,this.Sct=this.Qc.BP().ZP(),this.E1t=[],this.I1t=[],this.A1t=!1,this.M1t=!1,this.R1t=!1,this.w1t=!1,this.b1t=!!i[2],this.G1t=!1,this.O1t=null,this.P1t=[],this.Qst=[],this.L1t=[],this.x1t=NoActions2,this.D1t=DebugNoActions,this.N1t=!1,this.F1t=!1,this.$1t="",this.B1t=!1,this.k1t=null,this.xdt=null,this.DV=i[4],this.W1t=i[5],this.UX.a1t(this,this.W1t),this.V1t=this.Qc.Qq()?{H1t:i[3][0],U1t:i[3][1],j1t:!1,X1t:!1,Y1t:!1,q1t:!1}:null,this.BP().Tft(this),3===i[0]&&this.z1t(i[1]);let s=0;for(var r of i[6]){r=C33.K1t.F_(this,r,s++);this.P1t.push(r),this.J1t(r.KN())}s=0;for(var h of i[7]){h=C33.Z1t.F_(this,h,s++);this.Qst.push(h)}var n;if(9===i.length)for(n of i[8])this.UX.Ldt(n,this,this.L1t);this.P1t.length&&(this.G1t=null===this.P1t[0].KN()&&this.P1t[0].Jdt()===C33.yq._q.Tq.Q1t),0===this.P1t.length&&(this.P1t=EMPTY_ARRAY),0===this.Qst.length&&(this.Qst=EMPTY_ARRAY),0===this.L1t.length&&(this.L1t=EMPTY_ARRAY)}static F_(t,e,i){return C33.nh(C33.Vdt,t,e,i)}z1t(t){this.N1t=!0,this.F1t=!!t[0],this.B1t=this.F1t,this.$1t=t[1].toLowerCase(),this.k1t=[],this.BP().Sft(this),this.Qc.Qq()&&(this.xdt={type:"group",name:t[1],Ddt:0,children:[]})}tCt(t){this.k1t.push(t)}eCt(t,e){for(var i of t.BY().Mq())e.includes(i)||e.push(i)}iCt(t,e){if(t)if(e.includes(t)||e.push(t),t.hU())for(var i of t.sCt())i.oF()&&this.eCt(i,e);else t.oF()&&this.eCt(t,e)}J1t(t){this.iCt(t,this.E1t)}rCt(t){this.iCt(t,this.I1t)}hCt(){this.E1t=this.Qc.rU()}mft(t){this.w1t=!!t,this.nCt(),this.aCt();for(var e of this.P1t)e.mft();if(0<this.Qst.length){let t=!1;for(var i of this.Qst)i.mft(),i.oCt()&&(t=!0);t?(this.x1t=this.lCt,this.D1t=this.uCt):(this.x1t=this.cCt,this.D1t=this.fCt)}var s=this.L1t;for(let t=0,e=s.length;t<e;++t){var r=t<e-1&&s[t+1]instanceof C33.Vdt&&s[t+1].i1t();s[t].mft(r)}this.V1t&&this.dCt(),this.xdt&&this.CCt()._dt().children.push(this.xdt)}_dt(){return this.xdt}CCt(){let t=this.N7();for(;t;){if(t.t0t())return t;t=t.N7()}return this.UX}dCt(){var t=this.V1t;t.j1t=this.P1t.every(t=>t.d1t()),t.X1t=this.Qst.every(t=>t.d1t()),t.Y1t=this.L1t.every(t=>t.d1t()),t.q1t=t.j1t&&t.X1t&&t.Y1t}pCt(){let t=this;for(;t.dCt(),t=t.N7(););}nCt(){if(this.t0t()){let t=this.N7();for(this.R1t=!0;t;){if(!t.t0t()){this.R1t=!1;break}t=t.N7()}}}mCt(){var e=this.Qc.rU();if(this.E1t===e)this.I1t=e;else{this.I1t=C33.Xn(this.E1t);let t=this.N7();for(;t;){for(var i of t.E1t)this.rCt(i);t=t.N7()}e=this.BP();this.E1t=e.Rft(this.E1t),this.I1t=e.Rft(this.I1t)}}aCt(){if(this.vCt()){this.O1t=[];let t=this.N7();for(;t;)this.O1t.push(t),t=t.N7();this.O1t.reverse()}}SCt(){this.M1t=!0,this._1t&&this._1t.SCt()}g3t(){return this.M1t}qk(){return this.E1t}UP(){return this.A1t||(this.A1t=!0,this.mCt()),this.I1t}gCt(t){return this.E1t.includes(t)}m1t(){return this.O1t}MY(){return this.UX}BP(){return this.UX.BP()}I5(){return this.Qc}N7(){return this._1t}TCt(t){this.y1t=t}Fft(){return this.y1t||this._1t}_Ct(){return this.W1t}yCt(){return this.V1t&&this.V1t.U1t}ECt(){return this.yCt()&&this.V1t.H1t}ICt(t){this.V1t.H1t=!!t,this.pCt()}t0t(){return this.N1t}ACt(){return this.R1t}i1t(){return this.G1t}MCt(){return this.w1t}gft(){return this.$1t}pdt(){return this.B1t}s0t(){this.mdt(this.F1t)}mdt(t){if(t=!!t,!this.N1t)throw new Error("not a group");if(this.B1t!==t){this.B1t=t;for(var e of this.k1t)e.RCt();this.k1t.length&&(t=this.Qc.e5().MY())&&t.QY()}}dU(){return this.DV}Bct(){return this.b1t}Udt(){return this.P1t.length&&this.P1t[0].Udt()}wCt(){return this.y1t&&this.y1t instanceof C33.Edt}vCt(){return this.wCt()||this.P1t.some(t=>t.Udt())}Hdt(){return this.P1t}T3t(){return this.P1t.length}Pft(t){if((t=Math.floor(t))<0||t>=this.P1t.length)throw new RangeError("invalid condition index");return this.P1t[t]}bCt(t){return this.Pft(t)}GCt(t){let e=t.uP();if(0!==e){--e;for(var i=t.OCt()?t.PCt():t.KN();0<=e;--e){var s=this.P1t[e];if(i===s.KN()||s.OCt()&&s.PCt()===i)return!1}}return!0}LCt(){return this.Qst}xCt(){return this.Qst.length}xft(t){if((t=Math.floor(t))<0||t>=this.Qst.length)throw new RangeError("invalid action index");return this.Qst[t]}DCt(e){e=Math.floor(e);var t=this.Qst.find(t=>t.NCt()===e);if(t)return t;throw new RangeError("invalid action debug index")}FCt(t){return 0<=(t=Math.floor(t))&&t<this.Qst.length}$Ct(){return this.L1t}$ft(){return this.L1t.filter(t=>t instanceof C33.qdt)}v1t(i){i.h3t(this);var s=this.P1t;let r=0===s.length;for(let t=0,e=s.length;t<e;++t){var h=s[t];if(i.a3t(t),h.i$())throw new Error("trigger cannot be used as sub-event to a loop");if(h.uA())r=!0;else if(!this.b1t)return!1}return!this.b1t||r}S1t(t,e){t.h3t(this),t.a3t(e),this.P1t[e].uA()&&(this.x1t(t,0)&&this.BCt(t),t.u3t(!0))}*g1t(i){i.h3t(this);var s=this.P1t;let r=0===s.length;for(let e=0,t=s.length;e<t;++e){var h=s[e];if(i.a3t(e),h.i$())throw new Error("trigger cannot be used as sub-event to a loop");let t;if(t=h.d1t()?h.uA():yield*h.f0t())r=!0;else if(!this.b1t)return!1}return!this.b1t||r}*T1t(e,t){e.h3t(this),e.a3t(t);t=this.P1t[t];let i;if(i=t.d1t()?t.uA():yield*t.f0t()){let t;(t=this.kCt()?this.x1t(e,0):yield*this.D1t(e,0))&&(this.WCt()?this.BCt():yield*this.VCt()),e.u3t(!0)}}uA(t){t.h3t(this),this.G1t||t.f3t(!1),this.b1t?this.HCt(t):this.UCt(t)}*f0t(t){(this.ECt()||this.Qc.jCt())&&(yield this),t.h3t(this),this.G1t||t.f3t(!1),this.b1t?yield*this.XCt(t):yield*this.YCt(t)}HCt(i){var s=this.P1t;let r=0===s.length;for(let t=0,e=s.length;t<e;++t){var h=s[t];h.Udt()||(i.a3t(t),h=h.uA(),r=r||h)}i.u3t(r),r&&(this.x1t(i,0)&&this.BCt(i),this.w1t)&&i.f3t(!0)}*XCt(i){var s=this.P1t;let r=0===s.length;for(let e=0,t=s.length;e<t;++e){var h=s[e];if(!h.Udt()){i.a3t(e);let t;t=h.d1t()?h.uA():yield*h.f0t(),r=r||t}}if(i.u3t(r),r){let t;(t=this.kCt()?this.x1t(i,0):yield*this.D1t(i,0))&&(this.WCt()?this.BCt():yield*this.VCt()),this.w1t&&i.f3t(!0)}}UCt(i){var s=this.P1t;for(let t=0,e=s.length;t<e;++t){var r=s[t],r=(i.a3t(t),r.uA());if(!r)return void i.u3t(!1)}i.u3t(!0),this.x1t(i,0)&&this.BCt(i),i.c3t()&&this.w1t&&i.f3t(!0)}*YCt(i){var s=this.P1t;for(let e=0,t=s.length;e<t;++e){var r=s[e];i.a3t(e);let t;if(!(t=r.d1t()?r.uA():yield*r.f0t()))return void i.u3t(!1)}i.u3t(!0);let t;(t=this.kCt()?this.x1t(i,0):yield*this.D1t(i,0))&&(this.WCt()?this.BCt():yield*this.VCt()),i.c3t()&&this.w1t&&i.f3t(!0)}cCt(i,s){var r=this.Qst;for(let t=s,e=r.length;t<e;++t){var h=r[t];i.l3t(t),h.uA()}return!0}*fCt(i,s){var r=this.Qst;for(let t=s,e=r.length;t<e;++t){var h=r[t];i.l3t(t),h.d1t()?h.uA():yield*h.f0t()}return!0}lCt(i,s){var r=this.BP(),h=this.Qst;for(let t=s,e=h.length;t<e;++t){var n=h[t],a=(i.l3t(t),n.uA());if(n.qCt()&&!0===a)return!1;n.zCt()&&a instanceof Promise&&r.U0t(a)}return!0}*uCt(i,s){var r=this.BP(),h=this.Qst;for(let e=s,t=h.length;e<t;++e){var n=h[e];i.l3t(e);let t;if(t=n.d1t()?n.uA():yield*n.f0t(),n.qCt()&&!0===t)return!1;n.zCt()&&t instanceof Promise&&r.U0t(t)}return!0}KCt(t){this.x1t(t,t.o3t())&&this.BCt()}*JCt(t){(yield*this.D1t(t,t.o3t()))&&(yield*this.VCt())}BCt(){var t,e,i,s;this.L1t.length&&(e=(t=this.t0t()&&this.Qc.l1t())?performance.now():0,s=(i=this.Sct).Kk(this),this.M1t?this.ZCt(s):this.QCt(s),i.c8(),t)&&(this.xdt.Ddt+=performance.now()-e)}ZCt(s){var r=this.N1t,h=this.R1t,n=this.BP(),a=this.L1t;for(let t=0,e=a.length,i=e-1;t<e;++t){var o=a[t],l=o.qk(),u=!h||!r&&t<i;u&&n.h8(l),o.uA(s),u?n.a8(l):n.w0t(l)}}QCt(i){var s=this.L1t;for(let t=0,e=s.length;t<e;++t)s[t].uA(i)}*VCt(){var t,e;this.L1t.length&&(e=(t=this.Sct).Kk(this),this.M1t?yield*this.tpt(e):yield*this.ept(e),t.c8())}*tpt(s){var r=this.N1t,h=this.R1t,n=this.BP(),a=this.L1t;for(let t=0,e=a.length,i=e-1;t<e;++t){var o=a[t],l=o.qk(),u=!h||!r&&t<i;u&&n.h8(l),yield*o.f0t(s),u?n.a8(l):n.w0t(l)}}*ept(i){var s=this.L1t;for(let t=0,e=s.length;t<e;++t)yield*s[t].f0t(i)}n8(i,s){s.r3t();var r=this.P1t;if(!this.Bct())for(let t=i.n3t()+1,e=r.length;t<e;++t){var h=r[t],h=(s.a3t(t),h.uA());if(!h)return!1}return this.x1t(s,0)&&this.BCt(s),!0}*ipt(i,s){s.r3t();var r=this.P1t;if(!this.Bct())for(let e=i.n3t()+1,t=r.length;e<t;++e){var h=r[e];s.a3t(e);let t;if(!(t=h.d1t()?h.uA():yield*h.f0t()))return!1}let t;return(t=this.kCt()?this.x1t(s,0):yield*this.D1t(s,0))&&(this.WCt()?this.BCt():yield*this.VCt()),!0}d1t(){return!this.ECt()&&!this.Qc.jCt()&&this.V1t.q1t}kCt(){return!this.Qc.jCt()&&this.V1t.X1t}WCt(){return!this.Qc.jCt()&&this.V1t.Y1t}spt(i){if(this.N7()){var s=this.m1t();for(let t=0,e=s.length;t<e;++t)if(!s[t].v1t(i))return!1}return!0}*rpt(i){if(this.N7()){var s=this.m1t();for(let t=0,e=s.length;t<e;++t)if(!(yield*s[t].g1t(i)))return!1}return!0}hpt(t,e,i){var s;0<e.length?i?(s=e.map(t=>t.ri(0)),t.Dft().Kk(),this.y1t.npt(s)):this.y1t.apt(e):i&&t.Dft().Kk()}opt(t,e,i,s){let r,h;var n=0<t.length;let a=null;var o=this.Qc,l=this.Sct,o=o.BP(),u=1<o.A0t(),c=(this.hpt(o,e,u),n&&(i?o.h8(t):o.G0t(t)),null!==s&&(s.lpt?(e=i?s.lpt.iD():s.lpt.b0t().Cct(),(c=s.upt.iD()).Lct(e.eD()),c.Fct(),i||s.upt.cpt()):s.fpt&&((e=s.fpt.iD()).Lct(s.dpt),e.Fct()),s.Cpt)&&(a=o.O0t(t)),l.Kk(this));return i&&c._3t(t),this.spt(c)&&(c.h3t(this),(e=this.y1t.zCt())&&([h,r]=this.y1t.ppt()),this.UCt(c),e)&&this.y1t.mpt(h),l.c8(),u&&o.Dft().c8(),null!==a&&o.a8(a),n&&o.a8(t),o.M0t(),r}*vpt(t,e,i,s){let r,h;(this.ECt()||this.Qc.jCt())&&(yield this);var n=0<t.length;let a=null;var o=this.Qc,l=this.Sct,o=o.BP(),u=1<o.A0t(),c=(this.hpt(o,e,u),n&&(i?o.h8(t):o.G0t(t)),null!==s&&(s.lpt?(e=i?s.lpt.iD():s.lpt.b0t().Cct(),(c=s.upt.iD()).Lct(e.eD()),c.Fct(),i||s.upt.cpt()):s.fpt&&((e=s.fpt.iD()).Lct(s.dpt),e.Fct()),s.Cpt)&&(a=o.O0t(t)),l.Kk(this));return i&&c._3t(t),(yield*this.rpt(c))&&(c.h3t(this),(e=this.y1t.zCt())&&([h,r]=this.y1t.ppt()),yield*this.YCt(c),e)&&this.y1t.mpt(h),l.c8(),u&&o.Dft().c8(),null!==a&&o.a8(a),n&&o.a8(t),o.M0t(),r}Spt(t,e){var i=this.UP(),s=0<i.length,r=this.Qc,h=this.Sct,r=r.BP(),n=1<r.A0t(),t=(n&&r.Dft().Kk(),this.y1t.npt(t),s&&(e?r.h8(i):r.G0t(i)),h.Kk(this));this.spt(t)&&(t.h3t(this),this.UCt(t)),h.c8(),n&&r.Dft().c8(),s&&r.a8(i),r.M0t()}*gpt(t,e){(this.ECt()||this.Qc.jCt())&&(yield this);var i=this.UP(),s=0<i.length,r=this.Qc,h=this.Sct,r=r.BP(),n=1<r.A0t(),t=(n&&r.Dft().Kk(),this.y1t.npt(t),s&&(e?r.h8(i):r.G0t(i)),h.Kk(this));(yield*this.rpt(t))&&(t.h3t(this),yield*this.YCt(t)),h.c8(),n&&r.Dft().c8(),s&&r.a8(i),r.M0t()}YP(t,e,i,s,...r){let h,n;var a=0<t.length,o=this.Qc,l=this.Sct,u=o.BP(),c=1<u.A0t(),r=(c&&u.Dft().Kk(),0<r.length&&this.y1t.npt(r),a&&(e?u.h8(t):u.G0t(t)),l.Kk(this));return r.m3t(i,s),l.Xct(r),o.Qk(!1),this.spt(r)&&(r.h3t(this),(e=this.y1t.zCt())&&([n,h]=this.y1t.ppt()),this.UCt(r),e)&&this.y1t.mpt(n),o.Qk(!0),l.c8(),l.Yct(),c&&u.Dft().c8(),a&&u.a8(t),u.M0t(),h||r.v3t()}}}{let C33=self.$e,EMPTY_SOL_MODIFIERS=[],hadUserScriptException=!1;C33.Kdt=class EventScript extends C33.rh{constructor(t,e,i){super();var s=t.I5(),r=t.BP(),r=(this.UX=t,this.Wct=r,this.Qc=t.I5(),this._1t=e,s.Tpt(i[1]));this._pt=r,this.W1t=i[2],this.UX.a1t(this,this.W1t),this.V1t=s.Qq()?{H1t:i[3][0],U1t:i[3][1]}:null}static F_(t,e,i){return C33.nh(C33.Kdt,t,e,i)}mft(){var t=this._pt,e=this.Qc.BP().Bft(this);this._pt=t.bind(null,this.Qc.vx(),e)}N7(){return this._1t}Fft(){return this._1t}MY(){return this.UX}_Ct(){return this.W1t}yCt(){return this.V1t&&this.V1t.U1t}ECt(){return this.yCt()&&this.V1t.H1t}ICt(t){this.V1t.H1t=!!t}i1t(){return!1}qk(){return EMPTY_SOL_MODIFIERS}UP(){return this._1t?this._1t.UP():EMPTY_SOL_MODIFIERS}uA(t){t.h3t(this),this.Wct.U0t(this.ypt())}async ypt(){try{await this._pt()}catch(t){console.error(`Unhandled exception running script %c${this.MY().jc()}, event ${this._Ct()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),hadUserScriptException||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),hadUserScriptException=!0)}}*f0t(t){t.h3t(this),(this.ECt()||this.Qc.jCt())&&(yield this),this.uA(t)}d1t(){return!this.ECt()&&!this.Qc.jCt()}static Ept(){return hadUserScriptException}static Ipt(){hadUserScriptException=!0}}}{let C33=self.$e,assert=self.assert;C33.Edt=class FunctionBlock extends C33.rh{constructor(t,e,i){super(),this.UX=t,this.Qc=t.I5(),this._1t=e,this.Apt=0,this.Mpt="",this.Rpt=0,this.wpt=[],this.bpt=!0,this.Gpt="",this.uct=null,this.Opt=!1,this.Ppt=[],this.Lpt=!1,this.xpt=!1,this.Dpt=0,this.Npt=-1,this.Fpt=new Map,this.$pt=C33.Vdt.F_(t,e,i),this.$pt.TCt(this)}Bpt(t){this.Apt=0,this.Mpt=t[0],this.Rpt=t[1],this.wpt=t[2].map(t=>C33.qdt.F_(this.UX,this,t)),this.bpt=t[3],this.xpt=t[4],this.Lpt=t[5]}kpt(t){this.Apt=1,this.Gpt=t[1],this.uct=this.Qc.DH(t[2]),this.$pt.J1t(this.uct),this.Mpt=this.uct.jc()+"."+this.Gpt,this.Rpt=t[3],this.wpt=t[4].map(t=>C33.qdt.F_(this.UX,this,t)),this.bpt=t[5],this.xpt=t[6],this.Lpt=t[7],this.uct.Wpt(this)}static Xdt(t,e,i){t=C33.nh(C33.Edt,t,e,i),e=i[1];return t.Bpt(e),t}static Ydt(t,e,i){t=C33.nh(C33.Edt,t,e,i),e=i[1];return t.kpt(e),t}vft(){if(this.uct&&this.uct.hU())for(var t of this.uct.sCt())if(t.Vpt(this.Gpt)){this.Opt=!0;break}}mft(){for(var t of this.wpt)t.mft();this.$pt.mft(!1)}Ift(){return this.Apt}$ft(){return this.wpt}Idt(){return this.wpt}VP(){return this.wpt.length}Hpt(t){this.Ppt.push(t)}Upt(){return this.Ppt}apt(i){var s=this.wpt;for(let t=0,e=s.length;t<e;++t)s[t].gst(i[t].ri(0))}npt(i){var s=this.wpt;for(let t=0,e=s.length;t<e;++t)s[t].gst(i[t])}jpt(){return this.wpt.map(t=>t.Fit())}N7(){return this._1t}Fft(){return this._1t}Aft(){return this.Mpt}Xpt(){return this.Gpt}Ypt(){return this.Opt}zP(){return this.Rpt}KN(){return this.uct}Uu(){return this.bpt}WP(){switch(this.Rpt){case 0:return null;case 2:return"";default:return 0}}HP(){return this.$pt}qP(){return this.Lpt}zCt(){return this.xpt}ppt(){var t=this.Dpt++;this.Npt=t;let e;var i=new Promise(t=>e=t);return this.Fpt.set(t,{resolve:e,qpt:0}),[t,i]}mpt(t){var e=this.Fpt.get(t);0===e.qpt&&(e.resolve(),this.Fpt.delete(t)),this.Npt=-1}zpt(){return this.Fpt.get(this.Npt).qpt++,this.Npt}Kpt(t){this.Npt=t,this.Fpt.get(t).qpt--}Jpt(t,e){var i,s=new Map,r=[];for(i of this.uct.iD().eD()){var h,n=i.KN();n.Vpt(this.Gpt)?(h=s.get(n),Array.isArray(h)?h.push(i):s.set(n,[i])):r.push(i)}if(0<r.length&&this.$pt.opt(t,e,this.Lpt,{fpt:this.uct,dpt:r}),0<s.size)for(var[a,o]of s){var l=a.Zpt(this.Gpt).HP(),u=[...new Set([...t,...l.qk()])];l.opt(u,e,this.Lpt,{fpt:a,dpt:o})}}*Qpt(t,e){var i,s=new Map,r=[];for(i of this.uct.iD().eD()){var h,n=i.KN();n.Vpt(this.Gpt)?(h=s.get(n),Array.isArray(h)?h.push(i):s.set(n,[i])):r.push(i)}if(0<r.length&&(yield*this.$pt.vpt(t,e,this.Lpt,{fpt:this.uct,dpt:r})),0<s.size)for(var[a,o]of s){var l=a.Zpt(this.Gpt).HP(),u=[...new Set([...t,...l.qk()])];yield*l.vpt(u,e,this.Lpt,{fpt:a,dpt:o})}}}}{let C33=self.$e,EMPTY_SOL_MODIFIERS=[];C33.qdt=class EventVariable extends C33.rh{constructor(t,e,i){super();var s=t.BP();this.UX=t,this.Wct=s,this.Qc=t.I5(),this._1t=e,this.tft=s.Dft(),this.uh=i[1],this.a3=i[2],this.tmt=i[3],this.fT=!!i[4],this.emt=!!i[5],this.imt=e instanceof C33.Edt,this.DV=i[6],this.smt=this.Qc.kft(i[8]),this.rmt=t=>this.gst(t),this.hmt=()=>this.Fit(),this.nmt=!this._1t||this.fT||this.emt,this.zst=this.tmt,this.amt=-1,this.omt()&&(this.zst=this.zst?1:0),!this.lmt()||this.kT()||this.vdt()||(this.amt=s.wft(this)),s.Mft(this)}static F_(t,e,i){return C33.nh(C33.qdt,t,e,i)}mft(){var t;!this.lmt()||this.kT()||this.vdt()||this.umt()||(t=this.Wct.ydt(this))&&t.Hpt(this)}jc(){return this.uh}kft(){return this.smt}N7(){return this._1t}Fft(){return this.N7()}jH(){return!this.N7()}lmt(){return!this.jH()}umt(){return this.imt}kT(){return this.fT}vdt(){return this.emt}cs(){return 0===this.a3}Is(){return 1===this.a3}omt(){return 2===this.a3}i1t(){return!1}dU(){return this.DV}bft(){return this.tmt}qk(){return EMPTY_SOL_MODIFIERS}uA(t){!this.lmt()||this.kT()||this.vdt()||this.gst(this.bft())}d1t(){return!0}*f0t(t){this.uA(t)}gst(t){this.cs()?"number"!=typeof t&&(t=parseFloat(t)):this.Is()?"string"!=typeof t&&(t=t.toString()):this.omt()&&(t=t?1:0),this.nmt?this.zst=t:this.tft.M3t()[this.amt]=t}Fit(){return this.nmt?this.zst:this.tft.M3t()[this.amt]}cmt(){let t=this.Fit();return t=this.omt()?!!t:t}Jft(){this.zst=this.tmt}Wft(){return{configurable:!1,enumerable:!0,get:this.hmt,set:this.rmt}}}}{let C33=self.$e,assert=self.assert,EMPTY_SOL_MODIFIERS=[];C33.zdt=class EventInclude extends C33.rh{constructor(t,e,i){super();var s=t.BP();this.UX=t,this.Wct=s,this.Qc=t.I5(),this._1t=e,this.fmt=null,this.dmt=i[1],this.if=!0}static F_(t,e,i){return C33.nh(C33.zdt,t,e,i)}mft(){this.fmt=this.Wct.ZY(this.dmt),this.UX.s1t(this);let t=this.N7();for(;t;)t instanceof C33.Vdt&&t.t0t()&&t.tCt(this),t=t.N7();this.RCt(),this.Qc.Qq()&&this.UX._dt().children.push(this.fmt._dt())}N7(){return this._1t}qk(){return EMPTY_SOL_MODIFIERS}h1t(){return this.fmt}uA(t){var e=!!this.N7(),i=this.Qc.rU();e&&this.Wct.G0t(i),this.fmt.uA(),e&&this.Wct.a8(i)}*f0t(t){var e=!!this.N7(),i=this.Qc.rU();e&&this.Wct.G0t(i),yield*this.fmt.f0t(),e&&this.Wct.a8(i)}d1t(){return!1}n1t(){return this.if}RCt(){let t=this.N7();for(;t;){if(t instanceof C33.Vdt&&t.t0t()&&!t.pdt())return void(this.if=!1);t=t.N7()}this.if=!0}}}{let WrapIndex2=function(t,e){return e<=t?t%e:(t<0&&(t<=-e&&(t%=e),t<0)&&(t+=e),t)},C33=(WrapIndex=WrapIndex2,self.$e),assert=self.assert;C33.Cmt=class ExpNode extends C33.rh{constructor(t){super(),this.Mg=t,this.Qc=t.I5()}mft(){}static pmt(t,e){var i=e[0],s=[BehaviorExpressionNode,ObjectExpressionNode,InstVarExpressionNode,EventVarExpNode,SystemExpressionExpNode,CallFunctionExpressionExpNode];return C33.nh(s[i],t,e)}};class SystemExpressionExpNode extends C33.Cmt{constructor(t,e){super(t),this.mmt=this.Qc.vmt(),this._pt=this.Qc.Tpt(e[1]),this._pt!==C33.yq._q.frt.random&&this._pt!==C33.yq._q.frt.Smt||this.Mg.gmt()}Tmt(){return this.mmt._mt(this._pt,this.mmt)}}class CallFunctionExpressionExpNode extends C33.Cmt{constructor(t,e){super(t),this.ymt=null,this.Mpt=e[1],this.Mg.gmt()}mft(){var t=this.Qc.BP(),e=(this.ymt=t.kP(this.Mpt),this.Mpt=null,this.Mg.HP()),i=this.ymt.HP();this.Emt=[...new Set([...e.UP(),...i.UP()])],this.Emt=t.Rft(this.Emt)}Tmt(){var t,e=this.ymt;if(e.Uu())return t=e.HP(),C33.Vdt.prototype.YP.bind(t,this.Emt,e.qP(),e.zP(),e.WP());{let t=e.WP();return()=>t}}}class ObjectExpressionNode extends C33.Cmt{constructor(t,e){super(t),this.uct=this.Qc.DH(e[1]),this._pt=this.Qc.Tpt(e[2]),this.Imt=!!e[3],this.Sct=this.Qc.BP().ZP(),this.Mg.Amt(this.uct)}Tmt(){return this.uct.Ux()._mt(this._pt,this.uct.Wx().O6())}Mmt(...t){var e=this.uct,i=e.iD().Mct(),s=i.length;return 0===s?this.Imt?"":0:(s=WrapIndex2(this.Mg.Rmt(),s),this.Sct.zk().C3t(e),this._pt.apply(i[s].O6(),t))}wmt(t,...e){var i=this.uct,s=i.eD(),r=s.length;return 0===r?this.Imt?"":0:(t=WrapIndex2(t,r),this.Sct.zk().C3t(i),this._pt.apply(s[t].O6(),e))}}class InstVarExpressionNode extends C33.Cmt{constructor(t,e){super(t),this.uct=this.Qc.DH(e[1]),this.bmt=e[3],this.Imt=!!e[2],this.Mg.Amt(this.uct)}Gmt(){var t=this.uct.iD().Mct(),e=t.length;return 0===e?this.Imt?"":0:t[WrapIndex2(this.Mg.Rmt(),e)].Omt(this.bmt)}Pmt(){var t=this.uct,e=t.iD().Mct(),i=e.length;return 0===i?this.Imt?"":0:(i=(e=e[WrapIndex2(this.Mg.Rmt(),i)]).KN().Lmt(t.xmt()),e.Omt(this.bmt+i))}Dmt(t){var e=this.uct,i=e.eD(),s=i.length;if(0===s)return this.Imt?"":0;i=i[WrapIndex2(t,s)];let r=0;return e.hU()&&(r=i.KN().Lmt(e.xmt())),i.Omt(this.bmt+r)}}class BehaviorExpressionNode extends C33.Cmt{constructor(t,e){super(t),this.uct=this.Qc.DH(e[1]),this.Nmt=this.uct.Hst(e[2]),this.Fmt=this.uct.yet(e[2]),this._pt=this.Qc.Tpt(e[3]),this.Imt=!!e[4],this.Sct=this.Qc.BP().ZP(),this.Mg.Amt(this.uct)}$mt(...t){var e=this.uct,i=e.iD().Mct(),s=i.length;if(0===s)return this.Imt?"":0;s=WrapIndex2(this.Mg.Rmt(),s),this.Sct.zk().C3t(e),i=i[s];let r=0;return e.hU()&&(r=i.KN().Bmt(e.xmt())),this._pt.apply(i.Vst()[this.Fmt+r].O6(),t)}kmt(t,...e){var i=this.uct,s=i.eD(),r=s.length;if(0===r)return this.Imt?"":0;t=WrapIndex2(t,r),this.Sct.zk().C3t(i),r=s[t];let h=0;return i.hU()&&(h=r.KN().Bmt(i.xmt())),this._pt.apply(r.Vst()[this.Fmt+h].O6(),e)}}class EventVarExpNode extends C33.Cmt{constructor(t,e){super(t),this.Wmt=null,this.Vmt=e[1]}mft(){this.Wmt=this.Qc.BP().Vft(this.Vmt)}Hmt(){return this.Wmt}}}{let GetExpressionFunc2=function(t){t=self.Umt[t];if(t)return t;throw new Error("invalid expression number")},C33=(GetExpressionFunc=GetExpressionFunc2,self.$e),assert=self.assert;C33.jmt=class Parameter extends C33.rh{constructor(t,e,i){super(),this.Mg=t,this.$p=i,this.a3=e,this.ri=null,this.Xmt=!1,this.emt=!1}static F_(t,e,i){var s=e[0],r=[ExpressionParameter,StringExpressionParameter,FileParameter,ComboParameter,ObjectParameter,LayerExpressionParameter,LayoutParameter,ExpressionParameter,ComboParameter,ComboParameter,InstVarParameter,EventVarParameter,FileParameter,VariadicParameter,StringExpressionParameter,TimelineParameter,BooleanParameter,FunctionParameter,EaseParameter,TilemapBrushParameter,TemplateExpressionParameter,FlowchartParameter];return C33.nh(r[s],t,s,i,e)}mft(){}gmt(){this.Xmt=!0}Amt(t){this.Xmt||!t||t.Ux().gx()||(this.Xmt=!0)}Ymt(){return this.Xmt}uP(){return this.$p}I5(){return this.Mg.I5()}HP(){return this.Mg.HP()}vdt(){return this.emt}qmt(){return 4===this.a3}};class ExpressionParameter extends C33.jmt{constructor(t,e,i,s){super(t,e,i),this.zmt=0;var r=s[1];this.Kmt=r[0],this.Jmt=[],this.Zmt=null;for(let t=1,e=r.length;t<e;++t)this.Jmt.push(C33.Cmt.pmt(this,r[t]));this.Jmt.length?this.ri=this.Qmt:(this.ri=GetExpressionFunc2(this.Kmt),this.emt=!0)}t2t(t){if(t<0||t>=this.Jmt.length)throw new RangeError("invalid numbered node");return this.Jmt[t]}mft(){for(var t of this.Jmt)t.mft();var e=GetExpressionFunc2(this.Kmt);this.Jmt.length?this.Zmt=e(this):this.Zmt=e}Rmt(){return this.zmt}Qmt(t){return this.zmt=t,this.Zmt()}}class StringExpressionParameter extends ExpressionParameter{constructor(t,e,i,s){super(t,e,i,s),this.ri=this.e2t,14===e&&(this.HP().hCt(),this.Mg instanceof C33.Z1t)&&this.HP().SCt()}e2t(t){this.zmt=t;t=this.Zmt();return"string"==typeof t?t:""}i2t(){return GetExpressionFunc2(this.Kmt)()}}class LayerExpressionParameter extends ExpressionParameter{constructor(t,e,i,s){super(t,e,i,s),2<=t.s2t()?this.ri=this.bD:this.ri=this.r5,this.emt=!1}r5(t){this.zmt=t;t=this.Zmt();return this.I5().e5().r5(t)}bD(t){var e=this.r5();return e?e.bD():null}}class ComboParameter extends C33.jmt{constructor(t,e,i,s){super(t,e,i),this.r2t=s[1],this.ri=this.h2t,this.emt=!0}h2t(){return this.r2t}}class BooleanParameter extends C33.jmt{constructor(t,e,i,s){super(t,e,i),this.n2t=s[1],this.ri=this.a2t,this.emt=!0}a2t(){return this.n2t}}class ObjectParameter extends C33.jmt{constructor(t,e,i,s){super(t,e,i),this.uct=this.I5().DH(s[1]),2<=t.s2t()?this.ri=this.$x:this.ri=this.KN;e=this.HP();e.J1t(this.uct),this.Mg instanceof C33.Z1t?e.SCt():e.N7()&&e.N7().SCt(),this.emt=!0}KN(){return this.uct}$x(){return this.uct?this.uct.$x():null}}class LayoutParameter extends C33.jmt{constructor(t,e,i,s){super(t,e,i),this.OV=this.I5().FL().Cz(s[1]),2<=t.s2t()?this.ri=this.DL:this.ri=this.$L,this.emt=!0}$L(){return this.OV}DL(){return this.OV?this.OV.DL():null}}class TimelineParameter extends C33.jmt{constructor(t,e,i,s){super(t,e,i),this.SJ=this.I5().TQ().AK(s[1]),2<=t.s2t()?this.ri=this.Ntt:this.ri=this.het,this.emt=!0}het(){return this.SJ}Ntt(){return this.SJ?this.SJ.Ntt():null}}class FileParameter extends C33.jmt{constructor(t,e,i,s){super(t,e,i),this.o2t=s[1],this.ri=this.l2t,this.emt=!0}l2t(){return this.o2t}}class InstVarParameter extends C33.jmt{constructor(t,e,i,s){super(t,e,i),this.u2t=s[1];t=this.Mg.KN();!(this.Mg instanceof C33.K1t&&this.Mg.kT())&&t&&t.hU()?(this.ri=this.c2t,this.gmt()):(this.ri=this.f2t,this.emt=!0)}f2t(){return this.u2t}c2t(t){t=t||0;var e=this.Mg.KN(),i=e.iD(),s=i.eD();let r=null;if(s.length)r=s[t%s.length].KN();else if(i.Ict()){s=i.Act();r=s[t%s.length].KN()}else{if(!(0<e.rD()))return 0;i=e.eD();r=i[t%i.length].KN()}return this.u2t+r.Lmt(e.xmt())}}class EventVarParameter extends C33.jmt{constructor(t,e,i,s){super(t,e,i),this.Vmt=s[1],this.Wmt=null,2<=t.s2t()?this.ri=this.d2t:this.ri=this.C2t,this.emt=!0}mft(){this.Wmt=this.I5().BP().Vft(this.Vmt)}C2t(){return this.Wmt}d2t(){return null}}class FunctionParameter extends C33.jmt{constructor(t,e,i,s){super(t,e,i),this.p2t=s[1],this.ymt=null,2<=t.s2t()?this.ri=this.m2t:this.ri=this.v2t,this.emt=!0}mft(){this.ymt=this.I5().BP().kP(this.p2t),this.p2t=null}v2t(){return this.ymt}m2t(){return null}}class VariadicParameter extends C33.jmt{constructor(t,e,i,s){super(t,e,i),this.S2t=[],this.g2t=[],this.emt=!0;for(let t=1,e=s.length;t<e;++t){var r=C33.jmt.F_(this.Mg,s[t],0);this.S2t.push(r),this.g2t.push(0),r.vdt()||(this.emt=!1)}this.ri=this.T2t}mft(){for(var t of this.S2t)t.mft()}T2t(){var i=this.S2t,s=this.g2t;for(let t=0,e=i.length;t<e;++t)s[t]=i[t].ri(0);return s}}class EaseParameter extends C33.jmt{constructor(t,e,i,s){super(t,e,i),this._2t=s[1],this.ri=this.Sst,this.emt=!0}Sst(){return this._2t}}class TilemapBrushParameter extends C33.jmt{constructor(t,e,i,s){super(t,e,i),this.y2t=s[1],this.ri=this.E2t,this.emt=!0}E2t(){return this.y2t}}class TemplateExpressionParameter extends ExpressionParameter{constructor(t,e,i,s){super(t,e,i,s),this.ri=this.fF,this.emt=!1}fF(){return this.Zmt()}}class FlowchartParameter extends C33.jmt{constructor(t,e,i,s){super(t,e,i),this.Qot=this.I5().Slt().Yot(s[1]),this.ri=this.I2t,this.emt=!0}I2t(){return this.Qot.jc()}}}{let EvalParams2=function(i,s){for(let t=0,e=i.length;t<e;++t)s[t]=i[t].ri(0)},C33=(EvalParams=EvalParams2,self.$e),assert=self.assert,EMPTY_PARAMS_ARRAY=[],noop=function(){};C33.K1t=class Condition extends C33.rh{constructor(t,e,i){var s;if(super(),this.$pt=t,this.Qc=t.I5(),this.$p=i,this._pt=this.Qc.Tpt(e[1]),this.A2t=0<e[3],this.M2t=2===e[3],this.R2t=!!e[4],this.w2t=!!e[5],this.fT=!!e[6],this.DV=e[7],this.b2t=this.$pt.Bct(),this.uct=null,this.Nmt=null,this.Fmt=-1,this.mmt=null,this.uA=noop,this.f0t=noop,this.Ze=[],this.G2t=[],this.O2t=!1,this.P2t=null,this.L2t=null,this.V1t=this.Qc.Qq()?{H1t:e[8][0],x2t:e[8][1]}:null,-1===e[0]?this.mmt=this.Qc.vmt():(this.uct=this.Qc.DH(e[0]),e[2]&&(this.Nmt=this.uct.Hst(e[2]),this.Fmt=this.uct.yet(e[2])),this.$pt.N7()&&this.$pt.N7().SCt()),10===e.length)for(s of e[9])this.Ze.push(C33.jmt.F_(this,s,this.Ze.length)),this.G2t.push(0);0===this.Ze.length&&(this.Ze=EMPTY_PARAMS_ARRAY,this.G2t=EMPTY_PARAMS_ARRAY),this.$pt.BP()._ft(this)}static F_(t,e,i){return C33.nh(C33.K1t,t,e,i)}mft(){for(var t of this.Ze)t.mft(),t.Ymt()&&(this.O2t=!0);this.M2t?(this.uA=this.D2t,this.f0t=this.N2t):this.mmt?(this.F2t(),this.f0t=this.$2t):this.uct.Ux().gx()?(this.B2t(),this.f0t=this.k2t):this.fT?(this.uA=this.W2t,this.f0t=this.V2t):(this.uA=this.H2t,this.f0t=this.U2t)}F2t(){var t=this.mmt,e=this.mmt;this.j2t(t,e,this.X2t)}B2t(){var t=this.uct.Ux(),e=this.uct.Wx().O6();this.j2t(t,e,this.Y2t)}j2t(r,h,t){var n=this._pt;let a=this.w2t;var o=this.Ze;if(0===o.length){let t=r._mt(n,h);a?this.uA=function(){return C33.xor(t(),a)}:this.uA=t}else if(1===o.length){let e=o[0];if(!a&&e.vdt())this.uA=r.q2t(n,h,e.ri(0));else{let t=r._mt(n,h);this.uA=function(){return C33.xor(t(e.ri(0)),a)}}}else if(2===o.length){let e=o[0],i=o[1];if(!a&&e.vdt()&&i.vdt())this.uA=r.z2t(n,h,e.ri(0),i.ri(0));else{let t=r._mt(n,h);this.uA=function(){return C33.xor(t(e.ri(0),i.ri(0)),a)}}}else if(3===o.length){let e=o[0],i=o[1],s=o[2];if(!a&&e.vdt()&&i.vdt()&&s.vdt())this.uA=r.K2t(n,h,e.ri(0),i.ri(0),s.ri(0));else{let t=r._mt(n,h);this.uA=function(){return C33.xor(t(e.ri(0),i.ri(0),s.ri(0)),a)}}}else this.uA=t}dU(){return this.DV}Jdt(){return this._pt}KN(){return this.uct}V6(){return this.Nmt}J2t(){return this.Nmt?this.Nmt.B6():this.uct?this.uct.Ux():null}s2t(){var t=this.J2t();return t?t.Z2t():1}HP(){return this.$pt}I5(){return this.Qc}uP(){return this.$p}NCt(){return this.uP()}Udt(){return this.A2t}Zdt(){return this.M2t}Q2t(){return this.w2t}i$(){return this.R2t}kT(){return this.fT}tvt(){return this.V1t.H1t}evt(){return!!this.mmt}OCt(){return this.evt()||this.uct.Ux().gx()}PCt(){for(var t of this.Ze)if(t.qmt())return t.KN();return null}ivt(t){this.V1t.H1t=!!t,this.$pt.pCt()}svt(){return this.V1t.x2t}d1t(){return!this.tvt()&&!this.Qc.jCt()&&!this.svt()}rvt(){return this.P2t||(this.P2t=new Map),this.P2t}hvt(){return this.L2t||(this.L2t=new Map),this.L2t}X2t(){var t=this.G2t;return EvalParams2(this.Ze,t),C33.xor(this._pt.apply(this.mmt,t),this.w2t)}*$2t(){if((this.tvt()||this.Qc.jCt())&&(yield this),this.svt()){var e=this.G2t;EvalParams2(this.Ze,e);let t=this._pt.apply(this.mmt,e);return C33.Da(t)&&(t=yield*t),C33.xor(t,this.w2t)}return this.uA()}Y2t(){var t=this.G2t,e=(EvalParams2(this.Ze,t),this.uct.Wx().O6());return C33.xor(this._pt.apply(e,t),this.w2t)}*k2t(){if((this.tvt()||this.Qc.jCt())&&(yield this),this.svt()){var e=this.G2t,i=(EvalParams2(this.Ze,e),this.uct.Wx().O6());let t=this._pt.apply(i,e);return C33.Da(t)&&(t=yield*t),C33.xor(t,this.w2t)}return this.uA()}D2t(){return!0}*N2t(){return(this.tvt()||this.Qc.jCt())&&(yield this),!0}nvt(){if(this.Nmt){if(2<=this.Nmt.B6().Z2t())throw new Error("not yet implemented");return this.Nmt}return 2<=this.uct.Ux().Z2t()?this.uct.$x():this.uct}W2t(){var t=this.G2t,t=(EvalParams2(this.Ze,t),this._pt.apply(this.nvt(),t));return this.uct.cpt(),t}*V2t(){if((this.tvt()||this.Qc.jCt())&&(yield this),this.svt()){var e=this.G2t;EvalParams2(this.Ze,e);let t=this._pt.apply(this.nvt(),e);return C33.Da(t)&&(t=yield*t),this.uct.cpt(),t}return this.uA()}H2t(){var i=this.Ze,s=this.G2t,t=this.uct.iD();for(let t=0,e=i.length;t<e;++t){var r=i[t];r.Ymt()||(s[t]=r.ri(0))}return t.yct()?this.avt(t):this.ovt(t)}*U2t(){return(this.tvt()||this.Qc.jCt())&&(yield this),this.H2t()}lvt(i){var s=this.Ze,r=this.G2t;for(let t=0,e=s.length;t<e;++t){var h=s[t];h.Ymt()&&(r[t]=h.ri(i))}}avt(i){var t=this.uct,s=t.hU(),r=t.xmt(),h=this.Fmt,n=0<=h,a=t.eD(),o=this.O2t,l=this.G2t,u=this._pt,c=this.w2t,f=this.b2t&&!this.A2t;i._ct();for(let e=0,t=a.length;e<t;++e){var d,C=a[e];o&&this.lvt(e);let t;t=n?(d=s?C.KN().Bmt(r):0,u.apply(C.Vst()[h+d].O6(),l)):u.apply(C.O6(),l),C33.xor(t,c)?i.Rct(C):f&&i.wct(C)}return t.uvt(!0),i.bct(!1),t.cpt(),i.Ect()}ovt(t){var e=this.uct,i=e.hU(),s=e.xmt(),r=e.oF(),h=this.Fmt,n=0<=h,a=this.O2t,o=this.G2t,l=this._pt,u=this.w2t,c=this.b2t&&!this.A2t,f=t.Gct(),d=t.Oct(),C=c&&!this.$pt.GCt(this),p=C?d:f;let m=0,v=!1;for(let e=0,t=p.length;e<t;++e){var S,g=p[e];a&&this.lvt(e);let t;t=n?(S=i?g.KN().Bmt(s):0,l.apply(g.Vst()[h+S].O6(),o)):l.apply(g.O6(),o),C33.xor(t,u)?(v=!0,C?(f.push(g),r&&g.cvt()):(p[m]=g,r&&g.fvt(m),++m)):C?(p[m]=g,r&&g.dvt(m),++m):c&&(d.push(g),r)&&g.Cvt()}C33.Ln(p,m),r&&e.pvt(C,m);var T=v;return C&&!v&&(v=this.mvt(f)),e.uvt(T||c),c?v:t.Ect()}mvt(i){var t=this.uct,s=t.hU(),r=t.xmt(),h=this.O2t,n=this.Fmt,a=0<=n,o=this.G2t,l=this._pt,u=this.w2t;for(let e=0,t=i.length;e<t;++e){var c,f=i[e];h&&this.lvt(e);let t;if(t=a?(c=s?f.KN().Bmt(r):0,l.apply(f.Vst()[n+c].O6(),o)):l.apply(f.O6(),o),C33.xor(t,u))return!0}return!1}vvt(t,e){return this.Ze[t].ri(e)}Qdt(){var t=this.Ze;if(t.length)return t[0].i2t();throw new Error("no parameters")}GX(){if(!this.P2t||!this.P2t.size)return null;var e,i,s={};for([e,i]of this.P2t.entries()){let t=i;"collmemory"===e&&(t=[...i.entries()].map(t=>[t[0].uF(),t[1].uF(),t[2]])),s[e]=t}return{ex:s}}OX(t){if(this.P2t&&(this.P2t.clear(),this.P2t=null),t){let e=this.Qc;t=t.ex;if(t){var i,s,r=this.rvt();r.clear();for([i,s]of Object.entries(t)){let t=s;"collmemory"===i&&(t=C33.nh(C33.ju,s.map(t=>[e.ZL(t[0]),e.ZL(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),r.set(i,t)}}}}}}{let EvalParams2=function(i,s){for(let t=0,e=i.length;t<e;++t)s[t]=i[t].ri(0)},C33=(EvalParams=EvalParams2,self.$e),assert=self.assert,EMPTY_PARAMS_ARRAY=[],noop=function(){},noopGenerator=function*(){},FLAG_CANPICKANYOBJECTCLASS=1,FLAG_COPYPICKED=2,FLAG_CUSTOM_ACE=4,FLAG_IS_ASYNC=8,FLAG_CAN_BAIL_OUT=16;C33.Z1t=class Action extends C33.rh{constructor(t,e,i){super();var s,t=(this.$pt=t).I5(),i=(this.Qc=t,this.$p=i,this.DV=4<=e.length?e[3]:-1,this.Svt=5<=e.length?255&e[4]:0,this.gvt=5<=e.length?e[4]>>8:0,this._pt=null,this.uct=null,this.Nmt=null,this.Fmt=-1,this.mmt=null,this.Tvt="",this._vt=null,this.yvt=null,this.uA=noop,this.f0t=noop,this.Ze=[],this.G2t=[],this.O2t=!1,this.P2t=null,this.L2t=null,-3===e[0]),r=i?e[2]:e[5];if(this.V1t=t.Qq()||i?{H1t:r[0],x2t:r[1],index:r[2]}:null,-1===e[0]?(this.mmt=t.vmt(),this._pt=t.Tpt(e[1])):-2===e[0]?this.Tvt=e[1]:i?(r=t.Tpt(e[1]),this._pt=r,this.uA=this.Evt,this.f0t=this.Ivt,this.gvt|=FLAG_IS_ASYNC):(this.uct=t.DH(e[0]),this.gvt&FLAG_CUSTOM_ACE?(this.Tvt=e[1],this._vt=t.DH(e[2])):(e[2]&&(this.Nmt=this.uct.Hst(e[2]),this.Fmt=this.uct.yet(e[2])),this._pt=t.Tpt(e[1]))),7===e.length)for(s of e[6])this.Ze.push(C33.jmt.F_(this,s,this.Ze.length)),this.G2t.push(0);0===this.Ze.length&&(this.Ze=EMPTY_PARAMS_ARRAY,this.G2t=EMPTY_PARAMS_ARRAY),this.Avt()&&(this.$pt.hCt(),this.$pt.SCt()),this.$pt.BP().yft(this)}static F_(t,e,i){return C33.nh(C33.Z1t,t,e,i)}mft(){for(var t of this.Ze)t.mft(),t.Ymt()&&(this.O2t=!0);var e,i;this.mmt?(this.F2t(),this.f0t=this.$2t):this.Tvt?(this.gvt&FLAG_CUSTOM_ACE?this.Mvt():this.Rvt(),this.Tvt="",this._vt=null):this.uA===this.Evt?(e=this._pt,i=this.Qc.BP().Bft(this.$pt),this._pt=e.bind(null,this.Qc.vx(),i)):this.Nmt?this.zCt()?(this.uA=this.wvt,this.f0t=this.bvt):(this.uA=this.Gvt,this.f0t=this.Ovt):this.uct.Ux().gx()?(this.B2t(),this.f0t=this.k2t):this.kT()?(this.uA=this.Pvt,this.f0t=this.Lvt):this.zCt()?(this.uA=this.xvt,this.f0t=this.Dvt):this.Nvt()?(this.uA=this.Fvt,this.f0t=this.$vt):this.Ze.length?this.Ze.every(t=>t.Ymt())?(this.uA=this.Bvt,this.f0t=this.kvt):this.O2t?(this.uA=this.Wvt,this.f0t=this.Vvt):this.Ze.every(t=>t.vdt())?(EvalParams2(this.Ze,this.G2t),this.uA=this.Hvt,this.f0t=this.Uvt):(this.uA=this.jvt,this.f0t=this.Xvt):(this.uA=this.Hvt,this.f0t=this.Uvt)}F2t(){var t=this.mmt,e=this.mmt;this.j2t(t,e,this.X2t)}B2t(){var t=this.uct.Ux(),e=this.uct.Wx().O6();this.j2t(t,e,this.Y2t)}Rvt(){var t=this.$pt.BP(),r=t.kP(this.Tvt);if(r.Uu()){let e=0!=(this.gvt&FLAG_COPYPICKED),i=(this.yvt=r.HP(),[...new Set([...this.$pt.UP(),...this.yvt.UP()])]),s=(i=t.Rft(i),!r.qP()&&this.Yvt()?{Cpt:!0}:null);if(this.uA=C33.Vdt.prototype.opt.bind(this.yvt,i,this.Ze,e,s),this.Qc.Qq()){let t=this;this.f0t=function*(){return(t.tvt()||t.Qc.jCt())&&(yield t),yield*t.yvt.vpt(i,t.Ze,e,s)}}else this.f0t=noopGenerator}else this.uA=noop,this.f0t=noopGenerator}Mvt(){var r=this.$pt.BP();let h=r.Xft(this._vt,this.Tvt);if(h.Uu()){let e=0!=(this.gvt&FLAG_COPYPICKED),i=(this.yvt=h.HP(),[...new Set([...this.$pt.UP(),...this.yvt.UP(),this.uct,h.KN()])]);i=r.Rft(i);var r=!this.uct.hU()&&!h.KN().hU(),n=!this.uct.hU()&&h.KN().hU(),a=this.uct.hU();let s=null;if(!h.qP()&&this.Yvt()&&((s=s||{}).Cpt=!0),!n&&e||((s=s||{}).lpt=this.uct,s.upt=h.KN()),r||n||a&&!h.Ypt()?this.uA=C33.Vdt.prototype.opt.bind(this.yvt,i,this.Ze,e,s):a&&(this.uA=C33.Edt.prototype.Jpt.bind(h,i,this.Ze)),this.Qc.Qq()){let t=this;r||n||a&&!h.Ypt()?this.f0t=function*(){return(t.tvt()||t.Qc.jCt())&&(yield t),yield*t.yvt.vpt(i,t.Ze,e,s)}:a&&(this.f0t=function*(){return(t.tvt()||t.Qc.jCt())&&(yield t),yield*h.Qpt(i,t.Ze)})}else this.f0t=noopGenerator}else this.uA=noop,this.f0t=noopGenerator}j2t(r,h,t){var n=this._pt,a=this.Ze;if(0===a.length)this.uA=r._mt(n,h);else if(1===a.length){let e=a[0];if(e.vdt())this.uA=r.q2t(n,h,e.ri(0));else{let t=r._mt(n,h);this.uA=function(){return t(e.ri(0))}}}else if(2===a.length){let e=a[0],i=a[1];if(e.vdt()&&i.vdt())this.uA=r.z2t(n,h,e.ri(0),i.ri(0));else{let t=r._mt(n,h);this.uA=function(){return t(e.ri(0),i.ri(0))}}}else if(3===a.length){let e=a[0],i=a[1],s=a[2];if(e.vdt()&&i.vdt()&&s.vdt())this.uA=r.K2t(n,h,e.ri(0),i.ri(0),s.ri(0));else{let t=r._mt(n,h);this.uA=function(){return t(e.ri(0),i.ri(0),s.ri(0))}}}else this.uA=t}dU(){return this.DV}zCt(){return 0!=(this.gvt&FLAG_IS_ASYNC)}qCt(){return 0!=(this.gvt&FLAG_CAN_BAIL_OUT)}Nvt(){return 1===this.Svt}kT(){return 2===this.Svt}Avt(){return 0!=(this.gvt&FLAG_CANPICKANYOBJECTCLASS)}oCt(){return this.zCt()||this.qCt()}KN(){return this.uct}J2t(){return this.Nmt?this.Nmt.B6():this.uct?this.uct.Ux():null}s2t(){var t=this.J2t();return t?t.Z2t():1}HP(){return this.$pt}Yvt(){let t=this.$pt;do{if(t instanceof C33.Edt&&t.qP())return!0}while(t=t.Fft());return!1}I5(){return this.Qc}uP(){return this.$p}NCt(){return this.V1t.index}tvt(){return this.V1t.H1t}ivt(t){this.V1t.H1t=!!t,this.$pt.pCt()}svt(){return this.V1t.x2t}d1t(){return!this.tvt()&&!this.Qc.jCt()&&!this.svt()}rvt(){return this.P2t||(this.P2t=new Map),this.P2t}hvt(){return this.L2t||(this.L2t=new Map),this.L2t}X2t(){var t=this.G2t;return EvalParams2(this.Ze,t),this._pt.apply(this.mmt,t)}*$2t(){var t;return(this.tvt()||this.Qc.jCt())&&(yield this),this.svt()?(t=this.G2t,EvalParams2(this.Ze,t),yield*this._pt.apply(this.mmt,t)):this.uA()}Y2t(){var t=this.G2t;return EvalParams2(this.Ze,t),this._pt.apply(this.uct.Wx().O6(),t)}*k2t(){var t;return(this.tvt()||this.Qc.jCt())&&(yield this),this.svt()?(t=this.G2t,EvalParams2(this.Ze,t),yield*this._pt.apply(this.uct.Wx().O6(),t)):this.uA()}Hvt(){var i=this.G2t,s=this.uct.iD().eD();for(let t=0,e=s.length;t<e;++t)this._pt.apply(s[t].O6(),i)}*Uvt(){if((this.tvt()||this.Qc.jCt())&&(yield this),this.svt()){var i=this.G2t,s=this.uct.iD().eD();for(let t=0,e=s.length;t<e;++t)yield*this._pt.apply(s[t].O6(),i)}else this.Hvt()}jvt(){var i=this.G2t,s=(EvalParams2(this.Ze,i),this.uct.iD().eD());for(let t=0,e=s.length;t<e;++t)this._pt.apply(s[t].O6(),i)}*Xvt(){if((this.tvt()||this.Qc.jCt())&&(yield this),this.svt()){var i=this.G2t,s=(EvalParams2(this.Ze,i),this.uct.iD().eD());for(let t=0,e=s.length;t<e;++t)yield*this._pt.apply(s[t].O6(),i)}else this.jvt()}Bvt(){var s=this.Ze,r=this.G2t,e=this._pt,h=this.uct.iD().eD();for(let i=0,t=h.length;i<t;++i){var n=h[i];for(let t=0,e=s.length;t<e;++t)r[t]=s[t].ri(i);e.apply(n.O6(),r)}}*kvt(){if((this.tvt()||this.Qc.jCt())&&(yield this),this.svt()){var s=this.Ze,r=this.G2t,e=this._pt,h=this.uct.iD().eD();for(let i=0,t=h.length;i<t;++i){var n=h[i];for(let t=0,e=s.length;t<e;++t)r[t]=s[t].ri(i);yield*e.apply(n.O6(),r)}}else this.Bvt()}Wvt(){var s=this.Ze,r=this.G2t,e=this._pt,h=this.uct.iD().eD();for(let t=0,e=s.length;t<e;++t){var i=s[t];i.Ymt()||(r[t]=i.ri(0))}for(let i=0,t=h.length;i<t;++i){var n=h[i];for(let t=0,e=s.length;t<e;++t){var a=s[t];a.Ymt()&&(r[t]=a.ri(i))}e.apply(n.O6(),r)}}*Vvt(){if((this.tvt()||this.Qc.jCt())&&(yield this),this.svt()){var s=this.Ze,r=this.G2t,e=this._pt,h=this.uct.iD().eD();for(let t=0,e=s.length;t<e;++t){var i=s[t];i.Ymt()||(r[t]=i.ri(0))}for(let i=0,t=h.length;i<t;++i){var n=h[i];for(let t=0,e=s.length;t<e;++t){var a=s[t];a.Ymt()&&(r[t]=a.ri(i))}yield*e.apply(n.O6(),r)}}else this.Wvt()}Fvt(){var s=this.Ze,r=this.G2t,e=this._pt,t=this.uct,i=t.qvt(),h=t.iD().eD();i.zvt(e);for(let i=0,t=h.length;i<t;++i){var n=h[i];for(let t=0,e=s.length;t<e;++t)r[t]=s[t].ri(i);e.apply(n.O6(),r)}i.Kvt(e)}*$vt(){if((this.tvt()||this.Qc.jCt())&&(yield this),this.svt()){var s=this.Ze,r=this.G2t,e=this._pt,t=this.uct,i=t.qvt(),h=t.iD().eD();i.zvt(e);for(let i=0,t=h.length;i<t;++i){var n=h[i];for(let t=0,e=s.length;t<e;++t)r[t]=s[t].ri(i);yield*e.apply(n.O6(),r)}i.Kvt(e)}else this.Fvt()}Pvt(){var t=this.G2t;return EvalParams2(this.Ze,t),this._pt.apply(this.Nmt||this.uct,t)}*Lvt(){if((this.tvt()||this.Qc.jCt())&&(yield this),this.svt()){var e=this.G2t;EvalParams2(this.Ze,e);let t=this._pt.apply(this.Nmt||this.uct,e);return t=C33.Da(t)?yield*t:t}return this.Pvt()}Gvt(){var t=this.uct,e=t.hU(),s=t.xmt(),r=this.Ze,h=this.O2t,n=this.G2t,a=this._pt,o=this.Fmt,l=t.iD().eD();for(let t=0,e=r.length;t<e;++t){var i=r[t];i.Ymt()||(n[t]=i.ri(0))}for(let i=0,t=l.length;i<t;++i){var u=l[i];if(h)for(let t=0,e=r.length;t<e;++t){var c=r[t];c.Ymt()&&(n[t]=c.ri(i))}var f=e?u.KN().Bmt(s):0;a.apply(u.Vst()[o+f].O6(),n)}}*Ovt(){if((this.tvt()||this.Qc.jCt())&&(yield this),this.svt()){var t=this.uct,e=t.hU(),s=t.xmt(),r=this.Ze,h=this.O2t,n=this.G2t,a=this._pt,o=this.Fmt,l=t.iD().eD();for(let t=0,e=r.length;t<e;++t){var i=r[t];i.Ymt()||(n[t]=i.ri(0))}for(let i=0,t=l.length;i<t;++i){var u=l[i];if(h)for(let t=0,e=r.length;t<e;++t){var c=r[t];c.Ymt()&&(n[t]=c.ri(i))}var f=e?u.KN().Bmt(s):0;yield*a.apply(u.Vst()[o+f].O6(),n)}}else this.Gvt()}xvt(){var s=this.Ze,r=this.G2t,e=this._pt,h=this.uct.iD().eD(),n=[];for(let i=0,t=h.length;i<t;++i){var a=h[i];for(let t=0,e=s.length;t<e;++t)r[t]=s[t].ri(i);n.push(e.apply(a.O6(),r))}return Promise.all(n)}*Dvt(){if((this.tvt()||this.Qc.jCt())&&(yield this),this.svt()){var s=this.Ze,r=this.G2t,e=this._pt,h=this.uct.iD().eD(),n=[];for(let i=0,t=h.length;i<t;++i){var a=h[i];for(let t=0,e=s.length;t<e;++t)r[t]=s[t].ri(i);n.push(yield*e.apply(a.O6(),r))}return Promise.all(n)}return this.xvt()}wvt(){var t=this.uct,e=t.hU(),s=t.xmt(),r=this.Ze,h=this.G2t,n=this._pt,a=this.Fmt,o=t.iD().eD(),l=[];for(let i=0,t=o.length;i<t;++i){var u=o[i];for(let t=0,e=r.length;t<e;++t)h[t]=r[t].ri(i);var c=e?u.KN().Bmt(s):0;l.push(n.apply(u.Vst()[a+c].O6(),h))}return Promise.all(l)}*bvt(){if((this.tvt()||this.Qc.jCt())&&(yield this),this.svt()){var t=this.uct,e=t.hU(),s=t.xmt(),r=this.Ze,h=this.G2t,n=this._pt,a=this.Fmt,o=t.iD().eD(),l=[];for(let i=0,t=o.length;i<t;++i){var u=o[i];for(let t=0,e=r.length;t<e;++t)h[t]=r[t].ri(i);var c=e?u.KN().Bmt(s):0;l.push(yield*n.apply(u.Vst()[a+c].O6(),h))}return Promise.all(l)}return this.wvt()}async Evt(){try{await this._pt()}catch(t){console.error(`Unhandled exception running script %c${this.$pt.MY().jc()}, event ${this.$pt._Ct()}, action ${this.NCt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),C33.Kdt.Ept()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),C33.Kdt.Ipt())}}*Ivt(){return(this.tvt()||this.Qc.jCt())&&(yield this),this.Evt()}GX(){return this.P2t&&this.P2t.size?{ex:C33.Pa(this.P2t)}:null}OX(t){this.P2t&&(this.P2t.clear(),this.P2t=null),t&&(t=t.ex)&&(this.P2t=C33.La(t))}}}{let GetInst2=function(t){return t instanceof self.qN?runtime.DD(t):t.hB()},GetWorldInfo2=function(t){return GetInst2(t).s5()},CompareX2=function(t,e){return C33.compare(GetWorldInfo2(this).rg(),t,e)},CompareY2=function(t,e){return C33.compare(GetWorldInfo2(this).ag(),t,e)},IsOnScreen2=function(){return GetWorldInfo2(this).T7()},IsOutsideLayout2=function(){var t=GetWorldInfo2(this),e=t.$L(),t=t.m7();return t.Sl()<0||t.gl()<0||t.ml()>e.eC()||t.vl()>e.cC()},PickDistance2=function(i,s,r){var t=this.iD(),h=t.eD();if(!h.length)return!1;let n=h[0],a=n.s5(),o=n,l=C33.gh(a.rg(),a.ag(),s,r);for(let t=1,e=h.length;t<e;++t){n=h[t],a=n.s5();var u=C33.gh(a.rg(),a.ag(),s,r);(0===i&&u<l||1===i&&u>l)&&(l=u,o=n)}return t.$ct(o),!0},SetX2=function(t){var e=GetWorldInfo2(this);e.rg()!==t&&(e.hg(t),e.o7())},SetY2=function(t){var e=GetWorldInfo2(this);e.ag()!==t&&(e.og(t),e.o7())},SetPos2=function(t,e){var i=GetWorldInfo2(this);i.Jvt(t,e)||(i.l7(t,e),i.o7())},SetPosToObject2=function(t,e){var i;t&&(i=GetInst2(this),t=t.Qx(i))&&([t,e]=t.Zvt(e),(i=i.s5()).rg()===t&&i.ag()===e||(i.l7(t,e),i.o7()))},MoveForward2=function(t){var e;0!==t&&((e=GetWorldInfo2(this)).f7(e.Qvt()*t,e.tSt()*t),e.o7())},MoveAtAngle2=function(t,e){var i;0!==e&&(i=GetWorldInfo2(this),t=C33.ph(t),i.f7(Math.cos(t)*e,Math.sin(t)*e),i.o7())},GetX2=function(){return GetWorldInfo2(this).rg()},GetY2=function(){return GetWorldInfo2(this).ag()},GetDt2=function(){var t=GetInst2(this);return t.I5().aL(t)},CompareWidth2=function(t,e){return C33.compare(GetWorldInfo2(this).eC(),t,e)},CompareHeight2=function(t,e){return C33.compare(GetWorldInfo2(this).cC(),t,e)},SetWidth2=function(t){var e=GetWorldInfo2(this);e.eC()!==t&&(e.oC(t),e.o7())},SetHeight2=function(t){var e=GetWorldInfo2(this);e.cC()!==t&&(e.iC(t),e.o7())},SetSize2=function(t,e){var i=GetWorldInfo2(this);i.eC()===t&&i.cC()===e||(i.LM(t,e),i.o7())},GetWidth2=function(){return GetWorldInfo2(this).eC()},GetHeight2=function(){return GetWorldInfo2(this).cC()},GetBboxLeft2=function(){return GetWorldInfo2(this).m7().ml()},GetBboxTop2=function(){return GetWorldInfo2(this).m7().vl()},GetBboxRight2=function(){return GetWorldInfo2(this).m7().Sl()},GetBboxBottom2=function(){return GetWorldInfo2(this).m7().gl()},GetBboxMidX2=function(){var t=GetWorldInfo2(this).m7();return(t.ml()+t.Sl())/2},GetBboxMidY2=function(){var t=GetWorldInfo2(this).m7();return(t.vl()+t.gl())/2},IsAngleWithin2=function(t,e){return C33._h(GetWorldInfo2(this).yD(),C33.ph(e))<=C33.ph(t)},IsAngleClockwiseFrom2=function(t){return C33.Eh(GetWorldInfo2(this).yD(),C33.ph(t))},IsBetweenAngles2=function(t,e){var t=C33.ph(t),e=C33.ph(e),i=GetWorldInfo2(this).yD();return!C33.Eh(e,t)?!(!C33.Eh(i,t)&&C33.Eh(i,e)):C33.Eh(i,t)&&!C33.Eh(i,e)},SetAngle2=function(t){var e=GetWorldInfo2(this),t=C33.Ch(C33.ph(t));isNaN(t)||e.yD()===t||(e._D(t),e.o7())},RotateClockwise2=function(t){var e;isNaN(t)||0===t||((e=GetWorldInfo2(this))._D(e.yD()+C33.ph(t)),e.o7())},RotateCounterclockwise2=function(t){var e;isNaN(t)||0===t||((e=GetWorldInfo2(this))._D(e.yD()-C33.ph(t)),e.o7())},RotateTowardAngle2=function(t,e){var i=GetWorldInfo2(this),s=i.yD(),e=C33.yh(s,C33.ph(e),C33.ph(t));isNaN(e)||s===e||(i._D(e),i.o7())},RotateTowardPosition2=function(t,e,i){var s=GetWorldInfo2(this),r=s.yD(),e=e-s.rg(),i=i-s.ag(),i=Math.atan2(i,e),e=C33.yh(r,i,C33.ph(t));isNaN(e)||r===e||(s._D(e),s.o7())},SetTowardPosition2=function(t,e){var i=GetWorldInfo2(this),s=i.yD(),t=t-i.rg(),e=e-i.ag(),e=Math.atan2(e,t);isNaN(e)||s===e||(i._D(e),i.o7())},GetAngle2=function(){return C33.mh(GetWorldInfo2(this).yD())},CompareOpacity2=function(t,e){return C33.compare(C33.Fh(100*GetWorldInfo2(this).Cb(),6),t,e)},IsVisible2=function(){return GetWorldInfo2(this).nN()},SetVisible2=function(t){var e=GetInst2(this),i=e.s5();t=2===t?!i.nN():0!==t,i.nN()!==t&&(i.rN(t),e.I5().u5())},SetOpacity2=function(t){var t=C33.dh(t/100,0,1),e=GetInst2(this),i=e.s5();if(i.c6()){if(i.uht().eSt()===t)return}else if(i.Cb()===t)return;i.mb(t),e.I5().u5()},SetDefaultColor2=function(t){tempColor.po(t);var t=GetInst2(this),e=t.s5();e.y7().no(tempColor)||(e.E7(tempColor),t.I5().u5())},GetColor2=function(){var t=GetWorldInfo2(this).y7();return C33.kh(t.Ja(),t.Za(),t.Qa(),t.eo())},GetOpacity2=function(){return C33.Fh(100*GetWorldInfo2(this).Cb(),6)},IsOnLayer2=function(t){return!!t&&GetWorldInfo2(this).r5()===t},PickTopBottom2=function(i){var t=this.iD(),s=t.eD();if(!s.length)return!1;let r=s[0];for(let t=1,e=s.length;t<e;++t){var h=s[t],n=h.s5(),a=r.s5(),o=n.r5().uP(),l=a.r5().uP();0===i?(l<o||o===l&&n.h5()>a.h5())&&(r=h):(o<l||o===l&&n.h5()<a.h5())&&(r=h)}return t.$ct(r),!0},CompareZElevation2=function(t,e,i){var s=GetWorldInfo2(this),t=0===t?s.lg():s.C7();return C33.compare(t,e,i)},MoveToTop2=function(){GetWorldInfo2(this).A7()},MoveToBottom2=function(){GetWorldInfo2(this).R7()},MoveToLayer2=function(t){t&&GetWorldInfo2(this).b7(t)},ZMoveToObject2=function(t,e){var i,t=0===t;e&&(i=GetInst2(this),e=e.iSt(i))&&i.s5().O7(e,t)},SetZElevation2=function(t){var e=GetInst2(this),i=e.s5();i.lg()!==t&&(i.ug(t),e.I5().u5())},LayerNumber2=function(){return GetWorldInfo2(this).r5().uP()},LayerName2=function(){return GetWorldInfo2(this).r5().jc()},ZIndex2=function(){return GetWorldInfo2(this).h5()},ZElevation2=function(){return GetWorldInfo2(this).lg()},TotalZElevation2=function(){return GetWorldInfo2(this).C7()},IsEffectEnabled2=function(t){var e=GetInst2(this),t=e.KN().CD().jst(t);if(t)return t=t.uP(),e.s5().n7().q6(t)},SetEffectEnabled2=function(t,e){var i,s=GetInst2(this),e=s.KN().CD().jst(e);e&&(e=e.uP(),t=1===t,(i=s.s5().n7()).q6(e)!==t)&&(i.z6(e,t),i.K6(),s.I5().u5())},SetEffectParam2=function(t,e,i){var s,r=GetInst2(this),t=r.KN().CD().jst(t);t&&(e=Math.floor(e),s=t.Uy().Xy(e))&&("color"===s?(tempColor.po(i),i=tempColor):"percent"===s&&(i/=100),s=t.uP(),(t=r.s5().n7()).Z6(s,e,i))&&t.q6(s)&&r.I5().u5()},CollMemory_Add2=function(t,e,i,s){e.uF()<i.uF()?t.Set(e,i,s):t.Set(i,e,s)},CollMemory_Remove2=function(t,e,i){e.uF()<i.uF()?t.zu(e,i):t.zu(i,e)},CollMemory_RemoveInstance2=function(t,e){t.Ku(e)},CollMemory_Get2=function(t,e,i){return e.uF()<i.uF()?t.ri(e,i):t.ri(i,e)},DoOverlapCondition2=function(t,e,i,s){if(!e)return!1;var r,h=0!==i||0!==s,n=t.s5(),a=t.I5(),o=a.vP(),l=a.Oft(),u=l.HP().Bct(),c=l.KN(),f=l.Q2t(),l=e.iD(),d=c!==e;rPickType=e,needsCollisionFinish=d&&!f;let C,p=0,m=0,v=rPickFromElseInstances=!1;l.yct()?(tempRect._(n.m7()),tempRect.offset(i,s),o.sSt(n.r5(),e,tempRect,tempCandidates2),C=tempCandidates2):!u||a.rSt()&&!l.Oct().length&&l.Gct().length?C=l.Gct():(C=l.Oct(),rPickFromElseInstances=!0),h&&(p=n.rg(),m=n.ag(),n.f7(i,s),n.o7());for(r of C)if(o.Y5(t,r)){if(v=!0,f)break;d&&rToPick.add(r)}return h&&(n.l7(p,m),n.o7()),C33.xn(tempCandidates2),v},FinishCollisionConditionPicking2=function(t){var t=t.I5().jP().Bct(),e=rPickType.iD(),i=e.Gct(),s=e.Oct();e.yct()?(e.xct(rToPick),t&&(C33.xn(s),e.Dct(rToPick,rPickType.eD()))):t?rPickFromElseInstances?e.Nct(rToPick):(e.Dct(rToPick,i),e.xct(rToPick)):e.xct(rToPick),rPickType.cpt()},FinishCollisionCondition2=function(t,e){needsCollisionFinish&&(e&&FinishCollisionConditionPicking2(t),rToPick.clear(),rPickType=null,needsCollisionFinish=!1)},OnCollision2=function(s){if(this.Qc.hSt())return DebugOnCollision.call(this,s);if(s){var t=this.Qc,r=t.vP(),h=t.BP(),n=h.ZP(),a=h.Oft(),o=a.KN(),l=a.rvt(),a=a.hvt(),u=n.zk(),c=t.VQ(),f=c-1,d=u.jP(),C=n.Kk(d);let i=l.get("collmemory");i||(i=C33.nh(C33.ju),l.set("collmemory",i)),a.get("collisionCreatedDestroyCallback")||(a.set("collisionCreatedDestroyCallback",!0),t.x3().addEventListener("instancedestroy",t=>CollMemory_RemoveInstance2(i,t.H6)));var l=o.iD(),p=s.iD(),m=l.eD();let e=null;for(let t=0;t<m.length;++t){var v=m[t];p.yct()?(r.sSt(v.s5().r5(),s,v.s5().m7(),tempCandidates1),e=tempCandidates1,r.nSt(v,s,e)):e=p.eD();for(let t=0;t<e.length;++t){var S=e[t];if(r.Y5(v,S)||r.aSt(v,S)){var g=CollMemory_Get2(i,v,S);let t=!1,e=-2;"number"==typeof g&&(t=!0,e=g);var T,_,y,g=!t||e<f;CollMemory_Add2(i,v,S,c),g&&(g=d.qk(),h.h8(g),y=o.iD(),T=s.iD(),y.bct(!1),T.bct(!1),(o===s?(_=y.Gct(),C33.xn(_),_.push(v),_.push(S),o):(_=y.Gct(),y=T.Gct(),C33.xn(_),C33.xn(y),_.push(v),y.push(S),o.cpt(),s)).cpt(),d.n8(u,C),h.a8(g))}else CollMemory_Remove2(i,v,S)}C33.xn(tempCandidates1)}n.c8()}return!1},IsOverlapping2=function(t){return DoOverlapCondition2(GetInst2(this),t,0,0)},IsOverlappingOffset2=function(t,e,i){return DoOverlapCondition2(GetInst2(this),t,e,i)},HasParent2=function(){return GetWorldInfo2(this).K7()},HasChildren2=function(){return GetWorldInfo2(this).xX()},PickParent2=function(i,s){var r=this.iD().eD();if(0===r.length)return!1;var t,e=i.iD();let h=e.eD();if(0===(h=e.yct()&&0<(t=[...this.Qc.oSt(i)]).length?h.concat(t):h).length)return!1;var n=new Set(h),a=new Set;for(let t=0,e=r.length;t<e;++t){var o=r[t];if(1===s)for(var l of o.k7())l.lSt(i)&&n.has(l)&&a.add(l);else{let t;if(0===s){if(null===(t=o.N7()))continue}else t=o.B7();t.lSt(i)&&n.has(t)&&a.add(t)}}return 0!==a.size&&(e.xct(a),i.cpt(),!0)},PickChildren2=function(i,s){var r=this.iD().eD();if(0===r.length)return!1;var t,e=i.iD();let h=e.eD();if(0===(h=e.yct()&&0<(t=[...this.Qc.oSt(i)]).length?h.concat(t):h).length)return!1;var n=new Set(h),a=new Set;for(let t=0,e=r.length;t<e;++t){var o,l=r[t];2===s&&!l.xX()&&l.lSt(i)&&n.has(l)&&a.add(l);for(o of 0===s?l.children():l.j7())2===s&&o.xX()||o.lSt(i)&&n.has(o)&&a.add(o)}return 0!==a.size&&(e.xct(a),i.cpt(),!0)},PickNthChild2=function(i,s,r){var h=this.iD().eD();if(0===h.length)return!1;var t,e=i.iD();let n=e.eD();if(0===(n=e.yct()&&0<(t=[...this.Qc.oSt(i)]).length?n.concat(t):n).length)return!1;var a=new Set(n),o=[];for(let t=0,e=h.length;t<e;++t){var l=h[t];if(0===s){var u=l.U7(r);null!==u&&u.lSt(i)&&a.has(u)&&o.push(u)}else if(1===s)for(var c of l.children())if(c.lSt(i)){if(0===r){a.has(c)&&o.push(c);break}--r}}return 0!==o.length&&(e.Lct(o),i.cpt(),!0)},CompareChildCount2=function(t,e,i){var s=GetInst2(this);switch(t){case 0:default:return C33.compare(s.V7(),e,i);case 1:return C33.compare(s.uSt(),e,i)}},AddChild2=function(t,e,i,s,r,h,n,a,o,l){var u,c=GetInst2(this),f=c.I5().Lft().KN();for(u of t.cSt(c,f)){if(!u.Ux().Ox())return;c.Y7(u,{Z7:e,t6:i,i6:s,r6:r,n6:h,u6:n,o6:a,f6:o,C6:l})}},RemoveChild2=function(t){var e,i=GetInst2(this),s=i.I5().Lft().KN();for(e of t.cSt(i,s))i.q7(e)},RemoveFromParent2=function(){var t=GetInst2(this);t.K7()&&t.N7().q7(t)},ChildCount2=function(){return GetInst2(this).V7()},AllChildCount2=function(){return GetInst2(this).uSt()},SetMeshSize2=function(t,e){t=Math.floor(t),e=Math.floor(e);var i=GetWorldInfo2(this);t<2||e<2||!isFinite(t)||!isFinite(e)?(i.g6(),i.o7()):i.v6(t,e)},SetMeshPoint2=function(t,e,i,s,r,h,n,a){var o=GetWorldInfo2(this);o._6(t,e,{mode:0===i?"absolute":"relative",x:s,y:r,IN:h,u:n,v:a})&&o.o7()},MeshColumns2=function(){var t=GetWorldInfo2(this);return t.E6()?t.I6().xg():0},MeshRows2=function(){var t=GetWorldInfo2(this);return t.E6()?t.I6().Dg():0},SetElementVisible2=function(t){var e=GetWorldInfo2(this);t=2===t?!e.nN():0!==t,e.nN()!==t&&e.rN(t)},SetElementCSSStyle2=function(t,e){this instanceof self.qN?this.Tk(t,e):this.D6(t,e)},SetElementAttribute2=function(t,e){this instanceof self.qN?this._k(t,""+e):this.fSt(t,""+e)},RemoveElementAttribute2=function(t){this instanceof self.qN?this.yk(t):this.dSt(t)},SetElementFocus2=function(){this instanceof self.qN?this.vk():this.P6()},SetElementBlur2=function(){this instanceof self.qN?this.Sk():this.L6()},IsElementFocused2=function(){return this instanceof self.qN?this.gk():this.CSt()},SetElementEnabled2=function(t){this instanceof self.qN?this._setEnabled(0!==t):this.pSt(0!==t)},IsElementEnabled2=function(){return this instanceof self.qN?this.bpt():this.mSt()},CompareInstanceVar2=function(t,e,i){return C33.compare(GetInst2(this).Qrt(t),e,i)},IsBoolInstanceVarSet2=function(t){return!!GetInst2(this).Qrt(t)},PickInstVarHiLow2=function(i,s){var t=this.iD(),r=t.eD();if(!r.length)return!1;var h=this.hU();let n=null,a=0;for(let t=0,e=r.length;t<e;++t){var o=r[t],l=h?o.KN().Lmt(this.xmt()):0,l=o.Qrt(l+s);(null===n||0===i&&l<a||1===i&&l>a)&&(a=l,n=o)}return t.$ct(n),!0},PickByUID2=function(t){return(this.Qc.Oft().Q2t()?PickByUID_Inverted2:PickByUID_Normal2)(this,t)},PickByUID_Normal2=function(t,e){e=t.I5().ZL(e);if(e){var i=t.iD();if(i.yct()||i.Gct().includes(e))if(t.hU()){if(e.KN().vSt(t))return i.$ct(e),t.cpt(),!0}else if(e.KN()===t)return i.$ct(e),t.cpt(),!0}return!1},PickByUID_Inverted2=function(t,s){var r=t.iD();if(r.yct()){r.bct(!1),r._ct();var i=t.eD();for(let t=0,e=i.length;t<e;++t){var h=i[t];h.uF()===s?r.wct(h):r.Rct(h)}return t.cpt(),!!r.Gct().length}{var n=r.Gct();let i=0;for(let t=0,e=n.length;t<e;++t){var a=n[t];(n[i]=a).uF()===s?r.wct(a):++i}return C33.Ln(n,i),t.cpt(),!!n.length}},HasTags2=function(t){var t=new Set(C33.zn(t)),e=GetInst2(this).vF();return t.ls(e)},Tags2=function(){return GetInst2(this).SSt()},TagsCount2=function(){return GetInst2(this).vF().size},TagAt2=function(t){return GetInst2(this).gSt(t)},ChangeTags2=function(t,e){e=C33.zn(e);if(0!==e.length){var i=GetInst2(this),s=new Set(i.vF());if(0===t)for(var r of e)s.add(r);else if(1===t)for(var h of e)s.delete(h);i.gF(s)}},Destroy2=function(){var t=GetInst2(this);t.I5().sF(t)},OnCreated2=function(){return!0},OnDestroyed2=function(){return!0},SetInstanceVar2=function(t,e){GetInst2(this).tht(t,e)},AddInstanceVar2=function(t,e){var i=GetInst2(this),s=i.Qrt(t);"number"==typeof s&&"number"!=typeof e?e=parseFloat(e):"string"==typeof s&&"string"!=typeof e&&(e=e.toString()),i.tht(t,s+e)},SubInstanceVar2=function(t,e){var i=GetInst2(this),s=i.Qrt(t);"number"==typeof s&&("number"!=typeof e&&(e=parseFloat(e)),i.tht(t,s-e))},SetBoolInstanceVar2=function(t,e){GetInst2(this).tht(t,e?1:0)},ToggleBoolInstanceVar2=function(t){var e=GetInst2(this);e.tht(t,0===e.Qrt(t)?1:0)},LoadFromJsonString2=function(t){let e;try{e=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}t=GetInst2(this);t.I5().TSt(),t.Kz("state"),t.gg(e,"state"),t.I5()._St("state",{ySt:!0})},AsJSON2=function(){return JSON.stringify(GetInst2(this).Sg("state"))},ObjectTypeName2=function(){return GetInst2(this).KN().jc()},Count2=function(){var t,e=GetInst2(this).I5(),i=e.Gft().p3t();let s=i.rD();for(t of e.oSt(i))++s;return s},PickedCount2=function(){return GetInst2(this).I5().Gft().p3t().iD().eD().length},GetIID2=function(){return GetInst2(this).Aq()},GetUID2=function(){return GetInst2(this).uF()},OnInstanceSignal2=function(t){var e=GetInst2(this);return t.toLowerCase()===e.I5().BP().rdt(e)},InstanceSignal2=function(t){var e=GetInst2(this);e.I5().BP()._F(e,t)},InstanceWaitForSignal2=function(t){return this.I5().BP().P0t().ESt(this.iD().eD(),t),!0},TemplateName2=function(){return GetInst2(this).fF()},C33=(GetInst=GetInst2,GetWorldInfo=GetWorldInfo2,CompareX=CompareX2,CompareY=CompareY2,IsOnScreen=IsOnScreen2,IsOutsideLayout=IsOutsideLayout2,PickDistance=PickDistance2,SetX=SetX2,SetY=SetY2,SetPos=SetPos2,SetPosToObject=SetPosToObject2,MoveForward=MoveForward2,MoveAtAngle=MoveAtAngle2,GetX=GetX2,GetY=GetY2,GetDt=GetDt2,CompareWidth=CompareWidth2,CompareHeight=CompareHeight2,SetWidth=SetWidth2,SetHeight=SetHeight2,SetSize=SetSize2,GetWidth=GetWidth2,GetHeight=GetHeight2,GetBboxLeft=GetBboxLeft2,GetBboxTop=GetBboxTop2,GetBboxRight=GetBboxRight2,GetBboxBottom=GetBboxBottom2,GetBboxMidX=GetBboxMidX2,GetBboxMidY=GetBboxMidY2,IsAngleWithin=IsAngleWithin2,IsAngleClockwiseFrom=IsAngleClockwiseFrom2,IsBetweenAngles=IsBetweenAngles2,SetAngle=SetAngle2,RotateClockwise=RotateClockwise2,RotateCounterclockwise=RotateCounterclockwise2,RotateTowardAngle=RotateTowardAngle2,RotateTowardPosition=RotateTowardPosition2,SetTowardPosition=SetTowardPosition2,GetAngle=GetAngle2,CompareOpacity=CompareOpacity2,IsVisible=IsVisible2,SetVisible=SetVisible2,SetOpacity=SetOpacity2,SetDefaultColor=SetDefaultColor2,GetColor=GetColor2,GetOpacity=GetOpacity2,IsOnLayer=IsOnLayer2,PickTopBottom=PickTopBottom2,CompareZElevation=CompareZElevation2,MoveToTop=MoveToTop2,MoveToBottom=MoveToBottom2,MoveToLayer=MoveToLayer2,ZMoveToObject=ZMoveToObject2,SetZElevation=SetZElevation2,LayerNumber=LayerNumber2,LayerName=LayerName2,ZIndex=ZIndex2,ZElevation=ZElevation2,TotalZElevation=TotalZElevation2,IsEffectEnabled=IsEffectEnabled2,SetEffectEnabled=SetEffectEnabled2,SetEffectParam=SetEffectParam2,CollMemory_Add=CollMemory_Add2,CollMemory_Remove=CollMemory_Remove2,CollMemory_RemoveInstance=CollMemory_RemoveInstance2,CollMemory_Get=CollMemory_Get2,DoOverlapCondition=DoOverlapCondition2,FinishCollisionConditionPicking=FinishCollisionConditionPicking2,FinishCollisionCondition=FinishCollisionCondition2,OnCollision=OnCollision2,IsOverlapping=IsOverlapping2,IsOverlappingOffset=IsOverlappingOffset2,HasParent=HasParent2,HasChildren=HasChildren2,PickParent=PickParent2,PickChildren=PickChildren2,PickNthChild=PickNthChild2,CompareChildCount=CompareChildCount2,AddChild=AddChild2,RemoveChild=RemoveChild2,RemoveFromParent=RemoveFromParent2,ChildCount=ChildCount2,AllChildCount=AllChildCount2,SetMeshSize=SetMeshSize2,SetMeshPoint=SetMeshPoint2,MeshColumns=MeshColumns2,MeshRows=MeshRows2,SetElementVisible=SetElementVisible2,SetElementCSSStyle=SetElementCSSStyle2,SetElementAttribute=SetElementAttribute2,RemoveElementAttribute=RemoveElementAttribute2,SetElementFocus=SetElementFocus2,SetElementBlur=SetElementBlur2,IsElementFocused=IsElementFocused2,SetElementEnabled=SetElementEnabled2,IsElementEnabled=IsElementEnabled2,CompareInstanceVar=CompareInstanceVar2,IsBoolInstanceVarSet=IsBoolInstanceVarSet2,PickInstVarHiLow=PickInstVarHiLow2,PickByUID=PickByUID2,PickByUID_Normal=PickByUID_Normal2,PickByUID_Inverted=PickByUID_Inverted2,HasTags=HasTags2,Tags=Tags2,TagsCount=TagsCount2,TagAt=TagAt2,ChangeTags=ChangeTags2,Destroy=Destroy2,OnCreated=OnCreated2,OnDestroyed=OnDestroyed2,SetInstanceVar=SetInstanceVar2,AddInstanceVar=AddInstanceVar2,SubInstanceVar=SubInstanceVar2,SetBoolInstanceVar=SetBoolInstanceVar2,ToggleBoolInstanceVar=ToggleBoolInstanceVar2,LoadFromJsonString=LoadFromJsonString2,AsJSON=AsJSON2,ObjectTypeName=ObjectTypeName2,Count=Count2,PickedCount=PickedCount2,GetIID=GetIID2,GetUID=GetUID2,OnInstanceSignal=OnInstanceSignal2,InstanceSignal=InstanceSignal2,InstanceWaitForSignal=InstanceWaitForSignal2,TemplateName=TemplateName2,self.$e),tempColor=new C33.Fa,runtime=null,tempRect=(C33.ISt=function(t){runtime=t},C33.nh(C33.Rect)),tempCandidates1=[],tempCandidates2=[],needsCollisionFinish=!1,rPickType=null,rPickFromElseInstances=!1,rToPick=new Set;function*DebugOnCollision(s){if(s){var t=this.Qc,r=t.vP(),h=t.BP(),n=h.ZP(),a=h.Oft(),o=a.KN(),l=a.rvt(),a=a.hvt(),u=n.zk(),c=t.VQ(),f=c-1,d=u.jP(),C=n.Kk(d);let i=l.get("collmemory");i||(i=C33.nh(C33.ju),l.set("collmemory",i)),a.get("collisionCreatedDestroyCallback")||(a.set("collisionCreatedDestroyCallback",!0),t.x3().addEventListener("instancedestroy",t=>CollMemory_RemoveInstance2(i,t.H6)));var l=o.iD(),p=s.iD(),m=l.eD();let e=null;for(let t=0;t<m.length;++t){var v=m[t];p.yct()?(r.sSt(v.s5().r5(),s,v.s5().m7(),tempCandidates1),e=tempCandidates1,r.nSt(v,s,e)):e=p.eD();for(let t=0;t<e.length;++t){var S=e[t];if(r.Y5(v,S)||r.aSt(v,S)){var g=CollMemory_Get2(i,v,S);let t=!1,e=-2;"number"==typeof g&&(t=!0,e=g);var T,_,y,g=!t||e<f;CollMemory_Add2(i,v,S,c),g&&(g=d.qk(),h.h8(g),y=o.iD(),T=s.iD(),y.bct(!1),T.bct(!1),(o===s?(_=y.Gct(),C33.xn(_),_.push(v),_.push(S),o):(_=y.Gct(),y=T.Gct(),C33.xn(_),C33.xn(y),_.push(v),y.push(S),o.cpt(),s)).cpt(),yield*d.ipt(u,C),h.a8(g))}else CollMemory_Remove2(i,v,S)}C33.xn(tempCandidates1)}n.c8()}return!1}C33.ASt=function(t,e){var i=t[1],s=t[4],r=t[5],h=t[6],n=t[7],a=t[8],o=t[10],l=t[11],u=t[12],c=t[13],f=t[14],d=t[15],C=t[16],p=e.Tq,m=e.crt,v=e.frt;t[3]&&(p.MSt=CompareX2,p.RSt=CompareY2,p.wSt=IsOnScreen2,p.bSt=IsOutsideLayout2,p.GSt=PickDistance2,m.hg=SetX2,m.og=SetY2,m.OSt=SetPos2,m.PSt=SetPosToObject2,m.LSt=MoveForward2,m.xSt=MoveAtAngle2,v.DSt=GetX2,v.NSt=GetY2,v.nL=GetDt2),s&&(p.FSt=CompareWidth2,p.$St=CompareHeight2,m.oC=SetWidth2,m.iC=SetHeight2,m.LM=SetSize2,v.BSt=GetWidth2,v.kSt=GetHeight2,v.WSt=GetBboxLeft2,v.VSt=GetBboxTop2,v.HSt=GetBboxRight2,v.USt=GetBboxBottom2,v.jSt=GetBboxMidX2,v.XSt=GetBboxMidY2),r&&(p.YSt=IsAngleWithin2,p.qSt=IsAngleClockwiseFrom2,p.zSt=IsBetweenAngles2,m._D=SetAngle2,m.KSt=RotateClockwise2,m.JSt=RotateCounterclockwise2,m.ZSt=RotateTowardAngle2,m.QSt=RotateTowardPosition2,m.tgt=SetTowardPosition2,v.egt=GetAngle2),h&&(p.nN=IsVisible2,p.igt=CompareOpacity2,m.rN=SetVisible2,m.mb=SetOpacity2,m.sgt=SetDefaultColor2,v.Opacity=GetOpacity2,v.rgt=GetColor2),n&&(p.hgt=IsOnLayer2,p.ngt=PickTopBottom2,p.agt=CompareZElevation2,m.ogt=MoveToTop2,m.lgt=MoveToBottom2,m.ugt=MoveToLayer2,m.cgt=ZMoveToObject2,m.ug=SetZElevation2,v.fgt=LayerNumber2,v.dgt=LayerName2,v.Cgt=ZIndex2,v.pgt=ZElevation2,v.mgt=TotalZElevation2),a&&(p.vgt=IsEffectEnabled2,m.Sgt=SetEffectEnabled2,m.ggt=SetEffectParam2),c&&(p.K7=HasParent2,p.xX=HasChildren2,p.Tgt=PickParent2,p._gt=PickChildren2,p.ygt=PickNthChild2,p.Egt=CompareChildCount2,m.Y7=AddChild2,m.q7=RemoveChild2,m.Igt=RemoveFromParent2,v.Agt=ChildCount2,v.Mgt=AllChildCount2),f&&(m.Rgt=SetMeshSize2,m._6=SetMeshPoint2,v.wgt=MeshColumns2,v.bgt=MeshRows2),o&&(p.nN=IsVisible2,m.rN=SetElementVisible2,m.Ggt=SetElementCSSStyle2,m.Ogt=SetElementAttribute2,m.Pgt=RemoveElementAttribute2),l&&(p.Lgt=IsElementFocused2,m.xgt=SetElementFocus2,m.Dgt=SetElementBlur2),u&&(p.Uu=IsElementEnabled2,m.Ngt=SetElementEnabled2),d&&(p.Fgt=OnCollision2,p.$gt=IsOverlapping2,p.Bgt=IsOverlappingOffset2,e.kgt=FinishCollisionCondition2),i||(p.Wgt=CompareInstanceVar2,p.Vgt=IsBoolInstanceVarSet2,p.Hgt=PickInstVarHiLow2,p.Ugt=PickByUID2,p.k$=HasTags2,m.jgt=SetInstanceVar2,m.Xgt=AddInstanceVar2,m.Ygt=SubInstanceVar2,m.qgt=SetBoolInstanceVar2,m.zgt=ToggleBoolInstanceVar2,m.Kgt=ChangeTags2,p.Jgt=OnCreated2,p.Zgt=OnDestroyed2,m.Qgt=Destroy2,m.tTt||(m.tTt=LoadFromJsonString2),v.eTt||(v.eTt=AsJSON2),v.iTt=Count2,v.sTt=PickedCount2,v.rTt=GetIID2,v.hTt=GetUID2,v.nTt=ObjectTypeName2,v.aTt=Tags2,v.oTt=TagsCount2,v.lTt=TagAt2,p.tdt=OnInstanceSignal2,m._F=InstanceSignal2,m.uTt=InstanceWaitForSignal2),C&&(v.cTt=TemplateName2)}}{let C33=self.$e;C33.L0t=class ScheduledWait extends C33.rh{constructor(t){super(),this.Wct=t,this.a3="",this.H4=-1,this.fTt="",this.dTt=!1,this.CTt=null,this.Kct=0,this.E1t=[],this.i3t=null,this.pTt=new Map,this.mTt=null,this.vTt=null,this.STt=-1,this.wpt=null,this.gTt=null,this.TTt=!1}ah(){this.a3="",this.H4=-1,this.fTt="",this.CTt=null,this.vTt=null,this.wpt=null,this.gTt=null,this.STt=-1,C33.xn(this.E1t),this.i3t&&(this.i3t.clear(),this.i3t=null);for(var t of this.pTt.values())t.ah();this.pTt.clear(),this.mTt=null}sg(){var t,e=this.Wct,i=e.I5().rU(),s=e.Gft(),s=(this.CTt=s.jP(),this.Kct=s.o3t()+1,e.ydt(this.CTt));s&&(this.vTt=s,this.wpt=s.jpt(),this.gTt=s.Upt().map(t=>t.Fit()),s.zCt())&&(this.STt=s.zpt());for(t of i){var r=t.iD();r.yct()&&!this.CTt.gCt(t)||(this.E1t.push(t),this.pTt.set(t,C33.nh(C33._Tt,r)))}s=e.XP();this.i3t=0<s.size?s:null}yTt(t){this.a3="timer",this.sg(),this.H4=this.Wct.I5().cL()+t}ETt(t){this.a3="signal",this.sg(),this.fTt=t.toLowerCase()}ESt(t,e){this.a3="instance-signals",this.sg(),this.fTt=e.toLowerCase(),this.mTt=new Set(t)}ITt(t){this.a3="promise",this.sg(),t.then(()=>this.K0t()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.K0t()})}ATt(){return"timer"===this.a3}q0t(){return"signal"===this.a3}idt(){return"instance-signals"===this.a3}Sdt(){return"promise"===this.a3}z0t(){return this.fTt}MTt(){return this.dTt}K0t(){this.dTt=!0}sdt(t){this.mTt.delete(t),0===this.mTt.size&&this.K0t()}N0t(){return this.ATt()?this.H4<=this.Wct.I5().cL():this.MTt()}RTt(t){t.s3t(this.CTt,this.Kct);for(var[e,i]of this.pTt.entries()){e=e.iD();i.s3t(e)}this.i3t&&t._3t([...this.i3t]);t=this.vTt;t&&(t.npt(this.wpt),t.Upt().map((t,e)=>t.gst(this.gTt[e])),t.zCt())&&t.Kpt(this.STt)}F0t(t){this.RTt(t),this.CTt.KCt(t),this.vTt&&this.vTt.zCt()&&this.vTt.mpt(this.STt),this.Wct.w0t(this.E1t),this.TTt=!0}async W0t(t){this.RTt(t);for(var e of this.CTt.JCt(t))await this.Wct.I5().c0t(e);this.vTt&&this.vTt.zCt()&&this.vTt.mpt(this.STt),this.Wct.w0t(this.E1t),this.TTt=!0}$0t(){return this.TTt}vct(t){for(var e of this.pTt.values())e.vct(t);if("instance-signals"===this.a3){for(var i of t)this.mTt.delete(i);0===this.mTt.size&&this.K0t()}}GX(){var t,e,i={},s={wt:this.a3,t:this.H4,st:this.fTt,s:this.dTt,ev:this.CTt.dU(),sm:this.E1t.map(t=>t.dU()),dsm:this.i3t?[...this.i3t].map(t=>t.dU()):null,sols:i};this.CTt.FCt(this.Kct)&&(s.act=this.CTt.xft(this.Kct).dU());for([t,e]of this.pTt)i[t.dU().toString()]=e.GX();return"instance-signals"===this.a3&&(s.pi=[...this.mTt].map(t=>t.uF())),s}static gdt(t,e){var i=t.I5(),s=t.Hft(e.ev);if(!s)return null;let r=0;if(e.hasOwnProperty("act")){var h=t.jft(e.act);if(!h)return null;r=h.uP()}var n,a,o,l=C33.nh(C33.L0t,t);l.H4=e.t,e.hasOwnProperty("wt")?l.a3=e.wt:l.a3=-1===l.H4?"signal":"timer",l.fTt=e.st,l.dTt=e.s,l.CTt=s,l.Kct=r;for(n of e.sm){var u=i.Cq(n);u&&l.E1t.push(u)}if(Array.isArray(e.dsm))for(var c of e.dsm){c=i.Cq(c);c&&(l.i3t||(l.i3t=new Set),l.i3t.add(c))}for([a,o]of Object.entries(e.sols)){var f,d=parseInt(a,10),d=i.Cq(d);d&&((f=C33.nh(C33._Tt,null)).OX(t,o),l.pTt.set(d,f))}if("instance-signals"===l.a3){l.mTt=new Set;for(var C of e.pi){C=i.ZL(C);C&&l.mTt.add(C)}}return l}}}{let C33=self.$e;C33._Tt=class SolState extends C33.rh{constructor(t){super(),this.uct=null,this.wTt=!0,this.sV=[],t&&(this.uct=t.KN(),this.wTt=t.yct(),C33.$n(this.sV,t.Gct()))}ah(){this.uct=null,C33.xn(this.sV)}s3t(t){t.bct(this.wTt),C33.$n(t.Gct(),this.sV)}vct(t){C33.Hn(this.sV,t)}GX(){return{sa:this.wTt,insts:this.sV.map(t=>t.uF())}}OX(t,e){var i,s=t.I5();this.wTt=!!e.sa,C33.xn(this.sV);for(i of e.insts){var r=s.ZL(i);r&&this.sV.push(r)}}}}{let GetNextParamMap2=function(t,e){let i=t.get(e);return i||(i=new Map,t.set(e,i)),i},C33=(GetNextParamMap=GetNextParamMap2,self.$e);C33.bTt=class SDKPluginBase extends C33.rh{constructor(t){super(),this.Qc=t.runtime,this.GTt=!!t.Sx,this.OTt=!!t.PTt,this.LTt=!!t.Ix,this.xTt=!!t.DTt,this.NTt=!!t.Mx,this.FTt=!!t.$Tt,this.BTt=!!t.Px,this.kTt=!!t.yx,this.WTt=!!t.wx,this.VTt=t.HTt,this.UTt=null,this.jTt=new Map,this.XTt=new Map,this.YTt=new Map,this.qTt=new Map,this.zTt=t.KTt,this.JTt=null}ah(){this.Qc=null}I5(){return this.Qc}ZTt(){}edt(){return(2<=this.Z2t()?this.JTt:this).constructor}Z2t(){return this.VTt}QTt(t=!1){let e=this.zTt;return e=t&&"function"!=typeof e&&2<=this.Z2t()?globalThis.fB:e}gx(){return this.GTt}_x(){return this.OTt}Ex(){return this.kTt}bx(){return this.WTt}Ax(){return this.LTt}PS(){return this.xTt}Rx(){return this.NTt}Ox(){return this.FTt}Lx(){return this.BTt}_mt(t,e){var i;if(e)return(i=this.jTt.get(t))||(i=t.bind(e),this.jTt.set(t,i)),i;throw new Error("missing 'this' binding")}q2t(t,e,i){var s,r;if(e)return(r=(s=GetNextParamMap2(this.XTt,t)).get(i))||(r=t.bind(e,i),s.set(i,r)),r;throw new Error("missing 'this' binding")}z2t(t,e,i,s){var r,h;if(e)return r=GetNextParamMap2(this.YTt,t),(h=(r=GetNextParamMap2(r,i)).get(s))||(h=t.bind(e,i,s),r.set(s,h)),h;throw new Error("missing 'this' binding")}K2t(t,e,i,s,r){var h,n;if(e)return h=GetNextParamMap2(this.qTt,t),h=GetNextParamMap2(h,i),(n=(h=GetNextParamMap2(h,s)).get(r))||(n=t.bind(e,i,s,r),h.set(r,n)),n;throw new Error("missing 'this' binding")}t_t(t){if(!this.gx())throw new Error("must be single-global plugin");this.UTt=t}Bx(){if(this.gx())return this.UTt;throw new Error("must be single-global plugin")}Wx(){if(this.gx())return this.UTt.Wx();throw new Error("must be single-global plugin")}e_t(){var t=this.Z2t(),e=(C33.mx.i_t(this,t),this.QTt(!0));if(e){if(this.JTt=new e,!(this.JTt instanceof self.ux))throw new TypeError("plugin class must derive from IPlugin")}else this.JTt=new self.ux;C33.mx.s_t(t)}Nx(){return this.JTt}}}{let C33=self.$e;C33.r_t=class SDKDOMPluginBase extends C33.bTt{constructor(t,e){super(t),this.h_t=e,this.n_t=0,this.a_t=new Map,this.o_t("elem-focused",t=>t.l_t()),this.o_t("elem-blurred",t=>{t&&t.u_t()})}ah(){super.ah()}c_t(t){var e=this.n_t++;return this.a_t.set(e,t),e}f_t(t){this.a_t.delete(t)}o_t(t,i){this.Qc.FF(this.h_t,t,t=>{var e=this.a_t.get(t.elementId);i(e,t)})}}}{let C33=self.$e;C33.d_t=class SDKTypeBase extends C33.rh{constructor(t){super(),this.uct=t,this.Qc=t.I5(),this.C_t=t.Ux()}ah(){this.uct=null,this.Qc=null,this.C_t=null}KN(){return this.uct}I5(){return this.Qc}Ux(){return this.C_t}m$(){return this.uct.m$()}ZTt(){}uvt(t){}zvt(t){}Kvt(t){}VY(t){}qY(){}jY(){}mq(t){}p_t(){}QTt(){return null}m_t(t,e,i){t=C33.nh(C33.Event,t,e);t.v_t=this,i&&Object.assign(t,i),this.KN().Zq(t)}}}{let C33=self.$e;C33.S_t=class SDKInstanceBase extends C33.rh{constructor(t,e){super(),this.Mi=t,this.h_t=e,this.g_t=null,this.Qc=t.I5(),this.uct=this.Mi.KN(),this.T_t=this.uct.qvt(),this.$z=null,this.kz=null,this.UF=!1,this.YF=!1,this.vf=null,this.rM=!1}ah(){this.rM=!0,this.__t(),this.y_t(),this.$z=null,this.kz=null,this.vf&&(this.vf.ah(),this.vf=null),this.Mi=null,this.Qc=null,this.uct=null,this.T_t=null}oh(){return this.rM}hB(){return this.Mi}I5(){return this.Qc}KN(){return this.uct}Ux(){return this.T_t.Ux()}qvt(){return this.T_t}E_t(){return this.Mi.QL()}LF(t){return this.Qc.LF(t,this.Mi,null)}I_t(t){return this.Qc.I_t(t,this.Mi,null)}DF(t){return this.Qc.DF(t,this.Mi,null)}A_t(t,e){return this.Qc.A_t(t,this.Mi,e)}M_t(t,e){return this.Qc.M_t(t,this.Mi,e)}R_t(t){return this.Qc.R_t(t)}w_t(t,e){this.Qc.FF(this.h_t,t,e)}b_t(t){for(var[e,i]of t)this.w_t(e,i)}G_t(t,e){this.Qc.i3(this.h_t,t,e)}O_t(t,e){return this.Qc.f5(this.h_t,t,e)}P_t(t,e){if(!this.Qc.AP())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.h_t,handler:t,data:e,responseId:null});this.G_t(t,e)}L_t(t){if(!t)throw new Error("cannot set empty component id");this.g_t=t}x_t(){if(this.g_t)return this.Qc.ZF(this.g_t);throw new Error("wrapper extension component id not set")}t7(t,e){if(!this.g_t)throw new Error("wrapper extension component id not set");this.Qc.t7(this.g_t,t,e)}D_t(t){for(var[e,i]of t)this.t7(e,i)}Bk(t,e){if(!this.g_t)throw new Error("wrapper extension component id not set");this.Qc.Bk(this.g_t,t,e)}kk(t,e){if(this.g_t)return this.Qc.kk(this.g_t,t,e);throw new Error("wrapper extension component id not set")}zK(){}N_t(){}F_t(){this.UF||(this.$z||(this.$z=()=>this.zK()),this.Qc.x3().addEventListener("tick",this.$z),this.UF=!0)}__t(){this.UF&&(this.Qc.x3().removeEventListener("tick",this.$z),this.UF=!1)}$_t(){return this.UF}B_t(){this.YF||(this.kz||(this.kz=()=>this.N_t()),this.Qc.x3().addEventListener("tick2",this.kz),this.YF=!0)}y_t(){this.YF&&(this.Qc.x3().removeEventListener("tick2",this.kz),this.YF=!1)}k_t(){return this.YF}W_t(){return[]}Sg(){return null}gg(t){}Urt(t){}Krt(t,e){}Uht(t,e,i){if(0!==e){var s=this.Urt(t);if("number"!=typeof s)throw new Error("expected number");this.Krt(t,s+e,i)}}V_t(t,e,i,s){}H_t(t,...e){t.call(this,...e)}U_t(t,...e){return t.call(this,...e)}QTt(){return null}m_t(t,e,i){var s;this.Mi.j_t()&&(s=this.E_t(),(t=C33.nh(C33.Event,t,e)).H6=s,i&&Object.assign(t,i),s.dispatchEvent(t))}PS(){return!1}}}{let C33=self.$e;C33.X_t=class SDKWorldInstanceBase extends C33.S_t{constructor(t,e){super(t,e),this.Vtt=t.s5(),this.Y_t=null,this.q_t=null}ah(){var t;this.Y_t&&((t=this.Qc.x3()).removeEventListener("renderercontextlost",this.Y_t),t.removeEventListener("renderercontextrestored",this.q_t),this.Y_t=null,this.q_t=null),this.Vtt=null,super.ah()}z_t(){this.K_t()}J_t(){}Z_t(){}K_t(){var t;this.Y_t||(this.Y_t=()=>this.zW(),this.q_t=()=>this.Q_t(),(t=this.Qc.x3()).addEventListener("renderercontextlost",this.Y_t),t.addEventListener("renderercontextrestored",this.q_t))}zW(){this.J_t()}Q_t(){this.Z_t()}s5(){return this.Vtt}Det(){return!1}xet(){if(!this.Det())throw new Error("original size not known");var t=this.tyt();if(t)return t.eC()}Fet(){if(!this.Det())throw new Error("original size not known");var t=this.tyt();if(t)return t.cC()}tyt(){return null}eyt(){var t=this.tyt();if(t){t=t.v_();if(t)return[t.eC(),t.cC()]}return[100,100]}iyt(){var t=this.tyt();return t?t.uR():null}syt(){var t=this.tyt();return t?t.ryt():null}hyt(){var t=this.tyt();return!!t&&t.nyt()}Zvt(t){var e=this.Mi.s5();return[e.rg(),e.ag(),e.C7()]}p_t(t,e,i){}ayt(t,e){}aX(){return!0}}}{let C33=self.$e,tempRect=C33.nh(C33.Rect);C33.oyt=class SDKDOMInstanceBase extends C33.X_t{constructor(t,e){super(t,e),this.lyt=this.Ux().c_t(this),this.uyt=!0,this.cyt=!1,this.fyt=!1,this.dyt=-.2,this.Cyt=C33.nh(C33.Rect,0,0,-1,-1);t=this.Qc.jB();this.pyt=t.YB(),this.myt=t.zB(),this.vyt=-1,this.Syt=-1,this.gyt=!1,this.F_t()}ah(){this.Ux().f_t(this.lyt),this.Tyt("destroy"),this.lyt=-1,super.ah()}G6(){if(this.Qc.AP())throw new Error("not valid in worker mode");return this._yt("get-element")}Tyt(t,e){(e=e||{}).elementId=this.lyt,this.G_t(t,e)}_yt(t,e){return(e=e||{}).elementId=this.lyt,this.P_t(t,e)}yyt(t,e){return(e=e||{}).elementId=this.lyt,this.O_t(t,e)}Eyt(t){t=t||{};var e=this.s5();t.elementId=this.lyt,t.isVisible=e.nN(),t.htmlIndex=e.r5().hk(),t.htmlZIndex=e.nk(),Object.assign(t,this.Iyt()),this.uyt=!!t.isVisible,this.P_t("create",t),this.Ayt(!0)}Myt(t){this.uyt!==(t=!!t)&&(this.uyt=t,this.Tyt("set-visible",{isVisible:t}))}zK(){this.Ayt(!1)}Ryt(){var t=this.Qc.jB().fk();return"Android"===C33.ci.fi&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}Ayt(t){if(!this.hB().dk()){var e=this.s5(),i=e.r5(),s=e.m7(),[r,h]=i.WN(s.ml(),s.vl()),[s,n]=i.WN(s.Sl(),s.gl()),a=this.Qc.jB(),o=a.Ck(),l=a.pk();if(e.nN()&&i.nN())if(!this.Ryt()&&(s<=0||n<=0||o<=r||l<=h))this.Myt(!1);else{tempRect.set(r,h,s,n);o=a.YB(),l=a.zB(),r=i.hk(),h=e.nk();if(!t&&tempRect.equals(this.Cyt)&&this.pyt===o&&this.myt===l&&this.vyt===r&&this.Syt===h)this.Myt(!0);else{this.Cyt._(tempRect),this.pyt=o,this.myt=l,this.vyt=r,this.Syt=h,this.Myt(!0);let t=null;this.fyt&&(t=i.mk()+this.dyt),this.Tyt("update-position",{left:Math.round(this.Cyt.ml()),top:Math.round(this.Cyt.vl()),width:Math.round(this.Cyt.width()),height:Math.round(this.Cyt.height()),htmlIndex:r,htmlZIndex:h,fontSize:t})}}else this.Myt(!1)}}P6(){this._yt("focus",{focus:!0})}L6(){this._yt("focus",{focus:!1})}l_t(){this.cyt=!0}u_t(){this.cyt=!1}CSt(){return this.cyt}D6(t,e){this.Tyt("set-css-style",{prop:C33.xa(t),val:e})}fSt(t,e){this.Tyt("set-attribute",{name:t,val:e})}dSt(t){this.Tyt("remove-attribute",{name:t})}wyt(){this.gyt||(this.gyt=!0,Promise.resolve().then(()=>{this.gyt=!1,this.Tyt("update-state",this.Iyt())}))}Iyt(){}byt(){return this.lyt}}}{let C33=self.$e,IBehavior=self.X6;C33.Gyt=class SDKBehaviorBase extends C33.rh{constructor(t){super(),this.Qc=t.runtime,this.Oyt=C33.nh(C33.Qu),this.Pyt=C33.nh(C33.Qu),this.VTt=t.HTt,this.zTt=t.KTt,this.Lyt=null}ah(){this.Pyt.ah(),this.Oyt.ah(),this.Qc=null}I5(){return this.Qc}ZTt(){}Z2t(){return this.VTt}QTt(t=!1){let e=this.zTt;return e=t&&"function"!=typeof e&&2<=this.Z2t()?globalThis.Ak:e}xyt(t){this.Oyt.sc(t)}_K(){return this.Oyt.rc()}XH(t){this.Pyt.sc(t)}zH(t){this.Pyt.zu(t)}eD(){return this.Pyt.rc()}e_t(){var t=this.Z2t(),e=(C33.mx.i_t(this,t),this.QTt(!0));if(e){if(this.Lyt=new e,!(this.Lyt instanceof IBehavior))throw new TypeError("behavior class must derive from IBehavior")}else this.Lyt=new IBehavior;C33.mx.s_t(t)}F6(){return this.Lyt}}}{let C33=self.$e;C33.Dyt=class SDKBehaviorTypeBase extends C33.rh{constructor(t){super(),this.Qc=t.I5(),this.Nmt=t,this.uct=t.KN(),this.Nyt=t.B6(),this.Nyt.xyt(this.uct)}ah(){this.Qc=null,this.Nmt=null,this.uct=null,this.Nyt=null}ZTt(){}V6(){return this.Nmt}KN(){return this.uct}I5(){return this.Qc}B6(){return this.Nyt}}}{let C33=self.$e;C33.Fyt=class SDKBehaviorInstanceBase extends C33.rh{constructor(t,e){super(),this.$yt=t,this.h_t=e,this.Mi=t.U6(),this.Qc=t.I5(),this.Nmt=t.V6(),this.T_t=this.Nmt.qvt(),this.UF=!1,this.YF=!1,this.Fk=!1,this.vf=null}ah(){this.__t(),this.y_t(),this.Byt(),this.vf&&(this.vf.ah(),this.vf=null),this.$yt=null,this.Mi=null,this.Qc=null,this.Nmt=null,this.T_t=null}B6(){return this.Nmt.B6()}kyt(){return this.$yt}U6(){return this.Mi}KN(){return this.Mi.KN()}s5(){return this.Mi.s5()}I5(){return this.Qc}V6(){return this.Nmt}qvt(){return this.T_t}E_t(){return this.$yt.E_t()}LF(t){return this.Qc.LF(t,this.Mi,this.Nmt)}I_t(t){return this.Qc.I_t(t,this.Mi,this.Nmt)}DF(t){return this.Qc.DF(t,this.Mi,this.Nmt)}Wyt(){}zK(){}N_t(){}Vyt(){}F_t(){this.UF||(this.Qc.Ok(this),this.UF=!0)}__t(){this.UF&&(this.Qc.Pk(this),this.UF=!1)}$_t(){return this.UF}B_t(){this.YF||(this.Qc.Lk(this),this.YF=!0)}y_t(){this.YF&&(this.Qc.xk(this),this.YF=!1)}k_t(){return this.YF}Hyt(){this.Fk||(this.Qc.Dk(this),this.Fk=!0)}Byt(){this.Fk&&(this.Qc.Nk(this),this.Fk=!1)}Uyt(){return this.Fk}W_t(){return[]}w_t(t,e){this.Qc.FF(this.h_t,t,e)}jyt(t,e){}Sg(){return null}gg(t){}Urt(t){}Krt(t,e){}Uht(t,e){if(0!==e){var i=this.Urt(t);if("number"!=typeof i)throw new Error("expected number");this.Krt(t,i+e)}}V_t(t,e,i,s){}H_t(t,...e){t.call(this,...e)}U_t(t,...e){return t.call(this,...e)}QTt(){return null}m_t(t,e,i){var s;this.$yt.j_t()&&(s=this.E_t(),(t=C33.nh(C33.Event,t,e)).Xyt=s,t.H6=s.H6,i&&Object.assign(t,i),s.dispatchEvent(t))}}}{let ValidateInternalAPIToken2=function(t){if(t!==internalApiToken)throw new Error("invalid internal API token")},C33=(ValidateInternalAPIToken=ValidateInternalAPIToken2,self.$e),internalApiToken=(C33.yq={},C33.Zat={},C33.Be()),initObjectStack=[],initObjectStack2=[],initPropertiesStack=[],originalPushInitObject=null,originalPopInitObject=null,originalGetInitObject=null,originalGetInitObject2=null,pluginsByCtor=new Map,behaviorsByCtor=new Map;C33.mx=class AddonManager extends C33.rh{constructor(t,e){super(),this.Qc=t,this.Yyt=[],this.mmt=null,this.qyt=[],this.zyt=new Map,this.Kyt=null,this.Jyt=null,this.Zyt=new Set(e)}Qyt(t){var e=t[19],i=this.Qc.Tpt(t[0]);if(!i)throw new Error("missing plugin");C33.ASt(t,i);var s=2<=e?C33.bTt:i,s=C33.nh(s,{runtime:this.Qc,Sx:t[1],PTt:t[2],Ix:t[5],Mx:t[8],DTt:t[9],$Tt:t[13],Px:t[14],yx:t[17],wx:t[18],HTt:e,KTt:2<=e?i:null});s.ZTt(),this.Yyt.push(s),pluginsByCtor.set(i,s)}tEt(){this.mmt=C33.nh(C33.yq._q,{runtime:this.Qc,Sx:!0}),this.mmt.ZTt()}eEt(t){let e=t[1],i=this.Qc.Tpt(t[0]);if(!i)throw new Error("missing behavior");this.zyt.set(i,()=>{var t=2<=e?C33.Gyt:i,t=C33.nh(t,{runtime:this.Qc,HTt:e,KTt:2<=e?i:null});t.ZTt(),this.qyt.push(t),behaviorsByCtor.set(i,t),!this.Kyt&&C33.Zat.solid&&t instanceof C33.Zat.solid?this.Kyt=t:!this.Jyt&&C33.Zat.jumpthru&&t instanceof C33.Zat.jumpthru&&(this.Jyt=t),t.e_t()})}iEt(t){var e=this.zyt.get(t);e&&(e(),this.zyt.delete(t))}static i_t(t,e=1){if(C33.mx.i_t!==originalPushInitObject)throw new Error("invalid method");1===e&&initObjectStack.push(t),initObjectStack2.push(t)}static s_t(t=1){if(C33.mx.s_t!==originalPopInitObject)throw new Error("invalid method");1===t&&initObjectStack.pop(),initObjectStack2.pop()}static tF(){if(C33.mx.tF!==originalGetInitObject)throw new Error("invalid method");if(0===initObjectStack.length)throw new Error("no init object set");return initObjectStack.at(-1)}static Cx(t){if(C33.mx.Cx!==originalGetInitObject2)throw new Error("invalid method");if(ValidateInternalAPIToken2(t),0===initObjectStack2.length)throw new Error("no init object set");return initObjectStack2.at(-1)}static sEt(t){initPropertiesStack.push(t)}static rEt(){initPropertiesStack.pop()}static OF(){if(0===initPropertiesStack.length)throw new Error("no init properties set");return initPropertiesStack.at(-1)}hEt(){for(var t of this.Yyt)t.e_t()}static Dx(t){return pluginsByCtor.get(t)||null}static Y6(t){return behaviorsByCtor.get(t)||null}vmt(){return this.mmt}nEt(){return this.Kyt}aEt(){return this.Jyt}ZF(t){return this.Zyt.has(t)}},originalPushInitObject=C33.mx.i_t,originalPopInitObject=C33.mx.s_t,originalGetInitObject=C33.mx.tF,originalGetInitObject2=C33.mx.Cx}{let C33=self.$e,allImageInfos=new Set;C33.oEt=class ImageInfo extends C33.rh{constructor(){super(),this.lEt=0,this.$W="",this.BW=0,this.uEt=0,this.cEt=0,this.FC=0,this.$C=0,this.fEt=!1,this.dEt=!1,this.CEt=null,this.pEt="",this.ZA=C33.nh(C33.Rect),this.mEt=C33.nh(C33.Xl),this.vEt="",this.SEt=new self.y5(this),allImageInfos.add(this)}ah(){this.eM(),this.CEt&&0===this.CEt.ZW()&&this.CEt.ah(),this.CEt=null,allImageInfos.delete(this),this.gEt()}static zW(){for(var t of allImageInfos)t.pEt="",t.ZA.set(0,0,0,0),t.mEt.du(t.ZA)}TEt(t){this.$W=t[0],this.BW=t[1],this.uEt=t[2],this.cEt=t[3],this.FC=t[4],this.$C=t[5],this.fEt=t[6],this.dEt=!0}_Et(t,e){if(this.CEt)throw new Error("already loaded asset");this.$W=e;var i={};return C33.ca(e)&&(i.fW="remote"),this.E5(t,i),this.CEt.mW()}yEt(t,e){if(this.CEt)throw new Error("already loaded asset");this.$W="",this.BW=e.size,this.CEt=C33.nh(C33.dW,t.CP(),{blob:e,size:this.BW,fW:"local"})}EEt(t){if(t===this)throw new Error("cannot replace with self");this.lEt++,this.eM(),this.$W=t.$W,this.BW=t.BW,this.uEt=t.uEt,this.cEt=t.cEt,this.FC=t.FC,this.$C=t.$C,this.fEt=t.fEt,this.dEt=t.dEt,this.CEt=t.CEt,this.pEt=t.pEt,this.ZA=t.ZA,this.mEt=t.mEt,this.gEt()}pW(){return this.$W}Ju(){return this.BW}IEt(){return this.uEt}AEt(){return this.cEt}nyt(){return this.fEt}eC(){return this.FC}cC(){return this.$C}MEt(){return this.CEt.eC()}REt(){return this.CEt.cC()}E5(t,e){if(this.CEt)throw new Error("already got asset");e=Object.assign({},e,{url:this.pW(),size:this.Ju()}),this.CEt=t.cW(e)}HW(){return this.CEt&&this.CEt.HW()}async j8(t,e){if(!this.CEt)throw new Error("no asset");if(this.pEt)throw new Error("already loaded texture");var i=this.lEt,t=(this.pEt="loading",await this.CEt.j8(t,e));if(this.lEt!==i)return null;if(!t)return this.pEt="",null;this.pEt="loaded",this.dEt||(this.FC=t.eC(),this.$C=t.cC(),this.dEt=!0);e=this.fEt?this.$C:this.FC,i=this.fEt?this.FC:this.$C;return this.ZA.set(this.uEt,this.cEt,this.uEt+e,this.cEt+i),this.ZA.It(t.eC(),t.cC()),this.mEt.du(this.ZA),this.fEt&&this.mEt.gu(),t}eM(){this.pEt&&(this.CEt&&this.CEt.eM(),this.pEt="",this.ZA.set(0,0,0,0),this.mEt.du(this.ZA))}v_(){return this.CEt&&"loaded"===this.pEt?this.CEt.v_():null}uR(){return this.ZA}ryt(){return this.mEt}AB(){return this.SEt}wEt(){return this.CEt}async bEt(t){t=t||await this.CEt.QW();var e=C33.Aa(this.FC,this.$C),i=e.getContext("2d");return this.fEt?(i.rotate(Math.PI/-2),i.translate(-this.$C,0),i.drawImage(t,this.uEt,this.cEt,this.$C,this.FC,0,0,this.$C,this.FC)):i.drawImage(t,this.uEt,this.cEt,this.FC,this.$C,0,0,this.FC,this.$C),e}async GEt(t){return this.vEt||(t=await this.bEt(t),t=await C33.Ma(t),this.vEt=URL.createObjectURL(t)),this.vEt}gEt(){this.vEt&&(URL.revokeObjectURL(this.vEt),this.vEt="")}}}{let C33=self.$e;C33.OEt=class AnimationInfo extends C33.rh{constructor(t){super(),this.uh=t[0],this.PEt=t[1],this.R2t=!!t[2],this.Tnt=t[3],this.LEt=t[4],this.xEt=!!t[5],this.DV=t[6],this.DEt=t[7].map(t=>C33.nh(C33.NEt,t)),this.FEt=new self.Q6(this)}static $Et(t,e){e=C33.nh(C33.OEt,[e,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return e.DEt.push(C33.NEt.$Et(t)),e}ah(){for(var t of this.DEt)t.ah();C33.xn(this.DEt)}BEt(t){for(var e of this.DEt)e.m$().E5(t)}kEt(e,i){return Promise.all(this.DEt.map(t=>t.m$().j8(e,i)))}WEt(){for(var t of this.DEt)t.m$().eM()}jc(){return this.uh}dU(){return this.DV}o$(){return this.DEt.length}u$(){return this.DEt}VEt(t){if((t=Math.floor(t))<0||t>=this.DEt.length)throw new RangeError("invalid frame");return this.DEt[t]}HEt(t,e){(e=Math.floor(e))<0?this.DEt.unshift(t):e>=this.DEt.length?this.DEt.push(t):this.DEt.splice(e,0,t)}UEt(t){if((t=Math.floor(t))<0||t>=this.DEt.length)throw new RangeError("invalid frame");this.DEt[t].ah(),this.DEt.splice(t,1)}jEt(i){for(let t=0,e=this.DEt.length;t<e;++t)if(C33.vr(this.DEt[t].D$(),i))return t;return-1}XEt(t){if("string"!=typeof t)return t;var e=this.jEt(t);if(-1===e)throw new Error("cannot find animation frame with tag "+t);return e}t$(){return this.PEt}i$(){return this.R2t}s$(){return this.Tnt}h$(){return this.LEt}a$(){return this.xEt}YEt(){return this.FEt}}}{let C33=self.$e,EMPTY_IMAGE_BLOB=(()=>{var i=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),s=new Uint8Array(i.length);for(let t=0,e=i.length;t<e;++t)s[t]=i.charCodeAt(t);return new Blob([s],{type:"image/png"})})();C33.NEt=class AnimationFrameInfo extends C33.rh{constructor(t){super(),this.qEt=C33.nh(C33.oEt),this.qEt.TEt(t),this.zEt=t[7],this.KEt=C33.nh(C33.Xo,t[8],t[9]),this.JEt=t[10].map(t=>C33.nh(C33.ZEt,this,t)),this.QEt=new Map;for(var e of this.JEt)this.QEt.set(e.jc().toLowerCase(),e);this.tIt=null;var i=t[11];6<=i.length&&(this.tIt=C33.nh(C33.Mu,i)),this.Bp=t[12]||"",this.eIt=new self.p$(this)}static $Et(t){var e=C33.nh(C33.NEt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return e.qEt.yEt(t,EMPTY_IMAGE_BLOB),e}ah(){this.tIt&&(this.tIt.ah(),this.tIt=null),this.qEt.ah(),this.qEt=null}m$(){return this.qEt}v$(){return this.zEt}g$(){return this.KEt.Jo()}_$(){return this.KEt.Qo()}O$(){return this.tIt}b$(t){return this.QEt.get(t.toLowerCase())||null}w$(t){return(t=Math.floor(t))<0||t>=this.JEt.length?null:this.JEt[t]}I$(){return this.JEt.length}D$(){return this.Bp}c$(){return this.eIt}}}{let C33=self.$e;C33.ZEt=class ImagePoint extends C33.rh{constructor(t,e){super(),this.iIt=t,this.uh=e[0],this.sIt=C33.nh(C33.Xo,e[1],e[2])}ah(){}jc(){return this.uh}rg(){return this.sIt.Jo()}ag(){return this.sIt.Qo()}rIt(){return this.sIt}}}{let C33=self.$e,C3Debugger=self.C3Debugger,IObjectClass=self.Vx,assert=self.assert;C33.Wot=class ObjectClass extends C33.rh{constructor(e,t,i){super();var s=e.Tpt(i[1]),[t,r]=(this.Qc=e,this.C_t=C33.mx.Dx(s),this.T_t=null,this.hIt=s.Instance,this.$p=t,this.DV=i[11],this.uh=i[0],this.smt=this.Qc.kft(i[14]),this.nIt=!!i[9],this.aIt=!!i[2],this.oIt=!!i[10],this.lIt=i[3].map(t=>({sid:t[0],type:t[1],name:t[2],uIt:e.kft(t[3])})),this.cIt=i[4],this.fIt=i[5],this.OTt=this.C_t._x(),this.dIt=C33.nh(C33.Event.x3),this.mH=null,e.vP().tx());if(this.CIt=C33.nh(C33.pIt,t,r),this.mIt=!0,this.vIt=null,this.SIt=null,this.gIt=-1,this.TIt=null,this._It=null,this.yIt=null,this.EIt=null,this.IIt=null,this.AIt=!1,this.MIt=null,this.RIt=i[8].map(t=>C33.wIt.F_(this,t)),this.bIt=[],this.GIt=new Map,this.OIt=new Map,this.PIt=new Set,this.LIt=new Map,this.xIt=C33.nh(C33.lct,this),this.DIt=null,this.NIt=0,this.FIt=!1,this.MIt=null,this.qEt=null,this.$It=null,this.BIt=null,this.kIt=null,this.WIt=0,this.P2t=new Map,this.L2t=new Map,this.sV=[],this.VIt=new Map,this.HIt=!0,this.C_t.Rx()&&(this.mH=C33.nh(C33.vH,this,i[12])),i[6]&&(this.qEt=C33.nh(C33.oEt),this.qEt.TEt(i[6])),i[7]){this.$It=i[7].map(t=>C33.nh(C33.OEt,t)),this.BIt=new Map,this.kIt=new Map;for(var h of this.$It)this.BIt.set(h.jc().toLowerCase(),h),this.kIt.set(h.dU(),h)}this.aIt?(this.vIt=[],this.SIt=new Set,this.gIt=this.Qc.UIt()):(this.TIt=[],this._It=new Set,this.yIt=[],this.EIt=[],this.IIt=[]);t=this.C_t.Z2t();if(t<2&&(this.T_t=C33.nh(s.jIt,this,i[15]),!(this.T_t instanceof C33.d_t)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.XIt=null,this.YIt=null,this.CY=C33.nh(C33.Event.x3),C33.mx.i_t(this,t);let n;if(n=2<=t?(n=s.jIt)||globalThis.yB:this.T_t.QTt()){if(this.XIt=new n(t<2?this:null),t<2&&!(this.XIt instanceof IObjectClass))throw new TypeError("script interface class must derive from IObjectClass");if(2<=t&&!(this.XIt instanceof globalThis.yB))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.XIt=new IObjectClass;C33.mx.s_t(t),i[13]&&(r=i[13])&&(s=r[0],t=r[1],r=r[2],this.T_t.p_t(s,t,r)),this.Qc.qIt()&&!this.aIt&&!this.oIt&&this.OTt||this.ZTt(),this.C_t.gx()&&(this.C_t.t_t(this),this.zIt(i)),this.KIt=null}static F_(t,e,i){return C33.nh(C33.Wot,t,e,i)}ah(){if(this.dIt.ah(),this.dIt=null,this.qEt&&(this.qEt.ah(),this.qEt=null),this.$It){for(var t of this.$It)t.ah();C33.xn(this.$It),this.BIt.clear(),this.kIt.clear()}this.KIt=null,this.xIt.ah(),this.xIt=null,this.P2t.clear(),this.L2t.clear(),this.MIt=null,this.Qc=null}JIt(i){for(let t=1,e=i.length;t<e;++t){var s=this.Qc.DH(i[t]);this.vIt.push(s),this.SIt.add(s),s.TIt.push(this),s._It.add(this)}}ZIt(t){this.AIt=!0,this.MIt=t}oF(){return this.AIt}BY(){return this.MIt}QIt(){let t=0;if(!this.aIt)for(var e of this.TIt)for(var i of e.tAt()){var s=i.jc().toLowerCase();this.GIt.set(s,i),this.OIt.set(s,t),this.bIt.push(i),++t}for(var r of this.tAt()){var h=r.jc().toLowerCase();this.GIt.set(h,r),this.OIt.set(h,t),this.bIt.push(r),++t}for(var n of this.bIt)this.PIt.add(n.B6().constructor);if(!this.aIt&&this.TIt.length){var a,o=this.Qc.eAt(),l=(C33.Nn(this.yIt,o,0),C33.Nn(this.EIt,o,0),C33.Nn(this.IIt,o,0),[]);let t=0,e=0,i=0;for(a of this.TIt){var u=a.xmt(),u=(this.yIt[u]=t,t+=a.iAt(),this.EIt[u]=e,e+=a.sAt(),this.IIt[u]=i,i+=a.rAt(),a.CD());if(u&&this.mH)for(var c of u.pD())l.push(c.hAt(this.mH))}this.mH&&this.mH.nAt(l)}}zIt(t){var e=this.Qc.aAt(),i=C33.nh(C33.Instance,{runtime:this.Qc,zN:this,uid:e});i.oAt(t[16],[]),this.Qc.lAt(e,i),this.sV.push(i)}qvt(){return this.T_t}uAt(){return this.oIt}x3(){return this.dIt}ZTt(){this.aIt||(this.T_t?this.T_t.ZTt():this.XIt.EB())}cAt(){return 0<this.WIt}async VY(t){this.aIt||(this.WIt++,1===this.WIt&&(this.T_t?await this.T_t.VY(t):await this.XIt.MB(this.Qc.jB().fAt())))}qY(){if(!this.aIt){if(this.WIt--,this.WIt<0)throw new Error("released textures too many times");0===this.WIt&&(this.T_t?this.T_t.qY():this.XIt.RB(this.Qc.jB().fAt()))}}jY(){if(this.aIt)throw new Error("not applicable to family");this.T_t?this.T_t.jY():this.XIt.wB()}async mq(t){this.aIt||(this.T_t?await this.T_t.mq(t):await this.XIt.bB(this.Qc.jB().fAt()))}I5(){return this.Qc}Ux(){return this.C_t}dAt(){return this.hIt}jc(){return this.uh}kft(){return this.smt}uP(){return this.$p}dU(){return this.DV}hU(){return this.aIt}jH(){return this.nIt}_x(){return this.OTt}xmt(){return this.gIt}tAt(){return this.RIt}sAt(){return this.cIt}CAt(t){return t&&this.PIt.has(t)}iAt(){return this.lIt.length}pAt(){return this.lIt.map(t=>t.sid)}mAt(e){return this.lIt.findIndex(t=>t.sid===e)}met(e){return this.lIt.findIndex(t=>t.name===e)}vAt(){return this.lIt.map(t=>t.name)}SAt(){return this.lIt.map(t=>t.uIt)}Tet(t){if((t=Math.floor(t))<0||t>=this.lIt.length)throw new RangeError("invalid instance variable index");return this.lIt[t].type}vet(t){if((t=Math.floor(t))<0||t>=this.lIt.length)throw new RangeError("invalid instance variable index");return this.lIt[t].name}rAt(){return this.fIt}gAt(){return this.bIt}Hst(t){return this.GIt.get(t.toLowerCase())||null}yet(t){t=this.OIt.get(t.toLowerCase());return void 0===t?-1:t}CD(){return this.mH}Rx(){return this.C_t.Rx()}TAt(){return this.mH&&this.mH._At()}b0t(){return this.xIt}iD(){return this.xIt.iD()}m$(){return this.qEt}$H(t){this.DIt=t}FH(){return this.DIt}BH(t){this.NIt=t}yAt(){return this.NIt}EAt(){return this.$It}IAt(){return this.$It.length}Yft(){return this.TIt}vSt(t){return this._It.has(t)}sCt(){return this.vIt}nU(t){return this.SIt.has(t)}Bmt(t){return this.EIt[t]}Lmt(t){return this.yIt[t]}Wpt(t){this.LIt.set(t.Xpt().toLowerCase(),t)}Vpt(t){return!!this.Zpt(t)}Zpt(t){t=this.LIt.get(t.toLowerCase());return t&&t.Uu()?t:null}AAt(){return this.$It}MAt(t){if(this.$It)return this.BIt.get(t.toLowerCase())||null;throw new Error("no animations")}RAt(t){if(this.$It)return this.kIt.get(t)||null;throw new Error("no animations")}wAt(t){if(this.MAt(t))throw new Error(`animation name '${t}' already exists`);t=C33.OEt.$Et(this.I5(),t);return this.$It.push(t),this.BIt.set(t.jc().toLowerCase(),t),this.kIt.set(t.dU(),t),t}bAt(t){var e=this.MAt(t);if(!e)throw new Error(`animation name '${t}' does not exist`);if(1===this.$It.length)throw new Error("cannot remove last animation");t=this.$It.indexOf(e);this.$It.splice(t,1),this.BIt.delete(e.jc().toLowerCase()),this.kIt.delete(e.dU()),e.ah()}GAt(){if(this.$It)return this.$It[0];throw new Error("no animations")}OAt(){return this.GAt().VEt(0)}PAt(){var t;return this.$It?[(t=this.OAt().m$()).eC(),t.cC()]:this.qEt?[this.qEt.eC(),this.qEt.cC()]:[100,100]}Wx(){if(this.C_t.gx())return this.sV[0];throw new Error("not a single-global plugin")}eD(){return this.sV}*instances(){yield*this.sV}*tD(){yield*this.sV,yield*this.Qc.oSt(this)}rD(){return this.sV.length}XH(t){this.sV.push(t)}LAt(){this.HIt=!0}wq(){if(this.HIt&&!this.aIt){var e=this.sV;let t=0;for(var i,s=e.length;t<s;++t)e[t].xAt(t);for(i of this.Qc.DAt())i.KN()===this&&i.xAt(t++);this.HIt=!1}}NAt(t){var e,i=this.sV;if(t<i.length)return i[t];t-=i.length;for(e of this.Qc.DAt())if(e.KN()===this){if(0===t)return e;--t}return null}iSt(t){if(t&&t.oF()&&t.KN()!==this)for(var e of t.lF())if(e.KN()===this)return e;t=this.iD().eD();return t.length?t[0]:null}Qx(t){var e=this.iD().eD();return 0<e.length?e[t.Aq()%e.length]:null}*cSt(t,e){var i=this.iD().eD(),s=i.length,r=e.iD(),h=e.iD().eD(),n=h.length;let a=t.Aq();!e.hU()&&r.yct()||(a=h.indexOf(t));e=Math.ceil(s/n),r=s%n;let o=0,l=0;l=0==r||a<r?(o=a*e,e):(o=r*e+(a-r)*(e-1),e-1);for(let t=o,e=o+l;t<e;++t)yield i[t]}uvt(t){this.T_t?.uvt(t)}cpt(){if(this.AIt&&!this.aIt){this.wq();var t,e=this.iD(),i=e.Gct(),s=e.yct(),r=this.Qc.Gft(),h=r&&r.jP()&&r.jP().Bct();for(t of this.MIt.Mq())if(t!==this){t.wq();var n=t.iD();if(n.bct(s),!s){var a,o=n.Gct();C33.xn(o);for(a of i)o.push(t.NAt(a.Aq()));if(h){var l,u=e.Oct(),c=n.Oct();C33.xn(c);for(l of u)c.push(t.NAt(l.Aq()))}}}}}pvt(t,e){for(var i of this.BY().Mq()){i=i.iD();t?C33.Ln(i.Oct(),e):C33.Ln(i.Gct(),e)}}FAt(){return this.CIt}$At(t){this.mIt=!!t}BAt(){if(this.mIt&&this.OTt){for(var t of this.sV)t.s5().kAt();for(var e of this.Qc.DAt())e.KN()===this&&e.s5().kAt();this.mIt=!1}}WAt(e,t,i){var s;if(t&&(s=this.VIt.get(t))&&(s.delete(e),0===s.size)&&this.VIt.delete(t),i){let t=this.VIt.get(i);t||(t=new Set,this.VIt.set(i,t)),t.add(e)}}VAt(){if(this.hU()){var t,e=new Set;for(t of this.vIt)for(var i of t.VAt())e.add(i);return e.values()}return this.VIt.keys()}rvt(){return this.P2t||(this.P2t=new Map),this.P2t}hvt(){return this.L2t||(this.L2t=new Map),this.L2t}HAt(){return this.CAt(C33.Zat.solid)}UAt(){return this.CAt(C33.Zat.jumpthru)}jAt(){return this.CAt(C33.Zat.NoSave)}HH(){return this.CAt(C33.Zat.Persist)}GX(){var t={instances:this.sV.map(t=>t.Sg())};return this.P2t&&this.P2t.size&&(t.ex=C33.Pa(this.P2t)),t}OX(t,i){this.P2t&&(this.P2t.clear(),this.P2t=null);var e=t.ex,s=(e&&(this.P2t=C33.La(e)),this.sV),r=t.instances;for(let t=0,e=Math.min(s.length,r.length);t<e;++t)s[t].gg(r[t]);for(let t=r.length,e=s.length;t<e;++t)this.Qc.sF(s[t]);for(let e=s.length,t=r.length;e<t;++e){var h,n=r[e];let t=null;this._x()&&!(t=this.Qc.xL().bY(n.w.l))||((h=this.Qc.UH(this.DIt||this,t,!1,0,0,!0)).gg(n),i&&i.add(h))}this.KIt=r,this.LAt()}XAt(){return this.KIt}YAt(){this.KIt=null}qAt(){for(let t=0,e=this.sV;t<e;++t)this.sV[t].qAt()}$x(){return this.XIt}DP(){return this.CY}zAt(){return this.YIt}hD(t){this.YIt=t}Zq(t){var e=this.Qc,e=e.Qq()&&!e.BP().uD();e&&C3Debugger.StartMeasuringScriptTime(),this.CY.dispatchEvent(t),e&&C3Debugger.AddScriptTime()}}}{let C33=self.$e;C33.KAt=class Container extends C33.rh{constructor(t,e){super(),this.Qc=t,this.JAt=e;for(var i of this.JAt)i.ZIt(this)}ah(){this.Qc=null}I5(){return this.Qc}$Y(){return this.JAt}Mq(){return this.JAt}Gq(){return this.JAt.some(t=>t._x())}}}{let C33=self.$e,C3Debugger=self.C3Debugger,IInstance=self.qN,originalAddonManager=C33.mx,EMPTY_ARRAY=[],nextPuid=0,savedDataMaps=new WeakMap,unsavedDataMaps=new WeakMap,FLAG_DESTROYED=1,FLAG_TILEMAP=2,FLAG_MUST_PREDRAW=4,FLAG_SOLID_ENABLED=8,FLAG_JUMPTHRU_ENABLED=16,FLAG_MUST_MITIGATE_Z_FIGHTING=32,FLAG_IS_DRAWING_WITH_EFFECTS=64;C33.Instance=class Instance extends C33.rh{constructor(t){if(C33.mx!==originalAddonManager)throw new Error("invalid addon manager");super(),this.Qc=t.runtime,this.ZAt=t.zN,this.Vtt=null,this.QAt=null,this.tMt=null,this.eMt=0,this.iMt=t.uid,this.sMt=nextPuid++,this.gvt=0,this.rMt=null;var e,i=C33.zn(t.tags),i=(0<i.length&&(this.rMt=new Set(i)),this.hMt=EMPTY_ARRAY,this.nMt=EMPTY_ARRAY,this.ZAt.gAt()),i=(0<i.length&&(this.nMt=i.map((t,e)=>C33.nh(C33.aMt,{runtime:this.Qc,k6:t,H6:this,index:e}))),this.oMt=this.ZAt.oF()?[]:null,this.lMt=-1,this.dIt=null,this.Ux());i.PS()&&(this.gvt|=FLAG_MUST_PREDRAW),i._x()&&(this.Vtt=C33.nh(C33.uMt,this,t.a7),t.cMt?this.Vtt.fMt(t.cMt):(this.Vtt.dMt(),[i,e]=this.ZAt.PAt(),this.Vtt.LM(i,e),this.KN().TAt()&&this.Vtt.n7().CMt())),t.pMt?this.mMt(t.pMt):this.vMt()}ah(){if(this.tMt&&(this.tMt.eF(),this.tMt=null),0<this.nMt.length){for(var t of this.nMt)t.ah();C33.xn(this.nMt)}this.QAt&&(this.QAt.ah(),this.QAt=null);var e=savedDataMaps.get(this),e=(e&&(e.clear(),savedDataMaps.delete(this)),unsavedDataMaps.get(this));e&&(e.clear(),unsavedDataMaps.delete(this)),this.oMt&&C33.xn(this.oMt),this.dIt&&(this.dIt.ah(),this.dIt=null),this.rMt&&this.rMt.clear(),this.rMt=null,this.Qc=null,this.ZAt=null,0<this.hMt.length&&C33.xn(this.hMt),this.Vtt&&(this.Vtt.ah(),this.Vtt=null)}mMt(t){0<t.length&&(this.hMt=[],C33.$n(this.hMt,t))}vMt(){var e=this.ZAt.iAt();if(0!==e){this.hMt=[];var i=[0,0,""];for(let t=0;t<e;++t)this.hMt.push(i[this.ZAt.Tet(t)])}}oAt(t,i){if(this.QAt)throw new Error("already got sdk instance");for(let t=0,e=this.nMt.length;t<e;++t)this.nMt[t].oAt(i?i[t]:null);if(this.Ux().Z2t()<2){if(this.QAt=C33.nh(this.ZAt.dAt(),this,t),!(this.QAt instanceof C33.S_t))throw new Error("sdk type must derive from SDKInstanceBase");!this.Ux()._x()&&this.ZAt.zAt()&&this.QL()}else{var e=this.Ux().QTt();this.SMt(e.Instance,t)}}O6(){return this.QAt??this.tMt}s5(){return this.Vtt}I5(){return this.Qc}pL(){return this.lMt}dF(){var t=this.lMt;return-1===t?this.I5().pL():t}mL(t){((t=+t)<0||!isFinite(t))&&(t=0),this.lMt=t,this.KN().TAt()&&this.Qc.gMt(this,!0)}pF(){this.lMt=-1,this.KN().TAt()&&this.Qc.gMt(this,!1)}gX(){return this.Qc.TMt(this)}x3(){return this.dIt||(this.dIt=C33.nh(C33.Event.x3)),this.dIt}Yg(t){this.QAt?this.QAt.Yg(t):this.tMt.NB(this.Qc.jB().fAt())}ZTt(t){this.QAt.ZTt(t)}_Mt(){this.gvt|=FLAG_TILEMAP}yMt(){return 0!=(this.gvt&FLAG_TILEMAP)}EMt(){this.gvt|=FLAG_DESTROYED}dk(){return 0!=(this.gvt&FLAG_DESTROYED)}PS(){return 0!=(this.gvt&FLAG_MUST_PREDRAW)||this.QAt.PS()}IMt(){this.gvt|=FLAG_MUST_MITIGATE_Z_FIGHTING}uX(){return 0!=(this.gvt&FLAG_MUST_MITIGATE_Z_FIGHTING)}AMt(){return 0!=(this.gvt&FLAG_SOLID_ENABLED)}MMt(t){t?this.gvt|=FLAG_SOLID_ENABLED:this.gvt&=~FLAG_SOLID_ENABLED}RMt(){return 0!=(this.gvt&FLAG_JUMPTHRU_ENABLED)}wMt(t){t?this.gvt|=FLAG_JUMPTHRU_ENABLED:this.gvt&=~FLAG_JUMPTHRU_ENABLED}bMt(){return 0!=(this.gvt&FLAG_IS_DRAWING_WITH_EFFECTS)}GMt(t){t?this.gvt|=FLAG_IS_DRAWING_WITH_EFFECTS:this.gvt&=~FLAG_IS_DRAWING_WITH_EFFECTS}OMt(t,e){t<<=16,e?this.gvt|=t:this.gvt&=~t}PMt(t){return 0!=(this.gvt&t<<16)}tyt(){return this.QAt.tyt()}eyt(){return this.QAt.eyt()}iyt(){return this.QAt.iyt()}syt(){return this.QAt.syt()}hyt(){return this.QAt.hyt()}Zvt(t){return this.QAt.Zvt(t)}KN(){return this.ZAt}aX(){return this.QAt.aX()}lSt(t){return t.hU()?t.nU(this.KN()):this.KN()===t}LMt(s,t,e){var i=(t,e)=>{var e=e||t.KN(),i=s.get(e);i?i.add(t):s.set(e,new Set([t]))};if(i(this,t),this.oF())for(var r of this.lF())i(r);if(e)for(var h of this.j7())i(h)}xMt(){if(!this.Ux().Ox())throw new Error("object does not support scene graph")}K7(){return null!==this.N7()}N7(){var t=this.s5();return(t=t&&t.N7())?t.hB():null}B7(){var t=this.s5();return(t=t&&t.B7())?t.hB():null}*k7(){var t=this.s5();if(t)for(var e of t.k7())yield e.hB()}DMt(t){if(t)for(var e of this.children())if(e===t)return!0;return!1}xX(){var t=this.s5();return!!t&&t.xX()}NMt(t){var e=this.s5();if(!e)return[];let i=t.jc();return e.$q().map(t=>t.hB()).filter(t=>t.KN().jc()===i)}$q(){var t=this.s5();return t?t.$q().map(t=>t.hB()):[]}*children(){var t=this.s5();if(t)for(var e of t.children())yield e.hB()}*j7(){var t=this.s5();if(t)for(var e of t.j7())yield e.hB()}V7(){var t=this.s5();return t?t.V7():0}FMt(){return[...this.k7()].length}uSt(){var t=this.s5();return t?t.uSt():0}U7(t){var e=this.s5();return(e=e&&e.U7(t))?e.hB():null}$Mt(){var t,e=this.s5();return e&&(t=e.N7())?t.BMt(e):NaN}kMt(t){for(var e of this.s5().$q())if(e.hB().uF()===t)return!0;return!1}Y7(t,e){this.xMt(),t.xMt(),this.s5().Y7(t.s5(),e||{})}q7(t){var e=this.s5();e&&e.q7(t.s5())}p6(){var t=this.s5();return!!t&&t.p6()}cq(){var t=this.s5();if(t){t=t.WMt();if(t)for(var e of t){var i=this.Qc.ZL(e[2]);i&&(e=e[3],this.Y7(i,{Z7:!!(e>>0&1),t6:!!(e>>1&1),i6:!!(e>>2&1),r6:!!(e>>3&1),n6:!!(e>>4&1),C6:!!(e>>5&1),o6:!!(e>>6&1),u6:!!(e>>7&1),f6:!!(e>>8&1)}))}}}fq(t,e){t=t.get(this);if(t)for(var i of t.sceneGraphJson.children){var s=e.get(i.index);s&&(i=i.flags,this.Y7(s,{Z7:!!(i>>0&1),t6:!!(i>>1&1),i6:!!(i>>2&1),r6:!!(i>>3&1),n6:!!(i>>4&1),C6:!!(i>>5&1),o6:!!(i>>6&1),u6:!!(i>>7&1),f6:!!(i>>8&1)}))}}fF(){var t=this.Qc.VMt();return t?t.Hot(this):""}oF(){return null!==this.oMt}Rq(t){this.oMt.push(t)}nF(){return this.oMt}HMt(t){return!!this.UMt(t)}UMt(t){var e,i=this.lF();if(null===i||0===i.length)return!1;for(e of i)if(e.KN()===t)return e;return null}lF(){return this.oMt}p1t(){for(var t of this.lF())t.KN().iD().Pct(t)}cvt(){for(var t of this.lF())t.KN().iD().Rct(t)}fvt(t){for(var e of this.lF())e.KN().iD().Gct()[t]=e}Cvt(){for(var t of this.lF())t.KN().iD().wct(t)}dvt(t){for(var e of this.lF())e.KN().iD().Oct()[t]=e}Ux(){return this.ZAt.Ux()}xAt(t){this.eMt=t}Aq(){return this.ZAt.wq(),this.eMt}uF(){return this.iMt}jMt(){return this.sMt}XMt(t){t?this.gF(new Set(t)):this.rMt=null}gF(t){if(0===t.size)this.rMt=null;else{this.rMt?this.rMt.clear():this.rMt=new Set;for(var e of t)this.rMt.add(e)}}vF(){return this.rMt??new Set}SSt(){return Array.from(this.vF()).join(" ")}gSt(t){t=Math.floor(t);for(var e of this.vF()){if(0===t)return e;--t}return""}Vst(){return this.nMt}YMt(t){if(t)for(var e of this.nMt)if(e.B6()instanceof t)return e;return null}Qat(t){return(t=t&&this.YMt(t))?t.O6():null}Wst(i){var s=this.nMt;for(let t=0,e=s.length;t<e;++t)if(s[t].V6().dU()===i)return t;return-1}qMt(){return this.hMt}vAt(){return this.ZAt.vAt()}zMt(){return this.hMt.length}Qrt(t){var e=this.hMt;if((t|=0)<0||t>=e.length)throw new RangeError("invalid instance variable");return e[t]}Omt(t){return this.hMt[t]}KMt(t){var e=this.hMt[t];return 0===this.ZAt.Tet(t)?!!e:e}tht(t,e){var i=this.hMt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");switch(this.ZAt.Tet(t)){case 0:i[t]=e?1:0;break;case 1:i[t]="number"==typeof e?e:parseFloat(e);break;case 2:i[t]="string"==typeof e?e:e.toString();break;default:throw new Error("unknown instance variable type")}}jht(t,e){if(0!==e){var i=this.hMt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");var s=i[t];if("number"!=typeof s)throw"boolean"==typeof s?new Error("can not set offset of boolean variable"):"string"==typeof s?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof e?e:parseFloat(e)}}rvt(){var t=savedDataMaps.get(this);return t||(t=new Map,savedDataMaps.set(this,t)),t}hvt(){var t=unsavedDataMaps.get(this);return t||(t=new Map,unsavedDataMaps.set(this,t)),t}JMt(t){var e,i=this.KN();if(i.DP().W3(t))return!0;for(e of i.Yft())if(e.DP().W3(t))return!0;return!!this.Qc.DP().W3(t)}lD(){var t,e=new Set,i=(e.add(this),this.s5());if(i&&i.xX())for(var s of this.j7())if(e.add(s),s.oF())for(var r of s.lF())e.add(r);if(this.oF())for(var h of this.lF())e.add(h);for(t of e.values())t.pq()}ZMt(){this.ZAt.zAt()&&this.QL();for(var t of this.nMt)t.Wyt()}QMt(){this.ZMt()}pq(){if(this.ZMt(),this.JMt("instancecreate")){var t,e=this.KN(),i=new C33.Event("instancecreate");i.H6=this.QL(),e.Zq(i);for(t of e.Yft())t.Zq(i);this.Qc.Zq(i)}this.Qc.LF(this.Ux().edt().Tq.Jgt,this,null)}tRt(){this.Qc.LF(this.Ux().edt().Tq.Zgt,this,null)}eRt(t){if(this.tMt&&((i=new C33.Event("destroy")).iRt=t,this.Zq(i)),this.JMt("instancedestroy")){var e,i=this.KN(),s=new C33.Event("instancedestroy");s.H6=this.QL(),s.iRt=t,i.Zq(s);for(e of i.Yft())e.Zq(s);this.Qc.Zq(s)}}sRt(){return this.QAt?this.QAt.W_t():this.tMt.qF()}Sg(t="full",e=null){var i={},s=("full"===t?i.uid=this.uF():i.c3=!0,this.vF());if(0<s.size&&(i.tags=Array.from(s)),"visual-state"!==t){s=savedDataMaps.get(this);if(s&&s.size&&(i.ex=C33.Pa(s)),-1!==this.pL()&&(i.mts=this.pL()),0<this.ZAt.iAt()){var r={},h=this.ZAt.pAt();for(let t=0,e=this.hMt.length;t<e;++t)r[h[t].toString()]=this.hMt[t];i.ivs=r}if(this.nMt.length){var n,a={};for(n of this.nMt){var o=n.Sg(t);o&&(a[n.V6().dU().toString()]=o)}i.behs=a}}this.Vtt&&(i.w=this.Vtt.GX(t,e));s=this.QAt?this.QAt.Sg():this.tMt.zF();return s&&(i.data=s),i}Kz(t="full",e){this.Vtt&&this.Vtt.Kz(t)}Zz(t,e="full",i=null){this.Vtt&&this.Vtt.Zz(t,e,i)}rRt(t,e="full",i=null){this.Vtt&&this.Vtt.rRt(t,e,i)}qAt(){this.Ux()._x()&&this.Vtt.qAt()}gg(e,t="full",i){if("full"===t)this.iMt=e.uid;else if(!e.c3)return;if(this.XMt(e.tags),"visual-state"!==t){let t=savedDataMaps.get(this);t&&(t.clear(),savedDataMaps.delete(this));var s=e.ex,s=(s&&(t=C33.La(s),savedDataMaps.set(this,t)),this.lMt=e.hasOwnProperty("mts")?e.mts:-1,e.ivs);if(s)for(var[r,h]of Object.entries(s)){r=parseInt(r,10),r=this.ZAt.mAt(r);if(!(r<0||r>=this.hMt.length)){let t=h;null===t&&(t=NaN),this.hMt[r]=t}}}if(this.Ux()._x()&&(s=e.w)&&(l=s.l,this.Vtt.r5().dU()!==l&&((l=(n=this.Vtt.r5()).$L().bY(l))?(this.Vtt.o5(l),n.zH(this,!0),l.XH(this,!0),l.l5(this),this.Vtt.o7()):"full"===t&&this.Qc.sF(this)),this.Vtt.OX(s,t)),"visual-state"!==t){var n=e.behs;if(n)for(var[a,o]of Object.entries(n)){a=parseInt(a,10),a=this.Wst(a);a<0||a>=this.nMt.length||this.nMt[a].gg(o,t)}}var l=e.data;l&&(this.QAt?this.QAt.gg(l,t):this.tMt.KF(l))}QL(){return this.tMt||this.SMt()}j_t(){return!!this.tMt}SMt(t,e){var i=this.Vtt?t?self.GB:self.M6:t?self.EF:self.qN,t=t||this.QAt.QTt(),s=this.ZAt.zAt(),r=s||t||i,h=this.Ux().Z2t();if(C33.mx.i_t(this,h),C33.mx.sEt(e),this.tMt=new r,C33.mx.rEt(),C33.mx.s_t(h),t&&!(this.tMt instanceof i))throw new TypeError(`script interface class '${t.name}' does not extend the right base class '${i.name}'`);if(s&&!(this.tMt instanceof(t||i)))throw new TypeError(`setInstanceClass(): class '${s.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`);return this.tMt}JN(t){if(0!==this.hMt.length){var i={},s=this.ZAt.SAt();for(let t=0,e=s.length;t<e;++t)i[s[t]]={configurable:!1,enumerable:!0,get:C33.Instance.prototype.KMt.bind(this,t),set:C33.Instance.prototype.tht.bind(this,t)};var e=Object.create(Object.prototype,i);t.hRt={value:e,writable:!1}}}ZN(t){var e=this.nMt;if(0!==e.length){var i,s={};for(i of e)s[i.V6().kft()]={value:i.E_t(),writable:!1};e=Object.create(Object.prototype,s);t.e1t={value:e,writable:!1}}}Zq(t){var e,i;this.j_t()&&(e=this.QL(),t.H6=e,(i=(i=this.Qc).Qq()&&!i.BP().uD())&&C3Debugger.StartMeasuringScriptTime(),e.dispatchEvent(t),i)&&C3Debugger.AddScriptTime()}}}{let C33=self.$e;C33.kq=class SceneGraphInfo extends C33.rh{constructor(t){super(),this.Mg=t,this._1t=null,this.nRt=[],this.aRt=t.eC(),this.oRt=t.cC(),this.lRt=1,this.uRt=1,this.cRt=0,this.fRt=1,this.dRt=t.Cb(),this.CRt=null,this.pRt=null,this.mRt=NaN}ah(){this._1t=null,this.CRt=null,this.pRt=null,this.mRt=NaN,C33.xn(this.nRt)}vRt(t){this.fRt=this.Mg.Cb(),this.dRt=this.fRt,this._1t=t,this.cRt=t?t.yD():0}N7(){return this._1t}xX(){return 0<this.nRt.length}$q(){return this.nRt}SRt(){this.xX()&&1!==this.nRt.length&&(this.pRt?this.nRt.sort((t,e)=>{t=this.pRt.get(t.hB()),e=this.pRt.get(e.hB());return C33.ds(t)&&C33.ds(e)?t-e:0}):this.nRt.sort((t,e)=>{t=t.uht().gRt(),e=e.uht().gRt();return C33.ds(t)&&C33.ds(e)?t-e:0}))}gRt(){return this.mRt}cht(){return this.lRt}TRt(t){this.lRt=t}dht(){return this.uRt}_Rt(t){this.uRt=t}_ht(){return this.dRt}eSt(){return this.fRt}yRt(t){this.fRt=t}lht(){return 0===this.aRt?Number.EPSILON:this.aRt}fht(){return 0===this.oRt?Number.EPSILON:this.oRt}ERt(){if(this.Mg.s6()){var e=this._1t;let t=e.eC();var i=e.uht().lht();if(0===t&&(t=Number.EPSILON),i===Number.EPSILON&&t===Number.EPSILON)return 1;if(i===Number.EPSILON&&t!==Number.EPSILON){e=e.hB().O6();if(e.Det())return 1+t/e.xet()}return t/i}return 1}IRt(){if(this.Mg.h6()){var e=this._1t;let t=e.cC();var i=e.uht().fht();if(0===t&&(t=Number.EPSILON),i===Number.EPSILON&&t===Number.EPSILON)return 1;if(i===Number.EPSILON&&t!==Number.EPSILON){e=e.hB().O6();if(e.Det())return 1+t/e.Fet()}return t/i}return 1}ARt(){return this.cRt}MRt(){return{sw:this.aRt,sh:this.oRt,sx:this.lRt,sy:this.uRt,psa:this.cRt,oo:this.fRt,so:this.dRt,pi:this.Mg.hB().$Mt()}}GX(t,e=null){var i=this.MRt();return e&&e.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.RRt(t),c:this.wRt(t)})}bRt(t){let e="";return t.Q7()&&(e+="x"),t.e6()&&(e+="y"),t.s6()&&(e+="w"),t.h6()&&(e+="h"),t.a6()&&(e+="a"),t.l6()&&(e+="z"),t.p6()&&(e+="d"),t.c6()&&(e+="o"),t.d6()&&(e+="v"),e}RRt(t){return!this._1t||!this._1t.hB()||this._1t.hB().dk()?null:this.GRt(this._1t,this.Mg,t)}wRt(e){return this.nRt.map(t=>this.GRt(t,t,e)).filter(t=>t)}GRt(t,e,i){var s,t=t.hB();return t&&t.dk()?null:((s={}).uid=t.uF(),s.f=this.bRt(e),s.offsets=e.ORt(),s.data=C33.kq.PRt(t),s.oci=t.KN().uP(),"state"===i?(s.inst=t.Sg("full",{selfOnly:!0}),s.instIndex=NaN):(s.instIndex=t.KN().eD().indexOf(t),s.inst=null),s)}OX(t){this.aRt=t.sw,this.oRt=t.sh,this.lRt=t.sx,this.uRt=t.sy,this.cRt=t.psa,this.fRt=t.oo,this.dRt=t.so,this.mRt=C33.ds(t.pi)?t.pi:NaN}LRt(t,e){if(!t&&!e&&this.CRt)for(var i of this.CRt)i.dk()||i.K7()||i.I5().sF(i);this.CRt=t,this.pRt=e}Zz(t,e){var i,s,r,h,n=this.Mg,a=n.I5(),o=new Set,l=(t.p&&!this._1t&&(i=t.p.uid,i=a.ZL(i),e?.ySt,i?(s=i.s5(),i.DMt(n.hB())?this._1t=s:(i.kMt(n.hB().uF())?a.sF(n.hB()):i.Y7(n.hB(),this.xRt(t.p.f)),o.has(n)||(n.DRt(t.p.offsets),this.NRt(i,t.p,e)),o.add(n),i.s5().uht().SRt())):C33.ds(t.p.oci)&&(s=a.DH(t.p.oci),a.vmt(),i=a.nD(s,n.r5(),0,0,!0),e?.ySt,i)&&(s=this.FRt(t.p,a),i.gg(s),i.s5().r5().aD(i),i.Y7(n.hB(),this.xRt(t.p.f)),i.s5().uht().SRt())),[]);for(r of t.c){var u=r.uid,u=a.ZL(u);u&&l.push(u)}let c=0;for(h of t.c){var f=h.uid,f=a.ZL(f);if(e?.ySt,f){if(this.CRt){if(this.CRt.includes(f)){var d=f;if(d.KN()!==f.KN()){c++;continue}if(d.dk()){c++;continue}var C=t.c[c];if(!e?.ySt&&this.$Rt(d,l,n)){this.BRt(c,C,n,o,e),c++;continue}if(d.K7()&&d.N7()!==n.hB()){var p=this.kRt(C,e);this.WRt(p,C,o,e),c++;continue}this.WRt(d.s5(),C,o,e,!0),c++;continue}if(this.CRt[c]){p=this.CRt[c];if(p.KN()!==f.KN()){c++;continue}if(p.dk()){c++;continue}d=t.c[c];if(!e?.ySt&&this.$Rt(p,l,n)){this.BRt(c,d,n,o,e),c++;continue}if(p.K7()&&p.N7()!==n.hB()){C=this.kRt(d,e);this.WRt(C,d,o,e),c++;continue}this.WRt(p.s5(),d,o,e,!0),c++;continue}}var m=f.KN();if(this.VRt(l,m)===n.hB().NMt(m).length){m=n.hB().U7(c);m&&(v=m.s5())&&(o.has(v)||(v.DRt(h.offsets),this.NRt(m,h,e)),o.add(v)),c++;continue}if(f.K7()&&f.N7()!==n.hB()){m=this.kRt(h,e);this.WRt(m,h,o,e),c++;continue}this.WRt(f.s5(),h,o,e)}else if(this.CRt&&this.CRt[c]){var v=this.CRt[c],m=a.DH(this.HRt(h));if(v.KN()!==m){c++;continue}if(v.dk()){c++;continue}f=t.c[c];if(!e?.ySt&&this.$Rt(v,l,n)){this.BRt(c,f,n,o,e),c++;continue}if(v.K7()&&v.N7()!==n.hB()){var S=this.kRt(f,e);this.WRt(S,f,o,e),c++;continue}this.WRt(v.s5(),f,o,e)}else{S=this.kRt(h,e);this.WRt(S,h,o,e)}c++}}$Rt(t,e,i){t=t.KN();return this.VRt(e,t)===i.hB().NMt(t).length}BRt(t,e,i,s,r){i=i.hB().U7(t,e);i&&(t=i.s5())&&(s.has(t)||(t.DRt(e.offsets),this.NRt(i,e,r)),s.add(t))}xRt(t){var e={};return e.Z7=t.includes("x"),e.t6=t.includes("y"),e.i6=t.includes("w"),e.r6=t.includes("h"),e.n6=t.includes("a"),e.o6=t.includes("z"),e.C6=t.includes("d"),e.u6=t.includes("o"),e.f6=t.includes("v"),e}HRt(t){return C33.ds(t.oci)?t.oci:t[1]}kRt(e,i){if(C33.ds(e.oci)){var s,r=this.Mg,h=r.I5();let t;if(t=e.data?h.UH(e.data,r.r5(),!1,0,0,!1,!0):(s=h.DH(e.oci),h.nD(s,r.r5(),0,0,!0)),i?.ySt,t)return s=this.FRt(e,h),t.gg(s),(r=t.s5()).r5().aD(t,!0),r}}WRt(t,e,i,s,r=!0){this.Mg.Y7(t,this.xRt(e.f))&&r&&(i.has(t)||(t.DRt(e.offsets),this.NRt(t.hB(),e,s)),i.add(t)),this.SRt()}NRt(t,e,i){e=this.FRt(e,this.Mg.I5());e&&((e=JSON.parse(JSON.stringify(e))).w=null,t.gg(e))}VRt(t,e){return t.filter(t=>t.KN().jc()===e.jc()).length}FRt(t,e){return C33.ds(t.instIndex)?e.DH(t.oci).XAt()[t.instIndex]:C33.Is(t.inst)?JSON.parse(t.inst):t.inst||void 0}static PRt(t){if(!(i=t.s5().r5().kH(t.uF())))return null;var e,i=JSON.parse(JSON.stringify(i)),s=[];for(e of[...t.$q()]){var r=e.s5();s.push([r.$L().dU(),r.r5().uP(),e.uF(),C33.kq.Bq(r),e.KN().oF()?1:0,r.h5(),C33.kq.PRt(e)])}return C33.Bs(i[0][14])?i[0][14][1]=s:(i[0][14]=[],i[0][14][0]=C33.kq.URt(),i[0][14][1]=s,i[0][14][2]=t.s5().h5()),i}static Bq(t){var e=0;return(e|=Number(t.d6())<<8)|Number(t.c6())<<7|Number(t.l6())<<6|Number(t.p6())<<5|Number(t.a6())<<4|Number(t.h6())<<3|Number(t.s6())<<2|Number(t.e6())<<1|Number(t.Q7())<<0}static URt(t){var e=0;e|=256;return 511}}}{let C33=self.$e,glMatrix=self.pe,vec32=glMatrix.Ee,vec42=glMatrix.Ie,tempRect=C33.nh(C33.Rect),tempQuad=C33.nh(C33.Xl),bboxChangeEvent=C33.nh(C33.Event,"bboxchange",!1),tempColor=C33.nh(C33.Fa,0,0,0,0),tempCollisionPoly=C33.nh(C33.Mu),DEFAULT_COLOR=C33.nh(C33.Fa,1,1,1,1),DEFAULT_RENDER_CELLS=C33.nh(C33.Rect,0,0,-1,-1),DEFAULT_COLLISION_CELLS=C33.nh(C33.Rect,0,0,-1,-1),VALID_SET_MESH_POINT_MODES=new Set(["absolute","relative"]),EMPTY_ARRAY=[],enableUpdateRendererStateGroup=!0,FLAG_IS_VISIBLE=1,FLAG_BBOX_CHANGED=2,FLAG_ENABLE_BBOX_CHANGED_EVENT=4,FLAG_COLLISION_ENABLED=8,FLAG_COLLISION_CELL_CHANGED=16,FLAG_SOLID_FILTER_INCLUSIVE=32,FLAG_HAS_ANY_ACTIVE_EFFECT=64,FLAG_IS_ROTATABLE=128,FLAG_DESTROYED=256,FLAG_DESTROY_WITH_PARENT=512,FLAG_TRANSFORM_WITH_PARENT_X=1024,FLAG_TRANSFORM_WITH_PARENT_Y=2048,FLAG_TRANSFORM_WITH_PARENT_W=4096,FLAG_TRANSFORM_WITH_PARENT_H=8192,FLAG_TRANSFORM_WITH_PARENT_A=16384,FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION=32768,FLAG_TRANSFORM_WITH_PARENT_OPACITY=1<<22,FLAG_TRANSFORM_WITH_PARENT_VISIBILITY=1<<23,MASK_ALL_SCENE_GRAPH_FLAGS=FLAG_DESTROY_WITH_PARENT|FLAG_TRANSFORM_WITH_PARENT_X|FLAG_TRANSFORM_WITH_PARENT_Y|FLAG_TRANSFORM_WITH_PARENT_W|FLAG_TRANSFORM_WITH_PARENT_H|FLAG_TRANSFORM_WITH_PARENT_A|FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION|FLAG_TRANSFORM_WITH_PARENT_OPACITY|FLAG_TRANSFORM_WITH_PARENT_VISIBILITY,FLAG_MESH_CHANGED=65536,FLAG_PHYSICS_BODY_CHANGED=1<<17,FLAG_SIN_COS_ANGLE_CHANGED=1<<18,FLAG_USE_POINTS_SHADER_PROGRAM=1<<19,FLAG_DRAW_BACK_FACE_ONLY=1<<20,FLAG_DRAW_NON_BACK_FACES_ONLY=1<<21,FLAG_BLEND_MODE_BIT_OFFSET=26,FLAG_BLEND_MODE_MASK=31<<FLAG_BLEND_MODE_BIT_OFFSET,sceneGraphExportDataMap=new WeakMap,sceneGraphZIndexMap=new WeakMap;C33.uMt=class WorldInfo extends C33.rh{constructor(t,e){super(),this.Mi=t,this.uct=t.KN(),this.Qc=t.I5(),this.jRt=e,this.uct.WAt(this,null,e),this.XRt=-1,this.YRt=-1,this.gvt=FLAG_IS_VISIBLE|FLAG_BBOX_CHANGED|FLAG_COLLISION_ENABLED|FLAG_COLLISION_CELL_CHANGED|FLAG_MESH_CHANGED|FLAG_PHYSICS_BODY_CHANGED,this.uct.Ux().Ax()&&(this.gvt|=FLAG_IS_ROTATABLE),this.Yo=NaN,this.qo=NaN,this.jS=NaN,this.qRt=NaN,this.zRt=NaN,this.ZT=NaN,this.Wa=NaN,this.KRt=NaN,this.JRt=NaN,this.ZRt=NaN,this.QRt=NaN,this.twt=C33.nh(C33.Rect),this.ewt=C33.nh(C33.Xl),this.iwt=DEFAULT_COLLISION_CELLS,this.swt=DEFAULT_RENDER_CELLS,this.rwt=null,this.hwt=null,this.nwt=null,this.US=DEFAULT_COLOR,this.awt=DEFAULT_COLOR,this.owt=null,this.lwt=null,this.Mi.KN().TAt()&&(this.lwt=C33.nh(C33.uwt,this.Mi,this)),this.cwt=null,this.CRt=null,this.pRt=null,this.fwt=-1,this.dwt=null}EMt(){this.gvt|=FLAG_DESTROYED}ah(){var t;if(this.uct.WAt(this,this.jRt,null),this.owt&&(this.Qc.RS().z2(this.owt),this.owt=null),this.rwt=null,this.hwt&&(this.hwt.Cwt.ah(),this.hwt=null),this.nwt&&(this.nwt.clear(),this.nwt=null),this.g6(),this.lwt&&this.lwt.ah(),this.K7()&&this.N7().q7(this),this.xX())for(t of[...this.$q()])this.q7(t);this.pwt(),this.mwt(),sceneGraphExportDataMap.delete(this),sceneGraphZIndexMap.delete(this),this.Mi=null,this.uct=null,this.Qc=null,this.jRt=null}fMt(t){if(enableUpdateRendererStateGroup=!1,this.l7(t[0],t[1]),this.ug(t[2]),this.LM(t[3],t[4]),this.ZT=0,this.Ax()?this._D(t[6]):this.Wa=0,tempColor.Do(t[7]),this.vwt(tempColor),this.Eht(t[8]),this.Aht(t[9]),this.YS(t[10]),this.lwt&&this.lwt.Swt(t[12]),t[14]&&sceneGraphExportDataMap.set(this,{gwt:t[14][1],Twt:t[14][2]}),t[15]){var e=t[15],s=(this.v6(e[0],e[1]),this.I6()),r=e[2];for(let i=0,t=r.length;i<t;++i){var h=r[i];for(let t=0,e=h.length;t<e;++t){var n=h[t],a=s.jg(t,i);a.hg(n[0]),a.og(n[1]),a.ug(n[2]),a.dg(n[3]),a.pg(n[4])}}}var i,o,l;t[16]&&(e=t[16][0],o=!(i=!!(t=t[16][1])),l=this.Qc.VMt(),i&&l&&l.Vot(this.hB(),t),o)&&l&&l.Vot(this.hB(),e),enableUpdateRendererStateGroup=!0,this._wt()}dMt(){this.Yo=0,this.qo=0,this.jS=0,this.qRt=0,this.zRt=0,this.ZT=0,this.Wa=0,this.KRt=0,this.JRt=1,this.ZRt=0,this.QRt=0,this._wt()}I5(){return this.Qc}KN(){return this.uct}hB(){return this.Mi}ywt(){return this.a6()?this.Ewt(this.N7().Iwt()-this.cwt.ARt()):0}hg(t){var e,i,s;t=+t,this.Q7()?(e=this.cwt,i=t-this.rg(),0==(s=-this.ywt())?this.Yo+=i/e.ERt():(this.Yo+=Math.cos(s)*i/e.ERt(),this.e6()&&(this.qo+=Math.sin(s)*i/e.IRt()))):this.Yo=t}hht(t,e=!1){t=+t,!e&&this.Q7()?this.hg(this.rg()+t):this.Yo+=t}rg(){if(this.Q7()){let t=this.Yo;var e=this.cwt,i=this.N7(),s=this.ywt();return 0===s?t*=e.ERt():(t=t*e.ERt()*Math.cos(s),this.e6()&&(t-=this.qo*e.IRt()*Math.sin(s))),i.rg()+t}return this.Yo}og(t){var e,i,s;t=+t,this.e6()?(e=this.cwt,i=t-this.ag(),0==(s=-this.ywt())?this.qo+=i/e.IRt():(this.Q7()&&(this.Yo-=Math.sin(s)*i/e.ERt()),this.qo+=Math.cos(s)*i/e.IRt())):this.qo=t}nht(t,e=!1){t=+t,!e&&this.e6()?this.og(this.ag()+t):this.qo+=t}ag(){if(this.e6()){let t=this.qo;var e=this.cwt,i=this.N7(),s=this.ywt();return 0===s?t*=e.IRt():(t=t*e.IRt()*Math.cos(s),this.Q7()&&(t+=this.Yo*e.ERt()*Math.sin(s))),i.ag()+t}return this.qo}l7(t,e){var i,s,r,h,n,a,o;t=+t,e=+e,this.Awt()?(i=this.Q7(),s=this.e6(),r=this.cwt,h=t-this.rg(),n=e-this.ag(),0==(o=-this.ywt())?(i?this.Yo+=h/r.ERt():this.Yo=t,s?this.qo+=n/r.IRt():this.qo=e):(a=Math.sin(o),o=Math.cos(o),i?this.Yo+=s?(o*h-a*n)/r.ERt():o*h/r.ERt():this.Yo=t,s?this.qo+=i?(a*h+o*n)/r.IRt():o*n/r.IRt():this.qo=e)):(this.Yo=t,this.qo=e)}Mwt(){return[this.rg(),this.ag()]}f7(t,e){t=+t,e=+e,this.Awt()?this.l7(this.rg()+t,this.ag()+e):(this.Yo+=t,this.qo+=e)}Jvt(t,e){return this.rg()===t&&this.ag()===e}ug(t){t=+t,this.l6()&&(t-=this.N7().lg()),this.jS!==t&&(this.jS=t,this.Rwt(),t=this.r5(),0!==this.jS&&t.ZH(),t.l5(this))}Rwt(){if(this._wt(),this.xX()){var i=this.$q();for(let t=0,e=i.length;t<e;t++){var s=i[t];s.l6()&&s.Rwt()}}}Mht(t){this.ug(this.lg()+t)}lg(){return this.l6()?this.N7().lg()+this.jS:this.jS}C7(){return this.r5().lg()+this.lg()}oC(t){var e;t=+t,this.s6()?0===(e=this.eC())?this.qRt=Number.EPSILON:this.qRt*=t/e:this.qRt=t,this.wwt()}LC(t,e){t=+t,!e&&this.s6()?this.oC(this.eC()+t):this.qRt+=t,this.wwt()}eC(){var t,e;return this.s6()?(e=(t=this.N7()).eC(),t.uht().lht()===Number.EPSILON?(this.uht().lht()+e)*this.qRt:e*this.qRt):this.qRt}iC(t){var e;t=+t,this.h6()?0===(e=this.cC())?this.zRt=Number.EPSILON:this.zRt*=t/e:this.zRt=t,this.wwt()}Cht(t,e){t=+t,!e&&this.h6()?this.iC(this.cC()+t):this.zRt+=t,this.wwt()}cC(){var t,e;return this.h6()?(e=(t=this.N7()).cC(),t.uht().fht()===Number.EPSILON?(this.uht().fht()+e)*this.zRt:e*this.zRt):this.zRt}LM(t,e){var i;t=+t,e=+e,this.s6()?0===(i=this.eC())?this.qRt=Number.EPSILON:this.qRt*=t/i:this.qRt=t,this.h6()?0===(i=this.cC())?this.zRt=Number.EPSILON:this.zRt*=e/i:this.zRt=e,this.wwt()}Ju(){return[this.eC(),this.cC()]}lX(){return this.ZT}bwt(t){if(t<0)throw new RangeError("invalid depth");this.ZT=t}Gwt(){var t;return this.K7()?(t=this.cwt,Math.min(t.ERt(),t.IRt())):1}Ax(){return 0!=(this.gvt&FLAG_IS_ROTATABLE)}_D(t){t=+t,this.Ax()&&(this.a6()&&(t-=this.N7().yD()),t=C33.Ch(t),this.Wa!==t)&&(this.Wa=t,this.wwt())}pht(t){0!==(t=+t)&&this.Ax()&&(this.Wa=C33.Ch(this.Wa+t),this.wwt())}wwt(){if(this.gvt|=FLAG_SIN_COS_ANGLE_CHANGED,this.xX()){var i=this.$q();for(let t=0,e=i.length;t<e;t++)i[t].wwt()}}yD(){return this.a6()&&this.Ax()?this.Ewt(C33.Ch(this.N7().Iwt()+this.Wa)):this.Wa}Iwt(){return this.a6()&&this.Ax()?C33.Ch(this.N7().Iwt()+this.Wa):this.Wa}Ewt(t){return this.s6()&&this.B7().eC()<0&&(t=C33.Ch(C33.Rh(t,this.B7().yD()+Math.PI))),t=this.h6()&&this.B7().cC()<0?C33.Rh(t,this.B7().yD()):t}Owt(){var t=this.N7();return!!(this.s6()&&t.eC()<0)||!!(this.h6()&&t.cC()<0)}Pwt(){var t=this.N7();return!!(this.s6()&&t.eC()<0&&this.h6()&&t.cC()<0)}Lwt(){var t,e=this.gvt;0!=(e&FLAG_SIN_COS_ANGLE_CHANGED)&&(t=this.yD(),this.KRt=Math.sin(t),this.JRt=Math.cos(t),this.gvt=e&~FLAG_SIN_COS_ANGLE_CHANGED)}tSt(){return this.Lwt(),this.KRt}Qvt(){return this.Lwt(),this.JRt}Eht(t){this.ZRt=+t}yht(t){this.ZRt+=+t}g$(){return this.ZRt}Aht(t){this.QRt=+t}Iht(t){this.QRt+=+t}_$(){return this.QRt}vwt(t){this.US.equals(t)||(this.US===DEFAULT_COLOR?(this.US=C33.nh(C33.Fa,t),this.awt=C33.nh(C33.Fa,t),this.awt.do()):t.lo(1,1,1,1)?(this.US=DEFAULT_COLOR,this.awt=DEFAULT_COLOR):(this.US.set(t),this.awt.set(t),this.awt.do()),this._wt())}mb(t){if(t=C33.dh(+t,0,1),this.c6()){if(this.uht().eSt()===t)return;this.uht().yRt(t),t=this.Cb()}else if(this.US.a===t)return;this.xwt(t)}Dwt(){if(this.xX()){var i=this.$q();for(let t=0,e=i.length;t<e;t++){var s=i[t];s.xwt(s.Cb())}}}xwt(t){tempColor.Ka(this.US),tempColor.a=t,this.vwt(tempColor),this.Dwt()}Sht(t){this.c6()?this.mb(this.uht().eSt()+t):this.mb(this.Cb()+t)}Cb(){return this.c6()?this.N7().Cb()*this.uht().eSt():this.US.a}E7(t){this.US.no(t)||(tempColor.Ka(t),tempColor.a=this.Cb(),this.vwt(tempColor))}Jrt(t,e,i){tempColor.Ha(t,e,i),this.E7(tempColor)}Nwt(t,e,i){0===t&&0===e&&0===i||(tempColor.Ka(this.US),tempColor.r+=t,tempColor.No+=e,tempColor.b+=i,this.E7(tempColor))}y7(){return this.US}gH(){return this.awt}p6(){return 0!=(this.gvt&FLAG_DESTROY_WITH_PARENT)}Fwt(t){this.$wt(FLAG_DESTROY_WITH_PARENT,t)}Q7(){return 0!=(this.gvt&FLAG_TRANSFORM_WITH_PARENT_X)}Bwt(t){this.$wt(FLAG_TRANSFORM_WITH_PARENT_X,t)}e6(){return 0!=(this.gvt&FLAG_TRANSFORM_WITH_PARENT_Y)}Awt(){return 0!=(this.gvt&(FLAG_TRANSFORM_WITH_PARENT_X|FLAG_TRANSFORM_WITH_PARENT_Y))}kwt(t){this.$wt(FLAG_TRANSFORM_WITH_PARENT_Y,t)}s6(){return 0!=(this.gvt&FLAG_TRANSFORM_WITH_PARENT_W)}Wwt(t){this.$wt(FLAG_TRANSFORM_WITH_PARENT_W,t)}h6(){return 0!=(this.gvt&FLAG_TRANSFORM_WITH_PARENT_H)}Vwt(t){this.$wt(FLAG_TRANSFORM_WITH_PARENT_H,t)}a6(){return 0!=(this.gvt&FLAG_TRANSFORM_WITH_PARENT_A)}Hwt(t){this.$wt(FLAG_TRANSFORM_WITH_PARENT_A,t)}l6(){return 0!=(this.gvt&FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION)}Uwt(t){this.$wt(FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION,t)}c6(){return 0!=(this.gvt&FLAG_TRANSFORM_WITH_PARENT_OPACITY)}jwt(t){this.$wt(FLAG_TRANSFORM_WITH_PARENT_OPACITY,t)}d6(){return 0!=(this.gvt&FLAG_TRANSFORM_WITH_PARENT_VISIBILITY)}Xwt(t){this.$wt(FLAG_TRANSFORM_WITH_PARENT_VISIBILITY,t)}Ywt(){this.gvt&=~MASK_ALL_SCENE_GRAPH_FLAGS}Y7(t,e){var i,s,r,h,n,a,o;return t!==this&&!(t.K7()||this.qwt(t)||this.zwt(t)||(o=t.rg(),a=t.ag(),i=t.eC(),s=t.cC(),r=t.yD(),h=t.lg(),n=t.Cb(),t.Kwt(this),t.Bwt(e.Z7),t.kwt(e.t6),t.Wwt(e.i6),t.Vwt(e.r6),t.Hwt(e.n6),t.Uwt(e.o6),t.jwt(e.u6),t.Xwt(e.f6),t.Fwt(e.C6),e.Z7&&(t.Yo=o-this.rg(),e.i6)&&0!=(o=this.eC()/this.cwt.lht())&&(t.Yo/=o),e.t6&&(t.qo=a-this.ag(),e.r6)&&0!=(o=this.cC()/this.cwt.fht())&&(t.qo/=o),e.i6&&(0===(a=this.eC())||a===Number.EPSILON?(t.qRt=1,t.cwt.TRt(1)):(t.qRt=i/this.eC(),t.cwt.TRt(t.qRt))),e.r6&&(0===(o=this.cC())||o===Number.EPSILON?(t.zRt=1,t.cwt._Rt(1)):(t.zRt=s/this.cC(),t.cwt._Rt(t.zRt))),e.n6&&(t.Wa=r-this.yD()),e.o6&&(t.jS=h-this.lg()),e.u6&&t.cwt.yRt(n),e.f6&&t.rN(this.nN()),this.Jwt(t),this.o7(),this.Dwt(),0))}q7(t){var e,i,s,r,h,n,a;t.N7()===this&&(e=t.rg(),i=t.ag(),s=t.eC(),r=t.cC(),h=t.yD(),n=t.lg(),a=t.Cb(),t.Kwt(null),t.Ywt(),t.l7(e,i),t.LM(s,r),t._D(h),t.ug(n),t.mb(a),this.Zwt(t),this.o7())}Qwt(){return this.fwt}tbt(){var t;this.ebt();for(t of[...this.children()])this.q7(t);var e=this.N7();e&&e.q7(this),this.Ywt()}ebt(){if(this.ibt(),!this.CRt){var e,i=[...this.children()];i.length&&(this.CRt=[],this.pRt=new WeakMap);let t=0;for(e of i){var s=e.hB();this.CRt.push(s),this.pRt.set(s,t),t++}}i=this.N7();i&&i.ebt()}ibt(){if(-1===this.fwt){var t,e,i=[...this.k7()];this.fwt=i.length;for(t of i)t.ibt();for(e of[...this.children()])e.ibt()}}mwt(){this.CRt&&(this.CRt.length=0),this.CRt=null,this.pRt=null;var t=this.N7();t&&t.mwt(),this.fwt=-1}K7(){return null!==this.N7()}N7(){var t=this.cwt;return null!==t?t.N7():null}B7(){let t=this;for(;t.K7();)t=t.N7();return t}*k7(){let t=this.N7();for(;t;)yield t,t=t.N7()}DMt(t){return this.$q().includes(t)}xX(){var t=this.cwt;return null!==t&&t.xX()}$q(){var t=this.cwt;return null!==t?t.$q():EMPTY_ARRAY}children(){return this.$q()}*j7(){for(var t of this.children())yield t,yield*t.j7()}V7(){return this.$q().length}uSt(){return[...this.j7()].length}U7(t){var e=this.$q();return(t=Math.floor(+t))<0||t>=e.length?null:e[t]}BMt(e){if(e){var i=this.$q();if(i)for(let t=0;t<i.length;t++)if(e===i[t])return t}return NaN}sbt(t){this.cwt||(this.cwt=C33.nh(C33.kq,this)),t&&this.cwt.vRt(t)}uht(){return this.cwt}pwt(){this.cwt&&(this.cwt.ah(),this.cwt=null)}Kwt(t){t?(t.sbt(null),this.sbt(t)):(this.cwt&&this.cwt.vRt(null),this.xX()||this.pwt())}zwt(t){var e;return!!this.K7()&&((e=this.N7())===t||e.zwt(t))}qwt(t){if(this.DMt(t))return!0;for(var e of this.$q())if(e.qwt(t))return!0;return!1}Jwt(t){this.cwt.$q().push(t)}Zwt(t){var e=this.cwt.$q(),i=e.indexOf(t);-1!==i&&e.splice(i,1),0!==e.length||this.K7()||this.pwt(),t.xX()||t.pwt()}WMt(){var t=sceneGraphExportDataMap.get(this);return t?t.gwt:null}rbt(){var t=sceneGraphExportDataMap.get(this);return t?t.Twt:NaN}LX(){var t=sceneGraphZIndexMap.get(this);return C33.ds(t)?t:NaN}hbt(t){sceneGraphZIndexMap.set(this,t)}nbt(){this.$wt(FLAG_USE_POINTS_SHADER_PROGRAM,!0),this._wt()}_wt(){if(enableUpdateRendererStateGroup){var e=this.Qc.RS();this.owt&&e.z2(this.owt);let t;t=0!=(this.gvt&FLAG_USE_POINTS_SHADER_PROGRAM)?e.w2()||"<point>":e.A2()||"<default>",this.owt=e.j2(t,this.ON(),this.awt,this.lg())}}mX(){return this.owt}SU(){return this.US===DEFAULT_COLOR}YS(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.ON()!==t&&(this.gvt=this.gvt&~FLAG_BLEND_MODE_MASK|t<<FLAG_BLEND_MODE_BIT_OFFSET,this._wt())}ON(){return(this.gvt&FLAG_BLEND_MODE_MASK)>>FLAG_BLEND_MODE_BIT_OFFSET}o5(t,e){e=e&&this.jRt!==t;e&&this.KH(),this.uct.WAt(this,this.jRt,t),this.jRt=t,e&&this.abt(),0!==this.lg()&&this.jRt.ZH()}r5(){return this.jRt}$L(){return this.r5().$L()}tU(t){this.XRt=0|t}h5(){return this.jRt.uj(),this.XRt}Cj(t){this.YRt=0|t}nk(){return this.jRt.fj(),this.YRt}tV(){return this.XRt}$wt(t,e){e?this.gvt|=t:this.gvt&=~t}nN(){return 0!=(this.gvt&FLAG_IS_VISIBLE)}rN(t){if(this.$wt(FLAG_IS_VISIBLE,t),this.xX())for(var e of this.$q())e.d6()&&e.rN(t)}L7(){return 0!=(this.gvt&FLAG_COLLISION_ENABLED)}x7(t){t=!!t,this.L7()!==t&&(this.$wt(FLAG_COLLISION_ENABLED,t),t?this.o7():this.obt())}lbt(t,e){if(this.$wt(FLAG_SOLID_FILTER_INCLUSIVE,t),this.nwt&&this.nwt.clear(),e.trim()){this.nwt||(this.nwt=new Set);for(var i of e.split(" "))i&&this.nwt.add(i.toLowerCase())}else this.nwt=null}ubt(t){var e=0!=(this.gvt&FLAG_SOLID_FILTER_INCLUSIVE),i=this.nwt;if(t&&i)for(var s of i)if(t.has(s))return e;return!e}o7(){if(this.gvt|=FLAG_BBOX_CHANGED|FLAG_COLLISION_CELL_CHANGED|FLAG_MESH_CHANGED,this.uct.$At(!0),this.Qc.u5(),this.jRt.OH()&&(this.cbt(this.twt,this.ewt,!0),this.gvt&=~FLAG_BBOX_CHANGED,this.abt()),0!=(this.gvt&FLAG_ENABLE_BBOX_CHANGED_EVENT)&&this.Mi.x3().dispatchEvent(bboxChangeEvent),null!==this.cwt){var i=this.cwt.$q();for(let t=0,e=i.length;t<e;++t)i[t].o7()}}cbt(t,e,i){var s=this.rg(),r=this.ag(),h=this.eC(),n=this.cC(),a=this.yD();t.ol(s-this.ZRt*h,r-this.QRt*n,h,n),i&&this.E6()&&this.fbt(t),0===a?e.du(t):(t.offset(-s,-r),e.pu(t,this.tSt(),this.Qvt()),e.offset(s,r),e.mu(t)),t.normalize()}dbt(){var t=this.gvt;0!=(t&FLAG_BBOX_CHANGED)&&(this.cbt(this.twt,this.ewt,!0),this.gvt=t&~FLAG_BBOX_CHANGED)}m7(){return this.dbt(),this.twt}S7(){return this.dbt(),this.ewt}Cbt(t){var e=this.rg(),i=this.ag(),e=Math.round(e)-e,i=Math.round(i)-i;return 0==e&&0==i?t:(tempQuad._(t),tempQuad.offset(e,i),tempQuad)}pbt(t){this.twt._(t),this.ewt.du(this.twt),this.gvt&=~FLAG_BBOX_CHANGED,this.kAt(),this.abt()}mbt(t){this.$wt(FLAG_ENABLE_BBOX_CHANGED_EVENT,t)}vbt(){return 0!=(this.gvt&FLAG_ENABLE_BBOX_CHANGED_EVENT)}sX(t,e,i){return e&&0!==this.lX()?this.nX(this.r5().hX()):0===this.lg()||i?t.kl(this.m7()):this.Sbt()}Sbt(){var t=this.r5(),e=this.C7();return!(e>=t.NU())&&(t.xU(e,tempRect),tempRect.kl(this.m7()))}nX(t){var e=this.m7(),i=e.ml(),s=e.Sl(),r=e.vl(),e=e.gl(),h=this.C7(),n=h+this.lX();return t.hm(i,r,h,s,e,n)}T7(){var t,e=this.r5();return e.qU()?this.nX(e.hX()):(t=e.$L(),this.sX(e.DN(),t.iX(),t.zD()))}dX(t){this.$wt(FLAG_DRAW_BACK_FACE_ONLY,t)}fX(t){this.$wt(FLAG_DRAW_NON_BACK_FACES_ONLY,t)}gbt(){return 0!=(this.gvt&FLAG_DRAW_BACK_FACE_ONLY)}Tbt(){return 0!=(this.gvt&FLAG_DRAW_NON_BACK_FACES_ONLY)}_bt(t){this.rwt=t,this.ybt(),this.E6()&&(this.dwt.Ebt=null)}Ibt(){return this.rwt}Abt(){return null!==this.rwt||this.E6()}Mbt(){return this.Rbt(this.eC(),this.cC(),this.yD(),this.tSt(),this.Qvt())}wbt(t,e,i){let s=0,r=1;return 0!==i&&(s=Math.sin(i),r=Math.cos(i)),this.Rbt(t,e,i,s,r)}Rbt(e,i,t,s,r){let h=this.hwt;null===h&&(h={Cwt:C33.nh(C33.Mu),width:NaN,height:NaN,angle:NaN},this.hwt=h);var n=h.Cwt;if(h.width!==e||h.height!==i||h.angle!==t){var a=this.rwt;if(this.E6()){var o=this.g$(),l=this._$(),u=this.I6();let t=this.dwt.Ebt;t||(a?(tempCollisionPoly._(a),tempCollisionPoly.offset(o,l)):tempCollisionPoly.xu(),t=u.zg(tempCollisionPoly),this.dwt.Ebt=t),u.Kg(t,n),n.offset(-o,-l),n.$u(e,i,s,r)}else a?(n._(a),n.$u(e,i,s,r)):n.Fu(this.S7(),-this.rg(),-this.ag());h.width=e,h.height=i,h.angle=t}return n}ybt(){this.bbt(!0);var t=this.hwt;null!==t&&(t.width=NaN)}v6(t,e){if(t=Math.floor(t),e=Math.floor(e),!this.hB().Ux().Lx())throw new Error("object does not support mesh");this.g6(),this.dwt={Gbt:C33.nh(C33.jp.Eg,t,e),Obt:C33.nh(C33.jp.Eg,t,e),Ebt:null}}E6(){return null!==this.dwt}I6(){if(this.E6())return this.dwt.Gbt;throw new Error("no mesh")}Pbt(){if(this.E6())return this.dwt.Obt;throw new Error("no mesh")}Lbt(t){this.$wt(FLAG_MESH_CHANGED,t)}xbt(){return 0!=(this.gvt&FLAG_MESH_CHANGED)}bbt(t){this.$wt(FLAG_PHYSICS_BODY_CHANGED,t)}Dbt(){return 0!=(this.gvt&FLAG_PHYSICS_BODY_CHANGED)}fbt(t){var e=this.dwt.Gbt,i=Math.min(e.Bg(),0),s=Math.min(e.kg(),0),r=Math.max(e.Wg(),1),h=Math.max(e.Vg(),1),n=t.width(),a=t.height();t.offsetLeft(i*n),t.offsetTop(s*a),t.Ml((r-1)*n),t.Rl((h-1)*a),this.ZT=e.Hg()}g6(){this.dwt&&(this.dwt.Gbt.ah(),this.dwt.Obt.ah(),this.dwt=null,this.ybt())}_6(t,e,i){t=Math.floor(t),e=Math.floor(e);var s=i.mode||"absolute";if(!VALID_SET_MESH_POINT_MODES.has(s))throw new Error("invalid mode");s="relative"===s;let r=i.x,h=i.y;var n=i.IN;let a="number"==typeof i.u?i.u:s?0:-1,o="number"==typeof i.v?i.v:s?0:-1;if(!this.E6())return!1;var i=this.I6(),l=i.jg(t,e);if(null===l)return!1;let u=!1;return"number"==typeof n&&l.lg()!==n&&(l.ug(n),u=!0),s&&(r+=t/(i.xg()-1),h+=e/(i.Dg()-1)),a=-1!==a||s?(s&&(a+=t/(i.xg()-1)),C33.dh(a,0,1)):l.fg(),o=-1!==o||s?(s&&(o+=e/(i.Dg()-1)),C33.dh(o,0,1)):l.Cg(),l.rg()===r&&l.ag()===h&&l.fg()===a&&l.Cg()===o?u:(l.hg(r),l.og(h),l.dg(a),l.pg(o),this.ybt(),!0)}yMt(){return this.Mi.yMt()}D7(t,e){return!!this.m7().Vl(t,e)&&!!this.S7().Vl(t,e)&&(this.yMt()?this.Mi.O6().ayt(t,e):!this.Abt()||this.Mbt().Vl(t-this.rg(),e-this.ag()))}Nbt(){return 0!=(this.gvt&FLAG_COLLISION_CELL_CHANGED)}kAt(){var t,e,i;this.Nbt()&&this.L7()&&0==(this.gvt&FLAG_DESTROYED)&&(i=this.m7(),t=this.uct.FAt(),e=this.iwt,tempRect.set(t.vV(i.ml()),t.SV(i.vl()),t.vV(i.Sl()),t.SV(i.gl())),e.equals(tempRect)||(i=this.Mi,e===DEFAULT_COLLISION_CELLS?(t.gV(i,null,tempRect),this.iwt=C33.nh(C33.Rect,tempRect)):(t.gV(i,e,tempRect),e._(tempRect)),this.gvt&=~FLAG_COLLISION_CELL_CHANGED))}Fbt(){this.gvt|=FLAG_COLLISION_CELL_CHANGED}obt(){var t=this.iwt;t!==DEFAULT_COLLISION_CELLS&&(this.uct.FAt().gV(this.Mi,t,null),this.iwt=DEFAULT_COLLISION_CELLS)}abt(){var t,e,i,s=this.r5();s.OH()&&0==(this.gvt&FLAG_DESTROYED)&&(t=s.TU(),i=this.m7(),e=this.swt,tempRect.set(t.vV(i.ml()),t.SV(i.vl()),t.vV(i.Sl()),t.SV(i.gl())),e.equals(tempRect)||(i=this.Mi,e===DEFAULT_RENDER_CELLS?(t.gV(i,null,tempRect),this.swt=C33.nh(C33.Rect,tempRect)):(t.gV(i,e,tempRect),e._(tempRect)),s._U()))}KH(){var t=this.swt;t!==DEFAULT_RENDER_CELLS&&(this.r5().TU().gV(this.Mi,t,null),this.swt=DEFAULT_RENDER_CELLS)}cj(){return this.swt}A7(){var t=this.Mi,e=this.jRt,i=e.a5();i.length&&i.at(-1)===t||(e.zH(t,!1),e.XH(t,!1),this.Qc.u5())}R7(){var t=this.Mi,e=this.jRt,i=e.a5();i.length&&i[0]===t||(e.zH(t,!1),e.qH(t,!1),this.Qc.u5())}b7(t){var e=this.Mi,i=this.jRt;if(i.$L()!==t.$L())throw new Error("layer from different layout");t!==i&&(i.zH(e,!0),this.o5(t),t.XH(e,!0),this.Qc.u5())}O7(t,e){var i=this.Mi;let s=!1;var r=this.jRt;if(t.uF()!==i.uF()){var h=t.s5();if(!h)throw new Error("expected world instance");h=h.r5(),r=(r.uP()!==h.uP()&&(r.zH(i,!0),this.o5(h),h.XH(i,!0),s=!0),h.mj(i,t,!!e));(s||r)&&this.Qc.u5()}}n7(){return this.lwt}$bt(t){this.$wt(FLAG_HAS_ANY_ACTIVE_EFFECT,t)}Ej(){return 0!=(this.gvt&FLAG_HAS_ANY_ACTIVE_EFFECT)}GX(t,e=null){var i={x:this.rg(),y:this.ag(),w:this.eC(),h:this.cC(),l:this.r5().dU(),zi:this.h5()},s=(0!==this.lg()&&(i.ze=this.lg()),0!==this.yD()&&(i.a=this.Iwt()),this.SU()||(i.c=this.US.toJSON()),.5!==this.g$()&&(i.oX=this.g$()),.5!==this._$()&&(i.oY=this._$()),0!==this.ON()&&(i.bm=this.ON()),this.nN()||(i.v=this.nN()),this.L7()||(i.ce=this.L7()),this.vbt()&&(i.be=this.vbt()),this.lwt&&(i.fx=this.lwt.GX()),0!=(this.gvt&FLAG_SOLID_FILTER_INCLUSIVE));return s&&(i.sfi=s),this.nwt&&(i.sft=[...this.nwt].join(" ")),this.cwt&&"visual-state"!==t&&(i.sgi=this.cwt.GX(t,e),sceneGraphExportDataMap.has(this))&&(i.sgcd=sceneGraphExportDataMap.get(this).gwt,i.sgzid=sceneGraphExportDataMap.get(this).Twt),this.E6()&&(i.mesh=this.I6().Sg()),i}ORt(){return{x:this.Yo,y:this.qo,z:this.jS,w:this.qRt,h:this.zRt,a:this.Wa,sgi:this.uht()?this.uht().MRt():null}}DRt(t){t&&(this.Yo=t.x,this.qo=t.y,this.jS=t.z,this.qRt=t.w,this.zRt=t.h,this.Wa=t.a,t.sgi&&this.uht()&&this.uht().OX(t.sgi),this.wwt(),this.o7())}qAt(){this.mwt(),this.tbt(),this.sbt(null),this.cwt&&this.cwt.LRt(this.CRt,this.pRt)}Kz(t){"visual-state"!==t&&this.tbt()}Zz(t,e="full",i=null){t.hasOwnProperty("sgi")&&"visual-state"!==e&&0==(this.gvt&FLAG_DESTROYED)&&this.cwt.Zz(t.sgi,i)}rRt(t,e="full",i){t.hasOwnProperty("sgi")&&"visual-state"!==e&&0==(this.gvt&FLAG_DESTROYED)&&(this.cwt.LRt(null,null),this.mwt(),this.o7())}OX(t,e){if(enableUpdateRendererStateGroup=!1,this.hg(t.x),this.og(t.y),this.oC(t.w),this.iC(t.h),this.tU(t.zi),this.ug(t.hasOwnProperty("ze")?t.ze:0),this._D(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?tempColor.Do(t.c):t.hasOwnProperty("o")?(tempColor.Ka(this.US),tempColor.a=t.o):tempColor.Va(1,1,1,1),this.vwt(tempColor),this.Eht(t.hasOwnProperty("oX")?t.oX:.5),this.Aht(t.hasOwnProperty("oY")?t.oY:.5),this.YS(t.hasOwnProperty("bm")?t.bm:0),this.rN(!t.hasOwnProperty("v")||t.v),this.x7(!t.hasOwnProperty("ce")||t.ce),this.mbt(!!t.hasOwnProperty("be")&&t.be),this.lbt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.lwt&&t.hasOwnProperty("fx")&&this.lwt.OX(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==e&&this.CRt)for(var i of this.CRt)i.dk()||this.Qc.sF(i);var s,r;t.hasOwnProperty("sgi")&&"visual-state"!==e&&(this.sbt(null),s=this.cwt,r=t.sgi,s.OX(r),s.LRt(this.CRt,this.pRt),t.sgcd)&&C33.ds(t.sgzid)&&sceneGraphExportDataMap.set(this,{gwt:t.sgcd,Twt:t.sgzid}),t.hasOwnProperty("mesh")?(r=t.mesh,this.v6(r.cols,r.rows),this.I6().gg(r)):this.g6(),this.o7(),enableUpdateRendererStateGroup=!0,this._wt(),"visual-state"!==e&&this.Qc.Bbt(this.hB(),t)}}}{let C33=self.$e;C33.wIt=class BehaviorType extends C33.rh{constructor(t,e){super();var i=t.I5(),s=i.Tpt(e[1]),i=(i.kbt().iEt(s),this.Qc=i,this.uct=t,this.Nyt=C33.mx.Y6(s),this.T_t=null,this.Wbt=null,this.hIt=s.Instance,this.DV=e[2],this.uh=e[0],this.smt=this.Qc.kft(e[3]),this.Nyt.Z2t());if(i<2&&(this.T_t=C33.nh(s.jIt,this),!(this.T_t instanceof C33.Dyt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(C33.mx.i_t(this,i),2<=i){t=s.jIt??globalThis.Mk;if(this.Wbt=new t,!(this.Wbt instanceof globalThis.Mk))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.Wbt=new globalThis.j6;C33.mx.s_t(i),this.ZTt()}static F_(t,e){return C33.nh(C33.wIt,t,e)}ah(){this.Qc=null,this.Nyt=null,this.T_t&&(this.T_t.ah(),this.T_t=null),this.hIt=null}qvt(){return this.T_t}ZTt(){this.T_t?this.T_t.ZTt():this.Wbt&&this.Wbt.EB()}I5(){return this.Qc}KN(){return this.uct}B6(){return this.Nyt}dAt(){return this.hIt}jc(){return this.uh}dU(){return this.DV}W6(){return this.Wbt}kft(){return this.smt}}}{let C33=self.$e,IBehaviorInstance=self.N6;C33.aMt=class BehaviorInstance extends C33.rh{constructor(t){super(),this.Qc=t.runtime,this.Nmt=t.k6,this.Nyt=this.Nmt.B6(),this.Mi=t.H6,this.$p=t.index,this.QAt=null,this.tMt=null,this.Nyt.XH(this.Mi)}ah(){this.tMt&&(this.tMt.eF(),this.tMt=null),this.Nyt.zH(this.Mi),this.QAt&&(this.QAt.ah(),this.QAt=null),this.Qc=null,this.Nmt=null,this.Nyt=null,this.Mi=null}oAt(t){if(this.QAt)throw new Error("already got sdk instance");if(this.B6().Z2t()<2){if(this.QAt=C33.nh(this.Nmt.dAt(),this,t),!(this.QAt instanceof C33.Fyt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{var e=this.B6().QTt();this.e_t(e.Instance,t)}}O6(){return this.QAt??this.tMt}U6(){return this.Mi}I5(){return this.Qc}V6(){return this.Nmt}B6(){return this.Nyt}Frt(){return this.$p}Wyt(){this.QAt?this.QAt.Wyt():this.tMt.Gk()}jyt(t,e){this.QAt&&this.QAt.jyt(t,e)}sRt(){return this.QAt?this.QAt.W_t():this.tMt.qF()}Sg(t="full"){return this.QAt?this.QAt.Sg(t):this.tMt.zF(t)}gg(t,e="full"){if(this.QAt)return this.QAt.gg(t,e);this.tMt.KF(t,e)}static Vbt(t,e,i){var s=globalThis.Rk;let r,h;r=e instanceof s?t.DD(e):e.kyt(),h=i instanceof s?t.DD(i):i.kyt();var e=r.U6(),s=h.U6(),t=e.KN().uP(),i=s.KN().uP();return t!==i||(t=e.jMt())!==(i=s.jMt())?t-i:r.Frt()-h.Frt()}e_t(t,e){var i=IBehaviorInstance,t=t??this.QAt.QTt(),s=t||i,r=this.B6().Z2t();if(C33.mx.i_t(this,r),C33.mx.sEt(e),this.tMt=new s,C33.mx.rEt(),C33.mx.s_t(r),!t||this.tMt instanceof i)return this.tMt;throw new TypeError(`script interface class '${t.name}' does not extend the right base class '${i.name}'`)}E_t(){return this.tMt||this.e_t()}j_t(){return!!this.tMt}}}{let C33=self.$e;C33.vH=class EffectList extends C33.rh{constructor(t,e){super(),this.Mg=t,this.Hbt=[],this.Ubt=[],this.jbt=new Map,this.Xbt=[],this.Ybt=[],this.qbt=new Set,this.TS=!0;for(var i of e){var s=C33.nh(C33.zbt,this,i,this.Hbt.length);this.Hbt.push(s),this.jbt.set(s.jc().toLowerCase(),s),3<=i.length&&this.Xbt.push(this.Kbt(s,i[2]))}this.I5().Jbt(this)}ah(){this.I5().Zbt(this);for(var t of this.Ybt)t.ah();C33.xn(this.Ybt),C33.xn(this.Hbt),C33.xn(this.Ubt),this.jbt.clear(),C33.xn(this.Xbt),this.Mg=null}Qbt(t){this.qbt.add(t)}tGt(t){this.qbt.delete(t)}eGt(t){t.v2()&&(this.Ybt=this.Hbt.map(t=>{t=t.Uy();return 0<t.GetCustomParametersByteSize()?C33.nh(C33.jp.WebGPUEffectCustomParamsBuffer,t):null}),this.iGt());for(var e of this.qbt)e.eGt(t)}nAt(t){if(t.length){this.Hbt=t.concat(this.Hbt);for(var e of t)this.jbt.set(e.jc().toLowerCase(),e);for(let t=0,e=this.Hbt.length;t<e;++t)this.Hbt[t].oU(t)}}Kbt(t,e){t.sGt(e[0]);var i=e.slice(1);for(let t=0,e=i.length;t<e;++t){var s,r=i[t];Array.isArray(r)&&((s=C33.nh(C33.Fa)).Do(r),i[t]=s)}return i}Ng(){return this.Mg}I5(){return this.Mg.I5()}K6(){C33.xn(this.Ubt);let t=!0;for(var e of this.Hbt)e.n1t()&&(this.Ubt.push(e),e.Uy().LS()||(t=!1));this.TS=t}pD(){return this.Hbt}_At(){return 0<this.Hbt.length}jst(t){return this.jbt.get(t.toLowerCase())||null}rGt(t){if((t=Math.floor(+t))<0||t>=this.Hbt.length)throw new RangeError("invalid effect type index");return this.Hbt[t]}q6(t){return this.rGt(t).n1t()}z6(t,e){this.rGt(t).sGt(e)}gU(){return this.Ubt}Ej(){return 0<this.Ubt.length}LS(){return this.TS}Ust(t){return this.Xbt[t]}_H(t){return(t<this.Ybt.length?this.Ybt:this.Xbt)[t]}J6(t,e){return t<0||t>=this.Xbt.length||(t=this.Xbt[t],e<0)||e>=t.length?null:t[e]}Z6(t,e,i){if(t<0||t>=this.Xbt.length)return!1;var s=this.Xbt[t];if(e<0||e>=s.length)return!1;var r=s[e];if(r instanceof C33.Fa){if(r.no(i))return!1;r.Ka(i)}else{if(r===i)return!1;s[e]=i}return t<this.Ybt.length&&this.Ybt[t].SetParameterValue(e,i),!0}iGt(){var i=this.Xbt,s=this.Ybt;for(let t=0,e=Math.min(i.length,s.length);t<e;++t){var r=s[t],h=i[t];for(let t=0,e=h.length;t<e;++t)r.SetParameterValue(t,h[t])}}static hGt(t){return t&&t instanceof C33.Fa?{t:"color",v:t.toJSON()}:t}static nGt(t){if(null===t)return NaN;if("object"!=typeof t)return t;var e;if("color"===t.t)return(e=C33.nh(C33.Fa)).Do(t.v),e;throw new Error("invalid effect parameter type")}static aGt(t){return t.map(C33.vH.hGt)}static oGt(t){return t.map(C33.vH.nGt)}Sg(){return this.Hbt.map(t=>({name:t.jc(),active:t.n1t(),params:C33.vH.aGt(this.Xbt[t.uP()])}))}gg(t){for(var e of t){var i=this.jst(e.name);i&&(i.sGt(e.active),this.Xbt[i.uP()]=C33.vH.oGt(e.params))}this.K6(),this.iGt()}}}{let C33=self.$e;C33.zbt=class EffectType extends C33.rh{constructor(t,e,i){super(),this.mH=t,this.e3=e[0],this.uh=e[1],this.$p=i,this.WS=null,this.if=!0}ah(){this.mH=null,this.WS=null}hAt(t){t=C33.nh(C33.zbt,t,[this.e3,this.uh],-1);return t.WS=this.WS,t.if=this.if,t}eGt(t){t=t.I2(this.e3);if(!t)throw new Error("failed to find shader program '"+this.e3+"'");this.WS=t}CD(){return this.mH}jc(){return this.uh}oU(t){this.$p=t}uP(){return this.$p}Ng(){return this.mH.Ng()}I5(){return this.mH.I5()}sGt(t){this.if=!!t}n1t(){return this.if}Uy(){return this.WS}lGt(){var i=[];for(let t=0,e=this.WS.jy();t<e;++t){var s=this.WS.Xy(t);if("float"===s||"percent"===s)i.push(0);else{if("color"!==s)throw new TypeError("unknown effect parameter type");i.push(C33.nh(C33.Fa,1,1,1,1))}}return i}}}{let C33=self.$e;C33.uwt=class InstanceEffectList extends C33.rh{constructor(t,e){super(),this.Mi=t,this.uGt=e,this.mH=t.KN().CD(),this.cGt=!0,this.EH=!0,this.fGt=!1,this.dGt=!1,this.CGt=!1,this.pGt=!1,this.nP=C33.nh(C33.jp.s4,t.I5().jB().SH(),{XG:(t,e)=>{var e=e.ZO(),i=e.s5();t.qS(i.gH()),t.cv(i.C7()),e.Yg(t),t.cv(0)},YG:t=>{var e=t.iyt(),[t,i]=t.eyt();return{jO:e,XO:t,YO:i}},qG:t=>this._H(t)}),this.mGt=[],this.Ubt=[],this.TS=!0,this.Xbt=[],this.Ybt=[],this.eGt(t.I5().RS());for(let t=0,e=this.mH.pD().length;t<e;++t)this.mGt.push(!0);this.K6(),this.mH.Qbt(this)}ah(){this.mH.tGt(this);for(var t of this.Ybt)t&&t.ah();C33.xn(this.Ybt),this.nP.ah(),this.nP=null,C33.xn(this.mGt),C33.xn(this.Ubt),C33.xn(this.Xbt),this.Mi=null,this.mH=null}eGt(t){t.v2()&&(this.Ybt=this.mH.pD().map(t=>{t=t.Uy();return 0<t.GetCustomParametersByteSize()?C33.nh(C33.jp.WebGPUEffectCustomParamsBuffer,t):null}))}Swt(t){let e=0;for(var i of t)this.Xbt.push(this.Kbt(e,i)),++e;this.iGt(),this.K6()}Kbt(t,e){this.mGt[t]=e[0];var i=e.slice(1);for(let t=0,e=i.length;t<e;++t){var s,r=i[t];Array.isArray(r)&&((s=C33.nh(C33.Fa)).Do(r),i[t]=s)}return i}CMt(){for(var t of this.mH.pD())this.Xbt.push(t.lGt());this.iGt()}Ng(){return this.Mg}CD(){return this.mH}lP(){return this.vU(),this.nP}I5(){return this.Mi.I5()}K6(){C33.xn(this.Ubt);var i,t=this.uGt,s=this.mH.pD(),r=this.Ubt,h=this.mGt;let n=!0;for(let t=0,e=s.length;t<e;++t)h[t]&&(i=s[t],r.push(i),i.Uy().LS()||(n=!1));this.TS=n,t.$bt(!!r.length),this.cGt=!0}vU(){var t=this.Mi,e=this.uGt,i=e.SU(),s=t.Ux().bx(),e=0!==e.yD()||0!==e.r5().yD()||e.eC()<0||e.cC()<0,r=t.hyt(),t=t.PS();(this.cGt||i!==this.EH||s!==this.fGt||e!==this.dGt||r!==this.CGt||t!==this.pGt||this.nP.K4())&&(this.nP.J4(this.Ubt.map(t=>t.Uy()),{KG:this.Ubt.map(t=>t.uP()),JG:!i||t,QG:s,t4:r,e4:e}),this.cGt=!1,this.EH=i,this.fGt=s,this.dGt=e,this.CGt=r,this.pGt=t)}gU(){return this.Ubt}Ust(t){return this.Xbt[t]}_H(t){return(t<this.Ybt.length?this.Ybt:this.Xbt)[t]}J6(t,e){return t<0||t>=this.Xbt.length||(t=this.Xbt[t],e<0)||e>=t.length?null:t[e]}Z6(t,e,i){if(t<0||t>=this.Xbt.length)return!1;var s=this.Xbt[t];if(e<0||e>=s.length)return!1;var r=s[e];if(r instanceof C33.Fa){if(r.no(i))return!1;r.Ka(i)}else{if(r===i)return!1;s[e]=i}return t<this.Ybt.length&&this.Ybt[t].SetParameterValue(e,i),!0}iGt(){var i=this.Xbt,s=this.Ybt;for(let t=0,e=s.length;t<e;++t){var r=s[t],h=i[t];for(let t=0,e=h.length;t<e;++t)r.SetParameterValue(t,h[t])}}LS(){return this.TS}vGt(){return this.Ubt.some(t=>t.Uy().NS())}q6(t){return this.mGt[t]}z6(t,e){this.mGt[t]=!!e}pD(){return this.mH.pD()}GX(){return this.mH.pD().map(t=>({name:t.jc(),active:this.mGt[t.uP()],params:C33.vH.aGt(this.Xbt[t.uP()])}))}OX(t){for(var e of t){var i=this.mH.jst(e.name);i&&(this.mGt[i.uP()]=e.active,this.Xbt[i.uP()]=C33.vH.oGt(e.params))}this.K6(),this.iGt()}}}{let C33=self.$e,tempCandidates=[],tileCollRectCandidates=[],tempJumpthruRet=[],tempPolyA=C33.nh(C33.Mu),tempPolyB=C33.nh(C33.Mu),tempQuad=C33.nh(C33.Xl),tempRect=C33.nh(C33.Rect),tempRect2=C33.nh(C33.Rect),tempPolyC=null,tempRect3=null,tempQuadB=null;C33.SGt=class CollisionEngine extends C33.rh{constructor(t){super(),this.Qc=t,this.gGt=0,this.TGt=0,this._Gt=[],this.yGt=0,this.EGt=0,this.IGt=0,this.AGt=0,this.MGt=new self.j5(this)}ah(){this.Qc=null}I5(){return this.Qc}mP(){return this.MGt}RGt(){this.EGt=this.yGt,this.yGt=0,this.AGt=this.IGt,this.IGt=0}wGt(){return this.EGt}bGt(){return this.AGt}GGt(t,e){var i=t.s5(),s=e.s5();i&&s&&i.L7()&&s.L7()&&this._Gt.push([t,e])}nSt(e,i,s){for(var[r,h]of this._Gt){let t=null;if(e===r)t=h;else{if(e!==h)continue;t=r}!t.lSt(i)||s.includes(t)||s.push(t)}}aSt(t,e){if(this._Gt.length)for(var[i,s]of this._Gt)if(t===i&&e===s||t===s&&e===i)return!0;return!1}OGt(){C33.xn(this._Gt)}Y5(t,e){if(!t||!e||t===e)return!1;t=t.s5(),e=e.s5();if(!t.L7()||!e.L7())return!1;this.yGt++;var i=t.r5(),s=e.r5();return i.nj(s)?this.PGt(t,e):this.LGt(t,e)}PGt(t,e){var i,s;return!(!t.m7().kl(e.m7())||(this.IGt++,!t.S7().Su(e.S7()))||t.yMt()&&e.yMt())&&(t.yMt()?this.xGt(t,e):e.yMt()?this.xGt(e,t):!t.Abt()&&!e.Abt()||(i=t.Mbt(),s=e.Mbt(),i.Bu(s,e.rg()-t.rg(),e.ag()-t.ag())))}LGt(i,s){var t=i.yMt(),e=s.yMt();if(t&&!e)return this.DGt(i,s);if(e&&!t)return this.DGt(s,i);if(e||t)return!1;var r=i.r5(),h=s.r5(),n=(tempPolyA._(i.Mbt()),tempPolyB._(s.Mbt()),tempPolyA.Ou());for(let t=0,e=n.length;t<e;t+=2){var a=t+1,o=n[t],l=n[a],[o,l]=r.WN(o+i.rg(),l+i.ag());n[t]=o,n[a]=l}var u=tempPolyB.Ou();for(let t=0,e=u.length;t<e;t+=2){var c=t+1,f=u[t],d=u[c],[f,d]=h.WN(f+s.rg(),d+s.ag());u[t]=f,u[c]=d}return tempPolyA.Du(),tempPolyB.Du(),this.IGt++,tempPolyA.Bu(tempPolyB,0,0)}DGt(t,e){var i=t.r5(),s=e.r5(),r=(tempPolyC=tempPolyC||C33.nh(C33.Mu),tempRect3=tempRect3||C33.nh(C33.Rect),tempQuadB=tempQuadB||C33.nh(C33.Xl),e.rg()),h=e.ag(),[s,n]=s.WN(r,h),[i,s]=i.FN(s,n),a=i-r,o=s-h;if(tempRect3._(e.m7()),tempRect3.offset(a,o),!t.m7().kl(tempRect3))return!1;if(tempQuadB._(e.S7()),tempQuadB.offset(a,o),this.IGt++,!t.S7().Su(tempQuadB))return!1;tempPolyC._(e.Mbt());var l=tempPolyC.Ou();for(let t=0,e=l.length;t<e;t+=2){var u=t+1;l[t]+=a,l[u]+=o}return tempPolyC.Du(),this.xGt(t,e,i,s,tempPolyC,tempRect3,tempQuadB)}xGt(t,i,e,s,r,h,n){var a=void 0!==h?h:i.m7(),o=t.rg(),l=t.ag(),h=t.hB().O6(),u=void 0!==e?e:i.rg(),c=void 0!==s?s:i.ag(),f=i.Abt(),d=void 0!==n?n:i.S7(),C=tileCollRectCandidates;h.GetCollisionRectCandidates(a,C);for(let t=0,e=C.length;t<e;++t){var p=C[t],m=p.GetRect();if(this.yGt++,a.Wl(m,o,l)&&(tempQuad.du(m),tempQuad.offset(o,l),tempQuad.Su(d)))if(f){var v=void 0!==r?r:i.Mbt();let t=u,e=c;void 0!==r&&(t=i.rg(),e=i.ag());var S=p.GetPoly();if(S){if(this.IGt++,S.Bu(v,t-(o+m.ml()),e-(l+m.vl())))return C33.xn(C),!0}else if(tempPolyA.Fu(tempQuad,0,0),tempPolyA.Bu(v,t,e))return C33.xn(C),!0}else{S=p.GetPoly();if(!S)return C33.xn(C),!0;if(tempPolyA.Fu(d,0,0),S.Bu(tempPolyA,-(o+m.ml()),-(l+m.vl())))return C33.xn(C),!0}}return C33.xn(C),!1}NGt(t,a,o){var l=t.iD(),e=this.Qc.jP();if(!e)throw new Error("cannot call outside event");var u=e.Bct();let i=new Map;var c=t=>{let e=i.get(t);return void 0===e&&(e=t.CN(),i.set(t,e)),e};if(l.yct()){o||(l.bct(!1),C33.xn(l.Gct())),u&&C33.xn(l.Oct());for(var r of t.eD()){let i=r.s5(),s=i.r5(),t=!1;if(t=c(s)&&i.T7()?a.some(([t,e])=>{var[t,e]=s.FN(t,e,i.C7());return i.D7(t,e)}):t){if(o)return!1;l.Rct(r)}else u&&l.wct(r)}}else{let r,h=!1,n=(!u||e.GCt(this.Qc.Oft())||this.Qc.rSt()&&!l.Oct().length&&l.Gct().length?r=l.Gct():(r=l.Oct(),h=!0),0);for(let e=0,t=r.length;e<t;++e){var f=r[e];let i=f.s5(),s=i.r5(),t=!1;if(t=c(s)&&i.T7()?a.some(([t,e])=>{var[t,e]=s.FN(t,e,i.C7());return i.D7(t,e)}):t){if(o)return!1;h?l.Rct(f):r[n++]=f}else h?r[n++]=f:u&&l.wct(f)}o||(r.length=n)}return t.cpt(),i.clear(),!!o||l.Ect()}FGt(t,e){if(t)for(var i of e.VAt())if(!t.nj(i))return!1;return!0}sSt(t,e,i,s){if(e.hU())for(var r of e.sCt())this.FGt(t,r)?(r.BAt(),r.FAt().TV(i,s)):C33.qr(s,r.eD());else this.FGt(t,e)?(e.BAt(),e.FAt().TV(i,s)):C33.qr(s,e.eD())}nx(t,e,i,s){for(var r of e)this.sSt(t,r,i,s)}$Gt(t,e,i){var s=this.Qc.nEt();s&&this.nx(t,s._K(),e,i)}BGt(t,e,i){var s=this.Qc.aEt();s&&this.nx(t,s._K(),e,i)}ubt(t,e){return t.AMt()&&(!e||e.s5().ubt(t.rvt().get("solidTags")))}K5(t){var e,i=t.s5();this.$Gt(i.r5(),i.m7(),tempCandidates);for(e of tempCandidates)if(this.ubt(e,t)&&this.Y5(t,e))return C33.xn(tempCandidates),e;return C33.xn(tempCandidates),null}kGt(t,e){this.$Gt(null,t,tempCandidates);for(var i of tempCandidates)if(this.ubt(i,e)&&this.WGt(t,i))return C33.xn(tempCandidates),i;return C33.xn(tempCandidates),null}VGt(t,e){let i=null;e&&(i=tempJumpthruRet,C33.xn(i));var s,r=t.s5();this.BGt(r.r5(),r.m7(),tempCandidates);for(s of tempCandidates)if(s.RMt()&&this.Y5(t,s)){if(!e)return C33.xn(tempCandidates),s;i.push(s)}return C33.xn(tempCandidates),i}HGt(e,i,s,r,h){r=r||50;var n=e.s5(),a=n.rg(),o=n.ag();for(let t=0;t<r;++t)if(n.l7(a+i*t,o+s*t),n.o7(),!this.Y5(e,h))return!0;return n.l7(a,o),n.o7(),!1}UGt(e,i,s,r,h,n){r=r||50;var a=e.s5(),o=a.rg(),l=a.ag();let u=null,c=null;for(let t=0;t<r;++t)if(a.l7(o+i*t,l+s*t),a.o7(),!this.Y5(e,u))if(u=this.K5(e))c=u;else if(h&&(u=n?this.Y5(e,n)?n:null:this.VGt(e))&&(c=u),!u)return c&&this.jGt(e,i,s,c,16,!0),!0;return a.l7(o,l),a.o7(),!1}XGt(i,s,r,t){t=t||50;var h=i.s5(),n=h.rg(),a=h.ag();let o=null,l=null;for(let e=0;e<t;++e)for(let t=0;t<2;++t){var u=2*t-1;if(h.l7(n+s*e*u,a+r*e*u),h.o7(),!this.Y5(i,o)){if(!(o=this.K5(i)))return l&&this.jGt(i,s*u,r*u,l,16,!0),!0;l=o}}return h.l7(n,a),h.o7(),!1}jGt(t,e,i,s,r,h){let n=2,a=!1,o=!1;var l=t.s5();let u=l.rg(),c=l.ag();for(;n<=r;){var f=1/n;n*=2,l.f7(e*f*(a?1:-1),i*f*(a?1:-1)),l.o7(),this.Y5(t,s)||h&&this.K5(t)?(a=!0,o=!0):(a=!1,o=!1,u=l.rg(),c=l.ag())}o&&(l.l7(u,c),l.o7())}YGt(i,t=100){let s=0;var r=i.s5(),h=r.rg(),n=r.ag();let a=0,o=this.K5(i);if(!o)return!0;for(;s<=t;){let t=0,e=0;switch(a){case 0:t=0,e=-1,s++;break;case 1:t=1,e=-1;break;case 2:t=1,e=0;break;case 3:t=1,e=1;break;case 4:t=0,e=1;break;case 5:t=-1,e=1;break;case 6:t=-1,e=0;break;case 7:t=-1,e=-1}if(a=(a+1)%8,r.l7(Math.floor(h+t*s),Math.floor(n+e*s)),r.o7(),!this.Y5(i,o)&&!(o=this.K5(i)))return!0}return r.l7(h,n),r.o7(),!1}qGt(t,e,i,s){var r=t.s5(),h=r.rg(),n=r.ag(),a=Math.max(10,C33.Sh(e,i,h,n)),o=C33.Th(e,i,h,n),l=s||this.K5(t);if(!l)return C33.Ch(o+Math.PI);let u=l,c=0,f=0;var d=C33.ph(5);let C;for(C=1;C<36;++C){var p=o-C*d;if(r.l7(e+Math.cos(p)*a,i+Math.sin(p)*a),r.o7(),!this.Y5(t,u)&&!(u=s?null:this.K5(t))){c=p;break}}for(36===C&&(c=C33.Ch(o+Math.PI)),u=l,C=1;C<36;++C){var m=o+C*d;if(r.l7(e+Math.cos(m)*a,i+Math.sin(m)*a),r.o7(),!this.Y5(t,u)&&!(u=s?null:this.K5(t))){f=m;break}}if(36===C&&(f=C33.Ch(o+Math.PI)),r.l7(h,n),r.o7(),f===c)return f;l=C33._h(f,c)/2;let v;v=C33.Eh(f,c)?C33.Ch(c+l+Math.PI):C33.Ch(f+l);var h=Math.cos(o),n=Math.sin(o),l=Math.cos(v),S=Math.sin(v),g=h*l+n*S,h=h-2*g*l,l=n-2*g*S;return C33.Th(0,0,h,l)}zGt(t,e,i,s,r){var h;return!!r&&!!(h=r.s5()).L7()&&(this.yGt++,tempRect.set(Math.min(t,i),Math.min(e,s),Math.max(t,i),Math.max(e,s)),!!h.m7().kl(tempRect))&&(r.yMt()?this.KGt(t,e,i,s,r,h):(this.IGt++,!!h.S7().vu(t,e,i,s)&&(!h.Abt()||h.Mbt().vu(h.rg(),h.ag(),t,e,i,s))))}KGt(i,s,r,h,t,e){var n=e.rg(),a=e.ag(),e=t.O6(),o=tileCollRectCandidates;tempRect2.set(i,s,r,h),tempRect2.normalize(),e.GetCollisionRectCandidates(tempRect2,o);for(let t=0,e=o.length;t<e;++t){var l=o[t],u=l.GetRect();if(this.yGt++,tempRect.Wl(u,n,a)&&(tempQuad.du(u),tempQuad.offset(n,a),tempQuad.vu(i,s,r,h))){l=l.GetPoly();if(!l)return C33.xn(o),!0;if(this.IGt++,l.vu(n+u.ml(),a+u.vl(),i,s,r,h))return C33.xn(o),!0}}return C33.xn(o),!1}WGt(t,e){var i;return!!e&&!!(i=e.s5()).L7()&&(this.yGt++,!!i.m7().kl(t))&&(e.yMt()?this.JGt(t,e,i):(this.IGt++,tempQuad.du(t),!!i.S7().Su(tempQuad)&&(!i.Abt()||((e=tempPolyA).du(t,i.rg(),i.ag()),t=i.Mbt(),e.Bu(t,0,0)))))}JGt(i,t,e){var s=e.rg(),r=e.ag(),e=t.O6(),h=tileCollRectCandidates;e.GetCollisionRectCandidates(i,h);for(let t=0,e=h.length;t<e;++t){var n=h[t],a=n.GetRect();if(this.yGt++,i.Wl(a,s,r)){n=n.GetPoly();if(!n)return C33.xn(h),!0;if(this.IGt++,tempPolyA.du(i,0,0),n.Bu(tempPolyA,-(s+a.ml()),-(r+a.vl())))return C33.xn(h),!0}}return C33.xn(h),!1}ZGt(t,e){var i;t&&(i=t.s5()).L7()&&(this.yGt++,i.m7().kl(e.rect))&&(t.yMt()?this.QGt(t,i,e):(this.IGt++,i.Abt()?e.t4t(t,i.rg(),i.ag(),i.Mbt()):e.e4t(t,i.S7())))}QGt(i,s,r){var h=s.rg(),n=s.ag(),a=tileCollRectCandidates;i.O6().GetCollisionRectCandidates(r.rect,a);for(let t=0,e=a.length;t<e;t++){var o=a[t],l=o.GetRect();this.yGt++,r.rect.Wl(l,h,n)&&(o=o.GetPoly(),this.IGt++,o?r.t4t(i,h+l.ml(),n+l.vl(),o):r.i4t(i,s.rg(),s.ag(),l))}C33.xn(a)}Z5(t,e){if(t!==this.gGt||e!==this.TGt){var i;this.gGt=t,this.TGt=e;for(i of this.Qc.rU())if(i._x()){for(var s of i.tD())s.s5().obt();i.FAt().s4t(t,e),i.$At();for(var r of i.tD()){r=r.s5();r.Fbt(),r.kAt()}}}}tx(){return[this.gGt,this.TGt]}r4t(t,e){this.gGt=t,this.TGt=e}}}{let C33=self.$e;C33.pIt=class SparseGrid extends C33.rh{constructor(t,e){super(),this.dV=t,this.CV=e,this.pV=C33.nh(C33.ju)}ah(){this.pV.ah(),this.pV=null}s4t(t,e){if(!this.pV.qu())throw new Error("grid not empty");this.dV=t,this.CV=e}mV(t,e,i){var s=this.pV.ri(t,e);return s||(i?(s=C33.nh(C33.h4t,this,t,e),this.pV.Set(t,e,s),s):null)}vV(t){t=Math.floor(t/this.dV);return isFinite(t)?t:0}SV(t){t=Math.floor(t/this.CV);return isFinite(t)?t:0}gV(s,r,h){if(r)for(let i=r.ml(),t=r.Sl();i<=t;++i)for(let t=r.vl(),e=r.gl();t<=e;++t){var n;h&&h.Vl(i,t)||(n=this.mV(i,t,!1))&&(n.Sf(s),n.qu())&&this.pV.zu(i,t)}if(h)for(let i=h.ml(),t=h.Sl();i<=t;++i)for(let t=h.vl(),e=h.gl();t<=e;++t)r&&r.Vl(i,t)||this.mV(i,t,!0).lV(s)}TV(t,e){let i=this.vV(t.ml());var s=this.SV(t.vl()),r=this.vV(t.Sl()),h=this.SV(t.gl());if(isFinite(r)&&isFinite(h))for(;i<=r;++i)for(let t=s;t<=h;++t){var n=this.mV(i,t,!1);n&&n.cV(e)}}}}{let C33=self.$e;C33.h4t=class GridCell extends C33.rh{constructor(t,e,i){super(),this.iV=t,this.Yo=e,this.qo=i,this.sV=C33.nh(C33.Qu)}ah(){this.sV.ah(),this.sV=null,this.iV=null}qu(){return this.sV.qu()}lV(t){this.sV.sc(t)}Sf(t){this.sV.zu(t)}cV(t){C33.qr(t,this.sV.rc())}}}{let C33=self.$e,PADDING=1e-6,NO_HIT=2;C33.n4t=class Ray{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new C33.Rect,this.a4t=NO_HIT,this.o4t=null,this.l4t=0,this.u4t=0,this.c4t=0,this.f4t=0,this.d4t=0,this.Mt=0,this.C4t=1,this.p4t=0,this.m4t=1,this.v4t=0}S4t(){return this.a4t<1+PADDING}rf(){this.a4t=NO_HIT}Set(t,e,i,s){return this.x1=t,this.y1=e,this.x2=i,this.y2=s,this.dx=i-t,this.dy=s-e,this.rect.set(t,e,i,s),this.rect.normalize(),this.a4t=NO_HIT,this.o4t=null,this.l4t=0,this.u4t=0,this.c4t=0,this.f4t=0,this.d4t=0,this.Mt=0,this.C4t=1,this.p4t=0,this.m4t=1,this.v4t=0,this}g4t(){var t,e,i;!1!==this.S4t()&&(e=this.dx*this.a4t,t=this.dy*this.a4t,i=e/(e=Math.hypot(e,t)),t=t/e,this.Mt=e-PADDING,this.f4t=this.x1+i*this.Mt,this.d4t=this.y1+t*this.Mt,this.l4t=Math.atan2(this.c4t,this.u4t)+Math.PI/2,this.C4t=Math.cos(this.l4t),this.p4t=Math.sin(this.l4t),e=i*this.C4t+t*this.p4t,this.m4t=i-2*this.C4t*e,this.v4t=t-2*this.p4t*e,0<e)&&(i=Math.PI,this.l4t=C33.Ch(this.l4t+i),this.C4t=-this.C4t,this.p4t=-this.p4t)}T4t(t,e,i,s,r){var h=C33.ln(this.x1,this.y1,this.x2,this.y2,e,i,s,r);0<=h&&h<this.a4t&&(this.a4t=h,this.o4t=t.uF(),this.u4t=e-s,this.c4t=i-r)}i4t(t,e,i,s){var r=e+s.ml(),e=e+s.Sl(),h=i+s.vl(),i=i+s.gl();this.T4t(t,r,h,e,h),this.T4t(t,e,h,e,i),this.T4t(t,e,i,r,i),this.T4t(t,r,i,r,h)}e4t(t,e){var i=e.Jh(),s=e.Zh(),r=e.Qh(),h=e.tn(),n=e.sn(),a=e.rn(),o=e.hn(),e=e.nn();this.T4t(t,i,s,r,h),this.T4t(t,r,h,n,a),this.T4t(t,n,a,o,e),this.T4t(t,o,e,i,s)}t4t(i,s,r,t){var h=t.Ou();for(let t=0,e=h.length;t<e;t+=2){var n=(t+2)%e,a=h[t]+s,o=h[t+1]+r,l=h[n]+s,n=h[1+n]+r;this.T4t(i,a,o,l,n)}}}}{let C33=self.$e,VALID_FULLSCREEN_MODES=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),VALID_FULLSCREEN_SCALING_QUALITIES=new Set(["high","low"]),glMatrix=self.pe,mat42=glMatrix.ge,vec32=glMatrix.Ee,tempProjection=mat42.create(),PERCENTTEXT_WIDTH=300,PERCENTTEXT_HEIGHT=200,PROGRESSBAR_WIDTH=120,PROGRESSBAR_HEIGHT=8,tempQuad=C33.nh(C33.Xl),tempRect=C33.nh(C33.Rect),SPLASH_MIN_DISPLAY_TIME=3e3,SPLASH_AFTER_FADEOUT_WAIT_TIME=200,SPLASH_FADE_DURATION=300;C33._4t=class CanvasManager extends C33.rh{constructor(t){super(),this.Qc=t,this.y4t=[],this.E4t=!1,this.I4t=null,this.A4t=null,this.M4t=null,this.R4t="high-performance",this.w4t=!1,this.b4t=0,this.G4t=0,this.O4t="",this.P4t=0,this.L4t=0,this.x4t=0,this.D4t=0,this.N4t=0,this.F4t=0,this.vm="normalized",this.$4t=0,this.B4t=1,this.k4t=1e4,this.qm=!0,this.W4t=0,this.b4=0,this.G4=0,this.V4t="letterbox-scale",this.H4t="letterbox-scale",this.U4t=0,this.j4t=0,this.X4t=mat42.create(),this.Y4t="high",this.q4t=this.Y4t,this.z4t=!1,this.K4t=[],this.J4t=new Set,this.Z4t=self.C3_Shaders,this.Q4t=C33.nh(C33.jp.PG,{wG:()=>[this.Bj(),this.kj()],bG:()=>this.tOt(),GG:t=>this.eOt(t),getTime:()=>this.I5().cL(),OG:()=>this.I5().u5()}),this.iOt=0,this.sOt=0,this.rOt=NaN,this.hOt=null,this.nOt=new Map,this.aOt=NaN,this.oOt=new Map,this.lOt="",this.uOt=1,this.cOt=C33.nh(C33.Rect),this.fOt="",this.dOt=null,this.COt=null,this.pOt=0,this.mOt=0,this.vOt=-1,this.SOt=0,this.gOt=t=>this.SOt=t.progress,this.TOt=null,this._Ot={yOt:null,EOt:null,IOt:null},this.AOt=0,this.MOt=0,this.ROt=0,this.wOt="fade-in",this.bOt=null,this.GOt=new Promise(t=>this.bOt=t)}OOt(t){this.R4t=t}POt(t){this.E4t=!!t}LOt(t){this.vm=t}xOt(){return this.vm}DOt(t){this.$4t=t}NOt(t,e){this.B4t=t,this.k4t=e}FOt(t){this.w4t=!!t}async Aa(t){var e=t.canvas,e=(this.y4t.push({canvas:e,$Ot:null}),this.Qc.FF("runtime","window-resize",t=>this.BOt(t)),this.Qc.FF("runtime","fullscreenchange",t=>this.kOt(t)),this.Qc.FF("runtime","fullscreenerror",t=>this.WOt(t)),e.addEventListener("webglcontextlost",t=>this.VOt(t)),e.addEventListener("webglcontextrestored",t=>this.HOt(t)),this.z4t=!!t.isFullscreen,this.O4t=t.cssDisplayMode,navigator.gpu&&this.E4t);let i=!1;if(e)try{await this.UOt(!0)}catch(t){this.jOt("WebGPU",t),this.A4t=null}if(!this.RS())try{await this.XOt(!0)}catch(t){this.jOt("WebGL",t),this.I4t=null}if(this.RS()||(i=!0),!this.RS()&&e)try{await this.UOt(!1)}catch(t){this.jOt("WebGPU",t),this.A4t=null}if(!this.RS())try{await this.XOt(!1)}catch(t){this.jOt("WebGL",t),this.I4t=null}e=this.RS();if(!e)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");e.hS(i),this.A4t&&(this.A4t.YOt=()=>this.qOt(),this.A4t.zOt=()=>this.KOt()),"normalized"===this.vm?e.f2():(e.d2(),e.u2(this.$4t)),this.LM(t.windowInnerWidth,t.windowInnerHeight,!0),await this.eGt()}jOt(t,e){e&&"string"==typeof e.message&&e.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,e)}async UOt(t){var e={om:this.B4t,lm:this.k4t},t={powerPreference:this.R4t,depth:this.Qc.YU(),failIfMajorPerformanceCaveat:t,JOt:this.Qc.qj(),ZOt:this.Qc.QOt(),VR:this.Qc.tPt()};this.A4t=C33.nh(C33.jp.WebGPURenderer,e),await this.A4t.F_(this.y4t[0].canvas,t)}async XOt(t){t={alpha:!0,powerPreference:this.R4t,WR:"xbox-uwp-webview2"!==this.Qc.sW(),depth:this.Qc.YU(),VR:this.Qc.tPt(),failIfMajorPerformanceCaveat:t,om:this.B4t,lm:this.k4t};this.w4t&&(t.HR=1),this.I4t=C33.nh(C33.jp.YR,this.y4t[0].canvas,t),await this.I4t.Qm()}async ePt(){if(this.Z4t){var t,e,i=[];for([t,e]of Object.entries(this.Z4t)){e.src=e.wgsl;var s=C33.jp.WebGPUShaderProgram.uE();i.push(this.A4t.Qw(Object.assign({x_:s,name:t},e)))}await Promise.all(i)}}async iPt(){if(this.Z4t){var e,i,s=[];for([e,i]of Object.entries(this.Z4t)){let t;if(i.glslWebGL2&&2<=this.I4t.ET())i.src=i.glslWebGL2,t=C33.jp.P_.cE();else{if(!i.glsl)throw new Error(`shader '${e}' does not support WebGL 1`);i.src=i.glsl,t=C33.jp.P_.uE()}s.push(this.I4t.Qw(Object.assign({x_:t,name:e},i)))}await Promise.all(s),this.I4t.tb(),this.I4t.M2()}this.I4t.CG()&&(this.hOt=C33.nh(C33.jp.OR,this.I4t))}async eGt(){this.A4t?await this.ePt():this.I4t&&await this.iPt();var t,e=this.RS();e.sS(this.qm),e.CG()&&(this.rOt=0);for(t of this.Qc.sPt()){for(var i of t.pD())i.eGt(e);t.eGt(e),t.K6()}this.M4t=new self.f8(this.Qc,e)}ah(){this.Qc=null,this.I4t=null,this.y4t.length=0}AP(){return this.Qc.AP()}BOt(t){var e,i=this.Qc;i.rPt()||(e=t.devicePixelRatio,this.AP()&&(self.devicePixelRatio=e),i.hPt(e),this.z4t=!!t.isFullscreen,this.O4t=t.cssDisplayMode,this.LM(t.innerWidth,t.innerHeight),i.u5(),(e=new C33.Event("window-resize")).data=t,i.x3().X3(e),(t=new C33.Event("resize")).nPt=this.Ck(),t.aPt=this.pk(),t.oPt=this.lPt(),t.uPt=this.cPt(),i.Zq(t),i.Qq()&&(i.g0t()||self.C3Debugger.IsDebuggerPaused())&&i.aO())}kOt(t){this.z4t=!!t.isFullscreen,this.LM(t.innerWidth,t.innerHeight,!0),this.Qc.u5()}WOt(t){this.z4t=!!t.isFullscreen,this.LM(t.innerWidth,t.innerHeight,!0),this.Qc.u5()}LM(t,e,i=!1){if(t=Math.floor(t),e=Math.floor(e),t<=0||e<=0)throw new Error("invalid size");if(this.b4t!==t||this.G4t!==e||i){this.b4t=t,this.G4t=e;var s,i=this.fPt();"letterbox-scale"===i?this.dPt(t,e):"letterbox-integer-scale"===i?this.CPt(t,e):"off"===i?this.pPt(t,e):this.mPt(t,e),this.vPt(i);for({canvas:s}of this.y4t)s.width=this.x4t,s.height=this.D4t;this.Qc.i3("canvas","update-size",{marginLeft:this.N4t,marginTop:this.F4t,styleWidth:this.P4t,styleHeight:this.L4t,displayScale:this.mk()});var r,h=this.RS();h.LM(this.x4t,this.D4t,!0);for(r of this.K4t)h.oG(r);C33.xn(this.K4t),this.SPt();t=this.Qc.FL();t.yz(),t.Ez()}}SPt(){this.RS().m2(this.X4t,this.Bj()/this.kj())}Wj(){return this.X4t}dPt(t,e){var i=this.Qc.mU(),s=this.Qc.RP(),r=this.Qc.bP(),h=s/r;h<t/e?(this.P4t=Math.round(e*h),this.L4t=e,this.N4t=Math.floor((t-this.P4t)/2),this.F4t=0):(h=t/h,this.P4t=t,this.L4t=Math.round(h),this.N4t=0,this.F4t=Math.floor((e-this.L4t)/2)),this.x4t=Math.round(this.P4t*i),this.D4t=Math.round(this.L4t*i),this.Qc.gPt(s,r)}CPt(t,e){var i=this.Qc.mU(),s=(1!==i&&(t+=1,e+=1),this.Qc.RP()),r=this.Qc.bP(),h=s/r;let n;1<(n=h<t/e?e*h*i/s:t/h*i/r)?n=Math.floor(n):n<1&&(n=1/Math.ceil(1/n)),this.x4t=Math.round(s*n),this.D4t=Math.round(r*n),this.P4t=this.x4t/i,this.L4t=this.D4t/i,this.N4t=Math.max(Math.floor((t-this.P4t)/2),0),this.F4t=Math.max(Math.floor((e-this.L4t)/2),0),this.Qc.gPt(s,r)}mPt(t,e){var i=this.Qc.mU(),t=(this.P4t=t,this.L4t=e,this.x4t=Math.round(this.P4t*i),this.D4t=Math.round(this.L4t*i),this.N4t=0,this.F4t=0,this.mk());this.Qc.gPt(this.P4t/t,this.L4t/t)}pPt(t,e){var i=this.Qc.mU();this.P4t=this.Qc.FU(),this.L4t=this.Qc.$U(),this.x4t=Math.round(this.P4t*i),this.D4t=Math.round(this.L4t*i),this.TPt()?(this.N4t=Math.floor((t-this.P4t)/2),this.F4t=Math.floor((e-this.L4t)/2)):(this.N4t=0,this.F4t=0),this.Qc.gPt(this.Qc.FU(),this.Qc.$U())}vPt(i){if("high"===this.Y4t)this.b4=this.x4t,this.G4=this.D4t,this.q4t="high";else{let t,e;var s,r;e="off"===this.fPt()?(t=this.Qc.FU(),this.Qc.$U()):(t=this.Qc.RP(),this.Qc.bP()),this.x4t<t||this.D4t<e?(this.b4=this.x4t,this.G4=this.D4t,this.q4t="high"):(this.b4=t,this.G4=e,this.q4t="low","scale-inner"===i?(s=t/e,(r=this.b4t/this.G4t)<s?this.b4=this.G4*r:s<r&&(this.G4=this.b4/r)):"scale-outer"===i&&((s=t/e)<(r=this.b4t/this.G4t)?this.b4=this.G4*r:r<s&&(this.G4=this.b4/r)))}}I5(){return this.Qc}_Pt(){return this.y4t[0].canvas}SH(){return this.Q4t}TPt(){return this.z4t}yPt(){return this.O4t}EPt(t){if(!VALID_FULLSCREEN_MODES.has(t))throw new Error("invalid fullscreen mode");this.V4t=t;t=this.Qc.FL();t.yz(),t.Ez()}fk(){return this.V4t}IPt(t){if(!VALID_FULLSCREEN_MODES.has(t))throw new Error("invalid fullscreen mode");this.H4t=t;t=this.Qc.FL();t.yz(),t.Ez()}APt(){return this.H4t}fPt(){return this.TPt()?this.APt():this.fk()}MPt(t){if(!VALID_FULLSCREEN_SCALING_QUALITIES.has(t))throw new Error("invalid fullscreen scaling quality");this.Y4t=t,this.Qc.FL().yz()}RPt(){return this.Y4t}zj(){return this.q4t}static wPt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}YB(){return this.b4t}zB(){return this.G4t}Bj(){return this.b4}kj(){return this.G4}sS(t){this.qm=!!t}bPt(t){this.W4t=t}KW(){return this.W4t}GPt(){return this.RS().oR()}VOt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.K4t=[],this.J4t.clear(),this.Q4t.zS(),this.I4t.zS(),this.Qc.KY()}qOt(){console.log("[Construct] WebGPU device lost"),this.K4t=[],this.J4t.clear(),this.Q4t.zS(),this.Qc.KY()}async HOt(t){await this.I4t.KS(),await this.eGt(),await this.Qc.OPt(),console.log("[Construct] WebGL context restored")}async KOt(){await this.eGt(),await this.Qc.OPt(),console.log("[Construct] WebGPU device restored")}PPt(){return this.I4t}LPt(){return this.A4t}RS(){return this.A4t||this.I4t}fAt(){return this.M4t}YN(){return"low"===this.q4t?1/this.Qc.mU():this.mk()}mk(){var t,e,i,s,r=this.fPt();return"off"===r||"crop"===r?1:(i=(t=this.Qc.RP())/(e=this.Qc.bP()),s=this.x4t/this.D4t,"scale-inner"!==r&&i<s||"scale-inner"===r&&s<i?this.L4t/e:this.P4t/t)}TX(){return"low"===this.zj()?1:this.mk()}SX(){return"low"===this.zj()?1:this.Qc.mU()}xPt(t,e){this.U4t=t,this.j4t=e}Q8(e,i,s,t=!0){i=i||this.b4,s=s||this.G4;var r=i/2+this.U4t,h=s/2+this.j4t;if(t){let t=this.Wj();i===this.b4&&s===this.G4||(e.m2(tempProjection,i/s),t=tempProjection),e.ib(t)}t=e.T2(r,h,e.e2(s),r,h,0,s);e.ob(t)}DPt(t,e=!0){var i=this.Ck(),s=this.pk(),i=i/2,r=s/2,e=(e&&t.ib(this.Wj()),t.T2(i,r,t.e2(s),i,r,0,s));t.ob(e)}lPt(){return this.x4t}cPt(){return this.D4t}Ck(){return this.P4t}pk(){return this.L4t}$N(){return this.N4t}BN(){return this.F4t}LY(){return this.y4t.length}NPt(){return"undefined"!=typeof OffscreenCanvas&&this._Pt()instanceof OffscreenCanvas&&("Chromium"!==C33.ci.Si||124<=C33.ci.vi)}async eq(e,i=!1){if(e<1)throw new Error("invalid HTML layer count");if(this.y4t.length!==e){i={count:e,immediate:i,marginLeft:this.N4t,marginTop:this.F4t,styleWidth:this.P4t,styleHeight:this.L4t};let t;if(t=this.AP()?await this.Qc.f5("canvas","set-html-layer-count",i):self.c3_runtimeInterface._OnSetHTMLLayerCount(i),e<this.y4t.length)this.y4t.length=e;else for(var s of t.addedCanvases){s.width=this.x4t,s.height=this.D4t;var r=this.NPt()?"bitmaprenderer":"2d",h=s.getContext(r);if(!h)throw new Error(`failed to acquire '${r}' canvas context`);this.y4t.push({canvas:s,$Ot:h})}this.Qc.u5()}}zq(t){var e;t>=this.y4t.length||(e=this._Pt(),t=this.y4t[t].$Ot,this.NPt()?t.transferFromImageBitmap(e.transferToImageBitmap()):(t.globalCompositeOperation="copy",t.drawImage(e,0,0)))}Kj(e){e.depth=this.Qc.YU();var t=this.K4t,i=t.findIndex(t=>t.M_(e));let s;return-1!==i?(s=t[i],t.splice(i,1)):s=this.RS().sG(e),this.J4t.add(s),s}TH(t){if(!this.J4t.has(t))throw new Error("render target not in use");this.J4t.delete(t),this.K4t.push(t)}tOt(){var t={rT:this.Qc.GP()};return"low"===this.zj()&&(t.width=this.Bj(),t.height=this.kj()),this.Kj(t)}eOt(t){this.TH(t)}*FPt(){for(var t of this.Qc.FL().gz())for(var e of t.OD()){e=this.nOt.get(e);e&&(yield e)}}jj(t){if(!this.RS().CG())return null;let e=this.nOt.get(t);return e||(e={a7:t,name:t.jc(),$Pt:C33.nh(C33.jp.OR,this.I4t),BPt:0,kPt:0,WPt:0},this.nOt.set(t,e)),e.$Pt}VPt(){var t=this.RS();if(t.CG()&&0===this.sOt){this.sOt=t.eS(),this.aOt=NaN;for(var e of this.FPt())e.BPt=NaN}}HPt(){this.I4t&&this.I4t.CG()&&this.UPt(),this.A4t&&this.A4t.CG()&&this.jPt()}UPt(){if(isNaN(this.aOt)&&(this.aOt=this.hOt.$R(this.iOt,this.sOt),!isNaN(this.aOt))){if(this.Qc.Qq())for(var t of this.FPt())if(t.BPt=t.$Pt.$R(this.iOt,this.sOt),isNaN(t.BPt))return;if(this.hOt.BR(this.sOt),this.rOt=Math.min(this.aOt,1),this.Qc.Qq()){let i=new Map;for(var e of this.FPt())e.$Pt.BR(this.sOt),e.kPt=Math.min(e.BPt,1),i.set(e.a7,e.kPt);for(var s of this.FPt()){var r=s.a7,r=(i.get(r)||0)-r.tN().reduce((t,e)=>t+(i.get(e)||0),0);s.WPt=C33.dh(r,0,1)}var h=this.Qc.xL(),h=this.rOt-h.fU().reduce((t,e)=>t+(i.get(e)||0),0);self.C3Debugger.UpdateGPUProfile(C33.dh(h,0,1),this.rOt,[...this.FPt()])}this.iOt=this.sOt,this.sOt=0}}XPt(){return this.hOt}jPt(){if(0!==this.sOt){for(let t=this.iOt;t<this.sOt;++t){var i=this.oOt.get(t);if(i&&!i.TR())return}var t=this.Qc.xL(),r=C33.Na(t.RY()+1,0);let e=0;for(let t=this.iOt;t<this.sOt;++t){var h=this.oOt.get(t);if(h){var n=h._R();let i=BigInt(0),s=BigInt(0);var a=BigInt(0);for(let t=0,e=Math.min(r.length,n.length/2);t<e;++t){var o=n[2*t],l=n[2*t+1],l=(o!==a&&(i===a||o<i)&&(i=o),l>s&&(s=l),l-o),o=Number(l)/1e9;r[t]+=o}h=s-i,h=Number(h)/1e9;e+=h}}if(this.rOt=C33.dh(e,0,1),this.Qc.Qq()){var u=t.OD();let i=new Map;for(let t=0,e=Math.min(u.length,r.length-1);t<e;++t){var c=r[t+1];i.set(u[t],c)}var f,d,C=[];let s=new Map;for([f,d]of i){var p=[...f.iN()].reduce((t,e)=>t+(i.get(e)||0),0);s.set(f,p),C.push({name:f.jc(),WPt:C33.dh(d,0,1),kPt:C33.dh(p,0,1)})}t=this.rOt-t.fU().reduce((t,e)=>t+(s.get(e)||0),0);self.C3Debugger.UpdateGPUProfile(C33.dh(t,0,1),this.rOt,C)}for(let t=this.iOt;t<this.sOt;++t)this.oOt.delete(t);this.iOt=this.sOt,this.sOt=0}}YPt(t){this.oOt.set(this.A4t.eS(),t)}EL(){return this.rOt}qPt(t,e,i,s,r,h){return this.lOt=t,this.uOt=e,this.cOt.ol(i,s,r,h),this.dOt||(this.dOt=new Promise(t=>{this.COt=t})),this.dOt}zPt(){if(this.lOt){let t=this._Pt();var s=this.cOt,r=C33.dh(Math.floor(s.ml()),0,t.width),h=C33.dh(Math.floor(s.vl()),0,t.height);let e=s.width(),i=(e=0===e?t.width-r:C33.dh(Math.floor(e),0,t.width-r),s.height());i=0===i?t.height-h:C33.dh(Math.floor(i),0,t.height-h),(0!==r||0!==h||e!==t.width||i!==t.height)&&0<e&&0<i&&((s=C33.Aa(e,i)).getContext("2d").drawImage(t,r,h,e,i,0,0,e,i),t=s),C33.Ma(t,this.lOt,this.uOt).then(t=>{this.fOt&&URL.revokeObjectURL(this.fOt),this.fOt=URL.createObjectURL(t),this.dOt=null,this.COt(this.fOt)}),this.lOt="",this.uOt=1}}KPt(){return this.fOt}JPt(t){t?this.pOt++:this.pOt--}ZPt(){return 0<this.pOt}QPt(t){let e=this.RS();var i;2===t?(this.TOt=C33.nh(C33.jp.dS,this.RS()),this.TOt.lM("Arial"),this.TOt.uM(16),this.TOt.IM("center"),this.TOt.MM("center"),this.TOt.LM(PERCENTTEXT_WIDTH,PERCENTTEXT_HEIGHT)):0===t?(i=this.Qc.tLt())&&i.j8(e).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t)):4===t&&(this.eLt("splash-images/splash-logo.svg").then(t=>{"done"===this.wOt?e.c_(t):this._Ot.yOt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.iLt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.wOt?e.c_(t):this._Ot.EOt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.iLt("splash-images/splash-website-512.png").then(t=>{"done"===this.wOt?e.c_(t):this._Ot.IOt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async eLt(t){t=new URL(t,this.Qc.sLt()).toString();t=await C33.Sa(t),t=await this.Qc.rLt(t,2048,2048);return this.RS().iG(t,{oT:"high"})}async iLt(t){t=new URL(t,this.Qc.sLt()).toString();t=await C33.Sa(t);return this.RS().iG(t,{oT:"high"})}hLt(){this.Qc.i3("runtime","hide-cordova-splash")}nLt(){this.mOt=Date.now(),this.Qc.x3().addEventListener("loadingprogress",this.gOt),this.vOt=requestAnimationFrame(()=>this.aLt()),3!==this.Qc.oLt()&&this.hLt()}async lLt(){var t=this.RS(),e=(this.SOt=1,this.Qc.oLt());4===e&&await this.GOt,this.bOt=null,this.GOt=null,-1!==this.vOt&&(cancelAnimationFrame(this.vOt),this.vOt=-1),this.Qc.x3().removeEventListener("loadingprogress",this.gOt),this.gOt=null,this.TOt&&(this.TOt.ah(),this.TOt=null),this.Qc.uLt(),t.Xb(),this._Ot.yOt&&(t.c_(this._Ot.yOt),this._Ot.yOt=null),this._Ot.EOt&&(t.c_(this._Ot.EOt),this._Ot.EOt=null),this._Ot.IOt&&(t.c_(this._Ot.IOt),this._Ot.IOt=null),t.jb(0,0,0,0),t.Qv(),this.wOt="done",this.iOt=t.eS(),3===e&&this.hLt()}aLt(){if(-1!==this.vOt){var t=this.RS(),e=(t.Xb(),this.vOt=-1,this.Qc.CP()._W()),i=this.Qc.oLt();if(3!==i&&(this.DPt(t),t.jb(0,0,0,0),t.vb(),t.M2(),t.gb(null)),0===i)this.cLt(e);else if(1===i)this.fLt(e,PROGRESSBAR_WIDTH,0);else if(2===i)this.dLt(e);else if(3===i)C33.Gn();else{if(4!==i)throw new Error("invalid loader style");this.CLt(e)}t.Qv(),this.vOt=requestAnimationFrame(()=>this.aLt())}}dLt(t){t?this.TOt.EM(1,0,0):this.TOt.EM(.6,.6,.6),this.TOt.s3(Math.round(100*this.SOt)+"%");var t=this.P4t/2,e=this.L4t/2,i=PERCENTTEXT_WIDTH/2,s=PERCENTTEXT_HEIGHT/2,t=(tempQuad.eu(t-i,e-s,t+i,e+s),this.RS());t.gb(this.TOt.v_()),t.Iv(tempQuad,this.TOt.uR())}fLt(t,e,i){var s=this.RS(),r=PROGRESSBAR_HEIGHT,t=(s.P2(),t?s.pb(1,0,0,1):s.pb(.118,.565,1,1),this.P4t/2),h=this.L4t/2,n=e/2,a=r/2;tempRect.ol(t-n,h-a+i,Math.floor(e*this.SOt),r),s.Rect(tempRect),tempRect.ol(t-n,h-a+i,e,r),tempRect.offset(-.5,-.5),tempRect.bl(.5,.5),s.pb(0,0,0,1),s.bv(tempRect),tempRect.bl(1,1),s.pb(1,1,1,1),s.bv(tempRect)}cLt(t){var e,i,s,r,h,n=this.RS(),a=this.Qc.tLt();(a=a&&a.v_())?(e=a.eC(),h=a.cC(),i=this.P4t/2,s=this.L4t/2,r=e/2,h=h/2,tempQuad.eu(i-r,s-h,i+r,s+h),n.gb(a),n.Xl(tempQuad),this.fLt(t,e,16+h)):this.fLt(t,PROGRESSBAR_WIDTH,0)}CLt(t){var e=this.RS(),i=this._Ot.yOt,s=this._Ot.EOt,r=this._Ot.IOt,h=Date.now(),n=(0===this.AOt&&(this.mOt=h),this.Qc.pLt()||this.Qc.mLt()&&!this.Qc.vLt()),a=n?0:SPLASH_AFTER_FADEOUT_WAIT_TIME,o=n?0:SPLASH_MIN_DISPLAY_TIME;let l=1;"fade-in"===this.wOt?l=Math.min((h-this.mOt)/SPLASH_FADE_DURATION,1):"fade-out"===this.wOt&&(l=Math.max(1-(h-this.ROt)/SPLASH_FADE_DURATION,0)),e.P2(),e.pb(.231*l,.251*l,.271*l,l),tempRect.set(0,0,this.P4t,this.L4t),e.Rect(tempRect);var u=Math.ceil(this.P4t),c=Math.ceil(this.L4t);let f,d;256<this.L4t?(e.pb(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),tempRect.ol(0,.8*c-d/2,f,d),e.Rect(tempRect),t?e.pb(l,0,0,l):e.pb(.161*l,.953*l,.816*l,l),f=u*this.SOt,tempRect.ol(.5*u-f/2,.8*c-d/2,f,d),e.Rect(tempRect),e.pb(l,l,l,l),e.M2(),s&&(f=1.5*C33.dh(.22*c,105,.6*u),d=f/8,tempRect.ol(.5*u-f/2,.2*c-d/2,f,d),e.gb(s),e.Rect(tempRect)),i&&(f=Math.min(.395*c,.95*u),d=f,tempRect.ol(.5*u-f/2,.485*c-d/2,f,d),e.gb(i),e.Rect(tempRect)),r&&(f=1.5*C33.dh(.22*c,105,.6*u),d=f/8,tempRect.ol(.5*u-f/2,.868*c-d/2,f,d),e.gb(r),e.Rect(tempRect))):(e.pb(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),tempRect.ol(0,.85*c-d/2,f,d),e.Rect(tempRect),t?e.pb(l,0,0,l):e.pb(.161*l,.953*l,.816*l,l),f=u*this.SOt,tempRect.ol(.5*u-f/2,.85*c-d/2,f,d),e.Rect(tempRect),e.pb(l,l,l,l),e.M2(),i&&(f=.55*c,d=f,tempRect.ol(.5*u-f/2,.45*c-d/2,f,d),e.gb(i),e.Rect(tempRect))),this.AOt++,"fade-in"===this.wOt&&h-this.mOt>=SPLASH_FADE_DURATION&&2<=this.AOt&&(this.wOt="wait",this.MOt=h),"wait"===this.wOt&&h-this.MOt>=o&&1<=this.SOt&&(this.wOt="fade-out",this.ROt=h),("fade-out"===this.wOt&&h-this.ROt>=SPLASH_FADE_DURATION+a||n&&1<=this.SOt&&h-this.mOt<500)&&this.bOt()}}}{let C33=self.$e,C3Debugger=self.C3Debugger,assert=self.assert,DEFAULT_RUNTIME_OPTS={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},ife=!0;C33.SLt=class C3Runtime extends C33.rh{constructor(t){t=Object.assign({},DEFAULT_RUNTIME_OPTS,t),super(),this.gLt=t.messagePort,this.TLt=t.runtimeBaseUrl,this._Lt=t.previewUrl,this.yLt=!!t.headless,this.ELt=!!t.hasDom,this.ILt=!!t.isInWorker,ife=t.ife,this.ALt=!!t.useAudio,this.MLt=t.exportType,this._9=!!t.isiOSCordova,this.RLt=!!t.isiOSWebView,this.wLt=!!t.isWindowsWebView2,this.bLt=!!t.isAnyWebView2Wrapper,this.GLt=!!t.isFBInstantAvailable,this.OLt=!("preview"!==this.MLt||!t.isDebug),this.PLt=this.OLt,this.LLt=this.OLt,this.xLt=0,this.DLt=[],this.NLt=[],this.FLt=!1,this.$Lt="",this.BLt="",this.kLt="",this.WLt="",this.VLt=0,this.HLt=0,this.B4=self.devicePixelRatio,this.ULt=0,this.jLt=0,this.XLt=0,this.YLt=0,this.qLt=0,this.zLt=!1,this.Rp=!0,this.KLt=!1,this.JLt=!1,this.ZLt=!1,this.QLt=null,this.FW=C33.nh(C33.v9,this,t),this.NX=C33.nh(C33.sz,this),this.Wct=C33.nh(C33.$3t,this),this.t5t=C33.nh(C33.mx,this,t.wrapperComponentIds),this.e5t=C33.nh(C33.SGt,this),this.NZ=C33.nh(C33.Iz,this),this.i5t=C33.nh(C33.xot,this),this.s5t=C33.nh(C33.Not,this),this.Kot=C33.nh(C33.Uot,this),this.yp=C33.nh(C33.lp,{fp:t=>this.r5t(t),pp:t=>this.h5t(t)}),this.n5t=new Map,this.a5t=[],this.o5t=new Map,this.l5t=new Map,this.u5t=0,this.c5t=[],this.f5t=new Set,this.d5t=[],this.C5t=[],this.p5t=new Map,this.m5t=!1,this.v5t=!1,this.S5t=0,this.g5t=0,this.T5t=new Map,this._5t=new Set,this.y5t=new Set,this.E5t=[],this.I5t=[],this.A5t=null,this.M5t=!1,this.R5t="vsync",this.pT="trilinear",this.w5t=!1,this.b5t=!0,this.G5t=!1,this.O5t=!1,this.P5t=null,this.L5t={x5t:t=>{this.vOt=-1,this.D5t=-1,this.zK(t)},N5t:t=>{this.D5t=-1,this.zK(t,!1,"skip-render")},F5t:()=>{this.vOt=-1,this.aO()}},this.vOt=-1,this.D5t=-1,this.$5t=0,this.B5t=0,this.k5t=!1,this.W5t=!1,this.V5t=!1,this.H5t=!0,this.U5t=!0,this.j5t=!1,this.X5t=0,this.Y5t=new C33.l0(1),this.q5t=()=>Math.random(),this.z5t=0,this.K5t=0,this.J5t=0,this.Z5t=0,this.Q5t=0,this.lMt=1,this.txt=1/30,this.ixt=0,this.sxt=C33.nh(C33.Tf),this.rxt=C33.nh(C33.Tf),this.hxt=C33.nh(C33.Tf),this.nxt=new Map,this.axt=-1,this.oxt=0,this.lxt=0,this.uxt=-1,this.cxt=0,this.fxt=0,this.dxt=0,this.Cxt=!1,this.pxt="",this.mxt="",this.KF=null,this.vxt="",this.Sxt=null,this.gxt=null,this.dIt=C33.nh(C33.Event.x3),this.Txt=new Map,this._xt=new Map,this.yxt=0,this.Ext=!1,this.Ixt=!1,this.Axt=!1,this.Mxt=[],this.Rxt={pretick:C33.nh(C33.Event,"pretick",!1),tick:C33.nh(C33.Event,"tick",!1),tick2:C33.nh(C33.Event,"tick2",!1),instancedestroy:C33.nh(C33.Event,"instancedestroy",!1),beforelayoutchange:C33.nh(C33.Event,"beforelayoutchange",!1),layoutchange:C33.nh(C33.Event,"layoutchange",!1)},this.Rxt.instancedestroy.H6=null,this.CY=C33.nh(C33.Event.x3),this.wxt=null;var e=(t,e)=>C33.aMt.Vbt(this,t,e);this.bxt=C33.nh(C33.bf,e),this.Gxt=C33.nh(C33.bf,e),this.Oxt=C33.nh(C33.bf,e),this.Pxt=C33.nh(C33.Lxt,this,t.jobScheduler),t.canvas&&(this.A5t=C33.nh(C33._4t,this)),this.gLt.onmessage=t=>this._OnMessageFromDOM(t.data),this.FF("runtime","visibilitychange",t=>this.xxt(t)),this.FF("runtime","wrapper-extension-message",t=>this.Dxt(t)),this.FF("runtime","opus-decode",t=>this.F5(t.arrayBuffer)),this.FF("runtime","get-remote-preview-status-info",()=>this.Nxt()),this.FF("runtime","js-invoke-function",t=>this.dft(t)),this.FF("runtime","go-to-last-error-script",self.goToLastErrorScript),this.FF("runtime","offline-audio-render-completed",t=>this.Fxt(t)),this.dIt.addEventListener("window-blur",t=>this.$xt(t)),this.dIt.addEventListener("window-focus",()=>this.Bxt()),this.NZ.rK(),this.s5t.rK(),this.kxt=null,this.Wxt=new WeakMap,this.Vxt={keyboard:null,jL:null,XL:null,YL:null,qL:null},this.Hxt=new WeakMap,this.Uxt=[]}static F_(t){return C33.nh(C33.SLt,t)}ah(){C33.xn(this.a5t),this.o5t.clear(),this.l5t.clear(),this.NX.ah(),this.NX=null,this.Wct.ah(),this.Wct=null,this.t5t.ah(),this.t5t=null,this.FW.ah(),this.FW=null,this.e5t.ah(),this.e5t=null,this.NZ.ah(),this.NZ=null,this.i5t.ah(),this.i5t=null,this.s5t.ah(),this.s5t=null,this.Kot.ah(),this.Kot=null,this.yp.ah(),this.yp=null,this.A5t&&(this.A5t.ah(),this.A5t=null),this.dIt.ah(),this.dIt=null,this.jxt=null}["_OnMessageFromDOM"](t){var e=t.type;if("event"===e)this.Xxt(t);else{if("result"!==e)throw new Error(`unknown message '${e}'`);this.Yxt(t)}}Xxt(t){if(this.Axt){let e=t.component,i=t.handler;var r=t.data,h=t.dispatchOpts,n=!(!h||!h.dispatchRuntimeEvent),h=!(!h||!h.dispatchUserScriptEvent);let s=t.responseId;if("runtime"===e)if(n&&((u=new C33.Event(i)).data=r,this.dIt.X3(u)),h){var a,o,l=new C33.Event(i,!0);for([a,o]of Object.entries(r))l[a]=o;this.Zq(l)}var u=this.Txt.get(e);if(u){u=u.get(i);if(u){let t=null;try{t=u(r)}catch(t){return console.error(`Exception in '${e}' handler '${i}':`,t),void(null!==s&&this.qxt(s,!1,""+t))}null!==s&&(t&&t.then?t.then(t=>this.qxt(s,!0,t)).catch(t=>{console.error(`Rejection from '${e}' handler '${i}':`,t),this.qxt(s,!1,""+t)}):this.qxt(s,!0,t))}else n||h||console.warn(`[Runtime] No DOM handler '${i}' for component '${e}'`)}else n||h||console.warn(`[Runtime] No DOM event handlers for component '${e}'`)}else this.Mxt.push(t)}qxt(t,e,i){this.gLt.postMessage({type:"result",responseId:t,isOk:e,result:i})}Yxt(t){var e=t.responseId,i=t.isOk,t=t.result,s=this._xt.get(e);i?s.resolve(t):s.reject(t),this._xt.delete(e)}FF(t,e,i){let s=this.Txt.get(t);if(s||(s=new Map,this.Txt.set(t,s)),s.has(e))throw new Error(`[Runtime] Component '${t}' already has handler '${e}'`);s.set(e,i)}i3(t,e,i,s){this.gLt.postMessage({type:"event",component:t,handler:e,data:i,responseId:null},s)}f5(t,e,i,s){let r=this.yxt++;var h=new Promise((t,e)=>{this._xt.set(r,{resolve:t,reject:e})});return this.gLt.postMessage({type:"event",component:t,handler:e,data:i,responseId:r},s),h}Bk(t,e,i,s=-1){this.i3("runtime","send-wrapper-extension-message",{componentId:t,messageId:e,params:i,asyncId:s})}kk(t,e,i){let s=this.yxt++;var r=new Promise((t,e)=>{this._xt.set(s,{resolve:t,reject:e})});return this.Bk(t,e,i,s),r}Dxt(t){var e;-1!==t.asyncId?(e=t.asyncId,this._xt.get(e).resolve(t.params),this._xt.delete(e)):this.Xxt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}t7(t,e,i){this.FF("wrapper-extension:"+t,e,i)}ZF(t){return this.t5t.ZF(t)}zxt(t){if(!this.Qq())throw new Error("not in debug mode");this.i3("runtime","post-to-debugger",t)}async fMt(t){C33.ISt(this),this.Qq()?await C3Debugger.fMt(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);var e,i,[s]=await Promise.all([this.FW.ma("data.json"),this.Kxt(),this.Pxt.fMt()]);await this.Jxt(s),await this.Zxt(t),this.pLt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.PPt()?(s=this.PPt(),console.info(`[C3 runtime] Hosted in ${this.AP()?"worker":"DOM"}, rendering with WebGL ${s.ET()} [${s.EG()}]`)):this.LPt()&&console.info(`[C3 runtime] Hosted in ${this.AP()?"worker":"DOM"}, rendering with WebGPU [${this.LPt().GetAdapterInfoString()}]`),this.RS().nS()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.Axt=!0;for(e of this.Mxt)this.Xxt(e);C33.xn(this.Mxt),this.A5t&&this.A5t.nLt();for(i of t.runOnStartupFunctions)this.DLt.push(this.Qxt(i));if(await Promise.all([this.FW.gW(),...this.DLt]),C33.xn(this.DLt),!this.FW._W())return this.A5t&&await this.A5t.lLt(),await this.dIt.U3(new C33.Event("beforeruntimestart")),await this.Xb(),this.gLt.postMessage({type:"runtime-ready"}),this;this.A5t&&this.A5t.hLt()}async Qxt(t){try{await t(this.kxt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async Jxt(t){var t=t.project,e=(this.$Lt=t[0],this.BLt=t[16],this.kLt=t[31],this.WLt=t[38],t[39]||"loading-logo.png"),i=(this.w5t=!!t[9],this.VLt=this.XLt=t[10],this.HLt=this.YLt=t[11],this.e5t.r4t(this.VLt,this.HLt),this.ULt=this.VLt/2,this.jLt=this.HLt/2,this.R5t=t[37],this.M5t=!!t[40],this.pT=t[14],this.KLt=t[15],this.JLt=t[42],this.ZLt=t[17],this.zLt=!!t[18],this.qLt=t[19],this.g5t=t[21],this.G5t=t[22],this.FW);if(i.q9(t[45]),i.MW(t[7],t[25]),i.K9(t[8]),i.J9(t[32]),i.Q9(t[28]),i.EW(t[29]),0===this.qLt){let t="";(t="flat"===i.P5()?i.tW()+e:e)&&(this.QLt=i.cW({url:t}))}this.A5t&&(this.A5t.EPt(C33._4t.wPt(t[12])),this.A5t.MPt(t[23]?"high":"low"),this.A5t.sS(0!==t[24]),this.A5t.OOt(t[34]),this.A5t.bPt(t[41]),this.A5t.POt(t[13]),this.A5t.LOt(t[30]),this.A5t.NOt(t[46],t[47]),this.A5t.DOt(t[26]),this.A5t.FOt(t[48]));var s,r,h,n,a,o,l,e=t[43],i=(e&&await this.tDt(e),this.eDt(),this.t5t.tEt(),this.E5t=self.iDt(),t[2]);for(s of i[1])this.t5t.eEt(s);for(r of i[0])this.t5t.Qyt(r);this.E5t=self.iDt(),this.sDt(),this.t5t.hEt();for(h of t[3]){var u=C33.Wot.F_(this,this.a5t.length,h);this.a5t.push(u),this.o5t.set(u.jc().toLowerCase(),u),this.l5t.set(u.dU(),u)}for(n of t[4])this.a5t[n[0]].JIt(n);for(a of t[27]){var c=a.map(t=>this.a5t[t]);this.c5t.push(C33.nh(C33.KAt,this,c))}this.rDt();for(o of this.a5t)o.QIt();for(l of t[5])this.NX.F_(l);var f,d,C,p,m,e=t[1];e&&(i=this.NX.Cz(e))&&this.NX.fz(i);for(f of t[35])this.i5t.F_(f);for(d of t[33])this.NZ.F_(d);for(C of t[44])this.s5t.F_(C);this.s5t.Bot()||(this.s5t.ah(),this.s5t=null);for(p of t[49])this.Kot.F_(p);this.Kot.qot()||(this.Kot.ah(),this.Kot=null);for(m of t[6])this.Wct.F_(m);this.Wct.mft(),this.hDt(),C33.xn(this.E5t),this.fD();let v="any";e=t[20];1===e?v="portrait":2===e&&(v="landscape"),this.i3("runtime","set-target-orientation",{targetOrientation:v})}async tDt(t){var e=t.format;"image-sequence"===e?this.P5t=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===e?this.P5t=new self.C3ExportToGIF(this,t):"webm"===e?this.P5t=new self.C3ExportToWebMVideo(this,t):"mp4"===e&&(this.P5t=new self.C3ExportToMP4Video(this,t)),this.R5t="unlimited-frame",this.A5t.EPt("off"),this.B4=1,self.devicePixelRatio=1,await this.f5("runtime","set-exporting-to-video",{message:this.P5t.GetExportingMessageForPercent(0),duration:this.P5t.v$()})}oLt(){return this.qLt}rPt(){return null!==this.P5t}nDt(){return this.P5t.v$()}aDt(){return this.P5t.GetFramerate()}oDt(){return this.P5t.fMt({width:this.A5t.lPt(),height:this.A5t.cPt()})}lDt(){var t=this.$5t/this.aDt();return this.P5t.AddFrame(this.A5t._Pt(),t)}uDt(){this.P5t&&this.P5t.qet()}Fxt(t){this.P5t.OnOfflineAudioRenderCompleted(t)}cDt(){return this.P5t.Qv()}mLt(){return this.GLt}Pp(){return this.Rp}m5(t){this.DLt.push(t)}sq(t){this.FLt=!!t}fDt(t){this.FLt&&this.NLt.push(t)}lq(){return this.NLt}UIt(){return this.u5t++}eAt(){return this.u5t}Jbt(t){this.f5t.add(t)}Zbt(t){this.f5t.delete(t)}sPt(){return this.f5t}async Zxt(t){this.A5t&&(await this.A5t.Aa(t),this.A5t.QPt(this.qLt))}async Kxt(){var e=this.FW;if(!e.g5("audio/webm; codecs=opus")){let t=null;var i=e.z9(),s=i+"opus.wasm.js",i=i+"opus.wasm.wasm";try{t=this.dDt()&&e.eW()?await e.rW(i):await e.ga(i)}catch(t){return void console.info("Failed to fetch Opus decoder WASM; assuming project has no Opus audio.",t)}this.CDt(t,"opus-decoder-wasm"),await this.pDt([s])}}async F5(t){return await this.mDt("OpusDecode",{arrayBuffer:t},[t])}async Xb(){this.k5t=!0,this.z5t=Date.now();let e=null,t=new Promise(t=>e=t);if(this.zLt){for(var i of this.a5t)i.hU()||i.uAt()||!i._x()||i.ZTt();(async()=>{await this.FW.gW(),await t,this.Rp=!1,this.vDt()})()}else this.Rp=!1;this.FW.TW(),this.Qq()&&C3Debugger.RuntimeInit(ife);for(var s of this.NX.kL())s.bq();this.rPt()&&await this.oDt();var r=this.NX.dz(),r=(await r.WY(null,this.RS()),await r.JY(!0),this.oxt=performance.now(),e(),this.zLt||this.vDt(),await this.f5("runtime","before-start-ticking"));r.isSuspended&&!this.rPt()?(this.X5t++,this.j5t=!0):this.zK()}vDt(){this.LF(C33.yq._q.Tq.SDt,null,null),this.i3("runtime","register-sw")}Tpt(t){t=Math.floor(t);var e=this.E5t;if(t<0||t>=e.length)throw new Error("invalid object reference");return e[t]}sDt(){for(var t of self.gDt){t=C33.first(Object.keys(t));this.I5t.push(t)}}kft(t){t=Math.floor(t);var e=this.I5t;if(t<0||t>=e.length)throw new Error("invalid prop reference");return e[t]}TDt(){return this.ELt}_Dt(){return this.yLt}AP(){return this.ILt}sLt(){return this.TLt}yDt(){return this._Lt}BP(){return this.Wct}ZP(){return this.Wct.ZP()}Gft(){return this.Wct.Gft()}jP(){return this.Wct.jP()}Oft(){return this.Wct.Oft()}rSt(){return 0===this.Gft().n3t()}Lft(){return this.Wct.Lft()}kbt(){return this.t5t}vmt(){return this.t5t.vmt()}DH(t){if((t=Math.floor(t))<0||t>=this.a5t.length)throw new RangeError("invalid index");return this.a5t[t]}EDt(t){return this.o5t.get(t.toLowerCase())||null}Cq(t){return this.l5t.get(t)||null}urt(t){t=C33.mx.Dx(t);return t?t.Bx():null}rU(){return this.a5t}*IDt(){for(var t of this.a5t)t.hU()||(yield*t.instances())}x3(){return this.dIt}DP(){return this.CY}Zq(t){t.runtime=this.vx();var e=this.Qq()&&!this.Wct.uD();e&&C3Debugger.StartMeasuringScriptTime(),this.CY.dispatchEvent(t),e&&C3Debugger.AddScriptTime()}vq(t){return t.runtime=this.vx(),this.CY.U3(t)}RP(){return this.VLt}bP(){return this.HLt}ADt(t,e){this.VLt===t&&this.HLt===e||(this.VLt=t,this.HLt=e,(t=this.FL()).yz(),t.Ez())}FU(){return this.XLt}$U(){return this.YLt}gPt(t,e){this.XLt===t&&this.YLt===e||(this.XLt=t,this.YLt=e,(t=this.FL()).yz(),t.Ez())}hPt(t){this.rPt()||(this.B4=t)}mU(){return this.B4}Pj(){return this.ULt}Lj(){return this.jLt}jB(){return this.A5t}Bj(){return this.A5t?this.A5t.Bj():this.XLt}kj(){return this.A5t?this.A5t.kj():this.YLt}YN(){return this.A5t?this.A5t.YN():1}mk(){return this.A5t?this.A5t.mk():1}TX(){return this.A5t?this.A5t.TX():1}SX(){return this.A5t?this.A5t.SX():1}$N(){return this.A5t?this.A5t.$N():0}BN(){return this.A5t?this.A5t.BN():0}MDt(){return this.A5t?this.A5t.Ck():0}RDt(){return this.A5t?this.A5t.pk():0}fk(){return this.A5t?this.A5t.fk():"off"}Kj(t){return this.A5t?this.A5t.Kj(t):null}TH(t){this.A5t&&this.A5t.TH(t)}qj(){return this.KLt}QOt(){return this.JLt}tPt(){return this.ZLt}EL(){return this.A5t?this.A5t.EL():NaN}g_(){return"nearest"!==this.GP()}AL(){return this.R5t}ML(t){this.R5t!==t&&(this.R5t=t,-1!==this.vOt||-1!==this.D5t)&&(this.wDt(),this.bDt())}GP(){return this.pT}qIt(){return this.zLt}tLt(){return this.QLt}uLt(){this.QLt&&(this.QLt.eM(),this.QLt.ah(),this.QLt=null)}FL(){return this.NX}xL(){return this.NX.xL()}TQ(){return this.NZ}GDt(){return this.i5t}VMt(){return this.s5t}Slt(){return this.Kot}CP(){return this.FW}cW(t){return this.FW.cW(t)}nD(t,e,i,s,r,h){if(h&&this.s5t){if(t instanceof C33.Wot&&t.hU())return a=t.sCt(),n=Math.floor(this.LL()*a.length),this.nD(a[n],e,i,s,r,h);var n,a=this.s5t.kot(t,h);if(a)return n=this.UH(a,e,!1,i,s,!1,r,void 0,r),this.s5t.Vot(n,h),n}return this.UH(t,e,!1,i,s,!1,r,void 0,r)}UH(t,e,i,s,r,h,n,a,o){let l=null,u=null;t instanceof C33.Wot?((u=t).hU()&&(c=u.sCt(),C=Math.floor(this.LL()*c.length),u=c[C]),l=u.FH()):(l=t,u=this.DH(l[1]));var c=u.Ux()._x();if(this.Rp&&c&&!u.uAt())return null;var f=e;c||(e=null);let d;d=i&&!h&&l&&!this.T5t.has(l[2])?l[2]:this.g5t++;var C=l?l[0]:null,p=C33.nh(C33.Instance,{runtime:this,zN:u,a7:e,cMt:C,pMt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.T5t.set(d,p);let m=null,v=(c&&(m=p.s5(),void 0!==s&&void 0!==r&&(m.hg(s),m.og(r)),u.$At(!0)),e&&(o||e.XH(p,!0),e.$L().HY(u)),this.S5t++,!0);if(a&&(t=a.KN()).oF()&&u.oF()&&u.BY()===t.BY()&&(v=!1),u.oF()&&!i&&!h&&v){var S,g,T,_=new Set;for(S of u.BY().Mq())S!==u&&((g=this.ODt(S,m,_))?(g=this.UH(g,f,!1,m?m.rg():s,m?m.ag():r,!0,!1,void 0,o),p.Rq(g)):(g=this.UH(S,f,!1,m?m.rg():s,m?m.ag():r,!0,!1,void 0,o),p.Rq(g)));for(T of p.lF()){T.Rq(p);for(var y of p.lF())T!==y&&T.Rq(y)}}if(c&&!i&&n&&this.PDt(p,C,m,e,s,r,o),u.oF()&&!i&&!h&&n)for(var E of p.lF()){var I,A,M=E.s5();M&&(I=E.Ux(),A=E.KN().FH()[0],I._x()?this.PDt(E,A,M,e,M.rg(),M.ag(),o):this.PDt(E,A,M,e,void 0,void 0,o))}!h&&n&&(void 0===s&&(s=C[0]),void 0===r&&(r=C[1]),a=m.B7(),t=s-m.rg()+a.rg(),i=r-m.ag()+a.ag(),a.l7(t,i)),u.LAt();h=l?C33.Xn(l[5]):null,n=l?l[4].map(t=>C33.Xn(t)):null,a=c&&C&&C[13];return a&&p._Mt(),p.oAt(h,n),a&&(t=C[13],p.O6().p_t(t[2],t[0],t[1])),this.C5t.push(p),this.m5t=!0,this.Qq()&&C3Debugger.InstanceCreated(p),p}FRt(t){var e=t[0],i=t[1],s=t[2],t=t[6];return t||this.NX.pz(e).r5(i).kH(s)}ODt(t,e,i){var s;for(s of e?.WMt()??[]){var r=this.FRt(s),h=!!s[4],n=this.DH(r[1]);if(!i.has(r)&&(t===n&&h))return i.add(r),r}}PDt(e,t,i,s,r,h,n){var a=i.rbt(),i=i.WMt();if(e.s5().hbt(a),i){void 0===r&&(r=t[0]),void 0===h&&(h=t[1]);var o,l=new Set,u=t[0],c=t[1];for(o of i){var f=o[0],d=o[1],C=o[2],p=o[3],m=!!o[4],v=o[5],S=o[6];let t;t=S||this.NX.pz(f).r5(d).kH(C);var S=this.DH(t[1]),f=e.HMt(S),d=l.has(S);f&&!d&&m?((C=e.UMt(S)).s5().fMt(t[0]),f=r+t[0][0]-u,d=h+t[0][1]-c,C.s5().l7(f,d),C.s5().hbt(v),e.Y7(C,{Z7:!!(p>>0&1),t6:!!(p>>1&1),i6:!!(p>>2&1),r6:!!(p>>3&1),n6:!!(p>>4&1),C6:!!(p>>5&1),o6:!!(p>>6&1),u6:!!(p>>7&1),f6:!!(p>>8&1)}),l.add(S)):(m=r+t[0][0]-u,f=h+t[0][1]-c,(d=this.UH(t,s,!1,m,f,!1,!0,e,n)).s5().hbt(v),e.Y7(d,{Z7:!!(p>>0&1),t6:!!(p>>1&1),i6:!!(p>>2&1),r6:!!(p>>3&1),n6:!!(p>>4&1),C6:!!(p>>5&1),o6:!!(p>>6&1),u6:!!(p>>7&1),f6:!!(p>>8&1)}))}}}sF(e){if(!this._5t.has(e)){var i,s=e.KN();let t=this.p5t.get(s);if(t){if(t.has(e))return;t.add(e)}else(t=new Set).add(e),this.p5t.set(s,t);if(this.Qq()&&C3Debugger.InstanceDestroyed(e),e.EMt(),this.m5t=!0,e.oF())for(var r of e.lF())this.sF(r);for(i of e.children())i.p6()&&this.sF(i);this.NX.cD()||this.Cxt||((s=this.BP()).oD(!0),e.tRt(),s.oD(!1)),e.eRt(this.NX.cD())}}fD(){this.m5t&&(this.v5t=!0,this.LDt(),this.xDt(),this.v5t=!1,this.m5t=!1,this.u5())}LDt(){for(var t of this.C5t){var e,i=t.KN();i.XH(t);for(e of i.Yft())e.XH(t),e.LAt()}C33.xn(this.C5t)}xDt(){this.dIt.R3(!0);for(var[t,e]of this.p5t.entries())this.DDt(t,e),e.clear();this.p5t.clear(),this.dIt.R3(!1)}DDt(t,e){for(var i of e){var s=this.Rxt.instancedestroy,s=(s.H6=i,this.dIt.dispatchEvent(s),this.T5t.delete(i.uF()),this.nxt.delete(i),i.s5());s&&(s.obt(),s.KH(),s.EMt()),this._5t.add(i),this.S5t--}C33.Hn(t.eD(),e),t.LAt(),this.y5t.add(t);for(var r of t.Yft())C33.Hn(r.eD(),e),r.LAt(),this.y5t.add(r);var h;if(t.Ux()._x())for(h of new Set([...e].map(t=>t.s5().r5())))h.lj(e)}DAt(){return this.C5t}*oSt(t){for(var e of this.DAt())t.hU()?e.KN().vSt(t)&&(yield e):e.KN()===t&&(yield e)}aAt(){return this.g5t++}lAt(t,e){this.T5t.set(t,e)}Uk(t){this.U5t!==(t=!!t)&&(this.U5t=!!t,this.U5t)&&this.j5t&&(this.Yk(!1),this.j5t=!1)}jk(){return this.U5t}KY(){this.dIt.dispatchEvent(C33.nh(C33.Event,"renderercontextlost")),this.Yk(!0);for(var t of this.a5t)!t.hU()&&t.cAt()&&t.qY();var e=this.xL();e&&e.KY(),C33.oEt.zW(),C33.dW.zW()}async OPt(){await this.xL().WY(null,this.RS()),this.dIt.dispatchEvent(C33.nh(C33.Event,"renderercontextrestored")),this.Yk(!1),this.u5()}xxt(t){!this.U5t||(t=t.hidden,this.Yk(t),this.j5t=t)||this.u5()}$xt(t){!this.pLt()||!this.G5t||C33.ci._i||t.data.parentHasFocus||(this.Yk(!0),this.O5t=!0)}Bxt(){this.O5t&&(this.Yk(!1),this.O5t=!1)}bDt(){var t=this.L5t;"vsync"===this.R5t?-1===this.vOt&&(this.vOt=self.requestAnimationFrame(t.x5t)):"unlimited-tick"===this.R5t?(-1===this.D5t&&(this.D5t=C33.ra(t.N5t)),-1===this.vOt&&(this.vOt=self.requestAnimationFrame(t.F5t))):-1===this.D5t&&(this.D5t=C33.ra(t.x5t))}wDt(){-1!==this.vOt&&(self.cancelAnimationFrame(this.vOt),this.vOt=-1),-1!==this.D5t&&(C33.na(this.D5t),this.D5t=-1)}hL(){return 0<this.X5t}Yk(t){var e;this.rPt()||(e=this.hL(),this.X5t+=t?1:-1,this.X5t<0&&(this.X5t=0),t=this.hL(),!e&&t?(console.log("[Construct] Suspending"),this.wDt(),this.dIt.dispatchEvent(C33.nh(C33.Event,"suspend")),this.LF(C33.yq._q.Tq.NDt,null,null)):e&&!t&&(console.log("[Construct] Resuming"),e=performance.now(),this.K5t=e,this.oxt=e,this.axt=0,this.lxt=0,this.uxt=0,this.cxt=0,this.dxt=0,this.fxt=0,this.dIt.dispatchEvent(C33.nh(C33.Event,"resume")),this.LF(C33.yq._q.Tq.FDt,null,null),this.g0t()||this.zK(e)))}Ok(t){this.bxt.sc(t)}Dk(t){this.Gxt.sc(t)}Lk(t){this.Oxt.sc(t)}Pk(t){this.bxt.Sf(t)}Nk(t){this.Gxt.Sf(t)}xk(t){this.Oxt.Sf(t)}$Dt(){var t,e=globalThis.Rk;this.bxt.a0(!0);for(t of this.bxt)t instanceof e?t.HF():t.zK();this.bxt.a0(!1)}BDt(){var t,e=globalThis.Rk;this.Gxt.a0(!0);for(t of this.Gxt)t instanceof e?t.$k():t.Vyt();this.Gxt.a0(!1)}kDt(){var t,e=globalThis.Rk;this.Oxt.a0(!0);for(t of this.Oxt)t instanceof e?t.XF():t.N_t();this.Oxt.a0(!1)}*WDt(){var e,i=globalThis.Rk;this.bxt.a0(!0);for(e of this.bxt){let t;t=e instanceof i?e.HF():e.zK(),C33.Da(t)&&(yield*t)}this.bxt.a0(!1)}*VDt(){var e,i=globalThis.Rk;this.Gxt.a0(!0);for(e of this.Gxt){let t;t=e instanceof i?e.$k():e.Vyt(),C33.Da(t)&&(yield*t)}this.Gxt.a0(!1)}*HDt(){var e,i=globalThis.Rk;this.Oxt.a0(!0);for(e of this.Oxt){let t;t=e instanceof i?e.XF():e.N_t(),C33.Da(t)&&(yield*t)}this.Oxt.a0(!1)}async zK(e,i,s){this.V5t=!0;var r="background-wake"===s,s="background-wake"!==s&&"skip-render"!==s,h=this.FL(),n=this.jB();if(this.k5t&&(!this.hL()||i||r)){var i=performance.now(),e=(this.W5t=!0,this.UDt(e||0),this.uxt++,this.jDt(),this.XDt()),e=(this.hSt()&&await e,this.dIt.j3(this.Rxt.pretick)),e=(e instanceof Promise&&await e,this.YDt()),e=(this.hSt()&&await e,this.qDt()&&await this.zDt(),h.VL()&&await this.KDt(),this.JDt()),e=(this.hSt()&&await e,h.xL()),h=e.xY();let t=!1;-1!==h&&(e.DY(),n.LY()!==h)&&(e=this.jB().eq(h),this.AP())&&(t=!0,await e),s&&this.aO(),t&&this.i3("canvas","cleanup-html-layers"),this.rPt()&&(await this.lDt(),this.cL()>=this.nDt())?this.cDt():(this.hL()||r||this.bDt(),this.$5t++,this.B5t++,this.W5t=!1,this.fxt+=performance.now()-i)}}async XDt(){var t=this.Wct,e=this.Qq();this.fD(),t.oD(!0),this.a0t(this.xL()),e&&C3Debugger.StartMeasuringTime(),this.hSt()?await t.k0t():t.D0t(),e&&C3Debugger.AddEventsTime(),this.o0t(),t.oD(!1),this.fD(),t.oD(!0)}async YDt(){var t=this.Qq(),e=this.hSt(),i=this.dIt,s=this.Rxt,r=this.wxt;t&&C3Debugger.StartMeasuringTime(),e?await this.ZDt(this.WDt()):this.$Dt(),e?await this.ZDt(this.VDt()):this.BDt(),t&&C3Debugger.AddBehaviorTickTime(),t&&C3Debugger.StartMeasuringTime(),e?await this.QDt(s.tick):i.dispatchEvent(s.tick),t&&C3Debugger.AddPluginTickTime(),this.Wct.oD(!1),this.Zq(r.tick)}async JDt(){var t=this.Wct,e=this.dIt,i=this.Rxt,s=this.Qq(),r=this.hSt();s&&C3Debugger.StartMeasuringTime(),r?await t.l0t(this.NX):t.n0t(this.NX),s&&C3Debugger.AddEventsTime(),this.e5t.OGt(),this.jDt(),this.H5t=!1,t.oD(!0),s&&C3Debugger.StartMeasuringTime(),r?await this.ZDt(this.HDt()):this.kDt(),s&&C3Debugger.AddBehaviorTickTime(),s&&C3Debugger.StartMeasuringTime(),r?await this.QDt(i.tick2):e.dispatchEvent(i.tick2),s&&C3Debugger.AddPluginTickTime(),t.oD(!1),r&&await t.T0t()}jDt(){if(0!==this._5t.size){var t,e,i=this.dIt;i.R3(!0);for(t of this.y5t)t.b0t().vct(this._5t);this.y5t.clear(),this.Wct.V0t(this._5t);for(e of this._5t)e.ah();this._5t.clear(),i.R3(!1)}}async KDt(){var t=this.FL();let e=0;for(;t.VL()&&e++<10;)await this.tNt(t._z())}UDt(t){let e=0;var i,s,r;this.rPt()?(e=1/this.aDt(),this.J5t=e,this.Z5t=e):0!==this.K5t&&(i=Math.max(t-this.K5t,0),.5<(e=i/1e3)&&(e=0),this.J5t=e,this.Z5t=C33.dh(e,this.ixt,this.txt)),this.K5t=t,this.Q5t=this.Z5t*this.lMt,this.sxt.sc(this.Q5t),this.rxt.sc(e*this.lMt),this.hxt.sc(this.Z5t);for([s,r]of this.nxt)r.sc(this.Z5t*s.pL());this.A5t&&this.A5t.HPt(),1e3<=t-this.oxt&&(this.oxt+=1e3,1e3<=t-this.oxt&&(this.oxt=t),this.lxt=this.axt,this.axt=0,this.cxt=this.uxt,this.uxt=0,this.dxt=Math.min(this.fxt/1e3,1),this.fxt=0,this.A5t&&this.A5t.VPt(),this.e5t.RGt(),this.Qq())&&C3Debugger.Update1sPerfStats()}gMt(t,e){e?this.nxt.has(t)||((e=C33.nh(C33.Tf)).Af(this.sxt),this.nxt.set(t,e)):this.nxt.delete(t)}TMt(t){t=this.nxt.get(t);return t?t.ri():this.cL()}async tNt(t){var e=this.dIt,i=this.FL().xL();await i.Oq(),i.zY(t,this.RS()),i===t&&this.Wct.xq(),this.e5t.OGt(),this.jDt(),e.dispatchEvent(this.Rxt.beforelayoutchange),C33.b3.q3(!0),await t.WY(i,this.RS()),C33.b3.q3(!1),await t.JY(!1),e.dispatchEvent(this.Rxt.layoutchange),this.u5(),this.H5t=!0,this.fD(),this.uDt()}u5(){this.b5t=!0}PPt(){return this.A5t?this.A5t.PPt():null}LPt(){return this.A5t?this.A5t.LPt():null}RS(){return this.A5t?this.A5t.RS():null}aO(){var i=this.A5t;if(i&&!i.GPt()){var s=this.RS(),r=s.CG(),h=r&&s.aS(),r=r&&s.v2();if(h&&s.tG(),this.b5t||this.rPt()){var n=this.NX.xL(),a=(this.axt++,s.Xb(),this.Qq());a&&C3Debugger.StartMeasuringTime(),this.b5t=!1;let t=null,e=(h&&(t=i.XPt().NR(),s.dG(t)),null);r&&(e=s.StartFrameTiming(2*(1+n.RY())),s.StartMeasuringRenderPassTime(0,1)),this.YU()&&"low"===i.zj()?s.rb(i.Bj(),i.kj()):s.hb(),this.eNt(this.RS(),n),t&&s.pG(t),r&&(s.StopMeasuringRenderPassTime(),this.A5t.YPt(e)),s.Qv(),a&&(C3Debugger.AddDrawCallsTime(),C3Debugger.UpdateInspectHighlight()),i&&i.zPt()}else s.iS()}}Uq(t){return"low"===this.jB().zj()||t.aS()&&(this.qj()||this.YU())}eNt(e,i){e.M2(),e.Eb(),e.pb(1,1,1,1),e.rG(null),e.gb(null),e.qb(this.YU()),this.Uq(e)&&i.Vq(e);var s=i.LY();for(let t=1;t<s;++t)i.qq(e,t),e.v2()&&e.Restart();this.Uq(e)||i.Vq(e),i.Yq(e)}LF(t,e,i){if(!this.k5t)return!1;var s=!this.W5t&&!this.Wct.I0t();let r=0;s&&(r=performance.now());var h=this.Qq(),t=(h&&this.Qk(!1),this.Wct.d0t(this.NX,t,e,i));return s&&(e=performance.now()-r,this.fxt+=e,h)&&C3Debugger.AddTriggersTime(e),h&&this.Qk(!0),t}I_t(t,e,i){if(!this.hSt())return this.LF(t,e,i);if(this.g0t())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.W5t||this.Wct.I0t())return this.Wct.m0t(this.NX,t,e,i);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async DF(t,e,i){if(!this.hSt())return this.LF(t,e,i);if(!this.k5t)return!1;if(this.g0t())return this.Wct.v0t(t,e,i);if(!this.xL())return this.Wct.C0t(t,e,i);var s=performance.now(),r=this.Wct.m0t(this.NX,t,e,i);let h=r.next();for(;!h.done;)await this.c0t(h.value),h=r.next();return this.hL()||this.Wct.I0t()||(await this.Wct.T0t(),this.V5t&&!this.W5t&&this.bDt()),this.fxt+=performance.now()-s,h.value}A_t(t,e,i){var s=this.Qq(),t=(s&&this.Qk(!1),this.Wct._0t(this.NX,t,e,i));return s&&this.Qk(!0),t}M_t(t,e,i){return this.Wct.y0t(this.NX,t,e,i)}R_t(t){return this.Y5t.sc(t)}a0t(t){this.d5t.push(t)}o0t(){if(!this.d5t.length)throw new Error("layout stack empty");this.d5t.pop()}e5(){return this.d5t.length?this.d5t.at(-1):this.xL()}aL(t){return t&&-1!==t.pL()?this.Z5t*t.pL():this.Q5t}YK(){return this.Q5t}qK(){return this.Z5t}lL(){return this.J5t}pL(){return this.lMt}mL(t){(isNaN(t)||t<0)&&(t=0),this.lMt=t}bL(t){this.ixt=Math.max(t,0)}wL(){return this.ixt}PL(t){this.txt=Math.max(t,0)}OL(){return this.txt}vL(){return this.lxt}gL(){return this.cxt}_L(){return this.dxt}iNt(){return this.z5t}cL(){return this.sxt.ri()}sNt(){return this.rxt.ri()}dL(){return this.hxt.ri()}VQ(){return this.$5t}rNt(){return this.B5t}hNt(){return this.S5t}_P(){return this.$Lt}EP(){return this.BLt}nNt(){return this.kLt}aNt(){return this.WLt}ZL(t){if(this.Cxt)throw new Error("cannot call while loading state - wait until afterload event");return this.T5t.get(t)||null}Iq(){this.T5t.clear();for(var t of this.a5t)if(!t.hU())for(var e of t.eD())this.T5t.set(e.uF(),e)}pLt(){return"preview"===this.MLt}Qq(){return this.OLt}sW(){return this.MLt}vLt(){return"cordova"===this.MLt}oNt(){return"Android"===C33.ci.fi&&("cordova"===this.MLt||"playable-ad-single-file"===this.MLt||"playable-ad-zip"===this.MLt||"instant-games"===this.MLt)}dDt(){return this._9}lNt(){return this.RLt}uNt(){return this.wLt}cNt(){return this.bLt}vP(){return this.e5t}nEt(){return this.t5t.nEt()}aEt(){return this.t5t.aEt()}YU(){return this.M5t}fNt(){return this.RS().h2(this.$U())}e2(t){return this.RS().e2(t||this.$U())}dNt(){return this.H5t}CNt(t){this.w5t!==(t=!!t)&&(this.w5t=t,this.FL().Ez(),this.u5())}PP(){return this.w5t}pNt(t){this.n5t.has(t)||(this.n5t.set(t,e=()=>this.mNt(t)),t.x3().addEventListener("animationframeimagechange",e));var e=this.yp.mp(t);return e.Op()||e.Lp().then(()=>this.u5()),e}mNt(t){this.yp.Tp(t)}r5t(t){var e,i=[];for(e of t.EAt())for(var s of e.u$()){var r=s.m$();i.push({source:s,width:r.eC(),height:r.cC(),tag:s.D$()})}return{bp:i}}async h5t(t){var e,s=C33.nh(C33.l0),i=[];let r=new Map;for(e of t.EAt())for(var h of e.u$()){let e=h.m$().wEt();r.has(e)||(r.set(e,null),i.push(s.sc(async()=>{var t=await e.QW();r.set(e,t)})))}await Promise.all(i);var n,a=[];for(n of t.EAt())for(let i of n.u$())a.push(s.sc(async()=>{var t=i.m$(),e=r.get(t.wEt()),t=await t.bEt(e);return{Dp:await createImageBitmap(t)}}));var o,t=await Promise.all(a);for(o of r.values())o instanceof ImageBitmap&&o.close&&o.close();return{bp:t}}vNt(t){this.pxt=t}SNt(t){this.mxt=t}tTt(t){this.KF=t}gNt(){return this.vxt}qDt(){return!(!this.pxt&&!this.mxt&&null===this.KF)}async zDt(){if(this.pxt&&(this.fD(),await this.TNt(this.pxt),this._Nt()),this.mxt&&(await this.yNt(this.mxt),this._Nt(),this.Qq())&&C3Debugger.StepIfPausedInDebugger(),null!==this.KF){this.fD();try{await this.ENt(this.KF),this.vxt=this.KF,await this.DF(C33.yq._q.Tq.INt,null),this.vxt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.DF(C33.yq._q.Tq.ANt,null)}this._Nt()}}_Nt(){this.pxt="",this.mxt="",this.KF=null}lx(){return this.Sxt||(this.Sxt=localforage.xi({name:"c3-localstorage-"+this.nNt(),description:this._P()})),this.Sxt}MNt(){return this.gxt||(this.gxt=localforage.xi({name:"c3-savegames-"+this.nNt(),description:this._P()})),this.gxt}async TNt(t){var e=await this.RNt();try{await this.MNt().setItem(t,e),console.log("[Construct] Saved state to storage ("+e.length+" chars)"),this.vxt=e,await this.DF(C33.yq._q.Tq.wNt,null),this.vxt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.DF(C33.yq._q.Tq.bNt,null)}}async yNt(t){try{var e=await this.MNt().getItem(t);if(!e)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+e.length+" chars)"),await this.ENt(e),this.vxt=e,await this.DF(C33.yq._q.Tq.INt,null),this.vxt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.DF(C33.yq._q.Tq.ANt,null)}}async RNt(){var t,e,i={c3save:!0,version:1,rt:{time:this.cL(),timeRaw:this.sNt(),walltime:this.dL(),timescale:this.pL(),tickcount:this.VQ(),next_uid:this.g5t,running_layout:this.xL().dU(),start_time_offset:Date.now()-this.z5t},types:{},layouts:{},events:this.Wct.GX(),timelines:this.NZ.GX(),user_script_data:null};for(t of this.a5t)t.hU()||t.jAt()||(i.types[t.dU().toString()]=t.GX());for(e of this.NX.kL())i.layouts[e.dU().toString()]=e.GX();var s=this.GNt("save");return s.saveData=null,await this.vq(s),i.user_script_data=s.saveData,JSON.stringify(i)}uq(){return this.Cxt}async ENt(t){var e,i=this.FL(),t=JSON.parse(t);if(t.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!t.c3save)throw new Error("not valid C3 save data");if(1<t.version)throw new Error("C3 save data from future version");this.TSt(),this.dIt.dispatchEvent(C33.nh(C33.Event,"beforeload"));for(e of this.IDt())e.KN().jAt()||e.Kz();var s,r,h=t.rt,n=(this.sxt.Set(h.time),h.hasOwnProperty("timeRaw")&&this.rxt.Set(h.timeRaw),this.hxt.Set(h.walltime),this.lMt=h.timescale,this.$5t=h.tickcount,this.z5t=Date.now()-h.start_time_offset,h.running_layout);let a=!(this.Cxt=!0);if(n!==this.xL().dU()){n=i.pz(n);if(!n)return;await this.tNt(n),a=!0}for([s,r]of Object.entries(t.layouts)){var o=parseInt(s,10),o=i.pz(o);o&&o.OX(r)}var l,u,c,f,d,C,p,m=new Set;for([l,u]of Object.entries(t.types)){var v=parseInt(l,10),v=this.Cq(v);!v||v.hU()||v.jAt()||v.OX(u,m)}for(c of this.NX.kL())for(var S of c.PD())S.PX();if(this.fD(),this.Iq(),this.Cxt=!1,a){for(var g of this.IDt())g.cq();for(var[T,_]of Object.entries(t.types)){T=parseInt(T,10),T=this.Cq(T);!T||T.hU()||T.jAt()||T.qAt(_)}}this.g5t=h.next_uid,this.Wct.OX(t.events);for(f of this.a5t)if(!f.hU()&&f.oF())for(var y of f.eD()){var E,I=y.Aq();for(E of f.BY().Mq())if(E!==f){var A=E.eD();if(I<0||I>=A.length)throw new Error("missing sibling instance");y.Rq(A[I])}}this.NZ.OX(t.timelines),i.yz(),i.Ez();for(d of m)d.QMt();this._St(),this.dIt.dispatchEvent(C33.nh(C33.Event,"afterload")),this.Zq(this.GNt("afterload"));for([C,p]of Object.entries(t.types)){var M=parseInt(C,10),M=this.Cq(M);M&&M.YAt()}n=this.GNt("load");n.saveData=t.user_script_data,await this.vq(n),this.u5()}ONt(t,e){return t.s5().Qwt()-e.s5().Qwt()}Bbt(t,e){!t.s5()||this.Hxt.has(t)||(this.Hxt.set(t,e),this.Uxt.push(t))}TSt(){this.Hxt=new WeakMap,C33.xn(this.Uxt)}_St(t="full",e=null){this.Uxt.sort(this.ONt);for(var i of this.Uxt)i.Zz(this.Hxt.get(i),t,e);for(var s of this.Uxt)s.rRt(this.Hxt.get(s),t,e);this.TSt()}async pDt(t){t=await Promise.all(t.map(async t=>{var e;return this.vLt()&&this.FW.eW()||"playable-ad-single-file"===this.sW()?(e=await this.FW.Sa(t),URL.createObjectURL(e)):new URL(t,location.href).toString()}));this.Pxt.PNt(t)}LNt(t,e){this.Pxt.xNt(t,e)}CDt(t,e){this.Pxt.DNt(t,e)}mDt(t,e,i,s){return this.Pxt.mDt(t,e,i,null,null,s)}NNt(t,e,i,s){return this.Pxt.NNt(t,e,i,s)}FNt(){return this.Pxt.$Nt()}KL(t,e){this.i3("runtime","invoke-download",{url:t,filename:e})}async rLt(t,e,i,s,r,h){return s=s||e,r=r||i,this.AP()?(await this.f5("runtime","raster-svg-image",{blob:t,imageWidth:e,imageHeight:i,surfaceWidth:s,surfaceHeight:r,imageBitmapOpts:h})).imageBitmap:(t=await self.C3_RasterSvgImageBlob(t,e,i,s,r),h?self.createImageBitmap(t,h):t)}async BNt(t){return this.AP()?this.f5("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}kNt(){this.Ext||(this.Ext=!0,this.i3("runtime","enable-device-orientation"))}WNt(){this.Ixt||(this.Ixt=!0,this.i3("runtime","enable-device-motion"))}LL(){return this.q5t()}VNt(t){this.q5t=t}Nxt(){var t=this.RS();return{fps:this.vL(),tps:this.gL(),cpu:this._L(),gpu:this.EL(),layout:this.xL()?this.xL().jc():"",renderer:t.aS()?t.EG():t.GetAdapterInfoString()}}g0t(){return!!this.Qq()&&C3Debugger.g0t()}c0t(t){return this.hSt()?C3Debugger.c0t(t):Promise.resolve()}jCt(){return!!this.hSt()&&C3Debugger.BreakNext()}HNt(t){this.PLt=!!t,this.UNt()}jNt(){return this.PLt}hSt(){return this.LLt}Qk(t){t?this.xLt--:this.xLt++,this.UNt()}UNt(){this.LLt=this.Qq()&&this.PLt&&0===this.xLt}l1t(){return this.Qq()&&C3Debugger.l1t()}Uj(){return this.Qq()&&this.RS().CG()&&C3Debugger.Uj()}async ZDt(t){if(t)for(var e of t)await this.c0t(e)}QDt(t){return this.ZDt(this.dIt.Y3(t))}dft(t){return this.Wct.dft(t.name,t.params)}C5(t){if(this.AP())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}vx(){return this.kxt}GNt(t){t=C33.nh(C33.Event,t,!1);return t.runtime=this.kxt,t}eDt(){this.kxt=new self.cP(this),this.wxt={tick:this.GNt("tick")}}rDt(){var t,e={};for(t of this.a5t)e[t.kft()]={value:t.$x(),enumerable:!0,writable:!1};this.kxt.NP(e)}hDt(){var t,e={};for(t of this.BP().qft())e[t.kft()]=t.Wft();this.kxt.FP(e)}UL(){return this.Vxt}jx(t,e){this.Wxt.set(t,e)}DD(t){return this.Wxt.get(t)}hx(t){if(!(t instanceof self.Vx))throw new TypeError("expected IObjectClass");t=this.DD(t);if(t&&t instanceof C33.Wot)return t;throw new Error("invalid IObjectClass")}Zx(t){if(!(t instanceof self.qN))throw new TypeError("expected IInstance");t=this.DD(t);if(t&&t instanceof C33.Instance)return t;throw new Error("invalid IInstance")}i5(t){if(!(t instanceof self.M6))throw new TypeError("expected IWorldInstance");t=this.DD(t);if(t&&t instanceof C33.Instance)return t;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=C33.SLt.F_,self.C3_InitRuntime=(t,e)=>t.fMt(e)}{let C33=self.$e;C33.Lxt=class JobSchedulerRuntime extends C33.rh{constructor(t,e){super(),this.Qc=t,this.XNt=new Map,this.YNt=0,this.qNt=e.inputPort,e.outputPort.onmessage=t=>this.zNt(t),this.KNt=e.maxNumWorkers,this.JNt=1,this.ZNt=!1,this.QNt=!1}async fMt(){}$Nt(){return this.KNt}PNt(t){this.qNt.postMessage({type:"_import_scripts",scripts:t})}xNt(t,e){this.qNt.postMessage({type:"_send_blob",blob:t,id:e})}DNt(t,e){this.qNt.postMessage({type:"_send_buffer",buffer:t,id:e},[t])}mDt(t,e,i,s,r,h){if(i=i||[],"number"==typeof h&&(h=Math.floor(h))<=0)throw new Error("invalid maxWorkerNum");let n=this.YNt++;t={type:t,isBroadcast:!1,maxWorkerNum:h,jobId:n,params:e,transferables:i},e=new Promise((t,e)=>{this.XNt.set(n,{resolve:t,progress:s,reject:e,tFt:!1,maxWorkerNum:h})});return r&&r.mf(()=>this.eFt(n)),this.qNt.postMessage(t,i),this.iFt(),e}NNt(t,e,i,s){if(i=i||[],"number"==typeof s&&(s=Math.floor(s))<=0)throw new Error("invalid maxWorkerNum");var r=this.YNt++;this.qNt.postMessage({type:t,isBroadcast:!0,maxWorkerNum:s,jobId:r,params:e,transferables:i},i)}eFt(t){var e=this.XNt.get(t);e&&(e.tFt=!0,e.resolve=null,e.progress=null,e.reject=null,this.qNt.postMessage({type:"_cancel",jobId:t}))}zNt(t){var e=t.data,i=e.type,s=e.jobId;switch(i){case"result":this.sFt(s,e.result);break;case"progress":this.rFt(s,e.progress);break;case"error":this.hFt(s,e.error);break;case"ready":this.nFt();break;default:throw new Error(`unknown message from worker '${i}'`)}}sFt(t,e){var i=this.XNt.get(t);if(!i)throw new Error("invalid job ID");i.tFt||i.resolve(e),this.XNt.delete(t)}rFt(t,e){t=this.XNt.get(t);if(!t)throw new Error("invalid job ID");!t.tFt&&t.progress&&t.progress(e)}hFt(t,e){var i=this.XNt.get(t);if(!i)throw new Error("invalid job ID");i.tFt||i.reject(e),this.XNt.delete(t)}nFt(){this.ZNt&&(this.ZNt=!1,this.JNt++,this.JNt<this.KNt?this.iFt():this.qNt.postMessage({type:"_no_more_workers"}))}aFt(){let t=0;var e;for(e of[...this.XNt.values()].sort((t,e)=>(t.maxWorkerNum||1/0)-(e.maxWorkerNum||1/0))){var i=e.maxWorkerNum||1/0;t<i&&t++}return t}async iFt(){if(!(this.JNt>=this.KNt||this.ZNt||this.QNt||this.aFt()<=this.JNt))try{this.ZNt=!0,(await this.Qc.f5("runtime","create-job-worker")).outputPort.onmessage=t=>this.zNt(t)}catch(t){this.QNt=!0,this.ZNt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.JNt} so far)`,t)}}}}self.C3_Shaders={};{let ForEachOrdered_SortInstances2=function(t,e){var t=t[1],e=e[1];return"number"==typeof t&&"number"==typeof e?t-e:(t=""+t)<(e=""+e)?-1:e<t?1:0},C33=(ForEachOrdered_SortInstances=ForEachOrdered_SortInstances2,self.$e),cacheRegex=null,lastRegex="",lastFlags="",regexMatches=[],lastMatchesStr="",lastMatchesRegex="",lastMatchesFlags="",forEachStack=C33.nh(C33.F3t);C33.yq._q=class SystemPlugin extends C33.bTt{constructor(t){super(t),this.P3t=this.Qc.BP().Jk(),this.Sct=this.Qc.BP().ZP(),this.oFt=0,this.lFt=0,this.uFt=new Map}ah(){super.ah()}u5(){this.Qc.u5()}LF(t){this.Qc.LF(t,null,null)}cFt(t,e){return cacheRegex&&t===lastRegex&&e===lastFlags||(cacheRegex=new RegExp(t,e),lastRegex=t,lastFlags=e),cacheRegex.lastIndex=0,cacheRegex}fFt(t,e,i){var s;return t===lastMatchesStr&&e===lastMatchesRegex&&i===lastMatchesFlags||(s=this.cFt(e,i),regexMatches=t.match(s),lastMatchesStr=t,lastMatchesRegex=e,lastMatchesFlags=i),regexMatches}async dFt(t,e){if(e.length){this.oFt+=e.length;var i,s=[];for(i of e)s.push(t.HY(i));await C33.ta(s,()=>{this.lFt++}),this.lFt++,this.lFt===this.oFt&&(this.lFt=0,this.oFt=0,this.Qc.LF(C33.yq._q.Tq.CFt,null,null))}}pFt(t,e){for(var i of e)0===i.rD()&&t.YY(i)}mFt(){return forEachStack}vFt(e){var i=this.Qc.BP(),t=i.ZP(),s=t.zk(),r=s.jP(),h=r.qk(),n=s.S3t(),a=t.Kk(r),o=i.Jk(),l=o.Kk();if(l.D3t(e),n)for(let t=0;t<e&&!l.u8();++t)i.h8(h),l.o8(t),r.n8(s,a),i.a8(h);else for(let t=0;t<e&&!l.u8();++t)l.o8(t),r.n8(s,a);return t.c8(),o.c8(),!1}*SFt(e){var i=this.Qc.BP(),t=i.ZP(),s=t.zk(),r=s.jP(),h=r.qk(),n=s.S3t(),a=t.Kk(r),o=i.Jk(),l=o.Kk();if(l.D3t(e),n)for(let t=0;t<e&&!l.u8();++t)i.h8(h),l.o8(t),yield*r.ipt(s,a),i.a8(h);else for(let t=0;t<e&&!l.u8();++t)l.o8(t),yield*r.ipt(s,a);return t.c8(),o.c8(),!1}gFt(){var e=this.Qc.BP(),t=e.ZP(),i=t.zk(),s=i.jP(),r=s.qk(),h=i.S3t(),n=t.Kk(s),a=e.Jk(),o=a.Kk();if(h)for(let t=0;!o.u8();++t)e.h8(r),o.o8(t),s.n8(i,n)||o.$$(),e.a8(r);else for(let t=0;!o.u8();++t)o.o8(t),s.n8(i,n)||o.$$();return t.c8(),a.c8(),!1}*TFt(){var e=this.Qc.BP(),t=e.ZP(),i=t.zk(),s=i.jP(),r=s.qk(),h=i.S3t(),n=t.Kk(s),a=e.Jk(),o=a.Kk();if(h)for(let t=0;!o.u8();++t)e.h8(r),o.o8(t),(yield*s.ipt(i,n))||o.$$(),e.a8(r);else for(let t=0;!o.u8();++t)o.o8(t),(yield*s.ipt(i,n))||o.$$();return t.c8(),a.c8(),!1}_Ft(t,e,i){var s=this.Qc.BP(),r=s.ZP(),h=r.zk(),n=h.jP(),a=n.qk(),o=h.S3t(),l=r.Kk(n),u=s.Jk(),c=u.Kk();if(c.Zk(t),c.D3t(i),i<e)if(o)for(let t=e;t>=i&&!c.u8();--t)s.h8(a),c.o8(t),n.n8(h,l),s.a8(a);else for(let t=e;t>=i&&!c.u8();--t)c.o8(t),n.n8(h,l);else if(o)for(let t=e;t<=i&&!c.u8();++t)s.h8(a),c.o8(t),n.n8(h,l),s.a8(a);else for(let t=e;t<=i&&!c.u8();++t)c.o8(t),n.n8(h,l);return r.c8(),u.c8(),!1}*yFt(t,e,i){var s=this.Qc.BP(),r=s.ZP(),h=r.zk(),n=h.jP(),a=n.qk(),o=h.S3t(),l=r.Kk(n),u=s.Jk(),c=u.Kk();if(c.Zk(t),c.D3t(i),i<e)if(o)for(let t=e;t>=i&&!c.u8();--t)s.h8(a),c.o8(t),yield*n.ipt(h,l),s.a8(a);else for(let t=e;t>=i&&!c.u8();--t)c.o8(t),yield*n.ipt(h,l);else if(o)for(let t=e;t<=i&&!c.u8();++t)s.h8(a),c.o8(t),yield*n.ipt(h,l),s.a8(a);else for(let t=e;t<=i&&!c.u8();++t)c.o8(t),yield*n.ipt(h,l);return r.c8(),u.c8(),!1}EFt(i){var t=i.iD(),e=t.eD();if(0!==e.length){var s=this.Qc.BP(),r=s.ZP(),h=r.zk(),n=h.jP(),a=n.qk(),o=h.S3t(),l=r.Kk(n),u=s.Jk(),c=u.Kk(),f=i.oF(),d=forEachStack.Kk();if(C33.$n(d,e),c.D3t(d.length),o)for(let t=0,e=d.length;t<e&&!c.u8();++t){s.h8(a);var C=d[t];i.iD().Pct(C),f&&C.p1t(),c.o8(t),n.n8(h,l),s.a8(a)}else{t.bct(!1);var p=t.Gct();C33.xn(p),p.push(null);for(let t=0,e=d.length;t<e&&!c.u8();++t){var m=d[t];p[0]=m,f&&m.p1t(),c.o8(t),n.n8(h,l)}}r.c8(),u.c8(),C33.xn(d),forEachStack.c8()}return!1}*IFt(i){var t=i.iD(),e=t.eD();if(0!==e.length){var s=this.Qc.BP(),r=s.ZP(),h=r.zk(),n=h.jP(),a=n.qk(),o=h.S3t(),l=r.Kk(n),u=s.Jk(),c=u.Kk(),f=i.oF(),d=forEachStack.Kk();if(C33.$n(d,e),c.D3t(d.length),o)for(let t=0,e=d.length;t<e&&!c.u8();++t){s.h8(a);var C=d[t];i.iD().Pct(C),f&&C.p1t(),c.o8(t),yield*n.ipt(h,l),s.a8(a)}else{t.bct(!1);var p=t.Gct();C33.xn(p),p.push(null);for(let t=0,e=d.length;t<e&&!c.u8();++t){var m=d[t];p[0]=m,f&&m.p1t(),c.o8(t),yield*n.ipt(h,l)}}r.c8(),u.c8(),C33.xn(d),forEachStack.c8()}return!1}AFt(i,t){var e=i.iD(),s=e.eD();if(0!==s.length){var r=this.Qc.BP(),h=r.ZP(),n=r.Oft(),a=h.zk(),o=a.jP(),l=o.qk(),u=a.S3t(),c=h.Kk(o),f=r.Jk(),d=f.Kk(),C=i.oF(),p=forEachStack.Kk();C33.xn(p),d.D3t(s.length);for(let t=0,e=s.length;t<e;++t)p.push([s[t],n.vvt(1,t)]);if(p.sort(ForEachOrdered_SortInstances2),1===t&&p.reverse(),u)for(let t=0,e=p.length;t<e&&!d.u8();++t){r.h8(l);var m=p[t][0];i.iD().Pct(m),C&&m.p1t(),d.o8(t),o.n8(a,c),r.a8(l)}else{e.bct(!1);var v=e.Gct();C33.xn(v),v.push(null);for(let t=0,e=p.length;t<e&&!d.u8();++t){var S=p[t][0];v[0]=S,C&&S.p1t(),d.o8(t),o.n8(a,c)}}h.c8(),f.c8(),C33.xn(p),forEachStack.c8()}return!1}*MFt(i,t){var e=i.iD(),s=e.eD();if(0!==s.length){var r=this.Qc.BP(),h=r.ZP(),n=r.Oft(),a=h.zk(),o=a.jP(),l=o.qk(),u=a.S3t(),c=h.Kk(o),f=r.Jk(),d=f.Kk(),C=i.oF(),p=forEachStack.Kk();C33.xn(p),d.D3t(s.length);for(let t=0,e=s.length;t<e;++t)p.push([s[t],n.vvt(1,t)]);if(p.sort(ForEachOrdered_SortInstances2),1===t&&p.reverse(),u)for(let t=0,e=p.length;t<e&&!d.u8();++t){r.h8(l);var m=p[t][0];i.iD().Pct(m),C&&m.p1t(),d.o8(t),yield*o.ipt(a,c),r.a8(l)}else{e.bct(!1);var v=e.Gct();C33.xn(v),v.push(null);for(let t=0,e=p.length;t<e&&!d.u8();++t){var S=p[t][0];v[0]=S,C&&S.p1t(),d.o8(t),yield*o.ipt(a,c)}}h.c8(),f.c8(),C33.xn(p),forEachStack.c8()}return!1}RFt(t,e){var i=this.uFt.get(t);if(!i){if(!e)return null;i={wFt:null,bFt:new Map},this.uFt.set(t,i)}return i}GFt(t,e,i,s,r){e.HP().Spt(i,e.qP()),s&&t.a8(r)}*OFt(t,e,i,s,r){yield*e.HP().gpt(i,e.qP()),s&&t.a8(r)}}}{let C33=self.$e;C33.yq._q.jIt=class SystemType extends C33.rh{constructor(t){super(),this.uct=t,this.Qc=t.I5(),this.C_t=t.Ux()}ZTt(){}ah(){this.uct=null,this.Qc=null,this.C_t=null}}}{let C33=self.$e;C33.yq._q.Instance=class SystemInstance extends C33.rh{constructor(t,e){super(),this.Mi=t,this.uct=this.Mi.KN(),this.T_t=this.uct.qvt(),this.Qc=this.Mi.I5()}ah(){this.Mi=null,this.uct=null,this.T_t=null,this.Qc=null}}}{let C33=self.$e,tmpPickArray=[];C33.yq._q.Tq={PFt(){return!0},gq(){return!0},Pq(){return!0},NDt(){return!0},FDt(){return!0},hL(){return this.Qc.hL()},Q1t(){var t=this.Qc.Gft();return!t.d3t()&&!t.c3t()},LFt(){var t=this.Qc.Oft().rvt();let e=t.get("TriggerOnce_lastTick");void 0===e&&(e=-1,t.set("TriggerOnce_lastTick",-1));var i=this.Qc.VQ();return t.set("TriggerOnce_lastTick",i),this.Qc.dNt()||e!==i-1},xFt(t){var e=this.Qc.Oft().rvt(),i=e.get("Every_lastTime")||0,s=this.Qc.cL(),r=(e.has("Every_seconds")||e.set("Every_seconds",t),e.get("Every_seconds"));return i+r<=s?(e.set("Every_lastTime",i+r),s>=e.get("Every_lastTime")+.04&&e.set("Every_lastTime",s),e.set("Every_seconds",t),!0):(s<i-.1&&e.set("Every_lastTime",s),!1)},pdt(t){t=this.Qc.BP().Zft(t);return t&&t.pdt()},pLt(){return this.Qc.pLt()},_i(){return C33.ci._i},SDt(){return!0},DFt(){return!0},NFt(){return!0},wNt(){return!0},bNt(){return!0},INt(){return!0},ANt(){return!0},FFt(t){return!!this.Qc.ZL(t)},$Ft(t){switch(t){case 0:return"browser"===C33.ci.gi;case 1:return"iOS"===C33.ci.fi;case 2:return"Android"===C33.ci.fi;case 8:return"cordova"===C33.ci.gi;case 9:return"scirra-arcade"===this.Qc.sW();case 10:return"nwjs"===C33.ci.gi;case 13:return"windows-uwp"===this.Qc.sW();default:return!1}},BFt(t,e,i){return this.cFt(e,i).test(t)},kFt(t,e,i){return C33.compare(t,e,i)},WFt(t,e,i){return e<=t&&t<=i},VFt(t,e,i){return C33.compare(t.Fit(),e,i)},HFt(t){return!!t.Fit()},UFt(t,e){var i,s=this.Qc.cL();return 0===t?!(i=this.Qc.Oft().rvt()).get("CompareTime_executed")&&e<=s&&(i.set("CompareTime_executed",!0),!0):C33.compare(s,t,e)},jFt(t){return isNaN(t)},YSt(t,e,i){return C33._h(C33.ph(t),C33.ph(i))<=C33.ph(e)},qSt(t,e){return C33.Eh(C33.ph(t),C33.ph(e))},zSt(t,e,i){t=C33.ph(t),e=C33.ph(e),i=C33.ph(i);return!C33.Eh(i,e)?!(!C33.Eh(t,e)&&C33.Eh(t,i)):C33.Eh(t,e)&&!C33.Eh(t,i)},XFt(t,e){return"number"==typeof t?0===e:1===e},YFt(t){return!!t},Y0t(t){return t.toLowerCase()===this.Qc.BP().J0t()},qFt(t,i,s,r){if(!t)return!1;var e=this.mFt(),h=e.Kk(),n=t.iD(),a=(C33.$n(h,n.eD()),n.yct()&&C33.xn(n.Oct()),this.Qc.Oft());let o=0;for(let t=0,e=h.length;t<e;++t){var l=h[t];h[o]=l,i=a.vvt(1,t),r=a.vvt(3,t),C33.compare(i,s,r)?++o:n.wct(l)}C33.Ln(h,o),n.Lct(h);var u=!!h.length;return C33.xn(h),e.c8(),t.cpt(),u},zFt(t,e){if(!t)return!1;var i=this.mFt(),s=i.Kk(),r=t.iD(),h=(C33.$n(s,r.eD()),r.yct()&&C33.xn(r.Oct()),this.Qc.Oft());let n=0;for(let t=0,e=s.length;t<e;++t){var a=s[t];s[n]=a,h.vvt(1,t)?++n:r.wct(a)}C33.Ln(s,n),r.Lct(s);var o=!!s.length;return C33.xn(s),i.c8(),t.cpt(),o},KFt(t,i,s){if(!t)return!1;var e=t.iD(),r=e.eD();if(0===r.length)return!1;var h=this.Qc.Oft();let n=null,a=0;for(let t=0,e=r.length;t<e;++t){var o=r[t];s=h.vvt(2,t),(null===n||0===i&&s<a||1===i&&s>a)&&(a=s,n=o)}return e.$ct(n),t.cpt(),!0},JFt(t,e){var i,s;return!(!t||(s=(i=t.iD()).eD(),(e=Math.floor(e))>=s.length)||(s=s[e],i.$ct(s),t.cpt(),0))},ZFt(t){var e,i,s;return!(!t||(s=(e=t.iD()).eD(),(i=Math.floor(this.Qc.LL()*s.length))>=s.length)||(s=s[i],e.$ct(s),t.cpt(),0))},QFt(t){return!!t&&!!t.rD()&&(t.iD().bct(!0),t.cpt(),!0)},t7t(t,i,s){if(!t)return!1;var r=t.iD(),e=r.eD(),h=this.Qc.jP().Bct(),n=this.Qc.Oft().Q2t();r.yct()?(C33.$n(tmpPickArray,e),r._ct(),r.bct(!1)):h?(C33.$n(tmpPickArray,r.Oct()),C33.xn(r.Oct())):(C33.$n(tmpPickArray,r.Gct()),C33.xn(r.Gct()));for(let t=0,e=tmpPickArray.length;t<e;++t){var a=tmpPickArray[t];C33.xor(a.s5().D7(i,s),n)?r.Rct(a):r.wct(a)}return t.cpt(),C33.xor(!!r.Gct().length,n)},e7t(e){if(!e)return!1;var i=e.hU();let s=null;var t,r=this.Qc.DAt();for(let t=r.length-1;0<=t;--t){var h=r[t];if(i){if(h.KN().vSt(e)){s=h;break}}else if(h.KN()===e){s=h;break}}return s||(t=e.eD()).length&&(s=t.at(-1)),!!s&&(e.iD().$ct(s),e.cpt(),!0)},i7t(t){return this.Qc.hSt()?this.SFt(t):this.vFt(t)},s7t(){return this.Qc.hSt()?this.TFt():this.gFt()},r7t(t,e,i){return this.Qc.hSt()?this.yFt(t,e,i):this._Ft(t,e,i)},o0(t){return this.Qc.hSt()?this.IFt(t):this.EFt(t)},h7t(t,e,i){return this.Qc.hSt()?this.MFt(t,i):this.AFt(t,i)},n7t(t){return!!t&&t.nN()},a7t(t){return!!t&&t.CN()},o7t(t){return!!t&&t.cN()},l7t(t){return!!t&&!t.rD()},u7t(t,e,i){return!!t&&C33.compare(100*t.Cb(),e,i)},c7t(t){var e=this.Qc.xL();return!!e&&e.wY(t)},CFt(){return!0},f7t(){return 0<this.oFt},d7t(t,e){var i=this.Qc.VMt();return!!i&&!!e&&!!i.kot(t,e)}}}{let SortZOrderList2=function(t,e){var i=t[0]-e[0];return 0!=i?i:t[1]-e[1]},SortInstancesByValue2=function(t,e){return t[1]-e[1]},C33=(SortZOrderList=SortZOrderList2,SortInstancesByValue=SortInstancesByValue2,self.$e),tempZOrderList=[],tempInstValues=[],tempRect=C33.nh(C33.Rect),tempColor=C33.nh(C33.Fa),EMPTY_ITERABLE=[];C33.yq._q.crt={C7t(t,e){t.gst(e)},p7t(t,e){t.cs()&&"number"!=typeof e&&(e=parseFloat(e)),t.gst(t.Fit()+e)},m7t(t,e){t.cs()&&t.gst(t.Fit()-e)},v7t(t,e){t.gst(!!e)},S7t(t){t.gst(!t.Fit())},g7t(t){t.gst(t.bft())},T7t(t){this.Qc.BP().Kft(t)},_7t(t,e,i,s,r,h){if(t&&e){i=this.Qc.nD(t,e,i,s,r,h);if(i){r&&e.aD(i);var n,a,s=this.Qc.BP(),h=(s.oD(!0),i.lD(),s.oD(!1),new Map);i.LMt(h,t,r);for([n,a]of h)n.iD().xct(a)}}},y7t(t,e,i,s,r,h){t&&e&&(t=this.Qc.EDt(t))&&C33.yq._q.crt._7t.call(this,t,e,i,s,r,h)},sU(s,r,h,n,a,o,t,l,u,c,f){if(s){var d=this.Qc.e5();let e=d;if(o){var o=this.Qc.FL().Cz(o);if(!o)return;e=o}let i=null;if(!("number"!=typeof t||0<=t)||(i=e.r5(t))){let t=null;("number"!=typeof l||0<=l)&&!(t=d.r5(l))||(tempRect.set(r,h,n,a),o=e.sU(s,tempRect,i,t,u,c,f),s.iD().Lct(o),s.cpt())}}},E7t(){var t=this.P3t;t.w3t()&&t.M3t().$$()},mdt(t,e){t=this.Qc.BP().Zft(t);t&&(0===e?t.mdt(!1):1===e?t.mdt(!0):t.mdt(!t.pdt()))},I7t(t){this.Qc.mL(t)},A7t(t,e){var i;if(e<0&&(e=0),t)for(i of t.iD().eD())i.mL(e)},M7t(t){var e;if(t)for(e of t.iD().eD())e.pF()},wn(t){if(!(t<0))return this.Qc.BP().P0t().yTt(t),!0},sL(t){return this.Qc.BP().P0t().ETt(t),!0},R7t(){var t=this.Qc.BP();return t.P0t().ITt(t.X0t()),!0},eL(t){this.Qc.BP().eL(t)},async qPt(t,e,i,s,r,h){var n=this.Qc.jB();n&&(this.u5(),await n.qPt(0===t?"image/png":"image/jpeg",e/100,i,s,r,h),await this.Qc.DF(C33.yq._q.Tq.DFt,null))},w7t(t,e){var i;t<=0||e<=0||(this.Qc.gPt(t,e),this.Qc.e5().yX(),(i=this.Qc.jB())&&("off"!==i.fPt()&&this.Qc.ADt(t,e),i.LM(i.YB(),i.zB(),!0),this.Qc.u5()))},b7t(t){var e=this.Qc.jB();e&&"off"!==e.fPt()&&(e.MPt(0!==t?"high":"low"),e.LM(e.YB(),e.zB(),!0))},eit(t){this.Qc.vNt(t)},G7t(t){this.Qc.SNt(t)},O7t(t){this.Qc.tTt(t)},P7t(t){},L7t(){for(var t of this.Qc.FL().kL())t.Wq()},x7t(t){this.Qc.CNt(0!==t)},D7t(t,e){this.Qc.PL(1/t),this.Qc.bL(1/e)},N7t(t,e){this.Qc.bL(t),this.Qc.PL(e)},F7t(t){this.Qc.ML(["vsync","unlimited-tick","unlimited-frame"][t])},$7t(t,i){if(t){var s=t.iD().eD(),r=tempZOrderList,h=tempInstValues,n=this.Qc.e5(),a=t.hU(),o=t.xmt();for(let t=0,e=s.length;t<e;++t){var l=s[t],u=l.s5();if(u){let t;t=a?l.Qrt(i+l.KN().Lmt(o)):l.Qrt(i),r.push([u.r5().uP(),u.h5()]),h.push([l,t])}}if(r.length){r.sort(SortZOrderList2),h.sort(SortInstancesByValue2);let i=!1;for(let t=0,e=r.length;t<e;++t){var c=h[t][0],f=n.n5(r[t][0]),d=r[t][1],C=f.a5();C[d]!==c&&((C[d]=c).s5().o5(f,!0),f.l5(c),i=!0)}i&&this.Qc.u5(),C33.xn(tempZOrderList),C33.xn(tempInstValues)}}},Z5(t,e){t=Math.floor(t),e=Math.floor(e),t<=0||e<=0||!Number.isFinite(t)||!Number.isFinite(e)||this.Qc.vP().Z5(t,e)},B7t(t){var e;this.Qc.Pp()||(e=this.Qc.FL()).VL()||e.HL(t)},k7t(t){var e;this.Qc.Pp()||(e=this.Qc.FL()).VL()||(t=e.Cz(t))&&e.HL(t)},W7t(t){var e,i,s;this.Qc.Pp()||(e=this.Qc.FL()).VL()||(i=(s=e.kL()).indexOf(e.xL()),t&&0===i)||!t&&i===s.length-1||(s=s[i+(t?-1:1)],e.HL(s))},V7t(){var t;this.Qc.Pp()||(t=this.Qc.FL()).VL()||(t.HL(t.xL()),this.Qc.BP().i0t())},H7t(t,e){t&&t.rN(e)},U7t(t,e){t&&t.lN(e)},j7t(t,e){t&&t.fN(e)},X7t(t,e){t&&t.mb(e/100)},Y7t(t,e){t&&t.pN(e)},q7t(t,e){t&&t.vN(e)},z7t(t,e){t&&t._D(C33.ph(+e))},K7t(t,e,i){t&&(t.LN(!0),t.ED(e),t.AD(i))},J7t(t){t&&t.LN(!1)},Z7t(t,e,i){t&&t.BU(e/100,i/100)},Q7t(t,e){t&&t.ug(+e)},t6t(t,e){t&&(tempColor.po(e),tempColor.dh(),(e=t.PN()).no(tempColor)||(e.Ka(tempColor),this.u5()))},e6t(t,e){t&&t.MN(e)},i6t(t,e){t&&t.YS(e)},s6t(t,e,i){t&&(i=t.CD().jst(i))&&(e=1===e,i.n1t()!==e)&&(i.sGt(e),t.K6(),this.Qc.u5())},r6t(t,e,i,s){var r;t&&(e=(t=t.CD()).jst(e))&&(i=Math.floor(i),r=e.Uy().Xy(i))&&("color"===r?(tempColor.po(s),s=tempColor):"percent"===r&&(s/=100),t.Z6(e.uP(),i,s))&&e.n1t()&&this.Qc.u5()},h6t(t,e){t&&t.bN(e)},n6t(t){this.Qc.e5().gD(+t)},a6t(t){this.Qc.e5()._D(C33.ph(+t))},o6t(t,e){var i=this.Qc.e5(),e=i.CD().jst(e);e&&(t=1===t,e.n1t()!==t)&&(e.sGt(t),i.K6(),this.Qc.u5())},l6t(t,e,i){var s,r=this.Qc.e5().CD(),t=r.jst(t);t&&(e=Math.floor(e),s=t.Uy().Xy(e))&&("color"===s?(tempColor.po(i),i=tempColor):"percent"===s&&(i/=100),r.Z6(t.uP(),e,i))&&t.n1t()&&this.Qc.u5()},u6t(t,e){this.Qc.e5().UD(t/100,e/100)},c6t(t){var e=this.Qc.e5();0===t?e.YD():e.qD()},f6t(t){this.Qc.e5().ED(t)},d6t(t){this.Qc.e5().AD(t)},C6t(t,e){var i=this.Qc.e5();i.ED(t),i.AD(e)},p6t(t){var e;t&&(t=t.iSt())&&(t=t.s5())&&((e=this.Qc.e5()).ED(t.rg()),e.AD(t.ag()))},ND(t,e,i){var s=this.Qc.e5();try{s.ND(t,e,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},$D(t,e,i){if(t){var s=this.Qc.e5();try{s.$D(t,e,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},kD(t){t&&this.Qc.e5().kD(t)},VD(){this.Qc.e5().VD()},async m6t(t){var e=this.Qc.xL();e&&t&&!this.Qc.Pp()&&(t=t.hU()?t.sCt():[t],await this.dFt(e,t))},async v6t(t){await C33.yq._q.crt.m6t.call(this,this.Qc.EDt(t))},S6t(t){var e=this.Qc.xL();e&&t&&(t=t.hU()?t.sCt():[t],this.pFt(e,t))},g6t(t){C33.yq._q.crt.S6t.call(this,this.Qc.EDt(t))},T6t(){var t,e=this.Qc.xL();e&&(t=e.kY(),this.pFt(e,t))},async _6t(t){var e=this.Qc.xL();t&&e&&!this.Qc.Pp()&&await this.dFt(e,t.FY())},async y6t(t){var e=this.Qc.xL(),t=this.Qc.FL().Cz(t);t&&e&&!this.Qc.Pp()&&await this.dFt(e,t.FY())},tL(t){var e=this.Sct.JP();if(e)switch(e.QP()){case 1:"number"==typeof t&&e.tL(t);break;case 2:"string"==typeof t&&e.tL(t);break;case 3:e.tL(t)}},E6t(t,e,i){var s=this.RFt(t.toLowerCase(),!0),r=s.bFt,h=e.toLowerCase(),s=(r.has(h)&&console.warn(`[Construct] Function map '${t}' string '${e}' already in map; overwriting entry`),C33.first(r.values())||s.wFt);if(s&&0!==s.zP()!=(0!==i.zP()))return void console.error(`[Construct] Function map '${t}' string '${e}' function return type not compatible with other functions in the map; entry ignored`);r.set(h,i)},I6t(t,e){var i=this.RFt(t.toLowerCase(),!0),s=(i.wFt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),C33.first(i.bFt.values())||i.wFt);if(s&&0!==s.zP()!=(0!==e.zP()))return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`);i.wFt=e},A6t(t,e,i){var s=this.Qc,r=s.hSt()?EMPTY_ITERABLE:null,h=(i=Math.floor(i),this.RFt(t.toLowerCase(),!1));if(!h)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),r;let n=h.bFt.get(e.toLowerCase());if(!n){if(!h.wFt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${e}'; call ignored (consider setting a default)`),r;n=h.wFt,i=0}if(!n.Uu())return r;if(0!==n.zP())return console.warn(`[Construct] Call mapped function: map '${t}' string '${e}' has a return type so cannot be called`),r;var h=s.BP(),t=h.jP(),e=t.UP(),r=0<e.length,a=(r&&(n.qP()?h.h8(e):h.G0t(e)),[]),t=h.ydt(t);if(t){var o=t.Idt();for(let t=i,e=o.length;t<e;++t)a.push(o[t].Fit())}var l=n.Idt();for(let t=a.length,e=l.length;t<e;++t)a.push(l[t].bft());return s.hSt()?this.OFt(h,n,a,r,e):this.GFt(h,n,a,r,e)}}}{let C33=self.$e;C33.yq._q.frt={M6t:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return t="string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},L(t){return t.toString()},Ht(t){return"string"==typeof t?t.length:0},random(t,e){return void 0===e?this.Qc.LL()*t:this.Qc.LL()*(e-t)+t},Smt(...t){return t[Math.floor(this.Qc.LL()*t.length)]},R6t(t,...e){return"number"!=typeof t&&(t=0),e[t=C33.dh(Math.floor(t),0,e.length-1)]},pi(){return Math.PI},w6t(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},b6t(t,e){e=Math.max(Math.floor(e),0);e=Math.pow(10,e);return Math.round((t+Number.EPSILON)*e)/e},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(C33.ph(t))},cos(t){return Math.cos(C33.ph(t))},tan(t){return Math.tan(C33.ph(t))},asin(t){return C33.mh(Math.asin(t))},acos(t){return C33.mh(Math.acos(t))},atan(t){return C33.mh(Math.atan(t))},exp(t){return Math.exp(t)},zt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...i){let s=i[0];"number"!=typeof s&&(s=0);for(let t=1,e=i.length;t<e;++t){var r=i[t];"number"==typeof r&&s<r&&(s=r)}return s},min(...i){let s=i[0];"number"!=typeof s&&(s=0);for(let t=1,e=i.length;t<e;++t){var r=i[t];"number"==typeof r&&s>r&&(s=r)}return s},dh(t,e,i){return C33.dh(t,e,i)},Mt(t,e,i,s){return C33.Sh(t,e,i,s)},angle(t,e,i,s){return C33.mh(C33.Th(t,e,i,s))},Lt(t,e,i){return C33.Lt(t,e,i)},wh(t,e,i){return C33.wh(t,e,i)},Gh(t,e,i,s){return C33.Gh(t,e,i,s)},Oh(t,e,i,s,r){return C33.Oh(t,e,i,s,r)},Ph(t,e,i){return C33.Ph(t,e,i)},G6t(t,e){return C33.mh(C33._h(C33.ph(t),C33.ph(e)))},O6t(t,e,i){return C33.mh(C33.Ih(C33.ph(t),C33.ph(e),i))},P6t(t,e,i){return C33.mh(C33.yh(C33.ph(t),C33.ph(e),C33.ph(i)))},L6t(t,e,i){return(t|=0)&~(1<<(e|=0))|(i=0!==i?1:0)<<e},x6t(t,e){return(t|=0)^1<<(e|=0)},D6t(t,e){return(t|=0)&1<<(e|=0)?1:0},N6t(){return"\n"},F6t(t){return"string"==typeof t?t.toUpperCase():""},$6t(t){return"string"==typeof t?t.toLowerCase():""},left(t,e){return"string"==typeof t?t.substr(0,e):""},mid(t,e,i){return"string"!=typeof t?"":i<0?t.substr(e):t.substr(e,i)},right(t,e){return"string"==typeof t?t.substr(Math.max(t.length-e,0)):""},trim(t){return"string"==typeof t?t.trim():""},B6t(t,e,i){return"string"!=typeof t||"string"!=typeof i||(t=t.split(i),(e=Math.floor(e))<0)||e>=t.length?"":t[e]},k6t(t,e){return"string"==typeof t&&"string"==typeof e&&t.length?t.split(e).length:0},find(t,e){return"string"==typeof t&&"string"==typeof e?t.search(new RegExp(C33.os(e),"i")):-1},W6t(t,e){return"string"==typeof t&&"string"==typeof e?t.search(new RegExp(C33.os(e),"")):-1},replace(t,e,i){return"string"==typeof t&&"string"==typeof e&&"string"==typeof i?t.replace(new RegExp(C33.os(e),"gi"),i):"string"==typeof t?t:""},V6t(t,...i){let s=t;for(let t=0,e=i.length;t<e;++t)s=s.replaceAll(`{${t}}`,i[t].toString());return s},H6t(t,e,i){e=this.cFt(e,i);return t?t.search(e):-1},U6t(t,e,i,s){e=this.cFt(e,i);return t?t.replace(e,s):""},j6t(t,e,i){t=this.fFt(t.toString(),e,i);return t?t.length:0},X6t(t,e,i,s){s=Math.floor(s);t=this.fFt(t.toString(),e,i);return!t||s<0||s>=t.length?"":t[s]},Y6t(t,e){var i=t<0?"-":"",e=e-(t=t<0?-t:t).toString().length;return(i+="0".repeat(Math.max(e,0)))+t.toString()},q6t(t){return encodeURIComponent(t)},z6t(t){return decodeURIComponent(t)},nL(){return this.Qc.YK()},timescale(){return this.Qc.pL()},K6t(){return(Date.now()-this.Qc.iNt())/1e3},J6t(){return Date.now()},time(){return this.Qc.cL()},tickcount(){return this.Qc.VQ()},Z6t(){return this.Qc.hNt()},fps(){return this.Qc.vL()},Q6t(){return this.Qc._L()},t$t(){return this.Qc.EL()},e$t(){return this.Qc.jB().lPt()},i$t(){return this.Qc.jB().cPt()},s$t(){return this.Qc.RP()},r$t(){return this.Qc.bP()},h$t(){return this.Qc.RP()},n$t(){return this.Qc.bP()},a$t(){return this.Qc.e5().ID()},o$t(){return this.Qc.e5().MD()},l$t(){return this.Qc.e5().jc()},u$t(){return this.Qc.e5().TD()},c$t(){return C33.mh(this.Qc.e5().yD())},f$t(){return this.Qc.e5().eC()},d$t(){return this.Qc.e5().cC()},C$t(){return 100*this.Qc.e5().PU()},p$t(){return 100*this.Qc.e5().LU()},m$t(t){t=this.Qc.e5().r5(t);return t?t.OU().ml():0},v$t(t){t=this.Qc.e5().r5(t);return t?t.OU().vl():0},S$t(t){t=this.Qc.e5().r5(t);return t?t.OU().Sl():0},g$t(t){t=this.Qc.e5().r5(t);return t?t.OU().gl():0},T$t(t){t=this.Qc.e5().r5(t);return t?t.OU().width():0},_$t(t){t=this.Qc.e5().r5(t);return t?t.OU().height():0},y$t(t){var t=this.Qc.e5().r5(t);return t?((t=t.OU()).ml()+t.Sl())/2:0},E$t(t){var t=this.Qc.e5().r5(t);return t?((t=t.OU()).vl()+t.gl())/2:0},I$t(t,e,i){t=this.Qc.e5().r5(t);return t?t.FN(e,i)[0]:0},A$t(t,e,i){t=this.Qc.e5().r5(t);return t?t.FN(e,i)[1]:0},M$t(t,e,i){t=this.Qc.e5().r5(t);return t?t.WN(e,i)[0]:0},R$t(t,e,i){t=this.Qc.e5().r5(t);return t?t.WN(e,i)[1]:0},w$t(t,e,i,s){var r=this.Qc.e5(),t=r.r5(t),r=r.r5(e);return t&&r&&t!==r?([e,t]=t.WN(i,s),r.FN(e,t)[0]):i},b$t(t,e,i,s){var r=this.Qc.e5(),t=r.r5(t),r=r.r5(e);return t&&r&&t!==r?([e,t]=t.WN(i,s),r.FN(e,t)[1]):s},G$t(t){t=this.Qc.e5().r5(t);return t?t.mN():0},O$t(t){t=this.Qc.e5().r5(t);return t?C33.mh(t.gN()):0},P$t(t){t=this.Qc.e5().r5(t);return t?100*t.Cb():0},L$t(t){t=this.Qc.e5().r5(t);return t?t.SN():0},x$t(t){t=this.Qc.e5().r5(t);return t?t.ID():0},D$t(t){t=this.Qc.e5().r5(t);return t?t.MD():0},N$t(t){t=this.Qc.e5().r5(t);return t?100*t._N():0},F$t(t){t=this.Qc.e5().r5(t);return t?100*t.EN():0},$$t(t){t=this.Qc.e5().r5(t);return t?t.lg():0},B$t(t){t=this.Qc.e5().r5(t);return t?t.uP():-1},k$t(){var t=this.Qc.jB();return t?t.KPt():""},W$t(t){var e=this.P3t;return e.w3t()?t?(t=e.G3t(t))?t.uP():0:e.M3t().uP():0},V$t(){return this.Qc.gNt()},H$t(t,e,...i){var s=this.RFt(t.toLowerCase(),!1);if(!s)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let r=s.bFt.get(e.toLowerCase());if(!r){if(!s.wFt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${e}'; returning 0 (consider setting a default)`),0;r=s.wFt}var s=r.zP(),h=r.WP();if(0===s)return console.warn(`[Construct] Call mapped function: map '${t}' string '${e}' has no return type so cannot be called from an expression; returning 0`),0;if(!r.Uu())return h;var t=this.Qc.BP(),e=t.jP().UP(),n=0<e.length,a=(n&&(r.qP()?t.h8(e):t.G0t(e)),r.Idt());for(let t=i.length,e=a.length;t<e;++t)i.push(a[t].bft());var o=r.HP(),o=o.YP(o.UP(),r.qP(),s,h,...i);return n&&t.a8(e),o},U$t(){return this.Qc.CP().yW()},j$t(){return 0===this.oFt?1:this.lFt/this.oFt},renderer(){return this.Qc.LPt()?"webgpu":"webgl"},X$t(){return this.Qc.LPt()?this.Qc.LPt().GetAdapterInfoString():this.Qc.PPt().EG()},Y$t(){var t=this.Qc.RS().uS();return Math.round(100*t/1048576)/100},q$t(t,e,i){return C33.Bh(t,e,i)},z$t(t,e,i){return C33.Wh(t/100,e/100,i/100)},K$t(t,e,i,s){return C33.kh(t/100,e/100,i/100,s/100)},J$t(t,e,i){return C33.Wh(t/255,e/255,i/255)},Z$t(t,e,i,s){return C33.kh(t/255,e/255,i/255,s/255)},Q$t(){return this.Qc._P()},tBt(){return this.Qc.EP()},eBt(){return this.Qc.jP().MY().jc()},iBt(){return this.Qc.jP()._Ct()}}}{let C33=self.$e;C33.yq.Touch=class TouchPlugin extends C33.bTt{constructor(t){super(t)}ah(){super.ah()}}}{let GetTouchSdkInstance2=function(){return touchObjectType.Wx().O6()},C33=(GetTouchSdkInstance=GetTouchSdkInstance2,self.$e),C3X=self.qe,touchObjectType=(C33.yq.Touch.jIt=class TouchType extends C33.d_t{constructor(t){super(t)}ah(){super.ah()}ZTt(){}QTt(){return self.sBt}},null);self.sBt=class ITouchObjectType extends self.Vx{constructor(t){super(t),(touchObjectType=t).I5().UL().XL=this}requestPermission(t){C3X.As(t);var e=GetTouchSdkInstance2();if("orientation"===t)return e.rBt(0);if("motion"===t)return e.rBt(1);throw new Error("invalid type")}}}{let C33=self.$e,DOM_COMPONENT_ID="touch";C33.yq.Touch.Instance=class TouchInstance extends C33.S_t{constructor(t,e){super(t,DOM_COMPONENT_ID),this.hBt=new Map,this.nBt=!1,this.aBt=!1,this.oBt=0,this.lBt=0,this.uBt=0,this.cBt=0,this.fBt=0,this.dBt=0,this.CBt=0,this.pBt=0,this.mBt=0,this.vBt=0,this.SBt=0,this.gBt=0,this.TBt=0,this._Bt=0,this.yBt=0,this.EBt=0,this.IBt=0,this.ABt=[],e&&(this.nBt=e[0]),this.w_t("permission-result",t=>this.MBt(t));t=this.I5().x3();this.vf=new C33.Cf(C33.nf.df(t,"pointerdown",t=>this.RBt(t.data)),C33.nf.df(t,"pointermove",t=>this.wBt(t.data)),C33.nf.df(t,"pointerup",t=>this.bBt(t.data,!1)),C33.nf.df(t,"pointercancel",t=>this.bBt(t.data,!0)),C33.nf.df(t,"deviceorientation",t=>this.GBt(t.data)),C33.nf.df(t,"deviceorientationabsolute",t=>this.OBt(t.data)),C33.nf.df(t,"devicemotion",t=>this.PBt(t.data)),C33.nf.df(t,"tick2",t=>this.Wz()))}ah(){this.hBt.clear(),super.ah()}RBt(t){if("mouse"===t.pointerType){if(!this.nBt)return;this.aBt=!0}var e,i,s,r,h=t.pointerId;this.hBt.has(h)||(e=t.pageX-this.Qc.$N(),t=t.pageY-this.Qc.BN(),i=performance.now(),s=this.hBt.size,this.SBt=s,this.gBt=h,(r=C33.nh(C33.yq.Touch.LBt)).fMt(i,e,t,h,s),this.hBt.set(h,r),this.LF(C33.yq.Touch.Tq.xBt),this.LF(C33.yq.Touch.Tq.DBt),this._Bt=e,this.yBt=t,this.IBt=0,this.LF(C33.yq.Touch.Tq.NBt))}wBt(t){var e,i,s,r;"mouse"===t.pointerType&&!this.aBt||!(e=this.hBt.get(t.pointerId))||(i=performance.now())-e.UG()<2||(s=t.pageX-this.Qc.$N(),r=t.pageY-this.Qc.BN(),e.gV(i,s,r,t.width,t.height,t.pressure))}bBt(t,e){if("mouse"===t.pointerType){if(!this.aBt)return;this.aBt=!1}var i,s=performance.now(),r=t.pointerId,h=this.hBt.get(r);h&&(this.SBt=h.FBt(),this.gBt=h.lB(),e||(i=t.pageX-this.Qc.$N(),t=t.pageY-this.Qc.BN(),this._Bt=i,this.yBt=t,this.IBt=1,this.LF(C33.yq.Touch.Tq.NBt)),this.LF(C33.yq.Touch.Tq.$Bt),this.LF(C33.yq.Touch.Tq.BBt),e||("single-tap"===(i=h.kBt(s))?(this.LF(C33.yq.Touch.Tq.WBt),this._Bt=h.rg(),this.yBt=h.ag(),this.LF(C33.yq.Touch.Tq.VBt)):"double-tap"===i&&(this.LF(C33.yq.Touch.Tq.HBt),this._Bt=h.rg(),this.yBt=h.ag(),this.LF(C33.yq.Touch.Tq.UBt))),h.ah(),this.hBt.delete(r))}rBt(i){return this.P_t("request-permission",{type:i}),new Promise((t,e)=>{this.ABt.push({type:i,resolve:t,reject:e})})}MBt(t){var e,i=t.result;let s=t.type;this.TBt=s;for(e of this.ABt.filter(t=>t.type===s))e.resolve(i?"granted":"denied");this.ABt=this.ABt.filter(t=>t.type!==s),i?(this.LF(C33.yq.Touch.Tq.jBt),0===s?this.Qc.kNt():this.Qc.WNt()):this.LF(C33.yq.Touch.Tq.XBt)}GBt(t){"number"==typeof t.webkitCompassHeading?this.oBt=t.webkitCompassHeading:t.absolute&&(this.oBt=t.alpha),this.lBt=t.alpha,this.uBt=t.beta,this.cBt=t.gamma}OBt(t){this.oBt=t.alpha}PBt(t){var e=t.acceleration,e=(e&&(this.fBt=e.x,this.dBt=e.y,this.CBt=e.z),t.accelerationIncludingGravity);e&&(this.pBt=e.x,this.mBt=e.y,this.vBt=e.z)}Wz(){var t,e=performance.now();let i=0;for(t of this.hBt.values())t.UG()<=e-50&&t.YBt(e),t.qBt(e)&&(this.SBt=t.FBt(),this.gBt=t.lB(),this.EBt=i,this.LF(C33.yq.Touch.Tq.zBt),this._Bt=t.rg(),this.yBt=t.ag(),this.LF(C33.yq.Touch.Tq.KBt),this.EBt=0),++i}JBt(t){t=Math.floor(t);for(var e of this.hBt.values()){if(0===t)return e;--t}return null}ZBt(t,e){return 0<=t&&0<=e&&t<this.Qc.MDt()&&e<this.Qc.RDt()}W_t(){return[{title:"plugins.touch.debugger.touches",properties:[...this.hBt.values()].map(t=>({name:"$"+t.lB(),value:t.rg()+", "+t.ag()}))}]}}}{let C33=self.$e,tempArr=[];C33.yq.Touch.Tq={DBt(){return!0},BBt(){return!0},QBt(){return 0<this.hBt.size},NBt(t,e){return!!t&&e===this.IBt&&!!this.ZBt(this._Bt,this.yBt)&&this.Qc.vP().NGt(t,[[this._Bt,this.yBt]],!1)},tkt(t){var e,i;return!!t&&(e=this.Qc.Oft().Q2t(),i=[...this.hBt.values()].filter(t=>this.ZBt(t.rg(),t.ag())).map(t=>[t.rg(),t.ag()]),C33.xor(this.Qc.vP().NGt(t,i,e),e))},ekt(t,e,i){t=this.JBt(t);return!!t&&C33.compare(t.t$(),e,i)},ikt(){return!0},skt(){return!0},rkt(t,e,i){this.Qc.kNt();let s=0;return s=0===t?this.lBt:1===t?this.uBt:this.cBt,C33.compare(s,e,i)},hkt(t,e,i){this.Qc.WNt();let s=0;return s=0===t?this.pBt:1===t?this.mBt:2===t?this.vBt:3===t?this.fBt:4===t?this.dBt:this.CBt,C33.compare(s,e,i)},xBt(t){return(t=Math.floor(t))===this.SBt},$Bt(t){return(t=Math.floor(t))===this.SBt},nkt(t){return t=Math.floor(t),this.hBt.size>=t+1},zBt(){return!0},WBt(){return!0},HBt(){return!0},KBt(t){return!!t&&!!this.ZBt(this._Bt,this.yBt)&&this.Qc.vP().NGt(t,[[this._Bt,this.yBt]],!1)},VBt(t){return!!t&&!!this.ZBt(this._Bt,this.yBt)&&this.Qc.vP().NGt(t,[[this._Bt,this.yBt]],!1)},UBt(t){return!!t&&!!this.ZBt(this._Bt,this.yBt)&&this.Qc.vP().NGt(t,[[this._Bt,this.yBt]],!1)},jBt(t){return this.TBt===t},XBt(t){return this.TBt===t}}}{let C33=self.$e;C33.yq.Touch.crt={akt(t){this.rBt(t)}}}{let C33=self.$e;C33.yq.Touch.frt={okt(){return this.hBt.size},DSt(t){var e=this.JBt(this.EBt);return e?e.lkt(this.Qc.e5(),t,!0):0},NSt(t){var e=this.JBt(this.EBt);return e?e.lkt(this.Qc.e5(),t,!1):0},ukt(t,e){t=this.JBt(t);return t?t.lkt(this.Qc.e5(),e,!0):0},ckt(t,e){t=this.JBt(t);return t?t.lkt(this.Qc.e5(),e,!1):0},fkt(t,e){t=this.hBt.get(t);return t?t.lkt(this.Qc.e5(),e,!0):0},dkt(t,e){t=this.hBt.get(t);return t?t.lkt(this.Qc.e5(),e,!1):0},Ckt(){var t=this.JBt(0);return t?t.rg():0},pkt(){var t=this.JBt(0);return t?t.ag():0},mkt(t){t=this.JBt(t);return t?t.rg():0},vkt(t){t=this.JBt(t);return t?t.ag():0},Skt(t){t=this.hBt.get(t);return t?t.rg():0},gkt(t){t=this.hBt.get(t);return t?t.ag():0},Tkt(t){t=this.JBt(t);return t?t.t$():0},_kt(t){t=this.hBt.get(t);return t?t.t$():0},ykt(t){t=this.JBt(t);return t?C33.mh(t.yD()):0},Ekt(t){t=this.hBt.get(t);return t?C33.mh(t.yD()):0},Ikt(){return this.Qc.kNt(),this.oBt},Akt(){return this.Qc.kNt(),this.lBt},Mkt(){return this.Qc.kNt(),this.uBt},Rkt(){return this.Qc.kNt(),this.cBt},wkt(){return this.Qc.WNt(),this.pBt},bkt(){return this.Qc.WNt(),this.mBt},Gkt(){return this.Qc.WNt(),this.vBt},Okt(){return this.Qc.WNt(),this.fBt},Pkt(){return this.Qc.WNt(),this.dBt},Lkt(){return this.Qc.WNt(),this.CBt},xkt(){return this.SBt},Dkt(){return this.gBt},Nkt(t){t=this.hBt.get(t);return t?t.eC():0},Fkt(t){t=this.hBt.get(t);return t?t.cC():0},$kt(t){t=this.hBt.get(t);return t?t.Bkt():0}}}{let C33=self.$e,GESTURE_HOLD_THRESHOLD=15,GESTURE_HOLD_TIMEOUT=500,GESTURE_TAP_TIMEOUT=333,GESTURE_DOUBLETAP_THRESHOLD=25,lastTapX=-1e3,lastTapY=-1e3,lastTapTime=-1e4;C33.yq.Touch.LBt=class TouchInfo extends C33.rh{constructor(){super(),this.kkt=0,this.qE=0,this.z5t=0,this.H4=0,this.Wkt=0,this.Vkt=0,this.Hkt=0,this.Yo=0,this.qo=0,this.Ukt=0,this.jkt=0,this.FC=0,this.$C=0,this.Xkt=0,this.Ykt=!1,this.qkt=!1}ah(){}fMt(t,e,i,s,r){this.kkt=s,this.qE=r,this.H4=t,this.Wkt=t,this.z5t=t,this.Vkt=e,this.Hkt=i,this.Yo=e,this.qo=i,this.Ukt=e,this.jkt=i}gV(t,e,i,s,r,h){this.Wkt=this.H4,this.H4=t,this.Ukt=this.Yo,this.jkt=this.qo,this.Yo=e,this.qo=i,this.FC=s,this.$C=r,this.Xkt=h,!this.qkt&&C33.Sh(this.Vkt,this.Hkt,this.Yo,this.qo)>=GESTURE_HOLD_THRESHOLD&&(this.qkt=!0)}lB(){return this.kkt}FBt(){return this.qE}UG(){return this.H4}YBt(t){this.Wkt=t}rg(){return this.Yo}ag(){return this.qo}t$(){var t=C33.Sh(this.Yo,this.qo,this.Ukt,this.jkt),e=(this.H4-this.Wkt)/1e3;return 0<e?t/e:0}yD(){return C33.Th(this.Ukt,this.jkt,this.Yo,this.qo)}eC(){return this.FC}cC(){return this.$C}Bkt(){return this.Xkt}qBt(t){return!this.Ykt&&t-this.z5t>=GESTURE_HOLD_TIMEOUT&&!this.qkt&&C33.Sh(this.Vkt,this.Hkt,this.Yo,this.qo)<GESTURE_HOLD_THRESHOLD&&(this.Ykt=!0)}kBt(t){return!this.Ykt&&t-this.z5t<=GESTURE_TAP_TIMEOUT&&!this.qkt&&C33.Sh(this.Vkt,this.Hkt,this.Yo,this.qo)<GESTURE_HOLD_THRESHOLD?t-lastTapTime<=2*GESTURE_TAP_TIMEOUT&&C33.Sh(lastTapX,lastTapY,this.Yo,this.qo)<GESTURE_DOUBLETAP_THRESHOLD?(lastTapX=-1e3,lastTapY=-1e3,lastTapTime=-1e4,"double-tap"):(lastTapX=this.Yo,lastTapY=this.qo,lastTapTime=t,"single-tap"):""}lkt(t,e,i){return void 0===e?t.n5(0).AX(this.Yo,this.qo)[i?0:1]:(t=t.r5(e))?t.FN(this.Yo,this.qo)[i?0:1]:0}}}{let C33=self.$e;C33.yq.Ci=class BrowserPlugin extends C33.bTt{constructor(t){super(t)}ah(){super.ah()}}}{let C33=self.$e;C33.yq.Ci.jIt=class BrowserType extends C33.d_t{constructor(t){super(t)}ah(){super.ah()}ZTt(){}}}{let C33=self.$e,DOM_COMPONENT_ID="browser";C33.yq.Ci.Instance=class BrowserInstance extends C33.S_t{constructor(t,e){super(t,DOM_COMPONENT_ID),this.zkt="",this.Kkt=!1,this.Jkt="",this.Zkt="",this.Qkt=!1,this.t8t=0,this.e8t=0,this.i8t=0,this.s8t=0,this.r8t=!1,this.h8t=new Map,this.n8t=!1,this.a8t="",this.o8t=!1,this.b_t([["online-state",t=>this.l8t(t)],["backbutton",()=>this.u8t()],["sw-message",t=>this.c8t(t)],["hashchange",t=>this.f8t(t)],["install-available",()=>this.d8t()],["app-installed",t=>this.C8t(t)]]);t=this.I5().x3();this.vf=new C33.Cf(C33.nf.df(t,"afterfirstlayoutstart",()=>this.p8t()),C33.nf.df(t,"window-resize",()=>this.BOt()),C33.nf.df(t,"suspend",()=>this.m8t()),C33.nf.df(t,"resume",()=>this.v8t())),this.Qc.m5(this.O_t("get-initial-state",{exportType:this.Qc.sW()}).then(t=>{this.zkt=t.location,this.Kkt=t.isOnline,this.Jkt=t.referrer,this.Zkt=t.title,this.Qkt=t.isCookieEnabled,this.t8t=t.screenWidth,this.e8t=t.screenHeight,this.i8t=t.windowOuterWidth,this.s8t=t.windowOuterHeight,this.r8t=t.isConstructArcade}))}ah(){super.ah()}p8t(){this.G_t("ready-for-sw-messages")}async l8t(t){t=!!t.isOnline;this.Kkt!==t&&(this.Kkt=t,this.Kkt?await this.DF(C33.yq.Ci.Tq.S8t):await this.DF(C33.yq.Ci.Tq.g8t))}async BOt(){await this.DF(C33.yq.Ci.Tq.T8t)}m8t(){this.LF(C33.yq.Ci.Tq._8t)}v8t(){this.LF(C33.yq.Ci.Tq.y8t)}async u8t(){await this.DF(C33.yq.Ci.Tq.E8t)}c8t(t){t=t.type;"downloading-update"===t?this.LF(C33.yq.Ci.Tq.I8t):"update-ready"===t||"update-pending"===t?this.LF(C33.yq.Ci.Tq.A8t):"offline-ready"===t&&this.LF(C33.yq.Ci.Tq.M8t)}f8t(t){this.zkt=t.location,this.LF(C33.yq.Ci.Tq.R8t)}d8t(){this.n8t=!0,this.LF(C33.yq.Ci.Tq.w8t)}C8t(t){this.n8t=!1,this.LF(C33.yq.Ci.Tq.b8t)}G8t(){return this.o8t}O8t(t){this.o8t!==(t=!!t)&&(this.o8t=t,this.G_t("set-warn-on-close",{enabled:t}))}W_t(){var t="plugins.browser.debugger";return[{title:"plugins.browser.name",properties:[{name:t+".user-agent",value:navigator.userAgent},{name:t+".is-online",value:this.Kkt},{name:t+".is-fullscreen",value:this.Qc.jB().TPt()}]}]}}}{let C33=self.$e;C33.yq.Ci.Tq={P8t(){return this.Kkt},S8t(){return!0},g8t(){return!0},T8t(){return!0},L8t(){return this.Qkt},x8t(){return this.Qc.jB().TPt()},E8t(){return!0},D8t(t){return(this.Qc.jB().YB()<=this.Qc.jB().zB()?0:1)===t},I8t(){return!0},A8t(){return!0},M8t(){return!0},R8t(){return!0},w8t(){return!0},N8t(){return this.n8t},F8t(t){switch(t){case 0:return"accepted"===this.a8t;case 1:return"dismissed"===this.a8t;case 2:return"error"===this.a8t;case 3:return!0;default:return!1}},b8t(){return!0},$8t(t){var e=this.Qc.jB().yPt();switch(t){case 0:return"browser"===e;case 1:return"minimal-ui"===e;case 2:return"standalone"===e;case 3:return"fullscreen"===e;default:return!1}},B8t(){return this.G8t()},k8t(){return!this.Qc.hL()},_8t(){return!0},y8t(){return!0},W8t(){return!1},V8t(){return!1},H8t(){return!1},U8t(){return!1},j8t(){return!1},X8t(){return!0},Y8t(){return!0}}}{let C3=self.$e,ORIENTATIONS=["portrait","landscape","portrait-primary","portrait-secondary","landscape-primary","landscape-secondary"];C3.yq.Ci.crt={q8t(t){this.G_t("alert",{message:t.toString()})},z8t(){this.r8t||(this.Qc.Qq()?self.C3Debugger.CloseWindow():this.G_t("close"))},K8t(){this.G_t("set-focus",{isFocus:!0})},J8t(){this.G_t("set-focus",{isFocus:!1})},Z8t(){this.r8t||this.G_t("navigate",{type:"back"})},Q8t(){this.r8t||this.G_t("navigate",{type:"forward"})},t9t(){},e9t(){this.r8t||(this.Qc.Qq()?this.Qc.zxt({type:"reload"}):this.G_t("navigate",{type:"reload"}))},i9t(t,e){this.P_t("navigate",{type:"url",url:t,target:e,exportType:this.Qc.sW()})},s9t(t,e){this.P_t("navigate",{type:"new-window",url:t,tag:e,exportType:this.Qc.sW()})},r9t(t,e){2<=t&&(t+=1),1===(t=6===t?2:t)&&(t=0);t=C3._4t.wPt(t);this.Qc.jB().IPt(t),this.P_t("request-fullscreen",{navUI:e})},h9t(){this.P_t("exit-fullscreen")},n9t(t){var i=t.split(",");for(let t=0,e=i.length;t<e;++t)i[t]=parseInt(i[t],10);this.P_t("vibrate",{pattern:i})},async KL(t,e){t&&e&&(t=await this.Qc.CP().G5(t),this.Qc.KL(t,e))},a9t(t,e,i){i&&(e=`data:${e},`+encodeURIComponent(t),this.Qc.KL(e,i))},o9t(t,e){e=e.toString(),0===t?console.log(e):1===t?console.warn(e):2===t&&console.error(e)},l9t(t){console.group(t)},u9t(){console.groupEnd()},c9t(jsStr){try{eval(jsStr)}catch(err){console.error("Error executing JavaScript: ",err)}},f9t(t){(t=Math.floor(t))<0||t>=ORIENTATIONS.length||(t=ORIENTATIONS[t],this.P_t("lock-orientation",{orientation:t}))},d9t(){this.P_t("unlock-orientation")},U5(t){this.Qc.CP().U5(t)},async C9t(t,e,i,s){await this.O_t("set-document-css-style",{prop:C3.xa(t),value:e,selector:i,"is-all":0!==s})},async p9t(t,e,i){t=await this.O_t("get-document-css-style",{prop:t,selector:e});t.isOk&&this.h8t.set(i.toLowerCase(),t.result.trim())},m9t(t){this.G_t("set-hash",{hash:t})},v9t(t,e){this.G_t("set-window-size",{windowWidth:t,windowHeight:e})},S9t(t,e){this.G_t("set-window-position",{windowX:t,windowY:e})},async g9t(){var t=await this.O_t("request-install");this.a8t=t.result,this.LF(C3.yq.Ci.Tq.F8t)},T9t(t){this.O8t(t)}}}{let C3=self.$e;C3.yq.Ci.frt={URL(){return this.Qc.AP()?this.zkt:location.toString()},_9t(){return(this.Qc.AP()?new URL(this.zkt):location).protocol},y9t(){return(this.Qc.AP()?new URL(this.zkt):location).hostname},E9t(){return(this.Qc.AP()?new URL(this.zkt):location).port},I9t(){return(this.Qc.AP()?new URL(this.zkt):location).pathname},A9t(){return(this.Qc.AP()?new URL(this.zkt):location).hash},ai(){return(this.Qc.AP()?new URL(this.zkt):location).search},M9t(t){var e=(this.Qc.AP()?new URL(this.zkt):location).search,t=RegExp("[?&]"+t+"=([^&]*)").exec(e);return t?decodeURIComponent(t[1].replace(/\+/g," ")):""},R9t(){return this.Jkt},w9t(){return this.Zkt},b9t(){return navigator.language},ci(){return navigator.platform},G9t(){return navigator.userAgent},O9t(jsStr){let result=0;try{result=eval(jsStr)}catch(err){console.error("Error executing JavaScript: ",err)}return"number"==typeof result||"string"==typeof result?result:"boolean"==typeof result&&result?1:0},CSSStyleValue(t){return this.h8t.get(t)||""},P9t(){return navigator.appName},L9t(){return navigator.appVersion},x9t(){return navigator.product},D9t(){return navigator.vendor},N9t(){return 1},F9t(){return 1/0},$9t(){var t=navigator.connection;return t&&(t.downlink||t.downlinkMax||t.bandwidth)||1/0},ConnectionType(){var t=navigator.connection;return t&&t.type||"unknown"},B9t(){return self.devicePixelRatio},k9t(){return this.t8t},W9t(){return this.e8t},V9t(){return this.Qc.jB().YB()},H9t(){return this.Qc.jB().zB()},U9t(){return this.i8t},j9t(){return this.i8t},X9t(){return this.Qc.jB().yPt()},Y9t(){return this.a8t}}}{let C33=self.$e;C33.yq.Text=class TextPlugin extends C33.bTt{constructor(t){super(t)}ah(){super.ah()}}}{let C33=self.$e;C33.yq.Text.jIt=class TextType extends C33.d_t{constructor(t){super(t)}ah(){super.ah()}ZTt(){}VY(t){}qY(){}}}{let C33=self.$e,C3X=self.qe,TEMP_COLOR_ARRAY=[0,0,0],TEXT=0,ENABLE_BBCODE=1,FONT=2,SIZE=3,LINE_HEIGHT=4,BOLD=5,ITALIC=6,COLOR=7,HORIZONTAL_ALIGNMENT=8,VERTICAL_ALIGNMENT=9,WRAPPING=10,TEXT_DIRECTION=11,ICON_SET=12,INITIALLY_VISIBLE=13,ORIGIN=14,READ_ALOUD=15,HORIZONTAL_ALIGNMENTS=["left","center","right"],VERTICAL_ALIGNMENTS=["top","center","bottom"],TEXT_DIRECTIONS=["ltr","rtl"],WORD_WRAP_MODES=["word","cjk","character"],tempRect=new C33.Rect,tempQuad=new C33.Xl,tempColor=new C33.Fa,tempVec2=C33.nh(C33.Xo),BBCODE_TAG_TO_HTML=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]),map=(C33.yq.Text.Instance=class TextInstance extends C33.X_t{constructor(t,e){super(t),this.t3="",this.q9t=!0,this.z9t="Arial",this.K9t=12,this.J9t=0,this.SA=!1,this.gA=!1,this.US=C33.nh(C33.Fa),this.AA=0,this.MA=0,this.bA="word",this.GA=0,this.Z9t="auto",this.Q9t=1,this.tWt=null,this.eWt="",this.iWt=!1,this.sWt=!1,this.rWt=null,this.hWt=-1,this.nWt=-1,this.aWt=0,this.oWt=C33.nh(C33.jp.dS,this.Qc.RS(),{timeout:5}),this.oWt.sM=()=>this.Qc.u5(),this.lWt=()=>this.uWt(),this.cWt=!1,e&&(this.t3=e[TEXT],this.q9t=!!e[ENABLE_BBCODE],this.z9t=e[FONT],this.K9t=e[SIZE],this.J9t=e[LINE_HEIGHT],this.SA=!!e[BOLD],this.gA=!!e[ITALIC],this.AA=e[HORIZONTAL_ALIGNMENT],this.MA=e[VERTICAL_ALIGNMENT],this.bA=WORD_WRAP_MODES[e[WRAPPING]],this.GA=e[TEXT_DIRECTION],this.fWt(this.Qc.Cq(e[ICON_SET])),t=e[COLOR],this.US.Ha(t[0],t[1],t[2]),this.s5().rN(e[INITIALLY_VISIBLE]),this.sWt=!!e[READ_ALOUD]),this.dWt(),this.CWt()}ah(){this.fWt(null),this.pWt(),this.rWt&&(this.rWt.ah(),this.rWt=null),this.oWt.ah(),this.oWt=null,super.ah()}dWt(){var t=this.oWt;t.s3(this.t3),t.aM(this.q9t),this.oWt.cA()&&this.tWt?this.oWt.Q1(this.I5().pNt(this.tWt)):this.oWt.Q1(null),t.oM("nearest"!==this.Qc.GP()),t.lM(this.z9t),t.dM(this.J9t),t.pM(this.SA),t.vM(this.gA),t.qS(this.US),t.IM(HORIZONTAL_ALIGNMENTS[this.AA]),t.MM(VERTICAL_ALIGNMENTS[this.MA]),t.wM(this.bA),t.GM(TEXT_DIRECTIONS[this.GA])}mWt(){var t=this.s5(),e=(this.oWt.uM(this.K9t),this.oWt.fM(t.Gwt()),t.r5());let i;"auto"===this.Z9t?i=e.Mj(t.C7()):"fixed"===this.Z9t&&(i=this.Q9t),t.E6()&&i!==this.oWt.xM()&&t.Lbt(!0),this.oWt.LM(t.eC(),t.cC(),i)}fWt(t){t&&(t.hU()||t.Ux().constructor!==C33.yq.qst)||t!==this.tWt&&(this.tWt&&this.tWt.x3().removeEventListener("animationframeimagechange",this.lWt),this.tWt=t,this.tWt&&this.tWt.x3().addEventListener("animationframeimagechange",this.lWt),this.dWt(),this.iWt=!1,this.Qc.u5())}uWt(){this.Qc.mNt(this.tWt),this.Qc.u5(),this.cWt=!0}CWt(){if(this.sWt){let t=this.t3;this.q9t&&(t=C33.Or.Y1(t)),this.rWt?this.rWt.s3(t):this.rWt=C33.nh(C33.Zc,this.Qc,t)}else this.rWt&&(this.rWt.ah(),this.rWt=null)}Yg(t){var e,i,s,r,h,n,a,o=this.s5(),l=(this.mWt(),this.cWt&&(this.cWt=!1,this.oWt.cA())&&this.tWt&&this.oWt.Q1(this.I5().pNt(this.tWt)),this.oWt.v_());l&&(e=o.r5(),0===o.yD()&&0===e.yD()&&0===o.C7()&&!o.E6()&&e.XU()?(i=o.S7(),[n,a]=e.jN(i.Jh(),i.Zh()),[i,s]=e.jN(i.sn(),i.rn()),r=n-Math.round(n),h=a-Math.round(a),[n,a]=(tempRect.set(n,a,i,s),tempRect.offset(-r,-h),tempQuad.du(tempRect),t.Lb(t.Zb())),this.Qc.jB().Q8(t,n,a),t.gb(l),t.Iv(tempQuad,this.oWt.uR()),e.e9(t)):(t.gb(l),o.E6()?this.vWt(o,t):this.SWt(o,t)))}SWt(t,e){let i=t.S7();this.Qc.PP()&&(i=this.gWt(i)),e.Iv(i,this.oWt.uR())}vWt(e,t){var i=e.Pbt();if(e.xbt()){e.cbt(tempRect,tempQuad,!1);let t=tempQuad;this.Qc.PP()&&(t=this.gWt(t)),i.Xg(e.I6(),t,this.oWt.uR()),e.Lbt(!1)}i.Yg(t)}gWt(t){var e=t.Jh()-Math.round(t.Jh()),i=t.Zh()-Math.round(t.Zh());return 0==e&&0==i?t:(tempQuad._(t),tempQuad.offset(-e,-i),tempQuad)}eyt(){var t=this.oWt.v_();return t?[t.eC(),t.cC()]:[100,100]}iyt(){return this.oWt.uR()}hyt(){return!1}Sg(){var t={t:this.t3,c:this.US.toJSON(),fn:this.z9t,ps:this.K9t};return this.q9t&&(t.bbc=this.q9t),0!==this.AA&&(t.ha=this.AA),0!==this.MA&&(t.va=this.MA),"word"!==this.bA&&(t.wr=this.bA),0!==this.J9t&&(t.lho=this.J9t),this.SA&&(t.b=this.SA),this.gA&&(t.i=this.gA),-1!==this.nWt&&(t.tw={st:this.hWt,en:this.nWt,l:this.aWt}),this.tWt&&(t.ioc=this.tWt.dU()),"fixed"===this.Z9t&&(t.fs=this.Q9t),t}gg(t){var e;this.pWt(),this.t3=t.t,this.US.Do(t.c),this.z9t=t.fn,this.K9t=t.ps,this.q9t=!!t.hasOwnProperty("bbc")&&t.bbc,this.AA=t.hasOwnProperty("ha")?t.ha:0,this.MA=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")?(e=t.wr,this.bA="boolean"==typeof e?e?"word":"character":e):this.bA="word",this.J9t=t.hasOwnProperty("lho")?t.lho:0,this.SA=!!t.hasOwnProperty("b")&&t.b,this.gA=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")&&(e=t.tw,this.hWt=e.st,this.nWt=e.en,this.aWt=e.l),t.hasOwnProperty("ioc")?(e=this.I5().Cq(t.ioc))&&this.fWt(e):this.fWt(null),t.hasOwnProperty("fs")?(this.Z9t="fixed",this.Q9t=t.fs):this.Z9t="auto",this.dWt(),this.CWt(),this.iWt=!1,-1!==this.nWt&&this.F_t()}Urt(t){switch(t){case TEXT:return this.PM();case ENABLE_BBCODE:return this.q9t;case FONT:return this.TWt();case SIZE:return this._Wt();case LINE_HEIGHT:return this.yWt();case BOLD:return this.EWt();case ITALIC:return this.IWt();case COLOR:return TEMP_COLOR_ARRAY[0]=this.US.Ja(),TEMP_COLOR_ARRAY[1]=this.US.Za(),TEMP_COLOR_ARRAY[2]=this.US.Qa(),TEMP_COLOR_ARRAY;case HORIZONTAL_ALIGNMENT:return this.AWt();case VERTICAL_ALIGNMENT:return this.MWt();case WRAPPING:return this.RWt();case READ_ALOUD:return this.wWt()}}Krt(t,e){switch(t){case TEXT:this.bWt(e);break;case ENABLE_BBCODE:this.q9t!==!!e&&(this.q9t=!!e,this.dWt());break;case FONT:this.GWt(e);break;case SIZE:this.OWt(e);break;case LINE_HEIGHT:this.PWt(e);break;case BOLD:this.LWt(e);break;case ITALIC:this.xWt(e);break;case COLOR:var i=this.US,s=e;i.Ja()===s[0]&&i.Za()===s[1]&&i.Qa()===s[2]||(this.US.Ha(s[0],s[1],s[2]),this.dWt());break;case HORIZONTAL_ALIGNMENT:this.DWt(e);break;case VERTICAL_ALIGNMENT:this.NWt(e);break;case WRAPPING:this.FWt(e)}}V_t(t,e,i,s){0===e&&0===i&&0===s||t===COLOR&&(this.US.Ua(e,i,s),this.dWt())}bWt(t){this.t3!==t&&(this.t3=t,this.oWt.s3(t),this.CWt(),this.iWt=!1,this.Qc.u5())}PM(){return this.t3}$Wt(t,e){this.mWt(),this.bWt(t),this.hWt=this.Qc.dL(),this.nWt=this.hWt+e/this.hB().dF(),this.aWt=this.oWt.$M(),this.oWt.gM(0),this.F_t()}pWt(){this.hWt=-1,this.nWt=-1,this.aWt=0,this.oWt.gM(-1),this.__t()}BWt(){-1!==this.nWt&&(this.pWt(),this.LF(C33.yq.Text.Tq.kWt),this.Qc.u5())}GWt(t){this.z9t!==t&&(this.z9t=t,this.oWt.lM(t),this.Qc.u5())}TWt(){return this.z9t}LWt(t){this.SA!==(t=!!t)&&(this.SA=t,this.oWt.pM(t),this.Qc.u5())}EWt(){return this.SA}xWt(t){this.gA!==(t=!!t)&&(this.gA=t,this.oWt.vM(t),this.Qc.u5())}IWt(){return this.gA}OWt(t){this.K9t!==t&&(this.K9t=t,this.Qc.u5())}_Wt(){return this.K9t}WWt(t){this.US.no(t)||(this.US.Ka(t),this.oWt.qS(this.US),this.Qc.u5())}VWt(){return this.US}PWt(t){this.J9t!==t&&(this.J9t=t,this.dWt(),this.Qc.u5())}yWt(){return this.J9t}DWt(t){this.AA!==t&&(this.AA=t,this.dWt(),this.Qc.u5())}AWt(){return this.AA}NWt(t){this.MA!==t&&(this.MA=t,this.dWt(),this.Qc.u5())}MWt(){return this.MA}HWt(t){this.FWt(WORD_WRAP_MODES[t])}FWt(t){this.bA!==t&&(this.bA=t,this.dWt(),this.Qc.u5())}RWt(){return this.bA}UWt(t){this.GA!==t&&(this.GA=t,this.dWt(),this.Qc.u5())}jWt(){return this.GA}XWt(t){this.sWt=!!t,this.CWt()}wWt(){return this.sWt}YWt(t){this.Z9t!==t&&(this.Z9t=t,this.Qc.u5())}qWt(){return this.Z9t}zWt(t){this.Q9t!==t&&(this.Q9t=t,"fixed"===this.Z9t)&&this.Qc.u5()}KWt(){return this.Q9t}JWt(){return this.mWt(),this.oWt.DM()}ZWt(){return this.mWt(),this.oWt.FM()}QWt(t,e){this.mWt();var i=this.s5(),t=(tempVec2.set(t-i.rg(),e-i.ag()),tempVec2.rotate(-i.yD()),tempVec2.offset(i.eC()*i.g$(),i.cC()*i._$()),tempVec2.It(i.eC(),i.cC()),tempVec2.scale(this.oWt.eC(),this.oWt.cC()),this.oWt.kM(tempVec2.Jo(),tempVec2.Qo()));if(t){e=t.ZC("tag");if(e)return e.W1}return""}tVt(t,e,i){e=this.QWt(e,i);return e&&C33.vr(t,e)}eVt(t,e){this.mWt(),e=Math.floor(e);var i,s,r,h,t=this.oWt.VM(t,e);return t?(e=this.s5(),i=this.oWt.yM(),s=t.YC(),r=t.zC()-(t.cC()-t.dC())*i,h=t.eC()*i/this.oWt.eC()*e.eC(),t=t.cC()*i/this.oWt.cC()*e.cC(),tempVec2.set(s,r),tempVec2.It(this.oWt.eC(),this.oWt.cC()),tempVec2.scale(e.eC(),e.cC()),tempVec2.offset(-e.eC()*e.g$(),-e.cC()*e._$()),tempVec2.rotate(e.yD()),tempVec2.offset(e.rg(),e.ag()),{x:tempVec2.Jo(),y:tempVec2.Qo(),width:h,height:t}):null}iVt(t){return this.mWt(),this.oWt.HM(t)}sVt(t){let e=BBCODE_TAG_TO_HTML.get(t);return null===e?"":`</${(e=e||"span")||"span"}>`}rVt(t,e){let i=BBCODE_TAG_TO_HTML.get(t);if(null===i)return"";switch(i=i||"span",t){case"color":return`<${i} style="color: ${e}">`;case"font":return`<${i} style="font-family: '${e}'">`;case"opacity":return`<${i} style="opacity: ${e}%">`;case"size":return`<${i} style="font-size: ${e}pt">`;case"background":return`<${i} style="background-color: ${e}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${e}">`;case"tag":return`<${i} data-tag="${e}">`;default:return`<${i}>`}}async hVt(){if(!this.iWt){var t=new C33.Or(this.t3,{A1:!0}).F1();let h=new Map,e='<span class="c3-text"';var i=[],n=(i.push(`font-family: '${this.TWt()}';`),this.EWt()&&i.push("font-weight: bold;"),this.IWt()&&i.push("font-style: italic;"),"character"===this.RWt()&&i.push("word-break: break-all;"),e+=` style="${i.join(" ")}">`,this.tWt?this.I5().pNt(this.tWt):null);if(this.tWt){var s,a=C33.nh(C33.l0),o=[];let r=new Map;for(s of t)if(s.lC()){var l=s.rp(n);if(l){let e=l.Wp().m$().wEt();if(r.has(e))continue;r.set(e,null),o.push(a.sc(async()=>{var t=await e.QW();r.set(e,t)}))}}await Promise.all(o);var u,c,f=[];for(u of t)if(u.lC()){let s=u.rp(n);if(s){let e=s.Wp(),i=e.m$().wEt();f.push(a.sc(async()=>{var t=await e.m$().GEt(r.get(i));h.set(s,t)}))}}await Promise.all(f);for(c of r.values())c instanceof ImageBitmap&&c.close&&c.close()}var r,d=new Map;for(r of t){var C,p,m,v=r.tp(),S=[...d.keys()];S.reverse();for(C of S)v.has(C)&&v.get(C)===d.get(C)||(d.delete(C),e+=this.sVt(C));for([p,m]of v)d.has(p)||(d.set(p,m),e+=this.rVt(p,m));if(r.aC()&&(e+=C33.Ud(C33.Vd(r.AC().join("")),"\n","<br>")),r.lC()&&n){S=r.rp(n);if(S){var g=h.get(S);if(g){var T=[];let t="0.2em";var _=v.get("iconoffsety");_&&(_=_.trim(),t=_.endsWith("%")?parseFloat(_)/100+"em":_+"px"),T.push("top: "+t),"nearest"===this.Qc.GP()&&T.push("image-rendering: pixelated"),e+=`<img class="c3-text-icon" data-icon="${r.sp()}" width="${S.eC()}" height="${S.cC()}" style="${T.join(";")}" src="${g}">`}}}}var y,i=[...d.keys()];i.reverse();for(y of i)e+=this.sVt(y);e+="</span>",this.eWt=e,this.iWt=!0}return this.eWt}zK(){var t=this.Qc.dL();t>=this.nWt?(this.pWt(),this.LF(C33.yq.Text.Tq.kWt),this.Qc.u5()):(t=C33.bh(this.hWt,this.nWt,t,0,this.aWt),(t=Math.floor(t))!==this.oWt.TM()&&(this.oWt.gM(t),this.Qc.u5()))}W_t(){var t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.PM(),nVt:t=>this.bWt(t)},{name:t+".properties.font.name",value:this.TWt(),nVt:t=>this.GWt(t)},{name:t+".properties.size.name",value:this._Wt(),nVt:t=>this.OWt(t)},{name:t+".properties.line-height.name",value:this.yWt(),nVt:t=>this.PWt(t)},{name:t+".properties.bold.name",value:this.EWt(),nVt:t=>this.LWt(t)},{name:t+".properties.italic.name",value:this.IWt(),nVt:t=>this.xWt(t)}]}]}QTt(){return self.aVt}},new WeakMap),SCRIPT_HORIZONTAL_ALIGNMENTS=new Map([["left",0],["center",1],["right",2]]),SCRIPT_VERTICAL_ALIGNMENTS=new Map([["top",0],["center",1],["bottom",2]]),SCRIPT_TEXT_DIRECTIONS=["ltr","rtl"],VALID_RESOLUTION_MODES=new Set(["auto","fixed"]);self.aVt=class ITextInstance extends self.M6{constructor(){super(),map.set(this,self.qN.QN().O6())}get text(){return map.get(this).PM()}set text(t){C3X.As(t);var e=map.get(this);e.pWt(),e.bWt(t)}oVt(t,e){C3X.As(t),C3X._s(e);var i=map.get(this);i.pWt(),i.$Wt(t,e)}lVt(){map.get(this).BWt()}set r9(t){C3X.As(t),map.get(this).GWt(t)}get r9(){return map.get(this).TWt()}set n9(t){map.get(this).LWt(t)}get n9(){return map.get(this).EWt()}set a9(t){map.get(this).xWt(t)}get a9(){return map.get(this).IWt()}set h9(t){C3X._s(t),map.get(this).OWt(t)}get h9(){return map.get(this)._Wt()}set uVt(t){if(C3X.ks(t),t.length<3)throw new Error("expected 3 elements");tempColor.Ha(t[0],t[1],t[2]),map.get(this).WWt(tempColor)}get uVt(){var t=map.get(this).VWt();return[t.Ja(),t.Za(),t.Qa()]}set lineHeight(t){C3X._s(t),map.get(this).PWt(t)}get lineHeight(){return map.get(this).yWt()}set u9(t){C3X.As(t);t=SCRIPT_HORIZONTAL_ALIGNMENTS.get(t);if(void 0===t)throw new Error("invalid mode");map.get(this).DWt(t)}get u9(){return HORIZONTAL_ALIGNMENTS[map.get(this).AWt()]}set verticalAlign(t){C3X.As(t);t=SCRIPT_VERTICAL_ALIGNMENTS.get(t);if(void 0===t)throw new Error("invalid mode");map.get(this).NWt(t)}get verticalAlign(){return VERTICAL_ALIGNMENTS[map.get(this).MWt()]}set c9(t){if(!WORD_WRAP_MODES.includes(t))throw new Error("invalid mode");map.get(this).FWt(t)}get c9(){return map.get(this).RWt()}set f9(t){C3X.As(t);t=SCRIPT_TEXT_DIRECTIONS.indexOf(t);if(-1===t)throw new Error("invalid text direction");map.get(this).UWt(t)}get f9(){return SCRIPT_TEXT_DIRECTIONS[map.get(this).jWt()]}set cVt(t){map.get(this).XWt(!!t)}get cVt(){return map.get(this).wWt()}fVt(t){C3X._s(t);var e=map.get(this);e.YWt("fixed"),e.zWt(t)}dVt(){map.get(this).YWt("auto")}get p9(){return map.get(this).JWt()}get m9(){return map.get(this).ZWt()}CVt(){var t=map.get(this);return[t.JWt(),t.ZWt()]}pVt(t,e,i){return C3X.As(t),C3X._s(e),C3X._s(i),map.get(this).tVt(t,e,i)}mVt(t,e){return C3X._s(t),C3X._s(e),map.get(this).QWt(t,e)}vVt(t,e=0){return C3X.As(t),C3X._s(e),map.get(this).eVt(t,e)}SVt(t){return C3X.As(t),map.get(this).iVt(t)}gVt(t){var e=map.get(this),t=e.I5().hx(t);e.fWt(t)}TVt(){return map.get(this).hVt()}}}{let C33=self.$e;C33.yq.Text.Tq={_Vt(t,e){return e?this.t3===t:C33.vr(this.t3,t)},yVt(){return-1!==this.nWt},kWt(){return!0},EVt(t,e,i){return this.tVt(t,e,i)}}}{let C33=self.$e,tempColor=C33.nh(C33.Fa);C33.yq.Text.crt={s3(t){this.pWt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.bWt(t.toString())},IVt(t){this.pWt(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.bWt(this.t3+t)},AVt(t,e){this.pWt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.$Wt(t.toString(),e)},MVt(t,e){let i=!1,s=!1;switch(e){case 1:i=!0;break;case 2:s=!0;break;case 3:i=!0,s=!0}t===this.z9t&&i===this.SA&&s===this.gA||(this.GWt(t),this.LWt(i),this.xWt(s))},uM(t){this.OWt(t)},RVt(t){tempColor.po(t),tempColor.dh(),this.WWt(tempColor)},wVt(t,e){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},bVt(t){this.s5().YS(t),this.Qc.u5()},GVt(){this.BWt()},dM(t){this.PWt(t)},OVt(t){this.DWt(t)},PVt(t){this.NWt(t)},LVt(t){this.HWt(t)},GM(t){this.UWt(t)},xVt(t){this.fWt(t)},DVt(){return this.hVt()},NVt(t){this.XWt(t)},FVt(t,e){this.YWt(["auto","fixed"][t]),this.zWt(e)}}}{let C33=self.$e;C33.yq.Text.frt={Text(){return this.t3},$Vt(){return this.q9t?C33.Or.Y1(this.t3):this.t3},BVt(){return this.z9t},kVt(){return this.K9t},WVt(){return this.JWt()},VVt(){return this.ZWt()},HVt(){return this.J9t},UVt(t,e){return this.QWt(t,e)},jVt(t){return this.iVt(t)},XVt(t,e){t=this.eVt(t,e);return t?t.x:0},YVt(t,e){t=this.eVt(t,e);return t?t.y:0},qVt(t,e){t=this.eVt(t,e);return t?t.width:0},zVt(t,e){t=this.eVt(t,e);return t?t.height:0},KVt(){return this.eWt}}}{let C33=self.$e;C33.yq.qst=class SpritePlugin extends C33.bTt{constructor(t){super(t)}ah(){super.ah()}}}{let C33=self.$e,C3X=self.qe,spawnPickStack=[],map=(C33.yq.qst.jIt=class SpriteType extends C33.d_t{constructor(t){super(t),this.$It=t.EAt()}ah(){C33.xn(this.$It),super.ah()}ZTt(){for(var t of this.$It)t.BEt(this.Qc)}VY(e){let i={rT:this.Qc.GP()};return Promise.all(this.$It.map(t=>t.kEt(e,i)))}qY(){for(var t of this.$It)t.WEt()}jY(){this.JVt()}JVt(){for(var t of this.uct.tD())t.O6().ZVt()}uvt(t){C33.yq.qst.kgt(this,t)}zvt(t){spawnPickStack.push({v_t:null,QVt:!1,instances:[]})}tHt(t,e,i){var s=spawnPickStack.at(-1);s.v_t=t,s.QVt=i,s.instances.push(e)}Kvt(t){var e=spawnPickStack.pop(),i=e.v_t,s=e.QVt;if(i){var r,h,n,a=new Map;for(r of e.instances)r.LMt(a,i,s);for([h,n]of a)h.iD().xct(n)}}eHt(t){var t=this.KN().wAt(t),e=this.I5();return t.VEt(0).m$().j8(e.RS(),{rT:e.GP()}).then(()=>this.JVt()),t}iHt(t){for(var e of this.uct.tD())e.O6().sHt(t);this.KN().bAt(t)}rHt(t,e){var i=this.uct.MAt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let s=i.XEt(e);s<0&&(s+=i.o$()+1);var r,t=C33.NEt.$Et(this.I5()),e=(i.HEt(t,s),this.I5());t.m$().j8(e.RS(),{rT:e.GP()}).then(()=>this.JVt());for(r of this.uct.tD())r.O6().hHt();return t}nHt(t,e){var i,s=this.uct.MAt(t);if(!s)throw new Error(`cannot find animation name '${t}'`);if(1===s.o$())throw new Error(`cannot remove last frame from animation '${t}'`);let r=s.XEt(e);r<0&&(r+=s.o$()),s.UEt(r);for(i of this.uct.tD())i.O6().hHt()}QTt(){return self.aHt}},new WeakMap);self.aHt=class ISpriteObjectType extends self.Vx{constructor(t){super(t),map.set(this,t.qvt())}oHt(t){C3X.As(t);t=map.get(this).KN().MAt(t);return t?t.YEt():null}lHt(){return map.get(this).KN().AAt().map(t=>t.YEt())}uHt(t){return C3X.As(t),map.get(this).eHt(t).YEt()}cHt(t){C3X.As(t),map.get(this).iHt(t)}fHt(t,e){if(C3X.As(t),"number"!=typeof e&&"string"!=typeof e)throw new TypeError("invalid insert location");return map.get(this).rHt(t,e).c$()}dHt(t,e){if(C3X.As(t),"number"!=typeof e&&"string"!=typeof e)throw new TypeError("invalid insert location");map.get(this).nHt(t,e)}}}{let C33=self.$e,C3X=self.qe,INITIALLY_VISIBLE=0,INITIAL_ANIMATION=1,INITIAL_FRAME=2,ENABLE_COLLISIONS=3,tempRect=C33.nh(C33.Rect),tempQuad=C33.nh(C33.Xl),tempVec2=C33.nh(C33.Xo),FLAG_PLAYING_FORWARDS=1,FLAG_ANIMATION_PLAYING=2,FLAG_ANIMATION_TRIGGER=4,map=(C33.yq.qst.Instance=class SpriteInstance extends C33.X_t{constructor(t,e){super(t);let i=!0,s="",r=0,h=!0;e&&(i=!!e[INITIALLY_VISIBLE],s=e[INITIAL_ANIMATION],r=e[INITIAL_FRAME],h=e[ENABLE_COLLISIONS]),this.CHt=this.uct.MAt(s)||this.uct.EAt()[0],this.pHt=C33.dh(r,0,this.CHt.o$()-1),this.mHt=this.CHt.VEt(this.pHt);e=this.mHt.m$(),this.vHt=e.v_(),this.SHt=e.uR(),this.gHt=e.ryt(),this.K_t(),t.OMt(FLAG_ANIMATION_PLAYING,!0),t.OMt(FLAG_PLAYING_FORWARDS,0<=this.CHt.t$()),this.THt=Math.abs(this.CHt.t$()),this._Ht=this.CHt.h$(),this.yHt=C33.nh(C33.Tf),this.EHt=0,this.IHt=0,this.AHt="",this.MHt=-1,this.RHt="",this.wHt=0,e=this.s5();this.bHt=e.S7(),e.rN(i),e.x7(h),e.Eht(this.mHt.g$()),e.Aht(this.mHt._$()),e._bt(this.mHt.O$()),e.o7(),1===this.uct.IAt()&&1===this.uct.EAt()[0].o$()||0===this.THt||this.F_t()}ah(){this.CHt=null,this.mHt=null,this.vHt=null,this.yHt=null,super.ah()}tyt(){return this.mHt.m$()}Det(){return!0}zW(){this.vHt=null}Q_t(){this.ZVt()}Yg(t){var e=this.vHt;null!==e&&(t.gb(e),(e=this.s5()).E6()?this.vWt(e,t):this.SWt(e,t))}SWt(t,e){let i=this.bHt;this.Qc.PP()&&(i=t.Cbt(i)),e.bb(i,this.gHt)}vWt(e,t){var i=e.Pbt();if(e.xbt()){e.cbt(tempRect,tempQuad,!1);let t=tempQuad;this.Qc.PP()&&(t=e.Cbt(t)),i.Xg(e.I6(),t,this.gHt),e.Lbt(!1)}i.Yg(t)}GHt(){return this.yHt.ri()}OHt(){return this.Mi.PMt(FLAG_ANIMATION_PLAYING)}PHt(t){this.Mi.OMt(FLAG_ANIMATION_PLAYING,t)}LHt(){return this.Mi.PMt(FLAG_PLAYING_FORWARDS)}xHt(t){this.Mi.OMt(FLAG_PLAYING_FORWARDS,t)}DHt(){return this.Mi.PMt(FLAG_ANIMATION_TRIGGER)}NHt(t){this.Mi.OMt(FLAG_ANIMATION_TRIGGER,t)}zK(){this.RHt&&this.FHt(),0<=this.MHt&&this.$Ht();var t,e,i,s,r,h,n,a,o,l=this.THt;this.OHt()&&0!==l?(t=this.Qc.aL(this.Mi),this.yHt.sc(t),t=this.GHt(),o=(e=this.mHt).v$()/l,t<this.EHt+o||(i=this.CHt,s=this._Ht,r=i.o$(),h=i.s$(),n=i.i$(),a=i.a$(),this.LHt()?this.pHt++:this.pHt--,this.EHt+=o,this.pHt>=r&&(a?(this.xHt(!1),this.pHt=r-2):!n&&(this.IHt++,this.IHt>=h)?this.BHt(!1):this.pHt=s),this.pHt<0&&(a?(this.pHt=1,this.xHt(!0),n||(this.IHt++,this.IHt>=h&&this.BHt(!0))):!n&&(this.IHt++,this.IHt>=h)?this.BHt(!0):this.pHt=s),this.pHt=C33.dh(this.pHt,0,r-1),o=i.VEt(this.pHt),t>this.EHt+o.v$()/l&&(this.EHt=t),this.kHt(e,o))):this.__t()}BHt(t){this.pHt=t?0:this.CHt.o$()-1,this.PHt(!1),this.AHt=this.CHt.jc(),this.NHt(!0),this.m_t("animationend",!1,{animationName:this.AHt}),this.LF(C33.yq.qst.Tq.WHt),this.LF(C33.yq.qst.Tq.VHt),this.NHt(!1),this.IHt=0}kHt(i,s,t){if(i!==s){var e=this.s5(),r=i.m$(),h=s.m$(),n=r.eC(),r=r.cC(),a=h.eC(),o=h.cC(),l=(t&&t.onFrameChange?t.onFrameChange(e,n,r,a,o):(n!==a&&e.oC(e.eC()*(a/n)),r!==o&&e.iC(e.cC()*(o/r))),e.Eht(s.g$()),e.Aht(s._$()),e._bt(s.O$()),e.o7(),this.mHt=s,this.vHt=h.v_(),this.SHt=h.uR(),this.gHt=h.ryt(),this.hB().Vst());for(let t=0,e=l.length;t<e;++t)l[t].jyt(i,s);this.m_t("framechange",!1,{animationName:this.CHt.jc(),HHt:this.pHt}),this.LF(C33.yq.qst.Tq.UHt),this.Qc.u5()}}jHt(t){this.PHt(!0),this.EHt=this.GHt(),1===t&&0!==this.pHt&&(this.MHt=0,this.DHt()||this.$Ht()),this.F_t()}XHt(t,e,i){this.RHt=t,this.wHt=e,this.F_t(),!i&&this.DHt()||this.FHt()}YHt(){return this.CHt}qHt(){return this.RHt||this.CHt.jc()}sHt(t){C33.vr(t,this.qHt())&&this.XHt(this.uct.GAt().jc(),1,!0)}zHt(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{var e=this.uct.MAt(this.qHt());if(!e)return;if(-1===(t=e.jEt(t)))return}isFinite(t)&&(this.MHt=t,this.DHt()||this.$Ht())}hHt(){var t,e;this.RHt||-1!==this.MHt||((t=this.mHt)!==(e=this.CHt.VEt(C33.dh(this.pHt,0,this.CHt.o$()-1)))&&this.kHt(t,e),1<this.CHt.o$()&&0<this.THt&&this.F_t())}KHt(){return this.pHt}JHt(){return this.mHt.D$()}ZHt(t){this.THt=Math.abs(t),this.xHt(0<=t),0<this.THt&&this.F_t()}QHt(){return this.LHt()?this.THt:-this.THt}tUt(t){"string"==typeof t&&-1===(t=this.CHt.jEt(t))||(t=C33.dh(Math.floor(t),0,this.CHt.o$()-1),this._Ht=t)}eUt(){return this._Ht}FHt(t){var e=this.mHt,i=this.uct.MAt(this.RHt);this.RHt="",!i||i===this.CHt&&this.OHt()||(this.CHt=i,this.xHt(0<=i.t$()),this.THt=Math.abs(i.t$()),this._Ht=i.h$(),this.pHt=C33.dh(this.pHt,0,this.CHt.o$()-1),1===this.wHt&&(this.pHt=0),this.PHt(!0),this.EHt=this.GHt(),i=this.CHt.VEt(this.pHt),this.kHt(e,i,t))}$Ht(t){var e=this.mHt,i=this.pHt;this.pHt=C33.dh(Math.floor(this.MHt),0,this.CHt.o$()-1),this.MHt=-1,!t&&i===this.pHt||(t=this.CHt.VEt(this.pHt),this.kHt(e,t),this.EHt=this.GHt())}ZVt(){var t=this.mHt.m$();this.vHt=t.v_(),this.SHt=t.uR(),this.gHt=t.ryt(),this.s5().Lbt(!0)}v_(){return this.vHt}uR(){return this.SHt}ryt(){return this.gHt}I$(){return this.mHt.I$()}Zvt(t){var e,i,s=this.mHt,r=this.s5();let h=null;if("string"==typeof t)h=s.b$(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");h=s.w$(t-1)}let n=r.C7();return h?(tempVec2._(h.rIt()),r.E6()&&([t,e,i]=r.I6().Qg(tempVec2.Jo(),tempVec2.Qo()),tempVec2.set(t,e),n+=i),tempVec2.offset(-s.g$(),-s._$()),tempVec2.scale(r.eC(),r.cC()),tempVec2.rotate(r.yD()),tempVec2.offset(r.rg(),r.ag()),[tempVec2.Jo(),tempVec2.Qo(),n]):[r.rg(),r.ag(),n]}iUt(){return this.s5().Mbt().Pu()}sUt(t){t=Math.floor(t);var e=this.s5(),i=e.Mbt(),s=i.Pu();return(t=t===s?0:t)<0||s<=t?[0,0]:[(s=i.Ou())[2*t+0]+e.rg(),s[2*t+1]+e.ag()]}W_t(){let e=C33.yq.qst.crt;var t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.CHt.jc(),nVt:t=>this.H_t(e.rUt,t,0)},{name:t+".current-frame",value:this.pHt,nVt:t=>this.H_t(e.hUt,t)},{name:t+".is-playing",value:this.OHt(),nVt:t=>t?this.H_t(e.nUt,0):this.H_t(e.aUt)},{name:t+".speed",value:this.THt,nVt:t=>this.H_t(e.oUt,t)},{name:t+".repeats",value:this.IHt,nVt:t=>this.IHt=t}]}]}Sg(){var t={a:this.CHt.dU()},e=(0!==this.EHt&&(t.fs=this.EHt),this.GHt()),e=(0!==e&&(t.at=e),0!==this.pHt&&(t.f=this.pHt),0!==this.THt&&(t.cas=this.THt),1!==this.IHt&&(t.ar=this.IHt),0!==this._Ht&&(t.rt=this._Ht),this.OHt()||(t.ap=this.OHt()),this.LHt()||(t.af=this.LHt()),this.s5());return e.L7()&&(t.ce=e.L7()),t}gg(t){var e=this.KN().RAt(t.a),e=(e&&(this.CHt=e),this.EHt=t.hasOwnProperty("fs")?t.fs:0,this.yHt.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),e=(this.pHt=C33.dh(e,0,this.CHt.o$()-1),this.THt=t.hasOwnProperty("cas")?t.cas:0,this.IHt=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),e=(this._Ht=C33.dh(e,0,this.CHt.o$()-1),this.PHt(!t.hasOwnProperty("ap")||!!t.ap),this.xHt(!t.hasOwnProperty("af")||!!t.af),this.CHt.VEt(this.pHt)),i=(this.mHt=e,this.ZVt(),this.s5());i.Eht(e.g$()),i.Aht(e._$()),i._bt(e.O$()),i.x7(!!t.ce),this.OHt()&&this.F_t()}Urt(t){var e=this.s5();switch(t){case ENABLE_COLLISIONS:return e.L7();case INITIAL_FRAME:return C33.dh(this.pHt,0,this.CHt.o$()-1);case INITIAL_ANIMATION:return this.CHt.jc()}}Krt(t,e,i){var s=this.s5();switch(t){case ENABLE_COLLISIONS:s.x7(!!e);break;case INITIAL_FRAME:this.PHt(!1);var r=this.CHt.o$()-1,h=e=C33.dh(e,0,r),n=this.CHt.VEt(this.pHt),a=this.CHt.VEt(h);this.kHt(n,a,i),this.pHt=C33.dh(h,0,r);break;case INITIAL_ANIMATION:this.RHt=e,this.FHt(i),1<this.CHt.o$()&&0<this.CHt.t$()?this.F_t():this.__t()}}QTt(){return self.lUt}},new WeakMap),ANIM_FROM_MODES=new Map([["current-frame",0],["beginning",1]]);self.lUt=class ISpriteInstance extends self.M6{constructor(){super(),map.set(this,self.qN.QN().O6())}E$(){return map.get(this).I$()}A$(t){return this.M$(t)[0]}R$(t){return this.M$(t)[1]}uUt(t){return this.M$(t)[2]}M$(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return map.get(this).Zvt(t)}G$(){return map.get(this).iUt()}P$(t){return C3X._s(t),map.get(this).sUt(t)[0]}x$(t){return C3X._s(t),map.get(this).sUt(t)[1]}L$(t){return C3X._s(t),map.get(this).sUt(t)}cUt(){map.get(this).PHt(!1)}fUt(t="current-frame"){C3X.As(t);t=ANIM_FROM_MODES.get(t);if(void 0===t)throw new Error("invalid mode");map.get(this).jHt(t)}dUt(t,e="beginning"){C3X.As(t),C3X.As(e);e=ANIM_FROM_MODES.get(e);if(void 0===e)throw new Error("invalid mode");var i=map.get(this);if(!i.KN().MAt(t))throw new Error(`animation name "${t}" does not exist`);i.XHt(t,e)}oHt(t){C3X.As(t);t=map.get(this).KN().MAt(t);return t?t.YEt():null}get animation(){return map.get(this).YHt().YEt()}get animationName(){return map.get(this).qHt()}set HHt(t){C3X._s(t),map.get(this).zHt(t)}get HHt(){return map.get(this).KHt()}set CUt(t){C3X.As(t),map.get(this).zHt(t)}get CUt(){return map.get(this).JHt()}set pUt(t){C3X._s(t),map.get(this).ZHt(t)}get pUt(){return map.get(this).QHt()}set mUt(t){C3X._s(t),map.get(this).tUt(t)}get mUt(){return map.get(this).eUt()}get imageWidth(){return map.get(this).tyt().eC()}get imageHeight(){return map.get(this).tyt().cC()}vUt(){var t=map.get(this).tyt();return[t.eC(),t.cC()]}async SUt(t){C3X.tr(t,Blob);var e=map.get(this),i=e.I5(),s=e.tyt(),r=C33.nh(C33.oEt);r.yEt(i,t),await r.j8(i.RS(),{rT:i.GP()}),e.oh()?r.ah():(s.EEt(r),(t=e.qvt()).JVt(),t.KN().x3().dispatchEvent(new C33.Event("animationframeimagechange")),i.u5())}gUt(t,e){C3X.As(e),map.get(this).s5().lbt(!!t,e)}}}{let C33=self.$e;C33.yq.qst.Tq={TUt(t){return C33.vr(this.qHt(),t)},_Ut(t,e){return C33.compare(this.pHt,t,e)},yUt(t,e){var i;return"string"==typeof e&&(i=this.mHt.D$(),C33.compare(i.toLowerCase(),t,e.toLowerCase()))},EUt(t,e){return C33.compare(this.QHt(),t,e)},VHt(t){return C33.vr(this.AHt,t)},WHt(){return!0},UHt(){return!0},IUt(){return this.s5().eC()<0},AUt(){return this.s5().cC()<0},MUt(){return!0},RUt(){return!0},L7(){return this.s5().L7()}}}{let C33=self.$e;C33.yq.qst.crt={wUt(t,e,i,s,r){var h;t&&e&&([i,h]=this.Zvt(i),i=this.Qc.nD(t,e,i,h,s,r))&&(s&&e.aD(i),t.Ux().Ax()&&((h=i.s5())._D(this.s5().yD()),h.o7()),(r=this.Qc.BP()).oD(!0),i.lD(),r.oD(!1),t!==this.Qc.Lft().KN())&&this.T_t.tHt(t,i,s)},aUt(){this.PHt(!1)},nUt(t){this.jHt(t)},rUt(t,e){this.XHt(t,e)},hUt(t){this.zHt(t)},oUt(t){this.ZHt(t)},bUt(t){this.tUt(t)},GUt(e,t){try{0===e?this.qvt().eHt(t):this.qvt().iHt(t)}catch(t){console.error(`[Construct] Error ${0===e?"adding":"removing"} animation: `,t)}},OUt(e,t,i){try{0===e?this.qvt().rHt(t,i):this.qvt().nHt(t,i)}catch(t){console.error(`[Construct] Error ${0===e?"adding":"removing"} animation frame: `,t)}},PUt(t){var e=this.s5(),i=e.eC(),t=Math.abs(i)*(0===t?-1:1);i!==t&&(e.oC(t),e.o7())},LUt(t){var e=this.s5(),i=e.cC(),t=Math.abs(i)*(0===t?-1:1);i!==t&&(e.iC(t),e.o7())},gD(t){var e=this.mHt.m$(),i=this.s5(),s=i.eC()<0?-1:1,r=i.cC()<0?-1:1,s=e.eC()*t*s,e=e.cC()*t*r;i.eC()===s&&i.cC()===e||(i.LM(s,e),i.o7())},async xUt(t,e,i){var s=this.mHt.m$(),r=this.s5(),h=this.Qc,n=this.T_t;if(s.pW()===t)0===e&&(r.LM(s.eC(),s.cC()),r.o7()),this.LF(C33.yq.qst.Tq.MUt);else{var a=C33.nh(C33.oEt);try{if(await a._Et(h,t),!a.HW())throw new Error("image failed to load");if(this.oh())return void a.ah();await a.j8(h.RS(),{rT:h.GP()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.oh()||this.LF(C33.yq.qst.Tq.RUt))}this.oh()?a.ah():(s.EEt(a),n.JVt(),n.KN().x3().dispatchEvent(new C33.Event("animationframeimagechange")),h.u5(),0===e&&(r.LM(s.eC(),s.cC()),r.o7()),await this.DF(C33.yq.qst.Tq.MUt))}},DUt(t){this.s5().x7(t)},lbt(t,e){this.s5().lbt(0===t,e)},bVt(t){this.s5().YS(t),this.Qc.u5()}}}{let C33=self.$e;C33.yq.qst.frt={NUt(){return this.KHt()},FUt(){return this.JHt()},$Ut(){return this.CHt.o$()},BUt(){return this.CHt.jc()},kUt(){return this.QHt()},WUt(){return this.CHt.t$()},VUt(t){return this.Zvt(t)[0]},HUt(t){return this.Zvt(t)[1]},UUt(t){return this.Zvt(t)[2]},jUt(){return this.I$()},XUt(){return this.tyt().eC()},YUt(){return this.tyt().cC()},qUt(t){return this.sUt(t)[0]},zUt(t){return this.sUt(t)[1]},KUt(){return this.iUt()}}}{let C33=self.$e;C33.yq.Keyboard=class KeyboardPlugin extends C33.bTt{constructor(t){super(t)}ah(){super.ah()}}}{let GetKeyboardSdkInstance2=function(){return keyboardObjectType.Wx().O6()},C33=(GetKeyboardSdkInstance=GetKeyboardSdkInstance2,self.$e),C3X=self.qe,keyboardObjectType=(C33.yq.Keyboard.jIt=class KeyboardType extends C33.d_t{constructor(t){super(t)}ah(){super.ah()}ZTt(){}QTt(){return self.JUt}},null);self.JUt=class IKeyboardObjectType extends self.Vx{constructor(t){super(t),(keyboardObjectType=t).I5().UL().keyboard=this}ZUt(t){var e=GetKeyboardSdkInstance2();if("string"==typeof t)return e.QUt(t);if("number"==typeof t)return e.tjt(t);throw new TypeError("expected string or number")}}}{let C33=self.$e;C33.yq.Keyboard.Instance=class KeyboardInstance extends C33.S_t{constructor(t,e){super(t),this.ejt=new Set,this.ijt=new Set,this.sjt=0,this.rjt="",this.hjt="";t=this.I5().x3();this.vf=new C33.Cf(C33.nf.df(t,"keydown",t=>this.njt(t.data)),C33.nf.df(t,"keyup",t=>this.ajt(t.data)),C33.nf.df(t,"window-blur",()=>this.ojt()),C33.nf.df(t,"keyboard-blur",()=>this.ojt()))}ah(){super.ah()}njt(t){var e=t.which,i=t.code||e.toString(),t=t.key;this.ejt.has(i)||(this.ejt.add(i),this.ijt.add(e),this.rjt=i,this.sjt=e,this.hjt=t,this.LF(C33.yq.Keyboard.Tq.ljt),this.LF(C33.yq.Keyboard.Tq.ujt),this.LF(C33.yq.Keyboard.Tq.cjt),this.LF(C33.yq.Keyboard.Tq.fjt))}ajt(t){var e=t.which,i=t.code||e.toString(),t=t.key;this.ejt.delete(i),this.ijt.delete(e),this.rjt=i,this.sjt=e,this.hjt=t,this.LF(C33.yq.Keyboard.Tq.djt),this.LF(C33.yq.Keyboard.Tq.Cjt),this.LF(C33.yq.Keyboard.Tq.pjt),this.LF(C33.yq.Keyboard.Tq.mjt)}ojt(){for(var t of this.ijt)this.ijt.delete(t),this.sjt=t,this.LF(C33.yq.Keyboard.Tq.djt),this.LF(C33.yq.Keyboard.Tq.Cjt),this.LF(C33.yq.Keyboard.Tq.mjt);this.ejt.clear()}QUt(t){return this.ejt.has(t)}tjt(t){return this.ijt.has(t)}Sg(){return{tk:this.sjt,tkk:this.hjt}}gg(t){this.sjt=t.tk,t.hasOwnProperty("tkk")&&(this.hjt=t.tkk)}W_t(){var t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.sjt},{name:t+".debugger.last-key-string",value:C33.yq.Keyboard.frt.vjt(this.sjt)},{name:t+".debugger.last-typed-key",value:this.hjt}]}]}}}{let C33=self.$e,LEFTRIGHT_KEY_STRINGS=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];C33.yq.Keyboard.Tq={QUt(t){return this.ijt.has(t)},ujt(t){return this.sjt===t},ljt(){return!0},djt(){return!0},Cjt(t){return this.sjt===t},tjt(t){return t=Math.floor(t),this.ijt.has(t)},fjt(t){return this.sjt===t},mjt(t){return this.sjt===t},cjt(t){t=LEFTRIGHT_KEY_STRINGS[t];return this.rjt===t},pjt(t){t=LEFTRIGHT_KEY_STRINGS[t];return this.rjt===t},Sjt(t){t=LEFTRIGHT_KEY_STRINGS[t];return this.ejt.has(t)}}}{let C33=self.$e;C33.yq.Keyboard.crt={}}{let StringFromCharCode2=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"";case 38:return"";case 39:return"";case 40:return"";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}},C33=(StringFromCharCode=StringFromCharCode2,self.$e);C33.yq.Keyboard.frt={gjt(){return this.sjt},vjt(t){return StringFromCharCode2(t)},Tjt(){return this.hjt}}}{let C33=self.$e;C33.yq._jt=class PlatformInfoPlugin extends C33.bTt{constructor(t){super(t)}ah(){super.ah()}}}{let GetSdkInstance2=function(){return platformInfoObjectType.Wx().O6()},C33=(GetSdkInstance=GetSdkInstance2,self.$e),platformInfoObjectType=(C33.yq._jt.jIt=class PlatformInfoType extends C33.d_t{constructor(t){super(t)}ah(){super.ah()}ZTt(){}QTt(){return self.yjt}},null),osMap=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),browserMap=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),browserEngineMap=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.yjt=class IPlatformInfoObjectType extends self.Vx{constructor(t){super(t);t=(platformInfoObjectType=t).I5();Object.defineProperties(this,{Ejt:{value:C33.ci._i,writable:!1},Ijt:{value:osMap.get(C33.ci.fi)||"unknown",writable:!1},Ajt:{value:C33.ci.di,writable:!1},Mjt:{value:browserMap.get(C33.ci.Ci)||"unknown",writable:!1},Rjt:{value:C33.ci.mi,writable:!1},wjt:{value:browserEngineMap.get(C33.ci.Si)||"unknown",writable:!1}}),t.UL().qL=this}get exportType(){var t=GetSdkInstance2().I5();let e=t.sW();return GetSdkInstance2().bjt()?e="nwjs":t.uNt()?e="windows-webview2":"cordova"===e?e="Android"===C33.ci.fi?"cordova-android":"cordova-ios":"playable-ad-single-file"!==e&&"playable-ad-zip"!==e||(e="playable-ad"),e}get renderer(){return GetSdkInstance2().Gjt()}get Ojt(){return GetSdkInstance2().Pjt()}get Ljt(){return platformInfoObjectType.I5().jB().Ck()}get xjt(){return platformInfoObjectType.I5().jB().pk()}get Djt(){return platformInfoObjectType.I5().jB().lPt()}get Njt(){return platformInfoObjectType.I5().jB().cPt()}get devicePixelRatio(){return platformInfoObjectType.I5().mU()}}}{let C33=self.$e,DOM_COMPONENT_ID="platform-info";C33.yq._jt.Instance=class PlatformInfoInstance extends C33.S_t{constructor(t,e){super(t,DOM_COMPONENT_ID),this.t8t=0,this.e8t=0,this.i8t=0,this.s8t=0,this.Fjt=[0,0,0,0],this.$jt=!1,this.Bjt=!1,this.kjt=!1,this.b_t([["window-resize",t=>this.BOt(t)],["wake-lock-acquired",t=>this.Wjt(t)],["wake-lock-error",t=>this.Vjt(t)],["wake-lock-released",t=>this.Hjt(t)]]),navigator.connection&&navigator.connection.addEventListener("change",()=>this.Ujt()),this.Qc.m5(this.O_t("get-initial-state").then(t=>{this.t8t=t.screenWidth,this.e8t=t.screenHeight,this.i8t=t.windowOuterWidth,this.s8t=t.windowOuterHeight,this.Fjt=t.safeAreaInset,this.$jt=t.supportsWakeLock,this.kjt=t.isNwjs}))}ah(){super.ah()}BOt(t){this.i8t=t.windowOuterWidth,this.s8t=t.windowOuterHeight,this.Fjt=t.safeAreaInset}bjt(){return this.kjt}async Ujt(){await this.DF(C33.yq._jt.Tq.jjt)}async Wjt(){this.Bjt=!0,await this.DF(C33.yq._jt.Tq.Xjt)}async Vjt(){this.Bjt=!1,await this.DF(C33.yq._jt.Tq.Yjt)}async Hjt(){this.Bjt=!1,await this.DF(C33.yq._jt.Tq.qjt)}Gjt(){let t="";return t=this.Qc.LPt()?"webgpu":"webgl"+this.Qc.PPt().ET(),this.Qc.RS().nS()&&(t+="-software"),t}Pjt(){return this.Qc.LPt()?this.Qc.LPt().GetAdapterInfoString():this.Qc.PPt().EG()}}}{let C33=self.$e;C33.yq._jt.Tq={zjt(){return C33.ci._i},Kjt(){return"Windows"===C33.ci.fi},Jjt(){return"macOS"===C33.ci.fi},Zjt(){return"Linux"===C33.ci.fi},Qjt(){return"Chrome OS"===C33.ci.fi},tXt(){return"Android"===C33.ci.fi},eXt(){return"iOS"===C33.ci.fi},iXt(){var t=this.Qc.sW();return"html5"===t||"scirra-arcade"===t||"preview"===t||"instant-games"===t},sXt(){return this.Qc.vLt()},rXt(){return"nwjs"===this.Qc.sW()||this.kjt},hXt(){return"windows-uwp"===this.Qc.sW()},nXt(){return this.Qc.uNt()},aXt(){return"macos-wkwebview"===this.Qc.sW()},jjt(){return!0},Xjt(){return!0},Yjt(){return!0},qjt(){return!0},oXt(){return this.Bjt},lXt(){return this.$jt}}}{let C33=self.$e;C33.yq._jt.crt={uXt(){this.$jt&&this.P_t("request-wake-lock")},cXt(){this.$jt&&(this.Bjt=!1,this.G_t("release-wake-lock"))}}}{let C33=self.$e;C33.yq._jt.frt={fXt(){return this.Gjt()},dXt(){return this.Pjt()},B9t(){return this.Qc.mU()},k9t(){return this.t8t},W9t(){return this.e8t},V9t(){return this.Qc.jB().YB()},H9t(){return this.Qc.jB().zB()},U9t(){return this.i8t},j9t(){return this.s8t},CXt(){return this.Qc.jB().Ck()},pXt(){return this.Qc.jB().pk()},mXt(){return this.Qc.jB().lPt()},vXt(){return this.Qc.jB().cPt()},SXt(){return navigator.connection&&navigator.connection.downlink||0},gXt(){return navigator.connection&&navigator.connection.downlinkMax||0},ConnectionType(){return navigator.connection&&navigator.connection.type||"unknown"},TXt(){return navigator.connection&&navigator.connection.effectiveType||"unknown"},_Xt(){return navigator.connection&&navigator.connection.rtt||0},yXt(){return navigator.hardwareConcurrency||0},EXt(){return navigator.deviceMemory||0},IXt(){return this.Fjt[0]},AXt(){return this.Fjt[1]},MXt(){return this.Fjt[2]},RXt(){return this.Fjt[3]},wXt(){return this.Qc.vL()},bXt(){return this.Qc.gL()}}}{let C33=self.$e;C33.Zat.GXt=class EightDirBehavior extends C33.Gyt{constructor(t){super(t)}ah(){super.ah()}}}{let C33=self.$e;C33.Zat.GXt.jIt=class EightDirType extends C33.Dyt{constructor(t){super(t)}ah(){super.ah()}ZTt(){}}}{let C33=self.$e,C3X=self.qe,IBehaviorInstance=self.N6,MAX_SPEED=0,ACCELERATION=1,DEACCELERATION=2,DIRECTION=3,ANGLE_MODE=4,ALLOW_SLIDING=5,DEFAULT_CONTROLS=6,ENABLE=7,map=(C33.Zat.GXt.Instance=class EightDirInstance extends C33.Fyt{constructor(t,e){super(t),this.OXt=!1,this.PXt=!1,this.LXt=!1,this.xXt=!1,this.DXt=!1,this.NXt=!1,this.FXt=!1,this.$Xt=!1,this.BXt=!1,this.kXt=0,this.WXt=0,this.VXt=200,this.HXt=600,this.UXt=500,this.jXt=3,this.XXt=3,this.YXt=!1,this.qXt=!0,this.bpt=!0,e&&(this.VXt=e[MAX_SPEED],this.HXt=e[ACCELERATION],this.UXt=e[DEACCELERATION],this.jXt=e[DIRECTION],this.XXt=e[ANGLE_MODE],this.YXt=!!e[ALLOW_SLIDING],this.qXt=!!e[DEFAULT_CONTROLS],this.bpt=!!e[ENABLE]),this.bpt&&this.F_t(),this.qXt&&this.zXt()}zXt(){var t;this.vf||(t=this.Qc.x3(),this.vf=new C33.Cf(C33.nf.df(t,"keydown",t=>this.njt(t.data)),C33.nf.df(t,"keyup",t=>this.ajt(t.data)),C33.nf.df(t,"window-blur",()=>this.ojt()),C33.nf.df(t,"keyboard-blur",()=>this.ojt())))}KXt(){this.vf&&(this.vf.ah(),this.vf=null)}ah(){super.ah()}Sg(){return{dx:this.kXt,dy:this.WXt,e:this.bpt,ms:this.VXt,acc:this.HXt,dec:this.UXt,d:this.jXt,am:this.XXt,dc:this.qXt,ii:this.DXt}}gg(t){this.kXt=t.dx,this.WXt=t.dy,this.pSt(t.e),this.VXt=t.ms,this.HXt=t.acc,this.UXt=t.dec,this.jXt=t.d,this.XXt=t.am,this.qXt=t.dc,this.DXt=t.ii,this.OXt=!1,this.PXt=!1,this.LXt=!1,this.xXt=!1,this.NXt=!1,this.FXt=!1,this.$Xt=!1,this.BXt=!1,this.qXt?this.zXt():this.KXt()}njt(t){switch(t.key){case"ArrowLeft":this.LXt=!0;break;case"ArrowUp":this.OXt=!0;break;case"ArrowRight":this.xXt=!0;break;case"ArrowDown":this.PXt=!0}}ajt(t){switch(t.key){case"ArrowLeft":this.LXt=!1;break;case"ArrowUp":this.OXt=!1;break;case"ArrowRight":this.xXt=!1;break;case"ArrowDown":this.PXt=!1}}ojt(){this.OXt=!1,this.PXt=!1,this.LXt=!1,this.xXt=!1}zK(){var r=this.Qc.aL(this.Mi),h=this.Qc.vP();let e=this.LXt||this.$Xt,n=this.xXt||this.BXt,a=this.OXt||this.NXt,o=this.PXt||this.FXt;if(this.$Xt=!1,this.BXt=!1,this.NXt=!1,this.FXt=!1,this.bpt){let s=h.K5(this.Mi);if(!s||(h.GGt(this.Mi,s),h.YGt(this.Mi))){this.DXt&&(e=n=a=o=!1),0===this.jXt?e=n=!1:1===this.jXt&&(a=o=!1),(e=2===this.jXt&&(a||o)?n=!1:e)===n&&(this.kXt<0?this.kXt=Math.min(this.kXt+this.UXt*r,0):0<this.kXt&&(this.kXt=Math.max(this.kXt-this.UXt*r,0))),a===o&&(this.WXt<0?this.WXt=Math.min(this.WXt+this.UXt*r,0):0<this.WXt&&(this.WXt=Math.max(this.WXt-this.UXt*r,0)));let t=0,i=0;if(e&&!n&&(t=0<this.kXt?-(this.HXt+this.UXt):-this.HXt),n&&!e&&(t=this.kXt<0?this.HXt+this.UXt:this.HXt),a&&!o&&(i=0<this.WXt?-(this.HXt+this.UXt):-this.HXt),o&&!a&&(i=this.WXt<0?this.HXt+this.UXt:this.HXt),this.kXt+=t*r,this.WXt+=i*r,0!==this.kXt||0!==this.WXt){let e=Math.hypot(this.kXt,this.WXt);var l=Math.atan2(this.WXt,this.kXt),u=this.VXt*Math.cos(l),l=this.VXt*Math.sin(l),c=(e>this.VXt&&(e=this.VXt,this.kXt=u,this.WXt=l),this.Mi.s5()),f=c.rg(),d=c.ag(),C=c.yD(),u=Math.abs(u)*r,l=Math.abs(l)*r,u=C33.dh(this.kXt*r+.5*t*r*r,-u,u),l=C33.dh(this.WXt*r+.5*i*r*r,-l,l);if(this.YXt){if(c.f7(u,l),c.o7(),s=h.K5(this.Mi)){h.GGt(this.Mi,s);var p=Math.atan2(this.WXt,this.kXt)+Math.PI/2;let t=!1;var m,v=(c.eC()+c.cC())/4;h.XGt(this.Mi,Math.cos(p),Math.sin(p),Math.max(2.5*e*r,v))&&(t=!0,p=c.rg(),S=c.ag(),1.01*(m=e*r)<(g=C33.Sh(f,d,p,S)))&&(m=m/g,g=C33.Lt(f,p,m),m=C33.Lt(d,S,m),c.l7(g,m),c.o7(),s=h.K5(this.Mi))&&(g=C33.Th(f,d,p,S)+Math.PI/2,m=Math.cos(g),p=Math.sin(g),S=(c.eC()+c.cC())/2/10,h.XGt(this.Mi,m,p,Math.max(S,1))||(c.l7(f,d),c.o7(),t=!1)),t||(m=-u/(g=Math.hypot(u,l)),p=-l/g,this.kXt=0,this.WXt=0,h.UGt(this.Mi,m,p,Math.max(2.5*e*r,v)))||(c.l7(f,d),c.o7())}}else c.hht(u),c.o7(),(s=h.K5(this.Mi))&&(h.UGt(this.Mi,this.kXt<0?1:-1,0,Math.max(Math.abs(Math.floor(u)),1))||(c.hg(f),c.o7()),this.kXt=0,h.GGt(this.Mi,s)),c.nht(l),c.o7(),(s=h.K5(this.Mi))&&(h.UGt(this.Mi,0,this.WXt<0?1:-1,Math.max(Math.abs(Math.floor(l)),1))||(c.og(d),c.o7()),this.WXt=0,h.GGt(this.Mi,s));var S=C33.Fh(this.kXt,6),g=C33.Fh(this.WXt,6);0===S&&0===g||!this.Mi.Ux().Ax()||(1===this.XXt?c._D(C33.ph(90*Math.round(C33.mh(Math.atan2(g,S))/90))):2===this.XXt?c._D(C33.ph(45*Math.round(C33.mh(Math.atan2(g,S))/45))):3===this.XXt&&c._D(Math.atan2(g,S))),c.o7(),c.yD()!=C&&(s=h.K5(this.Mi))&&(c._D(C),c.o7(),h.GGt(this.Mi,s))}}}}Urt(t){switch(t){case MAX_SPEED:return this.JXt();case ACCELERATION:return this.ZXt();case DEACCELERATION:return this.QXt();case DIRECTION:return this.jXt;case ANGLE_MODE:return this.XXt;case ALLOW_SLIDING:return this.YXt;case DEFAULT_CONTROLS:return this.tYt();case ENABLE:return this.mSt()}}Krt(t,e){switch(t){case MAX_SPEED:this.eYt(e);break;case ACCELERATION:this.iYt(e);break;case DEACCELERATION:this.sYt(e);break;case DIRECTION:this.jXt=e;break;case ANGLE_MODE:this.XXt=e;break;case ALLOW_SLIDING:this.YXt=!!e;break;case DEFAULT_CONTROLS:this.rYt(!!e);break;case ENABLE:this.pSt(!!e)}}hYt(){this.kXt=0,this.WXt=0}nYt(){this.kXt*=-1,this.WXt*=-1}aYt(){var t=Math.hypot(this.kXt,this.WXt);t>this.VXt&&this.oYt(t)}oYt(t){t=C33.dh(t,0,this.VXt);var e=Math.atan2(this.WXt,this.kXt);this.kXt=t*Math.cos(e),this.WXt=t*Math.sin(e)}lYt(){return Math.hypot(this.kXt,this.WXt)}eYt(t){this.VXt=Math.max(t,0)}JXt(){return this.VXt}iYt(t){this.HXt=Math.max(t,0)}ZXt(){return this.HXt}sYt(t){this.UXt=Math.max(t,0)}QXt(){return this.UXt}uYt(){return Math.atan2(this.WXt,this.kXt)}cYt(t){this.kXt=t,this.aYt()}fYt(){return this.kXt}dYt(t){this.WXt=t,this.aYt()}CYt(){return this.WXt}pYt(t){if(this.bpt)switch(t){case 0:this.$Xt=!0;break;case 1:this.BXt=!0;break;case 2:this.NXt=!0;break;case 3:this.FXt=!0}}rYt(t){this.qXt!==(t=!!t)&&(this.qXt=t,this.qXt?this.zXt():(this.KXt(),this.ojt()))}tYt(){return this.qXt}mYt(t){this.DXt=!!t}vYt(){return this.DXt}pSt(t){this.bpt=!!t,this.bpt?this.F_t():(this.$Xt=!1,this.BXt=!1,this.NXt=!1,this.FXt=!1,this.__t())}mSt(){return this.bpt}SYt(t){this.YXt=!!t}gYt(){return this.YXt}W_t(){var t="behaviors.eightdir";return[{title:"$"+this.V6().jc(),properties:[{name:t+".debugger.vector-x",value:this.fYt(),nVt:t=>this.cYt(t)},{name:t+".debugger.vector-y",value:this.CYt(),nVt:t=>this.dYt(t)},{name:t+".debugger.speed",value:this.lYt(),nVt:t=>this.oYt(t)},{name:t+".debugger.angle-of-motion",value:C33.mh(this.uYt())},{name:t+".properties.max-speed.name",value:this.JXt(),nVt:t=>this.eYt(t)},{name:t+".properties.acceleration.name",value:this.ZXt(),nVt:t=>this.iYt(t)},{name:t+".properties.deceleration.name",value:this.QXt(),nVt:t=>this.sYt(t)},{name:t+".properties.allow-sliding.name",value:this.gYt(),nVt:t=>this.SYt(t)},{name:t+".properties.enabled.name",value:this.mSt(),nVt:t=>this.pSt(t)}]}]}QTt(){return self.TYt}},new WeakMap),SIMULATE_CONTROL_MAP=new Map([["left",0],["right",1],["up",2],["down",3]]);self.TYt=class I8DirectionBehaviorInstance extends IBehaviorInstance{constructor(){super(),map.set(this,IBehaviorInstance.QN().O6())}stop(){map.get(this).hYt()}reverse(){map.get(this).nYt()}_Yt(t){C3X.As(t);t=SIMULATE_CONTROL_MAP.get(t);if("number"!=typeof t)throw new Error("invalid control");map.get(this).pYt(t)}get speed(){return map.get(this).lYt()}set speed(t){C3X._s(t),map.get(this).oYt(t)}get yYt(){return map.get(this).JXt()}set yYt(t){C3X._s(t),map.get(this).eYt(t)}get acceleration(){return map.get(this).ZXt()}set acceleration(t){C3X._s(t),map.get(this).iYt(t)}get EYt(){return map.get(this).QXt()}set EYt(t){C3X._s(t),map.get(this).sYt(t)}get IYt(){return map.get(this).fYt()}set IYt(t){C3X._s(t),map.get(this).cYt(t)}get AYt(){return map.get(this).CYt()}set AYt(t){C3X._s(t),map.get(this).dYt(t)}MYt(t,e){C3X._s(t),C3X._s(e);var i=map.get(this);i.cYt(t),i.dYt(e)}RYt(){var t=map.get(this);return[t.fYt(),t.CYt()]}get wYt(){return map.get(this).tYt()}set wYt(t){map.get(this).rYt(!!t)}get bYt(){return map.get(this).vYt()}set bYt(t){map.get(this).mYt(!!t)}get GYt(){return map.get(this).gYt()}set GYt(t){map.get(this).SYt(!!t)}get isEnabled(){return map.get(this).mSt()}set isEnabled(t){map.get(this).pSt(!!t)}}}{let C33=self.$e;C33.Zat.GXt.Tq={OYt(){return 1e-10<this.lYt()},PYt(t,e){return C33.compare(this.lYt(),t,e)},Uu(){return this.mSt()},LYt(){return this.gYt()}}}{let C33=self.$e;C33.Zat.GXt.crt={$$(){this.hYt()},xYt(){this.nYt()},DYt(t){this.mYt(t)},NYt(t){this.oYt(t)},FYt(t){this.eYt(t)},$Yt(t){this.iYt(t)},BYt(t){this.sYt(t)},kYt(t){this.pYt(t)},Ngt(t){this.pSt(t)},WYt(t){this.cYt(t)},VYt(t){this.dYt(t)},HYt(t){this.rYt(!!t)},UYt(t){this.SYt(t)}}}{let C33=self.$e;C33.Zat.GXt.frt={jYt(){return this.lYt()},XYt(){return this.JXt()},YYt(){return this.ZXt()},qYt(){return this.QXt()},zYt(){return C33.mh(this.uYt())},KYt(){return this.fYt()},JYt(){return this.CYt()}}}{let C33=self.$e;C33.Zat.ZYt=class SinBehavior extends C33.Gyt{constructor(t){super(t)}ah(){super.ah()}}}{let C33=self.$e;C33.Zat.ZYt.jIt=class SinType extends C33.Dyt{constructor(t){super(t)}ah(){super.ah()}ZTt(){}}}{let C33=self.$e,C3X=self.qe,IBehaviorInstance=self.N6,MOVEMENT=0,WAVE=1,PERIOD=2,PERIOD_RANDOM=3,PERIOD_OFFSET=4,PERIOD_OFFSET_RANDOM=5,MAGNITUDE=6,MAGNITUDE_RANDOM=7,ENABLE=8,HORIZONTAL=0,VERTICAL=1,SIZE=2,WIDTH=3,HEIGHT=4,ANGLE=5,OPACITY=6,VALUE=7,FORWARDS_BACKWARDS=8,ZELEVATION=9,SINE=0,TRIANGLE=1,SAWTOOTH=2,REVERSE_SAWTOOTH=3,SQUARE=4,_2pi=2*Math.PI,_pi_2=Math.PI/2,_3pi_2=3*Math.PI/2,MOVEMENT_LOOKUP=[0,1,8,3,4,2,5,6,9,7],map=(C33.Zat.ZYt.Instance=class SinInstance extends C33.Fyt{constructor(t,e){super(t),this.QYt=0,this.tqt=0,this.eqt=0,this.iqt=0,this.sqt=0,this.bpt=!0,this.rqt=0,this.hqt=0,this.nqt=0,this.aqt=0,this.oqt=0,this.lqt=0,this.tmt=0,this.uqt=0,this.cqt=0,this.fqt=0,this.dqt=0,e&&(this.tqt=MOVEMENT_LOOKUP[e[MOVEMENT]],this.eqt=e[WAVE],this.aqt=this.Qc.LL()*e[PERIOD_RANDOM],this.rqt=e[PERIOD],this.iqt=e[PERIOD],this.iqt+=this.aqt,this.hqt=e[PERIOD_OFFSET],0!==this.iqt&&(this.oqt=this.Qc.LL()*e[PERIOD_OFFSET_RANDOM],this.QYt=e[PERIOD_OFFSET]/this.iqt*_2pi,this.QYt+=this.oqt/this.iqt*_2pi),this.lqt=this.Qc.LL()*e[MAGNITUDE_RANDOM],this.nqt=e[MAGNITUDE],this.sqt=e[MAGNITUDE],this.sqt+=this.lqt,this.bpt=!!e[ENABLE]),this.tqt===ANGLE&&(this.sqt=C33.ph(this.sqt)),this.fMt(),this.bpt&&this.F_t()}ah(){super.ah()}Sg(){return{i:this.QYt,e:this.bpt,mv:this.tqt,w:this.eqt,p:this.iqt,mag:this.sqt,iv:this.tmt,iv2:this.uqt,r:this.dqt,lkv:this.cqt,lkv2:this.fqt}}gg(t){this.QYt=t.i,this.pSt(t.e),this.tqt=t.mv,this.eqt=t.w,this.iqt=t.p,this.sqt=t.mag,this.tmt=t.iv,this.uqt=t.iv2,this.dqt=t.r,this.cqt=t.lkv,this.fqt=t.lkv2}fMt(){var t=this.Mi.s5();switch(this.tqt){case HORIZONTAL:this.tmt=t.rg();break;case VERTICAL:this.tmt=t.ag();break;case SIZE:this.tmt=t.eC(),this.dqt=t.cC()/t.eC();break;case WIDTH:this.tmt=t.eC();break;case HEIGHT:this.tmt=t.cC();break;case ANGLE:this.tmt=t.yD();break;case OPACITY:this.tmt=t.Cb();break;case VALUE:this.tmt=0;break;case FORWARDS_BACKWARDS:this.tmt=t.rg(),this.uqt=t.ag();break;case ZELEVATION:this.tmt=t.lg()}this.cqt=this.tmt,this.fqt=this.uqt}Cqt(t){switch(t%=_2pi,this.eqt){case SINE:return Math.sin(t);case TRIANGLE:return t<=_pi_2?t/_pi_2:t<=_3pi_2?1-2*(t-_pi_2)/Math.PI:(t-_3pi_2)/_pi_2-1;case SAWTOOTH:return 2*t/_2pi-1;case REVERSE_SAWTOOTH:return-2*t/_2pi+1;case SQUARE:return t<Math.PI?-1:1}return 0}zK(){var t=this.Qc.aL(this.Mi);this.bpt&&0!==t&&(0===this.iqt?this.QYt=0:this.QYt=(this.QYt+t/this.iqt*_2pi)%_2pi,this.pqt())}pqt(){var t=this.Mi.s5();switch(this.tqt){case HORIZONTAL:t.rg()!==this.cqt&&(this.tmt+=t.rg()-this.cqt),t.hg(this.tmt+this.Cqt(this.QYt)*this.sqt),this.cqt=t.rg();break;case VERTICAL:t.ag()!==this.cqt&&(this.tmt+=t.ag()-this.cqt),t.og(this.tmt+this.Cqt(this.QYt)*this.sqt),this.cqt=t.ag();break;case SIZE:t.oC(this.tmt+this.Cqt(this.QYt)*this.sqt),t.iC(t.eC()*this.dqt);break;case WIDTH:t.oC(this.tmt+this.Cqt(this.QYt)*this.sqt);break;case HEIGHT:t.iC(this.tmt+this.Cqt(this.QYt)*this.sqt);break;case ANGLE:t.yD()!==this.cqt&&(this.tmt=C33.Ch(this.tmt+(t.yD()-this.cqt))),t._D(this.tmt+this.Cqt(this.QYt)*this.sqt),this.cqt=t.yD();break;case OPACITY:t.mb(this.tmt+this.Cqt(this.QYt)*this.sqt/100);break;case FORWARDS_BACKWARDS:t.rg()!==this.cqt&&(this.tmt+=t.rg()-this.cqt),t.ag()!==this.fqt&&(this.uqt+=t.ag()-this.fqt),t.hg(this.tmt+Math.cos(t.yD())*this.Cqt(this.QYt)*this.sqt),t.og(this.uqt+Math.sin(t.yD())*this.Cqt(this.QYt)*this.sqt),this.cqt=t.rg(),this.fqt=t.ag();break;case ZELEVATION:t.ug(this.tmt+this.Cqt(this.QYt)*this.sqt)}t.o7()}mqt(t,e){}vqt(t){this.iqt=t}Sqt(){return this.iqt}gqt(t){this.sqt=t}Tqt(t){5===this.tqt&&(t=C33.ph(t)),this.gqt(t)}_qt(){return this.sqt}yqt(){let t=this._qt();return t=5===this.tqt?C33.mh(t):t}Eqt(t){5===this.tqt&&5!==t&&(this.sqt=C33.mh(this.sqt)),this.tqt=t,this.fMt()}Iqt(){return this.tqt}Aqt(t){this.eqt=t}Mqt(){return this.eqt}Rqt(t){this.QYt=C33.dh(t,0,2*Math.PI),this.pqt()}wqt(){return this.QYt}pSt(t){this.bpt=!!t,this.bpt?this.F_t():this.__t()}mSt(){return this.bpt}Urt(t){switch(t){case MOVEMENT:return this.tqt;case WAVE:return this.eqt;case PERIOD:return this.rqt;case MAGNITUDE:return this.nqt;case ENABLE:return this.bpt}}Krt(t,e){switch(t){case MOVEMENT:this.tqt=MOVEMENT_LOOKUP[e],this.fMt();break;case WAVE:this.eqt=e;break;case PERIOD:this.rqt=e,this.iqt=this.rqt+this.aqt,this.bpt||(0!==this.iqt?(this.QYt=this.hqt/this.iqt*_2pi,this.QYt+=this.oqt/this.iqt*_2pi):this.QYt=0);break;case MAGNITUDE:this.nqt=e,this.sqt=this.nqt+this.lqt,this.tqt===ANGLE&&(this.sqt=C33.ph(this.sqt));break;case ENABLE:this.bpt=!!e}}W_t(){var t="behaviors.sin";return[{title:"$"+this.V6().jc(),properties:[{name:t+".properties.enabled.name",value:this.mSt(),nVt:t=>this.pSt(t)},{name:t+".properties.period.name",value:this.Sqt(),nVt:t=>this.vqt(t)},{name:t+".properties.magnitude.name",value:this.yqt(),nVt:t=>this.Tqt(t)},{name:t+".debugger.value",value:this.Cqt(this.wqt())*this.yqt()}]}]}QTt(){return self.bqt}},new WeakMap),VALID_MOVEMENTS=["horizontal","vertical","size","width","height","angle","opacity","value-only","forwards-backwards","z-elevation"],VALID_WAVES=["sine","triangle","sawtooth","reverse-sawtooth","square"];self.bqt=class ISineBehaviorInstance extends IBehaviorInstance{constructor(){super(),map.set(this,IBehaviorInstance.QN().O6())}set Gqt(t){C3X._s(t),map.get(this).vqt(t)}get Gqt(){return map.get(this).Sqt()}set Oqt(t){C3X._s(t),map.get(this).gqt(t)}get Oqt(){return map.get(this)._qt()}set Pqt(t){map.get(this).Rqt(t)}get Pqt(){return map.get(this).wqt()}set Lqt(t){C3X.As(t);t=VALID_MOVEMENTS.indexOf(t);if(-1===t)throw new Error("invalid movement");map.get(this).Eqt(t)}get Lqt(){return VALID_MOVEMENTS[map.get(this).Iqt()]}set xqt(t){C3X.As(t);t=VALID_WAVES.indexOf(t);if(-1===t)throw new Error("invalid wave");map.get(this).Aqt(t)}get xqt(){return VALID_WAVES[map.get(this).Mqt()]}get value(){var t=map.get(this);return t.Cqt(t.wqt())*t._qt()}Dqt(){map.get(this).fMt()}set isEnabled(t){map.get(this).pSt(!!t)}get isEnabled(){return map.get(this).mSt()}}}{let C33=self.$e;C33.Zat.ZYt.Tq={Uu(){return this.mSt()},Nqt(t){return this.Iqt()===t},Fqt(t,e){return C33.compare(this.Sqt(),t,e)},$qt(t,e){return C33.compare(this.yqt(),t,e)},Bqt(t){return this.Mqt()===t}}}{let C33=self.$e;C33.Zat.ZYt.crt={Ngt(t){this.pSt(0!==t)},kqt(t){this.vqt(t)},Wqt(t){this.Tqt(t)},Vqt(t){this.Eqt(t)},Hqt(t){this.eqt=t},Uqt(t){var e=2*Math.PI;this.Rqt(t*e%e)},jqt(){this.fMt()}}}{let C33=self.$e;C33.Zat.ZYt.frt={Xqt(){return this.wqt()/(2*Math.PI)},Yqt(){return this.Sqt()},qqt(){return this.yqt()},zqt(){return this.Cqt(this.wqt())*this.yqt()}}}{let unaryminus2=function(t){return"number"==typeof t?-t:t},bothNumbers2=function(t,e){return"number"==typeof t&&"number"==typeof e},add2=function(t,e){return bothNumbers2(t,e)?t+e:t},subtract2=function(t,e){return bothNumbers2(t,e)?t-e:t},multiply2=function(t,e){return bothNumbers2(t,e)?t*e:t},divide2=function(t,e){return bothNumbers2(t,e)?t/e:t},mod2=function(t,e){return bothNumbers2(t,e)?t%e:t},pow2=function(t,e){return bothNumbers2(t,e)?Math.pow(t,e):t},and2=function(i,s){if("string"!=typeof i&&"string"!=typeof s)return i&&s?1:0;{let t,e;return t="number"==typeof i?(Math.round(1e10*i)/1e10).toString():i,e="number"==typeof s?(Math.round(1e10*s)/1e10).toString():s,t+e}},or2=function(t,e){return bothNumbers2(t,e)?t||e?1:0:t},C33=(unaryminus=unaryminus2,bothNumbers=bothNumbers2,add=add2,subtract=subtract2,multiply=multiply2,divide=divide2,mod=mod2,pow=pow2,and=and2,or=or2,self.$e);self.Umt=[t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1).Tmt();return()=>e()+" - "+i()+" - (C) Wild Haired Science Teacher - Find more at whscience.org"},()=>0,t=>{let e=t.t2t(0),i=t.t2t(1);return()=>e.Mmt()+i.Mmt()/2+2},()=>"Pointer",t=>{let e=t.t2t(0).Tmt();return()=>e()},()=>"StringListLibrary",()=>"",t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1).Hmt(),s=t.t2t(2).Hmt();return()=>e(i.Fit(),s.Fit())-1},t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1).Tmt(),s=t.t2t(2).Hmt(),r=t.t2t(3).Tmt(),h=t.t2t(4).Hmt();return()=>e(i(s.Fit(),r(),h.Fit()))},t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1).Hmt();return()=>e(i.Fit())},t=>{let e=t.t2t(0).Hmt();return()=>e.Fit()},t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1).Hmt(),s=t.t2t(2).Hmt();return()=>e(i.Fit(),s.Fit())},t=>{let e=t.t2t(0).Hmt(),i=t.t2t(1).Hmt(),s=t.t2t(2).Hmt();return()=>e.Fit()+i.Fit()+s.Fit()},t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1).Tmt(),s=t.t2t(2).Hmt(),r=t.t2t(3).Hmt();return()=>Math.floor(e(i(s.Fit(),r.Fit())))},t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1).Hmt(),s=t.t2t(2).Hmt(),r=t.t2t(3).Hmt();return()=>e(i.Fit(),s.Fit(),r.Fit())},t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1).Tmt(),s=t.t2t(2).Hmt(),r=t.t2t(3).Hmt(),h=t.t2t(4).Hmt(),n=t.t2t(5).Hmt(),a=t.t2t(6).Hmt();return()=>e(i(s.Fit(),r.Fit(),h.Fit()),n.Fit(),a.Fit())},t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1).Tmt(),s=t.t2t(2).Hmt(),r=t.t2t(3).Tmt(),h=t.t2t(4).Hmt(),n=t.t2t(5).Hmt(),a=t.t2t(6).Hmt();return()=>e(i(s.Fit(),r(),h.Fit()),n.Fit(),a.Fit())},t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1).Tmt(),s=t.t2t(2).Hmt(),r=t.t2t(3).Tmt(),h=t.t2t(4).Hmt(),n=t.t2t(5).Tmt(),a=t.t2t(6).Hmt();return()=>e(i(s.Fit()),r(h.Fit()),n(a.Fit()))},t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1).Hmt(),s=t.t2t(2).Hmt(),r=t.t2t(3).Tmt(),h=t.t2t(4).Hmt(),n=t.t2t(5).Hmt(),a=t.t2t(6).Hmt(),o=t.t2t(7).Hmt();return()=>e(i.Fit(),s.Fit(),r(h.Fit(),n.Fit(),a.Fit()),o.Fit())},t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1).Tmt(),s=t.t2t(2).Hmt(),r=t.t2t(3).Hmt(),h=t.t2t(4).Tmt(),n=t.t2t(5).Hmt(),a=t.t2t(6).Hmt(),o=t.t2t(7).Hmt();return()=>e(i(s.Fit(),r.Fit()-h(),n.Fit()),a.Fit(),o.Fit())},t=>{let e=t.t2t(0).Hmt();return()=>e.Fit()-1},t=>{let e=t.t2t(0).Hmt(),i=t.t2t(1).Tmt(),s=t.t2t(2).Tmt(),r=t.t2t(3).Hmt(),h=t.t2t(4).Tmt(),n=t.t2t(5).Hmt();return()=>e.Fit()+i(s(r.Fit(),h(),n.Fit()))},t=>{let e=t.t2t(0).Hmt(),i=t.t2t(1).Hmt();return()=>e.Fit()/i.Fit()},t=>{let e=t.t2t(0).Hmt(),i=t.t2t(1).Tmt(),s=t.t2t(2).Tmt(),r=t.t2t(3).Hmt(),h=t.t2t(4).Tmt(),n=t.t2t(5).Hmt(),a=t.t2t(6).Hmt();return()=>e.Fit()+Math.pow(i(s(r.Fit(),h(),n.Fit()))-a.Fit(),2)},t=>{let e=t.t2t(0).Hmt(),i=t.t2t(1).Hmt();return()=>Math.sqrt(e.Fit()/(i.Fit()+1))},t=>{let e=t.t2t(0),i=t.t2t(1),s=t.t2t(2).Tmt(),r=t.t2t(3).Tmt(),h=t.t2t(4);return()=>C33.mh(C33.Th(e.Mmt(),i.Mmt(),s("Main"),r("Main")))-h.Mmt()},()=>720,t=>{let e=t.t2t(0),i=t.t2t(1),s=t.t2t(2).Tmt(),r=t.t2t(3).Tmt(),h=t.t2t(4);return()=>5*Math.round(C33.dh((C33.mh(C33.Th(e.Mmt(),i.Mmt(),s("Main"),r("Main")))-h.Gmt()+720)%360,90.1,179.9)/5)},t=>{let e=t.t2t(0);return()=>e.Mmt()},t=>{let e=t.t2t(0);return()=>Math.round(180-e.Mmt())},t=>{let e=t.t2t(0).Hmt();return()=>and2("Angle: ",e.Fit())+""},()=>"angle",()=>"mass",t=>{let e=t.t2t(0);return()=>e.Gmt()},()=>"size",t=>{let e=t.t2t(0);return()=>Math.pow(e.Gmt(),2)/4*Math.PI},()=>"velocity",()=>"height",()=>"gravity",()=>"wind",t=>{let e=t.t2t(0);return()=>C33.dh(180-e.Gmt(),90.1,179.9)},t=>{let e=t.t2t(0).Hmt(),i=t.t2t(1).Hmt(),s=t.t2t(2).Hmt();return()=>e.Fit()-i.Fit()*s.Fit()},()=>-1,t=>{let e=t.t2t(0).Hmt(),i=t.t2t(1).Hmt(),s=t.t2t(2).Hmt();return()=>-1*e.Fit()*i.Fit()*s.Fit()},t=>{let e=t.t2t(0),i=t.t2t(1);return()=>e.Pmt()*i.Pmt()},t=>{let e=t.t2t(0),i=t.t2t(1);return()=>e.Pmt()/i.Pmt()},t=>{let e=t.t2t(0),i=t.t2t(1).Tmt(),s=t.t2t(2);return()=>e.Pmt()*i()+s.Pmt()},t=>{let e=t.t2t(0),i=t.t2t(1),s=t.t2t(2).Tmt(),r=t.t2t(3).Hmt();return()=>e.Mmt()+i.Pmt()*s()*r.Fit()},()=>1,t=>{let e=t.t2t(0).Hmt(),i=t.t2t(1);return()=>e.Fit()-i.Mmt()/2},()=>"Main",t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1),s=t.t2t(2),r=t.t2t(3).Hmt();return()=>e((i.Mmt()-s.Mmt())/r.Fit(),3)+" m"},t=>{let e=t.t2t(0).Tmt();return()=>16*Math.sqrt(1/e("Main"))},()=>100,t=>{let e=t.t2t(0);return()=>e.Pmt()%5},()=>25,t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1).Hmt(),s=t.t2t(2).Hmt(),r=t.t2t(3).Hmt();return()=>e(i.Fit(),s.Fit()*r.Fit())},t=>{let e=t.t2t(0).Hmt(),i=t.t2t(1).Hmt();return()=>e.Fit()*Math.cos(C33.ph(i.Fit()))},t=>{let e=t.t2t(0).Hmt(),i=t.t2t(1).Hmt();return()=>-1*e.Fit()*Math.sin(C33.ph(i.Fit()))},t=>{let e=t.t2t(0).Hmt(),i=t.t2t(1).Hmt();return()=>e.Fit()*i.Fit()},t=>{let e=t.t2t(0).Hmt(),i=t.t2t(1).Hmt(),s=t.t2t(2).Hmt(),r=t.t2t(3).Hmt(),h=t.t2t(4).Hmt();return()=>Math.round(C33.Sh(e.Fit(),i.Fit(),s.Fit(),r.Fit())/h.Fit())},t=>{let e=t.t2t(0).Hmt(),i=t.t2t(1).Hmt(),s=t.t2t(2).Tmt(),r=t.t2t(3).Hmt();return()=>C33.Lt(e.Fit(),i.Fit(),s()/r.Fit())},t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1);return()=>e(i.Gmt(),0,";")},()=>8,t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1);return()=>C33.dh(e("Main")*i.Gmt(),.125,2)},t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1),s=t.t2t(2).Tmt(),r=t.t2t(3);return()=>(e()/2-i.Mmt())*(1/s("Main"))+r.Mmt()},t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1).Hmt(),s=t.t2t(2).Tmt(),r=t.t2t(3).Hmt();return()=>(e()/2-i.Fit())*(1/s("Main"))+r.Fit()},()=>"text/csv",()=>"ProjectileData.csv",()=>"Ball Mass (kg),Ball Diameter (m),Initial Velocity (m/s),Cannon height (m),Gravity (m/s/s),Wind Speed (m/s),Range (m)",t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1).Hmt();return()=>and2("Trials: ",e(i.Fit(),"\n")-1)},t=>{let e=t.t2t(0).Hmt(),i=t.t2t(1),s=t.t2t(2),r=t.t2t(3),h=t.t2t(4),n=t.t2t(5),a=t.t2t(6),o=t.t2t(7).Hmt(),l=t.t2t(8).Tmt(),u=t.t2t(9),c=t.t2t(10),f=t.t2t(11).Hmt();return()=>and2(and2(and2(and2(and2(and2(and2(e.Fit()+"\n",i.Gmt())+",",s.Gmt())+",",r.Gmt())+",",h.Gmt()),n.Gmt())+",",a.Gmt())+",",o.Fit())+","+l((u.Mmt()-c.Mmt())/f.Fit(),3)},()=>"-",t=>{let e=t.t2t(0).Hmt();return()=>Math.abs(e.Fit())},t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1).Hmt();return()=>Math.floor(e(i.Fit()))},t=>{let e=t.t2t(0).Hmt(),i=t.t2t(1).Hmt(),s=t.t2t(2).Hmt(),r=t.t2t(3).Hmt(),h=t.t2t(4).Hmt();return()=>Math.round(e.Fit()*Math.pow(10,-1*i.Fit())*Math.pow(10,s.Fit()-1))/Math.pow(10,r.Fit()-1)/Math.pow(10,-1*h.Fit())},t=>{let e=t.t2t(0).Hmt();return()=>Math.round(1e8*e.Fit())/1e8},t=>{let e=t.t2t(0).Hmt(),i=t.t2t(1).Hmt();return()=>e.Fit()+i.Fit().toString()},t=>{let e=t.t2t(0).Hmt(),i=t.t2t(1).Hmt(),s=t.t2t(2).Tmt(),r=t.t2t(3).Tmt();return()=>e.Fit()+i.Fit()*(Math.sqrt(-2*Math.log(s(1)))*Math.cos(C33.ph(360*r(1))))},t=>{let e=t.t2t(0).Hmt();return()=>180-C33.mh(Math.atan(10/e.Fit()))},t=>{let e=t.t2t(0).Hmt();return()=>21/e.Fit()},t=>{let e=t.t2t(0).Hmt();return()=>10/e.Fit()},t=>{let e=t.t2t(0);return()=>e.Mmt(1)},t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1).Tmt(),s=t.t2t(2).Hmt(),r=t.t2t(3).Tmt(),h=t.t2t(4).Tmt(),n=t.t2t(5);return()=>e(i(s.Fit(),r(h(n.Mmt(),1))-1,","))},t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1).Tmt();return()=>e(i(),"mystery")},()=>-1e3,t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1).Hmt();return()=>e(i.Fit(),0,",")},()=>"ToggleButton",t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1);return()=>e(i.Pmt(),";")-1},t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1),s=t.t2t(2).Tmt();return()=>e(i.Pmt(),s(),";")},t=>{let e=t.t2t(0).Tmt(),i=t.t2t(1),s=t.t2t(2).Hmt(),r=t.t2t(3).Tmt(),h=t.t2t(4);return()=>e(i.Pmt(),(s.Fit()+1)%r(h.Pmt(),";"),";")},()=>"Button",t=>{let e=t.t2t(0);return()=>Math.floor(.875*e.Pmt())},t=>{let e=t.t2t(0);return()=>e.Pmt()},t=>{let e=t.t2t(0),i=t.t2t(1),s=t.t2t(2),r=t.t2t(3);return()=>C33.wh(e.Gmt(),i.Gmt(),s.Gmt())*r.Mmt()},t=>{let e=t.t2t(0),i=t.t2t(1),s=t.t2t(2);return()=>and2(e.Gmt(),i.Gmt())+s.Gmt()},t=>{let e=t.t2t(0),i=t.t2t(1),s=t.t2t(2);return()=>and2(e.Gmt(),Math.round(i.Gmt()))+s.Gmt()},t=>{let e=t.t2t(0),i=t.t2t(1),s=t.t2t(2).Tmt(),r=t.t2t(3),h=t.t2t(4),n=t.t2t(5),a=t.t2t(6),o=t.t2t(7);return()=>and2(e.Gmt(),Math.floor(i.Gmt()))+"."+s(Math.floor((r.Gmt()-Math.floor(h.Gmt()))*Math.pow(10,n.Gmt())),a.Gmt())+o.Gmt()},t=>{let e=t.t2t(0),i=t.t2t(1),s=t.t2t(2),r=t.t2t(3),h=t.t2t(4).Tmt(),n=t.t2t(5),a=t.t2t(6),o=t.t2t(7),l=t.t2t(8),u=t.t2t(9);return()=>Math.round(C33.Lt(e.Gmt(),i.Gmt(),C33.wh(s.Mmt(),r.Mmt(),C33.dh(h(n.Mmt()),a.Mmt(),o.Mmt())))/l.Gmt())*u.Gmt()}]}}}),import_c3runtime=__toESM(require_c3runtime()),C32=self.$e;self.iDt=function(){return[C32.yq.Touch,C32.yq.Ci,C32.yq.Text,C32.yq.qst,C32.Zat.GXt,C32.yq.Keyboard,C32.yq._jt,C32.Zat.ZYt,C32.yq._q.Tq.gq,C32.yq.Text.crt.s3,C32.yq._q.frt.Q$t,C32.yq._q.frt.tBt,C32.yq._q.crt.wn,C32.yq.qst.crt.hg,C32.yq.Text.frt.DSt,C32.yq.Text.frt.WVt,C32.yq._q.Tq.pdt,C32.yq.Keyboard.Tq.QUt,C32.yq.Touch.Tq.QBt,C32.yq.Touch.Tq.BBt,C32.yq.qst.crt.OSt,C32.yq.Touch.frt.DSt,C32.yq.Touch.frt.NSt,C32.yq.Keyboard.Tq.ujt,C32.yq.qst.crt.ogt,C32.yq.qst.Tq.Vgt,C32.yq.qst.crt.rN,C32.yq._q.Tq.Q1t,C32.yq.Keyboard.Tq.Cjt,C32.yq.qst.crt.qgt,C32.yq._q.Tq.r7t,C32.yq._q.frt.k6t,C32.yq._q.Tq.kFt,C32.yq._q.frt.trim,C32.yq._q.frt.B6t,C32.yq._q.frt.W$t,C32.yq._q.crt.tL,C32.yq._q.crt.E7t,C32.yq._q.crt.C7t,C32.yq._q.frt.random,C32.yq._q.frt.F6t,C32.yq._q.frt.float,C32.yq.Ci.Tq.I8t,C32.yq.Ci.Tq.A8t,C32.yq.Ci.crt.e9t,C32.yq.Touch.Tq.DBt,C32.yq.Touch.Tq.tkt,C32.yq.qst.crt.jgt,C32.yq.qst.frt.DSt,C32.yq.qst.frt.NSt,C32.yq.qst.frt.egt,C32.yq.qst.Tq.Wgt,C32.yq.qst.crt._D,C32.yq.Text.crt.og,C32.yq.qst.frt.VSt,C32.yq.qst.crt.og,C32.yq.qst.crt.Qgt,C32.yq._q.frt.nL,C32.yq.qst.crt.Xgt,C32.yq.qst.Tq.RSt,C32.yq.qst.frt.kSt,C32.yq.qst.frt.hTt,C32.yq._q.crt._7t,C32.yq.Text.crt.uM,C32.yq._q.frt.G$t,C32.yq.qst.frt.BSt,C32.yq.Touch.Tq.VBt,C32.yq.Touch.Tq.UBt,C32.yq.qst.crt.lgt,C32.yq.qst.crt.LM,C32.yq.qst.crt.mb,C32.yq.Text.Tq._Vt,C32.yq._q.Tq.VFt,C32.yq.Text.crt.Qgt,C32.yq._q.crt.Y7t,C32.yq._q.crt.C6t,C32.yq._q.frt.f$t,C32.yq._q.frt.d$t,C32.yq.Touch.Tq.KBt,C32.yq.Ci.crt.a9t,C32.yq.qst.Tq.Ugt,C32.yq._q.frt.log10,C32.Zat.ZYt.crt.Uqt,C32.Zat.ZYt.crt.kqt,C32.yq._q.Tq.PFt,C32.yq.qst.frt.VUt,C32.yq.qst.frt.HUt,C32.yq._q.frt.M6t,C32.yq._q.frt.right,C32.yq.Text.frt.Text,C32.yq._q.frt.find,C32.yq.Ci.frt.URL,C32.yq.Text.Tq.Wgt,C32.yq.Text.crt.OSt,C32.yq.Text.Tq.Jgt,C32.yq._q.Tq.o0,C32.yq.Text.crt.jgt,C32.yq.Text.frt.kVt,C32.yq.Text.Tq.Vgt,C32.yq._q.Tq.LFt,C32.yq.qst.crt.wUt,C32.yq.qst.frt.dgt,C32.yq.qst.crt.iC,C32.yq.Text.crt.LM,C32.yq.qst.crt.oC,C32.yq._q.frt.Y6t,C32.yq.Touch.frt.Dkt,C32.yq.qst.frt.WSt,C32.yq.qst.frt.HSt]},self.gDt=[{Touch:0},{Ci:0},{Kqt:0},{Jqt:0},{Zqt:0},{Qqt:0},{tzt:0},{ezt:0},{izt:0},{szt:0},{"8Direction":0},{rzt:0},{Keyboard:0},{_jt:0},{P9t:0},{hzt:0},{nzt:0},{azt:0},{iO:0},{ozt:0},{lzt:0},{zqt:0},{uzt:0},{Dkt:0},{czt:0},{fzt:0},{dzt:0},{Czt:0},{pzt:0},{mzt:0},{vzt:0},{Szt:0},{gzt:0},{Tzt:0},{_zt:0},{yzt:0},{Ezt:0},{Izt:0},{Azt:0},{Mzt:0},{Rzt:0},{wzt:0},{bzt:0},{Gzt:0},{Ozt:0},{Pzt:0},{Lzt:0},{xzt:0},{Dzt:0},{Nzt:0},{Fzt:0},{$zt:0},{Bzt:0},{kzt:0},{Wzt:0},{Vzt:0},{Hzt:0},{Uzt:0},{jzt:0},{Xzt:0},{Yzt:0},{qzt:0},{zzt:0},{Kzt:0},{Jzt:0},{Zzt:0},{Qzt:0},{tKt:0},{eKt:0},{iKt:0},{sKt:0},{kSt:0},{rKt:0},{hKt:0},{nKt:0},{BSt:0},{aKt:0},{oKt:0},{lKt:0},{uKt:0},{cKt:0},{fKt:0},{dKt:0},{CKt:0},{index:0},{pKt:0},{mKt:0},{vKt:0},{SKt:0},{gKt:0},{TKt:0},{_Kt:0},{yKt:0},{EKt:0},{IKt:0},{AKt:0},{MKt:0},{RKt:0},{wKt:0},{bKt:0},{GKt:0},{OKt:0},{PKt:0},{LKt:0},{xKt:0},{DSt:0},{NSt:0},{size:0},{Opacity:0},{DKt:0},{NKt:0},{FKt:0},{$Kt:0},{BKt:0},{kKt:0},{WKt:0},{VKt:0},{HKt:0}],self.UKt={Touch:class extends self.qN{},Ci:class extends self.qN{},Zqt:class extends self.aVt{},tzt:class extends self.aVt{},ezt:class extends self.aVt{},izt:class extends self.lUt{},rzt:class extends self.lUt{},Keyboard:class extends self.qN{},_jt:class extends self.qN{},hzt:class extends self.aVt{},dzt:class extends self.lUt{},Czt:class extends self.lUt{},pzt:class extends self.aVt{},vzt:class extends self.lUt{},Szt:class extends self.lUt{},gzt:class extends self.lUt{},Tzt:class extends self.aVt{},Nzt:class extends self.lUt{},Fzt:class extends self.lUt{},$zt:class extends self.lUt{},kzt:class extends self.lUt{},Vzt:class extends self.aVt{},Hzt:class extends self.aVt{},Uzt:class extends self.aVt{},jzt:class extends self.aVt{},Xzt:class extends self.aVt{},Yzt:class extends self.lUt{},zzt:class extends self.lUt{},Kzt:class extends self.lUt{},Jzt:class extends self.aVt{},Zzt:class extends self.aVt{},Qzt:class extends self.aVt{},tKt:class extends self.lUt{}};