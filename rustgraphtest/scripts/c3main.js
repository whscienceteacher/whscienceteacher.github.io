// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__commonJS=(t,s)=>function(){return s||(0,t[__getOwnPropNames(t)[0]])((s={exports:{}}).exports,s),s.exports},__copyProps=(t,s,i,e)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let n of __getOwnPropNames(s))__hasOwnProp.call(t,n)||n===i||__defProp(t,n,{get:()=>s[n],enumerable:!(e=__getOwnPropDesc(s,n))||e.enumerable});return t},__toESM=(t,s,i)=>(i=null!=t?__create(__getProtoOf(t)):{},__copyProps(!s&&t&&t.i?i:__defProp(i,"default",{value:t,enumerable:!0}),t)),require_c3runtime=__commonJS({"file-map:scripts/c3runtime.js"(exports,module){{let e=function(t){ARRAY_TYPE=t},n=function(t){return t*degree},h=function(t,s){return Math.abs(t-s)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(s))},u=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},p=function(t){var s=new ARRAY_TYPE(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},m=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},g=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},y=function(t,s,i,e){var n=new ARRAY_TYPE(4);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n},w=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},S=function(t,s){if(t===s){var i=s[1];t[1]=s[2],t[2]=i}else t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3];return t},v=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*r-n*e;return h?(h=1/h,t[0]=r*h,t[1]=-e*h,t[2]=-n*h,t[3]=i*h,t):null},b=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},x=function(t){return t[0]*t[3]-t[2]*t[1]},M=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*o+r*a,t[1]=n*o+h*a,t[2]=e*l+r*u,t[3]=n*l+h*u,t},T=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+r*o,t[1]=n*a+h*o,t[2]=e*-o+r*a,t[3]=n*-o+h*a,t},G=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1];return t[0]=e*o,t[1]=n*o,t[2]=r*a,t[3]=h*a,t},_=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t},C=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},I=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},E=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},P=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},R=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},A=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},F=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},O=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=s[0],o=s[1],a=s[2],l=s[3];return Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-o)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(l))},D=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},L=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},N=function(){var t=new ARRAY_TYPE(6);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},k=function(t){var s=new ARRAY_TYPE(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},B=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},$=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},W=function(t,s,i,e,n,r){var h=new ARRAY_TYPE(6);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h[4]=n,h[5]=r,h},U=function(t,s,i,e,n,r,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t},V=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=i*r-e*n;return a?(a=1/a,t[0]=r*a,t[1]=-e*a,t[2]=-n*a,t[3]=i*a,t[4]=(n*o-r*h)*a,t[5]=(e*h-i*o)*a,t):null},z=function(t){return t[0]*t[3]-t[1]*t[2]},j=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1],c=i[2],f=i[3],d=i[4],p=i[5];return t[0]=e*l+r*u,t[1]=n*l+h*u,t[2]=e*c+r*f,t[3]=n*c+h*f,t[4]=e*d+r*p+o,t[5]=n*d+h*p+a,t},q=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=Math.sin(i),u=Math.cos(i);return t[0]=e*u+r*l,t[1]=n*u+h*l,t[2]=e*-l+r*u,t[3]=n*-l+h*u,t[4]=o,t[5]=a,t},H=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e*l,t[1]=n*l,t[2]=r*u,t[3]=h*u,t[4]=o,t[5]=a,t},J=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=e*l+r*u+o,t[5]=n*l+h*u+a,t},Y=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t[4]=0,t[5]=0,t},X=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},Z=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},K=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},Q=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},tt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},st=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},it=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},et=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},nt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},rt=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=s[0],l=s[1],u=s[2],c=s[3],f=s[4],d=s[5];return Math.abs(i-a)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(e-l)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(n-u)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(h-f)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(o-d)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(d))},ht=function(){var t=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},ot=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},at=function(t){var s=new ARRAY_TYPE(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},ut=function(t,s,i,e,n,r,h,o,a){var l=new ARRAY_TYPE(9);return l[0]=t,l[1]=s,l[2]=i,l[3]=e,l[4]=n,l[5]=r,l[6]=h,l[7]=o,l[8]=a,l},ct=function(t,s,i,e,n,r,h,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t},ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},dt=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[5];t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=n}else t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8];return t},pt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=u*h-o*l,f=-u*r+o*a,d=l*r-h*a,p=i*c+e*f+n*d;return p?(p=1/p,t[0]=c*p,t[1]=(-u*e+n*l)*p,t[2]=(o*e-n*h)*p,t[3]=f*p,t[4]=(u*i-n*a)*p,t[5]=(-o*i+n*r)*p,t[6]=d*p,t[7]=(-l*i+e*a)*p,t[8]=(h*i-e*r)*p,t):null},mt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8];return t[0]=h*u-o*l,t[1]=n*l-e*u,t[2]=e*o-n*h,t[3]=o*a-r*u,t[4]=i*u-n*a,t[5]=n*r-i*o,t[6]=r*l-h*a,t[7]=e*a-i*l,t[8]=i*h-e*r,t},gt=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8];return s*(l*r-h*a)+i*(-l*n+h*o)+e*(a*n-r*o)},yt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1],p=i[2],m=i[3],g=i[4],y=i[5],w=i[6],S=i[7],v=i[8];return t[0]=f*e+d*h+p*l,t[1]=f*n+d*o+p*u,t[2]=f*r+d*a+p*c,t[3]=m*e+g*h+y*l,t[4]=m*n+g*o+y*u,t[5]=m*r+g*a+y*c,t[6]=w*e+S*h+v*l,t[7]=w*n+S*o+v*u,t[8]=w*r+S*a+v*c,t},wt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=f*e+d*h+l,t[7]=f*n+d*o+u,t[8]=f*r+d*a+c,t},St=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=Math.sin(i),d=Math.cos(i);return t[0]=d*e+f*h,t[1]=d*n+f*o,t[2]=d*r+f*a,t[3]=d*h-f*e,t[4]=d*o-f*n,t[5]=d*a-f*r,t[6]=l,t[7]=u,t[8]=c,t},vt=function(t,s,i){var e=i[0],n=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=n*s[3],t[4]=n*s[4],t[5]=n*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},xt=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=-i,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Mt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Tt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Gt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,l=i*h,u=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[3]=u-y,t[6]=f+g,t[1]=u+y,t[4]=1-l-p,t[7]=d-m,t[2]=f-g,t[5]=d+m,t[8]=1-l-c,t},_t=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,S=i*a-n*h,v=i*l-r*h,b=e*a-n*o,x=e*l-r*o,M=n*l-r*a,T=u*m-c*p,G=u*g-f*p,_=u*y-d*p,C=c*g-f*m,I=c*y-d*m,E=f*y-d*g,P=w*E-S*I+v*C+b*_-x*G+M*T;return P?(P=1/P,t[0]=(o*E-a*I+l*C)*P,t[1]=(a*_-h*E-l*G)*P,t[2]=(h*I-o*_+l*T)*P,t[3]=(n*I-e*E-r*C)*P,t[4]=(i*E-n*_+r*G)*P,t[5]=(e*_-i*I-r*T)*P,t[6]=(m*M-g*x+y*b)*P,t[7]=(g*v-p*M-y*S)*P,t[8]=(p*x-m*v+y*w)*P,t):null},Ct=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},It=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Et=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Pt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},Rt=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},At=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Ft=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Ot=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},Dt=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=s[0],f=s[1],d=s[2],p=s[3],m=s[4],g=s[5],y=s[6],w=s[7],S=s[8];return Math.abs(i-c)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(e-f)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(n-d)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-p)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(h-m)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(o-g)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-y)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(l-w)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(u-S)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(S))},Lt=function(){var t=new ARRAY_TYPE(16);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},Nt=function(t){var s=new ARRAY_TYPE(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},kt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},Bt=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m){var g=new ARRAY_TYPE(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=n,g[5]=r,g[6]=h,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},$t=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},Wt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ut=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[3],r=s[6],h=s[7],o=s[11];t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=n,t[13]=h,t[14]=o}else t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15];return t},Vt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,S=i*a-n*h,v=i*l-r*h,b=e*a-n*o,x=e*l-r*o,M=n*l-r*a,T=u*m-c*p,G=u*g-f*p,_=u*y-d*p,C=c*g-f*m,I=c*y-d*m,E=f*y-d*g,P=w*E-S*I+v*C+b*_-x*G+M*T;return P?(P=1/P,t[0]=(o*E-a*I+l*C)*P,t[1]=(n*I-e*E-r*C)*P,t[2]=(m*M-g*x+y*b)*P,t[3]=(f*x-c*M-d*b)*P,t[4]=(a*_-h*E-l*G)*P,t[5]=(i*E-n*_+r*G)*P,t[6]=(g*v-p*M-y*S)*P,t[7]=(u*M-f*v+d*S)*P,t[8]=(h*I-o*_+l*T)*P,t[9]=(e*_-i*I-r*T)*P,t[10]=(p*x-m*v+y*w)*P,t[11]=(c*v-u*x-d*w)*P,t[12]=(o*G-h*C-a*T)*P,t[13]=(i*C-e*G+n*T)*P,t[14]=(m*S-p*b-g*w)*P,t[15]=(u*b-c*S+f*w)*P,t):null},zt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,S=i*a-n*h,v=i*l-r*h,b=e*a-n*o,x=e*l-r*o,M=n*l-r*a,T=u*m-c*p,G=u*g-f*p,_=u*y-d*p,C=c*g-f*m,I=c*y-d*m,E=f*y-d*g;return t[0]=o*E-a*I+l*C,t[1]=n*I-e*E-r*C,t[2]=m*M-g*x+y*b,t[3]=f*x-c*M-d*b,t[4]=a*_-h*E-l*G,t[5]=i*E-n*_+r*G,t[6]=g*v-p*M-y*S,t[7]=u*M-f*v+d*S,t[8]=h*I-o*_+l*T,t[9]=e*_-i*I-r*T,t[10]=p*x-m*v+y*w,t[11]=c*v-u*x-d*w,t[12]=o*G-h*C-a*T,t[13]=i*C-e*G+n*T,t[14]=m*S-p*b-g*w,t[15]=u*b-c*S+f*w,t},jt=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[9],c=t[10],f=t[11],d=t[12],p=t[13],m=t[14],g=s*h-i*r,y=s*o-e*r,w=i*o-e*h,S=l*p-u*d,v=l*m-c*d,b=u*m-c*p;return a*(s*b-i*v+e*S)-n*(r*b-h*v+o*S)+t[15]*(l*w-u*y+c*g)-f*(d*w-p*y+m*g)},qt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],w=s[15],S=i[0],v=i[1],b=i[2],x=i[3];return t[0]=S*e+v*o+b*c+x*m,t[1]=S*n+v*a+b*f+x*g,t[2]=S*r+v*l+b*d+x*y,t[3]=S*h+v*u+b*p+x*w,S=i[4],v=i[5],b=i[6],x=i[7],t[4]=S*e+v*o+b*c+x*m,t[5]=S*n+v*a+b*f+x*g,t[6]=S*r+v*l+b*d+x*y,t[7]=S*h+v*u+b*p+x*w,S=i[8],v=i[9],b=i[10],x=i[11],t[8]=S*e+v*o+b*c+x*m,t[9]=S*n+v*a+b*f+x*g,t[10]=S*r+v*l+b*d+x*y,t[11]=S*h+v*u+b*p+x*w,S=i[12],v=i[13],b=i[14],x=i[15],t[12]=S*e+v*o+b*c+x*m,t[13]=S*n+v*a+b*f+x*g,t[14]=S*r+v*l+b*d+x*y,t[15]=S*h+v*u+b*p+x*w,t},Ht=function(t,s,i){var e,n,r,h,o,a,l,u,c,f,d,p,m=i[0],g=i[1],y=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*y+s[12],t[13]=s[1]*m+s[5]*g+s[9]*y+s[13],t[14]=s[2]*m+s[6]*g+s[10]*y+s[14],t[15]=s[3]*m+s[7]*g+s[11]*y+s[15]):(e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*y+s[12],t[13]=n*m+a*g+f*y+s[13],t[14]=r*m+l*g+d*y+s[14],t[15]=h*m+u*g+p*y+s[15]),t},Jt=function(t,s,i){var e=i[0],n=i[1],r=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*n,t[5]=s[5]*n,t[6]=s[6]*n,t[7]=s[7]*n,t[8]=s[8]*r,t[9]=s[9]*r,t[10]=s[10]*r,t[11]=s[11]*r,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},Yt=function(t,s,i,e){var n,r,h,o,a,l,u,c,f,d,p,m,g,y,w,S,v,b,x,M,T,G,_,C,I=e[0],E=e[1],P=e[2],R=Math.hypot(I,E,P);return R<EPSILON?null:(I*=R=1/R,E*=R,P*=R,n=Math.sin(i),h=1-(r=Math.cos(i)),o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],f=s[5],d=s[6],p=s[7],m=s[8],g=s[9],y=s[10],w=s[11],S=I*I*h+r,v=E*I*h+P*n,b=P*I*h-E*n,x=I*E*h-P*n,M=E*E*h+r,T=P*E*h+I*n,G=I*P*h+E*n,_=E*P*h-I*n,C=P*P*h+r,t[0]=o*S+c*v+m*b,t[1]=a*S+f*v+g*b,t[2]=l*S+d*v+y*b,t[3]=u*S+p*v+w*b,t[4]=o*x+c*M+m*T,t[5]=a*x+f*M+g*T,t[6]=l*x+d*M+y*T,t[7]=u*x+p*M+w*T,t[8]=o*G+c*_+m*C,t[9]=a*G+f*_+g*C,t[10]=l*G+d*_+y*C,t[11]=u*G+p*_+w*C,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},Xt=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[4],h=s[5],o=s[6],a=s[7],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=r*n+l*e,t[5]=h*n+u*e,t[6]=o*n+c*e,t[7]=a*n+f*e,t[8]=l*n-r*e,t[9]=u*n-h*e,t[10]=c*n-o*e,t[11]=f*n-a*e,t},Zt=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n-l*e,t[1]=h*n-u*e,t[2]=o*n-c*e,t[3]=a*n-f*e,t[8]=r*e+l*n,t[9]=h*e+u*n,t[10]=o*e+c*n,t[11]=a*e+f*n,t},Kt=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],l=s[4],u=s[5],c=s[6],f=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n+l*e,t[1]=h*n+u*e,t[2]=o*n+c*e,t[3]=a*n+f*e,t[4]=l*n-r*e,t[5]=u*n-h*e,t[6]=c*n-o*e,t[7]=f*n-a*e,t},Qt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ts=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ss=function(t,s,i){var e,n,r,h=i[0],o=i[1],a=i[2],l=Math.hypot(h,o,a);return l<EPSILON?null:(h*=l=1/l,o*=l,a*=l,e=Math.sin(s),r=1-(n=Math.cos(s)),t[0]=h*h*r+n,t[1]=o*h*r+a*e,t[2]=a*h*r-o*e,t[3]=0,t[4]=h*o*r-a*e,t[5]=o*o*r+n,t[6]=a*o*r+h*e,t[7]=0,t[8]=h*a*r+o*e,t[9]=o*a*r-h*e,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},is=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},es=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ns=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rs=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=e+e,a=n+n,l=r+r,u=e*o,c=e*a,f=e*l,d=n*a,p=n*l,m=r*l,g=h*o,y=h*a,w=h*l;return t[0]=1-(d+m),t[1]=c+w,t[2]=f-y,t[3]=0,t[4]=c-w,t[5]=1-(u+m),t[6]=p+g,t[7]=0,t[8]=f+y,t[9]=p-g,t[10]=1-(u+d),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},hs=function(t,s){var i=new ARRAY_TYPE(3),e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=e*e+n*n+r*r+h*h;return c>0?(i[0]=2*(o*h+u*e+a*r-l*n)/c,i[1]=2*(a*h+u*n+l*e-o*r)/c,i[2]=2*(l*h+u*r+o*n-a*e)/c):(i[0]=2*(o*h+u*e+a*r-l*n),i[1]=2*(a*h+u*n+l*e-o*r),i[2]=2*(l*h+u*r+o*n-a*e)),rs(t,s,i),t},os=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},as=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[4],h=s[5],o=s[6],a=s[8],l=s[9],u=s[10];return t[0]=Math.hypot(i,e,n),t[1]=Math.hypot(r,h,o),t[2]=Math.hypot(a,l,u),t},ls=function(t,s){var i=new ARRAY_TYPE(3);as(i,s);var e=1/i[0],n=1/i[1],r=1/i[2],h=s[0]*e,o=s[1]*n,a=s[2]*r,l=s[4]*e,u=s[5]*n,c=s[6]*r,f=s[8]*e,d=s[9]*n,p=s[10]*r,m=h+u+p,g=0;return m>0?(g=2*Math.sqrt(m+1),t[3]=.25*g,t[0]=(c-d)/g,t[1]=(f-a)/g,t[2]=(o-l)/g):h>u&&h>p?(g=2*Math.sqrt(1+h-u-p),t[3]=(c-d)/g,t[0]=.25*g,t[1]=(o+l)/g,t[2]=(f+a)/g):u>p?(g=2*Math.sqrt(1+u-h-p),t[3]=(f-a)/g,t[0]=(o+l)/g,t[1]=.25*g,t[2]=(c+d)/g):(g=2*Math.sqrt(1+p-h-u),t[3]=(o-l)/g,t[0]=(f+a)/g,t[1]=(c+d)/g,t[2]=.25*g),t},us=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var n=e[0],r=e[1],h=e[2],o=e[4],a=e[5],l=e[6],u=e[8],c=e[9],f=e[10];i[0]=Math.hypot(n,r,h),i[1]=Math.hypot(o,a,l),i[2]=Math.hypot(u,c,f);var d=1/i[0],p=1/i[1],m=1/i[2],g=n*d,y=r*p,w=h*m,S=o*d,v=a*p,b=l*m,x=u*d,M=c*p,T=f*m,G=g+v+T,_=0;return G>0?(_=2*Math.sqrt(G+1),t[3]=.25*_,t[0]=(b-M)/_,t[1]=(x-w)/_,t[2]=(y-S)/_):g>v&&g>T?(_=2*Math.sqrt(1+g-v-T),t[3]=(b-M)/_,t[0]=.25*_,t[1]=(y+S)/_,t[2]=(x+w)/_):v>T?(_=2*Math.sqrt(1+v-g-T),t[3]=(x-w)/_,t[0]=(y+S)/_,t[1]=.25*_,t[2]=(b+M)/_):(_=2*Math.sqrt(1+T-g-v),t[3]=(y-S)/_,t[0]=(x+w)/_,t[1]=(b+M)/_,t[2]=.25*_),t},cs=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3],a=n+n,l=r+r,u=h+h,c=n*a,f=n*l,d=n*u,p=r*l,m=r*u,g=h*u,y=o*a,w=o*l,S=o*u,v=e[0],b=e[1],x=e[2];return t[0]=(1-(p+g))*v,t[1]=(f+S)*v,t[2]=(d-w)*v,t[3]=0,t[4]=(f-S)*b,t[5]=(1-(c+g))*b,t[6]=(m+y)*b,t[7]=0,t[8]=(d+w)*x,t[9]=(m-y)*x,t[10]=(1-(c+p))*x,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},fs=function(t,s,i,e,n){var r=s[0],h=s[1],o=s[2],a=s[3],l=r+r,u=h+h,c=o+o,f=r*l,d=r*u,p=r*c,m=h*u,g=h*c,y=o*c,w=a*l,S=a*u,v=a*c,b=e[0],x=e[1],M=e[2],T=n[0],G=n[1],_=n[2],C=(1-(m+y))*b,I=(d+v)*b,E=(p-S)*b,P=(d-v)*x,R=(1-(f+y))*x,A=(g+w)*x,F=(p+S)*M,O=(g-w)*M,D=(1-(f+m))*M;return t[0]=C,t[1]=I,t[2]=E,t[3]=0,t[4]=P,t[5]=R,t[6]=A,t[7]=0,t[8]=F,t[9]=O,t[10]=D,t[11]=0,t[12]=i[0]+T-(C*T+P*G+F*_),t[13]=i[1]+G-(I*T+R*G+O*_),t[14]=i[2]+_-(E*T+A*G+D*_),t[15]=1,t},ds=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,l=i*h,u=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[1]=u+y,t[2]=f-g,t[3]=0,t[4]=u-y,t[5]=1-l-p,t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ps=function(t,s,i,e,n,r,h){var o=1/(i-s),a=1/(n-e),l=1/(r-h);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(n+e)*a,t[10]=(h+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*r*2*l,t[15]=0,t},ms=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=(n+e)*h,t[14]=2*n*e*h}else t[10]=-1,t[14]=-2*e;return t},gs=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=n*h,t[14]=n*e*h}else t[10]=-1,t[14]=-e;return t},ys=function(t,s,i,e){var n=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),h=Math.tan(s.leftDegrees*Math.PI/180),o=Math.tan(s.rightDegrees*Math.PI/180),a=2/(h+o),l=2/(n+r);return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(h-o)*a*.5,t[9]=(n-r)*l*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},ws=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=(h+r)*l,t[15]=1,t},Ss=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=r*l,t[15]=1,t},vs=function(t,s,i,e){var n,r,h,o,a,l,u,c,f,d,p=s[0],m=s[1],g=s[2],y=e[0],w=e[1],S=e[2],v=i[0],b=i[1],x=i[2];return Math.abs(p-v)<EPSILON&&Math.abs(m-b)<EPSILON&&Math.abs(g-x)<EPSILON?Wt(t):(u=p-v,c=m-b,f=g-x,n=w*(f*=d=1/Math.hypot(u,c,f))-S*(c*=d),r=S*(u*=d)-y*f,h=y*c-w*u,(d=Math.hypot(n,r,h))?(n*=d=1/d,r*=d,h*=d):(n=0,r=0,h=0),o=c*h-f*r,a=f*n-u*h,l=u*r-c*n,(d=Math.hypot(o,a,l))?(o*=d=1/d,a*=d,l*=d):(o=0,a=0,l=0),t[0]=n,t[1]=o,t[2]=u,t[3]=0,t[4]=r,t[5]=a,t[6]=c,t[7]=0,t[8]=h,t[9]=l,t[10]=f,t[11]=0,t[12]=-(n*p+r*m+h*g),t[13]=-(o*p+a*m+l*g),t[14]=-(u*p+c*m+f*g),t[15]=1,t)},bs=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=e[0],a=e[1],l=e[2],u=n-i[0],c=r-i[1],f=h-i[2],d=u*u+c*c+f*f;d>0&&(u*=d=1/Math.sqrt(d),c*=d,f*=d);var p=a*f-l*c,m=l*u-o*f,g=o*c-a*u;return(d=p*p+m*m+g*g)>0&&(p*=d=1/Math.sqrt(d),m*=d,g*=d),t[0]=p,t[1]=m,t[2]=g,t[3]=0,t[4]=c*g-f*m,t[5]=f*p-u*g,t[6]=u*m-c*p,t[7]=0,t[8]=u,t[9]=c,t[10]=f,t[11]=0,t[12]=n,t[13]=r,t[14]=h,t[15]=1,t},xs=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Ms=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Ts=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Gs=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},_s=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Cs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},Is=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Es=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],y=t[15],w=s[0],S=s[1],v=s[2],b=s[3],x=s[4],M=s[5],T=s[6],G=s[7],_=s[8],C=s[9],I=s[10],E=s[11],P=s[12],R=s[13],A=s[14],F=s[15];return Math.abs(i-w)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(e-S)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(S))&&Math.abs(n-v)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-b)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(h-x)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(o-M)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(a-T)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(l-G)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(u-_)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(c-C)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(f-I)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-E)<=EPSILON*Math.max(1,Math.abs(d),Math.abs(E))&&Math.abs(p-P)<=EPSILON*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(m-R)<=EPSILON*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(g-A)<=EPSILON*Math.max(1,Math.abs(g),Math.abs(A))&&Math.abs(y-F)<=EPSILON*Math.max(1,Math.abs(y),Math.abs(F))},Ps=function(){var t=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},Rs=function(t){var s=new ARRAY_TYPE(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},As=function(t){var s=t[0],i=t[1],e=t[2];return Math.hypot(s,i,e)},Fs=function(t,s,i){var e=new ARRAY_TYPE(3);return e[0]=t,e[1]=s,e[2]=i,e},Os=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Ds=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},Ls=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Ns=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},ks=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},Bs=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},$s=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Ws=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Us=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Vs=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},zs=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},js=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},qs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},Hs=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return Math.hypot(i,e,n)},Js=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return i*i+e*e+n*n},Ys=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e},Xs=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},Zs=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},Ks=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*i+e*e+n*n;return r>0&&(r=1/Math.sqrt(r)),t[0]=s[0]*r,t[1]=s[1]*r,t[2]=s[2]*r,t},Qs=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},ti=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2];return t[0]=n*a-r*o,t[1]=r*h-e*a,t[2]=e*o-n*h,t},si=function(t,s,i,e){var n=s[0],r=s[1],h=s[2];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t},ii=function(t,s,i,e){var n=Math.acos(Math.min(Math.max(Qs(s,i),-1),1)),r=Math.sin(n),h=Math.sin((1-e)*n)/r,o=Math.sin(e*n)/r;return t[0]=h*s[0]+o*i[0],t[1]=h*s[1]+o*i[1],t[2]=h*s[2]+o*i[2],t},ei=function(t,s,i,e,n,r){var h=r*r,o=h*(2*r-3)+1,a=h*(r-2)+r,l=h*(r-1),u=h*(3-2*r);return t[0]=s[0]*o+i[0]*a+e[0]*l+n[0]*u,t[1]=s[1]*o+i[1]*a+e[1]*l+n[1]*u,t[2]=s[2]*o+i[2]*a+e[2]*l+n[2]*u,t},ni=function(t,s,i,e,n,r){var h=1-r,o=h*h,a=r*r,l=o*h,u=3*r*o,c=3*a*h,f=a*r;return t[0]=s[0]*l+i[0]*u+e[0]*c+n[0]*f,t[1]=s[1]*l+i[1]*u+e[1]*c+n[1]*f,t[2]=s[2]*l+i[2]*u+e[2]*c+n[2]*f,t},ri=function(t,s){s=s||1;var i=2*RANDOM()*Math.PI,e=2*RANDOM()-1,n=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*n,t[1]=Math.sin(i)*n,t[2]=e*s,t},hi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[3]*e+i[7]*n+i[11]*r+i[15];return h=h||1,t[0]=(i[0]*e+i[4]*n+i[8]*r+i[12])/h,t[1]=(i[1]*e+i[5]*n+i[9]*r+i[13])/h,t[2]=(i[2]*e+i[6]*n+i[10]*r+i[14])/h,t},oi=function(t,s,i){var e=s[0],n=s[1],r=s[2];return t[0]=e*i[0]+n*i[3]+r*i[6],t[1]=e*i[1]+n*i[4]+r*i[7],t[2]=e*i[2]+n*i[5]+r*i[8],t},ai=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],l=s[2],u=n*l-r*a,c=r*o-e*l,f=e*a-n*o,d=n*f-r*c,p=r*u-e*f,m=e*c-n*u,g=2*h;return u*=g,c*=g,f*=g,d*=2,p*=2,m*=2,t[0]=o+u+d,t[1]=a+c+p,t[2]=l+f+m,t},li=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0],r[1]=n[1]*Math.cos(e)-n[2]*Math.sin(e),r[2]=n[1]*Math.sin(e)+n[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},ui=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[2]*Math.sin(e)+n[0]*Math.cos(e),r[1]=n[1],r[2]=n[2]*Math.cos(e)-n[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},ci=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0]*Math.cos(e)-n[1]*Math.sin(e),r[1]=n[0]*Math.sin(e)+n[1]*Math.cos(e),r[2]=n[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},fi=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2],a=Math.sqrt((i*i+e*e+n*n)*(r*r+h*h+o*o)),l=a&&Qs(t,s)/a;return Math.acos(Math.min(Math.max(l,-1),1))},di=function(t){return t[0]=0,t[1]=0,t[2]=0,t},pi=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},mi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},gi=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2];return Math.abs(i-r)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-h)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-o)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(o))},yi=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},wi=function(t){var s=new ARRAY_TYPE(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Si=function(t,s,i,e){var n=new ARRAY_TYPE(4);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n},vi=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},bi=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},xi=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Mi=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Ti=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Gi=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},_i=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ci=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Ii=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Ei=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Pi=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Ri=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Ai=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Fi=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return Math.hypot(i,e,n,r)},Oi=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return i*i+e*e+n*n+r*r},Di=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return Math.hypot(s,i,e,n)},Li=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return s*s+i*i+e*e+n*n},Ni=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},ki=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Bi=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r;return h>0&&(h=1/Math.sqrt(h)),t[0]=i*h,t[1]=e*h,t[2]=n*h,t[3]=r*h,t},$i=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Wi=function(t,s,i,e){var n=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],h=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],l=i[2]*e[3]-i[3]*e[2],u=s[0],c=s[1],f=s[2],d=s[3];return t[0]=c*l-f*a+d*o,t[1]=-u*l+f*h-d*r,t[2]=u*a-c*h+d*n,t[3]=-u*o+c*r-f*n,t},Ui=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t[3]=o+e*(i[3]-o),t},Vi=function(t,s){var i,e,n,r,h,o;s=s||1;do{h=(i=2*RANDOM()-1)*i+(e=2*RANDOM()-1)*e}while(h>=1);do{o=(n=2*RANDOM()-1)*n+(r=2*RANDOM()-1)*r}while(o>=1);var a=Math.sqrt((1-h)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*n*a,t[3]=s*r*a,t},zi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3];return t[0]=i[0]*e+i[4]*n+i[8]*r+i[12]*h,t[1]=i[1]*e+i[5]*n+i[9]*r+i[13]*h,t[2]=i[2]*e+i[6]*n+i[10]*r+i[14]*h,t[3]=i[3]*e+i[7]*n+i[11]*r+i[15]*h,t},ji=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2],l=i[3],u=l*e+o*r-a*n,c=l*n+a*e-h*r,f=l*r+h*n-o*e,d=-h*e-o*n-a*r;return t[0]=u*l+d*-h+c*-a-f*-o,t[1]=c*l+d*-o+f*-h-u*-a,t[2]=f*l+d*-a+u*-o-c*-h,t[3]=s[3],t},qi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},Hi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Ji=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Yi=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=s[0],o=s[1],a=s[2],l=s[3];return Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-o)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(l))},Xi=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Zi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},Ki=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},Qi=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return e>EPSILON?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){var i=dot$2(t,s);return Math.acos(2*i*i-1)},se=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-e*l,t[2]=r*u+h*l+e*a-n*o,t[3]=h*u-e*o-n*a-r*l,t},ie=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+h*o,t[1]=n*a+r*o,t[2]=r*a-n*o,t[3]=h*a-e*o,t},ee=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a-r*o,t[1]=n*a+h*o,t[2]=r*a+e*o,t[3]=h*a-n*o,t},ne=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+n*o,t[1]=n*a-e*o,t[2]=r*a+h*o,t[3]=h*a-r*o,t},re=function(t,s){var i=s[0],e=s[1],n=s[2];return t[0]=i,t[1]=e,t[2]=n,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-n*n)),t},he=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=Math.exp(r),a=h>0?o*Math.sin(h)/h:0;return t[0]=i*a,t[1]=e*a,t[2]=n*a,t[3]=o*Math.cos(h),t},oe=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=h>0?Math.atan2(h,r)/h:0;return t[0]=i*o,t[1]=e*o,t[2]=n*o,t[3]=.5*Math.log(i*i+e*e+n*n+r*r),t},ae=function(t,s,i){return oe(t,s),scale$2(t,t,i),he(t,t),t},le=function(t,s,i,e){var n,r,h,o,a,l=s[0],u=s[1],c=s[2],f=s[3],d=i[0],p=i[1],m=i[2],g=i[3];return(r=l*d+u*p+c*m+f*g)<0&&(r=-r,d=-d,p=-p,m=-m,g=-g),1-r>EPSILON?(n=Math.acos(r),h=Math.sin(n),o=Math.sin((1-e)*n)/h,a=Math.sin(e*n)/h):(o=1-e,a=e),t[0]=o*l+a*d,t[1]=o*u+a*p,t[2]=o*c+a*m,t[3]=o*f+a*g,t},ue=function(t){var s=RANDOM(),i=RANDOM(),e=RANDOM(),n=Math.sqrt(1-s),r=Math.sqrt(s);return t[0]=n*Math.sin(2*Math.PI*i),t[1]=n*Math.cos(2*Math.PI*i),t[2]=r*Math.sin(2*Math.PI*e),t[3]=r*Math.cos(2*Math.PI*e),t},ce=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r,o=h?1/h:0;return t[0]=-i*o,t[1]=-e*o,t[2]=-n*o,t[3]=r*o,t},fe=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},de=function(t,s){var i,e=s[0]+s[4]+s[8];if(e>0)i=Math.sqrt(e+1),t[3]=.5*i,i=.5/i,t[0]=(s[5]-s[7])*i,t[1]=(s[6]-s[2])*i,t[2]=(s[1]-s[3])*i;else{var n=0;s[4]>s[0]&&(n=1),s[8]>s[3*n+n]&&(n=2);var r=(n+1)%3,h=(n+2)%3;i=Math.sqrt(s[3*n+n]-s[3*r+r]-s[3*h+h]+1),t[n]=.5*i,i=.5/i,t[3]=(s[3*r+h]-s[3*h+r])*i,t[r]=(s[3*r+n]+s[3*n+r])*i,t[h]=(s[3*h+n]+s[3*n+h])*i}return t},pe=function(t,s,i,e){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ANGLE_ORDER,r=Math.PI/360;s*=r,e*=r,i*=r;var h=Math.sin(s),o=Math.cos(s),a=Math.sin(i),l=Math.cos(i),u=Math.sin(e),c=Math.cos(e);switch(n){case"xyz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"xzy":t[0]=h*l*c-o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c+h*a*u;break;case"yxz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;case"yzx":t[0]=h*l*c+o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c-h*a*u;break;case"zxy":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"zyx":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;default:throw new Error("Unknown angle order "+n)}return t},me=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},ge=function(t,s){return Math.abs($i(t,s))>=1-EPSILON},ye=function(){var t=new ARRAY_TYPE(8);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},we=function(t){var s=new ARRAY_TYPE(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},Se=function(t,s,i,e,n,r,h,o){var a=new ARRAY_TYPE(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=n,a[5]=r,a[6]=h,a[7]=o,a},ve=function(t,s,i,e,n,r,h){var o=new ARRAY_TYPE(8);o[0]=t,o[1]=s,o[2]=i,o[3]=e;var a=.5*n,l=.5*r,u=.5*h;return o[4]=a*e+l*i-u*s,o[5]=l*e+u*t-a*i,o[6]=u*e+a*s-l*t,o[7]=-a*t-l*s-u*i,o},be=function(t,s,i){var e=.5*i[0],n=.5*i[1],r=.5*i[2],h=s[0],o=s[1],a=s[2],l=s[3];return t[0]=h,t[1]=o,t[2]=a,t[3]=l,t[4]=e*l+n*a-r*o,t[5]=n*l+r*h-e*a,t[6]=r*l+e*o-n*h,t[7]=-e*h-n*o-r*a,t},xe=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},Me=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Te=function(t,s){var i=Xi();ls(i,s);var e=new ARRAY_TYPE(3);return os(e,s),be(t,i,e),t},Ge=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},_e=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Ce=function(t,s,i,e,n,r,h,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t},Ie=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},Ee=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Pe=function(t,s){var i=s[4],e=s[5],n=s[6],r=s[7],h=-s[0],o=-s[1],a=-s[2],l=s[3];return t[0]=2*(i*l+r*h+e*a-n*o),t[1]=2*(e*l+r*o+n*h-i*a),t[2]=2*(n*l+r*a+i*o-e*h),t},Re=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=.5*i[0],a=.5*i[1],l=.5*i[2],u=s[4],c=s[5],f=s[6],d=s[7];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=h*o+n*l-r*a+u,t[5]=h*a+r*o-e*l+c,t[6]=h*l+e*a-n*o+f,t[7]=-e*o-n*a-r*l+d,t},Ae=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return ie(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Fe=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return ee(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Oe=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return ne(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},De=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],l=s[2],u=s[3];return t[0]=o*h+u*e+a*r-l*n,t[1]=a*h+u*n+l*e-o*r,t[2]=l*h+u*r+o*n-a*e,t[3]=u*h-o*e-a*n-l*r,o=s[4],a=s[5],l=s[6],u=s[7],t[4]=o*h+u*e+a*r-l*n,t[5]=a*h+u*n+l*e-o*r,t[6]=l*h+u*r+o*n-a*e,t[7]=u*h-o*e-a*n-l*r,t},Le=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-e*l,t[2]=r*u+h*l+e*a-n*o,t[3]=h*u-e*o-n*a-r*l,o=i[4],a=i[5],l=i[6],u=i[7],t[4]=e*u+h*o+n*l-r*a,t[5]=n*u+h*a+r*o-e*l,t[6]=r*u+h*l+e*a-n*o,t[7]=h*u-e*o-n*a-r*l,t},Ne=function(t,s,i,e){if(Math.abs(e)<EPSILON)return Ge(t,s);var n=Math.hypot(i[0],i[1],i[2]);e*=.5;var r=Math.sin(e),h=r*i[0]/n,o=r*i[1]/n,a=r*i[2]/n,l=Math.cos(e),u=s[0],c=s[1],f=s[2],d=s[3];t[0]=u*l+d*h+c*a-f*o,t[1]=c*l+d*o+f*h-u*a,t[2]=f*l+d*a+u*o-c*h,t[3]=d*l-u*h-c*o-f*a;var p=s[4],m=s[5],g=s[6],y=s[7];return t[4]=p*l+y*h+m*a-g*o,t[5]=m*l+y*o+g*h-p*a,t[6]=g*l+y*a+p*o-m*h,t[7]=y*l-p*h-m*o-g*a,t},ke=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},Be=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],p=s[7],m=i[0],g=i[1],y=i[2],w=i[3];return t[0]=e*w+h*m+n*y-r*g,t[1]=n*w+h*g+r*m-e*y,t[2]=r*w+h*y+e*g-n*m,t[3]=h*w-e*m-n*g-r*y,t[4]=e*u+h*o+n*l-r*a+c*w+p*m+f*y-d*g,t[5]=n*u+h*a+r*o-e*l+f*w+p*g+d*m-c*y,t[6]=r*u+h*l+e*a-n*o+d*w+p*y+c*g-f*m,t[7]=h*u-e*o-n*a-r*l+p*w-c*m-f*g-d*y,t},$e=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},We=function(t,s,i,e){var n=1-e;return dot$1(s,i)<0&&(e=-e),t[0]=s[0]*n+i[0]*e,t[1]=s[1]*n+i[1]*e,t[2]=s[2]*n+i[2]*e,t[3]=s[3]*n+i[3]*e,t[4]=s[4]*n+i[4]*e,t[5]=s[5]*n+i[5]*e,t[6]=s[6]*n+i[6]*e,t[7]=s[7]*n+i[7]*e,t},Ue=function(t,s){var i=squaredLength$1(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},Ve=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},ze=function(t,s){var i=squaredLength$1(s);if(i>0){i=Math.sqrt(i);var e=s[0]/i,n=s[1]/i,r=s[2]/i,h=s[3]/i,o=s[4],a=s[5],l=s[6],u=s[7],c=e*o+n*a+r*l+h*u;t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=(o-e*c)/i,t[5]=(a-n*c)/i,t[6]=(l-r*c)/i,t[7]=(u-h*c)/i}return t},je=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},qe=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},He=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7];return Math.abs(i-u)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-c)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(n-f)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(h-p)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(y))},Je=function(){var t=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t},Ye=function(t){var s=new ARRAY_TYPE(2);return s[0]=t[0],s[1]=t[1],s},Xe=function(t,s){var i=new ARRAY_TYPE(2);return i[0]=t,i[1]=s,i},Ze=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ke=function(t,s,i){return t[0]=s,t[1]=i,t},Qe=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},tn=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},sn=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},en=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},nn=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},rn=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},hn=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},on=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},an=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},un=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},cn=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},fn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return Math.hypot(i,e)},dn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},pn=function(t){var s=t[0],i=t[1];return Math.hypot(s,i)},mn=function(t){var s=t[0],i=t[1];return s*s+i*i},gn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},yn=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},wn=function(t,s){var i=s[0],e=s[1],n=i*i+e*e;return n>0&&(n=1/Math.sqrt(n)),t[0]=s[0]*n,t[1]=s[1]*n,t},Sn=function(t,s){return t[0]*s[0]+t[1]*s[1]},vn=function(t,s,i){var e=s[0]*i[1]-s[1]*i[0];return t[0]=t[1]=0,t[2]=e,t},bn=function(t,s,i,e){var n=s[0],r=s[1];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t},xn=function(t,s){s=s||1;var i=2*RANDOM()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},Mn=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n,t[1]=i[1]*e+i[3]*n,t},Tn=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n+i[4],t[1]=i[1]*e+i[3]*n+i[5],t},Gn=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[3]*n+i[6],t[1]=i[1]*e+i[4]*n+i[7],t},_n=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[4]*n+i[12],t[1]=i[1]*e+i[5]*n+i[13],t},Cn=function(t,s,i,e){var n=s[0]-i[0],r=s[1]-i[1],h=Math.sin(e),o=Math.cos(e);return t[0]=n*o-r*h+i[0],t[1]=n*h+r*o+i[1],t},In=function(t,s){var i=t[0],e=t[1],n=s[0],r=s[1],h=Math.sqrt((i*i+e*e)*(n*n+r*r)),o=h&&(i*n+e*r)/h;return Math.acos(Math.min(Math.max(o,-1),1))},En=function(t){return t[0]=0,t[1]=0,t},Pn=function(t){return"vec2("+t[0]+", "+t[1]+")"},Rn=function(t,s){return t[0]===s[0]&&t[1]===s[1]},An=function(t,s){var i=t[0],e=t[1],n=s[0],r=s[1];return Math.abs(i-n)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(e-r)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(r))};setMatrixArrayType=e,toRadian=n,equals$9=h,create$8=u,clone$8=p,copy$8=m,identity$5=g,fromValues$8=y,set$8=w,transpose$2=S,invert$5=v,adjoint$2=b,determinant$3=x,multiply$8=M,rotate$4=T,scale$8=G,fromRotation$4=_,fromScaling$3=C,str$8=I,frob$3=E,LDU=P,add$8=R,subtract$6=A,exactEquals$8=F,equals$8=O,multiplyScalar$3=D,multiplyScalarAndAdd$3=L,create$7=N,clone$7=k,copy$7=B,identity$4=$,fromValues$7=W,set$7=U,invert$4=V,determinant$2=z,multiply$7=j,rotate$3=q,scale$7=H,translate$3=J,fromRotation$3=Y,fromScaling$2=X,fromTranslation$3=Z,str$7=K,frob$2=Q,add$7=tt,subtract$5=st,multiplyScalar$2=it,multiplyScalarAndAdd$2=et,exactEquals$7=nt,equals$7=rt,create$6=ht,fromMat4$1=ot,clone$6=at,copy$6=lt,fromValues$6=ut,set$6=ct,identity$3=ft,transpose$1=dt,invert$3=pt,adjoint$1=mt,determinant$1=gt,multiply$6=yt,translate$2=wt,rotate$2=St,scale$6=vt,fromTranslation$2=bt,fromRotation$2=xt,fromScaling$1=Mt,fromMat2d=Tt,fromQuat$1=Gt,normalFromMat4=_t,projection=Ct,str$6=It,frob$1=Et,add$6=Pt,subtract$4=Rt,multiplyScalar$1=At,multiplyScalarAndAdd$1=Ft,exactEquals$6=Ot,equals$6=Dt,create$5=Lt,clone$5=Nt,copy$5=kt,fromValues$5=Bt,set$5=$t,identity$2=Wt,transpose=Ut,invert$2=Vt,adjoint=zt,determinant=jt,multiply$5=qt,translate$1=Ht,scale$5=Jt,rotate$1=Yt,rotateX$3=Xt,rotateY$3=Zt,rotateZ$3=Kt,fromTranslation$1=Qt,fromScaling=ts,fromRotation$1=ss,fromXRotation=is,fromYRotation=es,fromZRotation=ns,fromRotationTranslation$1=rs,fromQuat2=hs,getTranslation$1=os,getScaling=as,getRotation=ls,decompose=us,fromRotationTranslationScale=cs,fromRotationTranslationScaleOrigin=fs,fromQuat=ds,frustum=ps,perspectiveNO=ms,perspectiveZO=gs,perspectiveFromFieldOfView=ys,orthoNO=ws,orthoZO=Ss,lookAt=vs,targetTo=bs,str$5=xs,frob=Ms,add$5=Ts,subtract$3=Gs,multiplyScalar=_s,multiplyScalarAndAdd=Cs,exactEquals$5=Is,equals$5=Es,create$4=Ps,clone$4=Rs,length$4=As,fromValues$4=Fs,copy$4=Os,set$4=Ds,add$4=Ls,subtract$2=Ns,multiply$4=ks,divide$2=Bs,ceil$2=$s,floor$2=Ws,min$2=Us,max$2=Vs,round$2=zs,scale$4=js,scaleAndAdd$2=qs,distance$2=Hs,squaredDistance$2=Js,squaredLength$4=Ys,negate$2=Xs,inverse$2=Zs,normalize$4=Ks,dot$4=Qs,cross$2=ti,lerp$4=si,slerp$1=ii,hermite=ei,bezier=ni,random$3=ri,transformMat4$2=hi,transformMat3$1=oi,transformQuat$1=ai,rotateX$2=li,rotateY$2=ui,rotateZ$2=ci,angle$1=fi,zero$2=di,str$4=pi,exactEquals$4=mi,equals$4=gi,create$3=yi,clone$3=wi,fromValues$3=Si,copy$3=vi,set$3=bi,add$3=xi,subtract$1=Mi,multiply$3=Ti,divide$1=Gi,ceil$1=_i,floor$1=Ci,min$1=Ii,max$1=Ei,round$1=Pi,scale$3=Ri,scaleAndAdd$1=Ai,distance$1=Fi,squaredDistance$1=Oi,length$3=Di,squaredLength$3=Li,negate$1=Ni,inverse$1=ki,normalize$3=Bi,dot$3=$i,cross$1=Wi,lerp$3=Ui,random$2=Vi,transformMat4$1=zi,transformQuat=ji,zero$1=qi,str$3=Hi,exactEquals$3=Ji,equals$3=Yi,create$2=Xi,identity$1=Zi,setAxisAngle=Ki,getAxisAngle=Qi,getAngle=te,multiply$2=se,rotateX$1=ie,rotateY$1=ee,rotateZ$1=ne,calculateW=re,exp=he,ln=oe,pow=ae,slerp=le,random$1=ue,invert$1=ce,conjugate$1=fe,fromMat3=de,fromEuler=pe,str$2=me,equals$2=ge,create$1=ye,clone$1=we,fromValues$1=Se,fromRotationTranslationValues=ve,fromRotationTranslation=be,fromTranslation=xe,fromRotation=Me,fromMat4=Te,copy$1=Ge,identity=_e,set$1=Ce,getDual=Ie,setDual=Ee,getTranslation=Pe,translate=Re,rotateX=Ae,rotateY=Fe,rotateZ=Oe,rotateByQuatAppend=De,rotateByQuatPrepend=Le,rotateAroundAxis=Ne,add$1=ke,multiply$1=Be,scale$1=$e,lerp$1=We,invert=Ue,conjugate=Ve,normalize$1=ze,str$1=je,exactEquals$1=qe,equals$1=He,create=Je,clone=Ye,fromValues=Xe,copy=Ze,set=Ke,add=Qe,subtract=tn,multiply=sn,divide=en,ceil=nn,floor=rn,min=hn,max=on,round=an,scale=un,scaleAndAdd=cn,distance=fn,squaredDistance=dn,length=pn,squaredLength=mn,negate=gn,inverse=yn,normalize=wn,dot=Sn,cross=vn,lerp=bn,random=xn,transformMat2=Mn,transformMat2d=Tn,transformMat3=Gn,transformMat4=_n,rotate=Cn,angle=In,zero=En,str=Pn,exactEquals=Rn,equals=An,EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,RANDOM=Math.random,ANGLE_ORDER="zyx",degree=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),common={__proto__:null,EPSILON:EPSILON,get h(){return ARRAY_TYPE},o:RANDOM,l:ANGLE_ORDER,u:e,m:n,equals:h},mul$8=M,sub$6=A,mat2=Object.freeze({__proto__:null,create:u,clone:p,S:m,identity:g,v:y,set:w,M:S,T:v,G:b,_:x,multiply:M,rotate:T,scale:G,C:_,I:C,P:I,R:E,A:P,add:R,F:A,O:F,equals:O,D:D,L:L,mul:mul$8,sub:sub$6}),mul$7=j,sub$5=st,mat2d=Object.freeze({__proto__:null,create:N,clone:k,S:B,identity:$,v:W,set:U,T:V,_:z,multiply:j,rotate:q,scale:H,translate:J,C:Y,I:X,N:Z,P:K,R:Q,add:tt,F:st,D:it,L:et,O:nt,equals:rt,mul:mul$7,sub:sub$5}),mul$6=yt,sub$4=Rt,mat3=Object.freeze({__proto__:null,create:ht,B:ot,clone:at,S:lt,v:ut,set:ct,identity:ft,M:dt,T:pt,G:mt,_:gt,multiply:yt,translate:wt,rotate:St,scale:vt,N:bt,C:xt,I:Mt,$:Tt,W:Gt,U:_t,V:Ct,P:It,R:Et,add:Pt,F:Rt,D:At,L:Ft,O:Ot,equals:Dt,mul:mul$6,sub:sub$4}),perspective=ms,ortho=ws,mul$5=qt,sub$3=Gs,mat4=Object.freeze({__proto__:null,create:Lt,clone:Nt,S:kt,v:Bt,set:$t,identity:Wt,M:Ut,T:Vt,G:zt,_:jt,multiply:qt,translate:Ht,scale:Jt,rotate:Yt,j:Xt,H:Zt,J:Kt,N:Qt,I:ts,C:ss,Y:is,X:es,Z:ns,K:rs,tt:hs,st:os,it:as,et:ls,nt:us,rt:cs,ht:fs,W:ds,ot:ps,lt:ms,perspective:perspective,ut:gs,ct:ys,ft:ws,dt:ortho,gt:Ss,yt:vs,wt:bs,P:xs,R:Ms,add:Ts,F:Gs,D:_s,L:Cs,O:Is,equals:Es,mul:mul$5,sub:sub$3}),sub$2=Ns,mul$4=ks,div$2=Bs,dist$2=Hs,sqrDist$2=Js,len$4=As,sqrLen$4=Ys,t=Ps(),forEach$2=function(s,i,e,n,r,h){var o,a;for(i||(i=3),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2];return s},vec3=Object.freeze({__proto__:null,create:Ps,clone:Rs,length:As,v:Fs,S:Os,set:Ds,add:Ls,F:Ns,multiply:ks,St:Bs,ceil:$s,floor:Ws,min:Us,max:Vs,round:zs,scale:js,vt:qs,bt:Hs,xt:Js,Mt:Ys,Tt:Xs,inverse:Zs,normalize:Ks,Gt:Qs,_t:ti,Ct:si,It:ii,Et:ei,Pt:ni,random:ri,Rt:hi,At:oi,Ft:ai,j:li,H:ui,J:ci,angle:fi,Ot:di,P:pi,O:mi,equals:gi,sub:sub$2,mul:mul$4,div:div$2,Dt:dist$2,Lt:sqrDist$2,Nt:len$4,kt:sqrLen$4,forEach:forEach$2}),sub$1=Mi,mul$3=Ti,div$1=Gi,dist$1=Fi,sqrDist$1=Oi,len$3=Di,sqrLen$3=Li,forEach$1=function(){var t=yi();return function(s,i,e,n,r,h){var o,a;for(i||(i=4),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],t[3]=s[o+3],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2],s[o+3]=t[3];return s}}(),vec4=Object.freeze({__proto__:null,create:yi,clone:wi,v:Si,S:vi,set:bi,add:xi,F:Mi,multiply:Ti,St:Gi,ceil:_i,floor:Ci,min:Ii,max:Ei,round:Pi,scale:Ri,vt:Ai,bt:Fi,xt:Oi,length:Di,Mt:Li,Tt:Ni,inverse:ki,normalize:Bi,Gt:$i,_t:Wi,Ct:Ui,random:Vi,Rt:zi,Ft:ji,Ot:qi,P:Hi,O:Ji,equals:Yi,sub:sub$1,mul:mul$3,div:div$1,Dt:dist$1,Lt:sqrDist$1,Nt:len$3,kt:sqrLen$3,forEach:forEach$1}),clone$2=wi,fromValues$2=Si,copy$2=vi,set$2=bi,add$2=xi,mul$2=se,scale$2=Ri,dot$2=$i,lerp$2=Ui,length$2=Di,len$2=length$2,squaredLength$2=Li,sqrLen$2=squaredLength$2,normalize$2=Bi,exactEquals$2=Ji,rotationTo=function(){var t=Ps(),s=Fs(1,0,0),i=Fs(0,1,0);return function(e,n,r){var h=Qs(n,r);return h<-.999999?(ti(t,s,n),len$4(t)<1e-6&&ti(t,i,n),Ks(t,t),Ki(e,t,Math.PI),e):h>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(ti(t,n,r),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1+h,normalize$2(e,e))}}(),sqlerp=function(){var t=Xi(),s=Xi();return function(i,e,n,r,h,o){return le(t,e,h,o),le(s,n,r,o),le(i,t,s,2*o*(1-o)),i}}(),setAxes=function(){var t=ht();return function(s,i,e,n){return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-i[0],t[5]=-i[1],t[8]=-i[2],normalize$2(s,de(s,t))}}(),quat=Object.freeze({__proto__:null,create:Xi,identity:Zi,Bt:Ki,$t:Qi,Wt:te,multiply:se,j:ie,H:ee,J:ne,Ut:re,exp:he,Vt:oe,pow:ae,It:le,random:ue,T:ce,zt:fe,jt:de,qt:pe,P:me,clone:clone$2,v:fromValues$2,S:copy$2,set:set$2,add:add$2,mul:mul$2,scale:scale$2,Gt:dot$2,Ct:lerp$2,length:length$2,Nt:len$2,Mt:squaredLength$2,kt:sqrLen$2,normalize:normalize$2,O:exactEquals$2,equals:ge,Ht:rotationTo,Jt:sqlerp,Yt:setAxes}),getReal=copy$2,setReal=copy$2,mul$1=Be,dot$1=dot$2,length$1=length$2,len$1=length$1,squaredLength$1=squaredLength$2,sqrLen$1=squaredLength$1,quat2=Object.freeze({__proto__:null,create:ye,clone:we,v:Se,Xt:ve,K:be,N:xe,C:Me,B:Te,S:Ge,identity:_e,set:Ce,Zt:getReal,Kt:Ie,Qt:setReal,ts:Ee,st:Pe,translate:Re,j:Ae,H:Fe,J:Oe,ss:De,es:Le,ns:Ne,add:ke,multiply:Be,mul:mul$1,scale:$e,Gt:dot$1,Ct:We,T:Ue,zt:Ve,length:length$1,Nt:len$1,Mt:squaredLength$1,kt:sqrLen$1,normalize:ze,P:je,O:qe,equals:He}),len=pn,sub=tn,mul=sn,div=en,dist=fn,sqrDist=dn,sqrLen=mn,forEach=function(){var t=Je();return function(s,i,e,n,r,h){var o,a;for(i||(i=2),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],r(t,t,h),s[o]=t[0],s[o+1]=t[1];return s}}(),vec2=Object.freeze({__proto__:null,create:Je,clone:Ye,v:Xe,S:Ze,set:Ke,add:Qe,F:tn,multiply:sn,St:en,ceil:nn,floor:rn,min:hn,max:on,round:an,scale:un,vt:cn,bt:fn,xt:dn,length:pn,Mt:mn,Tt:gn,inverse:yn,normalize:wn,Gt:Sn,_t:vn,Ct:bn,random:xn,rs:Mn,hs:Tn,At:Gn,Rt:_n,rotate:Cn,angle:In,Ot:En,P:Pn,O:Rn,equals:An,Nt:len,sub:sub,mul:mul,div:div,Dt:dist,Lt:sqrDist,kt:sqrLen,forEach:forEach}),globalThis.ls=common,globalThis.ls.us=mat2,globalThis.ls.cs=mat2d,globalThis.ls.fs=mat3,globalThis.ls.ds=mat4,globalThis.ls.ps=quat,globalThis.ls.gs=quat2,globalThis.ls.ys=vec2,globalThis.ls.ws=vec3,globalThis.ls.Ss=vec4}var t,EPSILON,ARRAY_TYPE,RANDOM,ANGLE_ORDER,degree,common,mul$8,sub$6,mat2,mul$7,sub$5,mat2d,mul$6,sub$4,mat3,perspective,ortho,mul$5,sub$3,mat4,sub$2,mul$4,div$2,dist$2,sqrDist$2,len$4,sqrLen$4,forEach$2,vec3,sub$1,mul$3,div$1,dist$1,sqrDist$1,len$3,sqrLen$3,forEach$1,vec4,clone$2,fromValues$2,copy$2,set$2,add$2,mul$2,scale$2,dot$2,lerp$2,length$2,len$2,squaredLength$2,sqrLen$2,normalize$2,exactEquals$2,rotationTo,sqlerp,setAxes,quat,getReal,setReal,mul$1,dot$1,length$1,len$1,squaredLength$1,sqrLen$1,quat2,len,sub,mul,div,dist,sqrDist,sqrLen,forEach,vec2,setMatrixArrayType,toRadian,equals$9,create$8,clone$8,copy$8,identity$5,fromValues$8,set$8,transpose$2,invert$5,adjoint$2,determinant$3,multiply$8,rotate$4,scale$8,fromRotation$4,fromScaling$3,str$8,frob$3,LDU,add$8,subtract$6,exactEquals$8,equals$8,multiplyScalar$3,multiplyScalarAndAdd$3,create$7,clone$7,copy$7,identity$4,fromValues$7,set$7,invert$4,determinant$2,multiply$7,rotate$3,scale$7,translate$3,fromRotation$3,fromScaling$2,fromTranslation$3,str$7,frob$2,add$7,subtract$5,multiplyScalar$2,multiplyScalarAndAdd$2,exactEquals$7,equals$7,create$6,fromMat4$1,clone$6,copy$6,fromValues$6,set$6,identity$3,transpose$1,invert$3,adjoint$1,determinant$1,multiply$6,translate$2,rotate$2,scale$6,fromTranslation$2,fromRotation$2,fromScaling$1,fromMat2d,fromQuat$1,normalFromMat4,projection,str$6,frob$1,add$6,subtract$4,multiplyScalar$1,multiplyScalarAndAdd$1,exactEquals$6,equals$6,create$5,clone$5,copy$5,fromValues$5,set$5,identity$2,transpose,invert$2,adjoint,determinant,multiply$5,translate$1,scale$5,rotate$1,rotateX$3,rotateY$3,rotateZ$3,fromTranslation$1,fromScaling,fromRotation$1,fromXRotation,fromYRotation,fromZRotation,fromRotationTranslation$1,fromQuat2,getTranslation$1,getScaling,getRotation,decompose,fromRotationTranslationScale,fromRotationTranslationScaleOrigin,fromQuat,frustum,perspectiveNO,perspectiveZO,perspectiveFromFieldOfView,orthoNO,orthoZO,lookAt,targetTo,str$5,frob,add$5,subtract$3,multiplyScalar,multiplyScalarAndAdd,exactEquals$5,equals$5,create$4,clone$4,length$4,fromValues$4,copy$4,set$4,add$4,subtract$2,multiply$4,divide$2,ceil$2,floor$2,min$2,max$2,round$2,scale$4,scaleAndAdd$2,distance$2,squaredDistance$2,squaredLength$4,negate$2,inverse$2,normalize$4,dot$4,cross$2,lerp$4,slerp$1,hermite,bezier,random$3,transformMat4$2,transformMat3$1,transformQuat$1,rotateX$2,rotateY$2,rotateZ$2,angle$1,zero$2,str$4,exactEquals$4,equals$4,create$3,clone$3,fromValues$3,copy$3,set$3,add$3,subtract$1,multiply$3,divide$1,ceil$1,floor$1,min$1,max$1,round$1,scale$3,scaleAndAdd$1,distance$1,squaredDistance$1,length$3,squaredLength$3,negate$1,inverse$1,normalize$3,dot$3,cross$1,lerp$3,random$2,transformMat4$1,transformQuat,zero$1,str$3,exactEquals$3,equals$3,create$2,identity$1,setAxisAngle,getAxisAngle,getAngle,multiply$2,rotateX$1,rotateY$1,rotateZ$1,calculateW,exp,ln,pow,slerp,random$1,invert$1,conjugate$1,fromMat3,fromEuler,str$2,equals$2,create$1,clone$1,fromValues$1,fromRotationTranslationValues,fromRotationTranslation,fromTranslation,fromRotation,fromMat4,copy$1,identity,set$1,getDual,setDual,getTranslation,translate,rotateX,rotateY,rotateZ,rotateByQuatAppend,rotateByQuatPrepend,rotateAroundAxis,add$1,multiply$1,scale$1,lerp$1,invert,conjugate,normalize$1,str$1,exactEquals$1,equals$1,create,clone,fromValues,copy,set,add,subtract,multiply,divide,ceil,floor,min,max,round,scale,scaleAndAdd,distance,squaredDistance,length,squaredLength,negate,inverse,normalize,dot,cross,lerp,random,transformMat2,transformMat2d,transformMat3,transformMat4,rotate,angle,zero,str,exactEquals,equals,tmpPoint1,tmpPoint2,tmpLine1,tmpLine2,lineInt,lineSegmentsIntersect,triangleArea,isLeft,isLeftOn,isRight,isRightOn,collinear,sqdist,polygonAt,polygonClear,polygonAppend,polygonMakeCCW,polygonReverse,polygonIsReflex,polygonCanSee,polygonCanSee2,polygonCopy,polygonGetCutEdges,polygonDecomp,polygonSlice,polygonIsSimple,getIntersectionPoint,polygonQuickDecomp,polygonRemoveCollinearPoints,polygonRemoveDuplicatePoints,scalar_eq,points_eq,ReadBrandList,RunTest,GetWindowsNTVersionName,s,a,c,i,l,f,d,r,a,o,assertFail,isValidTypeChange,logDefendedObjectWarning,CheckDefendedObjectsUsedCorrectly,getObjectPropertySet,VerifyObjectPropertiesConsistent,isNegativeZero,padTwoDigits,hueToRGB,RequireStringOrNumber,SetNewCallback,DoAsyncifiedWork,DoNextAsyncifiedJob,ClearTimeCache,CheckActiveIdleTimeouts,lookupHtmlEntity,bbToHtmlReplacerFunc,IsWordBreakWhiteSpace,IsOpeningCJKPunctiationChar,IsContinuingCJKPunctuationChar,WordBreakTrimEnd,IsNewline,PlaneFromPoints,IsInFrontOfPlane,IsPointInFrontOfPlane,interpolateQuad,GetFormatSpecifiers,fillOrStrokeRect,ptToPx,getOffsetParam,CheckPendingPolls,UpdateLayoutEndValues,makeNullFilledArray,GetFragmentInputStructDeclaration,HashPipelineState,SortZOrderList,GetDispatcher,MakeIWorldInstanceClass,GetDispatcher,GetTimelineState,GetTimelineState,GetTweenState,IsStaticTextureDataType,getActual,GetTypeFromFileExtension,AddScript,SortByInstLastCachedZIndex,SortByInstLastCachedZIndex,SortByInstZElevation,vec3EqualsXYZ,MaybePrepareLayerDraw,SortSolArray,IsSolArrayIdentical,NoActions,WrapIndex,GetExpressionFunc,EvalParams,EvalParams,GetInst,GetWorldInfo,GetInst_SDKv2,GetWorldInfo_SDKv2,GetObjectClass,GetLayer,CollMemory_Add,CollMemory_Remove,CollMemory_RemoveInstance,CollMemory_Get,DoOverlapCondition,FinishCollisionConditionPicking,FinishCollisionCondition,PickByUID_Normal,PickByUID_Inverted,GetNextParamMap,ValidateInternalAPIToken,ForEachOrdered_SortInstances,SortZOrderList,SortInstancesByValue,GetTouchSdkInstance,unaryminus,bothNumbers,add,subtract,multiply,divide,mod,pow,and,or;{let Fn=function(t,s,i){i=i||0;var e,n,r,h,o,a,l,u=[0,0];return e=t[1][1]-t[0][1],n=t[0][0]-t[1][0],r=e*t[0][0]+n*t[0][1],h=s[1][1]-s[0][1],o=s[0][0]-s[1][0],a=h*s[0][0]+o*s[0][1],rr(l=e*o-h*n,0,i)||(u[0]=(o*r-n*a)/l,u[1]=(e*a-h*r)/l),u},On=function(t,s,i,e){var n=s[0]-t[0],r=s[1]-t[1],h=e[0]-i[0],o=e[1]-i[1];if(h*r-o*n===0)return!1;var a=(n*(i[1]-t[1])+r*(t[0]-i[0]))/(h*r-o*n),l=(h*(t[1]-i[1])+o*(i[0]-t[0]))/(o*n-h*r);return a>=0&&a<=1&&l>=0&&l<=1},Dn=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},Ln=function(t,s,i){return Dn(t,s,i)>0},Nn=function(t,s,i){return Dn(t,s,i)>=0},kn=function(t,s,i){return Dn(t,s,i)<0},Bn=function(t,s,i){return Dn(t,s,i)<=0},$n=function(t,s,i,e){if(e){var n=tmpPoint1,r=tmpPoint2;n[0]=s[0]-t[0],n[1]=s[1]-t[1],r[0]=i[0]-s[0],r[1]=i[1]-s[1];var h=n[0]*r[0]+n[1]*r[1],o=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=Math.sqrt(r[0]*r[0]+r[1]*r[1]);return Math.acos(h/(o*a))<e}return 0===Dn(t,s,i)},Wn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},Un=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},Vn=function(t){t.length=0},zn=function(t,s,i,e){for(var n=i;n<e;n++)t.push(s[n])},jn=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!Ln(Un(t,s-1),Un(t,s),Un(t,s+1))&&(qn(t),!0)},qn=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},Hn=function(t,s){return kn(Un(t,s-1),Un(t,s),Un(t,s+1))},Jn=function(t,s,i){var e,n,r=tmpLine1,h=tmpLine2;if(Nn(Un(t,s+1),Un(t,s),Un(t,i))&&Bn(Un(t,s-1),Un(t,s),Un(t,i)))return!1;n=Wn(Un(t,s),Un(t,i));for(var o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&Nn(Un(t,s),Un(t,i),Un(t,o+1))&&Bn(Un(t,s),Un(t,i),Un(t,o))&&(r[0]=Un(t,s),r[1]=Un(t,i),h[0]=Un(t,o),h[1]=Un(t,o+1),e=Fn(r,h),Wn(Un(t,s),e)<n))return!1;return!0},Yn=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&On(Un(t,s),Un(t,i),Un(t,e),Un(t,e+1)))return!1;return!0},Xn=function(t,s,i,e){var n=e||[];if(Vn(n),s<i)for(var r=s;r<=i;r++)n.push(t[r]);else{for(r=0;r<=i;r++)n.push(t[r]);for(r=s;r<t.length;r++)n.push(t[r])}return n},Zn=function(t){for(var s=[],i=[],e=[],n=[],r=Number.MAX_VALUE,h=0;h<t.length;++h)if(Hn(t,h))for(var o=0;o<t.length;++o)if(Jn(t,h,o)){i=Zn(Xn(t,h,o,n)),e=Zn(Xn(t,o,h,n));for(var a=0;a<e.length;a++)i.push(e[a]);i.length<r&&(s=i,r=i.length,s.push([Un(t,h),Un(t,o)]))}return s},Kn=function(t){var s=Zn(t);return s.length>0?Qn(t,s):[t]},Qn=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var n=s[e],r=0;r<i.length;r++){var h=Qn(i[r],n);if(h){i.splice(r,1),i.push(h[0],h[1]);break}}return i}return n=s,e=t.indexOf(n[0]),r=t.indexOf(n[1]),-1!==e&&-1!==r&&[Xn(t,e,r),Xn(t,r,e)]},tr=function(t){var s,i=t;for(s=0;s<i.length-1;s++)for(var e=0;e<s-1;e++)if(On(i[s],i[s+1],i[e],i[e+1]))return!1;for(s=1;s<i.length-2;s++)if(On(i[0],i[i.length-1],i[s],i[s+1]))return!1;return!0},sr=function(t,s,i,e,n){n=n||0;var r=s[1]-t[1],h=t[0]-s[0],o=r*t[0]+h*t[1],a=e[1]-i[1],l=i[0]-e[0],u=a*i[0]+l*i[1],c=r*l-a*h;return rr(c,0,n)?[0,0]:[(l*o-h*u)/c,(r*u-a*o)/c]},ir=function(t,s,i,e,n,r,h){r=r||100,h=h||0,n=n||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],w=[],S=t,v=t;if(v.length<3)return s;if(++h>r)return console.warn("quickDecomp: max level ("+r+") reached."),s;for(var b=0;b<t.length;++b)if(Hn(S,b)){i.push(S[b]),u=c=Number.MAX_VALUE;for(var x=0;x<t.length;++x)Ln(Un(S,b-1),Un(S,b),Un(S,x))&&Bn(Un(S,b-1),Un(S,b),Un(S,x-1))&&(l=sr(Un(S,b-1),Un(S,b),Un(S,x),Un(S,x-1)),kn(Un(S,b+1),Un(S,b),l)&&(f=Wn(S[b],l))<c&&(c=f,a=l,m=x)),Ln(Un(S,b+1),Un(S,b),Un(S,x+1))&&Bn(Un(S,b+1),Un(S,b),Un(S,x))&&(l=sr(Un(S,b+1),Un(S,b),Un(S,x),Un(S,x+1)),Ln(Un(S,b-1),Un(S,b),l)&&(f=Wn(S[b],l))<u&&(u=f,o=l,p=x));if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),b<p?(zn(y,S,b,p+1),y.push(l),w.push(l),0!==m&&zn(w,S,m,S.length),zn(w,S,0,b+1)):(0!==b&&zn(y,S,b,S.length),zn(y,S,0,p+1),y.push(l),w.push(l),zn(w,S,m,b+1));else{if(m>p&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(x=m;x<=p;++x)Nn(Un(S,b-1),Un(S,b),Un(S,x))&&Bn(Un(S,b+1),Un(S,b),Un(S,x))&&(f=Wn(Un(S,b),Un(S,x)))<d&&Yn(S,b,x)&&(d=f,g=x%t.length);b<g?(zn(y,S,b,g+1),0!==g&&zn(w,S,g,v.length),zn(w,S,0,b+1)):(0!==b&&zn(y,S,b,v.length),zn(y,S,0,g+1),zn(w,S,g,b+1))}return y.length<w.length?(ir(y,s,i,e,n,r,h),ir(w,s,i,e,n,r,h)):(ir(w,s,i,e,n,r,h),ir(y,s,i,e,n,r,h)),s}return s.push(t),s},er=function(t,s){for(var i=0,e=t.length-1;t.length>3&&e>=0;--e)$n(Un(t,e-1),Un(t,e),Un(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},nr=function(t,s){for(var i=t.length-1;i>=1;--i)for(var e=t[i],n=i-1;n>=0;--n)hr(e,t[n],s)&&t.splice(i,1)},rr=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},hr=function(t,s,i){return rr(t[0],s[0],i)&&rr(t[1],s[1],i)};lineInt=Fn,lineSegmentsIntersect=On,triangleArea=Dn,isLeft=Ln,isLeftOn=Nn,isRight=kn,isRightOn=Bn,collinear=$n,sqdist=Wn,polygonAt=Un,polygonClear=Vn,polygonAppend=zn,polygonMakeCCW=jn,polygonReverse=qn,polygonIsReflex=Hn,polygonCanSee=Jn,polygonCanSee2=Yn,polygonCopy=Xn,polygonGetCutEdges=Zn,polygonDecomp=Kn,polygonSlice=Qn,polygonIsSimple=tr,getIntersectionPoint=sr,polygonQuickDecomp=ir,polygonRemoveCollinearPoints=er,polygonRemoveDuplicatePoints=nr,scalar_eq=rr,points_eq=hr,tmpPoint1=[],tmpPoint2=[],tmpLine1=[],tmpLine2=[],self.vs={bs:Kn,xs:ir,Ms:tr,Ts:er,Gs:nr,_s:jn}}{let ar=!1,lr=!1,ur="dev";const cr=Symbol("Construct internal API token");let fr=16;const dr=self.Cs=class{constructor(){throw TypeError("static class can't be instantiated")}static Is(){if(fr<=0)throw new Error("cannot obtain internal API token");return--fr,cr}static Es(){ar=!0}static Ps(){return ar}static Rs(){lr=!0}static As(){return lr}static Fs(t){ur=t}static Os(){return ur}static Ds(){return"final"===ur}};dr.Ls=!1,dr.Ns=!1,dr.hardwareConcurrency=navigator.hardwareConcurrency||2,self.ks={}}{const pr=self.Cs;pr.Bs=class{constructor(t){this.$s=t,this.Ws=new Map,this.Us()}Us(){let t=this.$s;(t.startsWith("?")||t.startsWith("#"))&&(t=t.substr(1));const s=t.split("&");for(const t of s)this.Vs(t)}Vs(t){if(!t)return;if(!t.includes("="))return void this.Ws.set(t,null);const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Ws.set(i,e)}zs(){for(const t of this.Ws)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}js(t){return this.Ws.has(t)}qs(t){const s=this.Ws.get(t);return void 0===s?null:s}Hs(){history.replaceState("",document.title,location.pathname+location.search)}Js(t){this.$s=t,this.Ws.clear(),this.Us()}},pr.Ys=new pr.Bs(location.search),pr.Xs=new pr.Bs(location.hash),pr.Ys.js("perf")&&(pr.Zs=!0),"dev"!==pr.Ys.qs("mode")&&pr.Fs("final")}{let mr=function(t){const s=parseFloat(t);return wr.get(s)||(s>=13?"11":"NT "+t)};GetWindowsNTVersionName=mr;const gr=self.Cs,yr="(unknown)";gr.Ks={Qs:yr,ti:yr,si:yr,ii:yr,ei:NaN,ni:yr,ri:"browser",hi:!0,oi:!1,ai:!1,li:!1,ci:async()=>{}};const wr=new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]]),Sr=navigator.userAgent,vr=navigator.userAgentData;if(vr&&vr.brands.length>0){let xr=function(t){let s="",i="",e="",n="";for(const r of t){const t=Mr.get(r.brand);!s&&t&&(s=t,i=r.version);const h=Tr.get(r.brand);!e&&h&&(e=h,n=r.version)}s||"Chromium"!==e||(gr.Ks.si="Chromium",gr.Ks.ii=n),gr.Ks.si=s||yr,gr.Ks.ii=i||yr,gr.Ks.ni=e||yr};ReadBrandList=xr,gr.Ks.Qs=vr.platform,gr.Ks.oi=vr.mobile,gr.Ks.hi=!gr.Ks.oi;const Mr=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),Tr=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);xr(vr.brands);let Gr=!1;gr.Ks.ci=async()=>{if(!Gr)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);xr(t.fullVersionList),"Windows"===gr.Ks.Qs?gr.Ks.ti=mr(t.platformVersion):gr.Ks.ti=t.platformVersion,Gr=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let _r=function(t,s){const i=Array.isArray(t)?t:[t];for(const t of i){const i=t.exec(Sr);if(i){s(i);break}}};RunTest=_r,_r(/windows\s+nt\s+([\d\.]+)/i,t=>{gr.Ks.Qs="Windows";const s=t[1];gr.Ks.ti=mr(s)}),_r(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{gr.Ks.Qs="macOS",gr.Ks.ti=t[1].replace(/_/g,".")}),_r(/CrOS/,()=>{gr.Ks.Qs="Chrome OS"}),_r(/linux|openbsd|freebsd|netbsd/i,()=>{gr.Ks.Qs="Linux"}),_r(/android/i,()=>{gr.Ks.Qs="Android"}),_r(/android\s+([\d\.]+)/i,t=>{gr.Ks.Qs="Android",gr.Ks.ti=t[1]}),gr.Ks.Qs===yr&&(_r(/(iphone|ipod|ipad)/i,t=>{gr.Ks.Qs="iOS"}),_r([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{gr.Ks.Qs="iOS",gr.Ks.ti=t[1].replace(/_/g,".")}));const Cr=/chrome\//i.test(Sr),Ir=/chromium\//i.test(Sr),Er=/edg\//i.test(Sr),Pr=/OPR\//.test(Sr),Rr=/nwjs/i.test(Sr),Ar=/safari\//i.test(Sr),Fr=/webkit/i.test(Sr);Er||Pr||_r(/chrome\/([\d\.]+)/i,t=>{gr.Ks.si="Chrome",gr.Ks.ii=t[1],gr.Ks.ni="Chromium"}),_r(/edg\/([\d\.]+)/i,t=>{gr.Ks.si="Edge",gr.Ks.ii=t[1],gr.Ks.ni="Chromium"}),_r(/OPR\/([\d\.]+)/,t=>{gr.Ks.si="Opera",gr.Ks.ii=t[1],gr.Ks.ni="Chromium"}),_r(/chromium\/([\d\.]+)/i,t=>{gr.Ks.si="Chromium",gr.Ks.ii=t[1],gr.Ks.ni="Chromium"}),_r(/nwjs\/[0-9.]+/i,t=>{gr.Ks.si="NW.js",gr.Ks.ii=t[1],gr.Ks.ni="Chromium",gr.Ks.ri="nwjs"}),_r(/firefox\/([\d\.]+)/i,t=>{gr.Ks.si="Firefox",gr.Ks.ii=t[1],gr.Ks.ni="Gecko"}),!Ar||Cr||Ir||Er||Pr||Rr||(gr.Ks.si="Safari",gr.Ks.ni="WebKit",_r(/version\/([\d\.]+)/i,t=>{gr.Ks.ii=t[1]}),_r(/crios\/([\d\.]+)/i,t=>{gr.Ks.si="Chrome for iOS",gr.Ks.ii=t[1]}),_r(/fxios\/([\d\.]+)/i,t=>{gr.Ks.si="Firefox for iOS",gr.Ks.ii=t[1]}),_r(/edgios\/([\d\.]+)/i,t=>{gr.Ks.si="Edge for iOS",gr.Ks.ii=t[1]})),gr.Ks.ni===yr&&Fr&&(gr.Ks.ni="WebKit"),"Android"===gr.Ks.Qs&&"Safari"===gr.Ks.si&&(gr.Ks.si="Stock");const Or=new Set(["Windows","macOS","Linux","Chrome OS"]).has(gr.Ks.Qs)||"nwjs"===gr.Ks.ri;gr.Ks.hi=Or,gr.Ks.oi=!Or}"Chrome"===gr.Ks.si&&"browser"===gr.Ks.ri&&/wv\)/.test(Sr)&&(gr.Ks.ri="webview"),"nwjs"!==gr.Ks.ri&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(gr.Ks.ri="webapp"),gr.Ks.ei=parseFloat(gr.Ks.ii);const br="macOS"===gr.Ks.Qs&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2;br&&(gr.Ks.Qs="iOS",gr.Ks.ti=gr.Ks.ii,gr.Ks.hi=!1,gr.Ks.oi=!0,gr.Ks.li=!0),gr.Ks.ai="macOS"===gr.Ks.Qs||"iOS"===gr.Ks.Qs}{let Dr=function(t){return new Promise((s,i)=>{t.onsuccess=()=>s(t.result),t.onerror=()=>i(t.error)})},Lr=function(t){return new Promise((s,i)=>{t.oncomplete=()=>s(),t.onerror=()=>i(t.error),t.onabort=()=>i(t.error)})},Nr=function(t,s){return Hr(t,s)},kr=function(t,s){return Hr(t,s,!0)},Br=function(t){$r(t);let s=zr.get(t);return s instanceof Promise||(s=Jr(t),zr.set(t,s),s.catch(s=>zr.delete(t))),s},$r=function(t){if("string"!=typeof t)throw new TypeError("expected string")},Wr=function(t,s){const i=t.objectStore(Vr).openCursor();return new Promise(t=>{const e=[];i.onsuccess=i=>{const n=i.target.result;if(n){switch(s){case"entries":e.push([n.key,n.value]);break;case"keys":e.push(n.key);break;case"values":e.push(n.value)}n.continue()}else t(e)}})};s=Dr,a=Lr,c=Nr,i=kr,l=Br,f=$r,d=Wr;const Ur=2,Vr="keyvaluepairs",zr=new Map,jr="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,qr="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function Hr(t,s,i=!1,e=!0){const n=await Br(t);try{return s(n.transaction([Vr],i?"readwrite":"readonly"))}catch(n){if(e&&"InvalidStateError"===n.name)return zr.delete(t),Hr(t,s,i,!1);throw n}}async function Jr(t){$r(t);const s=indexedDB.open(t,Ur);return s.addEventListener("upgradeneeded",s=>{try{s.target.result.createObjectStore(Vr)}catch(s){console.error(`Failed to create objectstore for database ${t}`,s)}}),Dr(s)}class Yr{constructor(t){$r(t),this.name=t}async ready(){await Br(this.name)}set(t,s){return $r(t),kr(this.name,async i=>{const e=Dr(i.objectStore(Vr).put(s,t)),n=Lr(i);await Promise.all([n,e])})}get(t){return $r(t),Nr(this.name,async s=>{const i=Dr(s.objectStore(Vr).get(t)),e=Lr(s),[n,r]=await Promise.all([e,i]);return r})}delete(t){return $r(t),kr(this.name,async s=>{const i=Dr(s.objectStore(Vr).delete(t)),e=Lr(s);await Promise.all([e,i])})}clear(){return kr(this.name,async t=>{const s=Dr(t.objectStore(Vr).clear()),i=Lr(t);await Promise.all([i,s])})}keys(){return Nr(this.name,async t=>{let s;s=qr?Dr(t.objectStore(Vr).getAllKeys()):Wr(t,"keys");const i=Lr(t),[e,n]=await Promise.all([i,s]);return n})}values(){return Nr(this.name,async t=>{let s;s=jr?Dr(t.objectStore(Vr).getAll()):Wr(t,"values");const i=Lr(t),[e,n]=await Promise.all([i,s]);return n})}entries(){return Nr(this.name,async t=>{const s=Wr(t,"entries"),i=Lr(t),[e,n]=await Promise.all([i,s]);return n})}}self.fi=Yr}{let Xr=function(t){throw new Error(`"${t}" is not implemented`)},Zr=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},Kr=function(t){return"object"==typeof t?new Promise(s=>{const{port1:i,port2:e}=new MessageChannel;e.onmessage=t=>s(t.data),i.postMessage(t)}):Promise.resolve(t)};r=Xr,a=Zr,o=Kr;const Qr=self.fi,th=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];class sh{constructor(t){this.di=t,this.pi=!this.di,this.pi||"undefined"!=typeof indexedDB||(this.pi=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.mi=new Map}gi(t){if(!this.pi)for(const s of th)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.pi=!0;break}}async yi(t){const s=this.mi.get(t),i=await Kr(s);return void 0===i?null:i}async wi(t,s){s=await Kr(s),this.mi.set(t,s)}Si(t){this.mi.delete(t)}bi(){this.mi.clear()}xi(){return Array.from(this.mi.keys())}Mi(){return this.pi}Ti(){return this.mi}Gi(t){this.mi=t}async getItem(t,s){if(Zr(s),this.pi)return await this.yi(t);let i;try{i=await this.di.get(t)}catch(s){return this.gi(s),this.pi?await this.yi(t):(console.error(`Error reading '${t}' from storage, returning null: `,s),null)}return void 0===i?null:i}async setItem(t,s,i){if(Zr(i),void 0===s&&(s=null),this.pi)await this.wi(t,s);else try{await this.di.set(t,s)}catch(i){if(this.gi(i),!this.pi)throw i;await this.wi(t,s)}}async removeItem(t,s){if(Zr(s),this.pi)this.Si(t);else try{await this.di.delete(t)}catch(s){this.gi(s),this.pi?this.Si(t):console.error(`Error removing '${t}' from storage: `,s)}}async clear(t){if(Zr(t),this.pi)this.bi();else try{await this.di.clear()}catch(t){this.gi(t),this.pi?this.bi():console.error("Error clearing storage: ",t)}}async keys(t){if(Zr(t),this.pi)return this.xi();let s=[];try{s=await this.di.keys()}catch(t){if(this.gi(t),this.pi)return this.xi();console.error("Error getting storage keys: ",t)}return s}ready(t){return Zr(t),this.pi?Promise.resolve(!0):this.di.ready()}_i(t){if(t.Ci)return new sh(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new Qr(s);return new sh(i)}}length(t){Xr("localforage.length()")}key(t,s){Xr("localforage.key()")}iterate(t,s){Xr("localforage.iterate()")}Ii(t){Xr("localforage.setDriver()")}config(t){Xr("localforage.config()")}Ei(t){Xr("localforage.defineDriver()")}Pi(){Xr("localforage.driver()")}supports(t){Xr("localforage.supports()")}dropInstance(){Xr("localforage.dropInstance()")}}self.localforage=new sh(new Qr("localforage"))}{const ih=self.Cs;if(ih.Ri={},ih.Ri.Ai=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");return void 0!==t.animate&&void 0!==t.animate([{opacity:"0"},{opacity:"1"}],1e3).reverse}catch(t){return!1}})(),ih.Ri.Fi="undefined"!=typeof HTMLDialogElement,ih.Ri.Oi=!!self.requestIdleCallback,ih.Ri.ImageBitmap=!!self.createImageBitmap,ih.Ri.ImageBitmapOptions=!1,ih.Ri.Di=!1,ih.Ri.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{ih.Ri.ImageBitmapOptions=!0}).catch(()=>{ih.Ri.ImageBitmapOptions=!1})}catch(eh){ih.Ri.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{ih.Ri.Di=10===t.width&&10===t.height}).catch(()=>{ih.Ri.Di=!1})}catch(nh){ih.Ri.Di=!1}}if(ih.Ri.Li=!(!navigator.clipboard||!navigator.clipboard.readText),ih.Ri.Ni=!(!navigator.permissions||!navigator.permissions.query),ih.Ri.ki=!1,ih.Ri.Ni){const rh={name:"clipboard-read"};navigator.permissions.query(rh).then(()=>{ih.Ri.ki=!0}).catch(()=>{ih.Ri.ki=!1})}ih.Ri.Bi=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),ih.Ri.$i="undefined"!=typeof Proxy,ih.Ri.Wi="undefined"!=typeof document&&void 0!==document.createElement("a").download,ih.Ri.Ui="function"==typeof fetch,ih.Ri.Vi=!!(self.isSecureContext&&"Opera"!==ih.Ks.si&&navigator.storage&&navigator.storage.persist),ih.Ri.zi=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),ih.Ri.ji=(()=>{if("undefined"==typeof document)return!1;if("iOS"===ih.Ks.Qs)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),ih.Ri.ImageDecoder=void 0!==self.ImageDecoder,ih.Ri.Hi=!!self.VideoEncoder,ih.Ri.Ji=!!self.showOpenFilePicker,ih.Ri.Yi=!!self.queryLocalFonts,ih.Ri.UserActivation=!!navigator.userActivation,ih.Ri.Xi=!1,(async()=>{let t;"undefined"==typeof document?t=new OffscreenCanvas(32,32):(t=document.createElement("canvas"),t.width=32,t.height=32);const s=t.getContext("2d");s.fillStyle="blue",s.fillRect(0,0,32,32);let i=null;try{t.convertToBlob?i=await t.convertToBlob({type:"image/webp",quality:1}):t.toBlob&&(i=await new Promise(s=>t.toBlob(s,"image/webp",1))),ih.Ri.Xi=i&&"image/webp"===i.type}catch(t){ih.Ri.Xi=!1}})()}{const hh=self.Cs;String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(hh.Zi(t),"g"),s)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((t,s)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((s,i)=>t({usage:s,quota:i}),s))})}{let oh=function(t){let s="Assertion failure: "+t+"\n\nStack trace:\n"+ah.Ki();console.error(s)};assertFail=oh;const ah=self.Cs;self.assert=function(t,s){t||oh(s)}}{const lh=self.Cs,uh=self.ks;lh.Qi=function(t){return"number"==typeof t},lh.te=function(t){return lh.Qi(t)&&isFinite(t)},lh.se=function(t){if(!lh.Qi(t))throw new TypeError("expected number")},lh.ie=function(t){lh.ee(t)},lh.ne=function(t,s,i){if(!lh.Qi(t)||isNaN(t)||s>t||i<t)throw new RangeError("number outside of range")},lh.re=function(...t){for(let s of t);},lh.he=function(t){if(!lh.te(t))throw new TypeError("expected finite number")},lh.oe=function(t){lh.ee(t)},lh.ae=function(...t){for(let s of t);},lh.le=function(t){return"string"==typeof t},lh.ue=function(t){if(!lh.le(t))throw new TypeError("expected string")},lh.ce=function(t){lh.ee(t)},lh.fe=function(...t){for(let s of t);},lh.de=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},lh.pe=function(t){if(!lh.de(t))throw new TypeError("expected simple object")},lh.me=function(t){if(!lh.ee(t)&&!lh.de(t))throw new TypeError("expected simple object")},lh.ge=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},lh.ye=function(t){if(!lh.ge(t))throw new TypeError("expected object")},lh.we=function(t){lh.ee(t)},lh.Se=function(...t){for(let s of t);},lh.ve=function(t){return lh.be(t,Blob)&&"string"==typeof t.name},lh.xe=function(t){if(!lh.ve(t))throw new TypeError("expected file")},lh.Me=function(t){lh.ee(t)},lh.Te=function(t){return Array.isArray(t)},lh.Ge=function(t){if(!lh.Te(t))throw new TypeError("expected array")},lh._e=function(t){lh.ee(t)},lh.Ce=function(...t){for(let s of t);},lh.Ie=function(t){return!(!lh.Te(t)||t.length&&!lh.Te(t[0]))},lh.Ee=function(t){if(!lh.Ie(t))throw new TypeError("expected 2d array");for(let s of t)if(!lh.Te(s))throw new TypeError("expected 2d array")},lh.Pe=function(t){lh.ee(t)},lh.Re=function(t){return"function"==typeof t},lh.Ae=function(t,s){if(!lh.Re(t))throw new TypeError("expected function");if(!lh.ee(s)&&t!==s)throw new TypeError("expected same function reference")},lh.Fe=function(t){lh.ee(t)},lh.Oe=function(...t){for(let s of t);},lh.De=function(t,...s){if(!lh.Re(t))throw new TypeError("expected function");if(!s.length)throw new Error("missing comparison functions");for(let i of s)if(!lh.ee(i)&&t===i)return;throw new TypeError("expected same function reference")},lh.Le=function(...t){if(!lh.ee(t))for(let s of t);},lh.Ne=function(t,s){return t instanceof s},lh.ke=function(t,...s){for(let i of s)if(lh.Ne(t,i))return!0;return!1},lh.Be=function(t,s){if(!lh.Ne(t,s))throw new TypeError("unexpected type")},lh.$e=function(t,s){lh.ee(t)},lh.We=function(t,...s){for(let t of s);},lh.Ue=function(t,...s){if(!lh.ke(t,...s))throw new TypeError("unexpected type")},lh.Ve=function(t,...s){if(!lh.ee(t)&&!lh.ke(t,...s))throw new TypeError("unexpected type")},lh.ze=function(t,s){for(let i of t)if(!lh.Ne(i,s))return!1;return!0},lh.je=function(t){for(let s of t)if(!lh.te(s))return!1;return!0},lh.qe=function(t,s){for(let s of t);},lh.He=function(t,s){if(!lh.ee(t))for(let s of t);},lh.Je=function(t,s){if(!lh.ee(t))for(let s of t);},lh.Ye=function(t,...s){for(let s of t);},lh.Xe=function(t,...s){if(!lh.ee(t))for(let s of t);},lh.Ze=function(t,s){return!(lh.ee(t)||!lh.le(t.nodeName))&&(!s||lh.Ke(t.nodeName,s))},lh.Qe=function(t,s){if(lh.ee(t)||!lh.le(t.nodeName))throw new TypeError("expected DOM node");if(s&&!lh.Ke(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},lh.tn=function(t,s){lh.ee(t)},lh.sn=function(t,s){return!(lh.ee(t)||!lh.le(t.tagName))&&(!s||lh.Ke(t.tagName,s))},lh.en=function(t,s){if(lh.ee(t)||!lh.le(t.tagName))throw new TypeError("expected HTML element");if(s&&!lh.Ke(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},lh.nn=function(t,s){lh.ee(t)},lh.rn=function(t){return lh.sn(t,"img")||lh.sn(t,"canvas")||lh.sn(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},lh.hn=function(t){if(!lh.rn(t))throw new TypeError("expected drawable")},lh.an=function(t){lh.ee(t)},lh.ln=function(t){return t instanceof ImageData||lh.rn(t)},lh.un=function(t){if(!lh.ln(t))throw new TypeError("expected drawable or image data")},lh.cn=function(t){if(!lh.ee(t)&&!lh.ln(t))throw new TypeError("expected drawable or image data")},lh.fn=function(t){return"string"==typeof t||lh.dn&&t instanceof lh.dn||t instanceof lh.pn},lh.mn=function(t){if(!lh.fn(t))throw new TypeError("expected string-like")},lh.gn=function(t){lh.ee(t)},lh.yn=function(...t){for(let s of t);},lh.wn=function(){throw new Error("must be overridden")},lh.Sn=function(){throw new Error("not yet implemented")},lh.vn=function(t){return t.constructor===function*(){}.constructor},lh.bn=function(t){if(!lh.vn(t))throw new Error("expected generator function")},lh.xn=function(t){return"function"===t[Symbol.iterator]},lh.Mn=function(t){if(!lh.xn(t))throw new Error("expected iterable")},lh.Tn=function(t){return!lh.ee(t)},lh.ee=function(t){return null==t},lh.Gn=function(t){let s=t[0].constructor;for(let i of t)if(i.constructor!==s)return!1;return s},lh._n=function(t,s){for(let i of t)if(!(i instanceof s))return!1;return!0};const ch=Object.getPrototypeOf(Uint8Array);lh.Cn=function(t){return lh.Ne(t,ch)},lh.In=function(t){},lh.En=function(t){lh.Pn(t,ch)},lh.Rn=function(t,...s){if(!lh.An(t,...s))throw new TypeError("unexpected type")},lh.An=function(t,...s){for(const i of s)if(lh.be(t,i))return!0;return!1},lh.Pn=function(t,s){if(!lh.be(t,s))throw new TypeError("unexpected type")},lh.be=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},uh.se=lh.se,uh.ie=lh.ie,uh.he=lh.he,uh.oe=lh.oe,uh.ue=lh.ue,uh.ce=lh.ce,uh.ye=lh.ye,uh.we=lh.we,uh.Ge=lh.Ge,uh._e=lh._e,uh.Ae=lh.Ae,uh.Fe=lh.Fe,uh.Be=lh.Be,uh.$e=lh.$e,uh.ee=lh.ee}{let fh=function(t,s){let i=yh.getType(t),e=yh.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},dh=function(t){console.warn("[Defence] "+t+" @",yh.Ki())},ph=function(){if(Gh=-1,vh.size>0||bh.size>0){let t=[...new Set([...vh.keys()].map(t=>yh.getName(t)))].join(",");console.warn(`An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${t}`),vh.clear(),bh.clear()}},mh=function(t){let s=new Set;for(let i in t)s.add(i);return s},gh=function(t,s){let i=mh(s),e=_h.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);yh.Fn(s,[...i]),s.length&&console.warn(`[Defence] '${yh.getName(t)}' constructor creates inconsistent properties: ${s.join(", ")}`)}else _h.set(t,i)};isValidTypeChange=fh,logDefendedObjectWarning=dh,CheckDefendedObjectsUsedCorrectly=ph,getObjectPropertySet=mh,VerifyObjectPropertiesConsistent=gh;const yh=self.Cs,wh=new Map;let Sh;yh.On=function(t,s){console.log(`%c${t}`,`font-weight: bold; color:${s}`)},yh.Dn=function(t,...s){wh.has(t)||wh.set(t,-1),-1===wh.get(t)&&wh.set(t,requestAnimationFrame(()=>{console.log(`%c${t}`,"font-weight: bold",...s),wh.set(t,-1)}))},yh.Ln=function(t){performance.mark(t),Sh||(Sh=new Map),Sh.has(t)||Sh.set(t,{Nn:0,total:0,kn:0,Bn:1,toString:function(){return`${t} :: current => ${this.Nn.toPrecision(3)} :: average => ${this.kn.toPrecision(3)} :: calls => ${this.Bn}`}})},yh.$n=function(t){performance.measure(`measure-${t}`,t);const s=performance.getEntriesByName(`measure-${t}`)[0],i=Sh.get(t);i.Nn=s.duration,i.total+=i.Nn,i.kn=i.total/i.Bn,console.log(i.toString()),i.Bn++,performance.clearMarks(t),performance.clearMeasures(`measure-${t}`)},yh.Ki=function(){return(new Error).stack},yh.Wn=function(){},yh.cast=function(t,s){return t&&t instanceof s?t:null},yh.getName=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":yh.Qi(t)?"<number>":yh.le(t)?"<string>":yh.Te(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":yh.Re(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},yh.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},yh.range=function*(t,s){if(!isFinite(Math.abs(t-s)))throw new Error("Invalid parameters");if(t>s)for(let i=t-1;i>=s;i--)yield i;else for(let i=t;i<s;i++)yield i};let vh=new Map,bh=new Map,xh=new WeakMap,Mh=new WeakMap;yh.Un={};const Th=new Set(["then","splice"]);yh.Un.get=function(t,s){return s in t||"symbol"==typeof s||Th.has(s)||dh(`Accessed missing property '${s}' from defended object '${yh.getName(t)}', returning undefined`),Mh.has(t)&&"symbol"!=typeof s&&!Th.has(s)&&dh(`Accessed property '${s}' on a released object '${yh.getName(t)}'\nObject was originally released at: ${Mh.get(t)})\nCall stack at access: `),t[s]},yh.Un.set=function(t,s,i){return s in t||vh.has(t)||dh(`Set non-existent property '${s}' to '${i}' on defended object '${yh.getName(t)}'`),fh(t[s],i)||vh.has(t)||dh(`Set '${yh.getType(t[s])}' property '${s}' to type '${yh.getType(i)}' on defended object '${yh.getName(t)}'`),Mh.has(t)&&dh(`Set property '${s}' on a released object '${yh.getName(t)}'\nObject was originally released at: ${Mh.get(t)})\nCall stack at access: `),t[s]=i,!0},yh.Un.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${yh.getName(t)}'`)},yh.Un.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${yh.getName(t)}'`)},yh.Un.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${yh.getName(t)}'`)};let Gh=-1;yh.Vn=class{constructor(){if(!yh.Ns||!yh.Ri.$i)return;let t=new.target,s=Object.create(t.prototype),i=new Proxy(s,yh.Un);return vh.set(s,i),bh.set(i,s),xh.set(i,s),-1===Gh&&(Gh=requestAnimationFrame(ph)),i}},yh.zn=function(t){if(yh.Ns&&yh.Ri.$i&&t instanceof yh.Vn){if(!bh.has(t))return t;let s=bh.get(t);return bh.delete(t),vh.delete(s),t}return yh.Ls?Object.seal(t):t},yh.jn=function(t,...s){let i;try{i=new t(...s)}catch(t){throw bh.clear(),vh.clear(),t}return yh.Ns&&gh(t,i),yh.zn(i)},yh.qn=function(t){let s=xh.get(t);s&&Mh.set(s,yh.Ki())},yh.Hn=function(t){let s=xh.get(t);return!!s&&!!Mh.get(s)};let _h=new Map;yh.Jn=class{constructor(t){this.Yn="",t&&this.start(t)}start(t){yh.Zs&&(this.Yn=t,performance.mark(this.Yn+"-Start"))}end(){yh.Zs&&(performance.mark(this.Yn+"-End"),performance.measure(this.Yn,this.Yn+"-Start",this.Yn+"-End"))}next(t){yh.Zs&&(this.end(),this.Yn=t,performance.mark(this.Yn+"-Start"))}}}{let Ch=function(t){return 0===t&&1/t<0};isNegativeZero=Ch;const Ih=self.Cs,Eh=2*Math.PI,Ph=Math.PI/180,Rh=180/Math.PI;Ih.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0===e)return i;if(t<s){const n=i-(s-t)%e;return n===i?0:n}return s+(t-s)%e},Ih.Xn=function(t,s,i,e,n){const r=i-s;return 0===r&&0===e?t:(t-s)*(n-e)/r+e},Ih.normalize=function(t,s,i){return s-i===0?1:(t-s)/(i-s)},Ih.Zn=function(t,s,i){return t<s?s:t>i?i:t},Ih.Kn=function(t){return(t%=Eh)<0&&(t+=Eh),t},Ih.Qn=function(t){return t*Ph},Ih.tr=function(t){return t*Rh},Ih.sr=function(t,s){return Math.sqrt(t*t+s*s)},Ih.ir=function(t,s,i){return Math.sqrt(t*t+s*s+i*i)},Ih.er=function(t,s,i,e){return Ih.sr(i-t,e-s)},Ih.nr=function(t,s,i,e){const n=i-t,r=e-s;return n*n+r*r},Ih.rr=function(t,s,i,e){return Math.atan2(e-s,i-t)},Ih.hr=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),n=i*Math.sin(s)+e*Math.cos(s);return n>=1?0:n<=-1?Math.PI:Math.acos(n)},Ih.ar=function(t,s,i){let e=Math.sin(t),n=Math.cos(t),r=Math.sin(s),h=Math.cos(s);return Math.acos(e*r+n*h)>i?n*r-e*h>0?Ih.Kn(t+i):Ih.Kn(t-i):Ih.Kn(s)},Ih.lr=function(t,s){let i=Math.sin(t);return Math.cos(t)*Math.sin(s)-i*Math.cos(s)<=0},Ih.ur=function(t,s,i,e=0){let n=Ih.hr(t,s);const r=Eh*e;return Ih.lr(s,t)?Ih.Kn(t+(n+r)*i):Ih.Kn(t-(n+r)*i)},Ih.cr=function(t,s,i,e=0){const n=Ih.hr(t,s),r=Eh*e;return Ih.lr(s,t)?Ih.Kn(t+(n+r)*i):Ih.Kn(t+(Eh-n+r)*i)},Ih.dr=function(t,s,i,e=0){const n=Ih.hr(t,s),r=Eh*e;return Ih.lr(s,t)?Ih.Kn(t-(-Eh+n-r)*i):Ih.Kn(t-(n+r)*i)},Ih.pr=function(t,s){const i=Ih.hr(t,s);return Ih.lr(t,s)?Ih.Kn(s-i):Ih.Kn(s+i)},Ih.Ct=function(t,s,i){return t+i*(s-t)},Ih.mr=function(t,s,i){return t===s?0:(i-t)/(s-t)},Ih.gr=function(t,s,i,e,n){return Ih.Ct(e,n,Ih.mr(t,s,i))},Ih.yr=function(t,s,i,e){return Ih.Ct(Ih.Ct(t,s,e),Ih.Ct(s,i,e),e)},Ih.wr=function(t,s,i,e,n){return Ih.Ct(Ih.yr(t,s,i,n),Ih.yr(s,i,e,n),n)},Ih.Sr=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},Ih.vr=function(t){return t>0&&!(t-1&t)},Ih.br=function(t){--t;for(let s=1;s<32;s<<=1)t|=t>>s;return t+1},Ih.Mr=function(t,s){return Math.round(t*s)/s},Ih.Tr=function(t,s){return Math.floor(t*s)/s},Ih.Gr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},Ih._r=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},Ih.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;e>=0&&"0"===i.charAt(e);--e);return e>=0&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},Ih.Cr=function(t,s,i){return Ih.Zn(t,0,255)|Ih.Zn(s,0,255)<<8|Ih.Zn(i,0,255)<<16};const Ah=1024,Fh=1023,Oh=16384,Dh=8191,Lh=-8192;Ih.Ir=function(t,s,i,e){return(t=Ih.Zn(Math.floor(1024*t),-8192,8191))<0&&(t+=16384),(s=Ih.Zn(Math.floor(1024*s),-8192,8191))<0&&(s+=16384),(i=Ih.Zn(Math.floor(1024*i),-8192,8191))<0&&(i+=16384),-(16384*t*16384*1024+16384*s*1024+1024*i+(e=Ih.Zn(Math.floor(1023*e),0,1023)))},Ih.Er=function(t,s,i){return Ih.Ir(t,s,i,1)},Ih.Pr=function(t){if(t>=0)return(255&t)/255;{let s=Math.floor(-t/274877906944);return s>8191&&(s-=16384),s/1024}},Ih.Rr=function(t){if(t>=0)return((65280&t)>>8)/255;{let s=Math.floor(-t%274877906944/16777216);return s>8191&&(s-=16384),s/1024}},Ih.Ar=function(t){if(t>=0)return((16711680&t)>>16)/255;{let s=Math.floor(-t%16777216/1024);return s>8191&&(s-=16384),s/1024}},Ih.Fr=function(t){return Ch(t)?0:t>=0?1:Math.floor(-t%1024)/1023},Ih.Or=function(t,s){for(t=Math.floor(t),s=Math.floor(s);0!==s;){let i=s;s=t%s,t=i}return t};const Nh=[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]];Ih.Dr=function(t,s){if((t=Math.floor(t))===(s=Math.floor(s)))return[1,1];for(let i of Nh){let e=t/i[0]*i[1];if(Math.abs(s-e)<1)return i.slice(0);if(e=t/i[1]*i[0],Math.abs(s-e)<1)return[i[1],i[0]]}let i=Ih.Or(t,s);return[t/i,s/i]},Ih.Lr=function(t,s,i,e,n,r,h,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(n,h),c=Math.max(n,h);if(l<u||a>c)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||f>m)return!1;const g=n-t+h-i,y=r-s+o-e,w=i-t,S=e-s,v=h-n,b=o-r,x=Math.abs(S*v-b*w),M=v*y-b*g;if(Math.abs(M)>x)return!1;const T=w*y-S*g;return Math.abs(T)<=x},Ih.Nr=function(t,s,i,e,n,r,h,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(r<f||n>d)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||h>m)return!1;const g=a-t+u-i,y=l-s+c-e,w=i-t,S=e-s,v=u-a,b=c-l,x=Math.abs(S*v-b*w),M=v*y-b*g;if(Math.abs(M)>x)return!1;const T=w*y-S*g;return Math.abs(T)<=x},Ih.kr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=n.Br(),u=n.$r(),c=n.Wr(),f=n.Ur(),d=n.Vr(),p=n.zr(),m=n.jr(),g=n.qr();return Ih.Nr(t,s,i,e,r,h,o,a,l,u,c,f)||Ih.Nr(t,s,i,e,r,h,o,a,c,f,d,p)||Ih.Nr(t,s,i,e,r,h,o,a,d,p,m,g)||Ih.Nr(t,s,i,e,r,h,o,a,m,g,l,u)},Ih.Hr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e);let l=0;for(let u=n.length-4;l<=u;l+=2)if(Ih.Nr(t,s,i,e,r,h,o,a,n[l],n[l+1],n[l+2],n[l+3]))return!0;return Ih.Nr(t,s,i,e,r,h,o,a,n[l],n[l+1],n[0],n[1])};const kh=2,Bh=1e-6;Ih.Jr=function(t,s,i,e,n,r,h,o){const a=i-t,l=o-r,u=a*l-(e-s)*(h-n);if(0===u)return 2;const c=((s-e)*(h-t)+a*(o-s))/u;return 0<c&&c<1.000001?(l*(h-t)+(n-h)*(o-s))/u:2},Ih.Yr=function(t,s,i,e,n,r,h,o,a){const l=(h-n)*a,u=(o-r)*a;return Ih.Jr(t,s,i,e,n-l,r-u,h+l,o+u)},Ih.Xr=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,w=u*f+c*d,S=1/(p*y-m*m),v=(y*g-m*w)*S,b=(p*w-m*g)*S;return v>=0&&b>=0&&v+b<=1},Ih.Zr=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,w=f*u+d*c,S=p*g-m*m,v=(g*y-m*w)/S,b=(p*w-m*y)/S;return[1-v-b,v,b]},Ih.Kr=function(t,s,i,e,n,r,h,o,a,l,u,c){return[t*e+s*h+i*l,t*n+s*o+i*u,t*r+s*a+i*c]}}{const $h=self.Cs;let Wh=null,Uh="";if("undefined"!=typeof document){Wh=document;const Jh=document.querySelector("base");Uh=Jh&&Jh.hasAttribute("href")?Jh.getAttribute("href"):"",Uh&&(Uh.startsWith("/")&&(Uh=Uh.substr(1)),Uh.endsWith("/")||(Uh+="/"))}$h.Qr=function(){return Uh},$h.th=function(){if(!Wh)return"";const t=Wh.location;return $h.sh(t.origin+t.pathname)+Uh},$h.sh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},$h.ih=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},$h.eh=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},$h.nh=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},$h.rh=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},$h.hh=function(t){return t.replace(/\\/g,"/")},$h.oh=function(t,s){return s===(t?$h.eh(t).slice(1):"")},$h.ah=function(t,s){let i,e;return $h.ve(t)&&(i=$h.rh(t.name)),$h.le(t)&&(i=$h.rh(t)),$h.ve(s)&&(e=$h.rh(s.name)),$h.le(s)&&(e=$h.rh(s)),i===e},$h.uh=function(t){t=$h.hh(t);let s=/^\w\:\//.exec(t);s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=t.replace(/\/{2,}/g,"/")).length>1&&"/"===t.slice(-1)&&(t=t.slice(0,-1));const i=t.lastIndexOf("/")+1;let e,n="",r=t,h="";i>0&&(n=t.slice(0,i),r=t.slice(i)),e=r;const o=r.lastIndexOf(".");return o>0&&(h=r.slice(o),e=r.slice(0,-h.length)),{dir:n,fh:r,name:e,root:s,ext:h,dh:s+n+r}},$h.ph=function(t,s){return new Promise((i,e)=>{self.setTimeout(i,t,s)})},$h.mh=function(t){try{t()}catch(t){$h.Ls&&console.warn("Swallowed exception: ",t)}},$h.gh=function(){},$h.Ke=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},$h.yh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},$h.wh=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},$h.Sh=function(t,s){t.length=s},$h.bh=function(t){t&&0!==t.length&&$h.Sh(t,0)},$h.xh=function(t){if(t){for(let s=0;s<t.length;s++){let i=t[s];$h.Sh(i,0)}$h.Sh(t,0)}},$h.Mh=function(t,s,i){s|=0;const e=t.length;if(!(s<=e))for(let n=e;n<s;++n)t.push(i)},$h.Th=function(t,s,i){s|=0;const e=t.length;s<e?$h.Sh(t,s):s>e&&$h.Mh(t,s,i)},$h.Gh=function(t,s){$h.bh(t),$h.Fn(t,s)},$h.Fn=function(t,s){if(s.length<1e4)t.push(...s);else for(let i=0,e=s.length;i<e;++i)t.push(s[i])},$h._h=function(t,s){if((s=Math.floor(s))<0||s>=t.length)return;let i=t.length-1;for(let e=s;e<i;++e)t[e]=t[e+1];$h.Sh(t,i)},$h.Ch=function(t,s){let i=t.indexOf(s);i>=0&&t.splice(i,1)},$h.Ih=function(t,s){let i=t.length;if(s.length!==i)return!1;for(let e=0;e<i;++e)if(t[e]!==s[e])return!1;return!0},$h.Eh=function(t,s){let i=[],e=0;for(let n=0,r=t.length;n<r;++n){let r=t[n];s(r)?i.push(r):(t[e]=r,++e)}return $h.Sh(t,e),i},$h.Ph=function(t,s){const i=t.length;let e=0;for(let i=0,n=t.length;i<n;++i){let n=t[i];s.has(n)||(t[e++]=n)}return $h.Sh(t,e),i-e},$h.Rh=function(t,s){return t===Math.floor(t)&&t>=0&&t<s.length},$h.Ah=function(t,s){if(!$h.Rh(t,s))throw new RangeError("array index out of bounds")},$h.Fh=function(t){return t.slice()},$h.Oh=function(t,s){let i=[];for(let e of t)if($h.ge(e)){let t=s(e);if(!t)throw new Error("missing clone");if(t.constructor!==e.constructor)throw new Error("object is not a clone");i.push(t)}else $h.Te(e)?i.push($h.Oh(e,s)):i.push(e);return i},$h.Dh=function(t){let s=[];for(let i of t)s.push(i.slice());return s},$h.Lh=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},$h.Nh=function(t,s,i){const e=new Set;for(const n of t.values())s(n)&&(i?e.add(i(n)):e.add(n));return e},$h.kh=function(t,s){return t.union?t.union(s):new Set([...t,...s])},$h.Bh=function(t,s){for(const i of s)t.add(i);return t},$h.$h=function(t){for(let s of t)return s;return null},$h.xor=function(t,s){return!t!=!s},$h.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return t>i;case 5:return t>=i;default:return!1}},$h.Wh=function(t){for(let s in t)if(t.hasOwnProperty(s))return!0;return!1},$h.Uh=function(t,s){return t.length?new Promise((i,e)=>{const n=[];let r=0,h=!1;for(let o=0,a=t.length;o<a;++o)n.push(void 0),t[o].then(e=>{h||(n[o]=e,++r,r===t.length?i(n):s(r,t.length))}).catch(t=>{h=!0,e(t)})}):Promise.resolve([])};let Vh=[];$h.Vh=function(t){Vh.push(t)},$h.zh=function(){let t=0;for(let s of Vh)t+=s();return Math.floor(t)};let zh=1;const jh=new Map,qh=new MessageChannel;qh.port2.onmessage=function(t){const s=t.data,i=jh.get(s);jh.delete(s),i&&i(performance.now())},$h.jh=function(t){const s=zh++;return jh.set(s,t),qh.port1.postMessage(s),s},$h.qh=function(t){jh.delete(t)},$h.Hh=$h.jh,$h.Jh=function(){return new Promise(t=>$h.Hh(t))};const Hh=new Set;$h.Yh=function(t){const s=self.requestAnimationFrame(async i=>{await $h.Jh(),Hh.has(s)&&(Hh.delete(s),t(i))});return Hh.add(s),s},$h.Xh=function(t){Hh.has(t)&&(self.cancelAnimationFrame(t),Hh.delete(t))}}{const Yh=self.Cs;Yh.Zh=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},Yh.Kh=function(t){return!Yh.Zh(t)},Yh.Qh=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} ${t.statusText}`)},Yh.so=function(t,s){return fetch(t,s).then(t=>(Yh.Qh(t),t))},Yh.io=function(t){return Yh.so(t).then(t=>t.text())},Yh.eo=function(t){return Yh.so(t).then(t=>t.json())},Yh.no=function(t){return Yh.so(t).then(t=>t.blob())},Yh.ro=function(t){return Yh.so(t).then(t=>t.arrayBuffer())},Yh.ho=function(t){return new Promise((s,i)=>{const e=new Image;e.onload=()=>s(e),e.onerror=t=>i(t),e.src=t})},Yh.oo=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsArrayBuffer(t)})},Yh.ao=function(t){return"function"==typeof t.text?t.text():new Promise((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsText(t)})},Yh.lo=function(t){return Yh.ao(t).then(t=>JSON.parse(t))},Yh.uo=async function(t,s){let i=URL.createObjectURL(t);try{const t=await Yh.ho(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof t.decode&&await t.decode(),t}finally{i&&URL.revokeObjectURL(i)}},Yh.co=function(t,s){if("undefined"!=typeof document&&"function"==typeof document.createElement){const i=document.createElement("canvas");return i.width=t,i.height=s,i}return new OffscreenCanvas(t,s)},Yh.fo=function(t,s,i){if("number"!=typeof i&&(i=1),s=s||"image/png",i=Yh.Zn(i,0,1),t.convertToBlob)return t.convertToBlob({type:s,quality:i});if(t.toBlob)return new Promise(e=>t.toBlob(e,s,i));throw new Error("could not convert canvas to blob")},Yh.do=function(t,s,i){const e=Yh.co(t.width,t.height);return e.getContext("2d").drawImage(t,0,0),Yh.fo(e,s,i)},Yh.po=function(t,s,i){if(Yh.Ri.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>Yh.do(t,s,i));if(Yh.Ri.ImageBitmap)return createImageBitmap(t).then(t=>Yh.do(t,s,i));{const e=Yh.co(t.width,t.height);return e.getContext("2d").putImageData(t,0,0),Yh.fo(e,s,i)}},Yh.mo=function(t,s){t.clear();for(const i of s)t.add(i)},Yh.yo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},Yh.wo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},Yh.So=function t(s){if("object"==typeof s&&null!==s){if(s instanceof Set)return{_c3type_:"set",data:[...s].map(s=>t(s))};if(s instanceof Map)return{_c3type_:"map",data:[...s].map(s=>[s[0],t(s[1])])};{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},Yh.vo=function t(s){if("object"==typeof s&null!==s){if("set"===s._c3type_)return new Set(s.data.map(s=>t(s)));if("map"===s._c3type_)return new Map(s.data.map(s=>[s[0],t(s[1])]));{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},Yh.bo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const n of t)"-"===n?e>0&&(i=!0):i?(s+=n.toUpperCase(),i=!1):s+=n,++e;return s},Yh.xo=function(t){return"object"==typeof t&&"function"==typeof t.next},Yh.Mo=function(t,s){const i=[];if("function"==typeof s)for(let e=0;e<t;++e)i.push(s());else for(let e=0;e<t;++e)i.push(s);return i}}{let Xh=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},Zh=function(t,s,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};padTwoDigits=Xh,hueToRGB=Zh;const Kh=self.Cs,Qh=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,to=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;Kh.To=class{constructor(t,s,i,e){this.Go=NaN,this._o=NaN,this.Co=NaN,this.Io=NaN,this.Go=0,this._o=0,this.Co=0,this.Io=0,t instanceof Kh.To?this.set(t):this.Eo(t||0,s||0,i||0,e||0)}Po(t,s,i){return this.Go=+t,this._o=+s,this.Co=+i,this.Zn(),this}Eo(t,s,i,e){return this.Go=+t,this._o=+s,this.Co=+i,this.Io=+e,this.Zn(),this}set(t){return this.Go=t.Go,this._o=t._o,this.Co=t.Co,this.Io=t.Io,this}S(t){return this.set(t)}add(t){this.Go+=t.Go,this._o+=t._o,this.Co+=t.Co,this.Io+=t.Io,this.Zn()}Ro(t,s,i,e=0){this.Go+=+t,this._o+=+s,this.Co+=+i,this.Io+=+e,this.Zn()}Ao(t){this.Fo(Math.max(this.Go,t.Go)-Math.min(this.Go,t.Go)),this.Oo(Math.max(this._o,t._o)-Math.min(this._o,t._o)),this.Do(Math.max(this.Co,t.Co)-Math.min(this.Co,t.Co)),this.Lo(Math.max(this.Io,t.Io)-Math.min(this.Io,t.Io)),this.Zn()}No(t){this.Go=t.Go,this._o=t._o,this.Co=t.Co}Fo(t){this.Go=Kh.Zn(+t,0,1)}ko(){return this.Go}Oo(t){this._o=Kh.Zn(+t,0,1)}Bo(){return this._o}Do(t){this.Co=Kh.Zn(+t,0,1)}$o(){return this.Co}Lo(t){this.Io=Kh.Zn(+t,0,1)}Wo(){return this.Io}clone(){return Kh.jn(Kh.To,this.Go,this._o,this.Co,this.Io)}toArray(){return[this.Go,this._o,this.Co,this.Io]}Uo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.Go,t[s++]=this._o,t[s++]=this.Co,t[s]=this.Io}zo(t,s){const i=this.Go,e=this._o,n=this.Co,r=this.Io;for(let h=0;h<4;++h)t[s++]=i,t[s++]=e,t[s++]=n,t[s++]=r}jo(t,s){t[s++]=this.Go,t[s++]=this._o,t[s]=this.Co}equals(t){return this.Go===t.Go&&this._o===t._o&&this.Co===t.Co&&this.Io===t.Io}qo(t){return this.Go===t.Go&&this._o===t._o&&this.Co===t.Co}Ho(t,s,i){return this.Go===t&&this._o===s&&this.Co===i}Jo(t,s,i,e){return this.Go===t&&this._o===s&&this.Co===i&&this.Io===e}Yo(t,s){return t[s]===Math.fround(this.Go)&&t[s+1]===Math.fround(this._o)&&t[s+2]===Math.fround(this.Co)&&t[s+3]===Math.fround(this.Io)}Xo(t,s){return t[s]===Math.fround(this.Go)&&t[s+1]===Math.fround(this._o)&&t[s+2]===Math.fround(this.Co)}multiply(t){this.Go*=t.Go,this._o*=t._o,this.Co*=t.Co,this.Io*=t.Io}Zo(t){this.Go*=t,this._o*=t,this.Co*=t,this.Io*=t}Ko(){return this.Go*=this.Io,this._o*=this.Io,this.Co*=this.Io,this}Qo(){return this.Go/=this.Io,this._o/=this.Io,this.Co/=this.Io,this}Zn(){return this.Go=Kh.Zn(this.Go,0,1),this._o=Kh.Zn(this._o,0,1),this.Co=Kh.Zn(this.Co,0,1),this.Io=Kh.Zn(this.Io,0,1),this}ta(t){this.Go=Kh.Pr(t),this._o=Kh.Rr(t),this.Co=Kh.Ar(t),this.Io=Kh.Fr(t)}sa(t,s,i){return`rgb(${100*(Kh.te(t)?t:this.ko())}%, ${100*(Kh.te(s)?s:this.Bo())}%, ${100*(Kh.te(i)?i:this.$o())}%)`}ia(t,s,i,e){return`rgba(${100*(Kh.te(t)?t:this.ko())}%, ${100*(Kh.te(s)?s:this.Bo())}%, ${100*(Kh.te(i)?i:this.$o())}%, ${Kh.te(e)?e:this.Wo()})`}ea(){const t=Math.round(255*this.ko()),s=Math.round(255*this.Bo()),i=Math.round(255*this.$o());return"#"+Xh(t.toString(16))+Xh(s.toString(16))+Xh(i.toString(16))}na(t){if("string"!=typeof t)return!1;let s,i,e;if("#"===(t=t.trim()).charAt(0)&&(t=t.substr(1)),3===t.length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Fo(s),isFinite(i)&&this.Oo(i),isFinite(e)&&this.Do(e),this.Lo(1),!0}ra(){return`${Math.round(255*this.ko())}, ${Math.round(255*this.Bo())}, ${Math.round(255*this.$o())}`}ha(){return[Math.round(255*this.ko()),Math.round(255*this.Bo()),Math.round(255*this.$o())]}oa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Fo(i),isFinite(e)&&this.Oo(e),isFinite(n)&&this.Do(n),this.Lo(1),!0}aa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Fo(i),isFinite(e)&&this.Oo(e),isFinite(n)&&this.Do(n),this.Lo(1),!0}la(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.Fo(i),isFinite(e)&&this.Oo(e),isFinite(n)&&this.Do(n),isFinite(r)&&this.Lo(r),!0}ua(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.Fo(i),isFinite(e)&&this.Oo(e),isFinite(n)&&this.Do(n),isFinite(r)&&this.Lo(r),!0}ca(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.aa(t):this.oa(t);if(t.startsWith("rgba("))return t.includes("%")?this.ua(t):this.la(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.fa(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.aa(t):4===s.length&&this.ua(t):3===s.length?this.oa(t):4===s.length&&this.la(t)}}return this.na(t)}toJSON(){return[this.Go,this._o,this.Co,this.Io]}da(t,s,i,e){let n,r,h;if(t%=360,s=Kh.Zn(s,0,100),i=Kh.Zn(i,0,100),e=Kh.Zn(e,0,1),t/=360,i/=100,0==(s/=100))n=r=h=i;else{const e=i<.5?i*(1+s):i+s-i*s,o=2*i-e;n=Zh(o,e,t+1/3),r=Zh(o,e,t),h=Zh(o,e,t-1/3)}return this.Fo(n),this.Oo(r),this.Do(h),this.Lo(e),this}fa(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=Qh.exec(s),e=to.exec(s);return i&&4===i.length?(this.da(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.da(+i[1],+i[2],+i[3],+i[4]),0))}pa(){const t=this.Go,s=this._o,i=this.Co,e=this.Io;return`hsla(${Kh.To.ma(t,s,i)}, ${Kh.To.ga(t,s,i)}%, ${Kh.To.ya(t,s,i)}%, ${e})`}wa(){const t=this.Go,s=this._o,i=this.Co;return[Kh.To.ma(t,s,i),Kh.To.ga(t,s,i),Kh.To.ya(t,s,i),this.Io]}Sa(t){Array.isArray(t)&&(t.length<3||(this.Go=t[0],this._o=t[1],this.Co=t[2],t.length>=4?this.Io=t[3]:this.Io=1))}set r(t){this.Fo(t)}get r(){return this.ko()}set g(t){this.Oo(t)}get g(){return this.Bo()}set b(t){this.Do(t)}get b(){return this.$o()}set a(t){this.Lo(t)}get a(){return this.Wo()}va(t,s){switch(t){case 0:this.Fo(s);break;case 1:this.Oo(s);break;case 2:this.Do(s);break;case 3:this.Lo(s);break;default:throw new RangeError("invalid color index")}}ba(t){switch(t){case 0:return this.ko();case 1:return this.Bo();case 2:return this.$o();case 3:return this.Wo();default:throw new RangeError("invalid color index")}}static xa(t,s){let i,e;if(Array.isArray(t))i=new Kh.To,i.Sa(t);else{if(!(t instanceof Kh.To))throw new Error("unexpected type");i=t}if(Array.isArray(s))e=new Kh.To,e.Sa(s);else{if(!(s instanceof Kh.To))throw new Error("unexpected type");e=s}return i.equals(e)}static Ma(t,s){return Kh.Zn(Math.max(t,s)-Math.min(t,s),0,1)}static Ta(t,s){const i=new Kh.To;return i.Fo(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),i.Oo(Math.max(t._o,s._o)-Math.min(t._o,s._o)),i.Do(Math.max(t.Co,s.Co)-Math.min(t.Co,s.Co)),i.Lo(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),i}static Ga(t,s){const i=new Kh.To(0,0,0,1);return i.Fo(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),i.Oo(Math.max(t._o,s._o)-Math.min(t._o,s._o)),i.Do(Math.max(t.Co,s.Co)-Math.min(t.Co,s.Co)),i}static ma(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;let r=0;switch(e){case t:r=(s-i)/(e-n)+(s<i?6:0);break;case s:r=(i-t)/(e-n)+2;break;case i:r=(t-s)/(e-n)+4}return Math.round(r/6*360)}static ga(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;const r=e-n,h=(e+n)/2>.5?r/(2-e-n):r/(e+n);return Math.round(100*h)}static ya(t,s,i){const e=Math.max(t,s,i),n=(e+Math.min(t,s,i))/2;return e?Math.round(100*n):0}},Kh.To._a=Object.freeze(Kh.jn(Kh.To,1,1,1,1)),Kh.To.Ca=Object.freeze(Kh.jn(Kh.To,0,0,0,1)),Kh.To.Ia=Object.freeze(Kh.jn(Kh.To,0,0,0,0))}{const so=self.Cs;so.Ea=class{constructor(t,s){this.Pa=0,this.Ra=0,t instanceof so.Ea?this.S(t):this.set(t||0,s||0)}set(t,s){this.Pa=+t,this.Ra=+s}S(t){this.Pa=t.Pa,this.Ra=t.Ra}equals(t){return this.Pa===t.Pa&&this.Ra===t.Ra}Aa(t,s){return this.Pa===t&&this.Ra===s}Yo(t,s){return t[s]===Math.fround(this.Pa)&&t[s+1]===Math.fround(this.Ra)}Fa(t){this.Pa=+t}Oa(){return this.Pa}Da(t){this.Ra=+t}La(){return this.Ra}toArray(){return[this.Pa,this.Ra]}Uo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.Pa,t[s]=this.Ra}offset(t,s){this.Pa+=+t,this.Ra+=+s}scale(t,s){this.Pa*=t,this.Ra*=s}St(t,s){this.Pa/=t,this.Ra/=s}round(){this.Pa=Math.round(this.Pa),this.Ra=Math.round(this.Ra)}floor(){this.Pa=Math.floor(this.Pa),this.Ra=Math.floor(this.Ra)}ceil(){this.Pa=Math.ceil(this.Pa),this.Ra=Math.ceil(this.Ra)}angle(){return so.rr(0,0,this.Pa,this.Ra)}Na(){return this.Pa*this.Pa+this.Ra*this.Ra}length(){return so.sr(this.Pa,this.Ra)}ka(t,s){const i=this.Pa*s-this.Ra*t;this.Ra=this.Ra*s+this.Pa*t,this.Pa=i}rotate(t){0!==t&&this.ka(Math.sin(t),Math.cos(t))}Ba(t,s,i){0===t||s===this.Pa&&i===this.Ra||(this.Pa-=s,this.Ra-=i,this.ka(Math.sin(t),Math.cos(t)),this.Pa+=+s,this.Ra+=+i)}move(t,s){0!==s&&(this.Pa+=Math.cos(t)*s,this.Ra+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Pa/=t,this.Ra/=t)}Zn(t,s){this.Pa=so.Zn(this.Pa,t,s),this.Ra=so.Zn(this.Ra,t,s)}Gt(t){return this.Pa*t.Pa+this.Ra*t.Ra}reverse(){this.Pa=-this.Pa,this.Ra=-this.Ra}$a(){let t=this.Pa;return this.Pa=this.Ra,this.Ra=-t,this}}}{const io=self.Cs;io.Rect=class{constructor(t,s,i,e){this.Wa=NaN,this.Ua=NaN,this.Va=NaN,this.za=NaN,this.Wa=0,this.Ua=0,this.Va=0,this.za=0,t instanceof io.Rect?this.S(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.Wa=+t,this.Ua=+s,this.Va=+i,this.za=+e}ja(t,s,i,e){t=+t,s=+s,this.Wa=t,this.Ua=s,this.Va=t+ +i,this.za=s+ +e}S(t){this.Wa=+t.Wa,this.Ua=+t.Ua,this.Va=+t.Va,this.za=+t.za}clone(){return new io.Rect(this.Wa,this.Ua,this.Va,this.za)}static qa(t,s){const i=new io.Rect;return i.Ha(Math.min(t.Wa,s.Wa)),i.Ja(Math.min(t.Ua,s.Ua)),i.Ya(Math.max(t.Va,s.Va)),i.Xa(Math.max(t.za,s.za)),i}static Za(t){return new io.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.Wa===t.Wa&&this.Ua===t.Ua&&this.Va===t.Va&&this.za===t.za}Ka(t,s,i,e){return this.Wa===t&&this.Ua===s&&this.width()===i&&this.height()===e}Yo(t,s){return t[s]===Math.fround(this.Wa)&&t[s+1]===Math.fround(this.Ua)&&t[s+2]===Math.fround(this.Va)&&t[s+3]===Math.fround(this.za)}Ha(t){this.Wa=+t}Qa(){return this.Wa}Ja(t){this.Ua=+t}tl(){return this.Ua}Ya(t){this.Va=+t}sl(){return this.Va}Xa(t){this.za=+t}il(){return this.za}toArray(){return[this.Wa,this.Ua,this.Va,this.za]}Uo(){return new Float64Array(this.toArray())}el(){return new DOMRect(this.Wa,this.Ua,this.width(),this.height())}static nl(t){return io.jn(io.Rect,t.left,t.top,t.right,t.bottom)}Vo(t,s){t[s++]=this.Wa,t[s++]=this.Ua,t[s++]=this.Va,t[s]=this.za}rl(t,s){t[s++]=this.Wa,t[s++]=this.Ua,t[s++]=this.Va,t[s++]=this.Ua,t[s++]=this.Va,t[s++]=this.za,t[s++]=this.Wa,t[s]=this.za}hl(t,s,i){t[s++]=this.Wa,t[s++]=this.Ua,t[s++]=i,t[s++]=this.Va,t[s++]=this.Ua,t[s++]=i,t[s++]=this.Va,t[s++]=this.za,t[s++]=i,t[s++]=this.Wa,t[s++]=this.za,t[s]=i}width(){return this.Va-this.Wa}height(){return this.za-this.Ua}ol(){return(this.Wa+this.Va)/2}al(){return(this.Ua+this.za)/2}offset(t,s){t=+t,s=+s,this.Wa+=t,this.Ua+=s,this.Va+=t,this.za+=s}offsetLeft(t){this.Wa+=+t}offsetTop(t){this.Ua+=+t}ll(t){this.Va+=+t}ul(t){this.za+=+t}cl(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.Ua<this.za?this.Wa<this.Va?this.za=this.Ua+this.width():this.za=this.Ua-this.width():this.Wa<this.Va?this.za=this.Ua-this.width():this.za=this.Ua+this.width()}fl(t,s){t=+t,s=+s,this.Wa-=t,this.Ua-=s,this.Va+=t,this.za+=s}dl(t,s){t=+t,s=+s,this.Wa+=t,this.Ua+=s,this.Va-=t,this.za-=s}multiply(t,s){this.Wa*=t,this.Ua*=s,this.Va*=t,this.za*=s}St(t,s){this.Wa/=t,this.Ua/=s,this.Va/=t,this.za/=s}pl(t){this.Wa=+t-this.Wa,this.Va=+t-this.Va}ml(t){this.Ua=+t-this.Ua,this.za=+t-this.za}gl(t,s){const i=this.width(),e=this.height(),n=this.Qa()+i*t,r=this.tl()+e*s;this.ja(n-e*s,r-i*t,e,i)}yl(){const t=this.Wa;this.Wa=this.Va,this.Va=t}wl(){const t=this.Ua;this.Ua=this.za,this.za=t}Sl(t){const s=this.Ua;this.Ua=+t-this.za,this.za=+t-s}round(){this.Wa=Math.round(this.Wa),this.Ua=Math.round(this.Ua),this.Va=Math.round(this.Va),this.za=Math.round(this.za)}vl(){this.Wa=Math.ceil(this.Wa),this.Ua=Math.ceil(this.Ua),this.Va=Math.floor(this.Va),this.za=Math.floor(this.za)}bl(){this.Wa=Math.floor(this.Wa),this.Ua=Math.floor(this.Ua),this.Va=Math.ceil(this.Va),this.za=Math.ceil(this.za)}floor(){this.Wa=Math.floor(this.Wa),this.Ua=Math.floor(this.Ua),this.Va=Math.floor(this.Va),this.za=Math.floor(this.za)}ceil(){this.Wa=Math.ceil(this.Wa),this.Ua=Math.ceil(this.Ua),this.Va=Math.ceil(this.Va),this.za=Math.ceil(this.za)}Zn(t,s,i,e){this.Wa=Math.max(this.Wa,+t),this.Ua=Math.max(this.Ua,+s),this.Va=Math.min(this.Va,+i),this.za=Math.min(this.za,+e)}xl(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.Wa=io.Zn(this.Wa,t,i),this.Ua=io.Zn(this.Ua,s,e),this.Va=io.Zn(this.Va,t,i),this.za=io.Zn(this.za,s,e)}normalize(){this.Wa>this.Va&&this.yl(),this.Ua>this.za&&this.wl()}Ml(t){return!(t.Va<this.Wa||t.za<this.Ua||t.Wa>this.Va||t.Ua>this.za)}Tl(t,s,i){return!(t.Va+s<this.Wa||t.za+i<this.Ua||t.Wa+s>this.Va||t.Ua+i>this.za)}Gl(t,s){return t>=this.Wa&&t<=this.Va&&s>=this.Ua&&s<=this.za}_l(t){return t.Wa>=this.Wa&&t.Ua>=this.Ua&&t.Va<=this.Va&&t.za<=this.za}Cl(t){t.Wa<this.Wa&&(this.Wa=+t.Wa),t.Ua<this.Ua&&(this.Ua=+t.Ua),t.Va>this.Va&&(this.Va=+t.Va),t.za>this.za&&(this.za=+t.za)}Il(t){this.Wa=io.Ct(t.Wa,t.Va,this.Wa),this.Ua=io.Ct(t.Ua,t.za,this.Ua),this.Va=io.Ct(t.Wa,t.Va,this.Va),this.za=io.Ct(t.Ua,t.za,this.za)}}}{const eo=self.Cs;eo.El=class{constructor(t,s,i,e,n,r,h,o){this.Pl=NaN,this.Rl=NaN,this.Al=NaN,this.Fl=NaN,this.Ol=NaN,this.Dl=NaN,this.Ll=NaN,this.Nl=NaN,this.Pl=0,this.Rl=0,this.Al=0,this.Fl=0,this.Ol=0,this.Dl=0,this.Ll=0,this.Nl=0,t instanceof eo.El?this.S(t):this.set(t||0,s||0,i||0,e||0,n||0,r||0,h||0,o||0)}set(t,s,i,e,n,r,h,o){this.Pl=+t,this.Rl=+s,this.Al=+i,this.Fl=+e,this.Ol=+n,this.Dl=+r,this.Ll=+h,this.Nl=+o}kl(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}S(t){this.Pl=t.Pl,this.Rl=t.Rl,this.Al=t.Al,this.Fl=t.Fl,this.Ol=t.Ol,this.Dl=t.Dl,this.Ll=t.Ll,this.Nl=t.Nl}equals(t){return this.Pl===t.Pl&&this.Rl===t.Rl&&this.Al===t.Al&&this.Fl===t.Fl&&this.Ol===t.Ol&&this.Dl===t.Dl&&this.Ll===t.Ll&&this.Nl===t.Nl}Bl(t){this.Pl=+t}Br(){return this.Pl}$l(t){this.Rl=+t}$r(){return this.Rl}Wl(t){this.Al=+t}Wr(){return this.Al}Ul(t){this.Fl=+t}Ur(){return this.Fl}Vl(t){this.Ol=+t}Vr(){return this.Ol}zl(t){this.Dl=+t}zr(){return this.Dl}jl(t){this.Ll=+t}jr(){return this.Ll}ql(t){this.Nl=+t}qr(){return this.Nl}Hl(){return new DOMQuad(new DOMPoint(this.Pl,this.Rl),new DOMPoint(this.Al,this.Fl),new DOMPoint(this.Ol,this.Dl),new DOMPoint(this.Ll,this.Nl))}static Jl(t){return eo.jn(eo.El,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Pl,this.Rl,this.Al,this.Fl,this.Ol,this.Dl,this.Ll,this.Nl]}Uo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.Pl,t[s++]=this.Rl,t[s++]=this.Al,t[s++]=this.Fl,t[s++]=this.Ol,t[s++]=this.Dl,t[s++]=this.Ll,t[s]=this.Nl}Yl(t,s,i){t[s++]=this.Pl,t[s++]=this.Rl,t[s++]=i,t[s++]=this.Al,t[s++]=this.Fl,t[s++]=i,t[s++]=this.Ol,t[s++]=this.Dl,t[s++]=i,t[s++]=this.Ll,t[s++]=this.Nl,t[s]=i}offset(t,s){t=+t,s=+s,this.Pl+=t,this.Rl+=s,this.Al+=t,this.Fl+=s,this.Ol+=t,this.Dl+=s,this.Ll+=t,this.Nl+=s}round(){this.Pl=Math.round(this.Pl),this.Rl=Math.round(this.Rl),this.Al=Math.round(this.Al),this.Fl=Math.round(this.Fl),this.Ol=Math.round(this.Ol),this.Dl=Math.round(this.Dl),this.Ll=Math.round(this.Ll),this.Nl=Math.round(this.Nl)}floor(){this.Pl=Math.floor(this.Pl),this.Rl=Math.floor(this.Rl),this.Al=Math.floor(this.Al),this.Fl=Math.floor(this.Fl),this.Ol=Math.floor(this.Ol),this.Dl=Math.floor(this.Dl),this.Ll=Math.floor(this.Ll),this.Nl=Math.floor(this.Nl)}ceil(){this.Pl=Math.ceil(this.Pl),this.Rl=Math.ceil(this.Rl),this.Al=Math.ceil(this.Al),this.Fl=Math.ceil(this.Fl),this.Ol=Math.ceil(this.Ol),this.Dl=Math.ceil(this.Dl),this.Ll=Math.ceil(this.Ll),this.Nl=Math.ceil(this.Nl)}Xl(t){this.Pl=t.Wa,this.Rl=t.Ua,this.Al=t.Va,this.Fl=t.Ua,this.Ol=t.Va,this.Dl=t.za,this.Ll=t.Wa,this.Nl=t.za}Zl(t,s){0===s?this.Xl(t):this.Kl(t,Math.sin(s),Math.cos(s))}Kl(t,s,i){const e=t.Wa*s,n=t.Ua*s,r=t.Va*s,h=t.za*s,o=t.Wa*i,a=t.Ua*i,l=t.Va*i,u=t.za*i;this.Pl=o-n,this.Rl=a+e,this.Al=l-n,this.Fl=a+r,this.Ol=l-h,this.Dl=u+r,this.Ll=o-h,this.Nl=u+e}Ql(t){t.set(Math.min(this.Pl,this.Al,this.Ol,this.Ll),Math.min(this.Rl,this.Fl,this.Dl,this.Nl),Math.max(this.Pl,this.Al,this.Ol,this.Ll),Math.max(this.Rl,this.Fl,this.Dl,this.Nl))}Gl(t,s){let i=this.Al-this.Pl,e=this.Fl-this.Rl;const n=this.Ol-this.Pl,r=this.Dl-this.Rl,h=t-this.Pl,o=s-this.Rl;let a=i*i+e*e,l=i*n+e*r,u=i*h+e*o;const c=n*n+r*r,f=n*h+r*o;let d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return p>=0&&m>0&&p+m<1||(i=this.Ll-this.Pl,e=this.Nl-this.Rl,a=i*i+e*e,l=i*n+e*r,u=i*h+e*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d,p>=0&&m>0&&p+m<1)}ol(){return(this.Pl+this.Al+this.Ol+this.Ll)/4}al(){return(this.Rl+this.Fl+this.Dl+this.Nl)/4}tu(t,s,i,e){return!(!this.Gl(t,s)&&!this.Gl(i,e))||eo.kr(t,s,i,e,this)}su(t){let s=t.ol(),i=t.al();if(this.Gl(s,i))return!0;if(s=this.ol(),i=this.al(),t.Gl(s,i))return!0;const e=this.Pl,n=this.Rl,r=this.Al,h=this.Fl,o=this.Ol,a=this.Dl,l=this.Ll,u=this.Nl;return eo.kr(e,n,r,h,t)||eo.kr(r,h,o,a,t)||eo.kr(o,a,l,u,t)||eo.kr(l,u,e,n,t)}iu(){const t=this.Pl,s=this.Rl;this.Pl=this.Al,this.Rl=this.Fl,this.Al=this.Ol,this.Fl=this.Dl,this.Ol=this.Ll,this.Dl=this.Nl,this.Ll=t,this.Nl=s}eu(){this.nu(0,2),this.nu(1,3),this.nu(6,4),this.nu(7,5)}ru(){this.nu(0,6),this.nu(1,7),this.nu(2,4),this.nu(3,5)}hu(){this.nu(2,6),this.nu(3,7)}nu(t,s){const i=this.ou(t);this.au(t,this.ou(s)),this.au(s,i)}ou(t){switch(t){case 0:return this.Pl;case 1:return this.Rl;case 2:return this.Al;case 3:return this.Fl;case 4:return this.Ol;case 5:return this.Dl;case 6:return this.Ll;case 7:return this.Nl;default:throw new RangeError("invalid quad point index")}}au(t,s){switch(s=+s,t){case 0:this.Pl=s;break;case 1:this.Rl=s;break;case 2:this.Al=s;break;case 3:this.Fl=s;break;case 4:this.Ol=s;break;case 5:this.Dl=s;break;case 6:this.Ll=s;break;case 7:this.Nl=s;break;default:throw new RangeError("invalid quad point index")}}St(t,s){this.Pl/=t,this.Rl/=s,this.Al/=t,this.Fl/=s,this.Ol/=t,this.Dl/=s,this.Ll/=t,this.Nl/=s}}}{const no=self.Cs,ro=self.assert,ho=[0,0,1,0,1,1,0,1],oo=no.jn(no.El);no.lu=class extends no.Vn{constructor(t,s=!0){super(),t||(t=ho),this.uu=Float64Array.from(t),this.cu=new no.Rect,this.fu=!0,this.du=s}qn(){}pu(){return this.uu}mu(){return this.uu.length/2}gu(t){this.uu.length===t.length?this.uu.set(t):this.uu=Float64Array.from(t),this.fu=!0}yu(){this.gu(ho)}S(t){this.gu(t.uu)}wu(){this.fu=!0}Su(){if(!this.fu)return;const t=this.uu;let s=t[0],i=t[1],e=s,n=i;for(let r=0,h=t.length;r<h;r+=2){const h=t[r],o=t[r+1];h<s&&(s=h),h>e&&(e=h),o<i&&(i=o),o>n&&(n=o)}this.cu.set(s,i,e,n),this.fu=!1}Xl(t,s,i){let e=this.uu;8!==e.length&&(e=new Float64Array(8),this.uu=e),e[0]=t.Qa()-s,e[1]=t.tl()-i,e[2]=t.sl()-s,e[3]=t.tl()-i,e[4]=t.sl()-s,e[5]=t.il()-i,e[6]=t.Qa()-s,e[7]=t.il()-i,this.cu.S(t),0===s&&0===i||this.cu.offset(-s,-i),this.fu=!1}vu(t,s,i){oo.S(t),oo.offset(s,i),this.gu(oo.toArray()),this.fu=!0}transform(t,s,i){let e=0,n=1;0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.bu(t,s,e,n)}bu(t,s,i,e){const n=this.uu;for(let r=0,h=n.length;r<h;r+=2){const h=r+1,o=n[r]*t,a=n[h]*s;n[r]=o*e-a*i,n[h]=a*e+o*i}this.fu=!0}offset(t,s){const i=this.uu;for(let e=0,n=i.length;e<n;e+=2)i[e]+=t,i[e+1]+=s}Gl(t,s){const i=this.uu;if(t===i[0]&&s===i[1])return!0;this.Su();const e=this.cu,n=e.Qa()-110,r=e.tl()-101,h=e.sl()+131,o=e.il()+120;let a=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0;n<t?(a=n,u=t):(a=t,u=n),r<s?(l=r,c=s):(l=s,c=r),h<t?(f=h,p=t):(f=t,p=h),o<s?(d=o,m=s):(d=s,m=o);let g=0,y=0;for(let e=0,w=i.length;e<w;e+=2){const S=(e+2)%w,v=i[e],b=i[e+1],x=i[S],M=i[S+1];no.Nr(n,r,t,s,a,u,l,c,v,b,x,M)&&++g,no.Nr(h,o,t,s,f,p,d,m,v,b,x,M)&&++y}return g%2==1||y%2==1}xu(t,s,i){const e=t.uu,n=this.uu;if(this.Gl(e[0]+s,e[1]+i))return!0;if(t.Gl(n[0]-s,n[1]-i))return!0;for(let t=0,r=n.length;t<r;t+=2){const h=(t+2)%r,o=n[t],a=n[t+1],l=n[h],u=n[h+1];let c=0,f=0,d=0,p=0;o<l?(c=o,d=l):(c=l,d=o),a<u?(f=a,p=u):(f=u,p=a);for(let t=0,n=e.length;t<n;t+=2){const r=(t+2)%n,h=e[t]+s,m=e[t+1]+i,g=e[r]+s,y=e[r+1]+i;if(no.Nr(o,a,l,u,c,d,f,p,h,m,g,y))return!0}}return!1}tu(t,s,i,e,n,r){if(this.Gl(i-t,e-s))return!0;if(this.Gl(n-t,r-s))return!0;let h=0,o=0,a=0,l=0;i<n?(h=i,a=n):(h=n,a=i),e<r?(o=e,l=r):(o=r,l=e);const u=this.uu;for(let c=0,f=u.length;c<f;c+=2){const d=(c+2)%f,p=u[c]+t,m=u[c+1]+s,g=u[d]+t,y=u[d+1]+s;if(no.Nr(i,e,n,r,h,a,o,l,p,m,g,y))return!0}return!1}eu(t){const s=this.uu;for(let i=0,e=s.length;i<e;i+=2)s[i]=2*t-s[i];this.fu=!0}ru(t){const s=this.uu;for(let i=0,e=s.length;i<e;i+=2){const e=i+1;s[e]=2*t-s[e]}this.fu=!0}hu(){const t=this.uu;for(let s=0,i=t.length;s<i;s+=2){const i=s+1,e=t[s];t[s]=t[i],t[i]=e}this.fu=!0}Mu(){const t=this.uu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i];return s/this.mu()}Tu(){const t=this.uu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i+1];return s/this.mu()}Gu(){return this.uu}_u(){return this.mu()}Cu(){return this.du}}}{const ao=self.Cs;ao.Iu=class extends ao.Vn{constructor(t){if(super(),this.Eu=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}qn(){this.Pu(),this.Eu=null}Ru(){return 0===this.Eu.size}Pu(){const t=this.Eu;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){const e=this.Eu;let n=e.get(t);n||(n=new Map,e.set(t,n)),n.set(s,i)}qs(t,s){const i=this.Eu.get(t);return i?i.get(s):i}js(t,s){const i=this.Eu.get(t);return!!i&&i.has(s)}Au(t,s){const i=this.Eu,e=i.get(t);if(!e)return!1;const n=e.delete(s);return n&&0===e.size&&i.delete(t),n}Fu(t){const s=this.Eu,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[i,e]of s.entries())e.delete(t)&&0===e.size&&s.delete(i)}Ou(){let t=0;for(const s of this.Eu.values())t+=s.size;return t}*values(){for(const t of this.Eu.values())yield*t.values()}*Du(){for(const[t,s]of this.Eu.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.Eu.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const lo=self.Cs;lo.Lu=class extends lo.Vn{constructor(){super(),this.Nu=new Set,this.ku=[],this.Bu=!1}qn(){this.Pu()}Pu(){this.Nu.clear(),lo.bh(this.ku),this.Bu=!1}$u(t){this.Nu.has(t)||(this.Nu.add(t),this.Bu||this.ku.push(t))}js(t){return this.Nu.has(t)}Au(t){this.Nu.delete(t)&&(this.Bu=!0)}Ou(){return this.Nu.size}Ru(){return 0===this.Nu.size}Wu(){return this.Bu&&(this.Uu(),this.Bu=!1),this.ku}Uu(){const t=this.ku;lo.bh(t);for(const s of this.Nu)t.push(s)}}}{const uo=self.Cs,co=new Map,fo=new Map,po=new Map,mo=new Map,go=new Map,yo=new Map,wo=new Map,So=new Map,vo=new Map;vo.set("linear","noease"),vo.set("default","noease");const bo=["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"],xo=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Mo=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]);self.Vu=class t{constructor(){}static zu(){return"default"}static ju(){return"noease"}static qu(t){return Mo.get(t)}static Hu(s,...i){let e,n;this.Ju(),s?(po.has(s)||po.set(s,new Map),e=po.get(s),n=[...e.keys()].filter(i=>!t.Yu(i,s)||t.Yu(i,s).transition.Xu())):(e=go,n=[...e.keys()]);const r=n.sort();return[...fo.keys()].concat(r).filter(t=>!i.includes(t))}static Zu(){this.Ju();const t=[...go.keys()];return t.sort(),[...fo.keys()].concat(t)}static Ku(){this.Ju();const t=[...go.keys()];return t.sort(),t}static Qu(t){for(const s of bo)if(self.lang(`ui.bars.timeline.eases.${s}`)===t)return!0;for(const s of xo)if(self.lang(`ui.bars.timeline.short-eases.${s}`)===t)return!0}static tc(t){return this.Ju(),[...fo.keys()].includes(t)}static sc(s){const i=vo.get(s);return i?co.get(i):t.tc(s)?co.get(s):wo.has(s)?wo.get(s):void 0}static ec(t){return this.Ju(),So.get(t)}static nc(s,i){this.Ju();const e=t.sc(s);if(e)return e;if(!i)throw new Error("missing ease function");return po.get(i).get(s)}static Yu(t,s){this.Ju();const i=mo.get(s);if(i)return i.get(t)}static rc(s,i){return this.Ju(),!!t.sc(s)||!!po.get(i).get(s)}static hc(s){this.Ju();return t.sc(s)||go.get(s)}static oc(t){return this.Ju(),yo.get(t)}static ac(t){return this.Ju(),this.Zu()[t]}static lc(t,s){return this.Ju(),this.Hu(s).indexOf(t)}static uc(t){return this.lc(t)}static Ju(){0===co.size&&(this.cc("default",()=>{}),this.cc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.cc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.cc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.cc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.cc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.cc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.cc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.cc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.cc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.cc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.cc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.cc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.cc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.cc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.cc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.cc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.cc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.cc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.cc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.cc("easeinquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.cc("easeoutquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.cc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.cc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.cc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.cc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.cc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.cc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.cc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.cc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.cc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.cc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.fc("cubicbezier",this.dc),this.fc("spline",this.mc))}static cc(s,i,e=!1){if("function"==typeof i)t.yc(s,i,"predefined");else{if(!uo.Te(i))throw new Error("unexpected arguments");if(self.wc){const n=uo.jn(self.wc,s,e);n.Sc(i),t.yc(s,(t,s,i,e)=>n.vc(t,s,i,e),"predefined"),So.set(s,n)}else{const n=uo.jn(uo.bc,[s,i.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);n.xc(e),t.yc(s,(t,s,i,e)=>n.vc(t,s,i,e),"predefined")}}}static fc(s,i){t.yc(s,i,"private")}static Mc(s,i,e,n){this.Ju(),t.yc(s,i,"custom",e,n)}static Tc(t,s){if(this.tc(t))return;if([...wo.keys()].includes(t))return;const i=po.get(s);i&&i.delete(t);const e=mo.get(s);e&&e.delete(t)}static yc(t,s,i,e,n){switch(i){case"predefined":co.set(t,s),fo.set(t,s);break;case"custom":e?(po.has(e)||po.set(e,new Map),mo.has(e)||mo.set(e,new Map),po.get(e).set(t,s),mo.get(e).set(t,n)):(go.set(t,s),yo.set(t,n));break;case"private":co.set(t,s),wo.set(t,s);break;default:throw new Error("unexpected ease mode")}}static Gc(t,s,i,e){return 0===e?s:i*t/e+s}static dc(t,s,i,e,n){return s+3*t*(i-s)+3*t**2*(s+e-2*i)+t**3*(n-s+3*i-3*e)}static mc(t,s,i,e,n,r,h,o,a,l){if(e===n&&r===h)return t;const u=Do(t,s,e,r,o,l),c=Po(i,n,h,a),f=Ro(i,n,h,a),d=Ao(i,n,h,a);return Fo(u,c,f,d)}static _c(t,s,i,e){const n=[],r=Po(t,s,i,e),h=Ro(t,s,i,e),o=Ao(t,s,i,e);for(let t=0;t<To;++t){const s=Fo(t*Go,r,h,o);n.push(s)}return n}};const To=11,Go=1/(To-1),_o=4,Co=.01,Io=1e-7,Eo=10,Po=(t,s,i,e)=>e-3*i+3*s-t,Ro=(t,s,i,e)=>3*i-6*s+3*t,Ao=(t,s,i,e)=>3*(s-t),Fo=(t,s,i,e)=>((s*t+i)*t+e)*t,Oo=(t,s,i,e)=>3*s*t*t+2*i*t+e,Do=(t,s,i,e,n,r)=>{if(1==t)return 1;let h=0,o=1,a=r[o],l=To-1;for(r[To-1];o!=l&&a<=t;)o++,a=r[o],h+=Go;o--,a=r[o];let u=h+(t-a)/(r[o+1]-a)*Go;const c=Po(s,i,e,n),f=Ro(s,i,e,n),d=Ao(s,i,e,n),p=Oo(u,c,f,d);if(0===p)return u;if(p>=.01){for(let s=0;s<4;++s)u-=(Fo(u,c,f,d)-t)/Oo(u,c,f,d);return u}{let s,i,e=h,n=h+Go,r=0;do{u=e+(n-e)/2;let h=Fo(u,c,f,d)-t;h>0?n=u:e=u,s=Math.abs(h)>1e-7,i=++r<10}while(s&&i);return u}}}{let Lo=function(t){No.le(t)};RequireStringOrNumber=Lo;const No=self.Cs;No.Cc=class{constructor(t){this.Ic=[],this.Yn=t||"",this.Ec=0}qn(){this.Pu(),this.Ic=null}Pc(){return this.Yn}Pu(){No.xh(this.Ic),this.Ec=0}Rc(){return this.Ec}Ac(t=Math.random()*this.Rc()){let s=0;for(const[i,e]of this.Ic)if(s+=i,t<s)return e;return 0}Fc(){return!!this.Ic.length}Oc(t,s){Lo(s),this.Ec+=t,this.Ic.push([t,s])}Dc(t,s){Lo(s);const i=0===t;for(let e=0;e<this.Ic.length;e++){const n=this.Ic[e],r=i||n[0]===t,h=n[1]===s;if(r&&h){this.Ic.splice(e,1),this.Ec-=n[0];break}}}Lc(){return JSON.stringify(this.Ic)}static Nc(t,s){const i=new No.Cc(s),e=JSON.parse(t);for(const t of e){const s=t[0],e=t[1];i.Oc(s,e)}return i}}}{const ko=self.Cs;let Bo=0;ko.kc=class{constructor(t,s){this.Bc=t,this.$c=s,this.Wc=Bo++,this.Bc.Uc("runtime","screen-reader-text",{type:"create",id:this.Wc,text:this.$c})}qn(){this.Bc.Uc("runtime","screen-reader-text",{type:"release",id:this.Wc}),this.Bc=null,this.$c="",this.Wc=-1}Vc(t){this.$c!==t&&(this.$c=t,this.Bc.Uc("runtime","screen-reader-text",{type:"update",id:this.Wc,text:this.$c}))}}}{const $o=self.Cs;$o.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.zc=!1,this.jc=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.jc)throw new Error(`cannot stop async event '${this.type}' propagation`);this.zc=!0}}}{const Wo=self.Cs,Uo=self.assert;Wo.Event.qc=class extends Wo.Vn{constructor(t){super(),this.Hc=t,this.Jc=[],this.Yc=new Set,this.Xc=[],this.Zc=new Set,this.Kc=0,this.Qc=[]}qn(){this.Kc>0||(Wo.bh(this.Jc),this.Yc.clear(),Wo.bh(this.Xc),this.Zc.clear(),Wo.bh(this.Qc),Wo.qn(this))}tf(t,s){if(this.sf())this.Qc.push({if:"add",ef:t,capture:s});else if(s){if(this.Yc.has(t))return;this.Jc.push(t),this.Yc.add(t)}else{if(this.Zc.has(t))return;this.Xc.push(t),this.Zc.add(t)}}nf(t,s){this.sf()?this.Qc.push({if:"remove",ef:t,capture:s}):s?this.Yc.has(t)&&(this.Yc.delete(t),Wo.Ch(this.Jc,t)):this.Zc.has(t)&&(this.Zc.delete(t),Wo.Ch(this.Xc,t))}rf(){return!this.Jc.length&&!this.Xc.length}sf(){return this.Kc>0}hf(){const t=new Set,s=new Set;for(const i of this.Qc)if("add"===i.if)this.tf(i.ef,i.capture),i.capture?s.delete(i.ef):t.delete(i.ef);else{if("remove"!==i.if)throw new Error("invalid op");i.capture?(this.Yc.delete(i.ef),s.add(i.ef)):(this.Zc.delete(i.ef),t.add(i.ef))}Wo.Ph(this.Xc,t),Wo.Ph(this.Jc,s),Wo.bh(this.Qc)}af(t){this.lf();let s=!1;for(let i=0,e=this.Jc.length;i<e;++i)if(this.Jc[i](t),t.zc){s=!0;break}if(!s)for(let s=0,i=this.Xc.length;s<i&&(this.Xc[s](t),!t.zc);++s);return this.uf(),!t.defaultPrevented}cf(t){this.lf();for(let s=0,i=this.Jc.length;s<i;++s)this.Jc[s](t);for(let s=0,i=this.Xc.length;s<i;++s)this.Xc[s](t);return this.uf(),!0}lf(){this.Kc++}uf(){this.Kc--,0===this.Kc&&this.Qc.length>0&&this.hf()}ff(t){t?this.lf():this.uf()}df(t){let s=[];for(let i=0,e=this.Jc.length;i<e;++i){let e=this.Jc[i];s.push(Wo.pf(()=>e(t)))}for(let i=0,e=this.Xc.length;i<e;++i){let e=this.Xc[i];s.push(Wo.pf(()=>e(t)))}return Promise.all(s).then(()=>!t.defaultPrevented)}mf(t){const s=[];this.lf();for(let i=0,e=this.Jc.length;i<e;++i){const e=this.Jc[i](t);e instanceof Promise&&s.push(e)}for(let i=0,e=this.Xc.length;i<e;++i){const e=this.Xc[i](t);e instanceof Promise&&s.push(e)}return this.uf(),s.length?Promise.all(s).then(()=>!t.defaultPrevented):!t.defaultPrevented}async gf(t){return await this.mf(t)}async yf(t){this.lf();for(let s=0,i=this.Jc.length;s<i;++s){const i=this.Jc[s](t);i instanceof Promise&&await i}for(let s=0,i=this.Xc.length;s<i;++s){const i=this.Xc[s](t);i instanceof Promise&&await i}return this.uf(),!t.defaultPrevented}*wf(t){this.lf();for(let s=0,i=this.Jc.length;s<i;++s){const i=this.Jc[s](t);Wo.xo(i)&&(yield*i)}for(let s=0,i=this.Xc.length;s<i;++s){const i=this.Xc[s](t);Wo.xo(i)&&(yield*i)}this.uf()}}}{const Vo=self.Cs;Vo.Event.Sf=class extends Vo.Vn{constructor(){super(),this.vf=new Map,this.bf=!1}qn(){if(this.bf)throw new Error("already released");this.xf(),this.bf=!0,Vo.qn(this)}Hn(){return this.bf}xf(){if(this.vf){for(let t of this.vf.values())t.qn();this.vf.clear()}}Mf(t,s){let i=this.vf.get(t);return i||(s?(i=Vo.jn(Vo.Event.qc,t),this.vf.set(t,i),i):null)}Tf(t){return this.vf.has(t)}addEventListener(t,s,i){this.Mf(t,!0).tf(s,!!i)}removeEventListener(t,s,i){let e=this.Mf(t,!1);e&&(e.nf(s,!!i),e.rf()&&this.vf.delete(t))}dispatchEvent(t){const s=this.Mf(t.type,!1);return!s||(t.cancelable?s.af(t):s.cf(t))}Gf(t){const s=this.Mf(t.type,!1);return s?(t.jc=!0,s.df(t)):Promise.resolve(!0)}async _f(t){const s=this.Mf(t.type,!1);if(!s)return!0;this.vf.delete(t.type),t.jc=!0;const i=await s.df(t);return s.qn(),i}async Cf(t){const s=this.Mf(t.type,!1);return!s||await s.gf(t)}If(t){const s=this.Mf(t.type,!1);return!s||s.mf(t)}async Ef(t){const s=this.Mf(t.type,!1);return!s||await s.yf(t)}Pf(t){const s=this.Mf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.wf(t)}ff(t){for(const s of this.vf.values())s.ff(t)}}}{let zo=function(t){Qo=Zo&&0===ta?requestIdleCallback(jo,{timeout:35}):setTimeout(jo,ta>0?1:t)},jo=function(t){if(Qo=-1,!Ko.length)return;let s=performance.now(),i=s,e=0,n=0;do{qo(Ko.shift()),i=performance.now(),++e,n=(i-s)/e*1.1}while(Ko.length&&(Zo&&0===ta&&void 0!==t?n<t.timeRemaining():i-s+n<12));if(-1===Qo&&Ko.length){let t=i-s;zo(Math.max(16-t,4))}},qo=function(t){let s;try{s=t.ef()}catch(s){return void t.reject(s)}t.resolve(s)};SetNewCallback=zo,DoAsyncifiedWork=jo,DoNextAsyncifiedJob=qo;const Ho=self.Cs,Jo=12,Yo=16,Xo=35,Zo="undefined"!=typeof requestIdleCallback;let Ko=[],Qo=-1,ta=0,sa=Ho.Ys.js("disable-asyncify");sa&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),Ho.pf=function(t){let s=null;return Ho.Ls&&(s=Ho.Ki()),new Promise((i,e)=>{Ko.push({ef:t,resolve:i,reject:e,stack:s}),sa?qo(Ko.pop()):-1===Qo&&zo(16)})},Ho.pf.Rf=function(t){if(t)++ta;else if(--ta,ta<0)throw new Error("already turned off high throughput mode")}}{let ia=function(){oa=-1},ea=function(){aa=-1,la=-1;let t=Date.now();for(let s of ua)if(s.Af(t)){let t=s.Ff();(-1===la||t<la)&&(la=t)}else ua.delete(s);if(-1!==la){let s=Math.max(la-t+100,1e3);aa=self.setTimeout(ea,s)}};ClearTimeCache=ia,CheckActiveIdleTimeouts=ea;const na=self.Cs,ra=1e3,ha=100;let oa=-1;na.Of=function(){return-1===oa&&(oa=Date.now(),self.setTimeout(ia,16)),oa};let aa=-1,la=-1,ua=new Set;na.Df=class{constructor(t,s){this.Lf=t,this.Nf=1e3*s,this.kf=0,this.Bf=!1}$f(){let t=na.Of();this.kf=t+this.Nf,this.Bf||(ua.add(this),this.Bf=!0),-1===aa?(la=this.kf,aa=self.setTimeout(ea,this.Nf+100)):this.kf<la&&la>t+1e3&&(self.clearTimeout(aa),la=this.kf,aa=self.setTimeout(ea,this.Nf+100))}Af(t){return!(t>=this.kf&&(this.Lf()?(this.kf=t+this.Nf,0):(this.Bf=!1,1)))}Ff(){return this.kf}Wf(){this.Bf&&(ua.delete(this),this.Bf=!1,0===ua.size&&-1!==aa&&(self.clearTimeout(aa),aa=-1,la=-1))}qn(){this.Wf(),this.Lf=null}}}{const ca=self.Cs;ca.Uf=class t{constructor(t){this.Vf=!1,this.zf=t}jf(){this.Vf||(this.Vf=!0,this.zf&&(this.zf(),this.zf=null))}qf(){return this.Vf}qn(){this.jf()}static qn(s){return new t(()=>s.qn())}static Hf(t,s,i,e,n){if("string"!=typeof s&&!Array.isArray(s))throw new TypeError("expected string or array");if(null==e)e=!1;else if("boolean"!=typeof e&&"object"!=typeof e)throw new TypeError("invalid event listener options");if(n&&(i=i.bind(n)),Array.isArray(s)||s.includes(" ")){"string"==typeof s&&(s=s.split(" "));const n=new ca.Jf;for(const r of s)t.addEventListener(r,i,e),n.$u(ca.jn(ca.Uf,()=>t.removeEventListener(r,i,e)));return n}return t.addEventListener(s,i,e),ca.jn(ca.Uf,()=>t.removeEventListener(s,i,e))}},ca.Yf=class extends ca.Uf{Xf(t){this.zf=t}},ca.Jf=class extends ca.Uf{constructor(...t){super(),this.Zf=new Set;for(let s of t)this.$u(s)}$u(...t){if(this.Vf)throw new Error("already disposed");for(let s of t)this.Zf.add(s)}Kf(t){if(this.Vf)throw new Error("already disposed");this.Zf.delete(t)}Qf(){if(this.Vf)throw new Error("already disposed");if(this.Zf){for(let t of this.Zf)t.jf();this.Zf.clear()}}qf(){return this.Vf}jf(){if(this.Vf)throw new Error("already disposed");this.Vf=!0;for(let t of this.Zf)t.jf();this.Zf.clear(),this.Zf=null}qn(){this.jf()}}}{const fa=self.Cs;fa.td=class extends fa.Vn{constructor(){super(),this.sd=0,this.Ra=0,this.ed=0,this.nd=0}$u(t){t=+t,this.Ra=t-this.sd,this.ed=this.nd+this.Ra,this.sd=this.ed-this.nd-this.Ra,this.nd=this.ed}rd(t){this.nd-=+t}qs(){return this.nd}$f(){this.sd=0,this.Ra=0,this.ed=0,this.nd=0}Set(t){this.sd=0,this.Ra=0,this.ed=0,this.nd=+t}hd(t){this.sd=t.sd,this.Ra=t.Ra,this.ed=t.ed,this.nd=t.nd}qn(){}}}{const da=self.Cs,pa={},ma=!0,ga=!1;pa.od=function(t){this.ad=t,this.right=this.ad.ld,this.left=this.ad.ld,this.parent=null,this.color=!1,this.key=null},pa.ud=function(t){this.size=0,this.ld=new pa.od(this),this.ld.color=!1,this.root=this.ld,this.root.parent=this.ld,this.compare=t||this.fd},pa.ud.prototype.fd=function(t,s){return t<s?-1:s<t?1:0},pa.ud.prototype.clone=function(){var t=new pa.ud(this.compare);return t.dd(this),t},pa.ud.prototype.clear=function(){this.size=0,this.ld=new pa.od(this),this.ld.color=!1,this.root=this.ld,this.root.parent=this.ld},pa.ud.prototype.pd=function(t){var s=t.right;t.right=s.left,s.left!=this.ld&&(s.left.parent=t),s.parent=t.parent,t.parent==this.ld?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,s.left=t,t.parent=s},pa.ud.prototype.md=function(t){var s=t.left;t.left=s.right,s.right!=this.ld&&(s.right.parent=t),s.parent=t.parent,t.parent==this.ld?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,s.right=t,t.parent=s},pa.ud.prototype.gd=function(t){if(this.contains(t))this.yd(t).key=t;else{var s=new pa.od(this);s.key=t;for(var i=this.ld,e=this.root;e!=this.ld;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;s.parent=i,i==this.ld?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.ld,s.right=this.ld,s.color=ma,this.wd(s),this.size++}},pa.ud.prototype.wd=function(t){for(;t!=this.ld&&t!=this.root&&t.parent.color==ma;){var s;t.parent==t.parent.parent.left?(s=t.parent.parent.right).color==ma?(t.parent.color=!1,s.color=!1,t.parent.parent.color=ma,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.pd(t)),t.parent.color=!1,t.parent.parent.color=ma,t.parent.parent!=this.ld&&this.md(t.parent.parent)):(s=t.parent.parent.left).color==ma?(t.parent.color=!1,s.color=!1,t.parent.parent.color=ma,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.md(t)),t.parent.color=!1,t.parent.parent.color=ma,t.parent.parent!=this.ld&&this.pd(t.parent.parent))}this.root.color=!1},pa.ud.prototype.Sd=function(t){var s,i;(i=(s=t.left==this.ld||t.right==this.ld?t:this.vd(t)).left!=this.ld?s.left:s.right).parent=s.parent,s.parent==this.ld?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.bd(i),this.size--},pa.ud.prototype.bd=function(t){for(;t!=this.root&&0==t.color;){var s;t==t.parent.left?((s=t.parent.right).color==ma&&(s.color=!1,t.parent.color=ma,this.pd(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=ma,t=t.parent):(0==s.right.color&&(s.left.color=!1,s.color=ma,this.md(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.pd(t.parent),t=this.root)):((s=t.parent.left).color==ma&&(s.color=!1,t.parent.color=ma,this.md(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=ma,t=t.parent):(0==s.left.color&&(s.right.color=!1,s.color=ma,this.pd(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.md(t.parent),t=this.root))}t.color=!1},pa.ud.prototype.remove=function(t){var s=this.yd(t);if(s!=this.ld){var i=s.key;return this.Sd(s),i}return null},pa.ud.prototype.xd=function(t,s){this.remove(s)},pa.ud.prototype.min=function(t){for(;t.left!=this.ld;)t=t.left;return t},pa.ud.prototype.max=function(t){for(;t.right!=this.ld;)t=t.right;return t},pa.ud.prototype.vd=function(t){if(t.right!=this.ld)return this.min(t.right);for(var s=t.parent;s!=this.ld&&t==s.right;)t=s,s=s.parent;return s},pa.ud.prototype.Md=function(t){if(t.left!=this.ld)return this.max(t.left);for(var s=t.parent;s!=this.ld&&t==s.left;)t=s,s=s.parent;return s},pa.ud.prototype.Td=function(t){if(this.size>0){var s=this.yd(t);if(s==this.ld)return null;if(s.right!=this.ld)return this.min(s.right).key;for(var i=s.parent;i!=this.ld&&s==i.right;)s=i,i=i.parent;return i!=this.ld?i.key:null}return null},pa.ud.prototype.Gd=function(t){if(this.size>0){var s=this.yd(t);if(s==this.ld)return null;if(s.left!=this.ld)return this.max(s.left).key;for(var i=s.parent;i!=this.ld&&s==i.left;)s=i,i=i.parent;return i!=this.ld?i.key:null}return null},pa.ud.prototype._d=function(){return this.min(this.root).key},pa.ud.prototype.Cd=function(){return this.max(this.root).key},pa.ud.prototype.yd=function(t){for(var s=this.root;s!=this.ld&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},pa.ud.prototype.contains=function(t){return null!=this.yd(t).key},pa.ud.prototype.getValues=function(){var t=[];return this.forEach(function(s){t.push(s)}),t},pa.ud.prototype.dd=function(t){if("array"==pa.Id(t))for(var s=0;s<t.length;s++)this.gd(t[s]);else if("function"==pa.Id(t.forEach))t.forEach(this.gd,this);else if("function"==pa.Id(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.gd(i[s])}else if("object"==pa.Id(t))for(var e in t)this.gd(t[e])},pa.ud.prototype.Ed=function(t){if("array"==pa.Id(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==pa.Id(t.forEach))t.forEach(this.xd,this);else if("function"==pa.Id(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.remove(i[s])}else if("object"==pa.Id(t))for(var e in t)this.remove(t[e])},pa.ud.prototype.Pd=function(t){if("array"==pa.Id(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==pa.Id(t.forEach))return t.every(this.contains,this);if("function"==pa.Id(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==pa.Id(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},pa.ud.prototype.range=function(t,s){var i=[];return this.Rd(function(t){i.push(t)},t,s),i},pa.ud.prototype.Ad=function(t,s){if(!this.Fd())for(var i=this.min(this.root);i!=this.ld;){if(t.call(s,i.key,this))return;i=this.vd(i)}},pa.ud.prototype.Od=function(t,s,i){if(!this.Fd())for(var e=this.yd(s);e!=this.ld;){if(t.call(i,e.key,this))return;e=this.vd(e)}},pa.ud.prototype.traverseTo=function(t,s,i){if(!this.Fd())for(var e=this.min(this.root),n=this.yd(s);e!=n;){if(t.call(i,e.key,this))return;e=this.vd(e)}},pa.ud.prototype.Rd=function(t,s,i,e){if(!this.Fd())for(var n=this.yd(s),r=this.yd(i);n!=r;){if(t.call(e,n.key,this))return;n=this.vd(n)}},pa.ud.prototype.Dd=function(t,s){if(!this.Fd())for(var i=this.max(this.root);i!=this.ld;){if(t.call(s,i.key,this))return;i=this.Md(i)}},pa.ud.prototype.forEach=function(t,s){if(!this.Fd())for(var i=this.min(this.root);i!=this.ld;i=this.vd(i))t.call(s,i.key,i.key,this)},pa.ud.prototype.some=function(t,s){if(this.Fd())return!1;for(var i=this.min(this.root);i!=this.ld;i=this.vd(i))if(t.call(s,i.key,i.key,this))return!0;return!1},pa.ud.prototype.every=function(t,s){if(this.Fd())return!1;for(var i=this.min(this.root);i!=this.ld;i=this.vd(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},pa.ud.prototype.map=function(t,s){var i=[];if(this.Fd())return i;for(var e=this.min(this.root);e!=this.ld;e=this.vd(e))i.push(t.call(s,e.key,e.key,this));return i},pa.ud.prototype.filter=function(t,s){var i=[];if(this.Fd())return i;for(var e=this.min(this.root);e!=this.ld;e=this.vd(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},pa.ud.prototype.Ld=function(){return this.size},pa.ud.prototype.Fd=function(){return 0==this.size},pa.ud.prototype.isSubsetOf=function(t){var s=pa.Ld(t);if(this.Ld()>s)return!1;var i=0;if(this.Fd())return!0;for(var e=this.min(this.root);e!=this.ld;e=this.vd(e))pa.contains.call(t,t,e.key)&&i++;return i==this.Ld()},pa.ud.prototype.intersection=function(t){var s=new pa.ud(this.compare);if(this.Fd())return s;for(var i=this.min(this.root);i!=this.ld;i=this.vd(i))t.contains.call(t,i.key,i.key,this)&&s.gd(i.key);return s},da.ud=class extends da.Vn{constructor(t){super(),this.Nd=new pa.ud(t),this.kd=!1,this.Bd=new Set,this.$d=new Set}$u(t){this.kd?this.Nd.contains(t)?this.$d.delete(t):this.Bd.add(t):this.Nd.gd(t)}Kf(t){this.kd?this.Nd.contains(t)?this.$d.add(t):this.Bd.delete(t):this.Nd.remove(t)}js(t){return this.kd?!!this.Bd.has(t)||!this.$d.has(t)&&this.Nd.contains(t):this.Nd.contains(t)}Pu(){this.Nd.clear(),this.Bd.clear(),this.$d.clear()}toArray(){if(this.kd)throw new Error("cannot be used in queueing mode");return this.Nd.getValues()}Ou(){return this.Nd.Ld()+this.Bd.size-this.$d.size}Ru(){return 0===this.Ou()}Wd(){if(this.Ru())throw new Error("empty set");if(this.kd)throw new Error("cannot be used in queueing mode");const t=this.Nd;return t.min(t.root).key}Ud(){if(this.Ru())throw new Error("empty set");if(this.kd)throw new Error("cannot be used in queueing mode");const t=this.Wd();return this.Kf(t),t}Vd(t){if(t=!!t,this.kd!==t&&(this.kd=t,!t)){for(const t of this.$d)this.Nd.remove(t);this.$d.clear();for(const t of this.Bd)this.Nd.gd(t);this.Bd.clear()}}zd(t){this.Nd.forEach(t)}*values(){if(this.Ru())return;const t=this.Nd;for(let s=t.min(t.root);s!=t.ld;s=t.vd(s))yield s.key}[Symbol.iterator](){return this.values()}}}{const ya=self.Cs;ya.jd=class{constructor(t=ya.hardwareConcurrency){this.qd=t,this.Hd=[],this.Jd=0}$u(t,s){return new Promise((i,e)=>{const n={ef:t,resolve:i,reject:e,Yd:s};s?.signal&&s.signal.aborted?e(new Error("abort")):(s?.signal&&(n.onabort=()=>{const t=this.Hd.indexOf(n);-1!==t&&(this.Hd.splice(t,1),e(new Error("abort")))},s.signal.addEventListener("abort",n.onabort)),this.Hd.push(n),this.Xd())})}Zd(t){for(let s=0,i=this.Hd.length;s<i;++s)if(this.Hd[s].ef===t)return s;return-1}Kd(t,s){const i=this.Zd(t);if(-1===i)throw new Error("cannot find promise to resolve");this.Hd[i].resolve(s),this.Hd.splice(i,1)}Qd(t,s){const i=this.Zd(t);if(-1===i)throw new Error("cannot find promise to reject");this.Hd[i].reject(s),this.Hd.splice(i,1)}async Xd(){if(!this.Hd.length)return;if(this.Jd>=this.qd)return;this.Jd++;const t=this.Hd.shift();t.Yd?.signal&&t.onabort&&t.Yd.signal.removeEventListener("abort",t.onabort);try{const s=await t.ef();t.resolve(s)}catch(s){t.reject(s)}this.Jd--,this.Xd()}}}{const wa=self.Cs;wa.tp=class{constructor(t,s,i){this.Lf=t,this.sp=s,this.ip=i||2*s,this.ep=-1,this.np=-1/0,this.rp=()=>this.hp(),this.op=!1,this.ap=!1,this.lp=null}up(t){this.ap=!!t}cp(){return void 0!==wa.fp&&wa.fp.pp()?this.ip:this.sp}mp(...t){if(-1!==this.ep)return;this.lp=t;let s=wa.Of(),i=s-this.np,e=this.cp();i>=e&&this.ap?(this.np=s,this.gp()):this.ep=self.setTimeout(this.rp,Math.max(e-i,4))}gp(){this.op=!0;const t=this.lp;this.lp=null,t?this.Lf(...t):this.Lf(),this.op=!1}$f(){this.op||(this.yp(),this.lp=null,this.np=wa.Of())}hp(){this.ep=-1,this.np=wa.Of(),this.gp()}yp(){-1!==this.ep&&(self.clearTimeout(this.ep),this.ep=-1)}qn(){this.yp(),this.Lf=null,this.lp=null,this.rp=null}}}{const Sa=self.Cs;Sa.wp=class{constructor(){this.Sp=new Map,this.vp=!1,this.bp=null,this.xp=null,this.Mp=null,this.Tp=null}Gp(t){this.vp=!!t}_p(){return this.vp}Cp(t){this.bp=t}Ip(t){if(!this.bp)throw new Error("no get base size callback set");return this.bp(t)}Ep(t){this.xp=t}Pp(t,s,i,e,n,r){if(!this.xp)throw new Error("no raster at size callback set");return this.xp(t,s,i,e,n,r)}Rp(t){this.Mp=t}Ap(t){if(!this.Mp)throw new Error("no release result callback set");this.Mp(t)}Fp(t){this.Tp=t}Op(){if(!this.Tp)throw new Error("no redraw callback set");this.Tp()}Dp(t){let s=this.Sp.get(t);return s||(s=Sa.jn(Sa.Lp,this,t),this.Sp.set(t,s)),s.Np(),s}kp(t){this.Sp.delete(t.Bp())}$p(){for(const t of this.Sp.values())t.Wp(),t.Up()}}}{const va=self.Cs,ba=4096;va.Lp=class{constructor(t,s){this.Vp=t,this.zp=s,this.jp=0,this.qp=0,this.Hp=0,this.Jp=this.Vp.Ip(s).then(t=>{this.Vp&&(this.qp=t[0],this.Hp=t[1],this.Vp.Op())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.Yp=!0,this.Vp&&this.Vp.Op()}),this.Xp=0,this.Zp=0,this.Kp=0,this.Qp=0,this.tm=!1,this.sm=null,this.im=!1,this.Yp=!1}qn(){if(this.jp<=0)throw new Error("already released");this.jp--,0===this.jp&&this.nm()}Wp(){this.sm&&(this.Vp.Ap(this.sm),this.sm=null)}nm(){this.Wp(),this.Vp.kp(this),this.Vp=null}Bp(){return this.zp}Np(){this.jp++}rm(){return this.jp>0}hm(){return this.sm}Up(){this.im=!0}async om(t,s,i){if(0===s||0===i||this.Yp)return;if(this.tm)return;let e=va.br(Math.ceil(s)),n=va.br(Math.ceil(i));const r=Math.max(e,n);if(r>4096){const t=4096/r;s*=t,i*=t,e=Math.min(Math.ceil(e*t),4096),n=Math.min(Math.ceil(n*t),4096)}if(s<e&&i<n){const t=s/i;e/n>t?(s=n*t,i=n):(s=e,i=e/t)}if(this.Vp._p()&&(e=Math.ceil(s),n=Math.ceil(i)),e<=this.Xp&&n<=this.Zp&&!this.im)return;this.tm=!0,this.Xp=e,this.Zp=n;const h=await this.Vp.Pp(this.zp,t,this.Xp,this.Zp,s,i);this.Vp&&(this.Wp(),this.sm=h,this.Kp=s,this.Qp=i,this.tm=!1,this.im=!1,this.Vp.Op())}am(){return this.Jp}lm(){return this.qp}um(){return this.Hp}fm(){return this.Kp}dm(){return this.Qp}pm(){return this.Yp}}}{let xa=function(t){return Ia.get(t)};lookupHtmlEntity=xa;const Ma=self.Cs;Ma.gm="\ufeff";const Ta=new Set("0123456789");Ma.ym=function(t){return Ta.has(t)};const Ga=new Set(" \t\n\r\u2028\u2029");Ma.wm=function(t){return Ga.has(t)},Ma.Sm=function(t){return[...t].filter(t=>!Ma.wm(t)).join("")},Ma.vm=function(t){for(const s of t)if(!Ma.wm(s))return!1;return!0},Ma.bm=function(t){for(const s of t)if(!Ma.wm(s))return!1;return!0},Ma.xm=function(t){return 1===t.length&&t.charCodeAt(0)<32},Ma.Mm=function(t){return[...t].filter(t=>!Ma.xm(t)).join("")};let _a=null;try{_a=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}Ma.Tm=function(t){return!Ma.wm(t)&&_a&&_a.test(t)};const Ca=new Set("0123456789.+-e");Ma.Gm=function(t){if(!(t=t.trim()).length)return!1;let s=t.charAt(0);if("-"!==s&&!Ta.has(s))return!1;for(let s of t)if(!Ca.has(s))return!1;return!0},Ma._m=function(t){let s=t.length;for(;s>0;){let i=t.charAt(s-1);if(!Ma.ym(i))break;--s}return t.substr(0,s)},Ma.Cm=function(t){let s=Ma._m(t),i=t.substr(s.length);return i=i?(parseInt(i,10)+1).toString():"2",s+i};const Ia=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]]),Ea=/[&<>"']/g;Ma.Im=function(t){return t.replace(Ea,xa)},Ma.Em=function(t){let s=Ma.Pm(t,"\\","\\\\");return s=Ma.Pm(s,'"','\\"'),s=Ma.Pm(s,"\t","\\t"),s=Ma.Pm(s,"\r",""),Ma.Pm(s,"\n","\\n")},Ma.Rm=function(t){let s=Ma.Pm(t,"&","&amp;");return s=Ma.Pm(s,"<","&lt;"),s=Ma.Pm(s,">","&gt;"),Ma.Pm(s,'"',"&quot;")};const Pa=/[-[\]{}()*+?.,\\^$|#\s]/g;Ma.Zi=function(t){return t.replace(Pa,"\\$&")},Ma.Am=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},Ma.Fm=function(t,s){let i=0,e=0;for(;i<s;){if(i=t.indexOf("\n",i),-1===i)return e;e++,i++}return e},Ma.Om=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());const e=s.length;let n=0,r=0,h=[];for(;(r=t.indexOf(s,n))>-1;)h.push(r),n=r+e;return h},Ma.Pm=function(t,s,i){return t.replaceAll(s,()=>i)},Ma.Dm=function(t,s,i){return t.replace(new RegExp(Ma.Zi(s),"gi"),()=>i)},Ma.Lm=function(t,s){"string"==typeof s?t.textContent=s:s.Nm()?t.textContent=s.toString():(t.innerHTML=s.km(),s instanceof Ma.pn&&s.Bm(t))},Ma.$m=function(t,s){return t instanceof Ma.dn||t instanceof Ma.pn?t.equals(s):s instanceof Ma.dn||s instanceof Ma.pn?s.equals(t):t===s},Ma.Wm=function(t,...s){let i=t;for(let e=0,n=s.length;e<n;++e){const n=`{${e}}`;if(!t.includes(n))throw new Error(`missing placeholder '${n}' in string substitution`);i=i.replace(n,s[e].toString())}return i},Ma.Um=function(t,...s){let i=t,e=-1,n=-1;for(let r=0,h=s.length;r<h;++r){const h=`{${r}}`;t.includes(h)?(n=r,i=i.replace(h,s[r].toString())):-1===e&&(e=r)}if(e>=0&&n>=0&&e<n)throw new Error(`missing placeholder '${e}' in string substitution`);return i},Ma.Vm=function(t,s){let i=t;for(let[t,e]of Object.entries(s))i=i.replaceAll(t,e.toString());return i},Ma.zm=function(t,s){return t>s?1:t<s?-1:0},Ma.jm=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return i>e?1:i<e?-1:0};const Ra=new self.Intl.Segmenter;Ma.qm=function(t){if(1===t.length)return[t];const s=[];for(const i of Ra.segment(t))s.push(i.segment);return s},Ma.Hm=function*(t){for(const s of Ra.segment(t))yield s.segment},Ma.Jm=function(t){let s=0;for(const i of Ra.segment(t))++s;return s};const Aa=1024,Fa=1048576,Oa=1073741824,Da=1099511627776;Ma.Ym=function(t,s){let i="common."+(s?"dataRates":"dataSizes")+".";const e=self.Xm;if(t<1024)return e(i+"bytes",t);if(t<1048576){let s=t/1024;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"kilobytes",s)}if(t<Oa){let s=t/1048576;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"megabytes",s)}if(t<Da){let s=t/Oa;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"gigabytes",s)}{let s=t/Da;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"terabytes",s)}};const La={Zm:!1,Km:!0,Qm:!0,tg:!0,sg:!0};Ma.ig=function(t,s){s=Object.assign({},La,s),Ma.ng.eg("common.time");const i=[],e=self.lang,n=self.rg;if(s.Km){const s=Math.floor(t/86400);s>0&&(t-=24*s*3600,i.push(n(".days",null,s)))}if(s.Qm){const s=Math.floor(t/3600);(s>0||i.length)&&(t-=3600*s,i.push(n(".hours",null,s)))}if(s.tg){const e=Math.floor(t/60);(e>0||i.length||!s.sg)&&(t-=60*e,i.push(n(".minutes",null,e)))}if(s.sg){const s=Math.floor(t%60);i.push(n(".seconds",null,s))}const r=(s.Zm?e(".approx-prefix"):"")+i.join(e(".separator"));return Ma.ng.hg(),r},Ma.og=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),n=s-e.length;for(let t=0;t<n;++t)i+="0";return i+e},Ma.ag=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},Ma.lg=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());Ma.Th(i,4,"0"),Ma.Th(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const s=i[t]-e[t];if(0!==s)return s<0?-1:1}return 0},Ma.ug=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random());return("x"===t?s:3&s|8).toString(16)})},Ma.cg=function(t,s){if(t.length!==s.length)throw new Error("strings must be same length");let i=0;for(let e=0,n=t.length;e<n;++e)t.charAt(e)!==s.charAt(e)&&++i;return i},Ma.fg=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,n,r,h,o;for(t.length>s.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,n=1;n<=t.length;n++)h=s[e-1]===t[n-1]?o[n-1]:Math.min(o[n-1]+1,Math.min(r+1,o[n]+1)),o[n-1]=r,r=h;o[t.length]=r}return o[t.length]},Ma.dg=function(t){return(new TextEncoder).encode(t).length}}{let Na=function(t,s,i){const e=$a.get(i);if(!e)return"class"===i?s?"</span>":`<span class="bbclass${qa++}">`:t;if("string"==typeof e){if("a"===e&&0===za.length||"abbr"===e&&0===ja.length)return t;if("a"!==e||s){if("abbr"!==e||s)return"<"+s+e+">";{const t=parseInt(i.substring(3),10)-1;if(t<0||t>=ja.length)throw new Error("invalid bbcode tip substitution");const s=ja[t];let e="";if("string"==typeof s?e=s:"function"==typeof s&&(e=s()),"string"!=typeof e)throw new TypeError("invalid bbcode tip");return`<abbr title="${ka.Pm(e,'"',"&quot;")}">`}}{const t=parseInt(i.substring(1),10)-1;if(t<0||t>=za.length)throw new Error("invalid bbcode link substitution");const s=za[t];if("string"==typeof s)return`<a href="${za[t]}">`;if("function"==typeof s)return`<a class="bblink${t}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(e)){let t=e[0],i=e[1];return s?"</"+t+">":`<${t} class="${i}">`}};bbToHtmlReplacerFunc=Na;const ka=self.Cs,Ba=self.assert,$a=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),Wa=new Set(["icon"]),Ua=/\[(\/?)([a-zA-Z0-9]+)\]/g,Va=/\[(\/?)([^\[\n]*?)\]/g;let za=null,ja=null,qa=0;const Ha=/\n/g;ka.pn=class{constructor(t,s){if(this.pg=s&&s.mg?t:ka.Im(t),this.gg="",this.yg=!1,this.wg=[],this.Sg=[],s){if(this.yg=!!s.vg,s.links){if(s.links.length>9)throw new Error("too many links");this.wg=s.links}if(s.bg){if(s.bg.length>9)throw new Error("too many tips");this.Sg=s.bg}}this.xg=this.pg.includes("["),this.Mg=this.yg&&this.pg.includes("\n"),this.Tg=!this.xg&&!this.Mg&&!this.pg.includes("&"),this.Gg=!1,this._g=[]}toString(){return this.pg}valueOf(){return this.pg}Nm(){return this.Tg}Cg(){return this.xg?this.pg.replace(Ua,""):this.pg}km(){if(this.Tg)return this.pg;if(!this.gg&&this.pg){let t=this.pg;this.xg&&(qa=0,za=this.wg,ja=this.Sg,t=t.replace(Ua,Na),za=null,ja=null),this.Mg&&(t=t.replace(Ha,"<br>")),this.gg=t}return this.gg}Bm(t){if(this.wg.length)for(let s=0,i=this.wg.length;s<i;++s){const i=this.wg[s];if("function"!=typeof i)continue;const e=t.querySelector(".bblink"+s);if(!e)throw new Error("unable to attach BBString link handler");e.onclick=i}}equals(t){return t instanceof ka.dn?this.km()===t.km():t instanceof ka.pn?this.pg===t.pg:this.pg===t}Ig(){if(this.Gg)return this._g;const t=[],s=this.pg,i=[];Va.lastIndex=0;let e=0,n=null;for(;null!==(n=Va.exec(s));){const r=n.index;if(r>0&&"\\"===s.charAt(r-1))continue;const h=n[0],o=n[1],a=n[2],l=s.substring(e,r);if(e=r+h.length,l&&t.push({text:l,Eg:i.slice(0)}),a)if(o){const t=a.toLowerCase();for(let s=i.length-1;s>=0;--s)if(i[s].tag===t){i.splice(s,1);break}}else{let s=a,e=null;const n=a.indexOf("=");if(-1!==n?(s=a.substring(0,n).toLowerCase(),e=a.substring(n+1)):s=s.toLowerCase(),Wa.has(s)){if("icon"!==s)throw new Error(`unknown self-closing tag ${s}`);t.push({icon:e,Eg:i.slice(0)})}else i.push({tag:s,Pg:e})}}e<s.length&&t.push({text:s.substring(e),Eg:i.slice(0)});for(const s of t)s.text&&(s.text=this.Rg(s.text));return this._g=t.map(t=>t.icon?ka.jn(ka.Ag,{icon:t.icon,Eg:t.Eg}):ka.jn(ka.Fg,{Og:ka.qm(t.text),Eg:t.Eg})),this.Gg=!0,this._g}Rg(t){return t=ka.Pm(t,"\\[","["),ka.Pm(t,"\\\\","\\")}static Dg(t){return ka.jn(ka.pn,t,{mg:!0}).Cg()}static Lg(t){return t.replace(Va,"")}}}{let Ja=function(t){return""!==t&&""!==t&&Qa.wm(t)},Ya=function(t){return tl.has(t)},Xa=function(t){return Qa.Tm(t)&&!Ya(t)},Za=function(t){for(;t.length>0&&Ja(t.at(-1));)t.pop()},Ka=function(t){return"\n"===t||"\r\n"===t};IsWordBreakWhiteSpace=Ja,IsOpeningCJKPunctiationChar=Ya,IsContinuingCJKPunctuationChar=Xa,WordBreakTrimEnd=Za,IsNewline=Ka;const Qa=self.Cs,tl=new Set("");class sl{constructor(){this.Ng=[],this.width=0,this.height=0,this.fontBoundingBoxAscent=0,this.fontBoundingBoxDescent=0,this.kg=0,this.Bg=!1}static $g(t,s,i,e,n,r){const h=new sl;return h.Ng.push(t),h.width=s,h.height=i,h.fontBoundingBoxAscent=e,h.fontBoundingBoxDescent=n,h.kg=r,h}hd(t){this.Ng=t.Ng.map(t=>t.Wg()),this.width=t.width,this.height=t.height,this.fontBoundingBoxAscent=t.fontBoundingBoxAscent,this.fontBoundingBoxDescent=t.fontBoundingBoxDescent,this.kg=t.kg,this.Bg=t.Bg}$f(){this.Ng=[],this.width=0,this.height=0,this.fontBoundingBoxAscent=0,this.fontBoundingBoxDescent=0,this.kg=0,this.Bg=!1}Ug(t,s){s||(this.width=t.width),this.height=t.height||0,this.fontBoundingBoxAscent=t.fontBoundingBoxAscent||0,this.fontBoundingBoxDescent=t.fontBoundingBoxDescent||0,this.kg=t.kg||0,this.Bg=!0}Vg(t){const s=this.Ng.length?this.Ng.at(-1):null;let i=0;s&&s.zg()&&t[0].zg()&&t[0].jg()===s.jg()&&(s.qg(t[0].Hg()),i=1);for(let s=t.length;i<s;++i){const s=t[i];this.Ng.push(s.Wg())}this.Bg=!1}}Qa.Jg=class{constructor(){this.Yg=[],this.Xg=null,this.Zg=new sl,this.Kg=new sl,this.Qg=!1}ty(){return this.Yg}sy(){return this.Yg.length}iy(t){this.Xg=t}Jg(t,s,i,e,n){if("string"==typeof t&&(t=[Qa.jn(Qa.Fg,{Og:Qa.qm(t)})]),Qa.bh(this.Yg),!t.length||1===t.length&&t[0].zg()&&t[0].Ru()||i<2)return;if(1===t.length){const e=t[0];if(e.zg()&&e.ey()<=100&&!e.ny()){let{width:t,height:r,fontBoundingBoxAscent:h,fontBoundingBoxDescent:o,kg:a}=s(e);if(t+=n,e.hy(t),e.oy(r),e.ly(h||0),e.uy(o||0),e.py(a||0),t<=i)return void this.my(sl.$g(e,t,r,h,o,a))}}let r,h=4;"word"===e?r=this.gy(t):"cjk"===e?(r=this.yy(t),h=8):(r=this.wy(t),h=8),this.Sy(r,s,i,h,n)}gy(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.jg();if(n.vy())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.Hg())if(Ka(r))i.length>0&&s.push(i),s.push([Qa.jn(Qa.Fg,{Og:["\n"],Eg:t})]),i=[];else if(0===i.length)i.push(Qa.jn(Qa.Fg,{Og:[r],Eg:t})),e=Ja(r);else{const n=Ja(r);if(n===e){const s=i.at(-1);s.jg()===t?s.by(r):i.push(Qa.jn(Qa.Fg,{Og:[r],Eg:t}))}else s.push(i),i=[Qa.jn(Qa.Fg,{Og:[r],Eg:t})],e=n}}return i.length>0&&s.push(i),s}yy(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.jg();if(n.vy())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.Hg())if(Ka(r))i.length>0&&s.push(i),s.push([Qa.jn(Qa.Fg,{Og:["\n"],Eg:t})]),i=[];else if(0===i.length)i.push(Qa.jn(Qa.Fg,{Og:[r],Eg:t})),e=Ya(r);else if(e||Xa(r)){const s=i.at(-1);s.jg()===t?s.by(r):i.push(Qa.jn(Qa.Fg,{Og:[r],Eg:t})),e=Ya(r)}else s.push(i),i=[Qa.jn(Qa.Fg,{Og:[r],Eg:t})],e=Ya(r)}return i.length>0&&s.push(i),s}wy(t){const s=[];for(const i of t)if(i.zg()){const t=i.Hg();Qa.Fn(s,t.map(t=>[Qa.jn(Qa.Fg,{Og:[t],Eg:i.jg()})]))}else s.push([i]);return s}xy(t,s){let i=0,e=0,n=0,r=0,h=0;for(const o of t){if(-1===o.My()){const t=s(o);o.oy(t.height),o.ly(t.fontBoundingBoxAscent||0),o.uy(t.fontBoundingBoxDescent||0),o.py(t.kg||0),o.zg()?o.hy(t.width):o.vy()&&o.Ty(this.Xg)}i+=o.My(),e=Math.max(e,o.Gy()),n=Math.max(n,o._y()),r=Math.max(r,o.Cy()),h=Math.max(h,o.Iy())}return{width:i,height:e,fontBoundingBoxAscent:n,fontBoundingBoxDescent:r,kg:h}}Ey(){this.Zg.$f(),this.Kg.$f()}my(t){this.Yg.push(new Qa.Jg.Py(t)),this.Ey()}Ry(t){return 1===t.length&&t[0].zg()&&1===t[0].ey()&&Ka(t[0].Hg()[0])}Ay(t){return t[0].zg()&&Qa.bm(t[0].Hg())}Sy(t,s,i,e,n){let r=0;for(;r<t.length;)r=this.Fy(t,r,s,i,e);if(this.Kg.Ng.length>0){if(!this.Kg.Bg){const t=this.xy(this.Kg.Ng,s);this.Kg.Ug(t)}this.my(this.Kg)}this.Oy(s,n),this.Ey(),this.Qg=!1}Fy(t,s,i,e,n){const r=this.Zg,h=this.Kg,o=t[s];if(this.Ry(o)){if(!h.Bg){const t=i(Qa.jn(Qa.Fg,{Og:[" "],Eg:o[0].jg()}));h.Ug(t,!0)}return this.my(h),s+1}const a=this.Dy(t,s,n),l=this.xy(h.Ng,i);return h.Ug(l),l.width>=e?this.Ly(t,s,i,e):(r.hd(h),this.Qg&&this.my(r),a+1)}Dy(t,s,i){const e=this.Kg;this.Qg=!1;let n=s,r=0;for(let s=t.length;n<s;++n){const s=t[n];if(this.Ry(s)){this.Qg=!0;break}if(e.Vg(s),!this.Ay(s)&&(++r,r===i))break}return n}Ly(t,s,i,e){const n=this.Zg,r=this.Kg;r.hd(n);let h=s;for(let s=t.length;h<s;++h){const o=t[h];if(this.Ry(o))return this.my(n),h+1;if(r.Vg(o),!this.Ay(o)||0===n.Ng.length){const o=this.xy(r.Ng,i);if(r.Ug(o),o.width>=e){let i;return n.Ng.length>0?i=n:(i=r,++h,h<s&&this.Ay(t[h])&&++h),this.my(i),h}n.hd(r)}}return h}Oy(t,s){for(const i of this.Yg){const e=i.Ny();if(!e.length)continue;let n=e.at(-1);if(n.zg()){const r=n.Hg(),h=r.slice(0);if(Za(h),0===h.length)i.ky(-n.My()),e.pop();else if(h.length<r.length){n.By(h);const s=t(n).width,e=n.My()-s;n.hy(s),i.ky(-e)}0!==s&&e.length>0&&(n=e.at(-1),n.ky(s),i.ky(s))}}}Pu(){Qa.bh(this.Yg)}$y(){return this.Yg.reduce((t,s)=>Math.max(t,s.My()),0)}Wy(){return this.Yg.reduce((t,s)=>t+s.Gy(),0)}}}{const il=self.Cs;il.Jg.Py=class{constructor(t){this._g=t.Ng,this.Uy=t.width,this.Vy=t.height,this.zy=t.fontBoundingBoxAscent,this.jy=t.fontBoundingBoxDescent,this.qy=t.kg,this.Hy=0,this.Jy=0}Ng(){return this._g.values()}*Yy(){const t=this._g;for(let s=t.length-1;s>=0;--s)yield t[s]}Ny(){return this._g}ky(t){this.Uy+=t}My(){return this.Uy}Gy(){return this.Vy}Xy(){return this.zy}Cy(){return this.jy}Iy(){return this.qy}Zy(t){this.Hy=t}Ky(){return this.Hy}Qy(t){this.Jy=t}tw(){return this.Jy}}}{const el=self.Cs;el.sw=class{constructor(t){this.iw=t.Eg||[],this.Uy=t.width||-1,this.Vy=t.height||-1,this.zy=t.fontBoundingBoxAscent||-1,this.jy=t.fontBoundingBoxDescent||-1,this.qy=t.kg||-1,this.Hy=0,this.Jy=0}zg(){return!1}vy(){return!1}jg(){return this.iw}ew(t){const s=this.iw;for(let i=s.length-1;i>=0;--i){const e=s[i];if(e.tag===t)return e}return null}rw(t){return!!this.ew(t)}hw(){const t=new Map;for(const s of this.iw)t.set(s.tag,s.Pg);return t}ky(t){this.Uy+=t}hy(t){this.Uy=t}My(){return this.Uy}oy(t){this.Vy=t}Gy(){return this.Vy}ly(t){this.zy=t}_y(){return this.zy}uy(t){this.jy=t}Cy(){return this.jy}py(t){this.qy=t}Iy(){return this.qy}Zy(t){this.Hy=t}Ky(){return this.Hy}Qy(t){this.Jy=t}tw(){return this.Jy}}}{const nl=self.Cs;nl.Fg=class extends nl.sw{constructor(t){super(t),this.ow=t.Og}zg(){return!0}qg(t){nl.Fn(this.ow,t),this.Uy=-1,this.Vy=-1,this.zy=-1,this.jy=-1,this.qy=-1}by(t){this.ow.push(t)}Wg(){return nl.jn(nl.Fg,{Og:this.ow.slice(0),Eg:this.iw,width:this.Uy,height:this.Vy,fontBoundingBoxAscent:this.zy,fontBoundingBoxDescent:this.jy,kg:this.qy})}Hg(){return this.ow}By(t){this.ow=t}ey(){return this.ow.length}Ru(){return 0===this.ow.length}ny(){return this.ow.includes("\n")}}}{const rl=self.Cs;rl.Ag=class extends rl.sw{constructor(t){super(t),this.aw=t.icon}vy(){return!0}lw(){return this.aw}Wg(){return rl.jn(rl.Ag,{icon:this.aw,Eg:this.iw,width:this.Uy,height:this.Vy,fontBoundingBoxAscent:this.zy,fontBoundingBoxDescent:this.jy,kg:this.qy})}uw(t){if(!t)return null;let s=Number(this.aw);return String(s)===this.aw?(s=Math.floor(s),t.cw(s)):t.fw(this.aw)}Ty(t){const s=this.uw(t);this.Uy=s?this.Vy*s.My()/s.Gy():0}dw(t){const s=this.uw(t);return s?s.dw():null}ey(){return 1}}}{const hl=self.Cs;hl.pw=class{constructor(t){this.mw=new Map,this.gw=t.yw,this.ww=t.Sw}qn(){for(const t of this.mw.values())t.qn();this.mw.clear()}bw(t){let s=this.mw.get(t);if(s)return s;const i=this.gw(t);return s=hl.jn(hl.xw,this,{source:t,Mw:i}),this.mw.set(t,s),s}Tw(t){return this.mw.has(t)}Gw(t){const s=this.mw.get(t);s&&s.qn(),this.mw.delete(t)}async _w(t){return await this.ww(t)}}}{const ol=self.Cs;ol.xw=class{constructor(t,s){this.Cw=t,this.Iw=s.source,this.Ew=[],this.Pw=new Map,this.Rw=!1,this.Aw=!1,this.Fw=null;const i=s.Mw.Ow;for(let t=0,s=i.length;t<s;++t){const s=i[t],e=ol.jn(ol.Dw,this,{index:t,tag:s.tag,source:s.source,width:s.width,height:s.height});this.Ew.push(e),s.tag&&this.Pw.set(s.tag.toLowerCase(),e)}}qn(){for(const t of this.Ew)t.qn();ol.bh(this.Ew),this.Pw.clear(),this.Cw=null,this.Iw=null}Lw(){return this.Rw}Nw(){return this.Aw}kw(){return this.Fw||(this.Fw=this.Bw()),this.Fw}async Bw(){if(this.Rw)return;this.Rw=!0,this.Aw=!0;const t=await this.Cw._w(this.Iw);if(!this.Cw)return;const s=t.Ow;for(let t=0,i=Math.min(s.length,this.Ew.length);t<i;++t){const i=s[t].$w;this.Ew[t].Ww(i)}this.Aw=!1}cw(t){return(t=Math.floor(t))<0||t>=this.Ew.length?null:this.Ew[t]}fw(t){return this.Pw.get(t.toLowerCase())||null}}}{const al=self.Cs;al.Dw=class{constructor(t,s){this.Uw=t,this.Iw=s.source||null,this.Vw=s.index,this.zw=s.tag,this.Uy=s.width,this.Vy=s.height,this.jw=null}qn(){this.Uy=0,this.Vy=0,this.Uw=null}qw(){return this.Iw}My(){return this.Uy}Gy(){return this.Vy}Ww(t){this.jw=t}dw(){return this.jw}}}{let ll=function(t,s,i,e){const n=Sl;pl.F(yl,i,s),pl.F(wl,t,s),pl._t(n,yl,wl),pl.normalize(n,n),e.set(n[0],n[1],n[2],pl.Gt(t,n))},ul=function(t,s,i,e,n,r,h){const o=h.x,a=h.y,l=h.z,u=h.w,c=h.Hw,f=h.Jw,d=h.Yw,p=1-c,m=1-f,g=1-d;return o*t*c+o*e*p+a*s*f+a*n*m+l*i*d+l*r*g>=u||o*e*c+o*t*p+a*n*f+a*s*m+l*r*d+l*i*g>u},cl=function(t,s,i,e){return e.x*t+e.y*s+e.z*i>=e.w};PlaneFromPoints=ll,IsInFrontOfPlane=ul,IsPointInFrontOfPlane=cl;const fl=self.Cs,dl=self.ls,pl=dl.ws,ml=dl.Ss,gl=dl.ds,yl=pl.create(),wl=pl.create(),Sl=pl.create(),vl=ml.create(),bl=gl.create(),xl=pl.create(),Ml=pl.create(),Tl=pl.create(),Gl=pl.create(),_l=pl.create(),Cl=pl.create(),Il=pl.create(),El=pl.create(),Pl=ml.v(0,0,1,1);fl.Xw={Zw(t,s,i,e,n,r,h){const o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15];let c=n[0]*o+n[4]*a+n[8]*l+n[12]*u,f=n[1]*o+n[5]*a+n[9]*l+n[13]*u,d=n[2]*o+n[6]*a+n[10]*l+n[14]*u,p=n[3]*o+n[7]*a+n[11]*l+n[15]*u;return 0!==p&&(p=1/p,c*=p,f*=p,d*=p,h[0]=(.5*c+.5)*r[2]+r[0],h[1]=(.5*f+.5)*r[3]+r[1],h[2]=.5*(1+d),!0)},Kw(t,s,i,e,n,r,h){const o=bl,a=vl;return gl.multiply(o,n,e),null!==gl.T(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,ml.Rt(a,a,o),0!==a[3]&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0))},Qw(t,s,i,e,n,r,h){const o=yl,a=wl;if(!fl.Xw.Kw(t,s,0,e,n,r,o))return!1;if(!fl.Xw.Kw(t,s,1,e,n,r,a))return!1;const l=wl;pl.F(l,a,o);const u=Sl;pl.set(u,0,0,1);const c=-i,f=pl.Gt(u,l);let d=0;if(0===f){if(0!==pl.Gt(u,o)+c)return!1}else if(d=-(pl.Gt(o,u)+c)/f,d<0)return!1;return pl.vt(h,o,l,d),!0}};class Rl{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Hw=NaN,this.Jw=NaN,this.Yw=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.Hw=t>0?1:0,this.Jw=s>0?1:0,this.Yw=i>0?1:0}}fl.Xw.tS=class{constructor(){this.sS=new Rl,this.iS=new Rl,this.eS=new Rl,this.nS=new Rl,this.rS=new Rl,this.hS=new Rl}oS(t,s){const i=Pl;fl.Xw.Kw(0,1,0,t,s,i,xl),fl.Xw.Kw(1,1,0,t,s,i,Ml),fl.Xw.Kw(0,0,0,t,s,i,Tl),fl.Xw.Kw(1,0,0,t,s,i,Gl),fl.Xw.Kw(0,1,1,t,s,i,_l),fl.Xw.Kw(1,1,1,t,s,i,Cl),fl.Xw.Kw(0,0,1,t,s,i,Il),fl.Xw.Kw(1,0,1,t,s,i,El),ll(Tl,xl,_l,this.sS),ll(xl,Ml,Cl,this.iS),ll(Ml,Gl,El,this.eS),ll(Gl,Tl,Il,this.nS),ll(Il,_l,Cl,this.hS),ll(Gl,Ml,xl,this.rS)}aS(t,s,i,e,n,r){return ul(t,s,i,e,n,r,this.sS)&&ul(t,s,i,e,n,r,this.iS)&&ul(t,s,i,e,n,r,this.eS)&&ul(t,s,i,e,n,r,this.nS)&&ul(t,s,i,e,n,r,this.rS)&&ul(t,s,i,e,n,r,this.hS)}lS(t,s,i){return!cl(t,s,i,this.rS)}}}{const Al=self.Cs,Fl=self.ls,Ol=Fl.ws,Dl=Fl.Ss,Ll=Fl.ds,Nl=Ll.create(),kl=Ol.v(0,0,0),Bl=Ol.v(0,0,0),$l=Ol.v(0,0,0),Wl=Ol.v(0,1,0),Ul=Dl.v(0,0,0,0),Vl=new Al.El,zl=new Al.Rect,jl=new Al.El(0,0,1,0,1,1,0,1),ql={uS:1,cS:1e4},Hl=Ll.v(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Al.Xw.fS=class{constructor(t){t=Object.assign({},ql,t),this.Uy=0,this.Vy=0,this.dS=Al.Qn(45),this.pS=Math.tan(this.dS/2),this.mS=Ll.create(),this.gS=Ll.create(),this.yS=!1,this.wS=t.uS,this.SS=t.cS,this.vS=[],this.bS=new Map,this.xS=null,this.MS=null,this.TS=null,this.GS=null,this._S=null,this.CS=null,this.IS=null,this.ES=null,this.PS=null,this.RS=null,this.AS=null,this.FS=null,this.OS=new Map,this.DS=null,this.LS=[],this.NS=new Map,this.kS=0,this.BS=0,this.$S=1,this.WS=[this.$S],this.US=1,this.VS=[this.US],this.zS=.5,this.jS=[this.zS],this.qS=0,this.HS=!0,this.JS=!1}YS(){this.kS=0,this.BS=0,this.xS=null,this.MS=null,this.TS=null,this.GS=null,this._S=null,this.CS=null,this.IS=null,this.ES=null,this.PS=null,this.RS=null,this.AS=null,this.FS=null,this.XS()}ZS(){this.YS(),this.DS=null}KS(){for(const t of this.vS)t.qn();this.YS()}My(){return this.Uy}Gy(){return this.Vy}QS(t){return this.tv()?100:t/(2*this.sv())}ev(t){return this.tv()?t/(2*this.sv())/this.QS(t):1}nv(t){this.wS=t}rv(){return this.wS}hv(t){this.SS=t}ov(){return this.SS}av(t){this.dS=t,this.pS=Math.tan(this.dS/2)}lv(){return this.dS}sv(){return this.pS}uv(){this.yS=!1}cv(){this.yS=!0}tv(){return!this.yS}fv(){return this.yS}dv(t,s,i=.5,e=.5){const n=this.rv(),r=this.ov(),h=this.lv();if(.5===i&&.5===e)this.pv()?Ll.ut(t,h,s,n,r):Ll.perspective(t,h,s,n,r);else{const h=2*(i=1-i)-2,o=2*i,a=2*e-2,l=2*e,u=this.sv()*n,c=u*s;Ll.ot(t,h*c,o*c,a*u,l*u,n,r),this.pv()&&Ll.mul(t,Hl,t)}}mv(t,s,i,e=1){const n=self.devicePixelRatio,r=2*this.QS(i)*n*this.sv()/i,h=s*r/(2*n*e),o=i*r/(2*n*e),a=-h,l=h,u=-o,c=o;this.pv()?Ll.gt(t,a,l,u,c,this.rv(),this.ov()):Ll.dt(t,a,l,u,c,this.rv(),this.ov())}gv(t,s,i,e,n,r=1){let h=1;this.tv()&&(h=200*this.sv()/n);const o=$l;Ol.set(o,h,-h,1);const a=kl,l=Bl;Ol.multiply(a,s,o),Ol.multiply(l,i,o),Ll.yt(t,a,l,e||Wl),o[2]=r,Ll.scale(t,t,o)}yv(t,s,i,e,n,r,h,o){return Ol.set(kl,t,s,i),Ol.set(Bl,e,n,r),this.gv(Nl,kl,Bl,Wl,h,o),Nl}wv(t){this.vS.push(t),this.bS.set(t.Pc(),t)}Sv(t){const s=this.vS.indexOf(t);-1!==s&&this.vS.splice(s,1),this.bS.delete(t.Pc())}XS(){Al.bh(this.vS),this.bS.clear()}vv(t){return this.bS.get(t)||null}bv(){return this.xS}xv(){this.Mv(this.xS)}Tv(){return this.MS}Gv(){this.Mv(this.MS)}_v(){this.Mv(this.TS)}Cv(){this.Mv(this.GS)}Iv(){this.Mv(this._S)}Ev(){this.Mv(this.CS)}Pv(){this.Mv(this.IS)}Rv(){this.Mv(this.ES)}Av(){this.Mv(this.PS)}Fv(){this.Mv(this.RS)}Ov(){this.Mv(this.AS)}Dv(){this.Mv(this.FS)}Lv(t){this.DS=t}Nv(){return this.DS}kv(t,s,i,e,n,r){const h=Al.Xw.$v.Bv(t,s,i,e,n,r);let o=this.OS.get(h);return o||(o=Al.jn(Al.Xw.$v,this,t,s,i,e,n,r),this.OS.set(h,o)),o.Wv(),o}Uv(t){t.Vv(),0===t.zv()&&(this.DS===t&&(this.DS=null),this.OS.delete(t.jv()),t.qn())}qv(t){Al.bh(this.LS),this.NS.clear();let s=0;for(const i of t){const t=i[0],e=i[1],n=i[2];this.LS.push([e,n]),this.NS.set(t,{number:s,Hv:e,Jv:n}),s++}}Yv(t){return this.LS[t]}Xv(t){return this.Yv(t)[0]}Zv(t){return this.Yv(t)[1]}Kv(t){const s=this.NS.get(t);if(void 0===s)throw new Error("invalid blend name");return s}Qv(t){const s=this.NS.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}tb(t){this.kS=t}sb(){return this.kS}ib(t){this.BS=t,this.DS=null}eb(){return this.BS}Py(t,s,i,e){const n=Al.rr(t,s,i,e),r=Math.sin(n),h=Math.cos(n),o=.5*this.$S,a=r*o,l=h*o,u=this.US;2===u?this.nb(t,s,0,i,e,0,a,l):1===u?this.rb(t,s,0,i,e,0,a,l):this.hb(t,s,0,i,e,0,a,l)}ob(t,s,i,e,n,r){const h=Al.rr(t,s,e,n),o=Math.sin(h),a=Math.cos(h),l=.5*this.$S,u=o*l,c=a*l,f=this.US;2===f?this.nb(t,s,i,e,n,r,u,c):1===f?this.rb(t,s,i,e,n,r,u,c):this.hb(t,s,i,e,n,r,u,c)}nb(t,s,i,e,n,r,h,o){const a=this.zS,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=2*o,p=2*h,m=l+h,g=u-o,y=l-h+d,w=u+o+p,S=c+h,v=f-o,b=c-h-d,x=f+o-p;this.ab(m,g,i,S,v,r,b,x,r,y,w,i,jl)}rb(t,s,i,e,n,r,h,o){const a=this.zS,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,v=f+o;this.ab(d,p,i,y,w,r,S,v,r,m,g,i,jl)}hb(t,s,i,e,n,r,h,o){const a=this.zS,l=t+a,u=s+a,c=e+a,f=n+a,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,v=f+o;this.ab(d,p,i,y,w,r,S,v,r,m,g,i,jl)}lb(t,s,i,e,n,r){const h=Al.rr(t,s,i,e),o=Math.sin(h),a=Math.cos(h),l=.5*this.$S,u=o*l,c=a*l,f=this.US;2===f?this.ub(t,s,i,e,u,c,n,r):1===f?this.cb(t,s,i,e,u,c,n,r):this.fb(t,s,i,e,u,c,n,r)}ub(t,s,i,e,n,r,h,o){const a=this.zS,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=2*r,p=2*n,m=l+n,g=u-r,y=l-n+d,w=u+r+p,S=c+n,v=f-r,b=c-n-d,x=f+r-p;Vl.set(m,g,S,v,b,x,y,w),zl.set(h,0,o,0),this.pb(Vl,zl)}cb(t,s,i,e,n,r,h,o){const a=this.zS,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,S=c-n,v=f+r;Vl.set(d,p,y,w,S,v,m,g),zl.set(h,0,o,0),this.pb(Vl,zl)}fb(t,s,i,e,n,r,h,o){const a=this.zS,l=t+a,u=s+a,c=i+a,f=e+a,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,S=c-n,v=f+r;Vl.set(d,p,y,w,S,v,m,g),zl.set(h,0,o,0),this.pb(Vl,zl)}mb(t,s,i,e){const n=.5*this.$S,r=this.US;2===r?this.gb(t,s,i,e,n):1===r?this.yb(t,s,i,e,n):this.wb(t,s,i,e,n)}gb(t,s,i,e,n){this.nb(t,s,0,i,s,0,0,n),this.nb(i,s,0,i,e,0,n,0),this.nb(i,e,0,t,e,0,0,-n),this.nb(t,e,0,t,s,0,-n,0)}yb(t,s,i,e,n){this.rb(t,s,0,i,s,0,0,n),this.rb(i,s,0,i,e,0,n,0),this.rb(i,e,0,t,e,0,0,-n),this.rb(t,e,0,t,s,0,-n,0)}wb(t,s,i,e,n){this.hb(t,s,0,i,s,0,0,n),this.hb(i,s,0,i,e,0,n,0),this.hb(i,e,0,t,e,0,0,-n),this.hb(t,e,0,t,s,0,-n,0)}Sb(t){this.mb(t.Qa(),t.tl(),t.sl(),t.il())}bb(t){const s=Al.rr(t.Br(),t.$r(),t.Wr(),t.Ur()),i=Math.sin(s),e=Math.cos(s),n=.5*this.$S,r=i*n,h=e*n,o=this.US;2===o?this.xb(t,r,h):1===o?this.Mb(t,r,h):this.Tb(t,r,h)}xb(t,s,i){this.nb(t.Br(),t.$r(),0,t.Wr(),t.Ur(),0,s,i),this.nb(t.Wr(),t.Ur(),0,t.Vr(),t.zr(),0,i,-s),this.nb(t.Vr(),t.zr(),0,t.jr(),t.qr(),0,-s,-i),this.nb(t.jr(),t.qr(),0,t.Br(),t.$r(),0,-i,s)}Mb(t,s,i){this.rb(t.Br(),t.$r(),0,t.Wr(),t.Ur(),0,s,i),this.rb(t.Wr(),t.Ur(),0,t.Vr(),t.zr(),0,i,-s),this.rb(t.Vr(),t.zr(),0,t.jr(),t.qr(),0,-s,-i),this.rb(t.jr(),t.qr(),0,t.Br(),t.$r(),0,-i,s)}Tb(t,s,i){this.hb(t.Br(),t.$r(),0,t.Wr(),t.Ur(),0,s,i),this.hb(t.Wr(),t.Ur(),0,t.Vr(),t.zr(),0,i,-s),this.hb(t.Vr(),t.zr(),0,t.jr(),t.qr(),0,-s,-i),this.hb(t.jr(),t.qr(),0,t.Br(),t.$r(),0,-i,s)}Gb(t){this.$S=t,this.WS[this.WS.length-1]=t}_b(){return this.$S}Cb(t){if(this.WS.length>=100)throw new Error("pushed too many line widths - check push/pop pairs");this.WS.push(t),this.$S=t}Ib(){if(this.WS.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.WS.pop(),this.$S=this.WS.at(-1)}Eb(){this.US=0,this.VS[this.VS.length-1]=0}Pb(){this.US=1,this.VS[this.VS.length-1]=0}Rb(){this.US=2,this.VS[this.VS.length-1]=0}Ab(t){if("butt"===t)this.Fb();else if("square"===t)this.Ob();else{if("zag"!==t)throw new Error("invalid line cap");this.Db()}}Fb(){if(this.VS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.VS.push(0),this.US=0}Ob(){if(this.VS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.VS.push(1),this.US=1}Db(){if(this.VS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.VS.push(2),this.US=2}Lb(){if(this.VS.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.VS.pop(),this.US=this.VS.at(-1)}Nb(t){this.zS=t,this.jS[this.jS.length-1]=t}kb(){return this.zS}Bb(t){if(this.jS.length>=100)throw new Error("pushed too many line offsets - check push/pop pairs");this.jS.push(t),this.zS=t}$b(){if(this.jS.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.jS.pop(),this.zS=this.jS.at(-1)}Wb(){this.Ub(0),this.Vb(0)}zb(t){const s=t.length/2;if(s<3)throw new Error("need at least 3 points");const i=s-2,e=i-1,n=t[0],r=t[1];for(let s=0;s<i;s+=2){const i=2*s,h=t[i+2],o=t[i+3],a=t[i+4],l=t[i+5];if(s===e)this.jb(n,r,h,o,a,l,a,l);else{const s=t[i+6],e=t[i+7];this.jb(n,r,h,o,a,l,s,e)}}}qb(){this.Hb(!0),this.qS++}Jb(){return this.qS}Yb(){this.qS++}Xb(t){this.HS=!!t}Zb(){return this.HS}Kb(t){this.JS=!!t}Qb(){return this.JS}tx(){return!1}pv(){return!1}sx(){}ix(){}nx(){}hx(){return this.sx()+this.ix()+this.nx()}ox(){return Al.jn(Al.Xw.lx,this)}}}{const Jl=self.Cs;Jl.Xw.ux=class{constructor(t,s){this.Yn=s.name,this.mx=t,this.gx=s.yx||0,this.wx=s.Sx||0,this.vx=!!s.bx,this.xx=!!s.Mx,this.Tx=!!s.Gx,this._x=!!s.Cx,this.Ix=!!s.animated,this.Ex=!!s.Px,this.Rx=!!s.Ax,this.Fx=!1,this.Ox=this.vx||this.Ex||0!==this.gx||0!==this.wx}qn(){this.mx=null}Dx(){return this.mx}Pc(){return this.Yn}Lx(){return 0!==this.gx||0!==this.wx}Nx(){return this.gx}kx(){return this.wx}Bx(){return this.vx}$x(){return this.xx}Wx(){return this.Tx}Ux(){return this._x}Vx(){return this.Ix}zx(){return this.Ex}jx(){return this.Rx}qx(){return this.Fx}Hx(){return this.Ox}Jx(){return!1}}}{const Yl=self.Cs;Yl.Xw.$v=class{constructor(t,s,i,e,n,r,h){this.mx=t,this.jp=0,this.Yx=null,this.Xx="",this.Zx=i,this.Kx=Yl.jn(Yl.To),this.Kx.set(e),this.Qx=n,this.tM=r,this.sM=h,"string"==typeof s?this.Xx=s:(this.Yx=s,this.Xx=this.Yx.Pc())}qn(){if(this.jp>0)throw new Error("releasing state group still in use");this.mx=null,this.Yx=null,this.Xx=""}iM(){const t=this.mx;t.Mv(this.Yx),t.eM(this.Zx),t.nM(this.Kx),t.ib(this.Qx),t.Ub(this.tM),t.Vb(this.sM),t.Lv(this)}jv(){return Yl.Xw.$v.Bv(this.Xx,this.Zx,this.Kx,this.Qx,this.tM,this.sM)}Wv(){++this.jp}Vv(){--this.jp}zv(){return this.jp}rM(){this.Yx=null}hM(t){if(this.Yx=t.vv(this.Xx),!this.Yx)throw new Error("failed to restore shader program")}static Bv(t,s,i,e,n,r){return("string"==typeof t?t:t.Pc())+","+s+","+i.ko()+","+i.Bo()+","+i.$o()+","+i.Wo()+","+e+","+n+","+r}}}{let Xl=function(t,s,i){const e=i.Br(),n=i.$r(),r=i.Wr()-e,h=i.Ur()-n;return[e+r*t+(i.jr()-e)*s,n+h*t+(i.qr()-n)*s]};interpolateQuad=Xl;const Zl=globalThis.Cs,Kl=globalThis.assert,Ql=65535;Zl.Xw.oM=class{constructor(t,s,i){this.aM=t,this.lM=s,this.uM=i,this.Pa=NaN,this.Ra=NaN,this.Qx=NaN,this.cM=NaN,this.fM=NaN,this.Pa=0,this.Ra=0,this.Qx=0,this.cM=0,this.fM=0}dM(t,s,i,e){this.Pa=t,this.Ra=s,this.cM=i,this.fM=e}pM(){return this.Pa}mM(t){this.Pa!==t&&(this.Pa=t,this.aM.gM())}yM(){return this.Ra}wM(t){this.Ra!==t&&(this.Ra=t,this.aM.gM())}SM(){return this.Qx}vM(t){this.Qx!==t&&(this.Qx=Math.max(t,0),this.aM.gM())}bM(){return this.cM}xM(t){this.cM=t}MM(){return this.fM}TM(t){this.fM=t}GM(t,s,i){[this.Pa,this.Ra]=Xl(t.Pa,t.Ra,s),this.Qx=t.Qx,this.cM=Zl.Ct(i.Qa(),i.sl(),t.cM),this.fM=Zl.Ct(i.tl(),i.il(),t.fM)}_M(t,s,i){[this.Pa,this.Ra]=Xl(t.Pa,t.Ra,s),this.Qx=t.Qx,[this.cM,this.fM]=Xl(t.cM,t.fM,i)}CM(){return{x:this.pM(),y:this.yM(),z:this.SM(),u:this.bM(),v:this.MM()}}IM(t){this.mM(t.x),this.wM(t.y),t.hasOwnProperty("z")&&this.vM(t.z),this.xM(t.u),this.TM(t.v)}EM(){return this.aM}PM(){return this.lM}RM(){return this.uM}},Zl.Xw.AM=class{constructor(t,s,i){if(t<2||s<2)throw new Error("invalid mesh size");this.FM=t,this.OM=s,this.DM=i||null,this.LM=[],this.NM=0,this.kM=0,this.BM=1,this.$M=1,this.WM=0,this.UM=!1,this.VM=[],this.zM=0,this.jM=!0;const e=t-1,n=s-1;for(let i=0;i<s;++i){const s=[];for(let r=0;r<t;++r){const t=Zl.jn(Zl.Xw.oM,this,r,i),h=r/e,o=i/n;t.dM(h,o,h,o),s.push(t)}this.LM.push(s)}}qn(){Zl.bh(this.LM),Zl.bh(this.VM)}qM(){return this.FM}HM(){return this.OM}JM(){return this.DM}YM(){return this.LM}gM(){this.UM=!0,this.jM=!0}XM(){if(!this.UM)return;let t=1/0,s=1/0,i=-1/0,e=-1/0,n=0;for(const r of this.LM)for(const h of r){const r=h.pM(),o=h.yM();t=Math.min(t,r),s=Math.min(s,o),i=Math.max(i,r),e=Math.max(e,o),n=Math.max(n,h.SM())}this.NM=t,this.kM=s,this.BM=i,this.$M=e,this.WM=n,this.UM=!1}ZM(){return this.XM(),this.NM}KM(){return this.XM(),this.kM}QM(){return this.XM(),this.BM}tT(){return this.XM(),this.$M}sT(){return this.XM(),this.WM}iT(){return this.sT()>0}eT(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.FM||s<0||s>=this.OM?null:this.LM[s][t]}nT(t,s,i){const e=i instanceof Zl.Rect;if(t.qM()!==this.qM()||t.HM()!==this.HM())throw new Error("source mesh wrong size");const n=t.LM,r=this.LM;for(let t=0,h=r.length;t<h;++t){const h=n[t],o=r[t];for(let t=0,n=o.length;t<n;++t){const n=h[t],r=o[t];e?r.GM(n,s,i):r._M(n,s,i)}}this.jM=!0}rT(t){if(!this.jM&&this.zM===t)return;const s=this.FM,i=this.OM,e=this.VM,n=Math.floor(65535/s)-1;if(n<=0)throw new Error("mesh too large");const r=Math.ceil((i-1)/n);r<e.length&&(e.length=r);let h=0;for(let o=0;o<r;++o){const r=Math.min(n,i-h-1),a=(r+1)*s,l=3*a,u=2*a,c=(s-1)*r*6;if(o===e.length)e.push({hT:new Float32Array(l),oT:new Float32Array(u),aT:new Uint16Array(c)});else{const t=e[o];t.hT.length!==l&&(t.hT=new Float32Array(l)),t.oT.length!==u&&(t.oT=new Float32Array(u)),t.aT.length!==c&&(t.aT=new Uint16Array(c))}const{hT:f,oT:d,aT:p}=e[o];this.lT(h,r,t,f,d,p),h+=n}this.zM=t,this.jM=!1}lT(t,s,i,e,n,r){const h=this.LM,o=this.FM;let a=0,l=0,u=0;for(let c=t,f=t+s+1;c<f;++c){const s=h[c],d=c+1,p=c-t,m=p*o,g=(p+1)*o;for(let t=0,h=s.length;t<h;++t){const o=s[t],c=t+1;if(e[a++]=o.pM(),e[a++]=o.yM(),e[a++]=o.SM()+i,n[l++]=o.bM(),n[l++]=o.MM(),c<h&&d<f){const s=t+m,i=c+m,e=c+g,n=t+g;r[u++]=s,r[u++]=i,r[u++]=e,r[u++]=s,r[u++]=e,r[u++]=n}}}}uT(t,s){this.rT(s);for(const{hT:s,oT:i,aT:e}of this.VM)t.cT(s,i,e)}fT(t,s){s||(s=(t,s,i)=>[t,s,i]);const i=this.LM;let e=i[0];for(let n=1,r=i.length;n<r;++n){const h=i[n];let o=e[0],a=h[0];for(let i=1,l=h.length;i<l;++i){const u=e[i],c=h[i],[f,d,p]=s(o.pM(),o.yM(),o.SM()),[m,g,y]=s(u.pM(),u.yM(),u.SM()),[w,S,v]=s(c.pM(),c.yM(),c.SM()),[b,x,M]=s(a.pM(),a.yM(),a.SM());t.ob(f,d,p,m,g,y),t.ob(f,d,p,w,S,v),t.ob(f,d,p,b,x,M),i===l-1&&t.ob(m,g,y,w,S,v),n===r-1&&t.ob(b,x,M,w,S,v),o=u,a=c}e=h}}dT(t){const s=.001,i=.99999999,e=t.pu(),n=[],r=this.qM()-1,h=this.HM()-1,o=1/r,a=1/h,l=r-1,u=h-1;let c=e[0],f=e[1],d=Zl.Zn(Math.floor(c*r),0,l),p=Zl.Zn(Math.floor(f*h),0,u),m=!0,g=0,y=0,w=0,S=-1;const v=()=>{c=Zl.Zn(Zl.Ct(c,g,w),0,1),f=Zl.Zn(Zl.Ct(f,y,w),0,1),n.push(c,f)};for(let t=0,b=e.length;t<b;t+=2){c=e[t],f=e[t+1],n.push(c,f),d=Zl.Zn(Math.floor(c*r),0,l),p=Zl.Zn(Math.floor(f*h),0,u);const x=(t+2)%b;for(g=e[x],y=e[x+1],S=-1;;){if(n.length>1e6)throw new Error("Too many mesh poly points");const t=d*o,e=p*a,r=(d+1)*o,h=(p+1)*a;if(m=Zl.Xr(c,f,t,e,r,e,r,h),0!==S&&(w=Zl.Yr(c,f,g,y,t,e,r,h,-.001),w>=0&&w<=i))v(),m=!m,S=0;else if(p>0&&2!==S&&(w=Zl.Yr(c,f,g,y,t,e,r,e,s),w>=0&&w<=i))v(),p--,m=!1,S=4;else if(d<l&&3!==S&&(w=Zl.Yr(c,f,g,y,r,e,r,h,s),w>=0&&w<=i))v(),d++,m=!1,S=1;else if(d>0&&1!==S&&(w=Zl.Yr(c,f,g,y,t,e,t,h,s),w>=0&&w<=i))v(),d--,m=!0,S=3;else{if(!(p<u&&4!==S&&(w=Zl.Yr(c,f,g,y,t,h,r,h,s),w>=0&&w<=i)))break;v(),p++,m=!0,S=2}}}return Zl.jn(Zl.lu,n)}pT(t,s){const i=this.mT(t);this.gT(i),s.gu(i)}mT(t){const s=[],i=t.pu();for(let t=0,e=i.length;t<e;t+=2){const e=i[t],n=i[t+1],[r,h]=this.yT(e,n);s.push(r,h)}return s}yT(t,s){const i=this.qM()-1,e=this.HM()-1,n=1/i,r=1/e,h=Zl.Zn(Math.floor(t*i),0,i-1),o=Zl.Zn(Math.floor(s*e),0,e-1),a=h*n,l=o*r,u=(h+1)*n,c=(o+1)*r,f=this.eT(h,o),d=this.eT(h+1,o+1),p=Zl.Xr(t,s,a,l,u,l,u,c),m=p?a+n:a,g=p?l:l+r,y=this.eT(h+(p?1:0),o+(p?0:1)),[w,S,v]=Zl.Zr(t,s,a,l,m,g,u,c);return Zl.Kr(w,S,v,f.pM(),f.yM(),f.SM(),y.pM(),y.yM(),y.SM(),d.pM(),d.yM(),d.SM())}gT(t){const s=[],i=1e-7;let e=t[0],n=t[1],r=e-t.at(-2),h=n-t.at(-1);for(let o=0,a=t.length;o<a;o+=2){const l=(o+2)%a,u=t[l],c=t[l+1],f=u-e,d=c-n,p=Math.abs(f)<i&&Math.abs(r)<i&&Math.sign(d)===Math.sign(h),m=Math.abs(d)<i&&Math.abs(h)<i&&Math.sign(f)===Math.sign(r);(!p&&!m&&Math.abs(f/r-d/h)>.001||0==f&&0===d)&&s.push(e,n),e=u,n=c,r=f,h=d}s.length>=6&&s.length<t.length&&Zl.Gh(t,s)}CM(){return{cols:this.qM(),rows:this.HM(),points:this.LM.map(t=>t.map(t=>t.CM()))}}IM(t){const s=this.qM(),i=this.HM();if(t.cols!==s||t.rows!==i)throw new Error("mesh data wrong size");const e=t.points;for(let t=0;t<i;++t){const i=e[t];for(let e=0;e<s;++e)this.eT(e,t).IM(i[e])}}}}{let tu=function(t,s){let i,e,n,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,n=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,n=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{wT:i,ST:e,format:n,type:r}};GetFormatSpecifiers=tu;const su=self.Cs,iu=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),eu=new Set(["nearest","bilinear","trilinear"]),nu=new Set(["default","low","high"]),ru=new Set(["clamp-to-edge","repeat","mirror-repeat"]),hu={vT:"clamp-to-edge",bT:"clamp-to-edge",xT:"trilinear",MT:0,TT:"rgba8",GT:!0,_T:"default",CT:!0,IT:!1,width:-1,height:-1},ou={CT:!0,flipY:!1},au=new Set;su.Xw.ET=class{constructor(t){this.mx=t,this.PT=null,this.Uy=0,this.Vy=0,this.RT=!0,this.AT="clamp-to-edge",this.FT="clamp-to-edge",this.OT="trilinear",this.DT=0,this.LT="rgba8",this.NT=!1,this.kT="default",this.jp=0}BT(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData||t instanceof ArrayBuffer))throw new Error("invalid texture source");if(s=Object.assign({},hu,s),this.PT)throw new Error("already created texture");if(this.AT=s.vT,this.FT=s.bT,this.OT=s.xT,this.DT=s.MT,this.LT=s.TT,this.NT=!!s.GT&&this.mx.Zb(),this.kT=s._T,!ru.has(this.AT)||!ru.has(this.FT))throw new Error("invalid wrap mode");if(!eu.has(this.OT))throw new Error("invalid sampling");if(!iu.has(this.LT))throw new Error("invalid pixel format");if(!nu.has(this.kT))throw new Error("invalid mipmap quality");if(this.RT=!0,t instanceof ArrayBuffer||null===t||s.IT){if(this.Uy=s.width,this.Vy=s.height,t instanceof ArrayBuffer&&t.byteLength!==this.Uy*this.Vy*4)throw new Error("ArrayBuffer wrong size")}else this.Uy=t.width,this.Vy=t.height;if(this.Uy<=0||this.Vy<=0)throw new Error("invalid texture data size");if(s.IT){const s=su.co(this.Uy,this.Vy);s.getContext("2d").drawImage(t,0,0,this.Uy,this.Vy),t=s}const i=su.vr(this.Uy)&&su.vr(this.Vy),e=this.mx.$T();if(this.Uy>e||this.Vy>e)throw new Error("texture data exceeds maximum texture size");const n=this.mx.WT(),r=this.mx.UT();this.PT=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.PT),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.CT),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const h=tu(this.LT,n);if(this.mx.VT()||i||!this.zT())if(r>=2){let s;s=this.NT?Math.floor(Math.log2(Math.max(this.Uy,this.Vy))+1):1,n.texStorage2D(n.TEXTURE_2D,s,h.wT,this.Uy,this.Vy),t instanceof ArrayBuffer?n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.Uy,this.Vy,h.format,h.type,new Uint8Array(t)):null!==t&&n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,t)}else t instanceof ArrayBuffer?n.texImage2D(n.TEXTURE_2D,0,h.ST,this.Uy,this.Vy,0,h.format,h.type,new Uint8Array(t)):null===t?n.texImage2D(n.TEXTURE_2D,0,h.ST,this.Uy,this.Vy,0,h.format,h.type,null):n.texImage2D(n.TEXTURE_2D,0,h.ST,h.format,h.type,t);else{if(null===t)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if(t instanceof ArrayBuffer&&(t=new ImageData(new Uint8ClampedArray(t),this.Uy,this.Vy)),t instanceof ImageData){const s=su.co(this.Uy,this.Vy);s.getContext("2d").putImageData(t,0,0),t=s}const s=su.co(su.br(this.Uy),su.br(this.Vy)),i=s.getContext("2d");i.imageSmoothingEnabled="nearest"!==this.OT,i.drawImage(t,0,0,this.Uy,this.Vy,0,0,s.width,s.height),n.texImage2D(n.TEXTURE_2D,0,h.ST,h.format,h.type,s)}null!==t&&this.jT(n),n.bindTexture(n.TEXTURE_2D,null),this.mx.qT(),this.jp=1,au.add(this)}HT(t,s,i){if(i=Object.assign({},hu,i),this.PT)throw new Error("already created texture");if(this.AT=i.vT,this.FT=i.bT,this.OT=i.xT,this.LT=i.TT,this.NT=!!i.GT&&this.mx.Zb(),this.kT=i._T,!ru.has(this.AT)||!ru.has(this.FT))throw new Error("invalid wrap mode");if(!eu.has(this.OT))throw new Error("invalid sampling");if(!iu.has(this.LT))throw new Error("invalid pixel format");if(!nu.has(this.kT))throw new Error("invalid mipmap quality");this.RT=!1,this.Uy=Math.floor(t),this.Vy=Math.floor(s);const e=su.vr(this.Uy)&&su.vr(this.Vy),n=this.mx.$T();if(this.Uy<=0||this.Vy<=0)throw new Error("invalid texture size");if(this.Uy>n||this.Vy>n)throw new Error("texture exceeds maximum texture size");if(!this.mx.VT()&&this.zT()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.mx.WT(),h=this.mx.UT();this.PT=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.PT),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.CT),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const o=tu(this.LT,r),a=h>=2?o.wT:o.ST;r.texImage2D(r.TEXTURE_2D,0,a,this.Uy,this.Vy,0,o.format,o.type,null),this.jT(r),r.bindTexture(r.TEXTURE_2D,null),this.mx.qT(),this.jp=1,au.add(this)}JT(t){if("default"===this.kT)return this.RT?t.NICEST:t.FASTEST;if("low"===this.kT)return t.FASTEST;if("high"===this.kT)return t.NICEST;throw new Error("invalid mipmap quality")}zT(){return"clamp-to-edge"!==this.AT||"clamp-to-edge"!==this.FT}YT(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}jT(t){const s=su.vr(this.Uy)&&su.vr(this.Vy);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.YT(t,this.AT)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.YT(t,this.FT)),"nearest"===this.OT)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.NT=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.mx.VT())&&this.NT){t.hint(t.GENERATE_MIPMAP_HINT,this.JT(t)),t.generateMipmap(t.TEXTURE_2D);const s="trilinear"===this.OT&&!this.mx.Qb();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.NT=!1;const i=this.mx.XT();i&&this.DT>0&&"nearest"!==this.OT&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.DT,this.mx.ZT()))}KT(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.PT||this.jp<=0)throw new Error("texture not created");if(this.RT)throw new Error("cannot update static texture");s=Object.assign({},ou,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,n=this.mx.UT(),r=this.mx.WT();r.bindTexture(r.TEXTURE_2D,this.PT),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.CT),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY);const h=tu(this.LT,r),o=n>=2?h.wT:h.ST;try{if(this.Uy===i&&this.Vy===e){const s=su.vr(this.Uy)&&su.vr(this.Vy);r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,t),(s||this.mx.VT())&&this.NT&&(r.hint(r.GENERATE_MIPMAP_HINT,this.JT(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.Uy=i,this.Vy=e;const s=su.vr(this.Uy)&&su.vr(this.Vy);if(!this.mx.VT()&&this.zT()&&!s)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,h.format,h.type,t),(s||this.mx.VT())&&this.NT&&(r.hint(r.GENERATE_MIPMAP_HINT,this.JT(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.mx.qT()}QT(){if(this.jp>0)throw new Error("texture still has references");if(!this.PT)throw new Error("already deleted texture");au.delete(this),this.mx.WT().deleteTexture(this.PT),this.PT=null}tG(){return!!this.PT}sG(){return this.PT}Dx(){return this.mx}iG(){this.jp++}eG(){if(this.jp<=0)throw new Error("no more references");this.jp--}nG(){return this.jp}My(){return this.Uy}Gy(){return this.Vy}rG(){return this.RT}hG(){let t=this.Uy*this.Vy;switch(this.LT){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.NT&&(t+=Math.floor(t/3)),t}static rM(){au.clear()}static oG(){return au.values()}}}{const lu=self.Cs,uu=self.assert,cu=self.ls,fu=cu.ws,du=cu.ds,pu=new Set(["nearest","bilinear","trilinear"]),mu={xT:"trilinear",alpha:!0,depth:!1,aG:!0,lG:!0,uG:0},gu=new Set;lu.Xw.cG=class{constructor(t){this.mx=t,this.fG=null,this.dG=null,this.PT=null,this.pG=null,this.Uy=0,this.Vy=0,this.mG=!0,this.OT="trilinear",this.gG=!0,this.yG=!1,this.wG=!0,this.SG=0,this.vG=du.create(),this.bG=0,this.xG=0,this.MG=0}TG(t,s,i){i=Object.assign({},mu,i);const e=this.mx.UT();if(this.PT||this.pG)throw new Error("already created render target");if(this.OT=i.xT,this.gG=!!i.alpha,this.yG=!!i.depth,this.wG=!!i.aG,this.mG=!!i.lG,this.SG=i.uG,!pu.has(this.OT))throw new Error("invalid sampling");if(this.SG>0&&(e<2||this.wG))throw new Error("invalid use of multisampling");if(e<2&&(this.wG=!0),this.Uy=t,this.Vy=s,this.Uy<=0||this.Vy<=0)throw new Error("invalid render target size");this.GG();const n=this.mx.WT();if(this.fG=n.createFramebuffer(),this.yG&&(this.dG=n.createFramebuffer()),this.wG){this.PT=this.mx._G(this.Uy,this.Vy,{xT:this.OT,TT:this.gG?"rgba8":"rgb8",GT:!1});const t=this.PT.sG();n.bindFramebuffer(n.FRAMEBUFFER,this.fG),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),this.yG&&(n.bindFramebuffer(n.FRAMEBUFFER,this.dG),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0))}else{this.pG=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.pG);const t=this.gG?n.RGBA8:n.RGB8;if(this.SG>0){const s=n.getInternalformatParameter(n.RENDERBUFFER,t,n.SAMPLES);if(s&&s[0]){const t=s[0];this.SG>t&&(this.SG=t)}else this.SG=0}0===this.SG?n.renderbufferStorage(n.RENDERBUFFER,t,this.Uy,this.Vy):n.renderbufferStorageMultisample(n.RENDERBUFFER,this.SG,t,this.Uy,this.Vy),n.bindFramebuffer(n.FRAMEBUFFER,this.fG),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.pG),this.yG&&(n.bindFramebuffer(n.FRAMEBUFFER,this.dG),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.pG)),n.bindRenderbuffer(n.RENDERBUFFER,null)}const r=this.mx.CG();this.yG&&r&&(n.bindFramebuffer(n.FRAMEBUFFER,this.fG),this.mx.IG()?n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,r,0):n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r)),n.bindFramebuffer(n.FRAMEBUFFER,null),gu.add(this)}EG(t,s){if(this.Uy===t&&this.Vy===s)return;this.Uy=t,this.Vy=s,this.GG();const i=this.mx.WT();i.bindFramebuffer(i.FRAMEBUFFER,this.fG),this.PT?this.PT.KT(new ImageData(this.Uy,this.Vy)):(i.bindRenderbuffer(i.RENDERBUFFER,this.pG),i.renderbufferStorage(i.RENDERBUFFER,this.gG?i.RGBA8:i.RGB8,this.Uy,this.Vy),i.bindRenderbuffer(i.RENDERBUFFER,null));const e=this.mx.CG();this.yG&&e&&(this.mx.IG()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}QT(){if(!this.PT&&!this.pG)throw new Error("already deleted render target");gu.delete(this);const t=this.mx.WT();this.PT?(t.bindFramebuffer(t.FRAMEBUFFER,this.fG),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.yG&&(t.bindFramebuffer(t.FRAMEBUFFER,this.dG),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.mx.PG(this.PT),this.PT=null):this.pG&&(t.bindFramebuffer(t.FRAMEBUFFER,this.fG),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.yG&&(t.bindFramebuffer(t.FRAMEBUFFER,this.dG),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.pG),this.pG=null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.mx.UT()>=2&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.fG),this.yG&&t.deleteFramebuffer(this.dG);const s=this.mx.AG();s.FG=null,s.OG=null,this.fG=null}GG(){this.mx.dv(this.vG,this.Uy/this.Vy),this.bG=this.mx.lv(),this.xG=this.mx.rv(),this.MG=this.mx.ov()}DG(){return this.fG}LG(){return this.dG}Dx(){return this.mx}NG(){return this.PT}kG(){return this.mx.lv()===this.bG&&this.mx.rv()===this.xG&&this.mx.ov()===this.MG||this.GG(),this.vG}BG(){return"nearest"!==this.OT}$G(){return this.gG}WG(){return this.wG}UG(){return this.yG}My(){return this.Uy}Gy(){return this.Vy}VG(){return this.mG}zG(){return this.SG}jG(){const t={xT:this.OT,alpha:this.gG,aG:this.wG};return this.mG||(t.width=this.Uy,t.height=this.Vy),t}qG(t){return"nearest"!==(t=Object.assign({},mu,t)).xT===this.BG()&&!!t.alpha===this.$G()&&!!t.depth===this.UG()&&!(this.mx.UT()>=2&&!!t.aG!==this.WG())&&("number"==typeof t.width||"number"==typeof t.height?!this.VG()&&this.My()===Math.floor(t.width)&&this.Gy()===Math.floor(t.height):this.VG())}HG(){return this.PT?this.PT.sG():null}hG(){return this.PT?this.PT.hG():this.Uy*this.Vy*(this.gG?4:3)}static async JG(t,s){const i=await t.YG(s,!0);return await lu.po(i)}static rM(){gu.clear()}static XG(){return gu.values()}static ZG(t,s){for(const i of gu)i.VG()&&i.EG(t,s)}}}{const yu=self.Cs,wu=self.ls,Su=wu.ws,vu=wu.ds,bu=new Set(["aPos","aTex","aColor","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);yu.Xw.KG=class extends yu.Xw.ux{static async QG(t,s){const i=t.WT(),e=s.src,n=s.t_,r=s.name,h=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(h,e),i.compileShader(h);const o=i.createShader(i.VERTEX_SHADER);i.shaderSource(o,n),i.compileShader(o);const a=i.createProgram();i.attachShader(a,h),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aColor"),i.bindAttribLocation(a,3,"aPoints"),i.linkProgram(a);const l=t.s_();if(l?await t.i_(()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await yu.ph(5),!i.getShaderParameter(h,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(h);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+t)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(o);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+t)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const t=i.getProgramInfoLog(a);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+t)}const u=yu.Mm(i.getProgramInfoLog(a)||"").trim();return u&&!yu.vm(u)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,u),i.deleteShader(h),i.deleteShader(o),a}static async e_(t,s){const i=await yu.Xw.KG.QG(t,s);return new yu.Xw.KG(t,i,s)}constructor(t,s,i){super(t,i);const e=t.WT(),n=t.AG();t.Hb(),e.useProgram(s),this.n_=e,this.Yx=s,this.r_="<default-device-transform>"===i.name;const r=e.getAttribLocation(s,"aPos"),h=e.getAttribLocation(s,"aTex"),o=e.getAttribLocation(s,"aColor");this.h_=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.o_),e.vertexAttribPointer(r,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==h&&(e.bindBuffer(e.ARRAY_BUFFER,t.a_),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(h)),-1!==o&&(e.bindBuffer(e.ARRAY_BUFFER,t.l_),e.vertexAttribPointer(o,4,t.u_()?e.HALF_FLOAT:e.FLOAT,!1,0,0),e.enableVertexAttribArray(o)),-1!==this.h_&&(e.bindBuffer(e.ARRAY_BUFFER,t.c_),e.vertexAttribPointer(this.h_,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.h_)),e.bindBuffer(e.ARRAY_BUFFER,null),this.f_=new yu.Xw.d_(this,"matP","mat4"),this.p_=new yu.Xw.d_(this,"matMV","mat4"),this.m_=new yu.Xw.d_(this,"color","vec4"),this.g_=new yu.Xw.d_(this,"samplerFront","sampler"),this.y_=new yu.Xw.d_(this,"pointTexStart","vec2"),this.w_=new yu.Xw.d_(this,"pointTexEnd","vec2"),this.S_=new yu.Xw.d_(this,"zElevation","float"),this.v_=new yu.Xw.d_(this,"tileSize","vec2"),this.b_=new yu.Xw.d_(this,"tileSpacing","vec2"),this.x_=new yu.Xw.d_(this,"color2_","vec4"),this.M_=new yu.Xw.d_(this,"outlineThickness","float"),this.T_=new yu.Xw.d_(this,"samplerBack","sampler"),this.G_=new yu.Xw.d_(this,"samplerDepth","sampler"),this.__=new yu.Xw.d_(this,"destStart","vec2"),this.C_=new yu.Xw.d_(this,"destEnd","vec2"),this.I_=new yu.Xw.d_(this,"srcStart","vec2"),this.E_=new yu.Xw.d_(this,"srcEnd","vec2"),this.P_=new yu.Xw.d_(this,"srcOriginStart","vec2"),this.R_=new yu.Xw.d_(this,"srcOriginEnd","vec2"),this.A_=new yu.Xw.d_(this,"pixelSize","vec2"),this.F_=new yu.Xw.d_(this,"seconds","float"),this.O_=new yu.Xw.d_(this,"devicePixelRatio","float"),this.D_=new yu.Xw.d_(this,"layerScale","float"),this.L_=new yu.Xw.d_(this,"layerAngle","float"),this.N_=new yu.Xw.d_(this,"layoutStart","vec2"),this.k_=new yu.Xw.d_(this,"layoutEnd","vec2"),this.B_=new yu.Xw.d_(this,"zNear","float"),this.W_=new yu.Xw.d_(this,"zFar","float"),this.U_=!!(this.A_.V_()||this.F_.V_()||this.T_.V_()||this.__.V_()||this.C_.V_()||this.I_.V_()||this.E_.V_()||this.P_.V_()||this.R_.V_()||this.O_.V_()||this.D_.V_()||this.L_.V_()||this.N_.V_()||this.k_.V_());const a=i.parameters||[];this.z_=[],this.Fx=this.A_.V_()||this.I_.V_()||this.E_.V_()||this.P_.V_()||this.R_.V_(),this.j_=!1,this.q_=!1,this.m_.H_(1,1,1,1),this.x_.H_(1,1,1,1),this.g_.J_(0),this.T_.J_(1),this.G_.J_(2),this.y_.Y_(0,0),this.w_.Y_(1,1),this.S_.X_(0),this.v_.Y_(0,0),this.b_.Y_(0,0),this.__.Y_(0,0),this.C_.Y_(1,1),this.I_.Y_(0,0),this.E_.Y_(0,0),this.P_.Y_(0,0),this.R_.Y_(0,0),this.A_.Y_(0,0),this.O_.X_(1),this.B_.X_(t.rv()),this.W_.X_(t.ov()),this.D_.X_(1),this.L_.X_(0),this.F_.X_(0),this.N_.Y_(0,0),this.k_.Y_(0,0),this.M_.X_(1);for(const t of a){const s=t[0],i=t[2],e=new yu.Xw.d_(this,s,i);"color"===i?e.Z_(0,0,0):e.X_(0),this.z_.push(e)}this.r_?this.K_(n.Q_):(this.tC(n.Q_,!0),this.sC(n.iC,!0));const l=n.eC;e.useProgram(l?l.Yx:null)}qn(){this.n_.deleteProgram(this.Yx),this.Yx=null,this.mx.Sv(this),this.n_=null,super.qn()}nC(){return this.n_}rC(){return this.Yx}hC(){return this.z_.length}oC(t){return t<0||t>=this.z_.length?null:this.z_[t].aC()}lC(t){for(let s=0,i=t.length;s<i;++s)if(!this.z_[s].uC(t[s]))return!1;return!0}cC(t){for(let s=0,i=t.length;s<i;++s)this.z_[s].fC(t[s])}dC(t,s,i,e,n,r,h,o,a,l){return!(this.T_.V_()||this.A_.V_()&&!this.A_.pC(n,r)||this.__.V_()&&!this.__.pC(t.Qa(),t.tl())||this.C_.V_()&&!this.C_.pC(t.sl(),t.il())||this.O_.V_()&&!this.O_.mC(h)||this.D_.V_()&&!this.D_.mC(o)||this.L_.V_()&&!this.L_.mC(a)||this.I_.V_()&&!this.I_.pC(s.Qa(),s.tl())||this.E_.V_()&&!this.E_.pC(s.sl(),s.il())||this.P_.V_()&&!this.P_.pC(i.Qa(),i.tl())||this.R_.V_()&&!this.R_.pC(i.sl(),i.il())||this.N_.V_()&&!this.N_.pC(e.Qa(),e.tl())||this.k_.V_()&&!this.k_.pC(e.tl(),e.il())||this.F_.V_()&&!this.F_.mC(l))}gC(t,s,i,e,n,r,h,o,a,l){this.T_.V_()||(this.A_.V_()&&this.A_.yC(n,r),this.__.V_()&&this.__.yC(t.Qa(),t.tl()),this.C_.V_()&&this.C_.yC(t.sl(),t.il()),this.O_.V_()&&this.O_.wC(h),this.D_.V_()&&this.D_.wC(o),this.L_.V_()&&this.L_.wC(a),this.I_.V_()&&this.I_.yC(s.Qa(),s.tl()),this.E_.V_()&&this.E_.yC(s.sl(),s.il()),this.P_.V_()&&this.P_.yC(i.Qa(),i.tl()),this.R_.V_()&&this.R_.yC(i.sl(),i.il()),this.N_.V_()&&this.N_.yC(e.Qa(),e.tl()),this.k_.V_()&&this.k_.yC(e.tl(),e.il()),this.F_.V_()&&this.F_.wC(l))}tC(t,s){this.j_&&!s||this.r_||(this.f_.V_()&&this.f_.SC(t),this.j_=!0)}vC(){this.j_=!1}sC(t,s){this.q_&&!s||this.r_||(this.p_.V_()&&this.p_.SC(t),this.q_=!0)}bC(){this.q_=!1}K_(t){if(!this.r_)throw new Error("not device transform shader");this.f_.SC(t);const s=this.mx,i=s.My()/2,e=s.Gy()/2,n=s.yv(i,e,s.QS(s.Gy()),i,e,0,s.Gy());this.p_.SC(n)}xC(t){this.m_.V_()&&this.m_.MC(t[0],t[1],t[2],t[3])}static TC(){return bu}static GC(t){return t?"\n#extension GL_EXT_conservative_depth : enable\nlayout (depth_greater) out highp float gl_FragDepth;\n\t":""}static _C(t){const s=t?"highp":"mediump";return["attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"attribute lowp vec4 aColor;","varying lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static CC(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"in lowp vec4 aColor;","out lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static IC(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","}"].join("\n")}static EC(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static PC(t){return["#version 300 es",yu.Xw.KG.GC(t),"in mediump vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static RC(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","}"].join("\n")}static AC(){return["#extension GL_EXT_frag_depth : enable","varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static FC(t){return["#version 300 es",yu.Xw.KG.GC(t),"in highp vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static OC(t,s,i,e){let n="";return t>=2?n="#version 300 es\n"+yu.Xw.KG.GC(e):(s&&(n="#extension GL_EXT_frag_depth : enable\n"),i&&(n+="#extension GL_EXT_shader_texture_lod : enable\n",n+="#extension GL_OES_standard_derivatives : enable\n")),n+`\nprecision highp float;\n${t>=2?"in":"varying"} vec2 vTex;\n${t>=2?"out lowp vec4 outColor;":""}\n${t>=2?"in":"varying"} lowp vec4 vColor;\nuniform lowp sampler2D samplerFront;\nuniform vec2 pixelSize;\n\nuniform vec2 tileSize;\nuniform vec2 tileSpacing;\nuniform float outlineThickness;\n\nconst float PI = 3.1415926;\n\nlowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nvec3 randVec3(vec2 seed)\n{\n\treturn vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));\n}\n\nlowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)\n{\n\tvec2 posRandom = tileSize;\n\tfloat angleRandom = outlineThickness;\n\t\n\tvec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;\n\t\n\tfloat angle = angleRandom * rand.z * PI;\n\tfloat sin_a = sin(angle);\n\tfloat cos_a = cos(angle);\n\tfloat aspect = pixelSize.x / pixelSize.y;\n\n\tvec2 mid = tile + vec2(0.5, 0.5);\n\tvec2 dp = uv - mid;\n\tdp.x /= aspect;\n\tvec2 r = vec2(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvec2 p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\t${t>=2?"return textureGrad(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&!i?"return texture2D(samplerFront, p);":""}\n}\n\nvoid main(void) {\n\t\n\t${t<2?"lowp vec4 outColor;":""}\n\t\n\tfloat blendMarginX = tileSpacing.x;\n\tfloat blendMarginY = tileSpacing.y;\n\t\n\tvec2 tile = floor(vTex);\n\tvec2 tex = fract(vTex);\n\tvec2 ddx = ${t>=2||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};\n\tvec2 ddy = ${t>=2||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};\n\t\n\tvec4 curTile = sampleTile(tile, vTex, ddx, ddy);\n\t\n\tbool inLeftMargin = (tex.x < blendMarginX);\n\tbool inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tbool inTopMargin = (tex.y < blendMarginY);\n\tbool inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tlowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tlowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tlowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tlowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tlowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tlowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutColor = curTile;\n\t}\n\t\n\toutColor *= vColor;\n\t${t<2?"gl_FragColor = outColor;":""}\n\t${t>=2?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n\t${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n}\n`}static DC(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static LC(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static NC(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static kC(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static BC(t){return["#version 300 es",yu.Xw.KG.GC(t),"uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static $C(){return["varying lowp vec4 vColor;","void main(void) {","\tgl_FragColor = vColor;","}"].join("\n")}static WC(){return["precision lowp float;","varying mediump vec2 vTex;","varying vec4 vColor;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(vColor.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(vColor.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static UC(){return["precision lowp float;","varying highp vec2 vTex;","varying vec4 vColor;","void main(void) {","\thighp float grad = vTex.x / (1.0 - vTex.y);","\tgl_FragColor = vColor * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);","}"].join("\n")}static VC(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = vColor * f;","}"].join("\n")}static zC(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = vColor * f;","}"].join("\n")}static jC(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp float innerF = step(distSq, 0.25);","\thighp vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}static qC(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 innerEdge = halfNorm - pixelSize * norm;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = vColor * f;","}"].join("\n")}static HC(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 pxNorm = pixelSize * norm;","\thighp vec2 innerEdge1 = halfNorm - pxNorm;","\thighp vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\thighp float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\thighp vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\thighp vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\thighp vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\thighp vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\thighp float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}}}{const xu=self.Cs,Mu=self.ls,Tu=Mu.ds,Gu=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);xu.Xw.d_=class{constructor(t,s,i){if(!Gu.has(i))throw new Error("invalid uniform type");this.DM=t,this.n_=this.DM.nC(),this.Yn=s,this.Hc=i,this.JC="color"===this.Hc,this.YC=this.n_.getUniformLocation(this.DM.rC(),s),this.XC=!!this.YC;const e=Gu.get(i);this.ZC=new Float32Array(e),this.KC=new Float32Array(e)}qn(){this.DM=null,this.n_=null,this.YC=null}V_(){return this.XC}aC(){return this.Hc}QC(){return this.JC}X_(t){this.V_()&&(this.ZC[0]=t,this.KC.set(this.ZC),this.n_.uniform1f(this.YC,t))}J_(t){this.V_()&&(this.ZC[0]=t,this.KC.set(this.ZC),this.n_.uniform1i(this.YC,t))}Y_(t,s){this.V_()&&(this.ZC[0]=t,this.ZC[1]=s,this.KC.set(this.ZC),this.n_.uniform2f(this.YC,t,s))}Z_(t,s,i){this.V_()&&(this.ZC[0]=t,this.ZC[1]=s,this.ZC[2]=i,this.KC.set(this.ZC),this.n_.uniform3f(this.YC,t,s,i))}H_(t,s,i,e){this.V_()&&(this.ZC[0]=t,this.ZC[1]=s,this.ZC[2]=i,this.ZC[3]=e,this.KC.set(this.ZC),this.n_.uniform4f(this.YC,t,s,i,e))}tI(t){t=Math.fround(t);const s=this.ZC;s[0]!==t&&(s[0]=t,this.n_.uniform1f(this.YC,t))}sI(t){const s=this.ZC;s[0]!==t&&(s[0]=t,this.n_.uniform1i(this.YC,t))}iI(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.ZC;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.n_.uniform2f(this.YC,t,s))}eI(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.ZC;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.n_.uniform3f(this.YC,t,s,i))}MC(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const n=this.ZC;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(n[0]=t,n[1]=s,n[2]=i,n[3]=e,this.n_.uniform4f(this.YC,t,s,i,e))}SC(t){const s=this.ZC;Tu.O(s,t)||(xu.wh(s,t,0),this.n_.uniformMatrix4fv(this.YC,!1,t))}uC(t){const s=this.KC;return this.QC()?s[0]===Math.fround(t.ko())&&s[1]===Math.fround(t.Bo())&&s[2]===Math.fround(t.$o()):s[0]===Math.fround(t)}fC(t){const s=this.KC;this.QC()?(s[0]=t.ko(),s[1]=t.Bo(),s[2]=t.$o()):s[0]=t}mC(t){return this.KC[0]===Math.fround(t)}pC(t,s){const i=this.KC;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}wC(t){this.KC[0]=t}yC(t,s){const i=this.KC;i[0]=t,i[1]=s}}}{const _u=self.Cs,Cu=self.ls,Iu=Cu.Ss,Eu=Cu.ds,Pu=0,Ru=1,Au=2,Fu=3,Ou=4,Du=5,Lu=6,Nu=7,ku=8,Bu=9,$u=10,Wu=11,Uu=12,Vu=13,zu=14,ju=15,qu=16,Hu=17,Ju=18,Yu=19,Xu=20,Zu=21,Ku=22,Qu=23,tc=24,sc=25,ic=26,ec=27,nc=28,rc=29,hc=30;_u.Xw.nI=class{constructor(t){this.rI=t,this.iC=Eu.create(),this.Q_=Eu.create(),this.FG=null,this.OG=null,this.hI=!1,this.eC=null,this.oI=new _u.Rect,this.clearColor=_u.jn(_u.To,0,0,0,0)}},_u.Xw.aI=class{constructor(t){const s=new ArrayBuffer(96);this.Hc=0,this.lI=t,this.n_=t.rI.WT(),this.uI=0,this.cI=0,this.fI=null,this.dI=new Float32Array(s,0,16),this.pI=new Float32Array(s,64,4),this.mI=new Float32Array(s,80,4),this.gI=[]}yI(t,s){this.Hc=1,this.uI=t,this.cI=s}wI(){const t=this.n_;t.drawElements(t.TRIANGLES,this.cI,t.UNSIGNED_SHORT,this.uI)}SI(t){this.Hc=2,this.fI=t}vI(){const t=this.n_,s=this.fI;t.bindTexture(t.TEXTURE_2D,s?s.sG():null)}bI(t){this.Hc=20,t.Vo(this.pI,0)}xI(){const t=this.pI,s=this.lI.eC;s.x_.V_()&&s.x_.MC(t[0],t[1],t[2],t[3])}MI(t,s){this.Hc=3,this.uI=t,this.cI=s}TI(){this.n_.blendFunc(this.uI,this.cI)}GI(t,s,i,e){this.Hc=4;const n=this.pI;n[0]=t,n[1]=s,n[2]=i,n[3]=e}_I(){const t=this.pI;this.n_.viewport(t[0],t[1],t[2],t[3])}CI(t){this.Hc=5,Eu.S(this.dI,t)}II(){const t=this.lI,s=t.rI.vS,i=t.eC,e=this.dI;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.tC(e,!0):n.vC()}Eu.S(t.Q_,e)}EI(t){this.Hc=6,Eu.S(this.dI,t)}RI(){const t=this.lI,s=t.rI.vS,i=t.eC,e=this.dI;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.sC(e,!0):n.bC()}Eu.S(t.iC,e)}AI(t){this.Hc=7,this.fI=t}FI(){const t=this.n_,s=this.fI,i=this.lI;s?(i.FG=s.DG(),i.OG=s.LG(),i.hI&&i.OG?t.bindFramebuffer(t.FRAMEBUFFER,i.OG):t.bindFramebuffer(t.FRAMEBUFFER,i.FG)):(i.FG=null,i.OG=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}OI(t){this.Hc=8,t.Vo(this.dI,0)}DI(t,s,i,e){this.Hc=8;const n=this.dI;n[0]=t,n[1]=s,n[2]=i,n[3]=e}LI(){const t=this.n_,s=this.dI,i=this.lI.clearColor,e=s[0],n=s[1],r=s[2],h=s[3];i.Jo(e,n,r,h)||(t.clearColor(e,n,r,h),i.Eo(e,n,r,h)),t.clear(t.COLOR_BUFFER_BIT)}NI(t){this.Hc=14,t.Vo(this.dI,0)}kI(){const t=this.dI;this.lI.oI.set(t[0],t[1],t[2],t[3])}BI(t,s,i){this.Hc=9,this.uI=t,this.cI=1,this.dI[0]=s,i.Vo(this.pI,0)}$I(){const t=this.n_,s=this.lI,i=s.rI.MS;t.useProgram(i.Yx),i.tC(s.Q_,!1),i.sC(s.iC,!1);const e=s.oI;i.y_.V_()&&i.y_.iI(e.Qa(),e.tl()),i.w_.V_()&&i.w_.iI(e.sl(),e.il());const n=this.dI[0];if(i.S_.V_()&&i.S_.tI(n),i.m_.V_()){const t=this.pI;i.m_.MC(t[0],t[1],t[2],t[3])}t.drawArrays(t.POINTS,this.uI/4,this.cI),t.useProgram(s.eC.Yx)}WI(t){this.Hc=10,this.fI=t}UI(){const t=this.n_,s=this.lI,i=this.fI;s.eC=i,t.useProgram(i.Yx),i.tC(s.Q_,!1),i.sC(s.iC,!1)}VI(){this.Hc=11}zI(){const t=this.lI.eC,s=this.n_,i=this.dI,e=this.pI,n=this.mI;if(t.T_.V_()){const t=this.lI.rI,i=this.fI;t.jI!==i&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,i?i.sG():null),t.jI=i,s.activeTexture(s.TEXTURE0))}t.A_.V_()&&t.A_.iI(i[0],i[1]),t.__.V_()&&t.__.iI(i[2],i[3]),t.C_.V_()&&t.C_.iI(i[4],i[5]),t.O_.V_()&&t.O_.tI(this.cI),t.D_.V_()&&t.D_.tI(i[6]),t.L_.V_()&&t.L_.tI(i[7]),t.I_.V_()&&t.I_.iI(i[12],i[13]),t.E_.V_()&&t.E_.iI(i[14],i[15]),t.P_.V_()&&t.P_.iI(n[0],n[1]),t.R_.V_()&&t.R_.iI(n[2],n[3]),t.N_.V_()&&t.N_.iI(e[0],e[1]),t.k_.V_()&&t.k_.iI(e[2],e[3]),t.F_.V_()&&t.F_.tI(this.uI)}qI(){this.Hc=12}HI(){const t=this.lI.eC.z_,s=this.gI;for(let i=0,e=t.length;i<e;++i){const e=t[i],n=s[i];e.QC()?e.eI(n.ko(),n.Bo(),n.$o()):e.tI(n)}}JI(t){this.Hc=13,this.fI=t}YI(){const t=this.n_,s=this.fI,i=this.lI.FG;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}XI(t,s,i){this.Hc=16;const e=this.dI,n=this.lI.rI;e[0]=t.My(),e[1]=t.Gy(),e[2]=s?s.My():n.My(),e[3]=s?s.Gy():n.Gy(),e[4]=t.BG()?1:0,e[5]="stretch"===i;const r=this.gI;_u.bh(r),r.push(t.DG()),r.push(s?s.DG():null)}ZI(){const t=this.dI,s=this.gI,i=this.n_,e=t[0],n=t[1],r=t[2],h=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,n,0,0,r,h,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const t=Math.min(e,r),s=Math.min(n,h),o=Math.max(n-h,0),a=Math.max(h-n,0);i.blitFramebuffer(0,o,t,s+o,0,a,t,s+a,i.COLOR_BUFFER_BIT,i.NEAREST)}}KI(t){this.Hc=17,this.fI=t}QI(){this.fI.tE(),this.fI=null}sE(t){this.Hc=18,this.fI=t}iE(){this.fI.eE(),this.fI=null}nE(t,s,i){this.Hc=19;const e=this.dI;e[0]=t,e[1]=s,e[2]=i}rE(){const t=this.lI.eC,s=this.dI;t.A_.V_()&&t.A_.iI(s[0],s[1]),t.M_.V_()&&t.M_.tI(s[2])}hE(t,s,i,e,n,r,h){this.Hc=15;const o=this.dI;t.Vo(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=n/i,o[8]=r/s,o[9]=h/i}oE(){const t=this.lI.eC,s=this.dI;t.I_.V_()&&t.I_.iI(s[0],s[1]),t.A_.V_()&&t.A_.iI(s[4],s[5]),t.v_.V_()&&t.v_.iI(s[6],s[7]),t.b_.V_()&&t.b_.iI(s[8],s[9])}aE(t,s,i,e,n,r,h){this.Hc=28;const o=this.dI;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=n,o[5]=r,o[6]=h}lE(){const t=this.lI.eC,s=this.dI;t.A_.V_()&&t.A_.iI(s[0],s[1]),t.v_.V_()&&t.v_.iI(s[2],s[3]),t.M_.V_()&&t.M_.tI(s[4]),t.b_.V_()&&t.b_.iI(s[5],s[6])}uE(t){this.Hc=21,this.uI=t?1:0}cE(){const t=this.n_,s=0!==this.uI;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}fE(t){this.Hc=22,this.uI=t?1:0}dE(){const t=this.n_;0===this.uI?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}pE(t){this.Hc=23,this.uI=t?1:0}mE(){const t=this.n_,s=this.lI,i=s.rI,e=0!==this.uI;s.hI=e,t.activeTexture(t.TEXTURE2),e?(s.OG&&t.bindFramebuffer(t.FRAMEBUFFER,s.OG),t.bindTexture(t.TEXTURE_2D,i.CG())):(t.bindTexture(t.TEXTURE_2D,null),s.OG&&t.bindFramebuffer(t.FRAMEBUFFER,s.FG)),t.activeTexture(t.TEXTURE0)}gE(){this.Hc=24}yE(){const t=this.n_;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}wE(){this.Hc=25}SE(){const t=this.n_;t.enable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}vE(){this.Hc=26}bE(){const t=this.n_;t.disable(t.STENCIL_TEST)}xE(t,s,i,e,n){this.Hc=27,this.uI=t?1:0;const r=this.dI;r[0]=s,r[1]=i,r[2]=e,r[3]=n}ME(){const t=this.n_,s=this.dI;1===this.uI?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}TE(t){this.Hc=29,this.uI=t}GE(){const t=this.n_,s=this.uI;0===s?t.disable(t.CULL_FACE):(t.enable(t.CULL_FACE),1===s?t.cullFace(t.BACK):t.cullFace(t.FRONT))}_E(t){this.Hc=30,this.uI=t}CE(){const t=this.n_;t.frontFace(0===this.uI?t.CW:t.CCW)}IE(){switch(this.Hc){case 1:return void this.wI();case 2:return void this.vI();case 3:return void this.TI();case 4:return void this._I();case 5:return void this.II();case 6:return void this.RI();case 7:return void this.FI();case 8:return void this.LI();case 9:return void this.$I();case 10:return void this.UI();case 11:return void this.zI();case 12:return void this.HI();case 13:return void this.YI();case 14:return void this.kI();case 15:return void this.oE();case 16:return void this.ZI();case 17:return void this.QI();case 18:return void this.iE();case 19:return void this.rE();case 20:return void this.xI();case 21:return void this.cE();case 22:return void this.dE();case 23:return void this.mE();case 24:return void this.yE();case 25:return void this.SE();case 26:return void this.bE();case 27:return void this.ME();case 28:return void this.lE();case 29:return void this.GE();case 30:return void this.CE()}}}}{let oc=function(t,s,i,e,n,r){s?t.strokeRect(i,e,n,r):t.fillRect(i,e,n,r)},ac=function(t){return t*(4/3)},lc=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};fillOrStrokeRect=oc,ptToPx=ac,getOffsetParam=lc;const uc=self.Cs,cc=4096,fc=4,dc=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),pc={timeout:60},mc=new uc.To(0,0,0,1),gc=new Set(["left","center","right"]),yc=new Set(["top","center","bottom"]),wc=new Set(["word","cjk","character"]),Sc=new Set(["ltr","rtl"]),vc=1e3,bc=10,xc=2,Mc=new Set;uc.EE&&uc.EE.addEventListener("fontload",t=>{const s=t.font.Pc();for(const t of Mc)(t.PE()||uc.Ke(t.RE(),s))&&(t.AE(),t.FE())});let Tc=!1,Gc=!1;uc.Xw.lx=class{constructor(t,s){s=Object.assign({},pc,s),this.mx=t,this.OE="Arial",this.DE=16,this.LE=1,this.NE=0,this.kE=!1,this.BE=!1,this.$E="black",this.WE=!1,this.Xg=null,this.UE=!0,this.VE=null,this.zE=new Set,this.jE="left",this.qE="top",this.$c="",this.HE=null,this.JE=uc.jn(uc.Jg),this.YE="word",this.XE="ltr",this.ZE=!1,this.KE=!1,this.QE=!1,this.tP=!1,this.sP=-1,this.iP=0,this.eP=0,this.nP=0,this.Uy=0,this.Vy=0,this.rP=1,this.hP=null,this.oP=null,this.aP=null,this.lP=null,this.uP=-1,this.cP=-1,this.fP="",this.dP="",this.pP="",this.mP=1,this.gP=1,this.yP=t=>this.wP(t),this.SP=new Map,this.vP=new uc.Df(()=>this.FE(!0),2),this.PT=null,this.bP=!0,this.xP=new uc.Rect,this.MP=1,this.TP=new uc.Df(()=>{this.GP(),this._P(8,8),this.CP()},s.timeout),this.IP=null,this.EP=!1,Mc.add(this)}qn(){this.VE=null,this.zE.clear(),this.Xg=null,this.HE=null,this.hP=null,this.oP=null,this.aP=null,this.lP=null,this.yP=null,this.FE(),this.vP.qn(),this.TP.qn(),this.IP=null,this.GP(),this.JE.Pu(),this.JE=null,this.mx=null,this.EP=!0,Mc.delete(this)}CP(){this.QE=!0}PP(){this.CP(),this.KE=!0}AE(){this.PP(),this.ZE=!0}RP(t){if(t=!!t,this.WE===t)return;this.WE=t;const s=this.WE?"alphabetic":"top";this.oP&&(this.oP.textBaseline=s),this.aP&&(this.aP.textBaseline=s),this.FE(),this.AE()}PE(){return this.WE}iy(t){this.Xg!==t&&(this.Xg=t,this.JE.iy(t),this.Xg&&this.Xg.Nw()&&this.Xg.kw().then(()=>this.CP()),this.AE())}AP(t){t=!!t,this.UE!==t&&(this.UE=t,this.CP())}FP(t){t||(t="serif"),this.OE!==t&&(this.OE=t,this.FE(),this.AE())}RE(){return this.OE}OP(t){t<.1&&(t=.1),this.DE!==t&&(this.DE=t,this.FE(),this.AE())}DP(){return this.DE}LP(t){this.LE!==t&&(this.LE=t,this.FE(),this.AE())}NP(t){this.NE!==t&&(this.NE=t,this.PP())}kP(){return this.NE}BP(t){t=!!t,this.kE!==t&&(this.kE=t,this.FE(),this.AE())}$P(){return this.kE}WP(t){t=!!t,this.BE!==t&&(this.BE=t,this.FE(),this.AE())}UP(){return this.BE}VP(t){t=Math.floor(t),this.sP!==t&&(this.sP=t,this.CP())}zP(){return this.sP}jP(t,s){let i=[];(this.kE||s.rw("b"))&&i.push("bold"),(this.BE||s.rw("i"))&&i.push("italic");const e=s.ew("size"),n=(e?parseFloat(e.Pg):this.DE)*this.LE;t?i.push(n+"pt"):i.push(n*this.qP()+"pt");let r=this.OE;const h=s.ew("font");return h&&h.Pg&&(r=h.Pg,this.VE&&!this.zE.has(r)&&(this.VE(r),this.zE.add(r))),r&&(dc.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}nM(t){t instanceof uc.To&&(t=t.sa()),this.$E!==t&&(this.$E=t,this.CP())}HP(t,s,i){mc.Po(t,s,i),this.nM(mc)}JP(t){if(!gc.has(t))throw new Error("invalid horizontal alignment");this.jE!==t&&(this.jE=t,this.PP())}YP(){return this.jE}XP(t){if(!yc.has(t))throw new Error("invalid vertical alignment");this.qE!==t&&(this.qE=t,this.PP())}ZP(){return this.qE}KP(t){if(!wc.has(t))throw new Error("invalid word wrap mode");this.YE!==t&&(this.YE=t,this.FE(),this.AE())}QP(){return this.YE}tR(t){if(!Sc.has(t))throw new Error("invalid text direction");this.XE!==t&&(this.XE=t,this.oP&&(this.oP.direction=this.XE),this.aP&&(this.aP.direction=this.XE),this.FE(),this.AE())}sR(){return this.XE}Vc(t){this.$c!==t&&(this.$c=t,this.FE(),this.AE())}iR(){return this.$c}qP(){return this.MP*this.rP*self.devicePixelRatio}eR(t){t=!!t,this.bP!==t&&(this.bP=t,this.tP=!0)}nR(){return this.bP}rR(t,s,i){if(void 0===i&&(i=1),t<=0||t<=0)return;if(this.eP===t&&this.nP===s&&this.rP===i)return;const e=this.eP;this.eP=t,this.nP=s,this.rP=i;const n=self.devicePixelRatio;this.Uy=this.eP*this.rP*n,this.Vy=this.nP*this.rP*n;const r=Math.max(this.Uy,this.Vy),h=Math.min(this.mx.$T(),4096);let o=1;r>h&&(o=h/r,this.Uy=Math.min(this.Uy*o,h),this.Vy=Math.min(this.Vy*o,h)),this.MP=o,this.eP!==e?this.AE():this.PP()}My(){return this.Uy}Gy(){return this.Vy}hR(){return this.rP}oR(){return this.aR(),this.JE.$y()}lR(){return this.aR(),this.JE.Wy()+this.JE.sy()*(this.NE+4)-this.NE}uR(){this.aR();let t=0;for(const s of this.JE.ty())for(const i of s.Ng())t+=i.ey();return t}NG(){return this.TP.$f(),this.cR(),this.PT}fR(t,s){this.aR();const i=this.qP(),e=this.JE.ty();for(const n of e){const e=n.Cy()*i;if(s>=n.tw()-n.Gy()*i+e&&s<n.tw()+e)for(const s of n.Ng())if(t>=s.Ky()&&t<s.Ky()+s.My()*i)return s}return null}*dR(t){this.aR();const s=this.JE.ty();for(const i of s)for(const s of i.Ng()){const i=s.ew("tag");i&&uc.Ke(i.Pg,t)&&(yield s)}}pR(t,s){for(const i of this.dR(t)){if(0===s)return i;--s}return null}mR(t){let s=0;for(const i of this.dR(t))++s;return s}cR(){(!this.PT||this.QE||this.KE||this.ZE||this.tP)&&(this.EP||this.Uy<=0||this.Vy<=0||this.gR())}gR(){this.EP||(this.aR(),this._P(Math.max(uc.br(Math.ceil(this.Uy)),128),Math.max(uc.br(Math.ceil(this.Vy)),64)),this.yR(),this.wR(),this.TP.$f())}_P(t,s){this.hP||(this.hP=uc.co(16,16));let i=!1;this.uP===t&&this.cP===s||(this.uP=t,this.cP=s,this.hP.width=t,this.hP.height=s,i=!0),this.oP||(this.oP=this.hP.getContext("2d"),i=!0),i?(this.oP.textBaseline=this.WE?"alphabetic":"top",this.oP.direction=this.XE,this.oP.font=this.fP,this.oP.fillStyle=this.pP,this.oP.strokeStyle=this.pP,this.oP.globalAlpha=this.mP,this.oP.lineWidth=this.gP):this.oP.clearRect(0,0,t,s)}SR(){this.aP||(this.aP=uc.co(16,16).getContext("2d"),this.lP=uc.co(16,16).getContext("2d"),this.aP.textBaseline=this.WE?"alphabetic":"top",this.lP.textBaseline="top",this.aP.direction=this.XE,this.lP.direction=this.XE)}vR(t){this.dP!==t&&(this.dP=t,this.aP.font=t,this.lP.font=t)}bR(){if(!Tc){Tc=!0,this.SR();const t=this.aP.measureText("test");Gc="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return Gc}aR(){this.xR(),this.MR()}xR(){this.ZE&&(this.SR(),!this.WE||this.HE&&this.HE.toString()===this.$c||(this.HE=new uc.pn(this.$c,{mg:!0})),this.vP.$f(),this.JE.Jg(this.WE?this.HE.Ig():this.$c,this.yP,this.eP,this.YE,0),this.ZE=!1)}MR(){this.KE&&(this.TR(),this.KE=!1)}FE(t){this.SP.clear(),t||this.vP.Wf()}GR(t,s){const i=this.SP;if(i.set(t,s),i.size>1e3){let t=0;for(const s of i.keys())if(i.delete(s),t++,t>=10)break}}wP(t){const s=t.zg()?t.Hg().join(""):" ",i=this.jP(!0,t),e=i+"|"+s,n=this.SP;let r=n.get(e);if(r)return n.delete(e),n.set(e,r),r;this.vR(i);const h=this.aP.measureText(s);let o=0;if(this.WE&&this.bR()){const t=this.lP.measureText(s);o=h.fontBoundingBoxAscent-t.fontBoundingBoxAscent}const a=t.ew("size"),l=(a?parseFloat(a.Pg):this.DE)*this.LE;return r={width:h.width,height:ac(l),fontBoundingBoxAscent:h.fontBoundingBoxAscent||0,fontBoundingBoxDescent:h.fontBoundingBoxDescent||0,kg:o},this.GR(e,r),r}_R(t){this.fP!==t&&(this.fP=t,this.oP.font=t)}CR(t){this.pP!==t&&(this.pP=t,this.oP.fillStyle=t,this.oP.strokeStyle=t)}IR(t){this.mP!==t&&(this.mP=t,this.oP.globalAlpha=t)}ER(t){this.gP!==t&&(this.gP=t,this.oP.lineWidth=t)}TR(){const t=this.qP(),s=(4+this.NE)*t;let i=0;const e=this.JE.ty();if(0===e.length)return;for(const t of e){t.Zy(NaN),t.Qy(NaN);for(const s of t.Ng())s.Zy(NaN),s.Qy(NaN)}const n=this.WE&&this.bR();let r=e[0].Gy()*t;if("center"===this.qE){const h=e.reduce((i,e)=>i+e.Gy()*t+s,0)-s;i=Math.max(this.Vy/2-h/2,0),n&&(r=e[0].Iy()*t)}else if("bottom"===this.qE){const r=e.reduce((i,e)=>i+e.Gy()*t+s,0)-this.NE*t,h=n?e.at(-1).Cy()*t:0;i=this.Vy-r-h-2}for(let n=0,h=e.length;n<h;++n){const h=e[n],o=h.Gy()*t,a=i;if(this.WE){if(i+=0===n?r:o,n>0&&i>this.Vy-4*t)break}else if(n>0&&i>=this.Vy-o)break;a>=0&&this.PR(h,i,t),this.WE||(i+=o),i+=s}}PR(t,s,i){let e=0;"center"===this.jE?e=Math.floor((this.Uy-t.My()*i)/2):"right"===this.jE&&(e=this.Uy-t.My()*i),t.Zy(e),t.Qy(s);for(const n of"ltr"===this.XE?t.Ng():t.Yy())this.RR(n,e,s,i),e+=n.My()*i}RR(t,s,i,e){const n=t.ew("offsetx");s+=n?lc(n.Pg,t.Gy())*e:0;const r=t.ew("offsety");if(i+=r?lc(r.Pg,t.Gy())*e:0,t.vy()){const s=t.ew("iconoffsety");i+=s?lc(s.Pg,t.Gy())*e:.2*t.Gy()*e}t.Zy(s),t.Qy(i)}yR(){if(!this.QE)return;this.oP.imageSmoothingEnabled=this.UE,this.oP.imageSmoothingQuality="high",this.iP=0;const t=this.qP(),s=this.JE.ty();for(const i of s)this.AR(i,t);this.QE=!1}AR(t,s){const i=t.Ky(),e=t.tw();if(Number.isFinite(i)&&Number.isFinite(e))for(const i of"ltr"===this.XE?t.Ng():t.Yy())this.FR(i,s,t.Gy())}FR(t,s,i){const e=this.oP,n=t.Ky(),r=t.tw();if(!Number.isFinite(n)||!Number.isFinite(r))return;const h=i/16;let o=t.My()*s;const a=t.Gy()*s,l=t.Gy()/16,u=(4+this.NE)*s;let c=t.zg()?t.Hg():null;if(-1!==this.sP){if(this.iP>=this.sP)return;t.zg()&&this.iP+c.length>this.sP&&(c=c.slice(0,this.sP-this.iP),o=this.wP(t).width*s),this.iP+=t.ey()}const f=t.ew("background"),d=t.rw("u"),p=t.rw("s");if(t.zg()&&uc.bm(c)&&!f&&!d&&!p||t.rw("hide"))return;const m=t.ew("color"),g=t.ew("opacity");this.IR(g?parseFloat(g.Pg)/100:1),f&&(this.CR(f.Pg),e.fillRect(n,r-a,o,a+u));const y=t.ew("linethickness"),w=y?parseFloat(y.Pg):1,S=t.rw("stroke");if(S&&this.ER(.5*l*w*this.qP()),t.zg()){const s=c.join("");if(this._R(this.jP(!1,t)),!S){this.ER(.5*l*w*this.qP());const i=t.ew("outlineback");i&&(this.CR(i.Pg),this.OR(!0,s,n,r,o))}if(this.CR(m?m.Pg:this.$E),this.OR(S,s,n,r,o),!S){this.ER(.5*l*w*this.qP());const i=t.ew("outline");i&&(this.CR(i.Pg),this.OR(!0,s,n,r,o))}}else if(t.vy()&&t.My()>0){const s=t.dw(this.Xg);s&&e.drawImage(s,n,r-a,o,a)}if(this.CR(m?m.Pg:this.$E),d&&oc(e,S,n,r+s*h,o,s*h*w),p){const t=s*l,i=r-a/4+t/2;e.fillRect(n,i-t*w/2,o,t*w)}}OR(t,s,i,e,n){"rtl"===this.XE&&(i+=n),t?"Gecko"===uc.Ks.ni?this.oP.strokeText(s,i,e,n):this.oP.strokeText(s,i,e):"Gecko"===uc.Ks.ni?this.oP.fillText(s,i,e,n):this.oP.fillText(s,i,e)}wR(){this.mx.DR()||(this.PT&&!this.tP||(this.GP(),this.PT=this.mx._G(this.hP.width,this.hP.height,{GT:this.bP,_T:"high"}),this.tP=!1),this.mx.LR(this.hP,this.PT),this.xP.set(0,0,this.Uy/this.PT.My(),this.Vy/this.PT.Gy()),this.IP&&this.IP())}NR(){return this.xP}GP(){this.PT&&(this.mx.DR()||this.mx.PG(this.PT),this.PT=null)}static rM(){for(const t of Mc)t.GP()}static kR(){return Mc.values()}}}{const _c=self.Cs;class Cc{constructor(t){this.n_=t.WT(),this.BR=t.UT(),this.$R=t.WR(),this.UR=null,this.Bf=!1,this.VR=!1,this.zR=0,1===this.BR?this.UR=this.$R.createQueryEXT():this.UR=this.n_.createQuery()}qn(){this.jR(),this.n_=null,this.$R=null,this.VR=!1}jR(){this.UR&&(1===this.BR?this.$R.deleteQueryEXT(this.UR):this.n_.deleteQuery(this.UR),this.UR=null)}tE(){if(this.Bf)throw new Error("query already active");1===this.BR?this.$R.beginQueryEXT(this.$R.TIME_ELAPSED_EXT,this.UR):this.n_.beginQuery(this.$R.TIME_ELAPSED_EXT,this.UR),this.Bf=!0}eE(){if(!this.Bf)throw new Error("query not active");1===this.BR?this.$R.endQueryEXT(this.$R.TIME_ELAPSED_EXT):this.n_.endQuery(this.$R.TIME_ELAPSED_EXT),this.Bf=!1}qR(){if(!this.UR||this.VR||this.Bf)return;let t=!1;t=1===this.BR?this.$R.getQueryObjectEXT(this.UR,this.$R.QUERY_RESULT_AVAILABLE_EXT):this.n_.getQueryParameter(this.UR,this.n_.QUERY_RESULT_AVAILABLE);const s=this.n_.getParameter(this.$R.GPU_DISJOINT_EXT);t&&!s&&(1===this.BR?this.zR=this.$R.getQueryObjectEXT(this.UR,this.$R.QUERY_RESULT_EXT):this.zR=this.n_.getQueryParameter(this.UR,this.n_.QUERY_RESULT),this.zR/=1e9,this.VR=!0),(t||s)&&this.jR()}HR(){return this.VR}JR(){if(!this.VR)throw new Error("no result available");return this.zR}}_c.Xw.YR=class{constructor(t){this.mx=t,this.qS=t.Jb(),this.Bf=!1,this.XR=null,this.ZR=!1,this.KR=null,this.QR=[]}qn(){for(const t of this.QR)t instanceof Cc&&t.qn();_c.bh(this.QR),this.XR=null,this.KR=null,this.mx=null}tE(){if(this.Bf)throw new Error("query already active");const t=this.mx.tA();t.length>0?(this.ZR=!0,this.XR=t.at(-1),this.XR.sA(),this.XR.QR.push(this)):(this.ZR=!1,this.XR=null),this.Bf=!0,t.push(this),this.iA()}eE(){if(!this.Bf)throw new Error("query not active");if(this.mx.tA().pop()!==this)throw new Error("can only end most nested query");this.Bf=!1,this.sA(),this.XR&&(this.XR.iA(),this.XR=null)}iA(){this.KR=_c.jn(Cc,this.mx),this.QR.push(this.KR),this.KR.tE()}sA(){this.KR.eE(),this.KR=null}qR(){for(const t of this.QR)t.qR()}eA(){return this.ZR}HR(){return this.QR.every(t=>t.HR())}JR(){return this.QR.reduce((t,s)=>t+s.JR(),0)}Jb(){return this.qS}}}{const Ic=self.Cs;Ic.Xw.nA=class{constructor(t,s=1e3){this.mx=t,this.rA=s,this.hA=[],this.mx.oA(this)}qn(){this.Pu(),this.mx.aA(this),this.mx=null}Pu(){for(const t of this.hA)t.qn();Ic.bh(this.hA)}lA(){const t=new Ic.Xw.YR(this.mx);return this.hA.push(t),this.hA.length>this.rA&&this.hA.shift().qn(),t}uA(t){for(const s of this.hA){if(s.Jb()>=t)return;if(s.eA())return;s.qR()}}cA(t,s){if(s<=t)return NaN;let i=0;for(const e of this.hA){if(e.Jb()>=s)break;if(!(e.Jb()<t)){if(!e.HR())return NaN;i+=e.JR()}}return i}fA(t){for(let s=0,i=this.hA.length;s<i;++s){const i=this.hA[s];if(!(i.Jb()<t))return void(s>0&&this.hA.splice(0,s));i.qn()}}}}{let Ec=function(){Yc=-1;for(const t of Jc)t.dA()&&(t.resolve(),Jc.delete(t));Jc.size>0&&(Yc=self.requestAnimationFrame(Ec))};CheckPendingPolls=Ec;const Pc=self.Cs,Rc=self.assert,Ac=self.ls,Fc=Ac.ws,Oc=Ac.Ss,Dc=Ac.ds,Lc={powerPreference:"default",pA:!0,alpha:!1,depth:!1,mA:!1,gA:2,failIfMajorPerformanceCaveat:!1},Nc=new Set(["default","low-power","high-performance"]),kc=65535,Bc=393210,$c=8e3,Wc=7996,Uc=new Pc.El(0,0,1,0,1,1,0,1),Vc=Dc.create(),zc=Dc.create(),jc=new Pc.El,qc=new Pc.Rect;let Hc=null;Pc.Ls&&(self.yA=function(){Hc?Hc.loseContext():console.warn("WEBGL_lose_context not supported")},self.wA=function(){Hc?Hc.restoreContext():console.warn("WEBGL_lose_context not supported")});const Jc=new Set;let Yc=-1;Pc.Xw.SA=class extends Pc.Xw.fS{constructor(t,s){if(super(s),s=Object.assign({},Lc,s),!Nc.has(s.powerPreference))throw new Error("invalid power preference");const i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat};let e=null,n=0;if(s.gA>=2&&(e=t.getContext("webgl2",i),n=2),e||(e=t.getContext("webgl",i),n=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.n_=e,this.vA=e.getContextAttributes(),this.bA=e.getParameter(e.VERSION),this.BR=n,this.xA=Oc.create(),this.MA=!1,this.TA=Dc.create(),this.GA=!!s.depth,this._A=!(!s.depth||!s.mA),this.CA=this.GA,this.IA=!1,this.EA=null,this.PA=!0,this.RA=0,this.AA=0,this.o_=null,this.a_=null,this.l_=null,this.FA=null,this.c_=null,this.OA=this.BR>=2&&void 0!==globalThis.Float16Array,this.DA=new Float32Array(196605),this.LA=new Uint16Array(393210),this.NA=new Float32Array(131070),this.kA=this.OA?new globalThis.Float16Array(262140):new Float32Array(262140),this.BA=new Float32Array(32e3),this.$A=0,this.WA=0,this.UA=0,this.VA=null,this.zA=null,this.jA=[],this.qA=0,this.HA=0,this.JA=null,this.YA=0,this.lI=Pc.jn(Pc.Xw.nI,this),this.XA=Pc.jn(Pc.To,1,1,1,1),this.ZA=null,this.jI=null,this.KA=0,this.QA=0,this.tF=new Pc.Rect,this.sF=Pc.jn(Pc.Rect,0,0,-1,-1),this.iF=0,this.eF=0,this.nF=0,this.rF=-1,this.hF=0,this.oF=0,this.aF="(unavailable)",this.lF="(unavailable)",this.uF=[],this.cF=!1,this.fF=null,this.dF=null,this.pF=null,this.mF=null,this.gF=null,this.yF=null,this.wF=null,this.SF=0,this.vF=!!s.pA,this.$R=null,this.bF=new Set,this.xF=[]}tx(){return!0}async ZS(){super.ZS();const t=this.n_;this.XA.Eo(1,1,1,1),this.ZA=null,this.jI=null,this.$A=0,this.WA=0,this.UA=0,Pc.bh(this.jA),this.qA=0,this.HA=0,this.VA=null,this.JA=null,this.tF.set(0,0,1,1),this.YA=0;const s=this.lI;s.eC=null,s.FG=null,s.OG=null,s.clearColor.Eo(0,0,0,0),s.oI.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.KA=t.ONE,this.QA=t.ONE_MINUS_SRC_ALPHA,this.MF(t),t.cullFace(t.BACK),t.disable(t.CULL_FACE),this.eF=0,t.frontFace(t.CW),this.nF=0,t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.GA?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.CA=this.GA,this.IA=!1,this.c_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.c_),t.bufferData(t.ARRAY_BUFFER,this.BA.byteLength,t.DYNAMIC_DRAW),this.o_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.o_),t.bufferData(t.ARRAY_BUFFER,this.DA.byteLength,t.DYNAMIC_DRAW),this.a_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.a_),t.bufferData(t.ARRAY_BUFFER,this.NA.byteLength,t.DYNAMIC_DRAW),this.l_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.l_),t.bufferData(t.ARRAY_BUFFER,this.kA.byteLength,t.DYNAMIC_DRAW),this.FA=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.FA),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.LA.byteLength,t.DYNAMIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.rF=t.getParameter(t.MAX_TEXTURE_SIZE);const i=t.getParameter(t.ALIASED_POINT_SIZE_RANGE);this.hF=i[0],this.oF=i[1],this.oF>2048&&(this.oF=2048),this.uF=t.getSupportedExtensions();const e=t.getExtension("WEBGL_debug_renderer_info");if(e&&(this.aF=t.getParameter(e.UNMASKED_VENDOR_WEBGL),this.lF=t.getParameter(e.UNMASKED_RENDERER_WEBGL)),this.fF=t.getExtension("KHR_parallel_shader_compile"),this.BR>=2&&("Chromium"!==Pc.Ks.ni||Pc.Ks.ei>=135)&&(this.pF=t.getExtension("EXT_conservative_depth")),Pc.Ls&&(Hc=t.getExtension("WEBGL_lose_context")),this.vF&&(1===this.UT()?this.$R=t.getExtension("EXT_disjoint_timer_query"):this.$R=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.dF=t.getExtension("EXT_texture_filter_anisotropic"),this.dF?this.SF=t.getParameter(this.dF.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.SF=0,this.UT()<2&&this.GA&&this._A&&(this.mF=t.getExtension("WEBGL_depth_texture"),!this.mF))throw new Error("no depth texture support");this.UT()<2&&(this.gF=t.getExtension("EXT_frag_depth"),this.yF=t.getExtension("OES_standard_derivatives"),this.wF=t.getExtension("EXT_shader_texture_lod"));const n=Pc.Xw.KG,r=n._C(!1);let h=n.IC(),o=r,a=n.NC(),l=n.DC(),u=n.RC(),c=n._C(!0),f=!1;this.GA&&(this.UT()<2?this.gF&&(h=n.EC(),a=n.kC(),u=n.AC(),f=!0):(o=n.CC(),h=n.PC(this.TF()),a=n.BC(this.TF()),l=n.LC(),u=n.FC(this.TF()),c=n.CC(!0)));const d=n.OC(this.UT(),f,this.yF&&this.wF,this.TF()),p=this.UT()>=2?n.CC():r,m=[[h,o,"<default>"],[h,o,"<default-device-transform>"],[a,l,"<point>"],[n.$C(),r,"<fill>"],[n.WC(),r,"<lineargradient>"],[n.UC(),r,"<penumbra>"],[n.zC(),r,"<hardellipse>"],[n.jC(),r,"<hardellipseoutline>"],[n.qC(),r,"<smoothellipse>"],[n.HC(),r,"<smoothellipseoutline>"],[n.VC(),r,"<smoothline>"],[u,c,"<tilemap>"],[d,p,"<tilerandomization>"]],g=await Promise.all(m.map(t=>this.GF({src:t[0],t_:t[1],name:t[2]})));this.xS=g[0],this.zA=g[1],this.MS=g[2],this._S=g[3],this.CS=g[4],this.IS=g[5],this.ES=g[6],this.PS=g[7],this.RS=g[8],this.AS=g[9],this.FS=g[10],this.TS=g[11],this.GS=g[12],this.xv()}async GF(t){const s=await Pc.Xw.KG.e_(this,t);return this.wv(s),s}_F(){this.VA=null}rR(t,s,i){if(this.Uy===t&&this.Vy===s&&!i)return;this.Hb();const e=this.n_,n=this.lI;this.Uy=t,this.Vy=s,this.CF(0,0,t,s),this.dv(this.TA,t/s),this.IF(this.TA),this.zA&&(e.useProgram(this.zA.rC()),this.zA.K_(this.mS),this.VA=this.zA,this.lI.eC=this.zA),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.ZA=null,this.jI=null,this.GA&&this.PA&&this.EF(this.Uy,this.Vy),this.JA&&this.JA.EG(this.Uy,this.Vy),e.bindFramebuffer(e.FRAMEBUFFER,null),this.JA=null,n.FG=null,n.OG=null}EF(t,s){const i=this.n_;this.EA&&this.RA===t&&this.AA===s||(this._A?(this.EA&&i.deleteTexture(this.EA),this.EA=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.EA),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),this.UT()>=2?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.mF&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.mF.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.EA&&i.deleteRenderbuffer(this.EA),this.EA=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.EA),i.renderbufferStorage(i.RENDERBUFFER,this.BR>=2?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.RA=t,this.AA=s)}PF(t,s){this.GA&&(this.PA=!1,this.EF(t,s))}RF(){this.GA&&(this.PA=!0,this.EF(this.Uy,this.Vy))}CF(t,s,i,e){const n=this.xA;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(this.AF().GI(t,s,i,e),Oc.set(n,t,s,i,e),this.HA=0)}av(t){super.av(t),this.dv(this.TA,this.Uy/this.Vy)}nv(t){super.nv(t),this.dv(this.TA,this.Uy/this.Vy)}hv(t){super.hv(t),this.dv(this.TA,this.Uy/this.Vy)}IF(t){Dc.O(this.mS,t)||(this.AF().CI(t),Dc.S(this.mS,t),this.HA=0,this.MA=!0)}FF(){let t,s,i;const e=this.JA;null===e?(t=this.TA,s=this.My(),i=this.Gy()):(t=e.kG(),s=e.My(),i=e.Gy()),this.IF(t),this.CF(0,0,s,i)}OF(t){Dc.O(this.gS,t)||(this.AF().EI(t),Dc.S(this.gS,t),this.HA=0,this.MA=!0)}DF(){this.MA=!1}LF(){return this.MA}AG(){return this.lI}AF(){const t=this.jA;return this.qA===t.length&&t.push(new Pc.Xw.aI(this.lI)),t[this.qA++]}Hb(){0!==this.qA&&(this.DR()||(this.NF(),this.kF(),this.qA=0,this.$A=0,this.WA=0,this.UA=0,this.HA=0))}NF(){const t=this.n_;this.$A>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.o_),t.bufferSubData(t.ARRAY_BUFFER,0,this.DA.subarray(0,3*this.$A)),t.bindBuffer(t.ARRAY_BUFFER,this.a_),t.bufferSubData(t.ARRAY_BUFFER,0,this.NA.subarray(0,2*this.$A)),t.bindBuffer(t.ARRAY_BUFFER,this.l_),t.bufferSubData(t.ARRAY_BUFFER,0,this.kA.subarray(0,4*this.$A))),this.WA>0&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.FA),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,this.LA.subarray(0,this.WA))),this.UA>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.c_),t.bufferSubData(t.ARRAY_BUFFER,0,this.BA.subarray(0,this.UA)))}kF(){const t=this.jA;for(let s=0,i=this.qA;s<i;++s)t[s].IE()}BF(){return this.XA.Wo()}$F(t,s,i,e){const n=this.XA;n.Jo(t,s,i,e)||(n.Eo(t,s,i,e),this.DS=null,2===this.HA&&(this.HA=0))}WF(t){const s=this.XA;s.Wo()!==t&&(s.Lo(t),this.DS=null,2===this.HA&&(this.HA=0))}nM(t){const s=this.XA;s.equals(t)||(s.set(t),this.DS=null,2===this.HA&&(this.HA=0))}UF(){this.$F(1,1,1,1)}VF(){return this.XA}zF(t){t!==this.ZA&&(this.AF().SI(t),this.ZA=t,this.HA=0)}qT(){this.ZA=null}eM(t){const s=this.Yv(t);this.jF(s[0],s[1])}qF(t){const s=this.Kv(t);this.jF(s.Hv,s.Jv)}jF(t,s){t===this.KA&&s===this.QA||(this.AF().MI(t,s),this.KA=t,this.QA=s,this.HA=0,this.DS=null)}HF(){return this.KA===this.n_.ONE&&this.QA===this.n_.ONE_MINUS_SRC_ALPHA}JF(){this.jF(this.n_.ONE,this.n_.ONE_MINUS_SRC_ALPHA)}YF(){this.jF(this.n_.SRC_ALPHA,this.n_.ONE_MINUS_SRC_ALPHA)}Ub(t){this.eF!==t&&(this.AF().TE(t),this.eF=t,this.HA=0,this.DS=null)}XF(){return this.eF}Vb(t){this.nF!==t&&(this.AF()._E(t),this.nF=t,this.HA=0,this.DS=null)}ZF(){return this.nF}KF(){this.jF(this.n_.ONE,this.n_.ZERO)}Rect(t){this.QF(t.Qa(),t.tl(),t.sl(),t.il())}QF(t,s,i,e){this.jb(t,s,i,s,i,e,t,e)}tO(t,s){(this.$A+t>65535||this.WA+s>393210)&&this.Hb(),1===this.HA?this.jA[this.qA-1].cI+=s:(this.AF().yI(2*this.WA,s),this.HA=1)}sO(){const t=this.$A;let s=this.WA;this.WA+=6;const i=this.LA;i[s++]=t,i[s++]=t+1,i[s++]=t+2,i[s++]=t,i[s++]=t+2,i[s]=t+3}El(t){this.iO(t,Uc)}jb(t,s,i,e,n,r,h,o){this.tO(4,6),this.sO();const a=this.DA,l=this.$A;this.$A+=4;let u=3*l;const c=this.kS+this.BS;a[u++]=t,a[u++]=s,a[u++]=c,a[u++]=i,a[u++]=e,a[u++]=c,a[u++]=n,a[u++]=r,a[u++]=c,a[u++]=h,a[u++]=o,a[u]=c,Uc.Vo(this.NA,2*l),this.XA.zo(this.kA,4*l)}pb(t,s){this.tO(4,6),this.sO();const i=this.$A;this.$A+=4,t.Yl(this.DA,3*i,this.kS+this.BS),s.rl(this.NA,2*i),this.XA.zo(this.kA,4*i)}iO(t,s){this.tO(4,6),this.sO();const i=this.$A;this.$A+=4,t.Yl(this.DA,3*i,this.kS+this.BS),s.Vo(this.NA,2*i),this.XA.zo(this.kA,4*i)}eO(t,s,i){this.tO(4,6),this.sO();const e=this.$A;this.$A+=4,t.Yl(this.DA,3*e,this.kS+this.BS),s.Vo(this.NA,2*e),this.kA.set(i,4*e)}nO(t,s,i,e,n,r,h,o,a,l,u,c,f){this.tO(4,6),this.sO();const d=this.DA,p=this.$A;this.$A+=4;let m=3*p;const g=this.kS+this.BS;d[m++]=t,d[m++]=s,d[m++]=g+i,d[m++]=e,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.rl(this.NA,2*p),this.XA.zo(this.kA,4*p)}ab(t,s,i,e,n,r,h,o,a,l,u,c,f){this.tO(4,6),this.sO();const d=this.DA,p=this.$A;this.$A+=4;let m=3*p;const g=this.kS+this.BS;d[m++]=t,d[m++]=s,d[m++]=g+i,d[m++]=e,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.Vo(this.NA,2*p),this.XA.zo(this.kA,4*p)}rO(t,s,i,e,n,r,h,o,a,l,u,c,f,d){this.tO(4,6),this.sO();const p=this.DA,m=this.$A;this.$A+=4;let g=3*m;const y=this.kS+this.BS;p[g++]=t,p[g++]=s,p[g++]=y+i,p[g++]=e,p[g++]=n,p[g++]=y+r,p[g++]=h,p[g++]=o,p[g++]=y+a,p[g++]=l,p[g++]=u,p[g]=y+c,f.Vo(this.NA,2*m),this.kA.set(d,4*m)}cT(t,s,i,e){if(t.length%3!=0)throw new Error("vertex buffer length not multiple of 3");if(t.length>196605)throw new Error(`too many vertices (${t.length/3}, limit 65535)`);if(i.length%3!=0)throw new Error("index buffer length not multiple of 3");if(i.length>393210)throw new Error(`too many indices (${i.length}, limit 393210)`);this.tO(t.length,i.length);const n=this.$A;this.DA.set(t,3*n),this.NA.set(s,2*n);const r=this.LA;if(0===n)r.set(i,this.WA);else{let t=this.WA;for(let s=0,e=i.length;s<e;++s)r[t++]=i[s]+n}const h=this.kA;if(null!=e)h.set(e,4*n);else{const s=this.XA,i=s.ko(),e=s.Bo(),r=s.$o(),o=s.Wo();let a=4*n;for(let s=0,n=t.length;s<n;++s)h[a++]=i,h[a++]=e,h[a++]=r,h[a++]=o}this.$A+=t.length/3,this.WA+=i.length}hO(t,s){this.ib(0),Dc.S(Vc,this.mS),Dc.S(zc,this.gS),this.FF();const[i,e]=this.oO(this.JA),n=this.yv(0,0,this.QS(e),0,0,0,e);if(this.OF(n),"crop"===t&&this.JA&&s){const t=this.Uy/2,i=this.Vy/2,e=s.My(),n=s.Gy(),r=this.JA.My(),h=this.JA.Gy(),o=Math.min(r,e),a=Math.min(h,n),l=Math.max(n-h,0),u=Math.max(h-n,0);qc.set(-t,i-u,-t+o,i-a-u),jc.Xl(qc),qc.set(0,l,o,a+l),qc.St(e,n),this.pb(jc,qc)}else{const t=i/2,s=e/2;this.QF(-t,s,t,-s)}this.IF(Vc),this.OF(zc)}aO(t){this.tF.equals(t)||(this.tF.S(t),this.AF().NI(t),this.HA=0)}lO(){}uO(t,s,i,e){this.UA>=7996&&this.Hb();let n=this.UA;const r=this.kS+this.BS;2===this.HA&&this.YA===r?this.jA[this.qA-1].cI++:(this.AF().BI(n,r,this.XA),this.HA=2,this.YA=r);const h=this.BA;h[n++]=t,h[n++]=s,h[n++]=i,h[n++]=e,this.UA=n}Mv(t){this.VA!==t&&(this.AF().WI(t),this.VA=t,this.HA=0,this.DS=null)}cO(){return this.VA}fO(){this.Mv(this.zA)}dO(t){this.AF().bI(t),this.HA=0}pO(t,s,i=1){this.AF().nE(t,s,i),this.HA=0}mO(t,s,i,e,n,r,h){if(this.VA!==this.TS)throw new Error("must set tilemap fill mode first");this.AF().hE(t,s,i,e,n,r,h),this.HA=0}gO(t,s,i,e,n,r,h){if(this.VA!==this.GS)throw new Error("must set tile randomization mode first");this.AF().aE(t,s,i,e,n,r,h),this.HA=0}yO(t,s,i,e,n,r,h,o,a,l,u){const c=this.VA;if(u%=10800,!c.U_||c.dC(s,i,e,n,r,h,o,a,l,u))return;const f=this.AF();f.VI(),c.gC(s,i,e,n,r,h,o,a,l,u);const d=f.dI;d[0]=r,d[1]=h,s.Vo(d,2),d[6]=a,d[7]=l,i.Vo(d,12);const p=f.pI;n.Vo(p,0);const m=p[1];p[1]=p[3],p[3]=m,e.Vo(f.mI,0),f.uI=u,f.cI=o,c.T_.V_()?f.fI=t?t.NG():null:f.fI=null,this.HA=0}wO(t){const s=this.VA;if(0===t.length||s.lC(t))return;const i=this.AF();i.qI(),s.cC(t),Pc.Gh(i.gI,t),this.HA=0}SO(t,s,i,e){this.AF().DI(t,s,i,e),this.HA=0}Pu(t){this.AF().OI(t),this.HA=0}vO(){}qb(){super.qb(),this.n_.flush()}bO(){this.GA&&this.JA&&this.JA.UG()&&(this.AF().uE(this.CA),this.HA=0)}xO(t){t=!!t,this.CA!==t&&this.GA&&(this.CA=t,this.AF().fE(t),this.HA=0)}MO(){return this.CA}CG(){return this.EA}IG(){return this._A}TO(t){if(t=!!t,this._A&&this.IA!==t){if(t&&this.MO())throw new Error("depth still enabled");this.IA=t,this.AF().pE(t),this.HA=0}}GO(t,s,i,e,n=0){t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),this.sF.Ka(t,s,i,e)||(this.sF.ja(t,s,i,e),s=(n||this.oO(this._O())[1])-s-e,this.AF().xE(!0,t,s,i,e),this.HA=0)}CO(){-1!==this.sF.sl()&&(this.sF.set(0,0,-1,-1),this.AF().xE(!1,0,0,0,0),this.HA=0)}IO(){for(const t of this.bF)t.uA(this.qS)}DR(){return!this.n_||this.n_.isContextLost()||this.cF}rM(){super.KS(),Pc.Xw.ET.rM(),Pc.Xw.cG.rM(),Pc.Xw.lx.rM();for(const t of this.bF)t.Pu();this.uF=[],this.$R=null,this.fF=null,this.pF=null,this.dF=null,this.mF=null,this.gF=null,this.yF=null,this.wF=null,this.SF=0,this.aF="(unavailable)",this.lF="(unavailable)",this.VA=null,this.zA=null,this.EA=null;for(const t of this.OS.values())t.rM()}async hM(){this.cF=!0,await this.ZS(),this.cF=!1;for(const t of this.OS.values())t.hM(this);this.rR(this.Uy,this.Vy,!0)}EO(t,s){if(this.DR())throw new Error("context lost");this.Hb();const i=Pc.jn(Pc.Xw.ET,this);return i.BT(t,s),i}async PO(t,s){if(this.DR())throw new Error("context lost");if(s=Object.assign({},s),Pc.Ri.ImageBitmapOptions){let i=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});const e=s.vT&&"clamp-to-edge"!==s.vT||s.bT&&"clamp-to-edge"!==s.bT,n=Pc.vr(i.width)&&Pc.vr(i.height);return this.VT()||n||!e?s.CT=!1:Pc.Ri.Di?(i=await createImageBitmap(t,{premultiplyAlpha:"premultiply",resizeWidth:Pc.br(i.width),resizeHeight:Pc.br(i.height)}),s.CT=!1):i=await createImageBitmap(t,{premultiplyAlpha:"none"}),await Pc.pf(()=>this.EO(i,s))}if(t instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const s=await Pc.uo(t);t=s}return await Pc.pf(()=>this.EO(t,s))}_G(t,s,i){this.Hb();const e=Pc.jn(Pc.Xw.ET,this);return e.HT(t,s,i),e}LR(t,s,i){this.Hb(),s.KT(t,i)}PG(t){t&&(t.eG(),t.nG()>0||(this.Hb(),t===this.ZA&&(this.n_.bindTexture(this.n_.TEXTURE_2D,null),this.ZA=null),t===this.jI&&(this.n_.activeTexture(this.n_.TEXTURE1),this.n_.bindTexture(this.n_.TEXTURE_2D,null),this.n_.activeTexture(this.n_.TEXTURE0),this.jI=null),t.QT()))}RO(t){let s=this.Uy,i=this.Vy,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height&&(i=Math.floor(t.height),e=!1)),s<=0||i<=0)throw new Error("invalid size");this.Hb();const n=Pc.jn(Pc.Xw.cG,this);return n.TG(s,i,Object.assign({lG:e},t)),this.JA=null,this.lI.FG=null,this.lI.OG=null,n}AO(t,s=!0){t!==this.JA&&(t&&t.VG()&&t.EG(this.Uy,this.Vy),this.AF().AI(t),this.JA=t,this.HA=0,s&&this.FF())}_O(){return this.JA}oO(t){return t?[t.My(),t.Gy()]:[this.Uy,this.Vy]}FO(t,s="stretch"){this.BR<2||this.JA&&this.JA.zG()>0?(this.KF(),this.UF(),this.OO(t,s)):(this.AF().XI(t,this.JA,s),this.HA=0)}OO(t,s="stretch"){const i=t.NG();if(!i)throw new Error("not a texture-backed render target");this.zF(i),this.hO(s,i)}DO(t){this.BR<2||(this.AF().JI(t.DG()),this.HA=0)}LO(t){this.AO(null),this.Hb();const s=t.NG();s===this.ZA&&(this.n_.bindTexture(this.n_.TEXTURE_2D,null),this.ZA=null),s===this.jI&&(this.n_.activeTexture(this.n_.TEXTURE1),this.n_.bindTexture(this.n_.TEXTURE_2D,null),this.n_.activeTexture(this.n_.TEXTURE0),this.jI=null),t.QT()}async YG(t,s,i){this.Hb();const e=this.JA;let n,r,h;t?(n=t.My(),r=t.Gy(),h=t.DG()):(n=this.My(),r=this.Gy(),h=null);let o=0,a=0,l=n,u=r;if(i){o=Pc.Zn(Math.floor(i.Qa()),0,n-1),a=Pc.Zn(Math.floor(i.tl()),0,r-1);let t=i.width();t=0===t?n-o:Pc.Zn(Math.floor(t),0,n-o);let s=i.height();s=0===s?r-a:Pc.Zn(Math.floor(s),0,r-a),l=t,u=s,a=r-(a+u)}const c=this.n_;c.bindFramebuffer(c.FRAMEBUFFER,h);const f=()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.JA=null,this.lI.FG=null,this.lI.OG=null,this.AO(e)};let d;if(!s&&this.UT()>=2){c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const t=c.createBuffer(),s=l*u*4,i=c.PIXEL_PACK_BUFFER;c.bindBuffer(i,t),c.bufferData(i,s,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(i,null),f();const e=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);await this.i_(()=>c.getSyncParameter(e,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(e),d=new ImageData(l,u),c.bindBuffer(i,t),c.getBufferSubData(i,0,new Uint8Array(d.data.buffer),0,s),c.bindBuffer(i,null),c.deleteBuffer(t)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}NO(){this.xO(!0),this.AF().gE(),this.HA=0,this.iF=1}kO(t=!1){this.xO(t),this.AF().wE(),this.HA=0,this.iF=2}BO(){return 2===this.iF}$O(t=!0){this.xO(t),this.AF().vE(),this.HA=0,this.iF=0}WO(t){this.UO()&&(this.AF().KI(t),this.HA=0)}VO(t){this.UO()&&(this.AF().sE(t),this.HA=0)}i_(t){const s=new Promise(s=>Jc.add({resolve:s,dA:t}));return-1===Yc&&(Yc=self.requestAnimationFrame(Ec)),s}sx(){return this.Uy*this.Vy*(this.vA.alpha?4:3)}ix(){let t=0;for(const s of Pc.Xw.cG.XG())s.NG()||(t+=s.hG());return t}nx(){let t=0;for(const s of Pc.Xw.ET.oG())t+=s.hG();return t}zO(){return this.bA}UT(){return this.BR}u_(){return this.OA}jO(){return"webgl"+this.UT()}VT(){return this.UT()>=2}$T(){return this.rF}qO(){return this.hF}HO(){return this.oF}JO(){return this.aF}YO(){return this.lF}XO(){if(this.UT()>=2)return"webgl2";{const t=[];return this.gF&&t.push("EXT_frag_depth"),this.yF&&t.push("OES_standard_derivatives"),this.wF&&t.push("EXT_shader_texture_lod"),t.length>0?"webgl1:"+t.join(","):"webgl1:none"}}ZO(){return this.uF}UO(){return!!this.$R}WR(){return this.$R}s_(){return this.fF}TF(){return!!this.pF}XT(){return this.dF}ZT(){return this.SF}oA(t){this.bF.add(t)}aA(t){this.bF.delete(t)}tA(){return this.xF}WT(){return this.n_}MF(t){this.qv([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}KO(){return this.ox()}}}{const Xc=self.Cs,Zc=self.ls,Kc=Zc.ws,Qc=Zc.ds,tf=self.assert,sf=self.GPUBufferUsage,ef=self.GPUShaderStage,nf=self.GPUMapMode,rf=self.GPUTextureUsage,hf={powerPreference:"default",depth:!1,failIfMajorPerformanceCaveat:!1,QO:!1,tD:"bilinear",sD:!1,mA:!1,iD:!0},of=65535,af=393210,lf=Math.floor(65535/4),uf=65535,cf=4*lf-16,ff=1,df=2,pf=4,mf=8,gf=16,yf=32,wf=64,Sf=128,vf=256,bf=512,xf=1024,Mf=2048,Tf=4096,Gf=8192,_f=16384,Cf=32768,If=65536,Ef=1<<17,Pf=1<<18,Rf=1<<19,Af=1<<20,Ff=1<<21,Of=1<<22,Df=1<<23,Lf=1<<24,Nf=1<<25,kf=1<<26,Bf=1<<27,$f=1<<28,Wf=1<<29,Uf=1<<30,Vf=1,zf=8688,jf=8697,qf=25072,Hf=7680,Jf=2,Yf=4,Xf=2,Zf=4,Kf=new Xc.El(0,0,1,0,1,1,0,1),Qf=Xc.jn(Xc.Ea),td=Xc.jn(Xc.Rect),sd=Xc.jn(Xc.Rect),id=Xc.jn(Xc.El);Xc.Xw.eD=class extends Xc.Xw.fS{constructor(t){super(t),this.nD=null,this.rD=null,this.hD=null,this.oD=null,this.aD=null,this.lD=null,this.uD="",this.cD=null,this.fD=null,this.dD=0,this.pD=0,this.mD=Qc.create(),this.EA=null,this.gD=null,this.yD=null,this.wD=null,this.SD=null,this.vD=null,this.RA=0,this.AA=0,this.bD=null,this.xD=null,this.MD=null,this.TD=null,this.o_=null,this.a_=null,this.GD=null,this.l_=null,this.FA=null,this._D=null,this.c_=null,this.CD=Xc.Xw.ED.ID(),this.PD=Xc.Xw.ED.RD(),this.AD=null,this.FD=null,this.OD=Xc.Xw.ED.DD(),this.LD=Xc.Xw.ED.ND(),this.kD=null,this.BD=null,this.$D=Xc.Xw.ED.WD(),this.UD=Xc.Xw.ED.VD(),this.zD=null,this.jD=null,this.qD=null,this.DA=new Float32Array(196605),this.NA=new Float32Array(131070),this.HD=new Uint32Array(65535),this.kA=null,this.LA=new Uint16Array(393210),this.BA=new Float32Array(4*lf),this.$A=0,this.WA=0,this.JD=0,this.YD=Xc.jn(Xc.To,1,1,1,1),this.UA=0,this.XD=Xc.jn(Xc.Xw.ZD,this),this.KD=32768,this.QD=0,this.tL=0,this.sL=0,this.iL=0,this.eL=0,this.nL=0,this.rL=0,this.hL=0,this.oL=0,this.aL=Xc.jn(Xc.Rect,0,0,0,0),this.lL=Xc.jn(Xc.To,1,1,1,1),this.uL=Xc.jn(Xc.To,1,1,1,1),this.cL=Xc.jn(Xc.Rect,0,0,0,0),this.fL=0,this.dL="",this.pL=null,this.mL=null,this.gL=null,this.yL=null,this.wL=null,this.SL=null,this.vL=null,this.bL=null,this.xL=null,this.ML=null,this.TL=null,this.GL=null,this._L=null,this.CL=new Set,this.IL=new Set,this.rF=8192,this.EL=null,this.PL=null,this.RL=null,this.AL=null,this.FL=0,this.OL=0,this.DL=0,this.LL=0,this.NL=null,this.kL=null,this.BL=new Map,this.$L=null,this.WL=null,this.UL=[],this.VL=null,this.JA=null,this.zL=!1,this.jL="bilinear",this.qL=!1,this._A=!1,this.HL=null,this.JL=!1,this.YL=-1,this.XL=-1,this.ZL=new Set,this.KL=null,this.QL=null,this.MF()}pv(){return!0}tN(t,s){s?this.KD|=t:this.KD&=~t}sN(t){return 0!==(this.KD&t)}iN(t,s){s?this.QD|=t:this.QD&=~t}eN(t){return 0!==(this.QD&t)}async e_(t,s){if(s=Object.assign({},hf,s),!navigator.gpu)throw new Error("renderer-unavailable (WebGPU not supported)");s.depth&&(this.KD|=524288),s.iD&&(this.KD|=65536),this.zL=!!s.QO,this.jL=s.tD,this.qL=!!s.sD,this.nD={},this._A=!(!s.depth||!s.mA),"default"!==s.powerPreference&&(this.nD.powerPreference=s.powerPreference),this.aD=t,await this.nN(s.failIfMajorPerformanceCaveat)}async nN(t){for(this.oD=null,await this.rN(t);!this.oD;)this.rD=null,await this.rN(t);await this.ZS()}async rN(t){if(!this.rD){if(this.rD=await navigator.gpu.requestAdapter(this.nD),!this.rD)throw new Error("renderer-unavailable (no WebGPU adapter available)");if(t&&(this.rD.isFallbackAdapter||this.rD.info.isFallbackAdapter))throw new Error("renderer-unavailable (WebGPU provided fallback adapter)");if("adreno-7xx"===this.rD.info.architecture)throw new Error("WebGPU disabled on adreno-7xx devices - see https://issues.chromium.org/issues/329702056")}const s=[];if(this.rD.features.has("timestamp-query")&&s.push("timestamp-query"),this.rD.features.has("shader-f16")&&s.push("shader-f16"),this.oD=await this.rD.requestDevice({requiredFeatures:s,requiredLimits:{maxTextureDimension2D:this.rD.limits.maxTextureDimension2D}}),!this.oD)return null;this.rF=this.oD.limits.maxTextureDimension2D,this.tN(134217728,this.oD.features.has("timestamp-query")),this.tN(268435456,this.oD.features.has("shader-f16")),this.tN(536870912,this.sN(268435456)&&void 0!==globalThis.Float16Array),this.oD.lost.then(t=>this.hN(t)),this.tN(32768,!1)}async hN(t){console.log("[WebGPU] Device lost: ",t),super.KS(),this.XD.rM(),Xc.Xw.oN.rM(),Xc.Xw.aN.rM(),Xc.Xw.lx.rM(),this.uD="",this.cD=null,this.fD=null,this.EA=null,this.yD=null,this.gD=null,this.wD=null,this.SD=null,this.vD=null,this.o_=null,this.a_=null,this.GD=null,this.l_=null,this.FA=null,this._D=null,this.c_=null,this.bD=null,this.xD=null,this.MD=null,this.TD=null,this.mL=null,this.pL=null,this.GL=null,this.gL=null,this.yL=null,this.wL=null,this.EL=null,this.AL=null,this.SL=null,this.vL=null,this.bL=null,this.xL=null,this.ML=null,this.TL=null,this.PL=null,this.RL=null,this.VL=null,this.JA=null,this._L=null,this.HL=null,this.NL=null,this.kL=null,this.CL.clear(),this.IL.clear(),this.BL.clear();for(const t of this.OS.values())t.rM();this.oD=null,this.rD=null,this.hD=null,this.KD|=32768,this.KL&&this.KL(),await this.nN();for(const t of this.OS.values())t.hM(this);this.rR(this.Uy,this.Vy,!0),this.QL&&this.QL()}async ZS(){super.ZS();const t=this.oD;this.uD=navigator.gpu.getPreferredCanvasFormat(),this.cD=null,this.fD=null;let s=rf.RENDER_ATTACHMENT;this.zL&&(s|=rf.TEXTURE_BINDING),this.qL&&(s|=rf.COPY_SRC),this.uD.startsWith("rgba8")||this.uD.startsWith("bgra8")?this.dL=this.uD:this.dL="rgba8unorm",this.KD&=940113920,this.KD|=7680,this.QD=0,this.sN(524288)&&(this.KD|=70254592),this.$A=0,this.WA=0,this.FL=0,this.DL=0,this.LL=0,this.OL=0,this.YD.Eo(1,1,1,1),this.lL.Eo(1,1,1,1),this.uL.Eo(1,1,1,1),this.kA=this.u_()?new globalThis.Float16Array(262140):new Float32Array(262140),this.AD=new ArrayBuffer(this.PD),this.FD=new Float32Array(this.AD),this.kD=new ArrayBuffer(this.LD),this.BD=new Float32Array(this.kD),this.zD=new ArrayBuffer(this.UD),this.jD=new Float32Array(this.zD),this.qD=new Uint32Array(this.zD),this.o_=t.createBuffer({label:"vertexbuffer",size:this.DA.byteLength,usage:sf.VERTEX|sf.COPY_DST}),this.a_=t.createBuffer({label:"texcoordbuffer",size:this.NA.byteLength,usage:sf.VERTEX|sf.COPY_DST}),this.GD=t.createBuffer({label:"texindexbuffer",size:this.HD.byteLength,usage:sf.VERTEX|sf.COPY_DST}),this.l_=t.createBuffer({label:"colorbuffer",size:this.kA.byteLength,usage:sf.VERTEX|sf.COPY_DST}),this.FA=t.createBuffer({label:"indexbuffer",size:this.LA.byteLength,usage:sf.INDEX|sf.COPY_DST}),this._D=t.createBuffer({label:"pointsindexbuffer",size:6*lf*2,usage:sf.INDEX,mappedAtCreation:!0});const i=this._D.getMappedRange();this.lN(i),this._D.unmap(),this.c_=t.createBuffer({label:"pointbuffer",size:this.BA.byteLength,usage:sf.VERTEX|sf.STORAGE|sf.COPY_DST}),this.pL=t.createBindGroupLayout({label:"bufferbindgrouplayout",entries:[{binding:0,visibility:ef.VERTEX,buffer:{type:"uniform",minBindingSize:this.PD}},{binding:1,visibility:ef.FRAGMENT,buffer:{type:"uniform",minBindingSize:this.LD}},{binding:3,visibility:ef.VERTEX,buffer:{type:"read-only-storage",minBindingSize:this.BA.byteLength}},{binding:4,visibility:ef.FRAGMENT,buffer:{type:"uniform",minBindingSize:this.UD}},{binding:5,visibility:ef.FRAGMENT,buffer:{type:"uniform"}}]});const e=[],n=Xc.Xw.cN.uN();for(let t=0;t<n;++t)e.push({binding:2*t,visibility:ef.FRAGMENT,sampler:{type:"filtering"}},{binding:2*t+1,visibility:ef.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}});this.gL=t.createBindGroupLayout({label:"texturebindgrouplayout",entries:e}),this.yL=t.createBindGroupLayout({label:"backtexturebindgrouplayout",entries:[{binding:0,visibility:ef.FRAGMENT,sampler:{type:"nearest"===this.jL?"non-filtering":"filtering"}},{binding:1,visibility:ef.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}}]}),this.wL=t.createBindGroupLayout({label:"depthtexturebindgrouplayout",entries:[{binding:0,visibility:ef.FRAGMENT,sampler:{type:"non-filtering"}},{binding:1,visibility:ef.FRAGMENT,texture:{sampleType:"depth",viewDimension:"2d"}}]}),this.EL=t.createPipelineLayout({bindGroupLayouts:[this.pL,this.gL,this.yL,this.wL]});const r=Xc.Xw.ED,h=this.fN(),o=this.u_();this.PL=t.createShaderModule({label:"<default vertex module>",code:r.dN(r._C(o),h)}),this.PL.getCompilationInfo().then(t=>r.pN("<default>","vertex",t)),this.RL=t.createShaderModule({label:"<normalized vertex module>",code:r.dN(r.mN(o),h)}),this.RL.getCompilationInfo().then(t=>r.pN("<normalized>","vertex",t));const a=await Promise.all([r.e_(this,{name:"<default>",src:r.gN(!1,o),yN:r.gN(!0,o),t_:r.wN(o),SN:r.vN(o)}),r.e_(this,{name:"<single-texture-fill>",src:r.bN(!1,o),yN:r.bN(!0,o),t_:r.wN(o),SN:r.vN(o)}),r.e_(this,{name:"<generate-mipmap>",src:r.xN(),t_:r.MN()}),r.e_(this,{name:"<point>",src:r.TN(!1),yN:r.TN(!0),t_:r.GN()}),r.e_(this,{name:"<tilemap>",src:r._N(!1),yN:r._N(!0)}),r.e_(this,{name:"<fill>",src:r.CN()}),r.e_(this,{name:"<lineargradient>",src:r.IN()}),r.e_(this,{name:"<penumbra>",src:r.EN()}),r.e_(this,{name:"<hardellipse>",src:r.PN()}),r.e_(this,{name:"<hardellipseoutline>",src:r.RN()}),r.e_(this,{name:"<smoothellipse>",src:r.AN()}),r.e_(this,{name:"<smoothellipseoutline>",src:r.FN()}),r.e_(this,{name:"<tilerandomization>",src:r.OC(!1),yN:r.OC(!0)}),r.e_(this,{name:"<smoothline>",src:r.ON()})]);this.xS=a[0],this.kL=a[1],this.NL=a[2],this.MS=a[3],this.TS=a[4],this._S=a[5],this.CS=a[6],this.IS=a[7],this.ES=a[8],this.PS=a[9],this.RS=a[10],this.AS=a[11],this.GS=a[12],this.FS=a[13];for(const t of a)this.wv(t);65536&this.KD?(this.KD|=393216,this.AL=this.xS):this.AL=this.kL,this._L=this.NL.DN(),this.bD=t.createBuffer({label:"vertexuniformbuffer",size:this.PD,usage:sf.UNIFORM|sf.COPY_DST}),this.xD=t.createBuffer({label:"fragmentuniformbuffer",size:this.LD,usage:sf.UNIFORM|sf.COPY_DST}),this.MD=t.createBuffer({label:"fragmentc3paramsuniformbuffer",size:this.UD,usage:sf.UNIFORM|sf.COPY_DST}),this.TD=t.createBuffer({label:"fragmentdefaultcustomparamsbuffer",size:16,usage:sf.UNIFORM|sf.COPY_DST}),this.iL=0,this.eL=this.PD,this.LN(),this.NN(),this.kN(),this.nL=0,this.rL=this.LD,this.BN(),this.$N(),this.mL=this.WN(this.TD),this.GL=this.mL;const l=Xc.co(32,32);l.getContext("2d"),this.SL=await this.PO(l),this.vL=null,this.bL=this.SL.UN(),this.JD=0,this.xL=null,this.ML=this.SL.VN(),this.SL.zN(),this.gD=this.oD.createTexture({label:"nulldepthbuffer",size:[8,8,1],format:this.jN(),usage:rf.TEXTURE_BINDING}),this.wD=this.gD.createView({label:"nulldepthbufferview",aspect:"depth-only"}),this.vD=this.oD.createBindGroup({label:"nulldepthbufferbindgroup",layout:this.wL,entries:[{binding:0,resource:this.qN({xT:"nearest"})},{binding:1,resource:this.wD}]}),this.TL=this.vD,this.VL=Xc.jn(Xc.Xw.aN,this,!0),this.VL.NG().HN(s,this.uD),this.JA=this.VL,this.JN(),this.hD=this.rD.info,this.lD||(this.lD=this.aD.getContext("webgpu")),this.lD.configure({device:t,format:this.uD,usage:s,alphaMode:"premultiplied"})}WN(t){return this.oD.createBindGroup({layout:this.pL,entries:[{binding:0,resource:{buffer:this.bD}},{binding:1,resource:{buffer:this.xD}},{binding:3,resource:{buffer:this.c_}},{binding:4,resource:{buffer:this.MD}},{binding:5,resource:{buffer:t}}]})}lN(t){const s=new Uint16Array(t);let i=0,e=s.length,n=0;for(;i<e;)s[i++]=n,s[i++]=n+1,s[i++]=n+2,s[i++]=n,s[i++]=n+2,s[i++]=n+3,n+=4}YN(){return this.oD}XN(){return this.PL}ZN(){return this.RL}async GF(t){const s=await Xc.Xw.ED.e_(this,t);return this.wv(s),s}jO(){return"webgpu"}KN(){return this.uD}jN(){return"depth24plus-stencil8"}QN(){return this.cD}tk(){return this.fD}sk(){return this.zL}ik(){return this.qL}ek(){return this.EL}nk(){return this.gL}rk(){return this.yL}hk(){return this.jL}ak(){return this.dL}$T(){return this.rF}DR(){return this.sN(32768)}UO(){return this.sN(134217728)}fN(){return this.sN(268435456)}u_(){return this.sN(536870912)}sx(){const t=this.My()*this.Gy();let s=t*Xc.Xw.oN.lk(this.uD);return this.uk()&&(s+=t*Xc.Xw.oN.lk(this.jN())),s}ix(){let t=0;for(const s of Xc.Xw.aN.XG())s.ck()||(t+=s.NG().hG());return t}nx(){let t=0;for(const s of Xc.Xw.oN.oG())s.fk()||(t+=s.hG());return t}VT(){return!0}dk(){return this.XD}rR(t,s,i){(this.Uy!==t||this.Vy!==s||i)&&(this.Hb(),this.Uy=t,this.Vy=s,this.dD=t,this.pD=s,this.VL.GG(),this.IF(this.VL.kG()),this.JA&&this.JA.EG(this.Uy,this.Vy),this.sN(524288)&&this.sN(67108864)&&this.EF(t,s))}EF(t,s){if(this.EA){if(this.RA===t&&this.AA===s)return;this.EA.destroy()}let i=rf.RENDER_ATTACHMENT;this._A&&(i|=rf.TEXTURE_BINDING),this.EA=this.oD.createTexture({label:"depthbuffer",size:[t,s,1],format:this.jN(),usage:i}),this.yD=this.EA.createView({label:"depthbufferview"}),this._A&&(this.SD=this.oD.createBindGroup({label:"depthbufferbindgroup",layout:this.wL,entries:[{binding:0,resource:this.qN({xT:"nearest"})},{binding:1,resource:this.EA.createView({label:"depthbufferview",aspect:"depth-only"})}]})),this.RA=t,this.AA=s}PF(t,s){this.uk()&&(this.tN(67108864,!1),this.EF(t,s))}RF(){this.uk()&&(this.tN(67108864,!0),this.EF(this.Uy,this.Vy))}IF(t){Qc.O(this.mS,t)||(Qc.S(this.mS,t),this.LN())}FF(){this.IF(this.JA.kG())}OF(t){Qc.O(this.gS,t)||(Qc.S(this.gS,t),this.LN())}DF(){this.iN(1,!1)}LF(){return this.eN(1)}EO(t,s){if(t&&!Xc.Xw.oN.pk(t)){const s=t.width||t.videoWidth,i=t.height||t.videoHeight,e=Xc.co(s,i);e.getContext("2d").drawImage(t,0,0,s,i),t=e}this.Hb();const i=Xc.jn(Xc.Xw.oN,this);return i.TG(t,s),i}async PO(t,s){if(Xc.Xw.oN.pk(t))return this.EO(t,s);{if(!Xc.Ri.ImageBitmapOptions)throw new Error("no support for ImageBitmapOptions");const i=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});return this.EO(i,s)}}qN(t){const s=t.vT||"clamp-to-edge",i=t.bT||"clamp-to-edge",e=t.xT;let n=t.MT||0;"trilinear"!==e&&(n=0);const r=`${s},${i},${e},${n}`;let h=this.BL.get(r);if(h)return h;const o={addressModeU:s,addressModeV:i,magFilter:"nearest",minFilter:"nearest",mipmapFilter:"nearest"};return"bilinear"!==e&&"trilinear"!==e||(o.magFilter="linear",o.minFilter="linear"),"trilinear"===e&&(o.mipmapFilter="linear",n>1&&(o.maxAnisotropy=n)),h=this.oD.createSampler(o),this.BL.set(r,h),h}DN(){return this._L}_G(t,s,i){this.Hb();const e=Xc.jn(Xc.Xw.oN,this);return e.HT(t,s,i),e}LR(t,s,i){return s.KT(t,i)}PG(t){t&&(t.eG(),t.nG()>0||(this.DR()||(this.Hb(),this.vL===t&&this.zF(null),this.xL===t&&this.mk(null)),t.QT()))}gk(t,s){this.DR()||(s?this.CL.add(t):this.CL.delete(t))}yk(t,s){s?this.IL.add(t):this.IL.delete(t)}wk(t){const s=[t],i=Xc.Xw.cN.uN();for(const t of this.IL)t.qn();for(const e of this.CL){if(s.length>=i)break;e!==t&&s.push(e)}s.length<2||Xc.jn(Xc.Xw.cN,this,s)}vO(){this.Sk()}vk(){this.Sk()}Sk(){this.cD=this.lD.getCurrentTexture(),this.fD=this.cD.createView({label:"swapchaintextureview"}),this.VL.NG().bk()}qb(){null===this.WL&&this.VL.xk()&&this.Mk(),super.qb(),this.XD.Tk(this.qS),this.VL.NG().Gk(),this.cD=null,this.fD=null}JN(){this.$L=this.oD.createCommandEncoder(),this.KD&=-16385}_k(t){if(!this.UO())throw new Error("GPU profiling not supported");if(this.HL)throw new Error("already started frame timing");return this.JL=!1,this.ZL.clear(),this.HL=Xc.jn(Xc.Xw.Ck,this,t),this.HL}Ik(t,s){if(this.UO()){if(!this.HL)throw new Error("not started frame timing");if(t<0||s<0||t===s)throw new Error("invalid timestamp index");this.Ek(),this.JL=!0,this.YL=t,this.XL=s}}Pk(){this.JL&&(this.Ek(),this.JL=!1)}tO(t,s){if(this.$A+t>65535||this.WA+s>393210)this.Hb();else if(1&this.KD)return void(this.sL+=s);null===this.WL&&this.Mk(),this.KD|=1,this.tL=this.WA,this.sL=s}sO(){const t=this.$A;let s=this.WA;this.WA+=6;const i=this.LA;i[s++]=t,i[s++]=t+1,i[s++]=t+2,i[s++]=t,i[s++]=t+2,i[s]=t+3}Rk(){const t=this.KD;if(!(1&t))return;const s=this.WL;if(16&t){const i=this.JA;s.setViewport(0,0,i.My(),i.Gy(),0,1),2&t?s.setIndexBuffer(this._D,"uint16"):s.setIndexBuffer(this.FA,"uint16"),s.setVertexBuffer(0,this.o_),s.setVertexBuffer(1,this.a_),s.setVertexBuffer(2,this.l_),s.setVertexBuffer(3,this.GD),25165824&t&&s.setStencilReference(1),4&t&&this.Ak(s,this.aL,i)}if(32&t){let i=0;1073741824&t?i=4:8388608&t?i=2:16777216&t?i=3:3145728&~t||(i=1),s.setPipeline(this.AL.Fk(this.FL,i,this.DL,this.LL,this.OL))}if(8192&t&&s.setBindGroup(0,this.GL),64&t&&s.setBindGroup(1,this.bL),128&t&&s.setBindGroup(2,this.ML),256&t&&s.setBindGroup(3,this.TL),8&t){const i=this.JA;4&t?this.Ak(s,this.aL,i):s.setScissorRect(0,0,i.My(),i.Gy())}s.drawIndexed(this.sL,1,this.tL,0,0),this.KD&=-8698}Ak(t,s,i){const e=i.My(),n=i.Gy();let r=Xc.Zn(s.Qa(),0,e),h=Xc.Zn(s.tl(),0,n),o=Xc.Zn(s.sl(),r,e),a=Xc.Zn(s.il(),h,n);Number.isNaN(r)&&(r=0),Number.isNaN(h)&&(h=0),Number.isNaN(o)&&(o=e),Number.isNaN(a)&&(a=n),t.setScissorRect(r,h,o-r,a-h)}Mk(){const t=this.KD;7680&t&&this.Ok();let s=null;s=8388608&t?this.Dk():16777216&t?this.Lk():this.Nk(),this.WL=this.$L.beginRenderPass(s),this.KD|=25072}Nk(){const t=this.KD,s=this.JA,i={colorAttachments:[{view:s.kk(),loadOp:s.xk()?"clear":"load",clearValue:s.Bk().toJSON(),storeOp:"store"}]};return this.$k(i),s.Wk(!1),3145728&~t||(i.depthStencilAttachment={view:this.yD,depthLoadOp:4194304&t?"clear":"load",depthClearValue:1,depthStoreOp:"store",stencilLoadOp:"clear",stencilClearValue:0,stencilStoreOp:"discard"},this.KD&=-4194305),i}Dk(){const t=this.KD,s={colorAttachments:[],depthStencilAttachment:{view:this.yD,depthLoadOp:4194304&t?"clear":"load",depthClearValue:1,depthStoreOp:"store",stencilLoadOp:33554432&t?"clear":"load",stencilClearValue:0,stencilStoreOp:"store"}};return this.$k(s),this.KD&=-37748737,s}Lk(){const t=this.JA,s={colorAttachments:[{view:t.kk(),loadOp:t.xk()?"clear":"load",clearValue:t.Bk().toJSON(),storeOp:"store"}],depthStencilAttachment:{view:this.yD,depthReadOnly:!0,stencilReadOnly:!0}};return this.$k(s),t.Wk(!1),s}$k(t){if(!this.JL)return;const s={querySet:this.HL.Uk(),endOfPassWriteIndex:this.XL};this.ZL.has(this.YL)||(s.beginningOfPassWriteIndex=this.YL,this.ZL.add(this.YL)),t.timestampWrites=s}Vk(t){t.xk()&&(this.Ek(),this.$L.beginRenderPass({colorAttachments:[{view:t.kk(),loadOp:"clear",clearValue:t.Bk().toJSON(),storeOp:"store"}]}).end(),this.KD|=16384,t.Wk(!1))}Ek(){null!==this.WL&&(this.Rk(),this.WL.end(),this.WL=null)}Hb(t=!1){this.Ek(),this.HL&&t&&(this.HL.zk(this.$L),this.KD|=16384),16384&this.KD&&(this.UL.push(this.$L.finish()),this.JN()),0!==this.UL.length&&(this.NF(),this.oD.queue.submit(this.UL),Xc.bh(this.UL),this.XD.jk(),this.HL&&t&&(this.HL.qk(),this.HL=null))}NF(){const t=this.oD.queue;if(this.$A>0){const s=this.$A;t.writeBuffer(this.o_,0,this.DA.buffer,0,3*s*4),t.writeBuffer(this.a_,0,this.NA.buffer,0,2*s*4),65536&this.KD&&t.writeBuffer(this.GD,0,this.HD.buffer,0,4*s);const i=this.u_()?2:4;t.writeBuffer(this.l_,0,this.kA.buffer,0,4*s*i),this.$A=0}this.WA>0&&(this.WA%2!=0&&(this.LA[this.WA++]=0),t.writeBuffer(this.FA,0,this.LA.buffer,0,2*this.WA),this.WA=0),this.UA>0&&(t.writeBuffer(this.c_,0,this.BA.buffer,0,4*this.UA),this.UA=0)}LN(){this.KD|=512,this.QD|=1,this.Hk(this.CD.transform)}NN(){const t=this.CD.Jk;this.cL.Vo(this.FD,t.offset/4),this.Hk(t)}kN(){const t=this.CD.Yk;this.FD[t.offset/4]=this.fL,this.Hk(t)}Hk(t){const s=t.offset,i=t.end;1024&this.KD?(this.iL=Math.min(this.iL,s),this.eL=Math.max(this.eL,i)):(this.KD|=1024,this.iL=s,this.eL=i,this.Ek())}BN(){this.Xk(this.lL,this.OD.Zk)}$N(){this.Xk(this.uL,this.OD.Kk)}Xk(t,s){t.Vo(this.BD,s.offset/4),this.Qk(s)}tB(t,s){t.Vo(this.BD,s.offset/4),this.Qk(s)}Qk(t){const s=t.offset,i=t.end;2048&this.KD?(this.nL=Math.min(this.nL,s),this.rL=Math.max(this.rL,i)):(this.KD|=2048,this.nL=s,this.rL=i,this.Ek())}sB(t,s){this.jD[s.offset/4]!==Math.fround(t)&&(this.jD[s.offset/4]=t,this.iB(s))}eB(t,s){this.qD[s.offset/4]!==t&&(this.qD[s.offset/4]=t,this.iB(s))}nB(t,s){t.Yo(this.jD,s.offset/4)||(t.Vo(this.jD,s.offset/4),this.iB(s))}iB(t){const s=t.offset,i=t.end;4096&this.KD?(this.hL=Math.min(this.hL,s),this.oL=Math.max(this.oL,i)):(this.KD|=4096,this.hL=s,this.oL=i,this.Ek())}Ok(){const t=this.KD;512&t&&(Qc.multiply(this.mD,this.mS,this.gS),this.FD.set(this.mD,this.CD.transform.offset/4)),1024&t&&this.XD.rB(this.$L,this.bD,this.AD,this.iL,this.eL-this.iL),2048&t&&this.XD.rB(this.$L,this.xD,this.kD,this.nL,this.rL-this.nL),4096&t&&this.XD.rB(this.$L,this.MD,this.zD,this.hL,this.oL-this.hL),this.KD=-7681&t|16384}RO(t){let s=this.Uy,i=this.Vy,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height&&(i=Math.floor(t.height),e=!1)),s<=0||i<=0)throw new Error("invalid size");this.Hb();const n=Xc.jn(Xc.Xw.aN,this);return n.TG(s,i,Object.assign({lG:e},t)),n}AO(t,s=!0){null===t&&(t=this.VL),this.JA!==t&&(this.Ek(),this.JA=t,this.tN(2097152,t.UG()),t.VG()&&!t.ck()&&t.EG(this.Uy,this.Vy),s&&this.FF())}DO(t){}_O(){return this.JA===this.VL?null:this.JA}oO(t){return null===t?[this.Uy,this.Vy]:[t.My(),t.Gy()]}hB(){return this.VL}LO(t){this.Hb(),this.JA===t&&this.AO(null);const s=t.NG();this.vL===s&&this.zF(null),this.xL===s&&this.mk(null),t.QT()}async YG(t,s,i){this.Vk(t),this.Hb(),null===t&&(t=this.VL);const e=this.oD,n=t.My(),r=t.Gy();let h=0,o=0,a=n,l=r;if(i){h=Xc.Zn(Math.floor(i.Qa()),0,n-1),o=Xc.Zn(Math.floor(i.tl()),0,r-1);let t=i.width();t=0===t?n-h:Xc.Zn(Math.floor(t),0,n-h);let s=i.height();s=0===s?r-o:Xc.Zn(Math.floor(s),0,r-o),a=t,l=s}const u=e.createCommandEncoder(),c=t.NG();let f=c.sG(),d=null;"rgba8unorm"===c.oB()?c.aB()||Xc.Sn():(d=this.lB(c,"rgba8unorm",u),f=d);const p=4*a,m=256*Math.ceil(p/256),g=e.createBuffer({size:m*l,usage:sf.MAP_READ|sf.COPY_DST});u.copyTextureToBuffer({texture:f,origin:[h,o,0]},{buffer:g,bytesPerRow:m},[a,l,1]);const y=u.finish();e.queue.submit([y]),d&&d.destroy(),await g.mapAsync(self.GPUMapMode.READ);const w=g.getMappedRange().slice(0);let S;if(m===p)S=new ImageData(new Uint8ClampedArray(w),a,l);else{const t=new ArrayBuffer(p*l),s=new Uint8Array(t);for(let t=0;t<l;++t){const i=t*m,e=t*p;s.set(new Uint8Array(w,i,p),e)}S=new ImageData(new Uint8ClampedArray(t),a,l)}return g.destroy(),S}lB(t,s,i){const e=this.oD,n=t.My(),r=t.Gy();if(t.oB()===s)throw new Error("no conversion necessary");t.WG()||Xc.Sn();const h=e.createTexture({size:[n,r,1],format:s,usage:rf.COPY_SRC|rf.RENDER_ATTACHMENT}),o=this.NL.DN(s),a=o.getBindGroupLayout(0),l=this.qN({xT:"nearest"}),u=t.sG().createView({baseMipLevel:0,mipLevelCount:1}),c=h.createView({baseMipLevel:0,mipLevelCount:1}),f=i.beginRenderPass({colorAttachments:[{view:c,loadOp:"clear",clearValue:[0,0,0,0],storeOp:"store"}]}),d=e.createBindGroup({layout:a,entries:[{binding:0,resource:l},{binding:1,resource:u}]});return f.setPipeline(o),f.setBindGroup(0,d),f.draw(4),f.end(),h}xO(t){524288&this.KD&&(t=!!t,!!(1048576&this.KD)!==t&&(2097152&this.KD&&this.Ek(),this.tN(1048576,t)))}MO(){return this.sN(1048576)}uk(){return this.sN(524288)}TO(t){if(!this._A)return;if(t&&this.MO())throw new Error("depth still enabled");const s=t?this.SD:this.vD;this.TL!==s&&(this.Rk(),this.TL=s,this.KD|=256)}Pu(t){this.Ek(),this.JA.Wk(!0),this.JA.Bk().set(t)}SO(t,s,i,e){this.Ek(),this.JA.Wk(!0),this.JA.Bk().Eo(t,s,i,e)}bO(){2621440&~this.KD||(this.Ek(),this.KD|=4194304)}GO(t,s,i,e){t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),4&this.KD&&this.aL.Ka(t,s,i,e)||(this.Rk(),this.KD|=12,this.aL.ja(t,s,i,e))}CO(){4&this.KD&&(this.Rk(),this.KD&=-5,this.KD|=8)}bv(){return 65536&this.KD?this.xS:this.kL}xv(){this.Mv(this.bv())}Mv(t){if(this.AL!==t){if(t===this.xS&&!(65536&this.KD))throw new Error("cannot set multitexture fill program when multitexturing not allowed");this.Rk(),this.AL=t,this.DS=null,this.KD|=32,this.uB(t===this.xS)}}cO(){return this.AL}uB(t){if(t=!!t,!!(131072&this.KD)===t)return;this.tN(131072,t);const s=null===this.vL?this.SL:this.vL;this.cB(s)}fB(t){t=!!t,!!(262144&this.KD)!==t&&(this.Rk(),this.tN(262144,t),this.tN(32,!0))}dB(t){t=!!t,!!(1073741824&this.KD)!==t&&(this.Rk(),this.tN(1073741824,t),this.KD|=32)}pB(){return this.sN(1073741824)}zF(t){t!==this.vL&&(this.vL=t,null===t&&(t=this.SL),this.cB(t))}cB(t){if(131072&this.KD){const s=t.mB();if(null!==s)return this.gB(s),this.JD=t.yB(),void this.fB(!0)}this.gB(t.UN()),this.JD=0,this.fB(!1)}gB(t){t!==this.bL&&(this.Rk(),this.bL=t,this.KD|=64)}wB(t){this.vL===t&&(this.Rk(),this.bL=t.UN(),this.KD|=64)}SB(t){if(this.bL!==t)return;this.Rk();const s=null===this.vL?this.SL:this.vL;this.bL=s.UN(),this.JD=0,this.KD|=64}mk(t){t!==this.xL&&(this.xL=t,null===t&&(t=this.SL),this.Rk(),this.ML=t.VN(),this.KD|=128)}vB(t,s,i,e,n,r){const h=t.bB(),o=s.bB();if(0===(h&rf.COPY_SRC))throw new Error("source texture missing COPY_SRC usage");if(0===(o&rf.COPY_DST))throw new Error("destination texture missing COPY_DST usage");if(t===s)throw new Error("invalid destination");const a=Math.min(t.My(),s.My()),l=Math.min(t.Gy(),s.Gy());n=Math.min(n,a-i),r=Math.min(r,l-e),n<=0||r<=0||(this.Ek(),this.$L.copyTextureToTexture({texture:t.sG(),origin:[i,e]},{texture:s.sG(),origin:[i,e]},[n,r]),this.KD|=16384)}xB(t){return t>=2?4:1}MB(t){t=this.xB(t),this.OL!==t&&(this.Rk(),this.OL=t,this.KD|=32)}eM(t){t!==this.FL&&(this.Rk(),this.FL=t,this.DS=null,this.KD|=32)}qF(t){this.eM(this.Qv(t))}JF(){this.eM(0)}KF(){this.eM(3)}$F(t,s,i,e){const n=this.YD;n.Jo(t,s,i,e)||(n.Eo(t,s,i,e),this.DS=null)}WF(t){const s=this.YD;s.Wo()!==t&&(s.Lo(t),this.DS=null)}BF(){return this.YD.Wo()}nM(t){const s=this.YD;s.equals(t)||(s.set(t),this.DS=null)}UF(){this.$F(1,1,1,1)}VF(){return this.YD}Ub(t){t!==this.DL&&(this.Rk(),this.DL=t,this.DS=null,this.KD|=32)}XF(){return this.DL}Vb(t){t!==this.LL&&(this.Rk(),this.LL=t,this.DS=null,this.KD|=32)}ZF(){return this.LL}Rect(t){this.QF(t.Qa(),t.tl(),t.sl(),t.il())}QF(t,s,i,e){this.jb(t,s,i,s,i,e,t,e)}TB(t){const s=this.HD,i=this.JD;s[t++]=i,s[t++]=i,s[t++]=i,s[t]=i}El(t){this.iO(t,Kf)}jb(t,s,i,e,n,r,h,o){this.tO(4,6),this.sO();const a=this.DA,l=this.$A;this.$A+=4;let u=3*l;const c=this.kS+this.BS;a[u++]=t,a[u++]=s,a[u++]=c,a[u++]=i,a[u++]=e,a[u++]=c,a[u++]=n,a[u++]=r,a[u++]=c,a[u++]=h,a[u++]=o,a[u]=c,Kf.Vo(this.NA,2*l),262144&this.KD&&this.TB(l),this.YD.zo(this.kA,4*l)}pb(t,s){this.tO(4,6),this.sO();const i=this.$A;this.$A+=4,t.Yl(this.DA,3*i,this.kS+this.BS),s.rl(this.NA,2*i),262144&this.KD&&this.TB(i),this.YD.zo(this.kA,4*i)}iO(t,s){this.tO(4,6),this.sO();const i=this.$A;this.$A+=4,t.Yl(this.DA,3*i,this.kS+this.BS),s.Vo(this.NA,2*i),262144&this.KD&&this.TB(i),this.YD.zo(this.kA,4*i)}eO(t,s,i){this.tO(4,6),this.sO();const e=this.$A;this.$A+=4,t.Yl(this.DA,3*e,this.kS+this.BS),s.Vo(this.NA,2*e),262144&this.KD&&this.TB(e),this.kA.set(i,4*e)}nO(t,s,i,e,n,r,h,o,a,l,u,c,f){this.tO(4,6),this.sO();const d=this.DA,p=this.$A;this.$A+=4;let m=3*p;const g=this.kS+this.BS;d[m++]=t,d[m++]=s,d[m++]=g+i,d[m++]=e,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.rl(this.NA,2*p),262144&this.KD&&this.TB(p),this.YD.zo(this.kA,4*p)}ab(t,s,i,e,n,r,h,o,a,l,u,c,f){this.tO(4,6),this.sO();const d=this.DA,p=this.$A;this.$A+=4;let m=3*p;const g=this.kS+this.BS;d[m++]=t,d[m++]=s,d[m++]=g+i,d[m++]=e,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.Vo(this.NA,2*p),262144&this.KD&&this.TB(p),this.YD.zo(this.kA,4*p)}rO(t,s,i,e,n,r,h,o,a,l,u,c,f,d){this.tO(4,6),this.sO();const p=this.DA,m=this.$A;this.$A+=4;let g=3*m;const y=this.kS+this.BS;p[g++]=t,p[g++]=s,p[g++]=y+i,p[g++]=e,p[g++]=n,p[g++]=y+r,p[g++]=h,p[g++]=o,p[g++]=y+a,p[g++]=l,p[g++]=u,p[g]=y+c,f.Vo(this.NA,2*m),262144&this.KD&&this.TB(m),this.kA.set(d,4*m)}cT(t,s,i,e){if(t.length%3!=0)throw new Error("vertex buffer length not multiple of 3");if(t.length>196605)throw new Error(`too many vertices (${t.length/3}, limit 65535)`);if(i.length%3!=0)throw new Error("index buffer length not multiple of 3");if(i.length>393210)throw new Error(`too many indices (${i.length}, limit 393210)`);this.tO(t.length,i.length);const n=this.$A;this.DA.set(t,3*n),this.NA.set(s,2*n),262144&this.KD&&this.HD.fill(this.JD,n,n+t.length);const r=this.LA;if(0===n)r.set(i,this.WA);else{let t=this.WA;for(let s=0,e=i.length;s<e;++s)r[t++]=i[s]+n}const h=this.kA;if(null!=e)h.set(e,4*n);else{const s=this.YD,i=s.ko(),e=s.Bo(),r=s.$o(),o=s.Wo();let a=4*n;for(let s=0,n=t.length;s<n;++s)h[a++]=i,h[a++]=e,h[a++]=r,h[a++]=o}this.$A+=t.length/3,this.WA+=i.length}aO(t){this.cL.equals(t)||(this.cL.S(t),this.NN());const s=this.kS+this.BS;this.fL!==s&&(this.fL=s,this.kN()),this.uL.equals(this.YD)||(this.uL.S(this.YD),this.$N()),this.Mv(this.Tv()),this.sL=0,this.KD|=18}lO(){this.sL>0&&this.Rk(),this.KD&=-3,this.KD|=16}uO(t,s,i,e){let n=this.UA;n>cf&&(this.Hb(),n=0),1&this.KD?this.sL+=6:(null===this.WL&&this.Mk(),this.KD|=1,this.tL=n/4*6,this.sL=6);const r=this.BA;r[n++]=t,r[n++]=s,r[n++]=i,r[n++]=e,this.UA=n}dO(t){this.lL.equals(t)||(this.lL.S(t),this.BN())}pO(t,s,i=1){const e=this.OD,n=this.BD;Qf.set(t,s),Qf.Yo(n,e.GB.offset/4)||this.tB(Qf,e.GB),n[e._B.offset/4]!==Math.fround(i)&&(n[e._B.offset/4]=i,this.Qk(e._B))}mO(t,s,i,e,n,r,h){const o=this.OD,a=this.BD;t.Yo(a,o.CB.offset/4)||(t.Vo(a,o.CB.offset/4),this.Qk(o.CB)),Qf.set(e/s,n/i),Qf.Yo(a,o.IB.offset/4)||this.tB(Qf,o.IB),Qf.set(r/s,h/i),Qf.Yo(a,o.EB.offset/4)||this.tB(Qf,o.EB)}gO(t,s,i,e,n,r,h){const o=this.OD,a=this.BD;Qf.set(i,e),Qf.Yo(a,o.IB.offset/4)||this.tB(Qf,o.IB),a[o._B.offset/4]!==Math.fround(n)&&(a[o._B.offset/4]=n,this.Qk(o._B)),Qf.set(r,h),Qf.Yo(a,o.EB.offset/4)||this.tB(Qf,o.EB)}yO(t,s,i,e,n,r,h,o,a,l,u){const c=this.$D,f=this.AL;u%=10800,f.zx()&&this.mk(t),f.PB()&&(this.nB(s,c.RB),this.nB(i,c.CB),this.nB(e,c.AB),this.nB(n,c.OB)),this.sB(o,c.devicePixelRatio),this.sB(a,c.DB),this.sB(l,c.LB),this.sB(u,c.sg),this.sB(this.rv(),c.NB),this.sB(this.ov(),c.kB)}wO(t){t&&(t.BB()&&(this.Ek(),t.$B(this.$L)),this.WB(t.UB()))}VB(t){this.eB(t?1:0,this.$D.zB)}WB(t){t!==this.GL&&(this.Rk(),this.GL=t,this.KD|=8192)}jB(t){this.GL===t&&this.WB(this.mL)}FO(t){if(t.xk())return this.JA.Wk(!0),void this.JA.Bk().set(t.Bk());t.zG()>=2&&this.JA.zG()<2?this.qB(t):(this.SO(0,0,0,0),this.KF(),this.UF(),this.OO(t))}OO(t){this.Vk(t);const s=t.NG();this.zF(s),this.hO()}hO(){const t=this.pB();t||this.dB(!0),this.ib(0);const s=id,i=td;s.set(0,-1,0,-1,2,1,0,1),i.set(0,-1,2,1),this.pb(s,i),t||this.dB(!1)}qB(t){this.Vk(t),this.Ek(),this.$L.beginRenderPass({colorAttachments:[{view:t.NG().kk(),resolveTarget:this.JA.NG().kk(),loadOp:"load",storeOp:"store"}]}).end(),this.KD|=16384}NO(){this.Ek(),this.xO(!0),this.KD|=41943040}kO(t=!1){this.Ek(),this.xO(t),this.KD&=-8388609,this.KD|=16777216}BO(){return this.sN(16777216)}$O(t=!0){this.Ek(),this.xO(t),this.KD&=-16777217}MF(){this.qv([["normal","one","one-minus-src-alpha"],["additive","one","one"],["xor","one","one-minus-src-alpha"],["copy","one","zero"],["destination-over","one-minus-dst-alpha","one"],["source-in","dst-alpha","zero"],["destination-in","zero","src-alpha"],["source-out","one-minus-dst-alpha","zero"],["destination-out","zero","one-minus-src-alpha"],["source-atop","dst-alpha","one-minus-src-alpha"],["destination-atop","one-minus-dst-alpha","src-alpha"]])}HB(){return this.rD?[...this.rD.features]:[]}JB(){return this.hD}YB(){const t=this.hD;if(!t)return"unknown/unknown";const s=t.vendor||"unknown",i=t.architecture||"unknown",e=[];return t.device&&e.push(t.device),t.description&&e.push(t.description),t.type&&e.push(t.type),t.backend&&e.push(t.backend),s+"/"+i+(e.length>0?` (${e.join(", ")})`:"")}}}{const ed=self.Cs,nd=!0;ed.Xw.ZD=class{constructor(t){this.mx=t,this.XB=new Map,this.ZB=[],this.KB=[],this.QB=[],this.t$=0,this.s$=0,this.i$=0,this.e$=0,this.n$=0,this.r$=0}Dx(){return this.mx}rM(){this.XB.clear(),ed.bh(this.ZB),ed.bh(this.KB),ed.bh(this.QB)}h$(t){return Math.max(ed.br(t),16)}o$(t){this.n$++;const s=this.h$(t);{const t=this.XB.get(s);if(void 0!==t&&t.length>0){const i=t.pop();return i.a$(),0===t.length&&this.XB.delete(s),i}}return this.t$++,this.s$+=s,this.i$++,ed.jn(ed.Xw.l$,this,s)}u$(t){this.r$++;const s=t.Ou(),i=this.XB.get(s);void 0===i?this.XB.set(s,[t]):i.push(t)}c$(t){this.QB.push(t)}jk(){for(const t of this.ZB)t.f$();ed.bh(this.ZB);for(const t of this.KB)this.t$--,this.s$-=t.Ou(),t.qn();ed.bh(this.KB);for(const t of this.QB)t.destroy();ed.bh(this.QB)}Tk(t){t%30==0&&this.d$(t)}d$(t){for(const[s,i]of this.XB.entries()){let e=0;for(let s=0,n=i.length;s<n;++s){const n=i[s];n.p$(t)?(this.t$--,this.s$-=n.Ou(),n.qn(),this.e$++):(i[e]=n,++e)}0===e?this.XB.delete(s):ed.Sh(i,e)}this.m$()}rB(t,s,i,e,n){const r=this.o$(n),h=r.g$(),o=h.getMappedRange(0,n);new Uint8Array(o).set(new Uint8Array(i,e,n)),h.unmap(),t.copyBufferToBuffer(h,0,s,e,n),this.ZB.push(r)}m$(){this.i$=0,this.e$=0,this.n$=0,this.r$=0}}}{const rd=self.Cs,hd=self.GPUBufferUsage,od=self.GPUMapMode,ad=self.assert,ld=0,ud=1,cd=2;rd.Xw.l$=class{constructor(t,s){this.XD=t,this.y$=1,this.w$=s,this.hA=this.Dx().YN().createBuffer({mappedAtCreation:!0,size:s,usage:hd.COPY_SRC|hd.MAP_WRITE}),this.S$=0}Dx(){return this.XD.Dx()}v$(){return this.y$}Ou(){return this.w$}g$(){return this.hA}a$(){this.y$=1}async f$(){this.y$=2;try{await this.hA.mapAsync(od.WRITE)}catch(t){return void console.warn("[WebGPU] Error recycling buffer, assuming device was lost: ",t)}this.Dx().DR()||(this.y$=0,this.S$=this.Dx().Jb(),this.XD.u$(this))}b$(){this.y$=0}p$(t){return this.S$<=t-25}qn(){this.hA.destroy(),this.hA=null,this.XD=null}}}{const fd=self.Cs,dd=self.assert,pd=self.GPUBufferUsage;fd.Xw.x$=class{constructor(t){const s=t.Dx();this.Yx=t,this.M$=t.T$(),this.G$=new ArrayBuffer(this.M$),this._$=new Float32Array(this.G$),this.C$=!1,this.hA=s.YN().createBuffer({size:this.M$,usage:pd.UNIFORM|pd.COPY_DST}),this.I$=s.WN(this.hA)}qn(){this.Dx().jB(this.I$),this.Dx().dk().c$(this.hA),this.hA=null,this.Yx=null,this.G$=null,this._$=null,this.I$=null}Dx(){return this.Yx.Dx()}rC(){return this.Yx}UB(){return this.I$}E$(t,s){const i=this.Yx.P$(t),e=i.type,n=i.offset/4,r=this._$;if("color"===e){if(s.Xo(r,n))return;s.jo(r,n),this.C$=!0}else{if("float"!==e&&"percent"!==e)throw new Error(`unexpected shader param type '${e}'`);if(r[n]===Math.fround(s))return;r[n]=s,this.C$=!0}}BB(){return this.C$}$B(t){this.Dx().dk().rB(t,this.hA,this.G$,0,this.M$),this.C$=!1}}}{let md=function(t){for(const s of Object.values(t))s.end=s.offset+s.size},gd=function(t){const s=[];for(let i=0;i<t;++i)s.push(null);return s},yd=function(t){return`\nstruct FragmentInput {\n\t@location(1) fragUV : vec2<f32>,\n\t@location(2) fragColor : vec4<${t?"f16":"f32"}>,\n\t@builtin(position) fragPos : vec4<f32>\n};\n\nfn c3_getBackUV(fragPos : vec2<f32>, texBack : texture_2d<f32>) -> vec2<f32>\n{\n\treturn fragPos / vec2<f32>(textureDimensions(texBack));\n}\n\nfn c3_getDepthUV(fragPos : vec2<f32>, texDepth : texture_depth_2d) -> vec2<f32>\n{\n\treturn fragPos / vec2<f32>(textureDimensions(texDepth));\n}\n`},wd=function(t,s,i,e,n){return t<<10|s<<7|i<<5|e<<4|n};UpdateLayoutEndValues=md,makeNullFilledArray=gd,GetFragmentInputStructDeclaration=yd,HashPipelineState=wd;const Sd=self.Cs,vd=4,bd=2,xd=4,Md=8,Td=16,Gd=64,_d="\nstruct Uniforms {\n\ttransform\t\t: mat4x4<f32>,\n\tpointTexStart\t: vec2<f32>,\n\tpointTexEnd\t\t: vec2<f32>,\n\tzElevation\t\t: f32\n};\n@binding(0) @group(0) var<uniform> uniforms : Uniforms;\n",Cd={transform:{offset:0,size:64,end:0},Jk:{offset:64,size:16,end:0},R$:{offset:64,size:8,end:0},A$:{offset:72,size:8,end:0},Yk:{offset:80,size:4,end:0}};md(Cd);const Id=Cd.Yk.end,Ed="\nstruct Uniforms {\n\tcolor2\t\t\t\t: vec4<f32>,\n\tpointColor \t\t\t: vec4<f32>,\n\ttileSize\t\t\t: vec2<f32>,\n\ttileSpacing\t\t\t: vec2<f32>,\n\tsrcRectStart\t\t: vec2<f32>,\n\tsrcRectEnd\t\t\t: vec2<f32>,\n\tpixelSize\t\t\t: vec2<f32>,\n\toutlineThickness\t: f32\n};\n@binding(1) @group(0) var<uniform> uniforms : Uniforms;\n",Pd={Zk:{offset:0,size:16,end:0},Kk:{offset:16,size:16,end:0},IB:{offset:32,size:8,end:0},EB:{offset:40,size:8,end:0},CB:{offset:48,size:16,end:0},F$:{offset:48,size:8,end:0},O$:{offset:56,size:8,end:0},GB:{offset:64,size:8,end:0},_B:{offset:72,size:4,end:0}};md(Pd);const Rd=Pd._B.end,Ad="\nstruct C3Params {\n\tsrcStart\t\t\t: vec2<f32>,\n\tsrcEnd\t\t\t\t: vec2<f32>,\n\tsrcOriginStart\t\t: vec2<f32>,\n\tsrcOriginEnd\t\t: vec2<f32>,\n\tlayoutStart\t\t\t: vec2<f32>,\n\tlayoutEnd\t\t\t: vec2<f32>,\n\tdestStart\t\t\t: vec2<f32>,\n\tdestEnd\t\t\t\t: vec2<f32>,\n\tdevicePixelRatio\t: f32,\n\tlayerScale\t\t\t: f32,\n\tlayerAngle\t\t\t: f32,\n\tseconds\t\t\t\t: f32,\n\tzNear\t\t\t\t: f32,\n\tzFar\t\t\t\t: f32,\n\tisSrcTexRotated\t\t: u32\n};\n@binding(4) @group(0) var<uniform> c3Params : C3Params;\n\nfn c3_srcToNorm(p : vec2<f32>) -> vec2<f32>\n{\n\treturn (p - c3Params.srcStart) / (c3Params.srcEnd - c3Params.srcStart);\n}\n\nfn c3_normToSrc(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p, c3Params.srcEnd - c3Params.srcStart, c3Params.srcStart);\n}\n\nfn c3_clampToSrc(p : vec2<f32>) -> vec2<f32>\n{\n\treturn clamp(p, min(c3Params.srcStart, c3Params.srcEnd), max(c3Params.srcStart, c3Params.srcEnd));\n}\n\nfn c3_srcOriginToNorm(p : vec2<f32>) -> vec2<f32>\n{\n\treturn (p - c3Params.srcOriginStart) / (c3Params.srcOriginEnd - c3Params.srcOriginStart);\n}\n\nfn c3_normToSrcOrigin(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p, c3Params.srcOriginEnd - c3Params.srcOriginStart, c3Params.srcOriginStart);\n}\n\nfn c3_clampToSrcOrigin(p : vec2<f32>) -> vec2<f32>\n{\n\treturn clamp(p, min(c3Params.srcOriginStart, c3Params.srcOriginEnd), max(c3Params.srcOriginStart, c3Params.srcOriginEnd));\n}\n\nfn c3_getLayoutPos(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p - c3Params.srcOriginStart, (c3Params.layoutEnd - c3Params.layoutStart) / (c3Params.srcOriginEnd - c3Params.srcOriginStart), c3Params.layoutStart);\n}\n\nfn c3_srcToDest(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p - c3Params.srcStart, (c3Params.destEnd - c3Params.destStart) / (c3Params.srcEnd - c3Params.srcStart), c3Params.destStart);\n}\n\nfn c3_clampToDest(p : vec2<f32>) -> vec2<f32>\n{\n\treturn clamp(p, min(c3Params.destStart, c3Params.destEnd), max(c3Params.destStart, c3Params.destEnd));\n}\n\nfn c3_linearizeDepth(depthSample : f32) -> f32\n{\n\treturn c3Params.zNear * c3Params.zFar / (c3Params.zFar + depthSample * (c3Params.zNear - c3Params.zFar));\n}\n",Fd=["srcStart","srcEnd","srcOriginStart","srcOriginEnd","c3_srcToNorm","c3_normToSrc","c3_clampToSrc","c3_srcOriginToNorm","c3_normToSrcOrigin","c3_clampToSrcOrigin","c3_getLayoutPos","c3_srcToDest"],Od=["layoutStart","layoutEnd","destStart","destEnd","c3_clampToDest"],Dd={CB:{offset:0,size:16,end:0},D$:{offset:0,size:8,end:0},L$:{offset:8,size:8,end:0},AB:{offset:16,size:16,end:0},N$:{offset:16,size:8,end:0},k$:{offset:24,size:8,end:0},OB:{offset:32,size:16,end:0},B$:{offset:32,size:8,end:0},$$:{offset:40,size:8,end:0},RB:{offset:48,size:16,end:0},W$:{offset:48,size:8,end:0},U$:{offset:56,size:8,end:0},devicePixelRatio:{offset:64,size:4,end:0},DB:{offset:68,size:4,end:0},LB:{offset:72,size:4,end:0},sg:{offset:76,size:4,end:0},NB:{offset:80,size:4,end:0},kB:{offset:84,size:4,end:0},zB:{offset:88,size:4,end:0}};md(Dd);const Ld=Dd.zB.end,Nd="\nstruct FragmentOutput {\n\t@location(0) color : vec4<f32>\n};\n",kd=new Map([["float",4],["percent",4],["color",12]]),Bd=new Map([["float",4],["percent",4],["color",16]]),$d="\nfn c3_premultiply(c : vec4<f32>) -> vec4<f32>\n{\n\treturn vec4<f32>(c.rgb * c.a, c.a);\n}\n\nfn c3_unpremultiply(c : vec4<f32>) -> vec4<f32>\n{\n\tif (c.a == 0.0)\n\t{\n\t\treturn vec4<f32>(0.0);\n\t}\n\t\n\treturn vec4<f32>(c.rgb / c.a, c.a);\n}\n\nfn c3_grayscale(rgb : vec3<f32>) -> f32\n{\n\treturn dot(rgb, vec3<f32>(0.299, 0.587, 0.114));\n}\n\nfn c3_getPixelSize(t : texture_2d<f32>) -> vec2<f32>\n{\n\treturn vec2<f32>(1.0) / vec2<f32>(textureDimensions(t));\n}\n\nfn c3_clamp2(v : vec2<f32>, l : f32, u : f32) -> vec2<f32>\n{\n\treturn clamp(v, vec2<f32>(l), vec2<f32>(u));\n}\n\nfn c3_mod(x : f32, y : f32) -> f32\n{\n\treturn x - y * floor(x / y);\n}\n\nfn c3_mod2(x : vec2<f32>, y : vec2<f32>) -> vec2<f32>\n{\n\treturn x - y * floor(x / y);\n}\n\nfn c3_RGBtoHSL(color : vec3<f32>) -> vec3<f32>\n{\n\tvar hsl : vec3<f32> = vec3<f32>(0.0);\n\t\n\tvar fmin : f32 = min(min(color.r, color.g), color.b);\n\tvar fmax : f32 = max(max(color.r, color.g), color.b);\n\tvar delta : f32 = fmax - fmin;\n\n\thsl.z = (fmax + fmin) / 2.0;\n\n\tif (delta == 0.0)\n\t{\n\t\thsl.x = 0.0;\n\t\thsl.y = 0.0;\n\t}\n\telse \n\t{\n\t\tif (hsl.z < 0.5)\n\t\t{\n\t\t\thsl.y = delta / (fmax + fmin);\n\t\t}\n\t\telse\n\t\t{\n\t\t\thsl.y = delta / (2.0 - fmax - fmin);\n\t\t}\n\t\t\n\t\tvar dR : f32 = (((fmax - color.r) / 6.0) + (delta / 2.0)) / delta;\n\t\tvar dG : f32 = (((fmax - color.g) / 6.0) + (delta / 2.0)) / delta;\n\t\tvar dB : f32 = (((fmax - color.b) / 6.0) + (delta / 2.0)) / delta;\n\n\t\tif (color.r == fmax)\n\t\t{\n\t\t\thsl.x = dB - dG;\n\t\t}\n\t\telse if (color.g == fmax)\n\t\t{\n\t\t\thsl.x = (1.0 / 3.0) + dR - dB;\n\t\t}\n\t\telse if (color.b == fmax)\n\t\t{\n\t\t\thsl.x = (2.0 / 3.0) + dG - dR;\n\t\t}\n\n\t\tif (hsl.x < 0.0)\n\t\t{\n\t\t\thsl.x = hsl.x + 1.0;\n\t\t}\n\t\telse if (hsl.x > 1.0)\n\t\t{\n\t\t\thsl.x = hsl.x - 1.0;\n\t\t}\n\t}\n\n\treturn hsl;\n}\n\nfn c3_hueToRGB(f1 : f32, f2 : f32, hue_ : f32) -> f32\n{\n\tvar hue : f32 = hue_;\n\tif (hue < 0.0)\n\t{\n\t\thue = hue + 1.0;\n\t}\n\telse if (hue > 1.0)\n\t{\n\t\thue = hue - 1.0;\n\t}\n\t\t\n\tvar ret : f32;\n\t\n\tif ((6.0 * hue) < 1.0)\n\t{\n\t\tret = f1 + (f2 - f1) * 6.0 * hue;\n\t}\n\telse if ((2.0 * hue) < 1.0)\n\t{\n\t\tret = f2;\n\t}\n\telse if ((3.0 * hue) < 2.0)\n\t{\n\t\tret = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;\n\t}\n\telse\n\t{\n\t\tret = f1;\n\t}\n\t\n\treturn ret;\n}\n\nfn c3_HSLtoRGB(hsl : vec3<f32>) -> vec3<f32>\n{\n\tvar rgb : vec3<f32> = vec3<f32>(hsl.z);\n\t\n\tif (hsl.y != 0.0)\n\t{\n\t\tvar f2 : f32;\n\t\t\n\t\tif (hsl.z < 0.5)\n\t\t{\n\t\t\tf2 = hsl.z * (1.0 + hsl.y);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tf2 = (hsl.z + hsl.y) - (hsl.y * hsl.z);\n\t\t}\n\t\t\t\n\t\tvar f1 : f32 = 2.0 * hsl.z - f2;\n\t\t\n\t\trgb.r = c3_hueToRGB(f1, f2, hsl.x + (1.0 / 3.0));\n\t\trgb.g = c3_hueToRGB(f1, f2, hsl.x);\n\t\trgb.b = c3_hueToRGB(f1, f2, hsl.x - (1.0 / 3.0));\n\t}\n\t\n\treturn rgb;\n}\n";Sd.Xw.ED=class extends Sd.Xw.ux{constructor(t,s){if(super(t,s),this.V$=s.z$,this.j$=s.q$,this.H$=s.J$,this.RL=s.Y$,this.X$=new Map,this.Z$=new Map,this.K$=!1,this.Q$=!1,this.Ws=[],this.tW=0,s.parameters){let t=0;for(const i of s.parameters){const s=i[2];if(!kd.has(s))throw new Error(`unrecognized effect param type '${s}'`);const e=kd.get(s),n=Bd.get(s),r=t%n;0!==r&&(t+=n-r),this.Ws.push({type:s,offset:t,size:e,end:t+e}),t+=e}this.tW=16*Math.ceil(t/16)}}static async e_(t,s){const i=t.YN(),e=s.name,n=t.fN(),r=t.u_(),h=s.src,o=Sd.Xw.ED.sW(h,n,r),a=i.createShaderModule({label:e,code:o});let l,u=null;if(s.yN){const t=Sd.Xw.ED.sW(s.yN,n,r);u=i.createShaderModule({label:e,code:t})}a.getCompilationInfo().then(t=>Sd.Xw.ED.pN(e,"fragment",t));const c=Sd.Xw.ED.dN(s.t_,n);let f;c?(l=i.createShaderModule({label:e,code:c}),l.getCompilationInfo().then(t=>Sd.Xw.ED.pN(e,"vertex",t))):l=t.XN();const d=Sd.Xw.ED.dN(s.SN,n);d?(f=i.createShaderModule({label:e,code:d}),f.getCompilationInfo().then(t=>Sd.Xw.ED.pN(e,"vertex (norm)",t))):f=t.ZN();const p=Sd.jn(Sd.Xw.ED,t,Object.assign({z$:a,q$:u,J$:l,Y$:f},s));if(p.Fx=h.includes("%%C3PARAMS_STRUCT%%")&&Fd.some(t=>h.includes(t)),p.K$=p.Fx||h.includes("%%C3PARAMS_STRUCT%%")&&Od.some(t=>h.includes(t)),p.Q$=h.includes("%%C3PARAMS_STRUCT%%")&&h.includes("isSrcTexRotated"),"<generate-mipmap>"!==e){const s=p.iW(0,0,0,0,0);let i=null;t.uk()&&(i=p.iW(0,1,0,0,0));const[e,n]=await Promise.all([s,i]);p.X$.set(wd(0,0,0,0,0),e),n&&p.X$.set(wd(0,1,0,0,0),n)}return p}static eW(t,s){if(!t)return t;let i="";return i=s?"enable f16;\nalias f16or32 = f16;\n":"alias f16or32 = f32;\n",i+t}static sW(t,s,i){return t=Sd.Xw.ED.eW(t,s),Sd.Vm(t,{"%%SAMPLERFRONT_BINDING%%":"@binding(0) @group(1)","%%TEXTUREFRONT_BINDING%%":"@binding(1) @group(1)","%%SAMPLERBACK_BINDING%%":"@binding(0) @group(2)","%%TEXTUREBACK_BINDING%%":"@binding(1) @group(2)","%%SAMPLERDEPTH_BINDING%%":"@binding(0) @group(3)","%%TEXTUREDEPTH_BINDING%%":"@binding(1) @group(3)","%%SHADERPARAMS_BINDING%%":"@binding(5) @group(0)","%%FRAGMENTINPUT_STRUCT%%":yd(i),"%%FRAGMENTOUTPUT_STRUCT%%":Nd,"%%C3PARAMS_STRUCT%%":Ad,"%%C3_UTILITY_FUNCTIONS%%":$d})}static dN(t,s){return Sd.Xw.ED.eW(t,s)}static pN(t,s,i){for(const e of i.messages){const i=`[WebGPU] Message (${e.type}) compiling ${s} shader '${t}': ${e.message} (line ${e.lineNum}, pos ${e.linePos})`;"error"===e.type?console.error(i):"warning"===e.type?console.warn(i):console.log(i)}}qn(){this.V$=null,this.j$=null,this.H$=null,this.RL=null,this.X$.clear(),this.Z$.clear(),super.qn()}YN(){return this.mx.YN()}ek(){return this.mx.ek()}Dx(){return this.mx}PB(){return this.K$}Jx(){return this.Q$}hC(){return this.Ws.length}oC(t){return t<0||t>=this.Ws.length?null:this.Ws[t].type}T$(){return this.tW}P$(t){return this.Ws[t]}nW(t,s,i,e,n){const r=this.mx,h=r.u_(),[o,a]=r.Yv(t);let l="none";switch(i){case 1:l="back";break;case 2:l="front"}const u={label:`${this.Pc()} blendMode ${t} variant ${s} multisampleCount ${n}`,layout:this.ek(),primitive:{cullMode:l,frontFace:0===e?"cw":"ccw"},vertex:{module:4===s?this.RL:this.H$,entryPoint:"main",buffers:[{arrayStride:12,attributes:[{shaderLocation:0,offset:0,format:"float32x3"}]},{arrayStride:8,attributes:[{shaderLocation:1,offset:0,format:"float32x2"}]},{arrayStride:4*(h?2:4),attributes:[{shaderLocation:2,offset:0,format:h?"float16x4":"float32x4"}]},{arrayStride:4,attributes:[{shaderLocation:3,offset:0,format:"uint32"}]}]},fragment:{module:this.V$,entryPoint:"main",targets:[{format:r.KN(),blend:{color:{srcFactor:o,dstFactor:a},alpha:{srcFactor:o,dstFactor:a}}}]}};if(n>=2&&(u.multisample={count:n}),1===s)u.fragment.module=this.j$||this.V$,u.depthStencil={format:r.jN(),depthWriteEnabled:!0,depthCompare:"less-equal"};else if(2===s){u.fragment.module=this.j$||this.V$,u.fragment.targets=[];const t={compare:"always",failOp:"keep",depthFailOp:"keep",passOp:"replace"};u.depthStencil={format:r.jN(),depthWriteEnabled:!0,depthCompare:"less-equal",stencilFront:t,stencilBack:t,stencilReadMask:1,stencilWriteMask:1}}else if(3===s){u.fragment.module=this.j$||this.V$;const t={compare:"equal",failOp:"keep",depthFailOp:"keep",passOp:"keep"};u.depthStencil={format:r.jN(),depthWriteEnabled:!1,depthCompare:"always",stencilFront:t,stencilBack:t,stencilReadMask:1,stencilWriteMask:0}}return u}rW(t,s,i,e,n){return this.YN().createRenderPipeline(this.nW(t,s,i,e,n))}iW(t,s,i,e,n){return this.YN().createRenderPipelineAsync(this.nW(t,s,i,e,n))}Fk(t,s,i,e,n){const r=wd(t,s,i,e,n);let h=this.X$.get(r);return h||(h=this.rW(t,s,i,e,n),this.X$.set(r,h),h)}static ID(){return Cd}static RD(){return 16*Math.ceil(Id/16)}static DD(){return Pd}static ND(){return 16*Math.ceil(Rd/16)}static WD(){return Dd}static VD(){return 16*Math.ceil(Ld/16)}static _C(t){const s=t?"f16":"f32";return`\n\t\t${_d}\n\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${s}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\toutput.Position = uniforms.transform * vec4<f32>(input.position, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.fragColor = input.color;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\treturn output;\n\t\t}`}static mN(t){const s=t?"f16":"f32";return`\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${s}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p = input.position;\n\t\t\tp.y = 1.0 - p.y;\n\t\t\toutput.Position = vec4<f32>(p.xy * 2.0 - 1.0, p.z, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\toutput.fragColor = input.color;\n\t\t\treturn output;\n\t\t}`}static wN(t){const s=t?"f16":"f32";return`\n\t\t${_d}\n\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${s}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\toutput.Position = uniforms.transform * vec4<f32>(input.position, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.fragColor = input.color;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\treturn output;\n\t\t}`}static vN(t){const s=t?"f16":"f32";return`\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${s}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p = input.position;\n\t\t\tp.y = 1.0 - p.y;\n\t\t\toutput.Position = vec4<f32>(p.xy * 2.0 - 1.0, p.z, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.fragColor = input.color;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\treturn output;\n\t\t}`}static gN(t,s){return`\n\t\t@binding(0) @group(1) var sampler0 : sampler;\n\t\t@binding(1) @group(1) var texture0 : texture_2d<f32>;\n\t\t@binding(2) @group(1) var sampler1 : sampler;\n\t\t@binding(3) @group(1) var texture1 : texture_2d<f32>;\n\t\t@binding(4) @group(1) var sampler2 : sampler;\n\t\t@binding(5) @group(1) var texture2 : texture_2d<f32>;\n\t\t@binding(6) @group(1) var sampler3 : sampler;\n\t\t@binding(7) @group(1) var texture3 : texture_2d<f32>;\n\t\t@binding(8) @group(1) var sampler4 : sampler;\n\t\t@binding(9) @group(1) var texture4 : texture_2d<f32>;\n\t\t@binding(10) @group(1) var sampler5 : sampler;\n\t\t@binding(11) @group(1) var texture5 : texture_2d<f32>;\n\t\t@binding(12) @group(1) var sampler6 : sampler;\n\t\t@binding(13) @group(1) var texture6 : texture_2d<f32>;\n\t\t@binding(14) @group(1) var sampler7 : sampler;\n\t\t@binding(15) @group(1) var texture7 : texture_2d<f32>;\n\t\t@binding(16) @group(1) var sampler8 : sampler;\n\t\t@binding(17) @group(1) var texture8 : texture_2d<f32>;\n\t\t@binding(18) @group(1) var sampler9 : sampler;\n\t\t@binding(19) @group(1) var texture9 : texture_2d<f32>;\n\t\t@binding(20) @group(1) var sampler10 : sampler;\n\t\t@binding(21) @group(1) var texture10 : texture_2d<f32>;\n\t\t@binding(22) @group(1) var sampler11 : sampler;\n\t\t@binding(23) @group(1) var texture11 : texture_2d<f32>;\n\t\t@binding(24) @group(1) var sampler12 : sampler;\n\t\t@binding(25) @group(1) var texture12 : texture_2d<f32>;\n\t\t@binding(26) @group(1) var sampler13 : sampler;\n\t\t@binding(27) @group(1) var texture13 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s?"f16":"f32"}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32,\n\t\t\t${t?"@builtin(position) fragPos: vec4<f32>":""}\n\t\t};\n\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar texXy : vec2<f32> = input.fragUV.xy;\n\t\t\tvar texIndex : u32 = input.texIndex;\n\t\t\tvar c : vec4<f32>;\n\n\t\t\tlet dx = dpdx(texXy);\n\t\t\tlet dy = dpdy(texXy);\n\t\t\t\n\t\t\tif (texIndex <= 6)\n\t\t\t{\n\t\t\t\tif (texIndex <= 2)\n\t\t\t\t{\n\t\t\t\t\tif (texIndex == 0)\t\t\t{\tc = textureSampleGrad(texture0, sampler0, texXy, dx, dy);\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 1)\t\t{\tc = textureSampleGrad(texture1, sampler1, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture2, sampler2, texXy, dx, dy);\t}\n\t\t\t\t\t}\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (texIndex <= 4)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 3)\t\t{\tc = textureSampleGrad(texture3, sampler3, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture4, sampler4, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex <= 5)\t\t{\tc = textureSampleGrad(texture5, sampler5, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture6, sampler6, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (texIndex <= 9)\n\t\t\t\t{\n\t\t\t\t\tif (texIndex == 7)\t\t\t{\tc = textureSampleGrad(texture7, sampler7, texXy, dx, dy);\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 8)\t\t{\tc = textureSampleGrad(texture8, sampler8, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture9, sampler9, texXy, dx, dy);\t}\n\t\t\t\t\t}\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (texIndex <= 11)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 10)\t\t{\tc = textureSampleGrad(texture10, sampler10, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture11, sampler11, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 12)\t\t{\tc = textureSampleGrad(texture12, sampler12, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture13, sampler13, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toutput.color = c * vec4<f32>(input.fragColor);\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static bN(t,s){return`\n\t\t@binding(0) @group(1) var sampler0 : sampler;\n\t\t@binding(1) @group(1) var texture0 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s?"f16":"f32"}>,\n\t\t\t${t?"@builtin(position) fragPos: vec4<f32>":""}\n\t\t};\n\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = textureSample(texture0, sampler0, input.fragUV) * vec4<f32>(input.fragColor);\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static MN(){return"\n\t\tstruct VertexInput {\n\t\t\t@builtin(vertex_index) VertexIndex : u32\n\t\t};\n\t\t\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(0) fragUV : vec2<f32>\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\n\t\t\tvar pos : array<vec2<f32>, 4> = array<vec2<f32>, 4>(\n\t\t\t\tvec2<f32>(-1.0, 1.0),\n\t\t\t\tvec2<f32>(1.0, 1.0),\n\t\t\t\tvec2<f32>(-1.0, -1.0),\n\t\t\t\tvec2<f32>(1.0, -1.0));\n\t\t\t\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p : vec2<f32> = pos[input.VertexIndex];\n\t\t\toutput.Position = vec4<f32>(p, 0.0, 1.0);\n\t\t\toutput.fragUV = p / 2.0 + 0.5;\n\t\t\treturn output;\n\t\t}"}static xN(){return"\n\t\t@binding(0) @group(0) var sampler0 : sampler;\n\t\t@binding(1) @group(0) var texture0 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(0) fragUV : vec2<f32>\n\t\t};\n\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>\n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = textureSample(texture0, sampler0, vec2<f32>(input.fragUV.x, 1.0 - input.fragUV.y));\n\t\t\treturn output;\n\t\t}"}DN(t){t||(t=this.mx.ak());let s=this.Z$.get(t);return s||(s=this.YN().createRenderPipeline({label:"<mipmap generator>",layout:"auto",vertex:{module:this.H$,entryPoint:"main"},primitive:{topology:"triangle-strip",stripIndexFormat:"uint16"},fragment:{module:this.V$,entryPoint:"main",targets:[{format:t,blend:{color:{srcFactor:"one",dstFactor:"zero"},alpha:{srcFactor:"one",dstFactor:"zero"}}}]}}),this.Z$.set(t,s)),s}static GN(){return`\n\t\t${_d}\n\n\t\tstruct PointData {\n\t\t\tdata : array<vec4<f32>>\n\t\t};\n\t\t@binding(3) @group(0) var<storage> pointBuffer : PointData;\n\n\t\tstruct VertexInput {\n\t\t\t@builtin(vertex_index) VertexIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(0) fragUV : vec2<f32>,\n\t\t\t@location(1) pointOpacity : f32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\n\t\t\tvar normPos : array<vec2<f32>, 4> = array<vec2<f32>, 4>(\n\t\t\t\tvec2<f32>(-0.5, -0.5),\n\t\t\t\tvec2<f32>(0.5, -0.5),\n\t\t\t\tvec2<f32>(0.5, 0.5),\n\t\t\t\tvec2<f32>(-0.5, 0.5));\n\t\t\t\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p : vec2<f32> = normPos[input.VertexIndex % u32(4)];\n\t\t\tvar pointData : vec4<f32> = pointBuffer.data[input.VertexIndex / u32(4)];\n\n\t\t\tvar size : f32 = pointData.z;\n\t\t\toutput.Position = uniforms.transform * vec4<f32>(p * size + pointData.xy, uniforms.zElevation, 1.0);\n\t\t\toutput.pointOpacity = pointData.w;\n\n\t\t\tvar pointTexMin : vec2<f32> = min(uniforms.pointTexStart, uniforms.pointTexEnd);\n\t\t\tvar pointTexMax : vec2<f32> = max(uniforms.pointTexStart, uniforms.pointTexEnd);\n\t\t\tvar pn : vec2<f32> = p + vec2<f32>(0.5, 0.5);\n\t\t\tvar pointCoord : vec2<f32> = select(vec2<f32>(1.0 - pn.y, pn.x), pn, uniforms.pointTexEnd.x > uniforms.pointTexStart.x);\n\n\t\t\toutput.fragUV = mix(pointTexMin, pointTexMax, pointCoord);\n\t\t\treturn output;\n\t\t}`}static TN(t){return`\n\t\t${Ed}\n\n\t\t%%SAMPLERFRONT_BINDING%% var sampler0 : sampler;\n\t\t%%TEXTUREFRONT_BINDING%% var texture0 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(0) fragUV : vec2<f32>,\n\t\t\t@location(1) pointOpacity : f32,\n\t\t\t@builtin(position) fragPos : vec4<f32>\n\t\t};\n\t\t\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = textureSample(texture0, sampler0, input.fragUV) * uniforms.pointColor * input.pointOpacity;\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static _N(t){return`\n\t\t${Ed}\n\n\t\t%%SAMPLERFRONT_BINDING%% var sampler0 : sampler;\n\t\t%%TEXTUREFRONT_BINDING%% var texture0 : texture_2d<f32>;\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar halfPixelSize : vec2<f32> = vec2<f32>(0.5, 0.5) / vec2<f32>(textureDimensions(texture0));\n\n\t\t\tvar tile : vec2<f32> = floor(input.fragUV);\n\t\t\tvar tex : vec2<f32> = fract(input.fragUV);\n\t\t\tvar tileOrigin : vec2<f32> = uniforms.srcRectStart + tile * (uniforms.tileSize + uniforms.tileSpacing);\n\t\t\tvar lowerBound : vec2<f32> = tileOrigin + halfPixelSize;\n\t\t\tvar upperBound : vec2<f32> = tileOrigin + uniforms.tileSize - halfPixelSize;\n\n\t\t\toutput.color = textureSampleLevel(texture0, sampler0, clamp(tex, lowerBound, upperBound), 0.0) * vec4<f32>(input.fragColor);\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static OC(t){return`\n${Ed}\n\n%%SAMPLERFRONT_BINDING%% var sampler0 : sampler;\n%%TEXTUREFRONT_BINDING%% var texture0 : texture_2d<f32>;\n\n%%FRAGMENTINPUT_STRUCT%%\n\nstruct FragmentOutput {\n\t@location(0) color : vec4<f32>,\n\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n};\n\n%%C3_UTILITY_FUNCTIONS%%\n\nconst PI : f32 = 3.1415926;\n\nfn cospVec4(a : vec4<f32>, b : vec4<f32>, x : f32) -> vec4<f32>\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nfn randVec3(seed : vec2<f32>) -> vec3<f32>\n{\n\treturn vec3<f32>(\n\t\tfract(sin(dot(seed.xy, vec2<f32>(12.9898,78.233))) * 43758.5453),\n\t\tfract(sin(dot(seed.yx, vec2<f32>(12.9898,-78.233))) * 43758.5453),\n\t\tfract(sin(dot(seed.xy, vec2<f32>(-12.9898,-78.233))) * 43758.5453));\n}\n\nfn sampleTile(tile : vec2<f32>, uv : vec2<f32>, ddx : vec2<f32>, ddy : vec2<f32>) -> vec4<f32>\n{\n\tvar posRandom = uniforms.tileSize;\n\tvar angleRandom = uniforms.outlineThickness;\n\tvar pixelSize = c3_getPixelSize(texture0);\n\t\n\tvar rand = (randVec3(round(tile)) - 0.5) * 2.0;\n\t\n\tvar angle = angleRandom * rand.z * PI;\n\tvar sin_a = sin(angle);\n\tvar cos_a = cos(angle);\n\tvar aspect = pixelSize.x / pixelSize.y;\n\n\tvar mid = tile + vec2<f32>(0.5, 0.5);\n\tvar dp = uv - mid;\n\tdp.x /= aspect;\n\tvar r = vec2<f32>(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvar p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\treturn textureSampleGrad(texture0, sampler0, p, ddx, ddy);\n}\n\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\n\tvar output : FragmentOutput;\n\t\n\tvar blendMarginX = uniforms.tileSpacing.x;\n\tvar blendMarginY = uniforms.tileSpacing.y;\n\t\n\tvar tile = floor(input.fragUV);\n\tvar tex = fract(input.fragUV);\n\tvar ddx = dpdx(input.fragUV);\n\tvar ddy = dpdy(input.fragUV);\n\t\n\tvar curTile = sampleTile(tile, input.fragUV, ddx, ddy);\n\t\n\tvar inLeftMargin = (tex.x < blendMarginX);\n\tvar inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tvar inTopMargin = (tex.y < blendMarginY);\n\tvar inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tvar leftTile = sampleTile(tile + vec2<f32>(-1.0, 0.0), input.fragUV, ddx, ddy);\n\t\tvar leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tvar leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tvar topTile =     sampleTile(tile + vec2<f32>(0.0,  -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topLeftTile = sampleTile(tile + vec2<f32>(-1.0, -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tvar bottomTile =     sampleTile(tile + vec2<f32>(0.0,  1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomLeftTile = sampleTile(tile + vec2<f32>(-1.0, 1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutput.color = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tvar rightTile = sampleTile(tile + vec2(1.0, 0.0), input.fragUV, ddx, ddy);\n\t\tvar rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tvar rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tvar topTile =      sampleTile(tile + vec2<f32>(0.0, -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topRightTile = sampleTile(tile + vec2<f32>(1.0, -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tvar bottomTile =      sampleTile(tile + vec2<f32>(0.0, 1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomRightTile = sampleTile(tile + vec2<f32>(1.0, 1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutput.color = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tvar topTile = sampleTile(tile + vec2<f32>(0.0, -1.0), input.fragUV, ddx, ddy);\n\t\toutput.color = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tvar bottomTile = sampleTile(tile + vec2<f32>(0.0, 1.0), input.fragUV, ddx, ddy);\n\t\toutput.color = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutput.color = curTile;\n\t}\n\t\n\toutput.color *= vec4<f32>(input.fragColor);\n\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\treturn output;\n}\n`}static CN(){return"\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = vec4<f32>(input.fragColor);\n\t\t\treturn output;\n\t\t}"}static IN(){return`\n\t\t${Ed}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\tfn fromLinear(linearRGB : vec3<f32>) -> vec3<f32>\n\t\t{\n\t\t\tvar cutoff : vec3<bool> = (linearRGB < vec3<f32>(0.0031308));\n\t\t\tvar higher : vec3<f32> = vec3<f32>(1.055) * pow(abs(linearRGB), vec3<f32>(1.0/2.4)) - 0.055;\n\t\t\tvar lower : vec3<f32> = linearRGB * 12.92;\n\t\t\treturn select(higher, lower, cutoff);\n\t\t}\n\n\t\tfn toLinear(sRGB : vec3<f32>) -> vec3<f32>\n\t\t{\n\t\t\tvar cutoff : vec3<bool> = (sRGB < vec3<f32>(0.04045));\n\t\t\tvar higher : vec3<f32> = pow(abs((sRGB + 0.055) / 1.055), vec3<f32>(2.4));\n\t\t\tvar lower : vec3<f32> = sRGB / 12.92;\n\t\t\treturn select(higher, lower, cutoff);\n\t\t}\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar linearGrad : vec3<f32> = mix(toLinear(vec3<f32>(input.fragColor.rgb)), toLinear(uniforms.color2.rgb), vec3<f32>(input.fragUV.x));\n\n\t\t\tvar a : f32 = mix(f32(input.fragColor.a), uniforms.color2.a, input.fragUV.x);\n\t\t\toutput.color = vec4<f32>(fromLinear(linearGrad) * a, a);\n\t\t\treturn output;\n\t\t}\n\t\t`}static EN(){return`\n\t\t${Ed}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar grad : f32 = input.fragUV.x / (1.0 - input.fragUV.y);\n\t\t\toutput.color = vec4<f32>(input.fragColor) * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);\n\t\t\treturn output;\n\t\t}\n\t\t`}static PN(){return"\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\n\t\t\tvar f : f32 = step(diffSq.x + diffSq.y, 0.25);\n\n\t\t\toutput.color = vec4<f32>(input.fragColor) * f;\n\t\t\treturn output;\n\t\t}"}static RN(){return`\n\t\t${Ed}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\t\t\tvar distSq : f32 = diffSq.x + diffSq.y;\n\t\t\tvar norm : vec2<f32> = normalize(diff);\n\t\t\tvar halfNorm : vec2<f32> = norm * 0.5;\n\n\t\t\tvar innerF : f32 = step(distSq, 0.25);\n\n\t\t\tvar innerEdge : vec2<f32> = halfNorm - uniforms.pixelSize * norm * uniforms.outlineThickness;\n\t\t\tvar innerEdgeSq : vec2<f32> = innerEdge * innerEdge;\n\t\t\tvar outerF : f32 = step(innerEdgeSq.x + innerEdgeSq.y, distSq);\n\t\t\t\n\t\t\toutput.color = vec4<f32>(input.fragColor) * innerF * outerF;\n\t\t\treturn output;\n\t\t}`}static AN(){return`\n\t\t${Ed}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\t\t\tvar norm : vec2<f32> = normalize(diff);\n\t\t\tvar halfNorm : vec2<f32> = norm * 0.5;\n\t\t\tvar halfNormSq : vec2<f32> = halfNorm * halfNorm;\n\n\t\t\tvar innerEdge : vec2<f32> = halfNorm - uniforms.pixelSize * norm;\n\t\t\tvar innerEdgeSq : vec2<f32> = innerEdge * innerEdge;\n\n\t\t\tvar f : f32 = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);\n\n\t\t\toutput.color = vec4<f32>(input.fragColor) * f;\n\t\t\treturn output;\n\t\t}`}static FN(){return`\n\t\t${Ed}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\t\t\tvar distSq : f32 = diffSq.x + diffSq.y;\n\t\t\tvar norm : vec2<f32> = normalize(diff);\n\t\t\tvar halfNorm : vec2<f32> = norm * 0.5;\n\t\t\tvar halfNormSq : vec2<f32> = halfNorm * halfNorm;\n\n\t\t\tvar pxNorm : vec2<f32> = uniforms.pixelSize * norm;\n\t\t\tvar innerEdge1 : vec2<f32> = halfNorm - pxNorm;\n\t\t\tvar innerEdge1Sq : vec2<f32> = innerEdge1 * innerEdge1;\n\n\t\t\tvar innerF : f32 = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);\n\n\t\t\tvar innerEdge2 : vec2<f32> = halfNorm - pxNorm * uniforms.outlineThickness;\n\t\t\tvar innerEdge2Sq : vec2<f32> = innerEdge2 * innerEdge2;\n\t\t\tvar innerEdge3 : vec2<f32> = halfNorm - pxNorm * (uniforms.outlineThickness + 1.0);\n\t\t\tvar innerEdge3Sq : vec2<f32> = innerEdge3 * innerEdge3;\n\n\t\t\tvar outerF : f32 = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);\n\t\t\t\n\t\t\toutput.color = vec4<f32>(input.fragColor) * innerF * outerF;\n\t\t\treturn output;\n\t\t}`}static ON(){return"\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar f : f32 = 1.0 - abs(input.fragUV.y - 0.5) * 2.0;\n\t\t\toutput.color = vec4<f32>(input.fragColor) * f;\n\t\t\treturn output;\n\t\t}"}}}{const Wd=self.Cs,Ud=new Set(["nearest","bilinear","trilinear"]),Vd=new Set(["clamp-to-edge","repeat","mirror-repeat"]),zd=self.GPUTextureUsage,jd={vT:"clamp-to-edge",bT:"clamp-to-edge",xT:"trilinear",MT:0,GT:!0,hW:!1,aG:!1,oW:!1,aW:!1,uG:0,width:-1,height:-1},qd=[[1,["r8unorm","r8snorm","r8uint","r8sint","stencil8"]],[2,["r16uint","r16sint","r16float","rg8unorm","rg8snorm","rg8uint","rg8sint","depth16unorm"]],[3,["depth24plus"]],[4,["r32uint","r32sint","r32float","rg16uint","rg16sint","rg16float","rgba8unorm","rgba8unorm-srgb","rgba8snorm","rgba8uint","rgba8sint","bgra8unorm","bgra8unorm-srgb","rgb9e5ufloat","rgb10a2uint","rgb10a2unorm","rg11b10ufloat","depth24plus-stencil8","depth32float"]],[8,["rg32uint","rg32sint","rg32float","rgba16uint","rgba16sint","rgba16float"]],[16,["rgba32uint","rgba32sint","rgba32float"]],[5,["depth32float-stencil8"]]],Hd=new Map;for(const[Xd,Zd]of qd)for(const Kd of Zd)Hd.set(Kd,Xd);const Jd=new Set,Yd={CT:!0,flipY:!1};Wd.Xw.oN=class{constructor(t,s){this.mx=t,this.PT=null,this.lW="",this.uW=null,this.cW=null,this.fW=null,this.dW=null,this.Uy=0,this.Vy=0,this.RT=!0,this.AT="clamp-to-edge",this.FT="clamp-to-edge",this.OT="trilinear",this.DT=0,this.NT=!1,this.jp=0,this.pW=!1,this.wG=!1,this.mW=!1,this.gW=!1,this.SG=0,this.yW=0,this.wW=!0,this.SW=null,this.vW=0,this.bW=!!s,this.bW&&(this.lW=this.mx.KN(),this.pW=!0,this.wG=this.mx.sk(),this.OT=this.mx.hk(),this.cW=this.mx.qN({xT:this.OT}))}xW(t){if(this.AT=t.vT,this.FT=t.bT,this.OT=t.xT,this.DT=t.MT,this.NT=!!t.GT&&this.mx.Zb()&&"nearest"!==t.xT,this.pW=!!t.hW,this.wG=!!t.aG,this.mW=!!t.oW,this.gW=!!t.aW,this.SG=this.mx.xB(t.uG),!Ud.has(this.OT))throw new Error("invalid sampling");if(!Vd.has(this.AT)||!Vd.has(this.FT))throw new Error("invalid wrap mode");if(this.SG>=2&&this.wG)throw new Error("invalid use of multisampling");"nearest"===this.OT&&(this.DT=0),this.cW=this.mx.qN({vT:this.AT,bT:this.FT,xT:this.OT,MT:this.DT}),this.MW(),this.jp=1}MW(){const t=this.mx,s=t.YN();this.yW=0,this.pW?(this.yW=zd.RENDER_ATTACHMENT,this.wG&&(this.yW|=zd.TEXTURE_BINDING),this.gW&&(this.yW|=zd.COPY_DST),this.lW=this.mx.KN()):(this.yW=zd.COPY_DST|zd.TEXTURE_BINDING,this.lW=this.mx.ak()),this.mW&&(this.yW|=zd.COPY_SRC),this.PT=s.createTexture({size:[this.Uy,this.Vy,1],mipLevelCount:this.TW(),format:this.lW,usage:this.yW,sampleCount:this.SG>=2?this.SG:1}),this.uW=this.PT.createView();const i=[],e=Wd.Xw.cN.uN();for(let t=0;t<e;++t)i.push({binding:2*t,resource:this.cW},{binding:2*t+1,resource:this.uW});this.pW&&!this.wG||(this.fW=s.createBindGroup({layout:t.nk(),entries:i}),this.dW=s.createBindGroup({layout:t.rk(),entries:[{binding:0,resource:this.mx.qN({xT:this.mx.hk()})},{binding:1,resource:this.uW}]})),this.GW()&&this.gk(!0),Jd.add(this)}_W(){Jd.delete(this),this.SW&&this.SW.qn(),this.gk(!1),this.PT.destroy(),this.PT=null,this.uW=null,this.fW=null,this.dW=null}static pk(t){return t instanceof ImageBitmap||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas}static IW(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||t instanceof ImageData}EW(t){return[t.width||t.videoWidth,t.height||t.videoHeight]}TG(t,s){if(t&&!Wd.Xw.oN.pk(t))throw new TypeError("invalid texture source");if(s=Object.assign({},jd,s),this.PT)throw new Error("already created texture");if(this.RT=!0,t){const[s,i]=this.EW(t);this.Uy=s,this.Vy=i}else if(this.Uy=s.width,this.Vy=s.height,this.Uy<=0||this.Vy<=0)throw new Error("invalid texture size");if(this.xW(s),this.pW||this.wG)throw new Error("static texture cannot be render target");t&&this.PW(t)}PW(t,s=!0){if(this.NT)this.RW(t,this.TW(),s);else{const i=this.mx.YN(),e=i.createCommandEncoder(),n=i.createTexture({size:[this.Uy,this.Vy,1],mipLevelCount:1,format:this.lW,usage:zd.COPY_SRC|zd.COPY_DST|zd.RENDER_ATTACHMENT});this.AW(n,t,0,s),e.copyTextureToTexture({texture:n,mipLevel:0},{texture:this.PT,mipLevel:0},[this.Uy,this.Vy,1]),i.queue.submit([e.finish()]),n.destroy()}}AW(t,s,i,e=!0){const[n,r]=this.EW(s);this.mx.YN().queue.copyExternalImageToTexture({source:s},{texture:t,mipLevel:i,premultipliedAlpha:!!e},[n,r,1])}TW(){return this.NT?Math.floor(Math.log2(Math.max(this.Uy,this.Vy))+1):1}RW(t,s,i=!0){const e=this.mx.YN(),n=e.createTexture({size:[this.Uy,this.Vy,1],mipLevelCount:this.TW(),format:this.lW,usage:zd.COPY_DST|zd.COPY_SRC|zd.TEXTURE_BINDING|zd.RENDER_ATTACHMENT}),r=this.mx.DN(),h=r.getBindGroupLayout(0),o=this.mx.qN({xT:"bilinear"}),a=e.createCommandEncoder();this.AW(n,t,0,i),a.copyTextureToTexture({texture:n,mipLevel:0},{texture:this.PT,mipLevel:0},[this.Uy,this.Vy,1]);const l=[];for(let t=0;t<s;++t)l.push(n.createView({baseMipLevel:t,mipLevelCount:1}));let u=this.Uy,c=this.Vy;for(let t=1;t<s;++t){u/=2,c/=2;const s=Math.max(Math.floor(u),1),i=Math.max(Math.floor(c),1),f=a.beginRenderPass({colorAttachments:[{view:l[t],loadOp:"clear",clearValue:[0,0,0,0],storeOp:"store"}]}),d=e.createBindGroup({layout:h,entries:[{binding:0,resource:o},{binding:1,resource:l[t-1]}]});f.setPipeline(r),f.setBindGroup(0,d),f.draw(4),f.end(),a.copyTextureToTexture({texture:n,mipLevel:t},{texture:this.PT,mipLevel:t},[s,i,1])}e.queue.submit([a.finish()]),n.destroy()}HT(t,s,i){if(i=Object.assign({},jd,i),this.PT)throw new Error("already created texture");this.RT=!1,this.Uy=t,this.Vy=s,this.xW(i)}async KT(t,s){if(!Wd.Xw.oN.pk(t)&&!Wd.Xw.oN.IW(t))throw new Error("invalid texture source");if(!this.PT||this.jp<=0)throw new Error("texture not created");if(this.RT)throw new Error("cannot update static texture");if(s=Object.assign({},Yd,s),(Wd.Xw.oN.IW(t)||s.flipY||!s.CT)&&(t=await createImageBitmap(t,{premultiplyAlpha:s.CT?"premultiply":"none",imageOrientation:s.flipY?"flipY":"none"}),!this.PT))return;this.mx.Hb();const[i,e]=this.EW(t);this.Uy===i&&this.Vy===e||(this._W(),this.Uy=i,this.Vy=e,this.MW(),this.mx.wB(this)),this.PW(t,s.CT)}QT(){if(this.jp>0)throw new Error("texture still has references");if(!this.PT)throw new Error("already deleted texture");this._W()}zN(){this.wW=!1,this.gk(!1)}GW(){return this.RT&&this.wW&&!this.pW}gk(t){this.mx.gk(this,t)}FW(t,s){if(this.SW)throw new Error("already in a group");this.SW=t,this.vW=s,this.gk(!1)}OW(){this.SW=null,this.vW=0,this.GW()&&this.gk(!0)}UN(){return this.fW}VN(){return this.dW}mB(){return null!==this.SW?this.SW.DW():this.GW()?(this.mx.wk(this),null!==this.SW?this.SW.DW():null):null}yB(){return this.vW}My(){return this.bW?this.mx.My():this.Uy}Gy(){return this.bW?this.mx.Gy():this.Vy}Dx(){return this.mx}sG(){return this.PT}kk(){return this.uW}oB(){return this.lW}qN(){return this.cW}LW(){return this.OT}BG(){return"nearest"!==this.OT}fk(){return this.pW}WG(){return this.wG}aB(){return this.mW}iG(){this.jp++}eG(){if(this.jp<=0)throw new Error("no more references");this.jp--}nG(){return this.jp}bB(){return this.yW}HN(t,s){this.yW=t,this.lW=s}bk(){const t=this.mx,s=t.YN();this.PT=t.QN(),this.uW=t.tk(),t.sk()&&(this.dW=s.createBindGroup({layout:t.rk(),entries:[{binding:0,resource:this.cW},{binding:1,resource:this.uW}]}))}Gk(){this.PT=null,this.uW=null,this.dW=null}hG(){let t=this.My()*this.Gy()*Wd.Xw.oN.lk(this.oB());return this.NT&&(t+=Math.floor(t/3)),t}static rM(){}static oG(){return Jd.values()}static lk(t){const s=Hd.get(t);return"number"==typeof s?s:NaN}}}{const Qd=self.Cs;Qd.Xw.cN=class{constructor(t,s){if(s.length<2)throw new Error("invalid multi-texture group");this.mx=t,this.NW=s,this.kW=null;for(let t=0,i=s.length;t<i;++t)s[t].FW(this,t);s.length<Qd.Xw.cN.uN()&&this.mx.yk(this,!0),this.BW()}qn(){this.mx.yk(this,!1);for(const t of this.NW)t.OW();this.$W(),Qd.bh(this.NW),this.mx=null}BW(){this.$W();const t=this.mx.YN(),s=[],i=Qd.Xw.cN.uN();for(let t=0;t<i;++t){const i=this.NW[Math.min(t,this.NW.length-1)];s.push({binding:2*t,resource:i.qN()},{binding:2*t+1,resource:i.kk()})}this.kW=t.createBindGroup({layout:this.mx.nk(),entries:s})}$W(){null!==this.kW&&this.mx.SB(this.kW),this.kW=null}DW(){return this.kW}static uN(){return 14}}}{const tp=self.Cs,sp=self.ls,ip=sp.ws,ep=sp.ds,np={xT:"trilinear",alpha:!0,depth:!1,aG:!0,oW:!1,aW:!1,lG:!0,uG:0},rp=new Set;tp.Xw.aN=class{constructor(t,s){this.mx=t,this.WW=!!s,this.yG=!!s&&t.uk(),this.UW=null,this.mG=!0,this.SG=0,this.VW=!1,this.zW=tp.jn(tp.To),this.vG=ep.create(),this.bG=0,this.xG=0,this.MG=0,this.WW&&(this.UW=tp.jn(tp.Xw.oN,t,!0))}TG(t,s,i){if(i=Object.assign({},np,i),this.UW)throw new Error("already created render target");if(this.yG=!!i.depth,this.mG=!!i.lG,this.SG=this.mx.xB(i.uG),this.SG>=2&&i.aG)throw new Error("invalid use of multisampling");this.UW=this.mx._G(t,s,{xT:i.xT,GT:!1,hW:!0,aG:i.aG,oW:i.oW,aW:i.aW,uG:this.SG}),this.GG(),rp.add(this)}QT(){rp.delete(this),this.UW._W(),this.UW=null,this.mx=null}EG(t,s){if(t===this.My()&&s===this.Gy())return;const i=this.UW.LW(),e=this.UW.WG(),n=this.UW.aB();this.UW._W(),this.UW=null,this.UW=this.mx._G(t,s,{xT:i,GT:!1,hW:!0,aG:e,oW:n}),this.GG()}kk(){return this.WW?this.mx.tk():this.UW.kk()}GG(){this.mx.dv(this.vG,this.My()/this.Gy()),this.bG=this.mx.lv(),this.xG=this.mx.rv(),this.MG=this.mx.ov()}VG(){return this.mG}ck(){return this.WW}UG(){return this.yG}My(){return this.WW?this.mx.My():this.UW.My()}Gy(){return this.WW?this.mx.Gy():this.UW.Gy()}NG(){if(this.UW)return this.UW;throw new Error("no texture")}Dx(){return this.mx}zG(){return this.SG}kG(){return this.mx.lv()===this.bG&&this.mx.rv()===this.xG&&this.mx.ov()===this.MG||this.GG(),this.vG}BG(){return this.UW.BG()}WG(){return this.UW.WG()}aB(){return this.UW.aB()}qG(t){return"nearest"!==(t=Object.assign({},np,t)).xT===this.BG()&&!!t.aG===this.WG()&&!!t.oW===this.aB()&&!!t.depth===this.UG()&&("number"==typeof t.width||"number"==typeof t.height?!this.VG()&&this.My()===Math.floor(t.width)&&this.Gy()===Math.floor(t.height):this.VG())}Wk(t){this.VW=!!t}xk(){return this.VW}Bk(){return this.zW}static rM(){}static XG(){return rp.values()}}}{const hp=self.Cs;hp.Xw.Ck=class{constructor(t,s){this.mx=t,this.qS=this.mx.Jb(),this.jW=s;const i=this.mx.YN();this.qW=i.createQuerySet({count:this.jW,type:"timestamp"});const e=self.GPUBufferUsage;this.HW=i.createBuffer({size:this.JW(),usage:e.QUERY_RESOLVE|e.COPY_SRC}),this.YW=i.createBuffer({size:this.JW(),usage:e.COPY_DST|e.MAP_READ}),this.zR=null}JW(){return 8*this.jW}Uk(){return this.qW}zk(t){t.resolveQuerySet(this.qW,0,this.jW,this.HW,0),t.copyBufferToBuffer(this.HW,0,this.YW,0,this.JW())}async qk(){const t=this.JW();await this.YW.mapAsync(self.GPUMapMode.READ,0,t);const s=this.YW.getMappedRange(0,t);this.zR=new BigUint64Array(s.slice(0)),this.YW.destroy(),this.YW=null,this.HW.destroy(),this.HW=null,this.qW.destroy(),this.qW=null}HR(){return null!==this.zR}JR(){if(!this.zR)throw new Error("not yet got result");return this.zR}Jb(){return this.qS}}}{const op=self.Cs,ap={XW:null,ZW:null,KW:null,getTime:null,QW:null};op.Xw.tU=class{constructor(t){t=Object.assign({},ap,t),this.sU=t.XW,this.iU=t.ZW,this.eU=t.KW,this.nU=t.getTime,this.rU=t.QW,this.hU=null,this.oU=new Set}aU(t){this.oU.add(t)}lU(t){this.oU.delete(t)}rM(){this.hU=null;for(const t of this.oU)t.rM()}uU(t){return this.sU?this.sU(t):[t.My(),t.Gy()]}_O(t){return this.iU(t)}cU(t,s){this.eU(t,s)}fU(){return this.nU()}Op(t){this.rU(t)}dU(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.hU||this.hU.My()===s&&this.hU.Gy()===i||(t.PG(this.hU),this.hU=null),null===this.hU&&(this.hU=t.EO(null,{width:s,height:i,xT:"nearest",GT:!1})),this.hU}}}{const lp=self.Cs,up=self.assert,cp=self.ls,fp=cp.ds,dp=lp.jn(lp.Rect),pp=lp.jn(lp.Rect),mp=lp.jn(lp.Rect),gp=lp.jn(lp.Rect),yp=fp.create(),wp=fp.create(),Sp={pU:null,mU:null,gU:null,yU:!1},vp={wU:null,SU:!1,vU:!1,bU:!1,xU:!1,MU:!1,TU:!1};lp.Xw.GU=class{constructor(t,s){s=Object.assign({},Sp,s),this.Vp=t,this._U=s.pU,this.CU=s.mU,this.IU=s.gU,this.EU=null,this.PU=[],this.RU=[],this.AU=[],this.FU=!1,this.Zx=0,this.OU=!1,this.DU=!1,this.LU=!1,this.NU=!1,this.kU=!1,this.BU=!1,this.MA=!1,this.$U=!1,this.WU=!1,this.UU=!1,this.VU=!1,this.zU=!1,this.jU=0,this.qU=[null,null,null],this.HU=!!s.yU,this.JU=0,this.YU=0,this.XU=0,this.ZU=0,this.KU=null,this.QU=null,this.tV=lp.jn(lp.Rect),this.sV=lp.jn(lp.Rect),this.iV=lp.jn(lp.Rect),this.eV=lp.jn(lp.Rect),this.nV=lp.jn(lp.Rect),this.rV=1,this.hV=1,this.oV=0,this.aV=0,this.lV=null,this.uV=null,this.cV=0,this.fV=0,this.dV=0,this.pV=0,this.mV=!1,this.vG=fp.create(),this.gV=fp.create(),this.Vp.aU(this)}qn(){this.Vp.lU(this),lp.bh(this.AU),lp.bh(this.PU),lp.bh(this.RU),this.KU=null,this.QU=null,this._U=null,this.CU=null,this.IU=null}rM(){this.FU=!0,lp.bh(this.AU),lp.bh(this.PU),lp.bh(this.RU)}yV(){return this.FU}wV(t,s){if(s=Object.assign({},vp,s),lp.bh(this.AU),this.JU=0,this.YU=0,this.OU=!1,this.DU=!1,this.LU=!1,this.NU=!1,this.kU=!1,this.BU=!1,this.jU=0,this.zU=!!s.xU,this.VU=!!s.TU,this.FU=!1,lp.Gh(this.PU,t),0===t.length)return;if(s.wU){if(s.wU.length!==t.length)throw new Error("incorrect indexMap length");lp.Gh(this.RU,s.wU)}else{lp.bh(this.RU);for(let s=0,i=t.length;s<i;++s)this.RU.push(s)}for(const s of t)this.JU+=s.Nx(),this.YU+=s.kx(),s.Vx()&&(this.OU=!0),s.jx()&&(this.DU=!0),s.zx()&&(this.LU=!0),s.Bx()&&(this.NU=!0),s.Jx()&&(this.kU=!0);this.BU=this.SV(t[0].Dx());const i=this.vV(t[0],s),e=this.bV(t.at(-1),s);if(1===t.length&&!i&&!e)return void(this.UU=!0);this.UU=!1;let n=0;i&&(this.jU=1,this.AU.push(lp.jn(lp.Xw.GU.MV.xV,this,-1,1)),n=1);for(let s=0,r=t.length;s<r;++s)if(0!==s||i){let t=1===n?2:1;s!==r-1||e||(t=0),this.jU=Math.max(this.jU,t),this.AU.push(lp.jn(lp.Xw.GU.MV.TV,this,n,t,s)),n=t}else this.jU=1,this.AU.push(lp.jn(lp.Xw.GU.MV.GV,this,-1,1,s)),n=1;e&&this.AU.push(lp.jn(lp.Xw.GU.MV._V,this,n,0))}vV(t,s){return!!(s.SU||t.$x()||s.bU&&!t.Ux()||t.jx()&&!this.VU||0!==this.JU||0!==this.YU)||(t.Dx().tx()?t.zx()&&(s.MU||s.xU)||t.qx()&&s.xU:t.zx()&&!this.BU&&s.MU)}bV(t,s){return!!s.vU||(t.Dx().tx()?t.zx()||t.Bx():(t.zx()||t.Bx())&&this.CV())}SV(t){return t.pv()&&this.LU&&!this.NU}IV(t,s,i){t.pv()&&null===s&&(s=t.hB()),this.lV=s,this.KU=i.EV||null,this.QU=i.PV||null,this.Zx=i.RV||0,this.rV=i.devicePixelRatio||1,this.hV=i.DB||1,this.oV=i.LB||0,this.aV="number"==typeof i.time?i.time:this.Vp.fU(),this.MA=!1,t.DF(),this.OU&&this.AV();let e=!1;if(this.FV()&&(this.OV(t,i),e=!0,this.uV=this.Vp.dU(t,this.XU,this.ZU),dp.S(this.sV),dp.bl(),t.pv()&&t.Vk(this.lV),t.vB(this.lV.NG(),this.uV,dp.Qa(),dp.tl(),dp.width(),dp.height())),this.UU)this.DV(t,i);else if(e||this.OV(t,i),0!==this.iV.width()||0!==this.iV.height()){t.JF(),t.Wb(),t.UF(),t.tb(0),t.ib(0),this.EU=i.LV||null,this.cV=i.NV||0,this.fV=i.kV||0,this.dV=i.BV||0,this.pV=i.$V||0,this.mV=!!i.WV,this.UV(t),this.qU[0]=s,this.qU[1]=this.jU>=1?this.VV():null,this.qU[2]=2===this.jU?this.VV():null;for(const s of this.AU){const i=this.zV(s.jV()),e=this.zV(s.qV());t.pv()?s.HV(t,i,e):s.JV(t,i,e)}t.zF(null),this.qU[1]&&this.YV(this.qU[1]),this.qU[2]&&this.YV(this.qU[2]),this.qU.fill(null),this.XV(t),this.lV=null,this.uV=null,this.KU=null,this.QU=null,this.EU=null}}OV(t,s){const[i,e]=this.Vp.uU(t);this.ZV(t,i,e),this.KV(s)}ZV(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.XU===s&&this.ZU===i||this.QV(t,s,i,0,0,this.vG,this.gV),this.XU=s,this.ZU=i}QV(t,s,i,e,n,r,h){const o=s/2+e,a=i/2+n;t.dv(r,s/i);const l=t.yv(o,a,t.QS(i),o,a,0,i);fp.S(h,l)}KV(t){if(this.tV.S(t.OB),t.tz?this.sV.S(t.tz):this.sV.set(0,0,this.XU,this.ZU),this.UU){const s=t.NV??0,i=t.kV??0;this.sV.offset(-s,-i)}this.iV.S(this.sV),this.iV.St(this.XU,this.ZU);const s=this.hV*this.rV;this.sV.fl(this.JU*s,this.YU*s),this.nV.S(this.sV),this.nV.St(this.XU,this.ZU),this.sV.xl(0,0,this.XU,this.ZU),this.eV.S(this.sV),this.eV.St(this.XU,this.ZU)}UV(t){if(this.$U=t.MO(),this.WU=t.BO(),this.VU)t.xO(!1),this.DU&&t.TO(!0);else{if(dp.S(this.sV),t.tx()){const t=this.hV*this.rV;dp.fl(Math.max(this.JU,1)*t,Math.max(this.YU,1)*t),dp.bl(),dp.Zn(0,0,this.XU,this.ZU)}else dp.bl();t.GO(dp.Qa(),dp.tl(),dp.width(),dp.height(),this.ZU)}}sz(t){t.UF(),this.VU||(this.WU?t.$O(!1):t.xO(!1),this.DU&&t.TO(!0)),t.pv()&&t.dB(!0)}XV(t){t.TO(!1),this.WU?t.kO(this.$U):t.xO(this.$U),this.VU||t.CO(),t.pv()&&t.dB(!1),this.MA=t.LF()}iz(){this.nV.Zn(0,0,1,1)}zV(t){return t<0?null:this.qU[t]}VV(){return this.Vp._O(this)}ez(){return this.lV}YV(t){this.Vp.cU(t,this)}nz(t){return this.PU[t]}rz(t){this.EU?this.EU(this,t,()=>this._U(t,this)):this._U(t,this),this.UU||this.sz(t)}hz(t){if(this.VU)return!0;if(0!==this.cV||0!==this.fV||0!==this.dV||0!==this.pV)return!1;const[s,i]=t.oO(t._O());return s===this.XU&&i===this.ZU}oz(t,s){let i=this.vG,e=this.gV;if(s&&!this.hz(t)){let s,n;i=yp,e=wp,0!==this.dV&&0!==this.pV?[s,n]=[this.dV,this.pV]:[s,n]=t.oO(t._O()),this.QV(t,s,n,this.cV,this.fV,i,e),this.VU||t.CO()}t.IF(i),t.OF(e)}AV(){this.Vp.Op(this)}az(t,s){return this.IU(this.RU[t],s)}lz(t,s){let i=this.nV,e=this.eV,n=this.iV;t.tx()&&(pp.S(i),pp.ml(1),i=pp,mp.S(e),mp.ml(1),e=mp,gp.S(n),gp.ml(1),n=gp),this.uz(t,s,e,n,i,1/this.XU,1/this.ZU)}cz(t,s){let i=this.eV,e=this.iV,n=1/this.XU,r=1/this.ZU;if(this.CU){let{fz:t,dz:s,pz:h}=this.CU(this.KU);t||(dp.set(0,0,0,0),t=dp),s||(s=this.XU),h||(h=this.ZU),i=t,e=t,n=1/s,r=1/h}else t.tx()&&(mp.S(i),mp.ml(1),i=mp,gp.S(e),gp.ml(1),e=gp);let h=this.nV;t.tx()&&(h=pp,h.S(this.nV),h.ml(1)),this.uz(t,s,i,e,h,n,r),t.pv()&&this.kU&&t.VB(this.zU)}mz(t){return this.LU?t.pv()?this.FV()?this.uV:this.lV.NG():this.lV:null}uz(t,s,i,e,n,r,h){t.yO(this.mz(t),n,i,e,this.tV,r,h,this.rV,this.hV,this.oV,this.aV),t.wO(this.az(s,t))}DV(t,s){const i=this.PU[0],e=t.MO(),n=i.jx();n&&(t.xO(!1),t.TO(!0),this.nV.set(0,0,1,1),this.iV.set(0,0,1,1)),t.Mv(i),t.eM(this.Zx),t.AO(this.lV),t.Wb();let r=0,h=1;if(this.iV.set(0,0,1,1),i.qx()&&this.CU){const{fz:t,dz:s,pz:i}=this.CU(this.KU);t&&this.iV.S(t),r=Number.isFinite(s)?1/s:0,h=Number.isFinite(i)?1/i:0}else{const[s,i]=this.Vp.uU(t);r=1/s,h=1/i}s.OB?this.tV.S(s.OB):this.tV.set(0,0,0,0),t.yO(this.mz(t),this.nV,this.iV,this.iV,this.tV,r,h,this.rV,this.hV,this.oV,this.aV),t.wO(this.az(0,t)),t.pv()&&this.kU&&t.VB(this.zU),t.tb(0),this.rz(t),n&&(t.TO(!1),t.xO(e))}FV(){return this.BU}CV(){return!this.BU}gz(){return this.LU}yz(){return!!this.UU&&!this.FV()}wz(){return this.VU}Sz(){return this.KU}vz(){return this.QU}bz(){return this.Zx}xz(){return this.mV}LF(){return this.MA}Mz(){return this.sV}Tz(){return this.eV}Gz(){return this.HU}async _z(t,s,i){}}}{const bp=self.Cs;bp.Xw.GU.MV=class{constructor(t,s,i,e=-1){this.Cz=t,this.Iz=s,this.Ez=i,this.Vw=e}Pz(){return this.Cz}jV(){return this.Iz}qV(){return this.Ez}Rz(){return this.Vw}rC(){return this.Pz().nz(this.Rz())}JV(t,s,i){}HV(t,s,i){}}}{const xp=self.Cs;xp.Xw.GU.MV.xV=class extends xp.Xw.GU.MV{constructor(t,s,i,e){super(t,s,i,e)}JV(t,s,i){const e=this.Pz();t.JF(),t.Wb(),t.xv(),t.AO(i,e.xz()),t.SO(0,0,0,0),e.rz(t),e.iz()}HV(t,s,i){const e=this.Pz();t.JF(),t.Wb(),t.xv(),t.AO(i,!1),t.SO(0,0,0,0),e.rz(t),e.iz()}}}{const Mp=self.Cs,Tp=Mp.jn(Mp.Rect),Gp=Mp.jn(Mp.El);Mp.Xw.GU.MV._V=class extends Mp.Xw.GU.MV{constructor(t,s,i,e){super(t,s,i,e)}JV(t,s,i){const e=this.Pz();t.xv(),t.AO(i),e.oz(t,!0),t.eM(e.bz()),t.zF(s.NG()),Gp.Xl(e.Mz()),Tp.S(e.Tz()),Tp.ml(1),t.pb(Gp,Tp),e.Gz()&&t.DO(s)}HV(t,s,i){const e=this.Pz();t.xv(),t.AO(i,!1),e.hz(t)?Gp.Xl(e.Tz()):(t.dB(!1),e.oz(t,!0),Gp.Xl(e.Mz())),t.mk(null),t.eM(e.bz()),t.zF(s.NG()),e.wz()?t.hO():t.pb(Gp,e.Tz())}}}{const _p=self.Cs;_p.Xw.GU.MV.GV=class extends _p.Xw.GU.MV{constructor(t,s,i,e){super(t,s,i,e)}JV(t,s,i){const e=this.Pz();t.AO(i,e.xz()),t.SO(0,0,0,0),t.KF(),t.Mv(this.rC()),e.cz(t,this.Rz()),e.rz(t),e.iz()}HV(t,s,i){const e=this.Pz();t.AO(i,!1),t.SO(0,0,0,0),t.KF(),t.Mv(this.rC()),e.cz(t,this.Rz()),e.rz(t),e.iz()}}}{const Cp=self.Cs,Ip=Cp.jn(Cp.Rect),Ep=Cp.jn(Cp.El);Cp.Xw.GU.MV.TV=class extends Cp.Xw.GU.MV{constructor(t,s,i,e){super(t,s,i,e)}JV(t,s,i){const e=this.Pz();t.AO(i);const n=0===this.qV();n?t.eM(e.bz()):(t.SO(0,0,0,0),t.KF()),t.Mv(this.rC()),e.lz(t,this.Rz()),t.zF(s.NG()),e.oz(t,n),Ep.Xl(e.Mz()),Ip.S(e.Tz()),Ip.ml(1),t.pb(Ep,Ip),e.Gz()&&t.DO(s)}HV(t,s,i){const e=this.Pz();t.AO(i,!1),0===this.qV()?(t.eM(e.bz()),t.mk(null),e.hz(t)?Ep.Xl(e.Tz()):(t.dB(!1),e.oz(t,!0),Ep.Xl(e.Mz()))):(t.SO(0,0,0,0),t.KF(),Ep.Xl(e.Tz())),t.Mv(this.rC()),e.lz(t,this.Rz()),t.zF(s.NG()),e.wz()?t.hO():t.pb(Ep,e.Tz())}}}{let Pp=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]};SortZOrderList=Pp;const Rp=self.Cs,Ap=self.ks;let Fp=null;const Op=new Set,Dp=[],Lp=[];let Np=!1,kp=!1,Bp=!1;const $p=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.Az=class{constructor(t){Fp=t,Object.defineProperties(this,{Fz:{value:Fp.Dz().Oz(),writable:!1},Lz:{value:Fp.kz().Nz(),writable:!1},Bz:{value:{},writable:!1},$z:{value:{},writable:!1},Wz:{value:Fp.Uz(),writable:!1},Vz:{value:Fp.zz(),writable:!1},jz:{value:Fp.qz(),writable:!1},Jz:{value:Fp.Yz(),writable:!1},Xz:{value:new Date(Fp.Zz()),writable:!1},storage:{value:new self.Kz(Fp),writable:!1},Qz:{value:Fp.tj(),writable:!1},sj:{value:Fp.ij(),writable:!1},ej:{value:Fp.nj(),writable:!1},xT:{value:Fp.LW(),writable:!1},rj:{value:new self.hj(t),writable:!1},oj:{value:new self.aj(t),writable:!1}}),Fp.lj().addEventListener("keydown",t=>{Op.has(t.key)?t.stopPropagation():Op.add(t.key)}),Fp.lj().addEventListener("keyup",t=>Op.delete(t.key)),Fp.Sf().addEventListener("window-blur",()=>Op.clear()),Fp.tj()&&(self.alert=t=>(Np||(Np=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}uj(t){Object.defineProperties(this.Bz,t)}cj(t){Object.defineProperties(this.$z,t)}addEventListener(t,s){Fp.lj().addEventListener(t,s)}removeEventListener(t,s){Fp.lj().removeEventListener(t,s)}fj(t,...s){Ap.ue(t);const i=Fp.dj(),e=i.pj(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.Cu())return e.mj();if(s.length<e.gj())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.gj()} expected)`);const n=e.yj();let r=n.wj();const h=i.Sj();if(h){r=r.slice(0);const t=new Set(r);for(const s of h.wj())t.has(s)||(r.push(s),t.add(s));for(const s of i.vj())t.has(s)||(r.push(s),t.add(s))}return n.bj(r,e.xj(),e.Mj(),e.mj(),...s)}Tj(t){const s=Fp._j().Gj();if(!s)throw new Error("not in a function which returns a value");switch(s.Cj()){case 1:"number"==typeof t&&s.Ij(t);break;case 2:"string"==typeof t&&s.Ij(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.Ij(t)}}signal(t){Ap.ue(t),Fp.dj().Ej(t)}Pj(t){return Ap.ue(t),Fp.dj().Rj(t)}Aj(){return[Fp.ij(),Fp.nj()]}get Fj(){return Fp.Oj()}get Dj(){return Fp.Lj()}get Nj(){return Fp.kj()}get Bj(){return Fp.$j()}get Wj(){return Fp.Uj()}get Vj(){return Fp.zj()}get jj(){return Fp.qj()}set jj(t){Ap.he(t),Fp.Hj(t)}get Jj(){return kp||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),kp=!0),Fp.Yj()}get framesPerSecond(){return Fp.Yj()}get Xj(){return Fp.Zj()}get Kj(){return Fp.Qj()}get tq(){return Fp.sq()}get iq(){return Fp.eq()}set iq(t){if(!$p.has(t))throw new Error("invalid framerate mode");Fp.nq(t)}get rq(){return Fp.hq()}set rq(t){Ap.he(t),Fp.oq(t)}get aq(){return Fp.lq()}set aq(t){Fp.uq(t)}set cq(t){Fp.fq(!!t)}get cq(){return Fp.pq()}get mq(){return Fp.Dz().gq()}get yq(){return Fp.Dz().wq()}random(){return Fp.Sq()}get layout(){const t=Fp.vq();if(!t)throw new Error("no layout is running - make sure a layout is loaded before accessing");return t.bq()}xq(t){const s=Fp.Mq();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.Tq(t),!i)throw new Error("invalid layout");return i.bq()}Gq(){return Fp.Mq()._q().map(t=>t.bq())}Cq(t){const s=Fp.Mq();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.Tq(t),!i)throw new Error("invalid layout");s.Iq()||s.Eq(i)}get keyboard(){const t=Fp.Pq().keyboard;if(!t)throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first");return t}get Rq(){const t=Fp.Pq().Rq;if(!t)throw new Error("runtime.mouse used but Mouse object missing - add it to your project first");return t}get Aq(){const t=Fp.Pq().Aq;if(!t)throw new Error("runtime.touch used but Touch object missing - add it to your project first");return t}get Fq(){const t=Fp.Pq().Fq;if(!t)throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first");return t}get rI(){return Fp.Dq().Oq()}Lq(t,s){Ap.ue(t),Ap.ue(s),Fp.Nq(t,s)}kq(t){Ap.he(t);const s=Fp.Bq(t);return s?s.$q():null}Wq(t,s){Ap.Ae(s);const i=Fp.Uq();for(const s of t){const t=Fp.Vq(s),i=t.zq();Dp.push([i.jq().Rz(),i.qq()]),Lp.push(t)}if(0===Dp.length)return;Dp.sort(Pp),Lp.sort((t,i)=>s(t.$q(),i.$q()));let e=!1;for(let t=0,s=Dp.length;t<s;++t){const s=Lp[t],n=i.Hq(Dp[t][0]),r=Dp[t][1],h=n.Jq();h[r]!==s&&(h[r]=s,s.zq().Yq(n,!0),n.Xq(s),e=!0)}e&&Fp.Zq(),Rp.bh(Dp),Rp.bh(Lp)}async Kq(t,s){Bp||(console.warn("IRuntime.createWorker() is deprecated. All modern browsers now support nested workers so this method is no longer needed."),Bp=!0);const i=new MessageChannel,e=i.port1,n=i.port2;return await Fp.Qq("runtime","script-create-worker",{url:t,opts:s,port2:n},[n]),e}alert(t){return Fp.Qq("runtime","alert",{message:t+(Fp.tj()?" [via Web Worker]":"")})}tH(t){return Ap.he(t),Fp.sH(t)}iH(t){Fp.eH(t)}async nH(t,s,i){Ap.ce(t),Ap.ie(s),Ap.$e(i,DOMRect),i||(i=new DOMRect(0,0,0,0));const e=Fp.Dq();if(!e)return;Fp.Zq();const n=await e.rH(t||"image/png",s,i.x,i.y,i.width,i.height);return await Fp.hH(Rp.uH.lH.aH.oH,null),n}}}{const Wp=self.Cs,Up=self.ks;let Vp=null;self.cH=class{constructor(t){Vp=t,Object.defineProperties(this,{fH:{value:!0,writable:!1}})}dH(t){const s=self.mH.pH(t);if(!s)throw new Error("invalid IImageInfo");s.gH(Vp.yH())}wH(t){return Vp.io(t)}SH(t){return Vp.eo(t)}vH(t){return Vp.no(t)}bH(t){return Vp.ro(t)}xH(t){return Promise.resolve(Vp.MH(t))}TH(t){return Vp.GH(t)}get _H(){return Vp.CH()}async IH(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}EH(...t){return Vp.PH(...t)}RH(t){return Vp.AH(t)}FH(t){return Vp.OH(t)}get DH(){return Vp.LH()}}}{const zp=self.Cs,jp=self.ks;let qp=null;self.NH=class{constructor(t){qp=t,Object.defineProperties(this,{runtime:{value:qp.yH(),writable:!1}})}kH(t,s){const i=qp.yH(),e=i.Vq(t),n=i.Vq(s);return qp.BH(e,n)}$H(t,s){const i=qp.yH(),e=i.Vq(t);for(const t of s){const s=i.Vq(t);if(qp.BH(e,s))return t}return null}WH(t){const s=qp.yH().Vq(t),i=qp.UH(s);return i?i.$q():null}VH(t,s){if(jp.he(t),jp.he(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");qp.zH(t,s)}jH(){return qp.qH()}HH(t,s){const i=qp.yH();let e;e=Array.isArray(t)?t.map(t=>i.JH(t)):[i.JH(t)];const n=zp.Rect.Za(s),r=[];return qp.YH(null,e,n,r),r.map(t=>t.$q())}}}{const Hp=self.Cs,Jp=self.ks;let Yp=null;const Xp=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),Zp=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["Firefox","firefox"],["Safari","safari"]]),Kp=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.hj=class{constructor(t){Yp=t,Object.defineProperties(this,{XH:{value:Hp.Ks.oi,writable:!1},os:{value:Xp.get(Hp.Ks.Qs)||"unknown",writable:!1},ZH:{value:Hp.Ks.ti,writable:!1},browser:{value:Zp.get(Hp.Ks.si)||"unknown",writable:!1},KH:{value:Hp.Ks.ii,writable:!1},QH:{value:Kp.get(Hp.Ks.ni)||"unknown",writable:!1}})}get tJ(){let t=Yp.sJ();return Yp.iJ()?t="windows-webview2":"cordova"===t?t="Android"===Hp.Ks.Qs?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get rI(){return Yp.Dq().eJ()}get nJ(){return Yp.Dq().rJ()}get hJ(){return Yp.Dq().oJ()}get aJ(){return Yp.Dq().lJ()}get uJ(){return Yp.Dq().cJ()}get fJ(){return Yp.Dq().dJ()}get pJ(){return Yp.Dq().mJ()}get gJ(){return Yp.Dq().yJ()}get devicePixelRatio(){return Yp.wJ()}}}{const Qp=self.Cs,tm=self.ks;self.Kz=class{constructor(t){this.SJ=t.vJ()}getItem(t){return tm.ue(t),this.SJ.getItem(t)}setItem(t,s){return tm.ue(t),this.SJ.setItem(t,s)}removeItem(t){return tm.ue(t),this.SJ.removeItem(t)}clear(){return this.SJ.clear()}keys(){return this.SJ.keys()}}}{const sm=self.Cs,im=self.ks,em=sm.Is();self.bJ=class{#t;constructor(){const t=sm.MJ.xJ(em);this.#t=t,Object.defineProperties(this,{runtime:{value:t.yH().TJ(),writable:!1},id:{value:t.GJ(),writable:!1},_J:{value:t.CJ(),writable:!1},IJ:{value:t.EJ(),writable:!1},PJ:{value:t.RJ(),writable:!1},AJ:{value:t.FJ(),writable:!1},OJ:{value:t.DJ(),writable:!1},LJ:{value:t.NJ(),writable:!1},kJ:{value:t.BJ(),writable:!1},$J:{value:t.WJ(),writable:!1}}),t.yH().UJ(this,t)}static VJ(t){if(!t)return null;const s=sm.MJ.zJ(t);return s?s.jJ():null}qJ(){return this.#t.JJ().HJ()}YJ(){return this.#t.XJ().$q()}}}{const nm=globalThis.Cs,rm=globalThis.ks,hm=nm.Is();globalThis.ZJ=class{#t;constructor(){const t=nm.MJ.xJ(hm);this.#t=t,Object.defineProperties(this,{name:{value:t.Pc(),writable:!1},runtime:{value:t.yH().TJ(),writable:!1},KJ:{value:t.QJ().jJ(),writable:!1}}),t.yH().UJ(this,t)}addEventListener(t,s){rm.ue(t),rm.Ae(s),this.#t.lj().addEventListener(t,s)}removeEventListener(t,s){rm.ue(t),rm.Ae(s),this.#t.lj().removeEventListener(t,s)}tY(){return[...this.sY()]}iY(){return nm.$h(this.sY())}eY(){return[...this.nY()]}rY(){return nm.$h(this.nY())}hY(t){const s=this.#t,i=s.yH().oY(t),e=s.aY(i);return e?e.$q():null}*sY(){for(const t of this.#t.lY())yield t.$q()}*nY(){for(const t of this.#t.cY().uY())yield t.$q()}}}{const om=globalThis.Cs,am=globalThis.ks,lm=om.Is();globalThis.fY=class extends globalThis.ZJ{#t;constructor(){super();const t=om.MJ.xJ(lm);this.#t=t}dY(t){am.Ae(t);const s=this.#t;if(s.pY()>0)throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.mY(t)}_i(t,s,i,e,n){if(am.se(s),am.se(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#t,h=r.yH(),o=h.vq().jq(t);if(!o)throw new Error("invalid layer");const a=h.gY(r,o,s,i,e,n);e&&o.yY(a);const l=h.dj();return l.wY(!0),a.SY(),l.wY(!1),l.vY()||h.Mq().bY()||h.xY(),a.$q()}MY(){return this.#t.TY().map(t=>t.HJ())}*GY(){for(const t of this.#t.TY())yield t.HJ()}_Y(t){return am.Be(t,globalThis.CY),t.IY(this)}}}{const um=globalThis.Cs,cm=globalThis.ks,fm=globalThis.fY,dm=um.Is();globalThis.CY=class extends globalThis.ZJ{#t;constructor(){super();const t=um.MJ.xJ(dm);this.#t=t}EY(){return this.#t.PY().map(t=>t.HJ())}*RY(){for(const t of this.#t.PY())yield t.HJ()}IY(t){cm.Be(t,fm);const s=this.#t,i=s.yH().JH(t);return s.AY(i)}}}{const pm=self.Cs,mm=self.ks,gm=["above","below","top-sublayer","bottom-sublayer"];self.FY=class{#t;constructor(t){this.#t=t;const s=[],i=t.OY(),e=i.DY().length;for(let t=0;t<e;++t)s.push(new self.LY(i,t));Object.defineProperties(this,{runtime:{value:t.yH().TJ(),writable:!1},name:{value:t.Pc(),writable:!1},index:{value:t.Rz(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){mm.ue(t),mm.Ae(s),this.#t.lj().addEventListener(t,s)}removeEventListener(t,s){mm.ue(t),mm.Ae(s),this.#t.lj().removeEventListener(t,s)}get width(){return this.#t.My()}set width(t){mm.he(t),this.#t.hy(t)}get height(){return this.#t.Gy()}set height(t){mm.he(t),this.#t.oy(t)}NY(t,s){mm.he(t),mm.he(s);const i=this.#t;i.hy(t),i.oy(s)}getSize(){const t=this.#t;return[t.My(),t.Gy()]}set scale(t){mm.he(t),this.#t.kY(t)}get scale(){return this.#t.BY()}set angle(t){mm.he(t),this.#t.$Y(t)}get angle(){return this.#t.WY()}set scrollX(t){mm.se(t),this.#t.UY(t)}get scrollX(){return this.#t.VY()}set scrollY(t){mm.se(t),this.#t.zY(t)}get scrollY(){return this.#t.jY()}scrollTo(t,s){mm.se(t),mm.se(s);const i=this.#t;i.UY(t),i.zY(s)}qY(){const t=this.#t;return[t.VY(),t.jY()]}get HY(){return this.#t.JY()}YY(t){const s=this.#t;let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return i=s.jq(t),i?i.XY():null}ZY(){return this.#t.KY().map(t=>t.XY())}*QY(){for(const t of this.#t.QY())yield t.XY()}tX(t,s,i){const e=this.#t,n=self.sX;mm.ue(t),mm.$e(s,n);const r=s?e.yH().iX(s):null,h=gm.indexOf(i);if(h<0)throw new Error("invalid location");e.eX(t,r,h)}nX(t,s,i){const e=this.#t,n=e.yH(),r=self.sX;mm.Be(t,r);const h=n.iX(t);if(!h)throw new Error("invalid layer");mm.$e(s,r);const o=s?n.iX(s):null,a=gm.indexOf(i);if(a<0)throw new Error("invalid location");e.rX(h,o,a)}hX(t){const s=this.#t,i=self.sX;mm.Be(t,i);const e=s.yH().iX(t);if(!e)throw new Error("invalid layer");const n=e.yH();s.oX(e),n.dj().vY()||n.xY()}aX(){const t=this.#t,s=t.yH();t.lX(),s.dj().vY()||s.xY()}uX(t,s){mm.he(t),mm.he(s),this.#t.cX(t,s)}fX(){return this.#t.dX()}set V(t){mm.ue(t);const s=this.#t;if("perspective"===t)s.pX();else{if("orthographic"!==t)throw new Error("invalid projection");s.mX()}}get V(){return this.#t.gX()?"orthographic":"perspective"}}}{const ym=self.Cs,wm=self.ks,Sm=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),vm=new Map([...Sm.entries()].map(t=>[t[1],t[0]])),bm=new Set(["2d","3d"]),xm=ym.jn(ym.To);self.sX=class{#t;constructor(t){this.#t=t;const s=[],i=t.OY(),e=i.DY().length;for(let t=0;t<e;++t)s.push(new self.LY(i,t));Object.defineProperties(this,{runtime:{value:t.yH().TJ(),writable:!1},name:{value:t.Pc(),writable:!1},layout:{value:t.Tq().bq(),writable:!1},effects:{value:s,writable:!1}}),t.yH().UJ(this,t)}addEventListener(t,s){this.#t.lj().addEventListener(t,s)}removeEventListener(t,s){this.#t.lj().removeEventListener(t,s)}get yX(){const t=this.#t.wX();return t?t.XY():null}*SX(){for(const t of this.#t.SX())yield t.XY()}*vX(){for(const t of this.#t.bX())yield t.XY()}*xX(){for(const t of this.#t.bX())for(const s of t.MX())yield s.XY()}get index(){return this.#t.Rz()}get isVisible(){return this.#t.TX()}set isVisible(t){this.#t.GX(t)}get _X(){return this.#t.CX()}get IX(){return this.#t.EX()}set IX(t){this.#t.PX(t)}get RX(){return this.#t.AX()}set RX(t){this.#t.FX(!!t)}get OX(){return this.#t.DX()}get opacity(){return this.#t.BF()}set opacity(t){t=ym.Zn(+t,0,1),isNaN(t)||this.#t.WF(t)}set scale(t){wm.he(t),this.#t.LX(t)}get scale(){return this.#t.NX()}set kX(t){wm.he(t),this.#t.BX(t)}get kX(){return this.#t.$X()}set angle(t){wm.he(t),this.#t.$Y(t)}get angle(){return this.#t.WX()}set UX(t){wm.he(t),this.#t.VX(t)}get UX(){return this.#t.zX()}set jX(t){wm.he(t),this.#t.qX(t)}get jX(){return this.#t.HX()}set Yk(t){wm.he(t),this.#t.vM(t)}get Yk(){return this.#t.SM()}set renderingMode(t){if(!bm.has(t))throw TypeError("invalid rendering mode");this.#t.JX("3d"===t)}get renderingMode(){return this.#t.YX()?"3d":"2d"}set XX(t){this.#t.ZX(t)}get XX(){return this.#t.KX()}set QX(t){this.#t.tZ(t)}get QX(){return this.#t.sZ()}set RV(t){wm.ue(t);const s=Sm.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");this.#t.eM(s)}get RV(){return vm.get(this.#t.iZ())}set backgroundColor(t){if(wm.Ge(t),t.length<3)throw new Error("expected 3 elements");xm.Po(t[0],t[1],t[2]);const s=this.#t,i=s.eZ();i.qo(xm)||(i.No(xm),s.yH().Zq())}get backgroundColor(){const t=this.#t.eZ();return[t.ko(),t.Bo(),t.$o()]}set scrollX(t){wm.se(t);const s=this.#t;s.nZ(!0),s.UY(t)}get scrollX(){return this.#t.VY()}set scrollY(t){wm.se(t);const s=this.#t;s.nZ(!0),s.zY(t)}get scrollY(){return this.#t.jY()}scrollTo(t,s){wm.se(t),wm.se(s);const i=this.#t;i.nZ(!0),i.UY(t),i.zY(s)}qY(){const t=this.#t;return[t.VY(),t.jY()]}rZ(){this.#t.nZ(!1)}getViewport(){return this.#t.hZ().el()}oZ(t,s,i=0){wm.se(t),wm.se(s),wm.se(i);const e=this.#t,n=e.yH();return e.aZ(t-n.oJ(),s-n.lJ(),i)}lZ(t,s,i=0){wm.se(t),wm.se(s),wm.se(i);const e=this.#t,n=e.yH(),[r,h]=e.uZ(t,s,i);return[r+n.oJ(),h+n.lJ()]}cZ(t,s,i=0){return wm.se(t),wm.se(s),wm.se(i),this.#t.fZ(t,s,i)}dZ(t,s,i=0){return wm.se(t),wm.se(s),wm.se(i),this.#t.pZ(t,s,i)}get mZ(){return this.#t.gZ()}}}{let Mm=function(t){let s=_m.get(t);return s||(s=Tm.jn(Tm.Event.Sf),_m.set(t,s),s)};GetDispatcher=Mm;const Tm=self.Cs,Gm=self.ks,_m=new WeakMap,Cm=Tm.Is();self.yZ=class{#t;constructor(){const t=Tm.MJ.xJ(Cm);this.#t=t;const s={runtime:{value:t.yH().TJ(),writable:!1},objectType:{value:t.wZ().HJ(),writable:!1},KJ:{value:t.QJ().jJ(),writable:!1}};t.SZ(s),t.vZ(s),Object.defineProperties(this,s),t.yH().UJ(this,t)}static bZ(){return Tm.MJ.xZ()}MZ(){const t=_m.get(this);t&&(t.qn(),_m.delete(this))}addEventListener(t,s,i){Gm.ue(t),Gm.Ae(s),Mm(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Gm.ue(t),Gm.Ae(s),Mm(this).removeEventListener(t,s,i)}dispatchEvent(t){Mm(this).dispatchEvent(t)}destroy(){const t=this.#t,s=t.yH();s.TZ(t),s.dj().vY()||s.Mq().bY()||s.dj().GZ()||s.xY()}_Z(){const t=this.#t.CZ();return t?t.map(t=>t.$q()):[]}*IZ(){const t=this.#t;if(t.EZ())for(const s of t.PZ())yield s.$q()}get uid(){return this.#t.RZ()}get AZ(){return this.#t.FZ()}get OZ(){return this.#t.DZ()}set jj(t){Gm.he(t),this.#t.Hj(t)}get jj(){return this.#t.LZ()}NZ(){this.#t.kZ()}get Dj(){const t=this.#t;return t.yH().Lj(t)}BZ(...t){Gm.Ge(t);const s=new Set(t),i=this.#t.$Z();return s.isSubsetOf(i)}WZ(t){Gm.Be(t,Set),this.#t.UZ(t)}VZ(){return new Set(this.#t.$Z())}signal(t){Gm.ue(t);const s=this.#t;s.yH().dj().zZ(s,t)}Pj(t){Gm.ue(t);const s=this.#t;return s.yH().dj().jZ(s,t)}}}{const Im=self.Cs,Em=self.ks,Pm=Im.Is();self.qZ=class extends self.yZ{#t;#s=!1;#i=null;#e=!1;#n=null;#r;#h;constructor(t){super(),this.#t=Im.MJ.xJ(Pm),this.#s=!1,this.#i=null,this.#e=!1,this.#n=null,this.#r=t?.HZ,this.#h=t?.JZ}MZ(){this.YZ(!1),this.XZ(!1),super.MZ()}ZZ(){return Im.MJ.KZ()}QZ(t){const s=this.#t;s.yH().tK(t,s)}sK(t){const s=this.#t;return s.yH().hH(t,s)}iK(t,s){if(Em.ue(t),Em.Ae(s),!this.#r)throw new Error("no DOM component id set");this.#t.yH().eK(this.#r,t,s)}nK(t){Em.Ge(t);for(const[s,i]of t)this.iK(s,i)}rK(t,s){if(Em.ue(t),!this.#r)throw new Error("no DOM component id set");this.#t.yH().Uc(this.#r,t,s)}hK(t,s){if(Em.ue(t),!this.#r)throw new Error("no DOM component id set");return this.#t.yH().Qq(this.#r,t,s)}oK(t,s){if(!this.#t.yH().tj())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#r,handler:t,data:s,responseId:null});this.rK(t,s)}YZ(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=this.#t.yH();if(t){if(!this.#i)if(this.#t.yH().aK()){const t=globalThis.lK,s=this.KJ;this.#i=()=>{const i=performance.now();this.uK(),t.cK(s,performance.now()-i)}}else this.#i=()=>this.uK();s.Sf().addEventListener("tick",this.#i)}else s.Sf().removeEventListener("tick",this.#i)}fK(){return this.#s}uK(){}XZ(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=this.#t.yH();if(t){if(!this.#n)if(this.#t.yH().aK()){const t=globalThis.lK,s=this.KJ;this.#n=()=>{const i=performance.now();this.dK(),t.cK(s,performance.now()-i)}}else this.#n=()=>this.dK();s.Sf().addEventListener("tick2",this.#n)}else s.Sf().removeEventListener("tick2",this.#n)}pK(){return this.#e}dK(){}mK(){return[]}gK(){return null}yK(t){}wK(){if(!this.#h)throw new Error("no wrapper component id set");return this.#t.yH().SK(this.#h)}vK(t,s){if(Em.ue(t),Em.Ae(s),!this.#h)throw new Error("no wrapper component id set");this.#t.yH().bK(this.#h,t,s)}xK(t){Em.Ge(t);for(const[s,i]of t)this.vK(s,i)}MK(t,s){if(!this.#h)throw new Error("no wrapper component id set");this.runtime.oj.TK(this.#h,t,s)}GK(t,s){if(!this.#h)throw new Error("no wrapper component id set");return this.runtime.oj._K(this.#h,t,s)}}}{let Rm=function(t){return class s extends t{#t;#s;constructor(t){super(t);const s=Am.MJ.xJ(Bm),i=s.zq();this.#t=s,this.#s=i,km.set(this,s);const e=[],n=i.CK();if(n){const t=i.wZ().OY().DY().length;for(let s=0;s<t;++s)e.push(new self.LY(n,s))}const r={effects:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#s.Tq().bq()}get IK(){return this.#s.jq().XY()}get x(){return this.#s.pM()}set x(t){t=+t;const s=this.#s;isNaN(t)||s.pM()===t||(s.mM(t),s.EK())}get y(){return this.#s.yM()}set y(t){t=+t;const s=this.#s;isNaN(t)||s.yM()===t||(s.wM(t),s.EK())}setPosition(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.pM()===t&&i.yM()===s||(i.PK(t,s),i.EK())}RK(){const t=this.#s;return[t.pM(),t.yM()]}offsetPosition(t,s){if(t=+t,s=+s,isNaN(t)||isNaN(s)||0===t&&0===s)return;const i=this.#s;i.AK(t,s),i.EK()}set FK(t){t=+t;const s=this.#s;isNaN(t)||s.DK()===t||(s.LK(t),s.EK())}get FK(){return this.#s.DK()}set NK(t){t=+t;const s=this.#s;isNaN(t)||s.kK()===t||(s.BK(t),s.EK())}get NK(){return this.#s.kK()}$K(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.DK()===t&&i.kK()===s||(i.LK(t),i.BK(s),i.EK())}WK(){const t=this.#s;return[t.DK(),t.kK()]}get Yk(){return this.#s.SM()}set Yk(t){t=+t;const s=this.#t,i=this.#s;isNaN(t)||i.SM()===t||(i.vM(t),s.yH().Zq())}get UK(){return this.#s.VK()}get width(){return this.#s.My()}set width(t){t=+t;const s=this.#s;isNaN(t)||s.My()===t||(s.hy(t),s.EK())}get height(){return this.#s.Gy()}set height(t){t=+t;const s=this.#s;isNaN(t)||s.Gy()===t||(s.oy(t),s.EK())}NY(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.My()===t&&i.Gy()===s||(i.rR(t,s),i.EK())}getSize(){const t=this.#s;return[t.My(),t.Gy()]}get angle(){return this.#s.WY()}set angle(t){t=Am.Kn(+t);const s=this.#s;isNaN(t)||s.WY()===t||(s.$Y(t),s.EK())}get zK(){return Am.tr(this.angle)}set zK(t){this.angle=Am.Qn(t)}Ql(t){return t?(this.#s.jK(Lm,Nm,!1),Lm.el()):this.#s.qK().el()}HK(t){return t?(this.#s.jK(Lm,Nm,!1),Nm.Hl()):this.#s.JK().Hl()}YK(){return this.#s.XK()}get isVisible(){return this.#s.CX()}set isVisible(t){t=!!t;const s=this.#t,i=this.#s;i.CX()!==t&&(i.GX(t),s.yH().Zq())}get opacity(){return this.#s.BF()}set opacity(t){t=Am.Zn(+t,0,1);const s=this.#t,i=this.#s;isNaN(t)||i.BF()===t||(i.WF(t),s.yH().Zq())}set ZK(t){if(Fm.Ge(t),t.length<3)throw new Error("expected 3 elements");Um.Po(t[0],t[1],t[2]);const s=this.#t,i=this.#s;i.KK().qo(Um)||(i.QK(Um),s.yH().Zq())}get ZK(){const t=this.#s.KK();return[t.ko(),t.Bo(),t.$o()]}set RV(t){Fm.ue(t);const s=$m.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#t;this.#s.eM(s),i.yH().Zq()}get RV(){return Wm.get(this.#s.iZ())}tQ(){this.#s.sQ()}iQ(){this.#s.eQ()}nQ(t){Fm.Be(t,Dm);const s=this.#t,i=s.yH().iX(t);if(!i)throw new Error("invalid layer");s.zq().rQ(i)}hQ(t,i){Fm.Be(t,s),this.#s.oQ(km.get(t),i)}get zIndex(){return this.#s.qq()}get aQ(){return this.#s.lQ()}set aQ(t){this.#s.uQ(!!t)}Gl(t,s){return Fm.se(t),Fm.se(s),this.#s.cQ(+t,+s)}kH(t){Fm.Be(t,s);const i=this.#t,e=km.get(t);return i.yH().kz().BH(i,e)}WH(){const t=this.#t,s=t.yH().kz().UH(t);return s?s.$q():null}getParent(){const t=this.#t.fQ();return t?t.$q():null}dQ(){const t=this.#t.pQ();return t?t.$q():null}*mQ(){for(const t of this.#t.mQ())yield t.$q()}gQ(){return this.#t.yQ()}wQ(t){const s=this.#t.SQ(t);return s?s.$q():null}*children(){for(const t of this.#t.children())yield t.$q()}*vQ(){for(const t of this.#t.vQ())yield t.$q()}bQ(t,i){Fm.Be(t,s),Fm.we(i),i||(i={});const e=this.#t,n=km.get(t);e.xQ(n,i)}removeChild(t){Fm.Be(t,s);const i=this.#t,e=km.get(t);i.MQ(e)}TQ(){const t=this.#t;t.GQ()&&t.fQ().MQ(t)}_Q(){const t=this.#s;return{CQ:t.IQ(),EQ:t.PQ(),RQ:t.AQ(),FQ:t.OQ(),DQ:t.LQ(),NQ:t.kQ(),BQ:t.$Q(),WQ:t.UQ(),VQ:t.zQ()}}jQ(t,s){Fm.he(t),Fm.he(s),this.#s.qQ(t,s)}HQ(){const t=this.#s;t.JQ(),t.EK()}YQ(t,s,i){Fm.he(t),Fm.he(s),Fm.ye(i);const e=this.#s;e.XQ(t,s,i)&&e.EK()}ZQ(t,s){let i=NaN,e=NaN,n=NaN,r=NaN,h=NaN;const o=this.#s;if(o.KQ()){const a=o.QQ().eT(t,s);null!==a&&(i=a.pM(),e=a.yM(),n=a.SM(),r=a.bM(),h=a.MM())}return{x:i,y:e,Yk:n,t0:r,s0:h}}i0(){const t=this.#s;if(!t.KQ())return[0,0];const s=t.QQ();return[s.qM(),s.HM()]}}};MakeIWorldInstanceClass=Rm;const Am=self.Cs,Fm=self.ks,Om=self.yZ,Dm=self.sX,Lm=Am.jn(Am.Rect),Nm=Am.jn(Am.El),km=new WeakMap,Bm=Am.Is(),$m=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Wm=new Map([...$m.entries()].map(t=>[t[1],t[0]])),Um=Am.jn(Am.To);self.e0=Rm(self.yZ),self.n0=Rm(self.qZ)}{const Vm=self.Cs,zm=self.ks;self.r0=class extends self.e0{#t;constructor(){super(),this.#t=self.yZ.bZ()}h0(){return this.#t.a0().o0()}focus(){this.#t.a0().l0()}blur(){this.#t.a0().u0()}c0(t,s){zm.ue(t),this.#t.a0().f0(t,s)}}}{let jm=function(t){let s=Jm.get(t);return s||(s=qm.jn(qm.Event.Sf),Jm.set(t,s),s)};GetDispatcher=jm;const qm=self.Cs,Hm=self.ks,Jm=new WeakMap,Ym=qm.Is();self.d0=class{#t;constructor(){const t=qm.MJ.xJ(Ym);this.#t=t;const s={runtime:{value:t.yH().TJ(),writable:!1},behavior:{value:t.m0().p0(),writable:!1},g0:{value:t.w0().y0(),writable:!1}};Object.defineProperties(this,s),t.yH().UJ(this,t)}static bZ(){return qm.MJ.xZ()}get S0(){return this.#t.v0().$q()}MZ(){const t=Jm.get(this);t&&(t.qn(),Jm.delete(this))}addEventListener(t,s,i){Hm.ue(t),Hm.Ae(s),jm(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Hm.ue(t),Hm.Ae(s),jm(this).removeEventListener(t,s,i)}dispatchEvent(t){jm(this).dispatchEvent(t)}}}{const Xm=self.Cs,Zm=self.ks,Km=Xm.Is();self.b0=class{constructor(){const t=Xm.MJ.xJ(Km),s={runtime:{value:t.yH().TJ(),writable:!1},behavior:{value:t.m0().p0(),writable:!1},name:{value:t.Pc(),writable:!1}};Object.defineProperties(this,s)}}}{const Qm=self.Cs,tg=self.ks,sg=Qm.Is();self.x0=class{#s;constructor(){const t=Qm.MJ.xJ(sg);this.#s=t;const s={runtime:{value:t.yH().TJ(),writable:!1},id:{value:t.GJ(),writable:!1}};Object.defineProperties(this,s),t.yH().UJ(this,t)}tY(){return this.#s.uY().map(t=>t.$q())}static VJ(t){if(!t)return null;const s=Qm.MJ.M0(t);return s?s.p0():null}}}{const ig=self.Cs,eg=self.ks,ng=ig.jn(ig.To);self.LY=class{#t;constructor(t,s){this.#t=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){return this.#t.DY()[this.index].Pc()}get isActive(){return this.#t.T0(this.index)}set isActive(t){t=!!t;const s=this.#t;s.T0(this.index)!==t&&(s.G0(this.index,t),s._0(),s.yH().Zq())}setParameter(t,s){eg.he(t),t=Math.floor(+t);const i=this.#t,e=i.C0(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof ig.To){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");ng.Po(s[0],s[1],s[2]),s=ng}else if("number"!=typeof s)throw new TypeError("expected number");i.I0(this.index,t,s)&&i.T0(this.index)&&i.yH().Zq()}getParameter(t){eg.he(t),t=Math.floor(+t);const s=this.#t.C0(this.index,t);if(null===s)throw new RangeError("invalid index");return s instanceof ig.To?[s.ko(),s.Bo(),s.$o()]:s}}}{const rg=self.Cs,hg=self.ks;self.E0=class{#t;constructor(t){this.#t=t,Object.defineProperties(this,{name:{value:t.Pc(),writable:!1}})}get speed(){return this.#t.P0()}get R0(){return this.#t.A0()}get F0(){return this.#t.O0()}get D0(){return this.#t.L0()}get N0(){return this.#t.k0()}get frameCount(){return this.#t.B0()}$0(){return this.#t.W0().map(t=>t.U0())}*frames(){for(const t of this.#t.W0())yield t.U0()}}}{const og=self.Cs,ag=self.ks;self.mH=class{#s;constructor(t){this.#s=t}static pH(t){return t.#s}get width(){return this.#s.My()}get height(){return this.#s.Gy()}getSize(){const t=this.#s;return[t.My(),t.Gy()]}V0(t){return t.z0(this)}j0(){return this.#s.NR().el()}}}{const lg=self.Cs,ug=self.ks;self.q0=class extends self.mH{#s;constructor(t){super(t.H0()),this.#s=t,Object.defineProperties(this,{duration:{value:t.J0(),writable:!1},FK:{value:t.DK(),writable:!1},NK:{value:t.kK(),writable:!1}})}WK(){const t=this.#s;return[t.DK(),t.kK()]}Y0(){return this.#s.X0()}Z0(t){return this.K0(t)[0]}Q0(t){return this.K0(t)[1]}K0(t){const s=this.#s;let i=null;if("number"==typeof t)i=s.t1(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.s1(t)}return i?[i.pM(),i.yM()]:this.WK()}i1(){const t=this.#s.e1();return t?t.mu():0}n1(t){return this.h1(t)[0]}o1(t){return this.h1(t)[1]}h1(t){ug.he(t),t=Math.floor(t);const s=this.#s.e1();if(!s||t<0||t>=s.mu())return[0,0];const i=s.pu();return[i[2*t],i[2*t+1]]}get tag(){return this.#s.a1()}}}{let cg=function(t){const s=pg.get(t);if(s.l1())throw new Error("timeline/tween was released and is no longer valid");return s};GetTimelineState=cg;const fg=self.Cs,dg=self.ks,pg=new WeakMap;self.u1=class{constructor(t){pg.set(this,t),t.yH().UJ(this,t)}pause(){cg(this).c1()}resume(){cg(this).f1()}stop(){cg(this).$f()}BZ(t){return cg(this).d1(t)}set time(t){dg.he(t),cg(this).m1(t)}get time(){return cg(this).fU()}set totalTime(t){dg.he(t),cg(this).g1(t)}get totalTime(){return cg(this).w1()}set R0(t){cg(this).S1(!!t)}get R0(){return cg(this).v1()}set N0(t){cg(this).b1(!!t)}get N0(){return cg(this).M1()}set playbackRate(t){dg.he(t),cg(this).T1(t)}get playbackRate(){return cg(this).G1()}get progress(){const t=cg(this);return t.fU()/t.w1()}get tags(){return cg(this)._1()}get finished(){return cg(this).C1()}get I1(){return cg(this).IsPlaying()}get E1(){return cg(this).P1()}get R1(){return pg.get(this).l1()}}}{let mg=function(t){const s=wg.get(t);if(s.l1())throw new Error("timeline was released and is no longer valid");return s};GetTimelineState=mg;const gg=self.Cs,yg=self.ks,wg=new WeakMap;let Sg=null;self.A1=class extends self.u1{constructor(t){super(t),wg.set(this,t);const s={name:{value:t.Pc(),writable:!1}};Object.defineProperties(this,s)}}}{let vg=function(t){const s=Mg.get(t);if(s.l1())throw new Error("tween was released and is no longer valid");return s};GetTweenState=vg;const bg=self.Cs,xg=self.ks,Mg=new WeakMap,Tg=new WeakMap;let Gg=null;self.F1=class extends self.u1{constructor(t,s,i){super(t),Gg||(Gg=i.O1),Mg.set(this,t),s&&Tg.set(this,s)}stop(){const t=vg(this);Tg.get(this).D1(t)}L1(t){xg.ue(t);const s=self.Vu.ac(Gg(t));vg(this).N1(s)}get S0(){const t=vg(this).B1();return t?t.$q():null}get W1(){return vg(this).U1()}set W1(t){vg(this).V1(!!t)}get finished(){const t=vg(this);return t.C1().then(()=>new Promise(s=>{t.z1()&&s()}))}get released(){return vg(this).j1()}get value(){const t=vg(this);if("value"!==t.q1())throw new Error("not a value tween");return t.J1("value").H1()}}}{const _g=self.Cs,Cg=self.ks;self.Y1=class extends self.bJ{constructor(){super()}}}{const Ig=self.Cs,Eg=self.ks,Pg=Ig.Is();self.X1=class extends self.Y1{#t;#i;#s=0;#r=new Map;constructor(t){if(super(),this.#t=Ig.MJ.xJ(Pg),!t?.HZ)throw new Error("no DOM component ID specified");this.#i=t.HZ,this.Z1("elem-focused",t=>t.K1()),this.Z1("elem-blurred",t=>{t&&t.Q1()})}t2(t){const s=this.#s++;return this.#r.set(s,t),s}s2(t){this.#r.delete(t)}Z1(t,s){this.#t.yH().eK(this.#i,t,t=>{const i=this.#r.get(t.elementId);s(i,t)})}i2(t){Eg.Ge(t);for(const[s,i]of t)this.i2(s,i)}}}{const Rg=self.Cs,Ag=self.ks,Fg=new WeakMap,Og=Rg.Is();self.e2=class extends self.fY{#t;constructor(){super(),this.#t=Rg.MJ.xJ(Og)}n2(){}h2(){return this.#t.H0().o2()}a2(t){}l2(t){}u2(){}c2(t){}}}{const Dg=self.Cs,Lg=self.ks,Ng=new WeakMap,kg=Dg.Is();self.f2=class extends self.n0{#t;#n=null;#s=null;constructor(t){super(t),this.#t=Dg.MJ.xJ(kg)}MZ(){if(super.MZ(),this.#n){const t=this.#t.yH().Sf();t.removeEventListener("renderercontextlost",this.#n),t.removeEventListener("renderercontextrestored",this.#s),this.#n=null,this.#s=null}}d2(){if(this.#n)return;this.#n=()=>this.m2(),this.#s=()=>this.g2();const t=this.#t.yH().Sf();t.addEventListener("renderercontextlost",this.#n),t.addEventListener("renderercontextrestored",this.#s)}m2(){}g2(){}w2(t){}S2(){return!0}xx(){return!1}}}{const Bg=self.Cs,$g=self.ks,Wg=Bg.jn(Bg.Rect),Ug=new WeakMap,Vg=Bg.Is();self.v2=class extends self.f2{#t=-1;#s=!0;#r=!1;#e=!1;#i=-.2;#h=Bg.jn(Bg.Rect,0,0,-1,-1);#o=0;#a=0;#l=-1;#u=-1;#c=!1;constructor(t){if(!t?.HZ)throw new Error("no DOM component ID specified");super(t);const s=Bg.MJ.xJ(Vg);Ug.set(this,s),this.#t=this.KJ.t2(this);const i=s.yH().Dq();this.#o=i.b2(),this.#a=i.M2(),this.YZ(!0)}MZ(){super.MZ(),this.KJ.s2(this.#t),this.T2("destroy"),this.#t=-1,Ug.delete(this)}G2(){if(Ug.get(this).yH().tj())throw new Error("not valid in worker mode");return this._2("get-element")}T2(t,s){s||(s={}),s.elementId=this.#t,this.rK(t,s)}_2(t,s){return s||(s={}),s.elementId=this.#t,this.oK(t,s)}C2(t,s){return s||(s={}),s.elementId=this.#t,this.hK(t,s)}I2(t){t||(t={});const s=Ug.get(this).zq();t.elementId=this.#t,t.isVisible=s.CX(),t.htmlIndex=s.jq().E2(),t.htmlZIndex=s.P2(),Object.assign(t,this.R2()),this.#s=!!t.isVisible,this.oK("create",t),this.A2(!0)}F2(t){t=!!t,this.#s!==t&&(this.#s=t,this.T2("set-visible",{isVisible:t}))}uK(){this.A2(!1)}O2(){const t=Ug.get(this).yH().Dq().D2();return"Android"===Bg.Ks.Qs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}A2(t){const s=Ug.get(this);if(s.L2())return;const i=s.zq(),e=i.jq(),n=i.qK();let[r,h]=e.uZ(n.Qa(),n.tl()),[o,a]=e.uZ(n.sl(),n.il());const l=s.yH().Dq(),u=l.cJ(),c=l.dJ();if(!i.CX()||!e.CX())return void this.F2(!1);if(!this.O2()&&(o<=0||a<=0||r>=u||h>=c))return void this.F2(!1);Wg.set(r,h,o,a);const f=l.b2(),d=l.M2(),p=e.E2(),m=i.P2();if(!t&&Wg.equals(this.#h)&&this.#o===f&&this.#a===d&&this.#l===p&&this.#u===m)return void this.F2(!0);this.#h.S(Wg),this.#o=f,this.#a=d,this.#l=p,this.#u=m,this.F2(!0);let g=null;this.#e&&(g=e.N2()+this.#i),this.T2("update-position",{left:Math.round(this.#h.Qa()),top:Math.round(this.#h.tl()),width:Math.round(this.#h.width()),height:Math.round(this.#h.height()),htmlIndex:p,htmlZIndex:m,fontSize:g})}B2(){this._2("focus",{focus:!0})}W2(){this._2("focus",{focus:!1})}K1(){this.#r=!0}Q1(){this.#r=!1}U2(){return this.#r}V2(t,s){this.z2("set-css-style",{prop:Bg.bo(t),val:s})}j2(t,s){this.z2("set-attribute",{name:t,val:s})}q2(t){this.z2("remove-attribute",{name:t})}H2(){this.#c||(this.#c=!0,Promise.resolve().then(()=>{this.#c=!1,this.T2("update-state",this.R2())}))}R2(){}J2(){return this.#t}}}{const zg=self.Cs,jg=self.ks;self.Y2=class extends self.x0{constructor(){super()}}}{const qg=self.Cs,Hg=self.ks;self.X2=class extends globalThis.b0{constructor(){super()}n2(){}}}{const Jg=self.Cs,Yg=self.ks,Xg=new WeakMap,Zg=Jg.Is();self.Z2=class extends self.d0{#e=!1;#s=!1;#t=!1;constructor(){super(),Xg.set(this,Jg.MJ.xJ(Zg))}MZ(){super.MZ(),this.YZ(!1),this.XZ(!1),this.K2(!1),Xg.delete(this)}ZZ(){return Jg.MJ.KZ()}Q2(){}QZ(t){const s=Xg.get(this);s.yH().tK(t,s.v0(),s.w0())}sK(t){const s=Xg.get(this);return s.yH().hH(t,s.v0(),s.w0())}YZ(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=Xg.get(this).yH();t?s.t3(this):s.s3(this)}fK(){return this.#e}uK(){}XZ(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=Xg.get(this).yH();t?s.i3(this):s.e3(this)}pK(){return this.#s}dK(){}K2(t){if(t=!!t,this.#t===t)return;this.#t=t;const s=Xg.get(this).yH();t?s.n3(this):s.r3(this)}h3(){return this.#t}o3(){}mK(){return[]}gK(){return null}yK(t){}}}{const Kg=self.Cs,Qg=self.ks;let ty=null;self.aj=class{constructor(t){ty=t,Object.defineProperties(this,{a3:{value:ty.l3(),writable:!1}})}u3(){ty.Zq()}iH(t){ty.eH(t)}TK(t,s,i){Qg.ue(t),Qg.ue(s),Qg._e(i),ty.c3(t,s,i)}_K(t,s,i){return Qg.ue(t),Qg.ue(s),Qg._e(i),ty.f3(t,s,i)}d3(t){return Qg.ce(t),new self.m3(ty,t)}set g3(t){ty.y3(!!t)}get g3(){return ty.w3()}S3(t){ty.v3(!!t)}b3(t){Qg.se(t);const s=ty.x3(t);return s?s.HJ():null}}}{const sy=self.Cs,iy=self.ks;self.m3=class{#t;#s;#h;#i;#r;#n;constructor(t,s){this.#t=t;const i=t.dj(),e=t.Sj();this.#s=e,this.#h=e.M3();const n=t._j();this.#i=n.T3(),this.#r=n.G3(e);const r=i._3().G3();this.#n=r,s&&r.C3(s),t.I3(!1)}E3(){const t=this.#t.dj(),s=this.#h,i=this.#n;t.P3(s),this.#s.R3(this.#i,this.#r),t.A3(s),i.F3(i.Rz()+1)}get O3(){return this.#n.D3()}release(){const t=this.#t,s=t._j(),i=t.dj()._3();t.I3(!0),i.L3(),s.L3()}}}{let ey=function(t){return t instanceof ImageBitmap||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas};IsStaticTextureDataType=ey;const ny=self.Cs,ry=self.ks;let hy=null,oy=null;const ay=["none","back","front"],ly=["cw","ccw"];self.N3=class{constructor(t,s){oy=t,hy=s}B3(){hy.JF()}W3(t){hy.qF(t)}U3(){hy.Iv()}V3(){hy.xv()}z3(){hy.Dv()}setColor(t){hy.$F(t[0],t[1],t[2],t[3])}j3(t,s,i,e){hy.$F(t,s,i,e)}q3(){hy.UF()}H3(t){hy.WF(t)}J3(t){hy.ib(t)}Y3(){return hy.eb()}X3(t){const s=ay.indexOf(t);if(-1===s)throw new Error("invalid cull mode");hy.Ub(s)}Z3(){return ay[hy.XF()]}K3(t){const s=ly.indexOf(t);if(-1===s)throw new Error("invalid front face winding");hy.Vb(s)}Q3(){return hy.ZF()}rect(t){hy.QF(t.left,t.top,t.right,t.bottom)}t4(t,s,i,e){hy.QF(t,s,i,e)}s4(t){hy.El(ny.El.Jl(t))}i4(t,s,i,e,n,r,h,o){hy.jb(t,s,i,e,n,r,h,o)}e4(t,s){hy.pb(ny.El.Jl(t),ny.Rect.nl(s))}n4(t,s){hy.iO(ny.El.Jl(t),ny.El.Jl(s))}r4(t,s,i){hy.eO(ny.El.Jl(t),ny.El.Jl(s),i)}h4(t,s,i,e,n,r,h,o,a,l,u,c,f){hy.nO(t,s,i,e,n,r,h,o,a,l,u,c,ny.Rect.nl(f))}o4(t,s,i,e,n,r,h,o,a,l,u,c,f){hy.ab(t,s,i,e,n,r,h,o,a,l,u,c,ny.El.Jl(f))}a4(t,s,i,e,n,r,h,o,a,l,u,c,f,d){hy.rO(t,s,i,e,n,r,h,o,a,l,u,c,ny.El.Jl(f),d)}l4(t,s,i,e){hy.cT(t,s,i,e)}u4(t){hy.zb(t)}line(t,s,i,e){hy.Py(t,s,i,e)}c4(t,s,i,e,n,r){hy.lb(t,s,i,e,n,r)}f4(t,s,i,e){hy.mb(t,s,i,e)}d4(t){hy.Sb(ny.Rect.nl(t))}m4(t){hy.bb(ny.El.Jl(t))}g4(t){hy.Cb(t)}y4(){hy.Ib()}w4(t){hy.Ab(t)}S4(){hy.Lb()}v4(t){ry.$e(t,self.b4);const s=t?oy.iX(t):null;hy.zF(s)}x4(t,s){const i=self.mH.pH(t);if(!i)throw new Error("invalid IImageInfo");return i.M4(hy,{vT:s?.vT??"clamp-to-edge",bT:s?.bT??"clamp-to-edge",xT:s?.xT??"trilinear",GT:s?.GT??!0})}T4(t){const s=self.mH.pH(t);if(!s)throw new Error("invalid IImageInfo");s.GP()}z0(t){const s=self.mH.pH(t);if(!s)throw new Error("invalid IImageInfo");const i=s.NG();return self.b4.G4(oy,i)}_4(t,s){if(!ey(t))throw new TypeError("invalid texture data");const i=hy.EO(t,{vT:s?.vT??"clamp-to-edge",bT:s?.bT??"clamp-to-edge",xT:s?.xT??"trilinear",GT:s?.GT??!0});return self.b4.G4(oy,i)}C4(t,s,i){ry.he(t),ry.he(s);const e=hy._G(t,s,{vT:i?.vT??"clamp-to-edge",bT:i?.bT??"clamp-to-edge",xT:i?.xT??"trilinear",GT:i?.GT??!0});return self.b4.G4(oy,e)}I4(t,s,i){ry.Be(s,self.b4);const e=oy.iX(s);hy.LR(t,e,{CT:i?.CT??!0})}deleteTexture(t){ry.Be(t,self.b4);const s=oy.iX(t);hy.PG(s)}E4(){const t=hy.ox();return new self.P4(oy,t)}R4(){oy.Dq().A4(hy)}F4(t){ry.Be(t,globalThis.sX),oy.iX(t).O4(hy)}}}{const uy=self.Cs,cy=self.ks,fy=new WeakMap,dy=new WeakMap;self.b4=class{constructor(t,s){fy.set(this,{runtime:t,texture:s}),dy.set(s,this),t.UJ(this,s),Object.defineProperties(this,{width:{value:s.My(),writable:!1},height:{value:s.Gy(),writable:!1}})}static G4(t,s){if(!s)return null;return dy.get(s)||new self.b4(t,s)}}}{let py=function(t){return yy.get(t).D4};getActual=py;const my=self.Cs,gy=self.ks,yy=new WeakMap;self.P4=class{constructor(t,s){yy.set(this,{runtime:t,D4:s}),t.UJ(this,s)}release(){py(this).qn()}set L4(t){gy.ue(t),py(this).FP(t)}get L4(){return py(this).RE()}set N4(t){gy.he(t),py(this).OP(t)}get N4(){return py(this).DP()}set lineHeight(t){gy.he(t),py(this).NP(t)}get lineHeight(){return py(this).kP()}set B4(t){py(this).BP(t)}get B4(){return py(this).$P()}set W4(t){py(this).WP(t)}get W4(){return py(this).UP()}setColor(t){gy.Ge(t),this.U4(t[0],t[1],t[2])}U4(t,s,i){py(this).HP(t,s,i)}V4(t){gy.ue(t),py(this).nM(t)}set z4(t){py(this).JP(t)}get z4(){return py(this).YP()}set verticalAlign(t){py(this).XP(t)}get verticalAlign(){return py(this).ZP()}set j4(t){py(this).KP(t)}get j4(){return py(this).QP()}set q4(t){py(this).tR(t)}get q4(){return py(this).sR()}set text(t){gy.ue(t),py(this).Vc(t)}get text(){return py(this).iR()}NY(t,s,i){gy.he(t),gy.he(s),gy.he(i),py(this).rR(t,s,i)}V0(){const{runtime:t,D4:s}=yy.get(this),i=s.NG();return self.b4.G4(t,i)}j0(){return py(this).NR().el()}H4(t){gy.Ae(t),py(this).IP=t}J4(){py(this).GP()}get Y4(){return py(this).oR()}get X4(){return py(this).lR()}}}{let wy=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return xy.get(i)||""},Sy=function(t){return new Promise((s,i)=>{const e=document.createElement("script");e.onload=s,e.onerror=i,e.async=!1,e.type="module",e.src=t,document.head.appendChild(e)})};GetTypeFromFileExtension=wy,AddScript=Sy;const vy=self.Cs,by=new Set(["local","remote"]),xy=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);vy.Z4=class extends vy.Vn{constructor(t,s){super();const i=s.exportType;this.Bc=t,this.K4=new Map,this.Q4="cordova"===i,this.t5=!!s.isiOSCordova,this.s5=s.swClientId,this.i5=s.supportedAudioFormats||{},this.e5=new Map,this.n5=!1,this.r5=s.scriptFolder,this.h5="",this.o5="",this.a5="",this.l5=s.fileMap||new Map,this.u5=new Map,this.c5=[];const e="html5"===i||"scirra-arcade"===i||"instant-games"===i;this.f5=e?"remote":"local",this.d5=new Map,this.p5=[],this.m5=[],this.g5=!1,this.y5=0,this.w5=0,this.S5=0,this.v5=!1,this.b5=vy.jn(vy.tp,()=>this.x5(),50),this.M5=vy.jn(vy.jd,Math.max(vy.hardwareConcurrency,8)),this.T5=vy.jn(vy.jd,20),this.G5=new self.cH(this)}qn(){for(const t of this.d5.values())t.qn();this.d5.clear(),vy.bh(this.m5),this.Bc=null}yH(){return this.Bc}_5(){return this.r5}C5(t){this.h5=t}CH(){return this.h5}I5(t){this.o5=t}E5(){return this.o5}P5(t){this.a5=t}R5(){return this.a5}A5(t){this.c5=t}LH(){return this.c5}no(t,s){return s=s||this.f5,vy.Kh(t)?"playable-ad-single-file"===this.Bc.sJ()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):"local"===s?this.M5.$u(()=>vy.no(t)):this.T5.$u(()=>vy.no(t)):vy.no(t)}ro(t){return vy.Kh(t)?"playable-ad-single-file"===this.Bc.sJ()?vy.oo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.f5?this.M5.$u(()=>vy.ro(t)):this.T5.$u(()=>vy.ro(t)):vy.ro(t)}io(t){return vy.Kh(t)?"playable-ad-single-file"===this.Bc.sJ()?vy.ao(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.f5?this.M5.$u(()=>vy.io(t)):this.T5.$u(()=>vy.io(t)):vy.io(t)}async eo(t){const s=await this.io(t);return JSON.parse(s)}GH(t){let s=this.h5+t;return"Gecko"===vy.Ks.ni&&"preview"===this.Bc.sJ()&&(s=this.F5(s)),s}MH(t){return"playable-ad-single-file"===this.Bc.sJ()&&vy.Kh(t)?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):t}O5(t){if(vy.Zh(t)||"preview"!==this.Bc.sJ()||!this.s5||!t)return t;try{const s=new URL(t,location.href);return s.searchParams.set("__c3_client_id",this.s5),s.toString()}catch(s){return console.warn("Invalid iframe URL: "+t),t}}D5(t,s){return(s?"true":"false")+"|"+t}L5(t){const s=!!t.N5;if(t.k5&&!by.has(t.k5))throw new Error("invalid load policy");const i=this.D5(t.url,s);let e=this.d5.get(i);return e||(e=vy.jn(vy.B5,this,{url:t.url,size:t.size||0,k5:t.k5||this.f5,N5:s}),this.d5.set(i,e),this.g5||(this.y5+=e.Ou(),this.m5.push(e.W5().then(()=>this.U5(e.Ou())))),e)}V5(t){const s=this.D5(t.z5(),t.j5());this.d5.delete(s)}async q5(t){try{await Promise.all(this.m5),this.S5=1,t&&0===this.y5&&this.x5()}catch(t){console.error("Error loading: ",t),this.v5=!0,this.x5()}}H5(){this.g5=!0}J5(){return this.v5}U5(t){this.w5+=t,this.b5.mp()}x5(){const t=vy.jn(vy.Event,"loadingprogress");0===this.y5?this.S5=1:this.S5=vy.Zn(this.w5/this.y5,0,1),t.progress=this.S5,this.Bc.Sf().dispatchEvent(t),this.Bc.Y5(vy.jn(vy.Event,"loadingprogress"))}gq(){return this.S5}wq(){return this.Bc.Z5().X5()}K5(t){vy.Gh(this.p5,t),this.p5.length&&this.m5.push(this.Q5())}async Q5(){const t=[],s=[];for(const[i,e,n]of this.p5)this.y5+=n,t.push(this.t6(i,e,s).then(()=>this.U5(n)));await Promise.all(t),this.Bc.tj()&&s.length>0&&await this.Bc.Qq("runtime","load-webfonts",{webfonts:s})}async t6(t,s,i){try{let e=this.MH(s);"Gecko"===vy.Ks.ni&&(t=`'${t}'`),("Gecko"===vy.Ks.ni&&"preview"===this.Bc.sJ()||"playable-ad-single-file"===this.Bc.sJ())&&(e=this.F5(e));const n=new FontFace(t,`url('${e}')`);this.Bc.tj()?self.fonts.add(n):document.fonts.add(n),await n.load(),this.Bc.tj()&&i.push({name:t,url:e})}catch(s){console.warn(`[C3 runtime] Failed to load web font '${t}': `,s)}}s6(t){return!!this.i5[t]}i6(t,s){this.n5=!!s;for(const[s,i,e]of t)this.e5.set(s,{fileName:s,e6:i.map(t=>({type:t[0],n6:t[1],fullName:s+t[1],fileSize:t[2]})),r6:e})}h6(t){const s=this.e5.get(t);if(!s)return null;let i=null;for(const t of s.e6)if(i||"audio/webm; codecs=opus"!==t.type||(i=t),this.s6(t.type))return t;return i}o6(t){const s=this.h6(t);return s?{url:this.GH(s.fullName),type:s.type}:null}a6(){if(this.n5){const t=[];for(const s of this.e5.values()){if(s.r6)continue;const i=this.h6(s.fileName);i&&t.push({l6:s.fileName,url:this.GH(i.fullName),type:i.type,fileSize:i.fileSize})}return t}return[]}u6(t){return"preview"===this.Bc.sJ()&&(t=new URL(t,location.href).toString()),this.l5.get(t)||null}F5(t){let s=this.u5.get(t);if(s)return s;const i=this.u6(t);return i?(s=URL.createObjectURL(i),this.u5.set(t,s),s):t}Oz(){return this.G5}async PH(...t){const s=t.map(t=>this.MH(t));if(this.Bc.tj())if(1===t.length){const s=t[0];await import((vy.Kh(s)?"./":"")+s)}else{const s=t.map(t=>`import "${vy.Kh(t)?"./":""}${t}";`).join("\n"),i=URL.createObjectURL(new Blob([s],{type:"application/javascript"}));await import(i)}else await Promise.all(s.map(t=>Sy(t)))}async AH(t){if(WebAssembly.compileStreaming){const s=this.MH(t);return await WebAssembly.compileStreaming(fetch(s))}{const s=await vy.ro(t);return await WebAssembly.compile(s)}}async OH(t){const s=this.MH(t);return await this.Bc.Qq("runtime","add-stylesheet",{url:s})}}}{const My=self.Cs;My.c6=class extends My.Vn{constructor(t,s){super(),this.f6=t,this.Bc=t.yH(),this.d6=s.url||"",this.w$=s.size,this.p6=s.k5,this.m6=s.blob||null,this.g6=!!this.m6,this.Fw=null}qn(){this.Fw=null,this.f6=null,this.Bc=null,this.m6=null}z5(){return this.d6}Ou(){return this.w$}W5(){return"local"===this.p6||this.m6?(this.g6=!0,Promise.resolve()):(this.Fw||(this.Fw=this.f6.no(this.d6,this.p6).then(t=>(this.g6=!0,this.Fw=null,this.m6=t,t)).catch(t=>{console.error("Error loading resource: ",t),this.Fw=null})),this.Fw)}y6(){return this.g6}w6(){return this.m6?Promise.resolve(this.m6):this.Fw?this.Fw:this.f6.no(this.d6,this.p6)}}}{const Ty=self.Cs,Gy=new Ty.jd,_y=new Set;Ty.B5=class extends Ty.c6{constructor(t,s){super(t,s),this.S6=null,this.v6=null,this.jp=0,this.b6=-1,this.x6=-1,this.M6=!!s.N5,_y.add(this)}qn(){if(0!==this.jp)throw new Error("released image asset which still has texture references");this.f6.V5(this),this.S6=null,_y.delete(this),super.qn()}static T6(){for(const t of _y)t.S6=null,t.v6=null,t.jp=0}M4(t,s){return s=s||{},this.jp++,this.v6?Promise.resolve(this.v6):(this.S6||(s.MT=this.Bc.Dq().G6(),this.S6=this._6(t,s)),this.S6)}async _6(t,s){try{const i=await this.w6();return 0===this.jp?(this.S6=null,null):await Gy.$u(async()=>{const e=await t.PO(i,s);return this.S6=null,0===this.jp?(t.PG(e),null):(this.v6=e,this.b6=e.My(),this.x6=e.Gy(),this.v6)})}catch(t){throw console.error("Failed to load texture: ",t),t}}GP(){if(this.jp<=0)throw new Error("texture released too many times");this.jp--,0===this.jp&&this.v6&&(this.v6.Dx().PG(this.v6),this.v6=null)}C6(){return this.jp}NG(){return this.v6}My(){return this.b6}Gy(){return this.x6}j5(){return this.M6}async I6(){const t=await this.w6();return Ty.Ri.ImageBitmap?await createImageBitmap(t):await Ty.uo(t)}}}{let Cy=function(t,s){return t.zq().E6()-s.zq().E6()};SortByInstLastCachedZIndex=Cy;const Iy=self.Cs,Ey=self.assert;Iy.P6=class extends Iy.Vn{constructor(t,s,i){super(),this.R6=t,this.Pa=s,this.Ra=i,this.A6=[],this.F6=!0,this.O6=new Set,this.D6=!1}qn(){Iy.bh(this.A6),this.O6.clear(),this.R6=null}$f(){Iy.bh(this.A6),this.F6=!0,this.O6.clear(),this.D6=!1}L6(){this.F6=!1}Ru(){return!this.A6.length||!(this.A6.length>this.O6.size)&&(this.N6(),!0)}k6(t){if(this.O6.has(t))return this.O6.delete(t),void(0===this.O6.size&&(this.D6=!1));this.A6.push(t),this.F6=1===this.A6.length}Kf(t){this.O6.add(t),this.D6=!0,this.O6.size>=50&&this.N6()}N6(){this.D6&&(this.A6.length!==this.O6.size?(Iy.Ph(this.A6,this.O6),this.O6.clear(),this.D6=!1):this.$f())}B6(){this.F6||(this.A6.sort(Cy),this.F6=!0)}W6(t){this.N6(),this.B6(),this.A6.length&&t.push(this.A6)}}}{const Py=self.Cs;Py.U6=class extends Py.Vn{constructor(t,s){super(),this.V6=t,this.z6=s,this.j6=Py.jn(Py.Iu)}qn(){this.j6.qn(),this.j6=null}q6(t,s,i){let e=this.j6.qs(t,s);return e||(i?(e=Py.jn(Py.P6,this,t,s),this.j6.Set(t,s,e),e):null)}H6(t){return Math.floor(t/this.V6)}J6(t){return Math.floor(t/this.z6)}Y6(t,s,i){if(s)for(let e=s.Qa(),n=s.sl();e<=n;++e)for(let n=s.tl(),r=s.il();n<=r;++n){if(i&&i.Gl(e,n))continue;const s=this.q6(e,n,!1);s&&(s.Kf(t),s.Ru()&&this.j6.Au(e,n))}if(i)for(let e=i.Qa(),n=i.sl();e<=n;++e)for(let n=i.tl(),r=i.il();n<=r;++n)s&&s.Gl(e,n)||this.q6(e,n,!0).k6(t)}X6(t,s){let i=this.H6(t.Qa());const e=this.J6(t.tl()),n=this.H6(t.sl()),r=this.J6(t.il());for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this.q6(i,t,!1);e&&e.W6(s)}}Z6(t){let s=t.Qa();const i=t.tl(),e=t.sl(),n=t.il();for(;s<=e;++s)for(let t=i;t<=n;++t){const i=this.q6(s,t,!1);i&&i.L6()}}}}{let Ry=function(t,s){return t.zq().E6()-s.zq().E6()},Ay=function(t,s){return t.zq().SM()-s.zq().SM()};SortByInstLastCachedZIndex=Ry,SortByInstZElevation=Ay;const Fy=self.Cs,Oy=self.assert,Dy=new Fy.Rect,Ly=new Fy.El,Ny=[],ky=new Fy.Rect,By=new Fy.Rect,$y=self.ls,Wy=$y.ws,Uy=$y.Ss,Vy=$y.ds,zy=Vy.create(),jy=Wy.create(),qy=Uy.create(),Hy=Wy.create(),Jy=Wy.create(),Yy=Wy.create(),Xy=Fy.jn(Fy.Ea),Zy=Fy.jn(Fy.Rect),Ky=[],Qy=[],tw=[],sw={name:"",K6:-1,Q6:!1,isVisible:!0,IX:!0,RX:!1,backgroundColor:[1,1,1,1],XX:!0,t8:[1,1],opacity:1,QX:!1,s8:!1,i8:!1,e8:!1,kX:1,RV:0,Yk:0,n8:[],r8:[],h8:[]},iw=new Map,ew=t=>{if(!t.S0.wZ().o8())return;const s=t.S0.RZ();iw.has(s)&&(iw.delete(s),iw.size||t.S0.yH().Sf().removeEventListener("instancedestroy",ew))};Fy.a8=class extends Fy.Vn{constructor(t,s,i){super(),i=Object.assign({},sw,i),this.l8=t,this.Bc=t.yH(),this.u8=s,this.Yn=i.name,this.Vw=-1,this.c8=!!i.RX,this.f8=-1,this.d8=i.K6,this.p8=!!i.Q6,this.m8=!!i.isVisible,this.g8=!!i.IX,this.y8=Fy.jn(Fy.To),this.y8.Sa(i.backgroundColor),this.w8=!!i.XX,this.S8=i.t8[0],this.v8=i.t8[1],this.Kx=Fy.jn(Fy.To,1,1,1,i.opacity),this.b8=Fy.jn(Fy.To),this.x8=!!i.QX,this.M8=!!i.s8,this.T8=!!i.i8,this.G8=!!i.e8,this._8=i.kX,this.Zx=i.RV,this.C8=null,this.I8=1,this.Qx=i.Yk,this.E8=0,this.P8=0,this.A8=0,this.F8=!1,this.xA=Fy.jn(Fy.Rect),this.O8=Fy.jn(Fy.Rect),this.D8=Fy.jn(Fy.Rect),this.L8=!0,this.vG=Vy.create(),this.N8=!0,this.gV=Vy.create(),this.k8=!0,this.B8=Fy.jn(Fy.Xw.tS),this.W8=!0,this.U8=[],this.V8=i.n8,this.z8=[],this.j8=[],this.q8=new Map,this.A6=[],this.H8=!1,this.J8=!1,this.Y8=!1;const e=this.Bc.Dq();this.X8=Fy.jn(Fy.Z8,this,i.r8),this.Cz=Fy.jn(Fy.Xw.GU,e.K8(),{pU:(t,s)=>{const i=s.Sz(),n=i._O();t.nM(i.Q8()),t.OO(n),t.DO(n),e.t7(n)},gU:t=>this.OY().s7(t)}),this.i7=!0,this.e7=!0,this.n7=null,this.r7=[],this.h7=!1,this.o7=Fy.jn(Fy.Rect,0,0,-1,-1),this.a7=Fy.jn(Fy.Rect,0,0,-1,-1),this.l7=new self.sX(this),this.u7=Fy.jn(Fy.Event.Sf),this.c7(),this.f7()&&(this.n7=Fy.jn(Fy.U6,this.Bc.ij(),this.Bc.nj())),this.d7=i.h8.map(t=>Fy.a8.p7(this.l8,this,t))}m7(){for(const t of this.V8){const s=this.Bc.g7(t[1]);this.l8.y7(s),s.w7()||(s.S7(t),s.v7(this.Vw)),this.z8.push(t),this.q8.set(t[2],t)}Fy.Gh(this.U8,this.z8),this.V8=null}static p7(t,s,i){return Fy.jn(Fy.a8,t,s,{name:i[0],K6:i[2],isVisible:i[3],IX:i[13],RX:i[19],backgroundColor:i[4].map(t=>t/255),XX:i[5],t8:[i[6],i[7]],opacity:i[8],QX:i[9],s8:i[17],i8:i[18],e8:i[10],kX:i[11],RV:i[12],Yk:i[16],n8:i[14],r8:i[15],h8:i[20]})}qn(){for(const t of this.d7)t.qn();Fy.bh(this.d7);for(const t of this.A6)this.Bc.TZ(t);Fy.bh(this.A6),this.X8.qn(),this.X8=null,this.Cz.qn(),this.Cz=null,this.l7=null,this.u8=null,this.l8=null,this.Bc=null}Hn(){return!this.l8}b7(t){return this.q8.get(t)}x7(t){const s=this.l8.M7(),i=this.z8;let e=0;for(let n=0,r=i.length;n<r;++n){const r=i[n],h=this.Bc.g7(r[1]);let o=!0;if(!h.T7()||s)if(h.o8()&&iw.has(r[2]))o=!1;else{const s=this.Bc.G7(r,this,!0);t.push(s),h.o8()&&(iw.size||this.Bc.Sf().addEventListener("instancedestroy",ew),iw.set(s.RZ(),s),o=!1,this.j8.push(s.RZ()))}o&&(i[e]=i[n],++e)}Fy.Sh(i,e),this.Bc.xY(),this.Xq()}_7(t,s){if(!t.QJ().EJ())throw new Error("instance is not of world type");const i=t.zq();if(i.jq()!==this)throw new Error("instance added to wrong layer");this.A6.push(t),0!==i.SM()&&(this.Y8=!0),s&&this.f7()&&t.zq().EK(),this.Xq(t)}C7(t){this.A6.includes(t)||(this.A6.push(t),0!==t.zq().SM()&&(this.Y8=!0),this.Xq(t))}I7(t,s){const i=t.zq();if(i.jq()!==this)throw new Error("instance added to wrong layer");this.A6.unshift(t),0!==i.SM()&&(this.Y8=!0),this.Xq(t),s&&this.f7()&&t.zq().EK()}E7(t,s){const i=this.A6.indexOf(t);i<0||(s&&this.f7()&&t.zq().P7(),this.A6.splice(i,1),this.Xq(t),this.R7())}A7(){this.Y8=!0}R7(){0===this.A6.length&&(this.Y8=!1)}F7(t){if(t){const t=new Set;for(const s of this.A6){const i=s.zq().E6();i>=0&&t.add(i)}let s=-1;for(const i of this.A6){const e=i.zq();if(!(e.E6()>=0)){for(++s;t.has(s);)++s;e.O7(s)}}}this.A6.sort(Ry)}D7(){}L7(){for(const t of this.A6)t.wZ().o8()||this.Bc.TZ(t);this.Bc.xY(),Fy.bh(this.A6),this.Y8=!1,this.Xq()}N7(t,s,i,e,n,r){const h=this.Bc.dj(),o=this.Bc.k7(),a=t.B7(),l=[];for(const u of this.z8){const c=u[0],f=c[0],d=c[1];if(!s.Gl(f,d))continue;const p=o[u[1]];if(p!==t){if(!a)continue;if(!t.AY(p))continue}let m=n;if(!m){const t=this.Bc.Uq();this.Tq()===t?m=this:(m=t.W7(this.Pc()),m||(m=t.Hq(this.Rz())))}const g=this.Bc.G7(u,m,!1,void 0,void 0,!1,r,void 0,r);r&&m.yY(g);const y=g.zq();y.AK(i,e),y.EK(),h.wY(!0),g.SY(),h.wY(!1),l.push(g)}return l}pY(){return this.A6.length}Tq(){return this.l8}Pc(){return this.Yn}U7(t){this.Vw=t}Rz(){return this.Vw}V7(t){this.f8=t}E2(){return this.f8}AX(){return this.c8}FX(t){t=!!t,this.c8!==t&&(this.c8=t,this.l8.z7(),this.Bc.Zq())}j7(){let t=-1;const s=this.wX();return t=s?s.bX().indexOf(this):this.Tq().q7().indexOf(this),t}H7(){return this.d8}yH(){return this.Bc}J7(){return this.p8}Y7(){for(const t of this.SX())if(t.J7())return!0;return!1}wJ(){return this.Bc.wJ()}OY(){return this.X8}Pz(){return this.X7(),this.Cz}X7(){const t=this.Z7();if(!this.i7&&t===this.e7&&!this.Cz.yV())return;const s=this.OY().K7();this.Cz.wV(s.map(t=>t.rC()),{wU:s.map(t=>t.Rz()),SU:!t,TU:!0}),this.i7=!1,this.e7=t}_0(){this.OY()._0(),this.i7=!0}f7(){return this.G8&&!this.T8}Q7(){return this.n7}t9(){this.h7=!1}CX(){for(const t of this.s9())if(!t.TX())return!1;return!0}TX(){return this.m8}GX(t){t=!!t,this.m8!==t&&(this.m8=t,this.Bc.Zq())}PX(t){this.g8=!!t}EX(){return this.g8}DX(){for(const t of this.s9())if(!t.EX())return!1;return!0}nZ(t){if(t=!!t,this.F8!==t){if(this.F8=t,t){const t=this.Tq();this.P8=t.VY(),this.A8=t.jY()}this.i9(),this.Bc.Zq()}}e9(){return this.F8}UY(t){const s=this.Tq(),i=s.n9(),e=s.r9();t>e&&(t=e),t<i&&(t=i),this.P8!==t&&(this.P8=t,this.e9()&&(this.i9(),this.Bc.Zq()))}zY(t){const s=this.Tq(),i=s.h9(),e=s.o9();t>e&&(t=e),t<i&&(t=i),this.A8!==t&&(this.A8=t,this.e9()&&(this.i9(),this.Bc.Zq()))}VY(){return this.e9()?this.P8:this.Tq().VY()}jY(){return this.e9()?this.A8:this.Tq().jY()}hZ(){return this.a9(),this.xA}l9(){return this.a9(),this.O8}u9(){return this.a9(),this.D8}c9(){return this.Tq().dX()}QS(t){return this.Bc.QS(t)}f9(t,s){const i=this.l9();if(0===t)s.S(i);else{let e=i.ol(),n=i.al();const r=this.d9(t),h=i.width()/r,o=i.height()/r,[a,l]=this.c9();if(.5!==a||.5!==l){const s=this.p9(),i=this.Bc,r=this.QS()/s;let h=(a-.5)*i.m9()/r,o=(l-.5)*i.g9()/r;const u=this.WY();0!==u&&(Xy.set(h,o),Xy.rotate(u),h=Xy.Oa(),o=Xy.La());const c=Fy.mr(s,0,t);e+=Fy.Ct(h,0,c),n+=Fy.Ct(o,0,c)}s.set(e-h/2,n-o/2,e+h/2,n+o/2)}}BF(){return this.Kx.Wo()}WF(t){t=Fy.Zn(t,0,1),this.Kx.Wo()!==t&&(this.Kx.Lo(t),this.c7(),this.Bc.Zq())}c7(){this.b8.S(this.Kx),this.b8.Ko()}Q8(){return this.b8}Z7(){return this.Kx.Jo(1,1,1,1)}$X(){return this._8}BX(t){this._8!==t&&(this._8=t,this.i9(),this.Bc.Zq())}zX(){return this.S8}HX(){return this.v8}y9(t,s){this.S8===t&&this.v8===s||(this.S8=t,this.v8=s,this.i9(),this.Bc.Zq())}VX(t){this.y9(t,this.HX())}qX(t){this.y9(this.zX(),t)}vM(t){this.Qx!==t&&(this.Qx=t,this.Bc.Zq())}SM(){return this.Qx}$Y(t){t=Fy.Kn(t),this.E8!==t&&(this.E8=t,this.i9(),this.Bc.Zq())}WY(){return Fy.Kn(this.l8.WY()+this.E8)}WX(){return this.E8}w9(){return this.A6.length>0}Jq(){return this.A6}S9(){return this.v9()&&this.T8?(Fy.Gh(tw,this.Jq()),tw.sort((t,s)=>this.b9(t,s)),tw):this.Jq()}x9(t){Fy.Fn(t,this.S9());for(const s of this.d7)s.CX()&&s.BF()>0&&s.x9(t)}b9(t,s){const i=this.Tq().M9(),e=i[0],n=i[1],r=i[2],h=t.zq(),o=s.zq(),a=h.pM()-e,l=h.yM()-n,u=h.SM()-r,c=o.pM()-e,f=o.yM()-n,d=o.SM()-r;return c*c+f*f+d*d-(a*a+l*l+u*u)}eZ(){return this.y8}KX(){return this.w8}ZX(t){t=!!t,this.w8!==t&&(this.w8=t,this.Bc.Zq())}sZ(){return this.x8}tZ(t){t=!!t,this.x8!==t&&(this.x8=t,this.Bc.Zq())}JX(t){t=!!t,this.M8!==t&&(this.M8=t,this.i9(),this.Bc.Zq())}YX(){return this.M8}T9(){return!this.yH().G9()||!this.M8}v9(){return!this.T9()}_9(){return this.v9()&&this.Tq().C9()}I9(){if(!this._9())return!1;for(const t of this.d7)if(!t.I9())return!1;return!0}eM(t){this.Zx!==t&&(this.Zx=t,this.Bc.Zq())}iZ(){return this.Zx}E9(){return!this.u8}wX(){return this.u8}P9(t){this.u8=t}bX(){return this.d7}R9(){return this.d7.length>0}A9(t,s=!0){s?this.d7.push(t):this.d7.unshift(t)}F9(t,s,i){let e=this.d7.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.d7.splice(e,0,t)}O9(t){const s=this.d7.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.d7.splice(s,1)}D9(){for(const t of this.d7)if(t.L9())return!0;return!1}*MX(){for(const t of this.d7)yield*t.MX();yield this}*SX(){let t=this.wX();for(;t;)yield t,t=t.wX()}*s9(){yield this,yield*this.SX()}N9(t){for(const s of this.SX())if(s===t)return!0;return!1}k9(t){return this===t||this.S8===t.S8&&this.v8===t.v8&&this.I8===t.I8&&this._8===t._8&&this.E8===t.E8&&this.VY()===t.VY()&&this.jY()===t.jY()}B9(){return{parallaxX:this.zX(),parallaxY:this.HX(),scale:this.NX(),scaleRate:this.$X(),angle:this.WX(),hasOwnScroll:this.e9(),scrollX:this.VY(),scrollY:this.jY()}}W9(t){this.y9(t.parallaxX,t.parallaxY),this.LX(t.scale),this.BX(t.scaleRate),this.$Y(t.angle),this.nZ(t.hasOwnScroll),this.UY(t.scrollX),this.zY(t.scrollY),this.a9()}U9(t){0!==t.size&&Fy.Ph(this.A6,t)>0&&(this.R7(),this.Xq())}Xq(t){this.H8=!1,this.h7=!1,t&&!t.wZ().QJ().RJ()||(this.J8=!1)}V9(){if(!this.H8){if(this.A6.sort(Ay),this.f7())for(let t=0,s=this.A6.length;t<s;++t){const s=this.A6[t].zq();s.O7(t),this.n7.Z6(s.z9())}else for(let t=0,s=this.A6.length;t<s;++t)this.A6[t].zq().O7(t);this.H8=!0}}j9(){if(this.J8)return;const t=this.l8.q9(this.E2()).map(t=>[...t.MX()]).flat();let s=0;for(const i of t){for(const t of i.Jq())t.wZ().QJ().RJ()&&t.zq().H9(s++);i.J9()}}J9(){this.J8=!0}Y9(){return{isVisible:this.CX(),opacity:this.BF(),isInteractive:this.EX()}}X9(t,s,i){const e=t.zq(),n=s.zq();if(e.jq()!==this||n.jq()!==this)throw new Error("can't arrange Z order unless both objects on this layer");const r=e.qq();let h=n.qq();return r!==h+(i?1:-1)&&(Fy._h(this.A6,r),r<h&&h--,i&&h++,h===this.A6.length?this.A6.push(t):this.A6.splice(h,0,t),this.Xq(t),!0)}Z9(t,s){const i=[];let e=0,n=0,r=t.length,h=s.length;for(;e<r&&n<h;){const r=t[e],h=s[n];r.zq().E6()<h.zq().E6()?(i.push(r),++e):(i.push(h),++n)}for(;e<r;++e)i.push(t[e]);for(;n<h;++n)i.push(s[n]);return i}K9(t){const s=[],i=t.length;for(let e=0;e<i-1;e+=2){const i=t[e],n=t[e+1];s.push(this.Z9(i,n))}return i%2==1&&s.push(t[i-1]),s}Q9(t){for(;t.length>1;)t=this.K9(t);return t[0]}ttt(){return this.V9(),Fy.bh(Ny),this.n7.X6(this.hZ(),Ny),Ny.length?1===Ny.length?Ny[0]:this.Q9(Ny):[]}L9(){return this.CX()&&this.BF()>0&&this.stt()}stt(){if(this.w9()||!this.KX()||this.u7.Tf("beforedraw")||this.u7.Tf("afterdraw"))return!0;for(const t of this.d7)if(t.stt())return!0;return!1}itt(){return this.sZ()||!this.Z7()||0!==this.iZ()||this.X8.ett()}ntt(){if(this.itt())return!0;for(const t of this.d7)if(t.ntt())return!0;return!1}_O(){return this.C8}d9(t){if(this.l8.gX())return 1;{const s=this.htt();return s/(s-t)}}ott(t){const s=this.Bc.gZ();if(this.l8.gX())return s;{const i=this.htt();return this.QS()/Math.abs(i-t)*s}}i9(){this.k8=!0,this.W8=!0,this.L8=!0}att(t){return this.k8&&(this.ltt(t,this.gV,0,0,null),this.k8=!1),this.gV}p9(t){return this.QS(t)/this.utt()}htt(){return this._9()?this.Tq().M9()[2]:this.p9()}ctt(){if(this._9()){const t=this.Tq().M9();return[t[0],t[1],t[2]]}return this.ftt()}ftt(t=0,s=0,i=0){const e=this.Bc,n=this.Tq(),r=e.dtt(),h=e.ptt();let o=(this.VY()-r)*this.S8+r,a=(this.jY()-h)*this.v8+h;e.pq()&&(o=Math.round(o),a=Math.round(a));let l=o+t,u=a+s;const c=n.gX()?this.QS(i):this.p9(i),[f,d]=this.c9();if(.5!==f||.5!==d){const t=this.QS(i)/c;let s=(f-.5)*e.m9()/t,n=(d-.5)*e.g9()/t;const r=this.WY();0!==r&&(Xy.set(s,n),Xy.rotate(r),s=Xy.Oa(),n=Xy.La()),l+=s,u+=n}return[l,u,c]}ltt(t,s,i,e,n){const r=this.Bc,h=this.Tq();if(this._9()){Wy.S(Hy,h.M9()),Wy.S(Jy,h.mtt()),Wy.S(Yy,h.gtt());const t=r.dtt(),s=r.ptt(),i=Jy[0]-Hy[0],e=Jy[1]-Hy[1],n=Jy[2]-Hy[2];Hy[0]=(Hy[0]-t)*this.S8+t,Hy[1]=(Hy[1]-s)*this.v8+s,Hy[2]*=Math.max(this.S8,this.v8),Jy[0]=Hy[0]+i,Jy[1]=Hy[1]+e,Jy[2]=Hy[2]+n}else{const[t,s,r]=this.ftt(i,e,n);Wy.set(Hy,t,s,r),Wy.set(Jy,t,s,r-100);const h=this.WY();0===h?Wy.set(Yy,0,1,0):Wy.set(Yy,Math.sin(h),Math.cos(h),0)}t.gv(s,Hy,Jy,Yy,n||r.g9())}ytt(){this.N8=!0,this.W8=!0,this.L8=!0}wtt(t){return this.N8&&(this.Stt(t),this.N8=!1),this.vG}Stt(t){const s=this.Bc.Dq(),[i,e]=this.c9();if(this.l8.gX())t.mv(this.vG,s.vtt(),s.btt());else if(.5===i&&.5===e)Vy.S(this.vG,s.xtt());else{const n=s.vtt(),r=s.btt();t.dv(this.vG,n/r,i,e)}}O4(t,s=!0,i=0,e=0,n=0){s&&t.IF(this.wtt(t));let r=null;0===i&&0===e&&0===n?r=this.att(t):(this.ltt(t,zy,i,e,n),r=zy),t.OF(r)}Mtt(t){this.O4(t),t.tb(this.SM())}Ttt(t){let s=null;if(t.tx()&&this.Bc.Gtt()){const i=this.Bc.Dq()._tt(this);i&&(s=i.lA(),t.WO(s))}return s}Ctt(t){if(t.pv()&&this.Bc.Gtt()){const s=2*(this.Rz()+1);t.Ik(s,s+1)}}Itt(t,s){if(this.u7.Tf(s)){t.xv(),t.zF(null),t.JF(),t.Wb(),t.$F(1,1,1,1),t.tb(this.SM()),t.ib(0);const i=new Fy.Event(s);i.rI=this.Bc.Dq().Oq(),this.Y5(i)}}uT(t,s,i){const e=this.Bc.Dq(),n=this.itt();let r=null;const h=this.Ttt(t);if(this.Ctt(t),n){const s={xT:this.Bc.LW(),aG:!0,oW:!!t.pv()&&this.Bc.Ett()};"low"===e.Ptt()&&(s.width=e.vtt(),s.height=e.btt()),r=this.Bc.Rtt(s),this.C8=r,t.AO(r),this.KX()&&t.SO(0,0,0,0)}else this.C8=s,t.AO(s);if(this.KX()||t.Pu(this.y8),this.l8.Att(t,this.C8,this.d7,n&&this.KX()),this.Ctt(t),this.O4(t),t.tb(this.SM()),t.xO(this.v9()),this.Itt(t,"beforedraw"),this.utt()>Number.EPSILON){this.V9();const s=this.f7()&&0===this.SM()&&!this.Y8;this._9()?this.Ftt(t):s?this.Ott(t):this.Dtt(t,this.S9())}this.Itt(t,"afterdraw"),t.tb(0),t.ib(0),n&&(t.xO(!1),this.Ltt(t,r,s,i)),h&&t.VO(h),this.C8=null}Dtt(t,s){const i=this.hZ(),e=this.C8,n=this.Tq().gX(),r=this.Tq().Ntt();let h=null;for(let o=0,a=s.length;o<a;++o){const a=s[o];if(a===h)continue;h=a;const l=a.zq();l.CX()&&l.ktt(i,r,n)&&this.Btt(a,l,t,e)}}Ftt(t){const s=this.C8,i=this.$tt(),e=Ky,n=Qy,r=this.S9();for(let h=0,o=r.length;h<o;){const a=r[h],l=a.zq();if(!l.CX()||!l.Wtt(i)){++h;continue}(!a.Utt()||l.Vtt()>0)&&n.push(a);const u=a.zq().VK();e.push(a);let c=h+1;for(;c<o;++c){const t=r[c],s=t.zq();if(s.CX()&&s.Wtt(i)){if(s.VK()!==u)break;t.Utt()?(s.Vtt()>0&&n.push(t),e.push(t)):n.push(t)}}if(1!==e.length||e[0].ztt()){this.jtt(t,e);for(let i=0,e=n.length;i<e;++i){const e=n[i],r=e.zq();r.qtt(!0),this.Btt(e,r,t,s),r.qtt(!1)}}else{this.Btt(a,l,t,s);for(let i=0,e=n.length;i<e;++i){const e=n[i];if(e===a)continue;const r=e.zq();r.jq().Btt(e,r,t,s)}}h=c,Fy.bh(e),Fy.bh(n)}}jtt(t,s){const i=this.C8;t.NO();for(let i=0,e=s.length;i<e;++i){const e=s[i],n=e.zq();n.Htt(!0),this.Jtt(e,n,t)}t.kO();for(let e=0,n=s.length;e<n;++e){const n=s[e],r=n.zq();this.Btt(n,r,t,i),r.Htt(!1)}t.$O()}Ott(t){const s=this.n7,i=this.a7,e=this.o7,n=this.hZ();let r;i.set(s.H6(n.Qa()),s.J6(n.tl()),s.H6(n.sl()),s.J6(n.il())),this.h7&&i.equals(e)?r=this.r7:(r=this.ttt(),this.h7=!0,e.S(i)),this.Dtt(t,r),r!==this.r7&&Fy.Gh(this.r7,r)}Btt(t,s,i,e){s.ett()?this.Ytt(t,s,i,e):this.Jtt(t,s,i)}Jtt(t,s,i){const e=s.Xtt();i.Nv()!==e&&e.iM(),t.uT(i)}Ytt(t,s,i,e){this.Ztt(t,s,i,e,null)&&this.O4(i)}Ztt(t,s,i,e,n){const r=s.CK().Pz();return r.IV(i,e,{EV:t,RV:s.iZ(),devicePixelRatio:this.Bc.Ktt(),time:t.Qtt(),DB:this.Bc.tst()*this.utt(),LB:this.WY(),OB:s.qK(),tz:r.yz()?null:this.sst(s),LV:n&&n.LV,NV:n&&n.NV,kV:n&&n.kV,BV:n&&n.BV,$V:n&&n.$V,WV:n&&n.WV}),i.tb(this.SM()),r.LF()}Ltt(t,s,i,e){const n=this.X8.K7(),r=this.Bc;0===n.length?(t.AO(i),t.xv(),e&&0===this.Zx&&this.Z7()?t.FO(s):(t.eM(this.Zx),t.nM(this.b8),t.OO(s)),t.DO(s),r.t7(s)):this.Pz().IV(t,i,{EV:this,RV:this.iZ(),devicePixelRatio:r.Ktt(),DB:r.tst()*this.utt(),LB:this.WY(),OB:this.hZ(),tz:null,yU:!0})}NX(){return this.I8}LX(t){this.I8!==t&&(this.I8=t,this.l8.ist(),this.i9(),this.Bc.Zq())}gZ(){return this.utt()*this.Bc.gZ()}N2(){return this.utt()*this.Bc.N2()}utt(){return(this.I8*this.l8.BY()-1)*this._8+1}a9(){if(!this.L8)return;this.L8=!1;const t=this.Bc.dtt(),s=this.Bc.ptt(),i=(this.VY()-t)*this.S8+t,e=(this.jY()-s)*this.v8+s,n=this.utt(),r=this.Bc.m9()/n,h=this.Bc.g9()/n;let o=i-r/2,a=e-h/2;this.Bc.pq()&&(o=Math.round(o),a=Math.round(a));const l=this.O8;l.set(o,a,o+r,a+h);const u=this.WY();0!==u&&(Dy.S(l),Dy.offset(-l.ol(),-l.al()),Ly.Zl(Dy,u),Ly.Ql(Dy),Dy.offset(l.ol(),l.al()),l.S(Dy));const c=this.Qx;this.f9(c,this.xA),this._9()?this.est(c,this.D8):this.D8.S(this.xA)}est(t,s){const i=this.Bc.Dq(),e=i.cJ(),n=i.dJ(),[r,h]=this.aZ(0,0,t),[o,a]=this.aZ(e,0,t),[l,u]=this.aZ(e,n,t),[c,f]=this.aZ(0,n,t);let d=Math.min(r,o,l,c),p=Math.min(h,a,u,f),m=Math.max(r,o,l,c),g=Math.max(h,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}aZ(t,s,i=0){return this.nst(t,s,i,this.N2())}fZ(t,s,i=0){return this.nst(t,s,i,this.gZ()*this.wJ())}nst(t,s,i,e){const n=this.Bc,r=n.Dx(),h=this.utt(),o=n.m9()/h,a=n.g9()/h,l=qy;Uy.set(l,0,0,o,a),t/=e,s=l[3]-s/e;const u=this.wtt(r),c=this.att(r),f=jy;return Fy.Xw.Qw(t,s,i,c,u,l,f)?[f[0],f[1]]:[NaN,NaN]}rst(t,s){const i=this.I8,e=this._8,n=this.S8,r=this.v8,h=this.E8,o=this._9();o&&this.Tq().hst(!1),this.I8=1,this._8=1,this.S8=1,this.v8=1,this.E8=0,this.i9();const a=this.aZ(t,s);return this.I8=i,this._8=e,this.S8=n,this.v8=r,this.E8=h,this.i9(),o&&this.Tq().hst(!0),a}uZ(t,s,i=0){return this.ost(t,s,i,this.N2())}pZ(t,s,i=0){return this.ost(t,s,i,this.gZ()*this.wJ())}ost(t,s,i,e){const n=this.Bc,r=n.Dx(),h=this.utt(),o=n.m9()/h,a=n.g9()/h,l=qy;Uy.set(l,0,0,o,a);const u=this.wtt(r),c=this.att(r),f=jy;return Fy.Xw.Zw(t,s,i,c,u,l,f)?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}ast(t,s){return t*=this.gZ()*this.wJ(),0!==s&&(t*=this.d9(s)),t}sst(t){const s=t.qK(),i=t.VK(),e=t.Vtt(),n=i+e,r=s.Qa(),h=s.tl(),o=s.sl(),a=s.il();if(this._9()){if(this.lst(r,h,i)||this.lst(o,h,i)||this.lst(o,a,i)||this.lst(r,a,i))return null;if(e>0&&(this.lst(r,h,n)||this.lst(o,h,n)||this.lst(o,a,n)||this.lst(r,a,n)))return null}else if(n>=this.p9())return null;let[l,u]=this.pZ(r,h,i),[c,f]=this.pZ(o,a,i);if(0!==this.WY()||e>0||this._9()){const[t,s]=this.pZ(o,h,i),[d,p]=this.pZ(r,a,i);if(e>0){const[i,e]=this.pZ(r,h,n),[m,g]=this.pZ(o,h,n),[y,w]=this.pZ(o,a,n),[S,v]=this.pZ(r,a,n);let b=Math.min(l,c,t,d,i,m,y,S);c=Math.max(l,c,t,d,i,m,y,S),l=b,b=Math.min(u,f,s,p,e,g,w,v),f=Math.max(u,f,s,p,e,g,w,v),u=b}else{let i=Math.min(l,c,t,d);c=Math.max(l,c,t,d),l=i,i=Math.min(u,f,s,p),f=Math.max(u,f,s,p),u=i}}return Dy.set(l,u,c,f),Dy}$tt(){return this.W8&&(this.ust(),this.W8=!1),this.B8}ust(){const t=this.Bc.Dx(),s=this.wtt(t),i=this.att(t);this.B8.oS(i,s)}lst(t,s,i){return this.$tt().lS(t,s,i)}cst(){return{d:this.J7(),s:this.NX(),a:this.WX(),v:this.TX(),i:this.EX(),html:this.AX(),bc:this.y8.toJSON(),t:this.KX(),sx:this.P8,sy:this.A8,hosp:this.F8,px:this.zX(),py:this.HX(),c:this.Kx.toJSON(),sr:this.$X(),fx:this.X8.CM(),cg:this.j8}}fst(t){this.p8=!!t.d,this.I8=t.s,this.E8=t.a,this.m8=!!t.v,this.g8=!t.hasOwnProperty("i")||t.i,this.c8=!!t.html,this.y8.Sa(t.bc),this.w8=!!t.t,t.hasOwnProperty("sx")&&(this.P8=t.sx),t.hasOwnProperty("sy")&&(this.A8=t.sy),t.hasOwnProperty("hosp")&&(this.F8=!!t.hosp),this.S8=t.px,this.v8=t.py,this.Kx.Sa(t.c),this.c7(),this._8=t.sr,Fy.Gh(this.j8,t.cg),Fy.Gh(this.z8,this.U8);const s=new Set(this.j8);let i=0;for(let t=0,e=this.z8.length;t<e;++t)s.has(this.z8[t][2])||(this.z8[i]=this.z8[t],++i);Fy.Sh(this.z8,i),this.X8.IM(t.fx),this.i7=!0}dst(){this.F7(!1),this.Xq(),this.i9(),this.ytt()}XY(){return this.l7}lj(){return this.u7}Y5(t){t.IK=this.XY(),this.u7.dispatchEvent(t)}yY(t,s=!1,i=!1){if(this.A6.includes(t))return s&&this.A6.sort((t,s)=>(t.zq().pst()??0)-(s.zq().pst()??0)),void(i&&this.A6.forEach((t,s)=>t.zq().O7(s)));if(t.mst()){const s=[...t.vQ()];s.push(t),s.sort((t,s)=>(t.zq().pst()??0)-(s.zq().pst()??0));for(const t of s)if(t.EZ())for(const i of t.PZ()){if(s.includes(i))continue;const t=[...i.vQ()];t.push(i),t.sort((t,s)=>(t.zq().pst()??0)-(s.zq().pst()??0)),t&&t.length&&s.splice(s.length,0,...t)}for(const t of s)t.QJ().EJ()&&this._7(t,!0);i&&this.A6.forEach((t,s)=>t.zq().O7(s))}else{if(t.QJ().EJ()&&this._7(t,!0),!t.EZ())return void(i&&this.A6.forEach((t,s)=>t.zq().O7(s)));for(const s of t.PZ()){const t=[...s.vQ()];if(t.push(s),t.sort((t,s)=>(t.zq().pst()??0)-(s.zq().pst()??0)),t&&t.length)for(const s of t)s.QJ().EJ()&&this._7(s,!0)}i&&this.A6.forEach((t,s)=>t.zq().O7(s))}}}}{let nw=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},rw=function(t,s){Sw!==t&&(t.Mtt(s),Sw=t)};vec3EqualsXYZ=nw,MaybePrepareLayerDraw=rw;const hw=self.Cs,ow=self.lK,aw=self.assert,lw=hw.jn(hw.Rect),uw=hw.jn(hw.Rect),cw=hw.jn(hw.Rect),fw=hw.jn(hw.To),dw=self.ls,pw=dw.ws,mw=[],gw=[],yw=[],ww=[];let Sw=null;hw.gst=class extends hw.Vn{constructor(t,s,i){super(),this.yst=t,this.Bc=t.yH(),this.Yn=i[0],this.wst=i[1],this.Sst=i[2],this.Uy=i[1],this.Vy=i[2],this.vst=!!i[3],this.bst=!!i[4],this.xst=i[5],this.Mst=i[6],this.Tst=i[7],this.Gst=null,this.d8=i[8],this.Vw=s,this.P8=0,this.A8=0,this.I8=1,this.E8=0,this._st=new Set,this.Cst=new Set,this.Ist=new Set,this.Est=[],this.Pst=[],this.Rst=new Map,this.Ast=new Map,this.Fst=[],this.Ost=!1,this.Dst=pw.create(),this.Lst=pw.create(),this.Nst=pw.create(),this.kst=[],this.Bst=[],this.$st=new Map,this.Wst=new Map,this.Ust=-1;const e=this.Bc.Dq();this.X8=hw.jn(hw.Z8,this,i[11]),this.Cz=hw.jn(hw.Xw.GU,e.K8(),{pU:(t,s)=>{const i=s.Sz()._O();t.UF(),t.OO(i),t.DO(i),e.t7(i)},gU:t=>this.OY().s7(t)}),this.i7=!0,this.Vst=!1,this.C8=null,this.zst={},this.jst=new Map,this.qst=!0,this.Hst=new self.FY(this),this.u7=hw.jn(hw.Event.Sf);for(const t of i[9])this.kst.push(hw.a8.p7(this,null,t));this.Jst();for(const t of this.QY())t.m7();for(const t of i[10]){const s=this.Bc.g7(t[1]);if(!s)throw new Error("missing nonworld object class");s.w7()||s.S7(t),this.Fst.push(t),this.y7(s)}}qn(){for(const t of this.Bst)t.qn();hw.bh(this.Bst),this.Ist.clear(),this.Gst=null,this.yst=null,this.Bc=null}yH(){return this.Bc}Pc(){return this.Yn}H7(){return this.d8}Rz(){return this.Vw}OY(){return this.X8}Pz(){return this.X7(),this.Cz}X7(){const t="low"===this.Bc.Dq().Ptt();if(!this.i7&&this.Vst===t&&!this.Cz.yV())return;const s=this.OY().K7();this.Cz.wV(s.map(t=>t.rC()),{wU:s.map(t=>t.Rz()),vU:t,TU:!0}),this.i7=!1,this.Vst=t}_0(){this.OY()._0(),this.i7=!0}Yst(){let t=this.Bst[0].utt();for(let s=1,i=this.Bst.length;s<i;++s){const i=this.Bst[s];0===i.zX()&&0===i.HX()||(t=Math.min(t,i.utt()))}return t}Xst(){return.5*this.Bc.m9()/this.Yst()}Zst(){return.5*this.Bc.g9()/this.Yst()}n9(){return this.JY()?-1/0:this.Xst()}r9(){return this.JY()?1/0:this.My()-this.Xst()}h9(){return this.JY()?-1/0:this.Zst()}o9(){return this.JY()?1/0:this.Gy()-this.Zst()}UY(t){const s=this.n9(),i=this.r9();t>i&&(t=i),t<s&&(t=s),this.P8!==t&&(this.P8=t,this.Kst(),this.Bc.Zq())}VY(){return this.P8}zY(t){const s=this.h9(),i=this.o9();t>i&&(t=i),t<s&&(t=s),this.A8!==t&&(this.A8=t,this.Kst(),this.Bc.Zq())}jY(){return this.A8}JY(){return this.vst}ist(){this.UY(this.VY()),this.zY(this.jY());for(const t of this.Bst)t.e9()&&(t.UY(t.VY()),t.zY(t.jY()))}cX(t,s){this.xst===t&&this.Mst===s||(this.xst=t,this.Mst=s,this.Qst()&&(this.tit(),this.Kst(),this.Bc.Zq()))}sit(){return this.gX()?.5:this.xst}iit(){return this.gX()?.5:this.Mst}dX(){return[this.sit(),this.iit()]}Ntt(){const t=this.sit(),s=this.iit();return t<0||t>1||s<0||s>1}pX(){this.bst&&(this.bst=!1,this.tit(),this.Kst(),this.Bc.Zq())}mX(){this.bst||(this.bst=!0,this.tit(),this.Kst(),this.Bc.Zq())}gX(){return this.bst}Qst(){return!this.gX()}hst(t){t=!!t,this.Ost!==t&&(this.Ost=t,this.Kst(),this.Bc.Zq())}C9(){return this.Ost}eit(t,s,i,e,n,r,h,o,a){nw(this.Dst,t,s,i)&&nw(this.Lst,e,n,r)&&nw(this.Nst,h,o,a)||(pw.set(this.Dst,t,s,i),pw.set(this.Lst,e,n,r),pw.set(this.Nst,h,o,a),this.nit())}nit(){this.Kst(),this.Bc.Zq()}M9(){return this.Dst}mtt(){return this.Lst}gtt(){return this.Nst}BY(){return this.I8}kY(t){this.I8!==t&&(this.I8=t,this.Kst(),this.ist(),this.Bc.Zq())}$Y(t){t=hw.Kn(t),this.E8!==t&&(this.E8=t,this.Kst(),this.Bc.Zq())}WY(){return this.E8}My(){return this.Uy}hy(t){!isFinite(t)||t<1||(this.Uy=t)}Gy(){return this.Vy}oy(t){!isFinite(t)||t<1||(this.Vy=t)}rit(){return this.Gst}q7(){return this.kst}*QY(){for(const t of this.kst)yield*t.MX()}KY(){return this.Bst}hit(){return this.Bst.length}jq(t){return"number"==typeof t?this.Hq(t):this.W7(t.toString())}Hq(t){return t=hw.Zn(Math.floor(t),0,this.Bst.length-1),this.Bst[t]}W7(t){return this.$st.get(t.toLowerCase())||null}oit(t){return!!this.W7(t)}ait(t){return this.Wst.get(t)||null}tit(){for(const t of this.Bst)t.ytt()}Kst(){for(const t of this.Bst)t.i9()}eX(t,s,i){if(this.oit(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=i>=2?s:s.wX(),n=hw.jn(hw.a8,this,e,{name:t,K6:Math.floor(1e15*Math.random()),Q6:!0});this.lit(n,s,i),this.yH().Zq(),this.z7()}rX(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.uit(t),this.lit(t,s,i),this.yH().Zq(),this.z7())}oX(t){if(this.uit(t)){const s=this.Bc.dj();s.wY(!0),t.qn(),s.wY(!1),this.yH().Zq(),this.z7()}}lX(){const t=new Set;for(const s of this.QY())s.J7()&&!s.Y7()&&t.add(s);if(0===t.size)return;const s=this.Bc.dj();s.wY(!0);for(const s of t)this.uit(s),s.qn();s.wY(!1),this.yH().Zq(),this.z7()}lit(t,s,i){if(i>=2)if(s){if(s===t||s.N9(t))throw new Error(`cannot move layer '${t.Pc()}' to sub-layer of itself`);s.A9(t,2===i),t.P9(s)}else 2===i?this.kst.push(t):this.kst.unshift(t),t.P9(null);else{const e=s.wX();if(e){if(s.N9(t))throw new Error(`cannot move layer '${t.Pc()}' to sub-layer of itself`);e.F9(t,s,0===i),t.P9(e)}else{let e=this.kst.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");0===i&&++e,this.kst.splice(e,0,t),t.P9(null)}}}uit(t){const s=t.wX();if(s)return s.O9(t),!0;if(this.kst.length>1){const s=this.kst.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");return this.kst.splice(s,1),!0}return!1}Jst(){this.Bst=[...this.QY()],this.$st.clear(),this.Wst.clear();for(let t=0,s=this.Bst.length;t<s;++t){const s=this.Bst[t];s.U7(t),this.$st.set(s.Pc().toLowerCase(),s),this.Wst.set(s.H7(),s)}}cit(){let t=0;for(const s of this.kst){for(const i of s.MX())i.V7(t);s.AX()&&t++}}fit(){return this.kst.at(-1).E2()+1}async z7(){this.Jst(),this.cit(),this.Ust=this.fit()}dit(){return this.Ust}pit(){this.Ust=-1}q9(t){const s=[];for(const i of this.kst){const e=i.E2();if(e===t)s.push(i);else if(e>t)break}return s}B9(){return{scrollX:this.VY(),scrollY:this.jY(),scale:this.BY(),angle:this.WY(),vpX:this.sit(),vpY:this.iit()}}W9(t){this.UY(t.scrollX),this.zY(t.scrollY),this.kY(t.scale),this.$Y(t.angle),this.cX(t.vpX,t.vpY)}mit(){let t=this.kst.filter(t=>t.L9())[0];for(;t;){if(!t.KX())return fw.No(t.eZ()),fw.Lo(1),fw;if(t.itt())return fw.Eo(0,0,0,0),fw;t=t.bX().filter(t=>t.L9())[0]}return fw.Eo(0,0,0,0),fw}M7(){return this.qst}git(){return[...this._st]}y7(t){if(t.EZ())for(const s of t.wit().yit())this._st.add(s);else this._st.add(t)}Sit(){return[...this.Cst]}vit(t,s){if(t===this||!s)return Promise.resolve();t&&(hw.mo(this.Cst,t.Cst),t.Cst.clear());const i=[];for(const t of this._st)this.Cst.has(t)||(i.push(t.bit(s)),this.Cst.add(t));return Promise.all(i)}async xit(t){if(t.B7())throw new Error("cannot load textures for family");const s=this.Bc.Dx();if(!s||s.DR()||this.Cst.has(t))return;this.Cst.add(t);const i=t.bit(s);this.Mit(i),await i,t.Tit(),this.Bc.Zq()}Mit(t){this.Ist.add(t),t.then(()=>this.Ist.delete(t)).catch(()=>this.Ist.delete(t))}Git(){return Promise.all([...this.Ist])}_it(t){if(t.B7()||t.pY()>0)throw new Error("cannot unload textures");const s=this.Bc.Dx();s&&this.Cst.has(t)&&(this.Cst.delete(t),t.Cit(s))}Iit(t,s){if(t!==this&&s)for(const s of this.Cst)s.o8()||t._st.has(s)||(s.Cit(),this.Cst.delete(s))}Eit(){this.Cst.clear()}async Pit(t){const s=this.Bc,i=this.yst,e=s.dj();this.Tst&&(this.Gst=e.Rit(this.Tst),this.Gst.Ait()),i.Fit(this),this.Uy=this.wst,this.Vy=this.Sst,this.P8=s.ij()/2,this.A8=s.nj()/2,this.ist(),this.tit(),this.Kst(),this.cit(),await this.Bc.Dq().Oit(this.fit(),!0),this.Dit(t),this.Bc.Lit(!0),this.Nit(),this.qst||this.kit(),this.Bit(this.Est),this.Bit(this.Pst),this.$it(),i.Wit(),s.xY(),this.Bc.Lit(!1);const n=this.Bc.Uit();if(await Promise.all(n),hw.bh(n),!s.Vit()){for(const t of this.Est)t.zit();for(const t of this.Pst)t.jit(this.Rst,this.Ast);for(const[t,s]of Object.entries(this.zst)){const i=this.Bc.x3(parseInt(t,10));i&&!i.B7()&&i.T7()&&hw.bh(s)}for(const t of this.Est)t.qit();for(const t of this.Pst)t.qit();for(const t of this.Est)t.GQ()||t.Hit();for(const t of this.Pst)t.GQ()||t.Hit()}hw.bh(this.Est),hw.bh(this.Pst),this.Rst.clear(),this.Ast.clear(),await Promise.all([...this._st].map(t=>t.Jit(this.Bc.Dx()))),t&&(s.Sf().dispatchEvent(new hw.Event("beforefirstlayoutstart")),await s.Yit(new hw.Event("beforeprojectstart"))),await this.Xit(new hw.Event("beforeanylayoutstart")),s.Sf().dispatchEvent(new hw.Event("beforelayoutstart")),await this.Yit(new hw.Event("beforelayoutstart")),s.Vit()||await s.hH(hw.uH.lH.aH.Zit,null,null),s.Sf().dispatchEvent(new hw.Event("afterlayoutstart")),await this.Yit(new hw.Event("afterlayoutstart")),await this.Xit(new hw.Event("afteranylayoutstart")),t&&(s.Sf().dispatchEvent(new hw.Event("afterfirstlayoutstart")),await s.Yit(new hw.Event("afterprojectstart"))),e.Kit(i),await this.Git(),this.qst=!1}Dit(t){for(const t of this.Bc.k7())if(!t.B7()&&t.EJ())for(const s of t.uY()){const t=s.zq(),i=t.jq(),e=i.Pc(),n=this.W7(e);if(n)t.Yq(n,!0),n.C7(s);else{const e=hw.Zn(i.Rz(),0,this.Bst.length-1),n=this.Bst[e];t.Yq(n,!0),n.C7(s)}}if(!t)for(const t of this.Bst)t.F7(!1)}Nit(){for(const t of this.Bst)t.x7(this.Est),t.D7()}kit(){let t=!1;for(const[s,i]of Object.entries(this.zst)){const e=this.Bc.x3(parseInt(s,10));if(e&&!e.B7()&&e.T7())for(const s of i){let i=null;if(e.EJ()&&(i=s.hasOwnProperty("instJson")?this.ait(s.instJson.w.l):this.ait(s.w.l),!i))continue;const n=this.Bc.G7(e,i,!1,0,0,!0);s.hasOwnProperty("instJson")?n.IM(s.instJson):n.IM(s),t=!0,this.Pst.push(n),s.hasOwnProperty("instJson")&&(this.Rst.set(n,s),this.Ast.set(s.index,n))}}for(const t of this.Bst)t.F7(!0),t.Xq();t&&(this.Bc.xY(),this.Bc.Qit())}Bit(t){for(const s of t){if(!s.EZ())continue;const i=s.zq(),e=s.FZ();for(const n of s.wZ().wit().RY()){if(n===s.wZ())continue;const r=n.uY();if(r.length>e)s.tet(r[e]);else{let e;e=i?this.Bc.G7(n,i.jq(),!0,i.pM(),i.yM(),!0):this.Bc.G7(n,null,!0,0,0,!0),this.Bc.xY(),n.iet(),s.tet(e),t.push(e)}}}}$it(){for(const t of this.Fst)this.Bc.g7(t[1]).EZ()||this.Bc.G7(t,null,!0)}eet(){const t=[],s=this.Fst;let i=0;for(let e=0,n=s.length;e<n;++e){const n=s[e],r=this.Bc.g7(n[1]);r.o8()?r.EZ()&&r.wit().net()||t.push(this.Bc.G7(n,null,!0)):(s[i]=n,++i)}hw.Sh(s,i),this.Bc.xY(),this.Bit(t)}N7(t,s,i,e,n,r,h){if(i)return i.N7(t,s,n,r,e,h);{const i=[];for(const o of this.Bst)i.push(o.N7(t,s,n,r,e,h));return i.flat()}}async ret(){const t=this.yst;this.Bc.Vit()||(await this.Xit(new hw.Event("beforeanylayoutend")),await this.Yit(new hw.Event("beforelayoutend")),await this.Bc.hH(hw.uH.lH.aH.het,null,null),await this.Yit(new hw.Event("afterlayoutend")),await this.Xit(new hw.Event("afteranylayoutend"))),t.oet(!0),this.Bc.dj().aet(),this.qst||this.let();for(const t of this.Bst)t.L7();for(const t of this.Bc.k7())if(!(t.o8()||t.EJ()||t.QJ().CJ()||t.B7())){for(const s of t.uY())this.Bc.TZ(s);this.Bc.xY()}t.oet(!1),t.vq()===this&&t.Fit(null)}uet(t,s){const i=t.wZ().H7().toString();this.zst.hasOwnProperty(i)||(this.zst[i]=[]);const e=this.zst[i],n={index:s,instJson:t.CM(),sceneGraphJson:{children:[]}};e.push(n),this.jst.set(t,n)}cet(t){const s=this.jst.get(t);for(const i of t.fet()){const t=this.jst.get(i);t&&s.sceneGraphJson.children.push({index:t.index,flags:hw.pet.det(i.zq())})}}let(){this.jst.clear();let t=0;for(const s of this.Bst){s.V9();for(const i of s.Jq()){const s=i.wZ();!s.o8()&&s.T7()&&(this.uet(i,t),t++)}}for(const t of this.Bst)for(const s of t.Jq()){const t=s.wZ();!t.o8()&&t.T7()&&this.cet(s)}this.jst.clear()}met(){this.zst={},this.qst=!0}_O(){return this.C8}itt(){const t=this.Bc,s=t.Dx().tx();return"low"===t.Dq().Ptt()||s&&t.Ett()||this.X8.ett()||s&&t.G9()}yet(t){const s=this.Bc.Dq();if(this.itt()){t.AO(null),t.SO(0,0,0,0);const i={xT:this.Bc.LW(),aG:t.pv()||this.Bc.Ett()||this.X8.ett(),oW:!!t.pv()&&this.Bc.Ett()};"low"===s.Ptt()&&(i.width=s.vtt(),i.height=s.btt()),this.C8=this.Bc.Rtt(i)}else this.C8=null}wet(t){this.Bc.vet(t)&&(t.xO(!1),t.AO(null),t.xv(),t.FO(this.C8))}bet(t){this.itt()&&(t.xO(!1),this.xet(t,this.C8))}Met(t){t.AO(this.C8),t.Pu(this.mit()),this.Bc.G9()&&t.bO();const s=this.q9(0);this.Att(t,this.C8,s,!0),t.pv()&&t.Ik(0,1),this.bet(t),this.C8=null}Tet(t,s){let i=null;this.Bc.vet(t)&&(i=this.C8),t.AO(i),t.SO(0,0,0,0),this.Bc.G9()&&t.bO();const e=this.q9(s);this.Att(t,i,e,!0),this.wet(t),t.Hb(),this.Bc.Dq().Get(s)}Att(t,s,i,e){const n=i.filter(t=>t.L9());for(let i=0,r=n.length;i<r;){const h=n[i];if(h.I9()&&!h.ntt()){mw.push(h);for(let t=i+1;t<r;++t){const s=n[t];if(!s.I9()||s.ntt())break;mw.push(n[t])}if(mw.length>=2||1===mw.length&&mw[0].D9()){this._et(t,s,mw),i+=mw.length,hw.bh(mw);continue}hw.bh(mw)}h.uT(t,s,e&&0===i),++i}}xet(t,s){const i=this.X8.K7(),e=this.Bc;0===i.length?(t.AO(null),t.xv(),t.FO(s),t.DO(s),e.t7(s)):(cw.set(0,0,e.m9(),e.g9()),this.Pz().IV(t,null,{EV:this,RV:3,devicePixelRatio:this.Bc.Ktt(),DB:this.Bc.tst()*this.BY(),LB:this.WY(),OB:cw,tz:null,yU:!0}))}_et(t,s,i){const e=i[0],n=e.Ttt(t);e.Ctt(t),i[0].KX()||(fw.No(i[0].eZ()),fw.Lo(1),t.Pu(fw)),t.xO(!0);const r=gw,h=yw,o=ww;for(const s of i)s.V9(),s.x9(r),s.Itt(t,"beforedraw");for(let i=0,e=r.length;i<e;){const n=r[i],a=n.zq(),l=a.jq();if(!a.CX()||!a.Wtt(l.$tt())){++i;continue}(!n.Utt()||a.Vtt()>0)&&o.push(n);const u=n.zq().VK();h.push(n);let c=i+1;for(;c<e;++c){const t=r[c],s=t.zq();if(s.CX()&&s.Wtt(s.jq().$tt())){if(s.VK()!==u)break;t.Utt()?(s.Vtt()>0&&o.push(t),h.push(t)):o.push(t)}}if(1!==h.length||h[0].ztt()){this.Cet(t,s,h);for(let i=0,e=o.length;i<e;++i){const e=o[i],n=e.zq(),r=n.jq();n.qtt(!0),rw(r,t),r.Btt(e,n,t,s),n.qtt(!1)}}else{rw(l,t),l.Btt(n,a,t,s);for(let i=0,e=o.length;i<e;++i){const e=o[i];if(e===n)continue;const r=e.zq(),h=r.jq();rw(h,t),h.Btt(e,r,t,s)}}i=c,hw.bh(h),hw.bh(o)}for(const s of i)s.Itt(t,"afterdraw");n&&t.VO(n),hw.bh(r),Sw=null}Cet(t,s,i){t.NO();for(let s=0,e=i.length;s<e;++s){const e=i[s],n=e.zq(),r=n.jq();n.Htt(!0),rw(r,t),r.Jtt(e,n,t)}t.kO();for(let e=0,n=i.length;e<n;++e){const n=i[e],r=n.zq(),h=r.jq();rw(h,t),h.Btt(n,r,t,s),r.Htt(!1)}t.$O()}cst(){const t={sx:this.VY(),sy:this.jY(),s:this.BY(),a:this.WY(),w:this.My(),h:this.Gy(),ortho:this.gX(),vpX:this.sit(),vpY:this.iit(),fv:this.qst,persist:this.zst,fx:this.X8.CM(),layers:{},dynamicLayers:[]};for(const s of this.Bst)if(s.J7()){const i=s.wX();t.dynamicLayers.push({sid:s.H7(),name:s.Pc(),parentSid:i?i.H7():null,siblingIndex:s.j7(),data:s.cst()})}else t.layers[s.H7().toString()]=s.cst();return t}fst(t){this.P8=t.sx,this.A8=t.sy,this.I8=t.s,this.E8=t.a,this.Uy=t.w,this.Vy=t.h,this.bst=!!t.ortho,t.hasOwnProperty("vpX")&&(this.xst=t.vpX),t.hasOwnProperty("vpY")&&(this.Mst=t.vpY),this.qst=!!t.fv,this.zst=t.persist,this.X8.IM(t.fx),this.i7=!0;for(const[s,i]of Object.entries(t.layers)){const t=parseInt(s,10),e=this.ait(t);e&&e.fst(i)}if(t.hasOwnProperty("dynamicLayers")){this.lX(),this.Bc.xY();const s=new Map,i=t.dynamicLayers;for(let t=i.length-1;t>=0;--t){const e=i[t],n=e.sid,r=e.name,h=e.parentSid,o=e.siblingIndex,a=e.data;if(this.Jst(),this.oit(r)||this.ait(n))continue;let l,u;if(null===h)l=null,u=this.kst;else{if(l=this.ait(h),!l)continue;u=l.bX()}const c=hw.jn(hw.a8,this,l,{name:r,K6:n,Q6:!0});u.push(c);let f=s.get(u);f||(f=[],s.set(u,f)),f.push({IK:c,Iet:o}),c.fst(a)}for(const[t,i]of s){i.sort((t,s)=>t.Iet-s.Iet);for(const s of i){const i=s.IK,e=s.Iet;let n=t.indexOf(i);t.splice(n,1),t.splice(e,0,i)}}}this.z7(),this.tit(),this.Kst()}bq(){return this.Hst}lj(){return this.u7}Y5(t){t.layout=this.bq();const s=this.Bc,i=s.aK()&&!s.dj().vY();i&&ow.Eet(),this.u7.dispatchEvent(t),i&&ow.Pet()}Yit(t){return t.layout=this.bq(),this.u7.Cf(t)}Xit(t){return t.layout=this.bq(),this.Bc.Yit(t)}Ret(){this.Aet(this.kst)}Aet(t,s=0){const i=t.slice(0);i.reverse();for(const t of i)console.log(`${"\t".repeat(s)}- ${t.Pc()}`),this.Aet(t.bX(),s+1)}}}{const vw=self.Cs;vw.Fet=class extends vw.Vn{#s;#i=[];#f=new Map;#a=new Map;#e=null;#t=[];#r=null;#h=0;#d=null;constructor(t){super(),this.#s=t}qn(){this.#s=null,this.#e=null,this.#r=null,this.#d=null,vw.bh(this.#i),this.#f.clear(),this.#a.clear(),vw.bh(this.#t)}e_(t){const s=vw.jn(vw.gst,this,this.#i.length,t);this.#i.push(s),this.#f.set(s.Pc().toLowerCase(),s),this.#a.set(s.H7(),s)}yH(){return this.#s}Oet(t){this.#r=t}Det(){if(this.#r)return this.#r;if(this.#i.length)return this.#i[0];throw new Error("no first layout")}Let(t){return this.#f.get(t.toLowerCase())||null}Net(t){return this.#a.get(t)||null}ket(t){return t=vw.Zn(Math.floor(t),0,this.#i.length-1),this.#i[t]}Tq(t){return"number"==typeof t?this.ket(t):this.Let(t.toString())}_q(){return this.#i}Fit(t){this.#e=t}vq(){return this.#e}Bet(t){if(this.#t.includes(t))throw new Error("layout already running");this.#t.push(t)}$et(t){const s=this.#t.indexOf(t);if(-1===s)throw new Error("layout not running");this.#t.splice(s,1)}*Wet(){this.#e&&(yield this.#e),this.#t.length&&(yield*this.#t)}Uet(t){return this.#e===t||this.#t.includes(t)}oet(t){if(t)this.#h++;else{if(this.#h<=0)throw new Error("already unset");this.#h--}}bY(){return this.#h>0}Eq(t){this.#d=t}Wit(){this.#d=null}Iq(){return!!this.#d}Vet(){return this.#d}zet(){const t=this.vq();t&&t.tit()}jet(){const t=this.vq();t&&t.Kst()}}}{const bw=self.Cs,xw=new RegExp("<(.+?)>","g");bw.qet=class extends bw.Vn{constructor(t){super(),this.Bc=t,this.Het=bw.jn(bw.Jet),this.Yet=null,this.Xet=[],this.Zet=new Map,this.Ket=new Map,this.Qet=new Map,this.tnt=[],this.snt=[],this.int=[],this.ent=!1,this.nnt=!1,this.rnt=!1,this.hnt=()=>this.ont(),this.ant=()=>this.lnt(),this.unt=()=>this.cnt(),this.fnt=()=>this.dnt(),this.pnt=t=>this.mnt(t.S0),this.gnt=t=>this.ynt(),this.wnt=t=>this.Snt(),this.vnt=t=>this.bnt(),this.xnt=[],this.Mnt=0}qn(){this.Tnt(),this.hnt=null,this.ant=null,this.unt=null,this.fnt=null,this.pnt=null,this.wnt=null;for(const t of this.Xet)t.c1(),t.qn();bw.bh(this.Xet),this.Xet=null,this.Het.qn(),this.Het=null,bw.bh(this.tnt),this.tnt=null,bw.bh(this.snt),this.snt=null,bw.bh(this.int),this.int=null,this.Zet.clear(),this.Zet=null,this.Ket.clear(),this.Ket=null,this.Qet.clear(),this.Qet=null,bw.bh(this.xnt),this.xnt=null,this.Bc=null}Gnt(){const t=this.Bc.Sf();t.addEventListener("pretick",this.hnt),t.addEventListener("tick2",this.ant),t.addEventListener("beforelayoutchange",this.unt),t.addEventListener("layoutchange",this.fnt),t.addEventListener("instancedestroy",this.pnt),t.addEventListener("beforeload",this.gnt),t.addEventListener("afterload",this.wnt),t.addEventListener("afterlayoutstart",this.vnt)}Tnt(){const t=this.Bc.Sf();t.removeEventListener("pretick",this.hnt),t.removeEventListener("tick2",this.ant),t.removeEventListener("beforelayoutchange",this.unt),t.removeEventListener("layoutchange",this.fnt),t.removeEventListener("instancedestroy",this.pnt),t.removeEventListener("beforeload",this.gnt),t.removeEventListener("afterload",this.wnt),t.removeEventListener("afterlayoutstart",this.vnt)}e_(t){this.Het.$u(t);const s=bw.Cnt._nt(t,this);this.$u(s),this.Int(s),this.Qet.set(s.Pc(),0)}Ent(t){const s=this.Pnt(),i=t.DZ(),e=s.qs(i),n=bw.Cnt.Ent(`${i}:${this.Qet.get(i)}`,e,this);return this.Rnt(i),this.$u(n),this.Bc.aK()&&globalThis.lK.Ant(n),n}Fnt(t){return this.Qet.get(t)}Rnt(t){this.Qet.set(t,this.Qet.get(t)+1)}Ont(){for(const t of this.Xet){if(t.Dnt())continue;const s=t.DZ();this.Rnt(s)}}Lnt(){for(const t of this.Qet.keys())this.Qet.set(t,0)}$u(t){this.Xet.push(t),this.Zet.set(t.Pc().toLowerCase(),t)}Kf(t){t.Nnt(),t.Dnt()||(bw.Ch(this.Xet,t),bw.Ch(this.tnt,t),bw.Ch(this.snt,t),bw.Ch(this.int,t),this.Zet.delete(t.Pc().toLowerCase()),this.knt(t),this.Bc.aK()&&globalThis.lK.Bnt(t),t.l1()||t.qn())}tK(t){this.Bc.tK(t,this.Yet,null)}yH(){return this.Bc}Pnt(){return this.Het}$nt(t){this.Yet=t}Wnt(){return this.Yet}*Unt(){for(const t of this.Xet)yield t}*Vnt(){for(const t of this.snt)yield t}znt(t,s){this.Ket.has(t)||this.Ket.set(t,new Set),this.Ket.get(t).add(s)}Int(t){for(const s of t.jnt())this.znt(s,t)}knt(t){for(const[s,i]of this.Ket.entries())i.has(t)&&(i.delete(t),0===i.size&&this.Ket.delete(s))}qnt(t){if(this.Ket.has(t))return this.Ket.get(t)}Hnt(t,s){if(s)for(const i of this.Xet)if(s.every(t=>i.Jnt(t.S0,t.trackId))&&i.Pc().includes(t.Pc()))return i}Ynt(t){return this.Zet.get(t.toLowerCase())||null}Xnt(t){for(const s of this.tnt)if(s.Pc()===t)return s;for(const s of this.snt)if(s.Pc()===t)return s;return null}*Znt(t){if(xw.test(t)){let s;xw.lastIndex=0;const i=new Set;do{if(s=xw.exec(t),s){const t=s[1].split(",");for(const s of t)i.add(s)}}while(s);for(const t of i.values()){const s=this.Ynt(t);s&&(yield s)}i.clear()}else{const s=this.Ynt(t);s&&(yield s)}}*Knt(t){for(const s of this.Xet)s.d1(t)&&(yield s)}Qnt(t){this.tnt.includes(t)||this.tnt.push(t),this.trt()}srt(t){bw.Ch(this.snt,t),this.irt()}ert(t){this.snt.includes(t)?(t.nrt(!0),t.rrt(!1),t.hrt(!1)):(t.nrt(!1),t.rrt(!0),t.hrt(!1),this.tnt.includes(t)||this.tnt.push(t)),this.trt()}ort(t){t.nrt(!1),t.rrt(!1),t.art(),bw.Ch(this.tnt,t),this.irt()}lrt(t){t.nrt(!1),t.rrt(!1),this.snt.includes(t)&&(t.hrt(!0),this.int.push(t),bw.Ch(this.snt,t)),this.tnt.includes(t)&&t.hrt(!0)}urt(t){t.nrt(!1),t.rrt(!1),t.hrt(!1),t.T1(1),bw.Ch(this.snt,t)}crt(t){this.lrt(t),t.art()}ont(){const t=this.yH();if(t.Vit())return;if(!this.ent)return;if(this.nnt)return;let s=0;for(t.aK()&&(s=performance.now()),this.rnt=!0;this.tnt.length;){const t=this.tnt.pop();t.frt()?(t.drt(),this.int.push(t)):(t.prt(),this.snt.push(t)),0!==t.mrt()&&(this.Mnt=1)}const i=this.Bc.grt(),e=this.Bc.yrt(),n=this.Bc.qj();for(let t=this.snt.length-1;t>=0;t--){const s=this.snt[t];s&&s.wrt(i,n,e)}this.rnt=!1,t.aK()&&globalThis.lK.Srt(performance.now()-s),0!==this.Mnt&&t.Zq()}lnt(){const t=this.yH();if(t.Vit())return;if(!this.ent)return;if(this.nnt)return;let s,i=0;t.aK()&&(i=performance.now());for(let t=0,i=this.int.length;t<i;t++){const i=this.int[t];s||(s=new Set),i.Nnt(),this.vrt(i),s.add(i)}if(s){bw.Ph(this.int,s),this.Mnt=0;for(let t=0,s=this.snt.length;t<s;t++)if(0!==this.snt[t].mrt()){this.Mnt=1;break}}this.irt(),t.aK()&&globalThis.lK.Srt(performance.now()-i)}vrt(t){t.l1()||t.brt()&&t.z1()&&t.xrt()&&t.Mrt()}trt(){this.ent||(this.ent=!0)}irt(){this.int.length||this.snt.length||this.tnt.length||this.rnt||(this.ent=!1)}cnt(){for(this.nnt=!0;this.tnt.length;)this.ort(this.tnt.pop());const t=new Set;for(const s of this.snt)s.cnt()&&(s.Nnt(),t.add(s));bw.Ph(this.snt,t),t.clear();for(const s of this.int)s.cnt()&&(s.Nnt(),t.add(s));bw.Ph(this.int,t),this.irt();for(const t of this.Xet)t.Trt()}dnt(){this.nnt=!1}mnt(t){const s=t.wZ(),i=this.qnt(s);if(i)if(this.Bc.Vit())this.xnt.push(t);else for(const t of i)t.Dnt()||(t.l1()?this.Kf(t):t.brt()||(this.vrt(t),this.Kf(t)))}ynt(){for(const t of this.tnt.map(t=>t))this.vrt(t),this.Kf(t);for(const t of this.snt.map(t=>t))this.vrt(t),this.Kf(t)}Snt(){for(const t of this.xnt)this.mnt(t);bw.bh(this.xnt);for(const t of this.Xet)t.Snt()}bnt(){const t=this.Bc.Mq().vq();if(t)for(const s of this.Xet){const i=s.Grt();i&&t.Pc()===i&&this.ert(s)}}cst(){return{timelinesJson:this._rt(),scheduledTimelinesJson:this.Crt(),playingTimelinesJson:this.Irt(),markedForRemovalTimelinesJson:this.Ert(),hasRuntimeListeners:this.ent,changingLayout:this.nnt,isTickingTimelines:this.rnt}}fst(t){t&&(this.Lnt(),this.Prt(t.timelinesJson),this.Rrt(t.scheduledTimelinesJson),this.Art(t.playingTimelinesJson),this.Frt(t.markedForRemovalTimelinesJson),this.ent=!t.hasRuntimeListeners,this.nnt=!!t.changingLayout,this.rnt=!!t.isTickingTimelines,this.Ont(),this.trt(),this.irt())}_rt(){return this.Xet.map(t=>t.cst())}Prt(t){for(const s of t){let t=this.Ynt(s.name);if(t)t.fst(s);else{const i=this.Ort(s);if(!i)continue;const e=this.Ynt(i);t=this.Ent(e),t.fst(s)}t.Drt()||this.Kf(t)}}Ort(t){const s=t.name.split(":");return s&&2===s.length?s[0]:null}Crt(){return this.Lrt(this.tnt)}Rrt(t){this.Nrt(t,this.tnt)}Irt(){return this.Lrt(this.snt)}Art(t){this.Nrt(t,this.snt)}Ert(){return this.Lrt(this.int)}Frt(t){this.Nrt(t,this.int)}krt(t,s){if(!s)return!1;for(const i of s)if(i===t.Pc())return!0;return!1}Lrt(t){return t.map(t=>t.Pc())}Nrt(t,s){const i=new Set;for(const e of s)this.krt(e,t)||i.add(e);if(bw.Ph(s,i),t){const i=t=>s=>s.Pc()===t;for(const e of t){const t=this.Ynt(e);t&&(s.find(i(e))||s.push(t))}}}}}{const Mw=self.Cs,Tw=100,Gw=.01,_w=25,Cw=20,Iw=5,Ew=[0,0],Pw=[0,0],Rw=[0,0],Aw=[0,0,0,0,0],Fw=new Array(4),Ow=[{x:0,y:0,t:0,bt:0},{x:0,y:0,t:0,bt:0},{x:0,y:0,t:0,bt:0}],Dw={x:0,y:0,t:0,bt:0};Mw.Brt=class{constructor(t,s){this.$rt=!1,this.Wrt=t,this.Urt=[];let i=null;if(i=s?this.Wrt.Vrt(s):Mw.$h(this.Wrt.zrt()),!i)return;const e=i.J1("offsetX"),n=i.J1("offsetY");if(!e||!n)return;this.jrt=e,this.qrt=n;const r=e.Hrt(),h=n.Hrt();for(let t=1,s=Math.min(r.length,h.length);t<s;++t){const s=r[t],i=(s.Jrt(),s.Yrt()),e=h[t],n=(e.Jrt(),e.Yrt());i&&"cubic-bezier"===i.Xrt()&&n&&"cubic-bezier"===n.Xrt()?this.Urt.push(Mw.jn(Mw.Zrt,i,n,s,e,this.Urt.length)):(i&&"line"===i.Xrt()&&n&&n.Xrt(),this.Urt.push(Mw.jn(Mw.Krt,s,e,this.Urt.length)))}this.$rt=!0}qn(){for(const t of this.Urt)t.qn();Mw.bh(this.Urt),this.Urt=null,this.Wrt=null,this.jrt=null,this.qrt=null}Qrt(){return this.$rt}tht(){return this.Urt}sht(t){const s="relative"===this.jrt.iht()?t.pM():0,i="relative"===this.qrt.iht()?t.yM():0;for(const t of this.Urt)t.sht(s,i)}Zw(t,s,i){let e=NaN,n=this.Urt.length;for(let i=0;i<n;i++){const n=this.Urt[i];if("cubic-bezier"===n.aC()){const i=n.Zw(t,s);(isNaN(e)||i[3]<e)&&(e=i[3],Rw[0]=i[2],Rw[1]=n.Rz())}}return Rw}eht(t,s,i){const e=i.nht;Mw.te(e[0])||(e[0]=0),Mw.te(e[1])||(e[1]=1);let n=NaN,r=this.Urt.length;for(let i=0;i<r;i++){const r=this.Urt[i];if("cubic-bezier"===r.aC()){const i=r.rht(t,s,e);(isNaN(n)||i[3]<n)&&(n=i[3],Rw[0]=i[2],Rw[1]=r.Rz())}}return Rw}hht(t,s){return this.Urt[s].hht(t)}oht(t,s){return this.Urt[s].oht(t)}},Mw.Zrt=class{constructor(t,s,i,e,n){this.Vw=n;const r=t.aht("cubic-bezier"),h=i.aht("cubic-bezier"),o=s.aht("cubic-bezier"),a=e.aht("cubic-bezier");this.lht=t.uht(),this.cht=s.uht(),this.fht=t.uht()+r.dht(),this.pht=s.uht()+o.dht(),this.mht=i.uht()+h.ght(),this.yht=e.uht()+a.ght(),this.wht=i.uht(),this.Sht=e.uht(),this.vht=0,this.bht=0,this.xht=0,this.Mht=0,this.Tht=0,this.Ght=0,this._ht=0,this.Cht=0,this.Iht=0,this.Eht=0,this.Pht=0,this.Rht=0,this.Aht=0,this.Fht=0,this.Oht=0,this.Dht=0,this.Lht=0,this.Nht=0,this.kht=0,this.Bht=0,this.$ht=NaN,this.$rt=!1,this.Wht=100,this.Uht=new Array(this.Wht+1),this.Uht[0]=0,this.Vht=0,this.zht=[],this.jht=[];for(let t=0;t<100;t++)this.jht.push({x:0,y:0,t:0,bt:0});this.qht()}qn(){Mw.bh(this.Uht),this.Uht=null,Mw.bh(this.zht),this.zht=null,Mw.bh(this.jht),this.jht=null}aC(){return"cubic-bezier"}Rz(){return this.Vw}Hht(){return Math.floor(this.Vht/25)}Jht(){return 1/this.Hht()}sht(t,s){this.Yht=t,this.Xht=s,this.Uht=new Array(this.Wht+1),this.Uht[0]=0,this.qht(),this.vht=this.lht+this.Yht,this.bht=this.cht+this.Xht,this.xht=this.fht+this.Yht,this.Mht=this.pht+this.Xht,this.Tht=this.mht+this.Yht,this.Ght=this.yht+this.Xht,this._ht=this.wht+this.Yht,this.Cht=this.Sht+this.Xht,this.Iht=3*(this.xht-this.vht),this.Eht=3*(this.Mht-this.bht),this.Pht=3*(this.Tht-this.xht),this.Rht=3*(this.Ght-this.Mht),this.Aht=3*(this._ht-this.Tht),this.Fht=3*(this.Cht-this.Ght),this.Oht=3*(this.xht-this.vht),this.Dht=3*(this.vht+this.Tht-2*this.xht),this.Lht=this._ht-this.vht+3*(this.xht-this.Tht),this.Nht=3*(this.Mht-this.bht),this.kht=3*(this.bht+this.Ght-2*this.Mht),this.Bht=this.Cht-this.bht+3*(this.Mht-this.Ght)}Map(t){if(!this.$rt)return NaN;const s=this.Zht(t);return Pw[0]=this.Kht(s),Pw[1]=this.Qht(s),Pw}Zw(t,s){const i=this.tot(100),e=this.sot(t,s,i),n=this.iot(t,s,i,e);return Aw[0]=n.x,Aw[1]=n.y,Aw[2]=n.t,Aw[3]=n.bt,Aw}rht(t,s,i){const e=this.tot(100),n=this.eot(t,s,e,i),r=this.iot(t,s,e,n);return Aw[0]=r.x,Aw[1]=r.y,Aw[2]=r.t,Aw[3]=r.bt,Aw}hht(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.Iht+e*this.Pht+n*this.Aht,h=i*this.Eht+e*this.Rht+n*this.Fht,o=Mw.sr(r,h);return Ew[0]=r/o,Ew[1]=h/o,Ew}oht(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.Iht+e*this.Pht+n*this.Aht,h=i*this.Eht+e*this.Rht+n*this.Fht;return Math.atan2(h,r)}Zht(t){if(!this.$rt)return;let s=t*this.Uht[this.Wht],i=0,e=this.Wht,n=0;for(;i<e;)n=i+((e-i)/2|0),this.Uht[n]<s?i=n+1:e=n;this.Uht[n]>s&&n--;const r=this.Uht[n];return r===s?n/this.Wht:(n+(s-r)/(this.Uht[n+1]-r))/this.Wht}Kht(t){return this.$rt?self.Vu.hc("cubicbezier")(t,this.lht+this.Yht,this.fht+this.Yht,this.mht+this.Yht,this.wht+this.Yht):NaN}Qht(t){return this.$rt?self.Vu.hc("cubicbezier")(t,this.cht+this.Xht,this.pht+this.Xht,this.yht+this.Xht,this.Sht+this.Xht):NaN}tot(t){if(t=t||100,this.zht.length>=t)return this.zht;this.zht=new Array(t),t++;for(let s=0;s<t-1;s++){const i=s/(t-1),e=i**2,n=i**3,r=this.Oht*i,h=this.Dht*e,o=this.Lht*n,a=this.Nht*i,l=this.kht*e,u=this.Bht*n,c=this.vht+r+h+o,f=this.bht+a+l+u;this.jht[s].x=c,this.jht[s].y=f,this.jht[s].t=i,this.jht[s].bt=0,this.zht[s]=this.jht[s]}return this.zht}sot(t,s,i,e=null,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.$ht))for(let e=0;e<100;e++){const h=i[e],o=h.x-t,a=h.y-s;h.bt=o*o+a*a,h.bt<n&&(n=h.bt,r=e)}else{for(let e=this.$ht;e<this.$ht+5&&!(e>=i.length);e++){const h=i[e],o=h.x-t,a=h.y-s;h.bt=o*o+a*a,h.bt<n&&(n=h.bt,r=e)}for(let e=this.$ht;e>this.$ht-5&&!(e<0);e--){const h=i[e],o=h.x-t,a=h.y-s;h.bt=o*o+a*a,h.bt<n&&(n=h.bt,r=e)}}return this.$ht=r,r}eot(t,s,i,e,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.$ht))for(let h=0;h<100;h++){const o=i[h],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.bt<n&&(n=o.bt,r=h)}else{for(let h=this.$ht;h<this.$ht+5&&!(h>=i.length);h++){const o=i[h],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.bt<n&&(n=o.bt,r=h)}for(let h=this.$ht;h>this.$ht-5&&!(h<0);h--){const o=i[h],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.bt<n&&(n=o.bt,r=h)}}return this.$ht=r,r}iot(t,s,i,e){let n=i[e],r=1,h=Number.MAX_SAFE_INTEGER;t:do{const r=i.length;let o=0===e?0:e-1,a=e===r-1?r-1:e+1,l=i[o].t,u=(i[a].t-l)/4;if(u<.001)break;Fw[0]=i[o];for(let i=1;i<=2;i++){const r=l+i*u,o=r**2,a=r**3,c=this.Oht*r,f=this.Dht*o,d=this.Lht*a,p=this.Nht*r,m=this.kht*o,g=this.Bht*a,y=this.vht+c+f+d,w=this.bht+p+m+g,S=y-t,v=w-s,b=S*S+v*v;if(b<h){h=b,e=i,Dw.x=y,Dw.y=w,Dw.t=r,Dw.bt=b,n=Dw;break t}const x=Ow[i-1];x.x=y,x.y=w,x.t=r,x.bt=b,Fw[i]=x}Fw[3]=i[a],i=Fw}while(r++<20);return n}qht(){this.$rt=!0;let t=this.Kht(0),s=this.Qht(0),i=0;for(let e=1;e<=this.Wht;e++){const n=this.Kht(.01*e),r=this.Qht(.01*e),h=t-n,o=s-r;i+=Mw.sr(h,o),this.Uht[e]=i,t=n,s=r}this.Vht=i}},Mw.Krt=class{constructor(t,s,i){this.Vw=i,this.not=t.uht(),this.rot=s.uht(),this.Yht=0,this.Xht=0}qn(){}aC(){return"line"}Rz(){return this.Vw}sht(t,s){this.Yht=t,this.Xht=s}pM(){return this.not+this.Yht}yM(){return this.rot+this.Xht}}}{const Lw=self.Cs,Nw=0,kw=1;Lw.Cnt=class extends Lw.Vn{constructor(t,s,i){super(),this.Bc=i.yH(),this.hot=i,this.oot=s,this.Yn=t,this.aot=[],this.lot=0,this.uot=null,this.cot=0,this.fot(),this.dot=null,this.pot=null,this.mot=0,this.got=0,this.yot=1,this.wot=0,this.Sot=-1,this.vot=1,this.bot=!1,this.xot=!1,this.Mot=!1,this.Tot=!0,this.Got=!1,this._ot=!1,this.Cot=-1,this.Iot=!1,this.Eot=!1,this.Pot=!1,this.Rot=!1,this.Aot=NaN,this.Fot=[""],this.Oot="",this.Dot=!1,this.Mnt=0,this.Lot=0,this.Not=null,this.kot=null}static _nt(t,s){const i=s.Pnt(),e=i.Bot(),n=i.qs(t[e]),r=Lw.jn(Lw.Cnt,t[e],n,s);return r.$ot(!0),r}static Ent(t,s,i){return Lw.jn(Lw.Cnt,t,s,i)}qn(){if(this.l1())return;const t=this.Bc.Sf();this.hot.ort(this),this.hot.crt(this);for(const t of this.aot)t.qn();Lw.bh(this.aot),this.aot=null,this.Bc=null,this.hot=null,this.oot=null,this.Got=!0,this.dot=null,this.pot=null,this.Wot(t)}Wot(t){const s=Lw.jn(Lw.Event,"timelinestatereleased");s.Uot=this,t.dispatchEvent(s)}aC(){return 0}fot(){for(const t of this.oot.zot().Vot())this.lot=this.aot.push(Lw.jot.e_(this,t))}qot(){return this.hot}yH(){return this.Bc}zrt(){return this.aot}Hot(t,s,i,e){if(!this.Lot)return;let n;for(let r=0;r<this.aot.length;r++){let h=this.aot[r];if(t!==h.B1())continue;const o=h.J1(i);o&&s.constructor===o.Jot().constructor&&o.iht()===e.iht()&&(n||(n=[]),n.push(o))}return n}Drt(){return!!this.aot.length}Vrt(t){for(const s of this.aot)if(Lw.Ke(s.q1(),t))return s;return null}Yot(t){for(const s of this.aot)if(!s.Xot()&&Lw.Ke(s.Pc(),t))return s;return null}C3(t){this.Yn=t}Pc(){return this.Yn}Zot(){return this.oot}DZ(){return this.oot.Pc()}w1(){return this.oot.w1()}g1(t){this.oot.g1(t)}Kot(){return this.oot.Kot()}Qot(t){this.oot.Qot(t)}tat(){return this.oot.tat()}sat(t){this.oot.sat(t)}iht(){return this.oot.iht()}iat(t){this.oot.iht(t)}N1(t){for(const s of this.zrt())s.N1(t)}v1(){return this.oot.v1()}S1(t){return this.oot.S1(t)}M1(){return this.oot.M1()}b1(t){return this.oot.b1(t)}O0(){return this.oot.O0()}eat(){return this.vot}nat(t){return this.oot.nat(t)}T1(t){if(t=Number(t),Lw.te(t))return this.yot=t}G1(){return this.yot}Grt(){return this.oot.Grt()}rat(){return this.oot.rat()}hat(){return this.oot.hat()}oat(){return this.wot}aat(){return!this.IsPlaying()||this.yot>0}lat(){return this.IsPlaying()?"playing":this.P1()?"paused":this.z1()?"complete":"other"}C1(){return this.dot||(this.dot=new Promise(t=>{this.pot=t})),this.dot}art(){this.dot&&(this.pot(),this.dot=null,this.pot=null)}uat(t){this.Fot=Lw.Cnt.cat(t),this.Dot=!0}_1(){return this.Fot}fat(){return this.Dot&&(this.Oot=this.Fot.join(" ")),this.Dot=!1,this.Oot}d1(t){if(!this.Fot)return!1;if(!this.Fot.length)return!1;const s=Lw.Cnt.cat(t);return!!s&&!!s.length&&s.every(Lw.Cnt.dat,this)}pat(){Lw.uH.mat&&this.constructor===Lw.Cnt&&(Lw.uH.mat.aH.gat(this),this.hot.tK(Lw.uH.mat.aH.yat),this.hot.tK(Lw.uH.mat.aH.wat),this.hot.tK(Lw.uH.mat.aH.Sat),this.hot.tK(Lw.uH.mat.aH.vat),Lw.uH.mat.aH.bat())}xat(){this.Cot=this.Bc.Uj()}Mrt(){this.Pot||(this.Pot=!0,Lw.uH.mat&&this.constructor===Lw.Cnt&&(Lw.uH.mat.aH.gat(this),this.hot.tK(Lw.uH.mat.aH.Mat),this.hot.tK(Lw.uH.mat.aH.Tat),this.hot.tK(Lw.uH.mat.aH.Gat),this.hot.tK(Lw.uH.mat.aH._at),Lw.uH.mat.aH.bat()))}nrt(t){this.bot=t}Cat(){return this.Cot===this.Bc.Uj()}IsPlaying(t=!1){return!!this.Cat()||!(!this.Iat()||t)||this.bot}Eat(){return this.IsPlaying(!0)}P1(){return this.Pat()}Pat(){return!(this.l1()||this.Iat()||this.Eat()||this.z1())}rrt(t){this.xot=t}Iat(){return this.xot}Rat(t){this.Tot=t;const s=this.v1(),i=this.M1();if(s||i){if(s&&!i);else if(!s&&i){const t=this.fU();1===this.wot&&(t<=0||t>=this.w1())&&(this.Tot=!0)}}else{const t=this.fU();(t<=0||t>=this.w1())&&(this.Tot=!0)}}z1(){return this.Tot}l1(){return this.Got}hrt(t){this._ot=t}frt(){return this._ot}Aat(t){this.Iot=t}Fat(){return this.Iot}$ot(t){this.Eot=!!t}Dnt(){return this.Eot}xrt(){return this.Mot}fU(){return this.mot}m1(t){if(t=Number(t),!Lw.te(t))return;const s=this.fU();this.Oat(t),this.Rat(!1),this.z1()||this.Aat(!0),(this.Eat()||this.Iat()||!this.Mot)&&(this.Eat()||this.Iat()||this.Mot?this.Eat()?this.c1():this.Iat()&&(this.hot.ort(this),this.Dat()):this.Dat()),this.Lat(),this.Nat(this.fU(),!1,!0,!0,s),this.kat(),this.Mnt&&this.yH().Zq(),this.Bat()}Oat(t){Lw.te(t)||(t=this.w1()),t<0?this.mot=0:t>=this.w1()?this.mot=this.w1():this.mot=t}$at(t){Lw.te(t)||(t=this.w1()),t<0?this.mot=0:t>=this.w1()?this.mot=this.w1():this.mot=t;for(const t of this.aot)t.Wat()}Bat(){Lw.uH.mat&&this.constructor===Lw.Cnt&&(Lw.uH.mat.aH.gat(this),this.hot.tK(Lw.uH.mat.aH.Uat),this.hot.tK(Lw.uH.mat.aH.Vat),this.hot.tK(Lw.uH.mat.aH.zat),Lw.uH.mat.aH.bat())}jat(){if(this.v1())return!0;if(this.M1()&&1===this.wot){if(this.aat()){if(this.fU()>=this.w1())return!1}else if(this.fU()<=0)return!1}else if(!this.v1()&&!this.M1())if(this.aat()){if(this.fU()>=this.w1())return!1}else if(this.fU()<=0)return!1;return!0}f1(){this.l1()||this.jat()&&this.Play(!0)}Play(t=!1){return!this.l1()&&!this.Iat()&&(this.Eat()&&this.Cat()?this.qat():!this.Eat()&&!!(this.z1()||t||this.Fat())&&this.Hat())}qat(){return this.Aat(!1),this.hot.srt(this),this.hot.ert(this),this.C1(),!0}Hat(){return this.Aat(!1),this.hot.ert(this),this.C1(),!0}c1(t=!1){this.l1()||(this.Rat(t),this.hot.lrt(this),this.z1()&&this.art())}$f(t=!0,s=!1){if(this.l1())return;if(!this.Eat()&&this.Iat())return this.hot.ort(this);if(this.z1())return;this.c1(!0),this.aat()?this.Oat(0):this.Oat(this.w1());const i=this.fU();this.Lat(),s?this.Jat(i):this.Nat(i,!1,!1,!0),t&&this.Bat(),this.kat(),this.Mnt&&t&&this.yH().Zq()}Yat(){this.$f(!1,!0)}Jat(t){this.Nat(t,!1,!1,!0,NaN,!1,!0)}cnt(){return!!this.l1()||!(!this.yH().Vit()&&this.Xat())&&(this.hot.urt(this),this.yH().Vit()||this.Yat(),!0)}Dat(){this.prt(!0)}drt(){this.prt(!1,!0),this.nrt(!1),this.rrt(!1)}prt(t=!1,s=!1){if(!this.frt()||s)if(t){this.Pot=!1,this.Mot=!0,this.Rot=!0,this.Lat();for(const t of this.aot)t.prt();this.kat()}else if(this.nrt(!0),this.rrt(!1),this.pat(),this.z1()){this.Cot=-1,0!==this.wot&&(this.yot=Math.abs(this.yot)),this.wot=0,this.Sot=-1,this.vot=1,this.Tot=!1,this.Pot=!1,this.Mot=!0,this.Rot=!0,this.aat()?this.Oat(0):this.Oat(this.w1()),this.Lat();for(const t of this.aot)t.prt();this.kat()}else{-1!==this.Sot&&(this.wot=this.Sot),this.Rot=!0,this.Pot=!1,this.Lat();for(const t of this.aot)t.Zat();this.kat()}}mrt(){return this.Mnt}Lat(){this.Lot=0;for(const t of this.aot)t.eA()&&(this.Lot=1)}kat(){this.Mnt=0;for(const t of this.aot)t.Kat(),0===this.Mnt&&1===t.mrt()&&(this.Mnt=1),this.uot||1!==t.Qat()||(this.uot||(this.uot=[]),this.cot=this.uot.push(t))}wrt(t,s,i){if(this.hat()){if(0===t&&0===this.Aot)return;this.Aot=t,t=i}else{if(0===i&&0===this.Aot)return;this.Aot=i,t=i,s=1}const e=this.mot+this.got,n=e+t*s*this.yot,r=this.oot.tlt;n<0?(this.mot=0,this.got=-n):n>=r?(this.mot=r,this.got=this.mot-n):(this.mot=n,this.got=0);let h=!1,o=!1;const a=this.v1(),l=this.M1();let u;a||l?a&&!l?this.yot>0?this.mot>=r&&(this.$at(0),o=!0):this.mot<=0&&(this.$at(r),o=!0):!a&&l?this.yot>0?this.mot>=r&&(this.Oat(r),this.T1(-1*this.G1()),o=!0,1===this.wot?this.vot<this.O0()?(this.vot++,this.wot=0):h=!0:0===this.wot&&(this.wot=1)):this.mot<=0&&(this.Oat(0),this.T1(-1*this.G1()),o=!0,1===this.wot?this.vot<this.O0()?(this.vot++,this.wot=0):h=!0:0===this.wot&&(this.wot=1)):a&&l&&(this.yot>0?this.mot>=r&&(this.Oat(r),this.T1(-1*this.G1()),o=!0,this.wot++,Lw.wrap(this.wot,0,2)):this.mot<=0&&(this.Oat(0),this.T1(-1*this.G1()),o=!0,this.wot++,Lw.wrap(this.wot,0,2))):this.yot>0?this.mot>=r&&(this.vot<this.O0()?(this.vot++,this.$at(0),o=!0):(this.Oat(r),h=!0)):this.mot<=0&&(this.vot<this.O0()?(this.vot++,this.$at(r),o=!0):(this.Oat(0),h=!0));const c=this.lot;if(h){for(u=0;u<c;u++)this.aot[u].slt();return this.c1(!0),void this.xat()}const f=this.cot;for(u=0;u<f;u++)this.uot[u].ilt();if(1===this.Lot)for(u=0;u<c;u++){const t=this.aot[u],s=t.elt();this.mot-s<0&&e-s>0?(this.mot=s<0?0:s>=r?r:s,t.vc(s,!0,!1,o,this.Rot,!1)):t.vc(this.mot,!0,!1,o,this.Rot,!1)}else for(u=0;u<c;u++)this.aot[u].vc(this.mot,!0,!1,o,this.Rot,!1);if(!this.IsPlaying()&&this.Not){const t=this.Not.fU()+this.Not.rlt().nlt().elt(),s=this.mot-t;this.mot-=s,0!==this.got&&(this.got-=s),this.Not=null}for(u=0;u<f;u++)this.uot[u].hlt();this.Rot&&(this.Rot=!1)}olt(t){this.Not=t}llt(){return this.Not}Nat(t,s=!1,i=!1,e=!1,n=NaN,r=!1,h=!1){for(const t of this.aot)t.ilt();for(const r of this.aot){let o=t;if("number"==typeof n&&!isNaN(n)){const t=this.fU()-r.elt(),s=n-r.elt();t<0&&s>0&&(o=r.elt(),this.Oat(o))}r.vc(o,s,i,e,this.Rot,h)}for(const t of this.aot)t.hlt();this.Rot&&r&&(this.Rot=!1)}ult(){const t=this.oot.zot().clt(),s=Lw.jot.e_(this,t);return this.lot=this.aot.push(s),s}Nnt(){if(!this.l1())for(const t of this.aot)t.flt()}Trt(){for(const t of this.aot)t.Trt()}*uY(){for(const t of this.aot)t.B1()&&(yield t.B1())}dlt(){for(const t of this.aot)t.plt()}mlt(t,s,i){if(s){if("number"==typeof i&&i>=0){const t=this.aot[i];if(!t)return;return t.glt(s),void this.hot.znt(s.wZ(),this)}for(const i of this.aot)if(i.Xot()){if(t){if(i.q1()!==t)continue;i.glt(s),this.hot.znt(s.wZ(),this);break}if(!i.ylt()){i.glt(s),this.hot.znt(s.wZ(),this);break}}}}Jnt(t,s){for(const i of this.aot)if(i.Xot())if(s){if(s===i.q1()&&t===i.B1())return!0}else if(t===i.B1())return!0;return!1}brt(){return this.aot.some(t=>!t.Xot()||t.wlt())}Xat(){return this.aot.some(t=>{if(t.Xot()){if(!t.wlt())return!1;const s=t.wZ();return!!s&&s.o8()}return!1})}J1(t){for(const s of this.zrt())for(const i of s.Slt())if(i.vlt()===t)return i}blt(t){for(const s of this.aot)if(t===s.B1())return s;return null}xlt(t){let s=t?t.split(" "):[];const i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const t of this.zrt())for(const i of t.Mlt())if(s.every(t=>i.Tlt(t)))return i}jnt(){const t=[];for(const s of this.zrt())t.push(s.wZ());return t.filter(t=>t)}Snt(){for(const t of this.zrt())t.Snt()}cst(){return{tracksJson:this.Glt(),name:this.Yn,playheadTime:this.fU(),playbackRate:this.yot,pingPongState:this.wot,resumePingPongState:this.Sot,currentRepeatCount:this.vot,isPlaying:this.bot,isScheduled:this.xot,initialStateSet:this.Mot,finishedTriggers:this.Pot,complete:this.Tot,released:this.Got,markedForRemoval:this._ot,completedTick:this.Cot,implicitPause:this.Iot,isTemplate:this.Eot,tags:this.Fot.join(" "),stringTags:this.Oot,tagsChanged:this.Dot,firstTick:this.Rot}}fst(t){t&&(this._lt(t.tracksJson),this.Yn=t.name,this.mot=t.playheadTime,this.yot=t.playbackRate,this.wot=t.pingPongState,this.Sot=t.hasOwnProperty("resumePingPongState")?t.resumePingPongState:-1,this.vot=t.currentRepeatCount,this.bot=!!t.isPlaying,this.xot=!!t.isScheduled,this.Mot=!!t.initialStateSet,this.Pot=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.Tot=!!t.complete,this.Got=!!t.released,this._ot=!!t.markedForRemoval,this.Cot=t.completedTick,this.Iot=!!t.implicitPause,this.Eot=!!t.isTemplate,this.Fot=t.tags.split(" "),this.Oot=t.stringTags,this.Dot=!!t.tagsChanged,this.Rot=!!t.firstTick)}Glt(){return this.aot.map(t=>t.cst())}_lt(t){this.dlt(),t.forEach((t,s)=>{this.aot[s].fst(t)}),this.aot.filter(t=>t.wlt())}static dat(t){const s=this._1();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static cat(t){if(Lw.Te(t))return t.slice(0);if(Lw.le(t))return t.split(" ");throw new Error("invalid tags")}Clt(){return this.kot||(this.kot=Lw.jn(self.A1,this)),this.kot}}}{const Bw=self.Cs,$w=0,Ww=1,Uw=2;Bw.jot=class extends Bw.Vn{constructor(t,s){super(),this.Wrt=t,this.Ilt=s,this.Elt=s.zot(),this.Plt=NaN,this.Rlt=NaN,this.Alt=null,this.Flt=null,this.Olt=!1,this.ZR=s.elt()>0,this.Dlt=!1,this.Llt=!1,this.Nlt=NaN,this.klt=null,this.Blt=this.Ilt.rlt().$lt(),this.Wlt=[],this.Ult(),this.Vlt=0,this.Mnt=0,this.zlt=0}static e_(t,s){return Bw.jn(Bw.jot,t,s)}qn(){this.Blt=null;for(const t of this.Wlt)t.qn();Bw.bh(this.Wlt),this.Wlt=null,this.Wrt=null,this.Alt=null,this.Flt=null,this.Ilt=null,this.klt=null}Ult(){for(const t of this.Ilt.qlt().jlt())this.Wlt.push(Bw.Hlt.e_(this,t))}flt(){for(const t of this.Wlt)t.flt()}Trt(){for(const t of this.Wlt)t.Trt();this.Alt=null,this.Flt=null}Jlt(){return this.Wrt}yH(){return this.Wrt.yH()}Mlt(){return this.Blt||(this.Blt=this.Ilt.rlt().$lt()),this.Blt}Slt(){return this.Wlt}J1(t){for(let s=0;s<this.Wlt.length;s++){const i=this.Wlt[s];if(i.vlt()===t)return i}}Ylt(){this.Alt||this.B1()}Xlt(){return!!this.Alt&&!this.Alt.L2()}wlt(){if(!this.Xot())return!1;if(this.Olt)return!1;const t=this.Zlt(),s=this.yH().Bq(t);return!!s&&!s.L2()}wZ(){if(!this.Xot())return;const t=this.Klt();return-1!==t?this.yH().g7(t):void 0}Qlt(){return this.Wrt.zrt().indexOf(this)}plt(){this.Alt=null,this.Plt=NaN,this.Flt=null,this.Rlt=NaN,this.Olt=!0}ylt(){return!!this.Alt}B1(){if(this.Olt)return;if(this.Alt&&this.Xlt())return this.Alt;const t=this.Zlt();return this.Alt=this.yH().Bq(t),this.Alt}glt(t){if(this.Olt=!1,this.Alt!==t){this.Trt(),this.Alt=t,this.Rlt=t.wZ().Rz(),this.Plt=t.RZ(),this.Flt=t.zq();for(const s of this.tut()){const i=s.sut,e=s.iut;switch(i.eut()){case"instance-variable":{e.nut();const i=t.wZ(),n=i.rut(s.name),r=i.hut(n),h=i.out(n);r===s.name&&h===s.type&&e.aut(n);break}case"behavior":{const i=s.g0,n=this.wZ(),r=t.wZ(),h=e.w0(r);if(i&&h){const t=i.Pc();n.lut(t),r.lut(t),e.nut(),e.uut(h.H7())}break}}}}}*tut(){for(const t of this.Wlt){const s=t.Jot(),i=this.wZ(),e={sut:t,iut:s};switch(t.eut()){case"world-instance":e.cut=t.vlt();break;case"instance-variable":{const t=s.nut();e.name=i.hut(t),e.type=i.out(t);break}case"effect":{const t=i.OY(),n=s.fut(t);e.dut=n;break}case"behavior":{const t=s.w0(i);e.g0=t;break}case"plugin":e.KJ=i.QJ()}yield e}}zq(){if(this.Flt&&this.Xlt())return this.Flt;const t=this.B1();return t&&(this.Flt=t.zq()),this.Flt}nlt(){return this.Ilt}Zlt(){return isNaN(this.Plt)?this.Ilt.Zlt():this.Plt}mut(t){this.Ilt.mut(t)}tat(){return this.Ilt.tat()}sat(t){this.Ilt.sat(t)}iht(){return this.Ilt.iht()}q1(){return this.Ilt.q1()}elt(){return this.Ilt.elt()}gut(){return this.Ilt.gut()}yut(t){this.Ilt.yut(t)}iat(t){this.Ilt.iat(t)}N1(t){for(const s of this.Mlt())s.N1(t);for(const s of this.Slt())s.N1(t)}wut(){return this.Ilt.wut()}Sut(t){this.Ilt.Sut(t)}Klt(){return isNaN(this.Rlt)?this.Ilt.Klt():this.Rlt}vut(t){this.Ilt.vut(t)}but(t){this.Ilt.but(t)}xut(){const t=this.B1();return t&&t.a0().Mut()?t.a0().xut():this.Ilt.xut()}Tut(t){this.Ilt.Tut(t)}Gut(){const t=this.B1();return t&&t.a0().Mut()?t.a0().Gut():this.Ilt.Gut()}aC(){return this.Ilt.aC()}Pc(){return this.Ilt.Pc()}Xot(){return 0===this.aC()}_ut(){return 1===this.aC()}Cut(){return 2===this.aC()}Iut(){return this.Vlt}mrt(){return this.Mnt}Qat(){return this.zlt}eA(){return this.ZR}Wat(){for(const t of this.Wlt)t.Wat()}prt(){if(this.Ylt(),!this.Xlt()&&this.Xot())return;const t=this.Jlt().aat(),s=t?0:this.gut();for(const t of this.Wlt)t.prt(s),0===this.Vlt&&1===t.Iut()&&(this.Vlt=1),0===this.Mnt&&1===t.mrt()&&(this.Mnt=1);this.zlt=0,this.Wlt.some(t=>t.Qat())&&(this.zlt=1),this.klt=t?this.Eut(s):this.Put(s),this.Dlt=!1,this.Llt=!1,this.vc(s),this.Rut(this.klt)}Aut(){const t=this.Fut(),s=this.Out();let i,e;return this.Wrt.aat()?(i={fU:()=>t.fU()+this.elt(),_1:()=>t.Dut()||"<no tags>"},e={fU:()=>s?s.fU()+this.elt():this.gut(),_1:()=>s?.Dut()||"<no tags>"}):(i={fU:()=>s?s.fU()+this.elt():this.gut(),_1:()=>s?.Dut()||"<no tags>"},e={fU:()=>t.fU()+this.elt(),_1:()=>t.Dut()||"<no tags>"}),[i,e]}Fut(){const t=this.Wrt.fU()-this.elt();return this.Wrt.aat()?this.Eut(t):this.Put(t)}Out(){return this.Wrt.aat()?this.Fut().Jrt():this.Fut().Lut()}Zat(){if(this.Ylt(),!this.Xlt()&&this.Xot())return;const t=this.Wrt.aat(),s=this.Wrt.fU()-this.elt();this.klt=t?this.Eut(s):this.Put(s);for(const t of this.Wlt)t.Zat(s)}slt(){if(!this.Jlt().z1()&&(this.Ylt(),(this.Xlt()||!this.Xot())&&!this.ZR)){const t=this.Wrt.fU();t>=this.elt()+this.gut()?this.vc(this.gut(),!0,!1,!0,!1,!1,!0):t<=0&&this.vc(0,!0,!1,!0,!1,!1,!0)}}Kat(){for(let t=0,s=this.Wlt.length;t<s;t++){const s=this.Wlt[t];s.Kat(),0===this.Vlt&&1===s.Iut()&&(this.Vlt=1),0===this.Mnt&&1===s.mrt()&&(this.Mnt=1)}}ilt(){const t=this.Wlt.length;for(let s=0;s<t;s++)this.Wlt[s].ilt()}vc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){this.Alt||this.B1();const o=this.Alt&&!this.Alt.L2(),a=0===this.Ilt.Hc;if((o||!a)&&!(r&&a&&this.wZ().o8()||(t-=this.elt())<0)){this.Nut(t,s),this.kut(t,s,n),!this.Jlt().IsPlaying()&&this.Jlt().llt()&&(t=this.Jlt().llt().fU());for(let s=0,n=this.Wlt.length;s<n;s++)this.Wlt[s].vc(t,i,e,h);this.But(t,s),0!==this.Vlt&&(this.Flt||(this.Flt=this.Alt.zq()),this.Flt&&this.Flt.EK())}}hlt(){const t=this.Wlt.length;for(let s=0;s<t;s++)this.Wlt[s].hlt()}Nut(t,s){if(s&&this.ZR&&!this.Dlt){if(this.Jlt().aat()){if(t<0)return}else if(t>this.gut())return;for(const t of this.Wlt)t.prt();this.Dlt=!0}}But(t,s){if(s&&this.ZR&&!this.Llt)if(this.Jlt().aat()){if(t>=this.gut()){for(const t of this.Wlt)t.vc(this.gut(),!1,!0);this.Llt=!0}}else if(t<=0){for(const t of this.Wlt)t.vc(0,!1,!0);this.Llt=!0}}kut(t,s,i){if(i)return;if(!s)return;if(!Bw.uH.mat)return;const e=this.Jlt();if(e.aat()){const s=this.klt.Jrt(),i=this.klt.fU(),n=s?s.fU():e.w1();(t<=i||t>=n)&&(this.klt=this.Elt.$ut(t,this.Ilt),s&&this.Wut(this.klt))}else{if(!this.Elt.Uut(t,this.Ilt))return;this.klt||(this.klt=this.Elt.Uut(t,this.Ilt));const s=this.klt.Lut(),i=this.klt.fU(),e=s?s.fU():0;(t>=i||t<=e)&&(this.klt=this.Elt.Uut(t,this.Ilt),this.klt&&this.Wut(this.klt))}}Eut(t){return this.Elt.Vut(t,this.Ilt)||this.Elt.$ut(t,this.Ilt)}Put(t){return this.Elt.Vut(t,this.Ilt)||this.Elt.Uut(t,this.Ilt)}Wut(t,s=!1){if(!Bw.uH.mat)return;const i=this.Jlt(),e=i.qot();Bw.uH.mat.aH.gat(i),Bw.uH.mat.aH.zut(t),e.tK(Bw.uH.mat.aH.jut),e.tK(Bw.uH.mat.aH.Wut),i.IsPlaying()||s||i.olt(t),Bw.uH.mat.aH.bat(i),Bw.uH.mat.aH.qut(t)}Rut(t){this.Wut(t,!0)}Hut(){return this.Ilt.rlt().Jut()}Yut(){const t=this.Ilt.qlt().Xut(),s=Bw.Hlt.e_(this,t);return this.Wlt.push(s),s}Zut(t){this.Ilt.rlt().Kut(t)}Qut(t){for(const s of this.Wlt)s.Qut(t)}tct(){for(const t of this.Wlt)t.tct()}sct(){if(this.Ylt(),this.Xlt()||!this.Xot())for(const t of this.Wlt)t.sct()}ict(){if(this.Ylt(),!this.Xlt()&&this.Xot())return;let t=!1;for(const s of this.Wlt){const i=s.ict();!t&&i&&(t=!0)}if(t){const t=this.Hut();t.m1(this.Jlt().fU()),t.N1("noease"),t.Sut(!0),t.uat("")}}Snt(){isNaN(this.Nlt)||this.ect(this.Nlt),this.Nlt=NaN}cst(){const t=this.B1(),s=t?t.RZ():this.Zlt();return{propertyTracksJson:this.nct(),lastKeyframeDataItemJson:this.rct(),initialStateOfNestedSet:this.Dlt,endStateOfNestedSet:this.Llt,instanceUid:s,cleared:this.Olt}}fst(t){if(t){this.hct(t.propertyTracksJson),this.oct(t.lastKeyframeDataItemJson),this.Nlt=t.instanceUid,this.Dlt=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Dlt=t.initialStateOfNestedSet),this.Llt=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Llt=t.endStateOfNestedSet),this.Olt=!!t.hasOwnProperty("cleared")&&t.cleared;for(const t of this.Wlt)0===this.Vlt&&1===t.Iut()&&(this.Vlt=1),0===this.Mnt&&1===t.mrt()&&(this.Mnt=1);this.zlt=0,this.Wlt.some(t=>t.Qat())&&(this.zlt=1)}}rct(){return this.Ilt.rlt().act(this.klt)}nct(){return this.Wlt.map(t=>t.cst())}hct(t){t.forEach((t,s)=>{this.Wlt[s].fst(t)})}ect(t){if(!Bw.te(t))return;const s=this.yH().Bq(t);s&&this.Jlt().mlt(this.Ilt.q1(),s,this.Qlt())}oct(t){const s=this.Ilt.rlt();this.klt=s.lct(t)}}}{const Vw=self.Cs;Vw.Hlt=class extends Vw.Vn{constructor(t,s){super(),this.uct=t,this.cct=s,this.fct=s.qlt(),this.Vlt=0,this.Mnt=0,this.zlt=0,this.dct=this.Jot(),this.pct=this.cct.gct().mct(),this.yct=null,this.wct=null}static e_(t,s){return Vw.jn(Vw.Hlt,t,s)}qn(){this.uct=null,this.dct&&(this.dct.qn(),this.dct=null),this.pct=null,this.cct=null,this.fct=null}Iut(){return this.Vlt}mrt(){return this.Mnt}Qat(){return this.zlt}Sct(){return!!this.wct}vct(t){this.wct=t}bct(){return this.wct}xct(){return this.uct}Mct(){return this.cct}qlt(){return this.fct}Jlt(){return this.uct.Jlt()}yH(){return this.uct.yH()}B1(){return this.uct.B1()}Jot(){if(this.dct)return this.dct;let t;switch(this.cct.eut()){case"behavior":t=new Vw.Hlt.Tct(this);break;case"effect":t=new Vw.Hlt.Gct(this),this.Mnt=1;break;case"instance-variable":t=new Vw.Hlt._ct(this);break;case"plugin":t=new Vw.Hlt.Cct(this),this.Mnt=1;break;case"world-instance":t=new Vw.Hlt.Ict(this),this.Mnt=1,this.Vlt=1;break;case"value":t=new Vw.Hlt.Ect(this);break;case"audio":t=new Vw.Hlt.Pct(this)}return this.dct=t,this.dct}eut(){return this.cct.eut()}Rct(t){this.cct.Rct(t)}Act(){return this.cct.Fct()}Oct(t){this.cct.Dct(t)}H1(){return this.Jot().Lct()}vlt(){return this.cct.Nct()}kct(t){this.cct.Bct(t)}$ct(){return this.cct.aC()}Wct(t){this.cct.Uct(t)}Vct(){return this.qlt().zct(this.cct).aC()}jct(){return this.cct.jct()}qct(t){this.cct.qct(t)}Hct(){return this.cct.Hct()}Jct(t){this.cct.Jct(t)}wut(){return this.cct.wut()}Sut(t){this.cct.Sut(t)}tat(){return this.cct.tat()}sat(t){this.cct.sat(t)}iht(){return this.cct.iht()}iat(t){this.cct.iat(t)}N1(t){for(const s of this.Yct())s.N1(t)}Xct(){return this.cct.Xct()}Yct(){return this.pct||(this.pct=this.cct.gct().mct()),this.pct}Hrt(){return this.cct.gct().Hrt()}Zct(t){return this.fct.Zct(t,this.cct)}Kct(t){return this.fct.Kct(t,this.cct)}Qct(t){let s,i=this.fct.Zct(t,this.cct);return i?s=this.fct.tft(t,this.cct):(i=this.fct.Kct(t,this.cct),s=this.fct.sft(t,this.cct)),{start:i,end:s}}*ift(){for(const t of this.Yct())yield t.uht()}*eft(){for(const t of this.Yct())yield t.fU()}flt(){this.Jot().flt()}Trt(){this.Jot().Trt()}nft(){return this.Jot().nft()}Wat(){this.Jot().Wat()}prt(t){this.Jot().prt(),this.yct=this.rft(t),this.Kat()}Zat(t){this.Jot().Zat(),this.yct=this.rft(t)}Kat(){const t=this.xct();if(this.zlt=0,t.Xot()){const s=this.Jlt(),i=t.B1(),e=this.Jot(),n=this.vlt();if(e.hft()){const t=s.Hot(i,e,n,this);t&&t.length&&(this.zlt=1)}else this.zlt=0}}rft(t){const s=this.Jlt();return this.fct.Zct(t,this.cct)||(s.aat()?this.fct.Kct(t,this.cct):this.fct.sft(t,this.cct))}ilt(){this.dct.ilt()}vc(t,s=!1,i=!1,e=!1){let n,r,h=!1;if(s)n=this.fct.Kct(t,this.cct);else{if(this.yct){const s=this.Jlt(),i=this.yct.Jrt(),e=this.yct.fU(),n=i?i.fU():s.w1();(t<=e||t>=n)&&(this.yct=this.fct.Kct(t,this.cct),h=!0)}else this.yct=this.fct.Kct(t,this.cct),h=!0;n=this.yct}n&&(r=n.Jrt()),this.dct.vc(t,n,r,s,i,e,h)}oft(t){if(this.yct){const s=this.Jlt(),i=this.yct.Jrt(),e=this.yct.fU(),n=i?i.fU():s.w1();(t<=e||t>=n)&&(this.yct=this.fct.Kct(t,this.cct))}else this.yct=this.fct.Kct(t,this.cct);const s=this.yct,i=s.Jrt();return this.dct.oft(t,s,i)}aft(t,s,i){return this.dct.oft(t,s,i)}hlt(){this.dct.hlt()}static lft(t,s){const i=s.Mct();return s.fct.Kct(t,i)}static uft(t,s){const i=s.Mct();return s.fct.sft(t,i)}cft(){const t=this.cct.gct().fft();return this.yct=null,t}Qut(t){this.yct=null,this.cct.gct().dft(t)}tct(){this.Jot().tct()}sct(){if(this.Jot().sct()){const t=this.fct.zct(this.cct),s=this.Jot().nft();t.pft(s)}}ict(){const t=this.Jot().ict();return t&&this.mft(),this.Jot().gft(),t}mft(){const t=this.Jlt().fU(),s=this.Jot(),i=Vw.Hlt.lft(t,this),e=this.cft();e.Uct(i.aC()),e.m1(t),e.N1(i.yft()),e.Sut(!0),e.wft(s.Sft()),e.pft(s.nft())}cst(){return{sourceAdapterJson:this.Jot().cst()}}fst(t){t&&this.Jot().fst(t.sourceAdapterJson)}}}{const zw=self.Cs,jw=zw.Hlt;jw.Ict=class{constructor(t){this.vft=t,this.bft=null,this.xft()}qn(){this.bft&&(this.bft.qn(),this.bft=null),this.vft=null}hft(){return this.bft.hft()}J1(){return this.vft}flt(){this.bft&&this.bft.flt()}Trt(){this.bft&&this.bft.Trt()}xft(){return this.bft||(this.bft=this.Mft()),this.bft}nut(){}Rz(){return this.nut()}Tft(){}Wat(){this.xft().Wat()}prt(){this.xft().prt()}Zat(){this.xft().Zat()}ilt(){this.bft.Gft()}vc(t,s,i,e,n,r,h){let o;switch(this.vft.Vct()){case"numeric":o=jw._ft.vc(t,s,i,this.vft);break;case"angle":o=jw.Cft.vc(t,s,i,this.vft);break;case"boolean":o=jw.Ift.vc(t,s,i,this.vft);break;case"color":o=jw.Eft.vc(t,s,i,this.vft);break;case"text":o=jw.Pft.vc(t,s,i,this.vft)}this.bft.Rft(t,o,s,i,e,n,r,h)}oft(t,s,i){switch(this.vft.Vct()){case"numeric":return jw._ft.vc(t,s,i,this.vft);case"angle":return jw.Cft.vc(t,s,i,this.vft);case"boolean":return jw.Ift.vc(t,s,i,this.vft);case"color":return jw.Eft.vc(t,s,i,this.vft);case"text":return jw.Pft.vc(t,s,i,this.vft)}}hlt(){this.bft.Aft()}tct(){this.xft().Fft()}gft(){this.xft().gft()}nft(){return this.xft().nft()}sct(){return this.xft().sct()}ict(){return this.xft().ict()}Sft(){const t=this.vft,s=t.xct().Jlt().fU(),i=jw.lft(s,t),e=i.Jrt();switch(t.Vct()){case"numeric":return jw._ft.vc(s,i,e,t);case"angle":return jw.Cft.vc(s,i,e,t);case"boolean":return jw.Ift.vc(s,i,e,t);case"color":return jw.Eft.vc(s,i,e,t);case"text":return jw.Pft.vc(s,i,e,t)}}Mft(){const t=this.vft;switch(t.Xct()?t.Vct():""){case"combo":case"boolean":case"text":case"string":return new jw.Dft.Oft(this);case"numeric":case"number":case"angle":return"combo"===this.vft.$ct()?new jw.Dft.Oft(this):new jw.Dft.Lft(this);case"color":case"offsetColor":return new jw.Dft.Nft(this);default:return new jw.Dft.Lft(this)}}cst(){return{propertyAdapterJson:this.xft().cst()}}fst(t){t&&this.xft().fst(t.propertyAdapterJson)}}}{const qw=self.Cs,Hw=0;class Jw extends qw.Hlt.Ict{constructor(t){super(t),this.kft=NaN}nut(){return this.vft.Mct().Fct()[0]}Rz(){return this.kft?this.kft:super.Rz()}Tft(){return this.vft.xct().B1()}aut(t){this.vft.Mct().Fct()[0]!==t&&(this.kft=t)}vc(t,s,i,e,n,r,h){this.xft().Bft(s.Lct())&&super.vc(t,s,i,e,n,r,h)}oft(t,s,i){if(this.xft().Bft(s.Lct()))return super.oft(t,s,i)}cst(){return Object.assign(super.cst(),{index:this.kft})}fst(t){t&&(super.fst(t),this.kft=t.index)}}qw.Hlt._ct=Jw}{const Yw=self.Cs,Xw=0,Zw=1,Kw=2;class Qw extends Yw.Hlt.Ict{constructor(t){super(t),this.d8=NaN}nut(){return this.vft.Mct().Fct()[1]}Tft(){const t=this.vft.Mct(),s=this.vft.xct(),i=this.d8?this.d8:t.Fct()[0],e=s.B1(),n=e.$ft(i);return e.Wft()[n].a0()}w0(t){const s=this.vft.Mct().Fct()[2];return t.Uft(s)}uut(t){this.vft.Mct().Fct()[0]!==t&&(this.d8=t)}vc(t,s,i,e,n,r,h){const o=this.vft.xct().B1();this.w0(o.wZ())&&super.vc(t,s,i,e,n,r,h)}oft(t,s,i){const e=this.vft.xct().B1();if(this.w0(e.wZ()))return super.oft(t,s,i)}cst(){return Object.assign(super.cst(),{sid:this.d8})}fst(t){t&&(super.fst(t),this.d8=t.sid)}}Yw.Hlt.Tct=Qw}{const tS=self.Cs,sS=0,iS=1;class eS extends tS.Hlt.Ict{constructor(t){super(t)}nut(){return this.vft.Mct().Fct()[1]}Tft(){const t=this.vft.xct().zq().CK(),s=t.OY(),i=this.fut(s).Rz();return t.T0(i)?t.Vft(i):null}fut(t){const s=this.vft.Mct().Fct()[0];return t.zft(s)}vc(t,s,i,e,n,r,h){this.jft()&&super.vc(t,s,i,e,n,r,h)}oft(t,s,i){if(this.jft())return super.oft(t,s,i)}jft(){const t=this.vft.xct().zq().CK(),s=t.OY(),i=this.fut(s);if(!i)return;const e=i.Rz();return t.T0(e)}}tS.Hlt.Gct=eS}{const nS=self.Cs,rS=0;class hS extends nS.Hlt.Ict{constructor(t){super(t)}nut(){return this.vft.Mct().Fct()[0]}Tft(){return this.vft.xct().B1().a0()}vc(t,s,i,e,n,r,h){const o=this.vft.xct();o.wZ().QJ()===o.B1().wZ().QJ()&&super.vc(t,s,i,e,n,r,h)}oft(t,s,i){const e=this.vft.xct();if(e.wZ().QJ()===e.B1().wZ().QJ())return super.oft(t,s,i)}qft(){const t=this.vft.xct(),s=t.wZ().QJ();if(nS.uH.Hft&&s instanceof nS.uH.Hft&&("initial-frame"===this.vft.vlt()||"initial-animation"===this.vft.vlt()))switch(this.vft.iht()){case"relative":return{Jft:(s,i,e,n,r)=>{if(i!==n){const e=n/i,r=t.J1("offsetWidth"),h=t.J1("offsetScaleX");if(r||h){const o=r?.Jot()?.xft(),a=h?.Jot()?.xft();if(s.GQ()&&s.AQ())a&&a.Yft(n),s.hy(this.Xft(n,i,s,t,o,a));else{const i=n*((s.Kft()?.Zft()??this.Qft(s,t))/this.Qft(s,t));a&&a.Yft(n);const r=o?.tdt()??0,h=a?.tdt()??0;s.hy(i+(r+h*e))}}else s.hy(s.My()*e)}if(e!==r){const i=r/e,n=t.J1("offsetHeight"),h=t.J1("offsetScaleY");if(n||h){const o=n?.Jot()?.xft(),a=h?.Jot()?.xft();if(s.GQ()&&s.OQ())a&&a.Yft(r),s.oy(this.sdt(r,e,s,t,o,a));else{const e=r*((s.Kft()?.idt()??this.edt(s,t))/this.edt(s,t));a&&a.Yft(r);const n=o?.tdt()??0,h=a?.tdt()??0;s.oy(e+(n+h*i))}}else s.oy(s.Gy()*i)}}};case"absolute":return null}}ndt(t,s,i,e=0){const n=s.Jlt().blt(t.B1());if(!n)return e;const r=n.J1(i);if(!r)return e;const h=r.Mct().gct();if(!h)return e;const o=h.rdt();return o?o.Lct():e}Qft(t,s){const i=s.Jlt().blt(t.B1());if(i)return i.xut();const e=t.B1().a0();return e.Mut()?e.xut():t.Kft().Zft()}edt(t,s){const i=s.Jlt().blt(t.B1());if(i)return i.Gut();const e=t.B1().a0();return e.Mut()?e.Gut():t.Kft().idt()}Xft(t,s,i,e,n,r){const h=i.Kft().Zft(),o=h/i.fQ().Kft().Zft();let a=1;const l=r?.hdt()??0;if(0!==l){const t=h/this.Qft(i,e);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=n?.odt()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return i.fQ().My()*o*a*f}sdt(t,s,i,e,n,r){const h=i.Kft().idt(),o=h/i.fQ().Kft().idt();let a=1;const l=r?.adt()??0;if(0!==l){const t=h/this.edt(i,e);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=n?.ldt()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return i.fQ().Gy()*o*a*f}}nS.Hlt.Cct=hS}{const oS=self.Cs;class aS extends oS.Hlt.Ict{constructor(t){super(t),this.udt=0,this.cdt=!1}hft(){return!1}prt(){const t=this.vft.qlt();let s=this.vft.Mct();s=t.zct(s),this.udt=s.uht()}Zat(){}Lct(){return this.cdt||this.vft.vc(0),this.udt}vc(t,s,i,e,n,r,h){this.udt=oS.Hlt._ft.vc(t,s,i,this.vft),this.cdt=!0}tct(){}gft(){}nft(){return this.udt}sct(){return!1}ict(){return!1}cst(){return{value:this.udt,init:this.cdt}}fst(t){t&&(this.udt=t.value,this.cdt=!t.hasOwnProperty("init")||t.init)}}oS.Hlt.Ect=aS}{const lS=self.Cs,uS=0,cS=0,fS=1,dS=1,pS=2,mS=3;class gS extends lS.Hlt.Ict{constructor(t){super(t),this.fdt=!1,this.ddt=null,this.pdt=null,this.mdt=null,this.Wrt=this.vft.Jlt(),this.uct=this.vft.xct(),this.gdt=this.vft.Act(),this.ydt=this.gdt[0],this.wdt=this.gdt[1],this.gdt[3]?this.Sdt=this.gdt[3]:this.Sdt=Math.random().toString(36).slice(2),this.vdt=NaN,this.bdt=NaN,this.xdt=NaN,this.Mdt=null,this.Tdt()}qn(){super.qn(),this.ddt=null,this.pdt=null,this.mdt=null,this.Wrt=null,this.uct=null,this.gdt=null,this.ydt=null,this.Mdt=null}Tdt(){if(!self.Cs.uH.Audio)return;const t=this.vft.yH().Gdt(self.Cs.uH.Audio);t&&(this.ddt=t.XJ().a0()),this.pdt=self.Cs.uH.Audio._dt,this.mdt=self.Cs.uH.Audio.Cdt}Idt(){if(this.Mdt)return;const t=this.vft.xct().J1("audioSource");t&&(this.Mdt=t.Jot())}Edt(){const t=this.vft.xct().J1("volume");return t?t.Jot().bdt:this.bdt}flt(){super.flt(),this.fdt=!1,this.ddt&&(this.mdt&&(this.vdt=this.mdt.Pdt.call(this.ddt,this.Sdt),this.bdt=this.mdt.Rdt.call(this.ddt,this.Sdt)),this.pdt&&this.pdt.c1.call(this.ddt,this.Sdt))}Adt(){return this.Sdt}Fdt(){return this.xdt}Odt(t){this.xdt=t}prt(){super.prt(),this.vdt=NaN,this.fdt=!1}Zat(){super.Zat();const t=this.vft.Jlt().fU();switch(this.vdt=t-this.wdt,this.vft.vlt()){case"audioSource":break;case"volume":this.bdt=this.vft.oft(t)}this.fdt=!1}vc(t,s,i,e,n,r,h){if(this.ddt)switch(this.vft.vlt()){case"audioSource":{if(!this.Wrt.aat())return;if(e)return void(this.pdt&&this.pdt.c1.call(this.ddt,this.Sdt));if(t<this.wdt)return void(this.fdt=!1);const s=this.mdt.Ddt.call(this.ddt,this.Sdt),i=this.Wrt.G1();if(i!==s&&this.pdt.T1.call(this.ddt,this.Sdt,i),this.fdt)return;if(!this.vft.Jlt().IsPlaying())return;if(this.fdt=!0,isNaN(this.vdt)){const s=self.performance.now(),i=t-this.wdt;if("suspended"===this.ddt.Ldt())return void(this.fdt=!1);const e=i+(self.performance.now()-s)/1e3;if(this.pdt){let t=this.Fdt();isNaN(t)?(this.Odt(0),t=0):this.Odt(t),this.pdt.Ndt.call(this.ddt,this.ydt,t,this.Sdt,e)}}else{const t=this.vdt;this.vdt=NaN;const s=this.Edt();if(this.bdt=NaN,"suspended"===this.ddt.Ldt())return void(this.fdt=!1);this.pdt&&(this.Odt(s),this.pdt.Ndt.call(this.ddt,this.ydt,s,this.Sdt,t))}break}case"volume":this.Idt(),super.vc(t,s,i,e,n,r,h)}}oft(t,s,i){if(this.ddt)switch(this.vft.vlt()){case"audioSource":return;case"volume":return this.Idt(),super.oft(t,s,i)}}kdt(t,s){return this.Mdt?this.Mdt.Fdt():0}Bdt(t,s,i,e){this.Mdt&&this.Mdt.Odt(this.kdt()+s),this.pdt&&this.Mdt&&this.pdt.Odt.call(this.ddt,this.Mdt.Adt(),this.Mdt.Fdt())}$dt(t,s,i){this.Mdt&&this.Mdt.Odt(s),this.pdt&&this.Mdt&&this.pdt.Odt.call(this.ddt,this.Mdt.Adt(),this.Mdt.Fdt())}Wdt(){return!0}cst(){return{audioPlaybackStarted:this.fdt,audioTag:this.Sdt,pauseTime:this.vdt,pauseVolume:this.bdt,volume:this.xdt}}fst(t){t&&(this.fdt=t.audioPlaybackStarted,this.Sdt=t.audioTag,this.vdt=t.pauseTime,this.bdt=t.pauseVolume,this.xdt=t.volume,this.Tdt())}}lS.Hlt.Pct=gS}{const yS=self.Cs;yS.Hlt.Dft=class{constructor(t){this.dct=t,this.vft=t.J1(),this.Flt=this.vft.xct().zq(),this.Udt=this.vft.vlt(),this.Vdt=!1,this.zdt=null,this.jdt=null}qn(){this.dct=null,this.vft=null,this.Flt=null,this.zdt=null,this.jdt=null}hft(){return!1}flt(){}Trt(){this.Flt=null,this.zdt=null,this.jdt=null}Jot(){return this.dct}J1(){return this.vft}zq(){return this.Flt||(this.Flt=this.vft.xct().zq()),this.Flt}qdt(t){this.Vdt=!!t}Hdt(){return this.Vdt}Wat(){}prt(){}Zat(){}Fft(){this.zdt=this.nft()}gft(){this.zdt=null}nft(){}sct(){}ict(){}Bft(t){return typeof this.Jdt()==typeof t}Gft(){}Rft(t,s,i,e,n,r,h,o){}Aft(){}Ydt(){return this.Zdt(()=>{const t=this.vft.Mct();return this.vft.qlt().zct(t)},()=>{const t=this.vft.Mct();return this.vft.qlt().rdt(t)}).Xdt()}Kdt(){const t=this.vft.Jlt().fU()-this.vft.xct().elt();return this.Zdt(()=>{const s=this.vft.Mct();return this.vft.qlt().Kct(t,s)},()=>{const s=this.vft.Mct(),i=this.vft.qlt();return i.sft(t,s)||i.rdt(s)}).Xdt()}Zdt(t,s){return this.vft.Jlt().aat()?t():s()}Qdt(t,s){return"relative"===this.vft.iht()?t():s()}tpt(t,s){return this.Hdt()?(this.qdt(!1),t()):s()}spt(t){}ipt(){return this.dct.Rz()}ept(){return this.jdt||(this.jdt=this.dct.Tft()),this.jdt}npt(t,s,i,e,n,r){switch(this.vft.eut()){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return n();case"audio":return r()}}cst(){return{firstAbsoluteUpdate:this.Vdt,saveState:this.zdt}}fst(t){t&&(this.Vdt=t.firstAbsoluteUpdate,this.zdt=t.saveState)}rpt(t,s=!1){const i=[];for(const e of t){const t=e.xct().elt();for(const n of e.Yct())s&&0===n.fU()?i.push({time:t+n.fU(),value:n.Xdt()}):s||i.push({time:t+n.fU(),value:n.Xdt()})}return i.sort((t,s)=>t.time-s.time)}hpt(t,s,i){return this.opt(s,i)}opt(t,s){for(let i=s.length-1;i>=0;i--)if(s[i].time<=t)return s[i];return null}}}{const wS=self.Cs,SS=new Map,vS=[0,0,0];class bS extends wS.Hlt.Dft{constructor(t){super(t)}Wat(){}prt(){}Zat(){}nft(){const t=this.vft.eut(),s=this.ept(),i=this.ipt();switch(t){case"behavior":case"plugin":return this.apt(s.lpt(i));case"effect":return this.apt(s[i]);case"world-instance":return this.apt(this.Jdt())}}sct(){const t=this.Ydt();return!this.upt(t,this.Jdt())}ict(){return!wS.ee(this.zdt)&&!this.upt(this.zdt,this.Jdt())}upt(t,s){return t=this.cpt(t),s=this.cpt(s),t.qo(s)}Ydt(){const t=super.Ydt();return this.cpt(t)}Kdt(){const t=super.Kdt();return this.cpt(t)}spt(t){}apt(t){return wS.Ne(t,wS.To)?t.toArray().slice(0,3):t.slice(0,3)}cpt(t){return wS.Ne(t,wS.To)?t:new wS.To(t[0],t[1],t[2],1)}Bft(t){return!0}hft(){return!0}Gft(){const t=this.vft.Jlt(),s=this.vft.B1(),i=this.vft.Jot(),e=t.Hot(s,i,this.Udt,this.vft);if(e&&e.length>1){SS.has(s)||SS.set(s,new Map);const t=SS.get(s),i=this.vft.eut();t.has(i)||t.set(i,new Map);const e=t.get(i);e.has(this.Udt)||e.set(this.Udt,{fpt:!1,color:new wS.To(0,0,0,1)})}}dpt(t,s,i){const e=SS.get(t).get(s).get(i);return e.fpt=!0,e.color}Rft(t,s,i,e,n,r,h,o){const a=this.vft.Jlt(),l=this.vft.xct(),u=this.vft.B1(),c=this.vft.Jot(),f=this.vft.eut(),d=this.Udt,p=a.Hot(u,c,d,this.vft);if(p&&p.length>1){const t=this.rpt(p,!0),i=this.hpt(a,a.fU(),t);if(i){const t=l.elt(),e=i.time-t;if(0===e)this.dpt(u,f,this.Udt).Ro(s[0],s[1],s[2]);else{if(e<0)return;const t=s[0],i=s[1],n=s[2],r=this.vft.vc(e,!1,!0),h=wS.To.Ma(t,r[0]),o=wS.To.Ma(i,r[1]),a=wS.To.Ma(n,r[2]);this.dpt(u,f,this.Udt).Ro(h,o,a)}}}else this.ppt(s[0],s[1],s[2])}Aft(){const t=this.vft.B1();if(!SS.has(t))return;const s=SS.get(t),i=this.vft.eut();if(!s.has(i))return;const e=s.get(i);if(!e.has(this.Udt))return;const n=e.get(this.Udt),r=n.fpt,h=n.color;r&&this.ppt(h.ko(),h.Bo(),h.$o()),0===e.size&&s.delete(i),0===s.size&&SS.delete(t)}Jdt(){const t=this.vft.eut(),s=this.ept(),i=this.ipt();switch(t){case"behavior":case"plugin":return this.cpt(s.lpt(i));case"effect":return s[i].clone();case"world-instance":return this.zq().KK().clone()}}ppt(t,s,i){const e=this.vft.eut(),n=this.ept(),r=this.ipt();switch(e){case"behavior":case"plugin":vS[0]=t,vS[1]=s,vS[2]=i,n.mpt(r,vS);break;case"effect":n[r].Po(t,s,i);break;case"world-instance":this.zq().gpt(t,s,i)}}cst(){}fst(t){}}wS.Hlt.Dft.Nft=bS}{const xS=self.Cs,MS=xS.Hlt;class TS extends xS.Hlt.Dft{constructor(t){super(t)}Wat(){}prt(){}Zat(){}nft(){return this.Jdt()}sct(){return this.Ydt()!==this.nft()}ict(){return!xS.ee(this.zdt)&&this.zdt!==this.nft()}hft(){return!1}Rft(t,s,i,e,n,r,h,o){const a=this.vft,l=a.xct(),u=a.eut(),c=a.Jlt(),f=l.B1(),d=a.Jot(),p=this.Udt,m=c.Hot(f,d,p,a);if(m&&m.length>1){const i=this.rpt(m),e=t+l.elt(),n=this.hpt(c,e,i);n&&(s=n.value)}switch(a.Vct()){case"numeric":if(!MS._ft.ypt(this.ipt(),this.ept(),s,u))return;break;case"angle":if(!MS.Cft.ypt(this.ipt(),this.ept(),s,u))return;break;case"boolean":if(!MS.Ift.ypt(this.ipt(),this.ept(),s,u))return;break;case"color":if(!MS.Eft.ypt(this.ipt(),this.ept(),s,u))return;break;case"text":if(!MS.Pft.ypt(this.ipt(),this.ept(),s,u))return}this.ppt(s)}Jdt(){const t=this.vft.eut(),s=this.ept(),i=this.ipt();switch(t){case"behavior":case"plugin":return s.lpt(i);case"effect":return s[i];case"instance-variable":return s.wpt(i)}}ppt(t){const s=this.vft.eut(),i=this.ept(),e=this.ipt();switch(s){case"behavior":case"plugin":i.mpt(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.Spt(e,t)}}}xS.Hlt.Dft.Oft=TS}{const GS=self.Cs,_S=GS.Hlt.Dft,CS=new Map,IS=(t,s,i,e,n,r=!1,h=null,o=null)=>{CS.set(t,{vpt:s,bpt:i,xpt:e,round:n,Mpt:r,init:h,reset:o})},ES=(t,s)=>{const i=s.Jlt().blt(t.B1());if(i)return i.xut();const e=t.B1().a0();return e.Mut()?e.xut():t.Kft().Zft()},PS=(t,s,i,e=0)=>{const n=s.Jlt().blt(t.B1());if(!n)return e;const r=n.J1(i);if(!r)return e;const h=r.Mct().gct();if(!h)return e;const o=h.rdt();return o?o.Lct():e},RS=t=>{const s=[];let i=t.fQ();for(;i;)s.push(i),i=i.fQ();return s.reverse(),s};IS("offsetX",(t,s,i,e)=>{"relative"===e.vft.iht()?t.Tpt(s,i.Jlt().rat()):t.Tpt(s)},(t,s)=>t.mM(s),t=>t.pM(),!0),IS("offsetY",(t,s,i,e)=>{"relative"===e.vft.iht()?t.Gpt(s,i.Jlt().rat()):t.Gpt(s)},(t,s)=>t.wM(s),t=>t.yM(),!0),IS("offsetWidth",(t,s,i,e,n=!1,r=!0)=>{if(0===s)return;const h="relative"===e.vft.iht(),o=1===e._pt.aC();if((h||o)&&t.GQ()&&t.AQ()){if(isNaN(e.Cpt)){const s=RS(t);let i;i=o?s[s.length-1].My():s[s.length-1].Kft().Zft(),e.Cpt=0===i?Number.EPSILON:i}if(n)return;e.Ipt+=s;const i=s/e.Cpt;t.ky(i,r),e.Ept+=i}else t.ky(s),e.Ept+=s},(t,s)=>t.hy(s),t=>t.My(),!0,!1,null,t=>{t.Ept=0,t.Ipt=0}),IS("offsetHeight",(t,s,i,e,n=!1,r=!0)=>{if(0===s)return;const h="relative"===e.vft.iht(),o=1===e._pt.aC();if((h||o)&&t.GQ()&&t.OQ()){if(isNaN(e.Cpt)){const s=RS(t);let i;i=o?s[s.length-1].Gy():s[s.length-1].Kft().idt(),e.Cpt=0===i?Number.EPSILON:i}if(n)return;e.Ppt+=s;const i=s/e.Cpt;t.Rpt(i,r),e.Ept+=i}else t.Rpt(s),e.Ept+=s},(t,s)=>t.oy(s),t=>t.Gy(),!0,!1,null,t=>{t.Ept=0,t.Ppt=0}),IS("offsetAngle",(t,s,i,e,n)=>{t.Apt(s)},(t,s)=>t.$Y(s),t=>t.WY(),!1,!0),IS("offsetOpacity",(t,s,i,e,n)=>{s/=e.Fpt?e.Fpt:1;const r=t.BF()+s;if(0===e.Opt)r>1?e.Opt+=r-1:r<0&&(e.Opt+=r),t.Dpt(s);else{const i=t.BF()+s;s>0&&e.Opt>0?i>1&&(e.Opt+=i-1):s>0&&e.Opt<0?(e.Opt+=s,e.Opt>0&&(t.Dpt(e.Opt),e.Opt=0)):s<0&&e.Opt>0?(e.Opt+=s,e.Opt<0&&(t.Dpt(e.Opt),e.Opt=0)):s<0&&e.Opt<0&&i<0&&(e.Opt+=i)}},(t,s)=>{t.WF(s)},t=>t.BF(),!1,!0,(t,s,i)=>{switch(t.Opt=0,t.vft.iht()){case"relative":{t.vft.qlt();const s=t.vft.Mct().gct().mct();let i=t.zq().BF(),e=i;for(const n of s){const s=n.fU();e=i+t.vft.oft(s),e=GS.Zn(e,0,1)}t.Lpt=i-e,t.Lpt=Math.round(100*(t.Lpt+Number.EPSILON))/100,e=i;for(let i=s.length-1;i>=0;i--){const n=s[i].fU();e-=t.vft.oft(n),e=GS.Zn(e,0,1)}t.Npt=e,t.Npt=Math.round(100*(t.Npt+Number.EPSILON))/100;break}}const e="relative"===t.vft.iht(),n=1===t._pt.aC();if((e||n)&&s.GQ()&&s.$Q()){const e=RS(s);let n=e[0].Kft().kpt();n+=PS(e[0],i,"offsetOpacity");for(let t=1;t<e.length;t++)n+=PS(e[t],i,"offsetOpacity");t.Fpt=0===n?1:n}},t=>{switch(t.vft.iht()){case"relative":{t.Opt=0;const s=t.zq();let i=s.BF();i=Math.round(100*(i+Number.EPSILON))/100,t.vft.Jlt().aat()?(s.WF(i+t.Lpt),t.ZC=0):(s.WF(i-t.Npt),t.ZC=t.Jot().Sft());break}}}),IS("offsetOriginX",(t,s)=>t.Bpt(s),(t,s)=>t.LK(s),t=>t.DK(),!1),IS("offsetOriginY",(t,s)=>t.$pt(s),(t,s)=>t.BK(s),t=>t.kK(),!1),IS("offsetZElevation",(t,s)=>t.Wpt(s),(t,s)=>t.vM(s),t=>t.SM(),!0),IS("offsetScaleX",(t,s,i,e)=>{if(0===s)return;const n=t.My()<0?-1:1;if(e.Upt+=s,"relative"===e.vft.iht()&&t.GQ()&&t.AQ()){const r=PS(t,i,"offsetWidth"),h=isNaN(e.Vpt)?i.xut():e.Vpt,o=(h+r/(t.Kft().Zft()/h))*n*s;isNaN(e.Cpt)&&CS.get("offsetWidth").vpt(t,1,i,e,!0);const a=o/e.Cpt;t.ky(a,!0),e.Ept+=a}else{const r=(isNaN(e.Vpt)?i.xut():e.Vpt)*n*s;t.ky(r),e.Ept+=r}},(t,s,i)=>{t.hy(i.xut()*s)},(t,s)=>{const i=t.My()<0?-1:1;if(t.AQ()){const e=t.fQ(),n=s.Jlt().blt(e.B1());let r=NaN;if(n)r=e.My()/n.xut();else{const t=e.B1().a0();r=t.Mut()?e.My()/t.xut():1}return t.My()*i/(s.xut()*r)}return t.My()*i/s.xut()},!1,!1,null,t=>{t.Ept=0,t.Vpt=NaN,t.Upt=0}),IS("offsetScaleY",(t,s,i,e)=>{if(0===s)return;const n=t.Gy()<0?-1:1;if(e.zpt+=s,"relative"===e.vft.iht()&&t.GQ()&&t.OQ()){const r=PS(t,i,"offsetHeight"),h=isNaN(e.Vpt)?i.Gut():e.Vpt,o=(h+r/(t.Kft().idt()/h))*n*s;isNaN(e.Cpt)&&CS.get("offsetHeight").vpt(t,1,i,e,!0);const a=o/e.Cpt;t.Rpt(a,!0),e.Ept+=a}else{const r=(isNaN(e.Vpt)?i.Gut():e.Vpt)*n*s;t.Rpt(r),e.Ept+=r}},(t,s,i)=>{t.oy(i.Gut()*s)},(t,s)=>{const i=t.Gy()<0?-1:1;if(t.OQ()){const e=t.fQ(),n=s.Jlt().blt(e.B1());let r=NaN;if(n)r=e.Gy()/n.Gut();else{const t=e.B1().a0();r=t.Mut()?e.Gy()/t.Gut():1}return t.Gy()*i/(s.Gut()*r)}return t.Gy()*i/s.Gut()},!1,!1,null,t=>{t.Ept=0,t.Vpt=NaN,t.zpt=0});class AS extends GS.Hlt.Dft{constructor(t){super(t),this.ZC=0,this.Opt=0,this.Lpt=0,this.Npt=0,this.Fpt=NaN,this.Cpt=NaN,this.Ept=0,this.Vpt=NaN,this.Ipt=0,this.Upt=0,this.Ppt=0,this.zpt=0,this.jpt=void 0,this.qpt=void 0,this.Hpt=null,this.Jpt=null,this.Ypt=null,this.Xpt=null,this.Zpt=null,this.Kpt=null,this.Qpt=null,this.tmt=null,this.smt=!1,this.imt=!1,GS.Ne(this.vft.Jlt(),GS.emt)?this._pt=new GS.Hlt.Dft.nmt(this):this._pt=new GS.Hlt.Dft.rmt(this);const s=this.vft.vlt();switch(this.vft.eut()){case"world-instance":{const t=CS.get(s);this.Hpt=t.xpt,this.Jpt=t.vpt,this.Ypt=t.bpt,this.smt=t.round,this.imt=t.Mpt,this.Zpt=t.init,this.Xpt=t.reset;break}case"audio":this.Kpt=t.kdt,this.Qpt=t.Bdt,this.tmt=t.$dt,this.smt=!!t.Wdt(),this.imt=!1}}qn(){this._pt=null,this.Hpt=null,this.Jpt=null,this.Ypt=null,this.Xpt=null,this.Zpt=null,this.Kpt=null,this.Qpt=null,this.tmt=null,super.qn()}hft(){return this._pt.hft()}hmt(){return this.ZC}omt(t){this.ZC=t}Wat(){this.Xpt&&this.Xpt(this)}prt(){const t=this._pt.prt();if("number"==typeof t&&(this.ZC=t),this.Zpt){const t=this.zq(),s=this.vft.xct();this.Zpt(this,t,s)}}Zat(){const t=this._pt.Zat();"number"==typeof t&&(this.ZC=t)}nft(){return this.Jdt()}sct(){return this.Ydt()!==this.nft()}ict(){return!GS.ee(this.zdt)&&this.zdt!==this.nft()}Gft(){this._pt.Gft()}Rft(t,s,i,e,n,r,h,o){return this._pt.Rft(t,s,i,e,n,r,h,o)}Aft(){this._pt.Aft()}Jdt(){const t=this.ept(),s=this.ipt(),i=this.zq(),e=this.vft.xct();switch(this.vft.eut()){case"behavior":case"plugin":return t.lpt(s);case"effect":return t[s];case"instance-variable":return t.wpt(s);case"world-instance":return this.Hpt(i,e);case"audio":return this.Kpt.call(this.Jot(),i,e)}}ppt(t,s,i,e=!0){const n=this.ept(),r=this.ipt(),h=this.zq(),o=this.vft.xct();switch(this.vft.eut()){case"behavior":n.amt(r,t);break;case"effect":n[r]+=t;break;case"instance-variable":n.lmt(r,t);break;case"plugin":n.amt(r,t,this.Jot().qft());break;case"world-instance":this.Jpt(h,t,o,this,!1,e);break;case"audio":this.Qpt.call(this.Jot(),h,t,o,this)}}umt(t,s,i){let e=this.vft.tat();if(e="default"===e?"continuous":e,"discrete"===e&&!s)return;if("discrete"===e&&i){const t=this.vft.Jlt().fU();if(!this.vft.Zct(t))return}const n=this.ept(),r=this.ipt(),h=this.zq(),o=this.vft.xct();switch(this.vft.eut()){case"behavior":n.mpt(r,t);break;case"effect":n[r]=t;break;case"instance-variable":n.Spt(r,t);break;case"plugin":n.mpt(r,t,this.Jot().qft());break;case"world-instance":this.Ypt(h,t,o);break;case"audio":this.tmt.call(this.Jot(),h,t,o)}}cmt(t,s,i,e,n,r,h,o){this._pt.cmt(t,s,i,e,n,r,h,o)}fmt(t,s,i,e,n){"angle"===this.vft.$ct()&&(t=GS.tr(t));const r=(t.toString().split(".")[1]||"").length,h=this.Jdt();let o;switch(o=0===r?this.smt?Math.round(h):this.imt?"angle"===this.vft.$ct()?GS.Qn(Math.round(GS.tr(h))):Number(GS.toFixed(h,2)):h:this.smt?Number(GS.toFixed(h,r)):(this.imt,h),this.ppt(o-h,s,i,!1),this.vft.vlt()){case"offsetWidth":case"offsetScaleX":{const t=this.zq(),s=t.My(),i=Number(GS.toFixed(s,2));t.ky(i-s);break}case"offsetHeight":case"offsetScaleY":{const t=this.zq(),s=t.Gy(),i=Number(GS.toFixed(s,2));t.Rpt(i-s);break}}}cst(){return Object.assign(super.cst(),{v:this.ZC,a:this.Opt,fod:this.Lpt,bod:this.Npt,of:this.Fpt,sf:this.Cpt,armorf:this.jpt,armandf:this.qpt,ca:this.Ept,os:this.Vpt,awo:this.Ipt,aho:this.Ppt,asxo:this.Upt,asyo:this.zpt})}fst(t){t&&(super.fst(t),this.ZC=t.v,this.Opt=t.a,this.Lpt=GS.te(t.fod)?t.fod:0,this.Npt=GS.te(t.bod)?t.bod:0,this.Fpt=GS.te(t.of)?t.of:NaN,this.Cpt=GS.te(t.sf)?t.sf:NaN,this.jpt=GS.te(t.armorf)?t.armorf:void 0,this.qpt=GS.te(t.armandf)?t.armandf:void 0,this.Ept=GS.te(t.ca)?t.ca:0,this.Vpt=GS.te(t.os)?t.os:NaN,this.Ipt=GS.te(t.awo)?t.awo:0,this.Ppt=GS.te(t.aho)?t.aho:0,this.Upt=GS.te(t.asxo)?t.asxo:0,this.zpt=GS.te(t.asyo)?t.asyo:0)}Yft(t){this.Vpt=t}tdt(){return this.Ept}odt(){return this.Ipt}ldt(){return this.Ppt}hdt(){return this.Upt}adt(){return this.zpt}}GS.Hlt.Dft.Lft=AS}{const FS=self.Cs;class OS{constructor(t){this.dmt=!1,this.udt=0,this.pmt=!1,this.mmt=!1,this.Wlt=t;for(let t=0,s=this.Wlt.length;t<s;t++)this.Wlt[t].vct(this)}Slt(){return this.Wlt}gmt(){this.dmt=!0}ymt(){return this.dmt}wft(t){this.udt=t}Lct(){return this.udt}wmt(t){this.pmt=t}Smt(){return this.pmt}slt(t){this.mmt=t}vmt(){return this.mmt}$f(){this.dmt=!1,this.udt=0,this.pmt=!1,this.mmt=!1}}class DS{constructor(t){this.bmt=t}qn(){this.bmt=null}aC(){return 0}prt(){const t=this.bmt;return this.bmt.J1(),t.Qdt(()=>t.Zdt(()=>0,()=>t.Jot().Sft()),()=>{})}Zat(){}hft(){switch(this.bmt,this.bmt.J1().iht()){case"relative":return!1;case"absolute":return!0}}Gft(){this.bmt;const t=this.bmt.J1(),s=t.vlt();switch(t.iht()){case"relative":break;case"absolute":if(t.Sct())t.bct().$f();else{const i=t.Jlt(),e=t.B1(),n=t.Jot(),r=i.Hot(e,n,s,t);r&&r.length>1&&new OS(r)}}}Rft(t,s,i,e,n,r,h,o){const a=this.bmt,l=this.bmt.J1();switch(l.iht()){case"relative":{const h=a.hmt();a.ppt(s-h,i,e),r&&this.cmt(t,i,e,n,h,s),a.omt(s);break}case"absolute":{const t=l.Jlt(),i=l.xct();if(l.B1(),l.Jot(),l.Sct()){const e=l.bct(),n=e.Slt(),r=a.rpt(n,!0),u=a.hpt(t,t.fU(),r);if(u){const t=i.elt(),n=u.time-t;if(0===n)e.slt(h),e.wmt(o),e.gmt(),e.wft(e.Lct()+s);else{if(n<0)return;const t=l.oft(n);e.slt(h),e.wmt(o),e.gmt(),e.wft(e.Lct()+(s-t))}}}else a.umt(s,o,h);break}}}Aft(){const t=this.bmt,s=this.bmt.J1();switch(s.iht()){case"relative":break;case"absolute":if(s.Sct()){const i=s.bct();i.ymt()&&t.umt(i.Lct(),i.Smt(),i.vmt())}}}cmt(t,s,i,e,n,r){const h=this.bmt;e||(s&&t===s.fU()?h.fmt(s.uht(),s,i):i&&t===i.fU()?h.fmt(i.uht(),s,i):r-n===0&&h.fmt(s.uht(),s,i))}}FS.Hlt.Dft.rmt=DS}{const LS=self.Cs;class NS{constructor(t){this.bmt=t}qn(){this.bmt=null}aC(){return 1}prt(){const t=this.bmt;return t.qdt(!0),this.spt(t.Ydt())}Zat(){const t=this.bmt;if(t.Ydt()!==t.Kdt())return t.qdt(!0),this.spt(t.Kdt())}hft(){return!1}Gft(){}Rft(t,s,i,e,n,r,h,o){const a=this.bmt,l=a.hmt();switch(a.J1().iht()){case"relative":a.ppt(s-l,i,e),r&&this.cmt(t,i,e,n,l,s,!1,h);break;case"absolute":a.Hdt()?(a.qdt(!1),a.ppt(l,i,e)):0===t&&0===a.J1().Jlt().w1()?a.umt(s,!0,!1):(a.ppt(s-l,i,e),r&&this.cmt(t,i,e,n,l,s,this.xmt(),h))}a.omt(s)}Aft(){}spt(t){return t-this.bmt.nft()}xmt(){const t=this.bmt,s=t.zq().B1(),i=t.J1().yH().qot();let e=0;for(const t of i.Vnt())0===t.aC()?t.Jnt(s)&&e++:1===t.aC()&&t.B1()===s&&e++;return e<=1}cmt(t,s,i,e,n,r,h,o){const a=this.bmt;e?s&&t===s.fU()?a.fmt(s.uht(),s,i,h,o):i&&t===i.fU()?a.fmt(i.uht(),s,i,h,o):i||a.fmt(s.uht(),s,i,h,o):s&&t===s.fU()?a.fmt(s.uht(),s,i,h,o):i&&t===i.fU()?a.fmt(i.uht(),s,i,h,o):r-n===0&&a.fmt(s.uht(),s,i,h,o)}}LS.Hlt.Dft.nmt=NS}{const kS=self.Cs,BS=self.Vu;kS.Hlt._ft=class{constructor(){}static ypt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.lpt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.wpt(t)}return n!==i}static vc(t,s,i,e){if(!i){let t=e.Mct();return t=e.qlt().rdt(t),t.uht()}let n=e.tat();if("default"===n&&(n="continuous"),"combo"===e.$ct()&&(n="discrete"),"discrete"===n)return s.uht();if("continuous"===n||"step"===n){const r=e.Jlt().Kot();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.uht(),o=i.uht(),a=s.aht("cubic-bezier"),l=i.aht("cubic-bezier"),u=a&&a.Mmt()&&l&&l.Tmt();if(!u&&h===o)return h;const c=s.fU(),f=i.fU();"step"===n&&0!==r&&(t=kS.Zn(t,c,f));const d=kS.normalize(t,c,f),p=s.yft();let m;if(u){const t=f-c;m=BS.hc(p)(t*d,0,1,t),m=BS.hc("cubicbezier")(m,h,h+a.dht(),o+l.ght(),o)}else m=BS.hc(p)((f-c)*d,h,o-h,f-c);return"integer"===e.$ct()?Math.floor(m):m}}}}{const $S=self.Cs;$S.Hlt.Cft=class{constructor(){}static ypt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.lpt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.wpt(t)}return n!==i}static vc(t,s,i,e){if(!i){let t=e.Mct();return t=e.qlt().rdt(t),t.uht()}let n=e.tat();if("default"===n&&(n="continuous"),"combo"===e.$ct()&&(n="discrete"),"discrete"===n)return s.uht();if("continuous"===n||"step"===n){const r=e.Jlt().Kot();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.fU(),o=i.fU(),a=s.uht(),l=i.uht();"step"===n&&0!==r&&(t=$S.Zn(t,h,o));const u=s.aht("angle");if(!u){if(a===l)return a;const i=$S.normalize(t,h,o),e=self.Vu.hc(s.yft());return $S.ur(a,l,e(i,0,1,1))}{const i=u.Gmt();if(a===l&&0===i)return a;const e=$S.normalize(t,h,o),n=self.Vu.hc(s.yft())(e,0,1,1);switch(u._mt()){case"closest":return $S.ur(a,l,n,i);case"clockwise":return $S.cr(a,l,n,i);case"anti-clockwise":return $S.dr(a,l,n,i)}}}}}}{const WS=self.Cs;WS.Hlt.Ift=class{constructor(){}static ypt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.lpt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.wpt(t)}return!!n!=!!i}static vc(t,s,i,e){if(!i){let t=e.Mct();return t=e.qlt().rdt(t),t.uht()?1:0}return s.uht()?1:0}}}{const US=self.Cs,VS=[0,0,0],zS=[0,0,0],jS=[0,0,0];US.Hlt.Eft=class{constructor(){}static ypt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.lpt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.wpt(t)}return Array.isArray(i)?(VS[0]=i[0],VS[1]=i[1],VS[2]=i[2]):(jS.oa(i),VS[0]=Math.floor(255*jS.ko()),VS[1]=Math.floor(255*jS.Bo()),VS[2]=Math.floor(255*jS.$o())),Array.isArray(n)?(zS[0]=n[0],zS[1]=n[1],zS[2]=n[2]):(jS.oa(n),zS[0]=Math.floor(255*jS.ko()),zS[1]=Math.floor(255*jS.Bo()),zS[2]=Math.floor(255*jS.$o())),VS[0]!==zS[0]||VS[1]!==zS[1]||VS[2]!==zS[2]}static vc(t,s,i,e){if(!i){let t=e.Mct();t=e.qlt().rdt(t);const s=t.uht();return VS[0]=s[0],VS[1]=s[1],VS[2]=s[2],VS}let n=e.tat();if("default"===n&&(n="continuous"),"discrete"===n){const t=s.uht();return VS[0]=t[0],VS[1]=t[1],VS[2]=t[2],VS}if("continuous"===n||"step"===n){const r=e.Jlt().Kot();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.fU(),o=i.fU(),a=s.uht(),l=i.uht();"step"===n&&0!==r&&(t=US.Zn(t,h,o));const u=US.normalize(t,h,o),c=s.yft(),f=a[0],d=a[1],p=a[2],m=l[0],g=l[1],y=l[2],w=self.Vu.hc(c),S=o-h,v=S*u;return VS[0]=f===m?f:w(v,f,m-f,S),VS[1]=d===g?d:w(v,d,g-d,S),VS[2]=p===y?p:w(v,p,y-p,S),VS}}}}{const qS=self.Cs;qS.Hlt.Pft=class{constructor(){}static ypt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.lpt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.wpt(t)}return n!==i}static vc(t,s,i,e){if(!i){let t=e.Mct();return t=e.qlt().rdt(t),t.uht()}return s.uht()}}}{const HS=self.Cs;HS.Jet=class{constructor(){this.Cmt=new Map}qn(){for(const t of this.Cmt.values())t.qn();this.Cmt.clear(),this.Cmt=null}$u(t){const s=new HS.Imt(t),i=s.Pc();this.Cmt.set(i,s)}qs(t){return this.Cmt.get(t)}Bot(){return 0}static Emt(t,s,i,e){if(s)for(const n of s)HS.Jet.Pmt("create",n,t,i,e)}static Rmt(t,s,i,e){if(s)for(const n of s)HS.Jet.Pmt("create-including-disabled",n,t,i,e)}static Amt(t,s,i,e){t.length?s.forEach((s,i)=>{t[i].fst(s)}):s.forEach(s=>{HS.Jet.Pmt("load",s,t,i,e)})}static Pmt(t,s,i,e,n){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,n);break;case"create":case"create-including-disabled":r=new e(s,n)}else if("object"==typeof e){const i=s[e.Fmt],h=e.map.get(i);switch(t){case"load":r=new h(null,n);break;case"create":case"create-including-disabled":r=new h(s,n)}}switch(t){case"load":r.fst(s),i.push(r);break;case"create":if("function"==typeof r.wut&&!r.wut())return r.qn();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const JS=self.Cs,YS=0,XS=1,ZS=2,KS=3,QS=4,tv=5,sv=6,iv=7,ev=8,nv=9,rv=10,hv=11;JS.Imt=class{constructor(t){this.Yn="",this.tlt=NaN,this.Omt=0,this.Dmt="default",this.Lmt="default",this.Nmt=!1,this.kmt=!1,this.Bmt=1,this.Elt=null,this.$mt="",this.Wmt=!1,this.Umt=!0,t&&(this.Yn=t[0],this.tlt=t[1],this.Omt=t[2],this.Dmt=t[3],this.Lmt=t[4],this.Nmt=!!t[6],this.kmt=!!t[7],this.Bmt=t[8],this.$mt=t[9],this.Wmt=!!t[10],this.Umt=!!t[11],this.Elt=new JS.Vmt(t[5],this))}qn(){this.Elt.qn(),this.Elt=null}zot(){return this.Elt||(this.Elt=new JS.Vmt(null,this)),this.Elt}Pc(){return this.Yn}C3(t){this.Yn=t}w1(){return this.tlt}g1(t){this.tlt=t}Kot(){return this.Omt}Qot(t){this.Omt=t}tat(){return this.Dmt}sat(t){this.Dmt=t}iht(){return this.Lmt}iat(t){this.Lmt=t}v1(){return this.Nmt}S1(t){this.Nmt=t}M1(){return this.kmt}b1(t){this.kmt=t}O0(){return this.Bmt}nat(t){this.Bmt=t}Grt(){return this.$mt}rat(){return this.Wmt}hat(){return this.Umt}cst(){return{trackDataJson:this.Elt.cst(),name:this.Yn,totalTime:this.tlt,step:this.Omt,interpolationMode:this.Dmt,resultMode:this.Lmt,loop:this.Nmt,pingPong:this.kmt,repeatCount:this.Bmt,startOnLayout:this.$mt,transformWithSceneGraph:!!this.Wmt,useSystemTimescale:this.Umt}}fst(t){t&&(this.zot().fst(t.trackDataJson),this.Yn=t.name,this.tlt=t.totalTime,this.Omt=t.step,this.Dmt=t.interpolationMode,this.Lmt=t.resultMode,this.Nmt=t.loop,this.kmt=t.pingPong,this.Bmt=t.repeatCount,this.$mt=t.startOnLayout,this.Wmt=!!t.transformWithSceneGraph,this.Umt=!!t.useSystemTimescale)}}}{const ov=self.Cs,av=0,lv=1,uv=2,cv=1,fv=2,dv=3,pv=4,mv=5,gv=6,yv=7,wv=0,Sv=1,vv=8,bv=0,xv=1,Mv=9,Tv=10;class Gv{constructor(t,s){this.Elt=s,this.zmt=null,this.jmt=null,this.Plt=NaN,this.Rlt=NaN,this.Dmt="default",this.Lmt="default",this.du=!1,this.qmt=null,this.fct=null,this.Wc="",this.Hmt=null,this.Jmt=0,this.Ymt=this.Elt.Zot().w1(),this.Hc=0,this.Yn="",t&&(t[0]&&(this.zmt=t[0],this.Plt=t[0][2],this.Rlt=t[0][1]),this.Dmt=t[1],this.Lmt=t[2],this.du=!!t[3],t[6]&&(this.Wc=t[6]),t[7]&&(this.Hmt=t[7],this.Jmt=t[7][0],this.Ymt=t[7][1]),t[8]&&(this.jmt=t[8]),t[8]&&(this.jmt=t[8]),t[9]&&(this.Hc=t[9]),t[10]&&(this.Yn=t[10]),this.qmt=new ov.Xmt(t[4],this),this.fct=new ov.Zmt(t[5],this))}qn(){this.zmt=null,this.Elt=null,this.qmt&&(this.qmt.qn(),this.qmt=null),this.fct&&(this.fct.qn(),this.fct=null),this.Hmt=null}zot(){return this.Elt}rlt(){return this.qmt||(this.qmt=new ov.Xmt(null,this)),this.qmt}qlt(){return this.fct||(this.fct=new ov.Zmt(null,this)),this.fct}Kmt(){return this.zmt}Klt(){return this.Rlt}vut(t){this.Rlt=t}Zlt(){return this.Plt}mut(t){this.Plt=t}tat(){return this.Dmt}sat(t){this.Dmt=t}iht(){return this.Lmt}iat(t){this.Lmt=t}wut(){return this.du}Sut(t){this.du=!!t}q1(){return this.Wc}elt(){return this.Jmt}gut(){return this.Ymt}yut(t){this.Ymt=t}xut(){return this.jmt[0]}but(t){this.jmt||(this.jmt=[]),this.jmt[0]=t}Gut(){return this.jmt||(this.jmt=[]),this.jmt[1]}Tut(t){this.jmt||(this.jmt=[]),this.jmt[1]=t}aC(){return this.Hc}Pc(){return this.Yn}cst(){return{keyframeDataJson:this.qmt.cst(),propertyTrackDataJson:this.fct.cst(),instanceData:this.zmt,additionalInstanceData:this.jmt,instanceUid:this.Plt,objectClassIndex:this.Rlt,interpolationMode:this.Dmt,resultMode:this.Lmt,enabled:this.du,id:this.Wc,nestedData:this.Hmt,type:this.Hc,name:this.Yn}}fst(t){t&&(this.zmt=t.instanceData,this.Plt=t.instanceUid,this.Rlt=t.objectClassIndex,this.Dmt=t.interpolationMode,this.Lmt=t.resultMode,this.du=t.enabled,this.Wc=t.id,this.Hc=t.type?t.type:0,this.Yn=t.name?t.name:"",this.Ymt=this.Elt.Zot().w1(),t.nestedData&&(this.Hmt=t.nestedData,this.Jmt=this.Hmt[0],this.Ymt=this.Hmt[1]),t.additionalInstanceData&&(this.jmt=t.additionalInstanceData),this.rlt().fst(t.keyframeDataJson),this.qlt().fst(t.propertyTrackDataJson))}}ov.Vmt=class{constructor(t,s){this.oot=s,this.Qmt=[],ov.Jet.Emt(this.Qmt,t,Gv,this)}qn(){this.oot=null;for(const t of this.Qmt)t.qn();ov.bh(this.Qmt),this.Qmt=null}Zot(){return this.oot}clt(){const t=new Gv(null,this);return this.Qmt.push(t),t}tgt(t){return t.rlt().$lt()[0]}sgt(t){return t.rlt().$lt().at(-1)}Vut(t,s){const i=s.rlt().$lt(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.fU()===t)return e}}igt(t,s){const i=s.rlt().$lt(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.fU()>t)return e}}Uut(t,s){const i=s.rlt().$lt(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.fU()>=t)return e}}$ut(t,s){const i=s.rlt().$lt();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.fU()<=t)return e}}*Vot(){for(const t of this.Qmt)yield t}cst(){return{trackDataItemsJson:this.Qmt.map(t=>t.cst())}}fst(t){t&&ov.Jet.Amt(this.Qmt,t.trackDataItemsJson,Gv,this)}}}{const _v=self.Cs,Cv=0,Iv=0,Ev=1,Pv=2,Rv=3,Av=4,Fv=5,Ov=6,Dv=7,Lv=8,Nv=9;class kv{constructor(t,s){this.fct=s,this.egt="",this.ngt=null,this.Udt=null,this.Hc=null,this.rgt=NaN,this.hgt=NaN,this.Dmt="default",this.Lmt="default",this.du=!1,this.ogt=null,this.agt=!0,t&&(this.egt=t[0][0],this.ngt=t[0].slice(1),this.Udt=t[1],this.Hc=t[2],this.rgt=t[3],this.hgt=t[4],this.Dmt=t[5],this.Lmt=t[6],this.du=!!t[7],this.ogt=new _v.lgt(t[8],this),this.agt=t[9])}qn(){this.ogt.qn(),this.ogt=null,this.fct=null,this.ngt=null}qlt(){return this.fct}gct(){return this.ogt||(this.ogt=new _v.lgt(null,this)),this.ogt}eut(){return this.egt}Rct(t){this.egt=t}Fct(){return this.ngt}Dct(t){this.ngt=t}Nct(){return this.Udt}Bct(t){this.Udt=t}aC(){return this.Hc}Uct(t){this.Hc=t}jct(){return this.rgt}qct(t){this.rgt=t}Hct(){return this.hgt}Jct(t){this.hgt=t}tat(){return this.Dmt}sat(t){this.Dmt=t}iht(){return this.Lmt}iat(t){this.Lmt=t}wut(){return this.du}Sut(t){this.du=!!t}Xct(){return!!this.agt}cst(){return{propertyKeyframeDataJson:this.ogt.cst(),sourceAdapterId:this.egt,sourceAdapterArguments:this.ngt,property:this.Udt,type:this.Hc,min:this.rgt,max:this.hgt,interpolationMode:this.Dmt,resultMode:this.Lmt,enabled:this.du,canHavePropertyKeyframes:this.agt}}fst(t){t&&(this.egt=t.sourceAdapterId,this.ngt=t.sourceAdapterArguments,this.Udt=t.property,this.Hc=t.type,this.rgt=t.min,this.hgt=t.max,this.Dmt=t.interpolationMode,this.Lmt=t.resultMode,this.du=t.enabled,this.agt=t.canHavePropertyKeyframes,this.gct().fst(t.propertyKeyframeDataJson))}}_v.Zmt=class{constructor(t,s){this.Ilt=s,this.ugt=[],_v.Jet.Emt(this.ugt,t,kv,this)}qn(){this.Ilt=null;for(const t of this.ugt)t.qn();_v.bh(this.ugt),this.ugt=null}nlt(){return this.Ilt}Xut(){const t=new kv(null,this);return this.ugt.push(t),t}zct(t){return t.gct().mct()[0]}rdt(t){return t.gct().mct().at(-1)}Zct(t,s){const i=s.gct().mct(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.fU()===t)return e}}tft(t,s){const i=s.gct().mct(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.fU()>t)return e}}sft(t,s){const i=s.gct().mct(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.fU()>=t)return e}}Kct(t,s){const i=s.gct().mct();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.fU()<=t)return e}}*jlt(){for(const t of this.ugt)yield t}cst(){return{propertyTrackDataItemsJson:this.ugt.map(t=>t.cst())}}fst(t){t&&_v.Jet.Amt(this.ugt,t.propertyTrackDataItemsJson,kv,this)}}}{const Bv=self.Cs,$v=0,Wv=1,Uv=2,Vv=3;class zv{constructor(t,s){if(this.qmt=s,this.aV=-1,this.cgt="noease",this.fgt=!1,this.Fot=null,this.dgt=null,!t)return;this.aV=t[0],this.cgt=t[1],this.fgt=!!t[2];const i=t[3];this.Fot=i?i.split(" "):[],this.dgt=new Set(this.Fot.map(t=>t.toLowerCase())),this.pgt=null,this.mgt=null}qn(){this.qmt=null,Bv.bh(this.Fot),this.Fot=null,this.dgt.clear(),this.dgt=null,this.pgt=null}rlt(){return this.qmt}Jrt(){return this.pgt}ggt(t){this.pgt=t}Lut(){return this.mgt}ygt(t){this.mgt=t}fU(){return this.aV}m1(t){this.aV=t,this.qmt.wgt()}yft(){return this.cgt}N1(t){this.cgt=t}wut(){return this.fgt}Sut(t){this.fgt=!!t}_1(){return this.Fot}uat(t){this.Fot=t?t.split(" "):[],this.dgt=new Set(this.Fot.map(t=>t.toLowerCase()))}Sgt(){return this.dgt}Dut(){return Array.from(this.dgt).join(",").trim()}Tlt(t){return this.dgt.has(t.toLowerCase())}cst(){return{time:this.aV,ease:this.cgt,enable:this.fgt,tags:this.Fot}}fst(t){t&&(this.aV=t.time,this.cgt=t.ease,this.fgt=t.enable,this.Fot=t.tags,this.dgt=new Set(this.Fot.map(t=>t.toLowerCase())))}}Bv.Xmt=class{constructor(t,s){this.Ilt=s,this.Blt=[],Bv.Jet.Emt(this.Blt,t,zv,this),this.wgt()}qn(){this.Ilt=null;for(const t of this.Blt)t.qn();Bv.bh(this.Blt),this.Blt=null}wgt(){this.Blt.sort((t,s)=>t.fU()-s.fU());for(let t=0;t<this.Blt.length;t++){const s=this.Blt[t];s.ggt(this.Blt[t+1]),s.ygt(this.Blt[t-1])}}nlt(){return this.Ilt}vgt(){return this.Blt.length}$lt(){return this.Blt}Jut(){const t=new zv(null,this);return this.Blt.push(t),this.wgt(),t}Kut(t){for(const s of this.Blt){if(!t(s))continue;const i=this.Blt.indexOf(s);-1!==i&&(s.qn(),this.Blt.splice(i,1))}this.bgt(),this.wgt()}bgt(){this.Blt.sort((t,s)=>t.fU()-s.fU())}act(t){return this.Blt.indexOf(t)}lct(t){return this.Blt[t]}*xgt(){for(const t of this.Blt)yield t}*Mgt(){for(let t=this.Blt.length-1;t>=0;t--)yield this.Blt[t]}cst(){return{keyframeDataItemsJson:this.Blt.map(t=>t.cst())}}fst(t){t&&(Bv.Jet.Amt(this.Blt,t.keyframeDataItemsJson,zv,this),this.wgt())}}}{const jv=self.Cs,qv=0,Hv=0,Jv=1,Yv=2,Xv=1,Zv=2,Kv=3,Qv=4,tb=5;class sb{constructor(t,s){this.ogt=s,this.udt=null,this.Tgt=null,this.Hc="",this.aV=NaN,this.cgt="noease",this.fgt=!1,this.Ggt=null,this._gt=void 0,this.Cgt="line",t&&(this.udt=t[0][0],this.Tgt=t[0][1],this.Hc=t[0][2],this.aV=t[1],this.cgt=t[2],this.fgt=!!t[3],this.Cgt=t[5],this.Ggt=null,t[4]&&(this.Ggt=new jv.Igt(t[4],this)),this.pgt=null,this.Egt=null)}qn(){this.ogt=null,this.Ggt&&(this.Ggt.qn(),this.Ggt=null),this.pgt=null,this.Egt=null}Pgt(){return this.Ggt}ggt(t){this.pgt=t}Jrt(){return this.pgt}Rgt(t){this.Egt=t}Yrt(){return this.Egt}Lct(){return this.udt}wft(t){"color"===this.Hc&&jv.te(t)?(this.udt[0]=jv.Pr(t),this.udt[1]=jv.Rr(t),this.udt[2]=jv.Ar(t)):this.udt=t}Xdt(){return this.Tgt}pft(t){"color"===this.Hc&&jv.te(t)?(this.Tgt[0]=jv.Pr(t),this.Tgt[1]=jv.Rr(t),this.Tgt[2]=jv.Ar(t)):this.Tgt=t}uht(){const t=this.ogt.Mct().iht();return"relative"===t?this.Lct():"absolute"===t?this.Xdt():void 0}aC(){return this.Hc}Uct(t){this.Hc=t}fU(){return this.aV}m1(t){this.aV=t,this.ogt.Agt()}yft(){return this.cgt}N1(t){this.cgt=t}wut(){return this.fgt}Sut(t){this.fgt=!!t}Xrt(){return this.Cgt}aht(t){if(!this.Ggt)return;if(this._gt||null===this._gt)return this._gt;const s=this.Ggt.Fgt();if(!s)return this._gt=null,this._gt;const i=s.length;for(let e=0;e<i;e++){const i=s[e];if(i.q1()===t)return this._gt=i,this._gt}return this._gt=null,this._gt}cst(){const t=this.Ggt;return{addonDataJson:t?t.cst():t,value:this.udt,aValue:this.Tgt,type:this.Hc,time:this.aV,ease:this.cgt,enable:this.fgt}}fst(t){t&&(t.addonDataJson&&this.Ggt.Ogt(t.addonDataJson),this.udt=t.value,this.Tgt=t.aValue,this.Hc=t.type,this.aV=t.time,this.cgt=t.ease,this.fgt=t.enable)}}jv.lgt=class{constructor(t,s){this.cct=s,this.pct=[],this.Dgt=[],jv.Jet.Emt(this.pct,t,sb,this),jv.Jet.Rmt(this.Dgt,t,sb,this),this.Agt()}qn(){this.cct=null;for(const t of this.pct)t.qn();jv.bh(this.pct),this.pct=null;for(const t of this.Dgt)t.qn();jv.bh(this.Dgt),this.Dgt=null}Agt(){let t=this.pct;t.sort((t,s)=>t.fU()-s.fU());for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.ggt(t[s+1]),s-1>=0&&i.Rgt(t[s-1])}t=this.Dgt,t.sort((t,s)=>t.fU()-s.fU());for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.ggt(t[s+1]),s-1>=0&&i.Rgt(t[s-1])}}fft(){const t=new sb(null,this);return this.pct.push(t),this.Agt(),t}dft(t){for(const s of this.pct){if(!t(s))continue;const i=this.pct.indexOf(s);-1!==i&&(s.qn(),this.pct.splice(i,1))}this.Lgt(),this.Agt()}Lgt(){this.pct.sort((t,s)=>t.fU()-s.fU())}Mct(){return this.cct}Ngt(){return this.pct.length}rdt(){return this.pct[this.pct.length-1]}mct(){return this.pct}Hrt(){return this.Dgt}*kgt(){for(const t of this.pct)yield t}*Bgt(){for(let t=this.pct.length-1;t>=0;t--)yield this.pct[t]}cst(){const t=this.pct,s=this.Dgt;return{propertyKeyframeDataItemsJson:t.map(t=>t.cst()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.cst())}}fst(t){t&&(jv.Jet.Amt(this.pct,t.propertyKeyframeDataItemsJson,sb,this),jv.Jet.Amt(this.Dgt,t.propertyKeyframeDataItemsIncludingDisabledJson,sb,this),this.Agt())}}}{const ib=self.Cs,eb=0,nb=1;class rb{constructor(t,s){this.Ggt=s,this.Wc=t[0],this.$gt=t[1]}qn(){this.Ggt=null,this.$gt=null}Pgt(){return this.Ggt}q1(){return this.Wc}cst(){return{id:this.Wc,data:this.$gt}}fst(t){t&&(this.Wc=t.id,this.$gt=t.data)}}const hb=0,ob=1,ab=2,lb=3;class ub extends rb{constructor(t,s){super(t,s),this.Wgt=this.$gt[0],this.Ugt=!!this.$gt[1],this.Vgt=this.$gt[2],this.zgt=!!this.$gt[3]}qn(){super.qn()}dht(){return this.Wgt}Mmt(){return this.Ugt}ght(){return this.Vgt}Tmt(){return this.zgt}cst(){return Object.assign(super.cst(),{startAnchor:this.Wgt,startEnable:!!this.Ugt,endAnchor:this.Vgt,endEnable:!!this.zgt})}fst(t){t&&(super.fst(t),this.Wgt=t.startAnchor,this.Ugt=!!t.startEnable,this.Vgt=t.endAnchor,this.zgt=!!t.endEnable)}}const cb=0,fb=1;class db extends rb{constructor(t,s){super(t,s),this.jgt=this.$gt[0],this.qgt=this.$gt[1]}qn(){super.qn()}_mt(){return this.jgt}Gmt(){return this.qgt}cst(){return Object.assign(super.cst(),{direction:this.jgt,revolutions:this.qgt})}fst(t){t&&(super.fst(t),this.jgt=t.direction,this.qgt=t.revolutions)}}ib.Igt=class{constructor(t,s){this.Hgt=s,this.Jgt=[],ib.Jet.Emt(this.Jgt,t,{Fmt:0,map:new Map([["cubic-bezier",ub],["angle",db]])},this)}qn(){this.Hgt=null;for(const t of this.Jgt)t.qn();ib.bh(this.Jgt),this.Jgt=null}Ygt(){return this.Hgt}Fgt(){return this.Jgt}*Xgt(){for(const t of this.Jgt)yield t}cst(){return{addonDataItemsJson:this.Jgt.map(t=>t.cst())}}fst(t){t&&ib.Jet.Amt(this.Jgt,t.addonDataItemsJson,{Fmt:"id",map:new Map([["cubic-bezier",ub],["angle",db]])},this)}}}{const pb=self.Cs,mb="start-value",gb="current-state",yb=0,wb=1;let Sb=0;pb.emt=class extends pb.Cnt{constructor(t,s){super("tween-"+Sb++,t,s),this.Wc="",this.Zgt=!1,this.Kgt="start-value",this.Alt=null,this.Qgt=null,this.tyt=null,this.syt=null,this.iyt=null,this.eyt=null,this.uct=null,this.nyt=null}qn(){this.l1()||(this.ryt(pb.ayt.oyt.aH.hyt),this.ryt(pb.ayt.oyt.aH.lyt),this.uyt(),super.qn(),this.Alt=null,this.Qgt=null,this.tyt=null,this.eyt=null,this.uct=null,this.syt=null,this.iyt=null)}Wot(t){const s=pb.jn(pb.Event,"tweenstatereleased");s.cyt=this,t.dispatchEvent(s)}aC(){return 1}fot(){for(const t of this.oot.zot().Vot())this.aot.push(pb.fyt.e_(this,t));this.uct=this.aot[0]}ult(){const t=this.oot.zot().clt(),s=pb.fyt.e_(this,t);return this.aot.push(s),this.dyt(),s}dyt(){this.uct=this.aot[0]}J1(t){return this.uct.Slt()[0]}Wct(t){this.pyt=t}B1(){const t=this.zrt();if(!t||!t.length)return;const s=t[0];if(this.uct=s,!s)return;const i=s.B1();return s.Xlt()?i:void 0}myt(t){this.eyt=t}j1(){return this.syt||(this.syt=new Promise(t=>{this.iyt=t})),this.syt}uyt(){this.syt&&(this.iyt&&this.iyt(),this.syt=null,this.iyt=null)}gyt(t){this.tyt||(this.tyt=[]),this.tyt.push(t)}yyt(t){this.Qgt||(this.Qgt=[]),this.Qgt.push(t)}wyt(t){if(!this.tyt)return;const s=this.tyt.indexOf(t);-1!==s&&this.tyt.splice(s,1)}Syt(t){if(!this.Qgt)return;const s=this.Qgt.indexOf(t);-1!==s&&this.Qgt.splice(s,1)}vyt(t,s){for(const i of this.aot)for(const e of i.Wlt){if(e.vlt()!==s)continue;const i=e.qlt(),n=e.Mct(),r=i.zct(n);r.wft(t),r.pft(t)}}byt(t){for(const s of this.aot)for(const i of s.Wlt)if(i.vlt()===t)return i}xyt(t){let s=!1;for(const i of t){const t=this.byt(i);t&&(this.vyt(t.nft(),i),s=!0)}if(s){if(this.aat()){const t=this.w1()-this.fU();this.g1(t);for(const s of this.aot)s.yut(t);this.Oat(0)}else{const t=this.fU();this.g1(t);for(const s of this.aot)s.yut(t);this.Oat(t)}this.Dat()}}Myt(t,s){const i=this.byt(s);if(!i)return;const e=i.qlt(),n=i.Mct(),r=e.rdt(n);r.m1(this.w1()),r.wft(t),r.pft(t)}Tyt(t){this.Wc=t}q1(){return this.Wc}Gyt(t){this.Kgt=t}_yt(){return this.Kgt}V1(t){this.Zgt=t}U1(){return this.Zgt}pat(){if(this.tyt)for(const t of this.tyt)t(this);if(!this.z1())for(const t of this.aot)t.ict()}xat(){this.Cot=this.Bc.Uj()}Mrt(){if(!this.Pot&&(this.Pot=!0,this.Qgt))for(const t of this.Qgt)t(this)}m1(t){this.Cyt(),super.m1(t)}$at(t){pb.te(t)||(t=this.w1()),t<0?this.mot=0:t>=this.w1()?this.mot=this.w1():this.mot=t,this.uct.Wat()}prt(t){if(!this.xrt()&&"current-state"===this._yt())for(const t of this.aot)t.sct();super.prt(t)}c1(t=!1){if(super.c1(t),!this.z1())for(const t of this.aot)t.tct()}$f(t=!0,s=!1){this.Cyt(),super.$f(t,s)}Cyt(){for(const t of this.aot){const s=t=>{const s=t.fU(),i=this.w1();return 0!==s&&s!==i};t.Zut(s),t.Qut(s)}}cnt(){if(this.l1())return!0;const t=this.B1();return!(t&&t.wZ().o8()||(this.hot.urt(this),this.Yat(),0))}wrt(t,s,i){if(this.Alt||(this.Alt=this.B1()),!this.Alt||this.Alt.L2())return this.c1(!0),void this.xat();const e=this.Alt.qj();if(-1!==e&&(t=i*e),0===t&&0===this.Aot)return;this.Aot=t;const n=this.mot+this.got+t*this.yot,r=this.oot.tlt;n<0?(this.mot=0,this.got=-n):n>=r?(this.mot=r,this.got=this.mot-n):(this.mot=n,this.got=0);let h=!1,o=!1;const a=this.v1(),l=this.M1();if(a||l?a&&!l?this.yot>0?this.mot>=r&&(this.$at(0),this.ryt(pb.ayt.oyt.aH.Iyt),this.ryt(pb.ayt.oyt.aH.Eyt),o=!0):this.mot<=0&&(this.$at(r),this.ryt(pb.ayt.oyt.aH.Iyt),this.ryt(pb.ayt.oyt.aH.Eyt),o=!0):!a&&l?this.yot>0?this.mot>=r&&(this.Oat(r),this.T1(-1*this.G1()),o=!0,1===this.wot?this.vot<this.O0()?(this.vot++,this.ryt(pb.ayt.oyt.aH.Iyt),this.ryt(pb.ayt.oyt.aH.Eyt),this.ryt(pb.ayt.oyt.aH.Pyt),this.ryt(pb.ayt.oyt.aH.Ryt),this.IsPlaying()?this.wot=0:this.Sot=0):(this.ryt(pb.ayt.oyt.aH.Pyt),this.ryt(pb.ayt.oyt.aH.Ryt),h=!0):0===this.wot&&(this.ryt(pb.ayt.oyt.aH.Pyt),this.ryt(pb.ayt.oyt.aH.Ryt),this.IsPlaying()?this.wot=1:this.Sot=1)):this.mot<=0&&(this.Oat(0),this.T1(-1*this.G1()),o=!0,1===this.wot?this.vot<this.O0()?(this.vot++,this.ryt(pb.ayt.oyt.aH.Iyt),this.ryt(pb.ayt.oyt.aH.Eyt),this.ryt(pb.ayt.oyt.aH.Pyt),this.ryt(pb.ayt.oyt.aH.Ryt),this.IsPlaying()?this.wot=0:this.Sot=0):(h=!0,this.ryt(pb.ayt.oyt.aH.Pyt),this.ryt(pb.ayt.oyt.aH.Ryt)):0===this.wot&&(this.ryt(pb.ayt.oyt.aH.Pyt),this.ryt(pb.ayt.oyt.aH.Ryt),this.IsPlaying()?this.wot=1:this.Sot=1)):a&&l&&(this.yot>0?this.mot>=r&&(this.Oat(r),this.T1(-1*this.G1()),o=!0,0===this.wot&&(this.ryt(pb.ayt.oyt.aH.Pyt),this.ryt(pb.ayt.oyt.aH.Ryt)),1===this.wot&&(this.ryt(pb.ayt.oyt.aH.Iyt),this.ryt(pb.ayt.oyt.aH.Eyt),this.ryt(pb.ayt.oyt.aH.Pyt),this.ryt(pb.ayt.oyt.aH.Ryt)),this.IsPlaying()?(this.wot++,this.wot=pb.wrap(this.wot,0,2)):(this.Sot=this.wot+1,this.Sot=pb.wrap(this.Sot,0,2))):this.mot<=0&&(this.Oat(0),this.T1(-1*this.G1()),o=!0,0===this.wot&&(this.ryt(pb.ayt.oyt.aH.Pyt),this.ryt(pb.ayt.oyt.aH.Ryt)),1===this.wot&&(this.ryt(pb.ayt.oyt.aH.Iyt),this.ryt(pb.ayt.oyt.aH.Eyt),this.ryt(pb.ayt.oyt.aH.Pyt),this.ryt(pb.ayt.oyt.aH.Ryt)),this.IsPlaying()?(this.wot++,this.wot=pb.wrap(this.wot,0,2)):(this.Sot=this.wot+1,this.Sot=pb.wrap(this.Sot,0,2)))):this.yot>0?this.mot>=r&&(this.vot<this.O0()?(this.vot++,this.$at(0),this.ryt(pb.ayt.oyt.aH.Iyt),this.ryt(pb.ayt.oyt.aH.Eyt),o=!0):(this.Oat(r),h=!0)):this.mot<=0&&(this.vot<this.O0()?(this.vot++,this.$at(r),this.ryt(pb.ayt.oyt.aH.Iyt),this.ryt(pb.ayt.oyt.aH.Eyt),o=!0):(this.Oat(0),h=!0)),!this.l1()&&this.IsPlaying()){if(h)return this.uct.slt(),this.c1(!0),void this.xat();this.uct.vc(this.mot,!0,!1,o,this.Rot,!1),this.Rot&&(this.Rot=!1)}}ryt(t){const s=this.B1();this.eyt.Ayt(this),this.Bc.tK(t,s,this.eyt.w0()),this.eyt.Fyt()}cst(){const t=super.cst(),s=this.Zot();return Object.assign(t,{tweenDataItemJson:s.cst(),id:this.Wc,destroyInstanceOnComplete:this.Zgt,initialValueMode:this.Kgt})}fst(t){t&&(this.Zot().fst(t.tweenDataItemJson),super.fst(t),this.Wc=t.id,this.Zgt=t.destroyInstanceOnComplete,this.Kgt=t.initialValueMode,this.dyt())}static IsPlaying(t){return t.IsPlaying()}static P1(t){return t.P1()}static Oyt(t){return!!t.M1()&&0===t.oat()}static Dyt(t){return!!t.M1()&&1===t.oat()}static Lyt(t){const s=t.runtime.qot(),i=new pb.Imt;if(t.json){i.fst(t.json.tweenDataItemJson);const e=new pb.emt(i,s);return e.fst(t.json),e}{const e=new pb.emt(i,s);pb.Te(t.Nyt)||(t.Nyt=[t.Nyt]),e.Tyt(t.id),e.uat(t.tags),e.Gyt(t.kyt),e.V1(t.Byt),e.S1(t.loop),e.b1(t.$yt),e.g1(t.time),e.Qot(0),e.sat("default"),e.iat(t.Nyt[0].Wyt),e.nat(t.F0);const n=e.ult();n.mut(t.S0.RZ()),n.sat("default"),n.iat(t.Nyt[0].Wyt),n.Sut(!0),n.vut(t.S0.wZ().Rz());const r=t.S0.a0(),h=r.Mut()?r.xut():t.S0.zq().My(),o=r.Mut()?r.Gut():t.S0.zq().Gy();n.but(h),n.Tut(o);const a=n.Hut();a.m1(0),a.N1("noease"),a.Sut(!0),a.uat("");const l=n.Hut();l.m1(t.time),l.N1("noease"),l.Sut(!0),l.uat("");for(const s of t.Nyt){const i=n.Yut();i.Rct(s.Uyt),i.Oct(s.Vyt),i.kct(s.cut),i.Wct(s.type),i.qct(NaN),i.Jct(NaN),i.sat("default"),i.iat(s.Wyt),i.Sut(!0);const e=i.cft();e.Uct(s.valueType),e.m1(0),e.N1(s.zyt),e.Sut(!0),e.wft(s.jyt),e.pft(s.jyt);const r=i.cft();r.Uct(s.valueType),r.m1(t.time),r.N1(s.zyt),r.Sut(!0),r.wft(s.qyt),r.pft(s.qyt),i.Jot()}return e}}static mut(t,s){if(!isNaN(s))for(const i of t.zrt())i.mut(s)}static myt(t,s){t.myt(s)}Hyt(t,s){return this.nyt||(this.nyt=pb.jn(self.F1,this,t,s)),this.nyt}}}{const vb=self.Cs;vb.fyt=class extends vb.jot{constructor(t,s){super(t,s),this.Jyt=null,this.Yyt=null}static e_(t,s){return vb.jn(vb.fyt,t,s)}Xyt(){1===this.Wlt.length?this.Jyt=this.Wlt[0]:(this.Jyt=this.Wlt[0],this.Yyt=this.Wlt[1])}Ult(){for(const t of this.Ilt.qlt().jlt())this.Wlt.push(vb.Zyt.e_(this,t));this.Xyt()}Yut(){const t=this.Ilt.qlt().Xut(),s=vb.Zyt.e_(this,t);return this.Wlt.push(s),this.Xyt(),s}prt(){if(this.Ylt(),!this.Xlt()&&this.Xot())return;const t=this.Jlt().aat()?0:this.gut();for(const s of this.Wlt)s.prt(t),0===this.Vlt&&1===s.Iut()&&(this.Vlt=1),0===this.Mnt&&1===s.mrt()&&(this.Mnt=1);this.zlt=0,this.Wlt.some(t=>t.Qat())&&(this.zlt=1),this.klt=this.Eut(t),this.Dlt=!1,this.Llt=!1,this.vc(t)}ilt(){}vc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){if(this.Alt||this.B1(),this.Alt)return!this.Alt.L2()&&(!r||!this.wZ().o8())&&(this.Yyt?(this.Jyt.vc(t,i,e,h),this.Yyt.vc(t,i,e,h)):this.Jyt.vc(t,i,e,h),void(0!==this.Jyt.Iut()&&(this.Flt||(this.Flt=this.Alt.zq()),this.Flt&&this.Flt.EK())))}hlt(){}fst(t){super.fst(t),this.Xyt()}}}{const bb=self.Cs;bb.Zyt=class extends bb.Hlt{constructor(t,s){super(t,s),this.Kyt=!1}static e_(t,s){return bb.jn(bb.Zyt,t,s)}vc(t,s=!1,i=!1,e=!1){let n,r;if(this.Kyt)n=this.pct[0],r=this.pct[1];else if(s)n=this.fct.Kct(t,this.cct),r=n.Jrt();else{if(this.yct){const s=this.Jlt(),i=this.yct.Jrt(),e=this.yct.fU(),n=i?i.fU():s.w1();(t<=e||t>=n)&&(this.yct=this.fct.Kct(t,this.cct))}else this.yct=this.fct.Kct(t,this.cct);n=this.yct,r=n.Jrt()}this.dct.vc(t,n,r,s,i,e)}cft(){const t=this.cct.gct().fft();return this.yct=null,this.Kyt=this.Yct().length<=2,t}Qut(t){this.yct=null,this.cct.gct().dft(t),this.Kyt=this.Yct().length<=2}cst(){return{sourceAdapterJson:this.Jot().cst(),basic:this.Kyt}}fst(t){t&&(this.Jot().fst(t.sourceAdapterJson),this.Kyt=t.basic)}}}{const xb=self.Cs,Mb=self.Vu,Tb=0,Gb=1,_b=2;xb.bc=class extends xb.Vn{constructor(t,s=!0){super(),this.Yn=t[0],this.Qyt=t[2],this.twt=[];for(const s of t[1]){const t=xb.swt.e_(this,s);this.twt.push(t)}for(let t=0;t<this.twt.length;t++){const s=this.twt[t],i=this.twt[t+1],e=this.twt[t-1];s.ggt(i),s.Rgt(e)}this.iwt=new Map,this.ewt=new Map,this.nwt(),s&&Mb.Mc(this.Yn,(t,s,i,e)=>this.vc(t,s,i,e),null,{transition:this})}static e_(t){return xb.jn(xb.bc,t)}qn(){for(const t of this.twt)t.qn();xb.bh(this.twt),this.twt=null,this.iwt.clear(),this.iwt=null,this.ewt.clear(),this.ewt=null}xc(t){this.Qyt=!!t}rwt(t){const s=this.ewt.get(t);if(s)return s;for(const s of this.twt)if(s.hwt()===t)return this.ewt.set(t,s),s}owt(t){for(let s=this.twt.length-1;s>=0;s--){const i=this.twt[s],e=i.hwt();if(e<=t){let s=i;if(e<t)return s;if(e===t){for(;s;){const t=s.Yrt();if(!t)break;if(t.hwt()!==s.hwt())break;s=t}return s}}}}vc(t,s,i,e){let n=t/e;if(this.Qyt){const n=this.rwt(0),r=this.rwt(1),h=s+(s+i)*n.awt(),o=(s+i)*r.awt()-h;return 0===e?h+o:Mb.Gc(t,h,o,e)}0===e&&(n=1);let r=this.owt(n),h=r.Jrt();if(!h){const t=r.Yrt(),s=r;r=t,h=s}const o=h.hwt()-r.hwt(),a=xb.Xn(n,r.hwt(),h.hwt(),0,o);if(r.lwt()||0===o){const t=s+(s+i)*r.awt(),e=(s+i)*h.awt()-t;return 0===o?1===a?t+e:t:Mb.Gc(a,t,e,o)}const l=r.hwt(),u=r.awt(),c=r.hwt()+r.uwt(),f=r.awt()+r.cwt(),d=h.hwt()+h.fwt(),p=h.awt()+h.dwt(),m=h.hwt(),g=h.awt();let y=Mb.hc("spline")(a,l,u,c,f,d,p,m,g,this.iwt.get(r));return y+=r.awt(),(1-y)*s+y*(s+i)}nwt(){this.iwt.clear();for(let t=0;t<this.twt.length-1;t++){const s=this.twt[t];if(!s.Mmt())continue;const i=s,e=this.twt[t+1];if(!e.Tmt())continue;const n=i.hwt(),r=i.hwt()+i.uwt(),h=e.hwt()+e.fwt(),o=e.hwt();this.iwt.set(i,Mb._c(n,r,h,o))}}}}{const Cb=self.Cs,Ib=0,Eb=1,Pb=2,Rb=3,Ab=4,Fb=5,Ob=6,Db=7,Lb=8;Cb.swt=class extends Cb.Vn{constructor(t,s){super(),this.pwt=t,this.mwt=s[0],this.gwt=s[1],this.ywt=s[2],this.wwt=s[3],this.Swt=s[4],this.vwt=s[5],this.Ugt=s[6],this.zgt=s[7],this.bwt=s[8],this.pgt=null,this.Egt=null}qn(){this.pwt=null}static e_(t,s){return Cb.jn(Cb.swt,t,s)}ggt(t){this.pgt=t}Jrt(){return this.pgt}Rgt(t){this.Egt=t}Yrt(){return this.Egt}hwt(){return this.mwt}awt(){return this.gwt}uwt(){return this.ywt}cwt(){return this.wwt}fwt(){return this.Swt}dwt(){return this.vwt}Mmt(){return this.Ugt}Tmt(){return this.zgt}lwt(){return"linear"===this.bwt}xwt(){return"cubic"===this.bwt}}}{const Nb=self.Cs;Nb.Mwt=class extends Nb.Vn{constructor(t){super(),this.Bc=t,this.Twt=[]}qn(){for(const t of this.Twt)t.qn();Nb.bh(this.Twt),this.Twt=null}e_(t){this.Twt.push(Nb.bc.e_(t))}}}{const kb=self.Cs;kb.Gwt=class extends kb.Vn{constructor(t){super(),this.Bc=t,this._wt=null,this.Cwt=null,this.pnt=t=>this.mnt(t.S0)}qn(){if(this.Tnt(),this._wt){for(const t of this._wt.values())t.clear();this._wt.clear()}this._wt=null,this.Bc=null}e_(t){if(this._wt||(this._wt=new Map),!t)return;const s=t[0][16][0],i=t[1];this._wt.has(i)||this._wt.set(i,new Map),this._wt.get(i).set(s,t)}Gnt(){const t=this.Bc.Sf();t&&t.addEventListener("instancedestroy",this.pnt)}Tnt(){const t=this.Bc.Sf();t&&t.removeEventListener("instancedestroy",this.pnt)}Iwt(){return!!this._wt&&0!==this._wt.size}Ewt(t,s){let i=0;if(i=t instanceof kb.Pwt?t.Rz():t,!this._wt.has(i))return;const e=this._wt.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}Rwt(t,s){this.Cwt||(this.Cwt=new WeakMap),this.Cwt.has(t)||this.Cwt.set(t,s)}Awt(t){if(!this.Cwt)return"";return this.Cwt.get(t)||""}mnt(t){this.Cwt&&this.Cwt.has(t)&&this.Cwt.delete(t)}}}{const Bb=self.Cs;Bb.Fwt=class{constructor(t){this.Bc=t,this.Owt=new Bb.Dwt}qn(){this.Owt.qn(),this.Owt=null,this.Bc=null}yH(){return this.Bc}e_(t){this.Owt.$u(t)}Lwt(t){return this.Owt.qs(t)}Nwt(){return this.Owt.Nwt()}}}{const $b=self.Cs;$b.kwt=class{constructor(t,s,i,e,n,r,h){this.Bc=n.yH(),this.Bwt=n,this.$wt=t,this.Wwt=i,this.Uwt=e,this.zw=s,this.Yet=r,this.Vwt=h??r.B1().RZ(),this.zwt(),this.jwt=this.Hwt?.qwt()??-1,this.Jwt=[],this.Ywt=null,this.Xwt=NaN,this.Zwt=null,this.Kwt=null,this.Qwt=null,this.tSt="",this.sSt=null,this.iSt="",this.eSt="",this.nSt=0,this.rSt=!1,this.Got=!1}qn(){this.Got||($b.bh(this.Jwt),this.Jwt=null,this.Bc=null,this.Bwt=null,this.Uwt=null,this.Yet=null,this.Ywt=null,this.Xwt=NaN,this.Zwt&&this.Zwt.clear(),this.Zwt=null,this.Kwt=null,this.Qwt=null,this.tSt="",this.sSt=null,this.iSt="",this.eSt="",this.Got=!0)}Hn(){return this.Got}hSt(){return this.Bwt}yH(){return this.Bc}Pc(){return this.$wt}oSt(){return this.Uwt}a1(){return this.zw}Wnt(){return this.Yet||(this.Yet=this.Bc.Bq(this.Vwt).a0()),this.Yet}aSt(){return this.lSt(this.jwt)}uSt(){const t=this.aSt();return t?t.a1():""}cSt(){const t=this.aSt();return t?t._1():[]}fSt(t){const s=this.cSt();if(!s)return!1;if(!s.length)return!1;const i=$b.kwt.cat(t);return!(!i||!i.length)&&i.every($b.kwt.dat,s)}dSt(t,s){const i=this.cSt();if(!i)return!1;if(!i.length)return!1;const e=$b.kwt.cat(t);return!(!e||!e.length)&&e.every(t=>$b.kwt.pSt.call(i,t,s))}static dat(t){const s=this;return""===t?1===s.length&&""===s[0]:s.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static cat(t){return t.trim().split(" ")}static pSt(t,s){const i=this;return""===t?1===i.length&&""===i[0]:i.some(i=>$b.compare(i.trim(),s,t.trim()))}mSt(t){const s=this.aSt();if(s){if($b.te(t)){const i=s.gSt(),e=i?i[t]:void 0;if($b.te(e))return this.lSt(e)}if("string"==typeof t)for(const i of s.gSt()){const s=this.lSt(i);if(s.d1(t))return this.lSt(s.qwt())}}}ySt(t){const s=this.mSt(t);return s?s.a1():""}wSt(t){const s=this.mSt(t);return s?s._1():""}SSt(t){const s=this.aSt();if(!s)return-1;const i=s.gSt();if(!i)return-1;const e=this.mSt(t);return e?i.indexOf(e.qwt()):-1}vSt(){const t=this.aSt();if(!t)return 0;const s=t.gSt();return s?s.length:0}lSt(t){return this.Uwt.lSt(t)}$f(){this.xSt().bSt(!0)}bSt(t){if(this.MSt()){for(const[t,s]of this.MSt().entries())s.bSt(!1);this.MSt().clear()}if(this.Zwt=null,this.Ywt=null,this.TSt=null,this.Kwt=null,this.tSt="",this.sSt=null,this.iSt="",this.eSt="",this.Jwt=[],t){this.Bwt.GSt(this);const t=this.Hwt.qwt();t!==this.jwt&&this._St(t)}else this.jwt=this.Hwt.qwt()}CSt(){const t=this.Uwt.lSt(this.jwt);return t?t.ESt().ISt():0}PSt(t){return!(t<0)&&t===this.RSt()}RSt(){const t=this.Uwt.lSt(this.jwt);if(!t)return-1;let s=t.ESt().ASt();return s?t.ESt().FSt().indexOf(s):-1}OSt(t){const s=this.DSt(t);return s?s.Pc():""}LSt(t){let s;return $b.te(t)&&(s=this.DSt(t)),"string"==typeof t&&(s=this.NSt(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Lct():""}kSt(t,s){if(t.wut())return t.qwt();{const i=t.ESt().ASt();if(!i)return s.qwt();const e=i.BSt();if(!$b.te(e))return s.qwt();const n=this.lSt(e);return n?this.kSt(n,s):s.qwt()}}$St(t,s){if(t.wut()){if("reference"===t.aC()){const s=t.WSt(),i=t.USt(),e=this.Bwt.Lwt(s);if(!e)return[-1,null];const n=e.VSt(i);return n?this.$St(n,e):this.$St(e.zSt(),e)}return[t.qwt(),s]}{const i=t.ESt().ASt();if(!i)return[-1,null];const e=i.BSt();if(!$b.te(e))return[-1,null];const n=s.lSt(e);return n?this.$St(n,s):[-1,null]}}jSt(t,s){let i=this.lSt(t);if(i){if(!i.wut()){const s=this.lSt(this.jwt);t=this.kSt(i,s)}if($b.te(t)&&t!==this.jwt)if(i=this.lSt(t),"reference"===i.aC()){const e=i.WSt(),n=i.USt(),r=this.Bwt.Lwt(e);let h=r.VSt(n);if(h){const i=this.$St(h,r);if(-1===i[0])return;s(this.jwt,t,i[1],i[0])}else s(this.jwt,t)}else s(this.jwt,t)}}qSt(t){let s;if($b.te(t)&&(s=this.DSt(t)),"string"==typeof t&&(s=this.NSt(t)),!s)return;let i=s.BSt();$b.te(i)&&this.jSt(i,(t,s,i,e)=>{this.Jwt.push(t),this._St(s,i,e)})}HSt(){const t=this.JSt();if(!t)return;const s=t.BSt();$b.te(s)&&this.jSt(s,(t,s,i,e)=>{this.Jwt.push(t),this._St(s,i,e)})}YSt(t){const s=this.Uwt.VSt(t);if(!s)return;const i=s.qwt();$b.te(i)&&this.jSt(i,(t,s,i,e)=>{this.Jwt.push(t),this._St(s,i,e)})}XSt(){const t=this.Jwt.pop();$b.te(t)?this._St(t):this.ZSt()&&(this.Bwt.GSt(this.ZSt(),!0,!1,!1),this.ZSt()._St(this.KSt()),this.xSt().QSt(this.ZSt()))}tvt(t){if(!this.aSt())return;const s=this.mSt(t);if(s){if(!s.wut())return;const t=s.qwt();if(!$b.te(t))return;this.Jwt.push(this.jwt),this._St(s.qwt())}}svt(t){if($b.te(t))return!!this.Uwt.lSt(this.jwt).ESt().FSt()[t];if("string"==typeof t){const s=this.Uwt.lSt(this.jwt).ESt().FSt();for(let i=0;i<s.length;i++)if(s[i].Pc()===t)return!0;return!1}return!1}ivt(){this.rSt=!0}evt(){return this.nSt>0}nvt(){this.nSt++}rvt(){this.nSt--,0===this.nSt&&this.rSt&&this.Bwt.hvt(this)}_St(t,s,i){const e=this.jwt,n=this.Wnt().B1();this.nvt(),this.Bwt.ovt(this),this.Bc.tK($b.uH.lvt.aH.avt,n),this.Bc.tK($b.uH.lvt.aH.uvt,n),this.Bc.tK($b.uH.lvt.aH.cvt,n),this.Bc.tK($b.uH.lvt.aH.fvt,n),this.jwt=t;let r=this.lSt(this.jwt);if("dictionary"===r.aC()&&(this.Bc.tK($b.uH.lvt.aH.dvt,n),this.Bc.tK($b.uH.lvt.aH.pvt,n),this.Bc.tK($b.uH.lvt.aH.mvt,n),this.Bc.tK($b.uH.lvt.aH.gvt,n)),this.Bwt.yvt(),this.rvt(),!this.Hn()&&(r=this.lSt(this.jwt),"reference"===r.aC())){const t=s?s.Pc():r.WSt();if(this.wvt(r)){this.Jwt.pop();const t=this.Svt(r);this.Bwt.GSt(t,!0,!0,!1),t.vvt(this,e),this.xSt().QSt(t)}else{const s="number"==typeof i?i:r.USt();if(t){this.Jwt.pop();let i=r.bvt();if(i){let t=this.Bwt.xvt(i);for(;t;)i=$b.Cm(i),t=this.Bwt.xvt(i)}else{i=`${t}-ref`;let s=this.Bwt.xvt(i);for(;s;)i=$b.Cm(i),s=this.Bwt.xvt(i)}const n=this.Bwt.Mvt(t,s,i,this.Yet,!0);n.vvt(this,e),this.Tvt(r,n);const h=this.xSt();n.Gvt(h),h.QSt(n)}}}}JSt(){const t=this.Uwt.lSt(this.jwt);return t?t.ESt().ASt():null}DSt(t){const s=this.Uwt.lSt(this.jwt);if(!s)return null;const i=s.ESt().FSt();if(!i)return null;return i[t]||null}NSt(t){const s=this.Uwt.lSt(this.jwt);if(!s)return null;return s.ESt()._vt(t)||null}zwt(t){if("number"==typeof t){let s=this.lSt(t);s||(s=this.Uwt.zSt()),this.Hwt=s}else if("number"==typeof this.Wwt){let t=this.lSt(this.Wwt);t||(t=this.Uwt.zSt()),this.Hwt=t}else{let t=this.Uwt.VSt(this.Wwt);t||(t=this.Uwt.zSt()),this.Hwt=t}}cst(){return this.rSt?null:{flowchartName:this.$wt,flowchartTag:this.zw,startNodeTag:this.Wwt,currentNodeId:this.jwt,previousNodeIds:this.Jwt,pluginUID:this.Yet.B1().RZ(),reference:{previousFlowchartTag:this.ZSt()?this.ZSt().a1():"",previousStartNodeId:$b.te(this.KSt())?this.KSt():NaN,referencesJson:this.Cvt(),currentReferenceFlowchartTag:this.Ivt()?this.Ivt().a1():"",rootFlowchartTag:this.xSt()?this.xSt().a1():""}}}Cvt(){if(!this.Evt())return null;const t=[];for(const[s,i]of this.MSt().entries())t.push({flowchartElementId:s.qwt(),flowchartStateTag:i.a1()});return t.length?t:null}fst(t){if(t){if(this.$wt=t.flowchartName,this.zw=t.flowchartTag,this.Wwt=t.startNodeTag,this.jwt=t.currentNodeId,this.Jwt=t.previousNodeIds,this.Vwt=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.tSt=s.previousFlowchartTag,this.Xwt=s.previousStartNodeId,this.sSt=s.referencesJson,this.iSt=s.currentReferenceFlowchartTag,this.eSt=s.rootFlowchartTag}this.zwt()}}ZSt(){return"string"==typeof this.tSt&&this.tSt&&(this.Ywt=this.Bwt.xvt(this.tSt),this.tSt=""),this.Ywt}KSt(){return this.Xwt}vvt(t,s){this.Ywt=t,this.Xwt=s}Ivt(){return"string"==typeof this.iSt&&this.iSt&&(this.Kwt=this.Bwt.xvt(this.iSt),this.iSt=""),this.Kwt}QSt(t){this.Kwt=t,this.Kwt===this&&(this.Kwt=null)}xSt(){return"string"==typeof this.eSt&&this.eSt&&(this.Qwt=this.Bwt.xvt(this.eSt),this.eSt=""),this.Qwt?this.Qwt:this}Gvt(t){this.Qwt=t}Evt(){return this.Pvt(),!!this.Zwt}wvt(t){return this.Pvt(),this.Zwt&&this.Zwt.has(t)}Pvt(){if(this.sSt){this.Zwt&&this.Zwt.clear(),this.Zwt||(this.Zwt=new Map);for(const t of this.sSt){const s=this.Bwt.xvt(t.flowchartStateTag),i=s.lSt(t.flowchartElementId);this.Zwt.set(i,s)}this.sSt=null}}MSt(){return this.Pvt(),this.Zwt}Svt(t){return this.Pvt(),this.Zwt.get(t)}Tvt(t,s){this.Zwt||(this.Zwt=new Map),this.Zwt.set(t,s)}}}{const Wb=self.Cs;Wb.Rvt=class{constructor(t){this.Bc=t,this.Avt=new Map,this.Fvt=null,this.Ovt=[],this.Dvt=()=>this.Snt(),this.Lvt=null}qn(){Wb.bh(this.Ovt),this.Ovt=null,this.Avt.clear(),this.Avt=null,this.Fvt=null,this.Bc=null,this.Lvt=null}yH(){return this.Bc}Lwt(t){return this.Bc.hSt().Lwt(t)}Mvt(t,s,i,e,n,r){const h=this.Bc.hSt().Lwt(t);if(!h)return void console.warn(`[Flowcharts] no flowchart found with name '${t}'`);if(this.Avt.has(i)){const t=this.Avt.get(i);t&&this.hvt(t)}const o=new Wb.kwt(t,i,s,h,this,e,r);return this.Avt.set(i,o),n&&this.GSt(o,!0),o}hvt(t){if(t.ivt(),t.evt())return;const s=t.a1();this.Avt.delete(s),t.qn(),this.Fvt===t&&(this.Fvt=null)}Nvt(t){t.$f()}xvt(t){return this.Avt.get(t)}ovt(t){this.Ovt.push(t)}yvt(){this.Ovt.pop()}GSt(t,s=!1,i=!1,e=!0){if(e){const s=t.Ivt();t=s||t}t!==this.Fvt&&(this.kvt(),this.Bvt(t,s,i))}$vt(t){return"string"==typeof t?this.xvt(t):this.Ovt.length?this.Ovt[this.Ovt.length-1]:this.Fvt}kvt(){if(!this.Fvt)return;if(this.Fvt.Hn())return;const t=this.Fvt.Wnt().B1();this.Fvt.nvt(),this.ovt(this.Fvt),this.Bc.tK(Wb.uH.lvt.aH.Wvt,t),this.yvt(),this.Fvt.rvt()}Bvt(t,s=!1,i=!1){if(this.Fvt=t,!this.Fvt)return;if(this.Fvt.Hn())return;const e=this.Fvt.Wnt().B1();this.Fvt.nvt(),this.ovt(this.Fvt),this.Bc.tK(Wb.uH.lvt.aH.Uvt,e),!0!==i&&"number"!=typeof i||this.Fvt.zwt(i),s&&(this.Bc.tK(Wb.uH.lvt.aH.dvt,e),this.Bc.tK(Wb.uH.lvt.aH.pvt,e),this.Bc.tK(Wb.uH.lvt.aH.mvt,e),this.Bc.tK(Wb.uH.lvt.aH.gvt,e)),this.yvt(),this.Fvt.rvt()}cst(){return{flowchartJsonObjects:[...this.Avt.values()].map(t=>t.cst()),currentFlowchartTag:this.Fvt?this.Fvt.a1():null}}fst(t){if(!t)return;this.Lvt=t;const s=new Map;for(const t of this.Lvt.flowchartJsonObjects){const i=t.flowchartTag;if(this.Avt.has(i)){const e=this.Avt.get(i);e.fst(t),s.set(i,e)}else{const i=this.Mvt(t.flowchartName,t.startNodeTag,t.flowchartTag,null,!1,t.pluginUID);i.fst(t),s.set(t.flowchartTag,i)}}for(const[t,i]of this.Avt.entries())s.has(t)||i.qn();this.Avt.clear(),this.Avt=s,this.Bc.Vit()?this.Bc.Sf().addEventListener("afterload",this.Dvt):this.Snt()}Snt(){this.Bc.Sf().removeEventListener("afterload",this.Dvt);const t=this.Avt.get(this.Lvt.currentFlowchartTag);t&&this.GSt(t,!0),this.Lvt=null}}}{const Ub=self.Cs;Ub.Dwt=class{constructor(){this.Vvt=new Map}qn(){for(const t of this.Vvt.values())t.qn();this.Vvt.clear(),this.Vvt=null}$u(t){const s=new Ub.zvt(t),i=s.Pc();this.Vvt.set(i,s)}qs(t){return this.Vvt.get(t)}Nwt(){return!!this.Vvt.size}static jvt(t,s,i,e){if(s)for(const n of s){const s=new i(n,e);t.push(s)}}}}{const Vb=self.Cs,zb=0,jb=1;Vb.zvt=class{constructor(t){this.Yn=t[0],this.qvt=new Vb.Hvt(t[1],this)}qn(){this.qvt.qn(),this.qvt=null}Jvt(){return this.qvt}lSt(t){return this.qvt.lSt(t)}VSt(t){return this.qvt.VSt(t)}zSt(){return this.qvt.zSt()}Pc(){return this.Yn}}}{const qb=self.Cs,Hb=0,Jb=1,Yb=2,Xb=3,Zb=4,Kb=5,Qb=6,tx=7,sx=8,ix=8,ex=9,nx=10,rx=11;class hx{constructor(t,s){this.qvt=s,this.Hc=t[7],this.Yvt=t[0],this.zw=t[1],this.zw?this.Fot=this.zw.trim().split(" ").map(t=>t.trim()):this.Fot=[],this.Xvt=t[2],this.Zvt=null,this.Kvt=null,this.fgt=!1,"dictionary"===this.Hc&&(this.Zvt=t[3],this.Kvt=t[4],this.fgt=t[8]),this.Qvt=t[6],this.tbt=null,this.sbt=null,this.ibt=null,"reference"===this.Hc&&(this.tbt=t[8],this.sbt=t[9],this.ibt=t[10],this.fgt=t[11]),this.ebt=new qb.nbt(t[5],this)}qn(){this.qvt=null}Jvt(){return this.qvt}ESt(){return this.ebt}qwt(){return this.Yvt}a1(){return this.zw}_1(){return this.Fot}d1(t){if(!this.Fot)return!1;if(!this.Fot.length)return!1;const s=qb.kwt.cat(t);return!(!s||!s.length)&&s.every(qb.kwt.dat,this.Fot)}rbt(){return this.Qvt}hbt(t){this.Qvt=!!t}obt(){if("dictionary"===this.Hc)return!0;if("reference"===this.Hc)return!1;throw new Error(`unexpected flowchart node type: ${this.Hc}`)}gSt(){return this.Xvt}abt(){return this.Zvt}lbt(){return this.Kvt}aC(){return this.Hc}wut(){return this.fgt}WSt(){return this.tbt}USt(){return this.sbt}bvt(){return this.ibt}}qb.Hvt=class{constructor(t,s){this.Uwt=s,this.ubt=[],this.cbt=new Map,this.fbt=new Map,this.dbt=null,qb.Dwt.jvt(this.ubt,t,hx,this);for(const t of this.ubt){const s=t.qwt(),i=t.a1(),e=t._1(),n=t.rbt();if(this.cbt.set(s,t),i)for(const s of e)this.fbt.has(s)||this.fbt.set(s,new Set),this.fbt.get(s).add(t);n&&(this.dbt=t);const r=t.ESt();for(const t of r.pbt()){const s=t.qwt();this.cbt.set(s,t)}}this.dbt||this.mbt()}qn(){this.Uwt=null;for(const t of this.ubt)t.qn();qb.bh(this.ubt),this.ubt=null}oSt(){return this.Uwt}lSt(t){return this.cbt.get(t)}VSt(t){if(!t||!t.length)return null;const s=[];for(const i of t.trim().split(" ")){let t=this.fbt.get(i.trim())??new Set;if(0===t.size)return null;s.push(t)}return[...s.reduce((t,s)=>s.size<t.size?s:t)].filter(t=>s.every(s=>s.has(t)))[0]}zSt(){return this.dbt}*gbt(){for(const t of this.ubt)yield t}mbt(){let t=0;for(const s of this.gbt())s.rbt()&&t++;if(0===t){for(const t of this.gbt())if(t.obt()&&!t.rbt())return void t.hbt(!0)}else{if(1===t)return;if(t>1){let t=!0;for(const s of this.gbt())s.obt()&&(s.rbt()&&t?t=!1:s.rbt()&&!t&&s.hbt(!1))}}for(const t of this.gbt())if(t.obt()&&t.rbt())return void(this.dbt=t)}}}{const ox=self.Cs,ax=0,lx=1,ux=2,cx=3,fx=4,dx=5;class px{constructor(t,s){this.ebt=s,this.Yvt=t[0],this.Yn=t[1],this.udt=t[2],this.ybt=t[3],this.fgt=t[4],this.wbt=t[5]}qn(){this.ebt=null}ESt(){return this.ebt}qwt(){return this.Yvt}Pc(){return this.Yn}Lct(){return this.udt}BSt(){return this.ybt}wut(){return this.fgt}Sbt(){return this.wbt}}ox.nbt=class{constructor(t,s){this.vbt=s,this.bbt=[],this.xbt=new Map,ox.Dwt.jvt(this.bbt,t,px,this),this.Mbt=this.bbt.filter(t=>t.wut());for(const t of this.Mbt)this.xbt.set(t.Pc(),t)}qn(){this.vbt=null;for(const t of this.bbt)t.qn();ox.bh(this.bbt),this.bbt=null,ox.bh(this.Mbt),this.Mbt=null}Tbt(){return this.vbt}ISt(){return this.Mbt.length}FSt(){return this.Mbt}_vt(t){return this.xbt.get(t)}ASt(){for(const t of this.Mbt)if(t.Sbt())return t}*pbt(){for(const t of this.Mbt)yield t}}}{const mx=self.Cs;mx.Gbt=class extends mx.Vn{constructor(t){super(),this._bt=t,this.Cbt=[],this.Cbt.push(mx.jn(mx.Ibt,this)),this.Vw=0,this.Ebt=this.Cbt[0]}qn(){for(const t of this.Cbt)t.qn();mx.bh(this.Cbt),this.Ebt=null,this._bt=null}wZ(){return this._bt}cY(){return this.Ebt}Pbt(){return this.Cbt[this.Vw-1]}Pu(){this.cY().Pu()}Rbt(){const t=this.Cbt,s=++this.Vw;if(s===t.length){const s=mx.jn(mx.Ibt,this);t.push(s),this.Ebt=s}else{const i=t[s];i.$f(),this.Ebt=i}}Abt(){const t=this.Cbt,s=++this.Vw;s===t.length&&t.push(mx.jn(mx.Ibt,this));const i=t[s];i.hd(t[s-1]),this.Ebt=i}L3(){this.Ebt=this.Cbt[--this.Vw]}Fbt(t){const s=this.Cbt;for(let i=0,e=s.length;i<e;++i)s[i].Fbt(t)}}}{const gx=self.Cs;gx.Ibt=class extends gx.Vn{constructor(t){super(),this.Cbt=t,this._bt=this.Cbt.wZ(),this.Obt=this._bt.yH()._j(),this.Dbt=!0,this.A6=[],this.Lbt=[]}qn(){this.Nbt(),this.Cbt=null,this._bt=null,this.Obt=null}Nbt(){gx.bh(this.A6),gx.bh(this.Lbt)}wZ(){return this._bt}kbt(){return this.Dbt}Bbt(){return this.Dbt?!!this._bt.pY():!!this.A6.length}uY(){return this.Dbt?this._bt.uY():this.A6}$bt(){return!!this.Lbt.length}Wbt(){return this.Lbt}Ubt(){const t=this.uY();return t.length?t:this.Lbt}$f(){this.Dbt=!0,gx.bh(this.Lbt)}Pu(){this.Dbt=!0}hd(t){t.kbt()?this.$f():(this.Dbt=!1,gx.Gh(this.A6,t.A6),gx.bh(this.Lbt))}Vbt(t){this.A6.push(t)}zbt(t){this.Lbt.push(t)}jbt(t){this.Dbt=!!t}qbt(){return this.A6}Hbt(){return this.Lbt}Jbt(t){this.Dbt=!1,gx.bh(this.A6),this.A6.push(t)}Ybt(t){this.Dbt=!1,gx.Gh(this.A6,t)}Xbt(t){this.Dbt=!1,gx.bh(this.A6);for(const s of t)this.A6.push(s)}Zbt(t,s){for(const i of s)t.has(i)||this.Lbt.push(i)}Kbt(t){for(const s of t)this.A6.push(s);gx.Ph(this.Lbt,t)}Qbt(){gx.bh(this.Lbt)}txt(t){if(t)if(this.Obt.T3().Sj().sxt()){this.kbt()&&(gx.bh(this.A6),gx.Gh(this.Lbt,t.wZ().uY()),this.Dbt=!1);const s=this.Lbt.indexOf(t);-1!==s&&(this.A6.push(this.Lbt[s]),this.Lbt.splice(s,1))}else this.Jbt(t)}Fbt(t){gx.Ph(this.A6,t),gx.Ph(this.Lbt,t)}}}{const yx=self.Cs;yx.ixt=class extends yx.Vn{constructor(t){super(),this.nxt=t,this.Bc=this.nxt.yH(),this.Cbt=[],this.Cbt.push(yx.jn(yx.rxt,this,null)),this.Vw=0,this.hxt=[]}qn(){for(const t of this.Cbt)t.qn();yx.bh(this.Cbt),yx.bh(this.hxt),this.nxt=null,this.Bc=null}dj(){return this.nxt}yH(){return this.Bc}T3(){return this.Cbt[this.Vw]}oxt(){return this.Cbt}axt(){return this.Vw}G3(t){const s=this.Cbt,i=++this.Vw;if(i===s.length){const i=yx.jn(yx.rxt,this,t);return s.push(i),i}{const e=s[i];return e.$f(t),e}}L3(){--this.Vw}lxt(t){this.hxt.push(t)}uxt(){this.hxt.pop()}Gj(){const t=this.hxt;return 0===t.length?null:t.at(-1)}}}{const wx=self.Cs;wx.rxt=class extends wx.Vn{constructor(t,s){super(),this.Cbt=t,this.Bc=this.Cbt.yH(),this.cxt=s,this.fxt=0,this.dxt=0,this.pxt=!1,this.mxt=!1,this.gxt=null,this.yxt=0,this.wxt=0,this.Sxt=null}qn(){this.$f(null),this.Cbt=null,this.Bc=null}$f(t){this.cxt=t,this.fxt=0,this.dxt=0,this.pxt=!1,this.mxt=!1,this.Sxt=null}vxt(t,s){this.cxt=t,this.fxt=0,this.dxt=s}bxt(){this.fxt=0,this.dxt=0}Sj(){return this.cxt}xxt(t){this.cxt=t}Mxt(){return this.fxt}Txt(t){this.fxt=t}Gxt(){return this.dxt}_xt(t){this.dxt=t}Cxt(t){this.pxt=!!t}Ixt(){return this.pxt}Ext(t){this.mxt=!!t}Pxt(){return this.mxt}Rxt(t){this.gxt=t}Axt(){return this.gxt}Fxt(t,s){this.yxt=t,this.wxt=s}Cj(){return this.yxt}Ij(t){this.wxt=t}Oxt(){return this.wxt}Dxt(){const t=this.cxt;return!!t.Lxt()||this.fxt<t.Nxt()-1&&!!t.M3().length}kxt(t){this.Sxt=t}Bxt(){return this.Sxt}}}{const Sx=self.Cs;Sx.$xt=class extends Sx.Vn{constructor(t){super(),this.nxt=t,this.Bc=this.nxt.yH(),this.Cbt=[],this.Vw=-1,this.Ebt=null,this.Wxt=[]}qn(){Sx.bh(this.Cbt),this.nxt=null,this.Bc=null}Uxt(t){this.Wxt=t;const s=this.Wxt.slice(0);this.Cbt.push(s),this.Vw=0,this.Ebt=s}dj(){return this.nxt}yH(){return this.Bc}Vxt(){return this.Ebt}G3(){const t=++this.Vw,s=this.Cbt;t===s.length?s.push(this.Wxt.slice(0)):Sx.Gh(s[t],this.Wxt),this.Ebt=s[t]}L3(){this.Ebt=this.Cbt[--this.Vw]}}}{const vx=self.Cs;vx.zxt=class extends vx.Vn{constructor(t){super(),this.nxt=t,this.Bc=this.nxt.yH(),this.Cbt=[],this.Vw=-1}qn(){vx.bh(this.Cbt),this.nxt=null,this.Bc=null}dj(){return this.nxt}yH(){return this.Bc}jxt(){return this.Vw>=0}Vxt(){return this.Cbt[this.Vw]}G3(){if(++this.Vw,this.Vw===this.Cbt.length){const t=vx.jn(vx.qxt,this);return this.Cbt.push(t),t}{const t=this.Cbt[this.Vw];return t.$f(),t}}L3(){--this.Vw}Hxt(t){const s=this.Cbt;for(let i=this.Vw;i>=0;--i){const e=s[i];if(e.Pc()===t)return e}return null}Jxt(){return this.Cbt.slice(0,this.Vw+1)}}}{const bx=self.Cs;bx.qxt=class extends bx.Vn{constructor(t){super(),this.Yxt=t,this.Yn="",this.Vw=0,this.Xxt=!1,this.Zxt=NaN}$f(){this.Yn="",this.Vw=0,this.Xxt=!1,this.Zxt=NaN}C3(t){this.Yn=t}Pc(){return this.Yn}F3(t){this.Vw=t}Rz(){return this.Vw}c1(){this.Xxt=!0}D3(){return this.Xxt}Kxt(t){this.Zxt=t}Qxt(){return this.Zxt}}}{const xx=self.Cs;xx.tMt=class extends xx.Vn{constructor(){super(),this.Cbt=[],this.Vw=-1}qn(){xx.bh(this.Cbt)}Vxt(){return this.Cbt[this.Vw]}G3(){if(++this.Vw,this.Vw===this.Cbt.length){const t=[];return this.Cbt.push(t),t}return this.Cbt[this.Vw]}L3(){--this.Vw}}}{let Mx=function(t,s){return t.Rz()-s.Rz()},Tx=function(t,s){for(let i=0,e=t.length;i<e;++i)if(t[i]!==s[i])return!1;return!0};SortSolArray=Mx,IsSolArrayIdentical=Tx;const Gx=self.Cs,_x=self.assert;Gx.sMt=class extends Gx.Vn{constructor(t){super(),this.Bc=t,this.iMt=[],this.eMt=new Map,this.nMt=[],this.rMt=new Map,this.hMt=new Map,this.oMt=new Map,this.aMt=new Map,this.lMt=new Map,this.uMt=new Map,this.cMt=0,this.fMt=[],this.dMt=[],this.pMt=[],this.mMt=new Map,this.gMt=new Map,this.Obt=Gx.jn(Gx.ixt,this),this.yMt=Gx.jn(Gx.$xt,this),this.Yxt=Gx.jn(Gx.zxt,this),this.wMt=[],this.SMt=[],this.vMt=[],this.bMt=0,this.xMt=0,this.MMt=0,this.TMt=[],this.GMt=[],this._Mt=[],this.CMt=new Map,this.IMt=new Map,self.c3_callFunction=(t,s)=>this.EMt(t,s)}qn(){this.aet(),this.Obt.qn(),this.Obt=null,this.yMt.qn(),this.yMt=null,Gx.bh(this.SMt),Gx.bh(this.vMt),this.Bc=null,Gx.bh(this.iMt),this.eMt.clear()}e_(t){const s=Gx.jn(Gx.PMt,this,t);this.iMt.push(s),this.eMt.set(s.Pc().toLowerCase(),s)}RMt(t){this.wMt.push(t)}AMt(){for(const t of this.gMt.values())t.FMt();for(const t of this.mMt.values())t.AMt();for(const t of this.gMt.values())t.AMt();for(const t of this.iMt)t.AMt();for(const t of this.iMt)t.Ait();for(const t of this.wMt)t.AMt(!1);Gx.bh(this.wMt),this.yMt.Uxt(this.pMt)}yH(){return this.Bc}Rit(t){return this.eMt.get(t.toLowerCase())||null}OMt(t){this.nMt.push(t),this.rMt.set(t.DMt(),t)}LMt(t){this.hMt.set(t.H7(),t)}NMt(t){this.oMt.set(t.H7(),t)}kMt(t){this.aMt.set(t.H7(),t)}BMt(t){switch(t.$Mt()){case 0:this.mMt.set(t.WMt().toLowerCase(),t);break;case 1:this.gMt.set(t.WMt().toLowerCase(),t)}}UMt(t){this.uMt.set(t.H7(),t),t.o8()?this.fMt.push(t):this.dMt.push(t)}VMt(t){t.length>=2&&t.sort(Mx);let s=this.lMt.get(t.length);s||(s=[],this.lMt.set(t.length,s));for(let i=0,e=s.length;i<e;++i){const e=s[i];if(Tx(t,e))return e}return s.push(t),t}zMt(t){return this.pMt.push(t.jMt()),this.cMt++}_j(){return this.Obt}qMt(){return this._j().T3()}Sj(){return this.qMt().Sj()}HMt(){const t=this.qMt();return t.Sj().JMt(t.Mxt())}YMt(){const t=this.qMt();return t.Sj().XMt(t.Gxt())}ZMt(){return this.yMt}_3(){return this.Yxt}KMt(t){const s=[];for(t=t.QMt();t;)Gx.Fn(s,t.tTt()),t=t.QMt();return s}sTt(t){const s={};for(const i of this.KMt(t))s[i.iTt()]=i.eTt();return Object.create(Object.prototype,s)}nTt(t){return this.uMt.get(t)||null}rTt(t){return this.hMt.get(t)||null}hTt(t){return this.oMt.get(t)||null}oTt(t){return this.aMt.get(t)||null}pj(t){return this.mMt.get(t.toLowerCase())||null}aTt(t,s){let i=this.gMt.get((t.Pc()+"."+s).toLowerCase());if(i)return i;if(!t.B7())for(const e of t.TY())if(i=this.gMt.get((e.Pc()+"."+s).toLowerCase()),i)return i;return null}lTt(){return this.fMt}uTt(){return this.dMt}cTt(t){for(const t of this.fMt)t.fTt();if(t)for(const t of this.dMt)t.rG()&&t.fTt()}dTt(t){return this.rMt.get(t.toLowerCase())||null}pTt(t){const s=this.hMt.get(t);return s&&s.mTt()?s:null}gTt(){return this.nMt}yTt(){for(const t of this.nMt)t.wTt()}STt(){for(const t of this.iMt)t.vTt()}bTt(t){this.STt(),this.bMt++;for(const s of t.Wet()){const t=s.rit();t&&(this.Bc.xTt(s),t.IE(),this.Bc.MTt())}this.bMt--}async TTt(t){this.STt(),this.bMt++;for(const s of this.GTt(t))await this.Bc._Tt(s);this.bMt--}*GTt(t){for(const s of t.Wet()){const t=s.rit();t&&(this.Bc.xTt(s),yield*t.CTt(),this.Bc.MTt())}}ITt(t,s,i,e){let n=!1;if(!t.vq())return this.ETt(s,i,e);this.xMt++;for(const r of t.Wet()){const t=r.rit();if(!t)continue;this.Bc.xTt(r);for(const r of t.PTt()){const t=r.ITt(s,i,e);n=n||t}const h=t.ITt(s,i,e);n=n||h,this.Bc.MTt()}return this.xMt--,n}*RTt(t,s,i,e){let n=!1;if(!t.vq())return this.ETt(s,i,e);this.xMt++;for(const r of t.Wet()){const t=r.rit();if(!t)continue;this.Bc.xTt(r);for(const r of t.PTt()){const t=yield*r.RTt(s,i,e);n=n||t}const h=yield*t.RTt(s,i,e);n=n||h,this.Bc.MTt()}return this.xMt--,n}ETt(t,s,i){return this.SMt.push([t,s,i]),!1}ATt(t,s,i){let e=null;const n=new Promise(t=>e=t);return this.vMt.push([t,s,i,e]),n}*FTt(){if(this.Bc.OTt())throw new Error("should not be in breakpoint");const t=this.Bc.Mq();for(;this.vMt.length;){const[s,i,e,n]=this.vMt.shift();n(yield*this.RTt(t,s,i,e))}}async DTt(){for(const t of this.FTt())await this.Bc._Tt(t)}LTt(t,s,i,e){let n=!1;const r=t.vq(),h=r.rit();if(!h)return;this.xMt++,this.Bc.xTt(r);const o=h.PTt();for(let t=0,r=o.length;t<r;++t){const r=o[t].LTt(s,i,e);n=n||r}const a=h.LTt(s,i,e);return n=n||a,this.Bc.MTt(),this.xMt--,n}*NTt(t,s,i,e){let n=!1;const r=t.vq(),h=r.rit();if(!h)return;this.xMt++,this.Bc.xTt(r);const o=h.PTt();for(let t=0,r=o.length;t<r;++t){const r=yield*o[t].NTt(s,i,e);n=n||r}const a=yield*h.NTt(s,i,e);return n=n||a,this.Bc.MTt(),this.xMt--,n}kTt(){return this.xMt}BTt(){return this.kTt()>0}$Tt(){return++this.xMt}WTt(){--this.xMt}UTt(){return this.bMt>0}vY(){return this.UTt()||this.BTt()}Kit(t){for(const[s,i,e]of this.SMt)this.ITt(t,s,i,e);Gx.bh(this.SMt)}wY(t){t?this.MMt++:this.MMt--}GZ(){return this.MMt>0}VTt(t){for(let s=0,i=t.length;s<i;++s)t[s].zTt().Pu()}jTt(t){for(let s=0,i=t.length;s<i;++s)t[s].zTt().Rbt()}P3(t){for(let s=0,i=t.length;s<i;++s)t[s].zTt().Abt()}A3(t){for(let s=0,i=t.length;s<i;++s)t[s].zTt().L3()}vj(t){const s=new Set,i=this.Obt.oxt(),e=this.Obt.axt();for(let n=0;n<=e;++n){const e=i[n].Bxt();if(e)for(const i of e)t&&t.has(i)||s.add(i)}return s}qTt(t){const s=new Set([...t]),i=this.vj(s);if(i.size>0){for(const t of i)t.zTt().Rbt();return[...i]}return null}HTt(){const t=Gx.jn(Gx.JTt,this);return this.TMt.push(t),t}YTt(){return this.TMt}XTt(){if(!this.TMt.length)return;const t=this.qMt();let s=!1;this.bMt++;for(let i=0,e=this.TMt.length;i<e;++i){const e=this.TMt[i];e.ZTt()&&e.KTt(t),e.QTt()&&(s=!0)}s&&(this.tGt(),t.$f(null)),this.bMt--}async sGt(){if(!this.TMt.length)return;const t=this.qMt();let s=!1;this.bMt++;for(let i=0,e=this.TMt.length;i<e;++i){const e=this.TMt[i];e.ZTt()&&await e.iGt(t),e.QTt()&&(s=!0)}s&&(this.tGt(),t.$f(null)),this.bMt--}tGt(){const t=Gx.Eh(this.TMt,t=>t.QTt());for(const s of t)s.qn()}aet(){for(const t of this.TMt)t.qn();Gx.bh(this.TMt)}eGt(t){for(const s of this.TMt)s.Fbt(t);for(const s of t){const t=this.IMt.get(s);if(this.IMt.delete(s),t)for(const{resolve:s}of t.nGt.values())s(!0)}}rGt(t){this.GMt.push({promise:t,hGt:this.kTt()})}oGt(){Gx.bh(this.GMt)}aGt(){const t=this.kTt(),s=Promise.all(this.GMt.filter(s=>s.hGt===t).map(t=>t.promise));return this.GMt=this.GMt.filter(s=>s.hGt<t),s}Ej(t){const s=t.toLowerCase();this._Mt.push(s),this.Bc.tK(Gx.uH.lH.aH.lGt,null),this._Mt.pop();for(const t of this.Bc.dj().YTt())t.uGt()&&t.cGt()===s&&t.fGt();const i=this.CMt.get(s);i&&(i.resolve(),this.CMt.delete(s))}Rj(t){const s=t.toLowerCase(),i=this.CMt.get(s);if(i)return i.promise;{let t=null;const i=new Promise(s=>t=s);return this.CMt.set(s,{promise:i,resolve:t}),i}}dGt(){if(0===this._Mt.length)throw new Error("not in a signal");return this._Mt.at(-1)}pGt(t){let s=this.IMt.get(t);return s||(s={mGt:[],nGt:new Map},this.IMt.set(t,s)),s}zZ(t,s){const i=this.pGt(t),e=s.toLowerCase();i.mGt.push(e),this.Bc.tK(t.QJ().yGt().aH.gGt,t),i.mGt.pop();for(const s of this.Bc.dj().YTt())s.wGt()&&s.cGt()===e&&s.SGt(t);const n=i.nGt.get(e);n&&(n.resolve(!1),i.nGt.delete(e)),0===i.mGt.length&&0===i.nGt.size&&this.IMt.delete(t)}jZ(t,s){const i=this.pGt(t),e=s.toLowerCase(),n=i.nGt.get(e);if(n)return n.promise;{let t=null;const s=new Promise(s=>t=s);return i.nGt.set(e,{promise:s,resolve:t}),s}}vGt(t){const s=this.pGt(t);if(!s||0===s.mGt.length)throw new Error("not in a signal");return s.mGt.at(-1)}cst(){return{groups:this.bGt(),cnds:this.xGt(),acts:this.MGt(),vars:this.TGt(),waits:this.GGt()}}fst(t){this._Gt(t.groups),this.CGt(t.cnds),this.IGt(t.acts),this.EGt(t.vars),this.PGt(t.waits)}bGt(){const t={};for(const s of this.gTt())t[s.H7().toString()]=s.RGt();return t}_Gt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.pTt(t);e&&e.AGt(i)}}xGt(){const t={};for(const[s,i]of this.oMt){const e=i.cst();e&&(t[s.toString()]=e)}return t}CGt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.oMt)i.fst(s.get(t)||null)}MGt(){const t={};for(const[s,i]of this.aMt){const e=i.cst();e&&(t[s.toString()]=e)}return t}IGt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.aMt)i.fst(s.get(t)||null)}TGt(){const t={};for(const[s,i]of this.uMt)i.FGt()||!i.o8()&&!i.rG()||(t[s.toString()]=i.Lct());return t}EGt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.nTt(t);e&&e.wft(i)}}GGt(){return this.TMt.filter(t=>!t.OGt()).map(t=>t.cst())}PGt(t){this.aet();for(const s of t){const t=Gx.JTt.DGt(this,s);t&&this.TMt.push(t)}}LGt(){return[...this.Bc.Mq().Wet()].map(t=>t.rit()).filter(t=>t).map(t=>t.NGt())}kGt(t){for(;t;){const s=t.QMt();if(s instanceof Gx.BGt)return s;t=s}return null}EMt(t,s){Array.isArray(s)||(s=[]);const i=this.pj(t.toLowerCase());if(!i)return null;if(!i.Cu())return i.mj();const e=i.$Gt();if(s.length<e.length){s=s.slice(0);do{s.push(e[s.length].jMt())}while(s.length<e.length)}const n=i.yj();return n.bj(n.wj(),!1,i.Mj(),i.mj(),...s)}}}{const Cx=self.Cs;Cx.PMt=class extends Cx.Vn{constructor(t,s){super(),this.nxt=t,this.Bc=t.yH(),this.Yn=s[0],this.WGt=[],this.UGt=new Map,this.VGt=new Map,this.zGt=new Map,this.jGt=!1,this.qGt=[],this.HGt=[],this.JGt=new Set;for(const t of s[1])this.YGt(t,null,this.WGt);this.XGt=this.Bc.aK()?{type:"sheet",name:this.Yn,ZGt:0,children:[]}:null}qn(){this.nxt=null,this.Bc=null}YGt(t,s,i){switch(t[0]){case 0:case 3:this.KGt(t,s,i);break;case 1:this.QGt(t,s,i);break;case 2:this.t_t(t,s,i);break;case 4:this.s_t(t,s);break;case 5:this.i_t(t,s,i);break;case 6:this.e_t(t,s);break;default:throw new Error("invalid event type")}}KGt(t,s,i){const e=Cx.n_t.e_(this,s,t);if(e.sxt()){i.push(e);const t=e.r_t();for(let s=0,i=t.length;s<i;++s)t[s].h_t()&&this.o_t(e,s)}else e.h_t()?this.o_t(e,0):i.push(e)}s_t(t,s){const i=Cx.BGt.a_t(this,s,t);this.nxt.BMt(i)}e_t(t,s){const i=Cx.BGt.l_t(this,s,t);this.nxt.BMt(i)}QGt(t,s,i){const e=Cx.u_t.e_(this,s,t);i.push(e)}t_t(t,s,i){const e=Cx.c_t.e_(this,s,t);i.push(e)}i_t(t,s,i){const e=Cx.f_t.e_(this,s,t);i.push(e)}o_t(t,s){t.sxt()||this.nxt.RMt(t);const i=t.JMt(s),e=i.d_t(),n=i.wZ();if(i.p_t()){let r=this.VGt.get(n);r||(r=new Map,this.VGt.set(n,r));const h=i.m_t().toLowerCase();let o=r.get(e);o||(o=new Map,r.set(e,o));let a=o.get(h);a||(a=[],o.set(h,a)),a.push([t,s])}else{let r=this.UGt.get(n);r||(r={g_t:new Map,y_t:new Map},this.UGt.set(n,r));const h=i.w0();let o;h?(o=r.y_t.get(h),o||(o=new Map,r.y_t.set(h,o))):o=r.g_t;let a=o.get(e);a||(a=[],o.set(e,a)),a.push([t,s])}}AMt(){const t=this.WGt;for(let s=0,i=t.length;s<i;++s){const e=s<i-1&&t[s+1]instanceof Cx.n_t&&t[s+1].w_t();t[s].AMt(e)}}S_t(t){this.qGt.push(t)}Ait(){Cx.bh(this.HGt),this.v_t(this),this.JGt.clear()}v_t(t){const s=t.HGt,i=t.JGt;for(const e of this.qGt){const n=e.b_t();e.x_t()&&t!==n&&!i.has(n)&&(i.add(n),n.v_t(t),s.push(n))}}PTt(){return this.HGt}dj(){return this.nxt}yH(){return this.Bc}Pc(){return this.Yn}M_t(t,s){this.zGt.set(s,t)}T_t(t){return this.zGt.get(t)||null}vTt(){this.jGt=!1}IE(){if(this.jGt)return;const t=this.Bc,s=t.G_t(),i=s?performance.now():0;this.jGt=!0;const e=this.dj(),n=e.qMt();for(const s of this.WGt)s.IE(n),e.VTt(s.M3()),e.oGt(),t.xY();n.$f(null),s&&(this.XGt.ZGt+=performance.now()-i)}*CTt(){if(this.jGt)return;this.jGt=!0;const t=this.Bc,s=this.dj(),i=s.qMt();for(const e of this.WGt)yield*e.CTt(i),s.VTt(e.M3()),s.oGt(),t.xY();i.$f(null)}ITt(t,s,i){if(!s)return this.__t(t,s,null,null);{const e=s.wZ();let n=!1,r=this.__t(t,s,e,i);n=n||r;for(const h of e.TY())r=this.__t(t,s,h,i),n=n||r}}__t(t,s,i,e){const n=this.UGt.get(i);if(!n)return!1;const r=e?n.y_t.get(e):n.g_t;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){const e=this.C_t(s,t,i);o=o||e}return o}*RTt(t,s,i){if(!s)return yield*this.I_t(t,s,null,null);{const e=s.wZ();let n=!1,r=yield*this.I_t(t,s,e,i);n=n||r;for(const h of e.TY())r=yield*this.I_t(t,s,h,i),n=n||r}}*I_t(t,s,i,e){const n=this.UGt.get(i);if(!n)return!1;const r=e?n.y_t.get(e):n.g_t;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){let e;e=t.E_t()?this.C_t(s,t,i):yield*this.P_t(s,t,i),o=o||e}return o}LTt(t,s,i){const e=s.wZ(),n=this.VGt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=this.C_t(null,s[0],s[1]);o=o||i}return o}*NTt(t,s,i){const e=s.wZ(),n=this.VGt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=s[0],e=s[1];let n;n=i.E_t()?this.C_t(null,i,e):yield*this.P_t(null,i,e),o=o||n}return o}C_t(t,s,i){const e=this.Bc,n=this.nxt,r=n.Sj(),h=n._j(),o=n.kTt();let a=!1;r&&n.jTt(r.wj()),n.jTt(s.wj());const l=o>1;l&&n.ZMt().G3();const u=h.G3(s);t&&(s.r_t()[i].wZ().cY().Jbt(t),t.EZ()&&t.R_t());let c=!0;if(s.fQ()){const t=s.A_t();for(let s=0,i=t.length;s<i;++s)if(!t[s].F_t(u)){c=!1;break}}return c&&(s.sxt()?s.O_t(u,i):s.IE(u),a=u.Ixt()),h.L3(),l&&n.ZMt().L3(),n.A3(s.wj()),r&&n.A3(r.wj()),r||1!==o||(n.oGt(),n.GZ()||e.xY()),a}*P_t(t,s,i){const e=this.Bc,n=this.nxt,r=n.Sj(),h=n._j(),o=n.kTt();let a=!1;r&&n.jTt(r.wj()),n.jTt(s.wj());const l=o>1;l&&n.ZMt().G3();const u=h.G3(s);t&&(s.r_t()[i].wZ().cY().Jbt(t),t.EZ()&&t.R_t());let c=!0;if(s.fQ()){const t=s.A_t();for(let s=0,i=t.length;s<i;++s)if(!(yield*t[s].D_t(u))){c=!1;break}}return c&&(s.sxt()?yield*s.L_t(u,i):yield*s.CTt(u),a=u.Ixt()),h.L3(),l&&n.ZMt().L3(),n.A3(s.wj()),r&&n.A3(r.wj()),r||1!==o||(n.oGt(),n.GZ()||e.xY()),a}NGt(){return this.XGt}}}{let Ix=function(t,s){return!0};NoActions=Ix;const Ex=self.Cs,Px=[];function*Rx(t,s){return!0}Ex.n_t=class extends Ex.Vn{constructor(t,s,i){super(),this.Gst=t,this.Bc=t.yH(),this.N_t=s,this.k_t=null,this.Obt=this.Bc.dj()._j(),this.B_t=[],this.$_t=[],this.W_t=!1,this.U_t=!1,this.V_t=!1,this.z_t=!1,this.j_t=!!i[2],this.q_t=!1,this.H_t=null,this.J_t=[],this.pdt=[],this.Y_t=[],this.X_t=Ix,this.Z_t=Rx,this.K_t=!1,this.Q_t=!1,this.tCt="",this.sCt=!1,this.iCt=null,this.XGt=null,this.d8=i[4],this.eCt=i[5],this.Gst.M_t(this,this.eCt),this.nCt=this.Bc.aK()?{rCt:i[3][0],hCt:i[3][1],oCt:!1,aCt:!1,lCt:!1,uCt:!1}:null,this.dj().LMt(this),3===i[0]&&this.cCt(i[1]);let e=0;for(const t of i[6]){const s=Ex.fCt.e_(this,t,e++);this.J_t.push(s),this.dCt(s.wZ())}e=0;for(const t of i[7]){const s=Ex.pCt.e_(this,t,e++);this.pdt.push(s)}if(9===i.length){const t=i[8];for(const s of t)this.Gst.YGt(s,this,this.Y_t)}this.J_t.length&&(this.q_t=null===this.J_t[0].wZ()&&this.J_t[0].d_t()===Ex.uH.lH.aH.mCt),0===this.J_t.length&&(this.J_t=Px),0===this.pdt.length&&(this.pdt=Px),0===this.Y_t.length&&(this.Y_t=Px)}static e_(t,s,i){return Ex.jn(Ex.n_t,t,s,i)}cCt(t){this.K_t=!0,this.Q_t=!!t[0],this.sCt=this.Q_t,this.tCt=t[1].toLowerCase(),this.iCt=[],this.dj().OMt(this),this.Bc.aK()&&(this.XGt={type:"group",name:t[1],ZGt:0,children:[]})}gCt(t){this.iCt.push(t)}yCt(t,s){for(const i of t.wit().RY())s.includes(i)||s.push(i)}wCt(t,s){if(t)if(s.includes(t)||s.push(t),t.B7())for(const i of t.PY())i.EZ()&&this.yCt(i,s);else t.EZ()&&this.yCt(t,s)}dCt(t){this.wCt(t,this.B_t)}SCt(t){this.wCt(t,this.$_t)}vCt(){this.B_t=this.Bc.k7()}AMt(t){this.z_t=!!t,this.bCt(),this.xCt();for(const t of this.J_t)t.AMt();if(this.pdt.length>0){let t=!1;for(const s of this.pdt)s.AMt(),s.MCt()&&(t=!0);t?(this.X_t=this.TCt,this.Z_t=this.GCt):(this.X_t=this._Ct,this.Z_t=this.CCt)}const s=this.Y_t;for(let t=0,i=s.length;t<i;++t){const e=t<i-1&&s[t+1]instanceof Ex.n_t&&s[t+1].w_t();s[t].AMt(e)}this.nCt&&this.ICt(),this.XGt&&this.ECt().NGt().children.push(this.XGt)}NGt(){return this.XGt}ECt(){let t=this.fQ();for(;t;){if(t.mTt())return t;t=t.fQ()}return this.Gst}ICt(){const t=this.nCt;t.oCt=this.J_t.every(t=>t.E_t()),t.aCt=this.pdt.every(t=>t.E_t()),t.lCt=this.Y_t.every(t=>t.E_t()),t.uCt=t.oCt&&t.aCt&&t.lCt}PCt(){let t=this;do{t.ICt(),t=t.fQ()}while(t)}bCt(){if(!this.mTt())return;let t=this.fQ();for(this.V_t=!0;t;){if(!t.mTt()){this.V_t=!1;break}t=t.fQ()}}RCt(){const t=this.Bc.k7();if(this.B_t===t)this.$_t=t;else{this.$_t=Ex.Fh(this.B_t);let t=this.fQ();for(;t;){for(const s of t.B_t)this.SCt(s);t=t.fQ()}const s=this.dj();this.B_t=s.VMt(this.B_t),this.$_t=s.VMt(this.$_t)}}xCt(){if(!this.ACt())return;this.H_t=[];let t=this.fQ();for(;t;)this.H_t.push(t),t=t.fQ();this.H_t.reverse()}FCt(){this.U_t=!0,this.N_t&&this.N_t.FCt()}Lxt(){return this.U_t}M3(){return this.B_t}wj(){return this.W_t||(this.W_t=!0,this.RCt()),this.$_t}OCt(t){return this.B_t.includes(t)}A_t(){return this.H_t}rit(){return this.Gst}dj(){return this.Gst.dj()}yH(){return this.Bc}fQ(){return this.N_t}DCt(t){this.k_t=t}QMt(){return this.k_t||this.N_t}LCt(){return this.eCt}NCt(){return this.nCt&&this.nCt.hCt}kCt(){return this.NCt()&&this.nCt.rCt}BCt(t){this.nCt.rCt=!!t,this.PCt()}mTt(){return this.K_t}$Ct(){return this.V_t}w_t(){return this.q_t}WCt(){return this.z_t}DMt(){return this.tCt}RGt(){return this.sCt}wTt(){this.AGt(this.Q_t)}AGt(t){if(t=!!t,!this.K_t)throw new Error("not a group");if(this.sCt!==t){this.sCt=t;for(const t of this.iCt)t.UCt();if(this.iCt.length){const t=this.Bc.Uq().rit();t&&t.Ait()}}}H7(){return this.d8}sxt(){return this.j_t}h_t(){return this.J_t.length&&this.J_t[0].h_t()}VCt(){return this.k_t&&this.k_t instanceof Ex.BGt}ACt(){return this.VCt()||this.J_t.some(t=>t.h_t())}r_t(){return this.J_t}Nxt(){return this.J_t.length}JMt(t){if((t=Math.floor(t))<0||t>=this.J_t.length)throw new RangeError("invalid condition index");return this.J_t[t]}zCt(t){return this.JMt(t)}jCt(t){let s=t.Rz();if(0===s)return!0;--s;const i=t.qCt()?t.HCt():t.wZ();for(;s>=0;--s){const t=this.J_t[s];if(i===t.wZ()||t.qCt()&&t.HCt()===i)return!1}return!0}JCt(){return this.pdt}YCt(){return this.pdt.length}XMt(t){if((t=Math.floor(t))<0||t>=this.pdt.length)throw new RangeError("invalid action index");return this.pdt[t]}XCt(t){t=Math.floor(t);const s=this.pdt.find(s=>s.ZCt()===t);if(!s)throw new RangeError("invalid action debug index");return s}KCt(t){return(t=Math.floor(t))>=0&&t<this.pdt.length}QCt(){return this.Y_t}tTt(){return this.Y_t.filter(t=>t instanceof Ex.u_t)}F_t(t){t.xxt(this);const s=this.J_t;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t.Txt(e),n.A0())throw new Error("trigger cannot be used as sub-event to a loop");if(n.IE())i=!0;else if(!this.j_t)return!1}return!this.j_t||i}O_t(t,s){t.xxt(this),t.Txt(s),this.J_t[s].IE()&&(this.X_t(t,0)&&this.tIt(t),t.Cxt(!0))}*D_t(t){t.xxt(this);const s=this.J_t;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t.Txt(e),n.A0())throw new Error("trigger cannot be used as sub-event to a loop");let r;if(r=n.E_t()?n.IE():yield*n.CTt(),r)i=!0;else if(!this.j_t)return!1}return!this.j_t||i}*L_t(t,s){t.xxt(this),t.Txt(s);const i=this.J_t[s];let e;if(e=i.E_t()?i.IE():yield*i.CTt(),e){let s;s=this.sIt()?this.X_t(t,0):yield*this.Z_t(t,0),s&&(this.iIt()?this.tIt():yield*this.eIt()),t.Cxt(!0)}}IE(t){t.xxt(this),this.q_t||t.Ext(!1),this.j_t?this.nIt(t):this.rIt(t)}*CTt(t){(this.kCt()||this.Bc.hIt())&&(yield this),t.xxt(this),this.q_t||t.Ext(!1),this.j_t?yield*this.oIt(t):yield*this.aIt(t)}nIt(t){const s=this.J_t;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.h_t())continue;t.Txt(e);const r=n.IE();i=i||r}t.Cxt(i),i&&(this.X_t(t,0)&&this.tIt(t),this.z_t&&t.Ext(!0))}*oIt(t){const s=this.J_t;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.h_t())continue;let r;t.Txt(e),r=n.E_t()?n.IE():yield*n.CTt(),i=i||r}if(t.Cxt(i),i){let s;s=this.sIt()?this.X_t(t,0):yield*this.Z_t(t,0),s&&(this.iIt()?this.tIt():yield*this.eIt()),this.z_t&&t.Ext(!0)}}rIt(t){const s=this.J_t;for(let i=0,e=s.length;i<e;++i){const e=s[i];if(t.Txt(i),!e.IE())return void t.Cxt(!1)}t.Cxt(!0),this.X_t(t,0)&&this.tIt(t),t.Ixt()&&this.z_t&&t.Ext(!0)}*aIt(t){const s=this.J_t;for(let i=0,e=s.length;i<e;++i){const e=s[i];let n;if(t.Txt(i),n=e.E_t()?e.IE():yield*e.CTt(),!n)return void t.Cxt(!1)}let i;t.Cxt(!0),i=this.sIt()?this.X_t(t,0):yield*this.Z_t(t,0),i&&(this.iIt()?this.tIt():yield*this.eIt()),t.Ixt()&&this.z_t&&t.Ext(!0)}_Ct(t,s){const i=this.pdt;for(let e=s,n=i.length;e<n;++e){const s=i[e];t._xt(e),s.IE()}return!0}*CCt(t,s){const i=this.pdt;for(let e=s,n=i.length;e<n;++e){const s=i[e];t._xt(e),s.E_t()?s.IE():yield*s.CTt()}return!0}TCt(t,s){const i=this.dj(),e=this.pdt;for(let n=s,r=e.length;n<r;++n){const s=e[n];t._xt(n);const r=s.IE();if(s.lIt()&&!0===r)return!1;s.uIt()&&r instanceof Promise&&i.rGt(r)}return!0}*GCt(t,s){const i=this.dj(),e=this.pdt;for(let n=s,r=e.length;n<r;++n){const s=e[n];let r;if(t._xt(n),r=s.E_t()?s.IE():yield*s.CTt(),s.lIt()&&!0===r)return!1;s.uIt()&&r instanceof Promise&&i.rGt(r)}return!0}cIt(t){this.X_t(t,t.Gxt())&&this.tIt()}*fIt(t){(yield*this.Z_t(t,t.Gxt()))&&(yield*this.eIt())}tIt(){if(!this.Y_t.length)return;const t=this.mTt()&&this.Bc.G_t(),s=t?performance.now():0,i=this.Obt,e=i.G3(this);this.U_t?this.dIt(e):this.pIt(e),i.L3(),t&&(this.XGt.ZGt+=performance.now()-s)}dIt(t){const s=this.K_t,i=this.V_t,e=this.dj(),n=this.Y_t;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.M3(),l=!i||!s&&r<o;l&&e.P3(a),h.IE(t),l?e.A3(a):e.VTt(a)}}pIt(t){const s=this.Y_t;for(let i=0,e=s.length;i<e;++i)s[i].IE(t)}*eIt(){if(!this.Y_t.length)return;const t=this.Obt,s=t.G3(this);this.U_t?yield*this.mIt(s):yield*this.gIt(s),t.L3()}*mIt(t){const s=this.K_t,i=this.V_t,e=this.dj(),n=this.Y_t;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.M3(),l=!i||!s&&r<o;l&&e.P3(a),yield*h.CTt(t),l?e.A3(a):e.VTt(a)}}*gIt(t){const s=this.Y_t;for(let i=0,e=s.length;i<e;++i)yield*s[i].CTt(t)}R3(t,s){s.bxt();const i=this.J_t;if(!this.sxt())for(let e=t.Mxt()+1,n=i.length;e<n;++e){const t=i[e];if(s.Txt(e),!t.IE())return!1}return this.X_t(s,0)&&this.tIt(s),!0}*yIt(t,s){s.bxt();const i=this.J_t;if(!this.sxt())for(let e=t.Mxt()+1,n=i.length;e<n;++e){const t=i[e];let n;if(s.Txt(e),n=t.E_t()?t.IE():yield*t.CTt(),!n)return!1}let e;return e=this.sIt()?this.X_t(s,0):yield*this.Z_t(s,0),e&&(this.iIt()?this.tIt():yield*this.eIt()),!0}E_t(){return!this.kCt()&&!this.Bc.hIt()&&this.nCt.uCt}sIt(){return!this.Bc.hIt()&&this.nCt.aCt}iIt(){return!this.Bc.hIt()&&this.nCt.lCt}wIt(t){if(this.fQ()){const s=this.A_t();for(let i=0,e=s.length;i<e;++i)if(!s[i].F_t(t))return!1}return!0}*SIt(t){if(this.fQ()){const s=this.A_t();for(let i=0,e=s.length;i<e;++i)if(!(yield*s[i].D_t(t)))return!1}return!0}vIt(t,s,i){if(s.length>0)if(i){const i=s.map(t=>t.qs(0));t.ZMt().G3(),this.k_t.bIt(i)}else this.k_t.xIt(s);else i&&t.ZMt().G3()}MIt(t,s,i,e){let n,r;const h=t.length>0;let o=null;const a=this.Bc,l=this.Obt,u=a.dj(),c=this.k_t,f=c.uIt(),d=u.$Tt()>1;if(this.vIt(u,s,d),h&&(i?u.P3(t):u.jTt(t)),null!==e){if(e.TIt){const t=i?e.TIt.cY():e.TIt.zTt().Pbt(),s=e.GIt.cY();s.Ybt(t.uY()),s.Qbt(),i||e.GIt._It()}else if(e.CIt){const t=e.CIt.cY();t.Ybt(e.IIt),t.Qbt()}e.EIt&&(o=u.qTt(t))}const p=l.G3(this);return i&&p.kxt(t),this.wIt(p)&&(p.xxt(this),f&&([r,n]=c.PIt()),this.rIt(p),f&&c.RIt(r)),l.L3(),d&&u.ZMt().L3(),null!==o&&u.A3(o),h&&u.A3(t),u.WTt(),n}*AIt(t,s,i,e){let n,r;(this.kCt()||this.Bc.hIt())&&(yield this);const h=t.length>0;let o=null;const a=this.Bc,l=this.Obt,u=a.dj(),c=this.k_t,f=c.uIt(),d=u.$Tt()>1;if(this.vIt(u,s,d),h&&(i?u.P3(t):u.jTt(t)),null!==e){if(e.TIt){const t=i?e.TIt.cY():e.TIt.zTt().Pbt(),s=e.GIt.cY();s.Ybt(t.uY()),s.Qbt(),i||e.GIt._It()}else if(e.CIt){const t=e.CIt.cY();t.Ybt(e.IIt),t.Qbt()}e.EIt&&(o=u.qTt(t))}const p=l.G3(this);return i&&p.kxt(t),(yield*this.SIt(p))&&(p.xxt(this),f&&([r,n]=c.PIt()),yield*this.aIt(p),f&&c.RIt(r)),l.L3(),d&&u.ZMt().L3(),null!==o&&u.A3(o),h&&u.A3(t),u.WTt(),n}FIt(t,s){const i=this.wj(),e=i.length>0,n=this.Bc,r=this.Obt,h=n.dj(),o=h.$Tt()>1;o&&h.ZMt().G3(),this.k_t.bIt(t),e&&(s?h.P3(i):h.jTt(i));const a=r.G3(this);this.wIt(a)&&(a.xxt(this),this.rIt(a)),r.L3(),o&&h.ZMt().L3(),e&&h.A3(i),h.WTt()}*OIt(t,s){(this.kCt()||this.Bc.hIt())&&(yield this);const i=this.wj(),e=i.length>0,n=this.Bc,r=this.Obt,h=n.dj(),o=h.$Tt()>1;o&&h.ZMt().G3(),this.k_t.bIt(t),e&&(s?h.P3(i):h.jTt(i));const a=r.G3(this);(yield*this.SIt(a))&&(a.xxt(this),yield*this.aIt(a)),r.L3(),o&&h.ZMt().L3(),e&&h.A3(i),h.WTt()}bj(t,s,i,e,...n){let r,h;const o=t.length>0,a=this.Bc,l=this.Obt,u=a.dj(),c=this.k_t,f=c.uIt(),d=u.$Tt()>1;d&&u.ZMt().G3(),n.length>0&&this.k_t.bIt(n),o&&(s?u.P3(t):u.jTt(t));const p=l.G3(this);return p.Fxt(i,e),l.lxt(p),a.I3(!1),this.wIt(p)&&(p.xxt(this),f&&([h,r]=c.PIt()),this.rIt(p),f&&c.RIt(h)),a.I3(!0),l.L3(),l.uxt(),d&&u.ZMt().L3(),o&&u.A3(t),u.WTt(),r||p.Oxt()}}}{const Ax=self.Cs,Fx=[];let Ox=!1;Ax.f_t=class extends Ax.Vn{constructor(t,s,i){super();const e=t.yH(),n=t.dj();this.Gst=t,this.nxt=n,this.Bc=t.yH(),this.N_t=s;const r=e.DIt(i[1]);this.LIt=r,this.eCt=i[2],this.Gst.M_t(this,this.eCt),this.nCt=e.aK()?{rCt:i[3][0],hCt:i[3][1]}:null}static e_(t,s,i){return Ax.jn(Ax.f_t,t,s,i)}AMt(){const t=this.LIt,s=this.Bc.dj().sTt(this);this.LIt=t.bind(null,this.Bc.TJ(),s)}fQ(){return this.N_t}QMt(){return this.N_t}rit(){return this.Gst}LCt(){return this.eCt}NCt(){return this.nCt&&this.nCt.hCt}kCt(){return this.NCt()&&this.nCt.rCt}BCt(t){this.nCt.rCt=!!t}w_t(){return!1}M3(){return Fx}wj(){return this.N_t?this.N_t.wj():Fx}IE(t){t.xxt(this),this.nxt.rGt(this.NIt())}async NIt(){try{await this.LIt()}catch(t){console.error(`Unhandled exception running script %c${this.rit().Pc()}, event ${this.LCt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.lK&&self.lK.kIt(this),Ox||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Ox=!0)}}*CTt(t){t.xxt(this),(this.kCt()||this.Bc.hIt())&&(yield this),this.IE(t)}E_t(){return!this.kCt()&&!this.Bc.hIt()}static BIt(){return Ox}static $It(){Ox=!0}}}{const Dx=self.Cs,Lx=self.assert;Dx.BGt=class extends Dx.Vn{constructor(t,s,i){super(),this.Gst=t,this.Bc=t.yH(),this.N_t=s,this.WIt=0,this.UIt="",this.VIt=0,this.zIt=[],this.jIt=!0,this.qIt="",this._bt=null,this.HIt=!1,this.JIt=[],this.YIt=!1,this.XIt=!1,this.ZIt=0,this.KIt=-1,this.QIt=new Map,this.tEt=Dx.n_t.e_(t,s,i),this.tEt.DCt(this)}sEt(t){this.WIt=0,this.UIt=t[0],this.VIt=t[1],this.zIt=t[2].map(t=>Dx.u_t.e_(this.Gst,this,t)),this.jIt=t[3],this.XIt=t[4],this.YIt=t[5]}iEt(t){this.WIt=1,this.qIt=t[1],this._bt=this.Bc.g7(t[2]),this.tEt.dCt(this._bt),this.UIt=this._bt.Pc()+"."+this.qIt,this.VIt=t[3],this.zIt=t[4].map(t=>Dx.u_t.e_(this.Gst,this,t)),this.jIt=t[5],this.XIt=t[6],this.YIt=t[7],this._bt.eEt(this)}static a_t(t,s,i){const e=Dx.jn(Dx.BGt,t,s,i),n=i[1];return e.sEt(n),e}static l_t(t,s,i){const e=Dx.jn(Dx.BGt,t,s,i),n=i[1];return e.iEt(n),e}FMt(){if(this._bt&&this._bt.B7())for(const t of this._bt.PY())if(t.nEt(this.qIt)){this.HIt=!0;break}}AMt(){for(const t of this.zIt)t.AMt();this.tEt.AMt(!1)}$Mt(){return this.WIt}tTt(){return this.zIt}$Gt(){return this.zIt}gj(){return this.zIt.length}rEt(t){this.JIt.push(t)}hEt(){return this.JIt}xIt(t){const s=this.zIt;for(let i=0,e=s.length;i<e;++i)s[i].wft(t[i].qs(0))}bIt(t){const s=this.zIt;for(let i=0,e=s.length;i<e;++i)s[i].wft(t[i])}oEt(){return this.zIt.map(t=>t.Lct())}fQ(){return this.N_t}QMt(){return this.N_t}WMt(){return this.UIt}aEt(){return this.qIt}lEt(){return this.HIt}Mj(){return this.VIt}wZ(){return this._bt}Cu(){return this.jIt}mj(){switch(this.VIt){case 0:return null;case 2:return"";default:return 0}}yj(){return this.tEt}xj(){return this.YIt}uIt(){return this.XIt}PIt(){const t=this.ZIt++;let s;this.KIt=t;const i=new Promise(t=>s=t);return this.QIt.set(t,{resolve:s,uEt:0}),[t,i]}RIt(t){const s=this.QIt.get(t);0===s.uEt&&(s.resolve(),this.QIt.delete(t)),this.KIt=-1}cEt(){return this.QIt.get(this.KIt).uEt++,this.KIt}fEt(t){this.KIt=t,this.QIt.get(t).uEt--}dEt(t,s){const i=new Map,e=[];for(const t of this._bt.cY().uY()){const s=t.wZ();if(s.nEt(this.qIt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&this.tEt.MIt(t,s,this.YIt,{CIt:this._bt,IIt:e}),i.size>0)for(const[e,n]of i){const i=e.pEt(this.qIt).yj(),r=[...new Set([...t,...i.M3()])];i.MIt(r,s,this.YIt,{CIt:e,IIt:n})}}*mEt(t,s){const i=new Map,e=[];for(const t of this._bt.cY().uY()){const s=t.wZ();if(s.nEt(this.qIt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&(yield*this.tEt.AIt(t,s,this.YIt,{CIt:this._bt,IIt:e})),i.size>0)for(const[e,n]of i){const i=e.pEt(this.qIt).yj(),r=[...new Set([...t,...i.M3()])];yield*i.AIt(r,s,this.YIt,{CIt:e,IIt:n})}}}}{const Nx=self.Cs,kx=[];Nx.u_t=class extends Nx.Vn{constructor(t,s,i){super();const e=t.dj();this.Gst=t,this.nxt=e,this.Bc=t.yH(),this.N_t=s,this.yMt=e.ZMt(),this.Yn=i[1],this.Hc=i[2],this.gEt=i[3],this.RT=!!i[4],this.yEt=!!i[5],this.wEt=s instanceof Nx.BGt,this.d8=i[6],this.SEt=this.Bc.iTt(i[8]),this.vEt=t=>this.wft(t),this.bEt=()=>this.xEt(),this.MEt=!this.N_t||this.RT||this.yEt,this.udt=this.gEt,this.TEt=-1,this.GEt()&&(this.udt=this.udt?1:0),!this._Et()||this.rG()||this.FGt()||(this.TEt=e.zMt(this)),e.UMt(this)}static e_(t,s,i){return Nx.jn(Nx.u_t,t,s,i)}AMt(){if(this._Et()&&!this.rG()&&!this.FGt()&&!this.CEt()){const t=this.nxt.kGt(this);t&&t.rEt(this)}}Pc(){return this.Yn}iTt(){return this.SEt}fQ(){return this.N_t}QMt(){return this.fQ()}o8(){return!this.fQ()}_Et(){return!this.o8()}CEt(){return this.wEt}rG(){return this.RT}FGt(){return this.yEt}Qi(){return 0===this.Hc}le(){return 1===this.Hc}GEt(){return 2===this.Hc}w_t(){return!1}H7(){return this.d8}jMt(){return this.gEt}M3(){return kx}IE(t){!this._Et()||this.rG()||this.FGt()||this.wft(this.jMt())}E_t(){return!0}*CTt(t){this.IE(t)}wft(t){this.Qi()?"number"!=typeof t&&(t=parseFloat(t)):this.le()?"string"!=typeof t&&(t=t.toString()):this.GEt()&&(t=t?1:0),this.MEt?this.udt=t:this.yMt.Vxt()[this.TEt]=t}Lct(){return this.MEt?this.udt:this.yMt.Vxt()[this.TEt]}xEt(){let t=this.Lct();return this.GEt()&&(t=!!t),t}fTt(){this.udt=this.gEt}eTt(){return{configurable:!1,enumerable:!0,get:this.bEt,set:this.vEt}}}}{const Bx=self.Cs,$x=self.assert,Wx=[];Bx.c_t=class extends Bx.Vn{constructor(t,s,i){super();const e=t.dj();this.Gst=t,this.nxt=e,this.Bc=t.yH(),this.N_t=s,this.IEt=null,this.EEt=i[1],this.Bf=!0}static e_(t,s,i){return Bx.jn(Bx.c_t,t,s,i)}AMt(){this.IEt=this.nxt.Rit(this.EEt),this.Gst.S_t(this);let t=this.fQ();for(;t;)t instanceof Bx.n_t&&t.mTt()&&t.gCt(this),t=t.fQ();this.UCt(),this.Bc.aK()&&this.Gst.NGt().children.push(this.IEt.NGt())}fQ(){return this.N_t}M3(){return Wx}b_t(){return this.IEt}IE(t){const s=!!this.fQ(),i=this.Bc.k7();s&&this.nxt.jTt(i),this.IEt.IE(),s&&this.nxt.A3(i)}*CTt(t){const s=!!this.fQ(),i=this.Bc.k7();s&&this.nxt.jTt(i),yield*this.IEt.CTt(),s&&this.nxt.A3(i)}E_t(){return!1}x_t(){return this.Bf}UCt(){let t=this.fQ();for(;t;){if(t instanceof Bx.n_t&&t.mTt()&&!t.RGt())return void(this.Bf=!1);t=t.fQ()}this.Bf=!0}}}{let Ux=function(t,s){return t>=s?t%s:t<0?(t<=-s&&(t%=s),t<0&&(t+=s),t):t};WrapIndex=Ux;const Vx=self.Cs,zx=self.assert;Vx.PEt=class extends Vx.Vn{constructor(t){super(),this.DM=t,this.Bc=t.yH()}AMt(){}static REt(t,s){const i=s[0],e=[Yx,Hx,Jx,Xx,jx,qx];return Vx.jn(e[i],t,s)}};class jx extends Vx.PEt{constructor(t,s){super(t),this.AEt=this.Bc.Z5(),this.LIt=this.Bc.DIt(s[1]),this.LIt!==Vx.uH.lH.Cdt.random&&this.LIt!==Vx.uH.lH.Cdt.FEt||this.DM.OEt()}DEt(){return this.AEt.LEt(this.LIt,this.AEt)}}class qx extends Vx.PEt{constructor(t,s){super(t),this.NEt=null,this.UIt=s[1],this.DM.OEt()}AMt(){const t=this.Bc.dj();this.NEt=t.pj(this.UIt),this.UIt=null;const s=this.DM.yj(),i=this.NEt.yj();this.kEt=[...new Set([...s.wj(),...i.wj()])],this.kEt=t.VMt(this.kEt)}DEt(){const t=this.NEt;if(t.Cu()){const s=t.yj();return Vx.n_t.prototype.bj.bind(s,this.kEt,t.xj(),t.Mj(),t.mj())}{const s=t.mj();return()=>s}}}class Hx extends Vx.PEt{constructor(t,s){super(t),this._bt=this.Bc.g7(s[1]),this.LIt=this.Bc.DIt(s[2]),this.BEt=!!s[3],this.Obt=this.Bc.dj()._j(),this.DM.$Et(this._bt)}DEt(){return this._bt.QJ().LEt(this.LIt,this._bt.XJ().a0())}WEt(...t){const s=this._bt,i=s.cY().Ubt(),e=i.length;if(0===e)return this.BEt?"":0;const n=Ux(this.DM.UEt(),e);return this.Obt.T3().Rxt(s),this.LIt.apply(i[n].a0(),t)}VEt(t,...s){const i=this._bt,e=i.uY(),n=e.length;if(0===n||"number"!=typeof t)return this.BEt?"":0;const r=Ux(t,n);return this.Obt.T3().Rxt(i),this.LIt.apply(e[r].a0(),s)}}class Jx extends Vx.PEt{constructor(t,s){super(t),this._bt=this.Bc.g7(s[1]),this.zEt=s[3],this.BEt=!!s[2],this.DM.$Et(this._bt)}jEt(){const t=this._bt.cY().Ubt(),s=t.length;return 0===s?this.BEt?"":0:t[Ux(this.DM.UEt(),s)].qEt(this.zEt)}HEt(){const t=this._bt,s=t.cY().Ubt(),i=s.length;if(0===i)return this.BEt?"":0;const e=s[Ux(this.DM.UEt(),i)],n=e.wZ().JEt(t.YEt());return e.qEt(this.zEt+n)}XEt(t){const s=this._bt,i=s.uY(),e=i.length;if(0===e||"number"!=typeof t)return this.BEt?"":0;const n=i[Ux(t,e)];let r=0;return s.B7()&&(r=n.wZ().JEt(s.YEt())),n.qEt(this.zEt+r)}}class Yx extends Vx.PEt{constructor(t,s){super(t),this._bt=this.Bc.g7(s[1]),this.ZEt=this._bt.Uft(s[2]),this.KEt=this._bt.lut(s[2]),this.LIt=this.Bc.DIt(s[3]),this.BEt=!!s[4],this.Obt=this.Bc.dj()._j(),this.DM.$Et(this._bt)}QEt(...t){const s=this._bt,i=s.cY().Ubt(),e=i.length;if(0===e)return this.BEt?"":0;const n=Ux(this.DM.UEt(),e);this.Obt.T3().Rxt(s);const r=i[n];let h=0;return s.B7()&&(h=r.wZ().tPt(s.YEt())),this.LIt.apply(r.Wft()[this.KEt+h].a0(),t)}sPt(t,...s){const i=this._bt,e=i.uY(),n=e.length;if(0===n||"number"!=typeof t)return this.BEt?"":0;const r=Ux(t,n);this.Obt.T3().Rxt(i);const h=e[r];let o=0;return i.B7()&&(o=h.wZ().tPt(i.YEt())),this.LIt.apply(h.Wft()[this.KEt+o].a0(),s)}}class Xx extends Vx.PEt{constructor(t,s){super(t),this.iPt=null,this.ePt=s[1]}AMt(){this.iPt=this.Bc.dj().nTt(this.ePt)}nPt(){return this.iPt}}}{let Zx=function(t){const s=self.rPt[t];if(!s)throw new Error("invalid expression number");return s};GetExpressionFunc=Zx;const Kx=self.Cs,Qx=self.assert;Kx.hPt=class extends Kx.Vn{constructor(t,s,i){super(),this.DM=t,this.Vw=i,this.Hc=s,this.qs=null,this.oPt=!1,this.yEt=!1}static e_(t,s,i){const e=s[0],n=[tM,sM,aM,eM,rM,iM,hM,tM,eM,eM,lM,uM,aM,fM,sM,oM,nM,cM,dM,pM,mM,gM];return Kx.jn(n[e],t,e,i,s)}AMt(){}OEt(){this.oPt=!0}$Et(t){this.oPt||t&&(t.QJ().CJ()||(this.oPt=!0))}aPt(){return this.oPt}Rz(){return this.Vw}yH(){return this.DM.yH()}yj(){return this.DM.yj()}FGt(){return this.yEt}lPt(){return 4===this.Hc}};class tM extends Kx.hPt{constructor(t,s,i,e){super(t,s,i),this.uPt=0;const n=e[1];this.cPt=n[0],this.fPt=[],this.dPt=null;for(let t=1,s=n.length;t<s;++t)this.fPt.push(Kx.PEt.REt(this,n[t]));this.fPt.length?this.qs=this.pPt:(this.qs=Zx(this.cPt),this.yEt=!0)}mPt(t){if(t<0||t>=this.fPt.length)throw new RangeError("invalid numbered node");return this.fPt[t]}AMt(){for(const t of this.fPt)t.AMt();const t=Zx(this.cPt);this.fPt.length?this.dPt=t(this):this.dPt=t}UEt(){return this.uPt}pPt(t){return this.uPt=t,this.dPt()}}class sM extends tM{constructor(t,s,i,e){super(t,s,i,e),this.qs=this.gPt,14===s&&(this.yj().vCt(),this.DM instanceof Kx.pCt&&this.yj().FCt())}gPt(t){this.uPt=t;const s=this.dPt();return"string"==typeof s?s:""}yPt(){return Zx(this.cPt)()}}class iM extends tM{constructor(t,s,i,e){super(t,s,i,e),t.wPt()>=2?this.qs=this.XY:this.qs=this.jq,this.yEt=!1}jq(t){this.uPt=t;const s=this.dPt();return this.yH().Uq().jq(s)}XY(t){const s=this.jq(t);return s?s.XY():null}}class eM extends Kx.hPt{constructor(t,s,i,e){super(t,s,i),this.SPt=e[1],this.qs=this.vPt,this.yEt=!0}vPt(){return this.SPt}}class nM extends Kx.hPt{constructor(t,s,i,e){super(t,s,i),this.bPt=e[1],this.qs=this.xPt,this.yEt=!0}xPt(){return this.bPt}}class rM extends Kx.hPt{constructor(t,s,i,e){super(t,s,i),this._bt=this.yH().g7(e[1]),t.wPt()>=2?this.qs=this.HJ:this.qs=this.wZ;const n=this.yj();n.dCt(this._bt),this.DM instanceof Kx.pCt?n.FCt():n.fQ()&&n.fQ().FCt(),this.yEt=!0}wZ(){return this._bt}HJ(){return this._bt?this._bt.HJ():null}}class hM extends Kx.hPt{constructor(t,s,i,e){super(t,s,i),this.l8=this.yH().Mq().Let(e[1]),t.wPt()>=2?this.qs=this.bq:this.qs=this.Tq,this.yEt=!0}Tq(){return this.l8}bq(){return this.l8?this.l8.bq():null}}class oM extends Kx.hPt{constructor(t,s,i,e){super(t,s,i),this.Wrt=this.yH().qot().Ynt(e[1]),t.wPt()>=2?this.qs=this.Clt:this.qs=this.Jlt,this.yEt=!0}Jlt(){return this.Wrt}Clt(){return this.Wrt?this.Wrt.Clt():null}}class aM extends Kx.hPt{constructor(t,s,i,e){super(t,s,i),this.MPt=e[1],this.qs=this.TPt,this.yEt=!0}TPt(){return this.MPt}}class lM extends Kx.hPt{constructor(t,s,i,e){super(t,s,i),this.GPt=e[1];const n=this.DM.wZ();this.DM instanceof Kx.fCt&&this.DM.rG()?(this.qs=this._Pt,this.yEt=!0):n&&n.B7()?(this.qs=this.CPt,this.OEt()):(this.qs=this._Pt,this.yEt=!0)}_Pt(){return this.GPt}CPt(t){t=t||0;const s=this.DM.wZ(),i=s.cY(),e=i.uY();let n=null;if(e.length)n=e[t%e.length].wZ();else if(i.$bt()){const s=i.Wbt();n=s[t%s.length].wZ()}else{if(!(s.pY()>0))return 0;{const i=s.uY();n=i[t%i.length].wZ()}}return this.GPt+n.JEt(s.YEt())}}class uM extends Kx.hPt{constructor(t,s,i,e){super(t,s,i),this.ePt=e[1],this.iPt=null,t.wPt()>=2?this.qs=this.IPt:this.qs=this.EPt,this.yEt=!0}AMt(){this.iPt=this.yH().dj().nTt(this.ePt)}EPt(){return this.iPt}IPt(){return null}}class cM extends Kx.hPt{constructor(t,s,i,e){super(t,s,i),this.PPt=e[1],this.NEt=null,t.wPt()>=2?this.qs=this.RPt:this.qs=this.APt,this.yEt=!0}AMt(){this.NEt=this.yH().dj().pj(this.PPt),this.PPt=null}APt(){return this.NEt}RPt(){return null}}class fM extends Kx.hPt{constructor(t,s,i,e){super(t,s,i),this.FPt=[],this.OPt=[],this.yEt=!0;for(let t=1,s=e.length;t<s;++t){const s=Kx.hPt.e_(this.DM,e[t],0);this.FPt.push(s),this.OPt.push(0),s.FGt()||(this.yEt=!1)}this.qs=this.DPt}AMt(){for(const t of this.FPt)t.AMt()}DPt(){const t=this.FPt,s=this.OPt;for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(0);return s}}class dM extends Kx.hPt{constructor(t,s,i,e){super(t,s,i),this.LPt=e[1],this.qs=this.yft,this.yEt=!0}yft(){return this.LPt}}class pM extends Kx.hPt{constructor(t,s,i,e){super(t,s,i),this.NPt=e[1],this.qs=this.kPt,this.yEt=!0}kPt(){return this.NPt}}class mM extends tM{constructor(t,s,i,e){super(t,s,i,e),this.qs=this.DZ,this.yEt=!1}DZ(){return this.dPt()}}class gM extends Kx.hPt{constructor(t,s,i,e){super(t,s,i),this.Uwt=this.yH().hSt().Lwt(e[1]),this.qs=this.BPt,this.yEt=!0}BPt(){return this.Uwt.Pc()}}}{let yM=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(0)};EvalParams=yM;const wM=self.Cs,SM=self.assert,vM=[],bM=function(){};wM.fCt=class extends wM.Vn{constructor(t,s,i){if(super(),this.tEt=t,this.Bc=t.yH(),this.Vw=i,this.LIt=this.Bc.DIt(s[1]),this.$Pt=s[3]>0,this.WPt=2===s[3],this.UPt=!!s[4],this.VPt=!!s[5],this.RT=!!s[6],this.d8=s[7],this.zPt=this.tEt.sxt(),this._bt=null,this.ZEt=null,this.KEt=-1,this.AEt=null,this.IE=bM,this.CTt=bM,this.Ws=[],this.jPt=[],this.qPt=!1,this.HPt=null,this.JPt=null,this.nCt=this.Bc.aK()?{rCt:s[8][0],YPt:s[8][1]}:null,-1===s[0]?this.AEt=this.Bc.Z5():(this._bt=this.Bc.g7(s[0]),s[2]&&(this.ZEt=this._bt.Uft(s[2]),this.KEt=this._bt.lut(s[2])),this.tEt.fQ()&&this.tEt.fQ().FCt()),10===s.length){let t=s[9];for(let s of t)this.Ws.push(wM.hPt.e_(this,s,this.Ws.length)),this.jPt.push(0)}0===this.Ws.length&&(this.Ws=vM,this.jPt=vM),this.tEt.dj().NMt(this)}static e_(t,s,i){return wM.jn(wM.fCt,t,s,i)}AMt(){for(const t of this.Ws)t.AMt(),t.aPt()&&(this.qPt=!0);this.WPt?(this.IE=this.XPt,this.CTt=this.ZPt):this.AEt?(this.KPt(),this.CTt=this.QPt):this._bt.QJ().CJ()?(this.tRt(),this.CTt=this.sRt):this.RT?(this.IE=this.iRt,this.CTt=this.eRt):(this.IE=this.nRt,this.CTt=this.rRt)}KPt(){const t=this.AEt,s=this.AEt;this.hRt(t,s,this.oRt)}tRt(){const t=this._bt.QJ(),s=this._bt.XJ().a0();this.hRt(t,s,this.aRt)}hRt(t,s,i){const e=this.LIt,n=this.VPt,r=this.Ws;if(0===r.length){const i=t.LEt(e,s);this.IE=n?function(){return wM.xor(i(),n)}:i}else if(1===r.length){const i=r[0];if(!n&&i.FGt())this.IE=t.lRt(e,s,i.qs(0));else{const r=t.LEt(e,s);this.IE=function(){return wM.xor(r(i.qs(0)),n)}}}else if(2===r.length){const i=r[0],h=r[1];if(!n&&i.FGt()&&h.FGt())this.IE=t.uRt(e,s,i.qs(0),h.qs(0));else{const r=t.LEt(e,s);this.IE=function(){return wM.xor(r(i.qs(0),h.qs(0)),n)}}}else if(3===r.length){const i=r[0],h=r[1],o=r[2];if(!n&&i.FGt()&&h.FGt()&&o.FGt())this.IE=t.cRt(e,s,i.qs(0),h.qs(0),o.qs(0));else{const r=t.LEt(e,s);this.IE=function(){return wM.xor(r(i.qs(0),h.qs(0),o.qs(0)),n)}}}else this.IE=i}H7(){return this.d8}d_t(){return this.LIt}wZ(){return this._bt}w0(){return this.ZEt}fRt(){return this.ZEt?this.ZEt.m0():this._bt?this._bt.QJ():null}wPt(){const t=this.fRt();return t?t.dRt():1}yj(){return this.tEt}yH(){return this.Bc}Rz(){return this.Vw}ZCt(){return this.Rz()}h_t(){return this.$Pt}p_t(){return this.WPt}pRt(){return this.VPt}A0(){return this.UPt}rG(){return this.RT}mRt(){return this.nCt.rCt}gRt(){return!!this.AEt}qCt(){return this.gRt()||this._bt.QJ().CJ()}HCt(){for(const t of this.Ws)if(t.lPt())return t.wZ();return null}yRt(t){this.nCt.rCt=!!t,this.tEt.PCt()}wRt(){return this.nCt.YPt}E_t(){return!this.mRt()&&!this.Bc.hIt()&&!this.wRt()}SRt(){return this.HPt||(this.HPt=new Map),this.HPt}vRt(){return this.JPt||(this.JPt=new Map),this.JPt}oRt(){const t=this.jPt;return yM(this.Ws,t),wM.xor(this.LIt.apply(this.AEt,t),this.VPt)}*QPt(){if((this.mRt()||this.Bc.hIt())&&(yield this),this.wRt()){const t=this.jPt;yM(this.Ws,t);let s=this.LIt.apply(this.AEt,t);return wM.xo(s)&&(s=yield*s),wM.xor(s,this.VPt)}return this.IE()}aRt(){const t=this.jPt;yM(this.Ws,t);const s=this._bt.XJ().a0();return wM.xor(this.LIt.apply(s,t),this.VPt)}*sRt(){if((this.mRt()||this.Bc.hIt())&&(yield this),this.wRt()){const t=this.jPt;yM(this.Ws,t);const s=this._bt.XJ().a0();let i=this.LIt.apply(s,t);return wM.xo(i)&&(i=yield*i),wM.xor(i,this.VPt)}return this.IE()}XPt(){return!0}*ZPt(){return(this.mRt()||this.Bc.hIt())&&(yield this),!0}bRt(){return this.ZEt?this.ZEt.m0().dRt()>=2?this.ZEt.y0():this.ZEt:this._bt.QJ().dRt()>=2?this._bt.HJ():this._bt}iRt(){const t=this.jPt;yM(this.Ws,t);const s=this.LIt.apply(this.bRt(),t);return this._bt._It(),s}*eRt(){if((this.mRt()||this.Bc.hIt())&&(yield this),this.wRt()){const t=this.jPt;yM(this.Ws,t);let s=this.LIt.apply(this.bRt(),t);return wM.xo(s)&&(s=yield*s),this._bt._It(),s}return this.IE()}nRt(){const t=this.Ws,s=this.jPt,i=this._bt.cY();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.aPt()||(s[i]=e.qs(0))}return i.kbt()?this.xRt(i):this.MRt(i)}*rRt(){return(this.mRt()||this.Bc.hIt())&&(yield this),this.nRt()}TRt(t){const s=this.Ws,i=this.jPt;for(let e=0,n=s.length;e<n;++e){const n=s[e];n.aPt()&&(i[e]=n.qs(t))}}xRt(t){const s=this._bt,i=s.B7(),e=s.YEt(),n=this.KEt,r=n>=0,h=s.uY(),o=this.qPt,a=this.jPt,l=this.LIt,u=this.VPt,c=this.zPt&&!this.$Pt;t.Nbt();for(let s=0,f=h.length;s<f;++s){const f=h[s];let d;if(o&&this.TRt(s),r){const t=i?f.wZ().tPt(e):0;d=l.apply(f.Wft()[n+t].a0(),a)}else d=l.apply(f.a0(),a);wM.xor(d,u)?t.Vbt(f):c&&t.zbt(f)}return s.GRt(!0),t.jbt(!1),s._It(),t.Bbt()}MRt(t){const s=this._bt,i=s.B7(),e=s.YEt(),n=s.EZ(),r=this.KEt,h=r>=0,o=this.qPt,a=this.jPt,l=this.LIt,u=this.VPt,c=this.zPt&&!this.$Pt,f=t.qbt(),d=t.Hbt(),p=c&&!this.tEt.jCt(this),m=p?d:f;let g=0,y=!1;for(let t=0,s=m.length;t<s;++t){const s=m[t];let w;if(o&&this.TRt(t),h){const t=i?s.wZ().tPt(e):0;w=l.apply(s.Wft()[r+t].a0(),a)}else w=l.apply(s.a0(),a);wM.xor(w,u)?(y=!0,p?(f.push(s),n&&s._Rt()):(m[g]=s,n&&s.CRt(g),++g)):p?(m[g]=s,n&&s.IRt(g),++g):c&&(d.push(s),n&&s.ERt())}wM.Sh(m,g),n&&s.PRt(p,g);const w=y;return p&&!y&&(y=this.RRt(f)),s.GRt(w||c),c?y:t.Bbt()}RRt(t){const s=this._bt,i=s.B7(),e=s.YEt(),n=this.qPt,r=this.KEt,h=r>=0,o=this.jPt,a=this.LIt,l=this.VPt;for(let s=0,u=t.length;s<u;++s){const u=t[s];let c;if(n&&this.TRt(s),h){const t=i?u.wZ().tPt(e):0;c=a.apply(u.Wft()[r+t].a0(),o)}else c=a.apply(u.a0(),o);if(wM.xor(c,l))return!0}return!1}ARt(t,s){return this.Ws[t].qs(s)}m_t(){const t=this.Ws;if(!t.length)throw new Error("no parameters");return t[0].yPt()}cst(){if(!this.HPt||!this.HPt.size)return null;const t={};for(const[s,i]of this.HPt.entries()){let e=i;"collmemory"===s&&(e=[...i.entries()].map(t=>[t[0].RZ(),t[1].RZ(),t[2]])),t[s]=e}return{ex:t}}fst(t){if(this.HPt&&(this.HPt.clear(),this.HPt=null),!t)return;const s=this.Bc,i=t.ex;if(i){const t=this.SRt();t.clear();for(const[e,n]of Object.entries(i)){let i=n;"collmemory"===e&&(i=wM.jn(wM.Iu,n.map(t=>[s.Bq(t[0]),s.Bq(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),t.set(e,i)}}}}}{let xM=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(0)};EvalParams=xM;const MM=self.Cs,TM=self.assert,GM=[],_M=function(){},CM=function*(){},IM=1,EM=2,PM=4,RM=8,AM=16;MM.pCt=class extends MM.Vn{constructor(t,s,i){super(),this.tEt=t;const e=t.yH();this.Bc=e,this.Vw=i,this.d8=s.length>=4?s[3]:-1,this.FRt=s.length>=5?255&s[4]:0,this.KD=s.length>=5?s[4]>>8:0,this.LIt=null,this._bt=null,this.ZEt=null,this.KEt=-1,this.AEt=null,this.ORt="",this.DRt=null,this.LRt=null,this.IE=_M,this.CTt=_M,this.Ws=[],this.jPt=[],this.qPt=!1,this.HPt=null,this.JPt=null;const n=-3===s[0],r=n?s[2]:s[5];if(this.nCt=e.aK()||n?{rCt:r[0],YPt:r[1],index:r[2]}:null,-1===s[0])this.AEt=e.Z5(),this.LIt=e.DIt(s[1]);else if(-2===s[0])this.ORt=s[1];else if(n){const t=e.DIt(s[1]);this.LIt=t,this.IE=this.NRt,this.CTt=this.kRt,this.KD|=8}else this._bt=e.g7(s[0]),4&this.KD?(this.ORt=s[1],this.DRt=e.g7(s[2])):(s[2]&&(this.ZEt=this._bt.Uft(s[2]),this.KEt=this._bt.lut(s[2])),this.LIt=e.DIt(s[1]));if(7===s.length){const t=s[6];for(const s of t)this.Ws.push(MM.hPt.e_(this,s,this.Ws.length)),this.jPt.push(0)}0===this.Ws.length&&(this.Ws=GM,this.jPt=GM),this.BRt()&&(this.tEt.vCt(),this.tEt.FCt()),this.tEt.dj().kMt(this)}static e_(t,s,i){return MM.jn(MM.pCt,t,s,i)}AMt(){for(const t of this.Ws)t.AMt(),t.aPt()&&(this.qPt=!0);if(this.AEt)this.KPt(),this.CTt=this.QPt;else if(this.ORt)4&this.KD?this.$Rt():this.WRt(),this.ORt="",this.DRt=null;else if(this.IE===this.NRt){const t=this.LIt,s=this.Bc.dj().sTt(this.tEt);this.LIt=t.bind(null,this.Bc.TJ(),s)}else this.ZEt?this.uIt()?(this.IE=this.URt,this.CTt=this.VRt):(this.IE=this.zRt,this.CTt=this.jRt):this._bt.QJ().CJ()?(this.tRt(),this.CTt=this.sRt):this.rG()?(this.IE=this.qRt,this.CTt=this.HRt):this.uIt()?(this.IE=this.JRt,this.CTt=this.YRt):this.XRt()?(this.IE=this.ZRt,this.CTt=this.KRt):this.Ws.length?this.Ws.every(t=>t.aPt())?(this.IE=this.QRt,this.CTt=this.tAt):this.qPt?(this.IE=this.sAt,this.CTt=this.iAt):this.Ws.every(t=>t.FGt())?(xM(this.Ws,this.jPt),this.IE=this.eAt,this.CTt=this.nAt):(this.IE=this.rAt,this.CTt=this.hAt):(this.IE=this.eAt,this.CTt=this.nAt)}KPt(){const t=this.AEt,s=this.AEt;this.hRt(t,s,this.oRt)}tRt(){const t=this._bt.QJ(),s=this._bt.XJ().a0();this.hRt(t,s,this.aRt)}WRt(){const t=this.tEt.dj(),s=t.pj(this.ORt);if(s.Cu()){const i=!!(2&this.KD);this.LRt=s.yj();let e=[...new Set([...this.tEt.wj(),...this.LRt.wj()])];e=t.VMt(e);const n=!s.xj()&&this.oAt()?{EIt:!0}:null;if(this.IE=MM.n_t.prototype.MIt.bind(this.LRt,e,this.Ws,i,n),this.Bc.aK()){const t=this;this.CTt=function*(){return(t.mRt()||t.Bc.hIt())&&(yield t),yield*t.LRt.AIt(e,t.Ws,i,n)}}else this.CTt=CM}else this.IE=_M,this.CTt=CM}$Rt(){const t=this.tEt.dj(),s=t.aTt(this.DRt,this.ORt);if(s.Cu()){const i=!!(2&this.KD);this.LRt=s.yj();let e=[...new Set([...this.tEt.wj(),...this.LRt.wj(),this._bt,s.wZ()])];e=t.VMt(e);const n=!this._bt.B7()&&!s.wZ().B7(),r=!this._bt.B7()&&s.wZ().B7(),h=this._bt.B7();let o=null;if(!s.xj()&&this.oAt()&&(o=o||{},o.EIt=!0),!r&&i||(o=o||{},o.TIt=this._bt,o.GIt=s.wZ()),n||r||h&&!s.lEt()?this.IE=MM.n_t.prototype.MIt.bind(this.LRt,e,this.Ws,i,o):h&&(this.IE=MM.BGt.prototype.dEt.bind(s,e,this.Ws)),this.Bc.aK()){const t=this;n||r||h&&!s.lEt()?this.CTt=function*(){return(t.mRt()||t.Bc.hIt())&&(yield t),yield*t.LRt.AIt(e,t.Ws,i,o)}:h&&(this.CTt=function*(){return(t.mRt()||t.Bc.hIt())&&(yield t),yield*s.mEt(e,t.Ws)})}else this.CTt=CM}else this.IE=_M,this.CTt=CM}hRt(t,s,i){const e=this.LIt,n=this.Ws;if(0===n.length)this.IE=t.LEt(e,s);else if(1===n.length){const i=n[0];if(i.FGt())this.IE=t.lRt(e,s,i.qs(0));else{const n=t.LEt(e,s);this.IE=function(){return n(i.qs(0))}}}else if(2===n.length){const i=n[0],r=n[1];if(i.FGt()&&r.FGt())this.IE=t.uRt(e,s,i.qs(0),r.qs(0));else{const n=t.LEt(e,s);this.IE=function(){return n(i.qs(0),r.qs(0))}}}else if(3===n.length){const i=n[0],r=n[1],h=n[2];if(i.FGt()&&r.FGt()&&h.FGt())this.IE=t.cRt(e,s,i.qs(0),r.qs(0),h.qs(0));else{const n=t.LEt(e,s);this.IE=function(){return n(i.qs(0),r.qs(0),h.qs(0))}}}else this.IE=i}H7(){return this.d8}uIt(){return!!(8&this.KD)}lIt(){return!!(16&this.KD)}XRt(){return 1===this.FRt}rG(){return 2===this.FRt}BRt(){return!!(1&this.KD)}MCt(){return this.uIt()||this.lIt()}wZ(){return this._bt}fRt(){return this.ZEt?this.ZEt.m0():this._bt?this._bt.QJ():null}wPt(){const t=this.fRt();return t?t.dRt():1}yj(){return this.tEt}oAt(){let t=this.tEt;do{if(t instanceof MM.BGt&&t.xj())return!0;t=t.QMt()}while(t);return!1}yH(){return this.Bc}Rz(){return this.Vw}ZCt(){return this.nCt.index}mRt(){return this.nCt.rCt}yRt(t){this.nCt.rCt=!!t,this.tEt.PCt()}wRt(){return this.nCt.YPt}E_t(){return!this.mRt()&&!this.Bc.hIt()&&!this.wRt()}SRt(){return this.HPt||(this.HPt=new Map),this.HPt}vRt(){return this.JPt||(this.JPt=new Map),this.JPt}oRt(){const t=this.jPt;return xM(this.Ws,t),this.LIt.apply(this.AEt,t)}*QPt(){if((this.mRt()||this.Bc.hIt())&&(yield this),this.wRt()){const t=this.jPt;return xM(this.Ws,t),yield*this.LIt.apply(this.AEt,t)}return this.IE()}aRt(){const t=this.jPt;return xM(this.Ws,t),this.LIt.apply(this._bt.XJ().a0(),t)}*sRt(){if((this.mRt()||this.Bc.hIt())&&(yield this),this.wRt()){const t=this.jPt;return xM(this.Ws,t),yield*this.LIt.apply(this._bt.XJ().a0(),t)}return this.IE()}eAt(){const t=this.jPt,s=this._bt.cY().uY();for(let i=0,e=s.length;i<e;++i)this.LIt.apply(s[i].a0(),t)}*nAt(){if((this.mRt()||this.Bc.hIt())&&(yield this),this.wRt()){const t=this.jPt,s=this._bt.cY().uY();for(let i=0,e=s.length;i<e;++i)yield*this.LIt.apply(s[i].a0(),t)}else this.eAt()}rAt(){const t=this.jPt;xM(this.Ws,t);const s=this._bt.cY().uY();for(let i=0,e=s.length;i<e;++i)this.LIt.apply(s[i].a0(),t)}*hAt(){if((this.mRt()||this.Bc.hIt())&&(yield this),this.wRt()){const t=this.jPt;xM(this.Ws,t);const s=this._bt.cY().uY();for(let i=0,e=s.length;i<e;++i)yield*this.LIt.apply(s[i].a0(),t)}else this.rAt()}QRt(){const t=this.Ws,s=this.jPt,i=this.LIt,e=this._bt.cY().uY();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(n);i.apply(r.a0(),s)}}*tAt(){if((this.mRt()||this.Bc.hIt())&&(yield this),this.wRt()){const t=this.Ws,s=this.jPt,i=this.LIt,e=this._bt.cY().uY();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(n);yield*i.apply(r.a0(),s)}}else this.QRt()}sAt(){const t=this.Ws,s=this.jPt,i=this.LIt,e=this._bt.cY().uY();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.aPt()||(s[i]=e.qs(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.aPt()&&(s[i]=e.qs(n))}i.apply(r.a0(),s)}}*iAt(){if((this.mRt()||this.Bc.hIt())&&(yield this),this.wRt()){const t=this.Ws,s=this.jPt,i=this.LIt,e=this._bt.cY().uY();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.aPt()||(s[i]=e.qs(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.aPt()&&(s[i]=e.qs(n))}yield*i.apply(r.a0(),s)}}else this.sAt()}ZRt(){const t=this.Ws,s=this.jPt,i=this.LIt,e=this._bt,n=e.aAt(),r=e.cY().uY();n.lAt(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].qs(e);i.apply(n.a0(),s)}n.uAt(i)}*KRt(){if((this.mRt()||this.Bc.hIt())&&(yield this),this.wRt()){const t=this.Ws,s=this.jPt,i=this.LIt,e=this._bt,n=e.aAt(),r=e.cY().uY();n.lAt(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].qs(e);yield*i.apply(n.a0(),s)}n.uAt(i)}else this.ZRt()}cAt(){return this.ZEt?this.ZEt.m0().dRt()>=2?this.ZEt.y0():this.ZEt:this._bt.QJ().dRt()>=2?this._bt.HJ():this._bt}qRt(){const t=this.jPt;return xM(this.Ws,t),this.LIt.apply(this.cAt(),t)}*HRt(){if((this.mRt()||this.Bc.hIt())&&(yield this),this.wRt()){const t=this.jPt;xM(this.Ws,t);let s=this.LIt.apply(this.cAt(),t);return MM.xo(s)&&(s=yield*s),s}return this.qRt()}zRt(){const t=this._bt,s=t.B7(),i=t.YEt(),e=this.Ws,n=this.qPt,r=this.jPt,h=this.LIt,o=this.KEt,a=t.cY().uY();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.aPt()||(r[t]=s.qs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.aPt()&&(r[s]=i.qs(t))}const u=s?l.wZ().tPt(i):0;h.apply(l.Wft()[o+u].a0(),r)}}*jRt(){if((this.mRt()||this.Bc.hIt())&&(yield this),this.wRt()){const t=this._bt,s=t.B7(),i=t.YEt(),e=this.Ws,n=this.qPt,r=this.jPt,h=this.LIt,o=this.KEt,a=t.cY().uY();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.aPt()||(r[t]=s.qs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.aPt()&&(r[s]=i.qs(t))}const u=s?l.wZ().tPt(i):0;yield*h.apply(l.Wft()[o+u].a0(),r)}}else this.zRt()}JRt(){const t=this.Ws,s=this.jPt,i=this.LIt,e=this._bt.cY().uY(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(r);n.push(i.apply(h.a0(),s))}return Promise.all(n)}*YRt(){if((this.mRt()||this.Bc.hIt())&&(yield this),this.wRt()){const t=this.Ws,s=this.jPt,i=this.LIt,e=this._bt.cY().uY(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(r);n.push(yield*i.apply(h.a0(),s))}return Promise.all(n)}return this.JRt()}URt(){const t=this._bt,s=t.B7(),i=t.YEt(),e=this.Ws,n=this.jPt,r=this.LIt,h=this.KEt,o=t.cY().uY(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].qs(t);const u=s?l.wZ().tPt(i):0;a.push(r.apply(l.Wft()[h+u].a0(),n))}return Promise.all(a)}*VRt(){if((this.mRt()||this.Bc.hIt())&&(yield this),this.wRt()){const t=this._bt,s=t.B7(),i=t.YEt(),e=this.Ws,n=this.jPt,r=this.LIt,h=this.KEt,o=t.cY().uY(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].qs(t);const u=s?l.wZ().tPt(i):0;a.push(yield*r.apply(l.Wft()[h+u].a0(),n))}return Promise.all(a)}return this.URt()}async NRt(){try{await this.LIt()}catch(t){console.error(`Unhandled exception running script %c${this.tEt.rit().Pc()}, event ${this.tEt.LCt()}, action ${this.ZCt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.lK&&self.lK.kIt(this),MM.f_t.BIt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),MM.f_t.$It())}}*kRt(){return(this.mRt()||this.Bc.hIt())&&(yield this),this.NRt()}cst(){return this.HPt&&this.HPt.size?{ex:MM.So(this.HPt)}:null}fst(t){if(this.HPt&&(this.HPt.clear(),this.HPt=null),!t)return;const s=t.ex;s&&(this.HPt=MM.vo(s))}}}{let FM=function(t){return t instanceof tT?QM.iX(t):t.B1()},OM=function(t){return FM(t).zq()},DM=function(t){return QM.iX(t)},LM=function(t){return DM(t).zq()},NM=function(t){return t instanceof sT?QM.iX(t):t},kM=function(t){return t instanceof iT?QM.iX(t):t},BM=function(t,s,i,e){s.RZ()<i.RZ()?t.Set(s,i,e):t.Set(i,s,e)},$M=function(t,s,i){s.RZ()<i.RZ()?t.Au(s,i):t.Au(i,s)},WM=function(t,s){t.Fu(s)},UM=function(t,s,i){return s.RZ()<i.RZ()?t.qs(s,i):t.qs(i,s)},VM=function(t,s,i,e){if(!s)return!1;const n=0!==i||0!==e,r=t.zq(),h=QM.kz(),o=QM.HMt(),a=o.yj().sxt(),l=o.wZ(),u=o.pRt(),c=s.cY(),f=l!==s;let d;oT=s,hT=f&&!u,aT=!1;let p=0,m=0,g=!1;c.kbt()?(eT.S(r.qK()),eT.offset(i,e),h.fAt(r.jq(),s,eT,rT),d=rT):a?QM.dAt()&&!c.Hbt().length&&c.qbt().length?d=c.qbt():(d=c.Hbt(),aT=!0):d=c.qbt(),n&&(p=r.pM(),m=r.yM(),r.AK(i,e),r.EK());for(const s of d)if(h.BH(t,s)){if(g=!0,u)break;f&&lT.add(s)}return n&&(r.PK(p,m),r.EK()),JM.bh(rT),g},zM=function(t){const s=QM.Sj().sxt(),i=oT.cY(),e=i.qbt(),n=i.Hbt();i.kbt()?(i.Xbt(lT),s&&(JM.bh(n),i.Zbt(lT,oT.uY()))):s?aT?i.Kbt(lT):(i.Zbt(lT,e),i.Xbt(lT)):i.Xbt(lT),oT._It()},jM=function(t,s){hT&&(s&&zM(t),lT.clear(),oT=null,hT=!1)},qM=function(t,s){const i=QM.Bq(s);if(!i)return!1;const e=t.cY();if(!e.kbt()&&!e.qbt().includes(i))return!1;if(t.B7()){if(i.wZ().pAt(t))return e.txt(i),t._It(),!0}else if(i.wZ()===t)return e.txt(i),t._It(),!0;return!1},HM=function(t,s){const i=t.cY();if(i.kbt()){i.jbt(!1),i.Nbt();const e=t.uY();for(let t=0,n=e.length;t<n;++t){const n=e[t];n.RZ()===s?i.zbt(n):i.Vbt(n)}return t._It(),!!i.qbt().length}{const e=i.qbt();let n=0;for(let t=0,r=e.length;t<r;++t){const r=e[t];e[n]=r,r.RZ()===s?i.zbt(r):++n}return JM.Sh(e,n),t._It(),!!e.length}};GetInst=FM,GetWorldInfo=OM,GetInst_SDKv2=DM,GetWorldInfo_SDKv2=LM,GetObjectClass=NM,GetLayer=kM,CollMemory_Add=BM,CollMemory_Remove=$M,CollMemory_RemoveInstance=WM,CollMemory_Get=UM,DoOverlapCondition=VM,FinishCollisionConditionPicking=zM,FinishCollisionCondition=jM,PickByUID_Normal=qM,PickByUID_Inverted=HM;const JM=self.Cs,YM=new JM.To,XM={},ZM={},KM={};let QM=null;JM.mAt=function(t){QM=t};const tT=self.yZ,sT=self.ZJ,iT=self.sX;ZM.gAt=function(t,s){return JM.compare(this.zq().pM(),t,s)},KM.gAt=function(t,s){return JM.compare(this.x,t,s)},ZM.yAt=function(t,s){return JM.compare(this.zq().yM(),t,s)},KM.yAt=function(t,s){return JM.compare(this.y,t,s)},ZM.wAt=function(){return this.zq().XK()},KM.wAt=function(){return this.YK()},XM.SAt=function(){const t=OM(this),s=t.Tq(),i=t.qK();return i.sl()<0||i.il()<0||i.Qa()>s.My()||i.tl()>s.Gy()},XM.vAt=function(t,s,i){const e=NM(this).cY(),n=e.uY();if(!n.length)return!1;let r=n[0],h=r.zq(),o=r,a=JM.nr(h.pM(),h.yM(),s,i);for(let e=1,l=n.length;e<l;++e){r=n[e],h=r.zq();const l=JM.nr(h.pM(),h.yM(),s,i);(0===t&&l<a||1===t&&l>a)&&(a=l,o=r)}return e.txt(o),!0},ZM.mM=function(t){const s=this.zq();s.pM()!==t&&(s.mM(t),s.EK())},KM.mM=function(t){this.x=+t},ZM.wM=function(t){const s=this.zq();s.yM()!==t&&(s.wM(t),s.EK())},KM.wM=function(t){this.y=+t},ZM.bAt=function(t,s){const i=this.zq();i.xAt(t,s)||(i.PK(t,s),i.EK())},KM.bAt=function(t,s){this.setPosition(t,s)},XM.MAt=function(t,s){if(!(t=NM(t)))return;const i=FM(this),e=t.aY(i);if(!e)return;const[n,r]=e.TAt(s),h=i.zq();h.pM()===n&&h.yM()===r||(h.PK(n,r),h.EK())},XM.GAt=function(t){if(0===t)return;const s=OM(this);s.AK(s._At()*t,s.CAt()*t),s.EK()},ZM.IAt=function(t,s){if(0===s)return;const i=this.zq();t=JM.Qn(t),i.AK(Math.cos(t)*s,Math.sin(t)*s),i.EK()},KM.IAt=function(t,s){0!==s&&(t=JM.Qn(t),this.offsetPosition(Math.cos(t)*s,Math.sin(t)*s))},ZM.pM=function(){return this.zq().pM()},KM.pM=function(){return this.x},ZM.yM=function(){return this.zq().yM()},KM.yM=function(){return this.y},XM.Lj=function(){return QM.Lj(FM(this))},ZM.EAt=function(t,s){return JM.compare(this.zq().My(),t,s)},KM.EAt=function(t,s){return JM.compare(this.width,t,s)},ZM.PAt=function(t,s){return JM.compare(this.zq().Gy(),t,s)},KM.PAt=function(t,s){return JM.compare(this.height,t,s)},ZM.hy=function(t){const s=this.zq();s.My()!==t&&(s.hy(t),s.EK())},KM.hy=function(t){this.width=t},ZM.oy=function(t){const s=this.zq();s.Gy()!==t&&(s.oy(t),s.EK())},KM.oy=function(t){this.height=t},ZM.rR=function(t,s){const i=OM(this);i.My()===t&&i.Gy()===s||(i.rR(t,s),i.EK())},KM.rR=function(t,s){this.NY(t,s)},ZM.My=function(){return this.zq().My()},KM.My=function(){return this.width},ZM.Gy=function(){return this.zq().Gy()},KM.Gy=function(){return this.height},XM.RAt=function(){return OM(this).qK().Qa()},XM.AAt=function(){return OM(this).qK().tl()},XM.FAt=function(){return OM(this).qK().sl()},XM.OAt=function(){return OM(this).qK().il()},XM.DAt=function(){const t=OM(this).qK();return(t.Qa()+t.sl())/2},XM.LAt=function(){const t=OM(this).qK();return(t.tl()+t.il())/2},XM.NAt=function(t,s){return JM.hr(OM(this).WY(),JM.Qn(s))<=JM.Qn(t)},XM.kAt=function(t){return JM.lr(OM(this).WY(),JM.Qn(t))},XM.BAt=function(t,s){const i=JM.Qn(t),e=JM.Qn(s),n=OM(this).WY();return JM.lr(e,i)?JM.lr(n,i)&&!JM.lr(n,e):!(!JM.lr(n,i)&&JM.lr(n,e))},ZM.$Y=function(t){const s=this.zq(),i=JM.Kn(JM.Qn(t));isNaN(i)||s.WY()===i||(s.$Y(i),s.EK())},KM.$Y=function(t){this.zK=t},XM.$At=function(t){if(isNaN(t)||0===t)return;const s=OM(this);s.$Y(s.WY()+JM.Qn(t)),s.EK()},XM.WAt=function(t){if(isNaN(t)||0===t)return;const s=OM(this);s.$Y(s.WY()-JM.Qn(t)),s.EK()},XM.UAt=function(t,s){const i=OM(this),e=i.WY(),n=JM.ar(e,JM.Qn(s),JM.Qn(t));isNaN(n)||e===n||(i.$Y(n),i.EK())},XM.VAt=function(t,s,i){const e=OM(this),n=e.WY(),r=s-e.pM(),h=i-e.yM(),o=Math.atan2(h,r),a=JM.ar(n,o,JM.Qn(t));isNaN(a)||n===a||(e.$Y(a),e.EK())},XM.zAt=function(t,s){const i=OM(this),e=i.WY(),n=t-i.pM(),r=s-i.yM(),h=Math.atan2(r,n);isNaN(h)||e===h||(i.$Y(h),i.EK())},ZM.WY=function(){return JM.tr(this.zq().WY())},KM.WY=function(){return this.zK},XM.jAt=function(t,s){return JM.compare(JM.Gr(100*OM(this).BF(),6),t,s)},ZM.CX=function(){return this.zq().CX()},KM.CX=function(){return this.isVisible},XM.GX=function(t){const s=OM(this);t=2===t?!s.CX():0!==t,s.CX()!==t&&(s.GX(t),QM.Zq())},XM.WF=function(t){const s=JM.Zn(t/100,0,1),i=OM(this);if(i.$Q()){if(i.Kft().qAt()===s)return}else if(i.BF()===s)return;i.WF(s),QM.Zq()},XM.HAt=function(t){YM.ta(t);const s=OM(this);s.KK().qo(YM)||(s.QK(YM),QM.Zq())},XM.VF=function(){const t=OM(this).KK();return JM.Ir(t.ko(),t.Bo(),t.$o(),t.Wo())},XM.BF=function(){return JM.Gr(100*OM(this).BF(),6)},XM.JAt=function(t){return!!(t=kM(t))&&OM(this).jq()===t},XM.YAt=function(t){const s=NM(this).cY(),i=s.uY();if(!i.length)return!1;let e=i[0];for(let s=1,n=i.length;s<n;++s){const n=i[s],r=n.zq(),h=e.zq(),o=r.jq().Rz(),a=h.jq().Rz();0===t?(o>a||o===a&&r.qq()>h.qq())&&(e=n):(o<a||o===a&&r.qq()<h.qq())&&(e=n)}return s.txt(e),!0},ZM.XAt=function(t,s,i){const e=this.zq(),n=0===t?e.SM():e.VK();return JM.compare(n,s,i)},KM.XAt=function(t,s,i){const e=0===t?this.Yk:this.UK;return JM.compare(e,s,i)},ZM.ZAt=function(){this.zq().sQ()},KM.ZAt=function(){this.tQ()},ZM.KAt=function(){this.zq().eQ()},KM.KAt=function(){this.iQ()},XM.QAt=function(t){(t=kM(t))&&OM(this).rQ(t)},XM.tFt=function(t,s){const i=0===t;if(!(s=NM(s)))return;const e=FM(this),n=s.sFt(e);n&&e.zq().oQ(n,i)},ZM.vM=function(t){const s=this.zq();s.SM()!==t&&(s.vM(t),QM.Zq())},KM.vM=function(t){this.Yk=t},XM.iFt=function(){return OM(this).jq().Rz()},XM.eFt=function(){return OM(this).jq().Pc()},ZM.nFt=function(){return this.zq().qq()},KM.nFt=function(){return this.zIndex},ZM.rFt=function(){return this.zq().SM()},KM.rFt=function(){return this.Yk},ZM.hFt=function(){return this.zq().VK()},KM.hFt=function(){return this.UK},XM.oFt=function(t){const s=FM(this),i=s.wZ().OY().zft(t);if(!i)return;const e=i.Rz();return s.zq().CK().T0(e)},XM.aFt=function(t,s){const i=FM(this),e=i.wZ().OY().zft(s);if(!e)return;const n=e.Rz(),r=1===t,h=i.zq().CK();h.T0(n)!==r&&(h.G0(n,r),h._0(),QM.Zq())},XM.lFt=function(t,s,i){const e=FM(this),n=e.wZ().OY().zft(t);if(!n)return;s=Math.floor(s);const r=n.rC().oC(s);if(!r)return;"color"===r?(YM.ta(i),i=YM):"percent"===r&&(i/=100);const h=n.Rz(),o=e.zq().CK();o.I0(h,s,i)&&o.T0(h)&&QM.Zq()};const eT=JM.jn(JM.Rect),nT=[],rT=[];let hT=!1,oT=null,aT=!1;const lT=new Set;function*uT(t){if(!t)return!1;const s=this.yH(),i=s.kz(),e=s.dj(),n=e._j(),r=e.HMt(),h=r.wZ(),o=r.SRt(),a=r.vRt(),l=n.T3(),u=s.Uj(),c=u-1,f=l.Sj(),d=n.G3(f);let p=o.get("collmemory");p||(p=JM.jn(JM.Iu),o.set("collmemory",p)),a.get("collisionCreatedDestroyCallback")||(a.set("collisionCreatedDestroyCallback",!0),s.Sf().addEventListener("instancedestroy",t=>WM(p,t.S0)));const m=h.cY(),g=t.cY(),y=m.uY();let w=null;for(let s=0;s<y.length;++s){const n=y[s];g.kbt()?(i.fAt(n.zq().jq(),t,n.zq().qK(),nT),w=nT,i.uFt(n,t,w)):w=g.uY();for(let s=0;s<w.length;++s){const r=w[s];if(i.BH(n,r)||i.cFt(n,r)){const s=UM(p,n,r);let i=!1,o=-2;"number"==typeof s&&(i=!0,o=s);const a=!i||o<c;if(BM(p,n,r,u),a){const s=f.M3();e.P3(s);const i=h.cY(),o=t.cY();if(i.jbt(!1),o.jbt(!1),h===t){const t=i.qbt();JM.bh(t),t.push(n),t.push(r),h._It()}else{const s=i.qbt(),e=o.qbt();JM.bh(s),JM.bh(e),s.push(n),e.push(r),h._It(),t._It()}yield*f.yIt(l,d),e.A3(s)}}else $M(p,n,r)}JM.bh(nT)}return n.L3(),!1}XM.fFt=function(t){const s=NM(this);t=NM(t);const i=s.yH();if(i.dFt())return uT.call(s,t);if(!t)return!1;const e=i.kz(),n=i.dj(),r=n._j(),h=n.HMt(),o=h.wZ(),a=h.SRt(),l=h.vRt(),u=r.T3(),c=i.Uj(),f=c-1,d=u.Sj(),p=r.G3(d);let m=a.get("collmemory");m||(m=JM.jn(JM.Iu),a.set("collmemory",m)),l.get("collisionCreatedDestroyCallback")||(l.set("collisionCreatedDestroyCallback",!0),i.Sf().addEventListener("instancedestroy",t=>WM(m,t.S0)));const g=o.cY(),y=t.cY(),w=g.uY();let S=null;for(let s=0;s<w.length;++s){const i=w[s];y.kbt()?(e.fAt(i.zq().jq(),t,i.zq().qK(),nT),S=nT,e.uFt(i,t,S)):S=y.uY();for(let s=0;s<S.length;++s){const r=S[s];if(e.BH(i,r)||e.cFt(i,r)){const s=UM(m,i,r);let e=!1,h=-2;"number"==typeof s&&(e=!0,h=s);const a=!e||h<f;if(BM(m,i,r,c),a){const s=d.M3();n.P3(s);const e=o.cY(),h=t.cY();if(e.jbt(!1),h.jbt(!1),o===t){const t=e.qbt();JM.bh(t),t.push(i),t.push(r),o._It()}else{const s=e.qbt(),n=h.qbt();JM.bh(s),JM.bh(n),s.push(i),n.push(r),o._It(),t._It()}d.R3(u,p),n.A3(s)}}else $M(m,i,r)}JM.bh(nT)}return r.L3(),!1},XM.pFt=function(t){return t=NM(t),VM(FM(this),t,0,0)},XM.mFt=function(t,s,i){return t=NM(t),VM(FM(this),t,s,i)},XM.gFt=function(){return!0},XM.GQ=function(){return OM(this).GQ()},XM.mst=function(){return OM(this).mst()},XM.yFt=function(t,s){const i=NM(this);t=NM(t);const e=i.yH(),n=this.cY().uY();if(0===n.length)return!1;const r=t.cY();let h=r.uY();if(r.kbt()){const s=[...e.wFt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r.kbt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];if(1===s)for(const s of e.mQ())s.SFt(t)&&(null===o||o.has(s))&&a.add(s);else{let i;if(0===s){if(i=e.fQ(),null===i)continue}else i=e.pQ();i.SFt(t)&&(null===o||o.has(i))&&a.add(i)}}return 0!==a.size&&(r.Xbt(a),t._It(),!0)},XM.vFt=function(t,s){const i=NM(this);t=NM(t);const e=i.yH(),n=i.cY().uY();if(0===n.length)return!1;const r=t.cY();let h=r.uY();if(r.kbt()){const s=[...e.wFt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r.kbt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];2!==s||e.mst()||!e.SFt(t)||null!==o&&!o.has(e)||a.add(e);for(const i of 0===s?e.children():e.vQ())2===s&&i.mst()||i.SFt(t)&&(null===o||o.has(i))&&a.add(i)}return 0!==a.size&&(r.Xbt(a),t._It(),!0)},XM.bFt=function(t,s,i){const e=NM(this);t=NM(t);const n=e.yH(),r=e.cY().uY();if(0===r.length)return!1;const h=t.cY();let o=h.uY();if(h.kbt()){const s=[...n.wFt(t)];s.length>0&&(o=o.concat(s))}if(0===o.length)return!1;const a=h.kbt()?null:new Set(o),l=[];for(let e=0,n=r.length;e<n;++e){const n=r[e];if(0===s){const s=n.SQ(i);null!==s&&s.SFt(t)&&(null===a||a.has(s))&&l.push(s)}else if(1===s)for(const s of n.children())if(s.SFt(t)){if(0===i){(null===a||a.has(s))&&l.push(s);break}--i}}return 0!==l.length&&(h.Ybt(l),t._It(),!0)},XM.xFt=function(t,s,i){const e=FM(this);switch(t){case 0:default:return JM.compare(e.yQ(),s,i);case 1:return JM.compare(e.MFt(),s,i)}},XM.xQ=function(t,s,i,e,n,r,h,o,a,l){t=NM(t);const u=FM(this),c=QM.YMt().wZ();for(const f of t.TFt(u,c)){if(!f.QJ().BJ())return;u.xQ(f,{CQ:s,EQ:i,RQ:e,FQ:n,DQ:r,BQ:h,NQ:o,WQ:a,VQ:l})}},XM.MQ=function(t){t=NM(t);const s=FM(this),i=QM.YMt().wZ();for(const e of t.TFt(s,i))s.MQ(e)},XM.GFt=function(){const t=FM(this);t.GQ()&&t.fQ().MQ(t)},XM._Ft=function(){const t=FM(this).fQ();return t?t.RZ():-1},XM.CFt=function(){return FM(this).yQ()},XM.IFt=function(){return FM(this).MFt()},XM.EFt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=OM(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.JQ(),i.EK()):i.qQ(t,s)},XM.XQ=function(t,s,i,e,n,r,h,o){const a=OM(this);a.XQ(t,s,{mode:0===i?"absolute":"relative",x:e,y:n,Yk:r,t0:h,s0:o})&&a.EK()},XM.PFt=function(){const t=OM(this);return t.KQ()?t.QQ().qM():0},XM.RFt=function(){const t=OM(this);return t.KQ()?t.QQ().HM():0},XM.AFt=function(t){const s=OM(this);t=2===t?!s.CX():0!==t,s.CX()!==t&&s.GX(t)},XM.f0=function(t,s){this instanceof self.yZ?this.V2(t,s):this.f0(t,s)},XM.FFt=function(t,s){this instanceof self.yZ?this.j2(t,""+s):this.FFt(t,""+s)},XM.OFt=function(t){this instanceof self.yZ?this.q2(t):this.OFt(t)},XM.DFt=function(){this instanceof self.yZ?this.B2():this.l0()},XM.LFt=function(){this instanceof self.yZ?this.W2():this.u0()},XM.NFt=function(){return this instanceof self.yZ?this.U2():this.NFt()},XM.kFt=function(t){this instanceof self.yZ?this.BFt(0!==t):this.$Ft(0!==t)},XM.WFt=function(){return this instanceof self.yZ?this.jIt():this.UFt()},ZM.VFt=function(t,s,i){return JM.compare(this.B1().wpt(t),s,i)},KM.VFt=function(t,s,i){return JM.compare(DM(this).wpt(t),s,i)},ZM.zFt=function(t){return!!this.B1().wpt(t)},KM.zFt=function(t){return!!DM(this).wpt(t)},XM.jFt=function(t,s){const i=NM(this),e=i.cY(),n=e.uY();if(!n.length)return!1;const r=i.B7();let h=null,o=0;for(let e=0,a=n.length;e<a;++e){const a=n[e],l=r?a.wZ().JEt(i.YEt()):0,u=a.wpt(l+s);(null===h||0===t&&u<o||1===t&&u>o)&&(o=u,h=a)}return e.txt(h),!0},XM.qFt=function(t){const s=NM(this);return s.yH().HMt().pRt()?HM(s,t):qM(s,t)},XM.d1=function(t){const s=new Set(JM.Lh(t)),i=FM(this).$Z();return s.isSubsetOf(i)},XM.HFt=function(){return FM(this).Dut()},XM.JFt=function(){return FM(this).$Z().size},XM.YFt=function(t){return FM(this).XFt(t)},XM.ZFt=function(t,s){const i=JM.Lh(s);if(0===i.length)return;const e=FM(this),n=new Set(e.$Z());if(0===t)for(const t of i)n.add(t);else if(1===t)for(const t of i)n.delete(t);e.UZ(n)},XM.KFt=function(){QM.TZ(FM(this))},XM.QFt=function(){return!0},XM.tOt=function(){return!0},ZM.sOt=function(t,s){this.B1().Spt(t,s)},KM.sOt=function(t,s){DM(this).Spt(t,s)},ZM.iOt=function(t,s){const i=this.B1(),e=i.wpt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Spt(t,e+s)},KM.iOt=function(t,s){const i=DM(this),e=i.wpt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Spt(t,e+s)},ZM.eOt=function(t,s){const i=this.B1(),e=i.wpt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Spt(t,e-s))},KM.eOt=function(t,s){const i=DM(this),e=i.wpt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Spt(t,e-s))},ZM.nOt=function(t,s){this.B1().Spt(t,s?1:0)},KM.nOt=function(t,s){DM(this).Spt(t,s?1:0)},ZM.rOt=function(t){const s=this.B1();s.Spt(t,0===s.wpt(t)?1:0)},KM.rOt=function(t){const s=DM(this);s.Spt(t,0===s.wpt(t)?1:0)},XM.hOt=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=FM(this),e="state";QM.oOt(),i.ynt(e),i.IM(s,e),QM.aOt(e,{lOt:!0})},XM.uOt=function(){return JSON.stringify(FM(this).CM("state"))},XM.cOt=function(){return FM(this).wZ().Pc()},XM.fOt=function(){const t=QM.qMt().Axt();let s=t.pY();for(const i of QM.wFt(t))++s;return s},XM.dOt=function(){return QM.qMt().Axt().cY().uY().length},ZM.FZ=function(){return this.B1().FZ()},KM.FZ=function(){return DM(this).FZ()},ZM.RZ=function(){return this.B1().RZ()},KM.RZ=function(){return DM(this).RZ()},XM.gGt=function(t){const s=FM(this);return t.toLowerCase()===QM.dj().vGt(s)},XM.zZ=function(t){const s=FM(this);QM.dj().zZ(s,t)},XM.pOt=function(t){const s=NM(this);return QM.dj().HTt().mOt(s.cY().uY(),t),!0},XM.gOt=function(){return FM(this).DZ()},JM.yOt=function(t,s,i){const e=t[1],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.aH,w=s._dt,S=s.Cdt,v=Object.assign({},XM,i>=2?KM:ZM);n&&(y.gAt=v.gAt,y.yAt=v.yAt,y.wAt=v.wAt,y.SAt=v.SAt,y.vAt=v.vAt,w.mM=v.mM,w.wM=v.wM,w.bAt=v.bAt,w.MAt=v.MAt,w.GAt=v.GAt,w.IAt=v.IAt,S.wOt=v.pM,S.SOt=v.yM,S.Dj=v.Lj),r&&(y.EAt=v.EAt,y.PAt=v.PAt,w.hy=v.hy,w.oy=v.oy,w.rR=v.rR,S.vOt=v.My,S.bOt=v.Gy,S.xOt=v.RAt,S.MOt=v.AAt,S.TOt=v.FAt,S.GOt=v.OAt,S._Ot=v.DAt,S.COt=v.LAt),h&&(y.IOt=v.NAt,y.EOt=v.kAt,y.BAt=v.BAt,w.$Y=v.$Y,w.$At=v.$At,w.WAt=v.WAt,w.UAt=v.UAt,w.VAt=v.VAt,w.zAt=v.zAt,S.POt=v.WY),o&&(y.CX=v.CX,y.jAt=v.jAt,w.GX=v.GX,w.WF=v.WF,w.HAt=v.HAt,S.Opacity=v.BF,S.ColorValue=v.VF),a&&(y.JAt=v.JAt,y.YAt=v.YAt,y.XAt=v.XAt,w.ZAt=v.ZAt,w.KAt=v.KAt,w.QAt=v.QAt,w.tFt=v.tFt,w.vM=v.vM,S.iFt=v.iFt,S.eFt=v.eFt,S.nFt=v.nFt,S.rFt=v.rFt,S.hFt=v.hFt),l&&(y.oFt=v.oFt,w.aFt=v.aFt,w.lFt=v.lFt),d&&(y.gFt=v.gFt,y.GQ=v.GQ,y.mst=v.mst,y.yFt=v.yFt,y.vFt=v.vFt,y.bFt=v.bFt,y.xFt=v.xFt,w.xQ=v.xQ,w.MQ=v.MQ,w.GFt=v.GFt,S._Ft=v._Ft,S.CFt=v.CFt,S.IFt=v.IFt),p&&(w.EFt=v.EFt,w.XQ=v.XQ,S.PFt=v.PFt,S.RFt=v.RFt),u&&(y.CX=v.CX,w.GX=v.AFt,w.ROt=v.f0,w.AOt=v.FFt,w.FOt=v.OFt),c&&(y.OOt=v.NFt,w.DOt=v.DFt,w.LOt=v.LFt),f&&(y.Cu=v.WFt,w.NOt=v.kFt),m&&(y.fFt=v.fFt,y.pFt=v.pFt,y.mFt=v.mFt,s.kOt=jM),e||(y.VFt=v.VFt,y.zFt=v.zFt,y.jFt=v.jFt,y.qFt=v.qFt,y.d1=v.d1,w.sOt=v.sOt,w.iOt=v.iOt,w.eOt=v.eOt,w.nOt=v.nOt,w.rOt=v.rOt,w.ZFt=v.ZFt,y.QFt=v.QFt,y.tOt=v.tOt,w.KFt=v.KFt,w.hOt||(w.hOt=v.hOt),S.uOt||(S.uOt=v.uOt),S.fOt=v.fOt,S.dOt=v.dOt,S.BOt=v.FZ,S.$Ot=v.RZ,S.cOt=v.cOt,S.HFt=v.HFt,S.JFt=v.JFt,S.YFt=v.YFt,y.gGt=v.gGt,w.zZ=v.zZ,w.pOt=v.pOt),g&&(S.gOt=v.gOt)}}{const cT=self.Cs;cT.JTt=class extends cT.Vn{constructor(t){super(),this.nxt=t,this.Hc="",this.aV=-1,this.WOt="",this.UOt=!1,this.VOt=null,this.dxt=0,this.B_t=[],this.Sxt=null,this.zOt=new Map,this.jOt=null,this.qOt=null,this.HOt=-1,this.zIt=null,this.JOt=null,this.YOt=!1}qn(){this.Hc="",this.aV=-1,this.WOt="",this.VOt=null,this.qOt=null,this.zIt=null,this.JOt=null,this.HOt=-1,cT.bh(this.B_t),this.Sxt&&(this.Sxt.clear(),this.Sxt=null);for(const t of this.zOt.values())t.qn();this.zOt.clear(),this.jOt=null}dM(){const t=this.nxt,s=t.yH().k7(),i=t.qMt();this.VOt=i.Sj(),this.dxt=i.Gxt()+1;const e=t.kGt(this.VOt);e&&(this.qOt=e,this.zIt=e.oEt(),this.JOt=e.hEt().map(t=>t.Lct()),e.uIt()&&(this.HOt=e.cEt()));for(const t of s){const s=t.cY();s.kbt()&&!this.VOt.OCt(t)||(this.B_t.push(t),this.zOt.set(t,cT.jn(cT.XOt,s)))}const n=t.vj();this.Sxt=n.size>0?n:null}ZOt(t){this.Hc="timer",this.dM(),this.aV=this.nxt.yH().$j()+t}KOt(t){this.Hc="walltimer",this.dM(),this.aV=this.nxt.yH().zj()+t}QOt(t){this.Hc="signal",this.dM(),this.WOt=t.toLowerCase()}mOt(t,s){this.Hc="instance-signals",this.dM(),this.WOt=s.toLowerCase(),this.jOt=new Set(t)}tDt(t){this.Hc="promise",this.dM(),t.then(()=>this.fGt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.fGt()})}sDt(){return"timer"===this.Hc}iDt(){return"walltimer"===this.Hc}uGt(){return"signal"===this.Hc}wGt(){return"instance-signals"===this.Hc}OGt(){return"promise"===this.Hc}cGt(){return this.WOt}eDt(){return this.UOt}fGt(){this.UOt=!0}SGt(t){this.jOt.delete(t),0===this.jOt.size&&this.fGt()}ZTt(){return this.sDt()?this.aV<=this.nxt.yH().$j():this.iDt()?this.aV<=this.nxt.yH().zj():this.eDt()}nDt(t){t.vxt(this.VOt,this.dxt);for(const[t,s]of this.zOt.entries()){const i=t.cY();s.vxt(i)}this.Sxt&&t.kxt([...this.Sxt]);const s=this.qOt;s&&(s.bIt(this.zIt),s.hEt().map((t,s)=>t.wft(this.JOt[s])),s.uIt()&&s.fEt(this.HOt))}KTt(t){this.nDt(t),this.VOt.cIt(t),this.qOt&&this.qOt.uIt()&&this.qOt.RIt(this.HOt),this.nxt.VTt(this.B_t),this.YOt=!0}async iGt(t){this.nDt(t);for(const s of this.VOt.fIt(t))await this.nxt.yH()._Tt(s);this.qOt&&this.qOt.uIt()&&this.qOt.RIt(this.HOt),this.nxt.VTt(this.B_t),this.YOt=!0}QTt(){return this.YOt}Fbt(t){for(const s of this.zOt.values())s.Fbt(t);if("instance-signals"===this.Hc){for(const s of t)this.jOt.delete(s);0===this.jOt.size&&this.fGt()}}cst(){const t={},s={wt:this.Hc,t:this.aV,st:this.WOt,s:this.UOt,ev:this.VOt.H7(),sm:this.B_t.map(t=>t.H7()),dsm:this.Sxt?[...this.Sxt].map(t=>t.H7()):null,sols:t};this.VOt.KCt(this.dxt)&&(s.act=this.VOt.XMt(this.dxt).H7());for(const[s,i]of this.zOt)t[s.H7().toString()]=i.cst();return"instance-signals"===this.Hc&&(s.pi=[...this.jOt].map(t=>t.RZ())),s}static DGt(t,s){const i=t.yH(),e=t.rTt(s.ev);if(!e)return null;let n=0;if(s.hasOwnProperty("act")){const i=t.oTt(s.act);if(!i)return null;n=i.Rz()}const r=cT.jn(cT.JTt,t);r.aV=s.t,s.hasOwnProperty("wt")?r.Hc=s.wt:r.Hc=-1===r.aV?"signal":"timer",r.WOt=s.st,r.UOt=s.s,r.VOt=e,r.dxt=n;for(const t of s.sm){const s=i.x3(t);s&&r.B_t.push(s)}if(Array.isArray(s.dsm))for(const t of s.dsm){const s=i.x3(t);s&&(r.Sxt||(r.Sxt=new Set),r.Sxt.add(s))}for(const[e,n]of Object.entries(s.sols)){const s=parseInt(e,10),h=i.x3(s);if(!h)continue;const o=cT.jn(cT.XOt,null);o.fst(t,n),r.zOt.set(h,o)}if("instance-signals"===r.Hc){r.jOt=new Set;for(const t of s.pi){const s=i.Bq(t);s&&r.jOt.add(s)}}return r}}}{const fT=self.Cs;fT.XOt=class extends fT.Vn{constructor(t){super(),this._bt=null,this.rDt=!0,this.A6=[],t&&(this._bt=t.wZ(),this.rDt=t.kbt(),fT.Gh(this.A6,t.qbt()))}qn(){this._bt=null,fT.bh(this.A6)}vxt(t){t.jbt(this.rDt),fT.Gh(t.qbt(),this.A6)}Fbt(t){fT.Ph(this.A6,t)}cst(){return{sa:this.rDt,insts:this.A6.map(t=>t.RZ())}}fst(t,s){const i=t.yH();this.rDt=!!s.sa,fT.bh(this.A6);for(const t of s.insts){const s=i.Bq(t);s&&this.A6.push(s)}}}}{let dT=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};GetNextParamMap=dT;const pT=self.Cs;pT.hDt=class extends pT.Vn{constructor(t){super(),this.Bc=t.runtime,this.Wc=t.id,this.Yn=t.name??"",this.oDt=!!t._J,this.aDt=!!t.lDt,this.uDt=!!t.AJ,this.cDt=!!t.fDt,this.dDt=!!t.OJ,this.pDt=!!t.mDt,this.gDt=!!t.$J,this.yDt=!!t.PJ,this.wDt=!!t.LJ,this.SDt=t.vDt,this.bDt=t.xDt,this.MDt=null,this.TDt=new Map,this.GDt=new Map,this._Dt=new Map,this.CDt=new Map,this.IDt=t.EDt,this.PDt=null}qn(){this.Bc=null}yH(){return this.Bc}GJ(){return this.Wc}Pc(){return this.Yn}RDt(){}yGt(){return this.dRt()>=2?this.PDt.constructor:this.constructor}dRt(){return this.SDt}ADt(t=!1){let s=this.IDt;return t&&"function"!=typeof s&&this.dRt()>=2&&(s=globalThis.Y1),s}FDt(){return this.bDt}CJ(){return this.oDt}EJ(){return this.aDt}RJ(){return this.yDt}NJ(){return this.wDt}FJ(){return this.uDt}$x(){return this.cDt}DJ(){return this.dDt}BJ(){return this.pDt}WJ(){return this.gDt}LEt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.TDt.get(t);return i||(i=t.bind(s),this.TDt.set(t,i),i)}lRt(t,s,i){if(!s)throw new Error("missing 'this' binding");const e=dT(this.GDt,t);let n=e.get(i);return n||(n=t.bind(s,i),e.set(i,n),n)}uRt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");const n=dT(this._Dt,t),r=dT(n,i);let h=r.get(e);return h||(h=t.bind(s,i,e),r.set(e,h),h)}cRt(t,s,i,e,n){if(!s)throw new Error("missing 'this' binding");const r=dT(this.CDt,t),h=dT(r,i),o=dT(h,e);let a=o.get(n);return a||(a=t.bind(s,i,e,n),o.set(n,a),a)}ODt(t){if(!this.CJ())throw new Error("must be single-global plugin");this.MDt=t}JJ(){if(!this.CJ())throw new Error("must be single-global plugin");return this.MDt}XJ(){if(!this.CJ())throw new Error("must be single-global plugin");return this.MDt.XJ()}DDt(){const t=this.dRt();pT.MJ.LDt(this,t);const s=this.ADt(!0);if(s){if(this.PDt=new s,!(this.PDt instanceof self.bJ))throw new TypeError("plugin class must derive from IPlugin")}else this.PDt=new self.bJ;pT.MJ.NDt(t)}jJ(){return this.PDt}}}{const mT=self.Cs;mT.kDt=class extends mT.hDt{constructor(t,s){super(t),this.BDt=s,this.$Dt=0,this.WDt=new Map,this.UDt("elem-focused",t=>t.VDt()),this.UDt("elem-blurred",t=>{t&&t.zDt()})}qn(){super.qn()}jDt(t){const s=this.$Dt++;return this.WDt.set(s,t),s}qDt(t){this.WDt.delete(t)}UDt(t,s){this.Bc.eK(this.BDt,t,t=>{const i=this.WDt.get(t.elementId);s(i,t)})}}}{const gT=self.Cs;gT.HDt=class extends gT.Vn{constructor(t){super(),this._bt=t,this.Bc=t.yH(),this.JDt=t.QJ()}qn(){this._bt=null,this.Bc=null,this.JDt=null}wZ(){return this._bt}yH(){return this.Bc}QJ(){return this.JDt}H0(){return this._bt.H0()}RDt(){}GRt(t){}lAt(t){}uAt(t){}bit(t){}Cit(){}Tit(){}Jit(t){}YDt(){}ADt(){return null}XDt(t,s,i){const e=gT.jn(gT.Event,t,s);e.ZDt=this,i&&Object.assign(e,i),this.wZ().Y5(e)}}}{const yT=self.Cs;yT.KDt=class extends yT.Vn{constructor(t,s){super(),this.di=t,this.BDt=s,this.QDt=null,this.Bc=t.yH(),this._bt=this.di.wZ(),this.tLt=this._bt.aAt(),this.hnt=null,this.ant=null,this.fK=!1,this.pK=!1,this.Zf=null,this.EP=!1}qn(){this.EP=!0,this.sLt(),this.iLt(),this.hnt=null,this.ant=null,this.Zf&&(this.Zf.qn(),this.Zf=null),this.di=null,this.Bc=null,this._bt=null,this.tLt=null}Hn(){return this.EP}B1(){return this.di}yH(){return this.Bc}wZ(){return this._bt}QJ(){return this.tLt.QJ()}aAt(){return this.tLt}eLt(){return this.di.$q()}tK(t){return this.Bc.tK(t,this.di,null)}nLt(t){return this.Bc.nLt(t,this.di,null)}hH(t){return this.Bc.hH(t,this.di,null)}rLt(t,s){return this.Bc.rLt(t,this.di,s)}hLt(t,s){return this.Bc.hLt(t,this.di,s)}oLt(t){return this.Bc.oLt(t)}aLt(t,s){this.Bc.eK(this.BDt,t,s)}lLt(t){for(const[s,i]of t)this.aLt(s,i)}uLt(t,s){this.Bc.Uc(this.BDt,t,s)}cLt(t,s){return this.Bc.Qq(this.BDt,t,s)}fLt(t,s){if(!this.Bc.tj())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.BDt,handler:t,data:s,responseId:null});this.uLt(t,s)}dLt(t){if(!t)throw new Error("cannot set empty component id");this.QDt=t}pLt(){if(!this.QDt)throw new Error("wrapper extension component id not set");return this.Bc.SK(this.QDt)}bK(t,s){if(!this.QDt)throw new Error("wrapper extension component id not set");this.Bc.bK(this.QDt,t,s)}mLt(t){for(const[s,i]of t)this.bK(s,i)}c3(t,s){if(!this.QDt)throw new Error("wrapper extension component id not set");this.Bc.c3(this.QDt,t,s)}f3(t,s){if(!this.QDt)throw new Error("wrapper extension component id not set");return this.Bc.f3(this.QDt,t,s)}wrt(){}gLt(){}yLt(){if(!this.fK){if(!this.hnt)if(this.Bc.aK()){const t=globalThis.lK,s=this.QJ();this.hnt=()=>{const i=performance.now();this.wrt(),t.cK(s,performance.now()-i)}}else this.hnt=()=>this.wrt();this.Bc.Sf().addEventListener("tick",this.hnt),this.fK=!0}}sLt(){this.fK&&(this.Bc.Sf().removeEventListener("tick",this.hnt),this.fK=!1)}wLt(){return this.fK}SLt(){if(!this.pK){if(!this.ant)if(this.Bc.aK()){const t=globalThis.lK,s=this.QJ();this.ant=()=>{const i=performance.now();this.gLt(),t.cK(s,performance.now()-i)}}else this.ant=()=>this.gLt();this.Bc.Sf().addEventListener("tick2",this.ant),this.pK=!0}}iLt(){this.pK&&(this.Bc.Sf().removeEventListener("tick2",this.ant),this.pK=!1)}vLt(){return this.pK}bLt(){return[]}CM(){return null}IM(t){}lpt(t){}mpt(t,s){}amt(t,s,i){if(0===s)return;const e=this.lpt(t);if("number"!=typeof e)throw new Error("expected number");this.mpt(t,e+s,i)}xLt(t,s,i,e){}MLt(t,...s){t.call(this,...s)}TLt(t,...s){return t.call(this,...s)}ADt(){return null}XDt(t,s,i){if(!this.di.GLt())return;const e=this.eLt(),n=yT.jn(yT.Event,t,s);n.S0=e,i&&Object.assign(n,i),e.dispatchEvent(n)}$x(){return!1}}}{const wT=self.Cs;wT._Lt=class extends wT.KDt{constructor(t,s){super(t,s),this.Flt=t.zq(),this.CLt=null,this.ILt=null}qn(){if(this.CLt){const t=this.Bc.Sf();t.removeEventListener("renderercontextlost",this.CLt),t.removeEventListener("renderercontextrestored",this.ILt),this.CLt=null,this.ILt=null}this.Flt=null,super.qn()}ELt(){this.PLt()}RLt(){}ALt(){}PLt(){if(this.CLt)return;this.CLt=()=>this.T6(),this.ILt=()=>this.FLt();const t=this.Bc.Sf();t.addEventListener("renderercontextlost",this.CLt),t.addEventListener("renderercontextrestored",this.ILt)}T6(){this.RLt()}FLt(){this.ALt()}zq(){return this.Flt}Mut(){return!1}xut(){if(!this.Mut())throw new Error("original size not known");const t=this.OLt();if(t)return t.My()}Gut(){if(!this.Mut())throw new Error("original size not known");const t=this.OLt();if(t)return t.Gy()}OLt(){return null}DLt(){const t=this.OLt();if(t){const s=t.NG();if(s)return[s.My(),s.Gy()]}return[100,100]}LLt(){const t=this.OLt();return t?t.NR():null}NLt(){const t=this.OLt();return t?t.kLt():null}BLt(){const t=this.OLt();return!!t&&t.$Lt()}TAt(t){const s=this.di.zq();return[s.pM(),s.yM(),s.VK()]}YDt(t,s,i){}WLt(t,s){}Utt(){return!0}}}{const ST=self.Cs,vT=ST.jn(ST.Rect);ST.ULt=class extends ST._Lt{constructor(t,s){super(t,s),this.VLt=this.QJ().jDt(this),this.zLt=!0,this.jLt=!1,this.qLt=!1,this.HLt=-.2,this.JLt=ST.jn(ST.Rect,0,0,-1,-1);const i=this.Bc.Dq();this.YLt=i.b2(),this.XLt=i.M2(),this.ZLt=-1,this.KLt=-1,this.QLt=!1,this.yLt()}qn(){this.QJ().qDt(this.VLt),this.tNt("destroy"),this.VLt=-1,super.qn()}o0(){if(this.Bc.tj())throw new Error("not valid in worker mode");return this.sNt("get-element")}tNt(t,s){s||(s={}),s.elementId=this.VLt,this.uLt(t,s)}sNt(t,s){return s||(s={}),s.elementId=this.VLt,this.fLt(t,s)}iNt(t,s){return s||(s={}),s.elementId=this.VLt,this.cLt(t,s)}eNt(t){t||(t={});const s=this.zq();t.elementId=this.VLt,t.isVisible=s.CX(),t.htmlIndex=s.jq().E2(),t.htmlZIndex=s.P2(),Object.assign(t,this.nNt()),this.zLt=!!t.isVisible,this.fLt("create",t),this.rNt(!0)}AFt(t){t=!!t,this.zLt!==t&&(this.zLt=t,this.tNt("set-visible",{isVisible:t}))}wrt(){this.rNt(!1)}hNt(){const t=this.Bc.Dq().D2();return"Android"===ST.Ks.Qs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}rNt(t){if(this.B1().L2())return;const s=this.zq(),i=s.jq(),e=s.qK();let[n,r]=i.uZ(e.Qa(),e.tl()),[h,o]=i.uZ(e.sl(),e.il());const a=this.Bc.Dq(),l=a.cJ(),u=a.dJ();if(!s.CX()||!i.CX())return void this.AFt(!1);if(!this.hNt()&&(h<=0||o<=0||n>=l||r>=u))return void this.AFt(!1);vT.set(n,r,h,o);const c=a.b2(),f=a.M2(),d=i.E2(),p=s.P2();if(!t&&vT.equals(this.JLt)&&this.YLt===c&&this.XLt===f&&this.ZLt===d&&this.KLt===p)return void this.AFt(!0);this.JLt.S(vT),this.YLt=c,this.XLt=f,this.ZLt=d,this.KLt=p,this.AFt(!0);let m=null;this.qLt&&(m=i.N2()+this.HLt),this.sNt("update-position",{left:Math.round(this.JLt.Qa()),top:Math.round(this.JLt.tl()),width:Math.round(this.JLt.width()),height:Math.round(this.JLt.height()),htmlIndex:d,htmlZIndex:p,fontSize:m})}l0(){this.sNt("focus",{focus:!0})}u0(){this.sNt("focus",{focus:!1})}VDt(){this.jLt=!0}zDt(){this.jLt=!1}NFt(){return this.jLt}f0(t,s){this.tNt("set-css-style",{prop:ST.bo(t),val:s})}FFt(t,s){this.tNt("set-attribute",{name:t,val:s})}OFt(t){this.tNt("remove-attribute",{name:t})}oNt(){this.QLt||(this.QLt=!0,Promise.resolve().then(()=>{this.QLt=!1,this.tNt("update-state",this.nNt())}))}nNt(){}aNt(){return this.VLt}}}{const bT=self.Cs,xT=self.x0;bT.lNt=class extends bT.Vn{constructor(t){super(),this.Bc=t.runtime,this.Wc=t.id,this.Yn=t.name??"",this.uNt=bT.jn(bT.Lu),this.cNt=bT.jn(bT.Lu),this.SDt=t.vDt,this.IDt=t.EDt,this.fNt=null}qn(){this.cNt.qn(),this.uNt.qn(),this.Bc=null}yH(){return this.Bc}GJ(){return this.Wc}Pc(){return this.Yn}RDt(){}dRt(){return this.SDt}ADt(t=!1){let s=this.IDt;return t&&"function"!=typeof s&&this.dRt()>=2&&(s=globalThis.Y2),s}dNt(t){this.uNt.$u(t)}jnt(){return this.uNt.Wu()}_7(t){this.cNt.$u(t)}E7(t){this.cNt.Au(t)}uY(){return this.cNt.Wu()}DDt(){const t=this.dRt();bT.MJ.LDt(this,t);const s=this.ADt(!0);if(s){if(this.fNt=new s,!(this.fNt instanceof xT))throw new TypeError("behavior class must derive from IBehavior")}else this.fNt=new xT;bT.MJ.NDt(t)}p0(){return this.fNt}}}{const MT=self.Cs;MT.pNt=class extends MT.Vn{constructor(t){super(),this.Bc=t.yH(),this.ZEt=t,this._bt=t.wZ(),this.mNt=t.m0(),this.mNt.dNt(this._bt)}qn(){this.Bc=null,this.ZEt=null,this._bt=null,this.mNt=null}RDt(){}w0(){return this.ZEt}wZ(){return this._bt}yH(){return this.Bc}m0(){return this.mNt}}}{const TT=self.Cs;TT.gNt=class extends TT.Vn{constructor(t,s){super(),this.eyt=t,this.BDt=s,this.di=t.v0(),this.Bc=t.yH(),this.ZEt=t.w0(),this.tLt=this.ZEt.aAt(),this.fK=!1,this.pK=!1,this.h3=!1,this.Zf=null}qn(){this.sLt(),this.iLt(),this.yNt(),this.Zf&&(this.Zf.qn(),this.Zf=null),this.eyt=null,this.di=null,this.Bc=null,this.ZEt=null,this.tLt=null}m0(){return this.ZEt.m0()}wNt(){return this.eyt}v0(){return this.di}wZ(){return this.di.wZ()}zq(){return this.di.zq()}yH(){return this.Bc}w0(){return this.ZEt}aAt(){return this.tLt}eLt(){return this.eyt.eLt()}tK(t){return this.Bc.tK(t,this.di,this.ZEt)}nLt(t){return this.Bc.nLt(t,this.di,this.ZEt)}hH(t){return this.Bc.hH(t,this.di,this.ZEt)}SNt(){}wrt(){}gLt(){}vNt(){}yLt(){this.fK||(this.Bc.t3(this),this.fK=!0)}sLt(){this.fK&&(this.Bc.s3(this),this.fK=!1)}wLt(){return this.fK}SLt(){this.pK||(this.Bc.i3(this),this.pK=!0)}iLt(){this.pK&&(this.Bc.e3(this),this.pK=!1)}vLt(){return this.pK}bNt(){this.h3||(this.Bc.n3(this),this.h3=!0)}yNt(){this.h3&&(this.Bc.r3(this),this.h3=!1)}xNt(){return this.h3}bLt(){return[]}aLt(t,s){this.Bc.eK(this.BDt,t,s)}MNt(t,s){}CM(){return null}IM(t){}lpt(t){}mpt(t,s){}amt(t,s){if(0===s)return;const i=this.lpt(t);if("number"!=typeof i)throw new Error("expected number");this.mpt(t,i+s)}xLt(t,s,i,e){}MLt(t,...s){t.call(this,...s)}TLt(t,...s){return t.call(this,...s)}ADt(){return null}XDt(t,s,i){if(!this.eyt.GLt())return;const e=this.eLt(),n=TT.jn(TT.Event,t,s);n.TNt=e,n.S0=e.S0,i&&Object.assign(n,i),e.dispatchEvent(n)}}}{let GT=function(t){if(t!==CT)throw new Error("invalid internal API token")};ValidateInternalAPIToken=GT;const _T=self.Cs;_T.uH={},_T.ayt={};const CT=_T.Is();let IT=[],ET=[],PT=[],RT=null,AT=null,FT=null,OT=null;const DT=new Map,LT=new Map;_T.MJ=class extends _T.Vn{#s=null;#t=[];#e=null;#i=[];#n=new Map;#h=null;#a=null;#r;constructor(t,s){super(),this.#s=t,this.#r=new Set(s)}GNt(t){const s=t[19],i=this.#s.DIt(t[0]);if(!i)throw new Error("missing plugin");_T.yOt(t,i,s);const e=s>=2?_T.hDt:i,n=_T.jn(e,{runtime:this.#s,_J:t[1],lDt:t[2],AJ:t[5],OJ:t[8],fDt:t[9],mDt:t[13],$J:t[14],PJ:t[17],LJ:t[18],vDt:s,id:t[20],name:t[21],EDt:s>=2?i:null,xDt:t[22]});n.RDt(),this.#t.push(n),DT.set(i,n)}_Nt(){this.#e=_T.jn(_T.uH.lH,{runtime:this.#s,_J:!0}),this.#e.RDt()}CNt(t){const s=t[1],i=t[2],e=t[3],n=this.#s.DIt(t[0]);if(!n)throw new Error("missing behavior");this.#n.set(n,()=>{const t=s>=2?_T.lNt:n,r=_T.jn(t,{runtime:this.#s,id:i,name:e,vDt:s,EDt:s>=2?n:null});r.RDt(),this.#i.push(r),LT.set(n,r),!this.#h&&_T.ayt.INt&&r instanceof _T.ayt.INt?this.#h=r:!this.#a&&_T.ayt.ENt&&r instanceof _T.ayt.ENt&&(this.#a=r),r.DDt()})}PNt(t){const s=this.#n.get(t);s&&(s(),this.#n.delete(t))}static LDt(t,s=1){if(_T.MJ.LDt!==RT)throw new Error("invalid method");1===s&&IT.push(t),ET.push(t)}static NDt(t=1){if(_T.MJ.NDt!==AT)throw new Error("invalid method");1===t&&IT.pop(),ET.pop()}static xZ(){if(_T.MJ.xZ!==FT)throw new Error("invalid method");if(0===IT.length)throw new Error("no init object set");return IT.at(-1)}static xJ(t){if(_T.MJ.xJ!==OT)throw new Error("invalid method");if(GT(t),0===ET.length)throw new Error("no init object set");return ET.at(-1)}static RNt(t){PT.push(t)}static ANt(){PT.pop()}static KZ(){if(0===PT.length)throw new Error("no init properties set");return PT.at(-1)}FNt(){for(const t of this.#t)t.DDt()}static zJ(t){return DT.get(t)||null}static M0(t){return LT.get(t)||null}Z5(){return this.#e}ONt(){return this.#h}DNt(){return this.#a}SK(t){return this.#r.has(t)}},RT=_T.MJ.LDt,AT=_T.MJ.NDt,FT=_T.MJ.xZ,OT=_T.MJ.xJ}{const NT=self.Cs,kT=new Set;NT.LNt=class extends NT.Vn{constructor(){super(),this.NNt=0,this.d6="",this.w$=0,this.kNt=0,this.BNt=0,this.Uy=0,this.Vy=0,this.$Nt=!1,this.WNt=!1,this.UNt=null,this.VNt="",this.xP=NT.jn(NT.Rect),this.zNt=NT.jn(NT.El),this.jNt="",this.qNt=new self.mH(this),kT.add(this)}qn(){this.GP(),this.UNt&&0===this.UNt.C6()&&this.UNt.qn(),this.UNt=null,kT.delete(this),this.HNt()}static T6(){for(const t of kT)t.VNt="",t.xP.set(0,0,0,0),t.zNt.Xl(t.xP)}JNt(t){this.d6=t[0],this.w$=t[1],this.kNt=t[2],this.BNt=t[3],this.Uy=t[4],this.Vy=t[5],this.$Nt=t[6],this.WNt=!0}YNt(t,s,i){if(i=!!i,this.UNt)throw new Error("already loaded asset");this.d6=s;const e={N5:i};return NT.Zh(s)&&(e.k5="remote"),this.gH(t,e),this.UNt.W5()}XNt(t,s){if(this.UNt)throw new Error("already loaded asset");this.d6="",this.w$=s.size,this.UNt=NT.jn(NT.B5,t.Dz(),{blob:s,size:this.w$,k5:"local"})}ZNt(t){if(t===this)throw new Error("cannot replace with self");this.NNt++,this.GP(),this.d6=t.d6,this.w$=t.w$,this.kNt=t.kNt,this.BNt=t.BNt,this.Uy=t.Uy,this.Vy=t.Vy,this.$Nt=t.$Nt,this.WNt=t.WNt,this.UNt=t.UNt,this.VNt=t.VNt,this.xP=t.xP,this.zNt=t.zNt,this.HNt()}z5(){return this.d6}Ou(){return this.w$}KNt(){return this.kNt}QNt(){return this.BNt}$Lt(){return this.$Nt}My(){return this.Uy}Gy(){return this.Vy}tkt(){return this.UNt.My()}skt(){return this.UNt.Gy()}gH(t,s){if(this.UNt)throw new Error("already got asset");s=Object.assign({},s,{url:this.z5(),size:this.Ou()}),this.UNt=t.L5(s)}y6(){return this.UNt&&this.UNt.y6()}async M4(t,s){if(!this.UNt)throw new Error("no asset");if(this.VNt)throw new Error("already loaded texture");const i=this.NNt;this.VNt="loading";const e=await this.UNt.M4(t,s);if(this.NNt!==i)return null;if(!e)return this.VNt="",null;this.VNt="loaded",this.WNt||(this.Uy=e.My(),this.Vy=e.Gy(),this.WNt=!0);const n=this.$Nt?this.Vy:this.Uy,r=this.$Nt?this.Uy:this.Vy;return this.xP.set(this.kNt,this.BNt,this.kNt+n,this.BNt+r),this.xP.St(e.My(),e.Gy()),this.zNt.Xl(this.xP),this.$Nt&&this.zNt.iu(),e}GP(){this.VNt&&(this.UNt&&this.UNt.GP(),this.VNt="",this.xP.set(0,0,0,0),this.zNt.Xl(this.xP))}NG(){return this.UNt&&"loaded"===this.VNt?this.UNt.NG():null}NR(){return this.xP}kLt(){return this.zNt}o2(){return this.qNt}ikt(){return this.UNt}async ekt(t){t||(t=await this.UNt.I6()),this.WNt||(this.Uy=t.width,this.Vy=t.height,this.WNt=!0);const s=NT.co(this.Uy,this.Vy),i=s.getContext("2d");return this.$Nt?(i.rotate(Math.PI/-2),i.translate(-this.Vy,0),i.drawImage(t,this.kNt,this.BNt,this.Vy,this.Uy,0,0,this.Vy,this.Uy)):i.drawImage(t,this.kNt,this.BNt,this.Uy,this.Vy,0,0,this.Uy,this.Vy),s}async nkt(t){if(this.jNt)return this.jNt;const s=await this.ekt(t),i=await NT.fo(s);return this.jNt=URL.createObjectURL(i),this.jNt}HNt(){this.jNt&&(URL.revokeObjectURL(this.jNt),this.jNt="")}}}{const BT=self.Cs;BT.rkt=class extends BT.Vn{constructor(t){super(),this.Yn=t[0],this.hkt=t[1],this.UPt=!!t[2],this.Bmt=t[3],this.okt=t[4],this.akt=!!t[5],this.d8=t[6],this.lkt=t[7].map(t=>BT.jn(BT.ukt,t)),this.ckt=new self.E0(this)}static fkt(t,s){const i=BT.jn(BT.rkt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.lkt.push(BT.ukt.fkt(t)),i}qn(){for(const t of this.lkt)t.qn();BT.bh(this.lkt)}dkt(t){for(const s of this.lkt)s.H0().gH(t)}pkt(t,s){return Promise.all(this.lkt.map(i=>i.H0().M4(t,s)))}mkt(){for(const t of this.lkt)t.H0().GP()}Pc(){return this.Yn}H7(){return this.d8}B0(){return this.lkt.length}W0(){return this.lkt}gkt(t){if((t=Math.floor(t))<0||t>=this.lkt.length)throw new RangeError("invalid frame");return this.lkt[t]}ykt(t,s){(s=Math.floor(s))<0?this.lkt.unshift(t):s>=this.lkt.length?this.lkt.push(t):this.lkt.splice(s,0,t)}wkt(t){if((t=Math.floor(t))<0||t>=this.lkt.length)throw new RangeError("invalid frame");this.lkt[t].qn(),this.lkt.splice(t,1)}Skt(t){for(let s=0,i=this.lkt.length;s<i;++s)if(BT.Ke(this.lkt[s].a1(),t))return s;return-1}vkt(t){if("string"==typeof t){const s=this.Skt(t);if(-1===s)throw new Error(`cannot find animation frame with tag ${t}`);return s}return t}P0(){return this.hkt}A0(){return this.UPt}O0(){return this.Bmt}L0(){return this.okt}k0(){return this.akt}bkt(){return this.ckt}}}{const $T=self.Cs,WT=(()=>{const t=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),s=new Uint8Array(t.length);for(let i=0,e=t.length;i<e;++i)s[i]=t.charCodeAt(i);return new Blob([s],{type:"image/png"})})();$T.ukt=class extends $T.Vn{constructor(t){super(),this.xkt=$T.jn($T.LNt),this.xkt.JNt(t),this.Mkt=t[7],this.Tkt=$T.jn($T.Ea,t[8],t[9]),this.Gkt=t[10].map(t=>$T.jn($T._kt,this,t)),this.Ckt=new Map;for(const t of this.Gkt)this.Ckt.set(t.Pc().toLowerCase(),t);this.Ikt=null;const s=t[11];s.length>=6&&(this.Ikt=$T.jn($T.lu,s)),this.zw=t[12]?t[12]:"",this.Ekt=new self.q0(this)}static fkt(t){const s=$T.jn($T.ukt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.xkt.XNt(t,WT),s}qn(){this.Ikt&&(this.Ikt.qn(),this.Ikt=null),this.xkt.qn(),this.xkt=null}H0(){return this.xkt}J0(){return this.Mkt}DK(){return this.Tkt.Oa()}kK(){return this.Tkt.La()}e1(){return this.Ikt}s1(t){return this.Ckt.get(t.toLowerCase())||null}t1(t){return(t=Math.floor(t))<0||t>=this.Gkt.length?null:this.Gkt[t]}X0(){return this.Gkt.length}a1(){return this.zw}U0(){return this.Ekt}}}{const UT=self.Cs;UT._kt=class extends UT.Vn{constructor(t,s){super(),this.Pkt=t,this.Yn=s[0],this.Rkt=UT.jn(UT.Ea,s[1],s[2])}qn(){}Pc(){return this.Yn}pM(){return this.Rkt.Oa()}yM(){return this.Rkt.La()}Akt(){return this.Rkt}}}{const VT=globalThis.Cs,zT=globalThis.lK,jT=globalThis.ZJ,qT=globalThis.fY,HT=globalThis.CY,JT=globalThis.assert;VT.Pwt=class extends VT.Vn{constructor(t,s,i){super();const e=t.DIt(i[1]);this.Bc=t,this.JDt=VT.MJ.zJ(e),this.tLt=null,this.Fkt=e.Instance,this.Vw=s,this.d8=i[11],this.Yn=i[0],this.SEt=this.Bc.iTt(i[14]),this.Okt=!!i[9],this.Dkt=!!i[2],this.Lkt=!!i[10],this.Nkt=i[3].map(s=>({K6:s[0],type:s[1],name:s[2],kkt:t.iTt(s[3])})),this.Bkt=i[4],this.$kt=i[5],this.aDt=this.JDt.EJ(),this.Wkt=VT.jn(VT.Event.Sf),this.X8=null;const[n,r]=t.kz().qH();if(this.Ukt=VT.jn(VT.Vkt,n,r),this.zkt=!0,this.jkt=null,this.qkt=null,this.Hkt=-1,this.Jkt=null,this.Ykt=null,this.Xkt=null,this.Zkt=null,this.Kkt=null,this.Qkt=!1,this.tBt=null,this.sBt=i[8].map(t=>VT.iBt.e_(this,t)),this.eBt=[],this.nBt=new Map,this.rBt=new Map,this.hBt=new Set,this.oBt=new Map,this.aBt=VT.jn(VT.Gbt,this),this.lBt=null,this.uBt=0,this.cBt=!1,this.tBt=null,this.xkt=null,this.fBt=null,this.dBt=null,this.pBt=null,this.mBt=0,this.HPt=new Map,this.JPt=new Map,this.A6=[],this.gBt=new Map,this.yBt=!0,this.JDt.DJ()&&(this.X8=VT.jn(VT.Z8,this,i[12])),i[6]&&(this.xkt=VT.jn(VT.LNt),this.xkt.JNt(i[6])),i[7]){this.fBt=i[7].map(t=>VT.jn(VT.rkt,t)),this.dBt=new Map,this.pBt=new Map;for(const t of this.fBt)this.dBt.set(t.Pc().toLowerCase(),t),this.pBt.set(t.H7(),t)}this.Dkt?(this.jkt=[],this.qkt=new Set,this.Hkt=this.Bc.wBt()):(this.Jkt=[],this.Ykt=new Set,this.Xkt=[],this.Zkt=[],this.Kkt=[]);const h=this.JDt.dRt();if(h<2&&(this.tLt=VT.jn(e.SBt,this,i[15]),!(this.tLt instanceof VT.HDt)))throw new Error("v1 sdk type must derive from SDKTypeBase");let o;if(this.vBt=null,this.bBt=null,this.u7=VT.jn(VT.Event.Sf),VT.MJ.LDt(this,h),h>=2?(o=e.SBt,o||(o=globalThis.e2)):o=this.tLt.ADt(),o&&!this.Dkt){if(this.vBt=new o(h<2?this:null),h<2&&!(this.vBt instanceof qT))throw new TypeError("script interface class must derive from IObjectType");if(h>=2&&!(this.vBt instanceof globalThis.e2))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else{const t=this.Dkt?HT:qT;this.vBt=new t}if(VT.MJ.NDt(h),i[13]){const t=i[13];if(t){const s=t[0],i=t[1],e=t[2];this.tLt.YDt(s,i,e)}}this.Bc.xBt()&&!this.Dkt&&!this.Lkt&&this.aDt||this.RDt(),this.JDt.CJ()&&(this.JDt.ODt(this),this.MBt(i)),this.TBt=null}static e_(t,s,i){return VT.jn(VT.Pwt,t,s,i)}qn(){if(this.Wkt.qn(),this.Wkt=null,this.xkt&&(this.xkt.qn(),this.xkt=null),this.fBt){for(const t of this.fBt)t.qn();VT.bh(this.fBt),this.dBt.clear(),this.pBt.clear()}this.TBt=null,this.aBt.qn(),this.aBt=null,this.HPt.clear(),this.JPt.clear(),this.tBt=null,this.Bc=null}GBt(t){for(let s=1,i=t.length;s<i;++s){const i=this.Bc.g7(t[s]);this.jkt.push(i),this.qkt.add(i),i.Jkt.push(this),i.Ykt.add(this)}}_Bt(t){this.Qkt=!0,this.tBt=t}EZ(){return this.Qkt}wit(){return this.tBt}CBt(){let t=0;if(!this.Dkt)for(const s of this.Jkt)for(const i of s.IBt()){const s=i.Pc().toLowerCase();this.nBt.set(s,i),this.rBt.set(s,t),this.eBt.push(i),++t}for(const s of this.IBt()){const i=s.Pc().toLowerCase();this.nBt.set(i,s),this.rBt.set(i,t),this.eBt.push(s),++t}for(const t of this.eBt)this.hBt.add(t.m0().constructor);if(!this.Dkt&&this.Jkt.length){const t=this.Bc.EBt();VT.Mh(this.Xkt,t,0),VT.Mh(this.Zkt,t,0),VT.Mh(this.Kkt,t,0);const s=[];let i=0,e=0,n=0;for(const t of this.Jkt){const r=t.YEt();this.Xkt[r]=i,i+=t.PBt(),this.Zkt[r]=e,e+=t.RBt(),this.Kkt[r]=n,n+=t.ABt();const h=t.OY();if(h&&this.X8)for(const t of h.DY())s.push(t.FBt(this.X8))}this.X8&&this.X8.OBt(s)}}MBt(t){const s=VT.te(t[17])?t[17]:this.Bc.DBt(),i=VT.jn(VT.Instance,{runtime:this.Bc,objectType:this,uid:s});i.LBt(t[16],[]),this.Bc.NBt(s,i),this.A6.push(i)}aAt(){return this.tLt}kBt(){return this.Lkt}Sf(){return this.Wkt}RDt(){this.Dkt||(this.tLt?this.tLt.RDt():this.vBt.n2())}BBt(){return this.mBt>0}async bit(t){this.Dkt||(this.mBt++,1===this.mBt&&(this.tLt?await this.tLt.bit(t):await this.vBt.a2(this.Bc.Dq().Oq())))}Cit(){if(!this.Dkt){if(this.mBt--,this.mBt<0)throw new Error("released textures too many times");0===this.mBt&&(this.tLt?this.tLt.Cit():this.vBt.l2(this.Bc.Dq().Oq()))}}Tit(){if(this.Dkt)throw new Error("not applicable to family");this.tLt?this.tLt.Tit():this.vBt.u2()}async Jit(t){this.Dkt||(this.tLt?await this.tLt.Jit(t):await this.vBt.c2(this.Bc.Dq().Oq()))}yH(){return this.Bc}QJ(){return this.JDt}$Bt(){return this.Fkt}Pc(){return this.Yn}iTt(){return this.SEt}Rz(){return this.Vw}H7(){return this.d8}B7(){return this.Dkt}o8(){return this.Okt}EJ(){return this.aDt}YEt(){return this.Hkt}IBt(){return this.sBt}RBt(){return this.Bkt}WBt(t){return t&&this.hBt.has(t)}PBt(){return this.Nkt.length}UBt(){return this.Nkt.map(t=>t.K6)}VBt(t){return this.Nkt.findIndex(s=>s.K6===t)}rut(t){return this.Nkt.findIndex(s=>s.name===t)}zBt(){return this.Nkt.map(t=>t.name)}jBt(){return this.Nkt.map(t=>t.kkt)}out(t){if((t=Math.floor(t))<0||t>=this.Nkt.length)throw new RangeError("invalid instance variable index");return this.Nkt[t].type}hut(t){if((t=Math.floor(t))<0||t>=this.Nkt.length)throw new RangeError("invalid instance variable index");return this.Nkt[t].name}ABt(){return this.$kt}qBt(){return this.eBt}Uft(t){return this.nBt.get(t.toLowerCase())||null}lut(t){const s=this.rBt.get(t.toLowerCase());return void 0===s?-1:s}OY(){return this.X8}DJ(){return this.JDt.DJ()}HBt(){return this.X8&&this.X8.JBt()}zTt(){return this.aBt}cY(){return this.aBt.cY()}H0(){return this.xkt}S7(t){this.lBt=t}w7(){return this.lBt}v7(t){this.uBt=t}YBt(){return this.uBt}XBt(){return this.fBt}ZBt(){return this.fBt.length}TY(){return this.Jkt}pAt(t){return this.Ykt.has(t)}PY(){return this.jkt}AY(t){return this.qkt.has(t)}tPt(t){return this.Zkt[t]}JEt(t){return this.Xkt[t]}eEt(t){this.oBt.set(t.aEt().toLowerCase(),t)}nEt(t){return!!this.pEt(t)}pEt(t){const s=this.oBt.get(t.toLowerCase());return s&&s.Cu()?s:null}KBt(){return this.fBt}QBt(t){if(!this.fBt)throw new Error("no animations");return this.dBt.get(t.toLowerCase())||null}t$t(t){if(!this.fBt)throw new Error("no animations");return this.pBt.get(t)||null}s$t(t){if(this.QBt(t))throw new Error(`animation name '${t}' already exists`);const s=VT.rkt.fkt(this.yH(),t);return this.fBt.push(s),this.dBt.set(s.Pc().toLowerCase(),s),this.pBt.set(s.H7(),s),s}i$t(t){const s=this.QBt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.fBt.length)throw new Error("cannot remove last animation");const i=this.fBt.indexOf(s);this.fBt.splice(i,1),this.dBt.delete(s.Pc().toLowerCase()),this.pBt.delete(s.H7()),s.qn()}e$t(){if(!this.fBt)throw new Error("no animations");return this.fBt[0]}n$t(){return this.e$t().gkt(0)}r$t(){if(this.fBt){const t=this.n$t().H0();return[t.My(),t.Gy()]}return this.xkt?[this.xkt.My(),this.xkt.Gy()]:[100,100]}XJ(){if(!this.JDt.CJ())throw new Error("not a single-global plugin");return this.A6[0]}uY(){return this.A6}*sY(){yield*this.A6}*lY(){yield*this.A6,yield*this.Bc.wFt(this)}pY(){return this.A6.length}_7(t){this.A6.push(t)}h$t(){this.yBt=!0}iet(){if(!this.yBt||this.Dkt)return;const t=this.A6;let s=0;for(let i=t.length;s<i;++s)t[s].o$t(s);const i=this.Bc.a$t();for(const t of i)t.wZ()===this&&t.o$t(s++);this.yBt=!1}l$t(t){const s=this.A6;if(t<s.length)return s[t];t-=s.length;const i=this.Bc.a$t();for(const s of i)if(s.wZ()===this){if(0===t)return s;--t}return null}sFt(t){if(t&&t.EZ()&&t.wZ()!==this)for(const s of t.PZ())if(s.wZ()===this)return s;const s=this.cY().uY();return s.length?s[0]:null}aY(t){const s=this.cY().uY();return s.length>0?s[t.FZ()%s.length]:null}*TFt(t,s){const i=this.cY().uY(),e=i.length,n=s.cY(),r=s.cY().uY(),h=r.length;let o=t.FZ();!s.B7()&&n.kbt()||(o=r.indexOf(t));const a=Math.ceil(e/h),l=e%h;let u=0,c=0;0===l||o<l?(u=o*a,c=a):(u=l*a+(o-l)*(a-1),c=a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}GRt(t){this.tLt?.GRt(t)}_It(){if(!this.Qkt||this.Dkt)return;this.iet();const t=this.cY(),s=t.qbt(),i=t.kbt(),e=this.Bc.qMt(),n=e&&e.Sj()&&e.Sj().sxt();for(const e of this.tBt.RY()){if(e===this)continue;e.iet();const r=e.cY();if(r.jbt(i),!i){const i=r.qbt();VT.bh(i);for(const t of s)i.push(e.l$t(t.FZ()));if(n){const s=t.Hbt(),i=r.Hbt();VT.bh(i);for(const t of s)i.push(e.l$t(t.FZ()))}}}}PRt(t,s){for(const i of this.wit().RY()){const e=i.cY();t?VT.Sh(e.Hbt(),s):VT.Sh(e.qbt(),s)}}u$t(){return this.Ukt}c$t(t){this.zkt=!!t}f$t(){if(this.zkt&&this.aDt){for(const t of this.A6)t.zq().d$t();for(const t of this.Bc.a$t())t.wZ()===this&&t.zq().d$t();this.zkt=!1}}p$t(t,s,i){if(s){const i=this.gBt.get(s);i&&(i.delete(t),0===i.size&&this.gBt.delete(s))}if(i){let s=this.gBt.get(i);s||(s=new Set,this.gBt.set(i,s)),s.add(t)}}*m$t(){if(this.B7()){const t=new Set;for(const s of this.jkt)for(const i of s.m$t())t.add(i);yield*t.values()}else for(const t of this.gBt.keys())t.Hn()||(yield t)}SRt(){return this.HPt||(this.HPt=new Map),this.HPt}vRt(){return this.JPt||(this.JPt=new Map),this.JPt}g$t(){return this.WBt(VT.ayt.INt)}y$t(){return this.WBt(VT.ayt.ENt)}w$t(){return this.WBt(VT.ayt.S$t)}T7(){return this.WBt(VT.ayt.v$t)}cst(){const t={instances:this.A6.map(t=>t.CM())};return this.HPt&&this.HPt.size&&(t.ex=VT.So(this.HPt)),t}fst(t,s){this.HPt&&(this.HPt.clear(),this.HPt=null);const i=t.ex;i&&(this.HPt=VT.vo(i));const e=this.A6,n=t.instances;for(let t=0,s=Math.min(e.length,n.length);t<s;++t)e[t].IM(n[t]);for(let t=n.length,s=e.length;t<s;++t)this.Bc.TZ(e[t]);for(let t=e.length,i=n.length;t<i;++t){const i=n[t];let e=null;if(this.EJ()&&(e=this.Bc.vq().ait(i.w.l),!e))continue;const r=this.Bc.G7(this.lBt||this,e,!1,0,0,!0);r.IM(i),s&&s.add(r)}this.TBt=n,this.h$t()}b$t(){return this.TBt}x$t(){this.TBt=null}M$t(){for(let t=0,s=this.A6;t<s;++t)this.A6[t].M$t()}HJ(){return this.vBt}lj(){return this.u7}T$t(){return this.bBt}mY(t){this.bBt=t}Y5(t){const s=this.Bc,i=s.aK()&&!s.dj().vY();i&&zT.Eet(),this.u7.dispatchEvent(t),i&&zT.Pet()}}}{const YT=self.Cs;YT.G$t=class extends YT.Vn{constructor(t,s){super(),this.Bc=t,this._$t=s;for(const t of this._$t)t._Bt(this)}qn(){this.Bc=null}yH(){return this.Bc}yit(){return this._$t}RY(){return this._$t}net(){return this._$t.some(t=>t.EJ())}}}{const XT=self.Cs,ZT=self.lK,KT=self.yZ,QT=XT.MJ,tG=[];let sG=0;const iG=new WeakMap,eG=new WeakMap,nG=1,rG=2,hG=4,oG=8,aG=16,lG=32,uG=64;XT.Instance=class extends XT.Vn{constructor(t){if(XT.MJ!==QT)throw new Error("invalid addon manager");super(),this.Bc=t.runtime,this.C$t=t.objectType,this.Flt=null,this.I$t=null,this.E$t=null,this.P$t=0,this.R$t=t.uid,this.A$t=sG++,this.KD=0,this.F$t=null;const s=XT.Lh(t.tags);s.length>0&&(this.F$t=new Set(s)),this.O$t=tG,this.D$t=tG;const i=this.C$t.qBt();i.length>0&&(this.D$t=i.map((t,s)=>XT.jn(XT.L$t,{runtime:this.Bc,g0:t,S0:this,index:s}))),this.N$t=this.C$t.EZ()?[]:null,this.k$t=-1,this.Wkt=null;const e=this.QJ();if(e.$x()&&(this.KD|=4),e.EJ())if(this.Flt=XT.jn(XT.B$t,this,t.IK),t.$$t)this.Flt.W$t(t.$$t);else{this.Flt.U$t();const[t,s]=this.C$t.r$t();this.Flt.rR(t,s),this.wZ().HBt()&&this.Flt.CK().V$t()}t.z$t?this.j$t(t.z$t):this.q$t()}qn(){if(this.E$t&&(this.E$t.MZ(),this.E$t=null),this.D$t.length>0){for(const t of this.D$t)t.qn();XT.bh(this.D$t)}this.I$t&&(this.I$t.qn(),this.I$t=null);const t=iG.get(this);t&&(t.clear(),iG.delete(this));const s=eG.get(this);s&&(s.clear(),eG.delete(this)),this.N$t&&XT.bh(this.N$t),this.Wkt&&(this.Wkt.qn(),this.Wkt=null),this.F$t&&this.F$t.clear(),this.F$t=null,this.Bc=null,this.C$t=null,this.O$t.length>0&&XT.bh(this.O$t),this.Flt&&(this.Flt.qn(),this.Flt=null)}j$t(t){t.length>0&&(this.O$t=[],XT.Gh(this.O$t,t))}q$t(){const t=this.C$t.PBt();if(0===t)return;this.O$t=[];const s=[0,0,""];for(let i=0;i<t;++i)this.O$t.push(s[this.C$t.out(i)])}LBt(t,s){if(this.I$t)throw new Error("already got sdk instance");for(let t=0,i=this.D$t.length;t<i;++t)this.D$t[t].LBt(s?s[t]:null);if(this.QJ().dRt()<2){if(this.I$t=XT.jn(this.C$t.$Bt(),this,t),!(this.I$t instanceof XT.KDt))throw new Error("sdk type must derive from SDKInstanceBase");!this.QJ().EJ()&&this.C$t.T$t()&&this.$q()}else{const s=this.QJ().ADt();this.H$t(s.Instance,t)}}a0(){return this.I$t??this.E$t}zq(){return this.Flt}yH(){return this.Bc}qj(){return this.k$t}LZ(){const t=this.k$t;return-1===t?this.yH().qj():t}Hj(t){((t=+t)<0||!isFinite(t))&&(t=0),this.k$t=t,this.wZ().HBt()&&this.Bc.J$t(this,!0)}kZ(){this.k$t=-1,this.wZ().HBt()&&this.Bc.J$t(this,!1)}Qtt(){return this.Bc.Y$t(this)}Sf(){return this.Wkt||(this.Wkt=XT.jn(XT.Event.Sf)),this.Wkt}uT(t){this.I$t?this.I$t.uT(t):this.E$t.w2(this.Bc.Dq().Oq())}RDt(t){this.I$t.RDt(t)}X$t(){this.KD|=2}Z$t(){return!!(2&this.KD)}K$t(){this.KD|=1}L2(){return!!(1&this.KD)}$x(){return!!(4&this.KD)||(this.I$t?this.I$t.$x():this.E$t.xx())}Q$t(){this.KD|=32}ztt(){return!!(32&this.KD)}tWt(){return!!(8&this.KD)}sWt(t){t?this.KD|=8:this.KD&=-9}iWt(){return!!(16&this.KD)}eWt(t){t?this.KD|=16:this.KD&=-17}nWt(){return!!(64&this.KD)}rWt(t){t?this.KD|=64:this.KD&=-65}hWt(t,s){t<<=16,s?this.KD|=t:this.KD&=~t}oWt(t){return!!(this.KD&t<<16)}OLt(){return this.I$t?this.I$t.OLt():null}DLt(){return this.I$t?this.I$t.DLt():null}LLt(){return this.I$t?this.I$t.LLt():null}NLt(){return this.I$t?this.I$t.NLt():null}BLt(){return!!this.I$t&&this.I$t.BLt()}TAt(t){return this.I$t?this.I$t.TAt(t):[this.E$t.x,this.E$t.y,this.E$t.UK]}wZ(){return this.C$t}Utt(){return this.I$t?this.I$t.Utt():this.E$t.S2()}SFt(t){return t.B7()?t.AY(this.wZ()):this.wZ()===t}aWt(t,s,i){const e=(s,i)=>{const e=i||s.wZ(),n=t.get(e);n?n.add(s):t.set(e,new Set([s]))};if(e(this,s),this.EZ())for(const t of this.PZ())e(t);if(i)for(const t of this.vQ())e(t)}lWt(){if(!this.QJ().BJ())throw new Error("object does not support scene graph")}GQ(){return null!==this.fQ()}fQ(){const t=this.zq();if(!t)return null;const s=t.fQ();return s?s.B1():null}pQ(){const t=this.zq();if(!t)return null;const s=t.pQ();return s?s.B1():null}*mQ(){const t=this.zq();if(t)for(const s of t.mQ())yield s.B1()}uWt(t){if(!t)return!1;for(const s of this.children())if(s===t)return!0;return!1}mst(){const t=this.zq();return!!t&&t.mst()}cWt(t){const s=this.zq();if(!s)return[];const i=t.Pc();return s.fet().map(t=>t.B1()).filter(t=>t.wZ().Pc()===i)}fet(){const t=this.zq();return t?t.fet().map(t=>t.B1()):[]}*children(){const t=this.zq();if(t)for(const s of t.children())yield s.B1()}*vQ(){const t=this.zq();if(t)for(const s of t.vQ())yield s.B1()}yQ(){const t=this.zq();return t?t.yQ():0}fWt(){return[...this.mQ()].length}MFt(){const t=this.zq();return t?t.MFt():0}SQ(t){const s=this.zq();if(!s)return null;const i=s.SQ(t);return i?i.B1():null}dWt(){const t=this.zq();if(!t)return NaN;const s=t.fQ();return s?s.pWt(t):NaN}mWt(t){for(const s of this.zq().fet())if(s.B1().RZ()===t)return!0;return!1}xQ(t,s){this.lWt(),t.lWt(),this.zq().xQ(t.zq(),s||{})}MQ(t){const s=this.zq();s&&s.MQ(t.zq())}zQ(){const t=this.zq();return!!t&&t.zQ()}zit(){const t=this.zq();if(!t)return;const s=t.gWt();if(s)for(const t of s){const s=this.Bc.Bq(t[2]);if(s){const i=t[3];this.xQ(s,{CQ:!!(1&i),EQ:!!(i>>1&1),RQ:!!(i>>2&1),FQ:!!(i>>3&1),DQ:!!(i>>4&1),VQ:!!(i>>5&1),NQ:!!(i>>6&1),BQ:!!(i>>7&1),WQ:!!(i>>8&1)})}}}jit(t,s){const i=t.get(this);if(i)for(const t of i.sceneGraphJson.children){const i=s.get(t.index);if(!i)continue;const e=t.flags;this.xQ(i,{CQ:!!(1&e),EQ:!!(e>>1&1),RQ:!!(e>>2&1),FQ:!!(e>>3&1),DQ:!!(e>>4&1),VQ:!!(e>>5&1),NQ:!!(e>>6&1),BQ:!!(e>>7&1),WQ:!!(e>>8&1)})}}DZ(){const t=this.Bc.yWt();return t?t.Awt(this):""}EZ(){return null!==this.N$t}wWt(){XT.bh(this.N$t)}tet(t){this.N$t.push(t)}CZ(){return this.N$t}SWt(t){return!!this.vWt(t)}vWt(t){const s=this.PZ();if(null===s||0===s.length)return!1;for(const i of s)if(i.wZ()===t)return i;return null}PZ(){return this.N$t}R_t(){for(const t of this.PZ())t.wZ().cY().Jbt(t)}_Rt(){for(const t of this.PZ())t.wZ().cY().Vbt(t)}CRt(t){for(const s of this.PZ())s.wZ().cY().qbt()[t]=s}ERt(){for(const t of this.PZ())t.wZ().cY().zbt(t)}IRt(t){for(const s of this.PZ())s.wZ().cY().Hbt()[t]=s}QJ(){return this.C$t.QJ()}o$t(t){this.P$t=t}FZ(){return this.C$t.iet(),this.P$t}RZ(){return this.R$t}bWt(t){this.R$t=t}xWt(){return this.A$t}MWt(t){t?this.UZ(new Set(t)):this.F$t=null}UZ(t){if(0===t.size)this.F$t=null;else{this.F$t?this.F$t.clear():this.F$t=new Set;for(const s of t)this.F$t.add(s)}}$Z(){return this.F$t??new Set}Dut(){return Array.from(this.$Z()).join(" ")}XFt(t){t=Math.floor(t);for(const s of this.$Z()){if(0===t)return s;--t}return""}Wft(){return this.D$t}TWt(t){if(!t)return null;for(const s of this.D$t)if(s.m0()instanceof t)return s;return null}GWt(t){if(!t)return null;const s=this.TWt(t);return s?s.a0():null}$ft(t){const s=this.D$t;for(let i=0,e=s.length;i<e;++i)if(s[i].w0().H7()===t)return i;return-1}_Wt(){return this.O$t}zBt(){return this.C$t.zBt()}CWt(){return this.O$t.length}wpt(t){t|=0;const s=this.O$t;if(t<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}qEt(t){return this.O$t[t]}IWt(t){const s=this.O$t[t];return 0===this.C$t.out(t)?!!s:s}Spt(t,s){t|=0;const i=this.O$t;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");switch(this.C$t.out(t)){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}lmt(t,s){if(0===s)return;t|=0;const i=this.O$t;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}SRt(){let t=iG.get(this);return t||(t=new Map,iG.set(this,t),t)}vRt(){let t=eG.get(this);return t||(t=new Map,eG.set(this,t),t)}EWt(t){const s=this.wZ();if(s.lj().Tf(t))return!0;for(const i of s.TY())if(i.lj().Tf(t))return!0;return!!this.Bc.lj().Tf(t)}SY(t=void 0){const s=t??new Set;if(s.has(this))return;s.add(this);const i=this.zq();if(i&&i.mst())for(const t of this.vQ())if(s.add(t),t.EZ())for(const i of t.PZ())s.add(i);if(this.EZ())for(const t of this.PZ())t.SY(s);if(!t){for(const t of s.values())t.qit();this.Hit()}}PWt(){this.C$t.T$t()&&this.$q();for(const t of this.D$t)t.SNt()}RWt(){this.PWt()}qit(){if(this.PWt(),this.EWt("instancecreate")){const t=this.wZ(),s=new XT.Event("instancecreate");s.S0=this.$q(),t.Y5(s);for(const i of t.TY())i.Y5(s);this.Bc.Y5(s)}this.Bc.tK(this.QJ().yGt().aH.QFt,this,null)}Hit(){if(this.QJ().BJ()){if(this.Y5(new XT.Event("hierarchyready")),this.EWt("hierarchyready")){const t=this.wZ(),s=new XT.Event("hierarchyready");s.S0=this.$q(),t.Y5(s);for(const i of t.TY())i.Y5(s);this.Bc.Y5(s)}this.Bc.tK(this.QJ().yGt().aH.gFt,this,null)}}AWt(){this.Bc.tK(this.QJ().yGt().aH.tOt,this,null)}FWt(t){if(this.E$t){const s=new XT.Event("destroy");s.OWt=t,this.Y5(s)}if(!this.EWt("instancedestroy"))return;const s=this.wZ(),i=new XT.Event("instancedestroy");i.S0=this.$q(),i.OWt=t,s.Y5(i);for(const t of s.TY())t.Y5(i);this.Bc.Y5(i)}DWt(){return this.I$t?this.I$t.bLt():this.E$t.mK()}CM(t="full",s=null){const i={};"full"===t?i.uid=this.RZ():i.c3=!0;const e=this.$Z();if(e.size>0&&(i.tags=Array.from(e)),"visual-state"!==t){const s=iG.get(this);if(s&&s.size&&(i.ex=XT.So(s)),-1!==this.qj()&&(i.mts=this.qj()),this.C$t.PBt()>0){const t={},s=this.C$t.UBt();for(let i=0,e=this.O$t.length;i<e;++i)t[s[i].toString()]=this.O$t[i];i.ivs=t}if(this.D$t.length){const s={};for(const i of this.D$t){const e=i.CM(t);e&&(s[i.w0().H7().toString()]=e)}i.behs=s}}this.Flt&&(i.w=this.Flt.cst(t,s));const n=this.I$t?this.I$t.CM():this.E$t.gK();return n&&(i.data=n),i}ynt(t="full",s=null){this.Flt&&this.Flt.ynt(t)}Snt(t,s="full",i=null){this.Flt&&this.Flt.Snt(t,s,i)}LWt(t,s="full",i=null){this.Flt&&this.Flt.LWt(t,s,i)}M$t(){this.QJ().EJ()&&this.Flt.M$t()}IM(t,s="full",i=null){if("full"===s)this.R$t=t.uid;else if(!t.c3)return;if(this.MWt(t.tags),"visual-state"!==s){let s=iG.get(this);s&&(s.clear(),iG.delete(this));const i=t.ex;i&&(s=XT.vo(i),iG.set(this,s)),this.k$t=t.hasOwnProperty("mts")?t.mts:-1;const e=t.ivs;if(e)for(const[t,s]of Object.entries(e)){const i=parseInt(t,10),e=this.C$t.VBt(i);if(e<0||e>=this.O$t.length)continue;let n=s;null===n&&(n=NaN),this.O$t[e]=n}}if(this.QJ().EJ()){const e=t.w;if(e){const t=e.l;if(this.Flt.jq().H7()!==t){const i=this.Flt.jq(),e=i.Tq().ait(t);e?(this.Flt.Yq(e),i.E7(this,!0),e._7(this,!0),e.Xq(this),this.Flt.EK()):"full"===s&&this.Bc.TZ(this)}this.Flt.fst(e,s,i)}}if("visual-state"!==s){const i=t.behs;if(i)for(const[t,e]of Object.entries(i)){const i=parseInt(t,10),n=this.$ft(i);n<0||n>=this.D$t.length||this.D$t[n].IM(e,s)}}const e=t.data;e&&(this.I$t?this.I$t.IM(e,s):this.E$t.yK(e))}NWt(t){if(this.Flt.jq().H7()===t)return;const s=this.Flt.jq(),i=s.Tq().ait(t);i&&(this.Flt.Yq(i),s.E7(this,!0),i._7(this,!0),i.Xq(this),this.Flt.EK())}$q(){return this.E$t||this.H$t()}GLt(){return!!this.E$t}H$t(t,s){const i=this.Flt?t?self.f2:self.e0:t?self.qZ:self.yZ,e=t||this.I$t.ADt(),n=this.C$t.T$t(),r=n||e||i,h=this.QJ().dRt();if(XT.MJ.LDt(this,h),XT.MJ.RNt(s),this.E$t=new r,XT.MJ.ANt(),XT.MJ.NDt(h),e&&!(this.E$t instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(n){const t=e||i;if(!(this.E$t instanceof t))throw new TypeError(`setInstanceClass(): class '${n.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.E$t}SZ(t){if(0===this.O$t.length)return;const s={},i=this.C$t.jBt();for(let t=0,e=i.length;t<e;++t)s[i[t]]={configurable:!1,enumerable:!0,get:XT.Instance.prototype.IWt.bind(this,t),set:XT.Instance.prototype.Spt.bind(this,t)};const e=Object.create(Object.prototype,s);t.kWt={value:e,writable:!1}}vZ(t){const s=this.D$t;if(0===s.length)return;const i={};for(const t of s)i[t.w0().iTt()]={value:t.eLt(),writable:!1};const e=Object.create(Object.prototype,i);t.y_t={value:e,writable:!1}}Y5(t){if(!this.GLt())return;const s=this.$q();t.S0=s;const i=this.Bc,e=i.aK()&&!i.dj().vY();e&&ZT.Eet(),s.dispatchEvent(t),e&&ZT.Pet()}}}{const cG=self.Cs,fG=new Map;cG.pet=class extends cG.Vn{constructor(t){super(),this.DM=t,this.N_t=null,this.BWt=[],this.$Wt=t.My(),this.WWt=t.Gy(),this.UWt=1,this.VWt=1,this.zWt=0,this.jWt=1,this.qWt=t.BF(),this.HWt=null,this.JWt=null,this.YWt=NaN,this.XWt=!1,this.wst=NaN,this.Sst=NaN,this.ZWt=s=>{if(s.S0!==this.N_t.B1())return;t.yH().Sf().removeEventListener("instancecreate",this.ZWt);const i=this.N_t.B1().a0();this.XWt=!!i.Mut(),this.wst=this.XWt?i.xut():NaN,this.Sst=this.XWt?i.Gut():NaN}}qn(){this.N_t=null,this.HWt=null,this.JWt=null,this.YWt=NaN,this.XWt=!1,this.wst=NaN,this.Sst=NaN,cG.bh(this.BWt)}KWt(t){if(this.jWt=this.DM.BF(),this.qWt=this.jWt,this.N_t=t,this.zWt=t?t.WY():0,this.N_t){const t=this.DM.yH();if(this.N_t.B1().QJ().dRt()<2){const s=this.N_t.B1().a0();s?(this.XWt=!!s.Mut(),this.wst=this.XWt?s.xut():NaN,this.Sst=this.XWt?s.Gut():NaN):this.N_t.B1().L2()||t.Sf().addEventListener("instancecreate",this.ZWt)}else this.XWt=!1,this.wst=NaN,this.Sst=NaN}else this.XWt=!1,this.wst=NaN,this.Sst=NaN}fQ(){return this.N_t}mst(){return this.BWt.length>0}fet(){return this.BWt}QWt(){this.mst()&&1!==this.BWt.length&&(this.JWt?this.BWt.sort((t,s)=>{const i=this.JWt.get(t.B1()),e=this.JWt.get(s.B1());return cG.te(i)&&cG.te(e)?i-e:0}):this.BWt.sort((t,s)=>{const i=t.Kft().tUt(),e=s.Kft().tUt();return cG.te(i)&&cG.te(e)?i-e:0}))}tUt(){return this.YWt}sUt(){return this.UWt}iUt(t){this.UWt=t}eUt(){return this.VWt}nUt(t){this.VWt=t}kpt(){return this.qWt}qAt(){return this.jWt}rUt(t){this.jWt=t}Zft(){return 0===this.$Wt?Number.EPSILON:this.$Wt}idt(){return 0===this.WWt?Number.EPSILON:this.WWt}hUt(){if(this.DM.AQ()){const t=this.N_t;let s=t.My(),i=t.Kft().Zft();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.XWt?1+s/this.wst:s/i}return 1}oUt(){if(this.DM.OQ()){const t=this.N_t;let s=t.Gy(),i=t.Kft().idt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.XWt?1+s/this.Sst:s/i}return 1}aUt(){return 0}lUt(){return{sw:this.$Wt,sh:this.WWt,sx:this.UWt,sy:this.VWt,psa:this.zWt,oo:this.jWt,so:this.qWt,pi:this.DM.B1().dWt()}}cst(t,s=null){const i=this.lUt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.uUt(t),c:this.cUt(t)})}fUt(t){let s="";return t.IQ()&&(s+="x"),t.PQ()&&(s+="y"),t.AQ()&&(s+="w"),t.OQ()&&(s+="h"),t.LQ()&&(s+="a"),t.kQ()&&(s+="z"),t.zQ()&&(s+="d"),t.$Q()&&(s+="o"),t.UQ()&&(s+="v"),s}uUt(t){return this.N_t?!this.N_t.B1()||this.N_t.B1().L2()?null:this.dUt(this.N_t,this.DM,t):null}cUt(t){return this.BWt.map(s=>this.dUt(s,s,t)).filter(t=>t)}dUt(t,s,i){const e=t.B1();if(e&&e.L2())return null;const n={};return n.uid=e.RZ(),n.f=this.fUt(s),n.offsets=s.pUt(),n.data=cG.pet.mUt(e),n.oci=e.wZ().Rz(),"state"===i?(n.inst=e.CM("full",{selfOnly:!0}),n.instIndex=NaN):(n.instIndex=e.wZ().uY().indexOf(e),n.inst=null),n}fst(t){this.$Wt=t.sw,this.WWt=t.sh,this.UWt=t.sx,this.VWt=t.sy,this.zWt=t.psa,this.jWt=t.oo,this.qWt=t.so,this.YWt=cG.te(t.pi)?t.pi:NaN}gUt(t,s,i,e){if(!t&&!s)if(e?.lOt){if(this.HWt)for(const t of this.HWt)t.L2()||t.GQ()||t.yH().TZ(t)}else if(this.HWt)for(const t of this.HWt)if(i.c&&i.c.length){if(!i.c.some(s=>s.uid===t.RZ()))continue;t.L2()||t.GQ()||t.yH().TZ(t)}this.HWt=t,this.JWt=s}yUt(t){const s=this.DM.yH();return fG.has(t)?fG.get(t):s.Bq(t)}Snt(t,s){const i=this.DM,e=i.yH(),n=s?.wUt??new Set;if(t.p&&!this.N_t){const r=t.p.uid,h=this.yUt(r);if(h){const r=h.zq();h.uWt(i.B1())?this.N_t=r:(h.mWt(i.B1().RZ())?(e.TZ(i.B1()),e.SUt(i.B1().RZ()),fG.delete(i.B1().RZ())):h.xQ(i.B1(),this.vUt(t.p.f)),n.has(i)||(i.bUt(t.p.offsets),this.xUt(h,t.p,s),this.MUt(h,h.RZ(),i.yH(),s)),n.add(i),h.zq().Kft().QWt())}else if(cG.te(t.p.oci)){const n=e.gY(e.g7(t.p.oci),i.jq(),0,0,!0);if(n){const r=this.TUt(t.p,e);r&&n.IM(r);const h=n.zq(),o=!!s?.lOt;h.jq().yY(n,!1,o),n.xQ(i.B1(),this.vUt(t.p.f)),fG.set(n.RZ(),n),this.MUt(n,n.RZ(),e,s),n.zq().Kft().QWt()}}}const r=[];for(const s of t.c){const t=s.uid,i=this.yUt(t);i&&r.push(i)}let h=0;for(const o of t.c){const a=o.uid,l=this.yUt(a);if(l){if(this.HWt){if(this.HWt.includes(l)){const e=l;if(e.wZ()!==l.wZ()){h++;continue}if(e.L2()){h++;continue}const o=t.c[h];if(!s?.lOt&&this.GUt(e,r,i)){if(i.B1().SQ(h)){const r=e.wZ().Rz(),a=o.oci,l=i.B1().SQ(h).wZ().Rz();if(r!==a||a!==l){this._Ut(t.c,i,n,s);break}this.CUt(h,o,i,n,s)}else this.CUt(h,o,i,n,s);h++;continue}if(e.GQ()&&e.fQ()!==i.B1()){const t=this.IUt(o,s);this.EUt(t,o,n,s),h++;continue}this.EUt(e.zq(),o,n,s,!0),h++;continue}if(this.HWt[h]){const e=this.HWt[h];if(e.wZ()!==l.wZ()){h++;continue}if(e.L2()){h++;continue}const o=t.c[h];if(!s?.lOt&&this.GUt(e,r,i)){if(i.B1().SQ(h)){const r=e.wZ().Rz(),a=o.oci,l=i.B1().SQ(h).wZ().Rz();if(r!==a||a!==l){this._Ut(t.c,i,n,s);break}this.CUt(h,o,i,n,s)}else this.CUt(h,o,i,n,s);h++;continue}if(e.GQ()&&e.fQ()!==i.B1()){const t=this.IUt(o,s);this.EUt(t,o,n,s),h++;continue}this.EUt(e.zq(),o,n,s,!0),h++;continue}}const e=l.wZ();if(this.PUt(r,e)===i.B1().cWt(e).length){for(const t of i.B1().fet()){if(t.wZ()!==e)continue;const i=t.zq();if(i&&!n.has(i)){n.add(i),i.bUt(o.offsets),this.xUt(t,o,s);break}}h++;continue}if(l.GQ()&&l.fQ()!==i.B1()){const t=this.IUt(o,s);this.EUt(t,o,n,s),h++;continue}this.EUt(l.zq(),o,n,s)}else if(this.HWt&&this.HWt[h]){const a=this.HWt[h],l=e.g7(this.RUt(o));if(a.wZ()!==l){h++;continue}if(a.L2()){h++;continue}const u=t.c[h];if(!s?.lOt&&this.GUt(a,r,i)){if(i.B1().SQ(h)){const e=a.wZ().Rz(),r=u.oci,o=i.B1().SQ(h).wZ().Rz();if(e!==r||r!==o){this._Ut(t.c,i,n,s);break}this.CUt(h,u,i,n,s)}else this.CUt(h,u,i,n,s);h++;continue}if(a.GQ()&&a.fQ()!==i.B1()){const t=this.IUt(u,s);this.EUt(t,u,n,s),h++;continue}this.EUt(a.zq(),u,n,s)}else{const t=this.IUt(o,s);this.EUt(t,o,n,s)}h++}}_Ut(t,s,i,e){const n=s.yH();for(const t of s.B1().children())t&&!t.L2()&&(n.TZ(t),n.SUt(t.RZ()),fG.delete(t.RZ()));this.HWt&&(this.HWt=[]),this.JWt&&(this.JWt=new WeakMap),Object.assign({},e,{assignZIndex:!1});for(const s of t){const t=this.IUt(s,e);this.EUt(t,s,i,e),this.HWt.push(t.B1()),this.JWt.set(t.B1(),this.HWt.length-1)}s.Kft().QWt()}GUt(t,s,i){const e=t.wZ();return this.PUt(s,e)===i.B1().cWt(e).length}CUt(t,s,i,e,n){const r=i.B1().SQ(t);if(!r)return;const h=r.zq();h&&(e.has(h)||(h.bUt(s.offsets),this.xUt(r,s,n)),e.add(h))}vUt(t){const s={};return s.CQ=t.includes("x"),s.EQ=t.includes("y"),s.RQ=t.includes("w"),s.FQ=t.includes("h"),s.DQ=t.includes("a"),s.NQ=t.includes("z"),s.VQ=t.includes("d"),s.BQ=t.includes("o"),s.WQ=t.includes("v"),s}RUt(t){return cG.te(t.oci)?t.oci:t[1]}IUt(t,s){if(!cG.te(t.oci))return;const i=this.DM,e=i.yH();let n;const r=!s.hasOwnProperty("createHierarchy")||s.createHierarchy;if(n=t.data?e.G7(t.data,i.jq(),!1,0,0,!1,r):e.gY(e.g7(t.oci),i.jq(),0,0,r),!n)return;const h=this.TUt(t,e);h&&n.IM(h);const o=n.zq(),a=!!s?.lOt;return o.jq().yY(n,!0,a),o}MUt(t,s,i,e){if(this.yUt(s)&&!e?.lOt){const e=this.yUt(s);e!==t&&i.TZ(e)}i.SUt(s),i.NBt(s,t)}EUt(t,s,i,e,n=!0){const r=this.DM,h=r.xQ(t,this.vUt(s.f));h&&n?(i.has(t)||(t.bUt(s.offsets),this.xUt(t.B1(),s,e)),i.add(t)):h&&(fG.set(t.B1().RZ(),t.B1()),this.MUt(t.B1(),s.uid,r.yH(),e)),this.QWt()}xUt(t,s,i){let e=this.TUt(s,this.DM.yH());if(!e)return;const n=!i.hasOwnProperty("clearChildren")||i.clearChildren,r=!i.hasOwnProperty("assignZIndex")||i.assignZIndex,h=t.yH();if(fG.set(t.RZ(),t),e=JSON.parse(JSON.stringify(e)),n&&t.RZ()!==e.uid){for(const s of t.children())s&&!s.L2()&&(h.TZ(s),h.SUt(s.RZ()),fG.delete(s.RZ()));if(e.w?.sgi&&e.w.sgi.c?.length)for(const s of e.w.sgi.c){const e=Object.assign({},i,{clearChildren:!1,createHierarchy:!1}),n=this.IUt(s,e);fG.set(n.B1().RZ(),n.B1()),t.xQ(n.B1(),this.vUt(s.f)),n.bUt(s.offsets),this.xUt(n.B1(),s,e)}}const o=e.w?.zi,a=e.w?.l;e.w=null,t.IM(e),i?.lOt||(cG.te(o)&&r&&t.zq().O7(o),cG.te(a)&&t.NWt(a)),this.MUt(t,e.uid,h,i)}PUt(t,s){return t.filter(t=>t.wZ().Pc()===s.Pc()).length}TUt(t,s){if(cG.te(t.instIndex)){const i=s.g7(t.oci).b$t();return i?i[t.instIndex]:null}return cG.le(t.inst)?JSON.parse(t.inst):t.inst?t.inst:void 0}static mUt(t){let s=t.zq().jq().b7(t.RZ());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const s of[...t.fet()]){const t=s.zq();i.push([t.Tq().H7(),t.jq().Rz(),s.RZ(),cG.pet.det(t),s.wZ().EZ()?1:0,t.qq(),cG.pet.mUt(s)])}return cG.Te(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=cG.pet.AUt(),s[0][14][1]=i,s[0][14][2]=t.zq().qq()),s}static det(t){let s=0;return s|=Number(t.UQ())<<8,s|=Number(t.$Q())<<7,s|=Number(t.kQ())<<6,s|=Number(t.zQ())<<5,s|=Number(t.LQ())<<4,s|=Number(t.OQ())<<3,s|=Number(t.AQ())<<2,s|=Number(t.PQ())<<1,s|=0|Number(t.IQ()),s}static AUt(t){let s=0;return s|=256,s|=128,s|=64,s|=32,s|=16,s|=8,s|=4,s|=2,s|=1,511}static FUt(){fG.clear()}}}{const dG=self.Cs,pG=self.ls,mG=pG.ws,gG=pG.Ss,yG=dG.jn(dG.Rect),wG=dG.jn(dG.El),SG=dG.jn(dG.Event,"bboxchange",!1),vG=dG.jn(dG.To,0,0,0,0),bG=dG.jn(dG.lu),xG=dG.jn(dG.To,1,1,1,1),MG=dG.jn(dG.Rect,0,0,-1,-1),TG=dG.jn(dG.Rect,0,0,-1,-1),GG=new Set(["absolute","relative"]),_G=[];let CG=!0;const IG=1,EG=2,PG=4,RG=8,AG=16,FG=32,OG=64,DG=128,LG=256,NG=512,kG=1024,BG=2048,$G=4096,WG=8192,UG=16384,VG=32768,zG=1<<22,jG=1<<23,qG=12647936,HG=65536,JG=1<<17,YG=1<<18,XG=1<<19,ZG=1<<20,KG=1<<21,QG=1<<24,t_=26,s_=31<<26,i_=new WeakMap,e_=new WeakMap;dG.B$t=class extends dG.Vn{constructor(t,s){super(),this.di=t,this._bt=t.wZ(),this.Bc=t.yH(),this.OUt=s,this._bt.p$t(this,null,s),this.DUt=-1,this.LUt=-1,this.KD=196635,this._bt.QJ().FJ()&&(this.KD|=128),this.Pa=NaN,this.Ra=NaN,this.Qx=NaN,this.NUt=NaN,this.kUt=NaN,this.yG=NaN,this.Io=NaN,this.BUt=NaN,this.$Ut=NaN,this.WUt=NaN,this.UUt=NaN,this.VUt=dG.jn(dG.Rect),this.zUt=dG.jn(dG.El),this.jUt=TG,this.qUt=MG,this.HUt=null,this.JUt=null,this.YUt=null,this.Kx=xG,this.XUt=xG,this.ZUt=null,this.KUt=null,this.di.wZ().HBt()&&(this.KUt=dG.jn(dG.QUt,this.di,this)),this.tVt=null,this.HWt=null,this.JWt=null,this.sVt=-1,this.iVt=null}K$t(){this.KD|=256}qn(){if(this._bt.p$t(this,this.OUt,null),this.ZUt&&(this.Bc.Dx().Uv(this.ZUt),this.ZUt=null),this.HUt=null,this.JUt&&(this.JUt.eVt.qn(),this.JUt=null),this.YUt&&(this.YUt.clear(),this.YUt=null),this.JQ(),this.KUt&&this.KUt.qn(),this.GQ()&&this.fQ().MQ(this),this.mst()){const t=[...this.fet()];for(const s of t)this.MQ(s)}this.nVt(),this.rVt(),i_.delete(this),e_.delete(this),this.di=null,this._bt=null,this.Bc=null,this.OUt=null}W$t(t){if(CG=!1,this.PK(t[0],t[1]),this.vM(t[2]),this.rR(t[3],t[4]),this.yG=0,this.FJ()?this.$Y(t[6]):this.Io=0,vG.Sa(t[7]),this.hVt(vG),this.LK(t[8]),this.BK(t[9]),this.eM(t[10]),this.KUt&&this.KUt.oVt(t[12]),t[14]&&i_.set(this,{aVt:t[14][1],lVt:t[14][2]}),t[15]){const s=t[15];this.qQ(s[0],s[1]);const i=this.QQ(),e=s[2];for(let t=0,s=e.length;t<s;++t){const s=e[t];for(let e=0,n=s.length;e<n;++e){const n=s[e],r=i.eT(e,t);r.mM(n[0]),r.wM(n[1]),r.vM(n[2]),r.xM(n[3]),r.TM(n[4])}}}if(t[16]){const s=t[16][0],i=t[16][1],e=!!i,n=!e,r=this.Bc.yWt();e&&r&&r.Rwt(this.B1(),i),n&&r&&r.Rwt(this.B1(),s)}CG=!0,this.uVt()}U$t(){this.Pa=0,this.Ra=0,this.Qx=0,this.NUt=0,this.kUt=0,this.yG=0,this.Io=0,this.BUt=0,this.$Ut=1,this.WUt=0,this.UUt=0,this.uVt()}yH(){return this.Bc}wZ(){return this._bt}B1(){return this.di}cVt(){return this.LQ()?this.fVt(this.fQ().dVt()-this.tVt.aUt()):0}mM(t){if(t=+t,this.IQ()){const s=this.tVt,i=t-this.pM(),e=-this.cVt();0===e?this.Pa+=i/s.hUt():(this.Pa+=Math.cos(e)*i/s.hUt(),this.PQ()&&(this.Ra+=Math.sin(e)*i/s.oUt()))}else this.Pa=t}Tpt(t,s=!1){t=+t,s?this.Pa+=t:this.IQ()?this.mM(this.pM()+t):this.Pa+=t}pM(){if(this.IQ()){let t=this.Pa;const s=this.tVt,i=this.fQ(),e=this.cVt();return 0===e?t*=s.hUt():(t=t*s.hUt()*Math.cos(e),this.PQ()&&(t-=this.Ra*s.oUt()*Math.sin(e))),i.pM()+t}return this.Pa}wM(t){if(t=+t,this.PQ()){const s=this.tVt,i=t-this.yM(),e=-this.cVt();0===e?this.Ra+=i/s.oUt():(this.IQ()&&(this.Pa-=Math.sin(e)*i/s.hUt()),this.Ra+=Math.cos(e)*i/s.oUt())}else this.Ra=t}Gpt(t,s=!1){t=+t,s?this.Ra+=t:this.PQ()?this.wM(this.yM()+t):this.Ra+=t}yM(){if(this.PQ()){let t=this.Ra;const s=this.tVt,i=this.fQ(),e=this.cVt();return 0===e?t*=s.oUt():(t=t*s.oUt()*Math.cos(e),this.IQ()&&(t+=this.Pa*s.hUt()*Math.sin(e))),i.yM()+t}return this.Ra}PK(t,s){if(t=+t,s=+s,this.pVt()){const i=this.IQ(),e=this.PQ(),n=this.tVt,r=t-this.pM(),h=s-this.yM(),o=-this.cVt();if(0===o)i?this.Pa+=r/n.hUt():this.Pa=t,e?this.Ra+=h/n.oUt():this.Ra=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.Pa+=e?(l*r-a*h)/n.hUt():l*r/n.hUt():this.Pa=t,e?this.Ra+=i?(a*r+l*h)/n.oUt():l*h/n.oUt():this.Ra=s}}else this.Pa=t,this.Ra=s}mVt(){return[this.pM(),this.yM()]}AK(t,s){t=+t,s=+s,this.pVt()?this.PK(this.pM()+t,this.yM()+s):(this.Pa+=t,this.Ra+=s)}xAt(t,s){return this.pM()===t&&this.yM()===s}vM(t){if(t=+t,this.kQ()&&(t-=this.fQ().SM()),this.Qx===t)return;this.Qx=t,this.gVt();const s=this.jq();0!==this.Qx&&s.A7(),s.Xq(this)}gVt(){if(this.uVt(),this.mst()){const t=this.fet();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.kQ()&&i.gVt()}}}Wpt(t){this.vM(this.SM()+t)}SM(){return this.kQ()?this.fQ().SM()+this.Qx:this.Qx}VK(){return this.jq().SM()+this.SM()}Mut(){return this.B1().QJ().dRt()<2&&this.B1().a0().Mut()}hy(t){if(t=+t,this.AQ()){const s=this.My();0===s?this.NUt=Number.EPSILON:this.NUt*=t/s}else this.NUt=t;this.yVt()}ky(t,s){t=+t,s?this.NUt+=t:this.AQ()?this.hy(this.My()+t):this.NUt+=t,this.yVt()}My(){if(this.AQ()){const t=this.fQ(),s=t.My();return t.Kft().Zft()===Number.EPSILON?(this.Kft().Zft()+s)*this.NUt:s*this.NUt}return this.NUt}oy(t){if(t=+t,this.OQ()){const s=this.Gy();0===s?this.kUt=Number.EPSILON:this.kUt*=t/s}else this.kUt=t;this.yVt()}Rpt(t,s){t=+t,s?this.kUt+=t:this.OQ()?this.oy(this.Gy()+t):this.kUt+=t,this.yVt()}Gy(){if(this.OQ()){const t=this.fQ(),s=t.Gy();return t.Kft().idt()===Number.EPSILON?(this.Kft().idt()+s)*this.kUt:s*this.kUt}return this.kUt}rR(t,s){if(t=+t,s=+s,this.AQ()){const s=this.My();0===s?this.NUt=Number.EPSILON:this.NUt*=t/s}else this.NUt=t;if(this.OQ()){const t=this.Gy();0===t?this.kUt=Number.EPSILON:this.kUt*=s/t}else this.kUt=s;this.yVt()}Ou(){return[this.My(),this.Gy()]}Vtt(){return this.yG}wVt(t){if(t<0)throw new RangeError("invalid depth");this.yG=t}SVt(){if(this.GQ()){const t=this.tVt;return Math.min(t.hUt(),t.oUt())}return 1}FJ(){return!!(128&this.KD)}$Y(t){t=+t,this.FJ()&&(this.LQ()&&(t-=this.fQ().WY()),t=dG.Kn(t),this.Io!==t&&(this.Io=t,this.yVt()))}Apt(t){0!==(t=+t)&&this.FJ()&&(this.Io=dG.Kn(this.Io+t),this.yVt())}yVt(){if(this.KD|=262144,this.mst()){const t=this.fet();for(let s=0,i=t.length;s<i;s++)t[s].yVt()}}WY(){return this.LQ()&&this.FJ()?this.fVt(dG.Kn(this.fQ().dVt()+this.Io)):this.Io}dVt(){return this.LQ()&&this.FJ()?dG.Kn(this.fQ().dVt()+this.Io):this.Io}fVt(t){return this.AQ()&&this.pQ().My()<0&&(t=dG.Kn(dG.pr(t,this.pQ().WY()+Math.PI))),this.OQ()&&this.pQ().Gy()<0&&(t=dG.pr(t,this.pQ().WY())),t}vVt(){const t=this.fQ();return!!(this.AQ()&&t.My()<0)||!!(this.OQ()&&t.Gy()<0)}bVt(){const t=this.fQ();return!!(this.AQ()&&t.My()<0&&this.OQ()&&t.Gy()<0)}xVt(){const t=this.KD;if(!(262144&t))return;const s=this.WY();this.BUt=Math.sin(s),this.$Ut=Math.cos(s),this.KD=-262145&t}CAt(){return this.xVt(),this.BUt}_At(){return this.xVt(),this.$Ut}LK(t){this.WUt=+t}Bpt(t){this.WUt+=+t}DK(){return this.WUt}BK(t){this.UUt=+t}$pt(t){this.UUt+=+t}kK(){return this.UUt}hVt(t){this.Kx.equals(t)||(this.Kx===xG?(this.Kx=dG.jn(dG.To,t),this.XUt=dG.jn(dG.To,t),this.XUt.Ko()):t.Jo(1,1,1,1)?(this.Kx=xG,this.XUt=xG):(this.Kx.set(t),this.XUt.set(t),this.XUt.Ko()),this.uVt())}WF(t){if(t=dG.Zn(+t,0,1),this.$Q()){if(this.Kft().qAt()===t)return;this.Kft().rUt(t),t=this.BF()}else if(this.Kx.a===t)return;this.MVt(t)}TVt(){if(!this.mst())return;const t=this.fet();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.MVt(i.BF())}}MVt(t){vG.No(this.Kx),vG.a=t,this.hVt(vG),this.TVt()}Dpt(t){this.$Q()?this.WF(this.Kft().qAt()+t):this.WF(this.BF()+t)}BF(){return this.$Q()?this.fQ().BF()*this.Kft().qAt():this.Kx.a}QK(t){this.Kx.qo(t)||(vG.No(t),vG.a=this.BF(),this.hVt(vG))}gpt(t,s,i){vG.Po(t,s,i),this.QK(vG)}GVt(t,s,i){0===t&&0===s&&0===i||(vG.No(this.Kx),vG.r+=t,vG.g+=s,vG.b+=i,this.QK(vG))}KK(){return this.Kx}Q8(){return this.XUt}zQ(){return!!(512&this.KD)}_Vt(t){this.tN(512,t)}IQ(){return!!(1024&this.KD)}CVt(t){this.tN(1024,t)}PQ(){return!!(2048&this.KD)}pVt(){return!!(3072&this.KD)}IVt(t){this.tN(2048,t)}AQ(){return!!(4096&this.KD)}EVt(t){this.tN(4096,t)}OQ(){return!!(8192&this.KD)}PVt(t){this.tN(8192,t)}LQ(){return!!(16384&this.KD)}RVt(t){this.tN(16384,t)}kQ(){return!!(32768&this.KD)}AVt(t){this.tN(32768,t)}$Q(){return!!(4194304&this.KD)}FVt(t){this.tN(4194304,t)}UQ(){return!!(8388608&this.KD)}OVt(t){this.tN(8388608,t)}DVt(){this.KD&=-12647937}xQ(t,s){if(t===this)return!1;if(t.GQ())return!1;if(this.LVt(t))return!1;if(this.NVt(t))return!1;const i=t.pM(),e=t.yM(),n=t.My(),r=t.Gy(),h=t.WY(),o=t.SM(),a=t.BF();t.kVt(this),t.CVt(s.CQ),t.IVt(s.EQ),t.EVt(s.RQ),t.PVt(s.FQ),t.RVt(s.DQ),t.AVt(s.NQ),t.FVt(s.BQ),t.OVt(s.WQ),t._Vt(s.VQ);const l=i-this.pM(),u=e-this.yM(),c=-this.WY(),f=Math.cos(c),d=Math.sin(c);if(s.CQ&&(s.DQ?t.Pa=l*f-u*d:t.Pa=l,s.RQ)){const s=this.My()/this.tVt.Zft();0!==s&&(t.Pa/=s)}if(s.EQ&&(s.DQ?t.Ra=l*d+u*f:t.Ra=u,s.FQ)){const s=this.Gy()/this.tVt.idt();0!==s&&(t.Ra/=s)}if(s.RQ){const s=this.My();0===s||s===Number.EPSILON?(t.NUt=1,t.tVt.iUt(1)):(t.NUt=n/this.My(),t.tVt.iUt(t.NUt))}if(s.FQ){const s=this.Gy();0===s||s===Number.EPSILON?(t.kUt=1,t.tVt.nUt(1)):(t.kUt=r/this.Gy(),t.tVt.nUt(t.kUt))}return s.DQ&&(t.Io=h-this.WY()),s.NQ&&(t.Qx=o-this.SM()),s.BQ&&t.tVt.rUt(a),s.WQ&&t.GX(this.CX()),this.BVt(t),this.EK(),this.TVt(),!0}MQ(t){if(t.fQ()!==this)return;const s=t.pM(),i=t.yM(),e=t.My(),n=t.Gy(),r=t.WY(),h=t.SM(),o=t.BF();t.kVt(null),t.DVt(),t.PK(s,i),t.rR(e,n),t.$Y(r),t.vM(h),t.WF(o),this.$Vt(t),this.EK()}WVt(){return this.sVt}UVt(){this.VVt();const t=[...this.children()];for(const s of t)this.MQ(s);const s=this.fQ();s&&s.MQ(this),this.DVt()}VVt(){if(this.zVt(),!this.HWt){const t=[...this.children()];t.length&&(this.HWt=[],this.JWt=new WeakMap);let s=0;for(const i of t){const t=i.B1();this.HWt.push(t),this.JWt.set(t,s),s++}}const t=this.fQ();t&&t.VVt()}zVt(){if(-1!==this.sVt)return;const t=[...this.mQ()];this.sVt=t.length;for(const s of t)s.zVt();const s=[...this.children()];for(const t of s)t.zVt()}rVt(){this.HWt&&(this.HWt.length=0),this.HWt=null,this.JWt=null;const t=this.fQ();t&&t.rVt(),this.sVt=-1}GQ(){return null!==this.fQ()}fQ(){const t=this.tVt;return null!==t?t.fQ():null}pQ(){let t=this;for(;t.GQ();)t=t.fQ();return t}*mQ(){let t=this.fQ();for(;t;)yield t,t=t.fQ()}uWt(t){return this.fet().includes(t)}mst(){const t=this.tVt;return null!==t&&t.mst()}fet(){const t=this.tVt;return null!==t?t.fet():_G}children(){return this.fet()}*vQ(){for(const t of this.children())yield t,yield*t.vQ()}yQ(){return this.fet().length}MFt(){return[...this.vQ()].length}SQ(t){const s=this.fet();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}pWt(t){if(!t)return NaN;const s=this.fet();if(!s)return NaN;for(let i=0;i<s.length;i++)if(t===s[i])return i;return NaN}jVt(t){this.tVt||(this.tVt=dG.jn(dG.pet,this)),t&&this.tVt.KWt(t)}Kft(){return this.tVt}nVt(){this.tVt&&(this.tVt.qn(),this.tVt=null)}kVt(t){t?(t.jVt(null),this.jVt(t)):(this.tVt&&this.tVt.KWt(null),this.mst()||this.nVt())}NVt(t){if(!this.GQ())return!1;const s=this.fQ();return s===t||s.NVt(t)}LVt(t){if(this.uWt(t))return!0;for(const s of this.fet())if(s.LVt(t))return!0;return!1}BVt(t){this.tVt.fet().push(t)}$Vt(t){const s=this.tVt.fet(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.GQ()||this.nVt(),t.mst()||t.nVt()}gWt(){const t=i_.get(this);return t?t.aVt:null}qVt(){const t=i_.get(this);return t?t.lVt:NaN}pst(){const t=e_.get(this);return dG.te(t)?t:NaN}HVt(t){e_.set(this,t)}JVt(){this.tN(524288,!0),this.uVt()}uVt(){if(!CG)return;const t=this.Bc.Dx();let s;this.ZUt&&t.Uv(this.ZUt),s=524288&this.KD?t.Tv()||"<point>":t.bv()||"<default>",this.ZUt=t.kv(s,this.iZ(),this.XUt,this.SM(),this.YVt()?1:0,0)}Xtt(){return this.ZUt}Z7(){return this.Kx===xG}eM(t){if((t|=0)<0||t>31)throw new RangeError("invalid blend mode");this.iZ()!==t&&(this.KD=-2080374785&this.KD|t<<26,this.uVt())}iZ(){return(2080374784&this.KD)>>26}Yq(t,s){const i=s&&this.OUt!==t;i&&this.P7(),this._bt.p$t(this,this.OUt,t),this.OUt=t,i&&this.XVt(),0!==this.SM()&&this.OUt.A7()}jq(){return this.OUt}Tq(){return this.jq().Tq()}O7(t){this.DUt=0|t}qq(){return this.OUt.V9(),this.DUt}H9(t){this.LUt=0|t}P2(){return this.OUt.j9(),this.LUt}E6(){return this.DUt}tN(t,s){s?this.KD|=t:this.KD&=~t}CX(){return!!(1&this.KD)}GX(t){if(this.tN(1,t),this.mst())for(const s of this.fet())s.UQ()&&s.GX(t)}lQ(){return!!(8&this.KD)}uQ(t){t=!!t,this.lQ()!==t&&(this.tN(8,t),t?this.EK():this.ZVt())}KVt(t,s){if(this.tN(32,t),this.YUt&&this.YUt.clear(),s.trim()){this.YUt||(this.YUt=new Set);for(const t of s.split(" "))t&&this.YUt.add(t.toLowerCase())}else this.YUt=null}QVt(t){const s=!!(32&this.KD),i=this.YUt;if(!t||!i)return!s;for(const e of i)if(t.has(e))return s;return!s}EK(){if(this.KD|=65554,this._bt.c$t(!0),this.Bc.Zq(),this.OUt.f7()&&(this.jK(this.VUt,this.zUt,!0),this.KD&=-3,this.XVt()),4&this.KD&&this.di.Sf().dispatchEvent(SG),null!==this.tVt){const t=this.tVt.fet();for(let s=0,i=t.length;s<i;++s)t[s].EK()}}jK(t,s,i){const e=this.pM(),n=this.yM(),r=this.My(),h=this.Gy(),o=this.WY();t.ja(e-this.WUt*r,n-this.UUt*h,r,h),i&&this.KQ()&&this.tzt(t),0===o?s.Xl(t):(t.offset(-e,-n),s.Kl(t,this.CAt(),this._At()),s.offset(e,n),s.Ql(t)),t.normalize()}szt(){const t=this.KD;2&t&&(this.jK(this.VUt,this.zUt,!0),this.KD=-3&t)}qK(){return this.szt(),this.VUt}JK(){return this.szt(),this.zUt}izt(t){const s=this.pM(),i=this.yM(),e=Math.round(s)-s,n=Math.round(i)-i;return 0===e&&0===n?t:(wG.S(t),wG.offset(e,n),wG)}ezt(t){this.VUt.S(t),this.zUt.Xl(this.VUt),this.KD&=-3,this.d$t(),this.XVt()}nzt(t){this.tN(4,t)}rzt(){return!!(4&this.KD)}ktt(t,s,i){return s&&0!==this.Vtt()?this.Wtt(this.jq().$tt()):0===this.SM()||i?t.Ml(this.qK()):this.hzt()}hzt(){const t=this.jq(),s=this.VK();return!(s>=t.p9())&&(t.f9(s,yG),yG.Ml(this.qK()))}Wtt(t){const s=this.qK(),i=s.Qa(),e=s.sl(),n=s.tl(),r=s.il(),h=this.VK(),o=h+this.Vtt();return t.aS(i,n,h,e,r,o)}XK(){const t=this.jq();if(t._9())return this.Wtt(t.$tt());{const s=t.Tq();return this.ktt(t.hZ(),s.Ntt(),s.gX())}}Htt(t){this.tN(1048576,t)}qtt(t){this.tN(2097152,t)}ozt(){return!!(1048576&this.KD)}azt(){return!!(2097152&this.KD)}lzt(t){(t=!!t)!==this.YVt()&&(this.tN(16777216,t),this.uVt())}YVt(){return!!(16777216&this.KD)}uzt(t){this.HUt=t,this.czt(),this.KQ()&&(this.iVt.fzt=null)}dzt(){return this.HUt}pzt(){return null!==this.HUt||this.KQ()}mzt(){return this.gzt(this.My(),this.Gy(),this.WY(),this.CAt(),this._At())}yzt(t,s,i){let e=0,n=1;return 0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.gzt(t,s,i,e,n)}gzt(t,s,i,e,n){let r=this.JUt;null===r&&(r={eVt:dG.jn(dG.lu),width:NaN,height:NaN,angle:NaN},this.JUt=r);const h=r.eVt;if(r.width===t&&r.height===s&&r.angle===i)return h;const o=this.HUt;if(this.KQ()){const i=this.DK(),r=this.kK(),a=this.QQ();let l=this.iVt.fzt;l||(o?(bG.S(o),bG.offset(i,r)):bG.yu(),l=a.dT(bG),this.iVt.fzt=l),a.pT(l,h),h.offset(-i,-r),h.bu(t,s,e,n)}else o?(h.S(o),h.bu(t,s,e,n)):h.vu(this.JK(),-this.pM(),-this.yM());return r.width=t,r.height=s,r.angle=i,h}czt(){this.wzt(!0);const t=this.JUt;null!==t&&(t.width=NaN)}qQ(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.B1().QJ().WJ())throw new Error("object does not support mesh");this.JQ(),this.iVt={Szt:dG.jn(dG.Xw.AM,t,s),vzt:dG.jn(dG.Xw.AM,t,s),fzt:null}}KQ(){return null!==this.iVt}QQ(){if(!this.KQ())throw new Error("no mesh");return this.iVt.Szt}bzt(){if(!this.KQ())throw new Error("no mesh");return this.iVt.vzt}xzt(t){this.tN(65536,t)}Mzt(){return!!(65536&this.KD)}wzt(t){this.tN(131072,t)}Tzt(){return!!(131072&this.KD)}tzt(t){const s=this.iVt.Szt,i=Math.min(s.ZM(),0),e=Math.min(s.KM(),0),n=Math.max(s.QM(),1),r=Math.max(s.tT(),1),h=t.width(),o=t.height();t.offsetLeft(i*h),t.offsetTop(e*o),t.ll((n-1)*h),t.ul((r-1)*o),this.yG=s.sT()}JQ(){this.iVt&&(this.iVt.Szt.qn(),this.iVt.vzt.qn(),this.iVt=null,this.czt())}XQ(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!GG.has(e))throw new Error("invalid mode");const n="relative"===e;let r=i.x,h=i.y;const o=i.Yk;let a="number"==typeof i.t0?i.t0:n?0:-1,l="number"==typeof i.s0?i.s0:n?0:-1;if(!this.KQ())return!1;const u=this.QQ(),c=u.eT(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.SM()!==o&&(c.vM(o),f=!0),n&&(r+=t/(u.qM()-1),h+=s/(u.HM()-1)),-1!==a||n?(n&&(a+=t/(u.qM()-1)),a=dG.Zn(a,0,1)):a=c.bM(),-1!==l||n?(n&&(l+=s/(u.HM()-1)),l=dG.Zn(l,0,1)):l=c.MM(),c.pM()===r&&c.yM()===h&&c.bM()===a&&c.MM()===l?f:(c.mM(r),c.wM(h),c.xM(a),c.TM(l),this.czt(),!0)}Z$t(){return this.di.Z$t()}cQ(t,s){return!!this.qK().Gl(t,s)&&!!this.JK().Gl(t,s)&&(this.Z$t()?this.di.a0().WLt(t,s):!this.pzt()||this.mzt().Gl(t-this.pM(),s-this.yM()))}Gzt(){return!!(16&this.KD)}d$t(){if(!this.Gzt()||!this.lQ()||256&this.KD)return;const t=this.qK(),s=this._bt.u$t(),i=this.jUt;if(yG.set(s.H6(t.Qa()),s.J6(t.tl()),s.H6(t.sl()),s.J6(t.il())),i.equals(yG))return;const e=this.di;i===TG?(s.Y6(e,null,yG),this.jUt=dG.jn(dG.Rect,yG)):(s.Y6(e,i,yG),i.S(yG)),this.KD&=-17}_zt(){this.KD|=16}ZVt(){const t=this.jUt;t!==TG&&(this._bt.u$t().Y6(this.di,t,null),this.jUt=TG)}XVt(){const t=this.jq();if(!t.f7()||256&this.KD)return;const s=t.Q7(),i=this.qK(),e=this.qUt;if(yG.set(s.H6(i.Qa()),s.J6(i.tl()),s.H6(i.sl()),s.J6(i.il())),e.equals(yG))return;const n=this.di;e===MG?(s.Y6(n,null,yG),this.qUt=dG.jn(dG.Rect,yG)):(s.Y6(n,e,yG),e.S(yG)),t.t9()}P7(){const t=this.qUt;t!==MG&&(this.jq().Q7().Y6(this.di,t,null),this.qUt=MG)}z9(){return this.qUt}sQ(){const t=this.di,s=this.OUt,i=s.Jq();i.length&&i.at(-1)===t||(s.E7(t,!1),s._7(t,!1),this.Bc.Zq())}eQ(){const t=this.di,s=this.OUt,i=s.Jq();i.length&&i[0]===t||(s.E7(t,!1),s.I7(t,!1),this.Bc.Zq())}rQ(t){const s=this.di,i=this.OUt;if(i.Tq()!==t.Tq())throw new Error("layer from different layout");t!==i&&(i.E7(s,!0),this.Yq(t),t._7(s,!0),this.Bc.Zq())}oQ(t,s){const i=this.di;let e=!1;const n=this.OUt;if(t.RZ()===i.RZ())return;const r=t.zq();if(!r)throw new Error("expected world instance");const h=r.jq();n.Rz()!==h.Rz()&&(n.E7(i,!0),this.Yq(h),h._7(i,!0),e=!0);const o=h.X9(i,t,!!s);(e||o)&&this.Bc.Zq()}CK(){return this.KUt}Czt(t){this.tN(64,t)}ett(){return!!(64&this.KD)}cst(t,s=null){const i={x:this.pM(),y:this.yM(),w:this.My(),h:this.Gy(),l:this.jq().H7(),zi:this.qq()};0!==this.SM()&&(i.ze=this.SM()),0!==this.WY()&&(i.a=this.dVt()),this.Z7()||(i.c=this.Kx.toJSON()),.5!==this.DK()&&(i.oX=this.DK()),.5!==this.kK()&&(i.oY=this.kK()),0!==this.iZ()&&(i.bm=this.iZ()),this.CX()||(i.v=this.CX()),this.lQ()||(i.ce=this.lQ()),this.rzt()&&(i.be=this.rzt()),this.KUt&&(i.fx=this.KUt.cst());const e=!!(32&this.KD);return e&&(i.sfi=e),this.YUt&&(i.sft=[...this.YUt].join(" ")),this.tVt&&"visual-state"!==t&&(i.sgi=this.tVt.cst(t,s),i_.has(this)&&(i.sgcd=i_.get(this).aVt,i.sgzid=i_.get(this).lVt)),this.KQ()&&(i.mesh=this.QQ().CM()),i}pUt(){return{x:this.Pa,y:this.Ra,z:this.Qx,w:this.NUt,h:this.kUt,a:this.Io,sgi:this.Kft()?this.Kft().lUt():null}}bUt(t){t&&(this.Pa=t.x,this.Ra=t.y,this.Qx=t.z,this.NUt=t.w,this.kUt=t.h,this.Io=t.a,t.sgi&&this.Kft()&&this.Kft().fst(t.sgi),this.yVt(),this.EK())}M$t(){this.rVt(),this.UVt(),this.jVt(null),this.tVt&&this.tVt.gUt(this.HWt,this.JWt)}ynt(t){"visual-state"!==t&&this.UVt()}Snt(t,s="full",i=null){if(t.hasOwnProperty("sgi")&&"visual-state"!==s){if(256&this.KD)return;this.tVt.Snt(t.sgi,i)}}LWt(t,s="full",i=null){if("visual-state"!==s)if(256&this.KD)this.rVt();else{if(t.hasOwnProperty("sgi"))this.tVt.gUt(null,null,t.sgi,i);else if(i?.lOt&&this.HWt)for(const t of this.HWt)t.L2()||this.Bc.TZ(t);this.rVt(),this.EK()}}fst(t,s,i=null){if(CG=!1,this.mM(t.x),this.wM(t.y),this.hy(t.w),this.oy(t.h),this.O7(t.zi),this.vM(t.hasOwnProperty("ze")?t.ze:0),this.$Y(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?vG.Sa(t.c):t.hasOwnProperty("o")?(vG.No(this.Kx),vG.a=t.o):vG.Eo(1,1,1,1),this.hVt(vG),this.LK(t.hasOwnProperty("oX")?t.oX:.5),this.BK(t.hasOwnProperty("oY")?t.oY:.5),this.eM(t.hasOwnProperty("bm")?t.bm:0),this.GX(!t.hasOwnProperty("v")||t.v),this.uQ(!t.hasOwnProperty("ce")||t.ce),this.nzt(!!t.hasOwnProperty("be")&&t.be),this.KVt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.KUt&&t.hasOwnProperty("fx")&&this.KUt.fst(t.fx),t.hasOwnProperty("sgi")&&"visual-state"!==s){this.jVt(null);const s=this.tVt,i=t.sgi;s.fst(i),s.gUt(this.HWt,this.JWt),this.Izt(t.sgcd,t.sgzid)}if(t.hasOwnProperty("mesh")){const s=t.mesh;this.qQ(s.cols,s.rows),this.QQ().IM(s)}else this.JQ();this.EK(),CG=!0,this.uVt(),"visual-state"!==s&&this.Bc.Ezt(this.B1(),t)}Izt(t,s){t&&dG.te(s)&&i_.set(this,{aVt:t,lVt:s})}}}{const n_=self.Cs;n_.iBt=class extends n_.Vn{constructor(t,s){super();const i=t.yH(),e=i.DIt(s[1]);i.Pzt().PNt(e),this.Bc=i,this._bt=t,this.mNt=n_.MJ.M0(e),this.tLt=null,this.Rzt=null,this.Fkt=e.Instance,this.d8=s[2],this.Yn=s[0],this.SEt=this.Bc.iTt(s[3]);const n=this.mNt.dRt();if(n<2&&(this.tLt=n_.jn(e.SBt,this),!(this.tLt instanceof n_.pNt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(n_.MJ.LDt(this,n),n>=2){const t=e.SBt??globalThis.X2;if(this.Rzt=new t,!(this.Rzt instanceof globalThis.X2))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.Rzt=new globalThis.b0;n_.MJ.NDt(n),this.RDt()}static e_(t,s){return n_.jn(n_.iBt,t,s)}qn(){this.Bc=null,this.mNt=null,this.tLt&&(this.tLt.qn(),this.tLt=null),this.Fkt=null}aAt(){return this.tLt}RDt(){this.tLt?this.tLt.RDt():this.Rzt&&this.Rzt.n2()}yH(){return this.Bc}wZ(){return this._bt}m0(){return this.mNt}$Bt(){return this.Fkt}Pc(){return this.Yn}H7(){return this.d8}y0(){return this.Rzt}iTt(){return this.SEt}}}{const r_=self.Cs,h_=self.d0;r_.L$t=class extends r_.Vn{constructor(t){super(),this.Bc=t.runtime,this.ZEt=t.g0,this.mNt=this.ZEt.m0(),this.di=t.S0,this.Vw=t.index,this.I$t=null,this.E$t=null,this.mNt._7(this.di)}qn(){this.E$t&&(this.E$t.MZ(),this.E$t=null),this.mNt.E7(this.di),this.I$t&&(this.I$t.qn(),this.I$t=null),this.Bc=null,this.ZEt=null,this.mNt=null,this.di=null}LBt(t){if(this.I$t)throw new Error("already got sdk instance");if(this.m0().dRt()<2){if(this.I$t=r_.jn(this.ZEt.$Bt(),this,t),!(this.I$t instanceof r_.gNt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const s=this.m0().ADt();this.DDt(s.Instance,t)}}a0(){return this.I$t??this.E$t}v0(){return this.di}yH(){return this.Bc}w0(){return this.ZEt}m0(){return this.mNt}ipt(){return this.Vw}SNt(){this.I$t?this.I$t.SNt():this.E$t.Q2()}MNt(t,s){this.I$t&&this.I$t.MNt(t,s)}DWt(){return this.I$t?this.I$t.bLt():this.E$t.mK()}CM(t="full"){return this.I$t?this.I$t.CM(t):this.E$t.gK(t)}IM(t,s="full"){if(this.I$t)return this.I$t.IM(t,s);this.E$t.yK(t,s)}static Azt(t,s,i){const e=globalThis.Z2;let n,r;n=s instanceof e?t.iX(s):s.wNt(),r=i instanceof e?t.iX(i):i.wNt();const h=n.v0(),o=r.v0(),a=h.wZ().Rz(),l=o.wZ().Rz();if(a!==l)return a-l;const u=h.xWt(),c=o.xWt();return u!==c?u-c:n.ipt()-r.ipt()}DDt(t,s){const i=h_,e=t??this.I$t.ADt(),n=e||i,r=this.m0().dRt();if(r_.MJ.LDt(this,r),r_.MJ.RNt(s),this.E$t=new n,r_.MJ.ANt(),r_.MJ.NDt(r),e&&!(this.E$t instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);return this.E$t}eLt(){return this.E$t||this.DDt()}GLt(){return!!this.E$t}}}{const o_=self.Cs;o_.Z8=class extends o_.Vn{constructor(t,s){super(),this.DM=t,this.Fzt=[],this.Ozt=[],this.Dzt=new Map,this.Lzt=[],this.Nzt=[],this.kzt=new Set,this.Tx=!0;for(const t of s){const s=o_.jn(o_.Bzt,this,t,this.Fzt.length);this.Fzt.push(s),this.Dzt.set(s.Pc().toLowerCase(),s),t.length>=3&&this.Lzt.push(this.$zt(s,t[2]))}this.yH().Wzt(this)}qn(){this.yH().Uzt(this);for(const t of this.Nzt)t.qn();o_.bh(this.Nzt),o_.bh(this.Fzt),o_.bh(this.Ozt),this.Dzt.clear(),o_.bh(this.Lzt),this.DM=null}Vzt(t){this.kzt.add(t)}zzt(t){this.kzt.delete(t)}jzt(t){t.pv()&&(this.Nzt=this.Fzt.map(t=>{const s=t.rC();return s.T$()>0?o_.jn(o_.Xw.x$,s):null}),this.qzt());for(const s of this.kzt)s.jzt(t)}OBt(t){if(t.length){this.Fzt=t.concat(this.Fzt);for(const s of t)this.Dzt.set(s.Pc().toLowerCase(),s);for(let t=0,s=this.Fzt.length;t<s;++t)this.Fzt[t].U7(t)}}$zt(t,s){t.Hzt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=o_.jn(o_.To);e.Sa(s),i[t]=e}}return i}JM(){return this.DM}yH(){return this.DM.yH()}_0(){o_.bh(this.Ozt);let t=!0;for(const s of this.Fzt)s.x_t()&&(this.Ozt.push(s),s.rC().Wx()||(t=!1));this.Tx=t}DY(){return this.Fzt}JBt(){return this.Fzt.length>0}zft(t){return this.Dzt.get(t.toLowerCase())||null}Jzt(t){if((t=Math.floor(+t))<0||t>=this.Fzt.length)throw new RangeError("invalid effect type index");return this.Fzt[t]}T0(t){return this.Jzt(t).x_t()}G0(t,s){this.Jzt(t).Hzt(s)}K7(){return this.Ozt}ett(){return this.Ozt.length>0}Wx(){return this.Tx}Vft(t){return this.Lzt[t]}s7(t){return t<this.Nzt.length?this.Nzt[t]:this.Lzt[t]}C0(t,s){if(t<0||t>=this.Lzt.length)return null;const i=this.Lzt[t];return s<0||s>=i.length?null:i[s]}I0(t,s,i){if(t<0||t>=this.Lzt.length)return!1;const e=this.Lzt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof o_.To){if(n.qo(i))return!1;n.No(i)}else{if(n===i)return!1;e[s]=i}return t<this.Nzt.length&&this.Nzt[t].E$(s,i),!0}qzt(){const t=this.Lzt,s=this.Nzt;for(let i=0,e=Math.min(t.length,s.length);i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.E$(t,n[t])}}static Yzt(t){return t&&t instanceof o_.To?{t:"color",v:t.toJSON()}:t}static Xzt(t){if(null===t)return NaN;if("object"==typeof t){if("color"===t.t){const s=o_.jn(o_.To);return s.Sa(t.v),s}throw new Error("invalid effect parameter type")}return t}static Zzt(t){return t.map(o_.Z8.Yzt)}static Kzt(t){return t.map(o_.Z8.Xzt)}CM(){return this.Fzt.map(t=>({name:t.Pc(),active:t.x_t(),params:o_.Z8.Zzt(this.Lzt[t.Rz()])}))}IM(t){for(const s of t){const t=this.zft(s.name);t&&(t.Hzt(s.active),this.Lzt[t.Rz()]=o_.Z8.Kzt(s.params))}this._0(),this.qzt()}}}{const a_=self.Cs;a_.Bzt=class extends a_.Vn{constructor(t,s,i){super(),this.X8=t,this.Wc=s[0],this.Yn=s[1],this.Vw=i,this.Yx=null,this.Bf=!0}qn(){this.X8=null,this.Yx=null}FBt(t){const s=a_.jn(a_.Bzt,t,[this.Wc,this.Yn],-1);return s.Yx=this.Yx,s.Bf=this.Bf,s}jzt(t){const s=t.vv(this.Wc);if(!s)throw new Error("failed to find shader program '"+this.Wc+"'");this.Yx=s}OY(){return this.X8}Pc(){return this.Yn}U7(t){this.Vw=t}Rz(){return this.Vw}JM(){return this.X8.JM()}yH(){return this.X8.yH()}Hzt(t){this.Bf=!!t}x_t(){return this.Bf}rC(){return this.Yx}Qzt(){const t=[];for(let s=0,i=this.Yx.hC();s<i;++s){const i=this.Yx.oC(s);if("float"===i||"percent"===i)t.push(0);else{if("color"!==i)throw new TypeError("unknown effect parameter type");t.push(a_.jn(a_.To,1,1,1,1))}}return t}}}{const l_=self.Cs;l_.QUt=class extends l_.Vn{constructor(t,s){super(),this.di=t,this.tjt=s,this.X8=t.wZ().OY(),this.sjt=!0,this.e7=!0,this.ijt=!1,this.ejt=!1,this.njt=!1,this.rjt=!1,this.Cz=l_.jn(l_.Xw.GU,t.yH().Dq().K8(),{pU:(t,s)=>{const i=s.Sz(),e=i.zq();t.nM(e.Q8()),t.ib(e.VK()),i.uT(t),t.ib(0)},mU:t=>{const s=t.LLt(),[i,e]=t.DLt();return{fz:s,dz:i,pz:e}},gU:t=>this.s7(t)}),this.hjt=[],this.Ozt=[],this.Tx=!0,this.Lzt=[],this.Nzt=[],this.jzt(t.yH().Dx());for(let t=0,s=this.X8.DY().length;t<s;++t)this.hjt.push(!0);this._0(),this.X8.Vzt(this)}qn(){this.X8.zzt(this);for(const t of this.Nzt)t&&t.qn();l_.bh(this.Nzt),this.Cz.qn(),this.Cz=null,l_.bh(this.hjt),l_.bh(this.Ozt),l_.bh(this.Lzt),this.di=null,this.X8=null}jzt(t){t.pv()&&(this.Nzt=this.X8.DY().map(t=>{const s=t.rC();return s.T$()>0?l_.jn(l_.Xw.x$,s):null}))}oVt(t){let s=0;for(const i of t)this.Lzt.push(this.$zt(s,i)),++s;this.qzt(),this._0()}$zt(t,s){this.hjt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=l_.jn(l_.To);e.Sa(s),i[t]=e}}return i}V$t(){for(const t of this.X8.DY())this.Lzt.push(t.Qzt());this.qzt()}JM(){return this.DM}OY(){return this.X8}Pz(){return this.X7(),this.Cz}yH(){return this.di.yH()}_0(){l_.bh(this.Ozt);const t=this.tjt,s=this.X8.DY(),i=this.Ozt,e=this.hjt;let n=!0;for(let t=0,r=s.length;t<r;++t)if(e[t]){const e=s[t];i.push(e),e.rC().Wx()||(n=!1)}this.Tx=n,t.Czt(!!i.length),this.sjt=!0}X7(){const t=this.di,s=this.tjt,i=s.Z7(),e=t.QJ().NJ(),n=0!==s.WY()||0!==s.jq().WY()||s.My()<0||s.Gy()<0,r=t.BLt(),h=t.$x();(this.sjt||i!==this.e7||e!==this.ijt||n!==this.ejt||r!==this.njt||h!==this.rjt||this.Cz.yV())&&(this.Cz.wV(this.Ozt.map(t=>t.rC()),{wU:this.Ozt.map(t=>t.Rz()),SU:!i||h,bU:e,xU:r,MU:n}),this.sjt=!1,this.e7=i,this.ijt=e,this.ejt=n,this.njt=r,this.rjt=h)}K7(){return this.Ozt}Vft(t){return this.Lzt[t]}s7(t){return t<this.Nzt.length?this.Nzt[t]:this.Lzt[t]}C0(t,s){if(t<0||t>=this.Lzt.length)return null;const i=this.Lzt[t];return s<0||s>=i.length?null:i[s]}I0(t,s,i){if(t<0||t>=this.Lzt.length)return!1;const e=this.Lzt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof l_.To){if(n.qo(i))return!1;n.No(i)}else{if(n===i)return!1;e[s]=i}return t<this.Nzt.length&&this.Nzt[t].E$(s,i),!0}qzt(){const t=this.Lzt,s=this.Nzt;for(let i=0,e=s.length;i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.E$(t,n[t])}}Wx(){return this.Tx}ojt(){return this.Ozt.some(t=>t.rC().zx())}T0(t){return this.hjt[t]}G0(t,s){this.hjt[t]=!!s}DY(){return this.X8.DY()}cst(){return this.X8.DY().map(t=>({name:t.Pc(),active:this.hjt[t.Rz()],params:l_.Z8.Zzt(this.Lzt[t.Rz()])}))}fst(t){for(const s of t){const t=this.X8.zft(s.name);t&&(this.hjt[t.Rz()]=s.active,this.Lzt[t.Rz()]=l_.Z8.Kzt(s.params))}this._0(),this.qzt()}}}{const u_=self.Cs,c_=[],f_=[],d_=[],p_=u_.jn(u_.lu),m_=u_.jn(u_.lu),g_=u_.jn(u_.El),y_=u_.jn(u_.Rect),w_=u_.jn(u_.Rect);let S_=null,v_=null,b_=null;u_.ajt=class extends u_.Vn{constructor(t){super(),this.Bc=t,this.ljt=0,this.ujt=0,this.cjt=[],this.fjt=0,this.djt=0,this.pjt=0,this.mjt=0,this.gjt=new self.NH(this)}qn(){this.Bc=null}yH(){return this.Bc}Nz(){return this.gjt}yjt(){this.djt=this.fjt,this.fjt=0,this.mjt=this.pjt,this.pjt=0}wjt(){return this.djt}Sjt(){return this.mjt}vjt(t,s){const i=t.zq(),e=s.zq();i&&e&&i.lQ()&&e.lQ()&&this.cjt.push([t,s])}uFt(t,s,i){for(const[e,n]of this.cjt){let r=null;if(t===e)r=n;else{if(t!==n)continue;r=e}r.SFt(s)&&(i.includes(r)||i.push(r))}}cFt(t,s){if(!this.cjt.length)return!1;for(const[i,e]of this.cjt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}bjt(){u_.bh(this.cjt)}BH(t,s){if(!t||!s||t===s)return!1;const i=t.zq(),e=s.zq();if(!i.lQ()||!e.lQ())return!1;this.fjt++;const n=i.jq(),r=e.jq();return n.k9(r)?this.xjt(i,e):this.Mjt(i,e)}xjt(t,s){if(!t.qK().Ml(s.qK()))return!1;if(this.pjt++,!t.JK().su(s.JK()))return!1;if(t.Z$t()&&s.Z$t())return!1;if(t.Z$t())return this.Tjt(t,s);if(s.Z$t())return this.Tjt(s,t);if(!t.pzt()&&!s.pzt())return!0;const i=t.mzt(),e=s.mzt();return i.xu(e,s.pM()-t.pM(),s.yM()-t.yM())}Mjt(t,s){const i=t.Z$t(),e=s.Z$t();if(i&&!e)return this.Gjt(t,s);if(e&&!i)return this.Gjt(s,t);if(e||i)return!1;{const i=t.jq(),e=s.jq();p_.S(t.mzt()),m_.S(s.mzt());const n=p_.pu();for(let s=0,e=n.length;s<e;s+=2){const e=s+1,r=n[s],h=n[e],[o,a]=i.uZ(r+t.pM(),h+t.yM());n[s]=o,n[e]=a}const r=m_.pu();for(let t=0,i=r.length;t<i;t+=2){const i=t+1,n=r[t],h=r[i],[o,a]=e.uZ(n+s.pM(),h+s.yM());r[t]=o,r[i]=a}return p_.wu(),m_.wu(),this.pjt++,p_.xu(m_,0,0)}}Gjt(t,s){const i=t.jq(),e=s.jq();S_||(S_=u_.jn(u_.lu)),v_||(v_=u_.jn(u_.Rect)),b_||(b_=u_.jn(u_.El));const n=s.pM(),r=s.yM(),[h,o]=e.uZ(n,r),[a,l]=i.aZ(h,o),u=a-n,c=l-r;if(v_.S(s.qK()),v_.offset(u,c),!t.qK().Ml(v_))return!1;if(b_.S(s.JK()),b_.offset(u,c),this.pjt++,!t.JK().su(b_))return!1;S_.S(s.mzt());const f=S_.pu();for(let t=0,s=f.length;t<s;t+=2){const s=t+1;f[t]+=u,f[s]+=c}return S_.wu(),this.Tjt(t,s,a,l,S_,v_,b_)}Tjt(t,s,i,e,n,r,h){const o=void 0!==r?r:s.qK(),a=t.pM(),l=t.yM(),u=t.B1().a0(),c=void 0!==i?i:s.pM(),f=void 0!==e?e:s.yM(),d=s.pzt(),p=void 0!==h?h:s.JK(),m=f_;u._jt(o,m);for(let t=0,i=m.length;t<i;++t){const i=m[t],e=i.Cjt();if(this.fjt++,o.Tl(e,a,l)&&(g_.Xl(e),g_.offset(a,l),g_.su(p)))if(d){const t=void 0!==n?n:s.mzt();let r=c,h=f;void 0!==n&&(r=s.pM(),h=s.yM());const o=i.Ijt();if(o){if(this.pjt++,o.xu(t,r-(a+e.Qa()),h-(l+e.tl())))return u_.bh(m),!0}else if(p_.vu(g_,0,0),p_.xu(t,r,h))return u_.bh(m),!0}else{const t=i.Ijt();if(!t)return u_.bh(m),!0;if(p_.vu(p,0,0),t.xu(p_,-(a+e.Qa()),-(l+e.tl())))return u_.bh(m),!0}}return u_.bh(m),!1}Ejt(t,s,i){const e=t.cY(),n=this.Bc.Sj();if(!n)throw new Error("cannot call outside event");const r=n.sxt(),h=new u_.Pjt;if(e.kbt()){i||(e.jbt(!1),u_.bh(e.qbt())),r&&u_.bh(e.Hbt());for(const n of t.uY()){const t=n.zq(),o=t.jq();let a=!1;if(h.EX(o)&&t.XK()&&(a=s.some(([s,i])=>{const[e,n]=h.aZ(o,s,i,t.VK());return t.cQ(e,n)})),a){if(i)return!1;e.Vbt(n)}else r&&e.zbt(n)}}else{let t,o=!1;r&&!n.jCt(this.Bc.HMt())?this.Bc.dAt()&&!e.Hbt().length&&e.qbt().length?t=e.qbt():(t=e.Hbt(),o=!0):t=e.qbt();let a=0;for(let n=0,l=t.length;n<l;++n){const l=t[n],u=l.zq(),c=u.jq();let f=!1;if(h.EX(c)&&u.XK()&&(f=s.some(([t,s])=>{const[i,e]=h.aZ(c,t,s,u.VK());return u.cQ(i,e)})),f){if(i)return!1;o?e.Vbt(l):t[a++]=l}else o?t[a++]=l:r&&e.zbt(l)}i||(t.length=a)}return t._It(),h.qn(),!!i||e.Bbt()}Rjt(t,s){if(!t)return!0;for(const i of s.m$t())if(!t.k9(i))return!1;return!0}fAt(t,s,i,e){if(s.B7())for(const n of s.PY())this.Rjt(t,n)?(n.f$t(),n.u$t().X6(i,e)):u_.Fn(e,n.uY());else this.Rjt(t,s)?(s.f$t(),s.u$t().X6(i,e)):u_.Fn(e,s.uY())}YH(t,s,i,e){for(const n of s)this.fAt(t,n,i,e)}Ajt(t,s,i){const e=this.Bc.ONt();e&&this.YH(t,e.jnt(),s,i)}Fjt(t,s,i){const e=this.Bc.DNt();e&&this.YH(t,e.jnt(),s,i)}QVt(t,s){return t.tWt()&&(!s||s.zq().QVt(t.SRt().get("solidTags")))}UH(t){const s=t.zq();this.Ajt(s.jq(),s.qK(),c_);for(const s of c_)if(this.QVt(s,t)&&this.BH(t,s))return u_.bh(c_),s;return u_.bh(c_),null}Ojt(t,s){this.Ajt(null,t,c_);for(const i of c_)if(this.QVt(i,s)&&this.Djt(t,i))return u_.bh(c_),i;return u_.bh(c_),null}Ljt(t,s){let i=null;s&&(i=d_,u_.bh(i));const e=t.zq();this.Fjt(e.jq(),e.qK(),c_);for(const e of c_)if(e.iWt()&&this.BH(t,e)){if(!s)return u_.bh(c_),e;i.push(e)}return u_.bh(c_),i}Njt(t,s,i,e,n){e=e||50;const r=t.zq(),h=r.pM(),o=r.yM();for(let a=0;a<e;++a)if(r.PK(h+s*a,o+i*a),r.EK(),!this.BH(t,n))return!0;return r.PK(h,o),r.EK(),!1}kjt(t,s,i,e,n,r){e=e||50;const h=t.zq(),o=h.pM(),a=h.yM();let l=null,u=null;for(let c=0;c<e;++c)if(h.PK(o+s*c,a+i*c),h.EK(),!this.BH(t,l))if(l=this.UH(t),l)u=l;else if(n&&(l=r?this.BH(t,r)?r:null:this.Ljt(t),l&&(u=l)),!l)return u&&this.Bjt(t,s,i,u,16,!0),!0;return h.PK(o,a),h.EK(),!1}$jt(t,s,i,e){e=e||50;const n=t.zq(),r=n.pM(),h=n.yM();let o=null,a=null;for(let l=0;l<e;++l)for(let e=0;e<2;++e){const u=2*e-1;if(n.PK(r+s*l*u,h+i*l*u),n.EK(),!this.BH(t,o)){if(o=this.UH(t),!o)return a&&this.Bjt(t,s*u,i*u,a,16,!0),!0;a=o}}return n.PK(r,h),n.EK(),!1}Bjt(t,s,i,e,n,r){let h=2,o=!1,a=!1;const l=t.zq();let u=l.pM(),c=l.yM();for(;h<=n;){const n=1/h;h*=2,l.AK(s*n*(o?1:-1),i*n*(o?1:-1)),l.EK(),this.BH(t,e)||r&&this.UH(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.pM(),c=l.yM())}a&&(l.PK(u,c),l.EK())}Wjt(t,s=100){let i=0;const e=t.zq(),n=e.pM(),r=e.yM();let h=0,o=this.UH(t);if(!o)return!0;for(;i<=s;){let s=0,a=0;switch(h){case 0:s=0,a=-1,i++;break;case 1:s=1,a=-1;break;case 2:s=1,a=0;break;case 3:s=1,a=1;break;case 4:s=0,a=1;break;case 5:s=-1,a=1;break;case 6:s=-1,a=0;break;case 7:s=-1,a=-1}if(h=(h+1)%8,e.PK(Math.floor(n+s*i),Math.floor(r+a*i)),e.EK(),!this.BH(t,o)&&(o=this.UH(t),!o))return!0}return e.PK(n,r),e.EK(),!1}Ujt(t,s,i,e){const n=t.zq(),r=n.pM(),h=n.yM(),o=Math.max(10,u_.er(s,i,r,h)),a=u_.rr(s,i,r,h),l=e||this.UH(t);if(!l)return u_.Kn(a+Math.PI);let u=l,c=0,f=0;const d=u_.Qn(5);let p;for(p=1;p<36;++p){const r=a-p*d;if(n.PK(s+Math.cos(r)*o,i+Math.sin(r)*o),n.EK(),!this.BH(t,u)&&(u=e?null:this.UH(t),!u)){c=r;break}}for(36===p&&(c=u_.Kn(a+Math.PI)),u=l,p=1;p<36;++p){const r=a+p*d;if(n.PK(s+Math.cos(r)*o,i+Math.sin(r)*o),n.EK(),!this.BH(t,u)&&(u=e?null:this.UH(t),!u)){f=r;break}}if(36===p&&(f=u_.Kn(a+Math.PI)),n.PK(r,h),n.EK(),f===c)return f;const m=u_.hr(f,c)/2;let g;g=u_.lr(f,c)?u_.Kn(c+m+Math.PI):u_.Kn(f+m);const y=Math.cos(a),w=Math.sin(a),S=Math.cos(g),v=Math.sin(g),b=y*S+w*v,x=y-2*b*S,M=w-2*b*v;return u_.rr(0,0,x,M)}Vjt(t,s,i,e,n){if(!n)return!1;const r=n.zq();return!!r.lQ()&&(this.fjt++,y_.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!!r.qK().Ml(y_)&&(n.Z$t()?this.zjt(t,s,i,e,n,r):(this.pjt++,!!r.JK().tu(t,s,i,e)&&(!r.pzt()||r.mzt().tu(r.pM(),r.yM(),t,s,i,e)))))}zjt(t,s,i,e,n,r){const h=r.pM(),o=r.yM(),a=n.a0(),l=f_;w_.set(t,s,i,e),w_.normalize(),a._jt(w_,l);for(let n=0,r=l.length;n<r;++n){const r=l[n],a=r.Cjt();if(this.fjt++,y_.Tl(a,h,o)&&(g_.Xl(a),g_.offset(h,o),g_.tu(t,s,i,e))){const n=r.Ijt();if(!n)return u_.bh(l),!0;if(this.pjt++,n.tu(h+a.Qa(),o+a.tl(),t,s,i,e))return u_.bh(l),!0}}return u_.bh(l),!1}Djt(t,s){if(!s)return!1;const i=s.zq();if(!i.lQ())return!1;if(this.fjt++,!i.qK().Ml(t))return!1;if(s.Z$t())return this.jjt(t,s,i);if(this.pjt++,g_.Xl(t),!i.JK().su(g_))return!1;if(!i.pzt())return!0;const e=p_;e.Xl(t,i.pM(),i.yM());const n=i.mzt();return e.xu(n,0,0)}jjt(t,s,i){const e=i.pM(),n=i.yM(),r=s.a0(),h=f_;r._jt(t,h);for(let s=0,i=h.length;s<i;++s){const i=h[s],r=i.Cjt();if(this.fjt++,t.Tl(r,e,n)){const s=i.Ijt();if(!s)return u_.bh(h),!0;if(this.pjt++,p_.Xl(t,0,0),s.xu(p_,-(e+r.Qa()),-(n+r.tl())))return u_.bh(h),!0}}return u_.bh(h),!1}qjt(t,s){if(!t)return;const i=t.zq();i.lQ()&&(this.fjt++,i.qK().Ml(s.rect)&&(t.Z$t()?this.Hjt(t,i,s):(this.pjt++,i.pzt()?s.Jjt(t,i.pM(),i.yM(),i.mzt()):s.Yjt(t,i.JK()))))}Hjt(t,s,i){const e=s.pM(),n=s.yM(),r=f_;t.a0()._jt(i.rect,r);for(let h=0,o=r.length;h<o;h++){const o=r[h],a=o.Cjt();if(this.fjt++,i.rect.Tl(a,e,n)){const r=o.Ijt();this.pjt++,r?i.Jjt(t,e+a.Qa(),n+a.tl(),r):i.Xjt(t,s.pM(),s.yM(),a)}}u_.bh(r)}zH(t,s){if(t===this.ljt&&s===this.ujt)return;this.ljt=t,this.ujt=s;const i=this.Bc.k7();for(const e of i)if(e.EJ()){for(const t of e.lY())t.zq().ZVt();e.u$t().Zjt(t,s),e.c$t();for(const t of e.lY()){const s=t.zq();s._zt(),s.d$t()}}}qH(){return[this.ljt,this.ujt]}Kjt(t,s){this.ljt=t,this.ujt=s}}}{const x_=self.Cs;x_.Vkt=class extends x_.Vn{constructor(t,s){super(),this.V6=t,this.z6=s,this.j6=x_.jn(x_.Iu)}qn(){this.j6.qn(),this.j6=null}Zjt(t,s){if(!this.j6.Ru())throw new Error("grid not empty");this.V6=t,this.z6=s}q6(t,s,i){let e=this.j6.qs(t,s);return e||(i?(e=x_.jn(x_.Qjt,this,t,s),this.j6.Set(t,s,e),e):null)}H6(t){const s=Math.floor(t/this.V6);return isFinite(s)?s:0}J6(t){const s=Math.floor(t/this.z6);return isFinite(s)?s:0}Y6(t,s,i){if(s)for(let e=s.Qa(),n=s.sl();e<=n;++e)for(let n=s.tl(),r=s.il();n<=r;++n){if(i&&i.Gl(e,n))continue;const s=this.q6(e,n,!1);s&&(s.Kf(t),s.Ru()&&this.j6.Au(e,n))}if(i)for(let e=i.Qa(),n=i.sl();e<=n;++e)for(let n=i.tl(),r=i.il();n<=r;++n)s&&s.Gl(e,n)||this.q6(e,n,!0).k6(t)}X6(t,s){let i=this.H6(t.Qa());const e=this.J6(t.tl()),n=this.H6(t.sl()),r=this.J6(t.il());if(isFinite(n)&&isFinite(r))for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this.q6(i,t,!1);e&&e.W6(s)}}}}{const M_=self.Cs;M_.Qjt=class extends M_.Vn{constructor(t,s,i){super(),this.R6=t,this.Pa=s,this.Ra=i,this.A6=M_.jn(M_.Lu)}qn(){this.A6.qn(),this.A6=null,this.R6=null}Ru(){return this.A6.Ru()}k6(t){this.A6.$u(t)}Kf(t){this.A6.Au(t)}W6(t){M_.Fn(t,this.A6.Wu())}}}{const T_=self.Cs,G_=1e-6,__=2;T_.tqt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new T_.Rect,this.sqt=2,this.iqt=null,this.eqt=0,this.nqt=0,this.rqt=0,this.hqt=0,this.oqt=0,this.bt=0,this.aqt=1,this.lqt=0,this.uqt=1,this.cqt=0}fqt(){return this.sqt<1.000001}$f(){this.sqt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.sqt=2,this.iqt=null,this.eqt=0,this.nqt=0,this.rqt=0,this.hqt=0,this.oqt=0,this.bt=0,this.aqt=1,this.lqt=0,this.uqt=1,this.cqt=0,this}dqt(){if(!1===this.fqt())return;const t=this.dx*this.sqt,s=this.dy*this.sqt,i=T_.sr(t,s),e=t/i,n=s/i;this.bt=i-G_,this.hqt=this.x1+e*this.bt,this.oqt=this.y1+n*this.bt,this.eqt=Math.atan2(this.rqt,this.nqt)+Math.PI/2,this.aqt=Math.cos(this.eqt),this.lqt=Math.sin(this.eqt);const r=e*this.aqt+n*this.lqt;if(this.uqt=e-2*this.aqt*r,this.cqt=n-2*this.lqt*r,r>0){const t=Math.PI;this.eqt=T_.Kn(this.eqt+t),this.aqt=-this.aqt,this.lqt=-this.lqt}}pqt(t,s,i,e,n){const r=T_.Jr(this.x1,this.y1,this.x2,this.y2,s,i,e,n);r>=0&&r<this.sqt&&(this.sqt=r,this.iqt=t.RZ(),this.nqt=s-e,this.rqt=i-n)}Xjt(t,s,i,e){const n=s+e.Qa(),r=s+e.sl(),h=i+e.tl(),o=i+e.il();this.pqt(t,n,h,r,h),this.pqt(t,r,h,r,o),this.pqt(t,r,o,n,o),this.pqt(t,n,o,n,h)}Yjt(t,s){const i=s.Br(),e=s.$r(),n=s.Wr(),r=s.Ur(),h=s.Vr(),o=s.zr(),a=s.jr(),l=s.qr();this.pqt(t,i,e,n,r),this.pqt(t,n,r,h,o),this.pqt(t,h,o,a,l),this.pqt(t,a,l,i,e)}Jjt(t,s,i,e){const n=e.pu();for(let e=0,r=n.length;e<r;e+=2){const h=(e+2)%r,o=n[e]+s,a=n[e+1]+i,l=n[h]+s,u=n[h+1]+i;this.pqt(t,o,a,l,u)}}}}{const C_=self.Cs;C_.Pjt=class{constructor(){this.mqt=new Map}qn(){for(const t of this.mqt.values())t.gqt.Pu();this.mqt.clear()}yqt(t){let s=this.mqt.get(t);return void 0===s&&(s={IX:null,gqt:new C_.Iu},this.mqt.set(t,s)),s}EX(t){const s=this.yqt(t);return null===s.IX&&(s.IX=t.DX()),s.IX}aZ(t,s,i,e){if(0!==e)return t.aZ(s,i,e);const n=this.yqt(t);let r=n.gqt.qs(s,i);return void 0===r&&(r=t.aZ(s,i,e),n.gqt.Set(s,i,r)),r}}}{const I_=self.Cs,E_=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),P_=new Set(["high","low"]),R_=self.ls,A_=R_.ds,F_=R_.ws,O_=A_.create(),D_=300,L_=200,N_=120,k_=8,B_=I_.jn(I_.El),$_=I_.jn(I_.Rect),W_=3e3,U_=200,V_=300;I_.wqt=class extends I_.Vn{constructor(t){super(),this.Bc=t,this.Sqt=[],this.vqt=!1,this.bqt=null,this.xqt=null,this.Mqt=null,this.Tqt="high-performance",this.Gqt=!1,this._qt="auto",this.Cqt=0,this.Iqt=0,this.Eqt="",this.Pqt=0,this.Rqt=0,this.Aqt=0,this.Fqt=0,this.Oqt=0,this.Dqt=0,this.yS="normalized",this.Lqt=0,this.Nqt=1,this.kqt=1e4,this.HS=!0,this.Bqt=0,this.XU=0,this.ZU=0,this.$qt="letterbox-scale",this.Wqt="letterbox-scale",this.Uqt=0,this.Vqt=0,this.zqt=A_.create(),this.jqt="high",this.qqt=this.jqt,this.Hqt=!1,this.Jqt=[],this.Yqt=new Set,this.Xqt=self.C3_Shaders,this.Zqt=I_.jn(I_.Xw.tU,{XW:()=>[this.vtt(),this.btt()],ZW:()=>this.Kqt(),KW:t=>this.Qqt(t),getTime:()=>this.yH().$j(),QW:()=>this.yH().Zq()}),this.tHt=0,this.sHt=0,this.iHt=NaN,this.eHt=null,this.nHt=new Map,this.rHt=NaN,this.hHt=new Map,this.oHt="",this.aHt=1,this.lHt=I_.jn(I_.Rect),this.uHt="",this.cHt=null,this.fHt=null,this.dHt=0,this.pHt=0,this.mHt=-1,this.gHt=0,this.yHt=t=>this.gHt=t.progress,this.wHt=null,this.SHt={vHt:null,bHt:null,xHt:null},this.MHt=0,this.THt=0,this.GHt=0,this._Ht="fade-in",this.CHt=null,this.IHt=new Promise(t=>this.CHt=t)}EHt(t){this.Tqt=t}PHt(t){this.vqt=!!t}RHt(t){this.yS=t}AHt(){return this.yS}FHt(t){this.Lqt=t}OHt(t,s){this.Nqt=t,this.kqt=s}DHt(t){this.Gqt=!!t}LHt(t){this._qt=t}async co(t){let s=t.canvas;this.Sqt.push({canvas:s,NHt:null}),this.Bc.eK("runtime","window-resize",t=>this.kHt(t)),this.Bc.eK("runtime","fullscreenchange",t=>this.BHt(t)),this.Bc.eK("runtime","fullscreenerror",t=>this.$Ht(t)),s.addEventListener("webglcontextlost",t=>this.WHt(t)),s.addEventListener("webglcontextrestored",t=>this.UHt(t)),this.Hqt=!!t.isFullscreen,this.Eqt=t.cssDisplayMode;const i=navigator.gpu&&this.vqt;let e=!1;if(i)try{await this.VHt(!0)}catch(t){this.zHt("WebGPU",t),this.xqt=null}if(!this.Dx())try{await this.jHt(!0)}catch(t){this.zHt("WebGL",t),this.bqt=null}if(this.Dx()||(e=!0),!this.Dx()&&i)try{await this.VHt(!1)}catch(t){this.zHt("WebGPU",t),this.xqt=null}if(!this.Dx())try{await this.jHt(!1)}catch(t){this.zHt("WebGL",t),this.bqt=null}const n=this.Dx();if(!n)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");n.Kb(e),this.xqt&&(this.xqt.KL=()=>this.qHt(),this.xqt.QL=()=>this.HHt()),"normalized"===this.yS?n.uv():(n.cv(),n.av(this.Lqt)),this.rR(t.windowInnerWidth,t.windowInnerHeight,!0),await this.jzt()}zHt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async VHt(t){const s={uS:this.Nqt,cS:this.kqt};let i=!0;"no"===this._qt?i=!1:"auto"===this._qt&&(i=I_.Ks.hi);let e="nearest";this.Bc.JHt()&&"nearest"!==this.Bc.LW()&&(e="bilinear");const n={powerPreference:this.Tqt,depth:this.Bc.G9(),failIfMajorPerformanceCaveat:t,sD:this.Bc.Ett(),QO:this.Bc.JHt(),tD:e,mA:this.Bc.YHt(),iD:i};this.xqt=I_.jn(I_.Xw.eD,s),await this.xqt.e_(this.Sqt[0].canvas,n)}async jHt(t){const s={alpha:!0,powerPreference:this.Tqt,pA:"xbox-uwp-webview2"!==this.Bc.sJ(),depth:this.Bc.G9(),mA:this.Bc.YHt(),failIfMajorPerformanceCaveat:t,uS:this.Nqt,cS:this.kqt};this.Gqt&&(s.gA=1),this.bqt=I_.jn(I_.Xw.SA,this.Sqt[0].canvas,s),await this.bqt.ZS()}async XHt(){if(this.Xqt){const t=[];for(const[s,i]of Object.entries(this.Xqt)){i.src=i.ZHt;const e=I_.Xw.ED._C(this.xqt.u_());t.push(this.xqt.GF(Object.assign({t_:e,name:s},i)))}await Promise.all(t)}}async KHt(){if(this.Xqt){const t=[];for(const[s,i]of Object.entries(this.Xqt)){let e;if(i.QHt&&this.bqt.UT()>=2)i.src=i.QHt,e=I_.Xw.KG.CC();else{if(!i.tJt)throw new Error(`shader '${s}' does not support WebGL 1`);i.src=i.tJt,e=I_.Xw.KG._C()}t.push(this.bqt.GF(Object.assign({t_:e,name:s},i)))}await Promise.all(t),this.bqt._F(),this.bqt.xv()}this.bqt.UO()&&(this.eHt=I_.jn(I_.Xw.nA,this.bqt))}async jzt(){this.xqt?await this.XHt():this.bqt&&await this.KHt();const t=this.Dx();t.Xb(this.HS),t.UO()&&(this.iHt=0);for(const s of this.Bc.sJt()){for(const i of s.DY())i.jzt(t);s.jzt(t),s._0()}this.Mqt=new self.N3(this.Bc,t)}qn(){this.Bc=null,this.bqt=null,this.Sqt.length=0}tj(){return this.Bc.tj()}kHt(t){const s=this.Bc;if(s.iJt())return;const i=t.devicePixelRatio;this.tj()&&(self.devicePixelRatio=i),s.eJt(i),this.Hqt=!!t.isFullscreen,this.Eqt=t.cssDisplayMode,this.rR(t.innerWidth,t.innerHeight),s.Zq();const e=new I_.Event("window-resize");e.data=t,s.Sf().Ef(e);const n=new I_.Event("resize");n.nJt=this.cJ(),n.rJt=this.dJ(),n.hJt=this.mJ(),n.oJt=this.yJ(),s.Y5(n),this.Bc.Uq()?.ist(),s.aK()&&(s.OTt()||self.lK.aJt())&&s.IV()}BHt(t){this.Hqt=!!t.isFullscreen,this.rR(t.innerWidth,t.innerHeight,!0),this.Bc.Zq()}$Ht(t){this.Hqt=!!t.isFullscreen,this.rR(t.innerWidth,t.innerHeight,!0),this.Bc.Zq()}rR(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.Cqt===t&&this.Iqt===s&&!i)return;this.Cqt=t,this.Iqt=s;const e=this.lJt();"letterbox-scale"===e?this.uJt(t,s):"letterbox-integer-scale"===e?this.cJt(t,s):"off"===e?this.fJt(t,s):this.dJt(t,s),this.pJt(e);for(const{canvas:t}of this.Sqt)t.width=this.Aqt,t.height=this.Fqt;this.Bc.Uc("canvas","update-size",{marginLeft:this.Oqt,marginTop:this.Dqt,styleWidth:this.Pqt,styleHeight:this.Rqt,displayScale:this.N2()});const n=this.Dx();n.rR(this.Aqt,this.Fqt,!0);for(const t of this.Jqt)n.LO(t);I_.bh(this.Jqt),this.mJt();const r=this.Bc.Mq();r.zet(),r.jet()}mJt(){this.Dx().dv(this.zqt,this.vtt()/this.btt())}xtt(){return this.zqt}uJt(t,s){const i=this.Bc.wJ(),e=this.Bc.ij(),n=this.Bc.nj(),r=e/n;if(t/s>r){const i=s*r;this.Pqt=Math.round(i),this.Rqt=s,this.Oqt=Math.floor((t-this.Pqt)/2),this.Dqt=0}else{const i=t/r;this.Pqt=t,this.Rqt=Math.round(i),this.Oqt=0,this.Dqt=Math.floor((s-this.Rqt)/2)}this.Aqt=Math.round(this.Pqt*i),this.Fqt=Math.round(this.Rqt*i),this.Bc.gJt(e,n)}cJt(t,s){const i=this.Bc.wJ();1!==i&&(t+=1,s+=1);const e=this.Bc.ij(),n=this.Bc.nj(),r=e/n;let h;h=t/s>r?s*r*i/e:t/r*i/n,h>1?h=Math.floor(h):h<1&&(h=1/Math.ceil(1/h)),this.Aqt=Math.round(e*h),this.Fqt=Math.round(n*h),this.Pqt=this.Aqt/i,this.Rqt=this.Fqt/i,this.Oqt=Math.max(Math.floor((t-this.Pqt)/2),0),this.Dqt=Math.max(Math.floor((s-this.Rqt)/2),0),this.Bc.gJt(e,n)}dJt(t,s){const i=this.Bc.wJ();this.Pqt=t,this.Rqt=s,this.Aqt=Math.round(this.Pqt*i),this.Fqt=Math.round(this.Rqt*i),this.Oqt=0,this.Dqt=0;const e=this.N2();this.Bc.gJt(this.Pqt/e,this.Rqt/e)}fJt(t,s){const i=this.Bc.wJ();this.Pqt=this.Bc.m9(),this.Rqt=this.Bc.g9(),this.Aqt=Math.round(this.Pqt*i),this.Fqt=Math.round(this.Rqt*i),this.yJt()?(this.Oqt=Math.floor((t-this.Pqt)/2),this.Dqt=Math.floor((s-this.Rqt)/2)):(this.Oqt=0,this.Dqt=0),this.Bc.gJt(this.Bc.m9(),this.Bc.g9())}pJt(t){if("high"===this.jqt)this.XU=this.Aqt,this.ZU=this.Fqt,this.qqt="high";else{let s,i;if("off"===this.lJt()?(s=this.Bc.m9(),i=this.Bc.g9()):(s=this.Bc.ij(),i=this.Bc.nj()),this.Aqt<s||this.Fqt<i)this.XU=this.Aqt,this.ZU=this.Fqt,this.qqt="high";else if(this.XU=s,this.ZU=i,this.qqt="low","scale-inner"===t){const t=s/i,e=this.Cqt/this.Iqt;e<t?this.XU=this.ZU*e:e>t&&(this.ZU=this.XU/e)}else if("scale-outer"===t){const t=s/i,e=this.Cqt/this.Iqt;e>t?this.XU=this.ZU*e:e<t&&(this.ZU=this.XU/e)}}}yH(){return this.Bc}wJt(){return this.Sqt[0].canvas}K8(){return this.Zqt}yJt(){return this.Hqt}SJt(){return this.Eqt}vJt(t){if(!E_.has(t))throw new Error("invalid fullscreen mode");this.$qt=t;const s=this.Bc.Mq();s.zet(),s.jet()}D2(){return this.$qt}bJt(t){if(!E_.has(t))throw new Error("invalid fullscreen mode");this.Wqt=t;const s=this.Bc.Mq();s.zet(),s.jet()}xJt(){return this.Wqt}lJt(){return this.yJt()?this.xJt():this.D2()}MJt(t){if(!P_.has(t))throw new Error("invalid fullscreen scaling quality");this.jqt=t,this.Bc.Mq().zet()}TJt(){return this.jqt}Ptt(){return this.qqt}static GJt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}b2(){return this.Cqt}M2(){return this.Iqt}vtt(){return this.XU}btt(){return this.ZU}Xb(t){this.HS=!!t}_Jt(){return this.HS}CJt(t){this.Bqt=t}G6(){return this.Bqt}IJt(){return this.Dx().DR()}WHt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.Jqt=[],this.Yqt.clear(),this.Zqt.rM(),this.bqt.rM(),this.Bc.Eit()}qHt(){console.log("[Construct] WebGPU device lost"),this.Jqt=[],this.Yqt.clear(),this.Zqt.rM(),this.Bc.Eit()}async UHt(t){await this.bqt.hM(),await this.jzt(),await this.Bc.EJt(),console.log("[Construct] WebGL context restored")}async HHt(){await this.jzt(),await this.Bc.EJt(),console.log("[Construct] WebGPU device restored")}PJt(){return this.bqt}RJt(){return this.xqt}Dx(){return this.xqt||this.bqt}Oq(){return this.Mqt}eJ(){let t="";return t=this.Bc.RJt()?"webgpu":"webgl"+this.Bc.PJt().UT(),this.Bc.Dx().Qb()&&(t+="-software"),t}rJ(){return this.Bc.RJt()?this.Bc.RJt().YB():this.Bc.PJt().YO()}gZ(){return"low"===this.qqt?1/this.Bc.wJ():this.N2()}N2(){const t=this.lJt();if("off"===t||"crop"===t)return 1;const s=this.Bc.ij(),i=this.Bc.nj(),e=s/i,n=this.Aqt/this.Fqt;return"scale-inner"!==t&&n>e||"scale-inner"===t&&n<e?this.Rqt/i:this.Pqt/s}tst(){return"low"===this.Ptt()?1:this.N2()}Ktt(){return"low"===this.Ptt()?1:this.Bc.wJ()}AJt(t,s){this.Uqt=t,this.Vqt=s}A4(t,s,i,e=!0){s=s||this.XU,i=i||this.ZU;const n=s/2+this.Uqt,r=i/2+this.Vqt;if(e){let e=this.xtt();s===this.XU&&i===this.ZU||(t.dv(O_,s/i),e=O_),t.IF(e)}const h=t.yv(n,r,t.QS(i),n,r,0,i);t.OF(h)}FJt(t,s=!0){const i=this.cJ(),e=this.dJ(),n=i/2,r=e/2;s&&t.IF(this.xtt());const h=t.yv(n,r,t.QS(e),n,r,0,e);t.OF(h)}mJ(){return this.Aqt}yJ(){return this.Fqt}cJ(){return this.Pqt}dJ(){return this.Rqt}oJ(){return this.Oqt}lJ(){return this.Dqt}fit(){return this.Sqt.length}OJt(){return"undefined"!=typeof OffscreenCanvas&&this.wJt()instanceof OffscreenCanvas&&("Chromium"!==I_.Ks.ni||I_.Ks.ei>=124)}async Oit(t,s=!1){if(t<1)throw new Error("invalid HTML layer count");if(this.Sqt.length===t)return;const i={count:t,layersDomState:this.Bc.Mq().vq().q7().filter(t=>t.AX()).map(t=>t.Y9()),immediate:s,marginLeft:this.Oqt,marginTop:this.Dqt,styleWidth:this.Pqt,styleHeight:this.Rqt};let e;if(e=this.tj()?await this.Bc.Qq("canvas","set-html-layer-count",i):self.c3_runtimeInterface._OnSetHTMLLayerCount(i),t<this.Sqt.length)this.Sqt.length=t;else for(const t of e.addedCanvases){t.width=this.Aqt,t.height=this.Fqt;const s=this.OJt()?"bitmaprenderer":"2d",i=t.getContext(s);if(!i)throw new Error(`failed to acquire '${s}' canvas context`);this.Sqt.push({canvas:t,NHt:i})}this.Bc.Zq()}Get(t){if(t>=this.Sqt.length)return;const s=this.wJt(),i=this.Sqt[t].NHt;this.OJt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}Rtt(t){t.depth=this.Bc.G9();const s=this.Jqt,i=s.findIndex(s=>s.qG(t));let e;return-1!==i?(e=s[i],s.splice(i,1)):e=this.Dx().RO(t),this.Yqt.add(e),e}t7(t){if(!this.Yqt.has(t))throw new Error("render target not in use");this.Yqt.delete(t),this.Jqt.push(t)}Kqt(){const t={xT:this.Bc.LW()};return"low"===this.Ptt()&&(t.width=this.vtt(),t.height=this.btt()),this.Rtt(t)}Qqt(t){this.t7(t)}*DJt(){for(const t of this.Bc.Mq().Wet())for(const s of t.KY()){const t=this.nHt.get(s);t&&(yield t)}}_tt(t){if(!this.Dx().UO())return null;let s=this.nHt.get(t);return s||(s={IK:t,name:t.Pc(),LJt:I_.jn(I_.Xw.nA,this.bqt),NJt:0,kJt:0,BJt:0},this.nHt.set(t,s)),s.LJt}$Jt(){const t=this.Dx();if(t.UO()&&0===this.sHt){this.sHt=t.Jb(),this.rHt=NaN;for(const t of this.DJt())t.NJt=NaN}}WJt(){this.bqt&&this.bqt.UO()&&this.UJt(),this.xqt&&this.xqt.UO()&&this.VJt()}UJt(){if(isNaN(this.rHt)&&(this.rHt=this.eHt.cA(this.tHt,this.sHt),!isNaN(this.rHt))){if(this.Bc.aK())for(const t of this.DJt())if(t.NJt=t.LJt.cA(this.tHt,this.sHt),isNaN(t.NJt))return;if(this.eHt.fA(this.sHt),this.iHt=Math.min(this.rHt,1),this.Bc.aK()){const t=new Map;for(const s of this.DJt())s.LJt.fA(this.sHt),s.kJt=Math.min(s.NJt,1),t.set(s.IK,s.kJt);for(const s of this.DJt()){const i=s.IK,e=(t.get(i)||0)-i.bX().reduce((s,i)=>s+(t.get(i)||0),0);s.BJt=I_.Zn(e,0,1)}const s=this.Bc.vq(),i=this.iHt-s.q7().reduce((s,i)=>s+(t.get(i)||0),0);self.lK.zJt(I_.Zn(i,0,1),this.iHt,[...this.DJt()])}this.tHt=this.sHt,this.sHt=0}}jJt(){return this.eHt}VJt(){if(0===this.sHt)return;for(let t=this.tHt;t<this.sHt;++t){const s=this.hHt.get(t);if(s&&!s.HR())return}const t=this.Bc.vq(),s=I_.Mo(t.hit()+1,0);let i=0;for(let t=this.tHt;t<this.sHt;++t){const e=this.hHt.get(t);if(!e)continue;const n=e.JR();let r=BigInt(0),h=BigInt(0);const o=BigInt(0);for(let t=0,i=Math.min(s.length,n.length/2);t<i;++t){const i=n[2*t],e=n[2*t+1];i!==o&&(r===o||i<r)&&(r=i),e>h&&(h=e);const a=Number(e-i)/1e9;s[t]+=a}i+=Number(h-r)/1e9}if(this.iHt=I_.Zn(i,0,1),this.Bc.aK()){const i=t.KY(),e=new Map;for(let t=0,n=Math.min(i.length,s.length-1);t<n;++t){const n=s[t+1];e.set(i[t],n)}const n=[],r=new Map;for(const[t,s]of e){const i=[...t.MX()].reduce((t,s)=>t+(e.get(s)||0),0);r.set(t,i),n.push({name:t.Pc(),BJt:I_.Zn(s,0,1),kJt:I_.Zn(i,0,1)})}const h=this.iHt-t.q7().reduce((t,s)=>t+(r.get(s)||0),0);self.lK.zJt(I_.Zn(h,0,1),this.iHt,n)}for(let t=this.tHt;t<this.sHt;++t)this.hHt.delete(t);this.tHt=this.sHt,this.sHt=0}qJt(t){this.hHt.set(this.xqt.Jb(),t)}sq(){return this.iHt}rH(t,s,i,e,n,r){return this.oHt=t,this.aHt=s,this.lHt.ja(i,e,n,r),this.cHt||(this.cHt=new Promise(t=>{this.fHt=t})),this.cHt}HJt(){if(!this.oHt)return;let t=this.wJt();const s=this.lHt,i=I_.Zn(Math.floor(s.Qa()),0,t.width),e=I_.Zn(Math.floor(s.tl()),0,t.height);let n=s.width();n=0===n?t.width-i:I_.Zn(Math.floor(n),0,t.width-i);let r=s.height();if(r=0===r?t.height-e:I_.Zn(Math.floor(r),0,t.height-e),(0!==i||0!==e||n!==t.width||r!==t.height)&&n>0&&r>0){const s=I_.co(n,r);s.getContext("2d").drawImage(t,i,e,n,r,0,0,n,r),t=s}I_.fo(t,this.oHt,this.aHt).then(t=>{this.uHt&&URL.revokeObjectURL(this.uHt),this.uHt=URL.createObjectURL(t),this.cHt=null,this.fHt(t)}),this.oHt="",this.aHt=1}JJt(){return this.uHt}YJt(t){t?this.dHt++:this.dHt--}XJt(){return this.dHt>0}ZJt(t){const s=this.Dx();if(2===t)this.wHt=I_.jn(I_.Xw.lx,this.Dx()),this.wHt.FP("Arial"),this.wHt.OP(16),this.wHt.JP("center"),this.wHt.XP("center"),this.wHt.rR(300,200);else if(0===t){const t=this.Bc.KJt();t&&t.M4(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.QJt("splash-images/splash-logo.svg").then(t=>{"done"===this._Ht?s.PG(t):this.SHt.vHt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.tYt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this._Ht?s.PG(t):this.SHt.bHt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.tYt("splash-images/splash-website-512.png").then(t=>{"done"===this._Ht?s.PG(t):this.SHt.xHt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async QJt(t){t=new URL(t,this.Bc.sYt()).toString();const s=await I_.no(t),i=await this.Bc.iYt(s,2048,2048);return await this.Dx().PO(i,{_T:"high"})}async tYt(t){t=new URL(t,this.Bc.sYt()).toString();const s=await I_.no(t);return await this.Dx().PO(s,{_T:"high"})}eYt(){this.Bc.Uc("runtime","hide-cordova-splash")}nYt(){this.pHt=Date.now(),this.Bc.Sf().addEventListener("loadingprogress",this.yHt),this.mHt=requestAnimationFrame(()=>this.rYt()),3!==this.Bc.hYt()&&this.eYt()}async oYt(){const t=this.Dx();this.gHt=1;const s=this.Bc.hYt();4===s&&await this.IHt,this.CHt=null,this.IHt=null,-1!==this.mHt&&(cancelAnimationFrame(this.mHt),this.mHt=-1),this.Bc.Sf().removeEventListener("loadingprogress",this.yHt),this.yHt=null,this.wHt&&(this.wHt.qn(),this.wHt=null),this.Bc.aYt(),t.vO(),this.SHt.vHt&&(t.PG(this.SHt.vHt),this.SHt.vHt=null),this.SHt.bHt&&(t.PG(this.SHt.bHt),this.SHt.bHt=null),this.SHt.xHt&&(t.PG(this.SHt.xHt),this.SHt.xHt=null),t.SO(0,0,0,0),t.qb(),this._Ht="done",this.tHt=t.Jb(),3===s&&this.eYt()}rYt(){if(-1===this.mHt)return;const t=this.Dx();t.vO(),this.mHt=-1;const s=this.Bc.Dz().J5(),i=this.Bc.hYt();if(3!==i&&(this.FJt(t),t.SO(0,0,0,0),t.UF(),t.xv(),t.zF(null)),0===i)this.lYt(s);else if(1===i)this.uYt(s,120,0);else if(2===i)this.cYt(s);else if(3===i)I_.gh();else{if(4!==i)throw new Error("invalid loader style");this.fYt(s)}t.qb(),this.mHt=requestAnimationFrame(()=>this.rYt())}cYt(t){t?this.wHt.HP(1,0,0):this.wHt.HP(.6,.6,.6),this.wHt.Vc(Math.round(100*this.gHt)+"%");const s=this.Pqt/2,i=this.Rqt/2;B_.kl(s-150,i-100,s+150,i+100);const e=this.Dx();e.zF(this.wHt.NG()),e.pb(B_,this.wHt.NR())}uYt(t,s,i){const e=this.Dx();e.Iv(),t?e.$F(1,0,0,1):e.$F(.118,.565,1,1);const n=this.Pqt/2,r=this.Rqt/2,h=s/2;$_.ja(n-h,r-4+i,Math.floor(s*this.gHt),8),e.Rect($_),$_.ja(n-h,r-4+i,s,8),$_.offset(-.5,-.5),$_.fl(.5,.5),e.$F(0,0,0,1),e.Sb($_),$_.fl(1,1),e.$F(1,1,1,1),e.Sb($_)}lYt(t){const s=this.Dx(),i=this.Bc.KJt();if(!i)return void this.uYt(t,120,0);const e=i.NG();if(!e)return void this.uYt(t,120,0);const n=e.My(),r=e.Gy(),h=this.Pqt/2,o=this.Rqt/2,a=n/2,l=r/2;B_.kl(h-a,o-l,h+a,o+l),s.zF(e),s.El(B_),this.uYt(t,n,l+16)}fYt(t){const s=this.Dx(),i=this.SHt.vHt,e=this.SHt.bHt,n=this.SHt.xHt,r=Date.now();0===this.MHt&&(this.pHt=r);const h=this.Bc.dYt()||this.Bc.pYt()&&!this.Bc.mYt(),o=h?0:200,a=h?0:3e3;let l=1;"fade-in"===this._Ht?l=Math.min((r-this.pHt)/300,1):"fade-out"===this._Ht&&(l=Math.max(1-(r-this.GHt)/300,0)),s.Iv(),s.$F(.231*l,.251*l,.271*l,l),$_.set(0,0,this.Pqt,this.Rqt),s.Rect($_);const u=Math.ceil(this.Pqt),c=Math.ceil(this.Rqt);let f,d;this.Rqt>256?(s.$F(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),$_.ja(0,.8*c-d/2,f,d),s.Rect($_),t?s.$F(l,0,0,l):s.$F(.161*l,.953*l,.816*l,l),f=u*this.gHt,$_.ja(.5*u-f/2,.8*c-d/2,f,d),s.Rect($_),s.$F(l,l,l,l),s.xv(),e&&(f=1.5*I_.Zn(.22*c,105,.6*u),d=f/8,$_.ja(.5*u-f/2,.2*c-d/2,f,d),s.zF(e),s.Rect($_)),i&&(f=Math.min(.395*c,.95*u),d=f,$_.ja(.5*u-f/2,.485*c-d/2,f,d),s.zF(i),s.Rect($_)),n&&(f=1.5*I_.Zn(.22*c,105,.6*u),d=f/8,$_.ja(.5*u-f/2,.868*c-d/2,f,d),s.zF(n),s.Rect($_))):(s.$F(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),$_.ja(0,.85*c-d/2,f,d),s.Rect($_),t?s.$F(l,0,0,l):s.$F(.161*l,.953*l,.816*l,l),f=u*this.gHt,$_.ja(.5*u-f/2,.85*c-d/2,f,d),s.Rect($_),s.$F(l,l,l,l),s.xv(),i&&(f=.55*c,d=f,$_.ja(.5*u-f/2,.45*c-d/2,f,d),s.zF(i),s.Rect($_))),this.MHt++,"fade-in"===this._Ht&&r-this.pHt>=300&&this.MHt>=2&&(this._Ht="wait",this.THt=r),"wait"===this._Ht&&r-this.THt>=a&&this.gHt>=1&&(this._Ht="fade-out",this.GHt=r),("fade-out"===this._Ht&&r-this.GHt>=300+o||h&&this.gHt>=1&&r-this.pHt<500)&&this.CHt()}}}{const z_=self.Cs,j_=self.lK,q_=self.assert,H_=self.Z2,J_={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""};let Y_=!0;z_.gYt=class extends z_.Vn{constructor(t){t=Object.assign({},J_,t),super(),this.yYt=t.messagePort,this.wYt=t.runtimeBaseUrl,this.SYt=t.previewUrl,this.vYt=!!t.headless,this.bYt=!!t.hasDom,this.xYt=!!t.isInWorker,Y_=t.ife,this.MYt=!!t.useAudio,this.TYt=t.exportType,this.t5=!!t.isiOSCordova,this.GYt=!!t.isiOSWebView,this._Yt=!!t.isWindowsWebView2,this.CYt=!!t.isAnyWebView2Wrapper,this.IYt=!!t.isFBInstantAvailable,this.EYt=!("preview"!==this.TYt||!t.isDebug),this.PYt=this.EYt,this.RYt=this.EYt,this.AYt=0,this.FYt=[],this.OYt=[],this.DYt=!1,this.LYt="",this.NYt="",this.kYt="",this.BYt="",this.$Yt=0,this.WYt=0,this.UYt=0,this.rV=self.devicePixelRatio,this.VYt=0,this.zYt=0,this.dD=0,this.pD=0,this.jYt=0,this.qYt=!1,this.Aw=!0,this.HYt=!1,this.JYt=!1,this.YYt=!1,this.XYt=null,this.f6=z_.jn(z_.Z4,this,t),this.yst=z_.jn(z_.Fet,this),this.nxt=z_.jn(z_.sMt,this),this.ZYt=z_.jn(z_.MJ,this,t.wrapperComponentIds),this.KYt=z_.jn(z_.ajt,this),this.hot=z_.jn(z_.qet,this),this.QYt=z_.jn(z_.Mwt,this),this.tXt=z_.jn(z_.Gwt,this),this.Bwt=z_.jn(z_.Fwt,this),this.Cw=z_.jn(z_.pw,{yw:t=>this.sXt(t),Sw:t=>this.iXt(t)}),this.eXt=new Map,this.nXt=[],this.rXt=new Map,this.hXt=new Map,this.oXt=0,this.aXt=[],this.lXt=new Set,this.uXt=[],this.cXt=[],this.fXt=new Map,this.dXt=!1,this.pXt=!1,this.mXt=0,this.gXt=0,this.yXt=new Map,this.wXt=new Set,this.SXt=new Set,this.vXt=[],this.bXt=[],this.xXt=null,this.MXt=!1,this.TXt="vsync",this.OT="trilinear",this.GXt=!1,this._Xt=!0,this.CXt=!1,this.IXt=!1,this.EXt=null,this.PXt={RXt:t=>{this.mHt=-1,this.AXt=-1,this.wrt(t)},FXt:t=>{this.AXt=-1,this.wrt(t,!1,"skip-render")},OXt:()=>{this.mHt=-1,this.IV()}},this.mHt=-1,this.AXt=-1,this.DXt=0,this.LXt=0,this.NXt=!1,this.kXt=!1,this.BXt=!1,this.$Xt=!0,this.WXt=!0,this.UXt=!1,this.VXt=0,this.zXt=new z_.jd(1),this.jXt=()=>Math.random(),this.qXt=0,this.HXt=0,this.JXt=0,this.YXt=0,this.XXt=0,this.k$t=1,this.ZXt=1/30,this.KXt=0,this.QXt=z_.jn(z_.td),this.tZt=z_.jn(z_.td),this.sZt=z_.jn(z_.td),this.iZt=new Map,this.eZt=-1,this.nZt=0,this.rZt=0,this.hZt=-1,this.oZt=0,this.aZt=0,this.lZt=0,this.uZt=!1,this.cZt="",this.fZt=!1,this.dZt="",this.yK=null,this.pZt="",this.mZt=null,this.gZt=null,this.Wkt=z_.jn(z_.Event.Sf),this.yZt=new Map,this.wZt=new Map,this.SZt=0,this.vZt=!1,this.bZt=!1,this.xZt=!1,this.MZt=[],this.TZt={pretick:z_.jn(z_.Event,"pretick",!1),tick:z_.jn(z_.Event,"tick",!1),tick2:z_.jn(z_.Event,"tick2",!1),instancecreate:z_.jn(z_.Event,"instancecreate",!1),instancedestroy:z_.jn(z_.Event,"instancedestroy",!1),beforelayoutchange:z_.jn(z_.Event,"beforelayoutchange",!1),layoutchange:z_.jn(z_.Event,"layoutchange",!1),beforerender:z_.jn(z_.Event,"beforerender",!1),afterrender:z_.jn(z_.Event,"afterrender",!1)},this.TZt.instancecreate.S0=null,this.TZt.instancedestroy.S0=null,this.u7=z_.jn(z_.Event.Sf),this.GZt=null;const s=(t,s)=>z_.L$t.Azt(this,t,s);this._Zt=z_.jn(z_.ud,s),this.CZt=z_.jn(z_.ud,s),this.IZt=z_.jn(z_.ud,s),this.EZt=z_.jn(z_.PZt,this,t.jobScheduler),t.canvas&&(this.xXt=z_.jn(z_.wqt,this)),this.yYt.onmessage=t=>this._OnMessageFromDOM(t.data),this.eK("runtime","visibilitychange",t=>this.RZt(t)),this.eK("runtime","wrapper-extension-message",t=>this.AZt(t)),this.eK("runtime","get-remote-preview-status-info",()=>this.FZt()),this.eK("runtime","js-invoke-function",t=>this.EMt(t)),this.eK("runtime","go-to-last-error-script",self.goToLastErrorScript),this.eK("runtime","offline-audio-render-completed",t=>this.OZt(t)),this.Wkt.addEventListener("window-blur",t=>this.DZt(t)),this.Wkt.addEventListener("window-focus",()=>this.LZt()),this.hot.Gnt(),this.tXt.Gnt(),this.NZt=null,this.kZt=0,this.BZt=new WeakMap,this.$Zt={keyboard:null,Rq:null,Aq:null,Fq:null},this.WZt=new WeakMap,this.UZt=[]}static e_(t){return z_.jn(z_.gYt,t)}qn(){z_.bh(this.nXt),this.rXt.clear(),this.hXt.clear(),this.yst.qn(),this.yst=null,this.nxt.qn(),this.nxt=null,this.ZYt.qn(),this.ZYt=null,this.f6.qn(),this.f6=null,this.KYt.qn(),this.KYt=null,this.hot.qn(),this.hot=null,this.QYt.qn(),this.QYt=null,this.tXt.qn(),this.tXt=null,this.Bwt.qn(),this.Bwt=null,this.Cw.qn(),this.Cw=null,this.xXt&&(this.xXt.qn(),this.xXt=null),this.Wkt.qn(),this.Wkt=null,this.VZt=null}_OnMessageFromDOM(t){const s=t.type;if("event"===s)this.zZt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.jZt(t)}}zZt(t){if(!this.xZt)return void this.MZt.push(t);const s=t.component,i=t.handler,e=t.data,n=t.dispatchOpts,r=!(!n||!n.dispatchRuntimeEvent),h=!(!n||!n.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const t=new z_.Event(i);t.data=e,this.Wkt.Ef(t)}if(h){const t=new z_.Event(i,!0);if(e)for(const[s,i]of Object.entries(e))t[s]=i;this.Y5(t)}}const a=this.yZt.get(s);if(!a)return void(r||h||console.warn(`[Runtime] No DOM event handlers for component '${s}'`));const l=a.get(i);if(!l)return void(r||h||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`));let u=null;try{u=l(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.qZt(o,!1,""+t))}null!==o&&(u&&u.then?u.then(t=>this.qZt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.qZt(o,!1,""+t)}):this.qZt(o,!0,u))}qZt(t,s,i){this.yYt.postMessage({type:"result",responseId:t,isOk:s,result:i})}jZt(t){const s=t.responseId,i=t.isOk,e=t.result,n=this.wZt.get(s);i?n.resolve(e):n.reject(e),this.wZt.delete(s)}eK(t,s,i){let e=this.yZt.get(t);if(e||(e=new Map,this.yZt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}Uc(t,s,i,e){this.yYt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}Qq(t,s,i,e){const n=this.SZt++,r=new Promise((t,s)=>{this.wZt.set(n,{resolve:t,reject:s})});return this.yYt.postMessage({type:"event",component:t,handler:s,data:i,responseId:n},e),r}c3(t,s,i,e=-1){this.Uc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}HZt(t){this.Uc("runtime","send-raw-wrapper-extension-message",t)}f3(t,s,i){const e=this.SZt++,n=new Promise((t,s)=>{this.wZt.set(e,{resolve:t,reject:s})});return this.c3(t,s,i,e),n}AZt(t){if(-1!==t.asyncId){const s=t.asyncId;this.wZt.get(s).resolve(t.params),this.wZt.delete(s)}else this.zZt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}bK(t,s,i){this.eK("wrapper-extension:"+t,s,i)}SK(t){return this.ZYt.SK(t)}JZt(t){if(!this.aK())throw new Error("not in debug mode");this.Uc("runtime","post-to-debugger",t)}async W$t(t){z_.mAt(this),this.aK()?await j_.W$t(this):self.lK&&self.lK.YZt(this);const s=await this.f6.eo("data.json");if(await this.XZt(s),await this.ZZt(t),this.dYt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.PJt()){const t=this.PJt();console.info(`[C3 runtime] Hosted in ${this.tj()?"worker":"DOM"}, rendering with WebGL ${t.UT()} [${t.YO()}]`)}else this.RJt()&&console.info(`[C3 runtime] Hosted in ${this.tj()?"worker":"DOM"}, rendering with WebGPU [${this.RJt().YB()}]`);this.Dx().Qb()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.xZt=!0;for(const t of this.MZt)this.zZt(t);z_.bh(this.MZt),this.xXt&&this.xXt.nYt();for(const s of t.runOnStartupFunctions)this.FYt.push(this.KZt(s));if(await Promise.all([this.f6.q5(!1),...this.FYt]),z_.bh(this.FYt),!this.f6.J5())return this.xXt&&await this.xXt.oYt(),await this.Wkt.Cf(new z_.Event("beforeruntimestart")),await this.vO(),this.yYt.postMessage({type:"runtime-ready"}),this;this.xXt&&this.xXt.eYt()}async KZt(t){try{await t(this.NZt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async XZt(t){const s=t.project;this.LYt=s[0],this.NYt=s[16],this.kYt=s[31],this.BYt=s[38],this.$Yt=s[36];const i=s[39]||"loading-logo.png";this.GXt=!!s[9],this.WYt=this.dD=s[10],this.UYt=this.pD=s[11],this.KYt.Kjt(this.WYt,this.UYt),this.VYt=this.WYt/2,this.zYt=this.UYt/2,this.TXt=s[37],this.MXt=!!s[40],this.OT=s[14],this.HYt=s[15],this.JYt=s[42],this.YYt=s[17],this.qYt=!!s[18],this.jYt=s[19],this.gXt=s[21],this.CXt=s[22],this.kZt=s[51];const e=this.f6;e.i6(s[7],s[25]),e.C5(s[8]),e.I5(s[32]),e.P5(s[28]),e.K5(s[29]),e.A5(s[45]),0===this.jYt&&i&&(this.XYt=e.L5({url:i})),this.xXt&&(this.xXt.vJt(z_.wqt.GJt(s[12])),this.xXt.MJt(s[23]?"high":"low"),this.xXt.Xb(0!==s[24]),this.xXt.EHt(s[34]),this.xXt.CJt(s[41]),this.xXt.PHt(s[13]),this.xXt.RHt(s[30]),this.xXt.OHt(s[46],s[47]),this.xXt.FHt(s[26]),this.xXt.DHt(s[48]),this.xXt.LHt(s[50]));const n=s[43];n&&await this.QZt(n),this.tKt(),this.ZYt._Nt(),this.vXt=self.sKt();const r=s[2];for(const t of r[1])this.ZYt.CNt(t);for(const t of r[0])this.ZYt.GNt(t);this.vXt=self.sKt(),this.iKt(),this.ZYt.FNt();for(const t of s[3]){const s=z_.Pwt.e_(this,this.nXt.length,t);this.nXt.push(s),this.rXt.set(s.Pc().toLowerCase(),s),this.hXt.set(s.H7(),s)}for(const t of s[4])this.nXt[t[0]].GBt(t);for(const t of s[27]){const s=t.map(t=>this.nXt[t]);this.aXt.push(z_.jn(z_.G$t,this,s))}this.eKt();for(const t of this.nXt)t.CBt();for(const t of s[5])this.yst.e_(t);const h=s[1];if(h){const t=this.yst.Let(h);t&&this.yst.Oet(t)}for(const t of s[35])this.QYt.e_(t);for(const t of s[33])this.hot.e_(t);for(const t of s[44])this.tXt.e_(t);this.tXt.Iwt()||(this.tXt.qn(),this.tXt=null);for(const t of s[49])this.Bwt.e_(t);this.Bwt.Nwt()||(this.Bwt.qn(),this.Bwt=null);for(const t of s[6])this.nxt.e_(t);this.nxt.AMt(),this.nKt(),z_.bh(this.vXt),this.xY();let o="any";const a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.Uc("runtime","set-target-orientation",{targetOrientation:o})}async QZt(t){const s=t.format;"image-sequence"===s?this.EXt=new self.rKt(this,t):"image-sequence-gif"===s?this.EXt=new self.hKt(this,t):"webm"===s?this.EXt=new self.oKt(this,t):"mp4"===s&&(this.EXt=new self.aKt(this,t)),this.TXt="unlimited-frame",this.xXt.vJt("off"),this.rV=1,self.devicePixelRatio=1,await this.Qq("runtime","set-exporting-to-video",{message:this.EXt.lKt(0),duration:this.EXt.J0()})}hYt(){return this.jYt}iJt(){return null!==this.EXt}uKt(){return this.EXt.J0()}cKt(){return this.EXt.fKt()}dKt(){return this.EXt.W$t({width:this.xXt.mJ(),height:this.xXt.yJ()})}pKt(){const t=this.DXt/this.cKt();return this.EXt.mKt(this.xXt.wJt(),t)}gKt(){this.EXt&&this.EXt.Hut()}OZt(t){this.EXt.yKt(t)}wKt(){return this.EXt.qb()}pYt(){return this.IYt}Nw(){return this.Aw}eH(t){this.FYt.push(t)}Lit(t){this.DYt=!!t}SKt(t){this.DYt&&this.OYt.push(t)}Uit(){return this.OYt}wBt(){return this.oXt++}EBt(){return this.oXt}Wzt(t){this.lXt.add(t)}Uzt(t){this.lXt.delete(t)}sJt(){return this.lXt}async ZZt(t){this.xXt&&(await this.xXt.co(t),this.xXt.ZJt(this.jYt))}async vO(){this.NXt=!0,this.qXt=Date.now();let t=null;const s=new Promise(s=>t=s);if(this.qYt){for(const t of this.nXt)t.B7()||t.kBt()||!t.EJ()||t.RDt();(async()=>{await this.f6.q5(!0),await s,this.Aw=!1,this.vKt()})()}else this.Aw=!1;this.f6.H5(),this.aK()&&j_.bKt(Y_);for(const t of this.yst._q())t.eet();this.iJt()&&await this.dKt();const i=this.yst.Det();await i.vit(null,this.Dx()),await i.Pit(!0),this.nZt=performance.now(),t(),this.qYt||this.vKt(),(await this.Qq("runtime","before-start-ticking")).isSuspended&&!this.iJt()?(this.VXt++,this.UXt=!0):this.wrt()}vKt(){this.tK(z_.uH.lH.aH.xKt,null,null),this.Uc("runtime","register-sw")}DIt(t){t=Math.floor(t);const s=this.vXt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}iKt(){for(const t of self.MKt){const s=z_.$h(Object.keys(t));this.bXt.push(s)}}iTt(t){t=Math.floor(t);const s=this.bXt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}TKt(){return this.bYt}GKt(){return this.vYt}tj(){return this.xYt}sYt(){return this.wYt}_Kt(){return this.SYt}dj(){return this.nxt}_j(){return this.nxt._j()}qMt(){return this.nxt.qMt()}Sj(){return this.nxt.Sj()}HMt(){return this.nxt.HMt()}dAt(){return 0===this.qMt().Mxt()}YMt(){return this.nxt.YMt()}Pzt(){return this.ZYt}Z5(){return this.ZYt.Z5()}g7(t){if((t=Math.floor(t))<0||t>=this.nXt.length)throw new RangeError("invalid index");return this.nXt[t]}CKt(t){return this.rXt.get(t.toLowerCase())||null}x3(t){return this.hXt.get(t)||null}Gdt(t){const s=z_.MJ.zJ(t);return s?s.JJ():null}k7(){return this.nXt}*IKt(){for(const t of this.nXt)t.B7()||(yield*t.sY())}Sf(){return this.Wkt}lj(){return this.u7}Y5(t){t.runtime=this.TJ();const s=this.aK()&&!this.nxt.vY();s&&j_.Eet(),this.u7.dispatchEvent(t),s&&j_.Pet()}Yit(t){return t.runtime=this.TJ(),this.u7.Cf(t)}ij(){return this.WYt}nj(){return this.UYt}EKt(t,s){if(this.WYt===t&&this.UYt===s)return;this.WYt=t,this.UYt=s;const i=this.Mq();i.zet(),i.jet()}m9(){return this.dD}g9(){return this.pD}gJt(t,s){if(this.dD===t&&this.pD===s)return;this.dD=t,this.pD=s;const i=this.Mq();i.zet(),i.jet()}eJt(t){this.iJt()||(this.rV=t)}wJ(){return this.rV}dtt(){return this.VYt}ptt(){return this.zYt}Dq(){return this.xXt}vtt(){return this.xXt?this.xXt.vtt():this.dD}btt(){return this.xXt?this.xXt.btt():this.pD}gZ(){return this.xXt?this.xXt.gZ():1}N2(){return this.xXt?this.xXt.N2():1}tst(){return this.xXt?this.xXt.tst():1}Ktt(){return this.xXt?this.xXt.Ktt():1}oJ(){return this.xXt?this.xXt.oJ():0}lJ(){return this.xXt?this.xXt.lJ():0}PKt(){return this.xXt?this.xXt.cJ():0}RKt(){return this.xXt?this.xXt.dJ():0}D2(){return this.xXt?this.xXt.D2():"off"}Rtt(t){return this.xXt?this.xXt.Rtt(t):null}t7(t){this.xXt&&this.xXt.t7(t)}Ett(){return this.HYt}JHt(){return this.JYt}YHt(){return this.YYt}sq(){return this.xXt?this.xXt.sq():NaN}BG(){return"nearest"!==this.LW()}eq(){return this.TXt}nq(t){this.TXt!==t&&(this.TXt=t,-1===this.mHt&&-1===this.AXt||(this.AKt(),this.FKt()))}LW(){return this.OT}xBt(){return this.qYt}KJt(){return this.XYt}aYt(){this.XYt&&(this.XYt.GP(),this.XYt.qn(),this.XYt=null)}Mq(){return this.yst}vq(){return this.yst.vq()}qot(){return this.hot}OKt(){return this.QYt}yWt(){return this.tXt}hSt(){return this.Bwt}Dz(){return this.f6}L5(t){return this.f6.L5(t)}gY(t,s,i,e,n,r){if(r&&this.tXt){if(t instanceof z_.Pwt&&t.B7()){const h=t.PY(),o=Math.floor(this.Sq()*h.length);return this.gY(h[o],s,i,e,n,r)}const h=this.tXt.Ewt(t,r);if(h){const t=this.G7(h,s,!1,i,e,!1,n,void 0,n);return this.tXt.Rwt(t,r),t}}return this.G7(t,s,!1,i,e,!1,n,void 0,n)}G7(t,s,i,e,n,r,h,o,a){let l=null,u=null;if(t instanceof z_.Pwt){if(u=t,u.B7()){const t=u.PY();u=t[Math.floor(this.Sq()*t.length)]}l=u.w7()}else l=t,u=this.g7(l[1]);const c=u.QJ().EJ();if(this.Aw&&c&&!u.kBt())return null;const f=s;let d;c||(s=null),d=i&&!r&&l&&!this.yXt.has(l[2])?l[2]:this.gXt++;const p=l?l[0]:null,m=z_.jn(z_.Instance,{runtime:this,objectType:u,IK:s,$$t:p,z$t:l?l[3]:null,uid:d,tags:l?l[6]:null});this.yXt.set(d,m);let g=null;if(c&&(g=m.zq(),void 0!==e&&void 0!==n&&(g.mM(e),g.wM(n)),u.c$t(!0)),s&&(a||s._7(m,!0),s.Tq().xit(u)),this.mXt++,u.EZ()&&!i&&!r){const t=new Set;for(const s of u.wit().RY()){if(s===u)continue;const i=this.DKt(s,g,t);if(i){const t=this.G7(i,f,!1,g?g.pM():e,g?g.yM():n,!0,!1,void 0,a);m.tet(t)}else{const t=this.G7(s,f,!1,g?g.pM():e,g?g.yM():n,!0,!1,void 0,a);m.tet(t)}}for(const t of m.PZ()){t.tet(m);for(const s of m.PZ())t!==s&&t.tet(s)}}if(c&&!i&&h&&this.LKt(m,p,g,s,e,n,a),u.EZ()&&!i&&!r&&h)for(const t of m.PZ()){const i=t.zq();if(!i)continue;const e=t.QJ(),n=t.wZ().w7()[0];e.EJ()?this.LKt(t,n,i,s,i.pM(),i.yM(),a):this.LKt(t,n,i,s,void 0,void 0,a)}if(!r&&h){void 0===e&&(e=p[0]),void 0===n&&(n=p[1]);const t=g.pQ(),s=e-g.pM()+t.pM(),i=n-g.yM()+t.yM();t.PK(s,i)}u.h$t();const y=l?z_.Fh(l[5]):null,w=l?l[4].map(t=>z_.Fh(t)):null,S=c&&p&&p[13];if(S&&m.X$t(),m.LBt(y,w),S){const t=p[13];m.a0().YDt(t[2],t[0],t[1])}this.cXt.push(m),this.dXt=!0,this.aK()&&j_.NKt(m);const v=this.TZt.instancecreate;return v.S0=m,this.Wkt.dispatchEvent(v),m}TUt(t){const s=t[0],i=t[1],e=t[2],n=t[6];return n||this.yst.Net(s).jq(i).b7(e)}DKt(t,s,i){const e=s?.gWt()??[];for(const s of e){const e=this.TUt(s),n=!!s[4],r=this.g7(e[1]);if(!i.has(e)&&t===r&&n)return i.add(e),e}}LKt(t,s,i,e,n,r,h){const o=i.qVt(),a=i.gWt();if(t.zq().HVt(o),!a)return;void 0===n&&(n=s[0]),void 0===r&&(r=s[1]);const l=new Set,u=s[0],c=s[1];for(const s of a){const i=s[0],o=s[1],a=s[2],f=s[3],d=!!s[4],p=s[5],m=s[6];let g;g=m||this.yst.Net(i).jq(o).b7(a);const y=this.g7(g[1]),w=t.SWt(y),S=l.has(y);if(w&&!S&&d){const s=t.vWt(y);s.zq().W$t(g[0]);const i=n+g[0][0]-u,e=r+g[0][1]-c;s.zq().PK(i,e),s.zq().HVt(p),t.xQ(s,{CQ:!!(1&f),EQ:!!(f>>1&1),RQ:!!(f>>2&1),FQ:!!(f>>3&1),DQ:!!(f>>4&1),VQ:!!(f>>5&1),NQ:!!(f>>6&1),BQ:!!(f>>7&1),WQ:!!(f>>8&1)}),l.add(y)}else{const s=n+g[0][0]-u,i=r+g[0][1]-c,o=this.G7(g,e,!1,s,i,!1,!0,t,h);o.zq().HVt(p),t.xQ(o,{CQ:!!(1&f),EQ:!!(f>>1&1),RQ:!!(f>>2&1),FQ:!!(f>>3&1),DQ:!!(f>>4&1),VQ:!!(f>>5&1),NQ:!!(f>>6&1),BQ:!!(f>>7&1),WQ:!!(f>>8&1)})}}}TZ(t){if(this.wXt.has(t))return;const s=t.wZ();let i=this.fXt.get(s);if(i){if(i.has(t))return;i.add(t)}else i=new Set,i.add(t),this.fXt.set(s,i);if(this.aK()&&j_.kKt(t),t.K$t(),this.dXt=!0,t.EZ())for(const s of t.PZ())this.TZ(s);for(const s of t.children())s.zQ()&&this.TZ(s);if(!this.yst.bY()&&!this.uZt){const s=this.dj();s.wY(!0),t.AWt(),s.wY(!1)}t.FWt(this.yst.bY())}xY(){this.dXt&&(this.pXt=!0,this.BKt(),this.$Kt(),this.pXt=!1,this.dXt=!1,this.Zq())}BKt(){for(const t of this.cXt){const s=t.wZ();s._7(t);for(const i of s.TY())i._7(t),i.h$t()}z_.bh(this.cXt)}$Kt(){this.Wkt.ff(!0);for(const[t,s]of this.fXt.entries())this.WKt(t,s),s.clear();this.fXt.clear(),this.Wkt.ff(!1)}WKt(t,s){for(const t of s){const s=this.TZt.instancedestroy;s.S0=t,this.Wkt.dispatchEvent(s),this.yXt.delete(t.RZ()),this.iZt.delete(t);const i=t.zq();i&&(i.ZVt(),i.P7(),i.K$t()),this.wXt.add(t),this.mXt--}z_.Ph(t.uY(),s),t.h$t(),this.SXt.add(t);for(const i of t.TY())z_.Ph(i.uY(),s),i.h$t(),this.SXt.add(i);if(t.QJ().EJ()){const t=new Set([...s].map(t=>t.zq().jq()));for(const i of t)i.U9(s)}}a$t(){return this.cXt}*wFt(t){for(const s of this.a$t())t.B7()?s.wZ().pAt(t)&&(yield s):s.wZ()===t&&(yield s)}DBt(){return this.gXt++}NBt(t,s){this.yXt.set(t,s)}y3(t){t=!!t,this.WXt!==t&&(this.WXt=!!t,this.WXt&&this.UXt&&(this.v3(!1),this.UXt=!1))}w3(){return this.WXt}Eit(){this.Wkt.dispatchEvent(z_.jn(z_.Event,"renderercontextlost")),this.v3(!0);for(const t of this.nXt)!t.B7()&&t.BBt()&&t.Cit();const t=this.vq();t&&t.Eit(),z_.LNt.T6(),z_.B5.T6()}async EJt(){await this.vq().vit(null,this.Dx()),this.Wkt.dispatchEvent(z_.jn(z_.Event,"renderercontextrestored")),this.v3(!1),this.Zq()}RZt(t){if(!this.WXt)return;const s=t.hidden;this.v3(s),this.UXt=s,s||this.Zq()}DZt(t){this.dYt()&&this.CXt&&!z_.Ks.oi&&(t.data.parentHasFocus||(this.v3(!0),this.IXt=!0))}LZt(){this.IXt&&(this.v3(!1),this.IXt=!1)}FKt(){const t=this.PXt;"vsync"===this.TXt?-1===this.mHt&&(this.mHt=self.requestAnimationFrame(t.RXt)):"unlimited-tick"===this.TXt?(-1===this.AXt&&(this.AXt=z_.jh(t.FXt)),-1===this.mHt&&(this.mHt=self.requestAnimationFrame(t.OXt))):-1===this.AXt&&(this.AXt=z_.jh(t.RXt))}AKt(){-1!==this.mHt&&(self.cancelAnimationFrame(this.mHt),this.mHt=-1),-1!==this.AXt&&(z_.qh(this.AXt),this.AXt=-1)}Oj(){return this.VXt>0}v3(t){if(this.iJt())return;const s=this.Oj();this.VXt+=t?1:-1,this.VXt<0&&(this.VXt=0);const i=this.Oj();if(!s&&i)console.log("[Construct] Suspending"),this.AKt(),this.Wkt.dispatchEvent(z_.jn(z_.Event,"suspend")),this.Y5(z_.jn(z_.Event,"suspend")),this.tK(z_.uH.lH.aH.UKt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const t=performance.now();this.HXt=t,this.nZt=t,this.eZt=0,this.rZt=0,this.hZt=0,this.oZt=0,this.lZt=0,this.aZt=0,this.Wkt.dispatchEvent(z_.jn(z_.Event,"resume")),this.Y5(z_.jn(z_.Event,"resume")),this.tK(z_.uH.lH.aH.VKt,null,null),this.OTt()||this.wrt(t)}}t3(t){this._Zt.$u(t)}n3(t){this.CZt.$u(t)}i3(t){this.IZt.$u(t)}s3(t){this._Zt.Kf(t)}r3(t){this.CZt.Kf(t)}e3(t){this.IZt.Kf(t)}zKt(t,s){const i=s?performance.now():0;let e;return t instanceof H_?(e=t.uK(),s&&j_.jKt(t.behavior,performance.now()-i)):(e=t.wrt(),s&&j_.jKt(t.m0(),performance.now()-i)),e}qKt(){const t=this.aK();this._Zt.Vd(!0);for(const s of this._Zt)this.zKt(s,t);this._Zt.Vd(!1)}HKt(t,s){const i=s?performance.now():0;let e;return t instanceof H_?(e=t.o3(),s&&j_.jKt(t.behavior,performance.now()-i)):(e=t.vNt(),s&&j_.jKt(t.m0(),performance.now()-i)),e}JKt(){const t=this.aK();this.CZt.Vd(!0);for(const s of this.CZt)this.HKt(s,t);this.CZt.Vd(!1)}YKt(t,s){const i=s?performance.now():0;let e;return t instanceof H_?(e=t.dK(),s&&j_.jKt(t.behavior,performance.now()-i)):(e=t.gLt(),s&&j_.jKt(t.m0(),performance.now()-i)),e}XKt(){const t=this.aK();this.IZt.Vd(!0);for(const s of this.IZt)this.YKt(s,t);this.IZt.Vd(!1)}*ZKt(){const t=this.aK();this._Zt.Vd(!0);for(const s of this._Zt){const i=this.zKt(s,t);z_.xo(i)&&(yield*i)}this._Zt.Vd(!1)}*KKt(){const t=this.aK();this.CZt.Vd(!0);for(const s of this.CZt){const i=this.HKt(s,t);z_.xo(i)&&(yield*i)}this.CZt.Vd(!1)}*QKt(){const t=this.aK();this.IZt.Vd(!0);for(const s of this.IZt){const i=this.YKt(s,t);z_.xo(i)&&(yield*i)}this.IZt.Vd(!1)}async wrt(t,s,i){this.BXt=!0;const e="background-wake"===i,n="background-wake"!==i&&"skip-render"!==i,r=this.Mq(),h=this.Dq();if(!this.NXt||this.Oj()&&!s&&!e)return;const o=performance.now();this.kXt=!0,this.tQt(t||0),this.hZt++,this.sQt();const a=this.iQt();this.dFt()&&await a;const l=this.Wkt.If(this.TZt.pretick);l instanceof Promise&&await l,this.Y5(this.GZt.pretick);const u=this.eQt();this.dFt()&&await u,this.nQt()&&await this.rQt(),r.Iq()&&await this.hQt();const c=this.oQt();this.dFt()&&await c;const f=r.vq(),d=f.dit();let p=!1;if(-1!==d&&(f.pit(),h.fit()!==d)){const t=this.Dq().Oit(d);this.tj()&&(p=!0,await t)}this.Uc("canvas","update-html-layer-dom-state",{layersDomState:f.q7().filter(t=>t.AX()).map(t=>t.Y9())}),n&&this.IV(),p&&this.Uc("canvas","cleanup-html-layers"),this.iJt()&&(await this.pKt(),this.$j()>=this.uKt())?this.wKt():(this.Oj()||e||this.FKt(),this.DXt++,this.LXt++,this.kXt=!1,this.aZt+=performance.now()-o)}async iQt(){const t=this.nxt,s=this.aK();this.xY(),t.wY(!0),this.xTt(this.vq()),s&&j_.aQt(),this.dFt()?await t.sGt():t.XTt(),s&&j_.lQt(),this.MTt(),t.wY(!1),this.xY(),t.wY(!0)}async eQt(){const t=this.nxt,s=this.aK(),i=this.dFt(),e=this.Wkt,n=this.TZt,r=this.GZt;s&&j_.aQt(),i?await this.uQt(this.ZKt()):this.qKt(),i?await this.uQt(this.KKt()):this.JKt(),s&&j_.cQt(),s&&j_.aQt(),i?await this.fQt(n.tick):e.dispatchEvent(n.tick),s&&j_.dQt(),t.wY(!1),this.Y5(r.tick)}async oQt(){const t=this.nxt,s=this.Wkt,i=this.TZt,e=this.GZt,n=this.aK(),r=this.dFt();n&&j_.aQt(),r?await t.TTt(this.yst):t.bTt(this.yst),n&&j_.lQt(),this.KYt.bjt(),this.sQt(),this.$Xt=!1,t.wY(!0),n&&j_.aQt(),r?await this.uQt(this.QKt()):this.XKt(),n&&j_.cQt(),n&&j_.aQt(),r?await this.fQt(i.tick2):s.dispatchEvent(i.tick2),n&&j_.dQt(),t.wY(!1),this.Y5(e.tick2),r&&await t.DTt(),this.xY(),this.sQt()}sQt(){if(0===this.wXt.size)return;const t=this.Wkt;t.ff(!0);for(const t of this.SXt)t.zTt().Fbt(this.wXt);this.SXt.clear(),this.nxt.eGt(this.wXt);for(const t of this.wXt)t.qn();this.wXt.clear(),t.ff(!1)}async hQt(){const t=this.Mq();let s=0;for(;t.Iq()&&s++<10;)await this.pQt(t.Vet())}tQt(t){let s=0;this.iJt()?(s=1/this.cKt(),this.JXt=s,this.YXt=s):0!==this.HXt&&(s=Math.max(t-this.HXt,0)/1e3,s>.5&&(s=0),this.JXt=s,this.YXt=z_.Zn(s,this.KXt,this.ZXt)),this.HXt=t,this.XXt=this.YXt*this.k$t,this.QXt.$u(this.XXt),this.tZt.$u(s*this.k$t),this.sZt.$u(this.YXt);for(const[t,s]of this.iZt)s.$u(this.YXt*t.qj());this.xXt&&this.xXt.WJt(),t-this.nZt>=1e3&&(this.nZt+=1e3,t-this.nZt>=1e3&&(this.nZt=t),this.rZt=this.eZt,this.eZt=0,this.oZt=this.hZt,this.hZt=0,this.lZt=Math.min(this.aZt/1e3,1),this.aZt=0,this.xXt&&this.xXt.$Jt(),this.KYt.yjt(),this.aK()&&j_.mQt())}J$t(t,s){if(s){if(!this.iZt.has(t)){const s=z_.jn(z_.td);s.hd(this.QXt),this.iZt.set(t,s)}}else this.iZt.delete(t)}Y$t(t){const s=this.iZt.get(t);return s?s.qs():this.$j()}async pQt(t){const s=this.Wkt,i=this.Mq().vq();await i.ret(),i.Iit(t,this.Dx()),i===t&&this.nxt.aet(),this.KYt.bjt(),this.sQt(),s.dispatchEvent(this.TZt.beforelayoutchange),z_.pf.Rf(!0),await t.vit(i,this.Dx()),z_.pf.Rf(!1),await t.Pit(!1),s.dispatchEvent(this.TZt.layoutchange),this.Zq(),this.$Xt=!0,this.xY(),this.gKt()}Zq(){this._Xt=!0}PJt(){return this.xXt?this.xXt.PJt():null}RJt(){return this.xXt?this.xXt.RJt():null}Dx(){return this.xXt?this.xXt.Dx():null}IV(){const t=this.xXt;if(!t||t.IJt())return;const s=this.Dx(),i=s.UO(),e=i&&s.tx(),n=i&&s.pv();if(e&&s.IO(),!this._Xt&&!this.iJt())return void s.Yb();const r=this.yst.vq();this.eZt++,s.vO();const h=this.aK();h&&j_.aQt(),this._Xt=!1;let o=null;e&&(o=t.jJt().lA(),s.WO(o));let a=null;n&&(a=s._k(2*(1+r.hit())),s.Ik(0,1)),this.G9()&&"low"===t.Ptt()?s.PF(t.vtt(),t.btt()):s.RF(),this.gQt(this.Dx(),r),o&&s.VO(o),n&&(s.Pk(),this.xXt.qJt(a)),s.qb(),h&&(j_.yQt(),j_.wQt()),t&&t.HJt()}vet(t){return"low"===this.Dq().Ptt()||t.tx()&&(this.Ett()||this.G9())}gQt(t,s){t.xv(),t.JF(),t.Wb(),t.$F(1,1,1,1),t.AO(null),t.zF(null),t.xO(this.G9()),this.Sf().dispatchEvent(this.TZt.beforerender),this.vet(t)&&s.yet(t);const i=s.fit();for(let e=1;e<i;++e)s.Tet(t,e),t.pv()&&t.vk();this.vet(t)||s.yet(t),s.Met(t),this.Sf().dispatchEvent(this.TZt.afterrender)}tK(t,s,i){if(!this.NXt)return!1;const e=!this.kXt&&!this.nxt.BTt();let n=0;e&&(n=performance.now());const r=this.aK();r&&this.I3(!1);const h=this.nxt.ITt(this.yst,t,s,i);if(e){const t=performance.now()-n;this.aZt+=t,r&&j_.SQt(t)}return r&&this.I3(!0),h}nLt(t,s,i){if(!this.dFt())return this.tK(t,s,i);if(this.OTt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(!this.kXt&&!this.nxt.BTt())throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead");return this.nxt.RTt(this.yst,t,s,i)}async hH(t,s,i){if(!this.dFt())return this.tK(t,s,i);if(!this.NXt)return!1;if(this.OTt())return this.nxt.ATt(t,s,i);if(!this.vq())return this.nxt.ETt(t,s,i);const e=performance.now(),n=this.nxt.RTt(this.yst,t,s,i);let r=n.next();for(;!r.done;)await this._Tt(r.value),r=n.next();return this.Oj()||this.nxt.BTt()||(await this.nxt.DTt(),this.BXt&&!this.kXt&&this.FKt()),this.aZt+=performance.now()-e,r.value}rLt(t,s,i){const e=this.aK();e&&this.I3(!1);const n=this.nxt.LTt(this.yst,t,s,i);return e&&this.I3(!0),n}hLt(t,s,i){return this.nxt.NTt(this.yst,t,s,i)}oLt(t){return this.zXt.$u(t)}xTt(t){this.uXt.push(t)}MTt(){if(!this.uXt.length)throw new Error("layout stack empty");this.uXt.pop()}Uq(){return this.uXt.length?this.uXt.at(-1):this.vq()}Lj(t){return t&&-1!==t.qj()?this.YXt*t.qj():this.XXt}grt(){return this.XXt}yrt(){return this.YXt}kj(){return this.JXt}qj(){return this.k$t}Hj(t){(isNaN(t)||t<0)&&(t=0),this.k$t=t}oq(t){this.KXt=Math.max(t,0)}hq(){return this.KXt}uq(t){this.ZXt=Math.max(t,0)}lq(){return this.ZXt}Yj(){return this.rZt}Zj(){return this.oZt}Qj(){return this.lZt}vQt(){return this.qXt}$j(){return this.QXt.qs()}bQt(){return this.tZt.qs()}zj(){return this.sZt.qs()}Uj(){return this.DXt}xQt(){return this.LXt}MQt(){return this.mXt}Uz(){return this.LYt}zz(){return this.NYt}Yz(){return this.kYt}qz(){return this.BYt}Zz(){return this.$Yt}Bq(t){if(this.uZt)throw new Error("cannot call while loading state - wait until afterload event");return this.yXt.get(t)||null}SUt(t){if(this.uZt)throw new Error("cannot call while loading state - wait until afterload event");this.yXt.delete(t)}Qit(){this.yXt.clear();for(const t of this.nXt)if(!t.B7())for(const s of t.uY())this.yXt.set(s.RZ(),s)}dYt(){return"preview"===this.TYt}aK(){return this.EYt}sJ(){return this.TYt}mYt(){return"cordova"===this.TYt}TQt(){return"Android"===z_.Ks.Qs&&("cordova"===this.TYt||"playable-ad-single-file"===this.TYt||"playable-ad-zip"===this.TYt||"instant-games"===this.TYt)}GQt(){return this.t5}_Qt(){return this.GYt}iJ(){return this._Yt}CQt(){return this.CYt}kz(){return this.KYt}ONt(){return this.ZYt.ONt()}DNt(){return this.ZYt.DNt()}G9(){return this.MXt}IQt(){return this.Dx().ev(this.g9())}QS(t){return this.Dx().QS(t||this.g9())}EQt(){return this.$Xt}fq(t){t=!!t,this.GXt!==t&&(this.GXt=t,this.Mq().jet(),this.Zq())}pq(){return this.GXt}PQt(t){if(!this.eXt.has(t)){const s=()=>this.RQt(t);this.eXt.set(t,s),t.Sf().addEventListener("animationframeimagechange",s)}const s=this.Cw.bw(t);return s.Lw()||s.kw().then(()=>this.Zq()),s}RQt(t){this.Cw.Gw(t)}sXt(t){const s=[];for(const i of t.XBt())for(const t of i.W0()){const i=t.H0();s.push({source:t,width:i.My(),height:i.Gy(),tag:t.a1()})}return{Ow:s}}async iXt(t){const s=z_.jn(z_.jd),i=[],e=new Map;for(const n of t.XBt())for(const t of n.W0()){const n=t.H0().ikt();e.has(n)||(e.set(n,null),i.push(s.$u(async()=>{const t=await n.I6();e.set(n,t)})))}await Promise.all(i);const n=[];for(const i of t.XBt())for(const t of i.W0())n.push(s.$u(async()=>{const s=t.H0(),i=e.get(s.ikt()),n=await s.ekt(i);return{$w:await createImageBitmap(n)}}));const r=await Promise.all(n);for(const t of e.values())t instanceof ImageBitmap&&t.close&&t.close();return{Ow:r}}AQt(t){this.cZt=t,this.fZt=!1}FQt(){this.cZt="",this.fZt=!0}OQt(t){this.dZt=t}hOt(t){this.yK=t}DQt(){return this.pZt}nQt(){return!!(this.cZt||this.fZt||this.dZt||null!==this.yK)}async rQt(){if(this.cZt&&(this.xY(),await this.LQt(this.cZt),this.NQt()),this.dZt&&(await this.kQt(this.dZt),this.NQt(),this.aK()&&j_.BQt()),this.fZt){const t=await this.$Qt();this.pZt=t,await this.hH(z_.uH.lH.aH.WQt,null),this.pZt="",this.NQt()}if(null!==this.yK){this.xY();try{await this.UQt(this.yK),this.pZt=this.yK,await this.hH(z_.uH.lH.aH.VQt,null),this.pZt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.hH(z_.uH.lH.aH.zQt,null)}this.NQt()}}NQt(){this.cZt="",this.fZt=!1,this.dZt="",this.yK=null}vJ(){return this.mZt||(this.mZt=localforage._i({name:"c3-localstorage-"+this.Yz(),description:this.Uz()})),this.mZt}jQt(){return this.gZt||(this.gZt=localforage._i({name:"c3-savegames-"+this.Yz(),description:this.Uz()})),this.gZt}async LQt(t){const s=await this.$Qt();try{await this.jQt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.pZt=s,await this.hH(z_.uH.lH.aH.WQt,null),this.pZt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.hH(z_.uH.lH.aH.qQt,null)}}async kQt(t){try{const s=await this.jQt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.UQt(s),this.pZt=s,await this.hH(z_.uH.lH.aH.VQt,null),this.pZt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.hH(z_.uH.lH.aH.zQt,null)}}async $Qt(){const t={c3save:!0,version:1,rt:{time:this.$j(),timeRaw:this.bQt(),walltime:this.zj(),timescale:this.qj(),tickcount:this.Uj(),next_uid:this.gXt,running_layout:this.vq().H7(),start_time_offset:Date.now()-this.qXt},types:{},layouts:{},events:this.nxt.cst(),timelines:this.hot.cst(),user_script_data:null};for(const s of this.nXt)s.B7()||s.w$t()||(t.types[s.H7().toString()]=s.cst());for(const s of this.yst._q())t.layouts[s.H7().toString()]=s.cst();const s=this.HQt("save");return s.saveData=null,await this.Yit(s),t.user_script_data=s.saveData,JSON.stringify(t)}Vit(){return this.uZt}async UQt(t){const s=this.Mq(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(i.version>1)throw new Error("C3 save data from future version");this.oOt(),this.Wkt.dispatchEvent(z_.jn(z_.Event,"beforeload"));for(const t of this.IKt())t.wZ().w$t()||t.ynt();const e=i.rt;this.QXt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.tZt.Set(e.timeRaw),this.sZt.Set(e.walltime),this.k$t=e.timescale,this.DXt=e.tickcount,this.qXt=Date.now()-e.start_time_offset;const n=e.running_layout;this.uZt=!0;let r=!1;if(n!==this.vq().H7()){const t=s.Net(n);if(!t)return;await this.pQt(t),r=!0}for(const[t,e]of Object.entries(i.layouts)){const i=parseInt(t,10),n=s.Net(i);n&&n.fst(e)}const h=new Set;for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.x3(i);!e||e.B7()||e.w$t()||e.fst(s,h)}for(const t of this.yst._q())for(const s of t.QY())s.dst();if(this.xY(),this.Qit(),this.uZt=!1,r){for(const t of this.IKt())t.zit();for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.x3(i);!e||e.B7()||e.w$t()||e.M$t(s)}}this.gXt=e.next_uid,this.nxt.fst(i.events);for(const t of this.nXt)if(!t.B7()&&t.EZ())for(const s of t.uY()){const i=s.FZ();s.wWt();for(const e of t.wit().RY()){if(e===t)continue;const n=e.uY();if(i<0||i>=n.length)throw new Error("missing sibling instance");s.tet(n[i])}}this.hot.fst(i.timelines),s.zet(),s.jet();for(const t of h)t.RWt();this.aOt(),this.Wkt.dispatchEvent(z_.jn(z_.Event,"afterload")),this.Y5(this.HQt("afterload"));for(const[t,s]of Object.entries(i.types)){const s=parseInt(t,10),i=this.x3(s);i&&i.x$t()}const o=this.HQt("load");o.saveData=i.user_script_data,await this.Yit(o),this.Zq()}JQt(t,s){return s.zq().WVt()-t.zq().WVt()}Ezt(t,s){t.zq()&&(this.WZt.has(t)||(this.WZt.set(t,s),this.UZt.push(t)))}oOt(){this.WZt=new WeakMap,z_.bh(this.UZt),z_.pet.FUt()}aOt(t="full",s=null){this.UZt.sort(this.JQt),s||(s={}),s.wUt=new Set;const i=this.UZt.length;for(const i of this.UZt)i.Snt(this.WZt.get(i),t,s);for(const i of this.UZt)i.LWt(this.WZt.get(i),t,s);if(this.oOt(),i){this.xY(),this.Qit();for(const t of this.yst._q())for(const s of t.QY())s.F7(),s.Xq()}}async YQt(t){const s=t.map(t=>new URL(t,location.href).toString());this.EZt.XQt(s)}ZQt(t,s){this.EZt.KQt(t,s)}QQt(t,s){this.EZt.t0t(t,s)}s0t(t,s,i,e){return this.EZt.s0t(t,s,i,null,null,e)}i0t(t,s,i,e){return this.EZt.i0t(t,s,i,e)}e0t(){return this.EZt.n0t()}Nq(t,s){this.Uc("runtime","invoke-download",{url:t,filename:s})}async iYt(t,s,i,e,n,r){if(e=e||s,n=n||i,this.tj())return(await this.Qq("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:n,imageBitmapOpts:r})).imageBitmap;{const h=await self.C3_RasterSvgImageBlob(t,s,i,e,n);return r?await self.createImageBitmap(h,r):h}}async r0t(t){return this.tj()?await this.Qq("runtime","get-svg-image-size",{blob:t}):await self.C3_GetSvgImageSize(t)}h0t(){this.vZt||(this.vZt=!0,this.Uc("runtime","enable-device-orientation"))}o0t(){this.bZt||(this.bZt=!0,this.Uc("runtime","enable-device-motion"))}Sq(){return this.jXt()}a0t(t){this.jXt=t}FZt(){const t=this.Dx();return{fps:this.Yj(),tps:this.Zj(),cpu:this.Qj(),gpu:this.sq(),layout:this.vq()?this.vq().Pc():"",renderer:t.tx()?t.YO():t.YB()}}OTt(){return!!this.aK()&&j_.OTt()}_Tt(t){return this.dFt()?j_._Tt(t):Promise.resolve()}hIt(){return!!this.dFt()&&j_.l0t()}u0t(t){this.PYt=!!t,this.c0t()}f0t(){return this.PYt}dFt(){return this.RYt}I3(t){t?this.AYt--:this.AYt++,this.c0t()}c0t(){this.RYt=this.aK()&&this.PYt&&0===this.AYt}G_t(){return this.aK()&&j_.G_t()}Gtt(){return this.aK()&&this.Dx().UO()&&j_.Gtt()}async uQt(t){if(t)for(const s of t)await this._Tt(s)}fQt(t){return this.uQt(this.Wkt.Pf(t))}EMt(t){return this.nxt.EMt(t.name,t.params)}sH(t){if(this.tj())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}TJ(){return this.NZt}l3(){return this.kZt}HQt(t){const s=z_.jn(z_.Event,t,!1);return s.runtime=this.NZt,s}tKt(){this.NZt=new self.Az(this),this.GZt={pretick:this.HQt("pretick"),tick:this.HQt("tick"),tick2:this.HQt("tick2")}}eKt(){const t={};for(const s of this.nXt)t[s.iTt()]={value:s.HJ(),enumerable:!0,writable:!1};this.NZt.uj(t)}nKt(){const t={};for(const s of this.dj().lTt())t[s.iTt()]=s.eTt();this.NZt.cj(t)}Pq(){return this.$Zt}UJ(t,s){this.BZt.set(t,s)}iX(t){return this.BZt.get(t)}JH(t){if(!(t instanceof self.ZJ))throw new TypeError("expected IObjectClass");const s=this.iX(t);if(!(s&&s instanceof z_.Pwt))throw new Error("invalid IObjectClass");return s}oY(t){if(!(t instanceof self.yZ))throw new TypeError("expected IInstance");const s=this.iX(t);if(!(s&&s instanceof z_.Instance))throw new Error("invalid IInstance");return s}Vq(t){if(!(t instanceof self.e0))throw new TypeError("expected IWorldInstance");const s=this.iX(t);if(!(s&&s instanceof z_.Instance))throw new Error("invalid IInstance");return s}},self.C3_CreateRuntime=z_.gYt.e_,self.C3_InitRuntime=(t,s)=>t.W$t(s)}{const X_=self.Cs;X_.PZt=class extends X_.Vn{constructor(t,s){super(),this.Bc=t,this.d0t=new Map,this.p0t=0,this.m0t=s.inputPort,s.outputPort.onmessage=t=>this.g0t(t),this.y0t=s.maxNumWorkers,this.w0t=1,this.S0t=!1,this.v0t=!1}n0t(){return this.y0t}XQt(t){this.m0t.postMessage({type:"_import_scripts",scripts:t})}KQt(t,s){this.m0t.postMessage({type:"_send_blob",blob:t,id:s})}t0t(t,s){this.m0t.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}s0t(t,s,i,e,n,r){if(i||(i=[]),"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const h=this.p0t++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:h,params:s,transferables:i},a=new Promise((t,s)=>{this.d0t.set(h,{resolve:t,progress:e,reject:s,b0t:!1,x0t:r})});return n&&n.Xf(()=>this.M0t(h)),this.m0t.postMessage(o,i),this.T0t(),a}i0t(t,s,i,e){if(i||(i=[]),"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const n={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:this.p0t++,params:s,transferables:i};this.m0t.postMessage(n,i)}M0t(t){const s=this.d0t.get(t);s&&(s.b0t=!0,s.resolve=null,s.progress=null,s.reject=null,this.m0t.postMessage({type:"_cancel",jobId:t}))}g0t(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.G0t(e,s.result);break;case"progress":this._0t(e,s.progress);break;case"error":this.C0t(e,s.error);break;case"ready":this.I0t();break;default:throw new Error(`unknown message from worker '${i}'`)}}G0t(t,s){const i=this.d0t.get(t);if(!i)throw new Error("invalid job ID");i.b0t||i.resolve(s),this.d0t.delete(t)}_0t(t,s){const i=this.d0t.get(t);if(!i)throw new Error("invalid job ID");!i.b0t&&i.progress&&i.progress(s)}C0t(t,s){const i=this.d0t.get(t);if(!i)throw new Error("invalid job ID");i.b0t||i.reject(s),this.d0t.delete(t)}I0t(){this.S0t&&(this.S0t=!1,this.w0t++,this.w0t<this.y0t?this.T0t():this.m0t.postMessage({type:"_no_more_workers"}))}E0t(){let t=0;const s=[...this.d0t.values()].sort((t,s)=>(t.x0t||1/0)-(s.x0t||1/0));for(const i of s)t<(i.x0t||1/0)&&t++;return t}async T0t(){if(!(this.w0t>=this.y0t||this.S0t||this.v0t||this.E0t()<=this.w0t))try{this.S0t=!0,(await this.Bc.Qq("runtime","create-job-worker")).outputPort.onmessage=t=>this.g0t(t)}catch(t){this.v0t=!0,this.S0t=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.w0t} so far)`,t)}}}}self.C3_Shaders={};{let Z_=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const t=""+i,s=""+e;return t<s?-1:t>s?1:0}};ForEachOrdered_SortInstances=Z_;const K_=self.Cs;let Q_=null,tC="",sC="",iC=[],eC="",nC="",rC="";const hC=K_.jn(K_.tMt);K_.uH.lH=class extends K_.hDt{constructor(t){super(t),this.Yxt=this.Bc.dj()._3(),this.Obt=this.Bc.dj()._j(),this.P0t=0,this.R0t=0,this.A0t=new Map}qn(){super.qn()}Zq(){this.Bc.Zq()}tK(t){this.Bc.tK(t,null,null)}F0t(t,s){return Q_&&t===tC&&s===sC||(Q_=new RegExp(t,s),tC=t,sC=s),Q_.lastIndex=0,Q_}O0t(t,s,i){if(t===eC&&s===nC&&i===rC)return iC;const e=this.F0t(s,i);return iC=t.match(e),eC=t,nC=s,rC=i,iC}async D0t(t,s){if(!s.length)return;this.P0t+=s.length;const i=[];for(const e of s)i.push(t.xit(e));await K_.Uh(i,()=>{this.R0t++}),this.R0t++,this.R0t===this.P0t&&(this.R0t=0,this.P0t=0,this.Bc.tK(K_.uH.lH.aH.L0t,null,null))}X5(){return 0===this.P0t?1:this.R0t/this.P0t}N0t(t,s){for(const i of s)0===i.pY()&&t._it(i)}k0t(){return hC}B0t(t){const s=this.Bc.dj(),i=s._j(),e=i.T3(),n=e.Sj(),r=n.M3(),h=e.Dxt(),o=i.G3(n),a=s._3(),l=a.G3();if(l.Kxt(t),h)for(let i=0;i<t&&!l.D3();++i)s.P3(r),l.F3(i),n.R3(e,o),s.A3(r);else for(let s=0;s<t&&!l.D3();++s)l.F3(s),n.R3(e,o);return i.L3(),a.L3(),!1}*$0t(t){const s=this.Bc.dj(),i=s._j(),e=i.T3(),n=e.Sj(),r=n.M3(),h=e.Dxt(),o=i.G3(n),a=s._3(),l=a.G3();if(l.Kxt(t),h)for(let i=0;i<t&&!l.D3();++i)s.P3(r),l.F3(i),yield*n.yIt(e,o),s.A3(r);else for(let s=0;s<t&&!l.D3();++s)l.F3(s),yield*n.yIt(e,o);return i.L3(),a.L3(),!1}W0t(){const t=this.Bc.dj(),s=t._j(),i=s.T3(),e=i.Sj(),n=e.M3(),r=i.Dxt(),h=s.G3(e),o=t._3(),a=o.G3();if(r)for(let s=0;!a.D3();++s)t.P3(n),a.F3(s),e.R3(i,h)||a.c1(),t.A3(n);else for(let t=0;!a.D3();++t)a.F3(t),e.R3(i,h)||a.c1();return s.L3(),o.L3(),!1}*U0t(){const t=this.Bc.dj(),s=t._j(),i=s.T3(),e=i.Sj(),n=e.M3(),r=i.Dxt(),h=s.G3(e),o=t._3(),a=o.G3();if(r)for(let s=0;!a.D3();++s)t.P3(n),a.F3(s),(yield*e.yIt(i,h))||a.c1(),t.A3(n);else for(let t=0;!a.D3();++t)a.F3(t),(yield*e.yIt(i,h))||a.c1();return s.L3(),o.L3(),!1}V0t(t,s,i){const e=this.Bc.dj(),n=e._j(),r=n.T3(),h=r.Sj(),o=h.M3(),a=r.Dxt(),l=n.G3(h),u=e._3(),c=u.G3();if(c.C3(t),c.Kxt(i),i<s)if(a)for(let t=s;t>=i&&!c.D3();--t)e.P3(o),c.F3(t),h.R3(r,l),e.A3(o);else for(let t=s;t>=i&&!c.D3();--t)c.F3(t),h.R3(r,l);else if(a)for(let t=s;t<=i&&!c.D3();++t)e.P3(o),c.F3(t),h.R3(r,l),e.A3(o);else for(let t=s;t<=i&&!c.D3();++t)c.F3(t),h.R3(r,l);return n.L3(),u.L3(),!1}*z0t(t,s,i){const e=this.Bc.dj(),n=e._j(),r=n.T3(),h=r.Sj(),o=h.M3(),a=r.Dxt(),l=n.G3(h),u=e._3(),c=u.G3();if(c.C3(t),c.Kxt(i),i<s)if(a)for(let t=s;t>=i&&!c.D3();--t)e.P3(o),c.F3(t),yield*h.yIt(r,l),e.A3(o);else for(let t=s;t>=i&&!c.D3();--t)c.F3(t),yield*h.yIt(r,l);else if(a)for(let t=s;t<=i&&!c.D3();++t)e.P3(o),c.F3(t),yield*h.yIt(r,l),e.A3(o);else for(let t=s;t<=i&&!c.D3();++t)c.F3(t),yield*h.yIt(r,l);return n.L3(),u.L3(),!1}j0t(t){const s=t.cY(),i=s.uY();if(0===i.length)return!1;const e=this.Bc.dj(),n=e._j(),r=n.T3(),h=r.Sj(),o=h.M3(),a=r.Dxt(),l=n.G3(h),u=e._3(),c=u.G3(),f=t.EZ(),d=hC.G3();if(K_.Gh(d,i),c.Kxt(d.length),a)for(let s=0,i=d.length;s<i&&!c.D3();++s){e.P3(o);const i=d[s];t.cY().Jbt(i),f&&i.R_t(),c.F3(s),h.R3(r,l),e.A3(o)}else{s.jbt(!1);const t=s.qbt();K_.bh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.D3();++s){const i=d[s];t[0]=i,f&&i.R_t(),c.F3(s),h.R3(r,l)}}return n.L3(),u.L3(),K_.bh(d),hC.L3(),!1}*q0t(t){const s=t.cY(),i=s.uY();if(0===i.length)return!1;const e=this.Bc.dj(),n=e._j(),r=n.T3(),h=r.Sj(),o=h.M3(),a=r.Dxt(),l=n.G3(h),u=e._3(),c=u.G3(),f=t.EZ(),d=hC.G3();if(K_.Gh(d,i),c.Kxt(d.length),a)for(let s=0,i=d.length;s<i&&!c.D3();++s){e.P3(o);const i=d[s];t.cY().Jbt(i),f&&i.R_t(),c.F3(s),yield*h.yIt(r,l),e.A3(o)}else{s.jbt(!1);const t=s.qbt();K_.bh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.D3();++s){const i=d[s];t[0]=i,f&&i.R_t(),c.F3(s),yield*h.yIt(r,l)}}return n.L3(),u.L3(),K_.bh(d),hC.L3(),!1}H0t(t,s){const i=t.cY(),e=i.uY();if(0===e.length)return!1;const n=this.Bc.dj(),r=n._j(),h=n.HMt(),o=r.T3(),a=o.Sj(),l=a.M3(),u=o.Dxt(),c=r.G3(a),f=n._3(),d=f.G3(),p=t.EZ(),m=hC.G3();K_.bh(m),d.Kxt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.ARt(1,t)]);if(m.sort(Z_),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.D3();++s){n.P3(l);const i=m[s][0];t.cY().Jbt(i),p&&i.R_t(),d.F3(s),a.R3(o,c),n.A3(l)}else{i.jbt(!1);const t=i.qbt();K_.bh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.D3();++s){const i=m[s][0];t[0]=i,p&&i.R_t(),d.F3(s),a.R3(o,c)}}return r.L3(),f.L3(),K_.bh(m),hC.L3(),!1}*J0t(t,s){const i=t.cY(),e=i.uY();if(0===e.length)return!1;const n=this.Bc.dj(),r=n._j(),h=n.HMt(),o=r.T3(),a=o.Sj(),l=a.M3(),u=o.Dxt(),c=r.G3(a),f=n._3(),d=f.G3(),p=t.EZ(),m=hC.G3();K_.bh(m),d.Kxt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.ARt(1,t)]);if(m.sort(Z_),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.D3();++s){n.P3(l);const i=m[s][0];t.cY().Jbt(i),p&&i.R_t(),d.F3(s),yield*a.yIt(o,c),n.A3(l)}else{i.jbt(!1);const t=i.qbt();K_.bh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.D3();++s){const i=m[s][0];t[0]=i,p&&i.R_t(),d.F3(s),yield*a.yIt(o,c)}}return r.L3(),f.L3(),K_.bh(m),hC.L3(),!1}Y0t(t,s){let i=this.A0t.get(t);return i||(s?(i={X0t:null,Z0t:new Map},this.A0t.set(t,i),i):null)}K0t(t,s,i,e,n){s.yj().FIt(i,s.xj()),e&&t.A3(n)}*Q0t(t,s,i,e,n){yield*s.yj().OIt(i,s.xj()),e&&t.A3(n)}}}{const oC=self.Cs;oC.uH.lH.SBt=class extends oC.Vn{constructor(t){super(),this._bt=t,this.Bc=t.yH(),this.JDt=t.QJ()}RDt(){}qn(){this._bt=null,this.Bc=null,this.JDt=null}}}{const aC=self.Cs;aC.uH.lH.Instance=class extends aC.Vn{constructor(t,s){super(),this.di=t,this._bt=this.di.wZ(),this.tLt=this._bt.aAt(),this.Bc=this.di.yH()}qn(){this.di=null,this._bt=null,this.tLt=null,this.Bc=null}}}{const lC=self.Cs,uC=[];lC.uH.lH.aH={t1t:()=>!0,Zit:()=>!0,het:()=>!0,UKt:()=>!0,VKt:()=>!0,Oj(){return this.Bc.Oj()},mCt(){const t=this.Bc.qMt();return!t.Pxt()&&!t.Ixt()},s1t(){const t=this.Bc.HMt().SRt();let s=t.get("TriggerOnce_lastTick");void 0===s&&(s=-1,t.set("TriggerOnce_lastTick",-1));const i=this.Bc.Uj();return t.set("TriggerOnce_lastTick",i),this.Bc.EQt()||s!==i-1},i1t(t){const s=this.Bc.HMt().SRt(),i=s.get("Every_lastTime")||0,e=this.Bc.$j();s.has("Every_seconds")||s.set("Every_seconds",t);const n=s.get("Every_seconds");return e>=i+n?(s.set("Every_lastTime",i+n),e>=s.get("Every_lastTime")+.04&&s.set("Every_lastTime",e),s.set("Every_seconds",t),!0):(e<i-.1&&s.set("Every_lastTime",e),!1)},RGt(t){const s=this.Bc.dj().dTt(t);return s&&s.RGt()},dYt(){return this.Bc.dYt()},oi:()=>lC.Ks.oi,xKt:()=>!0,oH:()=>!0,e1t:()=>!0,WQt:()=>!0,qQt:()=>!0,VQt:()=>!0,zQt:()=>!0,n1t(t){return!!this.Bc.Bq(t)},r1t(t){switch(t){case 0:return"browser"===lC.Ks.ri;case 1:return"iOS"===lC.Ks.Qs;case 2:return"Android"===lC.Ks.Qs;case 8:return"cordova"===lC.Ks.ri;case 9:return"scirra-arcade"===this.Bc.sJ();case 13:return"windows-uwp"===this.Bc.sJ();default:return!1}},h1t(t,s,i){return this.F0t(s,i).test(t)},o1t:(t,s,i)=>lC.compare(t,s,i),a1t:(t,s,i)=>t>=s&&t<=i,l1t:(t,s,i)=>lC.compare(t.Lct(),s,i),u1t:t=>!!t.Lct(),c1t(t,s){const i=this.Bc.$j();if(0===t){const t=this.Bc.HMt().SRt();return!t.get("CompareTime_executed")&&i>=s&&(t.set("CompareTime_executed",!0),!0)}return lC.compare(i,t,s)},f1t:t=>isNaN(t),IOt:(t,s,i)=>lC.hr(lC.Qn(t),lC.Qn(i))<=lC.Qn(s),EOt:(t,s)=>lC.lr(lC.Qn(t),lC.Qn(s)),BAt(t,s,i){let e=lC.Qn(t),n=lC.Qn(s),r=lC.Qn(i);return lC.lr(r,n)?lC.lr(e,n)&&!lC.lr(e,r):!(!lC.lr(e,n)&&lC.lr(e,r))},d1t:(t,s)=>"number"==typeof t?0===s:1===s,p1t:t=>!!t,lGt(t){return t.toLowerCase()===this.Bc.dj().dGt()},m1t(t,s,i,e){if(!t)return!1;const n=this.k0t(),r=n.G3(),h=t.cY();lC.Gh(r,h.uY()),h.kbt()&&lC.bh(h.Hbt());const o=this.Bc.HMt();let a=0;for(let t=0,n=r.length;t<n;++t){const n=r[t];r[a]=n,s=o.ARt(1,t),e=o.ARt(3,t),lC.compare(s,i,e)?++a:h.zbt(n)}lC.Sh(r,a),h.Ybt(r);const l=!!r.length;return lC.bh(r),n.L3(),t._It(),l},g1t(t,s){if(!t)return!1;const i=this.k0t(),e=i.G3(),n=t.cY();lC.Gh(e,n.uY()),n.kbt()&&lC.bh(n.Hbt());const r=this.Bc.HMt();let h=0;for(let t=0,s=e.length;t<s;++t){const s=e[t];e[h]=s,r.ARt(1,t)?++h:n.zbt(s)}lC.Sh(e,h),n.Ybt(e);const o=!!e.length;return lC.bh(e),i.L3(),t._It(),o},y1t(t,s,i){if(!t)return!1;const e=t.cY(),n=e.uY();if(0===n.length)return!1;const r=this.Bc.HMt();let h=null,o=0;for(let t=0,e=n.length;t<e;++t){const e=n[t];i=r.ARt(2,t),(null===h||0===s&&i<o||1===s&&i>o)&&(o=i,h=e)}return e.txt(h),t._It(),!0},w1t(t,s){if(!t)return!1;const i=t.cY(),e=i.uY();if((s=Math.floor(s))>=e.length)return!1;const n=e[s];return i.txt(n),t._It(),!0},S1t(t){if(!t)return!1;const s=t.cY(),i=s.uY(),e=Math.floor(this.Bc.Sq()*i.length);if(e>=i.length)return!1;const n=i[e];return s.txt(n),t._It(),!0},v1t:t=>!!t&&(!!t.pY()&&(t.cY().jbt(!0),t._It(),!0)),b1t(t,s,i){if(!t)return!1;const e=t.cY(),n=e.uY(),r=this.Bc.Sj().sxt(),h=this.Bc.HMt().pRt();e.kbt()?(lC.Gh(uC,n),e.Nbt(),e.jbt(!1)):r?(lC.Gh(uC,e.Hbt()),lC.bh(e.Hbt())):(lC.Gh(uC,e.qbt()),lC.bh(e.qbt()));for(let t=0,n=uC.length;t<n;++t){const n=uC[t];lC.xor(n.zq().cQ(s,i),h)?e.Vbt(n):e.zbt(n)}return t._It(),lC.xor(!!e.qbt().length,h)},x1t(t){if(!t)return!1;const s=t.B7();let i=null;const e=this.Bc.a$t();for(let n=e.length-1;n>=0;--n){const r=e[n];if(s){if(r.wZ().pAt(t)){i=r;break}}else if(r.wZ()===t){i=r;break}}if(!i){const s=t.uY();s.length&&(i=s.at(-1))}return!!i&&(t.cY().txt(i),t._It(),!0)},M1t(t){return this.Bc.dFt()?this.$0t(t):this.B0t(t)},T1t(){return this.Bc.dFt()?this.U0t():this.W0t()},G1t(t,s,i){return this.Bc.dFt()?this.z0t(t,s,i):this.V0t(t,s,i)},zd(t){return this.Bc.dFt()?this.q0t(t):this.j0t(t)},_1t(t,s,i){return this.Bc.dFt()?this.J0t(t,i):this.H0t(t,i)},C1t:t=>!!t&&t.CX(),I1t:t=>!!t&&t.DX(),E1t:t=>!!t&&t.AX(),P1t:t=>!!t&&!t.pY(),R1t:(t,s,i)=>!!t&&lC.compare(100*t.BF(),s,i),A1t(t){const s=this.Bc.vq();return!!s&&s.oit(t)},L0t:()=>!0,F1t(){return this.P0t>0},O1t(t,s){const i=this.Bc.yWt();return!!i&&!!s&&!!i.Ewt(t,s)}}}{let cC=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]},fC=function(t,s){return t[1]-s[1]};SortZOrderList=cC,SortInstancesByValue=fC;const dC=self.Cs,pC=[],mC=[],gC=dC.jn(dC.Rect),yC=dC.jn(dC.To),wC=[];dC.uH.lH._dt={D1t(t,s){t.wft(s)},L1t(t,s){t.Qi()&&"number"!=typeof s&&(s=parseFloat(s)),t.wft(t.Lct()+s)},N1t(t,s){t.Qi()&&t.wft(t.Lct()-s)},k1t(t,s){t.wft(!!s)},B1t(t){t.wft(!t.Lct())},$1t(t){t.wft(t.jMt())},W1t(t){this.Bc.dj().cTt(t)},U1t(t,s,i,e,n,r){if(!t||!s)return;const h=this.Bc.gY(t,s,i,e,n,r);if(!h)return;n&&s.yY(h);const o=this.Bc.dj();o.wY(!0),h.SY(),o.wY(!1);const a=new Map;h.aWt(a,t,n);for(const[t,s]of a)t.cY().Xbt(s)},V1t(t,s,i,e,n,r){if(!t||!s)return;const h=this.Bc.CKt(t);h&&dC.uH.lH._dt.U1t.call(this,h,s,i,e,n,r)},N7(t,s,i,e,n,r,h,o,a,l,u){if(!t)return;const c=this.Bc.Uq();let f=c;if(r){const t=this.Bc.Mq().Let(r);if(!t)return;f=t}let d=null;if(("number"!=typeof h||h>=0)&&(d=f.jq(h),!d))return;let p=null;if(("number"!=typeof o||o>=0)&&(p=c.jq(o),!p))return;gC.set(s,i,e,n);const m=f.N7(t,gC,d,p,a,l,u);t.cY().Ybt(m),t._It()},z1t(){const t=this.Yxt;t.jxt()&&t.Vxt().c1()},AGt(t,s){const i=this.Bc.dj().dTt(t);i&&(0===s?i.AGt(!1):1===s?i.AGt(!0):i.AGt(!i.RGt()))},j1t(t){this.Bc.Hj(t)},q1t(t,s){if(s<0&&(s=0),!t)return;const i=t.cY().uY();for(const t of i)t.Hj(s)},H1t(t){if(!t)return;const s=t.cY().uY();for(const t of s)t.kZ()},ph(t,s){if(t<0)return;const i=this.Bc.dj().HTt();return s?i.ZOt(t):i.KOt(t),!0},Rj(t){return this.Bc.dj().HTt().QOt(t),!0},J1t(){const t=this.Bc.dj();return t.HTt().tDt(t.aGt()),!0},Ej(t){this.Bc.dj().Ej(t)},async rH(t,s,i,e,n,r){const h=this.Bc.Dq();h&&(this.Zq(),await h.rH(0===t?"image/png":"image/jpeg",s/100,i,e,n,r),await this.Bc.hH(dC.uH.lH.aH.oH,null))},Y1t(t,s){if(t<=0||s<=0)return;this.Bc.gJt(t,s),this.Bc.Uq().ist();const i=this.Bc.Dq();i&&("off"===i.lJt()||this.Bc.EKt(t,s),i.rR(i.b2(),i.M2(),!0),this.Bc.Zq())},X1t(t){const s=this.Bc.Dq();s&&"off"!==s.lJt()&&(s.MJt(0!==t?"high":"low"),s.rR(s.b2(),s.M2(),!0))},tct(t){this.Bc.AQt(t)},Z1t(){this.Bc.FQt()},K1t(t){this.Bc.OQt(t)},Q1t(t){this.Bc.hOt(t)},t2t(t){},s2t(){for(const t of this.Bc.Mq()._q())t.met()},i2t(t){this.Bc.fq(0!==t)},e2t(t,s){this.Bc.uq(1/t),this.Bc.oq(1/s)},n2t(t,s){this.Bc.oq(t),this.Bc.uq(s)},r2t(t){this.Bc.nq(["vsync","unlimited-tick","unlimited-frame"][t])},h2t(t,s){if(!t)return;const i=t.cY().uY(),e=pC,n=mC,r=this.Bc.Uq(),h=t.B7(),o=t.YEt();for(let t=0,r=i.length;t<r;++t){const r=i[t],a=r.zq();if(!a)continue;let l;l=h?r.wpt(s+r.wZ().JEt(o)):r.wpt(s),e.push([a.jq().Rz(),a.qq()]),n.push([r,l])}if(!e.length)return;e.sort(cC),n.sort(fC);let a=!1;for(let t=0,s=e.length;t<s;++t){const s=n[t][0],i=r.Hq(e[t][0]),h=e[t][1],o=i.Jq();o[h]!==s&&(o[h]=s,s.zq().Yq(i,!0),i.Xq(s),a=!0)}a&&this.Bc.Zq(),dC.bh(pC),dC.bh(mC)},zH(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.Bc.kz().zH(t,s)},o2t(t){if(this.Bc.Nw())return;const s=this.Bc.Mq();s.Iq()||s.Eq(t)},a2t(t){if(this.Bc.Nw())return;const s=this.Bc.Mq();if(s.Iq())return;const i=s.Let(t);i&&s.Eq(i)},l2t(t){if(this.Bc.Nw())return;const s=this.Bc.Mq();if(s.Iq())return;const i=s._q(),e=i.indexOf(s.vq());if(t&&0===e)return;if(!t&&e===i.length-1)return;const n=i[e+(t?-1:1)];s.Eq(n)},u2t(){if(this.Bc.Nw())return;const t=this.Bc.Mq();t.Iq()||(t.Eq(t.vq()),this.Bc.dj().yTt())},c2t(t,s){t&&t.GX(s)},f2t(t,s){t&&t.PX(s)},d2t(t,s){t&&t.FX(s)},p2t(t,s){t&&t.WF(s/100)},m2t(t,s){t&&t.LX(s)},g2t(t,s){t&&t.BX(s)},y2t(t,s){t&&t.$Y(dC.Qn(+s))},w2t(t,s,i){t&&(t.nZ(!0),t.UY(s),t.zY(i))},S2t(t){t&&t.nZ(!1)},v2t(t,s,i){t&&t.y9(s/100,i/100)},b2t(t,s){t&&t.vM(+s)},x2t(t,s){t&&t.JX(1===s)},M2t(t,s){if(!t)return;yC.ta(s),yC.Zn();const i=t.eZ();i.qo(yC)||(i.No(yC),this.Zq())},T2t(t,s){t&&t.ZX(s)},G2t(t,s){t&&t.eM(s)},_2t(t,s,i){if(!t)return;const e=t.OY().zft(i);if(!e)return;const n=1===s;e.x_t()!==n&&(e.Hzt(n),t._0(),this.Bc.Zq())},C2t(t,s,i,e){if(!t)return;const n=t.OY(),r=n.zft(s);if(!r)return;i=Math.floor(i);const h=r.rC().oC(i);h&&("color"===h?(yC.ta(e),e=yC):"percent"===h&&(e/=100),n.I0(r.Rz(),i,e)&&r.x_t()&&this.Bc.Zq())},I2t(t,s){t&&t.tZ(s)},E2t(t){this.Bc.Uq().kY(+t)},P2t(t){this.Bc.Uq().$Y(dC.Qn(+t))},R2t(t,s){const i=this.Bc.Uq(),e=i.OY().zft(s);if(!e)return;const n=1===t;e.x_t()!==n&&(e.Hzt(n),i._0(),this.Bc.Zq())},A2t(t,s,i){const e=this.Bc.Uq().OY(),n=e.zft(t);if(!n)return;s=Math.floor(s);const r=n.rC().oC(s);r&&("color"===r?(yC.ta(i),i=yC):"percent"===r&&(i/=100),e.I0(n.Rz(),s,i)&&n.x_t()&&this.Bc.Zq())},F2t(t,s){this.Bc.Uq().cX(t/100,s/100)},O2t(t){const s=this.Bc.Uq();0===t?s.pX():s.mX()},D2t(t){this.Bc.Uq().UY(t)},L2t(t){this.Bc.Uq().zY(t)},N2t(t,s){const i=this.Bc.Uq();i.UY(t),i.zY(s)},k2t(t){if(!t)return;const s=t.sFt();if(!s)return;const i=s.zq();if(!i)return;const e=this.Bc.Uq();e.UY(i.pM()),e.zY(i.yM())},eX(t,s,i){const e=this.Bc.Uq();try{e.eX(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},rX(t,s,i){if(!t)return;const e=this.Bc.Uq();try{e.rX(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}},oX(t){t&&this.Bc.Uq().oX(t)},lX(){this.Bc.Uq().lX()},async B2t(t){const s=this.Bc.vq();if(!s||!t||this.Bc.Nw())return;const i=t.B7()?t.PY():[t];await this.D0t(s,i)},async $2t(t){await dC.uH.lH._dt.B2t.call(this,this.Bc.CKt(t))},W2t(t){const s=this.Bc.vq();if(!s||!t)return;const i=t.B7()?t.PY():[t];this.N0t(s,i)},U2t(t){dC.uH.lH._dt.W2t.call(this,this.Bc.CKt(t))},V2t(){const t=this.Bc.vq();if(!t)return;const s=t.Sit();this.N0t(t,s)},async z2t(t){const s=this.Bc.vq();t&&s&&!this.Bc.Nw()&&await this.D0t(s,t.git())},async j2t(t){const s=this.Bc.vq(),i=this.Bc.Mq().Let(t);i&&s&&!this.Bc.Nw()&&await this.D0t(s,i.git())},Ij(t){const s=this.Obt.Gj();if(s)switch(s.Cj()){case 1:"number"==typeof t&&s.Ij(t);break;case 2:"string"==typeof t&&s.Ij(t);break;case 3:s.Ij(t)}},q2t(t,s,i){const e=this.Y0t(t.toLowerCase(),!0),n=e.Z0t,r=s.toLowerCase();n.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`);const h=dC.$h(n.values())||e.X0t;h&&0!==h.Mj()!=(0!==i.Mj())?console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`):n.set(r,i)},H2t(t,s){const i=this.Y0t(t.toLowerCase(),!0);i.X0t&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`);const e=dC.$h(i.Z0t.values())||i.X0t;e&&0!==e.Mj()!=(0!==s.Mj())?console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`):i.X0t=s},J2t(t,s,i){const e=this.Bc,n=e.dFt()?wC:null;i=Math.floor(i);const r=this.Y0t(t.toLowerCase(),!1);if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),n;let h=r.Z0t.get(s.toLowerCase());if(!h){if(!r.X0t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),n;h=r.X0t,i=0}if(!h.Cu())return n;if(0!==h.Mj())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),n;const o=e.dj(),a=o.Sj(),l=a.wj(),u=l.length>0;u&&(h.xj()?o.P3(l):o.jTt(l));const c=[],f=o.kGt(a);if(f){const t=f.$Gt();for(let s=i,e=t.length;s<e;++s)c.push(t[s].Lct())}const d=h.$Gt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].jMt());return e.dFt()?this.Q0t(o,h,c,u,l):this.K0t(o,h,c,u,l)}}}{const SC=self.Cs;SC.uH.lH.Cdt={Y2t:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t)&&(t=0)),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t)&&(t=0)),t},P:t=>t.toString(),Nt:t=>"string"==typeof t?t.length:0,random(t,s){return void 0===s?this.Bc.Sq()*t:this.Bc.Sq()*(s-t)+t},FEt(...t){return t[Math.floor(this.Bc.Sq()*t.length)]},X2t:(t,...s)=>("number"!=typeof t&&(t=0),s[t=SC.Zn(Math.floor(t),0,s.length-1)]),Z2t:()=>Math.PI,K2t:()=>1/0,sqrt:t=>Math.sqrt(t),abs:t=>Math.abs(t),round:t=>Math.round(t),Q2t(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor:t=>Math.floor(t),ceil:t=>Math.ceil(t),sign:t=>Math.sign(t),sin:t=>Math.sin(SC.Qn(t)),cos:t=>Math.cos(SC.Qn(t)),tan:t=>Math.tan(SC.Qn(t)),asin:t=>SC.tr(Math.asin(t)),acos:t=>SC.tr(Math.acos(t)),atan:t=>SC.tr(Math.atan(t)),exp:t=>Math.exp(t),Vt:t=>Math.log(t),log10:t=>Math.log10(t),max(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s<e&&(s=e)}return s},min(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s>e&&(s=e)}return s},Zn:(t,s,i)=>SC.Zn(t,s,i),bt:(t,s,i,e)=>SC.er(t,s,i,e),angle:(t,s,i,e)=>SC.tr(SC.rr(t,s,i,e)),Ct:(t,s,i)=>SC.Ct(t,s,i),mr:(t,s,i)=>SC.mr(t,s,i),yr:(t,s,i,e)=>SC.yr(t,s,i,e),wr:(t,s,i,e,n)=>SC.wr(t,s,i,e,n),Sr:(t,s,i)=>SC.Sr(t,s,i),t3t:(t,s)=>SC.tr(SC.hr(SC.Qn(t),SC.Qn(s))),s3t:(t,s,i)=>SC.tr(SC.ur(SC.Qn(t),SC.Qn(s),i)),i3t:(t,s,i)=>SC.tr(SC.ar(SC.Qn(t),SC.Qn(s),SC.Qn(i))),e3t:(t,s,i)=>(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s,n3t:(t,s)=>(t|=0)^1<<s,r3t:(t,s)=>(t|=0)&1<<(s|=0)?1:0,h3t:()=>"\n",o3t:t=>"string"==typeof t?t.toUpperCase():"",a3t:t=>"string"==typeof t?t.toLowerCase():"",left:(t,s)=>"string"==typeof t?t.substr(0,s):"",mid:(t,s,i)=>"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i),right:(t,s)=>"string"==typeof t?t.substr(Math.max(t.length-s,0)):"",trim:t=>"string"==typeof t?t.trim():"",l3t(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},u3t:(t,s)=>"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0,find:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(SC.Zi(s),"i")):-1,c3t:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(SC.Zi(s),"")):-1,replace:(t,s,i)=>"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(SC.Zi(s),"gi"),i):"string"==typeof t?t:"",f3t(t,...s){let i=t;for(let t=0,e=s.length;t<e;++t)i=i.replaceAll(`{${t}}`,s[t].toString());return i},d3t(t,s,i){const e=this.F0t(s,i);return t?t.search(e):-1},p3t(t,s,i,e){const n=this.F0t(s,i);return t?t.replace(n,e):""},m3t(t,s,i){const e=this.O0t(t.toString(),s,i);return e?e.length:0},g3t(t,s,i,e){e=Math.floor(e);const n=this.O0t(t.toString(),s,i);return!n||e<0||e>=n.length?"":n[e]},y3t(t,s){let i=t<0?"-":"";t<0&&(t=-t);const e=s-t.toString().length;return i+="0".repeat(Math.max(e,0)),i+t.toString()},w3t:t=>encodeURIComponent(t),S3t:t=>decodeURIComponent(t),Dj(){return this.Bc.grt()},v3t(){return this.Bc.yrt()},b3t(){return this.Bc.qj()},x3t(){return(Date.now()-this.Bc.vQt())/1e3},M3t:()=>Date.now(),time(){return this.Bc.$j()},T3t(){return this.Bc.Uj()},G3t(){return this.Bc.MQt()},Jj(){return this.Bc.Yj()},_3t(){return this.Bc.Qj()},C3t(){return this.Bc.sq()},I3t(){return this.Bc.Dq().mJ()},E3t(){return this.Bc.Dq().yJ()},P3t(){return this.Bc.ij()},R3t(){return this.Bc.nj()},A3t(){return this.Bc.ij()},F3t(){return this.Bc.nj()},O3t(){return this.Bc.Uq().VY()},D3t(){return this.Bc.Uq().jY()},L3t(){return this.Bc.Uq().Pc()},N3t(){return this.Bc.Uq().BY()},k3t(){return SC.tr(this.Bc.Uq().WY())},B3t(){return this.Bc.Uq().My()},$3t(){return this.Bc.Uq().Gy()},W3t(){return 100*this.Bc.Uq().sit()},U3t(){return 100*this.Bc.Uq().iit()},V3t(t){const s=this.Bc.Uq().jq(t);return s?s.u9().Qa():0},z3t(t){const s=this.Bc.Uq().jq(t);return s?s.u9().tl():0},j3t(t){const s=this.Bc.Uq().jq(t);return s?s.u9().sl():0},q3t(t){const s=this.Bc.Uq().jq(t);return s?s.u9().il():0},H3t(t){const s=this.Bc.Uq().jq(t);return s?s.u9().width():0},J3t(t){const s=this.Bc.Uq().jq(t);return s?s.u9().height():0},Y3t(t){const s=this.Bc.Uq().jq(t);if(s){const t=s.u9();return(t.Qa()+t.sl())/2}return 0},X3t(t){const s=this.Bc.Uq().jq(t);if(s){const t=s.u9();return(t.tl()+t.il())/2}return 0},Z3t(t,s,i){const e=this.Bc.Uq().jq(t);return e?e.aZ(s,i)[0]:0},K3t(t,s,i){const e=this.Bc.Uq().jq(t);return e?e.aZ(s,i)[1]:0},Q3t(t,s,i){const e=this.Bc.Uq().jq(t);return e?e.uZ(s,i)[0]:0},t4t(t,s,i){const e=this.Bc.Uq().jq(t);return e?e.uZ(s,i)[1]:0},s4t(t,s,i,e){const n=this.Bc.Uq(),r=n.jq(t),h=n.jq(s);if(!r||!h||r===h)return i;const[o,a]=r.uZ(i,e);return h.aZ(o,a)[0]},i4t(t,s,i,e){const n=this.Bc.Uq(),r=n.jq(t),h=n.jq(s);if(!r||!h||r===h)return e;const[o,a]=r.uZ(i,e);return h.aZ(o,a)[1]},e4t(t){const s=this.Bc.Uq().jq(t);return s?s.NX():0},n4t(t){const s=this.Bc.Uq().jq(t);return s?SC.tr(s.WX()):0},r4t(t){const s=this.Bc.Uq().jq(t);return s?100*s.BF():0},h4t(t){const s=this.Bc.Uq().jq(t);return s?s.$X():0},o4t(t){const s=this.Bc.Uq().jq(t);return s?s.VY():0},a4t(t){const s=this.Bc.Uq().jq(t);return s?s.jY():0},l4t(t){const s=this.Bc.Uq().jq(t);return s?100*s.zX():0},u4t(t){const s=this.Bc.Uq().jq(t);return s?100*s.HX():0},c4t(t){const s=this.Bc.Uq().jq(t);return s?s.SM():0},f4t(t){const s=this.Bc.Uq().jq(t);return s?s.Rz():-1},d4t(){const t=this.Bc.Dq();return t?t.JJt():""},p4t(t){const s=this.Yxt;if(!s.jxt())return 0;if(t){const i=s.Hxt(t);return i?i.Rz():0}return s.Vxt().Rz()},m4t(){return this.Bc.DQt()},g4t(t,s,...i){const e=this.Y0t(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let n=e.Z0t.get(s.toLowerCase());if(!n){if(!e.X0t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;n=e.X0t}const r=n.Mj(),h=n.mj();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!n.Cu())return h;const o=this.Bc.dj(),a=o.Sj().wj(),l=a.length>0;l&&(n.xj()?o.P3(a):o.jTt(a));const u=n.$Gt();for(let t=i.length,s=u.length;t<s;++t)i.push(u[t].jMt());const c=n.yj(),f=c.bj(c.wj(),n.xj(),r,h,...i);return l&&o.A3(a),f},y4t(){return this.Bc.Dz().gq()},w4t(){return this.X5()},rI(){return this.Bc.RJt()?"webgpu":"webgl"},S4t(){return this.Bc.RJt()?this.Bc.RJt().YB():this.Bc.PJt().YO()},v4t(){let t=this.Bc.Dx().nx();return Math.round(100*t/1048576)/100},b4t:(t,s,i)=>SC.Cr(t,s,i),x4t:(t,s,i)=>SC.Er(t/100,s/100,i/100),M4t:(t,s,i,e)=>SC.Ir(t/100,s/100,i/100,e/100),T4t:(t,s,i)=>SC.Er(t/255,s/255,i/255),G4t:(t,s,i,e)=>SC.Ir(t/255,s/255,i/255,e/255),_4t(){return this.Bc.Uz()},C4t(){return this.Bc.zz()},I4t(){return this.Bc.qz()},E4t(){return this.Bc.Yz()},P4t(){return this.Bc.Sj().rit().Pc()},R4t(){return this.Bc.Sj().LCt()},A4t(){return this.Bc.Dz().LH().length},F4t(t){t=Math.floor(t);const s=this.Bc.Dz().LH();return t<0||t>=s.length?"":s[t].name}}}{const vC=self.Cs;vC.uH.Touch=class extends vC.hDt{constructor(t){super(t)}qn(){super.qn()}}}{let bC=function(){return TC.XJ().a0()};GetTouchSdkInstance=bC;const xC=self.Cs,MC=self.ks;xC.uH.Touch.SBt=class extends xC.HDt{constructor(t){super(t)}qn(){super.qn()}RDt(){}ADt(){return self.O4t}};let TC=null;self.O4t=class extends self.fY{constructor(t){super(t),TC=t,t.yH().Pq().Aq=this}requestPermission(t){MC.ue(t);const s=bC();if("orientation"===t)return s.D4t(0);if("motion"===t)return s.D4t(1);throw new Error("invalid type")}}}{const GC=self.Cs,_C="touch";GC.uH.Touch.Instance=class extends GC.KDt{constructor(t,s){super(t,_C),this.L4t=new Map,this.N4t=!1,this.k4t=!1,this.B4t=0,this.$4t=0,this.W4t=0,this.U4t=0,this.V4t=0,this.z4t=0,this.j4t=0,this.q4t=0,this.H4t=0,this.J4t=0,this.Y4t=0,this.X4t=0,this.Z4t=0,this.K4t=0,this.Q4t=0,this.t5t=0,this.s5t=0,this.i5t=[],s&&(this.N4t=s[0]),this.aLt("permission-result",t=>this.e5t(t));const i=this.yH().Sf();this.Zf=new GC.Jf(GC.Uf.Hf(i,"pointerdown",t=>this.n5t(t.data)),GC.Uf.Hf(i,"pointermove",t=>this.r5t(t.data)),GC.Uf.Hf(i,"pointerup",t=>this.h5t(t.data,!1)),GC.Uf.Hf(i,"pointercancel",t=>this.h5t(t.data,!0)),GC.Uf.Hf(i,"deviceorientation",t=>this.o5t(t.data)),GC.Uf.Hf(i,"deviceorientationabsolute",t=>this.a5t(t.data)),GC.Uf.Hf(i,"devicemotion",t=>this.l5t(t.data)),GC.Uf.Hf(i,"tick2",t=>this.lnt()))}qn(){this.L4t.clear(),super.qn()}n5t(t){if("mouse"===t.pointerType){if(!this.N4t)return;this.k4t=!0}const s=t.pointerId;if(this.L4t.has(s))return;const i=t.pageX-this.Bc.oJ(),e=t.pageY-this.Bc.lJ(),n=performance.now(),r=this.L4t.size;this.Y4t=r,this.X4t=s;const h=GC.jn(GC.uH.Touch.u5t);h.W$t(n,i,e,s,r),this.L4t.set(s,h),this.tK(GC.uH.Touch.aH.c5t),this.tK(GC.uH.Touch.aH.f5t),this.K4t=i,this.Q4t=e,this.s5t=0,this.tK(GC.uH.Touch.aH.d5t)}r5t(t){if("mouse"===t.pointerType&&!this.k4t)return;const s=this.L4t.get(t.pointerId);if(!s)return;const i=performance.now();if(i-s.fU()<2)return;const e=t.pageX-this.Bc.oJ(),n=t.pageY-this.Bc.lJ();s.Y6(i,e,n,t.width,t.height,t.pressure)}h5t(t,s){if("mouse"===t.pointerType){if(!this.k4t)return;this.k4t=!1}const i=performance.now(),e=t.pointerId,n=this.L4t.get(e);if(n){if(this.Y4t=n.p5t(),this.X4t=n.q1(),!s){const s=t.pageX-this.Bc.oJ(),i=t.pageY-this.Bc.lJ();this.K4t=s,this.Q4t=i,this.s5t=1,this.tK(GC.uH.Touch.aH.d5t)}if(this.tK(GC.uH.Touch.aH.m5t),this.tK(GC.uH.Touch.aH.g5t),!s){const t=n.y5t(i);"single-tap"===t?(this.tK(GC.uH.Touch.aH.w5t),this.K4t=n.pM(),this.Q4t=n.yM(),this.tK(GC.uH.Touch.aH.S5t)):"double-tap"===t&&(this.tK(GC.uH.Touch.aH.v5t),this.K4t=n.pM(),this.Q4t=n.yM(),this.tK(GC.uH.Touch.aH.b5t))}n.qn(),this.L4t.delete(e)}}D4t(t){return this.fLt("request-permission",{type:t}),new Promise((s,i)=>{this.i5t.push({type:t,resolve:s,reject:i})})}e5t(t){const s=t.result,i=t.type;this.Z4t=i;const e=this.i5t.filter(t=>t.type===i);for(const t of e)t.resolve(s?"granted":"denied");this.i5t=this.i5t.filter(t=>t.type!==i),s?(this.tK(GC.uH.Touch.aH.x5t),0===i?this.Bc.h0t():this.Bc.o0t()):this.tK(GC.uH.Touch.aH.M5t)}o5t(t){"number"==typeof t.webkitCompassHeading?this.B4t=t.webkitCompassHeading:t.absolute&&(this.B4t=t.alpha),this.$4t=t.alpha,this.W4t=t.beta,this.U4t=t.gamma}a5t(t){this.B4t=t.alpha}l5t(t){const s=t.acceleration;s&&(this.V4t=s.x,this.z4t=s.y,this.j4t=s.z);const i=t.accelerationIncludingGravity;i&&(this.q4t=i.x,this.H4t=i.y,this.J4t=i.z)}lnt(){const t=performance.now();let s=0;for(const i of this.L4t.values())i.fU()<=t-50&&i.T5t(t),i.G5t(t)&&(this.Y4t=i.p5t(),this.X4t=i.q1(),this.t5t=s,this.tK(GC.uH.Touch.aH._5t),this.K4t=i.pM(),this.Q4t=i.yM(),this.tK(GC.uH.Touch.aH.C5t),this.t5t=0),++s}I5t(t){t=Math.floor(t);for(const s of this.L4t.values()){if(0===t)return s;--t}return null}E5t(t,s){return t>=0&&s>=0&&t<this.Bc.PKt()&&s<this.Bc.RKt()}bLt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.L4t.values()].map(t=>({name:"$"+t.q1(),value:t.pM()+", "+t.yM()}))}]}}}{const CC=self.Cs;CC.uH.Touch.aH={f5t:()=>!0,g5t:()=>!0,P5t(){return this.L4t.size>0},d5t(t,s){return!!t&&s===this.s5t&&!!this.E5t(this.K4t,this.Q4t)&&this.Bc.kz().Ejt(t,[[this.K4t,this.Q4t]],!1)},R5t(t){if(!t)return!1;const s=this.Bc.HMt().pRt(),i=[...this.L4t.values()].filter(t=>this.E5t(t.pM(),t.yM())).map(t=>[t.pM(),t.yM()]);return CC.xor(this.Bc.kz().Ejt(t,i,s),s)},A5t(t,s,i){const e=this.I5t(t);return!!e&&CC.compare(e.P0(),s,i)},F5t:()=>!0,O5t:()=>!0,D5t(t,s,i){this.Bc.h0t();let e=0;return e=0===t?this.$4t:1===t?this.W4t:this.U4t,CC.compare(e,s,i)},L5t(t,s,i){this.Bc.o0t();let e=0;return e=0===t?this.q4t:1===t?this.H4t:2===t?this.J4t:3===t?this.V4t:4===t?this.z4t:this.j4t,CC.compare(e,s,i)},c5t(t){return(t=Math.floor(t))===this.Y4t},m5t(t){return(t=Math.floor(t))===this.Y4t},N5t(t){return t=Math.floor(t),this.L4t.size>=t+1},_5t:()=>!0,w5t:()=>!0,v5t:()=>!0,C5t(t){return!!t&&!!this.E5t(this.K4t,this.Q4t)&&this.Bc.kz().Ejt(t,[[this.K4t,this.Q4t]],!1)},S5t(t){return!!t&&!!this.E5t(this.K4t,this.Q4t)&&this.Bc.kz().Ejt(t,[[this.K4t,this.Q4t]],!1)},b5t(t){return!!t&&!!this.E5t(this.K4t,this.Q4t)&&this.Bc.kz().Ejt(t,[[this.K4t,this.Q4t]],!1)},x5t(t){return this.Z4t===t},M5t(t){return this.Z4t===t}}}self.Cs.uH.Touch._dt={k5t(t){this.D4t(t)}};{const IC=self.Cs;IC.uH.Touch.Cdt={B5t(){return this.L4t.size},wOt(t){const s=this.I5t(this.t5t);return s?s.$5t(this.Bc.Uq(),t,!0):0},SOt(t){const s=this.I5t(this.t5t);return s?s.$5t(this.Bc.Uq(),t,!1):0},W5t(t,s){const i=this.I5t(t);return i?i.$5t(this.Bc.Uq(),s,!0):0},U5t(t,s){const i=this.I5t(t);return i?i.$5t(this.Bc.Uq(),s,!1):0},V5t(t,s){const i=this.L4t.get(t);return i?i.$5t(this.Bc.Uq(),s,!0):0},z5t(t,s){const i=this.L4t.get(t);return i?i.$5t(this.Bc.Uq(),s,!1):0},j5t(){const t=this.I5t(0);return t?t.pM():0},q5t(){const t=this.I5t(0);return t?t.yM():0},H5t(t){const s=this.I5t(t);return s?s.pM():0},J5t(t){const s=this.I5t(t);return s?s.yM():0},Y5t(t){const s=this.L4t.get(t);return s?s.pM():0},X5t(t){const s=this.L4t.get(t);return s?s.yM():0},Z5t(t){const s=this.I5t(t);return s?s.P0():0},K5t(t){const s=this.L4t.get(t);return s?s.P0():0},Q5t(t){const s=this.I5t(t);return s?IC.tr(s.WY()):0},t6t(t){const s=this.L4t.get(t);return s?IC.tr(s.WY()):0},s6t(){return this.Bc.h0t(),this.B4t},i6t(){return this.Bc.h0t(),this.$4t},e6t(){return this.Bc.h0t(),this.W4t},n6t(){return this.Bc.h0t(),this.U4t},r6t(){return this.Bc.o0t(),this.q4t},h6t(){return this.Bc.o0t(),this.H4t},o6t(){return this.Bc.o0t(),this.J4t},a6t(){return this.Bc.o0t(),this.V4t},l6t(){return this.Bc.o0t(),this.z4t},u6t(){return this.Bc.o0t(),this.j4t},c6t(){return this.Y4t},f6t(){return this.X4t},d6t(t){const s=this.L4t.get(t);return s?s.My():0},p6t(t){const s=this.L4t.get(t);return s?s.Gy():0},m6t(t){const s=this.L4t.get(t);return s?s.g6t():0}}}{const EC=self.Cs,PC=15,RC=500,AC=333,FC=25;let OC=-1e3,DC=-1e3,LC=-1e4;EC.uH.Touch.u5t=class extends EC.Vn{constructor(){super(),this.y6t=0,this.uI=0,this.qXt=0,this.aV=0,this.w6t=0,this.S6t=0,this.v6t=0,this.Pa=0,this.Ra=0,this.b6t=0,this.x6t=0,this.Uy=0,this.Vy=0,this.M6t=0,this.T6t=!1,this.G6t=!1}qn(){}W$t(t,s,i,e,n){this.y6t=e,this.uI=n,this.aV=t,this.w6t=t,this.qXt=t,this.S6t=s,this.v6t=i,this.Pa=s,this.Ra=i,this.b6t=s,this.x6t=i}Y6(t,s,i,e,n,r){this.w6t=this.aV,this.aV=t,this.b6t=this.Pa,this.x6t=this.Ra,this.Pa=s,this.Ra=i,this.Uy=e,this.Vy=n,this.M6t=r,!this.G6t&&EC.er(this.S6t,this.v6t,this.Pa,this.Ra)>=15&&(this.G6t=!0)}q1(){return this.y6t}p5t(){return this.uI}fU(){return this.aV}T5t(t){this.w6t=t}pM(){return this.Pa}yM(){return this.Ra}P0(){const t=EC.er(this.Pa,this.Ra,this.b6t,this.x6t),s=(this.aV-this.w6t)/1e3;return s>0?t/s:0}WY(){return EC.rr(this.b6t,this.x6t,this.Pa,this.Ra)}My(){return this.Uy}Gy(){return this.Vy}g6t(){return this.M6t}G5t(t){return!this.T6t&&t-this.qXt>=500&&!this.G6t&&EC.er(this.S6t,this.v6t,this.Pa,this.Ra)<15&&(this.T6t=!0,!0)}y5t(t){return this.T6t?"":t-this.qXt<=333&&!this.G6t&&EC.er(this.S6t,this.v6t,this.Pa,this.Ra)<15?t-LC<=666&&EC.er(OC,DC,this.Pa,this.Ra)<25?(OC=-1e3,DC=-1e3,LC=-1e4,"double-tap"):(OC=this.Pa,DC=this.Ra,LC=t,"single-tap"):""}$5t(t,s,i){if(void 0===s)return t.Hq(0).rst(this.Pa,this.Ra)[i?0:1];{const e=t.jq(s);return e?e.aZ(this.Pa,this.Ra)[i?0:1]:0}}}}{const NC=self.Cs;NC.uH.Hft=class extends NC.hDt{constructor(t){super(t)}qn(){super.qn()}}}{const kC=self.Cs,BC=self.ks,$C=[];kC.uH.Hft.SBt=class extends kC.HDt{constructor(t){super(t),this.fBt=t.XBt()}qn(){kC.bh(this.fBt),super.qn()}RDt(){for(const t of this.fBt)t.dkt(this.Bc)}bit(t){const s={xT:this.Bc.LW()};return Promise.all(this.fBt.map(i=>i.pkt(t,s)))}Cit(){for(const t of this.fBt)t.mkt()}Tit(){this._6t()}_6t(){for(const t of this._bt.lY())t.a0().C6t()}GRt(t){kC.uH.Hft.kOt(this,t)}lAt(t){$C.push({ZDt:null,I6t:!1,sY:[]})}E6t(t,s,i){const e=$C.at(-1);e.ZDt=t,e.I6t=i,e.sY.push(s)}uAt(t){const s=$C.pop(),i=s.ZDt,e=s.I6t;if(!i)return;const n=new Map;for(const t of s.sY)t.aWt(n,i,e);for(const[t,s]of n)t.cY().Xbt(s)}P6t(t){const s=this.wZ().s$t(t),i=this.yH();return s.gkt(0).H0().M4(i.Dx(),{xT:i.LW()}).then(()=>this._6t()),s}R6t(t){for(const s of this._bt.lY())s.a0().A6t(t);this.wZ().i$t(t)}F6t(t,s){const i=this._bt.QBt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.vkt(s);e<0&&(e+=i.B0()+1);const n=kC.ukt.fkt(this.yH());i.ykt(n,e);const r=this.yH();n.H0().M4(r.Dx(),{xT:r.LW()}).then(()=>this._6t());for(const t of this._bt.lY())t.a0().O6t();return n}D6t(t,s){const i=this._bt.QBt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.B0())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.vkt(s);e<0&&(e+=i.B0()),i.wkt(e);for(const t of this._bt.lY())t.a0().O6t()}ADt(){return self.L6t}};const WC=new WeakMap;self.L6t=class extends self.fY{constructor(t){super(t),WC.set(this,t.aAt())}N6t(t){BC.ue(t);const s=WC.get(this).wZ().QBt(t);return s?s.bkt():null}k6t(){return WC.get(this).wZ().KBt().map(t=>t.bkt())}B6t(t){return BC.ue(t),WC.get(this).P6t(t).bkt()}$6t(t){BC.ue(t),WC.get(this).R6t(t)}W6t(t,s){if(BC.ue(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return WC.get(this).F6t(t,s).U0()}U6t(t,s){if(BC.ue(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");WC.get(this).D6t(t,s)}}}{const UC=self.Cs,VC=self.ks,zC=0,jC=1,qC=2,HC=3,JC=UC.jn(UC.Rect),YC=UC.jn(UC.El),XC=UC.jn(UC.Ea),ZC=1,KC=2,QC=4;UC.uH.Hft.Instance=class extends UC._Lt{constructor(t,s){super(t);let i=!0,e="",n=0,r=!0;s&&(i=!!s[zC],e=s[jC],n=s[qC],r=s[HC]),this.V6t=this._bt.QBt(e)||this._bt.XBt()[0],this.z6t=UC.Zn(n,0,this.V6t.B0()-1),this.j6t=this.V6t.gkt(this.z6t);const h=this.j6t.H0();this.vL=h.NG(),this.q6t=h.NR(),this.H6t=h.kLt(),this.PLt(),t.hWt(KC,!0),t.hWt(ZC,this.V6t.P0()>=0),this.J6t=Math.abs(this.V6t.P0()),this.Y6t=this.V6t.L0(),this.X6t=UC.jn(UC.td),this.Z6t=0,this.K6t=0,this.Q6t="",this.t8t=-1,this.s8t="",this.i8t=0;const o=this.zq();this.e8t=o.JK(),o.GX(i),o.uQ(r),o.LK(this.j6t.DK()),o.BK(this.j6t.kK()),o.uzt(this.j6t.e1()),o.EK(),1===this._bt.ZBt()&&1===this._bt.XBt()[0].B0()||0===this.J6t||this.yLt()}qn(){this.V6t=null,this.j6t=null,this.vL=null,this.X6t=null,super.qn()}OLt(){return this.j6t.H0()}Mut(){return!0}T6(){this.vL=null}FLt(){this.C6t()}uT(t){const s=this.vL;if(null===s)return;t.zF(s);const i=this.zq();i.KQ()?this.n8t(i,t):this.r8t(i,t)}r8t(t,s){let i=this.e8t;this.Bc.pq()&&(i=t.izt(i)),s.iO(i,this.H6t)}n8t(t,s){const i=t.bzt();if(t.Mzt()){t.jK(JC,YC,!1);let s=YC;this.Bc.pq()&&(s=t.izt(s)),i.nT(t.QQ(),s,this.H6t),t.xzt(!1)}i.uT(s,t.VK())}h8t(){return this.X6t.qs()}o8t(){return this.di.oWt(KC)}a8t(t){this.di.hWt(KC,t)}l8t(){return this.di.oWt(ZC)}u8t(t){this.di.hWt(ZC,t)}c8t(){return this.di.oWt(QC)}f8t(t){this.di.hWt(QC,t)}wrt(){this.s8t&&this.d8t(),this.t8t>=0&&this.p8t();const t=this.J6t;if(!this.o8t()||0===t)return void this.sLt();const s=this.Bc.Lj(this.di);this.X6t.$u(s);const i=this.h8t(),e=this.j6t,n=e.J0()/t;if(i<this.Z6t+n)return;const r=this.V6t,h=this.Y6t,o=r.B0(),a=r.O0(),l=r.A0(),u=r.k0();this.l8t()?this.z6t++:this.z6t--,this.Z6t+=n,this.z6t>=o&&(u?(this.u8t(!1),this.z6t=o-2):l?this.z6t=h:(this.K6t++,this.K6t>=a?this.m8t(!1):this.z6t=h)),this.z6t<0&&(u?(this.z6t=1,this.u8t(!0),l||(this.K6t++,this.K6t>=a&&this.m8t(!0))):l?this.z6t=h:(this.K6t++,this.K6t>=a?this.m8t(!0):this.z6t=h)),this.z6t=UC.Zn(this.z6t,0,o-1);const c=r.gkt(this.z6t);i>this.Z6t+c.J0()/t&&(this.Z6t=i),this.g8t(e,c)}m8t(t){this.z6t=t?0:this.V6t.B0()-1,this.a8t(!1),this.Q6t=this.V6t.Pc(),this.f8t(!0),this.XDt("animationend",!1,{animationName:this.Q6t}),this.tK(UC.uH.Hft.aH.y8t),this.tK(UC.uH.Hft.aH.w8t),this.f8t(!1),this.K6t=0}g8t(t,s,i){if(t===s)return;const e=this.zq(),n=t.H0(),r=s.H0(),h=n.My(),o=n.Gy(),a=r.My(),l=r.Gy();i&&i.Jft?i.Jft(e,h,o,a,l):(h!==a&&e.hy(e.My()*(a/h)),o!==l&&e.oy(e.Gy()*(l/o))),e.LK(s.DK()),e.BK(s.kK()),e.uzt(s.e1()),e.EK(),this.j6t=s,this.vL=r.NG(),this.q6t=r.NR(),this.H6t=r.kLt();const u=this.B1().Wft();for(let i=0,e=u.length;i<e;++i)u[i].MNt(t,s);this.XDt("framechange",!1,{animationName:this.V6t.Pc(),S8t:this.z6t}),this.tK(UC.uH.Hft.aH.v8t),this.Bc.Zq()}b8t(t){this.a8t(!0),this.Z6t=this.h8t(),1===t&&0!==this.z6t&&(this.t8t=0,this.c8t()||this.p8t()),this.yLt()}x8t(t,s,i){this.s8t=t,this.i8t=s,this.yLt(),!i&&this.c8t()||this.d8t()}M8t(){return this.V6t}T8t(){return this.s8t?this.s8t:this.V6t.Pc()}A6t(t){UC.Ke(t,this.T8t())&&this.x8t(this._bt.e$t().Pc(),1,!0)}G8t(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this._bt.QBt(this.T8t());if(!s)return;if(-1===(t=s.Skt(t)))return}isFinite(t)&&(this.t8t=t,this.c8t()||this.p8t())}O6t(){if(this.s8t||-1!==this.t8t)return;const t=this.j6t,s=this.V6t.gkt(UC.Zn(this.z6t,0,this.V6t.B0()-1));t!==s&&this.g8t(t,s),this.V6t.B0()>1&&this.J6t>0&&this.yLt()}_8t(){return this.z6t}C8t(){return this.j6t.a1()}I8t(t){this.J6t=Math.abs(t),this.u8t(t>=0),this.J6t>0&&this.yLt()}E8t(){return this.l8t()?this.J6t:-this.J6t}P8t(t){"string"==typeof t&&-1===(t=this.V6t.Skt(t))||(t=UC.Zn(Math.floor(t),0,this.V6t.B0()-1),this.Y6t=t)}R8t(){return this.Y6t}d8t(t){const s=this.j6t,i=this._bt.QBt(this.s8t);if(this.s8t="",!i)return;if(i===this.V6t&&this.o8t())return;this.V6t=i,this.u8t(i.P0()>=0),this.J6t=Math.abs(i.P0()),this.Y6t=i.L0(),this.z6t=UC.Zn(this.z6t,0,this.V6t.B0()-1),1===this.i8t&&(this.z6t=0),this.a8t(!0),this.Z6t=this.h8t();const e=this.V6t.gkt(this.z6t);this.g8t(s,e,t)}p8t(t){const s=this.j6t,i=this.z6t;if(this.z6t=UC.Zn(Math.floor(this.t8t),0,this.V6t.B0()-1),this.t8t=-1,!t&&i===this.z6t)return;const e=this.V6t.gkt(this.z6t);this.g8t(s,e),this.Z6t=this.h8t()}C6t(){const t=this.j6t.H0();this.vL=t.NG(),this.q6t=t.NR(),this.H6t=t.kLt(),this.zq().xzt(!0)}NG(){return this.vL}NR(){return this.q6t}kLt(){return this.H6t}X0(){return this.j6t.X0()}TAt(t){const s=this.j6t,i=this.zq();let e=null;if("string"==typeof t)e=s.s1(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.t1(t-1)}let n=i.VK();if(!e)return[i.pM(),i.yM(),n];if(XC.S(e.Akt()),i.KQ()){const[t,s,e]=i.QQ().yT(XC.Oa(),XC.La());XC.set(t,s),n+=e}return XC.offset(-s.DK(),-s.kK()),XC.scale(i.My(),i.Gy()),XC.rotate(i.WY()),XC.offset(i.pM(),i.yM()),[XC.Oa(),XC.La(),n]}A8t(){return this.zq().mzt().mu()}F8t(t){t=Math.floor(t);const s=this.zq(),i=s.mzt(),e=i.mu();if(t===e&&(t=0),t<0||t>=e)return[0,0];const n=i.pu();return[n[2*t+0]+s.pM(),n[2*t+1]+s.yM()]}bLt(){const t=UC.uH.Hft._dt,s="plugins.sprite.debugger.animation-properties";return[{title:s+".title",properties:[{name:s+".current-animation",value:this.V6t.Pc(),O8t:s=>this.MLt(t.D8t,s,0)},{name:s+".current-frame",value:this.z6t,O8t:s=>this.MLt(t.L8t,s)},{name:s+".is-playing",value:this.o8t(),O8t:s=>s?this.MLt(t.N8t,0):this.MLt(t.k8t)},{name:s+".speed",value:this.J6t,O8t:s=>this.MLt(t.B8t,s)},{name:s+".repeats",value:this.K6t,O8t:t=>this.K6t=t}]}]}CM(){const t={a:this.V6t.H7()};0!==this.Z6t&&(t.fs=this.Z6t);const s=this.h8t();0!==s&&(t.at=s),0!==this.z6t&&(t.f=this.z6t),0!==this.J6t&&(t.cas=this.J6t),1!==this.K6t&&(t.ar=this.K6t),0!==this.Y6t&&(t.rt=this.Y6t),this.o8t()||(t.ap=this.o8t()),this.l8t()||(t.af=this.l8t());const i=this.zq();return i.lQ()&&(t.ce=i.lQ()),t}IM(t){const s=this.wZ().t$t(t.a);s&&(this.V6t=s),this.Z6t=t.hasOwnProperty("fs")?t.fs:0,this.X6t.Set(t.hasOwnProperty("at")?t.at:0);const i=t.hasOwnProperty("f")?t.f:0;this.z6t=UC.Zn(i,0,this.V6t.B0()-1),this.J6t=t.hasOwnProperty("cas")?t.cas:0,this.K6t=t.hasOwnProperty("ar")?t.ar:1;const e=t.hasOwnProperty("rt")?t.rt:0;this.Y6t=UC.Zn(e,0,this.V6t.B0()-1),this.a8t(!t.hasOwnProperty("ap")||!!t.ap),this.u8t(!t.hasOwnProperty("af")||!!t.af);const n=this.V6t.gkt(this.z6t);this.j6t=n,this.C6t();const r=this.zq();r.LK(n.DK()),r.BK(n.kK()),r.uzt(n.e1()),r.uQ(!!t.ce),this.o8t()&&this.yLt()}lpt(t){const s=this.zq();switch(t){case HC:return s.lQ();case qC:return UC.Zn(this.z6t,0,this.V6t.B0()-1);case jC:return this.V6t.Pc()}}mpt(t,s,i){const e=this.zq();switch(t){case HC:e.uQ(!!s);break;case qC:{this.a8t(!1);const t=this.V6t.B0()-1,e=s=UC.Zn(s,0,t),n=this.V6t.gkt(this.z6t),r=this.V6t.gkt(e);this.g8t(n,r,i),this.z6t=UC.Zn(e,0,t);break}case jC:this.s8t=s,this.d8t(i),this.V6t.B0()>1&&this.V6t.P0()>0?this.yLt():this.sLt()}}ADt(){return self.$8t}};const tI=new WeakMap,sI=new Map([["current-frame",0],["beginning",1]]);self.$8t=class extends self.e0{constructor(){super(),tI.set(this,self.yZ.bZ().a0())}Y0(){return tI.get(this).X0()}Z0(t){return this.K0(t)[0]}Q0(t){return this.K0(t)[1]}W8t(t){return this.K0(t)[2]}K0(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return tI.get(this).TAt(t)}i1(){return tI.get(this).A8t()}n1(t){return VC.he(t),tI.get(this).F8t(t)[0]}o1(t){return VC.he(t),tI.get(this).F8t(t)[1]}h1(t){return VC.he(t),tI.get(this).F8t(t)}U8t(){tI.get(this).a8t(!1)}V8t(t="current-frame"){VC.ue(t);const s=sI.get(t);if(void 0===s)throw new Error("invalid mode");tI.get(this).b8t(s)}z8t(t,s="beginning"){VC.ue(t),VC.ue(s);const i=sI.get(s);if(void 0===i)throw new Error("invalid mode");const e=tI.get(this);if(!e.wZ().QBt(t))throw new Error(`animation name "${t}" does not exist`);e.x8t(t,i)}N6t(t){VC.ue(t);const s=tI.get(this).wZ().QBt(t);return s?s.bkt():null}get animation(){return tI.get(this).M8t().bkt()}get animationName(){return tI.get(this).T8t()}set S8t(t){VC.he(t),tI.get(this).G8t(t)}get S8t(){return tI.get(this)._8t()}set j8t(t){VC.ue(t),tI.get(this).G8t(t)}get j8t(){return tI.get(this).C8t()}set q8t(t){VC.he(t),tI.get(this).I8t(t)}get q8t(){return tI.get(this).E8t()}set H8t(t){VC.he(t),tI.get(this).P8t(t)}get H8t(){return tI.get(this).R8t()}get imageWidth(){return tI.get(this).OLt().My()}get imageHeight(){return tI.get(this).OLt().Gy()}J8t(){const t=tI.get(this).OLt();return[t.My(),t.Gy()]}async Y8t(t){VC.Be(t,Blob);const s=tI.get(this),i=s.yH(),e=s.OLt(),n=UC.jn(UC.LNt);if(n.XNt(i,t),await n.M4(i.Dx(),{xT:i.LW()}),s.Hn())return void n.qn();e.ZNt(n);const r=s.aAt();r._6t(),r.wZ().Sf().dispatchEvent(new UC.Event("animationframeimagechange")),i.Zq()}X8t(t,s){VC.ue(s),tI.get(this).zq().KVt(!!t,s)}}}{const iI=self.Cs;iI.uH.Hft.aH={Z8t(t){return iI.Ke(this.T8t(),t)},K8t(t,s){return iI.compare(this.z6t,t,s)},Q8t(t,s){if("string"!=typeof s)return!1;const i=this.j6t.a1();return iI.compare(i.toLowerCase(),t,s.toLowerCase())},t7t(t,s){return iI.compare(this.E8t(),t,s)},w8t(t){return iI.Ke(this.Q6t,t)},y8t:()=>!0,v8t:()=>!0,s7t(){return this.zq().My()<0},i7t(){return this.zq().Gy()<0},e7t:()=>!0,n7t:()=>!0,lQ(){return this.zq().lQ()}}}{const eI=self.Cs;eI.uH.Hft._dt={r7t(t,s,i,e,n){if(!t||!s)return;const[r,h]=this.TAt(i),o=this.Bc.gY(t,s,r,h,e,n);if(!o)return;if(e&&s.yY(o),t.QJ().FJ()){const t=o.zq();t.$Y(this.zq().WY()),t.EK()}const a=this.Bc.dj();a.wY(!0),o.SY(),a.wY(!1),t!==this.Bc.YMt().wZ()&&this.tLt.E6t(t,o,e)},k8t(){this.a8t(!1)},N8t(t){this.b8t(t)},D8t(t,s){this.x8t(t,s)},L8t(t){this.G8t(t)},B8t(t){this.I8t(t)},h7t(t){this.P8t(t)},o7t(t,s){try{0===t?this.aAt().P6t(s):this.aAt().R6t(s)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation: `,s)}},a7t(t,s,i){try{0===t?this.aAt().F6t(s,i):this.aAt().D6t(s,i)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation frame: `,s)}},l7t(t){const s=this.zq(),i=s.My(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.hy(e),s.EK())},u7t(t){const s=this.zq(),i=s.Gy(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.oy(e),s.EK())},kY(t){const s=this.j6t.H0(),i=this.zq(),e=i.My()<0?-1:1,n=i.Gy()<0?-1:1,r=s.My()*t*e,h=s.Gy()*t*n;i.My()===r&&i.Gy()===h||(i.rR(r,h),i.EK())},async c7t(t,s,i){const e=this.j6t.H0(),n=this.zq(),r=this.Bc,h=this.tLt;if(e.z5()===t)return 0===s&&(n.rR(e.My(),e.Gy()),n.EK()),void this.tK(eI.uH.Hft.aH.e7t);const o=eI.jn(eI.LNt);try{if(await o.YNt(r,t),!o.y6())throw new Error("image failed to load");if(this.Hn())return void o.qn();await o.M4(r.Dx(),{xT:r.LW()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.Hn()||this.tK(eI.uH.Hft.aH.n7t))}this.Hn()?o.qn():(e.ZNt(o),h._6t(),h.wZ().Sf().dispatchEvent(new eI.Event("animationframeimagechange")),r.Zq(),0===s&&(n.rR(e.My(),e.Gy()),n.EK()),await this.hH(eI.uH.Hft.aH.e7t))},f7t(t){this.zq().uQ(t)},KVt(t,s){this.zq().KVt(0===t,s)},d7t(t){this.zq().eM(t),this.Bc.Zq()}}}self.Cs.uH.Hft.Cdt={p7t(){return this._8t()},m7t(){return this.C8t()},g7t(){return this.V6t.B0()},y7t(){return this.V6t.Pc()},w7t(){return this.E8t()},S7t(){return this.V6t.P0()},v7t(t){return this.TAt(t)[0]},b7t(t){return this.TAt(t)[1]},x7t(t){return this.TAt(t)[2]},M7t(){return this.X0()},T7t(){return this.OLt().My()},G7t(){return this.OLt().Gy()},_7t(t){return this.F8t(t)[0]},C7t(t){return this.F8t(t)[1]},I7t(){return this.A8t()}};{const nI=self.Cs;nI.uH.Text=class extends nI.hDt{constructor(t){super(t)}qn(){super.qn()}}}{const rI=self.Cs;rI.uH.Text.SBt=class extends rI.HDt{constructor(t){super(t)}qn(){super.qn()}RDt(){}bit(t){}Cit(){}}}{const hI=self.Cs,oI=self.ks,aI=[0,0,0],lI=0,uI=1,cI=2,fI=3,dI=4,pI=5,mI=6,gI=7,yI=8,wI=9,SI=10,vI=11,bI=12,xI=13,MI=15,TI=["left","center","right"],GI=["top","center","bottom"],_I=["ltr","rtl"],CI=["word","cjk","character"],II=new hI.Rect,EI=new hI.El,PI=new hI.To,RI=hI.jn(hI.Ea),AI=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]);hI.uH.Text.Instance=class extends hI._Lt{constructor(t,s){if(super(t),this.$c="",this.E7t=!0,this.P7t="Arial",this.R7t=12,this.A7t=0,this.kE=!1,this.BE=!1,this.Kx=hI.jn(hI.To),this.jE=0,this.qE=0,this.YE="word",this.XE=0,this.F7t="auto",this.O7t=1,this.D7t=null,this.L7t="",this.N7t=!1,this.k7t=!1,this.B7t=null,this.$7t=-1,this.W7t=-1,this.U7t=0,this.V7t=hI.jn(hI.Xw.lx,this.Bc.Dx(),{timeout:5}),this.V7t.IP=()=>this.Bc.Zq(),this.z7t=()=>this.j7t(),this.q7t=!1,this.H7t=()=>this.J7t(),s){this.$c=s[lI],this.E7t=!!s[uI],this.P7t=s[cI],this.R7t=s[fI],this.A7t=s[dI],this.kE=!!s[pI],this.BE=!!s[mI],this.jE=s[yI],this.qE=s[wI],this.YE=CI[s[SI]],this.XE=s[vI],this.Y7t(this.Bc.x3(s[bI]));const t=s[gI];this.Kx.Po(t[0],t[1],t[2]),this.zq().GX(s[xI]),this.k7t=!!s[MI]}this.X7t(),this.Z7t(),this.Bc.Sf().addEventListener("beforerender",this.H7t)}qn(){this.Bc.Sf().removeEventListener("beforerender",this.H7t),this.H7t=null,this.Y7t(null),this.K7t(),this.B7t&&(this.B7t.qn(),this.B7t=null),this.V7t.qn(),this.V7t=null,super.qn()}X7t(){const t=this.V7t;t.Vc(this.$c),t.RP(this.E7t),this.V7t.PE()&&this.D7t?this.V7t.iy(this.yH().PQt(this.D7t)):this.V7t.iy(null),t.AP("nearest"!==this.Bc.LW()),t.FP(this.P7t),t.NP(this.A7t),t.BP(this.kE),t.WP(this.BE),t.nM(this.Kx),t.JP(TI[this.jE]),t.XP(GI[this.qE]),t.KP(this.YE),t.tR(_I[this.XE])}Q7t(){const t=this.zq();this.V7t.Vc(this.$c),this.V7t.OP(this.R7t),this.V7t.LP(t.SVt());const s=t.jq();let i;"auto"===this.F7t?(i=s.ott(t.VK()),this.V7t.eR(!1)):"fixed"===this.F7t&&(i=this.O7t,this.V7t.eR(!0)),t.KQ()&&i!==this.V7t.hR()&&t.xzt(!0),this.V7t.rR(t.My(),t.Gy(),i)}Y7t(t){t&&(t.B7()||t.QJ().constructor!==hI.uH.Hft)||t!==this.D7t&&(this.D7t&&this.D7t.Sf().removeEventListener("animationframeimagechange",this.z7t),this.D7t=t,this.D7t&&this.D7t.Sf().addEventListener("animationframeimagechange",this.z7t),this.X7t(),this.N7t=!1,this.Bc.Zq())}j7t(){this.Bc.RQt(this.D7t),this.Bc.Zq(),this.q7t=!0}Z7t(){if(this.k7t){let t=this.$c;this.E7t&&(t=hI.pn.Lg(t)),this.B7t?this.B7t.Vc(t):this.B7t=hI.jn(hI.kc,this.Bc,t)}else this.B7t&&(this.B7t.qn(),this.B7t=null)}J7t(){const t=this.zq(),s=t.jq(),i=t.Tq();t.CX()&&t.ktt(s.hZ(),i.Ntt(),i.gX())&&(this.Q7t(),this.q7t&&(this.q7t=!1,this.V7t.PE()&&this.D7t&&this.V7t.iy(this.yH().PQt(this.D7t))),this.V7t.NG())}uT(t){const s=this.V7t.NG();if(!s)return;const i=this.zq(),e=i.jq();if(0===i.WY()&&0===e.WY()&&0===i.VK()&&!i.KQ()&&e.T9()){const n=i.JK(),[r,h]=e.pZ(n.Br(),n.$r()),[o,a]=e.pZ(n.Vr(),n.zr()),l=r-Math.round(r),u=h-Math.round(h);II.set(r,h,o,a),II.offset(-l,-u),EI.Xl(II);const[c,f]=t.oO(t._O());t.tx()?this.Bc.Dq().A4(t,c,f):(t.dB(!0),EI.St(c,f)),t.zF(s),t.pb(EI,this.V7t.NR()),t.tx()?e.O4(t):t.dB(!1)}else t.zF(s),i.KQ()?this.n8t(i,t):this.r8t(i,t)}r8t(t,s){let i=t.JK();this.Bc.pq()&&(i=this.t9t(i)),s.pb(i,this.V7t.NR())}n8t(t,s){const i=t.bzt();if(t.Mzt()){t.jK(II,EI,!1);let s=EI;this.Bc.pq()&&(s=this.t9t(s)),i.nT(t.QQ(),s,this.V7t.NR()),t.xzt(!1)}i.uT(s,t.VK())}t9t(t){const s=t.Br()-Math.round(t.Br()),i=t.$r()-Math.round(t.$r());return 0===s&&0===i?t:(EI.S(t),EI.offset(-s,-i),EI)}DLt(){const t=this.V7t.NG();return t?[t.My(),t.Gy()]:[100,100]}LLt(){return this.V7t.NR()}BLt(){return!1}CM(){const t={t:this.$c,c:this.Kx.toJSON(),fn:this.P7t,ps:this.R7t};return this.E7t&&(t.bbc=this.E7t),0!==this.jE&&(t.ha=this.jE),0!==this.qE&&(t.va=this.qE),"word"!==this.YE&&(t.wr=this.YE),0!==this.A7t&&(t.lho=this.A7t),this.kE&&(t.b=this.kE),this.BE&&(t.i=this.BE),-1!==this.W7t&&(t.tw={st:this.$7t,en:this.W7t,l:this.U7t}),this.D7t&&(t.ioc=this.D7t.H7()),"fixed"===this.F7t&&(t.fs=this.O7t),t}IM(t){if(this.K7t(),this.$c=t.t,this.Kx.Sa(t.c),this.P7t=t.fn,this.R7t=t.ps,this.E7t=!!t.hasOwnProperty("bbc")&&t.bbc,this.jE=t.hasOwnProperty("ha")?t.ha:0,this.qE=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.YE="boolean"==typeof s?s?"word":"character":s}else this.YE="word";if(this.A7t=t.hasOwnProperty("lho")?t.lho:0,this.kE=!!t.hasOwnProperty("b")&&t.b,this.BE=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const s=t.tw;this.$7t=s.st,this.W7t=s.en,this.U7t=s.l}if(t.hasOwnProperty("ioc")){const s=this.yH().x3(t.ioc);s&&this.Y7t(s)}else this.Y7t(null);t.hasOwnProperty("fs")?(this.F7t="fixed",this.O7t=t.fs):this.F7t="auto",this.X7t(),this.Z7t(),this.N7t=!1,-1!==this.W7t&&this.yLt()}lpt(t){switch(t){case lI:return this.iR();case uI:return this.E7t;case cI:return this.s9t();case fI:return this.i9t();case dI:return this.e9t();case pI:return this.n9t();case mI:return this.r9t();case gI:return aI[0]=this.Kx.ko(),aI[1]=this.Kx.Bo(),aI[2]=this.Kx.$o(),aI;case yI:return this.h9t();case wI:return this.o9t();case SI:return this.a9t();case MI:return this.l9t()}}mpt(t,s){switch(t){case lI:this.u9t(s);break;case uI:if(this.E7t===!!s)return;this.E7t=!!s,this.X7t();break;case cI:this.c9t(s);break;case fI:this.f9t(s);break;case dI:this.d9t(s);break;case pI:this.p9t(s);break;case mI:this.m9t(s);break;case gI:const t=this.Kx,i=s;if(t.ko()===i[0]&&t.Bo()===i[1]&&t.$o()===i[2])return;this.Kx.Po(i[0],i[1],i[2]),this.X7t();break;case yI:this.g9t(s);break;case wI:this.y9t(s);break;case SI:this.w9t(s)}}xLt(t,s,i,e){0===s&&0===i&&0===e||t!==gI||(this.Kx.Ro(s,i,e),this.X7t())}u9t(t){this.$c!==t&&(this.$c=t,this.Z7t(),this.N7t=!1,this.Bc.Zq())}iR(){return this.$c}S9t(t,s){this.u9t(t),this.Q7t(),this.$7t=this.Bc.zj(),this.W7t=this.$7t+s/this.B1().LZ(),this.U7t=this.V7t.uR(),this.V7t.VP(0),this.yLt()}K7t(){this.$7t=-1,this.W7t=-1,this.U7t=0,this.V7t.VP(-1),this.sLt()}v9t(){-1!==this.W7t&&(this.K7t(),this.tK(hI.uH.Text.aH.b9t),this.Bc.Zq())}c9t(t){this.P7t!==t&&(this.P7t=t,this.V7t.FP(t),this.Bc.Zq())}s9t(){return this.P7t}p9t(t){t=!!t,this.kE!==t&&(this.kE=t,this.V7t.BP(t),this.Bc.Zq())}n9t(){return this.kE}m9t(t){t=!!t,this.BE!==t&&(this.BE=t,this.V7t.WP(t),this.Bc.Zq())}r9t(){return this.BE}f9t(t){this.R7t!==t&&(this.R7t=t,this.Bc.Zq())}i9t(){return this.R7t}x9t(t){this.Kx.qo(t)||(this.Kx.No(t),this.V7t.nM(this.Kx),this.Bc.Zq())}M9t(){return this.Kx}d9t(t){this.A7t!==t&&(this.A7t=t,this.X7t(),this.Bc.Zq())}e9t(){return this.A7t}g9t(t){this.jE!==t&&(this.jE=t,this.X7t(),this.Bc.Zq())}h9t(){return this.jE}y9t(t){this.qE!==t&&(this.qE=t,this.X7t(),this.Bc.Zq())}o9t(){return this.qE}T9t(t){this.w9t(CI[t])}w9t(t){this.YE!==t&&(this.YE=t,this.X7t(),this.Bc.Zq())}a9t(){return this.YE}G9t(t){this.XE!==t&&(this.XE=t,this.X7t(),this.Bc.Zq())}_9t(){return this.XE}C9t(t){this.k7t=!!t,this.Z7t()}l9t(){return this.k7t}I9t(t){this.F7t!==t&&(this.F7t=t,this.Bc.Zq())}E9t(){return this.F7t}P9t(t){this.O7t!==t&&(this.O7t=t,"fixed"===this.F7t&&this.Bc.Zq())}R9t(){return this.O7t}A9t(){return this.Q7t(),this.V7t.oR()}F9t(){return this.Q7t(),this.V7t.lR()}O9t(t,s){this.Q7t();const i=this.zq();RI.set(t-i.pM(),s-i.yM()),RI.rotate(-i.WY()),RI.offset(i.My()*i.DK(),i.Gy()*i.kK()),RI.St(i.My(),i.Gy()),RI.scale(this.V7t.My(),this.V7t.Gy());const e=this.V7t.fR(RI.Oa(),RI.La());if(e){const t=e.ew("tag");if(t)return t.Pg}return""}D9t(t,s,i){const e=this.O9t(s,i);return e&&hI.Ke(t,e)}L9t(t,s){this.Q7t(),s=Math.floor(s);const i=this.V7t.pR(t,s);if(!i)return null;const e=this.zq(),n=this.V7t.qP(),r=i.Ky(),h=i.tw()-(i.Gy()-i.Cy())*n,o=i.My()*n/this.V7t.My()*e.My(),a=i.Gy()*n/this.V7t.Gy()*e.Gy();return RI.set(r,h),RI.St(this.V7t.My(),this.V7t.Gy()),RI.scale(e.My(),e.Gy()),RI.offset(-e.My()*e.DK(),-e.Gy()*e.kK()),RI.rotate(e.WY()),RI.offset(e.pM(),e.yM()),{x:RI.Oa(),y:RI.La(),width:o,height:a}}N9t(t){return this.Q7t(),this.V7t.mR(t)}k9t(t){let s=AI.get(t);return null===s?"":(s||(s="span"),`</${s||"span"}>`)}B9t(t,s){let i=AI.get(t);if(null===i)return"";switch(i||(i="span"),t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async $9t(){if(this.N7t)return this.L7t;const t=new hI.pn(this.$c,{mg:!0}).Ig(),s=new Map;let i='<span class="c3-text"';const e=[];e.push(`font-family: '${this.s9t()}';`),this.n9t()&&e.push("font-weight: bold;"),this.r9t()&&e.push("font-style: italic;"),"character"===this.a9t()&&e.push("word-break: break-all;"),i+=` style="${e.join(" ")}">`;const n=this.D7t?this.yH().PQt(this.D7t):null;if(this.D7t){const i=hI.jn(hI.jd),e=[],r=new Map;for(const s of t)if(s.vy()){const t=s.uw(n);if(t){const s=t.qw().H0().ikt();if(r.has(s))continue;r.set(s,null),e.push(i.$u(async()=>{const t=await s.I6();r.set(s,t)}))}}await Promise.all(e);const h=[];for(const e of t)if(e.vy()){const t=e.uw(n);if(t){const e=t.qw(),n=e.H0().ikt();h.push(i.$u(async()=>{const i=await e.H0().nkt(r.get(n));s.set(t,i)}))}}await Promise.all(h);for(const t of r.values())t instanceof ImageBitmap&&t.close&&t.close()}const r=new Map;for(const e of t){const t=e.hw();let h=[...r.keys()];h.reverse();for(const s of h)t.has(s)&&t.get(s)===r.get(s)||(r.delete(s),i+=this.k9t(s));for(const[s,e]of t)r.has(s)||(r.set(s,e),i+=this.B9t(s,e));if(e.zg()&&(i+=hI.Pm(hI.Im(e.Hg().join("")),"\n","<br>")),e.vy()&&n){const r=e.uw(n);if(r){const n=s.get(r);if(n){const s=[];let h="0.2em";const o=t.get("iconoffsety");if(o){let t=o.trim();h=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}s.push(`top: ${h}`),"nearest"===this.Bc.LW()&&s.push("image-rendering: pixelated"),i+=`<img class="c3-text-icon" data-icon="${e.lw()}" width="${r.My()}" height="${r.Gy()}" style="${s.join(";")}" src="${n}">`}}}}const h=[...r.keys()];h.reverse();for(const t of h)i+=this.k9t(t);return i+="</span>",this.L7t=i,this.N7t=!0,this.L7t}wrt(){const t=this.Bc.zj();if(t>=this.W7t)this.K7t(),this.tK(hI.uH.Text.aH.b9t),this.Bc.Zq();else{let s=hI.gr(this.$7t,this.W7t,t,0,this.U7t);s=Math.floor(s),s!==this.V7t.zP()&&(this.V7t.VP(s),this.Bc.Zq())}}bLt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.iR(),O8t:t=>this.u9t(t)},{name:t+".properties.font.name",value:this.s9t(),O8t:t=>this.c9t(t)},{name:t+".properties.size.name",value:this.i9t(),O8t:t=>this.f9t(t)},{name:t+".properties.line-height.name",value:this.e9t(),O8t:t=>this.d9t(t)},{name:t+".properties.bold.name",value:this.n9t(),O8t:t=>this.p9t(t)},{name:t+".properties.italic.name",value:this.r9t(),O8t:t=>this.m9t(t)},{name:t+".debugger.text-width",value:this.A9t()},{name:t+".debugger.text-height",value:this.F9t()}]}]}ADt(){return self.W9t}};const FI=new WeakMap,OI=new Map([["left",0],["center",1],["right",2]]),DI=new Map([["top",0],["center",1],["bottom",2]]),LI=["ltr","rtl"];self.W9t=class extends self.e0{constructor(){super(),FI.set(this,self.yZ.bZ().a0())}get text(){return FI.get(this).iR()}set text(t){oI.ue(t);const s=FI.get(this);s.K7t(),s.u9t(t)}U9t(t,s){oI.ue(t),oI.he(s);const i=FI.get(this);i.K7t(),i.S9t(t,s)}V9t(){FI.get(this).v9t()}set L4(t){oI.ue(t),FI.get(this).c9t(t)}get L4(){return FI.get(this).s9t()}set B4(t){FI.get(this).p9t(t)}get B4(){return FI.get(this).n9t()}set W4(t){FI.get(this).m9t(t)}get W4(){return FI.get(this).r9t()}set N4(t){oI.he(t),FI.get(this).f9t(t)}get N4(){return FI.get(this).i9t()}set z9t(t){if(oI.Ge(t),t.length<3)throw new Error("expected 3 elements");PI.Po(t[0],t[1],t[2]),FI.get(this).x9t(PI)}get z9t(){const t=FI.get(this).M9t();return[t.ko(),t.Bo(),t.$o()]}set lineHeight(t){oI.he(t),FI.get(this).d9t(t)}get lineHeight(){return FI.get(this).e9t()}set z4(t){oI.ue(t);const s=OI.get(t);if(void 0===s)throw new Error("invalid mode");FI.get(this).g9t(s)}get z4(){return TI[FI.get(this).h9t()]}set verticalAlign(t){oI.ue(t);const s=DI.get(t);if(void 0===s)throw new Error("invalid mode");FI.get(this).y9t(s)}get verticalAlign(){return GI[FI.get(this).o9t()]}set j4(t){if(!CI.includes(t))throw new Error("invalid mode");FI.get(this).w9t(t)}get j4(){return FI.get(this).a9t()}set q4(t){oI.ue(t);const s=LI.indexOf(t);if(-1===s)throw new Error("invalid text direction");FI.get(this).G9t(s)}get q4(){return LI[FI.get(this)._9t()]}set j9t(t){FI.get(this).C9t(!!t)}get j9t(){return FI.get(this).l9t()}q9t(t){oI.he(t);const s=FI.get(this);s.I9t("fixed"),s.P9t(t)}H9t(){FI.get(this).I9t("auto")}get Y4(){return FI.get(this).A9t()}get X4(){return FI.get(this).F9t()}J9t(){const t=FI.get(this);return[t.A9t(),t.F9t()]}Y9t(t,s,i){return oI.ue(t),oI.he(s),oI.he(i),FI.get(this).D9t(t,s,i)}X9t(t,s){return oI.he(t),oI.he(s),FI.get(this).O9t(t,s)}Z9t(t,s=0){return oI.ue(t),oI.he(s),FI.get(this).L9t(t,s)}K9t(t){return oI.ue(t),FI.get(this).N9t(t)}Q9t(t){const s=FI.get(this),i=s.yH().JH(t);s.Y7t(i)}tts(){return FI.get(this).$9t()}}}{const NI=self.Cs;NI.uH.Text.aH={sts(t,s){return s?this.$c===t:NI.Ke(this.$c,t)},its(){return-1!==this.W7t},b9t:()=>!0,ets(t,s,i){return this.D9t(t,s,i)}}}{const kI=self.Cs,BI=kI.jn(kI.To);kI.uH.Text._dt={Vc(t){this.K7t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.u9t(t.toString())},nts(t){this.K7t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),(t=t.toString())&&this.u9t(this.$c+t)},rts(t,s){this.K7t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.S9t(t.toString(),s)},hts(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.P7t&&i===this.kE&&e===this.BE||(this.c9t(t),this.p9t(i),this.m9t(e))},OP(t){this.f9t(t)},ots(t){BI.ta(t),BI.Zn(),this.x9t(BI)},ats(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},d7t(t){this.zq().eM(t),this.Bc.Zq()},lts(){this.v9t()},NP(t){this.d9t(t)},uts(t){this.g9t(t)},cts(t){this.y9t(t)},fts(t){this.T9t(t)},tR(t){this.G9t(t)},dts(t){this.Y7t(t)},pts(){return this.$9t()},mts(t){this.C9t(t)},gts(t,s){this.I9t(["auto","fixed"][t]),this.P9t(s)}}}{const $I=self.Cs;$I.uH.Text.Cdt={Text(){return this.$c},yts(){return this.E7t?$I.pn.Lg(this.$c):this.$c},wts(){return this.P7t},Sts(){return this.R7t},vts(){return this.A9t()},bts(){return this.F9t()},xts(){return this.A7t},Mts(t,s){return this.O9t(t,s)},Tts(t){return this.N9t(t)},Gts(t,s){const i=this.L9t(t,s);return i?i.x:0},_ts(t,s){const i=this.L9t(t,s);return i?i.y:0},Cts(t,s){const i=this.L9t(t,s);return i?i.width:0},Its(t,s){const i=this.L9t(t,s);return i?i.height:0},Ets(){return this.L7t}}}{const WI=self.Cs;WI.uH.si=class extends WI.hDt{constructor(t){super(t)}qn(){super.qn()}}}{const UI=self.Cs;UI.uH.si.SBt=class extends UI.HDt{constructor(t){super(t)}qn(){super.qn()}RDt(){}}}{const VI=self.Cs,zI="browser";VI.uH.si.Instance=class extends VI.KDt{constructor(t,s){super(t,zI),this.Pts="",this.Rts=!1,this.Ats="",this.Fts="",this.Ots=!1,this.Dts=0,this.Lts=0,this.Nts=0,this.kts=0,this.Bts=!1,this.$ts=!1,this.Wts=new Map,this.Uts=!1,this.Vts="",this.zts=!1,this.lLt([["online-state",t=>this.jts(t)],["backbutton",()=>this.qts()],["sw-message",t=>this.Hts(t)],["hashchange",t=>this.Jts(t)],["install-available",()=>this.Yts()],["app-installed",t=>this.Xts(t)],["fullscreenerror",()=>this.$Ht()]]);const i=this.yH().Sf();this.Zf=new VI.Jf(VI.Uf.Hf(i,"afterfirstlayoutstart",()=>this.Zts()),VI.Uf.Hf(i,"window-resize",()=>this.kHt()),VI.Uf.Hf(i,"window-focus",()=>this.LZt()),VI.Uf.Hf(i,"window-blur",()=>this.DZt()),VI.Uf.Hf(i,"suspend",()=>this.Kts()),VI.Uf.Hf(i,"resume",()=>this.Qts()),VI.Uf.Hf(i,"windowmaximize",()=>this.tss()),VI.Uf.Hf(i,"windowminimize",()=>this.sss())),this.Bc.eH(this.cLt("get-initial-state",{exportType:this.Bc.sJ()}).then(t=>{this.Pts=t.location,this.Rts=t.isOnline,this.Ats=t.referrer,this.Fts=t.title,this.Ots=t.isCookieEnabled,this.Dts=t.screenWidth,this.Lts=t.screenHeight,this.Nts=t.windowOuterWidth,this.kts=t.windowOuterHeight,this.Bts=t.windowHasFocus,this.$ts=t.isConstructArcade}))}qn(){super.qn()}Zts(){this.uLt("ready-for-sw-messages")}async jts(t){const s=!!t.isOnline;this.Rts!==s&&(this.Rts=s,this.Rts?await this.hH(VI.uH.si.aH.iss):await this.hH(VI.uH.si.aH.ess))}async kHt(){await this.hH(VI.uH.si.aH.nss)}async $Ht(){await this.hH(VI.uH.si.aH.rss)}async LZt(){this.Bts=!0,await this.hH(VI.uH.si.aH.hss)}async DZt(){this.Bts=!1,await this.hH(VI.uH.si.aH.oss)}async tss(){await this.hH(VI.uH.si.aH.ass)}async sss(){await this.hH(VI.uH.si.aH.lss)}Kts(){this.tK(VI.uH.si.aH.uss)}Qts(){this.tK(VI.uH.si.aH.css)}async qts(){await this.hH(VI.uH.si.aH.fss)}Hts(t){const s=t.type;"downloading-update"===s?this.tK(VI.uH.si.aH.dss):"update-ready"===s||"update-pending"===s?this.tK(VI.uH.si.aH.pss):"offline-ready"===s&&this.tK(VI.uH.si.aH.mss)}Jts(t){this.Pts=t.location,this.tK(VI.uH.si.aH.gss)}Yts(){this.Uts=!0,this.tK(VI.uH.si.aH.yss)}Xts(t){this.Uts=!1,this.tK(VI.uH.si.aH.wss)}Sss(){return this.zts}vss(t){t=!!t,this.zts!==t&&(this.zts=t,this.uLt("set-warn-on-close",{enabled:t}))}bLt(){const t="plugins.browser.debugger";return[{title:"plugins.browser.name",properties:[{name:t+".user-agent",value:navigator.userAgent},{name:t+".is-online",value:this.Rts},{name:t+".is-fullscreen",value:this.Bc.Dq().yJt()}]}]}}}{const jI=self.Cs;jI.uH.si.aH={bss(){return this.Rts},iss:()=>!0,ess:()=>!0,nss:()=>!0,rss:()=>!0,hss:()=>!0,oss:()=>!0,xss(){return this.Bts},Mss(){return this.Ots},Tss(){return this.Bc.Dq().yJt()},fss:()=>!0,Gss(t){return(this.Bc.Dq().b2()<=this.Bc.Dq().M2()?0:1)===t},dss:()=>!0,pss:()=>!0,mss:()=>!0,gss:()=>!0,yss:()=>!0,_ss(){return this.Uts},Css(t){switch(t){case 0:return"accepted"===this.Vts;case 1:return"dismissed"===this.Vts;case 2:return"error"===this.Vts;case 3:return!0;default:return!1}},wss:()=>!0,Iss(t){const s=this.Bc.Dq().SJt();switch(t){case 0:return"browser"===s;case 1:return"minimal-ui"===s;case 2:return"standalone"===s;case 3:return"fullscreen"===s;default:return!1}},Ess(){return this.Sss()},ass:()=>!0,lss:()=>!0,Pss(){return!this.Bc.Oj()},uss:()=>!0,css:()=>!0,Rss:()=>!1,Ass:()=>!1,Fss:()=>!1,Oss:()=>!1,Dss:()=>!1,Lss:()=>!0,Nss:()=>!0}}{const C3=self.Cs,ORIENTATIONS=["portrait","landscape","portrait-primary","portrait-secondary","landscape-primary","landscape-secondary"];C3.uH.si._dt={kss(t){this.uLt("alert",{message:t.toString()})},Bss(){this.$ts||(this.Bc.aK()?self.lK.$ss():this.uLt("close"))},Wss(){this.uLt("set-focus",{isFocus:!0})},Uss(){this.uLt("set-focus",{isFocus:!1})},Vss(){this.$ts||this.uLt("navigate",{type:"back"})},zss(){this.$ts||this.uLt("navigate",{type:"forward"})},jss(){},qss(){this.$ts||(this.Bc.aK()?this.Bc.JZt({type:"reload"}):this.uLt("navigate",{type:"reload"}))},Hss(t,s){this.fLt("navigate",{type:"url",url:t,target:s,exportType:this.Bc.sJ()})},Jss(t,s){this.fLt("navigate",{type:"new-window",url:t,tag:s,exportType:this.Bc.sJ()})},Yss(t,s){t>=2&&(t+=1),6===t&&(t=2),1===t&&(t=0);const i=C3.wqt.GJt(t);this.Bc.Dq().bJt(i),this.fLt("request-fullscreen",{navUI:s})},Xss(){this.fLt("exit-fullscreen")},Zss(t){const s=t.split(",");for(let t=0,i=s.length;t<i;++t)s[t]=parseInt(s[t],10);this.fLt("vibrate",{pattern:s})},Nq(t,s){if(!t||!s)return;const i=this.Bc.Dz().MH(t);this.Bc.Nq(i,s)},Kss(t,s,i){if(!i)return;const e=`data:${s},${encodeURIComponent(t)}`;this.Bc.Nq(e,i)},Qss(t,s){s=s.toString(),0===t?console.log(s):1===t?console.warn(s):2===t&&console.error(s)},tis(t){console.group(t)},sis(){console.groupEnd()},iis(jsStr){try{eval(jsStr)}catch(t){console.error("Error executing JavaScript: ",t)}},eis(t){if((t=Math.floor(t))<0||t>=ORIENTATIONS.length)return;const s=ORIENTATIONS[t];this.fLt("lock-orientation",{orientation:s})},nis(){this.fLt("unlock-orientation")},OH(t){this.Bc.Dz().OH(t)},async ris(t,s,i,e){await this.cLt("set-document-css-style",{prop:C3.bo(t),value:s,selector:i,"is-all":0!==e})},async his(t,s,i){const e=await this.cLt("get-document-css-style",{prop:t,selector:s});e.isOk&&this.Wts.set(i.toLowerCase(),e.result.trim())},ois(t){this.uLt("set-hash",{hash:t})},ais(t,s){this.uLt("set-window-size",{windowWidth:t,windowHeight:s})},lis(t,s){this.uLt("set-window-position",{windowX:t,windowY:s})},async uis(){const t=await this.cLt("request-install");this.Vts=t.result,this.tK(C3.uH.si.aH.Css)},cis(t){this.vss(t)},fis(){this.Bc.HZt({type:"maximize-window"})},dis(){this.Bc.HZt({type:"minimize-window"})},pis(){this.Bc.HZt({type:"restore-window"})}}}{const C3=self.Cs;C3.uH.si.Cdt={URL(){return this.Bc.tj()?this.Pts:location.toString()},mis(){return this.Bc.tj()?new URL(this.Pts).protocol:location.protocol},gis(){return this.Bc.tj()?new URL(this.Pts).hostname:location.hostname},Port(){return this.Bc.tj()?new URL(this.Pts).port:location.port},yis(){return this.Bc.tj()?new URL(this.Pts).pathname:location.pathname},wis(){return this.Bc.tj()?new URL(this.Pts).hash:location.hash},Ys(){return this.Bc.tj()?new URL(this.Pts).search:location.search},Sis(t){const s=this.Bc.tj()?new URL(this.Pts).search:location.search,i=RegExp("[?&]"+t+"=([^&]*)").exec(s);return i?decodeURIComponent(i[1].replace(/\+/g," ")):""},vis(){return this.Ats},bis(){return this.Fts},xis:()=>navigator.language,Ks:()=>navigator.platform,Mis:()=>navigator.userAgent,Tis(jsStr){let result=0;try{result=eval(jsStr)}catch(t){console.error("Error executing JavaScript: ",t)}return"number"==typeof result||"string"==typeof result?result:"boolean"==typeof result&&result?1:0},CSSStyleValue(t){return this.Wts.get(t)||""},Gis:()=>navigator.appName,_is:()=>navigator.appVersion,Cis:()=>navigator.product,Iis:()=>navigator.vendor,Eis:()=>1,Pis:()=>1/0,Ris(){const t=navigator.connection;return t&&(t.downlink||t.downlinkMax||t.bandwidth)||1/0},ConnectionType(){const t=navigator.connection;return t&&t.type||"unknown"},Ais:()=>self.devicePixelRatio,Fis(){return this.Dts},Ois(){return this.Lts},Dis(){return this.Bc.Dq().b2()},Lis(){return this.Bc.Dq().M2()},Nis(){return this.Nts},kis(){return this.Nts},Bis(){return this.Bc.Dq().SJt()},$is(){return this.Vts}}}{const qI=self.Cs;qI.ayt.INt=class extends qI.lNt{constructor(t){super(t)}qn(){super.qn()}}}{const HI=self.Cs;HI.ayt.INt.SBt=class extends HI.pNt{constructor(t){super(t)}qn(){super.qn()}RDt(){}}}{const JI=self.Cs,YI=self.ks,XI=self.d0,ZI=0,KI=1,QI=new Set;JI.ayt.INt.Instance=class extends JI.gNt{constructor(t,s){super(t),this.NOt(!0),s&&(this.NOt(s[ZI]),this.uat(s[KI]))}qn(){super.qn()}NOt(t){this.di.sWt(!!t)}Cu(){return this.di.tWt()}uat(t){const s=this.di.SRt();if(!t.trim())return void s.delete("solidTags");let i=s.get("solidTags");i||(i=new Set,s.set("solidTags",i)),i.clear();for(const s of t.split(" "))s&&i.add(s.toLowerCase())}_1(){return this.di.SRt().get("solidTags")||QI}Wis(){return[...this._1()].join(" ")}CM(){return{e:this.Cu()}}IM(t){this.NOt(t.e)}lpt(t){if(t===ZI)return this.Cu()}mpt(t,s){t===ZI&&this.NOt(s)}bLt(){return[{title:"$"+this.w0().Pc(),properties:[{name:"behaviors.solid.properties.enabled.name",value:this.Cu(),O8t:t=>this.NOt(t)},{name:"behaviors.solid.properties.tags.name",value:this.Wis(),O8t:t=>this.uat(t)}]}]}ADt(){return self.Uis}};const tE=new WeakMap;self.Uis=class extends XI{constructor(){super(),tE.set(this,XI.bZ().a0())}set isEnabled(t){tE.get(this).NOt(!!t)}get isEnabled(){return tE.get(this).Cu()}set tags(t){YI.ue(t),tE.get(this).uat(t)}get tags(){return tE.get(this).Wis()}}}self.Cs.ayt.INt.aH={Cu(){return this.Cu()}},self.Cs.ayt.INt._dt={NOt(t){this.NOt(t)},uat(t){this.uat(t)}},self.Cs.ayt.INt.Cdt={};{const sE=self.Cs;sE.ayt.Vis=class extends sE.lNt{constructor(t){super(t)}qn(){super.qn()}}}{const iE=self.Cs;iE.ayt.Vis.SBt=class extends iE.pNt{constructor(t){super(t)}qn(){super.qn()}RDt(){}}}{const eE=self.Cs,nE=self.ks,rE=self.d0,hE=0,oE=1,aE=2,lE=3,uE=4,cE=5,fE=6;eE.ayt.Vis.Instance=class extends eE.gNt{constructor(t,s){super(t);const i=this.zq();this.hkt=0,this.zis=0,this._o=0,this.jis=!1,this.qis=!1,this.His=!1,this.jIt=!0,this.Jis=0,this.Yis=0,this.b6t=i.pM(),this.x6t=i.yM(),this.Xis=i.WY(),this.Zis=0,this.Kis=Math.min(Math.abs(i.My()),Math.abs(i.Gy())/2),this.Qis=!1,s&&(this.hkt=s[hE],this.zis=s[oE],this._o=s[aE],this.jis=!!s[lE],this.qis=!!s[uE],this.His=!!s[cE],this.jIt=!!s[fE]);const e=i.WY();this.Jis=Math.cos(e)*this.hkt,this.Yis=Math.sin(e)*this.hkt,this.jIt&&(this.yLt(),this.jis&&this.bNt())}qn(){super.qn()}CM(){const t={dx:this.Jis,dy:this.Yis,lx:this.b6t,ly:this.x6t,lka:this.Xis,t:this.Zis};return 0!==this.zis&&(t.acc=this.zis),0!==this._o&&(t.g=this._o),this.His&&(t.st=this.His),this.jIt||(t.e=this.jIt),this.jis&&(t.bos=this.jis),this.qis&&(t.sa=this.qis),t}IM(t){this.Jis=t.dx,this.Yis=t.dy,this.b6t=t.lx,this.x6t=t.ly,this.Xis=t.lka,this.Zis=t.t,this.zis=t.hasOwnProperty("acc")?t.acc:0,this._o=t.hasOwnProperty("g")?t.g:0,this.His=!!t.hasOwnProperty("st")&&t.st,this.jis=!!t.hasOwnProperty("bos")&&t.bos,this.qis=!!t.hasOwnProperty("sa")&&t.sa,this.$Ft(!t.hasOwnProperty("e")||t.e)}wrt(){if(!this.jIt)return;const t=this.Bc.Lj(this.di),s=this.di.zq();if(s.WY()!==this.Xis){const t=s.WY();if(this.qis){const s=eE.er(0,0,this.Jis,this.Yis);this.Jis=Math.cos(t)*s,this.Yis=Math.sin(t)*s}this.Xis=t}let i=0,e=0;if(0!==this.zis){let n=eE.er(0,0,this.Jis,this.Yis),r=0;r=0===this.Jis&&0===this.Yis?s.WY():eE.rr(0,0,this.Jis,this.Yis),n+=this.zis*t,i=Math.cos(r)*this.zis,e=Math.sin(r)*this.zis,n<0&&(n=0,i=0,e=0),this.Jis=Math.cos(r)*n,this.Yis=Math.sin(r)*n}if(0!==this._o&&(this.Yis+=this._o*t,e+=this._o),this.b6t=s.pM(),this.x6t=s.yM(),0!==this.Jis||0!==this.Yis){const n=this.Jis*t+.5*i*t*t,r=this.Yis*t+.5*e*t*t,h=eE.er(0,0,n,r);if(this.tes(n,r,h),this.Zis+=h,this.qis&&(0!==n||0!==r)){const t=eE.rr(0,0,n,r);s.$Y(t),this.Xis=s.WY()}s.EK()}}tes(t,s,i){const e=this.zq();if(!this.His||i<=this.Kis)return e.AK(t,s),e.EK(),void(this.His&&this.tK(eE.ayt.Vis.aH.ses));this.Qis=!1;const n=e.pM(),r=e.yM(),h=n+t,o=r+s,a=eE.rr(0,0,t,s),l=Math.cos(a)*this.Kis,u=Math.sin(a)*this.Kis,c=Math.floor(i/this.Kis);for(let t=1;t<=c;++t)if(e.PK(n+l*t,r+u*t),e.EK(),this.tK(eE.ayt.Vis.aH.ses),this.di.L2()||this.Qis)return;e.PK(h,o),e.EK(),this.tK(eE.ayt.Vis.aH.ses)}vNt(){if(!this.jIt||!this.jis||0===this.Jis&&0===this.Yis)return;const t=this.Bc.Lj(this.di),s=this.di.zq(),i=this.Bc.kz(),e=i.UH(this.di);if(e){i.vjt(this.di,e);const n=eE.er(0,0,this.Jis,this.Yis),r=i.Ujt(this.di,this.b6t,this.x6t);this.Jis=Math.cos(r)*n,this.Yis=Math.sin(r)*n,s.AK(this.Jis*t,this.Yis*t),s.EK(),this.qis&&(s.$Y(r),this.Xis=s.WY(),s.EK()),i.kjt(this.di,this.Jis/n,this.Yis/n,Math.max(2.5*n*t,30))||i.Wjt(this.di,100)}}lpt(t){switch(t){case hE:return this.ies();case oE:return this.ees();case aE:return this.nes();case uE:return this.qis;case cE:return this.His;case fE:return this.UFt()}}mpt(t,s){switch(t){case hE:this.res(s);break;case oE:this.zis=s;break;case aE:this._o=s;break;case uE:this.qis=!!s;break;case cE:this.His=!!s;break;case fE:this.$Ft(!!s)}}res(t){const s=eE.rr(0,0,this.Jis,this.Yis);this.Jis=Math.cos(s)*t,this.Yis=Math.sin(s)*t}ies(){return eE.Gr(eE.er(0,0,this.Jis,this.Yis),6)}hes(t){this.zis=t}ees(){return this.zis}oes(t){this._o=t}nes(){return this._o}aes(t){const s=eE.er(0,0,this.Jis,this.Yis);this.Jis=Math.cos(t)*s,this.Yis=Math.sin(t)*s}les(){return eE.rr(0,0,this.Jis,this.Yis)}ues(t){t=!!t,this.jis!==t&&(this.jis=t,this.jIt&&(this.jis?this.bNt():this.yNt()))}ces(){return this.jis}fes(t){this.Zis=t}des(){return this.Zis}$Ft(t){this.jIt=!!t,this.jIt?(this.yLt(),this.jis&&this.bNt()):(this.sLt(),this.yNt())}UFt(){return this.jIt}bLt(){const t="behaviors.bullet";return[{title:"$"+this.w0().Pc(),properties:[{name:t+".debugger.vector-x",value:this.Jis,O8t:t=>this.Jis=t},{name:t+".debugger.vector-y",value:this.Yis,O8t:t=>this.Yis=t},{name:t+".properties.speed.name",value:this.ies(),O8t:t=>this.res(t)},{name:t+".debugger.angle-of-motion",value:eE.tr(this.les())},{name:t+".properties.gravity.name",value:this.nes(),O8t:t=>this.oes(t)},{name:t+".properties.acceleration.name",value:this.ees(),O8t:t=>this.hes(t)},{name:t+".debugger.distance-travelled",value:this.des()},{name:t+".properties.enabled.name",value:this.UFt(),O8t:t=>this.$Ft(t)}]}]}ADt(){return self.pes}};const dE=new WeakMap;self.pes=class extends rE{constructor(){super(),dE.set(this,rE.bZ().a0())}get speed(){return dE.get(this).ies()}set speed(t){nE.he(t),dE.get(this).res(t)}get acceleration(){return dE.get(this).ees()}set acceleration(t){nE.he(t),dE.get(this).hes(t)}get mes(){return dE.get(this).nes()}set mes(t){nE.he(t),dE.get(this).oes(t)}get ges(){return dE.get(this).les()}set ges(t){nE.he(t),dE.get(this).aes(t)}get yes(){return dE.get(this).ces()}set yes(t){dE.get(this).ues(!!t)}get wes(){return dE.get(this).des()}set wes(t){nE.he(t),dE.get(this).fes(t)}get isEnabled(){return dE.get(this).UFt()}set isEnabled(t){dE.get(this).$Ft(t)}}}{const pE=self.Cs;pE.ayt.Vis.aH={Ses(t,s){const i=Math.hypot(this.Jis,this.Yis);return pE.compare(i,t,s)},ves(t,s){return pE.compare(this.des(),t,s)},ses:()=>!0,Cu(){return this.UFt()}}}{const mE=self.Cs;mE.ayt.Vis._dt={bes(t){this.res(t)},xes(t){this.hes(t)},Mes(t){this.oes(t)},Tes(t){this.aes(mE.Qn(t))},TV(t){if(!t)return;const s=t.sFt(this.di);if(!s)return;const i=this.di.zq(),e=this.Bc.kz(),n=this.Bc.Lj(this.di),r=mE.er(0,0,this.Jis,this.Yis),h=e.Ujt(this.di,this.b6t,this.x6t,s);this.Jis=Math.cos(h)*r,this.Yis=Math.sin(h)*r,i.AK(this.Jis*n,this.Yis*n),i.EK(),this.qis&&(i.$Y(h),this.Xis=i.WY(),i.EK()),0!==r&&(this.jis?e.kjt(this.di,this.Jis/r,this.Yis/r,Math.max(2.5*r*n,30))||e.Wjt(this.di,100):e.Njt(this.di,this.Jis/r,this.Yis/r,Math.max(2.5*r*n,30),s))},Ges(t){this.ues(t)},_es(t){this.fes(t)},NOt(t){this.$Ft(t)},Ces(){this.Qis=!0}}}{const gE=self.Cs;gE.ayt.Vis.Cdt={Ies(){return this.ies()},Ees(){return this.ees()},Pes(){return gE.tr(this.les())},Res(){return this.des()},Aes(){return this.nes()}}}{const yE=self.Cs;yE.ayt.Fes=class extends yE.lNt{constructor(t){super(t)}qn(){super.qn()}}}{const wE=self.Cs;wE.ayt.Fes.SBt=class extends wE.pNt{constructor(t){super(t)}qn(){super.qn()}RDt(){}}}{const SE=self.Cs;SE.ayt.Fes.Instance=class extends SE.gNt{constructor(t,s){super(t),this.Oes=null,this.Des=-1,this.Les="",this.Nes=new Set,this.kes=0,this.Bes=0,this.$es=0,this.Jis=0,this.Yis=0,this.Wes=0,this.Ues=0,this.Ves=0,this.zes=0,this.Xis=0,this.jes=!1,s&&(this.jes=s[0]);const i=this.Bc.Sf();this.Zf=new SE.Jf(SE.Uf.Hf(i,"instancedestroy",t=>this.qes(t.S0)),SE.Uf.Hf(i,"afterload",t=>this.Snt()))}qn(){this.Oes=null,super.qn()}Hes(t){t?(this.Oes=t,this.SLt()):(this.Oes=null,this.iLt())}Jes(t,s,i){if(!t)return;const e=t.sFt(this.di);if(!e)return;this.Les=s,this.Hes(e);const n=this.di.zq(),r=e.zq();if("properties"===this.Les){const t=this.Nes;t.clear();for(const s of i)t.add(s);this.Jis=n.pM()-r.pM(),this.Yis=n.yM()-r.yM(),this.Ves=n.WY()-r.WY(),this.Xis=n.WY(),this.zes=n.SM()-r.SM(),t.has("x")&&t.has("y")&&(this.Bes=SE.rr(r.pM(),r.yM(),n.pM(),n.yM())-r.WY(),this.kes=SE.er(r.pM(),r.yM(),n.pM(),n.yM())),t.has("width-abs")?this.Wes=n.My()-r.My():t.has("width-scale")&&(this.Wes=n.My()/r.My()),t.has("height-abs")?this.Ues=n.Gy()-r.Gy():t.has("height-scale")&&(this.Ues=n.Gy()/r.Gy())}else this.kes=SE.er(r.pM(),r.yM(),n.pM(),n.yM())}CM(){const t=this.Nes,s=this.Les,i={uid:this.Oes&&!this.Oes.L2()?this.Oes.RZ():-1,m:s,d:this.jes};return"rope"===s||"bar"===s?i.pd=this.kes:"properties"===s&&(i.ps=[...this.Nes],t.has("imagepoint")?i.ip=this.$es:t.has("x")&&t.has("y")?(i.pa=this.Bes,i.pd=this.kes):(t.has("x")&&(i.dx=this.Jis),t.has("y")&&(i.dy=this.Yis)),t.has("angle")&&(i.da=this.Ves,i.lka=this.Xis),(t.has("width-abs")||t.has("width-scale"))&&(i.dw=this.Wes),(t.has("height-abs")||t.has("height-scale"))&&(i.dh=this.Ues),t.has("z")&&(i.dz=this.zes)),i}IM(t){const s=t.m,i=this.Nes;if(i.clear(),this.Des=t.uid,"number"!=typeof s){if(this.Les=s,t.hasOwnProperty("d")&&(this.jes=!!t.d),"rope"===s||"bar"===s)this.kes=t.pd;else if("properties"===s){for(const s of t.ps)i.add(s);i.has("imagepoint")?this.$es=t.ip:i.has("x")&&i.has("y")?(this.Bes=t.pa,this.kes=t.pd):(i.has("x")&&(this.Jis=t.dx),i.has("y")&&(this.Yis=t.dy)),i.has("angle")&&(this.Ves=t.da,this.Xis=t.lka||0),(i.has("width-abs")||i.has("width-scale"))&&(this.Wes=t.dw),(i.has("height-abs")||i.has("height-scale"))&&(this.Ues=t.dh),i.has("z")&&(this.zes=t.dz)}}else this.Yes(t)}Yes(t){const s=this.Nes,i=t.msa,e=t.tsa,n=t.pa,r=t.pd;switch(t.m){case 0:this.Les="properties",s.add("x").add("y").add("angle"),this.Bes=n,this.kes=r,this.Ves=i-e,this.Xis=t.lka;break;case 1:this.Les="properties",s.add("x").add("y"),this.Bes=n,this.kes=r;break;case 2:this.Les="properties",s.add("angle"),this.Ves=i-e,this.Xis=t.lka;break;case 3:this.Les="rope",this.kes=t.pd;break;case 4:this.Les="bar",this.kes=t.pd}}Snt(){-1===this.Des?this.Hes(null):(this.Hes(this.Bc.Bq(this.Des)),this.Des=-1)}qes(t){this.Oes===t&&(this.Hes(null),this.jes&&this.Bc.TZ(this.di))}gLt(){const t=this.Oes;if(!t||t.L2())return;const s=t.zq(),i=this.di.zq(),e=this.Les;let n=!1;if("rope"===e||"bar"===e){const t=SE.er(i.pM(),i.yM(),s.pM(),s.yM());if(t>this.kes||"bar"===e&&t<this.kes){const t=SE.rr(s.pM(),s.yM(),i.pM(),i.yM());i.PK(s.pM()+Math.cos(t)*this.kes,s.yM()+Math.sin(t)*this.kes),n=!0}}else{const e=this.Nes;let r=0;if(e.has("imagepoint")){const[s,e]=t.TAt(this.$es);i.xAt(s,e)||(i.PK(s,e),n=!0)}else if(e.has("x")&&e.has("y")){const t=s.pM()+Math.cos(s.WY()+this.Bes)*this.kes,e=s.yM()+Math.sin(s.WY()+this.Bes)*this.kes;i.xAt(t,e)||(i.PK(t,e),n=!0)}else r=s.pM()+this.Jis,e.has("x")&&r!==i.pM()&&(i.mM(r),n=!0),r=s.yM()+this.Yis,e.has("y")&&r!==i.yM()&&(i.wM(r),n=!0);e.has("angle")&&(this.Xis!==i.WY()&&(this.Ves=SE.Kn(this.Ves+(i.WY()-this.Xis))),r=SE.Kn(s.WY()+this.Ves),r!==i.WY()&&(i.$Y(r),n=!0),this.Xis=i.WY()),e.has("width-abs")&&(r=s.My()+this.Wes,r!==i.My()&&(i.hy(r),n=!0)),e.has("width-scale")&&(r=s.My()*this.Wes,r!==i.My()&&(i.hy(r),n=!0)),e.has("height-abs")&&(r=s.Gy()+this.Ues,r!==i.Gy()&&(i.oy(r),n=!0)),e.has("height-scale")&&(r=s.Gy()*this.Ues,r!==i.Gy()&&(i.oy(r),n=!0)),e.has("z")&&(r=s.SM()+this.zes,r!==i.SM()&&(i.vM(r),this.Bc.Zq()))}n&&i.EK()}bLt(){const t="behaviors.pin.debugger";return[{title:"$"+this.w0().Pc(),properties:[{name:t+".is-pinned",value:!!this.Oes},{name:t+".pinned-uid",value:this.Oes?this.Oes.RZ():0}]}]}}}self.Cs.ayt.Fes.aH={Xes(){return!!this.Oes},Zes(){return this.jes}},self.Cs.ayt.Fes._dt={Kes(t,s){this.Jes(t,0===s?"rope":"bar")},Qes(t,s,i,e,n,r,h){const o=[];s&&o.push("x"),i&&o.push("y"),e&&o.push("angle"),h&&o.push("z"),1===n?o.push("width-abs"):2===n&&o.push("width-scale"),1===r?o.push("height-abs"):2===r&&o.push("height-scale"),0!==o.length&&this.Jes(t,"properties",o)},tns(t,s,i,e,n,r){const h=["imagepoint"];i&&h.push("angle"),r&&h.push("z"),1===e?h.push("width-abs"):2===e&&h.push("width-scale"),1===n?h.push("height-abs"):2===n&&h.push("height-scale"),this.$es=s,this.Jes(t,"properties",h)},sns(t){"rope"!==this.Les&&"bar"!==this.Les||(this.kes=Math.max(t,0))},ins(t){this.jes=t},ens(){this.Hes(null),this.Les="",this.Nes.clear(),this.$es=""},Fes(t,s){switch(s){case 0:this.Jes(t,"properties",["x","y","angle"]);break;case 1:this.Jes(t,"properties",["x","y"]);break;case 2:this.Jes(t,"properties",["angle"]);break;case 3:this.Jes(t,"rope");break;case 4:this.Jes(t,"bar")}}},self.Cs.ayt.Fes.Cdt={nns(){return this.Oes?this.Oes.RZ():-1}};{const vE=self.Cs;vE.ayt.rns=class extends vE.lNt{constructor(t){super(t)}qn(){super.qn()}}}{const bE=self.Cs;bE.ayt.rns.SBt=class extends bE.pNt{constructor(t){super(t)}qn(){super.qn()}RDt(){}}}{const xE=self.Cs,ME=self.ks,TE=self.d0,GE=0,_E=1,CE=2,IE=3,EE=4,PE=5,RE=6,AE=7,FE=8,OE=0,DE=1,LE=2,NE=3,kE=4,BE=5,$E=6,WE=7,UE=8,VE=9,zE=0,jE=1,qE=2,HE=3,JE=4,YE=2*Math.PI,XE=Math.PI/2,ZE=3*Math.PI/2,KE=[0,1,8,3,4,2,5,6,9,7];xE.ayt.rns.Instance=class extends xE.gNt{constructor(t,s){super(t),this.hns=0,this.ons=0,this.ans=0,this.lns=0,this.uns=0,this.jIt=!0,this.cns=0,this.fns=0,this.pns=0,this.mns=0,this.gns=0,this.yns=0,this.gEt=0,this.wns=0,this.Sns=0,this.vns=0,this.bns=0,s&&(this.ons=KE[s[GE]],this.ans=s[_E],this.mns=this.Bc.Sq()*s[IE],this.cns=s[CE],this.lns=s[CE],this.lns+=this.mns,this.fns=s[EE],0!==this.lns&&(this.gns=this.Bc.Sq()*s[PE],this.hns=s[EE]/this.lns*YE,this.hns+=this.gns/this.lns*YE),this.yns=this.Bc.Sq()*s[AE],this.pns=s[RE],this.uns=s[RE],this.uns+=this.yns,this.jIt=!!s[FE]),this.ons===BE&&(this.uns=xE.Qn(this.uns)),this.W$t(),this.jIt&&this.yLt()}qn(){super.qn()}CM(){return{i:this.hns,e:this.jIt,mv:this.ons,w:this.ans,p:this.lns,mag:this.uns,iv:this.gEt,iv2:this.wns,r:this.bns,lkv:this.Sns,lkv2:this.vns}}IM(t){this.hns=t.i,this.$Ft(t.e),this.ons=t.mv,this.ans=t.w,this.lns=t.p,this.uns=t.mag,this.gEt=t.iv,this.wns=t.iv2,this.bns=t.r,this.Sns=t.lkv,this.vns=t.lkv2}W$t(){const t=this.di.zq();switch(this.ons){case OE:this.gEt=t.pM();break;case DE:this.gEt=t.yM();break;case LE:this.gEt=t.My(),this.bns=t.Gy()/t.My();break;case NE:this.gEt=t.My();break;case kE:this.gEt=t.Gy();break;case BE:this.gEt=t.WY();break;case $E:this.gEt=t.BF();break;case WE:this.gEt=0;break;case UE:this.gEt=t.pM(),this.wns=t.yM();break;case VE:this.gEt=t.SM()}this.Sns=this.gEt,this.vns=this.wns}xns(t){switch(t%=YE,this.ans){case zE:return Math.sin(t);case jE:return t<=XE?t/XE:t<=ZE?1-2*(t-XE)/Math.PI:(t-ZE)/XE-1;case qE:return 2*t/YE-1;case HE:return-2*t/YE+1;case JE:return t<Math.PI?-1:1}return 0}wrt(){const t=this.Bc.Lj(this.di);this.jIt&&0!==t&&(0===this.lns?this.hns=0:this.hns=(this.hns+t/this.lns*YE)%YE,this.Mns())}Mns(){const t=this.di.zq();switch(this.ons){case OE:t.pM()!==this.Sns&&(this.gEt+=t.pM()-this.Sns),t.mM(this.gEt+this.xns(this.hns)*this.uns),this.Sns=t.pM();break;case DE:t.yM()!==this.Sns&&(this.gEt+=t.yM()-this.Sns),t.wM(this.gEt+this.xns(this.hns)*this.uns),this.Sns=t.yM();break;case LE:t.hy(this.gEt+this.xns(this.hns)*this.uns),t.oy(t.My()*this.bns);break;case NE:t.hy(this.gEt+this.xns(this.hns)*this.uns);break;case kE:t.oy(this.gEt+this.xns(this.hns)*this.uns);break;case BE:t.WY()!==this.Sns&&(this.gEt=xE.Kn(this.gEt+(t.WY()-this.Sns))),t.$Y(this.gEt+this.xns(this.hns)*this.uns),this.Sns=t.WY();break;case $E:t.WF(this.gEt+this.xns(this.hns)*this.uns/100);break;case UE:t.pM()!==this.Sns&&(this.gEt+=t.pM()-this.Sns),t.yM()!==this.vns&&(this.wns+=t.yM()-this.vns),t.mM(this.gEt+Math.cos(t.WY())*this.xns(this.hns)*this.uns),t.wM(this.wns+Math.sin(t.WY())*this.xns(this.hns)*this.uns),this.Sns=t.pM(),this.vns=t.yM();break;case VE:t.vM(this.gEt+this.xns(this.hns)*this.uns)}t.EK()}Tns(t,s){}Gns(t){this.lns=t}_ns(){return this.lns}Cns(t){this.uns=t}Ins(t){5===this.ons&&(t=xE.Qn(t)),this.Cns(t)}Ens(){return this.uns}Pns(){let t=this.Ens();return 5===this.ons&&(t=xE.tr(t)),t}Rns(t){5===this.ons&&5!==t&&(this.uns=xE.tr(this.uns)),this.ons=t,this.W$t()}Ans(){return this.ons}Fns(t){this.ans=t}Ons(){return this.ans}Dns(t){this.hns=xE.Zn(t,0,2*Math.PI),this.Mns()}Lns(){return this.hns}$Ft(t){this.jIt=!!t,this.jIt?this.yLt():this.sLt()}UFt(){return this.jIt}lpt(t){switch(t){case GE:return this.ons;case _E:return this.ans;case CE:return this.cns;case RE:return this.pns;case FE:return this.jIt}}mpt(t,s){switch(t){case GE:this.ons=KE[s],this.W$t();break;case _E:this.ans=s;break;case CE:this.cns=s,this.lns=this.cns+this.mns,this.jIt||(0!==this.lns?(this.hns=this.fns/this.lns*YE,this.hns+=this.gns/this.lns*YE):this.hns=0);break;case RE:this.pns=s,this.uns=this.pns+this.yns,this.ons===BE&&(this.uns=xE.Qn(this.uns));break;case FE:this.jIt=!!s}}bLt(){const t="behaviors.sin";return[{title:"$"+this.w0().Pc(),properties:[{name:t+".properties.enabled.name",value:this.UFt(),O8t:t=>this.$Ft(t)},{name:t+".properties.period.name",value:this._ns(),O8t:t=>this.Gns(t)},{name:t+".properties.magnitude.name",value:this.Pns(),O8t:t=>this.Ins(t)},{name:t+".debugger.value",value:this.xns(this.Lns())*this.Pns()}]}]}ADt(){return self.Nns}};const QE=new WeakMap,tP=["horizontal","vertical","size","width","height","angle","opacity","value-only","forwards-backwards","z-elevation"],sP=["sine","triangle","sawtooth","reverse-sawtooth","square"];self.Nns=class extends TE{constructor(){super(),QE.set(this,TE.bZ().a0())}set kns(t){ME.he(t),QE.get(this).Gns(t)}get kns(){return QE.get(this)._ns()}set Bns(t){ME.he(t),QE.get(this).Cns(t)}get Bns(){return QE.get(this).Ens()}set $ns(t){QE.get(this).Dns(t)}get $ns(){return QE.get(this).Lns()}set Wns(t){ME.ue(t);const s=tP.indexOf(t);if(-1===s)throw new Error("invalid movement");QE.get(this).Rns(s)}get Wns(){return tP[QE.get(this).Ans()]}set Uns(t){ME.ue(t);const s=sP.indexOf(t);if(-1===s)throw new Error("invalid wave");QE.get(this).Fns(s)}get Uns(){return sP[QE.get(this).Ons()]}get value(){const t=QE.get(this);return t.xns(t.Lns())*t.Ens()}Vns(){QE.get(this).W$t()}set isEnabled(t){QE.get(this).$Ft(!!t)}get isEnabled(){return QE.get(this).UFt()}}}{const iP=self.Cs;iP.ayt.rns.aH={Cu(){return this.UFt()},zns(t){return this.Ans()===t},jns(t,s){return iP.compare(this._ns(),t,s)},qns(t,s){return iP.compare(this.Pns(),t,s)},Hns(t){return this.Ons()===t}}}self.Cs.ayt.rns._dt={NOt(t){this.$Ft(0!==t)},Jns(t){this.Gns(t)},Yns(t){this.Ins(t)},Xns(t){this.Rns(t)},Zns(t){this.ans=t},Kns(t){const s=2*Math.PI;this.Dns(t*s%s)},Qns(){this.W$t()}},self.Cs.ayt.rns.Cdt={trs(){return this.Lns()/(2*Math.PI)},srs(){return this._ns()},irs(){return this.Pns()},ers(){return this.xns(this.Lns())*this.Pns()}};{let eP=function(t){return"number"==typeof t?-t:t},nP=function(t,s){return"number"==typeof t&&"number"==typeof s},rP=function(t,s){return nP(t,s)?t+s:t},hP=function(t,s){return nP(t,s)?t-s:t},oP=function(t,s){return nP(t,s)?t*s:t},aP=function(t,s){return nP(t,s)?t/s:t},lP=function(t,s){return nP(t,s)?t%s:t},uP=function(t,s){return nP(t,s)?Math.pow(t,s):t},cP=function(t,s){if("string"==typeof t||"string"==typeof s){let i,e;return i="number"==typeof t?(Math.round(1e10*t)/1e10).toString():t,e="number"==typeof s?(Math.round(1e10*s)/1e10).toString():s,i+e}return t&&s?1:0},fP=function(t,s){return nP(t,s)?t||s?1:0:t};unaryminus=eP,bothNumbers=nP,add=rP,subtract=hP,multiply=oP,divide=aP,mod=lP,pow=uP,and=cP,or=fP;const dP=self.Cs;self.rPt=[()=>"Setup Functions",()=>"Temperature",t=>{const s=t.mPt(0);return()=>100*Math.pow(s.jEt()/55,.25)},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1);return()=>s("Energy",i.jEt()/150*9)},()=>0,t=>{const s=t.mPt(0).nPt();return()=>cP("Rust: ",s.Lct())},t=>{const s=t.mPt(0).DEt();return()=>s()},t=>{const s=t.mPt(0).nPt();return()=>s.Lct()},()=>"Particles",()=>60,()=>"Plate",()=>2,()=>"Nail",()=>12,()=>5,()=>"Water",()=>150,()=>.5,()=>1.62,()=>"Salt Water",()=>.7020000000000001,()=>"Humid Air",()=>50,()=>7.5,()=>100,()=>"",()=>1,t=>{const s=t.mPt(0).DEt(),i=t.mPt(1);return()=>s(i.WEt())},t=>{const s=t.mPt(0),i=t.mPt(1).DEt(),e=t.mPt(2),n=t.mPt(3);return()=>s.WEt()+i(e.WEt()-n.WEt())},t=>{const s=t.mPt(0).DEt();return()=>s(360)},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1).DEt(),e=t.mPt(2).DEt(),n=t.mPt(3).nPt(),r=t.mPt(4).DEt(),h=t.mPt(5).nPt(),o=t.mPt(6).DEt(),a=t.mPt(7).nPt(),l=t.mPt(8).DEt(),u=t.mPt(9).nPt();return()=>oP(rP(s.Lct(),i(e(2*Math.sqrt(n.Lct())),r(4*Math.sqrt(h.Lct())),o(-2*Math.sqrt(a.Lct())),l(-4*Math.sqrt(u.Lct())))),2)},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).DEt(),e=t.mPt(2),n=t.mPt(3),r=t.mPt(4).DEt(),h=t.mPt(5),o=t.mPt(6);return()=>s(i(e.WEt()),n.WEt()+r(h.WEt()-o.WEt()))},t=>{const s=t.mPt(0),i=t.mPt(1),e=t.mPt(2).DEt(),n=t.mPt(3),r=t.mPt(4),h=t.mPt(5).DEt(),o=t.mPt(6),a=t.mPt(7).DEt();return()=>"Plate"===s.WEt()?i.WEt()+e(n.WEt()-r.WEt()):h(o.WEt(),a())},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1).DEt(),e=t.mPt(2).DEt(),n=t.mPt(3).nPt(),r=t.mPt(4).DEt(),h=t.mPt(5).nPt();return()=>rP(s.Lct()/2,i(e(2*Math.sqrt(n.Lct())),r(4*Math.sqrt(h.Lct()))))},()=>"outer",()=>"Galvanized Zinc",t=>{const s=t.mPt(0),i=t.mPt(1).nPt(),e=t.mPt(2).nPt(),n=t.mPt(3),r=t.mPt(4),h=t.mPt(5).nPt();return()=>s.WEt()+i.Lct()/2+e.Lct()*Math.floor((n.WEt()-r.WEt())/h.Lct())},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt(),e=t.mPt(2).nPt(),n=t.mPt(3).DEt();return()=>s()-i.Lct()/2*3-e.Lct()*n("outer")},t=>{const s=t.mPt(0),i=t.mPt(1).nPt();return()=>s.WEt()-i.Lct()/2},()=>"inner",t=>{const s=t.mPt(0),i=t.mPt(1),e=t.mPt(2).nPt();return()=>Math.floor((s.WEt()-i.WEt())/e.Lct())-1},t=>{const s=t.mPt(0),i=t.mPt(1).nPt(),e=t.mPt(2).nPt(),n=t.mPt(3).DEt();return()=>s.WEt()+i.Lct()/2+e.Lct()*n("inner")},t=>{const s=t.mPt(0),i=t.mPt(1).nPt(),e=t.mPt(2).nPt();return()=>s.WEt()+i.Lct()/2+1*e.Lct()},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt(),e=t.mPt(2).nPt();return()=>s()-i.Lct()/2*3-0*e.Lct()},t=>{const s=t.mPt(0),i=t.mPt(1).nPt(),e=t.mPt(2).nPt(),n=t.mPt(3),r=t.mPt(4),h=t.mPt(5).nPt();return()=>s.WEt()+i.Lct()/2+e.Lct()*(Math.floor((n.WEt()-r.WEt())/h.Lct())-1)},t=>{const s=t.mPt(0),i=t.mPt(1).nPt();return()=>s.WEt()+i.Lct()/2},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt();return()=>s()-i.Lct()/2*1},()=>-1,t=>{const s=t.mPt(0),i=t.mPt(1),e=t.mPt(2).nPt();return()=>Math.floor((s.WEt()-i.WEt())/e.Lct())},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt(),e=t.mPt(2).nPt(),n=t.mPt(3).nPt();return()=>s()-i.Lct()/2*3-e.Lct()*(n.Lct()+1)},t=>{const s=t.mPt(0),i=t.mPt(1).nPt();return()=>Math.floor(s.WEt()/i.Lct())-1},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1).nPt(),e=t.mPt(2).DEt();return()=>s.Lct()/2+i.Lct()*e("inner")},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt(),e=t.mPt(2).nPt(),n=t.mPt(3).DEt();return()=>s()-i.Lct()/2-e.Lct()*n("outer")},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt(),e=t.mPt(2).nPt(),n=t.mPt(3).nPt();return()=>s()-i.Lct()/2-e.Lct()*(n.Lct()+1)},t=>{const s=t.mPt(0).DEt();return()=>s(5)},t=>{const s=t.mPt(0).DEt();return()=>s("outer")},t=>{const s=t.mPt(0);return()=>s.WEt()},t=>{const s=t.mPt(0),i=t.mPt(1),e=t.mPt(2),n=t.mPt(3);return()=>dP.er(s.WEt(),i.WEt(),e.WEt(),n.WEt())},()=>.68,()=>.84,()=>1.25,t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt();return()=>s(i.Lct()/100)},t=>{const s=t.mPt(0),i=t.mPt(1);return()=>(s.WEt()+i.WEt())/2},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1),e=t.mPt(2),n=t.mPt(3);return()=>s(i.WEt()-e.WEt())+n.WEt()/2},t=>{const s=t.mPt(0).DEt();return()=>s(180)},()=>"Liquids Mechanics",t=>{const s=t.mPt(0).DEt();return()=>45+s(90)},()=>"Buttons",t=>{const s=t.mPt(0).DEt(),i=t.mPt(1);return()=>s(i.WEt(),"/p/")},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1);return()=>s(i.WEt(),"/p/")-1},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1);return()=>s(i.WEt(),"/p/","\n")},()=>"Pause",t=>{const s=t.mPt(0),i=t.mPt(1).DEt(),e=t.mPt(2);return()=>s.jEt()+(i()-e.jEt())},t=>{const s=t.mPt(0);return()=>Math.round(.875*s.HEt())},t=>{const s=t.mPt(0);return()=>s.HEt()},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1);return()=>s(i.HEt(),"|")-1},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1),e=t.mPt(2).DEt();return()=>s(i.HEt(),e(),"|")},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1),e=t.mPt(2).nPt(),n=t.mPt(3).DEt(),r=t.mPt(4);return()=>s(i.HEt(),(e.Lct()+1)%n(r.HEt(),"|"),"|")},()=>.1,t=>{const s=t.mPt(0).DEt(),i=t.mPt(1),e=t.mPt(2).DEt(),n=t.mPt(3);return()=>"[background=#ffffffbb]Time: "+s(Math.floor(i.jEt()/60),2)+":"+e(Math.floor(n.jEt()%60),2)+"[/background]"},t=>{const s=t.mPt(0);return()=>cP("Iron: ",s.WEt())},t=>{const s=t.mPt(0);return()=>s.jEt()},()=>180,t=>{const s=t.mPt(0);return()=>Math.round(10*s.jEt())/10},()=>"Grey",()=>"Iron",()=>"Orange",()=>"Rust",t=>{const s=t.mPt(0);return()=>s.jEt()+10},()=>"Energy",t=>{const s=t.mPt(0).DEt();return()=>s("Energy",0)},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt();return()=>s("Energy",i.Lct())},t=>{const s=t.mPt(0).DEt();return()=>s("Energy",4.5)},()=>3,()=>"UI",t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt(),e=t.mPt(2).nPt();return()=>s("Energy",(i.Lct()+e.Lct())/2)},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).DEt();return()=>s("Energy",5)-i("Energy",4)},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt(),e=t.mPt(2).DEt(),n=t.mPt(3).nPt();return()=>(s("Energy",i.Lct())-e("Energy",n.Lct()))/2},()=>15,t=>{const s=t.mPt(0).DEt();return()=>s("Energy",5)},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt(),e=t.mPt(2).DEt(),n=t.mPt(3).nPt();return()=>(s("Energy",i.Lct())-e("Energy",n.Lct()))/-2},t=>{const s=t.mPt(0).DEt();return()=>s("Energy",5.5)},t=>{const s=t.mPt(0).DEt();return()=>s("Energy",10)},t=>{const s=t.mPt(0).DEt();return()=>s("Energy",6)},t=>{const s=t.mPt(0).DEt();return()=>s("Energy",5)+4},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).DEt();return()=>s()+" - "+i()+" - (C) Wild Haired Science Teacher - whscience.org"},t=>{const s=t.mPt(0),i=t.mPt(1);return()=>s.WEt()+i.WEt()/2+2},t=>{const s=t.mPt(0),i=t.mPt(1);return()=>s.WEt()+i.jEt()},t=>{const s=t.mPt(0),i=t.mPt(1),e=t.mPt(2),n=t.mPt(3);return()=>s.WEt()-i.jEt()-(e.WEt()+n.jEt())},t=>{const s=t.mPt(0),i=t.mPt(1),e=t.mPt(2),n=t.mPt(3),r=t.mPt(4),h=t.mPt(5);return()=>dP.Ct(s.WEt()+i.jEt(),e.WEt()-n.jEt(),dP.mr(r.jEt(),h.jEt(),0))},t=>{const s=t.mPt(0),i=t.mPt(1);return()=>s.WEt()-2*i.jEt()},()=>90,()=>270,t=>{const s=t.mPt(0),i=t.mPt(1);return()=>s.WEt()-i.jEt()},t=>{const s=t.mPt(0),i=t.mPt(1).DEt(),e=t.mPt(2).DEt(),n=t.mPt(3).DEt(),r=t.mPt(4).DEt(),h=t.mPt(5).DEt(),o=t.mPt(6).DEt(),a=t.mPt(7).DEt(),l=t.mPt(8);return()=>s.jEt()+"   "+i(e(n(r(h(o(a(l.jEt(),";","\n"),"bluebullet","[color=#0080FF][/color]"),"orangebullet","[color=#FF8000][/color]"),"greybullet","[color=#808090][/color]"),"yellowbullet","[color=#FFE000][/color]"),"pinkbullet","[color=#FF0080][/color]"),"blackbullet","[color=#000000][/color]")},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt(),e=t.mPt(2).nPt();return()=>s(i.Lct(),e.Lct())},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt(),e=t.mPt(2).nPt(),n=t.mPt(3).DEt(),r=t.mPt(4).nPt(),h=t.mPt(5).nPt(),o=t.mPt(6).DEt(),a=t.mPt(7).nPt(),l=t.mPt(8).nPt(),u=t.mPt(9).DEt(),c=t.mPt(10).nPt(),f=t.mPt(11).nPt();return()=>dP.er(s(i.Lct(),e.Lct()),n(r.Lct(),h.Lct()),o(a.Lct(),l.Lct()),u(c.Lct(),f.Lct()))},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt(),e=t.mPt(2).nPt(),n=t.mPt(3).DEt(),r=t.mPt(4).nPt(),h=t.mPt(5).nPt(),o=t.mPt(6).DEt(),a=t.mPt(7).nPt(),l=t.mPt(8).nPt(),u=t.mPt(9).DEt(),c=t.mPt(10).nPt(),f=t.mPt(11).nPt();return()=>dP.tr(dP.rr(s(i.Lct(),e.Lct()),n(r.Lct(),h.Lct()),o(a.Lct(),l.Lct()),u(c.Lct(),f.Lct())))},t=>{const s=t.mPt(0),i=t.mPt(1).DEt();return()=>Math.abs(s.WEt()-i())},t=>{const s=t.mPt(0),i=t.mPt(1);return()=>cP(cP("[background=#ffffff88](",s.jEt())+" , ",i.jEt())+")[/background]"},t=>{const s=t.mPt(0);return()=>2*s.jEt()},t=>{const s=t.mPt(0),i=t.mPt(1);return()=>cP(cP("( ",s.jEt())+" , ",i.jEt())+" )"},t=>{const s=t.mPt(0).DEt();return()=>s(1)},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1).nPt(),e=t.mPt(2).nPt(),n=t.mPt(3).nPt();return()=>s.Lct()+i.Lct()*Math.sqrt(-2*Math.log(e.Lct()))*Math.cos(dP.Qn(360*n.Lct()))},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).DEt(),e=t.mPt(2).DEt(),n=t.mPt(3).DEt(),r=t.mPt(4).DEt(),h=t.mPt(5).DEt(),o=t.mPt(6).DEt(),a=t.mPt(7);return()=>s(i(e(n(r(h(o(a.jEt(),";","\n"),"bluebullet","[color=#0080FF][/color]"),"orangebullet","[color=#FF8000][/color]"),"greybullet","[color=#808090][/color]"),"yellowbullet","[color=#FFE000][/color]"),"pinkbullet","[color=#FF0080][/color]"),"blackbullet","[color=#000000][/color]")},t=>{const s=t.mPt(0),i=t.mPt(1),e=t.mPt(2),n=t.mPt(3),r=t.mPt(4).DEt();return()=>dP.Zn(dP.mr(s.WEt()+i.jEt(),e.WEt()-n.jEt(),r()),0,1)},t=>{const s=t.mPt(0),i=t.mPt(1),e=t.mPt(2),n=t.mPt(3),r=t.mPt(4).nPt();return()=>dP.Ct(s.WEt()+i.jEt(),e.WEt()-n.jEt(),r.Lct())},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1),e=t.mPt(2),n=t.mPt(3),r=t.mPt(4),h=t.mPt(5);return()=>dP.Zn(s(),i.WEt()+e.jEt(),n.WEt()-r.jEt())-h.WEt()},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt();return()=>s(i.Lct())},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt();return()=>s(i.Lct(),0,":")},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt();return()=>s(i.Lct(),1,":")},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt();return()=>s(i.Lct(),2,":")},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt();return()=>s(i.Lct(),4,":")},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1),e=t.mPt(2).nPt();return()=>0===s.Lct()?i.jEt():e.Lct()},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt(),e=t.mPt(2);return()=>s(i.Lct(),e.jEt())},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1),e=t.mPt(2).nPt();return()=>s(i.jEt().toString(),e.Lct(),";")},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1),e=t.mPt(2).nPt();return()=>s(i.WEt().toString(),e.Lct(),";")},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1).nPt(),e=t.mPt(2).nPt(),n=t.mPt(3).nPt();return()=>s.Lct()+":"+i.Lct()+":"+e.Lct()+":"+n.Lct()},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1).nPt();return()=>s.Lct()+" - "+i.Lct()},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt();return()=>s(i.Lct(),";")-1},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).DEt(),e=t.mPt(2).nPt(),n=t.mPt(3).DEt();return()=>s(i(e.Lct(),n(),";"))},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt(),e=t.mPt(2).DEt();return()=>s(i.Lct(),e(),";")},t=>{const s=t.mPt(0),i=t.mPt(1),e=t.mPt(2),n=t.mPt(3),r=t.mPt(4),h=t.mPt(5),o=t.mPt(6).nPt();return()=>dP.Ct(s.WEt()+i.jEt(),e.WEt()-n.jEt(),dP.mr(r.jEt(),h.jEt(),o.Lct()))},t=>{const s=t.mPt(0),i=t.mPt(1),e=t.mPt(2),n=t.mPt(3),r=t.mPt(4),h=t.mPt(5),o=t.mPt(6).nPt(),a=t.mPt(7),l=t.mPt(8),u=t.mPt(9),c=t.mPt(10);return()=>dP.Zn(dP.Ct(s.WEt()-i.jEt(),e.WEt()+n.jEt(),dP.mr(r.jEt(),h.jEt(),o.Lct())),a.WEt()+l.jEt(),u.WEt()-c.jEt())},()=>"text/csv",t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).DEt(),e=t.mPt(2).nPt();return()=>s(i(e.Lct(),0,":"),";")},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt();return()=>s(i.Lct(),":")},t=>{const s=t.mPt(0).nPt();return()=>s.Lct()+"\n"},()=>"perrow",t=>{const s=t.mPt(0).nPt();return()=>s.Lct()-1},()=>"percol",t=>{const s=t.mPt(0).nPt(),i=t.mPt(1).DEt(),e=t.mPt(2).nPt(),n=t.mPt(3).DEt(),r=t.mPt(4).DEt();return()=>s.Lct()+","+i(e.Lct(),n("percol"),r("perrow"))},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1).DEt(),e=t.mPt(2).nPt(),n=t.mPt(3).DEt(),r=t.mPt(4).nPt();return()=>s.Lct()+i(e.Lct(),n(r.Lct())-1)+"\n"},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).DEt(),e=t.mPt(2).nPt(),n=t.mPt(3).nPt(),r=t.mPt(4).nPt();return()=>s(i(e.Lct(),n.Lct(),":"),r.Lct(),";")},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1).nPt(),e=t.mPt(2).nPt();return()=>s.Lct()+i.Lct()+e.Lct()},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt(),e=t.mPt(2).nPt(),n=t.mPt(3).DEt(),r=t.mPt(4).nPt();return()=>s(i.Lct())>1?e.Lct():n(r.Lct())},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1).nPt(),e=t.mPt(2).nPt(),n=t.mPt(3).nPt();return()=>dP.er(s.Lct(),i.Lct(),e.Lct(),n.Lct())},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1).nPt(),e=t.mPt(2).nPt(),n=t.mPt(3).nPt();return()=>dP.tr(dP.rr(s.Lct(),i.Lct(),e.Lct(),n.Lct()))},()=>"Testing",t=>{const s=t.mPt(0).nPt();return()=>Math.ceil(s.Lct()/36*6)+6},t=>{const s=t.mPt(0).nPt();return()=>Math.ceil(s.Lct()/36*10)+10},t=>{const s=t.mPt(0).nPt();return()=>Math.ceil(s.Lct()/36*16)+16},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1).nPt(),e=t.mPt(2).DEt(),n=t.mPt(3).nPt(),r=t.mPt(4).nPt(),h=t.mPt(5).nPt();return()=>s.Lct()+Math.cos(dP.Qn(360/i.Lct()*e()-dP.Zn(n.Lct()/16,0,360/r.Lct()/8)))*h.Lct()},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1).nPt(),e=t.mPt(2).DEt(),n=t.mPt(3).nPt(),r=t.mPt(4).nPt(),h=t.mPt(5).nPt();return()=>s.Lct()+Math.sin(dP.Qn(360/i.Lct()*e()-dP.Zn(n.Lct()/16,0,360/r.Lct()/8)))*h.Lct()},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1).nPt(),e=t.mPt(2).DEt(),n=t.mPt(3).nPt(),r=t.mPt(4).nPt(),h=t.mPt(5).nPt();return()=>s.Lct()+Math.cos(dP.Qn(360/i.Lct()*(e()+1)+dP.Zn(n.Lct()/16,0,360/r.Lct()/8)))*h.Lct()},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1).nPt(),e=t.mPt(2).DEt(),n=t.mPt(3).nPt(),r=t.mPt(4).nPt(),h=t.mPt(5).nPt();return()=>s.Lct()+Math.sin(dP.Qn(360/i.Lct()*(e()+1)+dP.Zn(n.Lct()/16,0,360/r.Lct()/8)))*h.Lct()},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1).nPt();return()=>s.Lct()*(i.Lct()/24)},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1).nPt();return()=>s.Lct()*(i.Lct()/12)},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1).nPt();return()=>s.Lct()*(i.Lct()/6)},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1).nPt(),e=t.mPt(2).nPt(),n=t.mPt(3).nPt(),r=t.mPt(4).DEt();return()=>s.Lct()+i.Lct()*(e.Lct()/n.Lct())*r()},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1).nPt(),e=t.mPt(2).DEt(),n=t.mPt(3).nPt(),r=t.mPt(4).nPt();return()=>s.Lct()-i.Lct()*Math.cos(dP.Qn(e()/n.Lct()*360*r.Lct()))},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1).nPt(),e=t.mPt(2).nPt(),n=t.mPt(3).nPt(),r=t.mPt(4).DEt();return()=>s.Lct()+i.Lct()*(e.Lct()/n.Lct())*(r()+1)},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1).nPt(),e=t.mPt(2).DEt(),n=t.mPt(3).nPt(),r=t.mPt(4).nPt();return()=>s.Lct()-i.Lct()*Math.cos(dP.Qn((e()+1)/n.Lct()*360*r.Lct()))},t=>{const s=t.mPt(0),i=t.mPt(1);return()=>1e-4*s.WEt()+i.jEt()},t=>{const s=t.mPt(0).nPt(),i=t.mPt(1);return()=>cP(s.Lct()+" ",i.WEt())},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).nPt();return()=>s(i.Lct()," ")},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).DEt(),e=t.mPt(2).nPt(),n=t.mPt(3).DEt(),r=t.mPt(4).nPt();return()=>s(i(e.Lct(),n()%r.Lct()," "))},t=>{const s=t.mPt(0).DEt(),i=t.mPt(1).DEt(),e=t.mPt(2).nPt(),n=t.mPt(3).DEt(),r=t.mPt(4).nPt();return()=>s(i(e.Lct(),(n()+1)%r.Lct()," "))},t=>{const s=t.mPt(0).nPt();return()=>s.Lct()-2},t=>{const s=t.mPt(0),i=t.mPt(1),e=t.mPt(2),n=t.mPt(3);return()=>dP.mr(s.jEt(),i.jEt(),e.jEt())*n.WEt()},t=>{const s=t.mPt(0),i=t.mPt(1),e=t.mPt(2);return()=>cP(s.jEt(),i.jEt())+e.jEt()},t=>{const s=t.mPt(0),i=t.mPt(1),e=t.mPt(2);return()=>cP(s.jEt(),Math.round(i.jEt()))+e.jEt()},t=>{const s=t.mPt(0),i=t.mPt(1),e=t.mPt(2).DEt(),n=t.mPt(3),r=t.mPt(4),h=t.mPt(5),o=t.mPt(6),a=t.mPt(7);return()=>cP(s.jEt(),Math.floor(i.jEt()))+"."+e(Math.floor((n.jEt()-Math.floor(r.jEt()))*Math.pow(10,h.jEt())),o.jEt())+a.jEt()},t=>{const s=t.mPt(0),i=t.mPt(1),e=t.mPt(2),n=t.mPt(3),r=t.mPt(4).DEt(),h=t.mPt(5),o=t.mPt(6),a=t.mPt(7),l=t.mPt(8),u=t.mPt(9);return()=>Math.round(dP.Ct(s.jEt(),i.jEt(),dP.mr(e.WEt(),n.WEt(),dP.Zn(r(h.WEt()),o.WEt(),a.WEt())))/l.jEt())*u.jEt()}]}}}),import_c3runtime=__toESM(require_c3runtime()),C32=self.Cs;self.sKt=function(){return[C32.uH.Touch,C32.uH.Hft,C32.ayt.INt,C32.ayt.Vis,C32.uH.Text,C32.uH.si,C32.ayt.Fes,C32.ayt.rns,C32.uH.lH.aH.RGt,C32.uH.lH.aH.Zit,C32.ayt.Fes._dt.Qes,C32.uH.Hft.aH.VFt,C32.uH.lH._dt.D1t,C32.uH.Hft._dt.wM,C32.uH.Hft._dt.KFt,C32.uH.Text._dt.Vc,C32.uH.Text._dt.sOt,C32.uH.lH.Cdt.time,C32.uH.Hft._dt.GX,C32.uH.Text._dt.GX,C32.uH.Hft._dt.sOt,C32.uH.Text.aH.sts,C32.uH.lH.aH.mCt,C32.uH.lH._dt.ph,C32.uH.Hft._dt.nOt,C32.ayt.rns._dt.NOt,C32.ayt.Vis._dt.NOt,C32.uH.Text._dt.nOt,C32.uH.Hft.aH.vAt,C32.uH.lH.aH.G1t,C32.uH.lH._dt.U1t,C32.uH.lH.Cdt.random,C32.uH.Hft.Cdt.xOt,C32.uH.Hft.Cdt.bOt,C32.uH.Hft.Cdt.MOt,C32.ayt.Vis._dt.Tes,C32.ayt.Vis._dt.bes,C32.uH.lH.Cdt.FEt,C32.uH.Hft._dt.$Y,C32.uH.Hft.Cdt.TOt,C32.uH.Hft.Cdt.wOt,C32.uH.Text.Cdt.Text,C32.uH.Hft.Cdt.GOt,C32.uH.Hft.Cdt.SOt,C32.uH.lH.Cdt.$3t,C32.uH.lH.Cdt.p4t,C32.uH.lH.aH.o1t,C32.uH.Hft.aH.fFt,C32.uH.lH._dt.L1t,C32.uH.Hft.Cdt.vOt,C32.uH.Hft.aH.SAt,C32.uH.Hft.aH.zFt,C32.ayt.Vis._dt.TV,C32.uH.Hft.aH.pFt,C32.uH.lH.aH.zd,C32.uH.lH.Cdt.find,C32.uH.lH.Cdt.u3t,C32.uH.lH.Cdt.replace,C32.uH.Text.Cdt.Sts,C32.uH.Touch.aH.S5t,C32.uH.Touch.aH.b5t,C32.uH.Text.aH.zFt,C32.uH.Touch.aH.R5t,C32.uH.lH.aH.s1t,C32.uH.Text._dt.OP,C32.uH.Text._dt.WF,C32.uH.lH.Cdt.l3t,C32.uH.lH.aH.i1t,C32.uH.lH.Cdt.y3t,C32.uH.Hft.Cdt.fOt,C32.uH.Touch.aH.P5t,C32.uH.Touch.Cdt.f6t,C32.uH.Touch.aH.g5t,C32.uH.Text._dt.bAt,C32.uH.lH.Cdt._4t,C32.uH.lH.Cdt.C4t,C32.uH.Hft._dt.mM,C32.uH.Text.Cdt.wOt,C32.uH.Text.Cdt.vts,C32.uH.lH._dt.o2t,C32.uH.Hft.Cdt.eFt,C32.uH.Hft._dt.hy,C32.uH.Hft._dt.oy,C32.uH.Hft._dt.WF,C32.uH.Text._dt.$Y,C32.uH.Text._dt.hy,C32.uH.Hft.aH.YAt,C32.uH.Hft._dt.rR,C32.uH.Hft._dt.D8t,C32.uH.Hft._dt.KAt,C32.uH.Hft._dt.tFt,C32.uH.Touch.Cdt.wOt,C32.uH.Touch.Cdt.SOt,C32.uH.Hft.Cdt.y7t,C32.uH.lH.aH.l1t,C32.uH.Hft.Cdt.$Ot,C32.uH.Text.aH.VFt,C32.uH.Hft.aH.Z8t,C32.uH.Hft.aH.qFt,C32.uH.lH._dt.Ij,C32.uH.Touch.aH.f5t,C32.uH.lH.aH.v1t,C32.uH.Hft._dt.bAt,C32.uH.lH.Cdt.float,C32.uH.si._dt.Kss,C32.uH.lH.Cdt.right,C32.uH.lH.Cdt.Nt,C32.uH.lH.Cdt.trim,C32.uH.lH.Cdt.Y2t,C32.uH.lH.aH._1t,C32.uH.lH.aH.u1t,C32.uH.Text._dt.KFt,C32.uH.Hft._dt.r7t,C32.uH.Text._dt.rR]},self.MKt=[{Touch:0},{nrs:0},{rrs:0},{hrs:0},{Vis:0},{ors:0},{ars:0},{lrs:0},{urs:0},{crs:0},{frs:0},{drs:0},{prs:0},{mrs:0},{grs:0},{yrs:0},{wrs:0},{Srs:0},{vrs:0},{brs:0},{xrs:0},{Mrs:0},{Trs:0},{Grs:0},{_rs:0},{Crs:0},{Irs:0},{Ers:0},{Prs:0},{Rrs:0},{Ars:0},{Frs:0},{Ors:0},{Drs:0},{Lrs:0},{Nrs:0},{krs:0},{Brs:0},{$rs:0},{Wrs:0},{Gis:0},{Urs:0},{Vrs:0},{zrs:0},{jrs:0},{qrs:0},{Hrs:0},{Jrs:0},{Yrs:0},{Xrs:0},{Zrs:0},{Krs:0},{Qrs:0},{ths:0},{shs:0},{ihs:0},{bis:0},{ehs:0},{nhs:0},{rhs:0},{hhs:0},{ohs:0},{ahs:0},{lhs:0},{uhs:0},{si:0},{chs:0},{fhs:0},{dhs:0},{phs:0},{mhs:0},{ghs:0},{yhs:0},{Fes:0},{whs:0},{Shs:0},{vhs:0},{bhs:0},{index:0},{xhs:0},{Mhs:0},{Ths:0},{Ghs:0},{_hs:0},{MV:0},{Chs:0},{Ihs:0},{ers:0},{Ehs:0},{f6t:0},{Phs:0},{Rhs:0},{Ahs:0},{Fhs:0},{Ohs:0},{Dhs:0},{Lhs:0},{Nhs:0},{khs:0},{Bhs:0},{$hs:0},{Whs:0},{Ink:0},{Uhs:0},{Vhs:0},{zhs:0},{jhs:0},{qhs:0},{Hhs:0},{Jhs:0},{Yhs:0},{Xhs:0},{Zhs:0},{Khs:0},{Qhs:0},{tos:0},{sos:0},{ios:0},{eos:0},{Cis:0},{nos:0},{ros:0},{hos:0},{oos:0},{wOt:0},{SOt:0},{To:0},{aos:0},{los:0},{uos:0},{Dt:0},{t:0},{$Ot:0},{fos:0},{dos:0},{pos:0},{mos:0},{x:0},{width:0},{gos:0},{yos:0},{wos:0},{Sos:0},{vos:0},{bos:0},{xos:0},{Mos:0},{Tos:0},{Gos:0},{_os:0},{Cos:0},{Ios:0},{Eos:0},{Pos:0},{Ros:0},{Aos:0},{Fos:0},{Oos:0},{Dos:0},{Los:0},{Nos:0},{kos:0},{Bos:0},{a8:0},{$os:0},{Wos:0},{Uos:0},{Vos:0},{zos:0},{jos:0},{qos:0},{Hos:0},{Jos:0}],self.Yos={Touch:class extends self.yZ{},rrs:class extends self.$8t{},hrs:class extends self.$8t{},ors:class extends self.$8t{},lrs:class extends self.$8t{},urs:class extends self.$8t{},frs:class extends self.W9t{},drs:class extends self.$8t{},prs:class extends self.$8t{},mrs:class extends self.W9t{},grs:class extends self.W9t{},yrs:class extends self.$8t{},wrs:class extends self.$8t{},Srs:class extends self.W9t{},vrs:class extends self.W9t{},brs:class extends self.W9t{},xrs:class extends self.$8t{},Grs:class extends self.W9t{},_rs:class extends self.W9t{},Crs:class extends self.W9t{},Irs:class extends self.$8t{},Ers:class extends self.$8t{},Prs:class extends self.W9t{},Rrs:class extends self.W9t{},Ars:class extends self.W9t{},Nrs:class extends self.W9t{},krs:class extends self.$8t{},Brs:class extends self.W9t{},$rs:class extends self.W9t{},Wrs:class extends self.$8t{},Urs:class extends self.W9t{},Vrs:class extends self.W9t{},zrs:class extends self.W9t{},jrs:class extends self.W9t{},rhs:class extends self.$8t{},ahs:class extends self.$8t{},lhs:class extends self.$8t{},uhs:class extends self.$8t{},si:class extends self.yZ{},mhs:class extends self.$8t{},ghs:class extends self.W9t{},yhs:class extends self.$8t{},whs:class extends self.W9t{},Shs:class extends self.W9t{},bhs:class extends self.$8t{},xhs:class extends self.$8t{},Mhs:class extends self.$8t{},Ths:class extends self.W9t{},Rhs:class extends self.$8t{},Ahs:class extends self.$8t{},Fhs:class extends self.$8t{},Ohs:class extends self.W9t{},Nhs:class extends self.$8t{},khs:class extends self.W9t{},Bhs:class extends self.W9t{},$hs:class extends self.$8t{},Whs:class extends self.W9t{},Ink:class extends self.$8t{}};
/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.4.1

Copyright (c) 2015-2021, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/