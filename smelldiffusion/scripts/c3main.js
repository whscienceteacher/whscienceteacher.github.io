import "./../box2d.wasm.js";
// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__require=(t=>"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(t,{get:(t,s)=>("undefined"!=typeof require?require:t)[s]}):t)(function(t){if("undefined"!=typeof require)return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),__commonJS=(t,s)=>function(){return s||(0,t[__getOwnPropNames(t)[0]])((s={exports:{}}).exports,s),s.exports},__copyProps=(t,s,i,e)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let n of __getOwnPropNames(s))__hasOwnProp.call(t,n)||n===i||__defProp(t,n,{get:()=>s[n],enumerable:!(e=__getOwnPropDesc(s,n))||e.enumerable});return t},__toESM=(t,s,i)=>(i=null!=t?__create(__getProtoOf(t)):{},__copyProps(!s&&t&&t.i?i:__defProp(i,"default",{value:t,enumerable:!0}),t)),require_c3runtime=__commonJS({"file-map:scripts/c3runtime.js"(exports,module){{let e=function(t){ARRAY_TYPE=t},n=function(t){return t*degree},h=function(t,s){return Math.abs(t-s)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(s))},u=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},p=function(t){var s=new ARRAY_TYPE(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},m=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},g=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},y=function(t,s,i,e){var n=new ARRAY_TYPE(4);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n},w=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},S=function(t,s){if(t===s){var i=s[1];t[1]=s[2],t[2]=i}else t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3];return t},v=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*r-n*e;return h?(h=1/h,t[0]=r*h,t[1]=-e*h,t[2]=-n*h,t[3]=i*h,t):null},b=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},M=function(t){return t[0]*t[3]-t[2]*t[1]},x=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*o+r*a,t[1]=n*o+h*a,t[2]=e*l+r*u,t[3]=n*l+h*u,t},G=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+r*o,t[1]=n*a+h*o,t[2]=e*-o+r*a,t[3]=n*-o+h*a,t},T=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1];return t[0]=e*o,t[1]=n*o,t[2]=r*a,t[3]=h*a,t},I=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t},C=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},_=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},E=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},P=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},A=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},R=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},O=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},F=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=s[0],o=s[1],a=s[2],l=s[3];return Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-o)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(l))},D=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},L=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},k=function(){var t=new ARRAY_TYPE(6);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},N=function(t){var s=new ARRAY_TYPE(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},$=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},B=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},W=function(t,s,i,e,n,r){var h=new ARRAY_TYPE(6);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h[4]=n,h[5]=r,h},j=function(t,s,i,e,n,r,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t},V=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=i*r-e*n;return a?(a=1/a,t[0]=r*a,t[1]=-e*a,t[2]=-n*a,t[3]=i*a,t[4]=(n*o-r*h)*a,t[5]=(e*h-i*o)*a,t):null},H=function(t){return t[0]*t[3]-t[1]*t[2]},U=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1],c=i[2],f=i[3],d=i[4],p=i[5];return t[0]=e*l+r*u,t[1]=n*l+h*u,t[2]=e*c+r*f,t[3]=n*c+h*f,t[4]=e*d+r*p+o,t[5]=n*d+h*p+a,t},q=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=Math.sin(i),u=Math.cos(i);return t[0]=e*u+r*l,t[1]=n*u+h*l,t[2]=e*-l+r*u,t[3]=n*-l+h*u,t[4]=o,t[5]=a,t},z=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e*l,t[1]=n*l,t[2]=r*u,t[3]=h*u,t[4]=o,t[5]=a,t},J=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=e*l+r*u+o,t[5]=n*l+h*u+a,t},Y=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t[4]=0,t[5]=0,t},X=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},K=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},Z=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},Q=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},tt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},st=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},it=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},et=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},nt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},rt=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=s[0],l=s[1],u=s[2],c=s[3],f=s[4],d=s[5];return Math.abs(i-a)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(e-l)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(n-u)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(h-f)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(o-d)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(d))},ht=function(){var t=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},ot=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},at=function(t){var s=new ARRAY_TYPE(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},ut=function(t,s,i,e,n,r,h,o,a){var l=new ARRAY_TYPE(9);return l[0]=t,l[1]=s,l[2]=i,l[3]=e,l[4]=n,l[5]=r,l[6]=h,l[7]=o,l[8]=a,l},ct=function(t,s,i,e,n,r,h,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t},ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},dt=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[5];t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=n}else t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8];return t},pt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=u*h-o*l,f=-u*r+o*a,d=l*r-h*a,p=i*c+e*f+n*d;return p?(p=1/p,t[0]=c*p,t[1]=(-u*e+n*l)*p,t[2]=(o*e-n*h)*p,t[3]=f*p,t[4]=(u*i-n*a)*p,t[5]=(-o*i+n*r)*p,t[6]=d*p,t[7]=(-l*i+e*a)*p,t[8]=(h*i-e*r)*p,t):null},mt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8];return t[0]=h*u-o*l,t[1]=n*l-e*u,t[2]=e*o-n*h,t[3]=o*a-r*u,t[4]=i*u-n*a,t[5]=n*r-i*o,t[6]=r*l-h*a,t[7]=e*a-i*l,t[8]=i*h-e*r,t},gt=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8];return s*(l*r-h*a)+i*(-l*n+h*o)+e*(a*n-r*o)},yt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1],p=i[2],m=i[3],g=i[4],y=i[5],w=i[6],S=i[7],v=i[8];return t[0]=f*e+d*h+p*l,t[1]=f*n+d*o+p*u,t[2]=f*r+d*a+p*c,t[3]=m*e+g*h+y*l,t[4]=m*n+g*o+y*u,t[5]=m*r+g*a+y*c,t[6]=w*e+S*h+v*l,t[7]=w*n+S*o+v*u,t[8]=w*r+S*a+v*c,t},wt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=f*e+d*h+l,t[7]=f*n+d*o+u,t[8]=f*r+d*a+c,t},St=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=Math.sin(i),d=Math.cos(i);return t[0]=d*e+f*h,t[1]=d*n+f*o,t[2]=d*r+f*a,t[3]=d*h-f*e,t[4]=d*o-f*n,t[5]=d*a-f*r,t[6]=l,t[7]=u,t[8]=c,t},vt=function(t,s,i){var e=i[0],n=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=n*s[3],t[4]=n*s[4],t[5]=n*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Mt=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=-i,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},xt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Gt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Tt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,l=i*h,u=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[3]=u-y,t[6]=f+g,t[1]=u+y,t[4]=1-l-p,t[7]=d-m,t[2]=f-g,t[5]=d+m,t[8]=1-l-c,t},It=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,S=i*a-n*h,v=i*l-r*h,b=e*a-n*o,M=e*l-r*o,x=n*l-r*a,G=u*m-c*p,T=u*g-f*p,I=u*y-d*p,C=c*g-f*m,_=c*y-d*m,E=f*y-d*g,P=w*E-S*_+v*C+b*I-M*T+x*G;return P?(P=1/P,t[0]=(o*E-a*_+l*C)*P,t[1]=(a*I-h*E-l*T)*P,t[2]=(h*_-o*I+l*G)*P,t[3]=(n*_-e*E-r*C)*P,t[4]=(i*E-n*I+r*T)*P,t[5]=(e*I-i*_-r*G)*P,t[6]=(m*x-g*M+y*b)*P,t[7]=(g*v-p*x-y*S)*P,t[8]=(p*M-m*v+y*w)*P,t):null},Ct=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},_t=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Et=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Pt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},At=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Rt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Ot=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Ft=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},Dt=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=s[0],f=s[1],d=s[2],p=s[3],m=s[4],g=s[5],y=s[6],w=s[7],S=s[8];return Math.abs(i-c)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(e-f)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(n-d)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-p)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(h-m)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(o-g)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-y)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(l-w)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(u-S)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(S))},Lt=function(){var t=new ARRAY_TYPE(16);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},kt=function(t){var s=new ARRAY_TYPE(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},Nt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},$t=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m){var g=new ARRAY_TYPE(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=n,g[5]=r,g[6]=h,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},Bt=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},Wt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},jt=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[3],r=s[6],h=s[7],o=s[11];t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=n,t[13]=h,t[14]=o}else t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15];return t},Vt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,S=i*a-n*h,v=i*l-r*h,b=e*a-n*o,M=e*l-r*o,x=n*l-r*a,G=u*m-c*p,T=u*g-f*p,I=u*y-d*p,C=c*g-f*m,_=c*y-d*m,E=f*y-d*g,P=w*E-S*_+v*C+b*I-M*T+x*G;return P?(P=1/P,t[0]=(o*E-a*_+l*C)*P,t[1]=(n*_-e*E-r*C)*P,t[2]=(m*x-g*M+y*b)*P,t[3]=(f*M-c*x-d*b)*P,t[4]=(a*I-h*E-l*T)*P,t[5]=(i*E-n*I+r*T)*P,t[6]=(g*v-p*x-y*S)*P,t[7]=(u*x-f*v+d*S)*P,t[8]=(h*_-o*I+l*G)*P,t[9]=(e*I-i*_-r*G)*P,t[10]=(p*M-m*v+y*w)*P,t[11]=(c*v-u*M-d*w)*P,t[12]=(o*T-h*C-a*G)*P,t[13]=(i*C-e*T+n*G)*P,t[14]=(m*S-p*b-g*w)*P,t[15]=(u*b-c*S+f*w)*P,t):null},Ht=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,S=i*a-n*h,v=i*l-r*h,b=e*a-n*o,M=e*l-r*o,x=n*l-r*a,G=u*m-c*p,T=u*g-f*p,I=u*y-d*p,C=c*g-f*m,_=c*y-d*m,E=f*y-d*g;return t[0]=o*E-a*_+l*C,t[1]=n*_-e*E-r*C,t[2]=m*x-g*M+y*b,t[3]=f*M-c*x-d*b,t[4]=a*I-h*E-l*T,t[5]=i*E-n*I+r*T,t[6]=g*v-p*x-y*S,t[7]=u*x-f*v+d*S,t[8]=h*_-o*I+l*G,t[9]=e*I-i*_-r*G,t[10]=p*M-m*v+y*w,t[11]=c*v-u*M-d*w,t[12]=o*T-h*C-a*G,t[13]=i*C-e*T+n*G,t[14]=m*S-p*b-g*w,t[15]=u*b-c*S+f*w,t},Ut=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[9],c=t[10],f=t[11],d=t[12],p=t[13],m=t[14],g=s*h-i*r,y=s*o-e*r,w=i*o-e*h,S=l*p-u*d,v=l*m-c*d,b=u*m-c*p;return a*(s*b-i*v+e*S)-n*(r*b-h*v+o*S)+t[15]*(l*w-u*y+c*g)-f*(d*w-p*y+m*g)},qt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],w=s[15],S=i[0],v=i[1],b=i[2],M=i[3];return t[0]=S*e+v*o+b*c+M*m,t[1]=S*n+v*a+b*f+M*g,t[2]=S*r+v*l+b*d+M*y,t[3]=S*h+v*u+b*p+M*w,S=i[4],v=i[5],b=i[6],M=i[7],t[4]=S*e+v*o+b*c+M*m,t[5]=S*n+v*a+b*f+M*g,t[6]=S*r+v*l+b*d+M*y,t[7]=S*h+v*u+b*p+M*w,S=i[8],v=i[9],b=i[10],M=i[11],t[8]=S*e+v*o+b*c+M*m,t[9]=S*n+v*a+b*f+M*g,t[10]=S*r+v*l+b*d+M*y,t[11]=S*h+v*u+b*p+M*w,S=i[12],v=i[13],b=i[14],M=i[15],t[12]=S*e+v*o+b*c+M*m,t[13]=S*n+v*a+b*f+M*g,t[14]=S*r+v*l+b*d+M*y,t[15]=S*h+v*u+b*p+M*w,t},zt=function(t,s,i){var e,n,r,h,o,a,l,u,c,f,d,p,m=i[0],g=i[1],y=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*y+s[12],t[13]=s[1]*m+s[5]*g+s[9]*y+s[13],t[14]=s[2]*m+s[6]*g+s[10]*y+s[14],t[15]=s[3]*m+s[7]*g+s[11]*y+s[15]):(e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*y+s[12],t[13]=n*m+a*g+f*y+s[13],t[14]=r*m+l*g+d*y+s[14],t[15]=h*m+u*g+p*y+s[15]),t},Jt=function(t,s,i){var e=i[0],n=i[1],r=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*n,t[5]=s[5]*n,t[6]=s[6]*n,t[7]=s[7]*n,t[8]=s[8]*r,t[9]=s[9]*r,t[10]=s[10]*r,t[11]=s[11]*r,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},Yt=function(t,s,i,e){var n,r,h,o,a,l,u,c,f,d,p,m,g,y,w,S,v,b,M,x,G,T,I,C,_=e[0],E=e[1],P=e[2],A=Math.hypot(_,E,P);return A<EPSILON?null:(_*=A=1/A,E*=A,P*=A,n=Math.sin(i),h=1-(r=Math.cos(i)),o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],f=s[5],d=s[6],p=s[7],m=s[8],g=s[9],y=s[10],w=s[11],S=_*_*h+r,v=E*_*h+P*n,b=P*_*h-E*n,M=_*E*h-P*n,x=E*E*h+r,G=P*E*h+_*n,T=_*P*h+E*n,I=E*P*h-_*n,C=P*P*h+r,t[0]=o*S+c*v+m*b,t[1]=a*S+f*v+g*b,t[2]=l*S+d*v+y*b,t[3]=u*S+p*v+w*b,t[4]=o*M+c*x+m*G,t[5]=a*M+f*x+g*G,t[6]=l*M+d*x+y*G,t[7]=u*M+p*x+w*G,t[8]=o*T+c*I+m*C,t[9]=a*T+f*I+g*C,t[10]=l*T+d*I+y*C,t[11]=u*T+p*I+w*C,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},Xt=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[4],h=s[5],o=s[6],a=s[7],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=r*n+l*e,t[5]=h*n+u*e,t[6]=o*n+c*e,t[7]=a*n+f*e,t[8]=l*n-r*e,t[9]=u*n-h*e,t[10]=c*n-o*e,t[11]=f*n-a*e,t},Kt=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n-l*e,t[1]=h*n-u*e,t[2]=o*n-c*e,t[3]=a*n-f*e,t[8]=r*e+l*n,t[9]=h*e+u*n,t[10]=o*e+c*n,t[11]=a*e+f*n,t},Zt=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],l=s[4],u=s[5],c=s[6],f=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n+l*e,t[1]=h*n+u*e,t[2]=o*n+c*e,t[3]=a*n+f*e,t[4]=l*n-r*e,t[5]=u*n-h*e,t[6]=c*n-o*e,t[7]=f*n-a*e,t},Qt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ts=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ss=function(t,s,i){var e,n,r,h=i[0],o=i[1],a=i[2],l=Math.hypot(h,o,a);return l<EPSILON?null:(h*=l=1/l,o*=l,a*=l,e=Math.sin(s),r=1-(n=Math.cos(s)),t[0]=h*h*r+n,t[1]=o*h*r+a*e,t[2]=a*h*r-o*e,t[3]=0,t[4]=h*o*r-a*e,t[5]=o*o*r+n,t[6]=a*o*r+h*e,t[7]=0,t[8]=h*a*r+o*e,t[9]=o*a*r-h*e,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},is=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},es=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ns=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rs=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=e+e,a=n+n,l=r+r,u=e*o,c=e*a,f=e*l,d=n*a,p=n*l,m=r*l,g=h*o,y=h*a,w=h*l;return t[0]=1-(d+m),t[1]=c+w,t[2]=f-y,t[3]=0,t[4]=c-w,t[5]=1-(u+m),t[6]=p+g,t[7]=0,t[8]=f+y,t[9]=p-g,t[10]=1-(u+d),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},hs=function(t,s){var i=new ARRAY_TYPE(3),e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=e*e+n*n+r*r+h*h;return c>0?(i[0]=2*(o*h+u*e+a*r-l*n)/c,i[1]=2*(a*h+u*n+l*e-o*r)/c,i[2]=2*(l*h+u*r+o*n-a*e)/c):(i[0]=2*(o*h+u*e+a*r-l*n),i[1]=2*(a*h+u*n+l*e-o*r),i[2]=2*(l*h+u*r+o*n-a*e)),rs(t,s,i),t},os=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},as=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[4],h=s[5],o=s[6],a=s[8],l=s[9],u=s[10];return t[0]=Math.hypot(i,e,n),t[1]=Math.hypot(r,h,o),t[2]=Math.hypot(a,l,u),t},ls=function(t,s){var i=new ARRAY_TYPE(3);as(i,s);var e=1/i[0],n=1/i[1],r=1/i[2],h=s[0]*e,o=s[1]*n,a=s[2]*r,l=s[4]*e,u=s[5]*n,c=s[6]*r,f=s[8]*e,d=s[9]*n,p=s[10]*r,m=h+u+p,g=0;return m>0?(g=2*Math.sqrt(m+1),t[3]=.25*g,t[0]=(c-d)/g,t[1]=(f-a)/g,t[2]=(o-l)/g):h>u&&h>p?(g=2*Math.sqrt(1+h-u-p),t[3]=(c-d)/g,t[0]=.25*g,t[1]=(o+l)/g,t[2]=(f+a)/g):u>p?(g=2*Math.sqrt(1+u-h-p),t[3]=(f-a)/g,t[0]=(o+l)/g,t[1]=.25*g,t[2]=(c+d)/g):(g=2*Math.sqrt(1+p-h-u),t[3]=(o-l)/g,t[0]=(f+a)/g,t[1]=(c+d)/g,t[2]=.25*g),t},us=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var n=e[0],r=e[1],h=e[2],o=e[4],a=e[5],l=e[6],u=e[8],c=e[9],f=e[10];i[0]=Math.hypot(n,r,h),i[1]=Math.hypot(o,a,l),i[2]=Math.hypot(u,c,f);var d=1/i[0],p=1/i[1],m=1/i[2],g=n*d,y=r*p,w=h*m,S=o*d,v=a*p,b=l*m,M=u*d,x=c*p,G=f*m,T=g+v+G,I=0;return T>0?(I=2*Math.sqrt(T+1),t[3]=.25*I,t[0]=(b-x)/I,t[1]=(M-w)/I,t[2]=(y-S)/I):g>v&&g>G?(I=2*Math.sqrt(1+g-v-G),t[3]=(b-x)/I,t[0]=.25*I,t[1]=(y+S)/I,t[2]=(M+w)/I):v>G?(I=2*Math.sqrt(1+v-g-G),t[3]=(M-w)/I,t[0]=(y+S)/I,t[1]=.25*I,t[2]=(b+x)/I):(I=2*Math.sqrt(1+G-g-v),t[3]=(y-S)/I,t[0]=(M+w)/I,t[1]=(b+x)/I,t[2]=.25*I),t},cs=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3],a=n+n,l=r+r,u=h+h,c=n*a,f=n*l,d=n*u,p=r*l,m=r*u,g=h*u,y=o*a,w=o*l,S=o*u,v=e[0],b=e[1],M=e[2];return t[0]=(1-(p+g))*v,t[1]=(f+S)*v,t[2]=(d-w)*v,t[3]=0,t[4]=(f-S)*b,t[5]=(1-(c+g))*b,t[6]=(m+y)*b,t[7]=0,t[8]=(d+w)*M,t[9]=(m-y)*M,t[10]=(1-(c+p))*M,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},fs=function(t,s,i,e,n){var r=s[0],h=s[1],o=s[2],a=s[3],l=r+r,u=h+h,c=o+o,f=r*l,d=r*u,p=r*c,m=h*u,g=h*c,y=o*c,w=a*l,S=a*u,v=a*c,b=e[0],M=e[1],x=e[2],G=n[0],T=n[1],I=n[2],C=(1-(m+y))*b,_=(d+v)*b,E=(p-S)*b,P=(d-v)*M,A=(1-(f+y))*M,R=(g+w)*M,O=(p+S)*x,F=(g-w)*x,D=(1-(f+m))*x;return t[0]=C,t[1]=_,t[2]=E,t[3]=0,t[4]=P,t[5]=A,t[6]=R,t[7]=0,t[8]=O,t[9]=F,t[10]=D,t[11]=0,t[12]=i[0]+G-(C*G+P*T+O*I),t[13]=i[1]+T-(_*G+A*T+F*I),t[14]=i[2]+I-(E*G+R*T+D*I),t[15]=1,t},ds=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,l=i*h,u=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[1]=u+y,t[2]=f-g,t[3]=0,t[4]=u-y,t[5]=1-l-p,t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ps=function(t,s,i,e,n,r,h){var o=1/(i-s),a=1/(n-e),l=1/(r-h);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(n+e)*a,t[10]=(h+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*r*2*l,t[15]=0,t},ms=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=(n+e)*h,t[14]=2*n*e*h}else t[10]=-1,t[14]=-2*e;return t},gs=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=n*h,t[14]=n*e*h}else t[10]=-1,t[14]=-e;return t},ys=function(t,s,i,e){var n=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),h=Math.tan(s.leftDegrees*Math.PI/180),o=Math.tan(s.rightDegrees*Math.PI/180),a=2/(h+o),l=2/(n+r);return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(h-o)*a*.5,t[9]=(n-r)*l*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},ws=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=(h+r)*l,t[15]=1,t},Ss=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=r*l,t[15]=1,t},vs=function(t,s,i,e){var n,r,h,o,a,l,u,c,f,d,p=s[0],m=s[1],g=s[2],y=e[0],w=e[1],S=e[2],v=i[0],b=i[1],M=i[2];return Math.abs(p-v)<EPSILON&&Math.abs(m-b)<EPSILON&&Math.abs(g-M)<EPSILON?Wt(t):(u=p-v,c=m-b,f=g-M,n=w*(f*=d=1/Math.hypot(u,c,f))-S*(c*=d),r=S*(u*=d)-y*f,h=y*c-w*u,(d=Math.hypot(n,r,h))?(n*=d=1/d,r*=d,h*=d):(n=0,r=0,h=0),o=c*h-f*r,a=f*n-u*h,l=u*r-c*n,(d=Math.hypot(o,a,l))?(o*=d=1/d,a*=d,l*=d):(o=0,a=0,l=0),t[0]=n,t[1]=o,t[2]=u,t[3]=0,t[4]=r,t[5]=a,t[6]=c,t[7]=0,t[8]=h,t[9]=l,t[10]=f,t[11]=0,t[12]=-(n*p+r*m+h*g),t[13]=-(o*p+a*m+l*g),t[14]=-(u*p+c*m+f*g),t[15]=1,t)},bs=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=e[0],a=e[1],l=e[2],u=n-i[0],c=r-i[1],f=h-i[2],d=u*u+c*c+f*f;d>0&&(u*=d=1/Math.sqrt(d),c*=d,f*=d);var p=a*f-l*c,m=l*u-o*f,g=o*c-a*u;return(d=p*p+m*m+g*g)>0&&(p*=d=1/Math.sqrt(d),m*=d,g*=d),t[0]=p,t[1]=m,t[2]=g,t[3]=0,t[4]=c*g-f*m,t[5]=f*p-u*g,t[6]=u*m-c*p,t[7]=0,t[8]=u,t[9]=c,t[10]=f,t[11]=0,t[12]=n,t[13]=r,t[14]=h,t[15]=1,t},Ms=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},xs=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Gs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Ts=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},Is=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Cs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},_s=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Es=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],y=t[15],w=s[0],S=s[1],v=s[2],b=s[3],M=s[4],x=s[5],G=s[6],T=s[7],I=s[8],C=s[9],_=s[10],E=s[11],P=s[12],A=s[13],R=s[14],O=s[15];return Math.abs(i-w)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(e-S)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(S))&&Math.abs(n-v)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-b)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(h-M)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(o-x)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-G)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(G))&&Math.abs(l-T)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(u-I)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(c-C)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(f-_)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(d-E)<=EPSILON*Math.max(1,Math.abs(d),Math.abs(E))&&Math.abs(p-P)<=EPSILON*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(m-A)<=EPSILON*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(g-R)<=EPSILON*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(y-O)<=EPSILON*Math.max(1,Math.abs(y),Math.abs(O))},Ps=function(){var t=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},As=function(t){var s=new ARRAY_TYPE(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Rs=function(t){var s=t[0],i=t[1],e=t[2];return Math.hypot(s,i,e)},Os=function(t,s,i){var e=new ARRAY_TYPE(3);return e[0]=t,e[1]=s,e[2]=i,e},Fs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Ds=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},Ls=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},ks=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},Ns=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},$s=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},Bs=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Ws=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},js=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Vs=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},Hs=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},Us=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},qs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},zs=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return Math.hypot(i,e,n)},Js=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return i*i+e*e+n*n},Ys=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e},Xs=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},Ks=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},Zs=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*i+e*e+n*n;return r>0&&(r=1/Math.sqrt(r)),t[0]=s[0]*r,t[1]=s[1]*r,t[2]=s[2]*r,t},Qs=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},ti=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2];return t[0]=n*a-r*o,t[1]=r*h-e*a,t[2]=e*o-n*h,t},si=function(t,s,i,e){var n=s[0],r=s[1],h=s[2];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t},ii=function(t,s,i,e){var n=Math.acos(Math.min(Math.max(Qs(s,i),-1),1)),r=Math.sin(n),h=Math.sin((1-e)*n)/r,o=Math.sin(e*n)/r;return t[0]=h*s[0]+o*i[0],t[1]=h*s[1]+o*i[1],t[2]=h*s[2]+o*i[2],t},ei=function(t,s,i,e,n,r){var h=r*r,o=h*(2*r-3)+1,a=h*(r-2)+r,l=h*(r-1),u=h*(3-2*r);return t[0]=s[0]*o+i[0]*a+e[0]*l+n[0]*u,t[1]=s[1]*o+i[1]*a+e[1]*l+n[1]*u,t[2]=s[2]*o+i[2]*a+e[2]*l+n[2]*u,t},ni=function(t,s,i,e,n,r){var h=1-r,o=h*h,a=r*r,l=o*h,u=3*r*o,c=3*a*h,f=a*r;return t[0]=s[0]*l+i[0]*u+e[0]*c+n[0]*f,t[1]=s[1]*l+i[1]*u+e[1]*c+n[1]*f,t[2]=s[2]*l+i[2]*u+e[2]*c+n[2]*f,t},ri=function(t,s){s=s||1;var i=2*RANDOM()*Math.PI,e=2*RANDOM()-1,n=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*n,t[1]=Math.sin(i)*n,t[2]=e*s,t},hi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[3]*e+i[7]*n+i[11]*r+i[15];return h=h||1,t[0]=(i[0]*e+i[4]*n+i[8]*r+i[12])/h,t[1]=(i[1]*e+i[5]*n+i[9]*r+i[13])/h,t[2]=(i[2]*e+i[6]*n+i[10]*r+i[14])/h,t},oi=function(t,s,i){var e=s[0],n=s[1],r=s[2];return t[0]=e*i[0]+n*i[3]+r*i[6],t[1]=e*i[1]+n*i[4]+r*i[7],t[2]=e*i[2]+n*i[5]+r*i[8],t},ai=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],l=s[2],u=n*l-r*a,c=r*o-e*l,f=e*a-n*o,d=n*f-r*c,p=r*u-e*f,m=e*c-n*u,g=2*h;return u*=g,c*=g,f*=g,d*=2,p*=2,m*=2,t[0]=o+u+d,t[1]=a+c+p,t[2]=l+f+m,t},li=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0],r[1]=n[1]*Math.cos(e)-n[2]*Math.sin(e),r[2]=n[1]*Math.sin(e)+n[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},ui=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[2]*Math.sin(e)+n[0]*Math.cos(e),r[1]=n[1],r[2]=n[2]*Math.cos(e)-n[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},ci=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0]*Math.cos(e)-n[1]*Math.sin(e),r[1]=n[0]*Math.sin(e)+n[1]*Math.cos(e),r[2]=n[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},fi=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2],a=Math.sqrt((i*i+e*e+n*n)*(r*r+h*h+o*o)),l=a&&Qs(t,s)/a;return Math.acos(Math.min(Math.max(l,-1),1))},di=function(t){return t[0]=0,t[1]=0,t[2]=0,t},pi=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},mi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},gi=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2];return Math.abs(i-r)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-h)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-o)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(o))},yi=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},wi=function(t){var s=new ARRAY_TYPE(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Si=function(t,s,i,e){var n=new ARRAY_TYPE(4);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n},vi=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},bi=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},Mi=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},xi=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Gi=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Ti=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Ii=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ci=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},_i=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Ei=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Pi=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Ai=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Ri=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Oi=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return Math.hypot(i,e,n,r)},Fi=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return i*i+e*e+n*n+r*r},Di=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return Math.hypot(s,i,e,n)},Li=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return s*s+i*i+e*e+n*n},ki=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},Ni=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},$i=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r;return h>0&&(h=1/Math.sqrt(h)),t[0]=i*h,t[1]=e*h,t[2]=n*h,t[3]=r*h,t},Bi=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Wi=function(t,s,i,e){var n=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],h=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],l=i[2]*e[3]-i[3]*e[2],u=s[0],c=s[1],f=s[2],d=s[3];return t[0]=c*l-f*a+d*o,t[1]=-u*l+f*h-d*r,t[2]=u*a-c*h+d*n,t[3]=-u*o+c*r-f*n,t},ji=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t[3]=o+e*(i[3]-o),t},Vi=function(t,s){var i,e,n,r,h,o;s=s||1;do{h=(i=2*RANDOM()-1)*i+(e=2*RANDOM()-1)*e}while(h>=1);do{o=(n=2*RANDOM()-1)*n+(r=2*RANDOM()-1)*r}while(o>=1);var a=Math.sqrt((1-h)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*n*a,t[3]=s*r*a,t},Hi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3];return t[0]=i[0]*e+i[4]*n+i[8]*r+i[12]*h,t[1]=i[1]*e+i[5]*n+i[9]*r+i[13]*h,t[2]=i[2]*e+i[6]*n+i[10]*r+i[14]*h,t[3]=i[3]*e+i[7]*n+i[11]*r+i[15]*h,t},Ui=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2],l=i[3],u=l*e+o*r-a*n,c=l*n+a*e-h*r,f=l*r+h*n-o*e,d=-h*e-o*n-a*r;return t[0]=u*l+d*-h+c*-a-f*-o,t[1]=c*l+d*-o+f*-h-u*-a,t[2]=f*l+d*-a+u*-o-c*-h,t[3]=s[3],t},qi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},zi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Ji=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Yi=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=s[0],o=s[1],a=s[2],l=s[3];return Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-o)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(l))},Xi=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Ki=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},Zi=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},Qi=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return e>EPSILON?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){var i=dot$2(t,s);return Math.acos(2*i*i-1)},se=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-e*l,t[2]=r*u+h*l+e*a-n*o,t[3]=h*u-e*o-n*a-r*l,t},ie=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+h*o,t[1]=n*a+r*o,t[2]=r*a-n*o,t[3]=h*a-e*o,t},ee=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a-r*o,t[1]=n*a+h*o,t[2]=r*a+e*o,t[3]=h*a-n*o,t},ne=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+n*o,t[1]=n*a-e*o,t[2]=r*a+h*o,t[3]=h*a-r*o,t},re=function(t,s){var i=s[0],e=s[1],n=s[2];return t[0]=i,t[1]=e,t[2]=n,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-n*n)),t},he=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=Math.exp(r),a=h>0?o*Math.sin(h)/h:0;return t[0]=i*a,t[1]=e*a,t[2]=n*a,t[3]=o*Math.cos(h),t},oe=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=h>0?Math.atan2(h,r)/h:0;return t[0]=i*o,t[1]=e*o,t[2]=n*o,t[3]=.5*Math.log(i*i+e*e+n*n+r*r),t},ae=function(t,s,i){return oe(t,s),scale$2(t,t,i),he(t,t),t},le=function(t,s,i,e){var n,r,h,o,a,l=s[0],u=s[1],c=s[2],f=s[3],d=i[0],p=i[1],m=i[2],g=i[3];return(r=l*d+u*p+c*m+f*g)<0&&(r=-r,d=-d,p=-p,m=-m,g=-g),1-r>EPSILON?(n=Math.acos(r),h=Math.sin(n),o=Math.sin((1-e)*n)/h,a=Math.sin(e*n)/h):(o=1-e,a=e),t[0]=o*l+a*d,t[1]=o*u+a*p,t[2]=o*c+a*m,t[3]=o*f+a*g,t},ue=function(t){var s=RANDOM(),i=RANDOM(),e=RANDOM(),n=Math.sqrt(1-s),r=Math.sqrt(s);return t[0]=n*Math.sin(2*Math.PI*i),t[1]=n*Math.cos(2*Math.PI*i),t[2]=r*Math.sin(2*Math.PI*e),t[3]=r*Math.cos(2*Math.PI*e),t},ce=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r,o=h?1/h:0;return t[0]=-i*o,t[1]=-e*o,t[2]=-n*o,t[3]=r*o,t},fe=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},de=function(t,s){var i,e=s[0]+s[4]+s[8];if(e>0)i=Math.sqrt(e+1),t[3]=.5*i,i=.5/i,t[0]=(s[5]-s[7])*i,t[1]=(s[6]-s[2])*i,t[2]=(s[1]-s[3])*i;else{var n=0;s[4]>s[0]&&(n=1),s[8]>s[3*n+n]&&(n=2);var r=(n+1)%3,h=(n+2)%3;i=Math.sqrt(s[3*n+n]-s[3*r+r]-s[3*h+h]+1),t[n]=.5*i,i=.5/i,t[3]=(s[3*r+h]-s[3*h+r])*i,t[r]=(s[3*r+n]+s[3*n+r])*i,t[h]=(s[3*h+n]+s[3*n+h])*i}return t},pe=function(t,s,i,e){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ANGLE_ORDER,r=Math.PI/360;s*=r,e*=r,i*=r;var h=Math.sin(s),o=Math.cos(s),a=Math.sin(i),l=Math.cos(i),u=Math.sin(e),c=Math.cos(e);switch(n){case"xyz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"xzy":t[0]=h*l*c-o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c+h*a*u;break;case"yxz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;case"yzx":t[0]=h*l*c+o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c-h*a*u;break;case"zxy":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"zyx":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;default:throw new Error("Unknown angle order "+n)}return t},me=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},ge=function(t,s){return Math.abs(Bi(t,s))>=1-EPSILON},ye=function(){var t=new ARRAY_TYPE(8);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},we=function(t){var s=new ARRAY_TYPE(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},Se=function(t,s,i,e,n,r,h,o){var a=new ARRAY_TYPE(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=n,a[5]=r,a[6]=h,a[7]=o,a},ve=function(t,s,i,e,n,r,h){var o=new ARRAY_TYPE(8);o[0]=t,o[1]=s,o[2]=i,o[3]=e;var a=.5*n,l=.5*r,u=.5*h;return o[4]=a*e+l*i-u*s,o[5]=l*e+u*t-a*i,o[6]=u*e+a*s-l*t,o[7]=-a*t-l*s-u*i,o},be=function(t,s,i){var e=.5*i[0],n=.5*i[1],r=.5*i[2],h=s[0],o=s[1],a=s[2],l=s[3];return t[0]=h,t[1]=o,t[2]=a,t[3]=l,t[4]=e*l+n*a-r*o,t[5]=n*l+r*h-e*a,t[6]=r*l+e*o-n*h,t[7]=-e*h-n*o-r*a,t},Me=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},xe=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Ge=function(t,s){var i=Xi();ls(i,s);var e=new ARRAY_TYPE(3);return os(e,s),be(t,i,e),t},Te=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},Ie=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Ce=function(t,s,i,e,n,r,h,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t},_e=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},Ee=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Pe=function(t,s){var i=s[4],e=s[5],n=s[6],r=s[7],h=-s[0],o=-s[1],a=-s[2],l=s[3];return t[0]=2*(i*l+r*h+e*a-n*o),t[1]=2*(e*l+r*o+n*h-i*a),t[2]=2*(n*l+r*a+i*o-e*h),t},Ae=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=.5*i[0],a=.5*i[1],l=.5*i[2],u=s[4],c=s[5],f=s[6],d=s[7];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=h*o+n*l-r*a+u,t[5]=h*a+r*o-e*l+c,t[6]=h*l+e*a-n*o+f,t[7]=-e*o-n*a-r*l+d,t},Re=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return ie(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Oe=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return ee(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Fe=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return ne(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},De=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],l=s[2],u=s[3];return t[0]=o*h+u*e+a*r-l*n,t[1]=a*h+u*n+l*e-o*r,t[2]=l*h+u*r+o*n-a*e,t[3]=u*h-o*e-a*n-l*r,o=s[4],a=s[5],l=s[6],u=s[7],t[4]=o*h+u*e+a*r-l*n,t[5]=a*h+u*n+l*e-o*r,t[6]=l*h+u*r+o*n-a*e,t[7]=u*h-o*e-a*n-l*r,t},Le=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-e*l,t[2]=r*u+h*l+e*a-n*o,t[3]=h*u-e*o-n*a-r*l,o=i[4],a=i[5],l=i[6],u=i[7],t[4]=e*u+h*o+n*l-r*a,t[5]=n*u+h*a+r*o-e*l,t[6]=r*u+h*l+e*a-n*o,t[7]=h*u-e*o-n*a-r*l,t},ke=function(t,s,i,e){if(Math.abs(e)<EPSILON)return Te(t,s);var n=Math.hypot(i[0],i[1],i[2]);e*=.5;var r=Math.sin(e),h=r*i[0]/n,o=r*i[1]/n,a=r*i[2]/n,l=Math.cos(e),u=s[0],c=s[1],f=s[2],d=s[3];t[0]=u*l+d*h+c*a-f*o,t[1]=c*l+d*o+f*h-u*a,t[2]=f*l+d*a+u*o-c*h,t[3]=d*l-u*h-c*o-f*a;var p=s[4],m=s[5],g=s[6],y=s[7];return t[4]=p*l+y*h+m*a-g*o,t[5]=m*l+y*o+g*h-p*a,t[6]=g*l+y*a+p*o-m*h,t[7]=y*l-p*h-m*o-g*a,t},Ne=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},$e=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],p=s[7],m=i[0],g=i[1],y=i[2],w=i[3];return t[0]=e*w+h*m+n*y-r*g,t[1]=n*w+h*g+r*m-e*y,t[2]=r*w+h*y+e*g-n*m,t[3]=h*w-e*m-n*g-r*y,t[4]=e*u+h*o+n*l-r*a+c*w+p*m+f*y-d*g,t[5]=n*u+h*a+r*o-e*l+f*w+p*g+d*m-c*y,t[6]=r*u+h*l+e*a-n*o+d*w+p*y+c*g-f*m,t[7]=h*u-e*o-n*a-r*l+p*w-c*m-f*g-d*y,t},Be=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},We=function(t,s,i,e){var n=1-e;return dot$1(s,i)<0&&(e=-e),t[0]=s[0]*n+i[0]*e,t[1]=s[1]*n+i[1]*e,t[2]=s[2]*n+i[2]*e,t[3]=s[3]*n+i[3]*e,t[4]=s[4]*n+i[4]*e,t[5]=s[5]*n+i[5]*e,t[6]=s[6]*n+i[6]*e,t[7]=s[7]*n+i[7]*e,t},je=function(t,s){var i=squaredLength$1(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},Ve=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},He=function(t,s){var i=squaredLength$1(s);if(i>0){i=Math.sqrt(i);var e=s[0]/i,n=s[1]/i,r=s[2]/i,h=s[3]/i,o=s[4],a=s[5],l=s[6],u=s[7],c=e*o+n*a+r*l+h*u;t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=(o-e*c)/i,t[5]=(a-n*c)/i,t[6]=(l-r*c)/i,t[7]=(u-h*c)/i}return t},Ue=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},qe=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},ze=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7];return Math.abs(i-u)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-c)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(n-f)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(h-p)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(y))},Je=function(){var t=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t},Ye=function(t){var s=new ARRAY_TYPE(2);return s[0]=t[0],s[1]=t[1],s},Xe=function(t,s){var i=new ARRAY_TYPE(2);return i[0]=t,i[1]=s,i},Ke=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ze=function(t,s,i){return t[0]=s,t[1]=i,t},Qe=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},tn=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},sn=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},en=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},nn=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},rn=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},hn=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},on=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},an=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},un=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},cn=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},fn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return Math.hypot(i,e)},dn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},pn=function(t){var s=t[0],i=t[1];return Math.hypot(s,i)},mn=function(t){var s=t[0],i=t[1];return s*s+i*i},gn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},yn=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},wn=function(t,s){var i=s[0],e=s[1],n=i*i+e*e;return n>0&&(n=1/Math.sqrt(n)),t[0]=s[0]*n,t[1]=s[1]*n,t},Sn=function(t,s){return t[0]*s[0]+t[1]*s[1]},vn=function(t,s,i){var e=s[0]*i[1]-s[1]*i[0];return t[0]=t[1]=0,t[2]=e,t},bn=function(t,s,i,e){var n=s[0],r=s[1];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t},Mn=function(t,s){s=s||1;var i=2*RANDOM()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},xn=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n,t[1]=i[1]*e+i[3]*n,t},Gn=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n+i[4],t[1]=i[1]*e+i[3]*n+i[5],t},Tn=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[3]*n+i[6],t[1]=i[1]*e+i[4]*n+i[7],t},In=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[4]*n+i[12],t[1]=i[1]*e+i[5]*n+i[13],t},Cn=function(t,s,i,e){var n=s[0]-i[0],r=s[1]-i[1],h=Math.sin(e),o=Math.cos(e);return t[0]=n*o-r*h+i[0],t[1]=n*h+r*o+i[1],t},_n=function(t,s){var i=t[0],e=t[1],n=s[0],r=s[1],h=Math.sqrt((i*i+e*e)*(n*n+r*r)),o=h&&(i*n+e*r)/h;return Math.acos(Math.min(Math.max(o,-1),1))},En=function(t){return t[0]=0,t[1]=0,t},Pn=function(t){return"vec2("+t[0]+", "+t[1]+")"},An=function(t,s){return t[0]===s[0]&&t[1]===s[1]},Rn=function(t,s){var i=t[0],e=t[1],n=s[0],r=s[1];return Math.abs(i-n)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(e-r)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(r))};setMatrixArrayType=e,toRadian=n,equals$9=h,create$8=u,clone$8=p,copy$8=m,identity$5=g,fromValues$8=y,set$8=w,transpose$2=S,invert$5=v,adjoint$2=b,determinant$3=M,multiply$8=x,rotate$4=G,scale$8=T,fromRotation$4=I,fromScaling$3=C,str$8=_,frob$3=E,LDU=P,add$8=A,subtract$6=R,exactEquals$8=O,equals$8=F,multiplyScalar$3=D,multiplyScalarAndAdd$3=L,create$7=k,clone$7=N,copy$7=$,identity$4=B,fromValues$7=W,set$7=j,invert$4=V,determinant$2=H,multiply$7=U,rotate$3=q,scale$7=z,translate$3=J,fromRotation$3=Y,fromScaling$2=X,fromTranslation$3=K,str$7=Z,frob$2=Q,add$7=tt,subtract$5=st,multiplyScalar$2=it,multiplyScalarAndAdd$2=et,exactEquals$7=nt,equals$7=rt,create$6=ht,fromMat4$1=ot,clone$6=at,copy$6=lt,fromValues$6=ut,set$6=ct,identity$3=ft,transpose$1=dt,invert$3=pt,adjoint$1=mt,determinant$1=gt,multiply$6=yt,translate$2=wt,rotate$2=St,scale$6=vt,fromTranslation$2=bt,fromRotation$2=Mt,fromScaling$1=xt,fromMat2d=Gt,fromQuat$1=Tt,normalFromMat4=It,projection=Ct,str$6=_t,frob$1=Et,add$6=Pt,subtract$4=At,multiplyScalar$1=Rt,multiplyScalarAndAdd$1=Ot,exactEquals$6=Ft,equals$6=Dt,create$5=Lt,clone$5=kt,copy$5=Nt,fromValues$5=$t,set$5=Bt,identity$2=Wt,transpose=jt,invert$2=Vt,adjoint=Ht,determinant=Ut,multiply$5=qt,translate$1=zt,scale$5=Jt,rotate$1=Yt,rotateX$3=Xt,rotateY$3=Kt,rotateZ$3=Zt,fromTranslation$1=Qt,fromScaling=ts,fromRotation$1=ss,fromXRotation=is,fromYRotation=es,fromZRotation=ns,fromRotationTranslation$1=rs,fromQuat2=hs,getTranslation$1=os,getScaling=as,getRotation=ls,decompose=us,fromRotationTranslationScale=cs,fromRotationTranslationScaleOrigin=fs,fromQuat=ds,frustum=ps,perspectiveNO=ms,perspectiveZO=gs,perspectiveFromFieldOfView=ys,orthoNO=ws,orthoZO=Ss,lookAt=vs,targetTo=bs,str$5=Ms,frob=xs,add$5=Gs,subtract$3=Ts,multiplyScalar=Is,multiplyScalarAndAdd=Cs,exactEquals$5=_s,equals$5=Es,create$4=Ps,clone$4=As,length$4=Rs,fromValues$4=Os,copy$4=Fs,set$4=Ds,add$4=Ls,subtract$2=ks,multiply$4=Ns,divide$2=$s,ceil$2=Bs,floor$2=Ws,min$2=js,max$2=Vs,round$2=Hs,scale$4=Us,scaleAndAdd$2=qs,distance$2=zs,squaredDistance$2=Js,squaredLength$4=Ys,negate$2=Xs,inverse$2=Ks,normalize$4=Zs,dot$4=Qs,cross$2=ti,lerp$4=si,slerp$1=ii,hermite=ei,bezier=ni,random$3=ri,transformMat4$2=hi,transformMat3$1=oi,transformQuat$1=ai,rotateX$2=li,rotateY$2=ui,rotateZ$2=ci,angle$1=fi,zero$2=di,str$4=pi,exactEquals$4=mi,equals$4=gi,create$3=yi,clone$3=wi,fromValues$3=Si,copy$3=vi,set$3=bi,add$3=Mi,subtract$1=xi,multiply$3=Gi,divide$1=Ti,ceil$1=Ii,floor$1=Ci,min$1=_i,max$1=Ei,round$1=Pi,scale$3=Ai,scaleAndAdd$1=Ri,distance$1=Oi,squaredDistance$1=Fi,length$3=Di,squaredLength$3=Li,negate$1=ki,inverse$1=Ni,normalize$3=$i,dot$3=Bi,cross$1=Wi,lerp$3=ji,random$2=Vi,transformMat4$1=Hi,transformQuat=Ui,zero$1=qi,str$3=zi,exactEquals$3=Ji,equals$3=Yi,create$2=Xi,identity$1=Ki,setAxisAngle=Zi,getAxisAngle=Qi,getAngle=te,multiply$2=se,rotateX$1=ie,rotateY$1=ee,rotateZ$1=ne,calculateW=re,exp=he,ln=oe,pow=ae,slerp=le,random$1=ue,invert$1=ce,conjugate$1=fe,fromMat3=de,fromEuler=pe,str$2=me,equals$2=ge,create$1=ye,clone$1=we,fromValues$1=Se,fromRotationTranslationValues=ve,fromRotationTranslation=be,fromTranslation=Me,fromRotation=xe,fromMat4=Ge,copy$1=Te,identity=Ie,set$1=Ce,getDual=_e,setDual=Ee,getTranslation=Pe,translate=Ae,rotateX=Re,rotateY=Oe,rotateZ=Fe,rotateByQuatAppend=De,rotateByQuatPrepend=Le,rotateAroundAxis=ke,add$1=Ne,multiply$1=$e,scale$1=Be,lerp$1=We,invert=je,conjugate=Ve,normalize$1=He,str$1=Ue,exactEquals$1=qe,equals$1=ze,create=Je,clone=Ye,fromValues=Xe,copy=Ke,set=Ze,add=Qe,subtract=tn,multiply=sn,divide=en,ceil=nn,floor=rn,min=hn,max=on,round=an,scale=un,scaleAndAdd=cn,distance=fn,squaredDistance=dn,length=pn,squaredLength=mn,negate=gn,inverse=yn,normalize=wn,dot=Sn,cross=vn,lerp=bn,random=Mn,transformMat2=xn,transformMat2d=Gn,transformMat3=Tn,transformMat4=In,rotate=Cn,angle=_n,zero=En,str=Pn,exactEquals=An,equals=Rn,EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,RANDOM=Math.random,ANGLE_ORDER="zyx",degree=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),common={__proto__:null,EPSILON:EPSILON,get h(){return ARRAY_TYPE},o:RANDOM,l:ANGLE_ORDER,u:e,m:n,equals:h},mul$8=x,sub$6=R,mat2=Object.freeze({__proto__:null,create:u,clone:p,S:m,identity:g,v:y,set:w,M:S,G:v,T:b,I:M,multiply:x,rotate:G,scale:T,C:I,_:C,P:_,A:E,R:P,add:A,O:R,F:O,equals:F,D:D,L:L,mul:mul$8,sub:sub$6}),mul$7=U,sub$5=st,mat2d=Object.freeze({__proto__:null,create:k,clone:N,S:$,identity:B,v:W,set:j,G:V,I:H,multiply:U,rotate:q,scale:z,translate:J,C:Y,_:X,N:K,P:Z,A:Q,add:tt,O:st,D:it,L:et,F:nt,equals:rt,mul:mul$7,sub:sub$5}),mul$6=yt,sub$4=At,mat3=Object.freeze({__proto__:null,create:ht,$:ot,clone:at,S:lt,v:ut,set:ct,identity:ft,M:dt,G:pt,T:mt,I:gt,multiply:yt,translate:wt,rotate:St,scale:vt,N:bt,C:Mt,_:xt,B:Gt,W:Tt,j:It,V:Ct,P:_t,A:Et,add:Pt,O:At,D:Rt,L:Ot,F:Ft,equals:Dt,mul:mul$6,sub:sub$4}),perspective=ms,ortho=ws,mul$5=qt,sub$3=Ts,mat4=Object.freeze({__proto__:null,create:Lt,clone:kt,S:Nt,v:$t,set:Bt,identity:Wt,M:jt,G:Vt,T:Ht,I:Ut,multiply:qt,translate:zt,scale:Jt,rotate:Yt,H:Xt,U:Kt,J:Zt,N:Qt,_:ts,C:ss,Y:is,X:es,K:ns,Z:rs,tt:hs,st:os,it:as,et:ls,nt:us,rt:cs,ht:fs,W:ds,ot:ps,lt:ms,perspective:perspective,ut:gs,ct:ys,ft:ws,dt:ortho,gt:Ss,yt:vs,wt:bs,P:Ms,A:xs,add:Gs,O:Ts,D:Is,L:Cs,F:_s,equals:Es,mul:mul$5,sub:sub$3}),sub$2=ks,mul$4=Ns,div$2=$s,dist$2=zs,sqrDist$2=Js,len$4=Rs,sqrLen$4=Ys,t=Ps(),forEach$2=function(s,i,e,n,r,h){var o,a;for(i||(i=3),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2];return s},vec3=Object.freeze({__proto__:null,create:Ps,clone:As,length:Rs,v:Os,S:Fs,set:Ds,add:Ls,O:ks,multiply:Ns,St:$s,ceil:Bs,floor:Ws,min:js,max:Vs,round:Hs,scale:Us,vt:qs,bt:zs,Mt:Js,xt:Ys,Gt:Xs,inverse:Ks,normalize:Zs,Tt:Qs,It:ti,Ct:si,_t:ii,Et:ei,Pt:ni,random:ri,At:hi,Rt:oi,Ot:ai,H:li,U:ui,J:ci,angle:fi,Ft:di,P:pi,F:mi,equals:gi,sub:sub$2,mul:mul$4,div:div$2,Dt:dist$2,Lt:sqrDist$2,kt:len$4,Nt:sqrLen$4,forEach:forEach$2}),sub$1=xi,mul$3=Gi,div$1=Ti,dist$1=Oi,sqrDist$1=Fi,len$3=Di,sqrLen$3=Li,forEach$1=function(){var t=yi();return function(s,i,e,n,r,h){var o,a;for(i||(i=4),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],t[3]=s[o+3],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2],s[o+3]=t[3];return s}}(),vec4=Object.freeze({__proto__:null,create:yi,clone:wi,v:Si,S:vi,set:bi,add:Mi,O:xi,multiply:Gi,St:Ti,ceil:Ii,floor:Ci,min:_i,max:Ei,round:Pi,scale:Ai,vt:Ri,bt:Oi,Mt:Fi,length:Di,xt:Li,Gt:ki,inverse:Ni,normalize:$i,Tt:Bi,It:Wi,Ct:ji,random:Vi,At:Hi,Ot:Ui,Ft:qi,P:zi,F:Ji,equals:Yi,sub:sub$1,mul:mul$3,div:div$1,Dt:dist$1,Lt:sqrDist$1,kt:len$3,Nt:sqrLen$3,forEach:forEach$1}),clone$2=wi,fromValues$2=Si,copy$2=vi,set$2=bi,add$2=Mi,mul$2=se,scale$2=Ai,dot$2=Bi,lerp$2=ji,length$2=Di,len$2=length$2,squaredLength$2=Li,sqrLen$2=squaredLength$2,normalize$2=$i,exactEquals$2=Ji,rotationTo=function(){var t=Ps(),s=Os(1,0,0),i=Os(0,1,0);return function(e,n,r){var h=Qs(n,r);return h<-.999999?(ti(t,s,n),len$4(t)<1e-6&&ti(t,i,n),Zs(t,t),Zi(e,t,Math.PI),e):h>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(ti(t,n,r),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1+h,normalize$2(e,e))}}(),sqlerp=function(){var t=Xi(),s=Xi();return function(i,e,n,r,h,o){return le(t,e,h,o),le(s,n,r,o),le(i,t,s,2*o*(1-o)),i}}(),setAxes=function(){var t=ht();return function(s,i,e,n){return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-i[0],t[5]=-i[1],t[8]=-i[2],normalize$2(s,de(s,t))}}(),quat=Object.freeze({__proto__:null,create:Xi,identity:Ki,$t:Zi,Bt:Qi,Wt:te,multiply:se,H:ie,U:ee,J:ne,jt:re,exp:he,Vt:oe,pow:ae,_t:le,random:ue,G:ce,Ht:fe,Ut:de,qt:pe,P:me,clone:clone$2,v:fromValues$2,S:copy$2,set:set$2,add:add$2,mul:mul$2,scale:scale$2,Tt:dot$2,Ct:lerp$2,length:length$2,kt:len$2,xt:squaredLength$2,Nt:sqrLen$2,normalize:normalize$2,F:exactEquals$2,equals:ge,zt:rotationTo,Jt:sqlerp,Yt:setAxes}),getReal=copy$2,setReal=copy$2,mul$1=$e,dot$1=dot$2,length$1=length$2,len$1=length$1,squaredLength$1=squaredLength$2,sqrLen$1=squaredLength$1,quat2=Object.freeze({__proto__:null,create:ye,clone:we,v:Se,Xt:ve,Z:be,N:Me,C:xe,$:Ge,S:Te,identity:Ie,set:Ce,Kt:getReal,Zt:_e,Qt:setReal,ts:Ee,st:Pe,translate:Ae,H:Re,U:Oe,J:Fe,ss:De,es:Le,ns:ke,add:Ne,multiply:$e,mul:mul$1,scale:Be,Tt:dot$1,Ct:We,G:je,Ht:Ve,length:length$1,kt:len$1,xt:squaredLength$1,Nt:sqrLen$1,normalize:He,P:Ue,F:qe,equals:ze}),len=pn,sub=tn,mul=sn,div=en,dist=fn,sqrDist=dn,sqrLen=mn,forEach=function(){var t=Je();return function(s,i,e,n,r,h){var o,a;for(i||(i=2),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],r(t,t,h),s[o]=t[0],s[o+1]=t[1];return s}}(),vec2=Object.freeze({__proto__:null,create:Je,clone:Ye,v:Xe,S:Ke,set:Ze,add:Qe,O:tn,multiply:sn,St:en,ceil:nn,floor:rn,min:hn,max:on,round:an,scale:un,vt:cn,bt:fn,Mt:dn,length:pn,xt:mn,Gt:gn,inverse:yn,normalize:wn,Tt:Sn,It:vn,Ct:bn,random:Mn,rs:xn,hs:Gn,Rt:Tn,At:In,rotate:Cn,angle:_n,Ft:En,P:Pn,F:An,equals:Rn,kt:len,sub:sub,mul:mul,div:div,Dt:dist,Lt:sqrDist,Nt:sqrLen,forEach:forEach}),globalThis.ls=common,globalThis.ls.us=mat2,globalThis.ls.cs=mat2d,globalThis.ls.fs=mat3,globalThis.ls.ds=mat4,globalThis.ls.ps=quat,globalThis.ls.gs=quat2,globalThis.ls.ys=vec2,globalThis.ls.ws=vec3,globalThis.ls.Ss=vec4}var t,EPSILON,ARRAY_TYPE,RANDOM,ANGLE_ORDER,degree,common,mul$8,sub$6,mat2,mul$7,sub$5,mat2d,mul$6,sub$4,mat3,perspective,ortho,mul$5,sub$3,mat4,sub$2,mul$4,div$2,dist$2,sqrDist$2,len$4,sqrLen$4,forEach$2,vec3,sub$1,mul$3,div$1,dist$1,sqrDist$1,len$3,sqrLen$3,forEach$1,vec4,clone$2,fromValues$2,copy$2,set$2,add$2,mul$2,scale$2,dot$2,lerp$2,length$2,len$2,squaredLength$2,sqrLen$2,normalize$2,exactEquals$2,rotationTo,sqlerp,setAxes,quat,getReal,setReal,mul$1,dot$1,length$1,len$1,squaredLength$1,sqrLen$1,quat2,len,sub,mul,div,dist,sqrDist,sqrLen,forEach,vec2,setMatrixArrayType,toRadian,equals$9,create$8,clone$8,copy$8,identity$5,fromValues$8,set$8,transpose$2,invert$5,adjoint$2,determinant$3,multiply$8,rotate$4,scale$8,fromRotation$4,fromScaling$3,str$8,frob$3,LDU,add$8,subtract$6,exactEquals$8,equals$8,multiplyScalar$3,multiplyScalarAndAdd$3,create$7,clone$7,copy$7,identity$4,fromValues$7,set$7,invert$4,determinant$2,multiply$7,rotate$3,scale$7,translate$3,fromRotation$3,fromScaling$2,fromTranslation$3,str$7,frob$2,add$7,subtract$5,multiplyScalar$2,multiplyScalarAndAdd$2,exactEquals$7,equals$7,create$6,fromMat4$1,clone$6,copy$6,fromValues$6,set$6,identity$3,transpose$1,invert$3,adjoint$1,determinant$1,multiply$6,translate$2,rotate$2,scale$6,fromTranslation$2,fromRotation$2,fromScaling$1,fromMat2d,fromQuat$1,normalFromMat4,projection,str$6,frob$1,add$6,subtract$4,multiplyScalar$1,multiplyScalarAndAdd$1,exactEquals$6,equals$6,create$5,clone$5,copy$5,fromValues$5,set$5,identity$2,transpose,invert$2,adjoint,determinant,multiply$5,translate$1,scale$5,rotate$1,rotateX$3,rotateY$3,rotateZ$3,fromTranslation$1,fromScaling,fromRotation$1,fromXRotation,fromYRotation,fromZRotation,fromRotationTranslation$1,fromQuat2,getTranslation$1,getScaling,getRotation,decompose,fromRotationTranslationScale,fromRotationTranslationScaleOrigin,fromQuat,frustum,perspectiveNO,perspectiveZO,perspectiveFromFieldOfView,orthoNO,orthoZO,lookAt,targetTo,str$5,frob,add$5,subtract$3,multiplyScalar,multiplyScalarAndAdd,exactEquals$5,equals$5,create$4,clone$4,length$4,fromValues$4,copy$4,set$4,add$4,subtract$2,multiply$4,divide$2,ceil$2,floor$2,min$2,max$2,round$2,scale$4,scaleAndAdd$2,distance$2,squaredDistance$2,squaredLength$4,negate$2,inverse$2,normalize$4,dot$4,cross$2,lerp$4,slerp$1,hermite,bezier,random$3,transformMat4$2,transformMat3$1,transformQuat$1,rotateX$2,rotateY$2,rotateZ$2,angle$1,zero$2,str$4,exactEquals$4,equals$4,create$3,clone$3,fromValues$3,copy$3,set$3,add$3,subtract$1,multiply$3,divide$1,ceil$1,floor$1,min$1,max$1,round$1,scale$3,scaleAndAdd$1,distance$1,squaredDistance$1,length$3,squaredLength$3,negate$1,inverse$1,normalize$3,dot$3,cross$1,lerp$3,random$2,transformMat4$1,transformQuat,zero$1,str$3,exactEquals$3,equals$3,create$2,identity$1,setAxisAngle,getAxisAngle,getAngle,multiply$2,rotateX$1,rotateY$1,rotateZ$1,calculateW,exp,ln,pow,slerp,random$1,invert$1,conjugate$1,fromMat3,fromEuler,str$2,equals$2,create$1,clone$1,fromValues$1,fromRotationTranslationValues,fromRotationTranslation,fromTranslation,fromRotation,fromMat4,copy$1,identity,set$1,getDual,setDual,getTranslation,translate,rotateX,rotateY,rotateZ,rotateByQuatAppend,rotateByQuatPrepend,rotateAroundAxis,add$1,multiply$1,scale$1,lerp$1,invert,conjugate,normalize$1,str$1,exactEquals$1,equals$1,create,clone,fromValues,copy,set,add,subtract,multiply,divide,ceil,floor,min,max,round,scale,scaleAndAdd,distance,squaredDistance,length,squaredLength,negate,inverse,normalize,dot,cross,lerp,random,transformMat2,transformMat2d,transformMat3,transformMat4,rotate,angle,zero,str,exactEquals,equals,tmpPoint1,tmpPoint2,tmpLine1,tmpLine2,lineInt,lineSegmentsIntersect,triangleArea,isLeft,isLeftOn,isRight,isRightOn,collinear,sqdist,polygonAt,polygonClear,polygonAppend,polygonMakeCCW,polygonReverse,polygonIsReflex,polygonCanSee,polygonCanSee2,polygonCopy,polygonGetCutEdges,polygonDecomp,polygonSlice,polygonIsSimple,getIntersectionPoint,polygonQuickDecomp,polygonRemoveCollinearPoints,polygonRemoveDuplicatePoints,scalar_eq,points_eq,ReadBrandList,RunTest,GetWindowsNTVersionName,s,a,c,i,l,f,d,r,a,o,arrayFlat,assertFail,isValidTypeChange,logDefendedObjectWarning,CheckDefendedObjectsUsedCorrectly,getObjectPropertySet,VerifyObjectPropertiesConsistent,isNegativeZero,padTwoDigits,hueToRGB,RequireStringOrNumber,SetNewCallback,DoAsyncifiedWork,DoNextAsyncifiedJob,ClearTimeCache,CheckActiveIdleTimeouts,lookupHtmlEntity,bbToHtmlReplacerFunc,IsWordBreakWhiteSpace,IsOpeningCJKPunctiationChar,IsContinuingCJKPunctuationChar,WordBreakTrimEnd,IsNewline,PlaneFromPoints,IsInFrontOfPlane,IsPointInFrontOfPlane,interpolateQuad,GetFormatSpecifiers,fillOrStrokeRect,ptToPx,getOffsetParam,CheckPendingPolls,SortZOrderList,GetDispatcher,MakeIWorldInstanceClass,GetDispatcher,GetTimelineState,GetTimelineState,GetTweenState,IsStaticTextureDataType,getActual,GetTypeFromFileExtension,AddScript,SortByInstLastCachedZIndex,SortByInstLastCachedZIndex,SortByInstZElevation,vec3EqualsXYZ,MaybePrepareLayerDraw,SortSolArray,IsSolArrayIdentical,NoActions,WrapIndex,GetExpressionFunc,EvalParams,EvalParams,GetInst,GetWorldInfo,GetInst_SDKv2,GetWorldInfo_SDKv2,GetObjectClass,GetLayer,CollMemory_Add,CollMemory_Remove,CollMemory_RemoveInstance,CollMemory_Get,DoOverlapCondition,FinishCollisionConditionPicking,FinishCollisionCondition,PickByUID_Normal,PickByUID_Inverted,GetNextParamMap,ValidateInternalAPIToken,ForEachOrdered_SortInstances,SortZOrderList,SortInstancesByValue,GetTouchSdkInstance,GetKeyboardSdkInstance,StringFromCharCode,SetObjectTypeCollisionsEnabled,UnwrapIWorldInstance,CloneVec2,SplitConvexPolysOver8Points,SplitConvexPoly,unaryminus,bothNumbers,add,subtract,multiply,divide,mod,pow,and,or;{let On=function(t,s,i){i=i||0;var e,n,r,h,o,a,l,u=[0,0];return e=t[1][1]-t[0][1],n=t[0][0]-t[1][0],r=e*t[0][0]+n*t[0][1],h=s[1][1]-s[0][1],o=s[0][0]-s[1][0],a=h*s[0][0]+o*s[0][1],rr(l=e*o-h*n,0,i)||(u[0]=(o*r-n*a)/l,u[1]=(e*a-h*r)/l),u},Fn=function(t,s,i,e){var n=s[0]-t[0],r=s[1]-t[1],h=e[0]-i[0],o=e[1]-i[1];if(h*r-o*n===0)return!1;var a=(n*(i[1]-t[1])+r*(t[0]-i[0]))/(h*r-o*n),l=(h*(t[1]-i[1])+o*(i[0]-t[0]))/(o*n-h*r);return a>=0&&a<=1&&l>=0&&l<=1},Dn=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},Ln=function(t,s,i){return Dn(t,s,i)>0},kn=function(t,s,i){return Dn(t,s,i)>=0},Nn=function(t,s,i){return Dn(t,s,i)<0},$n=function(t,s,i){return Dn(t,s,i)<=0},Bn=function(t,s,i,e){if(e){var n=tmpPoint1,r=tmpPoint2;n[0]=s[0]-t[0],n[1]=s[1]-t[1],r[0]=i[0]-s[0],r[1]=i[1]-s[1];var h=n[0]*r[0]+n[1]*r[1],o=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=Math.sqrt(r[0]*r[0]+r[1]*r[1]);return Math.acos(h/(o*a))<e}return 0===Dn(t,s,i)},Wn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},jn=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},Vn=function(t){t.length=0},Hn=function(t,s,i,e){for(var n=i;n<e;n++)t.push(s[n])},Un=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!Ln(jn(t,s-1),jn(t,s),jn(t,s+1))&&(qn(t),!0)},qn=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},zn=function(t,s){return Nn(jn(t,s-1),jn(t,s),jn(t,s+1))},Jn=function(t,s,i){var e,n,r=tmpLine1,h=tmpLine2;if(kn(jn(t,s+1),jn(t,s),jn(t,i))&&$n(jn(t,s-1),jn(t,s),jn(t,i)))return!1;n=Wn(jn(t,s),jn(t,i));for(var o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&kn(jn(t,s),jn(t,i),jn(t,o+1))&&$n(jn(t,s),jn(t,i),jn(t,o))&&(r[0]=jn(t,s),r[1]=jn(t,i),h[0]=jn(t,o),h[1]=jn(t,o+1),e=On(r,h),Wn(jn(t,s),e)<n))return!1;return!0},Yn=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&Fn(jn(t,s),jn(t,i),jn(t,e),jn(t,e+1)))return!1;return!0},Xn=function(t,s,i,e){var n=e||[];if(Vn(n),s<i)for(var r=s;r<=i;r++)n.push(t[r]);else{for(r=0;r<=i;r++)n.push(t[r]);for(r=s;r<t.length;r++)n.push(t[r])}return n},Kn=function(t){for(var s=[],i=[],e=[],n=[],r=Number.MAX_VALUE,h=0;h<t.length;++h)if(zn(t,h))for(var o=0;o<t.length;++o)if(Jn(t,h,o)){i=Kn(Xn(t,h,o,n)),e=Kn(Xn(t,o,h,n));for(var a=0;a<e.length;a++)i.push(e[a]);i.length<r&&(s=i,r=i.length,s.push([jn(t,h),jn(t,o)]))}return s},Zn=function(t){var s=Kn(t);return s.length>0?Qn(t,s):[t]},Qn=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var n=s[e],r=0;r<i.length;r++){var h=Qn(i[r],n);if(h){i.splice(r,1),i.push(h[0],h[1]);break}}return i}return n=s,e=t.indexOf(n[0]),r=t.indexOf(n[1]),-1!==e&&-1!==r&&[Xn(t,e,r),Xn(t,r,e)]},tr=function(t){var s,i=t;for(s=0;s<i.length-1;s++)for(var e=0;e<s-1;e++)if(Fn(i[s],i[s+1],i[e],i[e+1]))return!1;for(s=1;s<i.length-2;s++)if(Fn(i[0],i[i.length-1],i[s],i[s+1]))return!1;return!0},sr=function(t,s,i,e,n){n=n||0;var r=s[1]-t[1],h=t[0]-s[0],o=r*t[0]+h*t[1],a=e[1]-i[1],l=i[0]-e[0],u=a*i[0]+l*i[1],c=r*l-a*h;return rr(c,0,n)?[0,0]:[(l*o-h*u)/c,(r*u-a*o)/c]},ir=function(t,s,i,e,n,r,h){r=r||100,h=h||0,n=n||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],w=[],S=t,v=t;if(v.length<3)return s;if(++h>r)return console.warn("quickDecomp: max level ("+r+") reached."),s;for(var b=0;b<t.length;++b)if(zn(S,b)){i.push(S[b]),u=c=Number.MAX_VALUE;for(var M=0;M<t.length;++M)Ln(jn(S,b-1),jn(S,b),jn(S,M))&&$n(jn(S,b-1),jn(S,b),jn(S,M-1))&&(l=sr(jn(S,b-1),jn(S,b),jn(S,M),jn(S,M-1)),Nn(jn(S,b+1),jn(S,b),l)&&(f=Wn(S[b],l))<c&&(c=f,a=l,m=M)),Ln(jn(S,b+1),jn(S,b),jn(S,M+1))&&$n(jn(S,b+1),jn(S,b),jn(S,M))&&(l=sr(jn(S,b+1),jn(S,b),jn(S,M),jn(S,M+1)),Ln(jn(S,b-1),jn(S,b),l)&&(f=Wn(S[b],l))<u&&(u=f,o=l,p=M));if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),b<p?(Hn(y,S,b,p+1),y.push(l),w.push(l),0!==m&&Hn(w,S,m,S.length),Hn(w,S,0,b+1)):(0!==b&&Hn(y,S,b,S.length),Hn(y,S,0,p+1),y.push(l),w.push(l),Hn(w,S,m,b+1));else{if(m>p&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(M=m;M<=p;++M)kn(jn(S,b-1),jn(S,b),jn(S,M))&&$n(jn(S,b+1),jn(S,b),jn(S,M))&&(f=Wn(jn(S,b),jn(S,M)))<d&&Yn(S,b,M)&&(d=f,g=M%t.length);b<g?(Hn(y,S,b,g+1),0!==g&&Hn(w,S,g,v.length),Hn(w,S,0,b+1)):(0!==b&&Hn(y,S,b,v.length),Hn(y,S,0,g+1),Hn(w,S,g,b+1))}return y.length<w.length?(ir(y,s,i,e,n,r,h),ir(w,s,i,e,n,r,h)):(ir(w,s,i,e,n,r,h),ir(y,s,i,e,n,r,h)),s}return s.push(t),s},er=function(t,s){for(var i=0,e=t.length-1;t.length>3&&e>=0;--e)Bn(jn(t,e-1),jn(t,e),jn(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},nr=function(t,s){for(var i=t.length-1;i>=1;--i)for(var e=t[i],n=i-1;n>=0;--n)hr(e,t[n],s)&&t.splice(i,1)},rr=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},hr=function(t,s,i){return rr(t[0],s[0],i)&&rr(t[1],s[1],i)};lineInt=On,lineSegmentsIntersect=Fn,triangleArea=Dn,isLeft=Ln,isLeftOn=kn,isRight=Nn,isRightOn=$n,collinear=Bn,sqdist=Wn,polygonAt=jn,polygonClear=Vn,polygonAppend=Hn,polygonMakeCCW=Un,polygonReverse=qn,polygonIsReflex=zn,polygonCanSee=Jn,polygonCanSee2=Yn,polygonCopy=Xn,polygonGetCutEdges=Kn,polygonDecomp=Zn,polygonSlice=Qn,polygonIsSimple=tr,getIntersectionPoint=sr,polygonQuickDecomp=ir,polygonRemoveCollinearPoints=er,polygonRemoveDuplicatePoints=nr,scalar_eq=rr,points_eq=hr,tmpPoint1=[],tmpPoint2=[],tmpLine1=[],tmpLine2=[],self.vs={bs:Zn,Ms:ir,xs:tr,Gs:er,Ts:nr,Is:Un}}{let ar=!1,lr=!1,ur="dev";const cr=Symbol("Construct internal API token");let fr=16;const dr=self.Cs=class{constructor(){throw TypeError("static class can't be instantiated")}static _s(){if(fr<=0)throw new Error("cannot obtain internal API token");return--fr,cr}static Es(){ar=!0}static Ps(){return ar}static As(){lr=!0}static Rs(){return lr}static Os(t){ur=t}static Fs(){return ur}static Ds(){return"final"===ur}};dr.Ls=!1,dr.ks=!1,dr.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Ns={}}{const pr=self.Cs;pr.$s=class{constructor(t){this.Bs=t,this.Ws=new Map,this.js()}js(){let t=this.Bs;(t.startsWith("?")||t.startsWith("#"))&&(t=t.substr(1));const s=t.split("&");for(const t of s)this.Vs(t)}Vs(t){if(!t)return;if(!t.includes("="))return void this.Ws.set(t,null);const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Ws.set(i,e)}Hs(){for(const t of this.Ws)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}Us(t){return this.Ws.has(t)}qs(t){const s=this.Ws.get(t);return void 0===s?null:s}zs(){history.replaceState("",document.title,location.pathname+location.search)}Js(t){this.Bs=t,this.Ws.clear(),this.js()}},pr.Ys=new pr.$s(location.search),pr.Xs=new pr.$s(location.hash),pr.Ys.Us("perf")&&(pr.Ks=!0),"dev"!==pr.Ys.qs("mode")&&pr.Os("final")}{let mr=function(t){const s=parseFloat(t);return wr.get(s)||(s>=13?"11":"NT "+t)};GetWindowsNTVersionName=mr;const gr=self.Cs,yr="(unknown)";gr.Zs={Qs:yr,ti:yr,si:yr,ii:yr,ei:NaN,ni:yr,ri:"browser",hi:!0,oi:!1,ai:!1,li:!1,ci:async()=>{}};const wr=new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]]),Sr=navigator.userAgent,vr=navigator.userAgentData;if(vr&&vr.brands.length>0){let Mr=function(t){let s="",i="",e="",n="";for(const r of t){const t=xr.get(r.brand);!s&&t&&(s=t,i=r.version);const h=Gr.get(r.brand);!e&&h&&(e=h,n=r.version)}s||"Chromium"!==e||(gr.Zs.si="Chromium",gr.Zs.ii=n),gr.Zs.si=s||yr,gr.Zs.ii=i||yr,gr.Zs.ni=e||yr};ReadBrandList=Mr,gr.Zs.Qs=vr.platform,gr.Zs.oi=vr.mobile,gr.Zs.hi=!gr.Zs.oi;const xr=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),Gr=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);Mr(vr.brands);let Tr=!1;gr.Zs.ci=async()=>{if(!Tr)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);Mr(t.fullVersionList),"Windows"===gr.Zs.Qs?gr.Zs.ti=mr(t.platformVersion):gr.Zs.ti=t.platformVersion,Tr=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let Ir=function(t,s){const i=Array.isArray(t)?t:[t];for(const t of i){const i=t.exec(Sr);if(i){s(i);break}}};RunTest=Ir,Ir(/windows\s+nt\s+([\d\.]+)/i,t=>{gr.Zs.Qs="Windows";const s=t[1];gr.Zs.ti=mr(s)}),Ir(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{gr.Zs.Qs="macOS",gr.Zs.ti=t[1].replace(/_/g,".")}),Ir(/CrOS/,()=>{gr.Zs.Qs="Chrome OS"}),Ir(/linux|openbsd|freebsd|netbsd/i,()=>{gr.Zs.Qs="Linux"}),Ir(/android/i,()=>{gr.Zs.Qs="Android"}),Ir(/android\s+([\d\.]+)/i,t=>{gr.Zs.Qs="Android",gr.Zs.ti=t[1]}),gr.Zs.Qs===yr&&(Ir(/(iphone|ipod|ipad)/i,t=>{gr.Zs.Qs="iOS"}),Ir([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{gr.Zs.Qs="iOS",gr.Zs.ti=t[1].replace(/_/g,".")}));const Cr=/chrome\//i.test(Sr),_r=/chromium\//i.test(Sr),Er=/edg\//i.test(Sr),Pr=/OPR\//.test(Sr),Ar=/nwjs/i.test(Sr),Rr=/safari\//i.test(Sr),Or=/webkit/i.test(Sr);Er||Pr||Ir(/chrome\/([\d\.]+)/i,t=>{gr.Zs.si="Chrome",gr.Zs.ii=t[1],gr.Zs.ni="Chromium"}),Ir(/edg\/([\d\.]+)/i,t=>{gr.Zs.si="Edge",gr.Zs.ii=t[1],gr.Zs.ni="Chromium"}),Ir(/OPR\/([\d\.]+)/,t=>{gr.Zs.si="Opera",gr.Zs.ii=t[1],gr.Zs.ni="Chromium"}),Ir(/chromium\/([\d\.]+)/i,t=>{gr.Zs.si="Chromium",gr.Zs.ii=t[1],gr.Zs.ni="Chromium"}),Ir(/nwjs\/[0-9.]+/i,t=>{gr.Zs.si="NW.js",gr.Zs.ii=t[1],gr.Zs.ni="Chromium",gr.Zs.ri="nwjs"}),Ir(/firefox\/([\d\.]+)/i,t=>{gr.Zs.si="Firefox",gr.Zs.ii=t[1],gr.Zs.ni="Gecko"}),!Rr||Cr||_r||Er||Pr||Ar||(gr.Zs.si="Safari",gr.Zs.ni="WebKit",Ir(/version\/([\d\.]+)/i,t=>{gr.Zs.ii=t[1]}),Ir(/crios\/([\d\.]+)/i,t=>{gr.Zs.si="Chrome for iOS",gr.Zs.ii=t[1]}),Ir(/fxios\/([\d\.]+)/i,t=>{gr.Zs.si="Firefox for iOS",gr.Zs.ii=t[1]}),Ir(/edgios\/([\d\.]+)/i,t=>{gr.Zs.si="Edge for iOS",gr.Zs.ii=t[1]})),gr.Zs.ni===yr&&Or&&(gr.Zs.ni="WebKit"),"Android"===gr.Zs.Qs&&"Safari"===gr.Zs.si&&(gr.Zs.si="Stock");const Fr=new Set(["Windows","macOS","Linux","Chrome OS"]).has(gr.Zs.Qs)||"nwjs"===gr.Zs.ri;gr.Zs.hi=Fr,gr.Zs.oi=!Fr}"Chrome"===gr.Zs.si&&"browser"===gr.Zs.ri&&/wv\)/.test(Sr)&&(gr.Zs.ri="webview"),"nwjs"!==gr.Zs.ri&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(gr.Zs.ri="webapp"),gr.Zs.ei=parseFloat(gr.Zs.ii);const br="macOS"===gr.Zs.Qs&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2;br&&(gr.Zs.Qs="iOS",gr.Zs.ti=gr.Zs.ii,gr.Zs.hi=!1,gr.Zs.oi=!0,gr.Zs.li=!0),gr.Zs.ai="macOS"===gr.Zs.Qs||"iOS"===gr.Zs.Qs}{let Dr=function(t){return new Promise((s,i)=>{t.onsuccess=()=>s(t.result),t.onerror=()=>i(t.error)})},Lr=function(t){return new Promise((s,i)=>{t.oncomplete=()=>s(),t.onerror=()=>i(t.error),t.onabort=()=>i(t.error)})},kr=function(t,s){return zr(t,s)},Nr=function(t,s){return zr(t,s,!0)},$r=function(t){Br(t);let s=Hr.get(t);return s instanceof Promise||(s=Jr(t),Hr.set(t,s),s.catch(s=>Hr.delete(t))),s},Br=function(t){if("string"!=typeof t)throw new TypeError("expected string")},Wr=function(t,s){const i=t.objectStore(Vr).openCursor();return new Promise(t=>{const e=[];i.onsuccess=i=>{const n=i.target.result;if(n){switch(s){case"entries":e.push([n.key,n.value]);break;case"keys":e.push(n.key);break;case"values":e.push(n.value)}n.continue()}else t(e)}})};s=Dr,a=Lr,c=kr,i=Nr,l=$r,f=Br,d=Wr;const jr=2,Vr="keyvaluepairs",Hr=new Map,Ur="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,qr="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function zr(t,s,i=!1,e=!0){const n=await $r(t);try{return s(n.transaction([Vr],i?"readwrite":"readonly"))}catch(n){if(e&&"InvalidStateError"===n.name)return Hr.delete(t),zr(t,s,i,!1);throw n}}async function Jr(t){Br(t);const s=indexedDB.open(t,jr);return s.addEventListener("upgradeneeded",s=>{try{s.target.result.createObjectStore(Vr)}catch(s){console.error(`Failed to create objectstore for database ${t}`,s)}}),Dr(s)}class Yr{constructor(t){Br(t),this.name=t}async ready(){await $r(this.name)}set(t,s){return Br(t),Nr(this.name,async i=>{const e=Dr(i.objectStore(Vr).put(s,t)),n=Lr(i);await Promise.all([n,e])})}get(t){return Br(t),kr(this.name,async s=>{const i=Dr(s.objectStore(Vr).get(t)),e=Lr(s),[n,r]=await Promise.all([e,i]);return r})}delete(t){return Br(t),Nr(this.name,async s=>{const i=Dr(s.objectStore(Vr).delete(t)),e=Lr(s);await Promise.all([e,i])})}clear(){return Nr(this.name,async t=>{const s=Dr(t.objectStore(Vr).clear()),i=Lr(t);await Promise.all([i,s])})}keys(){return kr(this.name,async t=>{let s;s=qr?Dr(t.objectStore(Vr).getAllKeys()):Wr(t,"keys");const i=Lr(t),[e,n]=await Promise.all([i,s]);return n})}values(){return kr(this.name,async t=>{let s;s=Ur?Dr(t.objectStore(Vr).getAll()):Wr(t,"values");const i=Lr(t),[e,n]=await Promise.all([i,s]);return n})}entries(){return kr(this.name,async t=>{const s=Wr(t,"entries"),i=Lr(t),[e,n]=await Promise.all([i,s]);return n})}}self.fi=Yr}{let Xr=function(t){throw new Error(`"${t}" is not implemented`)},Kr=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},Zr=function(t){return"object"==typeof t?new Promise(s=>{const{port1:i,port2:e}=new MessageChannel;e.onmessage=t=>s(t.data),i.postMessage(t)}):Promise.resolve(t)};r=Xr,a=Kr,o=Zr;const Qr=self.fi,th=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];class sh{constructor(t){this.di=t,this.pi=!this.di,this.pi||"undefined"!=typeof indexedDB||(this.pi=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.mi=new Map}gi(t){if(!this.pi)for(const s of th)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.pi=!0;break}}async yi(t){const s=this.mi.get(t),i=await Zr(s);return void 0===i?null:i}async wi(t,s){s=await Zr(s),this.mi.set(t,s)}Si(t){this.mi.delete(t)}bi(){this.mi.clear()}Mi(){return Array.from(this.mi.keys())}xi(){return this.pi}Gi(){return this.mi}Ti(t){this.mi=t}async getItem(t,s){if(Kr(s),this.pi)return await this.yi(t);let i;try{i=await this.di.get(t)}catch(s){return this.gi(s),this.pi?await this.yi(t):(console.error(`Error reading '${t}' from storage, returning null: `,s),null)}return void 0===i?null:i}async setItem(t,s,i){if(Kr(i),void 0===s&&(s=null),this.pi)await this.wi(t,s);else try{await this.di.set(t,s)}catch(i){if(this.gi(i),!this.pi)throw i;await this.wi(t,s)}}async removeItem(t,s){if(Kr(s),this.pi)this.Si(t);else try{await this.di.delete(t)}catch(s){this.gi(s),this.pi?this.Si(t):console.error(`Error removing '${t}' from storage: `,s)}}async clear(t){if(Kr(t),this.pi)this.bi();else try{await this.di.clear()}catch(t){this.gi(t),this.pi?this.bi():console.error("Error clearing storage: ",t)}}async keys(t){if(Kr(t),this.pi)return this.Mi();let s=[];try{s=await this.di.keys()}catch(t){if(this.gi(t),this.pi)return this.Mi();console.error("Error getting storage keys: ",t)}return s}ready(t){return Kr(t),this.pi?Promise.resolve(!0):this.di.ready()}Ii(t){if(t.Ci)return new sh(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new Qr(s);return new sh(i)}}length(t){Xr("localforage.length()")}key(t,s){Xr("localforage.key()")}iterate(t,s){Xr("localforage.iterate()")}_i(t){Xr("localforage.setDriver()")}config(t){Xr("localforage.config()")}Ei(t){Xr("localforage.defineDriver()")}Pi(){Xr("localforage.driver()")}supports(t){Xr("localforage.supports()")}dropInstance(){Xr("localforage.dropInstance()")}}self.localforage=new sh(new Qr("localforage"))}{const ih=self.Cs;if(ih.Ai={},ih.Ai.Ri=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");return void 0!==t.animate&&void 0!==t.animate([{opacity:"0"},{opacity:"1"}],1e3).reverse}catch(t){return!1}})(),ih.Ai.Oi="undefined"!=typeof HTMLDialogElement,ih.Ai.Fi=!!self.requestIdleCallback,ih.Ai.ImageBitmap=!!self.createImageBitmap,ih.Ai.ImageBitmapOptions=!1,ih.Ai.Di=!1,ih.Ai.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{ih.Ai.ImageBitmapOptions=!0}).catch(()=>{ih.Ai.ImageBitmapOptions=!1})}catch(eh){ih.Ai.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{ih.Ai.Di=10===t.width&&10===t.height}).catch(()=>{ih.Ai.Di=!1})}catch(nh){ih.Ai.Di=!1}}if(ih.Ai.Li=!(!navigator.clipboard||!navigator.clipboard.readText),ih.Ai.ki=!(!navigator.permissions||!navigator.permissions.query),ih.Ai.Ni=!1,ih.Ai.ki){const rh={name:"clipboard-read"};navigator.permissions.query(rh).then(()=>{ih.Ai.Ni=!0}).catch(()=>{ih.Ai.Ni=!1})}ih.Ai.$i=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),ih.Ai.Bi="undefined"!=typeof Proxy,ih.Ai.Wi="undefined"!=typeof document&&void 0!==document.createElement("a").download,ih.Ai.ji="function"==typeof fetch,ih.Ai.Vi=!!(self.isSecureContext&&"Opera"!==ih.Zs.si&&navigator.storage&&navigator.storage.persist),ih.Ai.Hi=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),ih.Ai.Ui=(()=>{if("undefined"==typeof document)return!1;if("iOS"===ih.Zs.Qs)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),ih.Ai.ImageDecoder=void 0!==self.ImageDecoder,ih.Ai.zi=!!self.VideoEncoder,ih.Ai.Ji=!!self.showOpenFilePicker,ih.Ai.Yi=!!self.queryLocalFonts,ih.Ai.UserActivation=!!navigator.userActivation,ih.Ai.Xi=!1,(async()=>{let t;"undefined"==typeof document?t=new OffscreenCanvas(32,32):(t=document.createElement("canvas"),t.width=32,t.height=32);const s=t.getContext("2d");s.fillStyle="blue",s.fillRect(0,0,32,32);let i=null;try{t.convertToBlob?i=await t.convertToBlob({type:"image/webp",quality:1}):t.toBlob&&(i=await new Promise(s=>t.toBlob(s,"image/webp",1))),ih.Ai.Xi=i&&"image/webp"===i.type}catch(t){ih.Ai.Xi=!1}})()}{const hh=self.Cs;if(!String.prototype.trimStart){const oh=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(oh,"")}}if(!String.prototype.trimEnd){const ah=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(ah,"")}}if(String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(hh.Ki(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),!Array.prototype.flat){let lh=function(t,s){return t.reduce((t,i)=>s>0&&Array.isArray(i)?(Array.prototype.push.apply(t,lh(i,s-1)),t):(t.push(i),t),[])};arrayFlat=lh,Array.prototype.flat=function(t=1){return lh(this,t)}}Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((t,s)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((s,i)=>t({usage:s,quota:i}),s))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let uh=function(t){let s="Assertion failure: "+t+"\n\nStack trace:\n"+ch.Zi();console.error(s)};assertFail=uh;const ch=self.Cs;self.assert=function(t,s){t||uh(s)}}{const fh=self.Cs,dh=self.Ns;fh.Qi=function(t){return"number"==typeof t},fh.te=function(t){return fh.Qi(t)&&isFinite(t)},fh.se=function(t){if(!fh.Qi(t))throw new TypeError("expected number")},fh.ie=function(t){fh.ee(t)},fh.ne=function(t,s,i){if(!fh.Qi(t)||isNaN(t)||s>t||i<t)throw new RangeError("number outside of range")},fh.re=function(...t){for(let s of t);},fh.he=function(t){if(!fh.te(t))throw new TypeError("expected finite number")},fh.oe=function(t){fh.ee(t)},fh.ae=function(...t){for(let s of t);},fh.le=function(t){return"string"==typeof t},fh.ue=function(t){if(!fh.le(t))throw new TypeError("expected string")},fh.ce=function(t){fh.ee(t)},fh.fe=function(...t){for(let s of t);},fh.de=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},fh.pe=function(t){if(!fh.de(t))throw new TypeError("expected simple object")},fh.me=function(t){if(!fh.ee(t)&&!fh.de(t))throw new TypeError("expected simple object")},fh.ge=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},fh.ye=function(t){if(!fh.ge(t))throw new TypeError("expected object")},fh.we=function(t){fh.ee(t)},fh.Se=function(...t){for(let s of t);},fh.ve=function(t){return fh.be(t,Blob)&&"string"==typeof t.name},fh.Me=function(t){if(!fh.ve(t))throw new TypeError("expected file")},fh.xe=function(t){fh.ee(t)},fh.Ge=function(t){return Array.isArray(t)},fh.Te=function(t){if(!fh.Ge(t))throw new TypeError("expected array")},fh.Ie=function(t){fh.ee(t)},fh.Ce=function(...t){for(let s of t);},fh._e=function(t){return!(!fh.Ge(t)||t.length&&!fh.Ge(t[0]))},fh.Ee=function(t){if(!fh._e(t))throw new TypeError("expected 2d array");for(let s of t)if(!fh.Ge(s))throw new TypeError("expected 2d array")},fh.Pe=function(t){fh.ee(t)},fh.Ae=function(t){return"function"==typeof t},fh.Re=function(t,s){if(!fh.Ae(t))throw new TypeError("expected function");if(!fh.ee(s)&&t!==s)throw new TypeError("expected same function reference")},fh.Oe=function(t){fh.ee(t)},fh.Fe=function(...t){for(let s of t);},fh.De=function(t,...s){if(!fh.Ae(t))throw new TypeError("expected function");if(!s.length)throw new Error("missing comparison functions");for(let i of s)if(!fh.ee(i)&&t===i)return;throw new TypeError("expected same function reference")},fh.Le=function(...t){if(!fh.ee(t))for(let s of t);},fh.ke=function(t,s){return t instanceof s},fh.Ne=function(t,...s){for(let i of s)if(fh.ke(t,i))return!0;return!1},fh.$e=function(t,s){if(!fh.ke(t,s))throw new TypeError("unexpected type")},fh.Be=function(t,s){fh.ee(t)},fh.We=function(t,...s){for(let t of s);},fh.je=function(t,...s){if(!fh.Ne(t,...s))throw new TypeError("unexpected type")},fh.Ve=function(t,...s){if(!fh.ee(t)&&!fh.Ne(t,...s))throw new TypeError("unexpected type")},fh.He=function(t,s){for(let i of t)if(!fh.ke(i,s))return!1;return!0},fh.Ue=function(t){for(let s of t)if(!fh.te(s))return!1;return!0},fh.qe=function(t,s){for(let s of t);},fh.ze=function(t,s){if(!fh.ee(t))for(let s of t);},fh.Je=function(t,s){if(!fh.ee(t))for(let s of t);},fh.Ye=function(t,...s){for(let s of t);},fh.Xe=function(t,...s){if(!fh.ee(t))for(let s of t);},fh.Ke=function(t,s){return!(fh.ee(t)||!fh.le(t.nodeName))&&(!s||fh.Ze(t.nodeName,s))},fh.Qe=function(t,s){if(fh.ee(t)||!fh.le(t.nodeName))throw new TypeError("expected DOM node");if(s&&!fh.Ze(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},fh.tn=function(t,s){fh.ee(t)},fh.sn=function(t,s){return!(fh.ee(t)||!fh.le(t.tagName))&&(!s||fh.Ze(t.tagName,s))},fh.en=function(t,s){if(fh.ee(t)||!fh.le(t.tagName))throw new TypeError("expected HTML element");if(s&&!fh.Ze(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},fh.nn=function(t,s){fh.ee(t)},fh.rn=function(t){return fh.sn(t,"img")||fh.sn(t,"canvas")||fh.sn(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},fh.hn=function(t){if(!fh.rn(t))throw new TypeError("expected drawable")},fh.an=function(t){fh.ee(t)},fh.ln=function(t){return t instanceof ImageData||fh.rn(t)},fh.un=function(t){if(!fh.ln(t))throw new TypeError("expected drawable or image data")},fh.cn=function(t){if(!fh.ee(t)&&!fh.ln(t))throw new TypeError("expected drawable or image data")},fh.fn=function(t){return"string"==typeof t||fh.dn&&t instanceof fh.dn||t instanceof fh.pn},fh.mn=function(t){if(!fh.fn(t))throw new TypeError("expected string-like")},fh.gn=function(t){fh.ee(t)},fh.yn=function(...t){for(let s of t);},fh.wn=function(){throw new Error("must be overridden")},fh.Sn=function(){throw new Error("not yet implemented")},fh.vn=function(t){return t.constructor===function*(){}.constructor},fh.bn=function(t){if(!fh.vn(t))throw new Error("expected generator function")},fh.Mn=function(t){return"function"===t[Symbol.iterator]},fh.xn=function(t){if(!fh.Mn(t))throw new Error("expected iterable")},fh.Gn=function(t){return!fh.ee(t)},fh.ee=function(t){return null==t},fh.Tn=function(t){let s=t[0].constructor;for(let i of t)if(i.constructor!==s)return!1;return s},fh.In=function(t,s){for(let i of t)if(!(i instanceof s))return!1;return!0};const ph=Object.getPrototypeOf(Uint8Array);fh.Cn=function(t){return fh.ke(t,ph)},fh._n=function(t){},fh.En=function(t){fh.Pn(t,ph)},fh.An=function(t,...s){if(!fh.Rn(t,...s))throw new TypeError("unexpected type")},fh.Rn=function(t,...s){for(const i of s)if(fh.be(t,i))return!0;return!1},fh.Pn=function(t,s){if(!fh.be(t,s))throw new TypeError("unexpected type")},fh.be=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},dh.se=fh.se,dh.ie=fh.ie,dh.he=fh.he,dh.oe=fh.oe,dh.ue=fh.ue,dh.ce=fh.ce,dh.ye=fh.ye,dh.we=fh.we,dh.Te=fh.Te,dh.Ie=fh.Ie,dh.Re=fh.Re,dh.Oe=fh.Oe,dh.$e=fh.$e,dh.Be=fh.Be,dh.ee=fh.ee}{let mh=function(t,s){let i=vh.getType(t),e=vh.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},gh=function(t){console.warn("[Defence] "+t+" @",vh.Zi())},yh=function(){if(_h=-1,xh.size>0||Gh.size>0){let t=[...new Set([...xh.keys()].map(t=>vh.getName(t)))].join(",");console.warn(`An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${t}`),xh.clear(),Gh.clear()}},wh=function(t){let s=new Set;for(let i in t)s.add(i);return s},Sh=function(t,s){let i=wh(s),e=Eh.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);vh.On(s,[...i]),s.length&&console.warn(`[Defence] '${vh.getName(t)}' constructor creates inconsistent properties: ${s.join(", ")}`)}else Eh.set(t,i)};isValidTypeChange=mh,logDefendedObjectWarning=gh,CheckDefendedObjectsUsedCorrectly=yh,getObjectPropertySet=wh,VerifyObjectPropertiesConsistent=Sh;const vh=self.Cs,bh=new Map;let Mh;vh.Fn=function(t,s){console.log(`%c${t}`,`font-weight: bold; color:${s}`)},vh.Dn=function(t,...s){bh.has(t)||bh.set(t,-1),-1===bh.get(t)&&bh.set(t,requestAnimationFrame(()=>{console.log(`%c${t}`,"font-weight: bold",...s),bh.set(t,-1)}))},vh.Ln=function(t){performance.mark(t),Mh||(Mh=new Map),Mh.has(t)||Mh.set(t,{kn:0,total:0,Nn:0,$n:1,toString:function(){return`${t} :: current => ${this.kn.toPrecision(3)} :: average => ${this.Nn.toPrecision(3)} :: calls => ${this.$n}`}})},vh.Bn=function(t){performance.measure(`measure-${t}`,t);const s=performance.getEntriesByName(`measure-${t}`)[0],i=Mh.get(t);i.kn=s.duration,i.total+=i.kn,i.Nn=i.total/i.$n,console.log(i.toString()),i.$n++,performance.clearMarks(t),performance.clearMeasures(`measure-${t}`)},vh.Zi=function(){return(new Error).stack},vh.Wn=function(){},vh.cast=function(t,s){return t&&t instanceof s?t:null},vh.getName=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":vh.Qi(t)?"<number>":vh.le(t)?"<string>":vh.Ge(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":vh.Ae(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},vh.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},vh.range=function*(t,s){if(!isFinite(Math.abs(t-s)))throw new Error("Invalid parameters");if(t>s)for(let i=t-1;i>=s;i--)yield i;else for(let i=t;i<s;i++)yield i};let xh=new Map,Gh=new Map,Th=new WeakMap,Ih=new WeakMap;vh.jn={};const Ch=new Set(["then","splice"]);vh.jn.get=function(t,s){return s in t||"symbol"==typeof s||Ch.has(s)||gh(`Accessed missing property '${s}' from defended object '${vh.getName(t)}', returning undefined`),Ih.has(t)&&"symbol"!=typeof s&&!Ch.has(s)&&gh(`Accessed property '${s}' on a released object '${vh.getName(t)}'\nObject was originally released at: ${Ih.get(t)})\nCall stack at access: `),t[s]},vh.jn.set=function(t,s,i){return s in t||xh.has(t)||gh(`Set non-existent property '${s}' to '${i}' on defended object '${vh.getName(t)}'`),mh(t[s],i)||xh.has(t)||gh(`Set '${vh.getType(t[s])}' property '${s}' to type '${vh.getType(i)}' on defended object '${vh.getName(t)}'`),Ih.has(t)&&gh(`Set property '${s}' on a released object '${vh.getName(t)}'\nObject was originally released at: ${Ih.get(t)})\nCall stack at access: `),t[s]=i,!0},vh.jn.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${vh.getName(t)}'`)},vh.jn.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${vh.getName(t)}'`)},vh.jn.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${vh.getName(t)}'`)};let _h=-1;vh.Vn=class{constructor(){if(!vh.ks||!vh.Ai.Bi)return;let t=new.target,s=Object.create(t.prototype),i=new Proxy(s,vh.jn);return xh.set(s,i),Gh.set(i,s),Th.set(i,s),-1===_h&&(_h=requestAnimationFrame(yh)),i}},vh.Hn=function(t){if(vh.ks&&vh.Ai.Bi&&t instanceof vh.Vn){if(!Gh.has(t))return t;let s=Gh.get(t);return Gh.delete(t),xh.delete(s),t}return vh.Ls?Object.seal(t):t},vh.Un=function(t,...s){let i;try{i=new t(...s)}catch(t){throw Gh.clear(),xh.clear(),t}return vh.ks&&Sh(t,i),vh.Hn(i)},vh.qn=function(t){let s=Th.get(t);s&&Ih.set(s,vh.Zi())},vh.zn=function(t){let s=Th.get(t);return!!s&&!!Ih.get(s)};let Eh=new Map;vh.Jn=class{constructor(t){this.Yn="",t&&this.start(t)}start(t){vh.Ks&&(this.Yn=t,performance.mark(this.Yn+"-Start"))}end(){vh.Ks&&(performance.mark(this.Yn+"-End"),performance.measure(this.Yn,this.Yn+"-Start",this.Yn+"-End"))}next(t){vh.Ks&&(this.end(),this.Yn=t,performance.mark(this.Yn+"-Start"))}}}{let Ph=function(t){return 0===t&&1/t<0};isNegativeZero=Ph;const Ah=self.Cs,Rh=2*Math.PI,Oh=Math.PI/180,Fh=180/Math.PI;Ah.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0===e)return i;if(t<s){const n=i-(s-t)%e;return n===i?0:n}return s+(t-s)%e},Ah.Xn=function(t,s,i,e,n){const r=i-s;return 0===r&&0===e?t:(t-s)*(n-e)/r+e},Ah.normalize=function(t,s,i){return s-i===0?1:(t-s)/(i-s)},Ah.Kn=function(t,s,i){return t<s?s:t>i?i:t},Ah.Zn=function(t){return(t%=Rh)<0&&(t+=Rh),t},Ah.Qn=function(t){return t*Oh},Ah.tr=function(t){return t*Fh},Ah.sr=function(t,s){return Math.sqrt(t*t+s*s)},Ah.ir=function(t,s,i){return Math.sqrt(t*t+s*s+i*i)},Ah.er=function(t,s,i,e){return Ah.sr(i-t,e-s)},Ah.nr=function(t,s,i,e){const n=i-t,r=e-s;return n*n+r*r},Ah.rr=function(t,s,i,e){return Math.atan2(e-s,i-t)},Ah.hr=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),n=i*Math.sin(s)+e*Math.cos(s);return n>=1?0:n<=-1?Math.PI:Math.acos(n)},Ah.ar=function(t,s,i){let e=Math.sin(t),n=Math.cos(t),r=Math.sin(s),h=Math.cos(s);return Math.acos(e*r+n*h)>i?n*r-e*h>0?Ah.Zn(t+i):Ah.Zn(t-i):Ah.Zn(s)},Ah.lr=function(t,s){let i=Math.sin(t);return Math.cos(t)*Math.sin(s)-i*Math.cos(s)<=0},Ah.ur=function(t,s,i,e=0){let n=Ah.hr(t,s);const r=Rh*e;return Ah.lr(s,t)?Ah.Zn(t+(n+r)*i):Ah.Zn(t-(n+r)*i)},Ah.cr=function(t,s,i,e=0){const n=Ah.hr(t,s),r=Rh*e;return Ah.lr(s,t)?Ah.Zn(t+(n+r)*i):Ah.Zn(t+(Rh-n+r)*i)},Ah.dr=function(t,s,i,e=0){const n=Ah.hr(t,s),r=Rh*e;return Ah.lr(s,t)?Ah.Zn(t-(-Rh+n-r)*i):Ah.Zn(t-(n+r)*i)},Ah.pr=function(t,s){const i=Ah.hr(t,s);return Ah.lr(t,s)?Ah.Zn(s-i):Ah.Zn(s+i)},Ah.Ct=function(t,s,i){return t+i*(s-t)},Ah.mr=function(t,s,i){return t===s?0:(i-t)/(s-t)},Ah.gr=function(t,s,i,e,n){return Ah.Ct(e,n,Ah.mr(t,s,i))},Ah.yr=function(t,s,i,e){return Ah.Ct(Ah.Ct(t,s,e),Ah.Ct(s,i,e),e)},Ah.wr=function(t,s,i,e,n){return Ah.Ct(Ah.yr(t,s,i,n),Ah.yr(s,i,e,n),n)},Ah.Sr=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},Ah.vr=function(t){return t>0&&!(t-1&t)},Ah.br=function(t){--t;for(let s=1;s<32;s<<=1)t|=t>>s;return t+1},Ah.Mr=function(t,s){return Math.round(t*s)/s},Ah.Gr=function(t,s){return Math.floor(t*s)/s},Ah.Tr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},Ah.Ir=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},Ah.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;e>=0&&"0"===i.charAt(e);--e);return e>=0&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},Ah.Cr=function(t,s,i){return Ah.Kn(t,0,255)|Ah.Kn(s,0,255)<<8|Ah.Kn(i,0,255)<<16};const Dh=1024,Lh=1023,kh=16384,Nh=8191,$h=-8192;Ah._r=function(t,s,i,e){return(t=Ah.Kn(Math.floor(1024*t),-8192,8191))<0&&(t+=16384),(s=Ah.Kn(Math.floor(1024*s),-8192,8191))<0&&(s+=16384),(i=Ah.Kn(Math.floor(1024*i),-8192,8191))<0&&(i+=16384),-(16384*t*16384*1024+16384*s*1024+1024*i+(e=Ah.Kn(Math.floor(1023*e),0,1023)))},Ah.Er=function(t,s,i){return Ah._r(t,s,i,1)},Ah.Pr=function(t){if(t>=0)return(255&t)/255;{let s=Math.floor(-t/274877906944);return s>8191&&(s-=16384),s/1024}},Ah.Ar=function(t){if(t>=0)return((65280&t)>>8)/255;{let s=Math.floor(-t%274877906944/16777216);return s>8191&&(s-=16384),s/1024}},Ah.Rr=function(t){if(t>=0)return((16711680&t)>>16)/255;{let s=Math.floor(-t%16777216/1024);return s>8191&&(s-=16384),s/1024}},Ah.Or=function(t){return Ph(t)?0:t>=0?1:Math.floor(-t%1024)/1023},Ah.Fr=function(t,s){for(t=Math.floor(t),s=Math.floor(s);0!==s;){let i=s;s=t%s,t=i}return t};const Bh=[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]];Ah.Dr=function(t,s){if((t=Math.floor(t))===(s=Math.floor(s)))return[1,1];for(let i of Bh){let e=t/i[0]*i[1];if(Math.abs(s-e)<1)return i.slice(0);if(e=t/i[1]*i[0],Math.abs(s-e)<1)return[i[1],i[0]]}let i=Ah.Fr(t,s);return[t/i,s/i]},Ah.Lr=function(t,s,i,e,n,r,h,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(n,h),c=Math.max(n,h);if(l<u||a>c)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||f>m)return!1;const g=n-t+h-i,y=r-s+o-e,w=i-t,S=e-s,v=h-n,b=o-r,M=Math.abs(S*v-b*w),x=v*y-b*g;if(Math.abs(x)>M)return!1;const G=w*y-S*g;return Math.abs(G)<=M},Ah.kr=function(t,s,i,e,n,r,h,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(r<f||n>d)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||h>m)return!1;const g=a-t+u-i,y=l-s+c-e,w=i-t,S=e-s,v=u-a,b=c-l,M=Math.abs(S*v-b*w),x=v*y-b*g;if(Math.abs(x)>M)return!1;const G=w*y-S*g;return Math.abs(G)<=M},Ah.Nr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=n.$r(),u=n.Br(),c=n.Wr(),f=n.jr(),d=n.Vr(),p=n.Hr(),m=n.Ur(),g=n.qr();return Ah.kr(t,s,i,e,r,h,o,a,l,u,c,f)||Ah.kr(t,s,i,e,r,h,o,a,c,f,d,p)||Ah.kr(t,s,i,e,r,h,o,a,d,p,m,g)||Ah.kr(t,s,i,e,r,h,o,a,m,g,l,u)},Ah.zr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e);let l=0;for(let u=n.length-4;l<=u;l+=2)if(Ah.kr(t,s,i,e,r,h,o,a,n[l],n[l+1],n[l+2],n[l+3]))return!0;return Ah.kr(t,s,i,e,r,h,o,a,n[l],n[l+1],n[0],n[1])};const Wh=2,jh=1e-6;Ah.Jr=function(t,s,i,e,n,r,h,o){const a=i-t,l=o-r,u=a*l-(e-s)*(h-n);if(0===u)return 2;const c=((s-e)*(h-t)+a*(o-s))/u;return 0<c&&c<1.000001?(l*(h-t)+(n-h)*(o-s))/u:2},Ah.Yr=function(t,s,i,e,n,r,h,o,a){const l=(h-n)*a,u=(o-r)*a;return Ah.Jr(t,s,i,e,n-l,r-u,h+l,o+u)},Ah.Xr=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,w=u*f+c*d,S=1/(p*y-m*m),v=(y*g-m*w)*S,b=(p*w-m*g)*S;return v>=0&&b>=0&&v+b<=1},Ah.Kr=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,w=f*u+d*c,S=p*g-m*m,v=(g*y-m*w)/S,b=(p*w-m*y)/S;return[1-v-b,v,b]},Ah.Zr=function(t,s,i,e,n,r,h,o,a,l,u,c){return[t*e+s*h+i*l,t*n+s*o+i*u,t*r+s*a+i*c]}}{const Vh=self.Cs;let Hh=null,Uh="";if("undefined"!=typeof document){Hh=document;const Kh=document.querySelector("base");Uh=Kh&&Kh.hasAttribute("href")?Kh.getAttribute("href"):"",Uh&&(Uh.startsWith("/")&&(Uh=Uh.substr(1)),Uh.endsWith("/")||(Uh+="/"))}Vh.Qr=function(){return Uh},Vh.th=function(){if(!Hh)return"";const t=Hh.location;return Vh.sh(t.origin+t.pathname)+Uh},Vh.sh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},Vh.ih=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},Vh.eh=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},Vh.nh=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},Vh.rh=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},Vh.hh=function(t){return t.replace(/\\/g,"/")},Vh.oh=function(t,s){return s===(t?Vh.eh(t).slice(1):"")},Vh.ah=function(t,s){let i,e;return Vh.ve(t)&&(i=Vh.rh(t.name)),Vh.le(t)&&(i=Vh.rh(t)),Vh.ve(s)&&(e=Vh.rh(s.name)),Vh.le(s)&&(e=Vh.rh(s)),i===e},Vh.uh=function(t){t=Vh.hh(t);let s=/^\w\:\//.exec(t);s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=t.replace(/\/{2,}/g,"/")).length>1&&"/"===t.slice(-1)&&(t=t.slice(0,-1));const i=t.lastIndexOf("/")+1;let e,n="",r=t,h="";i>0&&(n=t.slice(0,i),r=t.slice(i)),e=r;const o=r.lastIndexOf(".");return o>0&&(h=r.slice(o),e=r.slice(0,-h.length)),{dir:n,fh:r,name:e,root:s,ext:h,dh:s+n+r}},Vh.ph=function(t,s){return new Promise((i,e)=>{self.setTimeout(i,t,s)})},Vh.mh=function(t){try{t()}catch(t){Vh.Ls&&console.warn("Swallowed exception: ",t)}},Vh.gh=function(){},Vh.Ze=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},Vh.yh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},Vh.wh=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},Vh.Sh=function(t,s){t.length=s},Vh.bh=function(t){t&&0!==t.length&&Vh.Sh(t,0)},Vh.Mh=function(t){if(t){for(let s=0;s<t.length;s++){let i=t[s];Vh.Sh(i,0)}Vh.Sh(t,0)}},Vh.xh=function(t,s,i){s|=0;const e=t.length;if(!(s<=e))for(let n=e;n<s;++n)t.push(i)},Vh.Gh=function(t,s,i){s|=0;const e=t.length;s<e?Vh.Sh(t,s):s>e&&Vh.xh(t,s,i)},Vh.Th=function(t,s){Vh.bh(t),Vh.On(t,s)},Vh.On=function(t,s){if(s.length<1e4)t.push(...s);else for(let i=0,e=s.length;i<e;++i)t.push(s[i])},Vh.Ih=function(t,s){if((s=Math.floor(s))<0||s>=t.length)return;let i=t.length-1;for(let e=s;e<i;++e)t[e]=t[e+1];Vh.Sh(t,i)},Vh.Ch=function(t,s){let i=t.indexOf(s);i>=0&&t.splice(i,1)},Vh._h=function(t,s){let i=t.length;if(s.length!==i)return!1;for(let e=0;e<i;++e)if(t[e]!==s[e])return!1;return!0},Vh.Eh=function(t,s){let i=[],e=0;for(let n=0,r=t.length;n<r;++n){let r=t[n];s(r)?i.push(r):(t[e]=r,++e)}return Vh.Sh(t,e),i},Vh.Ph=function(t,s){const i=t.length;let e=0;for(let i=0,n=t.length;i<n;++i){let n=t[i];s.has(n)||(t[e++]=n)}return Vh.Sh(t,e),i-e},Vh.Ah=function(t,s){return t===Math.floor(t)&&t>=0&&t<s.length},Vh.Rh=function(t,s){if(!Vh.Ah(t,s))throw new RangeError("array index out of bounds")},Vh.Oh=function(t){return t.slice()},Vh.Fh=function(t,s){let i=[];for(let e of t)if(Vh.ge(e)){let t=s(e);if(!t)throw new Error("missing clone");if(t.constructor!==e.constructor)throw new Error("object is not a clone");i.push(t)}else Vh.Ge(e)?i.push(Vh.Fh(e,s)):i.push(e);return i},Vh.Dh=function(t){let s=[];for(let i of t)s.push(i.slice());return s},Vh.Lh=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},Vh.kh=function(t,s,i){const e=new Set;for(const n of t.values())s(n)&&(i?e.add(i(n)):e.add(n));return e},Vh.Nh=function(t,s){return t.union?t.union(s):new Set([...t,...s])},Vh.$h=function(t,s){for(const i of s)t.add(i);return t},Vh.Bh=function(t){for(let s of t)return s;return null},Vh.xor=function(t,s){return!t!=!s},Vh.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return t>i;case 5:return t>=i;default:return!1}},Vh.Wh=function(t){for(let s in t)if(t.hasOwnProperty(s))return!0;return!1},Vh.jh=function(t,s){return t.length?new Promise((i,e)=>{const n=[];let r=0,h=!1;for(let o=0,a=t.length;o<a;++o)n.push(void 0),t[o].then(e=>{h||(n[o]=e,++r,r===t.length?i(n):s(r,t.length))}).catch(t=>{h=!0,e(t)})}):Promise.resolve([])};let qh=[];Vh.Vh=function(t){qh.push(t)},Vh.Hh=function(){let t=0;for(let s of qh)t+=s();return Math.floor(t)};let zh=1;const Jh=new Map,Yh=new MessageChannel;Yh.port2.onmessage=function(t){const s=t.data,i=Jh.get(s);Jh.delete(s),i&&i(performance.now())},Vh.Uh=function(t){const s=zh++;return Jh.set(s,t),Yh.port1.postMessage(s),s},Vh.qh=function(t){Jh.delete(t)},Vh.zh=Vh.Uh,Vh.Jh=function(){return new Promise(t=>Vh.zh(t))};const Xh=new Set;Vh.Yh=function(t){const s=self.requestAnimationFrame(async i=>{await Vh.Jh(),Xh.has(s)&&(Xh.delete(s),t(i))});return Xh.add(s),s},Vh.Xh=function(t){Xh.has(t)&&(self.cancelAnimationFrame(t),Xh.delete(t))}}{const Zh=self.Cs;Zh.Kh=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},Zh.Zh=function(t){return!Zh.Kh(t)},Zh.Qh=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} ${t.statusText}`)},Zh.so=function(t,s){return fetch(t,s).then(t=>(Zh.Qh(t),t))},Zh.io=function(t){return Zh.so(t).then(t=>t.text())},Zh.eo=function(t){return Zh.so(t).then(t=>t.json())},Zh.no=function(t){return Zh.so(t).then(t=>t.blob())},Zh.ro=function(t){return Zh.so(t).then(t=>t.arrayBuffer())},Zh.ho=function(t){return new Promise((s,i)=>{const e=new Image;e.onload=()=>s(e),e.onerror=t=>i(t),e.src=t})},Zh.oo=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsArrayBuffer(t)})},Zh.ao=function(t){return"function"==typeof t.text?t.text():new Promise((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsText(t)})},Zh.lo=function(t){return Zh.ao(t).then(t=>JSON.parse(t))},Zh.uo=async function(t,s){let i=URL.createObjectURL(t);try{const t=await Zh.ho(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof t.decode&&await t.decode(),t}finally{i&&URL.revokeObjectURL(i)}},Zh.co=function(t,s){if("undefined"!=typeof document&&"function"==typeof document.createElement){const i=document.createElement("canvas");return i.width=t,i.height=s,i}return new OffscreenCanvas(t,s)},Zh.fo=function(t,s,i){if("number"!=typeof i&&(i=1),s=s||"image/png",i=Zh.Kn(i,0,1),t.convertToBlob)return t.convertToBlob({type:s,quality:i});if(t.toBlob)return new Promise(e=>t.toBlob(e,s,i));throw new Error("could not convert canvas to blob")},Zh.do=function(t,s,i){const e=Zh.co(t.width,t.height);return e.getContext("2d").drawImage(t,0,0),Zh.fo(e,s,i)},Zh.po=function(t,s,i){if(Zh.Ai.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>Zh.do(t,s,i));if(Zh.Ai.ImageBitmap)return createImageBitmap(t).then(t=>Zh.do(t,s,i));{const e=Zh.co(t.width,t.height);return e.getContext("2d").putImageData(t,0,0),Zh.fo(e,s,i)}},Zh.mo=function(t,s){t.clear();for(const i of s)t.add(i)},Zh.yo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},Zh.wo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},Zh.So=function t(s){if("object"==typeof s&&null!==s){if(s instanceof Set)return{_c3type_:"set",data:[...s].map(s=>t(s))};if(s instanceof Map)return{_c3type_:"map",data:[...s].map(s=>[s[0],t(s[1])])};{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},Zh.vo=function t(s){if("object"==typeof s&null!==s){if("set"===s._c3type_)return new Set(s.data.map(s=>t(s)));if("map"===s._c3type_)return new Map(s.data.map(s=>[s[0],t(s[1])]));{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},Zh.bo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const n of t)"-"===n?e>0&&(i=!0):i?(s+=n.toUpperCase(),i=!1):s+=n,++e;return s},Zh.Mo=function(t){return"object"==typeof t&&"function"==typeof t.next},Zh.xo=function(t,s){const i=[];if("function"==typeof s)for(let e=0;e<t;++e)i.push(s());else for(let e=0;e<t;++e)i.push(s);return i}}{let Qh=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},to=function(t,s,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};padTwoDigits=Qh,hueToRGB=to;const so=self.Cs,io=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,eo=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;so.Go=class{constructor(t,s,i,e){this.To=NaN,this.Io=NaN,this.Co=NaN,this._o=NaN,this.To=0,this.Io=0,this.Co=0,this._o=0,t instanceof so.Go?this.set(t):this.Eo(t||0,s||0,i||0,e||0)}Po(t,s,i){return this.To=+t,this.Io=+s,this.Co=+i,this.Kn(),this}Eo(t,s,i,e){return this.To=+t,this.Io=+s,this.Co=+i,this._o=+e,this.Kn(),this}set(t){return this.To=t.To,this.Io=t.Io,this.Co=t.Co,this._o=t._o,this}S(t){return this.set(t)}add(t){this.To+=t.To,this.Io+=t.Io,this.Co+=t.Co,this._o+=t._o,this.Kn()}Ao(t,s,i,e=0){this.To+=+t,this.Io+=+s,this.Co+=+i,this._o+=+e,this.Kn()}Ro(t){this.Oo(Math.max(this.To,t.To)-Math.min(this.To,t.To)),this.Fo(Math.max(this.Io,t.Io)-Math.min(this.Io,t.Io)),this.Do(Math.max(this.Co,t.Co)-Math.min(this.Co,t.Co)),this.Lo(Math.max(this._o,t._o)-Math.min(this._o,t._o)),this.Kn()}ko(t){this.To=t.To,this.Io=t.Io,this.Co=t.Co}Oo(t){this.To=so.Kn(+t,0,1)}No(){return this.To}Fo(t){this.Io=so.Kn(+t,0,1)}$o(){return this.Io}Do(t){this.Co=so.Kn(+t,0,1)}Bo(){return this.Co}Lo(t){this._o=so.Kn(+t,0,1)}Wo(){return this._o}clone(){return so.Un(so.Go,this.To,this.Io,this.Co,this._o)}toArray(){return[this.To,this.Io,this.Co,this._o]}jo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.To,t[s++]=this.Io,t[s++]=this.Co,t[s]=this._o}Ho(t,s){const i=this.To,e=this.Io,n=this.Co,r=this._o;for(let h=0;h<4;++h)t[s++]=i,t[s++]=e,t[s++]=n,t[s++]=r}Uo(t,s){t[s++]=this.To,t[s++]=this.Io,t[s]=this.Co}equals(t){return this.To===t.To&&this.Io===t.Io&&this.Co===t.Co&&this._o===t._o}qo(t){return this.To===t.To&&this.Io===t.Io&&this.Co===t.Co}zo(t,s,i){return this.To===t&&this.Io===s&&this.Co===i}Jo(t,s,i,e){return this.To===t&&this.Io===s&&this.Co===i&&this._o===e}Yo(t,s){return t[s]===Math.fround(this.To)&&t[s+1]===Math.fround(this.Io)&&t[s+2]===Math.fround(this.Co)&&t[s+3]===Math.fround(this._o)}Xo(t,s){return t[s]===Math.fround(this.To)&&t[s+1]===Math.fround(this.Io)&&t[s+2]===Math.fround(this.Co)}multiply(t){this.To*=t.To,this.Io*=t.Io,this.Co*=t.Co,this._o*=t._o}Ko(t){this.To*=t,this.Io*=t,this.Co*=t,this._o*=t}Zo(){return this.To*=this._o,this.Io*=this._o,this.Co*=this._o,this}Qo(){return this.To/=this._o,this.Io/=this._o,this.Co/=this._o,this}Kn(){return this.To=so.Kn(this.To,0,1),this.Io=so.Kn(this.Io,0,1),this.Co=so.Kn(this.Co,0,1),this._o=so.Kn(this._o,0,1),this}ta(t){this.To=so.Pr(t),this.Io=so.Ar(t),this.Co=so.Rr(t),this._o=so.Or(t)}sa(t,s,i){return`rgb(${100*(so.te(t)?t:this.No())}%, ${100*(so.te(s)?s:this.$o())}%, ${100*(so.te(i)?i:this.Bo())}%)`}ia(t,s,i,e){return`rgba(${100*(so.te(t)?t:this.No())}%, ${100*(so.te(s)?s:this.$o())}%, ${100*(so.te(i)?i:this.Bo())}%, ${so.te(e)?e:this.Wo()})`}ea(){const t=Math.round(255*this.No()),s=Math.round(255*this.$o()),i=Math.round(255*this.Bo());return"#"+Qh(t.toString(16))+Qh(s.toString(16))+Qh(i.toString(16))}na(t){if("string"!=typeof t)return!1;let s,i,e;if("#"===(t=t.trim()).charAt(0)&&(t=t.substr(1)),3===t.length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Oo(s),isFinite(i)&&this.Fo(i),isFinite(e)&&this.Do(e),this.Lo(1),!0}ra(){return`${Math.round(255*this.No())}, ${Math.round(255*this.$o())}, ${Math.round(255*this.Bo())}`}ha(){return[Math.round(255*this.No()),Math.round(255*this.$o()),Math.round(255*this.Bo())]}oa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Do(n),this.Lo(1),!0}aa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Do(n),this.Lo(1),!0}la(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Do(n),isFinite(r)&&this.Lo(r),!0}ua(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Do(n),isFinite(r)&&this.Lo(r),!0}ca(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.aa(t):this.oa(t);if(t.startsWith("rgba("))return t.includes("%")?this.ua(t):this.la(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.fa(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.aa(t):4===s.length&&this.ua(t):3===s.length?this.oa(t):4===s.length&&this.la(t)}}return this.na(t)}toJSON(){return[this.To,this.Io,this.Co,this._o]}da(t,s,i,e){let n,r,h;if(t%=360,s=so.Kn(s,0,100),i=so.Kn(i,0,100),e=so.Kn(e,0,1),t/=360,i/=100,0==(s/=100))n=r=h=i;else{const e=i<.5?i*(1+s):i+s-i*s,o=2*i-e;n=to(o,e,t+1/3),r=to(o,e,t),h=to(o,e,t-1/3)}return this.Oo(n),this.Fo(r),this.Do(h),this.Lo(e),this}fa(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=io.exec(s),e=eo.exec(s);return i&&4===i.length?(this.da(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.da(+i[1],+i[2],+i[3],+i[4]),0))}pa(){const t=this.To,s=this.Io,i=this.Co,e=this._o;return`hsla(${so.Go.ma(t,s,i)}, ${so.Go.ga(t,s,i)}%, ${so.Go.ya(t,s,i)}%, ${e})`}wa(){const t=this.To,s=this.Io,i=this.Co;return[so.Go.ma(t,s,i),so.Go.ga(t,s,i),so.Go.ya(t,s,i),this._o]}Sa(t){Array.isArray(t)&&(t.length<3||(this.To=t[0],this.Io=t[1],this.Co=t[2],t.length>=4?this._o=t[3]:this._o=1))}set r(t){this.Oo(t)}get r(){return this.No()}set g(t){this.Fo(t)}get g(){return this.$o()}set b(t){this.Do(t)}get b(){return this.Bo()}set a(t){this.Lo(t)}get a(){return this.Wo()}va(t,s){switch(t){case 0:this.Oo(s);break;case 1:this.Fo(s);break;case 2:this.Do(s);break;case 3:this.Lo(s);break;default:throw new RangeError("invalid color index")}}ba(t){switch(t){case 0:return this.No();case 1:return this.$o();case 2:return this.Bo();case 3:return this.Wo();default:throw new RangeError("invalid color index")}}static Ma(t,s){let i,e;if(Array.isArray(t))i=new so.Go,i.Sa(t);else{if(!(t instanceof so.Go))throw new Error("unexpected type");i=t}if(Array.isArray(s))e=new so.Go,e.Sa(s);else{if(!(s instanceof so.Go))throw new Error("unexpected type");e=s}return i.equals(e)}static xa(t,s){return so.Kn(Math.max(t,s)-Math.min(t,s),0,1)}static Ga(t,s){const i=new so.Go;return i.Oo(Math.max(t.To,s.To)-Math.min(t.To,s.To)),i.Fo(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),i.Do(Math.max(t.Co,s.Co)-Math.min(t.Co,s.Co)),i.Lo(Math.max(t._o,s._o)-Math.min(t._o,s._o)),i}static Ta(t,s){const i=new so.Go(0,0,0,1);return i.Oo(Math.max(t.To,s.To)-Math.min(t.To,s.To)),i.Fo(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),i.Do(Math.max(t.Co,s.Co)-Math.min(t.Co,s.Co)),i}static ma(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;let r=0;switch(e){case t:r=(s-i)/(e-n)+(s<i?6:0);break;case s:r=(i-t)/(e-n)+2;break;case i:r=(t-s)/(e-n)+4}return Math.round(r/6*360)}static ga(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;const r=e-n,h=(e+n)/2>.5?r/(2-e-n):r/(e+n);return Math.round(100*h)}static ya(t,s,i){const e=Math.max(t,s,i),n=(e+Math.min(t,s,i))/2;return e?Math.round(100*n):0}},so.Go.Ia=Object.freeze(so.Un(so.Go,1,1,1,1)),so.Go.Ca=Object.freeze(so.Un(so.Go,0,0,0,1)),so.Go._a=Object.freeze(so.Un(so.Go,0,0,0,0))}{const no=self.Cs;no.Ea=class{constructor(t,s){this.Pa=0,this.Aa=0,t instanceof no.Ea?this.S(t):this.set(t||0,s||0)}set(t,s){this.Pa=+t,this.Aa=+s}S(t){this.Pa=t.Pa,this.Aa=t.Aa}equals(t){return this.Pa===t.Pa&&this.Aa===t.Aa}Ra(t,s){return this.Pa===t&&this.Aa===s}Yo(t,s){return t[s]===Math.fround(this.Pa)&&t[s+1]===Math.fround(this.Aa)}Oa(t){this.Pa=+t}Fa(){return this.Pa}Da(t){this.Aa=+t}La(){return this.Aa}toArray(){return[this.Pa,this.Aa]}jo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.Pa,t[s]=this.Aa}offset(t,s){this.Pa+=+t,this.Aa+=+s}scale(t,s){this.Pa*=t,this.Aa*=s}St(t,s){this.Pa/=t,this.Aa/=s}round(){this.Pa=Math.round(this.Pa),this.Aa=Math.round(this.Aa)}floor(){this.Pa=Math.floor(this.Pa),this.Aa=Math.floor(this.Aa)}ceil(){this.Pa=Math.ceil(this.Pa),this.Aa=Math.ceil(this.Aa)}angle(){return no.rr(0,0,this.Pa,this.Aa)}ka(){return this.Pa*this.Pa+this.Aa*this.Aa}length(){return no.sr(this.Pa,this.Aa)}Na(t,s){const i=this.Pa*s-this.Aa*t;this.Aa=this.Aa*s+this.Pa*t,this.Pa=i}rotate(t){0!==t&&this.Na(Math.sin(t),Math.cos(t))}$a(t,s,i){0===t||s===this.Pa&&i===this.Aa||(this.Pa-=s,this.Aa-=i,this.Na(Math.sin(t),Math.cos(t)),this.Pa+=+s,this.Aa+=+i)}move(t,s){0!==s&&(this.Pa+=Math.cos(t)*s,this.Aa+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Pa/=t,this.Aa/=t)}Kn(t,s){this.Pa=no.Kn(this.Pa,t,s),this.Aa=no.Kn(this.Aa,t,s)}Tt(t){return this.Pa*t.Pa+this.Aa*t.Aa}reverse(){this.Pa=-this.Pa,this.Aa=-this.Aa}Ba(){let t=this.Pa;return this.Pa=this.Aa,this.Aa=-t,this}}}{const ro=self.Cs;ro.Rect=class{constructor(t,s,i,e){this.Wa=NaN,this.ja=NaN,this.Va=NaN,this.Ha=NaN,this.Wa=0,this.ja=0,this.Va=0,this.Ha=0,t instanceof ro.Rect?this.S(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.Wa=+t,this.ja=+s,this.Va=+i,this.Ha=+e}Ua(t,s,i,e){t=+t,s=+s,this.Wa=t,this.ja=s,this.Va=t+ +i,this.Ha=s+ +e}S(t){this.Wa=+t.Wa,this.ja=+t.ja,this.Va=+t.Va,this.Ha=+t.Ha}clone(){return new ro.Rect(this.Wa,this.ja,this.Va,this.Ha)}static qa(t,s){const i=new ro.Rect;return i.za(Math.min(t.Wa,s.Wa)),i.Ja(Math.min(t.ja,s.ja)),i.Ya(Math.max(t.Va,s.Va)),i.Xa(Math.max(t.Ha,s.Ha)),i}static Ka(t){return new ro.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.Wa===t.Wa&&this.ja===t.ja&&this.Va===t.Va&&this.Ha===t.Ha}Za(t,s,i,e){return this.Wa===t&&this.ja===s&&this.width()===i&&this.height()===e}Yo(t,s){return t[s]===Math.fround(this.Wa)&&t[s+1]===Math.fround(this.ja)&&t[s+2]===Math.fround(this.Va)&&t[s+3]===Math.fround(this.Ha)}za(t){this.Wa=+t}Qa(){return this.Wa}Ja(t){this.ja=+t}tl(){return this.ja}Ya(t){this.Va=+t}sl(){return this.Va}Xa(t){this.Ha=+t}il(){return this.Ha}toArray(){return[this.Wa,this.ja,this.Va,this.Ha]}jo(){return new Float64Array(this.toArray())}el(){return new DOMRect(this.Wa,this.ja,this.width(),this.height())}static nl(t){return ro.Un(ro.Rect,t.left,t.top,t.right,t.bottom)}Vo(t,s){t[s++]=this.Wa,t[s++]=this.ja,t[s++]=this.Va,t[s]=this.Ha}rl(t,s){t[s++]=this.Wa,t[s++]=this.ja,t[s++]=this.Va,t[s++]=this.ja,t[s++]=this.Va,t[s++]=this.Ha,t[s++]=this.Wa,t[s]=this.Ha}hl(t,s,i){t[s++]=this.Wa,t[s++]=this.ja,t[s++]=i,t[s++]=this.Va,t[s++]=this.ja,t[s++]=i,t[s++]=this.Va,t[s++]=this.Ha,t[s++]=i,t[s++]=this.Wa,t[s++]=this.Ha,t[s]=i}width(){return this.Va-this.Wa}height(){return this.Ha-this.ja}ol(){return(this.Wa+this.Va)/2}al(){return(this.ja+this.Ha)/2}offset(t,s){t=+t,s=+s,this.Wa+=t,this.ja+=s,this.Va+=t,this.Ha+=s}offsetLeft(t){this.Wa+=+t}offsetTop(t){this.ja+=+t}ll(t){this.Va+=+t}ul(t){this.Ha+=+t}cl(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.ja<this.Ha?this.Wa<this.Va?this.Ha=this.ja+this.width():this.Ha=this.ja-this.width():this.Wa<this.Va?this.Ha=this.ja-this.width():this.Ha=this.ja+this.width()}fl(t,s){t=+t,s=+s,this.Wa-=t,this.ja-=s,this.Va+=t,this.Ha+=s}dl(t,s){t=+t,s=+s,this.Wa+=t,this.ja+=s,this.Va-=t,this.Ha-=s}multiply(t,s){this.Wa*=t,this.ja*=s,this.Va*=t,this.Ha*=s}St(t,s){this.Wa/=t,this.ja/=s,this.Va/=t,this.Ha/=s}pl(t){this.Wa=+t-this.Wa,this.Va=+t-this.Va}ml(t){this.ja=+t-this.ja,this.Ha=+t-this.Ha}gl(t,s){const i=this.width(),e=this.height(),n=this.Qa()+i*t,r=this.tl()+e*s;this.Ua(n-e*s,r-i*t,e,i)}yl(){const t=this.Wa;this.Wa=this.Va,this.Va=t}wl(){const t=this.ja;this.ja=this.Ha,this.Ha=t}Sl(t){const s=this.ja;this.ja=+t-this.Ha,this.Ha=+t-s}round(){this.Wa=Math.round(this.Wa),this.ja=Math.round(this.ja),this.Va=Math.round(this.Va),this.Ha=Math.round(this.Ha)}vl(){this.Wa=Math.ceil(this.Wa),this.ja=Math.ceil(this.ja),this.Va=Math.floor(this.Va),this.Ha=Math.floor(this.Ha)}bl(){this.Wa=Math.floor(this.Wa),this.ja=Math.floor(this.ja),this.Va=Math.ceil(this.Va),this.Ha=Math.ceil(this.Ha)}floor(){this.Wa=Math.floor(this.Wa),this.ja=Math.floor(this.ja),this.Va=Math.floor(this.Va),this.Ha=Math.floor(this.Ha)}ceil(){this.Wa=Math.ceil(this.Wa),this.ja=Math.ceil(this.ja),this.Va=Math.ceil(this.Va),this.Ha=Math.ceil(this.Ha)}Kn(t,s,i,e){this.Wa=Math.max(this.Wa,+t),this.ja=Math.max(this.ja,+s),this.Va=Math.min(this.Va,+i),this.Ha=Math.min(this.Ha,+e)}Ml(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.Wa=ro.Kn(this.Wa,t,i),this.ja=ro.Kn(this.ja,s,e),this.Va=ro.Kn(this.Va,t,i),this.Ha=ro.Kn(this.Ha,s,e)}normalize(){this.Wa>this.Va&&this.yl(),this.ja>this.Ha&&this.wl()}xl(t){return!(t.Va<this.Wa||t.Ha<this.ja||t.Wa>this.Va||t.ja>this.Ha)}Gl(t,s,i){return!(t.Va+s<this.Wa||t.Ha+i<this.ja||t.Wa+s>this.Va||t.ja+i>this.Ha)}Tl(t,s){return t>=this.Wa&&t<=this.Va&&s>=this.ja&&s<=this.Ha}Il(t){return t.Wa>=this.Wa&&t.ja>=this.ja&&t.Va<=this.Va&&t.Ha<=this.Ha}Cl(t){t.Wa<this.Wa&&(this.Wa=+t.Wa),t.ja<this.ja&&(this.ja=+t.ja),t.Va>this.Va&&(this.Va=+t.Va),t.Ha>this.Ha&&(this.Ha=+t.Ha)}_l(t){this.Wa=ro.Ct(t.Wa,t.Va,this.Wa),this.ja=ro.Ct(t.ja,t.Ha,this.ja),this.Va=ro.Ct(t.Wa,t.Va,this.Va),this.Ha=ro.Ct(t.ja,t.Ha,this.Ha)}}}{const ho=self.Cs;ho.El=class{constructor(t,s,i,e,n,r,h,o){this.Pl=NaN,this.Al=NaN,this.Rl=NaN,this.Ol=NaN,this.Fl=NaN,this.Dl=NaN,this.Ll=NaN,this.kl=NaN,this.Pl=0,this.Al=0,this.Rl=0,this.Ol=0,this.Fl=0,this.Dl=0,this.Ll=0,this.kl=0,t instanceof ho.El?this.S(t):this.set(t||0,s||0,i||0,e||0,n||0,r||0,h||0,o||0)}set(t,s,i,e,n,r,h,o){this.Pl=+t,this.Al=+s,this.Rl=+i,this.Ol=+e,this.Fl=+n,this.Dl=+r,this.Ll=+h,this.kl=+o}Nl(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}S(t){this.Pl=t.Pl,this.Al=t.Al,this.Rl=t.Rl,this.Ol=t.Ol,this.Fl=t.Fl,this.Dl=t.Dl,this.Ll=t.Ll,this.kl=t.kl}equals(t){return this.Pl===t.Pl&&this.Al===t.Al&&this.Rl===t.Rl&&this.Ol===t.Ol&&this.Fl===t.Fl&&this.Dl===t.Dl&&this.Ll===t.Ll&&this.kl===t.kl}$l(t){this.Pl=+t}$r(){return this.Pl}Bl(t){this.Al=+t}Br(){return this.Al}Wl(t){this.Rl=+t}Wr(){return this.Rl}jl(t){this.Ol=+t}jr(){return this.Ol}Vl(t){this.Fl=+t}Vr(){return this.Fl}Hl(t){this.Dl=+t}Hr(){return this.Dl}Ul(t){this.Ll=+t}Ur(){return this.Ll}ql(t){this.kl=+t}qr(){return this.kl}zl(){return new DOMQuad(new DOMPoint(this.Pl,this.Al),new DOMPoint(this.Rl,this.Ol),new DOMPoint(this.Fl,this.Dl),new DOMPoint(this.Ll,this.kl))}static Jl(t){return ho.Un(ho.El,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Pl,this.Al,this.Rl,this.Ol,this.Fl,this.Dl,this.Ll,this.kl]}jo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.Pl,t[s++]=this.Al,t[s++]=this.Rl,t[s++]=this.Ol,t[s++]=this.Fl,t[s++]=this.Dl,t[s++]=this.Ll,t[s]=this.kl}Yl(t,s,i){t[s++]=this.Pl,t[s++]=this.Al,t[s++]=i,t[s++]=this.Rl,t[s++]=this.Ol,t[s++]=i,t[s++]=this.Fl,t[s++]=this.Dl,t[s++]=i,t[s++]=this.Ll,t[s++]=this.kl,t[s]=i}offset(t,s){t=+t,s=+s,this.Pl+=t,this.Al+=s,this.Rl+=t,this.Ol+=s,this.Fl+=t,this.Dl+=s,this.Ll+=t,this.kl+=s}round(){this.Pl=Math.round(this.Pl),this.Al=Math.round(this.Al),this.Rl=Math.round(this.Rl),this.Ol=Math.round(this.Ol),this.Fl=Math.round(this.Fl),this.Dl=Math.round(this.Dl),this.Ll=Math.round(this.Ll),this.kl=Math.round(this.kl)}floor(){this.Pl=Math.floor(this.Pl),this.Al=Math.floor(this.Al),this.Rl=Math.floor(this.Rl),this.Ol=Math.floor(this.Ol),this.Fl=Math.floor(this.Fl),this.Dl=Math.floor(this.Dl),this.Ll=Math.floor(this.Ll),this.kl=Math.floor(this.kl)}ceil(){this.Pl=Math.ceil(this.Pl),this.Al=Math.ceil(this.Al),this.Rl=Math.ceil(this.Rl),this.Ol=Math.ceil(this.Ol),this.Fl=Math.ceil(this.Fl),this.Dl=Math.ceil(this.Dl),this.Ll=Math.ceil(this.Ll),this.kl=Math.ceil(this.kl)}Xl(t){this.Pl=t.Wa,this.Al=t.ja,this.Rl=t.Va,this.Ol=t.ja,this.Fl=t.Va,this.Dl=t.Ha,this.Ll=t.Wa,this.kl=t.Ha}Kl(t,s){0===s?this.Xl(t):this.Zl(t,Math.sin(s),Math.cos(s))}Zl(t,s,i){const e=t.Wa*s,n=t.ja*s,r=t.Va*s,h=t.Ha*s,o=t.Wa*i,a=t.ja*i,l=t.Va*i,u=t.Ha*i;this.Pl=o-n,this.Al=a+e,this.Rl=l-n,this.Ol=a+r,this.Fl=l-h,this.Dl=u+r,this.Ll=o-h,this.kl=u+e}Ql(t){t.set(Math.min(this.Pl,this.Rl,this.Fl,this.Ll),Math.min(this.Al,this.Ol,this.Dl,this.kl),Math.max(this.Pl,this.Rl,this.Fl,this.Ll),Math.max(this.Al,this.Ol,this.Dl,this.kl))}Tl(t,s){let i=this.Rl-this.Pl,e=this.Ol-this.Al;const n=this.Fl-this.Pl,r=this.Dl-this.Al,h=t-this.Pl,o=s-this.Al;let a=i*i+e*e,l=i*n+e*r,u=i*h+e*o;const c=n*n+r*r,f=n*h+r*o;let d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return p>=0&&m>0&&p+m<1||(i=this.Ll-this.Pl,e=this.kl-this.Al,a=i*i+e*e,l=i*n+e*r,u=i*h+e*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d,p>=0&&m>0&&p+m<1)}ol(){return(this.Pl+this.Rl+this.Fl+this.Ll)/4}al(){return(this.Al+this.Ol+this.Dl+this.kl)/4}tu(t,s,i,e){return!(!this.Tl(t,s)&&!this.Tl(i,e))||ho.Nr(t,s,i,e,this)}su(t){let s=t.ol(),i=t.al();if(this.Tl(s,i))return!0;if(s=this.ol(),i=this.al(),t.Tl(s,i))return!0;const e=this.Pl,n=this.Al,r=this.Rl,h=this.Ol,o=this.Fl,a=this.Dl,l=this.Ll,u=this.kl;return ho.Nr(e,n,r,h,t)||ho.Nr(r,h,o,a,t)||ho.Nr(o,a,l,u,t)||ho.Nr(l,u,e,n,t)}iu(){const t=this.Pl,s=this.Al;this.Pl=this.Rl,this.Al=this.Ol,this.Rl=this.Fl,this.Ol=this.Dl,this.Fl=this.Ll,this.Dl=this.kl,this.Ll=t,this.kl=s}eu(){this.nu(0,2),this.nu(1,3),this.nu(6,4),this.nu(7,5)}ru(){this.nu(0,6),this.nu(1,7),this.nu(2,4),this.nu(3,5)}hu(){this.nu(2,6),this.nu(3,7)}nu(t,s){const i=this.ou(t);this.au(t,this.ou(s)),this.au(s,i)}ou(t){switch(t){case 0:return this.Pl;case 1:return this.Al;case 2:return this.Rl;case 3:return this.Ol;case 4:return this.Fl;case 5:return this.Dl;case 6:return this.Ll;case 7:return this.kl;default:throw new RangeError("invalid quad point index")}}au(t,s){switch(s=+s,t){case 0:this.Pl=s;break;case 1:this.Al=s;break;case 2:this.Rl=s;break;case 3:this.Ol=s;break;case 4:this.Fl=s;break;case 5:this.Dl=s;break;case 6:this.Ll=s;break;case 7:this.kl=s;break;default:throw new RangeError("invalid quad point index")}}St(t,s){this.Pl/=t,this.Al/=s,this.Rl/=t,this.Ol/=s,this.Fl/=t,this.Dl/=s,this.Ll/=t,this.kl/=s}}}{const oo=self.Cs,ao=self.assert,lo=[0,0,1,0,1,1,0,1],uo=oo.Un(oo.El);oo.lu=class extends oo.Vn{constructor(t,s=!0){super(),t||(t=lo),this.uu=Float64Array.from(t),this.cu=new oo.Rect,this.fu=!0,this.du=s}qn(){}pu(){return this.uu}mu(){return this.uu.length/2}gu(t){this.uu.length===t.length?this.uu.set(t):this.uu=Float64Array.from(t),this.fu=!0}yu(){this.gu(lo)}S(t){this.gu(t.uu)}wu(){this.fu=!0}Su(){if(!this.fu)return;const t=this.uu;let s=t[0],i=t[1],e=s,n=i;for(let r=0,h=t.length;r<h;r+=2){const h=t[r],o=t[r+1];h<s&&(s=h),h>e&&(e=h),o<i&&(i=o),o>n&&(n=o)}this.cu.set(s,i,e,n),this.fu=!1}Xl(t,s,i){let e=this.uu;8!==e.length&&(e=new Float64Array(8),this.uu=e),e[0]=t.Qa()-s,e[1]=t.tl()-i,e[2]=t.sl()-s,e[3]=t.tl()-i,e[4]=t.sl()-s,e[5]=t.il()-i,e[6]=t.Qa()-s,e[7]=t.il()-i,this.cu.S(t),0===s&&0===i||this.cu.offset(-s,-i),this.fu=!1}vu(t,s,i){uo.S(t),uo.offset(s,i),this.gu(uo.toArray()),this.fu=!0}transform(t,s,i){let e=0,n=1;0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.bu(t,s,e,n)}bu(t,s,i,e){const n=this.uu;for(let r=0,h=n.length;r<h;r+=2){const h=r+1,o=n[r]*t,a=n[h]*s;n[r]=o*e-a*i,n[h]=a*e+o*i}this.fu=!0}offset(t,s){const i=this.uu;for(let e=0,n=i.length;e<n;e+=2)i[e]+=t,i[e+1]+=s}Tl(t,s){const i=this.uu;if(t===i[0]&&s===i[1])return!0;this.Su();const e=this.cu,n=e.Qa()-110,r=e.tl()-101,h=e.sl()+131,o=e.il()+120;let a=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0;n<t?(a=n,u=t):(a=t,u=n),r<s?(l=r,c=s):(l=s,c=r),h<t?(f=h,p=t):(f=t,p=h),o<s?(d=o,m=s):(d=s,m=o);let g=0,y=0;for(let e=0,w=i.length;e<w;e+=2){const S=(e+2)%w,v=i[e],b=i[e+1],M=i[S],x=i[S+1];oo.kr(n,r,t,s,a,u,l,c,v,b,M,x)&&++g,oo.kr(h,o,t,s,f,p,d,m,v,b,M,x)&&++y}return g%2==1||y%2==1}Mu(t,s,i){const e=t.uu,n=this.uu;if(this.Tl(e[0]+s,e[1]+i))return!0;if(t.Tl(n[0]-s,n[1]-i))return!0;for(let t=0,r=n.length;t<r;t+=2){const h=(t+2)%r,o=n[t],a=n[t+1],l=n[h],u=n[h+1];let c=0,f=0,d=0,p=0;o<l?(c=o,d=l):(c=l,d=o),a<u?(f=a,p=u):(f=u,p=a);for(let t=0,n=e.length;t<n;t+=2){const r=(t+2)%n,h=e[t]+s,m=e[t+1]+i,g=e[r]+s,y=e[r+1]+i;if(oo.kr(o,a,l,u,c,d,f,p,h,m,g,y))return!0}}return!1}tu(t,s,i,e,n,r){if(this.Tl(i-t,e-s))return!0;if(this.Tl(n-t,r-s))return!0;let h=0,o=0,a=0,l=0;i<n?(h=i,a=n):(h=n,a=i),e<r?(o=e,l=r):(o=r,l=e);const u=this.uu;for(let c=0,f=u.length;c<f;c+=2){const d=(c+2)%f,p=u[c]+t,m=u[c+1]+s,g=u[d]+t,y=u[d+1]+s;if(oo.kr(i,e,n,r,h,a,o,l,p,m,g,y))return!0}return!1}eu(t){const s=this.uu;for(let i=0,e=s.length;i<e;i+=2)s[i]=2*t-s[i];this.fu=!0}ru(t){const s=this.uu;for(let i=0,e=s.length;i<e;i+=2){const e=i+1;s[e]=2*t-s[e]}this.fu=!0}hu(){const t=this.uu;for(let s=0,i=t.length;s<i;s+=2){const i=s+1,e=t[s];t[s]=t[i],t[i]=e}this.fu=!0}xu(){const t=this.uu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i];return s/this.mu()}Gu(){const t=this.uu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i+1];return s/this.mu()}Tu(){return this.uu}Iu(){return this.mu()}Cu(){return this.du}}}{const co=self.Cs;co._u=class extends co.Vn{constructor(t){if(super(),this.Eu=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}qn(){this.Pu(),this.Eu=null}Au(){return 0===this.Eu.size}Pu(){const t=this.Eu;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){const e=this.Eu;let n=e.get(t);n||(n=new Map,e.set(t,n)),n.set(s,i)}qs(t,s){const i=this.Eu.get(t);return i?i.get(s):i}Us(t,s){const i=this.Eu.get(t);return!!i&&i.has(s)}Ru(t,s){const i=this.Eu,e=i.get(t);if(!e)return!1;const n=e.delete(s);return n&&0===e.size&&i.delete(t),n}Ou(t){const s=this.Eu,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[i,e]of s.entries())e.delete(t)&&0===e.size&&s.delete(i)}Fu(){let t=0;for(const s of this.Eu.values())t+=s.size;return t}*values(){for(const t of this.Eu.values())yield*t.values()}*Du(){for(const[t,s]of this.Eu.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.Eu.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const fo=self.Cs;fo.Lu=class extends fo.Vn{constructor(){super(),this.ku=new Set,this.Nu=[],this.$u=!1}qn(){this.Pu()}Pu(){this.ku.clear(),fo.bh(this.Nu),this.$u=!1}Bu(t){this.ku.has(t)||(this.ku.add(t),this.$u||this.Nu.push(t))}Us(t){return this.ku.has(t)}Ru(t){this.ku.delete(t)&&(this.$u=!0)}Fu(){return this.ku.size}Au(){return 0===this.ku.size}Wu(){return this.$u&&(this.ju(),this.$u=!1),this.Nu}ju(){const t=this.Nu;fo.bh(t);for(const s of this.ku)t.push(s)}}}{const po=self.Cs,mo=new Map,go=new Map,yo=new Map,wo=new Map,So=new Map,vo=new Map,bo=new Map,Mo=new Map,xo=new Map;xo.set("linear","noease"),xo.set("default","noease");const Go=["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"],To=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Io=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]);self.Vu=class t{constructor(){}static Hu(){return"default"}static Uu(){return"noease"}static qu(t){return Io.get(t)}static zu(s,...i){let e,n;this.Ju(),s?(yo.has(s)||yo.set(s,new Map),e=yo.get(s),n=[...e.keys()].filter(i=>!t.Yu(i,s)||t.Yu(i,s).transition.Xu())):(e=So,n=[...e.keys()]);const r=n.sort();return[...go.keys()].concat(r).filter(t=>!i.includes(t))}static Ku(){this.Ju();const t=[...So.keys()];return t.sort(),[...go.keys()].concat(t)}static Zu(){this.Ju();const t=[...So.keys()];return t.sort(),t}static Qu(t){for(const s of Go)if(self.lang(`ui.bars.timeline.eases.${s}`)===t)return!0;for(const s of To)if(self.lang(`ui.bars.timeline.short-eases.${s}`)===t)return!0}static tc(t){return this.Ju(),[...go.keys()].includes(t)}static sc(s){const i=xo.get(s);return i?mo.get(i):t.tc(s)?mo.get(s):bo.has(s)?bo.get(s):void 0}static ec(t){return this.Ju(),Mo.get(t)}static nc(s,i){this.Ju();const e=t.sc(s);if(e)return e;if(!i)throw new Error("missing ease function");return yo.get(i).get(s)}static Yu(t,s){this.Ju();const i=wo.get(s);if(i)return i.get(t)}static rc(s,i){return this.Ju(),!!t.sc(s)||!!yo.get(i).get(s)}static hc(s){this.Ju();return t.sc(s)||So.get(s)}static oc(t){return this.Ju(),vo.get(t)}static ac(t){return this.Ju(),this.Ku()[t]}static lc(t,s){return this.Ju(),this.zu(s).indexOf(t)}static uc(t){return this.lc(t)}static Ju(){0===mo.size&&(this.cc("default",()=>{}),this.cc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.cc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.cc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.cc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.cc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.cc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.cc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.cc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.cc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.cc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.cc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.cc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.cc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.cc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.cc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.cc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.cc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.cc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.cc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.cc("easeinquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.cc("easeoutquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.cc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.cc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.cc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.cc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.cc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.cc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.cc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.cc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.cc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.cc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.fc("cubicbezier",this.dc),this.fc("spline",this.mc))}static cc(s,i,e=!1){if("function"==typeof i)t.yc(s,i,"predefined");else{if(!po.Ge(i))throw new Error("unexpected arguments");if(self.wc){const n=po.Un(self.wc,s,e);n.Sc(i),t.yc(s,(t,s,i,e)=>n.vc(t,s,i,e),"predefined"),Mo.set(s,n)}else{const n=po.Un(po.bc,[s,i.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);n.Mc(e),t.yc(s,(t,s,i,e)=>n.vc(t,s,i,e),"predefined")}}}static fc(s,i){t.yc(s,i,"private")}static xc(s,i,e,n){this.Ju(),t.yc(s,i,"custom",e,n)}static Gc(t,s){if(this.tc(t))return;if([...bo.keys()].includes(t))return;const i=yo.get(s);i&&i.delete(t);const e=wo.get(s);e&&e.delete(t)}static yc(t,s,i,e,n){switch(i){case"predefined":mo.set(t,s),go.set(t,s);break;case"custom":e?(yo.has(e)||yo.set(e,new Map),wo.has(e)||wo.set(e,new Map),yo.get(e).set(t,s),wo.get(e).set(t,n)):(So.set(t,s),vo.set(t,n));break;case"private":mo.set(t,s),bo.set(t,s);break;default:throw new Error("unexpected ease mode")}}static Tc(t,s,i,e){return 0===e?s:i*t/e+s}static dc(t,s,i,e,n){return s+3*t*(i-s)+3*t**2*(s+e-2*i)+t**3*(n-s+3*i-3*e)}static mc(t,s,i,e,n,r,h,o,a,l){if(e===n&&r===h)return t;const u=No(t,s,e,r,o,l),c=Oo(i,n,h,a),f=Fo(i,n,h,a),d=Do(i,n,h,a);return Lo(u,c,f,d)}static Ic(t,s,i,e){const n=[],r=Oo(t,s,i,e),h=Fo(t,s,i,e),o=Do(t,s,i,e);for(let t=0;t<Co;++t){const s=Lo(t*_o,r,h,o);n.push(s)}return n}};const Co=11,_o=1/(Co-1),Eo=4,Po=.01,Ao=1e-7,Ro=10,Oo=(t,s,i,e)=>e-3*i+3*s-t,Fo=(t,s,i,e)=>3*i-6*s+3*t,Do=(t,s,i,e)=>3*(s-t),Lo=(t,s,i,e)=>((s*t+i)*t+e)*t,ko=(t,s,i,e)=>3*s*t*t+2*i*t+e,No=(t,s,i,e,n,r)=>{if(1==t)return 1;let h=0,o=1,a=r[o],l=Co-1;for(r[Co-1];o!=l&&a<=t;)o++,a=r[o],h+=_o;o--,a=r[o];let u=h+(t-a)/(r[o+1]-a)*_o;const c=Oo(s,i,e,n),f=Fo(s,i,e,n),d=Do(s,i,e,n),p=ko(u,c,f,d);if(0===p)return u;if(p>=.01){for(let s=0;s<4;++s)u-=(Lo(u,c,f,d)-t)/ko(u,c,f,d);return u}{let s,i,e=h,n=h+_o,r=0;do{u=e+(n-e)/2;let h=Lo(u,c,f,d)-t;h>0?n=u:e=u,s=Math.abs(h)>1e-7,i=++r<10}while(s&&i);return u}}}{let $o=function(t){Bo.le(t)};RequireStringOrNumber=$o;const Bo=self.Cs;Bo.Cc=class{constructor(t){this._c=[],this.Yn=t||"",this.Ec=0}qn(){this.Pu(),this._c=null}Pc(){return this.Yn}Pu(){Bo.Mh(this._c),this.Ec=0}Ac(){return this.Ec}Rc(t=Math.random()*this.Ac()){let s=0;for(const[i,e]of this._c)if(s+=i,t<s)return e;return 0}Oc(){return!!this._c.length}Fc(t,s){$o(s),this.Ec+=t,this._c.push([t,s])}Dc(t,s){$o(s);const i=0===t;for(let e=0;e<this._c.length;e++){const n=this._c[e],r=i||n[0]===t,h=n[1]===s;if(r&&h){this._c.splice(e,1),this.Ec-=n[0];break}}}Lc(){return JSON.stringify(this._c)}static kc(t,s){const i=new Bo.Cc(s),e=JSON.parse(t);for(const t of e){const s=t[0],e=t[1];i.Fc(s,e)}return i}}}{const Wo=self.Cs;let jo=0;Wo.Nc=class{constructor(t,s){this.$c=t,this.Bc=s,this.Wc=jo++,this.$c.jc("runtime","screen-reader-text",{type:"create",id:this.Wc,text:this.Bc})}qn(){this.$c.jc("runtime","screen-reader-text",{type:"release",id:this.Wc}),this.$c=null,this.Bc="",this.Wc=-1}Vc(t){this.Bc!==t&&(this.Bc=t,this.$c.jc("runtime","screen-reader-text",{type:"update",id:this.Wc,text:this.Bc}))}}}{const Vo=self.Cs;Vo.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.Hc=!1,this.Uc=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.Uc)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Hc=!0}}}{const Ho=self.Cs,Uo=self.assert;Ho.Event.qc=class extends Ho.Vn{constructor(t){super(),this.zc=t,this.Jc=[],this.Yc=new Set,this.Xc=[],this.Kc=new Set,this.Zc=0,this.Qc=[]}qn(){this.Zc>0||(Ho.bh(this.Jc),this.Yc.clear(),Ho.bh(this.Xc),this.Kc.clear(),Ho.bh(this.Qc),Ho.qn(this))}tf(t,s){if(this.sf())this.Qc.push({if:"add",ef:t,capture:s});else if(s){if(this.Yc.has(t))return;this.Jc.push(t),this.Yc.add(t)}else{if(this.Kc.has(t))return;this.Xc.push(t),this.Kc.add(t)}}nf(t,s){this.sf()?this.Qc.push({if:"remove",ef:t,capture:s}):s?this.Yc.has(t)&&(this.Yc.delete(t),Ho.Ch(this.Jc,t)):this.Kc.has(t)&&(this.Kc.delete(t),Ho.Ch(this.Xc,t))}rf(){return!this.Jc.length&&!this.Xc.length}sf(){return this.Zc>0}hf(){const t=new Set,s=new Set;for(const i of this.Qc)if("add"===i.if)this.tf(i.ef,i.capture),i.capture?s.delete(i.ef):t.delete(i.ef);else{if("remove"!==i.if)throw new Error("invalid op");i.capture?(this.Yc.delete(i.ef),s.add(i.ef)):(this.Kc.delete(i.ef),t.add(i.ef))}Ho.Ph(this.Xc,t),Ho.Ph(this.Jc,s),Ho.bh(this.Qc)}af(t){this.lf();let s=!1;for(let i=0,e=this.Jc.length;i<e;++i)if(this.Jc[i](t),t.Hc){s=!0;break}if(!s)for(let s=0,i=this.Xc.length;s<i&&(this.Xc[s](t),!t.Hc);++s);return this.uf(),!t.defaultPrevented}cf(t){this.lf();for(let s=0,i=this.Jc.length;s<i;++s)this.Jc[s](t);for(let s=0,i=this.Xc.length;s<i;++s)this.Xc[s](t);return this.uf(),!0}lf(){this.Zc++}uf(){this.Zc--,0===this.Zc&&this.Qc.length>0&&this.hf()}ff(t){t?this.lf():this.uf()}df(t){let s=[];for(let i=0,e=this.Jc.length;i<e;++i){let e=this.Jc[i];s.push(Ho.pf(()=>e(t)))}for(let i=0,e=this.Xc.length;i<e;++i){let e=this.Xc[i];s.push(Ho.pf(()=>e(t)))}return Promise.all(s).then(()=>!t.defaultPrevented)}mf(t){const s=[];this.lf();for(let i=0,e=this.Jc.length;i<e;++i){const e=this.Jc[i](t);e instanceof Promise&&s.push(e)}for(let i=0,e=this.Xc.length;i<e;++i){const e=this.Xc[i](t);e instanceof Promise&&s.push(e)}return this.uf(),s.length?Promise.all(s).then(()=>!t.defaultPrevented):!t.defaultPrevented}async gf(t){return await this.mf(t)}async yf(t){this.lf();for(let s=0,i=this.Jc.length;s<i;++s){const i=this.Jc[s](t);i instanceof Promise&&await i}for(let s=0,i=this.Xc.length;s<i;++s){const i=this.Xc[s](t);i instanceof Promise&&await i}return this.uf(),!t.defaultPrevented}*wf(t){this.lf();for(let s=0,i=this.Jc.length;s<i;++s){const i=this.Jc[s](t);Ho.Mo(i)&&(yield*i)}for(let s=0,i=this.Xc.length;s<i;++s){const i=this.Xc[s](t);Ho.Mo(i)&&(yield*i)}this.uf()}}}{const qo=self.Cs;qo.Event.Sf=class extends qo.Vn{constructor(){super(),this.vf=new Map,this.bf=!1}qn(){if(this.bf)throw new Error("already released");this.Mf(),this.bf=!0,qo.qn(this)}zn(){return this.bf}Mf(){if(this.vf){for(let t of this.vf.values())t.qn();this.vf.clear()}}xf(t,s){let i=this.vf.get(t);return i||(s?(i=qo.Un(qo.Event.qc,t),this.vf.set(t,i),i):null)}Gf(t){return this.vf.has(t)}addEventListener(t,s,i){this.xf(t,!0).tf(s,!!i)}removeEventListener(t,s,i){let e=this.xf(t,!1);e&&(e.nf(s,!!i),e.rf()&&this.vf.delete(t))}dispatchEvent(t){const s=this.xf(t.type,!1);return!s||(t.cancelable?s.af(t):s.cf(t))}Tf(t){const s=this.xf(t.type,!1);return s?(t.Uc=!0,s.df(t)):Promise.resolve(!0)}async If(t){const s=this.xf(t.type,!1);if(!s)return!0;this.vf.delete(t.type),t.Uc=!0;const i=await s.df(t);return s.qn(),i}async Cf(t){const s=this.xf(t.type,!1);return!s||await s.gf(t)}_f(t){const s=this.xf(t.type,!1);return!s||s.mf(t)}async Ef(t){const s=this.xf(t.type,!1);return!s||await s.yf(t)}Pf(t){const s=this.xf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.wf(t)}ff(t){for(const s of this.vf.values())s.ff(t)}}}{let zo=function(t){ia=ta&&0===ea?requestIdleCallback(Jo,{timeout:35}):setTimeout(Jo,ea>0?1:t)},Jo=function(t){if(ia=-1,!sa.length)return;let s=performance.now(),i=s,e=0,n=0;do{Yo(sa.shift()),i=performance.now(),++e,n=(i-s)/e*1.1}while(sa.length&&(ta&&0===ea&&void 0!==t?n<t.timeRemaining():i-s+n<12));if(-1===ia&&sa.length){let t=i-s;zo(Math.max(16-t,4))}},Yo=function(t){let s;try{s=t.ef()}catch(s){return void t.reject(s)}t.resolve(s)};SetNewCallback=zo,DoAsyncifiedWork=Jo,DoNextAsyncifiedJob=Yo;const Xo=self.Cs,Ko=12,Zo=16,Qo=35,ta="undefined"!=typeof requestIdleCallback;let sa=[],ia=-1,ea=0,na=Xo.Ys.Us("disable-asyncify");na&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),Xo.pf=function(t){let s=null;return Xo.Ls&&(s=Xo.Zi()),new Promise((i,e)=>{sa.push({ef:t,resolve:i,reject:e,stack:s}),na?Yo(sa.pop()):-1===ia&&zo(16)})},Xo.pf.Af=function(t){if(t)++ea;else if(--ea,ea<0)throw new Error("already turned off high throughput mode")}}{let ra=function(){ua=-1},ha=function(){ca=-1,fa=-1;let t=Date.now();for(let s of da)if(s.Rf(t)){let t=s.Of();(-1===fa||t<fa)&&(fa=t)}else da.delete(s);if(-1!==fa){let s=Math.max(fa-t+100,1e3);ca=self.setTimeout(ha,s)}};ClearTimeCache=ra,CheckActiveIdleTimeouts=ha;const oa=self.Cs,aa=1e3,la=100;let ua=-1;oa.Ff=function(){return-1===ua&&(ua=Date.now(),self.setTimeout(ra,16)),ua};let ca=-1,fa=-1,da=new Set;oa.Df=class{constructor(t,s){this.Lf=t,this.kf=1e3*s,this.Nf=0,this.$f=!1}Bf(){let t=oa.Ff();this.Nf=t+this.kf,this.$f||(da.add(this),this.$f=!0),-1===ca?(fa=this.Nf,ca=self.setTimeout(ha,this.kf+100)):this.Nf<fa&&fa>t+1e3&&(self.clearTimeout(ca),fa=this.Nf,ca=self.setTimeout(ha,this.kf+100))}Rf(t){return!(t>=this.Nf&&(this.Lf()?(this.Nf=t+this.kf,0):(this.$f=!1,1)))}Of(){return this.Nf}Wf(){this.$f&&(da.delete(this),this.$f=!1,0===da.size&&-1!==ca&&(self.clearTimeout(ca),ca=-1,fa=-1))}qn(){this.Wf(),this.Lf=null}}}{const pa=self.Cs;pa.jf=class t{constructor(t){this.Vf=!1,this.Hf=t}Uf(){this.Vf||(this.Vf=!0,this.Hf&&(this.Hf(),this.Hf=null))}qf(){return this.Vf}qn(){this.Uf()}static qn(s){return new t(()=>s.qn())}static zf(t,s,i,e,n){if("string"!=typeof s&&!Array.isArray(s))throw new TypeError("expected string or array");if(null==e)e=!1;else if("boolean"!=typeof e&&"object"!=typeof e)throw new TypeError("invalid event listener options");if(n&&(i=i.bind(n)),Array.isArray(s)||s.includes(" ")){"string"==typeof s&&(s=s.split(" "));const n=new pa.Jf;for(const r of s)t.addEventListener(r,i,e),n.Bu(pa.Un(pa.jf,()=>t.removeEventListener(r,i,e)));return n}return t.addEventListener(s,i,e),pa.Un(pa.jf,()=>t.removeEventListener(s,i,e))}},pa.Yf=class extends pa.jf{Xf(t){this.Hf=t}},pa.Jf=class extends pa.jf{constructor(...t){super(),this.Kf=new Set;for(let s of t)this.Bu(s)}Bu(...t){if(this.Vf)throw new Error("already disposed");for(let s of t)this.Kf.add(s)}Zf(t){if(this.Vf)throw new Error("already disposed");this.Kf.delete(t)}Qf(){if(this.Vf)throw new Error("already disposed");if(this.Kf){for(let t of this.Kf)t.Uf();this.Kf.clear()}}qf(){return this.Vf}Uf(){if(this.Vf)throw new Error("already disposed");this.Vf=!0;for(let t of this.Kf)t.Uf();this.Kf.clear(),this.Kf=null}qn(){this.Uf()}}}{const ma=self.Cs;ma.td=class extends ma.Vn{constructor(){super(),this.sd=0,this.Aa=0,this.ed=0,this.nd=0}Bu(t){t=+t,this.Aa=t-this.sd,this.ed=this.nd+this.Aa,this.sd=this.ed-this.nd-this.Aa,this.nd=this.ed}rd(t){this.nd-=+t}qs(){return this.nd}Bf(){this.sd=0,this.Aa=0,this.ed=0,this.nd=0}Set(t){this.sd=0,this.Aa=0,this.ed=0,this.nd=+t}hd(t){this.sd=t.sd,this.Aa=t.Aa,this.ed=t.ed,this.nd=t.nd}qn(){}}}{const ga=self.Cs,ya={},wa=!0,Sa=!1;ya.od=function(t){this.ad=t,this.right=this.ad.ld,this.left=this.ad.ld,this.parent=null,this.color=!1,this.key=null},ya.ud=function(t){this.size=0,this.ld=new ya.od(this),this.ld.color=!1,this.root=this.ld,this.root.parent=this.ld,this.compare=t||this.fd},ya.ud.prototype.fd=function(t,s){return t<s?-1:s<t?1:0},ya.ud.prototype.clone=function(){var t=new ya.ud(this.compare);return t.dd(this),t},ya.ud.prototype.clear=function(){this.size=0,this.ld=new ya.od(this),this.ld.color=!1,this.root=this.ld,this.root.parent=this.ld},ya.ud.prototype.pd=function(t){var s=t.right;t.right=s.left,s.left!=this.ld&&(s.left.parent=t),s.parent=t.parent,t.parent==this.ld?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,s.left=t,t.parent=s},ya.ud.prototype.md=function(t){var s=t.left;t.left=s.right,s.right!=this.ld&&(s.right.parent=t),s.parent=t.parent,t.parent==this.ld?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,s.right=t,t.parent=s},ya.ud.prototype.gd=function(t){if(this.contains(t))this.yd(t).key=t;else{var s=new ya.od(this);s.key=t;for(var i=this.ld,e=this.root;e!=this.ld;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;s.parent=i,i==this.ld?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.ld,s.right=this.ld,s.color=wa,this.wd(s),this.size++}},ya.ud.prototype.wd=function(t){for(;t!=this.ld&&t!=this.root&&t.parent.color==wa;){var s;t.parent==t.parent.parent.left?(s=t.parent.parent.right).color==wa?(t.parent.color=!1,s.color=!1,t.parent.parent.color=wa,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.pd(t)),t.parent.color=!1,t.parent.parent.color=wa,t.parent.parent!=this.ld&&this.md(t.parent.parent)):(s=t.parent.parent.left).color==wa?(t.parent.color=!1,s.color=!1,t.parent.parent.color=wa,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.md(t)),t.parent.color=!1,t.parent.parent.color=wa,t.parent.parent!=this.ld&&this.pd(t.parent.parent))}this.root.color=!1},ya.ud.prototype.Sd=function(t){var s,i;(i=(s=t.left==this.ld||t.right==this.ld?t:this.vd(t)).left!=this.ld?s.left:s.right).parent=s.parent,s.parent==this.ld?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.bd(i),this.size--},ya.ud.prototype.bd=function(t){for(;t!=this.root&&0==t.color;){var s;t==t.parent.left?((s=t.parent.right).color==wa&&(s.color=!1,t.parent.color=wa,this.pd(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=wa,t=t.parent):(0==s.right.color&&(s.left.color=!1,s.color=wa,this.md(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.pd(t.parent),t=this.root)):((s=t.parent.left).color==wa&&(s.color=!1,t.parent.color=wa,this.md(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=wa,t=t.parent):(0==s.left.color&&(s.right.color=!1,s.color=wa,this.pd(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.md(t.parent),t=this.root))}t.color=!1},ya.ud.prototype.remove=function(t){var s=this.yd(t);if(s!=this.ld){var i=s.key;return this.Sd(s),i}return null},ya.ud.prototype.Md=function(t,s){this.remove(s)},ya.ud.prototype.min=function(t){for(;t.left!=this.ld;)t=t.left;return t},ya.ud.prototype.max=function(t){for(;t.right!=this.ld;)t=t.right;return t},ya.ud.prototype.vd=function(t){if(t.right!=this.ld)return this.min(t.right);for(var s=t.parent;s!=this.ld&&t==s.right;)t=s,s=s.parent;return s},ya.ud.prototype.xd=function(t){if(t.left!=this.ld)return this.max(t.left);for(var s=t.parent;s!=this.ld&&t==s.left;)t=s,s=s.parent;return s},ya.ud.prototype.Gd=function(t){if(this.size>0){var s=this.yd(t);if(s==this.ld)return null;if(s.right!=this.ld)return this.min(s.right).key;for(var i=s.parent;i!=this.ld&&s==i.right;)s=i,i=i.parent;return i!=this.ld?i.key:null}return null},ya.ud.prototype.Td=function(t){if(this.size>0){var s=this.yd(t);if(s==this.ld)return null;if(s.left!=this.ld)return this.max(s.left).key;for(var i=s.parent;i!=this.ld&&s==i.left;)s=i,i=i.parent;return i!=this.ld?i.key:null}return null},ya.ud.prototype.Id=function(){return this.min(this.root).key},ya.ud.prototype.Cd=function(){return this.max(this.root).key},ya.ud.prototype.yd=function(t){for(var s=this.root;s!=this.ld&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},ya.ud.prototype.contains=function(t){return null!=this.yd(t).key},ya.ud.prototype.getValues=function(){var t=[];return this.forEach(function(s){t.push(s)}),t},ya.ud.prototype.dd=function(t){if("array"==ya._d(t))for(var s=0;s<t.length;s++)this.gd(t[s]);else if("function"==ya._d(t.forEach))t.forEach(this.gd,this);else if("function"==ya._d(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.gd(i[s])}else if("object"==ya._d(t))for(var e in t)this.gd(t[e])},ya.ud.prototype.Ed=function(t){if("array"==ya._d(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==ya._d(t.forEach))t.forEach(this.Md,this);else if("function"==ya._d(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.remove(i[s])}else if("object"==ya._d(t))for(var e in t)this.remove(t[e])},ya.ud.prototype.Pd=function(t){if("array"==ya._d(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==ya._d(t.forEach))return t.every(this.contains,this);if("function"==ya._d(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==ya._d(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},ya.ud.prototype.range=function(t,s){var i=[];return this.Ad(function(t){i.push(t)},t,s),i},ya.ud.prototype.Rd=function(t,s){if(!this.Od())for(var i=this.min(this.root);i!=this.ld;){if(t.call(s,i.key,this))return;i=this.vd(i)}},ya.ud.prototype.Fd=function(t,s,i){if(!this.Od())for(var e=this.yd(s);e!=this.ld;){if(t.call(i,e.key,this))return;e=this.vd(e)}},ya.ud.prototype.traverseTo=function(t,s,i){if(!this.Od())for(var e=this.min(this.root),n=this.yd(s);e!=n;){if(t.call(i,e.key,this))return;e=this.vd(e)}},ya.ud.prototype.Ad=function(t,s,i,e){if(!this.Od())for(var n=this.yd(s),r=this.yd(i);n!=r;){if(t.call(e,n.key,this))return;n=this.vd(n)}},ya.ud.prototype.Dd=function(t,s){if(!this.Od())for(var i=this.max(this.root);i!=this.ld;){if(t.call(s,i.key,this))return;i=this.xd(i)}},ya.ud.prototype.forEach=function(t,s){if(!this.Od())for(var i=this.min(this.root);i!=this.ld;i=this.vd(i))t.call(s,i.key,i.key,this)},ya.ud.prototype.some=function(t,s){if(this.Od())return!1;for(var i=this.min(this.root);i!=this.ld;i=this.vd(i))if(t.call(s,i.key,i.key,this))return!0;return!1},ya.ud.prototype.every=function(t,s){if(this.Od())return!1;for(var i=this.min(this.root);i!=this.ld;i=this.vd(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},ya.ud.prototype.map=function(t,s){var i=[];if(this.Od())return i;for(var e=this.min(this.root);e!=this.ld;e=this.vd(e))i.push(t.call(s,e.key,e.key,this));return i},ya.ud.prototype.filter=function(t,s){var i=[];if(this.Od())return i;for(var e=this.min(this.root);e!=this.ld;e=this.vd(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},ya.ud.prototype.Ld=function(){return this.size},ya.ud.prototype.Od=function(){return 0==this.size},ya.ud.prototype.isSubsetOf=function(t){var s=ya.Ld(t);if(this.Ld()>s)return!1;var i=0;if(this.Od())return!0;for(var e=this.min(this.root);e!=this.ld;e=this.vd(e))ya.contains.call(t,t,e.key)&&i++;return i==this.Ld()},ya.ud.prototype.intersection=function(t){var s=new ya.ud(this.compare);if(this.Od())return s;for(var i=this.min(this.root);i!=this.ld;i=this.vd(i))t.contains.call(t,i.key,i.key,this)&&s.gd(i.key);return s},ga.ud=class extends ga.Vn{constructor(t){super(),this.kd=new ya.ud(t),this.Nd=!1,this.$d=new Set,this.Bd=new Set}Bu(t){this.Nd?this.kd.contains(t)?this.Bd.delete(t):this.$d.add(t):this.kd.gd(t)}Zf(t){this.Nd?this.kd.contains(t)?this.Bd.add(t):this.$d.delete(t):this.kd.remove(t)}Us(t){return this.Nd?!!this.$d.has(t)||!this.Bd.has(t)&&this.kd.contains(t):this.kd.contains(t)}Pu(){this.kd.clear(),this.$d.clear(),this.Bd.clear()}toArray(){if(this.Nd)throw new Error("cannot be used in queueing mode");return this.kd.getValues()}Fu(){return this.kd.Ld()+this.$d.size-this.Bd.size}Au(){return 0===this.Fu()}Wd(){if(this.Au())throw new Error("empty set");if(this.Nd)throw new Error("cannot be used in queueing mode");const t=this.kd;return t.min(t.root).key}jd(){if(this.Au())throw new Error("empty set");if(this.Nd)throw new Error("cannot be used in queueing mode");const t=this.Wd();return this.Zf(t),t}Vd(t){if(t=!!t,this.Nd!==t&&(this.Nd=t,!t)){for(const t of this.Bd)this.kd.remove(t);this.Bd.clear();for(const t of this.$d)this.kd.gd(t);this.$d.clear()}}Hd(t){this.kd.forEach(t)}*values(){if(this.Au())return;const t=this.kd;for(let s=t.min(t.root);s!=t.ld;s=t.vd(s))yield s.key}[Symbol.iterator](){return this.values()}}}{const va=self.Cs;va.Ud=class{constructor(t=va.hardwareConcurrency){this.qd=t,this.zd=[],this.Jd=0}Bu(t,s){return new Promise((i,e)=>{const n={ef:t,resolve:i,reject:e,Yd:s};s?.signal&&s.signal.aborted?e(new Error("abort")):(s?.signal&&(n.onabort=()=>{const t=this.zd.indexOf(n);-1!==t&&(this.zd.splice(t,1),e(new Error("abort")))},s.signal.addEventListener("abort",n.onabort)),this.zd.push(n),this.Xd())})}Kd(t){for(let s=0,i=this.zd.length;s<i;++s)if(this.zd[s].ef===t)return s;return-1}Zd(t,s){const i=this.Kd(t);if(-1===i)throw new Error("cannot find promise to resolve");this.zd[i].resolve(s),this.zd.splice(i,1)}Qd(t,s){const i=this.Kd(t);if(-1===i)throw new Error("cannot find promise to reject");this.zd[i].reject(s),this.zd.splice(i,1)}async Xd(){if(!this.zd.length)return;if(this.Jd>=this.qd)return;this.Jd++;const t=this.zd.shift();t.Yd?.signal&&t.onabort&&t.Yd.signal.removeEventListener("abort",t.onabort);try{const s=await t.ef();t.resolve(s)}catch(s){t.reject(s)}this.Jd--,this.Xd()}}}{const ba=self.Cs;ba.tp=class{constructor(t,s,i){this.Lf=t,this.sp=s,this.ip=i||2*s,this.ep=-1,this.np=-1/0,this.rp=()=>this.hp(),this.op=!1,this.ap=!1,this.lp=null}up(t){this.ap=!!t}cp(){return void 0!==ba.fp&&ba.fp.pp()?this.ip:this.sp}mp(...t){if(-1!==this.ep)return;this.lp=t;let s=ba.Ff(),i=s-this.np,e=this.cp();i>=e&&this.ap?(this.np=s,this.gp()):this.ep=self.setTimeout(this.rp,Math.max(e-i,4))}gp(){this.op=!0;const t=this.lp;this.lp=null,t?this.Lf(...t):this.Lf(),this.op=!1}Bf(){this.op||(this.yp(),this.lp=null,this.np=ba.Ff())}hp(){this.ep=-1,this.np=ba.Ff(),this.gp()}yp(){-1!==this.ep&&(self.clearTimeout(this.ep),this.ep=-1)}qn(){this.yp(),this.Lf=null,this.lp=null,this.rp=null}}}{const Ma=self.Cs;Ma.wp=class{constructor(){this.Sp=new Map,this.vp=!1,this.bp=null,this.Mp=null,this.xp=null,this.Gp=null}Tp(t){this.vp=!!t}Ip(){return this.vp}Cp(t){this.bp=t}_p(t){if(!this.bp)throw new Error("no get base size callback set");return this.bp(t)}Ep(t){this.Mp=t}Pp(t,s,i,e,n,r){if(!this.Mp)throw new Error("no raster at size callback set");return this.Mp(t,s,i,e,n,r)}Ap(t){this.xp=t}Rp(t){if(!this.xp)throw new Error("no release result callback set");this.xp(t)}Op(t){this.Gp=t}Fp(){if(!this.Gp)throw new Error("no redraw callback set");this.Gp()}Dp(t){let s=this.Sp.get(t);return s||(s=Ma.Un(Ma.Lp,this,t),this.Sp.set(t,s)),s.kp(),s}Np(t){this.Sp.delete(t.$p())}Bp(){for(const t of this.Sp.values())t.Wp(),t.jp()}}}{const xa=self.Cs,Ga=4096;xa.Lp=class{constructor(t,s){this.Vp=t,this.Hp=s,this.Up=0,this.qp=0,this.zp=0,this.Jp=this.Vp._p(s).then(t=>{this.Vp&&(this.qp=t[0],this.zp=t[1],this.Vp.Fp())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.Yp=!0,this.Vp&&this.Vp.Fp()}),this.Xp=0,this.Kp=0,this.Zp=0,this.Qp=0,this.tm=!1,this.sm=null,this.im=!1,this.Yp=!1}qn(){if(this.Up<=0)throw new Error("already released");this.Up--,0===this.Up&&this.nm()}Wp(){this.sm&&(this.Vp.Rp(this.sm),this.sm=null)}nm(){this.Wp(),this.Vp.Np(this),this.Vp=null}$p(){return this.Hp}kp(){this.Up++}rm(){return this.Up>0}hm(){return this.sm}jp(){this.im=!0}async om(t,s,i){if(0===s||0===i||this.Yp)return;if(this.tm)return;let e=xa.br(Math.ceil(s)),n=xa.br(Math.ceil(i));const r=Math.max(e,n);if(r>4096){const t=4096/r;s*=t,i*=t,e=Math.min(Math.ceil(e*t),4096),n=Math.min(Math.ceil(n*t),4096)}if(s<e&&i<n){const t=s/i;e/n>t?(s=n*t,i=n):(s=e,i=e/t)}if(this.Vp.Ip()&&(e=Math.ceil(s),n=Math.ceil(i)),e<=this.Xp&&n<=this.Kp&&!this.im)return;this.tm=!0,this.Xp=e,this.Kp=n;const h=await this.Vp.Pp(this.Hp,t,this.Xp,this.Kp,s,i);this.Vp&&(this.Wp(),this.sm=h,this.Zp=s,this.Qp=i,this.tm=!1,this.im=!1,this.Vp.Fp())}am(){return this.Jp}lm(){return this.qp}um(){return this.zp}fm(){return this.Zp}dm(){return this.Qp}pm(){return this.Yp}}}{let Ta=function(t){return Aa.get(t)};lookupHtmlEntity=Ta;const Ia=self.Cs;Ia.gm="\ufeff";const Ca=new Set("0123456789");Ia.ym=function(t){return Ca.has(t)};const _a=new Set(" \t\n\r            ​\u2028\u2029  　");Ia.wm=function(t){return _a.has(t)},Ia.Sm=function(t){return[...t].filter(t=>!Ia.wm(t)).join("")},Ia.vm=function(t){for(const s of t)if(!Ia.wm(s))return!1;return!0},Ia.bm=function(t){for(const s of t)if(!Ia.wm(s))return!1;return!0},Ia.Mm=function(t){return 1===t.length&&t.charCodeAt(0)<32},Ia.xm=function(t){return[...t].filter(t=>!Ia.Mm(t)).join("")};let Ea=null;try{Ea=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}Ia.Gm=function(t){return!Ia.wm(t)&&Ea&&Ea.test(t)};const Pa=new Set("0123456789.+-e");Ia.Tm=function(t){if(!(t=t.trim()).length)return!1;let s=t.charAt(0);if("-"!==s&&!Ca.has(s))return!1;for(let s of t)if(!Pa.has(s))return!1;return!0},Ia.Im=function(t){let s=t.length;for(;s>0;){let i=t.charAt(s-1);if(!Ia.ym(i))break;--s}return t.substr(0,s)},Ia.Cm=function(t){let s=Ia.Im(t),i=t.substr(s.length);return i=i?(parseInt(i,10)+1).toString():"2",s+i};const Aa=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]]),Ra=/[&<>"']/g;Ia._m=function(t){return t.replace(Ra,Ta)},Ia.Em=function(t){let s=Ia.Pm(t,"\\","\\\\");return s=Ia.Pm(s,'"','\\"'),s=Ia.Pm(s,"\t","\\t"),s=Ia.Pm(s,"\r",""),Ia.Pm(s,"\n","\\n")},Ia.Am=function(t){let s=Ia.Pm(t,"&","&amp;");return s=Ia.Pm(s,"<","&lt;"),s=Ia.Pm(s,">","&gt;"),Ia.Pm(s,'"',"&quot;")};const Oa=/[-[\]{}()*+?.,\\^$|#\s]/g;Ia.Ki=function(t){return t.replace(Oa,"\\$&")},Ia.Rm=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},Ia.Om=function(t,s){let i=0,e=0;for(;i<s;){if(i=t.indexOf("\n",i),-1===i)return e;e++,i++}return e},Ia.Fm=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());const e=s.length;let n=0,r=0,h=[];for(;(r=t.indexOf(s,n))>-1;)h.push(r),n=r+e;return h},Ia.Pm=function(t,s,i){return t.replaceAll(s,()=>i)},Ia.Dm=function(t,s,i){return t.replace(new RegExp(Ia.Ki(s),"gi"),()=>i)},Ia.Lm=function(t,s){"string"==typeof s?t.textContent=s:s.km()?t.textContent=s.toString():(t.innerHTML=s.Nm(),s instanceof Ia.pn&&s.$m(t))},Ia.Bm=function(t,s){return t instanceof Ia.dn||t instanceof Ia.pn?t.equals(s):s instanceof Ia.dn||s instanceof Ia.pn?s.equals(t):t===s},Ia.Wm=function(t,...s){let i=t;for(let e=0,n=s.length;e<n;++e){const n=`{${e}}`;if(!t.includes(n))throw new Error(`missing placeholder '${n}' in string substitution`);i=i.replace(n,s[e].toString())}return i},Ia.jm=function(t,...s){let i=t,e=-1,n=-1;for(let r=0,h=s.length;r<h;++r){const h=`{${r}}`;t.includes(h)?(n=r,i=i.replace(h,s[r].toString())):-1===e&&(e=r)}if(e>=0&&n>=0&&e<n)throw new Error(`missing placeholder '${e}' in string substitution`);return i},Ia.Vm=function(t,s){let i=t;for(let[t,e]of Object.entries(s))i=i.replaceAll(t,e.toString());return i},Ia.Hm=function(t,s){return t>s?1:t<s?-1:0},Ia.Um=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return i>e?1:i<e?-1:0};const Fa=new self.Intl.Segmenter;Ia.qm=function(t){const s=[];for(const i of Fa.segment(t))s.push(i.segment);return s},Ia.zm=function*(t){for(const s of Fa.segment(t))yield s.segment},Ia.Jm=function(t){let s=0;for(const i of Fa.segment(t))++s;return s};const Da=1024,La=1048576,ka=1073741824,Na=1099511627776;Ia.Ym=function(t,s){let i="common."+(s?"dataRates":"dataSizes")+".";const e=self.Xm;if(t<1024)return e(i+"bytes",t);if(t<1048576){let s=t/1024;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"kilobytes",s)}if(t<ka){let s=t/1048576;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"megabytes",s)}if(t<Na){let s=t/ka;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"gigabytes",s)}{let s=t/Na;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"terabytes",s)}};const $a={Km:!1,Zm:!0,Qm:!0,tg:!0,sg:!0};Ia.ig=function(t,s){s=Object.assign({},$a,s),Ia.ng.eg("common.time");const i=[],e=self.lang,n=self.rg;if(s.Zm){const s=Math.floor(t/86400);s>0&&(t-=24*s*3600,i.push(n(".days",null,s)))}if(s.Qm){const s=Math.floor(t/3600);(s>0||i.length)&&(t-=3600*s,i.push(n(".hours",null,s)))}if(s.tg){const e=Math.floor(t/60);(e>0||i.length||!s.sg)&&(t-=60*e,i.push(n(".minutes",null,e)))}if(s.sg){const s=Math.floor(t%60);i.push(n(".seconds",null,s))}const r=(s.Km?e(".approx-prefix"):"")+i.join(e(".separator"));return Ia.ng.hg(),r},Ia.og=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),n=s-e.length;for(let t=0;t<n;++t)i+="0";return i+e},Ia.ag=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},Ia.lg=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());Ia.Gh(i,4,"0"),Ia.Gh(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const s=i[t]-e[t];if(0!==s)return s<0?-1:1}return 0},Ia.ug=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random());return("x"===t?s:3&s|8).toString(16)})},Ia.cg=function(t,s){if(t.length!==s.length)throw new Error("strings must be same length");let i=0;for(let e=0,n=t.length;e<n;++e)t.charAt(e)!==s.charAt(e)&&++i;return i},Ia.fg=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,n,r,h,o;for(t.length>s.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,n=1;n<=t.length;n++)h=s[e-1]===t[n-1]?o[n-1]:Math.min(o[n-1]+1,Math.min(r+1,o[n]+1)),o[n-1]=r,r=h;o[t.length]=r}return o[t.length]}}{let Ba=function(t,s,i){const e=Va.get(i);if(!e)return"class"===i?s?"</span>":`<span class="bbclass${Ya++}">`:t;if("string"==typeof e){if("a"===e&&0===za.length||"abbr"===e&&0===Ja.length)return t;if("a"!==e||s){if("abbr"!==e||s)return"<"+s+e+">";{const t=parseInt(i.substring(3),10)-1;if(t<0||t>=Ja.length)throw new Error("invalid bbcode tip substitution");const s=Ja[t];let e="";if("string"==typeof s?e=s:"function"==typeof s&&(e=s()),"string"!=typeof e)throw new TypeError("invalid bbcode tip");return`<abbr title="${Wa.Pm(e,'"',"&quot;")}">`}}{const t=parseInt(i.substring(1),10)-1;if(t<0||t>=za.length)throw new Error("invalid bbcode link substitution");const s=za[t];if("string"==typeof s)return`<a href="${za[t]}">`;if("function"==typeof s)return`<a class="bblink${t}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(e)){let t=e[0],i=e[1];return s?"</"+t+">":`<${t} class="${i}">`}};bbToHtmlReplacerFunc=Ba;const Wa=self.Cs,ja=self.assert,Va=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),Ha=new Set(["icon"]),Ua=/\[(\/?)([a-zA-Z0-9]+)\]/g,qa=/\[(\/?)([^\[\n]*?)\]/g;let za=null,Ja=null,Ya=0;const Xa=/\n/g;Wa.pn=class{constructor(t,s){if(this.dg=s&&s.pg?t:Wa._m(t),this.mg="",this.gg=!1,this.yg=[],this.wg=[],s){if(this.gg=!!s.Sg,s.links){if(s.links.length>9)throw new Error("too many links");this.yg=s.links}if(s.vg){if(s.vg.length>9)throw new Error("too many tips");this.wg=s.vg}}this.bg=this.dg.includes("["),this.Mg=this.gg&&this.dg.includes("\n"),this.xg=!this.bg&&!this.Mg&&!this.dg.includes("&"),this.Gg=!1,this.Tg=[]}toString(){return this.dg}valueOf(){return this.dg}km(){return this.xg}Ig(){return this.bg?this.dg.replace(Ua,""):this.dg}Nm(){if(this.xg)return this.dg;if(!this.mg&&this.dg){let t=this.dg;this.bg&&(Ya=0,za=this.yg,Ja=this.wg,t=t.replace(Ua,Ba),za=null,Ja=null),this.Mg&&(t=t.replace(Xa,"<br>")),this.mg=t}return this.mg}$m(t){if(this.yg.length)for(let s=0,i=this.yg.length;s<i;++s){const i=this.yg[s];if("function"!=typeof i)continue;const e=t.querySelector(".bblink"+s);if(!e)throw new Error("unable to attach BBString link handler");e.onclick=i}}equals(t){return t instanceof Wa.dn?this.Nm()===t.Nm():t instanceof Wa.pn?this.dg===t.dg:this.dg===t}Cg(){if(this.Gg)return this.Tg;const t=[],s=this.dg,i=[];qa.lastIndex=0;let e=0,n=null;for(;null!==(n=qa.exec(s));){const r=n.index;if(r>0&&"\\"===s.charAt(r-1))continue;const h=n[0],o=n[1],a=n[2],l=s.substring(e,r);if(e=r+h.length,l&&t.push({text:l,_g:i.slice(0)}),a)if(o){const t=a.toLowerCase();for(let s=i.length-1;s>=0;--s)if(i[s].tag===t){i.splice(s,1);break}}else{let s=a,e=null;const n=a.indexOf("=");if(-1!==n?(s=a.substring(0,n).toLowerCase(),e=a.substring(n+1)):s=s.toLowerCase(),Ha.has(s)){if("icon"!==s)throw new Error(`unknown self-closing tag ${s}`);t.push({icon:e,_g:i.slice(0)})}else i.push({tag:s,Eg:e})}}e<s.length&&t.push({text:s.substring(e),_g:i.slice(0)});for(const s of t)s.text&&(s.text=this.Pg(s.text));return this.Tg=t.map(t=>t.icon?Wa.Un(Wa.Ag,{icon:t.icon,_g:t._g}):Wa.Un(Wa.Rg,{Og:Wa.qm(t.text),_g:t._g})),this.Gg=!0,this.Tg}Pg(t){return t=Wa.Pm(t,"\\[","["),Wa.Pm(t,"\\\\","\\")}static Fg(t){return Wa.Un(Wa.pn,t,{pg:!0}).Ig()}static Dg(t){return t.replace(qa,"")}}}{let Ka=function(t){return" "!==t&&" "!==t&&il.wm(t)},Za=function(t){return el.has(t)},Qa=function(t){return il.Gm(t)&&!Za(t)},tl=function(t){for(;t.length>0&&Ka(t.at(-1));)t.pop()},sl=function(t){return"\n"===t||"\r\n"===t};IsWordBreakWhiteSpace=Ka,IsOpeningCJKPunctiationChar=Za,IsContinuingCJKPunctuationChar=Qa,WordBreakTrimEnd=tl,IsNewline=sl;const il=self.Cs,el=new Set("〈《「『【〔〖〘〚〝");il.Lg=class{constructor(){this.kg=[],this.Ng=null}$g(){return this.kg}Bg(){return this.kg.length}Wg(t){this.Ng=t}jg(t,s){let i=0,e=0,n=0,r=0,h=0;for(const o of t){if(-1===o.Vg()){const t=s(o);o.Hg(t.height),o.Ug(t.fontBoundingBoxAscent||0),o.qg(t.fontBoundingBoxDescent||0),o.zg(t.Jg||0),o.Yg()?o.Xg(t.width):o.Kg()&&o.Zg(this.Ng)}i+=o.Vg(),e=Math.max(e,o.Qg()),n=Math.max(n,o.ty()),r=Math.max(r,o.sy()),h=Math.max(h,o.iy())}return{width:i,height:e,fontBoundingBoxAscent:n,fontBoundingBoxDescent:r,Jg:h}}ey(t,s,i,e,n,r){this.kg.push(il.Un(il.Lg.ny,{hy:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:n,Jg:r}))}Lg(t,s,i,e,n){if("string"==typeof t&&(t=[il.Un(il.Rg,{Og:il.qm(t)})]),il.bh(this.kg),!t.length||1===t.length&&t[0].Yg()&&t[0].Au()||i<2)return;if(1===t.length){const e=t[0];if(e.Yg()&&e.oy()<=100&&!e.ly()){let{width:t,height:r,fontBoundingBoxAscent:h,fontBoundingBoxDescent:o,Jg:a}=s(e);if(t+=n,e.Xg(t),e.Hg(r),e.Ug(h||0),e.qg(o||0),e.zg(a||0),t<=i)return void this.ey([e],t,r,h,o,a)}}let r;r="word"===e?this.uy(t):"cjk"===e?this.py(t):this.my(t),this.gy(r,s,i,n)}uy(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.yy();if(n.Kg())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.wy())if(sl(r))i.length>0&&s.push(i),s.push([il.Un(il.Rg,{Og:["\n"],_g:t})]),i=[];else if(0===i.length)i.push(il.Un(il.Rg,{Og:[r],_g:t})),e=Ka(r);else{const n=Ka(r);if(n===e){const s=i.at(-1);s.yy()===t?s.Sy(r):i.push(il.Un(il.Rg,{Og:[r],_g:t}))}else s.push(i),i=[il.Un(il.Rg,{Og:[r],_g:t})],e=n}}return i.length>0&&s.push(i),s}py(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.yy();if(n.Kg())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.wy())if(sl(r))i.length>0&&s.push(i),s.push([il.Un(il.Rg,{Og:["\n"],_g:t})]),i=[];else if(0===i.length)i.push(il.Un(il.Rg,{Og:[r],_g:t})),e=Za(r);else if(e||Qa(r)){const s=i.at(-1);s.yy()===t?s.Sy(r):i.push(il.Un(il.Rg,{Og:[r],_g:t})),e=Za(r)}else s.push(i),i=[il.Un(il.Rg,{Og:[r],_g:t})],e=Za(r)}return i.length>0&&s.push(i),s}my(t){const s=[];for(const i of t)if(i.Yg()){const t=i.wy();il.On(s,t.map(t=>[il.Un(il.Rg,{Og:[t],_g:i.yy()})]))}else s.push([i]);return s}vy(t){return t.map(t=>t.by())}My(t,s){const i=t.length?t.at(-1):null;let e=0;i&&i.Yg()&&s[0].Yg()&&s[0].yy()===i.yy()&&(i.xy(s[0].wy()),e=1);for(let i=s.length;e<i;++e){const i=s[e];t.push(i.by())}}gy(t,s,i,e){let n=[],r=0,h=0,o=0,a=0,l=0;for(const e of t){if(1===e.length&&e[0].Yg()&&1===e[0].oy()&&sl(e[0].wy()[0])){if(0===h){const t=s(il.Un(il.Rg,{Og:[" "],_g:e[0].yy()}));h=t.height,o=t.fontBoundingBoxAscent||0,a=t.fontBoundingBoxDescent||0,l=t.Jg||0}this.ey(n,r,h,o,a,l),n=[],r=0,h=0,o=0,a=0,l=0;continue}const t=this.vy(n);this.My(t,e);const u=this.jg(t,s),c=u.width;if(c>=i)if(n.length>0&&this.ey(n,r,h,o,a,l),n=[],e[0].Yg()&&il.bm(e[0].wy()))r=0,h=0,o=0,a=0,l=0;else{this.My(n,e);const t=this.jg(n,s);r=t.width,h=t.height,o=t.fontBoundingBoxAscent,a=t.fontBoundingBoxDescent,l=t.Jg}else n=t,r=c,h=u.height,o=u.fontBoundingBoxAscent,a=u.fontBoundingBoxDescent,l=u.Jg}n.length>0&&this.ey(n,r,h,o,a,l),this.Gy(s,e)}Gy(t,s){for(const i of this.kg){const e=i.Ty();if(!e.length)continue;let n=e.at(-1);if(n.Yg()){const r=n.wy(),h=r.slice(0);if(tl(h),0===h.length)i.Iy(-n.Vg()),e.pop();else if(h.length<r.length){n.Cy(h);const s=t(n).width,e=n.Vg()-s;n.Xg(s),i.Iy(-e)}0!==s&&e.length>0&&(n=e.at(-1),n.Iy(s),i.Iy(s))}}}Pu(){il.bh(this.kg)}_y(){return this.kg.reduce((t,s)=>Math.max(t,s.Vg()),0)}Ey(){return this.kg.reduce((t,s)=>t+s.Qg(),0)}}}{const nl=self.Cs;nl.Lg.ny=class{constructor(t){this.Tg=t.hy||[],this.Py=t.width||-1,this.Ay=t.height||-1,this.Ry=t.fontBoundingBoxAscent||-1,this.Oy=t.fontBoundingBoxDescent||-1,this.Fy=t.Jg||-1,this.Dy=0,this.Ly=0}hy(){return this.Tg.values()}*ky(){const t=this.Tg;for(let s=t.length-1;s>=0;--s)yield t[s]}Ty(){return this.Tg}Iy(t){this.Py+=t}Vg(){return this.Py}Qg(){return this.Ay}Ny(){return this.Ry}sy(){return this.Oy}iy(){return this.Fy}$y(t){this.Dy=t}By(){return this.Dy}Wy(t){this.Ly=t}jy(){return this.Ly}}}{const rl=self.Cs;rl.Vy=class{constructor(t){this.Hy=t._g||[],this.Py=t.width||-1,this.Ay=t.height||-1,this.Ry=t.fontBoundingBoxAscent||-1,this.Oy=t.fontBoundingBoxDescent||-1,this.Fy=t.Jg||-1,this.Dy=0,this.Ly=0}Yg(){return!1}Kg(){return!1}yy(){return this.Hy}Uy(t){const s=this.Hy;for(let i=s.length-1;i>=0;--i){const e=s[i];if(e.tag===t)return e}return null}qy(t){return!!this.Uy(t)}zy(){const t=new Map;for(const s of this.Hy)t.set(s.tag,s.Eg);return t}Iy(t){this.Py+=t}Xg(t){this.Py=t}Vg(){return this.Py}Hg(t){this.Ay=t}Qg(){return this.Ay}Ug(t){this.Ry=t}ty(){return this.Ry}qg(t){this.Oy=t}sy(){return this.Oy}zg(t){this.Fy=t}iy(){return this.Fy}$y(t){this.Dy=t}By(){return this.Dy}Wy(t){this.Ly=t}jy(){return this.Ly}}}{const hl=self.Cs;hl.Rg=class extends hl.Vy{constructor(t){super(t),this.Jy=t.Og}Yg(){return!0}xy(t){hl.On(this.Jy,t),this.Py=-1,this.Ay=-1,this.Ry=-1,this.Oy=-1,this.Fy=-1}Sy(t){this.Jy.push(t)}by(){return hl.Un(hl.Rg,{Og:this.Jy.slice(0),_g:this.Hy,width:this.Py,height:this.Ay,fontBoundingBoxAscent:this.Ry,fontBoundingBoxDescent:this.Oy,Jg:this.Fy})}wy(){return this.Jy}Cy(t){this.Jy=t}oy(){return this.Jy.length}Au(){return 0===this.Jy.length}ly(){return this.Jy.includes("\n")}}}{const ol=self.Cs;ol.Ag=class extends ol.Vy{constructor(t){super(t),this.Yy=t.icon}Kg(){return!0}Xy(){return this.Yy}by(){return ol.Un(ol.Ag,{icon:this.Yy,_g:this.Hy,width:this.Py,height:this.Ay,fontBoundingBoxAscent:this.Ry,fontBoundingBoxDescent:this.Oy,Jg:this.Fy})}Ky(t){if(!t)return null;let s=Number(this.Yy);return String(s)===this.Yy?(s=Math.floor(s),t.Zy(s)):t.Qy(this.Yy)}Zg(t){const s=this.Ky(t);this.Py=s?this.Ay*s.Vg()/s.Qg():0}tw(t){const s=this.Ky(t);return s?s.tw():null}oy(){return 1}}}{const al=self.Cs;al.sw=class{constructor(t){this.iw=new Map,this.ew=t.rw,this.hw=t.ow}qn(){for(const t of this.iw.values())t.qn();this.iw.clear()}aw(t){let s=this.iw.get(t);if(s)return s;const i=this.ew(t);return s=al.Un(al.lw,this,{source:t,uw:i}),this.iw.set(t,s),s}cw(t){return this.iw.has(t)}fw(t){const s=this.iw.get(t);s&&s.qn(),this.iw.delete(t)}async dw(t){return await this.hw(t)}}}{const ll=self.Cs;ll.lw=class{constructor(t,s){this.pw=t,this.mw=s.source,this.gw=[],this.yw=new Map,this.ww=!1,this.Sw=!1,this.bw=null;const i=s.uw.Mw;for(let t=0,s=i.length;t<s;++t){const s=i[t],e=ll.Un(ll.xw,this,{index:t,tag:s.tag,source:s.source,width:s.width,height:s.height});this.gw.push(e),s.tag&&this.yw.set(s.tag.toLowerCase(),e)}}qn(){for(const t of this.gw)t.qn();ll.bh(this.gw),this.yw.clear(),this.pw=null,this.mw=null}Gw(){return this.ww}Tw(){return this.Sw}Iw(){return this.bw||(this.bw=this.Cw()),this.bw}async Cw(){if(this.ww)return;this.ww=!0,this.Sw=!0;const t=await this.pw.dw(this.mw);if(!this.pw)return;const s=t.Mw;for(let t=0,i=Math.min(s.length,this.gw.length);t<i;++t){const i=s[t]._w;this.gw[t].Ew(i)}this.Sw=!1}Zy(t){return(t=Math.floor(t))<0||t>=this.gw.length?null:this.gw[t]}Qy(t){return this.yw.get(t.toLowerCase())||null}}}{const ul=self.Cs;ul.xw=class{constructor(t,s){this.Pw=t,this.mw=s.source||null,this.Aw=s.index,this.Rw=s.tag,this.Py=s.width,this.Ay=s.height,this.Ow=null}qn(){this.Py=0,this.Ay=0,this.Pw=null}Fw(){return this.mw}Vg(){return this.Py}Qg(){return this.Ay}Ew(t){this.Ow=t}tw(){return this.Ow}}}{let cl=function(t,s,i,e){const n=bl;gl.O(Sl,i,s),gl.O(vl,t,s),gl.It(n,Sl,vl),gl.normalize(n,n),e.set(n[0],n[1],n[2],gl.Tt(t,n))},fl=function(t,s,i,e,n,r,h){const o=h.x,a=h.y,l=h.z,u=h.w,c=h.Dw,f=h.Lw,d=h.kw,p=1-c,m=1-f,g=1-d;return o*t*c+o*e*p+a*s*f+a*n*m+l*i*d+l*r*g>=u||o*e*c+o*t*p+a*n*f+a*s*m+l*r*d+l*i*g>u},dl=function(t,s,i,e){return e.x*t+e.y*s+e.z*i>=e.w};PlaneFromPoints=cl,IsInFrontOfPlane=fl,IsPointInFrontOfPlane=dl;const pl=self.Cs,ml=self.ls,gl=ml.ws,yl=ml.Ss,wl=ml.ds,Sl=gl.create(),vl=gl.create(),bl=gl.create(),Ml=yl.create(),xl=wl.create(),Gl=gl.create(),Tl=gl.create(),Il=gl.create(),Cl=gl.create(),_l=gl.create(),El=gl.create(),Pl=gl.create(),Al=gl.create(),Rl=yl.v(0,0,1,1);pl.Nw={$w(t,s,i,e,n,r,h){const o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15];let c=n[0]*o+n[4]*a+n[8]*l+n[12]*u,f=n[1]*o+n[5]*a+n[9]*l+n[13]*u,d=n[2]*o+n[6]*a+n[10]*l+n[14]*u,p=n[3]*o+n[7]*a+n[11]*l+n[15]*u;return 0!==p&&(p=1/p,c*=p,f*=p,d*=p,h[0]=(.5*c+.5)*r[2]+r[0],h[1]=(.5*f+.5)*r[3]+r[1],h[2]=.5*(1+d),!0)},Bw(t,s,i,e,n,r,h){const o=xl,a=Ml;return wl.multiply(o,n,e),null!==wl.G(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,yl.At(a,a,o),0!==a[3]&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0))},Ww(t,s,i,e,n,r,h){const o=Sl,a=vl;if(!pl.Nw.Bw(t,s,0,e,n,r,o))return!1;if(!pl.Nw.Bw(t,s,1,e,n,r,a))return!1;const l=vl;gl.O(l,a,o);const u=bl;gl.set(u,0,0,1);const c=-i,f=gl.Tt(u,l);let d=0;if(0===f){if(0!==gl.Tt(u,o)+c)return!1}else if(d=-(gl.Tt(o,u)+c)/f,d<0)return!1;return gl.vt(h,o,l,d),!0}};class Ol{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Dw=NaN,this.Lw=NaN,this.kw=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.Dw=t>0?1:0,this.Lw=s>0?1:0,this.kw=i>0?1:0}}pl.Nw.jw=class{constructor(){this.Vw=new Ol,this.Hw=new Ol,this.Uw=new Ol,this.qw=new Ol,this.zw=new Ol,this.Jw=new Ol}Yw(t,s){const i=Rl;pl.Nw.Bw(0,1,0,t,s,i,Gl),pl.Nw.Bw(1,1,0,t,s,i,Tl),pl.Nw.Bw(0,0,0,t,s,i,Il),pl.Nw.Bw(1,0,0,t,s,i,Cl),pl.Nw.Bw(0,1,1,t,s,i,_l),pl.Nw.Bw(1,1,1,t,s,i,El),pl.Nw.Bw(0,0,1,t,s,i,Pl),pl.Nw.Bw(1,0,1,t,s,i,Al),cl(Il,Gl,_l,this.Vw),cl(Gl,Tl,El,this.Hw),cl(Tl,Cl,Al,this.Uw),cl(Cl,Il,Pl,this.qw),cl(Pl,_l,El,this.Jw),cl(Cl,Tl,Gl,this.zw)}Xw(t,s,i,e,n,r){return fl(t,s,i,e,n,r,this.Vw)&&fl(t,s,i,e,n,r,this.Hw)&&fl(t,s,i,e,n,r,this.Uw)&&fl(t,s,i,e,n,r,this.qw)&&fl(t,s,i,e,n,r,this.zw)&&fl(t,s,i,e,n,r,this.Jw)}Kw(t,s,i){return!dl(t,s,i,this.zw)}}}{const Fl=self.Cs,Dl=self.ls,Ll=Dl.ws,kl=Dl.Ss,Nl=Dl.ds,$l=Nl.create(),Bl=Ll.v(0,0,0),Wl=Ll.v(0,0,0),jl=Ll.v(0,0,0),Vl=Ll.v(0,1,0),Hl=kl.v(0,0,0,0),Ul=new Fl.El,ql=new Fl.Rect,zl=new Fl.El(0,0,1,0,1,1,0,1),Jl={Zw:1,Qw:1e4},Yl=Nl.v(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Fl.Nw.tS=class{constructor(t){t=Object.assign({},Jl,t),this.Py=0,this.Ay=0,this.sS=Fl.Qn(45),this.iS=Math.tan(this.sS/2),this.eS=Nl.create(),this.nS=Nl.create(),this.rS=!1,this.hS=t.Zw,this.oS=t.Qw,this.aS=[],this.lS=new Map,this.uS=null,this.cS=null,this.fS=null,this.dS=null,this.pS=null,this.mS=null,this.gS=null,this.yS=null,this.wS=null,this.SS=null,this.vS=null,this.bS=null,this.MS=new Map,this.xS=null,this.GS=[],this.TS=new Map,this.IS=0,this.CS=0,this._S=1,this.ES=[this._S],this.PS=1,this.AS=[this.PS],this.RS=.5,this.OS=[this.RS],this.FS=0,this.DS=!0,this.LS=!1}kS(){this.IS=0,this.CS=0,this.uS=null,this.cS=null,this.fS=null,this.dS=null,this.pS=null,this.mS=null,this.gS=null,this.yS=null,this.wS=null,this.SS=null,this.vS=null,this.bS=null,this.NS()}$S(){this.kS(),this.xS=null}BS(){for(const t of this.aS)t.qn();this.kS()}Vg(){return this.Py}Qg(){return this.Ay}WS(t){return this.jS()?100:t/(2*this.VS())}HS(t){return this.jS()?t/(2*this.VS())/this.WS(t):1}US(t){this.hS=t}qS(){return this.hS}zS(t){this.oS=t}JS(){return this.oS}YS(t){this.sS=t,this.iS=Math.tan(this.sS/2)}XS(){return this.sS}VS(){return this.iS}KS(){this.rS=!1}ZS(){this.rS=!0}jS(){return!this.rS}QS(){return this.rS}tv(t,s,i=.5,e=.5){const n=this.qS(),r=this.JS(),h=this.XS();if(.5===i&&.5===e)this.sv()?Nl.ut(t,h,s,n,r):Nl.perspective(t,h,s,n,r);else{const h=2*(i=1-i)-2,o=2*i,a=2*e-2,l=2*e,u=this.VS()*n,c=u*s;Nl.ot(t,h*c,o*c,a*u,l*u,n,r),this.sv()&&Nl.mul(t,Yl,t)}}ev(t,s,i,e=1){const n=self.devicePixelRatio,r=2*this.WS(i)*n*this.VS()/i,h=s*r/(2*n*e),o=i*r/(2*n*e),a=-h,l=h,u=-o,c=o;this.sv()?Nl.gt(t,a,l,u,c,this.qS(),this.JS()):Nl.dt(t,a,l,u,c,this.qS(),this.JS())}nv(t,s,i,e,n,r=1){let h=1;this.jS()&&(h=200*this.VS()/n);const o=jl;Ll.set(o,h,-h,1);const a=Bl,l=Wl;Ll.multiply(a,s,o),Ll.multiply(l,i,o),Nl.yt(t,a,l,e||Vl),o[2]=r,Nl.scale(t,t,o)}rv(t,s,i,e,n,r,h,o){return Ll.set(Bl,t,s,i),Ll.set(Wl,e,n,r),this.nv($l,Bl,Wl,Vl,h,o),$l}hv(t){this.aS.push(t),this.lS.set(t.Pc(),t)}ov(t){const s=this.aS.indexOf(t);-1!==s&&this.aS.splice(s,1),this.lS.delete(t.Pc())}NS(){Fl.bh(this.aS),this.lS.clear()}av(t){return this.lS.get(t)||null}lv(){return this.uS}uv(){this.cv(this.uS)}fv(){return this.cS}dv(){this.cv(this.cS)}pv(){this.cv(this.fS)}mv(){this.cv(this.dS)}gv(){this.cv(this.pS)}yv(){this.cv(this.mS)}wv(){this.cv(this.gS)}Sv(){this.cv(this.yS)}vv(){this.cv(this.wS)}bv(){this.cv(this.SS)}Mv(){this.cv(this.vS)}xv(){this.cv(this.bS)}Gv(t){this.xS=t}Tv(){return this.xS}Iv(t,s,i,e,n,r){const h=Fl.Nw._v.Cv(t,s,i,e,n,r);let o=this.MS.get(h);return o||(o=Fl.Un(Fl.Nw._v,this,t,s,i,e,n,r),this.MS.set(h,o)),o.Ev(),o}Pv(t){t.Av(),0===t.Rv()&&(this.xS===t&&(this.xS=null),this.MS.delete(t.Ov()),t.qn())}Fv(t){Fl.bh(this.GS),this.TS.clear();let s=0;for(const i of t){const t=i[0],e=i[1],n=i[2];this.GS.push([e,n]),this.TS.set(t,{number:s,Dv:e,Lv:n}),s++}}kv(t){return this.GS[t]}Nv(t){return this.kv(t)[0]}$v(t){return this.kv(t)[1]}Bv(t){const s=this.TS.get(t);if(void 0===s)throw new Error("invalid blend name");return s}Wv(t){const s=this.TS.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}jv(t){this.IS=t}Vv(){return this.IS}Hv(t){this.CS=t,this.xS=null}Uv(){return this.CS}ny(t,s,i,e){const n=Fl.rr(t,s,i,e),r=Math.sin(n),h=Math.cos(n),o=.5*this._S,a=r*o,l=h*o,u=this.PS;2===u?this.qv(t,s,0,i,e,0,a,l):1===u?this.zv(t,s,0,i,e,0,a,l):this.Jv(t,s,0,i,e,0,a,l)}Yv(t,s,i,e,n,r){const h=Fl.rr(t,s,e,n),o=Math.sin(h),a=Math.cos(h),l=.5*this._S,u=o*l,c=a*l,f=this.PS;2===f?this.qv(t,s,i,e,n,r,u,c):1===f?this.zv(t,s,i,e,n,r,u,c):this.Jv(t,s,i,e,n,r,u,c)}qv(t,s,i,e,n,r,h,o){const a=this.RS,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=2*o,p=2*h,m=l+h,g=u-o,y=l-h+d,w=u+o+p,S=c+h,v=f-o,b=c-h-d,M=f+o-p;this.Xv(m,g,i,S,v,r,b,M,r,y,w,i,zl)}zv(t,s,i,e,n,r,h,o){const a=this.RS,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,v=f+o;this.Xv(d,p,i,y,w,r,S,v,r,m,g,i,zl)}Jv(t,s,i,e,n,r,h,o){const a=this.RS,l=t+a,u=s+a,c=e+a,f=n+a,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,v=f+o;this.Xv(d,p,i,y,w,r,S,v,r,m,g,i,zl)}Kv(t,s,i,e,n,r){const h=Fl.rr(t,s,i,e),o=Math.sin(h),a=Math.cos(h),l=.5*this._S,u=o*l,c=a*l,f=this.PS;2===f?this.Zv(t,s,i,e,u,c,n,r):1===f?this.Qv(t,s,i,e,u,c,n,r):this.tb(t,s,i,e,u,c,n,r)}Zv(t,s,i,e,n,r,h,o){const a=this.RS,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=2*r,p=2*n,m=l+n,g=u-r,y=l-n+d,w=u+r+p,S=c+n,v=f-r,b=c-n-d,M=f+r-p;Ul.set(m,g,S,v,b,M,y,w),ql.set(h,0,o,0),this.sb(Ul,ql)}Qv(t,s,i,e,n,r,h,o){const a=this.RS,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,S=c-n,v=f+r;Ul.set(d,p,y,w,S,v,m,g),ql.set(h,0,o,0),this.sb(Ul,ql)}tb(t,s,i,e,n,r,h,o){const a=this.RS,l=t+a,u=s+a,c=i+a,f=e+a,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,S=c-n,v=f+r;Ul.set(d,p,y,w,S,v,m,g),ql.set(h,0,o,0),this.sb(Ul,ql)}ib(t,s,i,e){const n=.5*this._S,r=this.PS;2===r?this.eb(t,s,i,e,n):1===r?this.nb(t,s,i,e,n):this.rb(t,s,i,e,n)}eb(t,s,i,e,n){this.qv(t,s,0,i,s,0,0,n),this.qv(i,s,0,i,e,0,n,0),this.qv(i,e,0,t,e,0,0,-n),this.qv(t,e,0,t,s,0,-n,0)}nb(t,s,i,e,n){this.zv(t,s,0,i,s,0,0,n),this.zv(i,s,0,i,e,0,n,0),this.zv(i,e,0,t,e,0,0,-n),this.zv(t,e,0,t,s,0,-n,0)}rb(t,s,i,e,n){this.Jv(t,s,0,i,s,0,0,n),this.Jv(i,s,0,i,e,0,n,0),this.Jv(i,e,0,t,e,0,0,-n),this.Jv(t,e,0,t,s,0,-n,0)}hb(t){this.ib(t.Qa(),t.tl(),t.sl(),t.il())}ob(t){const s=Fl.rr(t.$r(),t.Br(),t.Wr(),t.jr()),i=Math.sin(s),e=Math.cos(s),n=.5*this._S,r=i*n,h=e*n,o=this.PS;2===o?this.ab(t,r,h):1===o?this.lb(t,r,h):this.ub(t,r,h)}ab(t,s,i){this.qv(t.$r(),t.Br(),0,t.Wr(),t.jr(),0,s,i),this.qv(t.Wr(),t.jr(),0,t.Vr(),t.Hr(),0,i,-s),this.qv(t.Vr(),t.Hr(),0,t.Ur(),t.qr(),0,-s,-i),this.qv(t.Ur(),t.qr(),0,t.$r(),t.Br(),0,-i,s)}lb(t,s,i){this.zv(t.$r(),t.Br(),0,t.Wr(),t.jr(),0,s,i),this.zv(t.Wr(),t.jr(),0,t.Vr(),t.Hr(),0,i,-s),this.zv(t.Vr(),t.Hr(),0,t.Ur(),t.qr(),0,-s,-i),this.zv(t.Ur(),t.qr(),0,t.$r(),t.Br(),0,-i,s)}ub(t,s,i){this.Jv(t.$r(),t.Br(),0,t.Wr(),t.jr(),0,s,i),this.Jv(t.Wr(),t.jr(),0,t.Vr(),t.Hr(),0,i,-s),this.Jv(t.Vr(),t.Hr(),0,t.Ur(),t.qr(),0,-s,-i),this.Jv(t.Ur(),t.qr(),0,t.$r(),t.Br(),0,-i,s)}cb(t){this._S=t,this.ES[this.ES.length-1]=t}fb(){return this._S}pb(t){if(this.ES.length>=100)throw new Error("pushed too many line widths - check push/pop pairs");this.ES.push(t),this._S=t}mb(){if(this.ES.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.ES.pop(),this._S=this.ES.at(-1)}gb(){this.PS=0,this.AS[this.AS.length-1]=0}yb(){this.PS=1,this.AS[this.AS.length-1]=0}wb(){this.PS=2,this.AS[this.AS.length-1]=0}Sb(t){if("butt"===t)this.bb();else if("square"===t)this.Mb();else{if("zag"!==t)throw new Error("invalid line cap");this.xb()}}bb(){if(this.AS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.AS.push(0),this.PS=0}Mb(){if(this.AS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.AS.push(1),this.PS=1}xb(){if(this.AS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.AS.push(2),this.PS=2}Gb(){if(this.AS.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.AS.pop(),this.PS=this.AS.at(-1)}Tb(t){this.RS=t,this.OS[this.OS.length-1]=t}Ib(){return this.RS}Cb(t){if(this.OS.length>=100)throw new Error("pushed too many line offsets - check push/pop pairs");this.OS.push(t),this.RS=t}_b(){if(this.OS.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.OS.pop(),this.RS=this.OS.at(-1)}Eb(){this.Pb(0),this.Ab(0)}Rb(t){const s=t.length/2;if(s<3)throw new Error("need at least 3 points");const i=s-2,e=i-1,n=t[0],r=t[1];for(let s=0;s<i;s+=2){const i=2*s,h=t[i+2],o=t[i+3],a=t[i+4],l=t[i+5];if(s===e)this.Ob(n,r,h,o,a,l,a,l);else{const s=t[i+6],e=t[i+7];this.Ob(n,r,h,o,a,l,s,e)}}}Fb(){this.Db(!0),this.FS++}Lb(){return this.FS}kb(){this.FS++}Nb(t){this.DS=!!t}$b(){return this.DS}Bb(t){this.LS=!!t}Wb(){return this.LS}jb(){return!1}sv(){return!1}Vb(){}Hb(){}Ub(){}qb(){return this.Vb()+this.Hb()+this.Ub()}zb(){return Fl.Un(Fl.Nw.Jb,this)}}}{const Xl=self.Cs;Xl.Nw.Yb=class{constructor(t,s){this.Yn=s.name,this.Xb=t,this.Kb=s.Zb||0,this.Qb=s.tM||0,this.sM=!!s.iM,this.eM=!!s.nM,this.rM=!!s.hM,this.oM=!!s.aM,this.lM=!!s.animated,this.uM=!!s.cM,this.fM=!!s.dM,this.pM=!1,this.mM=this.sM||this.uM||0!==this.Kb||0!==this.Qb}qn(){this.Xb=null}gM(){return this.Xb}Pc(){return this.Yn}yM(){return 0!==this.Kb||0!==this.Qb}wM(){return this.Kb}SM(){return this.Qb}vM(){return this.sM}bM(){return this.eM}MM(){return this.rM}xM(){return this.oM}GM(){return this.lM}TM(){return this.uM}IM(){return this.fM}CM(){return this.pM}_M(){return this.mM}EM(){return!1}}}{const Kl=self.Cs;Kl.Nw._v=class{constructor(t,s,i,e,n,r,h){this.Xb=t,this.Up=0,this.PM=null,this.AM="",this.RM=i,this.OM=Kl.Un(Kl.Go),this.OM.set(e),this.FM=n,this.DM=r,this.LM=h,"string"==typeof s?this.AM=s:(this.PM=s,this.AM=this.PM.Pc())}qn(){if(this.Up>0)throw new Error("releasing state group still in use");this.Xb=null,this.PM=null,this.AM=""}kM(){const t=this.Xb;t.cv(this.PM),t.NM(this.RM),t.$M(this.OM),t.Hv(this.FM),t.Pb(this.DM),t.Ab(this.LM),t.Gv(this)}Ov(){return Kl.Nw._v.Cv(this.AM,this.RM,this.OM,this.FM,this.DM,this.LM)}Ev(){++this.Up}Av(){--this.Up}Rv(){return this.Up}BM(){this.PM=null}WM(t){if(this.PM=t.av(this.AM),!this.PM)throw new Error("failed to restore shader program")}static Cv(t,s,i,e,n,r){return("string"==typeof t?t:t.Pc())+","+s+","+i.No()+","+i.$o()+","+i.Bo()+","+i.Wo()+","+e+","+n+","+r}}}{let Zl=function(t,s,i){const e=i.$r(),n=i.Br(),r=i.Wr()-e,h=i.jr()-n;return[e+r*t+(i.Ur()-e)*s,n+h*t+(i.qr()-n)*s]};interpolateQuad=Zl;const Ql=globalThis.Cs,tu=globalThis.assert,su=65535;Ql.Nw.jM=class{constructor(t,s,i){this.VM=t,this.HM=s,this.UM=i,this.Pa=NaN,this.Aa=NaN,this.FM=NaN,this.qM=NaN,this.zM=NaN,this.Pa=0,this.Aa=0,this.FM=0,this.qM=0,this.zM=0}JM(t,s,i,e){this.Pa=t,this.Aa=s,this.qM=i,this.zM=e}YM(){return this.Pa}XM(t){this.Pa!==t&&(this.Pa=t,this.VM.KM())}ZM(){return this.Aa}QM(t){this.Aa!==t&&(this.Aa=t,this.VM.KM())}tx(){return this.FM}sx(t){this.FM!==t&&(this.FM=Math.max(t,0),this.VM.KM())}ix(){return this.qM}nx(t){this.qM=t}hx(){return this.zM}ox(t){this.zM=t}lx(t,s,i){[this.Pa,this.Aa]=Zl(t.Pa,t.Aa,s),this.FM=t.FM,this.qM=Ql.Ct(i.Qa(),i.sl(),t.qM),this.zM=Ql.Ct(i.tl(),i.il(),t.zM)}ux(t,s,i){[this.Pa,this.Aa]=Zl(t.Pa,t.Aa,s),this.FM=t.FM,[this.qM,this.zM]=Zl(t.qM,t.zM,i)}mx(){return{x:this.YM(),y:this.ZM(),z:this.tx(),u:this.ix(),v:this.hx()}}gx(t){this.XM(t.x),this.QM(t.y),t.hasOwnProperty("z")&&this.sx(t.z),this.nx(t.u),this.ox(t.v)}yx(){return this.VM}wx(){return this.HM}Sx(){return this.UM}},Ql.Nw.vx=class{constructor(t,s,i){if(t<2||s<2)throw new Error("invalid mesh size");this.bx=t,this.Mx=s,this.xx=i||null,this.Gx=[],this.Tx=0,this.Ix=0,this.Cx=1,this._x=1,this.Ex=0,this.Px=!1,this.Ax=[],this.Rx=0,this.Ox=!0;const e=t-1,n=s-1;for(let i=0;i<s;++i){const s=[];for(let r=0;r<t;++r){const t=Ql.Un(Ql.Nw.jM,this,r,i),h=r/e,o=i/n;t.JM(h,o,h,o),s.push(t)}this.Gx.push(s)}}qn(){Ql.bh(this.Gx),Ql.bh(this.Ax)}Fx(){return this.bx}Dx(){return this.Mx}Lx(){return this.xx}kx(){return this.Gx}KM(){this.Px=!0,this.Ox=!0}Nx(){if(!this.Px)return;let t=1/0,s=1/0,i=-1/0,e=-1/0,n=0;for(const r of this.Gx)for(const h of r){const r=h.YM(),o=h.ZM();t=Math.min(t,r),s=Math.min(s,o),i=Math.max(i,r),e=Math.max(e,o),n=Math.max(n,h.tx())}this.Tx=t,this.Ix=s,this.Cx=i,this._x=e,this.Ex=n,this.Px=!1}$x(){return this.Nx(),this.Tx}Bx(){return this.Nx(),this.Ix}Wx(){return this.Nx(),this.Cx}jx(){return this.Nx(),this._x}Vx(){return this.Nx(),this.Ex}Hx(){return this.Vx()>0}Ux(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.bx||s<0||s>=this.Mx?null:this.Gx[s][t]}qx(t,s,i){const e=i instanceof Ql.Rect;if(t.Fx()!==this.Fx()||t.Dx()!==this.Dx())throw new Error("source mesh wrong size");const n=t.Gx,r=this.Gx;for(let t=0,h=r.length;t<h;++t){const h=n[t],o=r[t];for(let t=0,n=o.length;t<n;++t){const n=h[t],r=o[t];e?r.lx(n,s,i):r.ux(n,s,i)}}this.Ox=!0}zx(t){if(!this.Ox&&this.Rx===t)return;const s=this.bx,i=this.Mx,e=this.Ax,n=Math.floor(65535/s)-1;if(n<=0)throw new Error("mesh too large");const r=Math.ceil((i-1)/n);r<e.length&&(e.length=r);let h=0;for(let o=0;o<r;++o){const r=Math.min(n,i-h-1),a=(r+1)*s,l=3*a,u=2*a,c=(s-1)*r*6;if(o===e.length)e.push({Jx:new Float32Array(l),Yx:new Float32Array(u),Xx:new Uint16Array(c)});else{const t=e[o];t.Jx.length!==l&&(t.Jx=new Float32Array(l)),t.Yx.length!==u&&(t.Yx=new Float32Array(u)),t.Xx.length!==c&&(t.Xx=new Uint16Array(c))}const{Jx:f,Yx:d,Xx:p}=e[o];this.Kx(h,r,t,f,d,p),h+=n}this.Rx=t,this.Ox=!1}Kx(t,s,i,e,n,r){const h=this.Gx,o=this.bx;let a=0,l=0,u=0;for(let c=t,f=t+s+1;c<f;++c){const s=h[c],d=c+1,p=c-t,m=p*o,g=(p+1)*o;for(let t=0,h=s.length;t<h;++t){const o=s[t],c=t+1;if(e[a++]=o.YM(),e[a++]=o.ZM(),e[a++]=o.tx()+i,n[l++]=o.ix(),n[l++]=o.hx(),c<h&&d<f){const s=t+m,i=c+m,e=c+g,n=t+g;r[u++]=s,r[u++]=i,r[u++]=e,r[u++]=s,r[u++]=e,r[u++]=n}}}}Zx(t,s){this.zx(s);for(const{Jx:s,Yx:i,Xx:e}of this.Ax)t.Qx(s,i,e)}tG(t,s){s||(s=(t,s,i)=>[t,s,i]);const i=this.Gx;let e=i[0];for(let n=1,r=i.length;n<r;++n){const h=i[n];let o=e[0],a=h[0];for(let i=1,l=h.length;i<l;++i){const u=e[i],c=h[i],[f,d,p]=s(o.YM(),o.ZM(),o.tx()),[m,g,y]=s(u.YM(),u.ZM(),u.tx()),[w,S,v]=s(c.YM(),c.ZM(),c.tx()),[b,M,x]=s(a.YM(),a.ZM(),a.tx());t.Yv(f,d,p,m,g,y),t.Yv(f,d,p,w,S,v),t.Yv(f,d,p,b,M,x),i===l-1&&t.Yv(m,g,y,w,S,v),n===r-1&&t.Yv(b,M,x,w,S,v),o=u,a=c}e=h}}sG(t){const s=.001,i=.99999999,e=t.pu(),n=[],r=this.Fx()-1,h=this.Dx()-1,o=1/r,a=1/h,l=r-1,u=h-1;let c=e[0],f=e[1],d=Ql.Kn(Math.floor(c*r),0,l),p=Ql.Kn(Math.floor(f*h),0,u),m=!0,g=0,y=0,w=0,S=-1;const v=()=>{c=Ql.Kn(Ql.Ct(c,g,w),0,1),f=Ql.Kn(Ql.Ct(f,y,w),0,1),n.push(c,f)};for(let t=0,b=e.length;t<b;t+=2){c=e[t],f=e[t+1],n.push(c,f),d=Ql.Kn(Math.floor(c*r),0,l),p=Ql.Kn(Math.floor(f*h),0,u);const M=(t+2)%b;for(g=e[M],y=e[M+1],S=-1;;){if(n.length>1e6)throw new Error("Too many mesh poly points");const t=d*o,e=p*a,r=(d+1)*o,h=(p+1)*a;if(m=Ql.Xr(c,f,t,e,r,e,r,h),0!==S&&(w=Ql.Yr(c,f,g,y,t,e,r,h,-.001),w>=0&&w<=i))v(),m=!m,S=0;else if(p>0&&2!==S&&(w=Ql.Yr(c,f,g,y,t,e,r,e,s),w>=0&&w<=i))v(),p--,m=!1,S=4;else if(d<l&&3!==S&&(w=Ql.Yr(c,f,g,y,r,e,r,h,s),w>=0&&w<=i))v(),d++,m=!1,S=1;else if(d>0&&1!==S&&(w=Ql.Yr(c,f,g,y,t,e,t,h,s),w>=0&&w<=i))v(),d--,m=!0,S=3;else{if(!(p<u&&4!==S&&(w=Ql.Yr(c,f,g,y,t,h,r,h,s),w>=0&&w<=i)))break;v(),p++,m=!0,S=2}}}return Ql.Un(Ql.lu,n)}iG(t,s){const i=this.eG(t);this.nG(i),s.gu(i)}eG(t){const s=[],i=t.pu();for(let t=0,e=i.length;t<e;t+=2){const e=i[t],n=i[t+1],[r,h]=this.rG(e,n);s.push(r,h)}return s}rG(t,s){const i=this.Fx()-1,e=this.Dx()-1,n=1/i,r=1/e,h=Ql.Kn(Math.floor(t*i),0,i-1),o=Ql.Kn(Math.floor(s*e),0,e-1),a=h*n,l=o*r,u=(h+1)*n,c=(o+1)*r,f=this.Ux(h,o),d=this.Ux(h+1,o+1),p=Ql.Xr(t,s,a,l,u,l,u,c),m=p?a+n:a,g=p?l:l+r,y=this.Ux(h+(p?1:0),o+(p?0:1)),[w,S,v]=Ql.Kr(t,s,a,l,m,g,u,c);return Ql.Zr(w,S,v,f.YM(),f.ZM(),f.tx(),y.YM(),y.ZM(),y.tx(),d.YM(),d.ZM(),d.tx())}nG(t){const s=[],i=1e-7;let e=t[0],n=t[1],r=e-t.at(-2),h=n-t.at(-1);for(let o=0,a=t.length;o<a;o+=2){const l=(o+2)%a,u=t[l],c=t[l+1],f=u-e,d=c-n,p=Math.abs(f)<i&&Math.abs(r)<i&&Math.sign(d)===Math.sign(h),m=Math.abs(d)<i&&Math.abs(h)<i&&Math.sign(f)===Math.sign(r);(!p&&!m&&Math.abs(f/r-d/h)>.001||0==f&&0===d)&&s.push(e,n),e=u,n=c,r=f,h=d}s.length>=6&&s.length<t.length&&Ql.Th(t,s)}mx(){return{cols:this.Fx(),rows:this.Dx(),points:this.Gx.map(t=>t.map(t=>t.mx()))}}gx(t){const s=this.Fx(),i=this.Dx();if(t.cols!==s||t.rows!==i)throw new Error("mesh data wrong size");const e=t.points;for(let t=0;t<i;++t){const i=e[t];for(let e=0;e<s;++e)this.Ux(e,t).gx(i[e])}}}}{let iu=function(t,s){let i,e,n,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,n=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,n=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{hG:i,oG:e,format:n,type:r}};GetFormatSpecifiers=iu;const eu=self.Cs,nu=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),ru=new Set(["nearest","bilinear","trilinear"]),hu=new Set(["default","low","high"]),ou=new Set(["clamp-to-edge","repeat","mirror-repeat"]),au={aG:"clamp-to-edge",lG:"clamp-to-edge",uG:"trilinear",cG:0,fG:"rgba8",dG:!0,pG:"default",mG:!0,gG:!1,width:-1,height:-1},lu={mG:!0,flipY:!1},uu=new Set;eu.Nw.yG=class{constructor(t){this.Xb=t,this.wG=null,this.Py=0,this.Ay=0,this.SG=!0,this.vG="clamp-to-edge",this.bG="clamp-to-edge",this.MG="trilinear",this.xG=0,this.GG="rgba8",this.TG=!1,this.IG="default",this.Up=0}CG(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData||t instanceof ArrayBuffer))throw new Error("invalid texture source");if(s=Object.assign({},au,s),this.wG)throw new Error("already created texture");if(this.vG=s.aG,this.bG=s.lG,this.MG=s.uG,this.xG=s.cG,this.GG=s.fG,this.TG=!!s.dG&&this.Xb.$b(),this.IG=s.pG,!ou.has(this.vG)||!ou.has(this.bG))throw new Error("invalid wrap mode");if(!ru.has(this.MG))throw new Error("invalid sampling");if(!nu.has(this.GG))throw new Error("invalid pixel format");if(!hu.has(this.IG))throw new Error("invalid mipmap quality");if(this.SG=!0,t instanceof ArrayBuffer||null===t||s.gG){if(this.Py=s.width,this.Ay=s.height,t instanceof ArrayBuffer&&t.byteLength!==this.Py*this.Ay*4)throw new Error("ArrayBuffer wrong size")}else this.Py=t.width,this.Ay=t.height;if(this.Py<=0||this.Ay<=0)throw new Error("invalid texture data size");if(s.gG){const s=eu.co(this.Py,this.Ay);s.getContext("2d").drawImage(t,0,0,this.Py,this.Ay),t=s}const i=eu.vr(this.Py)&&eu.vr(this.Ay),e=this.Xb._G();if(this.Py>e||this.Ay>e)throw new Error("texture data exceeds maximum texture size");const n=this.Xb.EG(),r=this.Xb.PG();this.wG=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.wG),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.mG),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const h=iu(this.GG,n);if(this.Xb.AG()||i||!this.OG())if(r>=2){let s;s=this.TG?Math.floor(Math.log2(Math.max(this.Py,this.Ay))+1):1,n.texStorage2D(n.TEXTURE_2D,s,h.hG,this.Py,this.Ay),t instanceof ArrayBuffer?n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.Py,this.Ay,h.format,h.type,new Uint8Array(t)):null!==t&&n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,t)}else t instanceof ArrayBuffer?n.texImage2D(n.TEXTURE_2D,0,h.oG,this.Py,this.Ay,0,h.format,h.type,new Uint8Array(t)):null===t?n.texImage2D(n.TEXTURE_2D,0,h.oG,this.Py,this.Ay,0,h.format,h.type,null):n.texImage2D(n.TEXTURE_2D,0,h.oG,h.format,h.type,t);else{if(null===t)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if(t instanceof ArrayBuffer&&(t=new ImageData(new Uint8ClampedArray(t),this.Py,this.Ay)),t instanceof ImageData){const s=eu.co(this.Py,this.Ay);s.getContext("2d").putImageData(t,0,0),t=s}const s=eu.co(eu.br(this.Py),eu.br(this.Ay)),i=s.getContext("2d");i.imageSmoothingEnabled="nearest"!==this.MG,i.drawImage(t,0,0,this.Py,this.Ay,0,0,s.width,s.height),n.texImage2D(n.TEXTURE_2D,0,h.oG,h.format,h.type,s)}null!==t&&this.FG(n),n.bindTexture(n.TEXTURE_2D,null),this.Xb.DG(),this.Up=1,uu.add(this)}LG(t,s,i){if(i=Object.assign({},au,i),this.wG)throw new Error("already created texture");if(this.vG=i.aG,this.bG=i.lG,this.MG=i.uG,this.GG=i.fG,this.TG=!!i.dG&&this.Xb.$b(),this.IG=i.pG,!ou.has(this.vG)||!ou.has(this.bG))throw new Error("invalid wrap mode");if(!ru.has(this.MG))throw new Error("invalid sampling");if(!nu.has(this.GG))throw new Error("invalid pixel format");if(!hu.has(this.IG))throw new Error("invalid mipmap quality");this.SG=!1,this.Py=Math.floor(t),this.Ay=Math.floor(s);const e=eu.vr(this.Py)&&eu.vr(this.Ay),n=this.Xb._G();if(this.Py<=0||this.Ay<=0)throw new Error("invalid texture size");if(this.Py>n||this.Ay>n)throw new Error("texture exceeds maximum texture size");if(!this.Xb.AG()&&this.OG()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.Xb.EG(),h=this.Xb.PG();this.wG=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.wG),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.mG),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const o=iu(this.GG,r),a=h>=2?o.hG:o.oG;r.texImage2D(r.TEXTURE_2D,0,a,this.Py,this.Ay,0,o.format,o.type,null),this.FG(r),r.bindTexture(r.TEXTURE_2D,null),this.Xb.DG(),this.Up=1,uu.add(this)}kG(t){if("default"===this.IG)return this.SG?t.NICEST:t.FASTEST;if("low"===this.IG)return t.FASTEST;if("high"===this.IG)return t.NICEST;throw new Error("invalid mipmap quality")}OG(){return"clamp-to-edge"!==this.vG||"clamp-to-edge"!==this.bG}NG(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}FG(t){const s=eu.vr(this.Py)&&eu.vr(this.Ay);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.NG(t,this.vG)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.NG(t,this.bG)),"nearest"===this.MG)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.TG=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.Xb.AG())&&this.TG){t.hint(t.GENERATE_MIPMAP_HINT,this.kG(t)),t.generateMipmap(t.TEXTURE_2D);const s="trilinear"===this.MG&&!this.Xb.Wb();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.TG=!1;const i=this.Xb.$G();i&&this.xG>0&&"nearest"!==this.MG&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.xG,this.Xb.BG()))}WG(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.wG||this.Up<=0)throw new Error("texture not created");if(this.SG)throw new Error("cannot update static texture");s=Object.assign({},lu,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,n=this.Xb.PG(),r=this.Xb.EG();r.bindTexture(r.TEXTURE_2D,this.wG),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.mG),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY);const h=iu(this.GG,r),o=n>=2?h.hG:h.oG;try{if(this.Py===i&&this.Ay===e){const s=eu.vr(this.Py)&&eu.vr(this.Ay);r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,t),(s||this.Xb.AG())&&this.TG&&(r.hint(r.GENERATE_MIPMAP_HINT,this.kG(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.Py=i,this.Ay=e;const s=eu.vr(this.Py)&&eu.vr(this.Ay);if(!this.Xb.AG()&&this.OG()&&!s)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,h.format,h.type,t),(s||this.Xb.AG())&&this.TG&&(r.hint(r.GENERATE_MIPMAP_HINT,this.kG(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.Xb.DG()}jG(){if(this.Up>0)throw new Error("texture still has references");if(!this.wG)throw new Error("already deleted texture");uu.delete(this),this.Xb.EG().deleteTexture(this.wG),this.wG=null}VG(){return!!this.wG}HG(){return this.wG}gM(){return this.Xb}UG(){this.Up++}qG(){if(this.Up<=0)throw new Error("no more references");this.Up--}zG(){return this.Up}Vg(){return this.Py}Qg(){return this.Ay}JG(){return this.SG}YG(){let t=this.Py*this.Ay;switch(this.GG){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.TG&&(t+=Math.floor(t/3)),t}static BM(){uu.clear()}static XG(){return uu.values()}}}{const cu=self.Cs,fu=self.assert,du=self.ls,pu=du.ws,mu=du.ds,gu=new Set(["nearest","bilinear","trilinear"]),yu={uG:"trilinear",alpha:!0,depth:!1,KG:!0,ZG:!0,QG:0},wu=new Set;cu.Nw.tT=class{constructor(t){this.Xb=t,this.sT=null,this.iT=null,this.wG=null,this.eT=null,this.Py=0,this.Ay=0,this.nT=!0,this.MG="trilinear",this.rT=!0,this.hT=!1,this.oT=!0,this.aT=0,this.lT=mu.create(),this.uT=0,this.cT=0,this.fT=0}dT(t,s,i){i=Object.assign({},yu,i);const e=this.Xb.PG();if(this.wG||this.eT)throw new Error("already created render target");if(this.MG=i.uG,this.rT=!!i.alpha,this.hT=!!i.depth,this.oT=!!i.KG,this.nT=!!i.ZG,this.aT=i.QG,!gu.has(this.MG))throw new Error("invalid sampling");if(this.aT>0&&(e<2||this.oT))throw new Error("invalid use of multisampling");if(e<2&&(this.oT=!0),this.Py=t,this.Ay=s,this.Py<=0||this.Ay<=0)throw new Error("invalid render target size");this.pT();const n=this.Xb.EG();if(this.sT=n.createFramebuffer(),this.hT&&(this.iT=n.createFramebuffer()),this.oT){this.wG=this.Xb.mT(this.Py,this.Ay,{uG:this.MG,fG:this.rT?"rgba8":"rgb8",dG:!1});const t=this.wG.HG();n.bindFramebuffer(n.FRAMEBUFFER,this.sT),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),this.hT&&(n.bindFramebuffer(n.FRAMEBUFFER,this.iT),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0))}else{this.eT=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.eT);const t=this.rT?n.RGBA8:n.RGB8;if(this.aT>0){const s=n.getInternalformatParameter(n.RENDERBUFFER,t,n.SAMPLES);if(s&&s[0]){const t=s[0];this.aT>t&&(this.aT=t)}else this.aT=0}0===this.aT?n.renderbufferStorage(n.RENDERBUFFER,t,this.Py,this.Ay):n.renderbufferStorageMultisample(n.RENDERBUFFER,this.aT,t,this.Py,this.Ay),n.bindFramebuffer(n.FRAMEBUFFER,this.sT),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.eT),this.hT&&(n.bindFramebuffer(n.FRAMEBUFFER,this.iT),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.eT)),n.bindRenderbuffer(n.RENDERBUFFER,null)}const r=this.Xb.gT();this.hT&&r&&(n.bindFramebuffer(n.FRAMEBUFFER,this.sT),this.Xb.yT()?n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,r,0):n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r)),n.bindFramebuffer(n.FRAMEBUFFER,null),wu.add(this)}wT(t,s){if(this.Py===t&&this.Ay===s)return;this.Py=t,this.Ay=s,this.pT();const i=this.Xb.EG();i.bindFramebuffer(i.FRAMEBUFFER,this.sT),this.wG?this.wG.WG(new ImageData(this.Py,this.Ay)):(i.bindRenderbuffer(i.RENDERBUFFER,this.eT),i.renderbufferStorage(i.RENDERBUFFER,this.rT?i.RGBA8:i.RGB8,this.Py,this.Ay),i.bindRenderbuffer(i.RENDERBUFFER,null));const e=this.Xb.gT();this.hT&&e&&(this.Xb.yT()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}jG(){if(!this.wG&&!this.eT)throw new Error("already deleted render target");wu.delete(this);const t=this.Xb.EG();this.wG?(t.bindFramebuffer(t.FRAMEBUFFER,this.sT),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.hT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.iT),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.Xb.ST(this.wG),this.wG=null):this.eT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.sT),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.hT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.iT),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.eT),this.eT=null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.Xb.PG()>=2&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.sT),this.hT&&t.deleteFramebuffer(this.iT);const s=this.Xb.vT();s.bT=null,s.MT=null,this.sT=null}pT(){this.Xb.tv(this.lT,this.Py/this.Ay),this.uT=this.Xb.XS(),this.cT=this.Xb.qS(),this.fT=this.Xb.JS()}xT(){return this.sT}GT(){return this.iT}gM(){return this.Xb}TT(){return this.wG}IT(){return this.Xb.XS()===this.uT&&this.Xb.qS()===this.cT&&this.Xb.JS()===this.fT||this.pT(),this.lT}CT(){return"nearest"!==this.MG}_T(){return this.rT}ET(){return this.oT}PT(){return this.hT}Vg(){return this.Py}Qg(){return this.Ay}AT(){return this.nT}RT(){return this.aT}OT(){const t={uG:this.MG,alpha:this.rT,KG:this.oT};return this.nT||(t.width=this.Py,t.height=this.Ay),t}FT(t){return"nearest"!==(t=Object.assign({},yu,t)).uG===this.CT()&&!!t.alpha===this._T()&&!!t.depth===this.PT()&&!(this.Xb.PG()>=2&&!!t.KG!==this.ET())&&("number"==typeof t.width||"number"==typeof t.height?!this.AT()&&this.Vg()===Math.floor(t.width)&&this.Qg()===Math.floor(t.height):this.AT())}DT(){return this.wG?this.wG.HG():null}YG(){return this.wG?this.wG.YG():this.Py*this.Ay*(this.rT?4:3)}static async LT(t,s){const i=await t.kT(s,!0);return await cu.po(i)}static BM(){wu.clear()}static NT(){return wu.values()}static $T(t,s){for(const i of wu)i.AT()&&i.wT(t,s)}}}{const Su=self.Cs,vu=self.ls,bu=vu.ws,Mu=vu.ds,xu=new Set(["aPos","aTex","aColor","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);Su.Nw.BT=class extends Su.Nw.Yb{static async WT(t,s){const i=t.EG(),e=s.src,n=s.jT,r=s.name,h=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(h,e),i.compileShader(h);const o=i.createShader(i.VERTEX_SHADER);i.shaderSource(o,n),i.compileShader(o);const a=i.createProgram();i.attachShader(a,h),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aColor"),i.bindAttribLocation(a,3,"aPoints"),i.linkProgram(a);const l=t.VT();if(l?await t.HT(()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await Su.ph(5),!i.getShaderParameter(h,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(h);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+t)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(o);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+t)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const t=i.getProgramInfoLog(a);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+t)}const u=Su.xm(i.getProgramInfoLog(a)||"").trim();return u&&!Su.vm(u)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,u),i.deleteShader(h),i.deleteShader(o),a}static async UT(t,s){const i=await Su.Nw.BT.WT(t,s);return new Su.Nw.BT(t,i,s)}constructor(t,s,i){super(t,i);const e=t.EG(),n=t.vT();t.Db(),e.useProgram(s),this.qT=e,this.PM=s,this.zT="<default-device-transform>"===i.name;const r=e.getAttribLocation(s,"aPos"),h=e.getAttribLocation(s,"aTex"),o=e.getAttribLocation(s,"aColor");this.JT=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.YT),e.vertexAttribPointer(r,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==h&&(e.bindBuffer(e.ARRAY_BUFFER,t.XT),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(h)),-1!==o&&(e.bindBuffer(e.ARRAY_BUFFER,t.KT),e.vertexAttribPointer(o,4,t.ZT()?e.HALF_FLOAT:e.FLOAT,!1,0,0),e.enableVertexAttribArray(o)),-1!==this.JT&&(e.bindBuffer(e.ARRAY_BUFFER,t.QT),e.vertexAttribPointer(this.JT,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.JT)),e.bindBuffer(e.ARRAY_BUFFER,null),this.tI=new Su.Nw.sI(this,"matP","mat4"),this.iI=new Su.Nw.sI(this,"matMV","mat4"),this.eI=new Su.Nw.sI(this,"color","vec4"),this.nI=new Su.Nw.sI(this,"samplerFront","sampler"),this.rI=new Su.Nw.sI(this,"pointTexStart","vec2"),this.hI=new Su.Nw.sI(this,"pointTexEnd","vec2"),this.oI=new Su.Nw.sI(this,"zElevation","float"),this.aI=new Su.Nw.sI(this,"tileSize","vec2"),this.lI=new Su.Nw.sI(this,"tileSpacing","vec2"),this.uI=new Su.Nw.sI(this,"color2_","vec4"),this.cI=new Su.Nw.sI(this,"outlineThickness","float"),this.fI=new Su.Nw.sI(this,"samplerBack","sampler"),this.dI=new Su.Nw.sI(this,"samplerDepth","sampler"),this.pI=new Su.Nw.sI(this,"destStart","vec2"),this.mI=new Su.Nw.sI(this,"destEnd","vec2"),this.gI=new Su.Nw.sI(this,"srcStart","vec2"),this.yI=new Su.Nw.sI(this,"srcEnd","vec2"),this.wI=new Su.Nw.sI(this,"srcOriginStart","vec2"),this.SI=new Su.Nw.sI(this,"srcOriginEnd","vec2"),this.vI=new Su.Nw.sI(this,"pixelSize","vec2"),this.bI=new Su.Nw.sI(this,"seconds","float"),this.MI=new Su.Nw.sI(this,"devicePixelRatio","float"),this.xI=new Su.Nw.sI(this,"layerScale","float"),this.GI=new Su.Nw.sI(this,"layerAngle","float"),this.TI=new Su.Nw.sI(this,"layoutStart","vec2"),this.II=new Su.Nw.sI(this,"layoutEnd","vec2"),this.CI=new Su.Nw.sI(this,"zNear","float"),this._I=new Su.Nw.sI(this,"zFar","float"),this.EI=!!(this.vI.AI()||this.bI.AI()||this.fI.AI()||this.pI.AI()||this.mI.AI()||this.gI.AI()||this.yI.AI()||this.wI.AI()||this.SI.AI()||this.MI.AI()||this.xI.AI()||this.GI.AI()||this.TI.AI()||this.II.AI());const a=i.parameters||[];this.RI=[],this.pM=this.vI.AI()||this.gI.AI()||this.yI.AI()||this.wI.AI()||this.SI.AI(),this.OI=!1,this.FI=!1,this.eI.DI(1,1,1,1),this.uI.DI(1,1,1,1),this.nI.LI(0),this.fI.LI(1),this.dI.LI(2),this.rI.kI(0,0),this.hI.kI(1,1),this.oI.NI(0),this.aI.kI(0,0),this.lI.kI(0,0),this.pI.kI(0,0),this.mI.kI(1,1),this.gI.kI(0,0),this.yI.kI(0,0),this.wI.kI(0,0),this.SI.kI(0,0),this.vI.kI(0,0),this.MI.NI(1),this.CI.NI(t.qS()),this._I.NI(t.JS()),this.xI.NI(1),this.GI.NI(0),this.bI.NI(0),this.TI.kI(0,0),this.II.kI(0,0),this.cI.NI(1);for(const t of a){const s=t[0],i=t[2],e=new Su.Nw.sI(this,s,i);"color"===i?e.$I(0,0,0):e.NI(0),this.RI.push(e)}this.zT?this.BI(n.WI):(this.jI(n.WI,!0),this.VI(n.HI,!0));const l=n.UI;e.useProgram(l?l.PM:null)}qn(){this.qT.deleteProgram(this.PM),this.PM=null,this.Xb.ov(this),this.qT=null,super.qn()}qI(){return this.qT}zI(){return this.PM}JI(){return this.RI.length}YI(t){return t<0||t>=this.RI.length?null:this.RI[t].XI()}KI(t){for(let s=0,i=t.length;s<i;++s)if(!this.RI[s].ZI(t[s]))return!1;return!0}QI(t){for(let s=0,i=t.length;s<i;++s)this.RI[s].tC(t[s])}sC(t,s,i,e,n,r,h,o,a,l){return!(this.fI.AI()||this.vI.AI()&&!this.vI.iC(n,r)||this.pI.AI()&&!this.pI.iC(t.Qa(),t.tl())||this.mI.AI()&&!this.mI.iC(t.sl(),t.il())||this.MI.AI()&&!this.MI.eC(h)||this.xI.AI()&&!this.xI.eC(o)||this.GI.AI()&&!this.GI.eC(a)||this.gI.AI()&&!this.gI.iC(s.Qa(),s.tl())||this.yI.AI()&&!this.yI.iC(s.sl(),s.il())||this.wI.AI()&&!this.wI.iC(i.Qa(),i.tl())||this.SI.AI()&&!this.SI.iC(i.sl(),i.il())||this.TI.AI()&&!this.TI.iC(e.Qa(),e.tl())||this.II.AI()&&!this.II.iC(e.tl(),e.il())||this.bI.AI()&&!this.bI.eC(l))}nC(t,s,i,e,n,r,h,o,a,l){this.fI.AI()||(this.vI.AI()&&this.vI.rC(n,r),this.pI.AI()&&this.pI.rC(t.Qa(),t.tl()),this.mI.AI()&&this.mI.rC(t.sl(),t.il()),this.MI.AI()&&this.MI.hC(h),this.xI.AI()&&this.xI.hC(o),this.GI.AI()&&this.GI.hC(a),this.gI.AI()&&this.gI.rC(s.Qa(),s.tl()),this.yI.AI()&&this.yI.rC(s.sl(),s.il()),this.wI.AI()&&this.wI.rC(i.Qa(),i.tl()),this.SI.AI()&&this.SI.rC(i.sl(),i.il()),this.TI.AI()&&this.TI.rC(e.Qa(),e.tl()),this.II.AI()&&this.II.rC(e.tl(),e.il()),this.bI.AI()&&this.bI.hC(l))}jI(t,s){this.OI&&!s||this.zT||(this.tI.AI()&&this.tI.oC(t),this.OI=!0)}aC(){this.OI=!1}VI(t,s){this.FI&&!s||this.zT||(this.iI.AI()&&this.iI.oC(t),this.FI=!0)}lC(){this.FI=!1}BI(t){if(!this.zT)throw new Error("not device transform shader");this.tI.oC(t);const s=this.Xb,i=s.Vg()/2,e=s.Qg()/2,n=s.rv(i,e,s.WS(s.Qg()),i,e,0,s.Qg());this.iI.oC(n)}uC(t){this.eI.AI()&&this.eI.cC(t[0],t[1],t[2],t[3])}static fC(){return xu}static dC(t){return t?"\n#extension GL_EXT_conservative_depth : enable\nlayout (depth_greater) out highp float gl_FragDepth;\n\t":""}static pC(t){const s=t?"highp":"mediump";return["attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"attribute lowp vec4 aColor;","varying lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static mC(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"in lowp vec4 aColor;","out lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static gC(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","}"].join("\n")}static yC(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static wC(t){return["#version 300 es",Su.Nw.BT.dC(t),"in mediump vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static SC(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","}"].join("\n")}static vC(){return["#extension GL_EXT_frag_depth : enable","varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static bC(t){return["#version 300 es",Su.Nw.BT.dC(t),"in highp vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static MC(t,s,i,e){let n="";return t>=2?n="#version 300 es\n"+Su.Nw.BT.dC(e):(s&&(n="#extension GL_EXT_frag_depth : enable\n"),i&&(n+="#extension GL_EXT_shader_texture_lod : enable\n",n+="#extension GL_OES_standard_derivatives : enable\n")),n+`\nprecision highp float;\n${t>=2?"in":"varying"} vec2 vTex;\n${t>=2?"out lowp vec4 outColor;":""}\n${t>=2?"in":"varying"} lowp vec4 vColor;\nuniform lowp sampler2D samplerFront;\nuniform vec2 pixelSize;\n\nuniform vec2 tileSize;\nuniform vec2 tileSpacing;\nuniform float outlineThickness;\n\nconst float PI = 3.1415926;\n\nlowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nvec3 randVec3(vec2 seed)\n{\n\treturn vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));\n}\n\nlowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)\n{\n\tvec2 posRandom = tileSize;\n\tfloat angleRandom = outlineThickness;\n\t\n\tvec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;\n\t\n\tfloat angle = angleRandom * rand.z * PI;\n\tfloat sin_a = sin(angle);\n\tfloat cos_a = cos(angle);\n\tfloat aspect = pixelSize.x / pixelSize.y;\n\n\tvec2 mid = tile + vec2(0.5, 0.5);\n\tvec2 dp = uv - mid;\n\tdp.x /= aspect;\n\tvec2 r = vec2(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvec2 p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\t${t>=2?"return textureGrad(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&!i?"return texture2D(samplerFront, p);":""}\n}\n\nvoid main(void) {\n\t\n\t${t<2?"lowp vec4 outColor;":""}\n\t\n\tfloat blendMarginX = tileSpacing.x;\n\tfloat blendMarginY = tileSpacing.y;\n\t\n\tvec2 tile = floor(vTex);\n\tvec2 tex = fract(vTex);\n\tvec2 ddx = ${t>=2||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};\n\tvec2 ddy = ${t>=2||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};\n\t\n\tvec4 curTile = sampleTile(tile, vTex, ddx, ddy);\n\t\n\tbool inLeftMargin = (tex.x < blendMarginX);\n\tbool inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tbool inTopMargin = (tex.y < blendMarginY);\n\tbool inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tlowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tlowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tlowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tlowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tlowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tlowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutColor = curTile;\n\t}\n\t\n\toutColor *= vColor;\n\t${t<2?"gl_FragColor = outColor;":""}\n\t${t>=2?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n\t${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n}\n`}static xC(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static GC(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static TC(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static IC(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static CC(t){return["#version 300 es",Su.Nw.BT.dC(t),"uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static _C(){return["varying lowp vec4 vColor;","void main(void) {","\tgl_FragColor = vColor;","}"].join("\n")}static EC(){return["precision lowp float;","varying mediump vec2 vTex;","varying vec4 vColor;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(vColor.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(vColor.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static PC(){return["precision lowp float;","varying highp vec2 vTex;","varying vec4 vColor;","void main(void) {","\thighp float grad = vTex.x / (1.0 - vTex.y);","\tgl_FragColor = vColor * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);","}"].join("\n")}static AC(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = vColor * f;","}"].join("\n")}static RC(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = vColor * f;","}"].join("\n")}static OC(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp float innerF = step(distSq, 0.25);","\thighp vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}static FC(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 innerEdge = halfNorm - pixelSize * norm;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = vColor * f;","}"].join("\n")}static DC(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 pxNorm = pixelSize * norm;","\thighp vec2 innerEdge1 = halfNorm - pxNorm;","\thighp vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\thighp float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\thighp vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\thighp vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\thighp vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\thighp vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\thighp float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}}}{const Gu=self.Cs,Tu=self.ls,Iu=Tu.ds,Cu=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);Gu.Nw.sI=class{constructor(t,s,i){if(!Cu.has(i))throw new Error("invalid uniform type");this.xx=t,this.qT=this.xx.qI(),this.Yn=s,this.zc=i,this.LC="color"===this.zc,this.kC=this.qT.getUniformLocation(this.xx.zI(),s),this.NC=!!this.kC;const e=Cu.get(i);this.$C=new Float32Array(e),this.BC=new Float32Array(e)}qn(){this.xx=null,this.qT=null,this.kC=null}AI(){return this.NC}XI(){return this.zc}WC(){return this.LC}NI(t){this.AI()&&(this.$C[0]=t,this.BC.set(this.$C),this.qT.uniform1f(this.kC,t))}LI(t){this.AI()&&(this.$C[0]=t,this.BC.set(this.$C),this.qT.uniform1i(this.kC,t))}kI(t,s){this.AI()&&(this.$C[0]=t,this.$C[1]=s,this.BC.set(this.$C),this.qT.uniform2f(this.kC,t,s))}$I(t,s,i){this.AI()&&(this.$C[0]=t,this.$C[1]=s,this.$C[2]=i,this.BC.set(this.$C),this.qT.uniform3f(this.kC,t,s,i))}DI(t,s,i,e){this.AI()&&(this.$C[0]=t,this.$C[1]=s,this.$C[2]=i,this.$C[3]=e,this.BC.set(this.$C),this.qT.uniform4f(this.kC,t,s,i,e))}jC(t){t=Math.fround(t);const s=this.$C;s[0]!==t&&(s[0]=t,this.qT.uniform1f(this.kC,t))}VC(t){const s=this.$C;s[0]!==t&&(s[0]=t,this.qT.uniform1i(this.kC,t))}HC(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.$C;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.qT.uniform2f(this.kC,t,s))}UC(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.$C;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.qT.uniform3f(this.kC,t,s,i))}cC(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const n=this.$C;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(n[0]=t,n[1]=s,n[2]=i,n[3]=e,this.qT.uniform4f(this.kC,t,s,i,e))}oC(t){const s=this.$C;Iu.F(s,t)||(Gu.wh(s,t,0),this.qT.uniformMatrix4fv(this.kC,!1,t))}ZI(t){const s=this.BC;return this.WC()?s[0]===Math.fround(t.No())&&s[1]===Math.fround(t.$o())&&s[2]===Math.fround(t.Bo()):s[0]===Math.fround(t)}tC(t){const s=this.BC;this.WC()?(s[0]=t.No(),s[1]=t.$o(),s[2]=t.Bo()):s[0]=t}eC(t){return this.BC[0]===Math.fround(t)}iC(t,s){const i=this.BC;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}hC(t){this.BC[0]=t}rC(t,s){const i=this.BC;i[0]=t,i[1]=s}}}{const _u=self.Cs,Eu=self.ls,Pu=Eu.Ss,Au=Eu.ds,Ru=0,Ou=1,Fu=2,Du=3,Lu=4,ku=5,Nu=6,$u=7,Bu=8,Wu=9,ju=10,Vu=11,Hu=12,Uu=13,qu=14,zu=15,Ju=16,Yu=17,Xu=18,Ku=19,Zu=20,Qu=21,tc=22,sc=23,ic=24,ec=25,nc=26,rc=27,hc=28,oc=29,ac=30;_u.Nw.qC=class{constructor(t){this.zC=t,this.HI=Au.create(),this.WI=Au.create(),this.bT=null,this.MT=null,this.JC=!1,this.UI=null,this.YC=new _u.Rect,this.clearColor=_u.Un(_u.Go,0,0,0,0)}},_u.Nw.XC=class{constructor(t){const s=new ArrayBuffer(96);this.zc=0,this.KC=t,this.qT=t.zC.EG(),this.ZC=0,this.QC=0,this.t_=null,this.s_=new Float32Array(s,0,16),this.i_=new Float32Array(s,64,4),this.e_=new Float32Array(s,80,4),this.n_=[]}r_(t,s){this.zc=1,this.ZC=t,this.QC=s}h_(){const t=this.qT;t.drawElements(t.TRIANGLES,this.QC,t.UNSIGNED_SHORT,this.ZC)}o_(t){this.zc=2,this.t_=t}a_(){const t=this.qT,s=this.t_;t.bindTexture(t.TEXTURE_2D,s?s.HG():null)}l_(t){this.zc=20,t.Vo(this.i_,0)}u_(){const t=this.i_,s=this.KC.UI;s.uI.AI()&&s.uI.cC(t[0],t[1],t[2],t[3])}c_(t,s){this.zc=3,this.ZC=t,this.QC=s}f_(){this.qT.blendFunc(this.ZC,this.QC)}d_(t,s,i,e){this.zc=4;const n=this.i_;n[0]=t,n[1]=s,n[2]=i,n[3]=e}p_(){const t=this.i_;this.qT.viewport(t[0],t[1],t[2],t[3])}m_(t){this.zc=5,Au.S(this.s_,t)}g_(){const t=this.KC,s=t.zC.aS,i=t.UI,e=this.s_;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.jI(e,!0):n.aC()}Au.S(t.WI,e)}y_(t){this.zc=6,Au.S(this.s_,t)}w_(){const t=this.KC,s=t.zC.aS,i=t.UI,e=this.s_;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.VI(e,!0):n.lC()}Au.S(t.HI,e)}S_(t){this.zc=7,this.t_=t}v_(){const t=this.qT,s=this.t_,i=this.KC;s?(i.bT=s.xT(),i.MT=s.GT(),i.JC&&i.MT?t.bindFramebuffer(t.FRAMEBUFFER,i.MT):t.bindFramebuffer(t.FRAMEBUFFER,i.bT)):(i.bT=null,i.MT=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}b_(t){this.zc=8,t.Vo(this.s_,0)}M_(t,s,i,e){this.zc=8;const n=this.s_;n[0]=t,n[1]=s,n[2]=i,n[3]=e}x_(){const t=this.qT,s=this.s_,i=this.KC.clearColor,e=s[0],n=s[1],r=s[2],h=s[3];i.Jo(e,n,r,h)||(t.clearColor(e,n,r,h),i.Eo(e,n,r,h)),t.clear(t.COLOR_BUFFER_BIT)}G_(t){this.zc=14,t.Vo(this.s_,0)}T_(){const t=this.s_;this.KC.YC.set(t[0],t[1],t[2],t[3])}I_(t,s,i){this.zc=9,this.ZC=t,this.QC=1,this.s_[0]=s,i.Vo(this.i_,0)}C_(){const t=this.qT,s=this.KC,i=s.zC.cS;t.useProgram(i.PM),i.jI(s.WI,!1),i.VI(s.HI,!1);const e=s.YC;i.rI.AI()&&i.rI.HC(e.Qa(),e.tl()),i.hI.AI()&&i.hI.HC(e.sl(),e.il());const n=this.s_[0];if(i.oI.AI()&&i.oI.jC(n),i.eI.AI()){const t=this.i_;i.eI.cC(t[0],t[1],t[2],t[3])}t.drawArrays(t.POINTS,this.ZC/4,this.QC),t.useProgram(s.UI.PM)}__(t){this.zc=10,this.t_=t}E_(){const t=this.qT,s=this.KC,i=this.t_;s.UI=i,t.useProgram(i.PM),i.jI(s.WI,!1),i.VI(s.HI,!1)}P_(){this.zc=11}A_(){const t=this.KC.UI,s=this.qT,i=this.s_,e=this.i_,n=this.e_;if(t.fI.AI()){const t=this.KC.zC,i=this.t_;t.R_!==i&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,i?i.HG():null),t.R_=i,s.activeTexture(s.TEXTURE0))}t.vI.AI()&&t.vI.HC(i[0],i[1]),t.pI.AI()&&t.pI.HC(i[2],i[3]),t.mI.AI()&&t.mI.HC(i[4],i[5]),t.MI.AI()&&t.MI.jC(this.QC),t.xI.AI()&&t.xI.jC(i[6]),t.GI.AI()&&t.GI.jC(i[7]),t.gI.AI()&&t.gI.HC(i[12],i[13]),t.yI.AI()&&t.yI.HC(i[14],i[15]),t.wI.AI()&&t.wI.HC(n[0],n[1]),t.SI.AI()&&t.SI.HC(n[2],n[3]),t.TI.AI()&&t.TI.HC(e[0],e[1]),t.II.AI()&&t.II.HC(e[2],e[3]),t.bI.AI()&&t.bI.jC(this.ZC)}O_(){this.zc=12}F_(){const t=this.KC.UI.RI,s=this.n_;for(let i=0,e=t.length;i<e;++i){const e=t[i],n=s[i];e.WC()?e.UC(n.No(),n.$o(),n.Bo()):e.jC(n)}}D_(t){this.zc=13,this.t_=t}L_(){const t=this.qT,s=this.t_,i=this.KC.bT;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}k_(t,s,i){this.zc=16;const e=this.s_,n=this.KC.zC;e[0]=t.Vg(),e[1]=t.Qg(),e[2]=s?s.Vg():n.Vg(),e[3]=s?s.Qg():n.Qg(),e[4]=t.CT()?1:0,e[5]="stretch"===i;const r=this.n_;_u.bh(r),r.push(t.xT()),r.push(s?s.xT():null)}N_(){const t=this.s_,s=this.n_,i=this.qT,e=t[0],n=t[1],r=t[2],h=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,n,0,0,r,h,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const t=Math.min(e,r),s=Math.min(n,h),o=Math.max(n-h,0),a=Math.max(h-n,0);i.blitFramebuffer(0,o,t,s+o,0,a,t,s+a,i.COLOR_BUFFER_BIT,i.NEAREST)}}B_(t){this.zc=17,this.t_=t}W_(){this.t_.j_(),this.t_=null}V_(t){this.zc=18,this.t_=t}H_(){this.t_.U_(),this.t_=null}q_(t,s,i){this.zc=19;const e=this.s_;e[0]=t,e[1]=s,e[2]=i}z_(){const t=this.KC.UI,s=this.s_;t.vI.AI()&&t.vI.HC(s[0],s[1]),t.cI.AI()&&t.cI.jC(s[2])}J_(t,s,i,e,n,r,h){this.zc=15;const o=this.s_;t.Vo(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=n/i,o[8]=r/s,o[9]=h/i}Y_(){const t=this.KC.UI,s=this.s_;t.gI.AI()&&t.gI.HC(s[0],s[1]),t.vI.AI()&&t.vI.HC(s[4],s[5]),t.aI.AI()&&t.aI.HC(s[6],s[7]),t.lI.AI()&&t.lI.HC(s[8],s[9])}X_(t,s,i,e,n,r,h){this.zc=28;const o=this.s_;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=n,o[5]=r,o[6]=h}K_(){const t=this.KC.UI,s=this.s_;t.vI.AI()&&t.vI.HC(s[0],s[1]),t.aI.AI()&&t.aI.HC(s[2],s[3]),t.cI.AI()&&t.cI.jC(s[4]),t.lI.AI()&&t.lI.HC(s[5],s[6])}Z_(t){this.zc=21,this.ZC=t?1:0}Q_(){const t=this.qT,s=0!==this.ZC;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}tE(t){this.zc=22,this.ZC=t?1:0}sE(){const t=this.qT;0===this.ZC?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}iE(t){this.zc=23,this.ZC=t?1:0}eE(){const t=this.qT,s=this.KC,i=s.zC,e=0!==this.ZC;s.JC=e,t.activeTexture(t.TEXTURE2),e?(s.MT&&t.bindFramebuffer(t.FRAMEBUFFER,s.MT),t.bindTexture(t.TEXTURE_2D,i.gT())):(t.bindTexture(t.TEXTURE_2D,null),s.MT&&t.bindFramebuffer(t.FRAMEBUFFER,s.bT)),t.activeTexture(t.TEXTURE0)}nE(){this.zc=24}rE(){const t=this.qT;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}hE(){this.zc=25}oE(){const t=this.qT;t.enable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}aE(){this.zc=26}lE(){const t=this.qT;t.disable(t.STENCIL_TEST)}uE(t,s,i,e,n){this.zc=27,this.ZC=t?1:0;const r=this.s_;r[0]=s,r[1]=i,r[2]=e,r[3]=n}cE(){const t=this.qT,s=this.s_;1===this.ZC?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}fE(t){this.zc=29,this.ZC=t}dE(){const t=this.qT,s=this.ZC;0===s?t.disable(t.CULL_FACE):(t.enable(t.CULL_FACE),1===s?t.cullFace(t.BACK):t.cullFace(t.FRONT))}pE(t){this.zc=30,this.ZC=t}mE(){const t=this.qT;t.frontFace(0===this.ZC?t.CW:t.CCW)}gE(){switch(this.zc){case 1:return void this.h_();case 2:return void this.a_();case 3:return void this.f_();case 4:return void this.p_();case 5:return void this.g_();case 6:return void this.w_();case 7:return void this.v_();case 8:return void this.x_();case 9:return void this.C_();case 10:return void this.E_();case 11:return void this.A_();case 12:return void this.F_();case 13:return void this.L_();case 14:return void this.T_();case 15:return void this.Y_();case 16:return void this.N_();case 17:return void this.W_();case 18:return void this.H_();case 19:return void this.z_();case 20:return void this.u_();case 21:return void this.Q_();case 22:return void this.sE();case 23:return void this.eE();case 24:return void this.rE();case 25:return void this.oE();case 26:return void this.lE();case 27:return void this.cE();case 28:return void this.K_();case 29:return void this.dE();case 30:return void this.mE()}}}}{let lc=function(t,s,i,e,n,r){s?t.strokeRect(i,e,n,r):t.fillRect(i,e,n,r)},uc=function(t){return t*(4/3)},cc=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};fillOrStrokeRect=lc,ptToPx=uc,getOffsetParam=cc;const fc=self.Cs,dc=4096,pc=4,mc=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),gc={timeout:60},yc=new fc.Go(0,0,0,1),wc=new Set(["left","center","right"]),Sc=new Set(["top","center","bottom"]),vc=new Set(["word","cjk","character"]),bc=new Set(["ltr","rtl"]),Mc=new Set;fc.yE&&fc.yE.addEventListener("fontload",t=>{const s=t.font.Pc();for(const t of Mc)(t.wE()||fc.Ze(t.SE(),s))&&t.vE()});let xc=!1,Gc=!1;fc.Nw.Jb=class{constructor(t,s){s=Object.assign({},gc,s),this.Xb=t,this.bE="Arial",this.ME=16,this.xE=1,this.GE=0,this.TE=!1,this.IE=!1,this.CE="black",this._E=!1,this.Ng=null,this.EE=!0,this.PE=null,this.AE=new Set,this.RE="left",this.OE="top",this.Bc="",this.FE=null,this.DE=fc.Un(fc.Lg),this.LE="word",this.kE="ltr",this.NE=!1,this.$E=!1,this.BE=!1,this.WE=-1,this.jE=0,this.VE=0,this.HE=0,this.Py=0,this.Ay=0,this.UE=1,this.qE=null,this.zE=null,this.JE=null,this.YE=null,this.XE=-1,this.KE=-1,this.ZE="",this.QE="",this.tP="",this.sP=1,this.iP=1,this.eP=t=>this.nP(t),this.wG=null,this.rP=new fc.Rect,this.hP=1,this.oP=new fc.Df(()=>{this.aP(),this.lP(8,8)},s.timeout),this.uP=null,this.cP=!1,Mc.add(this)}qn(){this.PE=null,this.AE.clear(),this.Ng=null,this.FE=null,this.qE=null,this.zE=null,this.JE=null,this.YE=null,this.eP=null,this.oP.qn(),this.uP=null,this.aP(),this.DE.Pu(),this.DE=null,this.Xb=null,this.cP=!0,Mc.delete(this)}fP(){this.BE=!0}dP(){this.fP(),this.$E=!0}vE(){this.dP(),this.NE=!0}pP(t){if(t=!!t,this._E===t)return;this._E=t;const s=this._E?"alphabetic":"top";this.zE&&(this.zE.textBaseline=s),this.JE&&(this.JE.textBaseline=s),this.vE()}wE(){return this._E}Wg(t){this.Ng!==t&&(this.Ng=t,this.DE.Wg(t),this.Ng&&this.Ng.Tw()&&this.Ng.Iw().then(()=>this.fP()),this.vE())}mP(t){t=!!t,this.EE!==t&&(this.EE=t,this.fP())}gP(t){t||(t="serif"),this.bE!==t&&(this.bE=t,this.vE())}SE(){return this.bE}yP(t){t<.1&&(t=.1),this.ME!==t&&(this.ME=t,this.vE())}wP(){return this.ME}SP(t){this.xE!==t&&(this.xE=t,this.vE())}vP(t){this.GE!==t&&(this.GE=t,this.dP())}bP(){return this.GE}MP(t){t=!!t,this.TE!==t&&(this.TE=t,this.vE())}xP(){return this.TE}GP(t){t=!!t,this.IE!==t&&(this.IE=t,this.vE())}TP(){return this.IE}IP(t){t=Math.floor(t),this.WE!==t&&(this.WE=t,this.fP())}CP(){return this.WE}_P(t,s){let i=[];(this.TE||s.qy("b"))&&i.push("bold"),(this.IE||s.qy("i"))&&i.push("italic");const e=s.Uy("size"),n=(e?parseFloat(e.Eg):this.ME)*this.xE;t?i.push(n+"pt"):i.push(n*this.EP()+"pt");let r=this.bE;const h=s.Uy("font");return h&&h.Eg&&(r=h.Eg,this.PE&&!this.AE.has(r)&&(this.PE(r),this.AE.add(r))),r&&(mc.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}$M(t){t instanceof fc.Go&&(t=t.sa()),this.CE!==t&&(this.CE=t,this.fP())}PP(t,s,i){yc.Po(t,s,i),this.$M(yc)}AP(t){if(!wc.has(t))throw new Error("invalid horizontal alignment");this.RE!==t&&(this.RE=t,this.dP())}RP(){return this.RE}OP(t){if(!Sc.has(t))throw new Error("invalid vertical alignment");this.OE!==t&&(this.OE=t,this.dP())}FP(){return this.OE}DP(t){if(!vc.has(t))throw new Error("invalid word wrap mode");this.LE!==t&&(this.LE=t,this.vE())}LP(){return this.LE}kP(t){if(!bc.has(t))throw new Error("invalid text direction");this.kE!==t&&(this.kE=t,this.zE&&(this.zE.direction=this.kE),this.JE&&(this.JE.direction=this.kE),this.vE())}NP(){return this.kE}Vc(t){this.Bc!==t&&(this.Bc=t,this.vE())}$P(){return this.Bc}EP(){return this.hP*this.UE*self.devicePixelRatio}BP(t,s,i){if(void 0===i&&(i=1),t<=0||t<=0)return;if(this.VE===t&&this.HE===s&&this.UE===i)return;const e=this.VE;this.VE=t,this.HE=s,this.UE=i;const n=self.devicePixelRatio;this.Py=this.VE*this.UE*n,this.Ay=this.HE*this.UE*n;const r=Math.max(this.Py,this.Ay),h=Math.min(this.Xb._G(),4096);let o=1;r>h&&(o=h/r,this.Py=Math.min(this.Py*o,h),this.Ay=Math.min(this.Ay*o,h)),this.hP=o,this.VE!==e?this.vE():this.dP()}Vg(){return this.Py}Qg(){return this.Ay}WP(){return this.UE}jP(){return this.VP(),this.DE._y()}HP(){return this.VP(),this.DE.Ey()+this.DE.Bg()*(this.GE+4)-this.GE}UP(){this.VP();let t=0;for(const s of this.DE.$g())for(const i of s.hy())t+=i.oy();return t}TT(){return this.oP.Bf(),this.qP(),this.wG}zP(t,s){this.VP();const i=this.EP(),e=this.DE.$g();for(const n of e){const e=n.sy()*i;if(s>=n.jy()-n.Qg()*i+e&&s<n.jy()+e)for(const s of n.hy())if(t>=s.By()&&t<s.By()+s.Vg()*i)return s}return null}*JP(t){this.VP();const s=this.DE.$g();for(const i of s)for(const s of i.hy()){const i=s.Uy("tag");i&&fc.Ze(i.Eg,t)&&(yield s)}}YP(t,s){for(const i of this.JP(t)){if(0===s)return i;--s}return null}XP(t){let s=0;for(const i of this.JP(t))++s;return s}qP(){(!this.wG||this.BE||this.$E||this.NE)&&(this.cP||this.Py<=0||this.Ay<=0||(this.BE=!1,this.KP()))}KP(){this.cP||(this.VP(),this.lP(Math.max(fc.br(Math.ceil(this.Py)),128),Math.max(fc.br(Math.ceil(this.Ay)),64)),this.ZP(),this.QP(),this.oP.Bf())}lP(t,s){this.qE||(this.qE=fc.co(16,16));let i=!1;this.XE===t&&this.KE===s||(this.XE=t,this.KE=s,this.qE.width=t,this.qE.height=s,i=!0),this.zE||(this.zE=this.qE.getContext("2d"),i=!0),i?(this.zE.textBaseline=this._E?"alphabetic":"top",this.zE.direction=this.kE,this.zE.font=this.ZE,this.zE.fillStyle=this.tP,this.zE.strokeStyle=this.tP,this.zE.globalAlpha=this.sP,this.zE.lineWidth=this.iP):this.zE.clearRect(0,0,t,s)}tA(){this.JE||(this.JE=fc.co(16,16).getContext("2d"),this.YE=fc.co(16,16).getContext("2d"),this.JE.textBaseline=this._E?"alphabetic":"top",this.YE.textBaseline="top",this.JE.direction=this.kE,this.YE.direction=this.kE)}sA(t){this.QE!==t&&(this.QE=t,this.JE.font=t,this.YE.font=t)}iA(){if(!xc){xc=!0,this.tA();const t=this.JE.measureText("test");Gc="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return Gc}VP(){this.eA(),this.nA()}eA(){this.NE&&(this.tA(),!this._E||this.FE&&this.FE.toString()===this.Bc||(this.FE=new fc.pn(this.Bc,{pg:!0})),this.DE.Lg(this._E?this.FE.Cg():this.Bc,this.eP,this.VE,this.LE,0),this.NE=!1)}nA(){this.$E&&(this.rA(),this.$E=!1)}nP(t){const s=t.Yg()?t.wy().join(""):" ";this.sA(this._P(!0,t));const i=t.Uy("size"),e=(i?parseFloat(i.Eg):this.ME)*this.xE,n=this.JE.measureText(s);let r=0;if(this._E&&this.iA()){const t=this.YE.measureText(s);r=n.fontBoundingBoxAscent-t.fontBoundingBoxAscent}return{width:n.width,height:uc(e),fontBoundingBoxAscent:n.fontBoundingBoxAscent||0,fontBoundingBoxDescent:n.fontBoundingBoxDescent||0,Jg:r}}hA(t){this.ZE!==t&&(this.ZE=t,this.zE.font=t)}oA(t){this.tP!==t&&(this.tP=t,this.zE.fillStyle=t,this.zE.strokeStyle=t)}aA(t){this.sP!==t&&(this.sP=t,this.zE.globalAlpha=t)}lA(t){this.iP!==t&&(this.iP=t,this.zE.lineWidth=t)}rA(){const t=this.EP(),s=(4+this.GE)*t;let i=0;const e=this.DE.$g();if(0===e.length)return;for(const t of e){t.$y(NaN),t.Wy(NaN);for(const s of t.hy())s.$y(NaN),s.Wy(NaN)}const n=this._E&&this.iA();let r=e[0].Qg()*t;if("center"===this.OE){const h=e.reduce((i,e)=>i+e.Qg()*t+s,0)-s;i=Math.max(this.Ay/2-h/2,0),n&&(r=e[0].iy()*t)}else if("bottom"===this.OE){const r=e.reduce((i,e)=>i+e.Qg()*t+s,0)-this.GE*t,h=n?e.at(-1).sy()*t:0;i=this.Ay-r-h-2}for(let n=0,h=e.length;n<h;++n){const h=e[n],o=h.Qg()*t,a=i;if(this._E){if(i+=0===n?r:o,n>0&&i>this.Ay-4*t)break}else if(n>0&&i>=this.Ay-o)break;a>=0&&this.uA(h,i,t),this._E||(i+=o),i+=s}}uA(t,s,i){let e=0;"center"===this.RE?e=Math.floor((this.Py-t.Vg()*i)/2):"right"===this.RE&&(e=this.Py-t.Vg()*i),t.$y(e),t.Wy(s);for(const n of"ltr"===this.kE?t.hy():t.ky())this.cA(n,e,s,i),e+=n.Vg()*i}cA(t,s,i,e){const n=t.Uy("offsetx");s+=n?cc(n.Eg,t.Qg())*e:0;const r=t.Uy("offsety");if(i+=r?cc(r.Eg,t.Qg())*e:0,t.Kg()){const s=t.Uy("iconoffsety");i+=s?cc(s.Eg,t.Qg())*e:.2*t.Qg()*e}t.$y(s),t.Wy(i)}ZP(){this.zE.imageSmoothingEnabled=this.EE,this.zE.imageSmoothingQuality="high",this.jE=0;const t=this.EP(),s=this.DE.$g();for(const i of s)this.fA(i,t)}fA(t,s){const i=t.By(),e=t.jy();if(Number.isFinite(i)&&Number.isFinite(e))for(const i of"ltr"===this.kE?t.hy():t.ky())this.dA(i,s,t.Qg())}dA(t,s,i){const e=this.zE,n=t.By(),r=t.jy();if(!Number.isFinite(n)||!Number.isFinite(r))return;const h=i/16;let o=t.Vg()*s;const a=t.Qg()*s,l=t.Qg()/16,u=(4+this.GE)*s;let c=t.Yg()?t.wy():null;if(-1!==this.WE){if(this.jE>=this.WE)return;t.Yg()&&this.jE+c.length>this.WE&&(c=c.slice(0,this.WE-this.jE),o=this.nP(t).width*s),this.jE+=t.oy()}const f=t.Uy("background"),d=t.qy("u"),p=t.qy("s");if(t.Yg()&&fc.bm(c)&&!f&&!d&&!p||t.qy("hide"))return;const m=t.Uy("color"),g=t.Uy("opacity");this.aA(g?parseFloat(g.Eg)/100:1),f&&(this.oA(f.Eg),e.fillRect(n,r-a,o,a+u));const y=t.Uy("linethickness"),w=y?parseFloat(y.Eg):1,S=t.qy("stroke");if(S&&this.lA(.5*l*w*this.EP()),t.Yg()){const s=c.join("");if(this.hA(this._P(!1,t)),!S){this.lA(.5*l*w*this.EP());const i=t.Uy("outlineback");i&&(this.oA(i.Eg),this.pA(!0,s,n,r,o))}if(this.oA(m?m.Eg:this.CE),this.pA(S,s,n,r,o),!S){this.lA(.5*l*w*this.EP());const i=t.Uy("outline");i&&(this.oA(i.Eg),this.pA(!0,s,n,r,o))}}else if(t.Kg()&&t.Vg()>0){const s=t.tw(this.Ng);s&&e.drawImage(s,n,r-a,o,a)}if(this.oA(m?m.Eg:this.CE),d&&lc(e,S,n,r+s*h,o,s*h*w),p){const t=s*l,i=r-a/4+t/2;e.fillRect(n,i-t*w/2,o,t*w)}}pA(t,s,i,e,n){"rtl"===this.kE&&(i+=n),t?"Gecko"===fc.Zs.ni?this.zE.strokeText(s,i,e,n):this.zE.strokeText(s,i,e):"Gecko"===fc.Zs.ni?this.zE.fillText(s,i,e,n):this.zE.fillText(s,i,e)}QP(){this.Xb.mA()||(this.wG||(this.wG=this.Xb.mT(this.qE.width,this.qE.height,{dG:!0,pG:"high"})),this.Xb.gA(this.qE,this.wG),this.rP.set(0,0,this.Py/this.wG.Vg(),this.Ay/this.wG.Qg()),this.uP&&this.uP())}yA(){return this.rP}aP(){this.wG&&(this.Xb.mA()||this.Xb.ST(this.wG),this.wG=null)}static BM(){for(const t of Mc)t.aP()}static wA(){return Mc.values()}}}{const Tc=self.Cs;class Ic{constructor(t){this.qT=t.EG(),this.SA=t.PG(),this.vA=t.bA(),this.MA=null,this.$f=!1,this.xA=!1,this.GA=0,1===this.SA?this.MA=this.vA.createQueryEXT():this.MA=this.qT.createQuery()}qn(){this.TA(),this.qT=null,this.vA=null,this.xA=!1}TA(){this.MA&&(1===this.SA?this.vA.deleteQueryEXT(this.MA):this.qT.deleteQuery(this.MA),this.MA=null)}j_(){if(this.$f)throw new Error("query already active");1===this.SA?this.vA.beginQueryEXT(this.vA.TIME_ELAPSED_EXT,this.MA):this.qT.beginQuery(this.vA.TIME_ELAPSED_EXT,this.MA),this.$f=!0}U_(){if(!this.$f)throw new Error("query not active");1===this.SA?this.vA.endQueryEXT(this.vA.TIME_ELAPSED_EXT):this.qT.endQuery(this.vA.TIME_ELAPSED_EXT),this.$f=!1}IA(){if(!this.MA||this.xA||this.$f)return;let t=!1;t=1===this.SA?this.vA.getQueryObjectEXT(this.MA,this.vA.QUERY_RESULT_AVAILABLE_EXT):this.qT.getQueryParameter(this.MA,this.qT.QUERY_RESULT_AVAILABLE);const s=this.qT.getParameter(this.vA.GPU_DISJOINT_EXT);t&&!s&&(1===this.SA?this.GA=this.vA.getQueryObjectEXT(this.MA,this.vA.QUERY_RESULT_EXT):this.GA=this.qT.getQueryParameter(this.MA,this.qT.QUERY_RESULT),this.GA/=1e9,this.xA=!0),(t||s)&&this.TA()}CA(){return this.xA}_A(){if(!this.xA)throw new Error("no result available");return this.GA}}Tc.Nw.EA=class{constructor(t){this.Xb=t,this.FS=t.Lb(),this.$f=!1,this.PA=null,this.AA=!1,this.RA=null,this.OA=[]}qn(){for(const t of this.OA)t instanceof Ic&&t.qn();Tc.bh(this.OA),this.PA=null,this.RA=null,this.Xb=null}j_(){if(this.$f)throw new Error("query already active");const t=this.Xb.FA();t.length>0?(this.AA=!0,this.PA=t.at(-1),this.PA.DA(),this.PA.OA.push(this)):(this.AA=!1,this.PA=null),this.$f=!0,t.push(this),this.LA()}U_(){if(!this.$f)throw new Error("query not active");if(this.Xb.FA().pop()!==this)throw new Error("can only end most nested query");this.$f=!1,this.DA(),this.PA&&(this.PA.LA(),this.PA=null)}LA(){this.RA=Tc.Un(Ic,this.Xb),this.OA.push(this.RA),this.RA.j_()}DA(){this.RA.U_(),this.RA=null}IA(){for(const t of this.OA)t.IA()}kA(){return this.AA}CA(){return this.OA.every(t=>t.CA())}_A(){return this.OA.reduce((t,s)=>t+s._A(),0)}Lb(){return this.FS}}}{const Cc=self.Cs;Cc.Nw.NA=class{constructor(t,s=1e3){this.Xb=t,this.$A=s,this.BA=[],this.Xb.WA(this)}qn(){this.Pu(),this.Xb.jA(this),this.Xb=null}Pu(){for(const t of this.BA)t.qn();Cc.bh(this.BA)}VA(){const t=new Cc.Nw.EA(this.Xb);return this.BA.push(t),this.BA.length>this.$A&&this.BA.shift().qn(),t}HA(t){for(const s of this.BA){if(s.Lb()>=t)return;if(s.kA())return;s.IA()}}UA(t,s){if(s<=t)return NaN;let i=0;for(const e of this.BA){if(e.Lb()>=s)break;if(!(e.Lb()<t)){if(!e.CA())return NaN;i+=e._A()}}return i}qA(t){for(let s=0,i=this.BA.length;s<i;++s){const i=this.BA[s];if(!(i.Lb()<t))return void(s>0&&this.BA.splice(0,s));i.qn()}}}}{let _c=function(){Jc=-1;for(const t of zc)t.zA()&&(t.resolve(),zc.delete(t));zc.size>0&&(Jc=self.requestAnimationFrame(_c))};CheckPendingPolls=_c;const Ec=self.Cs,Pc=self.assert,Ac=self.ls,Rc=Ac.ws,Oc=Ac.Ss,Fc=Ac.ds,Dc={powerPreference:"default",JA:!0,alpha:!1,depth:!1,YA:!1,XA:2,failIfMajorPerformanceCaveat:!1},Lc=new Set(["default","low-power","high-performance"]),kc=65535,Nc=393210,$c=8e3,Bc=7996,Wc=new Ec.El(0,0,1,0,1,1,0,1),jc=Fc.create(),Vc=Fc.create(),Hc=new Ec.El,Uc=new Ec.Rect;let qc=null;Ec.Ls&&(self.KA=function(){qc?qc.loseContext():console.warn("WEBGL_lose_context not supported")},self.ZA=function(){qc?qc.restoreContext():console.warn("WEBGL_lose_context not supported")});const zc=new Set;let Jc=-1;Ec.Nw.QA=class extends Ec.Nw.tS{constructor(t,s){if(super(s),s=Object.assign({},Dc,s),!Lc.has(s.powerPreference))throw new Error("invalid power preference");const i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat};let e=null,n=0;if(s.XA>=2&&(e=t.getContext("webgl2",i),n=2),e||(e=t.getContext("webgl",i),n=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.qT=e,this.tR=e.getContextAttributes(),this.sR=e.getParameter(e.VERSION),this.SA=n,this.iR=Oc.create(),this.eR=!1,this.nR=Fc.create(),this.rR=!!s.depth,this.hR=!(!s.depth||!s.YA),this.oR=this.rR,this.aR=!1,this.lR=null,this.uR=!0,this.cR=0,this.fR=0,this.YT=null,this.XT=null,this.KT=null,this.dR=null,this.QT=null,this.pR=this.SA>=2&&void 0!==globalThis.Float16Array,this.mR=new Float32Array(196605),this.gR=new Uint16Array(393210),this.yR=new Float32Array(131070),this.wR=this.pR?new globalThis.Float16Array(262140):new Float32Array(262140),this.SR=new Float32Array(32e3),this.vR=0,this.bR=0,this.MR=0,this.xR=null,this.GR=null,this.TR=[],this.IR=0,this.CR=0,this._R=null,this.ER=0,this.KC=Ec.Un(Ec.Nw.qC,this),this.PR=Ec.Un(Ec.Go,1,1,1,1),this.AR=null,this.R_=null,this.RR=0,this.OR=0,this.FR=new Ec.Rect,this.DR=Ec.Un(Ec.Rect,0,0,-1,-1),this.LR=0,this.kR=0,this.NR=0,this.$R=-1,this.BR=0,this.WR=0,this.jR="(unavailable)",this.VR="(unavailable)",this.HR=[],this.UR=!1,this.qR=null,this.zR=null,this.JR=null,this.YR=null,this.XR=null,this.KR=null,this.ZR=null,this.QR=0,this.tO=!!s.JA,this.vA=null,this.sO=new Set,this.iO=[]}jb(){return!0}async $S(){super.$S();const t=this.qT;this.PR.Eo(1,1,1,1),this.AR=null,this.R_=null,this.vR=0,this.bR=0,this.MR=0,Ec.bh(this.TR),this.IR=0,this.CR=0,this.xR=null,this._R=null,this.FR.set(0,0,1,1),this.ER=0;const s=this.KC;s.UI=null,s.bT=null,s.MT=null,s.clearColor.Eo(0,0,0,0),s.YC.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.RR=t.ONE,this.OR=t.ONE_MINUS_SRC_ALPHA,this.eO(t),t.cullFace(t.BACK),t.disable(t.CULL_FACE),this.kR=0,t.frontFace(t.CW),this.NR=0,t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.rR?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.oR=this.rR,this.aR=!1,this.QT=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.QT),t.bufferData(t.ARRAY_BUFFER,this.SR.byteLength,t.DYNAMIC_DRAW),this.YT=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.YT),t.bufferData(t.ARRAY_BUFFER,this.mR.byteLength,t.DYNAMIC_DRAW),this.XT=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.XT),t.bufferData(t.ARRAY_BUFFER,this.yR.byteLength,t.DYNAMIC_DRAW),this.KT=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.KT),t.bufferData(t.ARRAY_BUFFER,this.wR.byteLength,t.DYNAMIC_DRAW),this.dR=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.dR),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.gR.byteLength,t.DYNAMIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.$R=t.getParameter(t.MAX_TEXTURE_SIZE);const i=t.getParameter(t.ALIASED_POINT_SIZE_RANGE);this.BR=i[0],this.WR=i[1],this.WR>2048&&(this.WR=2048),this.HR=t.getSupportedExtensions();const e=t.getExtension("WEBGL_debug_renderer_info");if(e&&(this.jR=t.getParameter(e.UNMASKED_VENDOR_WEBGL),this.VR=t.getParameter(e.UNMASKED_RENDERER_WEBGL)),this.qR=t.getExtension("KHR_parallel_shader_compile"),this.SA>=2&&("Chromium"!==Ec.Zs.ni||Ec.Zs.ei>=135)&&(this.JR=t.getExtension("EXT_conservative_depth")),Ec.Ls&&(qc=t.getExtension("WEBGL_lose_context")),this.tO&&(1===this.PG()?this.vA=t.getExtension("EXT_disjoint_timer_query"):this.vA=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.zR=t.getExtension("EXT_texture_filter_anisotropic"),this.zR?this.QR=t.getParameter(this.zR.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.QR=0,this.PG()<2&&this.rR&&this.hR&&(this.YR=t.getExtension("WEBGL_depth_texture"),!this.YR))throw new Error("no depth texture support");this.PG()<2&&(this.XR=t.getExtension("EXT_frag_depth"),this.KR=t.getExtension("OES_standard_derivatives"),this.ZR=t.getExtension("EXT_shader_texture_lod"));const n=Ec.Nw.BT,r=n.pC(!1);let h=n.gC(),o=r,a=n.TC(),l=n.xC(),u=n.SC(),c=n.pC(!0),f=!1;this.rR&&(this.PG()<2?this.XR&&(h=n.yC(),a=n.IC(),u=n.vC(),f=!0):(o=n.mC(),h=n.wC(this.nO()),a=n.CC(this.nO()),l=n.GC(),u=n.bC(this.nO()),c=n.mC(!0)));const d=n.MC(this.PG(),f,this.KR&&this.ZR,this.nO()),p=this.PG()>=2?n.mC():r,m=[[h,o,"<default>"],[h,o,"<default-device-transform>"],[a,l,"<point>"],[n._C(),r,"<fill>"],[n.EC(),r,"<lineargradient>"],[n.PC(),r,"<penumbra>"],[n.RC(),r,"<hardellipse>"],[n.OC(),r,"<hardellipseoutline>"],[n.FC(),r,"<smoothellipse>"],[n.DC(),r,"<smoothellipseoutline>"],[n.AC(),r,"<smoothline>"],[u,c,"<tilemap>"],[d,p,"<tilerandomization>"]],g=await Promise.all(m.map(t=>this.rO({src:t[0],jT:t[1],name:t[2]})));this.uS=g[0],this.GR=g[1],this.cS=g[2],this.pS=g[3],this.mS=g[4],this.gS=g[5],this.yS=g[6],this.wS=g[7],this.SS=g[8],this.vS=g[9],this.bS=g[10],this.fS=g[11],this.dS=g[12],this.uv()}async rO(t){const s=await Ec.Nw.BT.UT(this,t);return this.hv(s),s}hO(){this.xR=null}BP(t,s,i){if(this.Py===t&&this.Ay===s&&!i)return;this.Db();const e=this.qT,n=this.KC;this.Py=t,this.Ay=s,this.oO(0,0,t,s),this.tv(this.nR,t/s),this.aO(this.nR),this.GR&&(e.useProgram(this.GR.zI()),this.GR.BI(this.eS),this.xR=this.GR,this.KC.UI=this.GR),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.AR=null,this.R_=null,this.rR&&this.uR&&this.lO(this.Py,this.Ay),this._R&&this._R.wT(this.Py,this.Ay),e.bindFramebuffer(e.FRAMEBUFFER,null),this._R=null,n.bT=null,n.MT=null}lO(t,s){const i=this.qT;this.lR&&this.cR===t&&this.fR===s||(this.hR?(this.lR&&i.deleteTexture(this.lR),this.lR=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.lR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),this.PG()>=2?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.YR&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.YR.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.lR&&i.deleteRenderbuffer(this.lR),this.lR=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.lR),i.renderbufferStorage(i.RENDERBUFFER,this.SA>=2?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.cR=t,this.fR=s)}uO(t,s){this.rR&&(this.uR=!1,this.lO(t,s))}cO(){this.rR&&(this.uR=!0,this.lO(this.Py,this.Ay))}oO(t,s,i,e){const n=this.iR;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(this.fO().d_(t,s,i,e),Oc.set(n,t,s,i,e),this.CR=0)}YS(t){super.YS(t),this.tv(this.nR,this.Py/this.Ay)}US(t){super.US(t),this.tv(this.nR,this.Py/this.Ay)}zS(t){super.zS(t),this.tv(this.nR,this.Py/this.Ay)}aO(t){Fc.F(this.eS,t)||(this.fO().m_(t),Fc.S(this.eS,t),this.CR=0,this.eR=!0)}dO(){let t,s,i;const e=this._R;null===e?(t=this.nR,s=this.Vg(),i=this.Qg()):(t=e.IT(),s=e.Vg(),i=e.Qg()),this.aO(t),this.oO(0,0,s,i)}pO(t){Fc.F(this.nS,t)||(this.fO().y_(t),Fc.S(this.nS,t),this.CR=0,this.eR=!0)}mO(){this.eR=!1}gO(){return this.eR}vT(){return this.KC}fO(){const t=this.TR;return this.IR===t.length&&t.push(new Ec.Nw.XC(this.KC)),t[this.IR++]}Db(){0!==this.IR&&(this.mA()||(this.yO(),this.wO(),this.IR=0,this.vR=0,this.bR=0,this.MR=0,this.CR=0))}yO(){const t=this.qT;this.vR>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.YT),t.bufferSubData(t.ARRAY_BUFFER,0,this.mR.subarray(0,3*this.vR)),t.bindBuffer(t.ARRAY_BUFFER,this.XT),t.bufferSubData(t.ARRAY_BUFFER,0,this.yR.subarray(0,2*this.vR)),t.bindBuffer(t.ARRAY_BUFFER,this.KT),t.bufferSubData(t.ARRAY_BUFFER,0,this.wR.subarray(0,4*this.vR))),this.bR>0&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.dR),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,this.gR.subarray(0,this.bR))),this.MR>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.QT),t.bufferSubData(t.ARRAY_BUFFER,0,this.SR.subarray(0,this.MR)))}wO(){const t=this.TR;for(let s=0,i=this.IR;s<i;++s)t[s].gE()}SO(){return this.PR.Wo()}vO(t,s,i,e){const n=this.PR;n.Jo(t,s,i,e)||(n.Eo(t,s,i,e),this.xS=null,2===this.CR&&(this.CR=0))}bO(t){const s=this.PR;s.Wo()!==t&&(s.Lo(t),this.xS=null,2===this.CR&&(this.CR=0))}$M(t){const s=this.PR;s.equals(t)||(s.set(t),this.xS=null,2===this.CR&&(this.CR=0))}MO(){this.vO(1,1,1,1)}xO(){return this.PR}GO(t){t!==this.AR&&(this.fO().o_(t),this.AR=t,this.CR=0)}DG(){this.AR=null}NM(t){const s=this.kv(t);this.TO(s[0],s[1])}IO(t){const s=this.Bv(t);this.TO(s.Dv,s.Lv)}TO(t,s){t===this.RR&&s===this.OR||(this.fO().c_(t,s),this.RR=t,this.OR=s,this.CR=0,this.xS=null)}CO(){return this.RR===this.qT.ONE&&this.OR===this.qT.ONE_MINUS_SRC_ALPHA}_O(){this.TO(this.qT.ONE,this.qT.ONE_MINUS_SRC_ALPHA)}EO(){this.TO(this.qT.SRC_ALPHA,this.qT.ONE_MINUS_SRC_ALPHA)}Pb(t){this.kR!==t&&(this.fO().fE(t),this.kR=t,this.CR=0,this.xS=null)}PO(){return this.kR}Ab(t){this.NR!==t&&(this.fO().pE(t),this.NR=t,this.CR=0,this.xS=null)}AO(){return this.NR}RO(){this.TO(this.qT.ONE,this.qT.ZERO)}Rect(t){this.OO(t.Qa(),t.tl(),t.sl(),t.il())}OO(t,s,i,e){this.Ob(t,s,i,s,i,e,t,e)}FO(t,s){(this.vR+t>65535||this.bR+s>393210)&&this.Db(),1===this.CR?this.TR[this.IR-1].QC+=s:(this.fO().r_(2*this.bR,s),this.CR=1)}DO(){const t=this.vR;let s=this.bR;this.bR+=6;const i=this.gR;i[s++]=t,i[s++]=t+1,i[s++]=t+2,i[s++]=t,i[s++]=t+2,i[s]=t+3}El(t){this.LO(t,Wc)}Ob(t,s,i,e,n,r,h,o){this.FO(4,6),this.DO();const a=this.mR,l=this.vR;this.vR+=4;let u=3*l;const c=this.IS+this.CS;a[u++]=t,a[u++]=s,a[u++]=c,a[u++]=i,a[u++]=e,a[u++]=c,a[u++]=n,a[u++]=r,a[u++]=c,a[u++]=h,a[u++]=o,a[u]=c,Wc.Vo(this.yR,2*l),this.PR.Ho(this.wR,4*l)}sb(t,s){this.FO(4,6),this.DO();const i=this.vR;this.vR+=4,t.Yl(this.mR,3*i,this.IS+this.CS),s.rl(this.yR,2*i),this.PR.Ho(this.wR,4*i)}LO(t,s){this.FO(4,6),this.DO();const i=this.vR;this.vR+=4,t.Yl(this.mR,3*i,this.IS+this.CS),s.Vo(this.yR,2*i),this.PR.Ho(this.wR,4*i)}kO(t,s,i){this.FO(4,6),this.DO();const e=this.vR;this.vR+=4,t.Yl(this.mR,3*e,this.IS+this.CS),s.Vo(this.yR,2*e),this.wR.set(i,4*e)}NO(t,s,i,e,n,r,h,o,a,l,u,c,f){this.FO(4,6),this.DO();const d=this.mR,p=this.vR;this.vR+=4;let m=3*p;const g=this.IS+this.CS;d[m++]=t,d[m++]=s,d[m++]=g+i,d[m++]=e,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.rl(this.yR,2*p),this.PR.Ho(this.wR,4*p)}Xv(t,s,i,e,n,r,h,o,a,l,u,c,f){this.FO(4,6),this.DO();const d=this.mR,p=this.vR;this.vR+=4;let m=3*p;const g=this.IS+this.CS;d[m++]=t,d[m++]=s,d[m++]=g+i,d[m++]=e,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.Vo(this.yR,2*p),this.PR.Ho(this.wR,4*p)}$O(t,s,i,e,n,r,h,o,a,l,u,c,f,d){this.FO(4,6),this.DO();const p=this.mR,m=this.vR;this.vR+=4;let g=3*m;const y=this.IS+this.CS;p[g++]=t,p[g++]=s,p[g++]=y+i,p[g++]=e,p[g++]=n,p[g++]=y+r,p[g++]=h,p[g++]=o,p[g++]=y+a,p[g++]=l,p[g++]=u,p[g]=y+c,f.Vo(this.yR,2*m),this.wR.set(d,4*m)}Qx(t,s,i,e){if(t.length%3!=0)throw new Error("vertex buffer length not multiple of 3");if(t.length>196605)throw new Error(`too many vertices (${t.length/3}, limit 65535)`);if(i.length%3!=0)throw new Error("index buffer length not multiple of 3");if(i.length>393210)throw new Error(`too many indices (${i.length}, limit 393210)`);this.FO(t.length,i.length);const n=this.vR;this.mR.set(t,3*n),this.yR.set(s,2*n);const r=this.gR;if(0===n)r.set(i,this.bR);else{let t=this.bR;for(let s=0,e=i.length;s<e;++s)r[t++]=i[s]+n}const h=this.wR;if(void 0!==e)h.set(e,4*n);else{const s=this.PR,i=s.No(),e=s.$o(),r=s.Bo(),o=s.Wo();let a=4*n;for(let s=0,n=t.length;s<n;++s)h[a++]=i,h[a++]=e,h[a++]=r,h[a++]=o}this.vR+=t.length/3,this.bR+=i.length}BO(t,s){this.Hv(0),Fc.S(jc,this.eS),Fc.S(Vc,this.nS),this.dO();const[i,e]=this.WO(this._R),n=this.rv(0,0,this.WS(e),0,0,0,e);if(this.pO(n),"crop"===t&&this._R&&s){const t=this.Py/2,i=this.Ay/2,e=s.Vg(),n=s.Qg(),r=this._R.Vg(),h=this._R.Qg(),o=Math.min(r,e),a=Math.min(h,n),l=Math.max(n-h,0),u=Math.max(h-n,0);Uc.set(-t,i-u,-t+o,i-a-u),Hc.Xl(Uc),Uc.set(0,l,o,a+l),Uc.St(e,n),this.sb(Hc,Uc)}else{const t=i/2,s=e/2;this.OO(-t,s,t,-s)}this.aO(jc),this.pO(Vc)}jO(t){this.FR.equals(t)||(this.FR.S(t),this.fO().G_(t),this.CR=0)}VO(){}HO(t,s,i,e){this.MR>=7996&&this.Db();let n=this.MR;const r=this.IS+this.CS;2===this.CR&&this.ER===r?this.TR[this.IR-1].QC++:(this.fO().I_(n,r,this.PR),this.CR=2,this.ER=r);const h=this.SR;h[n++]=t,h[n++]=s,h[n++]=i,h[n++]=e,this.MR=n}cv(t){this.xR!==t&&(this.fO().__(t),this.xR=t,this.CR=0,this.xS=null)}UO(){return this.xR}qO(){this.cv(this.GR)}zO(t){this.fO().l_(t),this.CR=0}JO(t,s,i=1){this.fO().q_(t,s,i),this.CR=0}YO(t,s,i,e,n,r,h){if(this.xR!==this.fS)throw new Error("must set tilemap fill mode first");this.fO().J_(t,s,i,e,n,r,h),this.CR=0}XO(t,s,i,e,n,r,h){if(this.xR!==this.dS)throw new Error("must set tile randomization mode first");this.fO().X_(t,s,i,e,n,r,h),this.CR=0}KO(t,s,i,e,n,r,h,o,a,l,u){const c=this.xR;if(u%=10800,!c.EI||c.sC(s,i,e,n,r,h,o,a,l,u))return;const f=this.fO();f.P_(),c.nC(s,i,e,n,r,h,o,a,l,u);const d=f.s_;d[0]=r,d[1]=h,s.Vo(d,2),d[6]=a,d[7]=l,i.Vo(d,12);const p=f.i_;n.Vo(p,0);const m=p[1];p[1]=p[3],p[3]=m,e.Vo(f.e_,0),f.ZC=u,f.QC=o,c.fI.AI()?f.t_=t?t.TT():null:f.t_=null,this.CR=0}ZO(t){const s=this.xR;if(0===t.length||s.KI(t))return;const i=this.fO();i.O_(),s.QI(t),Ec.Th(i.n_,t),this.CR=0}QO(t,s,i,e){this.fO().M_(t,s,i,e),this.CR=0}Pu(t){this.fO().b_(t),this.CR=0}tF(){}Fb(){super.Fb(),this.qT.flush()}sF(){this.rR&&this._R&&this._R.PT()&&(this.fO().Z_(this.oR),this.CR=0)}iF(t){t=!!t,this.oR!==t&&this.rR&&(this.oR=t,this.fO().tE(t),this.CR=0)}eF(){return this.oR}gT(){return this.lR}yT(){return this.hR}nF(t){if(t=!!t,this.hR&&this.aR!==t){if(t&&this.eF())throw new Error("depth still enabled");this.aR=t,this.fO().iE(t),this.CR=0}}rF(t,s,i,e,n=0){t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),this.DR.Za(t,s,i,e)||(this.DR.Ua(t,s,i,e),s=(n||this.WO(this.hF())[1])-s-e,this.fO().uE(!0,t,s,i,e),this.CR=0)}oF(){-1!==this.DR.sl()&&(this.DR.set(0,0,-1,-1),this.fO().uE(!1,0,0,0,0),this.CR=0)}aF(){for(const t of this.sO)t.HA(this.FS)}mA(){return!this.qT||this.qT.isContextLost()||this.UR}BM(){super.BS(),Ec.Nw.yG.BM(),Ec.Nw.tT.BM(),Ec.Nw.Jb.BM();for(const t of this.sO)t.Pu();this.HR=[],this.vA=null,this.qR=null,this.JR=null,this.zR=null,this.YR=null,this.XR=null,this.KR=null,this.ZR=null,this.QR=0,this.jR="(unavailable)",this.VR="(unavailable)",this.xR=null,this.GR=null,this.lR=null;for(const t of this.MS.values())t.BM()}async WM(){this.UR=!0,await this.$S(),this.UR=!1;for(const t of this.MS.values())t.WM(this);this.BP(this.Py,this.Ay,!0)}lF(t,s){if(this.mA())throw new Error("context lost");this.Db();const i=Ec.Un(Ec.Nw.yG,this);return i.CG(t,s),i}async uF(t,s){if(this.mA())throw new Error("context lost");if(s=Object.assign({},s),Ec.Ai.ImageBitmapOptions){let i=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});const e=s.aG&&"clamp-to-edge"!==s.aG||s.lG&&"clamp-to-edge"!==s.lG,n=Ec.vr(i.width)&&Ec.vr(i.height);return this.AG()||n||!e?s.mG=!1:Ec.Ai.Di?(i=await createImageBitmap(t,{premultiplyAlpha:"premultiply",resizeWidth:Ec.br(i.width),resizeHeight:Ec.br(i.height)}),s.mG=!1):i=await createImageBitmap(t,{premultiplyAlpha:"none"}),await Ec.pf(()=>this.lF(i,s))}if(t instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const s=await Ec.uo(t);t=s}return await Ec.pf(()=>this.lF(t,s))}mT(t,s,i){this.Db();const e=Ec.Un(Ec.Nw.yG,this);return e.LG(t,s,i),e}gA(t,s,i){this.Db(),s.WG(t,i)}ST(t){t&&(t.qG(),t.zG()>0||(this.Db(),t===this.AR&&(this.qT.bindTexture(this.qT.TEXTURE_2D,null),this.AR=null),t===this.R_&&(this.qT.activeTexture(this.qT.TEXTURE1),this.qT.bindTexture(this.qT.TEXTURE_2D,null),this.qT.activeTexture(this.qT.TEXTURE0),this.R_=null),t.jG()))}cF(t){let s=this.Py,i=this.Ay,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height&&(i=Math.floor(t.height),e=!1)),s<=0||i<=0)throw new Error("invalid size");this.Db();const n=Ec.Un(Ec.Nw.tT,this);return n.dT(s,i,Object.assign({ZG:e},t)),this._R=null,this.KC.bT=null,this.KC.MT=null,n}fF(t,s=!0){t!==this._R&&(t&&t.AT()&&t.wT(this.Py,this.Ay),this.fO().S_(t),this._R=t,this.CR=0,s&&this.dO())}hF(){return this._R}WO(t){return t?[t.Vg(),t.Qg()]:[this.Py,this.Ay]}dF(t,s="stretch"){this.SA<2||this._R&&this._R.RT()>0?(this.RO(),this.MO(),this.pF(t,s)):(this.fO().k_(t,this._R,s),this.CR=0)}pF(t,s="stretch"){const i=t.TT();if(!i)throw new Error("not a texture-backed render target");this.GO(i),this.BO(s,i)}mF(t){this.SA<2||(this.fO().D_(t.xT()),this.CR=0)}gF(t){this.fF(null),this.Db();const s=t.TT();s===this.AR&&(this.qT.bindTexture(this.qT.TEXTURE_2D,null),this.AR=null),s===this.R_&&(this.qT.activeTexture(this.qT.TEXTURE1),this.qT.bindTexture(this.qT.TEXTURE_2D,null),this.qT.activeTexture(this.qT.TEXTURE0),this.R_=null),t.jG()}async kT(t,s,i){this.Db();const e=this._R;let n,r,h;t?(n=t.Vg(),r=t.Qg(),h=t.xT()):(n=this.Vg(),r=this.Qg(),h=null);let o=0,a=0,l=n,u=r;if(i){o=Ec.Kn(Math.floor(i.Qa()),0,n-1),a=Ec.Kn(Math.floor(i.tl()),0,r-1);let t=i.width();t=0===t?n-o:Ec.Kn(Math.floor(t),0,n-o);let s=i.height();s=0===s?r-a:Ec.Kn(Math.floor(s),0,r-a),l=t,u=s,a=r-(a+u)}const c=this.qT;c.bindFramebuffer(c.FRAMEBUFFER,h);const f=()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this._R=null,this.KC.bT=null,this.KC.MT=null,this.fF(e)};let d;if(!s&&this.PG()>=2){c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const t=c.createBuffer(),s=l*u*4,i=c.PIXEL_PACK_BUFFER;c.bindBuffer(i,t),c.bufferData(i,s,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(i,null),f();const e=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);await this.HT(()=>c.getSyncParameter(e,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(e),d=new ImageData(l,u),c.bindBuffer(i,t),c.getBufferSubData(i,0,new Uint8Array(d.data.buffer),0,s),c.bindBuffer(i,null),c.deleteBuffer(t)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}yF(){this.iF(!0),this.fO().nE(),this.CR=0,this.LR=1}wF(){this.iF(!1),this.fO().hE(),this.CR=0,this.LR=2}SF(){return 2===this.LR}vF(){this.iF(!0),this.fO().aE(),this.CR=0,this.LR=0}bF(t){this.MF()&&(this.fO().B_(t),this.CR=0)}xF(t){this.MF()&&(this.fO().V_(t),this.CR=0)}HT(t){const s=new Promise(s=>zc.add({resolve:s,zA:t}));return-1===Jc&&(Jc=self.requestAnimationFrame(_c)),s}Vb(){return this.Py*this.Ay*(this.tR.alpha?4:3)}Hb(){let t=0;for(const s of Ec.Nw.tT.NT())s.TT()||(t+=s.YG());return t}Ub(){let t=0;for(const s of Ec.Nw.yG.XG())t+=s.YG();return t}GF(){return this.sR}PG(){return this.SA}ZT(){return this.pR}TF(){return"webgl"+this.PG()}AG(){return this.PG()>=2}_G(){return this.$R}IF(){return this.BR}CF(){return this.WR}_F(){return this.jR}EF(){return this.VR}PF(){if(this.PG()>=2)return"webgl2";{const t=[];return this.XR&&t.push("EXT_frag_depth"),this.KR&&t.push("OES_standard_derivatives"),this.ZR&&t.push("EXT_shader_texture_lod"),t.length>0?"webgl1:"+t.join(","):"webgl1:none"}}AF(){return this.HR}MF(){return!!this.vA}bA(){return this.vA}VT(){return this.qR}nO(){return!!this.JR}$G(){return this.zR}BG(){return this.QR}WA(t){this.sO.add(t)}jA(t){this.sO.delete(t)}FA(){return this.iO}EG(){return this.qT}eO(t){this.Fv([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}RF(){return this.zb()}}}{const Yc=self.Cs,Xc={OF:null,FF:null,DF:null,getTime:null,LF:null};Yc.Nw.kF=class{constructor(t){t=Object.assign({},Xc,t),this.NF=t.OF,this.$F=t.FF,this.BF=t.DF,this.WF=t.getTime,this.jF=t.LF,this.VF=null,this.HF=new Set}UF(t){this.HF.add(t)}qF(t){this.HF.delete(t)}BM(){this.VF=null;for(const t of this.HF)t.BM()}zF(t){return this.NF?this.NF(t):[t.Vg(),t.Qg()]}hF(t){return this.$F(t)}JF(t,s){this.BF(t,s)}YF(){return this.WF()}Fp(t){this.jF(t)}XF(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.VF||this.VF.Vg()===s&&this.VF.Qg()===i||(t.ST(this.VF),this.VF=null),null===this.VF&&(this.VF=t.lF(null,{width:s,height:i,uG:"nearest",dG:!1})),this.VF}}}{const Kc=self.Cs,Zc=self.assert,Qc=self.ls,tf=Qc.ds,sf=Kc.Un(Kc.Rect),ef=Kc.Un(Kc.Rect),nf=Kc.Un(Kc.Rect),rf=Kc.Un(Kc.Rect),hf=tf.create(),of=tf.create(),af={KF:null,ZF:null,QF:null,tD:!1},lf={sD:null,iD:!1,eD:!1,nD:!1,rD:!1,hD:!1,oD:!1};Kc.Nw.aD=class{constructor(t,s){s=Object.assign({},af,s),this.Vp=t,this.lD=s.KF,this.uD=s.ZF,this.cD=s.QF,this.fD=null,this.dD=[],this.pD=[],this.mD=[],this.gD=!1,this.RM=0,this.yD=!1,this.wD=!1,this.SD=!1,this.vD=!1,this.bD=!1,this.MD=!1,this.eR=!1,this.xD=!1,this.GD=!1,this.TD=!1,this.ID=!1,this.CD=!1,this._D=0,this.ED=[null,null,null],this.PD=!!s.tD,this.AD=0,this.RD=0,this.OD=0,this.FD=0,this.DD=null,this.LD=null,this.kD=Kc.Un(Kc.Rect),this.ND=Kc.Un(Kc.Rect),this.$D=Kc.Un(Kc.Rect),this.BD=Kc.Un(Kc.Rect),this.WD=Kc.Un(Kc.Rect),this.jD=1,this.VD=1,this.HD=0,this.UD=0,this.qD=null,this.zD=null,this.JD=0,this.YD=0,this.XD=0,this.KD=0,this.ZD=!1,this.lT=tf.create(),this.QD=tf.create(),this.Vp.UF(this)}qn(){this.Vp.qF(this),Kc.bh(this.mD),Kc.bh(this.dD),Kc.bh(this.pD),this.DD=null,this.LD=null,this.lD=null,this.uD=null,this.cD=null}BM(){this.gD=!0,Kc.bh(this.mD),Kc.bh(this.dD),Kc.bh(this.pD)}tL(){return this.gD}sL(t,s){if(s=Object.assign({},lf,s),Kc.bh(this.mD),this.AD=0,this.RD=0,this.yD=!1,this.wD=!1,this.SD=!1,this.vD=!1,this.bD=!1,this.MD=!1,this._D=0,this.CD=!!s.rD,this.ID=!!s.oD,this.gD=!1,Kc.Th(this.dD,t),0===t.length)return;if(s.sD){if(s.sD.length!==t.length)throw new Error("incorrect indexMap length");Kc.Th(this.pD,s.sD)}else{Kc.bh(this.pD);for(let s=0,i=t.length;s<i;++s)this.pD.push(s)}for(const s of t)this.AD+=s.wM(),this.RD+=s.SM(),s.GM()&&(this.yD=!0),s.IM()&&(this.wD=!0),s.TM()&&(this.SD=!0),s.vM()&&(this.vD=!0),s.EM()&&(this.bD=!0);this.MD=this.iL(t[0].gM());const i=this.eL(t[0],s),e=this.nL(t.at(-1),s);if(1===t.length&&!i&&!e)return void(this.TD=!0);this.TD=!1;let n=0;i&&(this._D=1,this.mD.push(Kc.Un(Kc.Nw.aD.hL.rL,this,-1,1)),n=1);for(let s=0,r=t.length;s<r;++s)if(0!==s||i){let t=1===n?2:1;s!==r-1||e||(t=0),this._D=Math.max(this._D,t),this.mD.push(Kc.Un(Kc.Nw.aD.hL.oL,this,n,t,s)),n=t}else this._D=1,this.mD.push(Kc.Un(Kc.Nw.aD.hL.aL,this,-1,1,s)),n=1;e&&this.mD.push(Kc.Un(Kc.Nw.aD.hL.lL,this,n,0))}eL(t,s){return!!(s.iD||t.bM()||s.nD&&!t.xM()||t.IM()&&!this.ID||0!==this.AD||0!==this.RD)||(t.gM().jb()?t.TM()&&(s.hD||s.rD)||t.CM()&&s.rD:t.TM()&&!this.MD&&s.hD)}nL(t,s){return!!s.eD||(t.gM().jb()?t.TM()||t.vM():(t.TM()||t.vM())&&this.uL())}iL(t){return t.sv()&&this.SD&&!this.vD}cL(t,s,i){t.sv()&&null===s&&(s=t.fL()),this.qD=s,this.DD=i.dL||null,this.LD=i.pL||null,this.RM=i.mL||0,this.jD=i.devicePixelRatio||1,this.VD=i.gL||1,this.HD=i.yL||0,this.UD="number"==typeof i.time?i.time:this.Vp.YF(),this.eR=!1,t.mO(),this.yD&&this.wL();let e=!1;if(this.SL()&&(this.vL(t,i),e=!0,this.zD=this.Vp.XF(t,this.OD,this.FD),sf.S(this.ND),sf.bl(),t.sv()&&t.bL(this.qD),t.ML(this.qD.TT(),this.zD,sf.Qa(),sf.tl(),sf.width(),sf.height())),this.TD)this.xL(t,i);else if(e||this.vL(t,i),0!==this.$D.width()||0!==this.$D.height()){t._O(),t.Eb(),t.MO(),t.jv(0),t.Hv(0),this.fD=i.GL||null,this.JD=i.TL||0,this.YD=i.IL||0,this.XD=i.CL||0,this.KD=i._L||0,this.ZD=!!i.EL,this.PL(t),this.ED[0]=s,this.ED[1]=this._D>=1?this.AL():null,this.ED[2]=2===this._D?this.AL():null;for(const s of this.mD){const i=this.RL(s.OL()),e=this.RL(s.FL());t.sv()?s.DL(t,i,e):s.LL(t,i,e)}t.GO(null),this.ED[1]&&this.kL(this.ED[1]),this.ED[2]&&this.kL(this.ED[2]),this.ED.fill(null),this.NL(t),this.qD=null,this.zD=null,this.DD=null,this.LD=null,this.fD=null}}vL(t,s){const[i,e]=this.Vp.zF(t);this.$L(t,i,e),this.BL(s)}$L(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.OD===s&&this.FD===i||this.WL(t,s,i,0,0,this.lT,this.QD),this.OD=s,this.FD=i}WL(t,s,i,e,n,r,h){const o=s/2+e,a=i/2+n;t.tv(r,s/i);const l=t.rv(o,a,t.WS(i),o,a,0,i);tf.S(h,l)}BL(t){this.kD.S(t.jL),t.VL?this.ND.S(t.VL):this.ND.set(0,0,this.OD,this.FD),this.$D.S(this.ND),this.$D.St(this.OD,this.FD);const s=this.VD*this.jD;this.ND.fl(this.AD*s,this.RD*s),this.WD.S(this.ND),this.WD.St(this.OD,this.FD),this.ND.Ml(0,0,this.OD,this.FD),this.BD.S(this.ND),this.BD.St(this.OD,this.FD)}PL(t){if(this.xD=t.eF(),this.GD=t.SF(),this.ID)t.iF(!1),this.wD&&t.nF(!0);else{if(sf.S(this.ND),t.jb()){const t=this.VD*this.jD;sf.fl(Math.max(this.AD,1)*t,Math.max(this.RD,1)*t),sf.bl(),sf.Kn(0,0,this.OD,this.FD)}else sf.bl();t.rF(sf.Qa(),sf.tl(),sf.width(),sf.height(),this.FD)}}HL(t){t.MO(),this.ID||(this.GD&&t.vF(),t.iF(!1),this.wD&&t.nF(!0)),t.sv()&&t.UL(!0)}NL(t){t.nF(!1),this.GD&&t.wF(),t.iF(this.xD),this.ID||t.oF(),t.sv()&&t.UL(!1),this.eR=t.gO()}qL(){this.WD.Kn(0,0,1,1)}RL(t){return t<0?null:this.ED[t]}AL(){return this.Vp.hF(this)}zL(){return this.qD}kL(t){this.Vp.JF(t,this)}JL(t){return this.dD[t]}YL(t){this.fD?this.fD(this,t,()=>this.lD(t,this)):this.lD(t,this),this.TD||this.HL(t)}XL(t){if(this.ID)return!0;if(0!==this.JD||0!==this.YD||0!==this.XD||0!==this.KD)return!1;const[s,i]=t.WO(t.hF());return s===this.OD&&i===this.FD}KL(t,s){let i=this.lT,e=this.QD;if(s&&!this.XL(t)){let s,n;i=hf,e=of,0!==this.XD&&0!==this.KD?[s,n]=[this.XD,this.KD]:[s,n]=t.WO(t.hF()),this.WL(t,s,n,this.JD,this.YD,i,e),this.ID||t.oF()}t.aO(i),t.pO(e)}wL(){this.Vp.Fp(this)}ZL(t,s){return this.cD(this.pD[t],s)}QL(t,s){let i=this.WD,e=this.BD,n=this.$D;t.jb()&&(ef.S(i),ef.ml(1),i=ef,nf.S(e),nf.ml(1),e=nf,rf.S(n),rf.ml(1),n=rf),this.tk(t,s,e,n,i,1/this.OD,1/this.FD)}sk(t,s){let i=this.BD,e=this.$D,n=1/this.OD,r=1/this.FD;if(this.uD){let{ik:t,ek:s,nk:h}=this.uD(this.DD);t||(sf.set(0,0,0,0),t=sf),s||(s=this.OD),h||(h=this.FD),i=t,e=t,n=1/s,r=1/h}else t.jb()&&(nf.S(i),nf.ml(1),i=nf,rf.S(e),rf.ml(1),e=rf);let h=this.WD;t.jb()&&(h=ef,h.S(this.WD),h.ml(1)),this.tk(t,s,i,e,h,n,r),t.sv()&&this.bD&&t.rk(this.CD)}hk(t){return this.SD?t.sv()?this.SL()?this.zD:this.qD.TT():this.qD:null}tk(t,s,i,e,n,r,h){t.KO(this.hk(t),n,i,e,this.kD,r,h,this.jD,this.VD,this.HD,this.UD),t.ZO(this.ZL(s,t))}xL(t,s){const i=this.dD[0],e=t.eF(),n=i.IM();n&&(t.iF(!1),t.nF(!0),this.WD.set(0,0,1,1),this.$D.set(0,0,1,1)),t.cv(i),t.NM(this.RM),t.fF(this.qD),t.Eb();let r=0,h=1;if(this.$D.set(0,0,1,1),i.CM()&&this.uD){const{ik:t,ek:s,nk:i}=this.uD(this.DD);t&&this.$D.S(t),r=Number.isFinite(s)?1/s:0,h=Number.isFinite(i)?1/i:0}else{const[s,i]=this.Vp.zF(t);r=1/s,h=1/i}s.jL?this.kD.S(s.jL):this.kD.set(0,0,0,0),t.KO(this.hk(t),this.WD,this.$D,this.$D,this.kD,r,h,this.jD,this.VD,this.HD,this.UD),t.ZO(this.ZL(0,t)),t.sv()&&this.bD&&t.rk(this.CD),t.jv(0),this.YL(t),n&&(t.nF(!1),t.iF(e))}SL(){return this.MD}uL(){return!this.MD}ak(){return this.SD}lk(){return!!this.TD&&!this.SL()}uk(){return this.ID}ck(){return this.DD}fk(){return this.LD}dk(){return this.RM}pk(){return this.ZD}gO(){return this.eR}mk(){return this.ND}gk(){return this.BD}yk(){return this.PD}async wk(t,s,i){}}}{const uf=self.Cs;uf.Nw.aD.hL=class{constructor(t,s,i,e=-1){this.Sk=t,this.vk=s,this.bk=i,this.Aw=e}Mk(){return this.Sk}OL(){return this.vk}FL(){return this.bk}xk(){return this.Aw}zI(){return this.Mk().JL(this.xk())}LL(t,s,i){}DL(t,s,i){}}}{const cf=self.Cs;cf.Nw.aD.hL.rL=class extends cf.Nw.aD.hL{constructor(t,s,i,e){super(t,s,i,e)}LL(t,s,i){const e=this.Mk();t._O(),t.Eb(),t.uv(),t.fF(i,e.pk()),t.QO(0,0,0,0),e.YL(t),e.qL()}DL(t,s,i){const e=this.Mk();t._O(),t.Eb(),t.uv(),t.fF(i,!1),t.QO(0,0,0,0),e.YL(t),e.qL()}}}{const ff=self.Cs,df=ff.Un(ff.Rect),pf=ff.Un(ff.El);ff.Nw.aD.hL.lL=class extends ff.Nw.aD.hL{constructor(t,s,i,e){super(t,s,i,e)}LL(t,s,i){const e=this.Mk();t.uv(),t.fF(i),e.KL(t,!0),t.NM(e.dk()),t.GO(s.TT()),pf.Xl(e.mk()),df.S(e.gk()),df.ml(1),t.sb(pf,df),e.yk()&&t.mF(s)}DL(t,s,i){const e=this.Mk();t.uv(),t.fF(i,!1),e.XL(t)?pf.Xl(e.gk()):(t.UL(!1),e.KL(t,!0),pf.Xl(e.mk())),t.Gk(null),t.NM(e.dk()),t.GO(s.TT()),e.uk()?t.BO():t.sb(pf,e.gk())}}}{const mf=self.Cs;mf.Nw.aD.hL.aL=class extends mf.Nw.aD.hL{constructor(t,s,i,e){super(t,s,i,e)}LL(t,s,i){const e=this.Mk();t.fF(i,e.pk()),t.QO(0,0,0,0),t.RO(),t.cv(this.zI()),e.sk(t,this.xk()),e.YL(t),e.qL()}DL(t,s,i){const e=this.Mk();t.fF(i,!1),t.QO(0,0,0,0),t.RO(),t.cv(this.zI()),e.sk(t,this.xk()),e.YL(t),e.qL()}}}{const gf=self.Cs,yf=gf.Un(gf.Rect),wf=gf.Un(gf.El);gf.Nw.aD.hL.oL=class extends gf.Nw.aD.hL{constructor(t,s,i,e){super(t,s,i,e)}LL(t,s,i){const e=this.Mk();t.fF(i);const n=0===this.FL();n?t.NM(e.dk()):(t.QO(0,0,0,0),t.RO()),t.cv(this.zI()),e.QL(t,this.xk()),t.GO(s.TT()),e.KL(t,n),wf.Xl(e.mk()),yf.S(e.gk()),yf.ml(1),t.sb(wf,yf),e.yk()&&t.mF(s)}DL(t,s,i){const e=this.Mk();t.fF(i,!1),0===this.FL()?(t.NM(e.dk()),t.Gk(null),e.XL(t)?wf.Xl(e.gk()):(t.UL(!1),e.KL(t,!0),wf.Xl(e.mk()))):(t.QO(0,0,0,0),t.RO(),wf.Xl(e.gk())),t.cv(this.zI()),e.QL(t,this.xk()),t.GO(s.TT()),e.uk()?t.BO():t.sb(wf,e.gk())}}}{let Sf=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]};SortZOrderList=Sf;const vf=self.Cs,bf=self.Ns;let Mf=null;const xf=new Set,Gf=[],Tf=[];let If=!1,Cf=!1,_f=!1;const Ef=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.Tk=class{constructor(t){Mf=t,Object.defineProperties(this,{Ik:{value:Mf._k().Ck(),writable:!1},Ek:{value:Mf.Ak().Pk(),writable:!1},Rk:{value:{},writable:!1},Ok:{value:{},writable:!1},Fk:{value:Mf.Dk(),writable:!1},Lk:{value:Mf.kk(),writable:!1},Nk:{value:Mf.$k(),writable:!1},Bk:{value:Mf.Wk(),writable:!1},jk:{value:new Date(Mf.Vk()),writable:!1},storage:{value:new self.Hk(Mf),writable:!1},Uk:{value:Mf.qk(),writable:!1},zk:{value:Mf.Jk(),writable:!1},Yk:{value:Mf.Xk(),writable:!1},uG:{value:Mf.Kk(),writable:!1},Zk:{value:Mf.Qk(),writable:!1},tN:{value:new self.sN(t),writable:!1},iN:{value:new self.eN(t),writable:!1}}),Mf.nN().addEventListener("keydown",t=>{xf.has(t.key)?t.stopPropagation():xf.add(t.key)}),Mf.nN().addEventListener("keyup",t=>xf.delete(t.key)),Mf.Sf().addEventListener("window-blur",()=>xf.clear()),Mf.qk()&&(self.alert=t=>(If||(If=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}rN(t){Object.defineProperties(this.Rk,t)}hN(t){Object.defineProperties(this.Ok,t)}addEventListener(t,s){Mf.nN().addEventListener(t,s)}removeEventListener(t,s){Mf.nN().removeEventListener(t,s)}oN(t,...s){bf.ue(t);const i=Mf.aN(),e=i.lN(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.Cu())return e.uN();if(s.length<e.cN())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.cN()} expected)`);const n=e.fN();let r=n.dN();const h=i.pN();if(h){r=r.slice(0);const t=new Set(r);for(const s of h.dN())t.has(s)||(r.push(s),t.add(s));for(const s of i.mN())t.has(s)||(r.push(s),t.add(s))}return n.gN(r,e.yN(),e.wN(),e.uN(),...s)}SN(t){const s=Mf.bN().vN();if(!s)throw new Error("not in a function which returns a value");switch(s.MN()){case 1:"number"==typeof t&&s.xN(t);break;case 2:"string"==typeof t&&s.xN(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.xN(t)}}signal(t){bf.ue(t),Mf.aN().GN(t)}TN(t){return bf.ue(t),Mf.aN().IN(t)}CN(){return[Mf.Jk(),Mf.Xk()]}get _N(){return Mf.EN()}get PN(){return Mf.AN()}get RN(){return Mf.ON()}get FN(){return Mf.DN()}get LN(){return Mf.kN()}get NN(){return Mf.$N()}get BN(){return Mf.WN()}set BN(t){bf.he(t),Mf.jN(t)}get VN(){return Cf||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),Cf=!0),Mf.HN()}get framesPerSecond(){return Mf.HN()}get UN(){return Mf.qN()}get zN(){return Mf.JN()}get YN(){return Mf.XN()}get KN(){return Mf.ZN()}set KN(t){if(!Ef.has(t))throw new Error("invalid framerate mode");Mf.QN(t)}get t$(){return Mf.s$()}set t$(t){bf.he(t),Mf.i$(t)}get e$(){return Mf.n$()}set e$(t){Mf.r$(t)}get h$(){return Mf._k().o$()}get a$(){return Mf._k().l$()}random(){return Mf.u$()}get layout(){const t=Mf.c$();if(!t)throw new Error("no layout is running - make sure a layout is loaded before accessing");return t.f$()}d$(t){const s=Mf.p$();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.m$(t),!i)throw new Error("invalid layout");return i.f$()}g$(){return Mf.p$().y$().map(t=>t.f$())}w$(t){const s=Mf.p$();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.m$(t),!i)throw new Error("invalid layout");s.S$()||s.v$(i)}get keyboard(){const t=Mf.b$().keyboard;if(!t)throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first");return t}get M$(){const t=Mf.b$().M$;if(!t)throw new Error("runtime.mouse used but Mouse object missing - add it to your project first");return t}get x$(){const t=Mf.b$().x$;if(!t)throw new Error("runtime.touch used but Touch object missing - add it to your project first");return t}get G$(){const t=Mf.b$().G$;if(!t)throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first");return t}get zC(){return Mf.I$().T$()}C$(t,s){bf.ue(t),bf.ue(s),Mf._$(t,s)}E$(t){bf.he(t);const s=Mf.P$(t);return s?s.A$():null}R$(t,s){bf.Re(s);const i=Mf.O$();for(const s of t){const t=Mf.F$(s),i=t.D$();Gf.push([i.L$().xk(),i.k$()]),Tf.push(t)}if(0===Gf.length)return;Gf.sort(Sf),Tf.sort((t,i)=>s(t.A$(),i.A$()));let e=!1;for(let t=0,s=Gf.length;t<s;++t){const s=Tf[t],n=i.N$(Gf[t][0]),r=Gf[t][1],h=n.$$();h[r]!==s&&(h[r]=s,s.D$().B$(n,!0),n.W$(s),e=!0)}e&&Mf.j$(),vf.bh(Gf),vf.bh(Tf)}async V$(t,s){_f||(console.warn("IRuntime.createWorker() is deprecated. All modern browsers now support nested workers so this method is no longer needed."),_f=!0);const i=new MessageChannel,e=i.port1,n=i.port2;return await Mf.H$("runtime","script-create-worker",{url:t,opts:s,port2:n},[n]),e}alert(t){return Mf.H$("runtime","alert",{message:t+(Mf.qk()?" [via Web Worker]":"")})}U$(t){return bf.he(t),Mf.q$(t)}z$(t){Mf.J$(t)}async Y$(t,s,i){bf.ce(t),bf.ie(s),bf.Be(i,DOMRect),i||(i=new DOMRect(0,0,0,0));const e=Mf.I$();if(!e)return;Mf.j$();const n=await e.X$(t||"image/png",s,i.x,i.y,i.width,i.height);return await Mf.K$(vf.sB.tB.Q$.Z$,null),n}}}{const Pf=self.Cs,Af=self.Ns;let Rf=null;self.iB=class{constructor(t){Rf=t,Object.defineProperties(this,{eB:{value:!0,writable:!1}})}nB(t){const s=self.hB.rB(t);if(!s)throw new Error("invalid IImageInfo");s.oB(Rf.aB())}lB(t){return Rf.io(t)}uB(t){return Rf.eo(t)}cB(t){return Rf.no(t)}fB(t){return Rf.ro(t)}dB(t){return Rf.pB(t)}mB(t){return"flat"===Rf.gB()&&Pf.Zh(t)&&(t=t.toLowerCase()),Rf.yB(t)}get wB(){return Rf.SB()}async vB(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}bB(...t){return Rf.MB(...t)}xB(t){return Rf.GB(t)}TB(t){return Rf.IB(t)}}}{const Of=self.Cs,Ff=self.Ns;let Df=null;self.CB=class{constructor(t){Df=t,Object.defineProperties(this,{runtime:{value:Df.aB(),writable:!1}})}_B(t,s){const i=Df.aB(),e=i.F$(t),n=i.F$(s);return Df.EB(e,n)}PB(t,s){const i=Df.aB(),e=i.F$(t);for(const t of s){const s=i.F$(t);if(Df.EB(e,s))return t}return null}AB(t){const s=Df.aB().F$(t),i=Df.RB(s);return i?i.A$():null}OB(t,s){if(Ff.he(t),Ff.he(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");Df.DB(t,s)}LB(){return Df.kB()}NB(t,s){const i=Df.aB();let e;e=Array.isArray(t)?t.map(t=>i.$B(t)):[i.$B(t)];const n=Of.Rect.Ka(s),r=[];return Df.BB(null,e,n,r),r.map(t=>t.A$())}}}{const Lf=self.Cs,kf=self.Ns;let Nf=null;const $f=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),Bf=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),Wf=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.sN=class{constructor(t){Nf=t,Object.defineProperties(this,{WB:{value:Lf.Zs.oi,writable:!1},os:{value:$f.get(Lf.Zs.Qs)||"unknown",writable:!1},jB:{value:Lf.Zs.ti,writable:!1},browser:{value:Bf.get(Lf.Zs.si)||"unknown",writable:!1},VB:{value:Lf.Zs.ii,writable:!1},HB:{value:Wf.get(Lf.Zs.ni)||"unknown",writable:!1}})}get UB(){let t=Nf.qB();return Nf.zB()?t="nwjs":Nf.JB()?t="windows-webview2":"cordova"===t?t="Android"===Lf.Zs.Qs?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get zC(){return Nf.I$().YB()}get XB(){return Nf.I$().KB()}get ZB(){return Nf.I$().QB()}get tW(){return Nf.I$().sW()}get iW(){return Nf.I$().eW()}get nW(){return Nf.I$().rW()}get hW(){return Nf.I$().oW()}get aW(){return Nf.I$().lW()}get devicePixelRatio(){return Nf.uW()}}}{const jf=self.Cs,Vf=self.Ns;self.Hk=class{constructor(t){this.cW=t.fW()}getItem(t){return Vf.ue(t),this.cW.getItem(t)}setItem(t,s){return Vf.ue(t),this.cW.setItem(t,s)}removeItem(t){return Vf.ue(t),this.cW.removeItem(t)}clear(){return this.cW.clear()}keys(){return this.cW.keys()}}}{const Hf=self.Cs,Uf=self.Ns,qf=Hf._s();self.dW=class{#t;constructor(){const t=Hf.mW.pW(qf);this.#t=t,Object.defineProperties(this,{runtime:{value:t.aB().gW(),writable:!1},id:{value:t.yW(),writable:!1},wW:{value:t.SW(),writable:!1},vW:{value:t.bW(),writable:!1},MW:{value:t.xW(),writable:!1},GW:{value:t.TW(),writable:!1},IW:{value:t._W(),writable:!1},EW:{value:t.PW(),writable:!1},AW:{value:t.RW(),writable:!1},OW:{value:t.FW(),writable:!1}}),t.aB().DW(this,t)}static LW(t){if(!t)return null;const s=Hf.mW.kW(t);return s?s.NW():null}$W(){return this.#t.WW().BW()}jW(){return this.#t.VW().A$()}}}{const zf=globalThis.Cs,Jf=globalThis.Ns,Yf=zf._s();globalThis.HW=class{#t;constructor(){const t=zf.mW.pW(Yf);this.#t=t,Object.defineProperties(this,{name:{value:t.Pc(),writable:!1},runtime:{value:t.aB().gW(),writable:!1},UW:{value:t.qW().NW(),writable:!1}}),t.aB().DW(this,t)}addEventListener(t,s){Jf.ue(t),Jf.Re(s),this.#t.nN().addEventListener(t,s)}removeEventListener(t,s){Jf.ue(t),Jf.Re(s),this.#t.nN().removeEventListener(t,s)}zW(){return[...this.JW()]}YW(){return zf.Bh(this.JW())}XW(){return[...this.KW()]}ZW(){return zf.Bh(this.KW())}QW(t){const s=this.#t,i=s.aB().tj(t),e=s.sj(i);return e?e.A$():null}*JW(){for(const t of this.#t.ij())yield t.A$()}*KW(){for(const t of this.#t.nj().ej())yield t.A$()}}}{const Xf=globalThis.Cs,Kf=globalThis.Ns,Zf=Xf._s();globalThis.rj=class extends globalThis.HW{#t;constructor(){super();const t=Xf.mW.pW(Zf);this.#t=t}hj(t){Kf.Re(t);const s=this.#t;if(s.oj()>0)throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.aj(t)}Ii(t,s,i,e,n){if(Kf.se(s),Kf.se(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#t,h=r.aB(),o=h.c$().L$(t);if(!o)throw new Error("invalid layer");const a=h.lj(r,o,s,i,e,n);e&&o.uj(a);const l=h.aN();return l.cj(!0),a.fj(),l.cj(!1),l.dj()||h.p$().pj()||h.mj(),a.A$()}gj(){return this.#t.yj().map(t=>t.BW())}*wj(){for(const t of this.#t.yj())yield t.BW()}Sj(t){return Kf.$e(t,globalThis.vj),t.bj(this)}}}{const Qf=globalThis.Cs,td=globalThis.Ns,sd=globalThis.rj,id=Qf._s();globalThis.vj=class extends globalThis.HW{#t;constructor(){super();const t=Qf.mW.pW(id);this.#t=t}Mj(){return this.#t.xj().map(t=>t.BW())}*Gj(){for(const t of this.#t.xj())yield t.BW()}bj(t){td.$e(t,sd);const s=this.#t,i=s.aB().$B(t);return s.Tj(i)}}}{const ed=self.Cs,nd=self.Ns,rd=["above","below","top-sublayer","bottom-sublayer"];self.Ij=class{#t;constructor(t){this.#t=t;const s=[],i=t.Cj(),e=i._j().length;for(let t=0;t<e;++t)s.push(new self.Ej(i,t));Object.defineProperties(this,{runtime:{value:t.aB().gW(),writable:!1},name:{value:t.Pc(),writable:!1},index:{value:t.xk(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){nd.ue(t),nd.Re(s),this.#t.nN().addEventListener(t,s)}removeEventListener(t,s){nd.ue(t),nd.Re(s),this.#t.nN().removeEventListener(t,s)}get width(){return this.#t.Vg()}set width(t){nd.he(t),this.#t.Xg(t)}get height(){return this.#t.Qg()}set height(t){nd.he(t),this.#t.Hg(t)}Pj(t,s){nd.he(t),nd.he(s);const i=this.#t;i.Xg(t),i.Hg(s)}getSize(){const t=this.#t;return[t.Vg(),t.Qg()]}set scale(t){nd.he(t),this.#t.Aj(t)}get scale(){return this.#t.Rj()}set angle(t){nd.he(t),this.#t.Oj(t)}get angle(){return this.#t.Fj()}set scrollX(t){nd.se(t),this.#t.Dj(t)}get scrollX(){return this.#t.Lj()}set scrollY(t){nd.se(t),this.#t.kj(t)}get scrollY(){return this.#t.Nj()}scrollTo(t,s){nd.se(t),nd.se(s);const i=this.#t;i.Dj(t),i.kj(s)}$j(){const t=this.#t;return[t.Lj(),t.Nj()]}get Bj(){return this.#t.Wj()}jj(t){const s=this.#t;let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return i=s.L$(t),i?i.Vj():null}Hj(){return this.#t.Uj().map(t=>t.Vj())}*qj(){for(const t of this.#t.qj())yield t.Vj()}zj(t,s,i){const e=this.#t,n=self.Jj;nd.ue(t),nd.Be(s,n);const r=s?e.aB().Yj(s):null,h=rd.indexOf(i);if(h<0)throw new Error("invalid location");e.Xj(t,r,h)}Kj(t,s,i){const e=this.#t,n=e.aB(),r=self.Jj;nd.$e(t,r);const h=n.Yj(t);if(!h)throw new Error("invalid layer");nd.Be(s,r);const o=s?n.Yj(s):null,a=rd.indexOf(i);if(a<0)throw new Error("invalid location");e.Zj(h,o,a)}Qj(t){const s=this.#t,i=self.Jj;nd.$e(t,i);const e=s.aB().Yj(t);if(!e)throw new Error("invalid layer");const n=e.aB();s.tV(e),n.aN().dj()||n.mj()}sV(){const t=this.#t,s=t.aB();t.iV(),s.aN().dj()||s.mj()}eV(t,s){nd.he(t),nd.he(s),this.#t.nV(t,s)}rV(){return this.#t.hV()}set V(t){nd.ue(t);const s=this.#t;if("perspective"===t)s.oV();else{if("orthographic"!==t)throw new Error("invalid projection");s.aV()}}get V(){return this.#t.lV()?"orthographic":"perspective"}}}{const hd=self.Cs,od=self.Ns,ad=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),ld=new Map([...ad.entries()].map(t=>[t[1],t[0]])),ud=new Set(["2d","3d"]),cd=hd.Un(hd.Go);self.Jj=class{#t;constructor(t){this.#t=t;const s=[],i=t.Cj(),e=i._j().length;for(let t=0;t<e;++t)s.push(new self.Ej(i,t));Object.defineProperties(this,{runtime:{value:t.aB().gW(),writable:!1},name:{value:t.Pc(),writable:!1},layout:{value:t.m$().f$(),writable:!1},effects:{value:s,writable:!1}}),t.aB().DW(this,t)}addEventListener(t,s){this.#t.nN().addEventListener(t,s)}removeEventListener(t,s){this.#t.nN().removeEventListener(t,s)}get uV(){const t=this.#t.cV();return t?t.Vj():null}*fV(){for(const t of this.#t.fV())yield t.Vj()}*dV(){for(const t of this.#t.pV())yield t.Vj()}*mV(){for(const t of this.#t.pV())for(const s of t.gV())yield s.Vj()}get index(){return this.#t.xk()}get isVisible(){return this.#t.yV()}set isVisible(t){this.#t.wV(t)}get SV(){return this.#t.vV()}get bV(){return this.#t.MV()}set bV(t){this.#t.xV(t)}get GV(){return this.#t.TV()}set GV(t){this.#t.IV(!!t)}get CV(){return this.#t._V()}get opacity(){return this.#t.SO()}set opacity(t){t=hd.Kn(+t,0,1),isNaN(t)||this.#t.bO(t)}set scale(t){od.he(t),this.#t.EV(t)}get scale(){return this.#t.PV()}set AV(t){od.he(t),this.#t.RV(t)}get AV(){return this.#t.OV()}set angle(t){od.he(t),this.#t.Oj(t)}get angle(){return this.#t.FV()}set DV(t){od.he(t),this.#t.LV(t)}get DV(){return this.#t.kV()}set NV(t){od.he(t),this.#t.$V(t)}get NV(){return this.#t.BV()}set WV(t){od.he(t),this.#t.sx(t)}get WV(){return this.#t.tx()}set renderingMode(t){if(!ud.has(t))throw TypeError("invalid rendering mode");this.#t.jV("3d"===t)}get renderingMode(){return this.#t.VV()?"3d":"2d"}set HV(t){this.#t.UV(t)}get HV(){return this.#t.qV()}set zV(t){this.#t.JV(t)}get zV(){return this.#t.YV()}set mL(t){od.ue(t);const s=ad.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");this.#t.NM(s)}get mL(){return ld.get(this.#t.XV())}set backgroundColor(t){if(od.Te(t),t.length<3)throw new Error("expected 3 elements");cd.Po(t[0],t[1],t[2]);const s=this.#t,i=s.KV();i.qo(cd)||(i.ko(cd),s.aB().j$())}get backgroundColor(){const t=this.#t.KV();return[t.No(),t.$o(),t.Bo()]}set scrollX(t){od.se(t);const s=this.#t;s.ZV(!0),s.Dj(t)}get scrollX(){return this.#t.Lj()}set scrollY(t){od.se(t);const s=this.#t;s.ZV(!0),s.kj(t)}get scrollY(){return this.#t.Nj()}scrollTo(t,s){od.se(t),od.se(s);const i=this.#t;i.ZV(!0),i.Dj(t),i.kj(s)}$j(){const t=this.#t;return[t.Lj(),t.Nj()]}QV(){this.#t.ZV(!1)}getViewport(){return this.#t.tH().el()}sH(t,s,i=0){od.se(t),od.se(s),od.se(i);const e=this.#t,n=e.aB();return e.iH(t-n.QB(),s-n.sW(),i)}eH(t,s,i=0){od.se(t),od.se(s),od.se(i);const e=this.#t,n=e.aB(),[r,h]=e.nH(t,s,i);return[r+n.QB(),h+n.sW()]}rH(t,s,i=0){return od.se(t),od.se(s),od.se(i),this.#t.hH(t,s,i)}oH(t,s,i=0){return od.se(t),od.se(s),od.se(i),this.#t.aH(t,s,i)}get lH(){return this.#t.uH()}}}{let fd=function(t){let s=md.get(t);return s||(s=dd.Un(dd.Event.Sf),md.set(t,s),s)};GetDispatcher=fd;const dd=self.Cs,pd=self.Ns,md=new WeakMap,gd=dd._s();self.cH=class{#t;constructor(){const t=dd.mW.pW(gd);this.#t=t;const s={runtime:{value:t.aB().gW(),writable:!1},objectType:{value:t.fH().BW(),writable:!1},UW:{value:t.qW().NW(),writable:!1}};t.dH(s),t.pH(s),Object.defineProperties(this,s),t.aB().DW(this,t)}static mH(){return dd.mW.gH()}yH(){const t=md.get(this);t&&(t.qn(),md.delete(this))}addEventListener(t,s,i){pd.ue(t),pd.Re(s),fd(this).addEventListener(t,s,i)}removeEventListener(t,s,i){pd.ue(t),pd.Re(s),fd(this).removeEventListener(t,s,i)}dispatchEvent(t){fd(this).dispatchEvent(t)}destroy(){const t=this.#t,s=t.aB();s.wH(t),s.aN().dj()||s.p$().pj()||s.aN().SH()||s.mj()}vH(){const t=this.#t.bH();return t?t.map(t=>t.A$()):[]}*MH(){const t=this.#t;if(t.xH())for(const s of t.GH())yield s.A$()}get uid(){return this.#t.TH()}get IH(){return this.#t.CH()}get _H(){return this.#t.EH()}set BN(t){pd.he(t),this.#t.jN(t)}get BN(){return this.#t.PH()}AH(){this.#t.RH()}get PN(){const t=this.#t;return t.aB().AN(t)}OH(...t){pd.Te(t);const s=new Set(t),i=this.#t.FH();return s.isSubsetOf(i)}DH(t){pd.$e(t,Set),this.#t.LH(t)}kH(){return new Set(this.#t.FH())}signal(t){pd.ue(t);const s=this.#t;s.aB().aN().NH(s,t)}TN(t){pd.ue(t);const s=this.#t;return s.aB().aN().$H(s,t)}}}{const yd=self.Cs,wd=self.Ns,Sd=yd._s();self.BH=class extends self.cH{#t;#s=!1;#i=null;#e=!1;#n=null;#r;#h;constructor(t){super(),this.#t=yd.mW.pW(Sd),this.#s=!1,this.#i=null,this.#e=!1,this.#n=null,this.#r=t?.WH,this.#h=t?.jH}yH(){this.VH(!1),this.HH(!1),super.yH()}UH(){return yd.mW.qH()}zH(t){const s=this.#t;s.aB().JH(t,s)}YH(t){const s=this.#t;return s.aB().K$(t,s)}XH(t,s){if(wd.ue(t),wd.Re(s),!this.#r)throw new Error("no DOM component id set");this.#t.aB().KH(this.#r,t,s)}ZH(t){wd.Te(t);for(const[s,i]of t)this.XH(s,i)}QH(t,s){if(wd.ue(t),!this.#r)throw new Error("no DOM component id set");this.#t.aB().jc(this.#r,t,s)}tU(t,s){if(wd.ue(t),!this.#r)throw new Error("no DOM component id set");return this.#t.aB().H$(this.#r,t,s)}sU(t,s){if(!this.#t.aB().qk())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#r,handler:t,data:s,responseId:null});this.QH(t,s)}VH(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=this.#t.aB();if(t){if(!this.#i)if(this.#t.aB().iU()){const t=globalThis.eU,s=this.UW;this.#i=()=>{const i=performance.now();this.nU(),t.rU(s,performance.now()-i)}}else this.#i=()=>this.nU();s.Sf().addEventListener("tick",this.#i)}else s.Sf().removeEventListener("tick",this.#i)}hU(){return this.#s}nU(){}HH(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=this.#t.aB();if(t){if(!this.#n)if(this.#t.aB().iU()){const t=globalThis.eU,s=this.UW;this.#n=()=>{const i=performance.now();this.oU(),t.rU(s,performance.now()-i)}}else this.#n=()=>this.oU();s.Sf().addEventListener("tick2",this.#n)}else s.Sf().removeEventListener("tick2",this.#n)}aU(){return this.#e}oU(){}lU(){return[]}uU(){return null}cU(t){}fU(){if(!this.#h)throw new Error("no wrapper component id set");return this.#t.aB().dU(this.#h)}pU(t,s){if(wd.ue(t),wd.Re(s),!this.#h)throw new Error("no wrapper component id set");this.#t.aB().mU(this.#h,t,s)}gU(t){wd.Te(t);for(const[s,i]of t)this.pU(s,i)}yU(t,s){if(!this.#h)throw new Error("no wrapper component id set");this.runtime.iN.wU(this.#h,t,s)}SU(t,s){if(!this.#h)throw new Error("no wrapper component id set");return this.runtime.iN.vU(this.#h,t,s)}}}{let vd=function(t){return class s extends t{#t;#s;constructor(t){super(t);const s=bd.mW.pW(_d),i=s.D$();this.#t=s,this.#s=i,Cd.set(this,s);const e=[],n=i.bU();if(n){const t=i.fH().Cj()._j().length;for(let s=0;s<t;++s)e.push(new self.Ej(n,s))}const r={effects:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#s.m$().f$()}get MU(){return this.#s.L$().Vj()}get x(){return this.#s.YM()}set x(t){t=+t;const s=this.#s;isNaN(t)||s.YM()===t||(s.XM(t),s.xU())}get y(){return this.#s.ZM()}set y(t){t=+t;const s=this.#s;isNaN(t)||s.ZM()===t||(s.QM(t),s.xU())}setPosition(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.YM()===t&&i.ZM()===s||(i.GU(t,s),i.xU())}TU(){const t=this.#s;return[t.YM(),t.ZM()]}offsetPosition(t,s){if(t=+t,s=+s,isNaN(t)||isNaN(s)||0===t&&0===s)return;const i=this.#s;i.IU(t,s),i.xU()}set CU(t){t=+t;const s=this.#s;isNaN(t)||s._U()===t||(s.EU(t),s.xU())}get CU(){return this.#s._U()}set PU(t){t=+t;const s=this.#s;isNaN(t)||s.AU()===t||(s.RU(t),s.xU())}get PU(){return this.#s.AU()}OU(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i._U()===t&&i.AU()===s||(i.EU(t),i.RU(s),i.xU())}FU(){const t=this.#s;return[t._U(),t.AU()]}get WV(){return this.#s.tx()}set WV(t){t=+t;const s=this.#t,i=this.#s;isNaN(t)||i.tx()===t||(i.sx(t),s.aB().j$())}get DU(){return this.#s.LU()}get width(){return this.#s.Vg()}set width(t){t=+t;const s=this.#s;isNaN(t)||s.Vg()===t||(s.Xg(t),s.xU())}get height(){return this.#s.Qg()}set height(t){t=+t;const s=this.#s;isNaN(t)||s.Qg()===t||(s.Hg(t),s.xU())}Pj(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.Vg()===t&&i.Qg()===s||(i.BP(t,s),i.xU())}getSize(){const t=this.#s;return[t.Vg(),t.Qg()]}get angle(){return this.#s.Fj()}set angle(t){t=bd.Zn(+t);const s=this.#s;isNaN(t)||s.Fj()===t||(s.Oj(t),s.xU())}get kU(){return bd.tr(this.angle)}set kU(t){this.angle=bd.Qn(t)}Ql(t){return t?(this.#s.NU(Td,Id,!1),Td.el()):this.#s.$U().el()}BU(t){return t?(this.#s.NU(Td,Id,!1),Id.zl()):this.#s.WU().zl()}jU(){return this.#s.VU()}get isVisible(){return this.#s.vV()}set isVisible(t){t=!!t;const s=this.#t,i=this.#s;i.vV()!==t&&(i.wV(t),s.aB().j$())}get opacity(){return this.#s.SO()}set opacity(t){t=bd.Kn(+t,0,1);const s=this.#t,i=this.#s;isNaN(t)||i.SO()===t||(i.bO(t),s.aB().j$())}set HU(t){if(Md.Te(t),t.length<3)throw new Error("expected 3 elements");Ad.Po(t[0],t[1],t[2]);const s=this.#t,i=this.#s;i.UU().qo(Ad)||(i.qU(Ad),s.aB().j$())}get HU(){const t=this.#s.UU();return[t.No(),t.$o(),t.Bo()]}set mL(t){Md.ue(t);const s=Ed.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#t;this.#s.NM(s),i.aB().j$()}get mL(){return Pd.get(this.#s.XV())}zU(){this.#s.JU()}YU(){this.#s.XU()}KU(t){Md.$e(t,Gd);const s=this.#t,i=s.aB().Yj(t);if(!i)throw new Error("invalid layer");s.D$().ZU(i)}QU(t,i){Md.$e(t,s),this.#s.tq(Cd.get(t),i)}get zIndex(){return this.#s.k$()}get sq(){return this.#s.iq()}set sq(t){this.#s.eq(!!t)}Tl(t,s){return Md.se(t),Md.se(s),this.#s.nq(+t,+s)}_B(t){Md.$e(t,s);const i=this.#t,e=Cd.get(t);return i.aB().Ak().EB(i,e)}AB(){const t=this.#t,s=t.aB().Ak().RB(t);return s?s.A$():null}getParent(){const t=this.#t.rq();return t?t.A$():null}hq(){const t=this.#t.oq();return t?t.A$():null}*aq(){for(const t of this.#t.aq())yield t.A$()}lq(){return this.#t.uq()}cq(t){const s=this.#t.fq(t);return s?s.A$():null}*children(){for(const t of this.#t.children())yield t.A$()}*pq(){for(const t of this.#t.pq())yield t.A$()}mq(t,i){Md.$e(t,s),Md.we(i),i||(i={});const e=this.#t,n=Cd.get(t);e.gq(n,i)}removeChild(t){Md.$e(t,s);const i=this.#t,e=Cd.get(t);i.yq(e)}wq(){const t=this.#t;t.Sq()&&t.rq().yq(t)}vq(){const t=this.#s;return{bq:t.Mq(),xq:t.Gq(),Tq:t.Iq(),Cq:t._q(),Eq:t.Pq(),Aq:t.Rq(),Oq:t.Fq(),Dq:t.Lq(),kq:t.Nq()}}$q(t,s){Md.he(t),Md.he(s),this.#s.Bq(t,s)}Wq(){const t=this.#s;t.jq(),t.xU()}Vq(t,s,i){Md.he(t),Md.he(s),Md.ye(i);const e=this.#s;e.Hq(t,s,i)&&e.xU()}Uq(t,s){let i=NaN,e=NaN,n=NaN,r=NaN,h=NaN;const o=this.#s;if(o.qq()){const a=o.zq().Ux(t,s);null!==a&&(i=a.YM(),e=a.ZM(),n=a.tx(),r=a.ix(),h=a.hx())}return{x:i,y:e,WV:n,Jq:r,Yq:h}}Xq(){const t=this.#s;if(!t.qq())return[0,0];const s=t.zq();return[s.Fx(),s.Dx()]}}};MakeIWorldInstanceClass=vd;const bd=self.Cs,Md=self.Ns,xd=self.cH,Gd=self.Jj,Td=bd.Un(bd.Rect),Id=bd.Un(bd.El),Cd=new WeakMap,_d=bd._s(),Ed=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Pd=new Map([...Ed.entries()].map(t=>[t[1],t[0]])),Ad=bd.Un(bd.Go);self.Kq=vd(self.cH),self.Zq=vd(self.BH)}{const Rd=self.Cs,Od=self.Ns;self.Qq=class extends self.Kq{#t;constructor(){super(),this.#t=self.cH.mH()}tz(){return this.#t.iz().sz()}focus(){this.#t.iz().ez()}blur(){this.#t.iz().nz()}rz(t,s){Od.ue(t),this.#t.iz().hz(t,s)}}}{let Fd=function(t){let s=kd.get(t);return s||(s=Dd.Un(Dd.Event.Sf),kd.set(t,s),s)};GetDispatcher=Fd;const Dd=self.Cs,Ld=self.Ns,kd=new WeakMap,Nd=Dd._s();self.oz=class{#t;constructor(){const t=Dd.mW.pW(Nd);this.#t=t;const s={runtime:{value:t.aB().gW(),writable:!1},behavior:{value:t.lz().az(),writable:!1},uz:{value:t.fz().cz(),writable:!1}};Object.defineProperties(this,s),t.aB().DW(this,t)}static mH(){return Dd.mW.gH()}get dz(){return this.#t.pz().A$()}yH(){const t=kd.get(this);t&&(t.qn(),kd.delete(this))}addEventListener(t,s,i){Ld.ue(t),Ld.Re(s),Fd(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Ld.ue(t),Ld.Re(s),Fd(this).removeEventListener(t,s,i)}dispatchEvent(t){Fd(this).dispatchEvent(t)}}}{const $d=self.Cs,Bd=self.Ns,Wd=$d._s();self.mz=class{constructor(){const t=$d.mW.pW(Wd),s={runtime:{value:t.aB().gW(),writable:!1},behavior:{value:t.lz().az(),writable:!1},name:{value:t.Pc(),writable:!1}};Object.defineProperties(this,s)}}}{const jd=self.Cs,Vd=self.Ns,Hd=jd._s();self.gz=class{#s;constructor(){const t=jd.mW.pW(Hd);this.#s=t;const s={runtime:{value:t.aB().gW(),writable:!1},id:{value:t.yW(),writable:!1}};Object.defineProperties(this,s),t.aB().DW(this,t)}zW(){return this.#s.ej().map(t=>t.A$())}static LW(t){if(!t)return null;const s=jd.mW.yz(t);return s?s.az():null}}}{const Ud=self.Cs,qd=self.Ns,zd=Ud.Un(Ud.Go);self.Ej=class{#t;constructor(t,s){this.#t=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){return this.#t._j()[this.index].Pc()}get isActive(){return this.#t.wz(this.index)}set isActive(t){t=!!t;const s=this.#t;s.wz(this.index)!==t&&(s.Sz(this.index,t),s.vz(),s.aB().j$())}setParameter(t,s){qd.he(t),t=Math.floor(+t);const i=this.#t,e=i.bz(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof Ud.Go){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");zd.Po(s[0],s[1],s[2]),s=zd}else if("number"!=typeof s)throw new TypeError("expected number");i.Mz(this.index,t,s)&&i.wz(this.index)&&i.aB().j$()}getParameter(t){qd.he(t),t=Math.floor(+t);const s=this.#t.bz(this.index,t);if(null===s)throw new RangeError("invalid index");return s instanceof Ud.Go?[s.No(),s.$o(),s.Bo()]:s}}}{const Jd=self.Cs,Yd=self.Ns;self.xz=class{#t;constructor(t){this.#t=t,Object.defineProperties(this,{name:{value:t.Pc(),writable:!1}})}get speed(){return this.#t.Gz()}get Tz(){return this.#t.Iz()}get Cz(){return this.#t._z()}get Ez(){return this.#t.Pz()}get Az(){return this.#t.Rz()}get frameCount(){return this.#t.Oz()}Fz(){return this.#t.Dz().map(t=>t.Lz())}*frames(){for(const t of this.#t.Dz())yield t.Lz()}}}{const Xd=self.Cs,Kd=self.Ns;self.hB=class{#s;constructor(t){this.#s=t}static rB(t){return t.#s}get width(){return this.#s.Vg()}get height(){return this.#s.Qg()}getSize(){const t=this.#s;return[t.Vg(),t.Qg()]}kz(t){return t.Nz(this)}$z(){return this.#s.yA().el()}}}{const Zd=self.Cs,Qd=self.Ns;self.Bz=class extends self.hB{#s;constructor(t){super(t.Wz()),this.#s=t,Object.defineProperties(this,{duration:{value:t.jz(),writable:!1},CU:{value:t._U(),writable:!1},PU:{value:t.AU(),writable:!1}})}FU(){const t=this.#s;return[t._U(),t.AU()]}Vz(){return this.#s.Uz()}qz(t){return this.zz(t)[0]}Jz(t){return this.zz(t)[1]}zz(t){const s=this.#s;let i=null;if("number"==typeof t)i=s.Yz(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.Xz(t)}return i?[i.YM(),i.ZM()]:this.FU()}Kz(){const t=this.#s.Zz();return t?t.mu():0}Qz(t){return this.tJ(t)[0]}sJ(t){return this.tJ(t)[1]}tJ(t){Qd.he(t),t=Math.floor(t);const s=this.#s.Zz();if(!s||t<0||t>=s.mu())return[0,0];const i=s.pu();return[i[2*t],i[2*t+1]]}get tag(){return this.#s.iJ()}}}{let tp=function(t){const s=ep.get(t);if(s.eJ())throw new Error("timeline/tween was released and is no longer valid");return s};GetTimelineState=tp;const sp=self.Cs,ip=self.Ns,ep=new WeakMap;self.nJ=class{constructor(t){ep.set(this,t),t.aB().DW(this,t)}pause(){tp(this).rJ()}resume(){tp(this).hJ()}stop(){tp(this).Bf()}OH(t){return tp(this).oJ(t)}set time(t){ip.he(t),tp(this).aJ(t)}get time(){return tp(this).YF()}set totalTime(t){ip.he(t),tp(this).lJ(t)}get totalTime(){return tp(this).uJ()}set Tz(t){tp(this).cJ(!!t)}get Tz(){return tp(this).fJ()}set Az(t){tp(this).dJ(!!t)}get Az(){return tp(this).pJ()}set playbackRate(t){ip.he(t),tp(this).mJ(t)}get playbackRate(){return tp(this).gJ()}get progress(){const t=tp(this);return t.YF()/t.uJ()}get tags(){return tp(this).yJ()}get finished(){return tp(this).wJ()}get SJ(){return tp(this).IsPlaying()}get vJ(){return tp(this).bJ()}get MJ(){return ep.get(this).eJ()}}}{let np=function(t){const s=op.get(t);if(s.eJ())throw new Error("timeline was released and is no longer valid");return s};GetTimelineState=np;const rp=self.Cs,hp=self.Ns,op=new WeakMap;let ap=null;self.xJ=class extends self.nJ{constructor(t){super(t),op.set(this,t);const s={name:{value:t.Pc(),writable:!1}};Object.defineProperties(this,s)}}}{let lp=function(t){const s=fp.get(t);if(s.eJ())throw new Error("tween was released and is no longer valid");return s};GetTweenState=lp;const up=self.Cs,cp=self.Ns,fp=new WeakMap,dp=new WeakMap;let pp=null;self.GJ=class extends self.nJ{constructor(t,s,i){super(t),pp||(pp=i.TJ),fp.set(this,t),s&&dp.set(this,s)}stop(){const t=lp(this);dp.get(this).IJ(t)}CJ(t){cp.ue(t);const s=self.Vu.ac(pp(t));lp(this)._J(s)}get dz(){const t=lp(this).EJ();return t?t.A$():null}get PJ(){return lp(this).AJ()}set PJ(t){lp(this).RJ(!!t)}get value(){const t=lp(this);if("value"!==t.OJ())throw new Error("not a value tween");return t.DJ("value").FJ()}}}{const mp=self.Cs,gp=self.Ns;self.LJ=class extends self.dW{constructor(){super()}}}{const yp=self.Cs,wp=self.Ns,Sp=yp._s();self.kJ=class extends self.LJ{#t;#i;#s=0;#r=new Map;constructor(t){if(super(),this.#t=yp.mW.pW(Sp),!t?.WH)throw new Error("no DOM component ID specified");this.#i=t.WH,this.NJ("elem-focused",t=>t.$J()),this.NJ("elem-blurred",t=>{t&&t.BJ()})}WJ(t){const s=this.#s++;return this.#r.set(s,t),s}jJ(t){this.#r.delete(t)}NJ(t,s){this.#t.aB().KH(this.#i,t,t=>{const i=this.#r.get(t.elementId);s(i,t)})}VJ(t){wp.Te(t);for(const[s,i]of t)this.VJ(s,i)}}}{const vp=self.Cs,bp=self.Ns,Mp=new WeakMap,xp=vp._s();self.HJ=class extends self.rj{#t;constructor(){super(),this.#t=vp.mW.pW(xp)}UJ(){}qJ(){return this.#t.Wz().zJ()}JJ(t){}YJ(t){}XJ(){}KJ(t){}}}{const Gp=self.Cs,Tp=self.Ns,Ip=new WeakMap,Cp=Gp._s();self.ZJ=class extends self.Zq{#t;#n=null;#s=null;constructor(t){super(t),this.#t=Gp.mW.pW(Cp)}yH(){if(super.yH(),this.#n){const t=this.#t.aB().Sf();t.removeEventListener("renderercontextlost",this.#n),t.removeEventListener("renderercontextrestored",this.#s),this.#n=null,this.#s=null}}QJ(){if(this.#n)return;this.#n=()=>this.tY(),this.#s=()=>this.sY();const t=this.#t.aB().Sf();t.addEventListener("renderercontextlost",this.#n),t.addEventListener("renderercontextrestored",this.#s)}tY(){}sY(){}iY(t){}eY(){return!0}eM(){return!1}}}{const _p=self.Cs,Ep=self.Ns,Pp=_p.Un(_p.Rect),Ap=new WeakMap,Rp=_p._s();self.nY=class extends self.ZJ{#t=-1;#s=!0;#r=!1;#e=!1;#i=-.2;#h=_p.Un(_p.Rect,0,0,-1,-1);#o=0;#a=0;#l=-1;#u=-1;#c=!1;constructor(t){if(!t?.WH)throw new Error("no DOM component ID specified");super(t);const s=_p.mW.pW(Rp);Ap.set(this,s),this.#t=this.UW.WJ(this);const i=s.aB().I$();this.#o=i.rY(),this.#a=i.hY(),this.VH(!0)}yH(){super.yH(),this.UW.jJ(this.#t),this.oY("destroy"),this.#t=-1,Ap.delete(this)}aY(){if(Ap.get(this).aB().qk())throw new Error("not valid in worker mode");return this.lY("get-element")}oY(t,s){s||(s={}),s.elementId=this.#t,this.QH(t,s)}lY(t,s){return s||(s={}),s.elementId=this.#t,this.sU(t,s)}uY(t,s){return s||(s={}),s.elementId=this.#t,this.tU(t,s)}cY(t){t||(t={});const s=Ap.get(this).D$();t.elementId=this.#t,t.isVisible=s.vV(),t.htmlIndex=s.L$().fY(),t.htmlZIndex=s.dY(),Object.assign(t,this.pY()),this.#s=!!t.isVisible,this.sU("create",t),this.mY(!0)}gY(t){t=!!t,this.#s!==t&&(this.#s=t,this.oY("set-visible",{isVisible:t}))}nU(){this.mY(!1)}yY(){const t=Ap.get(this).aB().I$().wY();return"Android"===_p.Zs.Qs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}mY(t){const s=Ap.get(this);if(s.SY())return;const i=s.D$(),e=i.L$(),n=i.$U();let[r,h]=e.nH(n.Qa(),n.tl()),[o,a]=e.nH(n.sl(),n.il());const l=s.aB().I$(),u=l.eW(),c=l.rW();if(!i.vV()||!e.vV())return void this.gY(!1);if(!this.yY()&&(o<=0||a<=0||r>=u||h>=c))return void this.gY(!1);Pp.set(r,h,o,a);const f=l.rY(),d=l.hY(),p=e.fY(),m=i.dY();if(!t&&Pp.equals(this.#h)&&this.#o===f&&this.#a===d&&this.#l===p&&this.#u===m)return void this.gY(!0);this.#h.S(Pp),this.#o=f,this.#a=d,this.#l=p,this.#u=m,this.gY(!0);let g=null;this.#e&&(g=e.vY()+this.#i),this.oY("update-position",{left:Math.round(this.#h.Qa()),top:Math.round(this.#h.tl()),width:Math.round(this.#h.width()),height:Math.round(this.#h.height()),htmlIndex:p,htmlZIndex:m,fontSize:g})}bY(){this.lY("focus",{focus:!0})}MY(){this.lY("focus",{focus:!1})}$J(){this.#r=!0}BJ(){this.#r=!1}xY(){return this.#r}GY(t,s){this.TY("set-css-style",{prop:_p.bo(t),val:s})}IY(t,s){this.TY("set-attribute",{name:t,val:s})}CY(t){this.TY("remove-attribute",{name:t})}_Y(){this.#c||(this.#c=!0,Promise.resolve().then(()=>{this.#c=!1,this.oY("update-state",this.pY())}))}pY(){}EY(){return this.#t}}}{const Op=self.Cs,Fp=self.Ns;self.PY=class extends self.gz{constructor(){super()}}}{const Dp=self.Cs,Lp=self.Ns;self.AY=class extends globalThis.mz{constructor(){super()}UJ(){}}}{const kp=self.Cs,Np=self.Ns,$p=new WeakMap,Bp=kp._s();self.RY=class extends self.oz{#e=!1;#s=!1;#t=!1;constructor(){super(),$p.set(this,kp.mW.pW(Bp))}yH(){super.yH(),this.VH(!1),this.HH(!1),this.OY(!1),$p.delete(this)}UH(){return kp.mW.qH()}FY(){}zH(t){const s=$p.get(this);s.aB().JH(t,s.pz(),s.fz())}YH(t){const s=$p.get(this);return s.aB().K$(t,s.pz(),s.fz())}VH(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=$p.get(this).aB();t?s.DY(this):s.LY(this)}hU(){return this.#e}nU(){}HH(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=$p.get(this).aB();t?s.kY(this):s.NY(this)}aU(){return this.#s}oU(){}OY(t){if(t=!!t,this.#t===t)return;this.#t=t;const s=$p.get(this).aB();t?s.$Y(this):s.BY(this)}WY(){return this.#t}jY(){}lU(){return[]}uU(){return null}cU(t){}}}{const Wp=self.Cs,jp=self.Ns;let Vp=null;self.eN=class{constructor(t){Vp=t}z$(t){Vp.J$(t)}wU(t,s,i){jp.ue(t),jp.ue(s),jp.Ie(i),Vp.VY(t,s,i)}vU(t,s,i){return jp.ue(t),jp.ue(s),jp.Ie(i),Vp.HY(t,s,i)}UY(t){return jp.ce(t),new self.qY(Vp,t)}set zY(t){Vp.JY(!!t)}get zY(){return Vp.YY()}XY(t){Vp.KY(!!t)}ZY(t){jp.se(t);const s=Vp.QY(t);return s?s.BW():null}}}{const Hp=self.Cs,Up=self.Ns;self.qY=class{#t;#s;#h;#i;#r;#n;constructor(t,s){this.#t=t;const i=t.aN(),e=t.pN();this.#s=e,this.#h=e.tX();const n=t.bN();this.#i=n.sX(),this.#r=n.iX(e);const r=i.eX().iX();this.#n=r,s&&r.nX(s),t.rX(!1)}hX(){const t=this.#t.aN(),s=this.#h,i=this.#n;t.oX(s),this.#s.aX(this.#i,this.#r),t.lX(s),i.uX(i.xk()+1)}get cX(){return this.#n.fX()}release(){const t=this.#t,s=t.bN(),i=t.aN().eX();t.rX(!0),i.dX(),s.dX()}}}{let qp=function(t){return t instanceof ImageBitmap||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas};IsStaticTextureDataType=qp;const zp=self.Cs,Jp=self.Ns;let Yp=null,Xp=null;const Kp=["none","back","front"],Zp=["cw","ccw"];self.pX=class{constructor(t,s){Xp=t,Yp=s}mX(){Yp._O()}gX(t){Yp.IO(t)}yX(){Yp.gv()}wX(){Yp.uv()}SX(){Yp.xv()}setColor(t){Yp.vO(t[0],t[1],t[2],t[3])}vX(t,s,i,e){Yp.vO(t,s,i,e)}bX(){Yp.MO()}MX(t){Yp.bO(t)}xX(t){Yp.Hv(t)}GX(){return Yp.Uv()}TX(t){const s=Kp.indexOf(t);if(-1===s)throw new Error("invalid cull mode");Yp.Pb(s)}IX(){return Kp[Yp.PO()]}CX(t){const s=Zp.indexOf(t);if(-1===s)throw new Error("invalid front face winding");Yp.Ab(s)}_X(){return Yp.AO()}rect(t){Yp.OO(t.left,t.top,t.right,t.bottom)}EX(t,s,i,e){Yp.OO(t,s,i,e)}PX(t){Yp.El(zp.El.Jl(t))}AX(t,s,i,e,n,r,h,o){Yp.Ob(t,s,i,e,n,r,h,o)}RX(t,s){Yp.sb(zp.El.Jl(t),zp.Rect.nl(s))}OX(t,s){Yp.LO(zp.El.Jl(t),zp.El.Jl(s))}FX(t,s,i){Yp.kO(zp.El.Jl(t),zp.El.Jl(s),i)}DX(t,s,i,e,n,r,h,o,a,l,u,c,f){Yp.NO(t,s,i,e,n,r,h,o,a,l,u,c,zp.Rect.nl(f))}LX(t,s,i,e,n,r,h,o,a,l,u,c,f){Yp.Xv(t,s,i,e,n,r,h,o,a,l,u,c,zp.El.Jl(f))}kX(t,s,i,e,n,r,h,o,a,l,u,c,f,d){Yp.$O(t,s,i,e,n,r,h,o,a,l,u,c,zp.El.Jl(f),d)}NX(t,s,i,e){Yp.Qx(t,s,i,e)}$X(t){Yp.Rb(t)}line(t,s,i,e){Yp.ny(t,s,i,e)}BX(t,s,i,e,n,r){Yp.Kv(t,s,i,e,n,r)}WX(t,s,i,e){Yp.ib(t,s,i,e)}jX(t){Yp.hb(zp.Rect.nl(t))}VX(t){Yp.ob(zp.El.Jl(t))}HX(t){Yp.pb(t)}UX(){Yp.mb()}qX(t){Yp.Sb(t)}zX(){Yp.Gb()}JX(t){Jp.Be(t,self.YX);const s=t?Xp.Yj(t):null;Yp.GO(s)}XX(t,s){const i=self.hB.rB(t);if(!i)throw new Error("invalid IImageInfo");return i.KX(Yp,{aG:s?.aG??"clamp-to-edge",lG:s?.lG??"clamp-to-edge",uG:s?.uG??"trilinear",dG:s?.dG??!0})}ZX(t){const s=self.hB.rB(t);if(!s)throw new Error("invalid IImageInfo");s.aP()}Nz(t){const s=self.hB.rB(t);if(!s)throw new Error("invalid IImageInfo");const i=s.TT();return self.YX.QX(Xp,i)}tK(t,s){if(!qp(t))throw new TypeError("invalid texture data");const i=Yp.lF(t,{aG:s?.aG??"clamp-to-edge",lG:s?.lG??"clamp-to-edge",uG:s?.uG??"trilinear",dG:s?.dG??!0});return self.YX.QX(Xp,i)}sK(t,s,i){Jp.he(t),Jp.he(s);const e=Yp.mT(t,s,{aG:i?.aG??"clamp-to-edge",lG:i?.lG??"clamp-to-edge",uG:i?.uG??"trilinear",dG:i?.dG??!0});return self.YX.QX(Xp,e)}iK(t,s,i){Jp.$e(s,self.YX);const e=Xp.Yj(s);Yp.gA(t,e,{mG:i?.mG??!0})}deleteTexture(t){Jp.$e(t,self.YX);const s=Xp.Yj(t);Yp.ST(s)}eK(){const t=Yp.zb();return new self.nK(Xp,t)}rK(){Xp.I$().hK(Yp)}oK(t){Jp.$e(t,globalThis.Jj),Xp.Yj(t).aK(Yp)}}}{const Qp=self.Cs,tm=self.Ns,sm=new WeakMap,im=new WeakMap;self.YX=class{constructor(t,s){sm.set(this,{runtime:t,texture:s}),im.set(s,this),t.DW(this,s),Object.defineProperties(this,{width:{value:s.Vg(),writable:!1},height:{value:s.Qg(),writable:!1}})}static QX(t,s){if(!s)return null;return im.get(s)||new self.YX(t,s)}}}{let em=function(t){return hm.get(t).lK};getActual=em;const nm=self.Cs,rm=self.Ns,hm=new WeakMap;self.nK=class{constructor(t,s){hm.set(this,{runtime:t,lK:s}),t.DW(this,s)}release(){em(this).qn()}set uK(t){rm.ue(t),em(this).gP(t)}get uK(){return em(this).SE()}set cK(t){rm.he(t),em(this).yP(t)}get cK(){return em(this).wP()}set lineHeight(t){rm.he(t),em(this).vP(t)}get lineHeight(){return em(this).bP()}set fK(t){em(this).MP(t)}get fK(){return em(this).xP()}set dK(t){em(this).GP(t)}get dK(){return em(this).TP()}setColor(t){rm.Te(t),this.pK(t[0],t[1],t[2])}pK(t,s,i){em(this).PP(t,s,i)}mK(t){rm.ue(t),em(this).$M(t)}set gK(t){em(this).AP(t)}get gK(){return em(this).RP()}set verticalAlign(t){em(this).OP(t)}get verticalAlign(){return em(this).FP()}set yK(t){em(this).DP(t)}get yK(){return em(this).LP()}set wK(t){em(this).kP(t)}get wK(){return em(this).NP()}set text(t){rm.ue(t),em(this).Vc(t)}get text(){return em(this).$P()}Pj(t,s,i){rm.he(t),rm.he(s),rm.he(i),em(this).BP(t,s,i)}kz(){const{runtime:t,lK:s}=hm.get(this),i=s.TT();return self.YX.QX(t,i)}$z(){return em(this).yA().el()}SK(t){rm.Re(t),em(this).uP=t}vK(){em(this).aP()}get bK(){return em(this).jP()}get MK(){return em(this).HP()}}}{let om=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return cm.get(i)||""},am=function(t){return new Promise((s,i)=>{const e=document.createElement("script");e.onload=s,e.onerror=i,e.async=!1,e.type="module",e.src=t,document.head.appendChild(e)})};GetTypeFromFileExtension=om,AddScript=am;const lm=self.Cs,um=new Set(["local","remote"]),cm=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);lm.xK=class extends lm.Vn{constructor(t,s){super();const i=s.exportType;this.$c=t,this.GK="folders",this.TK=new Map,this.IK="cordova"===i,this.CK=!!s.isiOSCordova,this._K=!!s.isFileProtocol,this.EK=s.swClientId,this.PK=s.supportedAudioFormats||{},this.AK=new Map,this.RK=!1,this.FK=s.scriptFolder,this.DK="",this.LK="",this.kK="",this.NK=s.fileMap||new Map,this.$K=new Map;const e="html5"===i||"scirra-arcade"===i||"instant-games"===i;this.BK=e?"remote":"local",this.WK=new Map,this.jK=[],this.VK=[],this.HK=!1,this.UK=0,this.qK=0,this.zK=0,this.JK=!1,this.YK=lm.Un(lm.tp,()=>this.XK(),50),this.KK=lm.Un(lm.Ud,Math.max(lm.hardwareConcurrency,8)),this.ZK=lm.Un(lm.Ud,20),this.QK=new self.iB(this)}qn(){for(const t of this.WK.values())t.qn();this.WK.clear(),lm.bh(this.VK),this.$c=null}aB(){return this.$c}tZ(t){this.GK=t}gB(){return this.GK}sZ(){return this.FK}iZ(t){this.DK=t}SB(){return this.DK}eZ(t){this.LK=t}nZ(){return this.LK}rZ(t){this.kK=t}hZ(){return this.kK}oZ(){return this._K}no(t,s){return s=s||this.BK,lm.Zh(t)?("flat"===this.GK&&(t=t.toLowerCase()),this.IK&&this._K?this.aZ(t):"playable-ad-single-file"===this.$c.qB()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):"local"===s?this.KK.Bu(()=>lm.no(t)):this.ZK.Bu(()=>lm.no(t))):lm.no(t)}ro(t){return lm.Zh(t)?("flat"===this.GK&&(t=t.toLowerCase()),this.IK&&this._K?this.lZ(t):"playable-ad-single-file"===this.$c.qB()?lm.oo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.BK?this.KK.Bu(()=>lm.ro(t)):this.ZK.Bu(()=>lm.ro(t))):lm.ro(t)}io(t){return lm.Zh(t)?("flat"===this.GK&&(t=t.toLowerCase()),this.IK&&this._K?this.uZ(t):"playable-ad-single-file"===this.$c.qB()?lm.ao(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.BK?this.KK.Bu(()=>lm.io(t)):this.ZK.Bu(()=>lm.io(t))):lm.io(t)}async eo(t){const s=await this.io(t);return JSON.parse(s)}cZ(t,s){return"flat"===this.GK&&(t=t.toLowerCase()),this.$c.H$("runtime","cordova-fetch-local-file",{filename:t,as:s})}uZ(t){return this.cZ(t,"text")}async aZ(t){const s=await this.cZ(t,"buffer"),i=om(t);return new Blob([s],{type:i})}async fZ(t){"flat"===this.GK&&(t=t.toLowerCase());let s=this.TK.get(t);if(s)return s;const i=await this.aZ(t);return s=URL.createObjectURL(i),this.TK.set(t,s),s}lZ(t){return this.cZ(t,"buffer")}yB(t){"flat"===this.GK&&(t=t.toLowerCase());let s=this.DK+t;return"Gecko"===lm.Zs.ni&&"preview"===this.$c.qB()&&(s=this.dZ(s)),s}pB(t){return lm.Kh(t)?Promise.resolve(t):this.IK&&this._K?this.fZ(t):"playable-ad-single-file"===this.$c.qB()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.GK&&(t=t.toLowerCase()),Promise.resolve(t))}pZ(t){if(lm.Kh(t)||"preview"!==this.$c.qB()||!this.EK||!t)return t;try{const s=new URL(t,location.href);return s.searchParams.set("__c3_client_id",this.EK),s.toString()}catch(s){return console.warn("Invalid iframe URL: "+t),t}}mZ(t){return this.pB(t)}gZ(t,s){return(s?"true":"false")+"|"+t}yZ(t){const s=!!t.wZ;if(t.SZ&&!um.has(t.SZ))throw new Error("invalid load policy");const i=this.gZ(t.url,s);let e=this.WK.get(i);return e||(e=lm.Un(lm.vZ,this,{url:t.url,size:t.size||0,SZ:t.SZ||this.BK,wZ:s}),this.WK.set(i,e),this.HK||(this.UK+=e.Fu(),this.VK.push(e.bZ().then(()=>this.MZ(e.Fu())))),e)}xZ(t){const s=this.gZ(t.GZ(),t.TZ());this.WK.delete(s)}async IZ(){try{await Promise.all(this.VK),this.zK=1}catch(t){console.error("Error loading: ",t),this.JK=!0,this.XK()}}CZ(){this.HK=!0}_Z(){return this.JK}MZ(t){this.qK+=t,this.YK.mp()}XK(){const t=lm.Un(lm.Event,"loadingprogress");this.zK=lm.Kn(this.qK/this.UK,0,1),t.progress=this.zK,this.$c.Sf().dispatchEvent(t),this.$c.EZ(lm.Un(lm.Event,"loadingprogress"))}o$(){return this.zK}l$(){return this.$c.AZ().PZ()}RZ(t){lm.Th(this.jK,t),this.jK.length&&this.VK.push(this.OZ())}async OZ(){const t=[],s=[];for(const[i,e,n]of this.jK)this.UK+=n,t.push(this.FZ(i,e,s).then(()=>this.MZ(n)));await Promise.all(t),this.$c.qk()&&s.length>0&&await this.$c.H$("runtime","load-webfonts",{webfonts:s})}async FZ(t,s,i){try{let e=await this.pB(s);"Gecko"===lm.Zs.ni&&(t=`'${t}'`),("Gecko"===lm.Zs.ni&&"preview"===this.$c.qB()||"playable-ad-single-file"===this.$c.qB())&&(e=this.dZ(e));const n=new FontFace(t,`url('${e}')`);this.$c.qk()?self.fonts.add(n):document.fonts.add(n),await n.load(),this.$c.qk()&&i.push({name:t,url:e})}catch(s){console.warn(`[C3 runtime] Failed to load web font '${t}': `,s)}}DZ(t){return!!this.PK[t]}LZ(t,s){this.RK=!!s;for(const[s,i,e]of t)this.AK.set(s,{fileName:s,kZ:i.map(t=>({type:t[0],NZ:t[1],fullName:s+t[1],fileSize:t[2]})),$Z:e})}BZ(t){"flat"===this.GK&&(t=t.toLowerCase());const s=this.AK.get(t);if(!s)return null;let i=null;for(const t of s.kZ)if(i||"audio/webm; codecs=opus"!==t.type||(i=t),this.DZ(t.type))return t;return i}WZ(t){const s=this.BZ(t);return s?{url:this.yB(s.fullName),type:s.type}:null}jZ(){if(this.RK){const t=[];for(const s of this.AK.values()){if(s.$Z)continue;const i=this.BZ(s.fileName);i&&t.push({VZ:s.fileName,url:this.yB(i.fullName),type:i.type,fileSize:i.fileSize})}return t}return[]}HZ(t){return"preview"===this.$c.qB()&&(t=new URL(t,location.href).toString()),this.NK.get(t)||null}dZ(t){let s=this.$K.get(t);if(s)return s;const i=this.HZ(t);return i?(s=URL.createObjectURL(i),this.$K.set(t,s),s):t}Ck(){return this.QK}async MB(...t){const s=await Promise.all(t.map(t=>this.pB(t)));if(this.$c.qk())if(1===t.length){const s=t[0];await import((lm.Zh(s)?"./":"")+s)}else{const s=t.map(t=>`import "${lm.Zh(t)?"./":""}${t}";`).join("\n"),i=URL.createObjectURL(new Blob([s],{type:"application/javascript"}));await import(i)}else await Promise.all(s.map(t=>am(t)))}async GB(t){if(WebAssembly.compileStreaming){const s=await this.pB(t);return await WebAssembly.compileStreaming(fetch(s))}{const s=await lm.ro(t);return await WebAssembly.compile(s)}}async IB(t){const s=await this.pB(t);return await this.$c.H$("runtime","add-stylesheet",{url:s})}}}{const fm=self.Cs;fm.UZ=class extends fm.Vn{constructor(t,s){super(),this.qZ=t,this.$c=t.aB(),this.zZ=s.url||"",this.JZ=s.size,this.YZ=s.SZ,this.XZ=s.blob||null,this.KZ=!!this.XZ,this.bw=null}qn(){this.bw=null,this.qZ=null,this.$c=null,this.XZ=null}GZ(){return this.zZ}Fu(){return this.JZ}bZ(){return"local"===this.YZ||this.XZ?(this.KZ=!0,Promise.resolve()):(this.bw||(this.bw=this.qZ.no(this.zZ,this.YZ).then(t=>(this.KZ=!0,this.bw=null,this.XZ=t,t)).catch(t=>{console.error("Error loading resource: ",t),this.bw=null})),this.bw)}ZZ(){return this.KZ}QZ(){return this.XZ?Promise.resolve(this.XZ):this.bw?this.bw:this.qZ.no(this.zZ,this.YZ)}}}{const dm=self.Cs,pm=new dm.Ud,mm=new Set;dm.vZ=class extends dm.UZ{constructor(t,s){super(t,s),this.tQ=null,this.sQ=null,this.Up=0,this.iQ=-1,this.eQ=-1,this.nQ=!!s.wZ,mm.add(this)}qn(){if(0!==this.Up)throw new Error("released image asset which still has texture references");this.qZ.xZ(this),this.tQ=null,mm.delete(this),super.qn()}static rQ(){for(const t of mm)t.tQ=null,t.sQ=null,t.Up=0}KX(t,s){return s=s||{},this.Up++,this.sQ?Promise.resolve(this.sQ):(this.tQ||(s.cG=this.$c.I$().hQ(),this.tQ=this.oQ(t,s)),this.tQ)}async oQ(t,s){try{const i=await this.QZ();return 0===this.Up?(this.tQ=null,null):await pm.Bu(async()=>{const e=await t.uF(i,s);return this.tQ=null,0===this.Up?(t.ST(e),null):(this.sQ=e,this.iQ=e.Vg(),this.eQ=e.Qg(),this.sQ)})}catch(t){throw console.error("Failed to load texture: ",t),t}}aP(){if(this.Up<=0)throw new Error("texture released too many times");this.Up--,0===this.Up&&this.sQ&&(this.sQ.gM().ST(this.sQ),this.sQ=null)}aQ(){return this.Up}TT(){return this.sQ}Vg(){return this.iQ}Qg(){return this.eQ}TZ(){return this.nQ}async lQ(){const t=await this.QZ();return dm.Ai.ImageBitmap?await createImageBitmap(t):await dm.uo(t)}}}{let gm=function(t,s){return t.D$().uQ()-s.D$().uQ()};SortByInstLastCachedZIndex=gm;const ym=self.Cs,wm=self.assert;ym.cQ=class extends ym.Vn{constructor(t,s,i){super(),this.fQ=t,this.Pa=s,this.Aa=i,this.dQ=[],this.pQ=!0,this.mQ=new Set,this.gQ=!1}qn(){ym.bh(this.dQ),this.mQ.clear(),this.fQ=null}Bf(){ym.bh(this.dQ),this.pQ=!0,this.mQ.clear(),this.gQ=!1}yQ(){this.pQ=!1}Au(){return!this.dQ.length||!(this.dQ.length>this.mQ.size)&&(this.wQ(),!0)}SQ(t){if(this.mQ.has(t))return this.mQ.delete(t),void(0===this.mQ.size&&(this.gQ=!1));this.dQ.push(t),this.pQ=1===this.dQ.length}Zf(t){this.mQ.add(t),this.gQ=!0,this.mQ.size>=50&&this.wQ()}wQ(){this.gQ&&(this.dQ.length!==this.mQ.size?(ym.Ph(this.dQ,this.mQ),this.mQ.clear(),this.gQ=!1):this.Bf())}vQ(){this.pQ||(this.dQ.sort(gm),this.pQ=!0)}bQ(t){this.wQ(),this.vQ(),this.dQ.length&&t.push(this.dQ)}}}{const Sm=self.Cs;Sm.MQ=class extends Sm.Vn{constructor(t,s){super(),this.xQ=t,this.GQ=s,this.TQ=Sm.Un(Sm._u)}qn(){this.TQ.qn(),this.TQ=null}IQ(t,s,i){let e=this.TQ.qs(t,s);return e||(i?(e=Sm.Un(Sm.cQ,this,t,s),this.TQ.Set(t,s,e),e):null)}CQ(t){return Math.floor(t/this.xQ)}_Q(t){return Math.floor(t/this.GQ)}EQ(t,s,i){if(s)for(let e=s.Qa(),n=s.sl();e<=n;++e)for(let n=s.tl(),r=s.il();n<=r;++n){if(i&&i.Tl(e,n))continue;const s=this.IQ(e,n,!1);s&&(s.Zf(t),s.Au()&&this.TQ.Ru(e,n))}if(i)for(let e=i.Qa(),n=i.sl();e<=n;++e)for(let n=i.tl(),r=i.il();n<=r;++n)s&&s.Tl(e,n)||this.IQ(e,n,!0).SQ(t)}PQ(t,s){let i=this.CQ(t.Qa());const e=this._Q(t.tl()),n=this.CQ(t.sl()),r=this._Q(t.il());for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this.IQ(i,t,!1);e&&e.bQ(s)}}AQ(t){let s=t.Qa();const i=t.tl(),e=t.sl(),n=t.il();for(;s<=e;++s)for(let t=i;t<=n;++t){const i=this.IQ(s,t,!1);i&&i.yQ()}}}}{let vm=function(t,s){return t.D$().uQ()-s.D$().uQ()},bm=function(t,s){return t.D$().tx()-s.D$().tx()};SortByInstLastCachedZIndex=vm,SortByInstZElevation=bm;const Mm=self.Cs,xm=self.assert,Gm=new Mm.Rect,Tm=new Mm.El,Im=[],Cm=new Mm.Rect,_m=new Mm.Rect,Em=self.ls,Pm=Em.ws,Am=Em.Ss,Rm=Em.ds,Om=Rm.create(),Fm=Pm.create(),Dm=Am.create(),Lm=Pm.create(),km=Pm.create(),Nm=Pm.create(),$m=Mm.Un(Mm.Ea),Bm=Mm.Un(Mm.Rect),Wm=[],jm=[],Vm=[],Hm={name:"",RQ:-1,OQ:!1,isVisible:!0,bV:!0,GV:!1,backgroundColor:[1,1,1,1],HV:!0,FQ:[1,1],opacity:1,zV:!1,DQ:!1,LQ:!1,kQ:!1,AV:1,mL:0,WV:0,NQ:[],$Q:[],BQ:[]},Um=new Map,qm=t=>{if(!t.dz.fH().WQ())return;const s=t.dz.TH();Um.has(s)&&(Um.delete(s),Um.size||t.dz.aB().Sf().removeEventListener("instancedestroy",qm))};Mm.jQ=class extends Mm.Vn{constructor(t,s,i){super(),i=Object.assign({},Hm,i),this.VQ=t,this.$c=t.aB(),this.HQ=s,this.Yn=i.name,this.Aw=-1,this.UQ=!!i.GV,this.qQ=-1,this.zQ=i.RQ,this.JQ=!!i.OQ,this.YQ=!!i.isVisible,this.XQ=!!i.bV,this.KQ=Mm.Un(Mm.Go),this.KQ.Sa(i.backgroundColor),this.ZQ=!!i.HV,this.QQ=i.FQ[0],this.t0=i.FQ[1],this.OM=Mm.Un(Mm.Go,1,1,1,i.opacity),this.s0=Mm.Un(Mm.Go),this.i0=!!i.zV,this.e0=!!i.DQ,this.n0=!!i.LQ,this.r0=!!i.kQ,this.h0=i.AV,this.RM=i.mL,this.o0=null,this.a0=1,this.FM=i.WV,this.l0=0,this.u0=0,this.c0=0,this.f0=!1,this.iR=Mm.Un(Mm.Rect),this.d0=Mm.Un(Mm.Rect),this.p0=Mm.Un(Mm.Rect),this.m0=!0,this.lT=Rm.create(),this.g0=!0,this.QD=Rm.create(),this.y0=!0,this.w0=Mm.Un(Mm.Nw.jw),this.S0=!0,this.v0=[],this.b0=i.NQ,this.M0=[],this.x0=[],this.G0=new Map,this.dQ=[],this.T0=!1,this.I0=!1,this.C0=!1;const e=this.$c.I$();this._0=Mm.Un(Mm.E0,this,i.$Q),this.Sk=Mm.Un(Mm.Nw.aD,e.P0(),{KF:(t,s)=>{const i=s.ck(),n=i.hF();t.$M(i.A0()),t.pF(n),t.mF(n),e.R0(n)},QF:t=>this.Cj().O0(t)}),this.F0=!0,this.D0=!0,this.L0=null,this.k0=[],this.N0=!1,this.$0=Mm.Un(Mm.Rect,0,0,-1,-1),this.B0=Mm.Un(Mm.Rect,0,0,-1,-1),this.W0=new self.Jj(this),this.j0=Mm.Un(Mm.Event.Sf),this.V0(),this.H0()&&(this.L0=Mm.Un(Mm.MQ,this.$c.Jk(),this.$c.Xk())),this.U0=i.BQ.map(t=>Mm.jQ.q0(this.VQ,this,t))}z0(){for(const t of this.b0){const s=this.$c.J0(t[1]);this.VQ.Y0(s),s.X0()||(s.K0(t),s.Z0(this.Aw)),this.M0.push(t),this.G0.set(t[2],t)}Mm.Th(this.v0,this.M0),this.b0=null}static q0(t,s,i){return Mm.Un(Mm.jQ,t,s,{name:i[0],RQ:i[2],isVisible:i[3],bV:i[13],GV:i[19],backgroundColor:i[4].map(t=>t/255),HV:i[5],FQ:[i[6],i[7]],opacity:i[8],zV:i[9],DQ:i[17],LQ:i[18],kQ:i[10],AV:i[11],mL:i[12],WV:i[16],NQ:i[14],$Q:i[15],BQ:i[20]})}qn(){for(const t of this.U0)t.qn();Mm.bh(this.U0);for(const t of this.dQ)this.$c.wH(t);Mm.bh(this.dQ),this._0.qn(),this._0=null,this.Sk.qn(),this.Sk=null,this.W0=null,this.HQ=null,this.VQ=null,this.$c=null}zn(){return!this.VQ}Q0(t){return this.G0.get(t)}t1(t){const s=this.VQ.s1(),i=this.M0;let e=0;for(let n=0,r=i.length;n<r;++n){const r=i[n],h=this.$c.J0(r[1]);let o=!0;if(!h.i1()||s)if(h.WQ()&&Um.has(r[2]))o=!1;else{const s=this.$c.e1(r,this,!0);t.push(s),h.WQ()&&(Um.size||this.$c.Sf().addEventListener("instancedestroy",qm),Um.set(s.TH(),s),o=!1,this.x0.push(s.TH()))}o&&(i[e]=i[n],++e)}Mm.Sh(i,e),this.$c.mj(),this.W$()}n1(t,s){if(!t.qW().bW())throw new Error("instance is not of world type");const i=t.D$();if(i.L$()!==this)throw new Error("instance added to wrong layer");this.dQ.push(t),0!==i.tx()&&(this.C0=!0),s&&this.H0()&&t.D$().xU(),this.W$(t)}h1(t){this.dQ.includes(t)||(this.dQ.push(t),0!==t.D$().tx()&&(this.C0=!0),this.W$(t))}o1(t,s){const i=t.D$();if(i.L$()!==this)throw new Error("instance added to wrong layer");this.dQ.unshift(t),0!==i.tx()&&(this.C0=!0),this.W$(t),s&&this.H0()&&t.D$().xU()}a1(t,s){const i=this.dQ.indexOf(t);i<0||(s&&this.H0()&&t.D$().l1(),this.dQ.splice(i,1),this.W$(t),this.u1())}c1(){this.C0=!0}u1(){0===this.dQ.length&&(this.C0=!1)}f1(t){if(t){const t=new Set;for(const s of this.dQ){const i=s.D$().uQ();i>=0&&t.add(i)}let s=-1;for(const i of this.dQ){const e=i.D$();if(!(e.uQ()>=0)){for(++s;t.has(s);)++s;e.d1(s)}}}this.dQ.sort(vm)}m1(){}g1(){for(const t of this.dQ)t.fH().WQ()||this.$c.wH(t);this.$c.mj(),Mm.bh(this.dQ),this.C0=!1,this.W$()}w1(t,s,i,e,n,r){const h=this.$c.aN(),o=this.$c.S1(),a=t.v1(),l=[];for(const u of this.M0){const c=u[0],f=c[0],d=c[1];if(!s.Tl(f,d))continue;const p=o[u[1]];if(p!==t){if(!a)continue;if(!t.Tj(p))continue}let m=n;if(!m){const t=this.$c.O$();this.m$()===t?m=this:(m=t.b1(this.Pc()),m||(m=t.N$(this.xk())))}const g=this.$c.e1(u,m,!1,void 0,void 0,!1,r,void 0,r);r&&m.uj(g);const y=g.D$();y.IU(i,e),y.xU(),h.cj(!0),g.fj(),h.cj(!1),l.push(g)}return l}oj(){return this.dQ.length}m$(){return this.VQ}Pc(){return this.Yn}M1(t){this.Aw=t}xk(){return this.Aw}G1(t){this.qQ=t}fY(){return this.qQ}TV(){return this.UQ}IV(t){t=!!t,this.UQ!==t&&(this.UQ=t,this.VQ.T1(),this.$c.j$())}I1(){let t=-1;const s=this.cV();return t=s?s.pV().indexOf(this):this.m$().C1().indexOf(this),t}_1(){return this.zQ}aB(){return this.$c}E1(){return this.JQ}P1(){for(const t of this.fV())if(t.E1())return!0;return!1}uW(){return this.$c.uW()}Cj(){return this._0}Mk(){return this.A1(),this.Sk}A1(){const t=this.R1();if(!this.F0&&t===this.D0&&!this.Sk.tL())return;const s=this.Cj().O1();this.Sk.sL(s.map(t=>t.zI()),{sD:s.map(t=>t.xk()),iD:!t,oD:!0}),this.F0=!1,this.D0=t}vz(){this.Cj().vz(),this.F0=!0}H0(){return this.r0&&!this.n0}F1(){return this.L0}D1(){this.N0=!1}vV(){for(const t of this.L1())if(!t.yV())return!1;return!0}yV(){return this.YQ}wV(t){t=!!t,this.YQ!==t&&(this.YQ=t,this.$c.j$())}xV(t){this.XQ=!!t}MV(){return this.XQ}_V(){for(const t of this.L1())if(!t.MV())return!1;return!0}ZV(t){if(t=!!t,this.f0!==t){if(this.f0=t,t){const t=this.m$();this.u0=t.Lj(),this.c0=t.Nj()}this.N1(),this.$c.j$()}}B1(){return this.f0}Dj(t){const s=this.m$(),i=s.W1(),e=s.j1();t>e&&(t=e),t<i&&(t=i),this.u0!==t&&(this.u0=t,this.B1()&&(this.N1(),this.$c.j$()))}kj(t){const s=this.m$(),i=s.V1(),e=s.H1();t>e&&(t=e),t<i&&(t=i),this.c0!==t&&(this.c0=t,this.B1()&&(this.N1(),this.$c.j$()))}Lj(){return this.B1()?this.u0:this.m$().Lj()}Nj(){return this.B1()?this.c0:this.m$().Nj()}tH(){return this.U1(),this.iR}q1(){return this.U1(),this.d0}z1(){return this.U1(),this.p0}J1(){return this.m$().hV()}WS(t){return this.$c.WS(t)}Y1(t,s){const i=this.q1();if(0===t)s.S(i);else{let e=i.ol(),n=i.al();const r=this.X1(t),h=i.width()/r,o=i.height()/r,[a,l]=this.J1();if(.5!==a||.5!==l){const s=this.K1(),i=this.$c,r=this.WS()/s;let h=(a-.5)*i.Z1()/r,o=(l-.5)*i.Q1()/r;const u=this.Fj();0!==u&&($m.set(h,o),$m.rotate(u),h=$m.Fa(),o=$m.La());const c=Mm.mr(s,0,t);e+=Mm.Ct(h,0,c),n+=Mm.Ct(o,0,c)}s.set(e-h/2,n-o/2,e+h/2,n+o/2)}}SO(){return this.OM.Wo()}bO(t){t=Mm.Kn(t,0,1),this.OM.Wo()!==t&&(this.OM.Lo(t),this.V0(),this.$c.j$())}V0(){this.s0.S(this.OM),this.s0.Zo()}A0(){return this.s0}R1(){return this.OM.Jo(1,1,1,1)}OV(){return this.h0}RV(t){this.h0!==t&&(this.h0=t,this.N1(),this.$c.j$())}kV(){return this.QQ}BV(){return this.t0}t2(t,s){this.QQ===t&&this.t0===s||(this.QQ=t,this.t0=s,this.N1(),this.$c.j$())}LV(t){this.t2(t,this.BV())}$V(t){this.t2(this.kV(),t)}sx(t){this.FM!==t&&(this.FM=t,this.$c.j$())}tx(){return this.FM}Oj(t){t=Mm.Zn(t),this.l0!==t&&(this.l0=t,this.N1(),this.$c.j$())}Fj(){return Mm.Zn(this.VQ.Fj()+this.l0)}FV(){return this.l0}s2(){return this.dQ.length>0}$$(){return this.dQ}i2(){return this.e2()&&this.n0?(Mm.Th(Vm,this.$$()),Vm.sort((t,s)=>this.n2(t,s)),Vm):this.$$()}h2(t){Mm.On(t,this.i2());for(const s of this.U0)s.vV()&&s.SO()>0&&s.h2(t)}n2(t,s){const i=this.m$().o2(),e=i[0],n=i[1],r=i[2],h=t.D$(),o=s.D$(),a=h.YM()-e,l=h.ZM()-n,u=h.tx()-r,c=o.YM()-e,f=o.ZM()-n,d=o.tx()-r;return c*c+f*f+d*d-(a*a+l*l+u*u)}KV(){return this.KQ}qV(){return this.ZQ}UV(t){t=!!t,this.ZQ!==t&&(this.ZQ=t,this.$c.j$())}YV(){return this.i0}JV(t){t=!!t,this.i0!==t&&(this.i0=t,this.$c.j$())}jV(t){t=!!t,this.e0!==t&&(this.e0=t,this.N1(),this.$c.j$())}VV(){return this.e0}a2(){return!this.aB().l2()||!this.e0}e2(){return!this.a2()}u2(){return this.e2()&&this.m$().c2()}f2(){if(!this.u2())return!1;for(const t of this.U0)if(!t.f2())return!1;return!0}NM(t){this.RM!==t&&(this.RM=t,this.$c.j$())}XV(){return this.RM}d2(){return!this.HQ}cV(){return this.HQ}m2(t){this.HQ=t}pV(){return this.U0}g2(){return this.U0.length>0}w2(t,s=!0){s?this.U0.push(t):this.U0.unshift(t)}S2(t,s,i){let e=this.U0.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.U0.splice(e,0,t)}v2(t){const s=this.U0.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.U0.splice(s,1)}b2(){for(const t of this.U0)if(t.M2())return!0;return!1}*gV(){for(const t of this.U0)yield*t.gV();yield this}*fV(){let t=this.cV();for(;t;)yield t,t=t.cV()}*L1(){yield this,yield*this.fV()}G2(t){for(const s of this.fV())if(s===t)return!0;return!1}T2(t){return this===t||this.QQ===t.QQ&&this.t0===t.t0&&this.a0===t.a0&&this.h0===t.h0&&this.l0===t.l0&&this.Lj()===t.Lj()&&this.Nj()===t.Nj()}I2(){return{parallaxX:this.kV(),parallaxY:this.BV(),scale:this.PV(),scaleRate:this.OV(),angle:this.FV(),hasOwnScroll:this.B1(),scrollX:this.Lj(),scrollY:this.Nj()}}C2(t){this.t2(t.parallaxX,t.parallaxY),this.EV(t.scale),this.RV(t.scaleRate),this.Oj(t.angle),this.ZV(t.hasOwnScroll),this.Dj(t.scrollX),this.kj(t.scrollY),this.U1()}_2(t){0!==t.size&&Mm.Ph(this.dQ,t)>0&&(this.u1(),this.W$())}W$(t){this.T0=!1,this.N0=!1,t&&!t.fH().qW().xW()||(this.I0=!1)}E2(){if(!this.T0){if(this.dQ.sort(bm),this.H0())for(let t=0,s=this.dQ.length;t<s;++t){const s=this.dQ[t].D$();s.d1(t),this.L0.AQ(s.P2())}else for(let t=0,s=this.dQ.length;t<s;++t)this.dQ[t].D$().d1(t);this.T0=!0}}A2(){if(this.I0)return;const t=this.VQ.R2(this.fY()).map(t=>[...t.gV()]).flat();let s=0;for(const i of t){for(const t of i.$$())t.fH().qW().xW()&&t.D$().O2(s++);i.F2()}}F2(){this.I0=!0}D2(){return{isVisible:this.vV(),opacity:this.SO(),isInteractive:this.MV()}}L2(t,s,i){const e=t.D$(),n=s.D$();if(e.L$()!==this||n.L$()!==this)throw new Error("can't arrange Z order unless both objects on this layer");const r=e.k$();let h=n.k$();return r!==h+(i?1:-1)&&(Mm.Ih(this.dQ,r),r<h&&h--,i&&h++,h===this.dQ.length?this.dQ.push(t):this.dQ.splice(h,0,t),this.W$(t),!0)}N2(t,s){const i=[];let e=0,n=0,r=t.length,h=s.length;for(;e<r&&n<h;){const r=t[e],h=s[n];r.D$().uQ()<h.D$().uQ()?(i.push(r),++e):(i.push(h),++n)}for(;e<r;++e)i.push(t[e]);for(;n<h;++n)i.push(s[n]);return i}B2(t){const s=[],i=t.length;for(let e=0;e<i-1;e+=2){const i=t[e],n=t[e+1];s.push(this.N2(i,n))}return i%2==1&&s.push(t[i-1]),s}W2(t){for(;t.length>1;)t=this.B2(t);return t[0]}j2(){return this.E2(),Mm.bh(Im),this.L0.PQ(this.tH(),Im),Im.length?1===Im.length?Im[0]:this.W2(Im):[]}M2(){return this.vV()&&this.SO()>0&&this.V2()}V2(){if(this.s2()||!this.qV()||this.j0.Gf("beforedraw")||this.j0.Gf("afterdraw"))return!0;for(const t of this.U0)if(t.V2())return!0;return!1}H2(){return this.YV()||!this.R1()||0!==this.XV()||this._0.U2()}q2(){if(this.H2())return!0;for(const t of this.U0)if(t.q2())return!0;return!1}hF(){return this.o0}X1(t){if(this.VQ.lV())return 1;{const s=this.z2();return s/(s-t)}}J2(t){const s=this.$c.uH();if(this.VQ.lV())return s;{const i=this.z2();return this.WS()/Math.abs(i-t)*s}}N1(){this.y0=!0,this.S0=!0,this.m0=!0}Y2(t){return this.y0&&(this.X2(t,this.QD,0,0,null),this.y0=!1),this.QD}K1(t){return this.WS(t)/this.K2()}z2(){return this.u2()?this.m$().o2()[2]:this.K1()}Z2(){if(this.u2()){const t=this.m$().o2();return[t[0],t[1],t[2]]}return this.Q2()}Q2(t=0,s=0,i=0){const e=this.$c,n=this.m$(),r=e.t3(),h=e.s3();let o=(this.Lj()-r)*this.QQ+r,a=(this.Nj()-h)*this.t0+h;e.Qk()&&(o=Math.round(o),a=Math.round(a));let l=o+t,u=a+s;const c=n.lV()?this.WS(i):this.K1(i),[f,d]=this.J1();if(.5!==f||.5!==d){const t=this.WS(i)/c;let s=(f-.5)*e.Z1()/t,n=(d-.5)*e.Q1()/t;const r=this.Fj();0!==r&&($m.set(s,n),$m.rotate(r),s=$m.Fa(),n=$m.La()),l+=s,u+=n}return[l,u,c]}X2(t,s,i,e,n){const r=this.$c,h=this.m$();if(this.u2()){Pm.S(Lm,h.o2()),Pm.S(km,h.i3()),Pm.S(Nm,h.e3());const t=r.t3(),s=r.s3(),i=km[0]-Lm[0],e=km[1]-Lm[1],n=km[2]-Lm[2];Lm[0]=(Lm[0]-t)*this.QQ+t,Lm[1]=(Lm[1]-s)*this.t0+s,Lm[2]*=Math.max(this.QQ,this.t0),km[0]=Lm[0]+i,km[1]=Lm[1]+e,km[2]=Lm[2]+n}else{const[t,s,r]=this.Q2(i,e,n);Pm.set(Lm,t,s,r),Pm.set(km,t,s,r-100);const h=this.Fj();0===h?Pm.set(Nm,0,1,0):Pm.set(Nm,Math.sin(h),Math.cos(h),0)}t.nv(s,Lm,km,Nm,n||r.Q1())}n3(){this.g0=!0,this.S0=!0,this.m0=!0}r3(t){return this.g0&&(this.h3(t),this.g0=!1),this.lT}h3(t){const s=this.$c.I$(),[i,e]=this.J1();if(this.VQ.lV())t.ev(this.lT,s.o3(),s.a3());else if(.5===i&&.5===e)Rm.S(this.lT,s.l3());else{const n=s.o3(),r=s.a3();t.tv(this.lT,n/r,i,e)}}aK(t,s=!0,i=0,e=0,n=0){s&&t.aO(this.r3(t));let r=null;0===i&&0===e&&0===n?r=this.Y2(t):(this.X2(t,Om,i,e,n),r=Om),t.pO(r)}u3(t){this.aK(t),t.jv(this.tx())}c3(t){let s=null;if(t.jb()&&this.$c.f3()){const i=this.$c.I$().d3(this);i&&(s=i.VA(),t.bF(s))}return s}m3(t){if(t.sv()&&this.$c.f3()){const s=2*(this.xk()+1);t.g3(s,s+1)}}y3(t,s){if(this.j0.Gf(s)){t.uv(),t.GO(null),t._O(),t.Eb(),t.vO(1,1,1,1),t.jv(this.tx()),t.Hv(0);const i=new Mm.Event(s);i.zC=this.$c.I$().T$(),this.EZ(i)}}Zx(t,s,i){const e=this.$c.I$(),n=this.H2();let r=null;const h=this.c3(t);if(this.m3(t),n){const s={uG:this.$c.Kk(),KG:!0,w3:!!t.sv()&&this.$c.S3()};"low"===e.v3()&&(s.width=e.o3(),s.height=e.a3()),r=this.$c.b3(s),this.o0=r,t.fF(r),this.qV()&&t.QO(0,0,0,0)}else this.o0=s,t.fF(s);if(this.qV()||t.Pu(this.KQ),this.VQ.M3(t,this.o0,this.U0,n&&this.qV()),this.m3(t),this.aK(t),t.jv(this.tx()),t.iF(this.e2()),this.y3(t,"beforedraw"),this.K2()>Number.EPSILON){this.E2();const s=this.H0()&&0===this.tx()&&!this.C0;this.u2()?this.x3(t):s?this.G3(t):this.T3(t,this.i2())}this.y3(t,"afterdraw"),t.jv(0),t.Hv(0),n&&(t.iF(!1),this.I3(t,r,s,i)),h&&t.xF(h),this.o0=null}T3(t,s){const i=this.tH(),e=this.o0,n=this.m$().lV(),r=this.m$().C3();let h=null;for(let o=0,a=s.length;o<a;++o){const a=s[o];if(a===h)continue;h=a;const l=a.D$();l.vV()&&l._3(i,r,n)&&this.E3(a,l,t,e)}}x3(t){const s=this.o0,i=this.P3(),e=Wm,n=jm,r=this.i2();for(let h=0,o=r.length;h<o;){const a=r[h],l=a.D$();if(!l.vV()||!l.A3(i)){++h;continue}(!a.R3()||l.O3()>0)&&n.push(a);const u=a.D$().LU();e.push(a);let c=h+1;for(;c<o;++c){const t=r[c],s=t.D$();if(s.vV()&&s.A3(i)){if(s.LU()!==u)break;t.R3()?(s.O3()>0&&n.push(t),e.push(t)):n.push(t)}}if(1!==e.length||e[0].F3()){this.D3(t,e);for(let i=0,e=n.length;i<e;++i){const e=n[i],r=e.D$();r.L3(!0),this.E3(e,r,t,s),r.L3(!1)}}else{this.E3(a,l,t,s);for(let i=0,e=n.length;i<e;++i){const e=n[i];if(e===a)continue;const r=e.D$();r.L$().E3(e,r,t,s)}}h=c,Mm.bh(e),Mm.bh(n)}}D3(t,s){const i=this.o0;t.yF();for(let i=0,e=s.length;i<e;++i){const e=s[i],n=e.D$();n.N3(!0),this.B3(e,n,t)}t.wF();for(let e=0,n=s.length;e<n;++e){const n=s[e],r=n.D$();this.E3(n,r,t,i),r.N3(!1)}t.vF()}G3(t){const s=this.L0,i=this.B0,e=this.$0,n=this.tH();let r;i.set(s.CQ(n.Qa()),s._Q(n.tl()),s.CQ(n.sl()),s._Q(n.il())),this.N0&&i.equals(e)?r=this.k0:(r=this.j2(),this.N0=!0,e.S(i)),this.T3(t,r),r!==this.k0&&Mm.Th(this.k0,r)}E3(t,s,i,e){s.U2()?this.W3(t,s,i,e):this.B3(t,s,i)}B3(t,s,i){const e=s.j3();i.Tv()!==e&&e.kM(),t.Zx(i)}W3(t,s,i,e){this.V3(t,s,i,e,null)&&this.aK(i)}V3(t,s,i,e,n){const r=s.bU().Mk();return r.cL(i,e,{dL:t,mL:s.XV(),devicePixelRatio:this.$c.H3(),time:t.U3(),gL:this.$c.q3()*this.K2(),yL:this.Fj(),jL:s.$U(),VL:r.lk()?null:this.z3(s),GL:n&&n.GL,TL:n&&n.TL,IL:n&&n.IL,CL:n&&n.CL,_L:n&&n._L,EL:n&&n.EL}),i.jv(this.tx()),r.gO()}I3(t,s,i,e){const n=this._0.O1(),r=this.$c;0===n.length?(t.fF(i),t.uv(),e&&0===this.RM&&this.R1()?t.dF(s):(t.NM(this.RM),t.$M(this.s0),t.pF(s)),t.mF(s),r.R0(s)):this.Mk().cL(t,i,{dL:this,mL:this.XV(),devicePixelRatio:r.H3(),gL:r.q3()*this.K2(),yL:this.Fj(),jL:this.tH(),VL:null,tD:!0})}PV(){return this.a0}EV(t){this.a0!==t&&(this.a0=t,this.VQ.J3(),this.N1(),this.$c.j$())}uH(){return this.K2()*this.$c.uH()}vY(){return this.K2()*this.$c.vY()}K2(){return(this.a0*this.VQ.Rj()-1)*this.h0+1}U1(){if(!this.m0)return;this.m0=!1;const t=this.$c.t3(),s=this.$c.s3(),i=(this.Lj()-t)*this.QQ+t,e=(this.Nj()-s)*this.t0+s,n=this.K2(),r=this.$c.Z1()/n,h=this.$c.Q1()/n;let o=i-r/2,a=e-h/2;this.$c.Qk()&&(o=Math.round(o),a=Math.round(a));const l=this.d0;l.set(o,a,o+r,a+h);const u=this.Fj();0!==u&&(Gm.S(l),Gm.offset(-l.ol(),-l.al()),Tm.Kl(Gm,u),Tm.Ql(Gm),Gm.offset(l.ol(),l.al()),l.S(Gm));const c=this.FM;this.Y1(c,this.iR),this.u2()?this.Y3(c,this.p0):this.p0.S(this.iR)}Y3(t,s){const i=this.$c.I$(),e=i.eW(),n=i.rW(),[r,h]=this.iH(0,0,t),[o,a]=this.iH(e,0,t),[l,u]=this.iH(e,n,t),[c,f]=this.iH(0,n,t);let d=Math.min(r,o,l,c),p=Math.min(h,a,u,f),m=Math.max(r,o,l,c),g=Math.max(h,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}iH(t,s,i=0){return this.X3(t,s,i,this.vY())}hH(t,s,i=0){return this.X3(t,s,i,this.uH()*this.uW())}X3(t,s,i,e){const n=this.$c,r=n.gM(),h=this.K2(),o=n.Z1()/h,a=n.Q1()/h,l=Dm;Am.set(l,0,0,o,a),t/=e,s=l[3]-s/e;const u=this.r3(r),c=this.Y2(r),f=Fm;return Mm.Nw.Ww(t,s,i,c,u,l,f)?[f[0],f[1]]:[NaN,NaN]}K3(t,s){const i=this.a0,e=this.h0,n=this.QQ,r=this.t0,h=this.l0,o=this.u2();o&&this.m$().Z3(!1),this.a0=1,this.h0=1,this.QQ=1,this.t0=1,this.l0=0,this.N1();const a=this.iH(t,s);return this.a0=i,this.h0=e,this.QQ=n,this.t0=r,this.l0=h,this.N1(),o&&this.m$().Z3(!0),a}nH(t,s,i=0){return this.Q3(t,s,i,this.vY())}aH(t,s,i=0){return this.Q3(t,s,i,this.uH()*this.uW())}Q3(t,s,i,e){const n=this.$c,r=n.gM(),h=this.K2(),o=n.Z1()/h,a=n.Q1()/h,l=Dm;Am.set(l,0,0,o,a);const u=this.r3(r),c=this.Y2(r),f=Fm;return Mm.Nw.$w(t,s,i,c,u,l,f)?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}t5(t,s){return t*=this.uH()*this.uW(),0!==s&&(t*=this.X1(s)),t}z3(t){const s=t.$U(),i=t.LU(),e=t.O3(),n=i+e,r=s.Qa(),h=s.tl(),o=s.sl(),a=s.il();if(this.u2()){if(this.s5(r,h,i)||this.s5(o,h,i)||this.s5(o,a,i)||this.s5(r,a,i))return null;if(e>0&&(this.s5(r,h,n)||this.s5(o,h,n)||this.s5(o,a,n)||this.s5(r,a,n)))return null}else if(n>=this.K1())return null;let[l,u]=this.aH(r,h,i),[c,f]=this.aH(o,a,i);if(0!==this.Fj()||e>0||this.u2()){const[t,s]=this.aH(o,h,i),[d,p]=this.aH(r,a,i);if(e>0){const[i,e]=this.aH(r,h,n),[m,g]=this.aH(o,h,n),[y,w]=this.aH(o,a,n),[S,v]=this.aH(r,a,n);let b=Math.min(l,c,t,d,i,m,y,S);c=Math.max(l,c,t,d,i,m,y,S),l=b,b=Math.min(u,f,s,p,e,g,w,v),f=Math.max(u,f,s,p,e,g,w,v),u=b}else{let i=Math.min(l,c,t,d);c=Math.max(l,c,t,d),l=i,i=Math.min(u,f,s,p),f=Math.max(u,f,s,p),u=i}}return Gm.set(l,u,c,f),Gm}P3(){return this.S0&&(this.i5(),this.S0=!1),this.w0}i5(){const t=this.$c.gM(),s=this.r3(t),i=this.Y2(t);this.w0.Yw(i,s)}s5(t,s,i){return this.P3().Kw(t,s,i)}e5(){return{d:this.E1(),s:this.PV(),a:this.FV(),v:this.yV(),i:this.MV(),html:this.TV(),bc:this.KQ.toJSON(),t:this.qV(),sx:this.u0,sy:this.c0,hosp:this.f0,px:this.kV(),py:this.BV(),c:this.OM.toJSON(),sr:this.OV(),fx:this._0.mx(),cg:this.x0}}n5(t){this.JQ=!!t.d,this.a0=t.s,this.l0=t.a,this.YQ=!!t.v,this.XQ=!t.hasOwnProperty("i")||t.i,this.UQ=!!t.html,this.KQ.Sa(t.bc),this.ZQ=!!t.t,t.hasOwnProperty("sx")&&(this.u0=t.sx),t.hasOwnProperty("sy")&&(this.c0=t.sy),t.hasOwnProperty("hosp")&&(this.f0=!!t.hosp),this.QQ=t.px,this.t0=t.py,this.OM.Sa(t.c),this.V0(),this.h0=t.sr,Mm.Th(this.x0,t.cg),Mm.Th(this.M0,this.v0);const s=new Set(this.x0);let i=0;for(let t=0,e=this.M0.length;t<e;++t)s.has(this.M0[t][2])||(this.M0[i]=this.M0[t],++i);Mm.Sh(this.M0,i),this._0.gx(t.fx),this.F0=!0}r5(){this.f1(!1),this.W$(),this.N1(),this.n3()}Vj(){return this.W0}nN(){return this.j0}EZ(t){t.MU=this.Vj(),this.j0.dispatchEvent(t)}uj(t,s=!1,i=!1){if(this.dQ.includes(t))return s&&this.dQ.sort((t,s)=>(t.D$().h5()??0)-(s.D$().h5()??0)),void(i&&this.dQ.forEach((t,s)=>t.D$().d1(s)));if(t.o5()){const s=[...t.pq()];s.push(t),s.sort((t,s)=>(t.D$().h5()??0)-(s.D$().h5()??0));for(const t of s)if(t.xH())for(const i of t.GH()){if(s.includes(i))continue;const t=[...i.pq()];t.push(i),t.sort((t,s)=>(t.D$().h5()??0)-(s.D$().h5()??0)),t&&t.length&&s.splice(s.length,0,...t)}for(const t of s)t.qW().bW()&&this.n1(t,!0);i&&this.dQ.forEach((t,s)=>t.D$().d1(s))}else{if(t.qW().bW()&&this.n1(t,!0),!t.xH())return void(i&&this.dQ.forEach((t,s)=>t.D$().d1(s)));for(const s of t.GH()){const t=[...s.pq()];if(t.push(s),t.sort((t,s)=>(t.D$().h5()??0)-(s.D$().h5()??0)),t&&t.length)for(const s of t)s.qW().bW()&&this.n1(s,!0)}i&&this.dQ.forEach((t,s)=>t.D$().d1(s))}}}}{let zm=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},Jm=function(t,s){ag!==t&&(t.u3(s),ag=t)};vec3EqualsXYZ=zm,MaybePrepareLayerDraw=Jm;const Ym=self.Cs,Xm=self.eU,Km=self.assert,Zm=Ym.Un(Ym.Rect),Qm=Ym.Un(Ym.Rect),tg=Ym.Un(Ym.Rect),sg=Ym.Un(Ym.Go),ig=self.ls,eg=ig.ws,ng=[],rg=[],hg=[],og=[];let ag=null;Ym.a5=class extends Ym.Vn{constructor(t,s,i){super(),this.l5=t,this.$c=t.aB(),this.Yn=i[0],this.u5=i[1],this.c5=i[2],this.Py=i[1],this.Ay=i[2],this.f5=!!i[3],this.d5=!!i[4],this.p5=i[5],this.m5=i[6],this.g5=i[7],this.y5=null,this.zQ=i[8],this.Aw=s,this.u0=0,this.c0=0,this.a0=1,this.l0=0,this.w5=new Set,this.S5=new Set,this.v5=new Set,this.b5=[],this.M5=[],this.x5=new Map,this.G5=new Map,this.T5=[],this.I5=!1,this.C5=eg.create(),this._5=eg.create(),this.E5=eg.create(),this.P5=[],this.A5=[],this.R5=new Map,this.O5=new Map,this.F5=-1;const e=this.$c.I$();this._0=Ym.Un(Ym.E0,this,i[11]),this.Sk=Ym.Un(Ym.Nw.aD,e.P0(),{KF:(t,s)=>{const i=s.ck().hF();t.MO(),t.pF(i),t.mF(i),e.R0(i)},QF:t=>this.Cj().O0(t)}),this.F0=!0,this.D5=!1,this.o0=null,this.L5={},this.k5=new Map,this.N5=!0,this.B5=new self.Ij(this),this.j0=Ym.Un(Ym.Event.Sf);for(const t of i[9])this.P5.push(Ym.jQ.q0(this,null,t));this.W5();for(const t of this.qj())t.z0();for(const t of i[10]){const s=this.$c.J0(t[1]);if(!s)throw new Error("missing nonworld object class");s.X0()||s.K0(t),this.T5.push(t),this.Y0(s)}}qn(){for(const t of this.A5)t.qn();Ym.bh(this.A5),this.v5.clear(),this.y5=null,this.l5=null,this.$c=null}aB(){return this.$c}Pc(){return this.Yn}_1(){return this.zQ}xk(){return this.Aw}Cj(){return this._0}Mk(){return this.A1(),this.Sk}A1(){const t="low"===this.$c.I$().v3();if(!this.F0&&this.D5===t&&!this.Sk.tL())return;const s=this.Cj().O1();this.Sk.sL(s.map(t=>t.zI()),{sD:s.map(t=>t.xk()),eD:t,oD:!0}),this.F0=!1,this.D5=t}vz(){this.Cj().vz(),this.F0=!0}j5(){let t=this.A5[0].K2();for(let s=1,i=this.A5.length;s<i;++s){const i=this.A5[s];0===i.kV()&&0===i.BV()||(t=Math.min(t,i.K2()))}return t}V5(){return.5*this.$c.Z1()/this.j5()}H5(){return.5*this.$c.Q1()/this.j5()}W1(){return this.Wj()?-1/0:this.V5()}j1(){return this.Wj()?1/0:this.Vg()-this.V5()}V1(){return this.Wj()?-1/0:this.H5()}H1(){return this.Wj()?1/0:this.Qg()-this.H5()}Dj(t){const s=this.W1(),i=this.j1();t>i&&(t=i),t<s&&(t=s),this.u0!==t&&(this.u0=t,this.U5(),this.$c.j$())}Lj(){return this.u0}kj(t){const s=this.V1(),i=this.H1();t>i&&(t=i),t<s&&(t=s),this.c0!==t&&(this.c0=t,this.U5(),this.$c.j$())}Nj(){return this.c0}Wj(){return this.f5}J3(){this.Dj(this.Lj()),this.kj(this.Nj());for(const t of this.A5)t.B1()&&(t.Dj(t.Lj()),t.kj(t.Nj()))}nV(t,s){this.p5===t&&this.m5===s||(this.p5=t,this.m5=s,this.q5()&&(this.z5(),this.U5(),this.$c.j$()))}J5(){return this.lV()?.5:this.p5}Y5(){return this.lV()?.5:this.m5}hV(){return[this.J5(),this.Y5()]}C3(){const t=this.J5(),s=this.Y5();return t<0||t>1||s<0||s>1}oV(){this.d5&&(this.d5=!1,this.z5(),this.U5(),this.$c.j$())}aV(){this.d5||(this.d5=!0,this.z5(),this.U5(),this.$c.j$())}lV(){return this.d5}q5(){return!this.lV()}Z3(t){t=!!t,this.I5!==t&&(this.I5=t,this.U5(),this.$c.j$())}c2(){return this.I5}X5(t,s,i,e,n,r,h,o,a){zm(this.C5,t,s,i)&&zm(this._5,e,n,r)&&zm(this.E5,h,o,a)||(eg.set(this.C5,t,s,i),eg.set(this._5,e,n,r),eg.set(this.E5,h,o,a),this.K5())}K5(){this.U5(),this.$c.j$()}o2(){return this.C5}i3(){return this._5}e3(){return this.E5}Rj(){return this.a0}Aj(t){this.a0!==t&&(this.a0=t,this.U5(),this.J3(),this.$c.j$())}Oj(t){t=Ym.Zn(t),this.l0!==t&&(this.l0=t,this.U5(),this.$c.j$())}Fj(){return this.l0}Vg(){return this.Py}Xg(t){!isFinite(t)||t<1||(this.Py=t)}Qg(){return this.Ay}Hg(t){!isFinite(t)||t<1||(this.Ay=t)}Z5(){return this.y5}C1(){return this.P5}*qj(){for(const t of this.P5)yield*t.gV()}Uj(){return this.A5}Q5(){return this.A5.length}L$(t){return"number"==typeof t?this.N$(t):this.b1(t.toString())}N$(t){return t=Ym.Kn(Math.floor(t),0,this.A5.length-1),this.A5[t]}b1(t){return this.R5.get(t.toLowerCase())||null}t4(t){return!!this.b1(t)}s4(t){return this.O5.get(t)||null}z5(){for(const t of this.A5)t.n3()}U5(){for(const t of this.A5)t.N1()}Xj(t,s,i){if(this.t4(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=i>=2?s:s.cV(),n=Ym.Un(Ym.jQ,this,e,{name:t,RQ:Math.floor(1e15*Math.random()),OQ:!0});this.i4(n,s,i),this.aB().j$(),this.T1()}Zj(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.e4(t),this.i4(t,s,i),this.aB().j$(),this.T1())}tV(t){if(this.e4(t)){const s=this.$c.aN();s.cj(!0),t.qn(),s.cj(!1),this.aB().j$(),this.T1()}}iV(){const t=new Set;for(const s of this.qj())s.E1()&&!s.P1()&&t.add(s);if(0===t.size)return;const s=this.$c.aN();s.cj(!0);for(const s of t)this.e4(s),s.qn();s.cj(!1),this.aB().j$(),this.T1()}i4(t,s,i){if(i>=2)if(s){if(s===t||s.G2(t))throw new Error(`cannot move layer '${t.Pc()}' to sub-layer of itself`);s.w2(t,2===i),t.m2(s)}else 2===i?this.P5.push(t):this.P5.unshift(t),t.m2(null);else{const e=s.cV();if(e){if(s.G2(t))throw new Error(`cannot move layer '${t.Pc()}' to sub-layer of itself`);e.S2(t,s,0===i),t.m2(e)}else{let e=this.P5.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");0===i&&++e,this.P5.splice(e,0,t),t.m2(null)}}}e4(t){const s=t.cV();if(s)return s.v2(t),!0;if(this.P5.length>1){const s=this.P5.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");return this.P5.splice(s,1),!0}return!1}W5(){this.A5=[...this.qj()],this.R5.clear(),this.O5.clear();for(let t=0,s=this.A5.length;t<s;++t){const s=this.A5[t];s.M1(t),this.R5.set(s.Pc().toLowerCase(),s),this.O5.set(s._1(),s)}}n4(){let t=0;for(const s of this.P5){for(const i of s.gV())i.G1(t);s.TV()&&t++}}r4(){return this.P5.at(-1).fY()+1}async T1(){this.W5(),this.n4(),this.F5=this.r4()}h4(){return this.F5}o4(){this.F5=-1}R2(t){const s=[];for(const i of this.P5){const e=i.fY();if(e===t)s.push(i);else if(e>t)break}return s}I2(){return{scrollX:this.Lj(),scrollY:this.Nj(),scale:this.Rj(),angle:this.Fj(),vpX:this.J5(),vpY:this.Y5()}}C2(t){this.Dj(t.scrollX),this.kj(t.scrollY),this.Aj(t.scale),this.Oj(t.angle),this.nV(t.vpX,t.vpY)}a4(){let t=this.P5.filter(t=>t.M2())[0];for(;t;){if(!t.qV())return sg.ko(t.KV()),sg.Lo(1),sg;if(t.H2())return sg.Eo(0,0,0,0),sg;t=t.pV().filter(t=>t.M2())[0]}return sg.Eo(0,0,0,0),sg}s1(){return this.N5}l4(){return[...this.w5]}Y0(t){if(t.xH())for(const s of t.c4().u4())this.w5.add(s);else this.w5.add(t)}f4(){return[...this.S5]}d4(t,s){if(t===this||!s)return Promise.resolve();t&&(Ym.mo(this.S5,t.S5),t.S5.clear());const i=[];for(const t of this.w5)this.S5.has(t)||(i.push(t.m4(s)),this.S5.add(t));return Promise.all(i)}async g4(t){if(t.v1())throw new Error("cannot load textures for family");const s=this.$c.gM();if(!s||s.mA()||this.S5.has(t))return;this.S5.add(t);const i=t.m4(s);this.y4(i),await i,t.w4(),this.$c.j$()}y4(t){this.v5.add(t),t.then(()=>this.v5.delete(t)).catch(()=>this.v5.delete(t))}S4(){return Promise.all([...this.v5])}v4(t){if(t.v1()||t.oj()>0)throw new Error("cannot unload textures");const s=this.$c.gM();s&&this.S5.has(t)&&(this.S5.delete(t),t.b4(s))}M4(t,s){if(t!==this&&s)for(const s of this.S5)s.WQ()||t.w5.has(s)||(s.b4(),this.S5.delete(s))}x4(){this.S5.clear()}async G4(t){const s=this.$c,i=this.l5,e=s.aN();this.g5&&(this.y5=e.T4(this.g5),this.y5.I4()),i.C4(this),this.Py=this.u5,this.Ay=this.c5,this.u0=s.Jk()/2,this.c0=s.Xk()/2,this.J3(),this.z5(),this.U5(),this.n4(),await this.$c.I$()._4(this.r4(),!0),this.E4(t),this.$c.P4(!0),this.A4(),this.N5||this.R4(),this.O4(this.b5),this.O4(this.M5),this.F4(),i.D4(),s.mj(),this.$c.P4(!1);const n=this.$c.L4();if(await Promise.all(n),Ym.bh(n),!s.N4()){for(const t of this.b5)t.B4();for(const t of this.M5)t.W4(this.x5,this.G5);for(const[t,s]of Object.entries(this.L5)){const i=this.$c.QY(parseInt(t,10));i&&!i.v1()&&i.i1()&&Ym.bh(s)}for(const t of this.b5)t.j4();for(const t of this.M5)t.j4();for(const t of this.b5)t.Sq()||t.V4();for(const t of this.M5)t.Sq()||t.V4()}Ym.bh(this.b5),Ym.bh(this.M5),this.x5.clear(),this.G5.clear(),await Promise.all([...this.w5].map(t=>t.H4(this.$c.gM()))),t&&(s.Sf().dispatchEvent(new Ym.Event("beforefirstlayoutstart")),await s.U4(new Ym.Event("beforeprojectstart"))),await this.q4(new Ym.Event("beforeanylayoutstart")),s.Sf().dispatchEvent(new Ym.Event("beforelayoutstart")),await this.U4(new Ym.Event("beforelayoutstart")),s.N4()||await s.K$(Ym.sB.tB.Q$.z4,null,null),s.Sf().dispatchEvent(new Ym.Event("afterlayoutstart")),await this.U4(new Ym.Event("afterlayoutstart")),await this.q4(new Ym.Event("afteranylayoutstart")),t&&(s.Sf().dispatchEvent(new Ym.Event("afterfirstlayoutstart")),await s.U4(new Ym.Event("afterprojectstart"))),e.J4(i),await this.S4(),this.N5=!1}E4(t){for(const t of this.$c.S1())if(!t.v1()&&t.bW())for(const s of t.ej()){const t=s.D$(),i=t.L$(),e=Ym.Kn(i.xk(),0,this.A5.length-1),n=this.A5[e];t.B$(n,!0),n.h1(s)}if(!t)for(const t of this.A5)t.f1(!1)}A4(){for(const t of this.A5)t.t1(this.b5),t.m1()}R4(){let t=!1;for(const[s,i]of Object.entries(this.L5)){const e=this.$c.QY(parseInt(s,10));if(e&&!e.v1()&&e.i1())for(const s of i){let i=null;if(e.bW()&&(i=s.hasOwnProperty("instJson")?this.s4(s.instJson.w.l):this.s4(s.w.l),!i))continue;const n=this.$c.e1(e,i,!1,0,0,!0);s.hasOwnProperty("instJson")?n.gx(s.instJson):n.gx(s),t=!0,this.M5.push(n),s.hasOwnProperty("instJson")&&(this.x5.set(n,s),this.G5.set(s.index,n))}}for(const t of this.A5)t.f1(!0),t.W$();t&&(this.$c.mj(),this.$c.Y4())}O4(t){for(const s of t){if(!s.xH())continue;const i=s.D$(),e=s.CH();for(const n of s.fH().c4().Gj()){if(n===s.fH())continue;const r=n.ej();if(r.length>e)s.X4(r[e]);else{let e;e=i?this.$c.e1(n,i.L$(),!0,i.YM(),i.ZM(),!0):this.$c.e1(n,null,!0,0,0,!0),this.$c.mj(),n.K4(),s.X4(e),t.push(e)}}}}F4(){for(const t of this.T5)this.$c.J0(t[1]).xH()||this.$c.e1(t,null,!0)}Z4(){const t=[],s=this.T5;let i=0;for(let e=0,n=s.length;e<n;++e){const n=s[e],r=this.$c.J0(n[1]);r.WQ()?r.xH()&&r.c4().Q4()||t.push(this.$c.e1(n,null,!0)):(s[i]=n,++i)}Ym.Sh(s,i),this.$c.mj(),this.O4(t)}w1(t,s,i,e,n,r,h){if(i)return i.w1(t,s,n,r,e,h);{const i=[];for(const o of this.A5)i.push(o.w1(t,s,n,r,e,h));return i.flat()}}async t6(){const t=this.l5;this.$c.N4()||(await this.q4(new Ym.Event("beforeanylayoutend")),await this.U4(new Ym.Event("beforelayoutend")),await this.$c.K$(Ym.sB.tB.Q$.s6,null,null),await this.U4(new Ym.Event("afterlayoutend")),await this.q4(new Ym.Event("afteranylayoutend"))),t.i6(!0),this.$c.aN().e6(),this.N5||this.n6();for(const t of this.A5)t.g1();for(const t of this.$c.S1())if(!(t.WQ()||t.bW()||t.qW().SW()||t.v1())){for(const s of t.ej())this.$c.wH(s);this.$c.mj()}t.i6(!1),t.c$()===this&&t.C4(null)}r6(t,s){const i=t.fH()._1().toString();this.L5.hasOwnProperty(i)||(this.L5[i]=[]);const e=this.L5[i],n={index:s,instJson:t.mx(),sceneGraphJson:{children:[]}};e.push(n),this.k5.set(t,n)}h6(t){const s=this.k5.get(t);for(const i of t.o6()){const t=this.k5.get(i);t&&s.sceneGraphJson.children.push({index:t.index,flags:Ym.l6.a6(i.D$())})}}n6(){this.k5.clear();let t=0;for(const s of this.A5){s.E2();for(const i of s.$$()){const s=i.fH();!s.WQ()&&s.i1()&&(this.r6(i,t),t++)}}for(const t of this.A5)for(const s of t.$$()){const t=s.fH();!t.WQ()&&t.i1()&&this.h6(s)}this.k5.clear()}u6(){this.L5={},this.N5=!0}hF(){return this.o0}H2(){const t=this.$c,s=t.gM().jb();return"low"===t.I$().v3()||s&&t.S3()||this._0.U2()||s&&t.l2()}c6(t){const s=this.$c.I$();if(this.H2()){t.fF(null),t.QO(0,0,0,0);const i={uG:this.$c.Kk(),KG:t.sv()||this.$c.S3()||this._0.U2(),w3:!!t.sv()&&this.$c.S3()};"low"===s.v3()&&(i.width=s.o3(),i.height=s.a3()),this.o0=this.$c.b3(i)}else this.o0=null}f6(t){this.$c.d6(t)&&(t.iF(!1),t.fF(null),t.uv(),t.dF(this.o0))}p6(t){this.H2()&&(t.iF(!1),this.m6(t,this.o0))}g6(t){t.fF(this.o0),t.Pu(this.a4()),this.$c.l2()&&t.sF();const s=this.R2(0);this.M3(t,this.o0,s,!0),t.sv()&&t.g3(0,1),this.p6(t),this.o0=null}y6(t,s){let i=null;this.$c.d6(t)&&(i=this.o0),t.fF(i),t.QO(0,0,0,0),this.$c.l2()&&t.sF();const e=this.R2(s);this.M3(t,i,e,!0),this.f6(t),t.Db(),this.$c.I$().w6(s)}M3(t,s,i,e){const n=i.filter(t=>t.M2());for(let i=0,r=n.length;i<r;){const h=n[i];if(h.f2()&&!h.q2()){ng.push(h);for(let t=i+1;t<r;++t){const s=n[t];if(!s.f2()||s.q2())break;ng.push(n[t])}if(ng.length>=2||1===ng.length&&ng[0].b2()){this.S6(t,s,ng),i+=ng.length,Ym.bh(ng);continue}Ym.bh(ng)}h.Zx(t,s,e&&0===i),++i}}m6(t,s){const i=this._0.O1(),e=this.$c;0===i.length?(t.fF(null),t.uv(),t.dF(s),t.mF(s),e.R0(s)):(tg.set(0,0,e.Z1(),e.Q1()),this.Mk().cL(t,null,{dL:this,mL:3,devicePixelRatio:this.$c.H3(),gL:this.$c.q3()*this.Rj(),yL:this.Fj(),jL:tg,VL:null,tD:!0}))}S6(t,s,i){const e=i[0],n=e.c3(t);e.m3(t),i[0].qV()||(sg.ko(i[0].KV()),sg.Lo(1),t.Pu(sg)),t.iF(!0);const r=rg,h=hg,o=og;for(const s of i)s.E2(),s.h2(r),s.y3(t,"beforedraw");for(let i=0,e=r.length;i<e;){const n=r[i],a=n.D$(),l=a.L$();if(!a.vV()||!a.A3(l.P3())){++i;continue}(!n.R3()||a.O3()>0)&&o.push(n);const u=n.D$().LU();h.push(n);let c=i+1;for(;c<e;++c){const t=r[c],s=t.D$();if(s.vV()&&s.A3(s.L$().P3())){if(s.LU()!==u)break;t.R3()?(s.O3()>0&&o.push(t),h.push(t)):o.push(t)}}if(1!==h.length||h[0].F3()){this.v6(t,s,h);for(let i=0,e=o.length;i<e;++i){const e=o[i],n=e.D$(),r=n.L$();n.L3(!0),Jm(r,t),r.E3(e,n,t,s),n.L3(!1)}}else{Jm(l,t),l.E3(n,a,t,s);for(let i=0,e=o.length;i<e;++i){const e=o[i];if(e===n)continue;const r=e.D$(),h=r.L$();Jm(h,t),h.E3(e,r,t,s)}}i=c,Ym.bh(h),Ym.bh(o)}for(const s of i)s.y3(t,"afterdraw");n&&t.xF(n),Ym.bh(r),ag=null}v6(t,s,i){t.yF();for(let s=0,e=i.length;s<e;++s){const e=i[s],n=e.D$(),r=n.L$();n.N3(!0),Jm(r,t),r.B3(e,n,t)}t.wF();for(let e=0,n=i.length;e<n;++e){const n=i[e],r=n.D$(),h=r.L$();Jm(h,t),h.E3(n,r,t,s),r.N3(!1)}t.vF()}e5(){const t={sx:this.Lj(),sy:this.Nj(),s:this.Rj(),a:this.Fj(),w:this.Vg(),h:this.Qg(),ortho:this.lV(),vpX:this.J5(),vpY:this.Y5(),fv:this.N5,persist:this.L5,fx:this._0.mx(),layers:{},dynamicLayers:[]};for(const s of this.A5)if(s.E1()){const i=s.cV();t.dynamicLayers.push({sid:s._1(),name:s.Pc(),parentSid:i?i._1():null,siblingIndex:s.I1(),data:s.e5()})}else t.layers[s._1().toString()]=s.e5();return t}n5(t){this.u0=t.sx,this.c0=t.sy,this.a0=t.s,this.l0=t.a,this.Py=t.w,this.Ay=t.h,this.d5=!!t.ortho,t.hasOwnProperty("vpX")&&(this.p5=t.vpX),t.hasOwnProperty("vpY")&&(this.m5=t.vpY),this.N5=!!t.fv,this.L5=t.persist,this._0.gx(t.fx),this.F0=!0;for(const[s,i]of Object.entries(t.layers)){const t=parseInt(s,10),e=this.s4(t);e&&e.n5(i)}if(t.hasOwnProperty("dynamicLayers")){this.iV(),this.$c.mj();const s=new Map,i=t.dynamicLayers;for(let t=i.length-1;t>=0;--t){const e=i[t],n=e.sid,r=e.name,h=e.parentSid,o=e.siblingIndex,a=e.data;if(this.W5(),this.t4(r)||this.s4(n))continue;let l,u;if(null===h)l=null,u=this.P5;else{if(l=this.s4(h),!l)continue;u=l.pV()}const c=Ym.Un(Ym.jQ,this,l,{name:r,RQ:n,OQ:!0});u.push(c);let f=s.get(u);f||(f=[],s.set(u,f)),f.push({MU:c,b6:o}),c.n5(a)}for(const[t,i]of s){i.sort((t,s)=>t.b6-s.b6);for(const s of i){const i=s.MU,e=s.b6;let n=t.indexOf(i);t.splice(n,1),t.splice(e,0,i)}}}this.T1(),this.z5(),this.U5()}f$(){return this.B5}nN(){return this.j0}EZ(t){t.layout=this.f$();const s=this.$c,i=s.iU()&&!s.aN().dj();i&&Xm.M6(),this.j0.dispatchEvent(t),i&&Xm.x6()}U4(t){return t.layout=this.f$(),this.j0.Cf(t)}q4(t){return t.layout=this.f$(),this.$c.U4(t)}G6(){this.T6(this.P5)}T6(t,s=0){const i=t.slice(0);i.reverse();for(const t of i)console.log(`${"\t".repeat(s)}- ${t.Pc()}`),this.T6(t.pV(),s+1)}}}{const lg=self.Cs;lg.I6=class extends lg.Vn{#s;#i=[];#f=new Map;#a=new Map;#e=null;#t=[];#r=null;#h=0;#d=null;constructor(t){super(),this.#s=t}qn(){this.#s=null,this.#e=null,this.#r=null,this.#d=null,lg.bh(this.#i),this.#f.clear(),this.#a.clear(),lg.bh(this.#t)}UT(t){const s=lg.Un(lg.a5,this,this.#i.length,t);this.#i.push(s),this.#f.set(s.Pc().toLowerCase(),s),this.#a.set(s._1(),s)}aB(){return this.#s}C6(t){this.#r=t}_6(){if(this.#r)return this.#r;if(this.#i.length)return this.#i[0];throw new Error("no first layout")}E6(t){return this.#f.get(t.toLowerCase())||null}P6(t){return this.#a.get(t)||null}A6(t){return t=lg.Kn(Math.floor(t),0,this.#i.length-1),this.#i[t]}m$(t){return"number"==typeof t?this.A6(t):this.E6(t.toString())}y$(){return this.#i}C4(t){this.#e=t}c$(){return this.#e}R6(t){if(this.#t.includes(t))throw new Error("layout already running");this.#t.push(t)}O6(t){const s=this.#t.indexOf(t);if(-1===s)throw new Error("layout not running");this.#t.splice(s,1)}*F6(){this.#e&&(yield this.#e),this.#t.length&&(yield*this.#t)}D6(t){return this.#e===t||this.#t.includes(t)}i6(t){if(t)this.#h++;else{if(this.#h<=0)throw new Error("already unset");this.#h--}}pj(){return this.#h>0}v$(t){this.#d=t}D4(){this.#d=null}S$(){return!!this.#d}L6(){return this.#d}k6(){const t=this.c$();t&&t.z5()}N6(){const t=this.c$();t&&t.U5()}}}{const ug=self.Cs,cg=new RegExp("<(.+?)>","g");ug.B6=class extends ug.Vn{constructor(t){super(),this.$c=t,this.W6=ug.Un(ug.j6),this.V6=null,this.H6=[],this.U6=new Map,this.q6=new Map,this.z6=new Map,this.J6=[],this.Y6=[],this.X6=[],this.K6=!1,this.Z6=!1,this.Q6=!1,this.t8=()=>this.s8(),this.i8=()=>this.e8(),this.n8=()=>this.r8(),this.h8=()=>this.o8(),this.a8=t=>this.l8(t.dz),this.u8=t=>this.c8(),this.f8=t=>this.d8(),this.p8=t=>this.m8(),this.g8=[],this.y8=0}qn(){this.w8(),this.t8=null,this.i8=null,this.n8=null,this.h8=null,this.a8=null,this.f8=null;for(const t of this.H6)t.rJ(),t.qn();ug.bh(this.H6),this.H6=null,this.W6.qn(),this.W6=null,ug.bh(this.J6),this.J6=null,ug.bh(this.Y6),this.Y6=null,ug.bh(this.X6),this.X6=null,this.U6.clear(),this.U6=null,this.q6.clear(),this.q6=null,this.z6.clear(),this.z6=null,ug.bh(this.g8),this.g8=null,this.$c=null}S8(){const t=this.$c.Sf();t.addEventListener("pretick",this.t8),t.addEventListener("tick2",this.i8),t.addEventListener("beforelayoutchange",this.n8),t.addEventListener("layoutchange",this.h8),t.addEventListener("instancedestroy",this.a8),t.addEventListener("beforeload",this.u8),t.addEventListener("afterload",this.f8),t.addEventListener("afterlayoutstart",this.p8)}w8(){const t=this.$c.Sf();t.removeEventListener("pretick",this.t8),t.removeEventListener("tick2",this.i8),t.removeEventListener("beforelayoutchange",this.n8),t.removeEventListener("layoutchange",this.h8),t.removeEventListener("instancedestroy",this.a8),t.removeEventListener("beforeload",this.u8),t.removeEventListener("afterload",this.f8),t.removeEventListener("afterlayoutstart",this.p8)}UT(t){this.W6.Bu(t);const s=ug.b8.v8(t,this);this.Bu(s),this.M8(s),this.z6.set(s.Pc(),0)}x8(t){const s=this.G8(),i=t.EH(),e=s.qs(i),n=ug.b8.x8(`${i}:${this.z6.get(i)}`,e,this);return this.T8(i),this.Bu(n),n}T8(t){this.z6.set(t,this.z6.get(t)+1)}I8(){for(const t of this.H6){if(t.C8())continue;const s=t.EH();this.T8(s)}}_8(){for(const t of this.z6.keys())this.z6.set(t,0)}Bu(t){this.H6.push(t),this.U6.set(t.Pc().toLowerCase(),t)}Zf(t){t.E8(),t.C8()||(ug.Ch(this.H6,t),ug.Ch(this.J6,t),ug.Ch(this.Y6,t),ug.Ch(this.X6,t),this.U6.delete(t.Pc().toLowerCase()),this.P8(t),t.eJ()||t.qn())}JH(t){this.$c.JH(t,this.V6,null)}aB(){return this.$c}G8(){return this.W6}A8(t){this.V6=t}O8(){return this.V6}*F8(){for(const t of this.H6)yield t}*D8(){for(const t of this.Y6)yield t}L8(t,s){this.q6.has(t)||this.q6.set(t,new Set),this.q6.get(t).add(s)}M8(t){for(const s of t.k8())this.L8(s,t)}P8(t){for(const[s,i]of this.q6.entries())i.has(t)&&(i.delete(t),0===i.size&&this.q6.delete(s))}N8(t){if(this.q6.has(t))return this.q6.get(t)}B8(t,s){if(s)for(const i of this.H6)if(s.every(t=>i.W8(t.dz,t.trackId))&&i.Pc().includes(t.Pc()))return i}j8(t){return this.U6.get(t.toLowerCase())||null}V8(t){for(const s of this.J6)if(s.Pc()===t)return s;for(const s of this.Y6)if(s.Pc()===t)return s;return null}*H8(t){if(cg.test(t)){let s;cg.lastIndex=0;const i=new Set;do{if(s=cg.exec(t),s){const t=s[1].split(",");for(const s of t)i.add(s)}}while(s);for(const t of i.values()){const s=this.j8(t);s&&(yield s)}i.clear()}else{const s=this.j8(t);s&&(yield s)}}*U8(t){for(const s of this.H6)s.oJ(t)&&(yield s)}q8(t){this.J6.includes(t)||this.J6.push(t),this.z8()}J8(t){ug.Ch(this.Y6,t),this.Y8()}X8(t){this.Y6.includes(t)?(t.K8(!0),t.Z8(!1),t.Q8(!1)):(t.K8(!1),t.Z8(!0),t.Q8(!1),this.J6.includes(t)||this.J6.push(t)),this.z8()}t7(t){t.K8(!1),t.Z8(!1),t.s7(),ug.Ch(this.J6,t),this.Y8()}i7(t){t.K8(!1),t.Z8(!1),this.Y6.includes(t)&&(t.Q8(!0),this.X6.push(t),ug.Ch(this.Y6,t)),this.J6.includes(t)&&t.Q8(!0)}e7(t){t.K8(!1),t.Z8(!1),t.Q8(!1),t.mJ(1),ug.Ch(this.Y6,t)}n7(t){this.i7(t),t.s7()}s8(){const t=this.aB();if(t.N4())return;if(!this.K6)return;if(this.Z6)return;let s=0;for(t.iU()&&(s=performance.now()),this.Q6=!0;this.J6.length;){const t=this.J6.pop();t.r7()?(t.h7(),this.X6.push(t)):(t.o7(),this.Y6.push(t)),0!==t.a7()&&(this.y8=1)}const i=this.$c.l7(),e=this.$c.u7(),n=this.$c.WN();for(let t=this.Y6.length-1;t>=0;t--){const s=this.Y6[t];s&&s.c7(i,n,e)}this.Q6=!1,t.iU()&&globalThis.eU.f7(performance.now()-s),0!==this.y8&&t.j$()}e8(){const t=this.aB();if(t.N4())return;if(!this.K6)return;if(this.Z6)return;let s,i=0;t.iU()&&(i=performance.now());for(let t=0,i=this.X6.length;t<i;t++){const i=this.X6[t];s||(s=new Set),i.E8(),this.d7(i),s.add(i)}if(s){ug.Ph(this.X6,s),this.y8=0;for(let t=0,s=this.Y6.length;t<s;t++)if(0!==this.Y6[t].a7()){this.y8=1;break}}this.Y8(),t.iU()&&globalThis.eU.f7(performance.now()-i)}d7(t){t.eJ()||t.p7()&&t.m7()&&t.g7()&&t.y7()}z8(){this.K6||(this.K6=!0)}Y8(){this.X6.length||this.Y6.length||this.J6.length||this.Q6||(this.K6=!1)}r8(){for(this.Z6=!0;this.J6.length;)this.t7(this.J6.pop());const t=new Set;for(const s of this.Y6)s.r8()&&(s.E8(),t.add(s));ug.Ph(this.Y6,t),t.clear();for(const s of this.X6)s.r8()&&(s.E8(),t.add(s));ug.Ph(this.X6,t),this.Y8();for(const t of this.H6)t.w7()}o8(){this.Z6=!1}l8(t){const s=t.fH(),i=this.N8(s);if(i)if(this.$c.N4())this.g8.push(t);else for(const t of i)t.C8()||(t.eJ()?this.Zf(t):t.p7()||(this.d7(t),this.Zf(t)))}c8(){for(const t of this.J6.map(t=>t))this.d7(t),this.Zf(t);for(const t of this.Y6.map(t=>t))this.d7(t),this.Zf(t)}d8(){for(const t of this.g8)this.l8(t);ug.bh(this.g8);for(const t of this.H6)t.d8()}m8(){const t=this.$c.p$().c$();if(t)for(const s of this.H6){const i=s.S7();i&&t.Pc()===i&&this.X8(s)}}e5(){return{timelinesJson:this.v7(),scheduledTimelinesJson:this.b7(),playingTimelinesJson:this.M7(),markedForRemovalTimelinesJson:this.x7(),hasRuntimeListeners:this.K6,changingLayout:this.Z6,isTickingTimelines:this.Q6}}n5(t){t&&(this._8(),this.G7(t.timelinesJson),this.T7(t.scheduledTimelinesJson),this.I7(t.playingTimelinesJson),this.C7(t.markedForRemovalTimelinesJson),this.K6=!t.hasRuntimeListeners,this.Z6=!!t.changingLayout,this.Q6=!!t.isTickingTimelines,this.I8(),this.z8(),this.Y8())}v7(){return this.H6.map(t=>t.e5())}G7(t){for(const s of t){let t=this.j8(s.name);if(t)t.n5(s);else{const i=this._7(s);if(!i)continue;const e=this.j8(i);t=this.x8(e),t.n5(s)}t.E7()||this.Zf(t)}}_7(t){const s=t.name.split(":");return s&&2===s.length?s[0]:null}b7(){return this.P7(this.J6)}T7(t){this.A7(t,this.J6)}M7(){return this.P7(this.Y6)}I7(t){this.A7(t,this.Y6)}x7(){return this.P7(this.X6)}C7(t){this.A7(t,this.X6)}R7(t,s){if(!s)return!1;for(const i of s)if(i===t.Pc())return!0;return!1}P7(t){return t.map(t=>t.Pc())}A7(t,s){const i=new Set;for(const e of s)this.R7(e,t)||i.add(e);if(ug.Ph(s,i),t){const i=t=>s=>s.Pc()===t;for(const e of t){const t=this.j8(e);t&&(s.find(i(e))||s.push(t))}}}}}{const fg=self.Cs,dg=100,pg=.01,mg=25,gg=20,yg=5,wg=[0,0],Sg=[0,0],vg=[0,0],bg=[0,0,0,0,0],Mg=new Array(4),xg=[{x:0,y:0,t:0,bt:0},{x:0,y:0,t:0,bt:0},{x:0,y:0,t:0,bt:0}],Gg={x:0,y:0,t:0,bt:0};fg.O7=class{constructor(t,s){this.F7=!1,this.D7=t,this.L7=[];let i=null;if(i=s?this.D7.k7(s):fg.Bh(this.D7.N7()),!i)return;const e=i.DJ("offsetX"),n=i.DJ("offsetY");if(!e||!n)return;this.B7=e,this.W7=n;const r=e.j7(),h=n.j7();for(let t=1,s=Math.min(r.length,h.length);t<s;++t){const s=r[t],i=(s.V7(),s.H7()),e=h[t],n=(e.V7(),e.H7());i&&"cubic-bezier"===i.U7()&&n&&"cubic-bezier"===n.U7()?this.L7.push(fg.Un(fg.q7,i,n,s,e,this.L7.length)):(i&&"line"===i.U7()&&n&&n.U7(),this.L7.push(fg.Un(fg.z7,s,e,this.L7.length)))}this.F7=!0}qn(){for(const t of this.L7)t.qn();fg.bh(this.L7),this.L7=null,this.D7=null,this.B7=null,this.W7=null}J7(){return this.F7}Y7(){return this.L7}X7(t){const s="relative"===this.B7.K7()?t.YM():0,i="relative"===this.W7.K7()?t.ZM():0;for(const t of this.L7)t.X7(s,i)}$w(t,s,i){let e=NaN,n=this.L7.length;for(let i=0;i<n;i++){const n=this.L7[i];if("cubic-bezier"===n.XI()){const i=n.$w(t,s);(isNaN(e)||i[3]<e)&&(e=i[3],vg[0]=i[2],vg[1]=n.xk())}}return vg}Z7(t,s,i){const e=i.Q7;fg.te(e[0])||(e[0]=0),fg.te(e[1])||(e[1]=1);let n=NaN,r=this.L7.length;for(let i=0;i<r;i++){const r=this.L7[i];if("cubic-bezier"===r.XI()){const i=r.t9(t,s,e);(isNaN(n)||i[3]<n)&&(n=i[3],vg[0]=i[2],vg[1]=r.xk())}}return vg}s9(t,s){return this.L7[s].s9(t)}i9(t,s){return this.L7[s].i9(t)}},fg.q7=class{constructor(t,s,i,e,n){this.Aw=n;const r=t.e9("cubic-bezier"),h=i.e9("cubic-bezier"),o=s.e9("cubic-bezier"),a=e.e9("cubic-bezier");this.n9=t.r9(),this.h9=s.r9(),this.o9=t.r9()+r.a9(),this.l9=s.r9()+o.a9(),this.u9=i.r9()+h.c9(),this.f9=e.r9()+a.c9(),this.d9=i.r9(),this.p9=e.r9(),this.m9=0,this.g9=0,this.y9=0,this.w9=0,this.S9=0,this.v9=0,this.b9=0,this.M9=0,this.x9=0,this.G9=0,this.T9=0,this.I9=0,this.C9=0,this._9=0,this.E9=0,this.P9=0,this.A9=0,this.R9=0,this.O9=0,this.F9=0,this.D9=NaN,this.F7=!1,this.L9=100,this.k9=new Array(this.L9+1),this.k9[0]=0,this.N9=0,this.B9=[],this.W9=[];for(let t=0;t<100;t++)this.W9.push({x:0,y:0,t:0,bt:0});this.j9()}qn(){fg.bh(this.k9),this.k9=null,fg.bh(this.B9),this.B9=null,fg.bh(this.W9),this.W9=null}XI(){return"cubic-bezier"}xk(){return this.Aw}V9(){return Math.floor(this.N9/25)}H9(){return 1/this.V9()}X7(t,s){this.U9=t,this.q9=s,this.k9=new Array(this.L9+1),this.k9[0]=0,this.j9(),this.m9=this.n9+this.U9,this.g9=this.h9+this.q9,this.y9=this.o9+this.U9,this.w9=this.l9+this.q9,this.S9=this.u9+this.U9,this.v9=this.f9+this.q9,this.b9=this.d9+this.U9,this.M9=this.p9+this.q9,this.x9=3*(this.y9-this.m9),this.G9=3*(this.w9-this.g9),this.T9=3*(this.S9-this.y9),this.I9=3*(this.v9-this.w9),this.C9=3*(this.b9-this.S9),this._9=3*(this.M9-this.v9),this.E9=3*(this.y9-this.m9),this.P9=3*(this.m9+this.S9-2*this.y9),this.A9=this.b9-this.m9+3*(this.y9-this.S9),this.R9=3*(this.w9-this.g9),this.O9=3*(this.g9+this.v9-2*this.w9),this.F9=this.M9-this.g9+3*(this.w9-this.v9)}Map(t){if(!this.F7)return NaN;const s=this.z9(t);return Sg[0]=this.J9(s),Sg[1]=this.Y9(s),Sg}$w(t,s){const i=this.X9(100),e=this.K9(t,s,i),n=this.Z9(t,s,i,e);return bg[0]=n.x,bg[1]=n.y,bg[2]=n.t,bg[3]=n.bt,bg}t9(t,s,i){const e=this.X9(100),n=this.Q9(t,s,e,i),r=this.Z9(t,s,e,n);return bg[0]=r.x,bg[1]=r.y,bg[2]=r.t,bg[3]=r.bt,bg}s9(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.x9+e*this.T9+n*this.C9,h=i*this.G9+e*this.I9+n*this._9,o=fg.sr(r,h);return wg[0]=r/o,wg[1]=h/o,wg}i9(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.x9+e*this.T9+n*this.C9,h=i*this.G9+e*this.I9+n*this._9;return Math.atan2(h,r)}z9(t){if(!this.F7)return;let s=t*this.k9[this.L9],i=0,e=this.L9,n=0;for(;i<e;)n=i+((e-i)/2|0),this.k9[n]<s?i=n+1:e=n;this.k9[n]>s&&n--;const r=this.k9[n];return r===s?n/this.L9:(n+(s-r)/(this.k9[n+1]-r))/this.L9}J9(t){return this.F7?self.Vu.hc("cubicbezier")(t,this.n9+this.U9,this.o9+this.U9,this.u9+this.U9,this.d9+this.U9):NaN}Y9(t){return this.F7?self.Vu.hc("cubicbezier")(t,this.h9+this.q9,this.l9+this.q9,this.f9+this.q9,this.p9+this.q9):NaN}X9(t){if(t=t||100,this.B9.length>=t)return this.B9;this.B9=new Array(t),t++;for(let s=0;s<t-1;s++){const i=s/(t-1),e=i**2,n=i**3,r=this.E9*i,h=this.P9*e,o=this.A9*n,a=this.R9*i,l=this.O9*e,u=this.F9*n,c=this.m9+r+h+o,f=this.g9+a+l+u;this.W9[s].x=c,this.W9[s].y=f,this.W9[s].t=i,this.W9[s].bt=0,this.B9[s]=this.W9[s]}return this.B9}K9(t,s,i,e=null,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.D9))for(let e=0;e<100;e++){const h=i[e],o=h.x-t,a=h.y-s;h.bt=o*o+a*a,h.bt<n&&(n=h.bt,r=e)}else{for(let e=this.D9;e<this.D9+5&&!(e>=i.length);e++){const h=i[e],o=h.x-t,a=h.y-s;h.bt=o*o+a*a,h.bt<n&&(n=h.bt,r=e)}for(let e=this.D9;e>this.D9-5&&!(e<0);e--){const h=i[e],o=h.x-t,a=h.y-s;h.bt=o*o+a*a,h.bt<n&&(n=h.bt,r=e)}}return this.D9=r,r}Q9(t,s,i,e,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.D9))for(let h=0;h<100;h++){const o=i[h],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.bt<n&&(n=o.bt,r=h)}else{for(let h=this.D9;h<this.D9+5&&!(h>=i.length);h++){const o=i[h],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.bt<n&&(n=o.bt,r=h)}for(let h=this.D9;h>this.D9-5&&!(h<0);h--){const o=i[h],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.bt<n&&(n=o.bt,r=h)}}return this.D9=r,r}Z9(t,s,i,e){let n=i[e],r=1,h=Number.MAX_SAFE_INTEGER;t:do{const r=i.length;let o=0===e?0:e-1,a=e===r-1?r-1:e+1,l=i[o].t,u=(i[a].t-l)/4;if(u<.001)break;Mg[0]=i[o];for(let i=1;i<=2;i++){const r=l+i*u,o=r**2,a=r**3,c=this.E9*r,f=this.P9*o,d=this.A9*a,p=this.R9*r,m=this.O9*o,g=this.F9*a,y=this.m9+c+f+d,w=this.g9+p+m+g,S=y-t,v=w-s,b=S*S+v*v;if(b<h){h=b,e=i,Gg.x=y,Gg.y=w,Gg.t=r,Gg.bt=b,n=Gg;break t}const M=xg[i-1];M.x=y,M.y=w,M.t=r,M.bt=b,Mg[i]=M}Mg[3]=i[a],i=Mg}while(r++<20);return n}j9(){this.F7=!0;let t=this.J9(0),s=this.Y9(0),i=0;for(let e=1;e<=this.L9;e++){const n=this.J9(.01*e),r=this.Y9(.01*e),h=t-n,o=s-r;i+=fg.sr(h,o),this.k9[e]=i,t=n,s=r}this.N9=i}},fg.z7=class{constructor(t,s,i){this.Aw=i,this.ttt=t.r9(),this.stt=s.r9(),this.U9=0,this.q9=0}qn(){}XI(){return"line"}xk(){return this.Aw}X7(t,s){this.U9=t,this.q9=s}YM(){return this.ttt+this.U9}ZM(){return this.stt+this.q9}}}{const Tg=self.Cs,Ig=0,Cg=1;Tg.b8=class extends Tg.Vn{constructor(t,s,i){super(),this.$c=i.aB(),this.itt=i,this.ett=s,this.Yn=t,this.ntt=[],this.htt=0,this.ott=null,this.att=0,this.ltt(),this.utt=null,this.ctt=null,this.ftt=0,this.dtt=0,this.ptt=1,this.mtt=0,this.gtt=-1,this.ytt=1,this.wtt=!1,this.Stt=!1,this.vtt=!1,this.btt=!0,this.Mtt=!1,this.xtt=!1,this.Gtt=-1,this.Ttt=!1,this.Itt=!1,this.Ctt=!1,this._tt=!1,this.Ett=NaN,this.Ptt=[""],this.Att="",this.Rtt=!1,this.y8=0,this.Ott=0,this.Ftt=null,this.Dtt=null}static v8(t,s){const i=s.G8(),e=i.Ltt(),n=i.qs(t[e]),r=Tg.Un(Tg.b8,t[e],n,s);return r.ktt(!0),r}static x8(t,s,i){return Tg.Un(Tg.b8,t,s,i)}qn(){if(this.eJ())return;const t=this.$c.Sf();this.itt.t7(this),this.itt.n7(this);for(const t of this.ntt)t.qn();Tg.bh(this.ntt),this.ntt=null,this.$c=null,this.itt=null,this.ett=null,this.Mtt=!0,this.utt=null,this.ctt=null,this.Ntt(t)}Ntt(t){const s=Tg.Un(Tg.Event,"timelinestatereleased");s.$tt=this,t.dispatchEvent(s)}XI(){return 0}ltt(){for(const t of this.ett.Wtt().Btt())this.htt=this.ntt.push(Tg.jtt.UT(this,t))}Vtt(){return this.itt}aB(){return this.$c}N7(){return this.ntt}Htt(t,s,i,e){if(!this.Ott)return;let n;for(let r=0;r<this.ntt.length;r++){let h=this.ntt[r];if(t!==h.EJ())continue;const o=h.DJ(i);o&&s.constructor===o.Utt().constructor&&o.K7()===e.K7()&&(n||(n=[]),n.push(o))}return n}E7(){return!!this.ntt.length}k7(t){for(const s of this.ntt)if(Tg.Ze(s.OJ(),t))return s;return null}qtt(t){for(const s of this.ntt)if(!s.ztt()&&Tg.Ze(s.Pc(),t))return s;return null}nX(t){this.Yn=t}Pc(){return this.Yn}Jtt(){return this.ett}EH(){return this.ett.Pc()}uJ(){return this.ett.uJ()}lJ(t){this.ett.lJ(t)}Ytt(){return this.ett.Ytt()}Xtt(t){this.ett.Xtt(t)}Ktt(){return this.ett.Ktt()}Ztt(t){this.ett.Ztt(t)}K7(){return this.ett.K7()}Qtt(t){this.ett.K7(t)}_J(t){for(const s of this.N7())s._J(t)}fJ(){return this.ett.fJ()}cJ(t){return this.ett.cJ(t)}pJ(){return this.ett.pJ()}dJ(t){return this.ett.dJ(t)}_z(){return this.ett._z()}tst(t){return this.ett.tst(t)}mJ(t){return this.ptt=t}gJ(){return this.ptt}S7(){return this.ett.S7()}sst(){return this.ett.sst()}ist(){return this.ett.ist()}est(){return this.mtt}nst(){return!this.IsPlaying()||this.ptt>0}wJ(){return this.utt||(this.utt=new Promise(t=>{this.ctt=t})),this.utt}s7(){this.utt&&(this.ctt(),this.utt=null,this.ctt=null)}rst(t){this.Ptt=Tg.b8.hst(t),this.Rtt=!0}yJ(){return this.Ptt}ost(){return this.Rtt&&(this.Att=this.Ptt.join(" ")),this.Rtt=!1,this.Att}oJ(t){if(!this.Ptt)return!1;if(!this.Ptt.length)return!1;const s=Tg.b8.hst(t);return!!s&&!!s.length&&s.every(Tg.b8.ast,this)}lst(){Tg.sB.ust&&this.constructor===Tg.b8&&(Tg.sB.ust.Q$.cst(this),this.itt.JH(Tg.sB.ust.Q$.fst),this.itt.JH(Tg.sB.ust.Q$.dst),this.itt.JH(Tg.sB.ust.Q$.pst),this.itt.JH(Tg.sB.ust.Q$.mst),Tg.sB.ust.Q$.gst())}yst(){this.Gtt=this.$c.kN()}y7(){this.Ctt||(this.Ctt=!0,Tg.sB.ust&&this.constructor===Tg.b8&&(Tg.sB.ust.Q$.cst(this),this.itt.JH(Tg.sB.ust.Q$.wst),this.itt.JH(Tg.sB.ust.Q$.Sst),this.itt.JH(Tg.sB.ust.Q$.vst),this.itt.JH(Tg.sB.ust.Q$.bst),Tg.sB.ust.Q$.gst()))}K8(t){this.wtt=t}Mst(){return this.Gtt===this.$c.kN()}IsPlaying(t=!1){return!!this.Mst()||!(!this.xst()||t)||this.wtt}Gst(){return this.IsPlaying(!0)}bJ(){return this.Tst()}Tst(){return!(this.eJ()||this.xst()||this.Gst()||this.m7())}Z8(t){this.Stt=t}xst(){return this.Stt}Ist(t){this.btt=t;const s=this.fJ(),i=this.pJ();if(s||i){if(s&&!i);else if(!s&&i){const t=this.YF();1===this.mtt&&(t<=0||t>=this.uJ())&&(this.btt=!0)}}else{const t=this.YF();(t<=0||t>=this.uJ())&&(this.btt=!0)}}m7(){return this.btt}eJ(){return this.Mtt}Q8(t){this.xtt=t}r7(){return this.xtt}Cst(t){this.Ttt=t}_st(){return this.Ttt}ktt(t){this.Itt=!!t}C8(){return this.Itt}g7(){return this.vtt}YF(){return this.ftt}aJ(t){const s=this.YF();this.Est(t),this.Ist(!1),this.m7()||this.Cst(!0),(this.Gst()||this.xst()||!this.vtt)&&(this.Gst()||this.xst()||this.vtt?this.Gst()?this.rJ():this.xst()&&(this.itt.t7(this),this.Pst()):this.Pst()),this.Ast(),this.Rst(this.YF(),!1,!0,!0,s),this.Ost(),this.y8&&this.aB().j$(),this.Fst()}Est(t){Tg.te(t)||(t=this.uJ()),t<0?this.ftt=0:t>=this.uJ()?this.ftt=this.uJ():this.ftt=t}Dst(t){Tg.te(t)||(t=this.uJ()),t<0?this.ftt=0:t>=this.uJ()?this.ftt=this.uJ():this.ftt=t;for(const t of this.ntt)t.Lst()}Fst(){Tg.sB.ust&&this.constructor===Tg.b8&&(Tg.sB.ust.Q$.cst(this),this.itt.JH(Tg.sB.ust.Q$.kst),this.itt.JH(Tg.sB.ust.Q$.Nst),this.itt.JH(Tg.sB.ust.Q$.$st),Tg.sB.ust.Q$.gst())}Bst(){if(this.fJ())return!0;if(this.pJ()&&1===this.mtt){if(this.nst()){if(this.YF()>=this.uJ())return!1}else if(this.YF()<=0)return!1}else if(!this.fJ()&&!this.pJ())if(this.nst()){if(this.YF()>=this.uJ())return!1}else if(this.YF()<=0)return!1;return!0}hJ(){this.eJ()||this.Bst()&&this.Play(!0)}Play(t=!1){return!this.eJ()&&!this.xst()&&(this.Gst()&&this.Mst()?this.Wst():!this.Gst()&&!!(this.m7()||t||this._st())&&this.jst())}Wst(){return this.Cst(!1),this.itt.J8(this),this.itt.X8(this),this.wJ(),!0}jst(){return this.Cst(!1),this.itt.X8(this),this.wJ(),!0}rJ(t=!1){this.eJ()||(this.Ist(t),this.itt.i7(this),this.m7()&&this.s7())}Bf(t=!0,s=!1){if(this.eJ())return;if(!this.Gst()&&this.xst())return this.itt.t7(this);if(this.m7())return;this.rJ(!0),this.nst()?this.Est(0):this.Est(this.uJ());const i=this.YF();this.Ast(),s?this.Vst(i):this.Rst(i,!1,!1,!0),t&&this.Fst(),this.Ost(),this.y8&&t&&this.aB().j$()}Hst(){this.Bf(!1,!0)}Vst(t){this.Rst(t,!1,!1,!0,NaN,!1,!0)}r8(){return!!this.eJ()||!(!this.aB().N4()&&this.Ust())&&(this.itt.e7(this),this.aB().N4()||this.Hst(),!0)}Pst(){this.o7(!0)}h7(){this.o7(!1,!0),this.K8(!1),this.Z8(!1)}o7(t=!1,s=!1){if(!this.r7()||s)if(t){this.Ctt=!1,this.vtt=!0,this._tt=!0,this.Ast();for(const t of this.ntt)t.o7();this.Ost()}else if(this.K8(!0),this.Z8(!1),this.lst(),this.m7()){this.Gtt=-1,0!==this.mtt&&(this.ptt=Math.abs(this.ptt)),this.mtt=0,this.gtt=-1,this.ytt=1,this.btt=!1,this.Ctt=!1,this.vtt=!0,this._tt=!0,this.nst()?this.Est(0):this.Est(this.uJ()),this.Ast();for(const t of this.ntt)t.o7();this.Ost()}else{-1!==this.gtt&&(this.mtt=this.gtt),this._tt=!0,this.Ctt=!1,this.Ast();for(const t of this.ntt)t.qst();this.Ost()}}a7(){return this.y8}Ast(){this.Ott=0;for(const t of this.ntt)t.kA()&&(this.Ott=1)}Ost(){this.y8=0;for(const t of this.ntt)t.zst(),0===this.y8&&1===t.a7()&&(this.y8=1),this.ott||1!==t.Jst()||(this.ott||(this.ott=[]),this.att=this.ott.push(t))}c7(t,s,i){if(this.ist()){if(0===t&&0===this.Ett)return;this.Ett=t,t=i}else{if(0===i&&0===this.Ett)return;this.Ett=i,t=i,s=1}const e=this.ftt+this.dtt,n=e+t*s*this.ptt,r=this.ett.Yst;n<0?(this.ftt=0,this.dtt=-n):n>=r?(this.ftt=r,this.dtt=this.ftt-n):(this.ftt=n,this.dtt=0);let h=!1,o=!1;const a=this.fJ(),l=this.pJ();let u;a||l?a&&!l?this.ptt>0?this.ftt>=r&&(this.Dst(0),o=!0):this.ftt<=0&&(this.Dst(r),o=!0):!a&&l?this.ptt>0?this.ftt>=r&&(this.Est(r),this.mJ(-1*this.gJ()),o=!0,1===this.mtt?this.ytt<this._z()?(this.ytt++,this.mtt=0):h=!0:0===this.mtt&&(this.mtt=1)):this.ftt<=0&&(this.Est(0),this.mJ(-1*this.gJ()),o=!0,1===this.mtt?this.ytt<this._z()?(this.ytt++,this.mtt=0):h=!0:0===this.mtt&&(this.mtt=1)):a&&l&&(this.ptt>0?this.ftt>=r&&(this.Est(r),this.mJ(-1*this.gJ()),o=!0,this.mtt++,Tg.wrap(this.mtt,0,2)):this.ftt<=0&&(this.Est(0),this.mJ(-1*this.gJ()),o=!0,this.mtt++,Tg.wrap(this.mtt,0,2))):this.ptt>0?this.ftt>=r&&(this.ytt<this._z()?(this.ytt++,this.Dst(0),o=!0):(this.Est(r),h=!0)):this.ftt<=0&&(this.ytt<this._z()?(this.ytt++,this.Dst(r),o=!0):(this.Est(0),h=!0));const c=this.htt;if(h){for(u=0;u<c;u++)this.ntt[u].Xst();return this.rJ(!0),void this.yst()}const f=this.att;for(u=0;u<f;u++)this.ott[u].Kst();if(1===this.Ott)for(u=0;u<c;u++){const t=this.ntt[u],s=t.Zst();this.ftt-s<0&&e-s>0?(this.ftt=s<0?0:s>=r?r:s,t.vc(s,!0,!1,o,this._tt,!1)):t.vc(this.ftt,!0,!1,o,this._tt,!1)}else for(u=0;u<c;u++)this.ntt[u].vc(this.ftt,!0,!1,o,this._tt,!1);if(!this.IsPlaying()&&this.Ftt){const t=this.Ftt.YF()+this.Ftt.tit().Qst().Zst(),s=this.ftt-t;this.ftt-=s,0!==this.dtt&&(this.dtt-=s),this.Ftt=null}for(u=0;u<f;u++)this.ott[u].sit();this._tt&&(this._tt=!1)}iit(t){this.Ftt=t}eit(){return this.Ftt}Rst(t,s=!1,i=!1,e=!1,n=NaN,r=!1,h=!1){for(const t of this.ntt)t.Kst();for(const r of this.ntt){let o=t;if("number"==typeof n&&!isNaN(n)){const t=this.YF()-r.Zst(),s=n-r.Zst();t<0&&s>0&&(o=r.Zst(),this.Est(o))}r.vc(o,s,i,e,this._tt,h)}for(const t of this.ntt)t.sit();this._tt&&r&&(this._tt=!1)}nit(){const t=this.ett.Wtt().rit(),s=Tg.jtt.UT(this,t);return this.htt=this.ntt.push(s),s}E8(){if(!this.eJ())for(const t of this.ntt)t.hit()}w7(){for(const t of this.ntt)t.w7()}oit(){for(const t of this.ntt)t.ait()}lit(t,s,i){if(s){if("number"==typeof i&&i>=0){const t=this.ntt[i];if(!t)return;return t.uit(s),void this.itt.L8(s.fH(),this)}for(const i of this.ntt)if(i.ztt()){if(t){if(i.OJ()!==t)continue;i.uit(s),this.itt.L8(s.fH(),this);break}if(!i.cit()){i.uit(s),this.itt.L8(s.fH(),this);break}}}}W8(t,s){for(const i of this.ntt)if(i.ztt())if(s){if(s===i.OJ()&&t===i.EJ())return!0}else if(t===i.EJ())return!0;return!1}p7(){return this.ntt.some(t=>!t.ztt()||t.fit())}Ust(){return this.ntt.some(t=>{if(t.ztt()){if(!t.fit())return!1;const s=t.fH();return!!s&&s.WQ()}return!1})}DJ(t){for(const s of this.N7())for(const i of s.dit())if(i.pit()===t)return i}mit(t){for(const s of this.ntt)if(t===s.EJ())return s;return null}git(t){let s=t?t.split(" "):[];const i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const t of this.N7())for(const i of t.yit())if(s.every(t=>i.wit(t)))return i}k8(){const t=[];for(const s of this.N7())t.push(s.fH());return t.filter(t=>t)}d8(){for(const t of this.N7())t.d8()}e5(){return{tracksJson:this.Sit(),name:this.Yn,playheadTime:this.YF(),playbackRate:this.ptt,pingPongState:this.mtt,resumePingPongState:this.gtt,currentRepeatCount:this.ytt,isPlaying:this.wtt,isScheduled:this.Stt,initialStateSet:this.vtt,finishedTriggers:this.Ctt,complete:this.btt,released:this.Mtt,markedForRemoval:this.xtt,completedTick:this.Gtt,implicitPause:this.Ttt,isTemplate:this.Itt,tags:this.Ptt.join(" "),stringTags:this.Att,tagsChanged:this.Rtt,firstTick:this._tt}}n5(t){t&&(this.vit(t.tracksJson),this.Yn=t.name,this.ftt=t.playheadTime,this.ptt=t.playbackRate,this.mtt=t.pingPongState,this.gtt=t.hasOwnProperty("resumePingPongState")?t.resumePingPongState:-1,this.ytt=t.currentRepeatCount,this.wtt=!!t.isPlaying,this.Stt=!!t.isScheduled,this.vtt=!!t.initialStateSet,this.Ctt=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.btt=!!t.complete,this.Mtt=!!t.released,this.xtt=!!t.markedForRemoval,this.Gtt=t.completedTick,this.Ttt=!!t.implicitPause,this.Itt=!!t.isTemplate,this.Ptt=t.tags.split(" "),this.Att=t.stringTags,this.Rtt=!!t.tagsChanged,this._tt=!!t.firstTick)}Sit(){return this.ntt.map(t=>t.e5())}vit(t){this.oit(),t.forEach((t,s)=>{this.ntt[s].n5(t)}),this.ntt.filter(t=>t.fit())}static ast(t){const s=this.yJ();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static hst(t){if(Tg.Ge(t))return t.slice(0);if(Tg.le(t))return t.split(" ");throw new Error("invalid tags")}bit(){return this.Dtt||(this.Dtt=Tg.Un(self.xJ,this)),this.Dtt}}}{const _g=self.Cs,Eg=0,Pg=1,Ag=2;_g.jtt=class extends _g.Vn{constructor(t,s){super(),this.D7=t,this.Mit=s,this.xit=s.Wtt(),this.Git=NaN,this.Tit=NaN,this.Iit=null,this.Cit=null,this._it=!1,this.AA=s.Zst()>0,this.Eit=!1,this.Pit=!1,this.Ait=NaN,this.Rit=null,this.Oit=this.Mit.tit().Fit(),this.Dit=[],this.Lit(),this.kit=0,this.y8=0,this.Nit=0}static UT(t,s){return _g.Un(_g.jtt,t,s)}qn(){this.Oit=null;for(const t of this.Dit)t.qn();_g.bh(this.Dit),this.Dit=null,this.D7=null,this.Iit=null,this.Cit=null,this.Mit=null,this.Rit=null}Lit(){for(const t of this.Mit.Bit().$it())this.Dit.push(_g.Wit.UT(this,t))}hit(){for(const t of this.Dit)t.hit()}w7(){for(const t of this.Dit)t.w7();this.Iit=null,this.Cit=null}jit(){return this.D7}aB(){return this.D7.aB()}yit(){return this.Oit||(this.Oit=this.Mit.tit().Fit()),this.Oit}dit(){return this.Dit}DJ(t){for(let s=0;s<this.Dit.length;s++){const i=this.Dit[s];if(i.pit()===t)return i}}Vit(){this.Iit||this.EJ()}Hit(){return!!this.Iit&&!this.Iit.SY()}fit(){if(!this.ztt())return!1;const t=this.Uit(),s=this.aB().P$(t);return!!s&&!s.SY()}fH(){if(!this.ztt())return;const t=this.qit();return-1!==t?this.aB().J0(t):void 0}zit(){return this.D7.N7().indexOf(this)}ait(){this.Iit=null,this.Git=NaN,this.Cit=null,this.Tit=NaN,this._it=!0}cit(){return!!this.Iit}EJ(){if(this._it)return;if(this.Iit&&this.Hit())return this.Iit;const t=this.Uit();return this.Iit=this.aB().P$(t),this.Iit}uit(t){if(this._it=!1,this.Iit!==t){this.w7(),this.Iit=t,this.Tit=t.fH().xk(),this.Git=t.TH(),this.Cit=t.D$();for(const s of this.Jit()){const i=s.Yit,e=s.Xit;switch(i.Kit()){case"instance-variable":{e.Zit();const i=t.fH(),n=i.Qit(s.name),r=i.tet(n),h=i.iet(n);r===s.name&&h===s.type&&e.eet(n);break}case"behavior":{const i=s.uz,n=this.fH(),r=t.fH(),h=e.fz(r);if(i&&h){const t=i.Pc();n.net(t),r.net(t),e.Zit(),e.ret(h._1())}break}}}}}*Jit(){for(const t of this.Dit){const s=t.Utt(),i=this.fH(),e={Yit:t,Xit:s};switch(t.Kit()){case"world-instance":e.het=t.pit();break;case"instance-variable":{const t=s.Zit();e.name=i.tet(t),e.type=i.iet(t);break}case"effect":{const t=i.Cj(),n=s.oet(t);e.aet=n;break}case"behavior":{const t=s.fz(i);e.uz=t;break}case"plugin":e.UW=i.qW()}yield e}}D$(){if(this.Cit&&this.Hit())return this.Cit;const t=this.EJ();return t&&(this.Cit=t.D$()),this.Cit}Qst(){return this.Mit}Uit(){return isNaN(this.Git)?this.Mit.Uit():this.Git}let(t){this.Mit.let(t)}Ktt(){return this.Mit.Ktt()}Ztt(t){this.Mit.Ztt(t)}K7(){return this.Mit.K7()}OJ(){return this.Mit.OJ()}Zst(){return this.Mit.Zst()}uet(){return this.Mit.uet()}cet(t){this.Mit.cet(t)}Qtt(t){this.Mit.Qtt(t)}_J(t){for(const s of this.yit())s._J(t);for(const s of this.dit())s._J(t)}fet(){return this.Mit.fet()}det(t){this.Mit.det(t)}qit(){return isNaN(this.Tit)?this.Mit.qit():this.Tit}pet(t){this.Mit.pet(t)}met(t){this.Mit.met(t)}yet(){const t=this.EJ();return t&&t.iz().wet()?t.iz().yet():this.Mit.yet()}vet(t){this.Mit.vet(t)}bet(){const t=this.EJ();return t&&t.iz().wet()?t.iz().bet():this.Mit.bet()}XI(){return this.Mit.XI()}Pc(){return this.Mit.Pc()}ztt(){return 0===this.XI()}Met(){return 1===this.XI()}xet(){return 2===this.XI()}Get(){return this.kit}a7(){return this.y8}Jst(){return this.Nit}kA(){return this.AA}Lst(){for(const t of this.Dit)t.Lst()}o7(){if(this.Vit(),!this.Hit()&&this.ztt())return;const t=this.jit().nst(),s=t?0:this.uet();for(const t of this.Dit)t.o7(s),0===this.kit&&1===t.Get()&&(this.kit=1),0===this.y8&&1===t.a7()&&(this.y8=1);this.Nit=0,this.Dit.some(t=>t.Jst())&&(this.Nit=1),this.Rit=t?this.Tet(s):this.Iet(s),this.Eit=!1,this.Pit=!1,this.vc(s),this.Cet(this.Rit)}qst(){if(this.Vit(),!this.Hit()&&this.ztt())return;const t=this.D7.nst(),s=this.D7.YF()-this.Zst();this.Rit=t?this.Tet(s):this.Iet(s);for(const t of this.Dit)t.qst(s)}Xst(){if(!this.jit().m7()&&(this.Vit(),(this.Hit()||!this.ztt())&&!this.AA)){const t=this.D7.YF();t>=this.Zst()+this.uet()?this.vc(this.uet(),!0,!1,!0,!1,!1,!0):t<=0&&this.vc(0,!0,!1,!0,!1,!1,!0)}}zst(){for(let t=0,s=this.Dit.length;t<s;t++){const s=this.Dit[t];s.zst(),0===this.kit&&1===s.Get()&&(this.kit=1),0===this.y8&&1===s.a7()&&(this.y8=1)}}Kst(){const t=this.Dit.length;for(let s=0;s<t;s++)this.Dit[s].Kst()}vc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){this.Iit||this.EJ();const o=this.Iit&&!this.Iit.SY(),a=0===this.Mit.zc;if((o||!a)&&!(r&&a&&this.fH().WQ()||(t-=this.Zst())<0)){this._et(t,s),this.Eet(t,s,n),!this.jit().IsPlaying()&&this.jit().eit()&&(t=this.jit().eit().YF());for(let s=0,n=this.Dit.length;s<n;s++)this.Dit[s].vc(t,i,e,h);this.Pet(t,s),0!==this.kit&&(this.Cit||(this.Cit=this.Iit.D$()),this.Cit&&this.Cit.xU())}}sit(){const t=this.Dit.length;for(let s=0;s<t;s++)this.Dit[s].sit()}_et(t,s){if(s&&this.AA&&!this.Eit){if(this.jit().nst()){if(t<0)return}else if(t>this.uet())return;for(const t of this.Dit)t.o7();this.Eit=!0}}Pet(t,s){if(s&&this.AA&&!this.Pit)if(this.jit().nst()){if(t>=this.uet()){for(const t of this.Dit)t.vc(this.uet(),!1,!0);this.Pit=!0}}else if(t<=0){for(const t of this.Dit)t.vc(0,!1,!0);this.Pit=!0}}Eet(t,s,i){if(i)return;if(!s)return;if(!_g.sB.ust)return;const e=this.jit();if(e.nst()){const s=this.Rit.V7(),i=this.Rit.YF(),n=s?s.YF():e.uJ();(t<=i||t>=n)&&(this.Rit=this.xit.Aet(t,this.Mit),s&&this.Ret(this.Rit))}else{if(!this.xit.Oet(t,this.Mit))return;this.Rit||(this.Rit=this.xit.Oet(t,this.Mit));const s=this.Rit.Fet(),i=this.Rit.YF(),e=s?s.YF():0;(t>=i||t<=e)&&(this.Rit=this.xit.Oet(t,this.Mit),this.Rit&&this.Ret(this.Rit))}}Tet(t){return this.xit.Det(t,this.Mit)||this.xit.Aet(t,this.Mit)}Iet(t){return this.xit.Det(t,this.Mit)||this.xit.Oet(t,this.Mit)}Ret(t,s=!1){if(!_g.sB.ust)return;const i=this.jit(),e=i.Vtt();_g.sB.ust.Q$.cst(i),_g.sB.ust.Q$.Let(t),e.JH(_g.sB.ust.Q$.ket),e.JH(_g.sB.ust.Q$.Ret),i.IsPlaying()||s||i.iit(t),_g.sB.ust.Q$.gst(i),_g.sB.ust.Q$.Net(t)}Cet(t){this.Ret(t,!0)}$et(){return this.Mit.tit().Bet()}Wet(){const t=this.Mit.Bit().jet(),s=_g.Wit.UT(this,t);return this.Dit.push(s),s}Vet(t){this.Mit.tit().Het(t)}Uet(t){for(const s of this.Dit)s.Uet(t)}qet(){for(const t of this.Dit)t.qet()}zet(){if(this.Vit(),this.Hit()||!this.ztt())for(const t of this.Dit)t.zet()}Jet(){if(this.Vit(),!this.Hit()&&this.ztt())return;let t=!1;for(const s of this.Dit){const i=s.Jet();!t&&i&&(t=!0)}if(t){const t=this.$et();t.aJ(this.jit().YF()),t._J("noease"),t.det(!0),t.rst("")}}d8(){isNaN(this.Ait)||this.Yet(this.Ait),this.Ait=NaN}e5(){const t=this.EJ(),s=t?t.TH():this.Uit();return{propertyTracksJson:this.Xet(),lastKeyframeDataItemJson:this.Ket(),initialStateOfNestedSet:this.Eit,endStateOfNestedSet:this.Pit,instanceUid:s,cleared:this._it}}n5(t){if(t){this.Zet(t.propertyTracksJson),this.Qet(t.lastKeyframeDataItemJson),this.Ait=t.instanceUid,this.Eit=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Eit=t.initialStateOfNestedSet),this.Pit=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Pit=t.endStateOfNestedSet),this._it=!!t.hasOwnProperty("cleared")&&t.cleared;for(const t of this.Dit)0===this.kit&&1===t.Get()&&(this.kit=1),0===this.y8&&1===t.a7()&&(this.y8=1);this.Nit=0,this.Dit.some(t=>t.Jst())&&(this.Nit=1)}}Ket(){return this.Mit.tit().tnt(this.Rit)}Xet(){return this.Dit.map(t=>t.e5())}Zet(t){t.forEach((t,s)=>{this.Dit[s].n5(t)})}Yet(t){if(!_g.te(t))return;const s=this.aB().P$(t);s&&this.jit().lit(this.Mit.OJ(),s,this.zit())}Qet(t){const s=this.Mit.tit();this.Rit=s.snt(t)}}}{const Rg=self.Cs;Rg.Wit=class extends Rg.Vn{constructor(t,s){super(),this.int=t,this.ent=s,this.nnt=s.Bit(),this.kit=0,this.y8=0,this.Nit=0,this.rnt=this.Utt(),this.hnt=this.ent.ant().ont(),this.lnt=null,this.unt=null}static UT(t,s){return Rg.Un(Rg.Wit,t,s)}qn(){this.int=null,this.rnt&&(this.rnt.qn(),this.rnt=null),this.hnt=null,this.ent=null,this.nnt=null}Get(){return this.kit}a7(){return this.y8}Jst(){return this.Nit}cnt(){return!!this.unt}fnt(t){this.unt=t}dnt(){return this.unt}pnt(){return this.int}mnt(){return this.ent}Bit(){return this.nnt}jit(){return this.int.jit()}aB(){return this.int.aB()}EJ(){return this.int.EJ()}Utt(){if(this.rnt)return this.rnt;let t;switch(this.ent.Kit()){case"behavior":t=new Rg.Wit.gnt(this);break;case"effect":t=new Rg.Wit.ynt(this),this.y8=1;break;case"instance-variable":t=new Rg.Wit.wnt(this);break;case"plugin":t=new Rg.Wit.Snt(this),this.y8=1;break;case"world-instance":t=new Rg.Wit.vnt(this),this.y8=1,this.kit=1;break;case"value":t=new Rg.Wit.bnt(this);break;case"audio":t=new Rg.Wit.Mnt(this)}return this.rnt=t,this.rnt}Kit(){return this.ent.Kit()}xnt(t){this.ent.xnt(t)}Gnt(){return this.ent.Tnt()}Int(t){this.ent.Cnt(t)}FJ(){return this.Utt()._nt()}pit(){return this.ent.Ent()}Pnt(t){this.ent.Ant(t)}Rnt(){return this.ent.XI()}Ont(t){this.ent.Fnt(t)}Dnt(){return this.Bit().Lnt(this.ent).XI()}knt(){return this.ent.knt()}Nnt(t){this.ent.Nnt(t)}$nt(){return this.ent.$nt()}Bnt(t){this.ent.Bnt(t)}fet(){return this.ent.fet()}det(t){this.ent.det(t)}Ktt(){return this.ent.Ktt()}Ztt(t){this.ent.Ztt(t)}K7(){return this.ent.K7()}Qtt(t){this.ent.Qtt(t)}_J(t){for(const s of this.Wnt())s._J(t)}jnt(){return this.ent.jnt()}Wnt(){return this.hnt||(this.hnt=this.ent.ant().ont()),this.hnt}j7(){return this.ent.ant().j7()}Vnt(t){return this.nnt.Vnt(t,this.ent)}Hnt(t){return this.nnt.Hnt(t,this.ent)}Unt(t){let s,i=this.nnt.Vnt(t,this.ent);return i?s=this.nnt.qnt(t,this.ent):(i=this.nnt.Hnt(t,this.ent),s=this.nnt.znt(t,this.ent)),{start:i,end:s}}*Jnt(){for(const t of this.Wnt())yield t.r9()}*Ynt(){for(const t of this.Wnt())yield t.YF()}hit(){this.Utt().hit()}w7(){this.Utt().w7()}Xnt(){return this.Utt().Xnt()}Lst(){this.Utt().Lst()}o7(t){this.Utt().o7(),this.lnt=this.Knt(t),this.zst()}qst(t){this.Utt().qst(),this.lnt=this.Knt(t)}zst(){const t=this.pnt();if(this.Nit=0,t.ztt()){const s=this.jit(),i=t.EJ(),e=this.Utt(),n=this.pit();if(e.Znt()){const t=s.Htt(i,e,n,this);t&&t.length&&(this.Nit=1)}else this.Nit=0}}Knt(t){const s=this.jit();return this.nnt.Vnt(t,this.ent)||(s.nst()?this.nnt.Hnt(t,this.ent):this.nnt.znt(t,this.ent))}Kst(){this.rnt.Kst()}vc(t,s=!1,i=!1,e=!1){let n,r,h=!1;if(s)n=this.nnt.Hnt(t,this.ent);else{if(this.lnt){const s=this.jit(),i=this.lnt.V7(),e=this.lnt.YF(),n=i?i.YF():s.uJ();(t<=e||t>=n)&&(this.lnt=this.nnt.Hnt(t,this.ent),h=!0)}else this.lnt=this.nnt.Hnt(t,this.ent),h=!0;n=this.lnt}n&&(r=n.V7()),this.rnt.vc(t,n,r,s,i,e,h)}Qnt(t){if(this.lnt){const s=this.jit(),i=this.lnt.V7(),e=this.lnt.YF(),n=i?i.YF():s.uJ();(t<=e||t>=n)&&(this.lnt=this.nnt.Hnt(t,this.ent))}else this.lnt=this.nnt.Hnt(t,this.ent);const s=this.lnt,i=s.V7();return this.rnt.Qnt(t,s,i)}trt(t,s,i){return this.rnt.Qnt(t,s,i)}sit(){this.rnt.sit()}static srt(t,s){const i=s.mnt();return s.nnt.Hnt(t,i)}static irt(t,s){const i=s.mnt();return s.nnt.znt(t,i)}ert(){const t=this.ent.ant().nrt();return this.lnt=null,t}Uet(t){this.lnt=null,this.ent.ant().rrt(t)}qet(){this.Utt().qet()}zet(){if(this.Utt().zet()){const t=this.nnt.Lnt(this.ent),s=this.Utt().Xnt();t.hrt(s)}}Jet(){const t=this.Utt().Jet();return t&&this.ort(),this.Utt().art(),t}ort(){const t=this.jit().YF(),s=this.Utt(),i=Rg.Wit.srt(t,this),e=this.ert();e.Fnt(i.XI()),e.aJ(t),e._J(i.lrt()),e.det(!0),e.urt(s.crt()),e.hrt(s.Xnt())}e5(){return{sourceAdapterJson:this.Utt().e5()}}n5(t){t&&this.Utt().n5(t.sourceAdapterJson)}}}{const Og=self.Cs,Fg=Og.Wit;Fg.vnt=class{constructor(t){this.frt=t,this.drt=null,this.prt()}qn(){this.drt&&(this.drt.qn(),this.drt=null),this.frt=null}Znt(){return this.drt.Znt()}DJ(){return this.frt}hit(){this.drt&&this.drt.hit()}w7(){this.drt&&this.drt.w7()}prt(){return this.drt||(this.drt=this.mrt()),this.drt}Zit(){}xk(){return this.Zit()}grt(){}Lst(){this.prt().Lst()}o7(){this.prt().o7()}qst(){this.prt().qst()}Kst(){this.drt.yrt()}vc(t,s,i,e,n,r,h){let o;switch(this.frt.Dnt()){case"numeric":o=Fg.wrt.vc(t,s,i,this.frt);break;case"angle":o=Fg.Srt.vc(t,s,i,this.frt);break;case"boolean":o=Fg.vrt.vc(t,s,i,this.frt);break;case"color":o=Fg.brt.vc(t,s,i,this.frt);break;case"text":o=Fg.Mrt.vc(t,s,i,this.frt)}this.drt.xrt(t,o,s,i,e,n,r,h)}Qnt(t,s,i){switch(this.frt.Dnt()){case"numeric":return Fg.wrt.vc(t,s,i,this.frt);case"angle":return Fg.Srt.vc(t,s,i,this.frt);case"boolean":return Fg.vrt.vc(t,s,i,this.frt);case"color":return Fg.brt.vc(t,s,i,this.frt);case"text":return Fg.Mrt.vc(t,s,i,this.frt)}}sit(){this.drt.Grt()}qet(){this.prt().Trt()}art(){this.prt().art()}Xnt(){return this.prt().Xnt()}zet(){return this.prt().zet()}Jet(){return this.prt().Jet()}crt(){const t=this.frt,s=t.pnt().jit().YF(),i=Fg.srt(s,t),e=i.V7();switch(t.Dnt()){case"numeric":return Fg.wrt.vc(s,i,e,t);case"angle":return Fg.Srt.vc(s,i,e,t);case"boolean":return Fg.vrt.vc(s,i,e,t);case"color":return Fg.brt.vc(s,i,e,t);case"text":return Fg.Mrt.vc(s,i,e,t)}}mrt(){const t=this.frt;switch(t.jnt()?t.Dnt():""){case"combo":case"boolean":case"text":case"string":return new Fg.Crt.Irt(this);case"numeric":case"number":case"angle":return"combo"===this.frt.Rnt()?new Fg.Crt.Irt(this):new Fg.Crt._rt(this);case"color":case"offsetColor":return new Fg.Crt.Ert(this);default:return new Fg.Crt._rt(this)}}e5(){return{propertyAdapterJson:this.prt().e5()}}n5(t){t&&this.prt().n5(t.propertyAdapterJson)}}}{const Dg=self.Cs,Lg=0;class kg extends Dg.Wit.vnt{constructor(t){super(t),this.Prt=NaN}Zit(){return this.frt.mnt().Tnt()[0]}xk(){return this.Prt?this.Prt:super.xk()}grt(){return this.frt.pnt().EJ()}eet(t){this.frt.mnt().Tnt()[0]!==t&&(this.Prt=t)}vc(t,s,i,e,n,r,h){this.prt().Art(s._nt())&&super.vc(t,s,i,e,n,r,h)}Qnt(t,s,i){if(this.prt().Art(s._nt()))return super.Qnt(t,s,i)}e5(){return Object.assign(super.e5(),{index:this.Prt})}n5(t){t&&(super.n5(t),this.Prt=t.index)}}Dg.Wit.wnt=kg}{const Ng=self.Cs,$g=0,Bg=1,Wg=2;class jg extends Ng.Wit.vnt{constructor(t){super(t),this.zQ=NaN}Zit(){return this.frt.mnt().Tnt()[1]}grt(){const t=this.frt.mnt(),s=this.frt.pnt(),i=this.zQ?this.zQ:t.Tnt()[0],e=s.EJ(),n=e.Rrt(i);return e.Ort()[n].iz()}fz(t){const s=this.frt.mnt().Tnt()[2];return t.Frt(s)}ret(t){this.frt.mnt().Tnt()[0]!==t&&(this.zQ=t)}vc(t,s,i,e,n,r,h){const o=this.frt.pnt().EJ();this.fz(o.fH())&&super.vc(t,s,i,e,n,r,h)}Qnt(t,s,i){const e=this.frt.pnt().EJ();if(this.fz(e.fH()))return super.Qnt(t,s,i)}e5(){return Object.assign(super.e5(),{sid:this.zQ})}n5(t){t&&(super.n5(t),this.zQ=t.sid)}}Ng.Wit.gnt=jg}{const Vg=self.Cs,Hg=0,Ug=1;class qg extends Vg.Wit.vnt{constructor(t){super(t)}Zit(){return this.frt.mnt().Tnt()[1]}grt(){const t=this.frt.pnt().D$().bU(),s=t.Cj(),i=this.oet(s).xk();return t.wz(i)?t.Drt(i):null}oet(t){const s=this.frt.mnt().Tnt()[0];return t.Lrt(s)}vc(t,s,i,e,n,r,h){this.krt()&&super.vc(t,s,i,e,n,r,h)}Qnt(t,s,i){if(this.krt())return super.Qnt(t,s,i)}krt(){const t=this.frt.pnt().D$().bU(),s=t.Cj(),i=this.oet(s);if(!i)return;const e=i.xk();return t.wz(e)}}Vg.Wit.ynt=qg}{const zg=self.Cs,Jg=0;class Yg extends zg.Wit.vnt{constructor(t){super(t)}Zit(){return this.frt.mnt().Tnt()[0]}grt(){return this.frt.pnt().EJ().iz()}vc(t,s,i,e,n,r,h){const o=this.frt.pnt();o.fH().qW()===o.EJ().fH().qW()&&super.vc(t,s,i,e,n,r,h)}Qnt(t,s,i){const e=this.frt.pnt();if(e.fH().qW()===e.EJ().fH().qW())return super.Qnt(t,s,i)}Nrt(){const t=this.frt.pnt(),s=t.fH().qW();if(zg.sB.$rt&&s instanceof zg.sB.$rt&&("initial-frame"===this.frt.pit()||"initial-animation"===this.frt.pit()))switch(this.frt.K7()){case"relative":return{Brt:(s,i,e,n,r)=>{if(i!==n){const e=n/i,r=t.DJ("offsetWidth"),h=t.DJ("offsetScaleX");if(r||h){const o=r?.Utt()?.prt(),a=h?.Utt()?.prt();if(s.Sq()&&s.Iq())a&&a.Wrt(n),s.Xg(this.jrt(n,i,s,t,o,a));else{const i=n*((s.Hrt()?.Vrt()??this.Urt(s,t))/this.Urt(s,t));a&&a.Wrt(n);const r=o?.qrt()??0,h=a?.qrt()??0;s.Xg(i+(r+h*e))}}else s.Xg(s.Vg()*e)}if(e!==r){const i=r/e,n=t.DJ("offsetHeight"),h=t.DJ("offsetScaleY");if(n||h){const o=n?.Utt()?.prt(),a=h?.Utt()?.prt();if(s.Sq()&&s._q())a&&a.Wrt(r),s.Hg(this.zrt(r,e,s,t,o,a));else{const e=r*((s.Hrt()?.Jrt()??this.Yrt(s,t))/this.Yrt(s,t));a&&a.Wrt(r);const n=o?.qrt()??0,h=a?.qrt()??0;s.Hg(e+(n+h*i))}}else s.Hg(s.Qg()*i)}}};case"absolute":return null}}Xrt(t,s,i,e=0){const n=s.jit().mit(t.EJ());if(!n)return e;const r=n.DJ(i);if(!r)return e;const h=r.mnt().ant();if(!h)return e;const o=h.Krt();return o?o._nt():e}Urt(t,s){const i=s.jit().mit(t.EJ());if(i)return i.yet();const e=t.EJ().iz();return e.wet()?e.yet():t.Hrt().Vrt()}Yrt(t,s){const i=s.jit().mit(t.EJ());if(i)return i.bet();const e=t.EJ().iz();return e.wet()?e.bet():t.Hrt().Jrt()}jrt(t,s,i,e,n,r){const h=i.Hrt().Vrt(),o=h/i.rq().Hrt().Vrt();let a=1;const l=r?.Zrt()??0;if(0!==l){const t=h/this.Urt(i,e);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=n?.Qrt()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return i.rq().Vg()*o*a*f}zrt(t,s,i,e,n,r){const h=i.Hrt().Jrt(),o=h/i.rq().Hrt().Jrt();let a=1;const l=r?.tht()??0;if(0!==l){const t=h/this.Yrt(i,e);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=n?.sht()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return i.rq().Qg()*o*a*f}}zg.Wit.Snt=Yg}{const Xg=self.Cs;class Kg extends Xg.Wit.vnt{constructor(t){super(t),this.iht=0,this.eht=!1}Znt(){return!1}o7(){const t=this.frt.Bit();let s=this.frt.mnt();s=t.Lnt(s),this.iht=s.r9()}qst(){}_nt(){return this.eht||this.frt.vc(0),this.iht}vc(t,s,i,e,n,r,h){this.iht=Xg.Wit.wrt.vc(t,s,i,this.frt),this.eht=!0}qet(){}art(){}Xnt(){return this.iht}zet(){return!1}Jet(){return!1}e5(){return{value:this.iht,init:this.eht}}n5(t){t&&(this.iht=t.value,this.eht=!t.hasOwnProperty("init")||t.init)}}Xg.Wit.bnt=Kg}{const Zg=self.Cs,Qg=0,ty=0,sy=1,iy=1,ey=2,ny=3;class ry extends Zg.Wit.vnt{constructor(t){super(t),this.nht=!1,this.rht=null,this.hht=null,this.oht=null,this.D7=this.frt.jit(),this.int=this.frt.pnt(),this.aht=this.frt.Gnt(),this.lht=this.aht[0],this.uht=this.aht[1],this.aht[3]?this.cht=this.aht[3]:this.cht=Math.random().toString(36).slice(2),this.fht=NaN,this.dht=NaN,this.pht=NaN,this.mht=null,this.ght()}qn(){super.qn(),this.rht=null,this.hht=null,this.oht=null,this.D7=null,this.int=null,this.aht=null,this.lht=null,this.mht=null}ght(){if(!self.Cs.sB.Audio)return;const t=this.frt.aB().yht(self.Cs.sB.Audio);t&&(this.rht=t.VW().iz()),this.hht=self.Cs.sB.Audio.wht,this.oht=self.Cs.sB.Audio.Sht}vht(){if(this.mht)return;const t=this.frt.pnt().DJ("audioSource");t&&(this.mht=t.Utt())}bht(){const t=this.frt.pnt().DJ("volume");return t?t.Utt().dht:this.dht}hit(){super.hit(),this.nht=!1,this.rht&&(this.oht&&(this.fht=this.oht.Mht.call(this.rht,this.cht),this.dht=this.oht.xht.call(this.rht,this.cht)),this.hht&&this.hht.rJ.call(this.rht,this.cht))}Ght(){return this.cht}Tht(){return this.pht}Iht(t){this.pht=t}o7(){super.o7(),this.fht=NaN,this.nht=!1}qst(){super.qst();const t=this.frt.jit().YF();switch(this.fht=t-this.uht,this.frt.pit()){case"audioSource":break;case"volume":this.dht=this.frt.Qnt(t)}this.nht=!1}vc(t,s,i,e,n,r,h){if(this.rht)switch(this.frt.pit()){case"audioSource":{if(!this.D7.nst())return;if(e)return void(this.hht&&this.hht.rJ.call(this.rht,this.cht));if(t<this.uht)return void(this.nht=!1);const s=this.oht.Cht.call(this.rht,this.cht),i=this.D7.gJ();if(i!==s&&this.hht.mJ.call(this.rht,this.cht,i),this.nht)return;if(!this.frt.jit().IsPlaying())return;if(this.nht=!0,isNaN(this.fht)){const s=self.performance.now(),i=t-this.uht;if("suspended"===this.rht._ht())return void(this.nht=!1);const e=i+(self.performance.now()-s)/1e3;if(this.hht){let t=this.Tht();isNaN(t)?(this.Iht(0),t=0):this.Iht(t),this.hht.Eht.call(this.rht,this.lht,t,this.cht,e)}}else{const t=this.fht;this.fht=NaN;const s=this.bht();if(this.dht=NaN,"suspended"===this.rht._ht())return void(this.nht=!1);this.hht&&(this.Iht(s),this.hht.Eht.call(this.rht,this.lht,s,this.cht,t))}break}case"volume":this.vht(),super.vc(t,s,i,e,n,r,h)}}Qnt(t,s,i){if(this.rht)switch(this.frt.pit()){case"audioSource":return;case"volume":return this.vht(),super.Qnt(t,s,i)}}Pht(t,s){return this.mht?this.mht.Tht():0}Aht(t,s,i,e){this.mht&&this.mht.Iht(this.Pht()+s),this.hht&&this.mht&&this.hht.Iht.call(this.rht,this.mht.Ght(),this.mht.Tht())}Rht(t,s,i){this.mht&&this.mht.Iht(s),this.hht&&this.mht&&this.hht.Iht.call(this.rht,this.mht.Ght(),this.mht.Tht())}Oht(){return!0}e5(){return{audioPlaybackStarted:this.nht,audioTag:this.cht,pauseTime:this.fht,pauseVolume:this.dht,volume:this.pht}}n5(t){t&&(this.nht=t.audioPlaybackStarted,this.cht=t.audioTag,this.fht=t.pauseTime,this.dht=t.pauseVolume,this.pht=t.volume,this.ght())}}Zg.Wit.Mnt=ry}{const hy=self.Cs;hy.Wit.Crt=class{constructor(t){this.rnt=t,this.frt=t.DJ(),this.Cit=this.frt.pnt().D$(),this.Fht=this.frt.pit(),this.Dht=!1,this.Lht=null,this.kht=null}qn(){this.rnt=null,this.frt=null,this.Cit=null,this.Lht=null,this.kht=null}Znt(){return!1}hit(){}w7(){this.Cit=null,this.Lht=null,this.kht=null}Utt(){return this.rnt}DJ(){return this.frt}D$(){return this.Cit||(this.Cit=this.frt.pnt().D$()),this.Cit}Nht(t){this.Dht=!!t}$ht(){return this.Dht}Lst(){}o7(){}qst(){}Trt(){this.Lht=this.Xnt()}art(){this.Lht=null}Xnt(){}zet(){}Jet(){}Art(t){return typeof this.Bht()==typeof t}yrt(){}xrt(t,s,i,e,n,r,h,o){}Grt(){}Wht(){return this.Vht(()=>{const t=this.frt.mnt();return this.frt.Bit().Lnt(t)},()=>{const t=this.frt.mnt();return this.frt.Bit().Krt(t)}).jht()}Hht(){const t=this.frt.jit().YF()-this.frt.pnt().Zst();return this.Vht(()=>{const s=this.frt.mnt();return this.frt.Bit().Hnt(t,s)},()=>{const s=this.frt.mnt(),i=this.frt.Bit();return i.znt(t,s)||i.Krt(s)}).jht()}Vht(t,s){return this.frt.jit().nst()?t():s()}Uht(t,s){return"relative"===this.frt.K7()?t():s()}qht(t,s){return this.$ht()?(this.Nht(!1),t()):s()}zht(t){}Jht(){return this.rnt.xk()}Yht(){return this.kht||(this.kht=this.rnt.grt()),this.kht}Xht(t,s,i,e,n,r){switch(this.frt.Kit()){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return n();case"audio":return r()}}e5(){return{firstAbsoluteUpdate:this.Dht,saveState:this.Lht}}n5(t){t&&(this.Dht=t.firstAbsoluteUpdate,this.Lht=t.saveState)}Kht(t,s=!1){const i=[];for(const e of t){const t=e.pnt().Zst();for(const n of e.Wnt())s&&0===n.YF()?i.push({time:t+n.YF(),value:n.jht()}):s||i.push({time:t+n.YF(),value:n.jht()})}return i.sort((t,s)=>t.time-s.time)}Zht(t,s,i){return this.Qht(s,i)}Qht(t,s){for(let i=s.length-1;i>=0;i--)if(s[i].time<=t)return s[i];return null}}}{const oy=self.Cs,ay=new Map,ly=[0,0,0];class uy extends oy.Wit.Crt{constructor(t){super(t)}Lst(){}o7(){}qst(){}Xnt(){const t=this.frt.Kit(),s=this.Yht(),i=this.Jht();switch(t){case"behavior":case"plugin":return this.tot(s.sot(i));case"effect":return this.tot(s[i]);case"world-instance":return this.tot(this.Bht())}}zet(){const t=this.Wht();return!this.iot(t,this.Bht())}Jet(){return!oy.ee(this.Lht)&&!this.iot(this.Lht,this.Bht())}iot(t,s){return t=this.eot(t),s=this.eot(s),t.qo(s)}Wht(){const t=super.Wht();return this.eot(t)}Hht(){const t=super.Hht();return this.eot(t)}zht(t){}tot(t){return oy.ke(t,oy.Go)?t.toArray().slice(0,3):t.slice(0,3)}eot(t){return oy.ke(t,oy.Go)?t:new oy.Go(t[0],t[1],t[2],1)}Art(t){return!0}Znt(){return!0}yrt(){const t=this.frt.jit(),s=this.frt.EJ(),i=this.frt.Utt(),e=t.Htt(s,i,this.Fht,this.frt);if(e&&e.length>1){ay.has(s)||ay.set(s,new Map);const t=ay.get(s),i=this.frt.Kit();t.has(i)||t.set(i,new Map);const e=t.get(i);e.has(this.Fht)||e.set(this.Fht,{not:!1,color:new oy.Go(0,0,0,1)})}}rot(t,s,i){const e=ay.get(t).get(s).get(i);return e.not=!0,e.color}xrt(t,s,i,e,n,r,h,o){const a=this.frt.jit(),l=this.frt.pnt(),u=this.frt.EJ(),c=this.frt.Utt(),f=this.frt.Kit(),d=this.Fht,p=a.Htt(u,c,d,this.frt);if(p&&p.length>1){const t=this.Kht(p,!0),i=this.Zht(a,a.YF(),t);if(i){const t=l.Zst(),e=i.time-t;if(0===e)this.rot(u,f,this.Fht).Ao(s[0],s[1],s[2]);else{if(e<0)return;const t=s[0],i=s[1],n=s[2],r=this.frt.vc(e,!1,!0),h=oy.Go.xa(t,r[0]),o=oy.Go.xa(i,r[1]),a=oy.Go.xa(n,r[2]);this.rot(u,f,this.Fht).Ao(h,o,a)}}}else this.hot(s[0],s[1],s[2])}Grt(){const t=this.frt.EJ();if(!ay.has(t))return;const s=ay.get(t),i=this.frt.Kit();if(!s.has(i))return;const e=s.get(i);if(!e.has(this.Fht))return;const n=e.get(this.Fht),r=n.not,h=n.color;r&&this.hot(h.No(),h.$o(),h.Bo()),0===e.size&&s.delete(i),0===s.size&&ay.delete(t)}Bht(){const t=this.frt.Kit(),s=this.Yht(),i=this.Jht();switch(t){case"behavior":case"plugin":return this.eot(s.sot(i));case"effect":return s[i].clone();case"world-instance":return this.D$().UU().clone()}}hot(t,s,i){const e=this.frt.Kit(),n=this.Yht(),r=this.Jht();switch(e){case"behavior":case"plugin":ly[0]=t,ly[1]=s,ly[2]=i,n.oot(r,ly);break;case"effect":n[r].Po(t,s,i);break;case"world-instance":this.D$().aot(t,s,i)}}e5(){}n5(t){}}oy.Wit.Crt.Ert=uy}{const cy=self.Cs,fy=cy.Wit;class dy extends cy.Wit.Crt{constructor(t){super(t)}Lst(){}o7(){}qst(){}Xnt(){return this.Bht()}zet(){return this.Wht()!==this.Xnt()}Jet(){return!cy.ee(this.Lht)&&this.Lht!==this.Xnt()}Znt(){return!1}xrt(t,s,i,e,n,r,h,o){const a=this.frt,l=a.pnt(),u=a.Kit(),c=a.jit(),f=l.EJ(),d=a.Utt(),p=this.Fht,m=c.Htt(f,d,p,a);if(m&&m.length>1){const i=this.Kht(m),e=t+l.Zst(),n=this.Zht(c,e,i);n&&(s=n.value)}switch(a.Dnt()){case"numeric":if(!fy.wrt.lot(this.Jht(),this.Yht(),s,u))return;break;case"angle":if(!fy.Srt.lot(this.Jht(),this.Yht(),s,u))return;break;case"boolean":if(!fy.vrt.lot(this.Jht(),this.Yht(),s,u))return;break;case"color":if(!fy.brt.lot(this.Jht(),this.Yht(),s,u))return;break;case"text":if(!fy.Mrt.lot(this.Jht(),this.Yht(),s,u))return}this.hot(s)}Bht(){const t=this.frt.Kit(),s=this.Yht(),i=this.Jht();switch(t){case"behavior":case"plugin":return s.sot(i);case"effect":return s[i];case"instance-variable":return s.uot(i)}}hot(t){const s=this.frt.Kit(),i=this.Yht(),e=this.Jht();switch(s){case"behavior":case"plugin":i.oot(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.cot(e,t)}}}cy.Wit.Crt.Irt=dy}{const py=self.Cs,my=py.Wit.Crt,gy=new Map,yy=(t,s,i,e,n,r=!1,h=null,o=null)=>{gy.set(t,{fot:s,dot:i,pot:e,round:n,mot:r,init:h,reset:o})},wy=(t,s)=>{const i=s.jit().mit(t.EJ());if(i)return i.yet();const e=t.EJ().iz();return e.wet()?e.yet():t.Hrt().Vrt()},Sy=(t,s,i,e=0)=>{const n=s.jit().mit(t.EJ());if(!n)return e;const r=n.DJ(i);if(!r)return e;const h=r.mnt().ant();if(!h)return e;const o=h.Krt();return o?o._nt():e},vy=t=>{const s=[];let i=t.rq();for(;i;)s.push(i),i=i.rq();return s.reverse(),s};yy("offsetX",(t,s,i,e)=>{"relative"===e.frt.K7()?t.got(s,i.jit().sst()):t.got(s)},(t,s)=>t.XM(s),t=>t.YM(),!0),yy("offsetY",(t,s,i,e)=>{"relative"===e.frt.K7()?t.yot(s,i.jit().sst()):t.yot(s)},(t,s)=>t.QM(s),t=>t.ZM(),!0),yy("offsetWidth",(t,s,i,e,n=!1,r=!0)=>{if(0===s)return;const h="relative"===e.frt.K7(),o=1===e.wot.XI();if((h||o)&&t.Sq()&&t.Iq()){if(isNaN(e.Sot)){const s=vy(t);let i;i=o?s[s.length-1].Vg():s[s.length-1].Hrt().Vrt(),e.Sot=0===i?Number.EPSILON:i}if(n)return;e.vot+=s;const i=s/e.Sot;t.Iy(i,r),e.bot+=i}else t.Iy(s),e.bot+=s},(t,s)=>t.Xg(s),t=>t.Vg(),!0,!1,null,t=>{t.bot=0,t.vot=0}),yy("offsetHeight",(t,s,i,e,n=!1,r=!0)=>{if(0===s)return;const h="relative"===e.frt.K7(),o=1===e.wot.XI();if((h||o)&&t.Sq()&&t._q()){if(isNaN(e.Sot)){const s=vy(t);let i;i=o?s[s.length-1].Qg():s[s.length-1].Hrt().Jrt(),e.Sot=0===i?Number.EPSILON:i}if(n)return;e.Mot+=s;const i=s/e.Sot;t.xot(i,r),e.bot+=i}else t.xot(s),e.bot+=s},(t,s)=>t.Hg(s),t=>t.Qg(),!0,!1,null,t=>{t.bot=0,t.Mot=0}),yy("offsetAngle",(t,s,i,e,n)=>{t.Got(s)},(t,s)=>t.Oj(s),t=>t.Fj(),!1,!0),yy("offsetOpacity",(t,s,i,e,n)=>{s/=e.Tot?e.Tot:1;const r=t.SO()+s;if(0===e.Iot)r>1?e.Iot+=r-1:r<0&&(e.Iot+=r),t.Cot(s);else{const i=t.SO()+s;s>0&&e.Iot>0?i>1&&(e.Iot+=i-1):s>0&&e.Iot<0?(e.Iot+=s,e.Iot>0&&(t.Cot(e.Iot),e.Iot=0)):s<0&&e.Iot>0?(e.Iot+=s,e.Iot<0&&(t.Cot(e.Iot),e.Iot=0)):s<0&&e.Iot<0&&i<0&&(e.Iot+=i)}},(t,s)=>{t.bO(s)},t=>t.SO(),!1,!0,(t,s,i)=>{switch(t.Iot=0,t.frt.K7()){case"relative":{t.frt.Bit();const s=t.frt.mnt().ant().ont();let i=t.D$().SO(),e=i;for(const n of s){const s=n.YF();e=i+t.frt.Qnt(s),e=py.Kn(e,0,1)}t._ot=i-e,t._ot=Math.round(100*(t._ot+Number.EPSILON))/100,e=i;for(let i=s.length-1;i>=0;i--){const n=s[i].YF();e-=t.frt.Qnt(n),e=py.Kn(e,0,1)}t.Eot=e,t.Eot=Math.round(100*(t.Eot+Number.EPSILON))/100;break}}const e="relative"===t.frt.K7(),n=1===t.wot.XI();if((e||n)&&s.Sq()&&s.Fq()){const e=vy(s);let n=e[0].Hrt().Pot();n+=Sy(e[0],i,"offsetOpacity");for(let t=1;t<e.length;t++)n+=Sy(e[t],i,"offsetOpacity");t.Tot=0===n?1:n}},t=>{switch(t.frt.K7()){case"relative":{t.Iot=0;const s=t.D$();let i=s.SO();i=Math.round(100*(i+Number.EPSILON))/100,t.frt.jit().nst()?(s.bO(i+t._ot),t.$C=0):(s.bO(i-t.Eot),t.$C=t.Utt().crt());break}}}),yy("offsetOriginX",(t,s)=>t.Aot(s),(t,s)=>t.EU(s),t=>t._U(),!1),yy("offsetOriginY",(t,s)=>t.Rot(s),(t,s)=>t.RU(s),t=>t.AU(),!1),yy("offsetZElevation",(t,s)=>t.Oot(s),(t,s)=>t.sx(s),t=>t.tx(),!0),yy("offsetScaleX",(t,s,i,e)=>{if(0===s)return;const n=t.Vg()<0?-1:1;if(e.Fot+=s,"relative"===e.frt.K7()&&t.Sq()&&t.Iq()){const r=Sy(t,i,"offsetWidth"),h=isNaN(e.Dot)?i.yet():e.Dot,o=(h+r/(t.Hrt().Vrt()/h))*n*s;isNaN(e.Sot)&&gy.get("offsetWidth").fot(t,1,i,e,!0);const a=o/e.Sot;t.Iy(a,!0),e.bot+=a}else{const r=(isNaN(e.Dot)?i.yet():e.Dot)*n*s;t.Iy(r),e.bot+=r}},(t,s,i)=>{t.Xg(i.yet()*s)},(t,s)=>{const i=t.Vg()<0?-1:1;if(t.Iq()){const e=t.rq(),n=s.jit().mit(e.EJ());let r=NaN;if(n)r=e.Vg()/n.yet();else{const t=e.EJ().iz();r=t.wet()?e.Vg()/t.yet():1}return t.Vg()*i/(s.yet()*r)}return t.Vg()*i/s.yet()},!1,!1,null,t=>{t.bot=0,t.Dot=NaN,t.Fot=0}),yy("offsetScaleY",(t,s,i,e)=>{if(0===s)return;const n=t.Qg()<0?-1:1;if(e.Lot+=s,"relative"===e.frt.K7()&&t.Sq()&&t._q()){const r=Sy(t,i,"offsetHeight"),h=isNaN(e.Dot)?i.bet():e.Dot,o=(h+r/(t.Hrt().Jrt()/h))*n*s;isNaN(e.Sot)&&gy.get("offsetHeight").fot(t,1,i,e,!0);const a=o/e.Sot;t.xot(a,!0),e.bot+=a}else{const r=(isNaN(e.Dot)?i.bet():e.Dot)*n*s;t.xot(r),e.bot+=r}},(t,s,i)=>{t.Hg(i.bet()*s)},(t,s)=>{const i=t.Qg()<0?-1:1;if(t._q()){const e=t.rq(),n=s.jit().mit(e.EJ());let r=NaN;if(n)r=e.Qg()/n.bet();else{const t=e.EJ().iz();r=t.wet()?e.Qg()/t.bet():1}return t.Qg()*i/(s.bet()*r)}return t.Qg()*i/s.bet()},!1,!1,null,t=>{t.bot=0,t.Dot=NaN,t.Lot=0});class by extends py.Wit.Crt{constructor(t){super(t),this.$C=0,this.Iot=0,this._ot=0,this.Eot=0,this.Tot=NaN,this.Sot=NaN,this.bot=0,this.Dot=NaN,this.vot=0,this.Fot=0,this.Mot=0,this.Lot=0,this.kot=void 0,this.Not=void 0,this.$ot=null,this.Bot=null,this.Wot=null,this.jot=null,this.Vot=null,this.Hot=null,this.Uot=null,this.qot=null,this.zot=!1,this.Jot=!1,py.ke(this.frt.jit(),py.Yot)?this.wot=new py.Wit.Crt.Xot(this):this.wot=new py.Wit.Crt.Kot(this);const s=this.frt.pit();switch(this.frt.Kit()){case"world-instance":{const t=gy.get(s);this.$ot=t.pot,this.Bot=t.fot,this.Wot=t.dot,this.zot=t.round,this.Jot=t.mot,this.Vot=t.init,this.jot=t.reset;break}case"audio":this.Hot=t.Pht,this.Uot=t.Aht,this.qot=t.Rht,this.zot=!!t.Oht(),this.Jot=!1}}qn(){this.wot=null,this.$ot=null,this.Bot=null,this.Wot=null,this.jot=null,this.Vot=null,this.Hot=null,this.Uot=null,this.qot=null,super.qn()}Znt(){return this.wot.Znt()}Zot(){return this.$C}Qot(t){this.$C=t}Lst(){this.jot&&this.jot(this)}o7(){const t=this.wot.o7();if("number"==typeof t&&(this.$C=t),this.Vot){const t=this.D$(),s=this.frt.pnt();this.Vot(this,t,s)}}qst(){const t=this.wot.qst();"number"==typeof t&&(this.$C=t)}Xnt(){return this.Bht()}zet(){return this.Wht()!==this.Xnt()}Jet(){return!py.ee(this.Lht)&&this.Lht!==this.Xnt()}yrt(){this.wot.yrt()}xrt(t,s,i,e,n,r,h,o){return this.wot.xrt(t,s,i,e,n,r,h,o)}Grt(){this.wot.Grt()}Bht(){const t=this.Yht(),s=this.Jht(),i=this.D$(),e=this.frt.pnt();switch(this.frt.Kit()){case"behavior":case"plugin":return t.sot(s);case"effect":return t[s];case"instance-variable":return t.uot(s);case"world-instance":return this.$ot(i,e);case"audio":return this.Hot.call(this.Utt(),i,e)}}hot(t,s,i,e=!0){const n=this.Yht(),r=this.Jht(),h=this.D$(),o=this.frt.pnt();switch(this.frt.Kit()){case"behavior":n.tat(r,t);break;case"effect":n[r]+=t;break;case"instance-variable":n.sat(r,t);break;case"plugin":n.tat(r,t,this.Utt().Nrt());break;case"world-instance":this.Bot(h,t,o,this,!1,e);break;case"audio":this.Uot.call(this.Utt(),h,t,o,this)}}iat(t,s,i){let e=this.frt.Ktt();if(e="default"===e?"continuous":e,"discrete"===e&&!s)return;if("discrete"===e&&i){const t=this.frt.jit().YF();if(!this.frt.Vnt(t))return}const n=this.Yht(),r=this.Jht(),h=this.D$(),o=this.frt.pnt();switch(this.frt.Kit()){case"behavior":n.oot(r,t);break;case"effect":n[r]=t;break;case"instance-variable":n.cot(r,t);break;case"plugin":n.oot(r,t,this.Utt().Nrt());break;case"world-instance":this.Wot(h,t,o);break;case"audio":this.qot.call(this.Utt(),h,t,o)}}eat(t,s,i,e,n,r,h,o){this.wot.eat(t,s,i,e,n,r,h,o)}nat(t,s,i,e,n){"angle"===this.frt.Rnt()&&(t=py.tr(t));const r=(t.toString().split(".")[1]||"").length,h=this.Bht();let o;switch(o=0===r?this.zot?Math.round(h):this.Jot?"angle"===this.frt.Rnt()?py.Qn(Math.round(py.tr(h))):Number(py.toFixed(h,2)):h:this.zot?Number(py.toFixed(h,r)):(this.Jot,h),this.hot(o-h,s,i,!1),this.frt.pit()){case"offsetWidth":case"offsetScaleX":{const t=this.D$(),s=t.Vg(),i=Number(py.toFixed(s,2));t.Iy(i-s);break}case"offsetHeight":case"offsetScaleY":{const t=this.D$(),s=t.Qg(),i=Number(py.toFixed(s,2));t.xot(i-s);break}}}e5(){return Object.assign(super.e5(),{v:this.$C,a:this.Iot,fod:this._ot,bod:this.Eot,of:this.Tot,sf:this.Sot,armorf:this.kot,armandf:this.Not,ca:this.bot,os:this.Dot,awo:this.vot,aho:this.Mot,asxo:this.Fot,asyo:this.Lot})}n5(t){t&&(super.n5(t),this.$C=t.v,this.Iot=t.a,this._ot=py.te(t.fod)?t.fod:0,this.Eot=py.te(t.bod)?t.bod:0,this.Tot=py.te(t.of)?t.of:NaN,this.Sot=py.te(t.sf)?t.sf:NaN,this.kot=py.te(t.armorf)?t.armorf:void 0,this.Not=py.te(t.armandf)?t.armandf:void 0,this.bot=py.te(t.ca)?t.ca:0,this.Dot=py.te(t.os)?t.os:NaN,this.vot=py.te(t.awo)?t.awo:0,this.Mot=py.te(t.aho)?t.aho:0,this.Fot=py.te(t.asxo)?t.asxo:0,this.Lot=py.te(t.asyo)?t.asyo:0)}Wrt(t){this.Dot=t}qrt(){return this.bot}Qrt(){return this.vot}sht(){return this.Mot}Zrt(){return this.Fot}tht(){return this.Lot}}py.Wit.Crt._rt=by}{const My=self.Cs;class xy{constructor(t){this.rat=!1,this.iht=0,this.hat=!1,this.oat=!1,this.Dit=t;for(let t=0,s=this.Dit.length;t<s;t++)this.Dit[t].fnt(this)}dit(){return this.Dit}aat(){this.rat=!0}lat(){return this.rat}urt(t){this.iht=t}_nt(){return this.iht}uat(t){this.hat=t}cat(){return this.hat}Xst(t){this.oat=t}fat(){return this.oat}Bf(){this.rat=!1,this.iht=0,this.hat=!1,this.oat=!1}}class Gy{constructor(t){this.dat=t}qn(){this.dat=null}XI(){return 0}o7(){const t=this.dat;return this.dat.DJ(),t.Uht(()=>t.Vht(()=>0,()=>t.Utt().crt()),()=>{})}qst(){}Znt(){switch(this.dat,this.dat.DJ().K7()){case"relative":return!1;case"absolute":return!0}}yrt(){this.dat;const t=this.dat.DJ(),s=t.pit();switch(t.K7()){case"relative":break;case"absolute":if(t.cnt())t.dnt().Bf();else{const i=t.jit(),e=t.EJ(),n=t.Utt(),r=i.Htt(e,n,s,t);r&&r.length>1&&new xy(r)}}}xrt(t,s,i,e,n,r,h,o){const a=this.dat,l=this.dat.DJ();switch(l.K7()){case"relative":{const h=a.Zot();a.hot(s-h,i,e),r&&this.eat(t,i,e,n,h,s),a.Qot(s);break}case"absolute":{const t=l.jit(),i=l.pnt();if(l.EJ(),l.Utt(),l.cnt()){const e=l.dnt(),n=e.dit(),r=a.Kht(n,!0),u=a.Zht(t,t.YF(),r);if(u){const t=i.Zst(),n=u.time-t;if(0===n)e.Xst(h),e.uat(o),e.aat(),e.urt(e._nt()+s);else{if(n<0)return;const t=l.Qnt(n);e.Xst(h),e.uat(o),e.aat(),e.urt(e._nt()+(s-t))}}}else a.iat(s,o,h);break}}}Grt(){const t=this.dat,s=this.dat.DJ();switch(s.K7()){case"relative":break;case"absolute":if(s.cnt()){const i=s.dnt();i.lat()&&t.iat(i._nt(),i.cat(),i.fat())}}}eat(t,s,i,e,n,r){const h=this.dat;e||(s&&t===s.YF()?h.nat(s.r9(),s,i):i&&t===i.YF()?h.nat(i.r9(),s,i):r-n===0&&h.nat(s.r9(),s,i))}}My.Wit.Crt.Kot=Gy}{const Ty=self.Cs;class Iy{constructor(t){this.dat=t}qn(){this.dat=null}XI(){return 1}o7(){const t=this.dat;return t.Nht(!0),this.zht(t.Wht())}qst(){const t=this.dat;if(t.Wht()!==t.Hht())return t.Nht(!0),this.zht(t.Hht())}Znt(){return!1}yrt(){}xrt(t,s,i,e,n,r,h,o){const a=this.dat,l=a.Zot();switch(a.DJ().K7()){case"relative":a.hot(s-l,i,e),r&&this.eat(t,i,e,n,l,s,!1,h);break;case"absolute":a.$ht()?(a.Nht(!1),a.hot(l,i,e)):0===t&&0===a.DJ().jit().uJ()?a.iat(s,!0,!1):(a.hot(s-l,i,e),r&&this.eat(t,i,e,n,l,s,this.pat(),h))}a.Qot(s)}Grt(){}zht(t){return t-this.dat.Xnt()}pat(){const t=this.dat,s=t.D$().EJ(),i=t.DJ().aB().Vtt();let e=0;for(const t of i.D8())0===t.XI()?t.W8(s)&&e++:1===t.XI()&&t.EJ()===s&&e++;return e<=1}eat(t,s,i,e,n,r,h,o){const a=this.dat;e?s&&t===s.YF()?a.nat(s.r9(),s,i,h,o):i&&t===i.YF()?a.nat(i.r9(),s,i,h,o):i||a.nat(s.r9(),s,i,h,o):s&&t===s.YF()?a.nat(s.r9(),s,i,h,o):i&&t===i.YF()?a.nat(i.r9(),s,i,h,o):r-n===0&&a.nat(s.r9(),s,i,h,o)}}Ty.Wit.Crt.Xot=Iy}{const Cy=self.Cs,_y=self.Vu;Cy.Wit.wrt=class{constructor(){}static lot(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.sot(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.uot(t)}return n!==i}static vc(t,s,i,e){if(!i){let t=e.mnt();return t=e.Bit().Krt(t),t.r9()}let n=e.Ktt();if("default"===n&&(n="continuous"),"combo"===e.Rnt()&&(n="discrete"),"discrete"===n)return s.r9();if("continuous"===n||"step"===n){const r=e.jit().Ytt();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.r9(),o=i.r9(),a=s.e9("cubic-bezier"),l=i.e9("cubic-bezier"),u=a&&a.mat()&&l&&l.gat();if(!u&&h===o)return h;const c=s.YF(),f=i.YF();"step"===n&&0!==r&&(t=Cy.Kn(t,c,f));const d=Cy.normalize(t,c,f),p=s.lrt();let m;if(u){const t=f-c;m=_y.hc(p)(t*d,0,1,t),m=_y.hc("cubicbezier")(m,h,h+a.a9(),o+l.c9(),o)}else m=_y.hc(p)((f-c)*d,h,o-h,f-c);return"integer"===e.Rnt()?Math.floor(m):m}}}}{const Ey=self.Cs;Ey.Wit.Srt=class{constructor(){}static lot(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.sot(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.uot(t)}return n!==i}static vc(t,s,i,e){if(!i){let t=e.mnt();return t=e.Bit().Krt(t),t.r9()}let n=e.Ktt();if("default"===n&&(n="continuous"),"combo"===e.Rnt()&&(n="discrete"),"discrete"===n)return s.r9();if("continuous"===n||"step"===n){const r=e.jit().Ytt();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.YF(),o=i.YF(),a=s.r9(),l=i.r9();"step"===n&&0!==r&&(t=Ey.Kn(t,h,o));const u=s.e9("angle");if(!u){if(a===l)return a;const i=Ey.normalize(t,h,o),e=self.Vu.hc(s.lrt());return Ey.ur(a,l,e(i,0,1,1))}{const i=u.yat();if(a===l&&0===i)return a;const e=Ey.normalize(t,h,o),n=self.Vu.hc(s.lrt())(e,0,1,1);switch(u.wat()){case"closest":return Ey.ur(a,l,n,i);case"clockwise":return Ey.cr(a,l,n,i);case"anti-clockwise":return Ey.dr(a,l,n,i)}}}}}}{const Py=self.Cs;Py.Wit.vrt=class{constructor(){}static lot(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.sot(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.uot(t)}return!!n!=!!i}static vc(t,s,i,e){if(!i){let t=e.mnt();return t=e.Bit().Krt(t),t.r9()?1:0}return s.r9()?1:0}}}{const Ay=self.Cs,Ry=[0,0,0],Oy=[0,0,0],Fy=[0,0,0];Ay.Wit.brt=class{constructor(){}static lot(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.sot(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.uot(t)}return Array.isArray(i)?(Ry[0]=i[0],Ry[1]=i[1],Ry[2]=i[2]):(Fy.oa(i),Ry[0]=Math.floor(255*Fy.No()),Ry[1]=Math.floor(255*Fy.$o()),Ry[2]=Math.floor(255*Fy.Bo())),Array.isArray(n)?(Oy[0]=n[0],Oy[1]=n[1],Oy[2]=n[2]):(Fy.oa(n),Oy[0]=Math.floor(255*Fy.No()),Oy[1]=Math.floor(255*Fy.$o()),Oy[2]=Math.floor(255*Fy.Bo())),Ry[0]!==Oy[0]||Ry[1]!==Oy[1]||Ry[2]!==Oy[2]}static vc(t,s,i,e){if(!i){let t=e.mnt();t=e.Bit().Krt(t);const s=t.r9();return Ry[0]=s[0],Ry[1]=s[1],Ry[2]=s[2],Ry}let n=e.Ktt();if("default"===n&&(n="continuous"),"discrete"===n){const t=s.r9();return Ry[0]=t[0],Ry[1]=t[1],Ry[2]=t[2],Ry}if("continuous"===n||"step"===n){const r=e.jit().Ytt();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.YF(),o=i.YF(),a=s.r9(),l=i.r9();"step"===n&&0!==r&&(t=Ay.Kn(t,h,o));const u=Ay.normalize(t,h,o),c=s.lrt(),f=a[0],d=a[1],p=a[2],m=l[0],g=l[1],y=l[2],w=self.Vu.hc(c),S=o-h,v=S*u;return Ry[0]=f===m?f:w(v,f,m-f,S),Ry[1]=d===g?d:w(v,d,g-d,S),Ry[2]=p===y?p:w(v,p,y-p,S),Ry}}}}{const Dy=self.Cs;Dy.Wit.Mrt=class{constructor(){}static lot(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.sot(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.uot(t)}return n!==i}static vc(t,s,i,e){if(!i){let t=e.mnt();return t=e.Bit().Krt(t),t.r9()}return s.r9()}}}{const Ly=self.Cs;Ly.j6=class{constructor(){this.Sat=new Map}qn(){for(const t of this.Sat.values())t.qn();this.Sat.clear(),this.Sat=null}Bu(t){const s=new Ly.vat(t),i=s.Pc();this.Sat.set(i,s)}qs(t){return this.Sat.get(t)}Ltt(){return 0}static bat(t,s,i,e){if(s)for(const n of s)Ly.j6.Mat("create",n,t,i,e)}static xat(t,s,i,e){if(s)for(const n of s)Ly.j6.Mat("create-including-disabled",n,t,i,e)}static Gat(t,s,i,e){t.length?s.forEach((s,i)=>{t[i].n5(s)}):s.forEach(s=>{Ly.j6.Mat("load",s,t,i,e)})}static Mat(t,s,i,e,n){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,n);break;case"create":case"create-including-disabled":r=new e(s,n)}else if("object"==typeof e){const i=s[e.Tat],h=e.map.get(i);switch(t){case"load":r=new h(null,n);break;case"create":case"create-including-disabled":r=new h(s,n)}}switch(t){case"load":r.n5(s),i.push(r);break;case"create":if("function"==typeof r.fet&&!r.fet())return r.qn();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const ky=self.Cs,Ny=0,$y=1,By=2,Wy=3,jy=4,Vy=5,Hy=6,Uy=7,qy=8,zy=9,Jy=10,Yy=11;ky.vat=class{constructor(t){this.Yn="",this.Yst=NaN,this.Iat=0,this.Cat="default",this._at="default",this.Eat=!1,this.Pat=!1,this.Aat=1,this.xit=null,this.Rat="",this.Oat=!1,this.Fat=!0,t&&(this.Yn=t[0],this.Yst=t[1],this.Iat=t[2],this.Cat=t[3],this._at=t[4],this.Eat=!!t[6],this.Pat=!!t[7],this.Aat=t[8],this.Rat=t[9],this.Oat=!!t[10],this.Fat=!!t[11],this.xit=new ky.Dat(t[5],this))}qn(){this.xit.qn(),this.xit=null}Wtt(){return this.xit||(this.xit=new ky.Dat(null,this)),this.xit}Pc(){return this.Yn}nX(t){this.Yn=t}uJ(){return this.Yst}lJ(t){this.Yst=t}Ytt(){return this.Iat}Xtt(t){this.Iat=t}Ktt(){return this.Cat}Ztt(t){this.Cat=t}K7(){return this._at}Qtt(t){this._at=t}fJ(){return this.Eat}cJ(t){this.Eat=t}pJ(){return this.Pat}dJ(t){this.Pat=t}_z(){return this.Aat}tst(t){this.Aat=t}S7(){return this.Rat}sst(){return this.Oat}ist(){return this.Fat}e5(){return{trackDataJson:this.xit.e5(),name:this.Yn,totalTime:this.Yst,step:this.Iat,interpolationMode:this.Cat,resultMode:this._at,loop:this.Eat,pingPong:this.Pat,repeatCount:this.Aat,startOnLayout:this.Rat,transformWithSceneGraph:!!this.Oat,useSystemTimescale:this.Fat}}n5(t){t&&(this.Wtt().n5(t.trackDataJson),this.Yn=t.name,this.Yst=t.totalTime,this.Iat=t.step,this.Cat=t.interpolationMode,this._at=t.resultMode,this.Eat=t.loop,this.Pat=t.pingPong,this.Aat=t.repeatCount,this.Rat=t.startOnLayout,this.Oat=!!t.transformWithSceneGraph,this.Fat=!!t.useSystemTimescale)}}}{const Xy=self.Cs,Ky=0,Zy=1,Qy=2,tw=1,sw=2,iw=3,ew=4,rw=5,hw=6,ow=7,aw=0,lw=1,uw=8,cw=0,fw=1,dw=9,pw=10;class mw{constructor(t,s){this.xit=s,this.Lat=null,this.kat=null,this.Git=NaN,this.Tit=NaN,this.Cat="default",this._at="default",this.du=!1,this.Nat=null,this.nnt=null,this.Wc="",this.$at=null,this.Bat=0,this.Wat=this.xit.Jtt().uJ(),this.zc=0,this.Yn="",t&&(t[0]&&(this.Lat=t[0],this.Git=t[0][2],this.Tit=t[0][1]),this.Cat=t[1],this._at=t[2],this.du=!!t[3],t[6]&&(this.Wc=t[6]),t[7]&&(this.$at=t[7],this.Bat=t[7][0],this.Wat=t[7][1]),t[8]&&(this.kat=t[8]),t[8]&&(this.kat=t[8]),t[9]&&(this.zc=t[9]),t[10]&&(this.Yn=t[10]),this.Nat=new Xy.jat(t[4],this),this.nnt=new Xy.Vat(t[5],this))}qn(){this.Lat=null,this.xit=null,this.Nat&&(this.Nat.qn(),this.Nat=null),this.nnt&&(this.nnt.qn(),this.nnt=null),this.$at=null}Wtt(){return this.xit}tit(){return this.Nat||(this.Nat=new Xy.jat(null,this)),this.Nat}Bit(){return this.nnt||(this.nnt=new Xy.Vat(null,this)),this.nnt}Hat(){return this.Lat}qit(){return this.Tit}pet(t){this.Tit=t}Uit(){return this.Git}let(t){this.Git=t}Ktt(){return this.Cat}Ztt(t){this.Cat=t}K7(){return this._at}Qtt(t){this._at=t}fet(){return this.du}det(t){this.du=!!t}OJ(){return this.Wc}Zst(){return this.Bat}uet(){return this.Wat}cet(t){this.Wat=t}yet(){return this.kat[0]}met(t){this.kat||(this.kat=[]),this.kat[0]=t}bet(){return this.kat||(this.kat=[]),this.kat[1]}vet(t){this.kat||(this.kat=[]),this.kat[1]=t}XI(){return this.zc}Pc(){return this.Yn}e5(){return{keyframeDataJson:this.Nat.e5(),propertyTrackDataJson:this.nnt.e5(),instanceData:this.Lat,additionalInstanceData:this.kat,instanceUid:this.Git,objectClassIndex:this.Tit,interpolationMode:this.Cat,resultMode:this._at,enabled:this.du,id:this.Wc,nestedData:this.$at,type:this.zc,name:this.Yn}}n5(t){t&&(this.Lat=t.instanceData,this.Git=t.instanceUid,this.Tit=t.objectClassIndex,this.Cat=t.interpolationMode,this._at=t.resultMode,this.du=t.enabled,this.Wc=t.id,this.zc=t.type?t.type:0,this.Yn=t.name?t.name:"",this.Wat=this.xit.Jtt().uJ(),t.nestedData&&(this.$at=t.nestedData,this.Bat=this.$at[0],this.Wat=this.$at[1]),t.additionalInstanceData&&(this.kat=t.additionalInstanceData),this.tit().n5(t.keyframeDataJson),this.Bit().n5(t.propertyTrackDataJson))}}Xy.Dat=class{constructor(t,s){this.ett=s,this.Uat=[],Xy.j6.bat(this.Uat,t,mw,this)}qn(){this.ett=null;for(const t of this.Uat)t.qn();Xy.bh(this.Uat),this.Uat=null}Jtt(){return this.ett}rit(){const t=new mw(null,this);return this.Uat.push(t),t}qat(t){return t.tit().Fit()[0]}zat(t){return t.tit().Fit().at(-1)}Det(t,s){const i=s.tit().Fit(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.YF()===t)return e}}Jat(t,s){const i=s.tit().Fit(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.YF()>t)return e}}Oet(t,s){const i=s.tit().Fit(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.YF()>=t)return e}}Aet(t,s){const i=s.tit().Fit();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.YF()<=t)return e}}*Btt(){for(const t of this.Uat)yield t}e5(){return{trackDataItemsJson:this.Uat.map(t=>t.e5())}}n5(t){t&&Xy.j6.Gat(this.Uat,t.trackDataItemsJson,mw,this)}}}{const gw=self.Cs,yw=0,ww=0,Sw=1,vw=2,bw=3,Mw=4,xw=5,Gw=6,Tw=7,Iw=8,Cw=9;class _w{constructor(t,s){this.nnt=s,this.Yat="",this.Xat=null,this.Fht=null,this.zc=null,this.Kat=NaN,this.Zat=NaN,this.Cat="default",this._at="default",this.du=!1,this.Qat=null,this.tlt=!0,t&&(this.Yat=t[0][0],this.Xat=t[0].slice(1),this.Fht=t[1],this.zc=t[2],this.Kat=t[3],this.Zat=t[4],this.Cat=t[5],this._at=t[6],this.du=!!t[7],this.Qat=new gw.slt(t[8],this),this.tlt=t[9])}qn(){this.Qat.qn(),this.Qat=null,this.nnt=null,this.Xat=null}Bit(){return this.nnt}ant(){return this.Qat||(this.Qat=new gw.slt(null,this)),this.Qat}Kit(){return this.Yat}xnt(t){this.Yat=t}Tnt(){return this.Xat}Cnt(t){this.Xat=t}Ent(){return this.Fht}Ant(t){this.Fht=t}XI(){return this.zc}Fnt(t){this.zc=t}knt(){return this.Kat}Nnt(t){this.Kat=t}$nt(){return this.Zat}Bnt(t){this.Zat=t}Ktt(){return this.Cat}Ztt(t){this.Cat=t}K7(){return this._at}Qtt(t){this._at=t}fet(){return this.du}det(t){this.du=!!t}jnt(){return!!this.tlt}e5(){return{propertyKeyframeDataJson:this.Qat.e5(),sourceAdapterId:this.Yat,sourceAdapterArguments:this.Xat,property:this.Fht,type:this.zc,min:this.Kat,max:this.Zat,interpolationMode:this.Cat,resultMode:this._at,enabled:this.du,canHavePropertyKeyframes:this.tlt}}n5(t){t&&(this.Yat=t.sourceAdapterId,this.Xat=t.sourceAdapterArguments,this.Fht=t.property,this.zc=t.type,this.Kat=t.min,this.Zat=t.max,this.Cat=t.interpolationMode,this._at=t.resultMode,this.du=t.enabled,this.tlt=t.canHavePropertyKeyframes,this.ant().n5(t.propertyKeyframeDataJson))}}gw.Vat=class{constructor(t,s){this.Mit=s,this.ilt=[],gw.j6.bat(this.ilt,t,_w,this)}qn(){this.Mit=null;for(const t of this.ilt)t.qn();gw.bh(this.ilt),this.ilt=null}Qst(){return this.Mit}jet(){const t=new _w(null,this);return this.ilt.push(t),t}Lnt(t){return t.ant().ont()[0]}Krt(t){return t.ant().ont().at(-1)}Vnt(t,s){const i=s.ant().ont(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.YF()===t)return e}}qnt(t,s){const i=s.ant().ont(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.YF()>t)return e}}znt(t,s){const i=s.ant().ont(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.YF()>=t)return e}}Hnt(t,s){const i=s.ant().ont();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.YF()<=t)return e}}*$it(){for(const t of this.ilt)yield t}e5(){return{propertyTrackDataItemsJson:this.ilt.map(t=>t.e5())}}n5(t){t&&gw.j6.Gat(this.ilt,t.propertyTrackDataItemsJson,_w,this)}}}{const Ew=self.Cs,Pw=0,Aw=1,Rw=2,Ow=3;class Fw{constructor(t,s){if(this.Nat=s,this.UD=-1,this.elt="noease",this.nlt=!1,this.Ptt=null,this.rlt=null,!t)return;this.UD=t[0],this.elt=t[1],this.nlt=!!t[2];const i=t[3];this.Ptt=i?i.split(" "):[],this.rlt=new Set(this.Ptt.map(t=>t.toLowerCase())),this.hlt=null,this.olt=null}qn(){this.Nat=null,Ew.bh(this.Ptt),this.Ptt=null,this.rlt.clear(),this.rlt=null,this.hlt=null}tit(){return this.Nat}V7(){return this.hlt}llt(t){this.hlt=t}Fet(){return this.olt}ult(t){this.olt=t}YF(){return this.UD}aJ(t){this.UD=t,this.Nat.clt()}lrt(){return this.elt}_J(t){this.elt=t}fet(){return this.nlt}det(t){this.nlt=!!t}yJ(){return this.Ptt}rst(t){this.Ptt=t?t.split(" "):[],this.rlt=new Set(this.Ptt.map(t=>t.toLowerCase()))}flt(){return this.rlt}wit(t){return this.rlt.has(t.toLowerCase())}e5(){return{time:this.UD,ease:this.elt,enable:this.nlt,tags:this.Ptt}}n5(t){t&&(this.UD=t.time,this.elt=t.ease,this.nlt=t.enable,this.Ptt=t.tags,this.rlt=new Set(this.Ptt.map(t=>t.toLowerCase())))}}Ew.jat=class{constructor(t,s){this.Mit=s,this.Oit=[],Ew.j6.bat(this.Oit,t,Fw,this),this.clt()}qn(){this.Mit=null;for(const t of this.Oit)t.qn();Ew.bh(this.Oit),this.Oit=null}clt(){this.Oit.sort((t,s)=>t.YF()-s.YF());for(let t=0;t<this.Oit.length;t++){const s=this.Oit[t];s.llt(this.Oit[t+1]),s.ult(this.Oit[t-1])}}Qst(){return this.Mit}dlt(){return this.Oit.length}Fit(){return this.Oit}Bet(){const t=new Fw(null,this);return this.Oit.push(t),this.clt(),t}Het(t){for(const s of this.Oit){if(!t(s))continue;const i=this.Oit.indexOf(s);-1!==i&&(s.qn(),this.Oit.splice(i,1))}this.plt(),this.clt()}plt(){this.Oit.sort((t,s)=>t.YF()-s.YF())}tnt(t){return this.Oit.indexOf(t)}snt(t){return this.Oit[t]}*mlt(){for(const t of this.Oit)yield t}*glt(){for(let t=this.Oit.length-1;t>=0;t--)yield this.Oit[t]}e5(){return{keyframeDataItemsJson:this.Oit.map(t=>t.e5())}}n5(t){t&&(Ew.j6.Gat(this.Oit,t.keyframeDataItemsJson,Fw,this),this.clt())}}}{const Dw=self.Cs,Lw=0,kw=0,Nw=1,$w=2,Bw=1,Ww=2,jw=3,Vw=4,Hw=5;class Uw{constructor(t,s){this.Qat=s,this.iht=null,this.ylt=null,this.zc="",this.UD=NaN,this.elt="noease",this.nlt=!1,this.wlt=null,this.Slt=void 0,this.vlt="line",t&&(this.iht=t[0][0],this.ylt=t[0][1],this.zc=t[0][2],this.UD=t[1],this.elt=t[2],this.nlt=!!t[3],this.vlt=t[5],this.wlt=null,t[4]&&(this.wlt=new Dw.blt(t[4],this)),this.hlt=null,this.Mlt=null)}qn(){this.Qat=null,this.wlt&&(this.wlt.qn(),this.wlt=null),this.hlt=null,this.Mlt=null}xlt(){return this.wlt}llt(t){this.hlt=t}V7(){return this.hlt}Glt(t){this.Mlt=t}H7(){return this.Mlt}_nt(){return this.iht}urt(t){"color"===this.zc&&Dw.te(t)?(this.iht[0]=Dw.Pr(t),this.iht[1]=Dw.Ar(t),this.iht[2]=Dw.Rr(t)):this.iht=t}jht(){return this.ylt}hrt(t){"color"===this.zc&&Dw.te(t)?(this.ylt[0]=Dw.Pr(t),this.ylt[1]=Dw.Ar(t),this.ylt[2]=Dw.Rr(t)):this.ylt=t}r9(){const t=this.Qat.mnt().K7();return"relative"===t?this._nt():"absolute"===t?this.jht():void 0}XI(){return this.zc}Fnt(t){this.zc=t}YF(){return this.UD}aJ(t){this.UD=t,this.Qat.Tlt()}lrt(){return this.elt}_J(t){this.elt=t}fet(){return this.nlt}det(t){this.nlt=!!t}U7(){return this.vlt}e9(t){if(!this.wlt)return;if(this.Slt||null===this.Slt)return this.Slt;const s=this.wlt.Ilt();if(!s)return this.Slt=null,this.Slt;const i=s.length;for(let e=0;e<i;e++){const i=s[e];if(i.OJ()===t)return this.Slt=i,this.Slt}return this.Slt=null,this.Slt}e5(){const t=this.wlt;return{addonDataJson:t?t.e5():t,value:this.iht,aValue:this.ylt,type:this.zc,time:this.UD,ease:this.elt,enable:this.nlt}}n5(t){t&&(t.addonDataJson&&this.wlt.Clt(t.addonDataJson),this.iht=t.value,this.ylt=t.aValue,this.zc=t.type,this.UD=t.time,this.elt=t.ease,this.nlt=t.enable)}}Dw.slt=class{constructor(t,s){this.ent=s,this.hnt=[],this._lt=[],Dw.j6.bat(this.hnt,t,Uw,this),Dw.j6.xat(this._lt,t,Uw,this),this.Tlt()}qn(){this.ent=null;for(const t of this.hnt)t.qn();Dw.bh(this.hnt),this.hnt=null;for(const t of this._lt)t.qn();Dw.bh(this._lt),this._lt=null}Tlt(){let t=this.hnt;t.sort((t,s)=>t.YF()-s.YF());for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.llt(t[s+1]),s-1>=0&&i.Glt(t[s-1])}t=this._lt,t.sort((t,s)=>t.YF()-s.YF());for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.llt(t[s+1]),s-1>=0&&i.Glt(t[s-1])}}nrt(){const t=new Uw(null,this);return this.hnt.push(t),this.Tlt(),t}rrt(t){for(const s of this.hnt){if(!t(s))continue;const i=this.hnt.indexOf(s);-1!==i&&(s.qn(),this.hnt.splice(i,1))}this.Elt(),this.Tlt()}Elt(){this.hnt.sort((t,s)=>t.YF()-s.YF())}mnt(){return this.ent}Plt(){return this.hnt.length}Krt(){return this.hnt[this.hnt.length-1]}ont(){return this.hnt}j7(){return this._lt}*Alt(){for(const t of this.hnt)yield t}*Rlt(){for(let t=this.hnt.length-1;t>=0;t--)yield this.hnt[t]}e5(){const t=this.hnt,s=this._lt;return{propertyKeyframeDataItemsJson:t.map(t=>t.e5()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.e5())}}n5(t){t&&(Dw.j6.Gat(this.hnt,t.propertyKeyframeDataItemsJson,Uw,this),Dw.j6.Gat(this._lt,t.propertyKeyframeDataItemsIncludingDisabledJson,Uw,this),this.Tlt())}}}{const qw=self.Cs,zw=0,Jw=1;class Yw{constructor(t,s){this.wlt=s,this.Wc=t[0],this.Olt=t[1]}qn(){this.wlt=null,this.Olt=null}xlt(){return this.wlt}OJ(){return this.Wc}e5(){return{id:this.Wc,data:this.Olt}}n5(t){t&&(this.Wc=t.id,this.Olt=t.data)}}const Xw=0,Kw=1,Zw=2,Qw=3;class tS extends Yw{constructor(t,s){super(t,s),this.Flt=this.Olt[0],this.Dlt=!!this.Olt[1],this.Llt=this.Olt[2],this.klt=!!this.Olt[3]}qn(){super.qn()}a9(){return this.Flt}mat(){return this.Dlt}c9(){return this.Llt}gat(){return this.klt}e5(){return Object.assign(super.e5(),{startAnchor:this.Flt,startEnable:!!this.Dlt,endAnchor:this.Llt,endEnable:!!this.klt})}n5(t){t&&(super.n5(t),this.Flt=t.startAnchor,this.Dlt=!!t.startEnable,this.Llt=t.endAnchor,this.klt=!!t.endEnable)}}const sS=0,iS=1;class eS extends Yw{constructor(t,s){super(t,s),this.Nlt=this.Olt[0],this.$lt=this.Olt[1]}qn(){super.qn()}wat(){return this.Nlt}yat(){return this.$lt}e5(){return Object.assign(super.e5(),{direction:this.Nlt,revolutions:this.$lt})}n5(t){t&&(super.n5(t),this.Nlt=t.direction,this.$lt=t.revolutions)}}qw.blt=class{constructor(t,s){this.Blt=s,this.Wlt=[],qw.j6.bat(this.Wlt,t,{Tat:0,map:new Map([["cubic-bezier",tS],["angle",eS]])},this)}qn(){this.Blt=null;for(const t of this.Wlt)t.qn();qw.bh(this.Wlt),this.Wlt=null}jlt(){return this.Blt}Ilt(){return this.Wlt}*Vlt(){for(const t of this.Wlt)yield t}e5(){return{addonDataItemsJson:this.Wlt.map(t=>t.e5())}}n5(t){t&&qw.j6.Gat(this.Wlt,t.addonDataItemsJson,{Tat:"id",map:new Map([["cubic-bezier",tS],["angle",eS]])},this)}}}{const nS=self.Cs,rS="start-value",hS="current-state",oS=0,aS=1;let lS=0;nS.Yot=class extends nS.b8{constructor(t,s){super("tween-"+lS++,t,s),this.Wc="",this.Hlt=!1,this.Ult="start-value",this.Iit=null,this.qlt=null,this.zlt=null,this.Jlt=null,this.int=null,this.Ylt=null}Ntt(t){const s=nS.Un(nS.Event,"tweenstatereleased");s.Xlt=this,t.dispatchEvent(s)}XI(){return 1}ltt(){for(const t of this.ett.Wtt().Btt())this.ntt.push(nS.Klt.UT(this,t));this.int=this.ntt[0]}nit(){const t=this.ett.Wtt().rit(),s=nS.Klt.UT(this,t);return this.ntt.push(s),this.Zlt(),s}Zlt(){this.int=this.ntt[0]}DJ(t){return this.int.dit()[0]}Ont(t){this.Qlt=t}EJ(){const t=this.N7();if(!t||!t.length)return;const s=t[0];if(this.int=s,!s)return;const i=s.EJ();return s.Hit()?i:void 0}tut(t){this.Jlt=t}sut(t){this.zlt||(this.zlt=[]),this.zlt.push(t)}iut(t){this.qlt||(this.qlt=[]),this.qlt.push(t)}eut(t){if(!this.zlt)return;const s=this.zlt.indexOf(t);-1!==s&&this.zlt.splice(s,1)}nut(t){if(!this.qlt)return;const s=this.qlt.indexOf(t);-1!==s&&this.qlt.splice(s,1)}rut(t,s){for(const i of this.ntt)for(const e of i.Dit){if(e.pit()!==s)continue;const i=e.Bit(),n=e.mnt(),r=i.Lnt(n);r.urt(t),r.hrt(t)}}hut(t){for(const s of this.ntt)for(const i of s.Dit)if(i.pit()===t)return i}out(t){let s=!1;for(const i of t){const t=this.hut(i);t&&(this.rut(t.Xnt(),i),s=!0)}if(s){if(this.nst()){const t=this.uJ()-this.YF();this.lJ(t);for(const s of this.ntt)s.cet(t);this.Est(0)}else{const t=this.YF();this.lJ(t);for(const s of this.ntt)s.cet(t);this.Est(t)}this.Pst()}}aut(t,s){const i=this.hut(s);if(!i)return;const e=i.Bit(),n=i.mnt(),r=e.Krt(n);r.aJ(this.uJ()),r.urt(t),r.hrt(t)}lut(t){this.Wc=t}OJ(){return this.Wc}uut(t){this.Ult=t}cut(){return this.Ult}RJ(t){this.Hlt=t}AJ(){return this.Hlt}lst(){if(this.zlt)for(const t of this.zlt)t(this);if(!this.m7())for(const t of this.ntt)t.Jet()}yst(){this.Gtt=this.$c.kN()}y7(){if(!this.Ctt&&(this.Ctt=!0,this.qlt))for(const t of this.qlt)t(this)}aJ(t){this.fut(),super.aJ(t)}Dst(t){nS.te(t)||(t=this.uJ()),t<0?this.ftt=0:t>=this.uJ()?this.ftt=this.uJ():this.ftt=t,this.int.Lst()}o7(t){if(!this.g7()&&"current-state"===this.cut())for(const t of this.ntt)t.zet();super.o7(t)}rJ(t=!1){if(super.rJ(t),!this.m7())for(const t of this.ntt)t.qet()}Bf(t=!0,s=!1){this.fut(),super.Bf(t,s)}fut(){for(const t of this.ntt){const s=t=>{const s=t.YF(),i=this.uJ();return 0!==s&&s!==i};t.Vet(s),t.Uet(s)}}r8(){if(this.eJ())return!0;const t=this.EJ();return!(t&&t.fH().WQ()||(this.itt.e7(this),this.Hst(),0))}c7(t,s,i){if(this.Iit||(this.Iit=this.EJ()),!this.Iit||this.Iit.SY())return this.rJ(!0),void this.yst();const e=this.Iit.WN();if(-1!==e&&(t=i*e),0===t&&0===this.Ett)return;this.Ett=t;const n=this.ftt+this.dtt+t*this.ptt,r=this.ett.Yst;n<0?(this.ftt=0,this.dtt=-n):n>=r?(this.ftt=r,this.dtt=this.ftt-n):(this.ftt=n,this.dtt=0);let h=!1,o=!1;const a=this.fJ(),l=this.pJ();if(a||l?a&&!l?this.ptt>0?this.ftt>=r&&(this.Dst(0),this.dut(nS.yut.gut.Q$.mut),this.dut(nS.yut.gut.Q$.wut),o=!0):this.ftt<=0&&(this.Dst(r),this.dut(nS.yut.gut.Q$.mut),this.dut(nS.yut.gut.Q$.wut),o=!0):!a&&l?this.ptt>0?this.ftt>=r&&(this.Est(r),this.mJ(-1*this.gJ()),o=!0,1===this.mtt?this.ytt<this._z()?(this.ytt++,this.dut(nS.yut.gut.Q$.mut),this.dut(nS.yut.gut.Q$.wut),this.dut(nS.yut.gut.Q$.Sut),this.dut(nS.yut.gut.Q$.vut),this.IsPlaying()?this.mtt=0:this.gtt=0):(this.dut(nS.yut.gut.Q$.Sut),this.dut(nS.yut.gut.Q$.vut),h=!0):0===this.mtt&&(this.dut(nS.yut.gut.Q$.Sut),this.dut(nS.yut.gut.Q$.vut),this.IsPlaying()?this.mtt=1:this.gtt=1)):this.ftt<=0&&(this.Est(0),this.mJ(-1*this.gJ()),o=!0,1===this.mtt?this.ytt<this._z()?(this.ytt++,this.dut(nS.yut.gut.Q$.mut),this.dut(nS.yut.gut.Q$.wut),this.dut(nS.yut.gut.Q$.Sut),this.dut(nS.yut.gut.Q$.vut),this.IsPlaying()?this.mtt=0:this.gtt=0):(h=!0,this.dut(nS.yut.gut.Q$.Sut),this.dut(nS.yut.gut.Q$.vut)):0===this.mtt&&(this.dut(nS.yut.gut.Q$.Sut),this.dut(nS.yut.gut.Q$.vut),this.IsPlaying()?this.mtt=1:this.gtt=1)):a&&l&&(this.ptt>0?this.ftt>=r&&(this.Est(r),this.mJ(-1*this.gJ()),o=!0,0===this.mtt&&(this.dut(nS.yut.gut.Q$.Sut),this.dut(nS.yut.gut.Q$.vut)),1===this.mtt&&(this.dut(nS.yut.gut.Q$.mut),this.dut(nS.yut.gut.Q$.wut),this.dut(nS.yut.gut.Q$.Sut),this.dut(nS.yut.gut.Q$.vut)),this.IsPlaying()?(this.mtt++,this.mtt=nS.wrap(this.mtt,0,2)):(this.gtt=this.mtt+1,this.gtt=nS.wrap(this.gtt,0,2))):this.ftt<=0&&(this.Est(0),this.mJ(-1*this.gJ()),o=!0,0===this.mtt&&(this.dut(nS.yut.gut.Q$.Sut),this.dut(nS.yut.gut.Q$.vut)),1===this.mtt&&(this.dut(nS.yut.gut.Q$.mut),this.dut(nS.yut.gut.Q$.wut),this.dut(nS.yut.gut.Q$.Sut),this.dut(nS.yut.gut.Q$.vut)),this.IsPlaying()?(this.mtt++,this.mtt=nS.wrap(this.mtt,0,2)):(this.gtt=this.mtt+1,this.gtt=nS.wrap(this.gtt,0,2)))):this.ptt>0?this.ftt>=r&&(this.ytt<this._z()?(this.ytt++,this.Dst(0),this.dut(nS.yut.gut.Q$.mut),this.dut(nS.yut.gut.Q$.wut),o=!0):(this.Est(r),h=!0)):this.ftt<=0&&(this.ytt<this._z()?(this.ytt++,this.Dst(r),this.dut(nS.yut.gut.Q$.mut),this.dut(nS.yut.gut.Q$.wut),o=!0):(this.Est(0),h=!0)),!this.eJ()&&this.IsPlaying()){if(h)return this.int.Xst(),this.rJ(!0),void this.yst();this.int.vc(this.ftt,!0,!1,o,this._tt,!1),this._tt&&(this._tt=!1)}}dut(t){const s=this.EJ();this.Jlt.but(this),this.$c.JH(t,s,this.Jlt.fz()),this.Jlt.Mut()}e5(){const t=super.e5(),s=this.Jtt();return Object.assign(t,{tweenDataItemJson:s.e5(),id:this.Wc,destroyInstanceOnComplete:this.Hlt,initialValueMode:this.Ult})}n5(t){t&&(this.Jtt().n5(t.tweenDataItemJson),super.n5(t),this.Wc=t.id,this.Hlt=t.destroyInstanceOnComplete,this.Ult=t.initialValueMode,this.Zlt())}static IsPlaying(t){return t.IsPlaying()}static bJ(t){return t.bJ()}static xut(t){return!!t.pJ()&&0===t.est()}static Gut(t){return!!t.pJ()&&1===t.est()}static Tut(t){const s=t.runtime.Vtt(),i=new nS.vat;if(t.json){i.n5(t.json.tweenDataItemJson);const e=new nS.Yot(i,s);return e.n5(t.json),e}{const e=new nS.Yot(i,s);nS.Ge(t.Iut)||(t.Iut=[t.Iut]),e.lut(t.id),e.rst(t.tags),e.uut(t.Cut),e.RJ(t._ut),e.cJ(t.loop),e.dJ(t.Eut),e.lJ(t.time),e.Xtt(0),e.Ztt("default"),e.Qtt(t.Iut[0].Put),e.tst(t.Cz);const n=e.nit();n.let(t.dz.TH()),n.Ztt("default"),n.Qtt(t.Iut[0].Put),n.det(!0),n.pet(t.dz.fH().xk());const r=t.dz.iz(),h=r.wet()?r.yet():t.dz.D$().Vg(),o=r.wet()?r.bet():t.dz.D$().Qg();n.met(h),n.vet(o);const a=n.$et();a.aJ(0),a._J("noease"),a.det(!0),a.rst("");const l=n.$et();l.aJ(t.time),l._J("noease"),l.det(!0),l.rst("");for(const s of t.Iut){const i=n.Wet();i.xnt(s.Aut),i.Int(s.Rut),i.Pnt(s.het),i.Ont(s.type),i.Nnt(NaN),i.Bnt(NaN),i.Ztt("default"),i.Qtt(s.Put),i.det(!0);const e=i.ert();e.Fnt(s.valueType),e.aJ(0),e._J(s.Out),e.det(!0),e.urt(s.Fut),e.hrt(s.Fut);const r=i.ert();r.Fnt(s.valueType),r.aJ(t.time),r._J(s.Out),r.det(!0),r.urt(s.Dut),r.hrt(s.Dut),i.Utt()}return e}}static let(t,s){if(!isNaN(s))for(const i of t.N7())i.let(s)}static tut(t,s){t.tut(s)}Lut(t,s){return this.Ylt||(this.Ylt=nS.Un(self.GJ,this,t,s)),this.Ylt}}}{const uS=self.Cs;uS.Klt=class extends uS.jtt{constructor(t,s){super(t,s),this.kut=null,this.Nut=null}static UT(t,s){return uS.Un(uS.Klt,t,s)}$ut(){1===this.Dit.length?this.kut=this.Dit[0]:(this.kut=this.Dit[0],this.Nut=this.Dit[1])}Lit(){for(const t of this.Mit.Bit().$it())this.Dit.push(uS.But.UT(this,t));this.$ut()}Wet(){const t=this.Mit.Bit().jet(),s=uS.But.UT(this,t);return this.Dit.push(s),this.$ut(),s}o7(){if(this.Vit(),!this.Hit()&&this.ztt())return;const t=this.jit().nst()?0:this.uet();for(const s of this.Dit)s.o7(t),0===this.kit&&1===s.Get()&&(this.kit=1),0===this.y8&&1===s.a7()&&(this.y8=1);this.Nit=0,this.Dit.some(t=>t.Jst())&&(this.Nit=1),this.Rit=this.Tet(t),this.Eit=!1,this.Pit=!1,this.vc(t)}Kst(){}vc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){if(this.Iit||this.EJ(),this.Iit)return!this.Iit.SY()&&(!r||!this.fH().WQ())&&(this.Nut?(this.kut.vc(t,i,e,h),this.Nut.vc(t,i,e,h)):this.kut.vc(t,i,e,h),void(0!==this.kut.Get()&&(this.Cit||(this.Cit=this.Iit.D$()),this.Cit&&this.Cit.xU())))}sit(){}n5(t){super.n5(t),this.$ut()}}}{const cS=self.Cs;cS.But=class extends cS.Wit{constructor(t,s){super(t,s),this.Wut=!1}static UT(t,s){return cS.Un(cS.But,t,s)}vc(t,s=!1,i=!1,e=!1){let n,r;if(this.Wut)n=this.hnt[0],r=this.hnt[1];else if(s)n=this.nnt.Hnt(t,this.ent),r=n.V7();else{if(this.lnt){const s=this.jit(),i=this.lnt.V7(),e=this.lnt.YF(),n=i?i.YF():s.uJ();(t<=e||t>=n)&&(this.lnt=this.nnt.Hnt(t,this.ent))}else this.lnt=this.nnt.Hnt(t,this.ent);n=this.lnt,r=n.V7()}this.rnt.vc(t,n,r,s,i,e)}ert(){const t=this.ent.ant().nrt();return this.lnt=null,this.Wut=this.Wnt().length<=2,t}Uet(t){this.lnt=null,this.ent.ant().rrt(t),this.Wut=this.Wnt().length<=2}e5(){return{sourceAdapterJson:this.Utt().e5(),basic:this.Wut}}n5(t){t&&(this.Utt().n5(t.sourceAdapterJson),this.Wut=t.basic)}}}{const fS=self.Cs,dS=self.Vu,pS=0,mS=1,gS=2;fS.bc=class extends fS.Vn{constructor(t,s=!0){super(),this.Yn=t[0],this.jut=t[2],this.Vut=[];for(const s of t[1]){const t=fS.Hut.UT(this,s);this.Vut.push(t)}for(let t=0;t<this.Vut.length;t++){const s=this.Vut[t],i=this.Vut[t+1],e=this.Vut[t-1];s.llt(i),s.Glt(e)}this.Uut=new Map,this.qut=new Map,this.zut(),s&&dS.xc(this.Yn,(t,s,i,e)=>this.vc(t,s,i,e),null,{transition:this})}static UT(t){return fS.Un(fS.bc,t)}qn(){for(const t of this.Vut)t.qn();fS.bh(this.Vut),this.Vut=null,this.Uut.clear(),this.Uut=null,this.qut.clear(),this.qut=null}Mc(t){this.jut=!!t}Jut(t){const s=this.qut.get(t);if(s)return s;for(const s of this.Vut)if(s.Yut()===t)return this.qut.set(t,s),s}Xut(t){for(let s=this.Vut.length-1;s>=0;s--){const i=this.Vut[s],e=i.Yut();if(e<=t){let s=i;if(e<t)return s;if(e===t){for(;s;){const t=s.H7();if(!t)break;if(t.Yut()!==s.Yut())break;s=t}return s}}}}vc(t,s,i,e){let n=t/e;if(this.jut){const n=this.Jut(0),r=this.Jut(1),h=s+(s+i)*n.Kut(),o=(s+i)*r.Kut()-h;return 0===e?h+o:dS.Tc(t,h,o,e)}0===e&&(n=1);let r=this.Xut(n),h=r.V7();if(!h){const t=r.H7(),s=r;r=t,h=s}const o=h.Yut()-r.Yut(),a=fS.Xn(n,r.Yut(),h.Yut(),0,o);if(r.Zut()||0===o){const t=s+(s+i)*r.Kut(),e=(s+i)*h.Kut()-t;return 0===o?1===a?t+e:t:dS.Tc(a,t,e,o)}const l=r.Yut(),u=r.Kut(),c=r.Yut()+r.Qut(),f=r.Kut()+r.tct(),d=h.Yut()+h.sct(),p=h.Kut()+h.ict(),m=h.Yut(),g=h.Kut();let y=dS.hc("spline")(a,l,u,c,f,d,p,m,g,this.Uut.get(r));return y+=r.Kut(),(1-y)*s+y*(s+i)}zut(){this.Uut.clear();for(let t=0;t<this.Vut.length-1;t++){const s=this.Vut[t];if(!s.mat())continue;const i=s,e=this.Vut[t+1];if(!e.gat())continue;const n=i.Yut(),r=i.Yut()+i.Qut(),h=e.Yut()+e.sct(),o=e.Yut();this.Uut.set(i,dS.Ic(n,r,h,o))}}}}{const yS=self.Cs,wS=0,SS=1,vS=2,bS=3,MS=4,xS=5,GS=6,TS=7,IS=8;yS.Hut=class extends yS.Vn{constructor(t,s){super(),this.ect=t,this.nct=s[0],this.rct=s[1],this.hct=s[2],this.oct=s[3],this.act=s[4],this.lct=s[5],this.Dlt=s[6],this.klt=s[7],this.uct=s[8],this.hlt=null,this.Mlt=null}qn(){this.ect=null}static UT(t,s){return yS.Un(yS.Hut,t,s)}llt(t){this.hlt=t}V7(){return this.hlt}Glt(t){this.Mlt=t}H7(){return this.Mlt}Yut(){return this.nct}Kut(){return this.rct}Qut(){return this.hct}tct(){return this.oct}sct(){return this.act}ict(){return this.lct}mat(){return this.Dlt}gat(){return this.klt}Zut(){return"linear"===this.uct}cct(){return"cubic"===this.uct}}}{const CS=self.Cs;CS.fct=class extends CS.Vn{constructor(t){super(),this.$c=t,this.dct=[]}qn(){for(const t of this.dct)t.qn();CS.bh(this.dct),this.dct=null}UT(t){this.dct.push(CS.bc.UT(t))}}}{const _S=self.Cs;_S.pct=class extends _S.Vn{constructor(t){super(),this.$c=t,this.mct=null,this.gct=null,this.a8=t=>this.l8(t.dz)}qn(){if(this.w8(),this.mct){for(const t of this.mct.values())t.clear();this.mct.clear()}this.mct=null,this.$c=null}UT(t){if(this.mct||(this.mct=new Map),!t)return;const s=t[0][16][0],i=t[1];this.mct.has(i)||this.mct.set(i,new Map),this.mct.get(i).set(s,t)}S8(){const t=this.$c.Sf();t&&t.addEventListener("instancedestroy",this.a8)}w8(){const t=this.$c.Sf();t&&t.removeEventListener("instancedestroy",this.a8)}yct(){return!!this.mct&&0!==this.mct.size}wct(t,s){let i=0;if(i=t instanceof _S.Sct?t.xk():t,!this.mct.has(i))return;const e=this.mct.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}vct(t,s){this.gct||(this.gct=new WeakMap),this.gct.has(t)||this.gct.set(t,s)}bct(t){if(!this.gct)return"";return this.gct.get(t)||""}l8(t){this.gct&&this.gct.has(t)&&this.gct.delete(t)}}}{const ES=self.Cs;ES.Mct=class{constructor(t){this.$c=t,this.xct=new ES.Gct}qn(){this.xct.qn(),this.xct=null,this.$c=null}aB(){return this.$c}UT(t){this.xct.Bu(t)}Tct(t){return this.xct.qs(t)}Ict(){return this.xct.Ict()}}}{const PS=self.Cs;PS.Cct=class{constructor(t,s,i,e,n,r,h){this.$c=n.aB(),this._ct=n,this.Ect=t,this.Pct=i,this.Act=e,this.Rw=s,this.V6=r,this.Rct=h??r.EJ().TH(),this.Oct(),this.Fct=this.Lct?.Dct()??-1,this.kct=[],this.Nct=null,this.$ct=NaN,this.Bct=null,this.Wct=null,this.jct=null,this.Vct="",this.Hct=null,this.Uct="",this.qct="",this.zct=0,this.Jct=!1,this.Mtt=!1}qn(){this.Mtt||(PS.bh(this.kct),this.kct=null,this.$c=null,this._ct=null,this.Act=null,this.V6=null,this.Nct=null,this.$ct=NaN,this.Bct&&this.Bct.clear(),this.Bct=null,this.Wct=null,this.jct=null,this.Vct="",this.Hct=null,this.Uct="",this.qct="",this.Mtt=!0)}zn(){return this.Mtt}Yct(){return this._ct}aB(){return this.$c}Pc(){return this.Ect}Xct(){return this.Act}iJ(){return this.Rw}O8(){return this.V6||(this.V6=this.$c.P$(this.Rct).iz()),this.V6}Kct(){return this.Zct(this.Fct)}Qct(){const t=this.Kct();return t?t.iJ():""}tft(){const t=this.Kct();return t?t.yJ():[]}sft(t){const s=this.tft();if(!s)return!1;if(!s.length)return!1;const i=PS.Cct.hst(t);return!(!i||!i.length)&&i.every(PS.Cct.ast,s)}ift(t,s){const i=this.tft();if(!i)return!1;if(!i.length)return!1;const e=PS.Cct.hst(t);return!(!e||!e.length)&&e.every(t=>PS.Cct.eft.call(i,t,s))}static ast(t){const s=this;return""===t?1===s.length&&""===s[0]:s.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static hst(t){return t.trim().split(" ")}static eft(t,s){const i=this;return""===t?1===i.length&&""===i[0]:i.some(i=>PS.compare(i.trim(),s,t.trim()))}nft(t){const s=this.Kct();if(s){if(PS.te(t)){const i=s.rft(),e=i?i[t]:void 0;if(PS.te(e))return this.Zct(e)}if("string"==typeof t)for(const i of s.rft()){const s=this.Zct(i);if(s.oJ(t))return this.Zct(s.Dct())}}}hft(t){const s=this.nft(t);return s?s.iJ():""}oft(t){const s=this.nft(t);return s?s.yJ():""}aft(t){const s=this.Kct();if(!s)return-1;const i=s.rft();if(!i)return-1;const e=this.nft(t);return e?i.indexOf(e.Dct()):-1}lft(){const t=this.Kct();if(!t)return 0;const s=t.rft();return s?s.length:0}Zct(t){return this.Act.Zct(t)}Bf(){this.cft().uft(!0)}uft(t){if(this.fft()){for(const[t,s]of this.fft().entries())s.uft(!1);this.fft().clear()}if(this.Bct=null,this.Nct=null,this.dft=null,this.Wct=null,this.Vct="",this.Hct=null,this.Uct="",this.qct="",this.kct=[],t){this._ct.pft(this);const t=this.Lct.Dct();t!==this.Fct&&this.mft(t)}else this.Fct=this.Lct.Dct()}gft(){const t=this.Act.Zct(this.Fct);return t?t.wft().yft():0}Sft(t){return!(t<0)&&t===this.vft()}vft(){const t=this.Act.Zct(this.Fct);if(!t)return-1;let s=t.wft().bft();return s?t.wft().Mft().indexOf(s):-1}xft(t){const s=this.Gft(t);return s?s.Pc():""}Tft(t){let s;return PS.te(t)&&(s=this.Gft(t)),"string"==typeof t&&(s=this.Ift(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s._nt():""}Cft(t,s){if(t.fet())return t.Dct();{const i=t.wft().bft();if(!i)return s.Dct();const e=i._ft();if(!PS.te(e))return s.Dct();const n=this.Zct(e);return n?this.Cft(n,s):s.Dct()}}Eft(t,s){if(t.fet()){if("reference"===t.XI()){const s=t.Pft(),i=t.Aft(),e=this._ct.Tct(s);if(!e)return[-1,null];const n=e.Rft(i);return n?this.Eft(n,e):this.Eft(e.Oft(),e)}return[t.Dct(),s]}{const i=t.wft().bft();if(!i)return[-1,null];const e=i._ft();if(!PS.te(e))return[-1,null];const n=s.Zct(e);return n?this.Eft(n,s):[-1,null]}}Fft(t,s){let i=this.Zct(t);if(i){if(!i.fet()){const s=this.Zct(this.Fct);t=this.Cft(i,s)}if(PS.te(t)&&t!==this.Fct)if(i=this.Zct(t),"reference"===i.XI()){const e=i.Pft(),n=i.Aft(),r=this._ct.Tct(e);let h=r.Rft(n);if(h){const i=this.Eft(h,r);if(-1===i[0])return;s(this.Fct,t,i[1],i[0])}else s(this.Fct,t)}else s(this.Fct,t)}}Dft(t){let s;if(PS.te(t)&&(s=this.Gft(t)),"string"==typeof t&&(s=this.Ift(t)),!s)return;let i=s._ft();PS.te(i)&&this.Fft(i,(t,s,i,e)=>{this.kct.push(t),this.mft(s,i,e)})}Lft(){const t=this.kft();if(!t)return;const s=t._ft();PS.te(s)&&this.Fft(s,(t,s,i,e)=>{this.kct.push(t),this.mft(s,i,e)})}Nft(t){const s=this.Act.Rft(t);if(!s)return;const i=s.Dct();PS.te(i)&&this.Fft(i,(t,s,i,e)=>{this.kct.push(t),this.mft(s,i,e)})}$ft(){const t=this.kct.pop();PS.te(t)?this.mft(t):this.Bft()&&(this._ct.pft(this.Bft(),!0,!1,!1),this.Bft().mft(this.Wft()),this.cft().jft(this.Bft()))}Vft(t){if(!this.Kct())return;const s=this.nft(t);if(s){if(!s.fet())return;const t=s.Dct();if(!PS.te(t))return;this.kct.push(this.Fct),this.mft(s.Dct())}}Hft(t){if(PS.te(t))return!!this.Act.Zct(this.Fct).wft().Mft()[t];if("string"==typeof t){const s=this.Act.Zct(this.Fct).wft().Mft();for(let i=0;i<s.length;i++)if(s[i].Pc()===t)return!0;return!1}return!1}Uft(){this.Jct=!0}qft(){return this.zct>0}zft(){this.zct++}Jft(){this.zct--,0===this.zct&&this.Jct&&this._ct.Yft(this)}mft(t,s,i){const e=this.Fct,n=this.O8().EJ();this.zft(),this._ct.Xft(this),this.$c.JH(PS.sB.Zft.Q$.Kft,n),this.$c.JH(PS.sB.Zft.Q$.Qft,n),this.$c.JH(PS.sB.Zft.Q$.tdt,n),this.$c.JH(PS.sB.Zft.Q$.sdt,n),this.Fct=t;let r=this.Zct(this.Fct);if("dictionary"===r.XI()&&(this.$c.JH(PS.sB.Zft.Q$.idt,n),this.$c.JH(PS.sB.Zft.Q$.edt,n),this.$c.JH(PS.sB.Zft.Q$.ndt,n),this.$c.JH(PS.sB.Zft.Q$.rdt,n)),this._ct.hdt(),this.Jft(),!this.zn()&&(r=this.Zct(this.Fct),"reference"===r.XI())){const t=s?s.Pc():r.Pft();if(this.odt(r)){this.kct.pop();const t=this.adt(r);this._ct.pft(t,!0,!0,!1),t.ldt(this,e),this.cft().jft(t)}else{const s="number"==typeof i?i:r.Aft();if(t){this.kct.pop();let i=r.udt();if(i){let t=this._ct.cdt(i);for(;t;)i=PS.Cm(i),t=this._ct.cdt(i)}else{i=`${t}-ref`;let s=this._ct.cdt(i);for(;s;)i=PS.Cm(i),s=this._ct.cdt(i)}const n=this._ct.fdt(t,s,i,this.V6,!0);n.ldt(this,e),this.ddt(r,n);const h=this.cft();n.pdt(h),h.jft(n)}}}}kft(){const t=this.Act.Zct(this.Fct);return t?t.wft().bft():null}Gft(t){const s=this.Act.Zct(this.Fct);if(!s)return null;const i=s.wft().Mft();if(!i)return null;return i[t]||null}Ift(t){const s=this.Act.Zct(this.Fct);if(!s)return null;return s.wft().mdt(t)||null}Oct(t){if("number"==typeof t){let s=this.Zct(t);s||(s=this.Act.Oft()),this.Lct=s}else if("number"==typeof this.Pct){let t=this.Zct(this.Pct);t||(t=this.Act.Oft()),this.Lct=t}else{let t=this.Act.Rft(this.Pct);t||(t=this.Act.Oft()),this.Lct=t}}e5(){return this.Jct?null:{flowchartName:this.Ect,flowchartTag:this.Rw,startNodeTag:this.Pct,currentNodeId:this.Fct,previousNodeIds:this.kct,pluginUID:this.V6.EJ().TH(),reference:{previousFlowchartTag:this.Bft()?this.Bft().iJ():"",previousStartNodeId:PS.te(this.Wft())?this.Wft():NaN,referencesJson:this.gdt(),currentReferenceFlowchartTag:this.ydt()?this.ydt().iJ():"",rootFlowchartTag:this.cft()?this.cft().iJ():""}}}gdt(){if(!this.wdt())return null;const t=[];for(const[s,i]of this.fft().entries())t.push({flowchartElementId:s.Dct(),flowchartStateTag:i.iJ()});return t.length?t:null}n5(t){if(t){if(this.Ect=t.flowchartName,this.Rw=t.flowchartTag,this.Pct=t.startNodeTag,this.Fct=t.currentNodeId,this.kct=t.previousNodeIds,this.Rct=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.Vct=s.previousFlowchartTag,this.$ct=s.previousStartNodeId,this.Hct=s.referencesJson,this.Uct=s.currentReferenceFlowchartTag,this.qct=s.rootFlowchartTag}this.Oct()}}Bft(){return"string"==typeof this.Vct&&this.Vct&&(this.Nct=this._ct.cdt(this.Vct),this.Vct=""),this.Nct}Wft(){return this.$ct}ldt(t,s){this.Nct=t,this.$ct=s}ydt(){return"string"==typeof this.Uct&&this.Uct&&(this.Wct=this._ct.cdt(this.Uct),this.Uct=""),this.Wct}jft(t){this.Wct=t,this.Wct===this&&(this.Wct=null)}cft(){return"string"==typeof this.qct&&this.qct&&(this.jct=this._ct.cdt(this.qct),this.qct=""),this.jct?this.jct:this}pdt(t){this.jct=t}wdt(){return this.Sdt(),!!this.Bct}odt(t){return this.Sdt(),this.Bct&&this.Bct.has(t)}Sdt(){if(this.Hct){this.Bct&&this.Bct.clear(),this.Bct||(this.Bct=new Map);for(const t of this.Hct){const s=this._ct.cdt(t.flowchartStateTag),i=s.Zct(t.flowchartElementId);this.Bct.set(i,s)}this.Hct=null}}fft(){return this.Sdt(),this.Bct}adt(t){return this.Sdt(),this.Bct.get(t)}ddt(t,s){this.Bct||(this.Bct=new Map),this.Bct.set(t,s)}}}{const AS=self.Cs;AS.vdt=class{constructor(t){this.$c=t,this.bdt=new Map,this.Mdt=null,this.xdt=[],this.Gdt=()=>this.d8(),this.Tdt=null}qn(){AS.bh(this.xdt),this.xdt=null,this.bdt.clear(),this.bdt=null,this.Mdt=null,this.$c=null,this.Tdt=null}aB(){return this.$c}Tct(t){return this.$c.Yct().Tct(t)}fdt(t,s,i,e,n,r){const h=this.$c.Yct().Tct(t);if(!h)return void console.warn(`[Flowcharts] no flowchart found with name '${t}'`);if(this.bdt.has(i)){const t=this.bdt.get(i);t&&this.Yft(t)}const o=new AS.Cct(t,i,s,h,this,e,r);return this.bdt.set(i,o),n&&this.pft(o,!0),o}Yft(t){if(t.Uft(),t.qft())return;const s=t.iJ();this.bdt.delete(s),t.qn(),this.Mdt===t&&(this.Mdt=null)}Idt(t){t.Bf()}cdt(t){return this.bdt.get(t)}Xft(t){this.xdt.push(t)}hdt(){this.xdt.pop()}pft(t,s=!1,i=!1,e=!0){if(e){const s=t.ydt();t=s||t}t!==this.Mdt&&(this.Cdt(),this._dt(t,s,i))}Edt(t){return"string"==typeof t?this.cdt(t):this.xdt.length?this.xdt[this.xdt.length-1]:this.Mdt}Cdt(){if(!this.Mdt)return;if(this.Mdt.zn())return;const t=this.Mdt.O8().EJ();this.Mdt.zft(),this.Xft(this.Mdt),this.$c.JH(AS.sB.Zft.Q$.Pdt,t),this.hdt(),this.Mdt.Jft()}_dt(t,s=!1,i=!1){if(this.Mdt=t,!this.Mdt)return;if(this.Mdt.zn())return;const e=this.Mdt.O8().EJ();this.Mdt.zft(),this.Xft(this.Mdt),this.$c.JH(AS.sB.Zft.Q$.Adt,e),!0!==i&&"number"!=typeof i||this.Mdt.Oct(i),s&&(this.$c.JH(AS.sB.Zft.Q$.idt,e),this.$c.JH(AS.sB.Zft.Q$.edt,e),this.$c.JH(AS.sB.Zft.Q$.ndt,e),this.$c.JH(AS.sB.Zft.Q$.rdt,e)),this.hdt(),this.Mdt.Jft()}e5(){return{flowchartJsonObjects:[...this.bdt.values()].map(t=>t.e5()),currentFlowchartTag:this.Mdt?this.Mdt.iJ():null}}n5(t){if(!t)return;this.Tdt=t;const s=new Map;for(const t of this.Tdt.flowchartJsonObjects){const i=t.flowchartTag;if(this.bdt.has(i)){const e=this.bdt.get(i);e.n5(t),s.set(i,e)}else{const i=this.fdt(t.flowchartName,t.startNodeTag,t.flowchartTag,null,!1,t.pluginUID);i.n5(t),s.set(t.flowchartTag,i)}}for(const[t,i]of this.bdt.entries())s.has(t)||i.qn();this.bdt.clear(),this.bdt=s,this.$c.N4()?this.$c.Sf().addEventListener("afterload",this.Gdt):this.d8()}d8(){this.$c.Sf().removeEventListener("afterload",this.Gdt);const t=this.bdt.get(this.Tdt.currentFlowchartTag);t&&this.pft(t,!0),this.Tdt=null}}}{const RS=self.Cs;RS.Gct=class{constructor(){this.Rdt=new Map}qn(){for(const t of this.Rdt.values())t.qn();this.Rdt.clear(),this.Rdt=null}Bu(t){const s=new RS.Odt(t),i=s.Pc();this.Rdt.set(i,s)}qs(t){return this.Rdt.get(t)}Ict(){return!!this.Rdt.size}static Fdt(t,s,i,e){if(s)for(const n of s){const s=new i(n,e);t.push(s)}}}}{const OS=self.Cs,FS=0,DS=1;OS.Odt=class{constructor(t){this.Yn=t[0],this.Ddt=new OS.Ldt(t[1],this)}qn(){this.Ddt.qn(),this.Ddt=null}kdt(){return this.Ddt}Zct(t){return this.Ddt.Zct(t)}Rft(t){return this.Ddt.Rft(t)}Oft(){return this.Ddt.Oft()}Pc(){return this.Yn}}}{const LS=self.Cs,kS=0,NS=1,$S=2,BS=3,WS=4,jS=5,VS=6,HS=7,US=8,qS=8,zS=9,JS=10,YS=11;class XS{constructor(t,s){this.Ddt=s,this.zc=t[7],this.Ndt=t[0],this.Rw=t[1],this.Rw?this.Ptt=this.Rw.trim().split(" ").map(t=>t.trim()):this.Ptt=[],this.$dt=t[2],this.Bdt=null,this.Wdt=null,this.nlt=!1,"dictionary"===this.zc&&(this.Bdt=t[3],this.Wdt=t[4],this.nlt=t[8]),this.jdt=t[6],this.Vdt=null,this.Hdt=null,this.Udt=null,"reference"===this.zc&&(this.Vdt=t[8],this.Hdt=t[9],this.Udt=t[10],this.nlt=t[11]),this.qdt=new LS.zdt(t[5],this)}qn(){this.Ddt=null}kdt(){return this.Ddt}wft(){return this.qdt}Dct(){return this.Ndt}iJ(){return this.Rw}yJ(){return this.Ptt}oJ(t){if(!this.Ptt)return!1;if(!this.Ptt.length)return!1;const s=LS.Cct.hst(t);return!(!s||!s.length)&&s.every(LS.Cct.ast,this.Ptt)}Jdt(){return this.jdt}Ydt(t){this.jdt=!!t}Xdt(){if("dictionary"===this.zc)return!0;if("reference"===this.zc)return!1;throw new Error(`unexpected flowchart node type: ${this.zc}`)}rft(){return this.$dt}Kdt(){return this.Bdt}Zdt(){return this.Wdt}XI(){return this.zc}fet(){return this.nlt}Pft(){return this.Vdt}Aft(){return this.Hdt}udt(){return this.Udt}}LS.Ldt=class{constructor(t,s){this.Act=s,this.Qdt=[],this.tpt=new Map,this.spt=new Map,this.ipt=null,LS.Gct.Fdt(this.Qdt,t,XS,this);for(const t of this.Qdt){const s=t.Dct(),i=t.iJ(),e=t.yJ(),n=t.Jdt();if(this.tpt.set(s,t),i)for(const s of e)this.spt.has(s)||this.spt.set(s,new Set),this.spt.get(s).add(t);n&&(this.ipt=t);const r=t.wft();for(const t of r.ept()){const s=t.Dct();this.tpt.set(s,t)}}this.ipt||this.npt()}qn(){this.Act=null;for(const t of this.Qdt)t.qn();LS.bh(this.Qdt),this.Qdt=null}Xct(){return this.Act}Zct(t){return this.tpt.get(t)}Rft(t){if(!t||!t.length)return null;const s=[];for(const i of t.trim().split(" ")){let t=this.spt.get(i.trim())??new Set;if(0===t.size)return null;s.push(t)}return[...s.reduce((t,s)=>s.size<t.size?s:t)].filter(t=>s.every(s=>s.has(t)))[0]}Oft(){return this.ipt}*rpt(){for(const t of this.Qdt)yield t}npt(){let t=0;for(const s of this.rpt())s.Jdt()&&t++;if(0===t){for(const t of this.rpt())if(t.Xdt()&&!t.Jdt())return void t.Ydt(!0)}else{if(1===t)return;if(t>1){let t=!0;for(const s of this.rpt())s.Xdt()&&(s.Jdt()&&t?t=!1:s.Jdt()&&!t&&s.Ydt(!1))}}for(const t of this.rpt())if(t.Xdt()&&t.Jdt())return void(this.ipt=t)}}}{const KS=self.Cs,ZS=0,QS=1,tv=2,sv=3,iv=4,ev=5;class nv{constructor(t,s){this.qdt=s,this.Ndt=t[0],this.Yn=t[1],this.iht=t[2],this.hpt=t[3],this.nlt=t[4],this.opt=t[5]}qn(){this.qdt=null}wft(){return this.qdt}Dct(){return this.Ndt}Pc(){return this.Yn}_nt(){return this.iht}_ft(){return this.hpt}fet(){return this.nlt}apt(){return this.opt}}KS.zdt=class{constructor(t,s){this.lpt=s,this.upt=[],this.cpt=new Map,KS.Gct.Fdt(this.upt,t,nv,this),this.fpt=this.upt.filter(t=>t.fet());for(const t of this.fpt)this.cpt.set(t.Pc(),t)}qn(){this.lpt=null;for(const t of this.upt)t.qn();KS.bh(this.upt),this.upt=null,KS.bh(this.fpt),this.fpt=null}dpt(){return this.lpt}yft(){return this.fpt.length}Mft(){return this.fpt}mdt(t){return this.cpt.get(t)}bft(){for(const t of this.fpt)if(t.apt())return t}*ept(){for(const t of this.fpt)yield t}}}{const rv=self.Cs;rv.ppt=class extends rv.Vn{constructor(t){super(),this.mpt=t,this.gpt=[],this.gpt.push(rv.Un(rv.ypt,this)),this.Aw=0,this.wpt=this.gpt[0]}qn(){for(const t of this.gpt)t.qn();rv.bh(this.gpt),this.wpt=null,this.mpt=null}fH(){return this.mpt}nj(){return this.wpt}Spt(){return this.gpt[this.Aw-1]}Pu(){this.nj().Pu()}vpt(){const t=this.gpt,s=++this.Aw;if(s===t.length){const s=rv.Un(rv.ypt,this);t.push(s),this.wpt=s}else{const i=t[s];i.Bf(),this.wpt=i}}bpt(){const t=this.gpt,s=++this.Aw;s===t.length&&t.push(rv.Un(rv.ypt,this));const i=t[s];i.hd(t[s-1]),this.wpt=i}dX(){this.wpt=this.gpt[--this.Aw]}Mpt(t){const s=this.gpt;for(let i=0,e=s.length;i<e;++i)s[i].Mpt(t)}}}{const hv=self.Cs;hv.ypt=class extends hv.Vn{constructor(t){super(),this.gpt=t,this.mpt=this.gpt.fH(),this.xpt=this.mpt.aB().bN(),this.Gpt=!0,this.dQ=[],this.Tpt=[]}qn(){this.Ipt(),this.gpt=null,this.mpt=null,this.xpt=null}Ipt(){hv.bh(this.dQ),hv.bh(this.Tpt)}fH(){return this.mpt}Cpt(){return this.Gpt}_pt(){return this.Gpt?!!this.mpt.oj():!!this.dQ.length}ej(){return this.Gpt?this.mpt.ej():this.dQ}Ept(){return!!this.Tpt.length}Ppt(){return this.Tpt}Apt(){const t=this.ej();return t.length?t:this.Tpt}Bf(){this.Gpt=!0,hv.bh(this.Tpt)}Pu(){this.Gpt=!0}hd(t){t.Cpt()?this.Bf():(this.Gpt=!1,hv.Th(this.dQ,t.dQ),hv.bh(this.Tpt))}Rpt(t){this.dQ.push(t)}Opt(t){this.Tpt.push(t)}Fpt(t){this.Gpt=!!t}Dpt(){return this.dQ}Lpt(){return this.Tpt}kpt(t){this.Gpt=!1,hv.bh(this.dQ),this.dQ.push(t)}Npt(t){this.Gpt=!1,hv.Th(this.dQ,t)}$pt(t){this.Gpt=!1,hv.bh(this.dQ);for(const s of t)this.dQ.push(s)}Bpt(t,s){for(const i of s)t.has(i)||this.Tpt.push(i)}Wpt(t){for(const s of t)this.dQ.push(s);hv.Ph(this.Tpt,t)}jpt(){hv.bh(this.Tpt)}Vpt(t){if(t)if(this.xpt.sX().pN().Hpt()){this.Cpt()&&(hv.bh(this.dQ),hv.Th(this.Tpt,t.fH().ej()),this.Gpt=!1);const s=this.Tpt.indexOf(t);-1!==s&&(this.dQ.push(this.Tpt[s]),this.Tpt.splice(s,1))}else this.kpt(t)}Mpt(t){hv.Ph(this.dQ,t),hv.Ph(this.Tpt,t)}}}{const ov=self.Cs;ov.Upt=class extends ov.Vn{constructor(t){super(),this.qpt=t,this.$c=this.qpt.aB(),this.gpt=[],this.gpt.push(ov.Un(ov.zpt,this,null)),this.Aw=0,this.Jpt=[]}qn(){for(const t of this.gpt)t.qn();ov.bh(this.gpt),ov.bh(this.Jpt),this.qpt=null,this.$c=null}aN(){return this.qpt}aB(){return this.$c}sX(){return this.gpt[this.Aw]}Ypt(){return this.gpt}Xpt(){return this.Aw}iX(t){const s=this.gpt,i=++this.Aw;if(i===s.length){const i=ov.Un(ov.zpt,this,t);return s.push(i),i}{const e=s[i];return e.Bf(t),e}}dX(){--this.Aw}Kpt(t){this.Jpt.push(t)}Zpt(){this.Jpt.pop()}vN(){const t=this.Jpt;return 0===t.length?null:t.at(-1)}}}{const av=self.Cs;av.zpt=class extends av.Vn{constructor(t,s){super(),this.gpt=t,this.$c=this.gpt.aB(),this.Qpt=s,this.tmt=0,this.smt=0,this.imt=!1,this.emt=!1,this.nmt=null,this.rmt=0,this.hmt=0,this.omt=null}qn(){this.Bf(null),this.gpt=null,this.$c=null}Bf(t){this.Qpt=t,this.tmt=0,this.smt=0,this.imt=!1,this.emt=!1,this.omt=null}amt(t,s){this.Qpt=t,this.tmt=0,this.smt=s}lmt(){this.tmt=0,this.smt=0}pN(){return this.Qpt}umt(t){this.Qpt=t}cmt(){return this.tmt}fmt(t){this.tmt=t}dmt(){return this.smt}pmt(t){this.smt=t}mmt(t){this.imt=!!t}gmt(){return this.imt}ymt(t){this.emt=!!t}wmt(){return this.emt}Smt(t){this.nmt=t}vmt(){return this.nmt}bmt(t,s){this.rmt=t,this.hmt=s}MN(){return this.rmt}xN(t){this.hmt=t}Mmt(){return this.hmt}xmt(){const t=this.Qpt;return!!t.Gmt()||this.tmt<t.Tmt()-1&&!!t.tX().length}Imt(t){this.omt=t}Cmt(){return this.omt}}}{const lv=self.Cs;lv._mt=class extends lv.Vn{constructor(t){super(),this.qpt=t,this.$c=this.qpt.aB(),this.gpt=[],this.Aw=-1,this.wpt=null,this.Emt=[]}qn(){lv.bh(this.gpt),this.qpt=null,this.$c=null}Pmt(t){this.Emt=t;const s=this.Emt.slice(0);this.gpt.push(s),this.Aw=0,this.wpt=s}aN(){return this.qpt}aB(){return this.$c}Amt(){return this.wpt}iX(){const t=++this.Aw,s=this.gpt;t===s.length?s.push(this.Emt.slice(0)):lv.Th(s[t],this.Emt),this.wpt=s[t]}dX(){this.wpt=this.gpt[--this.Aw]}}}{const uv=self.Cs;uv.Rmt=class extends uv.Vn{constructor(t){super(),this.qpt=t,this.$c=this.qpt.aB(),this.gpt=[],this.Aw=-1}qn(){uv.bh(this.gpt),this.qpt=null,this.$c=null}aN(){return this.qpt}aB(){return this.$c}Omt(){return this.Aw>=0}Amt(){return this.gpt[this.Aw]}iX(){if(++this.Aw,this.Aw===this.gpt.length){const t=uv.Un(uv.Fmt,this);return this.gpt.push(t),t}{const t=this.gpt[this.Aw];return t.Bf(),t}}dX(){--this.Aw}Dmt(t){const s=this.gpt;for(let i=this.Aw;i>=0;--i){const e=s[i];if(e.Pc()===t)return e}return null}Lmt(){return this.gpt.slice(0,this.Aw+1)}}}{const cv=self.Cs;cv.Fmt=class extends cv.Vn{constructor(t){super(),this.kmt=t,this.Yn="",this.Aw=0,this.Nmt=!1,this.$mt=NaN}Bf(){this.Yn="",this.Aw=0,this.Nmt=!1,this.$mt=NaN}nX(t){this.Yn=t}Pc(){return this.Yn}uX(t){this.Aw=t}xk(){return this.Aw}rJ(){this.Nmt=!0}fX(){return this.Nmt}Bmt(t){this.$mt=t}Wmt(){return this.$mt}}}{const fv=self.Cs;fv.jmt=class extends fv.Vn{constructor(){super(),this.gpt=[],this.Aw=-1}qn(){fv.bh(this.gpt)}Amt(){return this.gpt[this.Aw]}iX(){if(++this.Aw,this.Aw===this.gpt.length){const t=[];return this.gpt.push(t),t}return this.gpt[this.Aw]}dX(){--this.Aw}}}{let dv=function(t,s){return t.xk()-s.xk()},pv=function(t,s){for(let i=0,e=t.length;i<e;++i)if(t[i]!==s[i])return!1;return!0};SortSolArray=dv,IsSolArrayIdentical=pv;const mv=self.Cs,gv=self.assert;mv.Vmt=class extends mv.Vn{constructor(t){super(),this.$c=t,this.Hmt=[],this.Umt=new Map,this.qmt=[],this.zmt=new Map,this.Jmt=new Map,this.Ymt=new Map,this.Xmt=new Map,this.Kmt=new Map,this.Zmt=new Map,this.Qmt=0,this.tgt=[],this.sgt=[],this.igt=[],this.egt=new Map,this.ngt=new Map,this.xpt=mv.Un(mv.Upt,this),this.rgt=mv.Un(mv._mt,this),this.kmt=mv.Un(mv.Rmt,this),this.hgt=[],this.ogt=[],this.agt=[],this.lgt=0,this.ugt=0,this.cgt=0,this.fgt=[],this.dgt=[],this.pgt=[],this.mgt=new Map,this.ggt=new Map,self.c3_callFunction=(t,s)=>this.ygt(t,s)}qn(){this.e6(),this.xpt.qn(),this.xpt=null,this.rgt.qn(),this.rgt=null,mv.bh(this.ogt),mv.bh(this.agt),this.$c=null,mv.bh(this.Hmt),this.Umt.clear()}UT(t){const s=mv.Un(mv.wgt,this,t);this.Hmt.push(s),this.Umt.set(s.Pc().toLowerCase(),s)}Sgt(t){this.hgt.push(t)}vgt(){for(const t of this.ngt.values())t.bgt();for(const t of this.egt.values())t.vgt();for(const t of this.ngt.values())t.vgt();for(const t of this.Hmt)t.vgt();for(const t of this.Hmt)t.I4();for(const t of this.hgt)t.vgt(!1);mv.bh(this.hgt),this.rgt.Pmt(this.igt)}aB(){return this.$c}T4(t){return this.Umt.get(t.toLowerCase())||null}Mgt(t){this.qmt.push(t),this.zmt.set(t.xgt(),t)}Ggt(t){this.Jmt.set(t._1(),t)}Tgt(t){this.Ymt.set(t._1(),t)}Igt(t){this.Xmt.set(t._1(),t)}Cgt(t){switch(t._gt()){case 0:this.egt.set(t.Egt().toLowerCase(),t);break;case 1:this.ngt.set(t.Egt().toLowerCase(),t)}}Pgt(t){this.Zmt.set(t._1(),t),t.WQ()?this.tgt.push(t):this.sgt.push(t)}Agt(t){t.length>=2&&t.sort(dv);let s=this.Kmt.get(t.length);s||(s=[],this.Kmt.set(t.length,s));for(let i=0,e=s.length;i<e;++i){const e=s[i];if(pv(t,e))return e}return s.push(t),t}Rgt(t){return this.igt.push(t.Ogt()),this.Qmt++}bN(){return this.xpt}Fgt(){return this.bN().sX()}pN(){return this.Fgt().pN()}Dgt(){const t=this.Fgt();return t.pN().Lgt(t.cmt())}kgt(){const t=this.Fgt();return t.pN().Ngt(t.dmt())}$gt(){return this.rgt}eX(){return this.kmt}Bgt(t){const s=[];for(t=t.Wgt();t;)mv.On(s,t.jgt()),t=t.Wgt();return s}Vgt(t){const s={};for(const i of this.Bgt(t))s[i.Hgt()]=i.Ugt();return Object.create(Object.prototype,s)}qgt(t){return this.Zmt.get(t)||null}zgt(t){return this.Jmt.get(t)||null}Jgt(t){return this.Ymt.get(t)||null}Ygt(t){return this.Xmt.get(t)||null}lN(t){return this.egt.get(t.toLowerCase())||null}Xgt(t,s){let i=this.ngt.get((t.Pc()+"."+s).toLowerCase());if(i)return i;if(!t.v1())for(const e of t.yj())if(i=this.ngt.get((e.Pc()+"."+s).toLowerCase()),i)return i;return null}Kgt(){return this.tgt}Zgt(){return this.sgt}Qgt(t){for(const t of this.tgt)t.tyt();if(t)for(const t of this.sgt)t.JG()&&t.tyt()}syt(t){return this.zmt.get(t.toLowerCase())||null}iyt(t){const s=this.Jmt.get(t);return s&&s.eyt()?s:null}nyt(){return this.qmt}ryt(){for(const t of this.qmt)t.hyt()}oyt(){for(const t of this.Hmt)t.ayt()}lyt(t){this.oyt(),this.lgt++;for(const s of t.F6()){const t=s.Z5();t&&(this.$c.uyt(s),t.gE(),this.$c.cyt())}this.lgt--}async fyt(t){this.oyt(),this.lgt++;for(const s of this.dyt(t))await this.$c.pyt(s);this.lgt--}*dyt(t){for(const s of t.F6()){const t=s.Z5();t&&(this.$c.uyt(s),yield*t.myt(),this.$c.cyt())}}gyt(t,s,i,e){let n=!1;if(!t.c$())return this.yyt(s,i,e);this.ugt++;for(const r of t.F6()){const t=r.Z5();if(!t)continue;this.$c.uyt(r);for(const r of t.wyt()){const t=r.gyt(s,i,e);n=n||t}const h=t.gyt(s,i,e);n=n||h,this.$c.cyt()}return this.ugt--,n}*Syt(t,s,i,e){let n=!1;if(!t.c$())return this.yyt(s,i,e);this.ugt++;for(const r of t.F6()){const t=r.Z5();if(!t)continue;this.$c.uyt(r);for(const r of t.wyt()){const t=yield*r.Syt(s,i,e);n=n||t}const h=yield*t.Syt(s,i,e);n=n||h,this.$c.cyt()}return this.ugt--,n}yyt(t,s,i){return this.ogt.push([t,s,i]),!1}vyt(t,s,i){let e=null;const n=new Promise(t=>e=t);return this.agt.push([t,s,i,e]),n}*byt(){if(this.$c.Myt())throw new Error("should not be in breakpoint");const t=this.$c.p$();for(;this.agt.length;){const[s,i,e,n]=this.agt.shift();n(yield*this.Syt(t,s,i,e))}}async xyt(){for(const t of this.byt())await this.$c.pyt(t)}Gyt(t,s,i,e){let n=!1;const r=t.c$(),h=r.Z5();if(!h)return;this.ugt++,this.$c.uyt(r);const o=h.wyt();for(let t=0,r=o.length;t<r;++t){const r=o[t].Gyt(s,i,e);n=n||r}const a=h.Gyt(s,i,e);return n=n||a,this.$c.cyt(),this.ugt--,n}*Tyt(t,s,i,e){let n=!1;const r=t.c$(),h=r.Z5();if(!h)return;this.ugt++,this.$c.uyt(r);const o=h.wyt();for(let t=0,r=o.length;t<r;++t){const r=yield*o[t].Tyt(s,i,e);n=n||r}const a=yield*h.Tyt(s,i,e);return n=n||a,this.$c.cyt(),this.ugt--,n}Iyt(){return this.ugt}Cyt(){return this.Iyt()>0}_yt(){return++this.ugt}Eyt(){--this.ugt}Pyt(){return this.lgt>0}dj(){return this.Pyt()||this.Cyt()}J4(t){for(const[s,i,e]of this.ogt)this.gyt(t,s,i,e);mv.bh(this.ogt)}cj(t){t?this.cgt++:this.cgt--}SH(){return this.cgt>0}Ayt(t){for(let s=0,i=t.length;s<i;++s)t[s].Ryt().Pu()}Oyt(t){for(let s=0,i=t.length;s<i;++s)t[s].Ryt().vpt()}oX(t){for(let s=0,i=t.length;s<i;++s)t[s].Ryt().bpt()}lX(t){for(let s=0,i=t.length;s<i;++s)t[s].Ryt().dX()}mN(t){const s=new Set,i=this.xpt.Ypt(),e=this.xpt.Xpt();for(let n=0;n<=e;++n){const e=i[n].Cmt();if(e)for(const i of e)t&&t.has(i)||s.add(i)}return s}Fyt(t){const s=new Set([...t]),i=this.mN(s);if(i.size>0){for(const t of i)t.Ryt().vpt();return[...i]}return null}Dyt(){const t=mv.Un(mv.Lyt,this);return this.fgt.push(t),t}kyt(){return this.fgt}Nyt(){if(!this.fgt.length)return;const t=this.Fgt();let s=!1;this.lgt++;for(let i=0,e=this.fgt.length;i<e;++i){const e=this.fgt[i];e.$yt()&&e.Byt(t),e.Wyt()&&(s=!0)}s&&(this.jyt(),t.Bf(null)),this.lgt--}async Vyt(){if(!this.fgt.length)return;const t=this.Fgt();let s=!1;this.lgt++;for(let i=0,e=this.fgt.length;i<e;++i){const e=this.fgt[i];e.$yt()&&await e.Hyt(t),e.Wyt()&&(s=!0)}s&&(this.jyt(),t.Bf(null)),this.lgt--}jyt(){const t=mv.Eh(this.fgt,t=>t.Wyt());for(const s of t)s.qn()}e6(){for(const t of this.fgt)t.qn();mv.bh(this.fgt)}Uyt(t){for(const s of this.fgt)s.Mpt(t);for(const s of t){const t=this.ggt.get(s);if(this.ggt.delete(s),t)for(const{resolve:s}of t.qyt.values())s(!0)}}zyt(t){this.dgt.push({promise:t,Jyt:this.Iyt()})}Yyt(){mv.bh(this.dgt)}Xyt(){const t=this.Iyt(),s=Promise.all(this.dgt.filter(s=>s.Jyt===t).map(t=>t.promise));return this.dgt=this.dgt.filter(s=>s.Jyt<t),s}GN(t){const s=t.toLowerCase();this.pgt.push(s),this.$c.JH(mv.sB.tB.Q$.Kyt,null),this.pgt.pop();for(const t of this.$c.aN().kyt())t.Zyt()&&t.Qyt()===s&&t.twt();const i=this.mgt.get(s);i&&(i.resolve(),this.mgt.delete(s))}IN(t){const s=t.toLowerCase(),i=this.mgt.get(s);if(i)return i.promise;{let t=null;const i=new Promise(s=>t=s);return this.mgt.set(s,{promise:i,resolve:t}),i}}swt(){if(0===this.pgt.length)throw new Error("not in a signal");return this.pgt.at(-1)}iwt(t){let s=this.ggt.get(t);return s||(s={ewt:[],qyt:new Map},this.ggt.set(t,s)),s}NH(t,s){const i=this.iwt(t),e=s.toLowerCase();i.ewt.push(e),this.$c.JH(t.qW().rwt().Q$.nwt,t),i.ewt.pop();for(const s of this.$c.aN().kyt())s.hwt()&&s.Qyt()===e&&s.owt(t);const n=i.qyt.get(e);n&&(n.resolve(!1),i.qyt.delete(e)),0===i.ewt.length&&0===i.qyt.size&&this.ggt.delete(t)}$H(t,s){const i=this.iwt(t),e=s.toLowerCase(),n=i.qyt.get(e);if(n)return n.promise;{let t=null;const s=new Promise(s=>t=s);return i.qyt.set(e,{promise:s,resolve:t}),s}}awt(t){const s=this.iwt(t);if(!s||0===s.ewt.length)throw new Error("not in a signal");return s.ewt.at(-1)}e5(){return{groups:this.lwt(),cnds:this.uwt(),acts:this.cwt(),vars:this.fwt(),waits:this.dwt()}}n5(t){this.pwt(t.groups),this.mwt(t.cnds),this.gwt(t.acts),this.ywt(t.vars),this.wwt(t.waits)}lwt(){const t={};for(const s of this.nyt())t[s._1().toString()]=s.Swt();return t}pwt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.iyt(t);e&&e.vwt(i)}}uwt(){const t={};for(const[s,i]of this.Ymt){const e=i.e5();e&&(t[s.toString()]=e)}return t}mwt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.Ymt)i.n5(s.get(t)||null)}cwt(){const t={};for(const[s,i]of this.Xmt){const e=i.e5();e&&(t[s.toString()]=e)}return t}gwt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.Xmt)i.n5(s.get(t)||null)}fwt(){const t={};for(const[s,i]of this.Zmt)i.bwt()||!i.WQ()&&!i.JG()||(t[s.toString()]=i._nt());return t}ywt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.qgt(t);e&&e.urt(i)}}dwt(){return this.fgt.filter(t=>!t.Mwt()).map(t=>t.e5())}wwt(t){this.e6();for(const s of t){const t=mv.Lyt.xwt(this,s);t&&this.fgt.push(t)}}Gwt(){return[...this.$c.p$().F6()].map(t=>t.Z5()).filter(t=>t).map(t=>t.Twt())}Iwt(t){for(;t;){const s=t.Wgt();if(s instanceof mv.Cwt)return s;t=s}return null}ygt(t,s){Array.isArray(s)||(s=[]);const i=this.lN(t.toLowerCase());if(!i)return null;if(!i.Cu())return i.uN();const e=i._wt();if(s.length<e.length){s=s.slice(0);do{s.push(e[s.length].Ogt())}while(s.length<e.length)}const n=i.fN();return n.gN(n.dN(),!1,i.wN(),i.uN(),...s)}}}{const yv=self.Cs;yv.wgt=class extends yv.Vn{constructor(t,s){super(),this.qpt=t,this.$c=t.aB(),this.Yn=s[0],this.Ewt=[],this.Pwt=new Map,this.Awt=new Map,this.Rwt=new Map,this.Owt=!1,this.Fwt=[],this.Dwt=[],this.Lwt=new Set;for(const t of s[1])this.kwt(t,null,this.Ewt);this.Nwt=this.$c.iU()?{type:"sheet",name:this.Yn,$wt:0,children:[]}:null}qn(){this.qpt=null,this.$c=null}kwt(t,s,i){switch(t[0]){case 0:case 3:this.Bwt(t,s,i);break;case 1:this.Wwt(t,s,i);break;case 2:this.jwt(t,s,i);break;case 4:this.Vwt(t,s);break;case 5:this.Hwt(t,s,i);break;case 6:this.Uwt(t,s);break;default:throw new Error("invalid event type")}}Bwt(t,s,i){const e=yv.qwt.UT(this,s,t);if(e.Hpt()){i.push(e);const t=e.zwt();for(let s=0,i=t.length;s<i;++s)t[s].Jwt()&&this.Ywt(e,s)}else e.Jwt()?this.Ywt(e,0):i.push(e)}Vwt(t,s){const i=yv.Cwt.Xwt(this,s,t);this.qpt.Cgt(i)}Uwt(t,s){const i=yv.Cwt.Kwt(this,s,t);this.qpt.Cgt(i)}Wwt(t,s,i){const e=yv.Zwt.UT(this,s,t);i.push(e)}jwt(t,s,i){const e=yv.Qwt.UT(this,s,t);i.push(e)}Hwt(t,s,i){const e=yv.tSt.UT(this,s,t);i.push(e)}Ywt(t,s){t.Hpt()||this.qpt.Sgt(t);const i=t.Lgt(s),e=i.sSt(),n=i.fH();if(i.iSt()){let r=this.Awt.get(n);r||(r=new Map,this.Awt.set(n,r));const h=i.eSt().toLowerCase();let o=r.get(e);o||(o=new Map,r.set(e,o));let a=o.get(h);a||(a=[],o.set(h,a)),a.push([t,s])}else{let r=this.Pwt.get(n);r||(r={nSt:new Map,rSt:new Map},this.Pwt.set(n,r));const h=i.fz();let o;h?(o=r.rSt.get(h),o||(o=new Map,r.rSt.set(h,o))):o=r.nSt;let a=o.get(e);a||(a=[],o.set(e,a)),a.push([t,s])}}vgt(){const t=this.Ewt;for(let s=0,i=t.length;s<i;++s){const e=s<i-1&&t[s+1]instanceof yv.qwt&&t[s+1].hSt();t[s].vgt(e)}}oSt(t){this.Fwt.push(t)}I4(){yv.bh(this.Dwt),this.aSt(this),this.Lwt.clear()}aSt(t){const s=t.Dwt,i=t.Lwt;for(const e of this.Fwt){const n=e.lSt();e.uSt()&&t!==n&&!i.has(n)&&(i.add(n),n.aSt(t),s.push(n))}}wyt(){return this.Dwt}aN(){return this.qpt}aB(){return this.$c}Pc(){return this.Yn}cSt(t,s){this.Rwt.set(s,t)}fSt(t){return this.Rwt.get(t)||null}ayt(){this.Owt=!1}gE(){if(this.Owt)return;const t=this.$c,s=t.dSt(),i=s?performance.now():0;this.Owt=!0;const e=this.aN(),n=e.Fgt();for(const s of this.Ewt)s.gE(n),e.Ayt(s.tX()),e.Yyt(),t.mj();n.Bf(null),s&&(this.Nwt.$wt+=performance.now()-i)}*myt(){if(this.Owt)return;this.Owt=!0;const t=this.$c,s=this.aN(),i=s.Fgt();for(const e of this.Ewt)yield*e.myt(i),s.Ayt(e.tX()),s.Yyt(),t.mj();i.Bf(null)}gyt(t,s,i){if(!s)return this.pSt(t,s,null,null);{const e=s.fH();let n=!1,r=this.pSt(t,s,e,i);n=n||r;for(const h of e.yj())r=this.pSt(t,s,h,i),n=n||r}}pSt(t,s,i,e){const n=this.Pwt.get(i);if(!n)return!1;const r=e?n.rSt.get(e):n.nSt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){const e=this.mSt(s,t,i);o=o||e}return o}*Syt(t,s,i){if(!s)return yield*this.gSt(t,s,null,null);{const e=s.fH();let n=!1,r=yield*this.gSt(t,s,e,i);n=n||r;for(const h of e.yj())r=yield*this.gSt(t,s,h,i),n=n||r}}*gSt(t,s,i,e){const n=this.Pwt.get(i);if(!n)return!1;const r=e?n.rSt.get(e):n.nSt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){let e;e=t.ySt()?this.mSt(s,t,i):yield*this.wSt(s,t,i),o=o||e}return o}Gyt(t,s,i){const e=s.fH(),n=this.Awt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=this.mSt(null,s[0],s[1]);o=o||i}return o}*Tyt(t,s,i){const e=s.fH(),n=this.Awt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=s[0],e=s[1];let n;n=i.ySt()?this.mSt(null,i,e):yield*this.wSt(null,i,e),o=o||n}return o}mSt(t,s,i){const e=this.$c,n=this.qpt,r=n.pN(),h=n.bN(),o=n.Iyt();let a=!1;r&&n.Oyt(r.dN()),n.Oyt(s.dN());const l=o>1;l&&n.$gt().iX();const u=h.iX(s);t&&(s.zwt()[i].fH().nj().kpt(t),t.xH()&&t.SSt());let c=!0;if(s.rq()){const t=s.vSt();for(let s=0,i=t.length;s<i;++s)if(!t[s].bSt(u)){c=!1;break}}return c&&(s.Hpt()?s.MSt(u,i):s.gE(u),a=u.gmt()),h.dX(),l&&n.$gt().dX(),n.lX(s.dN()),r&&n.lX(r.dN()),r||1!==o||(n.Yyt(),n.SH()||e.mj()),a}*wSt(t,s,i){const e=this.$c,n=this.qpt,r=n.pN(),h=n.bN(),o=n.Iyt();let a=!1;r&&n.Oyt(r.dN()),n.Oyt(s.dN());const l=o>1;l&&n.$gt().iX();const u=h.iX(s);t&&(s.zwt()[i].fH().nj().kpt(t),t.xH()&&t.SSt());let c=!0;if(s.rq()){const t=s.vSt();for(let s=0,i=t.length;s<i;++s)if(!(yield*t[s].xSt(u))){c=!1;break}}return c&&(s.Hpt()?yield*s.GSt(u,i):yield*s.myt(u),a=u.gmt()),h.dX(),l&&n.$gt().dX(),n.lX(s.dN()),r&&n.lX(r.dN()),r||1!==o||(n.Yyt(),n.SH()||e.mj()),a}Twt(){return this.Nwt}}}{let wv=function(t,s){return!0};NoActions=wv;const Sv=self.Cs,vv=[];function*bv(t,s){return!0}Sv.qwt=class extends Sv.Vn{constructor(t,s,i){super(),this.y5=t,this.$c=t.aB(),this.TSt=s,this.ISt=null,this.xpt=this.$c.aN().bN(),this.CSt=[],this._St=[],this.ESt=!1,this.PSt=!1,this.ASt=!1,this.RSt=!1,this.OSt=!!i[2],this.FSt=!1,this.DSt=null,this.LSt=[],this.hht=[],this.kSt=[],this.NSt=wv,this.$St=bv,this.BSt=!1,this.WSt=!1,this.jSt="",this.VSt=!1,this.HSt=null,this.Nwt=null,this.zQ=i[4],this.USt=i[5],this.y5.cSt(this,this.USt),this.qSt=this.$c.iU()?{zSt:i[3][0],JSt:i[3][1],YSt:!1,XSt:!1,KSt:!1,ZSt:!1}:null,this.aN().Ggt(this),3===i[0]&&this.QSt(i[1]);let e=0;for(const t of i[6]){const s=Sv.tvt.UT(this,t,e++);this.LSt.push(s),this.svt(s.fH())}e=0;for(const t of i[7]){const s=Sv.ivt.UT(this,t,e++);this.hht.push(s)}if(9===i.length){const t=i[8];for(const s of t)this.y5.kwt(s,this,this.kSt)}this.LSt.length&&(this.FSt=null===this.LSt[0].fH()&&this.LSt[0].sSt()===Sv.sB.tB.Q$.evt),0===this.LSt.length&&(this.LSt=vv),0===this.hht.length&&(this.hht=vv),0===this.kSt.length&&(this.kSt=vv)}static UT(t,s,i){return Sv.Un(Sv.qwt,t,s,i)}QSt(t){this.BSt=!0,this.WSt=!!t[0],this.VSt=this.WSt,this.jSt=t[1].toLowerCase(),this.HSt=[],this.aN().Mgt(this),this.$c.iU()&&(this.Nwt={type:"group",name:t[1],$wt:0,children:[]})}nvt(t){this.HSt.push(t)}rvt(t,s){for(const i of t.c4().Gj())s.includes(i)||s.push(i)}hvt(t,s){if(t)if(s.includes(t)||s.push(t),t.v1())for(const i of t.xj())i.xH()&&this.rvt(i,s);else t.xH()&&this.rvt(t,s)}svt(t){this.hvt(t,this.CSt)}ovt(t){this.hvt(t,this._St)}avt(){this.CSt=this.$c.S1()}vgt(t){this.RSt=!!t,this.lvt(),this.uvt();for(const t of this.LSt)t.vgt();if(this.hht.length>0){let t=!1;for(const s of this.hht)s.vgt(),s.cvt()&&(t=!0);t?(this.NSt=this.fvt,this.$St=this.dvt):(this.NSt=this.pvt,this.$St=this.mvt)}const s=this.kSt;for(let t=0,i=s.length;t<i;++t){const e=t<i-1&&s[t+1]instanceof Sv.qwt&&s[t+1].hSt();s[t].vgt(e)}this.qSt&&this.gvt(),this.Nwt&&this.yvt().Twt().children.push(this.Nwt)}Twt(){return this.Nwt}yvt(){let t=this.rq();for(;t;){if(t.eyt())return t;t=t.rq()}return this.y5}gvt(){const t=this.qSt;t.YSt=this.LSt.every(t=>t.ySt()),t.XSt=this.hht.every(t=>t.ySt()),t.KSt=this.kSt.every(t=>t.ySt()),t.ZSt=t.YSt&&t.XSt&&t.KSt}wvt(){let t=this;do{t.gvt(),t=t.rq()}while(t)}lvt(){if(!this.eyt())return;let t=this.rq();for(this.ASt=!0;t;){if(!t.eyt()){this.ASt=!1;break}t=t.rq()}}Svt(){const t=this.$c.S1();if(this.CSt===t)this._St=t;else{this._St=Sv.Oh(this.CSt);let t=this.rq();for(;t;){for(const s of t.CSt)this.ovt(s);t=t.rq()}const s=this.aN();this.CSt=s.Agt(this.CSt),this._St=s.Agt(this._St)}}uvt(){if(!this.vvt())return;this.DSt=[];let t=this.rq();for(;t;)this.DSt.push(t),t=t.rq();this.DSt.reverse()}bvt(){this.PSt=!0,this.TSt&&this.TSt.bvt()}Gmt(){return this.PSt}tX(){return this.CSt}dN(){return this.ESt||(this.ESt=!0,this.Svt()),this._St}Mvt(t){return this.CSt.includes(t)}vSt(){return this.DSt}Z5(){return this.y5}aN(){return this.y5.aN()}aB(){return this.$c}rq(){return this.TSt}xvt(t){this.ISt=t}Wgt(){return this.ISt||this.TSt}Gvt(){return this.USt}Tvt(){return this.qSt&&this.qSt.JSt}Ivt(){return this.Tvt()&&this.qSt.zSt}Cvt(t){this.qSt.zSt=!!t,this.wvt()}eyt(){return this.BSt}_vt(){return this.ASt}hSt(){return this.FSt}Evt(){return this.RSt}xgt(){return this.jSt}Swt(){return this.VSt}hyt(){this.vwt(this.WSt)}vwt(t){if(t=!!t,!this.BSt)throw new Error("not a group");if(this.VSt!==t){this.VSt=t;for(const t of this.HSt)t.Pvt();if(this.HSt.length){const t=this.$c.O$().Z5();t&&t.I4()}}}_1(){return this.zQ}Hpt(){return this.OSt}Jwt(){return this.LSt.length&&this.LSt[0].Jwt()}Avt(){return this.ISt&&this.ISt instanceof Sv.Cwt}vvt(){return this.Avt()||this.LSt.some(t=>t.Jwt())}zwt(){return this.LSt}Tmt(){return this.LSt.length}Lgt(t){if((t=Math.floor(t))<0||t>=this.LSt.length)throw new RangeError("invalid condition index");return this.LSt[t]}Rvt(t){return this.Lgt(t)}Ovt(t){let s=t.xk();if(0===s)return!0;--s;const i=t.Fvt()?t.Dvt():t.fH();for(;s>=0;--s){const t=this.LSt[s];if(i===t.fH()||t.Fvt()&&t.Dvt()===i)return!1}return!0}Lvt(){return this.hht}kvt(){return this.hht.length}Ngt(t){if((t=Math.floor(t))<0||t>=this.hht.length)throw new RangeError("invalid action index");return this.hht[t]}Nvt(t){t=Math.floor(t);const s=this.hht.find(s=>s.$vt()===t);if(!s)throw new RangeError("invalid action debug index");return s}Bvt(t){return(t=Math.floor(t))>=0&&t<this.hht.length}Wvt(){return this.kSt}jgt(){return this.kSt.filter(t=>t instanceof Sv.Zwt)}bSt(t){t.umt(this);const s=this.LSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t.fmt(e),n.Iz())throw new Error("trigger cannot be used as sub-event to a loop");if(n.gE())i=!0;else if(!this.OSt)return!1}return!this.OSt||i}MSt(t,s){t.umt(this),t.fmt(s),this.LSt[s].gE()&&(this.NSt(t,0)&&this.jvt(t),t.mmt(!0))}*xSt(t){t.umt(this);const s=this.LSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t.fmt(e),n.Iz())throw new Error("trigger cannot be used as sub-event to a loop");let r;if(r=n.ySt()?n.gE():yield*n.myt(),r)i=!0;else if(!this.OSt)return!1}return!this.OSt||i}*GSt(t,s){t.umt(this),t.fmt(s);const i=this.LSt[s];let e;if(e=i.ySt()?i.gE():yield*i.myt(),e){let s;s=this.Vvt()?this.NSt(t,0):yield*this.$St(t,0),s&&(this.Hvt()?this.jvt():yield*this.Uvt()),t.mmt(!0)}}gE(t){t.umt(this),this.FSt||t.ymt(!1),this.OSt?this.qvt(t):this.zvt(t)}*myt(t){(this.Ivt()||this.$c.Jvt())&&(yield this),t.umt(this),this.FSt||t.ymt(!1),this.OSt?yield*this.Yvt(t):yield*this.Xvt(t)}qvt(t){const s=this.LSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.Jwt())continue;t.fmt(e);const r=n.gE();i=i||r}t.mmt(i),i&&(this.NSt(t,0)&&this.jvt(t),this.RSt&&t.ymt(!0))}*Yvt(t){const s=this.LSt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.Jwt())continue;let r;t.fmt(e),r=n.ySt()?n.gE():yield*n.myt(),i=i||r}if(t.mmt(i),i){let s;s=this.Vvt()?this.NSt(t,0):yield*this.$St(t,0),s&&(this.Hvt()?this.jvt():yield*this.Uvt()),this.RSt&&t.ymt(!0)}}zvt(t){const s=this.LSt;for(let i=0,e=s.length;i<e;++i){const e=s[i];if(t.fmt(i),!e.gE())return void t.mmt(!1)}t.mmt(!0),this.NSt(t,0)&&this.jvt(t),t.gmt()&&this.RSt&&t.ymt(!0)}*Xvt(t){const s=this.LSt;for(let i=0,e=s.length;i<e;++i){const e=s[i];let n;if(t.fmt(i),n=e.ySt()?e.gE():yield*e.myt(),!n)return void t.mmt(!1)}let i;t.mmt(!0),i=this.Vvt()?this.NSt(t,0):yield*this.$St(t,0),i&&(this.Hvt()?this.jvt():yield*this.Uvt()),t.gmt()&&this.RSt&&t.ymt(!0)}pvt(t,s){const i=this.hht;for(let e=s,n=i.length;e<n;++e){const s=i[e];t.pmt(e),s.gE()}return!0}*mvt(t,s){const i=this.hht;for(let e=s,n=i.length;e<n;++e){const s=i[e];t.pmt(e),s.ySt()?s.gE():yield*s.myt()}return!0}fvt(t,s){const i=this.aN(),e=this.hht;for(let n=s,r=e.length;n<r;++n){const s=e[n];t.pmt(n);const r=s.gE();if(s.Kvt()&&!0===r)return!1;s.Zvt()&&r instanceof Promise&&i.zyt(r)}return!0}*dvt(t,s){const i=this.aN(),e=this.hht;for(let n=s,r=e.length;n<r;++n){const s=e[n];let r;if(t.pmt(n),r=s.ySt()?s.gE():yield*s.myt(),s.Kvt()&&!0===r)return!1;s.Zvt()&&r instanceof Promise&&i.zyt(r)}return!0}Qvt(t){this.NSt(t,t.dmt())&&this.jvt()}*tbt(t){(yield*this.$St(t,t.dmt()))&&(yield*this.Uvt())}jvt(){if(!this.kSt.length)return;const t=this.eyt()&&this.$c.dSt(),s=t?performance.now():0,i=this.xpt,e=i.iX(this);this.PSt?this.sbt(e):this.ibt(e),i.dX(),t&&(this.Nwt.$wt+=performance.now()-s)}sbt(t){const s=this.BSt,i=this.ASt,e=this.aN(),n=this.kSt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.tX(),l=!i||!s&&r<o;l&&e.oX(a),h.gE(t),l?e.lX(a):e.Ayt(a)}}ibt(t){const s=this.kSt;for(let i=0,e=s.length;i<e;++i)s[i].gE(t)}*Uvt(){if(!this.kSt.length)return;const t=this.xpt,s=t.iX(this);this.PSt?yield*this.ebt(s):yield*this.nbt(s),t.dX()}*ebt(t){const s=this.BSt,i=this.ASt,e=this.aN(),n=this.kSt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.tX(),l=!i||!s&&r<o;l&&e.oX(a),yield*h.myt(t),l?e.lX(a):e.Ayt(a)}}*nbt(t){const s=this.kSt;for(let i=0,e=s.length;i<e;++i)yield*s[i].myt(t)}aX(t,s){s.lmt();const i=this.LSt;if(!this.Hpt())for(let e=t.cmt()+1,n=i.length;e<n;++e){const t=i[e];if(s.fmt(e),!t.gE())return!1}return this.NSt(s,0)&&this.jvt(s),!0}*rbt(t,s){s.lmt();const i=this.LSt;if(!this.Hpt())for(let e=t.cmt()+1,n=i.length;e<n;++e){const t=i[e];let n;if(s.fmt(e),n=t.ySt()?t.gE():yield*t.myt(),!n)return!1}let e;return e=this.Vvt()?this.NSt(s,0):yield*this.$St(s,0),e&&(this.Hvt()?this.jvt():yield*this.Uvt()),!0}ySt(){return!this.Ivt()&&!this.$c.Jvt()&&this.qSt.ZSt}Vvt(){return!this.$c.Jvt()&&this.qSt.XSt}Hvt(){return!this.$c.Jvt()&&this.qSt.KSt}hbt(t){if(this.rq()){const s=this.vSt();for(let i=0,e=s.length;i<e;++i)if(!s[i].bSt(t))return!1}return!0}*obt(t){if(this.rq()){const s=this.vSt();for(let i=0,e=s.length;i<e;++i)if(!(yield*s[i].xSt(t)))return!1}return!0}abt(t,s,i){if(s.length>0)if(i){const i=s.map(t=>t.qs(0));t.$gt().iX(),this.ISt.lbt(i)}else this.ISt.ubt(s);else i&&t.$gt().iX()}cbt(t,s,i,e){let n,r;const h=t.length>0;let o=null;const a=this.$c,l=this.xpt,u=a.aN(),c=this.ISt,f=c.Zvt(),d=u._yt()>1;if(this.abt(u,s,d),h&&(i?u.oX(t):u.Oyt(t)),null!==e){if(e.fbt){const t=i?e.fbt.nj():e.fbt.Ryt().Spt(),s=e.dbt.nj();s.Npt(t.ej()),s.jpt(),i||e.dbt.pbt()}else if(e.mbt){const t=e.mbt.nj();t.Npt(e.gbt),t.jpt()}e.ybt&&(o=u.Fyt(t))}const p=l.iX(this);return i&&p.Imt(t),this.hbt(p)&&(p.umt(this),f&&([r,n]=c.wbt()),this.zvt(p),f&&c.Sbt(r)),l.dX(),d&&u.$gt().dX(),null!==o&&u.lX(o),h&&u.lX(t),u.Eyt(),n}*vbt(t,s,i,e){let n,r;(this.Ivt()||this.$c.Jvt())&&(yield this);const h=t.length>0;let o=null;const a=this.$c,l=this.xpt,u=a.aN(),c=this.ISt,f=c.Zvt(),d=u._yt()>1;if(this.abt(u,s,d),h&&(i?u.oX(t):u.Oyt(t)),null!==e){if(e.fbt){const t=i?e.fbt.nj():e.fbt.Ryt().Spt(),s=e.dbt.nj();s.Npt(t.ej()),s.jpt(),i||e.dbt.pbt()}else if(e.mbt){const t=e.mbt.nj();t.Npt(e.gbt),t.jpt()}e.ybt&&(o=u.Fyt(t))}const p=l.iX(this);return i&&p.Imt(t),(yield*this.obt(p))&&(p.umt(this),f&&([r,n]=c.wbt()),yield*this.Xvt(p),f&&c.Sbt(r)),l.dX(),d&&u.$gt().dX(),null!==o&&u.lX(o),h&&u.lX(t),u.Eyt(),n}bbt(t,s){const i=this.dN(),e=i.length>0,n=this.$c,r=this.xpt,h=n.aN(),o=h._yt()>1;o&&h.$gt().iX(),this.ISt.lbt(t),e&&(s?h.oX(i):h.Oyt(i));const a=r.iX(this);this.hbt(a)&&(a.umt(this),this.zvt(a)),r.dX(),o&&h.$gt().dX(),e&&h.lX(i),h.Eyt()}*Mbt(t,s){(this.Ivt()||this.$c.Jvt())&&(yield this);const i=this.dN(),e=i.length>0,n=this.$c,r=this.xpt,h=n.aN(),o=h._yt()>1;o&&h.$gt().iX(),this.ISt.lbt(t),e&&(s?h.oX(i):h.Oyt(i));const a=r.iX(this);(yield*this.obt(a))&&(a.umt(this),yield*this.Xvt(a)),r.dX(),o&&h.$gt().dX(),e&&h.lX(i),h.Eyt()}gN(t,s,i,e,...n){let r,h;const o=t.length>0,a=this.$c,l=this.xpt,u=a.aN(),c=this.ISt,f=c.Zvt(),d=u._yt()>1;d&&u.$gt().iX(),n.length>0&&this.ISt.lbt(n),o&&(s?u.oX(t):u.Oyt(t));const p=l.iX(this);return p.bmt(i,e),l.Kpt(p),a.rX(!1),this.hbt(p)&&(p.umt(this),f&&([h,r]=c.wbt()),this.zvt(p),f&&c.Sbt(h)),a.rX(!0),l.dX(),l.Zpt(),d&&u.$gt().dX(),o&&u.lX(t),u.Eyt(),r||p.Mmt()}}}{const Mv=self.Cs,xv=[];let Gv=!1;Mv.tSt=class extends Mv.Vn{constructor(t,s,i){super();const e=t.aB(),n=t.aN();this.y5=t,this.qpt=n,this.$c=t.aB(),this.TSt=s;const r=e.xbt(i[1]);this.Gbt=r,this.USt=i[2],this.y5.cSt(this,this.USt),this.qSt=e.iU()?{zSt:i[3][0],JSt:i[3][1]}:null}static UT(t,s,i){return Mv.Un(Mv.tSt,t,s,i)}vgt(){const t=this.Gbt,s=this.$c.aN().Vgt(this);this.Gbt=t.bind(null,this.$c.gW(),s)}rq(){return this.TSt}Wgt(){return this.TSt}Z5(){return this.y5}Gvt(){return this.USt}Tvt(){return this.qSt&&this.qSt.JSt}Ivt(){return this.Tvt()&&this.qSt.zSt}Cvt(t){this.qSt.zSt=!!t}hSt(){return!1}tX(){return xv}dN(){return this.TSt?this.TSt.dN():xv}gE(t){t.umt(this),this.qpt.zyt(this.Tbt())}async Tbt(){try{await this.Gbt()}catch(t){console.error(`Unhandled exception running script %c${this.Z5().Pc()}, event ${this.Gvt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.eU&&self.eU.Ibt(this),Gv||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Gv=!0)}}*myt(t){t.umt(this),(this.Ivt()||this.$c.Jvt())&&(yield this),this.gE(t)}ySt(){return!this.Ivt()&&!this.$c.Jvt()}static Cbt(){return Gv}static _bt(){Gv=!0}}}{const Tv=self.Cs,Iv=self.assert;Tv.Cwt=class extends Tv.Vn{constructor(t,s,i){super(),this.y5=t,this.$c=t.aB(),this.TSt=s,this.Ebt=0,this.Pbt="",this.Abt=0,this.Rbt=[],this.Obt=!0,this.Fbt="",this.mpt=null,this.Dbt=!1,this.Lbt=[],this.kbt=!1,this.Nbt=!1,this.$bt=0,this.Bbt=-1,this.Wbt=new Map,this.jbt=Tv.qwt.UT(t,s,i),this.jbt.xvt(this)}Vbt(t){this.Ebt=0,this.Pbt=t[0],this.Abt=t[1],this.Rbt=t[2].map(t=>Tv.Zwt.UT(this.y5,this,t)),this.Obt=t[3],this.Nbt=t[4],this.kbt=t[5]}Hbt(t){this.Ebt=1,this.Fbt=t[1],this.mpt=this.$c.J0(t[2]),this.jbt.svt(this.mpt),this.Pbt=this.mpt.Pc()+"."+this.Fbt,this.Abt=t[3],this.Rbt=t[4].map(t=>Tv.Zwt.UT(this.y5,this,t)),this.Obt=t[5],this.Nbt=t[6],this.kbt=t[7],this.mpt.Ubt(this)}static Xwt(t,s,i){const e=Tv.Un(Tv.Cwt,t,s,i),n=i[1];return e.Vbt(n),e}static Kwt(t,s,i){const e=Tv.Un(Tv.Cwt,t,s,i),n=i[1];return e.Hbt(n),e}bgt(){if(this.mpt&&this.mpt.v1())for(const t of this.mpt.xj())if(t.qbt(this.Fbt)){this.Dbt=!0;break}}vgt(){for(const t of this.Rbt)t.vgt();this.jbt.vgt(!1)}_gt(){return this.Ebt}jgt(){return this.Rbt}_wt(){return this.Rbt}cN(){return this.Rbt.length}zbt(t){this.Lbt.push(t)}Jbt(){return this.Lbt}ubt(t){const s=this.Rbt;for(let i=0,e=s.length;i<e;++i)s[i].urt(t[i].qs(0))}lbt(t){const s=this.Rbt;for(let i=0,e=s.length;i<e;++i)s[i].urt(t[i])}Ybt(){return this.Rbt.map(t=>t._nt())}rq(){return this.TSt}Wgt(){return this.TSt}Egt(){return this.Pbt}Xbt(){return this.Fbt}Kbt(){return this.Dbt}wN(){return this.Abt}fH(){return this.mpt}Cu(){return this.Obt}uN(){switch(this.Abt){case 0:return null;case 2:return"";default:return 0}}fN(){return this.jbt}yN(){return this.kbt}Zvt(){return this.Nbt}wbt(){const t=this.$bt++;let s;this.Bbt=t;const i=new Promise(t=>s=t);return this.Wbt.set(t,{resolve:s,Zbt:0}),[t,i]}Sbt(t){const s=this.Wbt.get(t);0===s.Zbt&&(s.resolve(),this.Wbt.delete(t)),this.Bbt=-1}Qbt(){return this.Wbt.get(this.Bbt).Zbt++,this.Bbt}tMt(t){this.Bbt=t,this.Wbt.get(t).Zbt--}sMt(t,s){const i=new Map,e=[];for(const t of this.mpt.nj().ej()){const s=t.fH();if(s.qbt(this.Fbt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&this.jbt.cbt(t,s,this.kbt,{mbt:this.mpt,gbt:e}),i.size>0)for(const[e,n]of i){const i=e.iMt(this.Fbt).fN(),r=[...new Set([...t,...i.tX()])];i.cbt(r,s,this.kbt,{mbt:e,gbt:n})}}*eMt(t,s){const i=new Map,e=[];for(const t of this.mpt.nj().ej()){const s=t.fH();if(s.qbt(this.Fbt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&(yield*this.jbt.vbt(t,s,this.kbt,{mbt:this.mpt,gbt:e})),i.size>0)for(const[e,n]of i){const i=e.iMt(this.Fbt).fN(),r=[...new Set([...t,...i.tX()])];yield*i.vbt(r,s,this.kbt,{mbt:e,gbt:n})}}}}{const Cv=self.Cs,_v=[];Cv.Zwt=class extends Cv.Vn{constructor(t,s,i){super();const e=t.aN();this.y5=t,this.qpt=e,this.$c=t.aB(),this.TSt=s,this.rgt=e.$gt(),this.Yn=i[1],this.zc=i[2],this.nMt=i[3],this.SG=!!i[4],this.rMt=!!i[5],this.hMt=s instanceof Cv.Cwt,this.zQ=i[6],this.oMt=this.$c.Hgt(i[8]),this.aMt=t=>this.urt(t),this.lMt=()=>this._nt(),this.uMt=!this.TSt||this.SG||this.rMt,this.iht=this.nMt,this.cMt=-1,this.fMt()&&(this.iht=this.iht?1:0),!this.dMt()||this.JG()||this.bwt()||(this.cMt=e.Rgt(this)),e.Pgt(this)}static UT(t,s,i){return Cv.Un(Cv.Zwt,t,s,i)}vgt(){if(this.dMt()&&!this.JG()&&!this.bwt()&&!this.pMt()){const t=this.qpt.Iwt(this);t&&t.zbt(this)}}Pc(){return this.Yn}Hgt(){return this.oMt}rq(){return this.TSt}Wgt(){return this.rq()}WQ(){return!this.rq()}dMt(){return!this.WQ()}pMt(){return this.hMt}JG(){return this.SG}bwt(){return this.rMt}Qi(){return 0===this.zc}le(){return 1===this.zc}fMt(){return 2===this.zc}hSt(){return!1}_1(){return this.zQ}Ogt(){return this.nMt}tX(){return _v}gE(t){!this.dMt()||this.JG()||this.bwt()||this.urt(this.Ogt())}ySt(){return!0}*myt(t){this.gE(t)}urt(t){this.Qi()?"number"!=typeof t&&(t=parseFloat(t)):this.le()?"string"!=typeof t&&(t=t.toString()):this.fMt()&&(t=t?1:0),this.uMt?this.iht=t:this.rgt.Amt()[this.cMt]=t}_nt(){return this.uMt?this.iht:this.rgt.Amt()[this.cMt]}mMt(){let t=this._nt();return this.fMt()&&(t=!!t),t}tyt(){this.iht=this.nMt}Ugt(){return{configurable:!1,enumerable:!0,get:this.lMt,set:this.aMt}}}}{const Ev=self.Cs,Pv=self.assert,Av=[];Ev.Qwt=class extends Ev.Vn{constructor(t,s,i){super();const e=t.aN();this.y5=t,this.qpt=e,this.$c=t.aB(),this.TSt=s,this.gMt=null,this.yMt=i[1],this.$f=!0}static UT(t,s,i){return Ev.Un(Ev.Qwt,t,s,i)}vgt(){this.gMt=this.qpt.T4(this.yMt),this.y5.oSt(this);let t=this.rq();for(;t;)t instanceof Ev.qwt&&t.eyt()&&t.nvt(this),t=t.rq();this.Pvt(),this.$c.iU()&&this.y5.Twt().children.push(this.gMt.Twt())}rq(){return this.TSt}tX(){return Av}lSt(){return this.gMt}gE(t){const s=!!this.rq(),i=this.$c.S1();s&&this.qpt.Oyt(i),this.gMt.gE(),s&&this.qpt.lX(i)}*myt(t){const s=!!this.rq(),i=this.$c.S1();s&&this.qpt.Oyt(i),yield*this.gMt.myt(),s&&this.qpt.lX(i)}ySt(){return!1}uSt(){return this.$f}Pvt(){let t=this.rq();for(;t;){if(t instanceof Ev.qwt&&t.eyt()&&!t.Swt())return void(this.$f=!1);t=t.rq()}this.$f=!0}}}{let Rv=function(t,s){return t>=s?t%s:t<0?(t<=-s&&(t%=s),t<0&&(t+=s),t):t};WrapIndex=Rv;const Ov=self.Cs,Fv=self.assert;Ov.wMt=class extends Ov.Vn{constructor(t){super(),this.xx=t,this.$c=t.aB()}vgt(){}static SMt(t,s){const i=s[0],e=[$v,kv,Nv,Bv,Dv,Lv];return Ov.Un(e[i],t,s)}};class Dv extends Ov.wMt{constructor(t,s){super(t),this.vMt=this.$c.AZ(),this.Gbt=this.$c.xbt(s[1]),this.Gbt!==Ov.sB.tB.Sht.random&&this.Gbt!==Ov.sB.tB.Sht.bMt||this.xx.MMt()}xMt(){return this.vMt.GMt(this.Gbt,this.vMt)}}class Lv extends Ov.wMt{constructor(t,s){super(t),this.TMt=null,this.Pbt=s[1],this.xx.MMt()}vgt(){const t=this.$c.aN();this.TMt=t.lN(this.Pbt),this.Pbt=null;const s=this.xx.fN(),i=this.TMt.fN();this.IMt=[...new Set([...s.dN(),...i.dN()])],this.IMt=t.Agt(this.IMt)}xMt(){const t=this.TMt;if(t.Cu()){const s=t.fN();return Ov.qwt.prototype.gN.bind(s,this.IMt,t.yN(),t.wN(),t.uN())}{const s=t.uN();return()=>s}}}class kv extends Ov.wMt{constructor(t,s){super(t),this.mpt=this.$c.J0(s[1]),this.Gbt=this.$c.xbt(s[2]),this.CMt=!!s[3],this.xpt=this.$c.aN().bN(),this.xx._Mt(this.mpt)}xMt(){return this.mpt.qW().GMt(this.Gbt,this.mpt.VW().iz())}EMt(...t){const s=this.mpt,i=s.nj().Apt(),e=i.length;if(0===e)return this.CMt?"":0;const n=Rv(this.xx.PMt(),e);return this.xpt.sX().Smt(s),this.Gbt.apply(i[n].iz(),t)}AMt(t,...s){const i=this.mpt,e=i.ej(),n=e.length;if(0===n||"number"!=typeof t)return this.CMt?"":0;const r=Rv(t,n);return this.xpt.sX().Smt(i),this.Gbt.apply(e[r].iz(),s)}}class Nv extends Ov.wMt{constructor(t,s){super(t),this.mpt=this.$c.J0(s[1]),this.RMt=s[3],this.CMt=!!s[2],this.xx._Mt(this.mpt)}OMt(){const t=this.mpt.nj().Apt(),s=t.length;return 0===s?this.CMt?"":0:t[Rv(this.xx.PMt(),s)].FMt(this.RMt)}DMt(){const t=this.mpt,s=t.nj().Apt(),i=s.length;if(0===i)return this.CMt?"":0;const e=s[Rv(this.xx.PMt(),i)],n=e.fH().LMt(t.kMt());return e.FMt(this.RMt+n)}NMt(t){const s=this.mpt,i=s.ej(),e=i.length;if(0===e||"number"!=typeof t)return this.CMt?"":0;const n=i[Rv(t,e)];let r=0;return s.v1()&&(r=n.fH().LMt(s.kMt())),n.FMt(this.RMt+r)}}class $v extends Ov.wMt{constructor(t,s){super(t),this.mpt=this.$c.J0(s[1]),this.$Mt=this.mpt.Frt(s[2]),this.BMt=this.mpt.net(s[2]),this.Gbt=this.$c.xbt(s[3]),this.CMt=!!s[4],this.xpt=this.$c.aN().bN(),this.xx._Mt(this.mpt)}WMt(...t){const s=this.mpt,i=s.nj().Apt(),e=i.length;if(0===e)return this.CMt?"":0;const n=Rv(this.xx.PMt(),e);this.xpt.sX().Smt(s);const r=i[n];let h=0;return s.v1()&&(h=r.fH().jMt(s.kMt())),this.Gbt.apply(r.Ort()[this.BMt+h].iz(),t)}VMt(t,...s){const i=this.mpt,e=i.ej(),n=e.length;if(0===n||"number"!=typeof t)return this.CMt?"":0;const r=Rv(t,n);this.xpt.sX().Smt(i);const h=e[r];let o=0;return i.v1()&&(o=h.fH().jMt(i.kMt())),this.Gbt.apply(h.Ort()[this.BMt+o].iz(),s)}}class Bv extends Ov.wMt{constructor(t,s){super(t),this.HMt=null,this.UMt=s[1]}vgt(){this.HMt=this.$c.aN().qgt(this.UMt)}qMt(){return this.HMt}}}{let Wv=function(t){const s=self.zMt[t];if(!s)throw new Error("invalid expression number");return s};GetExpressionFunc=Wv;const jv=self.Cs,Vv=self.assert;jv.JMt=class extends jv.Vn{constructor(t,s,i){super(),this.xx=t,this.Aw=i,this.zc=s,this.qs=null,this.YMt=!1,this.rMt=!1}static UT(t,s,i){const e=s[0],n=[Hv,Uv,Zv,zv,Yv,qv,Xv,Hv,zv,zv,Qv,tb,Zv,ib,Uv,Kv,Jv,sb,eb,nb,rb,hb];return jv.Un(n[e],t,e,i,s)}vgt(){}MMt(){this.YMt=!0}_Mt(t){this.YMt||t&&(t.qW().SW()||(this.YMt=!0))}XMt(){return this.YMt}xk(){return this.Aw}aB(){return this.xx.aB()}fN(){return this.xx.fN()}bwt(){return this.rMt}KMt(){return 4===this.zc}};class Hv extends jv.JMt{constructor(t,s,i,e){super(t,s,i),this.ZMt=0;const n=e[1];this.QMt=n[0],this.txt=[],this.sxt=null;for(let t=1,s=n.length;t<s;++t)this.txt.push(jv.wMt.SMt(this,n[t]));this.txt.length?this.qs=this.ixt:(this.qs=Wv(this.QMt),this.rMt=!0)}nxt(t){if(t<0||t>=this.txt.length)throw new RangeError("invalid numbered node");return this.txt[t]}vgt(){for(const t of this.txt)t.vgt();const t=Wv(this.QMt);this.txt.length?this.sxt=t(this):this.sxt=t}PMt(){return this.ZMt}ixt(t){return this.ZMt=t,this.sxt()}}class Uv extends Hv{constructor(t,s,i,e){super(t,s,i,e),this.qs=this.rxt,14===s&&(this.fN().avt(),this.xx instanceof jv.ivt&&this.fN().bvt())}rxt(t){this.ZMt=t;const s=this.sxt();return"string"==typeof s?s:""}hxt(){return Wv(this.QMt)()}}class qv extends Hv{constructor(t,s,i,e){super(t,s,i,e),t.oxt()>=2?this.qs=this.Vj:this.qs=this.L$,this.rMt=!1}L$(t){this.ZMt=t;const s=this.sxt();return this.aB().O$().L$(s)}Vj(t){const s=this.L$(t);return s?s.Vj():null}}class zv extends jv.JMt{constructor(t,s,i,e){super(t,s,i),this.axt=e[1],this.qs=this.lxt,this.rMt=!0}lxt(){return this.axt}}class Jv extends jv.JMt{constructor(t,s,i,e){super(t,s,i),this.uxt=e[1],this.qs=this.cxt,this.rMt=!0}cxt(){return this.uxt}}class Yv extends jv.JMt{constructor(t,s,i,e){super(t,s,i),this.mpt=this.aB().J0(e[1]),t.oxt()>=2?this.qs=this.BW:this.qs=this.fH;const n=this.fN();n.svt(this.mpt),this.xx instanceof jv.ivt?n.bvt():n.rq()&&n.rq().bvt(),this.rMt=!0}fH(){return this.mpt}BW(){return this.mpt?this.mpt.BW():null}}class Xv extends jv.JMt{constructor(t,s,i,e){super(t,s,i),this.VQ=this.aB().p$().E6(e[1]),t.oxt()>=2?this.qs=this.f$:this.qs=this.m$,this.rMt=!0}m$(){return this.VQ}f$(){return this.VQ?this.VQ.f$():null}}class Kv extends jv.JMt{constructor(t,s,i,e){super(t,s,i),this.D7=this.aB().Vtt().j8(e[1]),t.oxt()>=2?this.qs=this.bit:this.qs=this.jit,this.rMt=!0}jit(){return this.D7}bit(){return this.D7?this.D7.bit():null}}class Zv extends jv.JMt{constructor(t,s,i,e){super(t,s,i),this.fxt=e[1],this.qs=this.dxt,this.rMt=!0}dxt(){return this.fxt}}class Qv extends jv.JMt{constructor(t,s,i,e){super(t,s,i),this.pxt=e[1];const n=this.xx.fH();this.xx instanceof jv.tvt&&this.xx.JG()?(this.qs=this.mxt,this.rMt=!0):n&&n.v1()?(this.qs=this.gxt,this.MMt()):(this.qs=this.mxt,this.rMt=!0)}mxt(){return this.pxt}gxt(t){t=t||0;const s=this.xx.fH(),i=s.nj(),e=i.ej();let n=null;if(e.length)n=e[t%e.length].fH();else if(i.Ept()){const s=i.Ppt();n=s[t%s.length].fH()}else{if(!(s.oj()>0))return 0;{const i=s.ej();n=i[t%i.length].fH()}}return this.pxt+n.LMt(s.kMt())}}class tb extends jv.JMt{constructor(t,s,i,e){super(t,s,i),this.UMt=e[1],this.HMt=null,t.oxt()>=2?this.qs=this.yxt:this.qs=this.wxt,this.rMt=!0}vgt(){this.HMt=this.aB().aN().qgt(this.UMt)}wxt(){return this.HMt}yxt(){return null}}class sb extends jv.JMt{constructor(t,s,i,e){super(t,s,i),this.Sxt=e[1],this.TMt=null,t.oxt()>=2?this.qs=this.vxt:this.qs=this.bxt,this.rMt=!0}vgt(){this.TMt=this.aB().aN().lN(this.Sxt),this.Sxt=null}bxt(){return this.TMt}vxt(){return null}}class ib extends jv.JMt{constructor(t,s,i,e){super(t,s,i),this.Mxt=[],this.xxt=[],this.rMt=!0;for(let t=1,s=e.length;t<s;++t){const s=jv.JMt.UT(this.xx,e[t],0);this.Mxt.push(s),this.xxt.push(0),s.bwt()||(this.rMt=!1)}this.qs=this.Gxt}vgt(){for(const t of this.Mxt)t.vgt()}Gxt(){const t=this.Mxt,s=this.xxt;for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(0);return s}}class eb extends jv.JMt{constructor(t,s,i,e){super(t,s,i),this.Txt=e[1],this.qs=this.lrt,this.rMt=!0}lrt(){return this.Txt}}class nb extends jv.JMt{constructor(t,s,i,e){super(t,s,i),this.Ixt=e[1],this.qs=this.Cxt,this.rMt=!0}Cxt(){return this.Ixt}}class rb extends Hv{constructor(t,s,i,e){super(t,s,i,e),this.qs=this.EH,this.rMt=!1}EH(){return this.sxt()}}class hb extends jv.JMt{constructor(t,s,i,e){super(t,s,i),this.Act=this.aB().Yct().Tct(e[1]),this.qs=this._xt,this.rMt=!0}_xt(){return this.Act.Pc()}}}{let ob=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(0)};EvalParams=ob;const ab=self.Cs,lb=self.assert,ub=[],cb=function(){};ab.tvt=class extends ab.Vn{constructor(t,s,i){if(super(),this.jbt=t,this.$c=t.aB(),this.Aw=i,this.Gbt=this.$c.xbt(s[1]),this.Ext=s[3]>0,this.Pxt=2===s[3],this.Axt=!!s[4],this.Rxt=!!s[5],this.SG=!!s[6],this.zQ=s[7],this.Oxt=this.jbt.Hpt(),this.mpt=null,this.$Mt=null,this.BMt=-1,this.vMt=null,this.gE=cb,this.myt=cb,this.Ws=[],this.Fxt=[],this.Dxt=!1,this.Lxt=null,this.kxt=null,this.qSt=this.$c.iU()?{zSt:s[8][0],Nxt:s[8][1]}:null,-1===s[0]?this.vMt=this.$c.AZ():(this.mpt=this.$c.J0(s[0]),s[2]&&(this.$Mt=this.mpt.Frt(s[2]),this.BMt=this.mpt.net(s[2])),this.jbt.rq()&&this.jbt.rq().bvt()),10===s.length){let t=s[9];for(let s of t)this.Ws.push(ab.JMt.UT(this,s,this.Ws.length)),this.Fxt.push(0)}0===this.Ws.length&&(this.Ws=ub,this.Fxt=ub),this.jbt.aN().Tgt(this)}static UT(t,s,i){return ab.Un(ab.tvt,t,s,i)}vgt(){for(const t of this.Ws)t.vgt(),t.XMt()&&(this.Dxt=!0);this.Pxt?(this.gE=this.$xt,this.myt=this.Bxt):this.vMt?(this.Wxt(),this.myt=this.jxt):this.mpt.qW().SW()?(this.Vxt(),this.myt=this.Hxt):this.SG?(this.gE=this.Uxt,this.myt=this.qxt):(this.gE=this.zxt,this.myt=this.Jxt)}Wxt(){const t=this.vMt,s=this.vMt;this.Yxt(t,s,this.Xxt)}Vxt(){const t=this.mpt.qW(),s=this.mpt.VW().iz();this.Yxt(t,s,this.Kxt)}Yxt(t,s,i){const e=this.Gbt,n=this.Rxt,r=this.Ws;if(0===r.length){const i=t.GMt(e,s);this.gE=n?function(){return ab.xor(i(),n)}:i}else if(1===r.length){const i=r[0];if(!n&&i.bwt())this.gE=t.Zxt(e,s,i.qs(0));else{const r=t.GMt(e,s);this.gE=function(){return ab.xor(r(i.qs(0)),n)}}}else if(2===r.length){const i=r[0],h=r[1];if(!n&&i.bwt()&&h.bwt())this.gE=t.Qxt(e,s,i.qs(0),h.qs(0));else{const r=t.GMt(e,s);this.gE=function(){return ab.xor(r(i.qs(0),h.qs(0)),n)}}}else if(3===r.length){const i=r[0],h=r[1],o=r[2];if(!n&&i.bwt()&&h.bwt()&&o.bwt())this.gE=t.tGt(e,s,i.qs(0),h.qs(0),o.qs(0));else{const r=t.GMt(e,s);this.gE=function(){return ab.xor(r(i.qs(0),h.qs(0),o.qs(0)),n)}}}else this.gE=i}_1(){return this.zQ}sSt(){return this.Gbt}fH(){return this.mpt}fz(){return this.$Mt}sGt(){return this.$Mt?this.$Mt.lz():this.mpt?this.mpt.qW():null}oxt(){const t=this.sGt();return t?t.iGt():1}fN(){return this.jbt}aB(){return this.$c}xk(){return this.Aw}$vt(){return this.xk()}Jwt(){return this.Ext}iSt(){return this.Pxt}eGt(){return this.Rxt}Iz(){return this.Axt}JG(){return this.SG}nGt(){return this.qSt.zSt}rGt(){return!!this.vMt}Fvt(){return this.rGt()||this.mpt.qW().SW()}Dvt(){for(const t of this.Ws)if(t.KMt())return t.fH();return null}hGt(t){this.qSt.zSt=!!t,this.jbt.wvt()}oGt(){return this.qSt.Nxt}ySt(){return!this.nGt()&&!this.$c.Jvt()&&!this.oGt()}aGt(){return this.Lxt||(this.Lxt=new Map),this.Lxt}lGt(){return this.kxt||(this.kxt=new Map),this.kxt}Xxt(){const t=this.Fxt;return ob(this.Ws,t),ab.xor(this.Gbt.apply(this.vMt,t),this.Rxt)}*jxt(){if((this.nGt()||this.$c.Jvt())&&(yield this),this.oGt()){const t=this.Fxt;ob(this.Ws,t);let s=this.Gbt.apply(this.vMt,t);return ab.Mo(s)&&(s=yield*s),ab.xor(s,this.Rxt)}return this.gE()}Kxt(){const t=this.Fxt;ob(this.Ws,t);const s=this.mpt.VW().iz();return ab.xor(this.Gbt.apply(s,t),this.Rxt)}*Hxt(){if((this.nGt()||this.$c.Jvt())&&(yield this),this.oGt()){const t=this.Fxt;ob(this.Ws,t);const s=this.mpt.VW().iz();let i=this.Gbt.apply(s,t);return ab.Mo(i)&&(i=yield*i),ab.xor(i,this.Rxt)}return this.gE()}$xt(){return!0}*Bxt(){return(this.nGt()||this.$c.Jvt())&&(yield this),!0}uGt(){return this.$Mt?this.$Mt.lz().iGt()>=2?this.$Mt.cz():this.$Mt:this.mpt.qW().iGt()>=2?this.mpt.BW():this.mpt}Uxt(){const t=this.Fxt;ob(this.Ws,t);const s=this.Gbt.apply(this.uGt(),t);return this.mpt.pbt(),s}*qxt(){if((this.nGt()||this.$c.Jvt())&&(yield this),this.oGt()){const t=this.Fxt;ob(this.Ws,t);let s=this.Gbt.apply(this.uGt(),t);return ab.Mo(s)&&(s=yield*s),this.mpt.pbt(),s}return this.gE()}zxt(){const t=this.Ws,s=this.Fxt,i=this.mpt.nj();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.XMt()||(s[i]=e.qs(0))}return i.Cpt()?this.cGt(i):this.fGt(i)}*Jxt(){return(this.nGt()||this.$c.Jvt())&&(yield this),this.zxt()}dGt(t){const s=this.Ws,i=this.Fxt;for(let e=0,n=s.length;e<n;++e){const n=s[e];n.XMt()&&(i[e]=n.qs(t))}}cGt(t){const s=this.mpt,i=s.v1(),e=s.kMt(),n=this.BMt,r=n>=0,h=s.ej(),o=this.Dxt,a=this.Fxt,l=this.Gbt,u=this.Rxt,c=this.Oxt&&!this.Ext;t.Ipt();for(let s=0,f=h.length;s<f;++s){const f=h[s];let d;if(o&&this.dGt(s),r){const t=i?f.fH().jMt(e):0;d=l.apply(f.Ort()[n+t].iz(),a)}else d=l.apply(f.iz(),a);ab.xor(d,u)?t.Rpt(f):c&&t.Opt(f)}return s.pGt(!0),t.Fpt(!1),s.pbt(),t._pt()}fGt(t){const s=this.mpt,i=s.v1(),e=s.kMt(),n=s.xH(),r=this.BMt,h=r>=0,o=this.Dxt,a=this.Fxt,l=this.Gbt,u=this.Rxt,c=this.Oxt&&!this.Ext,f=t.Dpt(),d=t.Lpt(),p=c&&!this.jbt.Ovt(this),m=p?d:f;let g=0,y=!1;for(let t=0,s=m.length;t<s;++t){const s=m[t];let w;if(o&&this.dGt(t),h){const t=i?s.fH().jMt(e):0;w=l.apply(s.Ort()[r+t].iz(),a)}else w=l.apply(s.iz(),a);ab.xor(w,u)?(y=!0,p?(f.push(s),n&&s.mGt()):(m[g]=s,n&&s.gGt(g),++g)):p?(m[g]=s,n&&s.yGt(g),++g):c&&(d.push(s),n&&s.wGt())}ab.Sh(m,g),n&&s.SGt(p,g);const w=y;return p&&!y&&(y=this.vGt(f)),s.pGt(w||c),c?y:t._pt()}vGt(t){const s=this.mpt,i=s.v1(),e=s.kMt(),n=this.Dxt,r=this.BMt,h=r>=0,o=this.Fxt,a=this.Gbt,l=this.Rxt;for(let s=0,u=t.length;s<u;++s){const u=t[s];let c;if(n&&this.dGt(s),h){const t=i?u.fH().jMt(e):0;c=a.apply(u.Ort()[r+t].iz(),o)}else c=a.apply(u.iz(),o);if(ab.xor(c,l))return!0}return!1}bGt(t,s){return this.Ws[t].qs(s)}eSt(){const t=this.Ws;if(!t.length)throw new Error("no parameters");return t[0].hxt()}e5(){if(!this.Lxt||!this.Lxt.size)return null;const t={};for(const[s,i]of this.Lxt.entries()){let e=i;"collmemory"===s&&(e=[...i.entries()].map(t=>[t[0].TH(),t[1].TH(),t[2]])),t[s]=e}return{ex:t}}n5(t){if(this.Lxt&&(this.Lxt.clear(),this.Lxt=null),!t)return;const s=this.$c,i=t.ex;if(i){const t=this.aGt();t.clear();for(const[e,n]of Object.entries(i)){let i=n;"collmemory"===e&&(i=ab.Un(ab._u,n.map(t=>[s.P$(t[0]),s.P$(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),t.set(e,i)}}}}}{let fb=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(0)};EvalParams=fb;const db=self.Cs,pb=self.assert,mb=[],gb=function(){},yb=function*(){},wb=1,Sb=2,vb=4,bb=8,Mb=16;db.ivt=class extends db.Vn{constructor(t,s,i){super(),this.jbt=t;const e=t.aB();this.$c=e,this.Aw=i,this.zQ=s.length>=4?s[3]:-1,this.MGt=s.length>=5?255&s[4]:0,this.xGt=s.length>=5?s[4]>>8:0,this.Gbt=null,this.mpt=null,this.$Mt=null,this.BMt=-1,this.vMt=null,this.GGt="",this.TGt=null,this.IGt=null,this.gE=gb,this.myt=gb,this.Ws=[],this.Fxt=[],this.Dxt=!1,this.Lxt=null,this.kxt=null;const n=-3===s[0],r=n?s[2]:s[5];if(this.qSt=e.iU()||n?{zSt:r[0],Nxt:r[1],index:r[2]}:null,-1===s[0])this.vMt=e.AZ(),this.Gbt=e.xbt(s[1]);else if(-2===s[0])this.GGt=s[1];else if(n){const t=e.xbt(s[1]);this.Gbt=t,this.gE=this.CGt,this.myt=this._Gt,this.xGt|=8}else this.mpt=e.J0(s[0]),4&this.xGt?(this.GGt=s[1],this.TGt=e.J0(s[2])):(s[2]&&(this.$Mt=this.mpt.Frt(s[2]),this.BMt=this.mpt.net(s[2])),this.Gbt=e.xbt(s[1]));if(7===s.length){const t=s[6];for(const s of t)this.Ws.push(db.JMt.UT(this,s,this.Ws.length)),this.Fxt.push(0)}0===this.Ws.length&&(this.Ws=mb,this.Fxt=mb),this.EGt()&&(this.jbt.avt(),this.jbt.bvt()),this.jbt.aN().Igt(this)}static UT(t,s,i){return db.Un(db.ivt,t,s,i)}vgt(){for(const t of this.Ws)t.vgt(),t.XMt()&&(this.Dxt=!0);if(this.vMt)this.Wxt(),this.myt=this.jxt;else if(this.GGt)4&this.xGt?this.PGt():this.AGt(),this.GGt="",this.TGt=null;else if(this.gE===this.CGt){const t=this.Gbt,s=this.$c.aN().Vgt(this.jbt);this.Gbt=t.bind(null,this.$c.gW(),s)}else this.$Mt?this.Zvt()?(this.gE=this.RGt,this.myt=this.OGt):(this.gE=this.FGt,this.myt=this.DGt):this.mpt.qW().SW()?(this.Vxt(),this.myt=this.Hxt):this.JG()?(this.gE=this.LGt,this.myt=this.kGt):this.Zvt()?(this.gE=this.NGt,this.myt=this.$Gt):this.BGt()?(this.gE=this.WGt,this.myt=this.jGt):this.Ws.length?this.Ws.every(t=>t.XMt())?(this.gE=this.VGt,this.myt=this.HGt):this.Dxt?(this.gE=this.UGt,this.myt=this.qGt):this.Ws.every(t=>t.bwt())?(fb(this.Ws,this.Fxt),this.gE=this.zGt,this.myt=this.JGt):(this.gE=this.YGt,this.myt=this.XGt):(this.gE=this.zGt,this.myt=this.JGt)}Wxt(){const t=this.vMt,s=this.vMt;this.Yxt(t,s,this.Xxt)}Vxt(){const t=this.mpt.qW(),s=this.mpt.VW().iz();this.Yxt(t,s,this.Kxt)}AGt(){const t=this.jbt.aN(),s=t.lN(this.GGt);if(s.Cu()){const i=!!(2&this.xGt);this.IGt=s.fN();let e=[...new Set([...this.jbt.dN(),...this.IGt.dN()])];e=t.Agt(e);const n=!s.yN()&&this.KGt()?{ybt:!0}:null;if(this.gE=db.qwt.prototype.cbt.bind(this.IGt,e,this.Ws,i,n),this.$c.iU()){const t=this;this.myt=function*(){return(t.nGt()||t.$c.Jvt())&&(yield t),yield*t.IGt.vbt(e,t.Ws,i,n)}}else this.myt=yb}else this.gE=gb,this.myt=yb}PGt(){const t=this.jbt.aN(),s=t.Xgt(this.TGt,this.GGt);if(s.Cu()){const i=!!(2&this.xGt);this.IGt=s.fN();let e=[...new Set([...this.jbt.dN(),...this.IGt.dN(),this.mpt,s.fH()])];e=t.Agt(e);const n=!this.mpt.v1()&&!s.fH().v1(),r=!this.mpt.v1()&&s.fH().v1(),h=this.mpt.v1();let o=null;if(!s.yN()&&this.KGt()&&(o=o||{},o.ybt=!0),!r&&i||(o=o||{},o.fbt=this.mpt,o.dbt=s.fH()),n||r||h&&!s.Kbt()?this.gE=db.qwt.prototype.cbt.bind(this.IGt,e,this.Ws,i,o):h&&(this.gE=db.Cwt.prototype.sMt.bind(s,e,this.Ws)),this.$c.iU()){const t=this;n||r||h&&!s.Kbt()?this.myt=function*(){return(t.nGt()||t.$c.Jvt())&&(yield t),yield*t.IGt.vbt(e,t.Ws,i,o)}:h&&(this.myt=function*(){return(t.nGt()||t.$c.Jvt())&&(yield t),yield*s.eMt(e,t.Ws)})}else this.myt=yb}else this.gE=gb,this.myt=yb}Yxt(t,s,i){const e=this.Gbt,n=this.Ws;if(0===n.length)this.gE=t.GMt(e,s);else if(1===n.length){const i=n[0];if(i.bwt())this.gE=t.Zxt(e,s,i.qs(0));else{const n=t.GMt(e,s);this.gE=function(){return n(i.qs(0))}}}else if(2===n.length){const i=n[0],r=n[1];if(i.bwt()&&r.bwt())this.gE=t.Qxt(e,s,i.qs(0),r.qs(0));else{const n=t.GMt(e,s);this.gE=function(){return n(i.qs(0),r.qs(0))}}}else if(3===n.length){const i=n[0],r=n[1],h=n[2];if(i.bwt()&&r.bwt()&&h.bwt())this.gE=t.tGt(e,s,i.qs(0),r.qs(0),h.qs(0));else{const n=t.GMt(e,s);this.gE=function(){return n(i.qs(0),r.qs(0),h.qs(0))}}}else this.gE=i}_1(){return this.zQ}Zvt(){return!!(8&this.xGt)}Kvt(){return!!(16&this.xGt)}BGt(){return 1===this.MGt}JG(){return 2===this.MGt}EGt(){return!!(1&this.xGt)}cvt(){return this.Zvt()||this.Kvt()}fH(){return this.mpt}sGt(){return this.$Mt?this.$Mt.lz():this.mpt?this.mpt.qW():null}oxt(){const t=this.sGt();return t?t.iGt():1}fN(){return this.jbt}KGt(){let t=this.jbt;do{if(t instanceof db.Cwt&&t.yN())return!0;t=t.Wgt()}while(t);return!1}aB(){return this.$c}xk(){return this.Aw}$vt(){return this.qSt.index}nGt(){return this.qSt.zSt}hGt(t){this.qSt.zSt=!!t,this.jbt.wvt()}oGt(){return this.qSt.Nxt}ySt(){return!this.nGt()&&!this.$c.Jvt()&&!this.oGt()}aGt(){return this.Lxt||(this.Lxt=new Map),this.Lxt}lGt(){return this.kxt||(this.kxt=new Map),this.kxt}Xxt(){const t=this.Fxt;return fb(this.Ws,t),this.Gbt.apply(this.vMt,t)}*jxt(){if((this.nGt()||this.$c.Jvt())&&(yield this),this.oGt()){const t=this.Fxt;return fb(this.Ws,t),yield*this.Gbt.apply(this.vMt,t)}return this.gE()}Kxt(){const t=this.Fxt;return fb(this.Ws,t),this.Gbt.apply(this.mpt.VW().iz(),t)}*Hxt(){if((this.nGt()||this.$c.Jvt())&&(yield this),this.oGt()){const t=this.Fxt;return fb(this.Ws,t),yield*this.Gbt.apply(this.mpt.VW().iz(),t)}return this.gE()}zGt(){const t=this.Fxt,s=this.mpt.nj().ej();for(let i=0,e=s.length;i<e;++i)this.Gbt.apply(s[i].iz(),t)}*JGt(){if((this.nGt()||this.$c.Jvt())&&(yield this),this.oGt()){const t=this.Fxt,s=this.mpt.nj().ej();for(let i=0,e=s.length;i<e;++i)yield*this.Gbt.apply(s[i].iz(),t)}else this.zGt()}YGt(){const t=this.Fxt;fb(this.Ws,t);const s=this.mpt.nj().ej();for(let i=0,e=s.length;i<e;++i)this.Gbt.apply(s[i].iz(),t)}*XGt(){if((this.nGt()||this.$c.Jvt())&&(yield this),this.oGt()){const t=this.Fxt;fb(this.Ws,t);const s=this.mpt.nj().ej();for(let i=0,e=s.length;i<e;++i)yield*this.Gbt.apply(s[i].iz(),t)}else this.YGt()}VGt(){const t=this.Ws,s=this.Fxt,i=this.Gbt,e=this.mpt.nj().ej();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(n);i.apply(r.iz(),s)}}*HGt(){if((this.nGt()||this.$c.Jvt())&&(yield this),this.oGt()){const t=this.Ws,s=this.Fxt,i=this.Gbt,e=this.mpt.nj().ej();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(n);yield*i.apply(r.iz(),s)}}else this.VGt()}UGt(){const t=this.Ws,s=this.Fxt,i=this.Gbt,e=this.mpt.nj().ej();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.XMt()||(s[i]=e.qs(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.XMt()&&(s[i]=e.qs(n))}i.apply(r.iz(),s)}}*qGt(){if((this.nGt()||this.$c.Jvt())&&(yield this),this.oGt()){const t=this.Ws,s=this.Fxt,i=this.Gbt,e=this.mpt.nj().ej();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.XMt()||(s[i]=e.qs(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.XMt()&&(s[i]=e.qs(n))}yield*i.apply(r.iz(),s)}}else this.UGt()}WGt(){const t=this.Ws,s=this.Fxt,i=this.Gbt,e=this.mpt,n=e.ZGt(),r=e.nj().ej();n.QGt(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].qs(e);i.apply(n.iz(),s)}n.tTt(i)}*jGt(){if((this.nGt()||this.$c.Jvt())&&(yield this),this.oGt()){const t=this.Ws,s=this.Fxt,i=this.Gbt,e=this.mpt,n=e.ZGt(),r=e.nj().ej();n.QGt(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].qs(e);yield*i.apply(n.iz(),s)}n.tTt(i)}else this.WGt()}sTt(){return this.$Mt?this.$Mt.lz().iGt()>=2?this.$Mt.cz():this.$Mt:this.mpt.qW().iGt()>=2?this.mpt.BW():this.mpt}LGt(){const t=this.Fxt;return fb(this.Ws,t),this.Gbt.apply(this.sTt(),t)}*kGt(){if((this.nGt()||this.$c.Jvt())&&(yield this),this.oGt()){const t=this.Fxt;fb(this.Ws,t);let s=this.Gbt.apply(this.sTt(),t);return db.Mo(s)&&(s=yield*s),s}return this.LGt()}FGt(){const t=this.mpt,s=t.v1(),i=t.kMt(),e=this.Ws,n=this.Dxt,r=this.Fxt,h=this.Gbt,o=this.BMt,a=t.nj().ej();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.XMt()||(r[t]=s.qs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.XMt()&&(r[s]=i.qs(t))}const u=s?l.fH().jMt(i):0;h.apply(l.Ort()[o+u].iz(),r)}}*DGt(){if((this.nGt()||this.$c.Jvt())&&(yield this),this.oGt()){const t=this.mpt,s=t.v1(),i=t.kMt(),e=this.Ws,n=this.Dxt,r=this.Fxt,h=this.Gbt,o=this.BMt,a=t.nj().ej();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.XMt()||(r[t]=s.qs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.XMt()&&(r[s]=i.qs(t))}const u=s?l.fH().jMt(i):0;yield*h.apply(l.Ort()[o+u].iz(),r)}}else this.FGt()}NGt(){const t=this.Ws,s=this.Fxt,i=this.Gbt,e=this.mpt.nj().ej(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(r);n.push(i.apply(h.iz(),s))}return Promise.all(n)}*$Gt(){if((this.nGt()||this.$c.Jvt())&&(yield this),this.oGt()){const t=this.Ws,s=this.Fxt,i=this.Gbt,e=this.mpt.nj().ej(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(r);n.push(yield*i.apply(h.iz(),s))}return Promise.all(n)}return this.NGt()}RGt(){const t=this.mpt,s=t.v1(),i=t.kMt(),e=this.Ws,n=this.Fxt,r=this.Gbt,h=this.BMt,o=t.nj().ej(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].qs(t);const u=s?l.fH().jMt(i):0;a.push(r.apply(l.Ort()[h+u].iz(),n))}return Promise.all(a)}*OGt(){if((this.nGt()||this.$c.Jvt())&&(yield this),this.oGt()){const t=this.mpt,s=t.v1(),i=t.kMt(),e=this.Ws,n=this.Fxt,r=this.Gbt,h=this.BMt,o=t.nj().ej(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].qs(t);const u=s?l.fH().jMt(i):0;a.push(yield*r.apply(l.Ort()[h+u].iz(),n))}return Promise.all(a)}return this.RGt()}async CGt(){try{await this.Gbt()}catch(t){console.error(`Unhandled exception running script %c${this.jbt.Z5().Pc()}, event ${this.jbt.Gvt()}, action ${this.$vt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.eU&&self.eU.Ibt(this),db.tSt.Cbt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),db.tSt._bt())}}*_Gt(){return(this.nGt()||this.$c.Jvt())&&(yield this),this.CGt()}e5(){return this.Lxt&&this.Lxt.size?{ex:db.So(this.Lxt)}:null}n5(t){if(this.Lxt&&(this.Lxt.clear(),this.Lxt=null),!t)return;const s=t.ex;s&&(this.Lxt=db.vo(s))}}}{let xb=function(t){return t instanceof Hb?Vb.Yj(t):t.EJ()},Gb=function(t){return xb(t).D$()},Tb=function(t){return Vb.Yj(t)},Ib=function(t){return Tb(t).D$()},Cb=function(t){return t instanceof Ub?Vb.Yj(t):t},_b=function(t){return t instanceof qb?Vb.Yj(t):t},Eb=function(t,s,i,e){s.TH()<i.TH()?t.Set(s,i,e):t.Set(i,s,e)},Pb=function(t,s,i){s.TH()<i.TH()?t.Ru(s,i):t.Ru(i,s)},Ab=function(t,s){t.Ou(s)},Rb=function(t,s,i){return s.TH()<i.TH()?t.qs(s,i):t.qs(i,s)},Ob=function(t,s,i,e){if(!s)return!1;const n=0!==i||0!==e,r=t.D$(),h=Vb.Ak(),o=Vb.Dgt(),a=o.fN().Hpt(),l=o.fH(),u=o.eGt(),c=s.nj(),f=l!==s;let d;Kb=s,Xb=f&&!u,Zb=!1;let p=0,m=0,g=!1;c.Cpt()?(zb.S(r.$U()),zb.offset(i,e),h.iTt(r.L$(),s,zb,Yb),d=Yb):a?Vb.eTt()&&!c.Lpt().length&&c.Dpt().length?d=c.Dpt():(d=c.Lpt(),Zb=!0):d=c.Dpt(),n&&(p=r.YM(),m=r.ZM(),r.IU(i,e),r.xU());for(const s of d)if(h.EB(t,s)){if(g=!0,u)break;f&&Qb.add(s)}return n&&(r.GU(p,m),r.xU()),Nb.bh(Yb),g},Fb=function(t){const s=Vb.pN().Hpt(),i=Kb.nj(),e=i.Dpt(),n=i.Lpt();i.Cpt()?(i.$pt(Qb),s&&(Nb.bh(n),i.Bpt(Qb,Kb.ej()))):s?Zb?i.Wpt(Qb):(i.Bpt(Qb,e),i.$pt(Qb)):i.$pt(Qb),Kb.pbt()},Db=function(t,s){Xb&&(s&&Fb(t),Qb.clear(),Kb=null,Xb=!1)},Lb=function(t,s){const i=Vb.P$(s);if(!i)return!1;const e=t.nj();if(!e.Cpt()&&!e.Dpt().includes(i))return!1;if(t.v1()){if(i.fH().nTt(t))return e.Vpt(i),t.pbt(),!0}else if(i.fH()===t)return e.Vpt(i),t.pbt(),!0;return!1},kb=function(t,s){const i=t.nj();if(i.Cpt()){i.Fpt(!1),i.Ipt();const e=t.ej();for(let t=0,n=e.length;t<n;++t){const n=e[t];n.TH()===s?i.Opt(n):i.Rpt(n)}return t.pbt(),!!i.Dpt().length}{const e=i.Dpt();let n=0;for(let t=0,r=e.length;t<r;++t){const r=e[t];e[n]=r,r.TH()===s?i.Opt(r):++n}return Nb.Sh(e,n),t.pbt(),!!e.length}};GetInst=xb,GetWorldInfo=Gb,GetInst_SDKv2=Tb,GetWorldInfo_SDKv2=Ib,GetObjectClass=Cb,GetLayer=_b,CollMemory_Add=Eb,CollMemory_Remove=Pb,CollMemory_RemoveInstance=Ab,CollMemory_Get=Rb,DoOverlapCondition=Ob,FinishCollisionConditionPicking=Fb,FinishCollisionCondition=Db,PickByUID_Normal=Lb,PickByUID_Inverted=kb;const Nb=self.Cs,$b=new Nb.Go,Bb={},Wb={},jb={};let Vb=null;Nb.rTt=function(t){Vb=t};const Hb=self.cH,Ub=self.HW,qb=self.Jj;Wb.hTt=function(t,s){return Nb.compare(this.D$().YM(),t,s)},jb.hTt=function(t,s){return Nb.compare(this.x,t,s)},Wb.oTt=function(t,s){return Nb.compare(this.D$().ZM(),t,s)},jb.oTt=function(t,s){return Nb.compare(this.y,t,s)},Wb.aTt=function(){return this.D$().VU()},jb.aTt=function(){return this.jU()},Bb.lTt=function(){const t=Gb(this),s=t.m$(),i=t.$U();return i.sl()<0||i.il()<0||i.Qa()>s.Vg()||i.tl()>s.Qg()},Bb.uTt=function(t,s,i){const e=Cb(this).nj(),n=e.ej();if(!n.length)return!1;let r=n[0],h=r.D$(),o=r,a=Nb.nr(h.YM(),h.ZM(),s,i);for(let e=1,l=n.length;e<l;++e){r=n[e],h=r.D$();const l=Nb.nr(h.YM(),h.ZM(),s,i);(0===t&&l<a||1===t&&l>a)&&(a=l,o=r)}return e.Vpt(o),!0},Wb.XM=function(t){const s=this.D$();s.YM()!==t&&(s.XM(t),s.xU())},jb.XM=function(t){this.x=+t},Wb.QM=function(t){const s=this.D$();s.ZM()!==t&&(s.QM(t),s.xU())},jb.QM=function(t){this.y=+t},Wb.cTt=function(t,s){const i=this.D$();i.fTt(t,s)||(i.GU(t,s),i.xU())},jb.cTt=function(t,s){this.setPosition(t,s)},Bb.dTt=function(t,s){if(!(t=Cb(t)))return;const i=xb(this),e=t.sj(i);if(!e)return;const[n,r]=e.pTt(s),h=i.D$();h.YM()===n&&h.ZM()===r||(h.GU(n,r),h.xU())},Bb.mTt=function(t){if(0===t)return;const s=Gb(this);s.IU(s.gTt()*t,s.yTt()*t),s.xU()},Wb.wTt=function(t,s){if(0===s)return;const i=this.D$();t=Nb.Qn(t),i.IU(Math.cos(t)*s,Math.sin(t)*s),i.xU()},jb.wTt=function(t,s){0!==s&&(t=Nb.Qn(t),this.offsetPosition(Math.cos(t)*s,Math.sin(t)*s))},Wb.YM=function(){return this.D$().YM()},jb.YM=function(){return this.x},Wb.ZM=function(){return this.D$().ZM()},jb.ZM=function(){return this.y},Bb.AN=function(){return Vb.AN(xb(this))},Wb.STt=function(t,s){return Nb.compare(this.D$().Vg(),t,s)},jb.STt=function(t,s){return Nb.compare(this.width,t,s)},Wb.vTt=function(t,s){return Nb.compare(this.D$().Qg(),t,s)},jb.vTt=function(t,s){return Nb.compare(this.height,t,s)},Wb.Xg=function(t){const s=this.D$();s.Vg()!==t&&(s.Xg(t),s.xU())},jb.Xg=function(t){this.width=t},Wb.Hg=function(t){const s=this.D$();s.Qg()!==t&&(s.Hg(t),s.xU())},jb.Hg=function(t){this.height=t},Wb.BP=function(t,s){const i=Gb(this);i.Vg()===t&&i.Qg()===s||(i.BP(t,s),i.xU())},jb.BP=function(t,s){this.Pj(t,s)},Wb.Vg=function(){return this.D$().Vg()},jb.Vg=function(){return this.width},Wb.Qg=function(){return this.D$().Qg()},jb.Qg=function(){return this.height},Bb.bTt=function(){return Gb(this).$U().Qa()},Bb.MTt=function(){return Gb(this).$U().tl()},Bb.xTt=function(){return Gb(this).$U().sl()},Bb.GTt=function(){return Gb(this).$U().il()},Bb.TTt=function(){const t=Gb(this).$U();return(t.Qa()+t.sl())/2},Bb.ITt=function(){const t=Gb(this).$U();return(t.tl()+t.il())/2},Bb.CTt=function(t,s){return Nb.hr(Gb(this).Fj(),Nb.Qn(s))<=Nb.Qn(t)},Bb._Tt=function(t){return Nb.lr(Gb(this).Fj(),Nb.Qn(t))},Bb.ETt=function(t,s){const i=Nb.Qn(t),e=Nb.Qn(s),n=Gb(this).Fj();return Nb.lr(e,i)?Nb.lr(n,i)&&!Nb.lr(n,e):!(!Nb.lr(n,i)&&Nb.lr(n,e))},Wb.Oj=function(t){const s=this.D$(),i=Nb.Zn(Nb.Qn(t));isNaN(i)||s.Fj()===i||(s.Oj(i),s.xU())},jb.Oj=function(t){this.kU=t},Bb.PTt=function(t){if(isNaN(t)||0===t)return;const s=Gb(this);s.Oj(s.Fj()+Nb.Qn(t)),s.xU()},Bb.ATt=function(t){if(isNaN(t)||0===t)return;const s=Gb(this);s.Oj(s.Fj()-Nb.Qn(t)),s.xU()},Bb.RTt=function(t,s){const i=Gb(this),e=i.Fj(),n=Nb.ar(e,Nb.Qn(s),Nb.Qn(t));isNaN(n)||e===n||(i.Oj(n),i.xU())},Bb.OTt=function(t,s,i){const e=Gb(this),n=e.Fj(),r=s-e.YM(),h=i-e.ZM(),o=Math.atan2(h,r),a=Nb.ar(n,o,Nb.Qn(t));isNaN(a)||n===a||(e.Oj(a),e.xU())},Bb.FTt=function(t,s){const i=Gb(this),e=i.Fj(),n=t-i.YM(),r=s-i.ZM(),h=Math.atan2(r,n);isNaN(h)||e===h||(i.Oj(h),i.xU())},Wb.Fj=function(){return Nb.tr(this.D$().Fj())},jb.Fj=function(){return this.kU},Bb.DTt=function(t,s){return Nb.compare(Nb.Tr(100*Gb(this).SO(),6),t,s)},Wb.vV=function(){return this.D$().vV()},jb.vV=function(){return this.isVisible},Bb.wV=function(t){const s=Gb(this);t=2===t?!s.vV():0!==t,s.vV()!==t&&(s.wV(t),Vb.j$())},Bb.bO=function(t){const s=Nb.Kn(t/100,0,1),i=Gb(this);if(i.Fq()){if(i.Hrt().LTt()===s)return}else if(i.SO()===s)return;i.bO(s),Vb.j$()},Bb.kTt=function(t){$b.ta(t);const s=Gb(this);s.UU().qo($b)||(s.qU($b),Vb.j$())},Bb.xO=function(){const t=Gb(this).UU();return Nb._r(t.No(),t.$o(),t.Bo(),t.Wo())},Bb.SO=function(){return Nb.Tr(100*Gb(this).SO(),6)},Bb.NTt=function(t){return!!(t=_b(t))&&Gb(this).L$()===t},Bb.$Tt=function(t){const s=Cb(this).nj(),i=s.ej();if(!i.length)return!1;let e=i[0];for(let s=1,n=i.length;s<n;++s){const n=i[s],r=n.D$(),h=e.D$(),o=r.L$().xk(),a=h.L$().xk();0===t?(o>a||o===a&&r.k$()>h.k$())&&(e=n):(o<a||o===a&&r.k$()<h.k$())&&(e=n)}return s.Vpt(e),!0},Wb.BTt=function(t,s,i){const e=this.D$(),n=0===t?e.tx():e.LU();return Nb.compare(n,s,i)},jb.BTt=function(t,s,i){const e=0===t?this.WV:this.DU;return Nb.compare(e,s,i)},Wb.WTt=function(){this.D$().JU()},jb.WTt=function(){this.zU()},Wb.jTt=function(){this.D$().XU()},jb.jTt=function(){this.YU()},Bb.VTt=function(t){(t=_b(t))&&Gb(this).ZU(t)},Bb.HTt=function(t,s){const i=0===t;if(!(s=Cb(s)))return;const e=xb(this),n=s.UTt(e);n&&e.D$().tq(n,i)},Wb.sx=function(t){const s=this.D$();s.tx()!==t&&(s.sx(t),Vb.j$())},jb.sx=function(t){this.WV=t},Bb.qTt=function(){return Gb(this).L$().xk()},Bb.zTt=function(){return Gb(this).L$().Pc()},Wb.JTt=function(){return this.D$().k$()},jb.JTt=function(){return this.zIndex},Wb.YTt=function(){return this.D$().tx()},jb.YTt=function(){return this.WV},Wb.XTt=function(){return this.D$().LU()},jb.XTt=function(){return this.DU},Bb.KTt=function(t){const s=xb(this),i=s.fH().Cj().Lrt(t);if(!i)return;const e=i.xk();return s.D$().bU().wz(e)},Bb.ZTt=function(t,s){const i=xb(this),e=i.fH().Cj().Lrt(s);if(!e)return;const n=e.xk(),r=1===t,h=i.D$().bU();h.wz(n)!==r&&(h.Sz(n,r),h.vz(),Vb.j$())},Bb.QTt=function(t,s,i){const e=xb(this),n=e.fH().Cj().Lrt(t);if(!n)return;s=Math.floor(s);const r=n.zI().YI(s);if(!r)return;"color"===r?($b.ta(i),i=$b):"percent"===r&&(i/=100);const h=n.xk(),o=e.D$().bU();o.Mz(h,s,i)&&o.wz(h)&&Vb.j$()};const zb=Nb.Un(Nb.Rect),Jb=[],Yb=[];let Xb=!1,Kb=null,Zb=!1;const Qb=new Set;function*tM(t){if(!t)return!1;const s=this.aB(),i=s.Ak(),e=s.aN(),n=e.bN(),r=e.Dgt(),h=r.fH(),o=r.aGt(),a=r.lGt(),l=n.sX(),u=s.kN(),c=u-1,f=l.pN(),d=n.iX(f);let p=o.get("collmemory");p||(p=Nb.Un(Nb._u),o.set("collmemory",p)),a.get("collisionCreatedDestroyCallback")||(a.set("collisionCreatedDestroyCallback",!0),s.Sf().addEventListener("instancedestroy",t=>Ab(p,t.dz)));const m=h.nj(),g=t.nj(),y=m.ej();let w=null;for(let s=0;s<y.length;++s){const n=y[s];g.Cpt()?(i.iTt(n.D$().L$(),t,n.D$().$U(),Jb),w=Jb,i.tIt(n,t,w)):w=g.ej();for(let s=0;s<w.length;++s){const r=w[s];if(i.EB(n,r)||i.sIt(n,r)){const s=Rb(p,n,r);let i=!1,o=-2;"number"==typeof s&&(i=!0,o=s);const a=!i||o<c;if(Eb(p,n,r,u),a){const s=f.tX();e.oX(s);const i=h.nj(),o=t.nj();if(i.Fpt(!1),o.Fpt(!1),h===t){const t=i.Dpt();Nb.bh(t),t.push(n),t.push(r),h.pbt()}else{const s=i.Dpt(),e=o.Dpt();Nb.bh(s),Nb.bh(e),s.push(n),e.push(r),h.pbt(),t.pbt()}yield*f.rbt(l,d),e.lX(s)}}else Pb(p,n,r)}Nb.bh(Jb)}return n.dX(),!1}Bb.iIt=function(t){const s=Cb(this);t=Cb(t);const i=s.aB();if(i.eIt())return tM.call(s,t);if(!t)return!1;const e=i.Ak(),n=i.aN(),r=n.bN(),h=n.Dgt(),o=h.fH(),a=h.aGt(),l=h.lGt(),u=r.sX(),c=i.kN(),f=c-1,d=u.pN(),p=r.iX(d);let m=a.get("collmemory");m||(m=Nb.Un(Nb._u),a.set("collmemory",m)),l.get("collisionCreatedDestroyCallback")||(l.set("collisionCreatedDestroyCallback",!0),i.Sf().addEventListener("instancedestroy",t=>Ab(m,t.dz)));const g=o.nj(),y=t.nj(),w=g.ej();let S=null;for(let s=0;s<w.length;++s){const i=w[s];y.Cpt()?(e.iTt(i.D$().L$(),t,i.D$().$U(),Jb),S=Jb,e.tIt(i,t,S)):S=y.ej();for(let s=0;s<S.length;++s){const r=S[s];if(e.EB(i,r)||e.sIt(i,r)){const s=Rb(m,i,r);let e=!1,h=-2;"number"==typeof s&&(e=!0,h=s);const a=!e||h<f;if(Eb(m,i,r,c),a){const s=d.tX();n.oX(s);const e=o.nj(),h=t.nj();if(e.Fpt(!1),h.Fpt(!1),o===t){const t=e.Dpt();Nb.bh(t),t.push(i),t.push(r),o.pbt()}else{const s=e.Dpt(),n=h.Dpt();Nb.bh(s),Nb.bh(n),s.push(i),n.push(r),o.pbt(),t.pbt()}d.aX(u,p),n.lX(s)}}else Pb(m,i,r)}Nb.bh(Jb)}return r.dX(),!1},Bb.nIt=function(t){return t=Cb(t),Ob(xb(this),t,0,0)},Bb.rIt=function(t,s,i){return t=Cb(t),Ob(xb(this),t,s,i)},Bb.hIt=function(){return!0},Bb.Sq=function(){return Gb(this).Sq()},Bb.o5=function(){return Gb(this).o5()},Bb.oIt=function(t,s){const i=Cb(this);t=Cb(t);const e=i.aB(),n=this.nj().ej();if(0===n.length)return!1;const r=t.nj();let h=r.ej();if(r.Cpt()){const s=[...e.aIt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r.Cpt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];if(1===s)for(const s of e.aq())s.lIt(t)&&(null===o||o.has(s))&&a.add(s);else{let i;if(0===s){if(i=e.rq(),null===i)continue}else i=e.oq();i.lIt(t)&&(null===o||o.has(i))&&a.add(i)}}return 0!==a.size&&(r.$pt(a),t.pbt(),!0)},Bb.uIt=function(t,s){const i=Cb(this);t=Cb(t);const e=i.aB(),n=i.nj().ej();if(0===n.length)return!1;const r=t.nj();let h=r.ej();if(r.Cpt()){const s=[...e.aIt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r.Cpt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];2!==s||e.o5()||!e.lIt(t)||null!==o&&!o.has(e)||a.add(e);for(const i of 0===s?e.children():e.pq())2===s&&i.o5()||i.lIt(t)&&(null===o||o.has(i))&&a.add(i)}return 0!==a.size&&(r.$pt(a),t.pbt(),!0)},Bb.cIt=function(t,s,i){const e=Cb(this);t=Cb(t);const n=e.aB(),r=e.nj().ej();if(0===r.length)return!1;const h=t.nj();let o=h.ej();if(h.Cpt()){const s=[...n.aIt(t)];s.length>0&&(o=o.concat(s))}if(0===o.length)return!1;const a=h.Cpt()?null:new Set(o),l=[];for(let e=0,n=r.length;e<n;++e){const n=r[e];if(0===s){const s=n.fq(i);null!==s&&s.lIt(t)&&(null===a||a.has(s))&&l.push(s)}else if(1===s)for(const s of n.children())if(s.lIt(t)){if(0===i){(null===a||a.has(s))&&l.push(s);break}--i}}return 0!==l.length&&(h.Npt(l),t.pbt(),!0)},Bb.fIt=function(t,s,i){const e=xb(this);switch(t){case 0:default:return Nb.compare(e.uq(),s,i);case 1:return Nb.compare(e.dIt(),s,i)}},Bb.gq=function(t,s,i,e,n,r,h,o,a,l){t=Cb(t);const u=xb(this),c=Vb.kgt().fH();for(const f of t.pIt(u,c)){if(!f.qW().RW())return;u.gq(f,{bq:s,xq:i,Tq:e,Cq:n,Eq:r,Oq:h,Aq:o,Dq:a,kq:l})}},Bb.yq=function(t){t=Cb(t);const s=xb(this),i=Vb.kgt().fH();for(const e of t.pIt(s,i))s.yq(e)},Bb.mIt=function(){const t=xb(this);t.Sq()&&t.rq().yq(t)},Bb.gIt=function(){const t=xb(this).rq();return t?t.TH():-1},Bb.yIt=function(){return xb(this).uq()},Bb.wIt=function(){return xb(this).dIt()},Bb.SIt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=Gb(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.jq(),i.xU()):i.Bq(t,s)},Bb.Hq=function(t,s,i,e,n,r,h,o){const a=Gb(this);a.Hq(t,s,{mode:0===i?"absolute":"relative",x:e,y:n,WV:r,Jq:h,Yq:o})&&a.xU()},Bb.vIt=function(){const t=Gb(this);return t.qq()?t.zq().Fx():0},Bb.bIt=function(){const t=Gb(this);return t.qq()?t.zq().Dx():0},Bb.MIt=function(t){const s=Gb(this);t=2===t?!s.vV():0!==t,s.vV()!==t&&s.wV(t)},Bb.hz=function(t,s){this instanceof self.cH?this.GY(t,s):this.hz(t,s)},Bb.xIt=function(t,s){this instanceof self.cH?this.IY(t,""+s):this.xIt(t,""+s)},Bb.GIt=function(t){this instanceof self.cH?this.CY(t):this.GIt(t)},Bb.TIt=function(){this instanceof self.cH?this.bY():this.ez()},Bb.IIt=function(){this instanceof self.cH?this.MY():this.nz()},Bb.CIt=function(){return this instanceof self.cH?this.xY():this.CIt()},Bb._It=function(t){this instanceof self.cH?this.EIt(0!==t):this.PIt(0!==t)},Bb.AIt=function(){return this instanceof self.cH?this.Obt():this.RIt()},Wb.OIt=function(t,s,i){return Nb.compare(this.EJ().uot(t),s,i)},jb.OIt=function(t,s,i){return Nb.compare(Tb(this).uot(t),s,i)},Wb.FIt=function(t){return!!this.EJ().uot(t)},jb.FIt=function(t){return!!Tb(this).uot(t)},Bb.DIt=function(t,s){const i=Cb(this),e=i.nj(),n=e.ej();if(!n.length)return!1;const r=i.v1();let h=null,o=0;for(let e=0,a=n.length;e<a;++e){const a=n[e],l=r?a.fH().LMt(i.kMt()):0,u=a.uot(l+s);(null===h||0===t&&u<o||1===t&&u>o)&&(o=u,h=a)}return e.Vpt(h),!0},Bb.LIt=function(t){const s=Cb(this);return s.aB().Dgt().eGt()?kb(s,t):Lb(s,t)},Bb.oJ=function(t){const s=new Set(Nb.Lh(t)),i=xb(this).FH();return s.isSubsetOf(i)},Bb.kIt=function(){return xb(this).NIt()},Bb.$It=function(){return xb(this).FH().size},Bb.BIt=function(t){return xb(this).WIt(t)},Bb.jIt=function(t,s){const i=Nb.Lh(s);if(0===i.length)return;const e=xb(this),n=new Set(e.FH());if(0===t)for(const t of i)n.add(t);else if(1===t)for(const t of i)n.delete(t);e.LH(n)},Bb.VIt=function(){Vb.wH(xb(this))},Bb.HIt=function(){return!0},Bb.UIt=function(){return!0},Wb.qIt=function(t,s){this.EJ().cot(t,s)},jb.qIt=function(t,s){Tb(this).cot(t,s)},Wb.zIt=function(t,s){const i=this.EJ(),e=i.uot(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.cot(t,e+s)},jb.zIt=function(t,s){const i=Tb(this),e=i.uot(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.cot(t,e+s)},Wb.JIt=function(t,s){const i=this.EJ(),e=i.uot(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.cot(t,e-s))},jb.JIt=function(t,s){const i=Tb(this),e=i.uot(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.cot(t,e-s))},Wb.YIt=function(t,s){this.EJ().cot(t,s?1:0)},jb.YIt=function(t,s){Tb(this).cot(t,s?1:0)},Wb.XIt=function(t){const s=this.EJ();s.cot(t,0===s.uot(t)?1:0)},jb.XIt=function(t){const s=Tb(this);s.cot(t,0===s.uot(t)?1:0)},Bb.KIt=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=xb(this),e="state";Vb.ZIt(),i.c8(e),i.gx(s,e),Vb.QIt(e,{tCt:!0})},Bb.sCt=function(){return JSON.stringify(xb(this).mx("state"))},Bb.iCt=function(){return xb(this).fH().Pc()},Bb.eCt=function(){const t=Vb.Fgt().vmt();let s=t.oj();for(const i of Vb.aIt(t))++s;return s},Bb.nCt=function(){return Vb.Fgt().vmt().nj().ej().length},Wb.CH=function(){return this.EJ().CH()},jb.CH=function(){return Tb(this).CH()},Wb.TH=function(){return this.EJ().TH()},jb.TH=function(){return Tb(this).TH()},Bb.nwt=function(t){const s=xb(this);return t.toLowerCase()===Vb.aN().awt(s)},Bb.NH=function(t){const s=xb(this);Vb.aN().NH(s,t)},Bb.rCt=function(t){const s=Cb(this);return Vb.aN().Dyt().hCt(s.nj().ej(),t),!0},Bb.oCt=function(){return xb(this).EH()},Nb.aCt=function(t,s,i){const e=t[1],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.Q$,w=s.wht,S=s.Sht,v=Object.assign({},Bb,i>=2?jb:Wb);n&&(y.hTt=v.hTt,y.oTt=v.oTt,y.aTt=v.aTt,y.lTt=v.lTt,y.uTt=v.uTt,w.XM=v.XM,w.QM=v.QM,w.cTt=v.cTt,w.dTt=v.dTt,w.mTt=v.mTt,w.wTt=v.wTt,S.lCt=v.YM,S.uCt=v.ZM,S.PN=v.AN),r&&(y.STt=v.STt,y.vTt=v.vTt,w.Xg=v.Xg,w.Hg=v.Hg,w.BP=v.BP,S.cCt=v.Vg,S.fCt=v.Qg,S.dCt=v.bTt,S.pCt=v.MTt,S.mCt=v.xTt,S.gCt=v.GTt,S.yCt=v.TTt,S.wCt=v.ITt),h&&(y.SCt=v.CTt,y.vCt=v._Tt,y.ETt=v.ETt,w.Oj=v.Oj,w.PTt=v.PTt,w.ATt=v.ATt,w.RTt=v.RTt,w.OTt=v.OTt,w.FTt=v.FTt,S.bCt=v.Fj),o&&(y.vV=v.vV,y.DTt=v.DTt,w.wV=v.wV,w.bO=v.bO,w.kTt=v.kTt,S.Opacity=v.SO,S.ColorValue=v.xO),a&&(y.NTt=v.NTt,y.$Tt=v.$Tt,y.BTt=v.BTt,w.WTt=v.WTt,w.jTt=v.jTt,w.VTt=v.VTt,w.HTt=v.HTt,w.sx=v.sx,S.qTt=v.qTt,S.zTt=v.zTt,S.JTt=v.JTt,S.YTt=v.YTt,S.XTt=v.XTt),l&&(y.KTt=v.KTt,w.ZTt=v.ZTt,w.QTt=v.QTt),d&&(y.hIt=v.hIt,y.Sq=v.Sq,y.o5=v.o5,y.oIt=v.oIt,y.uIt=v.uIt,y.cIt=v.cIt,y.fIt=v.fIt,w.gq=v.gq,w.yq=v.yq,w.mIt=v.mIt,S.gIt=v.gIt,S.yIt=v.yIt,S.wIt=v.wIt),p&&(w.SIt=v.SIt,w.Hq=v.Hq,S.vIt=v.vIt,S.bIt=v.bIt),u&&(y.vV=v.vV,w.wV=v.MIt,w.MCt=v.hz,w.xCt=v.xIt,w.GCt=v.GIt),c&&(y.TCt=v.CIt,w.ICt=v.TIt,w.CCt=v.IIt),f&&(y.Cu=v.AIt,w._Ct=v._It),m&&(y.iIt=v.iIt,y.nIt=v.nIt,y.rIt=v.rIt,s.ECt=Db),e||(y.OIt=v.OIt,y.FIt=v.FIt,y.DIt=v.DIt,y.LIt=v.LIt,y.oJ=v.oJ,w.qIt=v.qIt,w.zIt=v.zIt,w.JIt=v.JIt,w.YIt=v.YIt,w.XIt=v.XIt,w.jIt=v.jIt,y.HIt=v.HIt,y.UIt=v.UIt,w.VIt=v.VIt,w.KIt||(w.KIt=v.KIt),S.sCt||(S.sCt=v.sCt),S.eCt=v.eCt,S.nCt=v.nCt,S.PCt=v.CH,S.ACt=v.TH,S.iCt=v.iCt,S.kIt=v.kIt,S.$It=v.$It,S.BIt=v.BIt,y.nwt=v.nwt,w.NH=v.NH,w.rCt=v.rCt),g&&(S.oCt=v.oCt)}}{const sM=self.Cs;sM.Lyt=class extends sM.Vn{constructor(t){super(),this.qpt=t,this.zc="",this.UD=-1,this.RCt="",this.OCt=!1,this.FCt=null,this.smt=0,this.CSt=[],this.omt=null,this.DCt=new Map,this.LCt=null,this.kCt=null,this.NCt=-1,this.Rbt=null,this.$Ct=null,this.BCt=!1}qn(){this.zc="",this.UD=-1,this.RCt="",this.FCt=null,this.kCt=null,this.Rbt=null,this.$Ct=null,this.NCt=-1,sM.bh(this.CSt),this.omt&&(this.omt.clear(),this.omt=null);for(const t of this.DCt.values())t.qn();this.DCt.clear(),this.LCt=null}JM(){const t=this.qpt,s=t.aB().S1(),i=t.Fgt();this.FCt=i.pN(),this.smt=i.dmt()+1;const e=t.Iwt(this.FCt);e&&(this.kCt=e,this.Rbt=e.Ybt(),this.$Ct=e.Jbt().map(t=>t._nt()),e.Zvt()&&(this.NCt=e.Qbt()));for(const t of s){const s=t.nj();s.Cpt()&&!this.FCt.Mvt(t)||(this.CSt.push(t),this.DCt.set(t,sM.Un(sM.WCt,s)))}const n=t.mN();this.omt=n.size>0?n:null}jCt(t){this.zc="timer",this.JM(),this.UD=this.qpt.aB().DN()+t}VCt(t){this.zc="walltimer",this.JM(),this.UD=this.qpt.aB().$N()+t}HCt(t){this.zc="signal",this.JM(),this.RCt=t.toLowerCase()}hCt(t,s){this.zc="instance-signals",this.JM(),this.RCt=s.toLowerCase(),this.LCt=new Set(t)}UCt(t){this.zc="promise",this.JM(),t.then(()=>this.twt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.twt()})}qCt(){return"timer"===this.zc}zCt(){return"walltimer"===this.zc}Zyt(){return"signal"===this.zc}hwt(){return"instance-signals"===this.zc}Mwt(){return"promise"===this.zc}Qyt(){return this.RCt}JCt(){return this.OCt}twt(){this.OCt=!0}owt(t){this.LCt.delete(t),0===this.LCt.size&&this.twt()}$yt(){return this.qCt()?this.UD<=this.qpt.aB().DN():this.zCt()?this.UD<=this.qpt.aB().$N():this.JCt()}YCt(t){t.amt(this.FCt,this.smt);for(const[t,s]of this.DCt.entries()){const i=t.nj();s.amt(i)}this.omt&&t.Imt([...this.omt]);const s=this.kCt;s&&(s.lbt(this.Rbt),s.Jbt().map((t,s)=>t.urt(this.$Ct[s])),s.Zvt()&&s.tMt(this.NCt))}Byt(t){this.YCt(t),this.FCt.Qvt(t),this.kCt&&this.kCt.Zvt()&&this.kCt.Sbt(this.NCt),this.qpt.Ayt(this.CSt),this.BCt=!0}async Hyt(t){this.YCt(t);for(const s of this.FCt.tbt(t))await this.qpt.aB().pyt(s);this.kCt&&this.kCt.Zvt()&&this.kCt.Sbt(this.NCt),this.qpt.Ayt(this.CSt),this.BCt=!0}Wyt(){return this.BCt}Mpt(t){for(const s of this.DCt.values())s.Mpt(t);if("instance-signals"===this.zc){for(const s of t)this.LCt.delete(s);0===this.LCt.size&&this.twt()}}e5(){const t={},s={wt:this.zc,t:this.UD,st:this.RCt,s:this.OCt,ev:this.FCt._1(),sm:this.CSt.map(t=>t._1()),dsm:this.omt?[...this.omt].map(t=>t._1()):null,sols:t};this.FCt.Bvt(this.smt)&&(s.act=this.FCt.Ngt(this.smt)._1());for(const[s,i]of this.DCt)t[s._1().toString()]=i.e5();return"instance-signals"===this.zc&&(s.pi=[...this.LCt].map(t=>t.TH())),s}static xwt(t,s){const i=t.aB(),e=t.zgt(s.ev);if(!e)return null;let n=0;if(s.hasOwnProperty("act")){const i=t.Ygt(s.act);if(!i)return null;n=i.xk()}const r=sM.Un(sM.Lyt,t);r.UD=s.t,s.hasOwnProperty("wt")?r.zc=s.wt:r.zc=-1===r.UD?"signal":"timer",r.RCt=s.st,r.OCt=s.s,r.FCt=e,r.smt=n;for(const t of s.sm){const s=i.QY(t);s&&r.CSt.push(s)}if(Array.isArray(s.dsm))for(const t of s.dsm){const s=i.QY(t);s&&(r.omt||(r.omt=new Set),r.omt.add(s))}for(const[e,n]of Object.entries(s.sols)){const s=parseInt(e,10),h=i.QY(s);if(!h)continue;const o=sM.Un(sM.WCt,null);o.n5(t,n),r.DCt.set(h,o)}if("instance-signals"===r.zc){r.LCt=new Set;for(const t of s.pi){const s=i.P$(t);s&&r.LCt.add(s)}}return r}}}{const iM=self.Cs;iM.WCt=class extends iM.Vn{constructor(t){super(),this.mpt=null,this.XCt=!0,this.dQ=[],t&&(this.mpt=t.fH(),this.XCt=t.Cpt(),iM.Th(this.dQ,t.Dpt()))}qn(){this.mpt=null,iM.bh(this.dQ)}amt(t){t.Fpt(this.XCt),iM.Th(t.Dpt(),this.dQ)}Mpt(t){iM.Ph(this.dQ,t)}e5(){return{sa:this.XCt,insts:this.dQ.map(t=>t.TH())}}n5(t,s){const i=t.aB();this.XCt=!!s.sa,iM.bh(this.dQ);for(const t of s.insts){const s=i.P$(t);s&&this.dQ.push(s)}}}}{let eM=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};GetNextParamMap=eM;const nM=self.Cs;nM.KCt=class extends nM.Vn{constructor(t){super(),this.$c=t.runtime,this.Wc=t.id,this.Yn=t.name??"",this.ZCt=!!t.wW,this.QCt=!!t.t_t,this.s_t=!!t.GW,this.i_t=!!t.e_t,this.n_t=!!t.IW,this.r_t=!!t.h_t,this.o_t=!!t.OW,this.a_t=!!t.MW,this.l_t=!!t.EW,this.u_t=t.c_t,this.f_t=null,this.d_t=new Map,this.p_t=new Map,this.m_t=new Map,this.g_t=new Map,this.y_t=t.w_t,this.S_t=null}qn(){this.$c=null}aB(){return this.$c}yW(){return this.Wc}Pc(){return this.Yn}v_t(){}rwt(){return this.iGt()>=2?this.S_t.constructor:this.constructor}iGt(){return this.u_t}b_t(t=!1){let s=this.y_t;return t&&"function"!=typeof s&&this.iGt()>=2&&(s=globalThis.LJ),s}SW(){return this.ZCt}bW(){return this.QCt}xW(){return this.a_t}PW(){return this.l_t}TW(){return this.s_t}bM(){return this.i_t}_W(){return this.n_t}RW(){return this.r_t}FW(){return this.o_t}GMt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.d_t.get(t);return i||(i=t.bind(s),this.d_t.set(t,i),i)}Zxt(t,s,i){if(!s)throw new Error("missing 'this' binding");const e=eM(this.p_t,t);let n=e.get(i);return n||(n=t.bind(s,i),e.set(i,n),n)}Qxt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");const n=eM(this.m_t,t),r=eM(n,i);let h=r.get(e);return h||(h=t.bind(s,i,e),r.set(e,h),h)}tGt(t,s,i,e,n){if(!s)throw new Error("missing 'this' binding");const r=eM(this.g_t,t),h=eM(r,i),o=eM(h,e);let a=o.get(n);return a||(a=t.bind(s,i,e,n),o.set(n,a),a)}M_t(t){if(!this.SW())throw new Error("must be single-global plugin");this.f_t=t}WW(){if(!this.SW())throw new Error("must be single-global plugin");return this.f_t}VW(){if(!this.SW())throw new Error("must be single-global plugin");return this.f_t.VW()}x_t(){const t=this.iGt();nM.mW.G_t(this,t);const s=this.b_t(!0);if(s){if(this.S_t=new s,!(this.S_t instanceof self.dW))throw new TypeError("plugin class must derive from IPlugin")}else this.S_t=new self.dW;nM.mW.T_t(t)}NW(){return this.S_t}}}{const rM=self.Cs;rM.I_t=class extends rM.KCt{constructor(t,s){super(t),this.C_t=s,this.__t=0,this.E_t=new Map,this.P_t("elem-focused",t=>t.A_t()),this.P_t("elem-blurred",t=>{t&&t.R_t()})}qn(){super.qn()}O_t(t){const s=this.__t++;return this.E_t.set(s,t),s}F_t(t){this.E_t.delete(t)}P_t(t,s){this.$c.KH(this.C_t,t,t=>{const i=this.E_t.get(t.elementId);s(i,t)})}}}{const hM=self.Cs;hM.D_t=class extends hM.Vn{constructor(t){super(),this.mpt=t,this.$c=t.aB(),this.L_t=t.qW()}qn(){this.mpt=null,this.$c=null,this.L_t=null}fH(){return this.mpt}aB(){return this.$c}qW(){return this.L_t}Wz(){return this.mpt.Wz()}v_t(){}pGt(t){}QGt(t){}tTt(t){}m4(t){}b4(){}w4(){}H4(t){}k_t(){}b_t(){return null}N_t(t,s,i){const e=hM.Un(hM.Event,t,s);e.$_t=this,i&&Object.assign(e,i),this.fH().EZ(e)}}}{const oM=self.Cs;oM.B_t=class extends oM.Vn{constructor(t,s){super(),this.di=t,this.C_t=s,this.W_t=null,this.$c=t.aB(),this.mpt=this.di.fH(),this.j_t=this.mpt.ZGt(),this.t8=null,this.i8=null,this.hU=!1,this.aU=!1,this.Kf=null,this.cP=!1}qn(){this.cP=!0,this.V_t(),this.H_t(),this.t8=null,this.i8=null,this.Kf&&(this.Kf.qn(),this.Kf=null),this.di=null,this.$c=null,this.mpt=null,this.j_t=null}zn(){return this.cP}EJ(){return this.di}aB(){return this.$c}fH(){return this.mpt}qW(){return this.j_t.qW()}ZGt(){return this.j_t}U_t(){return this.di.A$()}JH(t){return this.$c.JH(t,this.di,null)}q_t(t){return this.$c.q_t(t,this.di,null)}K$(t){return this.$c.K$(t,this.di,null)}z_t(t,s){return this.$c.z_t(t,this.di,s)}J_t(t,s){return this.$c.J_t(t,this.di,s)}Y_t(t){return this.$c.Y_t(t)}X_t(t,s){this.$c.KH(this.C_t,t,s)}K_t(t){for(const[s,i]of t)this.X_t(s,i)}Z_t(t,s){this.$c.jc(this.C_t,t,s)}Q_t(t,s){return this.$c.H$(this.C_t,t,s)}tEt(t,s){if(!this.$c.qk())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.C_t,handler:t,data:s,responseId:null});this.Z_t(t,s)}sEt(t){if(!t)throw new Error("cannot set empty component id");this.W_t=t}iEt(){if(!this.W_t)throw new Error("wrapper extension component id not set");return this.$c.dU(this.W_t)}mU(t,s){if(!this.W_t)throw new Error("wrapper extension component id not set");this.$c.mU(this.W_t,t,s)}eEt(t){for(const[s,i]of t)this.mU(s,i)}VY(t,s){if(!this.W_t)throw new Error("wrapper extension component id not set");this.$c.VY(this.W_t,t,s)}HY(t,s){if(!this.W_t)throw new Error("wrapper extension component id not set");return this.$c.HY(this.W_t,t,s)}c7(){}nEt(){}rEt(){if(!this.hU){if(!this.t8)if(this.$c.iU()){const t=globalThis.eU,s=this.qW();this.t8=()=>{const i=performance.now();this.c7(),t.rU(s,performance.now()-i)}}else this.t8=()=>this.c7();this.$c.Sf().addEventListener("tick",this.t8),this.hU=!0}}V_t(){this.hU&&(this.$c.Sf().removeEventListener("tick",this.t8),this.hU=!1)}hEt(){return this.hU}oEt(){if(!this.aU){if(!this.i8)if(this.$c.iU()){const t=globalThis.eU,s=this.qW();this.i8=()=>{const i=performance.now();this.nEt(),t.rU(s,performance.now()-i)}}else this.i8=()=>this.nEt();this.$c.Sf().addEventListener("tick2",this.i8),this.aU=!0}}H_t(){this.aU&&(this.$c.Sf().removeEventListener("tick2",this.i8),this.aU=!1)}aEt(){return this.aU}lEt(){return[]}mx(){return null}gx(t){}sot(t){}oot(t,s){}tat(t,s,i){if(0===s)return;const e=this.sot(t);if("number"!=typeof e)throw new Error("expected number");this.oot(t,e+s,i)}uEt(t,s,i,e){}cEt(t,...s){t.call(this,...s)}fEt(t,...s){return t.call(this,...s)}b_t(){return null}N_t(t,s,i){if(!this.di.dEt())return;const e=this.U_t(),n=oM.Un(oM.Event,t,s);n.dz=e,i&&Object.assign(n,i),e.dispatchEvent(n)}bM(){return!1}}}{const aM=self.Cs;aM.pEt=class extends aM.B_t{constructor(t,s){super(t,s),this.Cit=t.D$(),this.mEt=null,this.gEt=null}qn(){if(this.mEt){const t=this.$c.Sf();t.removeEventListener("renderercontextlost",this.mEt),t.removeEventListener("renderercontextrestored",this.gEt),this.mEt=null,this.gEt=null}this.Cit=null,super.qn()}yEt(){this.wEt()}SEt(){}vEt(){}wEt(){if(this.mEt)return;this.mEt=()=>this.rQ(),this.gEt=()=>this.bEt();const t=this.$c.Sf();t.addEventListener("renderercontextlost",this.mEt),t.addEventListener("renderercontextrestored",this.gEt)}rQ(){this.SEt()}bEt(){this.vEt()}D$(){return this.Cit}wet(){return!1}yet(){if(!this.wet())throw new Error("original size not known");const t=this.MEt();if(t)return t.Vg()}bet(){if(!this.wet())throw new Error("original size not known");const t=this.MEt();if(t)return t.Qg()}MEt(){return null}xEt(){const t=this.MEt();if(t){const s=t.TT();if(s)return[s.Vg(),s.Qg()]}return[100,100]}GEt(){const t=this.MEt();return t?t.yA():null}TEt(){const t=this.MEt();return t?t.IEt():null}CEt(){const t=this.MEt();return!!t&&t._Et()}pTt(t){const s=this.di.D$();return[s.YM(),s.ZM(),s.LU()]}k_t(t,s,i){}EEt(t,s){}R3(){return!0}}}{const lM=self.Cs,uM=lM.Un(lM.Rect);lM.PEt=class extends lM.pEt{constructor(t,s){super(t,s),this.AEt=this.qW().O_t(this),this.REt=!0,this.OEt=!1,this.FEt=!1,this.DEt=-.2,this.LEt=lM.Un(lM.Rect,0,0,-1,-1);const i=this.$c.I$();this.kEt=i.rY(),this.NEt=i.hY(),this.$Et=-1,this.BEt=-1,this.WEt=!1,this.rEt()}qn(){this.qW().F_t(this.AEt),this.jEt("destroy"),this.AEt=-1,super.qn()}sz(){if(this.$c.qk())throw new Error("not valid in worker mode");return this.VEt("get-element")}jEt(t,s){s||(s={}),s.elementId=this.AEt,this.Z_t(t,s)}VEt(t,s){return s||(s={}),s.elementId=this.AEt,this.tEt(t,s)}HEt(t,s){return s||(s={}),s.elementId=this.AEt,this.Q_t(t,s)}UEt(t){t||(t={});const s=this.D$();t.elementId=this.AEt,t.isVisible=s.vV(),t.htmlIndex=s.L$().fY(),t.htmlZIndex=s.dY(),Object.assign(t,this.qEt()),this.REt=!!t.isVisible,this.tEt("create",t),this.zEt(!0)}MIt(t){t=!!t,this.REt!==t&&(this.REt=t,this.jEt("set-visible",{isVisible:t}))}c7(){this.zEt(!1)}JEt(){const t=this.$c.I$().wY();return"Android"===lM.Zs.Qs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}zEt(t){if(this.EJ().SY())return;const s=this.D$(),i=s.L$(),e=s.$U();let[n,r]=i.nH(e.Qa(),e.tl()),[h,o]=i.nH(e.sl(),e.il());const a=this.$c.I$(),l=a.eW(),u=a.rW();if(!s.vV()||!i.vV())return void this.MIt(!1);if(!this.JEt()&&(h<=0||o<=0||n>=l||r>=u))return void this.MIt(!1);uM.set(n,r,h,o);const c=a.rY(),f=a.hY(),d=i.fY(),p=s.dY();if(!t&&uM.equals(this.LEt)&&this.kEt===c&&this.NEt===f&&this.$Et===d&&this.BEt===p)return void this.MIt(!0);this.LEt.S(uM),this.kEt=c,this.NEt=f,this.$Et=d,this.BEt=p,this.MIt(!0);let m=null;this.FEt&&(m=i.vY()+this.DEt),this.VEt("update-position",{left:Math.round(this.LEt.Qa()),top:Math.round(this.LEt.tl()),width:Math.round(this.LEt.width()),height:Math.round(this.LEt.height()),htmlIndex:d,htmlZIndex:p,fontSize:m})}ez(){this.VEt("focus",{focus:!0})}nz(){this.VEt("focus",{focus:!1})}A_t(){this.OEt=!0}R_t(){this.OEt=!1}CIt(){return this.OEt}hz(t,s){this.jEt("set-css-style",{prop:lM.bo(t),val:s})}xIt(t,s){this.jEt("set-attribute",{name:t,val:s})}GIt(t){this.jEt("remove-attribute",{name:t})}YEt(){this.WEt||(this.WEt=!0,Promise.resolve().then(()=>{this.WEt=!1,this.jEt("update-state",this.qEt())}))}qEt(){}XEt(){return this.AEt}}}{const cM=self.Cs,fM=self.gz;cM.KEt=class extends cM.Vn{constructor(t){super(),this.$c=t.runtime,this.Wc=t.id,this.Yn=t.name??"",this.ZEt=cM.Un(cM.Lu),this.QEt=cM.Un(cM.Lu),this.u_t=t.c_t,this.y_t=t.w_t,this.tPt=null}qn(){this.QEt.qn(),this.ZEt.qn(),this.$c=null}aB(){return this.$c}yW(){return this.Wc}Pc(){return this.Yn}v_t(){}iGt(){return this.u_t}b_t(t=!1){let s=this.y_t;return t&&"function"!=typeof s&&this.iGt()>=2&&(s=globalThis.PY),s}sPt(t){this.ZEt.Bu(t)}k8(){return this.ZEt.Wu()}n1(t){this.QEt.Bu(t)}a1(t){this.QEt.Ru(t)}ej(){return this.QEt.Wu()}x_t(){const t=this.iGt();cM.mW.G_t(this,t);const s=this.b_t(!0);if(s){if(this.tPt=new s,!(this.tPt instanceof fM))throw new TypeError("behavior class must derive from IBehavior")}else this.tPt=new fM;cM.mW.T_t(t)}az(){return this.tPt}}}{const dM=self.Cs;dM.iPt=class extends dM.Vn{constructor(t){super(),this.$c=t.aB(),this.$Mt=t,this.mpt=t.fH(),this.ePt=t.lz(),this.ePt.sPt(this.mpt)}qn(){this.$c=null,this.$Mt=null,this.mpt=null,this.ePt=null}v_t(){}fz(){return this.$Mt}fH(){return this.mpt}aB(){return this.$c}lz(){return this.ePt}}}{const pM=self.Cs;pM.nPt=class extends pM.Vn{constructor(t,s){super(),this.Jlt=t,this.C_t=s,this.di=t.pz(),this.$c=t.aB(),this.$Mt=t.fz(),this.j_t=this.$Mt.ZGt(),this.hU=!1,this.aU=!1,this.WY=!1,this.Kf=null}qn(){this.V_t(),this.H_t(),this.rPt(),this.Kf&&(this.Kf.qn(),this.Kf=null),this.Jlt=null,this.di=null,this.$c=null,this.$Mt=null,this.j_t=null}lz(){return this.$Mt.lz()}hPt(){return this.Jlt}pz(){return this.di}fH(){return this.di.fH()}D$(){return this.di.D$()}aB(){return this.$c}fz(){return this.$Mt}ZGt(){return this.j_t}U_t(){return this.Jlt.U_t()}JH(t){return this.$c.JH(t,this.di,this.$Mt)}q_t(t){return this.$c.q_t(t,this.di,this.$Mt)}K$(t){return this.$c.K$(t,this.di,this.$Mt)}oPt(){}c7(){}nEt(){}aPt(){}rEt(){this.hU||(this.$c.DY(this),this.hU=!0)}V_t(){this.hU&&(this.$c.LY(this),this.hU=!1)}hEt(){return this.hU}oEt(){this.aU||(this.$c.kY(this),this.aU=!0)}H_t(){this.aU&&(this.$c.NY(this),this.aU=!1)}aEt(){return this.aU}lPt(){this.WY||(this.$c.$Y(this),this.WY=!0)}rPt(){this.WY&&(this.$c.BY(this),this.WY=!1)}uPt(){return this.WY}lEt(){return[]}X_t(t,s){this.$c.KH(this.C_t,t,s)}cPt(t,s){}mx(){return null}gx(t){}sot(t){}oot(t,s){}tat(t,s){if(0===s)return;const i=this.sot(t);if("number"!=typeof i)throw new Error("expected number");this.oot(t,i+s)}uEt(t,s,i,e){}cEt(t,...s){t.call(this,...s)}fEt(t,...s){return t.call(this,...s)}b_t(){return null}N_t(t,s,i){if(!this.Jlt.dEt())return;const e=this.U_t(),n=pM.Un(pM.Event,t,s);n.fPt=e,n.dz=e.dz,i&&Object.assign(n,i),e.dispatchEvent(n)}}}{let mM=function(t){if(t!==yM)throw new Error("invalid internal API token")};ValidateInternalAPIToken=mM;const gM=self.Cs;gM.sB={},gM.yut={};const yM=gM._s();let wM=[],SM=[],vM=[],bM=null,MM=null,xM=null,GM=null;const TM=new Map,IM=new Map;gM.mW=class extends gM.Vn{constructor(t,s){super(),this.$c=t,this.dPt=[],this.vMt=null,this.pPt=[],this.mPt=new Map,this.gPt=null,this.yPt=null,this.wPt=new Set(s)}SPt(t){const s=t[19],i=this.$c.xbt(t[0]);if(!i)throw new Error("missing plugin");gM.aCt(t,i,s);const e=s>=2?gM.KCt:i,n=gM.Un(e,{runtime:this.$c,wW:t[1],t_t:t[2],GW:t[5],IW:t[8],e_t:t[9],h_t:t[13],OW:t[14],MW:t[17],EW:t[18],c_t:s,id:t[20],name:t[21],w_t:s>=2?i:null});n.v_t(),this.dPt.push(n),TM.set(i,n)}vPt(){this.vMt=gM.Un(gM.sB.tB,{runtime:this.$c,wW:!0}),this.vMt.v_t()}bPt(t){const s=t[1],i=t[2],e=t[3],n=this.$c.xbt(t[0]);if(!n)throw new Error("missing behavior");this.mPt.set(n,()=>{const t=s>=2?gM.KEt:n,r=gM.Un(t,{runtime:this.$c,id:i,name:e,c_t:s,w_t:s>=2?n:null});r.v_t(),this.pPt.push(r),IM.set(n,r),!this.gPt&&gM.yut.MPt&&r instanceof gM.yut.MPt?this.gPt=r:!this.yPt&&gM.yut.xPt&&r instanceof gM.yut.xPt&&(this.yPt=r),r.x_t()})}GPt(t){const s=this.mPt.get(t);s&&(s(),this.mPt.delete(t))}static G_t(t,s=1){if(gM.mW.G_t!==bM)throw new Error("invalid method");1===s&&wM.push(t),SM.push(t)}static T_t(t=1){if(gM.mW.T_t!==MM)throw new Error("invalid method");1===t&&wM.pop(),SM.pop()}static gH(){if(gM.mW.gH!==xM)throw new Error("invalid method");if(0===wM.length)throw new Error("no init object set");return wM.at(-1)}static pW(t){if(gM.mW.pW!==GM)throw new Error("invalid method");if(mM(t),0===SM.length)throw new Error("no init object set");return SM.at(-1)}static TPt(t){vM.push(t)}static IPt(){vM.pop()}static qH(){if(0===vM.length)throw new Error("no init properties set");return vM.at(-1)}CPt(){for(const t of this.dPt)t.x_t()}static kW(t){return TM.get(t)||null}static yz(t){return IM.get(t)||null}AZ(){return this.vMt}_Pt(){return this.gPt}EPt(){return this.yPt}dU(t){return this.wPt.has(t)}},bM=gM.mW.G_t,MM=gM.mW.T_t,xM=gM.mW.gH,GM=gM.mW.pW}{const CM=self.Cs,_M=new Set;CM.PPt=class extends CM.Vn{constructor(){super(),this.APt=0,this.zZ="",this.JZ=0,this.RPt=0,this.OPt=0,this.Py=0,this.Ay=0,this.FPt=!1,this.DPt=!1,this.LPt=null,this.kPt="",this.rP=CM.Un(CM.Rect),this.NPt=CM.Un(CM.El),this.$Pt="",this.BPt=new self.hB(this),_M.add(this)}qn(){this.aP(),this.LPt&&0===this.LPt.aQ()&&this.LPt.qn(),this.LPt=null,_M.delete(this),this.WPt()}static rQ(){for(const t of _M)t.kPt="",t.rP.set(0,0,0,0),t.NPt.Xl(t.rP)}jPt(t){this.zZ=t[0],this.JZ=t[1],this.RPt=t[2],this.OPt=t[3],this.Py=t[4],this.Ay=t[5],this.FPt=t[6],this.DPt=!0}VPt(t,s,i){if(i=!!i,this.LPt)throw new Error("already loaded asset");this.zZ=s;const e={wZ:i};return CM.Kh(s)&&(e.SZ="remote"),this.oB(t,e),this.LPt.bZ()}HPt(t,s){if(this.LPt)throw new Error("already loaded asset");this.zZ="",this.JZ=s.size,this.LPt=CM.Un(CM.vZ,t._k(),{blob:s,size:this.JZ,SZ:"local"})}UPt(t){if(t===this)throw new Error("cannot replace with self");this.APt++,this.aP(),this.zZ=t.zZ,this.JZ=t.JZ,this.RPt=t.RPt,this.OPt=t.OPt,this.Py=t.Py,this.Ay=t.Ay,this.FPt=t.FPt,this.DPt=t.DPt,this.LPt=t.LPt,this.kPt=t.kPt,this.rP=t.rP,this.NPt=t.NPt,this.WPt()}GZ(){return this.zZ}Fu(){return this.JZ}qPt(){return this.RPt}zPt(){return this.OPt}_Et(){return this.FPt}Vg(){return this.Py}Qg(){return this.Ay}JPt(){return this.LPt.Vg()}YPt(){return this.LPt.Qg()}oB(t,s){if(this.LPt)throw new Error("already got asset");s=Object.assign({},s,{url:this.GZ(),size:this.Fu()}),this.LPt=t.yZ(s)}ZZ(){return this.LPt&&this.LPt.ZZ()}async KX(t,s){if(!this.LPt)throw new Error("no asset");if(this.kPt)throw new Error("already loaded texture");const i=this.APt;this.kPt="loading";const e=await this.LPt.KX(t,s);if(this.APt!==i)return null;if(!e)return this.kPt="",null;this.kPt="loaded",this.DPt||(this.Py=e.Vg(),this.Ay=e.Qg(),this.DPt=!0);const n=this.FPt?this.Ay:this.Py,r=this.FPt?this.Py:this.Ay;return this.rP.set(this.RPt,this.OPt,this.RPt+n,this.OPt+r),this.rP.St(e.Vg(),e.Qg()),this.NPt.Xl(this.rP),this.FPt&&this.NPt.iu(),e}aP(){this.kPt&&(this.LPt&&this.LPt.aP(),this.kPt="",this.rP.set(0,0,0,0),this.NPt.Xl(this.rP))}TT(){return this.LPt&&"loaded"===this.kPt?this.LPt.TT():null}yA(){return this.rP}IEt(){return this.NPt}zJ(){return this.BPt}XPt(){return this.LPt}async KPt(t){t||(t=await this.LPt.lQ());const s=CM.co(this.Py,this.Ay),i=s.getContext("2d");return this.FPt?(i.rotate(Math.PI/-2),i.translate(-this.Ay,0),i.drawImage(t,this.RPt,this.OPt,this.Ay,this.Py,0,0,this.Ay,this.Py)):i.drawImage(t,this.RPt,this.OPt,this.Py,this.Ay,0,0,this.Py,this.Ay),s}async ZPt(t){if(this.$Pt)return this.$Pt;const s=await this.KPt(t),i=await CM.fo(s);return this.$Pt=URL.createObjectURL(i),this.$Pt}WPt(){this.$Pt&&(URL.revokeObjectURL(this.$Pt),this.$Pt="")}}}{const EM=self.Cs;EM.QPt=class extends EM.Vn{constructor(t){super(),this.Yn=t[0],this.tAt=t[1],this.Axt=!!t[2],this.Aat=t[3],this.sAt=t[4],this.iAt=!!t[5],this.zQ=t[6],this.eAt=t[7].map(t=>EM.Un(EM.nAt,t)),this.rAt=new self.xz(this)}static hAt(t,s){const i=EM.Un(EM.QPt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.eAt.push(EM.nAt.hAt(t)),i}qn(){for(const t of this.eAt)t.qn();EM.bh(this.eAt)}oAt(t){for(const s of this.eAt)s.Wz().oB(t)}aAt(t,s){return Promise.all(this.eAt.map(i=>i.Wz().KX(t,s)))}lAt(){for(const t of this.eAt)t.Wz().aP()}Pc(){return this.Yn}_1(){return this.zQ}Oz(){return this.eAt.length}Dz(){return this.eAt}uAt(t){if((t=Math.floor(t))<0||t>=this.eAt.length)throw new RangeError("invalid frame");return this.eAt[t]}cAt(t,s){(s=Math.floor(s))<0?this.eAt.unshift(t):s>=this.eAt.length?this.eAt.push(t):this.eAt.splice(s,0,t)}fAt(t){if((t=Math.floor(t))<0||t>=this.eAt.length)throw new RangeError("invalid frame");this.eAt[t].qn(),this.eAt.splice(t,1)}dAt(t){for(let s=0,i=this.eAt.length;s<i;++s)if(EM.Ze(this.eAt[s].iJ(),t))return s;return-1}pAt(t){if("string"==typeof t){const s=this.dAt(t);if(-1===s)throw new Error(`cannot find animation frame with tag ${t}`);return s}return t}Gz(){return this.tAt}Iz(){return this.Axt}_z(){return this.Aat}Pz(){return this.sAt}Rz(){return this.iAt}mAt(){return this.rAt}}}{const PM=self.Cs,AM=(()=>{const t=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),s=new Uint8Array(t.length);for(let i=0,e=t.length;i<e;++i)s[i]=t.charCodeAt(i);return new Blob([s],{type:"image/png"})})();PM.nAt=class extends PM.Vn{constructor(t){super(),this.gAt=PM.Un(PM.PPt),this.gAt.jPt(t),this.yAt=t[7],this.wAt=PM.Un(PM.Ea,t[8],t[9]),this.SAt=t[10].map(t=>PM.Un(PM.vAt,this,t)),this.bAt=new Map;for(const t of this.SAt)this.bAt.set(t.Pc().toLowerCase(),t);this.MAt=null;const s=t[11];s.length>=6&&(this.MAt=PM.Un(PM.lu,s)),this.Rw=t[12]?t[12]:"",this.xAt=new self.Bz(this)}static hAt(t){const s=PM.Un(PM.nAt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.gAt.HPt(t,AM),s}qn(){this.MAt&&(this.MAt.qn(),this.MAt=null),this.gAt.qn(),this.gAt=null}Wz(){return this.gAt}jz(){return this.yAt}_U(){return this.wAt.Fa()}AU(){return this.wAt.La()}Zz(){return this.MAt}Xz(t){return this.bAt.get(t.toLowerCase())||null}Yz(t){return(t=Math.floor(t))<0||t>=this.SAt.length?null:this.SAt[t]}Uz(){return this.SAt.length}iJ(){return this.Rw}Lz(){return this.xAt}}}{const RM=self.Cs;RM.vAt=class extends RM.Vn{constructor(t,s){super(),this.GAt=t,this.Yn=s[0],this.TAt=RM.Un(RM.Ea,s[1],s[2])}qn(){}Pc(){return this.Yn}YM(){return this.TAt.Fa()}ZM(){return this.TAt.La()}IAt(){return this.TAt}}}{const OM=globalThis.Cs,FM=globalThis.eU,DM=globalThis.HW,LM=globalThis.rj,kM=globalThis.vj,NM=globalThis.assert;OM.Sct=class extends OM.Vn{constructor(t,s,i){super();const e=t.xbt(i[1]);this.$c=t,this.L_t=OM.mW.kW(e),this.j_t=null,this.CAt=e.Instance,this.Aw=s,this.zQ=i[11],this.Yn=i[0],this.oMt=this.$c.Hgt(i[14]),this._At=!!i[9],this.EAt=!!i[2],this.PAt=!!i[10],this.AAt=i[3].map(s=>({RQ:s[0],type:s[1],name:s[2],RAt:t.Hgt(s[3])})),this.OAt=i[4],this.FAt=i[5],this.QCt=this.L_t.bW(),this.DAt=OM.Un(OM.Event.Sf),this._0=null;const[n,r]=t.Ak().kB();if(this.LAt=OM.Un(OM.kAt,n,r),this.NAt=!0,this.$At=null,this.BAt=null,this.WAt=-1,this.jAt=null,this.VAt=null,this.HAt=null,this.UAt=null,this.qAt=null,this.zAt=!1,this.JAt=null,this.YAt=i[8].map(t=>OM.XAt.UT(this,t)),this.KAt=[],this.ZAt=new Map,this.QAt=new Map,this.tRt=new Set,this.sRt=new Map,this.iRt=OM.Un(OM.ppt,this),this.eRt=null,this.nRt=0,this.rRt=!1,this.JAt=null,this.gAt=null,this.hRt=null,this.oRt=null,this.aRt=null,this.lRt=0,this.Lxt=new Map,this.kxt=new Map,this.dQ=[],this.uRt=new Map,this.cRt=!0,this.L_t._W()&&(this._0=OM.Un(OM.E0,this,i[12])),i[6]&&(this.gAt=OM.Un(OM.PPt),this.gAt.jPt(i[6])),i[7]){this.hRt=i[7].map(t=>OM.Un(OM.QPt,t)),this.oRt=new Map,this.aRt=new Map;for(const t of this.hRt)this.oRt.set(t.Pc().toLowerCase(),t),this.aRt.set(t._1(),t)}this.EAt?(this.$At=[],this.BAt=new Set,this.WAt=this.$c.fRt()):(this.jAt=[],this.VAt=new Set,this.HAt=[],this.UAt=[],this.qAt=[]);const h=this.L_t.iGt();if(h<2&&(this.j_t=OM.Un(e.dRt,this,i[15]),!(this.j_t instanceof OM.D_t)))throw new Error("v1 sdk type must derive from SDKTypeBase");let o;if(this.pRt=null,this.mRt=null,this.j0=OM.Un(OM.Event.Sf),OM.mW.G_t(this,h),h>=2?(o=e.dRt,o||(o=globalThis.HJ)):o=this.j_t.b_t(),o&&!this.EAt){if(this.pRt=new o(h<2?this:null),h<2&&!(this.pRt instanceof LM))throw new TypeError("script interface class must derive from IObjectType");if(h>=2&&!(this.pRt instanceof globalThis.HJ))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else{const t=this.EAt?kM:LM;this.pRt=new t}if(OM.mW.T_t(h),i[13]){const t=i[13];if(t){const s=t[0],i=t[1],e=t[2];this.j_t.k_t(s,i,e)}}this.$c.gRt()&&!this.EAt&&!this.PAt&&this.QCt||this.v_t(),this.L_t.SW()&&(this.L_t.M_t(this),this.yRt(i)),this.wRt=null}static UT(t,s,i){return OM.Un(OM.Sct,t,s,i)}qn(){if(this.DAt.qn(),this.DAt=null,this.gAt&&(this.gAt.qn(),this.gAt=null),this.hRt){for(const t of this.hRt)t.qn();OM.bh(this.hRt),this.oRt.clear(),this.aRt.clear()}this.wRt=null,this.iRt.qn(),this.iRt=null,this.Lxt.clear(),this.kxt.clear(),this.JAt=null,this.$c=null}SRt(t){for(let s=1,i=t.length;s<i;++s){const i=this.$c.J0(t[s]);this.$At.push(i),this.BAt.add(i),i.jAt.push(this),i.VAt.add(this)}}vRt(t){this.zAt=!0,this.JAt=t}xH(){return this.zAt}c4(){return this.JAt}bRt(){let t=0;if(!this.EAt)for(const s of this.jAt)for(const i of s.MRt()){const s=i.Pc().toLowerCase();this.ZAt.set(s,i),this.QAt.set(s,t),this.KAt.push(i),++t}for(const s of this.MRt()){const i=s.Pc().toLowerCase();this.ZAt.set(i,s),this.QAt.set(i,t),this.KAt.push(s),++t}for(const t of this.KAt)this.tRt.add(t.lz().constructor);if(!this.EAt&&this.jAt.length){const t=this.$c.xRt();OM.xh(this.HAt,t,0),OM.xh(this.UAt,t,0),OM.xh(this.qAt,t,0);const s=[];let i=0,e=0,n=0;for(const t of this.jAt){const r=t.kMt();this.HAt[r]=i,i+=t.GRt(),this.UAt[r]=e,e+=t.TRt(),this.qAt[r]=n,n+=t.IRt();const h=t.Cj();if(h&&this._0)for(const t of h._j())s.push(t.CRt(this._0))}this._0&&this._0._Rt(s)}}yRt(t){const s=OM.te(t[17])?t[17]:this.$c.ERt(),i=OM.Un(OM.Instance,{runtime:this.$c,objectType:this,uid:s});i.PRt(t[16],[]),this.$c.ARt(s,i),this.dQ.push(i)}ZGt(){return this.j_t}RRt(){return this.PAt}Sf(){return this.DAt}v_t(){this.EAt||(this.j_t?this.j_t.v_t():this.pRt.UJ())}ORt(){return this.lRt>0}async m4(t){this.EAt||(this.lRt++,1===this.lRt&&(this.j_t?await this.j_t.m4(t):await this.pRt.JJ(this.$c.I$().T$())))}b4(){if(!this.EAt){if(this.lRt--,this.lRt<0)throw new Error("released textures too many times");0===this.lRt&&(this.j_t?this.j_t.b4():this.pRt.YJ(this.$c.I$().T$()))}}w4(){if(this.EAt)throw new Error("not applicable to family");this.j_t?this.j_t.w4():this.pRt.XJ()}async H4(t){this.EAt||(this.j_t?await this.j_t.H4(t):await this.pRt.KJ(this.$c.I$().T$()))}aB(){return this.$c}qW(){return this.L_t}FRt(){return this.CAt}Pc(){return this.Yn}Hgt(){return this.oMt}xk(){return this.Aw}_1(){return this.zQ}v1(){return this.EAt}WQ(){return this._At}bW(){return this.QCt}kMt(){return this.WAt}MRt(){return this.YAt}TRt(){return this.OAt}DRt(t){return t&&this.tRt.has(t)}GRt(){return this.AAt.length}LRt(){return this.AAt.map(t=>t.RQ)}kRt(t){return this.AAt.findIndex(s=>s.RQ===t)}Qit(t){return this.AAt.findIndex(s=>s.name===t)}NRt(){return this.AAt.map(t=>t.name)}$Rt(){return this.AAt.map(t=>t.RAt)}iet(t){if((t=Math.floor(t))<0||t>=this.AAt.length)throw new RangeError("invalid instance variable index");return this.AAt[t].type}tet(t){if((t=Math.floor(t))<0||t>=this.AAt.length)throw new RangeError("invalid instance variable index");return this.AAt[t].name}IRt(){return this.FAt}BRt(){return this.KAt}Frt(t){return this.ZAt.get(t.toLowerCase())||null}net(t){const s=this.QAt.get(t.toLowerCase());return void 0===s?-1:s}Cj(){return this._0}_W(){return this.L_t._W()}WRt(){return this._0&&this._0.jRt()}Ryt(){return this.iRt}nj(){return this.iRt.nj()}Wz(){return this.gAt}K0(t){this.eRt=t}X0(){return this.eRt}Z0(t){this.nRt=t}VRt(){return this.nRt}HRt(){return this.hRt}URt(){return this.hRt.length}yj(){return this.jAt}nTt(t){return this.VAt.has(t)}xj(){return this.$At}Tj(t){return this.BAt.has(t)}jMt(t){return this.UAt[t]}LMt(t){return this.HAt[t]}Ubt(t){this.sRt.set(t.Xbt().toLowerCase(),t)}qbt(t){return!!this.iMt(t)}iMt(t){const s=this.sRt.get(t.toLowerCase());return s&&s.Cu()?s:null}qRt(){return this.hRt}zRt(t){if(!this.hRt)throw new Error("no animations");return this.oRt.get(t.toLowerCase())||null}JRt(t){if(!this.hRt)throw new Error("no animations");return this.aRt.get(t)||null}YRt(t){if(this.zRt(t))throw new Error(`animation name '${t}' already exists`);const s=OM.QPt.hAt(this.aB(),t);return this.hRt.push(s),this.oRt.set(s.Pc().toLowerCase(),s),this.aRt.set(s._1(),s),s}XRt(t){const s=this.zRt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.hRt.length)throw new Error("cannot remove last animation");const i=this.hRt.indexOf(s);this.hRt.splice(i,1),this.oRt.delete(s.Pc().toLowerCase()),this.aRt.delete(s._1()),s.qn()}KRt(){if(!this.hRt)throw new Error("no animations");return this.hRt[0]}ZRt(){return this.KRt().uAt(0)}QRt(){if(this.hRt){const t=this.ZRt().Wz();return[t.Vg(),t.Qg()]}return this.gAt?[this.gAt.Vg(),this.gAt.Qg()]:[100,100]}VW(){if(!this.L_t.SW())throw new Error("not a single-global plugin");return this.dQ[0]}ej(){return this.dQ}*JW(){yield*this.dQ}*ij(){yield*this.dQ,yield*this.$c.aIt(this)}oj(){return this.dQ.length}n1(t){this.dQ.push(t)}tOt(){this.cRt=!0}K4(){if(!this.cRt||this.EAt)return;const t=this.dQ;let s=0;for(let i=t.length;s<i;++s)t[s].sOt(s);const i=this.$c.iOt();for(const t of i)t.fH()===this&&t.sOt(s++);this.cRt=!1}eOt(t){const s=this.dQ;if(t<s.length)return s[t];t-=s.length;const i=this.$c.iOt();for(const s of i)if(s.fH()===this){if(0===t)return s;--t}return null}UTt(t){if(t&&t.xH()&&t.fH()!==this)for(const s of t.GH())if(s.fH()===this)return s;const s=this.nj().ej();return s.length?s[0]:null}sj(t){const s=this.nj().ej();return s.length>0?s[t.CH()%s.length]:null}*pIt(t,s){const i=this.nj().ej(),e=i.length,n=s.nj(),r=s.nj().ej(),h=r.length;let o=t.CH();!s.v1()&&n.Cpt()||(o=r.indexOf(t));const a=Math.ceil(e/h),l=e%h;let u=0,c=0;0===l||o<l?(u=o*a,c=a):(u=l*a+(o-l)*(a-1),c=a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}pGt(t){this.j_t?.pGt(t)}pbt(){if(!this.zAt||this.EAt)return;this.K4();const t=this.nj(),s=t.Dpt(),i=t.Cpt(),e=this.$c.Fgt(),n=e&&e.pN()&&e.pN().Hpt();for(const e of this.JAt.Gj()){if(e===this)continue;e.K4();const r=e.nj();if(r.Fpt(i),!i){const i=r.Dpt();OM.bh(i);for(const t of s)i.push(e.eOt(t.CH()));if(n){const s=t.Lpt(),i=r.Lpt();OM.bh(i);for(const t of s)i.push(e.eOt(t.CH()))}}}}SGt(t,s){for(const i of this.c4().Gj()){const e=i.nj();t?OM.Sh(e.Lpt(),s):OM.Sh(e.Dpt(),s)}}nOt(){return this.LAt}rOt(t){this.NAt=!!t}hOt(){if(this.NAt&&this.QCt){for(const t of this.dQ)t.D$().oOt();for(const t of this.$c.iOt())t.fH()===this&&t.D$().oOt();this.NAt=!1}}aOt(t,s,i){if(s){const i=this.uRt.get(s);i&&(i.delete(t),0===i.size&&this.uRt.delete(s))}if(i){let s=this.uRt.get(i);s||(s=new Set,this.uRt.set(i,s)),s.add(t)}}*lOt(){if(this.v1()){const t=new Set;for(const s of this.$At)for(const i of s.lOt())t.add(i);yield*t.values()}else for(const t of this.uRt.keys())t.zn()||(yield t)}aGt(){return this.Lxt||(this.Lxt=new Map),this.Lxt}lGt(){return this.kxt||(this.kxt=new Map),this.kxt}uOt(){return this.DRt(OM.yut.MPt)}cOt(){return this.DRt(OM.yut.xPt)}fOt(){return this.DRt(OM.yut.dOt)}i1(){return this.DRt(OM.yut.pOt)}e5(){const t={instances:this.dQ.map(t=>t.mx())};return this.Lxt&&this.Lxt.size&&(t.ex=OM.So(this.Lxt)),t}n5(t,s){this.Lxt&&(this.Lxt.clear(),this.Lxt=null);const i=t.ex;i&&(this.Lxt=OM.vo(i));const e=this.dQ,n=t.instances;for(let t=0,s=Math.min(e.length,n.length);t<s;++t)e[t].gx(n[t]);for(let t=n.length,s=e.length;t<s;++t)this.$c.wH(e[t]);for(let t=e.length,i=n.length;t<i;++t){const i=n[t];let e=null;if(this.bW()&&(e=this.$c.c$().s4(i.w.l),!e))continue;const r=this.$c.e1(this.eRt||this,e,!1,0,0,!0);r.gx(i),s&&s.add(r)}this.wRt=n,this.tOt()}mOt(){return this.wRt}gOt(){this.wRt=null}yOt(){for(let t=0,s=this.dQ;t<s;++t)this.dQ[t].yOt()}BW(){return this.pRt}nN(){return this.j0}wOt(){return this.mRt}aj(t){this.mRt=t}EZ(t){const s=this.$c,i=s.iU()&&!s.aN().dj();i&&FM.M6(),this.j0.dispatchEvent(t),i&&FM.x6()}}}{const $M=self.Cs;$M.SOt=class extends $M.Vn{constructor(t,s){super(),this.$c=t,this.vOt=s;for(const t of this.vOt)t.vRt(this)}qn(){this.$c=null}aB(){return this.$c}u4(){return this.vOt}Gj(){return this.vOt}Q4(){return this.vOt.some(t=>t.bW())}}}{const BM=self.Cs,WM=self.eU,jM=self.cH,VM=BM.mW,HM=[];let UM=0;const qM=new WeakMap,zM=new WeakMap,JM=1,YM=2,XM=4,KM=8,ZM=16,QM=32,tx=64;BM.Instance=class extends BM.Vn{constructor(t){if(BM.mW!==VM)throw new Error("invalid addon manager");super(),this.$c=t.runtime,this.bOt=t.objectType,this.Cit=null,this.MOt=null,this.xOt=null,this.GOt=0,this.TOt=t.uid,this.IOt=UM++,this.xGt=0,this.COt=null;const s=BM.Lh(t.tags);s.length>0&&(this.COt=new Set(s)),this._Ot=HM,this.EOt=HM;const i=this.bOt.BRt();i.length>0&&(this.EOt=i.map((t,s)=>BM.Un(BM.POt,{runtime:this.$c,uz:t,dz:this,index:s}))),this.AOt=this.bOt.xH()?[]:null,this.ROt=-1,this.DAt=null;const e=this.qW();if(e.bM()&&(this.xGt|=4),e.bW())if(this.Cit=BM.Un(BM.OOt,this,t.MU),t.FOt)this.Cit.DOt(t.FOt);else{this.Cit.LOt();const[t,s]=this.bOt.QRt();this.Cit.BP(t,s),this.fH().WRt()&&this.Cit.bU().kOt()}t.NOt?this.$Ot(t.NOt):this.BOt()}qn(){if(this.xOt&&(this.xOt.yH(),this.xOt=null),this.EOt.length>0){for(const t of this.EOt)t.qn();BM.bh(this.EOt)}this.MOt&&(this.MOt.qn(),this.MOt=null);const t=qM.get(this);t&&(t.clear(),qM.delete(this));const s=zM.get(this);s&&(s.clear(),zM.delete(this)),this.AOt&&BM.bh(this.AOt),this.DAt&&(this.DAt.qn(),this.DAt=null),this.COt&&this.COt.clear(),this.COt=null,this.$c=null,this.bOt=null,this._Ot.length>0&&BM.bh(this._Ot),this.Cit&&(this.Cit.qn(),this.Cit=null)}$Ot(t){t.length>0&&(this._Ot=[],BM.Th(this._Ot,t))}BOt(){const t=this.bOt.GRt();if(0===t)return;this._Ot=[];const s=[0,0,""];for(let i=0;i<t;++i)this._Ot.push(s[this.bOt.iet(i)])}PRt(t,s){if(this.MOt)throw new Error("already got sdk instance");for(let t=0,i=this.EOt.length;t<i;++t)this.EOt[t].PRt(s?s[t]:null);if(this.qW().iGt()<2){if(this.MOt=BM.Un(this.bOt.FRt(),this,t),!(this.MOt instanceof BM.B_t))throw new Error("sdk type must derive from SDKInstanceBase");!this.qW().bW()&&this.bOt.wOt()&&this.A$()}else{const s=this.qW().b_t();this.WOt(s.Instance,t)}}iz(){return this.MOt??this.xOt}D$(){return this.Cit}aB(){return this.$c}WN(){return this.ROt}PH(){const t=this.ROt;return-1===t?this.aB().WN():t}jN(t){((t=+t)<0||!isFinite(t))&&(t=0),this.ROt=t,this.fH().WRt()&&this.$c.jOt(this,!0)}RH(){this.ROt=-1,this.fH().WRt()&&this.$c.jOt(this,!1)}U3(){return this.$c.VOt(this)}Sf(){return this.DAt||(this.DAt=BM.Un(BM.Event.Sf)),this.DAt}Zx(t){this.MOt?this.MOt.Zx(t):this.xOt.iY(this.$c.I$().T$())}v_t(t){this.MOt.v_t(t)}HOt(){this.xGt|=2}UOt(){return!!(2&this.xGt)}qOt(){this.xGt|=1}SY(){return!!(1&this.xGt)}bM(){return!!(4&this.xGt)||(this.MOt?this.MOt.bM():this.xOt.eM())}zOt(){this.xGt|=32}F3(){return!!(32&this.xGt)}JOt(){return!!(8&this.xGt)}YOt(t){t?this.xGt|=8:this.xGt&=-9}XOt(){return!!(16&this.xGt)}KOt(t){t?this.xGt|=16:this.xGt&=-17}ZOt(){return!!(64&this.xGt)}QOt(t){t?this.xGt|=64:this.xGt&=-65}tFt(t,s){t<<=16,s?this.xGt|=t:this.xGt&=~t}sFt(t){return!!(this.xGt&t<<16)}MEt(){return this.MOt?this.MOt.MEt():null}xEt(){return this.MOt?this.MOt.xEt():null}GEt(){return this.MOt?this.MOt.GEt():null}TEt(){return this.MOt?this.MOt.TEt():null}CEt(){return!!this.MOt&&this.MOt.CEt()}pTt(t){return this.MOt?this.MOt.pTt(t):[this.xOt.x,this.xOt.y,this.xOt.DU]}fH(){return this.bOt}R3(){return this.MOt?this.MOt.R3():this.xOt.eY()}lIt(t){return t.v1()?t.Tj(this.fH()):this.fH()===t}iFt(t,s,i){const e=(s,i)=>{const e=i||s.fH(),n=t.get(e);n?n.add(s):t.set(e,new Set([s]))};if(e(this,s),this.xH())for(const t of this.GH())e(t);if(i)for(const t of this.pq())e(t)}eFt(){if(!this.qW().RW())throw new Error("object does not support scene graph")}Sq(){return null!==this.rq()}rq(){const t=this.D$();if(!t)return null;const s=t.rq();return s?s.EJ():null}oq(){const t=this.D$();if(!t)return null;const s=t.oq();return s?s.EJ():null}*aq(){const t=this.D$();if(t)for(const s of t.aq())yield s.EJ()}nFt(t){if(!t)return!1;for(const s of this.children())if(s===t)return!0;return!1}o5(){const t=this.D$();return!!t&&t.o5()}rFt(t){const s=this.D$();if(!s)return[];const i=t.Pc();return s.o6().map(t=>t.EJ()).filter(t=>t.fH().Pc()===i)}o6(){const t=this.D$();return t?t.o6().map(t=>t.EJ()):[]}*children(){const t=this.D$();if(t)for(const s of t.children())yield s.EJ()}*pq(){const t=this.D$();if(t)for(const s of t.pq())yield s.EJ()}uq(){const t=this.D$();return t?t.uq():0}hFt(){return[...this.aq()].length}dIt(){const t=this.D$();return t?t.dIt():0}fq(t){const s=this.D$();if(!s)return null;const i=s.fq(t);return i?i.EJ():null}oFt(){const t=this.D$();if(!t)return NaN;const s=t.rq();return s?s.aFt(t):NaN}lFt(t){for(const s of this.D$().o6())if(s.EJ().TH()===t)return!0;return!1}gq(t,s){this.eFt(),t.eFt(),this.D$().gq(t.D$(),s||{})}yq(t){const s=this.D$();s&&s.yq(t.D$())}Nq(){const t=this.D$();return!!t&&t.Nq()}B4(){const t=this.D$();if(!t)return;const s=t.uFt();if(s)for(const t of s){const s=this.$c.P$(t[2]);if(s){const i=t[3];this.gq(s,{bq:!!(1&i),xq:!!(i>>1&1),Tq:!!(i>>2&1),Cq:!!(i>>3&1),Eq:!!(i>>4&1),kq:!!(i>>5&1),Aq:!!(i>>6&1),Oq:!!(i>>7&1),Dq:!!(i>>8&1)})}}}W4(t,s){const i=t.get(this);if(i)for(const t of i.sceneGraphJson.children){const i=s.get(t.index);if(!i)continue;const e=t.flags;this.gq(i,{bq:!!(1&e),xq:!!(e>>1&1),Tq:!!(e>>2&1),Cq:!!(e>>3&1),Eq:!!(e>>4&1),kq:!!(e>>5&1),Aq:!!(e>>6&1),Oq:!!(e>>7&1),Dq:!!(e>>8&1)})}}EH(){const t=this.$c.cFt();return t?t.bct(this):""}xH(){return null!==this.AOt}fFt(){BM.bh(this.AOt)}X4(t){this.AOt.push(t)}bH(){return this.AOt}dFt(t){return!!this.pFt(t)}pFt(t){const s=this.GH();if(null===s||0===s.length)return!1;for(const i of s)if(i.fH()===t)return i;return null}GH(){return this.AOt}SSt(){for(const t of this.GH())t.fH().nj().kpt(t)}mGt(){for(const t of this.GH())t.fH().nj().Rpt(t)}gGt(t){for(const s of this.GH())s.fH().nj().Dpt()[t]=s}wGt(){for(const t of this.GH())t.fH().nj().Opt(t)}yGt(t){for(const s of this.GH())s.fH().nj().Lpt()[t]=s}qW(){return this.bOt.qW()}sOt(t){this.GOt=t}CH(){return this.bOt.K4(),this.GOt}TH(){return this.TOt}mFt(t){this.TOt=t}gFt(){return this.IOt}yFt(t){t?this.LH(new Set(t)):this.COt=null}LH(t){if(0===t.size)this.COt=null;else{this.COt?this.COt.clear():this.COt=new Set;for(const s of t)this.COt.add(s)}}FH(){return this.COt??new Set}NIt(){return Array.from(this.FH()).join(" ")}WIt(t){t=Math.floor(t);for(const s of this.FH()){if(0===t)return s;--t}return""}Ort(){return this.EOt}wFt(t){if(!t)return null;for(const s of this.EOt)if(s.lz()instanceof t)return s;return null}SFt(t){if(!t)return null;const s=this.wFt(t);return s?s.iz():null}Rrt(t){const s=this.EOt;for(let i=0,e=s.length;i<e;++i)if(s[i].fz()._1()===t)return i;return-1}vFt(){return this._Ot}NRt(){return this.bOt.NRt()}bFt(){return this._Ot.length}uot(t){t|=0;const s=this._Ot;if(t<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}FMt(t){return this._Ot[t]}MFt(t){const s=this._Ot[t];return 0===this.bOt.iet(t)?!!s:s}cot(t,s){t|=0;const i=this._Ot;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");switch(this.bOt.iet(t)){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}sat(t,s){if(0===s)return;t|=0;const i=this._Ot;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}aGt(){let t=qM.get(this);return t||(t=new Map,qM.set(this,t),t)}lGt(){let t=zM.get(this);return t||(t=new Map,zM.set(this,t),t)}xFt(t){const s=this.fH();if(s.nN().Gf(t))return!0;for(const i of s.yj())if(i.nN().Gf(t))return!0;return!!this.$c.nN().Gf(t)}fj(t=void 0){const s=t??new Set;if(s.has(this))return;s.add(this);const i=this.D$();if(i&&i.o5())for(const t of this.pq())if(s.add(t),t.xH())for(const i of t.GH())s.add(i);if(this.xH())for(const t of this.GH())t.fj(s);if(!t){for(const t of s.values())t.j4();this.V4()}}GFt(){this.bOt.wOt()&&this.A$();for(const t of this.EOt)t.oPt()}TFt(){this.GFt()}j4(){if(this.GFt(),this.xFt("instancecreate")){const t=this.fH(),s=new BM.Event("instancecreate");s.dz=this.A$(),t.EZ(s);for(const i of t.yj())i.EZ(s);this.$c.EZ(s)}this.$c.JH(this.qW().rwt().Q$.HIt,this,null)}V4(){if(this.qW().RW()){if(this.EZ(new BM.Event("hierarchyready")),this.xFt("hierarchyready")){const t=this.fH(),s=new BM.Event("hierarchyready");s.dz=this.A$(),t.EZ(s);for(const i of t.yj())i.EZ(s);this.$c.EZ(s)}this.$c.JH(this.qW().rwt().Q$.hIt,this,null)}}IFt(){this.$c.JH(this.qW().rwt().Q$.UIt,this,null)}CFt(t){if(this.xOt){const s=new BM.Event("destroy");s._Ft=t,this.EZ(s)}if(!this.xFt("instancedestroy"))return;const s=this.fH(),i=new BM.Event("instancedestroy");i.dz=this.A$(),i._Ft=t,s.EZ(i);for(const t of s.yj())t.EZ(i);this.$c.EZ(i)}EFt(){return this.MOt?this.MOt.lEt():this.xOt.lU()}mx(t="full",s=null){const i={};"full"===t?i.uid=this.TH():i.c3=!0;const e=this.FH();if(e.size>0&&(i.tags=Array.from(e)),"visual-state"!==t){const s=qM.get(this);if(s&&s.size&&(i.ex=BM.So(s)),-1!==this.WN()&&(i.mts=this.WN()),this.bOt.GRt()>0){const t={},s=this.bOt.LRt();for(let i=0,e=this._Ot.length;i<e;++i)t[s[i].toString()]=this._Ot[i];i.ivs=t}if(this.EOt.length){const s={};for(const i of this.EOt){const e=i.mx(t);e&&(s[i.fz()._1().toString()]=e)}i.behs=s}}this.Cit&&(i.w=this.Cit.e5(t,s));const n=this.MOt?this.MOt.mx():this.xOt.uU();return n&&(i.data=n),i}c8(t="full",s=null){this.Cit&&this.Cit.c8(t)}d8(t,s="full",i=null){this.Cit&&this.Cit.d8(t,s,i)}PFt(t,s="full",i=null){this.Cit&&this.Cit.PFt(t,s,i)}yOt(){this.qW().bW()&&this.Cit.yOt()}gx(t,s="full",i=null){if("full"===s)this.TOt=t.uid;else if(!t.c3)return;if(this.yFt(t.tags),"visual-state"!==s){let s=qM.get(this);s&&(s.clear(),qM.delete(this));const i=t.ex;i&&(s=BM.vo(i),qM.set(this,s)),this.ROt=t.hasOwnProperty("mts")?t.mts:-1;const e=t.ivs;if(e)for(const[t,s]of Object.entries(e)){const i=parseInt(t,10),e=this.bOt.kRt(i);if(e<0||e>=this._Ot.length)continue;let n=s;null===n&&(n=NaN),this._Ot[e]=n}}if(this.qW().bW()){const e=t.w;if(e){const t=e.l;if(this.Cit.L$()._1()!==t){const i=this.Cit.L$(),e=i.m$().s4(t);e?(this.Cit.B$(e),i.a1(this,!0),e.n1(this,!0),e.W$(this),this.Cit.xU()):"full"===s&&this.$c.wH(this)}this.Cit.n5(e,s,i)}}if("visual-state"!==s){const i=t.behs;if(i)for(const[t,e]of Object.entries(i)){const i=parseInt(t,10),n=this.Rrt(i);n<0||n>=this.EOt.length||this.EOt[n].gx(e,s)}}const e=t.data;e&&(this.MOt?this.MOt.gx(e,s):this.xOt.cU(e))}AFt(t){if(this.Cit.L$()._1()===t)return;const s=this.Cit.L$(),i=s.m$().s4(t);i&&(this.Cit.B$(i),s.a1(this,!0),i.n1(this,!0),i.W$(this),this.Cit.xU())}A$(){return this.xOt||this.WOt()}dEt(){return!!this.xOt}WOt(t,s){const i=this.Cit?t?self.ZJ:self.Kq:t?self.BH:self.cH,e=t||this.MOt.b_t(),n=this.bOt.wOt(),r=n||e||i,h=this.qW().iGt();if(BM.mW.G_t(this,h),BM.mW.TPt(s),this.xOt=new r,BM.mW.IPt(),BM.mW.T_t(h),e&&!(this.xOt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(n){const t=e||i;if(!(this.xOt instanceof t))throw new TypeError(`setInstanceClass(): class '${n.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.xOt}dH(t){if(0===this._Ot.length)return;const s={},i=this.bOt.$Rt();for(let t=0,e=i.length;t<e;++t)s[i[t]]={configurable:!1,enumerable:!0,get:BM.Instance.prototype.MFt.bind(this,t),set:BM.Instance.prototype.cot.bind(this,t)};const e=Object.create(Object.prototype,s);t.RFt={value:e,writable:!1}}pH(t){const s=this.EOt;if(0===s.length)return;const i={};for(const t of s)i[t.fz().Hgt()]={value:t.U_t(),writable:!1};const e=Object.create(Object.prototype,i);t.rSt={value:e,writable:!1}}EZ(t){if(!this.dEt())return;const s=this.A$();t.dz=s;const i=this.$c,e=i.iU()&&!i.aN().dj();e&&WM.M6(),s.dispatchEvent(t),e&&WM.x6()}}}{const sx=self.Cs,ix=new Map;sx.l6=class extends sx.Vn{constructor(t){super(),this.xx=t,this.TSt=null,this.OFt=[],this.FFt=t.Vg(),this.DFt=t.Qg(),this.LFt=1,this.kFt=1,this.NFt=0,this.$Ft=1,this.BFt=t.SO(),this.WFt=null,this.jFt=null,this.VFt=NaN,this.HFt=!1,this.u5=NaN,this.c5=NaN,this.UFt=s=>{if(s.dz!==this.TSt.EJ())return;t.aB().Sf().removeEventListener("instancecreate",this.UFt);const i=this.TSt.EJ().iz();this.HFt=!!i.wet(),this.u5=this.HFt?i.yet():NaN,this.c5=this.HFt?i.bet():NaN}}qn(){this.TSt=null,this.WFt=null,this.jFt=null,this.VFt=NaN,this.HFt=!1,this.u5=NaN,this.c5=NaN,sx.bh(this.OFt)}qFt(t){if(this.$Ft=this.xx.SO(),this.BFt=this.$Ft,this.TSt=t,this.NFt=t?t.Fj():0,this.TSt){const t=this.xx.aB();if(this.TSt.EJ().qW().iGt()<2){const s=this.TSt.EJ().iz();s?(this.HFt=!!s.wet(),this.u5=this.HFt?s.yet():NaN,this.c5=this.HFt?s.bet():NaN):this.TSt.EJ().SY()||t.Sf().addEventListener("instancecreate",this.UFt)}else this.HFt=!1,this.u5=NaN,this.c5=NaN}else this.HFt=!1,this.u5=NaN,this.c5=NaN}rq(){return this.TSt}o5(){return this.OFt.length>0}o6(){return this.OFt}zFt(){this.o5()&&1!==this.OFt.length&&(this.jFt?this.OFt.sort((t,s)=>{const i=this.jFt.get(t.EJ()),e=this.jFt.get(s.EJ());return sx.te(i)&&sx.te(e)?i-e:0}):this.OFt.sort((t,s)=>{const i=t.Hrt().JFt(),e=s.Hrt().JFt();return sx.te(i)&&sx.te(e)?i-e:0}))}JFt(){return this.VFt}YFt(){return this.LFt}XFt(t){this.LFt=t}KFt(){return this.kFt}ZFt(t){this.kFt=t}Pot(){return this.BFt}LTt(){return this.$Ft}QFt(t){this.$Ft=t}Vrt(){return 0===this.FFt?Number.EPSILON:this.FFt}Jrt(){return 0===this.DFt?Number.EPSILON:this.DFt}tDt(){if(this.xx.Iq()){const t=this.TSt;let s=t.Vg(),i=t.Hrt().Vrt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.HFt?1+s/this.u5:s/i}return 1}sDt(){if(this.xx._q()){const t=this.TSt;let s=t.Qg(),i=t.Hrt().Jrt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.HFt?1+s/this.c5:s/i}return 1}iDt(){return 0}eDt(){return{sw:this.FFt,sh:this.DFt,sx:this.LFt,sy:this.kFt,psa:this.NFt,oo:this.$Ft,so:this.BFt,pi:this.xx.EJ().oFt()}}e5(t,s=null){const i=this.eDt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.nDt(t),c:this.rDt(t)})}hDt(t){let s="";return t.Mq()&&(s+="x"),t.Gq()&&(s+="y"),t.Iq()&&(s+="w"),t._q()&&(s+="h"),t.Pq()&&(s+="a"),t.Rq()&&(s+="z"),t.Nq()&&(s+="d"),t.Fq()&&(s+="o"),t.Lq()&&(s+="v"),s}nDt(t){return this.TSt?!this.TSt.EJ()||this.TSt.EJ().SY()?null:this.oDt(this.TSt,this.xx,t):null}rDt(t){return this.OFt.map(s=>this.oDt(s,s,t)).filter(t=>t)}oDt(t,s,i){const e=t.EJ();if(e&&e.SY())return null;const n={};return n.uid=e.TH(),n.f=this.hDt(s),n.offsets=s.aDt(),n.data=sx.l6.lDt(e),n.oci=e.fH().xk(),"state"===i?(n.inst=e.mx("full",{selfOnly:!0}),n.instIndex=NaN):(n.instIndex=e.fH().ej().indexOf(e),n.inst=null),n}n5(t){this.FFt=t.sw,this.DFt=t.sh,this.LFt=t.sx,this.kFt=t.sy,this.NFt=t.psa,this.$Ft=t.oo,this.BFt=t.so,this.VFt=sx.te(t.pi)?t.pi:NaN}uDt(t,s,i,e){if(!t&&!s)if(e?.tCt){if(this.WFt)for(const t of this.WFt)t.SY()||t.Sq()||t.aB().wH(t)}else if(this.WFt)for(const t of this.WFt)if(i.c&&i.c.length){if(!i.c.some(s=>s.uid===t.TH()))continue;t.SY()||t.Sq()||t.aB().wH(t)}this.WFt=t,this.jFt=s}cDt(t){const s=this.xx.aB();return ix.has(t)?ix.get(t):s.P$(t)}d8(t,s){const i=this.xx,e=i.aB(),n=s?.fDt??new Set;if(t.p&&!this.TSt){const r=t.p.uid,h=this.cDt(r);if(h){const r=h.D$();h.nFt(i.EJ())?this.TSt=r:(h.lFt(i.EJ().TH())?(e.wH(i.EJ()),e.dDt(i.EJ().TH()),ix.delete(i.EJ().TH())):h.gq(i.EJ(),this.pDt(t.p.f)),n.has(i)||(i.mDt(t.p.offsets),this.gDt(h,t.p,s),this.yDt(h,h.TH(),i.aB(),s)),n.add(i),h.D$().Hrt().zFt())}else if(sx.te(t.p.oci)){const n=e.lj(e.J0(t.p.oci),i.L$(),0,0,!0);if(n){const r=this.wDt(t.p,e);r&&n.gx(r);const h=n.D$(),o=!!s?.tCt;h.L$().uj(n,!1,o),n.gq(i.EJ(),this.pDt(t.p.f)),ix.set(n.TH(),n),this.yDt(n,n.TH(),e,s),n.D$().Hrt().zFt()}}}const r=[];for(const s of t.c){const t=s.uid,i=this.cDt(t);i&&r.push(i)}let h=0;for(const o of t.c){const a=o.uid,l=this.cDt(a);if(l){if(this.WFt){if(this.WFt.includes(l)){const e=l;if(e.fH()!==l.fH()){h++;continue}if(e.SY()){h++;continue}const o=t.c[h];if(!s?.tCt&&this.SDt(e,r,i)){if(i.EJ().fq(h)){const r=e.fH().xk(),a=o.oci,l=i.EJ().fq(h).fH().xk();if(r!==a||a!==l){this.vDt(t.c,i,n,s);break}this.bDt(h,o,i,n,s)}else this.bDt(h,o,i,n,s);h++;continue}if(e.Sq()&&e.rq()!==i.EJ()){const t=this.MDt(o,s);this.xDt(t,o,n,s),h++;continue}this.xDt(e.D$(),o,n,s,!0),h++;continue}if(this.WFt[h]){const e=this.WFt[h];if(e.fH()!==l.fH()){h++;continue}if(e.SY()){h++;continue}const o=t.c[h];if(!s?.tCt&&this.SDt(e,r,i)){if(i.EJ().fq(h)){const r=e.fH().xk(),a=o.oci,l=i.EJ().fq(h).fH().xk();if(r!==a||a!==l){this.vDt(t.c,i,n,s);break}this.bDt(h,o,i,n,s)}else this.bDt(h,o,i,n,s);h++;continue}if(e.Sq()&&e.rq()!==i.EJ()){const t=this.MDt(o,s);this.xDt(t,o,n,s),h++;continue}this.xDt(e.D$(),o,n,s,!0),h++;continue}}const e=l.fH();if(this.GDt(r,e)===i.EJ().rFt(e).length){for(const t of i.EJ().o6()){if(t.fH()!==e)continue;const i=t.D$();if(i&&!n.has(i)){n.add(i),i.mDt(o.offsets),this.gDt(t,o,s);break}}h++;continue}if(l.Sq()&&l.rq()!==i.EJ()){const t=this.MDt(o,s);this.xDt(t,o,n,s),h++;continue}this.xDt(l.D$(),o,n,s)}else if(this.WFt&&this.WFt[h]){const a=this.WFt[h],l=e.J0(this.TDt(o));if(a.fH()!==l){h++;continue}if(a.SY()){h++;continue}const u=t.c[h];if(!s?.tCt&&this.SDt(a,r,i)){if(i.EJ().fq(h)){const e=a.fH().xk(),r=u.oci,o=i.EJ().fq(h).fH().xk();if(e!==r||r!==o){this.vDt(t.c,i,n,s);break}this.bDt(h,u,i,n,s)}else this.bDt(h,u,i,n,s);h++;continue}if(a.Sq()&&a.rq()!==i.EJ()){const t=this.MDt(u,s);this.xDt(t,u,n,s),h++;continue}this.xDt(a.D$(),u,n,s)}else{const t=this.MDt(o,s);this.xDt(t,o,n,s)}h++}}vDt(t,s,i,e){const n=s.aB();for(const t of s.EJ().children())t&&!t.SY()&&(n.wH(t),n.dDt(t.TH()),ix.delete(t.TH()));this.WFt&&(this.WFt=[]),this.jFt&&(this.jFt=new WeakMap),Object.assign({},e,{assignZIndex:!1});for(const s of t){const t=this.MDt(s,e);this.xDt(t,s,i,e),this.WFt.push(t.EJ()),this.jFt.set(t.EJ(),this.WFt.length-1)}s.Hrt().zFt()}SDt(t,s,i){const e=t.fH();return this.GDt(s,e)===i.EJ().rFt(e).length}bDt(t,s,i,e,n){const r=i.EJ().fq(t);if(!r)return;const h=r.D$();h&&(e.has(h)||(h.mDt(s.offsets),this.gDt(r,s,n)),e.add(h))}pDt(t){const s={};return s.bq=t.includes("x"),s.xq=t.includes("y"),s.Tq=t.includes("w"),s.Cq=t.includes("h"),s.Eq=t.includes("a"),s.Aq=t.includes("z"),s.kq=t.includes("d"),s.Oq=t.includes("o"),s.Dq=t.includes("v"),s}TDt(t){return sx.te(t.oci)?t.oci:t[1]}MDt(t,s){if(!sx.te(t.oci))return;const i=this.xx,e=i.aB();let n;const r=!s.hasOwnProperty("createHierarchy")||s.createHierarchy;if(n=t.data?e.e1(t.data,i.L$(),!1,0,0,!1,r):e.lj(e.J0(t.oci),i.L$(),0,0,r),!n)return;const h=this.wDt(t,e);h&&n.gx(h);const o=n.D$(),a=!!s?.tCt;return o.L$().uj(n,!0,a),o}yDt(t,s,i,e){if(this.cDt(s)&&!e?.tCt){const e=this.cDt(s);e!==t&&i.wH(e)}i.dDt(s),i.ARt(s,t)}xDt(t,s,i,e,n=!0){const r=this.xx,h=r.gq(t,this.pDt(s.f));h&&n?(i.has(t)||(t.mDt(s.offsets),this.gDt(t.EJ(),s,e)),i.add(t)):h&&(ix.set(t.EJ().TH(),t.EJ()),this.yDt(t.EJ(),s.uid,r.aB(),e)),this.zFt()}gDt(t,s,i){let e=this.wDt(s,this.xx.aB());if(!e)return;const n=!i.hasOwnProperty("clearChildren")||i.clearChildren,r=!i.hasOwnProperty("assignZIndex")||i.assignZIndex,h=t.aB();if(ix.set(t.TH(),t),e=JSON.parse(JSON.stringify(e)),n&&t.TH()!==e.uid){for(const s of t.children())s&&!s.SY()&&(h.wH(s),h.dDt(s.TH()),ix.delete(s.TH()));if(e.w?.sgi&&e.w.sgi.c?.length)for(const s of e.w.sgi.c){const e=Object.assign({},i,{clearChildren:!1,createHierarchy:!1}),n=this.MDt(s,e);ix.set(n.EJ().TH(),n.EJ()),t.gq(n.EJ(),this.pDt(s.f)),n.mDt(s.offsets),this.gDt(n.EJ(),s,e)}}const o=e.w?.zi,a=e.w?.l;e.w=null,t.gx(e),i?.tCt||(sx.te(o)&&r&&t.D$().d1(o),sx.te(a)&&t.AFt(a)),this.yDt(t,e.uid,h,i)}GDt(t,s){return t.filter(t=>t.fH().Pc()===s.Pc()).length}wDt(t,s){if(sx.te(t.instIndex)){const i=s.J0(t.oci).mOt();return i?i[t.instIndex]:null}return sx.le(t.inst)?JSON.parse(t.inst):t.inst?t.inst:void 0}static lDt(t){let s=t.D$().L$().Q0(t.TH());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const s of[...t.o6()]){const t=s.D$();i.push([t.m$()._1(),t.L$().xk(),s.TH(),sx.l6.a6(t),s.fH().xH()?1:0,t.k$(),sx.l6.lDt(s)])}return sx.Ge(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=sx.l6.IDt(),s[0][14][1]=i,s[0][14][2]=t.D$().k$()),s}static a6(t){let s=0;return s|=Number(t.Lq())<<8,s|=Number(t.Fq())<<7,s|=Number(t.Rq())<<6,s|=Number(t.Nq())<<5,s|=Number(t.Pq())<<4,s|=Number(t._q())<<3,s|=Number(t.Iq())<<2,s|=Number(t.Gq())<<1,s|=0|Number(t.Mq()),s}static IDt(t){let s=0;return s|=256,s|=128,s|=64,s|=32,s|=16,s|=8,s|=4,s|=2,s|=1,511}static CDt(){ix.clear()}}}{const ex=self.Cs,nx=self.ls,rx=nx.ws,hx=nx.Ss,ox=ex.Un(ex.Rect),ax=ex.Un(ex.El),lx=ex.Un(ex.Event,"bboxchange",!1),ux=ex.Un(ex.Go,0,0,0,0),cx=ex.Un(ex.lu),fx=ex.Un(ex.Go,1,1,1,1),dx=ex.Un(ex.Rect,0,0,-1,-1),px=ex.Un(ex.Rect,0,0,-1,-1),mx=new Set(["absolute","relative"]),gx=[];let yx=!0;const wx=1,Sx=2,vx=4,bx=8,Mx=16,xx=32,Gx=64,Tx=128,Ix=256,Cx=512,_x=1024,Ex=2048,Px=4096,Ax=8192,Rx=16384,Ox=32768,Fx=1<<22,Dx=1<<23,Lx=12647936,kx=65536,Nx=1<<17,$x=1<<18,Bx=1<<19,Wx=1<<20,jx=1<<21,Vx=1<<24,Hx=26,Ux=31<<26,qx=new WeakMap,zx=new WeakMap;ex.OOt=class extends ex.Vn{constructor(t,s){super(),this.di=t,this.mpt=t.fH(),this.$c=t.aB(),this._Dt=s,this.mpt.aOt(this,null,s),this.EDt=-1,this.PDt=-1,this.xGt=196635,this.mpt.qW().TW()&&(this.xGt|=128),this.Pa=NaN,this.Aa=NaN,this.FM=NaN,this.ADt=NaN,this.RDt=NaN,this.hT=NaN,this._o=NaN,this.ODt=NaN,this.FDt=NaN,this.DDt=NaN,this.LDt=NaN,this.kDt=ex.Un(ex.Rect),this.NDt=ex.Un(ex.El),this.$Dt=px,this.BDt=dx,this.WDt=null,this.jDt=null,this.VDt=null,this.OM=fx,this.HDt=fx,this.UDt=null,this.qDt=null,this.di.fH().WRt()&&(this.qDt=ex.Un(ex.zDt,this.di,this)),this.JDt=null,this.WFt=null,this.jFt=null,this.YDt=-1,this.XDt=null}qOt(){this.xGt|=256}qn(){if(this.mpt.aOt(this,this._Dt,null),this.UDt&&(this.$c.gM().Pv(this.UDt),this.UDt=null),this.WDt=null,this.jDt&&(this.jDt.KDt.qn(),this.jDt=null),this.VDt&&(this.VDt.clear(),this.VDt=null),this.jq(),this.qDt&&this.qDt.qn(),this.Sq()&&this.rq().yq(this),this.o5()){const t=[...this.o6()];for(const s of t)this.yq(s)}this.ZDt(),this.QDt(),qx.delete(this),zx.delete(this),this.di=null,this.mpt=null,this.$c=null,this._Dt=null}DOt(t){if(yx=!1,this.GU(t[0],t[1]),this.sx(t[2]),this.BP(t[3],t[4]),this.hT=0,this.TW()?this.Oj(t[6]):this._o=0,ux.Sa(t[7]),this.tLt(ux),this.EU(t[8]),this.RU(t[9]),this.NM(t[10]),this.qDt&&this.qDt.sLt(t[12]),t[14]&&qx.set(this,{iLt:t[14][1],eLt:t[14][2]}),t[15]){const s=t[15];this.Bq(s[0],s[1]);const i=this.zq(),e=s[2];for(let t=0,s=e.length;t<s;++t){const s=e[t];for(let e=0,n=s.length;e<n;++e){const n=s[e],r=i.Ux(e,t);r.XM(n[0]),r.QM(n[1]),r.sx(n[2]),r.nx(n[3]),r.ox(n[4])}}}if(t[16]){const s=t[16][0],i=t[16][1],e=!!i,n=!e,r=this.$c.cFt();e&&r&&r.vct(this.EJ(),i),n&&r&&r.vct(this.EJ(),s)}yx=!0,this.nLt()}LOt(){this.Pa=0,this.Aa=0,this.FM=0,this.ADt=0,this.RDt=0,this.hT=0,this._o=0,this.ODt=0,this.FDt=1,this.DDt=0,this.LDt=0,this.nLt()}aB(){return this.$c}fH(){return this.mpt}EJ(){return this.di}rLt(){return this.Pq()?this.hLt(this.rq().oLt()-this.JDt.iDt()):0}XM(t){if(t=+t,this.Mq()){const s=this.JDt,i=t-this.YM(),e=-this.rLt();0===e?this.Pa+=i/s.tDt():(this.Pa+=Math.cos(e)*i/s.tDt(),this.Gq()&&(this.Aa+=Math.sin(e)*i/s.sDt()))}else this.Pa=t}got(t,s=!1){t=+t,s?this.Pa+=t:this.Mq()?this.XM(this.YM()+t):this.Pa+=t}YM(){if(this.Mq()){let t=this.Pa;const s=this.JDt,i=this.rq(),e=this.rLt();return 0===e?t*=s.tDt():(t=t*s.tDt()*Math.cos(e),this.Gq()&&(t-=this.Aa*s.sDt()*Math.sin(e))),i.YM()+t}return this.Pa}QM(t){if(t=+t,this.Gq()){const s=this.JDt,i=t-this.ZM(),e=-this.rLt();0===e?this.Aa+=i/s.sDt():(this.Mq()&&(this.Pa-=Math.sin(e)*i/s.tDt()),this.Aa+=Math.cos(e)*i/s.sDt())}else this.Aa=t}yot(t,s=!1){t=+t,s?this.Aa+=t:this.Gq()?this.QM(this.ZM()+t):this.Aa+=t}ZM(){if(this.Gq()){let t=this.Aa;const s=this.JDt,i=this.rq(),e=this.rLt();return 0===e?t*=s.sDt():(t=t*s.sDt()*Math.cos(e),this.Mq()&&(t+=this.Pa*s.tDt()*Math.sin(e))),i.ZM()+t}return this.Aa}GU(t,s){if(t=+t,s=+s,this.aLt()){const i=this.Mq(),e=this.Gq(),n=this.JDt,r=t-this.YM(),h=s-this.ZM(),o=-this.rLt();if(0===o)i?this.Pa+=r/n.tDt():this.Pa=t,e?this.Aa+=h/n.sDt():this.Aa=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.Pa+=e?(l*r-a*h)/n.tDt():l*r/n.tDt():this.Pa=t,e?this.Aa+=i?(a*r+l*h)/n.sDt():l*h/n.sDt():this.Aa=s}}else this.Pa=t,this.Aa=s}lLt(){return[this.YM(),this.ZM()]}IU(t,s){t=+t,s=+s,this.aLt()?this.GU(this.YM()+t,this.ZM()+s):(this.Pa+=t,this.Aa+=s)}fTt(t,s){return this.YM()===t&&this.ZM()===s}sx(t){if(t=+t,this.Rq()&&(t-=this.rq().tx()),this.FM===t)return;this.FM=t,this.uLt();const s=this.L$();0!==this.FM&&s.c1(),s.W$(this)}uLt(){if(this.nLt(),this.o5()){const t=this.o6();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.Rq()&&i.uLt()}}}Oot(t){this.sx(this.tx()+t)}tx(){return this.Rq()?this.rq().tx()+this.FM:this.FM}LU(){return this.L$().tx()+this.tx()}wet(){return this.EJ().qW().iGt()<2&&this.EJ().iz().wet()}Xg(t){if(t=+t,this.Iq()){const s=this.Vg();0===s?this.ADt=Number.EPSILON:this.ADt*=t/s}else this.ADt=t;this.cLt()}Iy(t,s){t=+t,s?this.ADt+=t:this.Iq()?this.Xg(this.Vg()+t):this.ADt+=t,this.cLt()}Vg(){if(this.Iq()){const t=this.rq(),s=t.Vg();return t.Hrt().Vrt()===Number.EPSILON?(this.Hrt().Vrt()+s)*this.ADt:s*this.ADt}return this.ADt}Hg(t){if(t=+t,this._q()){const s=this.Qg();0===s?this.RDt=Number.EPSILON:this.RDt*=t/s}else this.RDt=t;this.cLt()}xot(t,s){t=+t,s?this.RDt+=t:this._q()?this.Hg(this.Qg()+t):this.RDt+=t,this.cLt()}Qg(){if(this._q()){const t=this.rq(),s=t.Qg();return t.Hrt().Jrt()===Number.EPSILON?(this.Hrt().Jrt()+s)*this.RDt:s*this.RDt}return this.RDt}BP(t,s){if(t=+t,s=+s,this.Iq()){const s=this.Vg();0===s?this.ADt=Number.EPSILON:this.ADt*=t/s}else this.ADt=t;if(this._q()){const t=this.Qg();0===t?this.RDt=Number.EPSILON:this.RDt*=s/t}else this.RDt=s;this.cLt()}Fu(){return[this.Vg(),this.Qg()]}O3(){return this.hT}fLt(t){if(t<0)throw new RangeError("invalid depth");this.hT=t}dLt(){if(this.Sq()){const t=this.JDt;return Math.min(t.tDt(),t.sDt())}return 1}TW(){return!!(128&this.xGt)}Oj(t){t=+t,this.TW()&&(this.Pq()&&(t-=this.rq().Fj()),t=ex.Zn(t),this._o!==t&&(this._o=t,this.cLt()))}Got(t){0!==(t=+t)&&this.TW()&&(this._o=ex.Zn(this._o+t),this.cLt())}cLt(){if(this.xGt|=262144,this.o5()){const t=this.o6();for(let s=0,i=t.length;s<i;s++)t[s].cLt()}}Fj(){return this.Pq()&&this.TW()?this.hLt(ex.Zn(this.rq().oLt()+this._o)):this._o}oLt(){return this.Pq()&&this.TW()?ex.Zn(this.rq().oLt()+this._o):this._o}hLt(t){return this.Iq()&&this.oq().Vg()<0&&(t=ex.Zn(ex.pr(t,this.oq().Fj()+Math.PI))),this._q()&&this.oq().Qg()<0&&(t=ex.pr(t,this.oq().Fj())),t}pLt(){const t=this.rq();return!!(this.Iq()&&t.Vg()<0)||!!(this._q()&&t.Qg()<0)}mLt(){const t=this.rq();return!!(this.Iq()&&t.Vg()<0&&this._q()&&t.Qg()<0)}gLt(){const t=this.xGt;if(!(262144&t))return;const s=this.Fj();this.ODt=Math.sin(s),this.FDt=Math.cos(s),this.xGt=-262145&t}yTt(){return this.gLt(),this.ODt}gTt(){return this.gLt(),this.FDt}EU(t){this.DDt=+t}Aot(t){this.DDt+=+t}_U(){return this.DDt}RU(t){this.LDt=+t}Rot(t){this.LDt+=+t}AU(){return this.LDt}tLt(t){this.OM.equals(t)||(this.OM===fx?(this.OM=ex.Un(ex.Go,t),this.HDt=ex.Un(ex.Go,t),this.HDt.Zo()):t.Jo(1,1,1,1)?(this.OM=fx,this.HDt=fx):(this.OM.set(t),this.HDt.set(t),this.HDt.Zo()),this.nLt())}bO(t){if(t=ex.Kn(+t,0,1),this.Fq()){if(this.Hrt().LTt()===t)return;this.Hrt().QFt(t),t=this.SO()}else if(this.OM.a===t)return;this.yLt(t)}wLt(){if(!this.o5())return;const t=this.o6();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.yLt(i.SO())}}yLt(t){ux.ko(this.OM),ux.a=t,this.tLt(ux),this.wLt()}Cot(t){this.Fq()?this.bO(this.Hrt().LTt()+t):this.bO(this.SO()+t)}SO(){return this.Fq()?this.rq().SO()*this.Hrt().LTt():this.OM.a}qU(t){this.OM.qo(t)||(ux.ko(t),ux.a=this.SO(),this.tLt(ux))}aot(t,s,i){ux.Po(t,s,i),this.qU(ux)}SLt(t,s,i){0===t&&0===s&&0===i||(ux.ko(this.OM),ux.r+=t,ux.g+=s,ux.b+=i,this.qU(ux))}UU(){return this.OM}A0(){return this.HDt}Nq(){return!!(512&this.xGt)}vLt(t){this.bLt(512,t)}Mq(){return!!(1024&this.xGt)}MLt(t){this.bLt(1024,t)}Gq(){return!!(2048&this.xGt)}aLt(){return!!(3072&this.xGt)}xLt(t){this.bLt(2048,t)}Iq(){return!!(4096&this.xGt)}GLt(t){this.bLt(4096,t)}_q(){return!!(8192&this.xGt)}TLt(t){this.bLt(8192,t)}Pq(){return!!(16384&this.xGt)}ILt(t){this.bLt(16384,t)}Rq(){return!!(32768&this.xGt)}CLt(t){this.bLt(32768,t)}Fq(){return!!(4194304&this.xGt)}_Lt(t){this.bLt(4194304,t)}Lq(){return!!(8388608&this.xGt)}ELt(t){this.bLt(8388608,t)}PLt(){this.xGt&=-12647937}gq(t,s){if(t===this)return!1;if(t.Sq())return!1;if(this.ALt(t))return!1;if(this.RLt(t))return!1;const i=t.YM(),e=t.ZM(),n=t.Vg(),r=t.Qg(),h=t.Fj(),o=t.tx(),a=t.SO();t.OLt(this),t.MLt(s.bq),t.xLt(s.xq),t.GLt(s.Tq),t.TLt(s.Cq),t.ILt(s.Eq),t.CLt(s.Aq),t._Lt(s.Oq),t.ELt(s.Dq),t.vLt(s.kq);const l=i-this.YM(),u=e-this.ZM(),c=-this.Fj(),f=Math.cos(c),d=Math.sin(c);if(s.bq&&(s.Eq?t.Pa=l*f-u*d:t.Pa=l,s.Tq)){const s=this.Vg()/this.JDt.Vrt();0!==s&&(t.Pa/=s)}if(s.xq&&(s.Eq?t.Aa=l*d+u*f:t.Aa=u,s.Cq)){const s=this.Qg()/this.JDt.Jrt();0!==s&&(t.Aa/=s)}if(s.Tq){const s=this.Vg();0===s||s===Number.EPSILON?(t.ADt=1,t.JDt.XFt(1)):(t.ADt=n/this.Vg(),t.JDt.XFt(t.ADt))}if(s.Cq){const s=this.Qg();0===s||s===Number.EPSILON?(t.RDt=1,t.JDt.ZFt(1)):(t.RDt=r/this.Qg(),t.JDt.ZFt(t.RDt))}return s.Eq&&(t._o=h-this.Fj()),s.Aq&&(t.FM=o-this.tx()),s.Oq&&t.JDt.QFt(a),s.Dq&&t.wV(this.vV()),this.FLt(t),this.xU(),this.wLt(),!0}yq(t){if(t.rq()!==this)return;const s=t.YM(),i=t.ZM(),e=t.Vg(),n=t.Qg(),r=t.Fj(),h=t.tx(),o=t.SO();t.OLt(null),t.PLt(),t.GU(s,i),t.BP(e,n),t.Oj(r),t.sx(h),t.bO(o),this.DLt(t),this.xU()}LLt(){return this.YDt}kLt(){this.NLt();const t=[...this.children()];for(const s of t)this.yq(s);const s=this.rq();s&&s.yq(this),this.PLt()}NLt(){if(this.$Lt(),!this.WFt){const t=[...this.children()];t.length&&(this.WFt=[],this.jFt=new WeakMap);let s=0;for(const i of t){const t=i.EJ();this.WFt.push(t),this.jFt.set(t,s),s++}}const t=this.rq();t&&t.NLt()}$Lt(){if(-1!==this.YDt)return;const t=[...this.aq()];this.YDt=t.length;for(const s of t)s.$Lt();const s=[...this.children()];for(const t of s)t.$Lt()}QDt(){this.WFt&&(this.WFt.length=0),this.WFt=null,this.jFt=null;const t=this.rq();t&&t.QDt(),this.YDt=-1}Sq(){return null!==this.rq()}rq(){const t=this.JDt;return null!==t?t.rq():null}oq(){let t=this;for(;t.Sq();)t=t.rq();return t}*aq(){let t=this.rq();for(;t;)yield t,t=t.rq()}nFt(t){return this.o6().includes(t)}o5(){const t=this.JDt;return null!==t&&t.o5()}o6(){const t=this.JDt;return null!==t?t.o6():gx}children(){return this.o6()}*pq(){for(const t of this.children())yield t,yield*t.pq()}uq(){return this.o6().length}dIt(){return[...this.pq()].length}fq(t){const s=this.o6();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}aFt(t){if(!t)return NaN;const s=this.o6();if(!s)return NaN;for(let i=0;i<s.length;i++)if(t===s[i])return i;return NaN}BLt(t){this.JDt||(this.JDt=ex.Un(ex.l6,this)),t&&this.JDt.qFt(t)}Hrt(){return this.JDt}ZDt(){this.JDt&&(this.JDt.qn(),this.JDt=null)}OLt(t){t?(t.BLt(null),this.BLt(t)):(this.JDt&&this.JDt.qFt(null),this.o5()||this.ZDt())}RLt(t){if(!this.Sq())return!1;const s=this.rq();return s===t||s.RLt(t)}ALt(t){if(this.nFt(t))return!0;for(const s of this.o6())if(s.ALt(t))return!0;return!1}FLt(t){this.JDt.o6().push(t)}DLt(t){const s=this.JDt.o6(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.Sq()||this.ZDt(),t.o5()||t.ZDt()}uFt(){const t=qx.get(this);return t?t.iLt:null}WLt(){const t=qx.get(this);return t?t.eLt:NaN}h5(){const t=zx.get(this);return ex.te(t)?t:NaN}jLt(t){zx.set(this,t)}VLt(){this.bLt(524288,!0),this.nLt()}nLt(){if(!yx)return;const t=this.$c.gM();let s;this.UDt&&t.Pv(this.UDt),s=524288&this.xGt?t.fv()||"<point>":t.lv()||"<default>",this.UDt=t.Iv(s,this.XV(),this.HDt,this.tx(),this.HLt()?1:0,0)}j3(){return this.UDt}R1(){return this.OM===fx}NM(t){if((t|=0)<0||t>31)throw new RangeError("invalid blend mode");this.XV()!==t&&(this.xGt=-2080374785&this.xGt|t<<26,this.nLt())}XV(){return(2080374784&this.xGt)>>26}B$(t,s){const i=s&&this._Dt!==t;i&&this.l1(),this.mpt.aOt(this,this._Dt,t),this._Dt=t,i&&this.ULt(),0!==this.tx()&&this._Dt.c1()}L$(){return this._Dt}m$(){return this.L$().m$()}d1(t){this.EDt=0|t}k$(){return this._Dt.E2(),this.EDt}O2(t){this.PDt=0|t}dY(){return this._Dt.A2(),this.PDt}uQ(){return this.EDt}bLt(t,s){s?this.xGt|=t:this.xGt&=~t}vV(){return!!(1&this.xGt)}wV(t){if(this.bLt(1,t),this.o5())for(const s of this.o6())s.Lq()&&s.wV(t)}iq(){return!!(8&this.xGt)}eq(t){t=!!t,this.iq()!==t&&(this.bLt(8,t),t?this.xU():this.qLt())}zLt(t,s){if(this.bLt(32,t),this.VDt&&this.VDt.clear(),s.trim()){this.VDt||(this.VDt=new Set);for(const t of s.split(" "))t&&this.VDt.add(t.toLowerCase())}else this.VDt=null}JLt(t){const s=!!(32&this.xGt),i=this.VDt;if(!t||!i)return!s;for(const e of i)if(t.has(e))return s;return!s}xU(){if(this.xGt|=65554,this.mpt.rOt(!0),this.$c.j$(),this._Dt.H0()&&(this.NU(this.kDt,this.NDt,!0),this.xGt&=-3,this.ULt()),4&this.xGt&&this.di.Sf().dispatchEvent(lx),null!==this.JDt){const t=this.JDt.o6();for(let s=0,i=t.length;s<i;++s)t[s].xU()}}NU(t,s,i){const e=this.YM(),n=this.ZM(),r=this.Vg(),h=this.Qg(),o=this.Fj();t.Ua(e-this.DDt*r,n-this.LDt*h,r,h),i&&this.qq()&&this.YLt(t),0===o?s.Xl(t):(t.offset(-e,-n),s.Zl(t,this.yTt(),this.gTt()),s.offset(e,n),s.Ql(t)),t.normalize()}XLt(){const t=this.xGt;2&t&&(this.NU(this.kDt,this.NDt,!0),this.xGt=-3&t)}$U(){return this.XLt(),this.kDt}WU(){return this.XLt(),this.NDt}KLt(t){const s=this.YM(),i=this.ZM(),e=Math.round(s)-s,n=Math.round(i)-i;return 0===e&&0===n?t:(ax.S(t),ax.offset(e,n),ax)}ZLt(t){this.kDt.S(t),this.NDt.Xl(this.kDt),this.xGt&=-3,this.oOt(),this.ULt()}QLt(t){this.bLt(4,t)}tkt(){return!!(4&this.xGt)}_3(t,s,i){return s&&0!==this.O3()?this.A3(this.L$().P3()):0===this.tx()||i?t.xl(this.$U()):this.skt()}skt(){const t=this.L$(),s=this.LU();return!(s>=t.K1())&&(t.Y1(s,ox),ox.xl(this.$U()))}A3(t){const s=this.$U(),i=s.Qa(),e=s.sl(),n=s.tl(),r=s.il(),h=this.LU(),o=h+this.O3();return t.Xw(i,n,h,e,r,o)}VU(){const t=this.L$();if(t.u2())return this.A3(t.P3());{const s=t.m$();return this._3(t.tH(),s.C3(),s.lV())}}N3(t){this.bLt(1048576,t)}L3(t){this.bLt(2097152,t)}ikt(){return!!(1048576&this.xGt)}ekt(){return!!(2097152&this.xGt)}nkt(t){(t=!!t)!==this.HLt()&&(this.bLt(16777216,t),this.nLt())}HLt(){return!!(16777216&this.xGt)}rkt(t){this.WDt=t,this.hkt(),this.qq()&&(this.XDt.okt=null)}akt(){return this.WDt}lkt(){return null!==this.WDt||this.qq()}ukt(){return this.ckt(this.Vg(),this.Qg(),this.Fj(),this.yTt(),this.gTt())}fkt(t,s,i){let e=0,n=1;return 0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.ckt(t,s,i,e,n)}ckt(t,s,i,e,n){let r=this.jDt;null===r&&(r={KDt:ex.Un(ex.lu),width:NaN,height:NaN,angle:NaN},this.jDt=r);const h=r.KDt;if(r.width===t&&r.height===s&&r.angle===i)return h;const o=this.WDt;if(this.qq()){const i=this._U(),r=this.AU(),a=this.zq();let l=this.XDt.okt;l||(o?(cx.S(o),cx.offset(i,r)):cx.yu(),l=a.sG(cx),this.XDt.okt=l),a.iG(l,h),h.offset(-i,-r),h.bu(t,s,e,n)}else o?(h.S(o),h.bu(t,s,e,n)):h.vu(this.WU(),-this.YM(),-this.ZM());return r.width=t,r.height=s,r.angle=i,h}hkt(){this.dkt(!0);const t=this.jDt;null!==t&&(t.width=NaN)}Bq(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.EJ().qW().FW())throw new Error("object does not support mesh");this.jq(),this.XDt={pkt:ex.Un(ex.Nw.vx,t,s),mkt:ex.Un(ex.Nw.vx,t,s),okt:null}}qq(){return null!==this.XDt}zq(){if(!this.qq())throw new Error("no mesh");return this.XDt.pkt}gkt(){if(!this.qq())throw new Error("no mesh");return this.XDt.mkt}ykt(t){this.bLt(65536,t)}wkt(){return!!(65536&this.xGt)}dkt(t){this.bLt(131072,t)}Skt(){return!!(131072&this.xGt)}YLt(t){const s=this.XDt.pkt,i=Math.min(s.$x(),0),e=Math.min(s.Bx(),0),n=Math.max(s.Wx(),1),r=Math.max(s.jx(),1),h=t.width(),o=t.height();t.offsetLeft(i*h),t.offsetTop(e*o),t.ll((n-1)*h),t.ul((r-1)*o),this.hT=s.Vx()}jq(){this.XDt&&(this.XDt.pkt.qn(),this.XDt.mkt.qn(),this.XDt=null,this.hkt())}Hq(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!mx.has(e))throw new Error("invalid mode");const n="relative"===e;let r=i.x,h=i.y;const o=i.WV;let a="number"==typeof i.Jq?i.Jq:n?0:-1,l="number"==typeof i.Yq?i.Yq:n?0:-1;if(!this.qq())return!1;const u=this.zq(),c=u.Ux(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.tx()!==o&&(c.sx(o),f=!0),n&&(r+=t/(u.Fx()-1),h+=s/(u.Dx()-1)),-1!==a||n?(n&&(a+=t/(u.Fx()-1)),a=ex.Kn(a,0,1)):a=c.ix(),-1!==l||n?(n&&(l+=s/(u.Dx()-1)),l=ex.Kn(l,0,1)):l=c.hx(),c.YM()===r&&c.ZM()===h&&c.ix()===a&&c.hx()===l?f:(c.XM(r),c.QM(h),c.nx(a),c.ox(l),this.hkt(),!0)}UOt(){return this.di.UOt()}nq(t,s){return!!this.$U().Tl(t,s)&&!!this.WU().Tl(t,s)&&(this.UOt()?this.di.iz().EEt(t,s):!this.lkt()||this.ukt().Tl(t-this.YM(),s-this.ZM()))}vkt(){return!!(16&this.xGt)}oOt(){if(!this.vkt()||!this.iq()||256&this.xGt)return;const t=this.$U(),s=this.mpt.nOt(),i=this.$Dt;if(ox.set(s.CQ(t.Qa()),s._Q(t.tl()),s.CQ(t.sl()),s._Q(t.il())),i.equals(ox))return;const e=this.di;i===px?(s.EQ(e,null,ox),this.$Dt=ex.Un(ex.Rect,ox)):(s.EQ(e,i,ox),i.S(ox)),this.xGt&=-17}bkt(){this.xGt|=16}qLt(){const t=this.$Dt;t!==px&&(this.mpt.nOt().EQ(this.di,t,null),this.$Dt=px)}ULt(){const t=this.L$();if(!t.H0()||256&this.xGt)return;const s=t.F1(),i=this.$U(),e=this.BDt;if(ox.set(s.CQ(i.Qa()),s._Q(i.tl()),s.CQ(i.sl()),s._Q(i.il())),e.equals(ox))return;const n=this.di;e===dx?(s.EQ(n,null,ox),this.BDt=ex.Un(ex.Rect,ox)):(s.EQ(n,e,ox),e.S(ox)),t.D1()}l1(){const t=this.BDt;t!==dx&&(this.L$().F1().EQ(this.di,t,null),this.BDt=dx)}P2(){return this.BDt}JU(){const t=this.di,s=this._Dt,i=s.$$();i.length&&i.at(-1)===t||(s.a1(t,!1),s.n1(t,!1),this.$c.j$())}XU(){const t=this.di,s=this._Dt,i=s.$$();i.length&&i[0]===t||(s.a1(t,!1),s.o1(t,!1),this.$c.j$())}ZU(t){const s=this.di,i=this._Dt;if(i.m$()!==t.m$())throw new Error("layer from different layout");t!==i&&(i.a1(s,!0),this.B$(t),t.n1(s,!0),this.$c.j$())}tq(t,s){const i=this.di;let e=!1;const n=this._Dt;if(t.TH()===i.TH())return;const r=t.D$();if(!r)throw new Error("expected world instance");const h=r.L$();n.xk()!==h.xk()&&(n.a1(i,!0),this.B$(h),h.n1(i,!0),e=!0);const o=h.L2(i,t,!!s);(e||o)&&this.$c.j$()}bU(){return this.qDt}Mkt(t){this.bLt(64,t)}U2(){return!!(64&this.xGt)}e5(t,s=null){const i={x:this.YM(),y:this.ZM(),w:this.Vg(),h:this.Qg(),l:this.L$()._1(),zi:this.k$()};0!==this.tx()&&(i.ze=this.tx()),0!==this.Fj()&&(i.a=this.oLt()),this.R1()||(i.c=this.OM.toJSON()),.5!==this._U()&&(i.oX=this._U()),.5!==this.AU()&&(i.oY=this.AU()),0!==this.XV()&&(i.bm=this.XV()),this.vV()||(i.v=this.vV()),this.iq()||(i.ce=this.iq()),this.tkt()&&(i.be=this.tkt()),this.qDt&&(i.fx=this.qDt.e5());const e=!!(32&this.xGt);return e&&(i.sfi=e),this.VDt&&(i.sft=[...this.VDt].join(" ")),this.JDt&&"visual-state"!==t&&(i.sgi=this.JDt.e5(t,s),qx.has(this)&&(i.sgcd=qx.get(this).iLt,i.sgzid=qx.get(this).eLt)),this.qq()&&(i.mesh=this.zq().mx()),i}aDt(){return{x:this.Pa,y:this.Aa,z:this.FM,w:this.ADt,h:this.RDt,a:this._o,sgi:this.Hrt()?this.Hrt().eDt():null}}mDt(t){t&&(this.Pa=t.x,this.Aa=t.y,this.FM=t.z,this.ADt=t.w,this.RDt=t.h,this._o=t.a,t.sgi&&this.Hrt()&&this.Hrt().n5(t.sgi),this.cLt(),this.xU())}yOt(){this.QDt(),this.kLt(),this.BLt(null),this.JDt&&this.JDt.uDt(this.WFt,this.jFt)}c8(t){"visual-state"!==t&&this.kLt()}d8(t,s="full",i=null){if(t.hasOwnProperty("sgi")&&"visual-state"!==s){if(256&this.xGt)return;this.JDt.d8(t.sgi,i)}}PFt(t,s="full",i=null){if("visual-state"!==s)if(256&this.xGt)this.QDt();else{if(t.hasOwnProperty("sgi"))this.JDt.uDt(null,null,t.sgi,i);else if(i?.tCt&&this.WFt)for(const t of this.WFt)t.SY()||this.$c.wH(t);this.QDt(),this.xU()}}n5(t,s,i=null){if(yx=!1,this.XM(t.x),this.QM(t.y),this.Xg(t.w),this.Hg(t.h),this.d1(t.zi),this.sx(t.hasOwnProperty("ze")?t.ze:0),this.Oj(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?ux.Sa(t.c):t.hasOwnProperty("o")?(ux.ko(this.OM),ux.a=t.o):ux.Eo(1,1,1,1),this.tLt(ux),this.EU(t.hasOwnProperty("oX")?t.oX:.5),this.RU(t.hasOwnProperty("oY")?t.oY:.5),this.NM(t.hasOwnProperty("bm")?t.bm:0),this.wV(!t.hasOwnProperty("v")||t.v),this.eq(!t.hasOwnProperty("ce")||t.ce),this.QLt(!!t.hasOwnProperty("be")&&t.be),this.zLt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.qDt&&t.hasOwnProperty("fx")&&this.qDt.n5(t.fx),t.hasOwnProperty("sgi")&&"visual-state"!==s){this.BLt(null);const s=this.JDt,i=t.sgi;s.n5(i),s.uDt(this.WFt,this.jFt),this.xkt(t.sgcd,t.sgzid)}if(t.hasOwnProperty("mesh")){const s=t.mesh;this.Bq(s.cols,s.rows),this.zq().gx(s)}else this.jq();this.xU(),yx=!0,this.nLt(),"visual-state"!==s&&this.$c.Gkt(this.EJ(),t)}xkt(t,s){t&&ex.te(s)&&qx.set(this,{iLt:t,eLt:s})}}}{const Jx=self.Cs;Jx.XAt=class extends Jx.Vn{constructor(t,s){super();const i=t.aB(),e=i.xbt(s[1]);i.Tkt().GPt(e),this.$c=i,this.mpt=t,this.ePt=Jx.mW.yz(e),this.j_t=null,this.Ikt=null,this.CAt=e.Instance,this.zQ=s[2],this.Yn=s[0],this.oMt=this.$c.Hgt(s[3]);const n=this.ePt.iGt();if(n<2&&(this.j_t=Jx.Un(e.dRt,this),!(this.j_t instanceof Jx.iPt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(Jx.mW.G_t(this,n),n>=2){const t=e.dRt??globalThis.AY;if(this.Ikt=new t,!(this.Ikt instanceof globalThis.AY))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.Ikt=new globalThis.mz;Jx.mW.T_t(n),this.v_t()}static UT(t,s){return Jx.Un(Jx.XAt,t,s)}qn(){this.$c=null,this.ePt=null,this.j_t&&(this.j_t.qn(),this.j_t=null),this.CAt=null}ZGt(){return this.j_t}v_t(){this.j_t?this.j_t.v_t():this.Ikt&&this.Ikt.UJ()}aB(){return this.$c}fH(){return this.mpt}lz(){return this.ePt}FRt(){return this.CAt}Pc(){return this.Yn}_1(){return this.zQ}cz(){return this.Ikt}Hgt(){return this.oMt}}}{const Yx=self.Cs,Xx=self.oz;Yx.POt=class extends Yx.Vn{constructor(t){super(),this.$c=t.runtime,this.$Mt=t.uz,this.ePt=this.$Mt.lz(),this.di=t.dz,this.Aw=t.index,this.MOt=null,this.xOt=null,this.ePt.n1(this.di)}qn(){this.xOt&&(this.xOt.yH(),this.xOt=null),this.ePt.a1(this.di),this.MOt&&(this.MOt.qn(),this.MOt=null),this.$c=null,this.$Mt=null,this.ePt=null,this.di=null}PRt(t){if(this.MOt)throw new Error("already got sdk instance");if(this.lz().iGt()<2){if(this.MOt=Yx.Un(this.$Mt.FRt(),this,t),!(this.MOt instanceof Yx.nPt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const s=this.lz().b_t();this.x_t(s.Instance,t)}}iz(){return this.MOt??this.xOt}pz(){return this.di}aB(){return this.$c}fz(){return this.$Mt}lz(){return this.ePt}Jht(){return this.Aw}oPt(){this.MOt?this.MOt.oPt():this.xOt.FY()}cPt(t,s){this.MOt&&this.MOt.cPt(t,s)}EFt(){return this.MOt?this.MOt.lEt():this.xOt.lU()}mx(t="full"){return this.MOt?this.MOt.mx(t):this.xOt.uU(t)}gx(t,s="full"){if(this.MOt)return this.MOt.gx(t,s);this.xOt.cU(t,s)}static Ckt(t,s,i){const e=globalThis.RY;let n,r;n=s instanceof e?t.Yj(s):s.hPt(),r=i instanceof e?t.Yj(i):i.hPt();const h=n.pz(),o=r.pz(),a=h.fH().xk(),l=o.fH().xk();if(a!==l)return a-l;const u=h.gFt(),c=o.gFt();return u!==c?u-c:n.Jht()-r.Jht()}x_t(t,s){const i=Xx,e=t??this.MOt.b_t(),n=e||i,r=this.lz().iGt();if(Yx.mW.G_t(this,r),Yx.mW.TPt(s),this.xOt=new n,Yx.mW.IPt(),Yx.mW.T_t(r),e&&!(this.xOt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);return this.xOt}U_t(){return this.xOt||this.x_t()}dEt(){return!!this.xOt}}}{const Kx=self.Cs;Kx.E0=class extends Kx.Vn{constructor(t,s){super(),this.xx=t,this._kt=[],this.Ekt=[],this.Pkt=new Map,this.Akt=[],this.Rkt=[],this.Okt=new Set,this.rM=!0;for(const t of s){const s=Kx.Un(Kx.Fkt,this,t,this._kt.length);this._kt.push(s),this.Pkt.set(s.Pc().toLowerCase(),s),t.length>=3&&this.Akt.push(this.Dkt(s,t[2]))}this.aB().Lkt(this)}qn(){this.aB().kkt(this);for(const t of this.Rkt)t.qn();Kx.bh(this.Rkt),Kx.bh(this._kt),Kx.bh(this.Ekt),this.Pkt.clear(),Kx.bh(this.Akt),this.xx=null}Nkt(t){this.Okt.add(t)}$kt(t){this.Okt.delete(t)}Bkt(t){t.sv()&&(this.Rkt=this._kt.map(t=>{const s=t.zI();return s.Wkt()>0?Kx.Un(Kx.Nw.jkt,s):null}),this.Vkt());for(const s of this.Okt)s.Bkt(t)}_Rt(t){if(t.length){this._kt=t.concat(this._kt);for(const s of t)this.Pkt.set(s.Pc().toLowerCase(),s);for(let t=0,s=this._kt.length;t<s;++t)this._kt[t].M1(t)}}Dkt(t,s){t.Hkt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=Kx.Un(Kx.Go);e.Sa(s),i[t]=e}}return i}Lx(){return this.xx}aB(){return this.xx.aB()}vz(){Kx.bh(this.Ekt);let t=!0;for(const s of this._kt)s.uSt()&&(this.Ekt.push(s),s.zI().MM()||(t=!1));this.rM=t}_j(){return this._kt}jRt(){return this._kt.length>0}Lrt(t){return this.Pkt.get(t.toLowerCase())||null}Ukt(t){if((t=Math.floor(+t))<0||t>=this._kt.length)throw new RangeError("invalid effect type index");return this._kt[t]}wz(t){return this.Ukt(t).uSt()}Sz(t,s){this.Ukt(t).Hkt(s)}O1(){return this.Ekt}U2(){return this.Ekt.length>0}MM(){return this.rM}Drt(t){return this.Akt[t]}O0(t){return t<this.Rkt.length?this.Rkt[t]:this.Akt[t]}bz(t,s){if(t<0||t>=this.Akt.length)return null;const i=this.Akt[t];return s<0||s>=i.length?null:i[s]}Mz(t,s,i){if(t<0||t>=this.Akt.length)return!1;const e=this.Akt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof Kx.Go){if(n.qo(i))return!1;n.ko(i)}else{if(n===i)return!1;e[s]=i}return t<this.Rkt.length&&this.Rkt[t].qkt(s,i),!0}Vkt(){const t=this.Akt,s=this.Rkt;for(let i=0,e=Math.min(t.length,s.length);i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.qkt(t,n[t])}}static zkt(t){return t&&t instanceof Kx.Go?{t:"color",v:t.toJSON()}:t}static Jkt(t){if(null===t)return NaN;if("object"==typeof t){if("color"===t.t){const s=Kx.Un(Kx.Go);return s.Sa(t.v),s}throw new Error("invalid effect parameter type")}return t}static Ykt(t){return t.map(Kx.E0.zkt)}static Xkt(t){return t.map(Kx.E0.Jkt)}mx(){return this._kt.map(t=>({name:t.Pc(),active:t.uSt(),params:Kx.E0.Ykt(this.Akt[t.xk()])}))}gx(t){for(const s of t){const t=this.Lrt(s.name);t&&(t.Hkt(s.active),this.Akt[t.xk()]=Kx.E0.Xkt(s.params))}this.vz(),this.Vkt()}}}{const Zx=self.Cs;Zx.Fkt=class extends Zx.Vn{constructor(t,s,i){super(),this._0=t,this.Wc=s[0],this.Yn=s[1],this.Aw=i,this.PM=null,this.$f=!0}qn(){this._0=null,this.PM=null}CRt(t){const s=Zx.Un(Zx.Fkt,t,[this.Wc,this.Yn],-1);return s.PM=this.PM,s.$f=this.$f,s}Bkt(t){const s=t.av(this.Wc);if(!s)throw new Error("failed to find shader program '"+this.Wc+"'");this.PM=s}Cj(){return this._0}Pc(){return this.Yn}M1(t){this.Aw=t}xk(){return this.Aw}Lx(){return this._0.Lx()}aB(){return this._0.aB()}Hkt(t){this.$f=!!t}uSt(){return this.$f}zI(){return this.PM}Kkt(){const t=[];for(let s=0,i=this.PM.JI();s<i;++s){const i=this.PM.YI(s);if("float"===i||"percent"===i)t.push(0);else{if("color"!==i)throw new TypeError("unknown effect parameter type");t.push(Zx.Un(Zx.Go,1,1,1,1))}}return t}}}{const Qx=self.Cs;Qx.zDt=class extends Qx.Vn{constructor(t,s){super(),this.di=t,this.Zkt=s,this._0=t.fH().Cj(),this.Qkt=!0,this.D0=!0,this.tNt=!1,this.sNt=!1,this.iNt=!1,this.eNt=!1,this.Sk=Qx.Un(Qx.Nw.aD,t.aB().I$().P0(),{KF:(t,s)=>{const i=s.ck(),e=i.D$();t.$M(e.A0()),t.Hv(e.LU()),i.Zx(t),t.Hv(0)},ZF:t=>{const s=t.GEt(),[i,e]=t.xEt();return{ik:s,ek:i,nk:e}},QF:t=>this.O0(t)}),this.nNt=[],this.Ekt=[],this.rM=!0,this.Akt=[],this.Rkt=[],this.Bkt(t.aB().gM());for(let t=0,s=this._0._j().length;t<s;++t)this.nNt.push(!0);this.vz(),this._0.Nkt(this)}qn(){this._0.$kt(this);for(const t of this.Rkt)t&&t.qn();Qx.bh(this.Rkt),this.Sk.qn(),this.Sk=null,Qx.bh(this.nNt),Qx.bh(this.Ekt),Qx.bh(this.Akt),this.di=null,this._0=null}Bkt(t){t.sv()&&(this.Rkt=this._0._j().map(t=>{const s=t.zI();return s.Wkt()>0?Qx.Un(Qx.Nw.jkt,s):null}))}sLt(t){let s=0;for(const i of t)this.Akt.push(this.Dkt(s,i)),++s;this.Vkt(),this.vz()}Dkt(t,s){this.nNt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=Qx.Un(Qx.Go);e.Sa(s),i[t]=e}}return i}kOt(){for(const t of this._0._j())this.Akt.push(t.Kkt());this.Vkt()}Lx(){return this.xx}Cj(){return this._0}Mk(){return this.A1(),this.Sk}aB(){return this.di.aB()}vz(){Qx.bh(this.Ekt);const t=this.Zkt,s=this._0._j(),i=this.Ekt,e=this.nNt;let n=!0;for(let t=0,r=s.length;t<r;++t)if(e[t]){const e=s[t];i.push(e),e.zI().MM()||(n=!1)}this.rM=n,t.Mkt(!!i.length),this.Qkt=!0}A1(){const t=this.di,s=this.Zkt,i=s.R1(),e=t.qW().PW(),n=0!==s.Fj()||0!==s.L$().Fj()||s.Vg()<0||s.Qg()<0,r=t.CEt(),h=t.bM();(this.Qkt||i!==this.D0||e!==this.tNt||n!==this.sNt||r!==this.iNt||h!==this.eNt||this.Sk.tL())&&(this.Sk.sL(this.Ekt.map(t=>t.zI()),{sD:this.Ekt.map(t=>t.xk()),iD:!i||h,nD:e,rD:r,hD:n}),this.Qkt=!1,this.D0=i,this.tNt=e,this.sNt=n,this.iNt=r,this.eNt=h)}O1(){return this.Ekt}Drt(t){return this.Akt[t]}O0(t){return t<this.Rkt.length?this.Rkt[t]:this.Akt[t]}bz(t,s){if(t<0||t>=this.Akt.length)return null;const i=this.Akt[t];return s<0||s>=i.length?null:i[s]}Mz(t,s,i){if(t<0||t>=this.Akt.length)return!1;const e=this.Akt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof Qx.Go){if(n.qo(i))return!1;n.ko(i)}else{if(n===i)return!1;e[s]=i}return t<this.Rkt.length&&this.Rkt[t].qkt(s,i),!0}Vkt(){const t=this.Akt,s=this.Rkt;for(let i=0,e=s.length;i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.qkt(t,n[t])}}MM(){return this.rM}rNt(){return this.Ekt.some(t=>t.zI().TM())}wz(t){return this.nNt[t]}Sz(t,s){this.nNt[t]=!!s}_j(){return this._0._j()}e5(){return this._0._j().map(t=>({name:t.Pc(),active:this.nNt[t.xk()],params:Qx.E0.Ykt(this.Akt[t.xk()])}))}n5(t){for(const s of t){const t=this._0.Lrt(s.name);t&&(this.nNt[t.xk()]=s.active,this.Akt[t.xk()]=Qx.E0.Xkt(s.params))}this.vz(),this.Vkt()}}}{const tG=self.Cs,sG=[],iG=[],eG=[],nG=tG.Un(tG.lu),rG=tG.Un(tG.lu),hG=tG.Un(tG.El),oG=tG.Un(tG.Rect),aG=tG.Un(tG.Rect);let lG=null,uG=null,cG=null;tG.hNt=class extends tG.Vn{constructor(t){super(),this.$c=t,this.oNt=0,this.aNt=0,this.lNt=[],this.uNt=0,this.cNt=0,this.fNt=0,this.dNt=0,this.pNt=new self.CB(this)}qn(){this.$c=null}aB(){return this.$c}Pk(){return this.pNt}mNt(){this.cNt=this.uNt,this.uNt=0,this.dNt=this.fNt,this.fNt=0}gNt(){return this.cNt}yNt(){return this.dNt}wNt(t,s){const i=t.D$(),e=s.D$();i&&e&&i.iq()&&e.iq()&&this.lNt.push([t,s])}tIt(t,s,i){for(const[e,n]of this.lNt){let r=null;if(t===e)r=n;else{if(t!==n)continue;r=e}r.lIt(s)&&(i.includes(r)||i.push(r))}}sIt(t,s){if(!this.lNt.length)return!1;for(const[i,e]of this.lNt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}SNt(){tG.bh(this.lNt)}EB(t,s){if(!t||!s||t===s)return!1;const i=t.D$(),e=s.D$();if(!i.iq()||!e.iq())return!1;this.uNt++;const n=i.L$(),r=e.L$();return n.T2(r)?this.vNt(i,e):this.bNt(i,e)}vNt(t,s){if(!t.$U().xl(s.$U()))return!1;if(this.fNt++,!t.WU().su(s.WU()))return!1;if(t.UOt()&&s.UOt())return!1;if(t.UOt())return this.MNt(t,s);if(s.UOt())return this.MNt(s,t);if(!t.lkt()&&!s.lkt())return!0;const i=t.ukt(),e=s.ukt();return i.Mu(e,s.YM()-t.YM(),s.ZM()-t.ZM())}bNt(t,s){const i=t.UOt(),e=s.UOt();if(i&&!e)return this.xNt(t,s);if(e&&!i)return this.xNt(s,t);if(e||i)return!1;{const i=t.L$(),e=s.L$();nG.S(t.ukt()),rG.S(s.ukt());const n=nG.pu();for(let s=0,e=n.length;s<e;s+=2){const e=s+1,r=n[s],h=n[e],[o,a]=i.nH(r+t.YM(),h+t.ZM());n[s]=o,n[e]=a}const r=rG.pu();for(let t=0,i=r.length;t<i;t+=2){const i=t+1,n=r[t],h=r[i],[o,a]=e.nH(n+s.YM(),h+s.ZM());r[t]=o,r[i]=a}return nG.wu(),rG.wu(),this.fNt++,nG.Mu(rG,0,0)}}xNt(t,s){const i=t.L$(),e=s.L$();lG||(lG=tG.Un(tG.lu)),uG||(uG=tG.Un(tG.Rect)),cG||(cG=tG.Un(tG.El));const n=s.YM(),r=s.ZM(),[h,o]=e.nH(n,r),[a,l]=i.iH(h,o),u=a-n,c=l-r;if(uG.S(s.$U()),uG.offset(u,c),!t.$U().xl(uG))return!1;if(cG.S(s.WU()),cG.offset(u,c),this.fNt++,!t.WU().su(cG))return!1;lG.S(s.ukt());const f=lG.pu();for(let t=0,s=f.length;t<s;t+=2){const s=t+1;f[t]+=u,f[s]+=c}return lG.wu(),this.MNt(t,s,a,l,lG,uG,cG)}MNt(t,s,i,e,n,r,h){const o=void 0!==r?r:s.$U(),a=t.YM(),l=t.ZM(),u=t.EJ().iz(),c=void 0!==i?i:s.YM(),f=void 0!==e?e:s.ZM(),d=s.lkt(),p=void 0!==h?h:s.WU(),m=iG;u.GNt(o,m);for(let t=0,i=m.length;t<i;++t){const i=m[t],e=i.TNt();if(this.uNt++,o.Gl(e,a,l)&&(hG.Xl(e),hG.offset(a,l),hG.su(p)))if(d){const t=void 0!==n?n:s.ukt();let r=c,h=f;void 0!==n&&(r=s.YM(),h=s.ZM());const o=i.INt();if(o){if(this.fNt++,o.Mu(t,r-(a+e.Qa()),h-(l+e.tl())))return tG.bh(m),!0}else if(nG.vu(hG,0,0),nG.Mu(t,r,h))return tG.bh(m),!0}else{const t=i.INt();if(!t)return tG.bh(m),!0;if(nG.vu(p,0,0),t.Mu(nG,-(a+e.Qa()),-(l+e.tl())))return tG.bh(m),!0}}return tG.bh(m),!1}CNt(t,s,i){const e=t.nj(),n=this.$c.pN();if(!n)throw new Error("cannot call outside event");const r=n.Hpt(),h=new tG._Nt;if(e.Cpt()){i||(e.Fpt(!1),tG.bh(e.Dpt())),r&&tG.bh(e.Lpt());for(const n of t.ej()){const t=n.D$(),o=t.L$();let a=!1;if(h.MV(o)&&t.VU()&&(a=s.some(([s,i])=>{const[e,n]=h.iH(o,s,i,t.LU());return t.nq(e,n)})),a){if(i)return!1;e.Rpt(n)}else r&&e.Opt(n)}}else{let t,o=!1;r&&!n.Ovt(this.$c.Dgt())?this.$c.eTt()&&!e.Lpt().length&&e.Dpt().length?t=e.Dpt():(t=e.Lpt(),o=!0):t=e.Dpt();let a=0;for(let n=0,l=t.length;n<l;++n){const l=t[n],u=l.D$(),c=u.L$();let f=!1;if(h.MV(c)&&u.VU()&&(f=s.some(([t,s])=>{const[i,e]=h.iH(c,t,s,u.LU());return u.nq(i,e)})),f){if(i)return!1;o?e.Rpt(l):t[a++]=l}else o?t[a++]=l:r&&e.Opt(l)}i||(t.length=a)}return t.pbt(),h.qn(),!!i||e._pt()}ENt(t,s){if(!t)return!0;for(const i of s.lOt())if(!t.T2(i))return!1;return!0}iTt(t,s,i,e){if(s.v1())for(const n of s.xj())this.ENt(t,n)?(n.hOt(),n.nOt().PQ(i,e)):tG.On(e,n.ej());else this.ENt(t,s)?(s.hOt(),s.nOt().PQ(i,e)):tG.On(e,s.ej())}BB(t,s,i,e){for(const n of s)this.iTt(t,n,i,e)}PNt(t,s,i){const e=this.$c._Pt();e&&this.BB(t,e.k8(),s,i)}ANt(t,s,i){const e=this.$c.EPt();e&&this.BB(t,e.k8(),s,i)}JLt(t,s){return t.JOt()&&(!s||s.D$().JLt(t.aGt().get("solidTags")))}RB(t){const s=t.D$();this.PNt(s.L$(),s.$U(),sG);for(const s of sG)if(this.JLt(s,t)&&this.EB(t,s))return tG.bh(sG),s;return tG.bh(sG),null}RNt(t,s){this.PNt(null,t,sG);for(const i of sG)if(this.JLt(i,s)&&this.ONt(t,i))return tG.bh(sG),i;return tG.bh(sG),null}FNt(t,s){let i=null;s&&(i=eG,tG.bh(i));const e=t.D$();this.ANt(e.L$(),e.$U(),sG);for(const e of sG)if(e.XOt()&&this.EB(t,e)){if(!s)return tG.bh(sG),e;i.push(e)}return tG.bh(sG),i}DNt(t,s,i,e,n){e=e||50;const r=t.D$(),h=r.YM(),o=r.ZM();for(let a=0;a<e;++a)if(r.GU(h+s*a,o+i*a),r.xU(),!this.EB(t,n))return!0;return r.GU(h,o),r.xU(),!1}LNt(t,s,i,e,n,r){e=e||50;const h=t.D$(),o=h.YM(),a=h.ZM();let l=null,u=null;for(let c=0;c<e;++c)if(h.GU(o+s*c,a+i*c),h.xU(),!this.EB(t,l))if(l=this.RB(t),l)u=l;else if(n&&(l=r?this.EB(t,r)?r:null:this.FNt(t),l&&(u=l)),!l)return u&&this.kNt(t,s,i,u,16,!0),!0;return h.GU(o,a),h.xU(),!1}NNt(t,s,i,e){e=e||50;const n=t.D$(),r=n.YM(),h=n.ZM();let o=null,a=null;for(let l=0;l<e;++l)for(let e=0;e<2;++e){const u=2*e-1;if(n.GU(r+s*l*u,h+i*l*u),n.xU(),!this.EB(t,o)){if(o=this.RB(t),!o)return a&&this.kNt(t,s*u,i*u,a,16,!0),!0;a=o}}return n.GU(r,h),n.xU(),!1}kNt(t,s,i,e,n,r){let h=2,o=!1,a=!1;const l=t.D$();let u=l.YM(),c=l.ZM();for(;h<=n;){const n=1/h;h*=2,l.IU(s*n*(o?1:-1),i*n*(o?1:-1)),l.xU(),this.EB(t,e)||r&&this.RB(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.YM(),c=l.ZM())}a&&(l.GU(u,c),l.xU())}$Nt(t,s=100){let i=0;const e=t.D$(),n=e.YM(),r=e.ZM();let h=0,o=this.RB(t);if(!o)return!0;for(;i<=s;){let s=0,a=0;switch(h){case 0:s=0,a=-1,i++;break;case 1:s=1,a=-1;break;case 2:s=1,a=0;break;case 3:s=1,a=1;break;case 4:s=0,a=1;break;case 5:s=-1,a=1;break;case 6:s=-1,a=0;break;case 7:s=-1,a=-1}if(h=(h+1)%8,e.GU(Math.floor(n+s*i),Math.floor(r+a*i)),e.xU(),!this.EB(t,o)&&(o=this.RB(t),!o))return!0}return e.GU(n,r),e.xU(),!1}BNt(t,s,i,e){const n=t.D$(),r=n.YM(),h=n.ZM(),o=Math.max(10,tG.er(s,i,r,h)),a=tG.rr(s,i,r,h),l=e||this.RB(t);if(!l)return tG.Zn(a+Math.PI);let u=l,c=0,f=0;const d=tG.Qn(5);let p;for(p=1;p<36;++p){const r=a-p*d;if(n.GU(s+Math.cos(r)*o,i+Math.sin(r)*o),n.xU(),!this.EB(t,u)&&(u=e?null:this.RB(t),!u)){c=r;break}}for(36===p&&(c=tG.Zn(a+Math.PI)),u=l,p=1;p<36;++p){const r=a+p*d;if(n.GU(s+Math.cos(r)*o,i+Math.sin(r)*o),n.xU(),!this.EB(t,u)&&(u=e?null:this.RB(t),!u)){f=r;break}}if(36===p&&(f=tG.Zn(a+Math.PI)),n.GU(r,h),n.xU(),f===c)return f;const m=tG.hr(f,c)/2;let g;g=tG.lr(f,c)?tG.Zn(c+m+Math.PI):tG.Zn(f+m);const y=Math.cos(a),w=Math.sin(a),S=Math.cos(g),v=Math.sin(g),b=y*S+w*v,M=y-2*b*S,x=w-2*b*v;return tG.rr(0,0,M,x)}WNt(t,s,i,e,n){if(!n)return!1;const r=n.D$();return!!r.iq()&&(this.uNt++,oG.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!!r.$U().xl(oG)&&(n.UOt()?this.jNt(t,s,i,e,n,r):(this.fNt++,!!r.WU().tu(t,s,i,e)&&(!r.lkt()||r.ukt().tu(r.YM(),r.ZM(),t,s,i,e)))))}jNt(t,s,i,e,n,r){const h=r.YM(),o=r.ZM(),a=n.iz(),l=iG;aG.set(t,s,i,e),aG.normalize(),a.GNt(aG,l);for(let n=0,r=l.length;n<r;++n){const r=l[n],a=r.TNt();if(this.uNt++,oG.Gl(a,h,o)&&(hG.Xl(a),hG.offset(h,o),hG.tu(t,s,i,e))){const n=r.INt();if(!n)return tG.bh(l),!0;if(this.fNt++,n.tu(h+a.Qa(),o+a.tl(),t,s,i,e))return tG.bh(l),!0}}return tG.bh(l),!1}ONt(t,s){if(!s)return!1;const i=s.D$();if(!i.iq())return!1;if(this.uNt++,!i.$U().xl(t))return!1;if(s.UOt())return this.VNt(t,s,i);if(this.fNt++,hG.Xl(t),!i.WU().su(hG))return!1;if(!i.lkt())return!0;const e=nG;e.Xl(t,i.YM(),i.ZM());const n=i.ukt();return e.Mu(n,0,0)}VNt(t,s,i){const e=i.YM(),n=i.ZM(),r=s.iz(),h=iG;r.GNt(t,h);for(let s=0,i=h.length;s<i;++s){const i=h[s],r=i.TNt();if(this.uNt++,t.Gl(r,e,n)){const s=i.INt();if(!s)return tG.bh(h),!0;if(this.fNt++,nG.Xl(t,0,0),s.Mu(nG,-(e+r.Qa()),-(n+r.tl())))return tG.bh(h),!0}}return tG.bh(h),!1}HNt(t,s){if(!t)return;const i=t.D$();i.iq()&&(this.uNt++,i.$U().xl(s.rect)&&(t.UOt()?this.UNt(t,i,s):(this.fNt++,i.lkt()?s.qNt(t,i.YM(),i.ZM(),i.ukt()):s.zNt(t,i.WU()))))}UNt(t,s,i){const e=s.YM(),n=s.ZM(),r=iG;t.iz().GNt(i.rect,r);for(let h=0,o=r.length;h<o;h++){const o=r[h],a=o.TNt();if(this.uNt++,i.rect.Gl(a,e,n)){const r=o.INt();this.fNt++,r?i.qNt(t,e+a.Qa(),n+a.tl(),r):i.JNt(t,s.YM(),s.ZM(),a)}}tG.bh(r)}DB(t,s){if(t===this.oNt&&s===this.aNt)return;this.oNt=t,this.aNt=s;const i=this.$c.S1();for(const e of i)if(e.bW()){for(const t of e.ij())t.D$().qLt();e.nOt().YNt(t,s),e.rOt();for(const t of e.ij()){const s=t.D$();s.bkt(),s.oOt()}}}kB(){return[this.oNt,this.aNt]}XNt(t,s){this.oNt=t,this.aNt=s}}}{const fG=self.Cs;fG.kAt=class extends fG.Vn{constructor(t,s){super(),this.xQ=t,this.GQ=s,this.TQ=fG.Un(fG._u)}qn(){this.TQ.qn(),this.TQ=null}YNt(t,s){if(!this.TQ.Au())throw new Error("grid not empty");this.xQ=t,this.GQ=s}IQ(t,s,i){let e=this.TQ.qs(t,s);return e||(i?(e=fG.Un(fG.KNt,this,t,s),this.TQ.Set(t,s,e),e):null)}CQ(t){const s=Math.floor(t/this.xQ);return isFinite(s)?s:0}_Q(t){const s=Math.floor(t/this.GQ);return isFinite(s)?s:0}EQ(t,s,i){if(s)for(let e=s.Qa(),n=s.sl();e<=n;++e)for(let n=s.tl(),r=s.il();n<=r;++n){if(i&&i.Tl(e,n))continue;const s=this.IQ(e,n,!1);s&&(s.Zf(t),s.Au()&&this.TQ.Ru(e,n))}if(i)for(let e=i.Qa(),n=i.sl();e<=n;++e)for(let n=i.tl(),r=i.il();n<=r;++n)s&&s.Tl(e,n)||this.IQ(e,n,!0).SQ(t)}PQ(t,s){let i=this.CQ(t.Qa());const e=this._Q(t.tl()),n=this.CQ(t.sl()),r=this._Q(t.il());if(isFinite(n)&&isFinite(r))for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this.IQ(i,t,!1);e&&e.bQ(s)}}}}{const dG=self.Cs;dG.KNt=class extends dG.Vn{constructor(t,s,i){super(),this.fQ=t,this.Pa=s,this.Aa=i,this.dQ=dG.Un(dG.Lu)}qn(){this.dQ.qn(),this.dQ=null,this.fQ=null}Au(){return this.dQ.Au()}SQ(t){this.dQ.Bu(t)}Zf(t){this.dQ.Ru(t)}bQ(t){dG.On(t,this.dQ.Wu())}}}{const pG=self.Cs,mG=1e-6,gG=2;pG.ZNt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new pG.Rect,this.QNt=2,this.t$t=null,this.s$t=0,this.i$t=0,this.e$t=0,this.n$t=0,this.r$t=0,this.bt=0,this.h$t=1,this.o$t=0,this.a$t=1,this.l$t=0}u$t(){return this.QNt<1.000001}Bf(){this.QNt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.QNt=2,this.t$t=null,this.s$t=0,this.i$t=0,this.e$t=0,this.n$t=0,this.r$t=0,this.bt=0,this.h$t=1,this.o$t=0,this.a$t=1,this.l$t=0,this}c$t(){if(!1===this.u$t())return;const t=this.dx*this.QNt,s=this.dy*this.QNt,i=pG.sr(t,s),e=t/i,n=s/i;this.bt=i-mG,this.n$t=this.x1+e*this.bt,this.r$t=this.y1+n*this.bt,this.s$t=Math.atan2(this.e$t,this.i$t)+Math.PI/2,this.h$t=Math.cos(this.s$t),this.o$t=Math.sin(this.s$t);const r=e*this.h$t+n*this.o$t;if(this.a$t=e-2*this.h$t*r,this.l$t=n-2*this.o$t*r,r>0){const t=Math.PI;this.s$t=pG.Zn(this.s$t+t),this.h$t=-this.h$t,this.o$t=-this.o$t}}f$t(t,s,i,e,n){const r=pG.Jr(this.x1,this.y1,this.x2,this.y2,s,i,e,n);r>=0&&r<this.QNt&&(this.QNt=r,this.t$t=t.TH(),this.i$t=s-e,this.e$t=i-n)}JNt(t,s,i,e){const n=s+e.Qa(),r=s+e.sl(),h=i+e.tl(),o=i+e.il();this.f$t(t,n,h,r,h),this.f$t(t,r,h,r,o),this.f$t(t,r,o,n,o),this.f$t(t,n,o,n,h)}zNt(t,s){const i=s.$r(),e=s.Br(),n=s.Wr(),r=s.jr(),h=s.Vr(),o=s.Hr(),a=s.Ur(),l=s.qr();this.f$t(t,i,e,n,r),this.f$t(t,n,r,h,o),this.f$t(t,h,o,a,l),this.f$t(t,a,l,i,e)}qNt(t,s,i,e){const n=e.pu();for(let e=0,r=n.length;e<r;e+=2){const h=(e+2)%r,o=n[e]+s,a=n[e+1]+i,l=n[h]+s,u=n[h+1]+i;this.f$t(t,o,a,l,u)}}}}{const yG=self.Cs;yG._Nt=class{constructor(){this.d$t=new Map}qn(){for(const t of this.d$t.values())t.p$t.Pu();this.d$t.clear()}m$t(t){let s=this.d$t.get(t);return void 0===s&&(s={bV:null,p$t:new yG._u},this.d$t.set(t,s)),s}MV(t){const s=this.m$t(t);return null===s.bV&&(s.bV=t._V()),s.bV}iH(t,s,i,e){if(0!==e)return t.iH(s,i,e);const n=this.m$t(t);let r=n.p$t.qs(s,i);return void 0===r&&(r=t.iH(s,i,e),n.p$t.Set(s,i,r)),r}}}{const wG=self.Cs,SG=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),vG=new Set(["high","low"]),bG=self.ls,MG=bG.ds,xG=bG.ws,GG=MG.create(),TG=300,IG=200,CG=120,_G=8,EG=wG.Un(wG.El),PG=wG.Un(wG.Rect),AG=3e3,RG=200,OG=300;wG.g$t=class extends wG.Vn{constructor(t){super(),this.$c=t,this.y$t=[],this.w$t=!1,this.S$t=null,this.v$t=null,this.b$t=null,this.M$t="high-performance",this.x$t=!1,this.G$t="auto",this.T$t=0,this.I$t=0,this.C$t="",this._$t=0,this.E$t=0,this.P$t=0,this.A$t=0,this.R$t=0,this.O$t=0,this.rS="normalized",this.F$t=0,this.D$t=1,this.L$t=1e4,this.DS=!0,this.k$t=0,this.OD=0,this.FD=0,this.N$t="letterbox-scale",this.$$t="letterbox-scale",this.B$t=0,this.W$t=0,this.j$t=MG.create(),this.V$t="high",this.H$t=this.V$t,this.U$t=!1,this.q$t=[],this.z$t=new Set,this.J$t=self.C3_Shaders,this.Y$t=wG.Un(wG.Nw.kF,{OF:()=>[this.o3(),this.a3()],FF:()=>this.X$t(),DF:t=>this.K$t(t),getTime:()=>this.aB().DN(),LF:()=>this.aB().j$()}),this.Z$t=0,this.Q$t=0,this.tBt=NaN,this.sBt=null,this.iBt=new Map,this.eBt=NaN,this.nBt=new Map,this.rBt="",this.hBt=1,this.oBt=wG.Un(wG.Rect),this.aBt="",this.lBt=null,this.uBt=null,this.cBt=0,this.fBt=0,this.dBt=-1,this.pBt=0,this.mBt=t=>this.pBt=t.progress,this.gBt=null,this.yBt={wBt:null,SBt:null,vBt:null},this.bBt=0,this.MBt=0,this.xBt=0,this.GBt="fade-in",this.TBt=null,this.IBt=new Promise(t=>this.TBt=t)}CBt(t){this.M$t=t}_Bt(t){this.w$t=!!t}EBt(t){this.rS=t}PBt(){return this.rS}ABt(t){this.F$t=t}RBt(t,s){this.D$t=t,this.L$t=s}OBt(t){this.x$t=!!t}FBt(t){this.G$t=t}async co(t){let s=t.canvas;this.y$t.push({canvas:s,DBt:null}),this.$c.KH("runtime","window-resize",t=>this.LBt(t)),this.$c.KH("runtime","fullscreenchange",t=>this.kBt(t)),this.$c.KH("runtime","fullscreenerror",t=>this.NBt(t)),s.addEventListener("webglcontextlost",t=>this.$Bt(t)),s.addEventListener("webglcontextrestored",t=>this.BBt(t)),this.U$t=!!t.isFullscreen,this.C$t=t.cssDisplayMode;const i=navigator.gpu&&this.w$t;let e=!1;if(i)try{await this.WBt(!0)}catch(t){this.jBt("WebGPU",t),this.v$t=null}if(!this.gM())try{await this.VBt(!0)}catch(t){this.jBt("WebGL",t),this.S$t=null}if(this.gM()||(e=!0),!this.gM()&&i)try{await this.WBt(!1)}catch(t){this.jBt("WebGPU",t),this.v$t=null}if(!this.gM())try{await this.VBt(!1)}catch(t){this.jBt("WebGL",t),this.S$t=null}const n=this.gM();if(!n)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");n.Bb(e),this.v$t&&(this.v$t.HBt=()=>this.UBt(),this.v$t.qBt=()=>this.zBt()),"normalized"===this.rS?n.KS():(n.ZS(),n.YS(this.F$t)),this.BP(t.windowInnerWidth,t.windowInnerHeight,!0),await this.Bkt()}jBt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async WBt(t){const s={Zw:this.D$t,Qw:this.L$t};let i=!0;"no"===this.G$t?i=!1:"auto"===this.G$t&&(i=wG.Zs.hi);const e={powerPreference:this.M$t,depth:this.$c.l2(),failIfMajorPerformanceCaveat:t,JBt:this.$c.S3(),YBt:this.$c.XBt(),YA:this.$c.KBt(),ZBt:i};this.v$t=wG.Un(wG.Nw.QBt,s),await this.v$t.UT(this.y$t[0].canvas,e)}async VBt(t){const s={alpha:!0,powerPreference:this.M$t,JA:"xbox-uwp-webview2"!==this.$c.qB(),depth:this.$c.l2(),YA:this.$c.KBt(),failIfMajorPerformanceCaveat:t,Zw:this.D$t,Qw:this.L$t};this.x$t&&(s.XA=1),this.S$t=wG.Un(wG.Nw.QA,this.y$t[0].canvas,s),await this.S$t.$S()}async tWt(){if(this.J$t){const t=[];for(const[s,i]of Object.entries(this.J$t)){i.src=i.sWt;const e=wG.Nw.iWt.pC(this.v$t.ZT());t.push(this.v$t.rO(Object.assign({jT:e,name:s},i)))}await Promise.all(t)}}async eWt(){if(this.J$t){const t=[];for(const[s,i]of Object.entries(this.J$t)){let e;if(i.nWt&&this.S$t.PG()>=2)i.src=i.nWt,e=wG.Nw.BT.mC();else{if(!i.rWt)throw new Error(`shader '${s}' does not support WebGL 1`);i.src=i.rWt,e=wG.Nw.BT.pC()}t.push(this.S$t.rO(Object.assign({jT:e,name:s},i)))}await Promise.all(t),this.S$t.hO(),this.S$t.uv()}this.S$t.MF()&&(this.sBt=wG.Un(wG.Nw.NA,this.S$t))}async Bkt(){this.v$t?await this.tWt():this.S$t&&await this.eWt();const t=this.gM();t.Nb(this.DS),t.MF()&&(this.tBt=0);for(const s of this.$c.hWt()){for(const i of s._j())i.Bkt(t);s.Bkt(t),s.vz()}this.b$t=new self.pX(this.$c,t)}qn(){this.$c=null,this.S$t=null,this.y$t.length=0}qk(){return this.$c.qk()}LBt(t){const s=this.$c;if(s.oWt())return;const i=t.devicePixelRatio;this.qk()&&(self.devicePixelRatio=i),s.aWt(i),this.U$t=!!t.isFullscreen,this.C$t=t.cssDisplayMode,this.BP(t.innerWidth,t.innerHeight),s.j$();const e=new wG.Event("window-resize");e.data=t,s.Sf().Ef(e);const n=new wG.Event("resize");n.lWt=this.eW(),n.uWt=this.rW(),n.cWt=this.oW(),n.fWt=this.lW(),s.EZ(n),this.$c.O$()?.J3(),s.iU()&&(s.Myt()||self.eU.dWt())&&s.cL()}kBt(t){this.U$t=!!t.isFullscreen,this.BP(t.innerWidth,t.innerHeight,!0),this.$c.j$()}NBt(t){this.U$t=!!t.isFullscreen,this.BP(t.innerWidth,t.innerHeight,!0),this.$c.j$()}BP(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.T$t===t&&this.I$t===s&&!i)return;this.T$t=t,this.I$t=s;const e=this.pWt();"letterbox-scale"===e?this.mWt(t,s):"letterbox-integer-scale"===e?this.gWt(t,s):"off"===e?this.yWt(t,s):this.wWt(t,s),this.SWt(e);for(const{canvas:t}of this.y$t)t.width=this.P$t,t.height=this.A$t;this.$c.jc("canvas","update-size",{marginLeft:this.R$t,marginTop:this.O$t,styleWidth:this._$t,styleHeight:this.E$t,displayScale:this.vY()});const n=this.gM();n.BP(this.P$t,this.A$t,!0);for(const t of this.q$t)n.gF(t);wG.bh(this.q$t),this.vWt();const r=this.$c.p$();r.k6(),r.N6()}vWt(){this.gM().tv(this.j$t,this.o3()/this.a3())}l3(){return this.j$t}mWt(t,s){const i=this.$c.uW(),e=this.$c.Jk(),n=this.$c.Xk(),r=e/n;if(t/s>r){const i=s*r;this._$t=Math.round(i),this.E$t=s,this.R$t=Math.floor((t-this._$t)/2),this.O$t=0}else{const i=t/r;this._$t=t,this.E$t=Math.round(i),this.R$t=0,this.O$t=Math.floor((s-this.E$t)/2)}this.P$t=Math.round(this._$t*i),this.A$t=Math.round(this.E$t*i),this.$c.bWt(e,n)}gWt(t,s){const i=this.$c.uW();1!==i&&(t+=1,s+=1);const e=this.$c.Jk(),n=this.$c.Xk(),r=e/n;let h;h=t/s>r?s*r*i/e:t/r*i/n,h>1?h=Math.floor(h):h<1&&(h=1/Math.ceil(1/h)),this.P$t=Math.round(e*h),this.A$t=Math.round(n*h),this._$t=this.P$t/i,this.E$t=this.A$t/i,this.R$t=Math.max(Math.floor((t-this._$t)/2),0),this.O$t=Math.max(Math.floor((s-this.E$t)/2),0),this.$c.bWt(e,n)}wWt(t,s){const i=this.$c.uW();this._$t=t,this.E$t=s,this.P$t=Math.round(this._$t*i),this.A$t=Math.round(this.E$t*i),this.R$t=0,this.O$t=0;const e=this.vY();this.$c.bWt(this._$t/e,this.E$t/e)}yWt(t,s){const i=this.$c.uW();this._$t=this.$c.Z1(),this.E$t=this.$c.Q1(),this.P$t=Math.round(this._$t*i),this.A$t=Math.round(this.E$t*i),this.MWt()?(this.R$t=Math.floor((t-this._$t)/2),this.O$t=Math.floor((s-this.E$t)/2)):(this.R$t=0,this.O$t=0),this.$c.bWt(this.$c.Z1(),this.$c.Q1())}SWt(t){if("high"===this.V$t)this.OD=this.P$t,this.FD=this.A$t,this.H$t="high";else{let s,i;if("off"===this.pWt()?(s=this.$c.Z1(),i=this.$c.Q1()):(s=this.$c.Jk(),i=this.$c.Xk()),this.P$t<s||this.A$t<i)this.OD=this.P$t,this.FD=this.A$t,this.H$t="high";else if(this.OD=s,this.FD=i,this.H$t="low","scale-inner"===t){const t=s/i,e=this.T$t/this.I$t;e<t?this.OD=this.FD*e:e>t&&(this.FD=this.OD/e)}else if("scale-outer"===t){const t=s/i,e=this.T$t/this.I$t;e>t?this.OD=this.FD*e:e<t&&(this.FD=this.OD/e)}}}aB(){return this.$c}xWt(){return this.y$t[0].canvas}P0(){return this.Y$t}MWt(){return this.U$t}GWt(){return this.C$t}TWt(t){if(!SG.has(t))throw new Error("invalid fullscreen mode");this.N$t=t;const s=this.$c.p$();s.k6(),s.N6()}wY(){return this.N$t}IWt(t){if(!SG.has(t))throw new Error("invalid fullscreen mode");this.$$t=t;const s=this.$c.p$();s.k6(),s.N6()}CWt(){return this.$$t}pWt(){return this.MWt()?this.CWt():this.wY()}_Wt(t){if(!vG.has(t))throw new Error("invalid fullscreen scaling quality");this.V$t=t,this.$c.p$().k6()}EWt(){return this.V$t}v3(){return this.H$t}static PWt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}rY(){return this.T$t}hY(){return this.I$t}o3(){return this.OD}a3(){return this.FD}Nb(t){this.DS=!!t}AWt(t){this.k$t=t}hQ(){return this.k$t}RWt(){return this.gM().mA()}$Bt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.q$t=[],this.z$t.clear(),this.Y$t.BM(),this.S$t.BM(),this.$c.x4()}UBt(){console.log("[Construct] WebGPU device lost"),this.q$t=[],this.z$t.clear(),this.Y$t.BM(),this.$c.x4()}async BBt(t){await this.S$t.WM(),await this.Bkt(),await this.$c.OWt(),console.log("[Construct] WebGL context restored")}async zBt(){await this.Bkt(),await this.$c.OWt(),console.log("[Construct] WebGPU device restored")}FWt(){return this.S$t}DWt(){return this.v$t}gM(){return this.v$t||this.S$t}T$(){return this.b$t}YB(){let t="";return t=this.$c.DWt()?"webgpu":"webgl"+this.$c.FWt().PG(),this.$c.gM().Wb()&&(t+="-software"),t}KB(){return this.$c.DWt()?this.$c.DWt().LWt():this.$c.FWt().EF()}uH(){return"low"===this.H$t?1/this.$c.uW():this.vY()}vY(){const t=this.pWt();if("off"===t||"crop"===t)return 1;const s=this.$c.Jk(),i=this.$c.Xk(),e=s/i,n=this.P$t/this.A$t;return"scale-inner"!==t&&n>e||"scale-inner"===t&&n<e?this.E$t/i:this._$t/s}q3(){return"low"===this.v3()?1:this.vY()}H3(){return"low"===this.v3()?1:this.$c.uW()}kWt(t,s){this.B$t=t,this.W$t=s}hK(t,s,i,e=!0){s=s||this.OD,i=i||this.FD;const n=s/2+this.B$t,r=i/2+this.W$t;if(e){let e=this.l3();s===this.OD&&i===this.FD||(t.tv(GG,s/i),e=GG),t.aO(e)}const h=t.rv(n,r,t.WS(i),n,r,0,i);t.pO(h)}NWt(t,s=!0){const i=this.eW(),e=this.rW(),n=i/2,r=e/2;s&&t.aO(this.l3());const h=t.rv(n,r,t.WS(e),n,r,0,e);t.pO(h)}oW(){return this.P$t}lW(){return this.A$t}eW(){return this._$t}rW(){return this.E$t}QB(){return this.R$t}sW(){return this.O$t}r4(){return this.y$t.length}$Wt(){return"undefined"!=typeof OffscreenCanvas&&this.xWt()instanceof OffscreenCanvas&&("Chromium"!==wG.Zs.ni||wG.Zs.ei>=124)}async _4(t,s=!1){if(t<1)throw new Error("invalid HTML layer count");if(this.y$t.length===t)return;const i={count:t,layersDomState:this.$c.p$().c$().C1().filter(t=>t.TV()).map(t=>t.D2()),immediate:s,marginLeft:this.R$t,marginTop:this.O$t,styleWidth:this._$t,styleHeight:this.E$t};let e;if(e=this.qk()?await this.$c.H$("canvas","set-html-layer-count",i):self.c3_runtimeInterface._OnSetHTMLLayerCount(i),t<this.y$t.length)this.y$t.length=t;else for(const t of e.addedCanvases){t.width=this.P$t,t.height=this.A$t;const s=this.$Wt()?"bitmaprenderer":"2d",i=t.getContext(s);if(!i)throw new Error(`failed to acquire '${s}' canvas context`);this.y$t.push({canvas:t,DBt:i})}this.$c.j$()}w6(t){if(t>=this.y$t.length)return;const s=this.xWt(),i=this.y$t[t].DBt;this.$Wt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}b3(t){t.depth=this.$c.l2();const s=this.q$t,i=s.findIndex(s=>s.FT(t));let e;return-1!==i?(e=s[i],s.splice(i,1)):e=this.gM().cF(t),this.z$t.add(e),e}R0(t){if(!this.z$t.has(t))throw new Error("render target not in use");this.z$t.delete(t),this.q$t.push(t)}X$t(){const t={uG:this.$c.Kk()};return"low"===this.v3()&&(t.width=this.o3(),t.height=this.a3()),this.b3(t)}K$t(t){this.R0(t)}*BWt(){for(const t of this.$c.p$().F6())for(const s of t.Uj()){const t=this.iBt.get(s);t&&(yield t)}}d3(t){if(!this.gM().MF())return null;let s=this.iBt.get(t);return s||(s={MU:t,name:t.Pc(),WWt:wG.Un(wG.Nw.NA,this.S$t),jWt:0,VWt:0,HWt:0},this.iBt.set(t,s)),s.WWt}UWt(){const t=this.gM();if(t.MF()&&0===this.Q$t){this.Q$t=t.Lb(),this.eBt=NaN;for(const t of this.BWt())t.jWt=NaN}}qWt(){this.S$t&&this.S$t.MF()&&this.zWt(),this.v$t&&this.v$t.MF()&&this.JWt()}zWt(){if(isNaN(this.eBt)&&(this.eBt=this.sBt.UA(this.Z$t,this.Q$t),!isNaN(this.eBt))){if(this.$c.iU())for(const t of this.BWt())if(t.jWt=t.WWt.UA(this.Z$t,this.Q$t),isNaN(t.jWt))return;if(this.sBt.qA(this.Q$t),this.tBt=Math.min(this.eBt,1),this.$c.iU()){const t=new Map;for(const s of this.BWt())s.WWt.qA(this.Q$t),s.VWt=Math.min(s.jWt,1),t.set(s.MU,s.VWt);for(const s of this.BWt()){const i=s.MU,e=(t.get(i)||0)-i.pV().reduce((s,i)=>s+(t.get(i)||0),0);s.HWt=wG.Kn(e,0,1)}const s=this.$c.c$(),i=this.tBt-s.C1().reduce((s,i)=>s+(t.get(i)||0),0);self.eU.YWt(wG.Kn(i,0,1),this.tBt,[...this.BWt()])}this.Z$t=this.Q$t,this.Q$t=0}}XWt(){return this.sBt}JWt(){if(0===this.Q$t)return;for(let t=this.Z$t;t<this.Q$t;++t){const s=this.nBt.get(t);if(s&&!s.CA())return}const t=this.$c.c$(),s=wG.xo(t.Q5()+1,0);let i=0;for(let t=this.Z$t;t<this.Q$t;++t){const e=this.nBt.get(t);if(!e)continue;const n=e._A();let r=BigInt(0),h=BigInt(0);const o=BigInt(0);for(let t=0,i=Math.min(s.length,n.length/2);t<i;++t){const i=n[2*t],e=n[2*t+1];i!==o&&(r===o||i<r)&&(r=i),e>h&&(h=e);const a=Number(e-i)/1e9;s[t]+=a}i+=Number(h-r)/1e9}if(this.tBt=wG.Kn(i,0,1),this.$c.iU()){const i=t.Uj(),e=new Map;for(let t=0,n=Math.min(i.length,s.length-1);t<n;++t){const n=s[t+1];e.set(i[t],n)}const n=[],r=new Map;for(const[t,s]of e){const i=[...t.gV()].reduce((t,s)=>t+(e.get(s)||0),0);r.set(t,i),n.push({name:t.Pc(),HWt:wG.Kn(s,0,1),VWt:wG.Kn(i,0,1)})}const h=this.tBt-t.C1().reduce((t,s)=>t+(r.get(s)||0),0);self.eU.YWt(wG.Kn(h,0,1),this.tBt,n)}for(let t=this.Z$t;t<this.Q$t;++t)this.nBt.delete(t);this.Z$t=this.Q$t,this.Q$t=0}KWt(t){this.nBt.set(this.v$t.Lb(),t)}XN(){return this.tBt}X$(t,s,i,e,n,r){return this.rBt=t,this.hBt=s,this.oBt.Ua(i,e,n,r),this.lBt||(this.lBt=new Promise(t=>{this.uBt=t})),this.lBt}ZWt(){if(!this.rBt)return;let t=this.xWt();const s=this.oBt,i=wG.Kn(Math.floor(s.Qa()),0,t.width),e=wG.Kn(Math.floor(s.tl()),0,t.height);let n=s.width();n=0===n?t.width-i:wG.Kn(Math.floor(n),0,t.width-i);let r=s.height();if(r=0===r?t.height-e:wG.Kn(Math.floor(r),0,t.height-e),(0!==i||0!==e||n!==t.width||r!==t.height)&&n>0&&r>0){const s=wG.co(n,r);s.getContext("2d").drawImage(t,i,e,n,r,0,0,n,r),t=s}wG.fo(t,this.rBt,this.hBt).then(t=>{this.aBt&&URL.revokeObjectURL(this.aBt),this.aBt=URL.createObjectURL(t),this.lBt=null,this.uBt(t)}),this.rBt="",this.hBt=1}QWt(){return this.aBt}tjt(t){t?this.cBt++:this.cBt--}sjt(){return this.cBt>0}ijt(t){const s=this.gM();if(2===t)this.gBt=wG.Un(wG.Nw.Jb,this.gM()),this.gBt.gP("Arial"),this.gBt.yP(16),this.gBt.AP("center"),this.gBt.OP("center"),this.gBt.BP(300,200);else if(0===t){const t=this.$c.ejt();t&&t.KX(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.njt("splash-images/splash-logo.svg").then(t=>{"done"===this.GBt?s.ST(t):this.yBt.wBt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.rjt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.GBt?s.ST(t):this.yBt.SBt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.rjt("splash-images/splash-website-512.png").then(t=>{"done"===this.GBt?s.ST(t):this.yBt.vBt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async njt(t){t=new URL(t,this.$c.hjt()).toString();const s=await wG.no(t),i=await this.$c.ojt(s,2048,2048);return await this.gM().uF(i,{pG:"high"})}async rjt(t){t=new URL(t,this.$c.hjt()).toString();const s=await wG.no(t);return await this.gM().uF(s,{pG:"high"})}ajt(){this.$c.jc("runtime","hide-cordova-splash")}ljt(){this.fBt=Date.now(),this.$c.Sf().addEventListener("loadingprogress",this.mBt),this.dBt=requestAnimationFrame(()=>this.ujt()),3!==this.$c.cjt()&&this.ajt()}async fjt(){const t=this.gM();this.pBt=1;const s=this.$c.cjt();4===s&&await this.IBt,this.TBt=null,this.IBt=null,-1!==this.dBt&&(cancelAnimationFrame(this.dBt),this.dBt=-1),this.$c.Sf().removeEventListener("loadingprogress",this.mBt),this.mBt=null,this.gBt&&(this.gBt.qn(),this.gBt=null),this.$c.djt(),t.tF(),this.yBt.wBt&&(t.ST(this.yBt.wBt),this.yBt.wBt=null),this.yBt.SBt&&(t.ST(this.yBt.SBt),this.yBt.SBt=null),this.yBt.vBt&&(t.ST(this.yBt.vBt),this.yBt.vBt=null),t.QO(0,0,0,0),t.Fb(),this.GBt="done",this.Z$t=t.Lb(),3===s&&this.ajt()}ujt(){if(-1===this.dBt)return;const t=this.gM();t.tF(),this.dBt=-1;const s=this.$c._k()._Z(),i=this.$c.cjt();if(3!==i&&(this.NWt(t),t.QO(0,0,0,0),t.MO(),t.uv(),t.GO(null)),0===i)this.pjt(s);else if(1===i)this.mjt(s,120,0);else if(2===i)this.gjt(s);else if(3===i)wG.gh();else{if(4!==i)throw new Error("invalid loader style");this.yjt(s)}t.Fb(),this.dBt=requestAnimationFrame(()=>this.ujt())}gjt(t){t?this.gBt.PP(1,0,0):this.gBt.PP(.6,.6,.6),this.gBt.Vc(Math.round(100*this.pBt)+"%");const s=this._$t/2,i=this.E$t/2;EG.Nl(s-150,i-100,s+150,i+100);const e=this.gM();e.GO(this.gBt.TT()),e.sb(EG,this.gBt.yA())}mjt(t,s,i){const e=this.gM();e.gv(),t?e.vO(1,0,0,1):e.vO(.118,.565,1,1);const n=this._$t/2,r=this.E$t/2,h=s/2;PG.Ua(n-h,r-4+i,Math.floor(s*this.pBt),8),e.Rect(PG),PG.Ua(n-h,r-4+i,s,8),PG.offset(-.5,-.5),PG.fl(.5,.5),e.vO(0,0,0,1),e.hb(PG),PG.fl(1,1),e.vO(1,1,1,1),e.hb(PG)}pjt(t){const s=this.gM(),i=this.$c.ejt();if(!i)return void this.mjt(t,120,0);const e=i.TT();if(!e)return void this.mjt(t,120,0);const n=e.Vg(),r=e.Qg(),h=this._$t/2,o=this.E$t/2,a=n/2,l=r/2;EG.Nl(h-a,o-l,h+a,o+l),s.GO(e),s.El(EG),this.mjt(t,n,l+16)}yjt(t){const s=this.gM(),i=this.yBt.wBt,e=this.yBt.SBt,n=this.yBt.vBt,r=Date.now();0===this.bBt&&(this.fBt=r);const h=this.$c.wjt()||this.$c.Sjt()&&!this.$c.vjt(),o=h?0:200,a=h?0:3e3;let l=1;"fade-in"===this.GBt?l=Math.min((r-this.fBt)/300,1):"fade-out"===this.GBt&&(l=Math.max(1-(r-this.xBt)/300,0)),s.gv(),s.vO(.231*l,.251*l,.271*l,l),PG.set(0,0,this._$t,this.E$t),s.Rect(PG);const u=Math.ceil(this._$t),c=Math.ceil(this.E$t);let f,d;this.E$t>256?(s.vO(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),PG.Ua(0,.8*c-d/2,f,d),s.Rect(PG),t?s.vO(l,0,0,l):s.vO(.161*l,.953*l,.816*l,l),f=u*this.pBt,PG.Ua(.5*u-f/2,.8*c-d/2,f,d),s.Rect(PG),s.vO(l,l,l,l),s.uv(),e&&(f=1.5*wG.Kn(.22*c,105,.6*u),d=f/8,PG.Ua(.5*u-f/2,.2*c-d/2,f,d),s.GO(e),s.Rect(PG)),i&&(f=Math.min(.395*c,.95*u),d=f,PG.Ua(.5*u-f/2,.485*c-d/2,f,d),s.GO(i),s.Rect(PG)),n&&(f=1.5*wG.Kn(.22*c,105,.6*u),d=f/8,PG.Ua(.5*u-f/2,.868*c-d/2,f,d),s.GO(n),s.Rect(PG))):(s.vO(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),PG.Ua(0,.85*c-d/2,f,d),s.Rect(PG),t?s.vO(l,0,0,l):s.vO(.161*l,.953*l,.816*l,l),f=u*this.pBt,PG.Ua(.5*u-f/2,.85*c-d/2,f,d),s.Rect(PG),s.vO(l,l,l,l),s.uv(),i&&(f=.55*c,d=f,PG.Ua(.5*u-f/2,.45*c-d/2,f,d),s.GO(i),s.Rect(PG))),this.bBt++,"fade-in"===this.GBt&&r-this.fBt>=300&&this.bBt>=2&&(this.GBt="wait",this.MBt=r),"wait"===this.GBt&&r-this.MBt>=a&&this.pBt>=1&&(this.GBt="fade-out",this.xBt=r),("fade-out"===this.GBt&&r-this.xBt>=300+o||h&&this.pBt>=1&&r-this.fBt<500)&&this.TBt()}}}{const FG=self.Cs,DG=self.eU,LG=self.assert,kG=self.RY,NG={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""};let $G=!0;FG.bjt=class extends FG.Vn{constructor(t){t=Object.assign({},NG,t),super(),this.Mjt=t.messagePort,this.xjt=t.runtimeBaseUrl,this.Gjt=t.previewUrl,this.Tjt=!!t.headless,this.Ijt=!!t.hasDom,this.Cjt=!!t.isInWorker,$G=t.ife,this._jt=!!t.useAudio,this.Ejt=t.exportType,this.Pjt=t.isNWjs,this.CK=!!t.isiOSCordova,this.Ajt=!!t.isiOSWebView,this.Rjt=!!t.isWindowsWebView2,this.Ojt=!!t.isAnyWebView2Wrapper,this.Fjt=!!t.isFBInstantAvailable,this.Djt=!("preview"!==this.Ejt||!t.isDebug),this.Ljt=this.Djt,this.kjt=this.Djt,this.Njt=0,this.$jt=[],this.Bjt=[],this.Wjt=!1,this.jjt="",this.Vjt="",this.Hjt="",this.Ujt="",this.qjt=0,this.zjt=0,this.Jjt=0,this.jD=self.devicePixelRatio,this.Yjt=0,this.Xjt=0,this.Kjt=0,this.Zjt=0,this.Qjt=0,this.tVt=!1,this.Sw=!0,this.sVt=!1,this.iVt=!1,this.eVt=!1,this.nVt=null,this.qZ=FG.Un(FG.xK,this,t),this.l5=FG.Un(FG.I6,this),this.qpt=FG.Un(FG.Vmt,this),this.rVt=FG.Un(FG.mW,this,t.wrapperComponentIds),this.hVt=FG.Un(FG.hNt,this),this.itt=FG.Un(FG.B6,this),this.oVt=FG.Un(FG.fct,this),this.aVt=FG.Un(FG.pct,this),this._ct=FG.Un(FG.Mct,this),this.pw=FG.Un(FG.sw,{rw:t=>this.lVt(t),ow:t=>this.uVt(t)}),this.cVt=new Map,this.fVt=[],this.dVt=new Map,this.pVt=new Map,this.mVt=0,this.gVt=[],this.yVt=new Set,this.wVt=[],this.SVt=[],this.vVt=new Map,this.bVt=!1,this.MVt=!1,this.xVt=0,this.GVt=0,this.TVt=new Map,this.IVt=new Set,this.CVt=new Set,this._Vt=[],this.EVt=[],this.PVt=null,this.AVt=!1,this.RVt="vsync",this.MG="trilinear",this.OVt=!1,this.FVt=!0,this.DVt=!1,this.LVt=!1,this.kVt=null,this.NVt={$Vt:t=>{this.dBt=-1,this.BVt=-1,this.c7(t)},WVt:t=>{this.BVt=-1,this.c7(t,!1,"skip-render")},jVt:()=>{this.dBt=-1,this.cL()}},this.dBt=-1,this.BVt=-1,this.VVt=0,this.HVt=0,this.UVt=!1,this.qVt=!1,this.zVt=!1,this.JVt=!0,this.YVt=!0,this.XVt=!1,this.KVt=0,this.ZVt=new FG.Ud(1),this.QVt=()=>Math.random(),this.tHt=0,this.sHt=0,this.iHt=0,this.eHt=0,this.nHt=0,this.ROt=1,this.rHt=1/30,this.hHt=0,this.oHt=FG.Un(FG.td),this.aHt=FG.Un(FG.td),this.lHt=FG.Un(FG.td),this.uHt=new Map,this.cHt=-1,this.fHt=0,this.dHt=0,this.pHt=-1,this.mHt=0,this.gHt=0,this.yHt=0,this.wHt=!1,this.SHt="",this.vHt=!1,this.bHt="",this.cU=null,this.MHt="",this.xHt=null,this.GHt=null,this.DAt=FG.Un(FG.Event.Sf),this.THt=new Map,this.IHt=new Map,this.CHt=0,this._Ht=!1,this.EHt=!1,this.PHt=!1,this.AHt=[],this.RHt={pretick:FG.Un(FG.Event,"pretick",!1),tick:FG.Un(FG.Event,"tick",!1),tick2:FG.Un(FG.Event,"tick2",!1),instancecreate:FG.Un(FG.Event,"instancecreate",!1),instancedestroy:FG.Un(FG.Event,"instancedestroy",!1),beforelayoutchange:FG.Un(FG.Event,"beforelayoutchange",!1),layoutchange:FG.Un(FG.Event,"layoutchange",!1)},this.RHt.instancecreate.dz=null,this.RHt.instancedestroy.dz=null,this.j0=FG.Un(FG.Event.Sf),this.OHt=null;const s=(t,s)=>FG.POt.Ckt(this,t,s);this.FHt=FG.Un(FG.ud,s),this.DHt=FG.Un(FG.ud,s),this.LHt=FG.Un(FG.ud,s),this.kHt=FG.Un(FG.NHt,this,t.jobScheduler),t.canvas&&(this.PVt=FG.Un(FG.g$t,this)),this.Mjt.onmessage=t=>this._OnMessageFromDOM(t.data),this.KH("runtime","visibilitychange",t=>this.$Ht(t)),this.KH("runtime","wrapper-extension-message",t=>this.BHt(t)),this.KH("runtime","get-remote-preview-status-info",()=>this.WHt()),this.KH("runtime","js-invoke-function",t=>this.ygt(t)),this.KH("runtime","go-to-last-error-script",self.goToLastErrorScript),this.KH("runtime","offline-audio-render-completed",t=>this.jHt(t)),this.DAt.addEventListener("window-blur",t=>this.VHt(t)),this.DAt.addEventListener("window-focus",()=>this.HHt()),this.itt.S8(),this.aVt.S8(),this.UHt=null,this.qHt=new WeakMap,this.zHt={keyboard:null,M$:null,x$:null,G$:null},this.JHt=new WeakMap,this.YHt=[]}static UT(t){return FG.Un(FG.bjt,t)}qn(){FG.bh(this.fVt),this.dVt.clear(),this.pVt.clear(),this.l5.qn(),this.l5=null,this.qpt.qn(),this.qpt=null,this.rVt.qn(),this.rVt=null,this.qZ.qn(),this.qZ=null,this.hVt.qn(),this.hVt=null,this.itt.qn(),this.itt=null,this.oVt.qn(),this.oVt=null,this.aVt.qn(),this.aVt=null,this._ct.qn(),this._ct=null,this.pw.qn(),this.pw=null,this.PVt&&(this.PVt.qn(),this.PVt=null),this.DAt.qn(),this.DAt=null,this.XHt=null}_OnMessageFromDOM(t){const s=t.type;if("event"===s)this.KHt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.ZHt(t)}}KHt(t){if(!this.PHt)return void this.AHt.push(t);const s=t.component,i=t.handler,e=t.data,n=t.dispatchOpts,r=!(!n||!n.dispatchRuntimeEvent),h=!(!n||!n.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const t=new FG.Event(i);t.data=e,this.DAt.Ef(t)}if(h){const t=new FG.Event(i,!0);for(const[s,i]of Object.entries(e))t[s]=i;this.EZ(t)}}const a=this.THt.get(s);if(!a)return void(r||h||console.warn(`[Runtime] No DOM event handlers for component '${s}'`));const l=a.get(i);if(!l)return void(r||h||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`));let u=null;try{u=l(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.QHt(o,!1,""+t))}null!==o&&(u&&u.then?u.then(t=>this.QHt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.QHt(o,!1,""+t)}):this.QHt(o,!0,u))}QHt(t,s,i){this.Mjt.postMessage({type:"result",responseId:t,isOk:s,result:i})}ZHt(t){const s=t.responseId,i=t.isOk,e=t.result,n=this.IHt.get(s);i?n.resolve(e):n.reject(e),this.IHt.delete(s)}KH(t,s,i){let e=this.THt.get(t);if(e||(e=new Map,this.THt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}jc(t,s,i,e){this.Mjt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}H$(t,s,i,e){const n=this.CHt++,r=new Promise((t,s)=>{this.IHt.set(n,{resolve:t,reject:s})});return this.Mjt.postMessage({type:"event",component:t,handler:s,data:i,responseId:n},e),r}VY(t,s,i,e=-1){this.jc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}HY(t,s,i){const e=this.CHt++,n=new Promise((t,s)=>{this.IHt.set(e,{resolve:t,reject:s})});return this.VY(t,s,i,e),n}BHt(t){if(-1!==t.asyncId){const s=t.asyncId;this.IHt.get(s).resolve(t.params),this.IHt.delete(s)}else this.KHt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}mU(t,s,i){this.KH("wrapper-extension:"+t,s,i)}dU(t){return this.rVt.dU(t)}tUt(t){if(!this.iU())throw new Error("not in debug mode");this.jc("runtime","post-to-debugger",t)}async DOt(t){FG.rTt(this),this.iU()?await DG.DOt(this):self.eU&&self.eU.sUt(this);const s=await this.qZ.eo("data.json");if(await this.iUt(s),await this.eUt(t),this.wjt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.FWt()){const t=this.FWt();console.info(`[C3 runtime] Hosted in ${this.qk()?"worker":"DOM"}, rendering with WebGL ${t.PG()} [${t.EF()}]`)}else this.DWt()&&console.info(`[C3 runtime] Hosted in ${this.qk()?"worker":"DOM"}, rendering with WebGPU [${this.DWt().LWt()}]`);this.gM().Wb()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.PHt=!0;for(const t of this.AHt)this.KHt(t);FG.bh(this.AHt),this.PVt&&this.PVt.ljt();for(const s of t.runOnStartupFunctions)this.$jt.push(this.nUt(s));if(await Promise.all([this.qZ.IZ(),...this.$jt]),FG.bh(this.$jt),!this.qZ._Z())return this.PVt&&await this.PVt.fjt(),await this.DAt.Cf(new FG.Event("beforeruntimestart")),await this.tF(),this.Mjt.postMessage({type:"runtime-ready"}),this;this.PVt&&this.PVt.ajt()}async nUt(t){try{await t(this.UHt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async iUt(t){const s=t.project;this.jjt=s[0],this.Vjt=s[16],this.Hjt=s[31],this.Ujt=s[38],this.qjt=s[36];const i=s[39]||"loading-logo.png";this.OVt=!!s[9],this.zjt=this.Kjt=s[10],this.Jjt=this.Zjt=s[11],this.hVt.XNt(this.zjt,this.Jjt),this.Yjt=this.zjt/2,this.Xjt=this.Jjt/2,this.RVt=s[37],this.AVt=!!s[40],this.MG=s[14],this.sVt=s[15],this.iVt=s[42],this.eVt=s[17],this.tVt=!!s[18],this.Qjt=s[19],this.GVt=s[21],this.DVt=s[22];const e=this.qZ;if(e.tZ(s[45]),e.LZ(s[7],s[25]),e.iZ(s[8]),e.eZ(s[32]),e.rZ(s[28]),e.RZ(s[29]),0===this.Qjt){let t="";t="flat"===e.gB()?e.hZ()+i:i,t&&(this.nVt=e.yZ({url:t}))}this.PVt&&(this.PVt.TWt(FG.g$t.PWt(s[12])),this.PVt._Wt(s[23]?"high":"low"),this.PVt.Nb(0!==s[24]),this.PVt.CBt(s[34]),this.PVt.AWt(s[41]),this.PVt._Bt(s[13]),this.PVt.EBt(s[30]),this.PVt.RBt(s[46],s[47]),this.PVt.ABt(s[26]),this.PVt.OBt(s[48]),this.PVt.FBt(s[50]));const n=s[43];n&&await this.rUt(n),this.hUt(),this.rVt.vPt(),this._Vt=self.oUt();const r=s[2];for(const t of r[1])this.rVt.bPt(t);for(const t of r[0])this.rVt.SPt(t);this._Vt=self.oUt(),this.aUt(),this.rVt.CPt();for(const t of s[3]){const s=FG.Sct.UT(this,this.fVt.length,t);this.fVt.push(s),this.dVt.set(s.Pc().toLowerCase(),s),this.pVt.set(s._1(),s)}for(const t of s[4])this.fVt[t[0]].SRt(t);for(const t of s[27]){const s=t.map(t=>this.fVt[t]);this.gVt.push(FG.Un(FG.SOt,this,s))}this.lUt();for(const t of this.fVt)t.bRt();for(const t of s[5])this.l5.UT(t);const h=s[1];if(h){const t=this.l5.E6(h);t&&this.l5.C6(t)}for(const t of s[35])this.oVt.UT(t);for(const t of s[33])this.itt.UT(t);for(const t of s[44])this.aVt.UT(t);this.aVt.yct()||(this.aVt.qn(),this.aVt=null);for(const t of s[49])this._ct.UT(t);this._ct.Ict()||(this._ct.qn(),this._ct=null);for(const t of s[6])this.qpt.UT(t);this.qpt.vgt(),this.uUt(),FG.bh(this._Vt),this.mj();let o="any";const a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.jc("runtime","set-target-orientation",{targetOrientation:o})}async rUt(t){const s=t.format;"image-sequence"===s?this.kVt=new self.cUt(this,t):"image-sequence-gif"===s?this.kVt=new self.fUt(this,t):"webm"===s?this.kVt=new self.dUt(this,t):"mp4"===s&&(this.kVt=new self.pUt(this,t)),this.RVt="unlimited-frame",this.PVt.TWt("off"),this.jD=1,self.devicePixelRatio=1,await this.H$("runtime","set-exporting-to-video",{message:this.kVt.mUt(0),duration:this.kVt.jz()})}cjt(){return this.Qjt}oWt(){return null!==this.kVt}gUt(){return this.kVt.jz()}yUt(){return this.kVt.wUt()}SUt(){return this.kVt.DOt({width:this.PVt.oW(),height:this.PVt.lW()})}vUt(){const t=this.VVt/this.yUt();return this.kVt.bUt(this.PVt.xWt(),t)}MUt(){this.kVt&&this.kVt.$et()}jHt(t){this.kVt.xUt(t)}GUt(){return this.kVt.Fb()}Sjt(){return this.Fjt}Tw(){return this.Sw}J$(t){this.$jt.push(t)}P4(t){this.Wjt=!!t}TUt(t){this.Wjt&&this.Bjt.push(t)}L4(){return this.Bjt}fRt(){return this.mVt++}xRt(){return this.mVt}Lkt(t){this.yVt.add(t)}kkt(t){this.yVt.delete(t)}hWt(){return this.yVt}async eUt(t){this.PVt&&(await this.PVt.co(t),this.PVt.ijt(this.Qjt))}async tF(){this.UVt=!0,this.tHt=Date.now();let t=null;const s=new Promise(s=>t=s);if(this.tVt){for(const t of this.fVt)t.v1()||t.RRt()||!t.bW()||t.v_t();(async()=>{await this.qZ.IZ(),await s,this.Sw=!1,this.IUt()})()}else this.Sw=!1;this.qZ.CZ(),this.iU()&&DG.CUt($G);for(const t of this.l5.y$())t.Z4();this.oWt()&&await this.SUt();const i=this.l5._6();await i.d4(null,this.gM()),await i.G4(!0),this.fHt=performance.now(),t(),this.tVt||this.IUt(),(await this.H$("runtime","before-start-ticking")).isSuspended&&!this.oWt()?(this.KVt++,this.XVt=!0):this.c7()}IUt(){this.JH(FG.sB.tB.Q$._Ut,null,null),this.jc("runtime","register-sw")}xbt(t){t=Math.floor(t);const s=this._Vt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}aUt(){for(const t of self.EUt){const s=FG.Bh(Object.keys(t));this.EVt.push(s)}}Hgt(t){t=Math.floor(t);const s=this.EVt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}PUt(){return this.Ijt}AUt(){return this.Tjt}qk(){return this.Cjt}hjt(){return this.xjt}RUt(){return this.Gjt}aN(){return this.qpt}bN(){return this.qpt.bN()}Fgt(){return this.qpt.Fgt()}pN(){return this.qpt.pN()}Dgt(){return this.qpt.Dgt()}eTt(){return 0===this.Fgt().cmt()}kgt(){return this.qpt.kgt()}Tkt(){return this.rVt}AZ(){return this.rVt.AZ()}J0(t){if((t=Math.floor(t))<0||t>=this.fVt.length)throw new RangeError("invalid index");return this.fVt[t]}OUt(t){return this.dVt.get(t.toLowerCase())||null}QY(t){return this.pVt.get(t)||null}yht(t){const s=FG.mW.kW(t);return s?s.WW():null}S1(){return this.fVt}*FUt(){for(const t of this.fVt)t.v1()||(yield*t.JW())}Sf(){return this.DAt}nN(){return this.j0}EZ(t){t.runtime=this.gW();const s=this.iU()&&!this.qpt.dj();s&&DG.M6(),this.j0.dispatchEvent(t),s&&DG.x6()}U4(t){return t.runtime=this.gW(),this.j0.Cf(t)}Jk(){return this.zjt}Xk(){return this.Jjt}DUt(t,s){if(this.zjt===t&&this.Jjt===s)return;this.zjt=t,this.Jjt=s;const i=this.p$();i.k6(),i.N6()}Z1(){return this.Kjt}Q1(){return this.Zjt}bWt(t,s){if(this.Kjt===t&&this.Zjt===s)return;this.Kjt=t,this.Zjt=s;const i=this.p$();i.k6(),i.N6()}aWt(t){this.oWt()||(this.jD=t)}uW(){return this.jD}t3(){return this.Yjt}s3(){return this.Xjt}I$(){return this.PVt}o3(){return this.PVt?this.PVt.o3():this.Kjt}a3(){return this.PVt?this.PVt.a3():this.Zjt}uH(){return this.PVt?this.PVt.uH():1}vY(){return this.PVt?this.PVt.vY():1}q3(){return this.PVt?this.PVt.q3():1}H3(){return this.PVt?this.PVt.H3():1}QB(){return this.PVt?this.PVt.QB():0}sW(){return this.PVt?this.PVt.sW():0}LUt(){return this.PVt?this.PVt.eW():0}kUt(){return this.PVt?this.PVt.rW():0}wY(){return this.PVt?this.PVt.wY():"off"}b3(t){return this.PVt?this.PVt.b3(t):null}R0(t){this.PVt&&this.PVt.R0(t)}S3(){return this.sVt}XBt(){return this.iVt}KBt(){return this.eVt}XN(){return this.PVt?this.PVt.XN():NaN}CT(){return"nearest"!==this.Kk()}ZN(){return this.RVt}QN(t){this.RVt!==t&&(this.RVt=t,-1===this.dBt&&-1===this.BVt||(this.NUt(),this.$Ut()))}Kk(){return this.MG}gRt(){return this.tVt}ejt(){return this.nVt}djt(){this.nVt&&(this.nVt.aP(),this.nVt.qn(),this.nVt=null)}p$(){return this.l5}c$(){return this.l5.c$()}Vtt(){return this.itt}BUt(){return this.oVt}cFt(){return this.aVt}Yct(){return this._ct}_k(){return this.qZ}yZ(t){return this.qZ.yZ(t)}lj(t,s,i,e,n,r){if(r&&this.aVt){if(t instanceof FG.Sct&&t.v1()){const h=t.xj(),o=Math.floor(this.u$()*h.length);return this.lj(h[o],s,i,e,n,r)}const h=this.aVt.wct(t,r);if(h){const t=this.e1(h,s,!1,i,e,!1,n,void 0,n);return this.aVt.vct(t,r),t}}return this.e1(t,s,!1,i,e,!1,n,void 0,n)}e1(t,s,i,e,n,r,h,o,a){let l=null,u=null;if(t instanceof FG.Sct){if(u=t,u.v1()){const t=u.xj();u=t[Math.floor(this.u$()*t.length)]}l=u.X0()}else l=t,u=this.J0(l[1]);const c=u.qW().bW();if(this.Sw&&c&&!u.RRt())return null;const f=s;let d;c||(s=null),d=i&&!r&&l&&!this.TVt.has(l[2])?l[2]:this.GVt++;const p=l?l[0]:null,m=FG.Un(FG.Instance,{runtime:this,objectType:u,MU:s,FOt:p,NOt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.TVt.set(d,m);let g=null;if(c&&(g=m.D$(),void 0!==e&&void 0!==n&&(g.XM(e),g.QM(n)),u.rOt(!0)),s&&(a||s.n1(m,!0),s.m$().g4(u)),this.xVt++,u.xH()&&!i&&!r){const t=new Set;for(const s of u.c4().Gj()){if(s===u)continue;const i=this.WUt(s,g,t);if(i){const t=this.e1(i,f,!1,g?g.YM():e,g?g.ZM():n,!0,!1,void 0,a);m.X4(t)}else{const t=this.e1(s,f,!1,g?g.YM():e,g?g.ZM():n,!0,!1,void 0,a);m.X4(t)}}for(const t of m.GH()){t.X4(m);for(const s of m.GH())t!==s&&t.X4(s)}}if(c&&!i&&h&&this.jUt(m,p,g,s,e,n,a),u.xH()&&!i&&!r&&h)for(const t of m.GH()){const i=t.D$();if(!i)continue;const e=t.qW(),n=t.fH().X0()[0];e.bW()?this.jUt(t,n,i,s,i.YM(),i.ZM(),a):this.jUt(t,n,i,s,void 0,void 0,a)}if(!r&&h){void 0===e&&(e=p[0]),void 0===n&&(n=p[1]);const t=g.oq(),s=e-g.YM()+t.YM(),i=n-g.ZM()+t.ZM();t.GU(s,i)}u.tOt();const y=l?FG.Oh(l[5]):null,w=l?l[4].map(t=>FG.Oh(t)):null,S=c&&p&&p[13];if(S&&m.HOt(),m.PRt(y,w),S){const t=p[13];m.iz().k_t(t[2],t[0],t[1])}this.SVt.push(m),this.bVt=!0,this.iU()&&DG.VUt(m);const v=this.RHt.instancecreate;return v.dz=m,this.DAt.dispatchEvent(v),m}wDt(t){const s=t[0],i=t[1],e=t[2],n=t[6];return n||this.l5.P6(s).L$(i).Q0(e)}WUt(t,s,i){const e=s?.uFt()??[];for(const s of e){const e=this.wDt(s),n=!!s[4],r=this.J0(e[1]);if(!i.has(e)&&t===r&&n)return i.add(e),e}}jUt(t,s,i,e,n,r,h){const o=i.WLt(),a=i.uFt();if(t.D$().jLt(o),!a)return;void 0===n&&(n=s[0]),void 0===r&&(r=s[1]);const l=new Set,u=s[0],c=s[1];for(const s of a){const i=s[0],o=s[1],a=s[2],f=s[3],d=!!s[4],p=s[5],m=s[6];let g;g=m||this.l5.P6(i).L$(o).Q0(a);const y=this.J0(g[1]),w=t.dFt(y),S=l.has(y);if(w&&!S&&d){const s=t.pFt(y);s.D$().DOt(g[0]);const i=n+g[0][0]-u,e=r+g[0][1]-c;s.D$().GU(i,e),s.D$().jLt(p),t.gq(s,{bq:!!(1&f),xq:!!(f>>1&1),Tq:!!(f>>2&1),Cq:!!(f>>3&1),Eq:!!(f>>4&1),kq:!!(f>>5&1),Aq:!!(f>>6&1),Oq:!!(f>>7&1),Dq:!!(f>>8&1)}),l.add(y)}else{const s=n+g[0][0]-u,i=r+g[0][1]-c,o=this.e1(g,e,!1,s,i,!1,!0,t,h);o.D$().jLt(p),t.gq(o,{bq:!!(1&f),xq:!!(f>>1&1),Tq:!!(f>>2&1),Cq:!!(f>>3&1),Eq:!!(f>>4&1),kq:!!(f>>5&1),Aq:!!(f>>6&1),Oq:!!(f>>7&1),Dq:!!(f>>8&1)})}}}wH(t){if(this.IVt.has(t))return;const s=t.fH();let i=this.vVt.get(s);if(i){if(i.has(t))return;i.add(t)}else i=new Set,i.add(t),this.vVt.set(s,i);if(this.iU()&&DG.HUt(t),t.qOt(),this.bVt=!0,t.xH())for(const s of t.GH())this.wH(s);for(const s of t.children())s.Nq()&&this.wH(s);if(!this.l5.pj()&&!this.wHt){const s=this.aN();s.cj(!0),t.IFt(),s.cj(!1)}t.CFt(this.l5.pj())}mj(){this.bVt&&(this.MVt=!0,this.UUt(),this.qUt(),this.MVt=!1,this.bVt=!1,this.j$())}UUt(){for(const t of this.SVt){const s=t.fH();s.n1(t);for(const i of s.yj())i.n1(t),i.tOt()}FG.bh(this.SVt)}qUt(){this.DAt.ff(!0);for(const[t,s]of this.vVt.entries())this.zUt(t,s),s.clear();this.vVt.clear(),this.DAt.ff(!1)}zUt(t,s){for(const t of s){const s=this.RHt.instancedestroy;s.dz=t,this.DAt.dispatchEvent(s),this.TVt.delete(t.TH()),this.uHt.delete(t);const i=t.D$();i&&(i.qLt(),i.l1(),i.qOt()),this.IVt.add(t),this.xVt--}FG.Ph(t.ej(),s),t.tOt(),this.CVt.add(t);for(const i of t.yj())FG.Ph(i.ej(),s),i.tOt(),this.CVt.add(i);if(t.qW().bW()){const t=new Set([...s].map(t=>t.D$().L$()));for(const i of t)i._2(s)}}iOt(){return this.SVt}*aIt(t){for(const s of this.iOt())t.v1()?s.fH().nTt(t)&&(yield s):s.fH()===t&&(yield s)}ERt(){return this.GVt++}ARt(t,s){this.TVt.set(t,s)}JY(t){t=!!t,this.YVt!==t&&(this.YVt=!!t,this.YVt&&this.XVt&&(this.KY(!1),this.XVt=!1))}YY(){return this.YVt}x4(){this.DAt.dispatchEvent(FG.Un(FG.Event,"renderercontextlost")),this.KY(!0);for(const t of this.fVt)!t.v1()&&t.ORt()&&t.b4();const t=this.c$();t&&t.x4(),FG.PPt.rQ(),FG.vZ.rQ()}async OWt(){await this.c$().d4(null,this.gM()),this.DAt.dispatchEvent(FG.Un(FG.Event,"renderercontextrestored")),this.KY(!1),this.j$()}$Ht(t){if(!this.YVt)return;const s=t.hidden;this.KY(s),this.XVt=s,s||this.j$()}VHt(t){this.wjt()&&this.DVt&&!FG.Zs.oi&&(t.data.parentHasFocus||(this.KY(!0),this.LVt=!0))}HHt(){this.LVt&&(this.KY(!1),this.LVt=!1)}$Ut(){const t=this.NVt;"vsync"===this.RVt?-1===this.dBt&&(this.dBt=self.requestAnimationFrame(t.$Vt)):"unlimited-tick"===this.RVt?(-1===this.BVt&&(this.BVt=FG.Uh(t.WVt)),-1===this.dBt&&(this.dBt=self.requestAnimationFrame(t.jVt))):-1===this.BVt&&(this.BVt=FG.Uh(t.$Vt))}NUt(){-1!==this.dBt&&(self.cancelAnimationFrame(this.dBt),this.dBt=-1),-1!==this.BVt&&(FG.qh(this.BVt),this.BVt=-1)}EN(){return this.KVt>0}KY(t){if(this.oWt())return;const s=this.EN();this.KVt+=t?1:-1,this.KVt<0&&(this.KVt=0);const i=this.EN();if(!s&&i)console.log("[Construct] Suspending"),this.NUt(),this.DAt.dispatchEvent(FG.Un(FG.Event,"suspend")),this.EZ(FG.Un(FG.Event,"suspend")),this.JH(FG.sB.tB.Q$.JUt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const t=performance.now();this.sHt=t,this.fHt=t,this.cHt=0,this.dHt=0,this.pHt=0,this.mHt=0,this.yHt=0,this.gHt=0,this.DAt.dispatchEvent(FG.Un(FG.Event,"resume")),this.EZ(FG.Un(FG.Event,"resume")),this.JH(FG.sB.tB.Q$.YUt,null,null),this.Myt()||this.c7(t)}}DY(t){this.FHt.Bu(t)}$Y(t){this.DHt.Bu(t)}kY(t){this.LHt.Bu(t)}LY(t){this.FHt.Zf(t)}BY(t){this.DHt.Zf(t)}NY(t){this.LHt.Zf(t)}XUt(t,s){const i=s?performance.now():0;let e;return t instanceof kG?(e=t.nU(),s&&DG.KUt(t.behavior,performance.now()-i)):(e=t.c7(),s&&DG.KUt(t.lz(),performance.now()-i)),e}ZUt(){const t=this.iU();this.FHt.Vd(!0);for(const s of this.FHt)this.XUt(s,t);this.FHt.Vd(!1)}QUt(t,s){const i=s?performance.now():0;let e;return t instanceof kG?(e=t.jY(),s&&DG.KUt(t.behavior,performance.now()-i)):(e=t.aPt(),s&&DG.KUt(t.lz(),performance.now()-i)),e}tqt(){const t=this.iU();this.DHt.Vd(!0);for(const s of this.DHt)this.QUt(s,t);this.DHt.Vd(!1)}sqt(t,s){const i=s?performance.now():0;let e;return t instanceof kG?(e=t.oU(),s&&DG.KUt(t.behavior,performance.now()-i)):(e=t.nEt(),s&&DG.KUt(t.lz(),performance.now()-i)),e}iqt(){const t=this.iU();this.LHt.Vd(!0);for(const s of this.LHt)this.sqt(s,t);this.LHt.Vd(!1)}*eqt(){const t=this.iU();this.FHt.Vd(!0);for(const s of this.FHt){const i=this.XUt(s,t);FG.Mo(i)&&(yield*i)}this.FHt.Vd(!1)}*nqt(){const t=this.iU();this.DHt.Vd(!0);for(const s of this.DHt){const i=this.QUt(s,t);FG.Mo(i)&&(yield*i)}this.DHt.Vd(!1)}*rqt(){const t=this.iU();this.LHt.Vd(!0);for(const s of this.LHt){const i=this.sqt(s,t);FG.Mo(i)&&(yield*i)}this.LHt.Vd(!1)}async c7(t,s,i){this.zVt=!0;const e="background-wake"===i,n="background-wake"!==i&&"skip-render"!==i,r=this.p$(),h=this.I$();if(!this.UVt||this.EN()&&!s&&!e)return;const o=performance.now();this.qVt=!0,this.hqt(t||0),this.pHt++,this.oqt();const a=this.aqt();this.eIt()&&await a;const l=this.DAt._f(this.RHt.pretick);l instanceof Promise&&await l,this.EZ(this.OHt.pretick);const u=this.lqt();this.eIt()&&await u,this.uqt()&&await this.cqt(),r.S$()&&await this.fqt();const c=this.dqt();this.eIt()&&await c;const f=r.c$(),d=f.h4();let p=!1;if(-1!==d&&(f.o4(),h.r4()!==d)){const t=this.I$()._4(d);this.qk()&&(p=!0,await t)}this.jc("canvas","update-html-layer-dom-state",{layersDomState:f.C1().filter(t=>t.TV()).map(t=>t.D2())}),n&&this.cL(),p&&this.jc("canvas","cleanup-html-layers"),this.oWt()&&(await this.vUt(),this.DN()>=this.gUt())?this.GUt():(this.EN()||e||this.$Ut(),this.VVt++,this.HVt++,this.qVt=!1,this.gHt+=performance.now()-o)}async aqt(){const t=this.qpt,s=this.iU();this.mj(),t.cj(!0),this.uyt(this.c$()),s&&DG.pqt(),this.eIt()?await t.Vyt():t.Nyt(),s&&DG.mqt(),this.cyt(),t.cj(!1),this.mj(),t.cj(!0)}async lqt(){const t=this.qpt,s=this.iU(),i=this.eIt(),e=this.DAt,n=this.RHt,r=this.OHt;s&&DG.pqt(),i?await this.gqt(this.eqt()):this.ZUt(),i?await this.gqt(this.nqt()):this.tqt(),s&&DG.yqt(),s&&DG.pqt(),i?await this.wqt(n.tick):e.dispatchEvent(n.tick),s&&DG.Sqt(),t.cj(!1),this.EZ(r.tick)}async dqt(){const t=this.qpt,s=this.DAt,i=this.RHt,e=this.OHt,n=this.iU(),r=this.eIt();n&&DG.pqt(),r?await t.fyt(this.l5):t.lyt(this.l5),n&&DG.mqt(),this.hVt.SNt(),this.oqt(),this.JVt=!1,t.cj(!0),n&&DG.pqt(),r?await this.gqt(this.rqt()):this.iqt(),n&&DG.yqt(),n&&DG.pqt(),r?await this.wqt(i.tick2):s.dispatchEvent(i.tick2),n&&DG.Sqt(),t.cj(!1),this.EZ(e.tick2),r&&await t.xyt(),this.mj(),this.oqt()}oqt(){if(0===this.IVt.size)return;const t=this.DAt;t.ff(!0);for(const t of this.CVt)t.Ryt().Mpt(this.IVt);this.CVt.clear(),this.qpt.Uyt(this.IVt);for(const t of this.IVt)t.qn();this.IVt.clear(),t.ff(!1)}async fqt(){const t=this.p$();let s=0;for(;t.S$()&&s++<10;)await this.vqt(t.L6())}hqt(t){let s=0;this.oWt()?(s=1/this.yUt(),this.iHt=s,this.eHt=s):0!==this.sHt&&(s=Math.max(t-this.sHt,0)/1e3,s>.5&&(s=0),this.iHt=s,this.eHt=FG.Kn(s,this.hHt,this.rHt)),this.sHt=t,this.nHt=this.eHt*this.ROt,this.oHt.Bu(this.nHt),this.aHt.Bu(s*this.ROt),this.lHt.Bu(this.eHt);for(const[t,s]of this.uHt)s.Bu(this.eHt*t.WN());this.PVt&&this.PVt.qWt(),t-this.fHt>=1e3&&(this.fHt+=1e3,t-this.fHt>=1e3&&(this.fHt=t),this.dHt=this.cHt,this.cHt=0,this.mHt=this.pHt,this.pHt=0,this.yHt=Math.min(this.gHt/1e3,1),this.gHt=0,this.PVt&&this.PVt.UWt(),this.hVt.mNt(),this.iU()&&DG.bqt())}jOt(t,s){if(s){if(!this.uHt.has(t)){const s=FG.Un(FG.td);s.hd(this.oHt),this.uHt.set(t,s)}}else this.uHt.delete(t)}VOt(t){const s=this.uHt.get(t);return s?s.qs():this.DN()}async vqt(t){const s=this.DAt,i=this.p$().c$();await i.t6(),i.M4(t,this.gM()),i===t&&this.qpt.e6(),this.hVt.SNt(),this.oqt(),s.dispatchEvent(this.RHt.beforelayoutchange),FG.pf.Af(!0),await t.d4(i,this.gM()),FG.pf.Af(!1),await t.G4(!1),s.dispatchEvent(this.RHt.layoutchange),this.j$(),this.JVt=!0,this.mj(),this.MUt()}j$(){this.FVt=!0}FWt(){return this.PVt?this.PVt.FWt():null}DWt(){return this.PVt?this.PVt.DWt():null}gM(){return this.PVt?this.PVt.gM():null}cL(){const t=this.PVt;if(!t||t.RWt())return;const s=this.gM(),i=s.MF(),e=i&&s.jb(),n=i&&s.sv();if(e&&s.aF(),!this.FVt&&!this.oWt())return void s.kb();const r=this.l5.c$();this.cHt++,s.tF();const h=this.iU();h&&DG.pqt(),this.FVt=!1;let o=null;e&&(o=t.XWt().VA(),s.bF(o));let a=null;n&&(a=s.Mqt(2*(1+r.Q5())),s.g3(0,1)),this.l2()&&"low"===t.v3()?s.uO(t.o3(),t.a3()):s.cO(),this.xqt(this.gM(),r),o&&s.xF(o),n&&(s.Gqt(),this.PVt.KWt(a)),s.Fb(),h&&(DG.Tqt(),DG.Iqt()),t&&t.ZWt()}d6(t){return"low"===this.I$().v3()||t.jb()&&(this.S3()||this.l2())}xqt(t,s){t.uv(),t._O(),t.Eb(),t.vO(1,1,1,1),t.fF(null),t.GO(null),t.iF(this.l2()),this.d6(t)&&s.c6(t);const i=s.r4();for(let e=1;e<i;++e)s.y6(t,e),t.sv()&&t.Cqt();this.d6(t)||s.c6(t),s.g6(t)}JH(t,s,i){if(!this.UVt)return!1;const e=!this.qVt&&!this.qpt.Cyt();let n=0;e&&(n=performance.now());const r=this.iU();r&&this.rX(!1);const h=this.qpt.gyt(this.l5,t,s,i);if(e){const t=performance.now()-n;this.gHt+=t,r&&DG._qt(t)}return r&&this.rX(!0),h}q_t(t,s,i){if(!this.eIt())return this.JH(t,s,i);if(this.Myt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(!this.qVt&&!this.qpt.Cyt())throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead");return this.qpt.Syt(this.l5,t,s,i)}async K$(t,s,i){if(!this.eIt())return this.JH(t,s,i);if(!this.UVt)return!1;if(this.Myt())return this.qpt.vyt(t,s,i);if(!this.c$())return this.qpt.yyt(t,s,i);const e=performance.now(),n=this.qpt.Syt(this.l5,t,s,i);let r=n.next();for(;!r.done;)await this.pyt(r.value),r=n.next();return this.EN()||this.qpt.Cyt()||(await this.qpt.xyt(),this.zVt&&!this.qVt&&this.$Ut()),this.gHt+=performance.now()-e,r.value}z_t(t,s,i){const e=this.iU();e&&this.rX(!1);const n=this.qpt.Gyt(this.l5,t,s,i);return e&&this.rX(!0),n}J_t(t,s,i){return this.qpt.Tyt(this.l5,t,s,i)}Y_t(t){return this.ZVt.Bu(t)}uyt(t){this.wVt.push(t)}cyt(){if(!this.wVt.length)throw new Error("layout stack empty");this.wVt.pop()}O$(){return this.wVt.length?this.wVt.at(-1):this.c$()}AN(t){return t&&-1!==t.WN()?this.eHt*t.WN():this.nHt}l7(){return this.nHt}u7(){return this.eHt}ON(){return this.iHt}WN(){return this.ROt}jN(t){(isNaN(t)||t<0)&&(t=0),this.ROt=t}i$(t){this.hHt=Math.max(t,0)}s$(){return this.hHt}r$(t){this.rHt=Math.max(t,0)}n$(){return this.rHt}HN(){return this.dHt}qN(){return this.mHt}JN(){return this.yHt}Eqt(){return this.tHt}DN(){return this.oHt.qs()}Pqt(){return this.aHt.qs()}$N(){return this.lHt.qs()}kN(){return this.VVt}Aqt(){return this.HVt}Rqt(){return this.xVt}Dk(){return this.jjt}kk(){return this.Vjt}Wk(){return this.Hjt}$k(){return this.Ujt}Vk(){return this.qjt}P$(t){if(this.wHt)throw new Error("cannot call while loading state - wait until afterload event");return this.TVt.get(t)||null}dDt(t){if(this.wHt)throw new Error("cannot call while loading state - wait until afterload event");this.TVt.delete(t)}Y4(){this.TVt.clear();for(const t of this.fVt)if(!t.v1())for(const s of t.ej())this.TVt.set(s.TH(),s)}wjt(){return"preview"===this.Ejt}iU(){return this.Djt}qB(){return this.Ejt}zB(){return"nwjs"===this.qB()||this.Pjt}vjt(){return"cordova"===this.Ejt}Oqt(){return"Android"===FG.Zs.Qs&&("cordova"===this.Ejt||"playable-ad-single-file"===this.Ejt||"playable-ad-zip"===this.Ejt||"instant-games"===this.Ejt)}Fqt(){return this.CK}Dqt(){return this.Ajt}JB(){return this.Rjt}Lqt(){return this.Ojt}Ak(){return this.hVt}_Pt(){return this.rVt._Pt()}EPt(){return this.rVt.EPt()}l2(){return this.AVt}kqt(){return this.gM().HS(this.Q1())}WS(t){return this.gM().WS(t||this.Q1())}Nqt(){return this.JVt}$qt(t){t=!!t,this.OVt!==t&&(this.OVt=t,this.p$().N6(),this.j$())}Qk(){return this.OVt}Bqt(t){if(!this.cVt.has(t)){const s=()=>this.Wqt(t);this.cVt.set(t,s),t.Sf().addEventListener("animationframeimagechange",s)}const s=this.pw.aw(t);return s.Gw()||s.Iw().then(()=>this.j$()),s}Wqt(t){this.pw.fw(t)}lVt(t){const s=[];for(const i of t.HRt())for(const t of i.Dz()){const i=t.Wz();s.push({source:t,width:i.Vg(),height:i.Qg(),tag:t.iJ()})}return{Mw:s}}async uVt(t){const s=FG.Un(FG.Ud),i=[],e=new Map;for(const n of t.HRt())for(const t of n.Dz()){const n=t.Wz().XPt();e.has(n)||(e.set(n,null),i.push(s.Bu(async()=>{const t=await n.lQ();e.set(n,t)})))}await Promise.all(i);const n=[];for(const i of t.HRt())for(const t of i.Dz())n.push(s.Bu(async()=>{const s=t.Wz(),i=e.get(s.XPt()),n=await s.KPt(i);return{_w:await createImageBitmap(n)}}));const r=await Promise.all(n);for(const t of e.values())t instanceof ImageBitmap&&t.close&&t.close();return{Mw:r}}jqt(t){this.SHt=t,this.vHt=!1}Vqt(){this.SHt="",this.vHt=!0}Hqt(t){this.bHt=t}KIt(t){this.cU=t}Uqt(){return this.MHt}uqt(){return!!(this.SHt||this.vHt||this.bHt||null!==this.cU)}async cqt(){if(this.SHt&&(this.mj(),await this.qqt(this.SHt),this.zqt()),this.bHt&&(await this.Jqt(this.bHt),this.zqt(),this.iU()&&DG.Yqt()),this.vHt){const t=await this.Xqt();this.MHt=t,await this.K$(FG.sB.tB.Q$.Kqt,null),this.MHt="",this.zqt()}if(null!==this.cU){this.mj();try{await this.Zqt(this.cU),this.MHt=this.cU,await this.K$(FG.sB.tB.Q$.Qqt,null),this.MHt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.K$(FG.sB.tB.Q$.tzt,null)}this.zqt()}}zqt(){this.SHt="",this.vHt=!1,this.bHt="",this.cU=null}fW(){return this.xHt||(this.xHt=localforage.Ii({name:"c3-localstorage-"+this.Wk(),description:this.Dk()})),this.xHt}szt(){return this.GHt||(this.GHt=localforage.Ii({name:"c3-savegames-"+this.Wk(),description:this.Dk()})),this.GHt}async qqt(t){const s=await this.Xqt();try{await this.szt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.MHt=s,await this.K$(FG.sB.tB.Q$.Kqt,null),this.MHt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.K$(FG.sB.tB.Q$.izt,null)}}async Jqt(t){try{const s=await this.szt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.Zqt(s),this.MHt=s,await this.K$(FG.sB.tB.Q$.Qqt,null),this.MHt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.K$(FG.sB.tB.Q$.tzt,null)}}async Xqt(){const t={c3save:!0,version:1,rt:{time:this.DN(),timeRaw:this.Pqt(),walltime:this.$N(),timescale:this.WN(),tickcount:this.kN(),next_uid:this.GVt,running_layout:this.c$()._1(),start_time_offset:Date.now()-this.tHt},types:{},layouts:{},events:this.qpt.e5(),timelines:this.itt.e5(),user_script_data:null};for(const s of this.fVt)s.v1()||s.fOt()||(t.types[s._1().toString()]=s.e5());for(const s of this.l5.y$())t.layouts[s._1().toString()]=s.e5();const s=this.ezt("save");return s.saveData=null,await this.U4(s),t.user_script_data=s.saveData,JSON.stringify(t)}N4(){return this.wHt}async Zqt(t){const s=this.p$(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(i.version>1)throw new Error("C3 save data from future version");this.ZIt(),this.DAt.dispatchEvent(FG.Un(FG.Event,"beforeload"));for(const t of this.FUt())t.fH().fOt()||t.c8();const e=i.rt;this.oHt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.aHt.Set(e.timeRaw),this.lHt.Set(e.walltime),this.ROt=e.timescale,this.VVt=e.tickcount,this.tHt=Date.now()-e.start_time_offset;const n=e.running_layout;this.wHt=!0;let r=!1;if(n!==this.c$()._1()){const t=s.P6(n);if(!t)return;await this.vqt(t),r=!0}for(const[t,e]of Object.entries(i.layouts)){const i=parseInt(t,10),n=s.P6(i);n&&n.n5(e)}const h=new Set;for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.QY(i);!e||e.v1()||e.fOt()||e.n5(s,h)}for(const t of this.l5.y$())for(const s of t.qj())s.r5();if(this.mj(),this.Y4(),this.wHt=!1,r){for(const t of this.FUt())t.B4();for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.QY(i);!e||e.v1()||e.fOt()||e.yOt(s)}}this.GVt=e.next_uid,this.qpt.n5(i.events);for(const t of this.fVt)if(!t.v1()&&t.xH())for(const s of t.ej()){const i=s.CH();s.fFt();for(const e of t.c4().Gj()){if(e===t)continue;const n=e.ej();if(i<0||i>=n.length)throw new Error("missing sibling instance");s.X4(n[i])}}this.itt.n5(i.timelines),s.k6(),s.N6();for(const t of h)t.TFt();this.QIt(),this.DAt.dispatchEvent(FG.Un(FG.Event,"afterload")),this.EZ(this.ezt("afterload"));for(const[t,s]of Object.entries(i.types)){const s=parseInt(t,10),i=this.QY(s);i&&i.gOt()}const o=this.ezt("load");o.saveData=i.user_script_data,await this.U4(o),this.j$()}nzt(t,s){return s.D$().LLt()-t.D$().LLt()}Gkt(t,s){t.D$()&&(this.JHt.has(t)||(this.JHt.set(t,s),this.YHt.push(t)))}ZIt(){this.JHt=new WeakMap,FG.bh(this.YHt),FG.l6.CDt()}QIt(t="full",s=null){this.YHt.sort(this.nzt),s||(s={}),s.fDt=new Set;const i=this.YHt.length;for(const i of this.YHt)i.d8(this.JHt.get(i),t,s);for(const i of this.YHt)i.PFt(this.JHt.get(i),t,s);if(this.ZIt(),i){this.mj(),this.Y4();for(const t of this.l5.y$())for(const s of t.qj())s.f1(),s.W$()}}async rzt(t){const s=await Promise.all(t.map(async t=>{if(this.vjt()&&this.qZ.oZ()||"playable-ad-single-file"===this.qB()){const s=await this.qZ.no(t);return URL.createObjectURL(s)}return new URL(t,location.href).toString()}));this.kHt.hzt(s)}ozt(t,s){this.kHt.azt(t,s)}lzt(t,s){this.kHt.uzt(t,s)}czt(t,s,i,e){return this.kHt.czt(t,s,i,null,null,e)}fzt(t,s,i,e){return this.kHt.fzt(t,s,i,e)}dzt(){return this.kHt.pzt()}_$(t,s){this.jc("runtime","invoke-download",{url:t,filename:s})}async ojt(t,s,i,e,n,r){if(e=e||s,n=n||i,this.qk())return(await this.H$("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:n,imageBitmapOpts:r})).imageBitmap;{const h=await self.C3_RasterSvgImageBlob(t,s,i,e,n);return r?await self.createImageBitmap(h,r):h}}async mzt(t){return this.qk()?await this.H$("runtime","get-svg-image-size",{blob:t}):await self.C3_GetSvgImageSize(t)}gzt(){this._Ht||(this._Ht=!0,this.jc("runtime","enable-device-orientation"))}yzt(){this.EHt||(this.EHt=!0,this.jc("runtime","enable-device-motion"))}u$(){return this.QVt()}wzt(t){this.QVt=t}WHt(){const t=this.gM();return{fps:this.HN(),tps:this.qN(),cpu:this.JN(),gpu:this.XN(),layout:this.c$()?this.c$().Pc():"",renderer:t.jb()?t.EF():t.LWt()}}Myt(){return!!this.iU()&&DG.Myt()}pyt(t){return this.eIt()?DG.pyt(t):Promise.resolve()}Jvt(){return!!this.eIt()&&DG.Szt()}vzt(t){this.Ljt=!!t,this.bzt()}Mzt(){return this.Ljt}eIt(){return this.kjt}rX(t){t?this.Njt--:this.Njt++,this.bzt()}bzt(){this.kjt=this.iU()&&this.Ljt&&0===this.Njt}dSt(){return this.iU()&&DG.dSt()}f3(){return this.iU()&&this.gM().MF()&&DG.f3()}async gqt(t){if(t)for(const s of t)await this.pyt(s)}wqt(t){return this.gqt(this.DAt.Pf(t))}ygt(t){return this.qpt.ygt(t.name,t.params)}q$(t){if(this.qk())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}gW(){return this.UHt}ezt(t){const s=FG.Un(FG.Event,t,!1);return s.runtime=this.UHt,s}hUt(){this.UHt=new self.Tk(this),this.OHt={pretick:this.ezt("pretick"),tick:this.ezt("tick"),tick2:this.ezt("tick2")}}lUt(){const t={};for(const s of this.fVt)t[s.Hgt()]={value:s.BW(),enumerable:!0,writable:!1};this.UHt.rN(t)}uUt(){const t={};for(const s of this.aN().Kgt())t[s.Hgt()]=s.Ugt();this.UHt.hN(t)}b$(){return this.zHt}DW(t,s){this.qHt.set(t,s)}Yj(t){return this.qHt.get(t)}$B(t){if(!(t instanceof self.HW))throw new TypeError("expected IObjectClass");const s=this.Yj(t);if(!(s&&s instanceof FG.Sct))throw new Error("invalid IObjectClass");return s}tj(t){if(!(t instanceof self.cH))throw new TypeError("expected IInstance");const s=this.Yj(t);if(!(s&&s instanceof FG.Instance))throw new Error("invalid IInstance");return s}F$(t){if(!(t instanceof self.Kq))throw new TypeError("expected IWorldInstance");const s=this.Yj(t);if(!(s&&s instanceof FG.Instance))throw new Error("invalid IInstance");return s}},self.C3_CreateRuntime=FG.bjt.UT,self.C3_InitRuntime=(t,s)=>t.DOt(s)}{const BG=self.Cs;BG.NHt=class extends BG.Vn{constructor(t,s){super(),this.$c=t,this.xzt=new Map,this.Gzt=0,this.Tzt=s.inputPort,s.outputPort.onmessage=t=>this.Izt(t),this.Czt=s.maxNumWorkers,this._zt=1,this.Ezt=!1,this.Pzt=!1}pzt(){return this.Czt}hzt(t){this.Tzt.postMessage({type:"_import_scripts",scripts:t})}azt(t,s){this.Tzt.postMessage({type:"_send_blob",blob:t,id:s})}uzt(t,s){this.Tzt.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}czt(t,s,i,e,n,r){if(i||(i=[]),"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const h=this.Gzt++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:h,params:s,transferables:i},a=new Promise((t,s)=>{this.xzt.set(h,{resolve:t,progress:e,reject:s,Azt:!1,Rzt:r})});return n&&n.Xf(()=>this.Ozt(h)),this.Tzt.postMessage(o,i),this.Fzt(),a}fzt(t,s,i,e){if(i||(i=[]),"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const n={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:this.Gzt++,params:s,transferables:i};this.Tzt.postMessage(n,i)}Ozt(t){const s=this.xzt.get(t);s&&(s.Azt=!0,s.resolve=null,s.progress=null,s.reject=null,this.Tzt.postMessage({type:"_cancel",jobId:t}))}Izt(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.Dzt(e,s.result);break;case"progress":this.Lzt(e,s.progress);break;case"error":this.kzt(e,s.error);break;case"ready":this.Nzt();break;default:throw new Error(`unknown message from worker '${i}'`)}}Dzt(t,s){const i=this.xzt.get(t);if(!i)throw new Error("invalid job ID");i.Azt||i.resolve(s),this.xzt.delete(t)}Lzt(t,s){const i=this.xzt.get(t);if(!i)throw new Error("invalid job ID");!i.Azt&&i.progress&&i.progress(s)}kzt(t,s){const i=this.xzt.get(t);if(!i)throw new Error("invalid job ID");i.Azt||i.reject(s),this.xzt.delete(t)}Nzt(){this.Ezt&&(this.Ezt=!1,this._zt++,this._zt<this.Czt?this.Fzt():this.Tzt.postMessage({type:"_no_more_workers"}))}$zt(){let t=0;const s=[...this.xzt.values()].sort((t,s)=>(t.Rzt||1/0)-(s.Rzt||1/0));for(const i of s)t<(i.Rzt||1/0)&&t++;return t}async Fzt(){if(!(this._zt>=this.Czt||this.Ezt||this.Pzt||this.$zt()<=this._zt))try{this.Ezt=!0,(await this.$c.H$("runtime","create-job-worker")).outputPort.onmessage=t=>this.Izt(t)}catch(t){this.Pzt=!0,this.Ezt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this._zt} so far)`,t)}}}}self.C3_Shaders={};{let WG=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const t=""+i,s=""+e;return t<s?-1:t>s?1:0}};ForEachOrdered_SortInstances=WG;const jG=self.Cs;let VG=null,HG="",UG="",qG=[],zG="",JG="",YG="";const XG=jG.Un(jG.jmt);jG.sB.tB=class extends jG.KCt{constructor(t){super(t),this.kmt=this.$c.aN().eX(),this.xpt=this.$c.aN().bN(),this.Bzt=0,this.Wzt=0,this.jzt=new Map}qn(){super.qn()}j$(){this.$c.j$()}JH(t){this.$c.JH(t,null,null)}Vzt(t,s){return VG&&t===HG&&s===UG||(VG=new RegExp(t,s),HG=t,UG=s),VG.lastIndex=0,VG}Hzt(t,s,i){if(t===zG&&s===JG&&i===YG)return qG;const e=this.Vzt(s,i);return qG=t.match(e),zG=t,JG=s,YG=i,qG}async Uzt(t,s){if(!s.length)return;this.Bzt+=s.length;const i=[];for(const e of s)i.push(t.g4(e));await jG.jh(i,()=>{this.Wzt++}),this.Wzt++,this.Wzt===this.Bzt&&(this.Wzt=0,this.Bzt=0,this.$c.JH(jG.sB.tB.Q$.qzt,null,null))}PZ(){return 0===this.Bzt?1:this.Wzt/this.Bzt}zzt(t,s){for(const i of s)0===i.oj()&&t.v4(i)}Jzt(){return XG}Yzt(t){const s=this.$c.aN(),i=s.bN(),e=i.sX(),n=e.pN(),r=n.tX(),h=e.xmt(),o=i.iX(n),a=s.eX(),l=a.iX();if(l.Bmt(t),h)for(let i=0;i<t&&!l.fX();++i)s.oX(r),l.uX(i),n.aX(e,o),s.lX(r);else for(let s=0;s<t&&!l.fX();++s)l.uX(s),n.aX(e,o);return i.dX(),a.dX(),!1}*Xzt(t){const s=this.$c.aN(),i=s.bN(),e=i.sX(),n=e.pN(),r=n.tX(),h=e.xmt(),o=i.iX(n),a=s.eX(),l=a.iX();if(l.Bmt(t),h)for(let i=0;i<t&&!l.fX();++i)s.oX(r),l.uX(i),yield*n.rbt(e,o),s.lX(r);else for(let s=0;s<t&&!l.fX();++s)l.uX(s),yield*n.rbt(e,o);return i.dX(),a.dX(),!1}Kzt(){const t=this.$c.aN(),s=t.bN(),i=s.sX(),e=i.pN(),n=e.tX(),r=i.xmt(),h=s.iX(e),o=t.eX(),a=o.iX();if(r)for(let s=0;!a.fX();++s)t.oX(n),a.uX(s),e.aX(i,h)||a.rJ(),t.lX(n);else for(let t=0;!a.fX();++t)a.uX(t),e.aX(i,h)||a.rJ();return s.dX(),o.dX(),!1}*Zzt(){const t=this.$c.aN(),s=t.bN(),i=s.sX(),e=i.pN(),n=e.tX(),r=i.xmt(),h=s.iX(e),o=t.eX(),a=o.iX();if(r)for(let s=0;!a.fX();++s)t.oX(n),a.uX(s),(yield*e.rbt(i,h))||a.rJ(),t.lX(n);else for(let t=0;!a.fX();++t)a.uX(t),(yield*e.rbt(i,h))||a.rJ();return s.dX(),o.dX(),!1}Qzt(t,s,i){const e=this.$c.aN(),n=e.bN(),r=n.sX(),h=r.pN(),o=h.tX(),a=r.xmt(),l=n.iX(h),u=e.eX(),c=u.iX();if(c.nX(t),c.Bmt(i),i<s)if(a)for(let t=s;t>=i&&!c.fX();--t)e.oX(o),c.uX(t),h.aX(r,l),e.lX(o);else for(let t=s;t>=i&&!c.fX();--t)c.uX(t),h.aX(r,l);else if(a)for(let t=s;t<=i&&!c.fX();++t)e.oX(o),c.uX(t),h.aX(r,l),e.lX(o);else for(let t=s;t<=i&&!c.fX();++t)c.uX(t),h.aX(r,l);return n.dX(),u.dX(),!1}*tJt(t,s,i){const e=this.$c.aN(),n=e.bN(),r=n.sX(),h=r.pN(),o=h.tX(),a=r.xmt(),l=n.iX(h),u=e.eX(),c=u.iX();if(c.nX(t),c.Bmt(i),i<s)if(a)for(let t=s;t>=i&&!c.fX();--t)e.oX(o),c.uX(t),yield*h.rbt(r,l),e.lX(o);else for(let t=s;t>=i&&!c.fX();--t)c.uX(t),yield*h.rbt(r,l);else if(a)for(let t=s;t<=i&&!c.fX();++t)e.oX(o),c.uX(t),yield*h.rbt(r,l),e.lX(o);else for(let t=s;t<=i&&!c.fX();++t)c.uX(t),yield*h.rbt(r,l);return n.dX(),u.dX(),!1}sJt(t){const s=t.nj(),i=s.ej();if(0===i.length)return!1;const e=this.$c.aN(),n=e.bN(),r=n.sX(),h=r.pN(),o=h.tX(),a=r.xmt(),l=n.iX(h),u=e.eX(),c=u.iX(),f=t.xH(),d=XG.iX();if(jG.Th(d,i),c.Bmt(d.length),a)for(let s=0,i=d.length;s<i&&!c.fX();++s){e.oX(o);const i=d[s];t.nj().kpt(i),f&&i.SSt(),c.uX(s),h.aX(r,l),e.lX(o)}else{s.Fpt(!1);const t=s.Dpt();jG.bh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.fX();++s){const i=d[s];t[0]=i,f&&i.SSt(),c.uX(s),h.aX(r,l)}}return n.dX(),u.dX(),jG.bh(d),XG.dX(),!1}*iJt(t){const s=t.nj(),i=s.ej();if(0===i.length)return!1;const e=this.$c.aN(),n=e.bN(),r=n.sX(),h=r.pN(),o=h.tX(),a=r.xmt(),l=n.iX(h),u=e.eX(),c=u.iX(),f=t.xH(),d=XG.iX();if(jG.Th(d,i),c.Bmt(d.length),a)for(let s=0,i=d.length;s<i&&!c.fX();++s){e.oX(o);const i=d[s];t.nj().kpt(i),f&&i.SSt(),c.uX(s),yield*h.rbt(r,l),e.lX(o)}else{s.Fpt(!1);const t=s.Dpt();jG.bh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.fX();++s){const i=d[s];t[0]=i,f&&i.SSt(),c.uX(s),yield*h.rbt(r,l)}}return n.dX(),u.dX(),jG.bh(d),XG.dX(),!1}eJt(t,s){const i=t.nj(),e=i.ej();if(0===e.length)return!1;const n=this.$c.aN(),r=n.bN(),h=n.Dgt(),o=r.sX(),a=o.pN(),l=a.tX(),u=o.xmt(),c=r.iX(a),f=n.eX(),d=f.iX(),p=t.xH(),m=XG.iX();jG.bh(m),d.Bmt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.bGt(1,t)]);if(m.sort(WG),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.fX();++s){n.oX(l);const i=m[s][0];t.nj().kpt(i),p&&i.SSt(),d.uX(s),a.aX(o,c),n.lX(l)}else{i.Fpt(!1);const t=i.Dpt();jG.bh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.fX();++s){const i=m[s][0];t[0]=i,p&&i.SSt(),d.uX(s),a.aX(o,c)}}return r.dX(),f.dX(),jG.bh(m),XG.dX(),!1}*nJt(t,s){const i=t.nj(),e=i.ej();if(0===e.length)return!1;const n=this.$c.aN(),r=n.bN(),h=n.Dgt(),o=r.sX(),a=o.pN(),l=a.tX(),u=o.xmt(),c=r.iX(a),f=n.eX(),d=f.iX(),p=t.xH(),m=XG.iX();jG.bh(m),d.Bmt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.bGt(1,t)]);if(m.sort(WG),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.fX();++s){n.oX(l);const i=m[s][0];t.nj().kpt(i),p&&i.SSt(),d.uX(s),yield*a.rbt(o,c),n.lX(l)}else{i.Fpt(!1);const t=i.Dpt();jG.bh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.fX();++s){const i=m[s][0];t[0]=i,p&&i.SSt(),d.uX(s),yield*a.rbt(o,c)}}return r.dX(),f.dX(),jG.bh(m),XG.dX(),!1}rJt(t,s){let i=this.jzt.get(t);return i||(s?(i={hJt:null,oJt:new Map},this.jzt.set(t,i),i):null)}aJt(t,s,i,e,n){s.fN().bbt(i,s.yN()),e&&t.lX(n)}*lJt(t,s,i,e,n){yield*s.fN().Mbt(i,s.yN()),e&&t.lX(n)}}}{const KG=self.Cs;KG.sB.tB.dRt=class extends KG.Vn{constructor(t){super(),this.mpt=t,this.$c=t.aB(),this.L_t=t.qW()}v_t(){}qn(){this.mpt=null,this.$c=null,this.L_t=null}}}{const ZG=self.Cs;ZG.sB.tB.Instance=class extends ZG.Vn{constructor(t,s){super(),this.di=t,this.mpt=this.di.fH(),this.j_t=this.mpt.ZGt(),this.$c=this.di.aB()}qn(){this.di=null,this.mpt=null,this.j_t=null,this.$c=null}}}{const QG=self.Cs,tT=[];QG.sB.tB.Q$={uJt:()=>!0,z4:()=>!0,s6:()=>!0,JUt:()=>!0,YUt:()=>!0,EN(){return this.$c.EN()},evt(){const t=this.$c.Fgt();return!t.wmt()&&!t.gmt()},cJt(){const t=this.$c.Dgt().aGt();let s=t.get("TriggerOnce_lastTick");void 0===s&&(s=-1,t.set("TriggerOnce_lastTick",-1));const i=this.$c.kN();return t.set("TriggerOnce_lastTick",i),this.$c.Nqt()||s!==i-1},fJt(t){const s=this.$c.Dgt().aGt(),i=s.get("Every_lastTime")||0,e=this.$c.DN();s.has("Every_seconds")||s.set("Every_seconds",t);const n=s.get("Every_seconds");return e>=i+n?(s.set("Every_lastTime",i+n),e>=s.get("Every_lastTime")+.04&&s.set("Every_lastTime",e),s.set("Every_seconds",t),!0):(e<i-.1&&s.set("Every_lastTime",e),!1)},Swt(t){const s=this.$c.aN().syt(t);return s&&s.Swt()},wjt(){return this.$c.wjt()},oi:()=>QG.Zs.oi,_Ut:()=>!0,Z$:()=>!0,dJt:()=>!0,Kqt:()=>!0,izt:()=>!0,Qqt:()=>!0,tzt:()=>!0,pJt(t){return!!this.$c.P$(t)},mJt(t){switch(t){case 0:return"browser"===QG.Zs.ri;case 1:return"iOS"===QG.Zs.Qs;case 2:return"Android"===QG.Zs.Qs;case 8:return"cordova"===QG.Zs.ri;case 9:return"scirra-arcade"===this.$c.qB();case 10:return"nwjs"===QG.Zs.ri;case 13:return"windows-uwp"===this.$c.qB();default:return!1}},gJt(t,s,i){return this.Vzt(s,i).test(t)},yJt:(t,s,i)=>QG.compare(t,s,i),wJt:(t,s,i)=>t>=s&&t<=i,SJt:(t,s,i)=>QG.compare(t._nt(),s,i),vJt:t=>!!t._nt(),bJt(t,s){const i=this.$c.DN();if(0===t){const t=this.$c.Dgt().aGt();return!t.get("CompareTime_executed")&&i>=s&&(t.set("CompareTime_executed",!0),!0)}return QG.compare(i,t,s)},MJt:t=>isNaN(t),SCt:(t,s,i)=>QG.hr(QG.Qn(t),QG.Qn(i))<=QG.Qn(s),vCt:(t,s)=>QG.lr(QG.Qn(t),QG.Qn(s)),ETt(t,s,i){let e=QG.Qn(t),n=QG.Qn(s),r=QG.Qn(i);return QG.lr(r,n)?QG.lr(e,n)&&!QG.lr(e,r):!(!QG.lr(e,n)&&QG.lr(e,r))},xJt:(t,s)=>"number"==typeof t?0===s:1===s,GJt:t=>!!t,Kyt(t){return t.toLowerCase()===this.$c.aN().swt()},TJt(t,s,i,e){if(!t)return!1;const n=this.Jzt(),r=n.iX(),h=t.nj();QG.Th(r,h.ej()),h.Cpt()&&QG.bh(h.Lpt());const o=this.$c.Dgt();let a=0;for(let t=0,n=r.length;t<n;++t){const n=r[t];r[a]=n,s=o.bGt(1,t),e=o.bGt(3,t),QG.compare(s,i,e)?++a:h.Opt(n)}QG.Sh(r,a),h.Npt(r);const l=!!r.length;return QG.bh(r),n.dX(),t.pbt(),l},IJt(t,s){if(!t)return!1;const i=this.Jzt(),e=i.iX(),n=t.nj();QG.Th(e,n.ej()),n.Cpt()&&QG.bh(n.Lpt());const r=this.$c.Dgt();let h=0;for(let t=0,s=e.length;t<s;++t){const s=e[t];e[h]=s,r.bGt(1,t)?++h:n.Opt(s)}QG.Sh(e,h),n.Npt(e);const o=!!e.length;return QG.bh(e),i.dX(),t.pbt(),o},CJt(t,s,i){if(!t)return!1;const e=t.nj(),n=e.ej();if(0===n.length)return!1;const r=this.$c.Dgt();let h=null,o=0;for(let t=0,e=n.length;t<e;++t){const e=n[t];i=r.bGt(2,t),(null===h||0===s&&i<o||1===s&&i>o)&&(o=i,h=e)}return e.Vpt(h),t.pbt(),!0},_Jt(t,s){if(!t)return!1;const i=t.nj(),e=i.ej();if((s=Math.floor(s))>=e.length)return!1;const n=e[s];return i.Vpt(n),t.pbt(),!0},EJt(t){if(!t)return!1;const s=t.nj(),i=s.ej(),e=Math.floor(this.$c.u$()*i.length);if(e>=i.length)return!1;const n=i[e];return s.Vpt(n),t.pbt(),!0},PJt:t=>!!t&&(!!t.oj()&&(t.nj().Fpt(!0),t.pbt(),!0)),AJt(t,s,i){if(!t)return!1;const e=t.nj(),n=e.ej(),r=this.$c.pN().Hpt(),h=this.$c.Dgt().eGt();e.Cpt()?(QG.Th(tT,n),e.Ipt(),e.Fpt(!1)):r?(QG.Th(tT,e.Lpt()),QG.bh(e.Lpt())):(QG.Th(tT,e.Dpt()),QG.bh(e.Dpt()));for(let t=0,n=tT.length;t<n;++t){const n=tT[t];QG.xor(n.D$().nq(s,i),h)?e.Rpt(n):e.Opt(n)}return t.pbt(),QG.xor(!!e.Dpt().length,h)},RJt(t){if(!t)return!1;const s=t.v1();let i=null;const e=this.$c.iOt();for(let n=e.length-1;n>=0;--n){const r=e[n];if(s){if(r.fH().nTt(t)){i=r;break}}else if(r.fH()===t){i=r;break}}if(!i){const s=t.ej();s.length&&(i=s.at(-1))}return!!i&&(t.nj().Vpt(i),t.pbt(),!0)},OJt(t){return this.$c.eIt()?this.Xzt(t):this.Yzt(t)},FJt(){return this.$c.eIt()?this.Zzt():this.Kzt()},DJt(t,s,i){return this.$c.eIt()?this.tJt(t,s,i):this.Qzt(t,s,i)},Hd(t){return this.$c.eIt()?this.iJt(t):this.sJt(t)},LJt(t,s,i){return this.$c.eIt()?this.nJt(t,i):this.eJt(t,i)},kJt:t=>!!t&&t.vV(),NJt:t=>!!t&&t._V(),$Jt:t=>!!t&&t.TV(),BJt:t=>!!t&&!t.oj(),WJt:(t,s,i)=>!!t&&QG.compare(100*t.SO(),s,i),jJt(t){const s=this.$c.c$();return!!s&&s.t4(t)},qzt:()=>!0,VJt(){return this.Bzt>0},HJt(t,s){const i=this.$c.cFt();return!!i&&!!s&&!!i.wct(t,s)}}}{let sT=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]},iT=function(t,s){return t[1]-s[1]};SortZOrderList=sT,SortInstancesByValue=iT;const eT=self.Cs,nT=[],rT=[],hT=eT.Un(eT.Rect),oT=eT.Un(eT.Go),aT=[];eT.sB.tB.wht={UJt(t,s){t.urt(s)},qJt(t,s){t.Qi()&&"number"!=typeof s&&(s=parseFloat(s)),t.urt(t._nt()+s)},zJt(t,s){t.Qi()&&t.urt(t._nt()-s)},JJt(t,s){t.urt(!!s)},YJt(t){t.urt(!t._nt())},XJt(t){t.urt(t.Ogt())},KJt(t){this.$c.aN().Qgt(t)},ZJt(t,s,i,e,n,r){if(!t||!s)return;const h=this.$c.lj(t,s,i,e,n,r);if(!h)return;n&&s.uj(h);const o=this.$c.aN();o.cj(!0),h.fj(),o.cj(!1);const a=new Map;h.iFt(a,t,n);for(const[t,s]of a)t.nj().$pt(s)},QJt(t,s,i,e,n,r){if(!t||!s)return;const h=this.$c.OUt(t);h&&eT.sB.tB.wht.ZJt.call(this,h,s,i,e,n,r)},w1(t,s,i,e,n,r,h,o,a,l,u){if(!t)return;const c=this.$c.O$();let f=c;if(r){const t=this.$c.p$().E6(r);if(!t)return;f=t}let d=null;if(("number"!=typeof h||h>=0)&&(d=f.L$(h),!d))return;let p=null;if(("number"!=typeof o||o>=0)&&(p=c.L$(o),!p))return;hT.set(s,i,e,n);const m=f.w1(t,hT,d,p,a,l,u);t.nj().Npt(m),t.pbt()},tYt(){const t=this.kmt;t.Omt()&&t.Amt().rJ()},vwt(t,s){const i=this.$c.aN().syt(t);i&&(0===s?i.vwt(!1):1===s?i.vwt(!0):i.vwt(!i.Swt()))},sYt(t){this.$c.jN(t)},iYt(t,s){if(s<0&&(s=0),!t)return;const i=t.nj().ej();for(const t of i)t.jN(s)},eYt(t){if(!t)return;const s=t.nj().ej();for(const t of s)t.RH()},ph(t,s){if(t<0)return;const i=this.$c.aN().Dyt();return s?i.jCt(t):i.VCt(t),!0},IN(t){return this.$c.aN().Dyt().HCt(t),!0},nYt(){const t=this.$c.aN();return t.Dyt().UCt(t.Xyt()),!0},GN(t){this.$c.aN().GN(t)},async X$(t,s,i,e,n,r){const h=this.$c.I$();h&&(this.j$(),await h.X$(0===t?"image/png":"image/jpeg",s/100,i,e,n,r),await this.$c.K$(eT.sB.tB.Q$.Z$,null))},rYt(t,s){if(t<=0||s<=0)return;this.$c.bWt(t,s),this.$c.O$().J3();const i=this.$c.I$();i&&("off"===i.pWt()||this.$c.DUt(t,s),i.BP(i.rY(),i.hY(),!0),this.$c.j$())},hYt(t){const s=this.$c.I$();s&&"off"!==s.pWt()&&(s._Wt(0!==t?"high":"low"),s.BP(s.rY(),s.hY(),!0))},qet(t){this.$c.jqt(t)},oYt(){this.$c.Vqt()},aYt(t){this.$c.Hqt(t)},lYt(t){this.$c.KIt(t)},uYt(t){},cYt(){for(const t of this.$c.p$().y$())t.u6()},fYt(t){this.$c.$qt(0!==t)},dYt(t,s){this.$c.r$(1/t),this.$c.i$(1/s)},pYt(t,s){this.$c.i$(t),this.$c.r$(s)},mYt(t){this.$c.QN(["vsync","unlimited-tick","unlimited-frame"][t])},gYt(t,s){if(!t)return;const i=t.nj().ej(),e=nT,n=rT,r=this.$c.O$(),h=t.v1(),o=t.kMt();for(let t=0,r=i.length;t<r;++t){const r=i[t],a=r.D$();if(!a)continue;let l;l=h?r.uot(s+r.fH().LMt(o)):r.uot(s),e.push([a.L$().xk(),a.k$()]),n.push([r,l])}if(!e.length)return;e.sort(sT),n.sort(iT);let a=!1;for(let t=0,s=e.length;t<s;++t){const s=n[t][0],i=r.N$(e[t][0]),h=e[t][1],o=i.$$();o[h]!==s&&(o[h]=s,s.D$().B$(i,!0),i.W$(s),a=!0)}a&&this.$c.j$(),eT.bh(nT),eT.bh(rT)},DB(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.$c.Ak().DB(t,s)},yYt(t){if(this.$c.Tw())return;const s=this.$c.p$();s.S$()||s.v$(t)},wYt(t){if(this.$c.Tw())return;const s=this.$c.p$();if(s.S$())return;const i=s.E6(t);i&&s.v$(i)},SYt(t){if(this.$c.Tw())return;const s=this.$c.p$();if(s.S$())return;const i=s.y$(),e=i.indexOf(s.c$());if(t&&0===e)return;if(!t&&e===i.length-1)return;const n=i[e+(t?-1:1)];s.v$(n)},vYt(){if(this.$c.Tw())return;const t=this.$c.p$();t.S$()||(t.v$(t.c$()),this.$c.aN().ryt())},bYt(t,s){t&&t.wV(s)},MYt(t,s){t&&t.xV(s)},xYt(t,s){t&&t.IV(s)},GYt(t,s){t&&t.bO(s/100)},TYt(t,s){t&&t.EV(s)},IYt(t,s){t&&t.RV(s)},CYt(t,s){t&&t.Oj(eT.Qn(+s))},_Yt(t,s,i){t&&(t.ZV(!0),t.Dj(s),t.kj(i))},EYt(t){t&&t.ZV(!1)},PYt(t,s,i){t&&t.t2(s/100,i/100)},AYt(t,s){t&&t.sx(+s)},RYt(t,s){t&&t.jV(1===s)},OYt(t,s){if(!t)return;oT.ta(s),oT.Kn();const i=t.KV();i.qo(oT)||(i.ko(oT),this.j$())},FYt(t,s){t&&t.UV(s)},DYt(t,s){t&&t.NM(s)},LYt(t,s,i){if(!t)return;const e=t.Cj().Lrt(i);if(!e)return;const n=1===s;e.uSt()!==n&&(e.Hkt(n),t.vz(),this.$c.j$())},kYt(t,s,i,e){if(!t)return;const n=t.Cj(),r=n.Lrt(s);if(!r)return;i=Math.floor(i);const h=r.zI().YI(i);h&&("color"===h?(oT.ta(e),e=oT):"percent"===h&&(e/=100),n.Mz(r.xk(),i,e)&&r.uSt()&&this.$c.j$())},NYt(t,s){t&&t.JV(s)},$Yt(t){this.$c.O$().Aj(+t)},BYt(t){this.$c.O$().Oj(eT.Qn(+t))},WYt(t,s){const i=this.$c.O$(),e=i.Cj().Lrt(s);if(!e)return;const n=1===t;e.uSt()!==n&&(e.Hkt(n),i.vz(),this.$c.j$())},jYt(t,s,i){const e=this.$c.O$().Cj(),n=e.Lrt(t);if(!n)return;s=Math.floor(s);const r=n.zI().YI(s);r&&("color"===r?(oT.ta(i),i=oT):"percent"===r&&(i/=100),e.Mz(n.xk(),s,i)&&n.uSt()&&this.$c.j$())},VYt(t,s){this.$c.O$().nV(t/100,s/100)},HYt(t){const s=this.$c.O$();0===t?s.oV():s.aV()},UYt(t){this.$c.O$().Dj(t)},qYt(t){this.$c.O$().kj(t)},zYt(t,s){const i=this.$c.O$();i.Dj(t),i.kj(s)},JYt(t){if(!t)return;const s=t.UTt();if(!s)return;const i=s.D$();if(!i)return;const e=this.$c.O$();e.Dj(i.YM()),e.kj(i.ZM())},Xj(t,s,i){const e=this.$c.O$();try{e.Xj(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},Zj(t,s,i){if(!t)return;const e=this.$c.O$();try{e.Zj(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}},tV(t){t&&this.$c.O$().tV(t)},iV(){this.$c.O$().iV()},async YYt(t){const s=this.$c.c$();if(!s||!t||this.$c.Tw())return;const i=t.v1()?t.xj():[t];await this.Uzt(s,i)},async XYt(t){await eT.sB.tB.wht.YYt.call(this,this.$c.OUt(t))},KYt(t){const s=this.$c.c$();if(!s||!t)return;const i=t.v1()?t.xj():[t];this.zzt(s,i)},ZYt(t){eT.sB.tB.wht.KYt.call(this,this.$c.OUt(t))},QYt(){const t=this.$c.c$();if(!t)return;const s=t.f4();this.zzt(t,s)},async tXt(t){const s=this.$c.c$();t&&s&&!this.$c.Tw()&&await this.Uzt(s,t.l4())},async sXt(t){const s=this.$c.c$(),i=this.$c.p$().E6(t);i&&s&&!this.$c.Tw()&&await this.Uzt(s,i.l4())},xN(t){const s=this.xpt.vN();if(s)switch(s.MN()){case 1:"number"==typeof t&&s.xN(t);break;case 2:"string"==typeof t&&s.xN(t);break;case 3:s.xN(t)}},iXt(t,s,i){const e=this.rJt(t.toLowerCase(),!0),n=e.oJt,r=s.toLowerCase();n.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`);const h=eT.Bh(n.values())||e.hJt;h&&0!==h.wN()!=(0!==i.wN())?console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`):n.set(r,i)},eXt(t,s){const i=this.rJt(t.toLowerCase(),!0);i.hJt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`);const e=eT.Bh(i.oJt.values())||i.hJt;e&&0!==e.wN()!=(0!==s.wN())?console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`):i.hJt=s},nXt(t,s,i){const e=this.$c,n=e.eIt()?aT:null;i=Math.floor(i);const r=this.rJt(t.toLowerCase(),!1);if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),n;let h=r.oJt.get(s.toLowerCase());if(!h){if(!r.hJt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),n;h=r.hJt,i=0}if(!h.Cu())return n;if(0!==h.wN())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),n;const o=e.aN(),a=o.pN(),l=a.dN(),u=l.length>0;u&&(h.yN()?o.oX(l):o.Oyt(l));const c=[],f=o.Iwt(a);if(f){const t=f._wt();for(let s=i,e=t.length;s<e;++s)c.push(t[s]._nt())}const d=h._wt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].Ogt());return e.eIt()?this.lJt(o,h,c,u,l):this.aJt(o,h,c,u,l)}}}{const lT=self.Cs;lT.sB.tB.Sht={rXt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t)&&(t=0)),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t)&&(t=0)),t},P:t=>t.toString(),kt:t=>"string"==typeof t?t.length:0,random(t,s){return void 0===s?this.$c.u$()*t:this.$c.u$()*(s-t)+t},bMt(...t){return t[Math.floor(this.$c.u$()*t.length)]},hXt:(t,...s)=>("number"!=typeof t&&(t=0),s[t=lT.Kn(Math.floor(t),0,s.length-1)]),oXt:()=>Math.PI,aXt:()=>1/0,sqrt:t=>Math.sqrt(t),abs:t=>Math.abs(t),round:t=>Math.round(t),lXt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor:t=>Math.floor(t),ceil:t=>Math.ceil(t),sign:t=>Math.sign(t),sin:t=>Math.sin(lT.Qn(t)),cos:t=>Math.cos(lT.Qn(t)),tan:t=>Math.tan(lT.Qn(t)),asin:t=>lT.tr(Math.asin(t)),acos:t=>lT.tr(Math.acos(t)),atan:t=>lT.tr(Math.atan(t)),exp:t=>Math.exp(t),Vt:t=>Math.log(t),log10:t=>Math.log10(t),max(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s<e&&(s=e)}return s},min(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s>e&&(s=e)}return s},Kn:(t,s,i)=>lT.Kn(t,s,i),bt:(t,s,i,e)=>lT.er(t,s,i,e),angle:(t,s,i,e)=>lT.tr(lT.rr(t,s,i,e)),Ct:(t,s,i)=>lT.Ct(t,s,i),mr:(t,s,i)=>lT.mr(t,s,i),yr:(t,s,i,e)=>lT.yr(t,s,i,e),wr:(t,s,i,e,n)=>lT.wr(t,s,i,e,n),Sr:(t,s,i)=>lT.Sr(t,s,i),uXt:(t,s)=>lT.tr(lT.hr(lT.Qn(t),lT.Qn(s))),cXt:(t,s,i)=>lT.tr(lT.ur(lT.Qn(t),lT.Qn(s),i)),fXt:(t,s,i)=>lT.tr(lT.ar(lT.Qn(t),lT.Qn(s),lT.Qn(i))),dXt:(t,s,i)=>(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s,pXt:(t,s)=>(t|=0)^1<<s,mXt:(t,s)=>(t|=0)&1<<(s|=0)?1:0,gXt:()=>"\n",yXt:t=>"string"==typeof t?t.toUpperCase():"",wXt:t=>"string"==typeof t?t.toLowerCase():"",left:(t,s)=>"string"==typeof t?t.substr(0,s):"",mid:(t,s,i)=>"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i),right:(t,s)=>"string"==typeof t?t.substr(Math.max(t.length-s,0)):"",trim:t=>"string"==typeof t?t.trim():"",SXt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},vXt:(t,s)=>"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0,find:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(lT.Ki(s),"i")):-1,bXt:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(lT.Ki(s),"")):-1,replace:(t,s,i)=>"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(lT.Ki(s),"gi"),i):"string"==typeof t?t:"",MXt(t,...s){let i=t;for(let t=0,e=s.length;t<e;++t)i=i.replaceAll(`{${t}}`,s[t].toString());return i},xXt(t,s,i){const e=this.Vzt(s,i);return t?t.search(e):-1},GXt(t,s,i,e){const n=this.Vzt(s,i);return t?t.replace(n,e):""},TXt(t,s,i){const e=this.Hzt(t.toString(),s,i);return e?e.length:0},IXt(t,s,i,e){e=Math.floor(e);const n=this.Hzt(t.toString(),s,i);return!n||e<0||e>=n.length?"":n[e]},CXt(t,s){let i=t<0?"-":"";t<0&&(t=-t);const e=s-t.toString().length;return i+="0".repeat(Math.max(e,0)),i+t.toString()},_Xt:t=>encodeURIComponent(t),EXt:t=>decodeURIComponent(t),PN(){return this.$c.l7()},PXt(){return this.$c.u7()},AXt(){return this.$c.WN()},RXt(){return(Date.now()-this.$c.Eqt())/1e3},OXt:()=>Date.now(),time(){return this.$c.DN()},FXt(){return this.$c.kN()},DXt(){return this.$c.Rqt()},VN(){return this.$c.HN()},LXt(){return this.$c.JN()},kXt(){return this.$c.XN()},NXt(){return this.$c.I$().oW()},$Xt(){return this.$c.I$().lW()},BXt(){return this.$c.Jk()},WXt(){return this.$c.Xk()},jXt(){return this.$c.Jk()},VXt(){return this.$c.Xk()},HXt(){return this.$c.O$().Lj()},UXt(){return this.$c.O$().Nj()},qXt(){return this.$c.O$().Pc()},zXt(){return this.$c.O$().Rj()},JXt(){return lT.tr(this.$c.O$().Fj())},YXt(){return this.$c.O$().Vg()},XXt(){return this.$c.O$().Qg()},KXt(){return 100*this.$c.O$().J5()},ZXt(){return 100*this.$c.O$().Y5()},QXt(t){const s=this.$c.O$().L$(t);return s?s.z1().Qa():0},tKt(t){const s=this.$c.O$().L$(t);return s?s.z1().tl():0},sKt(t){const s=this.$c.O$().L$(t);return s?s.z1().sl():0},iKt(t){const s=this.$c.O$().L$(t);return s?s.z1().il():0},eKt(t){const s=this.$c.O$().L$(t);return s?s.z1().width():0},nKt(t){const s=this.$c.O$().L$(t);return s?s.z1().height():0},rKt(t){const s=this.$c.O$().L$(t);if(s){const t=s.z1();return(t.Qa()+t.sl())/2}return 0},hKt(t){const s=this.$c.O$().L$(t);if(s){const t=s.z1();return(t.tl()+t.il())/2}return 0},oKt(t,s,i){const e=this.$c.O$().L$(t);return e?e.iH(s,i)[0]:0},aKt(t,s,i){const e=this.$c.O$().L$(t);return e?e.iH(s,i)[1]:0},lKt(t,s,i){const e=this.$c.O$().L$(t);return e?e.nH(s,i)[0]:0},uKt(t,s,i){const e=this.$c.O$().L$(t);return e?e.nH(s,i)[1]:0},cKt(t,s,i,e){const n=this.$c.O$(),r=n.L$(t),h=n.L$(s);if(!r||!h||r===h)return i;const[o,a]=r.nH(i,e);return h.iH(o,a)[0]},fKt(t,s,i,e){const n=this.$c.O$(),r=n.L$(t),h=n.L$(s);if(!r||!h||r===h)return e;const[o,a]=r.nH(i,e);return h.iH(o,a)[1]},dKt(t){const s=this.$c.O$().L$(t);return s?s.PV():0},pKt(t){const s=this.$c.O$().L$(t);return s?lT.tr(s.FV()):0},mKt(t){const s=this.$c.O$().L$(t);return s?100*s.SO():0},gKt(t){const s=this.$c.O$().L$(t);return s?s.OV():0},yKt(t){const s=this.$c.O$().L$(t);return s?s.Lj():0},wKt(t){const s=this.$c.O$().L$(t);return s?s.Nj():0},SKt(t){const s=this.$c.O$().L$(t);return s?100*s.kV():0},vKt(t){const s=this.$c.O$().L$(t);return s?100*s.BV():0},bKt(t){const s=this.$c.O$().L$(t);return s?s.tx():0},MKt(t){const s=this.$c.O$().L$(t);return s?s.xk():-1},xKt(){const t=this.$c.I$();return t?t.QWt():""},GKt(t){const s=this.kmt;if(!s.Omt())return 0;if(t){const i=s.Dmt(t);return i?i.xk():0}return s.Amt().xk()},TKt(){return this.$c.Uqt()},IKt(t,s,...i){const e=this.rJt(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let n=e.oJt.get(s.toLowerCase());if(!n){if(!e.hJt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;n=e.hJt}const r=n.wN(),h=n.uN();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!n.Cu())return h;const o=this.$c.aN(),a=o.pN().dN(),l=a.length>0;l&&(n.yN()?o.oX(a):o.Oyt(a));const u=n._wt();for(let t=i.length,s=u.length;t<s;++t)i.push(u[t].Ogt());const c=n.fN(),f=c.gN(c.dN(),n.yN(),r,h,...i);return l&&o.lX(a),f},CKt(){return this.$c._k().o$()},_Kt(){return this.PZ()},zC(){return this.$c.DWt()?"webgpu":"webgl"},EKt(){return this.$c.DWt()?this.$c.DWt().LWt():this.$c.FWt().EF()},PKt(){let t=this.$c.gM().Ub();return Math.round(100*t/1048576)/100},AKt:(t,s,i)=>lT.Cr(t,s,i),RKt:(t,s,i)=>lT.Er(t/100,s/100,i/100),OKt:(t,s,i,e)=>lT._r(t/100,s/100,i/100,e/100),FKt:(t,s,i)=>lT.Er(t/255,s/255,i/255),DKt:(t,s,i,e)=>lT._r(t/255,s/255,i/255,e/255),LKt(){return this.$c.Dk()},kKt(){return this.$c.kk()},NKt(){return this.$c.$k()},$Kt(){return this.$c.Wk()},BKt(){return this.$c.pN().Z5().Pc()},WKt(){return this.$c.pN().Gvt()}}}{const uT=self.Cs;uT.sB.Touch=class extends uT.KCt{constructor(t){super(t)}qn(){super.qn()}}}{let cT=function(){return pT.VW().iz()};GetTouchSdkInstance=cT;const fT=self.Cs,dT=self.Ns;fT.sB.Touch.dRt=class extends fT.D_t{constructor(t){super(t)}qn(){super.qn()}v_t(){}b_t(){return self.jKt}};let pT=null;self.jKt=class extends self.rj{constructor(t){super(t),pT=t,t.aB().b$().x$=this}requestPermission(t){dT.ue(t);const s=cT();if("orientation"===t)return s.VKt(0);if("motion"===t)return s.VKt(1);throw new Error("invalid type")}}}{const mT=self.Cs,gT="touch";mT.sB.Touch.Instance=class extends mT.B_t{constructor(t,s){super(t,gT),this.HKt=new Map,this.UKt=!1,this.qKt=!1,this.zKt=0,this.JKt=0,this.YKt=0,this.XKt=0,this.KKt=0,this.ZKt=0,this.QKt=0,this.tZt=0,this.sZt=0,this.iZt=0,this.eZt=0,this.nZt=0,this.rZt=0,this.hZt=0,this.oZt=0,this.aZt=0,this.lZt=0,this.uZt=[],s&&(this.UKt=s[0]),this.X_t("permission-result",t=>this.cZt(t));const i=this.aB().Sf();this.Kf=new mT.Jf(mT.jf.zf(i,"pointerdown",t=>this.fZt(t.data)),mT.jf.zf(i,"pointermove",t=>this.dZt(t.data)),mT.jf.zf(i,"pointerup",t=>this.pZt(t.data,!1)),mT.jf.zf(i,"pointercancel",t=>this.pZt(t.data,!0)),mT.jf.zf(i,"deviceorientation",t=>this.mZt(t.data)),mT.jf.zf(i,"deviceorientationabsolute",t=>this.gZt(t.data)),mT.jf.zf(i,"devicemotion",t=>this.yZt(t.data)),mT.jf.zf(i,"tick2",t=>this.e8()))}qn(){this.HKt.clear(),super.qn()}fZt(t){if("mouse"===t.pointerType){if(!this.UKt)return;this.qKt=!0}const s=t.pointerId;if(this.HKt.has(s))return;const i=t.pageX-this.$c.QB(),e=t.pageY-this.$c.sW(),n=performance.now(),r=this.HKt.size;this.eZt=r,this.nZt=s;const h=mT.Un(mT.sB.Touch.wZt);h.DOt(n,i,e,s,r),this.HKt.set(s,h),this.JH(mT.sB.Touch.Q$.SZt),this.JH(mT.sB.Touch.Q$.vZt),this.hZt=i,this.oZt=e,this.lZt=0,this.JH(mT.sB.Touch.Q$.bZt)}dZt(t){if("mouse"===t.pointerType&&!this.qKt)return;const s=this.HKt.get(t.pointerId);if(!s)return;const i=performance.now();if(i-s.YF()<2)return;const e=t.pageX-this.$c.QB(),n=t.pageY-this.$c.sW();s.EQ(i,e,n,t.width,t.height,t.pressure)}pZt(t,s){if("mouse"===t.pointerType){if(!this.qKt)return;this.qKt=!1}const i=performance.now(),e=t.pointerId,n=this.HKt.get(e);if(n){if(this.eZt=n.MZt(),this.nZt=n.OJ(),!s){const s=t.pageX-this.$c.QB(),i=t.pageY-this.$c.sW();this.hZt=s,this.oZt=i,this.lZt=1,this.JH(mT.sB.Touch.Q$.bZt)}if(this.JH(mT.sB.Touch.Q$.xZt),this.JH(mT.sB.Touch.Q$.GZt),!s){const t=n.TZt(i);"single-tap"===t?(this.JH(mT.sB.Touch.Q$.IZt),this.hZt=n.YM(),this.oZt=n.ZM(),this.JH(mT.sB.Touch.Q$.CZt)):"double-tap"===t&&(this.JH(mT.sB.Touch.Q$._Zt),this.hZt=n.YM(),this.oZt=n.ZM(),this.JH(mT.sB.Touch.Q$.EZt))}n.qn(),this.HKt.delete(e)}}VKt(t){return this.tEt("request-permission",{type:t}),new Promise((s,i)=>{this.uZt.push({type:t,resolve:s,reject:i})})}cZt(t){const s=t.result,i=t.type;this.rZt=i;const e=this.uZt.filter(t=>t.type===i);for(const t of e)t.resolve(s?"granted":"denied");this.uZt=this.uZt.filter(t=>t.type!==i),s?(this.JH(mT.sB.Touch.Q$.PZt),0===i?this.$c.gzt():this.$c.yzt()):this.JH(mT.sB.Touch.Q$.AZt)}mZt(t){"number"==typeof t.webkitCompassHeading?this.zKt=t.webkitCompassHeading:t.absolute&&(this.zKt=t.alpha),this.JKt=t.alpha,this.YKt=t.beta,this.XKt=t.gamma}gZt(t){this.zKt=t.alpha}yZt(t){const s=t.acceleration;s&&(this.KKt=s.x,this.ZKt=s.y,this.QKt=s.z);const i=t.accelerationIncludingGravity;i&&(this.tZt=i.x,this.sZt=i.y,this.iZt=i.z)}e8(){const t=performance.now();let s=0;for(const i of this.HKt.values())i.YF()<=t-50&&i.RZt(t),i.OZt(t)&&(this.eZt=i.MZt(),this.nZt=i.OJ(),this.aZt=s,this.JH(mT.sB.Touch.Q$.FZt),this.hZt=i.YM(),this.oZt=i.ZM(),this.JH(mT.sB.Touch.Q$.DZt),this.aZt=0),++s}LZt(t){t=Math.floor(t);for(const s of this.HKt.values()){if(0===t)return s;--t}return null}kZt(t,s){return t>=0&&s>=0&&t<this.$c.LUt()&&s<this.$c.kUt()}lEt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.HKt.values()].map(t=>({name:"$"+t.OJ(),value:t.YM()+", "+t.ZM()}))}]}}}{const yT=self.Cs;yT.sB.Touch.Q$={vZt:()=>!0,GZt:()=>!0,NZt(){return this.HKt.size>0},bZt(t,s){return!!t&&s===this.lZt&&!!this.kZt(this.hZt,this.oZt)&&this.$c.Ak().CNt(t,[[this.hZt,this.oZt]],!1)},$Zt(t){if(!t)return!1;const s=this.$c.Dgt().eGt(),i=[...this.HKt.values()].filter(t=>this.kZt(t.YM(),t.ZM())).map(t=>[t.YM(),t.ZM()]);return yT.xor(this.$c.Ak().CNt(t,i,s),s)},BZt(t,s,i){const e=this.LZt(t);return!!e&&yT.compare(e.Gz(),s,i)},WZt:()=>!0,jZt:()=>!0,VZt(t,s,i){this.$c.gzt();let e=0;return e=0===t?this.JKt:1===t?this.YKt:this.XKt,yT.compare(e,s,i)},HZt(t,s,i){this.$c.yzt();let e=0;return e=0===t?this.tZt:1===t?this.sZt:2===t?this.iZt:3===t?this.KKt:4===t?this.ZKt:this.QKt,yT.compare(e,s,i)},SZt(t){return(t=Math.floor(t))===this.eZt},xZt(t){return(t=Math.floor(t))===this.eZt},UZt(t){return t=Math.floor(t),this.HKt.size>=t+1},FZt:()=>!0,IZt:()=>!0,_Zt:()=>!0,DZt(t){return!!t&&!!this.kZt(this.hZt,this.oZt)&&this.$c.Ak().CNt(t,[[this.hZt,this.oZt]],!1)},CZt(t){return!!t&&!!this.kZt(this.hZt,this.oZt)&&this.$c.Ak().CNt(t,[[this.hZt,this.oZt]],!1)},EZt(t){return!!t&&!!this.kZt(this.hZt,this.oZt)&&this.$c.Ak().CNt(t,[[this.hZt,this.oZt]],!1)},PZt(t){return this.rZt===t},AZt(t){return this.rZt===t}}}self.Cs.sB.Touch.wht={qZt(t){this.VKt(t)}};{const wT=self.Cs;wT.sB.Touch.Sht={zZt(){return this.HKt.size},lCt(t){const s=this.LZt(this.aZt);return s?s.JZt(this.$c.O$(),t,!0):0},uCt(t){const s=this.LZt(this.aZt);return s?s.JZt(this.$c.O$(),t,!1):0},YZt(t,s){const i=this.LZt(t);return i?i.JZt(this.$c.O$(),s,!0):0},XZt(t,s){const i=this.LZt(t);return i?i.JZt(this.$c.O$(),s,!1):0},KZt(t,s){const i=this.HKt.get(t);return i?i.JZt(this.$c.O$(),s,!0):0},ZZt(t,s){const i=this.HKt.get(t);return i?i.JZt(this.$c.O$(),s,!1):0},QZt(){const t=this.LZt(0);return t?t.YM():0},tQt(){const t=this.LZt(0);return t?t.ZM():0},sQt(t){const s=this.LZt(t);return s?s.YM():0},iQt(t){const s=this.LZt(t);return s?s.ZM():0},eQt(t){const s=this.HKt.get(t);return s?s.YM():0},nQt(t){const s=this.HKt.get(t);return s?s.ZM():0},rQt(t){const s=this.LZt(t);return s?s.Gz():0},hQt(t){const s=this.HKt.get(t);return s?s.Gz():0},oQt(t){const s=this.LZt(t);return s?wT.tr(s.Fj()):0},aQt(t){const s=this.HKt.get(t);return s?wT.tr(s.Fj()):0},lQt(){return this.$c.gzt(),this.zKt},uQt(){return this.$c.gzt(),this.JKt},cQt(){return this.$c.gzt(),this.YKt},fQt(){return this.$c.gzt(),this.XKt},dQt(){return this.$c.yzt(),this.tZt},pQt(){return this.$c.yzt(),this.sZt},mQt(){return this.$c.yzt(),this.iZt},gQt(){return this.$c.yzt(),this.KKt},yQt(){return this.$c.yzt(),this.ZKt},wQt(){return this.$c.yzt(),this.QKt},SQt(){return this.eZt},vQt(){return this.nZt},bQt(t){const s=this.HKt.get(t);return s?s.Vg():0},MQt(t){const s=this.HKt.get(t);return s?s.Qg():0},xQt(t){const s=this.HKt.get(t);return s?s.GQt():0}}}{const ST=self.Cs,vT=15,bT=500,MT=333,xT=25;let GT=-1e3,TT=-1e3,IT=-1e4;ST.sB.Touch.wZt=class extends ST.Vn{constructor(){super(),this.TQt=0,this.ZC=0,this.tHt=0,this.UD=0,this.IQt=0,this.CQt=0,this._Qt=0,this.Pa=0,this.Aa=0,this.EQt=0,this.PQt=0,this.Py=0,this.Ay=0,this.AQt=0,this.RQt=!1,this.OQt=!1}qn(){}DOt(t,s,i,e,n){this.TQt=e,this.ZC=n,this.UD=t,this.IQt=t,this.tHt=t,this.CQt=s,this._Qt=i,this.Pa=s,this.Aa=i,this.EQt=s,this.PQt=i}EQ(t,s,i,e,n,r){this.IQt=this.UD,this.UD=t,this.EQt=this.Pa,this.PQt=this.Aa,this.Pa=s,this.Aa=i,this.Py=e,this.Ay=n,this.AQt=r,!this.OQt&&ST.er(this.CQt,this._Qt,this.Pa,this.Aa)>=15&&(this.OQt=!0)}OJ(){return this.TQt}MZt(){return this.ZC}YF(){return this.UD}RZt(t){this.IQt=t}YM(){return this.Pa}ZM(){return this.Aa}Gz(){const t=ST.er(this.Pa,this.Aa,this.EQt,this.PQt),s=(this.UD-this.IQt)/1e3;return s>0?t/s:0}Fj(){return ST.rr(this.EQt,this.PQt,this.Pa,this.Aa)}Vg(){return this.Py}Qg(){return this.Ay}GQt(){return this.AQt}OZt(t){return!this.RQt&&t-this.tHt>=500&&!this.OQt&&ST.er(this.CQt,this._Qt,this.Pa,this.Aa)<15&&(this.RQt=!0,!0)}TZt(t){return this.RQt?"":t-this.tHt<=333&&!this.OQt&&ST.er(this.CQt,this._Qt,this.Pa,this.Aa)<15?t-IT<=666&&ST.er(GT,TT,this.Pa,this.Aa)<25?(GT=-1e3,TT=-1e3,IT=-1e4,"double-tap"):(GT=this.Pa,TT=this.Aa,IT=t,"single-tap"):""}JZt(t,s,i){if(void 0===s)return t.N$(0).K3(this.Pa,this.Aa)[i?0:1];{const e=t.L$(s);return e?e.iH(this.Pa,this.Aa)[i?0:1]:0}}}}{const CT=self.Cs;CT.sB.si=class extends CT.KCt{constructor(t){super(t)}qn(){super.qn()}}}{const _T=self.Cs;_T.sB.si.dRt=class extends _T.D_t{constructor(t){super(t)}qn(){super.qn()}v_t(){}}}{const ET=self.Cs,PT="browser";ET.sB.si.Instance=class extends ET.B_t{constructor(t,s){super(t,PT),this.FQt="",this.DQt=!1,this.LQt="",this.kQt="",this.NQt=!1,this.$Qt=0,this.BQt=0,this.WQt=0,this.jQt=0,this.VQt=!1,this.HQt=!1,this.UQt=new Map,this.qQt=!1,this.zQt="",this.JQt=!1,this.K_t([["online-state",t=>this.YQt(t)],["backbutton",()=>this.XQt()],["sw-message",t=>this.KQt(t)],["hashchange",t=>this.ZQt(t)],["install-available",()=>this.QQt()],["app-installed",t=>this.t0t(t)]]);const i=this.aB().Sf();this.Kf=new ET.Jf(ET.jf.zf(i,"afterfirstlayoutstart",()=>this.s0t()),ET.jf.zf(i,"window-resize",()=>this.LBt()),ET.jf.zf(i,"window-focus",()=>this.HHt()),ET.jf.zf(i,"window-blur",()=>this.VHt()),ET.jf.zf(i,"suspend",()=>this.i0t()),ET.jf.zf(i,"resume",()=>this.e0t())),this.$c.J$(this.Q_t("get-initial-state",{exportType:this.$c.qB()}).then(t=>{this.FQt=t.location,this.DQt=t.isOnline,this.LQt=t.referrer,this.kQt=t.title,this.NQt=t.isCookieEnabled,this.$Qt=t.screenWidth,this.BQt=t.screenHeight,this.WQt=t.windowOuterWidth,this.jQt=t.windowOuterHeight,this.VQt=t.windowHasFocus,this.HQt=t.isConstructArcade}))}qn(){super.qn()}s0t(){this.Z_t("ready-for-sw-messages")}async YQt(t){const s=!!t.isOnline;this.DQt!==s&&(this.DQt=s,this.DQt?await this.K$(ET.sB.si.Q$.n0t):await this.K$(ET.sB.si.Q$.r0t))}async LBt(){await this.K$(ET.sB.si.Q$.h0t)}async HHt(){this.VQt=!0,await this.K$(ET.sB.si.Q$.o0t)}async VHt(){this.VQt=!1,await this.K$(ET.sB.si.Q$.a0t)}i0t(){this.JH(ET.sB.si.Q$.l0t)}e0t(){this.JH(ET.sB.si.Q$.u0t)}async XQt(){await this.K$(ET.sB.si.Q$.c0t)}KQt(t){const s=t.type;"downloading-update"===s?this.JH(ET.sB.si.Q$.f0t):"update-ready"===s||"update-pending"===s?this.JH(ET.sB.si.Q$.d0t):"offline-ready"===s&&this.JH(ET.sB.si.Q$.p0t)}ZQt(t){this.FQt=t.location,this.JH(ET.sB.si.Q$.m0t)}QQt(){this.qQt=!0,this.JH(ET.sB.si.Q$.g0t)}t0t(t){this.qQt=!1,this.JH(ET.sB.si.Q$.y0t)}w0t(){return this.JQt}S0t(t){t=!!t,this.JQt!==t&&(this.JQt=t,this.Z_t("set-warn-on-close",{enabled:t}))}lEt(){const t="plugins.browser.debugger";return[{title:"plugins.browser.name",properties:[{name:t+".user-agent",value:navigator.userAgent},{name:t+".is-online",value:this.DQt},{name:t+".is-fullscreen",value:this.$c.I$().MWt()}]}]}}}{const AT=self.Cs;AT.sB.si.Q$={v0t(){return this.DQt},n0t:()=>!0,r0t:()=>!0,h0t:()=>!0,o0t:()=>!0,a0t:()=>!0,b0t(){return this.VQt},M0t(){return this.NQt},x0t(){return this.$c.I$().MWt()},c0t:()=>!0,G0t(t){return(this.$c.I$().rY()<=this.$c.I$().hY()?0:1)===t},f0t:()=>!0,d0t:()=>!0,p0t:()=>!0,m0t:()=>!0,g0t:()=>!0,T0t(){return this.qQt},I0t(t){switch(t){case 0:return"accepted"===this.zQt;case 1:return"dismissed"===this.zQt;case 2:return"error"===this.zQt;case 3:return!0;default:return!1}},y0t:()=>!0,C0t(t){const s=this.$c.I$().GWt();switch(t){case 0:return"browser"===s;case 1:return"minimal-ui"===s;case 2:return"standalone"===s;case 3:return"fullscreen"===s;default:return!1}},_0t(){return this.w0t()},E0t(){return!this.$c.EN()},l0t:()=>!0,u0t:()=>!0,P0t:()=>!1,A0t:()=>!1,R0t:()=>!1,O0t:()=>!1,F0t:()=>!1,D0t:()=>!0,L0t:()=>!0}}{const C3=self.Cs,ORIENTATIONS=["portrait","landscape","portrait-primary","portrait-secondary","landscape-primary","landscape-secondary"];C3.sB.si.wht={k0t(t){this.Z_t("alert",{message:t.toString()})},N0t(){this.HQt||(this.$c.iU()?self.eU.$0t():this.Z_t("close"))},B0t(){this.Z_t("set-focus",{isFocus:!0})},W0t(){this.Z_t("set-focus",{isFocus:!1})},j0t(){this.HQt||this.Z_t("navigate",{type:"back"})},V0t(){this.HQt||this.Z_t("navigate",{type:"forward"})},H0t(){},U0t(){this.HQt||(this.$c.iU()?this.$c.tUt({type:"reload"}):this.Z_t("navigate",{type:"reload"}))},q0t(t,s){this.tEt("navigate",{type:"url",url:t,target:s,exportType:this.$c.qB()})},z0t(t,s){this.tEt("navigate",{type:"new-window",url:t,tag:s,exportType:this.$c.qB()})},J0t(t,s){t>=2&&(t+=1),6===t&&(t=2),1===t&&(t=0);const i=C3.g$t.PWt(t);this.$c.I$().IWt(i),this.tEt("request-fullscreen",{navUI:s})},Y0t(){this.tEt("exit-fullscreen")},X0t(t){const s=t.split(",");for(let t=0,i=s.length;t<i;++t)s[t]=parseInt(s[t],10);this.tEt("vibrate",{pattern:s})},async _$(t,s){if(!t||!s)return;const i=await this.$c._k().pB(t);this.$c._$(i,s)},K0t(t,s,i){if(!i)return;const e=`data:${s},${encodeURIComponent(t)}`;this.$c._$(e,i)},Z0t(t,s){s=s.toString(),0===t?console.log(s):1===t?console.warn(s):2===t&&console.error(s)},Q0t(t){console.group(t)},t1t(){console.groupEnd()},s1t(jsStr){try{eval(jsStr)}catch(t){console.error("Error executing JavaScript: ",t)}},i1t(t){if((t=Math.floor(t))<0||t>=ORIENTATIONS.length)return;const s=ORIENTATIONS[t];this.tEt("lock-orientation",{orientation:s})},e1t(){this.tEt("unlock-orientation")},IB(t){this.$c._k().IB(t)},async n1t(t,s,i,e){await this.Q_t("set-document-css-style",{prop:C3.bo(t),value:s,selector:i,"is-all":0!==e})},async r1t(t,s,i){const e=await this.Q_t("get-document-css-style",{prop:t,selector:s});e.isOk&&this.UQt.set(i.toLowerCase(),e.result.trim())},h1t(t){this.Z_t("set-hash",{hash:t})},o1t(t,s){this.Z_t("set-window-size",{windowWidth:t,windowHeight:s})},a1t(t,s){this.Z_t("set-window-position",{windowX:t,windowY:s})},async l1t(){const t=await this.Q_t("request-install");this.zQt=t.result,this.JH(C3.sB.si.Q$.I0t)},u1t(t){this.S0t(t)}}}{const C3=self.Cs;C3.sB.si.Sht={URL(){return this.$c.qk()?this.FQt:location.toString()},c1t(){return this.$c.qk()?new URL(this.FQt).protocol:location.protocol},f1t(){return this.$c.qk()?new URL(this.FQt).hostname:location.hostname},Port(){return this.$c.qk()?new URL(this.FQt).port:location.port},d1t(){return this.$c.qk()?new URL(this.FQt).pathname:location.pathname},p1t(){return this.$c.qk()?new URL(this.FQt).hash:location.hash},Ys(){return this.$c.qk()?new URL(this.FQt).search:location.search},m1t(t){const s=this.$c.qk()?new URL(this.FQt).search:location.search,i=RegExp("[?&]"+t+"=([^&]*)").exec(s);return i?decodeURIComponent(i[1].replace(/\+/g," ")):""},g1t(){return this.LQt},y1t(){return this.kQt},w1t:()=>navigator.language,Zs:()=>navigator.platform,S1t:()=>navigator.userAgent,v1t(jsStr){let result=0;try{result=eval(jsStr)}catch(t){console.error("Error executing JavaScript: ",t)}return"number"==typeof result||"string"==typeof result?result:"boolean"==typeof result&&result?1:0},CSSStyleValue(t){return this.UQt.get(t)||""},b1t:()=>navigator.appName,M1t:()=>navigator.appVersion,x1t:()=>navigator.product,G1t:()=>navigator.vendor,T1t:()=>1,I1t:()=>1/0,C1t(){const t=navigator.connection;return t&&(t.downlink||t.downlinkMax||t.bandwidth)||1/0},ConnectionType(){const t=navigator.connection;return t&&t.type||"unknown"},_1t:()=>self.devicePixelRatio,E1t(){return this.$Qt},P1t(){return this.BQt},A1t(){return this.$c.I$().rY()},R1t(){return this.$c.I$().hY()},O1t(){return this.WQt},F1t(){return this.WQt},D1t(){return this.$c.I$().GWt()},L1t(){return this.zQt}}}{const RT=self.Cs;RT.sB.Text=class extends RT.KCt{constructor(t){super(t)}qn(){super.qn()}}}{const OT=self.Cs;OT.sB.Text.dRt=class extends OT.D_t{constructor(t){super(t)}qn(){super.qn()}v_t(){}m4(t){}b4(){}}}{const FT=self.Cs,DT=self.Ns,LT=[0,0,0],kT=0,NT=1,$T=2,BT=3,WT=4,jT=5,VT=6,HT=7,UT=8,qT=9,zT=10,JT=11,YT=12,XT=13,KT=15,ZT=["left","center","right"],QT=["top","center","bottom"],tI=["ltr","rtl"],sI=["word","cjk","character"],iI=new FT.Rect,eI=new FT.El,nI=new FT.Go,rI=FT.Un(FT.Ea),hI=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]);FT.sB.Text.Instance=class extends FT.pEt{constructor(t,s){if(super(t),this.Bc="",this.k1t=!0,this.N1t="Arial",this.$1t=12,this.B1t=0,this.TE=!1,this.IE=!1,this.OM=FT.Un(FT.Go),this.RE=0,this.OE=0,this.LE="word",this.kE=0,this.W1t="auto",this.j1t=1,this.V1t=null,this.H1t="",this.U1t=!1,this.q1t=!1,this.z1t=null,this.J1t=-1,this.Y1t=-1,this.X1t=0,this.K1t=FT.Un(FT.Nw.Jb,this.$c.gM(),{timeout:5}),this.K1t.uP=()=>this.$c.j$(),this.Z1t=()=>this.Q1t(),this.t2t=!1,s){this.Bc=s[kT],this.k1t=!!s[NT],this.N1t=s[$T],this.$1t=s[BT],this.B1t=s[WT],this.TE=!!s[jT],this.IE=!!s[VT],this.RE=s[UT],this.OE=s[qT],this.LE=sI[s[zT]],this.kE=s[JT],this.s2t(this.$c.QY(s[YT]));const t=s[HT];this.OM.Po(t[0],t[1],t[2]),this.D$().wV(s[XT]),this.q1t=!!s[KT]}this.i2t(),this.e2t()}qn(){this.s2t(null),this.n2t(),this.z1t&&(this.z1t.qn(),this.z1t=null),this.K1t.qn(),this.K1t=null,super.qn()}i2t(){const t=this.K1t;t.Vc(this.Bc),t.pP(this.k1t),this.K1t.wE()&&this.V1t?this.K1t.Wg(this.aB().Bqt(this.V1t)):this.K1t.Wg(null),t.mP("nearest"!==this.$c.Kk()),t.gP(this.N1t),t.vP(this.B1t),t.MP(this.TE),t.GP(this.IE),t.$M(this.OM),t.AP(ZT[this.RE]),t.OP(QT[this.OE]),t.DP(this.LE),t.kP(tI[this.kE])}r2t(){const t=this.D$();this.K1t.yP(this.$1t),this.K1t.SP(t.dLt());const s=t.L$();let i;"auto"===this.W1t?i=s.J2(t.LU()):"fixed"===this.W1t&&(i=this.j1t),t.qq()&&i!==this.K1t.WP()&&t.ykt(!0),this.K1t.BP(t.Vg(),t.Qg(),i)}s2t(t){t&&(t.v1()||t.qW().constructor!==FT.sB.$rt)||t!==this.V1t&&(this.V1t&&this.V1t.Sf().removeEventListener("animationframeimagechange",this.Z1t),this.V1t=t,this.V1t&&this.V1t.Sf().addEventListener("animationframeimagechange",this.Z1t),this.i2t(),this.U1t=!1,this.$c.j$())}Q1t(){this.$c.Wqt(this.V1t),this.$c.j$(),this.t2t=!0}e2t(){if(this.q1t){let t=this.Bc;this.k1t&&(t=FT.pn.Dg(t)),this.z1t?this.z1t.Vc(t):this.z1t=FT.Un(FT.Nc,this.$c,t)}else this.z1t&&(this.z1t.qn(),this.z1t=null)}Zx(t){const s=this.D$();this.r2t(),this.t2t&&(this.t2t=!1,this.K1t.wE()&&this.V1t&&this.K1t.Wg(this.aB().Bqt(this.V1t)));const i=this.K1t.TT();if(!i)return;const e=s.L$();if(0===s.Fj()&&0===e.Fj()&&0===s.LU()&&!s.qq()&&e.a2()){const n=s.WU(),[r,h]=e.aH(n.$r(),n.Br()),[o,a]=e.aH(n.Vr(),n.Hr()),l=r-Math.round(r),u=h-Math.round(h);iI.set(r,h,o,a),iI.offset(-l,-u),eI.Xl(iI);const[c,f]=t.WO(t.hF());t.jb()?this.$c.I$().hK(t,c,f):(t.UL(!0),eI.St(c,f)),t.GO(i),t.sb(eI,this.K1t.yA()),t.jb()?e.aK(t):t.UL(!1)}else t.GO(i),s.qq()?this.h2t(s,t):this.o2t(s,t)}o2t(t,s){let i=t.WU();this.$c.Qk()&&(i=this.a2t(i)),s.sb(i,this.K1t.yA())}h2t(t,s){const i=t.gkt();if(t.wkt()){t.NU(iI,eI,!1);let s=eI;this.$c.Qk()&&(s=this.a2t(s)),i.qx(t.zq(),s,this.K1t.yA()),t.ykt(!1)}i.Zx(s,t.LU())}a2t(t){const s=t.$r()-Math.round(t.$r()),i=t.Br()-Math.round(t.Br());return 0===s&&0===i?t:(eI.S(t),eI.offset(-s,-i),eI)}xEt(){const t=this.K1t.TT();return t?[t.Vg(),t.Qg()]:[100,100]}GEt(){return this.K1t.yA()}CEt(){return!1}mx(){const t={t:this.Bc,c:this.OM.toJSON(),fn:this.N1t,ps:this.$1t};return this.k1t&&(t.bbc=this.k1t),0!==this.RE&&(t.ha=this.RE),0!==this.OE&&(t.va=this.OE),"word"!==this.LE&&(t.wr=this.LE),0!==this.B1t&&(t.lho=this.B1t),this.TE&&(t.b=this.TE),this.IE&&(t.i=this.IE),-1!==this.Y1t&&(t.tw={st:this.J1t,en:this.Y1t,l:this.X1t}),this.V1t&&(t.ioc=this.V1t._1()),"fixed"===this.W1t&&(t.fs=this.j1t),t}gx(t){if(this.n2t(),this.Bc=t.t,this.OM.Sa(t.c),this.N1t=t.fn,this.$1t=t.ps,this.k1t=!!t.hasOwnProperty("bbc")&&t.bbc,this.RE=t.hasOwnProperty("ha")?t.ha:0,this.OE=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.LE="boolean"==typeof s?s?"word":"character":s}else this.LE="word";if(this.B1t=t.hasOwnProperty("lho")?t.lho:0,this.TE=!!t.hasOwnProperty("b")&&t.b,this.IE=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const s=t.tw;this.J1t=s.st,this.Y1t=s.en,this.X1t=s.l}if(t.hasOwnProperty("ioc")){const s=this.aB().QY(t.ioc);s&&this.s2t(s)}else this.s2t(null);t.hasOwnProperty("fs")?(this.W1t="fixed",this.j1t=t.fs):this.W1t="auto",this.i2t(),this.e2t(),this.U1t=!1,-1!==this.Y1t&&this.rEt()}sot(t){switch(t){case kT:return this.$P();case NT:return this.k1t;case $T:return this.l2t();case BT:return this.u2t();case WT:return this.c2t();case jT:return this.f2t();case VT:return this.d2t();case HT:return LT[0]=this.OM.No(),LT[1]=this.OM.$o(),LT[2]=this.OM.Bo(),LT;case UT:return this.p2t();case qT:return this.m2t();case zT:return this.g2t();case KT:return this.y2t()}}oot(t,s){switch(t){case kT:this.w2t(s);break;case NT:if(this.k1t===!!s)return;this.k1t=!!s,this.i2t();break;case $T:this.S2t(s);break;case BT:this.v2t(s);break;case WT:this.b2t(s);break;case jT:this.M2t(s);break;case VT:this.x2t(s);break;case HT:const t=this.OM,i=s;if(t.No()===i[0]&&t.$o()===i[1]&&t.Bo()===i[2])return;this.OM.Po(i[0],i[1],i[2]),this.i2t();break;case UT:this.G2t(s);break;case qT:this.T2t(s);break;case zT:this.I2t(s)}}uEt(t,s,i,e){0===s&&0===i&&0===e||t!==HT||(this.OM.Ao(s,i,e),this.i2t())}w2t(t){this.Bc!==t&&(this.Bc=t,this.K1t.Vc(t),this.e2t(),this.U1t=!1,this.$c.j$())}$P(){return this.Bc}C2t(t,s){this.r2t(),this.w2t(t),this.J1t=this.$c.$N(),this.Y1t=this.J1t+s/this.EJ().PH(),this.X1t=this.K1t.UP(),this.K1t.IP(0),this.rEt()}n2t(){this.J1t=-1,this.Y1t=-1,this.X1t=0,this.K1t.IP(-1),this.V_t()}_2t(){-1!==this.Y1t&&(this.n2t(),this.JH(FT.sB.Text.Q$.E2t),this.$c.j$())}S2t(t){this.N1t!==t&&(this.N1t=t,this.K1t.gP(t),this.$c.j$())}l2t(){return this.N1t}M2t(t){t=!!t,this.TE!==t&&(this.TE=t,this.K1t.MP(t),this.$c.j$())}f2t(){return this.TE}x2t(t){t=!!t,this.IE!==t&&(this.IE=t,this.K1t.GP(t),this.$c.j$())}d2t(){return this.IE}v2t(t){this.$1t!==t&&(this.$1t=t,this.$c.j$())}u2t(){return this.$1t}P2t(t){this.OM.qo(t)||(this.OM.ko(t),this.K1t.$M(this.OM),this.$c.j$())}A2t(){return this.OM}b2t(t){this.B1t!==t&&(this.B1t=t,this.i2t(),this.$c.j$())}c2t(){return this.B1t}G2t(t){this.RE!==t&&(this.RE=t,this.i2t(),this.$c.j$())}p2t(){return this.RE}T2t(t){this.OE!==t&&(this.OE=t,this.i2t(),this.$c.j$())}m2t(){return this.OE}R2t(t){this.I2t(sI[t])}I2t(t){this.LE!==t&&(this.LE=t,this.i2t(),this.$c.j$())}g2t(){return this.LE}O2t(t){this.kE!==t&&(this.kE=t,this.i2t(),this.$c.j$())}F2t(){return this.kE}D2t(t){this.q1t=!!t,this.e2t()}y2t(){return this.q1t}L2t(t){this.W1t!==t&&(this.W1t=t,this.$c.j$())}k2t(){return this.W1t}N2t(t){this.j1t!==t&&(this.j1t=t,"fixed"===this.W1t&&this.$c.j$())}$2t(){return this.j1t}B2t(){return this.r2t(),this.K1t.jP()}W2t(){return this.r2t(),this.K1t.HP()}j2t(t,s){this.r2t();const i=this.D$();rI.set(t-i.YM(),s-i.ZM()),rI.rotate(-i.Fj()),rI.offset(i.Vg()*i._U(),i.Qg()*i.AU()),rI.St(i.Vg(),i.Qg()),rI.scale(this.K1t.Vg(),this.K1t.Qg());const e=this.K1t.zP(rI.Fa(),rI.La());if(e){const t=e.Uy("tag");if(t)return t.Eg}return""}V2t(t,s,i){const e=this.j2t(s,i);return e&&FT.Ze(t,e)}H2t(t,s){this.r2t(),s=Math.floor(s);const i=this.K1t.YP(t,s);if(!i)return null;const e=this.D$(),n=this.K1t.EP(),r=i.By(),h=i.jy()-(i.Qg()-i.sy())*n,o=i.Vg()*n/this.K1t.Vg()*e.Vg(),a=i.Qg()*n/this.K1t.Qg()*e.Qg();return rI.set(r,h),rI.St(this.K1t.Vg(),this.K1t.Qg()),rI.scale(e.Vg(),e.Qg()),rI.offset(-e.Vg()*e._U(),-e.Qg()*e.AU()),rI.rotate(e.Fj()),rI.offset(e.YM(),e.ZM()),{x:rI.Fa(),y:rI.La(),width:o,height:a}}U2t(t){return this.r2t(),this.K1t.XP(t)}q2t(t){let s=hI.get(t);return null===s?"":(s||(s="span"),`</${s||"span"}>`)}z2t(t,s){let i=hI.get(t);if(null===i)return"";switch(i||(i="span"),t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async J2t(){if(this.U1t)return this.H1t;const t=new FT.pn(this.Bc,{pg:!0}).Cg(),s=new Map;let i='<span class="c3-text"';const e=[];e.push(`font-family: '${this.l2t()}';`),this.f2t()&&e.push("font-weight: bold;"),this.d2t()&&e.push("font-style: italic;"),"character"===this.g2t()&&e.push("word-break: break-all;"),i+=` style="${e.join(" ")}">`;const n=this.V1t?this.aB().Bqt(this.V1t):null;if(this.V1t){const i=FT.Un(FT.Ud),e=[],r=new Map;for(const s of t)if(s.Kg()){const t=s.Ky(n);if(t){const s=t.Fw().Wz().XPt();if(r.has(s))continue;r.set(s,null),e.push(i.Bu(async()=>{const t=await s.lQ();r.set(s,t)}))}}await Promise.all(e);const h=[];for(const e of t)if(e.Kg()){const t=e.Ky(n);if(t){const e=t.Fw(),n=e.Wz().XPt();h.push(i.Bu(async()=>{const i=await e.Wz().ZPt(r.get(n));s.set(t,i)}))}}await Promise.all(h);for(const t of r.values())t instanceof ImageBitmap&&t.close&&t.close()}const r=new Map;for(const e of t){const t=e.zy();let h=[...r.keys()];h.reverse();for(const s of h)t.has(s)&&t.get(s)===r.get(s)||(r.delete(s),i+=this.q2t(s));for(const[s,e]of t)r.has(s)||(r.set(s,e),i+=this.z2t(s,e));if(e.Yg()&&(i+=FT.Pm(FT._m(e.wy().join("")),"\n","<br>")),e.Kg()&&n){const r=e.Ky(n);if(r){const n=s.get(r);if(n){const s=[];let h="0.2em";const o=t.get("iconoffsety");if(o){let t=o.trim();h=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}s.push(`top: ${h}`),"nearest"===this.$c.Kk()&&s.push("image-rendering: pixelated"),i+=`<img class="c3-text-icon" data-icon="${e.Xy()}" width="${r.Vg()}" height="${r.Qg()}" style="${s.join(";")}" src="${n}">`}}}}const h=[...r.keys()];h.reverse();for(const t of h)i+=this.q2t(t);return i+="</span>",this.H1t=i,this.U1t=!0,this.H1t}c7(){const t=this.$c.$N();if(t>=this.Y1t)this.n2t(),this.JH(FT.sB.Text.Q$.E2t),this.$c.j$();else{let s=FT.gr(this.J1t,this.Y1t,t,0,this.X1t);s=Math.floor(s),s!==this.K1t.CP()&&(this.K1t.IP(s),this.$c.j$())}}lEt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.$P(),Y2t:t=>this.w2t(t)},{name:t+".properties.font.name",value:this.l2t(),Y2t:t=>this.S2t(t)},{name:t+".properties.size.name",value:this.u2t(),Y2t:t=>this.v2t(t)},{name:t+".properties.line-height.name",value:this.c2t(),Y2t:t=>this.b2t(t)},{name:t+".properties.bold.name",value:this.f2t(),Y2t:t=>this.M2t(t)},{name:t+".properties.italic.name",value:this.d2t(),Y2t:t=>this.x2t(t)},{name:t+".debugger.text-width",value:this.B2t()},{name:t+".debugger.text-height",value:this.W2t()}]}]}b_t(){return self.X2t}};const oI=new WeakMap,aI=new Map([["left",0],["center",1],["right",2]]),lI=new Map([["top",0],["center",1],["bottom",2]]),uI=["ltr","rtl"];self.X2t=class extends self.Kq{constructor(){super(),oI.set(this,self.cH.mH().iz())}get text(){return oI.get(this).$P()}set text(t){DT.ue(t);const s=oI.get(this);s.n2t(),s.w2t(t)}K2t(t,s){DT.ue(t),DT.he(s);const i=oI.get(this);i.n2t(),i.C2t(t,s)}Z2t(){oI.get(this)._2t()}set uK(t){DT.ue(t),oI.get(this).S2t(t)}get uK(){return oI.get(this).l2t()}set fK(t){oI.get(this).M2t(t)}get fK(){return oI.get(this).f2t()}set dK(t){oI.get(this).x2t(t)}get dK(){return oI.get(this).d2t()}set cK(t){DT.he(t),oI.get(this).v2t(t)}get cK(){return oI.get(this).u2t()}set Q2t(t){if(DT.Te(t),t.length<3)throw new Error("expected 3 elements");nI.Po(t[0],t[1],t[2]),oI.get(this).P2t(nI)}get Q2t(){const t=oI.get(this).A2t();return[t.No(),t.$o(),t.Bo()]}set lineHeight(t){DT.he(t),oI.get(this).b2t(t)}get lineHeight(){return oI.get(this).c2t()}set gK(t){DT.ue(t);const s=aI.get(t);if(void 0===s)throw new Error("invalid mode");oI.get(this).G2t(s)}get gK(){return ZT[oI.get(this).p2t()]}set verticalAlign(t){DT.ue(t);const s=lI.get(t);if(void 0===s)throw new Error("invalid mode");oI.get(this).T2t(s)}get verticalAlign(){return QT[oI.get(this).m2t()]}set yK(t){if(!sI.includes(t))throw new Error("invalid mode");oI.get(this).I2t(t)}get yK(){return oI.get(this).g2t()}set wK(t){DT.ue(t);const s=uI.indexOf(t);if(-1===s)throw new Error("invalid text direction");oI.get(this).O2t(s)}get wK(){return uI[oI.get(this).F2t()]}set t3t(t){oI.get(this).D2t(!!t)}get t3t(){return oI.get(this).y2t()}s3t(t){DT.he(t);const s=oI.get(this);s.L2t("fixed"),s.N2t(t)}i3t(){oI.get(this).L2t("auto")}get bK(){return oI.get(this).B2t()}get MK(){return oI.get(this).W2t()}e3t(){const t=oI.get(this);return[t.B2t(),t.W2t()]}n3t(t,s,i){return DT.ue(t),DT.he(s),DT.he(i),oI.get(this).V2t(t,s,i)}r3t(t,s){return DT.he(t),DT.he(s),oI.get(this).j2t(t,s)}h3t(t,s=0){return DT.ue(t),DT.he(s),oI.get(this).H2t(t,s)}o3t(t){return DT.ue(t),oI.get(this).U2t(t)}a3t(t){const s=oI.get(this),i=s.aB().$B(t);s.s2t(i)}l3t(){return oI.get(this).J2t()}}}{const cI=self.Cs;cI.sB.Text.Q$={u3t(t,s){return s?this.Bc===t:cI.Ze(this.Bc,t)},c3t(){return-1!==this.Y1t},E2t:()=>!0,f3t(t,s,i){return this.V2t(t,s,i)}}}{const fI=self.Cs,dI=fI.Un(fI.Go);fI.sB.Text.wht={Vc(t){this.n2t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.w2t(t.toString())},d3t(t){this.n2t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),(t=t.toString())&&this.w2t(this.Bc+t)},p3t(t,s){this.n2t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.C2t(t.toString(),s)},m3t(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.N1t&&i===this.TE&&e===this.IE||(this.S2t(t),this.M2t(i),this.x2t(e))},yP(t){this.v2t(t)},g3t(t){dI.ta(t),dI.Kn(),this.P2t(dI)},y3t(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},w3t(t){this.D$().NM(t),this.$c.j$()},S3t(){this._2t()},vP(t){this.b2t(t)},v3t(t){this.G2t(t)},b3t(t){this.T2t(t)},M3t(t){this.R2t(t)},kP(t){this.O2t(t)},x3t(t){this.s2t(t)},G3t(){return this.J2t()},T3t(t){this.D2t(t)},I3t(t,s){this.L2t(["auto","fixed"][t]),this.N2t(s)}}}{const pI=self.Cs;pI.sB.Text.Sht={Text(){return this.Bc},C3t(){return this.k1t?pI.pn.Dg(this.Bc):this.Bc},_3t(){return this.N1t},E3t(){return this.$1t},P3t(){return this.B2t()},A3t(){return this.W2t()},R3t(){return this.B1t},O3t(t,s){return this.j2t(t,s)},F3t(t){return this.U2t(t)},D3t(t,s){const i=this.H2t(t,s);return i?i.x:0},L3t(t,s){const i=this.H2t(t,s);return i?i.y:0},k3t(t,s){const i=this.H2t(t,s);return i?i.width:0},N3t(t,s){const i=this.H2t(t,s);return i?i.height:0},$3t(){return this.H1t}}}{const mI=self.Cs;mI.sB.$rt=class extends mI.KCt{constructor(t){super(t)}qn(){super.qn()}}}{const gI=self.Cs,yI=self.Ns,wI=[];gI.sB.$rt.dRt=class extends gI.D_t{constructor(t){super(t),this.hRt=t.HRt()}qn(){gI.bh(this.hRt),super.qn()}v_t(){for(const t of this.hRt)t.oAt(this.$c)}m4(t){const s={uG:this.$c.Kk()};return Promise.all(this.hRt.map(i=>i.aAt(t,s)))}b4(){for(const t of this.hRt)t.lAt()}w4(){this.B3t()}B3t(){for(const t of this.mpt.ij())t.iz().W3t()}pGt(t){gI.sB.$rt.ECt(this,t)}QGt(t){wI.push({$_t:null,j3t:!1,JW:[]})}V3t(t,s,i){const e=wI.at(-1);e.$_t=t,e.j3t=i,e.JW.push(s)}tTt(t){const s=wI.pop(),i=s.$_t,e=s.j3t;if(!i)return;const n=new Map;for(const t of s.JW)t.iFt(n,i,e);for(const[t,s]of n)t.nj().$pt(s)}H3t(t){const s=this.fH().YRt(t),i=this.aB();return s.uAt(0).Wz().KX(i.gM(),{uG:i.Kk()}).then(()=>this.B3t()),s}U3t(t){for(const s of this.mpt.ij())s.iz().q3t(t);this.fH().XRt(t)}z3t(t,s){const i=this.mpt.zRt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.pAt(s);e<0&&(e+=i.Oz()+1);const n=gI.nAt.hAt(this.aB());i.cAt(n,e);const r=this.aB();n.Wz().KX(r.gM(),{uG:r.Kk()}).then(()=>this.B3t());for(const t of this.mpt.ij())t.iz().J3t();return n}Y3t(t,s){const i=this.mpt.zRt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.Oz())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.pAt(s);e<0&&(e+=i.Oz()),i.fAt(e);for(const t of this.mpt.ij())t.iz().J3t()}b_t(){return self.X3t}};const SI=new WeakMap;self.X3t=class extends self.rj{constructor(t){super(t),SI.set(this,t.ZGt())}K3t(t){yI.ue(t);const s=SI.get(this).fH().zRt(t);return s?s.mAt():null}Z3t(){return SI.get(this).fH().qRt().map(t=>t.mAt())}Q3t(t){return yI.ue(t),SI.get(this).H3t(t).mAt()}t5t(t){yI.ue(t),SI.get(this).U3t(t)}s5t(t,s){if(yI.ue(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return SI.get(this).z3t(t,s).Lz()}i5t(t,s){if(yI.ue(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");SI.get(this).Y3t(t,s)}}}{const vI=self.Cs,bI=self.Ns,MI=0,xI=1,GI=2,TI=3,II=vI.Un(vI.Rect),CI=vI.Un(vI.El),_I=vI.Un(vI.Ea),EI=1,PI=2,AI=4;vI.sB.$rt.Instance=class extends vI.pEt{constructor(t,s){super(t);let i=!0,e="",n=0,r=!0;s&&(i=!!s[MI],e=s[xI],n=s[GI],r=s[TI]),this.e5t=this.mpt.zRt(e)||this.mpt.HRt()[0],this.n5t=vI.Kn(n,0,this.e5t.Oz()-1),this.r5t=this.e5t.uAt(this.n5t);const h=this.r5t.Wz();this.h5t=h.TT(),this.o5t=h.yA(),this.a5t=h.IEt(),this.wEt(),t.tFt(PI,!0),t.tFt(EI,this.e5t.Gz()>=0),this.l5t=Math.abs(this.e5t.Gz()),this.u5t=this.e5t.Pz(),this.c5t=vI.Un(vI.td),this.f5t=0,this.d5t=0,this.p5t="",this.m5t=-1,this.g5t="",this.y5t=0;const o=this.D$();this.w5t=o.WU(),o.wV(i),o.eq(r),o.EU(this.r5t._U()),o.RU(this.r5t.AU()),o.rkt(this.r5t.Zz()),o.xU(),1===this.mpt.URt()&&1===this.mpt.HRt()[0].Oz()||0===this.l5t||this.rEt()}qn(){this.e5t=null,this.r5t=null,this.h5t=null,this.c5t=null,super.qn()}MEt(){return this.r5t.Wz()}wet(){return!0}rQ(){this.h5t=null}bEt(){this.W3t()}Zx(t){const s=this.h5t;if(null===s)return;t.GO(s);const i=this.D$();i.qq()?this.h2t(i,t):this.o2t(i,t)}o2t(t,s){let i=this.w5t;this.$c.Qk()&&(i=t.KLt(i)),s.LO(i,this.a5t)}h2t(t,s){const i=t.gkt();if(t.wkt()){t.NU(II,CI,!1);let s=CI;this.$c.Qk()&&(s=t.KLt(s)),i.qx(t.zq(),s,this.a5t),t.ykt(!1)}i.Zx(s,t.LU())}S5t(){return this.c5t.qs()}v5t(){return this.di.sFt(PI)}b5t(t){this.di.tFt(PI,t)}M5t(){return this.di.sFt(EI)}x5t(t){this.di.tFt(EI,t)}G5t(){return this.di.sFt(AI)}T5t(t){this.di.tFt(AI,t)}c7(){this.g5t&&this.I5t(),this.m5t>=0&&this.C5t();const t=this.l5t;if(!this.v5t()||0===t)return void this.V_t();const s=this.$c.AN(this.di);this.c5t.Bu(s);const i=this.S5t(),e=this.r5t,n=e.jz()/t;if(i<this.f5t+n)return;const r=this.e5t,h=this.u5t,o=r.Oz(),a=r._z(),l=r.Iz(),u=r.Rz();this.M5t()?this.n5t++:this.n5t--,this.f5t+=n,this.n5t>=o&&(u?(this.x5t(!1),this.n5t=o-2):l?this.n5t=h:(this.d5t++,this.d5t>=a?this._5t(!1):this.n5t=h)),this.n5t<0&&(u?(this.n5t=1,this.x5t(!0),l||(this.d5t++,this.d5t>=a&&this._5t(!0))):l?this.n5t=h:(this.d5t++,this.d5t>=a?this._5t(!0):this.n5t=h)),this.n5t=vI.Kn(this.n5t,0,o-1);const c=r.uAt(this.n5t);i>this.f5t+c.jz()/t&&(this.f5t=i),this.E5t(e,c)}_5t(t){this.n5t=t?0:this.e5t.Oz()-1,this.b5t(!1),this.p5t=this.e5t.Pc(),this.T5t(!0),this.N_t("animationend",!1,{animationName:this.p5t}),this.JH(vI.sB.$rt.Q$.P5t),this.JH(vI.sB.$rt.Q$.A5t),this.T5t(!1),this.d5t=0}E5t(t,s,i){if(t===s)return;const e=this.D$(),n=t.Wz(),r=s.Wz(),h=n.Vg(),o=n.Qg(),a=r.Vg(),l=r.Qg();i&&i.Brt?i.Brt(e,h,o,a,l):(h!==a&&e.Xg(e.Vg()*(a/h)),o!==l&&e.Hg(e.Qg()*(l/o))),e.EU(s._U()),e.RU(s.AU()),e.rkt(s.Zz()),e.xU(),this.r5t=s,this.h5t=r.TT(),this.o5t=r.yA(),this.a5t=r.IEt();const u=this.EJ().Ort();for(let i=0,e=u.length;i<e;++i)u[i].cPt(t,s);this.N_t("framechange",!1,{animationName:this.e5t.Pc(),R5t:this.n5t}),this.JH(vI.sB.$rt.Q$.O5t),this.$c.j$()}F5t(t){this.b5t(!0),this.f5t=this.S5t(),1===t&&0!==this.n5t&&(this.m5t=0,this.G5t()||this.C5t()),this.rEt()}D5t(t,s,i){this.g5t=t,this.y5t=s,this.rEt(),!i&&this.G5t()||this.I5t()}L5t(){return this.e5t}k5t(){return this.g5t?this.g5t:this.e5t.Pc()}q3t(t){vI.Ze(t,this.k5t())&&this.D5t(this.mpt.KRt().Pc(),1,!0)}N5t(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.mpt.zRt(this.k5t());if(!s)return;if(-1===(t=s.dAt(t)))return}isFinite(t)&&(this.m5t=t,this.G5t()||this.C5t())}J3t(){if(this.g5t||-1!==this.m5t)return;const t=this.r5t,s=this.e5t.uAt(vI.Kn(this.n5t,0,this.e5t.Oz()-1));t!==s&&this.E5t(t,s),this.e5t.Oz()>1&&this.l5t>0&&this.rEt()}$5t(){return this.n5t}B5t(){return this.r5t.iJ()}W5t(t){this.l5t=Math.abs(t),this.x5t(t>=0),this.l5t>0&&this.rEt()}j5t(){return this.M5t()?this.l5t:-this.l5t}V5t(t){"string"==typeof t&&-1===(t=this.e5t.dAt(t))||(t=vI.Kn(Math.floor(t),0,this.e5t.Oz()-1),this.u5t=t)}H5t(){return this.u5t}I5t(t){const s=this.r5t,i=this.mpt.zRt(this.g5t);if(this.g5t="",!i)return;if(i===this.e5t&&this.v5t())return;this.e5t=i,this.x5t(i.Gz()>=0),this.l5t=Math.abs(i.Gz()),this.u5t=i.Pz(),this.n5t=vI.Kn(this.n5t,0,this.e5t.Oz()-1),1===this.y5t&&(this.n5t=0),this.b5t(!0),this.f5t=this.S5t();const e=this.e5t.uAt(this.n5t);this.E5t(s,e,t)}C5t(t){const s=this.r5t,i=this.n5t;if(this.n5t=vI.Kn(Math.floor(this.m5t),0,this.e5t.Oz()-1),this.m5t=-1,!t&&i===this.n5t)return;const e=this.e5t.uAt(this.n5t);this.E5t(s,e),this.f5t=this.S5t()}W3t(){const t=this.r5t.Wz();this.h5t=t.TT(),this.o5t=t.yA(),this.a5t=t.IEt(),this.D$().ykt(!0)}TT(){return this.h5t}yA(){return this.o5t}IEt(){return this.a5t}Uz(){return this.r5t.Uz()}pTt(t){const s=this.r5t,i=this.D$();let e=null;if("string"==typeof t)e=s.Xz(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.Yz(t-1)}let n=i.LU();if(!e)return[i.YM(),i.ZM(),n];if(_I.S(e.IAt()),i.qq()){const[t,s,e]=i.zq().rG(_I.Fa(),_I.La());_I.set(t,s),n+=e}return _I.offset(-s._U(),-s.AU()),_I.scale(i.Vg(),i.Qg()),_I.rotate(i.Fj()),_I.offset(i.YM(),i.ZM()),[_I.Fa(),_I.La(),n]}U5t(){return this.D$().ukt().mu()}q5t(t){t=Math.floor(t);const s=this.D$(),i=s.ukt(),e=i.mu();if(t===e&&(t=0),t<0||t>=e)return[0,0];const n=i.pu();return[n[2*t+0]+s.YM(),n[2*t+1]+s.ZM()]}lEt(){const t=vI.sB.$rt.wht,s="plugins.sprite.debugger.animation-properties";return[{title:s+".title",properties:[{name:s+".current-animation",value:this.e5t.Pc(),Y2t:s=>this.cEt(t.z5t,s,0)},{name:s+".current-frame",value:this.n5t,Y2t:s=>this.cEt(t.J5t,s)},{name:s+".is-playing",value:this.v5t(),Y2t:s=>s?this.cEt(t.Y5t,0):this.cEt(t.X5t)},{name:s+".speed",value:this.l5t,Y2t:s=>this.cEt(t.K5t,s)},{name:s+".repeats",value:this.d5t,Y2t:t=>this.d5t=t}]}]}mx(){const t={a:this.e5t._1()};0!==this.f5t&&(t.fs=this.f5t);const s=this.S5t();0!==s&&(t.at=s),0!==this.n5t&&(t.f=this.n5t),0!==this.l5t&&(t.cas=this.l5t),1!==this.d5t&&(t.ar=this.d5t),0!==this.u5t&&(t.rt=this.u5t),this.v5t()||(t.ap=this.v5t()),this.M5t()||(t.af=this.M5t());const i=this.D$();return i.iq()&&(t.ce=i.iq()),t}gx(t){const s=this.fH().JRt(t.a);s&&(this.e5t=s),this.f5t=t.hasOwnProperty("fs")?t.fs:0,this.c5t.Set(t.hasOwnProperty("at")?t.at:0);const i=t.hasOwnProperty("f")?t.f:0;this.n5t=vI.Kn(i,0,this.e5t.Oz()-1),this.l5t=t.hasOwnProperty("cas")?t.cas:0,this.d5t=t.hasOwnProperty("ar")?t.ar:1;const e=t.hasOwnProperty("rt")?t.rt:0;this.u5t=vI.Kn(e,0,this.e5t.Oz()-1),this.b5t(!t.hasOwnProperty("ap")||!!t.ap),this.x5t(!t.hasOwnProperty("af")||!!t.af);const n=this.e5t.uAt(this.n5t);this.r5t=n,this.W3t();const r=this.D$();r.EU(n._U()),r.RU(n.AU()),r.rkt(n.Zz()),r.eq(!!t.ce),this.v5t()&&this.rEt()}sot(t){const s=this.D$();switch(t){case TI:return s.iq();case GI:return vI.Kn(this.n5t,0,this.e5t.Oz()-1);case xI:return this.e5t.Pc()}}oot(t,s,i){const e=this.D$();switch(t){case TI:e.eq(!!s);break;case GI:{this.b5t(!1);const t=this.e5t.Oz()-1,e=s=vI.Kn(s,0,t),n=this.e5t.uAt(this.n5t),r=this.e5t.uAt(e);this.E5t(n,r,i),this.n5t=vI.Kn(e,0,t);break}case xI:this.g5t=s,this.I5t(i),this.e5t.Oz()>1&&this.e5t.Gz()>0?this.rEt():this.V_t()}}b_t(){return self.Z5t}};const RI=new WeakMap,OI=new Map([["current-frame",0],["beginning",1]]);self.Z5t=class extends self.Kq{constructor(){super(),RI.set(this,self.cH.mH().iz())}Vz(){return RI.get(this).Uz()}qz(t){return this.zz(t)[0]}Jz(t){return this.zz(t)[1]}Q5t(t){return this.zz(t)[2]}zz(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return RI.get(this).pTt(t)}Kz(){return RI.get(this).U5t()}Qz(t){return bI.he(t),RI.get(this).q5t(t)[0]}sJ(t){return bI.he(t),RI.get(this).q5t(t)[1]}tJ(t){return bI.he(t),RI.get(this).q5t(t)}t4t(){RI.get(this).b5t(!1)}s4t(t="current-frame"){bI.ue(t);const s=OI.get(t);if(void 0===s)throw new Error("invalid mode");RI.get(this).F5t(s)}i4t(t,s="beginning"){bI.ue(t),bI.ue(s);const i=OI.get(s);if(void 0===i)throw new Error("invalid mode");const e=RI.get(this);if(!e.fH().zRt(t))throw new Error(`animation name "${t}" does not exist`);e.D5t(t,i)}K3t(t){bI.ue(t);const s=RI.get(this).fH().zRt(t);return s?s.mAt():null}get animation(){return RI.get(this).L5t().mAt()}get animationName(){return RI.get(this).k5t()}set R5t(t){bI.he(t),RI.get(this).N5t(t)}get R5t(){return RI.get(this).$5t()}set e4t(t){bI.ue(t),RI.get(this).N5t(t)}get e4t(){return RI.get(this).B5t()}set n4t(t){bI.he(t),RI.get(this).W5t(t)}get n4t(){return RI.get(this).j5t()}set r4t(t){bI.he(t),RI.get(this).V5t(t)}get r4t(){return RI.get(this).H5t()}get imageWidth(){return RI.get(this).MEt().Vg()}get imageHeight(){return RI.get(this).MEt().Qg()}h4t(){const t=RI.get(this).MEt();return[t.Vg(),t.Qg()]}async o4t(t){bI.$e(t,Blob);const s=RI.get(this),i=s.aB(),e=s.MEt(),n=vI.Un(vI.PPt);if(n.HPt(i,t),await n.KX(i.gM(),{uG:i.Kk()}),s.zn())return void n.qn();e.UPt(n);const r=s.ZGt();r.B3t(),r.fH().Sf().dispatchEvent(new vI.Event("animationframeimagechange")),i.j$()}a4t(t,s){bI.ue(s),RI.get(this).D$().zLt(!!t,s)}}}{const FI=self.Cs;FI.sB.$rt.Q$={l4t(t){return FI.Ze(this.k5t(),t)},u4t(t,s){return FI.compare(this.n5t,t,s)},c4t(t,s){if("string"!=typeof s)return!1;const i=this.r5t.iJ();return FI.compare(i.toLowerCase(),t,s.toLowerCase())},f4t(t,s){return FI.compare(this.j5t(),t,s)},A5t(t){return FI.Ze(this.p5t,t)},P5t:()=>!0,O5t:()=>!0,d4t(){return this.D$().Vg()<0},p4t(){return this.D$().Qg()<0},m4t:()=>!0,g4t:()=>!0,iq(){return this.D$().iq()}}}{const DI=self.Cs;DI.sB.$rt.wht={y4t(t,s,i,e,n){if(!t||!s)return;const[r,h]=this.pTt(i),o=this.$c.lj(t,s,r,h,e,n);if(!o)return;if(e&&s.uj(o),t.qW().TW()){const t=o.D$();t.Oj(this.D$().Fj()),t.xU()}const a=this.$c.aN();a.cj(!0),o.fj(),a.cj(!1),t!==this.$c.kgt().fH()&&this.j_t.V3t(t,o,e)},X5t(){this.b5t(!1)},Y5t(t){this.F5t(t)},z5t(t,s){this.D5t(t,s)},J5t(t){this.N5t(t)},K5t(t){this.W5t(t)},w4t(t){this.V5t(t)},S4t(t,s){try{0===t?this.ZGt().H3t(s):this.ZGt().U3t(s)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation: `,s)}},v4t(t,s,i){try{0===t?this.ZGt().z3t(s,i):this.ZGt().Y3t(s,i)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation frame: `,s)}},b4t(t){const s=this.D$(),i=s.Vg(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Xg(e),s.xU())},M4t(t){const s=this.D$(),i=s.Qg(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Hg(e),s.xU())},Aj(t){const s=this.r5t.Wz(),i=this.D$(),e=i.Vg()<0?-1:1,n=i.Qg()<0?-1:1,r=s.Vg()*t*e,h=s.Qg()*t*n;i.Vg()===r&&i.Qg()===h||(i.BP(r,h),i.xU())},async x4t(t,s,i){const e=this.r5t.Wz(),n=this.D$(),r=this.$c,h=this.j_t;if(e.GZ()===t)return 0===s&&(n.BP(e.Vg(),e.Qg()),n.xU()),void this.JH(DI.sB.$rt.Q$.m4t);const o=DI.Un(DI.PPt);try{if(await o.VPt(r,t),!o.ZZ())throw new Error("image failed to load");if(this.zn())return void o.qn();await o.KX(r.gM(),{uG:r.Kk()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.zn()||this.JH(DI.sB.$rt.Q$.g4t))}this.zn()?o.qn():(e.UPt(o),h.B3t(),h.fH().Sf().dispatchEvent(new DI.Event("animationframeimagechange")),r.j$(),0===s&&(n.BP(e.Vg(),e.Qg()),n.xU()),await this.K$(DI.sB.$rt.Q$.m4t))},G4t(t){this.D$().eq(t)},zLt(t,s){this.D$().zLt(0===t,s)},w3t(t){this.D$().NM(t),this.$c.j$()}}}self.Cs.sB.$rt.Sht={T4t(){return this.$5t()},I4t(){return this.B5t()},C4t(){return this.e5t.Oz()},_4t(){return this.e5t.Pc()},E4t(){return this.j5t()},P4t(){return this.e5t.Gz()},A4t(t){return this.pTt(t)[0]},R4t(t){return this.pTt(t)[1]},O4t(t){return this.pTt(t)[2]},F4t(){return this.Uz()},D4t(){return this.MEt().Vg()},L4t(){return this.MEt().Qg()},k4t(t){return this.q5t(t)[0]},N4t(t){return this.q5t(t)[1]},$4t(){return this.U5t()}};{const LI=self.Cs;LI.sB.Keyboard=class extends LI.KCt{constructor(t){super(t)}qn(){super.qn()}}}{let kI=function(){return $I.VW().iz()};GetKeyboardSdkInstance=kI;const NI=self.Cs;self.Ns,NI.sB.Keyboard.dRt=class extends NI.D_t{constructor(t){super(t)}qn(){super.qn()}v_t(){}b_t(){return self.B4t}};let $I=null;self.B4t=class extends self.rj{constructor(t){super(t),$I=t,t.aB().b$().keyboard=this}W4t(t){const s=kI();if("string"==typeof t)return s.j4t(t);if("number"==typeof t)return s.V4t(t);throw new TypeError("expected string or number")}}}{const BI=self.Cs,WI="keyboard";BI.sB.Keyboard.Instance=class extends BI.B_t{constructor(t,s){super(t,WI),this.H4t=new Set,this.U4t=new Set,this.q4t=0,this.z4t="",this.J4t="",this.Y4t=!1;const i=this.aB().Sf();this.Kf=new BI.Jf(BI.jf.zf(i,"keydown",t=>this.X4t(t.data)),BI.jf.zf(i,"keyup",t=>this.K4t(t.data)),BI.jf.zf(i,"window-blur",()=>this.Z4t()),BI.jf.zf(i,"keyboard-blur",()=>this.Z4t())),this.$c.J$(this.JM())}qn(){super.qn()}async JM(){const t=await this.Q_t("init");this.Y4t=t.isKeyboardLockSupported}X4t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.H4t.has(i)||(this.H4t.add(i),this.U4t.add(s),this.z4t=i,this.q4t=s,this.J4t=e,this.JH(BI.sB.Keyboard.Q$.Q4t),this.JH(BI.sB.Keyboard.Q$.t6t),this.JH(BI.sB.Keyboard.Q$.s6t),this.JH(BI.sB.Keyboard.Q$.i6t))}K4t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.H4t.delete(i),this.U4t.delete(s),this.z4t=i,this.q4t=s,this.J4t=e,this.JH(BI.sB.Keyboard.Q$.e6t),this.JH(BI.sB.Keyboard.Q$.n6t),this.JH(BI.sB.Keyboard.Q$.r6t),this.JH(BI.sB.Keyboard.Q$.h6t)}Z4t(){for(const t of this.U4t)this.U4t.delete(t),this.q4t=t,this.JH(BI.sB.Keyboard.Q$.e6t),this.JH(BI.sB.Keyboard.Q$.n6t),this.JH(BI.sB.Keyboard.Q$.h6t);this.H4t.clear()}j4t(t){return this.H4t.has(t)}V4t(t){return this.U4t.has(t)}mx(){return{tk:this.q4t,tkk:this.J4t}}gx(t){this.q4t=t.tk,t.hasOwnProperty("tkk")&&(this.J4t=t.tkk)}lEt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.q4t},{name:t+".debugger.last-key-string",value:BI.sB.Keyboard.Sht.o6t(this.q4t)},{name:t+".debugger.last-typed-key",value:this.J4t}]}]}}}{const jI=self.Cs,VI=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];jI.sB.Keyboard.Q$={j4t(t){return this.U4t.has(t)},t6t(t){return this.q4t===t},Q4t:()=>!0,e6t:()=>!0,n6t(t){return this.q4t===t},V4t(t){return t=Math.floor(t),this.U4t.has(t)},i6t(t){return this.q4t===t},h6t(t){return this.q4t===t},s6t(t){const s=VI[t];return this.z4t===s},r6t(t){const s=VI[t];return this.z4t===s},a6t(t){const s=VI[t];return this.H4t.has(s)},l6t(){return this.Y4t},u6t:()=>!0,c6t:()=>!0}}{const HI=self.Cs;HI.sB.Keyboard.wht={async f6t(t){if(!this.Y4t)return;let s=[];t&&(s=t.split(",")),(await this.Q_t("lock-keyboard",{keysArr:s})).isOk?this.JH(HI.sB.Keyboard.Q$.u6t):this.JH(HI.sB.Keyboard.Q$.c6t)},d6t(){this.Y4t&&this.Q_t("unlock-keyboard")}}}{let UI=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"←";case 38:return"↑";case 39:return"→";case 40:return"↓";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};StringFromCharCode=UI,self.Cs.sB.Keyboard.Sht={p6t(){return this.q4t},o6t:t=>UI(t),m6t(){return this.J4t}}}{const qI=self.Cs;qI.sB.PlatformInfo=class extends qI.KCt{constructor(t){super(t)}qn(){super.qn()}}}{const zI=self.Cs;zI.sB.PlatformInfo.dRt=class extends zI.D_t{constructor(t){super(t)}qn(){super.qn()}v_t(){}}}{const JI=self.Cs,YI="platform-info";JI.sB.PlatformInfo.Instance=class extends JI.B_t{constructor(t,s){super(t,YI),this.$Qt=0,this.BQt=0,this.WQt=0,this.jQt=0,this.g6t=[0,0,0,0],this.y6t=!1,this.w6t=!1,this.K_t([["window-resize",t=>this.LBt(t)],["wake-lock-acquired",t=>this.S6t(t)],["wake-lock-error",t=>this.v6t(t)],["wake-lock-released",t=>this.b6t(t)]]),navigator.connection&&navigator.connection.addEventListener("change",()=>this.M6t()),this.$c.J$(this.Q_t("get-initial-state").then(t=>{this.$Qt=t.screenWidth,this.BQt=t.screenHeight,this.WQt=t.windowOuterWidth,this.jQt=t.windowOuterHeight,this.g6t=t.safeAreaInset,this.y6t=t.supportsWakeLock}))}qn(){super.qn()}LBt(t){this.WQt=t.windowOuterWidth,this.jQt=t.windowOuterHeight,this.g6t=t.safeAreaInset}async M6t(){await this.K$(JI.sB.PlatformInfo.Q$.x6t)}async S6t(){this.w6t=!0,await this.K$(JI.sB.PlatformInfo.Q$.G6t)}async v6t(){this.w6t=!1,await this.K$(JI.sB.PlatformInfo.Q$.T6t)}async b6t(){this.w6t=!1,await this.K$(JI.sB.PlatformInfo.Q$.I6t)}}}{const XI=self.Cs;XI.sB.PlatformInfo.Q$={C6t:()=>XI.Zs.oi,_6t:()=>"Windows"===XI.Zs.Qs,E6t:()=>"macOS"===XI.Zs.Qs,P6t:()=>"Linux"===XI.Zs.Qs,A6t:()=>"Chrome OS"===XI.Zs.Qs,R6t:()=>"Android"===XI.Zs.Qs,O6t:()=>"iOS"===XI.Zs.Qs,F6t(){const t=this.$c.qB();return"html5"===t||"scirra-arcade"===t||"preview"===t||"instant-games"===t},D6t(){return this.$c.vjt()},L6t(){return this.$c.zB()},k6t(){return"windows-uwp"===this.$c.qB()},N6t(){return this.$c.JB()},$6t(){return"macos-wkwebview"===this.$c.qB()},B6t(){return"linux-cef"===this.$c.qB()},x6t:()=>!0,G6t:()=>!0,T6t:()=>!0,I6t:()=>!0,W6t(){return this.w6t},j6t(){return this.y6t}}}self.Cs.sB.PlatformInfo.wht={V6t(){this.y6t&&this.tEt("request-wake-lock")},H6t(){this.y6t&&(this.w6t=!1,this.Z_t("release-wake-lock"))}},self.Cs.sB.PlatformInfo.Sht={U6t(){return this.$c.I$().YB()},q6t(){return this.$c.I$().KB()},_1t(){return this.$c.uW()},E1t(){return this.$Qt},P1t(){return this.BQt},A1t(){return this.$c.I$().rY()},R1t(){return this.$c.I$().hY()},O1t(){return this.WQt},F1t(){return this.jQt},z6t(){return this.$c.I$().eW()},J6t(){return this.$c.I$().rW()},Y6t(){return this.$c.I$().oW()},X6t(){return this.$c.I$().lW()},K6t:()=>navigator.connection&&navigator.connection.downlink||0,Z6t:()=>navigator.connection&&navigator.connection.downlinkMax||0,ConnectionType:()=>navigator.connection&&navigator.connection.type||"unknown",Q6t:()=>navigator.connection&&navigator.connection.effectiveType||"unknown",t8t:()=>navigator.connection&&navigator.connection.rtt||0,s8t:()=>navigator.hardwareConcurrency||0,i8t:()=>navigator.deviceMemory||0,e8t(){return this.g6t[0]},n8t(){return this.g6t[1]},r8t(){return this.g6t[2]},h8t(){return this.g6t[3]},o8t(){return this.$c.HN()},a8t(){return this.$c.qN()}};{const KI=self.Cs;KI.sB.l8t=class extends KI.KCt{constructor(t){super(t)}qn(){super.qn()}}}{const ZI=self.Cs;ZI.sB.l8t.dRt=class extends ZI.D_t{constructor(t){super(t)}qn(){super.qn()}v_t(){}}}{const QI=self.Cs;QI.sB.l8t.Instance=class extends QI.B_t{constructor(t,s){if(super(t),this.u8t="",this.c8t=0,this.f8t="",this.d8t=0,this.kf=-1,this.p8t=new Map,this.m8t=null,this.g8t="",this.y8t=!1,this.w8t=null,this.S8t=null,this.v8t=null,this.Pjt=this.$c.zB(),this.Pjt){this.w8t=__require("fs"),this.S8t=__require("path");const t=self.process||nw.process;this.v8t=this.S8t.dirname(t.execPath)+"\\"}}qn(){super.qn()}async b8t(t,s,i){console.error(`[Construct] AJAX request to '${s}' (tag '${t}') failed: `,i),this.f8t=t,await this.K$(QI.sB.l8t.Q$.M8t),this.f8t=t,await this.K$(QI.sB.l8t.Q$.x8t)}async G8t(t){this.f8t=t,await this.K$(QI.sB.l8t.Q$.T8t),this.f8t=t,await this.K$(QI.sB.l8t.Q$.I8t)}async C8t(t,s){s.lengthComputable&&(this.d8t=s.loaded/s.total,this.f8t=t,await this.K$(QI.sB.l8t.Q$._8t))}async E8t(t,s){s.lengthComputable&&(this.d8t=s.loaded/s.total,this.f8t=t,await this.K$(QI.sB.l8t.Q$.P8t))}A8t(t,s,i){if(!this.Pjt)return void this.b8t(t,s,i);const e=this.w8t,n=this.v8t+s;e.existsSync(n)?e.readFile(n,{encoding:"utf8"},(i,e)=>{i?this.b8t(t,s,i):(this.u8t=e.replace(/\r\n/g,"\n"),this.G8t(t))}):this.b8t(t,s,i)}async R8t(t,s){const i=this.$c._k(),e=this.m8t;this.m8t=null;try{if(e){const n=await i.lZ(s);e.O8t(n),this.u8t="",this.c8t=0,this.G8t(t)}else{const e=await i.uZ(s);this.u8t=e.replace(/\r\n/g,"\n"),this.c8t=0,this.G8t(t)}}catch(i){this.b8t(t,s,i)}}F8t(t,s,i,e){return new Promise(n=>{const r=i=>{this.A8t(t,s,i),n()},h=this.m8t;this.m8t=null;try{const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(4===o.readyState){if(this.u8t=h?"":(o.responseText||"").replace(/\r\n/g,"\n"),this.c8t=o.status,o.status>=400)this.b8t(t,s,o.status+o.statusText);else{const s=this.u8t.length||h&&o.response instanceof ArrayBuffer;this.Pjt&&!s||!this.Pjt&&0===o.status&&!s||(h&&h.O8t(o.response),this.G8t(t))}n()}},o.onerror=r,o.ontimeout=r,o.onabort=r,o.onprogress=s=>this.C8t(t,s),o.upload.onprogress=s=>this.E8t(t,s),o.open(i,s),this.kf>=0&&void 0!==o.timeout&&(o.timeout=this.kf),o.responseType=h?"arraybuffer":"text",e&&!this.p8t.has("Content-Type")&&("string"!=typeof e?o.setRequestHeader("Content-Type","application/octet-stream"):o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));for(const[t,s]of this.p8t)try{o.setRequestHeader(t,s)}catch(i){console.error(`[Construct] AJAX: Failed to set header '${t}: ${s}': `,i)}if(this.p8t.clear(),this.g8t){try{o.overrideMimeType(this.g8t)}catch(t){console.error("[Construct] AJAX: failed to override MIME type: ",t)}this.g8t=""}this.y8t&&(o.withCredentials=!0,this.y8t=!1),e?o.send(e):o.send()}catch(t){r(t)}})}lEt(){const t="plugins.ajax.debugger";return[{title:t+".title",properties:[{name:t+".last-status-code",value:this.c8t},{name:t+".last-data",value:this.u8t}]}]}mx(){return{lastData:this.u8t,lastStatusCode:this.c8t}}gx(t){this.u8t=t.lastData,this.c8t=t.hasOwnProperty("lastStatusCode")?t.lastStatusCode:0,this.f8t="",this.d8t=0}}}{const tC=self.Cs;tC.sB.l8t.Q$={I8t(t){return tC.Ze(this.f8t,t)},T8t:()=>!0,x8t(t){return tC.Ze(this.f8t,t)},M8t:()=>!0,_8t(t){return tC.Ze(this.f8t,t)},P8t(t){return tC.Ze(this.f8t,t)}}}{const sC=self.Cs;sC.sB.l8t.wht={async Request(t,s){this.$c.vjt()&&sC.Zh(s)&&this.$c._k().oZ()?await this.R8t(t,s):await this.F8t(t,s,"GET",null)},async D8t(t,s){this.$c.vjt()&&this.$c._k().oZ()?await this.R8t(t,s):await this.F8t(t,s,"GET",null)},async L8t(t,s,i,e){await this.F8t(t,s,e,i)},async k8t(t,s,i,e){if(!i)return;const n=i.UTt(this.di);if(!n)return;const r=n.iz().N8t();await this.F8t(t,s,e,r)},$8t(t){this.kf=1e3*t},B8t(t,s){this.p8t.set(t,s)},W8t(t){if(!t)return;const s=t.UTt(this.di);s&&(this.m8t=s.iz())},j8t(t){this.g8t=t},V8t(t){this.y8t=!!t}}}self.Cs.sB.l8t.Sht={H8t(){return this.u8t},U8t(){return this.c8t},q8t(){return this.d8t},Tag(){return this.f8t}};{const iC=self.Cs;iC.yut.z8t=class extends iC.KEt{constructor(t){super(t)}qn(){super.qn()}}}{const eC=self.Cs;eC.yut.z8t.dRt=class extends eC.iPt{constructor(t){super(t)}qn(){super.qn()}v_t(){}}}{const nC=self.Cs;nC.yut.z8t.Instance=class extends nC.nPt{constructor(t,s){super(t),this.J8t=null,this.Y8t=-1,this.X8t="",this.K8t=new Set,this.Z8t=0,this.Q8t=0,this.t7t=0,this.s7t=0,this.i7t=0,this.e7t=0,this.n7t=0,this.r7t=0,this.h7t=0,this.o7t=0,this.a7t=!1,s&&(this.a7t=s[0]);const i=this.$c.Sf();this.Kf=new nC.Jf(nC.jf.zf(i,"instancedestroy",t=>this.l7t(t.dz)),nC.jf.zf(i,"afterload",t=>this.d8()))}qn(){this.J8t=null,super.qn()}u7t(t){t?(this.J8t=t,this.oEt()):(this.J8t=null,this.H_t())}c7t(t,s,i){if(!t)return;const e=t.UTt(this.di);if(!e)return;this.X8t=s,this.u7t(e);const n=this.di.D$(),r=e.D$();if("properties"===this.X8t){const t=this.K8t;t.clear();for(const s of i)t.add(s);this.s7t=n.YM()-r.YM(),this.i7t=n.ZM()-r.ZM(),this.r7t=n.Fj()-r.Fj(),this.o7t=n.Fj(),this.h7t=n.tx()-r.tx(),t.has("x")&&t.has("y")&&(this.Q8t=nC.rr(r.YM(),r.ZM(),n.YM(),n.ZM())-r.Fj(),this.Z8t=nC.er(r.YM(),r.ZM(),n.YM(),n.ZM())),t.has("width-abs")?this.e7t=n.Vg()-r.Vg():t.has("width-scale")&&(this.e7t=n.Vg()/r.Vg()),t.has("height-abs")?this.n7t=n.Qg()-r.Qg():t.has("height-scale")&&(this.n7t=n.Qg()/r.Qg())}else this.Z8t=nC.er(r.YM(),r.ZM(),n.YM(),n.ZM())}mx(){const t=this.K8t,s=this.X8t,i={uid:this.J8t&&!this.J8t.SY()?this.J8t.TH():-1,m:s,d:this.a7t};return"rope"===s||"bar"===s?i.pd=this.Z8t:"properties"===s&&(i.ps=[...this.K8t],t.has("imagepoint")?i.ip=this.t7t:t.has("x")&&t.has("y")?(i.pa=this.Q8t,i.pd=this.Z8t):(t.has("x")&&(i.dx=this.s7t),t.has("y")&&(i.dy=this.i7t)),t.has("angle")&&(i.da=this.r7t,i.lka=this.o7t),(t.has("width-abs")||t.has("width-scale"))&&(i.dw=this.e7t),(t.has("height-abs")||t.has("height-scale"))&&(i.dh=this.n7t),t.has("z")&&(i.dz=this.h7t)),i}gx(t){const s=t.m,i=this.K8t;if(i.clear(),this.Y8t=t.uid,"number"!=typeof s){if(this.X8t=s,t.hasOwnProperty("d")&&(this.a7t=!!t.d),"rope"===s||"bar"===s)this.Z8t=t.pd;else if("properties"===s){for(const s of t.ps)i.add(s);i.has("imagepoint")?this.t7t=t.ip:i.has("x")&&i.has("y")?(this.Q8t=t.pa,this.Z8t=t.pd):(i.has("x")&&(this.s7t=t.dx),i.has("y")&&(this.i7t=t.dy)),i.has("angle")&&(this.r7t=t.da,this.o7t=t.lka||0),(i.has("width-abs")||i.has("width-scale"))&&(this.e7t=t.dw),(i.has("height-abs")||i.has("height-scale"))&&(this.n7t=t.dh),i.has("z")&&(this.h7t=t.dz)}}else this.f7t(t)}f7t(t){const s=this.K8t,i=t.msa,e=t.tsa,n=t.pa,r=t.pd;switch(t.m){case 0:this.X8t="properties",s.add("x").add("y").add("angle"),this.Q8t=n,this.Z8t=r,this.r7t=i-e,this.o7t=t.lka;break;case 1:this.X8t="properties",s.add("x").add("y"),this.Q8t=n,this.Z8t=r;break;case 2:this.X8t="properties",s.add("angle"),this.r7t=i-e,this.o7t=t.lka;break;case 3:this.X8t="rope",this.Z8t=t.pd;break;case 4:this.X8t="bar",this.Z8t=t.pd}}d8(){-1===this.Y8t?this.u7t(null):(this.u7t(this.$c.P$(this.Y8t)),this.Y8t=-1)}l7t(t){this.J8t===t&&(this.u7t(null),this.a7t&&this.$c.wH(this.di))}nEt(){const t=this.J8t;if(!t||t.SY())return;const s=t.D$(),i=this.di.D$(),e=this.X8t;let n=!1;if("rope"===e||"bar"===e){const t=nC.er(i.YM(),i.ZM(),s.YM(),s.ZM());if(t>this.Z8t||"bar"===e&&t<this.Z8t){const t=nC.rr(s.YM(),s.ZM(),i.YM(),i.ZM());i.GU(s.YM()+Math.cos(t)*this.Z8t,s.ZM()+Math.sin(t)*this.Z8t),n=!0}}else{const e=this.K8t;let r=0;if(e.has("imagepoint")){const[s,e]=t.pTt(this.t7t);i.fTt(s,e)||(i.GU(s,e),n=!0)}else if(e.has("x")&&e.has("y")){const t=s.YM()+Math.cos(s.Fj()+this.Q8t)*this.Z8t,e=s.ZM()+Math.sin(s.Fj()+this.Q8t)*this.Z8t;i.fTt(t,e)||(i.GU(t,e),n=!0)}else r=s.YM()+this.s7t,e.has("x")&&r!==i.YM()&&(i.XM(r),n=!0),r=s.ZM()+this.i7t,e.has("y")&&r!==i.ZM()&&(i.QM(r),n=!0);e.has("angle")&&(this.o7t!==i.Fj()&&(this.r7t=nC.Zn(this.r7t+(i.Fj()-this.o7t))),r=nC.Zn(s.Fj()+this.r7t),r!==i.Fj()&&(i.Oj(r),n=!0),this.o7t=i.Fj()),e.has("width-abs")&&(r=s.Vg()+this.e7t,r!==i.Vg()&&(i.Xg(r),n=!0)),e.has("width-scale")&&(r=s.Vg()*this.e7t,r!==i.Vg()&&(i.Xg(r),n=!0)),e.has("height-abs")&&(r=s.Qg()+this.n7t,r!==i.Qg()&&(i.Hg(r),n=!0)),e.has("height-scale")&&(r=s.Qg()*this.n7t,r!==i.Qg()&&(i.Hg(r),n=!0)),e.has("z")&&(r=s.tx()+this.h7t,r!==i.tx()&&(i.sx(r),this.$c.j$()))}n&&i.xU()}lEt(){const t="behaviors.pin.debugger";return[{title:"$"+this.fz().Pc(),properties:[{name:t+".is-pinned",value:!!this.J8t},{name:t+".pinned-uid",value:this.J8t?this.J8t.TH():0}]}]}}}self.Cs.yut.z8t.Q$={d7t(){return!!this.J8t},p7t(){return this.a7t}},self.Cs.yut.z8t.wht={m7t(t,s){this.c7t(t,0===s?"rope":"bar")},g7t(t,s,i,e,n,r,h){const o=[];s&&o.push("x"),i&&o.push("y"),e&&o.push("angle"),h&&o.push("z"),1===n?o.push("width-abs"):2===n&&o.push("width-scale"),1===r?o.push("height-abs"):2===r&&o.push("height-scale"),0!==o.length&&this.c7t(t,"properties",o)},y7t(t,s,i,e,n,r){const h=["imagepoint"];i&&h.push("angle"),r&&h.push("z"),1===e?h.push("width-abs"):2===e&&h.push("width-scale"),1===n?h.push("height-abs"):2===n&&h.push("height-scale"),this.t7t=s,this.c7t(t,"properties",h)},w7t(t){"rope"!==this.X8t&&"bar"!==this.X8t||(this.Z8t=Math.max(t,0))},S7t(t){this.a7t=t},v7t(){this.u7t(null),this.X8t="",this.K8t.clear(),this.t7t=""},z8t(t,s){switch(s){case 0:this.c7t(t,"properties",["x","y","angle"]);break;case 1:this.c7t(t,"properties",["x","y"]);break;case 2:this.c7t(t,"properties",["angle"]);break;case 3:this.c7t(t,"rope");break;case 4:this.c7t(t,"bar")}}},self.Cs.yut.z8t.Sht={b7t(){return this.J8t?this.J8t.TH():-1}};{const rC=self.Cs;rC.yut.M7t=class extends rC.KEt{constructor(t){super(t);const s=this.$c.Sf();this.Kf=new rC.Jf(rC.jf.zf(s,"pointerdown",t=>this.fZt(t.data)),rC.jf.zf(s,"pointermove",t=>this.dZt(t.data)),rC.jf.zf(s,"pointerup",t=>this.pZt(t.data,!1)),rC.jf.zf(s,"pointercancel",t=>this.pZt(t.data,!0)))}qn(){this.Kf.qn(),this.Kf=null,super.qn()}fZt(t){"mouse"===t.pointerType&&0!==t.button||this.x7t(t.pointerId.toString(),t.pageX-this.$c.QB(),t.pageY-this.$c.sW())}dZt(t){1&t.lastButtons&&!(1&t.buttons)?this.G7t(t.pointerId.toString()):this.T7t(t.pointerId.toString(),t.pageX-this.$c.QB(),t.pageY-this.$c.sW())}pZt(t,s){"mouse"===t.pointerType&&0!==t.button||this.G7t(t.pointerId.toString())}async x7t(t,s,i){const e=this.ej();let n=null,r=null,h=0,o=0;for(const t of e){const e=t.SFt(rC.yut.M7t);if(!e.Cu()||e.I7t()||t.SY())continue;const a=t.D$(),l=a.L$(),[u,c]=l.iH(s,i,a.LU());if(!l._V()||!a.nq(u,c))continue;if(!n){n=t,r=e,h=u,o=c;continue}const f=n.D$();(l.xk()>f.L$().xk()||l.xk()===f.L$().xk()&&a.k$()>f.k$())&&(n=t,r=e,h=u,o=c)}n&&await r.C7t(t,h,o)}T7t(t,s,i){const e=this.ej();for(const n of e){const e=n.SFt(rC.yut.M7t);if(!e.Cu()||!e.I7t()||e.I7t()&&e._7t()!==t)continue;const r=n.D$(),h=r.L$(),[o,a]=h.iH(s,i,r.LU());e.E7t(o,a)}}async G7t(t){const s=this.ej();for(const i of s){const s=i.SFt(rC.yut.M7t);s.I7t()&&s._7t()===t&&await s.P7t()}}}}{const hC=self.Cs;hC.yut.M7t.dRt=class extends hC.iPt{constructor(t){super(t)}qn(){super.qn()}v_t(){}}}{const oC=self.Cs,aC=(self.Ns,self.oz),lC=0,uC=1;oC.yut.M7t.Instance=class extends oC.nPt{constructor(t,s){super(t),this.A7t=!1,this.s7t=0,this.i7t=0,this.R7t="<none>",this.O7t=0,this.Obt=!0,s&&(this.O7t=s[lC],this.Obt=s[uC])}qn(){super.qn()}mx(){return{a:this.O7t,e:this.Obt}}gx(t){this.O7t=t.a,this.Obt=t.e,this.A7t=!1}PIt(t){this.Obt=!!t,this.Obt||(this.A7t=!1)}Cu(){return this.Obt}F7t(t){this.O7t=t}D7t(){return this.O7t}L7t(){this.A7t&&this.P7t()}I7t(){return this.A7t}_7t(){return this.R7t}async C7t(t,s,i){const e=this.D$();this.s7t=s-e.YM(),this.i7t=i-e.ZM(),this.A7t=!0,this.R7t=t,this.N_t("dragstart"),await this.K$(oC.yut.M7t.Q$.k7t)}E7t(t,s){const i=this.D$(),e=t-this.s7t,n=s-this.i7t;0===this.O7t?i.YM()===e&&i.ZM()===n||(i.GU(e,n),i.xU()):1===this.O7t?i.YM()!==e&&(i.XM(e),i.xU()):2===this.O7t&&i.ZM()!==n&&(i.QM(n),i.xU())}async P7t(){this.A7t=!1,this.N_t("drop"),await this.K$(oC.yut.M7t.Q$.N7t)}sot(t){switch(t){case lC:return this.D7t();case uC:return this.Cu()}}oot(t,s){switch(t){case lC:this.F7t(s);break;case uC:this.PIt(!!s)}}lEt(){const t="behaviors.dragndrop",s=t+".properties.axes";let i="";return 0===this.O7t?i=s+".items.both":1===this.O7t?i=s+".items.horizontal-only":2===this.O7t&&(i=s+".items.vertical-only"),[{title:"$"+this.fz().Pc(),properties:[{name:t+".debugger.is-dragging",value:this.I7t()},{name:s+".name",value:[i]},{name:t+".properties.enabled.name",value:this.Cu(),Y2t:t=>this.PIt(t)}]}]}b_t(){return self.$7t}};const cC=new WeakMap,fC=["both","horizontal","vertical"];self.$7t=class extends aC{constructor(){super(),cC.set(this,aC.mH().iz())}set axes(t){const s=fC.indexOf(t);if(-1===s)throw new Error("invalid axes");cC.get(this).F7t(s)}get axes(){return fC[cC.get(this).D7t()]}drop(){cC.get(this).L7t()}get B7t(){return cC.get(this).I7t()}get isEnabled(){return cC.get(this).Cu()}set isEnabled(t){cC.get(this).PIt(t)}}}self.Cs.yut.M7t.Q$={I7t(){return this.I7t()},k7t:()=>!0,N7t:()=>!0,Cu(){return this.Cu()}},self.Cs.yut.M7t.wht={_Ct(t){this.PIt(!!t)},W7t(t){this.F7t(t)},j7t(){this.L7t()}},self.Cs.yut.M7t.Sht={};{let dC=function(t,s,i){const e=t.aGt(),n=s.aGt();if(i){const i=e.get(bC);i&&i.delete(s._1());const r=n.get(bC);r&&r.delete(t._1())}else{let i=e.get(bC);i||(i=new Set,e.set(bC,i));let r=n.get(bC);r||(r=new Set,n.set(bC,r)),i.add(s._1()),r.add(t._1())}};SetObjectTypeCollisionsEnabled=dC;const pC=self.Cs,mC=self.Ns;let gC=null,yC=null,wC=[],SC=null,vC=null;const bC="Physics_DisabledCollisions";pC.yut.V7t=class extends pC.KEt{constructor(t){super(t),vC=this,this.H7t=null,this.U7t=10,this.q7t=.02,this.z7t=null,this.J7t=-1,this.Y7t=1,this.X7t=8,this.K7t=3,this.Z7t=!0,this.$c.J$(this.Q7t())}b_t(){return self.t9t}async Q7t(){const t=await this.$c._k().pB("box2d.wasm");await new Promise(s=>{self.Box2DWasmModule({wasmBinaryFile:t}).then(t=>{SC=t,this.s9t(),s()})})}s9t(){const t=this.$c.Ak();gC=pC.yut.V7t.IAt(0,0),yC=pC.yut.V7t.IAt(0,0),this.H7t=new SC.b2World(pC.yut.V7t.i9t(0,this.U7t),!0);const s=new SC.JSContactListener;s.BeginContact=s=>{const i=SC.wrapPointer(s,SC.b2Contact),e=pC.yut.V7t.Instance.e9t(i.GetFixtureA().GetBody()),n=pC.yut.V7t.Instance.e9t(i.GetFixtureB().GetBody());t.wNt(e.pz(),n.pz())},s.EndContact=()=>{},s.PreSolve=()=>{},s.PostSolve=()=>{},this.H7t.SetContactListener(s);const i=new SC.JSContactFilter;i.ShouldCollide=(t,s)=>{if(this.Z7t)return!0;const i=SC.wrapPointer(t,SC.b2Fixture),e=SC.wrapPointer(s,SC.b2Fixture),n=pC.yut.V7t.Instance.e9t(i.GetBody()),r=pC.yut.V7t.Instance.e9t(e.GetBody()),h=n.pz().fH(),o=r.pz().fH(),a=h._1(),l=o._1(),u=h.aGt().get(bC);if(u&&u.has(l))return!1;const c=o.aGt().get(bC);return!c||!c.has(a)},this.H7t.SetContactFilter(i),this.z7t=new SC.b2WorldManifold}qn(){super.qn()}n9t(){return SC}r9t(){return this.H7t}h9t(){return this.q7t}o9t(){return this.Y7t}a9t(t){this.Y7t=t}l9t(t){this.J7t=t}u9t(){return this.J7t}c9t(t){this.X7t=Math.max(t,1)}f9t(){return this.X7t}d9t(t){this.K7t=Math.max(t,1)}p9t(){return this.K7t}m9t(t,s){this.c9t(t),this.d9t(s)}g9t(){return this.U7t}y9t(t){t!==this.U7t&&(this.H7t.SetGravity(pC.yut.V7t.i9t(0,t)),this.U7t=t,this.w9t())}w9t(){for(const t of this.ej()){const s=pC.yut.V7t.Instance.S9t(t);if(!s)continue;const i=s.v9t();i&&i.SetAwake(!0)}}b9t(){this.Z7t=!1}M9t(t,s,i){if(i=!!i,t&&s){if(s.v1())for(const e of s.xj())dC(t,e,i);else dC(t,s,i);this.b9t()}}x9t(){return this.z7t}static G9t(){return bC}static IAt(t,s){if(wC.length){const i=wC.pop();return i.set_x(t),i.set_y(s),i}return new(0,SC.b2Vec2)(t,s)}static T9t(t){wC.push(t)}static i9t(t,s){return gC.set_x(t),gC.set_y(s),gC}static I9t(t,s){return yC.set_x(t),yC.set_y(s),yC}static C9t(t){const s=new(0,SC.b2PolygonShape),i=SC._malloc(8*t.length);let e=0;for(let s=0;s<t.length;++s)SC.HEAPF32[i+e>>2]=t[s].get_x(),SC.HEAPF32[i+(e+4)>>2]=t[s].get_y(),e+=8;const n=SC.wrapPointer(i,SC.b2Vec2);return s.Set(n,t.length),SC._free(i),s}};const MC=["fixed","variable"];self.t9t=class extends self.gz{constructor(){super()}set _9t(t){mC.he(t),vC.y9t(t)}get _9t(){return vC.g9t()}set E9t(t){const s=MC.indexOf(t);if(s<0)throw new Error("invalid stepping mode");vC.a9t(MC[s])}get E9t(){return MC[vC.o9t()]}set P9t(t){mC.he(t),vC.c9t(t)}get P9t(){return vC.f9t()}set A9t(t){mC.he(t),vC.d9t(t)}get A9t(){return vC.p9t()}R9t(t,s,i){const e=vC.aB(),n=e.$B(t),r=e.$B(s);i=!!i,vC.M9t(n,r,i)}}}{const xC=self.Cs;xC.yut.V7t.dRt=class extends xC.iPt{constructor(t){super(t)}qn(){super.qn()}v_t(){}}}{let GC=function(t,s){return YC.get(t).aB().F$(s)};UnwrapIWorldInstance=GC;const TC=self.Cs,IC=self.Ns,CC=self.oz,_C=(self.assert,0),EC=1,PC=2,AC=3,RC=4,OC=5,FC=6,DC=7,LC=8,kC=9,NC=new WeakMap,$C=new WeakMap,BC=new WeakMap,WC=-2147483648,jC=1073741824,VC=536870912,HC=3758096384,UC=TC.yut.V7t.i9t,qC=TC.yut.V7t.I9t,zC=TC.Un(TC.Rect),JC=TC.Un(TC.El);TC.yut.V7t.Instance=class extends TC.nPt{constructor(t,s){super(t);const i=this.lz(),e=this.D$();this.O9t=i.n9t(),this.H7t=i.r9t(),this.q7t=i.h9t(),this.F9t=!1,this.D9t=0,this.L9t=0,this.k9t=!1,this.N9t=1,this.$9t=.5,this.B9t=.2,this.W9t=0,this.j9t=.01,this.V9t=!1,this.Obt=!0,this.H9t=null,this.U9t=[],this.q9t=[],this.z9t=[],this.J9t=new Set,this.Y9t=e.YM(),this.X9t=e.ZM(),this.o7t=e.Fj(),this.K9t=0,this.Z9t=0,this.Q9t=!1,s&&(this.F9t=!!s[_C],this.D9t=s[EC],this.k9t=!!s[PC],this.N9t=s[AC],this.$9t=s[RC],this.B9t=s[OC],this.W9t=s[FC],this.j9t=s[DC],this.V9t=!!s[LC],this.Obt=!!s[kC]);const n=this.$c.Sf();this.Kf=new TC.Jf(TC.jf.zf(n,"instancedestroy",t=>this.l7t(t.dz)),TC.jf.zf(n,"beforeload",()=>this.c8()),TC.jf.zf(n,"afterload",()=>this.d8())),$C.set(this.di,this),this.Obt&&this.rEt()}oPt(){this.tts()}qn(){this.sts(),TC.bh(this.z9t),this.J9t.clear(),this.H9t&&(this.its(),this.H7t.DestroyBody(this.H9t),this.H9t=null),super.qn()}ets(t){if(!this.H9t)return;const s=this.H9t.CreateFixture(t);return this.U9t.push(s),s}its(){if(this.H9t){for(const t of this.U9t)this.H9t.DestroyFixture(t);TC.bh(this.U9t)}}nts(){const t=this.D$();return t.qq()?(t.NU(zC,JC,!1),JC):t.WU()}rts(t){this.O9t.destroy(t)}tts(){if(!this.Obt)return;const t=this.O9t.b2FixtureDef,s=this.O9t.b2BodyDef,i=this.D$(),e=i.lkt();if(this.L9t=this.D9t,e||this.di.UOt()||0!==this.L9t||(this.L9t=1),!this.H9t){const t=new s;t.set_type(this.F9t?0:2);let e=i.YM()*this.q7t,n=i.ZM()*this.q7t;if(2===this.L9t){const t=this.nts();e=t.ol()*this.q7t,n=t.al()*this.q7t}t.set_position(qC(e,n)),t.set_angle(i.Fj()),t.set_fixedRotation(this.k9t),t.set_linearDamping(this.W9t),t.set_angularDamping(this.j9t),t.set_bullet(this.V9t),this.H9t=this.H7t.CreateBody(t),this.rts(t),NC.set(this.H9t,this)}this.its();const n=new t;n.set_density(this.N9t),n.set_friction(this.$9t),n.set_restitution(this.B9t);const r=Math.max(Math.abs(i.Vg()),1),h=Math.max(Math.abs(i.Qg()),1);0===this.L9t?this.di.UOt()?this.hts(n):this.ots(n,r,h):1===this.L9t?this.ats(n,i,r,h):this.lts(n,r,h),this.K9t=i.Vg(),this.Z9t=i.Qg(),i.dkt(!1),this.rts(n)}ats(t,s,i,e){const n=new(0,this.O9t.b2PolygonShape),r=i*this.q7t,h=e*this.q7t;let o=s._U(),a=s.AU();s.Vg()<0&&(o=1-o),s.Qg()<0&&(a=1-a);const l=(.5-o)*r,u=(.5-a)*h,c=TC.yut.V7t.IAt(l,u);n.SetAsBox(r/2,h/2,c,0),t.set_shape(n),this.ets(t),this.rts(n),TC.yut.V7t.T9t(c)}lts(t,s,i){const e=new(0,this.O9t.b2CircleShape);e.set_m_radius(Math.min(s,i)*this.q7t*.5),t.set_shape(e),this.ets(t),this.rts(e)}ots(t,s,i){const e=this.D$(),n=e.Vg()<0,r=e.Qg()<0,h=this.q7t,o=e.fkt(n?-s:s,r?-i:i,0).pu(),a=o.length/2,l=[];for(let t=0;t<a;++t)l.push(TC.yut.V7t.IAt(o[2*t],o[2*t+1]));n!==r&&l.reverse();const u=TC.yut.V7t.cts.uts(l,s*i);for(const t of l)TC.yut.V7t.T9t(t);if(u.length)for(const s of u){for(const t of s)t.set_x(t.get_x()*h),t.set_y(t.get_y()*h);const i=TC.yut.V7t.C9t(s);t.set_shape(i),this.ets(t),this.rts(i);for(const t of s)TC.yut.V7t.T9t(t)}else this.ats(t,e,s,i)}hts(t){const s=this.q7t,i=TC.yut.V7t.IAt,e=TC.yut.V7t.T9t,n=[];this.di.iz().fts(n);const r=[];for(let h=0,o=n.length;h<o;++h){const o=n[h],a=o.TNt(),l=o.INt();if(l){let n=BC.get(l);if(!n){const t=l.pu(),s=l.mu();for(let e=0;e<s;++e)r.push(i(t[2*e],t[2*e+1]));const h=o.dts()&HC;(h===WC||h===jC||h===VC||h&WC&&h&jC&&h&VC)&&r.reverse(),n=TC.yut.V7t.cts.uts(r,a.width()*a.height()),BC.set(l,n);for(const t of r)e(t);TC.bh(r)}for(let h=0,o=n.length;h<o;++h){const o=n[h];for(let t=0,e=o.length;t<e;++t)r.push(i((a.Qa()+o[t].get_x())*s,(a.tl()+o[t].get_y())*s));const l=TC.yut.V7t.C9t(r);t.set_shape(l),this.ets(t),this.rts(l);for(const t of r)e(t);TC.bh(r)}}else{r.push(i(a.Qa()*s,a.tl()*s)),r.push(i(a.sl()*s,a.tl()*s)),r.push(i(a.sl()*s,a.il()*s)),r.push(i(a.Qa()*s,a.il()*s));const e=TC.yut.V7t.C9t(r);t.set_shape(e),this.ets(t),this.rts(e)}for(const t of r)e(t);TC.bh(r)}}pts(){this.H9t&&(this.sts(),NC.delete(this.H9t),this.its(),this.H7t.DestroyBody(this.H9t),this.H9t=null)}sts(){for(const t of this.q9t)this.H7t.DestroyJoint(t);TC.bh(this.q9t)}mts(){for(const t of this.z9t)switch(t.type){case 0:this.gts(...t.yts);break;case 1:this.wts(...t.yts);break;case 2:this.Sts(...t.yts);break;case 3:this.vts(...t.yts)}}bts(t){const s=this.D$();if(-1===t)return[s.YM(),s.ZM()];if(0===t&&this.H9t){const t=this.H9t.GetWorldCenter();return[t.get_x()/this.q7t,t.get_y()/this.q7t]}return this.di.pTt(t)}Mts(t,s,i,e,n){if(!this.Obt||!s||s===this.di)return;const r=TC.yut.V7t.Instance.S9t(s);r&&r.RIt()&&(this.z9t.push({type:0,yts:[t,s.TH(),i,e,n]}),this.gts(t,s.TH(),i,e,n))}gts(t,s,i,e,n){if(!this.Obt)return;const r=this.$c.P$(s);if(!r||r===this.di)return;const h=TC.yut.V7t.Instance.S9t(r);if(!h||!h.RIt())return;h.J9t.add(this.di),this.xts(!1),h.xts(!1);const[o,a]=this.bts(t),[l,u]=r.pTt(i),c=o-l,f=a-u,d=this.O9t.b2DistanceJointDef,p=this.q7t,m=new d;m.Initialize(this.H9t,h.v9t(),UC(o*p,a*p),qC(l*p,u*p)),m.set_length(Math.hypot(c,f)*p),m.set_dampingRatio(e),m.set_frequencyHz(n),this.q9t.push(this.H7t.CreateJoint(m)),this.rts(m)}Gts(t,s){if(!this.Obt||!s||s===this.di)return;const i=TC.yut.V7t.Instance.S9t(s);i&&i.RIt()&&(this.z9t.push({type:1,yts:[t,s.TH()]}),this.wts(t,s.TH()))}wts(t,s){if(!this.Obt)return;const i=this.$c.P$(s);if(!i||i===this.di)return;const e=TC.yut.V7t.Instance.S9t(i);if(!e||!e.RIt())return;e.J9t.add(this.di),this.xts(!1),e.xts(!1);const[n,r]=this.bts(t),h=this.O9t.b2RevoluteJointDef,o=this.q7t,a=new h;a.Initialize(this.H9t,e.v9t(),UC(n*o,r*o)),this.q9t.push(this.H7t.CreateJoint(a)),this.rts(a)}Tts(t,s,i,e){if(!this.Obt||!s||s===this.di)return;const n=TC.yut.V7t.Instance.S9t(s);n&&n.RIt()&&(i=TC.tr(i),e=TC.tr(e),this.z9t.push({type:2,yts:[t,s.TH(),i,e]}),this.Sts(t,s.TH(),i,e))}Sts(t,s,i,e){if(!this.Obt)return;const n=this.$c.P$(s);if(!n||n===this.di)return;const r=TC.yut.V7t.Instance.S9t(n);if(!r||!r.RIt())return;r.J9t.add(this.di),this.xts(!1),r.xts(!1);const[h,o]=this.bts(t),a=this.O9t.b2RevoluteJointDef,l=this.q7t,u=new a;u.Initialize(this.H9t,r.v9t(),UC(h*l,o*l)),u.set_enableLimit(!0),u.set_lowerAngle(TC.Qn(i)),u.set_upperAngle(TC.Qn(e)),this.q9t.push(this.H7t.CreateJoint(u)),this.rts(u)}Its(t,s,i,e,n,r,h,o,a){if(!this.Obt||!s||s===this.di)return;const l=TC.yut.V7t.Instance.S9t(s);l&&l.RIt()&&(i=TC.tr(i),o=TC.tr(o),this.z9t.push({type:3,yts:[t,s.TH(),i,e,n,r,h,o,a]}),this.vts(t,s.TH(),i,e,n,r,h,o,a))}vts(t,s,i,e,n,r,h,o,a){if(!this.Obt)return;const l=this.$c.P$(s);if(!l||l===this.di)return;const u=TC.yut.V7t.Instance.S9t(l);if(!u||!u.RIt())return;u.J9t.add(this.di),this.xts(!1),u.xts(!1);const[c,f]=this.bts(t);i=TC.Qn(i);const d=Math.cos(i),p=Math.sin(i),m=this.O9t.b2PrismaticJointDef,g=this.q7t,y=new m;y.Initialize(this.H9t,u.v9t(),UC(c*g,f*g),qC(d,p)),y.set_enableLimit(!!e),y.set_lowerTranslation(n*g),y.set_upperTranslation(r*g),y.set_enableMotor(!!h),y.set_motorSpeed(TC.Qn(o)),y.set_maxMotorForce(a),this.q9t.push(this.H7t.CreateJoint(y)),this.rts(y)}Cts(){this.Obt&&(this.sts(),TC.bh(this.z9t),this.J9t.clear())}_ts(){for(const t of this.J9t){const s=TC.yut.V7t.Instance.S9t(t);if(!s||!s.RIt())return;s.Ets(this.di)}this.J9t.clear()}l7t(t){this.Ets(t)}Ets(t){const s=t.TH();let i=0;for(let t=0,e=this.z9t.length;t<e;++t)this.z9t[i]=this.z9t[t],i<this.q9t.length&&(this.q9t[i]=this.q9t[t]),this.z9t[t].yts[1]===s?t<this.q9t.length&&this.H7t.DestroyJoint(this.q9t[t]):++i;TC.Sh(this.z9t,i),i<this.q9t.length&&TC.Sh(this.q9t,i),this.J9t.delete(t)}v9t(){return this.H9t}static e9t(t){return NC.get(t)||null}static S9t(t){return $C.get(t)||null}mx(){const t={e:this.Obt,im:this.F9t,pr:this.k9t,d:this.N9t,fr:this.$9t,re:this.B9t,ld:this.W9t,ad:this.j9t,b:this.V9t,mcj:this.z9t};if(this.Obt){const s=this.H9t.GetLinearVelocity();t.vx=s.get_x(),t.vy=s.get_y(),t.om=this.H9t.GetAngularVelocity()}return t}c8(){this.sts(),TC.bh(this.z9t),this.J9t.clear()}gx(t){this.pts(),this.Obt=t.e,t.hasOwnProperty("im")&&(this.F9t=!!t.im),this.k9t=t.pr,this.N9t=t.d,this.$9t=t.fr,this.B9t=t.re,this.W9t=t.ld,this.j9t=t.ad,this.V9t=t.b,this.z9t=t.mcj;const s=this.D$();this.Y9t=s.YM(),this.X9t=s.ZM(),this.o7t=s.Fj(),this.K9t=s.Vg(),this.Z9t=s.Qg(),this.Obt&&(this.tts(),this.H9t.SetLinearVelocity(UC(t.vx,t.vy)),this.H9t.SetAngularVelocity(t.om),0===t.vx&&0===t.vy&&0===t.om||this.H9t.SetAwake(!0),this.z9t=t.mcj),this.Obt?this.rEt():this.V_t()}d8(){this.Obt&&this.mts()}c7(){if(!this.Obt)return;const t=this.$c,s=this.lz();let i=0;0===s.o9t()?i=t.WN()/60:(i=t.AN(this.di),i>1/30&&(i=1/30));const e=t.Aqt();e>s.u9t()&&t.WN()>0&&(0!==i&&this.H7t.Step(i,s.f9t(),s.p9t()),this.H7t.ClearForces(),s.l9t(e)),this.xts(!0)}xts(t){const s=this.di.D$(),i=this.q7t;(s.Vg()!==this.K9t||s.Qg()!==this.Z9t||s.Skt())&&this.tts();const e=this.H9t,n=s.YM(),r=s.ZM(),h=n-this.Y9t,o=r-this.X9t,a=Math.abs(h)>.001||Math.abs(o)>.001,l=s.Fj()!==this.o7t;let u=n,c=r;if(2===this.L9t){const t=this.nts();u=t.ol(),c=t.al()}a?(l?e.SetTransform(UC(u*i,c*i),s.Fj()):e.SetTransform(UC(u*i,c*i),e.GetAngle()),t&&(e.SetLinearVelocity(UC(h,o)),this.Q9t=!0),e.SetAwake(!0)):t&&this.Q9t&&(this.Q9t=!1,e.SetLinearVelocity(UC(0,0)),e.SetTransform(UC(u*i,c*i),e.GetAngle())),!a&&l&&(e.SetTransform(e.GetPosition(),s.Fj()),e.SetAwake(!0));const f=e.GetPosition(),d=f.get_x()/i,p=f.get_y()/i,m=e.GetAngle();if((d!==s.YM()||p!==s.ZM()||m!==s.Fj())&&(s.GU(d,p),s.Oj(m),s.xU(),2===this.L9t)){const t=this.nts(),i=t.ol()-s.YM(),e=t.al()-s.ZM();0===i&&0===e||(s.IU(-i,-e),s.xU())}this.Y9t=s.YM(),this.X9t=s.ZM(),this.o7t=s.Fj()}sot(t){switch(t){case PC:return this.Pts();case AC:return this.Ats();case RC:return this.Rts();case OC:return this.Ots();case FC:return this.Fts();case DC:return this.Dts();case LC:return this.Lts();case kC:return this.RIt()}}oot(t,s){switch(t){case PC:this.kts(s);break;case AC:this.Nts(s);break;case RC:this.$ts(s);break;case OC:this.Bts(s);break;case FC:this.Wts(s);break;case DC:this.jts(s);break;case LC:this.Vts(s);break;case kC:this.PIt(s)}}PIt(t){t=!!t,this.Obt&&!t?(this._ts(),this.pts(),this.Obt=!1,this.V_t()):!this.Obt&&t&&(this.Obt=!0,this.tts(),this.rEt())}RIt(){return this.Obt}lEt(){const t="behaviors.physics",s=[{name:t+".properties.enabled.name",value:this.RIt(),Y2t:t=>this.PIt(t)},{name:t+".properties.immovable.name",value:this.Hts(),Y2t:t=>this.Uts(t)},{name:t+".properties.density.name",value:this.Ats(),Y2t:t=>this.Nts(t)},{name:t+".properties.friction.name",value:this.Rts(),Y2t:t=>this.$ts(t)},{name:t+".properties.elasticity.name",value:this.Ots(),Y2t:t=>this.Bts(t)},{name:t+".properties.linear-damping.name",value:this.Fts(),Y2t:t=>this.Wts(t)},{name:t+".properties.angular-damping.name",value:this.Dts(),Y2t:t=>this.jts(t)}];return this.Obt&&(s.push({name:t+".debugger.is-sleeping",value:!this.qts()}),s.push({name:t+".debugger.velocity-x",value:this.zts(),Y2t:t=>this.Jts(t,this.Yts())}),s.push({name:t+".debugger.velocity-y",value:this.Yts(),Y2t:t=>this.Jts(this.zts(),t)}),s.push({name:t+".debugger.angular-velocity",value:TC.tr(this.Xts()),Y2t:t=>this.Kts(TC.Qn(t))}),s.push({name:t+".debugger.mass",value:this.Zts()})),[{title:"$"+this.fz().Pc(),properties:s}]}Qts(t,s,i){const[e,n]=this.bts(i);this.tss(t,s,e,n)}sss(t,s,i,e){const[n,r]=this.bts(e),h=TC.rr(n,r,s,i);this.tss(Math.cos(h)*t,Math.sin(h)*t,n,r)}iss(t,s,i){const[e,n]=this.bts(i);this.tss(Math.cos(s)*t,Math.sin(s)*t,e,n)}tss(t,s,i,e){if(!this.Obt)return;const n=this.q7t;this.H9t.ApplyForce(UC(t,s),qC(i*n,e*n),!0)}ess(t,s,i){const[e,n]=this.bts(i);this.nss(t,s,e,n)}rss(t,s,i,e){const[n,r]=this.bts(e),h=TC.rr(n,r,s,i);this.nss(Math.cos(h)*t,Math.sin(h)*t,n,r)}hss(t,s,i){const[e,n]=this.bts(i);this.nss(Math.cos(s)*t,Math.sin(s)*t,e,n)}nss(t,s,i,e){if(!this.Obt)return;const n=this.q7t;this.H9t.ApplyLinearImpulse(UC(t,s),qC(i*n,e*n),!0);const r=this.D$();this.Y9t=r.YM(),this.X9t=r.ZM(),this.Q9t=!1}oss(t){this.Obt&&this.H9t.ApplyTorque(t,!0)}ass(t,s){const i=TC.lr(this.D$().Fj(),s)?-1:1;this.oss(t*i)}lss(t,s,i){const e=this.D$(),n=TC.rr(e.YM(),e.ZM(),s,i),r=TC.lr(e.Fj(),n)?-1:1;this.oss(t*r)}Kts(t){this.Obt&&(this.H9t.SetAngularVelocity(t),this.H9t.SetAwake(!0))}Xts(){return this.Obt?this.H9t.GetAngularVelocity():0}Jts(t,s){if(!this.Obt)return;const i=this.q7t;this.H9t.SetLinearVelocity(UC(t*i,s*i)),this.H9t.SetAwake(!0);const e=this.D$();this.Y9t=e.YM(),this.X9t=e.ZM(),this.Q9t=!1}uss(){if(!this.Obt)return[0,0];const t=this.q7t,s=this.H9t.GetLinearVelocity();return[s.get_x()/t,s.get_y()/t]}zts(){return this.Obt?this.H9t.GetLinearVelocity().get_x()/this.q7t:0}Yts(){return this.Obt?this.H9t.GetLinearVelocity().get_y()/this.q7t:0}css(t,s){if(!this.Obt)return;const i=this.q7t;this.H9t.SetTransform(UC(t*i,s*i),this.H9t.GetAngle());const e=this.D$();e.GU(t,s),e.xU(),this.Y9t=e.YM(),this.X9t=e.ZM()}Nts(t){if(this.Obt&&this.N9t!==t){this.N9t=t;for(const s of this.U9t)s.SetDensity(t);this.H9t.ResetMassData()}}Ats(){return this.Obt?this.N9t:0}$ts(t){if(this.Obt&&this.$9t!==t){this.$9t=t;for(const s of this.U9t)s.SetFriction(t);if(this.H9t)for(let t=this.H9t.GetContactList();this.O9t.getPointer(t);t=t.get_next()){const s=t.get_contact();s&&s.ResetFriction()}}}Rts(){return this.Obt?this.$9t:0}Bts(t){if(this.Obt&&this.B9t!==t){this.B9t=t;for(const s of this.U9t)s.SetRestitution(t)}}Ots(){return this.Obt?this.B9t:0}Wts(t){this.Obt&&this.W9t!==t&&(this.W9t=t,this.H9t.SetLinearDamping(t))}Fts(){return this.Obt?this.W9t:0}jts(t){this.Obt&&this.j9t!==t&&(this.j9t=t,this.H9t.SetAngularDamping(t))}Dts(){return this.Obt?this.j9t:0}Uts(t){this.Obt&&(t=!!t,this.F9t!==t&&(this.F9t=t,this.H9t.SetType(this.F9t?0:2),this.H9t.SetAwake(!0)))}Hts(){return this.F9t}kts(t){this.Obt&&(t=!!t,this.k9t!==t&&(this.k9t=t,this.H9t.SetFixedRotation(this.k9t),this.H9t.SetAngularVelocity(0),this.H9t.SetAwake(!0)))}Pts(){return this.k9t}Vts(t){this.Obt&&(t=!!t,this.V9t!==t&&(this.V9t=t,this.H9t.SetBullet(this.V9t),this.H9t.SetAwake(!0)))}Lts(){return this.V9t}fss(t){this.Obt&&this.H9t.SetAwake(!!t)}qts(){return!!this.Obt&&this.H9t.IsAwake()}Zts(){return this.Obt?this.H9t.GetMass()/this.q7t:0}dss(){return this.Obt?this.H9t.GetWorldCenter().get_x()/this.q7t:0}pss(){return this.Obt?this.H9t.GetWorldCenter().get_y()/this.q7t:0}mss(){if(!this.Obt)return[0,0];const t=this.H9t.GetWorldCenter(),s=this.q7t;return[t.get_x()/s,t.get_y()/s]}gss(){if(!this.Obt)return 0;let t=0;for(let s=this.H9t.GetContactList();this.O9t.getPointer(s);s=s.get_next()){const i=s.get_contact();i&&(t+=i.GetManifold().get_pointCount())}return t}yss(t){if(t=Math.floor(t),!this.Obt)return[0,0];let s=0;for(let i=this.H9t.GetContactList();this.O9t.getPointer(i);i=i.get_next()){const e=i.get_contact();if(!e)continue;const n=e.GetManifold().get_pointCount();if(t>=s&&t<s+n){const i=t-s,n=this.lz().x9t();e.GetWorldManifold(n);const r=n.get_points(i);return[r.get_x()/this.q7t,r.get_y()/this.q7t]}s+=n}return[0,0]}b_t(){return self.wss}};const YC=new WeakMap;self.wss=class extends CC{constructor(){super(),YC.set(this,CC.mH().iz())}get isEnabled(){return YC.get(this).RIt()}set isEnabled(t){YC.get(this).PIt(t)}Sss(t,s,i=0){IC.he(t),IC.he(s),YC.get(this).Qts(t,s,i)}vss(t,s,i,e=0){IC.he(t),IC.he(s),IC.he(i),YC.get(this).sss(t,s,i,e)}bss(t,s,i=0){IC.he(t),IC.he(s),YC.get(this).iss(t,s,i)}Mss(t,s,i=0){IC.he(t),IC.he(s),YC.get(this).ess(t,s,i)}xss(t,s,i,e=0){IC.he(t),IC.he(s),IC.he(i),YC.get(this).rss(t,s,i,e)}Gss(t,s,i=0){IC.he(t),IC.he(s),YC.get(this).hss(t,s,i)}Tss(t){IC.he(t),YC.get(this).oss(t)}Iss(t,s){IC.he(t),IC.he(s),YC.get(this).ass(t,s)}Css(t,s,i){IC.he(t),IC.he(s),IC.he(i),YC.get(this).lss(t,s,i)}set angularVelocity(t){IC.he(t),YC.get(this).Kts(t)}get angularVelocity(){return YC.get(this).Xts()}setVelocity(t,s){IC.he(t),IC.he(s),YC.get(this).Jts(t,s)}_ss(){return YC.get(this).zts()}Ess(){return YC.get(this).Yts()}Pss(){return YC.get(this).uss()}Ass(t,s){IC.he(t),IC.he(s),YC.get(this).css(t,s)}set Rss(t){IC.he(t),YC.get(this).Nts(t)}get Rss(){return YC.get(this).Ats()}set Oss(t){IC.he(t),YC.get(this).$ts(t)}get Oss(){return YC.get(this).Rts()}set Fss(t){IC.he(t),YC.get(this).Bts(t)}get Fss(){return YC.get(this).Ots()}set Dss(t){IC.he(t),YC.get(this).Wts(t)}get Dss(){return YC.get(this).Fts()}set Lss(t){IC.he(t),YC.get(this).jts(t)}get Lss(){return YC.get(this).Dts()}set kss(t){YC.get(this).Uts(t)}get kss(){return YC.get(this).Hts()}set Nss(t){YC.get(this).kts(t)}get Nss(){return YC.get(this).Pts()}set $ss(t){YC.get(this).Vts(t)}get $ss(){return YC.get(this).Lts()}get Bss(){return YC.get(this).Zts()}Wss(){return YC.get(this).dss()}jss(){return YC.get(this).pss()}Vss(){return YC.get(this).mss()}Hss(){return YC.get(this).gss()}Uss(t){return IC.he(t),YC.get(this).yss(t)[0]}qss(t){return IC.he(t),YC.get(this).yss(t)[1]}zss(t){return IC.he(t),YC.get(this).yss(t)}set Jss(t){YC.get(this).fss(!!t)}get Jss(){return YC.get(this).qts()}get Yss(){return!YC.get(this).qts()}Xss(t,s,i,e,n){IC.he(e),IC.he(n);const r=GC(this,s);YC.get(this).Mts(t,r,i,e,n)}Kss(t,s){const i=GC(this,s);YC.get(this).Gts(t,i)}Zss(t,s,i,e){IC.he(i),IC.he(e);const n=GC(this,s);YC.get(this).Tts(t,n,i,e)}Qss(t,s,i,e,n,r,h,o,a){const l=GC(this,s);YC.get(this).Its(t,l,i,e,n,r,h,o,a)}tis(){YC.get(this).Cts()}}}{const XC=self.Cs;XC.yut.V7t.Q$={sis(){return!this.qts()},iis(){return this.Hts()},eis(t,s,i){if(!this.Obt)return!1;let e=0;if(0===t)e=this.zts();else if(1===t)e=this.Yts();else{const[t,s]=this.uss();e=Math.hypot(t,s)}return XC.compare(e,s,i)},nis(t,s){if(!this.Obt)return!1;const i=XC.tr(this.Xts());return XC.compare(i,t,s)},ris(t,s){if(!this.Obt)return!1;const i=this.Zts();return XC.compare(i,t,s)},Cu(){return this.RIt()}}}{const KC=self.Cs;KC.yut.V7t.wht={his(t,s,i){this.Qts(t,s,i)},ois(t,s,i,e){this.sss(t,s,i,e)},ais(t,s,i){this.iss(t,KC.Qn(s),i)},lis(t,s,i){this.ess(t,s,i)},uis(t,s,i,e){this.rss(t,s,i,e)},cis(t,s,i){this.hss(t,KC.Qn(s),i)},fis(t){this.oss(KC.Qn(t))},dis(t,s){this.ass(KC.Qn(t),KC.Qn(s))},pis(t,s,i){this.lss(KC.Qn(t),s,i)},mis(t){this.Kts(KC.Qn(t))},gis(t,s,i,e,n){if(!s)return;const r=s.UTt(this.di);this.Mts(t,r,i,e,n)},yis(t,s){if(!s)return;const i=s.UTt(this.di);this.Gts(t,i)},wis(t,s,i,e){if(!s)return;const n=s.UTt(this.di);this.Tts(t,n,KC.Qn(i),KC.Qn(e))},Sis(t,s,i,e,n,r,h,o,a){if(!s)return;const l=s.UTt(this.di);this.Its(t,l,KC.Qn(i),e,n,r,h,KC.Qn(o),a)},vis(){this.Cts()},bis(t){this.lz().y9t(t)},a9t(t){this.lz().a9t(t)},m9t(t,s){this.lz().m9t(t,s)},Mis(t,s){this.Jts(t,s)},xis(t,s){this.css(t,s)},Gis(t){this.Nts(t)},Tis(t){this.$ts(t)},Iis(t){this.Bts(t)},Cis(t){this.Wts(t)},_is(t){this.jts(t)},Eis(t){this.Uts(t)},Pis(t,s){this.lz().M9t(this.fH(),t,0!==s)},Ais(t){this.kts(0!==t)},Ris(t){this.Vts(0!==t)},Ois(t){this.fss(!!t)},_Ct(t){this.PIt(0!==t)}}}{const ZC=self.Cs;ZC.yut.V7t.Sht={Fis(){return this.zts()},Dis(){return this.Yts()},Lis(){return ZC.tr(this.Xts())},kis(){return this.Zts()},Nis(){return this.dss()},$is(){return this.pss()},Bis(){return this.Ats()},Wis(){return this.Rts()},jis(){return this.Ots()},Vis(){return this.Fts()},His(){return this.Dts()},Uis(){return this.gss()},qis(t){return this.yss(t)[0]},zis(t){return this.yss(t)[1]}}}{let QC=function(t){return n_(t.get_x(),t.get_y())},t_=function(t){const s=[];for(const i of t)i.length<=8?s.push(i):s.push.apply(s,s_(i));return s},s_=function(t){const s=[];s.push(t.splice(0,8));const i=s[0][0];let e=s[0][7];for(;t.length;){const n=t.splice(0,Math.min(t.length,6));let r=n.at(-1);n.push(QC(i)),n.push(QC(e)),s.push(n),e=r}return s};CloneVec2=QC,SplitConvexPolysOver8Points=t_,SplitConvexPoly=s_;const i_=self.Cs,e_={};i_.yut.V7t.cts=e_;const n_=i_.yut.V7t.IAt,r_=i_.yut.V7t.T9t;e_.Jis=function(t,s,i,e,n,r){return t*e+i*r+n*s-s*i-e*n-r*t},e_.Yis=function(t,s,i,e,n,r,h,o){const a=i-t,l=e-s,u=h-n,c=o-r,f=(u*(r-s)-c*(n-t))/(l*u-a*c),d=t+f*a,p=s+f*l,m=e_.Xis(i,e,t,s,d,p),g=e_.Xis(d,p,n,r,h,o);return m&&g?n_(d,p):null},e_.Xis=function(t,s,i,e,n,r){return(i+.1>=t&&t>=n-.1||i-.1<=t&&t<=n+.1)&&(e+.1>=s&&s>=r-.1||e-.1<=s&&s<=r+.1)&&e_.Kis(t,s,i,e,n,r)},e_.Kis=function(t,s,i,e,n,r){if(Math.abs(n-i)>.1){const h=(r-e)/(n-i)*(t-i)+e;return Math.abs(h-s)<.1}return Math.abs(t-i)<.1},e_.Zis=function(t,s,i,e){return Math.abs(i-t)<.1&&Math.abs(e-s)<.1},e_.uts=function(t,s){if(3===t.length)return[t.map(t=>n_(t.get_x(),t.get_y()))];const i=e_.Qis(t);let e=[];for(let t=0,n=i.length;t<n;++t){const n=i[t],r=[];let h=0;for(let t=0,s=n.length;t<s;++t){const i=n[t],e=n[(t+1)%s];h+=i.get_x()*e.get_y()-i.get_y()*e.get_x(),r.push(n_(i.get_x(),i.get_y()))}if(h=Math.abs(h/2),h>=.001*s)e.push(r);else for(let t=0,s=r.length;t<s;t++)r_(r[t])}return e=t_(e),e},e_.Qis=function(t){let s,i,e,n,r,h,o,a=[],l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=0,w=0,S=0,v=0,b=0,M=0,x=0,G=[],T=[],I=!1,C=[],_=[],E=!1;for(_.push(t);_.length;){for(a=_[0],u=a.length,I=!0,l=0;l<u;l++)if(y=l,w=l<u-1?l+1:l+1-u,S=l<u-2?l+2:l+2-u,s=a[y],i=a[w],e=a[S],f=e_.Jis(s.get_x(),s.get_y(),i.get_x(),i.get_y(),e.get_x(),e.get_y()),f<0){for(I=!1,g=1e9,c=0;c<u;c++)c!==y&&c!==w&&(v=c,b=c<u-1?c+1:0,n=a[v],r=a[b],h=e_.Yis(s.get_x(),s.get_y(),i.get_x(),i.get_y(),n.get_x(),n.get_y(),r.get_x(),r.get_y()),h&&(p=i.get_x()-h.get_x(),m=i.get_y()-h.get_y(),d=p*p+m*m,d<g?(x=v,M=b,o=h,g=d):r_(h)));if(1e9===g)return[];for(G=[],T=[],v=x,b=M,n=a[v],r=a[b],E=!1,e_.Zis(o.get_x(),o.get_y(),r.get_x(),r.get_y())||(G.push(o),E=!0),e_.Zis(o.get_x(),o.get_y(),n.get_x(),n.get_y())||(T.push(o),E=!0),E||r_(o),x=-1,M=y;;){if(M===b){if(x<0||x>=u)return[];e_.Xis(r.get_x(),r.get_y(),a[x].get_x(),a[x].get_y(),s.get_x(),s.get_y())||G.push(a[M]);break}G.push(a[M]),x=M,M-1<0?M=u-1:M--}for(G.reverse(),x=-1,M=w;;){if(M===v){if(x<0||x>=u)return[];M!==v||e_.Xis(n.get_x(),n.get_y(),a[x].get_x(),a[x].get_y(),i.get_x(),i.get_y())||T.push(a[M]);break}T.push(a[M]),x=M,M+1>u-1?M=0:M++}_.push(G,T),_.shift();break}I&&C.push(_.shift())}return C}}{let h_=function(t){return"number"==typeof t?-t:t},o_=function(t,s){return"number"==typeof t&&"number"==typeof s},a_=function(t,s){return o_(t,s)?t+s:t},l_=function(t,s){return o_(t,s)?t-s:t},u_=function(t,s){return o_(t,s)?t*s:t},c_=function(t,s){return o_(t,s)?t/s:t},f_=function(t,s){return o_(t,s)?t%s:t},d_=function(t,s){return o_(t,s)?Math.pow(t,s):t},p_=function(t,s){if("string"==typeof t||"string"==typeof s){let i,e;return i="number"==typeof t?(Math.round(1e10*t)/1e10).toString():t,e="number"==typeof s?(Math.round(1e10*s)/1e10).toString():s,i+e}return t&&s?1:0},m_=function(t,s){return o_(t,s)?t||s?1:0:t};unaryminus=h_,bothNumbers=o_,add=a_,subtract=l_,multiply=u_,divide=c_,mod=f_,pow=d_,and=p_,or=m_;const g_=self.Cs;self.zMt=[t=>{const s=t.nxt(0).xMt(),i=t.nxt(1).xMt();return()=>s()+" - "+i()+" - (C) Wild Haired Science Teacher - Find more at whscience.org"},()=>0,t=>{const s=t.nxt(0),i=t.nxt(1);return()=>s.EMt()+i.EMt()/2+2},()=>"StringListLibrary",()=>"",t=>{const s=t.nxt(0).xMt(),i=t.nxt(1).qMt(),e=t.nxt(2).qMt();return()=>s(i._nt(),e._nt())-1},t=>{const s=t.nxt(0).xMt(),i=t.nxt(1).xMt(),e=t.nxt(2).qMt(),n=t.nxt(3).xMt(),r=t.nxt(4).qMt();return()=>s(i(e._nt(),n(),r._nt()))},t=>{const s=t.nxt(0).xMt(),i=t.nxt(1).qMt();return()=>s(i._nt())},t=>{const s=t.nxt(0).qMt();return()=>s._nt()},t=>{const s=t.nxt(0).xMt(),i=t.nxt(1).qMt(),e=t.nxt(2).qMt();return()=>s(i._nt(),e._nt())},t=>{const s=t.nxt(0).qMt(),i=t.nxt(1).qMt(),e=t.nxt(2).qMt();return()=>s._nt()+i._nt()+e._nt()},t=>{const s=t.nxt(0).xMt(),i=t.nxt(1).xMt(),e=t.nxt(2).qMt(),n=t.nxt(3).qMt();return()=>Math.floor(s(i(e._nt(),n._nt())))},t=>{const s=t.nxt(0).xMt(),i=t.nxt(1).qMt(),e=t.nxt(2).qMt(),n=t.nxt(3).qMt();return()=>s(i._nt(),e._nt(),n._nt())},t=>{const s=t.nxt(0).xMt(),i=t.nxt(1).xMt(),e=t.nxt(2).qMt(),n=t.nxt(3).qMt(),r=t.nxt(4).qMt(),h=t.nxt(5).qMt(),o=t.nxt(6).qMt();return()=>s(i(e._nt(),n._nt(),r._nt()),h._nt(),o._nt())},t=>{const s=t.nxt(0).xMt();return()=>s()},t=>{const s=t.nxt(0).xMt(),i=t.nxt(1).xMt(),e=t.nxt(2).qMt(),n=t.nxt(3).xMt(),r=t.nxt(4).qMt(),h=t.nxt(5).qMt(),o=t.nxt(6).qMt();return()=>s(i(e._nt(),n(),r._nt()),h._nt(),o._nt())},t=>{const s=t.nxt(0).xMt(),i=t.nxt(1).xMt(),e=t.nxt(2).qMt(),n=t.nxt(3).xMt(),r=t.nxt(4).qMt(),h=t.nxt(5).xMt(),o=t.nxt(6).qMt();return()=>s(i(e._nt()),n(r._nt()),h(o._nt()))},t=>{const s=t.nxt(0).xMt(),i=t.nxt(1).qMt(),e=t.nxt(2).qMt(),n=t.nxt(3).xMt(),r=t.nxt(4).qMt(),h=t.nxt(5).qMt(),o=t.nxt(6).qMt(),a=t.nxt(7).qMt();return()=>s(i._nt(),e._nt(),n(r._nt(),h._nt(),o._nt()),a._nt())},t=>{const s=t.nxt(0).xMt(),i=t.nxt(1).xMt(),e=t.nxt(2).qMt(),n=t.nxt(3).qMt(),r=t.nxt(4).xMt(),h=t.nxt(5).qMt(),o=t.nxt(6).qMt(),a=t.nxt(7).qMt();return()=>s(i(e._nt(),n._nt()-r(),h._nt()),o._nt(),a._nt())},t=>{const s=t.nxt(0).qMt();return()=>s._nt()-1},t=>{const s=t.nxt(0).qMt(),i=t.nxt(1).xMt(),e=t.nxt(2).xMt(),n=t.nxt(3).qMt(),r=t.nxt(4).xMt(),h=t.nxt(5).qMt();return()=>s._nt()+i(e(n._nt(),r(),h._nt()))},t=>{const s=t.nxt(0).qMt(),i=t.nxt(1).qMt();return()=>s._nt()/i._nt()},t=>{const s=t.nxt(0).qMt(),i=t.nxt(1).xMt(),e=t.nxt(2).xMt(),n=t.nxt(3).qMt(),r=t.nxt(4).xMt(),h=t.nxt(5).qMt(),o=t.nxt(6).qMt();return()=>s._nt()+Math.pow(i(e(n._nt(),r(),h._nt()))-o._nt(),2)},t=>{const s=t.nxt(0).qMt(),i=t.nxt(1).qMt();return()=>Math.sqrt(s._nt()/(i._nt()+1))},()=>"ToggleButton",t=>{const s=t.nxt(0).xMt(),i=t.nxt(1);return()=>s(i.DMt(),";")-1},t=>{const s=t.nxt(0).xMt(),i=t.nxt(1),e=t.nxt(2).xMt();return()=>s(i.DMt(),e(),";")},t=>{const s=t.nxt(0);return()=>s.EMt()},t=>{const s=t.nxt(0).xMt(),i=t.nxt(1),e=t.nxt(2).qMt(),n=t.nxt(3).xMt(),r=t.nxt(4);return()=>s(i.DMt(),(e._nt()+1)%n(r.DMt(),";"),";")},()=>"Button",t=>{const s=t.nxt(0);return()=>Math.floor(.875*s.DMt())},t=>{const s=t.nxt(0);return()=>s.DMt()},t=>{const s=t.nxt(0);return()=>s.OMt()},t=>{const s=t.nxt(0),i=t.nxt(1),e=t.nxt(2),n=t.nxt(3);return()=>g_.mr(s.OMt(),i.OMt(),e.OMt())*n.EMt()},t=>{const s=t.nxt(0),i=t.nxt(1),e=t.nxt(2);return()=>p_(s.OMt(),i.OMt())+e.OMt()},t=>{const s=t.nxt(0),i=t.nxt(1),e=t.nxt(2);return()=>p_(s.OMt(),Math.round(i.OMt()))+e.OMt()},t=>{const s=t.nxt(0),i=t.nxt(1),e=t.nxt(2).xMt(),n=t.nxt(3),r=t.nxt(4),h=t.nxt(5),o=t.nxt(6),a=t.nxt(7);return()=>p_(s.OMt(),Math.floor(i.OMt()))+"."+e(Math.floor((n.OMt()-Math.floor(r.OMt()))*Math.pow(10,h.OMt())),o.OMt())+a.OMt()},()=>-1,t=>{const s=t.nxt(0),i=t.nxt(1),e=t.nxt(2),n=t.nxt(3),r=t.nxt(4).xMt(),h=t.nxt(5),o=t.nxt(6),a=t.nxt(7),l=t.nxt(8),u=t.nxt(9);return()=>Math.round(g_.Ct(s.OMt(),i.OMt(),g_.mr(e.EMt(),n.EMt(),g_.Kn(r(h.EMt()),o.EMt(),a.EMt())))/l.OMt())*u.OMt()},()=>500,t=>{const s=t.nxt(0).xMt(),i=t.nxt(1).xMt();return()=>s(i())},t=>{const s=t.nxt(0).xMt();return()=>s(360)},()=>10,()=>"x",t=>{const s=t.nxt(0).xMt(),i=t.nxt(1);return()=>s()/i.EMt()-1},()=>"y",()=>"Macro",t=>{const s=t.nxt(0).xMt(),i=t.nxt(1);return()=>s("x")*i.EMt()},t=>{const s=t.nxt(0).xMt(),i=t.nxt(1);return()=>s("y")*i.EMt()},()=>.25,t=>{const s=t.nxt(0).qMt(),i=t.nxt(1).qMt();return()=>p_(p_(Math.round(s._nt()),"   "),Math.round(i._nt()))},t=>{const s=t.nxt(0).qMt(),i=t.nxt(1);return()=>Math.sqrt(s._nt()/i.EMt())},t=>{const s=t.nxt(0).qMt(),i=t.nxt(1).qMt(),e=t.nxt(2);return()=>Math.sqrt(s._nt()-i._nt())/e.EMt()/20},()=>"Smell",t=>{const s=t.nxt(0).xMt(),i=t.nxt(1),e=t.nxt(2);return()=>s(255,255-127*i.OMt(),255-255*e.OMt())},t=>{const s=t.nxt(0),i=t.nxt(1);return()=>Math.pow(s.WMt(),2)+Math.pow(i.WMt(),2)},t=>{const s=t.nxt(0),i=t.nxt(1).xMt();return()=>g_.Kn(36*Math.round(s.EMt()/36),0,i())},t=>{const s=t.nxt(0),i=t.nxt(1).xMt(),e=t.nxt(2);return()=>g_.Kn(s.EMt()+12,0,i()-e.EMt())},t=>{const s=t.nxt(0),i=t.nxt(1),e=t.nxt(2).qMt(),n=t.nxt(3).qMt();return()=>p_(p_(p_("Probe\nX: ",Math.round(s.EMt()/36)/2)+"\nY: ",Math.round(i.EMt()/36)/2)+"\nSmelliness: ",Math.round(e._nt()/n._nt()*20))},()=>1,()=>"Pause",()=>"Play",()=>"Hide Particles",()=>"Show Particles",()=>"Show Probe",()=>"Hide Probe",()=>50,()=>.01,t=>{const s=t.nxt(0).xMt(),i=t.nxt(1).xMt();return()=>s()/2-4+i(8)},()=>4,t=>{const s=t.nxt(0).xMt();return()=>s(255,128,0)},t=>{const s=t.nxt(0).qMt(),i=t.nxt(1).xMt(),e=t.nxt(2).qMt();return()=>p_(Math.floor(s._nt()/60),":")+i(Math.floor(e._nt()%60),2)}]}}}),import_c3runtime=__toESM(require_c3runtime()),C32=self.Cs;self.oUt=function(){return[C32.sB.Touch,C32.sB.si,C32.sB.Text,C32.sB.$rt,C32.sB.Keyboard,C32.sB.PlatformInfo,C32.yut.z8t,C32.sB.l8t,C32.yut.M7t,C32.yut.V7t,C32.sB.tB.Q$.z4,C32.sB.Text.wht.Vc,C32.sB.tB.Sht.LKt,C32.sB.tB.Sht.kKt,C32.sB.tB.wht.ph,C32.sB.$rt.wht.XM,C32.sB.Text.Sht.lCt,C32.sB.Text.Sht.P3t,C32.sB.tB.Q$.Swt,C32.sB.tB.Q$.DJt,C32.sB.tB.Sht.vXt,C32.sB.tB.Q$.yJt,C32.sB.tB.Sht.trim,C32.sB.tB.Sht.SXt,C32.sB.tB.Sht.GKt,C32.sB.tB.wht.xN,C32.sB.tB.wht.tYt,C32.sB.tB.Q$.evt,C32.sB.tB.wht.UJt,C32.sB.tB.Sht.random,C32.sB.tB.Sht.yXt,C32.sB.tB.Sht.float,C32.sB.si.Q$.f0t,C32.sB.si.Q$.d0t,C32.sB.si.wht.U0t,C32.sB.Touch.Q$.CZt,C32.sB.Touch.Q$.EZt,C32.sB.Text.Sht.Text,C32.sB.Text.Q$.HIt,C32.sB.tB.Q$.Hd,C32.sB.Text.wht.qIt,C32.sB.Text.Sht.E3t,C32.sB.Touch.Q$.$Zt,C32.sB.Text.Q$.OIt,C32.sB.Text.Q$.FIt,C32.sB.tB.Q$.cJt,C32.sB.Text.wht.yP,C32.sB.$rt.wht.VIt,C32.sB.Text.wht.VIt,C32.sB.$rt.wht.y4t,C32.sB.$rt.Sht.zTt,C32.sB.$rt.wht.qIt,C32.sB.$rt.wht.Hg,C32.sB.$rt.Sht.fCt,C32.sB.Text.wht.BP,C32.sB.$rt.Sht.cCt,C32.sB.$rt.Q$.OIt,C32.sB.$rt.wht.Xg,C32.sB.tB.Sht.CXt,C32.sB.Touch.Q$.vZt,C32.sB.Touch.Sht.vQt,C32.sB.Touch.Q$.GZt,C32.sB.Touch.Q$.NZt,C32.sB.$rt.Q$.FIt,C32.sB.$rt.Sht.dCt,C32.sB.$rt.Sht.mCt,C32.sB.Touch.Sht.lCt,C32.yut.V7t.wht.bis,C32.yut.z8t.wht.g7t,C32.sB.Text.wht.wV,C32.sB.tB.Q$.OJt,C32.sB.tB.wht.ZJt,C32.sB.tB.Sht.YXt,C32.sB.tB.Sht.XXt,C32.yut.V7t.wht.cis,C32.sB.$rt.Sht.eCt,C32.sB.tB.Q$.fJt,C32.sB.tB.Q$.SJt,C32.yut.V7t.Q$.eis,C32.sB.$rt.Sht.nCt,C32.sB.$rt.Q$.rIt,C32.sB.$rt.wht.kTt,C32.sB.tB.Sht.FKt,C32.sB.tB.wht.qJt,C32.yut.V7t.Sht.Fis,C32.yut.V7t.Sht.Dis,C32.yut.M7t.Q$.I7t,C32.sB.$rt.wht.cTt,C32.sB.$rt.Sht.lCt,C32.sB.$rt.Sht.uCt,C32.sB.Text.wht.cTt,C32.sB.Text.Sht.A3t,C32.sB.$rt.Q$.nIt,C32.sB.tB.Sht.AXt,C32.sB.tB.wht.sYt,C32.sB.$rt.wht.wV,C32.sB.$rt.Q$.vV,C32.yut.M7t.wht._Ct,C32.sB.tB.Q$.uJt,C32.sB.tB.Sht.PN]},self.EUt=[{Touch:0},{si:0},{tes:0},{ses:0},{ies:0},{ees:0},{nes:0},{res:0},{Keyboard:0},{PlatformInfo:0},{b1t:0},{hes:0},{oes:0},{aes:0},{hL:0},{les:0},{ues:0},{ces:0},{fes:0},{vQt:0},{des:0},{pes:0},{mes:0},{ges:0},{z8t:0},{yes:0},{wes:0},{l8t:0},{Ses:0},{ves:0},{bes:0},{Mes:0},{xes:0},{Ges:0},{Tes:0},{V7t:0},{Ies:0},{dRt:0},{Ces:0},{_es:0},{Ees:0},{Pes:0},{Aes:0},{Res:0},{Oes:0},{Fes:0},{Des:0},{Les:0},{kes:0},{Nes:0},{$es:0},{Bes:0},{index:0},{Wes:0},{jes:0},{Ves:0},{Hes:0},{Ues:0},{qes:0},{zes:0},{Jes:0},{Yes:0},{Xes:0},{Kes:0},{Zes:0},{Qes:0},{tns:0},{sns:0},{ins:0},{ens:0},{nns:0}],self.rns={Touch:class extends self.cH{},si:class extends self.cH{},ees:class extends self.X2t{},nes:class extends self.X2t{},res:class extends self.Z5t{},Keyboard:class extends self.cH{},PlatformInfo:class extends self.cH{},hes:class extends self.X2t{},mes:class extends self.Z5t{},ges:class extends self.Z5t{},yes:class extends self.X2t{},wes:class extends self.X2t{},l8t:class extends self.cH{},Mes:class extends self.X2t{},xes:class extends self.X2t{},Ges:class extends self.X2t{},Tes:class extends self.X2t{},Ies:class extends self.Z5t{},Ces:class extends self.Z5t{},Aes:class extends self.Z5t{},Res:class extends self.Z5t{},Oes:class extends self.Z5t{},Fes:class extends self.X2t{},Des:class extends self.X2t{},Les:class extends self.X2t{},kes:class extends self.X2t{},Nes:class extends self.X2t{},$es:class extends self.X2t{},Bes:class extends self.X2t{}};
/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.4.1

Copyright (c) 2015-2021, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/