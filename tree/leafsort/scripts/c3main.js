// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let P=function(t){bh=t},k=function(t){return t*Ph},F=function(t,s){return Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},j=function(){var t=new bh(4);return bh!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},z=function(t){var s=new bh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},B=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},U=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},W=function(t,s,i,e){var h=new bh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},Q=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},J=function(t,s){var i;return t===s?(i=s[1],t[1]=s[2],t[2]=i):(t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3]),t},V=function(t,s){var i=s[0],e=s[1],h=s[2],n=i*(s=s[3])-h*e;return n?(t[0]=s*(n=1/n),t[1]=-e*n,t[2]=-h*n,t[3]=i*n,t):null},Y=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},H=function(t){return t[0]*t[3]-t[2]*t[1]},t=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*r+n*o,t[1]=h*r+s*o,t[2]=e*a+n*i,t[3]=h*a+s*i,t},q=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=Math.sin(i),i=Math.cos(i);return t[0]=e*i+n*r,t[1]=h*i+s*r,t[2]=e*-r+n*i,t[3]=h*-r+s*i,t},Z=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=i[0],i=i[1];return t[0]=e*r,t[1]=h*r,t[2]=n*i,t[3]=s*i,t},X=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t},K=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},$=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},tt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},st=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},it=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},s=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},et=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},ht=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],n=s[0],r=s[1],o=s[2],s=s[3];return Math.abs(i-n)<=Th*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(e-r)<=Th*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(h-o)<=Th*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},nt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},rt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ot=function(){var t=new bh(6);return bh!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},at=function(t){var s=new bh(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},ut=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},lt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ct=function(t,s,i,e,h,n){var r=new bh(6);return r[0]=t,r[1]=s,r[2]=i,r[3]=e,r[4]=h,r[5]=n,r},ft=function(t,s,i,e,h,n,r){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t},dt=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],s=s[5],o=i*n-e*h;return o?(t[0]=n*(o=1/o),t[1]=-e*o,t[2]=-h*o,t[3]=i*o,t[4]=(h*s-n*r)*o,t[5]=(e*r-i*s)*o,t):null},pt=function(t){return t[0]*t[3]-t[1]*t[2]},i=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],s=s[5],a=i[0],u=i[1],l=i[2],c=i[3],f=i[4],i=i[5];return t[0]=e*a+n*u,t[1]=h*a+r*u,t[2]=e*l+n*c,t[3]=h*l+r*c,t[4]=e*f+n*i+o,t[5]=h*f+r*i+s,t},mt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],s=s[5],a=Math.sin(i),i=Math.cos(i);return t[0]=e*i+n*a,t[1]=h*i+r*a,t[2]=e*-a+n*i,t[3]=h*-a+r*i,t[4]=o,t[5]=s,t},gt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e*a,t[1]=h*a,t[2]=n*i,t[3]=r*i,t[4]=o,t[5]=s,t},yt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=e*a+n*i+o,t[5]=h*a+r*i+s,t},Mt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t},wt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},St=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},Tt=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},bt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},xt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},e=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},vt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},Ct=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},It=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},Gt=function(t,s){var i=t[0],e=t[1],h=t[2],n=t[3],r=t[4],t=t[5],o=s[0],a=s[1],u=s[2],l=s[3],c=s[4],s=s[5];return Math.abs(i-o)<=Th*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(e-a)<=Th*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(h-u)<=Th*Math.max(1,Math.abs(h),Math.abs(u))&&Math.abs(n-l)<=Th*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-c)<=Th*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},h=function(){var t=new bh(9);return bh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Et=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},_t=function(t){var s=new bh(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},Nt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Dt=function(t,s,i,e,h,n,r,o,a){var u=new bh(9);return u[0]=t,u[1]=s,u[2]=i,u[3]=e,u[4]=h,u[5]=n,u[6]=r,u[7]=o,u[8]=a,u},At=function(t,s,i,e,h,n,r,o,a,u){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t[6]=o,t[7]=a,t[8]=u,t},Lt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ot=function(t,s){var i,e,h;return t===s?(i=s[1],e=s[2],h=s[5],t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=h):(t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8]),t},Rt=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],u=s[7],l=(s=s[8])*r-o*u,c=-s*n+o*a,f=u*n-r*a,d=i*l+e*c+h*f;return d?(t[0]=l*(d=1/d),t[1]=(-s*e+h*u)*d,t[2]=(o*e-h*r)*d,t[3]=c*d,t[4]=(s*i-h*a)*d,t[5]=(-o*i+h*n)*d,t[6]=f*d,t[7]=(-u*i+e*a)*d,t[8]=(r*i-e*n)*d,t):null},Pt=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],u=s[7],s=s[8];return t[0]=r*s-o*u,t[1]=h*u-e*s,t[2]=e*o-h*r,t[3]=o*a-n*s,t[4]=i*s-h*a,t[5]=h*n-i*o,t[6]=n*u-r*a,t[7]=e*a-i*u,t[8]=i*r-e*n,t},kt=function(t){var s=t[0],i=t[3],e=t[4],h=t[5],n=t[6],r=t[7],o=t[8];return s*(o*e-h*r)+t[1]*(-o*i+h*n)+t[2]*(r*i-e*n)},n=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],u=s[6],l=s[7],s=s[8],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],M=i[7],i=i[8];return t[0]=c*e+f*r+d*u,t[1]=c*h+f*o+d*l,t[2]=c*n+f*a+d*s,t[3]=p*e+m*r+g*u,t[4]=p*h+m*o+g*l,t[5]=p*n+m*a+g*s,t[6]=y*e+M*r+i*u,t[7]=y*h+M*o+i*l,t[8]=y*n+M*a+i*s,t},Ft=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],u=s[6],l=s[7],s=s[8],c=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=o,t[5]=a,t[6]=c*e+i*r+u,t[7]=c*h+i*o+l,t[8]=c*n+i*a+s,t},jt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],u=s[6],l=s[7],s=s[8],c=Math.sin(i),i=Math.cos(i);return t[0]=i*e+c*r,t[1]=i*h+c*o,t[2]=i*n+c*a,t[3]=i*r-c*e,t[4]=i*o-c*h,t[5]=i*a-c*n,t[6]=u,t[7]=l,t[8]=s,t},zt=function(t,s,i){var e=i[0],i=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=i*s[3],t[4]=i*s[4],t[5]=i*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Ut=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Wt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Qt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Jt=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(u=i+i),n=(r=s[1])*u,r=r*(l=r+r),o=e*u,a=e*l,u=(s=s[3])*u,l=s*l,s=s*h;return t[0]=1-r-(e=e*h),t[3]=n-s,t[6]=o+l,t[1]=n+s,t[4]=1-i-e,t[7]=a-u,t[2]=o-l,t[5]=a+u,t[8]=1-i-r,t},Vt=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*r,M=i*a-h*r,w=i*u-n*r,S=e*a-h*o,T=e*u-n*o,b=h*u-n*a,x=l*m-c*p,v=l*g-f*p,C=c*g-f*m;return(d=y*(f=f*(s=s[15])-d*g)-M*(c=c*s-d*m)+w*C+S*(l=l*s-d*p)-T*v+b*x)?(t[0]=(o*f-a*c+u*C)*(d=1/d),t[1]=(a*l-r*f-u*v)*d,t[2]=(r*c-o*l+u*x)*d,t[3]=(h*c-e*f-n*C)*d,t[4]=(i*f-h*l+n*v)*d,t[5]=(e*l-i*c-n*x)*d,t[6]=(m*b-g*T+s*S)*d,t[7]=(g*w-p*b-s*M)*d,t[8]=(p*T-m*w+s*y)*d,t):null},Yt=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Ht=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},qt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Zt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},r=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Xt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Kt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},$t=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},ts=function(t,s){var i=t[0],e=t[1],h=t[2],n=t[3],r=t[4],o=t[5],a=t[6],u=t[7],t=t[8],l=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7],s=s[8];return Math.abs(i-l)<=Th*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(e-c)<=Th*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(h-f)<=Th*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(n-d)<=Th*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-p)<=Th*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(o-m)<=Th*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=Th*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(u-y)<=Th*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},ss=function(){var t=new bh(16);return bh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},is=function(t){var s=new bh(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},hs=function(t,s,i,e,h,n,r,o,a,u,l,c,f,d,p,m){var g=new bh(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=h,g[5]=n,g[6]=r,g[7]=o,g[8]=a,g[9]=u,g[10]=l,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},ns=function(t,s,i,e,h,n,r,o,a,u,l,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t[6]=o,t[7]=a,t[8]=u,t[9]=l,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},p=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rs=function(t,s){var i,e,h,n,r,o;return t===s?(i=s[1],e=s[2],h=s[3],n=s[6],r=s[7],o=s[11],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=n,t[11]=s[14],t[12]=h,t[13]=r,t[14]=o):(t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15]),t},os=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*r,M=i*a-h*r,w=i*u-n*r,S=e*a-h*o,T=e*u-n*o,b=h*u-n*a,x=l*m-c*p,v=l*g-f*p,C=l*(s=s[15])-d*p,I=c*g-f*m,G=c*s-d*m,E=f*s-d*g,_=y*E-M*G+w*I+S*C-T*v+b*x;return _?(t[0]=(o*E-a*G+u*I)*(_=1/_),t[1]=(h*G-e*E-n*I)*_,t[2]=(m*b-g*T+s*S)*_,t[3]=(f*T-c*b-d*S)*_,t[4]=(a*C-r*E-u*v)*_,t[5]=(i*E-h*C+n*v)*_,t[6]=(g*w-p*b-s*M)*_,t[7]=(l*b-f*w+d*M)*_,t[8]=(r*G-o*C+u*x)*_,t[9]=(e*C-i*G-n*x)*_,t[10]=(p*T-m*w+s*y)*_,t[11]=(c*w-l*T-d*y)*_,t[12]=(o*v-r*I-a*x)*_,t[13]=(i*I-e*v+h*x)*_,t[14]=(m*M-p*S-g*y)*_,t[15]=(l*S-c*M+f*y)*_,t):null},as=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*r,M=i*a-h*r,w=i*u-n*r,S=e*a-h*o,T=e*u-n*o,b=h*u-n*a,x=l*m-c*p,v=l*g-f*p,C=l*(s=s[15])-d*p,I=c*g-f*m,G=c*s-d*m,E=f*s-d*g;return t[0]=o*E-a*G+u*I,t[1]=h*G-e*E-n*I,t[2]=m*b-g*T+s*S,t[3]=f*T-c*b-d*S,t[4]=a*C-r*E-u*v,t[5]=i*E-h*C+n*v,t[6]=g*w-p*b-s*M,t[7]=l*b-f*w+d*M,t[8]=r*G-o*C+u*x,t[9]=e*C-i*G-n*x,t[10]=p*T-m*w+s*y,t[11]=c*w-l*T-d*y,t[12]=o*v-r*I-a*x,t[13]=i*I-e*v+h*x,t[14]=m*M-p*S-g*y,t[15]=l*S-c*M+f*y,t},us=function(t){var s=t[0],i=t[1],e=t[2],h=t[4],n=t[5],r=t[6],o=t[8],a=t[9],u=t[10],l=t[12],c=t[13],f=t[14],d=s*n-i*h,p=s*r-e*h,m=i*r-e*n,g=o*c-a*l,y=o*f-u*l,M=a*f-u*c;return t[7]*(s*M-i*y+e*g)-t[3]*(h*M-n*y+r*g)+t[15]*(o*m-a*p+u*d)-t[11]*(l*m-c*p+f*d)},o=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],s=s[15],M=i[0],w=i[1],S=i[2],T=i[3];return t[0]=M*e+w*o+S*c+T*m,t[1]=M*h+w*a+S*f+T*g,t[2]=M*n+w*u+S*d+T*y,t[3]=M*r+w*l+S*p+T*s,t[4]=(M=i[4])*e+(w=i[5])*o+(S=i[6])*c+(T=i[7])*m,t[5]=M*h+w*a+S*f+T*g,t[6]=M*n+w*u+S*d+T*y,t[7]=M*r+w*l+S*p+T*s,t[8]=(M=i[8])*e+(w=i[9])*o+(S=i[10])*c+(T=i[11])*m,t[9]=M*h+w*a+S*f+T*g,t[10]=M*n+w*u+S*d+T*y,t[11]=M*r+w*l+S*p+T*s,t[12]=(M=i[12])*e+(w=i[13])*o+(S=i[14])*c+(T=i[15])*m,t[13]=M*h+w*a+S*f+T*g,t[14]=M*n+w*u+S*d+T*y,t[15]=M*r+w*l+S*p+T*s,t},ls=function(t,s,i){var e,h,n,r,o,a,u,l,c,f,d,p,m=i[0],g=i[1],i=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*i+s[12],t[13]=s[1]*m+s[5]*g+s[9]*i+s[13],t[14]=s[2]*m+s[6]*g+s[10]*i+s[14],t[15]=s[3]*m+s[7]*g+s[11]*i+s[15]):(e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=o,t[5]=a,t[6]=u,t[7]=l,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*i+s[12],t[13]=h*m+a*g+f*i+s[13],t[14]=n*m+u*g+d*i+s[14],t[15]=r*m+l*g+p*i+s[15]),t},cs=function(t,s,i){var e=i[0],h=i[1],i=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*h,t[5]=s[5]*h,t[6]=s[6]*h,t[7]=s[7]*h,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fs=function(t,s,i,e){var h,n,r,o,a,u,l,c,f,d,p,m,g,y,M,w,S,T,b,x,v=e[0],C=e[1],e=e[2],I=Math.hypot(v,C,e);return I<Th?null:(v*=I=1/I,C*=I,e*=I,I=Math.sin(i),i=Math.cos(i),n=s[0],r=s[1],o=s[2],a=s[3],l=s[5],c=s[6],f=s[7],p=s[9],m=s[10],g=s[11],M=v*C*(h=1-i)-e*I,w=C*C*h+i,S=e*C*h+v*I,T=v*e*h+C*I,b=C*e*h-v*I,x=e*e*h+i,t[0]=n*(i=v*v*h+i)+(u=s[4])*(y=C*v*h+e*I)+(d=s[8])*(e=e*v*h-C*I),t[1]=r*i+l*y+p*e,t[2]=o*i+c*y+m*e,t[3]=a*i+f*y+g*e,t[4]=n*M+u*w+d*S,t[5]=r*M+l*w+p*S,t[6]=o*M+c*w+m*S,t[7]=a*M+f*w+g*S,t[8]=n*T+u*b+d*x,t[9]=r*T+l*b+p*x,t[10]=o*T+c*b+m*x,t[11]=a*T+f*b+g*x,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},ds=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[4],n=s[5],r=s[6],o=s[7],a=s[8],u=s[9],l=s[10],c=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=h*i+a*e,t[5]=n*i+u*e,t[6]=r*i+l*e,t[7]=o*i+c*e,t[8]=a*i-h*e,t[9]=u*i-n*e,t[10]=l*i-r*e,t[11]=c*i-o*e,t},ps=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],n=s[1],r=s[2],o=s[3],a=s[8],u=s[9],l=s[10],c=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i-a*e,t[1]=n*i-u*e,t[2]=r*i-l*e,t[3]=o*i-c*e,t[8]=h*e+a*i,t[9]=n*e+u*i,t[10]=r*e+l*i,t[11]=o*e+c*i,t},ms=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],n=s[1],r=s[2],o=s[3],a=s[4],u=s[5],l=s[6],c=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i+a*e,t[1]=n*i+u*e,t[2]=r*i+l*e,t[3]=o*i+c*e,t[4]=a*i-h*e,t[5]=u*i-n*e,t[6]=l*i-r*e,t[7]=c*i-o*e,t},gs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ys=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ms=function(t,s,i){var e,h=i[0],n=i[1],i=i[2],r=Math.hypot(h,n,i);return r<Th?null:(h*=r=1/r,n*=r,i*=r,r=Math.sin(s),s=Math.cos(s),t[0]=h*h*(e=1-s)+s,t[1]=n*h*e+i*r,t[2]=i*h*e-n*r,t[3]=0,t[4]=h*n*e-i*r,t[5]=n*n*e+s,t[6]=i*n*e+h*r,t[7]=0,t[8]=h*i*e+n*r,t[9]=n*i*e-h*r,t[10]=i*i*e+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},ws=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ss=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ts=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f=function(t,s,i){var e=s[0],h=s[2],n=h+h,r=e*(l=e+e),o=e*(c=(u=s[1])+u),e=e*n,a=u*c,u=u*n,l=(s=s[3])*l,c=s*c,s=s*n;return t[0]=1-(a+(h=h*n)),t[1]=o+s,t[2]=e-c,t[3]=0,t[4]=o-s,t[5]=1-(r+h),t[6]=u+l,t[7]=0,t[8]=e+c,t[9]=u-l,t[10]=1-(r+a),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},bs=function(t,s){var i=new bh(3),e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=e*e+h*h+n*n+r*r;return 0<c?(i[0]=2*(o*r+l*e+a*n-u*h)/c,i[1]=2*(a*r+l*h+u*e-o*n)/c,i[2]=2*(u*r+l*n+o*h-a*e)/c):(i[0]=2*(o*r+l*e+a*n-u*h),i[1]=2*(a*r+l*h+u*e-o*n),i[2]=2*(u*r+l*n+o*h-a*e)),f(t,s,i),t},a=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},d=function(t,s){var i=s[0],e=s[4],h=s[5],n=s[6],r=s[8],o=s[9],a=s[10];return t[0]=Math.hypot(i,s[1],s[2]),t[1]=Math.hypot(e,h,n),t[2]=Math.hypot(r,o,a),t},u=function(t,s){var i=new bh(3),e=(d(i,s),1/i[0]),h=s[0]*e,n=s[1]*(l=1/i[1]),r=s[2]*(i=1/i[2]),o=s[4]*e,a=s[5]*l,u=s[6]*i,e=s[8]*e,l=s[9]*l,c=0;return 0<(i=h+a+(s=s[10]*i))?(c=2*Math.sqrt(1+i),t[3]=.25*c,t[0]=(u-l)/c,t[1]=(e-r)/c,t[2]=(n-o)/c):a<h&&s<h?(c=2*Math.sqrt(1+h-a-s),t[3]=(u-l)/c,t[0]=.25*c,t[1]=(n+o)/c,t[2]=(e+r)/c):s<a?(c=2*Math.sqrt(1+a-h-s),t[3]=(e-r)/c,t[0]=(n+o)/c,t[1]=.25*c,t[2]=(u+l)/c):(c=2*Math.sqrt(1+s-h-a),t[3]=(n-o)/c,t[0]=(e+r)/c,t[1]=(u+l)/c,t[2]=.25*c),t},xs=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var s=e[0],h=e[1],n=e[2],r=e[4],o=e[5],a=e[6],u=e[8],l=e[9],e=e[10],c=(i[0]=Math.hypot(s,h,n),i[1]=Math.hypot(r,o,a),i[2]=Math.hypot(u,l,e),1/i[0]),f=1/i[1],s=s*c,h=h*f,n=n*(i=1/i[2]),r=r*c,a=a*i,u=u*c,c=l*f,l=e*i,e=0;return 0<(f=s+(o=o*f)+l)?(e=2*Math.sqrt(1+f),t[3]=.25*e,t[0]=(a-c)/e,t[1]=(u-n)/e,t[2]=(h-r)/e):o<s&&l<s?(e=2*Math.sqrt(1+s-o-l),t[3]=(a-c)/e,t[0]=.25*e,t[1]=(h+r)/e,t[2]=(u+n)/e):l<o?(e=2*Math.sqrt(1+o-s-l),t[3]=(u-n)/e,t[0]=(h+r)/e,t[1]=.25*e,t[2]=(a+c)/e):(e=2*Math.sqrt(1+l-s-o),t[3]=(h-r)/e,t[0]=(u+n)/e,t[1]=(a+c)/e,t[2]=.25*e),t},vs=function(t,s,i,e){var h=(r=s[0])*(l=r+r),n=r*(c=(a=s[1])+a),r=r*(f=(u=s[2])+u),o=a*c,a=a*f,u=u*f,l=(s=s[3])*l,c=s*c,s=s*f,f=e[0],d=e[1],e=e[2];return t[0]=(1-(o+u))*f,t[1]=(n+s)*f,t[2]=(r-c)*f,t[3]=0,t[4]=(n-s)*d,t[5]=(1-(h+u))*d,t[6]=(a+l)*d,t[7]=0,t[8]=(r+c)*e,t[9]=(a-l)*e,t[10]=(1-(h+o))*e,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Cs=function(t,s,i,e,h){var n=(o=s[0])*(c=o+o),r=o*(f=(u=s[1])+u),o=o*(d=(l=s[2])+l),a=u*f,u=u*d,l=l*d,c=(s=s[3])*c,f=s*f,s=s*d,d=e[0],p=e[1],e=e[2],m=h[0],g=h[1],h=h[2],y=(1-(a+l))*d,M=(r+s)*d,d=(o-f)*d,r=(r-s)*p,s=(1-(n+l))*p,l=(u+c)*p,p=(o+f)*e,o=(u-c)*e,f=(1-(n+a))*e;return t[0]=y,t[1]=M,t[2]=d,t[3]=0,t[4]=r,t[5]=s,t[6]=l,t[7]=0,t[8]=p,t[9]=o,t[10]=f,t[11]=0,t[12]=i[0]+m-(y*m+r*g+p*h),t[13]=i[1]+g-(M*m+s*g+o*h),t[14]=i[2]+h-(d*m+l*g+f*h),t[15]=1,t},Is=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(u=i+i),n=(r=s[1])*u,r=r*(l=r+r),o=e*u,a=e*l,u=(s=s[3])*u,l=s*l,s=s*h;return t[0]=1-r-(e=e*h),t[1]=n+s,t[2]=o-l,t[3]=0,t[4]=n-s,t[5]=1-i-e,t[6]=a+u,t[7]=0,t[8]=o+l,t[9]=a-u,t[10]=1-i-r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Gs=function(t,s,i,e,h,n,r){var o=1/(i-s),a=1/(h-e),u=1/(n-r);return t[0]=2*n*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(h+e)*a,t[10]=(r+n)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n*2*u,t[15]=0,t},l=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=(h+e)*(i=1/(e-h)),t[14]=2*h*e*i):(t[10]=-1,t[14]=-2*e),t},Es=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=h*(i=1/(e-h)),t[14]=h*e*i):(t[10]=-1,t[14]=-e),t},_s=function(t,s,i,e){var h=Math.tan(s.upDegrees*Math.PI/180),n=Math.tan(s.downDegrees*Math.PI/180),r=Math.tan(s.leftDegrees*Math.PI/180),o=2/(r+(s=Math.tan(s.rightDegrees*Math.PI/180))),a=2/(h+n);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(r-s)*o*.5,t[9]=(h-n)*a*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},c=function(t,s,i,e,h,n,r){var o=1/(s-i),a=1/(e-h),u=1/(n-r);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=(r+n)*u,t[15]=1,t},Ns=function(t,s,i,e,h,n,r){var o=1/(s-i),a=1/(e-h),r=1/(n-r);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=r,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=n*r,t[15]=1,t},Ds=function(t,s,i,e){var h,n,r,o,a=s[0],u=s[1],s=s[2],l=e[0],c=e[1],e=e[2],f=i[0],d=i[1],i=i[2];return Math.abs(a-f)<Th&&Math.abs(u-d)<Th&&Math.abs(s-i)<Th?p(t):(f=a-f,d=u-d,i=s-i,h=c*(i*=o=1/Math.hypot(f,d,i))-e*(d*=o),e=e*(f*=o)-l*i,l=l*d-c*f,(o=Math.hypot(h,e,l))?(h*=o=1/o,e*=o,l*=o):l=e=h=0,c=d*l-i*e,n=i*h-f*l,r=f*e-d*h,(o=Math.hypot(c,n,r))?(c*=o=1/o,n*=o,r*=o):r=n=c=0,t[0]=h,t[1]=c,t[2]=f,t[3]=0,t[4]=e,t[5]=n,t[6]=d,t[7]=0,t[8]=l,t[9]=r,t[10]=i,t[11]=0,t[12]=-(h*a+e*u+l*s),t[13]=-(c*a+n*u+r*s),t[14]=-(f*a+d*u+i*s),t[15]=1,t)},As=function(t,s,i,e){var h=s[0],n=s[1],s=s[2],r=e[0],o=e[1],e=e[2],a=h-i[0],u=n-i[1],l=a*a+u*u+(i=s-i[2])*i,c=(0<l&&(a*=l=1/Math.sqrt(l),u*=l,i*=l),o*i-e*u);return 0<(l=c*c+(e=e*a-r*i)*e+(r=r*u-o*a)*r)&&(c*=l=1/Math.sqrt(l),e*=l,r*=l),t[0]=c,t[1]=e,t[2]=r,t[3]=0,t[4]=u*r-i*e,t[5]=i*c-a*r,t[6]=a*e-u*c,t[7]=0,t[8]=a,t[9]=u,t[10]=i,t[11]=0,t[12]=h,t[13]=n,t[14]=s,t[15]=1,t},Ls=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Os=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Rs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Ps=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},ks=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Fs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},js=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},zs=function(t,s){var i=t[0],e=t[1],h=t[2],n=t[3],r=t[4],o=t[5],a=t[6],u=t[7],l=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],t=t[15],y=s[0],M=s[1],w=s[2],S=s[3],T=s[4],b=s[5],x=s[6],v=s[7],C=s[8],I=s[9],G=s[10],E=s[11],_=s[12],N=s[13],D=s[14],s=s[15];return Math.abs(i-y)<=Th*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(e-M)<=Th*Math.max(1,Math.abs(e),Math.abs(M))&&Math.abs(h-w)<=Th*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(n-S)<=Th*Math.max(1,Math.abs(n),Math.abs(S))&&Math.abs(r-T)<=Th*Math.max(1,Math.abs(r),Math.abs(T))&&Math.abs(o-b)<=Th*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(a-x)<=Th*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(u-v)<=Th*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(l-C)<=Th*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(c-I)<=Th*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(f-G)<=Th*Math.max(1,Math.abs(f),Math.abs(G))&&Math.abs(d-E)<=Th*Math.max(1,Math.abs(d),Math.abs(E))&&Math.abs(p-_)<=Th*Math.max(1,Math.abs(p),Math.abs(_))&&Math.abs(m-N)<=Th*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(g-D)<=Th*Math.max(1,Math.abs(g),Math.abs(D))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},m=function(){var t=new bh(3);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},Bs=function(t){var s=new bh(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Us=function(t){var s=t[0];return Math.hypot(s,t[1],t[2])},g=function(t,s,i){var e=new bh(3);return e[0]=t,e[1]=s,e[2]=i,e},Ws=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Qs=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},Js=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Vs=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},Ys=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},Hs=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},qs=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Zs=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Xs=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Ks=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},$s=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ti=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},si=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ii=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2])},ei=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e+(s=s[2]-t[2])*s},hi=function(t){var s=t[0],i=t[1];return s*s+i*i+(t=t[2])*t},ni=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},ri=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},y=function(t,s){var i=s[0],e=s[1],h=s[2];return 0<(i=i*i+e*e+h*h)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},M=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},w=function(t,s,i){var e=s[0],h=s[1],s=s[2],n=i[0],r=i[1],i=i[2];return t[0]=h*i-s*r,t[1]=s*n-e*i,t[2]=e*r-h*n,t},oi=function(t,s,i,e){var h=s[0],n=s[1],s=s[2];return t[0]=h+e*(i[0]-h),t[1]=n+e*(i[1]-n),t[2]=s+e*(i[2]-s),t},ai=function(t,s,i,e){var h=Math.acos(Math.min(Math.max(M(s,i),-1),1)),n=Math.sin(h),r=Math.sin((1-e)*h)/n,e=Math.sin(e*h)/n;return t[0]=r*s[0]+e*i[0],t[1]=r*s[1]+e*i[1],t[2]=r*s[2]+e*i[2],t},ui=function(t,s,i,e,h,n){var r=n*n,o=r*(2*n-3)+1,a=r*(n-2)+n,u=r*(n-1);return t[0]=s[0]*o+i[0]*a+e[0]*u+h[0]*(r=r*(3-2*n)),t[1]=s[1]*o+i[1]*a+e[1]*u+h[1]*r,t[2]=s[2]*o+i[2]*a+e[2]*u+h[2]*r,t},li=function(t,s,i,e,h,n){var r=1-n,o=r*r,a=n*n,u=o*r;return t[0]=s[0]*u+i[0]*(o=3*n*o)+e[0]*(r=3*a*r)+h[0]*(a=a*n),t[1]=s[1]*u+i[1]*o+e[1]*r+h[1]*a,t[2]=s[2]*u+i[2]*o+e[2]*r+h[2]*a,t},ci=function(t,s){s=s||1;var i=2*Oh()*Math.PI,e=2*Oh()-1,h=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*h,t[1]=Math.sin(i)*h,t[2]=e*s,t},fi=function(t,s,i){var e=s[0],h=s[1],s=s[2],n=i[3]*e+i[7]*h+i[11]*s+i[15];return t[0]=(i[0]*e+i[4]*h+i[8]*s+i[12])/(n=n||1),t[1]=(i[1]*e+i[5]*h+i[9]*s+i[13])/n,t[2]=(i[2]*e+i[6]*h+i[10]*s+i[14])/n,t},di=function(t,s,i){var e=s[0],h=s[1],s=s[2];return t[0]=e*i[0]+h*i[3]+s*i[6],t[1]=e*i[1]+h*i[4]+s*i[7],t[2]=e*i[2]+h*i[5]+s*i[8],t},pi=function(t,s,i){var e=i[0],h=i[1],n=s[0],r=s[1],o=h*(s=s[2])-(c=i[2])*r,a=c*n-e*s,u=e*r-h*n,l=h*u-c*a,c=c*o-e*u,e=e*a-h*o;return a*=h=2*i[3],u*=h,c*=2,e*=2,t[0]=n+(o*=h)+(l*=2),t[1]=r+a+c,t[2]=s+u+e,t},mi=function(t,s,i,e){var h=[],n=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],n[0]=h[0],n[1]=h[1]*Math.cos(e)-h[2]*Math.sin(e),n[2]=h[1]*Math.sin(e)+h[2]*Math.cos(e),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},gi=function(t,s,i,e){var h=[],n=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],n[0]=h[2]*Math.sin(e)+h[0]*Math.cos(e),n[1]=h[1],n[2]=h[2]*Math.cos(e)-h[0]*Math.sin(e),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},yi=function(t,s,i,e){var h=[],n=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],n[0]=h[0]*Math.cos(e)-h[1]*Math.sin(e),n[1]=h[0]*Math.sin(e)+h[1]*Math.cos(e),n[2]=h[2],t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},Mi=function(t,s){var i=t[0],e=t[1],h=t[2],n=s[0],r=s[1],o=s[2],e=(i=Math.sqrt((i*i+e*e+h*h)*(n*n+r*r+o*o)))&&M(t,s)/i;return Math.acos(Math.min(Math.max(e,-1),1))},wi=function(t){return t[0]=0,t[1]=0,t[2]=0,t},Si=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},Ti=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},bi=function(t,s){var i=t[0],e=t[1],t=t[2],h=s[0],n=s[1],s=s[2];return Math.abs(i-h)<=Th*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-n)<=Th*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},S=function(){var t=new bh(4);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},xi=function(t){var s=new bh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},vi=function(t,s,i,e){var h=new bh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},Ci=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Ii=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},Gi=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Ei=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},_i=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Ni=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Di=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ai=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Li=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Oi=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Ri=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Pi=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},ki=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Fi=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2],s[3]-t[3])},ji=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],h=s[2]-t[2];return i*i+e*e+h*h+(s=s[3]-t[3])*s},T=function(t){var s=t[0];return Math.hypot(s,t[1],t[2],t[3])},b=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e+(t=t[3])*t},zi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},Bi=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Ui=function(t,s){var i=s[0],e=s[1],h=s[2],n=i*i+e*e+h*h+(s=s[3])*s;return 0<n&&(n=1/Math.sqrt(n)),t[0]=i*n,t[1]=e*n,t[2]=h*n,t[3]=s*n,t},x=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Wi=function(t,s,i,e){var h=i[0]*e[1]-i[1]*e[0],n=i[0]*e[2]-i[2]*e[0],r=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],i=i[2]*e[3]-i[3]*e[2],e=s[0],u=s[1],l=s[2],s=s[3];return t[0]=u*i-l*a+s*o,t[1]=-e*i+l*r-s*n,t[2]=e*a-u*r+s*h,t[3]=-e*o+u*n-l*h,t},Qi=function(t,s,i,e){var h=s[0],n=s[1],r=s[2],s=s[3];return t[0]=h+e*(i[0]-h),t[1]=n+e*(i[1]-n),t[2]=r+e*(i[2]-r),t[3]=s+e*(i[3]-s),t},Ji=function(t,s){var i,e,h,n,r,o;for(s=s||1;1<=(r=(i=2*Oh()-1)*i+(e=2*Oh()-1)*e););for(;1<=(o=(h=2*Oh()-1)*h+(n=2*Oh()-1)*n););var a=Math.sqrt((1-r)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*h*a,t[3]=s*n*a,t},Vi=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3];return t[0]=i[0]*e+i[4]*h+i[8]*n+i[12]*s,t[1]=i[1]*e+i[5]*h+i[9]*n+i[13]*s,t[2]=i[2]*e+i[6]*h+i[10]*n+i[14]*s,t[3]=i[3]*e+i[7]*h+i[11]*n+i[15]*s,t},Yi=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=i[0],o=i[1],a=i[2],u=(i=i[3])*e+o*n-a*h,l=i*h+a*e-r*n,c=i*n+r*h-o*e;return t[0]=u*i+(e=-r*e-o*h-a*n)*-r+l*-a-c*-o,t[1]=l*i+e*-o+c*-r-u*-a,t[2]=c*i+e*-a+u*-o-l*-r,t[3]=s[3],t},Hi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},qi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Zi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Xi=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],n=s[0],r=s[1],o=s[2],s=s[3];return Math.abs(i-n)<=Th*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(e-r)<=Th*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(h-o)<=Th*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},v=function(){var t=new bh(4);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Ki=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},C=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},$i=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return Th<e?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){return t=Jh(t,s),Math.acos(2*t*t-1)},se=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*i+s*r+h*a-n*o,t[1]=h*i+s*o+n*r-e*a,t[2]=n*i+s*a+e*o-h*r,t[3]=s*i-e*r-h*o-n*a,t},I=function(t,s,i){i*=.5;var e=s[0],h=s[1],n=s[2],s=s[3],r=Math.sin(i),i=Math.cos(i);return t[0]=e*i+s*r,t[1]=h*i+n*r,t[2]=n*i-h*r,t[3]=s*i-e*r,t},G=function(t,s,i){i*=.5;var e=s[0],h=s[1],n=s[2],s=s[3],r=Math.sin(i),i=Math.cos(i);return t[0]=e*i-n*r,t[1]=h*i+s*r,t[2]=n*i+e*r,t[3]=s*i-h*r,t},E=function(t,s,i){i*=.5;var e=s[0],h=s[1],n=s[2],s=s[3],r=Math.sin(i),i=Math.cos(i);return t[0]=e*i+h*r,t[1]=h*i-e*r,t[2]=n*i+s*r,t[3]=s*i-n*r,t},ie=function(t,s){var i=s[0],e=s[1],s=s[2];return t[0]=i,t[1]=e,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-s*s)),t},_=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],n=Math.sqrt(i*i+e*e+h*h),s=Math.exp(s),r=0<n?s*Math.sin(n)/n:0;return t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=s*Math.cos(n),t},N=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],n=0<(n=Math.sqrt(i*i+e*e+h*h))?Math.atan2(n,s)/n:0;return t[0]=i*n,t[1]=e*n,t[2]=h*n,t[3]=.5*Math.log(i*i+e*e+h*h+s*s),t},ee=function(t,s,i){return N(t,s),Qh(t,t,i),_(t,t),t},D=function(t,s,i,e){var h,n,r=s[0],o=s[1],a=s[2],s=s[3],u=i[0],l=i[1],c=i[2],f=r*u+o*l+a*c+s*(i=i[3]);return f<0&&(f=-f,u=-u,l=-l,c=-c,i=-i),f=Th<1-f?(f=Math.acos(f),h=Math.sin(f),n=Math.sin((1-e)*f)/h,Math.sin(e*f)/h):(n=1-e,e),t[0]=n*r+f*u,t[1]=n*o+f*l,t[2]=n*a+f*c,t[3]=n*s+f*i,t},he=function(t){var s=Oh(),i=Oh(),e=Oh(),h=Math.sqrt(1-s),s=Math.sqrt(s);return t[0]=h*Math.sin(2*Math.PI*i),t[1]=h*Math.cos(2*Math.PI*i),t[2]=s*Math.sin(2*Math.PI*e),t[3]=s*Math.cos(2*Math.PI*e),t},ne=function(t,s){var i=s[0],e=s[1],h=s[2],n=i*i+e*e+h*h+(s=s[3])*s;return t[0]=-i*(n=n?1/n:0),t[1]=-e*n,t[2]=-h*n,t[3]=s*n,t},re=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},A=function(t,s){var i,e,h,n=s[0]+s[4]+s[8];return 0<n?(h=Math.sqrt(n+1),t[3]=.5*h,t[0]=(s[5]-s[7])*(h=.5/h),t[1]=(s[6]-s[2])*h,t[2]=(s[1]-s[3])*h):(i=(1+(n=s[3*(n=s[4]>s[0]?1:0)+n]<s[8]?2:n))%3,e=(2+n)%3,h=Math.sqrt(s[3*n+n]-s[3*i+i]-s[3*e+e]+1),t[n]=.5*h,t[3]=(s[3*i+e]-s[3*e+i])*(h=.5/h),t[i]=(s[3*i+n]+s[3*n+i])*h,t[e]=(s[3*e+n]+s[3*n+e])*h),t},oe=function(t,s,i,e){var h=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Rh,n=Math.PI/360,r=(e*=n,i*=n,Math.sin(s*=n)),o=Math.cos(s),a=Math.sin(i),u=Math.cos(i),l=Math.sin(e),c=Math.cos(e);switch(h){case"xyz":t[0]=r*u*c+o*a*l,t[1]=o*a*c-r*u*l,t[2]=o*u*l+r*a*c,t[3]=o*u*c-r*a*l;break;case"xzy":t[0]=r*u*c-o*a*l,t[1]=o*a*c-r*u*l,t[2]=o*u*l+r*a*c,t[3]=o*u*c+r*a*l;break;case"yxz":t[0]=r*u*c+o*a*l,t[1]=o*a*c-r*u*l,t[2]=o*u*l-r*a*c,t[3]=o*u*c+r*a*l;break;case"yzx":t[0]=r*u*c+o*a*l,t[1]=o*a*c+r*u*l,t[2]=o*u*l-r*a*c,t[3]=o*u*c-r*a*l;break;case"zxy":t[0]=r*u*c-o*a*l,t[1]=o*a*c+r*u*l,t[2]=o*u*l+r*a*c,t[3]=o*u*c-r*a*l;break;case"zyx":t[0]=r*u*c-o*a*l,t[1]=o*a*c+r*u*l,t[2]=o*u*l-r*a*c,t[3]=o*u*c+r*a*l;break;default:throw new Error("Unknown angle order "+h)}return t},ae=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},ue=function(t,s){return Math.abs(x(t,s))>=1-Th},le=function(){var t=new bh(8);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},ce=function(t){var s=new bh(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},fe=function(t,s,i,e,h,n,r,o){var a=new bh(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=h,a[5]=n,a[6]=r,a[7]=o,a},de=function(t,s,i,e,h,n,r){var o=new bh(8),h=(o[0]=t,o[1]=s,o[2]=i,o[3]=e,.5*h),n=.5*n,r=.5*r;return o[4]=h*e+n*i-r*s,o[5]=n*e+r*t-h*i,o[6]=r*e+h*s-n*t,o[7]=-h*t-n*s-r*i,o},L=function(t,s,i){var e=.5*i[0],h=.5*i[1],i=.5*i[2],n=s[0],r=s[1],o=s[2],s=s[3];return t[0]=n,t[1]=r,t[2]=o,t[3]=s,t[4]=e*s+h*o-i*r,t[5]=h*s+i*n-e*o,t[6]=i*s+e*r-h*n,t[7]=-e*n-h*r-i*o,t},pe=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},me=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},ge=function(t,s){var i=v(),e=(u(i,s),new bh(3));return a(e,s),L(t,i,e),t},O=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},ye=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Me=function(t,s,i,e,h,n,r,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t[6]=o,t[7]=a,t},we=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},Se=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Te=function(t,s){var i=s[4],e=s[5],h=s[6],n=s[7],r=-s[0],o=-s[1],a=-s[2],s=s[3];return t[0]=2*(i*s+n*r+e*a-h*o),t[1]=2*(e*s+n*o+h*r-i*a),t[2]=2*(h*s+n*a+i*o-e*r),t},be=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=.5*i[0],a=.5*i[1],i=.5*i[2],u=s[4],l=s[5],c=s[6],s=s[7];return t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=r*o+h*i-n*a+u,t[5]=r*a+n*o-e*i+l,t[6]=r*i+e*a-h*o+c,t[7]=-e*o-h*a-n*i+s,t},xe=function(t,s,i){var e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],u=s[6],l=o*r+(d=s[7])*e+a*n-u*h,c=a*r+d*h+u*e-o*n,f=u*r+d*n+o*h-a*e,d=d*r-o*e-a*h-u*n;return I(t,s,i),e=t[0],t[4]=l*(r=t[3])+d*e+c*(n=t[2])-f*(h=t[1]),t[5]=c*r+d*h+f*e-l*n,t[6]=f*r+d*n+l*h-c*e,t[7]=d*r-l*e-c*h-f*n,t},ve=function(t,s,i){var e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],u=s[6],l=o*r+(d=s[7])*e+a*n-u*h,c=a*r+d*h+u*e-o*n,f=u*r+d*n+o*h-a*e,d=d*r-o*e-a*h-u*n;return G(t,s,i),e=t[0],t[4]=l*(r=t[3])+d*e+c*(n=t[2])-f*(h=t[1]),t[5]=c*r+d*h+f*e-l*n,t[6]=f*r+d*n+l*h-c*e,t[7]=d*r-l*e-c*h-f*n,t},Ce=function(t,s,i){var e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],u=s[6],l=o*r+(d=s[7])*e+a*n-u*h,c=a*r+d*h+u*e-o*n,f=u*r+d*n+o*h-a*e,d=d*r-o*e-a*h-u*n;return E(t,s,i),e=t[0],t[4]=l*(r=t[3])+d*e+c*(n=t[2])-f*(h=t[1]),t[5]=c*r+d*h+f*e-l*n,t[6]=f*r+d*n+l*h-c*e,t[7]=d*r-l*e-c*h-f*n,t},Ie=function(t,s,i){var e=i[0],h=i[1],n=i[2],i=i[3],r=s[0],o=s[1],a=s[2],u=s[3];return t[0]=r*i+u*e+o*n-a*h,t[1]=o*i+u*h+a*e-r*n,t[2]=a*i+u*n+r*h-o*e,t[3]=u*i-r*e-o*h-a*n,t[4]=(r=s[4])*i+(u=s[7])*e+(o=s[5])*n-(a=s[6])*h,t[5]=o*i+u*h+a*e-r*n,t[6]=a*i+u*n+r*h-o*e,t[7]=u*i-r*e-o*h-a*n,t},Ge=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=i[0],o=i[1],a=i[2],u=i[3];return t[0]=e*u+s*r+h*a-n*o,t[1]=h*u+s*o+n*r-e*a,t[2]=n*u+s*a+e*o-h*r,t[3]=s*u-e*r-h*o-n*a,t[4]=e*(u=i[7])+s*(r=i[4])+h*(a=i[6])-n*(o=i[5]),t[5]=h*u+s*o+n*r-e*a,t[6]=n*u+s*a+e*o-h*r,t[7]=s*u-e*r-h*o-n*a,t},Ee=function(t,s,i,e){var h,n,r,o,a,u;return Math.abs(e)<Th?O(t,s):(u=Math.hypot(i[0],i[1],i[2]),e*=.5,h=(r=Math.sin(e))*i[0]/u,n=r*i[1]/u,r=r*i[2]/u,i=Math.cos(e),u=s[0],t[0]=u*i+(e=s[3])*h+(o=s[1])*r-(a=s[2])*n,t[1]=o*i+e*n+a*h-u*r,t[2]=a*i+e*r+u*n-o*h,t[3]=e*i-u*h-o*n-a*r,t[4]=(e=s[4])*i+(u=s[7])*h+(o=s[5])*r-(a=s[6])*n,t[5]=o*i+u*n+a*h-e*r,t[6]=a*i+u*r+e*n-o*h,t[7]=u*i-e*h-o*n-a*r,t)},_e=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},Ne=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=i[4],a=i[5],u=i[6],l=i[7],c=s[4],f=s[5],d=s[6],s=s[7],p=i[0],m=i[1],g=i[2],i=i[3];return t[0]=e*i+r*p+h*g-n*m,t[1]=h*i+r*m+n*p-e*g,t[2]=n*i+r*g+e*m-h*p,t[3]=r*i-e*p-h*m-n*g,t[4]=e*l+r*o+h*u-n*a+c*i+s*p+f*g-d*m,t[5]=h*l+r*a+n*o-e*u+f*i+s*m+d*p-c*g,t[6]=n*l+r*u+e*a-h*o+d*i+s*g+c*m-f*p,t[7]=r*l-e*o-h*a-n*u+s*i-c*p-f*m-d*g,t},De=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},Ae=function(t,s,i,e){var h=1-e;return Zh(s,i)<0&&(e=-e),t[0]=s[0]*h+i[0]*e,t[1]=s[1]*h+i[1]*e,t[2]=s[2]*h+i[2]*e,t[3]=s[3]*h+i[3]*e,t[4]=s[4]*h+i[4]*e,t[5]=s[5]*h+i[5]*e,t[6]=s[6]*h+i[6]*e,t[7]=s[7]*h+i[7]*e,t},Le=function(t,s){var i=Xh(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},Oe=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},Re=function(t,s){var i,e,h,n,r,o,a,u,l=Xh(s);return 0<l&&(l=Math.sqrt(l),u=(i=s[0]/l)*(r=s[4])+(e=s[1]/l)*(o=s[5])+(h=s[2]/l)*(a=s[6])+(n=s[3]/l)*(s=s[7]),t[0]=i,t[1]=e,t[2]=h,t[3]=n,t[4]=(r-i*u)/l,t[5]=(o-e*u)/l,t[6]=(a-h*u)/l,t[7]=(s-n*u)/l),t},Pe=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},ke=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Fe=function(t,s){var i=t[0],e=t[1],h=t[2],n=t[3],r=t[4],o=t[5],a=t[6],t=t[7],u=s[0],l=s[1],c=s[2],f=s[3],d=s[4],p=s[5],m=s[6],s=s[7];return Math.abs(i-u)<=Th*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-l)<=Th*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(h-c)<=Th*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(n-f)<=Th*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=Th*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(o-p)<=Th*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=Th*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},R=function(){var t=new bh(2);return bh!=Float32Array&&(t[0]=0,t[1]=0),t},je=function(t){var s=new bh(2);return s[0]=t[0],s[1]=t[1],s},ze=function(t,s){var i=new bh(2);return i[0]=t,i[1]=s,i},Be=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ue=function(t,s,i){return t[0]=s,t[1]=i,t},We=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},Qe=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},Je=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},Ve=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},Ye=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},He=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},qe=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},Ze=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Xe=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Ke=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},$e=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},th=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1])},sh=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},ih=function(t){var s=t[0];return Math.hypot(s,t[1])},eh=function(t){var s=t[0];return s*s+(t=t[1])*t},hh=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},nh=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},rh=function(t,s){var i=s[0],e=s[1];return 0<(i=i*i+e*e)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t},oh=function(t,s){return t[0]*s[0]+t[1]*s[1]},ah=function(t,s,i){return s=s[0]*i[1]-s[1]*i[0],t[0]=t[1]=0,t[2]=s,t},uh=function(t,s,i,e){var h=s[0],s=s[1];return t[0]=h+e*(i[0]-h),t[1]=s+e*(i[1]-s),t},lh=function(t,s){s=s||1;var i=2*Oh()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},ch=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s,t[1]=i[1]*e+i[3]*s,t},fh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s+i[4],t[1]=i[1]*e+i[3]*s+i[5],t},dh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[3]*s+i[6],t[1]=i[1]*e+i[4]*s+i[7],t},ph=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[4]*s+i[12],t[1]=i[1]*e+i[5]*s+i[13],t},mh=function(t,s,i,e){var h=s[0]-i[0],s=s[1]-i[1],n=Math.sin(e),e=Math.cos(e);return t[0]=h*e-s*n+i[0],t[1]=h*n+s*e+i[1],t},gh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1],h=Math.sqrt((i*i+t*t)*(e*e+s*s));return Math.acos(Math.min(Math.max(h&&(i*e+t*s)/h,-1),1))},yh=function(t){return t[0]=0,t[1]=0,t},Mh=function(t){return"vec2("+t[0]+", "+t[1]+")"},wh=function(t,s){return t[0]===s[0]&&t[1]===s[1]},Sh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1];return Math.abs(i-e)<=Th*Math.max(1,Math.abs(i),Math.abs(e))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))};h,p,f,a,d,u,m,g,y,M,w,S,x,v,C,I,G,E,_,N,D,A,L,O,R,Th=1e-6,bh="undefined"!=typeof Float32Array?Float32Array:Array,Oh=Math.random,Rh="zyx",Ph=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),kh={__proto__:null,EPSILON:Th,get m(){return bh},g:Oh,M:Rh,S:P,T:k,equals:F},Fh=Object.freeze({__proto__:null,create:j,clone:z,C:B,identity:U,I:W,set:Q,G:J,_:V,N:Y,D:H,multiply:t,rotate:q,scale:Z,A:X,L:K,O:$,R:tt,P:st,add:it,F:s,j:et,equals:ht,B:nt,U:rt,mul:t,sub:s}),jh=Object.freeze({__proto__:null,create:ot,clone:at,C:ut,identity:lt,I:ct,set:ft,_:dt,D:pt,multiply:i,rotate:mt,scale:gt,translate:yt,A:Mt,L:wt,W:St,O:Tt,R:bt,add:xt,F:e,B:vt,U:Ct,j:It,equals:Gt,mul:i,sub:e}),zh=Object.freeze({__proto__:null,create:h,J:Et,clone:_t,C:Nt,I:Dt,set:At,identity:Lt,G:Ot,_:Rt,N:Pt,D:kt,multiply:n,translate:Ft,rotate:jt,scale:zt,W:Bt,A:Ut,L:Wt,V:Qt,Y:Jt,H:Vt,Z:Yt,O:Ht,R:qt,add:Zt,F:r,B:Xt,U:Kt,j:$t,equals:ts,mul:n,sub:r}),xh=Object.freeze({__proto__:null,create:ss,clone:is,C:es,I:hs,set:ns,identity:p,G:rs,_:os,N:as,D:us,multiply:o,translate:ls,scale:cs,rotate:fs,X:ds,K:ps,$:ms,W:gs,L:ys,A:Ms,tt:ws,it:Ss,et:Ts,ht:f,nt:bs,ot:a,ut:d,lt:u,ct:xs,ft:vs,dt:Cs,Y:Is,gt:Gs,yt:l,perspective:l,Mt:Es,St:_s,Tt:c,ortho:c,bt:Ns,xt:Ds,vt:As,O:Ls,R:Os,add:Rs,F:Ps,B:ks,U:Fs,j:js,equals:zs,mul:o,sub:Ps}),qh=Vs,Kh=Ys,Wh=Hs,$h=ii,tn=ei,Bh=Us,sn=hi,Lh=m(),vh=Object.freeze({__proto__:null,create:m,clone:Bs,length:Us,I:g,C:Ws,set:Qs,add:Js,F:Vs,multiply:Ys,Ct:Hs,ceil:qs,floor:Zs,min:Xs,max:Ks,round:$s,scale:ti,It:si,Gt:ii,Et:ei,_t:hi,Nt:ni,inverse:ri,normalize:y,Dt:M,At:w,Lt:oi,Ot:ai,Rt:ui,Pt:li,random:ci,kt:fi,Ft:di,jt:pi,X:mi,K:gi,$:yi,angle:Mi,zt:wi,O:Si,j:Ti,equals:bi,sub:qh,mul:Kh,div:Wh,Bt:$h,Ut:tn,Wt:Bh,Qt:sn,forEach:function(t,s,i,e,h,n){var r,o;for(s=s||3,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,r=i;r<o;r+=s)Lh[0]=t[r],Lh[1]=t[r+1],Lh[2]=t[r+2],h(Lh,Lh,n),t[r]=Lh[0],t[r+1]=Lh[1],t[r+2]=Lh[2];return t}}),qh=Ei,Kh=_i,Wh=Ni,$h=Fi,tn=ji,sn=T,en=b,Ah=S(),Uh=Object.freeze({__proto__:null,create:S,clone:xi,I:vi,C:Ci,set:Ii,add:Gi,F:Ei,multiply:_i,Ct:Ni,ceil:Di,floor:Ai,min:Li,max:Oi,round:Ri,scale:Pi,It:ki,Gt:Fi,Et:ji,length:T,_t:b,Nt:zi,inverse:Bi,normalize:Ui,Dt:x,At:Wi,Lt:Qi,random:Ji,kt:Vi,jt:Yi,zt:Hi,O:qi,j:Zi,equals:Xi,sub:qh,mul:Kh,div:Wh,Bt:$h,Ut:tn,Wt:sn,Qt:en,forEach:function(t,s,i,e,h,n){var r,o;for(s=s||4,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,r=i;r<o;r+=s)Ah[0]=t[r],Ah[1]=t[r+1],Ah[2]=t[r+2],Ah[3]=t[r+3],h(Ah,Ah,n),t[r]=Ah[0],t[r+1]=Ah[1],t[r+2]=Ah[2],t[r+3]=Ah[3];return t}}),qh=xi,Kh=vi,Wh=Ci,$h=Ii,tn=Gi,sn=se,Qh=Pi,Jh=x,en=Qi,hn=Vh=T,nn=Yh=b,Hh=Ui,rn=Zi,_h=m(),Nh=g(1,0,0),Dh=g(0,1,0),on=function(t,s,i){var e=M(s,i);return e<-.999999?(w(_h,Nh,s),Bh(_h)<1e-6&&w(_h,Dh,s),y(_h,_h),C(t,_h,Math.PI),t):.999999<e?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(w(_h,s,i),t[0]=_h[0],t[1]=_h[1],t[2]=_h[2],t[3]=1+e,Hh(t,t))},Gh=v(),Eh=v(),an=function(t,s,i,e,h,n){return D(Gh,s,h,n),D(Eh,i,e,n),D(t,Gh,Eh,2*n*(1-n)),t},Ih=h(),qh=Object.freeze({__proto__:null,create:v,identity:Ki,Jt:C,Vt:$i,Yt:te,multiply:se,X:I,K:G,$:E,Ht:ie,exp:_,qt:N,pow:ee,Ot:D,random:he,_:ne,Zt:re,Xt:A,Kt:oe,O:ae,clone:qh,I:Kh,C:Wh,set:$h,add:tn,mul:sn,scale:Qh,Dt:Jh,Lt:en,length:Vh,Wt:hn,_t:Yh,Qt:nn,normalize:Hh,j:rn,equals:ue,$t:on,ts:an,ss:function(t,s,i,e){return Ih[0]=i[0],Ih[3]=i[1],Ih[6]=i[2],Ih[1]=e[0],Ih[4]=e[1],Ih[7]=e[2],Ih[2]=-s[0],Ih[5]=-s[1],Ih[8]=-s[2],Hh(t,A(t,Ih))}}),Zh=Jh,Kh=Xh=Yh,$h=Object.freeze({__proto__:null,create:le,clone:ce,I:fe,es:de,ht:L,W:pe,A:me,J:ge,C:O,identity:ye,set:Me,hs:Wh,ns:we,rs:Wh,os:Se,ot:Te,translate:be,X:xe,K:ve,$:Ce,us:Ie,ls:Ge,cs:Ee,add:_e,multiply:Ne,mul:Ne,scale:De,Dt:Zh,Lt:Ae,_:Le,Zt:Oe,length:Vh,Wt:Vh,_t:Xh,Qt:Kh,normalize:Re,O:Pe,j:ke,equals:Fe}),tn=ih,sn=Qe,en=Je,hn=Ve,nn=th,rn=sh,on=eh,Ch=R(),an=Object.freeze({__proto__:null,create:R,clone:je,I:ze,C:Be,set:Ue,add:We,F:Qe,multiply:Je,Ct:Ve,ceil:Ye,floor:He,min:qe,max:Ze,round:Xe,scale:Ke,It:$e,Gt:th,Et:sh,length:ih,_t:eh,Nt:hh,inverse:nh,normalize:rh,Dt:oh,At:ah,Lt:uh,random:lh,ds:ch,gs:fh,Ft:dh,kt:ph,rotate:mh,angle:gh,zt:yh,O:Mh,j:wh,equals:Sh,Wt:tn,sub:sn,mul:en,div:hn,Bt:nn,Ut:rn,Qt:on,forEach:function(t,s,i,e,h,n){var r,o;for(s=s||2,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,r=i;r<o;r+=s)Ch[0]=t[r],Ch[1]=t[r+1],h(Ch,Ch,n),t[r]=Ch[0],t[r+1]=Ch[1];return t}}),globalThis.ys=kh,globalThis.ys.Ms=Fh,globalThis.ys.ws=jh,globalThis.ys.Ss=zh,globalThis.ys.Ts=xh,globalThis.ys.bs=qh,globalThis.ys.xs=$h,globalThis.ys.vs=an,globalThis.ys.Cs=vh,globalThis.ys.Is=Uh}var Ch,Ih,Gh,Eh,_h,Nh,Dh,Ah,Lh,Th,bh,Oh,Rh,Ph,kh,Fh,jh,zh,xh,Bh,vh,Uh,Wh,Qh,Jh,Vh,Yh,Hh,qh,Zh,Xh,Kh,$h,tn,sn,en,hn,nn,rn,on,an,O,R,P,k;{let a=function(t,s,i){var e=[0,0],h=t[1][1]-t[0][1],n=t[0][0]-t[1][0],t=h*t[0][0]+n*t[0][1],r=s[1][1]-s[0][1],o=s[0][0]-s[1][0],s=r*s[0][0]+o*s[0][1],a=h*o-r*n;return m(a,0,i=i||0)||(e[0]=(o*t-n*s)/a,e[1]=(h*s-r*t)/a),e},h=function(t,s,i,e){var h,n=s[0]-t[0],s=s[1]-t[1],r=e[0]-i[0];return r*s-(e=e[1]-i[1])*n!=0&&(h=(r*(t[1]-i[1])+e*(i[0]-t[0]))/(e*n-r*s),0<=(t=(n*(i[1]-t[1])+s*(t[0]-i[0]))/(r*s-e*n)))&&t<=1&&0<=h&&h<=1},o=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},x=function(t,s,i){return 0<o(t,s,i)},v=function(t,s,i){return 0<=o(t,s,i)},C=function(t,s,i){return o(t,s,i)<0},I=function(t,s,i){return o(t,s,i)<=0},n=function(t,s,i,e){var h,n,r;return e?(r=R,(n=O)[0]=s[0]-t[0],n[1]=s[1]-t[1],r[0]=i[0]-s[0],r[1]=i[1]-s[1],h=n[0]*r[0]+n[1]*r[1],n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),Math.acos(h/(n*r))<e):0===o(t,s,i)},G=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},E=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},r=function(t){t.length=0},_=function(t,s,i,e){for(var h=i;h<e;h++)t.push(s[h])},t=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!x(E(t,s-1),E(t,s),E(t,s+1))&&(u(t),!0)},u=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},N=function(t,s){return C(E(t,s-1),E(t,s),E(t,s+1))},l=function(t,s,i){var e,h=P,n=k;if(v(E(t,s+1),E(t,s),E(t,i))&&I(E(t,s-1),E(t,s),E(t,i)))return!1;for(var r=G(E(t,s),E(t,i)),o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&v(E(t,s),E(t,i),E(t,o+1))&&I(E(t,s),E(t,i),E(t,o))&&(h[0]=E(t,s),h[1]=E(t,i),n[0]=E(t,o),n[1]=E(t,o+1),e=a(h,n),G(E(t,s),e)<r))return!1;return!0},D=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&h(E(t,s),E(t,i),E(t,e),E(t,e+1)))return!1;return!0},c=function(t,s,i,e){var h=e||[];if(r(h),s<i)for(var n=s;n<=i;n++)h.push(t[n]);else{for(n=0;n<=i;n++)h.push(t[n]);for(n=s;n<t.length;n++)h.push(t[n])}return h},f=function(t){for(var s=[],i=[],e=[],h=Number.MAX_VALUE,n=0;n<t.length;++n)if(N(t,n))for(var r=0;r<t.length;++r)if(l(t,n,r)){for(var i=f(c(t,n,r,e)),o=f(c(t,r,n,e)),a=0;a<o.length;a++)i.push(o[a]);i.length<h&&(h=(s=i).length,s.push([E(t,n),E(t,r)]))}return s},s=function(t){var s=f(t);return 0<s.length?d(t,s):[t]},d=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var h=s[e],n=0;n<i.length;n++){var r=d(i[n],h);if(r){i.splice(n,1),i.push(r[0],r[1]);break}}return i}return e=t.indexOf((h=s)[0]),n=t.indexOf(h[1]),-1!==e&&-1!==n&&[c(t,e,n),c(t,n,e)]},i=function(t){for(var s=t,i=0;i<s.length-1;i++)for(var e=0;e<i-1;e++)if(h(s[i],s[i+1],s[e],s[e+1]))return!1;for(i=1;i<s.length-2;i++)if(h(s[0],s[s.length-1],s[i],s[i+1]))return!1;return!0},A=function(t,s,i,e,h){var n=s[1]-t[1],s=t[0]-s[0],t=n*t[0]+s*t[1],r=e[1]-i[1],e=i[0]-e[0],i=r*i[0]+e*i[1],o=n*e-r*s;return m(o,0,h=h||0)?[0,0]:[(e*t-s*i)/o,(n*i-r*t)/o]},L=function(t,s,i,e,h,n,r){n=n||100,r=r||0,h=h||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],u=[0,0],l=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],M=[],w=t,S=t;if(!(S.length<3))if(n<++r)console.warn("quickDecomp: max level ("+n+") reached.");else{for(var T=0;T<t.length;++T)if(N(w,T)){i.push(w[T]);for(var l=c=Number.MAX_VALUE,b=0;b<t.length;++b)x(E(w,T-1),E(w,T),E(w,b))&&I(E(w,T-1),E(w,T),E(w,b-1))&&(u=A(E(w,T-1),E(w,T),E(w,b),E(w,b-1)),C(E(w,T+1),E(w,T),u))&&(f=G(w[T],u))<c&&(c=f,a=u,m=b),x(E(w,T+1),E(w,T),E(w,b+1))&&I(E(w,T+1),E(w,T),E(w,b))&&(u=A(E(w,T+1),E(w,T),E(w,b),E(w,b+1)),x(E(w,T-1),E(w,T),u))&&(f=G(w[T],u))<l&&(l=f,o=u,p=b);if(m===(p+1)%t.length)u[0]=(a[0]+o[0])/2,u[1]=(a[1]+o[1])/2,e.push(u),T<p?(_(y,w,T,p+1),y.push(u),M.push(u),0!==m&&_(M,w,m,w.length),_(M,w,0,T+1)):(0!==T&&_(y,w,T,w.length),_(y,w,0,p+1),y.push(u),M.push(u),_(M,w,m,T+1));else{if(p<m&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(b=m;b<=p;++b)v(E(w,T-1),E(w,T),E(w,b))&&I(E(w,T+1),E(w,T),E(w,b))&&(f=G(E(w,T),E(w,b)))<d&&D(w,T,b)&&(d=f,g=b%t.length);T<g?(_(y,w,T,g+1),0!==g&&_(M,w,g,S.length),_(M,w,0,T+1)):(0!==T&&_(y,w,T,S.length),_(y,w,0,g+1),_(M,w,g,T+1))}return y.length<M.length?(L(y,s,i,e,h,n,r),L(M,s,i,e,h,n,r)):(L(M,s,i,e,h,n,r),L(y,s,i,e,h,n,r)),s}s.push(t)}return s},e=function(t,s){for(var i=0,e=t.length-1;3<t.length&&0<=e;--e)n(E(t,e-1),E(t,e),E(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},p=function(t,s){for(var i=t.length-1;1<=i;--i)for(var e=t[i],h=i-1;0<=h;--h)g(e,t[h],s)&&t.splice(i,1)},m=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},g=function(t,s,i){return m(t[0],s[0],i)&&m(t[1],s[1],i)};a,h,o,x,v,C,I,n,G,E,r,_,u,N,l,D,c,f,d,A,L,m,g,O=[],R=[],P=[],k=[],self.Gs={Es:s,_s:L,Ns:i,Ds:e,As:p,Ls:t}}{let t=!1,s=!1,i="dev",e=Symbol("Construct internal API token"),h=14,n=self.Os=class{constructor(){throw TypeError("static class can't be instantiated")}static Rs(){if(h<=0)throw new Error("cannot obtain internal API token");return--h,e}static Ps(){t=!0}static ks(){return t}static Fs(){s=!0}static js(){return s}static zs(t){i=t}static Bs(){return i}static Us(){return"final"===i}};n.isDebug=!1,n.Ws=!1,n.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Qs={}}{const s=self.Os;s.Js=class{constructor(t){this.Vs=t,this.Ys=new Map,this.Hs()}Hs(){let t=this.Vs,s=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const i of s)this.qs(i)}qs(t){if(t)if(t.includes("=")){const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Ys.set(i,e)}else this.Ys.set(t,null)}Zs(){for(const t of this.Ys)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}Xs(t){return this.Ys.has(t)}Ks(t){const s=this.Ys.get(t);return void 0===s?null:s}$s(){history.replaceState("",document.title,location.pathname+location.search)}ti(t){this.Vs=t,this.Ys.clear(),this.Hs()}},s.si=new s.Js(location.search),s.ii=new s.Js(location.hash),s.si.Xs("perf")&&(s.ei=!0),"dev"!==s.si.Ks("mode")&&s.zs("final")}{let e=function(t){const s=parseFloat(t),i=B.get(s);return i||(13<=s?"11":"NT "+t)};e;const a=self.Os,z="(unknown)",B=(a.hi={ni:z,ri:z,oi:z,ai:z,li:NaN,ci:z,fi:"browser",di:!0,mi:!1,gi:!1,yi:!1,Mi:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),U=navigator.userAgent,W=navigator.userAgentData;if(W&&0<W.brands.length){let s=function(t){let s="",i="",e="",h="";for(const n of t){const r=Q.get(n.brand),o=(!s&&r&&(s=r,i=n.version),J.get(n.brand));!e&&o&&(e=o,h=n.version)}s||"Chromium"!==e||(a.hi.oi="Chromium",a.hi.ai=h),a.hi.oi=s||z,a.hi.ai=i||z,a.hi.ci=e||z};s,a.hi.ni=W.platform,a.hi.mi=W.mobile,a.hi.di=!a.hi.mi;const Q=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),J=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);s(W.brands);let i=!1;a.hi.Mi=async()=>{if(!i)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);s(t.fullVersionList),"Windows"===a.hi.ni?a.hi.ri=e(t.platformVersion):a.hi.ri=t.platformVersion,i=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let t=function(t,s){const i=Array.isArray(t)?t:[t];for(const e of i){const h=e.exec(U);if(h){s(h);break}}};t(/windows\s+nt\s+([\d\.]+)/i,t=>{a.hi.ni="Windows";const s=t[1];a.hi.ri=e(s)}),t(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{a.hi.ni="macOS",a.hi.ri=t[1].replace(/_/g,".")}),t(/CrOS/,()=>{a.hi.ni="Chrome OS"}),t(/linux|openbsd|freebsd|netbsd/i,()=>{a.hi.ni="Linux"}),t(/android/i,()=>{a.hi.ni="Android"}),t(/android\s+([\d\.]+)/i,t=>{a.hi.ni="Android",a.hi.ri=t[1]}),a.hi.ni===z&&(t(/(iphone|ipod|ipad)/i,t=>{a.hi.ni="iOS"}),t([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{a.hi.ni="iOS",a.hi.ri=t[1].replace(/_/g,".")}));const V=/chrome\//i.test(U),Y=/chromium\//i.test(U),H=/edg\//i.test(U),q=/OPR\//.test(U),Z=/nwjs/i.test(U),X=/safari\//i.test(U),K=/webkit/i.test(U),$=(H||q||t(/chrome\/([\d\.]+)/i,t=>{a.hi.oi="Chrome",a.hi.ai=t[1],a.hi.ci="Chromium"}),t(/edg\/([\d\.]+)/i,t=>{a.hi.oi="Edge",a.hi.ai=t[1],a.hi.ci="Chromium"}),t(/OPR\/([\d\.]+)/,t=>{a.hi.oi="Opera",a.hi.ai=t[1],a.hi.ci="Chromium"}),t(/chromium\/([\d\.]+)/i,t=>{a.hi.oi="Chromium",a.hi.ai=t[1],a.hi.ci="Chromium"}),t(/nwjs\/[0-9.]+/i,t=>{a.hi.oi="NW.js",a.hi.ai=t[1],a.hi.ci="Chromium",a.hi.fi="nwjs"}),t(/firefox\/([\d\.]+)/i,t=>{a.hi.oi="Firefox",a.hi.ai=t[1],a.hi.ci="Gecko"}),!X||V||Y||H||q||Z||(a.hi.oi="Safari",a.hi.ci="WebKit",t(/version\/([\d\.]+)/i,t=>{a.hi.ai=t[1]}),t(/crios\/([\d\.]+)/i,t=>{a.hi.oi="Chrome for iOS",a.hi.ai=t[1]}),t(/fxios\/([\d\.]+)/i,t=>{a.hi.oi="Firefox for iOS",a.hi.ai=t[1]}),t(/edgios\/([\d\.]+)/i,t=>{a.hi.oi="Edge for iOS",a.hi.ai=t[1]})),a.hi.ci===z&&K&&(a.hi.ci="WebKit"),"Android"===a.hi.ni&&"Safari"===a.hi.oi&&(a.hi.oi="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),tt=$.has(a.hi.ni)||"nwjs"===a.hi.fi;a.hi.di=tt,a.hi.mi=!tt}"Chrome"===a.hi.oi&&"browser"===a.hi.fi&&/wv\)/.test(U)&&(a.hi.fi="webview"),"nwjs"!==a.hi.fi&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(a.hi.fi="webapp"),a.hi.li=parseFloat(a.hi.ai);const i="macOS"===a.hi.ni&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;i&&(a.hi.ni="iOS",a.hi.ri=a.hi.ai,a.hi.di=!1,a.hi.mi=!0,a.hi.yi=!0),a.hi.gi="macOS"===a.hi.ni||"iOS"===a.hi.ni}{let r=function(i){return new Promise((t,s)=>{i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})},o=function(i){return new Promise((t,s)=>{i.oncomplete=()=>t(),i.onerror=()=>s(i.error),i.onabort=()=>s(i.error)})},t=function(t,s){return F(t,s)},s=function(t,s){return F(t,s,!0)},a=function(s){e(s);let t=et.get(s);return t instanceof Promise||(t=(async i=>{e(i);const t=indexedDB.open(i,st);return t.addEventListener("upgradeneeded",t=>{try{const s=t.target.result;s.createObjectStore(it)}catch(t){console.error("Failed to create objectstore for database "+i,t)}}),r(t)})(s),et.set(s,t),t.catch(t=>et.delete(s))),t},e=function(t){if("string"!=typeof t)throw new TypeError("expected string")},n=function(t,h){const s=t.objectStore(it).openCursor();return new Promise(i=>{const e=[];s.onsuccess=t=>{const s=t.target.result;if(s){switch(h){case"entries":e.push([s.key,s.value]);break;case"keys":e.push(s.key);break;case"values":e.push(s.value)}s.continue()}else i(e)}})};r,o,t,s,a,e,n;const st=2,it="keyvaluepairs",et=new Map,ht="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,nt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function F(s,i,e=!1,h=!0){const t=await a(s);try{const n=t.transaction([it],e?"readwrite":"readonly");return i(n)}catch(t){if(h&&"InvalidStateError"===t.name)return et.delete(s),F(s,i,e,!1);throw t}}class rt{constructor(t){e(t),this.name=t}async ready(){await a(this.name)}set(h,n){return e(h),s(this.name,async t=>{const s=t.objectStore(it).put(n,h),i=r(s),e=o(t);await Promise.all([e,i])})}get(n){return e(n),t(this.name,async t=>{const s=t.objectStore(it).get(n),i=r(s),e=o(t),[,h]=await Promise.all([e,i]);return h})}delete(h){return e(h),s(this.name,async t=>{const s=t.objectStore(it).delete(h),i=r(s),e=o(t);await Promise.all([e,i])})}clear(){return s(this.name,async t=>{const s=t.objectStore(it).clear(),i=r(s),e=o(t);await Promise.all([e,i])})}keys(){return t(this.name,async t=>{let s;if(nt){const h=t.objectStore(it).getAllKeys();s=r(h)}else s=n(t,"keys");const i=o(t),[,e]=await Promise.all([i,s]);return e})}values(){return t(this.name,async t=>{let s;if(ht){const h=t.objectStore(it).getAll();s=r(h)}else s=n(t,"values");const i=o(t),[,e]=await Promise.all([i,s]);return e})}entries(){return t(this.name,async t=>{const s=n(t,"entries"),i=o(t),[,e]=await Promise.all([i,s]);return e})}}self.wi=rt}{let i=function(t){throw new Error(`"${t}" is not implemented`)},e=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},h=function(e){return"object"==typeof e?new Promise(s=>{const{port1:t,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),t.postMessage(e)}):Promise.resolve(e)};i,e,h;const ot=self.wi,at=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];new WeakMap;class ut{constructor(t){this.Si=t,this.Ti=!this.Si,this.Ti||"undefined"!=typeof indexedDB||(this.Ti=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.bi=new Map}xi(t){if(!this.Ti)for(const s of at)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.Ti=!0;break}}async vi(t){const s=this.bi.get(t),i=await h(s);return void 0===i?null:i}async Ci(t,s){s=await h(s),this.bi.set(t,s)}Ii(t){this.bi.delete(t)}Gi(){this.bi.clear()}Ei(){return Array.from(this.bi.keys())}_i(){return this.Ti}Ni(){return this.bi}Di(t){this.bi=t}async getItem(s,t){if(e(t),this.Ti)return this.vi(s);let i;try{i=await this.Si.get(s)}catch(t){return this.xi(t),this.Ti?this.vi(s):(console.error(`Error reading '${s}' from storage, returning null: `,t),null)}return void 0===i?null:i}async setItem(s,i,t){if(e(t),void 0===i&&(i=null),this.Ti)await this.Ci(s,i);else try{await this.Si.set(s,i)}catch(t){if(this.xi(t),!this.Ti)throw t;await this.Ci(s,i)}}async removeItem(s,t){if(e(t),this.Ti)this.Ii(s);else try{await this.Si.delete(s)}catch(t){this.xi(t),this.Ti?this.Ii(s):console.error(`Error removing '${s}' from storage: `,t)}}async clear(t){if(e(t),this.Ti)this.Gi();else try{await this.Si.clear()}catch(t){this.xi(t),this.Ti?this.Gi():console.error("Error clearing storage: ",t)}}async keys(t){if(e(t),this.Ti)return this.Ei();let s=[];try{s=await this.Si.keys()}catch(t){if(this.xi(t),this.Ti)return this.Ei();console.error("Error getting storage keys: ",t)}return s}ready(t){return e(t),this.Ti?Promise.resolve(!0):this.Si.ready()}Ai(t){if(t.forceInMemoryFallback)return new ut(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new ot(s);return new ut(i)}}length(t){i("localforage.length()")}key(t,s){i("localforage.key()")}iterate(t,s){i("localforage.iterate()")}Li(t){i("localforage.setDriver()")}config(t){i("localforage.config()")}Oi(t){i("localforage.defineDriver()")}Ri(){i("localforage.driver()")}supports(t){i("localforage.supports()")}dropInstance(){i("localforage.dropInstance()")}}self.localforage=new ut(new ot("localforage"))}{const e=self.Os;if(e.Pi={},e.Pi.ki=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const s=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==s.reverse}catch(t){return!1}})(),e.Pi.Fi="undefined"!=typeof HTMLDialogElement,e.Pi.ji=!!self.requestIdleCallback,e.Pi.ImageBitmap=!!self.createImageBitmap,e.Pi.ImageBitmapOptions=!1,e.Pi.Bi=!1,e.Pi.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{e.Pi.ImageBitmapOptions=!0}).catch(()=>{e.Pi.ImageBitmapOptions=!1})}catch(t){e.Pi.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{e.Pi.Bi=10===t.width&&10===t.height}).catch(()=>{e.Pi.Bi=!1})}catch(t){e.Pi.Bi=!1}}if(e.Pi.Ui=!(!navigator.clipboard||!navigator.clipboard.readText),e.Pi.Wi=!(!navigator.permissions||!navigator.permissions.query),e.Pi.Qi=!1,e.Pi.Wi){const lt={name:"clipboard-read"};navigator.permissions.query(lt).then(()=>{e.Pi.Qi=!0}).catch(()=>{e.Pi.Qi=!1})}e.Pi.Ji=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),e.Pi.Vi="undefined"!=typeof Proxy,e.Pi.Yi=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),e.Pi.Hi="function"==typeof fetch,e.Pi.Zi=!!(self.isSecureContext&&"Opera"!==e.hi.oi&&navigator.storage&&navigator.storage.persist),e.Pi.Xi=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),e.Pi.Ki=(()=>{if("undefined"==typeof document)return!1;if("iOS"===e.hi.ni)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),e.Pi.ImageDecoder=void 0!==self.ImageDecoder,e.Pi.$i=!!self.VideoEncoder,e.Pi.te=!!self.showOpenFilePicker,e.Pi.ie=!!self.queryLocalFonts,e.Pi.UserActivation=!!navigator.userActivation,e.Pi.he=!1,(async()=>{let s;"undefined"==typeof document?s=new OffscreenCanvas(32,32):((s=document.createElement("canvas")).width=32,s.height=32);const t=s.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let i=null;try{s.convertToBlob?i=await s.convertToBlob({type:"image/webp",quality:1}):s.toBlob&&(i=await new Promise(t=>s.toBlob(t,"image/webp",1))),e.Pi.he=i&&"image/webp"===i.type}catch(t){e.Pi.he=!1}})()}{let e=function(t,i){return t.reduce((t,s)=>(0<i&&Array.isArray(s)?Array.prototype.push.apply(t,e(s,i-1)):t.push(s),t),[])};e;const ct=self.Os;if(!String.prototype.trimStart){const ft=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(ft,"")}}if(!String.prototype.trimEnd){const dt=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(dt,"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(ct.ne(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),Array.prototype.flat||(Array.prototype.flat=function(t=1){return e(this,t)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((i,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,s)=>i({usage:t,quota:s}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let i=function(t){let s=pt.re(),i="Assertion failure: "+t+"\n\nStack trace:\n"+s;console.error(i)};i;const pt=self.Os;self.assert=function(t,s){t||i(s)}}{const h=self.Os,mt=self.Qs,gt=(h.oe=function(t){return"number"==typeof t},h.ae=function(t){return h.oe(t)&&isFinite(t)},h.ue=function(t){if(!h.oe(t))throw new TypeError("expected number")},h.le=function(t){h.fe(t)},h.de=function(t,s,i){if(!h.oe(t)||isNaN(t)||t<s||i<t)throw new RangeError("number outside of range")},h.pe=function(...s){for(let t of s);},h.me=function(t){if(!h.ae(t))throw new TypeError("expected finite number")},h.ge=function(t){h.fe(t)},h.ye=function(...s){for(let t of s);},h.Me=function(t){return"string"==typeof t},h.we=function(t){if(!h.Me(t))throw new TypeError("expected string")},h.Se=function(t){h.fe(t)},h.Te=function(...s){for(let t of s);},h.xe=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},h.ve=function(t){if(!h.xe(t))throw new TypeError("expected simple object")},h.Ce=function(t){if(!h.fe(t)&&!h.xe(t))throw new TypeError("expected simple object")},h.Ie=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},h.Ge=function(t){if(!h.Ie(t))throw new TypeError("expected object")},h.Ee=function(t){h.fe(t)},h._e=function(...s){for(let t of s);},h.Ne=function(t){return h.De(t,Blob)&&"string"==typeof t.name},h.Ae=function(t){if(!h.Ne(t))throw new TypeError("expected file")},h.Le=function(t){h.fe(t)},h.Oe=function(t){return Array.isArray(t)},h.Re=function(t){if(!h.Oe(t))throw new TypeError("expected array")},h.Pe=function(t){h.fe(t)},h.ke=function(...s){for(let t of s);},h.Fe=function(t){return!(!h.Oe(t)||t.length&&!h.Oe(t[0]))},h.je=function(s){if(!h.Fe(s))throw new TypeError("expected 2d array");for(let t of s)if(!h.Oe(t))throw new TypeError("expected 2d array")},h.Be=function(t){h.fe(t)},h.Ue=function(t){return"function"==typeof t},h.We=function(t,s){if(!h.Ue(t))throw new TypeError("expected function");if(!h.fe(s)&&t!==s)throw new TypeError("expected same function reference")},h.Qe=function(t){h.fe(t)},h.Je=function(...s){for(let t of s);},h.Ve=function(s,...i){if(!h.Ue(s))throw new TypeError("expected function");if(!i.length)throw new Error("missing comparison functions");for(let t of i)if(!h.fe(t)&&s===t)return;throw new TypeError("expected same function reference")},h.Ye=function(...s){if(!h.fe(s))for(let t of s);},h.He=function(t,s){return t instanceof s},h.qe=function(s,...i){for(let t of i)if(h.He(s,t))return!0;return!1},h.Ze=function(t,s){if(!h.He(t,s))throw new TypeError("unexpected type")},h.Xe=function(t,s){h.fe(t)},h.Ke=function(t,...s){for(let t of s);},h.$e=function(t,...s){if(!h.qe(t,...s))throw new TypeError("unexpected type")},h.th=function(t,...s){if(!h.fe(t)&&!h.qe(t,...s))throw new TypeError("unexpected type")},h.ih=function(s,i){for(let t of s)if(!h.He(t,i))return!1;return!0},h.eh=function(s){for(let t of s)if(!h.ae(t))return!1;return!0},h.hh=function(s,t){for(let t of s);},h.nh=function(s,t){if(!h.fe(s))for(let t of s);},h.rh=function(s,t){if(!h.fe(s))for(let t of s);},h.oh=function(s){for(let t of s);},h.ah=function(s){if(!h.fe(s))for(let t of s);},h.uh=function(t,s){return!(h.fe(t)||!h.Me(t.nodeName))&&(!s||h.lh(t.nodeName,s))},h.fh=function(t,s){if(h.fe(t)||!h.Me(t.nodeName))throw new TypeError("expected DOM node");if(s&&!h.lh(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},h.dh=function(t,s){h.fe(t)},h.ph=function(t,s){return!(h.fe(t)||!h.Me(t.tagName))&&(!s||h.lh(t.tagName,s))},h.mh=function(t,s){if(h.fe(t)||!h.Me(t.tagName))throw new TypeError("expected HTML element");if(s&&!h.lh(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},h.gh=function(t,s){h.fe(t)},h.yh=function(t){return h.ph(t,"img")||h.ph(t,"canvas")||h.ph(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},h.Mh=function(t){if(!h.yh(t))throw new TypeError("expected drawable")},h.wh=function(t){h.fe(t)},h.Sh=function(t){return t instanceof ImageData||h.yh(t)},h.Th=function(t){if(!h.Sh(t))throw new TypeError("expected drawable or image data")},h.bh=function(t){if(!h.fe(t)&&!h.Sh(t))throw new TypeError("expected drawable or image data")},h.xh=function(t){return"string"==typeof t||h.HtmlString&&t instanceof h.HtmlString||t instanceof h.Ch},h.Ih=function(t){if(!h.xh(t))throw new TypeError("expected string-like")},h.Gh=function(t){h.fe(t)},h.Eh=function(...s){for(let t of s);},h._h=function(){throw new Error("must be overridden")},h.Nh=function(){throw new Error("not yet implemented")},h.Dh=function(t,...s){let i=t;if(void 0===i)return!1;for(let t of s){if(void 0===i[t])return!1;i=i[t]}return!0},h.fe=function(t){return null==t},h.Ah=function(s){let i=s[0].constructor;for(let t of s)if(t.constructor!==i)return!1;return i},h.Lh=function(s,i){for(let t of s)if(!(t instanceof i))return!1;return!0},Object.getPrototypeOf(Uint8Array));h.Oh=function(t){return h.He(t,gt)},h.Rh=function(t){},h.Ph=function(t){h.kh(t,gt)},h.Fh=function(t,...s){if(!h.jh(t,...s))throw new TypeError("unexpected type")},h.jh=function(t,...s){for(const i of s)if(h.De(t,i))return!0;return!1},h.kh=function(t,s){if(!h.De(t,s))throw new TypeError("unexpected type")},h.De=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},mt.ue=h.ue,mt.le=h.le,mt.me=h.me,mt.ge=h.ge,mt.we=h.we,mt.Se=h.Se,mt.Ge=h.Ge,mt.Ee=h.Ee,mt.Re=h.Re,mt.Pe=h.Pe,mt.We=h.We,mt.Qe=h.Qe,mt.Ze=h.Ze,mt.Xe=h.Xe,mt.fe=h.fe}{let e=function(t,s){let i=p.getType(t),e=p.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},h=function(t){console.warn("[Defence] "+t+" @",p.re())},i=function(){if(f=-1,0<a.size||0<u.size){let t=new Set([...a.keys()].map(t=>p.zh(t))),s=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+s),a.clear(),u.clear()}},n=function(s){let i=new Set;for(let t in s)i.add(t);return i},r=function(t,s){let i=n(s),e=d.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);p.Bh(s,[...i]),s.length&&console.warn(`[Defence] '${p.zh(t)}' constructor creates inconsistent properties: `+s.join(", "))}else d.set(t,i)};e,h,i,n,r;const p=self.Os,yt=new Map;p.Uh=function(t,s){console.log("%c"+t,"font-weight: bold; color:"+s)},p.Wh=function(t,...s){yt.has(t)||yt.set(t,-1),-1===yt.get(t)&&yt.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...s),yt.set(t,-1)}))};let o,a=(p.Qh=function(t){performance.mark(t),(o=o||new Map).has(t)||o.set(t,{current:0,total:0,Jh:0,Vh:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.Jh.toPrecision(3)} :: calls => `+this.Vh}})},p.Yh=function(t){performance.measure("measure-"+t,t);const s=performance.getEntriesByName("measure-"+t)[0],i=o.get(t);i.current=s.duration,i.total+=i.current,i.Jh=i.total/i.Vh,console.log(i.toString()),i.Vh++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},p.re=function(){return(new Error).stack},p.Hh=function(){},p.cast=function(t,s){return t&&t instanceof s?t:null},p.zh=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":p.oe(t)?"<number>":p.Me(t)?"<string>":p.Oe(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":p.Ue(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},p.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},p.range=function*(s,i){if(!isFinite(Math.abs(s-i)))throw new Error("Invalid parameters");if(i<s)for(let t=s-1;t>=i;t--)yield t;else for(let t=s;t<i;t++)yield t},new Map),u=new Map,l=new WeakMap,c=new WeakMap;p.qh={};const Mt=new Set(["then","splice"]);p.qh.get=function(t,s){return s in t||"symbol"==typeof s||Mt.has(s)||h(`Accessed missing property '${s}' from defended object '${p.zh(t)}', returning undefined`),c.has(t)&&"symbol"!=typeof s&&!Mt.has(s)&&h(`Accessed property '${s}' on a released object '${p.zh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]},p.qh.set=function(t,s,i){return s in t||a.has(t)||h(`Set non-existent property '${s}' to '${i}' on defended object '${p.zh(t)}'`),e(t[s],i)||a.has(t)||h(`Set '${p.getType(t[s])}' property '${s}' to type '${p.getType(i)}' on defended object '${p.zh(t)}'`),c.has(t)&&h(`Set property '${s}' on a released object '${p.zh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]=i,!0},p.qh.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${p.zh(t)}'`)},p.qh.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${p.zh(t)}'`)},p.qh.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${p.zh(t)}'`)};let f=-1,d=(p.Zh=class{constructor(){if(p.Ws&&p.Pi.Vi){let t=Object.create(new.target.prototype),s=new Proxy(t,p.qh);return a.set(t,s),u.set(s,t),l.set(s,t),-1===f&&(f=requestAnimationFrame(i)),s}}},p.Xh=function(s){if(p.Ws&&p.Pi.Vi&&s instanceof p.Zh){if(u.has(s)){let t=u.get(s);u.delete(s),a.delete(t)}return s}return p.isDebug?Object.seal(s):s},p.Kh=function(t,...s){let i;try{i=new t(...s)}catch(t){throw u.clear(),a.clear(),t}return p.Ws&&r(t,i),p.Xh(i)},p.$h=function(t){let s=l.get(t);s&&c.set(s,p.re())},p.tn=function(t){let s=l.get(t);return!!s&&!!c.get(s)},new Map);p.sn=class{constructor(t){this.hn="",t&&this.start(t)}start(t){p.ei&&(this.hn=t,performance.mark(this.hn+"-Start"))}end(){p.ei&&(performance.mark(this.hn+"-End"),performance.measure(this.hn,this.hn+"-Start",this.hn+"-End"))}next(t){p.ei&&(this.end(),this.hn=t,performance.mark(this.hn+"-Start"))}}}{let i=function(t){return 0===t&&1/t<0};i;const y=self.Os,wt=2*Math.PI,St=Math.PI/180,Tt=180/Math.PI,bt=(y.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0==e)return i;if(t<s){const h=i-(s-t)%e;return h===i?0:h}return s+(t-s)%e},y.nn=function(t,s,i,e,h){const n=i-s;if(0==n&&0===e)return t;const r=h-e;return(t-s)*r/n+e},y.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},y.rn=function(t,s,i){return t<s?s:i<t?i:t},y.an=function(t){return(t%=wt)<0&&(t+=wt),t},y.un=function(t){return t*St},y.ln=function(t){return t*Tt},y.cn=function(t,s,i,e){return Math.hypot(i-t,e-s)},y.dn=function(t,s,i,e){const h=i-t,n=e-s;return h*h+n*n},y.pn=function(t,s,i,e){return Math.atan2(e-s,i-t)},y.mn=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),n=Math.cos(s),r=i*h+e*n;return 1<=r?0:r<=-1?Math.PI:Math.acos(r)},y.gn=function(t,s,i){let e=Math.sin(t),h=Math.cos(t),n=Math.sin(s),r=Math.cos(s);return Math.acos(e*n+h*r)>i?0<h*n-e*r?y.an(t+i):y.an(t-i):y.an(s)},y.yn=function(t,s){let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),n=Math.cos(s);return e*h-i*n<=0},y.Mn=function(t,s,i,e=0){let h=y.mn(t,s),n=wt*e;return y.yn(s,t)?y.an(t+(h+n)*i):y.an(t-(h+n)*i)},y.wn=function(t,s,i,e=0){const h=y.mn(t,s),n=wt*e;return y.yn(s,t)?y.an(t+(h+n)*i):y.an(t+(wt-h+n)*i)},y.Sn=function(t,s,i,e=0){const h=y.mn(t,s),n=wt*e;return y.yn(s,t)?y.an(t-(-wt+h-n)*i):y.an(t-(h+n)*i)},y.Tn=function(t,s){const i=y.mn(t,s);return y.yn(t,s)?y.an(s-i):y.an(s+i)},y.Lt=function(t,s,i){return t+i*(s-t)},y.bn=function(t,s,i){return t===s?0:(i-t)/(s-t)},y.xn=function(t,s,i,e,h){return y.Lt(e,h,y.bn(t,s,i))},y.vn=function(t,s,i,e){return y.Lt(y.Lt(t,s,e),y.Lt(s,i,e),e)},y.Cn=function(t,s,i,e,h){return y.Lt(y.vn(t,s,i,h),y.vn(s,i,e,h),h)},y.In=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},y.Gn=function(t){return 0<t&&0==(t-1&t)},y.En=function(s){--s;for(let t=1;t<32;t<<=1)s|=s>>t;return s+1},y._n=function(t,s){return Math.round(t*s)/s},y.Nn=function(t,s){return Math.floor(t*s)/s},y.Dn=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},y.An=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},y.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;0<=e&&"0"===i.charAt(e);--e);return 0<=e&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},y.Ln=function(t,s,i){return y.rn(t,0,255)|y.rn(s,0,255)<<8|y.rn(i,0,255)<<16},1024),xt=16384,vt=8191,Ct=(y.On=function(t,s,i,e){return t=y.rn(Math.floor(1024*t),-8192,vt),s=y.rn(Math.floor(1024*s),-8192,vt),i=y.rn(Math.floor(1024*i),-8192,vt),e=y.rn(Math.floor(1023*e),0,1023),t<0&&(t+=xt),s<0&&(s+=xt),i<0&&(i+=xt),-(t*xt*xt*bt+s*xt*bt+i*bt+e)},y.Rn=function(t,s,i){return y.On(t,s,i,1)},y.Pn=function(s){if(0<=s)return(255&s)/255;{let t=Math.floor(-s/(xt*xt*bt));return t>vt&&(t-=xt),t/1024}},y.kn=function(s){if(0<=s)return((65280&s)>>8)/255;{let t=Math.floor(-s%(xt*xt*bt)/(xt*bt));return t>vt&&(t-=xt),t/1024}},y.Fn=function(s){if(0<=s)return((16711680&s)>>16)/255;{let t=Math.floor(-s%(xt*bt)/bt);return t>vt&&(t-=xt),t/1024}},y.jn=function(t){if(i(t))return 0;if(0<=t)return 1;{const s=Math.floor(-t%bt);return s/1023}},y.zn=function(s,i){for(s=Math.floor(s),i=Math.floor(i);0!==i;){let t=i;i=s%i,s=t}return s},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]);y.Bn=function(i,e){if((i=Math.floor(i))===(e=Math.floor(e)))return[1,1];for(let s of Ct){let t=i/s[0]*s[1];if(Math.abs(e-t)<1)return s.slice(0);if(t=i/s[1]*s[0],Math.abs(e-t)<1)return[s[1],s[0]]}let t=y.zn(i,e);return[i/t,e/t]},y.Un=function(t,s,i,e,h,n,r,o){const a=Math.min(t,i),u=Math.max(t,i),l=Math.min(h,r),c=Math.max(h,r);if(u<l||c<a)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(n,o),m=Math.max(n,o);if(d<p||m<f)return!1;const g=h-t+r-i,y=n-s+o-e,M=i-t,w=e-s,S=r-h,T=o-n,b=Math.abs(w*S-T*M),x=S*y-T*g;if(Math.abs(x)>b)return!1;const v=M*y-w*g;return Math.abs(v)<=b},y.Wn=function(t,s,i,e,h,n,r,o,a,u,l,c){const f=Math.min(a,l),d=Math.max(a,l);if(n<f||d<h)return!1;const p=Math.min(u,c),m=Math.max(u,c);if(o<p||m<r)return!1;const g=a-t+l-i,y=u-s+c-e,M=i-t,w=e-s,S=l-a,T=c-u,b=Math.abs(w*S-T*M),x=S*y-T*g;if(Math.abs(x)>b)return!1;const v=M*y-w*g;return Math.abs(v)<=b},y.Qn=function(t,s,i,e,h){const n=Math.min(t,i),r=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),u=h.Jn(),l=h.Vn(),c=h.Yn(),f=h.Hn(),d=h.qn(),p=h.Zn(),m=h.Xn(),g=h.Kn();return y.Wn(t,s,i,e,n,r,o,a,u,l,c,f)||y.Wn(t,s,i,e,n,r,o,a,c,f,d,p)||y.Wn(t,s,i,e,n,r,o,a,d,p,m,g)||y.Wn(t,s,i,e,n,r,o,a,m,g,u,l)},y.$n=function(s,i,e,h,n){let r=Math.min(s,e),o=Math.max(s,e),a=Math.min(i,h),u=Math.max(i,h),l=0;for(let t=n.length-4;l<=t;l+=2)if(y.Wn(s,i,e,h,r,o,a,u,n[l],n[l+1],n[l+2],n[l+3]))return!0;return y.Wn(s,i,e,h,r,o,a,u,n[l],n[l+1],n[0],n[1])};y.tr=function(t,s,i,e,h,n,r,o){const a=i-t,u=e-s,l=r-h,c=o-n,f=a*c-u*l;if(0==f)return 2;const d=((s-e)*(r-t)+a*(o-s))/f;return 0<d&&d<1+1e-6?(c*(r-t)+(h-r)*(o-s))/f:2},y.ir=function(t,s,i,e,h,n,r,o,a){const u=(r-h)*a,l=(o-n)*a;return y.tr(t,s,i,e,h-u,n-l,r+u,o+l)},y.er=function(t,s,i,e,h,n,r,o){const a=h-i,u=n-e,l=r-i,c=o-e,f=t-i,d=s-e,p=a*a+u*u,m=a*l+u*c,g=a*f+u*d,y=l*l+c*c,M=l*f+c*d,w=1/(p*y-m*m),S=(y*g-m*M)*w,T=(p*M-m*g)*w;return 0<=S&&0<=T&&S+T<=1},y.hr=function(t,s,i,e,h,n,r,o){const a=h-i,u=n-e,l=r-i,c=o-e,f=t-i,d=s-e,p=a*a+u*u,m=a*l+u*c,g=l*l+c*c,y=f*a+d*u,M=f*l+d*c,w=p*g-m*m,S=(g*y-m*M)/w,T=(p*M-m*y)/w,b=1-S-T;return[b,S,T]},y.nr=function(t,s,i,e,h,n,r,o,a,u,l,c){return[t*e+s*r+i*u,t*h+s*o+i*l,t*n+s*a+i*c]}}{let u=self.Os,s=null,i="";if("undefined"!=typeof document){const It=(s=document).querySelector("base");(i=It&&It.hasAttribute("href")?It.getAttribute("href"):"")&&!(i=i.startsWith("/")?i.substr(1):i).endsWith("/")&&(i+="/")}u.rr=function(){return i},u.ur=function(){if(!s)return"";const t=s.location;return u.lr(t.origin+t.pathname)+i},u.lr=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},u.cr=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},u.dr=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},u.pr=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},u.mr=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},u.gr=function(t){return t.replace(/\\/g,"/")},u.yr=function(t,s){const i=t?u.dr(t).slice(1):"";return s===i},u.Mr=function(t,s){let i,e;return u.Ne(t)&&(i=u.mr(t.name)),u.Me(t)&&(i=u.mr(t)),u.Ne(s)&&(e=u.mr(s.name)),u.Me(s)&&(e=u.mr(s)),i===e},u.Sr=function(t){t=u.gr(t);let s=/^\w\:\//.exec(t),i=(s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),e="",h=t,n,r="";0<i&&(e=t.slice(0,i),h=t.slice(i));const o=(n=h).lastIndexOf("."),a=(0<o&&(r=h.slice(o),n=h.slice(0,-r.length)),s+e+h);return{dir:e,Tr:h,name:n,root:s,ext:r,br:a}},u.vr=function(i,e){return new Promise((t,s)=>{self.setTimeout(t,i,e)})},u.Cr=function(t){try{t()}catch(t){u.isDebug&&console.warn("Swallowed exception: ",t)}},u.Ir=function(){},u.lh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},u.Gr=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},u.Er=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},u._r=function(t,s){t.length=s},u.Nr=function(t){t&&0!==t.length&&u._r(t,0)},u.Dr=function(i){if(i){for(let s=0;s<i.length;s++){let t=i[s];u._r(t,0)}u._r(i,0)}},u.Ar=function(s,i,e){const h=s.length;if(!((i|=0)<=h))for(let t=h;t<i;++t)s.push(e)},u.Lr=function(t,s,i){const e=t.length;(s|=0)<e?u._r(t,s):e<s&&u.Ar(t,s,i)},u.Or=function(t,s){u.Nr(t),u.Bh(t,s)},u.Bh=function(i,e){if(e.length<1e4)i.push(...e);else for(let t=0,s=e.length;t<s;++t)i.push(e[t])},u.Rr=function(i,e){if(!((e=Math.floor(e))<0||e>=i.length)){let s=i.length-1;for(let t=e;t<s;++t)i[t]=i[t+1];u._r(i,s)}},u.Pr=function(t,s){let i=t.indexOf(s);0<=i&&t.splice(i,1)},u.kr=function(s,i){let e=s.length;if(i.length!==e)return!1;for(let t=0;t<e;++t)if(s[t]!==i[t])return!1;return!0},u.Fr=function(i,e){let h=[],n=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e(t)?h.push(t):(i[n]=t,++n)}return u._r(i,n),h},u.jr=function(i,e){let t=i.length,h=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e.has(t)||(i[h++]=t)}return u._r(i,h),t-h},u.zr=function(t,s){return t===Math.floor(t)&&0<=t&&t<s.length},u.Br=function(t,s){if(!u.zr(t,s))throw new RangeError("array index out of bounds")},u.Ur=function(t){return t.slice()},u.Wr=function(t,i){let e=[];for(let s of t)if(u.Ie(s)){let t=i(s);if(!t)throw new Error("missing clone");if(t.constructor!==s.constructor)throw new Error("object is not a clone");e.push(t)}else u.Oe(s)?e.push(u.Wr(s,i)):e.push(s);return e},u.Qr=function(s){let i=[];for(let t of s)i.push(t.slice());return i},u.Jr=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},u.Vr=function(t,s,i){const e=new Set;for(const h of t.values())s(h)&&(i?e.add(i(h)):e.add(h));return e},u.Yr=function(t,s){return t.union?t.union(s):new Set([...t,...s])},u.Hr=function(t,s){for(const i of s)t.add(i);return t},u.first=function(s){for(let t of s)return t;return null},u.xor=function(t,s){return!t!=!s},u.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}},u.qr=function(s){for(let t in s)if(s.hasOwnProperty(t))return!0;return!1},u.Zr=function(o,a){return o.length?new Promise((i,e)=>{let h=[],n=0,r=!1;for(let s=0,t=o.length;s<t;++s)h.push(void 0),o[s].then(t=>{r||(h[s]=t,++n===o.length?i(h):a(n,o.length))}).catch(t=>{r=!0,e(t)})}):Promise.resolve([])};let e=[],h=(u.Xr=function(t){e.push(t)},u.Kr=function(){let i=0;for(let s of e){let t=s();i+=t}return Math.floor(i)},1),n=new Map,r=new MessageChannel,o=(r.port2.onmessage=function(t){const s=t.data,i=n.get(s);n.delete(s),i&&i(performance.now())},u.$r=function(t){const s=h++;return n.set(s,t),r.port1.postMessage(s),s},u.io=function(t){n.delete(t)},u.eo=u.$r,u.ho=function(){return new Promise(t=>u.eo(t))},new Set);u.no=function(s){const i=self.requestAnimationFrame(async t=>{await u.ho(),o.has(i)&&(o.delete(i),s(t))});return o.add(i),i},u.ro=function(t){o.has(t)&&(self.cancelAnimationFrame(t),o.delete(t))}}{const n=self.Os;n.ao=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},n.uo=function(t){return!n.ao(t)},n.lo=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},n.co=function(t,s){return fetch(t,s).then(t=>(n.lo(t),t))},n.fo=function(t){return n.co(t).then(t=>t.text())},n.do=function(t){return n.co(t).then(t=>t.json())},n.po=function(t){return n.co(t).then(t=>t.blob())},n.mo=function(t){return n.co(t).then(t=>t.arrayBuffer())},n.yo=function(e){return new Promise((t,s)=>{const i=new Image;i.onload=()=>t(i),i.onerror=t=>s(t),i.src=e})},n.Mo=function(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsArrayBuffer(e)})},n.wo=function(e){return"function"==typeof e.text?e.text():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsText(e)})},n.So=function(t){return n.wo(t).then(t=>JSON.parse(t))},n.To=async function(t,s){let i=URL.createObjectURL(t);try{const e=await n.yo(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof e.decode&&await e.decode(),e}finally{i&&URL.revokeObjectURL(i)}},n.bo=function(t,s){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,s);{const i=document.createElement("canvas");return i.width=t,i.height=s,i}},n.xo=function(s,i,e){if("number"!=typeof e&&(e=1),i=i||"image/png",e=n.rn(e,0,1),s.convertToBlob)return s.convertToBlob({type:i,quality:e});if(s.toBlob)return new Promise(t=>s.toBlob(t,i,e));throw new Error("could not convert canvas to blob")},n.vo=function(t,s,i){const e=n.bo(t.width,t.height),h=e.getContext("2d");return h.drawImage(t,0,0),n.xo(e,s,i)},n.Co=function(t,s,i){if(n.Pi.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>n.vo(t,s,i));if(n.Pi.ImageBitmap)return createImageBitmap(t).then(t=>n.vo(t,s,i));{const e=n.bo(t.width,t.height),h=e.getContext("2d");return h.putImageData(t,0,0),n.xo(e,s,i)}},n.Io=function(t,s){t.clear();for(const i of s)t.add(i)},n.Go=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},n.Eo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},n._o=function s(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>s(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],s(t[1])])};{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}},n.No=function s(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>s(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],s(t[1])]));{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}}return t},n.Do=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const h of t)"-"===h?0<e&&(i=!0):i?(s+=h.toUpperCase(),i=!1):s+=h,++e;return s},n.Ao=function(t){return"object"==typeof t&&"function"==typeof t.next},n.Lo=function(s,i){const e=[];if("function"==typeof i)for(let t=0;t<s;++t)e.push(i());else for(let t=0;t<s;++t)e.push(i);return e}}{let e=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},u=function(t,s,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};e,u;const l=self.Os,Gt=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,Et=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;l.Oo=class{constructor(t,s,i,e){this.Ro=NaN,this.Po=NaN,this.ko=NaN,this.Fo=NaN,this.Ro=0,this.Po=0,this.ko=0,this.Fo=0,t instanceof l.Oo?this.set(t):this.jo(t||0,s||0,i||0,e||0)}zo(t,s,i){return this.Ro=+t,this.Po=+s,this.ko=+i,this.rn(),this}jo(t,s,i,e){return this.Ro=+t,this.Po=+s,this.ko=+i,this.Fo=+e,this.rn(),this}set(t){return this.Ro=t.Ro,this.Po=t.Po,this.ko=t.ko,this.Fo=t.Fo,this}C(t){return this.set(t)}add(t){this.Ro+=t.Ro,this.Po+=t.Po,this.ko+=t.ko,this.Fo+=t.Fo,this.rn()}Bo(t,s,i,e=0){this.Ro+=+t,this.Po+=+s,this.ko+=+i,this.Fo+=+e,this.rn()}Uo(t){this.Wo(Math.max(this.Ro,t.Ro)-Math.min(this.Ro,t.Ro)),this.Qo(Math.max(this.Po,t.Po)-Math.min(this.Po,t.Po)),this.Jo(Math.max(this.ko,t.ko)-Math.min(this.ko,t.ko)),this.Vo(Math.max(this.Fo,t.Fo)-Math.min(this.Fo,t.Fo)),this.rn()}Yo(t){this.Ro=t.Ro,this.Po=t.Po,this.ko=t.ko}Wo(t){this.Ro=l.rn(+t,0,1)}Ho(){return this.Ro}Qo(t){this.Po=l.rn(+t,0,1)}qo(){return this.Po}Jo(t){this.ko=l.rn(+t,0,1)}Zo(){return this.ko}Vo(t){this.Fo=l.rn(+t,0,1)}Xo(){return this.Fo}clone(){return l.Kh(l.Oo,this.Ro,this.Po,this.ko,this.Fo)}toArray(){return[this.Ro,this.Po,this.ko,this.Fo]}Ko(){return new Float64Array(this.toArray())}$o(t,s){t[s++]=this.Ro,t[s++]=this.Po,t[s++]=this.ko,t[s]=this.Fo}ta(t,s){t[s++]=this.Ro,t[s++]=this.Po,t[s]=this.ko}equals(t){return this.Ro===t.Ro&&this.Po===t.Po&&this.ko===t.ko&&this.Fo===t.Fo}ia(t){return this.Ro===t.Ro&&this.Po===t.Po&&this.ko===t.ko}ea(t,s,i){return this.Ro===t&&this.Po===s&&this.ko===i}na(t,s,i,e){return this.Ro===t&&this.Po===s&&this.ko===i&&this.Fo===e}ra(t,s){return t[s]===Math.fround(this.Ro)&&t[s+1]===Math.fround(this.Po)&&t[s+2]===Math.fround(this.ko)&&t[s+3]===Math.fround(this.Fo)}oa(t,s){return t[s]===Math.fround(this.Ro)&&t[s+1]===Math.fround(this.Po)&&t[s+2]===Math.fround(this.ko)}multiply(t){this.Ro*=t.Ro,this.Po*=t.Po,this.ko*=t.ko,this.Fo*=t.Fo}aa(t){this.Ro*=t,this.Po*=t,this.ko*=t,this.Fo*=t}ua(){return this.Ro*=this.Fo,this.Po*=this.Fo,this.ko*=this.Fo,this}la(){return this.Ro/=this.Fo,this.Po/=this.Fo,this.ko/=this.Fo,this}rn(){return this.Ro=l.rn(this.Ro,0,1),this.Po=l.rn(this.Po,0,1),this.ko=l.rn(this.ko,0,1),this.Fo=l.rn(this.Fo,0,1),this}ca(t){this.Ro=l.Pn(t),this.Po=l.kn(t),this.ko=l.Fn(t),this.Fo=l.jn(t)}fa(t,s,i){const e=l.ae(t)?t:this.Ho(),h=l.ae(s)?s:this.qo(),n=l.ae(i)?i:this.Zo();return`rgb(${100*e}%, ${100*h}%, ${100*n}%)`}da(t,s,i,e){const h=l.ae(t)?t:this.Ho(),n=l.ae(s)?s:this.qo(),r=l.ae(i)?i:this.Zo(),o=l.ae(e)?e:this.Xo();return`rgba(${100*h}%, ${100*n}%, ${100*r}%, ${o})`}pa(){const t=Math.round(255*this.Ho()),s=Math.round(255*this.qo()),i=Math.round(255*this.Zo());return"#"+e(t.toString(16))+e(s.toString(16))+e(i.toString(16))}ma(t){if("string"!=typeof t)return!1;let s,i,e;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Wo(s),isFinite(i)&&this.Qo(i),isFinite(e)&&this.Jo(e),this.Vo(1),!0}ga(){const t=Math.round(255*this.Ho()),s=Math.round(255*this.qo()),i=Math.round(255*this.Zo());return t+`, ${s}, `+i}ya(){const t=Math.round(255*this.Ho()),s=Math.round(255*this.qo()),i=Math.round(255*this.Zo());return[t,s,i]}Ma(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Wo(i),isFinite(e)&&this.Qo(e),isFinite(h)&&this.Jo(h),this.Vo(1),!0}wa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Wo(i),isFinite(e)&&this.Qo(e),isFinite(h)&&this.Jo(h),this.Vo(1),!0}Sa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255,n=parseFloat(s[3].trim());return isFinite(i)&&this.Wo(i),isFinite(e)&&this.Qo(e),isFinite(h)&&this.Jo(h),isFinite(n)&&this.Vo(n),!0}Ta(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100,n=parseFloat(s[3].trim());return isFinite(i)&&this.Wo(i),isFinite(e)&&this.Qo(e),isFinite(h)&&this.Jo(h),isFinite(n)&&this.Vo(n),!0}ba(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.wa(t):this.Ma(t);if(t.startsWith("rgba("))return t.includes("%")?this.Ta(t):this.Sa(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.xa(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.wa(t):4===s.length&&this.Ta(t):3===s.length?this.Ma(t):4===s.length&&this.Sa(t)}}return this.ma(t)}toJSON(){return[this.Ro,this.Po,this.ko,this.Fo]}Ca(t,s,i,e){let h,n,r;if(t%=360,s=l.rn(s,0,100),i=l.rn(i,0,100),e=l.rn(e,0,1),t/=360,i/=100,0==(s/=100))h=n=r=i;else{const o=i<.5?i*(1+s):i+s-i*s,a=2*i-o;h=u(a,o,t+1/3),n=u(a,o,t),r=u(a,o,t-1/3)}return this.Wo(h),this.Qo(n),this.Jo(r),this.Vo(e),this}xa(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=Gt.exec(s),e=Et.exec(s);return i&&4===i.length?(this.Ca(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.Ca(+i[1],+i[2],+i[3],+i[4]),0))}Ia(){const t=this.Ro,s=this.Po,i=this.ko,e=this.Fo,h=l.Oo.Ga(t,s,i),n=l.Oo.Ea(t,s,i),r=l.Oo._a(t,s,i);return`hsla(${h}, ${n}%, ${r}%, ${e})`}Na(){const t=this.Ro,s=this.Po,i=this.ko;return[l.Oo.Ga(t,s,i),l.Oo.Ea(t,s,i),l.Oo._a(t,s,i),this.Fo]}Da(t){!Array.isArray(t)||t.length<3||(this.Ro=t[0],this.Po=t[1],this.ko=t[2],this.Fo=4<=t.length?t[3]:1)}set r(t){this.Wo(t)}get r(){return this.Ho()}set Aa(t){this.Qo(t)}get Aa(){return this.qo()}set b(t){this.Jo(t)}get b(){return this.Zo()}set a(t){this.Vo(t)}get a(){return this.Xo()}La(t,s){switch(t){case 0:this.Wo(s);break;case 1:this.Qo(s);break;case 2:this.Jo(s);break;case 3:this.Vo(s);break;default:throw new RangeError("invalid color index")}}Oa(t){switch(t){case 0:return this.Ho();case 1:return this.qo();case 2:return this.Zo();case 3:return this.Xo();default:throw new RangeError("invalid color index")}}static Ra(t,s){let i,e;if(Array.isArray(t))(i=new l.Oo).Da(t);else{if(!(t instanceof l.Oo))throw new Error("unexpected type");i=t}if(Array.isArray(s))(e=new l.Oo).Da(s);else{if(!(s instanceof l.Oo))throw new Error("unexpected type");e=s}return i.equals(e)}static Pa(t,s){return l.rn(Math.max(t,s)-Math.min(t,s),0,1)}static ka(t,s){const i=new l.Oo;return i.Wo(Math.max(t.Ro,s.Ro)-Math.min(t.Ro,s.Ro)),i.Qo(Math.max(t.Po,s.Po)-Math.min(t.Po,s.Po)),i.Jo(Math.max(t.ko,s.ko)-Math.min(t.ko,s.ko)),i.Vo(Math.max(t.Fo,s.Fo)-Math.min(t.Fo,s.Fo)),i}static Fa(t,s){const i=new l.Oo(0,0,0,1);return i.Wo(Math.max(t.Ro,s.Ro)-Math.min(t.Ro,s.Ro)),i.Qo(Math.max(t.Po,s.Po)-Math.min(t.Po,s.Po)),i.Jo(Math.max(t.ko,s.ko)-Math.min(t.ko,s.ko)),i}static Ga(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;let n=0;switch(e){case t:n=(s-i)/(e-h)+(s<i?6:0);break;case s:n=(i-t)/(e-h)+2;break;case i:n=(t-s)/(e-h)+4}return Math.round(n/6*360)}static Ea(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;const n=(e+h)/2,r=e-h,o=.5<n?r/(2-e-h):r/(e+h);return Math.round(100*o)}static _a(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i),n=(e+h)/2;return e?Math.round(100*n):0}},l.Oo.ja=Object.freeze(l.Kh(l.Oo,1,1,1,1)),l.Oo.za=Object.freeze(l.Kh(l.Oo,0,0,0,1)),l.Oo.Ba=Object.freeze(l.Kh(l.Oo,0,0,0,0))}{const _t=self.Os;_t.Ua=class{constructor(t,s){this.Wa=0,this.Qa=0,t instanceof _t.Ua?this.C(t):this.set(t||0,s||0)}set(t,s){this.Wa=+t,this.Qa=+s}C(t){this.Wa=t.Wa,this.Qa=t.Qa}equals(t){return this.Wa===t.Wa&&this.Qa===t.Qa}Ja(t,s){return this.Wa===t&&this.Qa===s}ra(t,s){return t[s]===Math.fround(this.Wa)&&t[s+1]===Math.fround(this.Qa)}Va(t){this.Wa=+t}Ya(){return this.Wa}Ha(t){this.Qa=+t}qa(){return this.Qa}toArray(){return[this.Wa,this.Qa]}Ko(){return new Float64Array(this.toArray())}$o(t,s){t[s++]=this.Wa,t[s]=this.Qa}offset(t,s){this.Wa+=+t,this.Qa+=+s}scale(t,s){this.Wa*=t,this.Qa*=s}Ct(t,s){this.Wa/=t,this.Qa/=s}round(){this.Wa=Math.round(this.Wa),this.Qa=Math.round(this.Qa)}floor(){this.Wa=Math.floor(this.Wa),this.Qa=Math.floor(this.Qa)}ceil(){this.Wa=Math.ceil(this.Wa),this.Qa=Math.ceil(this.Qa)}angle(){return _t.pn(0,0,this.Wa,this.Qa)}Za(){return this.Wa*this.Wa+this.Qa*this.Qa}length(){return Math.hypot(this.Wa,this.Qa)}Xa(t,s){const i=this.Wa*s-this.Qa*t;this.Qa=this.Qa*s+this.Wa*t,this.Wa=i}rotate(t){0!==t&&this.Xa(Math.sin(t),Math.cos(t))}Ka(t,s,i){0===t||s===this.Wa&&i===this.Qa||(this.Wa-=s,this.Qa-=i,this.Xa(Math.sin(t),Math.cos(t)),this.Wa+=+s,this.Qa+=+i)}move(t,s){0!==s&&(this.Wa+=Math.cos(t)*s,this.Qa+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Wa/=t,this.Qa/=t)}rn(t,s){this.Wa=_t.rn(this.Wa,t,s),this.Qa=_t.rn(this.Qa,t,s)}Dt(t){return this.Wa*t.Wa+this.Qa*t.Qa}reverse(){this.Wa=-this.Wa,this.Qa=-this.Qa}$a(){let t=this.Wa;return this.Wa=this.Qa,this.Qa=-t,this}}}{const Nt=self.Os;Nt.Rect=class{constructor(t,s,i,e){this.tu=NaN,this.su=NaN,this.iu=NaN,this.eu=NaN,this.tu=0,this.su=0,this.iu=0,this.eu=0,t instanceof Nt.Rect?this.C(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.tu=+t,this.su=+s,this.iu=+i,this.eu=+e}hu(t,s,i,e){s=+s,this.tu=t=+t,this.su=s,this.iu=t+ +i,this.eu=s+ +e}C(t){this.tu=+t.tu,this.su=+t.su,this.iu=+t.iu,this.eu=+t.eu}clone(){return new Nt.Rect(this.tu,this.su,this.iu,this.eu)}static nu(t,s){const i=new Nt.Rect;return i.ru(Math.min(t.tu,s.tu)),i.ou(Math.min(t.su,s.su)),i.au(Math.max(t.iu,s.iu)),i.uu(Math.max(t.eu,s.eu)),i}static lu(t){return new Nt.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.tu===t.tu&&this.su===t.su&&this.iu===t.iu&&this.eu===t.eu}cu(t,s,i,e){return this.tu===t&&this.su===s&&this.width()===i&&this.height()===e}ra(t,s){return t[s]===Math.fround(this.tu)&&t[s+1]===Math.fround(this.su)&&t[s+2]===Math.fround(this.iu)&&t[s+3]===Math.fround(this.eu)}ru(t){this.tu=+t}fu(){return this.tu}ou(t){this.su=+t}du(){return this.su}au(t){this.iu=+t}pu(){return this.iu}uu(t){this.eu=+t}mu(){return this.eu}toArray(){return[this.tu,this.su,this.iu,this.eu]}Ko(){return new Float64Array(this.toArray())}gu(){return new DOMRect(this.tu,this.su,this.width(),this.height())}static yu(t){return Nt.Kh(Nt.Rect,t.left,t.top,t.right,t.bottom)}$o(t,s){t[s++]=this.tu,t[s++]=this.su,t[s++]=this.iu,t[s]=this.eu}Mu(t,s){t[s++]=this.tu,t[s++]=this.su,t[s++]=this.iu,t[s++]=this.su,t[s++]=this.iu,t[s++]=this.eu,t[s++]=this.tu,t[s]=this.eu}wu(t,s,i){t[s++]=this.tu,t[s++]=this.su,t[s++]=i,t[s++]=this.iu,t[s++]=this.su,t[s++]=i,t[s++]=this.iu,t[s++]=this.eu,t[s++]=i,t[s++]=this.tu,t[s++]=this.eu,t[s]=i}width(){return this.iu-this.tu}height(){return this.eu-this.su}Su(){return(this.tu+this.iu)/2}Tu(){return(this.su+this.eu)/2}offset(t,s){s=+s,this.tu+=t=+t,this.su+=s,this.iu+=t,this.eu+=s}offsetLeft(t){this.tu+=+t}offsetTop(t){this.su+=+t}bu(t){this.iu+=+t}xu(t){this.eu+=+t}vu(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.su<this.eu?this.tu<this.iu?this.eu=this.su+this.width():this.eu=this.su-this.width():this.tu<this.iu?this.eu=this.su-this.width():this.eu=this.su+this.width()}Cu(t,s){s=+s,this.tu-=t=+t,this.su-=s,this.iu+=t,this.eu+=s}Iu(t,s){s=+s,this.tu+=t=+t,this.su+=s,this.iu-=t,this.eu-=s}multiply(t,s){this.tu*=t,this.su*=s,this.iu*=t,this.eu*=s}Ct(t,s){this.tu/=t,this.su/=s,this.iu/=t,this.eu/=s}Gu(t){this.tu=+t-this.tu,this.iu=+t-this.iu}Eu(t){this.su=+t-this.su,this.eu=+t-this.eu}_u(t,s){const i=this.width(),e=this.height(),h=this.fu()+i*t,n=this.du()+e*s;this.hu(h-e*s,n-i*t,e,i)}Nu(){const t=this.tu;this.tu=this.iu,this.iu=t}Du(){const t=this.su;this.su=this.eu,this.eu=t}Au(t){const s=this.su;this.su=+t-this.eu,this.eu=+t-s}round(){this.tu=Math.round(this.tu),this.su=Math.round(this.su),this.iu=Math.round(this.iu),this.eu=Math.round(this.eu)}Lu(){this.tu=Math.ceil(this.tu),this.su=Math.ceil(this.su),this.iu=Math.floor(this.iu),this.eu=Math.floor(this.eu)}Ou(){this.tu=Math.floor(this.tu),this.su=Math.floor(this.su),this.iu=Math.ceil(this.iu),this.eu=Math.ceil(this.eu)}floor(){this.tu=Math.floor(this.tu),this.su=Math.floor(this.su),this.iu=Math.floor(this.iu),this.eu=Math.floor(this.eu)}ceil(){this.tu=Math.ceil(this.tu),this.su=Math.ceil(this.su),this.iu=Math.ceil(this.iu),this.eu=Math.ceil(this.eu)}rn(t,s,i,e){this.tu=Math.max(this.tu,+t),this.su=Math.max(this.su,+s),this.iu=Math.min(this.iu,+i),this.eu=Math.min(this.eu,+e)}Ru(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.tu=Nt.rn(this.tu,t,i),this.su=Nt.rn(this.su,s,e),this.iu=Nt.rn(this.iu,t,i),this.eu=Nt.rn(this.eu,s,e)}normalize(){this.tu>this.iu&&this.Nu(),this.su>this.eu&&this.Du()}Pu(t){return!(t.iu<this.tu||t.eu<this.su||t.tu>this.iu||t.su>this.eu)}ku(t,s,i){return!(t.iu+s<this.tu||t.eu+i<this.su||t.tu+s>this.iu||t.su+i>this.eu)}Fu(t,s){return t>=this.tu&&t<=this.iu&&s>=this.su&&s<=this.eu}ju(t){return t.tu>=this.tu&&t.su>=this.su&&t.iu<=this.iu&&t.eu<=this.eu}zu(t){t.tu<this.tu&&(this.tu=+t.tu),t.su<this.su&&(this.su=+t.su),t.iu>this.iu&&(this.iu=+t.iu),t.eu>this.eu&&(this.eu=+t.eu)}Bu(t){this.tu=Nt.Lt(t.tu,t.iu,this.tu),this.su=Nt.Lt(t.su,t.eu,this.su),this.iu=Nt.Lt(t.tu,t.iu,this.iu),this.eu=Nt.Lt(t.su,t.eu,this.eu)}}}{const Dt=self.Os;Dt.Uu=class{constructor(t,s,i,e,h,n,r,o){this.Wu=NaN,this.Qu=NaN,this.Ju=NaN,this.Vu=NaN,this.Yu=NaN,this.Hu=NaN,this.qu=NaN,this.Zu=NaN,this.Wu=0,this.Qu=0,this.Ju=0,this.Vu=0,this.Yu=0,this.Hu=0,this.qu=0,this.Zu=0,t instanceof Dt.Uu?this.C(t):this.set(t||0,s||0,i||0,e||0,h||0,n||0,r||0,o||0)}set(t,s,i,e,h,n,r,o){this.Wu=+t,this.Qu=+s,this.Ju=+i,this.Vu=+e,this.Yu=+h,this.Hu=+n,this.qu=+r,this.Zu=+o}Xu(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}C(t){this.Wu=t.Wu,this.Qu=t.Qu,this.Ju=t.Ju,this.Vu=t.Vu,this.Yu=t.Yu,this.Hu=t.Hu,this.qu=t.qu,this.Zu=t.Zu}equals(t){return this.Wu===t.Wu&&this.Qu===t.Qu&&this.Ju===t.Ju&&this.Vu===t.Vu&&this.Yu===t.Yu&&this.Hu===t.Hu&&this.qu===t.qu&&this.Zu===t.Zu}Ku(t){this.Wu=+t}Jn(){return this.Wu}$u(t){this.Qu=+t}Vn(){return this.Qu}tl(t){this.Ju=+t}Yn(){return this.Ju}sl(t){this.Vu=+t}Hn(){return this.Vu}il(t){this.Yu=+t}qn(){return this.Yu}el(t){this.Hu=+t}Zn(){return this.Hu}hl(t){this.qu=+t}Xn(){return this.qu}nl(t){this.Zu=+t}Kn(){return this.Zu}rl(){return new DOMQuad(new DOMPoint(this.Wu,this.Qu),new DOMPoint(this.Ju,this.Vu),new DOMPoint(this.Yu,this.Hu),new DOMPoint(this.qu,this.Zu))}static ol(t){return Dt.Kh(Dt.Uu,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Wu,this.Qu,this.Ju,this.Vu,this.Yu,this.Hu,this.qu,this.Zu]}Ko(){return new Float64Array(this.toArray())}$o(t,s){t[s++]=this.Wu,t[s++]=this.Qu,t[s++]=this.Ju,t[s++]=this.Vu,t[s++]=this.Yu,t[s++]=this.Hu,t[s++]=this.qu,t[s]=this.Zu}al(t,s,i){t[s++]=this.Wu,t[s++]=this.Qu,t[s++]=i,t[s++]=this.Ju,t[s++]=this.Vu,t[s++]=i,t[s++]=this.Yu,t[s++]=this.Hu,t[s++]=i,t[s++]=this.qu,t[s++]=this.Zu,t[s]=i}offset(t,s){s=+s,this.Wu+=t=+t,this.Qu+=s,this.Ju+=t,this.Vu+=s,this.Yu+=t,this.Hu+=s,this.qu+=t,this.Zu+=s}round(){this.Wu=Math.round(this.Wu),this.Qu=Math.round(this.Qu),this.Ju=Math.round(this.Ju),this.Vu=Math.round(this.Vu),this.Yu=Math.round(this.Yu),this.Hu=Math.round(this.Hu),this.qu=Math.round(this.qu),this.Zu=Math.round(this.Zu)}floor(){this.Wu=Math.floor(this.Wu),this.Qu=Math.floor(this.Qu),this.Ju=Math.floor(this.Ju),this.Vu=Math.floor(this.Vu),this.Yu=Math.floor(this.Yu),this.Hu=Math.floor(this.Hu),this.qu=Math.floor(this.qu),this.Zu=Math.floor(this.Zu)}ceil(){this.Wu=Math.ceil(this.Wu),this.Qu=Math.ceil(this.Qu),this.Ju=Math.ceil(this.Ju),this.Vu=Math.ceil(this.Vu),this.Yu=Math.ceil(this.Yu),this.Hu=Math.ceil(this.Hu),this.qu=Math.ceil(this.qu),this.Zu=Math.ceil(this.Zu)}ul(t){this.Wu=t.tu,this.Qu=t.su,this.Ju=t.iu,this.Vu=t.su,this.Yu=t.iu,this.Hu=t.eu,this.qu=t.tu,this.Zu=t.eu}ll(t,s){0===s?this.ul(t):this.cl(t,Math.sin(s),Math.cos(s))}cl(t,s,i){const e=t.tu*s,h=t.su*s,n=t.iu*s,r=t.eu*s,o=t.tu*i,a=t.su*i,u=t.iu*i,l=t.eu*i;this.Wu=o-h,this.Qu=a+e,this.Ju=u-h,this.Vu=a+n,this.Yu=u-r,this.Hu=l+n,this.qu=o-r,this.Zu=l+e}fl(t){t.set(Math.min(this.Wu,this.Ju,this.Yu,this.qu),Math.min(this.Qu,this.Vu,this.Hu,this.Zu),Math.max(this.Wu,this.Ju,this.Yu,this.qu),Math.max(this.Qu,this.Vu,this.Hu,this.Zu))}Fu(t,s){let i=this.Ju-this.Wu,e=this.Vu-this.Qu,h=this.Yu-this.Wu,n=this.Hu-this.Qu,r=t-this.Wu,o=s-this.Qu,a=i*i+e*e,u=i*h+e*n,l=i*r+e*o,c=h*h+n*n,f=h*r+n*o,d=1/(a*c-u*u),p=(c*l-u*f)*d,m=(a*f-u*l)*d;return 0<=p&&0<m&&p+m<1||(m=((a=(i=this.qu-this.Wu)*i+(e=this.Zu-this.Qu)*e)*f-(u=i*h+e*n)*(l=i*r+e*o))*(d=1/(a*c-u*u)),0<=(p=(c*l-u*f)*d)&&0<m&&p+m<1)}Su(){return(this.Wu+this.Ju+this.Yu+this.qu)/4}Tu(){return(this.Qu+this.Vu+this.Hu+this.Zu)/4}dl(t,s,i,e){return!(!this.Fu(t,s)&&!this.Fu(i,e))||Dt.Qn(t,s,i,e,this)}pl(t){let s=t.Su(),i=t.Tu();if(this.Fu(s,i))return!0;if(s=this.Su(),i=this.Tu(),t.Fu(s,i))return!0;const e=this.Wu,h=this.Qu,n=this.Ju,r=this.Vu,o=this.Yu,a=this.Hu,u=this.qu,l=this.Zu;return Dt.Qn(e,h,n,r,t)||Dt.Qn(n,r,o,a,t)||Dt.Qn(o,a,u,l,t)||Dt.Qn(u,l,e,h,t)}ml(){const t=this.Wu,s=this.Qu;this.Wu=this.Ju,this.Qu=this.Vu,this.Ju=this.Yu,this.Vu=this.Hu,this.Yu=this.qu,this.Hu=this.Zu,this.qu=t,this.Zu=s}gl(){this.yl(0,2),this.yl(1,3),this.yl(6,4),this.yl(7,5)}Ml(){this.yl(0,6),this.yl(1,7),this.yl(2,4),this.yl(3,5)}wl(){this.yl(2,6),this.yl(3,7)}yl(t,s){const i=this.Sl(t);this.Tl(t,this.Sl(s)),this.Tl(s,i)}Sl(t){switch(t){case 0:return this.Wu;case 1:return this.Qu;case 2:return this.Ju;case 3:return this.Vu;case 4:return this.Yu;case 5:return this.Hu;case 6:return this.qu;case 7:return this.Zu;default:throw new RangeError("invalid quad point index")}}Tl(t,s){switch(s=+s,t){case 0:this.Wu=s;break;case 1:this.Qu=s;break;case 2:this.Ju=s;break;case 3:this.Vu=s;break;case 4:this.Yu=s;break;case 5:this.Hu=s;break;case 6:this.qu=s;break;case 7:this.Zu=s;break;default:throw new RangeError("invalid quad point index")}}}}{const At=self.Os,Lt=[0,0,1,0,1,1,0,1],Ot=At.Kh(At.Uu);At.bl=class extends At.Zh{constructor(t,s=!0){super(),t=t||Lt,this.xl=Float64Array.from(t),this.vl=new At.Rect,this.Cl=!0,this.Il=s}$h(){}Gl(){return this.xl}El(){return this.xl.length/2}_l(t){this.xl.length===t.length?this.xl.set(t):this.xl=Float64Array.from(t),this.Cl=!0}Nl(){this._l(Lt)}C(t){this._l(t.xl)}Dl(){this.Cl=!0}Al(){if(this.Cl){let i=this.xl,e=i[0],h=i[1],n=e,r=h;for(let t=0,s=i.length;t<s;t+=2){const o=i[t],a=i[t+1];o<e&&(e=o),o>n&&(n=o),a<h&&(h=a),a>r&&(r=a)}this.vl.set(e,h,n,r),this.Cl=!1}}ul(t,s,i){let e=this.xl;8!==e.length&&(e=new Float64Array(8),this.xl=e),e[0]=t.fu()-s,e[1]=t.du()-i,e[2]=t.pu()-s,e[3]=t.du()-i,e[4]=t.pu()-s,e[5]=t.mu()-i,e[6]=t.fu()-s,e[7]=t.mu()-i,this.vl.C(t),0===s&&0===i||this.vl.offset(-s,-i),this.Cl=!1}Ll(t,s,i){Ot.C(t),Ot.offset(s,i),this._l(Ot.toArray()),this.Cl=!0}transform(t,s,i){let e=0,h=1;0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.Ol(t,s,e,h)}Ol(i,e,h,n){const r=this.xl;for(let t=0,s=r.length;t<s;t+=2){const o=t+1,a=r[t]*i,u=r[o]*e;r[t]=a*n-u*h,r[o]=u*n+a*h}this.Cl=!0}offset(i,e){const h=this.xl;for(let t=0,s=h.length;t<s;t+=2)h[t]+=i,h[t+1]+=e}Fu(i,e){const h=this.xl;if(i===h[0]&&e===h[1])return!0;this.Al();let t=this.vl,n=t.fu()-110,r=t.du()-101,o=t.pu()+131,a=t.mu()+120,u=0,l=0,c,f,d=0,p=0,m,g,y=(c=n<i?(u=n,i):(u=i,n),f=r<e?(l=r,e):(l=e,r),m=o<i?(d=o,i):(d=i,o),g=a<e?(p=a,e):(p=e,a),0),M=0;for(let t=0,s=h.length;t<s;t+=2){const w=(t+2)%s,S=h[t],T=h[t+1],b=h[w],x=h[1+w];At.Wn(n,r,i,e,u,c,l,f,S,T,b,x)&&++y,At.Wn(o,a,i,e,d,m,p,g,S,T,b,x)&&++M}return y%2==1||M%2==1}Rl(t,c,f){const d=t.xl,p=this.xl;if(this.Fu(d[0]+c,d[1]+f))return!0;if(t.Fu(p[0]-c,p[1]-f))return!0;for(let s=0,l=p.length;s<l;s+=2){let t=(s+2)%l,i=p[s],e=p[s+1],h=p[t],n=p[1+t],r=0,o=0,a,u;a=i<h?(r=i,h):(r=h,i),u=e<n?(o=e,n):(o=n,e);for(let t=0,s=d.length;t<s;t+=2){const m=(t+2)%s,g=d[t]+c,y=d[t+1]+f,M=d[m]+c,w=d[1+m]+f;if(At.Wn(i,e,h,n,r,a,o,u,g,y,M,w))return!0}}return!1}dl(i,e,h,n,r,o){if(this.Fu(h-i,n-e))return!0;if(this.Fu(r-i,o-e))return!0;let a=0,u=0,l,c;l=h<r?(a=h,r):(a=r,h),c=n<o?(u=n,o):(u=o,n);const f=this.xl;for(let t=0,s=f.length;t<s;t+=2){const d=(t+2)%s,p=f[t]+i,m=f[t+1]+e,g=f[d]+i,y=f[1+d]+e;if(At.Wn(h,n,r,o,a,l,u,c,p,m,g,y))return!0}return!1}gl(i){const e=this.xl;for(let t=0,s=e.length;t<s;t+=2)e[t]=2*i-e[t];this.Cl=!0}Ml(i){const e=this.xl;for(let t=0,s=e.length;t<s;t+=2){const h=t+1;e[h]=2*i-e[h]}this.Cl=!0}wl(){const i=this.xl;for(let t=0,s=i.length;t<s;t+=2){const e=t+1,h=i[t];i[t]=i[e],i[e]=h}this.Cl=!0}Pl(){let i=this.xl,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t];return e/this.El()}kl(){let i=this.xl,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t+1];return e/this.El()}Fl(){return this.xl}jl(){return this.El()}zl(){return this.Il}}}{const Rt=self.Os;Rt.Bl=class extends Rt.Zh{constructor(t){if(super(),this.Ul=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}$h(){this.Wl(),this.Ul=null}Ql(){return 0===this.Ul.size}Wl(){const t=this.Ul;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){let e=this.Ul,h=e.get(t);h||(h=new Map,e.set(t,h)),h.set(s,i)}Ks(t,s){const i=this.Ul.get(t);return i&&i.get(s)}Xs(t,s){const i=this.Ul.get(t);return!!i&&i.has(s)}Jl(t,s){const i=this.Ul,e=i.get(t);if(!e)return!1;const h=e.delete(s);return h&&0===e.size&&i.delete(t),h}Vl(t){const s=this.Ul,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[e,h]of s.entries())h.delete(t)&&0===h.size&&s.delete(e)}Yl(){let t=0;for(const s of this.Ul.values())t+=s.size;return t}*values(){for(const t of this.Ul.values())yield*t.values()}*Hl(){for(const[t,s]of this.Ul.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.Ul.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const Pt=self.Os;Pt.ql=class extends Pt.Zh{constructor(){super(),this.Zl=new Set,this.Xl=[],this.Kl=!1}$h(){this.Wl()}Wl(){this.Zl.clear(),Pt.Nr(this.Xl),this.Kl=!1}$l(t){this.Zl.has(t)||(this.Zl.add(t),this.Kl)||this.Xl.push(t)}Xs(t){return this.Zl.has(t)}Jl(t){this.Zl.delete(t)&&(this.Kl=!0)}Yl(){return this.Zl.size}Ql(){return 0===this.Zl.size}tc(){return this.Kl&&(this.sc(),this.Kl=!1),this.Xl}sc(){const t=this.Xl;Pt.Nr(t);for(const s of this.Zl)t.push(s)}}}{const kt=self.Os,Ft=new Map,jt=new Map,zt=new Map,Bt=new Map,Ut=new Map,Wt=new Map,Qt=new Map,Jt=new Map,Vt=new Map,Yt=(Vt.set("linear","noease"),Vt.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),Ht=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],qt=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),Zt=(self.ic=class hs{constructor(){}static ec(){return"default"}static hc(){return"noease"}static nc(t){return qt.get(t)}static rc(s,...i){this.oc();let t,e=(s?(zt.has(s)||zt.set(s,new Map),[...(t=zt.get(s)).keys()].filter(t=>!hs.ac(t,s)||hs.ac(t,s).transition.IsForAnyPurpose())):[...(t=Ut).keys()]).sort();return[...jt.keys()].concat(e).filter(t=>!i.includes(t))}static uc(){this.oc();const t=[...Ut.keys()];return t.sort(),[...jt.keys()].concat(t)}static lc(){this.oc();const t=[...Ut.keys()];return t.sort(),t}static cc(t){for(const s of Yt){const i=self.lang("ui.bars.timeline.eases."+s);if(i===t)return!0}for(const e of Ht){const h=self.lang("ui.bars.timeline.short-eases."+e);if(h===t)return!0}}static fc(t){return this.oc(),[...jt.keys()].includes(t)}static dc(t){const s=Vt.get(t);return s?Ft.get(s):hs.fc(t)?Ft.get(t):Qt.has(t)?Qt.get(t):void 0}static mc(t){return this.oc(),Jt.get(t)}static yc(t,s){this.oc();const i=hs.dc(t);if(i)return i;if(s)return zt.get(s).get(t);throw new Error("missing ease function")}static ac(t,s){this.oc();const i=Bt.get(s);if(i)return i.get(t)}static Mc(t,s){this.oc();const i=hs.dc(t);return!!i||!!zt.get(s).get(t)}static wc(t){this.oc();const s=hs.dc(t);return s||Ut.get(t)}static Sc(t){return this.oc(),Wt.get(t)}static Tc(t){this.oc();const s=this.uc();return s[t]}static xc(t,s){this.oc();const i=this.rc(s);return i.indexOf(t)}static vc(t){return this.xc(t)}static oc(){0===Ft.size&&(this.Cc("default",()=>{}),this.Cc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.Cc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.Cc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.Cc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.Cc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.Cc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.Cc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.Cc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.Cc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.Cc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.Cc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.Cc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.Cc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.Cc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.Cc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.Cc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.Cc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.Cc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.Cc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Cc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.Cc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.Cc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.Cc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.Cc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.Cc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Cc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.Cc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Cc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.Cc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.Cc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.Cc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Ic("cubicbezier",this.Gc),this.Ic("spline",this.Ec))}static Cc(t,s,i=!1){if("function"==typeof s)hs._c(t,s,"predefined");else{if(!kt.Oe(s))throw new Error("unexpected arguments");if(self.BuiltInTransition){const h=kt.Kh(self.BuiltInTransition,t,i);h.SetFromJson(s),hs._c(t,(t,s,i,e)=>h.Nc(t,s,i,e),"predefined"),Jt.set(t,h)}else{const n=kt.Kh(kt.Dc,[t,s.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);n.Ac(i),hs._c(t,(t,s,i,e)=>n.Nc(t,s,i,e),"predefined")}}}static Ic(t,s){hs._c(t,s,"private")}static Lc(t,s,i,e){this.oc(),hs._c(t,s,"custom",i,e)}static Oc(t,s){if(!this.fc(t)&&![...Qt.keys()].includes(t)){const i=zt.get(s),e=(i&&i.delete(t),Bt.get(s));e&&e.delete(t)}}static _c(t,s,i,e,h){switch(i){case"predefined":Ft.set(t,s),jt.set(t,s);break;case"custom":if(e){zt.has(e)||zt.set(e,new Map),Bt.has(e)||Bt.set(e,new Map);const n=zt.get(e),r=(n.set(t,s),Bt.get(e));r.set(t,h)}else Ut.set(t,s),Wt.set(t,h);break;case"private":Ft.set(t,s),Qt.set(t,s);break;default:throw new Error("unexpected ease mode")}}static Rc(t,s,i,e){return 0===e?s:i*t/e+s}static Gc(t,s,i,e,h){const n=s,r=3*t*(i-s),o=3*t**2*(s+e-2*i),a=t**3*(h-s+3*i-3*e);return n+r+o+a}static Ec(t,s,i,e,h,n,r,o,a,u){if(e===h&&n===r)return t;const l=es(t,s,e,n,o,u),c=Kt(i,h,r,a),f=$t(i,h,r,a),d=ts(i,h,r,a);return ss(l,c,f,d)}static Pc(t,s,i,e){const h=[],n=Kt(t,s,i,e),r=$t(t,s,i,e),o=ts(t,s,i,e);for(let t=0;t<Zt;++t){const a=ss(t*Xt,n,r,o);h.push(a)}return h}},11),Xt=1/(Zt-1),Kt=(t,s,i,e)=>e-3*i+3*s-t,$t=(t,s,i,e)=>3*i-6*s+3*t,ts=(t,s,i,e)=>3*(s-t),ss=(t,s,i,e)=>((s*t+i)*t+e)*t,is=(t,s,i,e)=>3*s*t*t+2*i*t+e,es=(r,t,s,i,e,h)=>{if(1==r)return 1;let o=0,n=1,a=h[n],u=Zt-1;for(Zt;n!=u&&a<=r;)n++,a=h[n],o+=Xt;n--;let l=(r-(a=h[n]))/(h[n+1]-a),c=o+l*Xt,f=Kt(t,s,i,e),d=$t(t,s,i,e),p=ts(t,s,i,e),m=is(c,f,d,p);if(0===m)return c;if(.01<=m){for(let t=0;t<4;++t){const g=ss(c,f,d,p)-r,y=is(c,f,d,p);c-=g/y}return c}{let s=o,i=o+Xt,e=0,h,n;do{c=s+(i-s)/2;let t=ss(c,f,d,p)-r;0<t?i=c:s=c,h=1e-7<Math.abs(t),n=++e<10}while(h&&n);return c}}}{let o=function(t){ns.Me(t)};o;const ns=self.Os;ns.kc=class{constructor(t){this.Fc=[],this.hn=t||"",this.jc=0}$h(){this.Wl(),this.Fc=null}zc(){return this.hn}Wl(){ns.Dr(this.Fc),this.jc=0}Bc(){return this.jc}Uc(t=Math.random()*this.Bc()){let s=0;for(const[i,e]of this.Fc)if(t<(s+=i))return e;return 0}Wc(t,s){o(s),this.jc+=t,this.Fc.push([t,s])}Qc(s,i){o(i);const e=0===s;for(let t=0;t<this.Fc.length;t++){const h=this.Fc[t],n=e||h[0]===s,r=h[1]===i;if(n&&r){this.Fc.splice(t,1),this.jc-=h[0];break}}}Jc(){return JSON.stringify(this.Fc)}static Vc(t,s){const i=new ns.kc(s),e=JSON.parse(t);for(const h of e){const n=h[0],r=h[1];i.Wc(n,r)}return i}}}{let t=self.Os,i=0;t.Yc=class{constructor(t,s){this.Hc=t,this.qc=s,this.Zc=i++,this.Hc.Xc("runtime","screen-reader-text",{type:"create",id:this.Zc,text:this.qc})}$h(){this.Hc.Xc("runtime","screen-reader-text",{type:"release",id:this.Zc}),this.Hc=null,this.qc="",this.Zc=-1}Kc(t){this.qc!==t&&(this.qc=t,this.Hc.Xc("runtime","screen-reader-text",{type:"update",id:this.Zc,text:this.qc}))}}}{const rs=self.Os;rs.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.$c=!1,this.tf=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.tf)throw new Error(`cannot stop async event '${this.type}' propagation`);this.$c=!0}}}{const os=self.Os;os.Event.if=class extends os.Zh{constructor(t){super(),this.ef=t,this.hf=[],this.nf=new Set,this.rf=[],this.uf=new Set,this.lf=0,this.cf=[]}$h(){0<this.lf||(os.Nr(this.hf),this.nf.clear(),os.Nr(this.rf),this.uf.clear(),os.Nr(this.cf),os.$h(this))}ff(t,s){this.df()?this.cf.push({pf:"add",mf:t,capture:s}):s?this.nf.has(t)||(this.hf.push(t),this.nf.add(t)):this.uf.has(t)||(this.rf.push(t),this.uf.add(t))}gf(t,s){this.df()?this.cf.push({pf:"remove",mf:t,capture:s}):s?this.nf.has(t)&&(this.nf.delete(t),os.Pr(this.hf,t)):this.uf.has(t)&&(this.uf.delete(t),os.Pr(this.rf,t))}yf(){return!this.hf.length&&!this.rf.length}df(){return 0<this.lf}Mf(){const t=new Set,s=new Set;for(const i of this.cf)if("add"===i.pf)this.ff(i.mf,i.capture),(i.capture?s:t).delete(i.mf);else{if("remove"!==i.pf)throw new Error("invalid op");(i.capture?(this.nf.delete(i.mf),s):(this.uf.delete(i.mf),t)).add(i.mf)}os.jr(this.rf,t),os.jr(this.hf,s),os.Nr(this.cf)}wf(i){this.Sf();let e=!1;for(let t=0,s=this.hf.length;t<s;++t)if(this.hf[t](i),i.$c){e=!0;break}if(!e)for(let t=0,s=this.rf.length;t<s&&(this.rf[t](i),!i.$c);++t);return this.Tf(),!i.defaultPrevented}bf(i){this.Sf();for(let t=0,s=this.hf.length;t<s;++t)this.hf[t](i);for(let t=0,s=this.rf.length;t<s;++t)this.rf[t](i);return this.Tf(),!0}Sf(){this.lf++}Tf(){this.lf--,0===this.lf&&0<this.cf.length&&this.Mf()}xf(t){t?this.Sf():this.Tf()}vf(i){let e=[];for(let s=0,t=this.hf.length;s<t;++s){let t=this.hf[s];e.push(os.Cf(()=>t(i)))}for(let s=0,t=this.rf.length;s<t;++s){let t=this.rf[s];e.push(os.Cf(()=>t(i)))}return Promise.all(e).then(()=>!i.defaultPrevented)}If(i){const e=[];this.Sf();for(let t=0,s=this.hf.length;t<s;++t){const h=this.hf[t](i);h instanceof Promise&&e.push(h)}for(let t=0,s=this.rf.length;t<s;++t){const n=this.rf[t](i);n instanceof Promise&&e.push(n)}return this.Tf(),e.length?Promise.all(e).then(()=>!i.defaultPrevented):!i.defaultPrevented}async Gf(t){return this.If(t)}async Ef(i){this.Sf();for(let t=0,s=this.hf.length;t<s;++t){const e=this.hf[t](i);e instanceof Promise&&await e}for(let t=0,s=this.rf.length;t<s;++t){const h=this.rf[t](i);h instanceof Promise&&await h}return this.Tf(),!i.defaultPrevented}*_f(i){this.Sf();for(let t=0,s=this.hf.length;t<s;++t){const e=this.hf[t](i);os.Ao(e)&&(yield*e)}for(let t=0,s=this.rf.length;t<s;++t){const h=this.rf[t](i);os.Ao(h)&&(yield*h)}this.Tf()}}}{const as=self.Os;as.Event.Nf=class extends as.Zh{constructor(){super(),this.Df=new Map,this.Af=!1}$h(){if(this.Af)throw new Error("already released");this.Lf(),this.Af=!0,as.$h(this)}tn(){return this.Af}Lf(){if(this.Df){for(let t of this.Df.values())t.$h();this.Df.clear()}}Of(t,s){let i=this.Df.get(t);return i||(s?(i=as.Kh(as.Event.if,t),this.Df.set(t,i),i):null)}Rf(t){return this.Df.has(t)}addEventListener(t,s,i){let e=this.Of(t,!0);e.ff(s,!!i)}removeEventListener(t,s,i){let e=this.Of(t,!1);e&&(e.gf(s,!!i),e.yf())&&this.Df.delete(t)}dispatchEvent(t){const s=this.Of(t.type,!1);return!s||(t.cancelable?s.wf(t):s.bf(t))}Pf(t){const s=this.Of(t.type,!1);return s?(t.tf=!0,s.vf(t)):Promise.resolve(!0)}async kf(t){const s=this.Of(t.type,!1);if(!s)return!0;this.Df.delete(t.type),t.tf=!0;const i=await s.vf(t);return s.$h(),i}async Ff(t){const s=this.Of(t.type,!1);return!s||s.Gf(t)}jf(t){const s=this.Of(t.type,!1);return!s||s.If(t)}async zf(t){const s=this.Of(t.type,!1);return!s||s.Ef(t)}Bf(t){const s=this.Of(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s._f(t)}xf(t){for(const s of this.Df.values())s.xf(t)}}}{let n=function(t){c=u&&0===f?requestIdleCallback(s,{timeout:i}):setTimeout(s,0<f?1:t)},s=function(h){if(c=-1,l.length){let i=performance.now(),e=i,t=0,s;for(;r(l.shift()),e=performance.now(),++t,s=(e-i)/t*1.1,l.length&&(u&&0===f&&void 0!==h?s<h.timeRemaining():e-i+s<o););if(-1===c&&l.length){let t=e-i,s=Math.max(a-t,4);n(s)}}},r=function(s){let t;try{t=s.mf()}catch(t){return void s.reject(t)}s.resolve(t)},t=(n,s,r,self.Os),o=12,a=16,i=35,u="undefined"!=typeof requestIdleCallback,l=[],c=-1,f=0,h=t.si.Xs("disable-asyncify");h&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),t.Cf=function(i){let e=null;return t.isDebug&&(e=t.re()),new Promise((t,s)=>{l.push({mf:i,resolve:t,reject:s,stack:e}),h?r(l.pop()):-1===c&&n(a)})},t.Cf.Uf=function(t){if(t)++f;else if(--f<0)throw new Error("already turned off high throughput mode")}}{let t=function(){n=-1},s=function(){r=-1,o=-1;let i=Date.now();for(let s of a)if(s.Wf(i)){let t=s.Qf();(-1===o||t<o)&&(o=t)}else a.delete(s);if(-1!==o){let t=Math.max(o-i+h,e);r=self.setTimeout(s,t)}},i=(t,s,self.Os),e=1e3,h=100,n=-1,r=(i.Jf=function(){return-1===n&&(n=Date.now(),self.setTimeout(t,16)),n},-1),o=-1,a=new Set;i.Vf=class{constructor(t,s){this.Yf=t,this.Hf=1e3*s,this.qf=0,this.Zf=!1}Xf(){let t=i.Jf();this.qf=t+this.Hf,this.Zf||(a.add(this),this.Zf=!0),-1===r?(o=this.qf,r=self.setTimeout(s,this.Hf+h)):this.qf<o&&o>t+e&&(self.clearTimeout(r),o=this.qf,r=self.setTimeout(s,this.Hf+h))}Wf(t){return!(t>=this.qf)||(this.Yf()?(this.qf=t+this.Hf,!0):this.Zf=!1)}Qf(){return this.qf}Kf(){this.Zf&&(a.delete(this),this.Zf=!1,0===a.size)&&-1!==r&&(self.clearTimeout(r),r=-1,o=-1)}$h(){this.Kf(),this.Yf=null}}}{const us=self.Os;us.$f=class ls{constructor(t){this.t0=!1,this.s0=t}i0(){this.t0||(this.t0=!0,this.s0&&(this.s0(),this.s0=null))}e0(){return this.t0}$h(){this.i0()}static $h(t){return new ls(()=>t.$h())}static h0(s,i,e,h,t){if(null==h)h=!1;else if("boolean"!=typeof h&&"object"!=typeof h)throw new TypeError("invalid event listener options");if(t&&(e=e.bind(t)),i.includes(" ")){i=i.split(" ");const n=new us.n0;for(let t of i)s.addEventListener(t,e,h),n.$l(us.Kh(us.$f,()=>s.removeEventListener(t,e,h)));return n}return s.addEventListener(i,e,h),us.Kh(us.$f,()=>s.removeEventListener(i,e,h))}},us.r0=class extends us.$f{o0(t){this.s0=t}},us.n0=class extends us.$f{constructor(...s){super(),this.a0=new Set;for(let t of s)this.$l(t)}$l(...s){if(this.t0)throw new Error("already disposed");for(let t of s)this.a0.add(t)}u0(t){if(this.t0)throw new Error("already disposed");this.a0.delete(t)}l0(){if(this.t0)throw new Error("already disposed");if(this.a0){for(let t of this.a0)t.i0();this.a0.clear()}}e0(){return this.t0}i0(){if(this.t0)throw new Error("already disposed");this.t0=!0;for(let t of this.a0)t.i0();this.a0.clear(),this.a0=null}$h(){this.i0()}}}{const cs=self.Os;cs.c0=class extends cs.Zh{constructor(){super(),this.f0=0,this.Qa=0,this.d0=0,this.p0=0}$l(t){this.Qa=(t=+t)-this.f0,this.d0=this.p0+this.Qa,this.f0=this.d0-this.p0-this.Qa,this.p0=this.d0}m0(t){this.p0-=+t}Ks(){return this.p0}Xf(){this.f0=0,this.Qa=0,this.d0=0,this.p0=0}Set(t){this.f0=0,this.Qa=0,this.d0=0,this.p0=+t}g0(t){this.f0=t.f0,this.Qa=t.Qa,this.d0=t.d0,this.p0=t.p0}$h(){}}}{const fs=self.Os,r={};r.y0=function(t){this.M0=t,this.right=this.M0.w0,this.left=this.M0.w0,this.parent=null,this.color=!1,this.key=null},r.S0=function(t){this.size=0,this.w0=new r.y0(this),this.w0.color=!1,this.root=this.w0,this.root.parent=this.w0,this.compare=t||this.T0},r.S0.prototype.T0=function(t,s){return t<s?-1:s<t?1:0},r.S0.prototype.clone=function(){var t=new r.S0(this.compare);return t.b0(this),t},r.S0.prototype.clear=function(){this.size=0,this.w0=new r.y0(this),this.w0.color=!1,this.root=this.w0,this.root.parent=this.w0},r.S0.prototype.x0=function(t){var s=t.right;t.right=s.left,s.left!=this.w0&&(s.left.parent=t),s.parent=t.parent,t.parent==this.w0?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,(s.left=t).parent=s},r.S0.prototype.v0=function(t){var s=t.left;t.left=s.right,s.right!=this.w0&&(s.right.parent=t),s.parent=t.parent,t.parent==this.w0?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,(s.right=t).parent=s},r.S0.prototype.C0=function(t){if(this.contains(t))this.I0(t).key=t;else{for(var s=new r.y0(this),i=(s.key=t,this.w0),e=this.root;e!=this.w0;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;(s.parent=i)==this.w0?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.w0,s.right=this.w0,s.color=!0,this.G0(s),this.size++}},r.S0.prototype.G0=function(t){for(;t!=this.w0&&t!=this.root&&1==t.parent.color;){var s;t.parent==t.parent.parent.left?1==(s=t.parent.parent.right).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.x0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.w0&&this.v0(t.parent.parent)):1==(s=t.parent.parent.left).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.v0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.w0&&this.x0(t.parent.parent))}this.root.color=!1},r.S0.prototype.E0=function(t){var s=t.left==this.w0||t.right==this.w0?t:this._0(t),i=s.left!=this.w0?s.left:s.right;i.parent=s.parent,s.parent==this.w0?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.N0(i),this.size--},r.S0.prototype.N0=function(t){for(;t!=this.root&&0==t.color;){var s;t=t==t.parent.left?(1==(s=t.parent.right).color&&(s.color=!1,t.parent.color=!0,this.x0(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=!0,t.parent):(0==s.right.color&&(s.left.color=!1,s.color=!0,this.v0(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.x0(t.parent),this.root)):(1==(s=t.parent.left).color&&(s.color=!1,t.parent.color=!0,this.v0(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=!0,t.parent):(0==s.left.color&&(s.right.color=!1,s.color=!0,this.x0(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.v0(t.parent),this.root))}t.color=!1},r.S0.prototype.remove=function(t){var s;return(t=this.I0(t))!=this.w0?(s=t.key,this.E0(t),s):null},r.S0.prototype.D0=function(t,s){this.remove(s)},r.S0.prototype.min=function(t){for(;t.left!=this.w0;)t=t.left;return t},r.S0.prototype.max=function(t){for(;t.right!=this.w0;)t=t.right;return t},r.S0.prototype._0=function(t){if(t.right!=this.w0)return this.min(t.right);for(var s=t.parent;s!=this.w0&&t==s.right;)s=(t=s).parent;return s},r.S0.prototype.A0=function(t){if(t.left!=this.w0)return this.max(t.left);for(var s=t.parent;s!=this.w0&&t==s.left;)s=(t=s).parent;return s},r.S0.prototype.L0=function(t){if(0<this.size){var s=this.I0(t);if(s==this.w0)return null;if(s.right!=this.w0)return this.min(s.right).key;for(var i=s.parent;i!=this.w0&&s==i.right;)i=(s=i).parent;return i!=this.w0?i.key:null}return null},r.S0.prototype.O0=function(t){if(0<this.size){var s=this.I0(t);if(s==this.w0)return null;if(s.left!=this.w0)return this.max(s.left).key;for(var i=s.parent;i!=this.w0&&s==i.left;)i=(s=i).parent;return i!=this.w0?i.key:null}return null},r.S0.prototype.R0=function(){return this.min(this.root).key},r.S0.prototype.P0=function(){return this.max(this.root).key},r.S0.prototype.I0=function(t){for(var s=this.root;s!=this.w0&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},r.S0.prototype.contains=function(t){return null!=this.I0(t).key},r.S0.prototype.getValues=function(){var s=[];return this.forEach(function(t){s.push(t)}),s},r.S0.prototype.b0=function(t){if("array"==r.typeOf(t))for(var s=0;s<t.length;s++)this.C0(t[s]);else if("function"==r.typeOf(t.forEach))t.forEach(this.C0,this);else if("function"==r.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.C0(i[s]);else if("object"==r.typeOf(t))for(var e in t)this.C0(t[e])},r.S0.prototype.k0=function(t){if("array"==r.typeOf(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==r.typeOf(t.forEach))t.forEach(this.D0,this);else if("function"==r.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.remove(i[s]);else if("object"==r.typeOf(t))for(var e in t)this.remove(t[e])},r.S0.prototype.F0=function(t){if("array"==r.typeOf(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==r.typeOf(t.forEach))return t.every(this.contains,this);if("function"==r.typeOf(t.getValues)){for(var i=t.getValues(),s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==r.typeOf(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},r.S0.prototype.range=function(t,s){var i=[];return this.j0(function(t){i.push(t)},t,s),i},r.S0.prototype.z0=function(t,s){if(!this.B0())for(var i=this.min(this.root);i!=this.w0;){if(t.call(s,i.key,this))return;i=this._0(i)}},r.S0.prototype.U0=function(t,s,i){if(!this.B0())for(var e=this.I0(s);e!=this.w0;){if(t.call(i,e.key,this))return;e=this._0(e)}},r.S0.prototype.W0=function(t,s,i){if(!this.B0())for(var e=this.min(this.root),h=this.I0(s);e!=h;){if(t.call(i,e.key,this))return;e=this._0(e)}},r.S0.prototype.j0=function(t,s,i,e){if(!this.B0())for(var h=this.I0(s),n=this.I0(i);h!=n;){if(t.call(e,h.key,this))return;h=this._0(h)}},r.S0.prototype.Q0=function(t,s){if(!this.B0())for(var i=this.max(this.root);i!=this.w0;){if(t.call(s,i.key,this))return;i=this.A0(i)}},r.S0.prototype.forEach=function(t,s){if(!this.B0())for(var i=this.min(this.root);i!=this.w0;i=this._0(i))t.call(s,i.key,i.key,this)},r.S0.prototype.some=function(t,s){if(!this.B0())for(var i=this.min(this.root);i!=this.w0;i=this._0(i))if(t.call(s,i.key,i.key,this))return!0;return!1},r.S0.prototype.every=function(t,s){if(this.B0())return!1;for(var i=this.min(this.root);i!=this.w0;i=this._0(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},r.S0.prototype.map=function(t,s){var i=[];if(!this.B0())for(var e=this.min(this.root);e!=this.w0;e=this._0(e))i.push(t.call(s,e.key,e.key,this));return i},r.S0.prototype.filter=function(t,s){var i=[];if(!this.B0())for(var e=this.min(this.root);e!=this.w0;e=this._0(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},r.S0.prototype.getCount=function(){return this.size},r.S0.prototype.B0=function(){return 0==this.size},r.S0.prototype.isSubsetOf=function(t){var s=r.getCount(t);if(this.getCount()>s)return!1;var i=0;if(this.B0())return!0;for(var e=this.min(this.root);e!=this.w0;e=this._0(e))r.contains.call(t,t,e.key)&&i++;return i==this.getCount()},r.S0.prototype.intersection=function(t){var s=new r.S0(this.compare);if(!this.B0())for(var i=this.min(this.root);i!=this.w0;i=this._0(i))t.contains.call(t,i.key,i.key,this)&&s.C0(i.key);return s},fs.S0=class extends fs.Zh{constructor(t){super(),this.J0=new r.S0(t),this.V0=!1,this.Y0=new Set,this.H0=new Set}$l(t){this.V0?this.J0.contains(t)?this.H0.delete(t):this.Y0.add(t):this.J0.C0(t)}u0(t){this.V0?this.J0.contains(t)?this.H0.add(t):this.Y0.delete(t):this.J0.remove(t)}Xs(t){return this.V0?!!this.Y0.has(t)||!this.H0.has(t)&&this.J0.contains(t):this.J0.contains(t)}Wl(){this.J0.clear(),this.Y0.clear(),this.H0.clear()}toArray(){if(this.V0)throw new Error("cannot be used in queueing mode");return this.J0.getValues()}Yl(){return this.J0.getCount()+this.Y0.size-this.H0.size}Ql(){return 0===this.Yl()}q0(){if(this.Ql())throw new Error("empty set");if(this.V0)throw new Error("cannot be used in queueing mode");const t=this.J0,s=t.min(t.root);return s.key}Z0(){if(this.Ql())throw new Error("empty set");if(this.V0)throw new Error("cannot be used in queueing mode");const t=this.q0();return this.u0(t),t}X0(t){if(this.V0!==(t=!!t)&&!(this.V0=t)){for(const s of this.H0)this.J0.remove(s);this.H0.clear();for(const i of this.Y0)this.J0.C0(i);this.Y0.clear()}}K0(t){this.J0.forEach(t)}*values(){if(!this.Ql()){const s=this.J0;for(let t=s.min(s.root);t!=s.w0;t=s._0(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const ds=self.Os;ds.$0=class{constructor(t=ds.hardwareConcurrency){this.t1=t,this.s1=[],this.i1=0}$l(i){return new Promise((t,s)=>{this.s1.push({mf:i,resolve:t,reject:s}),this.e1()})}h1(i){for(let t=0,s=this.s1.length;t<s;++t)if(this.s1[t].mf===i)return t;return-1}n1(t,s){const i=this.h1(t);if(-1===i)throw new Error("cannot find promise to resolve");this.s1[i].resolve(s),this.s1.splice(i,1)}o1(t,s){const i=this.h1(t);if(-1===i)throw new Error("cannot find promise to reject");this.s1[i].reject(s),this.s1.splice(i,1)}async e1(){if(this.s1.length&&!(this.i1>=this.t1)){this.i1++;const s=this.s1.shift();try{const t=await s.mf();s.resolve(t)}catch(t){s.reject(t)}this.i1--,this.e1()}}static async a1(t,s){let i=[],e=!1,h=[];for(;t--;)h.push((async()=>{let t;for(;t=s.pop();){if(e)return;try{i.push(await t())}catch(t){throw e=!0,t}}})());return await Promise.all(h),i}}}{const ps=self.Os;ps.u1=class{constructor(t,s,i){this.Yf=t,this.l1=s,this.c1=i||2*s,this.f1=-1,this.d1=-1/0,this.m1=()=>this.g1(),this.M1=!1,this.w1=!1,this.S1=null}T1(t){this.w1=!!t}b1(){return void 0!==ps.Battery&&ps.Battery.IsOnBatteryPower()?this.c1:this.l1}v1(...e){if(-1===this.f1){this.S1=e;let t=ps.Jf(),s=t-this.d1,i=this.b1();i<=s&&this.w1?(this.d1=t,this.C1()):this.f1=self.setTimeout(this.m1,Math.max(i-s,4))}}C1(){this.M1=!0;const t=this.S1;this.S1=null,t?this.Yf(...t):this.Yf(),this.M1=!1}Xf(){this.M1||(this.I1(),this.S1=null,this.d1=ps.Jf())}g1(){this.f1=-1,this.d1=ps.Jf(),this.C1()}I1(){-1!==this.f1&&(self.clearTimeout(this.f1),this.f1=-1)}$h(){this.I1(),this.Yf=null,this.S1=null,this.m1=null}}}{const ms=self.Os;ms.G1=class{constructor(){this.E1=new Map,this._1=!1,this.N1=null,this.D1=null,this.A1=null,this.L1=null}O1(t){this._1=!!t}R1(){return this._1}P1(t){this.N1=t}F1(t){if(this.N1)return this.N1(t);throw new Error("no get base size callback set")}j1(t){this.D1=t}z1(t,s,i,e,h,n){if(this.D1)return this.D1(t,s,i,e,h,n);throw new Error("no raster at size callback set")}B1(t){this.A1=t}U1(t){if(!this.A1)throw new Error("no release result callback set");this.A1(t)}W1(t){this.L1=t}Q1(){if(!this.L1)throw new Error("no redraw callback set");this.L1()}J1(t){let s=this.E1.get(t);return s||(s=ms.Kh(ms.V1,this,t),this.E1.set(t,s)),s.Y1(),s}H1(t){this.E1.delete(t.q1())}Z1(){for(const t of this.E1.values())t.X1(),t.K1()}}}{const gs=self.Os;gs.V1=class{constructor(t,s){this.td=t,this.sd=s,this.ed=0,this.hd=0,this.nd=0,this.rd=this.td.F1(s).then(t=>{this.td&&(this.hd=t[0],this.nd=t[1],this.td.Q1())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.od=!0,this.td&&this.td.Q1()}),this.ad=0,this.ud=0,this.ld=0,this.fd=0,this.dd=!1,this.pd=null,this.md=!1,this.od=!1}$h(){if(this.ed<=0)throw new Error("already released");this.ed--,0===this.ed&&this.gd()}X1(){this.pd&&(this.td.U1(this.pd),this.pd=null)}gd(){this.X1(),this.td.H1(this),this.td=null}q1(){return this.sd}Y1(){this.ed++}yd(){return 0<this.ed}Md(){return this.pd}K1(){this.md=!0}async wd(e,h,n){if(0!==h&&0!==n&&!this.od&&!this.dd){let t=gs.En(Math.ceil(h)),s=gs.En(Math.ceil(n)),i=Math.max(t,s);if(4096<i){const r=4096/i;h*=r,n*=r,t=Math.min(Math.ceil(t*r),4096),s=Math.min(Math.ceil(s*r),4096)}if(h<t&&n<s){const o=h/n,a=t/s;n=o<a?(h=s*o,s):(h=t)/o}if(this.td.R1()&&(t=Math.ceil(h),s=Math.ceil(n)),!(t<=this.ad&&s<=this.ud)||this.md){this.dd=!0,this.ad=t,this.ud=s;const u=await this.td.z1(this.sd,e,this.ad,this.ud,h,n);this.td&&(this.X1(),this.pd=u,this.ld=h,this.fd=n,this.dd=!1,this.md=!1,this.td.Q1())}}}Sd(){return this.rd}Td(){return this.hd}bd(){return this.nd}xd(){return this.ld}vd(){return this.fd}Cd(){return this.od}}}{let s=function(t){return Ss.get(t)};s;const c=self.Os,ys=(c.Id="\ufeff",new Set("0123456789")),Ms=(c.Gd=function(t){return ys.has(t)},new Set(" \t\n\r\u2028\u2029"));c.Ed=function(t){return Ms.has(t)},c._d=function(t){return[...t].filter(t=>!c.Ed(t)).join("")},c.Nd=function(t){for(const s of t)if(!c.Ed(s))return!1;return!0},c.Dd=function(t){for(const s of t)if(!c.Ed(s))return!1;return!0},c.Ad=function(t){return 1===t.length&&t.charCodeAt(0)<32},c.Ld=function(t){return[...t].filter(t=>!c.Ad(t)).join("")};let i=null;try{i=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}c.Od=function(t){return!c.Ed(t)&&i&&i.test(t)};const ws=new Set("0123456789.+-e"),Ss=(c.Rd=function(s){if(!(s=s.trim()).length)return!1;let t=s.charAt(0);if("-"!==t&&!ys.has(t))return!1;for(let t of s)if(!ws.has(t))return!1;return!0},c.Pd=function(s){let i=s.length;for(;0<i;){let t=s.charAt(i-1);if(!c.Gd(t))break;--i}return s.substr(0,i)},c.kd=function(t){let s=c.Pd(t),i=t.substr(s.length);return s+(i?(parseInt(i,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),Ts=/[&<>"']/g,bs=(c.Fd=function(t){return t.replace(Ts,s)},c.jd=function(t){let s=c.zd(t,"\\","\\\\");return s=c.zd(s,'"','\\"'),s=c.zd(s,"\t","\\t"),s=c.zd(s,"\r",""),c.zd(s,"\n","\\n")},c.Bd=function(t){let s=c.zd(t,"&","&amp;");return s=c.zd(s,"<","&lt;"),s=c.zd(s,">","&gt;"),c.zd(s,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),xs=(c.ne=function(t){return t.replace(bs,"\\$&")},c.Ud=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},c.Wd=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());let e=s.length,h=0,n,r=[];for(;-1<(n=t.indexOf(s,h));)r.push(n),h=n+e;return r},c.zd=function(t,s,i){return t.replaceAll(s,()=>i)},c.Qd=function(t,s,i){return t.replace(new RegExp(c.ne(s),"gi"),()=>i)},c.Jd=function(t,s){"string"==typeof s?t.textContent=s:s.Vd()?t.textContent=s.toString():(t.innerHTML=s.Yd(),s instanceof c.Ch&&s.Hd(t))},c.qd=function(t,s){return t instanceof c.HtmlString||t instanceof c.Ch?t.equals(s):s instanceof c.HtmlString||s instanceof c.Ch?s.equals(t):t===s},c.Zd=function(i,...e){let h=i;for(let t=0,s=e.length;t<s;++t){const n=`{${t}}`;if(!i.includes(n))throw new Error(`missing placeholder '${n}' in string substitution`);h=h.replace(n,e[t].toString())}return h},c.Xd=function(i,...e){let h=i,n=-1,r=-1;for(let t=0,s=e.length;t<s;++t){const o=`{${t}}`;i.includes(o)?(r=t,h=h.replace(o,e[t].toString())):-1===n&&(n=t)}if(0<=n&&0<=r&&n<r)throw new Error(`missing placeholder '${n}' in string substitution`);return h},c.Kd=function(t,i){let e=t;for(let[t,s]of Object.entries(i))e=e.replaceAll(t,s.toString());return e},c.$d=function(t,s){return s<t?1:t<s?-1:0},c.tp=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return e<i?1:i<e?-1:0},new self.Intl.Segmenter),vs=(c.sp=function(t){const s=[];for(const i of xs.segment(t))s.push(i.segment);return s},c.ip=function*(t){for(const s of xs.segment(t))yield s.segment},c.ep=function(t){let s=0;for(const i of xs.segment(t))++s;return s},1073741824),Cs=1024*vs,Is={hp:!(c.np=function(s,t){let i="common."+(t?"dataRates":"dataSizes")+".",e=self.langSub;if(s<1024)return e(i+"bytes",s);if(s<1048576){let t=s/1024;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"kilobytes",t)}if(s<vs){let t=s/1048576;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"megabytes",t)}if(s<Cs){let t=s/vs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"gigabytes",t)}{let t=s/Cs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"terabytes",t)}}),rp:!0,op:!0,up:!0,lp:!0};c.cp=function(t,s){s=Object.assign({},Is,s),c.Lang.PushContext("common.time");const i=[],e=self.lang,h=self.langPluralSub;if(s.rp){const r=Math.floor(t/86400);0<r&&(t-=24*r*3600,i.push(h(".days",null,r)))}if(s.op){const o=Math.floor(t/3600);(0<o||i.length)&&(t-=3600*o,i.push(h(".hours",null,o)))}if(s.up){const a=Math.floor(t/60);(0<a||i.length||!s.lp)&&(t-=60*a,i.push(h(".minutes",null,a)))}if(s.lp){const u=Math.floor(t%60);i.push(h(".seconds",null,u))}const n=(s.hp?e(".approx-prefix"):"")+i.join(e(".separator"));return c.Lang.PopContext(),n},c.fp=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),h=s-e.length;for(let t=0;t<h;++t)i+="0";return i+e},c.pp=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},c.mp=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());c.Lr(i,4,"0"),c.Lr(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const h=i[t]-e[t];if(0!=h)return h<0?-1:1}return 0},c.gp=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random()),i="x"===t?s:3&s|8;return i.toString(16)})},c.yp=function(i,e){if(i.length!==e.length)throw new Error("strings must be same length");let h=0;for(let t=0,s=i.length;t<s;++t)i.charAt(t)!==e.charAt(t)&&++h;return h},c.Mp=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,h,n,r,o;for(s.length<t.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(n=e,h=1;h<=t.length;h++)r=s[e-1]===t[h-1]?o[h-1]:Math.min(o[h-1]+1,Math.min(n+1,o[h]+1)),o[h-1]=n,n=r;o[t.length]=n}return o[t.length]}}{let s=function(t,i,e){const h=o.get(e);if(!h)return"class"===e?i?"</span>":`<span class="bbclass${l++}">`:t;if("string"==typeof h){if("a"===h&&0===a.length||"abbr"===h&&0===u.length)return t;if("a"!==h||i){if("abbr"!==h||i)return"<"+i+h+">";{const n=parseInt(e.substring(3),10)-1;if(n<0||n>=u.length)throw new Error("invalid bbcode tip substitution");let t=u[n],s="";if("string"==typeof t?s=t:"function"==typeof t&&(s=t()),"string"!=typeof s)throw new TypeError("invalid bbcode tip");return`<abbr title="${f.zd(s,'"',"&quot;")}">`}}{const s=parseInt(e.substring(1),10)-1;if(s<0||s>=a.length)throw new Error("invalid bbcode link substitution");const r=a[s];if("string"==typeof r)return`<a href="${a[s]}">`;if("function"==typeof r)return`<a class="bblink${s}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(h)){let t=h[0],s=h[1];return i?"</"+t+">":`<${t} class="${s}">`}},f=(s,self.Os),o=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),d=new Set(["icon"]),i=/\[(\/?)([a-zA-Z0-9]+)\]/g,p=/\[(\/?)([^\[\n]*?)\]/g,a=null,u=null,l=0,e=/\n/g;f.Ch=class{constructor(t,s){if(this.wp=s&&s.Sp?t:f.Fd(t),this.Tp="",this.bp=!1,this.xp=[],this.vp=[],s){if(this.bp=!!s.convertLineBreaks,s.links){if(9<s.links.length)throw new Error("too many links");this.xp=s.links}if(s.tips){if(9<s.tips.length)throw new Error("too many tips");this.vp=s.tips}}this.Cp=this.wp.includes("["),this.Ip=this.bp&&this.wp.includes("\n"),this.Gp=!this.Cp&&!this.Ip&&!this.wp.includes("&"),this.Ep=!1,this._p=[]}toString(){return this.wp}valueOf(){return this.wp}Vd(){return this.Gp}Np(){return this.Cp?this.wp.replace(i,""):this.wp}Yd(){if(this.Gp)return this.wp;if(!this.Tp&&this.wp){let t=this.wp;this.Cp&&(l=0,a=this.xp,u=this.vp,t=t.replace(i,s),a=null,u=null),this.Ip&&(t=t.replace(e,"<br>")),this.Tp=t}return this.Tp}Hd(i){if(this.xp.length)for(let t=0,s=this.xp.length;t<s;++t){const e=this.xp[t];if("function"==typeof e){const h=i.querySelector(".bblink"+t);if(!h)throw new Error("unable to attach BBString link handler");h.onclick=e}}}equals(t){return t instanceof f.HtmlString?this.Yd()===t.Yd():t instanceof f.Ch?this.wp===t.wp:this.wp===t}Dp(){if(!this.Ep){let e=[],t=this.wp,h=[],s=p.lastIndex=0,i;for(;null!==(i=p.exec(t));){const n=i.index;if(!(0<n&&"\\"===t.charAt(n-1))){const r=i[0],o=i[1],a=i[2],u=t.substring(s,n);if(s=n+r.length,u&&e.push({text:u,Ap:h.slice(0)}),a)if(o){const l=a.toLowerCase();for(let t=h.length-1;0<=t;--t)if(h[t].tag===l){h.splice(t,1);break}}else{let t=a,s=null,i=a.indexOf("=");if(-1!==i?(t=a.substring(0,i).toLowerCase(),s=a.substring(i+1)):t=t.toLowerCase(),d.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);e.push({icon:s,Ap:h.slice(0)})}else h.push({tag:t,Lp:s})}}}s<t.length&&e.push({text:t.substring(s),Ap:h.slice(0)});for(const c of e)c.text&&(c.text=this.Op(c.text));this._p=e.map(t=>t.icon?f.Kh(f.Rp,{icon:t.icon,Ap:t.Ap}):f.Kh(f.Pp,{kp:f.sp(t.text),Ap:t.Ap})),this.Ep=!0}return this._p}Op(t){return t=f.zd(t,"\\[","["),f.zd(t,"\\\\","\\")}static Fp(t){return f.Kh(f.Ch,t,{Sp:!0}).Np()}static jp(t){return t.replace(p,"")}}}{let u=function(t){return""!==t&&""!==t&&M.Ed(t)},a=function(t){return Gs.has(t)},l=function(t){return M.Od(t)&&!a(t)},c=function(t){for(;0<t.length&&u(t.at(-1));)t.pop()},y=function(t){return"\n"===t||"\r\n"===t};u,a,l,c,y;const M=self.Os,Gs=new Set("");M.zp=class{constructor(){this.Bp=[],this.Up=null}Wp(){return this.Bp}Qp(){return this.Bp.length}Jp(t){this.Up=t}Vp(t,s){let i=0,e=0,h=0,n=0,r=0;for(const o of t){if(-1===o.Yp()){const a=s(o);o.Hp(a.height),o.qp(a.fontBoundingBoxAscent||0),o.Zp(a.fontBoundingBoxDescent||0),o.Xp(a.Kp||0),o.$p()?o.tm(a.width):o.im()&&o.hm(this.Up)}i+=o.Yp(),e=Math.max(e,o.nm()),h=Math.max(h,o.rm()),n=Math.max(n,o.om()),r=Math.max(r,o.am())}return{width:i,height:e,fontBoundingBoxAscent:h,fontBoundingBoxDescent:n,Kp:r}}um(t,s,i,e,h,n){this.Bp.push(M.Kh(M.zp.lm,{fm:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:h,Kp:n}))}zp(s,n,r,i,o){if("string"==typeof s&&(s=[M.Kh(M.Pp,{kp:M.sp(s)})]),M.Nr(this.Bp),!(!s.length||1===s.length&&s[0].$p()&&s[0].Ql()||r<2)){if(1===s.length){const a=s[0];if(a.$p()&&a.dm()<=100&&!a.pm()){let{width:t,height:s,fontBoundingBoxAscent:i,fontBoundingBoxDescent:e,Kp:h}=n(a);if(t+=o,a.tm(t),a.Hp(s),a.qp(i||0),a.Zp(e||0),a.Xp(h||0),t<=r)return void this.um([a],t,s,i,e,h)}}let t;t="word"===i?this.gm(s):"cjk"===i?this.ym(s):this.Mm(s),this.wm(t,n,r,o)}}gm(t){let s=[],i=[],e=!1;for(const h of t){const n=h.Sm();if(h.im())0<i.length&&s.push(i),s.push([h]),i=[];else for(const r of h.Tm())if(y(r))0<i.length&&s.push(i),s.push([M.Kh(M.Pp,{kp:["\n"],Ap:n})]),i=[];else if(0===i.length)i.push(M.Kh(M.Pp,{kp:[r],Ap:n})),e=u(r);else{const o=u(r);if(o===e){const a=i.at(-1);a.Sm()===n?a.xm(r):i.push(M.Kh(M.Pp,{kp:[r],Ap:n}))}else s.push(i),i=[M.Kh(M.Pp,{kp:[r],Ap:n})],e=o}}return 0<i.length&&s.push(i),s}ym(t){let s=[],i=[],e=!1;for(const h of t){const n=h.Sm();if(h.im())0<i.length&&s.push(i),s.push([h]),i=[];else for(const r of h.Tm())if(y(r))0<i.length&&s.push(i),s.push([M.Kh(M.Pp,{kp:["\n"],Ap:n})]),i=[];else{if(0===i.length)i.push(M.Kh(M.Pp,{kp:[r],Ap:n}));else if(e||l(r)){const o=i.at(-1);o.Sm()===n?o.xm(r):i.push(M.Kh(M.Pp,{kp:[r],Ap:n}))}else s.push(i),i=[M.Kh(M.Pp,{kp:[r],Ap:n})];e=a(r)}}return 0<i.length&&s.push(i),s}Mm(t){const s=[];for(const i of t)if(i.$p()){const e=i.Tm();M.Bh(s,e.map(t=>[M.Kh(M.Pp,{kp:[t],Ap:i.Sm()})]))}else s.push([i]);return s}vm(t){return t.map(t=>t.Cm())}Im(s,i){let t=s.length?s.at(-1):null,e=0;t&&t.$p()&&i[0].$p()&&i[0].Sm()===t.Sm()&&(t.Gm(i[0].Tm()),e=1);for(let t=i.length;e<t;++e){const h=i[e];s.push(h.Cm())}}wm(t,s,i,e){let h=[],n=0,r=0,o=0,a=0,u=0;for(const l of t)if(1===l.length&&l[0].$p()&&1===l[0].dm()&&y(l[0].Tm()[0])){if(0===r){const c=M.Kh(M.Pp,{kp:[" "],Ap:l[0].Sm()}),f=s(c);r=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,u=f.Kp||0}this.um(h,n,r,o,a,u),h=[],n=0,r=0,o=0,a=0,u=0}else{const d=this.vm(h),p=(this.Im(d,l),this.Vp(d,s)),m=p.width;if(i<=m)if(0<h.length&&this.um(h,n,r,o,a,u),h=[],l[0].$p()&&M.Dd(l[0].Tm()))n=0,r=0,o=0,a=0,u=0;else{this.Im(h,l);const g=this.Vp(h,s);n=g.width,r=g.height,o=g.fontBoundingBoxAscent,a=g.fontBoundingBoxDescent,u=g.Kp}else h=d,n=m,r=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,u=p.Kp}0<h.length&&this.um(h,n,r,o,a,u),this.Em(s,e)}Em(s,i){for(const e of this.Bp){const h=e._m();if(h.length){let t=h.at(-1);if(t.$p()){const n=t.Tm(),r=n.slice(0);if(c(r),0===r.length)e.Nm(-t.Yp()),h.pop();else if(r.length<n.length){t.Dm(r);const o=s(t).width,a=t.Yp()-o;t.tm(o),e.Nm(-a)}0!==i&&0<h.length&&((t=h.at(-1)).Nm(i),e.Nm(i))}}}}Wl(){M.Nr(this.Bp)}Am(){return this.Bp.reduce((t,s)=>Math.max(t,s.Yp()),0)}Lm(){return this.Bp.reduce((t,s)=>t+s.nm(),0)}}}{const Es=self.Os;Es.zp.lm=class{constructor(t){this._p=t.fm||[],this.Om=t.width||-1,this.Rm=t.height||-1,this.Pm=t.fontBoundingBoxAscent||-1,this.km=t.fontBoundingBoxDescent||-1,this.Fm=t.Kp||-1,this.jm=0,this.zm=0}fm(){return this._p.values()}*Bm(){const s=this._p;for(let t=s.length-1;0<=t;--t)yield s[t]}_m(){return this._p}Nm(t){this.Om+=t}Yp(){return this.Om}nm(){return this.Rm}Um(){return this.Pm}om(){return this.km}am(){return this.Fm}Wm(t){this.jm=t}Qm(){return this.jm}Jm(t){this.zm=t}Vm(){return this.zm}}}{const _s=self.Os;_s.Ym=class{constructor(t){this.Hm=t.Ap||[],this.Om=t.width||-1,this.Rm=t.height||-1,this.Pm=t.fontBoundingBoxAscent||-1,this.km=t.fontBoundingBoxDescent||-1,this.Fm=t.Kp||-1,this.jm=0,this.zm=0}$p(){return!1}im(){return!1}Sm(){return this.Hm}qm(s){const i=this.Hm;for(let t=i.length-1;0<=t;--t){const e=i[t];if(e.tag===s)return e}return null}Zm(t){return!!this.qm(t)}Xm(){const t=new Map;for(const s of this.Hm)t.set(s.tag,s.Lp);return t}Nm(t){this.Om+=t}tm(t){this.Om=t}Yp(){return this.Om}Hp(t){this.Rm=t}nm(){return this.Rm}qp(t){this.Pm=t}rm(){return this.Pm}Zp(t){this.km=t}om(){return this.km}Xp(t){this.Fm=t}am(){return this.Fm}Wm(t){this.jm=t}Qm(){return this.jm}Jm(t){this.zm=t}Vm(){return this.zm}}}{const Ns=self.Os;Ns.Pp=class extends Ns.Ym{constructor(t){super(t),this.Km=t.kp}$p(){return!0}Gm(t){Ns.Bh(this.Km,t),this.Om=-1,this.Rm=-1,this.Pm=-1,this.km=-1,this.Fm=-1}xm(t){this.Km.push(t)}Cm(){return Ns.Kh(Ns.Pp,{kp:this.Km.slice(0),Ap:this.Hm,width:this.Om,height:this.Rm,fontBoundingBoxAscent:this.Pm,fontBoundingBoxDescent:this.km,Kp:this.Fm})}Tm(){return this.Km}Dm(t){this.Km=t}dm(){return this.Km.length}Ql(){return 0===this.Km.length}pm(){return this.Km.includes("\n")}}}{const Ds=self.Os;Ds.Rp=class extends Ds.Ym{constructor(t){super(t),this.$m=t.icon}im(){return!0}tg(){return this.$m}Cm(){return Ds.Kh(Ds.Rp,{icon:this.$m,Ap:this.Hm,width:this.Om,height:this.Rm,fontBoundingBoxAscent:this.Pm,fontBoundingBoxDescent:this.km,Kp:this.Fm})}sg(t){if(!t)return null;let s=Number(this.$m);return String(s)===this.$m?(s=Math.floor(s),t.ig(s)):t.eg(this.$m)}hm(t){const s=this.sg(t);this.Om=s?this.Rm*s.Yp()/s.nm():0}hg(t){const s=this.sg(t);return s?s.hg():null}dm(){return 1}}}{const As=self.Os;As.ng=class{constructor(t){this.rg=new Map,this.og=t.ag,this.ug=t.lg}$h(){for(const t of this.rg.values())t.$h();this.rg.clear()}fg(t){let s=this.rg.get(t);if(!s){const i=this.og(t);s=As.Kh(As.dg,this,{source:t,pg:i}),this.rg.set(t,s)}return s}mg(t){return this.rg.has(t)}gg(t){const s=this.rg.get(t);s&&s.$h(),this.rg.delete(t)}async yg(t){return this.ug(t)}}}{const Ls=self.Os;Ls.dg=class{constructor(t,s){this.Mg=t,this.wg=s.source,this.Sg=[],this.Tg=new Map,this.bg=!1,this.xg=!1,this.vg=null;const i=s.pg.Cg;for(let t=0,s=i.length;t<s;++t){const e=i[t],h=Ls.Kh(Ls.Ig,this,{index:t,tag:e.tag,source:e.source,width:e.width,height:e.height});this.Sg.push(h),e.tag&&this.Tg.set(e.tag.toLowerCase(),h)}}$h(){for(const t of this.Sg)t.$h();Ls.Nr(this.Sg),this.Tg.clear(),this.Mg=null,this.wg=null}Gg(){return this.bg}Eg(){return this.xg}_g(){return this.vg||(this.vg=this.Ng()),this.vg}async Ng(){if(!this.bg){this.bg=!0,this.xg=!0;const t=await this.Mg.yg(this.wg);if(this.Mg){const i=t.Cg;for(let t=0,s=Math.min(i.length,this.Sg.length);t<s;++t){const e=i[t].Dg;this.Sg[t].Ag(e)}this.xg=!1}}}ig(t){return(t=Math.floor(t))<0||t>=this.Sg.length?null:this.Sg[t]}eg(t){return this.Tg.get(t.toLowerCase())||null}}}{const Os=self.Os;Os.Ig=class{constructor(t,s){this.Lg=t,this.wg=s.source||null,this.Og=s.index,this.Rg=s.tag,this.Om=s.width,this.Rm=s.height,this.Pg=null}$h(){this.Om=0,this.Rm=0,this.Lg=null}kg(){return this.wg}Yp(){return this.Om}nm(){return this.Rm}Ag(t){this.Pg=t}hg(){return this.Pg}}}{let e=function(t,s,i,e){const h=js;vh.F(ks,i,s),vh.F(Fs,t,s),vh.At(h,ks,Fs),vh.normalize(h,h),e.set(h[0],h[1],h[2],vh.Dt(t,h))},r=function(t,s,i,e,h,n,r){const o=r.x,a=r.y,u=r.z,l=r.w,c=r.Fg,f=r.jg,d=r.zg,p=1-c,m=1-f,g=1-d,y=o*t*c+o*e*p+a*s*f+a*h*m+u*i*d+u*n*g;if(l<=y)return!0;const M=o*e*c+o*t*p+a*h*f+a*s*m+u*n*d+u*i*g;return l<M},h=function(t,s,i,e){const h=e.x,n=e.y,r=e.z,o=e.w,a=h*t+n*s+r*i;return o<=a};e,r,h;const Rs=self.Os,Ps=self.ys,vh=Ps.Cs,Uh=Ps.Is,xh=Ps.Ts,ks=vh.create(),Fs=vh.create(),js=vh.create(),zs=Uh.create(),Bs=xh.create(),Us=vh.create(),Ws=vh.create(),Qs=vh.create(),Js=vh.create(),Vs=vh.create(),Ys=vh.create(),Hs=vh.create(),qs=vh.create(),Zs=Uh.I(0,0,1,1);Rs.Bg={Ug(t,s,i,e,h,n,r){let o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],u=e[2]*t+e[6]*s+e[10]*i+e[14],l=e[3]*t+e[7]*s+e[11]*i+e[15],c=h[0]*o+h[4]*a+h[8]*u+h[12]*l,f=h[1]*o+h[5]*a+h[9]*u+h[13]*l,d=h[2]*o+h[6]*a+h[10]*u+h[14]*l,p=h[3]*o+h[7]*a+h[11]*u+h[15]*l;return 0!=p&&(f*=p=1/p,d*=p,r[0]=(.5*(c*=p)+.5)*n[2]+n[0],r[1]=(.5*f+.5)*n[3]+n[1],r[2]=.5*(1+d),!0)},Wg(t,s,i,e,h,n,r){const o=Bs,a=zs;return xh.multiply(o,h,e),null!==xh._(o,o)&&(a[0]=(t-n[0])/n[2]*2-1,a[1]=(s-n[1])/n[3]*2-1,a[2]=2*i-1,a[3]=1,Uh.kt(a,a,o),0!==a[3])&&(a[3]=1/a[3],r[0]=a[0]*a[3],r[1]=a[1]*a[3],r[2]=a[2]*a[3],!0)},Qg(t,s,i,e,h,n,r){const o=ks,a=Fs;if(!Rs.Bg.Wg(t,s,0,e,h,n,o))return!1;if(!Rs.Bg.Wg(t,s,1,e,h,n,a))return!1;let u=Fs,l=(vh.F(u,a,o),js),c=(vh.set(l,0,0,1),-i),f=vh.Dt(l,u),d=0;if(0===f){const p=vh.Dt(l,o)+c;if(0!==p)return!1}else if((d=-(vh.Dt(o,l)+c)/f)<0)return!1;return vh.It(r,o,u,d),!0}};class Xs{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Fg=NaN,this.jg=NaN,this.zg=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.Fg=0<t?1:0,this.jg=0<s?1:0,this.zg=0<i?1:0}}Rs.Bg.Jg=class{constructor(){this.Vg=new Xs,this.Yg=new Xs,this.Hg=new Xs,this.qg=new Xs,this.Zg=new Xs,this.Xg=new Xs}Kg(t,s){const i=Zs;Rs.Bg.Wg(0,1,0,t,s,i,Us),Rs.Bg.Wg(1,1,0,t,s,i,Ws),Rs.Bg.Wg(0,0,0,t,s,i,Qs),Rs.Bg.Wg(1,0,0,t,s,i,Js),Rs.Bg.Wg(0,1,1,t,s,i,Vs),Rs.Bg.Wg(1,1,1,t,s,i,Ys),Rs.Bg.Wg(0,0,1,t,s,i,Hs),Rs.Bg.Wg(1,0,1,t,s,i,qs),e(Qs,Us,Vs,this.Vg),e(Us,Ws,Ys,this.Yg),e(Ws,Js,qs,this.Hg),e(Js,Qs,Hs,this.qg),e(Hs,Vs,Ys,this.Xg),e(Js,Ws,Us,this.Zg)}$g(t,s,i,e,h,n){return r(t,s,i,e,h,n,this.Vg)&&r(t,s,i,e,h,n,this.Yg)&&r(t,s,i,e,h,n,this.Hg)&&r(t,s,i,e,h,n,this.qg)&&r(t,s,i,e,h,n,this.Zg)&&r(t,s,i,e,h,n,this.Xg)}ty(t,s,i){return!h(t,s,i,this.Zg)}}}{const Ks=self.Os,$s=self.ys,vh=$s.Cs,Uh=$s.Is,xh=$s.Ts,ti=xh.create(),si=vh.I(0,0,0),ii=vh.I(0,0,0),ei=vh.I(0,0,0),hi=vh.I(0,1,0),ni=(Uh.I(0,0,0,0),new Ks.Uu),ri=new Ks.Rect,oi=new Ks.Uu(0,0,1,0,1,1,0,1),ai={iy:1,ey:1e4},ui=xh.I(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Ks.Bg.hy=class{constructor(t){t=Object.assign({},ai,t),this.Om=0,this.Rm=0,this.ny=Ks.un(45),this.oy=Math.tan(this.ny/2),this.uy=xh.create(),this.ly=xh.create(),this.my=!1,this.gy=t.iy,this.yy=t.ey,this.My=[],this.wy=new Map,this.Sy=null,this.Ty=null,this.by=null,this.xy=null,this.vy=null,this.Cy=null,this.Iy=null,this.Gy=null,this.Ey=null,this._y=null,this.Ny=null,this.Dy=null,this.Ay=new Map,this.Ly=null,this.Oy=[],this.Ry=new Map,this.Py=0,this.ky=0,this.Fy=1,this.jy=[this.Fy],this.zy=1,this.By=[this.zy],this.Uy=.5,this.Wy=[this.Uy],this.Qy=0,this.Jy=!0,this.Vy=!1}Yy(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}Hy(){this.Py=0,this.ky=0,this.Sy=null,this.Ty=null,this.by=null,this.xy=null,this.vy=null,this.Cy=null,this.Iy=null,this.Gy=null,this.Ey=null,this._y=null,this.Ny=null,this.Dy=null,this.qy()}Zy(){this.Hy(),this.Ly=null}Xy(){for(const t of this.My)t.$h();this.Hy()}Yp(){return this.Om}nm(){return this.Rm}Ky(t){return this.$y()?100:t/(2*this.tM())}sM(t){if(this.$y()){const s=t/(2*this.tM());return s/this.Ky(t)}return 1}iM(t){this.gy=t}eM(){return this.gy}hM(t){this.yy=t}nM(){return this.yy}rM(t){this.ny=t,this.oy=Math.tan(this.ny/2)}oM(){return this.ny}tM(){return this.oy}aM(){this.my=!1}uM(){this.my=!0}$y(){return!this.my}lM(){return this.my}cM(t,s,i=.5,e=.5){const h=this.eM(),n=this.nM(),r=this.oM();if(.5===i&&.5===e)this.fM()?xh.Mt(t,r,s,h,n):xh.perspective(t,r,s,h,n);else{const o=2*(i=1-i)-2,a=2*i,u=2*e-2,l=2*e,c=this.tM()*h,f=c*s;xh.gt(t,o*f,a*f,u*c,l*c,h,n),this.fM()&&xh.mul(t,ui,t)}}dM(t,s,i,e=1){const h=self.devicePixelRatio,n=2*this.Ky(i)*h*this.tM()/i,r=s*n/(2*h*e),o=i*n/(2*h*e),a=-r,u=r,l=-o,c=o;this.fM()?xh.bt(t,a,u,l,c,this.eM(),this.nM()):xh.ortho(t,a,u,l,c,this.eM(),this.nM())}pM(t,s,i,e,h,n=1){let r=1;this.$y()&&(r=200*this.tM()/h);const o=ei,a=(vh.set(o,r,-r,1),si),u=ii;vh.multiply(a,s,o),vh.multiply(u,i,o),xh.xt(t,a,u,e||hi),o[2]=n,xh.scale(t,t,o)}mM(t,s,i,e,h,n,r,o){return vh.set(si,t,s,i),vh.set(ii,e,h,n),this.pM(ti,si,ii,hi,r,o),ti}gM(t){this.My.push(t),this.wy.set(t.zc(),t)}yM(t){const s=this.My.indexOf(t);-1!==s&&this.My.splice(s,1),this.wy.delete(t.zc())}qy(){Ks.Nr(this.My),this.wy.clear()}MM(t){return this.wy.get(t)||null}wM(){return this.Sy}SM(){this.TM(this.Sy)}bM(){return this.Ty}xM(){this.TM(this.Ty)}vM(){this.TM(this.by)}CM(){this.TM(this.xy)}IM(){this.TM(this.vy)}GM(){this.TM(this.Cy)}EM(){this.TM(this.Iy)}_M(){this.TM(this.Gy)}NM(){this.TM(this.Ey)}DM(){this.TM(this._y)}AM(){this.TM(this.Ny)}LM(){this.TM(this.Dy)}OM(t){this.Ly=t}RM(){return this.Ly}PM(t,s,i,e){let h=Ks.Bg.FM.kM(t,s,i,e),n=this.Ay.get(h);return n||(n=Ks.Kh(Ks.Bg.FM,this,t,s,i,e),this.Ay.set(h,n)),n.jM(),n}zM(t){t.BM(),0===t.UM()&&(this.Ly===t&&(this.Ly=null),this.Ay.delete(t.WM()),t.$h())}QM(t){Ks.Nr(this.Oy),this.Ry.clear();let s=0;for(const i of t){const e=i[0],h=i[1],n=i[2];this.Oy.push([h,n]),this.Ry.set(e,{number:s,JM:h,VM:n}),s++}}YM(t){return this.Oy[t]}HM(t){return this.YM(t)[0]}qM(t){return this.YM(t)[1]}ZM(t){const s=this.Ry.get(t);if(void 0===s)throw new Error("invalid blend name");return s}XM(t){const s=this.Ry.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}KM(t){this.Py=t}$M(){return this.Py}iw(t){this.ky=t,this.Ly=null}ew(){return this.ky}lm(t,s,i,e){const h=Ks.pn(t,s,i,e),n=Math.sin(h),r=Math.cos(h),o=.5*this.Fy,a=n*o,u=r*o,l=this.zy;2===l?this.hw(t,s,0,i,e,0,a,u):1===l?this.rw(t,s,0,i,e,0,a,u):this.ow(t,s,0,i,e,0,a,u)}aw(t,s,i,e,h,n){const r=Ks.pn(t,s,e,h),o=Math.sin(r),a=Math.cos(r),u=.5*this.Fy,l=o*u,c=a*u,f=this.zy;2===f?this.hw(t,s,i,e,h,n,l,c):1===f?this.rw(t,s,i,e,h,n,l,c):this.ow(t,s,i,e,h,n,l,c)}hw(t,s,i,e,h,n,r,o){const a=this.Uy,u=t+a-o,l=s+a-r,c=e+a+o,f=h+a+r,d=2*o,p=2*r,m=u+r,g=l-o,y=u-r+d,M=l+o+p,w=c+r,S=f-o,T=c-r-d,b=f+o-p;this.uw(m,g,i,w,S,n,T,b,n,y,M,i,oi)}rw(t,s,i,e,h,n,r,o){const a=this.Uy,u=t+a-o,l=s+a-r,c=e+a+o,f=h+a+r,d=u+r,p=l-o,m=u-r,g=l+o,y=c+r,M=f-o,w=c-r,S=f+o;this.uw(d,p,i,y,M,n,w,S,n,m,g,i,oi)}ow(t,s,i,e,h,n,r,o){const a=this.Uy,u=t+a,l=s+a,c=e+a,f=h+a,d=u+r,p=l-o,m=u-r,g=l+o,y=c+r,M=f-o,w=c-r,S=f+o;this.uw(d,p,i,y,M,n,w,S,n,m,g,i,oi)}lw(t,s,i,e,h,n){const r=Ks.pn(t,s,i,e),o=Math.sin(r),a=Math.cos(r),u=.5*this.Fy,l=o*u,c=a*u,f=this.zy;2===f?this.cw(t,s,i,e,l,c,h,n):1===f?this.fw(t,s,i,e,l,c,h,n):this.dw(t,s,i,e,l,c,h,n)}cw(t,s,i,e,h,n,r,o){const a=this.Uy,u=t+a-n,l=s+a-h,c=i+a+n,f=e+a+h,d=2*n,p=2*h,m=u+h,g=l-n,y=u-h+d,M=l+n+p,w=c+h,S=f-n,T=c-h-d,b=f+n-p;ni.set(m,g,w,S,T,b,y,M),ri.set(r,0,o,0),this.pw(ni,ri)}fw(t,s,i,e,h,n,r,o){const a=this.Uy,u=t+a-n,l=s+a-h,c=i+a+n,f=e+a+h,d=u+h,p=l-n,m=u-h,g=l+n,y=c+h,M=f-n,w=c-h,S=f+n;ni.set(d,p,y,M,w,S,m,g),ri.set(r,0,o,0),this.pw(ni,ri)}dw(t,s,i,e,h,n,r,o){const a=this.Uy,u=t+a,l=s+a,c=i+a,f=e+a,d=u+h,p=l-n,m=u-h,g=l+n,y=c+h,M=f-n,w=c-h,S=f+n;ni.set(d,p,y,M,w,S,m,g),ri.set(r,0,o,0),this.pw(ni,ri)}mw(t,s,i,e){const h=.5*this.Fy,n=this.zy;2===n?this.gw(t,s,i,e,h):1===n?this.yw(t,s,i,e,h):this.Mw(t,s,i,e,h)}gw(t,s,i,e,h){this.hw(t,s,0,i,s,0,0,h),this.hw(i,s,0,i,e,0,h,0),this.hw(i,e,0,t,e,0,0,-h),this.hw(t,e,0,t,s,0,-h,0)}yw(t,s,i,e,h){this.rw(t,s,0,i,s,0,0,h),this.rw(i,s,0,i,e,0,h,0),this.rw(i,e,0,t,e,0,0,-h),this.rw(t,e,0,t,s,0,-h,0)}Mw(t,s,i,e,h){this.ow(t,s,0,i,s,0,0,h),this.ow(i,s,0,i,e,0,h,0),this.ow(i,e,0,t,e,0,0,-h),this.ow(t,e,0,t,s,0,-h,0)}ww(t){this.mw(t.fu(),t.du(),t.pu(),t.mu())}Sw(t){const s=Ks.pn(t.Jn(),t.Vn(),t.Yn(),t.Hn()),i=Math.sin(s),e=Math.cos(s),h=.5*this.Fy,n=i*h,r=e*h,o=this.zy;2===o?this.Tw(t,n,r):1===o?this.bw(t,n,r):this.xw(t,n,r)}Tw(t,s,i){this.hw(t.Jn(),t.Vn(),0,t.Yn(),t.Hn(),0,s,i),this.hw(t.Yn(),t.Hn(),0,t.qn(),t.Zn(),0,i,-s),this.hw(t.qn(),t.Zn(),0,t.Xn(),t.Kn(),0,-s,-i),this.hw(t.Xn(),t.Kn(),0,t.Jn(),t.Vn(),0,-i,s)}bw(t,s,i){this.rw(t.Jn(),t.Vn(),0,t.Yn(),t.Hn(),0,s,i),this.rw(t.Yn(),t.Hn(),0,t.qn(),t.Zn(),0,i,-s),this.rw(t.qn(),t.Zn(),0,t.Xn(),t.Kn(),0,-s,-i),this.rw(t.Xn(),t.Kn(),0,t.Jn(),t.Vn(),0,-i,s)}xw(t,s,i){this.ow(t.Jn(),t.Vn(),0,t.Yn(),t.Hn(),0,s,i),this.ow(t.Yn(),t.Hn(),0,t.qn(),t.Zn(),0,i,-s),this.ow(t.qn(),t.Zn(),0,t.Xn(),t.Kn(),0,-s,-i),this.ow(t.Xn(),t.Kn(),0,t.Jn(),t.Vn(),0,-i,s)}Cw(t){this.Fy=t,this.jy[this.jy.length-1]=t}Iw(){return this.Fy}Gw(t){if(100<=this.jy.length)throw new Error("pushed too many line widths - check push/pop pairs");this.jy.push(t),this.Fy=t}Ew(){if(this.jy.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.jy.pop(),this.Fy=this.jy.at(-1)}_w(){this.zy=0,this.By[this.By.length-1]=0}Nw(){this.zy=1,this.By[this.By.length-1]=0}Dw(){this.zy=2,this.By[this.By.length-1]=0}Aw(t){if("butt"===t)this.Lw();else if("square"===t)this.Ow();else{if("zag"!==t)throw new Error("invalid line cap");this.Rw()}}Lw(){if(100<=this.By.length)throw new Error("pushed too many line caps - check push/pop pairs");this.By.push(0),this.zy=0}Ow(){if(100<=this.By.length)throw new Error("pushed too many line caps - check push/pop pairs");this.By.push(1),this.zy=1}Rw(){if(100<=this.By.length)throw new Error("pushed too many line caps - check push/pop pairs");this.By.push(2),this.zy=2}Pw(){if(this.By.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.By.pop(),this.zy=this.By.at(-1)}kw(t){this.Uy=t,this.Wy[this.Wy.length-1]=t}Fw(){return this.Uy}jw(t){if(100<=this.Wy.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.Wy.push(t),this.Uy=t}zw(){if(this.Wy.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.Wy.pop(),this.Uy=this.Wy.at(-1)}Bw(s){const t=s.length/2;if(t<3)throw new Error("need at least 3 points");const i=t-2,e=i-1,h=s[0],n=s[1];for(let t=0;t<i;t+=2){const r=2*t,o=s[2+r],a=s[3+r],u=s[4+r],l=s[5+r];if(t===e)this.Uw(h,n,o,a,u,l,u,l);else{const c=s[6+r],f=s[7+r];this.Uw(h,n,o,a,u,l,c,f)}}}Ww(){return 3}Qw(){this.Jw(!0),this.Qy++}Vw(){return this.Qy}Yw(){this.Qy++}Hw(t){this.Jy=!!t}qw(){return this.Jy}Zw(t){this.Vy=!!t}Xw(){return this.Vy}Kw(){return!1}fM(){return!1}$w(){}tS(){}sS(){}iS(){return this.$w()+this.tS()+this.sS()}eS(){return Ks.Kh(Ks.Bg.hS,this)}}}{const li=self.Os;li.Bg.nS=class{constructor(t,s){this.hn=s.name,this.rS=t,this.oS=s.extendBoxHorizontal||0,this.aS=s.extendBoxVertical||0,this.uS=!!s.crossSampling,this.lS=!!s.mustPreDraw,this.cS=!!s.preservesOpaqueness,this.fS=!!s.supports3dDirectRendering,this.dS=!!s.animated,this.pS=!!s.blendsBackground,this.mS=!!s.usesDepth,this.gS=!1,this.yS=this.uS||this.pS||0!==this.oS||0!==this.aS}$h(){this.rS=null}MS(){return this.rS}zc(){return this.hn}wS(){return 0!==this.oS||0!==this.aS}SS(){return this.oS}TS(){return this.aS}bS(){return this.uS}xS(){return this.lS}vS(){return this.cS}CS(){return this.fS}IS(){return this.dS}GS(){return this.pS}ES(){return this.mS}_S(){return this.gS}NS(){return this.yS}DS(){return!1}}}{const ci=self.Os;ci.Bg.FM=class{constructor(t,s,i,e,h){this.rS=t,this.ed=0,this.AS=null,this.LS="",this.OS=i,this.RS=ci.Kh(ci.Oo),this.RS.set(e),this.PS=h,"string"==typeof s?this.LS=s:(this.AS=s,this.LS=this.AS.zc())}$h(){if(0<this.ed)throw new Error("releasing state group still in use");this.rS=null,this.AS=null,this.LS=""}kS(){const t=this.rS;t.TM(this.AS),t.FS(this.OS),t.jS(this.RS),t.iw(this.PS),t.OM(this)}WM(){return ci.Bg.FM.kM(this.LS,this.OS,this.RS,this.PS)}jM(){++this.ed}BM(){--this.ed}UM(){return this.ed}zS(){this.AS=null}BS(t){if(this.AS=t.MM(this.LS),!this.AS)throw new Error("failed to restore shader program")}static kM(t,s,i,e){const h="string"==typeof t?t:t.zc();return h+","+s+","+i.Ho()+","+i.qo()+","+i.Zo()+","+i.Xo()+","+e}}}{let e=function(t,s,i){const e=i.Jn(),h=i.Vn(),n=i.Yn()-e,r=i.Hn()-h,o=i.Xn()-e,a=i.Kn()-h,u=n*t,l=r*t,c=o*s,f=a*s;return[e+u+c,h+l+f]};e;const I=self.Os,fi=I.Kh(I.Uu);I.Bg.US=class{constructor(t,s,i){this.WS=t,this.QS=s,this.JS=i,this.Wa=NaN,this.Qa=NaN,this.PS=NaN,this.VS=NaN,this.YS=NaN,this.Wa=0,this.Qa=0,this.PS=0,this.VS=0,this.YS=0}HS(t,s,i,e){this.Wa=t,this.Qa=s,this.VS=i,this.YS=e}qS(){return this.Wa}ZS(t){this.Wa!==t&&(this.Wa=t,this.WS.XS())}KS(){return this.Qa}$S(t){this.Qa!==t&&(this.Qa=t,this.WS.XS())}tT(){return this.PS}sT(t){this.PS!==t&&(this.PS=Math.max(t,0),this.WS.XS())}iT(){return this.VS}eT(t){this.VS=t}hT(){return this.YS}nT(t){this.YS=t}rT(t,s,i){[this.Wa,this.Qa]=e(t.Wa,t.Qa,s),this.PS=t.PS,this.VS=I.Lt(i.fu(),i.pu(),t.VS),this.YS=I.Lt(i.du(),i.mu(),t.YS)}oT(t,s,i){[this.Wa,this.Qa]=e(t.Wa,t.Qa,s),this.PS=t.PS,[this.VS,this.YS]=e(t.VS,t.YS,i)}aT(){return{x:this.qS(),y:this.KS(),z:this.tT(),u:this.iT(),v:this.hT()}}uT(t){this.ZS(t.x),this.$S(t.y),t.hasOwnProperty("z")&&this.sT(t.z),this.eT(t.u),this.nT(t.v)}lT(){return this.WS}cT(){return this.QS}fT(){return this.JS}},I.Bg.dT=class{constructor(i,t,s){if(i<2||t<2)throw new Error("invalid mesh size");this.pT=i,this.mT=t,this.gT=s||null,this.yT=[],this.MT=0,this.wT=0,this.ST=1,this.TT=1,this.bT=0,this.xT=!1;const e=i-1,h=t-1;for(let s=0;s<t;++s){const n=[];for(let t=0;t<i;++t){const r=I.Kh(I.Bg.US,this,t,s),o=t/e,a=s/h;r.HS(o,a,o,a),n.push(r)}this.yT.push(n)}}$h(){I.Nr(this.yT)}vT(){return this.pT}CT(){return this.mT}IT(){return this.gT}GT(){return this.yT}XS(){this.xT=!0}ET(){if(this.xT){let t=1/0,s=1/0,i=-1/0,e=-1/0,h=0;for(const n of this.yT)for(const r of n){const o=r.qS(),a=r.KS();t=Math.min(t,o),s=Math.min(s,a),i=Math.max(i,o),e=Math.max(e,a),h=Math.max(h,r.tT())}this.MT=t,this.wT=s,this.ST=i,this.TT=e,this.bT=h,this.xT=!1}}_T(){return this.ET(),this.MT}NT(){return this.ET(),this.wT}DT(){return this.ET(),this.ST}AT(){return this.ET(),this.TT}LT(){return this.ET(),this.bT}OT(){return 0<this.LT()}RT(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.pT||s<0||s>=this.mT?null:this.yT[s][t]}PT(t,i,e){const h=e instanceof I.Rect;if(t.vT()!==this.vT()||t.CT()!==this.CT())throw new Error("source mesh wrong size");const n=t.yT,r=this.yT;for(let t=0,s=r.length;t<s;++t){const o=n[t],a=r[t];for(let t=0,s=a.length;t<s;++t){const u=o[t],l=a[t];h?l.rT(u,i,e):l.oT(u,i,e)}}}kT(n){let r=this.yT,o=r[0];for(let t=1,s=r.length;t<s;++t){let i=r[t],e=o[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const a=o[t],u=i[t];fi.set(e.iT(),e.hT(),a.iT(),a.hT(),u.iT(),u.hT(),h.iT(),h.hT()),n.uw(e.qS(),e.KS(),e.tT(),a.qS(),a.KS(),a.tT(),u.qS(),u.KS(),u.tT(),h.qS(),h.KS(),h.tT(),fi),e=a,h=u}o=i}}FT(o,a){a=a||((t,s,i)=>[t,s,i]);let t=this.yT,u=t[0];for(let n=1,r=t.length;n<r;++n){let i=t[n],e=u[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const l=u[t],c=i[t],[f,d,p]=a(e.qS(),e.KS(),e.tT()),[m,g,y]=a(l.qS(),l.KS(),l.tT()),[M,w,S]=a(c.qS(),c.KS(),c.tT()),[T,b,x]=a(h.qS(),h.KS(),h.tT());o.aw(f,d,p,m,g,y),o.aw(f,d,p,M,w,S),o.aw(f,d,p,T,b,x),t===s-1&&o.aw(m,g,y,M,w,S),n===r-1&&o.aw(T,b,x,M,w,S),e=l,h=c}u=i}}jT(t){let i=.99999999,e=t.Gl(),h=[],n=this.vT()-1,r=this.CT()-1,o=1/n,a=1/r,u=n-1,l=r-1,c=e[0],f=e[1],d=I.rn(Math.floor(c*n),0,u),p=I.rn(Math.floor(f*r),0,l),m=!0,g=0,y=0,M=0,w=-1,S=()=>{c=I.rn(I.Lt(c,g,M),0,1),f=I.rn(I.Lt(f,y,M),0,1),h.push(c,f)};for(let t=0,s=e.length;t<s;t+=2){c=e[t],f=e[t+1],h.push(c,f),d=I.rn(Math.floor(c*n),0,u),p=I.rn(Math.floor(f*r),0,l);const T=(t+2)%s;for(g=e[T],y=e[1+T],w=-1;;){if(1e6<h.length)throw new Error("Too many mesh poly points");const b=d*o,x=p*a,v=(d+1)*o,C=(p+1)*a;if(m=I.er(c,f,b,x,v,x,v,C),0!==w&&0<=(M=I.ir(c,f,g,y,b,x,v,C,-.001))&&M<=i)S(),m=!m,w=0;else if(0<p&&2!==w&&0<=(M=I.ir(c,f,g,y,b,x,v,x,.001))&&M<=i)S(),p--,m=!1,w=4;else if(d<u&&3!==w&&0<=(M=I.ir(c,f,g,y,v,x,v,C,.001))&&M<=i)S(),d++,m=!1,w=1;else if(0<d&&1!==w&&0<=(M=I.ir(c,f,g,y,b,x,b,C,.001))&&M<=i)S(),d--,m=!0,w=3;else{if(!(p<l&&4!==w&&0<=(M=I.ir(c,f,g,y,b,C,v,C,.001))&&M<=i))break;S(),p++,m=!0,w=2}}}return I.Kh(I.bl,h)}zT(t,s){const i=this.BT(t);this.UT(i),s._l(i)}BT(t){const i=[],e=t.Gl();for(let t=0,s=e.length;t<s;t+=2){const h=e[t],n=e[t+1],[r,o]=this.WT(h,n);i.push(r,o)}return i}WT(t,s){const i=this.vT()-1,e=this.CT()-1,h=1/i,n=1/e,r=I.rn(Math.floor(t*i),0,i-1),o=I.rn(Math.floor(s*e),0,e-1),a=r*h,u=o*n,l=(r+1)*h,c=(o+1)*n,f=this.RT(r,o),d=this.RT(r+1,o+1),p=I.er(t,s,a,u,l,u,l,c),m=p?a+h:a,g=p?u:u+n,y=this.RT(r+(p?1:0),o+(p?0:1)),[M,w,S]=I.hr(t,s,a,u,m,g,l,c);return I.nr(M,w,S,f.qS(),f.KS(),f.tT(),y.qS(),y.KS(),y.tT(),d.qS(),d.KS(),d.tT())}UT(i){let e=[],h=i[0],n=i[1],r=h-i.at(-2),o=n-i.at(-1);for(let t=0,s=i.length;t<s;t+=2){const a=(t+2)%s,u=i[a],l=i[1+a],c=u-h,f=l-n,d=Math.abs(c)<1e-7&&Math.abs(r)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(c)===Math.sign(r);(!d&&!p&&.001<Math.abs(c/r-f/o)||0==c&&0==f)&&e.push(h,n),h=u,n=l,r=c,o=f}6<=e.length&&e.length<i.length&&I.Or(i,e)}aT(){return{cols:this.vT(),rows:this.CT(),points:this.yT.map(t=>t.map(t=>t.aT()))}}uT(t){const i=this.vT(),e=this.CT();if(t.cols!==i||t.rows!==e)throw new Error("mesh data wrong size");const h=t.points;for(let s=0;s<e;++s){const n=h[s];for(let t=0;t<i;++t){const r=this.RT(t,s);r.uT(n[t])}}}}}{let d=function(t,s){let i,e,h,n;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,h=s.RGBA,n=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,h=s.RGB,n=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,h=s.RGBA,n=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,h=s.RGBA,n=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,h=s.RGB,n=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{QT:i,JT:e,format:h,type:n}};d;const di=self.Os,pi=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),mi=new Set(["nearest","bilinear","trilinear"]),gi=new Set(["default","low","high"]),yi=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Mi={VT:"clamp-to-edge",YT:"clamp-to-edge",HT:"trilinear",qT:0,ZT:"rgba8",XT:!0,KT:"default",premultiplyAlpha:!0,$T:!1,width:-1,height:-1},wi={premultiplyAlpha:!0,flipY:!1},Si=new Set;di.Bg.t2=class{constructor(t){this.rS=t,this.s2=null,this.Om=0,this.Rm=0,this.i2=!0,this.e2="clamp-to-edge",this.h2="clamp-to-edge",this.n2="trilinear",this.o2=0,this.a2="rgba8",this.u2=!1,this.l2="default",this.ed=0}c2(s,t){if(!("undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&s instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&s instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas||s instanceof ImageData||s instanceof ArrayBuffer||null===s))throw new Error("invalid texture source");if(t=Object.assign({},Mi,t),this.s2)throw new Error("already created texture");if(this.e2=t.VT,this.h2=t.YT,this.n2=t.HT,this.o2=t.qT,this.a2=t.ZT,this.u2=!!t.XT&&this.rS.qw(),this.l2=t.KT,!yi.has(this.e2)||!yi.has(this.h2))throw new Error("invalid wrap mode");if(!mi.has(this.n2))throw new Error("invalid sampling");if(!pi.has(this.a2))throw new Error("invalid pixel format");if(!gi.has(this.l2))throw new Error("invalid mipmap quality");if(this.i2=!0,s instanceof ArrayBuffer||null===s||t.$T){if(this.Om=t.width,this.Rm=t.height,s instanceof ArrayBuffer&&s.byteLength!==this.Om*this.Rm*4)throw new Error("ArrayBuffer wrong size")}else this.Om=s.width,this.Rm=s.height;if(this.Om<=0||this.Rm<=0)throw new Error("invalid texture data size");if(t.$T){const o=di.bo(this.Om,this.Rm),a=o.getContext("2d");a.drawImage(s,0,0,this.Om,this.Rm),s=o}const i=di.Gn(this.Om)&&di.Gn(this.Rm),e=this.rS.f2();if(this.Om>e||this.Rm>e)throw new Error("texture data exceeds maximum texture size");const h=this.rS.d2(),n=this.rS.m2(),r=(this.s2=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.s2),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1),d(this.a2,h));if(this.rS.g2()||i||!this.M2())if(2<=n){let t;t=this.u2?Math.floor(Math.log2(Math.max(this.Om,this.Rm))+1):1,h.texStorage2D(h.TEXTURE_2D,t,r.QT,this.Om,this.Rm),s instanceof ArrayBuffer?h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.Om,this.Rm,r.format,r.type,new Uint8Array(s)):null!==s&&h.texSubImage2D(h.TEXTURE_2D,0,0,0,r.format,r.type,s)}else s instanceof ArrayBuffer?h.texImage2D(h.TEXTURE_2D,0,r.JT,this.Om,this.Rm,0,r.format,r.type,new Uint8Array(s)):null===s?h.texImage2D(h.TEXTURE_2D,0,r.JT,this.Om,this.Rm,0,r.format,r.type,null):h.texImage2D(h.TEXTURE_2D,0,r.JT,r.format,r.type,s);else{if(null===s)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((s=s instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(s),this.Om,this.Rm):s)instanceof ImageData){const c=di.bo(this.Om,this.Rm),f=c.getContext("2d");f.putImageData(s,0,0),s=c}const u=di.bo(di.En(this.Om),di.En(this.Rm)),l=u.getContext("2d");l.imageSmoothingEnabled="nearest"!==this.n2,l.drawImage(s,0,0,this.Om,this.Rm,0,0,u.width,u.height),h.texImage2D(h.TEXTURE_2D,0,r.JT,r.format,r.type,u)}null!==s&&this.w2(h),h.bindTexture(h.TEXTURE_2D,null),this.rS.S2(),this.ed=1,Si.add(this)}T2(t,s,i){if(i=Object.assign({},Mi,i),this.s2)throw new Error("already created texture");if(this.e2=i.VT,this.h2=i.YT,this.n2=i.HT,this.a2=i.ZT,this.u2=!!i.XT&&this.rS.qw(),this.l2=i.KT,!yi.has(this.e2)||!yi.has(this.h2))throw new Error("invalid wrap mode");if(!mi.has(this.n2))throw new Error("invalid sampling");if(!pi.has(this.a2))throw new Error("invalid pixel format");if(!gi.has(this.l2))throw new Error("invalid mipmap quality");this.i2=!1,this.Om=Math.floor(t),this.Rm=Math.floor(s);const e=di.Gn(this.Om)&&di.Gn(this.Rm),h=this.rS.f2();if(this.Om<=0||this.Rm<=0)throw new Error("invalid texture size");if(this.Om>h||this.Rm>h)throw new Error("texture exceeds maximum texture size");if(!this.rS.g2()&&this.M2()&&!e)throw new Error("non-power-of-two tiled textures not supported");const n=this.rS.d2(),r=this.rS.m2(),o=(this.s2=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.s2),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),d(this.a2,n)),a=2<=r?o.QT:o.JT;n.texImage2D(n.TEXTURE_2D,0,a,this.Om,this.Rm,0,o.format,o.type,null),this.w2(n),n.bindTexture(n.TEXTURE_2D,null),this.rS.S2(),this.ed=1,Si.add(this)}b2(t){if("default"===this.l2)return this.i2?t.NICEST:t.FASTEST;if("low"===this.l2)return t.FASTEST;if("high"===this.l2)return t.NICEST;throw new Error("invalid mipmap quality")}M2(){return"clamp-to-edge"!==this.e2||"clamp-to-edge"!==this.h2}v2(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}w2(t){const s=di.Gn(this.Om)&&di.Gn(this.Rm);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.v2(t,this.e2)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.v2(t,this.h2)),"nearest"===this.n2)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.u2=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.rS.g2())&&this.u2){t.hint(t.GENERATE_MIPMAP_HINT,this.b2(t)),t.generateMipmap(t.TEXTURE_2D);const e="trilinear"===this.n2&&!this.rS.Xw();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.u2=!1;const i=this.rS.C2();i&&0<this.o2&&"nearest"!==this.n2&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.o2,this.rS.I2()))}G2(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.s2||this.ed<=0)throw new Error("texture not created");if(this.i2)throw new Error("cannot update static texture");s=Object.assign({},wi,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,h=this.rS.m2(),n=this.rS.d2(),r=(n.bindTexture(n.TEXTURE_2D,this.s2),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!!s.flipY),d(this.a2,n)),o=2<=h?r.QT:r.JT;try{if(this.Om===i&&this.Rm===e){const a=di.Gn(this.Om)&&di.Gn(this.Rm);n.texSubImage2D(n.TEXTURE_2D,0,0,0,r.format,r.type,t),(a||this.rS.g2())&&this.u2&&(n.hint(n.GENERATE_MIPMAP_HINT,this.b2(n)),n.generateMipmap(n.TEXTURE_2D))}else{this.Om=i,this.Rm=e;const u=di.Gn(this.Om)&&di.Gn(this.Rm);if(!this.rS.g2()&&this.M2()&&!u)throw new Error("non-power-of-two tiled textures not supported");n.texImage2D(n.TEXTURE_2D,0,o,r.format,r.type,t),(u||this.rS.g2())&&this.u2&&(n.hint(n.GENERATE_MIPMAP_HINT,this.b2(n)),n.generateMipmap(n.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}n.bindTexture(n.TEXTURE_2D,null),this.rS.S2()}E2(){if(0<this.ed)throw new Error("texture still has references");if(!this.s2)throw new Error("already deleted texture");Si.delete(this);const t=this.rS.d2();t.deleteTexture(this.s2),this.s2=null}_2(){return!!this.s2}N2(){return this.s2}MS(){return this.rS}D2(){this.ed++}A2(){if(this.ed<=0)throw new Error("no more references");this.ed--}L2(){return this.ed}Yp(){return this.Om}nm(){return this.Rm}O2(){return this.i2}R2(){let t=this.Om*this.Rm;switch(this.a2){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.u2&&(t+=Math.floor(t/3)),t}static zS(){Si.clear()}static P2(){return Si.values()}}}{const Ti=self.Os,bi=self.ys,vh=bi.Cs,xh=bi.Ts,xi=new Set(["nearest","bilinear","trilinear"]),vi={HT:"trilinear",alpha:!0,depth:!1,F2:!0,j2:!0,z2:0},Ci=new Set;Ti.Bg.B2=class{constructor(t){this.rS=t,this.U2=null,this.W2=null,this.s2=null,this.Q2=null,this.Om=0,this.Rm=0,this.J2=!0,this.n2="trilinear",this.V2=!0,this.Y2=!1,this.H2=!0,this.q2=0,this.Z2=xh.create(),this.X2=0,this.K2=0,this.tb=0}sb(t,s,i){i=Object.assign({},vi,i);const e=this.rS.m2();if(this.s2||this.Q2)throw new Error("already created render target");if(this.n2=i.HT,this.V2=!!i.alpha,this.Y2=!!i.depth,this.H2=!!i.F2,this.J2=!!i.j2,this.q2=i.z2,!xi.has(this.n2))throw new Error("invalid sampling");if(0<this.q2&&(e<2||this.H2))throw new Error("invalid use of multisampling");if(e<2&&(this.H2=!0),this.Om=t,this.Rm=s,this.Om<=0||this.Rm<=0)throw new Error("invalid render target size");this.ib();const h=this.rS.d2();if(this.U2=h.createFramebuffer(),this.Y2&&(this.W2=h.createFramebuffer()),this.H2){this.s2=this.rS.eb(this.Om,this.Rm,{HT:this.n2,ZT:this.V2?"rgba8":"rgb8",XT:!1});const r=this.s2.N2();h.bindFramebuffer(h.FRAMEBUFFER,this.U2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,r,0),this.Y2&&(h.bindFramebuffer(h.FRAMEBUFFER,this.W2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,r,0))}else{this.Q2=h.createRenderbuffer(),h.bindRenderbuffer(h.RENDERBUFFER,this.Q2);const o=this.V2?h.RGBA8:h.RGB8;if(0<this.q2){const a=h.getInternalformatParameter(h.RENDERBUFFER,o,h.SAMPLES);if(a&&a[0]){const u=a[0];this.q2>u&&(this.q2=u)}else this.q2=0}0===this.q2?h.renderbufferStorage(h.RENDERBUFFER,o,this.Om,this.Rm):h.renderbufferStorageMultisample(h.RENDERBUFFER,this.q2,o,this.Om,this.Rm),h.bindFramebuffer(h.FRAMEBUFFER,this.U2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.Q2),this.Y2&&(h.bindFramebuffer(h.FRAMEBUFFER,this.W2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.Q2)),h.bindRenderbuffer(h.RENDERBUFFER,null)}const n=this.rS.hb();this.Y2&&n&&(h.bindFramebuffer(h.FRAMEBUFFER,this.U2),this.rS.nb()?h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.TEXTURE_2D,n,0):h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,n)),h.bindFramebuffer(h.FRAMEBUFFER,null),Ci.add(this)}rb(t,s){if(this.Om!==t||this.Rm!==s){this.Om=t,this.Rm=s,this.ib();const i=this.rS.d2(),e=(i.bindFramebuffer(i.FRAMEBUFFER,this.U2),this.s2?this.s2.G2(new ImageData(this.Om,this.Rm)):(i.bindRenderbuffer(i.RENDERBUFFER,this.Q2),i.renderbufferStorage(i.RENDERBUFFER,this.V2?i.RGBA8:i.RGB8,this.Om,this.Rm),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.rS.hb());this.Y2&&e&&(this.rS.nb()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}}E2(){if(!this.s2&&!this.Q2)throw new Error("already deleted render target");Ci.delete(this);const t=this.rS.d2(),s=(this.s2?(t.bindFramebuffer(t.FRAMEBUFFER,this.U2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.Y2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.W2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.rS.ob(this.s2),this.s2=null):this.Q2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.U2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.Y2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.W2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.Q2),this.Q2=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.rS.m2()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.U2),this.Y2&&t.deleteFramebuffer(this.W2),this.rS.ab());s.ub=null,this.U2=s.lb=null}ib(){this.rS.cM(this.Z2,this.Om/this.Rm),this.X2=this.rS.oM(),this.K2=this.rS.eM(),this.tb=this.rS.nM()}cb(){return this.U2}fb(){return this.W2}MS(){return this.rS}pb(){return this.s2}mb(){return this.rS.oM()===this.X2&&this.rS.eM()===this.K2&&this.rS.nM()===this.tb||this.ib(),this.Z2}gb(){return"nearest"!==this.n2}yb(){return this.V2}Mb(){return this.H2}wb(){return this.Y2}Yp(){return this.Om}nm(){return this.Rm}Sb(){return this.J2}Tb(){return this.q2}bb(){const t={HT:this.n2,alpha:this.V2,F2:this.H2};return this.J2||(t.width=this.Om,t.height=this.Rm),t}xb(t){return"nearest"!==(t=Object.assign({},vi,t)).HT===this.gb()&&!!t.alpha===this.yb()&&!!t.depth===this.wb()&&!(2<=this.rS.m2()&&!!t.F2!==this.Mb())&&("number"==typeof t.width||"number"==typeof t.height?!this.Sb()&&this.Yp()===Math.floor(t.width)&&this.nm()===Math.floor(t.height):this.Sb())}vb(){return this.s2?this.s2.N2():null}R2(){return this.s2?this.s2.R2():this.Om*this.Rm*(this.V2?4:3)}static async Cb(t,s){const i=await t.Ib(s,!0);return Ti.Co(i)}static zS(){Ci.clear()}static Gb(){return Ci.values()}static Eb(t,s){for(const i of Ci)i.Sb()&&i.rb(t,s)}}}{const m=self.Os,Ii=self.ys,vh=Ii.Cs,xh=Ii.Ts,Gi=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);m.Bg._b=class extends m.Bg.nS{static async Nb(t,s){const i=t.d2(),e=s.src,h=s.Db,n=s.name,r=i.createShader(i.FRAGMENT_SHADER),o=(i.shaderSource(r,e),i.compileShader(r),i.createShader(i.VERTEX_SHADER)),a=(i.shaderSource(o,h),i.compileShader(o),i.createProgram()),u=(i.attachShader(a,r),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a),t.Ab());if(u?await t.Lb(()=>i.getProgramParameter(a,u.COMPLETION_STATUS_KHR)):await m.vr(5),!i.getShaderParameter(r,i.COMPILE_STATUS)){const c=i.getShaderInfoLog(r);throw i.deleteShader(r),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+c)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const f=i.getShaderInfoLog(o);throw i.deleteShader(r),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const d=i.getProgramInfoLog(a);throw i.deleteShader(r),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+d)}const l=m.Ld(i.getProgramInfoLog(a)||"").trim();return l&&!m.Nd(l)&&console.info(`[WebGL] Shader program '${n}' compilation log: `,l),i.deleteShader(r),i.deleteShader(o),a}static async Ob(t,s){const i=await m.Bg._b.Nb(t,s);return new m.Bg._b(t,i,s)}constructor(t,s,i){super(t,i);const e=t.d2(),h=t.ab(),n=(t.Jw(),e.useProgram(s),this.Rb=e,this.AS=s,this.Pb="<default-device-transform>"===i.name,e.getAttribLocation(s,"aPos")),r=e.getAttribLocation(s,"aTex"),o=(this.kb=e.getAttribLocation(s,"aPoints"),-1!==n&&(e.bindBuffer(e.ARRAY_BUFFER,t.Fb),e.vertexAttribPointer(n,t.Ww(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(n)),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.jb),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==this.kb&&(e.bindBuffer(e.ARRAY_BUFFER,t.zb),e.vertexAttribPointer(this.kb,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.kb)),e.bindBuffer(e.ARRAY_BUFFER,null),this.Bb=new m.Bg.Ub(this,"matP","mat4"),this.Wb=new m.Bg.Ub(this,"matMV","mat4"),this.Qb=new m.Bg.Ub(this,"color","vec4"),this.Jb=new m.Bg.Ub(this,"samplerFront","sampler"),this.Vb=new m.Bg.Ub(this,"pointTexStart","vec2"),this.Yb=new m.Bg.Ub(this,"pointTexEnd","vec2"),this.Hb=new m.Bg.Ub(this,"zElevation","float"),this.qb=new m.Bg.Ub(this,"tileSize","vec2"),this.Zb=new m.Bg.Ub(this,"tileSpacing","vec2"),this.Xb=new m.Bg.Ub(this,"color2_","vec4"),this.Kb=new m.Bg.Ub(this,"outlineThickness","float"),this.$b=new m.Bg.Ub(this,"samplerBack","sampler"),this.tx=new m.Bg.Ub(this,"samplerDepth","sampler"),this.ix=new m.Bg.Ub(this,"destStart","vec2"),this.hx=new m.Bg.Ub(this,"destEnd","vec2"),this.nx=new m.Bg.Ub(this,"srcStart","vec2"),this.ox=new m.Bg.Ub(this,"srcEnd","vec2"),this.ux=new m.Bg.Ub(this,"srcOriginStart","vec2"),this.lx=new m.Bg.Ub(this,"srcOriginEnd","vec2"),this.mx=new m.Bg.Ub(this,"pixelSize","vec2"),this.gx=new m.Bg.Ub(this,"seconds","float"),this.yx=new m.Bg.Ub(this,"devicePixelRatio","float"),this.Mx=new m.Bg.Ub(this,"layerScale","float"),this.wx=new m.Bg.Ub(this,"layerAngle","float"),this.Sx=new m.Bg.Ub(this,"layoutStart","vec2"),this.Tx=new m.Bg.Ub(this,"layoutEnd","vec2"),this.bx=new m.Bg.Ub(this,"zNear","float"),this.xx=new m.Bg.Ub(this,"zFar","float"),this.vx=!!(this.mx.Cx()||this.gx.Cx()||this.$b.Cx()||this.ix.Cx()||this.hx.Cx()||this.nx.Cx()||this.ox.Cx()||this.ux.Cx()||this.lx.Cx()||this.yx.Cx()||this.Mx.Cx()||this.wx.Cx()||this.Sx.Cx()||this.Tx.Cx()),i.parameters||[]);this.Ix=[],this.gS=this.mx.Cx()||this.nx.Cx()||this.ox.Cx()||this.ux.Cx()||this.lx.Cx(),this.Gx=!1,this.Ex=!1,this.Qb._x(1,1,1,1),this.Xb._x(1,1,1,1),this.Jb.Nx(0),this.$b.Nx(1),this.tx.Nx(2),this.Vb.Dx(0,0),this.Yb.Dx(1,1),this.Hb.Ax(0),this.qb.Dx(0,0),this.Zb.Dx(0,0),this.ix.Dx(0,0),this.hx.Dx(1,1),this.nx.Dx(0,0),this.ox.Dx(0,0),this.ux.Dx(0,0),this.lx.Dx(0,0),this.mx.Dx(0,0),this.yx.Ax(1),this.bx.Ax(t.eM()),this.xx.Ax(t.nM()),this.Mx.Ax(1),this.wx.Ax(0),this.gx.Ax(0),this.Sx.Dx(0,0),this.Tx.Dx(0,0),this.Kb.Ax(1);for(const u of o){const l=u[0],c=u[2],f=new m.Bg.Ub(this,l,c);"color"===c?f.Lx(0,0,0):f.Ax(0),this.Ix.push(f)}this.Pb?this.Ox(h.Rx):(this.Px(h.Rx,!0),this.kx(h.Fx,!0));const a=h.jx;e.useProgram(a?a.AS:null)}$h(){this.Rb.deleteProgram(this.AS),this.AS=null,this.rS.yM(this),this.Rb=null,super.$h()}zx(){return this.Rb}Bx(){return this.AS}Ux(){return this.Ix.length}Wx(t){return t<0||t>=this.Ix.length?null:this.Ix[t].Qx()}Jx(i){for(let t=0,s=i.length;t<s;++t)if(!this.Ix[t].Vx(i[t]))return!1;return!0}Yx(i){for(let t=0,s=i.length;t<s;++t)this.Ix[t].Hx(i[t])}qx(t,s,i,e,h,n,r,o,a,u){return!this.$b.Cx()&&!(this.mx.Cx()&&!this.mx.Zx(h,n)||this.ix.Cx()&&!this.ix.Zx(t.fu(),t.du())||this.hx.Cx()&&!this.hx.Zx(t.pu(),t.mu())||this.yx.Cx()&&!this.yx.Xx(r)||this.Mx.Cx()&&!this.Mx.Xx(o)||this.wx.Cx()&&!this.wx.Xx(a)||this.nx.Cx()&&!this.nx.Zx(s.fu(),s.du())||this.ox.Cx()&&!this.ox.Zx(s.pu(),s.mu())||this.ux.Cx()&&!this.ux.Zx(i.fu(),i.du())||this.lx.Cx()&&!this.lx.Zx(i.pu(),i.mu())||this.Sx.Cx()&&!this.Sx.Zx(e.fu(),e.du())||this.Tx.Cx()&&!this.Tx.Zx(e.du(),e.mu())||this.gx.Cx()&&!this.gx.Xx(u))}Kx(t,s,i,e,h,n,r,o,a,u){this.$b.Cx()||(this.mx.Cx()&&this.mx.$x(h,n),this.ix.Cx()&&this.ix.$x(t.fu(),t.du()),this.hx.Cx()&&this.hx.$x(t.pu(),t.mu()),this.yx.Cx()&&this.yx.tv(r),this.Mx.Cx()&&this.Mx.tv(o),this.wx.Cx()&&this.wx.tv(a),this.nx.Cx()&&this.nx.$x(s.fu(),s.du()),this.ox.Cx()&&this.ox.$x(s.pu(),s.mu()),this.ux.Cx()&&this.ux.$x(i.fu(),i.du()),this.lx.Cx()&&this.lx.$x(i.pu(),i.mu()),this.Sx.Cx()&&this.Sx.$x(e.fu(),e.du()),this.Tx.Cx()&&this.Tx.$x(e.du(),e.mu()),this.gx.Cx()&&this.gx.tv(u))}Px(t,s){this.Gx&&!s||this.Pb||(this.Bb.Cx()&&this.Bb.sv(t),this.Gx=!0)}hv(){this.Gx=!1}kx(t,s){this.Ex&&!s||this.Pb||(this.Wb.Cx()&&this.Wb.sv(t),this.Ex=!0)}nv(){this.Ex=!1}Ox(t){if(!this.Pb)throw new Error("not device transform shader");this.Bb.sv(t);const s=this.rS,i=s.Yp()/2,e=s.nm()/2,h=s.mM(i,e,s.Ky(s.nm()),i,e,0,s.nm());this.Wb.sv(h)}rv(t){this.Qb.Cx()&&this.Qb.ov(t[0],t[1],t[2],t[3])}static av(){return Gi}static uv(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static lv(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static cv(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static dv(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static pv(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static mv(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static gv(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static yv(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Mv(t,s,i){let e="";return 2<=t?e="#version 300 es\n":(s&&(e="#extension GL_EXT_frag_depth : enable\n"),i&&(e+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),e+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!i?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static wv(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static Sv(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static Tv(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static bv(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static xv(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static vv(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static Cv(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static Iv(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static Gv(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static Ev(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static _v(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static Nv(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static Dv(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const Ei=self.Os,_i=self.ys,xh=_i.Ts,Ni=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);Ei.Bg.Ub=class{constructor(t,s,i){if(!Ni.has(i))throw new Error("invalid uniform type");this.gT=t,this.Rb=this.gT.zx(),this.hn=s,this.ef=i,this.Av="color"===this.ef,this.Lv=this.Rb.getUniformLocation(this.gT.Bx(),s),this.Ov=!!this.Lv;const e=Ni.get(i);this.Rv=new Float32Array(e),this.Pv=new Float32Array(e)}$h(){this.gT=null,this.Rb=null,this.Lv=null}Cx(){return this.Ov}Qx(){return this.ef}kv(){return this.Av}Ax(t){this.Cx()&&(this.Rv[0]=t,this.Pv.set(this.Rv),this.Rb.uniform1f(this.Lv,t))}Nx(t){this.Cx()&&(this.Rv[0]=t,this.Pv.set(this.Rv),this.Rb.uniform1i(this.Lv,t))}Dx(t,s){this.Cx()&&(this.Rv[0]=t,this.Rv[1]=s,this.Pv.set(this.Rv),this.Rb.uniform2f(this.Lv,t,s))}Lx(t,s,i){this.Cx()&&(this.Rv[0]=t,this.Rv[1]=s,this.Rv[2]=i,this.Pv.set(this.Rv),this.Rb.uniform3f(this.Lv,t,s,i))}_x(t,s,i,e){this.Cx()&&(this.Rv[0]=t,this.Rv[1]=s,this.Rv[2]=i,this.Rv[3]=e,this.Pv.set(this.Rv),this.Rb.uniform4f(this.Lv,t,s,i,e))}Fv(t){t=Math.fround(t);const s=this.Rv;s[0]!==t&&(s[0]=t,this.Rb.uniform1f(this.Lv,t))}jv(t){const s=this.Rv;s[0]!==t&&this.Rb.uniform1i(this.Lv,s[0]=t)}zv(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.Rv;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.Rb.uniform2f(this.Lv,t,s))}Bv(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.Rv;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.Rb.uniform3f(this.Lv,t,s,i))}ov(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const h=this.Rv;h[0]===t&&h[1]===s&&h[2]===i&&h[3]===e||(h[0]=t,h[1]=s,h[2]=i,h[3]=e,this.Rb.uniform4f(this.Lv,t,s,i,e))}sv(t){const s=this.Rv;xh.j(s,t)||(Ei.Er(s,t,0),this.Rb.uniformMatrix4fv(this.Lv,!1,t))}Vx(t){const s=this.Pv;return this.kv()?s[0]===Math.fround(t.Ho())&&s[1]===Math.fround(t.qo())&&s[2]===Math.fround(t.Zo()):s[0]===Math.fround(t)}Hx(t){const s=this.Pv;this.kv()?(s[0]=t.Ho(),s[1]=t.qo(),s[2]=t.Zo()):s[0]=t}Xx(t){return this.Pv[0]===Math.fround(t)}Zx(t,s){const i=this.Pv;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}tv(t){this.Pv[0]=t}$x(t,s){const i=this.Pv;i[0]=t,i[1]=s}}}{const Di=self.Os,Ai=self.ys,Uh=Ai.Is,xh=Ai.Ts;Di.Bg.Uv=class{constructor(t){this.renderer=t,this.Fx=xh.create(),this.Rx=xh.create(),this.ub=null,this.lb=null,this.Wv=!1,this.Qv=Uh.I(1,1,1,1),this.jx=null,this.Jv=new Di.Rect,this.clearColor=Di.Kh(Di.Oo,0,0,0,0)}},Di.Bg.Vv=class{constructor(t){const s=new ArrayBuffer(96);this.ef=0,this.Yv=t,this.Rb=t.renderer.d2(),this.Hv=0,this.qv=0,this.Zv=null,this.Xv=new Float32Array(s,0,16),this.Kv=new Float32Array(s,64,4),this.$v=new Float32Array(s,80,4),this.tC=[]}sC(t,s){this.ef=1,this.Hv=t,this.qv=s}iC(){const t=this.Rb;t.drawElements(t.TRIANGLES,this.qv,t.UNSIGNED_SHORT,this.Hv)}eC(t){this.ef=2,this.Zv=t}hC(){const t=this.Rb,s=this.Zv;t.bindTexture(t.TEXTURE_2D,s?s.N2():null)}nC(t){this.ef=3,t.$o(this.Kv,0)}rC(){const t=this.Kv,s=this.Yv;Uh.C(s.Qv,t),s.jx.rv(t)}oC(t){this.ef=21,t.$o(this.Kv,0)}aC(){const t=this.Kv,s=this.Yv.jx;s.Xb.Cx()&&s.Xb.ov(t[0],t[1],t[2],t[3])}uC(t,s){this.ef=4,this.Hv=t,this.qv=s}lC(){this.Rb.blendFunc(this.Hv,this.qv)}cC(t,s,i,e){this.ef=5;const h=this.Kv;h[0]=t,h[1]=s,h[2]=i,h[3]=e}fC(){const t=this.Kv;this.Rb.viewport(t[0],t[1],t[2],t[3])}dC(t){this.ef=6,xh.C(this.Xv,t)}pC(){const t=this.Yv,i=t.renderer.My,e=t.jx,h=this.Xv;for(let t=0,s=i.length;t<s;++t){const n=i[t];n===e?n.Px(h,!0):n.hv()}xh.C(t.Rx,h)}mC(t){this.ef=7,xh.C(this.Xv,t)}gC(){const t=this.Yv,i=t.renderer.My,e=t.jx,h=this.Xv;for(let t=0,s=i.length;t<s;++t){const n=i[t];n===e?n.kx(h,!0):n.nv()}xh.C(t.Fx,h)}yC(t){this.ef=8,this.Zv=t}MC(){const t=this.Rb,s=this.Zv,i=this.Yv;s?(i.ub=s.cb(),i.lb=s.fb(),i.Wv&&i.lb?t.bindFramebuffer(t.FRAMEBUFFER,i.lb):t.bindFramebuffer(t.FRAMEBUFFER,i.ub)):(i.ub=null,i.lb=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}wC(t){this.ef=9,t.$o(this.Xv,0)}SC(t,s,i,e){this.ef=9;const h=this.Xv;h[0]=t,h[1]=s,h[2]=i,h[3]=e}TC(){const t=this.Rb,s=this.Xv,i=this.Yv,e=i.clearColor,h=s[0],n=s[1],r=s[2],o=s[3];e.na(h,n,r,o)||(t.clearColor(h,n,r,o),e.jo(h,n,r,o)),t.clear(t.COLOR_BUFFER_BIT)}bC(t){this.ef=15,t.$o(this.Xv,0)}xC(){const t=this.Xv;this.Yv.Jv.set(t[0],t[1],t[2],t[3])}vC(t,s){this.ef=10,this.Hv=t,this.qv=1,this.Xv[0]=s}CC(){const t=this.Rb,s=this.Yv,i=s.renderer,e=i.Ty,h=(t.useProgram(e.AS),e.Px(s.Rx,!1),e.kx(s.Fx,!1),s.Jv),n=(e.Vb.Cx()&&e.Vb.zv(h.fu(),h.du()),e.Yb.Cx()&&e.Yb.zv(h.pu(),h.mu()),this.Xv[0]);if(e.Hb.Cx()&&e.Hb.Fv(n),e.Qb.Cx()){const r=s.Qv;e.Qb.ov(r[0],r[1],r[2],r[3])}t.drawArrays(t.POINTS,this.Hv/4,this.qv),t.useProgram(s.jx.AS)}IC(t){this.ef=11,this.Zv=t}GC(){const t=this.Rb,s=this.Yv,i=this.Zv;if(s.jx=i,t.useProgram(i.AS),i.Px(s.Rx,!1),i.kx(s.Fx,!1),i.Qb.Cx()){const e=s.Qv;i.Qb.ov(e[0],e[1],e[2],e[3])}}EC(){this.ef=12}_C(){const t=this.Yv.jx,s=this.Rb,i=this.Xv,e=this.Kv,h=this.$v;if(t.$b.Cx()){const n=this.Yv.renderer,r=this.Zv;n.NC!==r&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,r?r.N2():null),n.NC=r,s.activeTexture(s.TEXTURE0))}t.mx.Cx()&&t.mx.zv(i[0],i[1]),t.ix.Cx()&&t.ix.zv(i[2],i[3]),t.hx.Cx()&&t.hx.zv(i[4],i[5]),t.yx.Cx()&&t.yx.Fv(this.qv),t.Mx.Cx()&&t.Mx.Fv(i[6]),t.wx.Cx()&&t.wx.Fv(i[7]),t.nx.Cx()&&t.nx.zv(i[12],i[13]),t.ox.Cx()&&t.ox.zv(i[14],i[15]),t.ux.Cx()&&t.ux.zv(h[0],h[1]),t.lx.Cx()&&t.lx.zv(h[2],h[3]),t.Sx.Cx()&&t.Sx.zv(e[0],e[1]),t.Tx.Cx()&&t.Tx.zv(e[2],e[3]),t.gx.Cx()&&t.gx.Fv(this.Hv)}DC(){this.ef=13}AC(){const t=this.Yv.jx,i=t.Ix,e=this.tC;for(let t=0,s=i.length;t<s;++t){const h=i[t],n=e[t];h.kv()?h.Bv(n.Ho(),n.qo(),n.Zo()):h.Fv(n)}}LC(t){this.ef=14,this.Zv=t}OC(){const t=this.Rb,s=this.Zv,i=this.Yv.ub;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}RC(t,s,i){this.ef=17;const e=this.Xv,h=this.Yv.renderer,n=(e[0]=t.Yp(),e[1]=t.nm(),e[2]=(s||h).Yp(),e[3]=(s||h).nm(),e[4]=t.gb()?1:0,e[5]="stretch"===i,this.tC);Di.Nr(n),n.push(t.cb()),n.push(s?s.cb():null)}PC(){const t=this.Xv,s=this.tC,i=this.Rb,e=t[0],h=t[1],n=t[2],r=t[3],o=0!==t[4],a=0!==t[5],u=s[0],l=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,u),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,l),a)i.blitFramebuffer(0,0,e,h,0,0,n,r,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const c=Math.min(e,n),f=Math.min(h,r),d=Math.max(h-r,0),p=Math.max(r-h,0);i.blitFramebuffer(0,d,c,f+d,0,p,c,f+p,i.COLOR_BUFFER_BIT,i.NEAREST)}}kC(t){this.ef=18,this.Zv=t}FC(){this.Zv.jC(),this.Zv=null}zC(t){this.ef=19,this.Zv=t}BC(){this.Zv.UC(),this.Zv=null}WC(t,s,i){this.ef=20;const e=this.Xv;e[0]=t,e[1]=s,e[2]=i}QC(){const t=this.Yv.jx,s=this.Xv;t.mx.Cx()&&t.mx.zv(s[0],s[1]),t.Kb.Cx()&&t.Kb.Fv(s[2])}JC(t,s,i,e,h,n,r){this.ef=16;const o=this.Xv;t.$o(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=h/i,o[8]=n/s,o[9]=r/i}VC(){const t=this.Yv.jx,s=this.Xv;t.nx.Cx()&&t.nx.zv(s[0],s[1]),t.mx.Cx()&&t.mx.zv(s[4],s[5]),t.qb.Cx()&&t.qb.zv(s[6],s[7]),t.Zb.Cx()&&t.Zb.zv(s[8],s[9])}YC(t,s,i,e,h,n,r){this.ef=29;const o=this.Xv;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=h,o[5]=n,o[6]=r}HC(){const t=this.Yv.jx,s=this.Xv;t.mx.Cx()&&t.mx.zv(s[0],s[1]),t.qb.Cx()&&t.qb.zv(s[2],s[3]),t.Kb.Cx()&&t.Kb.Fv(s[4]),t.Zb.Cx()&&t.Zb.zv(s[5],s[6])}qC(t){this.ef=22,this.Hv=t?1:0}ZC(){const t=this.Rb,s=0!==this.Hv;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}XC(t){this.ef=23,this.Hv=t?1:0}KC(){const t=this.Rb;0===this.Hv?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}$C(t){this.ef=24,this.Hv=t?1:0}tI(){const t=this.Rb,s=this.Yv,i=s.renderer,e=0!==this.Hv;s.Wv=e,t.activeTexture(t.TEXTURE2),e?(s.lb&&t.bindFramebuffer(t.FRAMEBUFFER,s.lb),t.bindTexture(t.TEXTURE_2D,i.hb())):(t.bindTexture(t.TEXTURE_2D,null),s.lb&&t.bindFramebuffer(t.FRAMEBUFFER,s.ub)),t.activeTexture(t.TEXTURE0)}sI(){this.ef=25}iI(){const t=this.Rb;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}eI(){this.ef=26}hI(){const t=this.Rb;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}nI(){this.ef=27}rI(){const t=this.Rb;t.disable(t.STENCIL_TEST)}oI(t,s,i,e,h){this.ef=28,this.Hv=t?1:0;const n=this.Xv;n[0]=s,n[1]=i,n[2]=e,n[3]=h}aI(){const t=this.Rb,s=this.Xv;1===this.Hv?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}uI(){switch(this.ef){case 1:return void this.iC();case 2:return void this.hC();case 3:return void this.rC();case 4:return void this.lC();case 5:return void this.fC();case 6:return void this.pC();case 7:return void this.gC();case 8:return void this.MC();case 9:return void this.TC();case 10:return void this.CC();case 11:return void this.GC();case 12:return void this._C();case 13:return void this.AC();case 14:return void this.OC();case 15:return void this.xC();case 16:return void this.VC();case 17:return void this.PC();case 18:return void this.FC();case 19:return void this.BC();case 20:return void this.QC();case 21:return void this.aC();case 22:return void this.ZC();case 23:return void this.KC();case 24:return void this.tI();case 25:return void this.iI();case 26:return void this.hI();case 27:return void this.rI();case 28:return void this.aI();case 29:return void this.HC()}}}}{let G=function(t,s,i,e,h,n){s?t.strokeRect(i,e,h,n):t.fillRect(i,e,h,n)},t=function(t){return t*(4/3)},o=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};G,t,o;const Li=self.Os,Oi=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Ri={timeout:60},Pi=new Li.Oo(0,0,0,1),ki=new Set(["left","center","right"]),Fi=new Set(["top","center","bottom"]),ji=new Set(["word","cjk","character"]),zi=new Set(["ltr","rtl"]),Bi=new Set;Li.FontManager&&Li.FontManager.addEventListener("fontload",t=>{const s=t.font.zc();for(const i of Bi)(i.lI()||Li.lh(i.cI(),s))&&i.fI()});let s=!1,i=!1;Li.Bg.hS=class{constructor(t,s){s=Object.assign({},Ri,s),this.rS=t,this.dI="Arial",this.pI=16,this.mI=1,this.gI=0,this.yI=!1,this.MI=!1,this.wI="black",this.SI=!1,this.Up=null,this.TI=!0,this.bI=null,this.xI=new Set,this.vI="left",this.CI="top",this.qc="",this.II=null,this.GI=Li.Kh(Li.zp),this.EI="word",this._I="ltr",this.NI=!1,this.DI=!1,this.AI=!1,this.LI=-1,this.OI=0,this.RI=0,this.kI=0,this.Om=0,this.Rm=0,this.FI=1,this.jI=null,this.zI=null,this.BI=null,this.UI=null,this.WI=-1,this.QI=-1,this.JI="",this.VI="",this.YI="",this.HI=1,this.qI=1,this.ZI=t=>this.XI(t),this.s2=null,this.KI=new Li.Rect,this.$I=1,this.tG=new Li.Vf(()=>{this.sG(),this.iG(8,8)},s.timeout),this.eG=null,this.hG=!1,Bi.add(this)}$h(){this.bI=null,this.xI.clear(),this.Up=null,this.II=null,this.jI=null,this.zI=null,this.BI=null,this.UI=null,this.ZI=null,this.tG.$h(),this.eG=null,this.sG(),this.GI.Wl(),this.GI=null,this.rS=null,this.hG=!0,Bi.delete(this)}nG(){this.AI=!0}rG(){this.nG(),this.DI=!0}fI(){this.rG(),this.NI=!0}oG(t){if(this.SI!==(t=!!t)){this.SI=t;const s=this.SI?"alphabetic":"top";this.zI&&(this.zI.textBaseline=s),this.BI&&(this.BI.textBaseline=s),this.fI()}}lI(){return this.SI}Jp(t){this.Up!==t&&(this.Up=t,this.GI.Jp(t),this.Up&&this.Up.Eg()&&this.Up._g().then(()=>this.nG()),this.fI())}aG(t){this.TI!==(t=!!t)&&(this.TI=t,this.nG())}uG(t){this.dI!==(t=t||"serif")&&(this.dI=t,this.fI())}cI(){return this.dI}lG(t){this.pI!==(t=t<.1?.1:t)&&(this.pI=t,this.fI())}cG(){return this.pI}fG(t){this.mI!==t&&(this.mI=t,this.fI())}dG(t){this.gI!==t&&(this.gI=t,this.rG())}pG(){return this.gI}mG(t){this.yI!==(t=!!t)&&(this.yI=t,this.fI())}gG(){return this.yI}yG(t){this.MI!==(t=!!t)&&(this.MI=t,this.fI())}MG(){return this.MI}wG(t){t=Math.floor(t),this.LI!==t&&(this.LI=t,this.nG())}SG(){return this.LI}TG(t,s){let i=[];(this.yI||s.Zm("b"))&&i.push("bold"),(this.MI||s.Zm("i"))&&i.push("italic");const e=s.qm("size"),h=(e?parseFloat(e.Lp):this.pI)*this.mI;i.push(t?h+"pt":h*this.bG()+"pt");let n=this.dI,r=s.qm("font");return r&&r.Lp&&(n=r.Lp,this.bI)&&!this.xI.has(n)&&(this.bI(n),this.xI.add(n)),n&&(Oi.has(n)?i.push(n):i.push('"'+n+'"')),i.join(" ")}jS(t){t instanceof Li.Oo&&(t=t.fa()),this.wI!==t&&(this.wI=t,this.nG())}xG(t,s,i){Pi.zo(t,s,i),this.jS(Pi)}vG(t){if(!ki.has(t))throw new Error("invalid horizontal alignment");this.vI!==t&&(this.vI=t,this.rG())}CG(){return this.vI}IG(t){if(!Fi.has(t))throw new Error("invalid vertical alignment");this.CI!==t&&(this.CI=t,this.rG())}GG(){return this.CI}EG(t){if(!ji.has(t))throw new Error("invalid word wrap mode");this.EI!==t&&(this.EI=t,this.fI())}_G(){return this.EI}NG(t){if(!zi.has(t))throw new Error("invalid text direction");this._I!==t&&(this._I=t,this.zI&&(this.zI.direction=this._I),this.BI&&(this.BI.direction=this._I),this.fI())}DG(){return this._I}Kc(t){this.qc!==t&&(this.qc=t,this.fI())}AG(){return this.qc}bG(){return this.$I*this.FI*self.devicePixelRatio}LG(n,r,o){if(void 0===o&&(o=1),!(n<=0||this.RI===n&&this.kI===r&&this.FI===o)){let t=this.RI,s=(this.RI=n,this.kI=r,this.FI=o,self.devicePixelRatio),i=(this.Om=this.RI*this.FI*s,this.Rm=this.kI*this.FI*s,Math.max(this.Om,this.Rm)),e=Math.min(this.rS.f2(),4096),h=1;e<i&&(h=e/i,this.Om=Math.min(this.Om*h,e),this.Rm=Math.min(this.Rm*h,e)),this.$I=h,this.RI!==t?this.fI():this.rG()}}Yp(){return this.Om}nm(){return this.Rm}OG(){return this.FI}PG(){return this.kG(),this.GI.Am()}FG(){return this.kG(),this.GI.Lm()+this.GI.Qp()*(this.gI+4)-this.gI}jG(){this.kG();let t=0;for(const s of this.GI.Wp())for(const i of s.fm())t+=i.dm();return t}pb(){return this.tG.Xf(),this.zG(),this.s2}BG(t,s){this.kG();const i=this.bG(),e=this.GI.Wp();for(const h of e){const n=h.om()*i;if(s>=h.Vm()-h.nm()*i+n&&s<h.Vm()+n)for(const r of h.fm())if(t>=r.Qm()&&t<r.Qm()+r.Yp()*i)return r}return null}*UG(t){this.kG();const s=this.GI.Wp();for(const i of s)for(const e of i.fm()){const h=e.qm("tag");h&&Li.lh(h.Lp,t)&&(yield e)}}WG(t,s){for(const i of this.UG(t)){if(0===s)return i;--s}return null}QG(t){let s=0;for(const i of this.UG(t))++s;return s}zG(){this.s2&&!this.AI&&!this.DI&&!this.NI||this.hG||this.Om<=0||this.Rm<=0||(this.AI=!1,this.JG())}JG(){this.hG||(this.kG(),this.iG(Math.max(Li.En(Math.ceil(this.Om)),128),Math.max(Li.En(Math.ceil(this.Rm)),64)),this.VG(),this.YG(),this.tG.Xf())}iG(t,s){this.jI||(this.jI=Li.bo(16,16));let i=!1;this.WI===t&&this.QI===s||(this.WI=t,this.QI=s,this.jI.width=t,this.jI.height=s,i=!0),this.zI||(this.zI=this.jI.getContext("2d"),i=!0),i?(this.zI.textBaseline=this.SI?"alphabetic":"top",this.zI.direction=this._I,this.zI.font=this.JI,this.zI.fillStyle=this.YI,this.zI.strokeStyle=this.YI,this.zI.globalAlpha=this.HI,this.zI.lineWidth=this.qI):this.zI.clearRect(0,0,t,s)}HG(){this.BI||(this.BI=Li.bo(16,16).getContext("2d"),this.UI=Li.bo(16,16).getContext("2d"),this.BI.textBaseline=this.SI?"alphabetic":"top",this.UI.textBaseline="top",this.BI.direction=this._I,this.UI.direction=this._I)}qG(t){this.VI!==t&&(this.VI=t,this.BI.font=t,this.UI.font=t)}ZG(){if(!s){s=!0,this.HG();const t=this.BI.measureText("test");i="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return i}kG(){this.XG(),this.KG()}XG(){this.NI&&(this.HG(),!this.SI||this.II&&this.II.toString()===this.qc||(this.II=new Li.Ch(this.qc,{Sp:!0})),this.GI.zp(this.SI?this.II.Dp():this.qc,this.ZI,this.RI,this.EI,0),this.NI=!1)}KG(){this.DI&&(this.$G(),this.DI=!1)}XI(t){let s=t.$p()?t.Tm().join(""):" ",i=(this.qG(this.TG(!0,t)),t.qm("size")),e=(i?parseFloat(i.Lp):this.pI)*this.mI,h=this.BI.measureText(s),n=0;if(this.SI&&this.ZG()){const r=this.UI.measureText(s);n=h.fontBoundingBoxAscent-r.fontBoundingBoxAscent}return{width:h.width,height:4/3*e,fontBoundingBoxAscent:h.fontBoundingBoxAscent||0,fontBoundingBoxDescent:h.fontBoundingBoxDescent||0,Kp:n}}tE(t){this.JI!==t&&(this.JI=t,this.zI.font=t)}sE(t){this.YI!==t&&(this.YI=t,this.zI.fillStyle=t,this.zI.strokeStyle=t)}iE(t){this.HI!==t&&(this.HI=t,this.zI.globalAlpha=t)}eE(t){this.qI!==t&&(this.qI=t,this.zI.lineWidth=t)}$G(){let e=this.bG(),h=(4+this.gI)*e,n=0,r=this.GI.Wp();if(0!==r.length){for(const s of r){s.Wm(NaN),s.Jm(NaN);for(const o of s.fm())o.Wm(NaN),o.Jm(NaN)}let t=this.SI&&this.ZG(),i=r[0].nm()*e;if("center"===this.CI){const a=r.reduce((t,s)=>t+s.nm()*e+h,0)-h;n=Math.max(this.Rm/2-a/2,0),t&&(i=r[0].am()*e)}else if("bottom"===this.CI){const u=r.reduce((t,s)=>t+s.nm()*e+h,0)-this.gI*e,l=t?r.at(-1).om()*e:0;n=this.Rm-u-l-2}for(let t=0,s=r.length;t<s;++t){const c=r[t],f=c.nm()*e,d=n;if(this.SI){if(n+=0===t?i:f,0<t&&n>this.Rm-4*e)break}else if(0<t&&n>=this.Rm-f)break;0<=d&&this.hE(c,n,e),this.SI||(n+=f),n+=h}}}hE(t,s,i){let e=0;"center"===this.vI?e=Math.floor((this.Om-t.Yp()*i)/2):"right"===this.vI&&(e=this.Om-t.Yp()*i),t.Wm(e),t.Jm(s);for(const h of"ltr"===this._I?t.fm():t.Bm())this.nE(h,e,s,i),e+=h.Yp()*i}nE(t,s,i,e){const h=t.qm("offsetx"),n=(s+=h?o(h.Lp,t.nm())*e:0,t.qm("offsety"));if(i+=n?o(n.Lp,t.nm())*e:0,t.im()){const r=t.qm("iconoffsety");i+=r?o(r.Lp,t.nm())*e:.2*t.nm()*e}t.Wm(s),t.Jm(i)}VG(){this.zI.imageSmoothingEnabled=this.TI,this.zI.imageSmoothingQuality="high",this.OI=0;const t=this.bG(),s=this.GI.Wp();for(const i of s)this.rE(i,t)}rE(t,s){const i=t.Qm(),e=t.Vm();if(Number.isFinite(i)&&Number.isFinite(e))for(const h of"ltr"===this._I?t.fm():t.Bm())this.oE(h,s,t.nm())}oE(r,o,a){const u=this.zI,l=r.Qm(),c=r.Vm();if(Number.isFinite(l)&&Number.isFinite(c)){let t=a/16,s=r.Yp()*o,i=r.nm()*o,e=r.nm()/16,h=(4+this.gI)*o,n=r.$p()?r.Tm():null;if(-1!==this.LI){if(this.OI>=this.LI)return;r.$p()&&this.OI+n.length>this.LI&&(n=n.slice(0,this.LI-this.OI),s=this.XI(r).width*o),this.OI+=r.dm()}const f=r.qm("background"),d=r.Zm("u"),p=r.Zm("s");if((!r.$p()||!Li.Dd(n)||f||d||p)&&!r.Zm("hide")){const m=r.qm("color"),g=r.qm("opacity"),y=(this.iE(g?parseFloat(g.Lp)/100:1),f&&(this.sE(f.Lp),u.fillRect(l,c-i,s,i+h)),r.qm("linethickness")),M=y?parseFloat(y.Lp):1,w=r.Zm("stroke");if(w&&this.eE(.5*e*M*this.bG()),r.$p()){const S=n.join("");if(this.tE(this.TG(!1,r)),!w){this.eE(.5*e*M*this.bG());const T=r.qm("outlineback");T&&(this.sE(T.Lp),this.aE(!0,S,l,c,s))}if(this.sE(m?m.Lp:this.wI),this.aE(w,S,l,c,s),!w){this.eE(.5*e*M*this.bG());const b=r.qm("outline");b&&(this.sE(b.Lp),this.aE(!0,S,l,c,s))}}else if(r.im()&&0<r.Yp()){const x=r.hg(this.Up);x&&u.drawImage(x,l,c-i,s,i)}if(this.sE(m?m.Lp:this.wI),d&&G(u,w,l,c+o*t,s,o*t*M),p){const v=c-i/4,C=o*e,I=v+C/2;u.fillRect(l,I-C*M/2,s,C*M)}}}}aE(t,s,i,e,h){"rtl"===this._I&&(i+=h),t?"Gecko"===Li.hi.ci?this.zI.strokeText(s,i,e,h):this.zI.strokeText(s,i,e):"Gecko"===Li.hi.ci?this.zI.fillText(s,i,e,h):this.zI.fillText(s,i,e)}YG(){this.rS.uE()||(this.s2||(this.s2=this.rS.eb(this.jI.width,this.jI.height,{XT:!0,KT:"high"})),this.rS.lE(this.jI,this.s2),this.KI.set(0,0,this.Om/this.s2.Yp(),this.Rm/this.s2.nm()),this.eG&&this.eG())}cE(){return this.KI}sG(){this.s2&&(this.rS.uE()||this.rS.ob(this.s2),this.s2=null)}static zS(){for(const t of Bi)t.sG()}static fE(){return Bi.values()}}}{const Ui=self.Os;class Wi{constructor(t){this.Rb=t.d2(),this.dE=t.m2(),this.pE=t.mE(),this.gE=null,this.Zf=!1,this.yE=!1,this.ME=0,1===this.dE?this.gE=this.pE.createQueryEXT():this.gE=this.Rb.createQuery()}$h(){this.wE(),this.Rb=null,this.pE=null,this.yE=!1}wE(){this.gE&&(1===this.dE?this.pE.deleteQueryEXT(this.gE):this.Rb.deleteQuery(this.gE),this.gE=null)}jC(){if(this.Zf)throw new Error("query already active");1===this.dE?this.pE.beginQueryEXT(this.pE.TIME_ELAPSED_EXT,this.gE):this.Rb.beginQuery(this.pE.TIME_ELAPSED_EXT,this.gE),this.Zf=!0}UC(){if(!this.Zf)throw new Error("query not active");1===this.dE?this.pE.endQueryEXT(this.pE.TIME_ELAPSED_EXT):this.Rb.endQuery(this.pE.TIME_ELAPSED_EXT),this.Zf=!1}SE(){if(this.gE&&!this.yE&&!this.Zf){let t;t=1===this.dE?this.pE.getQueryObjectEXT(this.gE,this.pE.QUERY_RESULT_AVAILABLE_EXT):this.Rb.getQueryParameter(this.gE,this.Rb.QUERY_RESULT_AVAILABLE);const s=this.Rb.getParameter(this.pE.GPU_DISJOINT_EXT);t&&!s&&(1===this.dE?this.ME=this.pE.getQueryObjectEXT(this.gE,this.pE.QUERY_RESULT_EXT):this.ME=this.Rb.getQueryParameter(this.gE,this.Rb.QUERY_RESULT),this.ME/=1e9,this.yE=!0),(t||s)&&this.wE()}}TE(){return this.yE}bE(){if(this.yE)return this.ME;throw new Error("no result available")}}Ui.Bg.xE=class{constructor(t){this.rS=t,this.Qy=t.Vw(),this.Zf=!1,this.vE=null,this.CE=!1,this.IE=null,this.GE=[]}$h(){for(const t of this.GE)t instanceof Wi&&t.$h();Ui.Nr(this.GE),this.vE=null,this.IE=null,this.rS=null}jC(){if(this.Zf)throw new Error("query already active");const t=this.rS.EE();0<t.length?(this.CE=!0,this.vE=t.at(-1),this.vE._E(),this.vE.GE.push(this)):(this.CE=!1,this.vE=null),this.Zf=!0,t.push(this),this.NE()}UC(){if(!this.Zf)throw new Error("query not active");const t=this.rS.EE().pop();if(t!==this)throw new Error("can only end most nested query");this.Zf=!1,this._E(),this.vE&&(this.vE.NE(),this.vE=null)}NE(){this.IE=Ui.Kh(Wi,this.rS),this.GE.push(this.IE),this.IE.jC()}_E(){this.IE.UC(),this.IE=null}SE(){for(const t of this.GE)t.SE()}DE(){return this.CE}TE(){return this.GE.every(t=>t.TE())}bE(){return this.GE.reduce((t,s)=>t+s.bE(),0)}Vw(){return this.Qy}}}{const Qi=self.Os;Qi.Bg.AE=class{constructor(t,s=1e3){this.rS=t,this.LE=s,this.OE=[],this.rS.RE(this)}$h(){this.Wl(),this.rS.PE(this),this.rS=null}Wl(){for(const t of this.OE)t.$h();Qi.Nr(this.OE)}kE(){const t=new Qi.Bg.xE(this.rS);if(this.OE.push(t),this.OE.length>this.LE){const s=this.OE.shift();s.$h()}return t}FE(t){for(const s of this.OE){if(s.Vw()>=t)return;if(s.DE())return;s.SE()}}jE(t,s){if(s<=t)return NaN;let i=0;for(const e of this.OE){if(e.Vw()>=s)break;if(!(e.Vw()<t)){if(!e.TE())return NaN;i+=e.bE()}}return i}zE(i){for(let t=0,s=this.OE.length;t<s;++t){const e=this.OE[t];if(!(e.Vw()<i))return void(0<t&&this.OE.splice(0,t));e.$h()}}}}{let i=function(){h=-1;for(const t of e)t.BE()&&(t.resolve(),e.delete(t));0<e.size&&(h=self.requestAnimationFrame(i))},S=(i,self.Os),t=self.ys,T=(t.Cs,t.Is),y=t.Ts,n={powerPreference:"default",UE:!0,alpha:!1,depth:!1,WE:!1,QE:2,failIfMajorPerformanceCaveat:!1},r=new Set(["default","low-power","high-performance"]),c=new S.Uu(0,0,1,0,1,1,0,1),M=y.create(),w=y.create(),b=new S.Uu,x=new S.Rect,v=null,e=(S.isDebug&&(self.JE=function(){v?v.loseContext():console.warn("WEBGL_lose_context not supported")},self.VE=function(){v?v.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),h=-1;S.Bg.YE=class extends S.Bg.hy{constructor(t,s){if(super(s),s=Object.assign({},n,s),!r.has(s.powerPreference))throw new Error("invalid power preference");let i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat},e=null,h=0;if(2<=s.QE&&(e=t.getContext("webgl2",i),h=2),e||(e=t.getContext("webgl",i),h=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.Rb=e,this.HE=e.getContextAttributes(),this.qE=e.getParameter(e.VERSION),this.dE=h,this.ZE=T.create(),this.XE=!1,this.KE=y.create(),this.$E=!!s.depth,this.t_=!(!s.depth||!s.WE),this.s_=this.$E,this.i_=!1,this.e_=null,this.h_=!0,this.n_=0,this.r_=0,this.Fb=null,this.jb=null,this.o_=null,this.zb=null,this.a_=new Float32Array(8e3*this.Ww()),this.u_=new Uint16Array(12e3),this.l_=new Float32Array(16e3),this.c_=new Float32Array(32e3),this.f_=0,this.d_=0,this.p_=0,this.m_=0,this.g_=null,this.y_=null,this.M_=[],this.w_=0,this.S_=0,this.T_=null,this.b_=0,this.Yv=S.Kh(S.Bg.Uv,this),this.x_=S.Kh(S.Oo,1,1,1,1),this.v_=null,this.NC=null,this.C_=0,this.I_=0,this.G_=new S.Rect,this.E_=S.Kh(S.Rect,0,0,-1,-1),this.__=0,this.N_=-1,this.D_=0,this.A_=0,this.L_=0,this.O_="(unavailable)",this.R_="(unavailable)",this.P_=[],this.k_=!1,this.F_=null,this.j_=null,this.z_=null,this.B_=null,this.U_=null,this.W_=null,this.Q_=0,this.J_=!!s.UE,this.pE=null,this.V_=new Set,this.Y_=[],this.Yy(this.u_)}Kw(){return!0}async Zy(){super.Zy();const t=this.Rb,s=this.Ww(),i=(this.x_.jo(1,1,1,1),this.v_=null,this.NC=null,this.f_=0,this.p_=0,this.m_=8e3*s-4*s,S.Nr(this.M_),this.w_=0,this.S_=0,this.g_=null,this.T_=null,this.G_.set(0,0,1,1),this.b_=0,this.Yv),e=(i.jx=null,i.ub=null,i.lb=null,T.set(i.Qv,1,1,1,1),i.clearColor.jo(0,0,0,0),i.Jv.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.C_=t.ONE,this.I_=t.ONE_MINUS_SRC_ALPHA,this.H_(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.$E?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.s_=this.$E,this.i_=!1,this.zb=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.zb),t.bufferData(t.ARRAY_BUFFER,this.c_.byteLength,t.DYNAMIC_DRAW),this.Fb=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Fb),t.bufferData(t.ARRAY_BUFFER,this.a_.byteLength,t.DYNAMIC_DRAW),this.jb=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.jb),t.bufferData(t.ARRAY_BUFFER,this.l_.byteLength,t.DYNAMIC_DRAW),this.o_=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.o_),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.u_,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.N_=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),h=(this.D_=e[0],this.A_=e[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),n=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),r=(this.L_=h&&n?Math.min(h.precision,n.precision):0,2048<this.A_&&(this.A_=2048),this.P_=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(r&&(this.O_=t.getParameter(r.UNMASKED_VENDOR_WEBGL),this.R_=t.getParameter(r.UNMASKED_RENDERER_WEBGL)),this.F_=t.getExtension("KHR_parallel_shader_compile"),S.isDebug&&(v=t.getExtension("WEBGL_lose_context")),this.J_&&(1===this.m2()?this.pE=t.getExtension("EXT_disjoint_timer_query"):this.pE=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.j_=t.getExtension("EXT_texture_filter_anisotropic"),this.j_?this.Q_=t.getParameter(this.j_.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.Q_=0,this.m2()<2&&this.$E&&this.t_&&(this.z_=t.getExtension("WEBGL_depth_texture"),!this.z_))throw new Error("no depth texture support");this.m2()<2&&(this.B_=t.getExtension("EXT_frag_depth"),this.U_=t.getExtension("OES_standard_derivatives"),this.W_=t.getExtension("EXT_shader_texture_lod"));let o=S.Bg._b,a=o.uv(!1),u=o.cv(),l=a,c=o.Tv(),f=o.wv(),d=o.mv(),p=o.uv(!0),m=!1;this.$E&&(this.m2()<2?this.B_&&(u=o.dv(),c=o.bv(),d=o.gv(),m=!0):(l=o.lv(),u=o.pv(),c=o.xv(),f=o.Sv(),d=o.yv(),p=o.lv(!0)));const g=o.Mv(this.m2(),m,this.U_&&this.W_),y=2<=this.m2()?o.lv():a,M=[[u,l,"<default>"],[u,l,"<default-device-transform>"],[c,f,"<point>"],[o.vv(),a,"<fill>"],[o.Cv(),a,"<lineargradient>"],[o.Iv(),a,"<penumbra>"],[o.Ev(),a,"<hardellipse>"],[o._v(),a,"<hardellipseoutline>"],[o.Nv(),a,"<smoothellipse>"],[o.Dv(),a,"<smoothellipseoutline>"],[o.Gv(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],w=await Promise.all(M.map(t=>this.q_({src:t[0],Db:t[1],name:t[2]})));this.Sy=w[0],this.y_=w[1],this.Ty=w[2],this.vy=w[3],this.Cy=w[4],this.Iy=w[5],this.Gy=w[6],this.Ey=w[7],this._y=w[8],this.Ny=w[9],this.Dy=w[10],this.by=w[11],this.xy=w[12],this.SM()}async q_(t){const s=await S.Bg._b.Ob(this,t);return this.gM(s),s}Z_(){this.g_=null}LG(t,s,i){if(this.Om!==t||this.Rm!==s||i){this.Jw();const e=this.Rb,h=this.Yv;this.Om=t,this.Rm=s,this.X_(0,0,t,s),this.cM(this.KE,t/s),this.K_(this.KE),this.y_&&(e.useProgram(this.y_.Bx()),this.y_.Ox(this.uy),this.g_=this.y_,this.Yv.jx=this.y_),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.v_=null,this.NC=null,this.$E&&this.h_&&this.tN(this.Om,this.Rm),this.T_&&this.T_.rb(this.Om,this.Rm),e.bindFramebuffer(e.FRAMEBUFFER,null),this.T_=null,h.ub=null,h.lb=null}}tN(t,s){const i=this.Rb;this.e_&&this.n_===t&&this.r_===s||(this.t_?(this.e_&&i.deleteTexture(this.e_),this.e_=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.e_),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),2<=this.m2()?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.z_&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.z_.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.e_&&i.deleteRenderbuffer(this.e_),this.e_=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.e_),i.renderbufferStorage(i.RENDERBUFFER,2<=this.dE?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.n_=t,this.r_=s)}sN(t,s){this.$E&&(this.h_=!1,this.tN(t,s))}iN(){this.$E&&(this.h_=!0,this.tN(this.Om,this.Rm))}X_(t,s,i,e){const h=this.ZE;if(h[0]!==t||h[1]!==s||h[2]!==i||h[3]!==e){const n=this.eN();n.cC(t,s,i,e),T.set(h,t,s,i,e),this.S_=0}}rM(t){super.rM(t),this.cM(this.KE,this.Om/this.Rm)}iM(t){super.iM(t),this.cM(this.KE,this.Om/this.Rm)}hM(t){super.hM(t),this.cM(this.KE,this.Om/this.Rm)}K_(t){if(!y.j(this.uy,t)){const s=this.eN();s.dC(t),y.C(this.uy,t),this.S_=0,this.XE=!0}}hN(){let t,s,i,e=this.T_;i=(null===e?(t=this.KE,s=this.Yp(),this):(t=e.mb(),s=e.Yp(),e)).nm(),this.K_(t),this.X_(0,0,s,i)}nN(t){if(!y.j(this.ly,t)){const s=this.eN();s.mC(t),y.C(this.ly,t),this.S_=0,this.XE=!0}}rN(){this.XE=!1}oN(){return this.XE}ab(){return this.Yv}eN(){const t=this.M_;return this.w_===t.length&&t.push(new S.Bg.Vv(this.Yv)),t[this.w_++]}Jw(){0===this.w_||this.uE()||(this.aN(),this.uN(),this.w_=0,this.f_=0,this.d_=0,this.p_=0,this.S_=0)}aN(){const t=this.Rb;0<this.p_&&(t.bindBuffer(t.ARRAY_BUFFER,this.zb),t.bufferSubData(t.ARRAY_BUFFER,0,this.c_.subarray(0,this.p_))),0<this.f_&&(t.bindBuffer(t.ARRAY_BUFFER,this.Fb),t.bufferSubData(t.ARRAY_BUFFER,0,this.a_.subarray(0,this.f_)),t.bindBuffer(t.ARRAY_BUFFER,this.jb),t.bufferSubData(t.ARRAY_BUFFER,0,this.l_.subarray(0,this.d_)))}uN(){const i=this.M_;for(let t=0,s=this.w_;t<s;++t)i[t].uI()}lN(){return this.x_.Xo()}cN(t,s,i,e){const h=this.x_;if(!h.na(t,s,i,e)){h.jo(t,s,i,e);const n=this.eN();n.nC(h),this.S_=0,this.Ly=null}}fN(t){const s=this.x_;if(s.Xo()!==t){s.Vo(t);const i=this.eN();i.nC(s),this.S_=0,this.Ly=null}}jS(t){const s=this.x_;if(!s.equals(t)){s.set(t);const i=this.eN();i.nC(s),this.S_=0,this.Ly=null}}dN(){this.cN(1,1,1,1)}pN(){return this.x_}mN(t){if(t!==this.v_){const s=this.eN();s.eC(t),this.v_=t,this.S_=0}}S2(){this.v_=null}FS(t){const s=this.YM(t);this.gN(s[0],s[1])}yN(t){const s=this.ZM(t);this.gN(s.JM,s.VM)}gN(t,s){if(t!==this.C_||s!==this.I_){const i=this.eN();i.uC(t,s),this.C_=t,this.I_=s,this.S_=0,this.Ly=null}}MN(){return this.C_===this.Rb.ONE&&this.I_===this.Rb.ONE_MINUS_SRC_ALPHA}wN(){this.gN(this.Rb.ONE,this.Rb.ONE_MINUS_SRC_ALPHA)}SN(){this.gN(this.Rb.SRC_ALPHA,this.Rb.ONE_MINUS_SRC_ALPHA)}TN(){this.gN(this.Rb.ONE,this.Rb.ZERO)}Rect(t){this.bN(t.fu(),t.du(),t.pu(),t.mu())}bN(t,s,i,e){this.Uw(t,s,i,s,i,e,t,e)}xN(){let t=this.f_;if(t>=this.m_&&(this.Jw(),t=0),1===this.S_)this.M_[this.w_-1].qv+=6;else{const s=this.eN();s.sC(t,6),this.S_=1}}vN(t){t.al(this.a_,this.f_,this.Py+this.ky),this.f_+=12}Uu(t){this.xN(),this.vN(t),c.$o(this.l_,this.d_),this.d_+=8}Uw(t,s,i,e,h,n,r,o){this.xN();let a=this.a_,u=this.f_,l=this.Py+this.ky;a[u++]=t,a[u++]=s,a[u++]=l,a[u++]=i,a[u++]=e,a[u++]=l,a[u++]=h,a[u++]=n,a[u++]=l,a[u++]=r,a[u++]=o,a[u++]=l,this.f_=u,c.$o(this.l_,this.d_),this.d_+=8}pw(t,s){this.xN(),this.vN(t),s.Mu(this.l_,this.d_),this.d_+=8}CN(t,s){this.xN(),this.vN(t),s.$o(this.l_,this.d_),this.d_+=8}IN(t,s,i,e,h,n,r,o,a,u,l,c,f){this.xN();let d=this.a_,p=this.f_,m=this.Py+this.ky;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+n,d[p++]=r,d[p++]=o,d[p++]=m+a,d[p++]=u,d[p++]=l,d[p++]=m+c,this.f_=p,f.Mu(this.l_,this.d_),this.d_+=8}uw(t,s,i,e,h,n,r,o,a,u,l,c,f){this.xN();let d=this.a_,p=this.f_,m=this.Py+this.ky;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+n,d[p++]=r,d[p++]=o,d[p++]=m+a,d[p++]=u,d[p++]=l,d[p++]=m+c,this.f_=p,f.$o(this.l_,this.d_),this.d_+=8}GN(e,h,n){const r=this.a_,o=this.l_;if(n.length%3!=0)throw new Error("invalid index buffer length");for(let i=0,t=n.length;i<t;){const a=n[i++],u=n[i++],l=n[i++],c=3*a,f=3*u,d=3*l,p=2*a,m=2*u,g=2*l;this.xN();let t=this.f_,s=this.d_;r[t++]=e[0+c],r[t++]=e[1+c],r[t++]=e[2+c],r[t++]=e[0+f],r[t++]=e[1+f],r[t++]=e[2+f],r[t++]=e[0+d],r[t++]=e[1+d],r[t++]=e[2+d],r[t++]=e[0+d],r[t++]=e[1+d],r[t++]=e[2+d],o[s++]=h[0+p],o[s++]=h[1+p],o[s++]=h[0+m],o[s++]=h[1+m],o[s++]=h[0+g],o[s++]=h[1+g],o[s++]=h[0+g],o[s++]=h[1+g],this.f_=t,this.d_=s}}EN(t,s){this.iw(0),y.C(M,this.uy),y.C(w,this.ly),this.hN();const[i,e]=this._N(this.T_),h=this.mM(0,0,this.Ky(e),0,0,0,e);if(this.nN(h),"crop"===t&&this.T_&&s){const n=this.Om/2,r=this.Rm/2,o=s.Yp(),a=s.nm(),u=this.T_.Yp(),l=this.T_.nm(),c=Math.min(u,o),f=Math.min(l,a),d=Math.max(a-l,0),p=Math.max(l-a,0);x.set(-n,r-p,-n+c,r-f-p),b.ul(x),x.set(0,d,c,f+d),x.Ct(o,a),this.pw(b,x)}else{const m=i/2,g=e/2;this.bN(-m,g,m,-g)}this.K_(M),this.nN(w)}NN(t){if(!this.G_.equals(t)){this.G_.C(t);const s=this.eN();s.bC(t),this.S_=0}}DN(){}AN(t,s,i,e){7996<=this.p_&&this.Jw();let h=this.p_,n=this.Py+this.ky;if(2===this.S_&&this.b_===n)this.M_[this.w_-1].qv++;else{const o=this.eN();o.vC(h,n),this.S_=2,this.b_=n}const r=this.c_;r[h++]=t,r[h++]=s,r[h++]=i,r[h++]=e,this.p_=h}TM(t){if(this.g_!==t){const s=this.eN();s.IC(t),this.g_=t,this.S_=0,this.Ly=null}}LN(){return this.g_}ON(){this.TM(this.y_)}RN(t){const s=this.eN();s.oC(t),this.S_=0}PN(t,s,i=1){const e=this.eN();e.WC(t,s,i),this.S_=0}kN(t,s,i,e,h,n,r){if(this.g_!==this.by)throw new Error("must set tilemap fill mode first");const o=this.eN();o.JC(t,s,i,e,h,n,r),this.S_=0}FN(t,s,i,e,h,n,r){if(this.g_!==this.xy)throw new Error("must set tile randomization mode first");const o=this.eN();o.YC(t,s,i,e,h,n,r),this.S_=0}jN(t,s,i,e,h,n,r,o,a,u,l){const c=this.g_;if(l%=10800,c.vx&&!c.qx(s,i,e,h,n,r,o,a,u,l)){const f=this.eN(),d=(f.EC(),c.Kx(s,i,e,h,n,r,o,a,u,l),f.Xv),p=(d[0]=n,d[1]=r,s.$o(d,2),d[6]=a,d[7]=u,i.$o(d,12),f.Kv),m=(h.$o(p,0),p[1]);p[1]=p[3],p[3]=m,e.$o(f.$v,0),f.Hv=l,f.qv=o,c.$b.Cx()?f.Zv=t?t.pb():null:f.Zv=null,this.S_=0}}zN(t){const s=this.g_;if(0!==t.length&&!s.Jx(t)){const i=this.eN();i.DC(),s.Yx(t),S.Or(i.tC,t),this.S_=0}}BN(t,s,i,e){const h=this.eN();h.SC(t,s,i,e),this.S_=0}Wl(t){const s=this.eN();s.wC(t),this.S_=0}UN(){}Qw(){super.Qw(),this.Rb.flush()}WN(){if(this.$E&&this.T_&&this.T_.wb()){const t=this.eN();t.qC(this.s_),this.S_=0}}QN(t){if(this.s_!==(t=!!t)&&this.$E){this.s_=t;const s=this.eN();s.XC(t),this.S_=0}}JN(){return this.s_}hb(){return this.e_}nb(){return this.t_}VN(t){if(t=!!t,this.t_&&this.i_!==t){if(t&&this.JN())throw new Error("depth still enabled");this.i_=t;const s=this.eN();s.$C(t),this.S_=0}}YN(t,s,i,e,h=0){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),!this.E_.cu(t,s,i,e)){this.E_.hu(t,s,i,e);const n=h||this._N(this.HN())[1],r=(s=n-s-e,this.eN());r.oI(!0,t,s,i,e),this.S_=0}}qN(){if(-1!==this.E_.pu()){this.E_.set(0,0,-1,-1);const t=this.eN();t.oI(!1,0,0,0,0),this.S_=0}}ZN(){for(const t of this.V_)t.FE(this.Qy)}uE(){return!this.Rb||this.Rb.isContextLost()||this.k_}zS(){super.Xy(),S.Bg.t2.zS(),S.Bg.B2.zS(),S.Bg.hS.zS();for(const t of this.V_)t.Wl();this.P_=[],this.pE=null,this.F_=null,this.j_=null,this.z_=null,this.B_=null,this.U_=null,this.W_=null,this.Q_=0,this.O_="(unavailable)",this.R_="(unavailable)",this.g_=null,this.y_=null,this.e_=null;for(const s of this.Ay.values())s.zS()}async BS(){this.k_=!0,await this.Zy(),this.k_=!1;for(const t of this.Ay.values())t.BS(this);this.LG(this.Om,this.Rm,!0)}XN(t,s){if(this.uE())throw new Error("context lost");this.Jw();const i=S.Kh(S.Bg.t2,this);return i.c2(t,s),i}async KN(e,h){if(this.uE())throw new Error("context lost");if(h=Object.assign({},h),S.Pi.ImageBitmapOptions){let t=await createImageBitmap(e,{premultiplyAlpha:"premultiply"}),s=h.VT&&"clamp-to-edge"!==h.VT||h.YT&&"clamp-to-edge"!==h.YT,i=S.Gn(t.width)&&S.Gn(t.height);return this.g2()||i||!s?h.premultiplyAlpha=!1:S.Pi.Bi?(t=await createImageBitmap(e,{premultiplyAlpha:"premultiply",resizeWidth:S.En(t.width),resizeHeight:S.En(t.height)}),h.premultiplyAlpha=!1):t=await createImageBitmap(e,{premultiplyAlpha:"none"}),S.Cf(()=>this.XN(t,h))}if(e instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await S.To(e);e=t}return S.Cf(()=>this.XN(e,h))}eb(t,s,i){this.Jw();const e=S.Kh(S.Bg.t2,this);return e.T2(t,s,i),e}lE(t,s,i){this.Jw(),s.G2(t,i)}ob(t){t&&(t.A2(),0<t.L2()||(this.Jw(),t===this.v_&&(this.Rb.bindTexture(this.Rb.TEXTURE_2D,null),this.v_=null),t===this.NC&&(this.Rb.activeTexture(this.Rb.TEXTURE1),this.Rb.bindTexture(this.Rb.TEXTURE_2D,null),this.Rb.activeTexture(this.Rb.TEXTURE0),this.NC=null),t.E2()))}$N(t){let s=this.Om,i=this.Rm,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height)&&(i=Math.floor(t.height),e=!1),s<=0||i<=0)throw new Error("invalid size");this.Jw();const h=S.Kh(S.Bg.B2,this);return h.sb(s,i,Object.assign({j2:e},t)),this.T_=null,this.Yv.ub=null,this.Yv.lb=null,h}tD(t,s=!0){if(t!==this.T_){t&&t.Sb()&&t.rb(this.Om,this.Rm);const i=this.eN();i.yC(t),this.T_=t,this.S_=0,s&&this.hN()}}HN(){return this.T_}_N(t){return t?[t.Yp(),t.nm()]:[this.Om,this.Rm]}sD(t,s="stretch"){if(this.dE<2||this.T_&&0<this.T_.Tb())this.TN(),this.dN(),this.iD(t,s);else{const i=this.eN();i.RC(t,this.T_,s),this.S_=0}}iD(t,s="stretch"){const i=t.pb();if(!i)throw new Error("not a texture-backed render target");this.mN(i),this.EN(s,i)}eD(t){if(!(this.dE<2)){const s=this.eN();s.LC(t.cb()),this.S_=0}}hD(t){this.tD(null),this.Jw();const s=t.pb();s===this.v_&&(this.Rb.bindTexture(this.Rb.TEXTURE_2D,null),this.v_=null),s===this.NC&&(this.Rb.activeTexture(this.Rb.TEXTURE1),this.Rb.bindTexture(this.Rb.TEXTURE_2D,null),this.Rb.activeTexture(this.Rb.TEXTURE0),this.NC=null),t.E2()}async Ib(t,s,i){this.Jw();let e=this.T_,h,n,r,o=(r=t?(h=t.Yp(),n=t.nm(),t.cb()):(h=this.Yp(),n=this.nm(),null),0),a=0,u=h,l=n;if(i){o=S.rn(Math.floor(i.fu()),0,h-1),a=S.rn(Math.floor(i.du()),0,n-1);let t=i.width(),s=(t=0===t?h-o:S.rn(Math.floor(t),0,h-o),i.height());s=0===s?n-a:S.rn(Math.floor(s),0,n-a),u=t,l=s,a=n-(a+l)}let c=this.Rb,f=(c.bindFramebuffer(c.FRAMEBUFFER,r),()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.T_=null,this.Yv.ub=null,this.Yv.lb=null,this.tD(e)}),d;if(!s&&2<=this.m2()){c.bindFramebuffer(c.READ_FRAMEBUFFER,r);const p=c.createBuffer(),m=u*l*4,g=c.PIXEL_PACK_BUFFER,y=(c.bindBuffer(g,p),c.bufferData(g,m,c.STREAM_READ),c.readPixels(o,a,u,l,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(g,null),f(),c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0));await this.Lb(()=>c.getSyncParameter(y,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(y),d=new ImageData(u,l),c.bindBuffer(g,p),c.getBufferSubData(g,0,new Uint8Array(d.data.buffer),0,m),c.bindBuffer(g,null),c.deleteBuffer(p)}else d=new ImageData(u,l),c.readPixels(o,a,u,l,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}nD(){this.QN(!0);const t=this.eN();t.sI(),this.S_=0,this.__=1}rD(){this.QN(!1);const t=this.eN();t.eI(),this.S_=0,this.__=2}oD(){return 2===this.__}aD(){this.QN(!0);const t=this.eN();t.nI(),this.S_=0,this.__=0}uD(t){if(this.lD()){const s=this.eN();s.kC(t),this.S_=0}}cD(t){if(this.lD()){const s=this.eN();s.zC(t),this.S_=0}}Lb(s){const t=new Promise(t=>e.add({resolve:t,BE:s}));return-1===h&&(h=self.requestAnimationFrame(i)),t}$w(){return this.Om*this.Rm*(this.HE.alpha?4:3)}tS(){let t=0;for(const s of S.Bg.B2.Gb())s.pb()||(t+=s.R2());return t}sS(){let t=0;for(const s of S.Bg.t2.P2())t+=s.R2();return t}fD(){return this.qE}m2(){return this.dE}dD(){return"webgl"+this.m2()}g2(){return 2<=this.m2()}f2(){return this.N_}pD(){return this.D_}mD(){return this.A_}gD(){return 0!==this.L_}yD(){return this.L_}MD(){return this.O_}wD(){return this.R_}SD(){if(2<=this.m2())return"webgl2";{const t=[];return this.B_&&t.push("EXT_frag_depth"),this.U_&&t.push("OES_standard_derivatives"),this.W_&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}TD(){return this.P_}lD(){return!!this.pE}mE(){return this.pE}Ab(){return this.F_}C2(){return this.j_}I2(){return this.Q_}RE(t){this.V_.add(t)}PE(t){this.V_.delete(t)}EE(){return this.Y_}d2(){return this.Rb}H_(t){this.QM([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}bD(){return this.eS()}}}{const Ji=self.Os,Vi={xD:null,vD:null,CD:null,getTime:null,ID:null};Ji.Bg.GD=class{constructor(t){t=Object.assign({},Vi,t),this.ED=t.xD,this._D=t.vD,this.ND=t.CD,this.DD=t.getTime,this.AD=t.ID,this.LD=null,this.OD=new Set}RD(t){this.OD.add(t)}PD(t){this.OD.delete(t)}zS(){this.LD=null;for(const t of this.OD)t.zS()}kD(t){return this.ED?this.ED(t):[t.Yp(),t.nm()]}HN(t){return this._D(t)}FD(t,s){this.ND(t,s)}jD(){return this.DD()}Q1(t){this.AD(t)}zD(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.LD||this.LD.Yp()===s&&this.LD.nm()===i||(t.ob(this.LD),this.LD=null),null===this.LD&&(this.LD=t.XN(null,{width:s,height:i,HT:"nearest",XT:!1})),this.LD}}}{const o=self.Os,Yi=self.ys,xh=Yi.Ts,Hi=o.Kh(o.Rect),qi=o.Kh(o.Rect),Zi=o.Kh(o.Rect),Xi=o.Kh(o.Rect),Ki=xh.create(),$i=xh.create(),te={BD:null,UD:null,WD:null,QD:!1},se={JD:null,VD:!1,YD:!1,HD:!1,qD:!1,ZD:!1,XD:!1};o.Bg.KD=class{constructor(t,s){s=Object.assign({},te,s),this.td=t,this.$D=s.BD,this.tA=s.UD,this.sA=s.WD,this.iA=null,this.eA=[],this.hA=[],this.nA=[],this.rA=!1,this.OS=0,this.oA=!1,this.aA=!1,this.uA=!1,this.lA=!1,this.cA=!1,this.fA=!1,this.XE=!1,this.dA=!1,this.pA=!1,this.mA=!1,this.gA=!1,this.yA=!1,this.MA=0,this.wA=[null,null,null],this.SA=!!s.QD,this.TA=0,this.bA=0,this.xA=0,this.vA=0,this.CA=null,this.IA=null,this.GA=o.Kh(o.Rect),this.EA=o.Kh(o.Rect),this._A=o.Kh(o.Rect),this.NA=o.Kh(o.Rect),this.DA=o.Kh(o.Rect),this.AA=1,this.LA=1,this.OA=0,this.RA=0,this.PA=null,this.kA=null,this.FA=0,this.jA=0,this.zA=!1,this.Z2=xh.create(),this.BA=xh.create(),this.td.RD(this)}$h(){this.td.PD(this),o.Nr(this.nA),o.Nr(this.eA),o.Nr(this.hA),this.CA=null,this.IA=null,this.$D=null,this.tA=null,this.sA=null}zS(){this.rA=!0,o.Nr(this.nA),o.Nr(this.eA),o.Nr(this.hA)}UA(){return this.rA}WA(h,t){if(t=Object.assign({},se,t),o.Nr(this.nA),this.TA=0,this.bA=0,this.oA=!1,this.aA=!1,this.uA=!1,this.lA=!1,this.cA=!1,this.fA=!1,this.MA=0,this.yA=!!t.qD,this.gA=!!t.XD,this.rA=!1,o.Or(this.eA,h),0!==h.length){if(t.JD){if(t.JD.length!==h.length)throw new Error("incorrect indexMap length");o.Or(this.hA,t.JD)}else{o.Nr(this.hA);for(let t=0,s=h.length;t<s;++t)this.hA.push(t)}for(const s of h)this.TA+=s.SS(),this.bA+=s.TS(),s.IS()&&(this.oA=!0),s.ES()&&(this.aA=!0),s.GS()&&(this.uA=!0),s.bS()&&(this.lA=!0),s.DS()&&(this.cA=!0);this.fA=this.QA(h[0].MS());const n=this.JA(h[0],t),r=this.VA(h.at(-1),t);if(1!==h.length||n||r){this.mA=!1;let e=0;n&&(this.MA=1,this.nA.push(o.Kh(o.Bg.KD.HA.YA,this,-1,1)),e=1);for(let s=0,i=h.length;s<i;++s)if(0!==s||n){let t=1===e?2:1;s!==i-1||r||(t=0),this.MA=Math.max(this.MA,t),this.nA.push(o.Kh(o.Bg.KD.HA.qA,this,e,t,s)),e=t}else this.MA=1,this.nA.push(o.Kh(o.Bg.KD.HA.ZA,this,-1,1,s)),e=1;r&&this.nA.push(o.Kh(o.Bg.KD.HA.XA,this,e,0))}else this.mA=!0}}JA(t,s){return!!(s.VD||t.xS()||s.HD&&!t.CS()||t.ES()&&!this.gA||0!==this.TA||0!==this.bA)||(t.MS().Kw()?t.GS()&&(s.ZD||s.qD)||t._S()&&s.qD:t.GS()&&!this.fA&&s.ZD)}VA(t,s){return!!s.YD||(t.MS().Kw()?t.GS()||t.bS():(t.GS()||t.bS())&&this.KA())}QA(t){return t.fM()&&this.uA&&!this.lA}$A(t,s,i){t.fM()&&null===s&&(s=t.GetBackbufferRenderTarget()),this.PA=s,this.CA=i.tL||null,this.IA=i.contextObject||null,this.OS=i.sL||0,this.AA=i.devicePixelRatio||1,this.LA=i.iL||1,this.OA=i.eL||0,this.RA="number"==typeof i.time?i.time:this.td.jD(),this.XE=!1,t.rN(),this.oA&&this.hL();let e=!1;if(this.nL()&&(this.rL(t,i),e=!0,this.kA=this.td.zD(t,this.xA,this.vA),Hi.C(this.EA),Hi.Ou(),t.fM()&&t._MaybeDoPendingClearRenderPass(this.PA),t.CopyTextureToTexture(this.PA.pb(),this.kA,Hi.fu(),Hi.du(),Hi.width(),Hi.height())),this.mA)this.oL(t,i);else if(e||this.rL(t,i),0!==this._A.width()||0!==this._A.height()){t.wN(),t.dN(),t.KM(0),t.iw(0),this.iA=i.aL||null,this.FA=i.uL||0,this.jA=i.lL||0,this.zA=!!i.cL,this.fL(t),this.wA[0]=s,this.wA[1]=1<=this.MA?this.dL():null,this.wA[2]=2===this.MA?this.dL():null;for(const h of this.nA){const n=this.pL(h.mL()),r=this.pL(h.gL());t.fM()?h.yL(t,n,r):h.ML(t,n,r)}t.mN(null),this.wA[1]&&this.wL(this.wA[1]),this.wA[2]&&this.wL(this.wA[2]),this.wA.fill(null),this.SL(t),this.PA=null,this.kA=null,this.CA=null,this.IA=null,this.iA=null}}rL(t,s){const[i,e]=this.td.kD(t);this.TL(t,i,e),this.bL(s)}TL(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.xA===s&&this.vA===i||this.xL(t,s,i,0,0,this.Z2,this.BA),this.xA=s,this.vA=i}xL(t,s,i,e,h,n,r){const o=s/2+e,a=i/2+h,u=(t.cM(n,s/i),t.mM(o,a,t.Ky(i),o,a,0,i));xh.C(r,u)}bL(t){this.GA.C(t.vL),t.CL?this.EA.C(t.CL):this.EA.set(0,0,this.xA,this.vA),this._A.C(this.EA),this._A.Ct(this.xA,this.vA);const s=this.LA*this.AA;this.EA.Cu(this.TA*s,this.bA*s),this.DA.C(this.EA),this.DA.Ct(this.xA,this.vA),this.EA.Ru(0,0,this.xA,this.vA),this.NA.C(this.EA),this.NA.Ct(this.xA,this.vA)}fL(t){if(this.dA=t.JN(),this.pA=t.oD(),this.gA)t.QN(!1),this.aA&&t.VN(!0);else{if(Hi.C(this.EA),t.Kw()){const s=this.LA*this.AA;Hi.Cu(Math.max(this.TA,1)*s,Math.max(this.bA,1)*s),Hi.Ou(),Hi.rn(0,0,this.xA,this.vA)}else Hi.Ou();t.YN(Hi.fu(),Hi.du(),Hi.width(),Hi.height(),this.vA)}}IL(t){t.dN(),this.gA||(this.pA&&t.aD(),t.QN(!1),this.aA&&t.VN(!0)),t.fM()&&t.SetNormalizedCoordsProgramVariant(!0)}SL(t){t.VN(!1),this.pA&&t.rD(),t.QN(this.dA),this.gA||t.qN(),t.fM()&&t.SetNormalizedCoordsProgramVariant(!1),this.XE=t.oN()}GL(){this.DA.rn(0,0,1,1)}pL(t){return t<0?null:this.wA[t]}dL(){return this.td.HN(this)}EL(){return this.PA}wL(t){this.td.FD(t,this)}_L(t){return this.eA[t]}NL(t){this.iA?this.iA(this,t,()=>this.$D(t,this)):this.$D(t,this),this.mA||this.IL(t)}DL(t){if(this.gA)return!0;if(0!==this.FA||0!==this.jA)return!1;const[s,i]=t._N(t.HN());return s===this.xA&&i===this.vA}AL(t,s){let i=this.Z2,e=this.BA;if(s&&!this.DL(t)){i=Ki,e=$i;const[h,n]=t._N(t.HN());this.xL(t,h,n,this.FA,this.jA,i,e),this.gA||t.qN()}t.K_(i),t.nN(e)}hL(){this.td.Q1(this)}LL(t,s){return this.sA(this.hA[t],s)}OL(t,s){let i=this.DA,e=this.NA,h=this._A;t.Kw()&&(qi.C(i),qi.Eu(1),i=qi,Zi.C(e),Zi.Eu(1),e=Zi,Xi.C(h),Xi.Eu(1),h=Xi),this.RL(t,s,e,h,i,1/this.xA,1/this.vA)}PL(t,s){let e=this.NA,h=this._A,n=1/this.xA,r=1/this.vA;if(this.tA){let{kL:t,FL:s,jL:i}=this.tA(this.CA);t||(Hi.set(0,0,0,0),t=Hi),s=s||this.xA,i=i||this.vA,e=t,h=t,n=1/s,r=1/i}else t.Kw()&&(Zi.C(e),Zi.Eu(1),e=Zi,Xi.C(h),Xi.Eu(1),h=Xi);let i=this.DA;t.Kw()&&((i=qi).C(this.DA),i.Eu(1)),this.RL(t,s,e,h,i,n,r),t.fM()&&this.cA&&t.SetProgramParameter_IsSrcTexRotated(this.yA)}zL(t){return this.uA?t.fM()?this.nL()?this.kA:this.PA.pb():this.PA:null}RL(t,s,i,e,h,n,r){t.jN(this.zL(t),h,i,e,this.GA,n,r,this.AA,this.LA,this.OA,this.RA),t.zN(this.LL(s,t))}oL(t,s){const i=this.eA[0],e=t.JN(),h=i.ES();h&&(t.QN(!1),t.VN(!0),this.DA.set(0,0,1,1),this._A.set(0,0,1,1)),t.TM(i),t.FS(this.OS),t.tD(this.PA);let n=0,r=1;if(this._A.set(0,0,1,1),i._S()&&this.tA){const{kL:o,FL:a,jL:u}=this.tA(this.CA);o&&this._A.C(o),n=Number.isFinite(a)?1/a:0,r=Number.isFinite(u)?1/u:0}else{const[l,c]=this.td.kD(t);n=1/l,r=1/c}s.vL?this.GA.C(s.vL):this.GA.set(0,0,0,0),t.jN(this.zL(t),this.DA,this._A,this._A,this.GA,n,r,this.AA,this.LA,this.OA,this.RA),t.zN(this.LL(0,t)),t.fM()&&this.cA&&t.SetProgramParameter_IsSrcTexRotated(this.yA),t.KM(0),this.NL(t),h&&(t.VN(!1),t.QN(e))}nL(){return this.fA}KA(){return!this.fA}BL(){return this.uA}UL(){return!!this.mA&&!this.nL()}WL(){return this.gA}QL(){return this.CA}JL(){return this.IA}VL(){return this.OS}YL(){return this.zA}oN(){return this.XE}HL(){return this.EA}qL(){return this.NA}ZL(){return this.SA}async XL(t,s,i){}}}{const ie=self.Os;ie.Bg.KD.HA=class{constructor(t,s,i,e=-1){this.KL=t,this.$L=s,this.tO=i,this.Og=e}sO(){return this.KL}mL(){return this.$L}gL(){return this.tO}iO(){return this.Og}Bx(){return this.sO()._L(this.iO())}ML(t,s,i){}yL(t,s,i){}}}{const ee=self.Os;ee.Bg.KD.HA.YA=class extends ee.Bg.KD.HA{constructor(t,s,i,e){super(t,s,i,e)}ML(t,s,i){const e=this.sO();t.wN(),t.SM(),t.tD(i,e.YL()),t.BN(0,0,0,0),e.NL(t),e.GL()}yL(t,s,i){const e=this.sO();t.wN(),t.SM(),t.tD(i,!1),t.BN(0,0,0,0),e.NL(t),e.GL()}}}{const he=self.Os,ne=he.Kh(he.Rect),re=he.Kh(he.Uu);he.Bg.KD.HA.XA=class extends he.Bg.KD.HA{constructor(t,s,i,e){super(t,s,i,e)}ML(t,s,i){const e=this.sO();t.SM(),t.tD(i),e.AL(t,!0),t.FS(e.VL()),t.mN(s.pb()),re.ul(e.HL()),ne.C(e.qL()),ne.Eu(1),t.pw(re,ne),e.ZL()&&t.eD(s)}yL(t,s,i){const e=this.sO();t.SM(),t.tD(i,!1),e.DL(t)?re.ul(e.qL()):(t.SetNormalizedCoordsProgramVariant(!1),e.AL(t,!0),re.ul(e.HL())),t.SetBackTexture(null),t.FS(e.VL()),t.mN(s.pb()),e.WL()?t.EN():t.pw(re,e.qL())}}}{const oe=self.Os;oe.Bg.KD.HA.ZA=class extends oe.Bg.KD.HA{constructor(t,s,i,e){super(t,s,i,e)}ML(t,s,i){const e=this.sO();t.tD(i,e.YL()),t.BN(0,0,0,0),t.TN(),t.TM(this.Bx()),e.PL(t,this.iO()),e.NL(t),e.GL()}yL(t,s,i){const e=this.sO();t.tD(i,!1),t.BN(0,0,0,0),t.TN(),t.TM(this.Bx()),e.PL(t,this.iO()),e.NL(t),e.GL()}}}{const ae=self.Os,ue=ae.Kh(ae.Rect),le=ae.Kh(ae.Uu);ae.Bg.KD.HA.qA=class extends ae.Bg.KD.HA{constructor(t,s,i,e){super(t,s,i,e)}ML(t,s,i){const e=this.sO(),h=(t.tD(i),0===this.gL());h?t.FS(e.VL()):(t.BN(0,0,0,0),t.TN()),t.TM(this.Bx()),e.OL(t,this.iO()),t.mN(s.pb()),e.AL(t,h),le.ul(e.HL()),ue.C(e.qL()),ue.Eu(1),t.pw(le,ue),e.ZL()&&t.eD(s)}yL(t,s,i){const e=this.sO(),h=(t.tD(i,!1),0===this.gL());h?(t.FS(e.VL()),t.SetBackTexture(null),e.DL(t)?le.ul(e.qL()):(t.SetNormalizedCoordsProgramVariant(!1),e.AL(t,!0),le.ul(e.HL()))):(t.BN(0,0,0,0),t.TN(),le.ul(e.qL())),t.TM(this.Bx()),e.OL(t,this.iO()),t.mN(s.pb()),e.WL()?t.EN():t.pw(le,e.qL())}}}{let l=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const n=t[1],r=s[1];return n-r},c=(l,self.Os),f=self.Qs,d=null,s=new Set,p=[],m=[],i=!1,t=!1,e=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.eO=class{constructor(t){d=t,Object.defineProperties(this,{hO:{value:d.rO().nO(),writable:!1},oO:{value:d.uO().aO(),writable:!1},lO:{value:{},writable:!1},cO:{value:{},writable:!1},fO:{value:d.dO(),writable:!1},pO:{value:d.mO(),writable:!1},storage:{value:new self.gO(d),writable:!1},isInWorker:{value:d.yO(),writable:!1},MO:{value:d.wO(),writable:!1},SO:{value:d.TO(),writable:!1},HT:{value:d.bO(),writable:!1},xO:{value:d.vO(),writable:!1},CO:{value:new self.IO(t),writable:!1},GO:{value:new self.EO(t),writable:!1}}),d._O().addEventListener("keydown",t=>{s.has(t.key)?t.stopPropagation():s.add(t.key)}),d._O().addEventListener("keyup",t=>s.delete(t.key)),d.Nf().addEventListener("window-blur",()=>s.clear()),d.yO()&&(self.alert=t=>(i||(i=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}NO(t){Object.defineProperties(this.lO,t)}DO(t){Object.defineProperties(this.cO,t)}addEventListener(t,s){d._O().addEventListener(t,s)}removeEventListener(t,s){d._O().removeEventListener(t,s)}AO(t,...s){f.we(t);const i=d.LO(),e=i.OO(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.zl())return e.RO();if(s.length<e.PO())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.PO()} expected)`);let h=e.kO(),n=h.FO(),r=i.jO();if(r){n=n.slice(0);const a=new Set(n);for(const u of r.FO())a.has(u)||(n.push(u),a.add(u));for(const l of i.zO())a.has(l)||(n.push(l),a.add(l))}const o=h.BO(n,e.UO(),e.WO(),e.RO(),...s);return o}QO(t){const s=d.VO().JO();if(!s)throw new Error("not in a function which returns a value");switch(s.YO()){case 1:"number"==typeof t&&s.HO(t);break;case 2:"string"==typeof t&&s.HO(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.HO(t)}}signal(t){f.we(t),d.LO().qO(t)}ZO(t){return f.we(t),d.LO().XO(t)}KO(){return[d.wO(),d.TO()]}get isSuspended(){return d.$O()}get t3(){return d.s3()}get i3(){return d.e3()}get h3(){return d.n3()}get r3(){return d.o3()}get a3(){return d.u3()}set a3(t){f.me(t),d.l3(t)}get fps(){return t||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),t=!0),d.f3()}get framesPerSecond(){return d.f3()}get d3(){return d.m3()}get g3(){return d.y3()}get M3(){return d.w3()}get S3(){return d.T3()}set S3(t){if(!e.has(t))throw new Error("invalid framerate mode");d.b3(t)}get x3(){return d.v3()}set x3(t){f.me(t),d.C3(t)}get I3(){return d.G3()}set I3(t){d.E3(t)}random(){return d._3()}get layout(){const t=d.N3();if(t)return t.D3();throw new Error("no layout is running - make sure a layout is loaded before accessing")}A3(t){let s=d.L3(),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.O3(t))return i.D3();throw new Error("invalid layout")}R3(){return d.L3().P3().map(t=>t.D3())}F3(t){let s=d.L3(),i;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(i=s.O3(t)))throw new Error("invalid layout");s.j3()||s.z3(i)}get keyboard(){const t=d.B3().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get U3(){const t=d.B3().U3;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get W3(){const t=d.B3().W3;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get Q3(){const t=d.B3().Q3;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}J3(t,s){f.we(t),f.we(s),d.V3(t,s)}Y3(t){f.me(t);const s=d.H3(t);return s?s.q3():null}Z3(t,e){f.We(e);const h=d.X3();for(const s of t){const i=d.K3(s),n=i.t4();p.push([n.s4().iO(),n.i4()]),m.push(i)}if(0!==p.length){p.sort(l),m.sort((t,s)=>e(t.q3(),s.q3()));let i=!1;for(let t=0,s=p.length;t<s;++t){const r=m[t],o=h.e4(p[t][0]),a=p[t][1],u=o.h4();u[a]!==r&&((u[a]=r).t4().n4(o,!0),o.r4(r),i=!0)}i&&d.o4(),c.Nr(p),c.Nr(m)}}async a4(t,s){const i=new MessageChannel,e=i.port1,h=i.port2;return await d.u4("runtime","script-create-worker",{url:t,opts:s,port2:h},[h]),e}alert(t){return d.u4("runtime","alert",{message:t+(d.yO()?" [via Web Worker]":"")})}l4(t){return f.me(t),d.c4(t)}f4(t){d.d4(t)}}}{let s=self.Os,r=null;self.m4=class{constructor(t){r=t,Object.defineProperties(this,{g4:{value:r.y4("audio/webm; codecs=opus"),writable:!1}})}M4(t){const s=self.S4.w4(t);if(!s)throw new Error("invalid IImageInfo");s.T4(r.b4())}x4(t){return r.fo(t)}v4(t){return r.do(t)}C4(t){return r.po(t)}I4(t){return r.mo(t)}G4(t){return r.E4(t)}_4(t){return"flat"===r.N4()&&s.uo(t)&&(t=t.toLowerCase()),r.D4(t)}get A4(){return r.L4()}async O4(t,s){if(this.g4)throw new Error("decodeWebMOpus(): not supported because WebM Opus is supported by the platform");const i=await r.b4().R4(s),e=new Float32Array(i),h=t.createBuffer(1,e.length,48e3),n=h.getChannelData(0);return n.set(e),h}P4(...t){return r.F4(...t)}j4(t){return r.z4(t)}B4(t){return r.U4(t)}}}{let r=self.Os,i=self.Qs,o=null;self.W4=class{constructor(t){o=t,Object.defineProperties(this,{runtime:{value:o.b4(),writable:!1}})}Q4(t,s){const i=o.b4(),e=i.K3(t),h=i.K3(s);return o.J4(e,h)}V4(t,s){const i=o.b4(),e=i.K3(t);for(const h of s){const n=i.K3(h);if(o.J4(e,n))return h}return null}Y4(t){const s=o.b4().K3(t),i=o.H4(s);return i?i.q3():null}q4(t,s){if(i.me(t),i.me(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");o.Z4(t,s)}X4(){return o.K4()}tR(t,s){let i=o.b4(),e;e=Array.isArray(t)?t.map(t=>i.sR(t)):[i.sR(t)];const h=r.Rect.lu(s),n=[];return o.iR(null,e,h,n),n.map(t=>t.q3())}}}{let s=self.Os,i=null,e=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),h=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),n=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.IO=class{constructor(t){i=t,Object.defineProperties(this,{eR:{value:s.hi.mi,writable:!1},hR:{value:e.get(s.hi.ni)||"unknown",writable:!1},nR:{value:s.hi.ri,writable:!1},rR:{value:h.get(s.hi.oi)||"unknown",writable:!1},oR:{value:s.hi.ai,writable:!1},aR:{value:n.get(s.hi.ci)||"unknown",writable:!1}})}get exportType(){let t=i.uR();return i.lR()?t="nwjs":i.cR()?t="windows-webview2":"cordova"===t?t="Android"===s.hi.ni?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get renderer(){return i.dR().fR()}get pR(){return i.dR().mR()}get gR(){return i.dR().yR()}get MR(){return i.dR().wR()}get SR(){return i.dR().TR()}get bR(){return i.dR().xR()}get devicePixelRatio(){return i.vR()}}}{const ce=self.Qs;self.gO=class{constructor(t){this.CR=t.IR()}getItem(t){return ce.we(t),this.CR.getItem(t)}setItem(t,s){return ce.we(t),this.CR.setItem(t,s)}removeItem(t){return ce.we(t),this.CR.removeItem(t)}clear(){return this.CR.clear()}keys(){return this.CR.keys()}}}{const fe=self.Os,de=fe.Rs();self.GR=class{#ER;constructor(){const t=fe.NR._R(de);this.#ER=t,Object.defineProperties(this,{runtime:{value:t.b4().DR(),writable:!1},AR:{value:t.LR(),writable:!1},OR:{value:t.RR(),writable:!1},PR:{value:t.kR(),writable:!1},FR:{value:t.jR(),writable:!1},zR:{value:t.BR(),writable:!1},UR:{value:t.WR(),writable:!1},QR:{value:t.JR(),writable:!1},VR:{value:t.YR(),writable:!1}})}static HR(t){if(!t)return null;const s=fe.NR.qR(t);return s?s.ZR():null}KR(){return this.#ER.tP().$R()}sP(){return this.#ER.iP().q3()}}}{const pe=self.Os,me=self.Qs,ge=pe.Rs();self.eP=class{#ER;constructor(){const t=pe.NR._R(ge);this.#ER=t,Object.defineProperties(this,{name:{value:t.zc(),writable:!1},runtime:{value:t.b4().DR(),writable:!1},hP:{value:t.nP().ZR(),writable:!1}}),t.b4().rP(this,t)}addEventListener(t,s){me.we(t),me.We(s),this.#ER._O().addEventListener(t,s)}removeEventListener(t,s){me.we(t),me.We(s),this.#ER._O().removeEventListener(t,s)}oP(){return[...this.instances()]}aP(){return pe.first(this.instances())}uP(){return[...this.lP()]}cP(){return pe.first(this.lP())}fP(t){const s=this.#ER,i=s.b4().dP(t),e=s.pP(i);return e?e.q3():null}*instances(){for(const t of this.#ER.mP())yield t.q3()}*lP(){for(const t of this.#ER.yP().gP())yield t.q3()}MP(t){me.We(t);const s=this.#ER;if(0<s.wP())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.SP(t)}Ai(t,s,i,e,h){if(me.ue(s),me.ue(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const n=this.#ER,r=n.b4(),o=r.N3().s4(t);if(!o)throw new Error("invalid layer");const a=r.TP(n,o,s,i,e,h),u=(e&&o.bP(a),r.LO());return u.xP(!0),a.vP(),u.xP(!1),u.CP()||r.L3().IP()||r.GP(),a.q3()}}}{const ye=self.Qs,u=new WeakMap,Me=["above","below","top-sublayer","bottom-sublayer"];self.EP=class{constructor(t){u.set(this,t);const s=[],i=t._P(),e=i.NP().length;for(let t=0;t<e;++t)s.push(new self.DP(i,t));Object.defineProperties(this,{name:{value:t.zc(),writable:!1},index:{value:t.iO(),writable:!1},AP:{value:s,writable:!1}})}addEventListener(t,s){ye.we(t),ye.We(s),u.get(this)._O().addEventListener(t,s)}removeEventListener(t,s){ye.we(t),ye.We(s),u.get(this)._O().removeEventListener(t,s)}get width(){return u.get(this).Yp()}set width(t){ye.me(t),u.get(this).tm(t)}get height(){return u.get(this).nm()}set height(t){ye.me(t),u.get(this).Hp(t)}LP(t,s){ye.me(t),ye.me(s);const i=u.get(this);i.tm(t),i.Hp(s)}getSize(){const t=u.get(this);return[t.Yp(),t.nm()]}set scale(t){ye.me(t),u.get(this).OP(t)}get scale(){return u.get(this).RP()}set angle(t){ye.me(t),u.get(this).PP(t)}get angle(){return u.get(this).kP()}set scrollX(t){ye.ue(t),u.get(this).FP(t)}get scrollX(){return u.get(this).jP()}set scrollY(t){ye.ue(t),u.get(this).zP(t)}get scrollY(){return u.get(this).BP()}scrollTo(t,s){ye.ue(t),ye.ue(s);const i=u.get(this);i.FP(t),i.zP(s)}UP(){const t=u.get(this);return[t.jP(),t.BP()]}WP(t){let s=u.get(this),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(i=s.s4(t))?i.QP():null}JP(){return u.get(this).VP().map(t=>t.QP())}*YP(){for(const t of u.get(this).YP())yield t.QP()}HP(t,s,i){const e=u.get(this),h=self.qP,n=(ye.we(t),ye.Xe(s,h),s?e.b4().ZP(s):null),r=Me.indexOf(i);if(r<0)throw new Error("invalid location");e.XP(t,n,r)}KP(t,s,i){const e=u.get(this),h=e.b4(),n=self.qP,r=(ye.Ze(t,n),h.ZP(t));if(!r)throw new Error("invalid layer");ye.Xe(s,n);const o=s?h.ZP(s):null,a=Me.indexOf(i);if(a<0)throw new Error("invalid location");e.$P(r,o,a)}tk(t){const s=u.get(this),i=self.qP,e=(ye.Ze(t,i),s.b4().ZP(t));if(!e)throw new Error("invalid layer");const h=e.b4();s.sk(e),h.LO().CP()||h.GP()}ik(){const t=u.get(this),s=t.b4();t.ek(),s.LO().CP()||s.GP()}hk(t,s){ye.me(t),ye.me(s),u.get(this).nk(t,s)}rk(){return u.get(this).ak()}set Z(t){ye.we(t);const s=u.get(this);if("perspective"===t)s.uk();else{if("orthographic"!==t)throw new Error("invalid projection");s.lk()}}get Z(){return u.get(this).ck()?"orthographic":"perspective"}}}{const we=self.Os,f=self.Qs,d=new WeakMap,Se=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Te=new Map([...Se.entries()].map(t=>[t[1],t[0]])),be=we.Kh(we.Oo);self.qP=class{constructor(t){d.set(this,t);const s=[],i=t._P(),e=i.NP().length;for(let t=0;t<e;++t)s.push(new self.DP(i,t));Object.defineProperties(this,{name:{value:t.zc(),writable:!1},layout:{value:t.O3().D3(),writable:!1},AP:{value:s,writable:!1}}),t.b4().rP(this,t)}get fk(){const t=d.get(this).dk();return t?t.QP():null}*pk(){for(const t of d.get(this).pk())yield t.QP()}*mk(){for(const t of d.get(this).gk())yield t.QP()}*yk(){for(const t of d.get(this).gk())for(const s of t.Mk())yield s.QP()}get index(){return d.get(this).iO()}get isVisible(){return d.get(this).wk()}set isVisible(t){d.get(this).Sk(t)}get Tk(){return d.get(this).bk()}get isInteractive(){return d.get(this).xk()}set isInteractive(t){d.get(this).vk(t)}get Ck(){return d.get(this).Ik()}set Ck(t){d.get(this).Gk(!!t)}get Ek(){return d.get(this)._k()}get opacity(){return d.get(this).lN()}set opacity(t){t=we.rn(+t,0,1),isNaN(t)||d.get(this).fN(t)}set scale(t){f.me(t),d.get(this).Nk(t)}get scale(){return d.get(this).Dk()}set scaleRate(t){f.me(t),d.get(this).Ak(t)}get scaleRate(){return d.get(this).Lk()}set angle(t){f.me(t),d.get(this).PP(t)}get angle(){return d.get(this).Ok()}set parallaxX(t){f.me(t),d.get(this).Rk(t)}get parallaxX(){return d.get(this).Pk()}set parallaxY(t){f.me(t),d.get(this).kk(t)}get parallaxY(){return d.get(this).Fk()}set jk(t){f.me(t),d.get(this).sT(t)}get jk(){return d.get(this).tT()}set zk(t){d.get(this).Bk(t)}get zk(){return d.get(this).Uk()}set Wk(t){d.get(this).Qk(t)}get Wk(){return d.get(this).Jk()}set sL(t){f.we(t);const s=Se.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");d.get(this).FS(s)}get sL(){return Te.get(d.get(this).Vk())}set backgroundColor(t){if(f.Re(t),t.length<3)throw new Error("expected 3 elements");be.zo(t[0],t[1],t[2]);const s=d.get(this),i=s.Yk();i.ia(be)||(i.Yo(be),s.b4().o4())}get backgroundColor(){const t=d.get(this).Yk();return[t.Ho(),t.qo(),t.Zo()]}set scrollX(t){f.ue(t);const s=d.get(this);s.Hk(!0),s.FP(t)}get scrollX(){return d.get(this).jP()}set scrollY(t){f.ue(t);const s=d.get(this);s.Hk(!0),s.zP(t)}get scrollY(){return d.get(this).BP()}scrollTo(t,s){f.ue(t),f.ue(s);const i=d.get(this);i.Hk(!0),i.FP(t),i.zP(s)}UP(){const t=d.get(this);return[t.jP(),t.BP()]}qk(){d.get(this).Hk(!1)}getViewport(){return d.get(this).Zk().gu()}Xk(t,s,i=0){f.ue(t),f.ue(s),f.ue(i);const e=d.get(this),h=e.b4();return e.Kk(t-h.$k(),s-h.tF(),i)}sF(t,s,i=0){f.ue(t),f.ue(s),f.ue(i);const e=d.get(this),h=e.b4(),[n,r]=e.iF(t,s,i);return[n+h.$k(),r+h.tF()]}eF(t,s,i=0){return f.ue(t),f.ue(s),f.ue(i),d.get(this).hF(t,s,i)}nF(t,s,i=0){return f.ue(t),f.ue(s),f.ue(i),d.get(this).rF(t,s,i)}get oF(){return d.get(this).aF()}}}{let e=function(t){let s=Ce.get(t);return s||(s=xe.Kh(xe.Event.Nf),Ce.set(t,s)),s};e;const xe=self.Os,ve=self.Qs,Ce=new WeakMap,Ie=xe.Rs();self.uF=class{#ER;constructor(){const t=xe.NR._R(Ie),s={runtime:{value:(this.#ER=t).b4().DR(),writable:!1},lF:{value:t.cF().$R(),writable:!1},hP:{value:t.nP().ZR(),writable:!1}};t.fF(s),t.dF(s),Object.defineProperties(this,s),t.b4().rP(this,t)}static pF(){return xe.NR.mF()}gF(){const t=Ce.get(this);t&&(t.$h(),Ce.delete(this))}addEventListener(t,s,i){ve.we(t),ve.We(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){ve.we(t),ve.We(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}yF(){const t=this.#ER,s=t.b4();s.MF(t),s.LO().CP()||s.L3().IP()||s.LO().wF()||s.GP()}SF(){const t=this.#ER.TF();return t?t.map(t=>t.q3()):[]}*bF(){const t=this.#ER;if(t.xF())for(const s of t.vF())yield s.q3()}get uid(){return this.#ER.CF()}get IF(){return this.#ER.GF()}set a3(t){ve.me(t),this.#ER.l3(t)}get a3(){return this.#ER.EF()}_F(){this.#ER.NF()}get t3(){const t=this.#ER;return t.b4().s3(t)}DF(...t){ve.Re(t);const s=new Set(t),i=this.#ER.AF();return s.isSubsetOf(i)}LF(t){ve.Ze(t,Set),this.#ER.OF(t)}RF(){return new Set(this.#ER.AF())}signal(t){ve.we(t);const s=this.#ER;s.b4().LO().PF(s,t)}ZO(t){ve.we(t);const s=this.#ER;return s.b4().LO().kF(s,t)}}}{const Ge=self.Os,Ee=self.Qs,_e=Ge.Rs();self.FF=class extends self.uF{#ER;#jF=!1;#zF=null;#BF=!1;#UF=null;#WF;#QF;constructor(t){super(),this.#ER=Ge.NR._R(_e),this.#jF=!1,this.#zF=null,this.#BF=!1,this.#UF=null,this.#WF=t?.domComponentId,this.#QF=t?.wrapperComponentId}gF(){this.JF(!1),this.VF(!1),super.gF()}YF(){return Ge.NR.HF()}qF(t){const s=this.#ER;s.b4().ZF(t,s)}XF(t){const s=this.#ER;return s.b4().KF(t,s)}$F(t,s){if(Ee.we(t),Ee.We(s),!this.#WF)throw new Error("no DOM component id set");const i=this.#ER.b4();i.tj(this.#WF,t,s)}sj(t){Ee.Re(t);for(const[s,i]of t)this.$F(s,i)}ij(t,s){if(Ee.we(t),!this.#WF)throw new Error("no DOM component id set");const i=this.#ER.b4();i.Xc(this.#WF,t,s)}ej(t,s){if(Ee.we(t),!this.#WF)throw new Error("no DOM component id set");const i=this.#ER.b4();return i.u4(this.#WF,t,s)}hj(t,s){const i=this.#ER.b4();if(!i.yO())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#WF,handler:t,data:s,responseId:null});this.ij(t,s)}JF(t){if(this.#jF!==(t=!!t)){this.#jF=t;const s=this.#ER.b4();t?(this.#zF||(this.#zF=()=>this.nj()),s.Nf().addEventListener("tick",this.#zF)):s.Nf().removeEventListener("tick",this.#zF)}}rj(){return this.#jF}nj(){}VF(t){if(this.#BF!==(t=!!t)){this.#BF=t;const s=this.#ER.b4();t?(this.#UF||(this.#UF=()=>this.oj()),s.Nf().addEventListener("tick2",this.#UF)):s.Nf().removeEventListener("tick2",this.#UF)}}aj(){return this.#BF}oj(){}uj(){return[]}lj(){return null}cj(t){}fj(){if(!this.#QF)throw new Error("no wrapper component id set");const t=this.#ER.b4();return t.dj(this.#QF)}pj(t,s){if(Ee.we(t),Ee.We(s),!this.#QF)throw new Error("no wrapper component id set");const i=this.#ER.b4();i.mj(this.#QF,t,s)}gj(t){Ee.Re(t);for(const[s,i]of t)this.pj(s,i)}yj(t,s){if(!this.#QF)throw new Error("no wrapper component id set");this.runtime.GO.Mj(this.#QF,t,s)}wj(t,s){if(this.#QF)return this.runtime.GO.Sj(this.#QF,t,s);throw new Error("no wrapper component id set")}}}{let t=function(t){return class h extends t{#Tj;#bj;constructor(t){super(t);const s=Ne.NR._R(Oe),i=s.t4(),e=(this.#Tj=s,this.#bj=i,Le.set(this,s),[]),h=i.xj();if(h){const r=i.cF()._P().NP().length;for(let t=0;t<r;++t)e.push(new self.DP(h,t))}const n={AP:{value:e,writable:!1}};Object.defineProperties(this,n)}get layout(){return this.#bj.O3().D3()}get vj(){return this.#bj.s4().QP()}get x(){return this.#bj.qS()}set x(t){t=+t;const s=this.#bj;isNaN(t)||s.qS()===t||(s.ZS(t),s.Cj())}get y(){return this.#bj.KS()}set y(t){t=+t;const s=this.#bj;isNaN(t)||s.KS()===t||(s.$S(t),s.Cj())}setPosition(t,s){t=+t,s=+s;const i=this.#bj;isNaN(t)||isNaN(s)||i.qS()===t&&i.KS()===s||(i.Ij(t,s),i.Cj())}Gj(){const t=this.#bj;return[t.qS(),t.KS()]}Ej(t,s){if(t=+t,s=+s,!(isNaN(t)||isNaN(s)||0===t&&0===s)){const i=this.#bj;i._j(t,s),i.Cj()}}get jk(){return this.#bj.tT()}set jk(t){t=+t;const s=this.#Tj,i=this.#bj;isNaN(t)||i.tT()===t||(i.sT(t),s.b4().o4())}get Nj(){return this.#bj.Dj()}get width(){return this.#bj.Yp()}set width(t){t=+t;const s=this.#bj;isNaN(t)||s.Yp()===t||(s.tm(t),s.Cj())}get height(){return this.#bj.nm()}set height(t){t=+t;const s=this.#bj;isNaN(t)||s.nm()===t||(s.Hp(t),s.Cj())}LP(t,s){t=+t,s=+s;const i=this.#bj;isNaN(t)||isNaN(s)||i.Yp()===t&&i.nm()===s||(i.LG(t,s),i.Cj())}getSize(){const t=this.#bj;return[t.Yp(),t.nm()]}get angle(){return this.#bj.kP()}set angle(t){t=Ne.an(+t);const s=this.#bj;isNaN(t)||s.kP()===t||(s.PP(t),s.Cj())}get Aj(){return Ne.ln(this.angle)}set Aj(t){this.angle=Ne.un(t)}fl(){return this.#bj.Lj().gu()}Oj(){return this.#bj.Rj().rl()}Pj(){return this.#bj.kj()}get isVisible(){return this.#bj.bk()}set isVisible(t){t=!!t;const s=this.#Tj,i=this.#bj;i.bk()!==t&&(i.Sk(t),s.b4().o4())}get opacity(){return this.#bj.lN()}set opacity(t){t=Ne.rn(+t,0,1);const s=this.#Tj,i=this.#bj;isNaN(t)||i.lN()===t||(i.fN(t),s.b4().o4())}set Fj(t){if(De.Re(t),t.length<3)throw new Error("expected 3 elements");ke.zo(t[0],t[1],t[2]);const s=this.#Tj,i=this.#bj;i.jj().ia(ke)||(i.zj(ke),s.b4().o4())}get Fj(){const t=this.#bj.jj();return[t.Ho(),t.qo(),t.Zo()]}set sL(t){De.we(t);const s=Re.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#Tj,e=this.#bj;e.FS(s),i.b4().o4()}get sL(){return Pe.get(this.#bj.Vk())}Bj(){this.#bj.Uj()}Wj(){this.#bj.Qj()}Jj(t){De.Ze(t,Ae);const s=this.#Tj,i=s.b4().ZP(t);if(!i)throw new Error("invalid layer");s.t4().Vj(i)}Yj(t,s){De.Ze(t,h),this.#bj.Hj(Le.get(t),s)}get zIndex(){return this.#bj.i4()}get qj(){return this.#bj.Zj()}set qj(t){this.#bj.Xj(!!t)}Fu(t,s){return De.ue(t),De.ue(s),this.#bj.Kj(+t,+s)}Q4(t){De.Ze(t,h);const s=this.#Tj,i=Le.get(t);return s.b4().uO().J4(s,i)}Y4(){const t=this.#Tj,s=t.b4().uO().H4(t);return s?s.q3():null}getParent(){const t=this.#Tj.$j();return t?t.q3():null}t5(){const t=this.#Tj.s5();return t?t.q3():null}*i5(){for(const t of this.#Tj.i5())yield t.q3()}e5(){return this.#Tj.h5()}n5(t){const s=this.#Tj.r5(t);return s?s.q3():null}*children(){for(const t of this.#Tj.children())yield t.q3()}*o5(){for(const t of this.#Tj.o5())yield t.q3()}a5(t,s){De.Ze(t,h),De.Ee(s),s=s||{};const i=this.#Tj,e=Le.get(t);i.u5(e,s)}removeChild(t){De.Ze(t,h);const s=this.#Tj,i=Le.get(t);s.l5(i)}c5(){const t=this.#Tj;if(t.f5()){const s=t.$j();s.l5(t)}}d5(){const t=this.#bj;return{p5:t.m5(),g5:t.y5(),M5:t.w5(),S5:t.T5(),b5:t.x5(),v5:t.C5(),I5:t.G5(),E5:t._5(),N5:t.D5()}}A5(t,s){De.me(t),De.me(s),this.#bj.L5(t,s)}O5(){const t=this.#bj;t.R5(),t.Cj()}P5(t,s,i){De.me(t),De.me(s),De.Ge(i);const e=this.#bj;e.k5(t,s,i)&&e.Cj()}F5(t,s){let i=NaN,e=NaN,h=NaN,n=NaN,r=NaN,o=this.#bj;if(o.j5()){const a=o.z5(),u=a.RT(t,s);null!==u&&(i=u.qS(),e=u.KS(),h=u.tT(),n=u.iT(),r=u.hT())}return{x:i,y:e,jk:h,u:n,v:r}}B5(){const t=this.#bj;if(!t.j5())return[0,0];const s=t.z5();return[s.vT(),s.CT()]}}};0;const Ne=self.Os,De=self.Qs,Ae=self.qP,Le=new WeakMap,Oe=Ne.Rs(),Re=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Pe=new Map([...Re.entries()].map(t=>[t[1],t[0]])),ke=Ne.Kh(Ne.Oo);self.U5=t(self.uF),self.W5=t(self.FF)}{const Fe=self.Qs;self.Q5=class extends self.U5{#ER;constructor(){super(),this.#ER=self.uF.pF()}J5(){return this.#ER.Y5().V5()}focus(){this.#ER.Y5().H5()}blur(){this.#ER.Y5().q5()}Z5(t,s){Fe.we(t),this.#ER.Y5().X5(t,s)}}}{let e=function(t){let s=Be.get(t);return s||(s=je.Kh(je.Event.Nf),Be.set(t,s)),s};e;const je=self.Os,ze=self.Qs,Be=new WeakMap,Ue=je.Rs();self.K5=class{#ER;constructor(){const t=je.NR._R(Ue),s={runtime:{value:(this.#ER=t).b4().DR(),writable:!1},behavior:{value:t.iz().sz(),writable:!1},ez:{value:t.nz().hz(),writable:!1}};Object.defineProperties(this,s),t.b4().rP(this,t)}static pF(){return je.NR.mF()}get rz(){return this.#ER.oz().q3()}gF(){const t=Be.get(this);t&&(t.$h(),Be.delete(this))}addEventListener(t,s,i){ze.we(t),ze.We(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){ze.we(t),ze.We(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}}}{const We=self.Os,Qe=We.Rs();self.az=class{constructor(){const t=We.NR._R(Qe),s={runtime:{value:t.b4().DR(),writable:!1},behavior:{value:t.iz().sz(),writable:!1},name:{value:t.zc(),writable:!1}};Object.defineProperties(this,s)}}}{const Je=self.Os,Ve=Je.Rs();self.uz=class{#ER;constructor(){const t=Je.NR._R(Ve),s={runtime:{value:(this.#ER=t).b4().DR(),writable:!1}};Object.defineProperties(this,s)}oP(){return this.#ER.gP().map(t=>t.q3())}static HR(t){if(!t)return null;const s=Je.NR.lz(t);return s?s.sz():null}}}{const Ye=self.Os,He=self.Qs,qe=Ye.Kh(Ye.Oo);self.DP=class{#ER;constructor(t,s){this.#ER=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){const t=this.#ER.NP();return t[this.index].zc()}get isActive(){return this.#ER.cz(this.index)}set isActive(t){t=!!t;const s=this.#ER;s.cz(this.index)!==t&&(s.fz(this.index,t),s.dz(),s.b4().o4())}setParameter(t,s){He.me(t),t=Math.floor(+t);const i=this.#ER,e=i.pz(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof Ye.Oo){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");qe.zo(s[0],s[1],s[2]),s=qe}else if("number"!=typeof s)throw new TypeError("expected number");const h=i.mz(this.index,t,s);h&&i.cz(this.index)&&i.b4().o4()}getParameter(t){He.me(t),t=Math.floor(+t);const s=this.#ER,i=s.pz(this.index,t);if(null===i)throw new RangeError("invalid index");return i instanceof Ye.Oo?[i.Ho(),i.qo(),i.Zo()]:i}}}self.gz=class{#ER;constructor(t){this.#ER=t,Object.defineProperties(this,{name:{value:t.zc(),writable:!1}})}get speed(){return this.#ER.yz()}get Mz(){return this.#ER.wz()}get repeatCount(){return this.#ER.Sz()}get Tz(){return this.#ER.bz()}get xz(){return this.#ER.vz()}get frameCount(){return this.#ER.Cz()}Iz(){return this.#ER.Gz().map(t=>t.Ez())}*frames(){for(const t of this.#ER.Gz())yield t.Ez()}};self.S4=class{#ER;constructor(t){this.#ER=t}static w4(t){return t.#ER}get width(){return this.#ER.Yp()}get height(){return this.#ER.nm()}getSize(){const t=this.#ER;return[t.Yp(),t.nm()]}_z(t){return t.Nz(this)}Dz(){return this.#ER.cE().gu()}};{const Ze=self.Qs;self.Az=class extends self.S4{#ER;constructor(t){super(t.Lz()),this.#ER=t,Object.defineProperties(this,{duration:{value:t.Oz(),writable:!1},Rz:{value:t.Pz(),writable:!1},kz:{value:t.Fz(),writable:!1}})}jz(){const t=this.#ER;return[t.Pz(),t.Fz()]}zz(){return this.#ER.Bz()}Uz(t){return this.Wz(t)[0]}Qz(t){return this.Wz(t)[1]}Wz(t){let s=this.#ER,i=null;if("number"==typeof t)i=s.Jz(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.Vz(t)}return i?[i.qS(),i.KS()]:this.jz()}Yz(){const t=this.#ER.qz();return t?t.El():0}Zz(t){return this.Xz(t)[0]}Kz(t){return this.Xz(t)[1]}Xz(t){Ze.me(t),t=Math.floor(t);const s=this.#ER.qz();if(!s||t<0||t>=s.El())return[0,0];const i=s.Gl(),e=i[2*t],h=i[2*t+1];return[e,h]}get tag(){return this.#ER.$z()}}}{let s=function(t){const s=Ke.get(t);if(s.tB())throw new Error("timeline/tween was released and is no longer valid");return s};s;const Xe=self.Qs,Ke=new WeakMap;self.sB=class{constructor(t){Ke.set(this,t),t.b4().rP(this,t)}pause(){s(this).iB()}resume(){s(this).eB()}stop(){s(this).Xf()}DF(t){return s(this).hB(t)}set time(t){Xe.me(t),s(this).nB(t)}get time(){return s(this).jD()}set totalTime(t){Xe.me(t),s(this).rB(t)}get totalTime(){return s(this).oB()}set Mz(t){s(this).aB(!!t)}get Mz(){return s(this).uB()}set xz(t){s(this).lB(!!t)}get xz(){return s(this).cB()}set playbackRate(t){Xe.me(t),s(this).fB(t)}get playbackRate(){return s(this).dB()}get progress(){const t=s(this);return t.jD()/t.oB()}get tags(){return s(this).pB()}get finished(){return s(this).mB()}get isPlaying(){return s(this).IsPlaying()}get gB(){return s(this).yB()}get MB(){return Ke.get(this).tB()}}}{let i=new WeakMap;self.wB=class extends self.sB{constructor(t){super(t),i.set(this,t);const s={name:{value:t.zc(),writable:!1}};Object.defineProperties(this,s)}}}{let i=function(t){const s=h.get(t);if(s.tB())throw new Error("tween was released and is no longer valid");return s},e=(i,self.Qs),h=new WeakMap,n=new WeakMap,r=null;self.SB=class extends self.sB{constructor(t,s,i){super(t),r=r||i.easeToIndexFunc,h.set(this,t),s&&n.set(this,s)}stop(){const t=i(this),s=n.get(this);s.ReleaseTween(t)}TB(t){e.we(t);const s=self.ic.Tc(r(t));i(this).bB(s)}get rz(){const t=i(this).xB();return t?t.q3():null}get vB(){return i(this).CB()}set vB(t){i(this).IB(!!t)}get value(){const t=i(this);if("value"!==t.GB())throw new Error("not a value tween");return t._B("value").EB()}}}self.NB=class extends self.GR{constructor(){super()}};{const $e=self.Os,th=self.Qs,sh=$e.Rs();self.DB=class extends self.NB{#ER;#WF;#AB=0;#LB=new Map;constructor(t){if(super(),this.#ER=$e.NR._R(sh),!t?.domComponentId)throw new Error("no DOM component ID specified");this.#WF=t.domComponentId,this.OB("elem-focused",t=>t.RB()),this.OB("elem-blurred",t=>{t&&t.PB()})}kB(t){const s=this.#AB++;return this.#LB.set(s,t),s}jB(t){this.#LB.delete(t)}OB(t,i){const s=this.#ER.b4();s.tj(this.#WF,t,t=>{const s=this.#LB.get(t.elementId);i(s,t)})}zB(t){th.Re(t);for(const[s,i]of t)this.zB(s,i)}}}{const ih=self.Os,eh=(new WeakMap,ih.Rs());self.BB=class extends self.eP{#ER;constructor(){super(),this.#ER=ih.NR._R(eh)}UB(){}WB(){return this.#ER.Lz().QB()}JB(t){}VB(t){}YB(){}HB(t){}}}{const hh=self.Os,nh=(new WeakMap,hh.Rs());self.qB=class extends self.W5{#ER;#ZB=null;#XB=null;constructor(t){super(t),this.#ER=hh.NR._R(nh)}gF(){if(super.gF(),this.#ZB){const t=this.#ER.b4().Nf();t.removeEventListener("renderercontextlost",this.#ZB),t.removeEventListener("renderercontextrestored",this.#XB),this.#ZB=null,this.#XB=null}}KB(){if(!this.#ZB){this.#ZB=()=>this.$B(),this.#XB=()=>this.tU();const t=this.#ER.b4().Nf();t.addEventListener("renderercontextlost",this.#ZB),t.addEventListener("renderercontextrestored",this.#XB)}}$B(){}tU(){}sU(t){}}}{const rh=self.Os,oh=rh.Kh(rh.Rect),ah=new WeakMap,uh=rh.Rs();self.iU=class extends self.qB{#eU=-1;#hU=!0;#nU=!1;#rU=!1;#oU=-.2;#aU=rh.Kh(rh.Rect,0,0,-1,-1);#uU=0;#lU=0;#cU=-1;#fU=-1;#dU=!1;constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const s=rh.NR._R(uh),i=(ah.set(this,s),this.#eU=this.hP.kB(this),s.b4().dR());this.#uU=i.pU(),this.#lU=i.mU(),this.JF(!0)}gF(){super.gF(),this.hP.jB(this.#eU),this.gU("destroy"),this.#eU=-1,ah.delete(this)}yU(){const t=ah.get(this).b4();if(t.yO())throw new Error("not valid in worker mode");return this.MU("get-element")}gU(t,s){(s=s||{}).elementId=this.#eU,this.ij(t,s)}MU(t,s){return(s=s||{}).elementId=this.#eU,this.hj(t,s)}wU(t,s){return(s=s||{}).elementId=this.#eU,this.ej(t,s)}SU(t){t=t||{};const s=ah.get(this).t4();t.elementId=this.#eU,t.isVisible=s.bk(),t.htmlIndex=s.s4().TU(),t.htmlZIndex=s.bU(),Object.assign(t,this.xU()),this.#hU=!!t.isVisible,this.hj("create",t),this.vU(!0)}CU(t){this.#hU!==(t=!!t)&&(this.#hU=t,this.gU("set-visible",{isVisible:t}))}nj(){this.vU(!1)}IU(){const t=ah.get(this).b4(),s=t.dR().GU();return"Android"===rh.hi.ni&&("scale-inner"===s||"scale-outer"===s||"crop"===s)}vU(l){const c=ah.get(this);if(!c.EU()){let t=c.t4(),s=t.s4(),i=t.Lj(),[e,h]=s.iF(i.fu(),i.du()),[n,r]=s.iF(i.pu(),i.mu()),o=c.b4().dR(),a=o.yR(),u=o.wR();if(t.bk()&&s.bk())if(!this.IU()&&(n<=0||r<=0||a<=e||u<=h))this.CU(!1);else{oh.set(e,h,n,r);const f=o.pU(),d=o.mU(),p=s.TU(),m=t.bU();if(!l&&oh.equals(this.#aU)&&this.#uU===f&&this.#lU===d&&this.#cU===p&&this.#fU===m)this.CU(!0);else{this.#aU.C(oh),this.#uU=f,this.#lU=d,this.#cU=p,this.#fU=m,this.CU(!0);let t=null;this.#rU&&(t=s._U()+this.#oU),this.gU("update-position",{left:Math.round(this.#aU.fu()),top:Math.round(this.#aU.du()),width:Math.round(this.#aU.width()),height:Math.round(this.#aU.height()),htmlIndex:p,htmlZIndex:m,fontSize:t})}}else this.CU(!1)}}NU(){this.MU("focus",{focus:!0})}DU(){this.MU("focus",{focus:!1})}RB(){this.#nU=!0}PB(){this.#nU=!1}AU(){return this.#nU}LU(t,s){this.postToDOMElement("set-css-style",{prop:rh.Do(t),val:s})}OU(t,s){this.postToDOMElement("set-attribute",{name:t,val:s})}RU(t){this.postToDOMElement("remove-attribute",{name:t})}PU(){this.#dU||(this.#dU=!0,Promise.resolve().then(()=>{this.#dU=!1,this.gU("update-state",this.xU())}))}xU(){}kU(){return this.#eU}}}self.FU=class extends self.uz{constructor(){super()}};self.jU=class extends globalThis.az{constructor(){super()}UB(){}};{const lh=self.Os,ch=new WeakMap,fh=lh.Rs();self.zU=class extends self.K5{#jF=!1;#BF=!1;#BU=!1;constructor(){super(),ch.set(this,lh.NR._R(fh))}gF(){super.gF(),this.JF(!1),this.VF(!1),this.UU(!1),ch.delete(this)}YF(){return lh.NR.HF()}WU(){}qF(t){const s=ch.get(this);s.b4().ZF(t,s.oz(),s.nz())}XF(t){const s=ch.get(this);return s.b4().KF(t,s.oz(),s.nz())}JF(t){if(this.#jF!==(t=!!t)){this.#jF=t;const s=ch.get(this).b4();t?s.QU(this):s.JU(this)}}rj(){return this.#jF}nj(){}VF(t){if(this.#BF!==(t=!!t)){this.#BF=t;const s=ch.get(this).b4();t?s.VU(this):s.YU(this)}}aj(){return this.#BF}oj(){}UU(t){if(this.#BU!==(t=!!t)){this.#BU=t;const s=ch.get(this).b4();t?s.HU(this):s.qU(this)}}ZU(){return this.#BU}XU(){}uj(){return[]}lj(){return null}cj(t){}}}{let e=self.Qs,h=null;self.EO=class{constructor(t){h=t}f4(t){h.d4(t)}Mj(t,s,i){e.we(t),e.we(s),e.Pe(i),h.KU(t,s,i)}Sj(t,s,i){return e.we(t),e.we(s),e.Pe(i),h.$U(t,s,i)}tW(t){return e.Se(t),new self.sW(h,t)}set iW(t){h.eW(!!t)}get iW(){return h.hW()}nW(t){h.rW(!!t)}oW(t){e.ue(t);const s=h.aW(t);return s?s.$R():null}}}self.sW=class{#uW;#lW;#cW;#fW;#dW;#pW;constructor(t,s){const i=(this.#uW=t).LO(),e=t.jO(),h=(this.#lW=e,this.#cW=e.mW(),t.VO()),n=(this.#fW=h.gW(),this.#dW=h.yW(e),i.MW()),r=n.yW();this.#pW=r,s&&r.wW(s),t.SW(!1)}TW(){const t=this.#uW.LO(),s=this.#cW,i=this.#pW;t.bW(s),this.#lW.xW(this.#fW,this.#dW),t.vW(s),i.IW(i.iO()+1)}get GW(){return this.#pW.EW()}release(){const t=this.#uW,s=t.VO(),i=t.LO().MW();t.SW(!0),i._W(),s._W()}};{let d=self.Os,h=self.Qs,p=null,n=null;self.NW=class{constructor(t,s){n=t,p=s}DW(){p.wN()}AW(t){p.yN(t)}LW(){p.IM()}OW(){p.SM()}RW(){p.LM()}setColor(t){p.cN(t[0],t[1],t[2],t[3])}PW(t,s,i,e){p.cN(t,s,i,e)}kW(){p.dN()}FW(t){p.fN(t)}jW(t){p.iw(t)}zW(){p.ew()}rect(t){p.bN(t.left,t.top,t.right,t.bottom)}BW(t,s,i,e){p.bN(t,s,i,e)}UW(t){p.Uu(d.Uu.ol(t))}WW(t,s,i,e,h,n,r,o){p.Uw(t,s,i,e,h,n,r,o)}QW(t,s){p.pw(d.Uu.ol(t),d.Rect.yu(s))}JW(t,s){p.CN(d.Uu.ol(t),d.Uu.ol(s))}VW(t,s,i,e,h,n,r,o,a,u,l,c,f){p.IN(t,s,i,e,h,n,r,o,a,u,l,c,d.Rect.yu(f))}YW(t,s,i,e,h,n,r,o,a,u,l,c,f){p.uw(t,s,i,e,h,n,r,o,a,u,l,c,d.Uu.ol(f))}HW(t,s,i){p.GN(t,s,i)}qW(t){p.Bw(t)}line(t,s,i,e){p.lm(t,s,i,e)}ZW(t,s,i,e,h,n){p.lw(t,s,i,e,h,n)}XW(t,s,i,e){p.mw(t,s,i,e)}KW(t){p.ww(d.Rect.yu(t))}$W(t){p.Sw(d.Uu.ol(t))}t6(t){p.Gw(t)}s6(){p.Ew()}i6(t){p.Aw(t)}e6(){p.Pw()}h6(t){h.Xe(t,self.n6);const s=t?n.ZP(t):null;p.mN(s)}r6(t,s){const i=self.S4.w4(t);if(i)return i.o6(p,{VT:s?.VT??"clamp-to-edge",YT:s?.YT??"clamp-to-edge",HT:s?.HT??"trilinear",XT:s?.XT??!0});throw new Error("invalid IImageInfo")}a6(t){const s=self.S4.w4(t);if(!s)throw new Error("invalid IImageInfo");s.sG()}Nz(t){const s=self.S4.w4(t);if(!s)throw new Error("invalid IImageInfo");const i=s.pb();return self.n6.u6(n,i)}l6(t,s,i){h.me(t),h.me(s);const e=p.eb(t,s,{VT:i?.VT??"clamp-to-edge",YT:i?.YT??"clamp-to-edge",HT:i?.HT??"trilinear",XT:i?.XT??!0});return self.n6.u6(n,e)}c6(t,s,i){h.Ze(s,self.n6);const e=n.ZP(s);p.lE(t,e,{premultiplyAlpha:i?.premultiplyAlpha??!0})}deleteTexture(t){h.Ze(t,self.n6);const s=n.ZP(t);p.ob(s)}f6(){const t=p.eS();return new self.d6(n,t)}p6(){n.dR().m6(p)}g6(t){h.Ze(t,globalThis.qP);const s=n.ZP(t);s.y6(p)}}}{const dh=new WeakMap,ph=new WeakMap;self.n6=class{constructor(t,s){dh.set(this,{runtime:t,M6:s}),ph.set(s,this),t.rP(this,s),Object.defineProperties(this,{width:{value:s.Yp(),writable:!1},height:{value:s.nm(),writable:!1}})}static u6(t,s){if(!s)return null;const i=ph.get(s);return i||new self.n6(t,s)}}}{let e=function(t){return gh.get(t).w6};e;const mh=self.Qs,gh=new WeakMap;self.d6=class{constructor(t,s){gh.set(this,{runtime:t,w6:s}),t.rP(this,s)}release(){e(this).$h()}set S6(t){mh.we(t),e(this).uG(t)}get S6(){return e(this).cI()}set T6(t){mh.me(t),e(this).lG(t)}get T6(){return e(this).cG()}set lineHeight(t){mh.me(t),e(this).dG(t)}get lineHeight(){return e(this).pG()}set b6(t){e(this).mG(t)}get b6(){return e(this).gG()}set x6(t){e(this).yG(t)}get x6(){return e(this).MG()}setColor(t){mh.Re(t),this.v6(t[0],t[1],t[2])}v6(t,s,i){e(this).xG(t,s,i)}C6(t){mh.we(t),e(this).jS(t)}set I6(t){e(this).vG(t)}get I6(){return e(this).CG()}set verticalAlign(t){e(this).IG(t)}get verticalAlign(){return e(this).GG()}set G6(t){e(this).EG(t)}get G6(){return e(this)._G()}set E6(t){e(this).NG(t)}get E6(){return e(this).DG()}set text(t){mh.we(t),e(this).Kc(t)}get text(){return e(this).AG()}LP(t,s,i){mh.me(t),mh.me(s),mh.me(i),e(this).LG(t,s,i)}_z(){const{runtime:t,w6:s}=gh.get(this),i=s.pb();return self.n6.u6(t,i)}Dz(){return e(this).cE().gu()}_6(t){mh.We(t),e(this).eG=t}N6(){e(this).sG()}get D6(){return e(this).PG()}get A6(){return e(this).FG()}}}{let e=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return Mh.get(i)||""},n=function(e){return new Promise((t,s)=>{const i=document.createElement("script");i.onload=t,i.onerror=s,i.async=!1,i.type="module",i.src=e,document.head.appendChild(i)})};e,n;const g=self.Os,yh=new Set(["local","remote"]),Mh=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);g.L6=class extends g.Zh{constructor(t,s){super();const i=s.exportType,e=(this.Hc=t,this.O6="folders",this.R6=new Map,this.P6="cordova"===i,this.k6=!!s.isiOSCordova,this.F6=!!s.isFileProtocol,this.j6=s.swClientId,this.z6=s.supportedAudioFormats||{},this.B6=new Map,this.U6=!1,this.W6=s.scriptFolder,this.Q6="",this.J6="",this.V6="",this.Y6=s.fileMap||new Map,this.H6=new Map,"html5"===i||"scirra-arcade"===i||"instant-games"===i);this.q6=e?"remote":"local",this.Z6=new Map,this.X6=[],this.K6=[],this.tQ=!1,this.sQ=0,this.iQ=0,this.eQ=0,this.hQ=!1,this.nQ=g.Kh(g.u1,()=>this.rQ(),50),this.oQ=g.Kh(g.$0,Math.max(g.hardwareConcurrency,8)),this.aQ=g.Kh(g.$0,20),this.uQ=new self.m4(this)}$h(){for(const t of this.Z6.values())t.$h();this.Z6.clear(),g.Nr(this.K6),this.Hc=null}b4(){return this.Hc}lQ(t){this.O6=t}N4(){return this.O6}cQ(){return this.W6}fQ(t){this.Q6=t}L4(){return this.Q6}dQ(t){this.J6=t}pQ(){return this.J6}mQ(t){this.V6=t}gQ(){return this.V6}yQ(){return this.F6}po(t,s){return s=s||this.q6,g.uo(t)?("flat"===this.O6&&(t=t.toLowerCase()),this.P6&&this.F6?this.MQ(t):"playable-ad-single-file"===this.Hc.uR()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===s?this.oQ:this.aQ).$l(()=>g.po(t))):g.po(t)}mo(t){return g.uo(t)?("flat"===this.O6&&(t=t.toLowerCase()),this.P6&&this.F6?this.wQ(t):"playable-ad-single-file"===this.Hc.uR()?g.Mo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.q6?this.oQ:this.aQ).$l(()=>g.mo(t))):g.mo(t)}fo(t){return g.uo(t)?("flat"===this.O6&&(t=t.toLowerCase()),this.P6&&this.F6?this.SQ(t):"playable-ad-single-file"===this.Hc.uR()?g.wo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.q6?this.oQ:this.aQ).$l(()=>g.fo(t))):g.fo(t)}async do(t){const s=await this.fo(t);return JSON.parse(s)}TQ(t,s){return"flat"===this.O6&&(t=t.toLowerCase()),this.Hc.u4("runtime","cordova-fetch-local-file",{filename:t,as:s})}SQ(t){return this.TQ(t,"text")}async MQ(t){const s=await this.TQ(t,"buffer"),i=e(t);return new Blob([s],{type:i})}async bQ(t){"flat"===this.O6&&(t=t.toLowerCase());let s=this.R6.get(t);if(!s){const i=await this.MQ(t);s=URL.createObjectURL(i),this.R6.set(t,s)}return s}wQ(t){return this.TQ(t,"buffer")}D4(t){"flat"===this.O6&&(t=t.toLowerCase());let s=this.Q6+t;return"Gecko"===g.hi.ci&&"preview"===this.Hc.uR()?this.xQ(s):s}E4(t){return g.ao(t)?Promise.resolve(t):this.P6&&this.F6?this.bQ(t):"playable-ad-single-file"===this.Hc.uR()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.O6&&(t=t.toLowerCase()),Promise.resolve(t))}vQ(s){if(g.ao(s)||"preview"!==this.Hc.uR()||!this.j6||!s)return s;try{const t=new URL(s,location.href);return t.searchParams.set("__c3_client_id",this.j6),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+s),s}}CQ(t){return this.E4(t)}IQ(t){if(t.GQ&&!yh.has(t.GQ))throw new Error("invalid load policy");let s=this.Z6.get(t.url);return s||(s=g.Kh(g.EQ,this,{url:t.url,size:t.size||0,GQ:t.GQ||this.q6}),this.Z6.set(s._Q(),s),this.tQ)||(this.sQ+=s.Yl(),this.K6.push(s.NQ().then(()=>this.DQ(s.Yl())))),s}AQ(t){this.Z6.delete(t._Q())}async LQ(){try{await Promise.all(this.K6),this.eQ=1}catch(t){console.error("Error loading: ",t),this.hQ=!0,this.rQ()}}OQ(){this.tQ=!0}RQ(){return this.hQ}DQ(t){this.iQ+=t,this.nQ.v1()}rQ(){const t=g.Kh(g.Event,"loadingprogress");this.eQ=g.rn(this.iQ/this.sQ,0,1),t.progress=this.eQ,this.Hc.Nf().dispatchEvent(t)}PQ(){return this.eQ}kQ(t){g.Or(this.X6,t),this.X6.length&&this.K6.push(this.FQ())}async FQ(){const t=[],s=[];for(const[i,e,h]of this.X6)this.sQ+=h,t.push(this.jQ(i,e,s).then(()=>this.DQ(h)));await Promise.all(t),this.Hc.yO()&&0<s.length&&await this.Hc.u4("runtime","load-webfonts",{webfonts:s})}async jQ(s,i,e){try{let t=await this.E4(i);"Gecko"===g.hi.ci&&(s=`'${s}'`),("Gecko"===g.hi.ci&&"preview"===this.Hc.uR()||"playable-ad-single-file"===this.Hc.uR())&&(t=this.xQ(t));const h=new FontFace(s,`url('${t}')`);(this.Hc.yO()?self:document).fonts.add(h),await h.load(),this.Hc.yO()&&e.push({name:s,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${s}': `,t)}}y4(t){return!!this.z6[t]}zQ(t,s){this.U6=!!s;for(const[i,e,h]of t)this.B6.set(i,{fileName:i,BQ:e.map(t=>({type:t[0],UQ:t[1],WQ:i+t[1],fileSize:t[2]})),QQ:h})}JQ(t){"flat"===this.O6&&(t=t.toLowerCase());const s=this.B6.get(t);if(!s)return null;let i=null;for(const e of s.BQ)if(i||"audio/webm; codecs=opus"!==e.type||(i=e),this.y4(e.type))return e;return i}VQ(t){const s=this.JQ(t);return s?{url:this.D4(s.WQ),type:s.type}:null}YQ(){if(this.U6){const t=[];for(const s of this.B6.values())if(!s.QQ){const i=this.JQ(s.fileName);i&&t.push({HQ:s.fileName,url:this.D4(i.WQ),type:i.type,fileSize:i.fileSize})}return t}return[]}qQ(t){return"preview"===this.Hc.uR()&&(t=new URL(t,location.href).toString()),this.Y6.get(t)||null}xQ(t){let s=this.H6.get(t);if(!s){const i=this.qQ(t);if(!i)return t;s=URL.createObjectURL(i),this.H6.set(t,s)}return s}nO(){return this.uQ}async F4(...t){const s=await Promise.all(t.map(t=>this.E4(t)));if(this.Hc.yO())if(1===t.length){const i=t[0];await import((g.uo(i)?"./":"")+i)}else{const e=t.map(t=>`import "${g.uo(t)?"./":""}${t}";`).join("\n"),h=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));await import(h)}else await Promise.all(s.map(t=>n(t)))}async z4(t){if(WebAssembly.compileStreaming){const s=await this.E4(t);return WebAssembly.compileStreaming(fetch(s))}{const i=await g.mo(t);return WebAssembly.compile(i)}}async U4(t){const s=await this.E4(t);return this.Hc.u4("runtime","add-stylesheet",{url:s})}}}{const wh=self.Os;wh.ZQ=class extends wh.Zh{constructor(t,s){super(),this.XQ=t,this.Hc=t.b4(),this.KQ=s.url||"",this.$Q=s.size,this.tJ=s.GQ,this.sJ=s.blob||null,this.iJ=!!this.sJ,this.vg=null}$h(){this.vg=null,this.XQ=null,this.Hc=null,this.sJ=null}_Q(){return this.KQ}Yl(){return this.$Q}NQ(){return"local"===this.tJ||this.sJ?(this.iJ=!0,Promise.resolve()):(this.vg||(this.vg=this.XQ.po(this.KQ,this.tJ).then(t=>(this.iJ=!0,this.vg=null,this.sJ=t)).catch(t=>{console.error("Error loading resource: ",t),this.vg=null})),this.vg)}eJ(){return this.iJ}hJ(){return this.sJ?Promise.resolve(this.sJ):this.vg||this.XQ.po(this.KQ,this.tJ)}}}{const Sh=self.Os,un=new Sh.$0,ln=new Set;Sh.EQ=class extends Sh.ZQ{constructor(t,s){super(t,s),this.nJ=null,this.rJ=null,this.ed=0,this.oJ=-1,this.aJ=-1,ln.add(this)}$h(){if(0!==this.ed)throw new Error("released image asset which still has texture references");this.XQ.AQ(this),this.nJ=null,ln.delete(this),super.$h()}static uJ(){for(const t of ln)t.nJ=null,t.rJ=null,t.ed=0}o6(t,s){return s=s||{},this.ed++,this.rJ?Promise.resolve(this.rJ):(this.nJ||(s.qT=this.Hc.dR().lJ(),this.nJ=this.cJ(t,s)),this.nJ)}async cJ(s,i){try{const e=await this.hJ();return 0===this.ed?this.nJ=null:await un.$l(async()=>{const t=await s.KN(e,i);return this.nJ=null,0===this.ed?(s.ob(t),null):(this.rJ=t,this.oJ=t.Yp(),this.aJ=t.nm(),this.rJ)})}catch(t){throw console.error("Failed to load texture: ",t),t}}sG(){if(this.ed<=0)throw new Error("texture released too many times");if(this.ed--,0===this.ed&&this.rJ){const t=this.rJ.MS();t.ob(this.rJ),this.rJ=null}}fJ(){return this.ed}pb(){return this.rJ}Yp(){return this.oJ}nm(){return this.aJ}async dJ(){const t=await this.hJ();return Sh.Pi.ImageBitmap?createImageBitmap(t):Sh.To(t)}}}{let t=function(t,s){return t.t4().pJ()-s.t4().pJ()};t;const cn=self.Os;cn.mJ=class extends cn.Zh{constructor(t,s,i){super(),this.gJ=t,this.Wa=s,this.Qa=i,this.yJ=[],this.MJ=!0,this.wJ=new Set,this.SJ=!1}$h(){cn.Nr(this.yJ),this.wJ.clear(),this.gJ=null}Xf(){cn.Nr(this.yJ),this.MJ=!0,this.wJ.clear(),this.SJ=!1}TJ(){this.MJ=!1}Ql(){if(this.yJ.length){if(this.yJ.length>this.wJ.size)return!1;this.bJ()}return!0}xJ(t){this.wJ.has(t)?(this.wJ.delete(t),0===this.wJ.size&&(this.SJ=!1)):(this.yJ.push(t),this.MJ=1===this.yJ.length)}u0(t){this.wJ.add(t),this.SJ=!0,50<=this.wJ.size&&this.bJ()}bJ(){this.SJ&&(this.yJ.length===this.wJ.size?this.Xf():(cn.jr(this.yJ,this.wJ),this.wJ.clear(),this.SJ=!1))}vJ(){this.MJ||(this.yJ.sort(t),this.MJ=!0)}CJ(t){this.bJ(),this.vJ(),this.yJ.length&&t.push(this.yJ)}}}{const fn=self.Os;fn.IJ=class extends fn.Zh{constructor(t,s){super(),this.GJ=t,this.EJ=s,this._J=fn.Kh(fn.Bl)}$h(){this._J.$h(),this._J=null}NJ(t,s,i){let e=this._J.Ks(t,s);return e||(i?(e=fn.Kh(fn.mJ,this,t,s),this._J.Set(t,s,e),e):null)}DJ(t){return Math.floor(t/this.GJ)}AJ(t){return Math.floor(t/this.EJ)}LJ(e,h,n){if(h)for(let i=h.fu(),t=h.pu();i<=t;++i)for(let t=h.du(),s=h.mu();t<=s;++t)if(!n||!n.Fu(i,t)){const r=this.NJ(i,t,!1);r&&(r.u0(e),r.Ql())&&this._J.Jl(i,t)}if(n)for(let i=n.fu(),t=n.pu();i<=t;++i)for(let t=n.du(),s=n.mu();t<=s;++t)h&&h.Fu(i,t)||this.NJ(i,t,!0).xJ(e)}OJ(t,s){let i=this.DJ(t.fu()),e=this.AJ(t.du()),h=this.DJ(t.pu()),n=this.AJ(t.mu());for(;i<=h;++i)for(let t=e;t<=n;++t){const r=this.NJ(i,t,!1);r&&r.CJ(s)}}RJ(t){let s=t.fu(),i=t.du(),e=t.pu(),h=t.mu();for(;s<=e;++s)for(let t=i;t<=h;++t){const n=this.NJ(s,t,!1);n&&n.TJ()}}}}{let r=function(t,s){return t.t4().pJ()-s.t4().pJ()},t=function(t,s){return t.t4().tT()-s.t4().tT()};r,t;const w=self.Os,dn=new w.Rect,pn=new w.Uu,mn=[],gn=(new w.Rect,new w.Rect,self.ys),vh=gn.Cs,Uh=gn.Is,xh=gn.Ts,yn=xh.create(),Mn=vh.create(),wn=Uh.create(),Sn=vh.create(),Tn=vh.create(),bn=vh.create(),xn=w.Kh(w.Ua),vn=(w.Kh(w.Rect),[]),Cn=[],In=[],Gn={name:"",sid:-1,PJ:!1,isVisible:!0,isInteractive:!0,Ck:!1,backgroundColor:[1,1,1,1],zk:!0,kJ:[1,1],opacity:1,Wk:!1,FJ:!1,jJ:!1,zJ:!1,scaleRate:1,sL:0,jk:0,BJ:[],UJ:[],WJ:[]};w.QJ=class extends w.Zh{constructor(t,s,i){super(),i=Object.assign({},Gn,i),this.JJ=t,this.Hc=t.b4(),this.VJ=s,this.hn=i.name,this.Og=-1,this.YJ=!!i.Ck,this.HJ=-1,this.qJ=i.sid,this.ZJ=!!i.PJ,this.XJ=!!i.isVisible,this.KJ=!!i.isInteractive,this.$J=w.Kh(w.Oo),this.$J.Da(i.backgroundColor),this.t8=!!i.zk,this.s8=i.kJ[0],this.i8=i.kJ[1],this.RS=w.Kh(w.Oo,1,1,1,i.opacity),this.e8=w.Kh(w.Oo),this.h8=!!i.Wk,this.n8=!!i.FJ,this.r8=!!i.jJ,this.o8=!!i.zJ,this.a8=i.scaleRate,this.OS=i.sL,this.u8=null,this.l8=1,this.PS=i.jk,this.c8=0,this.f8=0,this.d8=0,this.p8=!1,this.ZE=w.Kh(w.Rect),this.m8=w.Kh(w.Rect),this.g8=w.Kh(w.Rect),this.y8=!0,this.Z2=xh.create(),this.M8=!0,this.BA=xh.create(),this.w8=!0,this.S8=w.Kh(w.Bg.Jg),this.T8=!0,this.b8=[],this.x8=i.BJ,this.v8=[],this.C8=[],this.I8=new Map,this.yJ=[],this.G8=!1,this.E8=!1,this._8=!1;const h=this.Hc.dR();this.N8=w.Kh(w.D8,this,i.UJ),this.KL=w.Kh(w.Bg.KD,h.A8(),{BD:(t,s)=>{const i=s.QL(),e=i.HN();t.jS(i.L8()),t.iD(e),t.eD(e),h.O8(e)},WD:t=>this._P().P8(t)}),this.k8=!0,this.F8=!0,this.j8=null,this.z8=[],this.B8=!1,this.U8=w.Kh(w.Rect,0,0,-1,-1),this.W8=w.Kh(w.Rect,0,0,-1,-1),this.Q8=new self.qP(this),this.J8(),this.V8()&&(this.j8=w.Kh(w.IJ,this.Hc.wO(),this.Hc.TO())),this.Y8=i.WJ.map(t=>w.QJ.H8(this.JJ,this,t))}q8(){for(const t of this.x8){const s=this.Hc.Z8(t[1]);this.JJ.X8(s),s.K8()||(s.tV(t),s.sV(this.Og)),this.v8.push(t),this.I8.set(t[2],t)}w.Or(this.b8,this.v8),this.x8=null}static H8(t,s,i){return w.Kh(w.QJ,t,s,{name:i[0],sid:i[2],isVisible:i[3],isInteractive:i[13],Ck:i[19],backgroundColor:i[4].map(t=>t/255),zk:i[5],kJ:[i[6],i[7]],opacity:i[8],Wk:i[9],FJ:i[17],jJ:i[18],zJ:i[10],scaleRate:i[11],sL:i[12],jk:i[16],BJ:i[14],UJ:i[15],WJ:i[20]})}$h(){for(const t of this.Y8)t.$h();w.Nr(this.Y8);for(const s of this.yJ)this.Hc.MF(s);w.Nr(this.yJ),this.N8.$h(),this.N8=null,this.KL.$h(),this.KL=null,this.Q8=null,this.VJ=null,this.JJ=null,this.Hc=null}iV(t){return this.I8.get(t)}eV(h){let n=this.JJ.hV(),r=0,o=this.v8;for(let e=0,t=o.length;e<t;++e){let t=o[e],s=this.Hc.Z8(t[1]),i=!0;if(!s.nV()||n){const a=this.Hc.rV(t,this,!0);h.push(a),s.oV()&&(i=!1,this.C8.push(a.CF()))}i&&(o[r]=o[e],++r)}w._r(o,r),this.Hc.GP(),this.r4()}aV(t,s){if(!t.nP().RR())throw new Error("instance is not of world type");const i=t.t4();if(i.s4()!==this)throw new Error("instance added to wrong layer");this.yJ.push(t),0!==i.tT()&&(this._8=!0),s&&this.V8()&&t.t4().Cj(),this.r4(t)}uV(t){this.yJ.includes(t)||(this.yJ.push(t),0!==t.t4().tT()&&(this._8=!0),this.r4(t))}lV(t,s){const i=t.t4();if(i.s4()!==this)throw new Error("instance added to wrong layer");this.yJ.unshift(t),0!==i.tT()&&(this._8=!0),this.r4(t),s&&this.V8()&&t.t4().Cj()}cV(t,s){const i=this.yJ.indexOf(t);i<0||(s&&this.V8()&&t.t4().fV(),this.yJ.splice(i,1),this.r4(t),this.dV())}pV(){this._8=!0}dV(){0===this.yJ.length&&(this._8=!1)}mV(t){if(t){const s=new Set;for(const i of this.yJ){const e=i.t4().pJ();0<=e&&s.add(e)}let t=-1;for(const h of this.yJ){const n=h.t4();if(!(0<=n.pJ())){for(++t;s.has(t);)++t;n.gV(t)}}}this.yJ.sort(r)}yV(){}MV(){for(const t of this.yJ)t.cF().oV()||this.Hc.MF(t);this.Hc.GP(),w.Nr(this.yJ),this._8=!1,this.r4()}wV(s,t,i,e,h,n){const r=this.Hc.LO(),o=this.Hc.SV(),a=s.TV(),u=[];for(const l of this.v8){const c=l[0],f=c[0],d=c[1];if(t.Fu(f,d)){const p=o[l[1]];if(p!==s){if(!a)continue;if(!s.bV(p))continue}let t=h;if(!t){const y=this.Hc.X3();t=this.O3()===y?this:(t=y.xV(this.zc()))||y.e4(this.iO())}const m=this.Hc.rV(l,t,!1,void 0,void 0,!1,n),g=(t.bP(m),m.t4());g._j(i,e),g.Cj(),r.xP(!0),m.vP(),r.xP(!1),u.push(m)}}return u}wP(){return this.yJ.length}O3(){return this.JJ}zc(){return this.hn}vV(t){this.Og=t}iO(){return this.Og}CV(t){this.HJ=t}TU(){return this.HJ}Ik(){return this.YJ}Gk(t){this.YJ!==(t=!!t)&&(this.YJ=t,this.JJ.IV(),this.Hc.o4())}GV(){let t=this.dk();return(t?t.gk():this.O3().EV()).indexOf(this)}_V(){return this.qJ}b4(){return this.Hc}NV(){return this.ZJ}DV(){for(const t of this.pk())if(t.NV())return!0;return!1}vR(){return this.Hc.vR()}_P(){return this.N8}sO(){return this.AV(),this.KL}AV(){const t=this.LV();if(this.k8||t!==this.F8||this.KL.UA()){const s=this._P().OV();this.KL.WA(s.map(t=>t.Bx()),{JD:s.map(t=>t.iO()),VD:!t,XD:!0}),this.k8=!1,this.F8=t}}dz(){this._P().dz(),this.k8=!0}V8(){return this.o8&&!this.r8}RV(){return this.j8}PV(){this.B8=!1}bk(){for(const t of this.kV())if(!t.wk())return!1;return!0}wk(){return this.XJ}Sk(t){this.XJ!==(t=!!t)&&(this.XJ=t,this.Hc.o4())}vk(t){this.KJ=!!t}xk(){return this.KJ}_k(){for(const t of this.kV())if(!t.xk())return!1;return!0}Hk(t){if(this.p8!==(t=!!t)){if(this.p8=t){const s=this.O3();this.f8=s.jP(),this.d8=s.BP()}this.FV(),this.Hc.o4()}}jV(){return this.p8}FP(t){const s=this.O3(),i=s.zV(),e=s.BV();this.f8!==(t=(t=e<t?e:t)<i?i:t)&&(this.f8=t,this.jV())&&(this.FV(),this.Hc.o4())}zP(t){const s=this.O3(),i=s.UV(),e=s.WV();this.d8!==(t=(t=e<t?e:t)<i?i:t)&&(this.d8=t,this.jV())&&(this.FV(),this.Hc.o4())}jP(){return this.jV()?this.f8:this.O3().jP()}BP(){return this.jV()?this.d8:this.O3().BP()}Zk(){return this.QV(),this.ZE}JV(){return this.QV(),this.m8}VV(){return this.QV(),this.g8}ak(){const t=this.O3();return[t.YV(),t.HV()]}Ky(t){return this.Hc.Ky(t)}qV(c,e){const h=this.JV();if(0===c)e.C(h);else{let o=h.Su(),a=h.Tu(),t=this.ZV(c),s=h.width()/t,i=h.height()/t,[u,l]=this.ak();if(.5!==u||.5!==l){let t=this.XV(),s=this.Hc,i=this.Ky()/t,e=(u-.5)*s.KV()/i,h=(l-.5)*s.$V()/i,n=this.kP(),r=(0!==n&&(xn.set(e,h),xn.rotate(n),e=xn.Ya(),h=xn.qa()),w.bn(t,0,c));o+=w.Lt(e,0,r),a+=w.Lt(h,0,r)}e.set(o-s/2,a-i/2,o+s/2,a+i/2)}}lN(){return this.RS.Xo()}fN(t){t=w.rn(t,0,1),this.RS.Xo()!==t&&(this.RS.Vo(t),this.J8(),this.Hc.o4())}J8(){this.e8.C(this.RS),this.e8.ua()}L8(){return this.e8}LV(){return this.RS.na(1,1,1,1)}Lk(){return this.a8}Ak(t){this.a8!==t&&(this.a8=t,this.FV(),this.Hc.o4())}Pk(){return this.s8}Fk(){return this.i8}tY(t,s){this.s8===t&&this.i8===s||(this.s8=t,this.i8=s,this.FV(),this.Hc.o4())}Rk(t){this.tY(t,this.Fk())}kk(t){this.tY(this.Pk(),t)}sT(t){this.PS!==t&&(this.PS=t,this.Hc.o4())}tT(){return this.PS}PP(t){t=w.an(t),this.c8!==t&&(this.c8=t,this.FV(),this.Hc.o4())}kP(){return w.an(this.JJ.kP()+this.c8)}Ok(){return this.c8}sY(){return 0<this.yJ.length}h4(){return this.yJ}iY(){return this.eY()&&this.r8?(w.Or(In,this.h4()),In.sort((t,s)=>this.hY(t,s)),In):this.h4()}nY(t){w.Bh(t,this.iY());for(const s of this.Y8)s.bk()&&0<s.lN()&&s.nY(t)}hY(t,s){const i=this.O3().rY(),e=i[0],h=i[1],n=i[2],r=t.t4(),o=s.t4(),a=r.qS()-e,u=r.KS()-h,l=r.tT()-n,c=o.qS()-e,f=o.KS()-h,d=o.tT()-n;return c*c+f*f+d*d-(a*a+u*u+l*l)}Yk(){return this.$J}Uk(){return this.t8}Bk(t){this.t8!==(t=!!t)&&(this.t8=t,this.Hc.o4())}Jk(){return this.h8}Qk(t){this.h8!==(t=!!t)&&(this.h8=t,this.Hc.o4())}aY(){return!this.b4().uY()||!this.n8}eY(){return!this.aY()}lY(){return this.eY()&&this.O3().cY()}fY(){if(!this.lY())return!1;for(const t of this.Y8)if(!t.fY())return!1;return!0}FS(t){this.OS!==t&&(this.OS=t,this.Hc.o4())}Vk(){return this.OS}dY(){return!this.VJ}dk(){return this.VJ}pY(t){this.VJ=t}gk(){return this.Y8}mY(){return 0<this.Y8.length}gY(t,s=!0){s?this.Y8.push(t):this.Y8.unshift(t)}yY(t,s,i){let e=this.Y8.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.Y8.splice(e,0,t)}MY(t){const s=this.Y8.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.Y8.splice(s,1)}wY(){for(const t of this.Y8)if(t.SY())return!0;return!1}*Mk(){for(const t of this.Y8)yield*t.Mk();yield this}*pk(){let t=this.dk();for(;t;)yield t,t=t.dk()}*kV(){yield this,yield*this.pk()}TY(t){for(const s of this.pk())if(s===t)return!0;return!1}bY(t){return this===t||this.s8===t.s8&&this.i8===t.i8&&this.l8===t.l8&&this.a8===t.a8&&this.c8===t.c8&&this.jP()===t.jP()&&this.BP()===t.BP()}xY(){return{parallaxX:this.Pk(),parallaxY:this.Fk(),scale:this.Dk(),scaleRate:this.Lk(),angle:this.Ok(),hasOwnScroll:this.jV(),scrollX:this.jP(),scrollY:this.BP()}}vY(t){this.tY(t.parallaxX,t.parallaxY),this.Nk(t.scale),this.Ak(t.scaleRate),this.PP(t.angle),this.Hk(t.hasOwnScroll),this.FP(t.scrollX),this.zP(t.scrollY),this.QV()}CY(t){if(0!==t.size){const s=w.jr(this.yJ,t);0<s&&(this.dV(),this.r4())}}r4(t){this.G8=!1,this.B8=!1,t&&!t.cF().nP().kR()||(this.E8=!1)}IY(){if(!this.G8){if(this.yJ.sort(t),this.V8())for(let t=0,s=this.yJ.length;t<s;++t){const i=this.yJ[t].t4();i.gV(t),this.j8.RJ(i.GY())}else for(let t=0,s=this.yJ.length;t<s;++t)this.yJ[t].t4().gV(t);this.G8=!0}}EY(){if(!this.E8){let t=this.JJ._Y(this.TU()),s=t.map(t=>[...t.Mk()]).flat(),i=0;for(const e of s){for(const h of e.h4())h.cF().nP().kR()&&h.t4().NY(i++);e.DY()}}}DY(){this.E8=!0}AY(){return{isVisible:this.bk(),opacity:this.lN(),isInteractive:this.xk()}}LY(t,s,i){const e=t.t4(),h=s.t4();if(e.s4()!==this||h.s4()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let n=e.i4(),r=h.i4();return n!==r+(i?1:-1)&&(w.Rr(this.yJ,n),n<r&&r--,i&&r++,r===this.yJ.length?this.yJ.push(t):this.yJ.splice(r,0,t),this.r4(t),!0)}OY(t,s){let i=[],e=0,h=0,n=t.length,r=s.length;for(;e<n&&h<r;){const o=t[e],a=s[h];o.t4().pJ()<a.t4().pJ()?(i.push(o),++e):(i.push(a),++h)}for(;e<n;++e)i.push(t[e]);for(;h<r;++h)i.push(s[h]);return i}RY(s){const i=[],e=s.length;for(let t=0;t<e-1;t+=2){const h=s[t],n=s[t+1];i.push(this.OY(h,n))}return e%2==1&&i.push(s[e-1]),i}PY(t){for(;1<t.length;)t=this.RY(t);return t[0]}kY(){return this.IY(),w.Nr(mn),this.j8.OJ(this.Zk(),mn),mn.length?1===mn.length?mn[0]:this.PY(mn):[]}SY(){return this.bk()&&0<this.lN()&&this.FY()}FY(){if(this.sY()||!this.Uk())return!0;for(const t of this.Y8)if(t.FY())return!0;return!1}jY(){return this.Jk()||!this.LV()||0!==this.Vk()||this.N8.zY()}BY(){if(this.jY())return!0;for(const t of this.Y8)if(t.BY())return!0;return!1}HN(){return this.u8}ZV(t){if(this.JJ.ck())return 1;{const s=this.UY();return s/(s-t)}}WY(t){const s=this.Hc.aF();if(this.JJ.ck())return s;{const i=this.UY(),e=this.Ky();return e/Math.abs(i-t)*s}}FV(){this.w8=!0,this.T8=!0,this.y8=!0}QY(t){return this.w8&&(this.JY(t,this.BA,0,0,null),this.w8=!1),this.BA}XV(t){return this.Ky(t)/this.VY()}UY(){return this.lY()?this.O3().rY()[2]:this.XV()}YY(){if(this.lY()){const t=this.O3().rY();return[t[0],t[1],t[2]]}return this.HY()}HY(t=0,s=0,h=0){let n=this.Hc,i=this.O3(),e=n.qY(),r=n.ZY(),o=(this.jP()-e)*this.s8+e,a=(this.BP()-r)*this.i8+r,u=(n.vO()&&(o=Math.round(o),a=Math.round(a)),o+t),l=a+s,c=i.ck()?this.Ky(h):this.XV(h),[f,d]=this.ak();if(.5!==f||.5!==d){let t=this.Ky(h)/c,s=(f-.5)*n.KV()/t,i=(d-.5)*n.$V()/t,e=this.kP();0!==e&&(xn.set(s,i),xn.rotate(e),s=xn.Ya(),i=xn.qa()),u+=s,l+=i}return[u,l,c]}JY(t,s,i,e,h){const n=this.Hc,r=this.O3();if(this.lY()){vh.C(Sn,r.rY()),vh.C(Tn,r.XY()),vh.C(bn,r.KY());const o=n.qY(),a=n.ZY(),u=Tn[0]-Sn[0],l=Tn[1]-Sn[1],c=Tn[2]-Sn[2];Sn[0]=(Sn[0]-o)*this.s8+o,Sn[1]=(Sn[1]-a)*this.i8+a,Sn[2]*=Math.max(this.s8,this.i8),Tn[0]=Sn[0]+u,Tn[1]=Sn[1]+l,Tn[2]=Sn[2]+c}else{const[f,d,p]=this.HY(i,e,h),m=(vh.set(Sn,f,d,p),vh.set(Tn,f,d,p-100),this.kP());0===m?vh.set(bn,0,1,0):vh.set(bn,Math.sin(m),Math.cos(m),0)}t.pM(s,Sn,Tn,bn,h||n.$V())}$Y(){this.M8=!0,this.T8=!0,this.y8=!0}tH(t){return this.M8&&(this.sH(t),this.M8=!1),this.Z2}sH(t){const s=this.Hc.dR(),[i,e]=this.ak();if(this.JJ.ck())t.dM(this.Z2,s.iH(),s.eH());else if(.5===i&&.5===e)xh.C(this.Z2,s.hH());else{const h=s.iH(),n=s.eH();t.cM(this.Z2,h/n,i,e)}}y6(t,s=!0,i=0,e=0,h=0){s&&t.K_(this.tH(t));let n;n=0===i&&0===e&&0===h?this.QY(t):(this.JY(t,yn,i,e,h),yn),t.nN(n)}nH(t){this.y6(t),t.KM(this.tT())}rH(t){let s=null;if(t.Kw()&&this.Hc.oH()){const i=this.Hc.dR().aH(this);i&&(s=i.kE(),t.uD(s))}return s}uH(t){if(t.fM()&&this.Hc.oH()){const s=2*(this.iO()+1);t.StartMeasuringRenderPassTime(s,1+s)}}kT(t,s,i){let e=this.Hc.dR(),h=this.jY(),n=null,r=this.rH(t);if(this.uH(t),h){const o={HT:this.Hc.bO(),F2:!0,lH:!!t.fM()&&this.Hc.cH()};"low"===e.fH()&&(o.width=e.iH(),o.height=e.eH()),n=this.Hc.dH(o),this.u8=n,t.tD(n),this.Uk()&&t.BN(0,0,0,0)}else this.u8=s,t.tD(s);if(this.Uk()||t.Wl(this.$J),this.JJ.pH(t,this.u8,this.Y8,h&&this.Uk()),this.uH(t),this.y6(t),t.KM(this.tT()),t.QN(this.eY()),this.VY()>Number.EPSILON){this.IY();const a=this.V8()&&0===this.tT()&&!this._8;this.lY()?this.mH(t):a?this.gH(t):this.yH(t,this.iY())}t.KM(0),t.iw(0),h&&(t.QN(!1),this.MH(t,n,s,i)),r&&t.cD(r),this.u8=null}yH(i,e){let h=this.Zk(),n=this.u8,r=this.O3().ck(),o=this.O3().wH(),a=null;for(let t=0,s=e.length;t<s;++t){const u=e[t];if(u!==a){const l=(a=u).t4();l.bk()&&l.SH(h,o,r)&&this.TH(u,l,i,n)}}}mH(e){const h=this.u8,n=this.bH(),r=vn,o=Cn,a=this.iY();for(let s=0,i=a.length;s<i;){const u=a[s],l=u.t4();if(l.bk()&&l.xH(n)){(!u.vH()||0<l.CH())&&o.push(u);const c=u.t4().Dj();r.push(u);let t=s+1;for(;t<i;++t){const f=a[t],d=f.t4();if(d.bk()&&d.xH(n)){if(d.Dj()!==c)break;(f.vH()?(0<d.CH()&&o.push(f),r):o).push(f)}}if(1!==r.length||r[0].IH()){this.GH(e,r);for(let t=0,s=o.length;t<s;++t){const p=o[t],m=p.t4();m.EH(!0),this.TH(p,m,e,h),m.EH(!1)}}else{this.TH(u,l,e,h);for(let t=0,s=o.length;t<s;++t){const g=o[t];if(g!==u){const y=g.t4(),M=y.s4();M.TH(g,y,e,h)}}}s=t,w.Nr(r),w.Nr(o)}else++s}}GH(i,e){const h=this.u8;i.nD();for(let t=0,s=e.length;t<s;++t){const n=e[t],r=n.t4();r._H(!0),this.NH(n,r,i)}i.rD();for(let t=0,s=e.length;t<s;++t){const o=e[t],a=o.t4();this.TH(o,a,i,h),a._H(!1)}i.aD()}gH(t){let s=this.j8,i=this.W8,e=this.U8,h=this.Zk(),n;i.set(s.DJ(h.fu()),s.AJ(h.du()),s.DJ(h.pu()),s.AJ(h.mu())),this.B8&&i.equals(e)?n=this.z8:(n=this.kY(),this.B8=!0,e.C(i)),this.yH(t,n),n!==this.z8&&w.Or(this.z8,n)}TH(t,s,i,e){s.zY()?this.DH(t,s,i,e):this.NH(t,s,i)}NH(t,s,i){const e=s.AH();i.RM()!==e&&e.kS(),t.kT(i)}DH(t,s,i,e){this.LH(t,s,i,e,null)&&this.y6(i)}LH(t,s,i,e,h){const n=s.xj().sO();return n.$A(i,e,{tL:t,sL:s.Vk(),devicePixelRatio:this.Hc.OH(),time:t.RH(),iL:this.Hc.PH()*this.VY(),eL:this.kP(),vL:s.Lj(),CL:n.UL()?null:this.kH(s),aL:h&&h.aL,uL:h&&h.uL,lL:h&&h.lL,cL:h&&h.cL}),i.KM(this.tT()),n.oN()}MH(t,s,i,e){const h=this.N8.OV(),n=this.Hc;0===h.length?(t.tD(i),t.SM(),e&&0===this.OS&&this.LV()?t.sD(s):(t.FS(this.OS),t.jS(this.e8),t.iD(s)),t.eD(s),n.O8(s)):this.sO().$A(t,i,{tL:this,sL:this.Vk(),devicePixelRatio:n.OH(),iL:n.PH()*this.VY(),eL:this.kP(),vL:this.Zk(),CL:null,QD:!0})}Dk(){return this.l8}Nk(t){this.l8!==t&&(this.l8=t,this.JJ.FH(),this.FV(),this.Hc.o4())}aF(){return this.VY()*this.Hc.aF()}_U(){return this.VY()*this.Hc._U()}VY(){return(this.l8*this.JJ.RP()-1)*this.a8+1}QV(){if(this.y8){this.y8=!1;let t=this.Hc.qY(),s=this.Hc.ZY(),i=(this.jP()-t)*this.s8+t,e=(this.BP()-s)*this.i8+s,h=this.VY(),n=this.Hc.KV()/h,r=this.Hc.$V()/h,o=i-n/2,a=e-r/2;this.Hc.vO()&&(o=Math.round(o),a=Math.round(a));const u=this.m8,l=(u.set(o,a,o+n,a+r),this.kP()),c=(0!==l&&(dn.C(u),dn.offset(-u.Su(),-u.Tu()),pn.ll(dn,l),pn.fl(dn),dn.offset(u.Su(),u.Tu()),u.C(dn)),this.PS);this.qV(c,this.ZE),this.lY()?this.jH(c,this.g8):this.g8.C(this.ZE)}}jH(t,s){let i=this.Hc.dR(),e=i.yR(),h=i.wR(),[n,r]=this.Kk(0,0,t),[o,a]=this.Kk(e,0,t),[u,l]=this.Kk(e,h,t),[c,f]=this.Kk(0,h,t),d=Math.min(n,o,u,c),p=Math.min(r,a,l,f),m=Math.max(n,o,u,c),g=Math.max(r,a,l,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}Kk(t,s,i=0){return this.zH(t,s,i,this._U())}hF(t,s,i=0){return this.zH(t,s,i,this.aF()*this.vR())}zH(t,s,i,e){const h=this.Hc,n=h.MS(),r=this.VY(),o=h.KV()/r,a=h.$V()/r,u=wn,l=(Uh.set(u,0,0,o,a),t/=e,s=u[3]-s/e,this.tH(n)),c=this.QY(n),f=Mn,d=w.Bg.Qg(t,s,i,c,l,u,f);return d?[f[0],f[1]]:[NaN,NaN]}BH(t,s){const i=this.l8,e=this.a8,h=this.s8,n=this.i8,r=this.c8,o=(this.l8=1,this.a8=1,this.s8=1,this.i8=1,this.c8=0,this.FV(),this.Kk(t,s));return this.l8=i,this.a8=e,this.s8=h,this.i8=n,this.c8=r,this.FV(),o}iF(t,s,i=0){return this.UH(t,s,i,this._U())}rF(t,s,i=0){return this.UH(t,s,i,this.aF()*this.vR())}UH(t,s,i,e){const h=this.Hc,n=h.MS(),r=this.VY(),o=h.KV()/r,a=h.$V()/r,u=wn,l=(Uh.set(u,0,0,o,a),this.tH(n)),c=this.QY(n),f=Mn,d=w.Bg.Ug(t,s,i,c,l,u,f);return d?[f[0]*e,(u[3]-f[1])*e]:[NaN,NaN]}WH(t,s){return t*=this.aF()*this.vR(),0!==s&&(t*=this.ZV(s)),t}kH(t){const s=t.Lj(),i=t.Dj(),e=t.CH(),u=i+e,l=s.fu(),c=s.du(),f=s.pu(),d=s.mu();if(this.lY()){if(this.QH(l,c,i)||this.QH(f,c,i)||this.QH(f,d,i)||this.QH(l,d,i))return null;if(0<e&&(this.QH(l,c,u)||this.QH(f,c,u)||this.QH(f,d,u)||this.QH(l,d,u)))return null}else if(u>=this.XV())return null;let[p,m]=this.rF(l,c,i),[g,y]=this.rF(f,d,i);if(0!==this.kP()||0<e||this.lY()){const[M,w]=this.rF(f,c,i),[S,T]=this.rF(l,d,i);if(0<e){let[t,s]=this.rF(l,c,u),[i,e]=this.rF(f,c,u),[h,n]=this.rF(f,d,u),[r,o]=this.rF(l,d,u),a=Math.min(p,g,M,S,t,i,h,r);g=Math.max(p,g,M,S,t,i,h,r),p=a,a=Math.min(m,y,w,T,s,e,n,o),y=Math.max(m,y,w,T,s,e,n,o),m=a}else{let t=Math.min(p,g,M,S);g=Math.max(p,g,M,S),p=t,t=Math.min(m,y,w,T),y=Math.max(m,y,w,T),m=t}}return dn.set(p,m,g,y),dn}bH(){return this.T8&&(this.JH(),this.T8=!1),this.S8}JH(){const t=this.Hc.MS(),s=this.tH(t),i=this.QY(t);this.S8.Kg(i,s)}QH(t,s,i){return this.bH().ty(t,s,i)}VH(){const t={d:this.NV(),s:this.Dk(),a:this.Ok(),v:this.wk(),i:this.xk(),html:this.Ik(),bc:this.$J.toJSON(),t:this.Uk(),sx:this.f8,sy:this.d8,hosp:this.p8,px:this.Pk(),py:this.Fk(),c:this.RS.toJSON(),sr:this.Lk(),fx:this.N8.aT(),cg:this.C8};return t}YH(t){this.ZJ=!!t.d,this.l8=t.s,this.c8=t.a,this.XJ=!!t.v,this.KJ=!t.hasOwnProperty("i")||t.i,this.YJ=!!t.html,this.$J.Da(t.bc),this.t8=!!t.t,t.hasOwnProperty("sx")&&(this.f8=t.sx),t.hasOwnProperty("sy")&&(this.d8=t.sy),t.hasOwnProperty("hosp")&&(this.p8=!!t.hosp),this.s8=t.px,this.i8=t.py,this.RS.Da(t.c),this.J8(),this.a8=t.sr,w.Or(this.C8,t.cg),w.Or(this.v8,this.b8);let i=new Set(this.C8),e=0;for(let t=0,s=this.v8.length;t<s;++t)i.has(this.v8[t][2])||(this.v8[e]=this.v8[t],++e);w._r(this.v8,e),this.N8.uT(t.fx),this.k8=!0}HH(){this.mV(!1),this.r4(),this.FV(),this.$Y()}QP(){return this.Q8}bP(t,s=!1){if(this.yJ.includes(t))s&&this.yJ.sort((t,s)=>{const i=t.t4().qH(),e=s.t4().qH();return i-e});else if(t.ZH()){const i=[...t.o5()];i.push(t),i.sort((t,s)=>{const i=t.t4().qH(),e=s.t4().qH();return i-e});for(const e of i)if(e.xF())for(const h of e.vF())if(!i.includes(h)){const n=[...h.o5()];n.push(h),n.sort((t,s)=>{const i=t.t4().qH(),e=s.t4().qH();return i-e}),n&&n.length&&i.splice(i.length,0,...n)}for(const r of i)r.nP().RR()&&this.aV(r,!0)}else if(t.nP().RR()&&this.aV(t,!0),t.xF())for(const o of t.vF()){const a=[...o.o5()];if(a.push(o),a.sort((t,s)=>{const i=t.t4().qH(),e=s.t4().qH();return i-e}),a&&a.length)for(const u of a)u.nP().RR()&&this.aV(u,!0)}}}}{let u=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},T=function(t,s){G!==t&&(t.nH(s),G=t)},b=(u,T,self.Os),e=self.C3Debugger,h=(b.Kh(b.Rect),b.Kh(b.Rect),b.Kh(b.Rect)),x=b.Kh(b.Oo),t=self.ys,l=t.Cs,a=[],v=[],C=[],I=[],G=null;b.XH=class extends b.Zh{constructor(t,s,i){super(),this.KH=t,this.Hc=t.b4(),this.hn=i[0],this.$H=i[1],this.t7=i[2],this.Om=i[1],this.Rm=i[2],this.s7=!!i[3],this.i7=!!i[4],this.e7=i[5],this.h7=i[6],this.n7=i[7],this.r7=null,this.qJ=i[8],this.Og=s,this.f8=0,this.d8=0,this.l8=1,this.c8=0,this.o7=new Set,this.a7=new Set,this.u7=new Set,this.l7=[],this.c7=[],this.f7=new Map,this.d7=new Map,this.p7=[],this.m7=!1,this.g7=l.create(),this.y7=l.create(),this.M7=l.create(),this.w7=[],this.S7=[],this.T7=new Map,this.b7=new Map,this.x7=-1;const h=this.Hc.dR();this.N8=b.Kh(b.D8,this,i[11]),this.KL=b.Kh(b.Bg.KD,h.A8(),{BD:(t,s)=>{const i=s.QL(),e=i.HN();t.dN(),t.iD(e),t.eD(e),h.O8(e)},WD:t=>this._P().P8(t)}),this.k8=!0,this.v7=!1,this.u8=null,this.C7={},this.I7=new Map,this.G7=!0,this.E7=new self.EP(this),this._7=b.Kh(b.Event.Nf);for(const e of i[9])this.w7.push(b.QJ.H8(this,null,e));this.N7();for(const n of this.YP())n.q8();for(const r of i[10]){const o=this.Hc.Z8(r[1]);if(!o)throw new Error("missing nonworld object class");o.K8()||o.tV(r),this.p7.push(r),this.X8(o)}}$h(){for(const t of this.S7)t.$h();b.Nr(this.S7),this.u7.clear(),this.r7=null,this.KH=null,this.Hc=null}b4(){return this.Hc}zc(){return this.hn}_V(){return this.qJ}iO(){return this.Og}_P(){return this.N8}sO(){return this.AV(),this.KL}AV(){const t="low"===this.Hc.dR().fH();if(this.k8||this.v7!==t||this.KL.UA()){const s=this._P().OV();this.KL.WA(s.map(t=>t.Bx()),{JD:s.map(t=>t.iO()),YD:t,XD:!0}),this.k8=!1,this.v7=t}}dz(){this._P().dz(),this.k8=!0}D7(){let i=this.S7[0].VY();for(let t=1,s=this.S7.length;t<s;++t){const e=this.S7[t];0===e.Pk()&&0===e.Fk()||(i=Math.min(i,e.VY()))}return i}A7(){return.5*this.Hc.KV()/this.D7()}L7(){return.5*this.Hc.$V()/this.D7()}zV(){return this.O7()?-1/0:this.A7()}BV(){return this.O7()?1/0:this.Yp()-this.A7()}UV(){return this.O7()?-1/0:this.L7()}WV(){return this.O7()?1/0:this.nm()-this.L7()}FP(t){const s=this.zV(),i=this.BV();this.f8!==(t=(t=i<t?i:t)<s?s:t)&&(this.f8=t,this.R7(),this.Hc.o4())}jP(){return this.f8}zP(t){const s=this.UV(),i=this.WV();this.d8!==(t=(t=i<t?i:t)<s?s:t)&&(this.d8=t,this.R7(),this.Hc.o4())}BP(){return this.d8}O7(){return this.s7}FH(){this.FP(this.jP()),this.zP(this.BP());for(const t of this.S7)t.jV()&&(t.FP(t.jP()),t.zP(t.BP()))}nk(t,s){this.e7===t&&this.h7===s||(this.e7=t,this.h7=s,this.P7()&&(this.k7(),this.R7(),this.Hc.o4()))}YV(){return this.ck()?.5:this.e7}HV(){return this.ck()?.5:this.h7}wH(){const t=this.YV(),s=this.HV();return t<0||1<t||s<0||1<s}uk(){this.i7&&(this.i7=!1,this.k7(),this.R7(),this.Hc.o4())}lk(){this.i7||(this.i7=!0,this.k7(),this.R7(),this.Hc.o4())}ck(){return this.i7}P7(){return!this.ck()}F7(t){this.m7!==(t=!!t)&&(this.m7=t,this.R7(),this.Hc.o4())}cY(){return this.m7}j7(t,s,i,e,h,n,r,o,a){u(this.g7,t,s,i)&&u(this.y7,e,h,n)&&u(this.M7,r,o,a)||(l.set(this.g7,t,s,i),l.set(this.y7,e,h,n),l.set(this.M7,r,o,a),this.z7())}z7(){this.R7(),this.Hc.o4()}rY(){return this.g7}XY(){return this.y7}KY(){return this.M7}RP(){return this.l8}OP(t){this.l8!==t&&(this.l8=t,this.R7(),this.FH(),this.Hc.o4())}PP(t){t=b.an(t),this.c8!==t&&(this.c8=t,this.R7(),this.Hc.o4())}kP(){return this.c8}Yp(){return this.Om}tm(t){!isFinite(t)||t<1||(this.Om=t)}nm(){return this.Rm}Hp(t){!isFinite(t)||t<1||(this.Rm=t)}B7(){return this.r7}EV(){return this.w7}*YP(){for(const t of this.w7)yield*t.Mk()}VP(){return this.S7}U7(){return this.S7.length}s4(t){return"number"==typeof t?this.e4(t):this.xV(t.toString())}e4(t){return t=b.rn(Math.floor(t),0,this.S7.length-1),this.S7[t]}xV(t){return this.T7.get(t.toLowerCase())||null}W7(t){return!!this.xV(t)}Q7(t){return this.b7.get(t)||null}k7(){for(const t of this.S7)t.$Y()}R7(){for(const t of this.S7)t.FV()}XP(t,s,i){if(this.W7(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=2<=i?s:s.dk(),h=b.Kh(b.QJ,this,e,{name:t,sid:Math.floor(1e15*Math.random()),PJ:!0});this.J7(h,s,i),this.b4().o4(),this.IV()}$P(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.V7(t),this.J7(t,s,i),this.b4().o4(),this.IV())}sk(t){if(this.V7(t)){const s=this.Hc.LO();s.xP(!0),t.$h(),s.xP(!1),this.b4().o4(),this.IV()}}ek(){const t=new Set;for(const s of this.YP())s.NV()&&!s.DV()&&t.add(s);if(0!==t.size){const i=this.Hc.LO();i.xP(!0);for(const e of t)this.V7(e),e.$h();i.xP(!1),this.b4().o4(),this.IV()}}J7(s,i,e){if(2<=e)if(i){if(i===s||i.TY(s))throw new Error(`cannot move layer '${s.zc()}' to sub-layer of itself`);i.gY(s,2===e),s.pY(i)}else 2===e?this.w7.push(s):this.w7.unshift(s),s.pY(null);else{const t=i.dk();if(t){if(i.TY(s))throw new Error(`cannot move layer '${s.zc()}' to sub-layer of itself`);t.yY(s,i,0===e),s.pY(t)}else{let t=this.w7.indexOf(i);if(-1===t)throw new Error("cannot find layer to insert by");0===e&&++t,this.w7.splice(t,0,s),s.pY(null)}}}V7(t){const s=t.dk();if(s)return s.MY(t),!0;if(1<this.w7.length){const i=this.w7.indexOf(t);if(-1===i)throw new Error("cannot find layer to remove");return this.w7.splice(i,1),!0}return!1}N7(){this.S7=[...this.YP()],this.T7.clear(),this.b7.clear();for(let t=0,s=this.S7.length;t<s;++t){const i=this.S7[t];i.vV(t),this.T7.set(i.zc().toLowerCase(),i),this.b7.set(i._V(),i)}}Y7(){let t=0;for(const s of this.w7){for(const i of s.Mk())i.CV(t);s.Ik()&&t++}}H7(){return this.w7.at(-1).TU()+1}async IV(){this.N7(),this.Y7(),this.x7=this.H7()}q7(){return this.x7}Z7(){this.x7=-1}_Y(t){const s=[];for(const i of this.w7){const e=i.TU();if(e===t)s.push(i);else if(t<e)break}return s}xY(){return{scrollX:this.jP(),scrollY:this.BP(),scale:this.RP(),angle:this.kP(),vpX:this.YV(),vpY:this.HV()}}vY(t){this.FP(t.scrollX),this.zP(t.scrollY),this.OP(t.scale),this.PP(t.angle),this.nk(t.vpX,t.vpY)}X7(){let t=this.w7.filter(t=>t.SY())[0];for(;t;){if(!t.Uk())return x.Yo(t.Yk()),x.Vo(1),x;if(t.jY())return x.jo(0,0,0,0),x;t=t.gk().filter(t=>t.SY())[0]}return x.jo(0,0,0,0),x}hV(){return this.G7}K7(){return[...this.o7]}X8(t){if(t.xF())for(const s of t.s9().t9())this.o7.add(s);else this.o7.add(t)}i9(){return[...this.a7]}e9(t,s){if(t===this||!s)return Promise.resolve();t&&(b.Io(this.a7,t.a7),t.a7.clear());const i=[];for(const e of this.o7)this.a7.has(e)||(i.push(e.h9(s)),this.a7.add(e));return Promise.all(i)}async n9(t){if(t.TV())throw new Error("cannot load textures for family");const s=this.Hc.MS();if(s&&!s.uE()&&!this.a7.has(t)){this.a7.add(t);const i=t.h9(s);this.r9(i),await i,t.o9(),this.Hc.o4()}}r9(t){this.u7.add(t),t.then(()=>this.u7.delete(t)).catch(()=>this.u7.delete(t))}a9(){return Promise.all([...this.u7])}u9(t){if(t.TV()||0<t.wP())throw new Error("cannot unload textures");const s=this.Hc.MS();s&&this.a7.has(t)&&(this.a7.delete(t),t.l9(s))}c9(t,s){if(t!==this&&s)for(const i of this.a7)i.oV()||t.o7.has(i)||(i.l9(),this.a7.delete(i))}f9(){this.a7.clear()}async d9(t){const s=this.Hc,i=this.KH,e=s.LO(),h=(this.n7&&(this.r7=e.p9(this.n7),this.r7.m9()),i.g9(this),this.Om=this.$H,this.Rm=this.t7,this.f8=s.wO()/2,this.d8=s.TO()/2,this.FH(),this.k7(),this.R7(),this.Y7(),await this.Hc.dR().y9(this.H7(),!0),this.M9(t),this.Hc.w9(!0),this.S9(),this.G7||this.T9(),this.b9(this.l7),this.b9(this.c7),this.x9(),i.v9(),s.GP(),this.Hc.w9(!1),this.Hc.C9());if(await Promise.all(h),b.Nr(h),!s.I9()){for(const n of this.l7)n.G9();for(const r of this.c7)r.E9(this.f7,this.d7);for(const[o,a]of Object.entries(this.C7)){const u=this.Hc.aW(parseInt(o,10));u&&!u.TV()&&u.nV()&&b.Nr(a)}for(const l of this.l7)l._9();for(const c of this.c7)c._9()}b.Nr(this.l7),b.Nr(this.c7),this.f7.clear(),this.d7.clear(),await Promise.all([...this.o7].map(t=>t.N9(this.Hc.MS()))),t&&(s.Nf().dispatchEvent(new b.Event("beforefirstlayoutstart")),await s.D9(new b.Event("beforeprojectstart"))),await this.A9(new b.Event("beforeanylayoutstart")),s.Nf().dispatchEvent(new b.Event("beforelayoutstart")),await this.D9(new b.Event("beforelayoutstart")),s.I9()||await s.KF(b.P9.R9.O9.L9,null,null),s.Nf().dispatchEvent(new b.Event("afterlayoutstart")),await this.D9(new b.Event("afterlayoutstart")),await this.A9(new b.Event("afteranylayoutstart")),t&&(s.Nf().dispatchEvent(new b.Event("afterfirstlayoutstart")),await s.D9(new b.Event("afterprojectstart"))),e.k9(i),await this.a9(),this.G7=!1}M9(t){for(const s of this.Hc.SV())if(!s.TV()&&s.RR())for(const i of s.gP()){const e=i.t4(),h=e.s4(),n=b.rn(h.iO(),0,this.S7.length-1),r=this.S7[n];e.n4(r,!0),r.uV(i)}if(!t)for(const o of this.S7)o.mV(!1)}S9(){for(const t of this.S7)t.eV(this.l7),t.yV()}T9(){let s=!1;for(const[t,i]of Object.entries(this.C7)){const e=this.Hc.aW(parseInt(t,10));if(e&&!e.TV()&&e.nV())for(const h of i){let t=null;if(!e.RR()||(t=h.hasOwnProperty("instJson")?this.Q7(h.instJson.w.l):this.Q7(h.w.l))){const n=this.Hc.rV(e,t,!1,0,0,!0);h.hasOwnProperty("instJson")?n.uT(h.instJson):n.uT(h),s=!0,this.c7.push(n),h.hasOwnProperty("instJson")&&(this.f7.set(n,h),this.d7.set(h.index,n))}}}for(const r of this.S7)r.mV(!0),r.r4();s&&(this.Hc.GP(),this.Hc.F9())}b9(s){for(const i of s)if(i.xF()){const e=i.t4(),t=i.j9();for(const h of i.cF().s9().z9())if(h!==i.cF()){const n=h.gP();if(n.length>t)i.B9(n[t]);else{let t;t=e?this.Hc.rV(h,e.s4(),!0,e.qS(),e.KS(),!0):this.Hc.rV(h,null,!0,0,0,!0),this.Hc.GP(),h.U9(),i.B9(t),s.push(t)}}}}x9(){for(const t of this.p7){const s=this.Hc.Z8(t[1]);s.xF()||this.Hc.rV(t,null,!0)}}W9(){let i=[],e=this.p7,h=0;for(let t=0,s=e.length;t<s;++t){const n=e[t],r=this.Hc.Z8(n[1]);r.oV()?r.xF()&&r.s9().Q9()||i.push(this.Hc.rV(n,null,!0)):(e[h]=n,++h)}b._r(e,h),this.Hc.GP(),this.b9(i)}wV(t,s,i,e,h,n,r){if(i)return i.wV(t,s,h,n,e,r);{const o=[];for(const a of this.S7)o.push(a.wV(t,s,h,n,e,r));return o.flat()}}async J9(){const t=this.KH;this.Hc.I9()||(await this.A9(new b.Event("beforeanylayoutend")),await this.D9(new b.Event("beforelayoutend")),await this.Hc.KF(b.P9.R9.O9.V9,null,null),await this.D9(new b.Event("afterlayoutend")),await this.A9(new b.Event("afteranylayoutend"))),t.Y9(!0),this.Hc.LO().H9(),this.G7||this.q9();for(const s of this.S7)s.MV();for(const i of this.Hc.SV())if(!(i.oV()||i.RR()||i.nP().LR()||i.TV())){for(const e of i.gP())this.Hc.MF(e);this.Hc.GP()}t.Y9(!1),t.N3()===this&&t.g9(null)}Z9(t,s){const i=t.cF()._V().toString(),e=(this.C7.hasOwnProperty(i)||(this.C7[i]=[]),this.C7[i]),h={index:s,instJson:t.aT(),sceneGraphJson:{children:[]}};e.push(h),this.I7.set(t,h)}X9(t){const s=this.I7.get(t);for(const i of t.K9()){const e=this.I7.get(i);e&&s.sceneGraphJson.children.push({index:e.index,flags:b.sq.tq(i.t4())})}}q9(){this.I7.clear();let t=0;for(const s of this.S7){s.IY();for(const i of s.h4()){const e=i.cF();!e.oV()&&e.nV()&&(this.Z9(i,t),t++)}}for(const h of this.S7)for(const n of h.h4()){const r=n.cF();!r.oV()&&r.nV()&&this.X9(n)}this.I7.clear()}iq(){this.C7={},this.G7=!0}HN(){return this.u8}jY(){const t=this.Hc,s=t.MS().Kw();return"low"===t.dR().fH()||s&&t.cH()||this.N8.zY()||s&&t.uY()}eq(t){const s=this.Hc.dR();if(this.jY()){t.tD(null),t.BN(0,0,0,0);const i={HT:this.Hc.bO(),F2:t.fM()||this.Hc.cH()||this.N8.zY(),lH:!!t.fM()&&this.Hc.cH()};"low"===s.fH()&&(i.width=s.iH(),i.height=s.eH()),this.u8=this.Hc.dH(i)}else this.u8=null}hq(t){this.Hc.nq(t)&&(t.QN(!1),t.tD(null),t.SM(),t.sD(this.u8))}rq(t){this.jY()&&(t.QN(!1),this.oq(t,this.u8))}aq(t){t.tD(this.u8),t.Wl(this.X7()),this.Hc.uY()&&t.WN();const s=this._Y(0);this.pH(t,this.u8,s,!0),t.fM()&&t.StartMeasuringRenderPassTime(0,1),this.rq(t),this.u8=null}uq(t,s){let i=null;this.Hc.nq(t)&&(i=this.u8),t.tD(i),t.BN(0,0,0,0),this.Hc.uY()&&t.WN();const e=this._Y(s);this.pH(t,i,e,!0),this.hq(t),t.Jw(),this.Hc.dR().lq(s)}pH(t,e,s,h){const n=s.filter(t=>t.SY());for(let s=0,i=n.length;s<i;){const r=n[s];if(r.fY()&&!r.BY()){a.push(r);for(let t=s+1;t<i;++t){const o=n[t];if(!o.fY()||o.BY())break;a.push(n[t])}if(2<=a.length||1===a.length&&a[0].wY()){this.cq(t,e,a),s+=a.length,b.Nr(a);continue}b.Nr(a)}r.kT(t,e,h&&0===s),++s}}oq(t,s){const i=this.N8.OV(),e=this.Hc;0===i.length?(t.tD(null),t.SM(),t.sD(s),t.eD(s),e.O8(s)):(h.set(0,0,e.KV(),e.$V()),this.sO().$A(t,null,{tL:this,sL:3,devicePixelRatio:this.Hc.OH(),iL:this.Hc.PH()*this.RP(),eL:this.kP(),vL:h,CL:null,QD:!0}))}cq(e,h,t){t[0].Uk()||(x.Yo(t[0].Yk()),x.Vo(1),e.Wl(x)),this.Hc.dR(),e.QN(!0);const n=v,r=C,o=I;for(const a of t)a.IY(),a.nY(n);const s=t[0],i=s.rH(e);s.uH(e);for(let s=0,i=n.length;s<i;){const u=n[s],l=u.t4(),c=l.s4();if(l.bk()&&l.xH(c.bH())){(!u.vH()||0<l.CH())&&o.push(u);const f=u.t4().Dj();r.push(u);let t=s+1;for(;t<i;++t){const d=n[t],p=d.t4();if(p.bk()&&p.xH(p.s4().bH())){if(p.Dj()!==f)break;(d.vH()?(0<p.CH()&&o.push(d),r):o).push(d)}}if(1!==r.length||r[0].IH()){this.fq(e,h,r);for(let t=0,s=o.length;t<s;++t){const m=o[t],g=m.t4(),y=g.s4();g.EH(!0),T(y,e),y.TH(m,g,e,h),g.EH(!1)}}else{T(c,e),c.TH(u,l,e,h);for(let t=0,s=o.length;t<s;++t){const M=o[t];if(M!==u){const w=M.t4(),S=w.s4();T(S,e),S.TH(M,w,e,h)}}}s=t,b.Nr(r),b.Nr(o)}else++s}i&&e.cD(i),b.Nr(n),G=null}fq(i,e,h){i.nD();for(let t=0,s=h.length;t<s;++t){const n=h[t],r=n.t4(),o=r.s4();r._H(!0),T(o,i),o.NH(n,r,i)}i.rD();for(let t=0,s=h.length;t<s;++t){const a=h[t],u=a.t4(),l=u.s4();T(l,i),l.TH(a,u,i,e),u._H(!1)}i.aD()}VH(){const t={sx:this.jP(),sy:this.BP(),s:this.RP(),a:this.kP(),w:this.Yp(),h:this.nm(),ortho:this.ck(),vpX:this.YV(),vpY:this.HV(),fv:this.G7,persist:this.C7,fx:this.N8.aT(),layers:{},dynamicLayers:[]};for(const s of this.S7)if(s.NV()){const i=s.dk();t.dynamicLayers.push({sid:s._V(),name:s.zc(),parentSid:i?i._V():null,siblingIndex:s.GV(),data:s.VH()})}else t.layers[s._V().toString()]=s.VH();return t}YH(t){this.f8=t.sx,this.d8=t.sy,this.l8=t.s,this.c8=t.a,this.Om=t.w,this.Rm=t.h,this.i7=!!t.ortho,t.hasOwnProperty("vpX")&&(this.e7=t.vpX),t.hasOwnProperty("vpY")&&(this.h7=t.vpY),this.G7=!!t.fv,this.C7=t.persist,this.N8.uT(t.fx),this.k8=!0;for(const[s,i]of Object.entries(t.layers)){const e=parseInt(s,10),h=this.Q7(e);h&&h.YH(i)}if(t.hasOwnProperty("dynamicLayers")){this.ek(),this.Hc.GP();const n=new Map,r=t.dynamicLayers;for(let t=r.length-1;0<=t;--t){const o=r[t],a=o.sid,u=o.name,l=o.parentSid,c=o.siblingIndex,f=o.data;if(this.N7(),!this.W7(u)&&!this.Q7(a)){let t,s;if(null===l)t=null,s=this.w7;else{if(!(t=this.Q7(l)))continue;s=t.gk()}const d=b.Kh(b.QJ,this,t,{name:u,sid:a,PJ:!0});s.push(d);let i=n.get(s);i||(i=[],n.set(s,i)),i.push({vj:d,siblingIndex:c}),d.YH(f)}}for(const[p,m]of n){m.sort((t,s)=>t.siblingIndex-s.siblingIndex);for(const g of m){let t=g.vj,s=g.siblingIndex,i=p.indexOf(t);p.splice(i,1),p.splice(s,0,t)}}}this.IV(),this.k7(),this.R7()}D3(){return this.E7}_O(){return this._7}pq(t){t.layout=this.D3();const s=this.Hc,i=s.mq()&&!s.LO().CP();i&&e.StartMeasuringScriptTime(),this._7.dispatchEvent(t),i&&e.AddScriptTime()}D9(t){return t.layout=this.D3(),this._7.Ff(t)}A9(t){return t.layout=this.D3(),this.Hc.D9(t)}gq(){this.yq(this.w7)}yq(t,s=0){const i=t.slice(0);i.reverse();for(const e of i)console.log("\t".repeat(s)+"- "+e.zc()),this.yq(e.gk(),s+1)}}}{const En=self.Os;En.Mq=class extends En.Zh{#uW;#wq=[];#Sq=new Map;#Tq=new Map;#bq=null;#xq=[];#vq=null;#Cq=0;#Iq=null;constructor(t){super(),this.#uW=t}$h(){this.#uW=null,this.#bq=null,this.#vq=null,this.#Iq=null,En.Nr(this.#wq),this.#Sq.clear(),this.#Tq.clear(),En.Nr(this.#xq)}Ob(t){const s=En.Kh(En.XH,this,this.#wq.length,t);this.#wq.push(s),this.#Sq.set(s.zc().toLowerCase(),s),this.#Tq.set(s._V(),s)}b4(){return this.#uW}Gq(t){this.#vq=t}Eq(){if(this.#vq)return this.#vq;if(this.#wq.length)return this.#wq[0];throw new Error("no first layout")}_q(t){return this.#Sq.get(t.toLowerCase())||null}Nq(t){return this.#Tq.get(t)||null}Dq(t){return t=En.rn(Math.floor(t),0,this.#wq.length-1),this.#wq[t]}O3(t){return"number"==typeof t?this.Dq(t):this._q(t.toString())}P3(){return this.#wq}g9(t){this.#bq=t}N3(){return this.#bq}Aq(t){if(this.#xq.includes(t))throw new Error("layout already running");this.#xq.push(t)}Lq(t){const s=this.#xq.indexOf(t);if(-1===s)throw new Error("layout not running");this.#xq.splice(s,1)}*Oq(){this.#bq&&(yield this.#bq),this.#xq.length&&(yield*this.#xq)}Rq(t){return this.#bq===t||this.#xq.includes(t)}Y9(t){if(t)this.#Cq++;else{if(this.#Cq<=0)throw new Error("already unset");this.#Cq--}}IP(){return 0<this.#Cq}z3(t){this.#Iq=t}v9(){this.#Iq=null}j3(){return!!this.#Iq}Pq(){return this.#Iq}kq(){const t=this.N3();t&&t.k7()}Fq(){const t=this.N3();t&&t.R7()}}}{const S=self.Os,_n=new RegExp("<(.+?)>","g");S.jq=class extends S.Zh{constructor(t){super(),this.Hc=t,this.zq=S.Kh(S.Bq),this.Uq=null,this.Wq=[],this.Qq=new Map,this.Jq=new Map,this.Vq=new Map,this.Yq=[],this.Hq=[],this.qq=[],this.Zq=!1,this.Xq=!1,this.Kq=!1,this.$q=()=>this.tZ(),this.sZ=()=>this.iZ(),this.eZ=()=>this.hZ(),this.nZ=()=>this.rZ(),this.oZ=t=>this.aZ(t.rz),this.uZ=t=>this.lZ(),this.cZ=t=>this.fZ(),this.dZ=t=>this.pZ(),this.mZ=[],this.gZ=0}$h(){this.yZ(),this.$q=null,this.sZ=null,this.eZ=null,this.nZ=null,this.oZ=null,this.cZ=null;for(const t of this.Wq)t.iB(),t.$h();S.Nr(this.Wq),this.Wq=null,this.zq.$h(),this.zq=null,S.Nr(this.Yq),this.Yq=null,S.Nr(this.Hq),this.Hq=null,S.Nr(this.qq),this.qq=null,this.Qq.clear(),this.Qq=null,this.Jq.clear(),this.Jq=null,this.Vq.clear(),this.Vq=null,S.Nr(this.mZ),this.mZ=null,this.Hc=null}MZ(){const t=this.Hc.Nf();t.addEventListener("pretick",this.$q),t.addEventListener("tick2",this.sZ),t.addEventListener("beforelayoutchange",this.eZ),t.addEventListener("layoutchange",this.nZ),t.addEventListener("instancedestroy",this.oZ),t.addEventListener("beforeload",this.uZ),t.addEventListener("afterload",this.cZ),t.addEventListener("afterlayoutstart",this.dZ)}yZ(){const t=this.Hc.Nf();t.removeEventListener("pretick",this.$q),t.removeEventListener("tick2",this.sZ),t.removeEventListener("beforelayoutchange",this.eZ),t.removeEventListener("layoutchange",this.nZ),t.removeEventListener("instancedestroy",this.oZ),t.removeEventListener("beforeload",this.uZ),t.removeEventListener("afterload",this.cZ),t.removeEventListener("afterlayoutstart",this.dZ)}Ob(t){this.zq.$l(t);const s=S.SZ.wZ(t,this);this.$l(s),this.TZ(s),this.Vq.set(s.zc(),0)}bZ(t){const s=this.xZ(),i=t.GF(),e=s.Ks(i),h=S.SZ.bZ(i+":"+this.Vq.get(i),e,this);return this.vZ(i),this.$l(h),h}vZ(t){this.Vq.set(t,this.Vq.get(t)+1)}CZ(){for(const t of this.Wq)if(!t.IZ()){const s=t.GF();this.vZ(s)}}GZ(){for(const t of this.Vq.keys())this.Vq.set(t,0)}$l(t){this.Wq.push(t),this.Qq.set(t.zc().toLowerCase(),t)}u0(t){t.EZ(),t.IZ()||(S.Pr(this.Wq,t),S.Pr(this.Yq,t),S.Pr(this.Hq,t),S.Pr(this.qq,t),this.Qq.delete(t.zc().toLowerCase()),this._Z(t),t.tB())||t.$h()}ZF(t){this.Hc.ZF(t,this.Uq,null)}b4(){return this.Hc}xZ(){return this.zq}NZ(t){this.Uq=t}DZ(){return this.Uq}*AZ(){for(const t of this.Wq)yield t}*LZ(){for(const t of this.Hq)yield t}OZ(t,s){this.Jq.has(t)||this.Jq.set(t,new Set),this.Jq.get(t).add(s)}TZ(t){for(const s of t.RZ())this.OZ(s,t)}_Z(t){for(const[s,i]of this.Jq.entries())i.has(t)&&(i.delete(t),0===i.size)&&this.Jq.delete(s)}PZ(t){if(this.Jq.has(t))return this.Jq.get(t)}kZ(t,s){if(s)for(const i of this.Wq){const e=s.every(t=>i.FZ(t.rz,t.trackId));if(e&&i.zc().includes(t.zc()))return i}}jZ(t){return this.Qq.get(t.toLowerCase())||null}zZ(t){for(const s of this.Yq)if(s.zc()===t)return s;for(const i of this.Hq)if(i.zc()===t)return i;return null}*BZ(i){if(_n.test(i)){_n.lastIndex=0;let t,s=new Set;do{if(t=_n.exec(i)){const e=t[1].split(",");for(const h of e)s.add(h)}}while(t);for(const n of s.values()){const r=this.jZ(n);r&&(yield r)}s.clear()}else{const t=this.jZ(i);t&&(yield t)}}*UZ(t){for(const s of this.Wq)s.hB(t)&&(yield s)}WZ(t){this.Yq.includes(t)||this.Yq.push(t),this.QZ()}JZ(t){S.Pr(this.Hq,t),this.VZ()}YZ(t){this.Hq.includes(t)?(t.HZ(!0),t.qZ(!1),t.ZZ(!1)):(t.HZ(!1),t.qZ(!0),t.ZZ(!1),this.Yq.includes(t)||this.Yq.push(t)),this.QZ()}XZ(t){t.HZ(!1),t.qZ(!1),t.KZ(),S.Pr(this.Yq,t),this.VZ()}$Z(t){t.HZ(!1),t.qZ(!1),this.Hq.includes(t)&&(t.ZZ(!0),this.qq.push(t),S.Pr(this.Hq,t)),this.Yq.includes(t)&&t.ZZ(!0)}tX(t){t.HZ(!1),t.qZ(!1),t.ZZ(!1),t.fB(1),S.Pr(this.Hq,t)}sX(t){this.$Z(t),t.KZ()}tZ(){if(!this.b4().I9()&&this.Zq&&!this.Xq){for(this.Kq=!0;this.Yq.length;){const t=this.Yq.pop();(t.iX()?(t.eX(),this.qq):(t.hX(),this.Hq)).push(t),0!==t.nX()&&(this.gZ=1)}const s=this.Hc.rX(),i=this.Hc.aX(),e=this.Hc.u3();for(let t=this.Hq.length-1;0<=t;t--){const h=this.Hq[t];h&&h.uX(s,e,i)}this.Kq=!1,0!==this.gZ&&this.b4().o4()}}iZ(){if(!this.b4().I9()&&this.Zq&&!this.Xq){let i;for(let t=0,s=this.qq.length;t<s;t++){const e=this.qq[t];i=i||new Set,e.EZ(),this.lX(e),i.add(e)}if(i){S.jr(this.qq,i);for(let t=this.gZ=0,s=this.Hq.length;t<s;t++)if(0!==this.Hq[t].nX()){this.gZ=1;break}}this.VZ()}}lX(t){t.tB()||t.cX()&&t.fX()&&t.dX()&&t.pX()}QZ(){this.Zq||(this.Zq=!0)}VZ(){this.qq.length||this.Hq.length||this.Yq.length||this.Kq||(this.Zq=!1)}hZ(){for(this.Xq=!0;this.Yq.length;)this.XZ(this.Yq.pop());const t=new Set;for(const s of this.Hq){const i=s.hZ();i&&(s.EZ(),t.add(s))}S.jr(this.Hq,t),t.clear();for(const e of this.qq){const h=e.hZ();h&&(e.EZ(),t.add(e))}S.jr(this.qq,t),this.VZ();for(const n of this.Wq)n.mX()}rZ(){this.Xq=!1}aZ(t){const s=t.cF(),i=this.PZ(s);if(i)if(this.Hc.I9())this.mZ.push(t);else for(const e of i)e.IZ()||(e.tB()?this.u0(e):e.cX()||(this.lX(e),this.u0(e)))}lZ(){for(const t of this.Yq.map(t=>t))this.lX(t),this.u0(t);for(const s of this.Hq.map(t=>t))this.lX(s),this.u0(s)}fZ(){for(const t of this.mZ)this.aZ(t);S.Nr(this.mZ);for(const s of this.Wq)s.fZ()}pZ(){const t=this.Hc.L3(),s=t.N3();if(s)for(const i of this.Wq){const e=i.gX();e&&s.zc()===e&&this.YZ(i)}}VH(){return{timelinesJson:this.yX(),scheduledTimelinesJson:this.MX(),playingTimelinesJson:this.wX(),markedForRemovalTimelinesJson:this.SX(),hasRuntimeListeners:this.Zq,changingLayout:this.Xq,isTickingTimelines:this.Kq}}YH(t){t&&(this.GZ(),this.TX(t.timelinesJson),this.bX(t.scheduledTimelinesJson),this.xX(t.playingTimelinesJson),this.vX(t.markedForRemovalTimelinesJson),this.Zq=!t.hasRuntimeListeners,this.Xq=!!t.changingLayout,this.Kq=!!t.isTickingTimelines,this.CZ(),this.QZ(),this.VZ())}yX(){return this.Wq.map(t=>t.VH())}TX(t){for(const s of t){let t=this.jZ(s.name);if(t)t.YH(s);else{const i=this.CX(s);if(!i)continue;const e=this.jZ(i);(t=this.bZ(e)).YH(s)}t.IX()||this.u0(t)}}CX(t){const s=t.name,i=s.split(":");return i&&2===i.length?i[0]:null}MX(){return this.GX(this.Yq)}bX(t){this.EX(t,this.Yq)}wX(){return this.GX(this.Hq)}xX(t){this.EX(t,this.Hq)}SX(){return this.GX(this.qq)}vX(t){this.EX(t,this.qq)}_X(t,s){if(s)for(const i of s)if(i===t.zc())return!0;return!1}GX(t){return t.map(t=>t.zc())}EX(t,s){const i=new Set;for(const e of s)this._X(e,t)||i.add(e);if(S.jr(s,i),t)for(const h of t){const n=this.jZ(h);if(n){const r=s.find((s=>t=>t.zc()===s)(h));r||s.push(n)}}}}}{const Nn=self.Os,Dn=[0,0],An=[0,0],Ln=[0,0],On=[0,0,0,0,0],Rn=new Array(4),Pn=[{x:0,y:0,t:0,Gt:0},{x:0,y:0,t:0,Gt:0},{x:0,y:0,t:0,Gt:0}],kn={x:0,y:0,t:0,Gt:0};Nn.NX=class{constructor(t,s){this.DX=!1,this.AX=t,this.LX=[];let i=null;if(i=s?this.AX.OX(s):Nn.first(this.AX.RX())){const e=i._B("offsetX"),h=i._B("offsetY");if(e&&h){this.PX=e,this.kX=h;const n=e.FX(),r=h.FX();for(let t=1,s=Math.min(n.length,r.length);t<s;++t){const o=n[t],a=(o.jX(),o.zX()),u=r[t],l=(u.jX(),u.zX());a&&"cubic-bezier"===a.BX()&&l&&"cubic-bezier"===l.BX()?this.LX.push(Nn.Kh(Nn.UX,a,l,o,u,this.LX.length)):(a&&"line"===a.BX()&&l&&l.BX(),this.LX.push(Nn.Kh(Nn.WX,o,u,this.LX.length)))}this.DX=!0}}}$h(){for(const t of this.LX)t.$h();Nn.Nr(this.LX),this.LX=null,this.AX=null,this.PX=null,this.kX=null}QX(){return this.DX}JX(){return this.LX}VX(t){const s="relative"===this.PX.YX()?t.qS():0,i="relative"===this.kX.YX()?t.KS():0;for(const e of this.LX)e.VX(s,i)}Ug(s,i,t){let e=NaN,h=this.LX.length;for(let t=0;t<h;t++){const n=this.LX[t];if("cubic-bezier"===n.Qx()){const r=n.Ug(s,i);(isNaN(e)||r[3]<e)&&(e=r[3],Ln[0]=r[2],Ln[1]=n.iO())}}return Ln}HX(s,i,t){const e=t.tRange;Nn.ae(e[0])||(e[0]=0),Nn.ae(e[1])||(e[1]=1);let h=NaN,n=this.LX.length;for(let t=0;t<n;t++){const r=this.LX[t];if("cubic-bezier"===r.Qx()){const o=r.qX(s,i,e);(isNaN(h)||o[3]<h)&&(h=o[3],Ln[0]=o[2],Ln[1]=r.iO())}}return Ln}ZX(t,s){return this.LX[s].ZX(t)}XX(t,s){return this.LX[s].XX(t)}},Nn.UX=class{constructor(t,s,i,e,h){this.Og=h;const n=t.KX("cubic-bezier"),r=i.KX("cubic-bezier"),o=s.KX("cubic-bezier"),a=e.KX("cubic-bezier");this.$X=t.tK(),this.sK=s.tK(),this.iK=t.tK()+n.eK(),this.hK=s.tK()+o.eK(),this.nK=i.tK()+r.rK(),this.oK=e.tK()+a.rK(),this.aK=i.tK(),this.uK=e.tK(),this.lK=0,this.cK=0,this.fK=0,this.dK=0,this.pK=0,this.mK=0,this.gK=0,this.yK=0,this.MK=0,this.wK=0,this.SK=0,this.TK=0,this.bK=0,this.xK=0,this.vK=0,this.CK=0,this.IK=0,this.GK=0,this.EK=0,this._K=0,this.NK=NaN,this.DX=!1,this.DK=100,this.AK=new Array(this.DK+1),this.AK[0]=0,this.LK=0,this.RK=[],this.PK=[];for(let t=0;t<100;t++)this.PK.push({x:0,y:0,t:0,Gt:0});this.kK()}$h(){Nn.Nr(this.AK),this.AK=null,Nn.Nr(this.RK),this.RK=null,Nn.Nr(this.PK),this.PK=null}Qx(){return"cubic-bezier"}iO(){return this.Og}FK(){return Math.floor(this.LK/25)}jK(){return 1/this.FK()}VX(t,s){this.zK=t,this.BK=s,this.AK=new Array(this.DK+1),this.AK[0]=0,this.kK(),this.lK=this.$X+this.zK,this.cK=this.sK+this.BK,this.fK=this.iK+this.zK,this.dK=this.hK+this.BK,this.pK=this.nK+this.zK,this.mK=this.oK+this.BK,this.gK=this.aK+this.zK,this.yK=this.uK+this.BK,this.MK=3*(this.fK-this.lK),this.wK=3*(this.dK-this.cK),this.SK=3*(this.pK-this.fK),this.TK=3*(this.mK-this.dK),this.bK=3*(this.gK-this.pK),this.xK=3*(this.yK-this.mK),this.vK=3*(this.fK-this.lK),this.CK=3*(this.lK+this.pK-2*this.fK),this.IK=this.gK-this.lK+3*(this.fK-this.pK),this.GK=3*(this.dK-this.cK),this.EK=3*(this.cK+this.mK-2*this.dK),this._K=this.yK-this.cK+3*(this.dK-this.mK)}Map(t){if(!this.DX)return NaN;const s=this.UK(t);return An[0]=this.WK(s),An[1]=this.QK(s),An}Ug(t,s){const i=this.JK(100),e=this.VK(t,s,i),h=this.YK(t,s,i,e);return On[0]=h.x,On[1]=h.y,On[2]=h.t,On[3]=h.Gt,On}qX(t,s,i){const e=this.JK(100),h=this.HK(t,s,e,i),n=this.YK(t,s,e,h);return On[0]=n.x,On[1]=n.y,On[2]=n.t,On[3]=n.Gt,On}ZX(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,n=i*this.MK+e*this.SK+h*this.bK,r=i*this.wK+e*this.TK+h*this.xK,o=Math.hypot(n,r);return Dn[0]=n/o,Dn[1]=r/o,Dn}XX(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,n=i*this.MK+e*this.SK+h*this.bK,r=i*this.wK+e*this.TK+h*this.xK;return Math.atan2(r,n)}UK(h){if(this.DX){let t=h*this.AK[this.DK],s=0,i=this.DK,e=0;for(;s<i;)e=s+((i-s)/2|0),this.AK[e]<t?s=e+1:i=e;this.AK[e]>t&&e--;const n=this.AK[e];return n===t?e/this.DK:(e+(t-n)/(this.AK[e+1]-n))/this.DK}}WK(t){return this.DX?self.ic.wc("cubicbezier")(t,this.$X+this.zK,this.iK+this.zK,this.nK+this.zK,this.aK+this.zK):NaN}QK(t){return this.DX?self.ic.wc("cubicbezier")(t,this.sK+this.BK,this.hK+this.BK,this.oK+this.BK,this.uK+this.BK):NaN}JK(s){if(!(this.RK.length>=(s=s||100))){this.RK=new Array(s),s++;for(let t=0;t<s-1;t++){const i=t/(s-1),e=i**2,h=i**3,n=this.vK*i,r=this.CK*e,o=this.IK*h,a=this.GK*i,u=this.EK*e,l=this._K*h,c=this.lK+n+r+o,f=this.cK+a+u+l;this.PK[t].x=c,this.PK[t].y=f,this.PK[t].t=i,this.PK[t].Gt=0,this.RK[t]=this.PK[t]}}return this.RK}VK(s,i,e,t=0,h=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.NK))for(let t=0;t<100;t++){const r=e[t],o=r.x-s,a=r.y-i;r.Gt=o*o+a*a,r.Gt<h&&(h=r.Gt,n=t)}else{for(let t=this.NK;t<this.NK+5&&!(t>=e.length);t++){const u=e[t],l=u.x-s,c=u.y-i;u.Gt=l*l+c*c,u.Gt<h&&(h=u.Gt,n=t)}for(let t=this.NK;t>this.NK-5&&!(t<0);t--){const f=e[t],d=f.x-s,p=f.y-i;f.Gt=d*d+p*p,f.Gt<h&&(h=f.Gt,n=t)}}return this.NK=n}HK(s,i,e,h,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.NK))for(let t=0;t<100;t++){const o=e[t],a=o.x-s,u=o.y-i;o.Gt=a*a+u*u,o.t>=h[0]&&o.t<=h[1]&&o.Gt<n&&(n=o.Gt,r=t)}else{for(let t=this.NK;t<this.NK+5&&!(t>=e.length);t++){const l=e[t],c=l.x-s,f=l.y-i;l.Gt=c*c+f*f,l.t>=h[0]&&l.t<=h[1]&&l.Gt<n&&(n=l.Gt,r=t)}for(let t=this.NK;t>this.NK-5&&!(t<0);t--){const d=e[t],p=d.x-s,m=d.y-i;d.Gt=p*p+m*m,d.t>=h[0]&&d.t<=h[1]&&d.Gt<n&&(n=d.Gt,r=t)}}return this.NK=r}YK(r,o,a,u){let l=a[u],t=1,c=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,s=0===u?0:u-1,i=u===t-1?t-1:u+1,e=a[s].t,h=a[i].t,n=(h-e)/4;if(n<.001)break;Rn[0]=a[s];for(let t=1;t<=2;t++){const f=e+t*n,d=f**2,p=f**3,m=this.vK*f,g=this.CK*d,y=this.IK*p,M=this.GK*f,w=this.EK*d,S=this._K*p,T=this.lK+m+g+y,b=this.cK+M+w+S,x=T-r,v=b-o,C=x*x+v*v;if(C<c){c=C,u=t,kn.x=T,kn.y=b,kn.t=f,kn.Gt=C,l=kn;break t}const I=Pn[t-1];I.x=T,I.y=b,I.t=f,I.Gt=C,Rn[t]=I}Rn[3]=a[i],a=Rn}while(t++<20);return l}kK(){this.DX=!0;let s=this.WK(0),i=this.QK(0),e=0;for(let t=1;t<=this.DK;t++){const h=this.WK(.01*t),n=this.QK(.01*t),r=s-h,o=i-n;e+=Math.hypot(r,o),this.AK[t]=e,s=h,i=n}this.LK=e}},Nn.WX=class{constructor(t,s,i){this.Og=i,this.qK=t.tK(),this.ZK=s.tK(),this.zK=0,this.BK=0}$h(){}Qx(){return"line"}iO(){return this.Og}VX(t,s){this.zK=t,this.BK=s}qS(){return this.qK+this.zK}KS(){return this.ZK+this.BK}}}{const T=self.Os;T.SZ=class extends T.Zh{constructor(t,s,i){super(),this.Hc=i.b4(),this.XK=i,this.KK=s,this.hn=t,this.$K=[],this.t$=0,this.s$=null,this.i$=0,this.e$(),this.h$=null,this.n$=null,this.r$=0,this.o$=0,this.a$=1,this.u$=0,this.l$=1,this.c$=!1,this.f$=!1,this.d$=!1,this.p$=!0,this.m$=!1,this.g$=!1,this.y$=-1,this.M$=!1,this.w$=!1,this.S$=!1,this.T$=!1,this.b$=NaN,this.x$=[""],this.v$="",this.C$=!1,this.gZ=0,this.I$=0,this.G$=null}static wZ(t,s){const i=s.xZ(),e=i.E$(),h=i.Ks(t[e]),n=T.Kh(T.SZ,t[e],h,s);return n._$(!0),n}static bZ(t,s,i){return T.Kh(T.SZ,t,s,i)}$h(){if(!this.tB()){const t=this.Hc.Nf();this.XK.XZ(this),this.XK.sX(this);for(const s of this.$K)s.$h();T.Nr(this.$K),this.$K=null,this.Hc=null,this.XK=null,this.KK=null,this.m$=!0,this.h$=null,this.n$=null,this.N$(t)}}N$(t){const s=T.Kh(T.Event,"timelinestatereleased");s.D$=this,t.dispatchEvent(s)}Qx(){return 0}e$(){for(const t of this.KK.L$().A$())this.t$=this.$K.push(T.O$.Ob(this,t))}R$(){return this.XK}b4(){return this.Hc}RX(){return this.$K}P$(e,h,n,r){if(this.I$){let i;for(let s=0;s<this.$K.length;s++){let t=this.$K[s];if(e===t.xB()){const o=t._B(n);o&&h.constructor===o.k$().constructor&&o.YX()===r.YX()&&(i=i||[]).push(o)}}return i}}IX(){return!!this.$K.length}OX(t){for(const s of this.$K)if(T.lh(s.GB(),t))return s;return null}F$(t){for(const s of this.$K)if(!s.j$()&&T.lh(s.zc(),t))return s;return null}wW(t){this.hn=t}zc(){return this.hn}z$(){return this.KK}GF(){return this.KK.zc()}oB(){return this.KK.oB()}rB(t){this.KK.rB(t)}B$(){return this.KK.B$()}U$(t){this.KK.U$(t)}W$(){return this.KK.W$()}Q$(t){this.KK.Q$(t)}YX(){return this.KK.YX()}J$(t){this.KK.YX(t)}bB(t){for(const s of this.RX())s.bB(t)}uB(){return this.KK.uB()}aB(t){return this.KK.aB(t)}cB(){return this.KK.cB()}lB(t){return this.KK.lB(t)}Sz(){return this.KK.Sz()}V$(t){return this.KK.V$(t)}fB(t){return this.a$=t}dB(){return this.a$}gX(){return this.KK.gX()}Y$(){return this.KK.Y$()}H$(){return this.KK.H$()}q$(){return this.u$}Z$(){return!this.IsPlaying()||0<this.a$}mB(){return this.h$||(this.h$=new Promise(t=>{this.n$=t})),this.h$}KZ(){this.h$&&(this.n$(),this.h$=null,this.n$=null)}X$(t){this.x$=T.SZ.K$(t),this.C$=!0}pB(){return this.x$}$$(){return this.C$&&(this.v$=this.x$.join(" ")),this.C$=!1,this.v$}hB(t){if(!this.x$)return!1;if(!this.x$.length)return!1;const s=T.SZ.K$(t);return!!s&&!!s.length&&s.every(T.SZ.ttt,this)}stt(){T.P9.Timeline&&this.constructor===T.SZ&&(T.P9.Timeline.O9.PushTriggerTimeline(this),this.XK.ZF(T.P9.Timeline.O9.OnTimelineStarted),this.XK.ZF(T.P9.Timeline.O9.OnTimelineStartedByName),this.XK.ZF(T.P9.Timeline.O9.OnTimelineStartedByTags),this.XK.ZF(T.P9.Timeline.O9.OnAnyTimelineStarted),T.P9.Timeline.O9.PopTriggerTimeline())}itt(){this.y$=this.Hc.ett()}pX(){this.S$||(this.S$=!0,T.P9.Timeline&&this.constructor===T.SZ&&(T.P9.Timeline.O9.PushTriggerTimeline(this),this.XK.ZF(T.P9.Timeline.O9.OnTimelineFinished),this.XK.ZF(T.P9.Timeline.O9.OnTimelineFinishedByName),this.XK.ZF(T.P9.Timeline.O9.OnTimelineFinishedByTags),this.XK.ZF(T.P9.Timeline.O9.OnAnyTimelineFinished),T.P9.Timeline.O9.PopTriggerTimeline()))}HZ(t){this.c$=t}htt(){return this.y$===this.Hc.ett()}IsPlaying(t=!1){return!!this.htt()||!(!this.ntt()||t)||this.c$}ott(){return this.IsPlaying(!0)}yB(){return this.att()}att(){return!(this.tB()||this.ntt()||this.ott()||this.fX())}qZ(t){this.f$=t}ntt(){return this.f$}utt(t){this.p$=t;const s=this.jD();(s<=0||s>=this.oB())&&(this.p$=!0)}fX(){return this.p$}tB(){return this.m$}ZZ(t){this.g$=t}iX(){return this.g$}ltt(t){this.M$=t}ctt(){return this.M$}_$(t){this.w$=!!t}IZ(){return this.w$}dX(){return this.d$}jD(){return this.r$}nB(t){const s=this.jD();this.ftt(t),this.utt(!1),this.fX()||this.ltt(!0),!this.ott()&&!this.ntt()&&this.d$||(this.ott()||this.ntt()||this.d$?this.ott()?this.iB():this.ntt()&&(this.XK.XZ(this),this.dtt()):this.dtt()),this.ptt(),this.mtt(this.jD(),!1,!0,!0,s),this.gtt(),this.gZ&&this.b4().o4(),this.ytt()}ftt(t){(t=T.ae(t)?t:this.oB())<0?this.r$=0:t>=this.oB()?this.r$=this.oB():this.r$=t}Mtt(t){(t=T.ae(t)?t:this.oB())<0?this.r$=0:t>=this.oB()?this.r$=this.oB():this.r$=t;for(const s of this.$K)s.wtt()}ytt(){T.P9.Timeline&&this.constructor===T.SZ&&(T.P9.Timeline.O9.PushTriggerTimeline(this),this.XK.ZF(T.P9.Timeline.O9.OnTimeSet),this.XK.ZF(T.P9.Timeline.O9.OnTimeSetByName),this.XK.ZF(T.P9.Timeline.O9.OnTimeSetByTags),T.P9.Timeline.O9.PopTriggerTimeline())}Stt(){if(!this.uB())if(this.cB()&&1===this.u$){if(this.Z$()){if(this.jD()>=this.oB())return!1}else if(this.jD()<=0)return!1}else if(!this.uB()&&!this.cB())if(this.Z$()){if(this.jD()>=this.oB())return!1}else if(this.jD()<=0)return!1;return!0}eB(){this.tB()||this.Stt()&&this.Play(!0)}Play(t=!1){return!this.tB()&&!this.ntt()&&(this.ott()&&this.htt()?this.Ttt():!this.ott()&&!!(this.fX()||t||this.ctt())&&this.btt())}Ttt(){return this.ltt(!1),this.XK.JZ(this),this.XK.YZ(this),this.mB(),!0}btt(){return this.ltt(!1),this.XK.YZ(this),this.mB(),!0}iB(t=!1){this.tB()||(this.utt(t),this.XK.$Z(this),this.fX()&&this.KZ())}Xf(t=!0,s=!1){if(!this.tB()){if(!this.ott()&&this.ntt())return this.XK.XZ(this);if(!this.fX()){this.iB(!0),this.Z$()?this.ftt(0):this.ftt(this.oB());const i=this.jD();this.ptt(),s?this.xtt(i):this.mtt(i,!1,!1,!0),t&&this.ytt(),this.gtt(),this.gZ&&t&&this.b4().o4()}}}vtt(){this.Xf(!1,!0)}xtt(t){this.mtt(t,!1,!1,!0,NaN,!1,!0)}hZ(){if(!this.tB()){if(!this.b4().I9()&&this.Ctt())return!1;this.XK.tX(this),this.b4().I9()||this.vtt()}return!0}dtt(){this.hX(!0)}eX(){this.hX(!1,!0),this.HZ(!1),this.qZ(!1)}hX(t=!1,s=!1){if(!this.iX()||s){if(t){this.S$=!1,this.d$=!0,this.T$=!0,this.ptt();for(const i of this.$K)i.hX()}else if(this.HZ(!0),this.qZ(!1),this.stt(),this.fX()){this.y$=-1,0!==this.u$&&(this.a$=Math.abs(this.a$)),this.u$=0,this.l$=1,this.p$=!1,this.S$=!1,this.d$=!0,this.T$=!0,this.Z$()?this.ftt(0):this.ftt(this.oB()),this.ptt();for(const e of this.$K)e.hX()}else{this.T$=!0,this.S$=!1,this.ptt();for(const h of this.$K)h.Itt()}this.gtt()}}nX(){return this.gZ}ptt(){this.I$=0;for(const t of this.$K)t.DE()&&(this.I$=1)}gtt(){this.gZ=0;for(const t of this.$K)t.Gtt(),0===this.gZ&&1===t.nX()&&(this.gZ=1),this.s$||1!==t.Ett()||(this.s$||(this.s$=[]),this.i$=this.s$.push(t))}uX(t,s,i){if(this.H$()){if(0===t&&0===this.b$)return;this.b$=t,t=i}else{if(0===i&&0===this.b$)return;t=this.b$=i,s=1}const e=this.r$+this.o$,h=t*s*this.a$,n=e+h,r=this.KK._tt;n<0?(this.r$=0,this.o$=-n):r<=n?(this.r$=r,this.o$=this.r$-n):(this.r$=n,this.o$=0);let o=!1,a=!1,u=this.uB(),l=this.cB();u||l?u&&!l?0<this.a$?this.r$>=r&&(this.Mtt(0),a=!0):this.r$<=0&&(this.Mtt(r),a=!0):!u&&l?0<this.a$?this.r$>=r&&(this.ftt(r),this.fB(-1*this.dB()),a=!0,1===this.u$?this.l$<this.Sz()?(this.l$++,this.u$=0):o=!0:0===this.u$&&(this.u$=1)):this.r$<=0&&(this.ftt(0),this.fB(-1*this.dB()),a=!0,1===this.u$?this.l$<this.Sz()?(this.l$++,this.u$=0):o=!0:0===this.u$&&(this.u$=1)):u&&l&&(0<this.a$?this.r$>=r&&(this.ftt(r),this.fB(-1*this.dB()),a=!0,this.u$++,T.wrap(this.u$,0,2)):this.r$<=0&&(this.ftt(0),this.fB(-1*this.dB()),a=!0,this.u$++,T.wrap(this.u$,0,2))):0<this.a$?this.r$>=r&&(this.l$<this.Sz()?(this.l$++,this.Mtt(0),a=!0):(this.ftt(r),o=!0)):this.r$<=0&&(this.l$<this.Sz()?(this.l$++,this.Mtt(r),a=!0):(this.ftt(0),o=!0));let c,f=this.t$;if(o){for(c=0;c<f;c++)this.$K[c].Ntt();this.iB(!0),this.itt()}else{const d=this.i$;for(c=0;c<d;c++)this.s$[c].Dtt();if(1===this.I$)for(c=0;c<f;c++){const p=this.$K[c],m=p.Att(),g=this.r$-m,y=e-m;g<0&&0<y?(this.r$=m<0?0:r<=m?r:m,p.Nc(m,!0,!1,a,this.T$,!1)):p.Nc(this.r$,!0,!1,a,this.T$,!1)}else for(c=0;c<f;c++)this.$K[c].Nc(this.r$,!0,!1,a,this.T$,!1);for(c=0;c<d;c++)this.s$[c].Ltt();this.T$&&(this.T$=!1)}}mtt(s,i=!1,e=!1,h=!1,n=NaN,t=!1,r=!1){for(const o of this.$K)o.Dtt();for(const a of this.$K){let t=s;if("number"==typeof n&&!isNaN(n)){const u=this.jD(),l=u-a.Att(),c=n-a.Att();l<0&&0<c&&(t=a.Att(),this.ftt(t))}a.Nc(t,i,e,h,this.T$,r)}for(const f of this.$K)f.Ltt();this.T$&&t&&(this.T$=!1)}Ott(){const t=this.KK.L$().Rtt(),s=T.O$.Ob(this,t);return this.t$=this.$K.push(s),s}EZ(){if(!this.tB())for(const t of this.$K)t.Ptt()}mX(){for(const t of this.$K)t.mX()}ktt(){for(const t of this.$K)t.Ftt()}jtt(t,s,i){if(s){if("number"==typeof i&&0<=i){const e=this.$K[i];return e?(e.ztt(s),void this.XK.OZ(s.cF(),this)):void 0}for(const h of this.$K)if(h.j$())if(t){if(h.GB()===t){h.ztt(s),this.XK.OZ(s.cF(),this);break}}else if(!h.Btt()){h.ztt(s),this.XK.OZ(s.cF(),this);break}}}FZ(t,s){for(const i of this.$K)if(i.j$())if(s){if(s===i.GB()&&t===i.xB())return!0}else if(t===i.xB())return!0;return!1}cX(){return this.$K.some(t=>!t.j$()||t.Utt())}Ctt(){return this.$K.some(t=>{if(t.j$()){if(!t.Utt())return!1;const s=t.cF();return!!s&&s.oV()}return!1})}_B(t){for(const s of this.RX())for(const i of s.Wtt())if(i.Qtt()===t)return i}Jtt(t){for(const s of this.$K)if(t===s.xB())return s;return null}Vtt(t){let s=t?t.split(" "):[],i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const e of this.RX())for(const h of e.Ytt()){const n=s.every(t=>h.Htt(t));if(n)return h}}RZ(){const t=[];for(const s of this.RX())t.push(s.cF());return t.filter(t=>t)}fZ(){for(const t of this.RX())t.fZ()}VH(){return{tracksJson:this.qtt(),name:this.hn,playheadTime:this.jD(),playbackRate:this.a$,pingPongState:this.u$,currentRepeatCount:this.l$,isPlaying:this.c$,isScheduled:this.f$,initialStateSet:this.d$,finishedTriggers:this.S$,complete:this.p$,released:this.m$,markedForRemoval:this.g$,completedTick:this.y$,implicitPause:this.M$,isTemplate:this.w$,tags:this.x$.join(" "),stringTags:this.v$,tagsChanged:this.C$,firstTick:this.T$}}YH(t){t&&(this.Ztt(t.tracksJson),this.hn=t.name,this.r$=t.playheadTime,this.a$=t.playbackRate,this.u$=t.pingPongState,this.l$=t.currentRepeatCount,this.c$=!!t.isPlaying,this.f$=!!t.isScheduled,this.d$=!!t.initialStateSet,this.S$=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.p$=!!t.complete,this.m$=!!t.released,this.g$=!!t.markedForRemoval,this.y$=t.completedTick,this.M$=!!t.implicitPause,this.w$=!!t.isTemplate,this.x$=t.tags.split(" "),this.v$=t.stringTags,this.C$=!!t.tagsChanged,this.T$=!!t.firstTick)}qtt(){return this.$K.map(t=>t.VH())}Ztt(t){this.ktt(),t.forEach((t,s)=>{const i=this.$K[s];i.YH(t)}),this.$K.filter(t=>t.Utt())}static ttt(t){const s=this.pB();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static K$(t){if(T.Oe(t))return t.slice(0);if(T.Me(t))return t.split(" ");throw new Error("invalid tags")}Xtt(){return this.G$||(this.G$=T.Kh(self.wB,this)),this.G$}}}{const Fn=self.Os;Fn.O$=class extends Fn.Zh{constructor(t,s){super(),this.AX=t,this.Ktt=s,this.$tt=s.L$(),this.tst=NaN,this.sst=NaN,this.ist=null,this.est=null,this.hst=!1,this.CE=0<s.Att(),this.nst=!1,this.rst=!1,this.ost=NaN,this.ast=null,this.ust=this.Ktt.cst().lst(),this.fst=[],this.dst(),this.pst=0,this.gZ=0,this.mst=0}static Ob(t,s){return Fn.Kh(Fn.O$,t,s)}$h(){this.ust=null;for(const t of this.fst)t.$h();Fn.Nr(this.fst),this.fst=null,this.AX=null,this.ist=null,this.est=null,this.Ktt=null,this.ast=null}dst(){for(const t of this.Ktt.yst().gst())this.fst.push(Fn.Mst.Ob(this,t))}Ptt(){for(const t of this.fst)t.Ptt()}mX(){for(const t of this.fst)t.mX();this.ist=null,this.est=null}wst(){return this.AX}b4(){return this.AX.b4()}Ytt(){return this.ust||(this.ust=this.Ktt.cst().lst()),this.ust}Wtt(){return this.fst}_B(s){for(let t=0;t<this.fst.length;t++){const i=this.fst[t];if(i.Qtt()===s)return i}}Sst(){this.ist||this.xB()}Tst(){return!!this.ist&&!this.ist.EU()}Utt(){if(!this.j$())return!1;const t=this.bst(),s=this.b4().H3(t);return!!s&&!s.EU()}cF(){if(this.j$()){const t=this.xst();if(-1!==t)return this.b4().Z8(t)}}vst(){return this.AX.RX().indexOf(this)}Ftt(){this.ist=null,this.tst=NaN,this.est=null,this.sst=NaN,this.hst=!0}Btt(){return!!this.ist}xB(){if(!this.hst){if(!this.ist||!this.Tst()){const t=this.bst();this.ist=this.b4().H3(t)}return this.ist}}ztt(t){if(this.hst=!1,this.ist!==t){this.mX(),this.ist=t,this.sst=t.cF().iO(),this.tst=t.CF(),this.est=t.t4();for(const s of this.Cst()){const i=s.Ist,e=s.Gst,h=i.Est();switch(h){case"instance-variable":{e._st();const n=t.cF(),r=n.Nst(s.name),o=n.Dst(r),a=n.Ast(r);o===s.name&&a===s.type&&e.Lst(r);break}case"behavior":{const u=s.ez,l=this.cF(),c=t.cF(),f=e.nz(c);if(u&&f){const d=u.zc();l.Ost(d),c.Ost(d),e._st(),e.Rst(f._V())}break}}}}}*Cst(){for(const t of this.fst){const s=t.k$(),i=this.cF(),e={Ist:t,Gst:s};switch(t.Est()){case"world-instance":e.property=t.Qtt();break;case"instance-variable":{const h=s._st();e.name=i.Dst(h),e.type=i.Ast(h);break}case"effect":{const n=i._P(),r=s.Pst(n);e.kst=r;break}case"behavior":{const o=s.nz(i);e.ez=o;break}case"plugin":e.hP=i.nP()}yield e}}t4(){if(!this.est||!this.Tst()){const t=this.xB();t&&(this.est=t.t4())}return this.est}Fst(){return this.Ktt}bst(){return isNaN(this.tst)?this.Ktt.bst():this.tst}jst(t){this.Ktt.jst(t)}W$(){return this.Ktt.W$()}Q$(t){this.Ktt.Q$(t)}YX(){return this.Ktt.YX()}GB(){return this.Ktt.GB()}Att(){return this.Ktt.Att()}zst(){return this.Ktt.zst()}Bst(t){this.Ktt.Bst(t)}J$(t){this.Ktt.J$(t)}bB(t){for(const s of this.Ytt())s.bB(t);for(const i of this.Wtt())i.bB(t)}Ust(){return this.Ktt.Ust()}Wst(t){this.Ktt.Wst(t)}xst(){return isNaN(this.sst)?this.Ktt.xst():this.sst}Qst(t){this.Ktt.Qst(t)}Jst(t){this.Ktt.Jst(t)}Vst(){const t=this.xB();if(t){const s=t.Y5();if(s.Yst())return t.Y5().Vst()}return this.Ktt.Vst()}Hst(t){this.Ktt.Hst(t)}qst(){const t=this.xB();if(t){const s=t.Y5();if(s.Yst())return t.Y5().qst()}return this.Ktt.qst()}Qx(){return this.Ktt.Qx()}zc(){return this.Ktt.zc()}j$(){return 0===this.Qx()}Zst(){return 1===this.Qx()}Xst(){return 2===this.Qx()}Kst(){return this.pst}nX(){return this.gZ}Ett(){return this.mst}DE(){return this.CE}wtt(){for(const t of this.fst)t.wtt()}hX(){if(this.Sst(),this.Tst()||!this.j$()){const t=this.wst(),s=t.Z$(),i=s?0:this.zst();for(const h of this.fst)h.hX(i),0===this.pst&&1===h.Kst()&&(this.pst=1),0===this.gZ&&1===h.nX()&&(this.gZ=1);this.mst=0;const e=this.fst.some(t=>t.Ett());e&&(this.mst=1),this.ast=this.$st(i),this.nst=!1,this.rst=!1,this.Nc(i),this.tit(this.$st(i))}}Itt(){if(this.Sst(),this.Tst()||!this.j$()){this.AX.Z$();const t=this.AX.jD()-this.Att();this.ast=this.$st(t);for(const s of this.fst)s.Itt(t)}}Ntt(){if(!this.wst().fX()&&(this.Sst(),this.Tst()||!this.j$())&&!this.CE){const t=this.AX.jD(),s=this.Att()+this.zst();s<=t?this.Nc(this.zst(),!0,!1,!0,!1,!1,!0):t<=0&&this.Nc(0,!0,!1,!0,!1,!1,!0)}}Gtt(){for(let t=0,s=this.fst.length;t<s;t++){const i=this.fst[t];i.Gtt(),0===this.pst&&1===i.Kst()&&(this.pst=1),0===this.gZ&&1===i.nX()&&(this.gZ=1)}}Dtt(){const s=this.fst.length;for(let t=0;t<s;t++)this.fst[t].Dtt()}Nc(i,t=!1,e=!1,h=!1,s=!1,n=!1,r=!1){this.ist||this.xB();const o=this.ist&&!this.ist.EU(),a=0===this.Ktt.ef;if((o||!a)&&!(n&&a&&this.cF().oV()||(i-=this.Att())<0)){this.sit(i,t),this.iit(i,t,s);for(let t=0,s=this.fst.length;t<s;t++)this.fst[t].Nc(i,e,h,r);this.eit(i,t),0!==this.pst&&(this.est||(this.est=this.ist.t4()),this.est)&&this.est.Cj()}}Ltt(){const s=this.fst.length;for(let t=0;t<s;t++)this.fst[t].Ltt()}sit(t,s){if(s&&this.CE&&!this.nst){const i=this.wst();if(i.Z$()){if(t<0)return}else if(t>this.zst())return;for(const e of this.fst)e.hX();this.nst=!0}}eit(t,s){if(s&&this.CE&&!this.rst){const i=this.wst();if(i.Z$()){if(t>=this.zst()){for(const e of this.fst)e.Nc(this.zst(),!1,!0);this.rst=!0}}else if(t<=0){for(const h of this.fst)h.Nc(0,!1,!0);this.rst=!0}}}iit(t,s,i){if(!i&&s&&Fn.P9.Timeline){const e=this.wst(),h=this.ast.jX(),n=this.ast.jD(),r=h?h.jD():e.oB();if(t<=n||r<=t)if(this.ast=this.$tt.hit(t,this.Ktt),e.Z$())h&&this.tit(this.ast);else{const o=this.ast.jX();o&&this.tit(o)}}}$st(t){const s=this.$tt.nit(t,this.Ktt);return s||this.$tt.hit(t,this.Ktt)}tit(t){if(Fn.P9.Timeline){const s=this.wst(),i=s.R$();Fn.P9.Timeline.O9.PushTriggerTimeline(s),Fn.P9.Timeline.O9.PushTriggerKeyframe(t),i.ZF(Fn.P9.Timeline.O9.OnAnyKeyframeReached),i.ZF(Fn.P9.Timeline.O9.tit),Fn.P9.Timeline.O9.PopTriggerTimeline(s),Fn.P9.Timeline.O9.PopTriggerKeyframe(t)}}rit(){const t=this.Ktt.cst(),s=t.oit();return s}ait(){const t=this.Ktt.yst(),s=t.uit(),i=Fn.Mst.Ob(this,s);return this.fst.push(i),i}lit(t){const s=this.Ktt.cst();s.cit(t)}fit(t){for(const s of this.fst)s.fit(t)}dit(){for(const t of this.fst)t.dit()}pit(){if(this.Sst(),this.Tst()||!this.j$())for(const t of this.fst)t.pit()}mit(){if(this.Sst(),this.Tst()||!this.j$()){let t=!1;for(const s of this.fst){const i=s.mit();!t&&i&&(t=!0)}if(t){const e=this.rit();e.nB(this.wst().jD()),e.bB("noease"),e.Wst(!0),e.X$("")}}}fZ(){isNaN(this.ost)||this.git(this.ost),this.ost=NaN}VH(){const t=this.xB(),s=t?t.CF():this.bst();return{propertyTracksJson:this.yit(),lastKeyframeDataItemJson:this.Mit(),initialStateOfNestedSet:this.nst,endStateOfNestedSet:this.rst,instanceUid:s,cleared:this.hst}}YH(t){if(t){this.wit(t.propertyTracksJson),this.Sit(t.lastKeyframeDataItemJson),this.ost=t.instanceUid,this.nst=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.nst=t.initialStateOfNestedSet),this.rst=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.rst=t.endStateOfNestedSet),this.hst=!!t.hasOwnProperty("cleared")&&t.cleared;for(const s of this.fst)0===this.pst&&1===s.Kst()&&(this.pst=1),0===this.gZ&&1===s.nX()&&(this.gZ=1);this.mst=0,this.fst.some(t=>t.Ett())&&(this.mst=1)}}Mit(){const t=this.Ktt.cst();return t.Tit(this.ast)}yit(){return this.fst.map(t=>t.VH())}wit(t){t.forEach((t,s)=>{const i=this.fst[s];i.YH(t)})}git(t){if(Fn.ae(t)){const s=this.b4().H3(t);if(s){const i=this.wst();i.jtt(this.Ktt.GB(),s,this.vst())}}}Sit(t){const s=this.Ktt.cst();this.ast=s.bit(t)}}}{const jn=self.Os;jn.Mst=class extends jn.Zh{constructor(t,s){super(),this.xit=t,this.vit=s,this.Cit=s.yst(),this.pst=0,this.gZ=0,this.mst=0,this.Iit=this.k$(),this.Git=this.vit._it().Eit(),this.Nit=null,this.Dit=null}static Ob(t,s){return jn.Kh(jn.Mst,t,s)}$h(){this.xit=null,this.Iit&&(this.Iit.$h(),this.Iit=null),this.Git=null,this.vit=null,this.Cit=null}Kst(){return this.pst}nX(){return this.gZ}Ett(){return this.mst}Ait(){return!!this.Dit}Lit(t){this.Dit=t}Oit(){return this.Dit}Rit(){return this.xit}Pit(){return this.vit}yst(){return this.Cit}wst(){return this.xit.wst()}b4(){return this.xit.b4()}xB(){return this.xit.xB()}k$(){if(!this.Iit){let t=this.vit.Est(),s;switch(t){case"behavior":s=new jn.Mst.kit(this);break;case"effect":s=new jn.Mst.Fit(this),this.gZ=1;break;case"instance-variable":s=new jn.Mst.jit(this);break;case"plugin":s=new jn.Mst.zit(this),this.gZ=1;break;case"world-instance":s=new jn.Mst.Bit(this),this.gZ=1,this.pst=1;break;case"value":s=new jn.Mst.Uit(this);break;case"audio":s=new jn.Mst.Wit(this)}this.Iit=s}return this.Iit}Est(){return this.vit.Est()}Qit(t){this.vit.Qit(t)}Jit(){return this.vit.Vit()}Yit(t){this.vit.Hit(t)}EB(){return this.k$().qit()}Qtt(){return this.vit.Zit()}Xit(t){this.vit.Kit(t)}$it(){return this.vit.Qx()}tet(t){this.vit.iet(t)}eet(){return this.yst().het(this.vit).Qx()}net(){return this.vit.net()}ret(t){this.vit.ret(t)}oet(){return this.vit.oet()}aet(t){this.vit.aet(t)}Ust(){return this.vit.Ust()}Wst(t){this.vit.Wst(t)}W$(){return this.vit.W$()}Q$(t){this.vit.Q$(t)}YX(){return this.vit.YX()}J$(t){this.vit.J$(t)}bB(t){for(const s of this.uet())s.bB(t)}let(){return this.vit.let()}uet(){return this.Git||(this.Git=this.vit._it().Eit()),this.Git}FX(){return this.vit._it().FX()}cet(t){return this.Cit.cet(t,this.vit)}fet(t){return this.Cit.fet(t,this.vit)}det(t){let s=this.Cit.cet(t,this.vit),i;return i=s?this.Cit.pet(t,this.vit):(s=this.Cit.fet(t,this.vit),this.Cit.met(t,this.vit)),{start:s,end:i}}*yet(){for(const t of this.uet())yield t.tK()}*Met(){for(const t of this.uet())yield t.jD()}Ptt(){this.k$().Ptt()}mX(){this.k$().mX()}wet(){return this.k$().wet()}wtt(){this.k$().wtt()}hX(t){this.k$().hX(),this.Nit=this.Tet(t),this.Gtt()}Itt(t){this.k$().Itt(),this.Nit=this.Tet(t)}Gtt(){const t=this.Rit();if(this.mst=0,t.j$()){const s=this.wst(),i=t.xB(),e=this.k$(),h=this.Qtt(),n=e.bet();if(n){const r=s.P$(i,e,h,this);r&&r.length&&(this.mst=1)}else this.mst=0}}Tet(t){const s=this.wst(),i=this.Cit.cet(t,this.vit);return i||(s.Z$()?this.Cit.fet(t,this.vit):this.Cit.met(t,this.vit))}Dtt(){this.Iit.Dtt()}Nc(t,s=!1,i=!1,e=!1){let h,n,r=!1;if(s)h=this.Cit.fet(t,this.vit);else{if(this.Nit){const o=this.wst(),a=this.Nit.jX(),u=this.Nit.jD(),l=a?a.jD():o.oB();(t<=u||l<=t)&&(this.Nit=this.Cit.fet(t,this.vit),r=!0)}else this.Nit=this.Cit.fet(t,this.vit),r=!0;h=this.Nit}h&&(n=h.jX()),this.Iit.Nc(t,h,n,s,i,e,r)}xet(t){if(this.Nit){const e=this.wst(),h=this.Nit.jX(),n=this.Nit.jD(),r=h?h.jD():e.oB();(t<=n||r<=t)&&(this.Nit=this.Cit.fet(t,this.vit))}else this.Nit=this.Cit.fet(t,this.vit);const s=this.Nit,i=s.jX();return this.Iit.xet(t,s,i)}vet(t,s,i){return this.Iit.xet(t,s,i)}Ltt(){this.Iit.Ltt()}static Cet(t,s){const i=s.Pit(),e=s.Cit;return e.fet(t,i)}static Iet(t,s){const i=s.Pit(),e=s.Cit;return e.met(t,i)}Get(){const t=this.vit._it(),s=t.Eet();return this.Nit=null,s}fit(t){this.Nit=null;const s=this.vit._it();s._et(t)}dit(){this.k$().dit()}pit(){const t=this.k$().pit();if(t){const s=this.Cit.het(this.vit),i=this.k$().wet();s.Net(i)}}mit(){const t=this.k$().mit();return t&&this.Det(),this.k$().Aet(),t}Det(){const t=this.wst().jD(),s=this.k$(),i=jn.Mst.Cet(t,this),e=this.Get();e.iet(i.Qx()),e.nB(t),e.bB(i.Let()),e.Wst(!0),e.Oet(s.Ret()),e.Net(s.wet())}VH(){return{sourceAdapterJson:this.k$().VH()}}YH(t){t&&this.k$().YH(t.sourceAdapterJson)}}}{const zn=self.Os,Bn=zn.Mst;Bn.Bit=class{constructor(t){this.Pet=t,this.ket=null,this.Fet()}$h(){this.ket&&(this.ket.$h(),this.ket=null),this.Pet=null}bet(){return this.ket.bet()}_B(){return this.Pet}Ptt(){this.ket&&this.ket.Ptt()}mX(){this.ket&&this.ket.mX()}Fet(){return this.ket||(this.ket=this.jet()),this.ket}_st(){}iO(){return this._st()}zet(){}wtt(){this.Fet().wtt()}hX(){this.Fet().hX()}Itt(){this.Fet().Itt()}Dtt(){this.ket.Bet()}Nc(t,s,i,e,h,n,r){let o=this.Pet.eet(),a;switch(o){case"numeric":a=Bn.Uet.Nc(t,s,i,this.Pet);break;case"angle":a=Bn.Wet.Nc(t,s,i,this.Pet);break;case"boolean":a=Bn.Qet.Nc(t,s,i,this.Pet);break;case"color":a=Bn.Jet.Nc(t,s,i,this.Pet);break;case"text":a=Bn.Vet.Nc(t,s,i,this.Pet)}this.ket.Yet(t,a,s,i,e,h,n,r)}xet(t,s,i){switch(this.Pet.eet()){case"numeric":return Bn.Uet.Nc(t,s,i,this.Pet);case"angle":return Bn.Wet.Nc(t,s,i,this.Pet);case"boolean":return Bn.Qet.Nc(t,s,i,this.Pet);case"color":return Bn.Jet.Nc(t,s,i,this.Pet);case"text":return Bn.Vet.Nc(t,s,i,this.Pet)}}Ltt(){this.ket.Het()}dit(){this.Fet().qet()}Aet(){this.Fet().Aet()}wet(){return this.Fet().wet()}pit(){return this.Fet().pit()}mit(){return this.Fet().mit()}Ret(){const t=this.Pet,s=t.Rit(),i=s.wst().jD(),e=Bn.Cet(i,t),h=e.jX(),n=t.eet();switch(n){case"numeric":return Bn.Uet.Nc(i,e,h,t);case"angle":return Bn.Wet.Nc(i,e,h,t);case"boolean":return Bn.Qet.Nc(i,e,h,t);case"color":return Bn.Jet.Nc(i,e,h,t);case"text":return Bn.Vet.Nc(i,e,h,t)}}jet(){const t=this.Pet,s=t.let()?t.eet():"";switch(s){case"combo":case"boolean":case"text":case"string":return new Bn.Xet.Zet(this);case"numeric":case"number":case"angle":return new("combo"===this.Pet.$it()?Bn.Xet.Zet:Bn.Xet.Ket)(this);case"color":case"offsetColor":return new Bn.Xet.$et(this);default:return new Bn.Xet.Ket(this)}}VH(){return{propertyAdapterJson:this.Fet().VH()}}YH(t){t&&this.Fet().YH(t.propertyAdapterJson)}}}{const Un=self.Os;class Wn extends Un.Mst.Bit{constructor(t){super(t),this.tht=NaN}_st(){return this.Pet.Pit().Vit()[0]}iO(){return this.tht||super.iO()}zet(){return this.Pet.Rit().xB()}Lst(t){const s=this.Pet.Pit().Vit()[0];s!==t&&(this.tht=t)}Nc(t,s,i,e,h,n,r){this.Fet().sht(s.qit())&&super.Nc(t,s,i,e,h,n,r)}xet(t,s,i){if(this.Fet().sht(s.qit()))return super.xet(t,s,i)}VH(){return Object.assign(super.VH(),{index:this.tht})}YH(t){t&&(super.YH(t),this.tht=t.index)}}Un.Mst.jit=Wn}{const Qn=self.Os;class Jn extends Qn.Mst.Bit{constructor(t){super(t),this.qJ=NaN}_st(){const t=this.Pet.Pit();return t.Vit()[1]}zet(){const t=this.Pet.Pit(),s=this.Pet.Rit(),i=this.qJ||t.Vit()[0],e=s.xB(),h=e.iht(i),n=e.eht()[h];return n.Y5()}nz(t){const s=this.Pet.Pit(),i=s.Vit()[2];return t.hht(i)}Rst(t){const s=this.Pet.Pit();s.Vit()[0]!==t&&(this.qJ=t)}Nc(t,s,i,e,h,n,r){const o=this.Pet.Rit(),a=o.xB();this.nz(a.cF())&&super.Nc(t,s,i,e,h,n,r)}xet(t,s,i){const e=this.Pet.Rit(),h=e.xB();if(this.nz(h.cF()))return super.xet(t,s,i)}VH(){return Object.assign(super.VH(),{sid:this.qJ})}YH(t){t&&(super.YH(t),this.qJ=t.sid)}}Qn.Mst.kit=Jn}{const Vn=self.Os;class Yn extends Vn.Mst.Bit{constructor(t){super(t)}_st(){return this.Pet.Pit().Vit()[1]}zet(){const t=this.Pet,s=t.Rit(),i=s.t4(),e=i.xj(),h=e._P(),n=this.Pst(h),r=n.iO();return e.cz(r)?e.nht(r):null}Pst(t){const s=this.Pet,i=s.Pit().Vit()[0];return t.rht(i)}Nc(t,s,i,e,h,n,r){this.oht()&&super.Nc(t,s,i,e,h,n,r)}xet(t,s,i){if(this.oht())return super.xet(t,s,i)}oht(){const t=this.Pet,s=t.Rit(),i=s.t4(),e=i.xj(),h=e._P(),n=this.Pst(h);if(n){const r=n.iO();return e.cz(r)}}}Vn.Mst.Fit=Yn}{const Hn=self.Os;class qn extends Hn.Mst.Bit{constructor(t){super(t)}_st(){return this.Pet.Pit().Vit()[0]}zet(){return this.Pet.Rit().xB().Y5()}Nc(t,s,i,e,h,n,r){const o=this.Pet.Rit(),a=o.cF().nP(),u=o.xB().cF().nP();a===u&&super.Nc(t,s,i,e,h,n,r)}xet(t,s,i){const e=this.Pet.Rit(),h=e.cF().nP(),n=e.xB().cF().nP();if(h===n)return super.xet(t,s,i)}aht(){const t=this.Pet.Rit(),s=t.cF().nP();if(Hn.P9.uht&&s instanceof Hn.P9.uht&&("initial-frame"===this.Pet.Qtt()||"initial-animation"===this.Pet.Qtt()))switch(this.Pet.YX()){case"relative":case"absolute":return null}}}Hn.Mst.zit=qn}{const Zn=self.Os;class Xn extends Zn.Mst.Bit{constructor(t){super(t),this.lht=0,this.cht=!1}bet(){return!1}hX(){let t=this.Pet.yst(),s=this.Pet.Pit();s=t.het(s),this.lht=s.tK()}Itt(){}qit(){return this.cht||this.Pet.Nc(0),this.lht}Nc(t,s,i,e,h,n,r){this.lht=Zn.Mst.Uet.Nc(t,s,i,this.Pet),this.cht=!0}dit(){}Aet(){}wet(){return this.lht}pit(){return!1}mit(){return!1}VH(){return{value:this.lht,init:this.cht}}YH(t){t&&(this.lht=t.value,this.cht=!t.hasOwnProperty("init")||t.init)}}Zn.Mst.Uit=Xn}{const Kn=self.Os;class $n extends Kn.Mst.Bit{constructor(t){super(t),this.fht=!1,this.dht=null,this.pht=null,this.mht=null,this.AX=this.Pet.wst(),this.xit=this.Pet.Rit(),this.ght=this.Pet.Jit(),this.yht=this.ght[0],this.Mht=this.ght[1],this.ght[3]?this.wht=this.ght[3]:this.wht=Math.random().toString(36).slice(2),this.Sht=NaN,this.Tht=NaN,this.bht=NaN,this.xht=null,this.vht()}$h(){super.$h(),this.dht=null,this.pht=null,this.mht=null,this.AX=null,this.xit=null,this.ght=null,this.yht=null,this.xht=null}vht(){if(self.Os.P9.Audio){const t=this.Pet.b4(),s=t.Cht(self.Os.P9.Audio);s&&(this.dht=s.iP().Y5()),this.pht=self.Os.P9.Audio.Iht,this.mht=self.Os.P9.Audio.Ght}}Eht(){if(!this.xht){const t=this.Pet.Rit(),s=t._B("audioSource");s&&(this.xht=s.k$())}}_ht(){const t=this.Pet.Rit(),s=t._B("volume");return(s?s.k$():this).Tht}Ptt(){super.Ptt(),this.fht=!1,this.dht&&(this.mht&&(this.Sht=this.mht.PlaybackTime.call(this.dht,this.wht),this.Tht=this.mht.Volume.call(this.dht,this.wht)),this.pht)&&this.pht.iB.call(this.dht,this.wht)}Nht(){return this.wht}Dht(){return this.bht}Aht(t){this.bht=t}hX(){super.hX(),this.Sht=NaN,this.fht=!1}Itt(){super.Itt();const t=this.Pet.wst(),s=t.jD();switch(this.Sht=s-this.Mht,this.Pet.Qtt()){case"audioSource":break;case"volume":this.Tht=this.Pet.xet(s)}this.fht=!1}Nc(t,s,i,e,h,n,r){if(this.dht)switch(this.Pet.Qtt()){case"audioSource":{if(!this.AX.Z$())return;if(e)return void(this.pht&&this.pht.iB.call(this.dht,this.wht));if(t<this.Mht)return void(this.fht=!1);const o=this.mht.PlaybackRate.call(this.dht,this.wht),a=this.AX.dB();if(a!==o&&this.pht.fB.call(this.dht,this.wht,a),this.fht)return;if(!this.Pet.wst().IsPlaying())return;if(this.fht=!0,isNaN(this.Sht)){const u=self.performance.now(),l=t-this.Mht,c=this.dht.GetAudioContextState();if("suspended"===c)return void(this.fht=!1);const f=self.performance.now(),d=(f-u)/1e3,p=l+d;if(this.pht){let t=this.Dht();isNaN(t)?(this.Aht(0),t=0):this.Aht(t),this.pht.PlayFromTimeline.call(this.dht,this.yht,t,this.wht,p)}}else{const m=this.Sht,g=(this.Sht=NaN,this._ht()),y=(this.Tht=NaN,this.dht.GetAudioContextState());if("suspended"===y)return void(this.fht=!1);this.pht&&(this.Aht(g),this.pht.PlayFromTimeline.call(this.dht,this.yht,g,this.wht,m))}break}case"volume":this.Eht(),super.Nc(t,s,i,e,h,n,r)}}xet(t,s,i){if(this.dht)switch(this.Pet.Qtt()){case"audioSource":return;case"volume":return this.Eht(),super.xet(t,s,i)}}Lht(t,s){return this.xht?this.xht.Dht():0}Oht(t,s,i,e){this.xht&&this.xht.Aht(this.Lht()+s),this.pht&&this.xht&&this.pht.Aht.call(this.dht,this.xht.Nht(),this.xht.Dht())}Rht(t,s,i){this.xht&&this.xht.Aht(s),this.pht&&this.xht&&this.pht.Aht.call(this.dht,this.xht.Nht(),this.xht.Dht())}Pht(){return!0}VH(){return{audioPlaybackStarted:this.fht,audioTag:this.wht,pauseTime:this.Sht,pauseVolume:this.Tht,volume:this.bht}}YH(t){t&&(this.fht=t.audioPlaybackStarted,this.wht=t.audioTag,this.Sht=t.pauseTime,this.Tht=t.pauseVolume,this.bht=t.volume,this.vht())}}Kn.Mst.Wit=$n}{const tr=self.Os;tr.Mst.Xet=class{constructor(t){this.Iit=t,this.Pet=t._B(),this.est=this.Pet.Rit().t4(),this.kht=this.Pet.Qtt(),this.Fht=!1,this.jht=null,this.zht=null}$h(){this.Iit=null,this.Pet=null,this.est=null,this.jht=null,this.zht=null}bet(){return!1}Ptt(){}mX(){this.est=null,this.jht=null,this.zht=null}k$(){return this.Iit}_B(){return this.Pet}t4(){return this.est||(this.est=this.Pet.Rit().t4()),this.est}Bht(t){this.Fht=!!t}Uht(){return this.Fht}wtt(){}hX(){}Itt(){}qet(){this.jht=this.wet()}Aet(){this.jht=null}wet(){}pit(){}mit(){}sht(t){const s=typeof this.Wht(),i=typeof t;return s==i}Bet(){}Yet(t,s,i,e,h,n,r,o){}Het(){}Qht(){const t=this.Jht(()=>{const t=this.Pet.Pit(),s=this.Pet.yst();return s.het(t)},()=>{const t=this.Pet.Pit(),s=this.Pet.yst();return s.Vht(t)});return t.Yht()}Hht(){const t=this.Pet.wst(),e=t.jD()-this.Pet.Rit().Att(),s=this.Jht(()=>{const t=this.Pet.Pit(),s=this.Pet.yst();return s.fet(e,t)},()=>{const t=this.Pet.Pit(),s=this.Pet.yst(),i=s.met(e,t);return i||s.Vht(t)});return s.Yht()}Jht(t,s){const i=this.Pet.wst();return(i.Z$()?t:s)()}qht(t,s){const i=this.Pet.YX();return("relative"===i?t:s)()}Zht(t,s){return(this.Uht()?(this.Bht(!1),t):s)()}Xht(t){}Kht(){return this.Iit.iO()}$ht(){return this.zht||(this.zht=this.Iit.zet()),this.zht}tnt(t,s,i,e,h,n){const r=this.Pet.Est();switch(r){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return h();case"audio":return n()}}VH(){return{firstAbsoluteUpdate:this.Fht,saveState:this.jht}}YH(t){t&&(this.Fht=t.firstAbsoluteUpdate,this.jht=t.saveState)}snt(t,s=!1){const i=[];for(const e of t){const h=e.Rit().Att();for(const n of e.uet())(s&&0===n.jD()||!s)&&i.push({time:h+n.jD(),value:n.Yht()})}return i.sort((t,s)=>t.time-s.time)}int(t,s,i){return this.ent(s,i)}ent(s,i){for(let t=i.length-1;0<=t;t--){const e=i[t].time;if(e<=s)return i[t]}return null}}}{const sr=self.Os,ir=new Map,er=[0,0,0];class hr extends sr.Mst.Xet{constructor(t){super(t)}wtt(){}hX(){}Itt(){}wet(){const t=this.Pet.Est(),s=this.$ht(),i=this.Kht();switch(t){case"behavior":return this.hnt(s.nnt(i));case"effect":return this.hnt(s[i]);case"plugin":return this.hnt(s.nnt(i));case"world-instance":return this.hnt(this.Wht())}}pit(){const t=this.Qht();return!this.rnt(t,this.Wht())}mit(){return!sr.fe(this.jht)&&!this.rnt(this.jht,this.Wht())}rnt(t,s){return t=this.ont(t),s=this.ont(s),t.ia(s)}Qht(){const t=super.Qht();return this.ont(t)}Hht(){const t=super.Hht();return this.ont(t)}Xht(t){}hnt(t){return(sr.He(t,sr.Oo)?t.toArray():t).slice(0,3)}ont(t){return sr.He(t,sr.Oo)?t:new sr.Oo(t[0],t[1],t[2],1)}sht(t){return!0}bet(){return!0}Bet(){const t=this.Pet.wst(),s=this.Pet.xB(),i=this.Pet.k$(),e=t.P$(s,i,this.kht,this.Pet);if(e&&1<e.length){ir.has(s)||ir.set(s,new Map);const h=ir.get(s),n=this.Pet.Est(),r=(h.has(n)||h.set(n,new Map),h.get(n));r.has(this.kht)||r.set(this.kht,{ant:!1,color:new sr.Oo(0,0,0,1)})}}unt(t,s,i){const e=ir.get(t).get(s).get(i);return e.ant=!0,e.color}Yet(t,s,i,e,h,n,r,o){const a=this.Pet.wst(),u=this.Pet.Rit(),l=this.Pet.xB(),c=this.Pet.k$(),f=this.Pet.Est(),d=this.kht,p=a.P$(l,c,d,this.Pet);if(p&&1<p.length){const m=this.snt(p,!0),g=this.int(a,a.jD(),m);if(g){const y=u.Att(),M=g.time-y;if(0==M)this.unt(l,f,this.kht).Bo(s[0],s[1],s[2]);else if(!(M<0)){const w=s[0],S=s[1],T=s[2],b=this.Pet.Nc(M,!1,!0),x=sr.Oo.Pa(w,b[0]),v=sr.Oo.Pa(S,b[1]),C=sr.Oo.Pa(T,b[2]);this.unt(l,f,this.kht).Bo(x,v,C)}}}else this.lnt(s[0],s[1],s[2])}Het(){const t=this.Pet.xB();if(ir.has(t)){const s=ir.get(t),i=this.Pet.Est();if(s.has(i)){const e=s.get(i);if(e.has(this.kht)){const h=e.get(this.kht),n=h.ant,r=h.color;n&&this.lnt(r.Ho(),r.qo(),r.Zo()),0===e.size&&s.delete(i),0===s.size&&ir.delete(t)}}}}Wht(){const t=this.Pet.Est(),s=this.$ht(),i=this.Kht();switch(t){case"behavior":return this.ont(s.nnt(i));case"effect":return s[i].clone();case"plugin":return this.ont(s.nnt(i));case"world-instance":return this.t4().jj().clone()}}lnt(t,s,i){const e=this.Pet.Est(),h=this.$ht(),n=this.Kht();switch(e){case"behavior":er[0]=t,er[1]=s,er[2]=i,h.cnt(n,er);break;case"effect":h[n].zo(t,s,i);break;case"plugin":er[0]=t,er[1]=s,er[2]=i,h.cnt(n,er);break;case"world-instance":this.t4().fnt(t,s,i)}}VH(){}YH(t){}}sr.Mst.Xet.$et=hr}{const nr=self.Os,rr=nr.Mst;class or extends nr.Mst.Xet{constructor(t){super(t)}wtt(){}hX(){}Itt(){}wet(){return this.Wht()}pit(){const t=this.Qht();return t!==this.wet()}mit(){return!nr.fe(this.jht)&&this.jht!==this.wet()}bet(){return!1}Yet(t,s,i,e,h,n,r,o){const a=this.Pet,u=a.Rit(),l=a.Est(),c=a.wst(),f=u.xB(),d=a.k$(),p=this.kht,m=c.P$(f,d,p,a);if(m&&1<m.length){const y=this.snt(m),M=t+u.Att(),w=this.int(c,M,y);w&&(s=w.value)}const g=a.eet();switch(g){case"numeric":if(rr.Uet.dnt(this.Kht(),this.$ht(),s,l))break;return;case"angle":if(rr.Wet.dnt(this.Kht(),this.$ht(),s,l))break;return;case"boolean":if(rr.Qet.dnt(this.Kht(),this.$ht(),s,l))break;return;case"color":if(rr.Jet.dnt(this.Kht(),this.$ht(),s,l))break;return;case"text":if(!rr.Vet.dnt(this.Kht(),this.$ht(),s,l))return}this.lnt(s)}Wht(){const t=this.Pet.Est(),s=this.$ht(),i=this.Kht();switch(t){case"behavior":return s.nnt(i);case"effect":return s[i];case"instance-variable":return s.pnt(i);case"plugin":return s.nnt(i)}}lnt(t){const s=this.Pet.Est(),i=this.$ht(),e=this.Kht();switch(s){case"behavior":i.cnt(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.mnt(e,t);break;case"plugin":i.cnt(e,t)}}}nr.Mst.Xet.Zet=or}{const ar=self.Os,ur=(ar.Mst.Xet,new Map),lr=(t,s,i,e,h,n=!1,r=null,o=null)=>{ur.set(t,{gnt:s,ynt:i,Mnt:e,round:h,wnt:n,init:r,reset:o})};lr("offsetX",(t,s,i,e)=>{"relative"===e.Pet.YX()?t.Snt(s,i.wst().Y$()):t.Snt(s)},(t,s)=>t.ZS(s),t=>t.qS(),!0),lr("offsetY",(t,s,i,e)=>{"relative"===e.Pet.YX()?t.Tnt(s,i.wst().Y$()):t.Tnt(s)},(t,s)=>t.$S(s),t=>t.KS(),!0),lr("offsetWidth",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.Pet.YX(),u=1===i.bnt.Qx();if((h||u)&&s.f5()&&s.w5()){if(isNaN(i.xnt)){let e=[],t=s.$j();for(;t;)e.push(t),t=t.$j();e.reverse();let a=(t,s)=>s.wst().Jtt(t.xB()),h=(t,s)=>{const i=a(t,s);if(i)return i.Vst();const e=t.xB().Y5();return e.Yst()?e.Vst():t.Cnt().vnt()},n=(t,s,i,e=0)=>{const h=a(t,s);if(!h)return e;const n=h._B(i);if(!n)return e;const r=n.Pit()._it();if(!r)return e;const o=r.Vht();return o?o.qit():e},r;if(u){let t=e[e.length-1];r=t.Yp()}else{let s=e[0],t=s.Cnt().vnt(),i=s.Cnt().Int();r=t*i,r=(r+=n(s,o,"offsetWidth"))+h(s,o)*n(s,o,"offsetScaleX");for(let t=1;t<e.length;t++){const l=(s=e[t]).Cnt().Int();r=(r=(r*=l)+n(s,o,"offsetWidth"))+h(s,o)*n(s,o,"offsetScaleX")}}i.xnt=0===r?Number.EPSILON:r}e||s.Nm(t/i.xnt,!0)}else s.Nm(t)}},(t,s)=>t.tm(s),t=>t.Yp(),!0),lr("offsetHeight",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.Pet.YX(),a=1===i.bnt.Qx();if((h||a)&&s.f5()&&s.T5()){if(isNaN(i.xnt)){let e=[],t=s.$j();for(;t;)e.push(t),t=t.$j();e.reverse();let h=(t,s)=>{e=t;const i=s.wst().Jtt(e.xB());var e;if(i)return i.qst();const h=t.xB().Y5();return h.Yst()?h.qst():t.Cnt().Gnt()},n=(t,s,i,e=0)=>{const h=s.wst().Jtt(t.xB());if(!h)return e;const n=h._B(i);if(!n)return e;const r=n.Pit()._it();if(!r)return e;const o=r.Vht();return o?o.qit():e},r;if(a){let t=e[e.length-1];r=t.nm()}else{let s=e[0],t=s.Cnt().Gnt(),i=s.Cnt().Ent();r=t*i,r=(r+=n(s,o,"offsetHeight"))+h(s,o)*n(s,o,"offsetScaleY");for(let t=1;t<e.length;t++){const u=(s=e[t]).Cnt().Ent();r=(r=(r*=u)+n(s,o))+h(s,o)*n(s,o,"offsetScaleY")}}i.xnt=0===r?Number.EPSILON:r}e||s._nt(t/i.xnt,!0)}else s._nt(t)}},(t,s)=>t.Hp(s),t=>t.nm(),!0),lr("offsetAngle",(t,s,i,e,h)=>{t.Nnt(s)},(t,s)=>t.PP(s),t=>t.kP(),!1,!0),lr("offsetOpacity",(t,s,i,e,h)=>{const n=e.Dnt||1,r=(s/=n,t.lN()),o=r+s;if(0===e.Ant)1<o?e.Ant+=o-1:o<0&&(e.Ant+=o),t.Lnt(s);else{const a=t.lN()+s;0<s&&0<e.Ant?1<a&&(e.Ant+=a-1):0<s&&e.Ant<0?(e.Ant+=s,0<e.Ant&&(t.Lnt(e.Ant),e.Ant=0)):s<0&&0<e.Ant?(e.Ant+=s,e.Ant<0&&(t.Lnt(e.Ant),e.Ant=0)):s<0&&e.Ant<0&&a<0&&(e.Ant+=a)}},(t,s)=>{t.fN(s)},t=>t.lN(),!1,!0,(n,h,r)=>{switch(n.Ant=0,n.Pet.YX()){case"relative":{n.Pet.yst();let t=n.Pet.Pit(),s=t._it(),i=s.Eit(),e=n.t4().lN(),h=e;for(const o of i){const a=o.jD(),u=n.Pet.xet(a);h=e+u,h=ar.rn(h,0,1)}n.Ont=e-h,n.Ont=Math.round(100*(n.Ont+Number.EPSILON))/100,h=e;for(let t=i.length-1;0<=t;t--){const l=i[t].jD(),c=n.Pet.xet(l);h-=c,h=ar.rn(h,0,1)}n.Rnt=h,n.Rnt=Math.round(100*(n.Rnt+Number.EPSILON))/100;break}}const t="relative"===n.Pet.YX(),s=1===n.bnt.Qx();if((t||s)&&h.f5()&&h.G5()){let s=[],t=h.$j();for(;t;)s.push(t),t=t.$j();s.reverse();let i=(t,s,i)=>{const e=s.wst().Jtt(t.xB());if(!e)return 0;const h=e._B(i);if(!h)return 0;const n=h.Pit()._it();if(!n)return 0;const r=n.Vht();return r?r.qit():0},e=s[0].Cnt().Pnt();e+=i(s[0],r,"offsetOpacity");for(let t=1;t<s.length;t++)e+=i(s[t],r,"offsetOpacity");n.Dnt=0===e?1:e}},i=>{switch(i.Pet.YX()){case"relative":{i.Ant=0;let t=i.t4(),s=t.lN();s=Math.round(100*(s+Number.EPSILON))/100,i.Pet.wst().Z$()?(t.fN(s+i.Ont),i.Rv=0):(t.fN(s-i.Rnt),i.Rv=i.k$().Ret());break}}}),lr("offsetOriginX",(t,s)=>t.knt(s),(t,s)=>t.Fnt(s),t=>t.Pz(),!1),lr("offsetOriginY",(t,s)=>t.jnt(s),(t,s)=>t.znt(s),t=>t.Fz(),!1),lr("offsetZElevation",(t,s)=>t.Bnt(s),(t,s)=>t.sT(s),t=>t.tT(),!0),lr("offsetScaleX",(t,s,i,e)=>{if(0!==s){const h=t.Yp()<0?-1:1;if("relative"===e.Pet.YX()&&t.f5()&&t.w5()){const n=i.Vst()*h*s;isNaN(e.xnt)&&ur.get("offsetWidth").gnt(t,1,i,e,!0),t.Nm(n/e.xnt,!0)}else t.Nm(i.Vst()*h*s)}},(t,s,i)=>{t.tm(i.Vst()*s)},(e,h)=>{const n=e.Yp()<0?-1:1;if(e.w5()){let t=e.$j(),s=h.wst().Jtt(t.xB()),i=NaN;if(s)i=t.Yp()/s.Vst();else{const r=t.xB().Y5();i=r.Yst()?t.Yp()/r.Vst():1}return e.Yp()*n/(h.Vst()*i)}return e.Yp()*n/h.Vst()},!1),lr("offsetScaleY",(t,s,i,e)=>{if(0!==s){const h=t.nm()<0?-1:1;if("relative"===e.Pet.YX()&&t.f5()&&t.T5()){const n=i.qst()*h*s;isNaN(e.xnt)&&ur.get("offsetHeight").gnt(t,1,i,e,!0),t._nt(n/e.xnt,!0)}else t._nt(i.qst()*h*s)}},(t,s,i)=>{t.Hp(i.qst()*s)},(e,h)=>{const n=e.nm()<0?-1:1;if(e.T5()){let t=e.$j(),s=h.wst().Jtt(t.xB()),i=NaN;if(s)i=t.nm()/s.qst();else{const r=t.xB().Y5();i=r.Yst()?t.nm()/r.qst():1}return e.nm()*n/(h.qst()*i)}return e.nm()*n/h.qst()},!1);class cr extends ar.Mst.Xet{constructor(t){super(t),this.Rv=0,this.Ant=0,this.Ont=0,this.Rnt=0,this.Dnt=NaN,this.xnt=NaN,this.Unt=void 0,this.Wnt=void 0,this.Qnt=null,this.Jnt=null,this.Vnt=null,this.Ynt=null,this.Hnt=null,this.qnt=null,this.Znt=null,this.Xnt=null,this.Knt=!1,this.$nt=!1,ar.He(this.Pet.wst(),ar.trt)?this.bnt=new ar.Mst.Xet.srt(this):this.bnt=new ar.Mst.Xet.irt(this);const s=this.Pet.Qtt();switch(this.Pet.Est()){case"world-instance":{const i=ur.get(s);this.Qnt=i.Mnt,this.Jnt=i.gnt,this.Vnt=i.ynt,this.Knt=i.round,this.$nt=i.wnt,this.Hnt=i.init,this.Ynt=i.reset;break}case"audio":this.qnt=t.Lht,this.Znt=t.Oht,this.Xnt=t.Rht,this.Knt=!!t.Pht(),this.$nt=!1}}$h(){this.bnt=null,this.Qnt=null,this.Jnt=null,this.Vnt=null,this.Ynt=null,this.Hnt=null,this.qnt=null,this.Znt=null,this.Xnt=null,super.$h()}bet(){return this.bnt.bet()}ert(){return this.Rv}hrt(t){this.Rv=t}wtt(){this.Ynt&&this.Ynt(this)}hX(){const t=this.bnt.hX();if("number"==typeof t&&(this.Rv=t),this.Hnt){const s=this.t4(),i=this.Pet.Rit();this.Hnt(this,s,i)}}Itt(){const t=this.bnt.Itt();"number"==typeof t&&(this.Rv=t)}wet(){return this.Wht()}pit(){const t=this.Qht();return t!==this.wet()}mit(){return!ar.fe(this.jht)&&this.jht!==this.wet()}Bet(){this.bnt.Bet()}Yet(t,s,i,e,h,n,r,o){return this.bnt.Yet(t,s,i,e,h,n,r,o)}Het(){this.bnt.Het()}Wht(){const t=this.$ht(),s=this.Kht(),i=this.t4(),e=this.Pet.Rit(),h=this.Pet.Est();switch(h){case"behavior":return t.nnt(s);case"effect":return t[s];case"instance-variable":return t.pnt(s);case"plugin":return t.nnt(s);case"world-instance":return this.Qnt(i,e);case"audio":return this.qnt.call(this.k$(),i,e)}}lnt(t,s,i){const e=this.$ht(),h=this.Kht(),n=this.t4(),r=this.Pet.Rit(),o=this.Pet.Est();switch(o){case"behavior":e.nrt(h,t);break;case"effect":e[h]+=t;break;case"instance-variable":e.rrt(h,t);break;case"plugin":e.nrt(h,t,this.k$().aht());break;case"world-instance":this.Jnt(n,t,r,this);break;case"audio":this.Znt.call(this.k$(),n,t,r,this)}}ort(t,s,i){let e=this.Pet.W$();if("discrete"!==(e="default"===e?"continuous":e)||s){if("discrete"===e&&i){const u=this.Pet.wst(),l=u.jD(),c=this.Pet.cet(l);if(!c)return}const h=this.$ht(),n=this.Kht(),r=this.t4(),o=this.Pet.Rit(),a=this.Pet.Est();switch(a){case"behavior":h.cnt(n,t);break;case"effect":h[n]=t;break;case"instance-variable":h.mnt(n,t);break;case"plugin":h.cnt(n,t,this.k$().aht());break;case"world-instance":this.Vnt(r,t,o);break;case"audio":this.Xnt.call(this.k$(),r,t,o)}}}art(t,s,i,e,h,n,r,o){this.bnt.art(t,s,i,e,h,n,r,o)}urt(t,s,i,e,h){let n=(t="angle"===this.Pet.$it()?ar.ln(t):t).toString(),r=n.split(".")[1]||"",o=r.length,a=this.Wht(),u;switch(u=0===o?this.Knt?Math.round(a):this.$nt?"angle"===this.Pet.$it()?ar.un(Math.round(ar.ln(a))):Number(ar.toFixed(a,2)):a:this.Knt?Number(ar.toFixed(a,o)):(this.$nt,a),this.lnt(u-a,s,i),this.Pet.Qtt()){case"offsetWidth":case"offsetScaleX":{const l=this.t4(),c=l.Yp(),f=Number(ar.toFixed(c,2));l.Nm(f-c);break}case"offsetHeight":case"offsetScaleY":{const d=this.t4(),p=d.nm(),m=Number(ar.toFixed(p,2));d._nt(m-p);break}}}VH(){return Object.assign(super.VH(),{v:this.Rv,a:this.Ant,fod:this.Ont,bod:this.Rnt,of:this.Dnt,sf:this.xnt,armorf:this.Unt,armandf:this.Wnt})}YH(t){t&&(super.YH(t),this.Rv=t.v,this.Ant=t.a,this.Ont=ar.ae(t.fod)?t.fod:0,this.Rnt=ar.ae(t.bod)?t.bod:0,this.Dnt=ar.ae(t.of)?t.of:NaN,this.xnt=ar.ae(t.sf)?t.sf:NaN,this.Unt=ar.ae(t.armorf)?t.armorf:void 0,this.Wnt=ar.ae(t.armandf)?t.armandf:void 0)}}ar.Mst.Xet.Ket=cr}{const fr=self.Os;class dr{constructor(t){this.lrt=!1,this.lht=0,this.crt=!1,this.frt=!1,this.fst=t;for(let t=0,s=this.fst.length;t<s;t++)this.fst[t].Lit(this)}Wtt(){return this.fst}drt(){this.lrt=!0}prt(){return this.lrt}Oet(t){this.lht=t}qit(){return this.lht}mrt(t){this.crt=t}grt(){return this.crt}Ntt(t){this.frt=t}yrt(){return this.frt}Xf(){this.lrt=!1,this.lht=0,this.crt=!1,this.frt=!1}}class pr{constructor(t){this.Mrt=t}$h(){this.Mrt=null}Qx(){return 0}hX(){const t=this.Mrt;return this.Mrt._B(),t.qht(()=>t.Jht(()=>0,()=>t.k$().Ret()),()=>{})}Itt(){}bet(){this.Mrt;const t=this.Mrt._B();switch(t.YX()){case"relative":return!1;case"absolute":return!0}}Bet(){this.Mrt;const t=this.Mrt._B(),s=t.Qtt();switch(t.YX()){case"relative":break;case"absolute":if(t.Ait()){const i=t.Oit();i.Xf()}else{const e=t.wst(),h=t.xB(),n=t.k$(),r=e.P$(h,n,s,t);r&&1<r.length&&new dr(r)}}}Yet(t,s,i,e,h,n,r,o){const a=this.Mrt,u=this.Mrt._B();switch(u.YX()){case"relative":{const l=a.ert();a.lnt(s-l,i,e),n&&this.art(t,i,e,h,l,s),a.hrt(s);break}case"absolute":{const c=u.wst(),f=u.Rit();if(u.xB(),u.k$(),u.Ait()){const d=u.Oit(),p=d.Wtt(),m=a.snt(p,!0),g=a.int(c,c.jD(),m);if(g){const y=f.Att(),M=g.time-y;if(0==M)d.Ntt(r),d.mrt(o),d.drt(),d.Oet(d.qit()+s);else{if(M<0)return;const w=u.xet(M);d.Ntt(r),d.mrt(o),d.drt(),d.Oet(d.qit()+(s-w))}}}else a.ort(s,o,r);break}}}Het(){const t=this.Mrt,s=this.Mrt._B();switch(s.YX()){case"relative":break;case"absolute":if(s.Ait()){const i=s.Oit();i.prt()&&t.ort(i.qit(),i.grt(),i.yrt())}}}art(t,s,i,e,h,n){const r=this.Mrt;e||(s&&t===s.jD()?r.urt(s.tK(),s,i):i&&t===i.jD()?r.urt(i.tK(),s,i):n-h==0&&r.urt(s.tK(),s,i))}}fr.Mst.Xet.irt=pr}{const mr=self.Os;class gr{constructor(t){this.Mrt=t}$h(){this.Mrt=null}Qx(){return 1}hX(){const t=this.Mrt;return t.Bht(!0),this.Xht(t.Qht())}Itt(){const t=this.Mrt;if(t.Qht()!==t.Hht())return t.Bht(!0),this.Xht(t.Hht())}bet(){return!1}Bet(){}Yet(t,s,i,e,h,n,r,o){const a=this.Mrt,u=a.ert();switch(a._B().YX()){case"relative":a.lnt(s-u,i,e),n&&this.art(t,i,e,h,u,s,!1,r);break;case"absolute":a.Uht()?(a.Bht(!1),a.lnt(u,i,e)):0===t&&0===a._B().wst().oB()?a.ort(s,!0,!1):(a.lnt(s-u,i,e),n&&this.art(t,i,e,h,u,s,this.wrt(),r))}a.hrt(s)}Het(){}Xht(t){const s=this.Mrt;return t-s.wet()}wrt(){let t=this.Mrt,s=t.t4().xB(),i=t._B().b4(),e=i.R$(),h=0;for(const n of e.LZ())0===n.Qx()?n.FZ(s)&&h++:1===n.Qx()&&n.xB()===s&&h++;return h<=1}art(t,s,i,e,h,n,r,o){const a=this.Mrt;e?s&&t===s.jD()?a.urt(s.tK(),s,i,r,o):i&&t===i.jD()?a.urt(i.tK(),s,i,r,o):i||a.urt(s.tK(),s,i,r,o):s&&t===s.jD()?a.urt(s.tK(),s,i,r,o):i&&t===i.jD()?a.urt(i.tK(),s,i,r,o):n-h==0&&a.urt(s.tK(),s,i,r,o)}}mr.Mst.Xet.srt=gr}{const yr=self.Os,Mr=self.ic;yr.Mst.Uet=class{constructor(){}static dnt(t,s,i,e){let h;switch(e){case"behavior":h=s.nnt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.pnt(t);break;case"plugin":h=s.nnt(t)}return h!==i}static Nc(n,r,o,a){if(!o){let t=a.Pit(),s=a.yst();return(t=s.Vht(t)).tK()}let u=a.W$();if("default"===u&&(u="continuous"),"discrete"===(u="combo"===a.$it()?"discrete":u))return r.tK();if("continuous"===u||"step"===u){const l=a.wst().B$();if("step"===u&&0!==l){const g=1/l;n=Math.floor(n*g)/g}const c=r.tK(),f=o.tK(),d=r.KX("cubic-bezier"),p=o.KX("cubic-bezier"),m=d&&d.Srt()&&p&&p.Trt();if(!m&&c===f)return c;let t=r.jD(),s=o.jD(),i=("step"===u&&0!==l&&(n=yr.rn(n,t,s)),yr.normalize(n,t,s)),e=r.Let(),h;if(m){const y=s-t;h=Mr.wc(e)(y*i,0,1,y),h=Mr.wc("cubicbezier")(h,c,c+d.eK(),f+p.rK(),f)}else h=Mr.wc(e)((s-t)*i,c,f-c,s-t);return"integer"===a.$it()?Math.floor(h):h}}}}{const wr=self.Os;wr.Mst.Wet=class{constructor(){}static dnt(t,s,i,e){let h;switch(e){case"behavior":h=s.nnt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.pnt(t);break;case"plugin":h=s.nnt(t)}return h!==i}static Nc(t,s,i,e){if(!i){let t=e.Pit(),s=e.yst();return(t=s.Vht(t)).tK()}let h=e.W$();if("default"===h&&(h="continuous"),"discrete"===(h="combo"===e.$it()?"discrete":h))return s.tK();if("continuous"===h||"step"===h){const n=e.wst().B$();if("step"===h&&0!==n){const c=1/n;t=Math.floor(t*c)/c}const r=s.jD(),o=i.jD(),a=s.tK(),u=i.tK(),l=("step"===h&&0!==n&&(t=wr.rn(t,r,o)),s.KX("angle"));if(!l){if(a===u)return a;const f=wr.normalize(t,r,o),d=self.ic.wc(s.Let());return wr.Mn(a,u,d(f,0,1,1))}{const p=l.brt();if(a===u&&0===p)return a;const m=wr.normalize(t,r,o),g=self.ic.wc(s.Let()),y=g(m,0,1,1);switch(l.xrt()){case"closest":return wr.Mn(a,u,y,p);case"clockwise":return wr.wn(a,u,y,p);case"anti-clockwise":return wr.Sn(a,u,y,p)}}}}}}{const Sr=self.Os;Sr.Mst.Qet=class{constructor(){}static dnt(t,s,i,e){let h;switch(e){case"behavior":h=s.nnt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.pnt(t);break;case"plugin":h=s.nnt(t)}return!!h!=!!i}static Nc(t,s,i,e){if(i)return s.tK()?1:0;{let t=e.Pit(),s=e.yst();return(t=s.Vht(t)).tK()?1:0}}}}{const Tr=self.Os,br=[0,0,0],xr=[0,0,0],vr=[0,0,0];Tr.Mst.Jet=class{constructor(){}static dnt(t,s,i,e){let h;switch(e){case"behavior":h=s.nnt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.pnt(t);break;case"plugin":h=s.nnt(t)}return Array.isArray(i)?(br[0]=i[0],br[1]=i[1],br[2]=i[2]):(vr.Ma(i),br[0]=Math.floor(255*vr.Ho()),br[1]=Math.floor(255*vr.qo()),br[2]=Math.floor(255*vr.Zo())),Array.isArray(h)?(xr[0]=h[0],xr[1]=h[1],xr[2]=h[2]):(vr.Ma(h),xr[0]=Math.floor(255*vr.Ho()),xr[1]=Math.floor(255*vr.qo()),xr[2]=Math.floor(255*vr.Zo())),br[0]!==xr[0]||br[1]!==xr[1]||br[2]!==xr[2]}static Nc(t,s,i,e){if(!i){let t=e.Pit(),s=e.yst(),i=(t=s.Vht(t)).tK();return br[0]=i[0],br[1]=i[1],br[2]=i[2],br}let h=e.W$();if("discrete"===(h="default"===h?"continuous":h)){const n=s.tK();return br[0]=n[0],br[1]=n[1],br[2]=n[2],br}if("continuous"===h||"step"===h){const r=e.wst().B$();if("step"===h&&0!==r){const b=1/r;t=Math.floor(t*b)/b}const o=s.jD(),a=i.jD(),u=s.tK(),l=i.tK(),c=("step"===h&&0!==r&&(t=Tr.rn(t,o,a)),Tr.normalize(t,o,a)),f=s.Let(),d=u[0],p=u[1],m=u[2],g=l[0],y=l[1],M=l[2],w=self.ic.wc(f),S=a-o,T=S*c;return br[0]=d===g?d:w(T,d,g-d,S),br[1]=p===y?p:w(T,p,y-p,S),br[2]=m===M?m:w(T,m,M-m,S),br}}}}{const Cr=self.Os;Cr.Mst.Vet=class{constructor(){}static dnt(t,s,i,e){let h;switch(e){case"behavior":h=s.nnt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.pnt(t);break;case"plugin":h=s.nnt(t)}return h!==i}static Nc(t,s,i,e){if(i)return s.tK();{let t=e.Pit(),s=e.yst();return(t=s.Vht(t)).tK()}}}}{const Ir=self.Os;Ir.Bq=class{constructor(){this.vrt=new Map}$h(){for(const t of this.vrt.values())t.$h();this.vrt.clear(),this.vrt=null}$l(t){const s=new Ir.Crt(t),i=s.zc();this.vrt.set(i,s)}Ks(t){return this.vrt.get(t)}E$(){return 0}static Irt(t,s,i,e){if(s)for(const h of s)Ir.Bq.Grt("create",h,t,i,e)}static Ert(t,s,i,e){if(s)for(const h of s)Ir.Bq.Grt("create-including-disabled",h,t,i,e)}static _rt(i,t,s,e){i.length?t.forEach((t,s)=>{i[s].YH(t)}):t.forEach(t=>{Ir.Bq.Grt("load",t,i,s,e)})}static Grt(t,s,i,e,h){let n;if("function"==typeof e)switch(t){case"load":n=new e(null,h);break;case"create":case"create-including-disabled":n=new e(s,h)}else if("object"==typeof e){const r=e.prop,o=s[r],a=e.map.get(o);switch(t){case"load":n=new a(null,h);break;case"create":case"create-including-disabled":n=new a(s,h)}}switch(t){case"load":n.YH(s),i.push(n);break;case"create":if("function"==typeof n.Ust&&!n.Ust())return n.$h();i.push(n);break;case"create-including-disabled":i.push(n)}}}}{const Gr=self.Os;Gr.Crt=class{constructor(t){this.hn="",this._tt=NaN,this.Nrt=0,this.Drt="default",this.Art="default",this.Lrt=!1,this.Ort=!1,this.Rrt=1,this.$tt=null,this.Prt="",this.krt=!1,this.Frt=!0,t&&(this.hn=t[0],this._tt=t[1],this.Nrt=t[2],this.Drt=t[3],this.Art=t[4],this.Lrt=!!t[6],this.Ort=!!t[7],this.Rrt=t[8],this.Prt=t[9],this.krt=!!t[10],this.Frt=!!t[11],this.$tt=new Gr.jrt(t[5],this))}$h(){this.$tt.$h(),this.$tt=null}L$(){return this.$tt||(this.$tt=new Gr.jrt(null,this)),this.$tt}zc(){return this.hn}wW(t){this.hn=t}oB(){return this._tt}rB(t){this._tt=t}B$(){return this.Nrt}U$(t){this.Nrt=t}W$(){return this.Drt}Q$(t){this.Drt=t}YX(){return this.Art}J$(t){this.Art=t}uB(){return this.Lrt}aB(t){this.Lrt=t}cB(){return this.Ort}lB(t){this.Ort=t}Sz(){return this.Rrt}V$(t){this.Rrt=t}gX(){return this.Prt}Y$(){return this.krt}H$(){return this.Frt}VH(){return{trackDataJson:this.$tt.VH(),name:this.hn,totalTime:this._tt,step:this.Nrt,interpolationMode:this.Drt,resultMode:this.Art,loop:this.Lrt,pingPong:this.Ort,repeatCount:this.Rrt,startOnLayout:this.Prt,transformWithSceneGraph:!!this.krt,useSystemTimescale:this.Frt}}YH(t){t&&(this.L$().YH(t.trackDataJson),this.hn=t.name,this._tt=t.totalTime,this.Nrt=t.step,this.Drt=t.interpolationMode,this.Art=t.resultMode,this.Lrt=t.loop,this.Ort=t.pingPong,this.Rrt=t.repeatCount,this.Prt=t.startOnLayout,this.krt=!!t.transformWithSceneGraph,this.Frt=!!t.useSystemTimescale)}}}{const Er=self.Os;class _r{constructor(t,s){this.$tt=s,this.zrt=null,this.Brt=null,this.tst=NaN,this.sst=NaN,this.Drt="default",this.Art="default",this.Il=!1,this.Urt=null,this.Cit=null,this.Zc="",this.Wrt=null,this.Qrt=0,this.Jrt=this.$tt.z$().oB(),this.ef=0,this.hn="",t&&(t[0]&&(this.zrt=t[0],this.tst=t[0][2],this.sst=t[0][1]),this.Drt=t[1],this.Art=t[2],this.Il=!!t[3],t[6]&&(this.Zc=t[6]),t[7]&&(this.Wrt=t[7],this.Qrt=t[7][0],this.Jrt=t[7][1]),t[8]&&(this.Brt=t[8]),t[8]&&(this.Brt=t[8]),t[9]&&(this.ef=t[9]),t[10]&&(this.hn=t[10]),this.Urt=new Er.Vrt(t[4],this),this.Cit=new Er.Yrt(t[5],this))}$h(){this.zrt=null,this.$tt=null,this.Urt&&(this.Urt.$h(),this.Urt=null),this.Cit&&(this.Cit.$h(),this.Cit=null),this.Wrt=null}L$(){return this.$tt}cst(){return this.Urt||(this.Urt=new Er.Vrt(null,this)),this.Urt}yst(){return this.Cit||(this.Cit=new Er.Yrt(null,this)),this.Cit}Hrt(){return this.zrt}xst(){return this.sst}Qst(t){this.sst=t}bst(){return this.tst}jst(t){this.tst=t}W$(){return this.Drt}Q$(t){this.Drt=t}YX(){return this.Art}J$(t){this.Art=t}Ust(){return this.Il}Wst(t){this.Il=!!t}GB(){return this.Zc}Att(){return this.Qrt}zst(){return this.Jrt}Bst(t){this.Jrt=t}Vst(){return this.Brt[0]}Jst(t){this.Brt||(this.Brt=[]),this.Brt[0]=t}qst(){return this.Brt||(this.Brt=[]),this.Brt[1]}Hst(t){this.Brt||(this.Brt=[]),this.Brt[1]=t}Qx(){return this.ef}zc(){return this.hn}VH(){return{keyframeDataJson:this.Urt.VH(),propertyTrackDataJson:this.Cit.VH(),instanceData:this.zrt,additionalInstanceData:this.Brt,instanceUid:this.tst,objectClassIndex:this.sst,interpolationMode:this.Drt,resultMode:this.Art,enabled:this.Il,id:this.Zc,nestedData:this.Wrt,type:this.ef,name:this.hn}}YH(t){t&&(this.zrt=t.instanceData,this.tst=t.instanceUid,this.sst=t.objectClassIndex,this.Drt=t.interpolationMode,this.Art=t.resultMode,this.Il=t.enabled,this.Zc=t.id,this.ef=t.type||0,this.hn=t.name||"",this.Jrt=this.$tt.z$().oB(),t.nestedData&&(this.Wrt=t.nestedData,this.Qrt=this.Wrt[0],this.Jrt=this.Wrt[1]),t.additionalInstanceData&&(this.Brt=t.additionalInstanceData),this.cst().YH(t.keyframeDataJson),this.yst().YH(t.propertyTrackDataJson))}}Er.jrt=class{constructor(t,s){this.KK=s,this.qrt=[],Er.Bq.Irt(this.qrt,t,_r,this)}$h(){this.KK=null;for(const t of this.qrt)t.$h();Er.Nr(this.qrt),this.qrt=null}z$(){return this.KK}Rtt(){const t=new _r(null,this);return this.qrt.push(t),t}Zrt(t){return t.cst().lst()[0]}Xrt(t){const s=t.cst().lst();return s.at(-1)}nit(s,t){const i=t.cst().lst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.jD()===s)return h}}Krt(s,t){const i=t.cst().lst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.jD()>s)return h}}$rt(s,t){const i=t.cst().lst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.jD()>=s)return h}}hit(s,t){const i=t.cst().lst();for(let t=i.length-1;0<=t;t--){const e=i[t];if(e.jD()<=s)return e}}*A$(){for(const t of this.qrt)yield t}VH(){return{trackDataItemsJson:this.qrt.map(t=>t.VH())}}YH(t){t&&Er.Bq._rt(this.qrt,t.trackDataItemsJson,_r,this)}}}{const Nr=self.Os;class Dr{constructor(t,s){this.Cit=s,this.tot="",this.sot=null,this.kht=null,this.ef=null,this.iot=NaN,this.eot=NaN,this.Drt="default",this.Art="default",this.Il=!1,this.hot=null,this.not=!0,t&&(this.tot=t[0][0],this.sot=t[0].slice(1),this.kht=t[1],this.ef=t[2],this.iot=t[3],this.eot=t[4],this.Drt=t[5],this.Art=t[6],this.Il=!!t[7],this.hot=new Nr.rot(t[8],this),this.not=t[9])}$h(){this.hot.$h(),this.hot=null,this.Cit=null,this.sot=null}yst(){return this.Cit}_it(){return this.hot||(this.hot=new Nr.rot(null,this)),this.hot}Est(){return this.tot}Qit(t){this.tot=t}Vit(){return this.sot}Hit(t){this.sot=t}Zit(){return this.kht}Kit(t){this.kht=t}Qx(){return this.ef}iet(t){this.ef=t}net(){return this.iot}ret(t){this.iot=t}oet(){return this.eot}aet(t){this.eot=t}W$(){return this.Drt}Q$(t){this.Drt=t}YX(){return this.Art}J$(t){this.Art=t}Ust(){return this.Il}Wst(t){this.Il=!!t}let(){return!!this.not}VH(){return{propertyKeyframeDataJson:this.hot.VH(),sourceAdapterId:this.tot,sourceAdapterArguments:this.sot,property:this.kht,type:this.ef,min:this.iot,max:this.eot,interpolationMode:this.Drt,resultMode:this.Art,enabled:this.Il,canHavePropertyKeyframes:this.not}}YH(t){t&&(this.tot=t.sourceAdapterId,this.sot=t.sourceAdapterArguments,this.kht=t.property,this.ef=t.type,this.iot=t.min,this.eot=t.max,this.Drt=t.interpolationMode,this.Art=t.resultMode,this.Il=t.enabled,this.not=t.canHavePropertyKeyframes,this._it().YH(t.propertyKeyframeDataJson))}}Nr.Yrt=class{constructor(t,s){this.Ktt=s,this.oot=[],Nr.Bq.Irt(this.oot,t,Dr,this)}$h(){this.Ktt=null;for(const t of this.oot)t.$h();Nr.Nr(this.oot),this.oot=null}Fst(){return this.Ktt}uit(){const t=new Dr(null,this);return this.oot.push(t),t}het(t){const s=t._it();return s.Eit()[0]}Vht(t){const s=t._it(),i=s.Eit();return i.at(-1)}cet(s,t){const i=t._it(),e=i.Eit(),h=e.length;for(let t=0;t<h;t++){const n=e[t];if(n.jD()===s)return n}}pet(s,t){const i=t._it(),e=i.Eit(),h=e.length;for(let t=0;t<h;t++){const n=e[t];if(n.jD()>s)return n}}met(s,t){const i=t._it(),e=i.Eit(),h=e.length;for(let t=0;t<h;t++){const n=e[t];if(n.jD()>=s)return n}}fet(s,t){const i=t._it(),e=i.Eit();for(let t=e.length-1;0<=t;t--){const h=e[t];if(h.jD()<=s)return h}}*gst(){for(const t of this.oot)yield t}VH(){return{propertyTrackDataItemsJson:this.oot.map(t=>t.VH())}}YH(t){t&&Nr.Bq._rt(this.oot,t.propertyTrackDataItemsJson,Dr,this)}}}{const Ar=self.Os;class Lr{constructor(t,s){if(this.Urt=s,this.RA=-1,this.aot="noease",this.uot=!1,this.x$=null,this.lot=null,t){this.RA=t[0],this.aot=t[1],this.uot=!!t[2];const i=t[3];this.x$=i?i.split(" "):[],this.lot=new Set(this.x$.map(t=>t.toLowerCase())),this.cot=null}}$h(){this.Urt=null,Ar.Nr(this.x$),this.x$=null,this.lot.clear(),this.lot=null,this.cot=null}cst(){return this.Urt}jX(){return this.cot}fot(t){this.cot=t}jD(){return this.RA}nB(t){this.RA=t,this.Urt.dot()}Let(){return this.aot}bB(t){this.aot=t}Ust(){return this.uot}Wst(t){this.uot=!!t}pB(){return this.x$}X$(t){this.x$=t?t.split(" "):[],this.lot=new Set(this.x$.map(t=>t.toLowerCase()))}pot(){return this.lot}Htt(t){return this.lot.has(t.toLowerCase())}VH(){return{time:this.RA,ease:this.aot,enable:this.uot,tags:this.x$}}YH(t){t&&(this.RA=t.time,this.aot=t.ease,this.uot=t.enable,this.x$=t.tags,this.lot=new Set(this.x$.map(t=>t.toLowerCase())))}}Ar.Vrt=class{constructor(t,s){this.Ktt=s,this.ust=[],Ar.Bq.Irt(this.ust,t,Lr,this),this.dot()}$h(){this.Ktt=null;for(const t of this.ust)t.$h();Ar.Nr(this.ust),this.ust=null}dot(){this.ust.sort((t,s)=>t.jD()-s.jD());for(let t=0;t<this.ust.length;t++){const s=this.ust[t];s.fot(this.ust[t+1])}}Fst(){return this.Ktt}mot(){return this.ust.length}lst(){return this.ust}oit(){const t=new Lr(null,this);return this.ust.push(t),this.dot(),t}cit(t){for(const s of this.ust)if(t(s)){const i=this.ust.indexOf(s);-1!==i&&(s.$h(),this.ust.splice(i,1))}this.got(),this.dot()}got(){this.ust.sort((t,s)=>t.jD()-s.jD())}Tit(t){return this.ust.indexOf(t)}bit(t){return this.ust[t]}*yot(){for(const t of this.ust)yield t}*Mot(){for(let t=this.ust.length-1;0<=t;t--)yield this.ust[t]}VH(){return{keyframeDataItemsJson:this.ust.map(t=>t.VH())}}YH(t){t&&(Ar.Bq._rt(this.ust,t.keyframeDataItemsJson,Lr,this),this.dot())}}}{const Or=self.Os;class Rr{constructor(t,s){this.hot=s,this.lht=null,this.wot=null,this.ef="",this.RA=NaN,this.aot="noease",this.uot=!1,this.Sot=null,this.Tot=void 0,this.bot="line",t&&(this.lht=t[0][0],this.wot=t[0][1],this.ef=t[0][2],this.RA=t[1],this.aot=t[2],this.uot=!!t[3],this.bot=t[5],this.Sot=null,t[4]&&(this.Sot=new Or.xot(t[4],this)),this.cot=null,this.vot=null)}$h(){this.hot=null,this.Sot&&(this.Sot.$h(),this.Sot=null),this.cot=null,this.vot=null}Cot(){return this.Sot}fot(t){this.cot=t}jX(){return this.cot}Iot(t){this.vot=t}zX(){return this.vot}qit(){return this.lht}Oet(t){"color"===this.ef&&Or.ae(t)?(this.lht[0]=Or.Pn(t),this.lht[1]=Or.kn(t),this.lht[2]=Or.Fn(t)):this.lht=t}Yht(){return this.wot}Net(t){"color"===this.ef&&Or.ae(t)?(this.wot[0]=Or.Pn(t),this.wot[1]=Or.kn(t),this.wot[2]=Or.Fn(t)):this.wot=t}tK(){const t=this.hot.Pit().YX();return"relative"===t?this.qit():"absolute"===t?this.Yht():void 0}Qx(){return this.ef}iet(t){this.ef=t}jD(){return this.RA}nB(t){this.RA=t,this.hot.Got()}Let(){return this.aot}bB(t){this.aot=t}Ust(){return this.uot}Wst(t){this.uot=!!t}BX(){return this.bot}KX(s){if(this.Sot){if(!this.Tot&&null!==this.Tot){const i=this.Sot.Eot();if(i){const e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.GB()===s)return this.Tot=h,this.Tot}}this.Tot=null}return this.Tot}}VH(){const t=this.Sot;return{addonDataJson:t&&t.VH(),value:this.lht,aValue:this.wot,type:this.ef,time:this.RA,ease:this.aot,enable:this.uot}}YH(t){t&&(t.addonDataJson&&this.Sot._SetFromJson(t.addonDataJson),this.lht=t.value,this.wot=t.aValue,this.ef=t.type,this.RA=t.time,this.aot=t.ease,this.uot=t.enable)}}Or.rot=class{constructor(t,s){this.vit=s,this.Git=[],this._ot=[],Or.Bq.Irt(this.Git,t,Rr,this),Or.Bq.Ert(this._ot,t,Rr,this),this.Got()}$h(){this.vit=null;for(const t of this.Git)t.$h();Or.Nr(this.Git),this.Git=null;for(const s of this._ot)s.$h();Or.Nr(this._ot),this._ot=null}Got(){let s=this.Git;s.sort((t,s)=>t.jD()-s.jD());for(let t=0;t<s.length;t++){const i=s[t];t+1<s.length&&i.fot(s[t+1]),0<=t-1&&i.Iot(s[t-1])}(s=this._ot).sort((t,s)=>t.jD()-s.jD());for(let t=0;t<s.length;t++){const e=s[t];t+1<s.length&&e.fot(s[t+1]),0<=t-1&&e.Iot(s[t-1])}}Eet(){const t=new Rr(null,this);return this.Git.push(t),this.Got(),t}_et(t){for(const s of this.Git)if(t(s)){const i=this.Git.indexOf(s);-1!==i&&(s.$h(),this.Git.splice(i,1))}this.Not(),this.Got()}Not(){this.Git.sort((t,s)=>t.jD()-s.jD())}Pit(){return this.vit}Dot(){return this.Git.length}Vht(){return this.Git[this.Git.length-1]}Eit(){return this.Git}FX(){return this._ot}*Aot(){for(const t of this.Git)yield t}*Lot(){for(let t=this.Git.length-1;0<=t;t--)yield this.Git[t]}VH(){const t=this.Git,s=this._ot;return{propertyKeyframeDataItemsJson:t.map(t=>t.VH()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.VH())}}YH(t){t&&(Or.Bq._rt(this.Git,t.propertyKeyframeDataItemsJson,Rr,this),Or.Bq._rt(this._ot,t.propertyKeyframeDataItemsIncludingDisabledJson,Rr,this),this.Got())}}}{const Pr=self.Os;class kr{constructor(t,s){this.Sot=s,this.Zc=t[0],this.Oot=t[1]}$h(){this.Sot=null,this.Oot=null}Cot(){return this.Sot}GB(){return this.Zc}VH(){return{id:this.Zc,data:this.Oot}}YH(t){t&&(this.Zc=t.id,this.Oot=t.data)}}class Fr extends kr{constructor(t,s){super(t,s),this.Rot=this.Oot[0],this.Pot=!!this.Oot[1],this.kot=this.Oot[2],this.Fot=!!this.Oot[3]}$h(){super.$h()}eK(){return this.Rot}Srt(){return this.Pot}rK(){return this.kot}Trt(){return this.Fot}VH(){return Object.assign(super.VH(),{startAnchor:this.Rot,startEnable:!!this.Pot,endAnchor:this.kot,endEnable:!!this.Fot})}YH(t){t&&(super.YH(t),this.Rot=t.startAnchor,this.Pot=!!t.startEnable,this.kot=t.endAnchor,this.Fot=!!t.endEnable)}}class jr extends kr{constructor(t,s){super(t,s),this.jot=this.Oot[0],this.zot=this.Oot[1]}$h(){super.$h()}xrt(){return this.jot}brt(){return this.zot}VH(){return Object.assign(super.VH(),{direction:this.jot,revolutions:this.zot})}YH(t){t&&(super.YH(t),this.jot=t.direction,this.zot=t.revolutions)}}Pr.xot=class{constructor(t,s){this.Bot=s,this.Uot=[],Pr.Bq.Irt(this.Uot,t,{prop:0,map:new Map([["cubic-bezier",Fr],["angle",jr]])},this)}$h(){this.Bot=null;for(const t of this.Uot)t.$h();Pr.Nr(this.Uot),this.Uot=null}Wot(){return this.Bot}Eot(){return this.Uot}*Qot(){for(const t of this.Uot)yield t}VH(){return{addonDataItemsJson:this.Uot.map(t=>t.VH())}}YH(t){t&&Pr.Bq._rt(this.Uot,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",Fr],["angle",jr]])},this)}}}{let m=self.Os,i=0;m.trt=class extends m.SZ{constructor(t,s){super("tween-"+i++,t,s),this.Zc="",this.Jot=!1,this.Vot="start-value",this.ist=null,this.Yot=null,this.Hot=null,this.xit=null,this.qot=null}N$(t){const s=m.Kh(m.Event,"tweenstatereleased");s.Zot=this,t.dispatchEvent(s)}Qx(){return 1}e$(){for(const t of this.KK.L$().A$())this.$K.push(m.Xot.Ob(this,t));this.xit=this.$K[0]}Ott(){const t=this.KK.L$().Rtt(),s=m.Xot.Ob(this,t);return this.$K.push(s),this.Kot(),s}Kot(){this.xit=this.$K[0]}_B(t){return this.xit.Wtt()[0]}tet(t){this.$ot=t}xB(){const t=this.RX();if(t&&t.length){const s=t[0];if(this.xit=s){const i=s.xB();return s.Tst()?i:void 0}}}tat(t){this.Hot||(this.Hot=[]),this.Hot.push(t)}sat(t){this.Yot||(this.Yot=[]),this.Yot.push(t)}iat(t){if(this.Hot){const s=this.Hot.indexOf(t);-1!==s&&this.Hot.splice(s,1)}}eat(t){if(this.Yot){const s=this.Yot.indexOf(t);-1!==s&&this.Yot.splice(s,1)}}hat(t,s){for(const i of this.$K)for(const e of i.fst)if(e.Qtt()===s){const h=e.yst(),n=e.Pit(),r=h.het(n);r.Oet(t),r.Net(t)}}nat(t){for(const s of this.$K)for(const i of s.fst)if(i.Qtt()===t)return i}rat(t){for(const s of t){const i=this.nat(s);this.hat(i.wet(),s)}if(this.Z$()){const e=this.oB()-this.jD();this.rB(e);for(const h of this.$K)h.Bst(e);this.ftt(0)}else{const n=this.jD();this.rB(n);for(const r of this.$K)r.Bst(n);this.ftt(n)}this.dtt()}oat(t,s){const i=this.nat(s),e=i.yst(),h=i.Pit(),n=e.Vht(h);n.nB(this.oB()),n.Oet(t),n.Net(t)}aat(t){this.Zc=t}GB(){return this.Zc}uat(t){this.Vot=t}lat(){return this.Vot}IB(t){this.Jot=t}CB(){return this.Jot}stt(){if(this.Hot)for(const t of this.Hot)t(this);if(!this.fX())for(const s of this.$K)s.mit()}itt(){this.y$=this.Hc.ett()}pX(){if(!this.S$&&(this.S$=!0,this.Yot))for(const t of this.Yot)t(this)}nB(t){this.cat(),super.nB(t)}Mtt(t){(t=m.ae(t)?t:this.oB())<0?this.r$=0:t>=this.oB()?this.r$=this.oB():this.r$=t,this.xit.wtt()}hX(t){if(!this.dX()&&"current-state"===this.lat())for(const s of this.$K)s.pit();super.hX(t)}iB(t=!1){if(super.iB(t),!this.fX())for(const s of this.$K)s.dit()}Xf(t=!0,s=!1){this.cat(),super.Xf(t,s)}cat(){for(const t of this.$K){const s=t=>{const s=t.jD(),i=this.oB();return 0!==s&&s!==i};t.lit(s),t.fit(s)}}hZ(){if(!this.tB()){const t=this.xB();if(t&&t.cF().oV())return!1;this.XK.tX(this),this.vtt()}return!0}uX(h,t,s){if(this.ist||(this.ist=this.xB()),!this.ist||this.ist.EU())this.iB(!0),this.itt();else{const i=this.ist.u3();if(0!==(h=-1!==i?s*i:h)||0!==this.b$){this.b$=h;const n=this.r$+this.o$,r=h*this.a$,o=n+r,a=this.KK._tt;o<0?(this.r$=0,this.o$=-o):a<=o?(this.r$=a,this.o$=this.r$-o):(this.r$=o,this.o$=0);let t=!1,s=!1,i=this.uB(),e=this.cB();i||e?i&&!e?0<this.a$?this.r$>=a&&(this.Mtt(0),this.fat(m.dat.Tween.O9.OnAnyTweenLoop),this.fat(m.dat.Tween.O9.OnTweensLoop),s=!0):this.r$<=0&&(this.Mtt(a),this.fat(m.dat.Tween.O9.OnAnyTweenLoop),this.fat(m.dat.Tween.O9.OnTweensLoop),s=!0):!i&&e?0<this.a$?this.r$>=a&&(this.ftt(a),this.fB(-1*this.dB()),s=!0,1===this.u$?this.l$<this.Sz()?(this.l$++,this.fat(m.dat.Tween.O9.OnAnyTweenLoop),this.fat(m.dat.Tween.O9.OnTweensLoop),this.fat(m.dat.Tween.O9.OnAnyTweenPingPong),this.fat(m.dat.Tween.O9.OnTweensPingPong),this.u$=0):(this.fat(m.dat.Tween.O9.OnAnyTweenPingPong),this.fat(m.dat.Tween.O9.OnTweensPingPong),t=!0):0===this.u$&&(this.fat(m.dat.Tween.O9.OnAnyTweenPingPong),this.fat(m.dat.Tween.O9.OnTweensPingPong),this.u$=1)):this.r$<=0&&(this.ftt(0),this.fB(-1*this.dB()),s=!0,1===this.u$?this.l$<this.Sz()?(this.l$++,this.fat(m.dat.Tween.O9.OnAnyTweenLoop),this.fat(m.dat.Tween.O9.OnTweensLoop),this.fat(m.dat.Tween.O9.OnAnyTweenPingPong),this.fat(m.dat.Tween.O9.OnTweensPingPong),this.u$=0):(t=!0,this.fat(m.dat.Tween.O9.OnAnyTweenPingPong),this.fat(m.dat.Tween.O9.OnTweensPingPong)):0===this.u$&&(this.fat(m.dat.Tween.O9.OnAnyTweenPingPong),this.fat(m.dat.Tween.O9.OnTweensPingPong),this.u$=1)):i&&e&&(0<this.a$?this.r$>=a&&(this.ftt(a),this.fB(-1*this.dB()),s=!0,0===this.u$&&(this.fat(m.dat.Tween.O9.OnAnyTweenPingPong),this.fat(m.dat.Tween.O9.OnTweensPingPong)),1===this.u$&&(this.fat(m.dat.Tween.O9.OnAnyTweenLoop),this.fat(m.dat.Tween.O9.OnTweensLoop),this.fat(m.dat.Tween.O9.OnAnyTweenPingPong),this.fat(m.dat.Tween.O9.OnTweensPingPong)),this.u$++,this.u$=m.wrap(this.u$,0,2)):this.r$<=0&&(this.ftt(0),this.fB(-1*this.dB()),s=!0,0===this.u$&&(this.fat(m.dat.Tween.O9.OnAnyTweenPingPong),this.fat(m.dat.Tween.O9.OnTweensPingPong)),1===this.u$&&(this.fat(m.dat.Tween.O9.OnAnyTweenLoop),this.fat(m.dat.Tween.O9.OnTweensLoop),this.fat(m.dat.Tween.O9.OnAnyTweenPingPong),this.fat(m.dat.Tween.O9.OnTweensPingPong)),this.u$++,this.u$=m.wrap(this.u$,0,2))):0<this.a$?this.r$>=a&&(this.l$<this.Sz()?(this.l$++,this.Mtt(0),this.fat(m.dat.Tween.O9.OnAnyTweenLoop),this.fat(m.dat.Tween.O9.OnTweensLoop),s=!0):(this.ftt(a),t=!0)):this.r$<=0&&(this.l$<this.Sz()?(this.l$++,this.Mtt(a),this.fat(m.dat.Tween.O9.OnAnyTweenLoop),this.fat(m.dat.Tween.O9.OnTweensLoop),s=!0):(this.ftt(0),t=!0)),t?(this.xit.Ntt(),this.iB(!0),this.itt()):(this.xit.Nc(this.r$,!0,!1,s,this.T$,!1),this.T$&&(this.T$=!1))}}}fat(t){const s=this.xB(),i=s.pat(m.dat.Tween);i.PushTriggerTween(this),this.Hc.ZF(t,s,i.nz()),i.PopTriggerTween()}VH(){const t=super.VH(),s=this.z$();return Object.assign(t,{tweenDataItemJson:s.VH(),id:this.Zc,destroyInstanceOnComplete:this.Jot,initialValueMode:this.Vot})}YH(t){if(t){const s=this.z$();s.YH(t.tweenDataItemJson),super.YH(t),this.Zc=t.id,this.Jot=t.destroyInstanceOnComplete,this.Vot=t.initialValueMode,this.Kot()}}static IsPlaying(t){return t.IsPlaying()}static yB(t){return t.yB()}static mat(t){return!!t.cB()&&0===t.q$()}static gat(t){return!!t.cB()&&1===t.q$()}static yat(t){const s=t.runtime.R$(),i=new m.Crt;if(t.json){i.YH(t.json.tweenDataItemJson);const e=new m.trt(i,s);return e.YH(t.json),e}{const h=new m.trt(i,s),n=(m.Oe(t.Mat)||(t.Mat=[t.Mat]),h.aat(t.id),h.X$(t.tags),h.uat(t.initialValueMode),h.IB(t.releaseOnComplete),h.aB(t.loop),h.lB(t.pingPong),h.rB(t.time),h.U$(0),h.Q$("default"),h.J$(t.Mat[0].resultMode),h.V$(t.repeatCount),h.Ott()),r=(n.jst(t.rz.CF()),n.Q$("default"),n.J$(t.Mat[0].resultMode),n.Wst(!0),n.Qst(t.rz.cF().iO()),t.rz.Y5()),o=r.Yst()?r.Vst():t.rz.t4().Yp(),a=r.Yst()?r.qst():t.rz.t4().nm(),u=(n.Jst(o),n.Hst(a),n.rit()),l=(u.nB(0),u.bB("noease"),u.Wst(!0),u.X$(""),n.rit());l.nB(t.time),l.bB("noease"),l.Wst(!0),l.X$("");for(const c of t.Mat){const f=n.ait(),d=(f.Qit(c.sourceId),f.Yit(c.sourceArgs),f.Xit(c.property),f.tet(c.type),f.ret(NaN),f.aet(NaN),f.Q$("default"),f.J$(c.resultMode),f.Wst(!0),f.Get()),p=(d.iet(c.valueType),d.nB(0),d.bB(c.ease),d.Wst(!0),d.Oet(c.startValue),d.Net(c.startValue),f.Get());p.iet(c.valueType),p.nB(t.time),p.bB(c.ease),p.Wst(!0),p.Oet(c.endValue),p.Net(c.endValue),f.k$()}return h}}static jst(t,s){if(!isNaN(s))for(const i of t.RX())i.jst(s)}wat(t,s){return this.qot||(this.qot=m.Kh(self.SB,this,t,s)),this.qot}}}{const zr=self.Os;zr.Xot=class extends zr.O${constructor(t,s){super(t,s),this.Sat=null,this.Tat=null}static Ob(t,s){return zr.Kh(zr.Xot,t,s)}bat(){1===this.fst.length?this.Sat=this.fst[0]:(this.Sat=this.fst[0],this.Tat=this.fst[1])}dst(){for(const t of this.Ktt.yst().gst())this.fst.push(zr.xat.Ob(this,t));this.bat()}ait(){const t=this.Ktt.yst(),s=t.uit(),i=zr.xat.Ob(this,s);return this.fst.push(i),this.bat(),i}hX(){if(this.Sst(),this.Tst()||!this.j$()){const t=this.wst(),s=t.Z$(),i=s?0:this.zst();for(const h of this.fst)h.hX(i),0===this.pst&&1===h.Kst()&&(this.pst=1),0===this.gZ&&1===h.nX()&&(this.gZ=1);this.mst=0;const e=this.fst.some(t=>t.Ett());e&&(this.mst=1),this.ast=this.$st(i),this.nst=!1,this.rst=!1,this.Nc(i)}}Dtt(){}Nc(t,s=0,i=!1,e=!1,h,n=!1,r=!1){if(this.ist||this.xB(),this.ist){const o=!this.ist.EU();return o&&(!n||!this.cF().oV())&&((this.Tat?(this.Sat.Nc(t,i,e,r),this.Tat):this.Sat).Nc(t,i,e,r),void(0!==this.Sat.Kst()&&(this.est||(this.est=this.ist.t4()),this.est)&&this.est.Cj()))}}Ltt(){}YH(t){super.YH(t),this.bat()}}}{const Br=self.Os;Br.xat=class extends Br.Mst{constructor(t,s){super(t,s),this.vat=!1}static Ob(t,s){return Br.Kh(Br.xat,t,s)}Nc(t,s=!1,i=!1,e=!1){let h,n;if(this.vat)h=this.Git[0],n=this.Git[1];else{if(s)h=this.Cit.fet(t,this.vit);else{if(this.Nit){const r=this.wst(),o=this.Nit.jX(),a=this.Nit.jD(),u=o?o.jD():r.oB();(t<=a||u<=t)&&(this.Nit=this.Cit.fet(t,this.vit))}else this.Nit=this.Cit.fet(t,this.vit);h=this.Nit}n=h.jX()}this.Iit.Nc(t,h,n,s,i,e)}Get(){const t=this.vit._it(),s=t.Eet();return this.Nit=null,this.vat=this.uet().length<=2,s}fit(t){this.Nit=null;const s=this.vit._it();s._et(t),this.vat=this.uet().length<=2}VH(){return{sourceAdapterJson:this.k$().VH(),basic:this.vat}}YH(t){t&&(this.k$().YH(t.sourceAdapterJson),this.vat=t.basic)}}}{const Ur=self.Os,Wr=self.ic;Ur.Dc=class extends Ur.Zh{constructor(t,s=!0){super(),this.hn=t[0],this.Cat=t[2],this.Iat=[];for(const i of t[1]){const e=Ur.Gat.Ob(this,i);this.Iat.push(e)}for(let t=0;t<this.Iat.length;t++){const h=this.Iat[t],n=this.Iat[t+1],r=this.Iat[t-1];h.fot(n),h.Iot(r)}this.Eat=new Map,this._at=new Map,this.Nat(),s&&Wr.Lc(this.hn,(t,s,i,e)=>this.Nc(t,s,i,e),null,{transition:this})}static Ob(t){return Ur.Kh(Ur.Dc,t)}$h(){for(const t of this.Iat)t.$h();Ur.Nr(this.Iat),this.Iat=null,this.Eat.clear(),this.Eat=null,this._at.clear(),this._at=null}Ac(t){this.Cat=!!t}Dat(t){const s=this._at.get(t);if(s)return s;for(const i of this.Iat)if(i.Aat()===t)return this._at.set(t,i),i}Lat(s){for(let t=this.Iat.length-1;0<=t;t--){const i=this.Iat[t],e=i.Aat();if(e<=s){let t=i;if(e<s)return t;if(e===s){for(;t;){const h=t.zX();if(!h)break;if(h.Aat()!==t.Aat())break;t=h}return t}}}}Nc(t,s,i,e){let h=t/e;if(this.Cat){const M=this.Dat(0),w=this.Dat(1),S=s+(s+i)*M.Oat(),T=(s+i)*w.Oat(),b=T-S;return 0===e?S+b:Wr.Rc(t,S,b,e)}0===e&&(h=1);let n=this.Lat(h),r=n.jX();if(!r){const x=n.zX(),v=n;n=x,r=v}const o=r.Aat()-n.Aat(),a=Ur.nn(h,n.Aat(),r.Aat(),0,o);if(n.Rat()||0==o){const C=s+(s+i)*n.Oat(),I=(s+i)*r.Oat(),G=I-C;return 0==o?1===a?C+G:C:Wr.Rc(a,C,G,o)}let u=n.Aat(),l=n.Oat(),c=n.Aat()+n.Pat(),f=n.Oat()+n.kat(),d=r.Aat()+r.Fat(),p=r.Oat()+r.jat(),m=r.Aat(),g=r.Oat(),y=Wr.wc("spline")(a,u,l,c,f,d,p,m,g,this.Eat.get(n));return(1-(y+=n.Oat()))*s+y*(s+i)}Nat(){this.Eat.clear();for(let t=0;t<this.Iat.length-1;t++){const s=this.Iat[t];if(s.Srt()){const i=s,e=this.Iat[t+1];if(e.Trt()){const h=i.Aat(),n=i.Aat()+i.Pat(),r=e.Aat()+e.Fat(),o=e.Aat();this.Eat.set(i,Wr.Pc(h,n,r,o))}}}}}}{const Qr=self.Os;Qr.Gat=class extends Qr.Zh{constructor(t,s){super(),this.zat=t,this.Bat=s[0],this.Uat=s[1],this.Wat=s[2],this.Qat=s[3],this.Jat=s[4],this.Vat=s[5],this.Pot=s[6],this.Fot=s[7],this.Yat=s[8],this.cot=null,this.vot=null}$h(){this.zat=null}static Ob(t,s){return Qr.Kh(Qr.Gat,t,s)}fot(t){this.cot=t}jX(){return this.cot}Iot(t){this.vot=t}zX(){return this.vot}Aat(){return this.Bat}Oat(){return this.Uat}Pat(){return this.Wat}kat(){return this.Qat}Fat(){return this.Jat}jat(){return this.Vat}Srt(){return this.Pot}Trt(){return this.Fot}Rat(){return"linear"===this.Yat}Hat(){return"cubic"===this.Yat}}}{const Jr=self.Os;Jr.qat=class extends Jr.Zh{constructor(t){super(),this.Hc=t,this.Zat=[]}$h(){for(const t of this.Zat)t.$h();Jr.Nr(this.Zat),this.Zat=null}Ob(t){this.Zat.push(Jr.Dc.Ob(t))}}}{const Vr=self.Os;Vr.Xat=class extends Vr.Zh{constructor(t){super(),this.Hc=t,this.Kat=null,this.$at=null,this.oZ=t=>this.aZ(t.rz)}$h(){if(this.yZ(),this.Kat){for(const t of this.Kat.values())t.clear();this.Kat.clear()}this.Kat=null,this.Hc=null}Ob(t){if(this.Kat||(this.Kat=new Map),t){const s=t[0][16],i=s[0],e=t[1],h=(this.Kat.has(e)||this.Kat.set(e,new Map),this.Kat.get(e));h.set(i,t)}}MZ(){const t=this.Hc.Nf();t&&t.addEventListener("instancedestroy",this.oZ)}yZ(){const t=this.Hc.Nf();t&&t.removeEventListener("instancedestroy",this.oZ)}tut(){return!!this.Kat&&0!==this.Kat.size}sut(t,s){let i;if(i=t instanceof Vr.iut?t.iO():t,this.Kat.has(i)){const e=this.Kat.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}}eut(t,s){this.$at||(this.$at=new WeakMap),this.$at.has(t)||this.$at.set(t,s)}hut(t){if(!this.$at)return"";const s=this.$at.get(t);return s||""}aZ(t){this.$at&&this.$at.has(t)&&this.$at.delete(t)}}}{const Yr=self.Os;Yr.nut=class{constructor(t){this.Hc=t,this.rut=new Yr.out}$h(){this.rut.$h(),this.rut=null,this.Hc=null}b4(){return this.Hc}Ob(t){this.rut.$l(t)}aut(t){return this.rut.Ks(t)}uut(){return this.rut.uut()}}}{const b=self.Os;b.lut=class{constructor(t,s,i,e,h,n,r){this.Hc=h.b4(),this.cut=h,this.fut=t,this.dut=i,this.mut=e,this.Rg=s,this.Uq=n,this.gut=r??n.xB().CF(),this.yut(),this.Mut=this.Sut?.wut()??-1,this.Tut=[],this.but=null,this.xut=NaN,this.vut=null,this.Cut=null,this.Iut=null,this.Gut="",this.Eut=null,this._ut="",this.Nut="",this.Dut=0,this.Aut=!1,this.m$=!1}$h(){this.m$||(b.Nr(this.Tut),this.Tut=null,this.Hc=null,this.cut=null,this.mut=null,this.Uq=null,this.but=null,this.xut=NaN,this.vut&&this.vut.clear(),this.vut=null,this.Cut=null,this.Iut=null,this.Gut="",this.Eut=null,this._ut="",this.Nut="",this.m$=!0)}tn(){return this.m$}Lut(){return this.cut}b4(){return this.Hc}zc(){return this.fut}Out(){return this.mut}$z(){return this.Rg}DZ(){return this.Uq||(this.Uq=this.Hc.H3(this.gut).Y5()),this.Uq}Rut(){return this.Put(this.Mut)}kut(){const t=this.Rut();return t?t.$z():""}Fut(){const t=this.Rut();return t?t.pB():[]}jut(t){const s=this.Fut();if(!s)return!1;if(!s.length)return!1;const i=b.lut.K$(t);return!(!i||!i.length)&&i.every(b.lut.ttt,s)}zut(t,s){const i=this.Fut();if(!i)return!1;if(!i.length)return!1;const e=b.lut.K$(t);return!(!e||!e.length)&&e.every(t=>b.lut.But.call(i,t,s))}static ttt(t){return""===t?1===this.length&&""===this[0]:this.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static K$(t){return t.trim().split(" ")}static But(s,i){return""===s?1===this.length&&""===this[0]:this.some(t=>b.compare(t.trim(),i,s.trim()))}Uut(t){const s=this.Rut();if(s){if(b.ae(t)){const i=s.Wut(),e=i?i[t]:void 0;if(b.ae(e))return this.Put(e)}if("string"==typeof t)for(const h of s.Wut()){const n=this.Put(h);if(n.hB(t))return this.Put(n.wut())}}}Qut(t){const s=this.Uut(t);return s?s.$z():""}Jut(t){const s=this.Uut(t);return s?s.pB():""}Vut(t){const s=this.Rut();if(!s)return-1;const i=s.Wut();if(!i)return-1;const e=this.Uut(t);return e?i.indexOf(e.wut()):-1}Yut(){const t=this.Rut();if(!t)return 0;const s=t.Wut();return s?s.length:0}Put(t){return this.mut.Put(t)}Xf(){const t=this.Hut();t.qut(!0)}qut(t){if(this.Zut()){for(const[s,i]of this.Zut().entries())i.qut(!1);this.Zut().clear()}if(this.vut=null,this.but=null,this.Xut=null,this.Cut=null,this.Gut="",this.Eut=null,this._ut="",this.Nut="",this.Tut=[],t){this.cut.Kut(this);const e=this.Sut.wut();e!==this.Mut&&this.$ut(e)}else this.Mut=this.Sut.wut()}tlt(){const t=this.mut.Put(this.Mut);return t?t.ilt().slt():0}elt(t){const s=this.hlt(t);return s?s.zc():""}nlt(t){let s;return b.ae(t)&&(s=this.hlt(t)),"string"==typeof t&&(s=this.rlt(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.qit():""}olt(t){let s;if(b.ae(t)&&(s=this.hlt(t)),s="string"==typeof t?this.rlt(t):s){const i=s.ult();b.ae(i)&&(this.Tut.push(this.Mut),this.$ut(i))}}llt(t){const s=this.mut.clt(t);if(s){const i=this.mut.Put(s.wut());i&&(this.Tut.push(this.Mut),this.$ut(i.wut()))}}flt(){const t=this.Tut.pop();b.ae(t)?this.$ut(t):this.dlt()&&(this.cut.Kut(this.dlt(),!0,!1,!1),this.dlt().$ut(this.plt()),this.Hut().mlt(this.dlt()))}glt(t){const s=this.Rut();if(s){s.wut();const i=this.Uut(t);i&&(this.Tut.push(this.Mut),this.$ut(i.wut()))}}ylt(s){if(b.ae(s)){const t=this.mut.Put(this.Mut),i=t.ilt().Mlt();return!!i[s]}if("string"==typeof s){const e=this.mut.Put(this.Mut),h=e.ilt().Mlt();for(let t=0;t<h.length;t++)if(h[t].zc()===s)return!0}return!1}wlt(){this.Aut=!0}Slt(){return 0<this.Dut}Tlt(){this.Dut++}blt(){this.Dut--,0===this.Dut&&this.Aut&&this.cut.xlt(this)}$ut(t){const i=this.Mut,s=this.DZ().xB();if(this.Tlt(),this.cut.vlt(this),this.Hc.ZF(b.P9.Flowchart.O9.OnBeforeAnyNodeChange,s),this.Hc.ZF(b.P9.Flowchart.O9.OnBeforeTaggedNodeChange,s),this.Hc.ZF(b.P9.Flowchart.O9.OnBeforeAnyNodeChangeInFlowchart,s),this.Hc.ZF(b.P9.Flowchart.O9.OnBeforeTaggedNodeChangeInFlowchart,s),this.Mut=t,this.Hc.ZF(b.P9.Flowchart.O9.OnAnyNodeChange,s),this.Hc.ZF(b.P9.Flowchart.O9.OnTaggedNodeChange,s),this.Hc.ZF(b.P9.Flowchart.O9.OnAnyNodeChangeInFlowchart,s),this.Hc.ZF(b.P9.Flowchart.O9.OnTaggedNodeChangeInFlowchart,s),this.cut.Clt(),this.blt(),!this.tn()){const e=this.Put(this.Mut);if("reference"===e.Qx()){const h=e.Ilt();if(this.Glt(e)){this.Tut.pop();const n=this.Elt(e),r=(this.cut.Kut(n,!0,!0,!1),n._lt(this,i),this.Hut());r.mlt(n)}else{const o=e.Nlt();if(h){this.Tut.pop();let s=e.Dlt();if(s){let t=this.cut.Alt(s);for(;t;)s=b.kd(s),t=this.cut.Alt(s)}else{s=h+"-ref";let t=this.cut.Alt(s);for(;t;)s=b.kd(s),t=this.cut.Alt(s)}const a=this.cut.Llt(h,o,s,this.Uq,!0),u=(a._lt(this,i),this.Olt(e,a),this.Hut());a.Rlt(u),u.mlt(a)}}}}}hlt(t){const s=this.mut.Put(this.Mut);if(!s)return null;const i=s.ilt().Mlt();if(!i)return null;const e=i[t];return e||null}rlt(t){const s=this.mut.Put(this.Mut);if(!s)return null;const i=s.ilt().Plt(t);return i||null}yut(s){if("number"==typeof s){let t=this.Put(s);t=t||this.mut.klt(),this.Sut=t}else{let t=this.mut.clt(this.dut);t=t||this.mut.klt(),this.Sut=t}}VH(){return this.Aut?null:{flowchartName:this.fut,flowchartTag:this.Rg,startNodeTag:this.dut,currentNodeId:this.Mut,previousNodeIds:this.Tut,pluginUID:this.Uq.xB().CF(),reference:{previousFlowchartTag:this.dlt()?this.dlt().$z():"",previousStartNodeId:b.ae(this.plt())?this.plt():NaN,referencesJson:this.Flt(),currentReferenceFlowchartTag:this.jlt()?this.jlt().$z():"",rootFlowchartTag:this.Hut()?this.Hut().$z():""}}}Flt(){if(!this.zlt())return null;const t=[];for(const[s,i]of this.Zut().entries())t.push({flowchartElementId:s.wut(),flowchartStateTag:i.$z()});return t.length?t:null}YH(t){if(t){if(this.fut=t.flowchartName,this.Rg=t.flowchartTag,this.dut=t.startNodeTag,this.Mut=t.currentNodeId,this.Tut=t.previousNodeIds,this.gut=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.Gut=s.previousFlowchartTag,this.xut=s.previousStartNodeId,this.Eut=s.referencesJson,this._ut=s.currentReferenceFlowchartTag,this.Nut=s.rootFlowchartTag}this.yut()}}dlt(){return"string"==typeof this.Gut&&this.Gut&&(this.but=this.cut.Alt(this.Gut),this.Gut=""),this.but}plt(){return this.xut}_lt(t,s){this.but=t,this.xut=s}jlt(){return"string"==typeof this._ut&&this._ut&&(this.Cut=this.cut.Alt(this._ut),this._ut=""),this.Cut}mlt(t){this.Cut=t,this.Cut===this&&(this.Cut=null)}Hut(){return"string"==typeof this.Nut&&this.Nut&&(this.Iut=this.cut.Alt(this.Nut),this.Nut=""),this.Iut||this}Rlt(t){this.Iut=t}zlt(){return this.Blt(),!!this.vut}Glt(t){return this.Blt(),this.vut&&this.vut.has(t)}Blt(){if(this.Eut){this.vut&&this.vut.clear(),this.vut||(this.vut=new Map);for(const t of this.Eut){const s=this.cut.Alt(t.flowchartStateTag),i=s.Put(t.flowchartElementId);this.vut.set(i,s)}this.Eut=null}}Zut(){return this.Blt(),this.vut}Elt(t){return this.Blt(),this.vut.get(t)}Olt(t,s){this.vut||(this.vut=new Map),this.vut.set(t,s)}}}{const Hr=self.Os;Hr.Ult=class{constructor(t){this.Hc=t,this.Wlt=new Map,this.Qlt=null,this.Jlt=[],this.Vlt=()=>this.fZ(),this.Ylt=null}$h(){Hr.Nr(this.Jlt),this.Jlt=null,this.Wlt.clear(),this.Wlt=null,this.Qlt=null,this.Hc=null,this.Ylt=null}b4(){return this.Hc}Llt(t,s,i,e,h,n){const r=this.Hc.Lut().aut(t);if(r){if(!this.Wlt.has(i)){const o=new Hr.lut(t,i,s,r,this,e,n);return this.Wlt.set(i,o),h&&this.Kut(o,!0),o}{const a=this.Wlt.get(i);a&&this.xlt(a)}}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}xlt(t){if(t.wlt(),!t.Slt()){const s=t.$z();this.Wlt.delete(s),t.$h(),this.Qlt===t&&(this.Qlt=null)}}Hlt(t){t.Xf()}Alt(t){return this.Wlt.get(t)}vlt(t){this.Jlt.push(t)}Clt(){this.Jlt.pop()}Kut(t,s=!1,i=!1,e=!0){if(e){const h=t.jlt();t=h||t}t!==this.Qlt&&(this.qlt(),this.Zlt(t,s,i))}Xlt(t){return"string"==typeof t?this.Alt(t):this.Jlt.length?this.Jlt[this.Jlt.length-1]:this.Qlt}qlt(){if(this.Qlt&&!this.Qlt.tn()){const t=this.Qlt.DZ().xB();this.Qlt.Tlt(),this.vlt(this.Qlt),this.Hc.ZF(Hr.P9.Flowchart.O9.OnBeforeFlowchartChange,t),this.Clt(),this.Qlt.blt()}}Zlt(t,s=!1,i=!1){if(this.Qlt=t,this.Qlt&&!this.Qlt.tn()){const e=this.Qlt.DZ().xB();this.Qlt.Tlt(),this.vlt(this.Qlt),this.Hc.ZF(Hr.P9.Flowchart.O9.OnFlowchartChange,e),!0!==i&&"number"!=typeof i||this.Qlt.yut(i),s&&(this.Hc.ZF(Hr.P9.Flowchart.O9.OnAnyNodeChange,e),this.Hc.ZF(Hr.P9.Flowchart.O9.OnTaggedNodeChange,e)),this.Clt(),this.Qlt.blt()}}VH(){return{flowchartJsonObjects:[...this.Wlt.values()].map(t=>t.VH()),currentFlowchartTag:this.Qlt?this.Qlt.$z():null}}YH(t){if(t){this.Ylt=t;const s=new Map;for(const i of this.Ylt.flowchartJsonObjects){const e=i.flowchartTag;if(this.Wlt.has(e)){const h=this.Wlt.get(e);h.YH(i),s.set(e,h)}else{const n=this.Llt(i.flowchartName,i.startNodeTag,i.flowchartTag,null,!1,i.pluginUID);n.YH(i),s.set(i.flowchartTag,n)}}for(const[r,o]of this.Wlt.entries())s.has(r)||o.$h();this.Wlt.clear(),this.Wlt=s,this.Hc.I9()?this.Hc.Nf().addEventListener("afterload",this.Vlt):this.fZ()}}fZ(){this.Hc.Nf().removeEventListener("afterload",this.Vlt);const t=this.Wlt.get(this.Ylt.currentFlowchartTag);t&&this.Kut(t,!0),this.Ylt=null}}}{const qr=self.Os;qr.out=class{constructor(){this.Klt=new Map}$h(){for(const t of this.Klt.values())t.$h();this.Klt.clear(),this.Klt=null}$l(t){const s=new qr.$lt(t),i=s.zc();this.Klt.set(i,s)}Ks(t){return this.Klt.get(t)}uut(){return!!this.Klt.size}static tct(t,s,i,e){if(s)for(const h of s){const n=new i(h,e);t.push(n)}}}}{const Zr=self.Os;Zr.$lt=class{constructor(t){this.hn=t[0],this.sct=new Zr.ict(t[1],this)}$h(){this.sct.$h(),this.sct=null}ect(){return this.sct}Put(t){return this.sct.Put(t)}clt(t){return this.sct.clt(t)}klt(){return this.sct.klt()}zc(){return this.hn}}}{const Xr=self.Os;class Kr{constructor(t,s){this.sct=s,this.ef=t[7],this.hct=t[0],this.Rg=t[1],this.Rg?this.x$=this.Rg.trim().split(" ").map(t=>t.trim()):this.x$=[],this.nct=t[2],this.rct=null,this.oct=null,"dictionary"===this.ef&&(this.rct=t[3],this.oct=t[4]),this.uct=t[6],this.lct=null,this.cct=null,this.fct=null,"reference"===this.ef&&(this.lct=t[8],this.cct=t[9],this.fct=t[10]),this.dct=new Xr.pct(t[5],this)}$h(){this.sct=null}ect(){return this.sct}ilt(){return this.dct}wut(){return this.hct}$z(){return this.Rg}pB(){return this.x$}hB(t){if(!this.x$)return!1;if(!this.x$.length)return!1;const s=Xr.lut.K$(t);return!(!s||!s.length)&&s.every(Xr.lut.ttt,this.x$)}mct(){return this.uct}Wut(){return this.nct}gct(){return this.rct}yct(){return this.oct}Qx(){return this.ef}Ilt(){return this.lct}Nlt(){return this.cct}Dlt(){return this.fct}}Xr.ict=class{constructor(t,s){this.mut=s,this.Mct=[],this.wct=new Map,this.Sct=new Map,this.Tct=null,Xr.out.tct(this.Mct,t,Kr,this);for(const i of this.Mct){const e=i.wut(),h=i.$z(),n=i.pB(),r=i.mct();if(this.wct.set(e,i),h)for(const a of n)this.Sct.has(a)||this.Sct.set(a,new Set),this.Sct.get(a).add(i);r&&(this.Tct=i);const o=i.ilt();for(const u of o.bct()){const l=u.wut();this.wct.set(l,u)}}}$h(){this.mut=null;for(const t of this.Mct)t.$h();Xr.Nr(this.Mct),this.Mct=null}Out(){return this.mut}Put(t){return this.wct.get(t)}clt(t){if(!t||!t.length)return null;const i=[];for(const e of t.trim().split(" ")){let t=this.Sct.get(e.trim())??new Set;if(0===t.size)return null;i.push(t)}const s=i.reduce((t,s)=>s.size<t.size?s:t);return[...s].filter(s=>i.every(t=>t.has(s)))[0]}klt(){return this.Tct}*xct(){for(const t of this.Mct)yield t}}}{const $r=self.Os;class to{constructor(t,s){this.dct=s,this.hct=t[0],this.hn=t[1],this.lht=t[2],this.vct=t[3]}$h(){this.dct=null}ilt(){return this.dct}wut(){return this.hct}zc(){return this.hn}qit(){return this.lht}ult(){return this.vct}}$r.pct=class{constructor(t,s){this.Cct=s,this.Ict=[],this.Gct=new Map,$r.out.tct(this.Ict,t,to,this);for(const i of this.Ict)this.Gct.set(i.zc(),i)}$h(){this.Cct=null;for(const t of this.Ict)t.$h();$r.Nr(this.Ict),this.Ict=null}Ect(){return this.Cct}slt(){return this.Ict.length}Mlt(){return this.Ict}Plt(t){return this.Gct.get(t)}*bct(){for(const t of this.Ict)yield t}}}{const so=self.Os;so._ct=class extends so.Zh{constructor(t){super(),this.Nct=t,this.Dct=[],this.Dct.push(so.Kh(so.Act,this)),this.Og=0,this.Lct=this.Dct[0]}$h(){for(const t of this.Dct)t.$h();so.Nr(this.Dct),this.Lct=null,this.Nct=null}cF(){return this.Nct}yP(){return this.Lct}Oct(){return this.Dct[this.Og-1]}Wl(){this.yP().Wl()}Rct(){const t=this.Dct,s=++this.Og;if(s===t.length){const i=so.Kh(so.Act,this);t.push(i),this.Lct=i}else{const e=t[s];e.Xf(),this.Lct=e}}Pct(){const t=this.Dct,s=++this.Og,i=(s===t.length&&t.push(so.Kh(so.Act,this)),t[s]);i.g0(t[s-1]),this.Lct=i}_W(){this.Lct=this.Dct[--this.Og]}kct(i){const e=this.Dct;for(let t=0,s=e.length;t<s;++t)e[t].kct(i)}}}{const io=self.Os;io.Act=class extends io.Zh{constructor(t){super(),this.Dct=t,this.Nct=this.Dct.cF(),this.Fct=this.Nct.b4().VO(),this.jct=!0,this.yJ=[],this.zct=[]}$h(){this.Bct(),this.Dct=null,this.Nct=null,this.Fct=null}Bct(){io.Nr(this.yJ),io.Nr(this.zct)}cF(){return this.Nct}Uct(){return this.jct}Wct(){return this.jct?!!this.Nct.wP():!!this.yJ.length}gP(){return this.jct?this.Nct.gP():this.yJ}Qct(){return!!this.zct.length}Jct(){return this.zct}Vct(){const t=this.gP();return t.length?t:this.zct}Xf(){this.jct=!0,io.Nr(this.zct)}Wl(){this.jct=!0}g0(t){t.Uct()?this.Xf():(this.jct=!1,io.Or(this.yJ,t.yJ),io.Nr(this.zct))}Yct(t){this.yJ.push(t)}Hct(t){this.zct.push(t)}qct(t){this.jct=!!t}Zct(){return this.yJ}Xct(){return this.zct}Kct(t){this.jct=!1,io.Nr(this.yJ),this.yJ.push(t)}$ct(t){this.jct=!1,io.Or(this.yJ,t)}tft(t){this.jct=!1,io.Nr(this.yJ);for(const s of t)this.yJ.push(s)}ift(t,s){for(const i of s)t.has(i)||this.zct.push(i)}eft(t){for(const s of t)this.yJ.push(s);io.jr(this.zct,t)}hft(){io.Nr(this.zct)}nft(t){if(t)if(this.Fct.gW().jO().rft()){this.Uct()&&(io.Nr(this.yJ),io.Or(this.zct,t.cF().gP()),this.jct=!1);const s=this.zct.indexOf(t);-1!==s&&(this.yJ.push(this.zct[s]),this.zct.splice(s,1))}else this.Kct(t)}kct(t){io.jr(this.yJ,t),io.jr(this.zct,t)}}}{const eo=self.Os;eo.oft=class extends eo.Zh{constructor(t){super(),this.aft=t,this.Hc=this.aft.b4(),this.Dct=[],this.Dct.push(eo.Kh(eo.uft,this,null)),this.Og=0,this.lft=[]}$h(){for(const t of this.Dct)t.$h();eo.Nr(this.Dct),eo.Nr(this.lft),this.aft=null,this.Hc=null}LO(){return this.aft}b4(){return this.Hc}gW(){return this.Dct[this.Og]}cft(){return this.Dct}fft(){return this.Og}yW(t){const s=this.Dct,i=++this.Og;if(i===s.length){const e=eo.Kh(eo.uft,this,t);return s.push(e),e}{const h=s[i];return h.Xf(t),h}}_W(){--this.Og}dft(t){this.lft.push(t)}pft(){this.lft.pop()}JO(){const t=this.lft;return 0===t.length?null:t.at(-1)}}}{const ho=self.Os;ho.uft=class extends ho.Zh{constructor(t,s){super(),this.Dct=t,this.Hc=this.Dct.b4(),this.mft=s,this.gft=0,this.yft=0,this.Mft=!1,this.wft=!1,this.Sft=null,this.Tft=0,this.bft=0,this.xft=null}$h(){this.Xf(null),this.Dct=null,this.Hc=null}Xf(t){this.mft=t,this.gft=0,this.yft=0,this.Mft=!1,this.wft=!1,this.xft=null}vft(t,s){this.mft=t,this.gft=0,this.yft=s}Cft(){this.gft=0,this.yft=0}jO(){return this.mft}Ift(t){this.mft=t}Gft(){return this.gft}Eft(t){this.gft=t}_ft(){return this.yft}Nft(t){this.yft=t}Dft(t){this.Mft=!!t}Aft(){return this.Mft}Lft(t){this.wft=!!t}Oft(){return this.wft}Rft(t){this.Sft=t}Pft(){return this.Sft}kft(t,s){this.Tft=t,this.bft=s}YO(){return this.Tft}HO(t){this.bft=t}Fft(){return this.bft}jft(){const t=this.mft;return!!t.zft()||this.gft<t.Bft()-1&&!!t.mW().length}Uft(t){this.xft=t}Wft(){return this.xft}}}{const no=self.Os;no.Qft=class extends no.Zh{constructor(t){super(),this.aft=t,this.Hc=this.aft.b4(),this.Dct=[],this.Og=-1,this.Lct=null,this.Jft=[]}$h(){no.Nr(this.Dct),this.aft=null,this.Hc=null}Vft(t){this.Jft=t;const s=this.Jft.slice(0);this.Dct.push(s),this.Og=0,this.Lct=s}LO(){return this.aft}b4(){return this.Hc}Yft(){return this.Lct}yW(){const t=++this.Og,s=this.Dct;t===s.length?s.push(this.Jft.slice(0)):no.Or(s[t],this.Jft),this.Lct=s[t]}_W(){this.Lct=this.Dct[--this.Og]}}}{const ro=self.Os;ro.Hft=class extends ro.Zh{constructor(t){super(),this.aft=t,this.Hc=this.aft.b4(),this.Dct=[],this.Og=-1}$h(){ro.Nr(this.Dct),this.aft=null,this.Hc=null}LO(){return this.aft}b4(){return this.Hc}qft(){return 0<=this.Og}Yft(){return this.Dct[this.Og]}yW(){if(++this.Og,this.Og===this.Dct.length){const t=ro.Kh(ro.Zft,this);return this.Dct.push(t),t}{const s=this.Dct[this.Og];return s.Xf(),s}}_W(){--this.Og}Xft(s){const i=this.Dct;for(let t=this.Og;0<=t;--t){const e=i[t];if(e.zc()===s)return e}return null}Kft(){return this.Dct.slice(0,this.Og+1)}}}{const oo=self.Os;oo.Zft=class extends oo.Zh{constructor(t){super(),this.$ft=t,this.hn="",this.Og=0,this.t0t=!1,this.s0t=NaN}Xf(){this.hn="",this.Og=0,this.t0t=!1,this.s0t=NaN}wW(t){this.hn=t}zc(){return this.hn}IW(t){this.Og=t}iO(){return this.Og}iB(){this.t0t=!0}EW(){return this.t0t}i0t(t){this.s0t=t}e0t(){return this.s0t}}}{const ao=self.Os;ao.h0t=class extends ao.Zh{constructor(){super(),this.Dct=[],this.Og=-1}$h(){ao.Nr(this.Dct)}Yft(){return this.Dct[this.Og]}yW(){if(++this.Og,this.Og!==this.Dct.length)return this.Dct[this.Og];{const t=[];return this.Dct.push(t),t}}_W(){--this.Og}}}{let t=function(t,s){return t.iO()-s.iO()},n=function(i,e){for(let t=0,s=i.length;t<s;++t)if(i[t]!==e[t])return!1;return!0};t,n;const x=self.Os;x.n0t=class extends x.Zh{constructor(t){super(),this.Hc=t,this.r0t=[],this.o0t=new Map,this.a0t=[],this.u0t=new Map,this.l0t=new Map,this.c0t=new Map,this.f0t=new Map,this.d0t=new Map,this.p0t=new Map,this.m0t=0,this.g0t=[],this.y0t=[],this.M0t=[],this.w0t=new Map,this.S0t=new Map,this.Fct=x.Kh(x.oft,this),this.T0t=x.Kh(x.Qft,this),this.$ft=x.Kh(x.Hft,this),this.b0t=[],this.x0t=[],this.v0t=[],this.C0t=0,this.I0t=0,this.G0t=0,this.E0t=[],this._0t=[],this.N0t=[],this.D0t=new Map,this.A0t=new Map,self.c3_callFunction=(t,s)=>this.L0t(t,s)}$h(){this.H9(),this.Fct.$h(),this.Fct=null,this.T0t.$h(),this.T0t=null,x.Nr(this.x0t),x.Nr(this.v0t),this.Hc=null,x.Nr(this.r0t),this.o0t.clear()}Ob(t){const s=x.Kh(x.O0t,this,t);this.r0t.push(s),this.o0t.set(s.zc().toLowerCase(),s)}R0t(t){this.b0t.push(t)}P0t(){for(const t of this.S0t.values())t.k0t();for(const s of this.w0t.values())s.P0t();for(const i of this.S0t.values())i.P0t();for(const e of this.r0t)e.P0t();for(const h of this.r0t)h.m9();for(const n of this.b0t)n.P0t(!1);x.Nr(this.b0t),this.T0t.Vft(this.M0t)}b4(){return this.Hc}p9(t){return this.o0t.get(t.toLowerCase())||null}F0t(t){this.a0t.push(t),this.u0t.set(t.j0t(),t)}z0t(t){this.l0t.set(t._V(),t)}B0t(t){this.c0t.set(t._V(),t)}U0t(t){this.f0t.set(t._V(),t)}W0t(t){switch(t.Q0t()){case 0:this.w0t.set(t.J0t().toLowerCase(),t);break;case 1:this.S0t.set(t.J0t().toLowerCase(),t)}}V0t(t){this.p0t.set(t._V(),t),(t.oV()?this.g0t:this.y0t).push(t)}Y0t(i){2<=i.length&&i.sort(t);let e=this.d0t.get(i.length);e||(e=[],this.d0t.set(i.length,e));for(let t=0,s=e.length;t<s;++t){const h=e[t];if(n(i,h))return h}return e.push(i),i}H0t(t){return this.M0t.push(t.q0t()),this.m0t++}VO(){return this.Fct}Z0t(){return this.VO().gW()}jO(){return this.Z0t().jO()}X0t(){const t=this.Z0t(),s=t.jO();return s.K0t(t.Gft())}$0t(){const t=this.Z0t(),s=t.jO();return s.t1t(t._ft())}s1t(){return this.T0t}MW(){return this.$ft}i1t(t){const s=[];for(t=t.e1t();t;)x.Bh(s,t.h1t()),t=t.e1t();return s}n1t(t){const s={};for(const i of this.i1t(t))s[i.r1t()]=i.o1t();return Object.create(Object.prototype,s)}a1t(t){return this.p0t.get(t)||null}u1t(t){return this.l0t.get(t)||null}l1t(t){return this.c0t.get(t)||null}c1t(t){return this.f0t.get(t)||null}OO(t){return this.w0t.get(t.toLowerCase())||null}f1t(t,s){let i=this.S0t.get((t.zc()+"."+s).toLowerCase());if(i)return i;if(!t.TV())for(const e of t.d1t())if(i=this.S0t.get((e.zc()+"."+s).toLowerCase()))return i;return null}p1t(){return this.g0t}m1t(){return this.y0t}g1t(t){for(const s of this.g0t)s.y1t();if(t)for(const i of this.y0t)i.O2()&&i.y1t()}M1t(t){return this.u0t.get(t.toLowerCase())||null}w1t(t){const s=this.l0t.get(t);return s&&s.S1t()?s:null}T1t(){return this.a0t}b1t(){for(const t of this.a0t)t.x1t()}v1t(){for(const t of this.r0t)t.C1t()}I1t(t){this.v1t(),this.C0t++;for(const s of t.Oq()){const i=s.B7();i&&(this.Hc.G1t(s),i.uI(),this.Hc.E1t())}this.C0t--}async _1t(t){this.v1t(),this.C0t++;for(const s of this.N1t(t))await this.Hc.D1t(s);this.C0t--}*N1t(t){for(const s of t.Oq()){const i=s.B7();i&&(this.Hc.G1t(s),yield*i.A1t(),this.Hc.E1t())}}L1t(t,s,i,e){let h=!1;if(!t.N3())return this.O1t(s,i,e);this.I0t++;for(const n of t.Oq()){const r=n.B7();if(r){this.Hc.G1t(n);for(const a of r.R1t()){const u=a.L1t(s,i,e);h=h||u}const o=r.L1t(s,i,e);h=h||o,this.Hc.E1t()}}return this.I0t--,h}*P1t(t,s,i,e){let h=!1;if(!t.N3())return this.O1t(s,i,e);this.I0t++;for(const n of t.Oq()){const r=n.B7();if(r){this.Hc.G1t(n);for(const a of r.R1t()){const u=yield*a.P1t(s,i,e);h=h||u}const o=yield*r.P1t(s,i,e);h=h||o,this.Hc.E1t()}}return this.I0t--,h}O1t(t,s,i){return this.x0t.push([t,s,i]),!1}k1t(t,s,i){let e=null,h=new Promise(t=>e=t);return this.v0t.push([t,s,i,e]),h}*F1t(){if(this.Hc.j1t())throw new Error("should not be in breakpoint");const t=this.Hc.L3();for(;this.v0t.length;){const[s,i,e,h]=this.v0t.shift(),n=yield*this.P1t(t,s,i,e);h(n)}}async z1t(){for(const t of this.F1t())await this.Hc.D1t(t)}B1t(t,i,e,h){let n=!1,s=t.N3(),r=s.B7();if(r){this.I0t++,this.Hc.G1t(s);const o=r.R1t();for(let t=0,s=o.length;t<s;++t){const u=o[t].B1t(i,e,h);n=n||u}const a=r.B1t(i,e,h);return n=n||a,this.Hc.E1t(),this.I0t--,n}}*U1t(t,i,e,h){let n=!1,s=t.N3(),r=s.B7();if(r){this.I0t++,this.Hc.G1t(s);const o=r.R1t();for(let t=0,s=o.length;t<s;++t){const u=yield*o[t].U1t(i,e,h);n=n||u}const a=yield*r.U1t(i,e,h);return n=n||a,this.Hc.E1t(),this.I0t--,n}}W1t(){return this.I0t}Q1t(){return 0<this.W1t()}J1t(){return++this.I0t}V1t(){--this.I0t}Y1t(){return 0<this.C0t}CP(){return this.Y1t()||this.Q1t()}k9(t){for(const[s,i,e]of this.x0t)this.L1t(t,s,i,e);x.Nr(this.x0t)}xP(t){t?this.G0t++:this.G0t--}wF(){return 0<this.G0t}H1t(i){for(let t=0,s=i.length;t<s;++t)i[t].q1t().Wl()}Z1t(i){for(let t=0,s=i.length;t<s;++t)i[t].q1t().Rct()}bW(i){for(let t=0,s=i.length;t<s;++t)i[t].q1t().Pct()}vW(i){for(let t=0,s=i.length;t<s;++t)i[t].q1t()._W()}zO(s){const i=new Set,e=this.Fct.cft(),h=this.Fct.fft();for(let t=0;t<=h;++t){const n=e[t].Wft();if(n)for(const r of n)s&&s.has(r)||i.add(r)}return i}X1t(t){const s=new Set([...t]),i=this.zO(s);if(0<i.size){for(const e of i)e.q1t().Rct();return[...i]}return null}K1t(){const t=x.Kh(x.$1t,this);return this.E0t.push(t),t}tdt(){return this.E0t}sdt(){if(this.E0t.length){let i=this.Z0t(),e=!1;this.C0t++;for(let t=0,s=this.E0t.length;t<s;++t){const h=this.E0t[t];h.idt()&&h.edt(i),h.hdt()&&(e=!0)}e&&(this.ndt(),i.Xf(null)),this.C0t--}}async rdt(){if(this.E0t.length){let i=this.Z0t(),e=!1;this.C0t++;for(let t=0,s=this.E0t.length;t<s;++t){const h=this.E0t[t];h.idt()&&await h.odt(i),h.hdt()&&(e=!0)}e&&(this.ndt(),i.Xf(null)),this.C0t--}}ndt(){const t=x.Fr(this.E0t,t=>t.hdt());for(const s of t)s.$h()}H9(){for(const t of this.E0t)t.$h();x.Nr(this.E0t)}adt(t){for(const s of this.E0t)s.kct(t);for(const i of t){const e=this.A0t.get(i);if(this.A0t.delete(i),e)for(const{resolve:h}of e.udt.values())h(!0)}}ldt(t){this._0t.push({promise:t,cdt:this.W1t()})}fdt(){x.Nr(this._0t)}ddt(){const s=this.W1t();this._0t=this._0t.filter(t=>t.cdt<=s)}pdt(){const t=Promise.all(this._0t.map(t=>t.promise));return this._0t=[],t}qO(t){const s=t.toLowerCase();this.N0t.push(s),this.Hc.ZF(x.P9.R9.O9.mdt,null),this.N0t.pop();for(const e of this.Hc.LO().tdt())e.gdt()&&e.ydt()===s&&e.Mdt();const i=this.D0t.get(s);i&&(i.resolve(),this.D0t.delete(s))}XO(t){const i=t.toLowerCase(),s=this.D0t.get(i);if(s)return s.promise;{let s=null,t=new Promise(t=>s=t);return this.D0t.set(i,{promise:t,resolve:s}),t}}wdt(){if(0===this.N0t.length)throw new Error("not in a signal");return this.N0t.at(-1)}Sdt(t){let s=this.A0t.get(t);return s||(s={Tdt:[],udt:new Map},this.A0t.set(t,s)),s}PF(t,s){const i=this.Sdt(t),e=s.toLowerCase();i.Tdt.push(e),this.Hc.ZF(t.nP().xdt().O9.bdt,t),i.Tdt.pop();for(const n of this.Hc.LO().tdt())n.vdt()&&n.ydt()===e&&n.Cdt(t);const h=i.udt.get(e);h&&(h.resolve(!1),i.udt.delete(e)),0===i.Tdt.length&&0===i.udt.size&&this.A0t.delete(t)}kF(t,s){const i=this.Sdt(t),e=s.toLowerCase(),h=i.udt.get(e);if(h)return h.promise;{let s=null,t=new Promise(t=>s=t);return i.udt.set(e,{promise:t,resolve:s}),t}}Idt(t){const s=this.Sdt(t);if(s&&0!==s.Tdt.length)return s.Tdt.at(-1);throw new Error("not in a signal")}VH(){return{groups:this.Gdt(),cnds:this.Edt(),acts:this._dt(),vars:this.Ndt(),waits:this.Ddt()}}YH(t){this.Adt(t.groups),this.Ldt(t.cnds),this.Odt(t.acts),this.Rdt(t.vars),this.Pdt(t.waits)}Gdt(){const t={};for(const s of this.T1t())t[s._V().toString()]=s.kdt();return t}Adt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.w1t(e);h&&h.Fdt(i)}}Edt(){const t={};for(const[s,i]of this.c0t){const e=i.VH();e&&(t[s.toString()]=e)}return t}Ldt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,n]of this.c0t)n.YH(s.get(h)||null)}_dt(){const t={};for(const[s,i]of this.f0t){const e=i.VH();e&&(t[s.toString()]=e)}return t}Odt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,n]of this.f0t)n.YH(s.get(h)||null)}Ndt(){const t={};for(const[s,i]of this.p0t)i.jdt()||!i.oV()&&!i.O2()||(t[s.toString()]=i.qit());return t}Rdt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.a1t(e);h&&h.Oet(i)}}Ddt(){return this.E0t.filter(t=>!t.zdt()).map(t=>t.VH())}Pdt(t){this.H9();for(const s of t){const i=x.$1t.Bdt(this,s);i&&this.E0t.push(i)}}Udt(){return[...this.Hc.L3().Oq()].map(t=>t.B7()).filter(t=>t).map(t=>t.Wdt())}Qdt(t){for(;t;){const s=t.e1t();if(s instanceof x.Jdt)return s;t=s}return null}L0t(t,s){Array.isArray(s)||(s=[]);const i=this.OO(t.toLowerCase());if(!i)return null;if(!i.zl())return i.RO();const e=i.Vdt();if(s.length<e.length)for(s=s.slice(0);s.push(e[s.length].q0t()),s.length<e.length;);const h=i.kO();return h.BO(h.FO(),!1,i.WO(),i.RO(),...s)}}}{const uo=self.Os;uo.O0t=class extends uo.Zh{constructor(t,s){super(),this.aft=t,this.Hc=t.b4(),this.hn=s[0],this.Ydt=[],this.Hdt=new Map,this.qdt=new Map,this.Zdt=new Map,this.Xdt=!1,this.Kdt=[],this.$dt=[],this.tpt=new Set;for(const i of s[1])this.spt(i,null,this.Ydt);this.ipt=this.Hc.mq()?{type:"sheet",name:this.hn,ept:0,children:[]}:null}$h(){this.aft=null,this.Hc=null}spt(t,s,i){switch(t[0]){case 0:case 3:this.hpt(t,s,i);break;case 1:this.npt(t,s,i);break;case 2:this.rpt(t,s,i);break;case 4:this.opt(t,s);break;case 5:this.apt(t,s,i);break;case 6:this.upt(t,s);break;default:throw new Error("invalid event type")}}hpt(t,s,i){const e=uo.lpt.Ob(this,s,t);if(e.rft()){i.push(e);const h=e.cpt();for(let t=0,s=h.length;t<s;++t)h[t].fpt()&&this.dpt(e,t)}else e.fpt()?this.dpt(e,0):i.push(e)}opt(t,s){const i=uo.Jdt.ppt(this,s,t);this.aft.W0t(i)}upt(t,s){const i=uo.Jdt.mpt(this,s,t);this.aft.W0t(i)}npt(t,s,i){const e=uo.gpt.Ob(this,s,t);i.push(e)}rpt(t,s,i){const e=uo.ypt.Ob(this,s,t);i.push(e)}apt(t,s,i){const e=uo.Mpt.Ob(this,s,t);i.push(e)}dpt(h,n){h.rft()||this.aft.R0t(h);const r=h.K0t(n),o=r.wpt(),a=r.cF();if(r.Spt()){let t=this.qdt.get(a),s=(t||(t=new Map,this.qdt.set(a,t)),r.Tpt().toLowerCase()),i=t.get(o),e=(i||(i=new Map,t.set(o,i)),i.get(s));e||(e=[],i.set(s,e)),e.push([h,n])}else{let t=this.Hdt.get(a),s=(t||(t={bpt:new Map,xpt:new Map},this.Hdt.set(a,t)),r.nz()),i,e=(s?(i=t.xpt.get(s))||(i=new Map,t.xpt.set(s,i)):i=t.bpt,i.get(o));e||(e=[],i.set(o,e)),e.push([h,n])}}P0t(){const i=this.Ydt;for(let t=0,s=i.length;t<s;++t){const e=t<s-1&&i[t+1]instanceof uo.lpt&&i[t+1].vpt();i[t].P0t(e)}}Cpt(t){this.Kdt.push(t)}m9(){uo.Nr(this.$dt),this.Ipt(this),this.tpt.clear()}Ipt(t){const s=t.$dt,i=t.tpt;for(const e of this.Kdt){const h=e.Gpt();e.Ept()&&t!==h&&!i.has(h)&&(i.add(h),h.Ipt(t),s.push(h))}}R1t(){return this.$dt}LO(){return this.aft}b4(){return this.Hc}zc(){return this.hn}_pt(t,s){this.Zdt.set(s,t)}Npt(t){return this.Zdt.get(t)||null}C1t(){this.Xdt=!1}uI(){if(!this.Xdt){const t=this.Hc,s=t.Dpt(),i=s?performance.now():0,e=(this.Xdt=!0,this.LO()),h=e.Z0t();for(const n of this.Ydt)n.uI(h),e.H1t(n.mW()),e.fdt(),t.GP();h.Xf(null),s&&(this.ipt.ept+=performance.now()-i)}}*A1t(){if(!this.Xdt){this.Xdt=!0;const t=this.Hc,s=this.LO(),i=s.Z0t();for(const e of this.Ydt)yield*e.A1t(i),s.H1t(e.mW()),s.fdt(),t.GP();i.Xf(null)}}L1t(e,h,n){if(!h)return this.Apt(e,h,null,null);{let t=h.cF(),s=!1,i=this.Apt(e,h,t,n);s=s||i;for(const r of t.d1t())i=this.Apt(e,h,r,n),s=s||i}}Apt(t,s,i,e){const h=this.Hdt.get(i);if(!h)return!1;const n=e?h.xpt.get(e):h.bpt;if(!n)return!1;const r=n.get(t);if(!r)return!1;let o=!1;for(const[a,u]of r){const l=this.Lpt(s,a,u);o=o||l}return o}*P1t(e,h,n){if(!h)return yield*this.Opt(e,h,null,null);{let t=h.cF(),s=!1,i=yield*this.Opt(e,h,t,n);s=s||i;for(const r of t.d1t())i=yield*this.Opt(e,h,r,n),s=s||i}}*Opt(t,s,i,e){const h=this.Hdt.get(i);if(!h)return!1;const n=e?h.xpt.get(e):h.bpt;if(!n)return!1;const r=n.get(t);if(!r)return!1;let o=!1;for(const[a,u]of r){let t;t=a.Rpt()?this.Lpt(s,a,u):yield*this.Ppt(s,a,u),o=o||t}return o}B1t(t,s,i){const e=s.cF(),h=this.qdt.get(e);if(!h)return!1;const n=h.get(t);if(!n)return!1;const r=n.get(i);if(!r)return!1;let o=!1;for(let t=0,s=r.length;t<s;++t){const a=r[t],u=this.Lpt(null,a[0],a[1]);o=o||u}return o}*U1t(t,s,i){const e=s.cF(),h=this.qdt.get(e);if(!h)return!1;const n=h.get(t);if(!n)return!1;const r=n.get(i);if(!r)return!1;let o=!1;for(let h=0,t=r.length;h<t;++h){let t=r[h],s=t[0],i=t[1],e;e=s.Rpt()?this.Lpt(null,s,i):yield*this.Ppt(null,s,i),o=o||e}return o}Lpt(t,s,i){let e=this.Hc,h=this.aft,n=h.jO(),r=h.VO(),o=h.W1t(),a=!1;n&&h.Z1t(n.FO()),h.Z1t(s.FO());const u=1<o,l=(u&&h.s1t().yW(),r.yW(s));if(t){const f=s.cpt()[i].cF(),d=f.yP();d.Kct(t),t.xF()&&t.kpt()}let c=!0;if(s.$j()){const p=s.Fpt();for(let t=0,s=p.length;t<s;++t)if(!p[t].jpt(l)){c=!1;break}}return c&&(s.rft()?s.zpt(l,i):s.uI(l),a=l.Aft()),r._W(),u&&h.s1t()._W(),h.vW(s.FO()),n&&h.vW(n.FO()),n||1!==o||(h.fdt(),h.wF())||e.GP(),a}*Ppt(t,s,i){let e=this.Hc,h=this.aft,n=h.jO(),r=h.VO(),o=h.W1t(),a=!1;n&&h.Z1t(n.FO()),h.Z1t(s.FO());const u=1<o,l=(u&&h.s1t().yW(),r.yW(s));if(t){const f=s.cpt()[i].cF(),d=f.yP();d.Kct(t),t.xF()&&t.kpt()}let c=!0;if(s.$j()){const p=s.Fpt();for(let t=0,s=p.length;t<s;++t)if(!(yield*p[t].Bpt(l))){c=!1;break}}return c&&(s.rft()?yield*s.Upt(l,i):yield*s.A1t(l),a=l.Aft()),r._W(),u&&h.s1t()._W(),h.vW(s.FO()),n&&h.vW(n.FO()),n||1!==o||(h.fdt(),h.wF())||e.GP(),a}Wdt(){return this.ipt}}}{let l=function(t,s){return!0};l;const lo=self.Os,co=[];function*j(t,s){return!0}lo.lpt=class extends lo.Zh{constructor(t,s,i){super(),this.r7=t,this.Hc=t.b4(),this.Wpt=s,this.Qpt=null,this.Fct=this.Hc.LO().VO(),this.Jpt=[],this.Vpt=[],this.Ypt=!1,this.Hpt=!1,this.qpt=!1,this.Zpt=!1,this.Xpt=!!i[2],this.Kpt=!1,this.$pt=null,this.tmt=[],this.pht=[],this.smt=[],this.imt=l,this.emt=j,this.hmt=!1,this.nmt=!1,this.rmt="",this.omt=!1,this.amt=null,this.ipt=null,this.qJ=i[4],this.umt=i[5],this.r7._pt(this,this.umt),this.lmt=this.Hc.mq()?{cmt:i[3][0],fmt:i[3][1],dmt:!1,pmt:!1,mmt:!1,gmt:!1}:null,this.LO().z0t(this),3===i[0]&&this.ymt(i[1]);let e=0;for(const h of i[6]){const n=lo.Mmt.Ob(this,h,e++);this.tmt.push(n),this.wmt(n.cF())}e=0;for(const r of i[7]){const o=lo.Smt.Ob(this,r,e++);this.pht.push(o)}if(9===i.length){const a=i[8];for(const u of a)this.r7.spt(u,this,this.smt)}this.tmt.length&&(this.Kpt=null===this.tmt[0].cF()&&this.tmt[0].wpt()===lo.P9.R9.O9.Tmt),0===this.tmt.length&&(this.tmt=co),0===this.pht.length&&(this.pht=co),0===this.smt.length&&(this.smt=co)}static Ob(t,s,i){return lo.Kh(lo.lpt,t,s,i)}ymt(t){this.hmt=!0,this.nmt=!!t[0],this.omt=this.nmt,this.rmt=t[1].toLowerCase(),this.amt=[],this.LO().F0t(this),this.Hc.mq()&&(this.ipt={type:"group",name:t[1],ept:0,children:[]})}bmt(t){this.amt.push(t)}xmt(t,s){for(const i of t.s9().z9())s.includes(i)||s.push(i)}vmt(t,s){if(t)if(s.includes(t)||s.push(t),t.TV())for(const i of t.Cmt())i.xF()&&this.xmt(i,s);else t.xF()&&this.xmt(t,s)}wmt(t){this.vmt(t,this.Jpt)}Imt(t){this.vmt(t,this.Vpt)}Gmt(){this.Jpt=this.Hc.SV()}P0t(t){this.Zpt=!!t,this.Emt(),this._mt();for(const s of this.tmt)s.P0t();if(0<this.pht.length){let t=!1;for(const e of this.pht)e.P0t(),e.Nmt()&&(t=!0);t?(this.imt=this.Dmt,this.emt=this.Amt):(this.imt=this.Lmt,this.emt=this.Omt)}const i=this.smt;for(let t=0,s=i.length;t<s;++t){const h=t<s-1&&i[t+1]instanceof lo.lpt&&i[t+1].vpt();i[t].P0t(h)}this.lmt&&this.Rmt(),this.ipt&&this.Pmt().Wdt().children.push(this.ipt)}Wdt(){return this.ipt}Pmt(){let t=this.$j();for(;t;){if(t.S1t())return t;t=t.$j()}return this.r7}Rmt(){const t=this.lmt;t.dmt=this.tmt.every(t=>t.Rpt()),t.pmt=this.pht.every(t=>t.Rpt()),t.mmt=this.smt.every(t=>t.Rpt()),t.gmt=t.dmt&&t.pmt&&t.mmt}kmt(){let t=this;for(;t.Rmt(),t=t.$j(););}Emt(){if(this.S1t()){let t=this.$j();for(this.qpt=!0;t;){if(!t.S1t()){this.qpt=!1;break}t=t.$j()}}}Fmt(){const t=this.Hc.SV();if(this.Jpt===t)this.Vpt=t;else{this.Vpt=lo.Ur(this.Jpt);let t=this.$j();for(;t;){for(const i of t.Jpt)this.Imt(i);t=t.$j()}const s=this.LO();this.Jpt=s.Y0t(this.Jpt),this.Vpt=s.Y0t(this.Vpt)}}_mt(){if(this.jmt()){this.$pt=[];let t=this.$j();for(;t;)this.$pt.push(t),t=t.$j();this.$pt.reverse()}}zmt(){this.Hpt=!0,this.Wpt&&this.Wpt.zmt()}zft(){return this.Hpt}mW(){return this.Jpt}FO(){return this.Ypt||(this.Ypt=!0,this.Fmt()),this.Vpt}Bmt(t){return this.Jpt.includes(t)}Fpt(){return this.$pt}B7(){return this.r7}LO(){return this.r7.LO()}b4(){return this.Hc}$j(){return this.Wpt}Umt(t){this.Qpt=t}e1t(){return this.Qpt||this.Wpt}Wmt(){return this.umt}Qmt(){return this.lmt&&this.lmt.fmt}Jmt(){return this.Qmt()&&this.lmt.cmt}Vmt(t){this.lmt.cmt=!!t,this.kmt()}S1t(){return this.hmt}Ymt(){return this.qpt}vpt(){return this.Kpt}Hmt(){return this.Zpt}j0t(){return this.rmt}kdt(){return this.omt}x1t(){this.Fdt(this.nmt)}Fdt(t){if(t=!!t,!this.hmt)throw new Error("not a group");if(this.omt!==t){this.omt=t;for(const s of this.amt)s.qmt();if(this.amt.length){const i=this.Hc.X3(),e=i.B7();e&&e.m9()}}}_V(){return this.qJ}rft(){return this.Xpt}fpt(){return this.tmt.length&&this.tmt[0].fpt()}Zmt(){return this.Qpt&&this.Qpt instanceof lo.Jdt}jmt(){return this.Zmt()||this.tmt.some(t=>t.fpt())}cpt(){return this.tmt}Bft(){return this.tmt.length}K0t(t){if((t=Math.floor(t))<0||t>=this.tmt.length)throw new RangeError("invalid condition index");return this.tmt[t]}Xmt(t){return this.K0t(t)}Kmt(t){let s=t.iO();if(0!==s){--s;const i=t.$mt()?t.tgt():t.cF();for(;0<=s;--s){const e=this.tmt[s];if(i===e.cF()||e.$mt()&&e.tgt()===i)return!1}}return!0}sgt(){return this.pht}igt(){return this.pht.length}t1t(t){if((t=Math.floor(t))<0||t>=this.pht.length)throw new RangeError("invalid action index");return this.pht[t]}egt(s){s=Math.floor(s);const t=this.pht.find(t=>t.hgt()===s);if(t)return t;throw new RangeError("invalid action debug index")}ngt(t){return 0<=(t=Math.floor(t))&&t<this.pht.length}rgt(){return this.smt}h1t(){return this.smt.filter(t=>t instanceof lo.gpt)}jpt(i){i.Ift(this);let e=this.tmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const n=e[t];if(i.Eft(t),n.wz())throw new Error("trigger cannot be used as sub-event to a loop");if(n.uI())h=!0;else if(!this.Xpt)return!1}return!this.Xpt||h}zpt(t,s){t.Ift(this),t.Eft(s),this.tmt[s].uI()&&(this.imt(t,0)&&this.ogt(t),t.Dft(!0))}*Bpt(i){i.Ift(this);let e=this.tmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const n=e[t];if(i.Eft(t),n.wz())throw new Error("trigger cannot be used as sub-event to a loop");if(n.Rpt()?n.uI():yield*n.A1t())h=!0;else if(!this.Xpt)return!1}return!this.Xpt||h}*Upt(t,s){t.Ift(this),t.Eft(s);let i=this.tmt[s];if(i.Rpt()?i.uI():yield*i.A1t())(this.agt()?this.imt(t,0):yield*this.emt(t,0))&&(this.ugt()?this.ogt():yield*this.lgt()),t.Dft(!0)}uI(t){t.Ift(this),this.Kpt||t.Lft(!1),this.Xpt?this.cgt(t):this.fgt(t)}*A1t(t){(this.Jmt()||this.Hc.dgt())&&(yield this),t.Ift(this),this.Kpt||t.Lft(!1),this.Xpt?yield*this.pgt(t):yield*this.mgt(t)}cgt(i){let e=this.tmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const n=e[t];if(!n.fpt()){i.Eft(t);const r=n.uI();h=h||r}}i.Dft(h),h&&(this.imt(i,0)&&this.ogt(i),this.Zpt)&&i.Lft(!0)}*pgt(i){let e=this.tmt,h=0===e.length;for(let s=0,t=e.length;s<t;++s){const n=e[s];if(!n.fpt()){i.Eft(s);let t;t=n.Rpt()?n.uI():yield*n.A1t(),h=h||t}}if(i.Dft(h),h)(this.agt()?this.imt(i,0):yield*this.emt(i,0))&&(this.ugt()?this.ogt():yield*this.lgt()),this.Zpt&&i.Lft(!0)}fgt(i){const e=this.tmt;for(let t=0,s=e.length;t<s;++t){const h=e[t],n=(i.Eft(t),h.uI());if(!n)return void i.Dft(!1)}i.Dft(!0),this.imt(i,0)&&this.ogt(i),i.Aft()&&this.Zpt&&i.Lft(!0)}*mgt(i){const e=this.tmt;for(let t=0,s=e.length;t<s;++t){const h=e[t];i.Eft(t);if(!(h.Rpt()?h.uI():yield*h.A1t()))return void i.Dft(!1)}i.Dft(!0);(this.agt()?this.imt(i,0):yield*this.emt(i,0))&&(this.ugt()?this.ogt():yield*this.lgt()),i.Aft()&&this.Zpt&&i.Lft(!0)}Lmt(i,e){const h=this.pht;for(let t=e,s=h.length;t<s;++t){const n=h[t];i.Nft(t),n.uI()}return!0}*Omt(i,e){const h=this.pht;for(let t=e,s=h.length;t<s;++t){const n=h[t];i.Nft(t),n.Rpt()?n.uI():yield*n.A1t()}return!0}Dmt(i,e){const h=this.LO(),n=this.pht;for(let t=e,s=n.length;t<s;++t){const r=n[t],o=(i.Nft(t),r.uI());if(r.ggt()&&!0===o)return!1;r.ygt()&&o instanceof Promise&&h.ldt(o)}return!0}*Amt(i,e){const h=this.LO(),n=this.pht;for(let s=e,t=n.length;s<t;++s){const r=n[s];i.Nft(s);let t;if(t=r.Rpt()?r.uI():yield*r.A1t(),r.ggt()&&!0===t)return!1;r.ygt()&&t instanceof Promise&&h.ldt(t)}return!0}Mgt(t){this.imt(t,t._ft())&&this.ogt()}*wgt(t){(yield*this.emt(t,t._ft()))&&(yield*this.lgt())}ogt(){if(this.smt.length){const t=this.S1t()&&this.Hc.Dpt(),s=t?performance.now():0,i=this.Fct,e=i.yW(this);this.Hpt?this.Sgt(e):this.Tgt(e),i._W(),t&&(this.ipt.ept+=performance.now()-s)}}Sgt(e){const h=this.hmt,n=this.qpt,r=this.LO(),o=this.smt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],u=a.mW(),l=!n||!h&&t<i;l&&r.bW(u),a.uI(e),l?r.vW(u):r.H1t(u)}}Tgt(i){const e=this.smt;for(let t=0,s=e.length;t<s;++t)e[t].uI(i)}*lgt(){if(this.smt.length){const t=this.Fct,s=t.yW(this);this.Hpt?yield*this.bgt(s):yield*this.xgt(s),t._W()}}*bgt(e){const h=this.hmt,n=this.qpt,r=this.LO(),o=this.smt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],u=a.mW(),l=!n||!h&&t<i;l&&r.bW(u),yield*a.A1t(e),l?r.vW(u):r.H1t(u)}}*xgt(i){const e=this.smt;for(let t=0,s=e.length;t<s;++t)yield*e[t].A1t(i)}xW(i,e){e.Cft();const h=this.tmt;if(!this.rft())for(let t=i.Gft()+1,s=h.length;t<s;++t){const n=h[t],r=(e.Eft(t),n.uI());if(!r)return!1}return this.imt(e,0)&&this.ogt(e),!0}*vgt(i,e){e.Cft();const h=this.tmt;if(!this.rft())for(let t=i.Gft()+1,s=h.length;t<s;++t){const n=h[t];e.Eft(t);if(!(n.Rpt()?n.uI():yield*n.A1t()))return!1}return(this.agt()?this.imt(e,0):yield*this.emt(e,0))&&(this.ugt()?this.ogt():yield*this.lgt()),!0}Rpt(){return!this.Jmt()&&!this.Hc.dgt()&&this.lmt.gmt}agt(){return!this.Hc.dgt()&&this.lmt.pmt}ugt(){return!this.Hc.dgt()&&this.lmt.mmt}Cgt(i){if(this.$j()){const e=this.Fpt();for(let t=0,s=e.length;t<s;++t)if(!e[t].jpt(i))return!1}return!0}*Igt(i){if(this.$j()){const e=this.Fpt();for(let t=0,s=e.length;t<s;++t)if(!(yield*e[t].Bpt(i)))return!1}return!0}Ggt(t,s,i){if(0<s.length)if(i){const e=s.map(t=>t.Ks(0));t.s1t().yW(),this.Qpt.Egt(e)}else this.Qpt._gt(s);else i&&t.s1t().yW()}Ngt(t,s,i,e){let h,n,r=0<t.length,o=null,a=this.Hc,u=this.Fct,l=a.LO(),c=this.Qpt,f=c.ygt(),d=l.J1t(),p=1<d;if(this.Ggt(l,s,p),r&&(i?l.bW(t):l.Z1t(t)),null!==e){if(e.Dgt){const g=i?e.Dgt.yP():e.Dgt.q1t().Oct(),y=e.Agt.yP();y.$ct(g.gP()),y.hft(),i||e.Agt.Lgt()}else if(e.Ogt){const M=e.Ogt.yP();M.$ct(e.Rgt),M.hft()}e.Pgt&&(o=l.X1t(t))}const m=u.yW(this);return i&&m.Uft(t),this.Cgt(m)&&(m.Ift(this),f&&([n,h]=c.kgt()),this.fgt(m),f)&&c.Fgt(n),u._W(),p&&l.s1t()._W(),null!==o&&l.vW(o),r&&l.vW(t),l.V1t(),f||l.ddt(),h}*jgt(t,s,i,e){let h,n,r=((this.Jmt()||this.Hc.dgt())&&(yield this),0<t.length),o=null,a=this.Hc,u=this.Fct,l=a.LO(),c=this.Qpt,f=c.ygt(),d=l.J1t(),p=1<d;if(this.Ggt(l,s,p),r&&(i?l.bW(t):l.Z1t(t)),null!==e){if(e.Dgt){const g=i?e.Dgt.yP():e.Dgt.q1t().Oct(),y=e.Agt.yP();y.$ct(g.gP()),y.hft(),i||e.Agt.Lgt()}else if(e.Ogt){const M=e.Ogt.yP();M.$ct(e.Rgt),M.hft()}e.Pgt&&(o=l.X1t(t))}const m=u.yW(this);return i&&m.Uft(t),(yield*this.Igt(m))&&(m.Ift(this),f&&([n,h]=c.kgt()),yield*this.mgt(m),f)&&c.Fgt(n),u._W(),p&&l.s1t()._W(),null!==o&&l.vW(o),r&&l.vW(t),l.V1t(),f||l.ddt(),h}zgt(t,s){const i=this.FO(),e=0<i.length,h=this.Hc,n=this.Fct,r=h.LO(),o=r.J1t(),a=1<o,u=(a&&r.s1t().yW(),this.Qpt.Egt(t),e&&(s?r.bW(i):r.Z1t(i)),n.yW(this));this.Cgt(u)&&(u.Ift(this),this.fgt(u)),n._W(),a&&r.s1t()._W(),e&&r.vW(i),r.V1t(),r.ddt()}*Bgt(t,s){(this.Jmt()||this.Hc.dgt())&&(yield this);const i=this.FO(),e=0<i.length,h=this.Hc,n=this.Fct,r=h.LO(),o=r.J1t(),a=1<o,u=(a&&r.s1t().yW(),this.Qpt.Egt(t),e&&(s?r.bW(i):r.Z1t(i)),n.yW(this));(yield*this.Igt(u))&&(u.Ift(this),yield*this.mgt(u)),n._W(),a&&r.s1t()._W(),e&&r.vW(i),r.V1t(),r.ddt()}BO(t,s,i,e,...h){let n,r,o=0<t.length,a=this.Hc,u=this.Fct,l=a.LO(),c=this.Qpt,f=c.ygt(),d=l.J1t(),p=1<d,m=(p&&l.s1t().yW(),0<h.length&&this.Qpt.Egt(h),o&&(s?l.bW(t):l.Z1t(t)),u.yW(this));return m.kft(i,e),u.dft(m),a.SW(!1),this.Cgt(m)&&(m.Ift(this),f&&([r,n]=c.kgt()),this.fgt(m),f)&&c.Fgt(r),a.SW(!0),u._W(),u.pft(),p&&l.s1t()._W(),o&&l.vW(t),l.V1t(),f||l.ddt(),n||m.Fft()}}}{let e=self.Os,t=[],s=!1;e.Mpt=class extends e.Zh{constructor(t,s,i){super();const e=t.b4(),h=t.LO(),n=(this.r7=t,this.aft=h,this.Hc=t.b4(),this.Wpt=s,e.Ugt(i[1]));this.Wgt=n,this.umt=i[2],this.r7._pt(this,this.umt),this.lmt=e.mq()?{cmt:i[3][0],fmt:i[3][1]}:null}static Ob(t,s,i){return e.Kh(e.Mpt,t,s,i)}P0t(){const t=this.Wgt,s=this.Hc.LO().n1t(this);this.Wgt=t.bind(null,this.Hc.DR(),s)}$j(){return this.Wpt}e1t(){return this.Wpt}B7(){return this.r7}Wmt(){return this.umt}Qmt(){return this.lmt&&this.lmt.fmt}Jmt(){return this.Qmt()&&this.lmt.cmt}Vmt(t){this.lmt.cmt=!!t}vpt(){return!1}mW(){return t}FO(){return this.Wpt?this.Wpt.FO():t}uI(t){t.Ift(this),this.aft.ldt(this.Qgt())}async Qgt(){try{await this.Wgt()}catch(t){console.error(`Unhandled exception running script %c${this.B7().zc()}, event ${this.Wmt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),s||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),s=!0)}}*A1t(t){t.Ift(this),(this.Jmt()||this.Hc.dgt())&&(yield this),this.uI(t)}Rpt(){return!this.Jmt()&&!this.Hc.dgt()}static Jgt(){return s}static Vgt(){s=!0}}}{const fo=self.Os;fo.Jdt=class extends fo.Zh{constructor(t,s,i){super(),this.r7=t,this.Hc=t.b4(),this.Wpt=s,this.Ygt=0,this.Hgt="",this.qgt=0,this.Zgt=[],this.Xgt=!0,this.Kgt="",this.Nct=null,this.$gt=!1,this.tyt=[],this.syt=!1,this.iyt=!1,this.eyt=0,this.hyt=-1,this.nyt=new Map,this.ryt=fo.lpt.Ob(t,s,i),this.ryt.Umt(this)}oyt(t){this.Ygt=0,this.Hgt=t[0],this.qgt=t[1],this.Zgt=t[2].map(t=>fo.gpt.Ob(this.r7,this,t)),this.Xgt=t[3],this.iyt=t[4],this.syt=t[5]}ayt(t){this.Ygt=1,this.Kgt=t[1],this.Nct=this.Hc.Z8(t[2]),this.ryt.wmt(this.Nct),this.Hgt=this.Nct.zc()+"."+this.Kgt,this.qgt=t[3],this.Zgt=t[4].map(t=>fo.gpt.Ob(this.r7,this,t)),this.Xgt=t[5],this.iyt=t[6],this.syt=t[7],this.Nct.uyt(this)}static ppt(t,s,i){const e=fo.Kh(fo.Jdt,t,s,i),h=i[1];return e.oyt(h),e}static mpt(t,s,i){const e=fo.Kh(fo.Jdt,t,s,i),h=i[1];return e.ayt(h),e}k0t(){if(this.Nct&&this.Nct.TV())for(const t of this.Nct.Cmt())if(t.lyt(this.Kgt)){this.$gt=!0;break}}P0t(){for(const t of this.Zgt)t.P0t();this.ryt.P0t(!1)}Q0t(){return this.Ygt}h1t(){return this.Zgt}Vdt(){return this.Zgt}PO(){return this.Zgt.length}cyt(t){this.tyt.push(t)}fyt(){return this.tyt}_gt(i){const e=this.Zgt;for(let t=0,s=e.length;t<s;++t)e[t].Oet(i[t].Ks(0))}Egt(i){const e=this.Zgt;for(let t=0,s=e.length;t<s;++t)e[t].Oet(i[t])}dyt(){return this.Zgt.map(t=>t.qit())}$j(){return this.Wpt}e1t(){return this.Wpt}J0t(){return this.Hgt}pyt(){return this.Kgt}myt(){return this.$gt}WO(){return this.qgt}cF(){return this.Nct}zl(){return this.Xgt}RO(){switch(this.qgt){case 0:return null;case 2:return"";default:return 0}}kO(){return this.ryt}UO(){return this.syt}ygt(){return this.iyt}kgt(){const t=this.eyt++;this.hyt=t;let s,i=new Promise(t=>s=t);return this.nyt.set(t,{resolve:s,gyt:0}),[t,i]}Fgt(t){const s=this.nyt.get(t);0===s.gyt&&(s.resolve(),this.nyt.delete(t)),this.hyt=-1}yyt(){const t=this.nyt.get(this.hyt);return t.gyt++,this.hyt}Myt(t){this.hyt=t;const s=this.nyt.get(t);s.gyt--}wyt(t,s){const i=new Map,e=[];for(const h of this.Nct.yP().gP()){const n=h.cF();if(n.lyt(this.Kgt)){const r=i.get(n);Array.isArray(r)?r.push(h):i.set(n,[h])}else e.push(h)}if(0<e.length&&this.ryt.Ngt(t,s,this.syt,{Ogt:this.Nct,Rgt:e}),0<i.size)for(const[o,a]of i){const u=o.Syt(this.Kgt).kO(),l=[...new Set([...t,...u.mW()])];u.Ngt(l,s,this.syt,{Ogt:o,Rgt:a})}}*Tyt(t,s){const i=new Map,e=[];for(const h of this.Nct.yP().gP()){const n=h.cF();if(n.lyt(this.Kgt)){const r=i.get(n);Array.isArray(r)?r.push(h):i.set(n,[h])}else e.push(h)}if(0<e.length&&(yield*this.ryt.jgt(t,s,this.syt,{Ogt:this.Nct,Rgt:e})),0<i.size)for(const[o,a]of i){const u=o.Syt(this.Kgt).kO(),l=[...new Set([...t,...u.mW()])];yield*u.jgt(l,s,this.syt,{Ogt:o,Rgt:a})}}}}{const po=self.Os,mo=[];po.gpt=class extends po.Zh{constructor(t,s,i){super();const e=t.LO();this.r7=t,this.aft=e,this.Hc=t.b4(),this.Wpt=s,this.T0t=e.s1t(),this.hn=i[1],this.ef=i[2],this.byt=i[3],this.i2=!!i[4],this.xyt=!!i[5],this.vyt=s instanceof po.Jdt,this.qJ=i[6],this.Cyt=this.Hc.r1t(i[8]),this.Iyt=t=>this.Oet(t),this.Gyt=()=>this.qit(),this.Eyt=!this.Wpt||this.i2||this.xyt,this.lht=this.byt,this._yt=-1,this.Nyt()&&(this.lht=this.lht?1:0),!this.Dyt()||this.O2()||this.jdt()||(this._yt=e.H0t(this)),e.V0t(this)}static Ob(t,s,i){return po.Kh(po.gpt,t,s,i)}P0t(){if(this.Dyt()&&!this.O2()&&!this.jdt()&&!this.Ayt()){const t=this.aft.Qdt(this);t&&t.cyt(this)}}zc(){return this.hn}r1t(){return this.Cyt}$j(){return this.Wpt}e1t(){return this.$j()}oV(){return!this.$j()}Dyt(){return!this.oV()}Ayt(){return this.vyt}O2(){return this.i2}jdt(){return this.xyt}oe(){return 0===this.ef}Me(){return 1===this.ef}Nyt(){return 2===this.ef}vpt(){return!1}_V(){return this.qJ}q0t(){return this.byt}mW(){return mo}uI(t){!this.Dyt()||this.O2()||this.jdt()||this.Oet(this.q0t())}Rpt(){return!0}*A1t(t){this.uI(t)}Oet(t){this.oe()?"number"!=typeof t&&(t=parseFloat(t)):this.Me()?"string"!=typeof t&&(t=t.toString()):this.Nyt()&&(t=t?1:0),this.Eyt?this.lht=t:this.T0t.Yft()[this._yt]=t}qit(){return this.Eyt?this.lht:this.T0t.Yft()[this._yt]}Lyt(){let t=this.qit();return this.Nyt()?!!t:t}y1t(){this.lht=this.byt}o1t(){return{configurable:!1,enumerable:!0,get:this.Gyt,set:this.Iyt}}}}{const go=self.Os,yo=[];go.ypt=class extends go.Zh{constructor(t,s,i){super();const e=t.LO();this.r7=t,this.aft=e,this.Hc=t.b4(),this.Wpt=s,this.Oyt=null,this.Ryt=i[1],this.Zf=!0}static Ob(t,s,i){return go.Kh(go.ypt,t,s,i)}P0t(){this.Oyt=this.aft.p9(this.Ryt),this.r7.Cpt(this);let t=this.$j();for(;t;)t instanceof go.lpt&&t.S1t()&&t.bmt(this),t=t.$j();this.qmt(),this.Hc.mq()&&this.r7.Wdt().children.push(this.Oyt.Wdt())}$j(){return this.Wpt}mW(){return yo}Gpt(){return this.Oyt}uI(t){const s=!!this.$j(),i=this.Hc.SV();s&&this.aft.Z1t(i),this.Oyt.uI(),s&&this.aft.vW(i)}*A1t(t){const s=!!this.$j(),i=this.Hc.SV();s&&this.aft.Z1t(i),yield*this.Oyt.A1t(),s&&this.aft.vW(i)}Rpt(){return!1}Ept(){return this.Zf}qmt(){let t=this.$j();for(;t;){if(t instanceof go.lpt&&t.S1t()&&!t.kdt())return void(this.Zf=!1);t=t.$j()}this.Zf=!0}}}{let a=function(t,s){return s<=t?t%s:(t<0&&(t<=-s&&(t%=s),t<0)&&(t+=s),t)};a;const Mo=self.Os;Mo.Pyt=class extends Mo.Zh{constructor(t){super(),this.gT=t,this.Hc=t.b4()}P0t(){}static kyt(t,s){const i=s[0],e=[xo,To,bo,vo,wo,So];return Mo.Kh(e[i],t,s)}};class wo extends Mo.Pyt{constructor(t,s){super(t),this.Fyt=this.Hc.jyt(),this.Wgt=this.Hc.Ugt(s[1]),this.Wgt!==Mo.P9.R9.Ght.random&&this.Wgt!==Mo.P9.R9.Ght.zyt||this.gT.Byt()}Uyt(){return this.Fyt.Wyt(this.Wgt,this.Fyt)}}class So extends Mo.Pyt{constructor(t,s){super(t),this.Qyt=null,this.Hgt=s[1],this.gT.Byt()}P0t(){const t=this.Hc.LO(),s=(this.Qyt=t.OO(this.Hgt),this.Hgt=null,this.gT.kO()),i=this.Qyt.kO();this.Jyt=[...new Set([...s.FO(),...i.FO()])],this.Jyt=t.Y0t(this.Jyt)}Uyt(){const t=this.Qyt;if(t.zl()){const s=t.kO();return Mo.lpt.prototype.BO.bind(s,this.Jyt,t.UO(),t.WO(),t.RO())}{const i=t.RO();return()=>i}}}class To extends Mo.Pyt{constructor(t,s){super(t),this.Nct=this.Hc.Z8(s[1]),this.Wgt=this.Hc.Ugt(s[2]),this.Vyt=!!s[3],this.Fct=this.Hc.LO().VO(),this.gT.Yyt(this.Nct)}Uyt(){return this.Nct.nP().Wyt(this.Wgt,this.Nct.iP().Y5())}Hyt(...t){const s=this.Nct,i=s.yP().Vct(),e=i.length;if(0===e)return this.Vyt?"":0;const h=a(this.gT.qyt(),e);return this.Fct.gW().Rft(s),this.Wgt.apply(i[h].Y5(),t)}Zyt(t,...s){const i=this.Nct,e=i.gP(),h=e.length;if(0===h)return this.Vyt?"":0;const n=a(t,h);return this.Fct.gW().Rft(i),this.Wgt.apply(e[n].Y5(),s)}}class bo extends Mo.Pyt{constructor(t,s){super(t),this.Nct=this.Hc.Z8(s[1]),this.Xyt=s[3],this.Vyt=!!s[2],this.gT.Yyt(this.Nct)}Kyt(){const t=this.Nct.yP().Vct(),s=t.length;if(0===s)return this.Vyt?"":0;const i=a(this.gT.qyt(),s);return t[i].$yt(this.Xyt)}tMt(){const t=this.Nct,s=t.yP().Vct(),i=s.length;if(0===i)return this.Vyt?"":0;const e=a(this.gT.qyt(),i),h=s[e],n=h.cF().sMt(t.iMt());return h.$yt(this.Xyt+n)}eMt(t){const s=this.Nct,i=s.gP(),e=i.length;if(0===e)return this.Vyt?"":0;let h=a(t,e),n=i[h],r=0;return s.TV()&&(r=n.cF().sMt(s.iMt())),n.$yt(this.Xyt+r)}}class xo extends Mo.Pyt{constructor(t,s){super(t),this.Nct=this.Hc.Z8(s[1]),this.hMt=this.Nct.hht(s[2]),this.nMt=this.Nct.Ost(s[2]),this.Wgt=this.Hc.Ugt(s[3]),this.Vyt=!!s[4],this.Fct=this.Hc.LO().VO(),this.gT.Yyt(this.Nct)}rMt(...t){const s=this.Nct,i=s.yP().Vct(),e=i.length;if(0===e)return this.Vyt?"":0;let h=a(this.gT.qyt(),e),n=(this.Fct.gW().Rft(s),i[h]),r=0;return s.TV()&&(r=n.cF().oMt(s.iMt())),this.Wgt.apply(n.eht()[this.nMt+r].Y5(),t)}aMt(t,...s){const i=this.Nct,e=i.gP(),h=e.length;if(0===h)return this.Vyt?"":0;let n=a(t,h),r=(this.Fct.gW().Rft(i),e[n]),o=0;return i.TV()&&(o=r.cF().oMt(i.iMt())),this.Wgt.apply(r.eht()[this.nMt+o].Y5(),s)}}class vo extends Mo.Pyt{constructor(t,s){super(t),this.uMt=null,this.lMt=s[1]}P0t(){this.uMt=this.Hc.LO().a1t(this.lMt)}cMt(){return this.uMt}}}{let n=function(t){const s=self.fMt[t];if(s)return s;throw new Error("invalid expression number")};n;const Co=self.Os;Co.dMt=class extends Co.Zh{constructor(t,s,i){super(),this.gT=t,this.Og=i,this.ef=s,this.Ks=null,this.pMt=!1,this.xyt=!1}static Ob(t,s,i){const e=s[0],h=[Io,Go,Oo,_o,Do,Eo,Ao,Io,_o,_o,Ro,Po,Oo,Fo,Go,Lo,No,ko,jo,zo,Bo,Uo];return Co.Kh(h[e],t,e,i,s)}P0t(){}Byt(){this.pMt=!0}Yyt(t){this.pMt||!t||t.nP().LR()||(this.pMt=!0)}mMt(){return this.pMt}iO(){return this.Og}b4(){return this.gT.b4()}kO(){return this.gT.kO()}jdt(){return this.xyt}gMt(){return 4===this.ef}};class Io extends Co.dMt{constructor(t,s,i,e){super(t,s,i),this.yMt=0;const h=e[1];this.MMt=h[0],this.wMt=[],this.SMt=null;for(let t=1,s=h.length;t<s;++t)this.wMt.push(Co.Pyt.kyt(this,h[t]));this.wMt.length?this.Ks=this.TMt:(this.Ks=n(this.MMt),this.xyt=!0)}bMt(t){if(t<0||t>=this.wMt.length)throw new RangeError("invalid numbered node");return this.wMt[t]}P0t(){for(const s of this.wMt)s.P0t();const t=n(this.MMt);this.wMt.length?this.SMt=t(this):this.SMt=t}qyt(){return this.yMt}TMt(t){return this.yMt=t,this.SMt()}}class Go extends Io{constructor(t,s,i,e){super(t,s,i,e),this.Ks=this.xMt,14===s&&(this.kO().Gmt(),this.gT instanceof Co.Smt)&&this.kO().zmt()}xMt(t){this.yMt=t;const s=this.SMt();return"string"==typeof s?s:""}vMt(){return n(this.MMt)()}}class Eo extends Io{constructor(t,s,i,e){super(t,s,i,e),2<=t.CMt()?this.Ks=this.QP:this.Ks=this.s4,this.xyt=!1}s4(t){this.yMt=t;const s=this.SMt(),i=this.b4().X3();return i.s4(s)}QP(t){const s=this.s4(t);return s?s.QP():null}}class _o extends Co.dMt{constructor(t,s,i,e){super(t,s,i),this.IMt=e[1],this.Ks=this.GMt,this.xyt=!0}GMt(){return this.IMt}}class No extends Co.dMt{constructor(t,s,i,e){super(t,s,i),this.EMt=e[1],this.Ks=this._Mt,this.xyt=!0}_Mt(){return this.EMt}}class Do extends Co.dMt{constructor(t,s,i,e){super(t,s,i),this.Nct=this.b4().Z8(e[1]),2<=t.CMt()?this.Ks=this.$R:this.Ks=this.cF;const h=this.kO();h.wmt(this.Nct),this.gT instanceof Co.Smt?h.zmt():h.$j()&&h.$j().zmt(),this.xyt=!0}cF(){return this.Nct}$R(){return this.Nct?this.Nct.$R():null}}class Ao extends Co.dMt{constructor(t,s,i,e){super(t,s,i),this.JJ=this.b4().L3()._q(e[1]),2<=t.CMt()?this.Ks=this.D3:this.Ks=this.O3,this.xyt=!0}O3(){return this.JJ}D3(){return this.JJ?this.JJ.D3():null}}class Lo extends Co.dMt{constructor(t,s,i,e){super(t,s,i),this.AX=this.b4().R$().jZ(e[1]),2<=t.CMt()?this.Ks=this.Xtt:this.Ks=this.wst,this.xyt=!0}wst(){return this.AX}Xtt(){return this.AX?this.AX.Xtt():null}}class Oo extends Co.dMt{constructor(t,s,i,e){super(t,s,i),this.NMt=e[1],this.Ks=this.DMt,this.xyt=!0}DMt(){return this.NMt}}class Ro extends Co.dMt{constructor(t,s,i,e){super(t,s,i),this.AMt=e[1];const h=this.gT.cF();this.gT instanceof Co.Mmt&&this.gT.O2()||!h||!h.TV()?(this.Ks=this.LMt,this.xyt=!0):(this.Ks=this.OMt,this.Byt())}LMt(){return this.AMt}OMt(t){t=t||0;let s=this.gT.cF(),i=s.yP(),e=i.gP(),h=null;if(e.length)h=e[t%e.length].cF();else if(i.Qct()){const n=i.Jct();h=n[t%n.length].cF()}else{if(!(0<s.wP()))return 0;{const r=s.gP();h=r[t%r.length].cF()}}return this.AMt+h.sMt(s.iMt())}}class Po extends Co.dMt{constructor(t,s,i,e){super(t,s,i),this.lMt=e[1],this.uMt=null,2<=t.CMt()?this.Ks=this.RMt:this.Ks=this.PMt,this.xyt=!0}P0t(){this.uMt=this.b4().LO().a1t(this.lMt)}PMt(){return this.uMt}RMt(){return null}}class ko extends Co.dMt{constructor(t,s,i,e){super(t,s,i),this.kMt=e[1],this.Qyt=null,2<=t.CMt()?this.Ks=this.FMt:this.Ks=this.jMt,this.xyt=!0}P0t(){this.Qyt=this.b4().LO().OO(this.kMt),this.kMt=null}jMt(){return this.Qyt}FMt(){return null}}class Fo extends Co.dMt{constructor(t,s,i,e){super(t,s,i),this.zMt=[],this.BMt=[],this.xyt=!0;for(let t=1,s=e.length;t<s;++t){const h=Co.dMt.Ob(this.gT,e[t],0);this.zMt.push(h),this.BMt.push(0),h.jdt()||(this.xyt=!1)}this.Ks=this.UMt}P0t(){for(const t of this.zMt)t.P0t()}UMt(){const i=this.zMt,e=this.BMt;for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Ks(0);return e}}class jo extends Co.dMt{constructor(t,s,i,e){super(t,s,i),this.WMt=e[1],this.Ks=this.Let,this.xyt=!0}Let(){return this.WMt}}class zo extends Co.dMt{constructor(t,s,i,e){super(t,s,i),this.QMt=e[1],this.Ks=this.JMt,this.xyt=!0}JMt(){return this.QMt}}class Bo extends Io{constructor(t,s,i,e){super(t,s,i,e),this.Ks=this.GF,this.xyt=!1}GF(){return this.SMt()}}class Uo extends Co.dMt{constructor(t,s,i,e){super(t,s,i),this.mut=this.b4().Lut().aut(e[1]),this.Ks=this.VMt,this.xyt=!0}VMt(){return this.mut.zc()}}}{let e=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Ks(0)};e;const Wo=self.Os,Qo=[],Jo=function(){};Wo.Mmt=class extends Wo.Zh{constructor(t,i,s){if(super(),this.ryt=t,this.Hc=t.b4(),this.Og=s,this.Wgt=this.Hc.Ugt(i[1]),this.YMt=0<i[3],this.HMt=2===i[3],this.qMt=!!i[4],this.ZMt=!!i[5],this.i2=!!i[6],this.qJ=i[7],this.XMt=this.ryt.rft(),this.Nct=null,this.hMt=null,this.nMt=-1,this.Fyt=null,this.uI=Jo,this.A1t=Jo,this.Ys=[],this.KMt=[],this.$Mt=!1,this.twt=null,this.swt=null,this.lmt=this.Hc.mq()?{cmt:i[8][0],iwt:i[8][1]}:null,-1===i[0]?this.Fyt=this.Hc.jyt():(this.Nct=this.Hc.Z8(i[0]),i[2]&&(this.hMt=this.Nct.hht(i[2]),this.nMt=this.Nct.Ost(i[2])),this.ryt.$j()&&this.ryt.$j().zmt()),10===i.length){let s=i[9];for(let t of s)this.Ys.push(Wo.dMt.Ob(this,t,this.Ys.length)),this.KMt.push(0)}0===this.Ys.length&&(this.Ys=Qo,this.KMt=Qo),this.ryt.LO().B0t(this)}static Ob(t,s,i){return Wo.Kh(Wo.Mmt,t,s,i)}P0t(){for(const t of this.Ys)t.P0t(),t.mMt()&&(this.$Mt=!0);this.HMt?(this.uI=this.ewt,this.A1t=this.hwt):this.Fyt?(this.nwt(),this.A1t=this.rwt):this.Nct.nP().LR()?(this.owt(),this.A1t=this.awt):this.i2?(this.uI=this.uwt,this.A1t=this.lwt):(this.uI=this.cwt,this.A1t=this.fwt)}nwt(){const t=this.Fyt,s=this.Fyt;this.dwt(t,s,this.pwt)}owt(){const t=this.Nct.nP(),s=this.Nct.iP().Y5();this.dwt(t,s,this.mwt)}dwt(t,s,i){const e=this.Wgt,h=this.ZMt,n=this.Ys;if(0===n.length){const r=t.Wyt(e,s);h?this.uI=function(){return Wo.xor(r(),h)}:this.uI=r}else if(1===n.length){const o=n[0];if(!h&&o.jdt())this.uI=t.gwt(e,s,o.Ks(0));else{const a=t.Wyt(e,s);this.uI=function(){return Wo.xor(a(o.Ks(0)),h)}}}else if(2===n.length){const u=n[0],l=n[1];if(!h&&u.jdt()&&l.jdt())this.uI=t.ywt(e,s,u.Ks(0),l.Ks(0));else{const c=t.Wyt(e,s);this.uI=function(){return Wo.xor(c(u.Ks(0),l.Ks(0)),h)}}}else if(3===n.length){const f=n[0],d=n[1],p=n[2];if(!h&&f.jdt()&&d.jdt()&&p.jdt())this.uI=t.Mwt(e,s,f.Ks(0),d.Ks(0),p.Ks(0));else{const m=t.Wyt(e,s);this.uI=function(){return Wo.xor(m(f.Ks(0),d.Ks(0),p.Ks(0)),h)}}}else this.uI=i}_V(){return this.qJ}wpt(){return this.Wgt}cF(){return this.Nct}nz(){return this.hMt}wwt(){return this.hMt?this.hMt.iz():this.Nct?this.Nct.nP():null}CMt(){const t=this.wwt();return t?t.Swt():1}kO(){return this.ryt}b4(){return this.Hc}iO(){return this.Og}hgt(){return this.iO()}fpt(){return this.YMt}Spt(){return this.HMt}Twt(){return this.ZMt}wz(){return this.qMt}O2(){return this.i2}bwt(){return this.lmt.cmt}xwt(){return!!this.Fyt}$mt(){return this.xwt()||this.Nct.nP().LR()}tgt(){for(const t of this.Ys)if(t.gMt())return t.cF();return null}vwt(t){this.lmt.cmt=!!t,this.ryt.kmt()}Cwt(){return this.lmt.iwt}Rpt(){return!this.bwt()&&!this.Hc.dgt()&&!this.Cwt()}Iwt(){return this.twt||(this.twt=new Map),this.twt}Gwt(){return this.swt||(this.swt=new Map),this.swt}pwt(){const t=this.KMt;return e(this.Ys,t),Wo.xor(this.Wgt.apply(this.Fyt,t),this.ZMt)}*rwt(){if((this.bwt()||this.Hc.dgt())&&(yield this),this.Cwt()){const s=this.KMt;e(this.Ys,s);let t=this.Wgt.apply(this.Fyt,s);return Wo.Ao(t)&&(t=yield*t),Wo.xor(t,this.ZMt)}return this.uI()}mwt(){const t=this.KMt,s=(e(this.Ys,t),this.Nct.iP().Y5());return Wo.xor(this.Wgt.apply(s,t),this.ZMt)}*awt(){if((this.bwt()||this.Hc.dgt())&&(yield this),this.Cwt()){let t=this.KMt,s=(e(this.Ys,t),this.Nct.iP().Y5()),i=this.Wgt.apply(s,t);return Wo.Ao(i)&&(i=yield*i),Wo.xor(i,this.ZMt)}return this.uI()}ewt(){return!0}*hwt(){return(this.bwt()||this.Hc.dgt())&&(yield this),!0}Ewt(){if(this.hMt){if(2<=this.hMt.iz().Swt())throw new Error("not yet implemented");return this.hMt}return 2<=this.Nct.nP().Swt()?this.Nct.$R():this.Nct}uwt(){const t=this.KMt,s=(e(this.Ys,t),this.Wgt.apply(this.Ewt(),t));return this.Nct.Lgt(),s}*lwt(){if((this.bwt()||this.Hc.dgt())&&(yield this),this.Cwt()){const s=this.KMt;e(this.Ys,s);let t=this.Wgt.apply(this.Ewt(),s);return Wo.Ao(t)&&(t=yield*t),this.Nct.Lgt(),t}return this.uI()}cwt(){const i=this.Ys,e=this.KMt,t=this.Nct.yP();for(let t=0,s=i.length;t<s;++t){const h=i[t];h.mMt()||(e[t]=h.Ks(0))}return t.Uct()?this._wt(t):this.Nwt(t)}*fwt(){return(this.bwt()||this.Hc.dgt())&&(yield this),this.cwt()}Dwt(i){const e=this.Ys,h=this.KMt;for(let t=0,s=e.length;t<s;++t){const n=e[t];n.mMt()&&(h[t]=n.Ks(i))}}_wt(i){const t=this.Nct,e=t.TV(),h=t.iMt(),n=this.nMt,r=0<=n,o=t.gP(),a=this.$Mt,u=this.KMt,l=this.Wgt,c=this.ZMt,f=this.XMt&&!this.YMt;i.Bct();for(let s=0,t=o.length;s<t;++s){const d=o[s];a&&this.Dwt(s);let t;if(r){const p=e?d.cF().oMt(h):0;t=l.apply(d.eht()[n+p].Y5(),u)}else t=l.apply(d.Y5(),u);Wo.xor(t,c)?i.Yct(d):f&&i.Hct(d)}return t.Awt(!0),i.qct(!1),t.Lgt(),i.Wct()}Nwt(t){let s=this.Nct,i=s.TV(),e=s.iMt(),h=s.xF(),n=this.nMt,r=0<=n,o=this.$Mt,a=this.KMt,u=this.Wgt,l=this.ZMt,c=this.XMt&&!this.YMt,f=t.Zct(),d=t.Xct(),p=c&&!this.ryt.Kmt(this),m=p?d:f,g=0,y=!1;for(let s=0,t=m.length;s<t;++s){const w=m[s];o&&this.Dwt(s);let t;if(r){const S=i?w.cF().oMt(e):0;t=u.apply(w.eht()[n+S].Y5(),a)}else t=u.apply(w.Y5(),a);Wo.xor(t,l)?(y=!0,p?(f.push(w),h&&w.Lwt()):(m[g]=w,h&&w.Owt(g),++g)):p?(m[g]=w,h&&w.Rwt(g),++g):c&&(d.push(w),h)&&w.Pwt()}Wo._r(m,g),h&&s.kwt(p,g);const M=y;return p&&!y&&(y=this.Fwt(f)),s.Awt(M||c),c?y:t.Wct()}Fwt(i){const t=this.Nct,e=t.TV(),h=t.iMt(),n=this.$Mt,r=this.nMt,o=0<=r,a=this.KMt,u=this.Wgt,l=this.ZMt;for(let s=0,t=i.length;s<t;++s){const c=i[s];n&&this.Dwt(s);let t;if(o){const f=e?c.cF().oMt(h):0;t=u.apply(c.eht()[r+f].Y5(),a)}else t=u.apply(c.Y5(),a);if(Wo.xor(t,l))return!0}return!1}jwt(t,s){return this.Ys[t].Ks(s)}Tpt(){const t=this.Ys;if(t.length)return t[0].vMt();throw new Error("no parameters")}VH(){if(!this.twt||!this.twt.size)return null;const s={};for(const[i,e]of this.twt.entries()){let t=e;"collmemory"===i&&(t=[...e.entries()].map(t=>[t[0].CF(),t[1].CF(),t[2]])),s[i]=t}return{ex:s}}YH(t){if(this.twt&&(this.twt.clear(),this.twt=null),t){const s=this.Hc,i=t.ex;if(i){const e=this.Iwt();e.clear();for(const[h,n]of Object.entries(i)){let t=n;"collmemory"===h&&(t=Wo.Kh(Wo.Bl,n.map(t=>[s.H3(t[0]),s.H3(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),e.set(h,t)}}}}}}{let h=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Ks(0)};h;const Vo=self.Os,Yo=[],Ho=function(){},qo=function*(){};Vo.Smt=class extends Vo.Zh{constructor(t,s,i){super();const e=(this.ryt=t).b4(),h=(this.Hc=e,this.Og=i,this.qJ=4<=s.length?s[3]:-1,this.zwt=5<=s.length?255&s[4]:0,this.Bwt=5<=s.length?s[4]>>8:0,this.Wgt=null,this.Nct=null,this.hMt=null,this.nMt=-1,this.Fyt=null,this.Uwt="",this.Wwt=null,this.Qwt=null,this.uI=Ho,this.A1t=Ho,this.Ys=[],this.KMt=[],this.$Mt=!1,this.twt=null,this.swt=null,-3===s[0]),n=h?s[2]:s[5];if(this.lmt=e.mq()||h?{cmt:n[0],iwt:n[1],index:n[2]}:null,-1===s[0])this.Fyt=e.jyt(),this.Wgt=e.Ugt(s[1]);else if(-2===s[0])this.Uwt=s[1];else if(h){const r=e.Ugt(s[1]);this.Wgt=r,this.uI=this.Jwt,this.A1t=this.Vwt,this.Bwt|=8}else this.Nct=e.Z8(s[0]),4&this.Bwt?(this.Uwt=s[1],this.Wwt=e.Z8(s[2])):(s[2]&&(this.hMt=this.Nct.hht(s[2]),this.nMt=this.Nct.Ost(s[2])),this.Wgt=e.Ugt(s[1]));if(7===s.length){const o=s[6];for(const a of o)this.Ys.push(Vo.dMt.Ob(this,a,this.Ys.length)),this.KMt.push(0)}0===this.Ys.length&&(this.Ys=Yo,this.KMt=Yo),this.Ywt()&&(this.ryt.Gmt(),this.ryt.zmt()),this.ryt.LO().U0t(this)}static Ob(t,s,i){return Vo.Kh(Vo.Smt,t,s,i)}P0t(){for(const t of this.Ys)t.P0t(),t.mMt()&&(this.$Mt=!0);if(this.Fyt)this.nwt(),this.A1t=this.rwt;else if(this.Uwt)4&this.Bwt?this.Hwt():this.qwt(),this.Uwt="",this.Wwt=null;else if(this.uI===this.Jwt){const s=this.Wgt,i=this.Hc.LO().n1t(this.ryt);this.Wgt=s.bind(null,this.Hc.DR(),i)}else this.hMt?this.ygt()?(this.uI=this.Zwt,this.A1t=this.Xwt):(this.uI=this.Kwt,this.A1t=this.$wt):this.Nct.nP().LR()?(this.owt(),this.A1t=this.awt):this.O2()?(this.uI=this.tSt,this.A1t=this.sSt):this.ygt()?(this.uI=this.iSt,this.A1t=this.eSt):this.hSt()?(this.uI=this.nSt,this.A1t=this.rSt):this.Ys.length?this.Ys.every(t=>t.mMt())?(this.uI=this.oSt,this.A1t=this.aSt):this.$Mt?(this.uI=this.uSt,this.A1t=this.lSt):this.Ys.every(t=>t.jdt())?(h(this.Ys,this.KMt),this.uI=this.cSt,this.A1t=this.fSt):(this.uI=this.dSt,this.A1t=this.pSt):(this.uI=this.cSt,this.A1t=this.fSt)}nwt(){const t=this.Fyt,s=this.Fyt;this.dwt(t,s,this.pwt)}owt(){const t=this.Nct.nP(),s=this.Nct.iP().Y5();this.dwt(t,s,this.mwt)}qwt(){const t=this.ryt.LO(),i=t.OO(this.Uwt);if(i.zl()){const e=0!=(2&this.Bwt);this.Qwt=i.kO();let s=[...new Set([...this.ryt.FO(),...this.Qwt.FO()])];s=t.Y0t(s);const h=!i.UO()&&this.mSt()?{Pgt:!0}:null;if(this.uI=Vo.lpt.prototype.Ngt.bind(this.Qwt,s,this.Ys,e,h),this.Hc.mq()){const n=this;this.A1t=function*(){(n.bwt()||n.Hc.dgt())&&(yield n);const t=yield*n.Qwt.jgt(s,n.Ys,e,h);return t}}else this.A1t=qo}else this.uI=Ho,this.A1t=qo}Hwt(){const n=this.ryt.LO(),r=n.f1t(this.Wwt,this.Uwt);if(r.zl()){const o=0!=(2&this.Bwt);this.Qwt=r.kO();let s=[...new Set([...this.ryt.FO(),...this.Qwt.FO(),this.Nct,r.cF()])],t=(s=n.Y0t(s),!this.Nct.TV()&&!r.cF().TV()),i=!this.Nct.TV()&&r.cF().TV(),e=this.Nct.TV(),h=null;if(!r.UO()&&this.mSt()&&((h=h||{}).Pgt=!0),!i&&o||((h=h||{}).Dgt=this.Nct,h.Agt=r.cF()),t||i||e&&!r.myt()?this.uI=Vo.lpt.prototype.Ngt.bind(this.Qwt,s,this.Ys,o,h):e&&(this.uI=Vo.Jdt.prototype.wyt.bind(r,s,this.Ys)),this.Hc.mq()){const a=this;t||i||e&&!r.myt()?this.A1t=function*(){(a.bwt()||a.Hc.dgt())&&(yield a);const t=yield*a.Qwt.jgt(s,a.Ys,o,h);return t}:e&&(this.A1t=function*(){(a.bwt()||a.Hc.dgt())&&(yield a);const t=yield*r.Tyt(s,a.Ys);return t})}else this.A1t=qo}else this.uI=Ho,this.A1t=qo}dwt(t,s,i){const e=this.Wgt,h=this.Ys;if(0===h.length)this.uI=t.Wyt(e,s);else if(1===h.length){const n=h[0];if(n.jdt())this.uI=t.gwt(e,s,n.Ks(0));else{const r=t.Wyt(e,s);this.uI=function(){return r(n.Ks(0))}}}else if(2===h.length){const o=h[0],a=h[1];if(o.jdt()&&a.jdt())this.uI=t.ywt(e,s,o.Ks(0),a.Ks(0));else{const u=t.Wyt(e,s);this.uI=function(){return u(o.Ks(0),a.Ks(0))}}}else if(3===h.length){const l=h[0],c=h[1],f=h[2];if(l.jdt()&&c.jdt()&&f.jdt())this.uI=t.Mwt(e,s,l.Ks(0),c.Ks(0),f.Ks(0));else{const d=t.Wyt(e,s);this.uI=function(){return d(l.Ks(0),c.Ks(0),f.Ks(0))}}}else this.uI=i}_V(){return this.qJ}ygt(){return 0!=(8&this.Bwt)}ggt(){return 0!=(16&this.Bwt)}hSt(){return 1===this.zwt}O2(){return 2===this.zwt}Ywt(){return 0!=(1&this.Bwt)}Nmt(){return this.ygt()||this.ggt()}cF(){return this.Nct}wwt(){return this.hMt?this.hMt.iz():this.Nct?this.Nct.nP():null}CMt(){const t=this.wwt();return t?t.Swt():1}kO(){return this.ryt}mSt(){let t=this.ryt;do{if(t instanceof Vo.Jdt&&t.UO())return!0}while(t=t.e1t());return!1}b4(){return this.Hc}iO(){return this.Og}hgt(){return this.lmt.index}bwt(){return this.lmt.cmt}vwt(t){this.lmt.cmt=!!t,this.ryt.kmt()}Cwt(){return this.lmt.iwt}Rpt(){return!this.bwt()&&!this.Hc.dgt()&&!this.Cwt()}Iwt(){return this.twt||(this.twt=new Map),this.twt}Gwt(){return this.swt||(this.swt=new Map),this.swt}pwt(){const t=this.KMt;return h(this.Ys,t),this.Wgt.apply(this.Fyt,t)}*rwt(){if((this.bwt()||this.Hc.dgt())&&(yield this),this.Cwt()){const t=this.KMt,s=(h(this.Ys,t),yield*this.Wgt.apply(this.Fyt,t));return s}return this.uI()}mwt(){const t=this.KMt;return h(this.Ys,t),this.Wgt.apply(this.Nct.iP().Y5(),t)}*awt(){if((this.bwt()||this.Hc.dgt())&&(yield this),this.Cwt()){const t=this.KMt,s=(h(this.Ys,t),yield*this.Wgt.apply(this.Nct.iP().Y5(),t));return s}return this.uI()}cSt(){const i=this.KMt,e=this.Nct.yP().gP();for(let t=0,s=e.length;t<s;++t)this.Wgt.apply(e[t].Y5(),i)}*fSt(){if((this.bwt()||this.Hc.dgt())&&(yield this),this.Cwt()){const i=this.KMt,e=this.Nct.yP().gP();for(let t=0,s=e.length;t<s;++t)yield*this.Wgt.apply(e[t].Y5(),i)}else this.cSt()}dSt(){const i=this.KMt,e=(h(this.Ys,i),this.Nct.yP().gP());for(let t=0,s=e.length;t<s;++t)this.Wgt.apply(e[t].Y5(),i)}*pSt(){if((this.bwt()||this.Hc.dgt())&&(yield this),this.Cwt()){const i=this.KMt,e=(h(this.Ys,i),this.Nct.yP().gP());for(let t=0,s=e.length;t<s;++t)yield*this.Wgt.apply(e[t].Y5(),i)}else this.dSt()}oSt(){const e=this.Ys,h=this.KMt,s=this.Wgt,n=this.Nct.yP().gP();for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);s.apply(r.Y5(),h)}}*aSt(){if((this.bwt()||this.Hc.dgt())&&(yield this),this.Cwt()){const e=this.Ys,h=this.KMt,s=this.Wgt,n=this.Nct.yP().gP();for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);yield*s.apply(r.Y5(),h)}}else this.oSt()}uSt(){const e=this.Ys,h=this.KMt,s=this.Wgt,n=this.Nct.yP().gP();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.mMt()||(h[t]=i.Ks(0))}for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.mMt()&&(h[t]=o.Ks(i))}s.apply(r.Y5(),h)}}*lSt(){if((this.bwt()||this.Hc.dgt())&&(yield this),this.Cwt()){const e=this.Ys,h=this.KMt,s=this.Wgt,n=this.Nct.yP().gP();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.mMt()||(h[t]=i.Ks(0))}for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.mMt()&&(h[t]=o.Ks(i))}yield*s.apply(r.Y5(),h)}}else this.uSt()}nSt(){const e=this.Ys,h=this.KMt,s=this.Wgt,t=this.Nct,i=t.gSt(),n=t.yP().gP();i.ySt(s);for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);s.apply(r.Y5(),h)}i.MSt(s)}*rSt(){if((this.bwt()||this.Hc.dgt())&&(yield this),this.Cwt()){const e=this.Ys,h=this.KMt,s=this.Wgt,t=this.Nct,i=t.gSt(),n=t.yP().gP();i.ySt(s);for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);yield*s.apply(r.Y5(),h)}i.MSt(s)}else this.nSt()}tSt(){const t=this.KMt;return h(this.Ys,t),this.Wgt.apply(this.hMt||this.Nct,t)}*sSt(){if((this.bwt()||this.Hc.dgt())&&(yield this),this.Cwt()){const s=this.KMt;h(this.Ys,s);let t=this.Wgt.apply(this.hMt||this.Nct,s);return Vo.Ao(t)?yield*t:t}return this.tSt()}Kwt(){const t=this.Nct,s=t.TV(),e=t.iMt(),h=this.Ys,n=this.$Mt,r=this.KMt,o=this.Wgt,a=this.nMt,u=t.yP().gP();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.mMt()||(r[t]=i.Ks(0))}for(let i=0,t=u.length;i<t;++i){const l=u[i];if(n)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.mMt()&&(r[t]=f.Ks(i))}const c=s?l.cF().oMt(e):0;o.apply(l.eht()[a+c].Y5(),r)}}*$wt(){if((this.bwt()||this.Hc.dgt())&&(yield this),this.Cwt()){const t=this.Nct,s=t.TV(),e=t.iMt(),h=this.Ys,n=this.$Mt,r=this.KMt,o=this.Wgt,a=this.nMt,u=t.yP().gP();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.mMt()||(r[t]=i.Ks(0))}for(let i=0,t=u.length;i<t;++i){const l=u[i];if(n)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.mMt()&&(r[t]=f.Ks(i))}const c=s?l.cF().oMt(e):0;yield*o.apply(l.eht()[a+c].Y5(),r)}}else this.Kwt()}iSt(){const e=this.Ys,h=this.KMt,s=this.Wgt,n=this.Nct.yP().gP(),r=[];for(let i=0,t=n.length;i<t;++i){const o=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);r.push(s.apply(o.Y5(),h))}return Promise.all(r)}*eSt(){if((this.bwt()||this.Hc.dgt())&&(yield this),this.Cwt()){const e=this.Ys,h=this.KMt,s=this.Wgt,n=this.Nct.yP().gP(),r=[];for(let i=0,t=n.length;i<t;++i){const o=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].Ks(i);r.push(yield*s.apply(o.Y5(),h))}return Promise.all(r)}return this.iSt()}Zwt(){const t=this.Nct,s=t.TV(),e=t.iMt(),h=this.Ys,n=this.KMt,r=this.Wgt,o=this.nMt,a=t.yP().gP(),u=[];for(let i=0,t=a.length;i<t;++i){const l=a[i];for(let t=0,s=h.length;t<s;++t)n[t]=h[t].Ks(i);const c=s?l.cF().oMt(e):0;u.push(r.apply(l.eht()[o+c].Y5(),n))}return Promise.all(u)}*Xwt(){if((this.bwt()||this.Hc.dgt())&&(yield this),this.Cwt()){const t=this.Nct,s=t.TV(),e=t.iMt(),h=this.Ys,n=this.KMt,r=this.Wgt,o=this.nMt,a=t.yP().gP(),u=[];for(let i=0,t=a.length;i<t;++i){const l=a[i];for(let t=0,s=h.length;t<s;++t)n[t]=h[t].Ks(i);const c=s?l.cF().oMt(e):0;u.push(yield*r.apply(l.eht()[o+c].Y5(),n))}return Promise.all(u)}return this.Zwt()}async Jwt(){try{await this.Wgt()}catch(t){console.error(`Unhandled exception running script %c${this.ryt.B7().zc()}, event ${this.ryt.Wmt()}, action ${this.hgt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),Vo.Mpt.Jgt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Vo.Mpt.Vgt())}}*Vwt(){return(this.bwt()||this.Hc.dgt())&&(yield this),this.Jwt()}VH(){return this.twt&&this.twt.size?{ex:Vo._o(this.twt)}:null}YH(t){if(this.twt&&(this.twt.clear(),this.twt=null),t){const s=t.ex;s&&(this.twt=Vo.No(s))}}}}{let d=function(t){return t instanceof r?M.ZP(t):t.xB()},l=function(t){return d(t).t4()},h=function(t){return M.ZP(t)},E=function(t,s,i,e){const h=s.CF(),n=i.CF();h<n?t.Set(s,i,e):t.Set(i,s,e)},_=function(t,s,i){const e=s.CF(),h=i.CF();e<h?t.Jl(s,i):t.Jl(i,s)},N=function(t,s){t.Vl(s)},D=function(t,s,i){const e=s.CF(),h=i.CF();return e<h?t.Ks(s,i):t.Ks(i,s)},e=function(t,s,i,e){if(!s)return!1;const h=0!==i||0!==e,n=t.t4(),r=M.uO(),o=M.X0t(),a=o.kO().rft(),u=o.cF(),l=o.Twt(),c=s.yP(),f=u!==s;I=s,C=f&&!l;let d,p=0,m=0,g=G=!1;c.Uct()?(w.C(n.Lj()),w.offset(i,e),r.wSt(n.s4(),s,w,S),d=S):!a||M.SSt()&&!c.Xct().length&&c.Zct().length?d=c.Zct():(d=c.Xct(),G=!0),h&&(p=n.qS(),m=n.KS(),n._j(i,e),n.Cj());for(const y of d)if(r.J4(t,y)){if(g=!0,l)break;f&&O.add(y)}return h&&(n.Ij(p,m),n.Cj()),A.Nr(S),g},i=function(t){const s=M.jO().rft(),i=I.yP(),e=i.Zct(),h=i.Xct();i.Uct()?(i.tft(O),s&&(A.Nr(h),i.ift(O,I.gP()))):s?G?i.eft(O):(i.ift(O,e),i.tft(O)):i.tft(O),I.Lgt()},T=function(t,s){C&&(s&&i(),O.clear(),I=null,C=!1)},s=function(t,s){const i=M.H3(s);if(i){const e=t.yP();if(e.Uct()||e.Zct().includes(i))if(t.TV()){if(i.cF().TSt(t))return e.nft(i),t.Lgt(),!0}else if(i.cF()===t)return e.nft(i),t.Lgt(),!0}return!1},n=function(t,h){const n=t.yP();if(n.Uct()){n.qct(!1),n.Bct();const i=t.gP();for(let t=0,s=i.length;t<s;++t){const e=i[t];e.CF()===h?n.Hct(e):n.Yct(e)}return t.Lgt(),!!n.Zct().length}{let i=n.Zct(),e=0;for(let t=0,s=i.length;t<s;++t){const r=i[t];(i[e]=r).CF()===h?n.Hct(r):++e}return A._r(i,e),t.Lgt(),!!i.length}},A=(d,l,h,E,_,N,D,e,i,T,s,n,self.Os),u=new A.Oo,b={},x={},v={},M=null,r=(A.bSt=function(t){M=t},self.uF),w=(x.xSt=function(t,s){return A.compare(this.t4().qS(),t,s)},v.xSt=function(t,s){return A.compare(this.x,t,s)},x.vSt=function(t,s){return A.compare(this.t4().KS(),t,s)},v.vSt=function(t,s){return A.compare(this.y,t,s)},x.CSt=function(){return this.t4().kj()},v.CSt=function(){return this.Pj()},b.ISt=function(){const t=l(this),s=t.O3(),i=t.Lj();return i.pu()<0||i.mu()<0||i.fu()>s.Yp()||i.du()>s.nm()},b.GSt=function(i,e,h){const t=this.yP(),n=t.gP();if(!n.length)return!1;let r=n[0],o=r.t4(),a=r,u=A.dn(o.qS(),o.KS(),e,h);for(let t=1,s=n.length;t<s;++t){r=n[t],o=r.t4();const l=A.dn(o.qS(),o.KS(),e,h);(0===i&&l<u||1===i&&l>u)&&(u=l,a=r)}return t.nft(a),!0},x.ZS=function(t){const s=this.t4();s.qS()!==t&&(s.ZS(t),s.Cj())},v.ZS=function(t){this.x=+t},x.$S=function(t){const s=this.t4();s.KS()!==t&&(s.$S(t),s.Cj())},v.$S=function(t){this.y=+t},x.ESt=function(t,s){const i=this.t4();i._St(t,s)||(i.Ij(t,s),i.Cj())},v.ESt=function(t,s){this.setPosition(t,s)},b.NSt=function(t,s){if(t){const i=d(this),e=t.pP(i);if(e){const[h,n]=e.DSt(s),r=i.t4();r.qS()===h&&r.KS()===n||(r.Ij(h,n),r.Cj())}}},b.ASt=function(t){if(0!==t){const s=l(this);s._j(s.LSt()*t,s.OSt()*t),s.Cj()}},x.RSt=function(t,s){if(0!==s){const i=this.t4();t=A.un(t),i._j(Math.cos(t)*s,Math.sin(t)*s),i.Cj()}},v.RSt=function(t,s){0!==s&&(t=A.un(t),this.Ej(Math.cos(t)*s,Math.sin(t)*s))},x.qS=function(){return this.t4().qS()},v.qS=function(){return this.x},x.KS=function(){return this.t4().KS()},v.KS=function(){return this.y},b.s3=function(){return M.s3(d(this))},x.PSt=function(t,s){return A.compare(this.t4().Yp(),t,s)},v.PSt=function(t,s){return A.compare(this.width,t,s)},x.kSt=function(t,s){return A.compare(this.t4().nm(),t,s)},v.kSt=function(t,s){return A.compare(this.height,t,s)},x.tm=function(t){const s=this.t4();s.Yp()!==t&&(s.tm(t),s.Cj())},v.tm=function(t){this.width=t},x.Hp=function(t){const s=this.t4();s.nm()!==t&&(s.Hp(t),s.Cj())},v.Hp=function(t){this.height=t},x.LG=function(t,s){const i=l(this);i.Yp()===t&&i.nm()===s||(i.LG(t,s),i.Cj())},v.LG=function(t,s){this.LP(t,s)},x.Yp=function(){return this.t4().Yp()},v.Yp=function(){return this.width},x.nm=function(){return this.t4().nm()},v.nm=function(){return this.height},b.FSt=function(){return l(this).Lj().fu()},b.jSt=function(){return l(this).Lj().du()},b.zSt=function(){return l(this).Lj().pu()},b.BSt=function(){return l(this).Lj().mu()},b.USt=function(){const t=l(this).Lj();return(t.fu()+t.pu())/2},b.WSt=function(){const t=l(this).Lj();return(t.du()+t.mu())/2},b.QSt=function(t,s){return A.mn(l(this).kP(),A.un(s))<=A.un(t)},b.JSt=function(t){return A.yn(l(this).kP(),A.un(t))},b.VSt=function(t,s){const i=A.un(t),e=A.un(s),h=l(this).kP(),n=!A.yn(e,i);return n?!(!A.yn(h,i)&&A.yn(h,e)):A.yn(h,i)&&!A.yn(h,e)},x.PP=function(t){const s=this.t4(),i=A.an(A.un(t));isNaN(i)||s.kP()===i||(s.PP(i),s.Cj())},v.PP=function(t){this.Aj=t},b.YSt=function(t){if(!isNaN(t)&&0!==t){const s=l(this);s.PP(s.kP()+A.un(t)),s.Cj()}},b.HSt=function(t){if(!isNaN(t)&&0!==t){const s=l(this);s.PP(s.kP()-A.un(t)),s.Cj()}},b.qSt=function(t,s){const i=l(this),e=i.kP(),h=A.gn(e,A.un(s),A.un(t));isNaN(h)||e===h||(i.PP(h),i.Cj())},b.ZSt=function(t,s,i){const e=l(this),h=e.kP(),n=s-e.qS(),r=i-e.KS(),o=Math.atan2(r,n),a=A.gn(h,o,A.un(t));isNaN(a)||h===a||(e.PP(a),e.Cj())},b.XSt=function(t,s){const i=l(this),e=i.kP(),h=t-i.qS(),n=s-i.KS(),r=Math.atan2(n,h);isNaN(r)||e===r||(i.PP(r),i.Cj())},x.kP=function(){return A.ln(this.t4().kP())},v.kP=function(){return this.Aj},b.KSt=function(t,s){return A.compare(A.Dn(100*l(this).lN(),6),t,s)},x.bk=function(){return this.t4().bk()},v.bk=function(){return this.isVisible},b.Sk=function(t){const s=l(this);t=2===t?!s.bk():0!==t,s.bk()!==t&&(s.Sk(t),M.o4())},b.fN=function(t){const s=A.rn(t/100,0,1),i=l(this);if(i.G5()){if(i.Cnt().$St()===s)return}else if(i.lN()===s)return;i.fN(s),M.o4()},b.tTt=function(t){u.ca(t);const s=l(this);s.jj().ia(u)||(s.zj(u),M.o4())},b.pN=function(){const t=l(this).jj();return A.On(t.Ho(),t.qo(),t.Zo(),t.Xo())},b.lN=function(){return A.Dn(100*l(this).lN(),6)},b.sTt=function(t){return!!t&&l(this).s4()===t},b.iTt=function(i){const t=this.yP(),e=t.gP();if(!e.length)return!1;let s=e[0],h=s;for(let t=1,s=e.length;t<s;++t){const n=e[t],r=n.t4(),o=h.t4(),a=r.s4().iO(),u=o.s4().iO();0===i?(u<a||a===u&&r.i4()>o.i4())&&(h=n):(a<u||a===u&&r.i4()<o.i4())&&(h=n)}return t.nft(h),!0},x.eTt=function(t,s,i){const e=this.t4(),h=0===t?e.tT():e.Dj();return A.compare(h,s,i)},v.eTt=function(t,s,i){const e=0===t?this.jk:this.Nj;return A.compare(e,s,i)},x.hTt=function(){this.t4().Uj()},v.hTt=function(){this.Bj()},x.nTt=function(){this.t4().Qj()},v.nTt=function(){this.Wj()},b.rTt=function(t){t&&l(this).Vj(t)},b.oTt=function(t,s){const i=0===t;if(s){const e=d(this),h=s.aTt(e);h&&e.t4().Hj(h,i)}},x.sT=function(t){const s=this.t4();s.tT()!==t&&(s.sT(t),M.o4())},v.sT=function(t){this.jk=t},b.uTt=function(){return l(this).s4().iO()},b.lTt=function(){return l(this).s4().zc()},x.cTt=function(){return this.t4().i4()},v.cTt=function(){return this.zIndex},x.fTt=function(){return this.t4().tT()},v.fTt=function(){return this.jk},x.dTt=function(){return this.t4().Dj()},v.dTt=function(){return this.Nj},b.pTt=function(t){const s=d(this),i=s.cF()._P().rht(t);if(i){const e=i.iO(),h=s.t4().xj();return h.cz(e)}},b.mTt=function(t,s){const i=d(this),e=i.cF()._P().rht(s);if(e){const h=e.iO(),n=1===t,r=i.t4().xj();r.cz(h)!==n&&(r.fz(h,n),r.dz(),M.o4())}},b.gTt=function(t,s,i){const e=d(this),h=e.cF()._P().rht(t);if(h){s=Math.floor(s);const n=h.Bx().Wx(s);if(n){"color"===n?(u.ca(i),i=u):"percent"===n&&(i/=100);const r=h.iO(),o=e.t4().xj(),a=o.mz(r,s,i);a&&o.cz(r)&&M.o4()}}},A.Kh(A.Rect)),L=[],S=[],C=!1,I=null,G=!1,O=new Set;b.yTt=function(M){if(this.Hc.MTt())return function*(M){if(M){let t=this.Hc,s=t.uO(),e=t.LO(),i=e.VO(),h=e.X0t(),n=h.cF(),r=h.Iwt(),o=h.Gwt(),a=i.gW(),u=t.ett(),l=u-1,c=a.jO(),f=i.yW(c),d=r.get("collmemory"),p=(d||(d=A.Kh(A.Bl),r.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Nf().addEventListener("instancedestroy",t=>N(d,t.rz))),n.yP()),m=M.yP(),g=p.gP(),y=null;for(let t=0;t<g.length;++t){const w=g[t];m.Uct()?(s.wSt(w.t4().s4(),M,w.t4().Lj(),L),y=L,s.wTt(w,M,y)):y=m.gP();for(let t=0;t<y.length;++t){const S=y[t];if(s.J4(w,S)||s.STt(w,S)){let t=D(d,w,S),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const T=!s||i<l;if(E(d,w,S,u),T){const b=c.mW(),x=(e.bW(b),n.yP()),v=M.yP();if(x.qct(!1),v.qct(!1),n===M){const C=x.Zct();A.Nr(C),C.push(w),C.push(S),n.Lgt()}else{const I=x.Zct(),G=v.Zct();A.Nr(I),A.Nr(G),I.push(w),G.push(S),n.Lgt(),M.Lgt()}yield*c.vgt(a,f),e.vW(b)}}else _(d,w,S)}A.Nr(L)}i._W()}return!1}.call(this,M);if(M){let t=this.Hc,s=t.uO(),e=t.LO(),i=e.VO(),h=e.X0t(),n=h.cF(),r=h.Iwt(),o=h.Gwt(),a=i.gW(),u=t.ett(),l=u-1,c=a.jO(),f=i.yW(c),d=r.get("collmemory"),p=(d||(d=A.Kh(A.Bl),r.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Nf().addEventListener("instancedestroy",t=>N(d,t.rz))),n.yP()),m=M.yP(),g=p.gP(),y=null;for(let t=0;t<g.length;++t){const w=g[t];m.Uct()?(s.wSt(w.t4().s4(),M,w.t4().Lj(),L),y=L,s.wTt(w,M,y)):y=m.gP();for(let t=0;t<y.length;++t){const S=y[t];if(s.J4(w,S)||s.STt(w,S)){let t=D(d,w,S),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const T=!s||i<l;if(E(d,w,S,u),T){const b=c.mW(),x=(e.bW(b),n.yP()),v=M.yP();if(x.qct(!1),v.qct(!1),n===M){const C=x.Zct();A.Nr(C),C.push(w),C.push(S),n.Lgt()}else{const I=x.Zct(),G=v.Zct();A.Nr(I),A.Nr(G),I.push(w),G.push(S),n.Lgt(),M.Lgt()}c.xW(a,f),e.vW(b)}}else _(d,w,S)}A.Nr(L)}i._W()}return!1},b.TTt=function(t){return e(d(this),t,0,0)},b.bTt=function(t,s,i){return e(d(this),t,s,i)},b.f5=function(){return l(this).f5()},b.ZH=function(){return l(this).ZH()},b.xTt=function(i,e){const t=this.yP(),h=t.gP();if(0===h.length)return!1;let s=i.yP(),n=s.gP();if(s.Uct()){const a=[...this.Hc.vTt(i)];0<a.length&&(n=n.concat(a))}if(0===n.length)return!1;const r=s.Uct()?null:new Set(n),o=new Set;for(let t=0,s=h.length;t<s;++t){const u=h[t];if(1===e)for(const l of u.i5())l.CTt(i)&&(null===r||r.has(l))&&o.add(l);else{let t;if(0===e){if(null===(t=u.$j()))continue}else t=u.s5();t.CTt(i)&&(null===r||r.has(t))&&o.add(t)}}return 0!==o.size&&(s.tft(o),i.Lgt(),!0)},b.ITt=function(i,e){const t=this.yP(),h=t.gP();if(0===h.length)return!1;let s=i.yP(),n=s.gP();if(s.Uct()){const a=[...this.Hc.vTt(i)];0<a.length&&(n=n.concat(a))}if(0===n.length)return!1;const r=s.Uct()?null:new Set(n),o=new Set;for(let t=0,s=h.length;t<s;++t){const u=h[t];2!==e||u.ZH()||!u.CTt(i)||null!==r&&!r.has(u)||o.add(u);for(const l of 0===e?u.children():u.o5())2===e&&l.ZH()||l.CTt(i)&&(null===r||r.has(l))&&o.add(l)}return 0!==o.size&&(s.tft(o),i.Lgt(),!0)},b.GTt=function(i,e,h){const t=this.yP(),n=t.gP();if(0===n.length)return!1;let s=i.yP(),r=s.gP();if(s.Uct()){const u=[...this.Hc.vTt(i)];0<u.length&&(r=r.concat(u))}if(0===r.length)return!1;const o=s.Uct()?null:new Set(r),a=[];for(let t=0,s=n.length;t<s;++t){const l=n[t];if(0===e){const c=l.r5(h);null!==c&&c.CTt(i)&&(null===o||o.has(c))&&a.push(c)}else if(1===e)for(const f of l.children())if(f.CTt(i)){if(0===h){null!==o&&!o.has(f)||a.push(f);break}--h}}return 0!==a.length&&(s.$ct(a),i.Lgt(),!0)},b.ETt=function(t,s,i){const e=d(this);switch(t){case 0:default:return A.compare(e.h5(),s,i);case 1:return A.compare(e._Tt(),s,i)}},b.u5=function(t,s,i,e,h,n,r,o,a,u){const l=d(this),c=M.$0t().cF();for(const f of t.NTt(l,c)){if(!f.nP().JR())return;l.u5(f,{p5:s,g5:i,M5:e,S5:h,b5:n,I5:r,v5:o,E5:a,N5:u})}},b.l5=function(t){const s=d(this),i=M.$0t().cF();for(const e of t.NTt(s,i))s.l5(e)},b.DTt=function(){const t=d(this);if(t.f5()){const s=t.$j();s.l5(t)}},b.ATt=function(){return d(this).h5()},b.LTt=function(){return d(this)._Tt()},b.OTt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=l(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.R5(),i.Cj()):i.L5(t,s)},b.k5=function(t,s,i,e,h,n,r,o){const a=l(this),u=a.k5(t,s,{mode:0===i?"absolute":"relative",x:e,y:h,jk:n,u:r,v:o});u&&a.Cj()},b.RTt=function(){const t=l(this);return t.j5()?t.z5().vT():0},b.PTt=function(){const t=l(this);return t.j5()?t.z5().CT():0},b.kTt=function(t){const s=l(this);t=2===t?!s.bk():0!==t,s.bk()!==t&&s.Sk(t)},b.X5=function(t,s){this instanceof self.uF?this.LU(t,s):this.X5(t,s)},b.FTt=function(t,s){this instanceof self.uF?this.OU(t,""+s):this.FTt(t,""+s)},b.jTt=function(t){this instanceof self.uF?this.RU(t):this.jTt(t)},b.zTt=function(){this instanceof self.uF?this.NU():this.H5()},b.BTt=function(){this instanceof self.uF?this.DU():this.q5()},b.UTt=function(){return this instanceof self.uF?this.AU():this.UTt()},b.WTt=function(t){this instanceof self.uF?this._setEnabled(0!==t):this.QTt(0!==t)},b.JTt=function(){return this instanceof self.uF?this.Xgt():this._IsEnabled()},x.VTt=function(t,s,i){return A.compare(this.xB().pnt(t),s,i)},v.VTt=function(t,s,i){return A.compare(h(this).pnt(t),s,i)},x.YTt=function(t){return!!this.xB().pnt(t)},v.YTt=function(t){return!!h(this).pnt(t)},b.HTt=function(i,e){const t=this.yP(),h=t.gP();if(!h.length)return!1;let n=this.TV(),r=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t],u=n?a.cF().sMt(this.iMt()):0,l=a.pnt(u+e);(null===r||0===i&&l<o||1===i&&l>o)&&(o=l,r=a)}return t.nft(r),!0},b.qTt=function(t){return(this.Hc.X0t().Twt()?n:s)(this,t)},b.hB=function(t){const s=new Set(A.Jr(t)),i=d(this).AF();return s.isSubsetOf(i)},b.ZTt=function(){return d(this).XTt()},b.KTt=function(){return d(this).AF().size},b.$Tt=function(t){return d(this).t2t(t)},b.s2t=function(t,s){const i=A.Jr(s);if(0!==i.length){const e=d(this),h=new Set(e.AF());if(0===t)for(const n of i)h.add(n);else if(1===t)for(const r of i)h.delete(r);e.OF(h)}},b.i2t=function(){M.MF(d(this))},b.e2t=function(){return!0},b.h2t=function(){return!0},x.n2t=function(t,s){this.xB().mnt(t,s)},v.n2t=function(t,s){h(this).mnt(t,s)},x.r2t=function(t,s){const i=this.xB(),e=i.pnt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.mnt(t,e+s)},v.r2t=function(t,s){const i=h(this),e=i.pnt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.mnt(t,e+s)},x.o2t=function(t,s){const i=this.xB(),e=i.pnt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.mnt(t,e-s))},v.o2t=function(t,s){const i=h(this),e=i.pnt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.mnt(t,e-s))},x.a2t=function(t,s){this.xB().mnt(t,s?1:0)},v.a2t=function(t,s){h(this).mnt(t,s?1:0)},x.u2t=function(t){const s=this.xB();s.mnt(t,0===s.pnt(t)?1:0)},v.u2t=function(t){const s=h(this);s.mnt(t,0===s.pnt(t)?1:0)},b.l2t=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=d(this);M.c2t(),i.lZ("state"),i.uT(s,"state"),M.f2t("state",{d2t:!0})},b.p2t=function(){return JSON.stringify(d(this).aT("state"))},b.m2t=function(){return d(this).cF().zc()},b.g2t=function(){let t=M.Z0t().Pft(),s=t.wP();for(const i of M.vTt(t))++s;return s},b.y2t=function(){return M.Z0t().Pft().yP().gP().length},x.j9=function(){return this.xB().j9()},v.j9=function(){return h(this).j9()},x.CF=function(){return this.xB().CF()},v.CF=function(){return h(this).CF()},b.bdt=function(t){const s=d(this);return t.toLowerCase()===M.LO().Idt(s)},b.PF=function(t){const s=d(this);M.LO().PF(s,t)},b.M2t=function(t){return M.LO().K1t().w2t(this.yP().gP(),t),!0},b.S2t=function(){return d(this).GF()},A.T2t=function(t,s,i){const e=t[1],h=t[3],n=t[4],r=t[5],o=t[6],a=t[7],u=t[8],l=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.O9,M=s.Iht,w=s.Ght,S=Object.assign({},b,2<=i?v:x);h&&(y.xSt=S.xSt,y.vSt=S.vSt,y.CSt=S.CSt,y.ISt=S.ISt,y.GSt=S.GSt,M.ZS=S.ZS,M.$S=S.$S,M.ESt=S.ESt,M.NSt=S.NSt,M.ASt=S.ASt,M.RSt=S.RSt,w.b2t=S.qS,w.x2t=S.KS,w.t3=S.s3),n&&(y.PSt=S.PSt,y.kSt=S.kSt,M.tm=S.tm,M.Hp=S.Hp,M.LG=S.LG,w.v2t=S.Yp,w.C2t=S.nm,w.I2t=S.FSt,w.G2t=S.jSt,w.E2t=S.zSt,w._2t=S.BSt,w.N2t=S.USt,w.D2t=S.WSt),r&&(y.A2t=S.QSt,y.L2t=S.JSt,y.VSt=S.VSt,M.PP=S.PP,M.YSt=S.YSt,M.HSt=S.HSt,M.qSt=S.qSt,M.ZSt=S.ZSt,M.XSt=S.XSt,w.O2t=S.kP),o&&(y.bk=S.bk,y.KSt=S.KSt,M.Sk=S.Sk,M.fN=S.fN,M.tTt=S.tTt,w.Opacity=S.lN,w.R2t=S.pN),a&&(y.sTt=S.sTt,y.iTt=S.iTt,y.eTt=S.eTt,M.hTt=S.hTt,M.nTt=S.nTt,M.rTt=S.rTt,M.oTt=S.oTt,M.sT=S.sT,w.uTt=S.uTt,w.lTt=S.lTt,w.cTt=S.cTt,w.fTt=S.fTt,w.dTt=S.dTt),u&&(y.pTt=S.pTt,M.mTt=S.mTt,M.gTt=S.gTt),d&&(y.f5=S.f5,y.ZH=S.ZH,y.xTt=S.xTt,y.ITt=S.ITt,y.GTt=S.GTt,y.ETt=S.ETt,M.u5=S.u5,M.l5=S.l5,M.DTt=S.DTt,w.ATt=S.ATt,w.LTt=S.LTt),p&&(M.OTt=S.OTt,M.k5=S.k5,w.RTt=S.RTt,w.PTt=S.PTt),l&&(y.bk=S.bk,M.Sk=S.kTt,M.P2t=S.X5,M.k2t=S.FTt,M.F2t=S.jTt),c&&(y.j2t=S.UTt,M.z2t=S.zTt,M.B2t=S.BTt),f&&(y.zl=S.JTt,M.U2t=S.WTt),m&&(y.yTt=S.yTt,y.TTt=S.TTt,y.bTt=S.bTt,s.W2t=T),e||(y.VTt=S.VTt,y.YTt=S.YTt,y.HTt=S.HTt,y.qTt=S.qTt,y.hB=S.hB,M.n2t=S.n2t,M.r2t=S.r2t,M.o2t=S.o2t,M.a2t=S.a2t,M.u2t=S.u2t,M.s2t=S.s2t,y.e2t=S.e2t,y.h2t=S.h2t,M.i2t=S.i2t,M.l2t||(M.l2t=S.l2t),w.p2t||(w.p2t=S.p2t),w.g2t=S.g2t,w.y2t=S.y2t,w.Q2t=S.j9,w.J2t=S.CF,w.m2t=S.m2t,w.ZTt=S.ZTt,w.KTt=S.KTt,w.$Tt=S.$Tt,y.bdt=S.bdt,M.PF=S.PF,M.M2t=S.M2t),g&&(w.S2t=S.S2t)}}{const Zo=self.Os;Zo.$1t=class extends Zo.Zh{constructor(t){super(),this.aft=t,this.ef="",this.RA=-1,this.V2t="",this.Y2t=!1,this.H2t=null,this.yft=0,this.Jpt=[],this.xft=null,this.q2t=new Map,this.Z2t=null,this.X2t=null,this.K2t=-1,this.Zgt=null,this.$2t=null,this.tbt=!1}$h(){this.ef="",this.RA=-1,this.V2t="",this.H2t=null,this.X2t=null,this.Zgt=null,this.$2t=null,this.K2t=-1,Zo.Nr(this.Jpt),this.xft&&(this.xft.clear(),this.xft=null);for(const t of this.q2t.values())t.$h();this.q2t.clear(),this.Z2t=null}HS(){const t=this.aft,s=t.b4().SV(),i=t.Z0t(),e=(this.H2t=i.jO(),this.yft=i._ft()+1,t.Qdt(this.H2t));e&&(this.X2t=e,this.Zgt=e.dyt(),this.$2t=e.fyt().map(t=>t.qit()),e.ygt())&&(this.K2t=e.yyt());for(const n of s){const r=n.yP();r.Uct()&&!this.H2t.Bmt(n)||(this.Jpt.push(n),this.q2t.set(n,Zo.Kh(Zo.sbt,r)))}const h=t.zO();this.xft=0<h.size?h:null}ibt(t){this.ef="timer",this.HS(),this.RA=this.aft.b4().n3()+t}ebt(t){this.ef="signal",this.HS(),this.V2t=t.toLowerCase()}w2t(t,s){this.ef="instance-signals",this.HS(),this.V2t=s.toLowerCase(),this.Z2t=new Set(t)}hbt(t){this.ef="promise",this.HS(),t.then(()=>this.Mdt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.Mdt()})}nbt(){return"timer"===this.ef}gdt(){return"signal"===this.ef}vdt(){return"instance-signals"===this.ef}zdt(){return"promise"===this.ef}ydt(){return this.V2t}rbt(){return this.Y2t}Mdt(){this.Y2t=!0}Cdt(t){this.Z2t.delete(t),0===this.Z2t.size&&this.Mdt()}idt(){return this.nbt()?this.RA<=this.aft.b4().n3():this.rbt()}obt(t){t.vft(this.H2t,this.yft);for(const[i,e]of this.q2t.entries()){const h=i.yP();e.vft(h)}this.xft&&t.Uft([...this.xft]);const s=this.X2t;s&&(s.Egt(this.Zgt),s.fyt().map((t,s)=>t.Oet(this.$2t[s])),s.ygt())&&s.Myt(this.K2t)}edt(t){this.obt(t),this.H2t.Mgt(t),this.X2t&&this.X2t.ygt()&&this.X2t.Fgt(this.K2t),this.aft.H1t(this.Jpt),this.tbt=!0}async odt(t){this.obt(t);for(const s of this.H2t.wgt(t))await this.aft.b4().D1t(s);this.X2t&&this.X2t.ygt()&&this.X2t.Fgt(this.K2t),this.aft.H1t(this.Jpt),this.tbt=!0}hdt(){return this.tbt}kct(t){for(const s of this.q2t.values())s.kct(t);if("instance-signals"===this.ef){for(const i of t)this.Z2t.delete(i);0===this.Z2t.size&&this.Mdt()}}VH(){const t={},s={wt:this.ef,t:this.RA,st:this.V2t,s:this.Y2t,ev:this.H2t._V(),sm:this.Jpt.map(t=>t._V()),dsm:this.xft?[...this.xft].map(t=>t._V()):null,sols:t};this.H2t.ngt(this.yft)&&(s.act=this.H2t.t1t(this.yft)._V());for(const[i,e]of this.q2t)t[i._V().toString()]=e.VH();return"instance-signals"===this.ef&&(s.pi=[...this.Z2t].map(t=>t.CF())),s}static Bdt(t,s){const i=t.b4(),e=t.u1t(s.ev);if(!e)return null;let h=0;if(s.hasOwnProperty("act")){const r=t.c1t(s.act);if(!r)return null;h=r.iO()}const n=Zo.Kh(Zo.$1t,t);n.RA=s.t,s.hasOwnProperty("wt")?n.ef=s.wt:n.ef=-1===n.RA?"signal":"timer",n.V2t=s.st,n.Y2t=s.s,n.H2t=e,n.yft=h;for(const o of s.sm){const a=i.aW(o);a&&n.Jpt.push(a)}if(Array.isArray(s.dsm))for(const u of s.dsm){const l=i.aW(u);l&&(n.xft||(n.xft=new Set),n.xft.add(l))}for(const[c,f]of Object.entries(s.sols)){const d=parseInt(c,10),p=i.aW(d);if(p){const m=Zo.Kh(Zo.sbt,null);m.YH(t,f),n.q2t.set(p,m)}}if("instance-signals"===n.ef){n.Z2t=new Set;for(const g of s.pi){const y=i.H3(g);y&&n.Z2t.add(y)}}return n}}}{const Xo=self.Os;Xo.sbt=class extends Xo.Zh{constructor(t){super(),this.Nct=null,this.abt=!0,this.yJ=[],t&&(this.Nct=t.cF(),this.abt=t.Uct(),Xo.Or(this.yJ,t.Zct()))}$h(){this.Nct=null,Xo.Nr(this.yJ)}vft(t){t.qct(this.abt),Xo.Or(t.Zct(),this.yJ)}kct(t){Xo.jr(this.yJ,t)}VH(){return{sa:this.abt,insts:this.yJ.map(t=>t.CF())}}YH(t,s){const i=t.b4();this.abt=!!s.sa,Xo.Nr(this.yJ);for(const e of s.insts){const h=i.H3(e);h&&this.yJ.push(h)}}}}{let u=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};u;const Ko=self.Os;Ko.ubt=class extends Ko.Zh{constructor(t){super(),this.Hc=t.runtime,this.lbt=!!t.AR,this.cbt=!!t.fbt,this.dbt=!!t.FR,this.pbt=!!t.mbt,this.gbt=!!t.zR,this.ybt=!!t.Mbt,this.wbt=!!t.VR,this.Sbt=!!t.PR,this.Tbt=!!t.UR,this.bbt=t.xbt,this.vbt=null,this.Cbt=new Map,this.Ibt=new Map,this.Gbt=new Map,this.Ebt=new Map,this._bt=t.Nbt,this.Dbt=null}$h(){this.Hc=null}b4(){return this.Hc}Abt(){}xdt(){return(2<=this.Swt()?this.Dbt:this).constructor}Swt(){return this.bbt}Lbt(t=!1){let s=this._bt;return t&&"function"!=typeof s&&2<=this.Swt()?globalThis.NB:s}LR(){return this.lbt}RR(){return this.cbt}kR(){return this.Sbt}WR(){return this.Tbt}jR(){return this.dbt}xS(){return this.pbt}BR(){return this.gbt}JR(){return this.ybt}YR(){return this.wbt}Wyt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.Cbt.get(t);return i||(i=t.bind(s),this.Cbt.set(t,i)),i}gwt(t,s,i){if(!s)throw new Error("missing 'this' binding");let e=u(this.Ibt,t),h=e.get(i);return h||(h=t.bind(s,i),e.set(i,h)),h}ywt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");let h=u(this.Gbt,t),n=u(h,i),r=n.get(e);return r||(r=t.bind(s,i,e),n.set(e,r)),r}Mwt(t,s,i,e,h){if(!s)throw new Error("missing 'this' binding");let n=u(this.Ebt,t),r=u(n,i),o=u(r,e),a=o.get(h);return a||(a=t.bind(s,i,e,h),o.set(h,a)),a}Obt(t){if(!this.LR())throw new Error("must be single-global plugin");this.vbt=t}tP(){if(this.LR())return this.vbt;throw new Error("must be single-global plugin")}iP(){if(this.LR())return this.vbt.iP();throw new Error("must be single-global plugin")}Rbt(){const t=this.Swt(),s=(Ko.NR.Pbt(this,t),this.Lbt(!0));if(s){if(this.Dbt=new s,!(this.Dbt instanceof self.GR))throw new TypeError("plugin class must derive from IPlugin")}else this.Dbt=new self.GR;Ko.NR.kbt(t)}ZR(){return this.Dbt}}}{const $o=self.Os;$o.Fbt=class extends $o.ubt{constructor(t,s){super(t),this.jbt=s,this.zbt=0,this.Bbt=new Map,this.Ubt("elem-focused",t=>t.Wbt()),this.Ubt("elem-blurred",t=>{t&&t.Qbt()})}$h(){super.$h()}Jbt(t){const s=this.zbt++;return this.Bbt.set(s,t),s}Vbt(t){this.Bbt.delete(t)}Ubt(t,i){this.Hc.tj(this.jbt,t,t=>{const s=this.Bbt.get(t.elementId);i(s,t)})}}}{const ta=self.Os;ta.Ybt=class extends ta.Zh{constructor(t){super(),this.Nct=t,this.Hc=t.b4(),this.Hbt=t.nP()}$h(){this.Nct=null,this.Hc=null,this.Hbt=null}cF(){return this.Nct}b4(){return this.Hc}nP(){return this.Hbt}Lz(){return this.Nct.Lz()}Abt(){}Awt(t){}ySt(t){}MSt(t){}h9(t){}l9(){}o9(){}N9(t){}qbt(){}Lbt(){return null}Zbt(t,s,i){const e=ta.Kh(ta.Event,t,s);e.Xbt=this,i&&Object.assign(e,i),this.cF().pq(e)}}}{const sa=self.Os;sa.Kbt=class extends sa.Zh{constructor(t,s){super(),this.Si=t,this.jbt=s,this.$bt=null,this.Hc=t.b4(),this.Nct=this.Si.cF(),this.txt=this.Nct.gSt(),this.$q=null,this.sZ=null,this.rj=!1,this.aj=!1,this.a0=null,this.hG=!1}$h(){this.hG=!0,this.sxt(),this.ixt(),this.$q=null,this.sZ=null,this.a0&&(this.a0.$h(),this.a0=null),this.Si=null,this.Hc=null,this.Nct=null,this.txt=null}tn(){return this.hG}xB(){return this.Si}b4(){return this.Hc}cF(){return this.Nct}nP(){return this.txt.nP()}gSt(){return this.txt}hxt(){return this.Si.q3()}ZF(t){return this.Hc.ZF(t,this.Si,null)}nxt(t){return this.Hc.nxt(t,this.Si,null)}KF(t){return this.Hc.KF(t,this.Si,null)}rxt(t,s){return this.Hc.rxt(t,this.Si,s)}oxt(t,s){return this.Hc.oxt(t,this.Si,s)}axt(t){return this.Hc.axt(t)}uxt(t,s){this.Hc.tj(this.jbt,t,s)}lxt(t){for(const[s,i]of t)this.uxt(s,i)}cxt(t,s){this.Hc.Xc(this.jbt,t,s)}fxt(t,s){return this.Hc.u4(this.jbt,t,s)}dxt(t,s){if(!this.Hc.yO())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.jbt,handler:t,data:s,responseId:null});this.cxt(t,s)}pxt(t){if(!t)throw new Error("cannot set empty component id");this.$bt=t}mxt(){if(this.$bt)return this.Hc.dj(this.$bt);throw new Error("wrapper extension component id not set")}mj(t,s){if(!this.$bt)throw new Error("wrapper extension component id not set");this.Hc.mj(this.$bt,t,s)}gxt(t){for(const[s,i]of t)this.mj(s,i)}KU(t,s){if(!this.$bt)throw new Error("wrapper extension component id not set");this.Hc.KU(this.$bt,t,s)}$U(t,s){if(this.$bt)return this.Hc.$U(this.$bt,t,s);throw new Error("wrapper extension component id not set")}uX(){}yxt(){}Mxt(){this.rj||(this.$q||(this.$q=()=>this.uX()),this.Hc.Nf().addEventListener("tick",this.$q),this.rj=!0)}sxt(){this.rj&&(this.Hc.Nf().removeEventListener("tick",this.$q),this.rj=!1)}wxt(){return this.rj}Sxt(){this.aj||(this.sZ||(this.sZ=()=>this.yxt()),this.Hc.Nf().addEventListener("tick2",this.sZ),this.aj=!0)}ixt(){this.aj&&(this.Hc.Nf().removeEventListener("tick2",this.sZ),this.aj=!1)}Txt(){return this.aj}bxt(){return[]}aT(){return null}uT(t){}nnt(t){}cnt(t,s){}nrt(t,s,i){if(0!==s){const e=this.nnt(t);if("number"!=typeof e)throw new Error("expected number");this.cnt(t,e+s,i)}}xxt(t,s,i,e){}vxt(t,...s){t.call(this,...s)}Cxt(t,...s){return t.call(this,...s)}Lbt(){return null}Zbt(t,s,i){if(this.Si.Ixt()){const e=this.hxt(),h=sa.Kh(sa.Event,t,s);h.rz=e,i&&Object.assign(h,i),e.dispatchEvent(h)}}xS(){return!1}}}{const ia=self.Os;ia.Gxt=class extends ia.Kbt{constructor(t,s){super(t,s),this.est=t.t4(),this.Ext=null,this._xt=null}$h(){if(this.Ext){const t=this.Hc.Nf();t.removeEventListener("renderercontextlost",this.Ext),t.removeEventListener("renderercontextrestored",this._xt),this.Ext=null,this._xt=null}this.est=null,super.$h()}Nxt(){this.Dxt()}Axt(){}Lxt(){}Dxt(){if(!this.Ext){this.Ext=()=>this.uJ(),this._xt=()=>this.Oxt();const t=this.Hc.Nf();t.addEventListener("renderercontextlost",this.Ext),t.addEventListener("renderercontextrestored",this._xt)}}uJ(){this.Axt()}Oxt(){this.Lxt()}t4(){return this.est}Yst(){return!1}Vst(){if(!this.Yst())throw new Error("original size not known");const t=this.Rxt();if(t)return t.Yp()}qst(){if(!this.Yst())throw new Error("original size not known");const t=this.Rxt();if(t)return t.nm()}Rxt(){return null}Pxt(){const t=this.Rxt();if(t){const s=t.pb();if(s)return[s.Yp(),s.nm()]}return[100,100]}kxt(){const t=this.Rxt();return t?t.cE():null}Fxt(){const t=this.Rxt();return t?t.jxt():null}zxt(){const t=this.Rxt();return!!t&&t.Bxt()}DSt(t){const s=this.Si.t4();return[s.qS(),s.KS(),s.Dj()]}qbt(t,s,i){}Uxt(t,s){}vH(){return!0}}}{const ea=self.Os,ha=ea.Kh(ea.Rect);ea.Wxt=class extends ea.Gxt{constructor(t,s){super(t,s),this.Qxt=this.nP().Jbt(this),this.Jxt=!0,this.Vxt=!1,this.Yxt=!1,this.Hxt=-.2,this.qxt=ea.Kh(ea.Rect,0,0,-1,-1);const i=this.Hc.dR();this.Zxt=i.pU(),this.Xxt=i.mU(),this.Kxt=-1,this.$xt=-1,this.tvt=!1,this.Mxt()}$h(){this.nP().Vbt(this.Qxt),this.svt("destroy"),this.Qxt=-1,super.$h()}V5(){if(this.Hc.yO())throw new Error("not valid in worker mode");return this.ivt("get-element")}svt(t,s){(s=s||{}).elementId=this.Qxt,this.cxt(t,s)}ivt(t,s){return(s=s||{}).elementId=this.Qxt,this.dxt(t,s)}evt(t,s){return(s=s||{}).elementId=this.Qxt,this.fxt(t,s)}hvt(t){t=t||{};const s=this.t4();t.elementId=this.Qxt,t.isVisible=s.bk(),t.htmlIndex=s.s4().TU(),t.htmlZIndex=s.bU(),Object.assign(t,this.nvt()),this.Jxt=!!t.isVisible,this.dxt("create",t),this.rvt(!0)}kTt(t){this.Jxt!==(t=!!t)&&(this.Jxt=t,this.svt("set-visible",{isVisible:t}))}uX(){this.rvt(!1)}ovt(){const t=this.Hc.dR().GU();return"Android"===ea.hi.ni&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}rvt(l){if(!this.xB().EU()){let t=this.t4(),s=t.s4(),i=t.Lj(),[e,h]=s.iF(i.fu(),i.du()),[n,r]=s.iF(i.pu(),i.mu()),o=this.Hc.dR(),a=o.yR(),u=o.wR();if(t.bk()&&s.bk())if(!this.ovt()&&(n<=0||r<=0||a<=e||u<=h))this.kTt(!1);else{ha.set(e,h,n,r);const c=o.pU(),f=o.mU(),d=s.TU(),p=t.bU();if(!l&&ha.equals(this.qxt)&&this.Zxt===c&&this.Xxt===f&&this.Kxt===d&&this.$xt===p)this.kTt(!0);else{this.qxt.C(ha),this.Zxt=c,this.Xxt=f,this.Kxt=d,this.$xt=p,this.kTt(!0);let t=null;this.Yxt&&(t=s._U()+this.Hxt),this.svt("update-position",{left:Math.round(this.qxt.fu()),top:Math.round(this.qxt.du()),width:Math.round(this.qxt.width()),height:Math.round(this.qxt.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this.kTt(!1)}}H5(){this.ivt("focus",{focus:!0})}q5(){this.ivt("focus",{focus:!1})}Wbt(){this.Vxt=!0}Qbt(){this.Vxt=!1}UTt(){return this.Vxt}X5(t,s){this.svt("set-css-style",{prop:ea.Do(t),val:s})}FTt(t,s){this.svt("set-attribute",{name:t,val:s})}jTt(t){this.svt("remove-attribute",{name:t})}avt(){this.tvt||(this.tvt=!0,Promise.resolve().then(()=>{this.tvt=!1,this.svt("update-state",this.nvt())}))}nvt(){}uvt(){return this.Qxt}}}{const na=self.Os,ra=self.uz;na.lvt=class extends na.Zh{constructor(t){super(),this.Hc=t.runtime,this.cvt=na.Kh(na.ql),this.fvt=na.Kh(na.ql),this.bbt=t.xbt,this._bt=t.Nbt,this.dvt=null}$h(){this.fvt.$h(),this.cvt.$h(),this.Hc=null}b4(){return this.Hc}Abt(){}Swt(){return this.bbt}Lbt(t=!1){let s=this._bt;return t&&"function"!=typeof s&&2<=this.Swt()?globalThis.FU:s}pvt(t){this.cvt.$l(t)}RZ(){return this.cvt.tc()}aV(t){this.fvt.$l(t)}cV(t){this.fvt.Jl(t)}gP(){return this.fvt.tc()}Rbt(){const t=this.Swt(),s=(na.NR.Pbt(this,t),this.Lbt(!0));if(s){if(this.dvt=new s,!(this.dvt instanceof ra))throw new TypeError("behavior class must derive from IBehavior")}else this.dvt=new ra;na.NR.kbt(t)}sz(){return this.dvt}}}{const oa=self.Os;oa.mvt=class extends oa.Zh{constructor(t){super(),this.Hc=t.b4(),this.hMt=t,this.Nct=t.cF(),this.gvt=t.iz(),this.gvt.pvt(this.Nct)}$h(){this.Hc=null,this.hMt=null,this.Nct=null,this.gvt=null}Abt(){}nz(){return this.hMt}cF(){return this.Nct}b4(){return this.Hc}iz(){return this.gvt}}}{const aa=self.Os;aa.yvt=class extends aa.Zh{constructor(t,s){super(),this.Mvt=t,this.jbt=s,this.Si=t.oz(),this.Hc=t.b4(),this.hMt=t.nz(),this.txt=this.hMt.gSt(),this.rj=!1,this.aj=!1,this.ZU=!1,this.a0=null}$h(){this.sxt(),this.ixt(),this.wvt(),this.a0&&(this.a0.$h(),this.a0=null),this.Mvt=null,this.Si=null,this.Hc=null,this.hMt=null,this.txt=null}iz(){return this.hMt.iz()}Svt(){return this.Mvt}oz(){return this.Si}cF(){return this.Si.cF()}t4(){return this.Si.t4()}b4(){return this.Hc}nz(){return this.hMt}gSt(){return this.txt}hxt(){return this.Mvt.hxt()}ZF(t){return this.Hc.ZF(t,this.Si,this.hMt)}nxt(t){return this.Hc.nxt(t,this.Si,this.hMt)}KF(t){return this.Hc.KF(t,this.Si,this.hMt)}Tvt(){}uX(){}yxt(){}bvt(){}Mxt(){this.rj||(this.Hc.QU(this),this.rj=!0)}sxt(){this.rj&&(this.Hc.JU(this),this.rj=!1)}wxt(){return this.rj}Sxt(){this.aj||(this.Hc.VU(this),this.aj=!0)}ixt(){this.aj&&(this.Hc.YU(this),this.aj=!1)}Txt(){return this.aj}xvt(){this.ZU||(this.Hc.HU(this),this.ZU=!0)}wvt(){this.ZU&&(this.Hc.qU(this),this.ZU=!1)}vvt(){return this.ZU}bxt(){return[]}uxt(t,s){this.Hc.tj(this.jbt,t,s)}Cvt(t,s){}aT(){return null}uT(t){}nnt(t){}cnt(t,s){}nrt(t,s){if(0!==s){const i=this.nnt(t);if("number"!=typeof i)throw new Error("expected number");this.cnt(t,i+s)}}xxt(t,s,i,e){}vxt(t,...s){t.call(this,...s)}Cxt(t,...s){return t.call(this,...s)}Lbt(){return null}Zbt(t,s,i){if(this.Mvt.Ixt()){const e=this.hxt(),h=aa.Kh(aa.Event,t,s);h.Ivt=e,h.rz=e.rz,i&&Object.assign(h,i),e.dispatchEvent(h)}}}}{let s=function(t){if(t!==i)throw new Error("invalid internal API token")},n=(s,self.Os),i=(n.P9={},n.dat={},n.Rs()),e=[],h=[],r=[],o=null,a=null,t=null,u=null,l=new Map,c=new Map;n.NR=class extends n.Zh{constructor(t,s){super(),this.Hc=t,this.Gvt=[],this.Fyt=null,this.Evt=[],this._vt=new Map,this.Nvt=null,this.Dvt=null,this.Avt=new Set(s)}Lvt(t){const s=t[19],i=this.Hc.Ugt(t[0]);if(!i)throw new Error("missing plugin");n.T2t(t,i,s);const e=2<=s?n.ubt:i,h=n.Kh(e,{runtime:this.Hc,AR:t[1],fbt:t[2],FR:t[5],zR:t[8],mbt:t[9],Mbt:t[13],VR:t[14],PR:t[17],UR:t[18],xbt:s,Nbt:2<=s?i:null});h.Abt(),this.Gvt.push(h),l.set(i,h)}Ovt(){this.Fyt=n.Kh(n.P9.R9,{runtime:this.Hc,AR:!0}),this.Fyt.Abt()}Rvt(t){const i=t[1],e=this.Hc.Ugt(t[0]);if(!e)throw new Error("missing behavior");this._vt.set(e,()=>{const t=2<=i?n.lvt:e,s=n.Kh(t,{runtime:this.Hc,xbt:i,Nbt:2<=i?e:null});s.Abt(),this.Evt.push(s),c.set(e,s),!this.Nvt&&n.dat.solid&&s instanceof n.dat.solid?this.Nvt=s:!this.Dvt&&n.dat.jumpthru&&s instanceof n.dat.jumpthru&&(this.Dvt=s),s.Rbt()})}Pvt(t){const s=this._vt.get(t);s&&(s(),this._vt.delete(t))}static Pbt(t,s=1){if(n.NR.Pbt!==o)throw new Error("invalid method");1===s&&e.push(t),h.push(t)}static kbt(t=1){if(n.NR.kbt!==a)throw new Error("invalid method");1===t&&e.pop(),h.pop()}static mF(){if(n.NR.mF!==t)throw new Error("invalid method");if(0===e.length)throw new Error("no init object set");return e.at(-1)}static _R(t){if(n.NR._R!==u)throw new Error("invalid method");if(s(t),0===h.length)throw new Error("no init object set");return h.at(-1)}static kvt(t){r.push(t)}static Fvt(){r.pop()}static HF(){if(0===r.length)throw new Error("no init properties set");return r.at(-1)}jvt(){for(const t of this.Gvt)t.Rbt()}static qR(t){return l.get(t)||null}static lz(t){return c.get(t)||null}jyt(){return this.Fyt}zvt(){return this.Nvt}Bvt(){return this.Dvt}dj(t){return this.Avt.has(t)}},o=n.NR.Pbt,a=n.NR.kbt,t=n.NR.mF,u=n.NR._R}{const ua=self.Os,la=new Set;ua.Uvt=class extends ua.Zh{constructor(){super(),this.Wvt=0,this.KQ="",this.$Q=0,this.Qvt=0,this.Jvt=0,this.Om=0,this.Rm=0,this.Vvt=!1,this.Yvt=!1,this.Hvt=null,this.qvt="",this.KI=ua.Kh(ua.Rect),this.Zvt=ua.Kh(ua.Uu),this.Xvt="",this.Kvt=new self.S4(this),la.add(this)}$h(){this.sG(),this.Hvt&&0===this.Hvt.fJ()&&this.Hvt.$h(),this.Hvt=null,la.delete(this),this.$vt()}static uJ(){for(const t of la)t.qvt="",t.KI.set(0,0,0,0),t.Zvt.ul(t.KI)}tCt(t){this.KQ=t[0],this.$Q=t[1],this.Qvt=t[2],this.Jvt=t[3],this.Om=t[4],this.Rm=t[5],this.Vvt=t[6],this.Yvt=!0}sCt(t,s){if(this.Hvt)throw new Error("already loaded asset");this.KQ=s;const i={};return ua.ao(s)&&(i.GQ="remote"),this.T4(t,i),this.Hvt.NQ()}iCt(t,s){if(this.Hvt)throw new Error("already loaded asset");this.KQ="",this.$Q=s.size,this.Hvt=ua.Kh(ua.EQ,t.rO(),{blob:s,size:this.$Q,GQ:"local"})}eCt(t){if(t===this)throw new Error("cannot replace with self");this.Wvt++,this.sG(),this.KQ=t.KQ,this.$Q=t.$Q,this.Qvt=t.Qvt,this.Jvt=t.Jvt,this.Om=t.Om,this.Rm=t.Rm,this.Vvt=t.Vvt,this.Yvt=t.Yvt,this.Hvt=t.Hvt,this.qvt=t.qvt,this.KI=t.KI,this.Zvt=t.Zvt,this.$vt()}_Q(){return this.KQ}Yl(){return this.$Q}hCt(){return this.Qvt}nCt(){return this.Jvt}Bxt(){return this.Vvt}Yp(){return this.Om}nm(){return this.Rm}rCt(){return this.Hvt.Yp()}oCt(){return this.Hvt.nm()}T4(t,s){if(this.Hvt)throw new Error("already got asset");s=Object.assign({},s,{url:this._Q(),size:this.Yl()}),this.Hvt=t.IQ(s)}eJ(){return this.Hvt&&this.Hvt.eJ()}async o6(t,s){if(!this.Hvt)throw new Error("no asset");if(this.qvt)throw new Error("already loaded texture");const i=this.Wvt,e=(this.qvt="loading",await this.Hvt.o6(t,s));if(this.Wvt!==i)return null;if(!e)return this.qvt="",null;this.qvt="loaded",this.Yvt||(this.Om=e.Yp(),this.Rm=e.nm(),this.Yvt=!0);const h=this.Vvt?this.Rm:this.Om,n=this.Vvt?this.Om:this.Rm;return this.KI.set(this.Qvt,this.Jvt,this.Qvt+h,this.Jvt+n),this.KI.Ct(e.Yp(),e.nm()),this.Zvt.ul(this.KI),this.Vvt&&this.Zvt.ml(),e}sG(){this.qvt&&(this.Hvt&&this.Hvt.sG(),this.qvt="",this.KI.set(0,0,0,0),this.Zvt.ul(this.KI))}pb(){return this.Hvt&&"loaded"===this.qvt?this.Hvt.pb():null}cE(){return this.KI}jxt(){return this.Zvt}QB(){return this.Kvt}aCt(){return this.Hvt}async uCt(t){t=t||await this.Hvt.dJ();const s=ua.bo(this.Om,this.Rm),i=s.getContext("2d");return this.Vvt?(i.rotate(Math.PI/-2),i.translate(-this.Rm,0),i.drawImage(t,this.Qvt,this.Jvt,this.Rm,this.Om,0,0,this.Rm,this.Om)):i.drawImage(t,this.Qvt,this.Jvt,this.Om,this.Rm,0,0,this.Om,this.Rm),s}async lCt(t){if(!this.Xvt){const s=await this.uCt(t),i=await ua.xo(s);this.Xvt=URL.createObjectURL(i)}return this.Xvt}$vt(){this.Xvt&&(URL.revokeObjectURL(this.Xvt),this.Xvt="")}}}{const ca=self.Os;ca.cCt=class extends ca.Zh{constructor(t){super(),this.hn=t[0],this.fCt=t[1],this.qMt=!!t[2],this.Rrt=t[3],this.dCt=t[4],this.pCt=!!t[5],this.qJ=t[6],this.mCt=t[7].map(t=>ca.Kh(ca.gCt,t)),this.yCt=new self.gz(this)}static MCt(t,s){const i=ca.Kh(ca.cCt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.mCt.push(ca.gCt.MCt(t)),i}$h(){for(const t of this.mCt)t.$h();ca.Nr(this.mCt)}wCt(t){for(const s of this.mCt)s.Lz().T4(t)}SCt(s,i){return Promise.all(this.mCt.map(t=>t.Lz().o6(s,i)))}TCt(){for(const t of this.mCt)t.Lz().sG()}zc(){return this.hn}_V(){return this.qJ}Cz(){return this.mCt.length}Gz(){return this.mCt}bCt(t){if((t=Math.floor(t))<0||t>=this.mCt.length)throw new RangeError("invalid frame");return this.mCt[t]}xCt(t,s){(s=Math.floor(s))<0?this.mCt.unshift(t):s>=this.mCt.length?this.mCt.push(t):this.mCt.splice(s,0,t)}vCt(t){if((t=Math.floor(t))<0||t>=this.mCt.length)throw new RangeError("invalid frame");this.mCt[t].$h(),this.mCt.splice(t,1)}CCt(i){for(let t=0,s=this.mCt.length;t<s;++t)if(ca.lh(this.mCt[t].$z(),i))return t;return-1}ICt(t){if("string"!=typeof t)return t;{const s=this.CCt(t);if(-1===s)throw new Error("cannot find animation frame with tag "+t);return s}}yz(){return this.fCt}wz(){return this.qMt}Sz(){return this.Rrt}bz(){return this.dCt}vz(){return this.pCt}GCt(){return this.yCt}}}{const fa=self.Os,da=(()=>{const i=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),e=new Uint8Array(i.length);for(let t=0,s=i.length;t<s;++t)e[t]=i.charCodeAt(t);return new Blob([e],{type:"image/png"})})();fa.gCt=class extends fa.Zh{constructor(t){super(),this.ECt=fa.Kh(fa.Uvt),this.ECt.tCt(t),this._Ct=t[7],this.NCt=fa.Kh(fa.Ua,t[8],t[9]),this.DCt=t[10].map(t=>fa.Kh(fa.ACt,this,t)),this.LCt=new Map;for(const i of this.DCt)this.LCt.set(i.zc().toLowerCase(),i);this.OCt=null;const s=t[11];6<=s.length&&(this.OCt=fa.Kh(fa.bl,s)),this.Rg=t[12]||"",this.RCt=new self.Az(this)}static MCt(t){const s=fa.Kh(fa.gCt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.ECt.iCt(t,da),s}$h(){this.OCt&&(this.OCt.$h(),this.OCt=null),this.ECt.$h(),this.ECt=null}Lz(){return this.ECt}Oz(){return this._Ct}Pz(){return this.NCt.Ya()}Fz(){return this.NCt.qa()}qz(){return this.OCt}Vz(t){return this.LCt.get(t.toLowerCase())||null}Jz(t){return(t=Math.floor(t))<0||t>=this.DCt.length?null:this.DCt[t]}Bz(){return this.DCt.length}$z(){return this.Rg}Ez(){return this.RCt}}}{const pa=self.Os;pa.ACt=class extends pa.Zh{constructor(t,s){super(),this.PCt=t,this.hn=s[0],this.kCt=pa.Kh(pa.Ua,s[1],s[2])}$h(){}zc(){return this.hn}qS(){return this.kCt.Ya()}KS(){return this.kCt.qa()}FCt(){return this.kCt}}}{const v=self.Os,ma=self.C3Debugger,ga=self.eP;v.iut=class extends v.Zh{constructor(s,t,i){super();const e=s.Ugt(i[1]),[h,n]=(this.Hc=s,this.Hbt=v.NR.qR(e),this.txt=null,this.jCt=e.Instance,this.Og=t,this.qJ=i[11],this.hn=i[0],this.Cyt=this.Hc.r1t(i[14]),this.zCt=!!i[9],this.BCt=!!i[2],this.UCt=!!i[10],this.WCt=i[3].map(t=>({sid:t[0],type:t[1],name:t[2],QCt:s.r1t(t[3])})),this.JCt=i[4],this.VCt=i[5],this.cbt=this.Hbt.RR(),this.YCt=v.Kh(v.Event.Nf),this.N8=null,s.uO().K4());if(this.HCt=v.Kh(v.qCt,h,n),this.ZCt=!0,this.XCt=null,this.KCt=null,this.$Ct=-1,this.tIt=null,this.sIt=null,this.iIt=null,this.eIt=null,this.hIt=null,this.nIt=!1,this.rIt=null,this.oIt=i[8].map(t=>v.aIt.Ob(this,t)),this.uIt=[],this.lIt=new Map,this.cIt=new Map,this.fIt=new Set,this.dIt=new Map,this.pIt=v.Kh(v._ct,this),this.mIt=null,this.gIt=0,this.yIt=!1,this.rIt=null,this.ECt=null,this.MIt=null,this.wIt=null,this.SIt=null,this.TIt=0,this.twt=new Map,this.swt=new Map,this.yJ=[],this.bIt=new Map,this.xIt=!0,this.Hbt.BR()&&(this.N8=v.Kh(v.D8,this,i[12])),i[6]&&(this.ECt=v.Kh(v.Uvt),this.ECt.tCt(i[6])),i[7]){this.MIt=i[7].map(t=>v.Kh(v.cCt,t)),this.wIt=new Map,this.SIt=new Map;for(const a of this.MIt)this.wIt.set(a.zc().toLowerCase(),a),this.SIt.set(a._V(),a)}this.BCt?(this.XCt=[],this.KCt=new Set,this.$Ct=this.Hc.vIt()):(this.tIt=[],this.sIt=new Set,this.iIt=[],this.eIt=[],this.hIt=[]);const r=this.Hbt.Swt();if(r<2&&(this.txt=v.Kh(e.CIt,this,i[15]),!(this.txt instanceof v.Ybt)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.IIt=null,this.GIt=null,this._7=v.Kh(v.Event.Nf),v.NR.Pbt(this,r);let o;if(o=2<=r?(o=e.CIt)||globalThis.BB:this.txt.Lbt()){if(this.IIt=new o(r<2?this:null),r<2&&!(this.IIt instanceof ga))throw new TypeError("script interface class must derive from IObjectClass");if(2<=r&&!(this.IIt instanceof globalThis.BB))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.IIt=new ga;if(v.NR.kbt(r),i[13]){const u=i[13];if(u){const l=u[0],c=u[1],f=u[2];this.txt.qbt(l,c,f)}}this.Hc.EIt()&&!this.BCt&&!this.UCt&&this.cbt||this.Abt(),this.Hbt.LR()&&(this.Hbt.Obt(this),this._It(i)),this.NIt=null}static Ob(t,s,i){return v.Kh(v.iut,t,s,i)}$h(){if(this.YCt.$h(),this.YCt=null,this.ECt&&(this.ECt.$h(),this.ECt=null),this.MIt){for(const t of this.MIt)t.$h();v.Nr(this.MIt),this.wIt.clear(),this.SIt.clear()}this.NIt=null,this.pIt.$h(),this.pIt=null,this.twt.clear(),this.swt.clear(),this.rIt=null,this.Hc=null}DIt(i){for(let t=1,s=i.length;t<s;++t){const e=this.Hc.Z8(i[t]);this.XCt.push(e),this.KCt.add(e),e.tIt.push(this),e.sIt.add(this)}}AIt(t){this.nIt=!0,this.rIt=t}xF(){return this.nIt}s9(){return this.rIt}LIt(){let t=0;if(!this.BCt)for(const s of this.tIt)for(const i of s.OIt()){const e=i.zc().toLowerCase();this.lIt.set(e,i),this.cIt.set(e,t),this.uIt.push(i),++t}for(const h of this.OIt()){const n=h.zc().toLowerCase();this.lIt.set(n,h),this.cIt.set(n,t),this.uIt.push(h),++t}for(const r of this.uIt)this.fIt.add(r.iz().constructor);if(!this.BCt&&this.tIt.length){let t=this.Hc.RIt(),s=(v.Ar(this.iIt,t,0),v.Ar(this.eIt,t,0),v.Ar(this.hIt,t,0),[]),i=0,e=0,h=0;for(const o of this.tIt){const a=o.iMt(),u=(this.iIt[a]=i,i+=o.PIt(),this.eIt[a]=e,e+=o.kIt(),this.hIt[a]=h,h+=o.FIt(),o._P());if(u&&this.N8)for(const l of u.NP())s.push(l.jIt(this.N8))}this.N8&&this.N8.zIt(s)}}_It(t){const s=this.Hc.BIt(),i=v.Kh(v.Instance,{runtime:this.Hc,lF:this,uid:s});i.UIt(t[16],[]),this.Hc.WIt(s,i),this.yJ.push(i)}gSt(){return this.txt}QIt(){return this.UCt}Nf(){return this.YCt}Abt(){this.BCt||(this.txt?this.txt.Abt():this.IIt.UB())}JIt(){return 0<this.TIt}async h9(t){this.BCt||(this.TIt++,1===this.TIt&&(this.txt?await this.txt.h9(t):await this.IIt.JB(this.Hc.dR().VIt())))}l9(){if(!this.BCt){if(this.TIt--,this.TIt<0)throw new Error("released textures too many times");0===this.TIt&&(this.txt?this.txt.l9():this.IIt.VB(this.Hc.dR().VIt()))}}o9(){if(this.BCt)throw new Error("not applicable to family");this.txt?this.txt.o9():this.IIt.YB()}async N9(t){this.BCt||(this.txt?await this.txt.N9(t):await this.IIt.HB(this.Hc.dR().VIt()))}b4(){return this.Hc}nP(){return this.Hbt}YIt(){return this.jCt}zc(){return this.hn}r1t(){return this.Cyt}iO(){return this.Og}_V(){return this.qJ}TV(){return this.BCt}oV(){return this.zCt}RR(){return this.cbt}iMt(){return this.$Ct}OIt(){return this.oIt}kIt(){return this.JCt}HIt(t){return t&&this.fIt.has(t)}PIt(){return this.WCt.length}qIt(){return this.WCt.map(t=>t.sid)}ZIt(s){return this.WCt.findIndex(t=>t.sid===s)}Nst(s){return this.WCt.findIndex(t=>t.name===s)}XIt(){return this.WCt.map(t=>t.name)}KIt(){return this.WCt.map(t=>t.QCt)}Ast(t){if((t=Math.floor(t))<0||t>=this.WCt.length)throw new RangeError("invalid instance variable index");return this.WCt[t].type}Dst(t){if((t=Math.floor(t))<0||t>=this.WCt.length)throw new RangeError("invalid instance variable index");return this.WCt[t].name}FIt(){return this.VCt}$It(){return this.uIt}hht(t){return this.lIt.get(t.toLowerCase())||null}Ost(t){const s=this.cIt.get(t.toLowerCase());return void 0===s?-1:s}_P(){return this.N8}BR(){return this.Hbt.BR()}tGt(){return this.N8&&this.N8.sGt()}q1t(){return this.pIt}yP(){return this.pIt.yP()}Lz(){return this.ECt}tV(t){this.mIt=t}K8(){return this.mIt}sV(t){this.gIt=t}iGt(){return this.gIt}eGt(){return this.MIt}hGt(){return this.MIt.length}d1t(){return this.tIt}TSt(t){return this.sIt.has(t)}Cmt(){return this.XCt}bV(t){return this.KCt.has(t)}oMt(t){return this.eIt[t]}sMt(t){return this.iIt[t]}uyt(t){this.dIt.set(t.pyt().toLowerCase(),t)}lyt(t){return!!this.Syt(t)}Syt(t){const s=this.dIt.get(t.toLowerCase());return s&&s.zl()?s:null}nGt(){return this.MIt}rGt(t){if(this.MIt)return this.wIt.get(t.toLowerCase())||null;throw new Error("no animations")}oGt(t){if(this.MIt)return this.SIt.get(t)||null;throw new Error("no animations")}aGt(t){if(this.rGt(t))throw new Error(`animation name '${t}' already exists`);const s=v.cCt.MCt(this.b4(),t);return this.MIt.push(s),this.wIt.set(s.zc().toLowerCase(),s),this.SIt.set(s._V(),s),s}uGt(t){const s=this.rGt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.MIt.length)throw new Error("cannot remove last animation");const i=this.MIt.indexOf(s);this.MIt.splice(i,1),this.wIt.delete(s.zc().toLowerCase()),this.SIt.delete(s._V()),s.$h()}lGt(){if(this.MIt)return this.MIt[0];throw new Error("no animations")}cGt(){return this.lGt().bCt(0)}fGt(){if(this.MIt){const t=this.cGt().Lz();return[t.Yp(),t.nm()]}return this.ECt?[this.ECt.Yp(),this.ECt.nm()]:[100,100]}iP(){if(this.Hbt.LR())return this.yJ[0];throw new Error("not a single-global plugin")}gP(){return this.yJ}*instances(){yield*this.yJ}*mP(){yield*this.yJ,yield*this.Hc.vTt(this)}wP(){return this.yJ.length}aV(t){this.yJ.push(t)}dGt(){this.xIt=!0}U9(){if(this.xIt&&!this.BCt){let s=this.yJ,i=0;for(let t=s.length;i<t;++i)s[i].pGt(i);const t=this.Hc.mGt();for(const e of t)e.cF()===this&&e.pGt(i++);this.xIt=!1}}gGt(t){const s=this.yJ;if(t<s.length)return s[t];t-=s.length;const i=this.Hc.mGt();for(const e of i)if(e.cF()===this){if(0===t)return e;--t}return null}aTt(t){if(t&&t.xF()&&t.cF()!==this)for(const i of t.vF())if(i.cF()===this)return i;const s=this.yP().gP();return s.length?s[0]:null}pP(t){const s=this.yP().gP();return 0<s.length?s[t.j9()%s.length]:null}*NTt(t,s){let i=this.yP().gP(),e=i.length,h=s.yP(),n=s.yP().gP(),r=n.length,o=t.j9(),a=(!s.TV()&&h.Uct()||(o=n.indexOf(t)),Math.ceil(e/r)),u=e%r,l=0,c;c=0==u||o<u?(l=o*a,a):(l=u*a+(o-u)*(a-1),a-1);for(let t=l,s=l+c;t<s;++t)yield i[t]}Awt(t){this.txt?.Awt(t)}Lgt(){if(this.nIt&&!this.BCt){this.U9();const t=this.yP(),s=t.Zct(),i=t.Uct(),e=this.Hc.Z0t(),h=e&&e.jO()&&e.jO().rft();for(const n of this.rIt.z9())if(n!==this){n.U9();const r=n.yP();if(r.qct(i),!i){const o=r.Zct();v.Nr(o);for(const a of s)o.push(n.gGt(a.j9()));if(h){const u=t.Xct(),l=r.Xct();v.Nr(l);for(const c of u)l.push(n.gGt(c.j9()))}}}}}kwt(t,s){for(const i of this.s9().z9()){const e=i.yP();t?v._r(e.Xct(),s):v._r(e.Zct(),s)}}yGt(){return this.HCt}MGt(t){this.ZCt=!!t}wGt(){if(this.ZCt&&this.cbt){for(const t of this.yJ)t.t4().SGt();for(const s of this.Hc.mGt())s.cF()===this&&s.t4().SGt();this.ZCt=!1}}TGt(s,t,i){if(t){const e=this.bIt.get(t);e&&(e.delete(s),0===e.size)&&this.bIt.delete(t)}if(i){let t=this.bIt.get(i);t||(t=new Set,this.bIt.set(i,t)),t.add(s)}}bGt(){if(this.TV()){const t=new Set;for(const s of this.XCt)for(const i of s.bGt())t.add(i);return t.values()}return this.bIt.keys()}Iwt(){return this.twt||(this.twt=new Map),this.twt}Gwt(){return this.swt||(this.swt=new Map),this.swt}xGt(){return this.HIt(v.dat.solid)}vGt(){return this.HIt(v.dat.jumpthru)}CGt(){return this.HIt(v.dat.NoSave)}nV(){return this.HIt(v.dat.Persist)}VH(){const t={instances:this.yJ.map(t=>t.aT())};return this.twt&&this.twt.size&&(t.ex=v._o(this.twt)),t}YH(t,e){this.twt&&(this.twt.clear(),this.twt=null);const s=t.ex,h=(s&&(this.twt=v.No(s)),this.yJ),n=t.instances;for(let t=0,s=Math.min(h.length,n.length);t<s;++t)h[t].uT(n[t]);for(let t=n.length,s=h.length;t<s;++t)this.Hc.MF(h[t]);for(let i=h.length,t=n.length;i<t;++i){let t=n[i],s=null;if(!this.RR()||(s=this.Hc.N3().Q7(t.w.l))){const r=this.Hc.rV(this.mIt||this,s,!1,0,0,!0);r.uT(t),e&&e.add(r)}}this.NIt=n,this.dGt()}IGt(){return this.NIt}GGt(){this.NIt=null}EGt(){for(let t=0,s=this.yJ;t<s;++t)this.yJ[t].EGt()}$R(){return this.IIt}_O(){return this._7}_Gt(){return this.GIt}SP(t){this.GIt=t}pq(t){const s=this.Hc,i=s.mq()&&!s.LO().CP();i&&ma.StartMeasuringScriptTime(),this._7.dispatchEvent(t),i&&ma.AddScriptTime()}}}{const ya=self.Os;ya.NGt=class extends ya.Zh{constructor(t,s){super(),this.Hc=t,this.DGt=s;for(const i of this.DGt)i.AIt(this)}$h(){this.Hc=null}b4(){return this.Hc}t9(){return this.DGt}z9(){return this.DGt}Q9(){return this.DGt.some(t=>t.RR())}}}{let w=self.Os,h=self.C3Debugger,r=w.NR,o=[],a=0,S=new WeakMap,e=new WeakMap;w.Instance=class extends w.Zh{constructor(t){if(w.NR!==r)throw new Error("invalid addon manager");super(),this.Hc=t.runtime,this.AGt=t.lF,this.est=null,this.LGt=null,this.OGt=null,this.RGt=0,this.PGt=t.uid,this.kGt=a++,this.Bwt=0,this.FGt=null;const s=w.Jr(t.tags),i=(0<s.length&&(this.FGt=new Set(s)),this.jGt=o,this.zGt=o,this.AGt.$It()),e=(0<i.length&&(this.zGt=i.map((t,s)=>w.Kh(w.BGt,{runtime:this.Hc,ez:t,rz:this,index:s}))),this.UGt=this.AGt.xF()?[]:null,this.WGt=-1,this.YCt=null,this.nP());if(e.xS()&&(this.Bwt|=4),e.RR())if(this.est=w.Kh(w.QGt,this,t.vj),t.JGt)this.est.VGt(t.JGt);else{this.est.YGt();const[h,n]=this.AGt.fGt();this.est.LG(h,n),this.cF().tGt()&&this.est.xj().HGt()}t.qGt?this.ZGt(t.qGt):this.XGt()}$h(){if(this.OGt&&(this.OGt.gF(),this.OGt=null),0<this.zGt.length){for(const i of this.zGt)i.$h();w.Nr(this.zGt)}this.LGt&&(this.LGt.$h(),this.LGt=null);const t=S.get(this),s=(t&&(t.clear(),S.delete(this)),e.get(this));s&&(s.clear(),e.delete(this)),this.UGt&&w.Nr(this.UGt),this.YCt&&(this.YCt.$h(),this.YCt=null),this.FGt&&this.FGt.clear(),this.FGt=null,this.Hc=null,this.AGt=null,0<this.jGt.length&&w.Nr(this.jGt),this.est&&(this.est.$h(),this.est=null)}ZGt(t){0<t.length&&(this.jGt=[],w.Or(this.jGt,t))}XGt(){const s=this.AGt.PIt();if(0!==s){this.jGt=[];const i=[0,0,""];for(let t=0;t<s;++t)this.jGt.push(i[this.AGt.Ast(t)])}}UIt(t,i){if(this.LGt)throw new Error("already got sdk instance");for(let t=0,s=this.zGt.length;t<s;++t){const e=this.zGt[t];e.UIt(i?i[t]:null)}const s=this.nP().Swt();if(s<2){if(this.LGt=w.Kh(this.AGt.YIt(),this,t),!(this.LGt instanceof w.Kbt))throw new Error("sdk type must derive from SDKInstanceBase");!this.nP().RR()&&this.AGt._Gt()&&this.q3()}else{const h=this.nP().Lbt();this.KGt(h.Instance,t)}}Y5(){return this.LGt??this.OGt}t4(){return this.est}b4(){return this.Hc}u3(){return this.WGt}EF(){const t=this.WGt;return-1===t?this.b4().u3():t}l3(t){((t=+t)<0||!isFinite(t))&&(t=0),this.WGt=t,this.cF().tGt()&&this.Hc.$Gt(this,!0)}NF(){this.WGt=-1,this.cF().tGt()&&this.Hc.$Gt(this,!1)}RH(){return this.Hc.tEt(this)}Nf(){return this.YCt||(this.YCt=w.Kh(w.Event.Nf)),this.YCt}kT(t){this.LGt?this.LGt.kT(t):this.OGt.sU(this.Hc.dR().VIt())}Abt(t){this.LGt.Abt(t)}sEt(){this.Bwt|=2}iEt(){return 0!=(2&this.Bwt)}eEt(){this.Bwt|=1}EU(){return 0!=(1&this.Bwt)}xS(){return 0!=(4&this.Bwt)||this.LGt.xS()}hEt(){this.Bwt|=32}IH(){return 0!=(32&this.Bwt)}nEt(){return 0!=(8&this.Bwt)}rEt(t){t?this.Bwt|=8:this.Bwt&=-9}oEt(){return 0!=(16&this.Bwt)}aEt(t){t?this.Bwt|=16:this.Bwt&=-17}uEt(){return 0!=(64&this.Bwt)}lEt(t){t?this.Bwt|=64:this.Bwt&=-65}cEt(t,s){t<<=16,s?this.Bwt|=t:this.Bwt&=~t}fEt(t){return 0!=(this.Bwt&t<<16)}Rxt(){return this.LGt.Rxt()}Pxt(){return this.LGt.Pxt()}kxt(){return this.LGt.kxt()}Fxt(){return this.LGt.Fxt()}zxt(){return this.LGt.zxt()}DSt(t){return this.LGt.DSt(t)}cF(){return this.AGt}vH(){return this.LGt.vH()}CTt(t){return t.TV()?t.bV(this.cF()):this.cF()===t}dEt(h,t,s){const i=(t,s)=>{const i=s||t.cF(),e=h.get(i);e?e.add(t):h.set(i,new Set([t]))};if(i(this,t),this.xF())for(const e of this.vF())i(e);if(s)for(const n of this.o5())i(n)}pEt(){if(!this.nP().JR())throw new Error("object does not support scene graph")}f5(){return null!==this.$j()}$j(){const t=this.t4();if(!t)return null;const s=t.$j();return s?s.xB():null}s5(){const t=this.t4();if(!t)return null;const s=t.s5();return s?s.xB():null}*i5(){const t=this.t4();if(t)for(const s of t.i5())yield s.xB()}mEt(t){if(t)for(const s of this.children())if(s===t)return!0;return!1}ZH(){const t=this.t4();return!!t&&t.ZH()}gEt(t){const s=this.t4();if(!s)return[];const i=t.zc();return s.K9().map(t=>t.xB()).filter(t=>t.cF().zc()===i)}K9(){const t=this.t4();return t?t.K9().map(t=>t.xB()):[]}*children(){const t=this.t4();if(t)for(const s of t.children())yield s.xB()}*o5(){const t=this.t4();if(t)for(const s of t.o5())yield s.xB()}h5(){const t=this.t4();return t?t.h5():0}yEt(){return[...this.i5()].length}_Tt(){const t=this.t4();return t?t._Tt():0}r5(t){const s=this.t4();if(!s)return null;const i=s.r5(t);return i?i.xB():null}MEt(){const t=this.t4();if(!t)return NaN;const s=t.$j();return s?s.wEt(t):NaN}SEt(t){for(const s of this.t4().K9())if(s.xB().CF()===t)return!0;return!1}u5(t,s){this.pEt(),t.pEt(),this.t4().u5(t.t4(),s||{})}l5(t){const s=this.t4();s&&s.l5(t.t4())}D5(){const t=this.t4();return!!t&&t.D5()}G9(){const t=this.t4();if(t){const s=t.TEt();if(s)for(const i of s){const e=this.Hc.H3(i[2]);if(e){const h=i[3];this.u5(e,{p5:!!(h>>0&1),g5:!!(h>>1&1),M5:!!(h>>2&1),S5:!!(h>>3&1),b5:!!(h>>4&1),N5:!!(h>>5&1),v5:!!(h>>6&1),I5:!!(h>>7&1),E5:!!(h>>8&1)})}}}}E9(t,s){const i=t.get(this);if(i)for(const e of i.sceneGraphJson.children){const h=s.get(e.index);if(h){const n=e.flags;this.u5(h,{p5:!!(n>>0&1),g5:!!(n>>1&1),M5:!!(n>>2&1),S5:!!(n>>3&1),b5:!!(n>>4&1),N5:!!(n>>5&1),v5:!!(n>>6&1),I5:!!(n>>7&1),E5:!!(n>>8&1)})}}}GF(){const t=this.Hc.bEt();return t?t.hut(this):""}xF(){return null!==this.UGt}B9(t){this.UGt.push(t)}TF(){return this.UGt}xEt(t){return!!this.vEt(t)}vEt(t){const s=this.vF();if(null===s||0===s.length)return!1;for(const i of s)if(i.cF()===t)return i;return null}vF(){return this.UGt}kpt(){for(const t of this.vF())t.cF().yP().Kct(t)}Lwt(){for(const t of this.vF())t.cF().yP().Yct(t)}Owt(t){for(const s of this.vF())s.cF().yP().Zct()[t]=s}Pwt(){for(const t of this.vF())t.cF().yP().Hct(t)}Rwt(t){for(const s of this.vF())s.cF().yP().Xct()[t]=s}nP(){return this.AGt.nP()}pGt(t){this.RGt=t}j9(){return this.AGt.U9(),this.RGt}CF(){return this.PGt}CEt(){return this.kGt}IEt(t){t?this.OF(new Set(t)):this.FGt=null}OF(t){if(0===t.size)this.FGt=null;else{this.FGt?this.FGt.clear():this.FGt=new Set;for(const s of t)this.FGt.add(s)}}AF(){return this.FGt??new Set}XTt(){return Array.from(this.AF()).join(" ")}t2t(t){t=Math.floor(t);for(const s of this.AF()){if(0===t)return s;--t}return""}eht(){return this.zGt}GEt(t){if(t)for(const s of this.zGt)if(s.iz()instanceof t)return s;return null}pat(t){if(!t)return null;const s=this.GEt(t);return s?s.Y5():null}iht(i){const e=this.zGt;for(let t=0,s=e.length;t<s;++t)if(e[t].nz()._V()===i)return t;return-1}EEt(){return this.jGt}XIt(){return this.AGt.XIt()}_Et(){return this.jGt.length}pnt(t){const s=this.jGt;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}$yt(t){return this.jGt[t]}NEt(t){const s=this.jGt[t];return 0===this.AGt.Ast(t)?!!s:s}mnt(t,s){const i=this.jGt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=this.AGt.Ast(t);switch(e){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}rrt(t,s){if(0!==s){const i=this.jGt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}}Iwt(){let t=S.get(this);return t||(t=new Map,S.set(this,t)),t}Gwt(){let t=e.get(this);return t||(t=new Map,e.set(this,t)),t}DEt(t){const s=this.cF();if(s._O().Rf(t))return!0;for(const i of s.d1t())if(i._O().Rf(t))return!0;return!!this.Hc._O().Rf(t)}vP(){const t=new Set,s=(t.add(this),this.t4());if(s&&s.ZH())for(const i of this.o5())if(t.add(i),i.xF())for(const e of i.vF())t.add(e);if(this.xF())for(const h of this.vF())t.add(h);for(const n of t.values())n._9()}AEt(){this.AGt._Gt()&&this.q3();for(const t of this.zGt)t.Tvt()}LEt(){this.AEt()}_9(){if(this.AEt(),this.DEt("instancecreate")){const t=this.cF(),s=new w.Event("instancecreate");s.rz=this.q3(),t.pq(s);for(const i of t.d1t())i.pq(s);this.Hc.pq(s)}this.Hc.ZF(this.nP().xdt().O9.e2t,this,null)}OEt(){this.Hc.ZF(this.nP().xdt().O9.h2t,this,null)}REt(t){if(this.OGt){const s=new w.Event("destroy");s.PEt=t,this.pq(s)}if(this.DEt("instancedestroy")){const i=this.cF(),e=new w.Event("instancedestroy");e.rz=this.q3(),e.PEt=t,i.pq(e);for(const h of i.d1t())h.pq(e);this.Hc.pq(e)}}kEt(){return this.LGt?this.LGt.bxt():this.OGt.uj()}aT(t="full",s=null){const i={},e=("full"===t?i.uid=this.CF():i.c3=!0,this.AF());if(0<e.size&&(i.tags=Array.from(e)),"visual-state"!==t){const n=S.get(this);if(n&&n.size&&(i.ex=w._o(n)),-1!==this.u3()&&(i.mts=this.u3()),0<this.AGt.PIt()){const r={},o=this.AGt.qIt();for(let t=0,s=this.jGt.length;t<s;++t)r[o[t].toString()]=this.jGt[t];i.ivs=r}if(this.zGt.length){const a={};for(const u of this.zGt){const l=u.aT(t);l&&(a[u.nz()._V().toString()]=l)}i.behs=a}}this.est&&(i.w=this.est.VH(t,s));const h=this.LGt?this.LGt.aT():this.OGt.lj();return h&&(i.data=h),i}lZ(t="full",s){this.est&&this.est.lZ(t)}fZ(t,s="full",i=null){this.est&&this.est.fZ(t,s,i)}FEt(t,s="full",i=null){this.est&&this.est.FEt(t,s,i)}EGt(){this.nP().RR()&&this.est.EGt()}uT(s,t="full",i){if("full"===t)this.PGt=s.uid;else if(!s.c3)return;if(this.IEt(s.tags),"visual-state"!==t){let t=S.get(this);t&&(t.clear(),S.delete(this));const h=s.ex,n=(h&&(t=w.No(h),S.set(this,t)),this.WGt=s.hasOwnProperty("mts")?s.mts:-1,s.ivs);if(n)for(const[r,o]of Object.entries(n)){const a=parseInt(r,10),u=this.AGt.ZIt(a);if(!(u<0||u>=this.jGt.length)){let t=o;null===t&&(t=NaN),this.jGt[u]=t}}}if(this.nP().RR()){const l=s.w;if(l){const c=l.l;if(this.est.s4()._V()!==c){const f=this.est.s4(),d=f.O3().Q7(c);d?(this.est.n4(d),f.cV(this,!0),d.aV(this,!0),d.r4(this),this.est.Cj()):"full"===t&&this.Hc.MF(this)}this.est.YH(l,t)}}if("visual-state"!==t){const p=s.behs;if(p)for(const[m,g]of Object.entries(p)){const y=parseInt(m,10),M=this.iht(y);M<0||M>=this.zGt.length||this.zGt[M].uT(g,t)}}const e=s.data;e&&(this.LGt?this.LGt.uT(e,t):this.OGt.cj(e))}q3(){return this.OGt||this.KGt()}Ixt(){return!!this.OGt}KGt(t,s){const i=this.est?t?self.qB:self.U5:t?self.FF:self.uF,e=t||this.LGt.Lbt(),h=this.AGt._Gt(),n=h||e||i,r=this.nP().Swt();if(w.NR.Pbt(this,r),w.NR.kvt(s),this.OGt=new n,w.NR.Fvt(),w.NR.kbt(r),e&&!(this.OGt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(h){const o=e||i;if(!(this.OGt instanceof o))throw new TypeError(`setInstanceClass(): class '${h.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.OGt}fF(t){if(0!==this.jGt.length){const i={},e=this.AGt.KIt();for(let t=0,s=e.length;t<s;++t)i[e[t]]={configurable:!1,enumerable:!0,get:w.Instance.prototype.NEt.bind(this,t),set:w.Instance.prototype.mnt.bind(this,t)};const s=Object.create(Object.prototype,i);t.jEt={value:s,writable:!1}}}dF(t){const s=this.zGt;if(0!==s.length){const i={};for(const h of s)i[h.nz().r1t()]={value:h.hxt(),writable:!1};const e=Object.create(Object.prototype,i);t.xpt={value:e,writable:!1}}}pq(t){if(this.Ixt()){const s=this.q3(),i=(t.rz=s,this.Hc),e=i.mq()&&!i.LO().CP();e&&h.StartMeasuringScriptTime(),s.dispatchEvent(t),e&&h.AddScriptTime()}}}}{const Ma=self.Os;Ma.sq=class extends Ma.Zh{constructor(e){super(),this.gT=e,this.Wpt=null,this.zEt=[],this.BEt=e.Yp(),this.UEt=e.nm(),this.WEt=1,this.QEt=1,this.JEt=0,this.VEt=1,this.YEt=e.lN(),this.HEt=null,this.qEt=null,this.ZEt=NaN,this.XEt=!1,this.$H=NaN,this.t7=NaN,this.KEt=t=>{if(t.rz===this.Wpt.xB()){const s=e.b4(),i=(s.Nf().removeEventListener("instancecreate",this.KEt),this.Wpt.xB().Y5());this.XEt=!!i.Yst(),this.$H=this.XEt?i.Vst():NaN,this.t7=this.XEt?i.qst():NaN}}}$h(){this.Wpt=null,this.HEt=null,this.qEt=null,this.ZEt=NaN,this.XEt=!1,this.$H=NaN,this.t7=NaN,Ma.Nr(this.zEt)}$Et(t){if(this.VEt=this.gT.lN(),this.YEt=this.VEt,this.Wpt=t,this.JEt=t?t.kP():0,this.Wpt){const s=this.gT,i=s.b4(),e=this.Wpt.xB().nP().Swt();if(e<2){const h=this.Wpt.xB().Y5();h?(this.XEt=!!h.Yst(),this.$H=this.XEt?h.Vst():NaN,this.t7=this.XEt?h.qst():NaN):this.Wpt.xB().EU()||i.Nf().addEventListener("instancecreate",this.KEt)}else this.XEt=!1,this.$H=NaN,this.t7=NaN}else this.XEt=!1,this.$H=NaN,this.t7=NaN}$j(){return this.Wpt}ZH(){return 0<this.zEt.length}K9(){return this.zEt}t_t(){this.ZH()&&1!==this.zEt.length&&(this.qEt?this.zEt.sort((t,s)=>{const i=this.qEt.get(t.xB()),e=this.qEt.get(s.xB());return Ma.ae(i)&&Ma.ae(e)?i-e:0}):this.zEt.sort((t,s)=>{const i=t.Cnt().s_t(),e=s.Cnt().s_t();return Ma.ae(i)&&Ma.ae(e)?i-e:0}))}s_t(){return this.ZEt}Int(){return this.WEt}i_t(t){this.WEt=t}Ent(){return this.QEt}e_t(t){this.QEt=t}Pnt(){return this.YEt}$St(){return this.VEt}h_t(t){this.VEt=t}vnt(){return 0===this.BEt?Number.EPSILON:this.BEt}Gnt(){return 0===this.UEt?Number.EPSILON:this.UEt}n_t(){if(this.gT.w5()){let t=this.Wpt,s=t.Yp(),i=t.Cnt().vnt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.XEt?1+s/this.$H:s/i}return 1}r_t(){if(this.gT.T5()){let t=this.Wpt,s=t.nm(),i=t.Cnt().Gnt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.XEt?1+s/this.t7:s/i}return 1}o_t(){return 0}a_t(){return{sw:this.BEt,sh:this.UEt,sx:this.WEt,sy:this.QEt,psa:this.JEt,oo:this.VEt,so:this.YEt,pi:this.gT.xB().MEt()}}VH(t,s=null){const i=this.a_t();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.u_t(t),c:this.l_t(t)})}c_t(t){let s="";return t.m5()&&(s+="x"),t.y5()&&(s+="y"),t.w5()&&(s+="w"),t.T5()&&(s+="h"),t.x5()&&(s+="a"),t.C5()&&(s+="z"),t.D5()&&(s+="d"),t.G5()&&(s+="o"),t._5()&&(s+="v"),s}u_t(t){return this.Wpt&&this.Wpt.xB()&&!this.Wpt.xB().EU()?this.f_t(this.Wpt,this.gT,t):null}l_t(s){return this.zEt.map(t=>this.f_t(t,t,s)).filter(t=>t)}f_t(t,s,i){const e=t.xB();if(e&&e.EU())return null;const h={};return h.uid=e.CF(),h.f=this.c_t(s),h.offsets=s.d_t(),h.data=Ma.sq.p_t(e),h.oci=e.cF().iO(),"state"===i?(h.inst=e.aT("full",{selfOnly:!0}),h.instIndex=NaN):(h.instIndex=e.cF().gP().indexOf(e),h.inst=null),h}YH(t){this.BEt=t.sw,this.UEt=t.sh,this.WEt=t.sx,this.QEt=t.sy,this.JEt=t.psa,this.VEt=t.oo,this.YEt=t.so,this.ZEt=Ma.ae(t.pi)?t.pi:NaN}m_t(t,s){if(!t&&!s&&this.HEt)for(const i of this.HEt)i.EU()||i.f5()||i.b4().MF(i);this.HEt=t,this.qEt=s}fZ(t,s){const i=this.gT,e=i.b4(),h=new Set;if(t.p&&!this.Wpt){const o=t.p.uid,a=e.H3(o);if(s?.d2t,a){const u=a.t4();if(a.mEt(i.xB()))this.Wpt=u;else{a.SEt(i.xB().CF())?e.MF(i.xB()):a.u5(i.xB(),this.g_t(t.p.f)),h.has(i)||(i.y_t(t.p.offsets),this.M_t(a,t.p,s)),h.add(i);const l=a.t4();l.Cnt().t_t()}}else if(Ma.ae(t.p.oci)){const c=e.Z8(t.p.oci),f=(e.jyt(),e.TP(c,i.s4(),0,0,!0));if(s?.d2t,f){const d=this.w_t(t.p,e),p=(d&&f.uT(d),f.t4()),m=(p.s4().bP(f),f.u5(i.xB(),this.g_t(t.p.f)),f.t4());m.Cnt().t_t()}}}const n=[];for(const g of t.c){const y=g.uid,M=e.H3(y);M&&n.push(M)}let r=0;for(const w of t.c){const S=w.uid,T=e.H3(S);if(s?.d2t,T){if(this.HEt){if(this.HEt.includes(T)){const C=T;if(C.cF()!==T.cF()){r++;continue}if(C.EU()){r++;continue}const I=t.c[r];if(!s?.d2t&&this.S_t(C,n,i)){this.T_t(r,I,i,h,s),r++;continue}if(C.f5()&&C.$j()!==i.xB()){const G=this.b_t(I,s);this.x_t(G,I,h,s),r++;continue}this.x_t(C.t4(),I,h,s,!0),r++;continue}if(this.HEt[r]){const E=this.HEt[r];if(E.cF()!==T.cF()){r++;continue}if(E.EU()){r++;continue}const _=t.c[r];if(!s?.d2t&&this.S_t(E,n,i)){this.T_t(r,_,i,h,s),r++;continue}if(E.f5()&&E.$j()!==i.xB()){const N=this.b_t(_,s);this.x_t(N,_,h,s),r++;continue}this.x_t(E.t4(),_,h,s,!0),r++;continue}}const b=T.cF(),x=this.v_t(n,b),v=i.xB().gEt(b).length;if(x===v){const D=i.xB().r5(r);if(D){const A=D.t4();A&&(h.has(A)||(A.y_t(w.offsets),this.M_t(D,w,s)),h.add(A))}r++;continue}if(T.f5()&&T.$j()!==i.xB()){const L=this.b_t(w,s);this.x_t(L,w,h,s),r++;continue}this.x_t(T.t4(),w,h,s)}else if(this.HEt&&this.HEt[r]){const O=this.HEt[r],P=e.Z8(this.C_t(w));if(O.cF()!==P){r++;continue}if(O.EU()){r++;continue}const R=t.c[r];if(!s?.d2t&&this.S_t(O,n,i)){this.T_t(r,R,i,h,s),r++;continue}if(O.f5()&&O.$j()!==i.xB()){const k=this.b_t(R,s);this.x_t(k,R,h,s),r++;continue}this.x_t(O.t4(),R,h,s)}else{const F=this.b_t(w,s);this.x_t(F,w,h,s)}r++}}S_t(t,s,i){const e=t.cF(),h=this.v_t(s,e),n=i.xB().gEt(e).length;return h===n}T_t(t,s,i,e,h){const n=i.xB().r5(t,s);if(n){const r=n.t4();r&&(e.has(r)||(r.y_t(s.offsets),this.M_t(n,s,h)),e.add(r))}}g_t(t){const s={};return s.p5=t.includes("x"),s.g5=t.includes("y"),s.M5=t.includes("w"),s.S5=t.includes("h"),s.b5=t.includes("a"),s.v5=t.includes("z"),s.N5=t.includes("d"),s.I5=t.includes("o"),s.E5=t.includes("v"),s}C_t(t){return Ma.ae(t.oci)?t.oci:t[1]}b_t(e,h){if(Ma.ae(e.oci)){let t=this.gT,s=t.b4(),i;if(e.data)i=s.rV(e.data,t.s4(),!1,0,0,!1,!0);else{const n=s.Z8(e.oci);i=s.TP(n,t.s4(),0,0,!0)}if(h?.d2t,i){const r=this.w_t(e,s),o=(r&&i.uT(r),i.t4());return o.s4().bP(i,!0),o}}}x_t(t,s,i,e,h=!0){const n=this.gT,r=n.u5(t,this.g_t(s.f));r&&h&&(i.has(t)||(t.y_t(s.offsets),this.M_t(t.xB(),s,e)),i.add(t)),this.t_t()}M_t(t,s,i){let e=this.w_t(s,this.gT.b4());e&&((e=JSON.parse(JSON.stringify(e))).w=null,t.uT(e))}v_t(t,s){return t.filter(t=>t.cF().zc()===s.zc()).length}w_t(t,s){if(Ma.ae(t.instIndex)){const i=s.Z8(t.oci),e=i.IGt();return e?e[t.instIndex]:null}return Ma.Me(t.inst)?JSON.parse(t.inst):t.inst||void 0}static p_t(t){let s=t.t4().s4().iV(t.CF());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const e of[...t.K9()]){const h=e.t4();i.push([h.O3()._V(),h.s4().iO(),e.CF(),Ma.sq.tq(h),e.cF().xF()?1:0,h.i4(),Ma.sq.p_t(e)])}return Ma.Oe(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=Ma.sq.I_t(),s[0][14][1]=i,s[0][14][2]=t.t4().i4()),s}static tq(t){let s=0;return(s|=Number(t._5())<<8)|Number(t.G5())<<7|Number(t.C5())<<6|Number(t.D5())<<5|Number(t.x5())<<4|Number(t.T5())<<3|Number(t.w5())<<2|Number(t.y5())<<1|Number(t.m5())<<0}static I_t(t){let s=0;return s,511}}}{let d=self.Os,t=self.ys,n=(t.Cs,d.Kh(d.Rect)),r=d.Kh(d.Uu),s=d.Kh(d.Event,"bboxchange",!1),f=d.Kh(d.Oo,0,0,0,0),l=d.Kh(d.bl),i=d.Kh(d.Oo,1,1,1,1),o=d.Kh(d.Rect,0,0,-1,-1),h=d.Kh(d.Rect,0,0,-1,-1),p=new Set(["absolute","relative"]),e=[],m=!0,g=new WeakMap,a=new WeakMap;d.QGt=class extends d.Zh{constructor(t,s){super(),this.Si=t,this.Nct=t.cF(),this.Hc=t.b4(),this.G_t=s,this.Nct.TGt(this,null,s),this.E_t=-1,this.__t=-1,this.Bwt=196635,this.Nct.nP().jR()&&(this.Bwt|=128),this.Wa=NaN,this.Qa=NaN,this.PS=NaN,this.N_t=NaN,this.D_t=NaN,this.Y2=NaN,this.Fo=NaN,this.A_t=NaN,this.L_t=NaN,this.O_t=NaN,this.R_t=NaN,this.P_t=d.Kh(d.Rect),this.k_t=d.Kh(d.Uu),this.F_t=h,this.j_t=o,this.z_t=null,this.B_t=null,this.U_t=null,this.RS=i,this.W_t=i,this.Q_t=null,this.J_t=null,this.Si.cF().tGt()&&(this.J_t=d.Kh(d.V_t,this.Si,this)),this.Y_t=null,this.HEt=null,this.qEt=null,this.H_t=-1,this.q_t=null}eEt(){this.Bwt|=256}$h(){if(this.Nct.TGt(this,this.G_t,null),this.Q_t&&(this.Hc.MS().zM(this.Q_t),this.Q_t=null),this.z_t=null,this.B_t&&(this.B_t.Z_t.$h(),this.B_t=null),this.U_t&&(this.U_t.clear(),this.U_t=null),this.R5(),this.J_t&&this.J_t.$h(),this.f5()&&this.$j().l5(this),this.ZH()){const t=[...this.K9()];for(const s of t)this.l5(s)}this.X_t(),this.K_t(),g.delete(this),a.delete(this),this.Si=null,this.Nct=null,this.Hc=null,this.G_t=null}VGt(t){if(m=!1,this.Ij(t[0],t[1]),this.sT(t[2]),this.LG(t[3],t[4]),this.Y2=0,this.jR()?this.PP(t[6]):this.Fo=0,f.Da(t[7]),this.$_t(f),this.Fnt(t[8]),this.znt(t[9]),this.FS(t[10]),this.J_t&&this.J_t.tNt(t[12]),t[14]&&g.set(this,{sNt:t[14][1],iNt:t[14][2]}),t[15]){const s=t[15],e=(this.L5(s[0],s[1]),this.z5()),h=s[2];for(let i=0,t=h.length;i<t;++i){const n=h[i];for(let t=0,s=n.length;t<s;++t){const r=n[t],o=e.RT(t,i);o.ZS(r[0]),o.$S(r[1]),o.sT(r[2]),o.eT(r[3]),o.nT(r[4])}}}if(t[16]){const i=t[16][0],a=t[16][1],u=!!a,l=!u,c=this.Hc.bEt();u&&c&&c.eut(this.xB(),a),l&&c&&c.eut(this.xB(),i)}m=!0,this.eNt()}YGt(){this.Wa=0,this.Qa=0,this.PS=0,this.N_t=0,this.D_t=0,this.Y2=0,this.Fo=0,this.A_t=0,this.L_t=1,this.O_t=0,this.R_t=0,this.eNt()}b4(){return this.Hc}cF(){return this.Nct}xB(){return this.Si}hNt(){return this.x5()?this.nNt(this.$j().rNt()-this.Y_t.o_t()):0}ZS(t){if(t=+t,this.m5()){const s=this.Y_t,i=t-this.qS(),e=-this.hNt();0==e?this.Wa+=i/s.n_t():(this.Wa+=Math.cos(e)*i/s.n_t(),this.y5()&&(this.Qa+=Math.sin(e)*i/s.r_t()))}else this.Wa=t}Snt(t,s=!1){t=+t,!s&&this.m5()?this.ZS(this.qS()+t):this.Wa+=t}qS(){if(this.m5()){let t=this.Wa,s=this.Y_t,i=this.$j(),e=this.hNt();return 0===e?t*=s.n_t():(t=t*s.n_t()*Math.cos(e),this.y5()&&(t-=this.Qa*s.r_t()*Math.sin(e))),i.qS()+t}return this.Wa}$S(t){if(t=+t,this.y5()){const s=this.Y_t,i=t-this.KS(),e=-this.hNt();0==e?this.Qa+=i/s.r_t():(this.m5()&&(this.Wa-=Math.sin(e)*i/s.n_t()),this.Qa+=Math.cos(e)*i/s.r_t())}else this.Qa=t}Tnt(t,s=!1){t=+t,!s&&this.y5()?this.$S(this.KS()+t):this.Qa+=t}KS(){if(this.y5()){let t=this.Qa,s=this.Y_t,i=this.$j(),e=this.hNt();return 0===e?t*=s.r_t():(t=t*s.r_t()*Math.cos(e),this.m5()&&(t+=this.Wa*s.n_t()*Math.sin(e))),i.KS()+t}return this.Qa}Ij(t,s){if(t=+t,s=+s,this.oNt()){const i=this.m5(),e=this.y5(),h=this.Y_t,n=t-this.qS(),r=s-this.KS(),o=-this.hNt();if(0==o)i?this.Wa+=n/h.n_t():this.Wa=t,e?this.Qa+=r/h.r_t():this.Qa=s;else{const a=Math.sin(o),u=Math.cos(o);i?this.Wa+=e?(u*n-a*r)/h.n_t():u*n/h.n_t():this.Wa=t,e?this.Qa+=i?(a*n+u*r)/h.r_t():u*r/h.r_t():this.Qa=s}}else this.Wa=t,this.Qa=s}aNt(){return[this.qS(),this.KS()]}_j(t,s){t=+t,s=+s,this.oNt()?this.Ij(this.qS()+t,this.KS()+s):(this.Wa+=t,this.Qa+=s)}_St(t,s){return this.qS()===t&&this.KS()===s}sT(t){if(t=+t,this.C5()&&(t-=this.$j().tT()),this.PS!==t){this.PS=t,this.uNt();const s=this.s4();0!==this.PS&&s.pV(),s.r4(this)}}uNt(){if(this.eNt(),this.ZH()){const i=this.K9();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.C5()&&e.uNt()}}}Bnt(t){this.sT(this.tT()+t)}tT(){return this.C5()?this.$j().tT()+this.PS:this.PS}Dj(){return this.s4().tT()+this.tT()}Yst(){const t=this.xB().nP().Swt();return t<2&&this.xB().Y5().Yst()}tm(t){if(t=+t,this.w5()){const s=this.Yp();0===s?this.N_t=Number.EPSILON:this.N_t*=t/s}else this.N_t=t;this.lNt()}Nm(t,s){t=+t,!s&&this.w5()?this.tm(this.Yp()+t):this.N_t+=t,this.lNt()}Yp(){if(this.w5()){const t=this.$j(),s=t.Yp(),i=t.Cnt().vnt();return i===Number.EPSILON?(this.Cnt().vnt()+s)*this.N_t:s*this.N_t}return this.N_t}Hp(t){if(t=+t,this.T5()){const s=this.nm();0===s?this.D_t=Number.EPSILON:this.D_t*=t/s}else this.D_t=t;this.lNt()}_nt(t,s){t=+t,!s&&this.T5()?this.Hp(this.nm()+t):this.D_t+=t,this.lNt()}nm(){if(this.T5()){const t=this.$j(),s=t.nm(),i=t.Cnt().Gnt();return i===Number.EPSILON?(this.Cnt().Gnt()+s)*this.D_t:s*this.D_t}return this.D_t}LG(t,s){if(t=+t,s=+s,this.w5()){const i=this.Yp();0===i?this.N_t=Number.EPSILON:this.N_t*=t/i}else this.N_t=t;if(this.T5()){const e=this.nm();0===e?this.D_t=Number.EPSILON:this.D_t*=s/e}else this.D_t=s;this.lNt()}Yl(){return[this.Yp(),this.nm()]}CH(){return this.Y2}cNt(t){if(t<0)throw new RangeError("invalid depth");this.Y2=t}fNt(){if(this.f5()){const t=this.Y_t;return Math.min(t.n_t(),t.r_t())}return 1}jR(){return 0!=(128&this.Bwt)}PP(t){t=+t,this.jR()&&(this.x5()&&(t-=this.$j().kP()),t=d.an(t),this.Fo!==t)&&(this.Fo=t,this.lNt())}Nnt(t){0!=(t=+t)&&this.jR()&&(this.Fo=d.an(this.Fo+t),this.lNt())}lNt(){if(this.Bwt|=1<<18,this.ZH()){const i=this.K9();for(let t=0,s=i.length;t<s;t++)i[t].lNt()}}kP(){return this.x5()&&this.jR()?this.nNt(d.an(this.$j().rNt()+this.Fo)):this.Fo}rNt(){return this.x5()&&this.jR()?d.an(this.$j().rNt()+this.Fo):this.Fo}nNt(t){return this.w5()&&this.s5().Yp()<0&&(t=d.an(d.Tn(t,this.s5().kP()+Math.PI))),this.T5()&&this.s5().nm()<0?d.Tn(t,this.s5().kP()):t}dNt(){const t=this.$j();return!!(this.w5()&&t.Yp()<0)||!!(this.T5()&&t.nm()<0)}pNt(){const t=this.$j();return!!(this.w5()&&t.Yp()<0&&this.T5()&&t.nm()<0)}mNt(){const t=this.Bwt;if(0!=(t&1<<18)){const s=this.kP();this.A_t=Math.sin(s),this.L_t=Math.cos(s),this.Bwt=-262145&t}}OSt(){return this.mNt(),this.A_t}LSt(){return this.mNt(),this.L_t}Fnt(t){this.O_t=+t}knt(t){this.O_t+=+t}Pz(){return this.O_t}znt(t){this.R_t=+t}jnt(t){this.R_t+=+t}Fz(){return this.R_t}$_t(t){this.RS.equals(t)||(this.RS===i?(this.RS=d.Kh(d.Oo,t),this.W_t=d.Kh(d.Oo,t),this.W_t.ua()):t.na(1,1,1,1)?(this.RS=i,this.W_t=i):(this.RS.set(t),this.W_t.set(t),this.W_t.ua()),this.eNt())}fN(t){if(t=d.rn(+t,0,1),this.G5()){if(this.Cnt().$St()===t)return;this.Cnt().h_t(t),t=this.lN()}else if(this.RS.a===t)return;this.gNt(t)}yNt(){if(this.ZH()){const i=this.K9();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.gNt(e.lN())}}}gNt(t){f.Yo(this.RS),f.a=t,this.$_t(f),this.yNt()}Lnt(t){this.G5()?this.fN(this.Cnt().$St()+t):this.fN(this.lN()+t)}lN(){return this.G5()?this.$j().lN()*this.Cnt().$St():this.RS.a}zj(t){this.RS.ia(t)||(f.Yo(t),f.a=this.lN(),this.$_t(f))}fnt(t,s,i){f.zo(t,s,i),this.zj(f)}MNt(t,s,i){0===t&&0===s&&0===i||(f.Yo(this.RS),f.r+=t,f.Aa+=s,f.b+=i,this.zj(f))}jj(){return this.RS}L8(){return this.W_t}D5(){return 0!=(512&this.Bwt)}wNt(t){this.SNt(512,t)}m5(){return 0!=(1024&this.Bwt)}TNt(t){this.SNt(1024,t)}y5(){return 0!=(2048&this.Bwt)}oNt(){return 0!=(3072&this.Bwt)}bNt(t){this.SNt(2048,t)}w5(){return 0!=(4096&this.Bwt)}xNt(t){this.SNt(4096,t)}T5(){return 0!=(8192&this.Bwt)}vNt(t){this.SNt(8192,t)}x5(){return 0!=(16384&this.Bwt)}CNt(t){this.SNt(16384,t)}C5(){return 0!=(32768&this.Bwt)}INt(t){this.SNt(32768,t)}G5(){return 0!=(this.Bwt&1<<22)}GNt(t){this.SNt(1<<22,t)}_5(){return 0!=(this.Bwt&1<<23)}ENt(t){this.SNt(1<<23,t)}_Nt(){this.Bwt&=-12647937}u5(t,s){if(t===this)return!1;if(t.f5())return!1;if(this.NNt(t))return!1;if(this.DNt(t))return!1;const i=t.qS(),e=t.KS(),h=t.Yp(),n=t.nm(),r=t.kP(),o=t.tT(),a=t.lN(),u=(t.ANt(this),t.TNt(s.p5),t.bNt(s.g5),t.xNt(s.M5),t.vNt(s.S5),t.CNt(s.b5),t.INt(s.v5),t.GNt(s.I5),t.ENt(s.E5),t.wNt(s.N5),i-this.qS()),l=e-this.KS(),c=-this.kP(),f=Math.cos(c),d=Math.sin(c);if(s.p5&&(s.b5?t.Wa=u*f-l*d:t.Wa=u,s.M5)){const p=this.Yp()/this.Y_t.vnt();0!=p&&(t.Wa/=p)}if(s.g5&&(s.b5?t.Qa=u*d+l*f:t.Qa=l,s.S5)){const m=this.nm()/this.Y_t.Gnt();0!=m&&(t.Qa/=m)}if(s.M5){const g=this.Yp();0===g||g===Number.EPSILON?(t.N_t=1,t.Y_t.i_t(1)):(t.N_t=h/this.Yp(),t.Y_t.i_t(t.N_t))}if(s.S5){const y=this.nm();0===y||y===Number.EPSILON?(t.D_t=1,t.Y_t.e_t(1)):(t.D_t=n/this.nm(),t.Y_t.e_t(t.D_t))}return s.b5&&(t.Fo=r-this.kP()),s.v5&&(t.PS=o-this.tT()),s.I5&&t.Y_t.h_t(a),s.E5&&t.Sk(this.bk()),this.LNt(t),this.Cj(),this.yNt(),!0}l5(t){if(t.$j()===this){const s=t.qS(),i=t.KS(),e=t.Yp(),h=t.nm(),n=t.kP(),r=t.tT(),o=t.lN();t.ANt(null),t._Nt(),t.Ij(s,i),t.LG(e,h),t.PP(n),t.sT(r),t.fN(o),this.ONt(t),this.Cj()}}RNt(){return this.H_t}PNt(){this.kNt();const t=[...this.children()];for(const i of t)this.l5(i);const s=this.$j();s&&s.l5(this),this._Nt()}kNt(){if(this.FNt(),!this.HEt){const s=[...this.children()];s.length&&(this.HEt=[],this.qEt=new WeakMap);let t=0;for(const i of s){const e=i.xB();this.HEt.push(e),this.qEt.set(e,t),t++}}const t=this.$j();t&&t.kNt()}FNt(){if(-1===this.H_t){const t=[...this.i5()];this.H_t=t.length;for(const i of t)i.FNt();const s=[...this.children()];for(const e of s)e.FNt()}}K_t(){this.HEt&&(this.HEt.length=0),this.HEt=null,this.qEt=null;const t=this.$j();t&&t.K_t(),this.H_t=-1}f5(){return null!==this.$j()}$j(){const t=this.Y_t;return null!==t?t.$j():null}s5(){let t=this;for(;t.f5();)t=t.$j();return t}*i5(){let t=this.$j();for(;t;)yield t,t=t.$j()}mEt(t){return this.K9().includes(t)}ZH(){const t=this.Y_t;return null!==t&&t.ZH()}K9(){const t=this.Y_t;return null!==t?t.K9():e}children(){return this.K9()}*o5(){for(const t of this.children())yield t,yield*t.o5()}h5(){return this.K9().length}_Tt(){return[...this.o5()].length}r5(t){const s=this.K9();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}wEt(s){if(s){const i=this.K9();if(i)for(let t=0;t<i.length;t++)if(s===i[t])return t}return NaN}jNt(t){this.Y_t||(this.Y_t=d.Kh(d.sq,this)),t&&this.Y_t.$Et(t)}Cnt(){return this.Y_t}X_t(){this.Y_t&&(this.Y_t.$h(),this.Y_t=null)}ANt(t){t?(t.jNt(null),this.jNt(t)):(this.Y_t&&this.Y_t.$Et(null),this.ZH()||this.X_t())}DNt(t){if(!this.f5())return!1;const s=this.$j();return s===t||s.DNt(t)}NNt(t){if(this.mEt(t))return!0;for(const s of this.K9())if(s.NNt(t))return!0;return!1}LNt(t){this.Y_t.K9().push(t)}ONt(t){const s=this.Y_t.K9(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.f5()||this.X_t(),t.ZH()||t.X_t()}TEt(){const t=g.get(this);return t?t.sNt:null}zNt(){const t=g.get(this);return t?t.iNt:NaN}qH(){const t=a.get(this);return d.ae(t)?t:NaN}BNt(t){a.set(this,t)}UNt(){this.SNt(1<<19,!0),this.eNt()}eNt(){if(m){const s=this.Hc.MS();this.Q_t&&s.zM(this.Q_t);let t;t=0!=(this.Bwt&1<<19)?s.bM()||"<point>":s.wM()||"<default>",this.Q_t=s.PM(t,this.Vk(),this.W_t,this.tT())}}AH(){return this.Q_t}LV(){return this.RS===i}FS(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.Vk()!==t&&(this.Bwt=this.Bwt&~(31<<26)|t<<26,this.eNt())}Vk(){return(this.Bwt&31<<26)>>26}n4(t,s){const i=s&&this.G_t!==t;i&&this.fV(),this.Nct.TGt(this,this.G_t,t),this.G_t=t,i&&this.WNt(),0!==this.tT()&&this.G_t.pV()}s4(){return this.G_t}O3(){return this.s4().O3()}gV(t){this.E_t=0|t}i4(){return this.G_t.IY(),this.E_t}NY(t){this.__t=0|t}bU(){return this.G_t.EY(),this.__t}pJ(){return this.E_t}SNt(t,s){s?this.Bwt|=t:this.Bwt&=~t}bk(){return 0!=(1&this.Bwt)}Sk(t){if(this.SNt(1,t),this.ZH())for(const s of this.K9())s._5()&&s.Sk(t)}Zj(){return 0!=(8&this.Bwt)}Xj(t){t=!!t,this.Zj()!==t&&(this.SNt(8,t),t?this.Cj():this.QNt())}JNt(t,s){if(this.SNt(32,t),this.U_t&&this.U_t.clear(),s.trim()){this.U_t||(this.U_t=new Set);for(const i of s.split(" "))i&&this.U_t.add(i.toLowerCase())}else this.U_t=null}VNt(t){const s=0!=(32&this.Bwt),i=this.U_t;if(t&&i)for(const e of i)if(t.has(e))return s;return!s}Cj(){if(this.Bwt|=65554,this.Nct.MGt(!0),this.Hc.o4(),this.G_t.V8()&&(this.YNt(this.P_t,this.k_t,!0),this.Bwt&=-3,this.WNt()),0!=(4&this.Bwt)&&this.Si.Nf().dispatchEvent(s),null!==this.Y_t){const i=this.Y_t.K9();for(let t=0,s=i.length;t<s;++t)i[t].Cj()}}YNt(t,s,i){const e=this.qS(),h=this.KS(),n=this.Yp(),r=this.nm(),o=this.kP();t.hu(e-this.O_t*n,h-this.R_t*r,n,r),i&&this.j5()&&this.HNt(t),0===o?s.ul(t):(t.offset(-e,-h),s.cl(t,this.OSt(),this.LSt()),s.offset(e,h),s.fl(t)),t.normalize()}qNt(){const t=this.Bwt;0!=(2&t)&&(this.YNt(this.P_t,this.k_t,!0),this.Bwt=-3&t)}Lj(){return this.qNt(),this.P_t}Rj(){return this.qNt(),this.k_t}ZNt(t){const s=this.qS(),i=this.KS(),e=Math.round(s)-s,h=Math.round(i)-i;return 0==e&&0==h?t:(r.C(t),r.offset(e,h),r)}XNt(t){this.P_t.C(t),this.k_t.ul(this.P_t),this.Bwt&=-3,this.SGt(),this.WNt()}KNt(t){this.SNt(4,t)}$Nt(){return 0!=(4&this.Bwt)}SH(t,s,i){return s&&0!==this.CH()?this.xH(this.s4().bH()):0===this.tT()||i?t.Pu(this.Lj()):this.tDt()}tDt(){const t=this.s4(),s=this.Dj();return!(s>=t.XV())&&(t.qV(s,n),n.Pu(this.Lj()))}xH(t){const s=this.Lj(),i=s.fu(),e=s.pu(),h=s.du(),n=s.mu(),r=this.Dj(),o=r+this.CH();return t.$g(i,h,r,e,n,o)}kj(){const t=this.s4();if(t.lY())return this.xH(t.bH());{const s=t.O3();return this.SH(t.Zk(),s.wH(),s.ck())}}_H(t){this.SNt(1<<20,t)}EH(t){this.SNt(1<<21,t)}sDt(){return 0!=(this.Bwt&1<<20)}iDt(){return 0!=(this.Bwt&1<<21)}eDt(t){this.z_t=t,this.hDt(),this.j5()&&(this.q_t.nDt=null)}rDt(){return this.z_t}oDt(){return null!==this.z_t||this.j5()}aDt(){return this.uDt(this.Yp(),this.nm(),this.kP(),this.OSt(),this.LSt())}lDt(t,s,i){let e=0,h=1;return 0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.uDt(t,s,i,e,h)}uDt(h,n,t,r,o){let s=this.B_t;null===s&&(s={Z_t:d.Kh(d.bl),width:NaN,height:NaN,angle:NaN},this.B_t=s);const a=s.Z_t;if(s.width!==h||s.height!==n||s.angle!==t){const u=this.z_t;if(this.j5()){let t=this.Pz(),s=this.Fz(),i=this.z5(),e=this.q_t.nDt;e||(u?(l.C(u),l.offset(t,s)):l.Nl(),e=i.jT(l),this.q_t.nDt=e),i.zT(e,a),a.offset(-t,-s),a.Ol(h,n,r,o)}else u?(a.C(u),a.Ol(h,n,r,o)):a.Ll(this.Rj(),-this.qS(),-this.KS());s.width=h,s.height=n,s.angle=t}return a}hDt(){this.cDt(!0);const t=this.B_t;null!==t&&(t.width=NaN)}L5(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.xB().nP().YR())throw new Error("object does not support mesh");this.R5(),this.q_t={fDt:d.Kh(d.Bg.dT,t,s),dDt:d.Kh(d.Bg.dT,t,s),nDt:null}}j5(){return null!==this.q_t}z5(){if(this.j5())return this.q_t.fDt;throw new Error("no mesh")}pDt(){if(this.j5())return this.q_t.dDt;throw new Error("no mesh")}mDt(t){this.SNt(65536,t)}gDt(){return 0!=(65536&this.Bwt)}cDt(t){this.SNt(1<<17,t)}yDt(){return 0!=(this.Bwt&1<<17)}HNt(t){const s=this.q_t.fDt,i=Math.min(s._T(),0),e=Math.min(s.NT(),0),h=Math.max(s.DT(),1),n=Math.max(s.AT(),1),r=t.width(),o=t.height();t.offsetLeft(i*r),t.offsetTop(e*o),t.bu((h-1)*r),t.xu((n-1)*o),this.Y2=s.LT()}R5(){this.q_t&&(this.q_t.fDt.$h(),this.q_t.dDt.$h(),this.q_t=null,this.hDt())}k5(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!p.has(e))throw new Error("invalid mode");let h="relative"===e,n=i.x,r=i.y,o=i.jk,a="number"==typeof i.u?i.u:h?0:-1,u="number"==typeof i.v?i.v:h?0:-1;if(!this.j5())return!1;const l=this.z5(),c=l.RT(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.tT()!==o&&(c.sT(o),f=!0),h&&(n+=t/(l.vT()-1),r+=s/(l.CT()-1)),a=-1!==a||h?(h&&(a+=t/(l.vT()-1)),d.rn(a,0,1)):c.iT(),u=-1!==u||h?(h&&(u+=s/(l.CT()-1)),d.rn(u,0,1)):c.hT(),c.qS()===n&&c.KS()===r&&c.iT()===a&&c.hT()===u?f:(c.ZS(n),c.$S(r),c.eT(a),c.nT(u),this.hDt(),!0)}iEt(){return this.Si.iEt()}Kj(t,s){return!!this.Lj().Fu(t,s)&&!!this.Rj().Fu(t,s)&&(this.iEt()?this.Si.Y5().Uxt(t,s):!this.oDt()||this.aDt().Fu(t-this.qS(),s-this.KS()))}MDt(){return 0!=(16&this.Bwt)}SGt(){if(this.MDt()&&this.Zj()&&0==(256&this.Bwt)){const t=this.Lj(),s=this.Nct.yGt(),i=this.F_t;if(n.set(s.DJ(t.fu()),s.AJ(t.du()),s.DJ(t.pu()),s.AJ(t.mu())),!i.equals(n)){const e=this.Si;i===h?(s.LJ(e,null,n),this.F_t=d.Kh(d.Rect,n)):(s.LJ(e,i,n),i.C(n)),this.Bwt&=-17}}}wDt(){this.Bwt|=16}QNt(){const t=this.F_t;t!==h&&(this.Nct.yGt().LJ(this.Si,t,null),this.F_t=h)}WNt(){const t=this.s4();if(t.V8()&&0==(256&this.Bwt)){const s=t.RV(),i=this.Lj(),e=this.j_t;if(n.set(s.DJ(i.fu()),s.AJ(i.du()),s.DJ(i.pu()),s.AJ(i.mu())),!e.equals(n)){const h=this.Si;e===o?(s.LJ(h,null,n),this.j_t=d.Kh(d.Rect,n)):(s.LJ(h,e,n),e.C(n)),t.PV()}}}fV(){const t=this.j_t;t!==o&&(this.s4().RV().LJ(this.Si,t,null),this.j_t=o)}GY(){return this.j_t}Uj(){const t=this.Si,s=this.G_t,i=s.h4();i.length&&i.at(-1)===t||(s.cV(t,!1),s.aV(t,!1),this.Hc.o4())}Qj(){const t=this.Si,s=this.G_t,i=s.h4();i.length&&i[0]===t||(s.cV(t,!1),s.lV(t,!1),this.Hc.o4())}Vj(t){const s=this.Si,i=this.G_t;if(i.O3()!==t.O3())throw new Error("layer from different layout");t!==i&&(i.cV(s,!0),this.n4(t),t.aV(s,!0),this.Hc.o4())}Hj(t,s){let i=this.Si,e=!1,h=this.G_t;if(t.CF()!==i.CF()){const n=t.t4();if(!n)throw new Error("expected world instance");const r=n.s4(),o=(h.iO()!==r.iO()&&(h.cV(i,!0),this.n4(r),r.aV(i,!0),e=!0),r.LY(i,t,!!s));(e||o)&&this.Hc.o4()}}xj(){return this.J_t}SDt(t){this.SNt(64,t)}zY(){return 0!=(64&this.Bwt)}VH(t,s=null){const i={x:this.qS(),y:this.KS(),w:this.Yp(),h:this.nm(),l:this.s4()._V(),zi:this.i4()},e=(0!==this.tT()&&(i.ze=this.tT()),0!==this.kP()&&(i.a=this.rNt()),this.LV()||(i.c=this.RS.toJSON()),.5!==this.Pz()&&(i.oX=this.Pz()),.5!==this.Fz()&&(i.oY=this.Fz()),0!==this.Vk()&&(i.bm=this.Vk()),this.bk()||(i.v=this.bk()),this.Zj()||(i.ce=this.Zj()),this.$Nt()&&(i.be=this.$Nt()),this.J_t&&(i.fx=this.J_t.VH()),0!=(32&this.Bwt));return e&&(i.sfi=e),this.U_t&&(i.sft=[...this.U_t].join(" ")),this.Y_t&&"visual-state"!==t&&(i.sgi=this.Y_t.VH(t,s),g.has(this))&&(i.sgcd=g.get(this).sNt,i.sgzid=g.get(this).iNt),this.j5()&&(i.mesh=this.z5().aT()),i}d_t(){return{x:this.Wa,y:this.Qa,z:this.PS,w:this.N_t,h:this.D_t,a:this.Fo,sgi:this.Cnt()?this.Cnt().a_t():null}}y_t(t){t&&(this.Wa=t.x,this.Qa=t.y,this.PS=t.z,this.N_t=t.w,this.D_t=t.h,this.Fo=t.a,t.sgi&&this.Cnt()&&this.Cnt().YH(t.sgi),this.lNt(),this.Cj())}EGt(){this.K_t(),this.PNt(),this.jNt(null),this.Y_t&&this.Y_t.m_t(this.HEt,this.qEt)}lZ(t){"visual-state"!==t&&this.PNt()}fZ(t,s="full",i=null){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.Bwt)&&this.Y_t.fZ(t.sgi,i)}FEt(t,s="full",i){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.Bwt)&&(this.Y_t.m_t(null,null),this.K_t(),this.Cj())}YH(t,s){if(m=!1,this.ZS(t.x),this.$S(t.y),this.tm(t.w),this.Hp(t.h),this.gV(t.zi),this.sT(t.hasOwnProperty("ze")?t.ze:0),this.PP(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?f.Da(t.c):t.hasOwnProperty("o")?(f.Yo(this.RS),f.a=t.o):f.jo(1,1,1,1),this.$_t(f),this.Fnt(t.hasOwnProperty("oX")?t.oX:.5),this.znt(t.hasOwnProperty("oY")?t.oY:.5),this.FS(t.hasOwnProperty("bm")?t.bm:0),this.Sk(!t.hasOwnProperty("v")||t.v),this.Xj(!t.hasOwnProperty("ce")||t.ce),this.KNt(!!t.hasOwnProperty("be")&&t.be),this.JNt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.J_t&&t.hasOwnProperty("fx")&&this.J_t.YH(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==s&&this.HEt)for(const i of this.HEt)i.EU()||this.Hc.MF(i);if(t.hasOwnProperty("sgi")&&"visual-state"!==s){this.jNt(null);const e=this.Y_t,h=t.sgi;e.YH(h),e.m_t(this.HEt,this.qEt),t.sgcd&&d.ae(t.sgzid)&&g.set(this,{sNt:t.sgcd,iNt:t.sgzid})}if(t.hasOwnProperty("mesh")){const n=t.mesh;this.L5(n.cols,n.rows),this.z5().uT(n)}else this.R5();this.Cj(),m=!0,this.eNt(),"visual-state"!==s&&this.Hc.TDt(this.xB(),t)}}}{const wa=self.Os;wa.aIt=class extends wa.Zh{constructor(t,s){super();const i=t.b4(),e=i.Ugt(s[1]),h=(i.bDt().Pvt(e),this.Hc=i,this.Nct=t,this.gvt=wa.NR.lz(e),this.txt=null,this.xDt=null,this.jCt=e.Instance,this.qJ=s[2],this.hn=s[0],this.Cyt=this.Hc.r1t(s[3]),this.gvt.Swt());if(h<2&&(this.txt=wa.Kh(e.CIt,this),!(this.txt instanceof wa.mvt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(wa.NR.Pbt(this,h),2<=h){const n=e.CIt??globalThis.jU;if(this.xDt=new n,!(this.xDt instanceof globalThis.jU))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.xDt=new globalThis.az;wa.NR.kbt(h),this.Abt()}static Ob(t,s){return wa.Kh(wa.aIt,t,s)}$h(){this.Hc=null,this.gvt=null,this.txt&&(this.txt.$h(),this.txt=null),this.jCt=null}gSt(){return this.txt}Abt(){this.txt?this.txt.Abt():this.xDt&&this.xDt.UB()}b4(){return this.Hc}cF(){return this.Nct}iz(){return this.gvt}YIt(){return this.jCt}zc(){return this.hn}_V(){return this.qJ}hz(){return this.xDt}r1t(){return this.Cyt}}}{const Sa=self.Os,Ta=self.K5;Sa.BGt=class extends Sa.Zh{constructor(t){super(),this.Hc=t.runtime,this.hMt=t.ez,this.gvt=this.hMt.iz(),this.Si=t.rz,this.Og=t.index,this.LGt=null,this.OGt=null,this.gvt.aV(this.Si)}$h(){this.OGt&&(this.OGt.gF(),this.OGt=null),this.gvt.cV(this.Si),this.LGt&&(this.LGt.$h(),this.LGt=null),this.Hc=null,this.hMt=null,this.gvt=null,this.Si=null}UIt(t){if(this.LGt)throw new Error("already got sdk instance");const s=this.iz().Swt();if(s<2){if(this.LGt=Sa.Kh(this.hMt.YIt(),this,t),!(this.LGt instanceof Sa.yvt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const i=this.iz().Lbt();this.Rbt(i.Instance,t)}}Y5(){return this.LGt??this.OGt}oz(){return this.Si}b4(){return this.Hc}nz(){return this.hMt}iz(){return this.gvt}Kht(){return this.Og}Tvt(){this.LGt?this.LGt.Tvt():this.OGt.WU()}Cvt(t,s){this.LGt&&this.LGt.Cvt(t,s)}kEt(){return this.LGt?this.LGt.bxt():this.OGt.uj()}aT(t="full"){return this.LGt?this.LGt.aT(t):this.OGt.lj(t)}uT(t,s="full"){if(this.LGt)return this.LGt.uT(t,s);this.OGt.cj(t,s)}static vDt(t,s,i){let e=globalThis.zU,h,n;h=s instanceof e?t.ZP(s):s.Svt(),n=i instanceof e?t.ZP(i):i.Svt();const r=h.oz(),o=n.oz(),a=r.cF().iO(),u=o.cF().iO();if(a!==u)return a-u;const l=r.CEt(),c=o.CEt();return l!==c?l-c:h.Kht()-n.Kht()}Rbt(t,s){const i=Ta,e=t??this.LGt.Lbt(),h=e||i,n=this.iz().Swt();if(Sa.NR.Pbt(this,n),Sa.NR.kvt(s),this.OGt=new h,Sa.NR.Fvt(),Sa.NR.kbt(n),!e||this.OGt instanceof i)return this.OGt;throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`)}hxt(){return this.OGt||this.Rbt()}Ixt(){return!!this.OGt}}}{const ba=self.Os;ba.D8=class extends ba.Zh{constructor(t,s){super(),this.gT=t,this.CDt=[],this.IDt=[],this.GDt=new Map,this.EDt=[],this._Dt=[],this.NDt=new Set,this.cS=!0;for(const i of s){const e=ba.Kh(ba.DDt,this,i,this.CDt.length);this.CDt.push(e),this.GDt.set(e.zc().toLowerCase(),e),3<=i.length&&this.EDt.push(this.ADt(e,i[2]))}this.b4().LDt(this)}$h(){this.b4().ODt(this);for(const t of this._Dt)t.$h();ba.Nr(this._Dt),ba.Nr(this.CDt),ba.Nr(this.IDt),this.GDt.clear(),ba.Nr(this.EDt),this.gT=null}RDt(t){this.NDt.add(t)}PDt(t){this.NDt.delete(t)}kDt(t){t.fM()&&(this._Dt=this.CDt.map(t=>{const s=t.Bx();return 0<s.GetCustomParametersByteSize()?ba.Kh(ba.Bg.WebGPUEffectCustomParamsBuffer,s):null}),this.FDt());for(const s of this.NDt)s.kDt(t)}zIt(t){if(t.length){this.CDt=t.concat(this.CDt);for(const s of t)this.GDt.set(s.zc().toLowerCase(),s);for(let t=0,s=this.CDt.length;t<s;++t)this.CDt[t].vV(t)}}ADt(t,s){t.jDt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=ba.Kh(ba.Oo);h.Da(e),i[t]=h}}return i}IT(){return this.gT}b4(){return this.gT.b4()}dz(){ba.Nr(this.IDt);let t=!0;for(const s of this.CDt)s.Ept()&&(this.IDt.push(s),s.Bx().vS()||(t=!1));this.cS=t}NP(){return this.CDt}sGt(){return 0<this.CDt.length}rht(t){return this.GDt.get(t.toLowerCase())||null}zDt(t){if((t=Math.floor(+t))<0||t>=this.CDt.length)throw new RangeError("invalid effect type index");return this.CDt[t]}cz(t){return this.zDt(t).Ept()}fz(t,s){this.zDt(t).jDt(s)}OV(){return this.IDt}zY(){return 0<this.IDt.length}vS(){return this.cS}nht(t){return this.EDt[t]}P8(t){return(t<this._Dt.length?this._Dt:this.EDt)[t]}pz(t,s){if(t<0||t>=this.EDt.length)return null;const i=this.EDt[t];return s<0||s>=i.length?null:i[s]}mz(t,s,i){if(t<0||t>=this.EDt.length)return!1;const e=this.EDt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof ba.Oo){if(h.ia(i))return!1;h.Yo(i)}else{if(h===i)return!1;e[s]=i}return t<this._Dt.length&&this._Dt[t].SetParameterValue(s,i),!0}FDt(){const i=this.EDt,e=this._Dt;for(let t=0,s=Math.min(i.length,e.length);t<s;++t){const h=e[t],n=i[t];for(let t=0,s=n.length;t<s;++t)h.SetParameterValue(t,n[t])}}static BDt(t){return t&&t instanceof ba.Oo?{t:"color",v:t.toJSON()}:t}static UDt(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const s=t.t;if("color"!==s)throw new Error("invalid effect parameter type");{const i=ba.Kh(ba.Oo);return i.Da(t.v),i}}}static WDt(t){return t.map(ba.D8.BDt)}static QDt(t){return t.map(ba.D8.UDt)}aT(){return this.CDt.map(t=>({name:t.zc(),active:t.Ept(),params:ba.D8.WDt(this.EDt[t.iO()])}))}uT(t){for(const s of t){const i=this.rht(s.name);i&&(i.jDt(s.active),this.EDt[i.iO()]=ba.D8.QDt(s.params))}this.dz(),this.FDt()}}}{const xa=self.Os;xa.DDt=class extends xa.Zh{constructor(t,s,i){super(),this.N8=t,this.Zc=s[0],this.hn=s[1],this.Og=i,this.AS=null,this.Zf=!0}$h(){this.N8=null,this.AS=null}jIt(t){const s=xa.Kh(xa.DDt,t,[this.Zc,this.hn],-1);return s.AS=this.AS,s.Zf=this.Zf,s}kDt(t){const s=t.MM(this.Zc);if(!s)throw new Error("failed to find shader program '"+this.Zc+"'");this.AS=s}_P(){return this.N8}zc(){return this.hn}vV(t){this.Og=t}iO(){return this.Og}IT(){return this.N8.IT()}b4(){return this.N8.b4()}jDt(t){this.Zf=!!t}Ept(){return this.Zf}Bx(){return this.AS}JDt(){const i=[];for(let t=0,s=this.AS.Ux();t<s;++t){const e=this.AS.Wx(t);if("float"===e||"percent"===e)i.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");i.push(xa.Kh(xa.Oo,1,1,1,1))}}return i}}}{const va=self.Os;va.V_t=class extends va.Zh{constructor(t,s){super(),this.Si=t,this.VDt=s,this.N8=t.cF()._P(),this.YDt=!0,this.F8=!0,this.HDt=!1,this.qDt=!1,this.ZDt=!1,this.XDt=!1,this.KL=va.Kh(va.Bg.KD,t.b4().dR().A8(),{BD:(t,s)=>{const i=s.QL(),e=i.t4();t.jS(e.L8()),t.iw(e.Dj()),i.kT(t),t.iw(0)},UD:t=>{const s=t.kxt(),[i,e]=t.Pxt();return{kL:s,FL:i,jL:e}},WD:t=>this.P8(t)}),this.KDt=[],this.IDt=[],this.cS=!0,this.EDt=[],this._Dt=[],this.kDt(t.b4().MS());for(let t=0,s=this.N8.NP().length;t<s;++t)this.KDt.push(!0);this.dz(),this.N8.RDt(this)}$h(){this.N8.PDt(this);for(const t of this._Dt)t&&t.$h();va.Nr(this._Dt),this.KL.$h(),this.KL=null,va.Nr(this.KDt),va.Nr(this.IDt),va.Nr(this.EDt),this.Si=null,this.N8=null}kDt(t){t.fM()&&(this._Dt=this.N8.NP().map(t=>{const s=t.Bx();return 0<s.GetCustomParametersByteSize()?va.Kh(va.Bg.WebGPUEffectCustomParamsBuffer,s):null}))}tNt(t){let s=0;for(const i of t)this.EDt.push(this.ADt(s,i)),++s;this.FDt(),this.dz()}ADt(t,s){this.KDt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=va.Kh(va.Oo);h.Da(e),i[t]=h}}return i}HGt(){for(const t of this.N8.NP())this.EDt.push(t.JDt());this.FDt()}IT(){return this.gT}_P(){return this.N8}sO(){return this.AV(),this.KL}b4(){return this.Si.b4()}dz(){va.Nr(this.IDt);let t=this.VDt,i=this.N8.NP(),e=this.IDt,h=this.KDt,n=!0;for(let t=0,s=i.length;t<s;++t)if(h[t]){const r=i[t];e.push(r),r.Bx().vS()||(n=!1)}this.cS=n,t.SDt(!!e.length),this.YDt=!0}AV(){const t=this.Si,s=this.VDt,i=s.LV(),e=t.nP().WR(),h=0!==s.kP()||0!==s.s4().kP()||s.Yp()<0||s.nm()<0,n=t.zxt(),r=t.xS();(this.YDt||i!==this.F8||e!==this.HDt||h!==this.qDt||n!==this.ZDt||r!==this.XDt||this.KL.UA())&&(this.KL.WA(this.IDt.map(t=>t.Bx()),{JD:this.IDt.map(t=>t.iO()),VD:!i||r,HD:e,qD:n,ZD:h}),this.YDt=!1,this.F8=i,this.HDt=e,this.qDt=h,this.ZDt=n,this.XDt=r)}OV(){return this.IDt}nht(t){return this.EDt[t]}P8(t){return(t<this._Dt.length?this._Dt:this.EDt)[t]}pz(t,s){if(t<0||t>=this.EDt.length)return null;const i=this.EDt[t];return s<0||s>=i.length?null:i[s]}mz(t,s,i){if(t<0||t>=this.EDt.length)return!1;const e=this.EDt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof va.Oo){if(h.ia(i))return!1;h.Yo(i)}else{if(h===i)return!1;e[s]=i}return t<this._Dt.length&&this._Dt[t].SetParameterValue(s,i),!0}FDt(){const i=this.EDt,e=this._Dt;for(let t=0,s=e.length;t<s;++t){const h=e[t],n=i[t];for(let t=0,s=n.length;t<s;++t)h.SetParameterValue(t,n[t])}}vS(){return this.cS}$Dt(){return this.IDt.some(t=>t.Bx().GS())}cz(t){return this.KDt[t]}fz(t,s){this.KDt[t]=!!s}NP(){return this.N8.NP()}VH(){return this.N8.NP().map(t=>({name:t.zc(),active:this.KDt[t.iO()],params:va.D8.WDt(this.EDt[t.iO()])}))}YH(t){for(const s of t){const i=this.N8.rht(s.name);i&&(this.KDt[i.iO()]=s.active,this.EDt[i.iO()]=va.D8.QDt(s.params))}this.dz(),this.FDt()}}}{let I=self.Os,n=[],S=[],r=[],T=I.Kh(I.bl),M=I.Kh(I.bl),b=I.Kh(I.Uu),d=I.Kh(I.Rect),p=I.Kh(I.Rect),m=null,g=null,y=null;I.tAt=class extends I.Zh{constructor(t){super(),this.Hc=t,this.sAt=0,this.iAt=0,this.eAt=[],this.hAt=0,this.nAt=0,this.rAt=0,this.oAt=0,this.aAt=new self.W4(this)}$h(){this.Hc=null}b4(){return this.Hc}aO(){return this.aAt}uAt(){this.nAt=this.hAt,this.hAt=0,this.oAt=this.rAt,this.rAt=0}lAt(){return this.nAt}cAt(){return this.oAt}fAt(t,s){const i=t.t4(),e=s.t4();i&&e&&i.Zj()&&e.Zj()&&this.eAt.push([t,s])}wTt(s,i,e){for(const[h,n]of this.eAt){let t=null;if(s===h)t=n;else{if(s!==n)continue;t=h}t.CTt(i)&&!e.includes(t)&&e.push(t)}}STt(t,s){if(this.eAt.length)for(const[i,e]of this.eAt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}dAt(){I.Nr(this.eAt)}J4(t,s){if(!t||!s||t===s)return!1;const i=t.t4(),e=s.t4();if(!i.Zj()||!e.Zj())return!1;this.hAt++;const h=i.s4(),n=e.s4(),r=h.bY(n);return r?this.pAt(i,e):this.mAt(i,e)}pAt(t,s){if(!t.Lj().Pu(s.Lj()))return!1;if(this.rAt++,!t.Rj().pl(s.Rj()))return!1;if(t.iEt()&&s.iEt())return!1;if(t.iEt())return this.gAt(t,s);if(s.iEt())return this.gAt(s,t);if(!t.oDt()&&!s.oDt())return!0;const i=t.aDt(),e=s.aDt();return i.Rl(e,s.qS()-t.qS(),s.KS()-t.KS())}mAt(i,e){const t=i.iEt(),s=e.iEt();if(t&&!s)return this.yAt(i,e);if(s&&!t)return this.yAt(e,i);if(s||t)return!1;{const h=i.s4(),n=e.s4(),r=(T.C(i.aDt()),M.C(e.aDt()),T.Gl());for(let t=0,s=r.length;t<s;t+=2){const a=t+1,u=r[t],l=r[a],[c,f]=h.iF(u+i.qS(),l+i.KS());r[t]=c,r[a]=f}const o=M.Gl();for(let t=0,s=o.length;t<s;t+=2){const d=t+1,p=o[t],m=o[d],[g,y]=n.iF(p+e.qS(),m+e.KS());o[t]=g,o[d]=y}return T.Dl(),M.Dl(),this.rAt++,T.Rl(M,0,0)}}yAt(t,s){const i=t.s4(),e=s.s4(),h=(m=m||I.Kh(I.bl),g=g||I.Kh(I.Rect),y=y||I.Kh(I.Uu),s.qS()),n=s.KS(),[r,o]=e.iF(h,n),[a,u]=i.Kk(r,o),l=a-h,c=u-n;if(g.C(s.Lj()),g.offset(l,c),!t.Lj().Pu(g))return!1;if(y.C(s.Rj()),y.offset(l,c),this.rAt++,!t.Rj().pl(y))return!1;m.C(s.aDt());const f=m.Gl();for(let t=0,s=f.length;t<s;t+=2){const d=t+1;f[t]+=l,f[d]+=c}return m.Dl(),this.gAt(t,s,a,u,m,g,y)}gAt(t,e,s,i,h,n,r){const o=void 0!==n?n:e.Lj(),a=t.qS(),u=t.KS(),l=t.xB().Y5(),c=void 0!==s?s:e.qS(),f=void 0!==i?i:e.KS(),d=e.oDt(),p=void 0!==r?r:e.Rj(),m=S;l.GetCollisionRectCandidates(o,m);for(let t=0,s=m.length;t<s;++t){const g=m[t],y=g.GetRect();if(this.hAt++,o.ku(y,a,u)&&(b.ul(y),b.offset(a,u),b.pl(p)))if(d){let t=void 0!==h?h:e.aDt(),s=c,i=f;void 0!==h&&(s=e.qS(),i=e.KS());const M=g.GetPoly();if(M){if(this.rAt++,M.Rl(t,s-(a+y.fu()),i-(u+y.du())))return I.Nr(m),!0}else if(T.Ll(b,0,0),T.Rl(t,s,i))return I.Nr(m),!0}else{const w=g.GetPoly();if(!w)return I.Nr(m),!0;if(T.Ll(p,0,0),w.Rl(T,-(a+y.fu()),-(u+y.du())))return I.Nr(m),!0}}return I.Nr(m),!1}MAt(t,o,a){const u=t.yP(),s=this.Hc.jO();if(!s)throw new Error("cannot call outside event");const l=s.rft(),i=new Map,c=t=>{let s=i.get(t);return void 0===s&&(s=t._k(),i.set(t,s)),s};if(u.Uct()){a||(u.qct(!1),I.Nr(u.Zct())),l&&I.Nr(u.Xct());for(const e of t.gP()){let h=e.t4(),n=h.s4();if(!(!c(n)||!h.kj())&&o.some(([t,s])=>{const[i,e]=n.Kk(t,s,h.Dj());return h.Kj(i,e)})){if(a)return!1;u.Yct(e)}else l&&u.Hct(e)}}else{let i,e=!1,r=(!l||s.Kmt(this.Hc.X0t())||this.Hc.SSt()&&!u.Xct().length&&u.Zct().length?i=u.Zct():(i=u.Xct(),e=!0),0);for(let s=0,t=i.length;s<t;++s){let t=i[s],h=t.t4(),n=h.s4();if(!(!c(n)||!h.kj())&&o.some(([t,s])=>{const[i,e]=n.Kk(t,s,h.Dj());return h.Kj(i,e)})){if(a)return!1;e?u.Yct(t):i[r++]=t}else e?i[r++]=t:l&&u.Hct(t)}a||(i.length=r)}return t.Lgt(),i.clear(),!!a||u.Wct()}wAt(t,s){if(t)for(const i of s.bGt())if(!t.bY(i))return!1;return!0}wSt(t,s,i,e){if(s.TV())for(const h of s.Cmt())this.wAt(t,h)?(h.wGt(),h.yGt().OJ(i,e)):I.Bh(e,h.gP());else this.wAt(t,s)?(s.wGt(),s.yGt().OJ(i,e)):I.Bh(e,s.gP())}iR(t,s,i,e){for(const h of s)this.wSt(t,h,i,e)}SAt(t,s,i){const e=this.Hc.zvt();e&&this.iR(t,e.RZ(),s,i)}TAt(t,s,i){const e=this.Hc.Bvt();e&&this.iR(t,e.RZ(),s,i)}VNt(t,s){return t.nEt()&&(!s||s.t4().VNt(t.Iwt().get("solidTags")))}H4(t){const s=t.t4();this.SAt(s.s4(),s.Lj(),n);for(const i of n)if(this.VNt(i,t)&&this.J4(t,i))return I.Nr(n),i;return I.Nr(n),null}bAt(t,s){this.SAt(null,t,n);for(const i of n)if(this.VNt(i,s)&&this.xAt(t,i))return I.Nr(n),i;return I.Nr(n),null}vAt(t,s){let i=null;s&&(i=r,I.Nr(i));const e=t.t4();this.TAt(e.s4(),e.Lj(),n);for(const h of n)if(h.oEt()&&this.J4(t,h)){if(!s)return I.Nr(n),h;i.push(h)}return I.Nr(n),i}CAt(s,i,e,h,n){h=h||50;const r=s.t4(),o=r.qS(),a=r.KS();for(let t=0;t<h;++t)if(r.Ij(o+i*t,a+e*t),r.Cj(),!this.J4(s,n))return!0;return r.Ij(o,a),r.Cj(),!1}IAt(s,i,e,h,n,r){h=h||50;let o=s.t4(),a=o.qS(),u=o.KS(),l=null,c=null;for(let t=0;t<h;++t)if(o.Ij(a+i*t,u+e*t),o.Cj(),!this.J4(s,l))if(l=this.H4(s))c=l;else if(n&&(l=r?this.J4(s,r)?r:null:this.vAt(s))&&(c=l),!l)return c&&this.GAt(s,i,e,c,16,!0),!0;return o.Ij(a,u),o.Cj(),!1}EAt(i,e,h,t){t=t||50;let n=i.t4(),r=n.qS(),o=n.KS(),a=null,u=null;for(let s=0;s<t;++s)for(let t=0;t<2;++t){const l=2*t-1;if(n.Ij(r+e*s*l,o+h*s*l),n.Cj(),!this.J4(i,a)){if(!(a=this.H4(i)))return u&&this.GAt(i,e*l,h*l,u,16,!0),!0;u=a}}return n.Ij(r,o),n.Cj(),!1}GAt(t,s,i,e,h,n){let r=2,o=!1,a=!1,u=t.t4(),l=u.qS(),c=u.KS();for(;r<=h;){const f=1/r;r*=2,u._j(s*f*(o?1:-1),i*f*(o?1:-1)),u.Cj(),this.J4(t,e)||n&&this.H4(t)?(o=!0,a=!0):(o=!1,a=!1,l=u.qS(),c=u.KS())}a&&(u.Ij(l,c),u.Cj())}_At(i,t=100){let e=0,h=i.t4(),n=h.qS(),r=h.KS(),o=0,a=this.H4(i);if(!a)return!0;for(;e<=t;){let t=0,s=0;switch(o){case 0:t=0,s=-1,e++;break;case 1:t=1,s=-1;break;case 2:t=1,s=0;break;case 3:t=1,s=1;break;case 4:t=0,s=1;break;case 5:t=-1,s=1;break;case 6:t=-1,s=0;break;case 7:t=-1,s=-1}if(o=(o+1)%8,h.Ij(Math.floor(n+t*e),Math.floor(r+s*e)),h.Cj(),!this.J4(i,a)&&!(a=this.H4(i)))return!0}return h.Ij(n,r),h.Cj(),!1}NAt(t,s,i,e){const h=t.t4(),n=h.qS(),r=h.KS(),o=Math.max(10,I.cn(s,i,n,r)),a=I.pn(s,i,n,r),u=e||this.H4(t);if(!u)return I.an(a+Math.PI);let l=u,c=0,f=0,d=I.un(5),p;for(p=1;p<36;++p){const v=a-p*d;if(h.Ij(s+Math.cos(v)*o,i+Math.sin(v)*o),h.Cj(),!this.J4(t,l)&&!(l=e?null:this.H4(t))){c=v;break}}for(36===p&&(c=I.an(a+Math.PI)),l=u,p=1;p<36;++p){const C=a+p*d;if(h.Ij(s+Math.cos(C)*o,i+Math.sin(C)*o),h.Cj(),!this.J4(t,l)&&!(l=e?null:this.H4(t))){f=C;break}}if(36===p&&(f=I.an(a+Math.PI)),h.Ij(n,r),h.Cj(),f===c)return f;let m=I.mn(f,c)/2,g;g=I.yn(f,c)?I.an(c+m+Math.PI):I.an(f+m);const y=Math.cos(a),M=Math.sin(a),w=Math.cos(g),S=Math.sin(g),T=y*w+M*S,b=y-2*T*w,x=M-2*T*S;return I.pn(0,0,b,x)}DAt(t,s,i,e,h){if(!h)return!1;const n=h.t4();if(!n.Zj())return!1;if(this.hAt++,d.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!n.Lj().Pu(d))return!1;if(h.iEt())return this.AAt(t,s,i,e,h,n);if(this.rAt++,!n.Rj().dl(t,s,i,e))return!1;if(!n.oDt())return!0;const r=n.aDt();return r.dl(n.qS(),n.KS(),t,s,i,e)}AAt(i,e,h,n,t,s){const r=s.qS(),o=s.KS(),a=t.Y5(),u=S;p.set(i,e,h,n),p.normalize(),a.GetCollisionRectCandidates(p,u);for(let t=0,s=u.length;t<s;++t){const l=u[t],c=l.GetRect();if(this.hAt++,d.ku(c,r,o)&&(b.ul(c),b.offset(r,o),b.dl(i,e,h,n))){const f=l.GetPoly();if(!f)return I.Nr(u),!0;if(this.rAt++,f.dl(r+c.fu(),o+c.du(),i,e,h,n))return I.Nr(u),!0}}return I.Nr(u),!1}xAt(t,s){if(!s)return!1;const i=s.t4();if(!i.Zj())return!1;if(this.hAt++,!i.Lj().Pu(t))return!1;if(s.iEt())return this.LAt(t,s,i);if(this.rAt++,b.ul(t),!i.Rj().pl(b))return!1;if(!i.oDt())return!0;const e=T,h=(e.ul(t,i.qS(),i.KS()),i.aDt());return e.Rl(h,0,0)}LAt(i,t,s){const e=s.qS(),h=s.KS(),n=t.Y5(),r=S;n.GetCollisionRectCandidates(i,r);for(let t=0,s=r.length;t<s;++t){const o=r[t],a=o.GetRect();if(this.hAt++,i.ku(a,e,h)){const u=o.GetPoly();if(!u)return I.Nr(r),!0;if(this.rAt++,T.ul(i,0,0),u.Rl(T,-(e+a.fu()),-(h+a.du())))return I.Nr(r),!0}}return I.Nr(r),!1}OAt(t,s){if(t){const i=t.t4();i.Zj()&&(this.hAt++,i.Lj().Pu(s.rect))&&(t.iEt()?this.RAt(t,i,s):(this.rAt++,i.oDt()?s.PAt(t,i.qS(),i.KS(),i.aDt()):s.kAt(t,i.Rj())))}}RAt(i,e,h){const n=e.qS(),r=e.KS(),o=S;i.Y5().GetCollisionRectCandidates(h.rect,o);for(let t=0,s=o.length;t<s;t++){const a=o[t],u=a.GetRect();if(this.hAt++,h.rect.ku(u,n,r)){const l=a.GetPoly();this.rAt++,l?h.PAt(i,n+u.fu(),r+u.du(),l):h.FAt(i,e.qS(),e.KS(),u)}}I.Nr(o)}Z4(t,s){if(t!==this.sAt||s!==this.iAt){this.sAt=t,this.iAt=s;const i=this.Hc.SV();for(const e of i)if(e.RR()){for(const h of e.mP())h.t4().QNt();e.yGt().jAt(t,s),e.MGt();for(const n of e.mP()){const r=n.t4();r.wDt(),r.SGt()}}}}K4(){return[this.sAt,this.iAt]}zAt(t,s){this.sAt=t,this.iAt=s}}}{const Ca=self.Os;Ca.qCt=class extends Ca.Zh{constructor(t,s){super(),this.GJ=t,this.EJ=s,this._J=Ca.Kh(Ca.Bl)}$h(){this._J.$h(),this._J=null}jAt(t,s){if(!this._J.Ql())throw new Error("grid not empty");this.GJ=t,this.EJ=s}NJ(t,s,i){let e=this._J.Ks(t,s);return e||(i?(e=Ca.Kh(Ca.BAt,this,t,s),this._J.Set(t,s,e),e):null)}DJ(t){const s=Math.floor(t/this.GJ);return isFinite(s)?s:0}AJ(t){const s=Math.floor(t/this.EJ);return isFinite(s)?s:0}LJ(e,h,n){if(h)for(let i=h.fu(),t=h.pu();i<=t;++i)for(let t=h.du(),s=h.mu();t<=s;++t)if(!n||!n.Fu(i,t)){const r=this.NJ(i,t,!1);r&&(r.u0(e),r.Ql())&&this._J.Jl(i,t)}if(n)for(let i=n.fu(),t=n.pu();i<=t;++i)for(let t=n.du(),s=n.mu();t<=s;++t)h&&h.Fu(i,t)||this.NJ(i,t,!0).xJ(e)}OJ(t,s){let i=this.DJ(t.fu()),e=this.AJ(t.du()),h=this.DJ(t.pu()),n=this.AJ(t.mu());if(isFinite(h)&&isFinite(n))for(;i<=h;++i)for(let t=e;t<=n;++t){const r=this.NJ(i,t,!1);r&&r.CJ(s)}}}}{const Ia=self.Os;Ia.BAt=class extends Ia.Zh{constructor(t,s,i){super(),this.gJ=t,this.Wa=s,this.Qa=i,this.yJ=Ia.Kh(Ia.ql)}$h(){this.yJ.$h(),this.yJ=null,this.gJ=null}Ql(){return this.yJ.Ql()}xJ(t){this.yJ.$l(t)}u0(t){this.yJ.Jl(t)}CJ(t){Ia.Bh(t,this.yJ.tc())}}}{const Ga=self.Os;Ga.UAt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Ga.Rect,this.WAt=2,this.QAt=null,this.JAt=0,this.VAt=0,this.YAt=0,this.HAt=0,this.qAt=0,this.Gt=0,this.ZAt=1,this.XAt=0,this.KAt=1,this.$At=0}tLt(){return this.WAt<1+1e-6}Xf(){this.WAt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.WAt=2,this.QAt=null,this.JAt=0,this.VAt=0,this.YAt=0,this.HAt=0,this.qAt=0,this.Gt=0,this.ZAt=1,this.XAt=0,this.KAt=1,this.$At=0,this}sLt(){if(!1!==this.tLt()){const t=this.dx*this.WAt,s=this.dy*this.WAt,i=Math.hypot(t,s),e=t/i,h=s/i,n=(this.Gt=i-1e-6,this.HAt=this.x1+e*this.Gt,this.qAt=this.y1+h*this.Gt,this.JAt=Math.atan2(this.YAt,this.VAt)+Math.PI/2,this.ZAt=Math.cos(this.JAt),this.XAt=Math.sin(this.JAt),e*this.ZAt+h*this.XAt);if(this.KAt=e-2*this.ZAt*n,this.$At=h-2*this.XAt*n,0<n){const r=Math.PI;this.JAt=Ga.an(this.JAt+r),this.ZAt=-this.ZAt,this.XAt=-this.XAt}}}iLt(t,s,i,e,h){const n=Ga.tr(this.x1,this.y1,this.x2,this.y2,s,i,e,h);0<=n&&n<this.WAt&&(this.WAt=n,this.QAt=t.CF(),this.VAt=s-e,this.YAt=i-h)}FAt(t,s,i,e){const h=s+e.fu(),n=s+e.pu(),r=i+e.du(),o=i+e.mu();this.iLt(t,h,r,n,r),this.iLt(t,n,r,n,o),this.iLt(t,n,o,h,o),this.iLt(t,h,o,h,r)}kAt(t,s){const i=s.Jn(),e=s.Vn(),h=s.Yn(),n=s.Hn(),r=s.qn(),o=s.Zn(),a=s.Xn(),u=s.Kn();this.iLt(t,i,e,h,n),this.iLt(t,h,n,r,o),this.iLt(t,r,o,a,u),this.iLt(t,a,u,i,e)}PAt(i,e,h,t){const n=t.Gl();for(let t=0,s=n.length;t<s;t+=2){const r=(t+2)%s,o=n[t]+e,a=n[t+1]+h,u=n[r]+e,l=n[1+r]+h;this.iLt(i,o,a,u,l)}}}}{const C=self.Os,Ea=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),_a=new Set(["high","low"]),Na=self.ys,xh=Na.Ts,vh=Na.Cs,Da=xh.create(),Aa=C.Kh(C.Uu),G=C.Kh(C.Rect);C.eLt=class extends C.Zh{constructor(t){super(),this.Hc=t,this.hLt=[],this.nLt=!1,this.rLt=null,this.oLt=null,this.aLt=null,this.uLt="high-performance",this.lLt=!1,this.cLt=0,this.fLt=0,this.dLt="",this.pLt=0,this.mLt=0,this.gLt=0,this.yLt=0,this.MLt=0,this.wLt=0,this.my="normalized",this.SLt=0,this.TLt=1,this.bLt=1e4,this.Jy=!0,this.xLt=0,this.xA=0,this.vA=0,this.vLt="letterbox-scale",this.CLt="letterbox-scale",this.ILt=0,this.GLt=0,this.ELt=xh.create(),this._Lt="high",this.NLt=this._Lt,this.DLt=!1,this.ALt=[],this.LLt=new Set,this.OLt=self.C3_Shaders,this.RLt=C.Kh(C.Bg.GD,{xD:()=>[this.iH(),this.eH()],vD:()=>this.PLt(),CD:t=>this.kLt(t),getTime:()=>this.b4().n3(),ID:()=>this.b4().o4()}),this.FLt=0,this.jLt=0,this.zLt=NaN,this.BLt=null,this.ULt=new Map,this.WLt=NaN,this.QLt=new Map,this.JLt="",this.VLt=1,this.YLt=C.Kh(C.Rect),this.HLt="",this.qLt=null,this.ZLt=null,this.XLt=0,this.KLt=0,this.$Lt=-1,this.tOt=0,this.sOt=t=>this.tOt=t.progress,this.iOt=null,this.eOt={hOt:null,nOt:null,rOt:null},this.oOt=0,this.aOt=0,this.uOt=0,this.lOt="fade-in",this.cOt=null,this.fOt=new Promise(t=>this.cOt=t)}dOt(t){this.uLt=t}pOt(t){this.nLt=!!t}mOt(t){this.my=t}gOt(){return this.my}yOt(t){this.SLt=t}MOt(t,s){this.TLt=t,this.bLt=s}wOt(t){this.lLt=!!t}async bo(t){let s=t.canvas,i=(this.hLt.push({canvas:s,SOt:null}),this.Hc.tj("runtime","window-resize",t=>this.TOt(t)),this.Hc.tj("runtime","fullscreenchange",t=>this.bOt(t)),this.Hc.tj("runtime","fullscreenerror",t=>this.xOt(t)),s.addEventListener("webglcontextlost",t=>this.vOt(t)),s.addEventListener("webglcontextrestored",t=>this.COt(t)),this.DLt=!!t.isFullscreen,this.dLt=t.cssDisplayMode,navigator.gpu&&this.nLt),e=!1;if(i)try{await this.IOt(!0)}catch(t){this.GOt("WebGPU",t),this.oLt=null}if(!this.MS())try{await this.EOt(!0)}catch(t){this.GOt("WebGL",t),this.rLt=null}if(this.MS()||(e=!0),!this.MS()&&i)try{await this.IOt(!1)}catch(t){this.GOt("WebGPU",t),this.oLt=null}if(!this.MS())try{await this.EOt(!1)}catch(t){this.GOt("WebGL",t),this.rLt=null}const h=this.MS();if(!h)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");h.Zw(e),this.oLt&&(this.oLt._Ot=()=>this.NOt(),this.oLt.DOt=()=>this.AOt()),"normalized"===this.my?h.aM():(h.uM(),h.rM(this.SLt)),this.LG(t.windowInnerWidth,t.windowInnerHeight,!0),await this.kDt()}GOt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async IOt(t){const s={iy:this.TLt,ey:this.bLt},i={powerPreference:this.uLt,depth:this.Hc.uY(),failIfMajorPerformanceCaveat:t,LOt:this.Hc.cH(),OOt:this.Hc.ROt(),WE:this.Hc.POt()};this.oLt=C.Kh(C.Bg.WebGPURenderer,s),await this.oLt.Ob(this.hLt[0].canvas,i)}async EOt(t){const s={alpha:!0,powerPreference:this.uLt,UE:"xbox-uwp-webview2"!==this.Hc.uR(),depth:this.Hc.uY(),WE:this.Hc.POt(),failIfMajorPerformanceCaveat:t,iy:this.TLt,ey:this.bLt};this.lLt&&(s.QE=1),this.rLt=C.Kh(C.Bg.YE,this.hLt[0].canvas,s),await this.rLt.Zy()}async kOt(){if(this.OLt){const t=[];for(const[s,i]of Object.entries(this.OLt)){i.src=i.wgsl;const e=C.Bg.WebGPUShaderProgram.uv();t.push(this.oLt.q_(Object.assign({Db:e,name:s},i)))}await Promise.all(t)}}async FOt(){if(this.OLt){const s=[];for(const[i,e]of Object.entries(this.OLt)){let t;if(e.glslWebGL2&&2<=this.rLt.m2())e.src=e.glslWebGL2,t=C.Bg._b.lv();else{if(!e.glsl)throw new Error(`shader '${i}' does not support WebGL 1`);e.src=e.glsl,t=C.Bg._b.uv()}s.push(this.rLt.q_(Object.assign({Db:t,name:i},e)))}await Promise.all(s),this.rLt.Z_(),this.rLt.SM()}this.rLt.lD()&&(this.BLt=C.Kh(C.Bg.AE,this.rLt))}async kDt(){this.oLt?await this.kOt():this.rLt&&await this.FOt();const t=this.MS();t.Hw(this.Jy),t.lD()&&(this.zLt=0);for(const s of this.Hc.jOt()){for(const i of s.NP())i.kDt(t);s.kDt(t),s.dz()}this.aLt=new self.NW(this.Hc,t)}$h(){this.Hc=null,this.rLt=null,this.hLt.length=0}yO(){return this.Hc.yO()}TOt(t){const s=this.Hc;if(!s.zOt()){const i=t.devicePixelRatio,e=(this.yO()&&(self.devicePixelRatio=i),s.BOt(i),this.DLt=!!t.isFullscreen,this.dLt=t.cssDisplayMode,this.LG(t.innerWidth,t.innerHeight),s.o4(),new C.Event("window-resize")),h=(e.data=t,s.Nf().zf(e),new C.Event("resize"));h.UOt=this.yR(),h.WOt=this.wR(),h.QOt=this.TR(),h.JOt=this.xR(),s.pq(h),s.mq()&&(s.j1t()||self.C3Debugger.IsDebuggerPaused())&&s.$A()}}bOt(t){this.DLt=!!t.isFullscreen,this.LG(t.innerWidth,t.innerHeight,!0),this.Hc.o4()}xOt(t){this.DLt=!!t.isFullscreen,this.LG(t.innerWidth,t.innerHeight,!0),this.Hc.o4()}LG(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.cLt!==t||this.fLt!==s||i){this.cLt=t,this.fLt=s;const e=this.VOt();"letterbox-scale"===e?this.YOt(t,s):"letterbox-integer-scale"===e?this.HOt(t,s):"off"===e?this.qOt(t,s):this.ZOt(t,s),this.XOt(e);for(const{canvas:r}of this.hLt)r.width=this.gLt,r.height=this.yLt;this.Hc.Xc("canvas","update-size",{marginLeft:this.MLt,marginTop:this.wLt,styleWidth:this.pLt,styleHeight:this.mLt,displayScale:this._U()});const h=this.MS();h.LG(this.gLt,this.yLt,!0);for(const o of this.ALt)h.hD(o);C.Nr(this.ALt),this.KOt();const n=this.Hc.L3();n.kq(),n.Fq()}}KOt(){this.MS().cM(this.ELt,this.iH()/this.eH())}hH(){return this.ELt}YOt(t,s){const i=this.Hc.vR(),e=this.Hc.wO(),h=this.Hc.TO(),n=e/h,r=t/s;if(n<r){const o=s*n;this.pLt=Math.round(o),this.mLt=s,this.MLt=Math.floor((t-this.pLt)/2),this.wLt=0}else{const a=t/n;this.pLt=t,this.mLt=Math.round(a),this.MLt=0,this.wLt=Math.floor((s-this.mLt)/2)}this.gLt=Math.round(this.pLt*i),this.yLt=Math.round(this.mLt*i),this.Hc.$Ot(e,h)}HOt(t,s){let i=this.Hc.vR(),e=(1!==i&&(t+=1,s+=1),this.Hc.wO()),h=this.Hc.TO(),n=e/h,r=t/s,o;if(n<r){const a=s*n;o=a*i/e}else{const u=t/n;o=u*i/h}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.gLt=Math.round(e*o),this.yLt=Math.round(h*o),this.pLt=this.gLt/i,this.mLt=this.yLt/i,this.MLt=Math.max(Math.floor((t-this.pLt)/2),0),this.wLt=Math.max(Math.floor((s-this.mLt)/2),0),this.Hc.$Ot(e,h)}ZOt(t,s){const i=this.Hc.vR(),e=(this.pLt=t,this.mLt=s,this.gLt=Math.round(this.pLt*i),this.yLt=Math.round(this.mLt*i),this.MLt=0,this.wLt=0,this._U());this.Hc.$Ot(this.pLt/e,this.mLt/e)}qOt(t,s){const i=this.Hc.vR();this.pLt=this.Hc.KV(),this.mLt=this.Hc.$V(),this.gLt=Math.round(this.pLt*i),this.yLt=Math.round(this.mLt*i),this.t3t()?(this.MLt=Math.floor((t-this.pLt)/2),this.wLt=Math.floor((s-this.mLt)/2)):(this.MLt=0,this.wLt=0),this.Hc.$Ot(this.Hc.KV(),this.Hc.$V())}XOt(i){if("high"===this._Lt)this.xA=this.gLt,this.vA=this.yLt,this.NLt="high";else{let t,s;if(s="off"===this.VOt()?(t=this.Hc.KV(),this.Hc.$V()):(t=this.Hc.wO(),this.Hc.TO()),this.gLt<t||this.yLt<s)this.xA=this.gLt,this.vA=this.yLt,this.NLt="high";else if(this.xA=t,this.vA=s,this.NLt="low","scale-inner"===i){const e=t/s,h=this.cLt/this.fLt;h<e?this.xA=this.vA*h:e<h&&(this.vA=this.xA/h)}else if("scale-outer"===i){const n=t/s,r=this.cLt/this.fLt;n<r?this.xA=this.vA*r:r<n&&(this.vA=this.xA/r)}}}b4(){return this.Hc}s3t(){return this.hLt[0].canvas}A8(){return this.RLt}t3t(){return this.DLt}i3t(){return this.dLt}e3t(t){if(!Ea.has(t))throw new Error("invalid fullscreen mode");this.vLt=t;const s=this.Hc.L3();s.kq(),s.Fq()}GU(){return this.vLt}h3t(t){if(!Ea.has(t))throw new Error("invalid fullscreen mode");this.CLt=t;const s=this.Hc.L3();s.kq(),s.Fq()}n3t(){return this.CLt}VOt(){return this.t3t()?this.n3t():this.GU()}r3t(t){if(!_a.has(t))throw new Error("invalid fullscreen scaling quality");this._Lt=t,this.Hc.L3().kq()}o3t(){return this._Lt}fH(){return this.NLt}static a3t(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}pU(){return this.cLt}mU(){return this.fLt}iH(){return this.xA}eH(){return this.vA}Hw(t){this.Jy=!!t}u3t(t){this.xLt=t}lJ(){return this.xLt}l3t(){return this.MS().uE()}vOt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.ALt=[],this.LLt.clear(),this.RLt.zS(),this.rLt.zS(),this.Hc.f9()}NOt(){console.log("[Construct] WebGPU device lost"),this.ALt=[],this.LLt.clear(),this.RLt.zS(),this.Hc.f9()}async COt(t){await this.rLt.BS(),await this.kDt(),await this.Hc.c3t(),console.log("[Construct] WebGL context restored")}async AOt(){await this.kDt(),await this.Hc.c3t(),console.log("[Construct] WebGPU device restored")}f3t(){return this.rLt}d3t(){return this.oLt}MS(){return this.oLt||this.rLt}VIt(){return this.aLt}fR(){let t="";return t=this.Hc.d3t()?"webgpu":"webgl"+this.Hc.f3t().m2(),this.Hc.MS().Xw()&&(t+="-software"),t}mR(){return this.Hc.d3t()?this.Hc.d3t().GetAdapterInfoString():this.Hc.f3t().wD()}aF(){return"low"===this.NLt?1/this.Hc.vR():this._U()}_U(){const t=this.VOt();if("off"===t||"crop"===t)return 1;const s=this.Hc.wO(),i=this.Hc.TO(),e=s/i,h=this.gLt/this.yLt;return"scale-inner"!==t&&e<h||"scale-inner"===t&&h<e?this.mLt/i:this.pLt/s}PH(){return"low"===this.fH()?1:this._U()}OH(){return"low"===this.fH()?1:this.Hc.vR()}p3t(t,s){this.ILt=t,this.GLt=s}m6(s,i,e,t=!0){i=i||this.xA,e=e||this.vA;const h=i/2+this.ILt,n=e/2+this.GLt;if(t){let t=this.hH();i===this.xA&&e===this.vA||(s.cM(Da,i/e),t=Da),s.K_(t)}const r=s.mM(h,n,s.Ky(e),h,n,0,e);s.nN(r)}m3t(t,s=!0){const i=this.yR(),e=this.wR(),h=i/2,n=e/2,r=(s&&t.K_(this.hH()),t.mM(h,n,t.Ky(e),h,n,0,e));t.nN(r)}TR(){return this.gLt}xR(){return this.yLt}yR(){return this.pLt}wR(){return this.mLt}$k(){return this.MLt}tF(){return this.wLt}H7(){return this.hLt.length}g3t(){return"undefined"!=typeof OffscreenCanvas&&this.s3t()instanceof OffscreenCanvas&&("Chromium"!==C.hi.ci||124<=C.hi.li)}async y9(e,h=!1){if(e<1)throw new Error("invalid HTML layer count");if(this.hLt.length!==e){let t=this.Hc.L3().N3(),s={count:e,layersDomState:t.EV().filter(t=>t.Ik()).map(t=>t.AY()),immediate:h,marginLeft:this.MLt,marginTop:this.wLt,styleWidth:this.pLt,styleHeight:this.mLt},i;if(i=this.yO()?await this.Hc.u4("canvas","set-html-layer-count",s):self.c3_runtimeInterface._OnSetHTMLLayerCount(s),e<this.hLt.length)this.hLt.length=e;else for(const n of i.addedCanvases){n.width=this.gLt,n.height=this.yLt;const r=this.g3t()?"bitmaprenderer":"2d",o=n.getContext(r);if(!o)throw new Error(`failed to acquire '${r}' canvas context`);this.hLt.push({canvas:n,SOt:o})}this.Hc.o4()}}lq(t){if(!(t>=this.hLt.length)){const s=this.s3t(),i=this.hLt[t].SOt;this.g3t()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}}dH(s){s.depth=this.Hc.uY();let t=this.ALt,i=t.findIndex(t=>t.xb(s)),e;return-1!==i?(e=t[i],t.splice(i,1)):e=this.MS().$N(s),this.LLt.add(e),e}O8(t){if(!this.LLt.has(t))throw new Error("render target not in use");this.LLt.delete(t),this.ALt.push(t)}PLt(){const t={HT:this.Hc.bO()};return"low"===this.fH()&&(t.width=this.iH(),t.height=this.eH()),this.dH(t)}kLt(t){this.O8(t)}*y3t(){for(const t of this.Hc.L3().Oq())for(const s of t.VP()){const i=this.ULt.get(s);i&&(yield i)}}aH(t){if(!this.MS().lD())return null;let s=this.ULt.get(t);return s||(s={vj:t,name:t.zc(),M3t:C.Kh(C.Bg.AE,this.rLt),w3t:0,S3t:0,T3t:0},this.ULt.set(t,s)),s.M3t}b3t(){const t=this.MS();if(t.lD()&&0===this.jLt){this.jLt=t.Vw(),this.WLt=NaN;for(const s of this.y3t())s.w3t=NaN}}x3t(){this.rLt&&this.rLt.lD()&&this.v3t(),this.oLt&&this.oLt.lD()&&this.C3t()}v3t(){if(isNaN(this.WLt)&&(this.WLt=this.BLt.jE(this.FLt,this.jLt),!isNaN(this.WLt))){if(this.Hc.mq())for(const t of this.y3t())if(t.w3t=t.M3t.jE(this.FLt,this.jLt),isNaN(t.w3t))return;if(this.BLt.zE(this.jLt),this.zLt=Math.min(this.WLt,1),this.Hc.mq()){const i=new Map;for(const h of this.y3t())h.M3t.zE(this.jLt),h.S3t=Math.min(h.w3t,1),i.set(h.vj,h.S3t);for(const n of this.y3t()){const r=n.vj,o=i.get(r)||0,a=o-r.gk().reduce((t,s)=>t+(i.get(s)||0),0);n.T3t=C.rn(a,0,1)}const s=this.Hc.N3(),e=this.zLt-s.EV().reduce((t,s)=>t+(i.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(C.rn(e,0,1),this.zLt,[...this.y3t()])}this.FLt=this.jLt,this.jLt=0}}I3t(){return this.BLt}C3t(){if(0!==this.jLt){for(let t=this.FLt;t<this.jLt;++t){const i=this.QLt.get(t);if(i&&!i.TE())return}let t=this.Hc.N3(),r=C.Lo(t.U7()+1,0),s=0;for(let t=this.FLt;t<this.jLt;++t){const o=this.QLt.get(t);if(o){let i=o.bE(),e=BigInt(0),h=BigInt(0),n=BigInt(0);for(let t=0,s=Math.min(r.length,i.length/2);t<s;++t){const l=i[2*t],c=i[2*t+1],f=(l!==n&&(e===n||l<e)&&(e=l),c>h&&(h=c),c-l),d=Number(f)/1e9;r[t]+=d}const a=h-e,u=Number(a)/1e9;s+=u}}if(this.zLt=C.rn(s,0,1),this.Hc.mq()){const e=t.VP(),h=new Map;for(let t=0,s=Math.min(e.length,r.length-1);t<s;++t){const g=r[t+1];h.set(e[t],g)}const n=[],p=new Map;for(const[y,M]of h){const w=[...y.Mk()].reduce((t,s)=>t+(h.get(s)||0),0);p.set(y,w),n.push({name:y.zc(),T3t:C.rn(M,0,1),S3t:C.rn(w,0,1)})}const m=this.zLt-t.EV().reduce((t,s)=>t+(p.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(C.rn(m,0,1),this.zLt,n)}for(let t=this.FLt;t<this.jLt;++t)this.QLt.delete(t);this.FLt=this.jLt,this.jLt=0}}G3t(t){this.QLt.set(this.oLt.Vw(),t)}w3(){return this.zLt}E3t(t,s,i,e,h,n){return this.JLt=t,this.VLt=s,this.YLt.hu(i,e,h,n),this.qLt||(this.qLt=new Promise(t=>{this.ZLt=t})),this.qLt}_3t(){if(this.JLt){let t=this.s3t(),s=this.YLt,i=C.rn(Math.floor(s.fu()),0,t.width),e=C.rn(Math.floor(s.du()),0,t.height),h=s.width(),n=(h=0===h?t.width-i:C.rn(Math.floor(h),0,t.width-i),s.height());if(n=0===n?t.height-e:C.rn(Math.floor(n),0,t.height-e),(0!==i||0!==e||h!==t.width||n!==t.height)&&0<h&&0<n){const r=C.bo(h,n),o=r.getContext("2d");o.drawImage(t,i,e,h,n,0,0,h,n),t=r}C.xo(t,this.JLt,this.VLt).then(t=>{this.HLt&&URL.revokeObjectURL(this.HLt),this.HLt=URL.createObjectURL(t),this.qLt=null,this.ZLt(this.HLt)}),this.JLt="",this.VLt=1}}N3t(){return this.HLt}D3t(t){t?this.XLt++:this.XLt--}A3t(){return 0<this.XLt}L3t(t){const s=this.MS();if(2===t)this.iOt=C.Kh(C.Bg.hS,this.MS()),this.iOt.uG("Arial"),this.iOt.lG(16),this.iOt.vG("center"),this.iOt.IG("center"),this.iOt.LG(300,200);else if(0===t){const i=this.Hc.O3t();i&&i.o6(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.R3t("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSIxNzAwLjc5MDA0cHgiIGhlaWdodD0iMTcwMC43OTAwNHB4IiB2aWV3Qm94PSIyODcgMzE3IDExMjUgMTEyNSINCgkgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTcwMC43OTAwNCAxNzAwLjc5MDA0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJsb2dvIj4NCgk8Zz4NCgkJPGc+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0ZGRkZGRiIgZD0iTTM1NC45Nzc1NCwxMTk1LjYyMzA1DQoJCQkJYzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NjI5LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOGwtNC45MzI2Miw4LjU0MTk5DQoJCQkJYy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNjU2LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMzMiwwLDUuOTYxOTEtMC40NDMzNiw4LjcyNjU2LTEuMjY4NTVjNi4yOTQ5Mi0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTczOCw2LjUwMDk4bDQuOTMxNjQsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM4NDgsNS43MzQzOGMtOS4wMDM5MSw1LjYwMTU2LTE5LjYzMTg0LDguODM3ODktMzEuMDE2Niw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzI5Ni4xNTgyLDEyMjEuOTU3MDMsMzIyLjQ5MjE5LDExOTUuNjIzMDUsMzU0Ljk3NzU0LDExOTUuNjIzMDUNCgkJCQlMMzU0Ljk3NzU0LDExOTUuNjIzMDV6IE03MDMuMjE0ODQsMTI1OS4xNzU3OGMtMTQuNTU5NTctOS44MTczOC0yMC4yMDMxMy0yMC4wMzIyMy0yMC4yMDMxMy0zMy4wODAwOA0KCQkJCWMwLTE4LjQ4OTI2LDE1LjcxNDg0LTI5Ljc2MzY3LDM4LjI2NjYtMjkuNzYzNjdjOS42NTcyMywwLDE4LjcyMTY4LDIuNTQyOTcsMjYuNTU5NTcsNi45OTQxNA0KCQkJCWMyLjA0OTgsMS4xNjQwNiwyLjc2MTcyLDMuNzgzMiwxLjU4MzAxLDUuODI0MjJsLTMuNDE3OTcsNS45MTk5MmMtMy4yNDcwNyw1LjYyNDAyLTkuOTA4Miw4LjMzMTA1LTE2LjE1MzMyLDYuNTQ4ODMNCgkJCQljLTIuNzIzNjMtMC43NzYzNy01LjU5ODYzLTEuMTkyMzgtOC41NzEyOS0xLjE5MjM4Yy0xMC40OTAyMywwLTExLjU5ODYzLDkuNTc2MTctNC44NTc0MiwxNC4xMjMwNWwyMy42ODY1MiwxNS45NzY1Ng0KCQkJCWM5Ljk5MDIzLDYuNzM4MjgsMTUuODk1NTEsMTcuMDY2NDEsMTUuODk1NTEsMjguNzE4NzVjMCwxOC43ODYxMy0xNS4wMDY4NCwzMy4zMDc2Mi0zOC4yNjc1OCwzMy4zMDc2Mg0KCQkJCWMtOS41MjI0NiwwLTE4LjU4Nzg5LTEuOTU3MDMtMjYuODE1NDMtNS40OTAyM2MtNy43ODEyNS0zLjMzOTg0LTEwLjkzMzU5LTEyLjc4MjIzLTYuNjk3MjctMjAuMTE4MTZsMy40ODczLTYuMDQxOTkNCgkJCQljMS4yMTM4Ny0yLjA5OTYxLDMuOTMxNjQtMi43NTk3Nyw1Ljk3NDYxLTEuNDU2MDVjNi44NTkzOCw0LjM4MjgxLDE2LjQ5MDIzLDcuNTk0NzMsMjQuNzU4NzksNy41OTQ3Mw0KCQkJCWMxMC41NDU5LDAsMTEuMzI4MTMtOS45NTg5OCwzLjc2NzU4LTE1LjA1NzYyTDcwMy4yMTQ4NCwxMjU5LjE3NTc4TDcwMy4yMTQ4NCwxMjU5LjE3NTc4eiBNOTg0LjYzMDg2LDEyMDIuMDAwOTgNCgkJCQljMC0yLjM0NzY2LDEuOTAzMzItNC4yNTE5NSw0LjI1MTk1LTQuMjUxOTVoOS45MjE4OGM3LjgyNzE1LDAsMTQuMTcyODUsNi4zNDU3LDE0LjE3Mjg1LDE0LjE3MzgzdjU3LjQwMTM3DQoJCQkJYzAsOC42MTAzNSw2Ljk4MDQ3LDE1LjU5MDgyLDE1LjU5MDgyLDE1LjU5MDgyczE1LjU5MDgyLTYuOTgwNDcsMTUuNTkwODItMTUuNTkwODJ2LTU3LjQwMTM3DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoOS45MjA5YzIuMzQ4NjMsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2NjcuMzIzMjQNCgkJCQljMCwyNC4yNjU2My0xOS42NzA5LDQzLjkzNzUtNDMuOTM2NTIsNDMuOTM3NXMtNDMuOTM3NS0xOS42NzE4OC00My45Mzc1LTQzLjkzNzVWMTIwMi4wMDA5OEw5ODQuNjMwODYsMTIwMi4wMDA5OHoNCgkJCQkgTTQ2Ni44NjkxNCwxMTk1LjYyMzA1YzMyLjQ4NDM4LDAsNTguODE4MzYsMjYuMzMzOTgsNTguODE4MzYsNTguODE5MzRjMCwzMi40ODQzOC0yNi4zMzM5OCw1OC44MTkzNC01OC44MTgzNiw1OC44MTkzNA0KCQkJCWMtMzIuNDg2MzMsMC01OC44MTkzNC0yNi4zMzQ5Ni01OC44MTkzNC01OC44MTkzNEM0MDguMDQ5OCwxMjIxLjk1NzAzLDQzNC4zODI4MSwxMTk1LjYyMzA1LDQ2Ni44NjkxNCwxMTk1LjYyMzA1DQoJCQkJTDQ2Ni44NjkxNCwxMTk1LjYyMzA1eiBNNDY2Ljg2OTE0LDEyMjUuMDMzMmMtMTYuMjQzMTYsMC0yOS40MTAxNiwxMy4xNjY5OS0yOS40MTAxNiwyOS40MDkxOA0KCQkJCXMxMy4xNjY5OSwyOS40MDgyLDI5LjQxMDE2LDI5LjQwODJjMTYuMjQxMjEsMCwyOS40MDgyLTEzLjE2NjAyLDI5LjQwODItMjkuNDA4MlM0ODMuMTEwMzUsMTIyNS4wMzMyLDQ2Ni44NjkxNCwxMjI1LjAzMzINCgkJCQlMNDY2Ljg2OTE0LDEyMjUuMDMzMnogTTU1Ni43MzI0MiwxMzExLjEzNDc3Yy0yLjM0NzY2LDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtOTQuOTYxOTENCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzM4My0xNC4xNzM4M2gzLjk1ODk4YzQuNjI1LDAsOC45NTg5OCwyLjI1Njg0LDExLjYxMTMzLDYuMDQ1OWw0MS4xMjIwNyw1OC43NDcwN3YtNTAuNjE5MTQNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2g5LjkyMTg4YzIuMzQ3NjYsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2OTQuOTYwOTQNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3MzgzLDE0LjE3Mjg1aC0zLjk1ODk4Yy00LjYyNSwwLTguOTU4OTgtMi4yNTU4Ni0xMS42MTEzMy02LjA0NDkybC00MS4xMjIwNy01OC43NDYwOXY1MC42MTgxNg0KCQkJCWMwLDcuODI5MS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVINTU2LjczMjQyTDU1Ni43MzI0MiwxMzExLjEzNDc3eiBNMTIxNS4wMjA1MSwxMjExLjkyMjg1DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoNTAuMzE1NDNjMi4zNDg2MywwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyDQoJCQkJYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVoLTYuMDI0NDF2NzUuMTE4MTZjMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMTg4DQoJCQkJYy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtODUuMDQxMDJoLTE1Ljk0NDM0Yy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMzMyLTQuMjUxOTUtNC4yNTE5NVYxMjExLjkyMjg1DQoJCQkJTDEyMTUuMDIwNTEsMTIxMS45MjI4NXogTTc3Ni40NDkyMiwxMjExLjkyMjg1YzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTczODMtMTQuMTczODNoNTAuMzE0NDUNCgkJCQljMi4zNDk2MSwwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcxODgsMTQuMTcyODVoLTYuMDI1Mzl2NzUuMTE4MTYNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMDljLTIuMzQ5NjEsMC00LjI1MTk1LTEuOTAyMzQtNC4yNTE5NS00LjI1di04NS4wNDEwMmgtMTUuOTQ1MzENCgkJCQljLTIuMzQ3NjYsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMTEuOTIyODVMNzc2LjQ0OTIyLDEyMTEuOTIyODV6IE05MjkuNjA0NDksMTI3Mi4wMjI0NmwyNi45NTgwMSwzMi4xMjc5Mw0KCQkJCWMyLjMxNDQ1LDIuNzU3ODEsMC4zNDM3NSw2Ljk4NDM4LTMuMjU2ODQsNi45ODQzOGgtMTkuNzA1MDhjLTQuMTg5NDUsMC04LjE2NTA0LTEuODUxNTYtMTAuODU3NDItNS4wNjA1NWwtMjIuNjgxNjQtMjcuMDMxMjUNCgkJCQl2MjcuODQxOGMwLDIuMzQ3NjYtMS45MDMzMiw0LjI1LTQuMjUxOTUsNC4yNWgtOS45MjA5Yy03LjgyNzE1LDAtMTQuMTcyODUtNi4zNDM3NS0xNC4xNzI4NS0xNC4xNzI4NXYtODUuMDM5MDYNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2gyOS43NjM2N2MyMi43MDAyLDAsNDEuMTAyNTQsMTcuMTMzNzksNDEuMTAyNTQsMzguMjY4NTUNCgkJCQlDOTU2Ljc1NDg4LDEyNTIuNTkwODIsOTQ1LjQzNjUyLDEyNjYuNzAyMTUsOTI5LjYwNDQ5LDEyNzIuMDIyNDZMOTI5LjYwNDQ5LDEyNzIuMDIyNDZ6IE05MDAuMDYxNTIsMTIyMS44NDM3NXYzMi41OTg2M2g4LjUwMzkxDQoJCQkJYzEwLjk1ODk4LDAsMTkuODQyNzctNy4yOTc4NSwxOS44NDI3Ny0xNi4yOTg4M2MwLTkuMDAxOTUtOC44ODM3OS0xNi4yOTk4LTE5Ljg0Mjc3LTE2LjI5OThIOTAwLjA2MTUyTDkwMC4wNjE1MiwxMjIxLjg0Mzc1eg0KCQkJCSBNMTE1OC4zNTkzOCwxMTk1LjYyMzA1YzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NzI3LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOA0KCQkJCWwtNC45MzI2Miw4LjU0MTk5Yy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNTU5LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMyMjMsMCw1Ljk2MDk0LTAuNDQzMzYsOC43MjU1OS0xLjI2ODU1YzYuMjk1OS0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTgzNiw2LjUwMDk4bDQuOTMwNjYsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM3NSw1LjczNDM4Yy05LjAwNDg4LDUuNjAxNTYtMTkuNjMyODEsOC44Mzc4OS0zMS4wMTc1OCw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzEwOTkuNTQwMDQsMTIyMS45NTcwMywxMTI1Ljg3NDAyLDExOTUuNjIzMDUsMTE1OC4zNTkzOCwxMTk1LjYyMzA1eiIvPg0KCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMwMEZGREEiIGQ9Ik0xMzE4LjE5NzI3LDEyMDYuMDMyMjMNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2MyMC42NTYyNSwwLDQxLjMxMjUsMCw2MS45Njg3NSwwYzMuNDI5NjksMCw1LjQ1MDIsMy44ODA4NiwzLjQ4MzQsNi42OTA0Mw0KCQkJCWwtMTkuMjk2ODgsMjcuNTY3MzhjMTUuNTQyOTcsOC4zNzU5OCwyNi4xMDY0NSwyNC44MDA3OCwyNi4xMDY0NSw0My42OTUzMWMwLDI3LjM5NzQ2LTIyLjIwODk4LDQ5LjYwNjQ1LTQ5LjYwNjQ1LDQ5LjYwNjQ1DQoJCQkJYy0xNi42ODg0OCwwLTMxLjQ1MTE3LTguMjQwMjMtNDAuNDQzMzYtMjAuODc1OThjLTEuNDUwMi0yLjAzOTA2LTAuODMxMDUtNC44OTk0MSwxLjMzNTk0LTYuMTUyMzRsMTAuOTc3NTQtNi4zMzc4OQ0KCQkJCWM0Ljg4MTg0LTIuODE4MzYsMTAuOTc5NDktMi40NzU1OSwxNS41MTQ2NSwwLjg3MzA1YzMuNTI4MzIsMi42MDU0Nyw3Ljg5MTYsNC4xNDY0OCwxMi42MTUyMyw0LjE0NjQ4DQoJCQkJYzExLjc0MjE5LDAsMjEuMjU5NzctOS41MTg1NSwyMS4yNTk3Ny0yMS4yNTk3N3MtOS41MTc1OC0yMS4yNTk3Ny0yMS4yNTk3Ny0yMS4yNTk3N2gtMTUuMjE3NzcNCgkJCQljLTMuNDI5NjksMC01LjQ1MDItMy44ODA4Ni0zLjQ4NDM4LTYuNjkwNDNsMTguMTM1NzQtMjUuOTA4MmgtMzIuMDA5NzdjLTIuMzQ4NjMsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMDYuMDMyMjN6DQoJCQkJIi8+DQoJCTwvZz4NCgkJPGc+DQoJCQk8Zz4NCgkJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0RBRThGNyIgZD0iTTg1MC4zOTU1MSw4NTcuNTkxOA0KCQkJCQljLTUwLjM1NjQ1LDAtOTQuMzI1Mi0yNy4zNTY0NS0xMTcuODUyNTQtNjguMDIwNTFsLTgwLjAzMDI3LDQ2LjIwNDFjLTQuNjU1MjcsMi42ODk0NS02LjEzMTg0LDguNzE4NzUtMy4yNDkwMiwxMy4yNTU4Ng0KCQkJCQljNDIuMjM3Myw2Ni40ODYzMywxMTYuNTMzMiwxMTAuNjA3NDIsMjAxLjEzMTg0LDExMC42MDc0MmM4OC4xMjU5OCwwLDE2NS4wNzEyOS00Ny44NzUsMjA2LjI0MzE2LTExOS4wMzYxM2wtODAuNDg3My00Ni40Njk3Mw0KCQkJCQljLTQuMzEzNDgtMi40OTAyMy05LjgwMTc2LTEuMjA1MDgtMTIuNTcwMzEsMi45MzU1NUM5MzkuMTc1NzgsODMzLjU2MjUsODk3LjU5MTgsODU3LjU5MTgsODUwLjM5NTUxLDg1Ny41OTE4DQoJCQkJCUw4NTAuMzk1NTEsODU3LjU5MTh6IE0xMTM2LjcyMTY4LDU1Ni4yMTc3N2M0LjYxNDI2LTIuNjYzMDksNi4xMTAzNS04LjYxOTE0LDMuMzEyNS0xMy4xNTEzNw0KCQkJCQljLTU5LjkxNTA0LTk3LjAzMDI3LTE2Ny4yMjQ2MS0xNjEuNjk0MzQtMjg5LjYzODY3LTE2MS42OTQzNGMtMTI1Ljg5MzU1LDAtMjM1LjgxMzQ4LDY4LjM5MjU4LTI5NC42MzM3OSwxNzAuMDQ5OA0KCQkJCQlsODAuMzc2OTUsNDYuNDA2MjVjNC4zOTc0NiwyLjUzOTA2LDEwLjAwMTk1LDEuMTQ5NDEsMTIuNzEwOTQtMy4xNDU1MQ0KCQkJCQljNDIuMTY0MDYtNjYuODUxNTYsMTE2LjY2ODk1LTExMS4yNjM2NywyMDEuNTQ1OS0xMTEuMjYzNjdjODguMTI1OTgsMCwxNjUuMDcxMjksNDcuODc1OTgsMjA2LjI0MzE2LDExOS4wMzYxMw0KCQkJCQlMMTEzNi43MjE2OCw1NTYuMjE3Nzd6Ii8+DQoJCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNBNUJBQzgiIGQ9Ik04NTAuMzk1NTEsOTU5LjYzODY3DQoJCQkJCWMtODQuNTk4NjMsMC0xNTguODk0NTMtNDQuMTIxMDktMjAxLjEzMTg0LTExMC42MDc0MmMtMi44NzY5NS00LjUzMDI3LTEuMzk5NDEtMTAuNTcwMzEsMy4yNDkwMi0xMy4yNTU4Nmw4MC4wMzAyNy00Ni4yMDQxDQoJCQkJCWMtMTEuNTgxMDUtMjAuMDE2Ni0xOC4yMDk5Ni00My4yNTQ4OC0xOC4yMDk5Ni02OC4wNDE5OWMwLTc0Ljc4NTE2LDYwLjU1NzYyLTEzNi4wNjI1LDEzNi4wNjI1LTEzNi4wNjI1DQoJCQkJCWM0Ny4xOTYyOSwwLDg4Ljc4MDI3LDI0LjAyOTMsMTEzLjE4NTU1LDYwLjUyMjQ2YzIuNzY0NjUsNC4xMzM3OSw4LjI2MzY3LDUuNDIxODgsMTIuNTcwMzEsMi45MzU1NWw4MC40ODczLTQ2LjQ2OTczDQoJCQkJCWMtNDEuMTcxODgtNzEuMTYwMTYtMTE4LjExNzE5LTExOS4wMzYxMy0yMDYuMjQzMTYtMTE5LjAzNjEzYy04NC44NzY5NSwwLTE1OS4zODE4NCw0NC40MTIxMS0yMDEuNTQ1OSwxMTEuMjYzNjcNCgkJCQkJYy0yLjcwNjA1LDQuMjkxMDItOC4zMTgzNiw1LjY4MTY0LTEyLjcxMDk0LDMuMTQ1NTFsLTgwLjM3Njk1LTQ2LjQwNjI1DQoJCQkJCWMtMjguOTUyMTUsNTAuMDQwMDQtNDUuNTIzNDQsMTA4LjEzOTY1LTQ1LjUyMzQ0LDE3MC4xMDc0MmMwLDE4Ni45NjM4NywxNTEuMzk0NTMsMzQwLjE1NzIzLDM0MC4xNTcyMywzNDAuMTU3MjMNCgkJCQkJYzEyMi40MTQwNiwwLDIyOS43MjM2My02NC42NjQwNiwyODkuNjM4NjctMTYxLjY5NTMxYzIuNzk0OTItNC41MjYzNywxLjI5NDkyLTEwLjQ5MDIzLTMuMzEyNS0xMy4xNTEzN2wtODAuMDgzMDEtNDYuMjM3Mw0KCQkJCQlDMTAxNS40NjY4LDkxMS43NjM2Nyw5MzguNTIxNDgsOTU5LjYzODY3LDg1MC4zOTU1MSw5NTkuNjM4Njd6Ii8+DQoJCQk8L2c+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzAwRkZEQSIgZD0iTTExMzcuMTg1NTUsNzU4LjExMzI4di03My4xNjc5N2wtNjMuMzY1MjMsMzYuNTgzOTgNCgkJCQlMMTEzNy4xODU1NSw3NTguMTEzMjhMMTEzNy4xODU1NSw3NTguMTEzMjh6IE0xMDI2LjU3NjE3LDcwNS4xNjQwNmwxMjAuMDU4NTktNjkuMzE2NDENCgkJCQljMTIuNTY4MzYtNy4yNTU4NiwyOC4zNDQ3MywxLjg1MjU0LDI4LjM0NTcsMTYuMzY2MjF2MTM4LjYzMDg2Yy0wLjAwMDk4LDE0LjUxMjctMTUuNzc3MzQsMjMuNjIyMDctMjguMzQ1NywxNi4zNjYyMQ0KCQkJCWwtMTIwLjA1ODU5LTY5LjMxNjQxQzEwMTQuMDI4MzIsNzMwLjY0OTQxLDEwMTQuMDI4MzIsNzEyLjQwOTE4LDEwMjYuNTc2MTcsNzA1LjE2NDA2eiIvPg0KCQk8L2c+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=").then(t=>{"done"===this.lOt?s.ob(t):this.eOt.hOt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.P3t("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAmd137hFVqjO7zCKIRGZ881JRAAAFY0lEQVR42u2aPW/bVhSGn1iiPizZ8D+QgSJBNglFmiboQA0NUKAD1XotYA0BOspAkZnqx24vnTrIQNCpg4QkQMcYKDoW9j9w5y6qLNqWFDlvh3tJUa6ddHBhAuS7SKBIQffhuee851CQKVOmTJkyZcqUKXmqa8O+uyNlABKsFRmdP0o5AOle2gHoWdoBzFrpBHACwPeetJNmAFSlt6kGwGH0LqUAVqRuqgHkpEaqAVRkfvOWr+Dh9Rc4j6VvwnrhPNAbgK2ezj+yx7Z6GjUuASi4Ch4lHQAGwBeRK1rROQAdUx5K0hE4NUkaAdS02ZEuoms2wkCSgvYSgFJfkn6CobkSPG0mEcAOrHnGFOxAToHNjk/MygLgO/PxL0BN9yRdQKlufMQAoCdJGi8BOJYknXTJ269cu9HtdqNb4Ni6oimUbFb0dAZQ1DmULJ+TFtT0qQHwg73mLlCMfFUMQPR5VWrbmttNHICC1KDiSZ+w3pMOwFPDhP4IYFtv4ZX0nIorbUBNmjWAiqdZg5fmNFd6jvPhJQDjAV9LI0r28IpmycsBZalNWfoRWJcuoKY9c7cCkwpOwdcIqNT1BmrSgQkNbQAvpAGOF+aHOIBpCxhKR/TVBNjVOHkAOgrg2N6aoU7sklmVidtD7bNm/fIrjaBmk+Sxea142iBnTyguAfjZZscNXLOdXFM8EgVgXRpDz/6yonTEts6AXdV1APTVoKigFSXEmj3XN0kSV01WFQwAHC8O4Mhagye8NgHS137SALzsS3dxwhtXkQ4oaw64eqomOFKXbc2xJbFLTX8DOHYnsKsJu2Gdu8IIuTqjrMB8eyM5ACIFXQo2S5t7lNMM6AdFTaCgADqahHW8EQIohBk9rzEdE+JXAtjVmHWpDTmplUAA96Ea/bJDnVKSWjgaFTSHqubgmjVDXQchgFy4wBXNcXV6LYC8RjbEypomcCAyBopRShxqAn21yenM8WawqjOoKVbmLYBFndeImsnyVwJY1RR8NW1FTRiA6UNTCsP6fKwLONQBZTXx1WVbT0KbtwygvAxg81oAZU0xe2QYxkmyrDDx2DzWBXTUZFs7dNQwHUEMwN4VAKb47wOQ1wj8Gx0+/Y8A8powVJtt7XOoxn8A8N4IqCrA8cJUmzgAl3JAUWN8tSjqDX0NwI/XbwugGLe178oBK7bBaBesm0gggOUqwLrOHe8c1jV2NAMOw/XFAFRth2dr/burANS1cSc0C8kDsB7zAZvgKCjoLTiaFqwpmvwLQC7e2b3PB4CrZj48KXkAKktOEPr6VqeAr680udzEWACluK0LreJ1ThBe6+w4HkfJAhD1AtbAu3qgPcDVX2oCK9bqxwFQ1+fRsVW7va/uBZpAWaND652TCGBoM1rHHN6VmQlsq6cdE+4mC75oLAC49prKB1zTDd6NukHIKahbIkkEsGrmAQWZbZqXNLClrg04dTP4KnjnCwBfmgkZT7WD45k94C8BmA3MPGBgeqcbfQBxwwDsRMi3N7Iqc3dzsuVhV5ofkevpJOoGKUn6Ax5L92F49USoayZCls08uQDiM0ETCWPb8k7DMmH02SICGC7ayVhnsABwEpsZQkfxUpI4ALGpsFn4xCbHcVjnwgnvAkBh0U6CbzqrXgzA1E6FB9YOJGcacgUAfl36t0Ro/SIDUDEL/D1WBcJr5q0oRoJ2LQZgZJ4LPIu2RCPJAJafDLm2Yr2OHmQ4H0vzBksA2PKl38L3fY0aLAFYejK0ZpJhelVKzkj8dlRNzkj8dpRP0DTkVjTUXroB9PVnqtefS9I05BZU8NOdAyUl5q8RtwUg6KYcwP1Up8CanpMpU6ZMmTLdgP4BRYsi23xEdOAAAAAASUVORK5CYII=").then(t=>{"done"===this.lOt?s.ob(t):this.eOt.nOt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.P3t("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAdxHdu4hmVZnuRMwzqiLYE4y2AAAFw0lEQVR42u2Yy+9LQRTHp6Xq0VIkXkFvwkYslAWJiGJj2a6sJJe/oF3YWGElEQmxkYi4ErFWNpatWFmIx9Lm1sJCLKgqraqv82h726l6hOuRzDf53TtnOr+ZOZ+ZOffca5ycnJycnJycnJycnJycnJz+pi7g2G9osxjvzX8qB8ABcAAcgH8XwDa85dspNOiaRDuAR4U0PnHtDuyy7IJRJS6gvVmL6TywVkp4ZxIhulUxFvlaXQTrgEHbnMDH5XRjlXCdb+uAnc2ojWgFFTYBZ8e9tzcaswAk6v/3K4sPfPNRFj87IXj+KXQUS9m2jXoH1lMuLq2DtEcAtNMBT9PjanFq7ySAhbABVEAaeDaAwkk2D7GRqctAMQJIq2sBauLnB/VxCfqKpWrbRhSC1W5SMQ9RTgBUwKpF1ccmAIQ2gCxE+20Au9nSESvDgeIDkJSBMpA9vgyXdsj0H0GORL3n2fbwPOKoSQS4Q2cBOGzSJbQYAHDbZEI+rEuBcyZRlF71fIP/x0wBuIBOw6xH3xu2GQFAP2cegmvSwHkeqBZjECzB46UXD3bg8UKJCT6QYzgDY9uiU7hC11doERq6MAZ2CPJ7ipEulOrteDcB4KOZBpBG7zrV1JGzATzmIdnrl/go3bRiBJBHlZc+6ItjuQQ+yFLz8Gka2LZFRVTFGdoQJQ0LPodHnXkS8AjlRWkBLwKQswAs0PDzGpcsAAMNuG+5WgdqxwjgEcp8qcBjN5oZdPhEvOfhU/hsbJuVloWV6WWgp2IBLxXQNEwLDfKqoMXrEQBjATiFA3qePlgAZJRl+EStdaAQjfgALOC1zfeX8ALV+7S69JdALWjxHGqztmxyMnTD6OOBWvAdGDkn60c6vrI5H4CPnOJsWQDe8G0hIU0MB8ojFx+AFAeqeitLy5FkL3w0yNNcSOx3oDxjjxaH9XxldZluY5NBfwrAQvQbRjQXAO8UqVq5dh6A7HCgWzgdFwBdgOX4lMZbTndkWWkDN07Bk+zItllLdHm1+FkLwBSADNDf8B0AnGOp5gFYgJEexwcgGQx4iyeD9ybFkWsbDZbv0+2Y8XvGtqMpWsUimpMAzA1AUrj5ALjm2wCoONKB+ACYsEeDlU04MMs4imeJQqljslSuD4xl/zgAsx6ku/8DgDwaO9AwFU56qhzOPiXpKCzCpSSdb8v+CQDmXshb99cARAPFCOA1chWaFXlP55yn2FqEgiFvOSzYtmiJzisKB7MxQPS8iO63YsD3AHDv8QPgjR92eKuf9vts1wdZjvZhN4XajD35FNDiR7ln0LYBaILY+OZT4DsA+BkTP4AUrgXkxSJcDFps+72X7EGlx6mBbU/lAbdQjvKA7hSAlSuHxdw0gORsHrAUnXkAUuj+AQAZdHGRp9bShX2ECz1JRSk4zNhRJqj5SZQJfpgCUNS2eRsAP/usTDAxPxFKA834AZgAOM1z6qGgxxpdmUDQNjP25LtAsojxu0AehSkAF6RLXWR/EkAdVYEevQtswVtpMwuAB1JGh2jbxQcgBKrig/qSxTD6o2Nm7fttSY6uUnErV+jb4CJyaArAI5luJkCDOy5HAPISSB5A3wYbhJERahvtPALAAw2EI9Vzsh2TTuk23qEceN9d4vVVv227hNroe0CRi/o9IKTZTQFIAc/M8jwGEiouG2/042u8u25uAuPvAavRH7XhzqcBpICdRpssRa+aNLFoh2JeyBzU08fih/ht20WZXghW34s+/ZQnAKhzojsSH4CC/sjARPKamLXacOfTAIwfNSkCbROLluG9Tm2gdl3PY178tu2SBIpFQ6fHH//2GAvAogCkjtGDEAFQYPsu6DdBqw11bgFIF8dNHsQGIEFRSDOe0RS9YYJk23JMrw+/Cr9bFX0VXmNsACbhA088qXhBrMYAlq8Gjhh//FX4YNSGO7cASO9n9B99AuHk5OTk5OTk5OTk5OTk5OTk5OT0VX0B7+fX+9cwWYYAAAAASUVORK5CYII=").then(t=>{"done"===this.lOt?s.ob(t):this.eOt.rOt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async R3t(t){t=new URL(t,this.Hc.k3t()).toString();const s=await C.po(t),i=await this.Hc.F3t(s,2048,2048);return this.MS().KN(i,{KT:"high"})}async P3t(t){t=new URL(t,this.Hc.k3t()).toString();const s=await C.po(t);return this.MS().KN(s,{KT:"high"})}j3t(){this.Hc.Xc("runtime","hide-cordova-splash")}z3t(){this.KLt=Date.now(),this.Hc.Nf().addEventListener("loadingprogress",this.sOt),this.$Lt=requestAnimationFrame(()=>this.B3t());const t=this.Hc.U3t();3!==t&&this.j3t()}async W3t(){const t=this.MS(),s=(this.tOt=1,this.Hc.U3t());4===s&&await this.fOt,this.cOt=null,this.fOt=null,-1!==this.$Lt&&(cancelAnimationFrame(this.$Lt),this.$Lt=-1),this.Hc.Nf().removeEventListener("loadingprogress",this.sOt),this.sOt=null,this.iOt&&(this.iOt.$h(),this.iOt=null),this.Hc.Q3t(),t.UN(),this.eOt.hOt&&(t.ob(this.eOt.hOt),this.eOt.hOt=null),this.eOt.nOt&&(t.ob(this.eOt.nOt),this.eOt.nOt=null),this.eOt.rOt&&(t.ob(this.eOt.rOt),this.eOt.rOt=null),t.BN(0,0,0,0),t.Qw(),this.lOt="done",this.FLt=t.Vw(),3===s&&this.j3t()}B3t(){if(-1!==this.$Lt){const t=this.MS(),s=(t.UN(),this.$Lt=-1,this.Hc.rO().RQ()),i=this.Hc.U3t();if(3!==i&&(this.m3t(t),t.BN(0,0,0,0),t.dN(),t.SM(),t.mN(null)),0===i)this.J3t(s);else if(1===i)this.V3t(s,120,0);else if(2===i)this.Y3t(s);else if(3===i)C.Ir();else{if(4!==i)throw new Error("invalid loader style");this.H3t(s)}t.Qw(),this.$Lt=requestAnimationFrame(()=>this.B3t())}}Y3t(t){t?this.iOt.xG(1,0,0):this.iOt.xG(.6,.6,.6),this.iOt.Kc(Math.round(100*this.tOt)+"%");const s=this.pLt/2,i=this.mLt/2,e=(Aa.Xu(s-150,i-100,150+s,100+i),this.MS());e.mN(this.iOt.pb()),e.pw(Aa,this.iOt.cE())}V3t(t,s,i){const e=this.MS(),h=(e.IM(),t?e.cN(1,0,0,1):e.cN(.118,.565,1,1),this.pLt/2),n=this.mLt/2,r=s/2;G.hu(h-r,n-4+i,Math.floor(s*this.tOt),8),e.Rect(G),G.hu(h-r,n-4+i,s,8),G.offset(-.5,-.5),G.Cu(.5,.5),e.cN(0,0,0,1),e.ww(G),G.Cu(1,1),e.cN(1,1,1,1),e.ww(G)}J3t(t){const s=this.MS(),i=this.Hc.O3t();if(i){const e=i.pb();if(e){const h=e.Yp(),n=e.nm(),r=this.pLt/2,o=this.mLt/2,a=h/2,u=n/2;Aa.Xu(r-a,o-u,r+a,o+u),s.mN(e),s.Uu(Aa),this.V3t(t,h,16+u)}else this.V3t(t,120,0)}else this.V3t(t,120,0)}H3t(t){let s=this.MS(),i=this.eOt.hOt,e=this.eOt.nOt,h=this.eOt.rOt,n=Date.now(),r=(0===this.oOt&&(this.KLt=n),this.Hc.q3t()||this.Hc.Z3t()&&!this.Hc.X3t()),o=r?0:200,a=r?0:3e3,u=1,l=("fade-in"===this.lOt?u=Math.min((n-this.KLt)/300,1):"fade-out"===this.lOt&&(u=Math.max(1-(n-this.uOt)/300,0)),s.IM(),s.cN(.231*u,.251*u,.271*u,u),G.set(0,0,this.pLt,this.mLt),s.Rect(G),Math.ceil(this.pLt)),c=Math.ceil(this.mLt),f,d;256<this.mLt?(s.cN(.302*u,.334*u,.365*u,u),f=l,d=Math.max(.005*c,2),G.hu(0,.8*c-d/2,f,d),s.Rect(G),t?s.cN(u,0,0,u):s.cN(.161*u,.953*u,.816*u,u),f=l*this.tOt,G.hu(.5*l-f/2,.8*c-d/2,f,d),s.Rect(G),s.cN(u,u,u,u),s.SM(),e&&(f=1.5*C.rn(.22*c,105,.6*l),d=f/8,G.hu(.5*l-f/2,.2*c-d/2,f,d),s.mN(e),s.Rect(G)),i&&(f=Math.min(.395*c,.95*l),d=f,G.hu(.5*l-f/2,.485*c-d/2,f,d),s.mN(i),s.Rect(G)),h&&(f=1.5*C.rn(.22*c,105,.6*l),d=f/8,G.hu(.5*l-f/2,.868*c-d/2,f,d),s.mN(h),s.Rect(G))):(s.cN(.302*u,.334*u,.365*u,u),f=l,d=Math.max(.005*c,2),G.hu(0,.85*c-d/2,f,d),s.Rect(G),t?s.cN(u,0,0,u):s.cN(.161*u,.953*u,.816*u,u),f=l*this.tOt,G.hu(.5*l-f/2,.85*c-d/2,f,d),s.Rect(G),s.cN(u,u,u,u),s.SM(),i&&(f=.55*c,d=f,G.hu(.5*l-f/2,.45*c-d/2,f,d),s.mN(i),s.Rect(G))),this.oOt++,"fade-in"===this.lOt&&300<=n-this.KLt&&2<=this.oOt&&(this.lOt="wait",this.aOt=n),"wait"===this.lOt&&n-this.aOt>=a&&1<=this.tOt&&(this.lOt="fade-out",this.uOt=n),("fade-out"===this.lOt&&n-this.uOt>=300+o||r&&1<=this.tOt&&n-this.KLt<500)&&this.cOt()}}}{let U=self.Os,W=self.C3Debugger,i={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},r=!0;U.K3t=class extends U.Zh{constructor(t){t=Object.assign({},i,t),super(),this.$3t=t.messagePort,this.t4t=t.runtimeBaseUrl,this.s4t=t.previewUrl,this.i4t=!!t.headless,this.e4t=!!t.hasDom,this.h4t=!!t.isInWorker,r=t.ife,this.n4t=!!t.useAudio,this.r4t=t.exportType,this.o4t=t.isNWjs,this.k6=!!t.isiOSCordova,this.a4t=!!t.isiOSWebView,this.u4t=!!t.isWindowsWebView2,this.l4t=!!t.isAnyWebView2Wrapper,this.c4t=!!t.isFBInstantAvailable,this.f4t=!("preview"!==this.r4t||!t.isDebug),this.d4t=this.f4t,this.p4t=this.f4t,this.m4t=0,this.g4t=[],this.y4t=[],this.M4t=!1,this.w4t="",this.S4t="",this.T4t="",this.b4t="",this.x4t=0,this.v4t=0,this.AA=self.devicePixelRatio,this.C4t=0,this.I4t=0,this.G4t=0,this.E4t=0,this._4t=0,this.N4t=!1,this.xg=!0,this.D4t=!1,this.A4t=!1,this.L4t=!1,this.O4t=null,this.XQ=U.Kh(U.L6,this,t),this.KH=U.Kh(U.Mq,this),this.aft=U.Kh(U.n0t,this),this.R4t=U.Kh(U.NR,this,t.wrapperComponentIds),this.P4t=U.Kh(U.tAt,this),this.XK=U.Kh(U.jq,this),this.k4t=U.Kh(U.qat,this),this.F4t=U.Kh(U.Xat,this),this.cut=U.Kh(U.nut,this),this.Mg=U.Kh(U.ng,{ag:t=>this.j4t(t),lg:t=>this.z4t(t)}),this.B4t=new Map,this.U4t=[],this.W4t=new Map,this.Q4t=new Map,this.J4t=0,this.V4t=[],this.Y4t=new Set,this.H4t=[],this.q4t=[],this.Z4t=new Map,this.X4t=!1,this.K4t=!1,this.$4t=0,this.tRt=0,this.sRt=new Map,this.iRt=new Set,this.eRt=new Set,this.hRt=[],this.nRt=[],this.rRt=null,this.oRt=!1,this.aRt="vsync",this.n2="trilinear",this.uRt=!1,this.lRt=!0,this.cRt=!1,this.fRt=!1,this.dRt=null,this.pRt={mRt:t=>{this.$Lt=-1,this.gRt=-1,this.uX(t)},yRt:t=>{this.gRt=-1,this.uX(t,!1,"skip-render")},MRt:()=>{this.$Lt=-1,this.$A()}},this.$Lt=-1,this.gRt=-1,this.wRt=0,this.SRt=0,this.TRt=!1,this.bRt=!1,this.xRt=!1,this.vRt=!0,this.CRt=!0,this.IRt=!1,this.GRt=0,this.ERt=new U.$0(1),this._Rt=()=>Math.random(),this.NRt=0,this.DRt=0,this.ARt=0,this.LRt=0,this.ORt=0,this.WGt=1,this.RRt=1/30,this.PRt=0,this.kRt=U.Kh(U.c0),this.FRt=U.Kh(U.c0),this.jRt=U.Kh(U.c0),this.zRt=new Map,this.BRt=-1,this.URt=0,this.WRt=0,this.QRt=-1,this.JRt=0,this.VRt=0,this.YRt=0,this.HRt=!1,this.qRt="",this.ZRt=!1,this.XRt="",this.cj=null,this.KRt="",this.$Rt=null,this.tPt=null,this.YCt=U.Kh(U.Event.Nf),this.sPt=new Map,this.iPt=new Map,this.ePt=0,this.hPt=!1,this.nPt=!1,this.rPt=!1,this.oPt=[],this.aPt={pretick:U.Kh(U.Event,"pretick",!1),tick:U.Kh(U.Event,"tick",!1),tick2:U.Kh(U.Event,"tick2",!1),instancecreate:U.Kh(U.Event,"instancecreate",!1),instancedestroy:U.Kh(U.Event,"instancedestroy",!1),beforelayoutchange:U.Kh(U.Event,"beforelayoutchange",!1),layoutchange:U.Kh(U.Event,"layoutchange",!1)},this.aPt.instancecreate.rz=null,this.aPt.instancedestroy.rz=null,this._7=U.Kh(U.Event.Nf),this.uPt=null;const s=(t,s)=>U.BGt.vDt(this,t,s);this.lPt=U.Kh(U.S0,s),this.cPt=U.Kh(U.S0,s),this.fPt=U.Kh(U.S0,s),this.dPt=U.Kh(U.pPt,this,t.jobScheduler),t.canvas&&(this.rRt=U.Kh(U.eLt,this)),this.$3t.onmessage=t=>this._OnMessageFromDOM(t.data),this.tj("runtime","visibilitychange",t=>this.mPt(t)),this.tj("runtime","wrapper-extension-message",t=>this.gPt(t)),this.tj("runtime","opus-decode",t=>this.R4(t.arrayBuffer)),this.tj("runtime","get-remote-preview-status-info",()=>this.yPt()),this.tj("runtime","js-invoke-function",t=>this.L0t(t)),this.tj("runtime","go-to-last-error-script",self.goToLastErrorScript),this.tj("runtime","offline-audio-render-completed",t=>this.MPt(t)),this.YCt.addEventListener("window-blur",t=>this.wPt(t)),this.YCt.addEventListener("window-focus",()=>this.SPt()),this.XK.MZ(),this.F4t.MZ(),this.TPt=null,this.bPt=new WeakMap,this.xPt={keyboard:null,U3:null,W3:null,Q3:null},this.vPt=new WeakMap,this.CPt=[]}static Ob(t){return U.Kh(U.K3t,t)}$h(){U.Nr(this.U4t),this.W4t.clear(),this.Q4t.clear(),this.KH.$h(),this.KH=null,this.aft.$h(),this.aft=null,this.R4t.$h(),this.R4t=null,this.XQ.$h(),this.XQ=null,this.P4t.$h(),this.P4t=null,this.XK.$h(),this.XK=null,this.k4t.$h(),this.k4t=null,this.F4t.$h(),this.F4t=null,this.cut.$h(),this.cut=null,this.Mg.$h(),this.Mg=null,this.rRt&&(this.rRt.$h(),this.rRt=null),this.YCt.$h(),this.YCt=null,this.IPt=null}["_OnMessageFromDOM"](t){const s=t.type;if("event"===s)this.GPt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.EPt(t)}}GPt(t){if(this.rPt){const s=t.component,i=t.handler,e=t.data,h=t.dispatchOpts,n=!(!h||!h.dispatchRuntimeEvent),r=!(!h||!h.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(n){const u=new U.Event(i);u.data=e,this.YCt.zf(u)}if(r){const l=new U.Event(i,!0);for(const[c,f]of Object.entries(e))l[c]=f;this.pq(l)}}const a=this.sPt.get(s);if(a){const d=a.get(i);if(d){let t=null;try{t=d(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this._Pt(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this._Pt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this._Pt(o,!1,""+t)}):this._Pt(o,!0,t))}else n||r||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`)}else n||r||console.warn(`[Runtime] No DOM event handlers for component '${s}'`)}else this.oPt.push(t)}_Pt(t,s,i){this.$3t.postMessage({type:"result",responseId:t,isOk:s,result:i})}EPt(t){const s=t.responseId,i=t.isOk,e=t.result,h=this.iPt.get(s);i?h.resolve(e):h.reject(e),this.iPt.delete(s)}tj(t,s,i){let e=this.sPt.get(t);if(e||(e=new Map,this.sPt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}Xc(t,s,i,e){this.$3t.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}u4(t,s,i,e){const h=this.ePt++,n=new Promise((t,s)=>{this.iPt.set(h,{resolve:t,reject:s})});return this.$3t.postMessage({type:"event",component:t,handler:s,data:i,responseId:h},e),n}KU(t,s,i,e=-1){this.Xc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}$U(t,s,i){const e=this.ePt++,h=new Promise((t,s)=>{this.iPt.set(e,{resolve:t,reject:s})});return this.KU(t,s,i,e),h}gPt(t){if(-1!==t.asyncId){const s=t.asyncId,i=this.iPt.get(s);i.resolve(t.params),this.iPt.delete(s)}else this.GPt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}mj(t,s,i){this.tj("wrapper-extension:"+t,s,i)}dj(t){return this.R4t.dj(t)}NPt(t){if(!this.mq())throw new Error("not in debug mode");this.Xc("runtime","post-to-debugger",t)}async VGt(t){U.bSt(this),this.mq()?await W.VGt(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const[s]=await Promise.all([this.XQ.do("data.json"),this.DPt(),this.dPt.VGt()]);if(await this.APt(s),await this.LPt(t),this.q3t()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.f3t()){const i=this.f3t();console.info(`[C3 runtime] Hosted in ${this.yO()?"worker":"DOM"}, rendering with WebGL ${i.m2()} [${i.wD()}]`)}else this.d3t()&&console.info(`[C3 runtime] Hosted in ${this.yO()?"worker":"DOM"}, rendering with WebGPU [${this.d3t().GetAdapterInfoString()}]`);this.MS().Xw()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.rPt=!0;for(const e of this.oPt)this.GPt(e);U.Nr(this.oPt),this.rRt&&this.rRt.z3t();for(const h of t.runOnStartupFunctions)this.g4t.push(this.OPt(h));if(await Promise.all([this.XQ.LQ(),...this.g4t]),U.Nr(this.g4t),!this.XQ.RQ())return this.rRt&&await this.rRt.W3t(),await this.YCt.Ff(new U.Event("beforeruntimestart")),await this.UN(),this.$3t.postMessage({type:"runtime-ready"}),this;this.rRt&&this.rRt.j3t()}async OPt(t){try{await t(this.TPt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async APt(t){const s=t.project,i=(this.w4t=s[0],this.S4t=s[16],this.T4t=s[31],this.b4t=s[38],s[39]||"loading-logo.png"),e=(this.uRt=!!s[9],this.x4t=this.G4t=s[10],this.v4t=this.E4t=s[11],this.P4t.zAt(this.x4t,this.v4t),this.C4t=this.x4t/2,this.I4t=this.v4t/2,this.aRt=s[37],this.oRt=!!s[40],this.n2=s[14],this.D4t=s[15],this.A4t=s[42],this.L4t=s[17],this.N4t=!!s[18],this._4t=s[19],this.tRt=s[21],this.cRt=s[22],this.XQ);if(e.lQ(s[45]),e.zQ(s[7],s[25]),e.fQ(s[8]),e.dQ(s[32]),e.mQ(s[28]),e.kQ(s[29]),0===this._4t){let t;(t="flat"===e.N4()?e.gQ()+i:i)&&(this.O4t=e.IQ({url:t}))}this.rRt&&(this.rRt.e3t(U.eLt.a3t(s[12])),this.rRt.r3t(s[23]?"high":"low"),this.rRt.Hw(0!==s[24]),this.rRt.dOt(s[34]),this.rRt.u3t(s[41]),this.rRt.pOt(s[13]),this.rRt.mOt(s[30]),this.rRt.MOt(s[46],s[47]),this.rRt.yOt(s[26]),this.rRt.wOt(s[48]));const h=s[43],n=(h&&await this.RPt(h),this.PPt(),this.R4t.Ovt(),this.hRt=self.kPt(),s[2]);for(const u of n[1])this.R4t.Rvt(u);for(const l of n[0])this.R4t.Lvt(l);this.hRt=self.kPt(),this.FPt(),this.R4t.jvt();for(const c of s[3]){const f=U.iut.Ob(this,this.U4t.length,c);this.U4t.push(f),this.W4t.set(f.zc().toLowerCase(),f),this.Q4t.set(f._V(),f)}for(const d of s[4]){const p=this.U4t[d[0]];p.DIt(d)}for(const m of s[27]){const g=m.map(t=>this.U4t[t]);this.V4t.push(U.Kh(U.NGt,this,g))}this.jPt();for(const y of this.U4t)y.LIt();for(const M of s[5])this.KH.Ob(M);const r=s[1];if(r){const w=this.KH._q(r);w&&this.KH.Gq(w)}for(const S of s[35])this.k4t.Ob(S);for(const T of s[33])this.XK.Ob(T);for(const b of s[44])this.F4t.Ob(b);this.F4t.tut()||(this.F4t.$h(),this.F4t=null);for(const x of s[49])this.cut.Ob(x);this.cut.uut()||(this.cut.$h(),this.cut=null);for(const v of s[6])this.aft.Ob(v);this.aft.P0t(),this.zPt(),U.Nr(this.hRt),this.GP();let o="any",a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.Xc("runtime","set-target-orientation",{targetOrientation:o})}async RPt(t){const s=t.format;"image-sequence"===s?this.dRt=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===s?this.dRt=new self.C3ExportToGIF(this,t):"webm"===s?this.dRt=new self.C3ExportToWebMVideo(this,t):"mp4"===s&&(this.dRt=new self.C3ExportToMP4Video(this,t)),this.aRt="unlimited-frame",this.rRt.e3t("off"),this.AA=1,self.devicePixelRatio=1,await this.u4("runtime","set-exporting-to-video",{message:this.dRt.GetExportingMessageForPercent(0),duration:this.dRt.Oz()})}U3t(){return this._4t}zOt(){return null!==this.dRt}BPt(){return this.dRt.Oz()}UPt(){return this.dRt.GetFramerate()}WPt(){return this.dRt.VGt({width:this.rRt.TR(),height:this.rRt.xR()})}QPt(){const t=this.wRt/this.UPt();return this.dRt.AddFrame(this.rRt.s3t(),t)}JPt(){this.dRt&&this.dRt.rit()}MPt(t){this.dRt.OnOfflineAudioRenderCompleted(t)}VPt(){return this.dRt.Qw()}Z3t(){return this.c4t}Eg(){return this.xg}d4(t){this.g4t.push(t)}w9(t){this.M4t=!!t}YPt(t){this.M4t&&this.y4t.push(t)}C9(){return this.y4t}vIt(){return this.J4t++}RIt(){return this.J4t}LDt(t){this.Y4t.add(t)}ODt(t){this.Y4t.delete(t)}jOt(){return this.Y4t}async LPt(t){this.rRt&&(await this.rRt.bo(t),this.rRt.L3t(this._4t))}async DPt(){const h=this.XQ;if(!h.y4("audio/webm; codecs=opus")){let t=null,s=h.cQ(),i=s+"opus.wasm.js",e=s+"opus.wasm.wasm";try{t=this.HPt()&&h.yQ()?await h.wQ(e):await h.mo(e)}catch(t){return void console.info("Failed to fetch Opus decoder WASM; assuming project has no Opus audio.",t)}this.qPt(t,"opus-decoder-wasm"),await this.ZPt([i])}}async R4(t){const s=await this.XPt("OpusDecode",{arrayBuffer:t},[t]);return s}async UN(){this.TRt=!0,this.NRt=Date.now();let s=null,t=new Promise(t=>s=t);if(this.N4t){for(const h of this.U4t)h.TV()||h.QIt()||!h.RR()||h.Abt();(async()=>{await this.XQ.LQ(),await t,this.xg=!1,this.KPt()})()}else this.xg=!1;this.XQ.OQ(),this.mq()&&W.RuntimeInit(r);for(const n of this.KH.P3())n.W9();this.zOt()&&await this.WPt();const i=this.KH.Eq(),e=(await i.e9(null,this.MS()),await i.d9(!0),this.URt=performance.now(),s(),this.N4t||this.KPt(),await this.u4("runtime","before-start-ticking"));e.isSuspended&&!this.zOt()?(this.GRt++,this.IRt=!0):this.uX()}KPt(){this.ZF(U.P9.R9.O9.$Pt,null,null),this.Xc("runtime","register-sw")}Ugt(t){t=Math.floor(t);const s=this.hRt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}FPt(){for(const t of self.tkt){const s=U.first(Object.keys(t));this.nRt.push(s)}}r1t(t){t=Math.floor(t);const s=this.nRt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}skt(){return this.e4t}ikt(){return this.i4t}yO(){return this.h4t}k3t(){return this.t4t}ekt(){return this.s4t}LO(){return this.aft}VO(){return this.aft.VO()}Z0t(){return this.aft.Z0t()}jO(){return this.aft.jO()}X0t(){return this.aft.X0t()}SSt(){return 0===this.Z0t().Gft()}$0t(){return this.aft.$0t()}bDt(){return this.R4t}jyt(){return this.R4t.jyt()}Z8(t){if((t=Math.floor(t))<0||t>=this.U4t.length)throw new RangeError("invalid index");return this.U4t[t]}hkt(t){return this.W4t.get(t.toLowerCase())||null}aW(t){return this.Q4t.get(t)||null}Cht(t){const s=U.NR.qR(t);return s?s.tP():null}SV(){return this.U4t}*nkt(){for(const t of this.U4t)t.TV()||(yield*t.instances())}Nf(){return this.YCt}_O(){return this._7}pq(t){t.runtime=this.DR();const s=this.mq()&&!this.aft.CP();s&&W.StartMeasuringScriptTime(),this._7.dispatchEvent(t),s&&W.AddScriptTime()}D9(t){return t.runtime=this.DR(),this._7.Ff(t)}wO(){return this.x4t}TO(){return this.v4t}rkt(t,s){if(this.x4t!==t||this.v4t!==s){this.x4t=t,this.v4t=s;const i=this.L3();i.kq(),i.Fq()}}KV(){return this.G4t}$V(){return this.E4t}$Ot(t,s){if(this.G4t!==t||this.E4t!==s){this.G4t=t,this.E4t=s;const i=this.L3();i.kq(),i.Fq()}}BOt(t){this.zOt()||(this.AA=t)}vR(){return this.AA}qY(){return this.C4t}ZY(){return this.I4t}dR(){return this.rRt}iH(){return this.rRt?this.rRt.iH():this.G4t}eH(){return this.rRt?this.rRt.eH():this.E4t}aF(){return this.rRt?this.rRt.aF():1}_U(){return this.rRt?this.rRt._U():1}PH(){return this.rRt?this.rRt.PH():1}OH(){return this.rRt?this.rRt.OH():1}$k(){return this.rRt?this.rRt.$k():0}tF(){return this.rRt?this.rRt.tF():0}okt(){return this.rRt?this.rRt.yR():0}akt(){return this.rRt?this.rRt.wR():0}GU(){return this.rRt?this.rRt.GU():"off"}dH(t){return this.rRt?this.rRt.dH(t):null}O8(t){this.rRt&&this.rRt.O8(t)}cH(){return this.D4t}ROt(){return this.A4t}POt(){return this.L4t}w3(){return this.rRt?this.rRt.w3():NaN}gb(){return"nearest"!==this.bO()}T3(){return this.aRt}b3(t){this.aRt!==t&&(this.aRt=t,-1!==this.$Lt||-1!==this.gRt)&&(this.ukt(),this.lkt())}bO(){return this.n2}EIt(){return this.N4t}O3t(){return this.O4t}Q3t(){this.O4t&&(this.O4t.sG(),this.O4t.$h(),this.O4t=null)}L3(){return this.KH}N3(){return this.KH.N3()}R$(){return this.XK}ckt(){return this.k4t}bEt(){return this.F4t}Lut(){return this.cut}rO(){return this.XQ}IQ(t){return this.XQ.IQ(t)}TP(t,s,i,e,h,n){if(n&&this.F4t){if(t instanceof U.iut&&t.TV()){const o=t.Cmt(),a=Math.floor(this._3()*o.length);return this.TP(o[a],s,i,e,h,n)}const r=this.F4t.sut(t,n);if(r){const u=this.rV(r,s,!1,i,e,!1,h,void 0,h);return this.F4t.eut(u,n),u}}return this.rV(t,s,!1,i,e,!1,h,void 0,h)}rV(t,s,i,e,h,n,r,o,a){let u=null,l=null;if(t instanceof U.iut){if((l=t).TV()){const S=l.Cmt(),T=Math.floor(this._3()*S.length);l=S[T]}u=l.K8()}else u=t,l=this.Z8(u[1]);const c=l.nP().RR();if(this.xg&&c&&!l.QIt())return null;const f=s;c||(s=null);let d;d=i&&!n&&u&&!this.sRt.has(u[2])?u[2]:this.tRt++;const p=u?u[0]:null,m=U.Kh(U.Instance,{runtime:this,lF:l,vj:s,JGt:p,qGt:u?u[3]:null,uid:d,tags:u?u[6]:null});this.sRt.set(d,m);let g=null,y=(c&&(g=m.t4(),void 0!==e&&void 0!==h&&(g.ZS(e),g.$S(h)),l.MGt(!0)),s&&(a||s.aV(m,!0),s.O3().n9(l)),this.$4t++,!0);if(o){const b=o.cF();if(b.xF()&&l.xF()){const x=l.s9(),v=b.s9();x===v&&(y=!1)}}if(l.xF()&&!i&&!n&&y){const C=new Set;for(const I of l.s9().z9())if(I!==l){const G=this.fkt(I,g,C);if(G){const E=this.rV(G,f,!1,g?g.qS():e,g?g.KS():h,!0,!1,void 0,a);m.B9(E)}else{const F=this.rV(I,f,!1,g?g.qS():e,g?g.KS():h,!0,!1,void 0,a);m.B9(F)}}for(const _ of m.vF()){_.B9(m);for(const N of m.vF())_!==N&&_.B9(N)}}if(c&&!i&&r&&this.dkt(m,p,g,s,e,h,a),l.xF()&&!i&&!n&&r)for(const D of m.vF()){const A=D.t4();if(A){const j=D.nP(),L=D.cF().K8()[0];j.RR()?this.dkt(D,L,A,s,A.qS(),A.KS(),a):this.dkt(D,L,A,s,void 0,void 0,a)}}if(!n&&r){void 0===e&&(e=p[0]),void 0===h&&(h=p[1]);const O=g.s5(),z=e-g.qS()+O.qS(),B=h-g.KS()+O.KS();O.Ij(z,B)}l.dGt();const P=u?U.Ur(u[5]):null,k=u?u[4].map(t=>U.Ur(t)):null,M=c&&p&&p[13];if(M&&m.sEt(),m.UIt(P,k),M){const R=p[13];m.Y5().qbt(R[2],R[0],R[1])}this.q4t.push(m),this.X4t=!0,this.mq()&&W.InstanceCreated(m);const w=this.aPt.instancecreate;return w.rz=m,this.YCt.dispatchEvent(w),m}w_t(t){const s=t[0],i=t[1],e=t[2],h=t[6];if(h)return h;const n=this.KH.Nq(s),r=n.s4(i);return r.iV(e)}fkt(t,s,i){const e=s?.TEt()??[];for(const h of e){const n=this.w_t(h),r=!!h[4],o=this.Z8(n[1]);if(!i.has(n)&&t===o&&r)return i.add(n),n}}dkt(a,t,s,u,l,c,f){const i=s.zNt(),e=s.TEt();if(a.t4().BNt(i),e){void 0===l&&(l=t[0]),void 0===c&&(c=t[1]);const d=new Set,p=t[0],m=t[1];for(const g of e){let t=g[0],s=g[1],i=g[2],e=g[3],h=!!g[4],n=g[5],r=g[6],o;if(r)o=r;else{const S=this.KH.Nq(t),T=S.s4(s);o=T.iV(i)}const y=this.Z8(o[1]),M=a.xEt(y),w=d.has(y);if(M&&!w&&h){const b=a.vEt(y),x=(b.t4().VGt(o[0]),l+o[0][0]-p),v=c+o[0][1]-m;b.t4().Ij(x,v),b.t4().BNt(n),a.u5(b,{p5:!!(e>>0&1),g5:!!(e>>1&1),M5:!!(e>>2&1),S5:!!(e>>3&1),b5:!!(e>>4&1),N5:!!(e>>5&1),v5:!!(e>>6&1),I5:!!(e>>7&1),E5:!!(e>>8&1)}),d.add(y)}else{const C=l+o[0][0]-p,I=c+o[0][1]-m,G=this.rV(o,u,!1,C,I,!1,!0,a,f);G.t4().BNt(n),a.u5(G,{p5:!!(e>>0&1),g5:!!(e>>1&1),M5:!!(e>>2&1),S5:!!(e>>3&1),b5:!!(e>>4&1),N5:!!(e>>5&1),v5:!!(e>>6&1),I5:!!(e>>7&1),E5:!!(e>>8&1)})}}}}MF(i){if(!this.iRt.has(i)){let t=i.cF(),s=this.Z4t.get(t);if(s){if(s.has(i))return;s.add(i)}else(s=new Set).add(i),this.Z4t.set(t,s);if(this.mq()&&W.InstanceDestroyed(i),i.eEt(),this.X4t=!0,i.xF())for(const e of i.vF())this.MF(e);for(const h of i.children())h.D5()&&this.MF(h);if(!this.KH.IP()&&!this.HRt){const n=this.LO();n.xP(!0),i.OEt(),n.xP(!1)}i.REt(this.KH.IP())}}GP(){this.X4t&&(this.K4t=!0,this.pkt(),this.mkt(),this.K4t=!1,this.X4t=!1,this.o4())}pkt(){for(const t of this.q4t){const s=t.cF();s.aV(t);for(const i of s.d1t())i.aV(t),i.dGt()}U.Nr(this.q4t)}mkt(){this.YCt.xf(!0);for(const[t,s]of this.Z4t.entries())this.gkt(t,s),s.clear();this.Z4t.clear(),this.YCt.xf(!1)}gkt(t,s){for(const i of s){const e=this.aPt.instancedestroy,h=(e.rz=i,this.YCt.dispatchEvent(e),this.sRt.delete(i.CF()),this.zRt.delete(i),i.t4());h&&(h.QNt(),h.fV(),h.eEt()),this.iRt.add(i),this.$4t--}U.jr(t.gP(),s),t.dGt(),this.eRt.add(t);for(const n of t.d1t())U.jr(n.gP(),s),n.dGt(),this.eRt.add(n);if(t.nP().RR()){const r=new Set([...s].map(t=>t.t4().s4()));for(const o of r)o.CY(s)}}mGt(){return this.q4t}*vTt(t){for(const s of this.mGt())t.TV()?s.cF().TSt(t)&&(yield s):s.cF()===t&&(yield s)}BIt(){return this.tRt++}WIt(t,s){this.sRt.set(t,s)}eW(t){this.CRt!==(t=!!t)&&(this.CRt=!!t,this.CRt)&&this.IRt&&(this.rW(!1),this.IRt=!1)}hW(){return this.CRt}f9(){this.YCt.dispatchEvent(U.Kh(U.Event,"renderercontextlost")),this.rW(!0);for(const s of this.U4t)!s.TV()&&s.JIt()&&s.l9();const t=this.N3();t&&t.f9(),U.Uvt.uJ(),U.EQ.uJ()}async c3t(){await this.N3().e9(null,this.MS()),this.YCt.dispatchEvent(U.Kh(U.Event,"renderercontextrestored")),this.rW(!1),this.o4()}mPt(t){if(this.CRt){const s=t.hidden;this.rW(s),(this.IRt=s)||this.o4()}}wPt(t){this.q3t()&&this.cRt&&!U.hi.mi&&!t.data.parentHasFocus&&(this.rW(!0),this.fRt=!0)}SPt(){this.fRt&&(this.rW(!1),this.fRt=!1)}lkt(){const t=this.pRt;"vsync"===this.aRt?-1===this.$Lt&&(this.$Lt=self.requestAnimationFrame(t.mRt)):"unlimited-tick"===this.aRt?(-1===this.gRt&&(this.gRt=U.$r(t.yRt)),-1===this.$Lt&&(this.$Lt=self.requestAnimationFrame(t.MRt))):-1===this.gRt&&(this.gRt=U.$r(t.mRt))}ukt(){-1!==this.$Lt&&(self.cancelAnimationFrame(this.$Lt),this.$Lt=-1),-1!==this.gRt&&(U.io(this.gRt),this.gRt=-1)}$O(){return 0<this.GRt}rW(t){if(!this.zOt()){const s=this.$O(),i=(this.GRt+=t?1:-1,this.GRt<0&&(this.GRt=0),this.$O());if(!s&&i)console.log("[Construct] Suspending"),this.ukt(),this.YCt.dispatchEvent(U.Kh(U.Event,"suspend")),this.ZF(U.P9.R9.O9.ykt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const e=performance.now();this.DRt=e,this.URt=e,this.BRt=0,this.WRt=0,this.QRt=0,this.JRt=0,this.YRt=0,this.VRt=0,this.YCt.dispatchEvent(U.Kh(U.Event,"resume")),this.ZF(U.P9.R9.O9.Mkt,null,null),this.j1t()||this.uX(e)}}}QU(t){this.lPt.$l(t)}HU(t){this.cPt.$l(t)}VU(t){this.fPt.$l(t)}JU(t){this.lPt.u0(t)}qU(t){this.cPt.u0(t)}YU(t){this.fPt.u0(t)}wkt(){const t=globalThis.zU;this.lPt.X0(!0);for(const s of this.lPt)s instanceof t?s.nj():s.uX();this.lPt.X0(!1)}Skt(){const t=globalThis.zU;this.cPt.X0(!0);for(const s of this.cPt)s instanceof t?s.XU():s.bvt();this.cPt.X0(!1)}Tkt(){const t=globalThis.zU;this.fPt.X0(!0);for(const s of this.fPt)s instanceof t?s.oj():s.yxt();this.fPt.X0(!1)}*bkt(){const s=globalThis.zU;this.lPt.X0(!0);for(const i of this.lPt){let t;t=i instanceof s?i.nj():i.uX(),U.Ao(t)&&(yield*t)}this.lPt.X0(!1)}*xkt(){const s=globalThis.zU;this.cPt.X0(!0);for(const i of this.cPt){let t;t=i instanceof s?i.XU():i.bvt(),U.Ao(t)&&(yield*t)}this.cPt.X0(!1)}*vkt(){const s=globalThis.zU;this.fPt.X0(!0);for(const i of this.fPt){let t;t=i instanceof s?i.oj():i.yxt(),U.Ao(t)&&(yield*t)}this.fPt.X0(!1)}async uX(a,t,s){this.xRt=!0;const u="background-wake"===s,l="background-wake"!==s&&"skip-render"!==s,c=this.L3(),f=this.dR();if(this.TRt&&(!this.$O()||t||u)){let t=performance.now(),s=(this.bRt=!0,this.Ckt(a||0),this.QRt++,this.Ikt(),this.Gkt()),i=(this.MTt()&&await s,this.YCt.jf(this.aPt.pretick)),e=(i instanceof Promise&&await i,this.Ekt()),h=(this.MTt()&&await e,this._kt()&&await this.Nkt(),c.j3()&&await this.Dkt(),this.Akt()),n=(this.MTt()&&await h,c.N3()),r=n.q7(),o=!1;if(-1!==r&&(n.Z7(),f.H7()!==r)){const d=this.dR().y9(r);this.yO()&&(o=!0,await d)}this.Xc("canvas","update-html-layer-dom-state",{layersDomState:n.EV().filter(t=>t.Ik()).map(t=>t.AY())}),l&&this.$A(),o&&this.Xc("canvas","cleanup-html-layers"),this.zOt()&&(await this.QPt(),this.n3()>=this.BPt())?this.VPt():(this.$O()||u||this.lkt(),this.wRt++,this.SRt++,this.bRt=!1,this.VRt+=performance.now()-t)}}async Gkt(){const t=this.aft,s=this.mq();this.GP(),t.xP(!0),this.G1t(this.N3()),s&&W.StartMeasuringTime(),this.MTt()?await t.rdt():t.sdt(),s&&W.AddEventsTime(),this.E1t(),t.xP(!1),this.GP(),t.xP(!0)}async Ekt(){const t=this.mq(),s=this.MTt(),i=this.YCt,e=this.aPt,h=this.uPt;t&&W.StartMeasuringTime(),s?await this.Lkt(this.bkt()):this.wkt(),s?await this.Lkt(this.xkt()):this.Skt(),t&&W.AddBehaviorTickTime(),t&&W.StartMeasuringTime(),s?await this.Okt(e.tick):i.dispatchEvent(e.tick),t&&W.AddPluginTickTime(),this.aft.xP(!1),this.pq(h.tick)}async Akt(){const t=this.aft,s=this.YCt,i=this.aPt,e=this.mq(),h=this.MTt();e&&W.StartMeasuringTime(),h?await t._1t(this.KH):t.I1t(this.KH),e&&W.AddEventsTime(),this.P4t.dAt(),this.Ikt(),this.vRt=!1,t.xP(!0),e&&W.StartMeasuringTime(),h?await this.Lkt(this.vkt()):this.Tkt(),e&&W.AddBehaviorTickTime(),e&&W.StartMeasuringTime(),h?await this.Okt(i.tick2):s.dispatchEvent(i.tick2),e&&W.AddPluginTickTime(),t.xP(!1),h&&await t.z1t()}Ikt(){if(0!==this.iRt.size){const t=this.YCt;t.xf(!0);for(const s of this.eRt)s.q1t().kct(this.iRt);this.eRt.clear(),this.aft.adt(this.iRt);for(const i of this.iRt)i.$h();this.iRt.clear(),t.xf(!1)}}async Dkt(){let t=this.L3(),s=0;for(;t.j3()&&s++<10;)await this.Rkt(t.Pq())}Ckt(t){let s=0;if(this.zOt())s=1/this.UPt(),this.ARt=s,this.LRt=s;else if(0!==this.DRt){const i=Math.max(t-this.DRt,0);.5<(s=i/1e3)&&(s=0),this.ARt=s,this.LRt=U.rn(s,this.PRt,this.RRt)}this.DRt=t,this.ORt=this.LRt*this.WGt,this.kRt.$l(this.ORt),this.FRt.$l(s*this.WGt),this.jRt.$l(this.LRt);for(const[e,h]of this.zRt)h.$l(this.LRt*e.u3());this.rRt&&this.rRt.x3t(),1e3<=t-this.URt&&(this.URt+=1e3,1e3<=t-this.URt&&(this.URt=t),this.WRt=this.BRt,this.BRt=0,this.JRt=this.QRt,this.QRt=0,this.YRt=Math.min(this.VRt/1e3,1),this.VRt=0,this.rRt&&this.rRt.b3t(),this.P4t.uAt(),this.mq())&&W.Update1sPerfStats()}$Gt(t,s){if(s){if(!this.zRt.has(t)){const i=U.Kh(U.c0);i.g0(this.kRt),this.zRt.set(t,i)}}else this.zRt.delete(t)}tEt(t){const s=this.zRt.get(t);return s?s.Ks():this.n3()}async Rkt(t){const s=this.YCt,i=this.L3(),e=i.N3();await e.J9(),e.c9(t,this.MS()),e===t&&this.aft.H9(),this.P4t.dAt(),this.Ikt(),s.dispatchEvent(this.aPt.beforelayoutchange),U.Cf.Uf(!0),await t.e9(e,this.MS()),U.Cf.Uf(!1),await t.d9(!1),s.dispatchEvent(this.aPt.layoutchange),this.o4(),this.vRt=!0,this.GP(),this.JPt()}o4(){this.lRt=!0}f3t(){return this.rRt?this.rRt.f3t():null}d3t(){return this.rRt?this.rRt.d3t():null}MS(){return this.rRt?this.rRt.MS():null}$A(){const i=this.rRt;if(i&&!i.l3t()){const e=this.MS(),t=e.lD(),h=t&&e.Kw(),n=t&&e.fM();if(h&&e.ZN(),this.lRt||this.zOt()){const r=this.KH.N3(),o=(this.BRt++,e.UN(),this.mq());o&&W.StartMeasuringTime(),this.lRt=!1;let t=null,s=(h&&(t=i.I3t().kE(),e.uD(t)),null);n&&(s=e.StartFrameTiming(2*(1+r.U7())),e.StartMeasuringRenderPassTime(0,1)),this.uY()&&"low"===i.fH()?e.sN(i.iH(),i.eH()):e.iN(),this.Pkt(this.MS(),r),t&&e.cD(t),n&&(e.StopMeasuringRenderPassTime(),this.rRt.G3t(s)),e.Qw(),o&&(W.AddDrawCallsTime(),W.UpdateInspectHighlight()),i&&i._3t()}else e.Yw()}}nq(t){return"low"===this.dR().fH()||t.Kw()&&(this.cH()||this.uY())}Pkt(s,i){s.SM(),s.wN(),s.cN(1,1,1,1),s.tD(null),s.mN(null),s.QN(this.uY()),this.nq(s)&&i.eq(s);const e=i.H7();for(let t=1;t<e;++t)i.uq(s,t),s.fM()&&s.Restart();this.nq(s)||i.eq(s),i.aq(s)}ZF(t,s,i){if(!this.TRt)return!1;let e=!this.bRt&&!this.aft.Q1t(),h=0;e&&(h=performance.now());const n=this.mq(),r=(n&&this.SW(!1),this.aft.L1t(this.KH,t,s,i));if(e){const o=performance.now()-h;this.VRt+=o,n&&W.AddTriggersTime(o)}return n&&this.SW(!0),r}nxt(t,s,i){if(!this.MTt())return this.ZF(t,s,i);if(this.j1t())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.bRt||this.aft.Q1t())return this.aft.P1t(this.KH,t,s,i);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async KF(t,s,i){if(!this.MTt())return this.ZF(t,s,i);if(!this.TRt)return!1;if(this.j1t())return this.aft.k1t(t,s,i);if(!this.N3())return this.aft.O1t(t,s,i);let e=performance.now(),h=this.aft.P1t(this.KH,t,s,i),n=h.next();for(;!n.done;)await this.D1t(n.value),n=h.next();return this.$O()||this.aft.Q1t()||(await this.aft.z1t(),this.xRt&&!this.bRt&&this.lkt()),this.VRt+=performance.now()-e,n.value}rxt(t,s,i){const e=this.mq(),h=(e&&this.SW(!1),this.aft.B1t(this.KH,t,s,i));return e&&this.SW(!0),h}oxt(t,s,i){return this.aft.U1t(this.KH,t,s,i)}axt(t){return this.ERt.$l(t)}G1t(t){this.H4t.push(t)}E1t(){if(!this.H4t.length)throw new Error("layout stack empty");this.H4t.pop()}X3(){return this.H4t.length?this.H4t.at(-1):this.N3()}s3(t){return t&&-1!==t.u3()?this.LRt*t.u3():this.ORt}rX(){return this.ORt}aX(){return this.LRt}e3(){return this.ARt}u3(){return this.WGt}l3(t){(isNaN(t)||t<0)&&(t=0),this.WGt=t}C3(t){this.PRt=Math.max(t,0)}v3(){return this.PRt}E3(t){this.RRt=Math.max(t,0)}G3(){return this.RRt}f3(){return this.WRt}m3(){return this.JRt}y3(){return this.YRt}kkt(){return this.NRt}n3(){return this.kRt.Ks()}Fkt(){return this.FRt.Ks()}o3(){return this.jRt.Ks()}ett(){return this.wRt}jkt(){return this.SRt}zkt(){return this.$4t}dO(){return this.w4t}mO(){return this.S4t}Bkt(){return this.T4t}Ukt(){return this.b4t}H3(t){if(this.HRt)throw new Error("cannot call while loading state - wait until afterload event");return this.sRt.get(t)||null}F9(){this.sRt.clear();for(const t of this.U4t)if(!t.TV())for(const s of t.gP())this.sRt.set(s.CF(),s)}q3t(){return"preview"===this.r4t}mq(){return this.f4t}uR(){return this.r4t}lR(){return"nwjs"===this.uR()||this.o4t}X3t(){return"cordova"===this.r4t}Wkt(){return"Android"===U.hi.ni&&("cordova"===this.r4t||"playable-ad-single-file"===this.r4t||"playable-ad-zip"===this.r4t||"instant-games"===this.r4t)}HPt(){return this.k6}Qkt(){return this.a4t}cR(){return this.u4t}Jkt(){return this.l4t}uO(){return this.P4t}zvt(){return this.R4t.zvt()}Bvt(){return this.R4t.Bvt()}uY(){return this.oRt}Vkt(){return this.MS().sM(this.$V())}Ky(t){return this.MS().Ky(t||this.$V())}Ykt(){return this.vRt}Hkt(t){this.uRt!==(t=!!t)&&(this.uRt=t,this.L3().Fq(),this.o4())}vO(){return this.uRt}qkt(t){if(!this.B4t.has(t)){const i=()=>this.Zkt(t);this.B4t.set(t,i),t.Nf().addEventListener("animationframeimagechange",i)}const s=this.Mg.fg(t);return s.Gg()||s._g().then(()=>this.o4()),s}Zkt(t){this.Mg.gg(t)}j4t(t){const s=[];for(const i of t.eGt())for(const e of i.Gz()){const h=e.Lz();s.push({source:e,width:h.Yp(),height:h.nm(),tag:e.$z()})}return{Cg:s}}async z4t(t){const s=U.Kh(U.$0),i=[],h=new Map;for(const r of t.eGt())for(const o of r.Gz()){const a=o.Lz().aCt();h.has(a)||(h.set(a,null),i.push(s.$l(async()=>{const t=await a.dJ();h.set(a,t)})))}await Promise.all(i);const e=[];for(const u of t.eGt())for(const l of u.Gz())e.push(s.$l(async()=>{const t=l.Lz(),s=h.get(t.aCt()),i=await t.uCt(s),e=await createImageBitmap(i);return{Dg:e}}));const n=await Promise.all(e);for(const c of h.values())c instanceof ImageBitmap&&c.close&&c.close();return{Cg:n}}Xkt(t){this.qRt=t,this.ZRt=!1}Kkt(){this.qRt="",this.ZRt=!0}$kt(t){this.XRt=t}l2t(t){this.cj=t}tFt(){return this.KRt}_kt(){return!!(this.qRt||this.ZRt||this.XRt||null!==this.cj)}async Nkt(){if(this.qRt&&(this.GP(),await this.sFt(this.qRt),this.iFt()),this.XRt&&(await this.eFt(this.XRt),this.iFt(),this.mq())&&W.StepIfPausedInDebugger(),this.ZRt){const t=await this.hFt();this.KRt=t,await this.KF(U.P9.R9.O9.nFt,null),this.KRt="",this.iFt()}if(null!==this.cj){this.GP();try{await this.rFt(this.cj),this.KRt=this.cj,await this.KF(U.P9.R9.O9.oFt,null),this.KRt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.KF(U.P9.R9.O9.aFt,null)}this.iFt()}}iFt(){this.qRt="",this.ZRt=!1,this.XRt="",this.cj=null}IR(){return this.$Rt||(this.$Rt=localforage.Ai({name:"c3-localstorage-"+this.Bkt(),description:this.dO()})),this.$Rt}uFt(){return this.tPt||(this.tPt=localforage.Ai({name:"c3-savegames-"+this.Bkt(),description:this.dO()})),this.tPt}async sFt(t){const s=await this.hFt();try{await this.uFt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.KRt=s,await this.KF(U.P9.R9.O9.nFt,null),this.KRt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.KF(U.P9.R9.O9.lFt,null)}}async eFt(t){try{const s=await this.uFt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.rFt(s),this.KRt=s,await this.KF(U.P9.R9.O9.oFt,null),this.KRt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.KF(U.P9.R9.O9.aFt,null)}}async hFt(){const t={c3save:!0,version:1,rt:{time:this.n3(),timeRaw:this.Fkt(),walltime:this.o3(),timescale:this.u3(),tickcount:this.ett(),next_uid:this.tRt,running_layout:this.N3()._V(),start_time_offset:Date.now()-this.NRt},types:{},layouts:{},events:this.aft.VH(),timelines:this.XK.VH(),user_script_data:null};for(const i of this.U4t)i.TV()||i.CGt()||(t.types[i._V().toString()]=i.VH());for(const e of this.KH.P3())t.layouts[e._V().toString()]=e.VH();const s=this.cFt("save");return s.saveData=null,await this.D9(s),t.user_script_data=s.saveData,JSON.stringify(t)}I9(){return this.HRt}async rFt(t){const s=this.L3(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(1<i.version)throw new Error("C3 save data from future version");this.c2t(),this.YCt.dispatchEvent(U.Kh(U.Event,"beforeload"));for(const a of this.nkt()){const u=a.cF();u.CGt()||a.lZ()}let e=i.rt,h=(this.kRt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.FRt.Set(e.timeRaw),this.jRt.Set(e.walltime),this.WGt=e.timescale,this.wRt=e.tickcount,this.NRt=Date.now()-e.start_time_offset,e.running_layout),n=!(this.HRt=!0);if(h!==this.N3()._V()){const l=s.Nq(h);if(!l)return;await this.Rkt(l),n=!0}for(const[c,f]of Object.entries(i.layouts)){const d=parseInt(c,10),p=s.Nq(d);p&&p.YH(f)}const r=new Set;for(const[m,g]of Object.entries(i.types)){const y=parseInt(m,10),M=this.aW(y);!M||M.TV()||M.CGt()||M.YH(g,r)}for(const w of this.KH.P3())for(const S of w.YP())S.HH();if(this.GP(),this.F9(),this.HRt=!1,n){for(const T of this.nkt())T.G9();for(const[b,x]of Object.entries(i.types)){const v=parseInt(b,10),C=this.aW(v);!C||C.TV()||C.CGt()||C.EGt(x)}}this.tRt=e.next_uid,this.aft.YH(i.events);for(const I of this.U4t)if(!I.TV()&&I.xF())for(const G of I.gP()){const E=G.j9();for(const _ of I.s9().z9())if(_!==I){const N=_.gP();if(E<0||E>=N.length)throw new Error("missing sibling instance");G.B9(N[E])}}this.XK.YH(i.timelines),s.kq(),s.Fq();for(const D of r)D.LEt();this.f2t(),this.YCt.dispatchEvent(U.Kh(U.Event,"afterload")),this.pq(this.cFt("afterload"));for(const[A,L]of Object.entries(i.types)){const O=parseInt(A,10),R=this.aW(O);R&&R.GGt()}const o=this.cFt("load");o.saveData=i.user_script_data,await this.D9(o),this.o4()}fFt(t,s){return t.t4().RNt()-s.t4().RNt()}TDt(t,s){t.t4()&&!this.vPt.has(t)&&(this.vPt.set(t,s),this.CPt.push(t))}c2t(){this.vPt=new WeakMap,U.Nr(this.CPt)}f2t(t="full",s=null){this.CPt.sort(this.fFt);for(const i of this.CPt)i.fZ(this.vPt.get(i),t,s);for(const e of this.CPt)e.FEt(this.vPt.get(e),t,s);this.c2t()}async ZPt(t){const s=await Promise.all(t.map(async t=>{const s=this.X3t()&&this.XQ.yQ();if(s||"playable-ad-single-file"===this.uR()){const i=await this.XQ.po(t);return URL.createObjectURL(i)}return new URL(t,location.href).toString()}));this.dPt.dFt(s)}pFt(t,s){this.dPt.mFt(t,s)}qPt(t,s){this.dPt.gFt(t,s)}XPt(t,s,i,e){return this.dPt.XPt(t,s,i,null,null,e)}yFt(t,s,i,e){return this.dPt.yFt(t,s,i,e)}MFt(){return this.dPt.wFt()}V3(t,s){this.Xc("runtime","invoke-download",{url:t,filename:s})}async F3t(t,s,i,e,h,n){if(e=e||s,h=h||i,this.yO()){const r=await this.u4("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:h,imageBitmapOpts:n});return r.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,s,i,e,h);return n?self.createImageBitmap(o,n):o}}async SFt(t){return this.yO()?this.u4("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}TFt(){this.hPt||(this.hPt=!0,this.Xc("runtime","enable-device-orientation"))}bFt(){this.nPt||(this.nPt=!0,this.Xc("runtime","enable-device-motion"))}_3(){return this._Rt()}xFt(t){this._Rt=t}yPt(){const t=this.MS();return{fps:this.f3(),tps:this.m3(),cpu:this.y3(),gpu:this.w3(),layout:this.N3()?this.N3().zc():"",renderer:t.Kw()?t.wD():t.GetAdapterInfoString()}}j1t(){return!!this.mq()&&W.j1t()}D1t(t){return this.MTt()?W.D1t(t):Promise.resolve()}dgt(){return!!this.MTt()&&W.BreakNext()}vFt(t){this.d4t=!!t,this.CFt()}IFt(){return this.d4t}MTt(){return this.p4t}SW(t){t?this.m4t--:this.m4t++,this.CFt()}CFt(){this.p4t=this.mq()&&this.d4t&&0===this.m4t}Dpt(){return this.mq()&&W.Dpt()}oH(){return this.mq()&&this.MS().lD()&&W.oH()}async Lkt(t){if(t)for(const s of t)await this.D1t(s)}Okt(t){return this.Lkt(this.YCt.Bf(t))}L0t(t){return this.aft.L0t(t.name,t.params)}c4(t){if(this.yO())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}DR(){return this.TPt}cFt(t){const s=U.Kh(U.Event,t,!1);return s.runtime=this.TPt,s}PPt(){this.TPt=new self.eO(this),this.uPt={tick:this.cFt("tick")}}jPt(){const t={};for(const s of this.U4t)t[s.r1t()]={value:s.$R(),enumerable:!0,writable:!1};this.TPt.NO(t)}zPt(){const t={};for(const s of this.LO().p1t())t[s.r1t()]=s.o1t();this.TPt.DO(t)}B3(){return this.xPt}rP(t,s){this.bPt.set(t,s)}ZP(t){return this.bPt.get(t)}sR(t){if(!(t instanceof self.eP))throw new TypeError("expected IObjectClass");const s=this.ZP(t);if(s&&s instanceof U.iut)return s;throw new Error("invalid IObjectClass")}dP(t){if(!(t instanceof self.uF))throw new TypeError("expected IInstance");const s=this.ZP(t);if(s&&s instanceof U.Instance)return s;throw new Error("invalid IInstance")}K3(t){if(!(t instanceof self.U5))throw new TypeError("expected IWorldInstance");const s=this.ZP(t);if(s&&s instanceof U.Instance)return s;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=U.K3t.Ob,self.C3_InitRuntime=(t,s)=>t.VGt(s)}{const La=self.Os;La.pPt=class extends La.Zh{constructor(t,s){super(),this.Hc=t,this.GFt=new Map,this.EFt=0,this._Ft=s.inputPort,s.outputPort.onmessage=t=>this.NFt(t),this.DFt=s.maxNumWorkers,this.AFt=1,this.LFt=!1,this.OFt=!1}async VGt(){}wFt(){return this.DFt}dFt(t){this._Ft.postMessage({type:"_import_scripts",scripts:t})}mFt(t,s){this._Ft.postMessage({type:"_send_blob",blob:t,id:s})}gFt(t,s){this._Ft.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}XPt(t,s,i,e,h,n){if(i=i||[],"number"==typeof n&&(n=Math.floor(n))<=0)throw new Error("invalid maxWorkerNum");const r=this.EFt++,o={type:t,isBroadcast:!1,maxWorkerNum:n,jobId:r,params:s,transferables:i},a=new Promise((t,s)=>{this.GFt.set(r,{resolve:t,progress:e,reject:s,RFt:!1,maxWorkerNum:n})});return h&&h.o0(()=>this.PFt(r)),this._Ft.postMessage(o,i),this.kFt(),a}yFt(t,s,i,e){if(i=i||[],"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const h=this.EFt++,n={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:h,params:s,transferables:i};this._Ft.postMessage(n,i)}PFt(t){const s=this.GFt.get(t);s&&(s.RFt=!0,s.resolve=null,s.progress=null,s.reject=null,this._Ft.postMessage({type:"_cancel",jobId:t}))}NFt(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.FFt(e,s.result);break;case"progress":this.jFt(e,s.progress);break;case"error":this.zFt(e,s.error);break;case"ready":this.BFt();break;default:throw new Error(`unknown message from worker '${i}'`)}}FFt(t,s){const i=this.GFt.get(t);if(!i)throw new Error("invalid job ID");i.RFt||i.resolve(s),this.GFt.delete(t)}jFt(t,s){const i=this.GFt.get(t);if(!i)throw new Error("invalid job ID");!i.RFt&&i.progress&&i.progress(s)}zFt(t,s){const i=this.GFt.get(t);if(!i)throw new Error("invalid job ID");i.RFt||i.reject(s),this.GFt.delete(t)}BFt(){this.LFt&&(this.LFt=!1,this.AFt++,this.AFt<this.DFt?this.kFt():this._Ft.postMessage({type:"_no_more_workers"}))}UFt(){let t=0,s=[...this.GFt.values()].sort((t,s)=>{const i=t.maxWorkerNum||1/0,e=s.maxWorkerNum||1/0;return i-e});for(const i of s){const e=i.maxWorkerNum||1/0;t<e&&t++}return t}async kFt(){if(!(this.AFt>=this.DFt||this.LFt||this.OFt||this.UFt()<=this.AFt))try{this.LFt=!0;const t=await this.Hc.u4("runtime","create-job-worker");t.outputPort.onmessage=t=>this.NFt(t)}catch(t){this.OFt=!0,this.LFt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.AFt} so far)`,t)}}}}self.C3_Shaders={};{let w=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const h=""+i,n=""+e;return h<n?-1:n<h?1:0}},S=(w,self.Os),i=null,e="",h="",n=[],r="",o="",a="",T=S.Kh(S.h0t);S.P9.R9=class extends S.ubt{constructor(t){super(t),this.$ft=this.Hc.LO().MW(),this.Fct=this.Hc.LO().VO(),this.WFt=0,this.QFt=0,this.JFt=new Map}$h(){super.$h()}o4(){this.Hc.o4()}ZF(t){this.Hc.ZF(t,null,null)}VFt(t,s){return i&&t===e&&s===h||(i=new RegExp(t,s),e=t,h=s),i.lastIndex=0,i}YFt(t,s,i){if(t!==r||s!==o||i!==a){const e=this.VFt(s,i);n=t.match(e),r=t,o=s,a=i}return n}async HFt(t,s){if(s.length){this.WFt+=s.length;const i=[];for(const e of s)i.push(t.n9(e));await S.Zr(i,()=>{this.QFt++}),this.QFt++,this.QFt===this.WFt&&(this.QFt=0,this.WFt=0,this.Hc.ZF(S.P9.R9.O9.qFt,null,null))}}ZFt(t,s){for(const i of s)0===i.wP()&&t.u9(i)}XFt(){return T}KFt(s){const i=this.Hc.LO(),t=i.VO(),e=t.gW(),h=e.jO(),n=h.mW(),r=e.jft(),o=t.yW(h),a=i.MW(),u=a.yW();if(u.i0t(s),r)for(let t=0;t<s&&!u.EW();++t)i.bW(n),u.IW(t),h.xW(e,o),i.vW(n);else for(let t=0;t<s&&!u.EW();++t)u.IW(t),h.xW(e,o);return t._W(),a._W(),!1}*$Ft(s){const i=this.Hc.LO(),t=i.VO(),e=t.gW(),h=e.jO(),n=h.mW(),r=e.jft(),o=t.yW(h),a=i.MW(),u=a.yW();if(u.i0t(s),r)for(let t=0;t<s&&!u.EW();++t)i.bW(n),u.IW(t),yield*h.vgt(e,o),i.vW(n);else for(let t=0;t<s&&!u.EW();++t)u.IW(t),yield*h.vgt(e,o);return t._W(),a._W(),!1}tjt(){const s=this.Hc.LO(),t=s.VO(),i=t.gW(),e=i.jO(),h=e.mW(),n=i.jft(),r=t.yW(e),o=s.MW(),a=o.yW();if(n)for(let t=0;!a.EW();++t)s.bW(h),a.IW(t),e.xW(i,r)||a.iB(),s.vW(h);else for(let t=0;!a.EW();++t)a.IW(t),e.xW(i,r)||a.iB();return t._W(),o._W(),!1}*sjt(){const s=this.Hc.LO(),t=s.VO(),i=t.gW(),e=i.jO(),h=e.mW(),n=i.jft(),r=t.yW(e),o=s.MW(),a=o.yW();if(n)for(let t=0;!a.EW();++t){s.bW(h),a.IW(t);const u=yield*e.vgt(i,r);u||a.iB(),s.vW(h)}else for(let t=0;!a.EW();++t){a.IW(t);const l=yield*e.vgt(i,r);l||a.iB()}return t._W(),o._W(),!1}ijt(t,s,i){const e=this.Hc.LO(),h=e.VO(),n=h.gW(),r=n.jO(),o=r.mW(),a=n.jft(),u=h.yW(r),l=e.MW(),c=l.yW();if(c.wW(t),c.i0t(i),i<s)if(a)for(let t=s;t>=i&&!c.EW();--t)e.bW(o),c.IW(t),r.xW(n,u),e.vW(o);else for(let t=s;t>=i&&!c.EW();--t)c.IW(t),r.xW(n,u);else if(a)for(let t=s;t<=i&&!c.EW();++t)e.bW(o),c.IW(t),r.xW(n,u),e.vW(o);else for(let t=s;t<=i&&!c.EW();++t)c.IW(t),r.xW(n,u);return h._W(),l._W(),!1}*ejt(t,s,i){const e=this.Hc.LO(),h=e.VO(),n=h.gW(),r=n.jO(),o=r.mW(),a=n.jft(),u=h.yW(r),l=e.MW(),c=l.yW();if(c.wW(t),c.i0t(i),i<s)if(a)for(let t=s;t>=i&&!c.EW();--t)e.bW(o),c.IW(t),yield*r.vgt(n,u),e.vW(o);else for(let t=s;t>=i&&!c.EW();--t)c.IW(t),yield*r.vgt(n,u);else if(a)for(let t=s;t<=i&&!c.EW();++t)e.bW(o),c.IW(t),yield*r.vgt(n,u),e.vW(o);else for(let t=s;t<=i&&!c.EW();++t)c.IW(t),yield*r.vgt(n,u);return h._W(),l._W(),!1}hjt(i){const t=i.yP(),s=t.gP();if(0!==s.length){const e=this.Hc.LO(),h=e.VO(),n=h.gW(),r=n.jO(),o=r.mW(),a=n.jft(),u=h.yW(r),l=e.MW(),c=l.yW(),f=i.xF(),d=T.yW();if(S.Or(d,s),c.i0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.EW();++t){e.bW(o);const p=d[t];i.yP().Kct(p),f&&p.kpt(),c.IW(t),r.xW(n,u),e.vW(o)}else{t.qct(!1);const m=t.Zct();S.Nr(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.EW();++t){const g=d[t];m[0]=g,f&&g.kpt(),c.IW(t),r.xW(n,u)}}h._W(),l._W(),S.Nr(d),T._W()}return!1}*njt(i){const t=i.yP(),s=t.gP();if(0!==s.length){const e=this.Hc.LO(),h=e.VO(),n=h.gW(),r=n.jO(),o=r.mW(),a=n.jft(),u=h.yW(r),l=e.MW(),c=l.yW(),f=i.xF(),d=T.yW();if(S.Or(d,s),c.i0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.EW();++t){e.bW(o);const p=d[t];i.yP().Kct(p),f&&p.kpt(),c.IW(t),yield*r.vgt(n,u),e.vW(o)}else{t.qct(!1);const m=t.Zct();S.Nr(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.EW();++t){const g=d[t];m[0]=g,f&&g.kpt(),c.IW(t),yield*r.vgt(n,u)}}h._W(),l._W(),S.Nr(d),T._W()}return!1}rjt(i,t){const s=i.yP(),e=s.gP();if(0!==e.length){const h=this.Hc.LO(),n=h.VO(),r=h.X0t(),o=n.gW(),a=o.jO(),u=a.mW(),l=o.jft(),c=n.yW(a),f=h.MW(),d=f.yW(),p=i.xF(),m=T.yW();S.Nr(m),d.i0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],r.jwt(1,t)]);if(m.sort(w),1===t&&m.reverse(),l)for(let t=0,s=m.length;t<s&&!d.EW();++t){h.bW(u);const g=m[t][0];i.yP().Kct(g),p&&g.kpt(),d.IW(t),a.xW(o,c),h.vW(u)}else{s.qct(!1);const y=s.Zct();S.Nr(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.EW();++t){const M=m[t][0];y[0]=M,p&&M.kpt(),d.IW(t),a.xW(o,c)}}n._W(),f._W(),S.Nr(m),T._W()}return!1}*ojt(i,t){const s=i.yP(),e=s.gP();if(0!==e.length){const h=this.Hc.LO(),n=h.VO(),r=h.X0t(),o=n.gW(),a=o.jO(),u=a.mW(),l=o.jft(),c=n.yW(a),f=h.MW(),d=f.yW(),p=i.xF(),m=T.yW();S.Nr(m),d.i0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],r.jwt(1,t)]);if(m.sort(w),1===t&&m.reverse(),l)for(let t=0,s=m.length;t<s&&!d.EW();++t){h.bW(u);const g=m[t][0];i.yP().Kct(g),p&&g.kpt(),d.IW(t),yield*a.vgt(o,c),h.vW(u)}else{s.qct(!1);const y=s.Zct();S.Nr(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.EW();++t){const M=m[t][0];y[0]=M,p&&M.kpt(),d.IW(t),yield*a.vgt(o,c)}}n._W(),f._W(),S.Nr(m),T._W()}return!1}ajt(t,s){let i=this.JFt.get(t);if(!i){if(!s)return null;i={ujt:null,ljt:new Map},this.JFt.set(t,i)}return i}cjt(t,s,i,e,h){s.kO().zgt(i,s.UO()),e&&t.vW(h)}*fjt(t,s,i,e,h){yield*s.kO().Bgt(i,s.UO()),e&&t.vW(h)}}}{const Oa=self.Os;Oa.P9.R9.CIt=class extends Oa.Zh{constructor(t){super(),this.Nct=t,this.Hc=t.b4(),this.Hbt=t.nP()}Abt(){}$h(){this.Nct=null,this.Hc=null,this.Hbt=null}}}{const Ra=self.Os;Ra.P9.R9.Instance=class extends Ra.Zh{constructor(t,s){super(),this.Si=t,this.Nct=this.Si.cF(),this.txt=this.Nct.gSt(),this.Hc=this.Si.b4()}$h(){this.Si=null,this.Nct=null,this.txt=null,this.Hc=null}}}{const E=self.Os,Pa=[];E.P9.R9.O9={djt(){return!0},L9(){return!0},V9(){return!0},ykt(){return!0},Mkt(){return!0},$O(){return this.Hc.$O()},Tmt(){const t=this.Hc.Z0t();return!t.Oft()&&!t.Aft()},pjt(){let t=this.Hc.X0t(),s=t.Iwt(),i=s.get("TriggerOnce_lastTick");void 0===i&&(i=-1,s.set("TriggerOnce_lastTick",-1));const e=this.Hc.ett();return s.set("TriggerOnce_lastTick",e),this.Hc.Ykt()||i!==e-1},mjt(t){const s=this.Hc.X0t(),i=s.Iwt(),e=i.get("Every_lastTime")||0,h=this.Hc.n3(),n=(i.has("Every_seconds")||i.set("Every_seconds",t),i.get("Every_seconds"));return e+n<=h?(i.set("Every_lastTime",e+n),h>=i.get("Every_lastTime")+.04&&i.set("Every_lastTime",h),i.set("Every_seconds",t),!0):(h<e-.1&&i.set("Every_lastTime",h),!1)},kdt(t){const s=this.Hc.LO().M1t(t);return s&&s.kdt()},q3t(){return this.Hc.q3t()},mi(){return E.hi.mi},$Pt(){return!0},gjt(){return!0},yjt(){return!0},nFt(){return!0},lFt(){return!0},oFt(){return!0},aFt(){return!0},Mjt(t){return!!this.Hc.H3(t)},wjt(t){switch(t){case 0:return"browser"===E.hi.fi;case 1:return"iOS"===E.hi.ni;case 2:return"Android"===E.hi.ni;case 8:return"cordova"===E.hi.fi;case 9:return"scirra-arcade"===this.Hc.uR();case 10:return"nwjs"===E.hi.fi;case 13:return"windows-uwp"===this.Hc.uR();default:return!1}},Sjt(t,s,i){const e=this.VFt(s,i);return e.test(t)},Tjt(t,s,i){return E.compare(t,s,i)},bjt(t,s,i){return s<=t&&t<=i},xjt(t,s,i){return E.compare(t.qit(),s,i)},vjt(t){return!!t.qit()},Cjt(t,s){const i=this.Hc.n3();if(0!==t)return E.compare(i,t,s);{const e=this.Hc.X0t(),h=e.Iwt();return!h.get("CompareTime_executed")&&s<=i&&(h.set("CompareTime_executed",!0),!0)}},Ijt(t){return isNaN(t)},A2t(t,s,i){return E.mn(E.un(t),E.un(i))<=E.un(s)},L2t(t,s){return E.yn(E.un(t),E.un(s))},VSt(t,s,i){let e=E.un(t),h=E.un(s),n=E.un(i),r=!E.yn(n,h);return r?!(!E.yn(e,h)&&E.yn(e,n)):E.yn(e,h)&&!E.yn(e,n)},Gjt(t,s){return"number"==typeof t?0===s:1===s},Ejt(t){return!!t},mdt(t){return t.toLowerCase()===this.Hc.LO().wdt()},_jt(t,i,e,h){if(!t)return!1;let s=this.XFt(),n=s.yW(),r=t.yP(),o=(E.Or(n,r.gP()),r.Uct()&&E.Nr(r.Xct()),this.Hc.X0t()),a=0;for(let t=0,s=n.length;t<s;++t){const l=n[t];n[a]=l,i=o.jwt(1,t),h=o.jwt(3,t),E.compare(i,e,h)?++a:r.Hct(l)}E._r(n,a),r.$ct(n);const u=!!n.length;return E.Nr(n),s._W(),t.Lgt(),u},Njt(t,s){if(!t)return!1;let i=this.XFt(),e=i.yW(),h=t.yP(),n=(E.Or(e,h.gP()),h.Uct()&&E.Nr(h.Xct()),this.Hc.X0t()),r=0;for(let t=0,s=e.length;t<s;++t){const a=e[t];e[r]=a,n.jwt(1,t)?++r:h.Hct(a)}E._r(e,r),h.$ct(e);const o=!!e.length;return E.Nr(e),i._W(),t.Lgt(),o},Djt(t,i,e){if(!t)return!1;const s=t.yP(),h=s.gP();if(0===h.length)return!1;let n=this.Hc.X0t(),r=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t];e=n.jwt(2,t),(null===r||0===i&&e<o||1===i&&e>o)&&(o=e,r=a)}return s.nft(r),t.Lgt(),!0},Ajt(t,s){if(!t)return!1;const i=t.yP(),e=i.gP();if((s=Math.floor(s))>=e.length)return!1;const h=e[s];return i.nft(h),t.Lgt(),!0},Ljt(t){if(!t)return!1;const s=t.yP(),i=s.gP(),e=Math.floor(this.Hc._3()*i.length);if(e>=i.length)return!1;const h=i[e];return s.nft(h),t.Lgt(),!0},Ojt(t){if(!t)return!1;if(!t.wP())return!1;const s=t.yP();return s.qct(!0),t.Lgt(),!0},Rjt(t,i,e){if(!t)return!1;const h=t.yP(),s=h.gP(),n=this.Hc.jO(),r=n.rft(),o=this.Hc.X0t().Twt();h.Uct()?(E.Or(Pa,s),h.Bct(),h.qct(!1)):r?(E.Or(Pa,h.Xct()),E.Nr(h.Xct())):(E.Or(Pa,h.Zct()),E.Nr(h.Zct()));for(let t=0,s=Pa.length;t<s;++t){const a=Pa[t];E.xor(a.t4().Kj(i,e),o)?h.Yct(a):h.Hct(a)}return t.Lgt(),E.xor(!!h.Zct().length,o)},Pjt(s){if(!s)return!1;let i=s.TV(),e=null,h=this.Hc.mGt();for(let t=h.length-1;0<=t;--t){const n=h[t];if(i){if(n.cF().TSt(s)){e=n;break}}else if(n.cF()===s){e=n;break}}if(!e){const r=s.gP();r.length&&(e=r.at(-1))}if(!e)return!1;const t=s.yP();return t.nft(e),s.Lgt(),!0},kjt(t){return this.Hc.MTt()?this.$Ft(t):this.KFt(t)},Fjt(){return this.Hc.MTt()?this.sjt():this.tjt()},jjt(t,s,i){return this.Hc.MTt()?this.ejt(t,s,i):this.ijt(t,s,i)},K0(t){return this.Hc.MTt()?this.njt(t):this.hjt(t)},zjt(t,s,i){return this.Hc.MTt()?this.ojt(t,i):this.rjt(t,i)},Bjt(t){return!!t&&t.bk()},Ujt(t){return!!t&&t._k()},Wjt(t){return!!t&&t.Ik()},Qjt(t){return!!t&&!t.wP()},Jjt(t,s,i){return!!t&&E.compare(100*t.lN(),s,i)},Vjt(t){const s=this.Hc.N3();return!!s&&s.W7(t)},qFt(){return!0},Yjt(){return 0<this.WFt},Hjt(t,s){const i=this.Hc.bEt();return!!i&&!!s&&!!i.sut(t,s)}}}{let m=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const n=t[1],r=s[1];return n-r},g=function(t,s){return t[1]-s[1]};m,g;const ka=self.Os,Fa=[],ja=[],za=ka.Kh(ka.Rect),Ba=ka.Kh(ka.Oo),Ua=[];ka.P9.R9.Iht={qjt(t,s){t.Oet(s)},Zjt(t,s){t.oe()&&"number"!=typeof s&&(s=parseFloat(s)),t.Oet(t.qit()+s)},Xjt(t,s){t.oe()&&t.Oet(t.qit()-s)},Kjt(t,s){t.Oet(!!s)},$jt(t){t.Oet(!t.qit())},t5t(t){t.Oet(t.q0t())},s5t(t){this.Hc.LO().g1t(t)},i5t(t,s,i,e,h,n){if(t&&s){const r=this.Hc.TP(t,s,i,e,h,n);if(r){h&&s.bP(r);const o=this.Hc.LO(),a=(o.xP(!0),r.vP(),o.xP(!1),new Map);r.dEt(a,t,h);for(const[u,l]of a)u.yP().tft(l)}}},e5t(t,s,i,e,h,n){if(t&&s){const r=this.Hc.hkt(t);r&&ka.P9.R9.Iht.i5t.call(this,r,s,i,e,h,n)}},wV(h,n,r,o,a,t,u,l,c,f,d){if(h){let s=this.Hc.X3(),i=s;if(t){const p=this.Hc.L3()._q(t);if(!p)return;i=p}let e=null;if(!("number"!=typeof u||0<=u)||(e=i.s4(u))){let t=null;if(!("number"!=typeof l||0<=l)||(t=s.s4(l))){za.set(n,r,o,a);const m=i.wV(h,za,e,t,c,f,d);h.yP().$ct(m),h.Lgt()}}}},h5t(){const t=this.$ft;t.qft()&&t.Yft().iB()},Fdt(t,s){const i=this.Hc.LO().M1t(t);i&&(0===s?i.Fdt(!1):1===s?i.Fdt(!0):i.Fdt(!i.kdt()))},n5t(t){this.Hc.l3(t)},r5t(t,s){if(s<0&&(s=0),t){const i=t.yP(),e=i.gP();for(const h of e)h.l3(s)}},o5t(t){if(t){const s=t.yP(),i=s.gP();for(const e of i)e.NF()}},vr(t){if(!(t<0))return this.Hc.LO().K1t().ibt(t),!0},XO(t){return this.Hc.LO().K1t().ebt(t),!0},a5t(){const t=this.Hc.LO();return t.K1t().hbt(t.pdt()),!0},qO(t){this.Hc.LO().qO(t)},async E3t(t,s,i,e,h,n){const r=this.Hc.dR();r&&(this.o4(),await r.E3t(0===t?"image/png":"image/jpeg",s/100,i,e,h,n),await this.Hc.KF(ka.P9.R9.O9.gjt,null))},u5t(t,s){if(!(t<=0||s<=0)){this.Hc.$Ot(t,s),this.Hc.X3().FH();const i=this.Hc.dR();i&&("off"!==i.VOt()&&this.Hc.rkt(t,s),i.LG(i.pU(),i.mU(),!0),this.Hc.o4())}},l5t(t){const s=this.Hc.dR();s&&"off"!==s.VOt()&&(s.r3t(0!==t?"high":"low"),s.LG(s.pU(),s.mU(),!0))},dit(t){this.Hc.Xkt(t)},c5t(){this.Hc.Kkt()},f5t(t){this.Hc.$kt(t)},d5t(t){this.Hc.l2t(t)},p5t(t){},m5t(){for(const t of this.Hc.L3().P3())t.iq()},g5t(t){this.Hc.Hkt(0!==t)},y5t(t,s){this.Hc.E3(1/t),this.Hc.C3(1/s)},M5t(t,s){this.Hc.C3(t),this.Hc.E3(s)},w5t(t){this.Hc.b3(["vsync","unlimited-tick","unlimited-frame"][t])},S5t(t,i){if(t){const s=t.yP(),e=s.gP(),h=Fa,n=ja,r=this.Hc.X3(),o=t.TV(),a=t.iMt();for(let t=0,s=e.length;t<s;++t){const u=e[t],l=u.t4();if(l){let t;t=o?u.pnt(i+u.cF().sMt(a)):u.pnt(i),h.push([l.s4().iO(),l.i4()]),n.push([u,t])}}if(h.length){h.sort(m),n.sort(g);let i=!1;for(let t=0,s=h.length;t<s;++t){const c=n[t][0],f=r.e4(h[t][0]),d=h[t][1],p=f.h4();p[d]!==c&&((p[d]=c).t4().n4(f,!0),f.r4(c),i=!0)}i&&this.Hc.o4(),ka.Nr(Fa),ka.Nr(ja)}}},Z4(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.Hc.uO().Z4(t,s)},T5t(t){if(!this.Hc.Eg()){const s=this.Hc.L3();s.j3()||s.z3(t)}},b5t(t){if(!this.Hc.Eg()){const s=this.Hc.L3();if(!s.j3()){const i=s._q(t);i&&s.z3(i)}}},x5t(t){if(!this.Hc.Eg()){const s=this.Hc.L3();if(!s.j3()){const i=s.P3(),e=i.indexOf(s.N3());if((!t||0!==e)&&(t||e!==i.length-1)){const h=i[e+(t?-1:1)];s.z3(h)}}}},v5t(){if(!this.Hc.Eg()){const t=this.Hc.L3();t.j3()||(t.z3(t.N3()),this.Hc.LO().b1t())}},C5t(t,s){t&&t.Sk(s)},I5t(t,s){t&&t.vk(s)},G5t(t,s){t&&t.Gk(s)},E5t(t,s){t&&t.fN(s/100)},_5t(t,s){t&&t.Nk(s)},N5t(t,s){t&&t.Ak(s)},D5t(t,s){t&&t.PP(ka.un(+s))},A5t(t,s,i){t&&(t.Hk(!0),t.FP(s),t.zP(i))},L5t(t){t&&t.Hk(!1)},O5t(t,s,i){t&&t.tY(s/100,i/100)},R5t(t,s){t&&t.sT(+s)},P5t(t,s){if(t){Ba.ca(s),Ba.rn();const i=t.Yk();i.ia(Ba)||(i.Yo(Ba),this.o4())}},k5t(t,s){t&&t.Bk(s)},F5t(t,s){t&&t.FS(s)},j5t(t,s,i){if(t){const e=t._P(),h=e.rht(i);if(h){const n=1===s;h.Ept()!==n&&(h.jDt(n),t.dz(),this.Hc.o4())}}},z5t(t,s,i,e){if(t){const h=t._P(),n=h.rht(s);if(n){i=Math.floor(i);const r=n.Bx().Wx(i);if(r){"color"===r?(Ba.ca(e),e=Ba):"percent"===r&&(e/=100);const o=h.mz(n.iO(),i,e);o&&n.Ept()&&this.Hc.o4()}}}},B5t(t,s){t&&t.Qk(s)},U5t(t){this.Hc.X3().OP(+t)},W5t(t){this.Hc.X3().PP(ka.un(+t))},Q5t(t,s){const i=this.Hc.X3(),e=i._P(),h=e.rht(s);if(h){const n=1===t;h.Ept()!==n&&(h.jDt(n),i.dz(),this.Hc.o4())}},J5t(t,s,i){const e=this.Hc.X3(),h=e._P(),n=h.rht(t);if(n){s=Math.floor(s);const r=n.Bx().Wx(s);if(r){"color"===r?(Ba.ca(i),i=Ba):"percent"===r&&(i/=100);const o=h.mz(n.iO(),s,i);o&&n.Ept()&&this.Hc.o4()}}},V5t(t,s){const i=this.Hc.X3();i.nk(t/100,s/100)},Y5t(t){const s=this.Hc.X3();0===t?s.uk():s.lk()},H5t(t){const s=this.Hc.X3();s.FP(t)},q5t(t){const s=this.Hc.X3();s.zP(t)},Z5t(t,s){const i=this.Hc.X3();i.FP(t),i.zP(s)},X5t(t){if(t){const s=t.aTt();if(s){const i=s.t4();if(i){const e=this.Hc.X3();e.FP(i.qS()),e.zP(i.KS())}}}},XP(t,s,i){const e=this.Hc.X3();try{e.XP(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},$P(t,s,i){if(t){const e=this.Hc.X3();try{e.$P(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},sk(t){if(t){const s=this.Hc.X3();s.sk(t)}},ek(){this.Hc.X3().ek()},async K5t(t){const s=this.Hc.N3();if(s&&t&&!this.Hc.Eg()){const i=t.TV()?t.Cmt():[t];await this.HFt(s,i)}},async $5t(t){await ka.P9.R9.Iht.K5t.call(this,this.Hc.hkt(t))},tzt(t){const s=this.Hc.N3();if(s&&t){const i=t.TV()?t.Cmt():[t];this.ZFt(s,i)}},szt(t){ka.P9.R9.Iht.tzt.call(this,this.Hc.hkt(t))},izt(){const t=this.Hc.N3();if(t){const s=t.i9();this.ZFt(t,s)}},async ezt(t){const s=this.Hc.N3();t&&s&&!this.Hc.Eg()&&await this.HFt(s,t.K7())},async hzt(t){const s=this.Hc.N3(),i=this.Hc.L3()._q(t);i&&s&&!this.Hc.Eg()&&await this.HFt(s,i.K7())},HO(t){const s=this.Fct.JO();if(s)switch(s.YO()){case 1:"number"==typeof t&&s.HO(t);break;case 2:"string"==typeof t&&s.HO(t);break;case 3:s.HO(t)}},nzt(t,s,i){const e=this.ajt(t.toLowerCase(),!0),h=e.ljt,n=s.toLowerCase(),r=(h.has(n)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`),ka.first(h.values())||e.ujt);if(r){const o=0!==r.WO(),a=0!==i.WO();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`)}h.set(n,i)},rzt(t,s){const i=this.ajt(t.toLowerCase(),!0),e=(i.ujt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),ka.first(i.ljt.values())||i.ujt);if(e){const h=0!==e.WO(),n=0!==s.WO();if(h!=n)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}i.ujt=s},ozt(t,s,i){const e=this.Hc,h=e.MTt()?Ua:null,n=(i=Math.floor(i),this.ajt(t.toLowerCase(),!1));if(!n)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),h;let r=n.ljt.get(s.toLowerCase());if(!r){if(!n.ujt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),h;r=n.ujt,i=0}if(!r.zl())return h;if(0!==r.WO())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),h;const o=e.LO(),a=o.jO(),u=a.FO(),l=0<u.length,c=(l&&(r.UO()?o.bW(u):o.Z1t(u)),[]),f=o.Qdt(a);if(f){const p=f.Vdt();for(let t=i,s=p.length;t<s;++t)c.push(p[t].qit())}const d=r.Vdt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].q0t());return e.MTt()?this.fjt(o,r,c,l,u):this.cjt(o,r,c,l,u)}}}{const _=self.Os;_.P9.R9.Ght={azt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},O(t){return t.toString()},Wt(t){return"string"==typeof t?t.length:0},random(t,s){return void 0===s?this.Hc._3()*t:this.Hc._3()*(s-t)+t},zyt(...t){const s=Math.floor(this.Hc._3()*t.length);return t[s]},uzt(t,...s){return"number"!=typeof t&&(t=0),s[t=_.rn(Math.floor(t),0,s.length-1)]},pi(){return Math.PI},lzt(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},czt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(_.un(t))},cos(t){return Math.cos(_.un(t))},tan(t){return Math.tan(_.un(t))},asin(t){return _.ln(Math.asin(t))},acos(t){return _.ln(Math.acos(t))},atan(t){return _.ln(Math.atan(t))},exp(t){return Math.exp(t)},qt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e<t&&(e=t)}return e},min(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e>t&&(e=t)}return e},rn(t,s,i){return _.rn(t,s,i)},Gt(t,s,i,e){return _.cn(t,s,i,e)},angle(t,s,i,e){return _.ln(_.pn(t,s,i,e))},Lt(t,s,i){return _.Lt(t,s,i)},bn(t,s,i){return _.bn(t,s,i)},vn(t,s,i,e){return _.vn(t,s,i,e)},Cn(t,s,i,e,h){return _.Cn(t,s,i,e,h)},In(t,s,i){return _.In(t,s,i)},fzt(t,s){return _.ln(_.mn(_.un(t),_.un(s)))},dzt(t,s,i){return _.ln(_.Mn(_.un(t),_.un(s),i))},pzt(t,s,i){return _.ln(_.gn(_.un(t),_.un(s),_.un(i)))},mzt(t,s,i){return(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s},gzt(t,s){return(t|=0)^1<<(0|s)},yzt(t,s){return(t|=0)&1<<(0|s)?1:0},Mzt(){return"\n"},wzt(t){return"string"==typeof t?t.toUpperCase():""},Szt(t){return"string"==typeof t?t.toLowerCase():""},left(t,s){return"string"==typeof t?t.substr(0,s):""},mid(t,s,i){return"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i)},right(t,s){return"string"==typeof t?t.substr(Math.max(t.length-s,0)):""},trim(t){return"string"==typeof t?t.trim():""},Tzt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},bzt(t,s){return"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0},find(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(_.ne(s),"i")):-1},xzt(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(_.ne(s),"")):-1},replace(t,s,i){return"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(_.ne(s),"gi"),i):"string"==typeof t?t:""},vzt(t,...i){let e=t;for(let t=0,s=i.length;t<s;++t)e=e.replaceAll(`{${t}}`,i[t].toString());return e},Czt(t,s,i){const e=this.VFt(s,i);return t?t.search(e):-1},Izt(t,s,i,e){const h=this.VFt(s,i);return t?t.replace(h,e):""},Gzt(t,s,i){const e=this.YFt(t.toString(),s,i);return e?e.length:0},Ezt(t,s,i,e){e=Math.floor(e);const h=this.YFt(t.toString(),s,i);return!h||e<0||e>=h.length?"":h[e]},_zt(t,s){let i=t<0?"-":"",e=s-(t=t<0?-t:t).toString().length;return(i+="0".repeat(Math.max(e,0)))+t.toString()},Nzt(t){return encodeURIComponent(t)},Dzt(t){return decodeURIComponent(t)},t3(){return this.Hc.rX()},timescale(){return this.Hc.u3()},Azt(){return(Date.now()-this.Hc.kkt())/1e3},Lzt(){return Date.now()},time(){return this.Hc.n3()},tickcount(){return this.Hc.ett()},Ozt(){return this.Hc.zkt()},fps(){return this.Hc.f3()},Rzt(){return this.Hc.y3()},Pzt(){return this.Hc.w3()},kzt(){return this.Hc.dR().TR()},Fzt(){return this.Hc.dR().xR()},jzt(){return this.Hc.wO()},zzt(){return this.Hc.TO()},Bzt(){return this.Hc.wO()},Uzt(){return this.Hc.TO()},Wzt(){return this.Hc.X3().jP()},Qzt(){return this.Hc.X3().BP()},Jzt(){return this.Hc.X3().zc()},Vzt(){return this.Hc.X3().RP()},Yzt(){return _.ln(this.Hc.X3().kP())},Hzt(){return this.Hc.X3().Yp()},qzt(){return this.Hc.X3().nm()},Zzt(){return 100*this.Hc.X3().YV()},Xzt(){return 100*this.Hc.X3().HV()},Kzt(t){const s=this.Hc.X3().s4(t);return s?s.VV().fu():0},$zt(t){const s=this.Hc.X3().s4(t);return s?s.VV().du():0},tBt(t){const s=this.Hc.X3().s4(t);return s?s.VV().pu():0},sBt(t){const s=this.Hc.X3().s4(t);return s?s.VV().mu():0},iBt(t){const s=this.Hc.X3().s4(t);return s?s.VV().width():0},eBt(t){const s=this.Hc.X3().s4(t);return s?s.VV().height():0},hBt(t){const s=this.Hc.X3().s4(t);if(s){const i=s.VV();return(i.fu()+i.pu())/2}return 0},nBt(t){const s=this.Hc.X3().s4(t);if(s){const i=s.VV();return(i.du()+i.mu())/2}return 0},rBt(t,s,i){const e=this.Hc.X3().s4(t);return e?e.Kk(s,i)[0]:0},oBt(t,s,i){const e=this.Hc.X3().s4(t);return e?e.Kk(s,i)[1]:0},aBt(t,s,i){const e=this.Hc.X3().s4(t);return e?e.iF(s,i)[0]:0},uBt(t,s,i){const e=this.Hc.X3().s4(t);return e?e.iF(s,i)[1]:0},lBt(t,s,i,e){const h=this.Hc.X3(),n=h.s4(t),r=h.s4(s);if(!n||!r||n===r)return i;const[o,a]=n.iF(i,e);return r.Kk(o,a)[0]},cBt(t,s,i,e){const h=this.Hc.X3(),n=h.s4(t),r=h.s4(s);if(!n||!r||n===r)return e;const[o,a]=n.iF(i,e);return r.Kk(o,a)[1]},fBt(t){const s=this.Hc.X3().s4(t);return s?s.Dk():0},dBt(t){const s=this.Hc.X3().s4(t);return s?_.ln(s.Ok()):0},pBt(t){const s=this.Hc.X3().s4(t);return s?100*s.lN():0},mBt(t){const s=this.Hc.X3().s4(t);return s?s.Lk():0},gBt(t){const s=this.Hc.X3().s4(t);return s?s.jP():0},yBt(t){const s=this.Hc.X3().s4(t);return s?s.BP():0},MBt(t){const s=this.Hc.X3().s4(t);return s?100*s.Pk():0},wBt(t){const s=this.Hc.X3().s4(t);return s?100*s.Fk():0},SBt(t){const s=this.Hc.X3().s4(t);return s?s.tT():0},TBt(t){const s=this.Hc.X3().s4(t);return s?s.iO():-1},bBt(){const t=this.Hc.dR();return t?t.N3t():""},xBt(t){const s=this.$ft;if(!s.qft())return 0;if(t){const i=s.Xft(t);return i?i.iO():0}return s.Yft().iO()},vBt(){return this.Hc.tFt()},CBt(t,s,...i){const e=this.ajt(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let h=e.ljt.get(s.toLowerCase());if(!h){if(!e.ujt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;h=e.ujt}const n=h.WO(),r=h.RO();if(0===n)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!h.zl())return r;const o=this.Hc,a=o.LO(),u=a.jO(),l=u.FO(),c=0<l.length,f=(c&&(h.UO()?a.bW(l):a.Z1t(l)),h.Vdt());for(let t=i.length,s=f.length;t<s;++t)i.push(f[t].q0t());const d=h.kO(),p=d.BO(d.FO(),h.UO(),n,r,...i);return c&&a.vW(l),p},IBt(){return this.Hc.rO().PQ()},GBt(){return 0===this.WFt?1:this.QFt/this.WFt},renderer(){return this.Hc.d3t()?"webgpu":"webgl"},EBt(){return this.Hc.d3t()?this.Hc.d3t().GetAdapterInfoString():this.Hc.f3t().wD()},_Bt(){let t=this.Hc.MS().sS();return Math.round(100*t/1048576)/100},NBt(t,s,i){return _.Ln(t,s,i)},DBt(t,s,i){return _.Rn(t/100,s/100,i/100)},ABt(t,s,i,e){return _.On(t/100,s/100,i/100,e/100)},LBt(t,s,i){return _.Rn(t/255,s/255,i/255)},OBt(t,s,i,e){return _.On(t/255,s/255,i/255,e/255)},RBt(){return this.Hc.dO()},PBt(){return this.Hc.mO()},kBt(){return this.Hc.jO().B7().zc()},FBt(){return this.Hc.jO().Wmt()}}}{const Wa=self.Os;Wa.P9.uht=class extends Wa.ubt{constructor(t){super(t)}$h(){super.$h()}}}{const Qa=self.Os,Ja=self.Qs,Va=[],Ya=(Qa.P9.uht.CIt=class extends Qa.Ybt{constructor(t){super(t),this.MIt=t.eGt()}$h(){Qa.Nr(this.MIt),super.$h()}Abt(){for(const t of this.MIt)t.wCt(this.Hc)}h9(s){const i={HT:this.Hc.bO()};return Promise.all(this.MIt.map(t=>t.SCt(s,i)))}l9(){for(const t of this.MIt)t.TCt()}o9(){this.jBt()}jBt(){for(const t of this.Nct.mP())t.Y5().zBt()}Awt(t){Qa.P9.uht.W2t(this,t)}ySt(t){Va.push({Xbt:null,BBt:!1,instances:[]})}UBt(t,s,i){const e=Va.at(-1);e.Xbt=t,e.BBt=i,e.instances.push(s)}MSt(t){const s=Va.pop(),i=s.Xbt,e=s.BBt;if(i){const h=new Map;for(const n of s.instances)n.dEt(h,i,e);for(const[r,o]of h)r.yP().tft(o)}}WBt(t){const s=this.cF().aGt(t),i=this.b4(),e=s.bCt(0);return e.Lz().o6(i.MS(),{HT:i.bO()}).then(()=>this.jBt()),s}QBt(t){for(const s of this.Nct.mP())s.Y5().JBt(t);this.cF().uGt(t)}VBt(t,s){const i=this.Nct.rGt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.ICt(s);e<0&&(e+=i.Cz()+1);const h=Qa.gCt.MCt(this.b4()),n=(i.xCt(h,e),this.b4());h.Lz().o6(n.MS(),{HT:n.bO()}).then(()=>this.jBt());for(const r of this.Nct.mP())r.Y5().YBt();return h}HBt(t,s){const i=this.Nct.rGt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.Cz())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.ICt(s);e<0&&(e+=i.Cz()),i.vCt(e);for(const h of this.Nct.mP())h.Y5().YBt()}Lbt(){return self.qBt}},new WeakMap);self.qBt=class extends self.eP{constructor(t){super(t),Ya.set(this,t.gSt())}ZBt(t){Ja.we(t);const s=Ya.get(this).cF().rGt(t);return s?s.GCt():null}XBt(){return Ya.get(this).cF().nGt().map(t=>t.GCt())}KBt(t){return Ja.we(t),Ya.get(this).WBt(t).GCt()}$Bt(t){Ja.we(t),Ya.get(this).QBt(t)}tUt(t,s){if(Ja.we(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return Ya.get(this).VBt(t,s).Ez()}sUt(t,s){if(Ja.we(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");Ya.get(this).HBt(t,s)}}}{const N=self.Os,Ha=self.Qs,qa=N.Kh(N.Rect),Za=N.Kh(N.Uu),Xa=N.Kh(N.Ua),D=(N.P9.uht.Instance=class extends N.Gxt{constructor(t,s){super(t);let i=!0,e="",h=0,n=!0;s&&(i=!!s[0],e=s[1],h=s[2],n=s[3]),this.iUt=this.Nct.rGt(e)||this.Nct.eGt()[0],this.eUt=N.rn(h,0,this.iUt.Cz()-1),this.hUt=this.iUt.bCt(this.eUt);const r=this.hUt.Lz(),o=(this.nUt=r.pb(),this.rUt=r.cE(),this.oUt=r.jxt(),this.Dxt(),t.cEt(2,!0),t.cEt(1,0<=this.iUt.yz()),this.aUt=Math.abs(this.iUt.yz()),this.uUt=this.iUt.bz(),this.lUt=N.Kh(N.c0),this.cUt=0,this.fUt=0,this.dUt="",this.pUt=-1,this.mUt="",this.gUt=0,this.t4());this.yUt=o.Rj(),o.Sk(i),o.Xj(n),o.Fnt(this.hUt.Pz()),o.znt(this.hUt.Fz()),o.eDt(this.hUt.qz()),o.Cj(),1===this.Nct.hGt()&&1===this.Nct.eGt()[0].Cz()||0===this.aUt||this.Mxt()}$h(){this.iUt=null,this.hUt=null,this.nUt=null,this.lUt=null,super.$h()}Rxt(){return this.hUt.Lz()}Yst(){return!0}uJ(){this.nUt=null}Oxt(){this.zBt()}kT(t){const s=this.nUt;if(null!==s){t.mN(s);const i=this.t4();i.j5()?this.MUt(i,t):this.wUt(i,t)}}wUt(t,s){let i=this.yUt;this.Hc.vO()&&(i=t.ZNt(i)),s.CN(i,this.oUt)}MUt(s,t){const i=s.pDt();if(s.gDt()){s.YNt(qa,Za,!1);let t=Za;this.Hc.vO()&&(t=s.ZNt(t)),i.PT(s.z5(),t,this.oUt),s.mDt(!1)}i.kT(t)}SUt(){return this.lUt.Ks()}TUt(){return this.Si.fEt(2)}bUt(t){this.Si.cEt(2,t)}xUt(){return this.Si.fEt(1)}vUt(t){this.Si.cEt(1,t)}CUt(){return this.Si.fEt(4)}IUt(t){this.Si.cEt(4,t)}uX(){this.mUt&&this.GUt(),0<=this.pUt&&this.EUt();const t=this.aUt;if(this.TUt()&&0!==t){const s=this.Hc.s3(this.Si),i=(this.lUt.$l(s),this.SUt()),e=this.hUt,h=e.Oz()/t;if(!(i<this.cUt+h)){const n=this.iUt,r=this.uUt,o=n.Cz(),a=n.Sz(),u=n.wz(),l=n.vz(),c=(this.xUt()?this.eUt++:this.eUt--,this.cUt+=h,this.eUt>=o&&(l?(this.vUt(!1),this.eUt=o-2):!u&&(this.fUt++,this.fUt>=a)?this._Ut(!1):this.eUt=r),this.eUt<0&&(l?(this.eUt=1,this.vUt(!0),u||(this.fUt++,this.fUt>=a&&this._Ut(!0))):!u&&(this.fUt++,this.fUt>=a)?this._Ut(!0):this.eUt=r),this.eUt=N.rn(this.eUt,0,o-1),n.bCt(this.eUt));i>this.cUt+c.Oz()/t&&(this.cUt=i),this.NUt(e,c)}}else this.sxt()}_Ut(t){this.eUt=t?0:this.iUt.Cz()-1,this.bUt(!1),this.dUt=this.iUt.zc(),this.IUt(!0),this.Zbt("animationend",!1,{animationName:this.dUt}),this.ZF(N.P9.uht.O9.DUt),this.ZF(N.P9.uht.O9.AUt),this.IUt(!1),this.fUt=0}NUt(i,e,t){if(i!==e){const s=this.t4(),h=i.Lz(),n=e.Lz(),r=h.Yp(),o=h.nm(),a=n.Yp(),u=n.nm(),l=(t&&t.onFrameChange?t.onFrameChange(s,r,o,a,u):(r!==a&&s.tm(s.Yp()*(a/r)),o!==u&&s.Hp(s.nm()*(u/o))),s.Fnt(e.Pz()),s.znt(e.Fz()),s.eDt(e.qz()),s.Cj(),this.hUt=e,this.nUt=n.pb(),this.rUt=n.cE(),this.oUt=n.jxt(),this.xB().eht());for(let t=0,s=l.length;t<s;++t)l[t].Cvt(i,e);this.Zbt("framechange",!1,{animationName:this.iUt.zc(),LUt:this.eUt}),this.ZF(N.P9.uht.O9.OUt),this.Hc.o4()}}RUt(t){this.bUt(!0),this.cUt=this.SUt(),1===t&&0!==this.eUt&&(this.pUt=0,this.CUt()||this.EUt()),this.Mxt()}PUt(t,s,i){this.mUt=t,this.gUt=s,this.Mxt(),!i&&this.CUt()||this.GUt()}kUt(){return this.iUt}FUt(){return this.mUt||this.iUt.zc()}JBt(t){N.lh(t,this.FUt())&&this.PUt(this.Nct.lGt().zc(),1,!0)}jUt(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.Nct.rGt(this.FUt());if(!s)return;if(-1===(t=s.CCt(t)))return}isFinite(t)&&(this.pUt=t,this.CUt()||this.EUt())}YBt(){if(!this.mUt&&-1===this.pUt){const t=this.hUt,s=this.iUt.bCt(N.rn(this.eUt,0,this.iUt.Cz()-1));t!==s&&this.NUt(t,s),1<this.iUt.Cz()&&0<this.aUt&&this.Mxt()}}zUt(){return this.eUt}BUt(){return this.hUt.$z()}UUt(t){this.aUt=Math.abs(t),this.vUt(0<=t),0<this.aUt&&this.Mxt()}WUt(){return this.xUt()?this.aUt:-this.aUt}QUt(t){"string"==typeof t&&-1===(t=this.iUt.CCt(t))||(t=N.rn(Math.floor(t),0,this.iUt.Cz()-1),this.uUt=t)}JUt(){return this.uUt}GUt(t){const s=this.hUt,i=this.Nct.rGt(this.mUt);if(this.mUt="",i&&(i!==this.iUt||!this.TUt())){this.iUt=i,this.vUt(0<=i.yz()),this.aUt=Math.abs(i.yz()),this.uUt=i.bz(),this.eUt=N.rn(this.eUt,0,this.iUt.Cz()-1),1===this.gUt&&(this.eUt=0),this.bUt(!0),this.cUt=this.SUt();const e=this.iUt.bCt(this.eUt);this.NUt(s,e,t)}}EUt(t){const s=this.hUt,i=this.eUt;if(this.eUt=N.rn(Math.floor(this.pUt),0,this.iUt.Cz()-1),this.pUt=-1,t||i!==this.eUt){const e=this.iUt.bCt(this.eUt);this.NUt(s,e),this.cUt=this.SUt()}}zBt(){const t=this.hUt.Lz();this.nUt=t.pb(),this.rUt=t.cE(),this.oUt=t.jxt(),this.t4().mDt(!0)}pb(){return this.nUt}cE(){return this.rUt}jxt(){return this.oUt}Bz(){return this.hUt.Bz()}DSt(t){let s=this.hUt,i=this.t4(),e=null;if("string"==typeof t)e=s.Vz(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.Jz(t-1)}let h=i.Dj();if(!e)return[i.qS(),i.KS(),h];if(Xa.C(e.FCt()),i.j5()){const[n,r,o]=i.z5().WT(Xa.Ya(),Xa.qa());Xa.set(n,r),h+=o}return Xa.offset(-s.Pz(),-s.Fz()),Xa.scale(i.Yp(),i.nm()),Xa.rotate(i.kP()),Xa.offset(i.qS(),i.KS()),[Xa.Ya(),Xa.qa(),h]}VUt(){return this.t4().aDt().El()}YUt(t){t=Math.floor(t);const s=this.t4(),i=s.aDt(),e=i.El();if((t=t===e?0:t)<0||e<=t)return[0,0];const h=i.Gl();return[h[2*t+0]+s.qS(),h[2*t+1]+s.KS()]}bxt(){const s=N.P9.uht.Iht,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.iUt.zc(),HUt:t=>this.vxt(s.qUt,t,0)},{name:t+".current-frame",value:this.eUt,HUt:t=>this.vxt(s.ZUt,t)},{name:t+".is-playing",value:this.TUt(),HUt:t=>t?this.vxt(s.XUt,0):this.vxt(s.KUt)},{name:t+".speed",value:this.aUt,HUt:t=>this.vxt(s.$Ut,t)},{name:t+".repeats",value:this.fUt,HUt:t=>this.fUt=t}]}]}aT(){const t={a:this.iUt._V()},s=(0!==this.cUt&&(t.fs=this.cUt),this.SUt()),i=(0!==s&&(t.at=s),0!==this.eUt&&(t.f=this.eUt),0!==this.aUt&&(t.cas=this.aUt),1!==this.fUt&&(t.ar=this.fUt),0!==this.uUt&&(t.rt=this.uUt),this.TUt()||(t.ap=this.TUt()),this.xUt()||(t.af=this.xUt()),this.t4());return i.Zj()&&(t.ce=i.Zj()),t}uT(t){const s=this.cF().oGt(t.a),i=(s&&(this.iUt=s),this.cUt=t.hasOwnProperty("fs")?t.fs:0,this.lUt.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),e=(this.eUt=N.rn(i,0,this.iUt.Cz()-1),this.aUt=t.hasOwnProperty("cas")?t.cas:0,this.fUt=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),h=(this.uUt=N.rn(e,0,this.iUt.Cz()-1),this.bUt(!t.hasOwnProperty("ap")||!!t.ap),this.vUt(!t.hasOwnProperty("af")||!!t.af),this.iUt.bCt(this.eUt)),n=(this.hUt=h,this.zBt(),this.t4());n.Fnt(h.Pz()),n.znt(h.Fz()),n.eDt(h.qz()),n.Xj(!!t.ce),this.TUt()&&this.Mxt()}nnt(t){const s=this.t4();switch(t){case 3:return s.Zj();case 2:return N.rn(this.eUt,0,this.iUt.Cz()-1);case 1:return this.iUt.zc()}}cnt(t,s,i){const e=this.t4();switch(t){case 3:e.Xj(!!s);break;case 2:{this.bUt(!1);const h=this.iUt.Cz()-1,n=s=N.rn(s,0,h),r=this.iUt.bCt(this.eUt),o=this.iUt.bCt(n);this.NUt(r,o,i),this.eUt=N.rn(n,0,h);break}case 1:{this.mUt=s,this.GUt(i);const a=this.iUt.Cz();1<a&&0<this.iUt.yz()?this.Mxt():this.sxt();break}}}Lbt(){return self.tWt}},new WeakMap),Ka=new Map([["current-frame",0],["beginning",1]]);self.tWt=class extends self.U5{constructor(){super(),D.set(this,self.uF.pF().Y5())}zz(){return D.get(this).Bz()}Uz(t){return this.Wz(t)[0]}Qz(t){return this.Wz(t)[1]}sWt(t){return this.Wz(t)[2]}Wz(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return D.get(this).DSt(t)}Yz(){return D.get(this).VUt()}Zz(t){return Ha.me(t),D.get(this).YUt(t)[0]}Kz(t){return Ha.me(t),D.get(this).YUt(t)[1]}Xz(t){return Ha.me(t),D.get(this).YUt(t)}iWt(){D.get(this).bUt(!1)}eWt(t="current-frame"){Ha.we(t);const s=Ka.get(t);if(void 0===s)throw new Error("invalid mode");D.get(this).RUt(s)}hWt(t,s="beginning"){Ha.we(t),Ha.we(s);const i=Ka.get(s);if(void 0===i)throw new Error("invalid mode");const e=D.get(this);if(!e.cF().rGt(t))throw new Error(`animation name "${t}" does not exist`);e.PUt(t,i)}ZBt(t){Ha.we(t);const s=D.get(this).cF().rGt(t);return s?s.GCt():null}get animation(){return D.get(this).kUt().GCt()}get animationName(){return D.get(this).FUt()}set LUt(t){Ha.me(t),D.get(this).jUt(t)}get LUt(){return D.get(this).zUt()}set nWt(t){Ha.we(t),D.get(this).jUt(t)}get nWt(){return D.get(this).BUt()}set rWt(t){Ha.me(t),D.get(this).UUt(t)}get rWt(){return D.get(this).WUt()}set oWt(t){Ha.me(t),D.get(this).QUt(t)}get oWt(){return D.get(this).JUt()}get imageWidth(){return D.get(this).Rxt().Yp()}get imageHeight(){return D.get(this).Rxt().nm()}aWt(){const t=D.get(this).Rxt();return[t.Yp(),t.nm()]}async uWt(t){Ha.Ze(t,Blob);const s=D.get(this),i=s.b4(),e=s.Rxt(),h=N.Kh(N.Uvt);if(h.iCt(i,t),await h.o6(i.MS(),{HT:i.bO()}),s.tn())h.$h();else{e.eCt(h);const n=s.gSt();n.jBt(),n.cF().Nf().dispatchEvent(new N.Event("animationframeimagechange")),i.o4()}}lWt(t,s){Ha.we(s),D.get(this).t4().JNt(!!t,s)}}}{const $a=self.Os;$a.P9.uht.O9={cWt(t){return $a.lh(this.FUt(),t)},fWt(t,s){return $a.compare(this.eUt,t,s)},dWt(t,s){if("string"!=typeof s)return!1;const i=this.hUt.$z();return $a.compare(i.toLowerCase(),t,s.toLowerCase())},pWt(t,s){return $a.compare(this.WUt(),t,s)},AUt(t){return $a.lh(this.dUt,t)},DUt(){return!0},OUt(){return!0},mWt(){return this.t4().Yp()<0},gWt(){return this.t4().nm()<0},yWt(){return!0},MWt(){return!0},Zj(){return this.t4().Zj()}}}{const tu=self.Os;tu.P9.uht.Iht={wWt(t,s,i,e,h){if(t&&s){const[n,r]=this.DSt(i),o=this.Hc.TP(t,s,n,r,e,h);if(o){if(e&&s.bP(o),t.nP().jR()){const u=o.t4();u.PP(this.t4().kP()),u.Cj()}const a=this.Hc.LO();a.xP(!0),o.vP(),a.xP(!1),t!==this.Hc.$0t().cF()&&this.txt.UBt(t,o,e)}}},KUt(){this.bUt(!1)},XUt(t){this.RUt(t)},qUt(t,s){this.PUt(t,s)},ZUt(t){this.jUt(t)},$Ut(t){this.UUt(t)},SWt(t){this.QUt(t)},TWt(s,t){try{0===s?this.gSt().WBt(t):this.gSt().QBt(t)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation: `,t)}},bWt(s,t,i){try{0===s?this.gSt().VBt(t,i):this.gSt().HBt(t,i)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation frame: `,t)}},xWt(t){const s=this.t4(),i=s.Yp(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.tm(e),s.Cj())},vWt(t){const s=this.t4(),i=s.nm(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Hp(e),s.Cj())},OP(t){const s=this.hUt,i=s.Lz(),e=this.t4(),h=e.Yp()<0?-1:1,n=e.nm()<0?-1:1,r=i.Yp()*t*h,o=i.nm()*t*n;e.Yp()===r&&e.nm()===o||(e.LG(r,o),e.Cj())},async CWt(t,s,i){const e=this.hUt,h=e.Lz(),n=this.t4(),r=this.Hc,o=this.txt;if(h._Q()===t)0===s&&(n.LG(h.Yp(),h.nm()),n.Cj()),this.ZF(tu.P9.uht.O9.yWt);else{const a=tu.Kh(tu.Uvt);try{if(await a.sCt(r,t),!a.eJ())throw new Error("image failed to load");if(this.tn())return void a.$h();await a.o6(r.MS(),{HT:r.bO()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.tn()||this.ZF(tu.P9.uht.O9.MWt))}this.tn()?a.$h():(h.eCt(a),o.jBt(),o.cF().Nf().dispatchEvent(new tu.Event("animationframeimagechange")),r.o4(),0===s&&(n.LG(h.Yp(),h.nm()),n.Cj()),await this.KF(tu.P9.uht.O9.yWt))}},IWt(t){this.t4().Xj(t)},JNt(t,s){this.t4().JNt(0===t,s)},GWt(t){this.t4().FS(t),this.Hc.o4()}}}{const su=self.Os;su.P9.uht.Ght={EWt(){return this.zUt()},_Wt(){return this.BUt()},NWt(){return this.iUt.Cz()},DWt(){return this.iUt.zc()},AWt(){return this.WUt()},LWt(){return this.iUt.yz()},OWt(t){return this.DSt(t)[0]},RWt(t){return this.DSt(t)[1]},PWt(t){return this.DSt(t)[2]},kWt(){return this.Bz()},FWt(){return this.Rxt().Yp()},jWt(){return this.Rxt().nm()},zWt(t){return this.YUt(t)[0]},BWt(t){return this.YUt(t)[1]},UWt(){return this.VUt()}}}{const iu=self.Os;iu.P9.WWt=class extends iu.ubt{constructor(t){super(t)}$h(){super.$h()}}}{const eu=self.Os;eu.P9.WWt.CIt=class extends eu.Ybt{constructor(t){super(t)}$h(){super.$h()}Abt(){}}}{const hu=self.Os;hu.P9.WWt.Instance=class extends hu.Kbt{constructor(t,s){super(t,"platform-info"),this.QWt=0,this.JWt=0,this.VWt=0,this.YWt=0,this.HWt=[0,0,0,0],this.qWt=!1,this.ZWt=!1,this.lxt([["window-resize",t=>this.TOt(t)],["wake-lock-acquired",t=>this.XWt(t)],["wake-lock-error",t=>this.KWt(t)],["wake-lock-released",t=>this.$Wt(t)]]),navigator.connection&&navigator.connection.addEventListener("change",()=>this.t6t()),this.Hc.d4(this.fxt("get-initial-state").then(t=>{this.QWt=t.screenWidth,this.JWt=t.screenHeight,this.VWt=t.windowOuterWidth,this.YWt=t.windowOuterHeight,this.HWt=t.safeAreaInset,this.qWt=t.supportsWakeLock}))}$h(){super.$h()}TOt(t){this.VWt=t.windowOuterWidth,this.YWt=t.windowOuterHeight,this.HWt=t.safeAreaInset}async t6t(){await this.KF(hu.P9.WWt.O9.s6t)}async XWt(){this.ZWt=!0,await this.KF(hu.P9.WWt.O9.i6t)}async KWt(){this.ZWt=!1,await this.KF(hu.P9.WWt.O9.e6t)}async $Wt(){this.ZWt=!1,await this.KF(hu.P9.WWt.O9.h6t)}}}{const nu=self.Os;nu.P9.WWt.O9={n6t(){return nu.hi.mi},r6t(){return"Windows"===nu.hi.ni},o6t(){return"macOS"===nu.hi.ni},a6t(){return"Linux"===nu.hi.ni},u6t(){return"Chrome OS"===nu.hi.ni},l6t(){return"Android"===nu.hi.ni},c6t(){return"iOS"===nu.hi.ni},f6t(){const t=this.Hc.uR();return"html5"===t||"scirra-arcade"===t||"preview"===t||"instant-games"===t},d6t(){return this.Hc.X3t()},p6t(){return this.Hc.lR()},m6t(){return"windows-uwp"===this.Hc.uR()},g6t(){return this.Hc.cR()},y6t(){return"macos-wkwebview"===this.Hc.uR()},M6t(){return"linux-cef"===this.Hc.uR()},s6t(){return!0},i6t(){return!0},e6t(){return!0},h6t(){return!0},w6t(){return this.ZWt},S6t(){return this.qWt}}}{const ru=self.Os;ru.P9.WWt.Iht={T6t(){this.qWt&&this.dxt("request-wake-lock")},b6t(){this.qWt&&(this.ZWt=!1,this.cxt("release-wake-lock"))}}}{const ou=self.Os;ou.P9.WWt.Ght={x6t(){return this.Hc.dR().fR()},v6t(){return this.Hc.dR().mR()},C6t(){return this.Hc.vR()},I6t(){return this.QWt},G6t(){return this.JWt},E6t(){return this.Hc.dR().pU()},_6t(){return this.Hc.dR().mU()},N6t(){return this.VWt},D6t(){return this.YWt},A6t(){return this.Hc.dR().yR()},L6t(){return this.Hc.dR().wR()},O6t(){return this.Hc.dR().TR()},R6t(){return this.Hc.dR().xR()},P6t(){return navigator.connection&&navigator.connection.downlink||0},k6t(){return navigator.connection&&navigator.connection.downlinkMax||0},ConnectionType(){return navigator.connection&&navigator.connection.type||"unknown"},F6t(){return navigator.connection&&navigator.connection.effectiveType||"unknown"},j6t(){return navigator.connection&&navigator.connection.rtt||0},z6t(){return navigator.hardwareConcurrency||0},B6t(){return navigator.deviceMemory||0},U6t(){return this.HWt[0]},W6t(){return this.HWt[1]},Q6t(){return this.HWt[2]},J6t(){return this.HWt[3]},V6t(){return this.Hc.f3()},Y6t(){return this.Hc.m3()}}}{const au=self.Os;au.P9.Touch=class extends au.ubt{constructor(t){super(t)}$h(){super.$h()}}}{let i=function(){return s.iP().Y5()};i;const uu=self.Os,lu=self.Qs;uu.P9.Touch.CIt=class extends uu.Ybt{constructor(t){super(t)}$h(){super.$h()}Abt(){}Lbt(){return self.H6t}};let s=null;self.H6t=class extends self.eP{constructor(t){super(t),(s=t).b4().B3().W3=this}requestPermission(t){lu.we(t);const s=i();if("orientation"===t)return s.q6t(0);if("motion"===t)return s.q6t(1);throw new Error("invalid type")}}}{const A=self.Os;A.P9.Touch.Instance=class extends A.Kbt{constructor(t,s){super(t,"touch"),this.Z6t=new Map,this.X6t=!1,this.K6t=!1,this.$6t=0,this.tQt=0,this.sQt=0,this.iQt=0,this.eQt=0,this.hQt=0,this.nQt=0,this.rQt=0,this.oQt=0,this.aQt=0,this.uQt=0,this.lQt=0,this.cQt=0,this.fQt=0,this.dQt=0,this.pQt=0,this.mQt=0,this.gQt=[],s&&(this.X6t=s[0]),this.uxt("permission-result",t=>this.yQt(t));const i=this.b4().Nf();this.a0=new A.n0(A.$f.h0(i,"pointerdown",t=>this.MQt(t.data)),A.$f.h0(i,"pointermove",t=>this.wQt(t.data)),A.$f.h0(i,"pointerup",t=>this.SQt(t.data,!1)),A.$f.h0(i,"pointercancel",t=>this.SQt(t.data,!0)),A.$f.h0(i,"deviceorientation",t=>this.TQt(t.data)),A.$f.h0(i,"deviceorientationabsolute",t=>this.bQt(t.data)),A.$f.h0(i,"devicemotion",t=>this.xQt(t.data)),A.$f.h0(i,"tick2",t=>this.iZ()))}$h(){this.Z6t.clear(),super.$h()}MQt(t){if("mouse"===t.pointerType){if(!this.X6t)return;this.K6t=!0}const s=t.pointerId;if(!this.Z6t.has(s)){const i=t.pageX-this.Hc.$k(),e=t.pageY-this.Hc.tF(),h=performance.now(),n=this.Z6t.size,r=(this.uQt=n,this.lQt=s,A.Kh(A.P9.Touch.vQt));r.VGt(h,i,e,s,n),this.Z6t.set(s,r),this.ZF(A.P9.Touch.O9.CQt),this.ZF(A.P9.Touch.O9.IQt),this.fQt=i,this.dQt=e,this.mQt=0,this.ZF(A.P9.Touch.O9.GQt)}}wQt(t){if("mouse"!==t.pointerType||this.K6t){const s=this.Z6t.get(t.pointerId);if(s){const i=performance.now();if(!(i-s.jD()<2)){const e=t.pageX-this.Hc.$k(),h=t.pageY-this.Hc.tF();s.LJ(i,e,h,t.width,t.height,t.pressure)}}}}SQt(t,s){if("mouse"===t.pointerType){if(!this.K6t)return;this.K6t=!1}const i=performance.now(),e=t.pointerId,h=this.Z6t.get(e);if(h){if(this.uQt=h.EQt(),this.lQt=h.GB(),!s){const n=t.pageX-this.Hc.$k(),r=t.pageY-this.Hc.tF();this.fQt=n,this.dQt=r,this.mQt=1,this.ZF(A.P9.Touch.O9.GQt)}if(this.ZF(A.P9.Touch.O9._Qt),this.ZF(A.P9.Touch.O9.NQt),!s){const o=h.DQt(i);"single-tap"===o?(this.ZF(A.P9.Touch.O9.AQt),this.fQt=h.qS(),this.dQt=h.KS(),this.ZF(A.P9.Touch.O9.LQt)):"double-tap"===o&&(this.ZF(A.P9.Touch.O9.OQt),this.fQt=h.qS(),this.dQt=h.KS(),this.ZF(A.P9.Touch.O9.RQt))}h.$h(),this.Z6t.delete(e)}}q6t(i){return this.dxt("request-permission",{type:i}),new Promise((t,s)=>{this.gQt.push({type:i,resolve:t,reject:s})})}yQt(t){const s=t.result,i=t.type,e=(this.cQt=i,this.gQt.filter(t=>t.type===i));for(const h of e)h.resolve(s?"granted":"denied");this.gQt=this.gQt.filter(t=>t.type!==i),s?(this.ZF(A.P9.Touch.O9.PQt),0===i?this.Hc.TFt():this.Hc.bFt()):this.ZF(A.P9.Touch.O9.kQt)}TQt(t){"number"==typeof t.webkitCompassHeading?this.$6t=t.webkitCompassHeading:t.absolute&&(this.$6t=t.alpha),this.tQt=t.alpha,this.sQt=t.beta,this.iQt=t.gamma}bQt(t){this.$6t=t.alpha}xQt(t){const s=t.acceleration,i=(s&&(this.eQt=s.x,this.hQt=s.y,this.nQt=s.z),t.accelerationIncludingGravity);i&&(this.rQt=i.x,this.oQt=i.y,this.aQt=i.z)}iZ(){let t=performance.now(),s=0;for(const i of this.Z6t.values())i.jD()<=t-50&&i.FQt(t),i.jQt(t)&&(this.uQt=i.EQt(),this.lQt=i.GB(),this.pQt=s,this.ZF(A.P9.Touch.O9.zQt),this.fQt=i.qS(),this.dQt=i.KS(),this.ZF(A.P9.Touch.O9.BQt),this.pQt=0),++s}UQt(t){t=Math.floor(t);for(const s of this.Z6t.values()){if(0===t)return s;--t}return null}WQt(t,s){return 0<=t&&0<=s&&t<this.Hc.okt()&&s<this.Hc.akt()}bxt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.Z6t.values()].map(t=>({name:"$"+t.GB(),value:t.qS()+", "+t.KS()}))}]}}}{const cu=self.Os;cu.P9.Touch.O9={IQt(){return!0},NQt(){return!0},QQt(){return 0<this.Z6t.size},GQt(t,s){return!!t&&s===this.mQt&&!!this.WQt(this.fQt,this.dQt)&&this.Hc.uO().MAt(t,[[this.fQt,this.dQt]],!1)},JQt(t){if(!t)return!1;const s=this.Hc.X0t(),i=s.Twt(),e=[...this.Z6t.values()].filter(t=>this.WQt(t.qS(),t.KS())).map(t=>[t.qS(),t.KS()]);return cu.xor(this.Hc.uO().MAt(t,e,i),i)},VQt(t,s,i){const e=this.UQt(t);return!!e&&cu.compare(e.yz(),s,i)},YQt(){return!0},HQt(){return!0},qQt(t,s,i){this.Hc.TFt();let e;return e=0===t?this.tQt:1===t?this.sQt:this.iQt,cu.compare(e,s,i)},ZQt(t,s,i){this.Hc.bFt();let e;return e=0===t?this.rQt:1===t?this.oQt:2===t?this.aQt:3===t?this.eQt:4===t?this.hQt:this.nQt,cu.compare(e,s,i)},CQt(t){return(t=Math.floor(t))===this.uQt},_Qt(t){return(t=Math.floor(t))===this.uQt},XQt(t){return t=Math.floor(t),this.Z6t.size>=t+1},zQt(){return!0},AQt(){return!0},OQt(){return!0},BQt(t){return!!t&&!!this.WQt(this.fQt,this.dQt)&&this.Hc.uO().MAt(t,[[this.fQt,this.dQt]],!1)},LQt(t){return!!t&&!!this.WQt(this.fQt,this.dQt)&&this.Hc.uO().MAt(t,[[this.fQt,this.dQt]],!1)},RQt(t){return!!t&&!!this.WQt(this.fQt,this.dQt)&&this.Hc.uO().MAt(t,[[this.fQt,this.dQt]],!1)},PQt(t){return this.cQt===t},kQt(t){return this.cQt===t}}}{const fu=self.Os;fu.P9.Touch.Iht={KQt(t){this.q6t(t)}}}{const du=self.Os;du.P9.Touch.Ght={$Qt(){return this.Z6t.size},b2t(t){const s=this.UQt(this.pQt);return s?s.tJt(this.Hc.X3(),t,!0):0},x2t(t){const s=this.UQt(this.pQt);return s?s.tJt(this.Hc.X3(),t,!1):0},sJt(t,s){const i=this.UQt(t);return i?i.tJt(this.Hc.X3(),s,!0):0},iJt(t,s){const i=this.UQt(t);return i?i.tJt(this.Hc.X3(),s,!1):0},eJt(t,s){const i=this.Z6t.get(t);return i?i.tJt(this.Hc.X3(),s,!0):0},hJt(t,s){const i=this.Z6t.get(t);return i?i.tJt(this.Hc.X3(),s,!1):0},nJt(){const t=this.UQt(0);return t?t.qS():0},rJt(){const t=this.UQt(0);return t?t.KS():0},oJt(t){const s=this.UQt(t);return s?s.qS():0},aJt(t){const s=this.UQt(t);return s?s.KS():0},uJt(t){const s=this.Z6t.get(t);return s?s.qS():0},lJt(t){const s=this.Z6t.get(t);return s?s.KS():0},cJt(t){const s=this.UQt(t);return s?s.yz():0},fJt(t){const s=this.Z6t.get(t);return s?s.yz():0},dJt(t){const s=this.UQt(t);return s?du.ln(s.kP()):0},pJt(t){const s=this.Z6t.get(t);return s?du.ln(s.kP()):0},mJt(){return this.Hc.TFt(),this.$6t},gJt(){return this.Hc.TFt(),this.tQt},yJt(){return this.Hc.TFt(),this.sQt},MJt(){return this.Hc.TFt(),this.iQt},wJt(){return this.Hc.bFt(),this.rQt},SJt(){return this.Hc.bFt(),this.oQt},TJt(){return this.Hc.bFt(),this.aQt},bJt(){return this.Hc.bFt(),this.eQt},xJt(){return this.Hc.bFt(),this.hQt},vJt(){return this.Hc.bFt(),this.nQt},CJt(){return this.uQt},IJt(){return this.lQt},GJt(t){const s=this.Z6t.get(t);return s?s.Yp():0},EJt(t){const s=this.Z6t.get(t);return s?s.nm():0},_Jt(t){const s=this.Z6t.get(t);return s?s.NJt():0}}}{let r=self.Os,s=-1e3,i=-1e3,e=-1e4;r.P9.Touch.vQt=class extends r.Zh{constructor(){super(),this.DJt=0,this.Hv=0,this.NRt=0,this.RA=0,this.AJt=0,this.LJt=0,this.OJt=0,this.Wa=0,this.Qa=0,this.RJt=0,this.PJt=0,this.Om=0,this.Rm=0,this.kJt=0,this.FJt=!1,this.jJt=!1}$h(){}VGt(t,s,i,e,h){this.DJt=e,this.Hv=h,this.RA=t,this.AJt=t,this.NRt=t,this.LJt=s,this.OJt=i,this.Wa=s,this.Qa=i,this.RJt=s,this.PJt=i}LJ(t,s,i,e,h,n){this.AJt=this.RA,this.RA=t,this.RJt=this.Wa,this.PJt=this.Qa,this.Wa=s,this.Qa=i,this.Om=e,this.Rm=h,this.kJt=n,!this.jJt&&15<=r.cn(this.LJt,this.OJt,this.Wa,this.Qa)&&(this.jJt=!0)}GB(){return this.DJt}EQt(){return this.Hv}jD(){return this.RA}FQt(t){this.AJt=t}qS(){return this.Wa}KS(){return this.Qa}yz(){const t=r.cn(this.Wa,this.Qa,this.RJt,this.PJt),s=(this.RA-this.AJt)/1e3;return 0<s?t/s:0}kP(){return r.pn(this.RJt,this.PJt,this.Wa,this.Qa)}Yp(){return this.Om}nm(){return this.Rm}NJt(){return this.kJt}jQt(t){return!this.FJt&&500<=t-this.NRt&&!this.jJt&&r.cn(this.LJt,this.OJt,this.Wa,this.Qa)<15&&(this.FJt=!0)}DQt(t){return!this.FJt&&t-this.NRt<=333&&!this.jJt&&r.cn(this.LJt,this.OJt,this.Wa,this.Qa)<15?t-e<=666&&r.cn(s,i,this.Wa,this.Qa)<25?(s=-1e3,i=-1e3,e=-1e4,"double-tap"):(s=this.Wa,i=this.Qa,e=t,"single-tap"):""}tJt(t,s,i){if(void 0===s){const e=t.e4(0);return e.BH(this.Wa,this.Qa)[i?0:1]}{const h=t.s4(s);return h?h.Kk(this.Wa,this.Qa)[i?0:1]:0}}}}{const pu=self.Os;pu.P9.Text=class extends pu.ubt{constructor(t){super(t)}$h(){super.$h()}}}{const mu=self.Os;mu.P9.Text.CIt=class extends mu.Ybt{constructor(t){super(t)}$h(){super.$h()}Abt(){}h9(t){}l9(){}}}{const gu=self.Os,yu=self.Qs,Mu=[0,0,0],wu=["left","center","right"],Su=["top","center","bottom"],Tu=["ltr","rtl"],bu=["word","cjk","character"],xu=new gu.Rect,vu=new gu.Uu,Cu=new gu.Oo,Iu=gu.Kh(gu.Ua),Gu=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]),L=(gu.P9.Text.Instance=class extends gu.Gxt{constructor(t,s){if(super(t),this.qc="",this.zJt=!0,this.BJt="Arial",this.UJt=12,this.WJt=0,this.yI=!1,this.MI=!1,this.RS=gu.Kh(gu.Oo),this.vI=0,this.CI=0,this.EI="word",this._I=0,this.QJt="auto",this.JJt=1,this.VJt=null,this.YJt="",this.HJt=!1,this.qJt=!1,this.ZJt=null,this.XJt=-1,this.KJt=-1,this.$Jt=0,this.t8t=gu.Kh(gu.Bg.hS,this.Hc.MS(),{timeout:5}),this.t8t.eG=()=>this.Hc.o4(),this.s8t=()=>this.i8t(),this.e8t=!1,s){this.qc=s[0],this.zJt=!!s[1],this.BJt=s[2],this.UJt=s[3],this.WJt=s[4],this.yI=!!s[5],this.MI=!!s[6],this.vI=s[8],this.CI=s[9],this.EI=bu[s[10]],this._I=s[11],this.h8t(this.Hc.aW(s[12]));const i=s[7];this.RS.zo(i[0],i[1],i[2]),this.t4().Sk(s[13]),this.qJt=!!s[15]}this.n8t(),this.r8t()}$h(){this.h8t(null),this.o8t(),this.ZJt&&(this.ZJt.$h(),this.ZJt=null),this.t8t.$h(),this.t8t=null,super.$h()}n8t(){const t=this.t8t;t.Kc(this.qc),t.oG(this.zJt),this.t8t.lI()&&this.VJt?this.t8t.Jp(this.b4().qkt(this.VJt)):this.t8t.Jp(null),t.aG("nearest"!==this.Hc.bO()),t.uG(this.BJt),t.dG(this.WJt),t.mG(this.yI),t.yG(this.MI),t.jS(this.RS),t.vG(wu[this.vI]),t.IG(Su[this.CI]),t.EG(this.EI),t.NG(Tu[this._I])}a8t(){let t=this.t4(),s=(this.t8t.lG(this.UJt),this.t8t.fG(t.fNt()),t.s4()),i;"auto"===this.QJt?i=s.WY(t.Dj()):"fixed"===this.QJt&&(i=this.JJt),t.j5()&&i!==this.t8t.OG()&&t.mDt(!0),this.t8t.LG(t.Yp(),t.nm(),i)}h8t(t){t&&(t.TV()||t.nP().constructor!==gu.P9.uht)||t!==this.VJt&&(this.VJt&&this.VJt.Nf().removeEventListener("animationframeimagechange",this.s8t),this.VJt=t,this.VJt&&this.VJt.Nf().addEventListener("animationframeimagechange",this.s8t),this.n8t(),this.HJt=!1,this.Hc.o4())}i8t(){this.Hc.Zkt(this.VJt),this.Hc.o4(),this.e8t=!0}r8t(){if(this.qJt){let t=this.qc;this.zJt&&(t=gu.Ch.jp(t)),this.ZJt?this.ZJt.Kc(t):this.ZJt=gu.Kh(gu.Yc,this.Hc,t)}else this.ZJt&&(this.ZJt.$h(),this.ZJt=null)}kT(t){const s=this.t4(),i=(this.a8t(),this.e8t&&(this.e8t=!1,this.t8t.lI())&&this.VJt&&this.t8t.Jp(this.b4().qkt(this.VJt)),this.t8t.pb());if(i){const e=s.s4();if(0===s.kP()&&0===e.kP()&&0===s.Dj()&&!s.j5()&&e.aY()){const h=s.Rj(),[n,r]=e.rF(h.Jn(),h.Vn()),[o,a]=e.rF(h.qn(),h.Zn()),u=n-Math.round(n),l=r-Math.round(r),[c,f]=(xu.set(n,r,o,a),xu.offset(-u,-l),vu.ul(xu),t._N(t.HN()));this.Hc.dR().m6(t,c,f),t.mN(i),t.pw(vu,this.t8t.cE()),e.y6(t)}else t.mN(i),s.j5()?this.MUt(s,t):this.wUt(s,t)}}wUt(t,s){let i=t.Rj();this.Hc.vO()&&(i=this.u8t(i)),s.pw(i,this.t8t.cE())}MUt(s,t){const i=s.pDt();if(s.gDt()){s.YNt(xu,vu,!1);let t=vu;this.Hc.vO()&&(t=this.u8t(t)),i.PT(s.z5(),t,this.t8t.cE()),s.mDt(!1)}i.kT(t)}u8t(t){const s=t.Jn()-Math.round(t.Jn()),i=t.Vn()-Math.round(t.Vn());return 0==s&&0==i?t:(vu.C(t),vu.offset(-s,-i),vu)}Pxt(){const t=this.t8t.pb();return t?[t.Yp(),t.nm()]:[100,100]}kxt(){return this.t8t.cE()}zxt(){return!1}aT(){const t={t:this.qc,c:this.RS.toJSON(),fn:this.BJt,ps:this.UJt};return this.zJt&&(t.bbc=this.zJt),0!==this.vI&&(t.ha=this.vI),0!==this.CI&&(t.va=this.CI),"word"!==this.EI&&(t.wr=this.EI),0!==this.WJt&&(t.lho=this.WJt),this.yI&&(t.b=this.yI),this.MI&&(t.i=this.MI),-1!==this.KJt&&(t.tw={st:this.XJt,en:this.KJt,l:this.$Jt}),this.VJt&&(t.ioc=this.VJt._V()),"fixed"===this.QJt&&(t.fs=this.JJt),t}uT(t){if(this.o8t(),this.qc=t.t,this.RS.Da(t.c),this.BJt=t.fn,this.UJt=t.ps,this.zJt=!!t.hasOwnProperty("bbc")&&t.bbc,this.vI=t.hasOwnProperty("ha")?t.ha:0,this.CI=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.EI="boolean"==typeof s?s?"word":"character":s}else this.EI="word";if(this.WJt=t.hasOwnProperty("lho")?t.lho:0,this.yI=!!t.hasOwnProperty("b")&&t.b,this.MI=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const i=t.tw;this.XJt=i.st,this.KJt=i.en,this.$Jt=i.l}if(t.hasOwnProperty("ioc")){const e=this.b4().aW(t.ioc);e&&this.h8t(e)}else this.h8t(null);t.hasOwnProperty("fs")?(this.QJt="fixed",this.JJt=t.fs):this.QJt="auto",this.n8t(),this.r8t(),this.HJt=!1,-1!==this.KJt&&this.Mxt()}nnt(t){switch(t){case 0:return this.AG();case 1:return this.zJt;case 2:return this.l8t();case 3:return this.c8t();case 4:return this.f8t();case 5:return this.d8t();case 6:return this.p8t();case 7:return Mu[0]=this.RS.Ho(),Mu[1]=this.RS.qo(),Mu[2]=this.RS.Zo(),Mu;case 8:return this.m8t();case 9:return this.g8t();case 10:return this.y8t();case 15:return this.M8t()}}cnt(t,s){switch(t){case 0:this.w8t(s);break;case 1:this.zJt!==!!s&&(this.zJt=!!s,this.n8t());break;case 2:this.S8t(s);break;case 3:this.T8t(s);break;case 4:this.b8t(s);break;case 5:this.x8t(s);break;case 6:this.v8t(s);break;case 7:const i=this.RS,e=s;i.Ho()===e[0]&&i.qo()===e[1]&&i.Zo()===e[2]||(this.RS.zo(e[0],e[1],e[2]),this.n8t());break;case 8:this.C8t(s);break;case 9:this.I8t(s);break;case 10:this.G8t(s)}}xxt(t,s,i,e){0===s&&0===i&&0===e||7===t&&(this.RS.Bo(s,i,e),this.n8t())}w8t(t){this.qc!==t&&(this.qc=t,this.t8t.Kc(t),this.r8t(),this.HJt=!1,this.Hc.o4())}AG(){return this.qc}E8t(t,s){this.a8t(),this.w8t(t),this.XJt=this.Hc.o3(),this.KJt=this.XJt+s/this.xB().EF(),this.$Jt=this.t8t.jG(),this.t8t.wG(0),this.Mxt()}o8t(){this.XJt=-1,this.KJt=-1,this.$Jt=0,this.t8t.wG(-1),this.sxt()}_8t(){-1!==this.KJt&&(this.o8t(),this.ZF(gu.P9.Text.O9.N8t),this.Hc.o4())}S8t(t){this.BJt!==t&&(this.BJt=t,this.t8t.uG(t),this.Hc.o4())}l8t(){return this.BJt}x8t(t){this.yI!==(t=!!t)&&(this.yI=t,this.t8t.mG(t),this.Hc.o4())}d8t(){return this.yI}v8t(t){this.MI!==(t=!!t)&&(this.MI=t,this.t8t.yG(t),this.Hc.o4())}p8t(){return this.MI}T8t(t){this.UJt!==t&&(this.UJt=t,this.Hc.o4())}c8t(){return this.UJt}D8t(t){this.RS.ia(t)||(this.RS.Yo(t),this.t8t.jS(this.RS),this.Hc.o4())}A8t(){return this.RS}b8t(t){this.WJt!==t&&(this.WJt=t,this.n8t(),this.Hc.o4())}f8t(){return this.WJt}C8t(t){this.vI!==t&&(this.vI=t,this.n8t(),this.Hc.o4())}m8t(){return this.vI}I8t(t){this.CI!==t&&(this.CI=t,this.n8t(),this.Hc.o4())}g8t(){return this.CI}L8t(t){this.G8t(bu[t])}G8t(t){this.EI!==t&&(this.EI=t,this.n8t(),this.Hc.o4())}y8t(){return this.EI}O8t(t){this._I!==t&&(this._I=t,this.n8t(),this.Hc.o4())}R8t(){return this._I}P8t(t){this.qJt=!!t,this.r8t()}M8t(){return this.qJt}k8t(t){this.QJt!==t&&(this.QJt=t,this.Hc.o4())}F8t(){return this.QJt}j8t(t){this.JJt!==t&&(this.JJt=t,"fixed"===this.QJt)&&this.Hc.o4()}z8t(){return this.JJt}B8t(){return this.a8t(),this.t8t.PG()}U8t(){return this.a8t(),this.t8t.FG()}W8t(t,s){this.a8t();const i=this.t4(),e=(Iu.set(t-i.qS(),s-i.KS()),Iu.rotate(-i.kP()),Iu.offset(i.Yp()*i.Pz(),i.nm()*i.Fz()),Iu.Ct(i.Yp(),i.nm()),Iu.scale(this.t8t.Yp(),this.t8t.nm()),this.t8t.BG(Iu.Ya(),Iu.qa()));if(e){const h=e.qm("tag");if(h)return h.Lp}return""}Q8t(t,s,i){const e=this.W8t(s,i);return e&&gu.lh(t,e)}J8t(t,s){this.a8t(),s=Math.floor(s);const i=this.t8t.WG(t,s);if(!i)return null;const e=this.t4(),h=this.t8t.bG(),n=i.Qm(),r=i.Vm()-(i.nm()-i.om())*h,o=i.Yp()*h/this.t8t.Yp()*e.Yp(),a=i.nm()*h/this.t8t.nm()*e.nm();return Iu.set(n,r),Iu.Ct(this.t8t.Yp(),this.t8t.nm()),Iu.scale(e.Yp(),e.nm()),Iu.offset(-e.Yp()*e.Pz(),-e.nm()*e.Fz()),Iu.rotate(e.kP()),Iu.offset(e.qS(),e.KS()),{x:Iu.Ya(),y:Iu.qa(),width:o,height:a}}V8t(t){return this.a8t(),this.t8t.QG(t)}Y8t(t){let s=Gu.get(t);return null===s?"":`</${s||"span"||"span"}>`}H8t(t,s){let i=Gu.get(t);if(null===i)return"";switch(i=i||"span",t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async q8t(){if(!this.HJt){let t=new gu.Ch(this.qc,{Sp:!0}).Dp(),s=new Map,h='<span class="c3-text"',i=[],n=(i.push(`font-family: '${this.l8t()}';`),this.d8t()&&i.push("font-weight: bold;"),this.p8t()&&i.push("font-style: italic;"),"character"===this.y8t()&&i.push("word-break: break-all;"),h+=` style="${i.join(" ")}">`,this.VJt?this.b4().qkt(this.VJt):null);if(this.VJt){const o=gu.Kh(gu.$0),a=[],u=new Map;for(const c of t)if(c.im()){const f=c.sg(n);if(f){const d=f.kg(),p=d.Lz().aCt();u.has(p)||(u.set(p,null),a.push(o.$l(async()=>{const t=await p.dJ();u.set(p,t)})))}}await Promise.all(a);const l=[];for(const m of t)if(m.im()){const g=m.sg(n);if(g){const y=g.kg(),M=y.Lz().aCt();l.push(o.$l(async()=>{const t=await y.Lz().lCt(u.get(M));s.set(g,t)}))}}await Promise.all(l);for(const w of u.values())w instanceof ImageBitmap&&w.close&&w.close()}const r=new Map;for(const S of t){let e=S.Xm(),t=[...r.keys()];t.reverse();for(const T of t)e.has(T)&&e.get(T)===r.get(T)||(r.delete(T),h+=this.Y8t(T));for(const[b,x]of e)r.has(b)||(r.set(b,x),h+=this.H8t(b,x));if(S.$p()&&(h+=gu.zd(gu.Fd(S.Tm().join("")),"\n","<br>")),S.im()&&n){const v=S.sg(n);if(v){const C=s.get(v);if(C){let t=[],s="0.2em",i=e.get("iconoffsety");if(i){let t=i.trim();s=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}t.push("top: "+s),"nearest"===this.Hc.bO()&&t.push("image-rendering: pixelated"),h+=`<img class="c3-text-icon" data-icon="${S.tg()}" width="${v.Yp()}" height="${v.nm()}" style="${t.join(";")}" src="${C}">`}}}}const e=[...r.keys()];e.reverse();for(const I of e)h+=this.Y8t(I);h+="</span>",this.YJt=h,this.HJt=!0}return this.YJt}uX(){const s=this.Hc.o3();if(s>=this.KJt)this.o8t(),this.ZF(gu.P9.Text.O9.N8t),this.Hc.o4();else{let t=gu.xn(this.XJt,this.KJt,s,0,this.$Jt);(t=Math.floor(t))!==this.t8t.SG()&&(this.t8t.wG(t),this.Hc.o4())}}bxt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.AG(),HUt:t=>this.w8t(t)},{name:t+".properties.font.name",value:this.l8t(),HUt:t=>this.S8t(t)},{name:t+".properties.size.name",value:this.c8t(),HUt:t=>this.T8t(t)},{name:t+".properties.line-height.name",value:this.f8t(),HUt:t=>this.b8t(t)},{name:t+".properties.bold.name",value:this.d8t(),HUt:t=>this.x8t(t)},{name:t+".properties.italic.name",value:this.p8t(),HUt:t=>this.v8t(t)}]}]}Lbt(){return self.Z8t}},new WeakMap),Eu=new Map([["left",0],["center",1],["right",2]]),_u=new Map([["top",0],["center",1],["bottom",2]]),Nu=["ltr","rtl"];new Set(["auto","fixed"]);self.Z8t=class extends self.U5{constructor(){super(),L.set(this,self.uF.pF().Y5())}get text(){return L.get(this).AG()}set text(t){yu.we(t);const s=L.get(this);s.o8t(),s.w8t(t)}X8t(t,s){yu.we(t),yu.me(s);const i=L.get(this);i.o8t(),i.E8t(t,s)}K8t(){L.get(this)._8t()}set S6(t){yu.we(t),L.get(this).S8t(t)}get S6(){return L.get(this).l8t()}set b6(t){L.get(this).x8t(t)}get b6(){return L.get(this).d8t()}set x6(t){L.get(this).v8t(t)}get x6(){return L.get(this).p8t()}set T6(t){yu.me(t),L.get(this).T8t(t)}get T6(){return L.get(this).c8t()}set $8t(t){if(yu.Re(t),t.length<3)throw new Error("expected 3 elements");Cu.zo(t[0],t[1],t[2]),L.get(this).D8t(Cu)}get $8t(){const t=L.get(this).A8t();return[t.Ho(),t.qo(),t.Zo()]}set lineHeight(t){yu.me(t),L.get(this).b8t(t)}get lineHeight(){return L.get(this).f8t()}set I6(t){yu.we(t);const s=Eu.get(t);if(void 0===s)throw new Error("invalid mode");L.get(this).C8t(s)}get I6(){return wu[L.get(this).m8t()]}set verticalAlign(t){yu.we(t);const s=_u.get(t);if(void 0===s)throw new Error("invalid mode");L.get(this).I8t(s)}get verticalAlign(){return Su[L.get(this).g8t()]}set G6(t){if(!bu.includes(t))throw new Error("invalid mode");L.get(this).G8t(t)}get G6(){return L.get(this).y8t()}set E6(t){yu.we(t);const s=Nu.indexOf(t);if(-1===s)throw new Error("invalid text direction");L.get(this).O8t(s)}get E6(){return Nu[L.get(this).R8t()]}set tVt(t){L.get(this).P8t(!!t)}get tVt(){return L.get(this).M8t()}sVt(t){yu.me(t);const s=L.get(this);s.k8t("fixed"),s.j8t(t)}iVt(){L.get(this).k8t("auto")}get D6(){return L.get(this).B8t()}get A6(){return L.get(this).U8t()}eVt(){const t=L.get(this);return[t.B8t(),t.U8t()]}hVt(t,s,i){return yu.we(t),yu.me(s),yu.me(i),L.get(this).Q8t(t,s,i)}nVt(t,s){return yu.me(t),yu.me(s),L.get(this).W8t(t,s)}rVt(t,s=0){return yu.we(t),yu.me(s),L.get(this).J8t(t,s)}oVt(t){return yu.we(t),L.get(this).V8t(t)}aVt(t){const s=L.get(this),i=s.b4().sR(t);s.h8t(i)}uVt(){return L.get(this).q8t()}}}{const Du=self.Os;Du.P9.Text.O9={lVt(t,s){return s?this.qc===t:Du.lh(this.qc,t)},cVt(){return-1!==this.KJt},N8t(){return!0},fVt(t,s,i){return this.Q8t(t,s,i)}}}{const Au=self.Os,Lu=Au.Kh(Au.Oo);Au.P9.Text.Iht={Kc(t){this.o8t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.w8t(t.toString())},dVt(t){this.o8t(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.w8t(this.qc+t)},pVt(t,s){this.o8t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.E8t(t.toString(),s)},mVt(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.BJt&&i===this.yI&&e===this.MI||(this.S8t(t),this.x8t(i),this.v8t(e))},lG(t){this.T8t(t)},gVt(t){Lu.ca(t),Lu.rn(),this.D8t(Lu)},yVt(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},GWt(t){this.t4().FS(t),this.Hc.o4()},MVt(){this._8t()},dG(t){this.b8t(t)},wVt(t){this.C8t(t)},SVt(t){this.I8t(t)},TVt(t){this.L8t(t)},NG(t){this.O8t(t)},bVt(t){this.h8t(t)},xVt(){return this.q8t()},vVt(t){this.P8t(t)},CVt(t,s){this.k8t(["auto","fixed"][t]),this.j8t(s)}}}{const Ou=self.Os;Ou.P9.Text.Ght={Text(){return this.qc},IVt(){return this.zJt?Ou.Ch.jp(this.qc):this.qc},GVt(){return this.BJt},EVt(){return this.UJt},_Vt(){return this.B8t()},NVt(){return this.U8t()},DVt(){return this.WJt},AVt(t,s){return this.W8t(t,s)},LVt(t){return this.V8t(t)},OVt(t,s){const i=this.J8t(t,s);return i?i.x:0},RVt(t,s){const i=this.J8t(t,s);return i?i.y:0},PVt(t,s){const i=this.J8t(t,s);return i?i.width:0},kVt(t,s){const i=this.J8t(t,s);return i?i.height:0},FVt(){return this.YJt}}}{const Ru=self.Os;Ru.dat.jVt=class extends Ru.lvt{constructor(t){super(t);const s=this.Hc.Nf();this.a0=new Ru.n0(Ru.$f.h0(s,"pointerdown",t=>this.MQt(t.data)),Ru.$f.h0(s,"pointermove",t=>this.wQt(t.data)),Ru.$f.h0(s,"pointerup",t=>this.SQt(t.data,!1)),Ru.$f.h0(s,"pointercancel",t=>this.SQt(t.data,!0)))}$h(){this.a0.$h(),this.a0=null,super.$h()}MQt(t){"mouse"===t.pointerType&&0!==t.button||this.zVt(t.pointerId.toString(),t.pageX-this.Hc.$k(),t.pageY-this.Hc.tF())}wQt(t){0!=(1&t.lastButtons)&&0==(1&t.buttons)?this.BVt(t.pointerId.toString()):this.UVt(t.pointerId.toString(),t.pageX-this.Hc.$k(),t.pageY-this.Hc.tF())}SQt(t,s){"mouse"===t.pointerType&&0!==t.button||this.BVt(t.pointerId.toString())}async zVt(t,s,i){let e=this.gP(),h=null,n=null,r=0,o=0;for(const a of e){const u=a.pat(Ru.dat.jVt);if(u.zl()&&!u.WVt()&&!a.EU()){const l=a.t4(),c=l.s4(),[f,d]=c.Kk(s,i,l.Dj());if(c._k()&&l.Kj(f,d))if(h){const p=h.t4();(c.iO()>p.s4().iO()||c.iO()===p.s4().iO()&&l.i4()>p.i4())&&(h=a,n=u,r=f,o=d)}else h=a,n=u,r=f,o=d}}h&&await n.QVt(t,r,o)}UVt(t,s,i){const e=this.gP();for(const h of e){const n=h.pat(Ru.dat.jVt);if(n.zl()&&n.WVt()&&(!n.WVt()||n.JVt()===t)){const r=h.t4(),o=r.s4(),[a,u]=o.Kk(s,i,r.Dj());n.VVt(a,u)}}}async BVt(t){const s=this.gP();for(const i of s){const e=i.pat(Ru.dat.jVt);e.WVt()&&e.JVt()===t&&await e.YVt()}}}}{const Pu=self.Os;Pu.dat.jVt.CIt=class extends Pu.mvt{constructor(t){super(t)}$h(){super.$h()}Abt(){}}}{const ku=self.Os,Fu=self.K5,ju=(ku.dat.jVt.Instance=class extends ku.yvt{constructor(t,s){super(t),this.HVt=!1,this.qVt=0,this.ZVt=0,this.XVt="<none>",this.KVt=0,this.Xgt=!0,s&&(this.KVt=s[0],this.Xgt=s[1])}$h(){super.$h()}aT(){return{a:this.KVt,e:this.Xgt}}uT(t){this.KVt=t.a,this.Xgt=t.e,this.HVt=!1}QTt(t){this.Xgt=!!t,this.Xgt||(this.HVt=!1)}zl(){return this.Xgt}$Vt(t){this.KVt=t}tYt(){return this.KVt}sYt(){this.HVt&&this.YVt()}WVt(){return this.HVt}JVt(){return this.XVt}async QVt(t,s,i){const e=this.t4();this.qVt=s-e.qS(),this.ZVt=i-e.KS(),this.HVt=!0,this.XVt=t,this.Zbt("dragstart"),await this.KF(ku.dat.jVt.O9.iYt)}VVt(t,s){const i=this.t4(),e=t-this.qVt,h=s-this.ZVt;0===this.KVt?i.qS()===e&&i.KS()===h||(i.Ij(e,h),i.Cj()):1===this.KVt?i.qS()!==e&&(i.ZS(e),i.Cj()):2===this.KVt&&i.KS()!==h&&(i.$S(h),i.Cj())}async YVt(){this.HVt=!1,this.Zbt("drop"),await this.KF(ku.dat.jVt.O9.eYt)}nnt(t){switch(t){case 0:return this.tYt();case 1:return this.zl()}}cnt(t,s){switch(t){case 0:this.$Vt(s);break;case 1:this.QTt(!!s)}}bxt(){let t="behaviors.dragndrop",s=t+".properties.axes",i="";return 0===this.KVt?i=s+".items.both":1===this.KVt?i=s+".items.horizontal-only":2===this.KVt&&(i=s+".items.vertical-only"),[{title:"$"+this.nz().zc(),properties:[{name:t+".debugger.is-dragging",value:this.WVt()},{name:s+".name",value:[i]},{name:t+".properties.enabled.name",value:this.zl(),HUt:t=>this.QTt(t)}]}]}Lbt(){return self.hYt}},new WeakMap),zu=["both","horizontal","vertical"];self.hYt=class extends Fu{constructor(){super(),ju.set(this,Fu.pF().Y5())}set axes(t){const s=zu.indexOf(t);if(-1===s)throw new Error("invalid axes");ju.get(this).$Vt(s)}get axes(){return zu[ju.get(this).tYt()]}nYt(){ju.get(this).sYt()}get rYt(){return ju.get(this).WVt()}get isEnabled(){return ju.get(this).zl()}set isEnabled(t){ju.get(this).QTt(t)}}}{const Bu=self.Os;Bu.dat.jVt.O9={WVt(){return this.WVt()},iYt(){return!0},eYt(){return!0},zl(){return this.zl()}}}{const Uu=self.Os;Uu.dat.jVt.Iht={U2t(t){this.QTt(!!t)},oYt(t){this.$Vt(t)},aYt(){this.sYt()}}}{const Wu=self.Os;Wu.dat.jVt.Ght={}}{let t=function(t,s){return"number"==typeof t&&"number"==typeof s},h=function(i,e){if("string"!=typeof i&&"string"!=typeof e)return i&&e?1:0;{let t,s;return t="number"==typeof i?(Math.round(1e10*i)/1e10).toString():i,s="number"==typeof e?(Math.round(1e10*e)/1e10).toString():e,t+s}};t,h,0;self.fMt=[t=>{const s=t.bMt(0).Uyt();return()=>s()},()=>"",()=>0,t=>{const s=t.bMt(0);return()=>s.Hyt()-1},t=>{const s=t.bMt(0).cMt(),i=t.bMt(1).Uyt();return()=>h(s.qit()+",",i())},t=>{const s=t.bMt(0).Uyt(),i=t.bMt(1),e=t.bMt(2).Uyt();return()=>s()/i.Hyt()*(e()+.5)},()=>150,t=>{const s=t.bMt(0).cMt();return()=>s.qit()+","},t=>{const s=t.bMt(0).Uyt(),i=t.bMt(1).Uyt();return()=>s()+" - "+i()+" - (C) Wild Haired Science Teacher - Find more at whscience.org"},t=>{const s=t.bMt(0),i=t.bMt(1);return()=>s.Hyt()+i.Hyt()/2+2},t=>{const s=t.bMt(0).Uyt(),i=t.bMt(1).Uyt(),e=t.bMt(2).cMt(),h=t.bMt(3).Uyt(),n=t.bMt(4).Uyt(),r=t.bMt(5).cMt();return()=>s(i(e.qit(),Math.ceil(h(n(r.qit(),",")-2)),","))},t=>{const s=t.bMt(0).Uyt(),i=t.bMt(1).cMt();return()=>s(i.qit())},t=>{const s=t.bMt(0),i=t.bMt(1).cMt(),e=t.bMt(2).cMt();return()=>h(s.Hyt()+"\n ",i.qit())+" "+e.qit()},t=>{const s=t.bMt(0).Uyt(),i=t.bMt(1).cMt(),e=t.bMt(2).cMt();return()=>s(i.qit(),h(",",e.qit())+",",",")}]}var t=self.Os;self.kPt=function(){return[t.P9.uht,t.dat.jVt,t.P9.WWt,t.P9.Touch,t.P9.Text,t.P9.R9.O9.L9,t.P9.R9.Iht.u5t,t.P9.WWt.Ght.E6t,t.P9.WWt.Ght._6t,t.P9.Text.Iht.tm,t.P9.uht.Iht.i2t,t.P9.R9.Iht.qjt,t.P9.R9.O9.jjt,t.P9.uht.Ght.NWt,t.P9.R9.Ght.xBt,t.P9.R9.Iht.i5t,t.P9.WWt.Ght.N6t,t.P9.uht.Iht.KUt,t.P9.R9.Iht.vr,t.P9.Text.Iht.Kc,t.P9.R9.Ght.RBt,t.P9.R9.Ght.PBt,t.P9.uht.Iht.ZS,t.P9.Text.Ght.b2t,t.P9.Text.Ght._Vt,t.P9.R9.Iht.Z5t,t.P9.R9.O9.K0,t.P9.R9.Ght.azt,t.P9.R9.Ght.Tzt,t.P9.R9.Ght.random,t.P9.R9.Ght.bzt,t.P9.uht.Iht.ZUt,t.P9.Text.Ght.Text,t.P9.R9.Ght.replace]},self.tkt=[{uYt:0},{lYt:0},{WWt:0},{Touch:0},{Text:0},{cYt:0},{fYt:0},{dYt:0},{pYt:0}],self.mYt={lYt:class extends self.tWt{},WWt:class extends self.uF{},Touch:class extends self.uF{},Text:class extends self.Z8t{},cYt:class extends self.Z8t{},fYt:class extends self.tWt{}};